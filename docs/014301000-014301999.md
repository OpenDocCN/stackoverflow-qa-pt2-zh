# StackOverflow 问答 14301000-14301999

# sql - SQL列出处理最多客户的代表

> ID：14301002
> 
> 赞同：0
> 
> 时间：2013-01-13T05:40:31.880
> 
> 标签：sql, count, group-by

我有 2 张桌子`SALESREP`，`CUSTOMER` 我需要找出哪个销售代表拥有最多的客户

我有以下代码：

```
select rep_lname, count(cust_num) 
from customer inner join salesrep 
on customer.REP_NUM = SALESREP.REP_NUM 
group by rep_lname 
```

这为我提供了每个销售代表拥有的客户数量的所有行，而我只需要拥有最多客户的行。

如何找到具有 MAX num of customers 的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T05:48:50.720

```
select rep_lname, count(cust_num) 
from customer inner join salesrep 
on customer.REP_NUM = SALESREP.REP_NUM 
group by rep_lname order by count(cust_num) desc limit 1; 
```

我确定还有另一种使用方式`having`，但目前我似乎无法弄清楚。也许其他人会附和它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T08:47:47.397

```
SELECT TOP 1 WITH TIES rep_lname, COUNT(cust_num)
FROM customer inner join salesrep 
  ON customer.REP_NUM = SALESREP.REP_NUM 
GROUP BY rep_lname
ORDER BY count(cust_num) DESC 
```

# python - 在熊猫数据框中按多个时间单位分组

> ID：14301004
> 
> 赞同：9
> 
> 时间：2013-01-13T05:40:50.393
> 
> 标签：python, pandas

我有一个数据框，其中包含间隔为 15 秒的时间序列数据：

```
date_time             value    
2012-12-28 11:11:00   103.2
2012-12-28 11:11:15   103.1
2012-12-28 11:11:30   103.4
2012-12-28 11:11:45   103.5
2012-12-28 11:12:00   103.3 
```

数据跨越多年。我想按年份和时间分组，以查看多年来时间效应的分布。例如，我可能想计算几天内每 15 秒间隔的平均值和标准差，并查看从 2010 年、2011 年、2012 年等开始的平均值和标准差如何变化。我天真地尝试过`data.groupby(lambda x: [x.year, x.time])`，但没有奏效. 我怎么能做这样的分组？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-13T17:52:51.730

如果`date_time`不是您的索引，`date_time`可以使用以下命令创建 -indexed DataFrame：

```
dfts = df.set_index('date_time') 
```

从那里你可以使用按间隔分组

```
dfts.groupby(lambda x : x.month).mean() 
```

查看每个月的平均值。同样，你可以做

```
dfts.groupby(lambda x : x.year).std() 
```

多年来的标准偏差。

如果我理解您想要完成的示例任务，您可以使用 将数据拆分为年份`xs`，将它们分组并连接结果并将其存储在一个新的`DataFrame`.

```
years = range(2012, 2015)
yearly_month_stats = [dfts.xs(str(year)).groupby(lambda x : x.month).mean() for year in years]
df2 = pd.concat(yearly_month_stats, axis=1, keys = years) 
```

你从中得到类似的东西

```
 2012       2013       2014
       value      value      value
1        NaN   5.324165  15.747767
2        NaN -23.193429   9.193217
3        NaN -14.144287  23.896030
4        NaN -21.877975  16.310195
5        NaN  -3.079910  -6.093905
6        NaN  -2.106847 -23.253183
7        NaN  10.644636   6.542562
8        NaN  -9.763087  14.335956
9        NaN  -3.529646   2.607973
10       NaN -18.633832   0.083575
11       NaN  10.297902  14.059286
12  33.95442  13.692435  22.293245 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-14T14:31:24.347

你很接近：

```
data.groupby([lambda x: x.year, lambda x: x.time]) 
```

还要确保设置`date_time`为索引，如[kermit666](https://stackoverflow.com/users/544059/kermit666)的回答

# drupal - 是否有任何可用于支持视频和图像的 drupal 模块？

> ID：14301009
> 
> 赞同：0
> 
> 时间：2013-01-13T05:41:54.937
> 
> 标签：drupal, module, media

我是drupal的新手，我想要这样的东西，有没有支持视频和图片的模块，请告诉我如何实现这个！！！

![eu.square-enix.com 中的 Drupal 模块](../Images/61c7a1a1e5f9273804af11db61d75bf4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T06:40:49.953

提供您所需功能的模块是[动态显示块](http://drupal.org/project/ddblock)模块。

但是还有其他模块，例如[Media: Flickr](http://drupal.org/project/media_flickr)和[MediaFront](http://drupal.org/project/mediafront)可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:50:25.030

看看以下灯箱模块。

[http://drupal.org/node/266126](http://drupal.org/node/266126)

# ios - 限制对 iphone 的访问，直到提供随机重置代码。重置代码通过电子邮件在应用程序和用户之间进行通信

> ID：14301010
> 
> 赞同：-5
> 
> 时间：2013-01-13T05:42:13.320
> 
> 标签：ios

我正在制作一个定制的闹钟 iPhone 应用程序。为了关闭闹钟，用户必须输入一个随机代码，该代码会在闹钟响前 2 小时前发送到他的电子邮件。我正在寻找一种机制，通过它我可以限制完全访问，直到用户输入随机重置代码。此外，此时不应允许用户降低音量、关闭手机或任何其他机制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T05:51:04.960

阅读应用商店指南，几乎以上所有内容不仅是不可能的，而且即使你能够做到其中一两个，你的应用肯定会被 App Store 拒绝（我假设你会这样用它做）。不允许应用更改设备上的用户控件和按钮的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T07:11:53.350

`Also, at this time, the user should not be allowed to reduce the volume, turn off the phone, or any other mechanisms.`

没有任何公共 API 可以让您执行这些操作。尝试这样做实际上违反了应用程序指南，并且会导致您的应用程序被拒绝。

但是，您可以控制用户对您应用程序中信息的访问权限。例如，您可以创建一个“锁定”屏幕，要求用户输入通过电子邮件收到的代码，然后才能使用/恢复应用程序。

# c# - 如何确定 MSR 是否已使用 C# 完成从信用卡中读取数据？

> ID：14301011
> 
> 赞同：0
> 
> 时间：2013-01-13T05:42:20.570
> 
> 标签：c#

我有一个特定的文本框，当我从 MSR 刷信用卡时，其中的价值将在那里。

我想要发生的是我想在刷卡后触发一个特定的功能而不使用任何按钮，等等我想自动发生它。并提示函数的结果。

这可能吗？

任何建议或指南会有很大帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T06:41:37.213

信用卡号的长度为 12-19 个字符。前六位数字标识发行人。有关详细信息，请参阅[http://en.wikipedia.org/wiki/Bank_card_number 。](http://en.wikipedia.org/wiki/Bank_card_number)

您可以创建一个侦听方法，`TextBox.TextChanged`当文本长度至少为 6 位时，获取发行者，然后如果达到所需长度，则拨打您的信用卡处理号码。

此外，可以对某些 MSR 进行编程以发送文本结束 (ETX) 字符。

希望能帮助到你。

# html - RoR - 在帖子中渲染链接

> ID：14301014
> 
> 赞同：-2
> 
> 时间：2013-01-13T05:42:54.073
> 
> 标签：html, ruby-on-rails, hyperlink, blogs

我在很长一段时间没有使用 Rails 后正在建立一个网站，该网站的一小部分将是一个简单的新闻博客结构。我从 rails 生成的基本 post/view 结构开始，尽管进行了一些修改以使其更加专业化。一切正常，除了我不断遇到的一个错误，在帖子中我需要能够创建链接和图像（duh）但只是将 html 扔到我的帖子中意味着它们不会呈现并且 html 标签只会显示（例如东西等），红宝石标签也是如此（我认为这是因为它在发布时进行了后解析。我认为这是因为当它们在沿线的某个地方创建但找不到时，rails 正在清理这些帖子执行此操作的任何代码...我确定之前有人遇到过此问题，但我可以

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T06:45:46.587

这很可能是由于 rails 为安全而转义了 HTML 标记。您可以使用原始方法来克服这个问题

```
Ex: <a htef='http://google.com'>google </a>

<%= raw("<a htef='http://google.com'>google </a>")%> #will render the hyperlink 
```

高温高压

# css - Twitter引导导航栏类影响文本对齐

> ID：14301020
> 
> 赞同：0
> 
> 时间：2013-01-13T05:45:01.850
> 
> 标签：css, button, twitter-bootstrap, navbar, text-alignment

第一个示例按预期对齐。第二个（导航栏类）不：

```
<div>
  <span>Good</span>
  <button type="submit" class="btn">logout</button>
</div>

<div class="navbar">
  <span>Bad</span>
  <button type="submit" class="btn">logout</button>
</div> 
```

小提琴：http: [//jsfiddle.net/Y76Nt/1/](http://jsfiddle.net/Y76Nt/1/)

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:19:18.340

在文档中找到答案。刚刚逃脱了我：

文本：使用 .navbar-text 将文本字符串包裹在元素中，通常在`<p>`标签上以获取正确的前导和颜色。

[http://twitter.github.com/bootstrap/components.html#navbar](http://twitter.github.com/bootstrap/components.html#navbar)

# sql-server - ASP.NET MVC EF Seeder 无法删除行，因为外键关系

> ID：14301021
> 
> 赞同：0
> 
> 时间：2013-01-13T05:45:30.120
> 
> 标签：sql-server, asp.net-mvc, entity-framework, seeding

我的实体框架有一个播种器，一个函数 ResetTables()，它从所有表中删除所有行，然后重新播种它们。

外键关系阻止了我的删除语句，我设法通过按精确顺序删除内容暂时解决了这个问题，但现在，即使这样也行不通。

我该如何解决这个问题。

这是我的 ResetTables() 方法的示例

```
db.Database.ExecuteSqlCommand("INSERT INTO Badges (Name) VALUES (null)");
db.Database.ExecuteSqlCommand("DELETE FROM Badges; DBCC CHECKIDENT(Badges, RESEED, 0)"); 
```

注意：插入和重置只是为了让事情回到 0，这样我的 ID 就不会爬到高位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:27:29.973

如果您想清除数据库并且不想处理约束，您可以[暂时关闭它们，执行删除并打开约束](https://stackoverflow.com/questions/159038/can-foreign-key-constraints-be-temporarily-disabled-using-t-sql)。

# c# - Async Tcp Server 我只能得到一个客户端

> ID：14301022
> 
> 赞同：0
> 
> 时间：2013-01-13T05:45:38.777
> 
> 标签：c#, asynchronous, tcp

Async Tcp Server 我只能得到一个客户端。

当我有多个客户端时。我只是在服务器中获得第一个客户端，但其他客户端在客户端中连接。

这是我的服务器代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net.Sockets;
using System.Threading;

namespace BeginAcceptTcpClientserver
{

class Program
{

    static void Main(string[] args)
    {
        TcpListener listener = new TcpListener(1234);
        listener.Start();
        listener.BeginAcceptTcpClient(callbake,listenner);

        Console.WriteLine("print q to quit");
        ConsoleKey key;
        do 
        {
            key = Console.ReadKey().Key;
        } while (key != ConsoleKey.Q);

    }
    static void callbake(IAsyncResult ar)
    {

        TcpClient clienter = ((TcpListener)ar.AsyncState).EndAcceptTcpClient(ar);
        Console.WriteLine("---client connect {0}<--{1} ---", clienter.Client.LocalEndPoint, clienter.Client.RemoteEndPoint);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T06:16:34.920

TcpListener.BeginAcceptTcpClient 仅侦听一个传入连接。您需要一次又一次地调用它，也许在您的回调方法中：

```
static void callbake(IAsyncResult ar)
{
    // call BeginAcceptTcpClient here so that it's called everytime a connection is accepted
    TcpListener listener = (TcpListener)ar.AsyncState;
    listener.BeginAcceptTcpClient(new AsyncCallback(callbake), listener);

    TcpClient clienter = listener.EndAcceptTcpClient(ar);
    Console.WriteLine("---client connect {0}<--{1} ---", clienter.Client.LocalEndPoint, clienter.Client.RemoteEndPoint);
} 
```

# php - 使用PHP的数组中的文件夹树

> ID：14301023
> 
> 赞同：0
> 
> 时间：2013-01-13T05:45:51.397
> 
> 标签：php, iterator, directory

我正在尝试显示文件夹树。它的工作都很好。下面是代码。

```
$fileData = fillArrayWithFileNodes( new DirectoryIterator( $dir ) );

    function fillArrayWithFileNodes( DirectoryIterator $dir )
    {
      $data = array();
      foreach ( $dir as $node )
      {
        if ( $node->isDir() && !$node->isDot() )
        {
          $data[$node->getFilename()] = fillArrayWithFileNodes( new DirectoryIterator( $node->getPathname() ) );
        }
        else if ( $node->isFile() )
        {
          $data[] = $node->getFilename();
        }
      }
      return $data;
    } 
```

但我有一个新的要求。我想在课堂上使用它，这样我就可以这样使用它。

```
 $tree = new folderTree();
    $structure = $tree->display('testdir',2); //2 is the level of subfolders 
```

所以我用下面的方式把所有东西都包装在一个类中。

```
class folderTree {

    function display($dir,$level='') {
        $fileData = fillArrayWithFileNodes( new DirectoryIterator( $dir ) );

        function fillArrayWithFileNodes( DirectoryIterator $dir )
        {
          $data = array();
          foreach ( $dir as $node )
          {
            if ( $node->isDir() && !$node->isDot() )
            {
              $data[$node->getFilename()] = fillArrayWithFileNodes( new DirectoryIterator( $node->getPathname() ) );
            }
            else if ( $node->isFile() )
            {
              $data[] = $node->getFilename();
            }
          }
          return $data;
        }
    }
} 
```

但我真的被困在如何使用关卡上。

**什么是水平？**

```
-folder
    -childfolder (level1)
        file1
        file2
        -subchildfolder (level2)
            file1
            file2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T06:48:56.350

您可以从以下代码中复制逻辑：

```
<?php
function getFiles(RecursiveDirectoryIterator $rdi, $depth=0) {

    if (!is_object($rdi))
        return;

    for ($rdi->rewind();$rdi->valid();$rdi->next()) {

        if ($rdi->isDot())
            continue;

        if ($rdi->isDir() || $rdi->isFile()) {

            for ($i = 0; $i<=$depth;++$i)
                echo '&nbsp;&nbsp;&nbsp;';

            echo $rdi->current().'<br />';

            if ($rdi->hasChildren())
                getFiles($rdi->getChildren(),1+$depth);
        }
    }
}

$depth = 2;
getFiles(new RecursiveDirectoryIterator('.'), $depth);
?> 
```

# jquery - 如何避免在拖动带有可点击内容的 gridster.js 小部件后触发点击事件？

> ID：14301026
> 
> 赞同：2
> 
> 时间：2013-01-13T05:46:13.633
> 
> 标签：jquery, jquery-plugins, gridster

我正在使用 Gridster ( [http://gridster.net/](http://gridster.net/) )，它能够将内容拖到`li`. 在我`li`有一个可点击的 div。

```
<li data-row="1" data-col="1" data-sizex="2" data-sizey="1">
    <a href=' '>
    <div>
       content
    </div>
    </a>
</li> 
```

所以这是我面临的问题，当我停止并释放拖动时，它会调用 div 中的单击，我怎么能只拖动 div，但在拖动停止和释放后不调用单击。我不希望它在拖动后重定向到另一个页面（用户拖动并释放..因为拖动时需要单击div，同时可以单击div，所以当停止&释放拖动时，它将调用单击）

```
$(function(){ //DOM Ready

    var gridster = $(".gridster ul").gridster(
    {
          widget_margins: [5, 5],
        widget_base_dimensions: [128, 130],
        max_size_y: 2,
        max_size_x: 2,
        extra_cols: 6
    }
    ).data('gridster');
    //which i tried but failed
    gridster.draggable.stop(){
        onclick = "false";
    }

//   gridster.resize_widget($('.gridster li').eq(0), 1,1);

}); 
```

或者任何人都可以提供有关如何调用或使用gridster提供的功能的提示

> draggable.stop: function(event, ui){} 拖动停止时的回调。

我想这里会有一些实现。

初始解决方案，但仍无法正常工作

```
 var gridster ,draggable ;
   $(function () {
        gridster = $(".gridster > ul").find("> li ").click(function(e){
            !draggable && alert(1) //ipad2 ，not show alert
            draggable=0;
            alert(draggable);
            }).end()
            .gridster({widget_margins: [5, 5],
            widget_base_dimensions: [128, 130],min_cols: 10,min_rows: 20
            ,serialize_params: function($w, wgd) {
                return {
                    id: wgd.el[0].id
                    //,col: wgd.col
                    //,row: wgd.row
                };
            }
            ,draggable: {
                start:function(event, ui){ 
                //  alert("hekio);");
                    draggable=1; }
            }
        }).data('gridster');
    //gridster.disable();
//   gridster.resize_widget($('.gridster li').eq(0), 1,1);
         if(!dragged){
            $("a#blue.grid").click(function(){
            window.location = '../yokotachi/category_list.php?category=yokosmart';
        });
            }
    // RESET DRAGGED SINCE CLICK EVENT IS FIRED AFTER drag stop
            dragged = 0
    }); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-08-21T16:54:09.517

问题是`click`事件*在*`mouseup`传递给`draggable.stop`.

因此，您需要短暂捕获该单击事件并停止传播，然后在完成后解除捕获，以便人们随后可以单击该项目。

您可以这样做（**[单击工作 JSFiddle](http://jsfiddle.net/g22caks6/15/)**）：

```
$(document).ready(function () {
  // Basic event handler to prevent event propagation and clicks
  var preventClick = function (e) { e.stopPropagation(); e.preventDefault(); };
  $(element).gridster({
    draggable: {
      start: function (event, ui) {
        // Stop event from propagating down the tree on the capture phase
        ui.$player[0].addEventListener('click', preventClick, true);
      },
      stop: function (event, ui) {
        var player = ui.$player;
        setTimeout(function () {
          player[0].removeEventListener('click', preventClick, true);
        });
      }
    }
  });
}) 
```

这是一个比当前接受的答案更好的解决方案，因为它避免了跨多个组件/处理程序设置/检查状态的变量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T08:05:35.160

我使用触发变量对其进行了修复： var dragged = 0 将以下内容添加到您的 gridster 初始化中，在拖动开始时将变量设置为 1：

```
...
    draggable: {
        start: function(event, ui) {

            dragged = 1;
            // DO SEOMETHING
        }
    }
.... 
```

在同一对象上的单击事件中，检查：

```
...
    if(!dragged){
        // DO SOMETHING
    }
    // RESET DRAGGED SINCE CLICK EVENT IS FIRED AFTER drag stop
dragged = 0
.... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T14:52:31.823

你应该试试：

```
var gridster = $(".gridster ul").gridster().data('gridster');
gridster.disable(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T05:49:20.867

在不深入研究 JS 的情况下，添加`onclick = "return false;"`到您的`<a>`标签应该会阻止点击触发。

要停止拖动，请尝试：

```
gridster.draggable.stop(){
   return false;
} 
```

或者

```
gridster.draggable.stop(e){
   e.preventDefault();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-11T19:05:44.703

现在有一个本地支持来禁用 Gridster 上的拖放操作。

`$(".gridster ul").gridster().data('gridster').disable();`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-18T00:42:24.693

对于那些遇到此线程并使用 Angular 在 Gridster2 中寻找解决方案的人，以下内容基于 Alastair Maw 的回答，但通过使用 initCallBack 选项更新为适用于 Gridster2。

```
ngOnInit() {
    const preventClick = (e) => { e.stopPropagation(); e.preventDefault(); };
    this.gridsterOptions = {
      initCallback: (gridster: GridsterComponentInterface) => {
        gridster.options = {
          draggable: {
            delayStart: 100,
            start: (event, ui) => {
              // Stop event from propagating down the tree on the capture phase
              setTimeout(() => {
                ui.el.addEventListener('click', preventClick, true);
              }, 100);
            },
            stop: (event, ui) => {
              setTimeout(() => {
                ui.el.removeEventListener('click', preventClick, true);
              });
            }
          }
        }
      }
    };
} 
```

# java - Java，ServerSocket.accept() 接收客户端时如何继续运行？

> ID：14301028
> 
> 赞同：0
> 
> 时间：2013-01-13T05:47:03.660
> 
> 标签：java

我正在尝试制作一个多人游戏，其中许多计算在具有多个客户端的服务器上完成。我怎么能让我的服务器在计算游戏时监听新客户端。我尝试过的所有操作都会在运行 ServerSocket.accept() 时暂停整个程序。有没有办法解决？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T05:50:41.597

游戏循环或者`ServerSocket.accept()`应该在它自己中处理[`Thread`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)，而另一个在主线程中运行。

# wpf - WPF MVVM 在 ViewModel 中使用 UnityContainer 打开新视图导致循环依赖

> ID：14301030
> 
> 赞同：0
> 
> 时间：2013-01-13T05:48:07.493
> 
> 标签：wpf, mvvm, unity-container, .net-4.5

我正在使用 MVVM 设计 WPF 应用程序，并且正在尝试使用 UnityContainer 来解析我的 MVVM 对象。我的问题是我的 UnityContainer 需要引用我的所有视图和视图模型来构造我需要的适当对象。这很好，除非其中一个 ViewModel 需要打开一个新窗口。为了解决这个问题，我想到了一个 DialogService，它可以从 UnityContainer 获取 MVVM 对象，然后打开新窗口。这最终会创建一个循环依赖项，因为我的 ViewModel 需要查看 DialogService，DialogService 需要查看 UnityContainer，而我的 UnityContainer 需要查看我的视图和视图模型。我没有使用 Prism 或任何从 Nuget 安装的 UnityContainer。以下是我的问题的伪代码简化版本。

程序集接口（我没有人提到）

*   IViewX
*   IViewY
*   IViewModelX
*   IViewModelY

装配视图（我参考接口）

*   视图X：IViewX
*   视图Y：IViewY

Assembly-ViewModels（我参考 Interfaces 和 DialogService）<- 这是循环依赖

*   视图模型X：IViewModelX
*   ViewModelY：IViewModelY

Assembly-MyUnityContainer（我参考了接口、视图和视图模型）

*   UnityService（提供对 UnityContainer 的访问）

Assembly-DialogService（我参考 Interfaces 和 MyUnityContainer）

*   对话服务

显然我的设计有缺陷。我只是不确定从任何地方使用 UnityContainer 的正确方法是什么，因为它必须引用任何地方才能解析我的视图和视图模型。所以你们中那些有使用 UnityContainer 经验的人我做错了什么，你会建议我如何设计这个？顺便说一句，我正在使用 WPF 4.5。

注意：我的问题与设计有关，我实际上无法在 ViewModel 中添加对 DialogService 的引用，VS 不允许这样做。这不是循环依赖导致堆栈溢出的问题。只是想说清楚。

谢谢！

**编辑：解决方案** 根据我收到的建议，我最终做了一个类似于以下的设计。

[设计：程序集如何相互引用。](http://i.stack.imgur.com/6WPm4.png)

MainApp 可以看到所有内容，因此它创建 UnityContainer，注册所有类型并将其作为 IUnityContainer 交给 DialogService 程序集。现在 DialogService 程序集可以在不知道具体实现的情况下解析任何接口类型。ViewModel 可以使用 DialogService 创建对话服务，进而打开窗口或其他对话。ViewModel 只需要知道它想要打开的界面并将其提供给 DialogService，对话服务会完成打开窗口的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T05:57:10.497

我想说，理想情况下，Assembly-MyUnityContainer 是应该引用所有内容的那个。

所以为了打破Assembly-DialogService对Assembly-MyUnityContainer的依赖，需要停止Assembly-DialogService对Assembly-MyUnityContainer中的接口或类的依赖。

为什么不将您自己的 IContainer 接口添加到您的接口程序集中，它抽象了 Unity 容器？然后让对话服务程序集只引用接口程序集......

# codeigniter - 我的自定义异常类在 codeigniter 中找不到 CI_Exception 类

> ID：14301036
> 
> 赞同：0
> 
> 时间：2013-01-13T05:49:19.077
> 
> 标签：codeigniter, exception

我在名为 BL_Exceptions.php 的系统/核心类中构建了一个自定义类。但是当我使用自定义类时，它说找不到 BL_Exception 类。

```
 if( $type == 'customer') {
            $this->template->load('customer_new');

    }else{
            throw new BL_Exceptions(10001);
    } 
```

# c - 程序如何在内存中运行以及操作系统处理内存的方式

> ID：14301038
> 
> 赞同：13
> 
> 时间：2013-01-13T05:49:31.713
> 
> 标签：c, memory, memory-management

当进程在运行时执行时，我不清楚内存管理

这是一个图表![在此处输入图像描述](../Images/a59dc6b4fe7f95a756d51c9375d4f20f.png)

我不清楚图片中的以下内容：

*   1）这个图像所指的堆栈是什么？
*   2) 什么是指文件映射的内存映射段？
*   3）堆与进程有什么关系。堆是仅在进程中处理还是由操作系统内核维护，然后当用户空间应用程序调用时由 malloc 分配内存空间（使用堆）？

文章提到 [http://duartes.org/gustavo/blog/post/anatomy-of-a-program-in-memory/](http://duartes.org/gustavo/blog/post/anatomy-of-a-program-in-memory/)

> 虚拟地址空间，在 32 位模式下始终是一个 4GB 的内存地址块。这些虚拟地址通过页表映射到物理内存，

*   4) 这是否意味着一次只有一个程序在占用整个 4 GB RAM 的内存中运行？

同一篇文章还提到

> Linux 通过将偏移量添加到它们的起始地址来随机化堆栈、内存映射段和堆。不幸的是，32 位地址空间非常紧凑，几乎没有留给随机化的空间并妨碍了它的有效性。

*   5）它是指在进程中随机化堆栈还是指在计算所有进程的空间后剩下的东西？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-13T05:58:03.787

> 1）这个图像所指的堆栈是什么？

[堆栈](http://en.wikipedia.org/wiki/Stack-based_memory_allocation)用于分配局部变量和函数调用帧（包括函数参数、函数调用后返回的位置等）。

> 2) 什么是指文件映射的内存映射段？

[内存映射段](http://en.wikipedia.org/wiki/Memory-mapped_file)保存链接库。它也是`mmap`分配呼叫的地方。通常，内存映射文件只是由文件支持的内存区域。

> 3）堆与进程有什么关系。堆是仅在进程中处理还是由操作系统内核维护，然后当用户空间应用程序调用时由 malloc 分配内存空间（使用堆）？

[堆](http://en.wikipedia.org/wiki/Heap_memory)是特定于进程的，由进程本身管理，但是它必须从操作系统请求内存才能开始（并且根据需要）。你是对的，这通常`malloc`是分配调用的地方。但是，大多数`malloc`实现都使用`mmap`请求内存块，因此堆和内存映射段之间的区别实际上很小。实际上，堆*可以*被认为是内存映射段的一部分。

> 4) 这是否意味着一次只有一个程序在占用整个 4 GB RAM 的内存中运行？

不，这意味着程序可用的*可寻址*内存量限制为 4 GB RAM，在任何给定时间实际包含在内存中的内容取决于操作系统如何分配物理内存，并且超出了此问题的范围。

> 5）它是指在进程中随机化堆栈还是指在计算所有进程的空间后剩下的东西？

我从未见过任何暗示 4gb 空间“阻碍”操作系统使用的内存分配策略的有效性的东西。此外，正如@Jason 所指出的，堆栈、内存映射段和堆的位置是随机的“以防止可预测的安全漏洞，或者至少使它们比操作系统管理的每个进程都具有可执行文件的每个部分更难完全相同的虚拟内存位置。” 具体来说，操作系统正在随机化堆栈、内存映射区域和堆的*虚拟地址*。需要注意的是，进程看到的所有内容都是一个[虚拟地址](http://en.wikipedia.org/wiki/Virtual_address)，然后根据特定页面所在的位置将其映射到内存中的物理地址。[在这里](http://en.wikipedia.org/wiki/Page_table)。

这篇关于分页的维基百科[文章](http://en.wikipedia.org/wiki/Page_replacement_algorithm)是学习操作系统如何管理进程之间的内存的一个很好的起点，也是回答问题 4 和 5 的一个很好的阅读资源。简而言之，内存是按页面分配给进程的，这些页面要么存在于主内存中，要么已被“分页”到磁盘中。当进程请求内存地址时，它会将页面从磁盘移动到主内存，并在需要时替换另一个页面。使用了多种页面替换策略，我建议您参阅文章以了解有关每种策略的优缺点的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T05:57:38.133

第 1 部分。堆栈...

一个函数可以调用一个函数，该函数可能调用另一个函数。通过每次迭代分配的任何变量最终都在堆栈上。并在每个函数退出时取消分配，因此是“堆栈”。您可能会考虑使用 Wikipedia 来获取这些内容... [http://en.wikipedia.org/wiki/Stack_%28abstract_data_type%29](http://en.wikipedia.org/wiki/Stack_%28abstract_data_type%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T06:08:38.193

> Linux 通过将偏移量添加到它们的起始地址来随机化堆栈、内存映射段和堆。不幸的是，32 位地址空间非常紧凑，几乎没有留给随机化的空间并妨碍了它的有效性。

在比较 32 位和 64 位的随机化能力时，我相信这更像是文章中的概括。3GB 的 32 位可寻址内存仍然是相当大的“移动”空间......它只是没有 64 位操作系统所能提供的那么多空间，并且有某些应用程序，例如图像-内存密集型的编辑器等，很容易用完他们可用的全部 3GB 可寻址内存。请记住，我说的是“可寻址”内存……这取决于平台，而不是系统中可用的物理内存量。

# php - 如何修复“PHP 警告：传递给 each() 的变量不是数组或对象”？

> ID：14301040
> 
> 赞同：1
> 
> 时间：2013-01-13T05:49:38.940
> 
> 标签：php, mysql

我正在使用[phpInv](http://sourceforge.net/projects/phpinv/?source=dlp)

在[http://alex.piechowski.org/inventory](http://alex.piechowski.org/inventory)上。登录=管理员/phpinv

我不断收到“PHP 警告：传递给 each() 的变量不是数组或对象”

在 entry_new.php 第 38 行

```
if ($itemid>0) {
            --> while (list ($colid, $property) = each ($col)) { <--
                    $result = $DB->query("INSERT INTO ".$DB->tableprefix."property (itemid,colid,property) VALUES ('".str_prepare($itemid)."','".str_prepare($colid)."','".str_prepare($property)."')");
                    if (!$result) {
                        $errortext = "Error: property not created\n";
                        eval("\$table = \"".templateget('error')."\";");
                    }
                } 
```

有人愿意D / L并帮助我吗？我已经为此工作了几个小时，但我似乎无法让它工作......

它正在接收一个发布的数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T06:33:16.093

如果您尝试使用尚未初始化的变量，则会收到相同的警告

确保您尝试传递的变量 ($col) 存在并且首先不为空。您还应该确保没有拼错变量名。

您应该尝试使用函数 is_array($col) 来确保传递的变量确实是一个数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T08:02:58.210

我最近有同样的问题。

我从不久前下载了一些源，它最终成为我的浏览器。

我的浏览器在输入所有内容之前自动关闭了表单。

如果您使用的是 chrome，请尝试更改为 Internet Explorer。

如果更改浏览器不起作用，请确保您甚至获得了发布所需的数据。

您可以通过以下方式检查所有发布的值：

```
if ($_POST) {
    echo '<pre>';
    echo htmlspecialchars(print_r($_POST, true));
    echo '</pre>';
} 
```

# c# - 使用正则表达式将字符串解析为使用整数填充维度的锯齿状数组来识别

> ID：14301043
> 
> 赞同：0
> 
> 时间：2013-01-13T05:50:35.063
> 
> 标签：c#, regex, string, parsing, jagged-arrays

我正在处理这个问题并遇到了一个新问题，因为我需要合并一个锯齿状数组，所以我尝试像这样修改这段代码..

```
string y = "{10} red30, {20} blue12, {30} green90, {40} yellow13 : {15} axe,  
     {25} frog, {33} sandwich, {55} spinach : ...." and so on. 

int[][] Odds = y.Split(':').Select(t => Regex.Matches(t, @"(?<={)\d+(?=})"))  
    .Cast<Match>() .Select(m => int.Parse(m.Value)) .ToArray(); 
```

使用一个新字符串，其中每个新数组之间有一个“：”作为分隔符。它给了我“无法将类型'int []'隐式转换为'int [] []'的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T06:06:53.253

那是因为该`Matches`方法不返回一个`Match`对象，它返回一个`MatchCollection`对象。您必须从每个集合中获取`Match`对象并解析值，然后您可以将它们转换为数组：

```
int[][] Odds =
  y.Split(':')
  .Select(t => Regex.Matches(t, @"(?<={)\d+(?=})"))
  .Cast<MatchCollection>()
  .Select(
    m => m.Cast<Match>()
     .Select(n => int.Parse(n.Value))
     .ToArray()
  )
  .ToArray(); 
```

# cassandra - Cassandra 将密钥空间存储到新磁盘

> ID：14301046
> 
> 赞同：2
> 
> 时间：2013-01-13T05:50:54.970
> 
> 标签：cassandra, datastax-enterprise

我刚刚安装了一个全新的 Windows 服务器，安装了全新的 datastax，包括 cassandra 1.2 和 opscenter 2.1.3。我尝试在 cassandra wikis 和 datastax 网站上找到这些问题的解决方案，但我只能找到 unix 特定信息或 datastax API 信息。

Cassandra 默认使用 C: 驱动器（安装过程中我从未被要求为 cassandra 选择驱动器）。

*   在同一个 cassandra 实例中，我可以在不同的磁盘上有键空间吗？
*   如果没有，如何将现有密钥空间迁移到新驱动器？（只是重新配置 cassandra.yaml 以使用新目录会丢失我的 opscenter 数据，甚至可能会破坏 opscenter）。
*   如果是，如何在单独的驱动器上创建新的密钥空间？cassandra.yaml 似乎只有单个商店位置的配置选项。
*   我应该创建一个新的集群来存储我的数据吗？如果我开始向默认集群添加新节点，这将意味着 datastax opscenter 数据将被复制——这似乎是个坏主意。

如果某处有关于此的良好文档，请指出我那里。

谢谢，亚当

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T16:20:21.287

您不能让 cassandra 拆分键空间并将它们存储在不同的目录中。它们都存储在 cassandra.yaml 文件中指定的公共数据目录下。

但是，您可以设置它并使用 NTFS 在服务器上的数据目录下安装不同的驱动器，但这并不简单或可扩展。

如果要移动数据在 cassandra 上的存储位置，请停止 cassandra 守护程序/服务，更改 cassandra.yaml 文件以将数据存储在新位置，然后将整个数据目录复制/移动到这个新位置. 然后启动 cassandra 备份，它将与新位置的数据一起正常工作。我已经这样做了好几次了，cassandra 恢复正常，没有任何数据丢失（如果你不移动数据，那么它将丢失所有数据并在新位置下重新创建目录结构）。

数据被复制并不是一件坏事——这就是 cassandra 的设计目的。我不知道 opscenter 使用什么复制因子，但它不会存储大量数据，因此复制不是问题。

# windows-phone-7 - 如何让 Windows Phone 网络搜索返回应用程序建议？

> ID：14301048
> 
> 赞同：0
> 
> 时间：2013-01-13T05:51:15.827
> 
> 标签：windows-phone-7, search, windows-phone-7.1, windows-phone-8

我找不到这方面的任何信息，因为我什至不知道它叫什么。当有人在 Windows Phone 上进行网络搜索时，它会在页面顶部返回一些应用结果。这个叫什么？如果我知道这个术语，我相信我能找到我需要的信息。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T07:19:36.443

您正在寻找的谷歌术语是“搜索可扩展性”，它实际上是 WP7.5（“Mango”）功能而不是 WP8 功能。基本上，您需要公开一个庞大的结构化 XML 文档以供 Bing 服务器索引。然后，必应会根据您的结构 XML 数据告诉 WP8 哪些应用程序具有与当前搜索词相关的结果。

MSDN 文档@http: [//msdn.microsoft.com/en-us/library/hh202969 (VS.92).aspx](http://msdn.microsoft.com/en-us/library/hh202969(VS.92).aspx)

MSDN 网络广播@http: [//msdn.microsoft.com/en-us/windowsmobile/hh369941.aspx](http://msdn.microsoft.com/en-us/windowsmobile/hh369941.aspx)

# javascript - Dragenter和dragleave上的颜色变化不起作用jquery

> ID：14301053
> 
> 赞同：5
> 
> 时间：2013-01-13T05:52:00.350
> 
> 标签：javascript, jquery, html

拖动和输入`<div class="upload-cont">`时，边框和文本的颜色完全从灰色变为黑色，当涉及到它时，`<span class="add-text">`它又变回灰色。

CSS：

```
.upload-cont{
    cursor:pointer;
    margin-left:130px;
    display:inline-block;
    border:2px dashed #a8a8a8;
    max-width:220px;
    max-height:180px;
    min-width:220px;
    min-height:180px;
    position:relative;
    border-radius:3px;
}
.add-text{
    display:block;
    font-size:10px;
    font-weight:bold;
    color:#999;
    word-wrap:break-word;
    text-align:center;
    width:100px;
    top:37%;
    left:25%;
    position:absolute;
}
.add-text:hover{ color:black; } 
```

HTML：

```
<div class="upload-cont">
    <span class="add-text">
        Click to add or<br/>
        Drag and drop image here
    </span>
</div> 
```

查询：

```
$(document).ready(function () {
    $(".upload-cont,.add-text").on('dragenter', function (e) {
        $(".upload-cont").css({
            "border": "2px dashed black"
        });
        $(".add-text").css({
            "color": "black"
        });
    });
    $(".upload-cont").on('dragleave', function (e) {
        $(".upload-cont").css("border", "2px dashed #a8a8a8");
        $(".add-text").css({
            "color": "#a8a8a8"
        });
    });
}); 
```

输入时我该怎么做才能使边框和文本保持黑色`<span class="add-text">`

**检查这个jsfiddle：http:** [//jsfiddle.net/rpABs/](http://jsfiddle.net/rpABs/)

**提前致谢**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T06:10:20.150

输入子元素时使用`dragover`而不是`dragenter`因为`dragleave`触发

```
$(".upload-cont,.add-text").on('dragover', function (e) {
    $(".upload-cont").css({
        "border": "2px dashed black"
    });
    $(".add-text").css({
        "color": "black"
    });
});
$(".upload-cont").on('dragleave', function (e) {
    $(".upload-cont").css("border", "2px dashed #a8a8a8");
    $(".add-text").css({
        "color": "#a8a8a8"
    });
}); 
```

[**演示**](http://jsfiddle.net/mowglisanu/rpABs/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-18T04:59:49.253

显然，这个问题比我想象的更频繁，因为我发现至少 5 个与同一主题相关的问题（我将回答与此问题相关的所有问题）。

与“mouseover”不同，“dragover”和“dragleave”事件不将子元素视为一个整体，因此每次鼠标经过任何一个子元素时，都会触发“dragleave”。

考虑到文件的上传，我创建了一个小部件，它允许：

1.  使用 $_FILES 拖放桌面文件
2.  使用 $ _POST 和 cURL 拖放到浏览器图像/元素或 url
3.  使用 $ _FILES 使用按钮附加设备文件
4.  使用输入使用 $ _POST 和 cURL 写入/粘贴 url 图像/元素

[![在此处输入图像描述](../Images/b3e888b41b2cdae4712a4db097f68ebb.png)](https://i.stack.imgur.com/sgHHM.jpg)

问题：由于表单输入和图像的所有内容都在 DIV 子项中，因此即使没有离开虚线，也会触发“dragleave”。使用属性“pointer-events: none”不是替代方法，因为方法 3 和 4 需要触发“onchange”事件。

解决方案？一个重叠的 DIV，当鼠标进入时覆盖所有的拖放容器，并且唯一的一个具有“指针事件：无”的子元素。

结构：

*   div #drop-container：主 div，保持所有
*   div #drop-area：“dragenter”监听器和中间触发器#drop-pupup
*   div #drop-pupup：与#drop-area、“dragenter”、“dragleave”和“drop”监听器处于同一级别

然后，当鼠标通过将元素拖动到#drop-area 进入时，会在前面显示#drop-pupup，然后事件在此div 上而不是初始接收器上。

[![在此处输入图像描述](../Images/92cf4e2af479af7c83804775d8b3f53b.png)](https://i.stack.imgur.com/sSvVI.jpg)

这是 JS/jQuery 代码。我冒昧地离开了 PoC，所以不要输掉我输掉的所有时间。

```
jQuery(document).on('dragover', '#drop-area', function(event) {
	event.preventDefault();
	event.stopPropagation();
	jQuery('#drop-popup').css('display','block');
});

jQuery(document).on('dragover dragleave drop', '#drop-popup', function(event) {
	event.preventDefault();
	event.stopPropagation();

	console.log(event.type);

	// layout and drop events
	if ( event.type == 'dragover') {
		jQuery('#drop-popup').css('display','block');
	}
	else {
		jQuery('#drop-popup').css('display','none');

		if ( event.type == 'drop' ) {
			// do what you want to do
			// for files: use event.originalEvent.dataTransfer.files
			// for web dragged elements: use event.originalEvent.dataTransfer.getData('Text') and CURL to capture
		}
	}
});
```

```
body {
  background: #ffffff;
  margin: 0px;
  font-family: sans-serif;
}

#drop-container {
  margin: 100px 10%; /* for online testing purposes only */
  width: 80%; /* for jsfiddle purposes only */
  display: block;
  float: left;
  overflow: hidden;
  box-sizing: content-box;
  position: relative; /* needed to use absolute on #drop-popup */
  border-radius: 5px;
  text-align: center;
  cursor: default;
  border: 2px dashed #000000;
}

#drop-area {
  display: block;
  float: left;
  padding: 10px;
  width: 100%;
}

#drop-popup {
  display: none;
  box-sizing: content-box;
  position: absolute;
  width: 100%;
  top: 0;
  left: 0;
  background: linear-gradient(to BOTTOM, rgba(245, 245, 245, 1) , rgba(245, 245, 245, 0));
  height: 512px;
  padding: 20px;
  z-index: 20;
}

#drop-popup > p {
   pointer-events: none;
}
```

```
<html>
  <head>
    <title>Drag and Drop</title>
  </head>
  <body>

    <div id="drop-container">
      <div id="drop-area">
        <p>Child paragraph content inside drop area saying "drop a file or an image in the dashed area"</p>
        <div>This is a child div No. 1</div>
        <div>This is a child div No. 2</div>
      </div>
      <div id="drop-popup">
        <p>This DIV will cover all childs on main DIV dropover event and current P tag is the only one with CSS "pointer-events: none;"</p>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js" type="text/javascript"></script>
  </body>
<html>
```

关于jQuery“on”，将它与里面的div id一起使用，这样你就可以启动事件触发器，开始隐藏“上传框”。

最后，我更喜欢使用“dragover”而不是“dragenter”，因为它有一个小的延迟（毫秒），有利于性能（[https://developer.mozilla.org/en-US/docs/Web/API/Document/dragover_event](https://developer.mozilla.org/en-US/docs/Web/API/Document/dragover_event)） .

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-14T09:46:36.000

当您拖动时，该`dragover`事件会不断触发，因此我不喜欢该解决方案。我编写了一个名为[Dragster](http://bensmithett.github.io/dragster/)的小库，它为我提供了更好的`enter`&`leave`事件。

# php - 使用 PHP 循环遍历 SVG 属性

> ID：14301054
> 
> 赞同：0
> 
> 时间：2013-01-13T05:52:11.770
> 
> 标签：php, xml, svg, domdocument

使用 PHP，我需要读入 id 的 csv 文件...

```
0123,0456,0789 
```

...然后加载一个 SVG XML 图形文件并更改这些特定 id 的颜色属性。

SVG 文件中的每个多边形都有如下记录。我需要将每个匹配记录中的填充：值从 #d0d0d0 更改为 #FF0000。外层循环当然是 id，内层是 SVG 文件的每条记录。

style="font-size:12px; **fill:#d0d0d0** ;fill-rule:nonzero;stroke:#000000;stroke-opacity:1;stroke-width:0.1;stroke-miterlimit:4;stroke-dasharray:none;stroke -linecap:butt;marker-start:none;stroke-linejoin:bevel" d="M 131.85275,310.64335 L 131.85275,311.08435" **id="0123"**

对于我的编程技能爱好者水平，所需循环的一般 PHP 结构以及如何访问样式的特定属性的提示将非常有帮助！

谢谢！布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:30:03.623

我推荐一种不同的方法：使用 CSS 更改颜色。那里不需要循环遍历 SVG 元素。为了能够做到这一点，您应该稍微清理一下 SVG 文件，这也会使其更紧凑。

据我了解，您所有要着色的元素都具有与内容相同的样式属性

```
font-size:12px;fill:#d0d0d0;fill-rule:nonzero;stroke:#000000;stroke-opacity:1;stroke-width:0.1;stroke-miterlimit:4;stroke-dasharray:none;stroke-linecap:butt;marker-start:none;stroke-linejoin:bevel 
```

删除那些属性，用合理的`class`属性替换它们。假设这些路径是地图上的国家，那么让我们给它们一个属性`class="country"`。然后使用一个 CSS 规则为所有这些设置样式，例如：

```
.country {
  fill:  #d0d0d0;
  fill-rule:nonzero;
  stroke:#000000;
  stroke-opacity:1;
  stroke-width:0.1;
  stroke-miterlimit:4;
  stroke-dasharray:none;
  stroke-linecap:butt;
  marker-start:none;
  stroke-linejoin:bevel;
} 
```

我离开了该`font-size`属性，因为这与`<path>`元素无关。（可能您可以进一步简化这一点，因为许多属性重复默认值，除非您在路径的父元素中更改这些属性，否则`fill-rule`, `stroke-opacity`, `stroke-miterlimit`,`stroke-dasharray`和是多余的`stroke-linecap`，`marker-start`但不要伤害任何人。）

还有一个问题：如果文件中的 ID 看起来确实像`0123`,`0456`或`0789`，那么它们是无效的，因为它们需要遵循 XML 名称的规则，不能以数字开头。在尝试使用它们的 ID 设置这些元素的样式或尝试`getElementById()`在它们上使用它们时，您应该会遇到问题。因此，您可能希望将它们更改为类似`id0123`,`id0456`和`id0789`

现在，您可以从 CSV 数据中动态添加一些 CSS。

```
0123,0456,0789 
```

会成为

```
#id0123,#id0456,#id0789 {fill:#FF0000} 
```

你就完成了。CSS 可以添加到`<style>`SVG 文件的元素中，或者您创建一个单独的 CSS 文件并从 SVG 中引用它。这样，在动态更改颜色时，您不必对 SVG 进行任何更改。如果您在 HTML 中使用内联 SVG 数据，您还可以将其添加到`<style>`HTML 页面中的元素或 HTML 引用的 CSS 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T06:04:16.277

[DOMDocument](http://php.net/manual/en/class.domdocument.php)对象具有[getelementbyid](http://php.net/manual/en/domdocument.getelementbyid.php)、getAttribute 和 setAttribute，它们应该可以让您更改 xml。

[这个例子](http://php.net/manual/en/domdocument.getelementbyid.php#90228)看起来和你想要的很相似，一旦你得到了你可以`explode`用 ';'的样式 获取样式数组，然后`join`使用新样式。

# wordpress - 将自定义帖子类型（wordpress）从投资组合更改为书籍的建议

> ID：14301055
> 
> 赞同：0
> 
> 时间：2013-01-13T05:52:24.490
> 
> 标签：wordpress, wordpress-theming

我正在使用一个主题。主题具有自定义帖子类型作为投资组合。如何将其更改为其他一些 url（例如电子书）以保持功能相同。

任何人都可以建议我。?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:11:46.330

使用一些软件，例如 Fileseek，`register_post_type`在您的主题中找到代码，然后根据需要对其进行编辑。

# python - Python 3 中的连接列表

> ID：14301056
> 
> 赞同：21
> 
> 时间：2013-01-13T05:52:54.757
> 
> 标签：python, python-3.x

我正在阅读[Dive into Python 3](http://getpython3.com/diveintopython3/native-datatypes.html)，在列表部分，作者指出您可以使用“+”运算符连接列表或调用 extend() 方法。这些只是两种不同的操作方式吗？有什么理由我应该使用其中一个吗？

```
>>> a_list = a_list + [2.0, 3]
>>> a_list.extend([2.0, 3]) 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-13T06:02:53.583

`a_list.extend(b_list)` modifies `a_list` in place. `a_list = a_list + b_list` creates a new list, then saves it to the name `a_list`. Note that `a_list += b_list` should be exactly the same as the `extend` version.

Using `extend` or `+=` is probably slightly faster, since it doesn't need to create a new object, but if there's another reference to `a_list` around, it's value will be changed too (which may or may not be desirable).

# linux - 如何处理异步套接字上所有可能的错误？

> ID：14301064
> 
> 赞同：1
> 
> 时间：2013-01-13T05:54:31.983
> 
> 标签：linux, sockets, unix

我决定在我的项目中使用 async io 并简单地执行一个单线程循环，在其中我尝试从每个打开的套接字中读取每帧的一些数据。这工作得很好，总的来说我现在对它很满意。问题是我在使用异步套接字时遇到的奇怪问题。

我有这样的代码：

```
accept a connection...
fcntl(O_NONBLOCK) on the client socket...

int rc;
if((rc = recv(socket))>0)
  process data
if rc == 0
  close socket and cleanup 
```

问题是即使我知道连接没有关闭，有时我也会得到 rc == 0 。如果我不清理，那么我的应用程序将正常工作。但是，如果我进行清理，那么客户端在连接建立之前就会收到断开连接。

所以我的问题是：我是否必须在执行 recv 之前以某种方式检查套接字是否已准备好才能从中获得正确的返回值？

我能找到的大部分信息都是不确定的。我找到了对 select() 的引用，但它似乎会阻塞，直到套接字上的状态发生变化 - 但我需要套接字是非阻塞的。

我正在寻找的只是直观的行为，如果有数据，则将其读取到缓冲区并 recv 返回读取的字节数，如果没有数据则返回-1，如果套接字断开连接，则应返回0。

在调用 recv 以使其按预期工作之前，我是否必须对套接字执行任何其他操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T06:12:35.793

首先，承担使用套接字服务器“全异步”的繁重工作对于设计来说是一个良好的开端，并且将非常容易地实现可伸缩性。

至于你的问题。

recv() 将返回以下值：

*   recv() 返回的正值表示复制到缓冲区的字节数。（即您实际上收到了这些字节）

*   当远程端关闭套接字时，recv() 将返回 0。

*   对于异步套接字，如果连接仍然有效，recv() 将返回 -1 并将 errno 设置为 EAGAIN 或 EWOULDBLOCK，但没有要使用的新数据。在套接字上调用 select() 或 poll() 以等待数据。

*   否则，任何常规连接失败都将导致 recv() 返回 -1。（你唯一能做的就是关闭套接字）。

所以当你说“rc == 0 有时即使我知道连接没有关闭”时，我怀疑你的伪代码不是检查返回值，而是检查 (rc > 0) 的结果。

这更接近您想要的逻辑：

```
int rc;
rc = recv(s, buf, buffersize, 0);
if (rc == 0)
{
    /* socket closed by remote end */
    close(s); s=-1;
}
else if ((rc == -1) && ((errno == EAGAIN) || (errno == EWOULDBLOCK)) )
{
   // need to wait.  Call select() or poll()
}
else if (rc == -1)
{
    close(s); s=-1;
}
else
{
    ProcessNewData(s, buffer, rc);
} 
```

# javascript - 模板中的剔除更改模型

> ID：14301069
> 
> 赞同：0
> 
> 时间：2013-01-13T05:56:08.597
> 
> 标签：javascript, knockout.js

首先，我不熟悉使用淘汰赛。

我已将 array1 绑定到我的模板，现在我想将其更改为使用 array2，这可能与淘汰赛有关吗？

我在搞什么

```
 var viewModel = function(){
    var _this = this;
    this.test = [{ name: 'Fruit4'}, {name: 'Vegetables'}];
    this.categories = ko.observableArray(this.test);
    this.changeItems = function()
    {
       this.test= [{ name: 'Fruit2'}, {name: 'Vegetables2'}];
       categories = ko.observableArray(this.test);     
    }
  };

  ko.applyBindings(viewModel()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T08:52:24.547

创建一个计算的 observable，它将根据您的条件返回两个数组之一，无论它们是什么并绑定到它。确保决定选择哪个的条件也是可观察的，以便正确更新。

```
function ViewModel(data) {
    this.array1 = ko.observableArray(data.array1);
    this.array2 = ko.observableArray(data.array2);

    // change this value to true to use array2
    this.chooseArray2 = ko.observable(false);

    this.array = ko.computed(function () {
        return this.chooseArray2()
            ? this.array2()
            : this.array1();
    }, this);
} 
```

```
<div data-bind="foreach: array">
    ...
</div> 
```

当然，逻辑可能比这更复杂。为了更易于管理，我还将计算条件 observable 并在其中创建逻辑。返回数组的计算 observable 不必改变太多。

```
function ViewModel(data) {
    this.array1 = ko.observableArray(data.array1);
    this.array2 = ko.observableArray(data.array2);

    // which to choose depends on a number of conditions
    this.someCondition = ko.observable(false);
    this.anotherCondition = ko.observable(true);
    this.someNumber = ko.observable(132);
    this.chooseArray2 = ko.computed(function () {
        // some complex logic
        if (this.someNumber() < 0) {
            return this.someCondition();
        }
        return this.someCondition() || !this.anotherCondition();
    }, this);

    this.array = ko.computed(function () {
        return this.chooseArray2()
            ? this.array2()
            : this.array1();
    }, this);
} 
```

# java - 为什么我的 jsoup.connect(url) 不能使用某些 url？

> ID：14301070
> 
> 赞同：0
> 
> 时间：2013-01-13T05:56:11.587
> 
> 标签：java, jsoup, connect

我正在尝试从 [http://tv.atmovies.com.tw/tv/attv.cfm?action=channeltime&channel_id=CH06获取标题](http://tv.atmovies.com.tw/tv/attv.cfm?action=channeltime&channel_id=CH06)

这是我的源代码的一部分：

```
Document doc = Jsoup.connect( theurl above ).get();

Element title = doc.select("title");

textview.setText(title); 
```

当我尝试从中获取标题时，此代码可以工作`www.yahoo.com`。但它不能与`http://tv.atmovies.com.tw/tv/attv.cfm?action=channeltime&channel_id=CH06`为什么这样的网址一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:26:11.947

默认情况下，Jsoup 遵循[重定向](http://jsoup.org/apidocs/org/jsoup/Connection.html#followRedirects%28boolean%29)。但是，您的问题可能是由重定向的完成方式引起的。如果网站为此使用 javascript，则连接不会被重定向，因为 jsoup 不支持 javascript。

这似乎是原因......

**测试代码：**

```
Document doc = Jsoup.connect("http://tv.atmovies.com.tw/tv/attv.cfm?action=channeltime&channel_id=CH06").get();
System.out.println(doc); 
```

**输出：**

```
<html>
 <head>
  <script language="javascript">if (top.frames.length != 0) { top.location = self.document.location; }</script> 
  <meta http-equiv="Refresh" content="0;URL=/home/" /> 
 </head>
 <body></body>
</html> 
```

正如我所说：Jsoup 不支持 javascript 并且不会在此处重定向。

顺便提一句。你真的需要连接到这个链接吗？它唯一做的就是重定向到*主页*。所以也许你的网址无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T06:12:37.900

本网站**`http://tv.atmovies.com.tw/tv/attv.cfm?action=channeltime&channel_id=CH06`**“重定向至**`http://www.atmovies.com.tw/home/`**.

# servlets - servlet 的生命周期：对 service() 和 doGet() 的调用是相反的

> ID：14301071
> 
> 赞同：1
> 
> 时间：2013-01-13T05:56:13.453
> 
> 标签：servlets, lifecycle

当我阅读有关 servlet 生命周期的书时，它说它首先调用服务方法，然后服务方法调用另一个方法来处理特定的 HTTP 请求（GET 或 POST）。但是当我尝试这个时，我发现在调用服务方法之前首先调用 doGet 或 doPost 方法。我的代码和结果如下，谢谢！

```
public class Main extends HttpServlet {

    @Override
    public void init() throws ServletException {
        // TODO Auto-generated method stub
        super.init();
        System.out.println("init has been called");
    }

    @Override
    protected void service(HttpServletRequest arg0, HttpServletResponse arg1)
            throws ServletException, IOException {
        // TODO Auto-generated method stub
        super.service(arg0, arg1);
        System.out.println("service has been called");
    }

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        // TODO Auto-generated method stub
        System.out.println("get has been called");
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        // TODO Auto-generated method stub
        System.out.println("post has been called");
    }
} 
```

结果：

```
init has been called

get has been called

service has been called

post has been called

service has been called 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T06:18:56.073

你的书是对的。在您的覆盖`service()`方法中，您在调用`super.service()`之前`System.out.println()`调用；`doPost()`并从超类的方法中`doGet()`调用。尝试将输出行放在调用之前，您会看到。`service()``HttpServlet``super.service()`

如果您`super.service()`从您的方法中删除，则根本不会调用，`doPost()`也`doGet()`不会调用；这就是为什么重写通常不是一个好主意，`service()`除非您知道自己在做什么并且有充分的理由这样做。

# c - 包含包含标头时未找到枚举声明

> ID：14301073
> 
> 赞同：2
> 
> 时间：2013-01-13T05:56:38.877
> 
> 标签：c, c89

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T06:27:29.420

你的原型应该是：

```
enum command_type scan(char *buffer); 
```

由于您没有`typedef`在枚举声明中添加 a 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T06:28:13.270

使用您的代码编译*器*无法理解. 通常会使用：`command_type`
`typedef`

**//头文件**

```
typedef enum {....} command_type; 
```

**//C文件**

```
command_type scan(char *buffer) 
```

有了这个，您不必记住要继续添加`enum`无处不在。

# python - Python/ttk/tKinter - 通过按钮单击功能传递参数？

> ID：14301078
> 
> 赞同：1
> 
> 时间：2013-01-13T05:57:52.857
> 
> 标签：python, tkinter, ttk

我正在尝试将参数传递给按钮单击函数并遇到问题。

简而言之，我试图按下按钮以弹出该`askColor()`方法，并将该颜色值作为相关文本框的背景颜色返回。

它的功能是使联觉者可以将颜色与字母/数字相关联并记录生成的颜色列表。

具体线路：

```
 self.boxA = Text(self.mainframe, state='normal', width=3, height=1, wrap='word', background=self.AVal).grid(column=2, row=2, padx=4)
    self.boxB = Text(self.mainframe, state='normal', width=3, height=1, wrap='word', background=self.AVal).grid(column=3, row=2, padx=4)
    self.boxC = Text(self.mainframe, state='normal', width=3, height=1, wrap='word', background=self.AVal).grid(column=4, row=2, padx=4)

    self.ABlob = ttk.Button(self.mainframe, text="A",style= 'mainSmall.TButton', command= lambda: self.getColour(self.boxA)).grid(column=2, row=3)
    self.BBlob = ttk.Button(self.mainframe, text="B",style= 'mainSmall.TButton', command= lambda: self.getColour(self.boxB)).grid(column=3, row=3)
    self.CBlob = ttk.Button(self.mainframe, text="C",style= 'mainSmall.TButton', command= lambda: self.getColour(self.boxC)).grid(column=4, row=3) 
```

和：

```
def getColour(self,glyphRef):
    (triple, hexstr) = askcolor()
    if hexstr:
            glyphRef.config(bg=hexstr) 
```

问题是我似乎无法以`self.ABlob`我尝试的方式引用 - 它返回 type `None`。我尝试`pack.forget`在按钮单击功能中包含一个命令，但这也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T13:43:04.847

您问题的主要部分似乎是：

> 问题是我似乎无法以我尝试的方式引用 self.ABlob - 它返回类型 None

当您这样做时`x=ClassA(...).func(...)`，x 包含调用的结果`func`。因此，当您这样做时`self.ABlob = ttk.Button(...).grid(...)`，存储在中的`self.ABlob`是`None`，因为那是网格函数返回的内容。

如果要存储对按钮的引用，则需要创建按钮，然后将 grid 作为两个单独的步骤调用：

```
self.ABlob = ttk.Button(...)
self.ABlob.grid(...) 
```

我个人认为这是一种最佳实践，尤其是当您使用网格时。通过将所有网格语句放在一个块中，可以更轻松地可视化布局和发现错误：

```
self.ABlob.grid(row=3, column=2)
self.BBlob.grid(row=3, column=3)
self.CBlob.grid(row=3, column=4) 
```

# java - Generics and calling a method that belongs to the type

> ID：14301082
> 
> 赞同：0
> 
> 时间：2013-01-13T05:58:28.973
> 
> 标签：java, generics

I've been trying to make a class to represent a deck of cards. However, I wanted to create it in a way which it could be any kind of cards, it doesn't need to know which kind it just has be able to store them, shuffle and draw them one at a time be them uno cards, regular playing cards, or trading cards. For this, I've been trying something I've heard of but have not used -- Generics.

However, I've had no luck at all trying to get it to work. It won't instantiate, populate cards, or return the correct type when drawing the card. I've tried mixing and matching and I just simply can't get it to work.

**Old Code that was buggy was truncated to save space, look at previous edits to see. Summary: I used Cardable instead of T and lacked to express generics in general.**

So how would this work, I'm completely new to generics. I've been looking around everywhere and I keep hearing about *Type Erasure* and that the class literal should be a parameter and yadda yadda... But then how does ArrayList do it? Why is it that you can just type `ArrayList<String>()` and it will just work without needing something ridiculous like `ArrayList<String>(String.GetClass())`?

Thanks for your time.

Edit: Cardable is a class in which any card that can be put into the deck will extend.

Edit2: Perception's suggestion has thus fixed my code, but I am not sure how I could call to populate the deck. Right now I have it to accept an array, but it would be nice to have it internal, and I'm not entirely sure I grasp the entire *factory* method.

```
public class Deck<T extends Cardable>
{
    private ArrayList<T> cardsInDeck;

    public Deck()
    {
        cardsInDeck = new ArrayList<T>();
    }

    public void populate( T[] newCards )
    {
        cardsInDeck.clear();
        for( T card : newCards )
        {
            cardsInDeck.add( card );
        }
        shuffle();
    }

    public T drawCard()
    {
        T card = null;
        try
        {
            card = cardsInDeck.get( 0 );
        }
        catch( IndexOutOfBoundsException e )
        {
            System.out.println( "Ran out of Cards" );
            e.printStackTrace();
        }
        cardsInDeck.remove( 0 );
        return card;
    }

    public void shuffle()
    {
        ArrayList<T> newDeck = new ArrayList<T>();
        Random rand = new Random();
        while( !cardsInDeck.isEmpty() )
        {
            int index = rand.nextInt( cardsInDeck.size() );
            newDeck.add( cardsInDeck.get( index ) );
            cardsInDeck.remove( index );
        }
        cardsInDeck = newDeck;
    }

    public int getSize()
    {
        return cardsInDeck.size();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T06:16:16.717

问题是： 的实现`ArrayList<E>`不依赖于实际的类型 E。这就是为什么你不需要在构造函数中传递类型（如你所说，`new ArrayList<String>(String.class)`）。

如果您编写一个泛型类，由于某种原因，它必须确切地知道泛型类型在运行时代表什么，那么您需要在构造函数中传递该类型，因为正如您所说，*类型擦除*不允许您获取该类从`T`. 你需要`new MyClassThatNeedToKnowItsActualTypeParameter<String>(String.class)`.

例如，假设一个类访问数据库并检索给定类的实例。类的实例存储在以该类命名的表中。例如：

```
class MyRepository<T> {
  T load(int id) { ... }
} 
```

该方法`load`需要在运行时准确地知道 T 是什么，因为它需要能够构造一个查询，该查询将使用 T 表示的实际类的名称。但是，在 Java 中，您无法从 中获取此信息`T`，因为`T`会因类型擦除而消失。此外，该`load`方法需要一种方法来创建正确类型的实例并将数据库中的数据写入其中。要创建一个类的实例，您可以使用反射，`clazz.newInstance()`例如。在这里，再次，你需要确切地知道你正在处理什么类。你最终会得到这样的东西：

```
class MyRepository<T> 
  private final Class<T> clazz;
  MyRepository(Class<T> clazz) { this.clazz = clazz; }
  T load(int id) {
    final String tableName = clazz.getSimpleName() + "Table";
    /* connect, retrieve data, disconnect */
    final T t = clazz.newInstance(); // must be inside try/catch
    /* fill instance t with data from database somehow (using reflection probably, which, again, needs to know what clazz is */
    return t;
  }
}

...
final MyRepository<User> userRepository = new MyRepository<User>(User.class);
final User user = userRepository.load(123);
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T06:17:14.513

您可以为此使用泛型，但卡片组将无法自行填充——它不知道要创建什么类的对象！根据您的描述，您想要的基本上是一个可以是任何东西的`ArrayList<T>`地方；`T`它甚至不必是卡片。但是，您需要的是一种填充套牌的方法。为此，可以使用工厂对象：

```
public interface CardGenerator<T> {
    T[] generateAllCards();
}

public class Deck<T> {
    private ArrayList<T> cardsInDeck;

    public Deck(CardGenerator<T> generator) {
        cardsInDeck = new ArrayList<T>();
        cardsInDeck.addAll(generator.generateAllCards());
    }
    . . .
} 
```

如果您愿意，您可以将类型限制`T`为 extend `Cardable`，但就（就您所描述的而言）的逻辑而言`Deck`，这不是必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T07:35:46.140

不要使用泛型。

如果你想处理不同*类型*的卡片，你只会使用遗传学，例如

*   52张牌组
*   塔罗牌
*   63张5手500副牌
*   ETC

此问题不适用于您的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T06:18:37.480

查看代码我不认为你真的需要一个泛型类，因为你几乎不使用 T。如果你只是将你的 populate 方法更改为这样的东西，你的工作应该完成：

```
public void populate(Cardable t)
    {
        cardsInDeck.clear();
        Cardable[] cardsMade;

        cardsMade = t.makeAllCards();

        for( Cardable card : cardsMade )
        {
            cardsInDeck.add( card );
        }

        shuffle();
    } 
```

# android - `armeabi-v7a` 和 `armeabi` 是 Android 应用程序的 Application.mk 中仅有的两个 arm 选项吗？

> ID：14301085
> 
> 赞同：1
> 
> 时间：2013-01-13T05:58:53.737
> 
> 标签：android, cpu-architecture

如果没有，Application.mk 文件中的 arm 架构还有哪些其他选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T06:21:00.130

两个附加选项是`x86`和`mips`。我相信这4个是唯一的选择。

# ruby - Difference between `File::exist?` and `File::exists?`

> ID：14301088
> 
> 赞同：15
> 
> 时间：2013-01-13T05:59:57.227
> 
> 标签：ruby

On [ruby-doc](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-exist-3F), the documentation entries for `File::exist?` and `File::exists?` are duplicated with different semantics: one entry says returns `true` if `file_name` is a directory; the other says returns `true` if `file_name` is a file.

I don't think either entry is correct. Both methods seem to be implemented in [`file.c`](https://github.com/ruby/ruby/blob/trunk/file.c#L5444) using `rb_file_exist_p`, which, seems to try to call `fstat()` if the value passed is an IO, or `stat()` if it's a string. Both `fstat()` and `stat()` return `0` on success and `-1` on error, and this is passed back to `rb_file_exist_p`, and turned into a boolean result. It seems to me that

1.  there are two methods for making code read more easily; there are no semantic differences
2.  neither really relates to a *file* existing, but to whether a *file-like* item exists, e.g. a file, a dir, a socket, a fifo etc.
3.  perhaps the document could say that the methods tell the caller whether or not a thing that has file-like semantics is there, but more specific tests will tell what it actually is: e.g. directory?, file?, socket? etc.

Is my understanding of the (lack of) difference in the methods correct, and is it worth suggesting a change to the document ?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-13T06:28:46.777

请注意，这个问题的答案取决于 Ruby 版本。有关较新版本的 Ruby，请参阅[其他答案](https://stackoverflow.com/a/44542641/479863)。AFAIK`exists?`在 2.2 中已弃用。

* * *

如果我们查看 C 源代码，[我们会看到](https://github.com/ruby/ruby/blob/ruby_1_9_3/file.c#L5387)：

```
rb_cFile = rb_define_class("File", rb_cIO);
/* ... */
define_filetest_function("exist?", rb_file_exist_p, 1);
define_filetest_function("exists?", rb_file_exist_p, 1); 
```

所以`File.exist?`和`File.exists?`完全一样，相应的文档是：

```
Return <code>true</code> if the named file exists. 
```

`rb_file_exist_p`C 函数只是一个非常薄的包装器，[`rb_stat`](https://github.com/ruby/ruby/blob/ruby_1_9_3/file.c#L810)它是`STAT`宏的包装器，并且[`STAT`](https://github.com/ruby/ruby/blob/ruby_1_9_3/file.c#L75)只是`stat`系统调用的可移植性包装器。因此，上面的文档是正确的：如果文件存在则`File#exist?`返回。`true`

如果我们检查`file.c`有关目录的文档片段，[我们会发现](https://github.com/ruby/ruby/blob/ruby_1_9_3/file.c#L1090)：

```
/*
 * Document-method: exist?
 *
 * call-seq:
 *   Dir.exist?(file_name)   ->  true or false
 *   Dir.exists?(file_name)   ->  true or false
 *
 * Returns <code>true</code> if the named file is a directory,
 * <code>false</code> otherwise.
 *
 */ 
```

所以看起来文档生成器变得很混乱，因为`Dir.exist?`和`File.exist?`被记录在`file.c`即使[`Dir`在`dir.c`](https://github.com/ruby/ruby/blob/ruby_1_9_3/dir.c#L2044).

根本问题似乎是源代码排列与文档生成器的预期不匹配，结果是混乱和不正确的文档。我不确定这应该如何解决。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-06-14T10:48:55.950

`File.exists?`由于不推荐使用ruby​​ 2.2.0`File.exist?`

[http://ruby-doc.org/core-2.2.0/File.html#exist-3F-method](http://ruby-doc.org/core-2.2.0/File.html#exist-3F-method)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-09-06T07:08:51.933

`File.exist?`并且`File.exists?`不再是完全相同的东西。见[https://github.com/ruby/ruby/blob/ruby_2_3/file.c#L5920](https://github.com/ruby/ruby/blob/ruby_2_3/file.c#L5920)

```
define_filetest_function("exist?", rb_file_exist_p, 1);
define_filetest_function("exists?", rb_file_exists_p, 1); 
```

`rb_file_exists_p`包含这一行：

```
rb_warning("%sexists? is a deprecated name, use %sexist? instead", s, s); 
```

所以你应该坚持`File.exist?`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-13T11:14:15.777

git pull 让它消失了-这里已修复[-](http://svn.ruby-lang.org/cgi-bin/viewvc.cgi?revision=36120&view=revision)不确定为什么在 ruby​​-doc 和 apidock 上生成的 doco 仍然错误

# ios - How to get exact speed using location manager

> ID：14301092
> 
> 赞同：0
> 
> 时间：2013-01-13T06:00:54.420
> 
> 标签：ios, objective-c, cllocationmanager

My map app records the details of current location from newLocation. But speed when is returned by the newLocation.speed is not exact as what my bike's speed-o-meter. When its 60 on my bike speed-o-meter the newLocation.speed shows 18\. Please help me to find the exact speed.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:47:05.340

我自己整理的。从 m/s 转换为 KMPH 和 MPH 时出现错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:06:21.113

newLocation.speed 的单位是 m/s（米每秒）。检查 newLocation.speed 的测量单位和您的自行车的 speed-o-meter 是否相同

# php - PHP Session does not work when accesing via non-PHP extensions

> ID：14301094
> 
> 赞同：3
> 
> 时间：2013-01-13T06:02:08.843
> 
> 标签：php, html, .htaccess, session, session-variables

I'm having a bizarre problem accessing php SESSION data from an HTML page. I have a basic login.php which I redirect to 'page1.html.' Now I have configured the .htaccess as such:

```
AddType application/x-httpd-php5 .html .htm 
```

Plus, I know that my php code is working on any given HTML page.

However, if I put :

```
session_start();

....

if(!isset($_SESSION['username'])){
    header ("Location: http://blahblahblah/Login.html");
} 
```

inside the body of page1.html, the if statement always fires (in fact, a `var_dump($_SESSION) yields "array(0) { }"`).

But, if I take the same code, put it in 'page1.php,' everything works as expected (and a `var_dump($_SESSION) gives proper values).`

So, is it not possible to access `$_SESSION` from an HTML page the same way you would if its extension was renamed to `'.php'`? Or is there something I am doing wrong here? I would rather like to keep most of my pages as `'.html'` as opposed to `'.php,'` as it would be an inconvenience to go back and change all the file extensions, etc.

Much appreciated,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T06:28:31.967

根据您的描述，PHP 运行正常（因为 if 语句正在触发）。

需要检查的一些事项：

*   是否`session_start()`在 page1.html 中被调用？必须调用它来检索会话数据并填充`$_SESSION`超级全局。
*   在发送标头之前被`session_start()`调用？在发送任何 HTML 或空格之前检查会话是否已启动，否则会话 cookie 将不会与标头一起发送。
*   Login.html 和 page1.html 是否在同一个域和同一个子域上？ `$_SESSION`如果会话 cookie 不可用，则可能为空。如果您尝试跨域使用会话，则可能会发生这种情况。
*   是否有会话 cookie，是否正在发送？在导航到 page1.html 时，使用 Firebog/Inspector 等检查以确保会话 cookie 存在，并且它正在与页面请求一起传递。
*   `$_SESSION`变量是如何设置的？page1.php 起作用可能只是巧合，因为`$_SESSION`当您第一次尝试访问 page1.html 时，该变量可能没有正确设置
*   Apache 是否有权写入`session.save_path`php.ini 中声明的内容？
*   是`session.save_path`有效路径吗？

# php - 需要尚未提交数据的表的表关系流程

> ID：14301095
> 
> 赞同：0
> 
> 时间：2013-01-13T06:02:27.150
> 
> 标签：php, mysql, database

我有一个将 pdf 文档上传到表格的表单，比如说“tbl_documents_one”。我正在使用 Uploadify 上传那些暂时不成问题的文件。

问题是我是 PHP 新手，在最佳实践方面有点落后。

将当前表单的表格链接到文档表格的最佳做法是什么。当前表格尚未提交，文件将提前提交，我想这样做，以便当前表格的记录将链接到它包含的文件。任何设置文档表和链接这两个表的 id 的方法，以及如果添加了文档记录但从未给出正确的链接或更新怎么办。

我实际上正在使用 Codeigniter 2 钻机。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T06:22:04.440

据我了解，您正在上传文件而不是提交表格，这是一个简单的解决方案。当您上传文档时，为这些文档创建一个表格，其中将包含该上传文件的 ID 和名称以及链接。

```
documents : id , title(of document)  , link , status 
```

比在表单中获取此表数据并让用户为每个表单选择一个文档。您的查询应在此处包含一个标志状态。如果状态设置为 1，则表示它已经链接到表单。此状态的默认值应为 0。查询应获取所有状态为 0 的记录。

# perl - Can't use string ("0") as a HASH ref

> ID：14301096
> 
> 赞同：3
> 
> 时间：2013-01-13T06:02:37.787
> 
> 标签：perl, hash

I am trying this code and get an error when running it.

```
 $cfg->{'validRules'} = "true"
...

if ($cfg->{'validRules'} eq "true") { <== error is pointing to this
} 
```

Error is

> Error: Can't use string ("0") as a HASH ref while "strict refs" in use at

I am totally clueless. I tried changing it but still the same. Appreciate if I can get some help.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T06:05:45.200

你做了相当于

```
$cfg = 0; 
```

在某一点。这显然会使

```
$cfg->{'validRules'} 
```

失败。找到您分配零的位置`$cfg`并修复它。

# javascript - Changing a variable's value throughout duration of program: JavaScript

> ID：14301098
> 
> 赞同：0
> 
> 时间：2013-01-13T06:03:17.640
> 
> 标签：javascript, jquery, html, web-applications, web

I have several .js files each containing different functions and several HTML files showing different parts of the website. I declared a variable in main.js called var lang = "ENG". However, this is the default language in case the user doesn't select a language to change the content of the website. If I were to click a button in index.html:

```
<button id="french" onclick="changeLang('French')">French</button> 
```

It should change the language of the var lang to "FRE" permanently for the rest of the current browsing period. I have tried using innerHTML, a click listener, a function returning the new value (i.e. var lang = setLanguage(inp), but nothing seems to work. Would anyone please give a suggestion on this? I am working off a large existing code database so I would like something that works in this context (currently not better ways of implementing a "language" facility in the website), although that would certainly be an improvement I would work on long-term. Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T06:07:47.710

如果我理解正确，您希望即使加载新文档也能保留信息。就每个单独的文档而言，没有“程序的持续时间”，但是您可以通过从 sessionStorage 对象写入和读取来跨会话存储数据。

放：

```
sessionStorage.setItem('language', 'FRE'); 
```

得到：

```
var language = sessionStorage.getItem('language'); 
```

您也可以使用 cookie，如果您需要支持旧式浏览器，这可能是必要的。

编辑：在重新阅读您的问题时，我意识到您根本无法设置语言变量，更不用说在整个浏览器会话中设置了。如果是这种情况，我怀疑您遇到了变量范围问题。也许向我们展示 changeLang 函数？例如，如果在全局范围内声明 lang，则设置函数不应使用“var”，否则它将仅在其本地范围内创建一个具有该名称的新变量。

```
var lang = 'ENG';
function changeLang(newLang) { lang = newlang }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T06:34:02.447

听起来您的问题与变量范围有关。这是关于 JavaScript 变量作用域的复杂问题：[JavaScript 作用域](http://coding.smashingmagazine.com/2009/08/01/what-you-need-to-know-about-javascript-scope/)

编辑：如果这不是范围问题，请查看分号的答案。

基本前提是您的`lang`变量需要是全局变量，然后您应该能够在代码中的其他任何位置修改它。

它应该看起来像这样：

在您的主文件中，在任何函数*之外*`var`，使用关键字声明变量，如下所示：`var lang = 'ENG';`

然后，当您想更改它时（很可能在函数内部）设置变量*而不*使用`var`关键字，如下所示：

```
function changeLanguage(l) {
    lang = l;
} 
```

然后，您应该能够`lang`在其他任何地方使用并获得最新的值。

# iphone - 让用户更改 UITableView 内容的字体大小

> ID：14301101
> 
> 赞同：0
> 
> 时间：2013-01-13T06:04:00.617
> 
> 标签：iphone, ios, xcode, uitableview

> **可能重复：**
> [heightForRowAtIndexPath 用于更长的 NSStrings](https://stackoverflow.com/questions/1160765/heightforrowatindexpath-for-longer-nsstrings)

我制作了一个 iphone 应用程序，其中 UITableView 填充了文本表单核心数据。

我想给用户一个选项来设置单元格中文本的字体大小。当字体大小增加时，单元格高度也必须增加。

我有什么可能的选择来实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T06:39:30.410

也许这会对你有所帮助： [autoresizingeditabletableviewcell](http://www.cocoacontrols.com/platforms/ios/controls/autoresizingeditabletableviewcell)

# css - 如何接受溢出并具有默认高度

> ID：14301102
> 
> 赞同：0
> 
> 时间：2013-01-13T06:04:13.783
> 
> 标签：css, twitter-bootstrap

使用 Twitter Bootstrap，我有一个带有以下 css 的 div：

```
#notecard.hero-unit
{
    background-image: url("../img/notecard.jpg");
    background-size: cover;
    width: 60%;
    margin-left: 20%;
    margin-right: 20%;
    height: 1%;
    position: relative;
    text-align: center;
    overflow: hidden;

} 
```

在该 div 内部，我有不同数量的文本`h2`，其中包含以下 CSS：

```
h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0;
  font-weight: bold;
  color: #333333;
  text-rendering: optimizelegibility;
} 
```

在`#notecard.hero-unit`我使用中`overflow: hidden;`，并且`height: 1%`因为大多数情况下来自`h2`滚动的文本比`#notecard`- 所以正在处理该作业，`#notecard`现在扩展到`h2`.

但是，`h2`只有一两条线的时候，`#notecard`是很小的。我想`#notecard`成为默认大小 - 假设`300px`并且仍然接受溢出（如果有的话）。

我试过设置 height at`#noteard`和 height at `h2`to `300px`，但都忽略了我需要的溢出。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T06:19:36.297

我会在 H2 的父级上使用最小高度：

```
<style>
h1, h2, h3, h4, h5, h6 {
  margin: 0;
  font-weight: bold;
  color: #333333;
  text-rendering: optimizelegibility;
}
.hero-unit {
  background-color: #eee;
  background-size: cover;
  width: 60%;
  margin-left: 20%;
  margin-right: 20%;
  min-height: 50px;
  position: relative;
  text-align: center;
  overflow: hidden;
}
</style>

<div class="hero-unit">
   <h2>Some Text</h2>
</div>
<br>

<div class="hero-unit">
   <h2>Much more text. Much more text. Much more text. Much more text. Much more text. Much more text. Much more text. Much more text. Much more text. Much more text. Much more text. Much more text. Much more text. Much more text. Much more text. Much more text. Much more text. Much more text. Much more text. Much more text. Much more text. </h2>
</div> 
```

[http://jsfiddle.net/M9bX8/5/](http://jsfiddle.net/M9bX8/5/)

# emacs - EMACS 用于符号而不是符号表达式的自定义缩进函数？

> ID：14301106
> 
> 赞同：3
> 
> 时间：2013-01-13T06:04:51.537
> 
> 标签：emacs, lisp, elisp, indentation

CLIPS 和 JESS 是用于 AI 和规则引擎的 lispy 语言。他们的 EMACS 源自 lisp-mode。正确格式化最重要的形式是 defrule，它有助于提高可读性。默认情况下，正常的 lisp 模式格式是这样使用的：

```
(defrule any-foo
  "This is a rule for any-foo."
  ?f <- (foo)
  =>
  (do-something-to ?f)) 
```

所需的格式将是这样的，可选文档中有 2 个字符，右箭头有 2 个字符，其他所有 6 个字符，如下所示：

```
(defrule any-foo
  "This is a rule for any-foo."
      ?f <- (foo)
  =>
      (do-something-to ?f)) 
```

有很多关于 EMACS 中的自定义缩进的资源，但是[这个](http://community.schemewiki.org/?emacs-indentation)跳出来了，因为它让我想知道我是否可以截取任何匹配右箭头的格式并截取它。当我进一步阅读时，我的理解更像是您可以为符号表达式编写自定义格式化函数，但是，右箭头不是那样的。我不想为整个顶层编写格式化函数，也不确定如何。

获得这种所需格式样式的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T13:42:56.173

你可以通过给 SYMBOL 一个`lisp-indent-function`属性来为第一个元素是 SYMBOL 的 Lisp 表单指定缩进。请参阅 Emacs 手册中的“ [Lisp 缩进](http://www.gnu.org/software/emacs/manual/html_node/emacs/Lisp-Indent.html)”部分。此属性可以采用各种类型的值，这些值在 Emacs Lisp 手册的“[缩进宏](http://www.gnu.org/software/emacs/manual/html_node/elisp/Indenting-Macros.html#Indenting-Macros)”部分中有说明。特别是，如果您将属性设置为符号，则：

> symbol 应该是函数名；调用该函数来计算此表达式中行的缩进。该函数接收两个参数：
> 
> **state**`parse-partial-sexp`（缩进和嵌套计算的 Lisp 原语）在解析到此行开头时 返回的值。
> 
> **pos**缩进行开始的位置。
> 
> 它应该返回一个数字，即该行的缩进列数，或者一个列表，其 car 是这样的数字。返回数字和返回列表的区别在于，数字表示同一嵌套级别的所有后续行都应该像这个一样缩进；一个列表说以下几行可能需要不同的缩进。

（该函数实际上以其他顺序接收这些参数；我[提交了一个错误报告](http://debbugs.gnu.org/cgi/bugreport.cgi?bug=13450)，建议对手册进行更正，这已在 Emacs 24.3 中修复。）

因此，您需要编写一个函数来计算`defrule`表单中一行的适当缩进，可能像这样：

```
(defun indent-for-defrule (pos state)
  "A lisp-indent-function for defrule.
Indent docstring and => by 2 columns; other lines by 6 columns."
  (save-excursion
    (goto-char pos)
    (let* ((have-string (looking-at "\\s-*\""))
           (have-arrow (looking-at "\\s-*=>"))
           (first-sexp (progn
                         (ignore-errors (backward-sexp))
                         (<= (point) (nth 2 state)))))
      (+ (progn (goto-char (nth 1 state)) (current-column))
         (if (or (and first-sexp have-string) have-arrow) 2 6))))) 
```

然后将该函数分配给符号的`lisp-indent-function`属性：`defrule`

```
(put 'defrule 'lisp-indent-function #'indent-for-defrule) 
```

# actionscript-3 - 在目标之前访问 MovieClip

> ID：14301107
> 
> 赞同：0
> 
> 时间：2013-01-13T06:04:58.587
> 
> 标签：actionscript-3

我是 AS3 编程的新手，

### 问题示例

在舞台上，我将 image_contenter 作为 MovieClip。

> image_contenter_mc ----舞台
> 
> movieClip1 ----内部 image_contenter_mc
> 
> movieClip2 ----movieClip1内部
> 
> movieClip3 ----movieClip2内部
> 
> movieClip4 ----movieClip3内部

现在我尝试使用访问movieClip3

> 事件.目标.名称

它返回movieClip4和

> 事件.currentTarget

也不行。那么如何访问movieClip3和movieClip2

> event.(target-1).name --我认为当我使用它时也会出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T06:29:57.823

您可以使用目标上的“父”属性来获取其父级，假设目标是 DisplayObject 类型的对象（在本例中是）。

```
// cast the target to a DisplayObject (since we want to treat it as a DisplayObject object)
var current:DisplayObject = (DisplayObject) (event.target);

// this would lead to the parent of the display object
// movieclip 3 is the parent of movieclip 4
// movieclip 2 is the parent of movieclip 3
// and so on
trace(current.parent); 
```

DisplayObject - Adob​​e ActionScript® 3 (AS3) API 参考 [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#parent](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#parent)

# iphone - 配置文件错误仍然存 在

> ID：14301110
> 
> 赞同：0
> 
> 时间：2013-01-13T06:05:16.867
> 
> 标签：iphone, xcode

> 找不到此可执行文件的有效配置文件。

尝试编译到 iPhone 5 进行测试时出现上述错误消息。该项目已经编译成iPhone 4（iOS 6）和iPhone 4s（iOS 5），没问题。

还从 Apple 开发者网站下载了一个名为“iOS_development.cer”的文件。不确定 *.cer 文件是否是要下载的正确文件。并且也无法在 Xcode 中安装 *.cer 文件。

请帮忙 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T06:18:16.267

“ `.cer`”文件是一个证书文件，它允许您对您安装和/或分发 ADHOC 版本的应用程序进行代码签名。

您真正想要的文件是移动配置文件。`.mobileprovision`如果您从供应门户下载它，它的末尾会有一个“ ”扩展名。双击此文件会将其安装到您的 Xcode 管理器中（在“设备”下）。

如果你做对了，它应该出现在这个屏幕上：

![在管理器中配置配置文件](../Images/c22c93a374ff1d1af8ff6c67d6c9ef3e.png)

您安装证书一次，您可能会为您处理的每个新项目/应用程序创建一个移动配置文件（除非您让 Xcode 自动管理配置）。

# javascript - 如何检查一个元素是否已经在监听一个函数

> ID：14301125
> 
> 赞同：0
> 
> 时间：2013-01-13T06:08:58.583
> 
> 标签：javascript, jquery, javascript-events

当我使用相同的函数两次添加 .on() 事件侦听器时，它会触发该函数两次.. 例如：http: [//jsfiddle.net/56hxy/13/](http://jsfiddle.net/56hxy/13/) （单击“on”按钮，然后单击主绿色 div)

如何检查一个元素是否已经在监听一个函数以免添加两次？

```
if (already  $('#id').on('click',functionName)  ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T06:11:58.457

您可以取消绑定事件侦听器，然后添加它。

要解除绑定，请使用

```
$('#id').unbind('click'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T06:18:18.570

这个问题的重复[？](https://stackoverflow.com/questions/2008592/can-i-find-events-bound-on-an-element-with-jquery)您可以使用 $._data 方法，尽管它是内部的，因此可能并不理想。

无论如何它会像：`$._data($("#id")[0], "events")`

# sync - 如何将弹出框与滑块按钮一起移动

> ID：14301132
> 
> 赞同：0
> 
> 时间：2013-01-13T06:11:07.980
> 
> 标签：sync, move, nsslider, nspopover

我有一个用于音量的自定义滑块，我希望滑块的当前值显示在我目前已经拥有的弹出窗口中，见下图。

不幸的是，目前弹出框在滑块中间是静态的。

知道如何使弹出框与滑块按钮一起移动吗？

这是我到目前为止所拥有的：

```
- (IBAction)showPopover:(id)sender {

   volumeSetting = [sender intValue];
   [volumeLabel setStringValue:[NSString stringWithFormat:@"%i",volumeSetting]];
   [popover showRelativeToRect:[sender bounds] ofView:sender preferredEdge:NSMinYEdge ];

} 
```

![在此处输入图像描述](../Images/bd54fd204b5c7d3900f114d63b337a3e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:31:42.380

而不是使用发送者的边界来确定滑块此时的位置，并从该位置创建一个小矩形（NSPopover 使用它来根据首选大小在其边界处居中）。不幸的是，这不会为弹出框设置动画。它只会从一个位置跳到下一个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T14:57:14.530

你可以试试这段很棒的代码：http: [//blog.neuwert-media.com/2011/04/customized-uislider-with-visual-value-tracking/](http://blog.neuwert-media.com/2011/04/customized-uislider-with-visual-value-tracking/)

# regex - 正则表达式选择 另一个 html 标记中的所有标记

> ID：14301134
> 
> 赞同：1
> 
> 时间：2013-01-13T06:11:18.867
> 
> 标签：regex

我从另一个项目中采用了一些代码，但它搞砸了。我想选择（并最终删除）所有`<br/>`标签，但只选择标签**内** `<pre>`的标签。有这个正则表达式吗？

```
These 2 lines should not be<br/>
touched. Example only.<br/><br/>

<pre class="code">mysql&gt;
<strong> SELECT state, COUNT(*) FROM president GROUP BY state;</strong><br/>
+-------+----------+<br/>
| state | COUNT(*) |<br/>
+-------+----------+<br/>
| OH    |        7 |<br/>
| PA    |        1 |<br/>
| SC    |        1 |<br/>
| TX    |        2 |<br/>
| VA    |        8 |<br/>
| VT    |        2 |
+-------+----------+</pre> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T10:56:32.797

由于您没有提到该工具，我将假设您的正则表达式引擎支持`\G`¹。请注意，这是原始正则表达式，您可能需要进行一些转义：

```
((?:<pre|\G(?!^))(?:(?!</pre|<\s*/?\s*br)[/s/S])*)<\s*/?\s*br\s*/?\s*> 
```

替代品：`$1`

***一个重要的假设是您的输入中不能有（有效的）嵌套`pre`标签。***

[**演示**](http://www.regex101.com/r/gS1dR8)。（注意：由于转义，演示的正则表达式可能略有不同）。

`((?:<pre|\G(?!^))(?:(?!</pre|<\s*/?\s*br)[/s/S])*)`这部分搜索`pre`标记的开头，或从最后一个匹配项（找到`br`内部标记`pre`）继续，然后抓取所有字符，直到它碰到一个有效的结束`pre`标记（并且必须向前跳过 - 因为正则表达式的下一部分匹配一个`br`标签）或`br`标签。`(?!^)`after是一种启发式方法，`\G`以确保`\G`仅在它位于`pre`标签内之后才可匹配，否则，它也将匹配输入的开头。

一个有效的标签在`<`开始标签的标签名称和标签名称之间不应有空格`<`，`/`在结束标签的标签名称和标签名称之间不应有空格。[参考](http://www.jelks.nu/XML/xmlebnf.html)。这个事实适用于检查标签的边界`pre`（`pre`标签仅在找到有效的结束标签时才结束）。但是，代码将匹配任何*看起来像*标签的`br`标签（根据上述语法可能无效）并删除它们。

这是与`br`标签匹配的部分：`<\s*\/?\s*br\s*\/?\s*>`。如您所见，它甚至会匹配坏标签，例如`< /br>`or`</ br>`或`< br>`or `</br/>`。我假设您不介意清理这些案件。

**脚注**

1.  如果引擎支持`\G`最后一个匹配边界，那么它也应该支持我在这个正则表达式中使用的其他特性，例如负前瞻`(?!pattern)`。

# css - 水平显示图像/块

> ID：14301135
> 
> 赞同：0
> 
> 时间：2013-01-13T06:11:25.573
> 
> 标签：css, html, styles

我试图让一个 div 来显示图像/块而不溢出 y 轴但溢出 x 轴。

这是我没有运气的尝试 [http://fiddle.jshell.net/VJX3p/1/](http://fiddle.jshell.net/VJX3p/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T06:45:25.110

将`white-space: nowrap;`样式应用于子 div 图像将水平对齐

```
#child {
  position:relative;
  background:#fde;
  width:400px;
  height:300px;
  overflow-x:auto;
  white-space: nowrap;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T07:15:10.997

```
#parent {
  position:relative;
  background:#fd2;
  width:500px;
  height:350px;
  overflow:hidden;
}
#child {
   position:relative;
  white-space:nowrap;
  background:#fde;
  width:400px;
  height:300px;
  overflow-x:auto;
} 
```

如果有人有兴趣知道最终答案，那就这样吧。谢谢大家，sreejithsdev`white-space: nowrap;`是诀窍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T06:20:00.557

你可以只用 CSS 来解决这个问题。以下代码将使 vid 仅在 x 轴上溢出：

```
#parent {
  overflow-x: scroll;
}
#child {
  overflow: hidden;
  width: 2650px;
}
img {
  float: left;
  margin-right: 9px;
  display: block;
} 
```

为了更好地解释发生了什么，这是我的思考过程： 1）首先我们将图像浮动到左侧，以便它们彼此相邻排列（仅当有足够的空间时，我们将在稍后设置）。我设置了 9 px 的 margin-right 来分隔图像。我出于习惯将图像设置为显示块（我不认为这是必需的）。

2）为了在一行中获取所有图像，我们需要给#parent 或#child 提供2650px 的宽度。我决定将#child 设置为 2650px，这样我就可以将 #parent 设置为 overflow-x（从而创建滚动区域）。我还必须将 overflow: hidden 设置为 #child 以修复由于所有子项都浮动而发生的“clearfix”问题。

请注意，如果添加图像或更改图像大小，则必须重新计算#child 的宽度值。如果您要动态加载更多图像，则可以通过 javascript 在服务器端或客户端动态执行此操作。

# cakephp - 教程 jamesfairhurst 上的 cakephp 持久过滤器

> ID：14301137
> 
> 赞同：0
> 
> 时间：2013-01-13T06:11:38.480
> 
> 标签：cakephp, filter, components

我按照教程在我的桌子上创建了一个过滤器：

[http://www.jamesfairhurst.co.uk/posts/view/cakephp_filter_component/](http://www.jamesfairhurst.co.uk/posts/view/cakephp_filter_component/)

谁能帮我找到一种方法让分页后过滤器保持不变？

## 非常感谢。

我选择了这个组件，因为我有以下插件问题。我刚刚在一个新环境 Ubuntu 12.10 中安装了 CakePhp。根目录是/var/www/cakephp。我有一个由三个表组成的数据库。我使用以下命令创建了一个新项目：

```
#cd /var/www/cakephp
#cake bake project jobsv2
#cake bake db_config
#cake bake model all
#cake bake controller all
#cake bake view all 
```

现在我想添加一个名为 Filter 的插件。我已将其复制到 /var/www/cakephp/jobsv2/plugins/Filter 中，并将以下行放入文件 /var/www/cakephp/jobsv2/config/bootstrap.php 中：

```
CakePlugin::load('Filter'); 
```

我收到以下错误：

```
Fatal error: Class 'CakePlugin' not found in /var/www/cakephp/jobsv2/config/bootstrap.php on line 52 
```

如果我将插件放在 /var/wwww/cakephp/app/Plugin 中，CakePhp 无法识别该插件，并且我收到错误“找不到组件”。你知道为什么会发生这种情况吗？在 pligins 中搜索我发现我喜欢这个：

[https://github.com/pedroelsner/filter_results](https://github.com/pedroelsner/filter_results)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:00:42.053

您最好尝试使用更新的组件/插件。您可以在[plugins.cakephp.org](http://plugins.cakephp.org)上搜索。

# autofac - 使用 AnyConcreteTypeNotAlreadyRegisteredSource 进行属性接线

> ID：14301138
> 
> 赞同：1
> 
> 时间：2013-01-13T06:11:39.303
> 
> 标签：autofac

我正在使用 AnyConcreteTypeNotAlreadyRegisteredSource 来注册具体类型。有什么方法可以注入这些类型的属性吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:24:43.227

简短的回答是**不**

因为 Autofac 默认情况下不会注入属性，并且 `AnyConcreteTypeNotAlreadyRegisteredSource`没有提供配置它的方法。

但是，基于[原始实现](http://code.google.com/p/autofac/source/browse/Core/Source/Autofac/Features/ResolveAnything/AnyConcreteTypeNotAlreadyRegisteredSource.cs)，您可以创建自己的，使用以下选项`AnyConcreteTypeNotAlreadyRegisteredSourceWithProperties`注册组件：`PropertiesAutowired()`

```
public class AnyConcreteTypeNotAlreadyRegisteredSourceWithProperties 
    : IRegistrationSource
{
    public IEnumerable<IComponentRegistration> RegistrationsFor(
        Service service,
        Func<Service, IEnumerable<IComponentRegistration>> registrationAccessor)
    {
        if (registrationAccessor == null)
        {
            throw new ArgumentNullException("registrationAccessor");
        }
        var ts = service as TypedService;
        if (ts == null ||
            !ts.ServiceType.IsClass ||
            ts.ServiceType.IsSubclassOf(typeof(Delegate)) ||
            ts.ServiceType.IsAbstract ||
            registrationAccessor(service).Any())
            return Enumerable.Empty<IComponentRegistration>();

        return new[] { RegistrationBuilder.ForType(ts.ServiceType)
            .PropertiesAutowired().CreateRegistration() };
    }

    public bool IsAdapterForIndividualComponents
    {
        get { return false; }
    }
} 
```

然后你注册你的实现：

```
var builder = new ContainerBuilder();
builder
  .RegisterSource(new AnyConcreteTypeNotAlreadyRegisteredSourceWithProperties()); 
```

# php - 如何创建录音 WebApp？

> ID：14301140
> 
> 赞同：0
> 
> 时间：2013-01-13T06:12:20.223
> 
> 标签：php, javascript, html, audio, recording

当用户访问我的网页时，我必须创建一个 webapp 来录制用户的声音，并授予我的 webapp 录制他/她的声音的权限。

谁能给我一些想法，我应该使用哪种技术或 API 来创建这样的应用程序。

这可以使用 HTML、Javascript 或 PHP 来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T06:13:58.350

您可以通过闪存或启动小程序来完成

> 这可以使用 HTML、Javascript 或 PHP 来完成吗？

不

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T06:41:31.560

来自stackoverflow

[通过 Web 为 Intranet 解决方案录制音频](https://stackoverflow.com/questions/651796/recording-audio-via-the-web-for-an-intranet-solution)

来自网络

[http://www.askdavetaylor.com/how_do_i_capture_an_internet_audio_stream.html](http://www.askdavetaylor.com/how_do_i_capture_an_internet_audio_stream.html)

[http://emoney.al.ru/capture-streaming-video-and-audio/](http://emoney.al.ru/capture-streaming-video-and-audio/)

[http://www.totalrecorder.com/](http://www.totalrecorder.com/)

# html - 为什么重新加载页面后输入仍然填充？

> ID：14301141
> 
> 赞同：1
> 
> 时间：2013-01-13T06:12:33.937
> 
> 标签：html, forms, input

```
<form id="form2" action="go.php" method="post">
<input type="text" name="user" value="" />
<input type="password" name="pass" value="" />
</form> 
```

我在输入中输入了一些值，然后 - 重新加载页面。
预计重新加载后输入为空，因为它们开始`value=""`但它们仍然被填充。
即使`F5`在 Firefox 之后。
另外 - 在前后导航之后。
重新加载页面后如何清除输入的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T06:15:42.763

浏览器会自动用数据填充表单字段，要关闭此功能，请将`autocomplete="off"`属性添加到表单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T06:15:43.577

这很可能是浏览器功能。大多数现代浏览器都会保存您的表单或登录信息。有关 Firefox 表单缓存的信息可以在[http://support.mozilla.org/en-US/kb/control-firefox-automatically-fills-in-forms](http://support.mozilla.org/en-US/kb/control-firefox-automatically-fills-in-forms)找到。

# java - faster way to assign static values to first 10 places in array

> ID：14301149
> 
> 赞同：1
> 
> 时间：2013-01-13T06:14:17.900
> 
> 标签：java, arrays

I want to assign integers 1-10 to already existing integer array first 10 values (index 0-9). Is there way to do this quickly without for loop or do I need for loop?

Example:

```
//already existing array with index 0-14.
//want to change this to {1,2,3,4,5,6,7,8,9,10,1,1,1,1,1}
int[] array = {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1); 
```

What I know:

```
int x = 1;
for (int a = 0; a < 10; a++)
{
    array[a] = x;
    x++;
} 
```

Is there faster way, some command perhaps?

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T06:16:41.433

You could statically assign it, it is cleaner if you have static data

```
int[] array = {1,2,3,4,5,6,7,8,9,10}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T06:18:52.190

You can create a static constant array of ten elements, and then copy it in place with System.arrayCopy.

```
static int[] template = new int[]{1,2,3,4,5,6 7,8,9,10};

System.arrayCopy(template, 0, dest, 0, 10); 
```

The remaining elements of the dest array will remain intact.

# java - 为什么BufferedReader的性能比BufferedInputStream差那么多？

> ID：14301150
> 
> 赞同：19
> 
> 时间：2013-01-13T06:14:53.840
> 
> 标签：java, performance, bufferedreader, bufferedinputstream

我知道使用 BufferedReader（包装 FileReader）会比使用 BufferedInputStream（包装 FileInputStream）慢得多，因为必须将原始字节转换为字符。但我不明白为什么它这么慢！这是我正在使用的两个代码示例：

```
BufferedInputStream inputStream = new BufferedInputStream(new FileInputStream(filename));
try {
  byte[] byteBuffer = new byte[bufferSize];
  int numberOfBytes;
  do {
    numberOfBytes = inputStream.read(byteBuffer, 0, bufferSize);
  } while (numberOfBytes >= 0);
}
finally {
  inputStream.close();
} 
```

和：

```
BufferedReader reader = new BufferedReader(new FileReader(filename), bufferSize);
try {
  char[] charBuffer = new char[bufferSize];
  int numberOfChars;
  do {
    numberOfChars = reader.read(charBuffer, 0, bufferSize);
  } while (numberOfChars >= 0);
}
finally {
  reader.close();
} 
```

我已经尝试过使用各种缓冲区大小的测试，所有这些都是 150 兆字节的文件。以下是结果（缓冲区大小以字节为单位；时间以毫秒为单位）：

```
Buffer   Input
  Size  Stream  Reader
 4,096    145     497
 8,192    125     465
16,384     95     515
32,768     74     506
65,536     64     531 
```

可以看出，BufferedInputStream 的最快时间（64 毫秒）比 BufferedReader 的最快时间（465 毫秒）快七倍。正如我上面所说，我没有显着差异的问题。但是这么大的差异似乎是不合理的。

我的问题是：是否有人对如何提高 BufferedReader 或替代机制的性能提出建议？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-13T09:56:15.357

BufferedReader 已将字节转换为字符。相对于数据块的直接副本，这种逐字节解析和复制到更大的类型是昂贵的。

```
byte[] bytes = new byte[150 * 1024 * 1024];
Arrays.fill(bytes, (byte) '\n');

for (int i = 0; i < 10; i++) {
    long start = System.nanoTime();
    StandardCharsets.UTF_8.decode(ByteBuffer.wrap(bytes));
    long time = System.nanoTime() - start;
    System.out.printf("Time to decode %,d MB was %,d ms%n",
            bytes.length / 1024 / 1024, time / 1000000);
} 
```

印刷

```
Time to decode 150 MB was 226 ms
Time to decode 150 MB was 167 ms 
```

注意：必须与系统调用混合执行此操作会减慢这两种操作（因为系统调用会干扰缓存）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-21T08:23:45.890

在 BufferedReader 实现中有一个固定常量`defaultExpectedLineLength = 80`，`readLine`在分配时在方法中使用`StringBuffer`。如果你有很多行超过 80 行的大文件，这个片段可能是可以改进的

```
if (s == null) 
    s = new StringBuffer(defaultExpectedLineLength);
s.append(cb, startChar, i - startChar); 
```

# java - 休眠重复类名异常

> ID：14301154
> 
> 赞同：2
> 
> 时间：2013-01-13T06:15:10.590
> 
> 标签：java, hibernate, reverse-engineering

我正在使用 Hibernate 3.5，当我使用 SQL 2012 和 Hibernate 进行逆向工程时，出现以下错误

```
org.hibernate.cfg.JDBCBinderException: Duplicate class name com.pepspb.entity.CheckConstraints generated for org.hibernate.mapping.Table(pepspb.sys.check_constraints). Same name where generated for org.hibernate.mapping.Table(pepspb.sys.check_constraints)
Duplicate class name 'com.pepspb.entity.CheckConstraints generated for org.hibernate.mapping.Table(pepspb.sys.check_constraints). Same name where generated for org.hibernate.mapping.Table(pepspb.sys.check_constraints)
<No message> 
```

谁能告诉我是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:43:35.087

当您将原始来源与生成的来源混合时，有时会发生这种情况。要解决此问题，您应该将`src`模块分开`gensrc`。并且不要使用`gensrc`通过逆向工程生成类的位置作为源文件夹。只需比较甚至更好地区分它们并合并以避免重复的类。

# c# - 将字符串列表排序为数字 - 找到解决方案但不知道如何实现

> ID：14301155
> 
> 赞同：1
> 
> 时间：2013-01-13T06:15:18.900
> 
> 标签：c#, .net, linq, sorting

我想在我的代码中实现[http://www.davekoelle.com/alphanum.html](http://www.davekoelle.com/alphanum.html)以对开头和结尾带有数字的字符串进行一些自然排序。我的问题是，没有做太多排序是如何将它实现到我的对象结构中。

我有一个

```
 List<string[]> myStringArrays = new List<string[]>(); 
```

我添加了 1000 个这种类型的数组：

```
 "text", "text", "1, label:3", "","","", etc ...
    "text", "text", "2, label:2", "","","", etc ...
    "text", "text", "2, label:1", "","","", etc ...
    "text", "text", "10, label:3", "","","", etc ... 
```

编辑：（在本例中标签始终为“标签”）

我一直在用 LINQ 排序

```
 myStringArrays = myStringArrays.OrderBy(m => m[2]).ToList(); 
```

但正如您猜到的那样，它排序给 alpha 排序“1...”、“10...”等等。

我尝试了这种方法：

```
 myStringArrays = myStringArrays.OrderBy(m => (m[2].Split(',')[0])).ThenBy(m => m[2].Split(':')[2]).ToList(); 
```

如果我的第三个字符串不符合该特定格式，则该方法有效但失败。这让我（最终）想到了我的问题——我将如何实现 Alphanum.cs 来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T06:56:59.413

实现起来并不难，只需要解析字符串，将它们分成数字和非数字字符，然后进行比较。这是我放在一起的一个实现：

```
public class AlphaNum : IComparable<AlphaNum> {

  private List<string> _alphas;
  private List<int> _nums;

  public AlphaNum(string value) {
    _alphas = new List<string>();
    _nums = new List<int>();
    bool alpha = true;
    int ofs = 0;
    for (int i = 0; i <= value.Length; i++) {
      if (i == value.Length || Char.IsDigit(value[i]) == alpha) {
        string s = value.Substring(ofs, i - ofs);
        if (alpha) {
          _alphas.Add(s);
        } else {
          _nums.Add(Int32.Parse(s));
        }
        ofs = i;
        alpha = !alpha;
      }
    }
  }

  public int CompareTo(AlphaNum other) {
    for (int i = 0;; i++) {
      bool e = i >= _alphas.Count;
      bool oe = i >= other._alphas.Count;
      if (e || oe) return e && oe ? 0 : e ? -1 : 1;
      int c = _alphas[i].CompareTo(other._alphas[i]);
      if (c != 0) return c;
      e = i >= _nums.Count;
      oe = i >= other._nums.Count;
      if (e || oe) return e && oe ? 0 : e ? -1 : 1;
      c = _nums[i].CompareTo(other._nums[i]);
      if (c != 0) return c;
    }
  }

} 
```

用法：

```
myStringArrays = myStringArrays.OrderBy(x => new AlphaNum(x[2])).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T06:24:43.797

自然排序的这种实现应该让你开始： http: [//www.interact-sw.co.uk/iangblog/2007/12/13/natural-sorting](http://www.interact-sw.co.uk/iangblog/2007/12/13/natural-sorting)

# mysql - Rails 服务器没有运行？

> ID：14301161
> 
> 赞同：0
> 
> 时间：2013-01-13T06:16:48.643
> 
> 标签：mysql, ruby-on-rails, ruby, sql-server

我刚刚开始使用`ruby on rails`，并在命令行中创建了一个 rails 项目。我无法启动服务器并收到以下消息（在 Mac 上）：

```
/Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle:     dlopen(/Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle, 9): Library not loaded: libmysqlclient.18.dylib (LoadError)
  Referenced from: /Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle
  Reason: image not found - /Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle
    from /Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2.rb:9
    from /Library/Ruby/Gems/1.8/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `require'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `each'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `require'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.2.3/lib/bundler.rb:128:in `require'
    from /Users/callofdutyfans9/Sites/simple_cms/config/application.rb:7
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.10/lib/rails/commands.rb:53:in `require'
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.10/lib/rails/commands.rb:53
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.10/lib/rails/commands.rb:50:in `tap'
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.10/lib/rails/commands.rb:50
    from script/rails:6:in `require'
    from script/rails:6 
```

# php - 如何在php的编辑页面中获得选中的单选按钮？

> ID：14301164
> 
> 赞同：3
> 
> 时间：2013-01-13T06:17:47.240
> 
> 标签：php

在 php 表单中，我从单选按钮获取数据到数据库。它运作良好。但是在编辑页面中如何从数据库中获取检查值？

```
 <td align="left" valign="middle"><input name="signi" type="radio" id="signi" value="S"/> YES
  <input name="signi" type="radio" id="signi" value="N" /> No</td></td> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-13T06:25:44.503

在您的编辑页面中这样做：

取变量中的数据库值：

例子：

```
<?php $signi= $row['signi']; ?> 
```

和 ：

```
<td align="left" valign="middle">
<input name="signi" type="radio" id="signi" value="S" <?php echo ($signi== 'Yes') ?  "checked" : "" ;  ?>/> YES
<input name="signi" type="radio" id="signi" value="N" <?php echo ($signi== 'No') ?  "checked" : "" ;  ?>/> No</td></td> 
```

检查此线程以获取详细信息：

[在编辑页面中显示选定的单选按钮](https://stackoverflow.com/questions/11218207/in-edit-page-show-selected-radio-button)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-12T13:05:12.397

获取该单选按钮的值：

```
<?php $signi= $row['signi']; ?> 
```

然后在 HTML

```
<td align="left" valign="middle">
<input name="signi" type="radio" id="signi" value="S" <?php if($signi=='S'){ echo "checked=checked";}  ?>/> YES
<input name="signi" type="radio" id="signi" value="N" <?php if($signi=='N'){ echo "checked=checked";}  ?>/> No</td></td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T06:21:19.647

您必须先检查数据库值，然后将检查属性设置为检查是否为真

```
<input name="signi" type="radio" id="signi" value="S" <?php if($row["signi"]=="S"){echo "checked=\"checked\" "} ?> />` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T06:27:31.967

你可以这样做。当您从表中获取记录时，您将在表单上输出其他数据。假设`$row`是一个包含记录的 php 变量。

```
if($row['checkboxfieldname'] == 'my required condition'){
?>  <input type = 'checkbox' value = '1' name = 'blahblah' checked> <?
}else{
?>  <input type = 'checkbox' value = '1' name = 'blahblah'> <?
} 
```

# c - 从 C 中的联合复制数据

> ID：14301167
> 
> 赞同：7
> 
> 时间：2013-01-13T06:18:00.910
> 
> 标签：c, pointers

我有一个指向带有联合的结构的指针

所以假设我们有

```
struct A {
  union {
    char **word;
    struct A *B
  } u;
}; 
```

我有 A* 类型的变量 x 和 y

```
typedef A* A_t;
A_t x;
A_t y; 
```

x->u = y->u 是否足以复制联合中的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T06:19:54.577

如果指针没有指向任何有效的东西，你就不能只取消引用它们。
为了能够做到这一点，`x->u`您必须确保`x`指向一些有效的内存，您显示的代码取消引用未初始化的指针，这会导致未定义的行为并且很可能会导致崩溃。同样适用于`y->u`。因此，在取消引用它们之前，请确保`x`并`y`指向有效的内存。

```
x->u = y->u 
```

不会执行**深拷贝**，而是执行**浅拷贝**。
您基本上会得到两个指向同一内存的指针，这可能不是您想要或需要的。

如果你需要一个深拷贝，你应该为你的目标分配足够的内存来保存被复制到它的数据，然后`memcpy`用来将源联合的内容复制到它。

**好读：**
[深拷贝和浅拷贝有什么区别？](https://stackoverflow.com/questions/184710/what-is-the-difference-between-a-deep-copy-and-a-shallow-copy)

# excel - Excel Multi =IF 语句

> ID：14301175
> 
> 赞同：0
> 
> 时间：2013-01-13T06:19:20.240
> 
> 标签：excel

这是单元格的原始代码行，可以正常工作：

```
=IF($V$2="Yes",IF((E3+F3)<=2777.78,((E3+F3)*0.09)*0.8,250),IF($V$2="No",IF((E3+F3)<=2777.78 (E3+F3)*0.09,250))) 
```

但我只希望在 G3>0 时运行

如果 G3<=0 那么我想要一个空白单元格或“”

我无法弄清楚如何做到这一点。

提前致谢！

肯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T06:21:57.837

是的，你可以简单地使用类似的东西：

```
=if($g$3<=0,"",XXX) 
```

（或者只是`g3`如果你想要相对单元格寻址）`XXX`你当前的表达式在哪里 sans`=`在前面^((a))。

如果您只是想要剪切粘贴工作，请使用：

```
=if($g$3<=0,"",IF($V$2="Yes",IF((E3+F3)<=2777.78,((E3+F3)*0.09)*0.8,250),IF($V$2="No",IF((E3+F3)<=2777.78 (E3+F3)*0.09,250)))) 
```

（当然假设您的原始表达是有效的 - 我没有检查过）。

* * *

^((a))老实说，我不确定你为什么自己没有弄清楚，因为你当前的表达式已经*有*嵌套`if`语句。但可能你没有意识到这一点。无论如何，上面的解决方案应该可以正常工作。

# spring - 通过 SpringSocial 获取 facebook 用户位置

> ID：14301177
> 
> 赞同：0
> 
> 时间：2013-01-13T06:19:42.890
> 
> 标签：spring, spring-mvc, spring-security, spring-social

我有一个代码来获取用户详细信息
在位置区域我在控制器类中使用了这个代码

`model.addAttribute("location",facebook.userOperations().getUserProfile().getLocation());`

此错误显示在位置框中的 jsp 视图中。

位置：org.springframework.social.facebook.api.Reference@97d487

生日：不显示任何东西，但显示性别：男性请帮助..为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:20:53.243

位置是一个对象。我认为您想显示**name**属性的值：

```
facebook.userOperations().getUserProfile().getLocation().getName() 
```

您可能没有足够的权限查看生日日期。您确定您已经在登录/注册表单中请求**了 user_birthday访问权限：**

```
<form class="fb_signin" action="/signin/facebook" method="POST">
    <input type="hidden" name="scope" value="...,user_birthday,..." />
</form> 
```

[在此处](https://developers.facebook.com/docs/reference/login/#permissions)查看所有可用权限。

# java - 换行长字符串

> ID：14301180
> 
> 赞同：2
> 
> 时间：2013-01-13T06:20:10.617
> 
> 标签：java, html, swing, jlist, joptionpane

所以我有一个解决方案（一个不好的解决方案）在表格的单元格中拆分一行 - 将 JOptionPane 的长度保持在我想要的长度，并允许文本位于单元格内的多行上。此外，如果它在垂直方向上变得太长，则会出现一个滚动条。

目前我有一个`loop`在一行上显示 9 个单词，直到`string`. 我也在用`setText( with 100% width)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T07:18:18.237

我试过这个。它似乎奏效了。反复试验让我想出了这个 289px 的宽度。如果你的单词真的很长，你仍然需要做一些类似于你现在正在做的事情：`reallyreallyreallyreallyreallyraellyreallylong`

我的解决方案如下：

```
setText("<html><table style='width:100%'>" + "<tr><td style=\"width:289px;\"><b>" + value + "</b></td></tr>" + "<tr><td style='font-weight:normal;font-size:11;padding-top:-50px;margin-top:-5px;'><i>" + "this is going to have to be pretty long actually" + "</i></td></tr>" + "</table>"); 
```

这和你要找的一样吗？

# java - Java if/else 比较字符串

> ID：14301182
> 
> 赞同：0
> 
> 时间：2013-01-13T06:20:23.160
> 
> 标签：java, printing, buffer, if-statement

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

是的，这个标题听起来很有趣，我正在为一个特别的人做这个项目，我想通过给她写一个简单的程序来邀请她。我在执行这个想法时遇到了一些麻烦。我有一个伪代码计划，但需要帮助执行它。我计划让她在控制台中输入是或否的问题答案，并让程序根据她的输入给出答案。我的想法是她对问题的输入是或否的答案，然后说如果输入是“是”则打印此语句，否则如果“否”则打印此语句。我目前在让 if else 部分工作时遇到问题。我不能让字符串在 if 语句中表现得像布尔值，所以我需要一些帮助。我开始的代码：

```
import java.io.*;
public class ask {
    public static void main(String [] args) throws IOException {
        BufferedReader in = new BufferedReader
                (new InputStreamReader(System.in));
        String answer;
        System.out.print("Would you like to go out with me? ");
        System.out.flush();
        answer = in.readLine();
        Boolean hope = Boolean.valueOf("yes");
        if (answer == hope) {
            System.out.print("Awesome!");
        }

        else
            System.out.print("Not awesome!");

    }
} 
```

显然，我实际上并没有使用那些回答的那个问题，我只是把它作为例子只是为了让程序本身工作。我无法将答案与希望进行比较，因为一个是布尔值，另一个是字符串，我也不能用字符串做字符串，所以我该如何让它工作。有任何想法吗？编辑：伙计们只是说，我知道她会说是的，这只是一种有趣的愚蠢方式来约她。这样做的时候我会亲自和她在一起，我会告诉她只使用是或否，这样就可以了，这只是一个简单的小项目。除了如何让它工作之外，不需要任何建议或意见！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T06:24:31.803

您可以使用 string.equals() 来比较字符串 例如 "Yes".equals(answer) 来比较 yes 和变量 answer

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T06:29:56.913

您可以使用字符串比较方法[equals](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#equals%28java.lang.Object%29)或[equalsIgnoreCase](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)来比较用户输入。

试试这个

```
public static void main(String[] args) throws IOException {
        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
        String answer;
        System.out.print("Would you like to go out with me? ");
        System.out.flush();
        answer = in.readLine();

        if (answer.equalsIgnoreCase("YES")) { // Comparing the input with String.
            System.out.print("Awesome!");
        }

        else
            System.out.print("Not awesome!");

    } 
```

我建议你使用[equalsIgnoreCase](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)方法。由于用户可以输入 yes、YES、yeS 等。它只是忽略大小写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T06:28:56.887

调查 switch 语句：[教程中的信息](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)

然后，除了“是”和“否”之外，您还可以输入“也许”、“现在不行”等选项作为可能的响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T06:36:07.727

在这里你去：只需用您的特定问题替换数组值

```
import java.io.*;
import java.util.Scanner;
public class ask {
public static void main(String [] args) throws IOException {

    String[] Questions={"2","3","4","5","6","7","8","9","10","J","Q","K","A"};

    int min=0;
    int max=Questions.length;
    String answer = null;
    Scanner input = new Scanner(System.in);
    for(int i=0;i<Questions.length;i++){
         int randomNum = min + (int)(Math.random()* max);

         System.out.println("Your Question: " +Questions[randomNum] ); 
         answer =input.next();
         if (answer.equals("yes")){
             System.out.println("Awesome Girl");
         }
         if (answer.equals("no")){
             System.out.println("Bad Girl");
         }

         if (answer.equals("Hope")){
             System.out.println("Hmmm..Some Hope Left");
         }

         } } } 
```

# game-engine - Ambient/Diffuse Lighting，得到一个顶点的最终静态漫反射阴影颜色

> ID：14301183
> 
> 赞同：0
> 
> 时间：2013-01-13T06:20:33.173
> 
> 标签：game-engine, directx-9, lighting

我不确定这是否可能（或者我是否在问正确的问题）。我有一个顶点/索引，我在 DirectX 9.0 的场景中渲染。现在，我想添加环境光和漫反射光，然后得到每个顶点的最终计算的漫反射阴影。所以基本上，有一个太阳，然后周围有不同的点灯。我想这将类似于 Blender 的做法。然后我想得到每个顶点的最终结果，并将其静态写入文件（无动态照明）。然后它将进入一个每个顶点使用静态漫反射颜色的游戏。所以它不依赖于相机，照明，只依赖于静态点/太阳。

我认为我不能使用 DirectX 照明，因为这似乎无法让您获得最终顶点的最终 RGB 以进行导出？

有人有算法吗？或者以某种方式在 DirectX 中添加灯光然后获得最终结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:03:47.603

我不确定我是否完全理解了这个问题，但按照我的理解，你是说你想将点光源的光照“烘焙”成顶点颜色？

如果是这种情况，那么您可以使用默认 directX 着色器用于计算最终顶点颜色的相同数学。我认为输出颜色通常计算为：

```
// saturate just clamps the resulting color values between 0 and 1.

out_ambient = saturate(vtx_ambient * ambient_light)
out_diffuse = saturate(vtx_diffuse * light_diffuse * -dot(vtx_normal, light_direction))

out_color = saturate(out_ambient + out_diffuse) 
```

因为您使用的是点光源，所以您必须根据顶点和光照位置计算 light_direction，但我认为使用它可以获得各个顶点的结果颜色。

我自己没有广泛使用着色器，所以我可能计算出错误的结果 - 有人能够验证这是否正确吗？

# jquery - 使用 jQuery 为总计添加行总计

> ID：14301186
> 
> 赞同：0
> 
> 时间：2013-01-13T06:21:08.400
> 
> 标签：jquery, forms

我正在构建一个简单的订单表格，当客户指定所需数量时，它会计算每个产品的总行数。

当客户更改数量时，我试图让表单从总计中添加（或减去）行总计。

**我在这里计算每一行的总数：**

```
$('#qtybox').change(function(){
    qty = $(this).val()
    if(qty < 10)
        $('#linetotal').text(qty * 925);
    else
       $('#linetotal').text(qty * 895);
 });

$('#qtybox1').change(function(){
    qty1 = $(this).val()
    if(qty1 < 10)
        $('#linetotal1').text(qty1 * 1045);
   else
      $('#linetotal1').text(qty1 * 1015);
});    

$('#qtybox2').change(function(){
    qty2 = $(this).val()
    if(qty2 < 10)
        $('#linetotal2').text(qty1 * 1045);
   else
      $('#linetotal2').text(qty1 * 1015);
}); 
```

但是我坚持如何将这些添加到总计中并在每个数量输入字段都失焦时对其进行更新。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T06:34:03.413

只需在三个函数中添加一行（假设总计有 id `grandtotal`）：

`$('#grandtotal').text( $('#linetotal').val() + $('#linetotal1').val() + $('#linetotal2').val() )`

请参阅代码中包含的上述行：

```
$('#qtybox').change(function(){
    qty = $(this).val()
    if(qty < 10)
        $('#linetotal').text(qty * 925);
    else
       $('#linetotal').text(qty * 895);
    $('#grandtotal').text($('#linetotal').val() + $('#linetotal1').val() + $('#linetotal2').val() )

 });

$('#qtybox1').change(function(){
    qty1 = $(this).val()
    if(qty1 < 10)
        $('#linetotal1').text(qty1 * 1045);
   else
      $('#linetotal1').text(qty1 * 1015);
   $('#grandtotal').text($('#linetotal').val() + $('#linetotal1').val() + $('#linetotal2').val() )
});    

$('#qtybox2').change(function(){
    qty2 = $(this).val()
    if(qty2 < 10)
        $('#linetotal2').text(qty1 * 1045);
   else
      $('#linetotal2').text(qty1 * 1015);
    $('#grandtotal').text($('#linetotal').val() + $('#linetotal1').val() + $('#linetotal2').val() )
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T06:35:48.543

嗯，我建议你这样做：

1）创建并分配 id 到净总文本框，就像您对所有其他输入字段（如 qtybox、qtybox1 等）所做的那样。将其初始值设置为 0 2）在计算价格并使用的 java 脚本函数中您在 HTML 页面上反映相同的 id 字段，它们在该脚本本身中同时将这些值添加到最终总框的值中，并动态更新其文本以及您对其他文本框所做的操作.. 所以它会像

在你的 if else 块之后

$('#id-of-your-total-box').text(value-of-qty1+value-of-total-box);

注意：这些是我关于如何做的一步一步的建议.. 祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T06:40:45.517

将所有 qtbox 即 1,2,3 放在一个类中，并使用 .blur() 事件来更新总计。像这样的事情

```
$('.qtbox').blur(function(){
var total=0;
$('.qtbox').each(total+$(this).val());
$('#grandtotal').text(total);
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T08:06:45.303

您可以通过重构代码使代码更具可读性和可扩展性。向具有共同属性（如行为和外观）的元素添加类将使使用较少数量的函数更容易控制事物。查看[这个 jsfiddle](http://jsfiddle.net/wYZGq/)以查看一个工作示例。这是javascript组件：

```
var BULK_CUTOFF = 10,
  REGULAR_PRICES = [985, 1045, 1045],
  BULK_PRICES = [925, 1015, 1015];

function getPrice(qty, idx) {
  if (isNaN(qty)) {
    return 0;
  }
  if (qty < BULK_CUTOFF) {
    return qty * REGULAR_PRICES[idx];
  }
  return qty * BULK_PRICES[idx];
}

function updateGrandTotal() {
  var total = 0;
  $('input.linetotal').each(function () {
    var value = parseInt($(this).val());
    if (!isNaN(value)) {
      total += value;
    }
  });
  $('#grandtotal').val(total);
}

$('input.qtybox').keyup(function () {
  var $this = $(this),
    idx = $this.index('input.qtybox'),
    qty = parseInt($this.val());
  $this.next('.linetotal').val(getPrice(qty, idx));
  updateGrandTotal();
}); 
```

# c# - 使用 RegEx 提取许多电话号码

> ID：14301193
> 
> 赞同：2
> 
> 时间：2013-01-13T06:23:08.533
> 
> 标签：c#, regex

我想从以下正则表达式中提取电话号码。当我一一输入数字时，它会提取所有电话号码格式，但当我在一个字符串中输入 2 个或更多数字时，它不会提取所有电话号码格式。

```
@"^\+?(\d[\d-. ]+)?(\([\d-. ]+\))?[\d-. ]+\d$"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T07:10:40.993

当然它不会提取多个数字。表达式以 开头`^`和结尾`$`，因此如果字符串包含除单个电话号码以外的任何内容，则正则表达式将无法匹配。

一种解决方案是删除那些开始和结束字符，然后循环以一次提取一个数字。

```
Regex rePhone = new Regex(@"\+?(\d[\d-. ]+)?(\([\d-. ]+\))?[\d-. ]+\d");
Match m = rePhone.Match(inputString);
while (m.Success)
{
    string phone = m.Value;
    m = m.NextMatch();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-25T22:40:54.497

要提取所有电话号码，您可以试试这个正则表达式：

```
((\+|\+\s|\d{1}\s?|\()(\d\)?\s?[-\.\s\(]??){8,}\d{1}|\d{3}[-\.\s]??\d{3}[-\.\s]??\d{4}|\(\d{3}\)\s*\d{3}[-\.\s]??\d{4}|\d{3}[-\.\s]??\d{4}) 
```

它的数学通常是电话号码。您可以在**[Regex101.com中使用此正则表达式检查您的电话号码](https://regex101.com/r/3fhlyJ/2)**

# html - 会话不持有 $_POST 值

> ID：14301195
> 
> 赞同：1
> 
> 时间：2013-01-13T06:23:28.573
> 
> 标签：html, forms, session, php

这有点难以解释。使用图片可能会有所帮助！

**1.**用户提交表单，简单。
![](../Images/3b3cfc1c52c4648e7b5f335d1be19faa.png)

**2.**正在设置会话，并显示已设置的会话变量。
![](../Images/bcbfc62ccf0912a143af2db08773a9c1.png)

**3.**如果用户输入验证码错误或输入正确并继续到下一页，则*inp_name*、*inp_username*和*inp_email*会话值将消失。inp_password值仍然存在（但在*设置*会话值时，它正在被加密，md5()。
![](../Images/34db3d53681eb02c238e46e4cc5cf636.png)

**表格：**

```
<form action="./" method="post" class="form-300">

    <div class="title top">Full Name</div>
    <input type="text" name="name" value="<?=$_POST['name'] ?>" />

    <div class="title top">Username</div>
    <input type="text" name="username" value="<?=$_POST['username'] ?>" />

    <div class="title top">Email</div>
    <input type="text" name="email" value="<?=$_POST['email'] ?>" />

    <div class="title top">Password</div>
    <input type="password" name="password" />

    <input type="submit" name="submit" value="Sign Up" />
    <div class="tc">By clicking Sign Up, you agree to the Terms of Use, Privacy Policy and that you are or over the age of 13.</div>
    <span class="sep-text">or</span>
    <a href="./?action=fb" class="btn-300 btn-fb">Sign Up using Facebook</a>
    <br /><br /><br />
</form> 
```

**验证码：**

```
<?php ob_start(); if(session_id() != 'uv241112'){
session_name("uv241112"); session_start();
    $_SESSION['inp_isset'] = "eAK28";
    $_SESSION['inp_name'] = $_POST['name'];
    $_SESSION['inp_username'] = $_POST['username'];
    $_SESSION['inp_email'] = $_POST['email'];
    $_SESSION['inp_password'] = md5($_POST['password']);
}else{ session_name("uv241112"); session_start(); } ?>
        <form action="./" method="post">
        <?php

        require_once('../resources/recaptchalib.php'); $publickey = "xxxxxxxxxx"; $privatekey = "xxxxxxxxxxxxxx";

        # the response from reCAPTCHA
        $resp = null;
        # the error code from reCAPTCHA, if any
        $error = null;

        if ($_POST["submit_recaptcha"]) {
                $resp = recaptcha_check_answer ($privatekey,
                                                $_SERVER["REMOTE_ADDR"],
                                                $_POST["recaptcha_challenge_field"],
                                                $_POST["recaptcha_response_field"]);

                if ($resp->is_valid) {
                        echo "You got it!";
                } else {
                        ?><div class="alert alert-error alert-440">Sorry, the text you entered was incorrect.</div><?php
                        # set the error code so that we can display it
                        $error = $resp->error;
                }
        }
        echo recaptcha_get_html($publickey, $error);
        ?>
            <br/>
            <input type="submit" name="submit_recaptcha" value="Check" class="btn-300 btn-green" />
            </form>

            <?php echo $_SESSION['inp_name']; ?>
            <?php echo $_SESSION['inp_username']; ?>
            <?php echo $_SESSION['inp_email']; ?>
            <?php echo $_SESSION['inp_password']; ?>

<?php ob_flush(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T07:23:40.510

我认为您正在以错误的方式检查表单提交。您不应该看到会话名称是否存在。事实上，在每种情况下，您都应该已经开始了会话。

Session_start() 应该是每个页面上的第一件事。

至于您的帖子值，您应该验证并使用隐藏的表单值来确定他们提交的页面。例如：

```
<form method="post">
<input type="text" name="email">
<input type="hidden" name="emailpage" value="1">
<input type="submit" name="send" value="send">
</form> 
```

然后检查表格

```
<?php
    Session_start();
    If (!empty($_POST['emailpage'])) {
        // do variable validation
        $_SESSION['email'] = $validatedemail;
    } 
```

不需要条件语句 session_start。也可能不需要设置会话名称。

发布的代码是从手机发布的示例代码，因此可能存在问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T06:59:32.243

> 代码的实际问题是您根据 POST 值在页面顶部设置会话变量。第一次提交后，它可以工作，但第二次提交时您不会再次发布这些值，因此将会话变量设置为空。（密码仍然显示，因为它是空行的 MD5。如果您比较 MD5 值，您会看到它们不同以确认）

从评论中引用我自己的话，让那些不想在再次投票之前阅读它们的人

为了更容易看到要更改的内容...

```
$_SESSION['inp_isset'] = "eAK28";
$_SESSION['inp_name'] = $_POST['name'];
$_SESSION['inp_username'] = $_POST['username'];
$_SESSION['inp_email'] = $_POST['email'];
$_SESSION['inp_password'] = md5($_POST['password']); 
```

至：

```
if(isset($_POST['username']) {
    $_SESSION['inp_isset'] = "eAK28";
    $_SESSION['inp_name'] = $_POST['name'];
    $_SESSION['inp_username'] = $_POST['username'];
    $_SESSION['inp_email'] = $_POST['email'];
    $_SESSION['inp_password'] = md5($_POST['password']);
} 
```

这将是一个有点粗略的例子，但这只是因为代码确实需要清理一下。^^

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T06:39:44.047

关于 session_id 和 session_name 的问题。我注意到您在会话开始之前设置了 session_name 。我想知道你为什么要测试 session_id 而不是 session_name？

```
--> ... if(session_id() != 'uv241112'){
                    session_name("uv241112"); ... 
```

也许应该是

```
--> ... if(session_name() != 'uv241112'){
                    session_name("uv241112"); ... 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-13T07:38:58.860

我重新编码了文件，清理了很多，它没有工作。但是我将以下代码放在一个新文件中，并在提交表单后转到它。有效。因此，如果有意义的话，我将处理新文件。感谢大家的帮助，非常感谢。

```
session_name("uv241112"); session_start();
echo $_SESSION['inp_name'];
echo $_SESSION['inp_username'];
echo $_SESSION['inp_email'];
echo $_SESSION['inp_password']; 
```

# python - 解释文档时的困惑 -最新和最新的术语

> ID：14301196
> 
> 赞同：1
> 
> 时间：2013-01-13T06:23:36.640
> 
> 标签：python

回答一个特定问题时，我在尝试解释 Python 文档时偶然发现

参考[os — Miscellaneous operating system interfaces中](http://docs.python.org/2/library/os.html#module-os)[os.uname](http://docs.python.org/2/library/os.html#os.uname)和[os.unsetenv(varname)](http://docs.python.org/2/library/os.html#os.unsetenv)的 文档，我想知道如何解释

*可用性：Unix 的**最新版本。***

*可用性：**大多数**版本的 Unix、Windows。*

如何确定**最近**和**最多**的意思。我如何知道我的 Python 脚本是否应该在我所针对的特定系统上正常工作。我是否应该始终相信事实

```
try
     <do something>
except <some-failure>:
     <fallback> 
```

例如

```
try
    import os
    _uname = os.uname()
except AttributeError:
    import platform
    _uname = platform.uname() 
```

即使我知道我所针对的 Unix 风格和版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T06:31:08.750

是的，您应该始终使用该`try-except`表单，因为它可以在“不安全”版本工作的任何地方工作，也可能在它不工作的地方工作。

但是，对于这个特定的 Python 函数，您可以使用一些特定领域的知识来推断它在哪里工作。`os.uname`是基于同名的系统调用。从`man 2 uname`中，我们得到“SVr4, POSIX.1-2001”的可用性，这意味着它将在任何基于 POSIX 标准 2001 版本或更高版本（或来自 SVr4 的版本）的 Linux 发行版上可用。也就是说，实际上，您将在个人计算机上遇到的每个 Linux 发行版。

# random - 半随机数据排序压缩问题

> ID：14301198
> 
> 赞同：0
> 
> 时间：2013-01-13T06:24:25.433
> 
> 标签：random, compression

我有[这个](http://pastebin.com/Y0GjEpTD)排序的整数序列。

它们之间的差异是随机的。但是，如果您计算每个变量的差异，您会发现它看起来有点与随机数/函数相关的对数函数（差异以对数方式增加）。

我知道这不是一个庞大的数字，但我有成千上万个这样的系列（由相同的算法生成）。

我正在尝试尽可能多地压缩这些数据。我主要使用增量压缩，只能将数据压缩到其原始大小的 30%。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T06:46:00.767

> （由相同的算法生成）

那么该算法本身可能会提供最佳压缩。它是什么？

除此之外，很容易将数据减少到大约 10K 字节。用可变长度整数编码差异。这样的整数表示为高位等于 1 的字节序列（任何数量的字节，包括无），后跟一个高位等于 0 的字节。然后连接每个字节的低七位得到整数。最低有效位首先出现。

这具有将小于 128 的所有值编码在单个字节中的优点。超过 96% 的差异小于 128。然后，通用压缩器将有效地对这些字节进行 Huffman 编码。

将其应用于您的差异，然后使用 压缩`gzip -9`，我得到 10626 字节。强制 gzip 算法仅使用 Huffman 压缩，我得到 10018 字节。如果我在第一个高位等于一个之前剪切文件，仅使用 Huffman 分别压缩这两个部分，然后将它们组合起来，我得到 9701 个字节。

更新：

下面是生成和解码可变长度整数的代码：

```
/* Write n as a variable-length integer to out. */
void var(unsigned long n, FILE *out)
{
    int ch;

    do {
        ch = (int)(n & 0x7f);
        n >>= 7;
        if (n)
            ch += 0x80;
        putc(ch, out);
    } while (n);
}

#define ULBITS 64   /* set to the number of bits in an unsigned long */

/* Read a variable-length integer from in, putting it in *n.  Return 0 on
   success, -1 on immediate end-of-file, -2 if end-of-file in the middle of an
   integer, or 1 on overflow of the unsigned long type. */
int unvar(unsigned long *n, FILE *in)
{
    int ch, b;
    unsigned long d;

    *n = 0;
    b = 0;
    do {
        ch = getc(in);
        if (ch == EOF)
            return b ? -2 : -1;
        if (b >= ULBITS)
            return 1;
        d = (unsigned long)(ch & 0x7f) << b;
        if ((d >> b) != (ch & 0x7f))
            return 1;
        *n += d;
        b += 7;
    } while (ch & 0x80);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T06:38:18.353

当前存储的文件为 101 KB。

如果您将文件存储为 32 位整数序列（以二进制形式 - 是的，它们都足够小，可以执行此操作），那么您的大小将降至 57 KB（14,345 个整数 x 4 字节）。gzipping 会为您提供 21 KB 的文件。这已经超过了 30% 的界限，但我们可以做得更好！

如果您将每个连续的差异存储为 32 位整数，则 gzip 压缩到 15 KB。

如果你想避免 gzip，我们可以拿出一些花哨的技巧。对每个差异使用简单的[Elias 伽马编码会](http://en.wikipedia.org/wiki/Elias_gamma_coding)生成一个 14 KB 的文件。但是，这需要一个烦人的比特流读取器/写入器，这可能是一个关闭。

[使用适当调整的 exp-Golomb 代码](http://en.wikipedia.org/wiki/Exponential-Golomb_coding)，您可能会做得更好；我没试过。

# matlab - MATLAB 中的“求解”命令以“z”形式返回解？这里的“z”是什么？

> ID：14301203
> 
> 赞同：1
> 
> 时间：2013-01-13T06:25:47.797
> 
> 标签：matlab

（MATLAB 2010 学生版）

问题：我正在尝试使用“solve”命令求解具有 9 个符号变量的 9 个符号方程：

问题：

```
N=2

V = sym(zeros(N+2+1)); % 5*5 symbolic matrix

syms D x; %D is diffusion constant

%Creating 3*3 non-zero symbolic entries
for row = 0:N
    for col = 0:N
        V(row+1, col+1) = sym(sprintf('V%d%d', row+1, col+1));
    end
end

count=1;
for m=0:N
    for n=0:N
        % Diffusion PDE written in Differential Transform domain
        eqn(count) = (m+1)*V(m+1+1,n+1)-D*(n+1)*(n+2)*V(m+1,n+2+1);  
        count=count+1;
    end
end

%length(eqn) is 9

eqn=eqn(1:7);      %as last 2 terms are [0 0] in eqn 
```

PDE 的初始条件由 Dirac Delta func ("delta(x)") 给出。因此，它由 2 个条件组成（一个代表 x=0，一个代表 x 不等于 0）

因此，在 x=0 时，它是“1”，给出：

```
eqn(length(eqn)+1)=V(1,1)-V(2,1)+V(3,1)-1; % ini.condn 
```

在 x 不等于 0 时，它是“0”给出：（这有意义吗？）

```
eqn(length(eqn)+1)=(V(1,1)-V(2,1)+V(3,1))+(V(1,2)-V(2,2)+V(3,2))*x + (V(1,3)-     
V(2,3)+V(3,3))*x^2; %ini. condn

S=solve(eqn,'V11' ,'V12' ,'V13' ,'V21' ,'V22' ,'V23' ,'V31' ,'V32' ,'V33'); 
```

答：S.V11、S.V12、S.V13、S.V21 是 'z' 的函数。其余为 0

我的解决方案中出现了“z”。

1.  解决方案中的“z”是什么？这是什么来源？

2.  如何规避这一点并获得有意义的解决方案？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:07:58.490

该`z`参数意味着对于`z`您替换的任何值，您的解决方案集对您的方程有效。

你有九个方程来找到九个未知数。但是，您的第六个方程式`2*V33=0`使以下方程式`-2*D*V33=0`变得多余……因此您实际上只有八个独立的方程式，因此额外的参数`z`。我不知道更多关于你的 PDE 的细节来告诉你为什么它不是合适的，但如果你期望一个唯一的解决方案，基本上你需要另一个涉及你的非零变量的方程。

# geometry - 具有来自一组点的顶点的多边形

> ID：14301204
> 
> 赞同：0
> 
> 时间：2013-01-13T06:26:18.197
> 
> 标签：geometry, polygon

我如何从给定的点集制作多边形。

可能的多边形：

![可能性 1](../Images/422efa4a70779e290a21eec0b7d9e1bc.png) ![可能性 2](../Images/422efa4a70779e290a21eec0b7d9e1bc.png)

无效的多边形：

![自相交](../Images/38687d1714224b577caa581c9ebaa33e.png)

多边形不能自相交。

我一直在考虑根据一个点对点进行排序，但它似乎对某些情况无效。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T06:48:32.987

可能是这样：

1.  找到给定点的凸包 H
2.  对于不在船体中的每个点P，找到船体最近的边HiHi+1，并将其替换为边HiP和PHi+1。
3.  如果两个点具有相同的最近边，则将它们连接起来

![例子](../Images/8723daddff5887d8f2888ad9dca26d4e.png)

# c - 为 STM32F4 编译 Makefile 错误

> ID：14301205
> 
> 赞同：1
> 
> 时间：2013-01-13T06:26:35.753
> 
> 标签：c, makefile, stm32f4discovery

我对 Makefiles 还是很陌生，所以我遇到了一些麻烦。我正在尝试为 STM32F4 编译一些代码，我为 STM32F3 获得了这个 Makefile.common 并且只是更改了工具链和目录以反映我将用于我的开发的那些。不幸的是，我收到了这个编译错误，虽然我已经尝试过广泛地搜索它，但没有什么能帮助我解决它。

这是我得到的错误

> 制作：execvp：/home/wilfred/CodeSourcery/Sourcery_CodeBench_Lite_for_ARM_GNU_Linux/bin：权限被拒绝制作：*** [startup_stm32f4xx.o] 错误 127

这是我的 Makefile.common 的代码。谢谢！

```
# name of executable

ELF=$(notdir $(CURDIR)).elf                    

# Tool path

TOOLROOT=/home/wilfred/CodeSourcery/Sourcery_CodeBench_Lite_for_ARM_GNU_Linux/bin                         

# Library path

LIBROOT=/home/wilfred/Computer-Science/STM32F/STM32F4-Discovery_FW_V1.1.0

# Tools

CC=$(TOOLROOT)/arm-none-linux-gnueabi-gcc
LD=$(TOOLROOT)/arm-none-linux-gnueabi-gcc
AR=$(TOOLROOT)/arm-none-linux-gnueabi-ar
AS=$(TOOLROOT)/arm-none-linux-gnueabi-as
OBJCOPY=$(TOOLROOT)/arm-none-linux-gnueabi-objcopy

# Code Paths

DEVICE=$(LIBROOT)/Libraries/CMSIS/ST/STM32F4xx
CORE=$(LIBROOT)/Libraries/CMSIS/Include
PERIPH=$(LIBROOT)/Libraries/STM32F4xx_StdPeriph_Driver
SYSTEM_FILE=$(LIBROOT)/Libraries/CMSIS/ST/STM32F4xx/Source/Templates
STARTUP_FILE=$(LIBROOT)/Libraries/CMSIS/ST/STM32F4xx/Source/Templates/gcc_ride7

# Search path for standard files

vpath %.c $(TEMPLATEROOT)

# Search path for perpheral library

vpath %.c $(CORE)
vpath %.c $(PERIPH)/src
vpath %.c $(DEVICE)

vpath %.c $(SYSTEM_FILE)
vpath %.s $(STARTUP_FILE)

#  Processor specific

LDSCRIPT = $(LIBROOT)/Project/Peripheral_Examples/IO_Toggle/TrueSTUDIO/IO_Toggle/stm32_flash.ld
STARTUP = startup_stm32f4xx.o system_stm32f4xx.o

# Compilation Flags

FULLASSERT = -DUSE_FULL_ASSERT 

LDFLAGS+= -T$(LDSCRIPT) -mthumb -mcpu=cortex-m4
CFLAGS+= -mcpu=cortex-m4 -mthumb 
CFLAGS+= -I$(TEMPLATEROOT) -I$(DEVICE) -I$(CORE) -I$(PERIPH)/inc -I.
CFLAGS+= -DUSE_STDPERIPH_DRIVER $(FULLASSERT) 
CFLAGS+= -I$(DEVICE)/Include -I$(CORE)
CFLAGS+= -I$(LIBROOT)/Project/Peripheral_Examples/IO_Toggle

# Build executable 

$(ELF) : $(OBJS)
    $(LD) $(LDFLAGS) -o $@ $(OBJS) $(LDLIBS)

# compile and generate dependency info

%.o: %.c
    $(CC) -c $(CFLAGS) $< -o $@
    $(CC) -MM $(CFLAGS) $< > $*.d

%.o: %.s
    $(CC) -c $(CFLAGS) $< -o $@

%.bin: %.elf
    $(OBJCOPY) -O binary $< $@

clean:
    rm -f $(OBJS) $(OBJS:.o=.d) $(ELF) startup_stm32f* $(CLEANOTHER) $(BIN)

debug: $(ELF)
    arm-none-linux-gnueabi-gdb $(ELF)

download: $(BIN)
    st-flash write $(BIN) 0x8000000

etags:
    find $(PERIPH) -type f -iname "*.[ch]" | xargs etags --append
    find $(DEVICE) -type f -iname "*.[ch]" | xargs etags --append
    find $(CORE) -type f -iname "*.[ch]" | xargs etags --append
    find . -type f -iname "*.[ch]" | xargs etags --append

all: $(ELF)

# pull in dependencies

-include $(OBJS:.o=.d) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T21:22:10.263

您可以使用 chmod 更改权限（运行“man chmod”以获取更多信息）。

例如，

chmod 777 myfile.c

更改 myfile.c 以拥有所有用户的所有权限 (rwx)。

# javascript - 如何使用 PhoneGap 连续播放音频？

> ID：14301206
> 
> 赞同：2
> 
> 时间：2013-01-13T06:26:40.330
> 
> 标签：javascript, html, cordova, phonegap-plugins

我有几个`Media`文件要播放。但它们必须一一播放。像：

```
var play_media;
play_media= new Media("../record/01.mp3",Success,Error);
play_media.play();
//And as the `../record/01.mp3` media file is done. 
//I will release it and create another one to play. 
play_media= new Media("../record/02.mp3",Success,Error); 
```

但似乎一个媒体的播放完成后，它什么也没有返回。
我能怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:06:27.390

尝试这样的事情：

```
var media = {"../record/01.mp3","../record/02.mp3","../record/03.mp3"};
var next = 0, play_media;
for(int i=0; i<media.lenght; i++){
    play_media= new Media(media[next]);
    play_media.play();
    if(soundTimer == null){
        soundTimer = setInterval(function(){
            vpSound.getCurrentPosition(
                function(position){
                    if(position > -1){
                        //Do something if you want 
                    }
                }
            );
        }, 1000);
        next = next + 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T06:40:03.890

首先用 media.getDuration: 找到音频片段长度，然后使用 setTimeout 函数播放下一首歌曲。这样你就可以连续播放多首歌曲

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T13:20:39.123

使用 Media.getCurrentPosition() 和 javascript setInterval 并将其设置为每秒间隔 (1000) 以获取正在播放的曲目的位置。然后检查曲目的位置是否等于 -0.001，这意味着它结束了。从那里您可以移动到下一首曲目，或者如果它是最后一首曲目，请使用 Media.release()

```
 var mediaTimer = setInterval(function () {
               media.getCurrentPosition(function (position) {
                     if (position > -0.001) {
                        //Do something like update a progress bar and set times.
                     }
                     else if (position === -0.001) {
                           selectedIndex = selectedIndex + 1; //selectedIndex is the index of the song chosen in a list.
                          if (selectedIndex > playlistLength) {
                              media.release();
                          } 
                          else {
                            var nextTrack = app.FolderList.tracks[selectedIndex]; //get the next track from a list of tracks using the selectedIndex
                            playPause(nextTrack.SongPath);//playPause() is used to initialize a new Media object with the new track and then plays it.
                          }
                     },
                     function () {
                     console.log('Unable to retrieve media position: ' + error.code);
                       });
                    },
                    1000); 
```

# c# - 如何在 C# 中从此响应中提取和获取值

> ID：14301211
> 
> 赞同：1
> 
> 时间：2013-01-13T06:27:43.257
> 
> 标签：c#

这是我的代码：

```
private void button1_Click(object sender, EventArgs e)
    {
        var process = new com.globalpay.certapia.GlobalPayments();
        var response = process.ProcessCreditCard("xxxxxx", "xxxxxx", "Sale",
            textBox1.Text, textBox2.Text, "", "", textBox3.Text, "",
            "", "", "", "", "");

        MessageBox.Show("RespMSG: " + response.RespMSG
            + "\nMessage: " + response.Message
            + "\nAuthCode: " + response.AuthCode
            + "\nPNRef: " + response.PNRef
            + "\nHostCode: " + response.HostCode
            + "\nCVResultTXT: " + response.GetCVResultTXT
            + "\nCommercialCard: " + response.GetCommercialCard
            + "\nExtData: " + response.ExtData);
    } 
```

输出如下：

![在此处输入图像描述](../Images/7eae90d9d4d564ab1d7cd72fa91bd3cf.png)

在 ExtData 部分我很困惑，我不知道如何提取这些值，例如获取 CardType、BatchNum、MID、TransID 的值。

我怎么可能提取这些值？

任何建议或建议如何实现这一目标都会有很大帮助。谢谢！

基于 api 的文档：

```
 <?xml version="1.0" encoding="utf-8" ?>
<Response xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="GlobalPayments">
<Result>0</Result>
<RespMSG>Approved</RespMSG>
<Message>AP</Message>
<AuthCode>000014</AuthCode>
<PNRef>564286</PNRef>
<HostCode>0032</HostCode>
<GetCVResultTXT>Service Not Requested</GetCVResultTXT>
<GetCommercialCard>False</GetCommercialCard>
<ExtData>InvNum=1234567900,CardType=MasterCard,BatchNum=0011<BatchNum>0011
</BatchNum><ReceiptData><MID>4910354</MID><Trans_Id>MCC1421250315
</Trans_Id></ReceiptData></ExtData>
</Response> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T06:48:12.983

这似乎是响应格式不正确的情况。这在这类 Web 服务中很常见。不要指望它会很快好转。

您只需要强制解析并希望他们不会更改它，或者它会根据您得到的响应类型进行更改。

一般算法是：

1.  将 2 个不同的部分分开
    *   逗号分隔的等值部分
    *   XML 格式的部分
    *   这可以通过找到 '<' 的第一个索引并在此位置将字符串拆分为 2 来完成
2.  用不同的算法解析这两个部分。在第一种情况下，解析应该不是问题。只需沿 ',' 和 '=' 拆分，就可以得到键值对。在第二种情况下，您应该使用一些 XML 解析库来帮助您。同样，您会得到一堆键值对。
3.  将所有键值对放入字符串/字符串字典中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T07:28:38.043

使用 LINQ 将是最简单的方法，假设响应是一个字符串或可以转换为字符串的东西：

```
// XDocument.Parse will load a string into the XDocument object.
XDocument xDoc = XDocument.Parse(response);
// XNamespace is required in order to parse the document.
XNamespace ns = "GlobalPayments";

var resp = (from x in xDoc.Descendants(ns + "ExtData")
            select new
            {
                ExtData = x.Value,
                BatchNum = x.Element(ns + "BatchNum").Value,
                MID = x.Element(ns + "MID").Value,
                TransID = x.Element(ns + "TransID").Value
            }).SingleOrDefault(); 
```

然后，您将拥有一个`resp`具有以下属性的匿名类型 ( )：

```
resp.ExtData = "InvNum=1234567900,CardType=MasterCard,BatchNum=0011"
resp.BatchNum = "0011"
resp.MID = "4910354"
resp.TransID = "MCC1421250315" 
```

然后，您可以在 ExtData 上使用普通的 String.Split 操作从您需要的字符串中获取数据。

不是最漂亮的解决方案，但有时您必须使用蛮力方法。采用和修改以满足您的需求/口味。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T06:44:44.713

您需要使用 String.IndexOf..) 手动提取它们，然后使用 String.SubString(..) 等

```
var cardType = data.Substring(data.IndexOf("<BatchNum>"), data.IndexOf("</BatchNum>") - data.IndexOf("<BatchNum>")); 
```

当然有一些例外处理代码......

# vb6 - 使 Enter 键用作表单 vb 6.0 上所有控件的选项卡键

> ID：14301212
> 
> 赞同：0
> 
> 时间：2013-01-13T06:27:45.880
> 
> 标签：vb6

> **可能重复：**
> [如何通过 vb.net 编码以编程方式按 Tab 并输入键](https://stackoverflow.com/questions/11150140/how-to-programatically-press-tab-and-enter-key-by-vb-net-coding)

根据用户要求，我需要在 VB 6.0 用户输入表单中将 Enter 键用作 Tab 键。

对于特定控件，我可以使用 SendKeys“{TAB}”，但是有什么方法可以让表单上的所有控件都将输入键作为制表键。

问候。

拉扎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:18:38.300

您可以创建一个控件数组并尝试以下示例：

```
Private Sub Text1_KeyPress(Index As Integer, KeyAscii As Integer)
    'If I press Enter key...
    If KeyAscii = 13 Then
        With Text1(Index)
            'I add a tab.
            .Text = .Text & vbTab

            'I placed in the end of the text.
            .SelStart = Len(.Text)
        End With

        'And finally I omit the enter key pressed.
        KeyAscii = 0
    End If
End Sub 
```

我创建了一个名为 Text1 的文本框数组。我希望它有所帮助。

# css - 二十个儿童主题 - 修改主题宽度（940px 到 1000px）

> ID：14301213
> 
> 赞同：4
> 
> 时间：2013-01-13T06:27:50.623
> 
> 标签：css, wordpress, wordpress-theming

我最初在 WordPress Answers 上发布了这个，但被告知这是一个 CSS 问题，应该在这里发布。

我在我的网络服务器上安装了最新版本的 WordPress (3.5) 和二十个主题 (1.5)。我没有修改任何设置，一切都是默认的。我希望我的子主题做的就是将主题宽度从 940 像素更改为 1000 像素。我的子主题中唯一的文件是 style.css，我更改的唯一值是宽度。

宽度调整在所有桌面浏览器上都可以正常工作，但在 iPhone (iOS 6) 和 iPad (iOS 6) 上，主题加载时带有水平滚动条，并且无法完全缩小。水平滚动条问题只影响主页而不影响示例页面。该问题仅限于垂直模式。

下面是截图和我的 style.css 代码：

我使用以下代码安装默认 WordPress 的网站是：www.w242.com

![在此处输入图像描述](../Images/2e32ccf4605f4e0245c527b0d280dd15.png)

![在此处输入图像描述](../Images/f2addcb71220ea0eff7550ef5ef99be8.png)

![在此处输入图像描述](../Images/c4743a91313beb854a18259e69359e8e.png)

![在此处输入图像描述](../Images/5f801b728e033d120e6481ddd37bb179.png)

样式.css：

```
/*
Theme Name: w242
Description: Child theme for the twentyten theme 
Author: w242
Template: twentyten
*/

@import url("../twentyten/style.css");

#access .menu-header,
div.menu,
#colophon,
#branding,
#main,
#wrapper {
    margin: 0 auto;
    width: 1000px; /* CHANGED 940px ---TO---> 1000px */
}

#access {
    background: #000;
    display: block;
    float: left;
    margin: 0 auto;
    width: 1000px; /* CHANGED 940px ---TO---> 1000px */
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:33:04.990

首先，在 style.css 第 173 行，您分配了一个属性，该属性`div.#wrapper`将把`padding: 0px 20px;`对象的总宽度扩展到`1040px`. 由于您将`#wrapper`子元素的宽度更改为`1000px`，`padding`样式属性在其内部的每一侧再增加 20px，将其大小扩展为`1040px`. 这就是为什么你得到悬垂。

其次，这些屏幕截图来自移动设备。您在移动或桌面格式化方面需要帮助吗？如果是移动的，最简单的方法是找到一个移动主题插件并将其修改为子主题，而不是乱用 2010 模板。此外，您可能希望避免使用像素作为单位并切换到 % 或 em，或者设置 min-width 和 max-width 而不仅仅是宽度。

这是一篇带有一些示例的文章。[http://www.cssjuice.com/css-liquid-layout-design/](http://www.cssjuice.com/css-liquid-layout-design/)

*提示*更改该标题图像的大小，您需要查看“functions.php”文件。

# c# - 拥有一个从基类派生并包含它的实例的类是一个好的设计吗？

> ID：14301214
> 
> 赞同：2
> 
> 时间：2013-01-13T06:27:54.493
> 
> 标签：c#, oop, class, class-diagram

我正在设计一个基于生产者/消费者的应用程序，并且我坚持在类表示中表示生产者生成的任务。

实际的问题是这样的：生产者可以生产`StandaloneTask`一个消费者可以直接消费的产品，或者它可以生产一个`CompressTask`必须经过第一个的产品，然后将`TaskDecompressor`其首先提取成许多`StandaloneTask`消费者可以消费的产品。

`StandaloneTask`由于和之间有很多共性`CompressTask`，所以我创建了一个名为的基类`TaskBase`，其中包含所有这些通用信息。

```
class abstract TaskBase 
{

}

class StandloneTaskType1: TaskBase
{

}

class StandloneTaskType2: TaskBase
{

}

.
.
.

class StandloneTaskTypeN: TaskBase
{

} 
```

任务的解压如何工作？一个任务可以有一个或多个需要在运行时填写的参数。压缩任务由一个带有参数的任务和有关如何获取需要在这些参数中填充的值的其他信息组成。获取值后，`TaskDecompressor`假设将所有这些值填充到参数化任务中以生成一个或多个独立任务。

我创建了一个`CompressTask`类如下。

```
class CompressTask: TaskBase
{
    TaskBase task;

    //runtime parameters
} 
```

`CompressTask`现在，它的派生自它对我来说看起来很奇怪，`TaskBase`它还包含一个`TaskBase`. 有这样的课是正确的吗？或者有没有更好的给定案例的类表示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T06:35:45.703

总体而言，这种结构并不少见，您开始走上[复合模式](http://en.wikipedia.org/wiki/Composite_pattern)的道路。您`CompressTask`的行为有点像 Composite，而您`StandaloneTask`的行为就像 Leaf。

我建议阅读该设计模式，并可能考虑让消费者更容易使用 TaskBase 的任何子类，无论它是 a`CompressTask`或`StandaloneTask`. 这将加强您的设计并简化消费。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T06:47:58.897

想象...

```
class Student: Person
{
    Person father;
    Person mother;
    Date dateOfEnrollment;
} 
```

这完全有道理不是吗？原则上，您的 CompressTask 类没有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T06:40:38.807

一个重要的 OO 设计规则：[优先*组合*而不是*实现继承*](http://en.wikipedia.org/wiki/Composition_over_inheritance)。仅仅因为`StandaloneTask`和`CompressTask`有许多共性并不能让它成为一个好的选择让它们共享相同的基类。如果两个类共享一些接口，建议通过使用*接口继承*来分解接口。如果两个类共享一些实现，你最好将实现分解到某个类中，并将其嵌入到上述两个类中（即*组合*）。

回到你的例子，它`CompressTask`是派生自`TaskBase`并且它还包含一个 TaskBase 的实例。这意味着您同时使用实现继承和组合，这听起来不太好。以下骨架仅供您参考：

```
interface Task
{
    // some common Task interface here...
}

class TaskImpl
// Or: class TaskImpl : Task // depends on your needs
{    
    // some common Task-related implementation here...
}

class CompressTask: Task // interface inheritance, NOT implementation inheritance
{
    TaskImpl taskImpl; // contains *reusable* task-related implementation
    Task task;  // contains the target task(s) to be compressed
    // other code...
}

class StandloneTaskType1: Task
{
    TaskImpl taskImpl;
    // other code...
}

.
.
.

class StandloneTaskTypeN: Task
{
    TaskImpl taskImpl;
    // other code...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T08:05:19.703

更好的是......想象一下......

```
class Foo // implicitly extends Object
{
    String name; // also a direct subclass of Object (at least in Java anyway)
    Integer age; // extends Number, which extends Object (at least in Javaland)
    Object theRootOfAllEvil; // a raw instance of the superclass
    int i; // the only member that is not an Object
} 
```

请原谅我的爪哇语，但我来自哪里都没有错；）

这一切都取决于你的课程的细节。

# android - Android 进度条中的右侧边缘转弯问题

> ID：14301216
> 
> 赞同：1
> 
> 时间：2013-01-13T06:28:26.443
> 
> 标签：android, android-progressbar

我使用此代码在进度条的边缘上创建了一个角，但它在右侧不起作用

```
 <item android:id="@android:id/progress">
  <clip>
   <shape>
    <corners android:radius="35dip" />
    <gradient android:startColor="#990000" android:endColor="#E6E8FA" />

   </shape>
  </clip>
 </item> 
```

![这里](../Images/dfd1953bc028edb430b833a761c7158e.png)是它的样子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T06:45:35.273

问题是剪辑是根据 ProgressBar 的整个容器大小进行剪辑的，因此它在左侧的不可见角上被舍入。当它达到 100% 时，它应该看起来正确。我认为您无法仅使用可绘制的剪辑来完成您想要的外观。

# sass - SASS/指南针转换

> ID：14301229
> 
> 赞同：19
> 
> 时间：2013-01-13T06:30:20.887
> 
> 标签：sass, compass-sass

是否可以使用 Compass 或 SASS 输出以下 CSS 转换，该转换将输出所有各种供应商前缀：

```
-webkit-transition: all 0.3s ease-in-out; 
```

谁能指出我正确的图书馆？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-13T06:48:04.093

使用[指南针的`transition`mixin](http://compass-style.org/reference/compass/css3/transition/)：

```
@include transition(all 0.3s ease-in-out); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-08T22:54:23.230

**Mixin 用于使用单个或“全部”属性转换创建动画**

```
@include transition(PROPERTY DURATION DELAY(OPT) TIMING-FUNCTION)
@mixin transition($transition) {
  -webkit-transition: $transition;
     -moz-transition: $transition;
      -ms-transition: $transition;
       -o-transition: $transition;
          transition: $transition;
} 
```

**Mixin 用于使用多个属性转换创建动画**

```
@include multi-transition("PROPERTY DURATION DELAY(OPT) TIMING-FUNCTION, PROPERTY DURATION DELAY(OPT) TIMING-FUNCTION")
@mixin multi-transition($transition) {
 -webkit-transition: #{$transition};
    -moz-transition: #{$transition};
     -ms-transition: #{$transition};
      -o-transition: #{$transition};
         transition: #{$transition};
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-25T10:21:14.937

SASS 混合

```
@mixin transition($transition){
     -webkit-transition: $transition;
     -moz-transition: $transition;
     -o-transition: $transition;
     transition: $transition;
}

@include transition(all 0.3s ease-in-out); 
```

# qt4 - 如何清除 QSortFilterProxyModel 的过滤器？

> ID：14301233
> 
> 赞同：0
> 
> 时间：2013-01-13T06:31:37.393
> 
> 标签：qt4

而不是做这样的事情：（proxyModel 是一个 QSortFilterProxyModel）

`proxyModel->setFilterRegExp(".*");`

有没有正确的方法来清除过滤器？因为那在我看来是错误的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T08:28:23.340

From the [`filterRegExp`](http://doc.qt.digia.com/qt/qsortfilterproxymodel.html#filterRegExp-prop) property docs:

> If no `QRegExp` or an empty string is set, everything in the source model will be accepted.

So the "proper" way of clearing the filter is to pass an empty string rather than a match-all regex.

# asp.net - ASP.NET/Timer/Table + Image = 无刻度/更新

> ID：14301240
> 
> 赞同：4
> 
> 时间：2013-01-13T06:32:51.627
> 
> 标签：asp.net, timer, updatepanel, scriptmanager

我有一个页面，它从远程服务中检索字符信息，然后在 UpdatePanel 内的表中显示该信息。如果我所做的只是将表格行、表格单元格和文本添加到表格中，表格会刷新得非常好。但是，如果我尝试通过 img 标记或 Image 类添加图像，则表会更新一次，然后拒绝再更新。

我经历了一些谷歌搜索，并阅读了每次搜索的前几页结果，以及检查 stackoverflow，没有任何结果符合我的具体问题。我可以不使用图像，但理想情况下，我想添加它们，因为我想用它们来直观地表示当前影响每个游戏角色的状态效果。代码如下。

```
<asp:ScriptManager ID="scMain" runat="server" />
<asp:Timer ID="tmrRefresh" runat="server" Interval="5000" Enabled="true" />
<asp:UpdatePanel ID="udPanel" runat="server">
<Triggers>
    <asp:AsyncPostBackTrigger ControlID="tmrRefresh" EventName="Tick" />
</Triggers>
<ContentTemplate>
    <asp:Table id="tblCharacters" runat="server">
        <asp:TableHeaderRow>
            <asp:TableHeaderCell>Focus</asp:TableHeaderCell>
            <asp:TableHeaderCell>Character</asp:TableHeaderCell>
            <asp:TableHeaderCell>Location</asp:TableHeaderCell>
            <asp:TableHeaderCell>Ping</asp:TableHeaderCell>
        </asp:TableHeaderRow>
    </asp:Table><br />
    <asp:Label ID="lblNote" runat="server" />
</ContentTemplate>
</asp:UpdatePanel> 
```

代码隐藏：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not Master.IsLoggedIn Then
        Response.Redirect("login.aspx")
    Else
        FillCharacterTable()
    End If
End Sub

Private Sub FillCharacterTable()
    Dim Foci() As Byte = {0, 4, 10, 19, 24}
    Dim Names() As String = {"Unknown", "Gatekeeper", "Dreamseer", "Soulmaster", "Fatesender"}
    Dim HaloColors() As Byte = {0, 4, 15, 7, 18}

    Dim c As New CharacterInfoClient ' Remote service

    Dim Characters() As String = c.GetCharacterInformation

    For Each s As String In Characters
        Dim args() As String = s.Split("|")
        Dim tr As New TableRow
        ' add focus elemen icon
        Dim focus As Byte = Foci(args(2))

        ' option 1 - causes timer to stop updating
        tr.Cells.Add(New TableCell With {.Text = String.Format("<img src=""http://mydomainremoved.net/images/game/image.gif?s=7&v=3&c1={0}&c2={0}&st=50"">", focus))})

        ' Option 2, same thing
        Dim tc As New TableCell
        tc.Controls.Add(New Image With {.ImageUrl = String.Format("http://mydomainremoved.net/images/game/image.gif?s=7&v=3&c1={0}&c2={0}&st=50", focus)})

        tr.Cells.Add(tc)

        tr.Cells.Add(New TableCell With {.Text = "<a href=""character.aspx?id=" & args(1) & """>" & args(0) & "</a>"})
        tr.Cells.Add(New TableCell With {.Text = args(4)})
        tr.Cells.Add(New TableCell With {.Text = args(7)})

        tblCharacters.Rows.Add(tr)
    Next

    lblNote.Text = Characters.Length & " characters -- " & Now.ToString

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:31:59.987

也许值得尝试使用 CSS 类而不是图像标签？

```
td.gatekeeper
{
     background-image: url('http://mydomainremoved.net/images/game/image.gif?s=7&v=3&c1=10&c2=10&st=50');
}
td.dreamseer
{
   // etc.
} 
```

由于您的`Foci`数组中可能的值数量有限（我只是假设它们与字符名称相关联），因此您可以设置多个类，每个类都指向一个特定的图像 url，并根据需要分配任何一个方法的参数。

# sql-server - 第一次使用 linq 插入记录

> ID：14301245
> 
> 赞同：0
> 
> 时间：2013-01-13T06:33:36.373
> 
> 标签：sql-server, linq

我有一个名为“tbltrackuser”且低于设计的表

```
Trackid (pk,identity)
Drafiid (bigint)
Userid (bigint)
Date (time) 
```

我喜欢在此表中使用 linq 为特定用户和 Draftid 插入记录，这只是第一次，2 次或更多次自动不插入表中。

```
Trackid     draftid     userid      date
 1              20      user1       01-jan-13
 2              30      user1       02-jan-13
 4              20      user2       01-jan-13 
```

例如，系统在 03-jan-13 时自动没有在记录下插入 draftid=20, user=user1 因为之前在 01-jan-13 插入

```
 Trackid       draftid     userid      date
    3       20      user1       03-jan-13 (not inserted automatically) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T06:54:39.697

您需要检查是否存在具有相同 TrackID、DraftID 和 UserID 的记录

```
tbltrackuser trackuser = new tbltrackuser();
trackuser.TrackID = 1;
trackuser.DraftID  = 20;
trackuser.UserID = "user1";
trackuser.Date = "01-jan-13";

DataClasses1DataContext dc = new DataClasses1DataContext();

var sameRecords = from tu in dc.tbltrackusers
             where tu.DraftID == trackuser.DraftID
             && tu.UserID == trackuser.UserID
             && tu.Date == trackuser.Date
             select tu;

if (sameRecords.Count() == 0) //if there is no same record then you can insert
{
    dc.tbltrackusers.InsertOnSubmit(trackuser);
    dc.SubmitChanges();
}
else
    MessageBox.Show("Such record already exists."); 
```

# hex - 十六进制颜色代码的名称

> ID：14301250
> 
> 赞同：1
> 
> 时间：2013-01-13T06:34:13.430
> 
> 标签：hex, color-codes

我有一个非常愚蠢的问题。我知道有不同类型的颜色代码，例如黑色有：

0x000000

#000

但我不知道这些颜色代码是怎么称呼的？我知道这是一个十六进制代码，但它们有特定的名称吗？所以有人知道你在说哪一个吗？

谢谢-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T06:39:24.777

并非所有颜色都有特定名称。一些常见的颜色有名字。名称将如何转换为十六进制代码取决于解析器。例如，CSS 颜色由 css 解析器解析。HTML 颜色（bgcolor 等属性）由 html 解析器解析。桌面环境（例如 Gnome）也支持命名颜色。

您可以在 Wikipedia 文章[Web 颜色](http://en.wikipedia.org/wiki/Web_colors)中找到所有颜色名称。有[HTML 颜色](http://en.wikipedia.org/wiki/Web_colors#HTML_color_names)，[X11 颜色](http://en.wikipedia.org/wiki/Web_colors#X11_color_names)。大多数现代网络浏览器都支持 X11 颜色。

> 许多颜色由网络浏览器定义。特定浏览器可能无法识别所有这些颜色，但**截至 2005 年，所有现代通用浏览器都支持完整的颜色列表**。其中许多颜色来自随 X Window System 分发的 X11 颜色名称列表。这些颜色由 SVG 1.0 标准化，并被 SVG Full 用户代理所接受。它们不是 SVG Tiny 的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T06:38:47.820

您可以在此处获取浏览器可用的颜色列表（只需使用 color:NameOfColor 而不是十六进制代码）：[http ://www.w3schools.com/html/html_colornames.asp](http://www.w3schools.com/html/html_colornames.asp)

如果要从十六进制代码转换为颜色名称，可以使用此处找到的脚本：[Javascript 函数将颜色名称转换为十六进制代码](https://stackoverflow.com/questions/1573053/javascript-function-to-convert-color-names-to-hex-codes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T06:51:47.610

如果我正确理解了这个问题，我通常会将上述内容称为 RGB 颜色代码。红色、绿色和蓝色的值，范围为 0-FF，以十六进制表示，或 0-255 以十进制表示。W3C 组织似乎也这样称呼它们：

[http://www.w3.org/TR/CSS21/colors.html](http://www.w3.org/TR/CSS21/colors.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-08T07:17:18.110

如果您正在寻找任何特定的颜色名称，这里是[带有颜色代码的颜色名称列表](http://www.htmlcolorcode.info/colornames.html%E2%80%8E)。

# windows-phone-7 - 工具包的绑定问题：MultiselectList Windows Phone 8

> ID：14301251
> 
> 赞同：2
> 
> 时间：2013-01-13T06:34:20.953
> 
> 标签：windows-phone-7, windows-phone-8

因此，我一直在开发 Windows Phone 8 应用程序，但在将数据绑定到工具包：MultiselectList 时遇到了一些问题。我拥有的 XAML 是

```
<toolkit:MultiselectList x:Name="CatCardList">
    <toolkit:MultiselectList.ItemTemplate>
        <DataTemplate>
            <StackPanel Tap="ListItemTap" Orientation="Horizontal" Height="120">
                <Rectangle Height="100" Width="100" Fill="{Binding accent}"/>
                <StackPanel>
                    <TextBlock Text="{Binding name}"/>
                    <TextBlock Text="{Binding limit}"/>
                    <TextBlock Text="{Binding alert}"/>
                </StackPanel>
            </StackPanel>
        </DataTemplate>
    </toolkit:MultiselectList.ItemTemplate>
</toolkit:MultiselectList> 
```

我正在插入具有以下元素的类的元素（所有公共都具有适当的获取和设置）

```
string name
string limit
string alert
SolidColorBrush accent 
```

插入元素时，我只在列表中看到该类的 ToString()，因为未应用绑定。另一方面，如果我使用`ListBox`具有相同绑定的控件，那么一切正常。

另一个有趣的事实是，当我拥有 NuGet 2.0 时，上述绑定工作正常。但是我今天更新了 NuGet 包，从那以后它就停止工作了，我收到了一个`Invalid XAML`警告，但它编译得很好。

我不知道为什么这在以前工作时不起作用。有人可以告诉我这是 NuGet 包的错误还是我的代码有问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T00:19:06.277

我遇到了同样的问题，我通过使用 windows phone 8 sdk 上可用的新的 Long List 多选器控件解决了这些问题......

它应该可以解决您的所有问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T12:26:19.147

这是因为 Phone 工具包的 WindowsPhone 8 项目不包含 MultiselectList 的样式定义，使用 TargetType“controls:MultiselectList”将样式定义从 WindowsPhone 7 项目复制到 Themes/Generic.xaml 应该可以工作。

# css - 具有相同 CSS 的元素在 Chrome 中的显示方式不同

> ID：14301252
> 
> 赞同：0
> 
> 时间：2013-01-13T06:34:38.227
> 
> 标签：css, google-chrome

我有两个 div 元素，如下所示。**第一个在页面加载时存在，第二个是从 jQuery 添加的。**

实时预览 - [http://jsfiddle.net/emaillenin/dhtgX/1/](http://jsfiddle.net/emaillenin/dhtgX/1/)（尝试在 Firefox 和 Chrome 中查看）

```
<div class="krc_item">
  <span>
    <img class="cart_pimg ui-draggable" src="xxx">
  </span>
  <div id="krc_item_qty_763" class="krc_item_qty">
    1
  </div>
</div>
<div class="krc_item">
  <span>
    <img class="cart_pimg ui-draggable" src="xxxx">
  </span>
  <div id="krc_item_qty_918" class="krc_item_qty">
    1
  </div>
</div> 
```

以下是相关的CSS：

```
.krc_item {
 float: right;
 padding-top: 3px;
 width: 70px;
}

img.cart_pimg {
 width: 50px;
 height: 50px;
}

.krc_item_qty {
 height: 12px;
 position: relative;
 text-align: right;
 top: 35px;
 right: 35px;
 background-color: #FFFFFF;
 border-color: #5A224D;
 border-radius: 14px 14px 14px 14px;
 border-style: solid;
 border-width: 1px;
 color: #000000;
 float: right;
 font-size: 10px;
 font-weight: bold;
 padding: 2px 5px;
 z-index: 100;
 line-height: 12px;
} 
```

虽然这两个 DIV 在结构上是相同的，但为什么它们的显示方式不同。此问题仅在 Chrome 中出现。Firefox 正确显示它。如果我将 top 属性更改为 0，Chrome 中的输出是这样的：

![在此处输入图像描述](../Images/660a4cbb417743186ac1d90c2f79bfa1.png)

通常的 Firefox 输出（如果顶部是 35px）：

![在此处输入图像描述](../Images/c6a5b32bf086dd528f8f13bcb02afd72.png)

这里的 CSS 问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T06:37:57.697

尝试将 krc_item 设置为 position:relative，然后将 position:absolute 用于 krc_item_quantity。这样做之后，您可能需要调整位置。

# google-app-engine - Google Appengine(GAE) :: 使用 GAE memcached 时如何防止 Dogpile 效应？

> ID：14301255
> 
> 赞同：2
> 
> 时间：2013-01-13T06:35:10.910
> 
> 标签：google-app-engine, memcached, google-cloud-datastore

我需要缓存一些昂贵的查询（5 秒）。我最近开始了解使用 memcache 时的 dogpile 影响。一种解决方案是在缓存键值对上使用锁来防止这种影响。由于 GAE memcached 不支持对 memcached 键值的锁定，防止狗堆效应的最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T12:38:49.410

这取决于您的应用程序在做什么，但这里有三种可能有用的方法（没有一种方法适用于所有场景，它们都有缺点）：

如果您可以使用“稍等一下再试一次”之类的方式响应请求，那么在未命中时将代表该请求的标志设置到 memcache 中，然后再花时间重新处理实际值可能会有所帮助（仍然会有get 和第一组之间的比赛的可能性，但它比等待查询完成要短得多）：

```
value = memcache.get(key)
if value is None:
  memcache.set(key, 'recalculating')
  // do the slow thing
  memcache.set(key, actual_result)

return value 
```

或者，如果您在缓存结果上设置生命周期，但可以处理客户端接收稍微陈旧的数据，那么除了使用超时和键缓存您的值之外，您还可以缓存没有超时和不同键的副本，然后在错过时使用此副本重新填充缓存，同时重新处理一个新值（同样，仍然有可能在 get/set 之间发生竞争，并且副本可能会被驱逐。）：

```
value = memcache.get(key)
if value is None:
  memcache.set(key, cache.get(key+'copy'))
  // do the slow thing
  memcache.set(key, actual_result, 30)
  memcache.set(key+'copy', actual_result)

return value 
```

第三个更简单，只需让后端不断执行查询并让它更新缓存，这样前端请求就不太可能必须这样做。但是，这确实意味着无论任何人使用的值如何，都会进行查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T08:29:11.417

忽略它。

喝下 Google Kool-Aid，相信您不会因为同时查询访问数据存储区而导致数据库严重崩溃。无论如何，狗桩效应是短暂的，基础设施应该吸收它。您只需为更多查询付费。

除非您实际上有足够的流量并且它会花费您大量的金钱，否则它可能远远低于您的优先级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-27T07:44:07.793

使用信号量锁可以防止狗堆效应。如果值过期，第一个进程获取锁并开始生成新值。所有后续请求都会检查是否获得了锁并提供过时的内容（如果是的话）。生成新值后，释放锁。

缓存值应该被赋予更长的生命周期，因此它们在过期时不会被物理删除，并且如果需要，它们仍然可以被提供。

这是它在 PHP 中的工作方式（应该很容易在 Python 中复制）。

*从缓存存储中获取缓存值。*

```
$value = $this->store->get($key); 
```

$value 是一个值对象。

*检查缓存值是否过期。如果没有过期，请上桌。*

```
if ($value && !$value->isStale()) {
    return $value->getResult();
} 
```

*否则，获取锁，因此只有一个进程重新生成新值。*

```
$lock_acquired = $this->acquireLock($key, $grace_ttl); 
```

*如果无法获取锁，则意味着已经有其他进程正在重新生成它，所以让我们只提供当前（陈旧）值。*

```
if (!$lock_acquired) {
    return $value->getResult();
} 
```

*否则（已获取锁），重新生成新值。*

```
$result = ... 
```

*将重新生成的值保存在缓存存储中。添加宽限期，因此如果其他进程需要，可能会提供陈旧的结果。*

```
$expiration_timestamp = time() + $ttl;
$value = new Value($result, $expiration_timestamp);

$real_ttl = $ttl + $grace_ttl;
$this->store->set($key, $value, $real_ttl); 
```

*释放锁。*

```
$this->releaseLock($key); 
```

完整的 PHP 实现：[https](https://github.com/sobstel/metaphore/blob/master/src/Cache.php) ://github.com/sobstel/metaphore/blob/master/src/Cache.php 。你也可以试试 MintCache：[https](https://djangosnippets.org/snippets/155/) ://djangosnippets.org/snippets/155/ 。

# database - 值组合中的值 - 数据库设计

> ID：14301258
> 
> 赞同：2
> 
> 时间：2013-01-13T06:35:32.737
> 
> 标签：database, database-design, model

我有一个调查网络应用程序。调查可以有多项选择题。多项选择题的答案可能取决于其他问题的答案。

例子：

```
Question 1 has choices: HP, Acer, Samsung, Lenovo
Question 2 has choices: Android, Ubuntu, iOS, Windows
Question 3 has choices: Ubuntu, OS X, Windows
Question 4 has choices: Adidas, Nike, Puma 
```

假设问题 4 取决于问题 1、2 和 3 的答案的组合。

示例 1：

> 如果有人回答：问题 1 =“HP”，问题 2 =“Ubuntu”，问题 3 =“OS X”；问题 4 自动设置为“Puma”

示例 2：

> 如果有人回答：问题 1 =“Acer”，问题 2 =“Ubuntu”，问题 3 =“Ubuntu”；问题4自动设置为“阿迪达斯”

*两个例子的逻辑相同。

通常，一些调查问题的答案可能依赖于其他一些调查问题的答案。

您如何为此目的设计/建模数据库？

这是我创建的初始表关系（随意修改）：

```
Users: user_id
Questions: question_id
Choices: choice_id, question_id
Answers: answer_id, user_id, question_id 
```

附加信息：

我正在考虑的管理用户界面过程是：

```
1\. The admin creates several independent questions (questions which have answers independent of other questions' answer)
2\. The admin creates a dependent question, selects one or many questions which he created earlier, selects a combination of answers from those question (just like in examples 1 and 2 above) and then sets an answer for the dependent question based on those combination of answers.
... The admin proceeds creating several more questions. 
```

编辑：

感谢您的想法@MahmoudGamal。我根据您的设计创建了一些东西：

```
 Combinations table
 ID
 question_id # the dependent question's id
 choice_id # the automatic answer based on the combination of other answers

 Answer Combinations table
 ID
 combination_id
 question_id # the question that is depended upon by the dependent question
 choice_id # the choice that will be used for the combination 
```

所以我可以对一个问题有几种组合。示例：如果我希望问题 4 接受多个组合。一种组合有不同的答案。

```
 Answer Combinations table
 ID     combination_id     question_id     choice_id
 1      1                  1               1
 2      1                  2               2
 3      1                  3               3
 4      2                  1               2
 5      2                  2               2
 6      2                  3               1 
```

组合表会有

```
 Combinations table
 ID     question_id     choice_id
 1      4               4
 2      4               3 
```

对我来说看起来很整洁。你怎么看？

PS：请原谅我，但我是 Stack Overflow 的新手，我还在摸索中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:22:05.210

原谅我的英语。:) 我的想法也是……您必须为 prereq 答案创建新表。

PreAns 表示例

```
q_id = 2
pre_qid = 1
pre_ans = 3
your_ans = 2 
```

然后检查 PreAns 表是否已被正确的预答案回答。

只是尝试:)希望会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:33:44.223

所以这是我可以从你的问题中理解的场景：

管理员指定前一个问题的答案与另一个问题之间的关系，根据这个条件，这个问题将有一个基于这个关系的自动答案，这个逻辑关系是手动指定的。因此，为此，您将需要另外两个表：

**`PreviousQuestionsAnswers`**：

*   `QuestionId`,
*   `PreviousQuestionId`,
*   `PreviousAnswerID`

**`QuestionPreAnswer`**：

*   `QuestionId`,
*   `AnswerId`

例如：

> 如果有人回答：问题 1 =“HP”，问题 2 =“Ubuntu”，问题 3 =“OS X”；问题 4 自动设置为“Puma”

然后这两个表将具有以下内容：

`PreviousQuestionsAnswers`：

```
QuestionId PreviousQuestionId PreviousAnswerId
    4              1                 1
    4              2                 2
    4              3                 3 
```

`QuestionPreAnswer`：

```
QuestionId AnswerId
    4         4 
```

**请注意：**这些数据是由管理员预先输入的，因此，从应该进行该调查的 OP 之后的前端应用程序中，您将匹配他在之前应该输入的问题中输入的答案`Answers`，您已经有，使用`PreviousQuestionsAnswers`表中的预定义条件，如果有，则使用选项设置问题`QuestionPreAnswer`。

# javascript - 通过 PhoneGap 发出哔哔声 - Android

> ID：14301259
> 
> 赞同：0
> 
> 时间：2013-01-13T06:35:34.247
> 
> 标签：javascript, android, html, cordova, notifications

我尝试使用 PhoneGap 通知并在调用函数时发出哔哔声（Android）

根据[**这个**](http://docs.phonegap.com/en/1.0.0/phonegap_notification_notification.md.html#notification.beep)文件

我所要做的就是把这一行：

```
 navigator.notification.beep(2); 
```

并添加 app/res/xml/plugins.xml 这一行：

```
<plugin name="Notification" value="org.apache.cordova.Notification"/> 
```

在 app/AndroidManifest.xml 这一行：

```
<uses-permission android:name="android.permission.VIBRATE" /> 
```

它对我不起作用。

我的功能：

```
function BeepNow() {    
    navigator.notification.beep(2);
} 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T07:11:02.930

问题解决了，我在头上错过了**cordova的JS**

# sql-server - MSWordAddin 连接数据库

> ID：14301264
> 
> 赞同：0
> 
> 时间：2013-01-13T06:36:08.240
> 
> 标签：sql-server, connection

我正在 Visual Studio 11 上创建一个 MSWord 插件。但我想知道如何将它连接到数据库。没有可以添加连接的配置文件。

请告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:08:12.930

如果您需要直观地执行此操作，您可以在菜单中提供的数据源工具箱中执行此操作：

```
VIEW->Other Windows->Data Sources (Shift+Alt+D) 
```

接着`Add New Data Source...`

# wpf - WPF 中的 SelectionChanged 事件是否只能用于用户交互？

> ID：14301271
> 
> 赞同：9
> 
> 时间：2013-01-13T06:38:33.890
> 
> 标签：wpf, user-interaction, selectionchanged

我想处理 WPF DataGrid 元素中的 SelectionChanged 事件，仅用于用户交互/选择，如果是由于绑定或其他设置值而跳过。知道如何确定用户交互是否更改了选择吗？或者任何可以完成类似任务的替代事件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-13T09:06:20.930

也许尝试将`SelectionChanged`事件与`PreviewMouseDown`事件结合起来。当用户单击一行时，您设置了一些属性并在 `SelectionChanged`事件处理程序中检查该属性是否已更改。

示例代码 XAML：

```
<DataGrid SelectionChanged="OnSelectionChanged" PreviewMouseDown="OnPreviewMouseDown">
        <!--some code-->          
</DataGrid> 
```

后面的代码：

```
bool isUserInteraction;

private void OnSelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if (isUserInteraction)
    {
        //some code

        isUserInteraction = false;
    }
}

private void OnPreviewMouseDown(object sender, MouseButtonEventArgs e)
{
    isUserInteraction = true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-02T09:24:09.633

嗨，您可以在 xaml 中使用它：

```
 <ComboBox x:Name="ComboBoxName" SelectionChanged="ComboBox_SelectionChanged">
                                        <ComboBox.Style>
                                            <Style TargetType="ComboBox">
                                                <Style.Triggers>                                                       
                                                    <Trigger Property="IsDropDownOpen" Value="True">
                                                        <Setter Property="IsEditable" Value="True"></Setter>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </ComboBox.Style>
                                    </ComboBox> 
```

在后面的代码中：

```
private void ComboBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (!((ComboBox)sender).IsEditable) return;
        //Do Stuff;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-25T18:03:27.173

另一种方法是处理 ComboBox 的`DropDownOpened`和`DropDownClosed`事件。这比 Rafal 接受的答案略好，因为如果用户单击 ComboBox 然后单击其他地方导致 ComboBox 在没有进行选择的情况下关闭，它可以防止布尔标志卡为真。但是，它没有解决的问题是，如果 ComboBox 具有键盘焦点并且用户点击向上和向下箭头来更改选择。

```
private void Event_ComboBox_DropDownOpened(object sender, EventArgs e)
{
    isUserInteraction = true;
}

private void Event_ComboBox_DropDownClosed(object sender, EventArgs e)
{
    isUserInteraction = false;
}

private void Event_ComboBox_SelectedChanged(object sender, SelectionChangedEventArgs e)
{
    if (isUserInteraction)
    {
        // Do work
    }
} 
```

# javascript - 如何在javascript中附加到现有的正则表达式？

> ID：14301286
> 
> 赞同：1
> 
> 时间：2013-01-13T06:41:06.297
> 
> 标签：javascript, regex

假设我有以下正则表达式：

```
var myregex = /^(i|blah|ho)$/ 
```

我有另一个变量：

```
var list = ["some","another"] 
```

如何使我可以将列表中的单词附加到 someregex 以便“myregex”导致：

```
var myregex = /^(i|blah|ho|some|another)$/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T06:46:25.497

我倾向于尝试从原始单词列表开始寻找另一种解决问题的方法，但是如果您确实需要附加到现有单词列表，则正则表达式实例具有将表达式源作为字符串返回的[`source`属性](http://www.ecma-international.org/ecma-262/5.1/#sec-15.10.7.1)，并且接受字符串的构造函数。所以你可以这样做：

```
var rex = /^(i|blah|ho)$/;
var list = ["some","another"];
rex = new RegExp(rex.source.replace(")$", "|" + list.join("|") + ")$"); 
```

这将丢失标志，因此您可能希望使用构造函数的第二个参数，基于原始正则表达式的, ,等属性`RegExp`构建或任何字符串。（或者一个技巧是使用和抓取你返回的字符串中最后一个字符后面的任何字符，并将它们作为第二个参数提供。）所以上面的更完整版本可能是：`"gi"``global``ignoreCase``multiline``rex.toString()``/`

```
// (I added a flag to this one to check that the flags processing worked)
var rex = /^(i|blah|ho)$/i;
var list = ["some","another"];
var flags = rex.toString();
var index = flags.lastIndexOf("/");
flags = flags.substring(index + 1);
rex = new RegExp(rex.source.replace(")$", "|" + list.join("|") + ")$"), flags); 
```

[实例](http://jsbin.com/ajibuk/1)| [来源](http://jsbin.com/ajibuk/1/edit)

另请注意，如果您的单词中包含正则表达式特有的字符（`.`、`\`、`/`、`$`等），则上述内容会中断。字母数字很好，否则您可能想要使用其中一种`RegExp.escape`在野外出现的各种实现（遗憾的是标准中没有）并使用它来转义单个单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:15:38.223

有两种方法可以做到这一点。

**1.) 通过数组 concat**

```
var myregex = /^(i|blah|ho)$/;
var list = ["some","another"];

var _newList = myregex.toString().match(/([a-z]+)/gi).concat(list);

var myNewRegEx = new RegExp("/^(" + _newList.join('|') + ")$/"); 
```

**2.）通过正则表达式替换**

```
var myregex = /^(i|blah|ho)$/;
var list = ["some","another"];

var _t = myregex.toString().replace(/\)/, '|' + list.join('|') + ')' );
var myNewRegEx = new RegExp(_t); 
```

我不知道哪种方式更快。

# jquery - 为每个输入创建一个重置按钮

> ID：14301289
> 
> 赞同：-1
> 
> 时间：2013-01-13T06:41:36.070
> 
> 标签：jquery, html

我有 2 个或更多输入类型，每个字段都有清除（重置）按钮，

**HTML**

```
<input type="text" name="text1" class="dummytext" />
<button type="button" class="clear-btn">Clear</button>

<input type="text" name="text1" class="dummytext" />
<button type="button" class="clear-btn">Clear</button> 
```

正如我对 jQuery 所做的那样，每次我按下清除按钮时，每个输入也会被清除。我只想清除与每个清除按钮相关的输入类型。有什么帮助吗？

谢谢你。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T06:46:34.573

使用 jQuery 的[`prev()`](http://api.jquery.com/prev/)方法来获取相关的`input`：

```
$('.clear-btn').click(function () {
    $(this).prev().val('');
}); 
```

这是小提琴：http: [//jsfiddle.net/aq3Vg/](http://jsfiddle.net/aq3Vg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T06:50:09.580

使用 jquery 的`prev()`方法获取`input`DOM 对象并将值设置为空
[JSBin 链接](http://jsbin.com/udupoc/1/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T06:51:55.420

你可以做

```
$(".clear-btn").each(function (i) {
  $(this).on("click", function () {
    $("input[type='text']").eq(i).val('');
  });
}); 
```

有了这个，清除按钮不一定要在字段之后（或之前），而是在其他地方。

见**[jsfiddle](http://jsfiddle.net/r4wnS/)**

# c# - 在后台执行计算（线程）

> ID：14301291
> 
> 赞同：0
> 
> 时间：2013-01-13T06:42:00.687
> 
> 标签：c#, wpf, multithreading

我在 WPF 中写一些东西，我需要在后台（在其他线程上）执行一些计算，这样它就不会影响 UI 的性能。

我有一个 Window 类，我在其中做一些 UI 逻辑，这就是我调用新`Calculations()`实例的地方。在 Window 中，我还有一个`List<CalculationFormulas>`（每个 CalculationFormula 都是需要运行的计算）。有时 CalculationFormula 也需要同时运行。当我构造如上所述的 Calculations 对象时，我将列表传递给 Calculations。

在 Calculations 构造函数中，我异步启动一个工作线程以启动列表中的第一个 CalculationFormula，然后在适当的点，该工作线程异步启动列表中的下一个 CalculationFormula，依此类推，直到列表为空（作为 CalculationFormula计算完成后从该列表中删除）。

**我的问题：**

1) 如何将当前正在运行的计算列表发送回 Window？即使它们都在不同的线程中运行，我是否有可能在计算中有一个属性，比如`List<CalculationFormula>`我从每个线程更新的 RunningCalculations ......然后只`Calculations.RunningCalculations`从 Window 调用？

2）如果`List<CalculationFormula>`我传递给 Calculations 的 最初发生了变化，我如何将新列表传递给 Calculations 以便所有当前正在运行的线程都知道它已经改变。我需要以某种方式触发事件吗？

3) 每次计算完成时，如何确保 Window 知道这一点（以便它可以反映在 UI 中）？我将如何设置一个事件，以便每个线程在它关闭之前（即计算完成时）触发事件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:04:36.483

这正是[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)擅长的事情。您启动 a`BackgroundWorker`并让它在完成工作时通知您。该文档有一些不错的示例，许多其他站点也有。只需搜索BackgroundWorker，您就会发现大量有用的信息。

# javascript - 谷歌映射 apiv3 'click' 和 'dragend' 单个监听器

> ID：14301297
> 
> 赞同：6
> 
> 时间：2013-01-13T06:43:48.300
> 
> 标签：javascript, google-maps-api-3

处理我的代码以通过单击检索经纬度，它工作正常。想知道是否可以将“click”和“dragend”组合在一个事件侦听器中，如果没有的话。希望有什么合适的选择。

这就是我一直在做的事情。

```
google.maps.event.addListener(map,'click', function(event) {
    document.getElementById("latbox").value = event.latLng.lat();
    document.getElementById("lngbox").value = event.latLng.lng();
    addMarker(event.latLng);
  });
}

 function addMarker(location) {

if (!marker) {

    marker = new google.maps.Marker({
    position: location,
    map: map,
    draggable:true,
    animation: google.maps.Animation.DROP
    });
}
// Otherwise, simply update its location on the map.
else { marker.setPosition(location); }
 } 
```

我尝试这样做，`google.maps.event.addListener(map,'click','dragend', function(event)`但无济于事。另外，如果有人有想法将其修改`marker.setPosition(location);`为`animation: google.maps.Animation.DROP`. . 提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T14:15:38.220

没有内置方法可以为多个事件应用侦听器。

当您的问题是您不想定义回调函数两次时，您可以使用非匿名函数或为 1 个事件定义侦听器并在另一个事件触发时触发该事件：

```
google.maps.event.addListener( map, 'click',
                              function(e){ alert('clicked or dragged');} );
google.maps.event.addListener( map, 'dragend', function(){
                              google.maps.event.trigger(this, 'click');} ); 
```

动画相关：
除了使用marker-methods(setAnimation,setPosition)来设置marker-options，你也可以使用setOptions方法同时设置多个选项：

```
marker.setOptions({ position  : location,
                    animation : google.maps.Animation.DROP}); 
```

# android - 使用 forge (trigger.io) 获取 Android 版本号？

> ID：14301299
> 
> 赞同：1
> 
> 时间：2013-01-13T06:44:39.890
> 
> 标签：android, trigger.io

有什么方法可以让当前在 trigger.io 应用程序中运行的 Android 版本？我试图通过删除旧版本 Android 的一些 CSS 耀斑（阴影和渐变）来最大化性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:00:46.367

**更新：** 我在下面描述的模块刚刚公开，所以请随意使用[forge.platform](https://trigger.io/modules/platform/current/docs/index.html)。

* * *

实际上，我为 Trigger.io 应用程序编写了一个[本机模块](https://trigger.io/docs/current/api/native_modules/index.html)，正是这样做的。我的 API.java 的代码看起来有点像这样：

```
package io.trigger.forge.android.modules.version;

import io.trigger.forge.android.core.ForgeTask;

public class API {
  public static void getAPILevel(final ForgeTask task) {
    task.success(android.os.Build.VERSION.SDK_INT); // e.g. "17"
  }

  public static void getVersionString(final ForgeTask task) {
    task.success(android.os.Build.VERSION.RELEASE); // e.g. "4.2.1"
  }

  public static void getDeviceName(final ForgeTask task) {
    task.success(android.os.Build.MODEL); // e.g. "Nexus 7"
  }
} 
```

**更新：**您现在也可以在[公共 GitHub 存储库](https://github.com/Hojoki/trigger.io-platform)中找到代码。

当然，这仅适用于本机应用程序。如果您将项目部署到 Web，则需要有一个解析用户代理的后备。

# postgresql - 我怎样才能使除停用词之外的所有内容都编入索引

> ID：14301300
> 
> 赞同：1
> 
> 时间：2013-01-13T06:44:44.213
> 
> 标签：postgresql, postgresql-9.2

我已经读过，在 Postgres 中使用字典时，如果任何字典都无法识别一个单词，它将不会被索引。我觉得那很麻烦。我希望除停用词之外的所有内容都被索引。

我可以这样做吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:28:08.117

[关于字典](http://www.postgresql.org/docs/9.2/static/textsearch-dictionaries.html)的文档章节说：

> 配置词典列表的一般规则是首先放置最窄、最具体的词典，然后是更通用的词典，最后是一个非常通用的词典，如 Snowball 词干分析器或简单的词典，它可以识别所有内容

因此，由于列表的最后一个字典，不会发生转储无法识别的单词。

这就是全文解析器开箱即用的工作方式，因此除非您对其进行自定义，否则您不必担心它。

# javascript - 使用 CSS 或 Jquery 或 Javascript 的图像边框

> ID：14301303
> 
> 赞同：3
> 
> 时间：2013-01-13T06:45:05.760
> 
> 标签：javascript, jquery, css, image

我可以给一个效果像

[http://wfs-01.wapka.mobi/300036/300036239_0f906fc5ce.png](http://wfs-01.wapka.mobi/300036/300036239_0f906fc5ce.png)

并且图像将在该边界内。有什么方法可以用**jquery**、**javascript**或**CSS**等任何语言实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T06:56:16.620

[CSS 转换](http://dev.w3.org/csswg/css3-transforms/)可以在现代浏览器中发挥作用。

这是一个[演示](https://www.webkit.org/blog-files/3d-transforms/perspective-by-example.html)。这里是来自 MDN 的文档[。](https://developer.mozilla.org/en-US/docs/CSS/transform)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T07:02:28.947

CSS3 过渡、变换、动画、过滤器等等！

看看[这个](http://css3.bradshawenterprises.com/)

# html - 整理网站所有内容 从 SEO 的角度来看更好？

> ID：14301309
> 
> 赞同：-2
> 
> 时间：2013-01-13T06:45:55.773
> 
> 标签：html, seo, publishing

我想做的是在主页/索引页面上列出最新消息和最新评论，有点困惑我应该用什么方式列出内容。请告诉我，从 SEO 角度来看，哪种内容发布技术更好：

```
<div id="NewsList">
 <ul>
    <li><p>News1 Title</p><p>News1 Summary</p></li>
    <li><p>News2 Title</p><p>News2 Summary</p></li>
 </ul>
</div> 
```

或者

```
<div id="NewsList">
  <div>
    <div id="NewsTitle">News1 Title</div>
    <div id="NewsSummary">News1 Summary</div>
  </div>

  <div>
    <div id="NewsTitle">News2 Title</div>
    <div id="NewsSummary">News2 Summary</div>
  </div>
</div> 
```

我已经以`<ul><li>`格式发布了站点左侧和顶部菜单。另外请告诉我列出产品的更好的 SEO 技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:04:07.283

如果您使用的是**HTML5**，我会选择：

```
<section>
  <h1>Latest News</h1>

  <article>
    <h1>News1 Title</h1>
    <p>News1 Summary</p>
  </article>

  <article>
    <h1>News1 Title</h1>
    <p>News1 Summary</p>
  </article>

</section> 
```

如果“最新消息”和“最新评论”不是主页/列表页面的主要内容，您可能需要`aside`使用`section`.

* * *

如果您使用的是**HTML 4.01**，请使用相同的结构，但使用`div`代替`section`/ `article`；另外，调整标题级别，例如：

```
<div>
  <h2>Latest News</h2> <!-- depending on your page outline; adjust following levels accordingly -->

  <div>
    <h3>News1 Title</h3>
    <p>News1 Summary</p>
  </dov>

  <div>
    <h3>News1 Title</h3>
    <p>News1 Summary</p>
  </div>

</div> 
```

# javascript - 为什么 moment.js diff 方法返回 NaN？

> ID：14301317
> 
> 赞同：8
> 
> 时间：2013-01-13T06:46:53.710
> 
> 标签：javascript, mongodb, serialization, momentjs

终端输出：

```
Now:  { _d: Sat Jan 13 2018 02:39:25 GMT-0400 (AST),
      _isUTC: false,
      _a: null,
      _lang: false }
Expiration Date: { _d: Wed Feb 13 2013 02:00:15 GMT-0400 (AST),
      _isUTC: false,
      _a: null,
      _lang: false }
Difference between Now and Expiration Date: NaN 
```

代码：

```
console.log('Difference between Now and Expiration Date:', now.diff(expDate, 'months', true)); 
```

moment.js 来源：

```
diff : function (input, val, asFloat) {
            var inputMoment = this._isUTC ? moment(input).utc() : moment(input).local(),
                zoneDiff = (this.zone() - inputMoment.zone()) * 6e4,
                diff = this._d - inputMoment._d - zoneDiff,
                year = this.year() - inputMoment.year(),
                month = this.month() - inputMoment.month(),
                date = this.date() - inputMoment.date(),
                output;
            if (val === 'months') {
                output = year * 12 + month + date / 30;
            } else if (val === 'years') {
                output = year + (month + date / 30) / 12;
            } else {
                output = val === 'seconds' ? diff / 1e3 : // 1000
                    val === 'minutes' ? diff / 6e4 : // 1000 * 60
                    val === 'hours' ? diff / 36e5 : // 1000 * 60 * 60
                    val === 'days' ? diff / 864e5 : // 1000 * 60 * 60 * 24
                    val === 'weeks' ? diff / 6048e5 : // 1000 * 60 * 60 * 24 * 7
                    diff;
            }
            return asFloat ? output : round(output);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-02T22:17:25.820

从问题的评论中，我了解到您正在尝试将`moment`实例直接存储到 MongoDB 中，然后再检索它。

A`moment`不能直接序列化，所以这总是会导致问题。您应该从现在开始获取 ISO 字符串：

```
var m = moment();
var s = m.toISOString(); //  "2013-08-02T20:13:45.123Z" 
```

将该字符串存储在 MongoDB 中。稍后，当您检索它时，您可以从该值构造一个新的时刻实例。

```
var m = moment("2013-08-02T20:13:45.123Z"); 
```

如果你喜欢更紧凑的东西，你可以使用从中获得的数字`m.valueOf()`。但这并不容易阅读或操作。

不要使用`_d`评论中建议的字段。那是时刻内部的，不应该直接使用。这可能不是您所期望的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-09-22T12:36:11.223

比较两个矩对象时，我遇到了同样的问题。我遇到的问题是，第一个时刻是在指定英国日期格式的情况下构建的，而第二个时刻是在没有指定英国日期格式的情况下创建的，并且日期恰好有一天大于 12，例如本月 27 日。在调试时仔细检查，第二个日期的时刻对象指出其 _d 字段是无效日期。

```
var startDate = moment("23/09/2019", "DD/MM/YYYY");
var endDate = moment("27/09/2019");
var dateDiff = startDate.diff(endDate, "days"); // returns NaN 
```

修复方法是构造第二个矩对象并指定日期格式。

```
var endDate = moment("27/09/2019", "DD/MM/YYYY"); 
```

# python - QtListView 行号

> ID：14301318
> 
> 赞同：-1
> 
> 时间：2013-01-13T06:46:54.433
> 
> 标签：python, qt, pyside

有没有办法将行号附加到 QListView 小部件，我知道你可以使用 setText() 添加文本，但它只有 str 而不是整数，所以我不能只增加一个整数并打印它。有任何想法吗？

这是代码：

```
with open("../content/vulcan.hosts") as new_file:
            reader = csv.reader(new_file, delimiter='|')
            for line in reader:
                i = 1
                uname = line[0]
                iface = line[1]
                macad = line[2]
                ipad  = line[3]
                type  = line[4]
                item = QtGui.QTreeWidgetItem()
                item.setFlags(QtCore.Qt.ItemIsUserCheckable)
                item.setCheckState(0, QtCore.Qt.Unchecked)
                item.setText(0, str(i))
                i = 1 + 1
                item.setText(1, uname)
                item.setText(2, iface)
                item.setText(3, macad)
                item.setText(4, ipad)
                item.setText(5, type)
                item.setText(6, str("asdasd"))
                item.setText(7, str("asdasda"))
                item.setText(8, str("asdasd"))
                self.runTree.addTopLevelItem(item) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:01:06.217

如果您想将它添加到项目的文本中，您可以简单地使用 Qt 的一种方法将整数转换为字符串。例如，有一[`number(...)`](http://www.riverbankcomputing.com/static/Docs/PyQt4/html/qstring.html#number)组静态方法。

```
int a = 63;
QString s = QString.number(a); // s == "63" 
```

但是，我不确定您正在使用哪种数据，但也许 QListView 不是您的最佳选择。你考虑过 QTableView/Widget 吗？在那里你可以添加一些不错的行号。

# jquery - 获取第三级 ul 以在点击时切换相应的 UL

> ID：14301321
> 
> 赞同：0
> 
> 时间：2013-01-13T06:47:07.777
> 
> 标签：jquery, html

我目前正在使用一些 uls 并试图找出如何打开第三级链接，如果单击另一个第三级 ul 链接，则该 ul 关闭并打开单击的链接。我有一个二级 UL 的工作代码，只是第三级是令人困惑的，因为我仍处于 jquery 的学习阶段。这是我的代码：

```
<ul>
         <li>
                    <a href="#" class="button">Humanities</a>
                    <ul class="subul">            
                        <li>
                            <a href="#" class="button-2">Literature</a>
                            <ul class="subsubul">
                                <li>
                                    <a href="">Academic Writing</a>
                                </li>
                                <li>
                                    <a href="">American Literature</a>
                                </li>
                                <li>
                                    <a href="">Biography</a>
                                </li>
                                <li>
                                    <a href="">Classics</a>
                                </li>
                                <li>
                                    <a href="">Comedy</a>
                                </li>
                                <li>
                                    <a href="">Drama</a>
                                </li>
                                <li>
                                    <a href="">European Literature</a>
                                </li>
                                <li>
                                    <a href="">Fiction</a>
                                </li>
                                <li>
                                    <a href="">Nonfiction Prose</a>
                                </li>
                                <li>
                                    <a href="">Poetry</a>
                                </li>
                                <li>
                                    <a href="">Technical Writing</a>
                                </li>
                                <li>
                                    <a href="">Tragedy</a>
                                </li>
                                <li>
                                    <a href="">World Literature</a>
                                </li>
                            </ul>
                        </li>                
                        <li>
                            <a href="{mylink-here}"">Philosophy</a>
                        </li>
                        <li>
                            <a href="#" class="button-2">Religion</a>
                            <ul class="subsubul">
                                <li>
                                    <a href="">Buddhism</a>
                                </li>
                                <li>
                                    <a href="">Christianity</a>
                                </li>
                                <li>
                                    <a href="">Hinduism</a>
                                </li>
                                <li>
                                    <a href="">Islam</a>
                                </li>
                                <li>
                                    <a href="">Judaism</a>
                                </li>
                                <li>
                                    <a href="">Theology</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#" class="button">Language</a>
                    <ul class="subul">            
                        <li>
                            <a href="{mylink-here}">Linguistics</a>
                        </li>
                    </ul>
                </li>
     </li> 
```

```
<script>
    $(document).ready(function() {
        $("ul.subsubul").hide().addClass("subclosed");
        $("a.button-2").each(function() {   
            $(this).click(function() {
                var index = $(this).parent().index();
                $('.subclosed').hide();
                $('.subclosed').eq(index).slideToggle("slow");
            });    
        }); 
        $("ul.subul").hide().addClass("closed");               
        $("a.button").each(function() {   
            $(this).click(function() {
                var index = $(this).parent().index();
                $('.closed').hide();
                $('.closed').eq(index).slideToggle("slow");
            });    
        }); 
    });
</script> 
```

HTML 中可能有一些语法错误，因为我已经简化了我正在使用的大量列表，但这是它的基础。我将 jQuery 设置为将打开和关闭第三级但为每个链接打开相同的第三级 ul 的地步。我现在真的很困惑。任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T06:53:36.610

我认为您正在尝试制作手风琴。
使用[jquery ui 的手风琴](http://jqueryui.com/accordion/)小部件，无需重新发明轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:16:39.623

这对你有用；）

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

  <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" />
  <meta name="author" content=""/>
  <meta name="description" content=""/>
  <meta name="keywords" content=""/>
  <title></title>
  <style type="text/css">
  *{margin:0;padding:0;}

  .wrapper{
  display:block;
  width:100px;
  height:200px;      
  margin:0px auto;
  margin-top:40px;
  background-color:black;
  position:relative;
  }

 .wrapper ul
 {
 list-style-type:none;
 overflow:hidden;
 }

 .wrapper ul li ul a{line-height:20px;}

 .active{
 clear:both;
 padding-bottom:3px;
 }

 a{
 color:white;
 display:block;
 width:100px;
 text-decoration:none;
 height:20px;
 text-align:center;
 line-height:20px;
 }

 .service{
 background-color:red;
 display:block;
 width:100px;
 text-decoration:none;
 height:20px;
 text-align:center;
 border-bottom:1px solid #000000;
 outline:none;
 }

 .about{
 background-color:red;
 display:block;
 width:100px;
 text-decoration:none;
 height:20px;
 text-align:center;
 border-bottom:1px solid #000000;
 outline:none;
 }

 .home{
  background-color:red;
  display:block;
  width:100px;
  text-decoration:none;
  height:20px;
  text-align:center;
  border-bottom:1px solid #000000;
  outline:none;
  }

 .contact{
 background-color:red;
 display:block;
 width:100px;
 text-decoration:none;
 height:20px;
 text-align:center;
 border-bottom:1px solid #000000;
 outline:none;
 }

 </style>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">

$(document).ready(function(){
$('.wrapper ul li ul:first').addClass('active');
$('.wrapper ul li ul').hide();  
$('.wrapper ul li a:not(.wrapper ul li ul li a)').click(function(){
 if($('.wrapper ul li a').next('ul').hasClass('active')){         
  $('.active').slideUp('slow');
  $('.active').removeClass('active');
  $(this).next('ul').addClass('active');
  $('.active:not(:animated)').slideDown('slow');
  }
  /*if user clicks like crazy sometimes our active class
      disapears altogether... code below will FIX that :) */ 
 else if($('.active').length===0){   
  $(this).next('ul').addClass('active');
  $('.active:not(:animated)').slideDown('slow');
  }

     });
     });

    </script>
    </head>
    <body>

 <div class="wrapper">
 <ul>
 <li><a class="home" href="#">Home</a>
 <ul>
 <li><a href="#">Link 1</a></li>
 <li><a href="#">Link 2</a></li>
 <li><a href="#">Link 3</a></li>
 </ul>

 </li>

 <li><a class="about" href="#">About Us</a>
 <ul>
 <li><a href="#">Link 1</a></li>
 <li><a href="#">Link 2</a></li>
 <li><a href="#">Link 3</a></li>
 </ul>

 </li>

 <li><a class="service" href="#">Service</a>
 <ul>
 <li><a href="#">Link 1</a></li>
 <li><a href="#">Link 2</a></li>
 <li><a href="#">Link 3</a></li>
 </ul>

 </li>

 <li><a class="contact" href="#">Contact</a>
 <ul>
 <li><a href="#">Link 1</a></li>
 <li><a href="#">Link 2</a></li>
 <li><a href="#">Link 3</a></li>
 </ul>
 </li>
 </ul> 
```

# c++ - 调试时什么都不显示

> ID：14301323
> 
> 赞同：-1
> 
> 时间：2013-01-13T06:47:30.720
> 
> 标签：c++

> **可能重复：**
> [如何将对象传递给 C++ 中的函数？](https://stackoverflow.com/questions/2139224/how-to-pass-objects-to-functions-in-c)

主班

```
#include "List.h"
#include "Car.h"
#include "Worker.h"
#include "Queue.h"
#include <iostream>
#include <string>

using namespace std;
void initWorkerList(List<Worker>);
void initCarList(List<Car>, Queue, Queue);

int main() {
    List<Worker> WorkerList;
    List<Car> CarList;
    Queue q1, q2;
    initWorkerList(WorkerList);
    initCarList(CarList, q1, q2); // Error here
        //..... e.g cout << "Successful!"; but it does not displays it...
}

void initWorkerList(List<Worker> WorkerList) {
    Worker w1 = Worker("Ben Ang", "Ben123", "pass123", 'M');
    WorkerList.add(w1);
    Worker w2 = Worker("Grace Eng", "Gr4ce", "loveGrace", 'W');
    WorkerList.add(w2);
    Worker w3 = Worker("Rebecca Xuan", "Xuanz", "Rebecca Xuan", 'W');
    WorkerList.add(w3);
}

void initCarList(List<Car> CarList, Queue q1, Queue q2) {
    Car c1 = Car("SJS1006Z","Toyota", "Saloon car");
    Car c2 = Car("SFW6666E", "hyundai", "Taxi (Saloon)");
    Car c3 = Car("SCF1006G","Mercedes", "Large Van");
    Car c4 = Car("SBQ1006Z", "Puma", "Saloon Car");

    q1.enqueue(c1);
    q2.enqueue(c1);
    q2.enqueue(c3);
    q1.enqueue(c4);
    q1.enqueue(c1);
    q1.enqueue(c1);
    q1.enqueue(c1);
    q2.enqueue(c2);
    q2.enqueue(c2);
} 
```

根本没有错误。但是在调试时没有显示任何内容...我已经尝试过，我的猜测是 initCarList(CarList,q1,q2); 有问题 因为在该代码之后，其他代码完全可以工作。有什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T06:50:24.203

您通过值而不是通过引用传递队列变量。

```
initCarList(CarList, q1, q2); // Error here 
```

因此 initCarList 中的任何更改都不会反映给调用者

将您的函数签名更改为

```
void initCarList(List<Car> CarList, Queue& q1, Queue& q2) { 
```

和声明

```
void initCarList(List<Car>, Queue&, Queue&); 
```

如果按值传递参数，则内部的任何更改`initCarList`都是函数范围内的本地更改，并且不会被反射回来。

```
Pass by Value
Caller              Callee

|------|            |------|
workedList          workedList
| ___  |            | ___  |
||   | |-------->   ||   | | <------
||___| |            ||___| |       |
|      |            |      |       |
|q1    |            |q1    |     (Changing any of these variables 
| ___  |            | ___  |      won't be reflected back)
||   | |-------->   ||   | |       |
||___| |            ||___| |       |
|      |            |      |       |
|q2    |            |q2    |       |
| ___  |            | ___  |       |
||   | |-------->   ||   | |       |
||___| |            ||___| | <------
|______|            |______|

Pass by reference

Caller              Callee

--------            --------
|wList |            |wList |
| ___  |            | ____ |
||   | |-------->   ||    || <------
||___|<|------------||-*__||       |
|   _  |            |      |       |
|q1    |            |q1    |     (Changing any of these variables 
| ___  |            | ____ |       will be reflected back)
||   | |-------->   ||    ||       |
||___|<|------------||-*__||       |
|      |            |      |       |
|q2    |            |q2    |       |
| ___  |            | ____ |       |
||   | |-------->   ||    ||       |
||___|<|------------||-*__|| <------
|______|            |______| 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T06:50:00.037

您正在按值传递变量，这意味着函数的参数包含它们的副本，您可以在函数结束时修改并丢弃它们。通过引用传递来修改原始变量。例如，`initCarList`将变为：

```
void initCarList(List<Car> CarList, Queue &q1, Queue &q2) 
```

您也不使用该`CarList`参数，因此如果您的代码中是这样，您最好将其取出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T06:53:27.547

您的函数按值传递，这意味着函数会复制传入的变量并在复制的变量上进行操作。要修改原始文件，您需要通过引用传递参数

改变：

```
void initWorkerList(List<Worker>);
void initCarList(List<Car>, Queue, Queue); 
```

到：

```
void initWorkerList(List<Worker> &);
void initCarList(List<Car>&, Queue&, Queue&); 
```

# android - 如何在linux内核中定义和触发我自己的新softirq？

> ID：14301331
> 
> 赞同：7
> 
> 时间：2013-01-13T06:49:05.107
> 
> 标签：android, c, linux-kernel, arm, softirq

我想在 linux 内核中创建自己的 softirq。这样做是否正确：

在`init`模块中，我想触发`softirq`from 我将添加一个调用：

```
394 void open_softirq(int nr, void (*action)(struct softirq_action *))
395 {
396         softirq_vec[nr].action = action;
397 } 
```

在片段中，我想提出 softirq，我将添加对`raise_softirq`函数的调用：

```
379 void raise_softirq(unsigned int nr)
380 {
381         unsigned long flags;
382 
383         local_irq_save(flags);
384         raise_softirq_irqoff(nr);
385         local_irq_restore(flags);
386 } 
```

并添加我的新`softirq`内容：

```
411 /* PLEASE, avoid to allocate new softirqs, if you need not _really_ high
412    frequency threaded job scheduling. For almost all the purposes
413    tasklets are more than enough. F.e. all serial device BHs et
414    al. should be converted to tasklets, not to softirqs.
415  */
416 
417 enum
418 {
419         HI_SOFTIRQ=0,
420         TIMER_SOFTIRQ,
421         NET_TX_SOFTIRQ,
422         NET_RX_SOFTIRQ,
423         BLOCK_SOFTIRQ,
424         BLOCK_IOPOLL_SOFTIRQ,
425         TASKLET_SOFTIRQ,
426         SCHED_SOFTIRQ,
427         HRTIMER_SOFTIRQ,
428         RCU_SOFTIRQ,    /* Preferable RCU should always be the last softirq */
429         MY_NEW_SOFTIRQ
430         NR_SOFTIRQS
431 }; 
```

在这里：

```
 60 char *softirq_to_name[NR_SOFTIRQS] = {
 61         "HI", "TIMER", "NET_TX", "NET_RX", "BLOCK", "BLOCK_IOPOLL",
 62         "TASKLET", "SCHED", "HRTIMER", "RCU", "MY_NEW_SOFTIRQ"
 63 }; 
```

## 问题：

*   我是对的还是我错过了什么？
*   这是正确的方法吗？还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:32:22.157

如果你想修补内核并重新编译它，你可能做对了（除非你应该在 RCU_SOFTIRQ 之前移动它）。

否则，IOW 如果你想在内核模块中做，你必须使用基于 SoftIRQ 的 tasklet 在 SoftIRQ 上下文中做一些事情：

`tasklet_init()`用于初始化你的钩子。

`tasklet_schedule()`安排您注册的小任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T07:27:37.887

## 静态声明 Softirq

`MY_NEW_SOFTIRQ`通过将它添加到`enum`and来静态声明你的 softirq( )
`char *softirq_to_name[NR_SOFTIRQS]`。重新编译内核。

## 即时注册 Softirq

一旦静态声明，我们自己的软中断应该在运行时在内核模块中使用`open_softirq()`. 在中断处理程序的退出路径中通过`raise_softirq()`.

# java - 安卓admob不工作

> ID：14301332
> 
> 赞同：1
> 
> 时间：2013-01-13T06:49:07.697
> 
> 标签：java, android, nullpointerexception, admob

嗨，我试图在我的应用中包含广告！！！！

我添加了外部罐子添加了权限，活动从教程但是当我在布局中添加广告时出现问题

它显示了这个错误

“java.lang.NullPointerException”

我正在使用 Min sdk 版本 Android 2.3.3

目标 2.3.3

API等级：10

项目已构建但未打开！！！！

下面是我的代码：

```
enter code here
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.rhstudioss.adaps"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="10" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation"></activity>
    <activity
        android:name="com.rhstudioss.adaps.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

主.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:tools="http://schemas.android.com/tools"
 xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 tools:context=".MainActivity" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world" />
<com.google.ads.AdView android:id="@+id/ad"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ads:adUnitId="MyID"
    ads:loadAdOnCreate="true"
    ads:adSize="BANNER"
    />

 </RelativeLayout> 
```

请帮我解决问题thanksss :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:06:26.997

正确定位 adView 后，试试这个。

第 1 步：
- 右键单击​​您的项目。
- 如果您有最新版本，请在 C:\Users\YOURNAME\android-sdks\extras\google\admob_ads_sdk 中找到新的 Google_Admob_Jar 文件。
- 单击确定

第 2 步：
- 右键单击​​您的项目。
- 属性-> Java_Build_Path-> Order_and_Export。
- 选择 Google_Admob_Jar。
- 单击确定

希望它有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:13:54.210

我在您的代码中注意到的几件事：

*首先*，目标 SDK 至少应为 API 13（参考链接：[Admob Error in Eclipse for android:configChanges](https://stackoverflow.com/questions/7899767/admob-error-in-eclipse-for-androidconfigchanges)）

改变它看起来像这样：

```
<uses-sdk android:minSdkVersion="10" android:targetSdkVersion="13"/> 
```

*其次*，您的代码中的这一部分发布在OP中：

```
<activity android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation"></activity> 
```

应该：

```
<activity
    android:name="com.google.ads.AdActivity"
    android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" >
</activity> 
```

**更新**

如需更多参考，请阅读[**此**](https://developers.google.com/mobile-ads-sdk/docs/)链接。打开站点后，切换到**Android**选项卡（默认情况下您将在 iOS 上）

# java - 将 LibGDX 与 Android 首选项一起使用

> ID：14301333
> 
> 赞同：3
> 
> 时间：2013-01-13T06:49:15.290
> 
> 标签：java, android, sharedpreferences, libgdx

我正在尝试将 Andrioid 的首选项系统与 LibGDX 的首选项系统结合使用。他们都使用 SharedPreferences 作为后端，所以我认为他们应该能够一起工作，但是当我尝试在 LibGDX 的首选项中加载数据时，我没有得到任何数据。

我的 Androidpreferences.xml 文件（我知道它很短，稍后会有更多内容：P）：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
    <EditTextPreference 
        android:key="framerate"
        android:title="Set Framerate"
        android:enabled="true"
        android:persistent="true"
        android:defaultValue="25" />
</PreferenceScreen> 
```

这是我的 PreferenceActivity：

```
import android.annotation.SuppressLint;
import android.annotation.TargetApi;
import android.os.Build;
import android.os.Bundle;
import android.preference.PreferenceActivity;
import android.preference.PreferenceFragment;

public class WallpaperSettings extends PreferenceActivity {

    @SuppressLint("NewApi")
    @SuppressWarnings("deprecation")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (Build.VERSION.SDK_INT < 11) {
            addPreferencesFromResource(R.xml.preferences);
        } else {
            getFragmentManager().beginTransaction().replace(android.R.id.content, new MyPreferenceFragment()).commit();
        }

    }

    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    public static class MyPreferenceFragment extends PreferenceFragment
    {
        @Override
        public void onCreate(final Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            addPreferencesFromResource(R.xml.preferences);
        }
    }
} 
```

当我从 的子类调用它时`com.badlogic.gdx.Game`，我使用

```
Preferences pref = Gdx.app.getPreferences("preferences");
pref.getInteger("framerate"); 
```

其中的键数`pref`为 0。

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T18:15:10.467

感谢[http://www.badlogicgames.com/forum/viewtopic.php?f=11&t=6365#p32981](http://www.badlogicgames.com/forum/viewtopic.php?f=11&t=6365#p32981)我能够解决问题。

请注意，该代码适用于 Android 2.x 和 3.0+。

```
import android.annotation.SuppressLint;
import android.annotation.TargetApi;
import android.os.Build;
import android.os.Bundle;
import android.preference.PreferenceActivity;
import android.preference.PreferenceFragment;

public class WallpaperSettings extends PreferenceActivity {

    @SuppressLint("NewApi")
    @SuppressWarnings("deprecation")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (Build.VERSION.SDK_INT < 11) {
            addPreferencesFromResource(R.xml.preferences);
        } else {
            getFragmentManager().beginTransaction().replace(android.R.id.content, new MyPreferenceFragment()).commit();
        }

    }

    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    public static class MyPreferenceFragment extends PreferenceFragment
    {
        @Override
        public void onCreate(final Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            addPreferencesFromResource(R.xml.preferences);
            getPreferenceManager().setSharedPreferencesName("preferences");
            getPreferenceManager().setSharedPreferencesMode(0);
        }
    }
} 
```

# android - 需要均匀分布的一排按钮

> ID：14301334
> 
> 赞同：2
> 
> 时间：2013-01-13T06:49:49.517
> 
> 标签：android, xml

使用 3 行和 4 列，我尝试将所有按钮水平均匀地隔开，但失败了。垂直很好。

下面是 3 种不同的间隔按钮的尝试，我的 3 行中的每行 1 次。第一行拉伸图形（这是不需要的），第二行不拉伸但没有间距（图形之间需要间距），而第三行拉伸时没有任何间距。请帮助我将它们均匀分布。同一站点上的其他人的解决方案没有奏效。我应该尝试改用桌子吗？

视觉总结= 不拉伸图形：我想要 | xxxx | 而不是| xxxx |

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/row1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_weight="1"
    android:gravity="center"
    android:orientation="horizontal" >

    <View
        android:layout_width="0dp"
        android:layout_height="1dp"
        android:layout_weight=".1" >
    </View>

    <Button
        android:id="@+id/a1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="@drawable/blanktilesml"
        android:gravity="center_horizontal|center_vertical"
        android:src="@drawable/clear64" />

    <View
        android:layout_width="0dp"
        android:layout_height="1dp"
        android:layout_weight=".1" >
    </View>

    <Button
        android:id="@+id/a2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="@drawable/blanktilesml"
        android:gravity="center_horizontal|center_vertical"
        android:src="@drawable/clear64" />

    <View
        android:layout_width="0dp"
        android:layout_height="1dp"
        android:layout_weight=".1" >
    </View>

    <Button
        android:id="@+id/a3"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="@drawable/blanktilesml"
        android:gravity="center_horizontal|center_vertical"
        android:src="@drawable/clear64" />

    <View
        android:layout_width="0dp"
        android:layout_height="1dp"
        android:layout_weight=".1" >
    </View>

    <Button
        android:id="@+id/a4"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="@drawable/blanktilesml"
        android:gravity="center_horizontal|center_vertical"
        android:src="@drawable/clear64" />

    <View
        android:layout_width="0dp"
        android:layout_height="1dp"
        android:layout_weight=".1" >
    </View>
</LinearLayout>

<LinearLayout
    android:id="@+id/row2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_weight="1"
    android:gravity="center"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/b1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@drawable/blanktilesml"
            android:gravity="center"
            android:src="@drawable/clear64" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/b2"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@drawable/blanktilesml"
            android:gravity="center"
            android:src="@drawable/clear64" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/b3"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@drawable/blanktilesml"
            android:gravity="center"
            android:src="@drawable/clear64" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/b4"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@drawable/blanktilesml"
            android:gravity="center"
            android:src="@drawable/clear64" />
    </LinearLayout>
</LinearLayout>

<LinearLayout
    android:id="@+id/row3"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_weight="1"
    android:gravity="center"
    android:orientation="horizontal"
    android:weightSum="1" >

    <Button
        android:id="@+id/c1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".25"
        android:background="@drawable/blanktilesml"
        android:paddingLeft="10dp"
        android:src="@drawable/clear64" />

    <Button
        android:id="@+id/c2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".25"
        android:background="@drawable/blanktilesml"
        android:paddingLeft="10dp"
        android:src="@drawable/clear64" />

    <Button
        android:id="@+id/c3"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".25"
        android:background="@drawable/blanktilesml"
        android:paddingLeft="10dp"
        android:src="@drawable/clear64" />

    <Button
        android:id="@+id/c4"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".25"
        android:background="@drawable/blanktilesml"
        android:paddingLeft="10dp"
        android:src="@drawable/clear64" />
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T07:49:15.077

尝试这个：

```
<LinearLayout
    android:id="@+id/row1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_weight="1"
    android:gravity="center"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center" >

        <ImageButton
            android:id="@+id/a1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@android:drawable/arrow_up_float"
            android:gravity="center_horizontal|center_vertical"
            android:src="@drawable/ic_launcher" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center" >

        <ImageButton
            android:id="@+id/a2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@android:drawable/arrow_up_float"
            android:gravity="center_horizontal|center_vertical"
            android:src="@drawable/ic_launcher" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center" >

        <ImageButton
            android:id="@+id/a3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@android:drawable/arrow_up_float"
            android:gravity="center_horizontal|center_vertical"
            android:src="@drawable/ic_launcher" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center" >

        <ImageButton
            android:id="@+id/a4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@android:drawable/arrow_up_float"
            android:gravity="center_horizontal|center_vertical"
            android:src="@drawable/ic_launcher" />
    </LinearLayout>
</LinearLayout> 
```

试试这个作为你的第一行。同样可以对所有行进行，

因此，除非您不希望图像被拉伸，否则您需要在布局中对它们说唱。这样做您将管理间距，并且drawable看起来会很好。如果你拉伸按钮，那么drawable也将相应地拉伸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:24:50.963

这是我正在处理的一个计算器项目中所做的。要求行中的按钮大小都相同。您需要为按钮添加填充以满足您的需求。：

```
 <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:padding="5dp"
        android:id="@+id/NumberPad">

        <LinearLayout
            android:orientation="horizontal"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:id="@+id/NumberRow123"
            android:layout_weight="1">

            <Button
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:id="@+id/button1"
                android:layout_weight="1"
                android:background="@drawable/unpressed7"/>

            <Button
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:id="@+id/button2"
                android:layout_weight="1"
                android:background="@drawable/unpressed8"/>

            <Button
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:id="@+id/button3"
                android:layout_weight="1"
                android:background="@drawable/unpressed9"/>

        </LinearLayout>

        <LinearLayout
            android:orientation="horizontal"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:id="@+id/NumerRow456"
            android:layout_weight="1">

            <Button
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:id="@+id/button4"
                android:layout_weight="1"
                android:background="@drawable/unpressed4"/>

            <Button
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:id="@+id/button5"
                android:layout_weight="1"
                android:background="@drawable/unpressed5"/>

            <Button
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:id="@+id/button6"
                android:layout_weight="1"
                android:background="@drawable/unpressed6"/>
        </LinearLayout>

        <LinearLayout
            android:orientation="horizontal"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:id="@+id/NumberRow789">

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:id="@+id/button7"
                android:layout_weight="1"
                android:background="@drawable/unpressed1"/>

            <Button
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:id="@+id/button8"
                android:layout_weight="1"
                android:background="@drawable/unpressed2"/>

            <Button
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:id="@+id/button9"
                android:layout_weight="1"
                android:background="@drawable/unpressed3"/>

        </LinearLayout> 
```

# android - 播放框架：文件下载

> ID：14301341
> 
> 赞同：1
> 
> 时间：2013-01-13T06:51:20.503
> 
> 标签：android, playframework, playframework-2.0

我尝试制作一个文件服务器让人们下载 APK 文件。我的服务器正在使用 Play 框架。问题是：我总是通过PC浏览器下载没有文件扩展名的“app”文件。使用android浏览器时，我总是下载“app.bin”文件。我的代码有什么问题吗？

测试链接：[测试下载](http://elv.locky.jp/app)

```
public static Result get_app() {

    File tmp = new File("Ele.apk"); 
    response().setHeader("Content-Disposition", "attachment; filename=Ele.apk");
    response().setContentType("mime/type");
    return ok(tmp);
}` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:08:20.463

没有像您尝试在示例中使用它那样的`mime/type`Content -Type ...`mime/apk`

根据[维基百科的描述](http://en.wikipedia.org/wiki/APK_%28file_format%29)， APK 的 Content-Type 是`application/vnd.android.package-archive`你应该设置的。

如果问题仍然存在，请尝试谷歌什么是提供这些密钥的有效内容类型。

# java - java-无法使用 Files.newBufferedWriter 将数据写入文件

> ID：14301346
> 
> 赞同：-2
> 
> 时间：2013-01-13T06:52:07.663
> 
> 标签：java, file, file-io, bufferedwriter

在一个 java 程序中，我将一些文本逐行复制到一个字符串变量中。

然后使用 Files.newBufferedWriter 将该数据（再次逐行检索文本）写入第二个文本文件

出于某种原因，写入在第二个文件中的特定行 # 和 col # 处停止 - 即使还有更多的文本行要写入。我什至尝试将消息输出到日志中，记录发生在第 # 行 - 并且消息继续超出第 892 行，直到第 1098 行 - 但数据仅写入到第二个文件中的第 892 行。

AFAIK BufferedWriter 可以将数据写入大文件-那为什么我的程序会发生这种情况？

作为参考，下面给出了显示数据写入的代码片段 -

```
BufferedWriter writer;
     if(outputmode.equalsIgnoreCase("append"))
        writer = Files.newBufferedWriter(path_target, ENCODING,  StandardOpenOption.APPEND);
else if(outputmode.equalsIgnoreCase("overwrite"))
    writer = Files.newBufferedWriter(path_target, ENCODING,  StandardOpenOption.CREATE); 
```

将文本（在字符串变量“currentline”中）写入文件的实际代码如下所示 -

```
 writer.write(currentline);
    writer.newLine(); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T06:54:58.497

您可能需要[`flush`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedWriter.html#flush%28%29)缓冲写入器将所有内容写入文件。

# eclipse - 使用eclipse时Maven在哪里寻找springMVC jars（安装了maven插件）

> ID：14301350
> 
> 赞同：0
> 
> 时间：2013-01-13T06:52:48.843
> 
> 标签：eclipse, spring, jakarta-ee, maven, spring-mvc

我正在使用 m2e 插件。当 maven 搜索将要搜索的 springMVC jar 文件时，只是停留在某一点。在 /web-inf/lib 或项目构建路径中。我应该把那些罐子放在哪里

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:05:30.823

[Maven 在其存储库](http://maven.apache.org/guides/introduction/introduction-to-repositories.html)中查找 jars 。

因此使用 Maven 时不需要手动下载 jars，它会自动从远程仓库下载 jars 并将其放到你机器上的本地仓库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:45:42.733

Maven 使用“settings.xml”文件来查找您的项目存储库。并从这些存储库中解析依赖项（您需要的每个 jar 文件）。

更多关于 [seetings.xml](http://maven.apache.org/settings.html#Repositories)和 [这个](http://maven.apache.org/guides/mini/guide-configuring-maven.html)。

第一次下载所需的jar文件后，maven将它放在你的***本地存储库***中：

${user-home}/.m2/repository。

# gsm - 在 Android 中接收 GSM 来电并与 SIP 号码召开会议

> ID：14301361
> 
> 赞同：0
> 
> 时间：2013-01-13T06:54:57.380
> 
> 标签：gsm, phone-call

我是 Android 开发的新手。你能告诉我一些方法如何在Android：

1）接收传入的 GSM 呼叫和自动应答 2）连接/拨打我的 Sip 帐户（安装在我家的 Asterisk 服务器） 3）召开会议。

这意味着任何传入的 GSM 呼叫都需要转发到 SIP 会议。请告诉我一些可以从哪里开始的路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T20:53:52.820

从自动回答开始： [http](http://code.google.com/p/auto-answer/source/browse#svn/trunk/src/com/everysoft/autoanswer) ://code.google.com/p/auto-answer/source/browse#svn%2Ftrunk%2Fsrc%2Fcom%2Feverysoft%2Fautoanswer 然后转到另一部分。

# java - 用php解析Java XML来访问mysql数据库

> ID：14301363
> 
> 赞同：0
> 
> 时间：2013-01-13T06:55:04.173
> 
> 标签：java, php, mysql, xml, parsing

我正在为一个项目制作一个 Java 小程序。我正在尝试访问数据库并接收信息。由于各种原因，我不能也不会使用 jdbc。所以我正在尝试使用 xml 解析来接收信息。

我正在使用 DOM 进行 xml 解析。我有 php 代码，所以我可以从我的 mysql 数据库中获取数据。

这是我的 php 代码： http: [//prntscr.com/p0hul](http://prntscr.com/p0hul)

xml 应该是什么样子：

```
<XML>
    <char>
        <id>
            1
        </id>
        <name>
            Bob
        </name>
    </char>
</XML> 
```

我的 Java 代码是什么样的：http: [//prntscr.com/p0igl](http://prntscr.com/p0igl)

所以现在我真的很困惑。看起来我的 java 代码正在读取 php 代码的内容，而不是 xml。

有人可以指出我正确的方向吗？提前致谢

# iphone - 在 iPhone SDK 上读取复制的 NSMutableArray 时出错

> ID：14301364
> 
> 赞同：0
> 
> 时间：2013-01-13T06:55:49.823
> 
> 标签：iphone, xcode, nsmutablearray, copy

在我的一种方法中，我获取并解析了 a`JSON`并将其放在一个`NSArray`名为 jsonArray in 的`-(void)method1`. 然后我将该 jsonArray 的内容复制到一个`NSMutableArray`名为copyedJsonArray 以用于其他方法。问题是，每当我从其他方法在控制台中记录其内容时，copyedJsonArray 就会崩溃，`-(void)method2`但它在`-(void)method1`.

我怎样才能解决这个问题？

在我的头文件中：

```
@interface MainViewController : UIViewController

@property (nonatomic, retain) NSMutableArray *copiedJsonArray; 
```

在我的实现文件中：

```
@synthesize copiedJsonArray;

- (void)viewDidLoad
{
    [self method1];
}

- (void)method1
{
    NSString *urlString = [NSString stringWithFormat:THE_URL]; 
    NSURL *url = [NSURL URLWithString:urlString];
    NSData *data = [NSData dataWithContentsOfURL:url];
    NSString *jsonString = [[[NSString alloc] initWithData:data
                                              encoding:NSUTF8StringEncoding] autorelease];
    NSDictionary *jsonDictonary = [jsonString JSONValue];
    NSArray *jsonArray = [jsonDictonary valueForKeyPath:@"QUERY.DATA"];

    self.copiedJsonArray = [[NSMutableArray alloc] initWithArray:jsonArray copyItems:YES];

    NSLog(@"Copied JSON Array in Method 1: %@", self.copiedJsonArray);

    [self method2];
}

- (void)method2
{
    NSLog(@"Copied JSON Array in Method 2: %@", self.copiedJsonArray);
} 
```

我也尝试过这样做，但它会出现同样的错误：

```
copiedJsonArray = [jsonArray mutableCopy]; 
```

我也尝试过实施`NSCopy`但也失败了：

```
@interface MainViewController : UIViewController <NSCopying>
{
    NSMutableArray *copiedJsonArray;
} 
```

我这样做是为了在用户点击我的`UISegmentedControl`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:16:29.193

如果你在 method1 之前调用 method2 ，它会因为还没有创建copyedJasonArray 而崩溃。您不应该在方法内部创建实例变量（因为您无法知道它们是否已被调用）。您应该在创建 viewController 时执行此操作，例如在 viewDidLoad 中。

并[使用属性](https://stackoverflow.com/questions/14236799/should-i-declare-variables-in-interface-or-using-property-in-objective-c-arc/14236931#14236931)：

```
@interface
@property (retain) NSMutableArray* copiedJsonArray;
@end 
```

然后要么

```
@synthesize copiedJsonArray = _copiedJsonArray 
```

或将其保留（编译器将在 4.5 中自动将其放入）

访问为`self.copiedJsonArray`或`_copiedJSONArray`。
在 getter、setter、inits 和 deallocs 之外，使用`self.`表单，它更安全。

您也可以`_copiedJsonArray`在 setter 中懒惰地创建：

```
- (NSMutableArray*) copiedJsonArray
{
   if (!_copiedJasonArray)
         _copiedJsonArray = [NSMutableArray alloc] init;
   return _copiedJasonArray;
} 
```

# r - 如何生成块大小不均匀的热图？

> ID：14301366
> 
> 赞同：1
> 
> 时间：2013-01-13T06:56:24.340
> 
> 标签：r

我正在使用以下代码生成热图（在 AvgByQ 向量之外）：

```
library(gplots)
x<-c(0, 5, 30, 80)
y<-c(150, 2000, 2010, 3000)
AvgByQ<-c(20.25, 13.02,  0.00,  0.00,  0.00,  0.00,  8.31, 14.66,  0.00)
AvgByQMatrix <- matrix(AvgByQ, ncol=3, byrow=TRUE)
heatmap.2(AvgByQMatrix, cellnote=AvgByQMatrix, notecol="black",col=redblue(256),key=TRUE, dendrogram = "none", trace="none") 
```

如何更改块大小以匹配/缩放到 X 和 Y 向量值？此外，与缩放问题有些相关，知道为什么行顺序 (1, 3, 2) 会搞砸吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:58:30.093

我想这可能会对你有所帮助。以下方法对我有用（尽管我只知道如何使用该`image()`函数执行此操作：

```
#using image() function
x<-c(0, 5, 30, 80, 1000)
y<-c(150, 2000, 2010, 3000)
grd <- expand.grid(x=x, y=y)
z<-matrix(grd$x*2-grd$y*3, nrow=length(x), ncol=length(y), byrow=TRUE)
image(x=x, y=y, z=z, col=rainbow(20))

#another option with z-scale
source("image.scale.r") #http://menugget.blogspot.de/2011/08/adding-scale-to-image-plot.html
x11(width=5, height=4)
layout(matrix(1:2, nrow=1, ncol=2), widths=c(4,1), heights=4, respect=TRUE)
layout.show(2)
par(mar=c(4,4,1,1))
image(x=x, y=y, z=z, col=rainbow(20))
par(mar=c(4,0,1,4))
image.scale(z, col=rainbow(20), horiz=FALSE, xlab="", ylab="", xaxt="n", yaxt="n")
axis(4)
box() 
```

![在此处输入图像描述](../Images/a748fa43cc77dd0132b18b470f331e15.png)

# php - Jquery 尝试访问 php 数组并检查其中的内容

> ID：14301367
> 
> 赞同：1
> 
> 时间：2013-01-13T06:56:33.237
> 
> 标签：php, javascript, jquery

所以，我不确定我是否能做到这一点。如果没有，那么任何建议将不胜感激。如果这个问题很荒谬，请提前道歉......

我有一个在 php 中创建的数组，其中包含从数据库中填充的不同用户名。当用户提交表单时，我想使用 jQuery 检查提交的用户名是否已存在于已创建的数组中。我不太确定该怎么做。这就是我要去的地方。

PHP部分：

```
$existing_users = array();
$existing_users[] = $users; //this is reiterating in a while loop 
```

HTML部分：

```
<input type='text' name='user_name' id='user_name' /> 
```

jQuery部分：

```
function checkAllFieldsForm() {

    if (jQuery.inArray($('#user_name').val(),$existing_users) == -1) {
            alert('no way this worked');
    }
}; 
```

不确定我是否应该改用 $.each 或其他东西......似乎我需要通过 id 访问数组 $existing_users 但我没有给它一个。我需要给它一个部门ID吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T07:00:18.720

您要做的是在服务器端将其创建为 javascript 数组。即让 php 将其作为 javascript 数组输出（通过循环数组值并将它们发送到 javascript 数组中，或通过以 JSON 编码输出数组）。然后它将在浏览器端可供javascript使用，一切都很好。PHP 变量本身在浏览器端**不可**用，因为 PHP 不会在那里运行并且在服务器发送网页之前完成运行。

看看：[从 PHP 数组生成 JavaScript 数组](https://stackoverflow.com/questions/2109531/generating-a-javascript-array-from-a-php-array/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T07:01:14.523

您必须将数组打印到 javascript 源中，以便 javascript 可以读取它。

应该是这样的：

```
var client_side_existing_users = <?php echo json_encode($existing_users); ?>;

if (jQuery.inArray($('#user_name').val(), client_side_existing_users) == -1) {
        alert('no way this worked');
} 
```

（我称它为 client_side_existing_users 是为了非常清楚该变量存在于客户端/浏览器中，并且已经离开了服务器端世界）

请记住，用户将能够通过查看页面源来查看existing_users 的内容。如果有大量用户，这也可能使页面大小变大。我很想知道您为什么要这样做，因为可能有更好的方法。

# redirect - 为什么 302 重定向在 iframe 中不起作用？

> ID：14301372
> 
> 赞同：0
> 
> 时间：2013-01-13T06:57:15.133
> 
> 标签：redirect, iframe, facebook-canvas

在 canvas 的 facebook 文档页面[登录中](http://developers.facebook.com/docs/howtos/login/login-for-canvas/)，他们说：

> 因为您的应用程序是在 iframe 中加载的，所以返回 302 以将用户重定向到登录对话框将不成功。

302 重定向在 iframe 中不起作用的原因是什么？这是否意味着如果我的应用程序中有任何重定向，我应该按照他们的建议通过 javascript 进行，还是只使用这个？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:53:01.823

您的应用位于 facebook 网站上的 iframe 中。因此，如果他们允许该 iframe 打开另一个 facebook 页面，它看起来就像“facebook 中的 facebook”。

当用户在画布页面中加载您的应用时，Facebook 会`signed_request`通过 POST 向您发送该页面。[您可以在文档](https://developers.facebook.com/docs/howtos/login/signed-request/)中阅读有关如何处理的信息。

# android - ListView 滚动时动画视图不起作用

> ID：14301374
> 
> 赞同：4
> 
> 时间：2013-01-13T06:57:46.310
> 
> 标签：android, animation, view, ui-thread

我正在尝试实现 Google+ Android 应用程序在屏幕底部有一个 View 的效果，当用户向上滚动位于它后面的 ListView 时，View 会向下动画，离开屏幕。当用户向下滚动 ListView 时，即使是轻微的滚动，View 也会在屏幕上重新设置动画。

我已经设置了一个 GestureDetector，它为我的 ListView 上的滚动事件提供回调，并且当我滚动时回调是恒定的，所以我知道该部分正在工作。

在我的回调中，我试图使用`ViewPropertyAnimator`来为我的 y 值设置动画：

```
headerView.animate().yBy(distanceY).start(); 
```

在我停止滚动之前什么都不会发生。有什么方法可以通过 UI 线程上的 ListView 滚动来添加这个动画？我感觉到它在等待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-14T04:45:27.343

这个我也打过。我最终使用的技巧是替换

```
headerView.animate().yBy(distanceY).start(); 
```

和

```
headerView.setTranslationY(floatValue); 
```

希望这可以帮助！

# ruby-on-rails - Rails 搭建独特的集成环境

> ID：14301381
> 
> 赞同：1
> 
> 时间：2013-01-13T06:58:37.180
> 
> 标签：ruby-on-rails, environments

我正在尝试设置一个独特的环境（但实际上是一个新的开发环境，以便各种全局参数可以不同）。我遵循了很多示例来创建一个新环境（我使用我的开发配置作为起点）。

我的新环境是单服务器集成。

*   新环境.rb
*   向 initializers/additional.rb (elsif Rails.env.eql?("singleserverintegration")) 添加了新逻辑
*   向 database.yml 添加条目

但是每当我尝试设置环境时

```
RAILS_ENV="singleserverintegration" && rake db:drop && rake db:create && rake db:migrate 
```

我得到一个

```
rake aborted!
uninitialized constant Capybara 
```

为什么要提取测试配置（这是将 capybara 用作 rspec 的一部分）环境。怎么现在才抱怨？】

我错过了什么 - 对相对新手的指导表示赞赏......

谢谢

本

Additional.rb 的底线是

```
Capybara.server_port = 8066 
```

但是，当我设置开发环境时，这不会导致问题！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:07:37.893

尝试将您的新环境也添加到 capybara gem

前任：

```
group :test, :development, :singleserverintegration do
  gem 'capybara'
end 
```

# c# - 子类 HashSet 以便在另一个集合中使用时始终使用某个 IEqualityComparer

> ID：14301386
> 
> 赞同：2
> 
> 时间：2013-01-13T06:59:45.363
> 
> 标签：c#, .net, hashset, iequalitycomparer

我想子类化`HashSet<Point>`，以便每当我在另一个集合中使用它时它都`HashSet<Point>.CreateSetComparer()`用作一个。`IEqualityComparer`

基本上每次我这样做：

```
var myDict = new Dictionary<MySubclassOfHashSet, Char>(); 
```

我希望它自动被视为：

```
var myDict = new Dictionary<HashSet<Point>, Char>(HashSet<Point>.CreateSetComparer()); 
```

根据[这个问题](https://stackoverflow.com/questions/5910137/how-do-i-use-hashsett-as-a-dictionary-key)。

我目前手动完成此操作如下：

```
class MySubclassOfHashSet: HashSet<Point> {
    public override bool Equals(object obj) {
      //...
    }
    public override int GetHashCode() {
      //...
    }
} 
```

但这有点丑。有没有我想念的更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T04:02:53.197

```
 var myDict = new Dictionary<MySubclassOfHashSet<Point>, Char>();

    public sealed class MySubclassOfHashSet<T> : HashSet<T>, IEquatable<MySubclassOfHashSet<T>>
    {
        public override int GetHashCode()
        {
            return Unique.GetHashCode(this);
        }
        public bool Equals(MySubclassOfHashSet<T> other)
        {
            return Unique.Equals(this, other);
        }

        private static readonly IEqualityComparer<HashSet<T>> Unique = HashSet<T>.CreateSetComparer();
    } 
```

# dependency-injection - 为什么要使用依赖注入？

> ID：14301389
> 
> 赞同：583
> 
> 时间：2013-01-13T06:59:56.097
> 
> 标签：dependency-injection

我试图理解[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)（DI），但我又一次失败了。只是看起来很傻。我的代码从不乱七八糟；我几乎不写虚函数和接口（尽管我曾经做过一次），而且我的所有配置都使用 json.net 神奇地序列化为一个类（有时使用 XML 序列化程序）。

我不太明白它解决了什么问题。它看起来像是在说：“嗨。当你遇到这个函数时，返回一个这种类型的对象并使用这些参数/数据。”
但是...我为什么要使用它？请注意，我也从未需要使用`object`过，但我了解它的用途。

在构建使用 DI 的网站或桌面应用程序时，有哪些实际情况？我可以很容易地想出一些案例来解释为什么有人可能想在游戏中使用接口/虚拟函数，但是在非游戏代码中使用它是极其罕见的（非常罕见以至于我记不起一个实例）。

* * *

## 回答 #1

> 赞同：892
> 
> 时间：2013-01-13T07:21:33.747

首先，我想解释一下我为这个答案所做的假设。这并不总是正确的，但经常是：

> 接口是形容词；类是名词。

（其实也有名词的接口，但我想在这里概括一下。）

因此，例如，接口可能是诸如`IDisposable`、`IEnumerable`或之类的东西`IPrintable`。一个类是这些接口中的一个或多个的实际实现：`List`或者`Map`两者都可以是`IEnumerable`.

要明白这一点：您的课程通常相互依赖。例如，您可以有一个`Database`访问您的数据库的类（哈哈，惊喜！;-)），但您还希望该类记录有关访问数据库的日志。假设您有另一个类`Logger`，然后`Database`依赖于`Logger`.

到现在为止还挺好。

您可以`Database`使用以下行在您的类中对此依赖项进行建模：

```
var logger = new Logger(); 
```

一切都很好。当你意识到你需要一堆记录器时，这很好：有时你想记录到控制台，有时记录到文件系统，有时使用 TCP/IP 和远程记录服务器，等等......

当然，您*不想*更改所有代码（同时您拥有大量代码）并替换所有行

```
var logger = new Logger(); 
```

经过：

```
var logger = new TcpLogger(); 
```

首先，这不好玩。其次，这是容易出错的。第三，对于受过训练的猴子来说，这是愚蠢的、重复的工作。所以你会怎么做？

显然，引入一个`ICanLog`由所有各种记录器实现的接口（或类似接口）是一个非常好的主意。因此，代码中的第 1 步是您执行以下操作：

```
ICanLog logger = new Logger(); 
```

现在类型推断不再改变类型，你总是有一个单一的接口来开发。下一步是你不想`new Logger()`一遍又一遍。因此，您将创建新实例的可靠性放在一个单一的中央工厂类中，您将获得如下代码：

```
ICanLog logger = LoggerFactory.Create(); 
```

工厂自己决定创建什么样的记录器。您的代码不再关心，如果您想更改正在使用的记录器的类型，您只需更改*一次*：在工厂内部。

现在，当然，您可以概括该工厂，并使其适用于任何类型：

```
ICanLog logger = TypeFactory.Create<ICanLog>(); 
```

当请求特定接口类型时，此 TypeFactory 需要配置数据来实例化实际类，因此您需要一个映射。当然，您可以在代码中执行此映射，但类型更改意味着重新编译。但是您也可以将此映射放在 XML 文件中，例如。这使您即使在编译时间（！）之后也可以更改实际使用的类，这意味着动态地，无需重新编译！

给你一个有用的例子：想想一个不能正常登录的软件，但是当你的客户因为有问题而打电话寻求帮助时，你发送给他的只是一个更新的 XML 配置文件，现在他有了启用日志记录，您的支持人员可以使用日志文件来帮助您的客户。

现在，当您稍微替换名称时，您最终会得到一个简单的*Service Locator实现，这是**控制反转*的两种模式之一（因为您反转了对谁决定要实例化哪个确切类的控制）。

总而言之，这减少了代码中的依赖关系，但现在所有代码都依赖于中央单一服务定位器。

*依赖注入*现在是这一行的下一步：只需摆脱对服务定位器的这个单一依赖：不再是各种类向服务定位器询问特定接口的实现，您 - 再一次 - 恢复对谁实例化什么的控制.

通过依赖注入，您的`Database`类现在有一个需要类型参数的构造函数`ICanLog`：

```
public Database(ICanLog logger) { ... } 
```

现在你的数据库总是有一个记录器可以使用，但它不再知道这个记录器来自哪里。

这就是 DI 框架发挥作用的地方：您再次配置映射，然后要求 DI 框架为您实例化您的应用程序。由于`Application`该类需要一个`ICanPersistData`实现，`Database`因此注入了一个实例——但为此它必须首先创建一个为`ICanLog`. 等等 ...

所以，长话短说：依赖注入是删除代码中依赖的两种方法之一。它对于编译时之后的配置更改非常有用，并且对于单元测试来说是一件好事（因为它使得注入存根和/或模拟变得非常容易）。

在实践中，有些事情没有服务定位器是无法做到的（例如，如果您事先不知道特定接口需要多少个实例：DI 框架总是为每个参数注入一个实例，但您可以调用一个循环内的服务定位器，当然），因此大多数情况下每个 DI 框架也提供一个服务定位器。

但基本上，就是这样。

PS：我在这里描述的是一种称为*构造函数注入*的技术，还有*属性注入*，其中不是构造函数参数，而是用于定义和解决依赖关系的属性。将属性注入视为可选依赖项，将构造函数注入视为强制依赖项。但是对此的讨论超出了这个问题的范围。

* * *

## 回答 #2

> 赞同：548
> 
> 时间：2013-01-13T08:22:29.607

*我认为很多时候人们对依赖注入*和依赖注入*框架*（或通常称为*容器*）之间的区别感到困惑。

依赖注入是一个非常简单的概念。而不是这段代码：

```
public class A {
  private B b;

  public A() {
    this.b = new B(); // A *depends on* B
  }

  public void DoSomeStuff() {
    // Do something with B here
  }
}

public static void Main(string[] args) {
  A a = new A();
  a.DoSomeStuff();
} 
```

你写这样的代码：

```
public class A {
  private B b;

  public A(B b) { // A now takes its dependencies as arguments
    this.b = b; // look ma, no "new"!
  }

  public void DoSomeStuff() {
    // Do something with B here
  }
}

public static void Main(string[] args) {
  B b = new B(); // B is constructed here instead
  A a = new A(b);
  a.DoSomeStuff();
} 
```

**就是这样。**严重地。这为您提供了很多优势。两个重要的功能是从中心位置（`Main()`函数）控制功能而不是将其分散到整个程序中的能力，以及更轻松地单独测试每个类的能力（因为您可以将模拟或其他伪造的对象传递给它的构造函数）有实际价值）。

当然，缺点是您现在拥有一个知道程序使用的所有类的宏功能。这就是 DI 框架可以提供帮助的地方。但是，如果您无法理解为什么这种方法很有价值，我建议您首先从手动依赖注入开始，这样您就可以更好地了解现有的各种框架可以为您做什么。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2013-01-13T12:20:09.370

正如其他答案所述，依赖注入是一种在使用它的类之外创建依赖项的方法。您从外部注入它们，并从课堂内部控制它们的创建。这也是为什么依赖注入是[控制反转](https://en.wikipedia.org/wiki/Inversion_of_control)（IoC）原则的一种实现。

IoC 是原则，DI 是模式。就我的经验而言，您可能“需要多个记录器”的原因实际上从未遇到过，但实际原因是，无论何时测试某些东西，您都确实需要它。一个例子：

**我的特点：**

> 当我查看报价时，我想标记我已自动查看它，这样我就不会忘记这样做。

你可以这样测试：

```
[Test]
public void ShouldUpdateTimeStamp
{
    // Arrange
    var formdata = { . . . }

    // System under Test
    var weasel = new OfferWeasel();

    // Act
    var offer = weasel.Create(formdata)

    // Assert
    offer.LastUpdated.Should().Be(new DateTime(2013,01,13,13,01,0,0));
} 
```

所以在某个地方`OfferWeasel`，它会为你构建一个这样的报价对象：

```
public class OfferWeasel
{
    public Offer Create(Formdata formdata)
    {
        var offer = new Offer();
        offer.LastUpdated = DateTime.Now;
        return offer;
    }
} 
```

这里的问题是，这个测试很可能总是失败，因为设置的日期与断言的日期不同，即使你只是`DateTime.Now`输入测试代码，它也可能会关闭几毫秒，因此会总是失败。现在更好的解决方案是为此创建一个界面，它允许您控制将设置的时间：

```
public interface IGotTheTime
{
    DateTime Now {get;}
}

public class CannedTime : IGotTheTime
{
    public DateTime Now {get; set;}
}

public class ActualTime : IGotTheTime
{
    public DateTime Now {get { return DateTime.Now; }}
}

public class OfferWeasel
{
    private readonly IGotTheTime _time;

    public OfferWeasel(IGotTheTime time)
    {
        _time = time;
    }

    public Offer Create(Formdata formdata)
    {
        var offer = new Offer();
        offer.LastUpdated = _time.Now;
        return offer;
    }
} 
```

接口是抽象的。一个是真实的东西，另一个允许你在需要的地方伪造一些时间。然后可以像这样更改测试：

```
[Test]
public void ShouldUpdateTimeStamp
{
    // Arrange
    var date = new DateTime(2013, 01, 13, 13, 01, 0, 0);
    var formdata = { . . . }

    var time = new CannedTime { Now = date };

    // System under test
    var weasel= new OfferWeasel(time);

    // Act
    var offer = weasel.Create(formdata)

    // Assert
    offer.LastUpdated.Should().Be(date);
} 
```

像这样，您通过注入依赖项（获取当前时间）应用了“控制反转”原则。这样做的主要原因是为了更容易进行隔离单元测试，还有其他方法可以做到这一点。例如，此处的接口和类是不必要的，因为在 C# 中，函数可以作为变量传递，因此您可以使用 a 代替接口`Func<DateTime>`来实现相同的目的。或者，如果您采用动态方法，您只需传递任何具有等效方法（[鸭子类型](https://en.wikipedia.org/wiki/Duck_typing)）的对象，您根本不需要接口。

您几乎不需要一个以上的记录器。尽管如此，依赖注入对于 Java 或 C# 等静态类型代码来说是必不可少的。

**并且...** 还应该注意的是，一个对象只有在其所有依赖项都可用的情况下才能在运行时正确地实现其目的，因此设置属性注入并没有太大用处。在我看来，当构造函数被调用时，所有的依赖都应该得到满足，所以构造函数注入是可以使用的。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-01-13T14:01:14.187

我认为经典的答案是创建一个更加解耦的应用程序，它不知道在运行时将使用哪个实现。

例如，我们是一家中央支付提供商，与世界各地的许多支付提供商合作。但是，当提出请求时，我不知道要调用哪个支付处理器。我可以用大量的 switch case 编写一个类，例如：

```
class PaymentProcessor{

    private String type;

    public PaymentProcessor(String type){
        this.type = type;
    }

    public void authorize(){
        if (type.equals(Consts.PAYPAL)){
            // Do this;
        }
        else if(type.equals(Consts.OTHER_PROCESSOR)){
            // Do that;
        }
    }
} 
```

现在想象一下，现在您需要将所有这些代码维护在一个类中，因为它没有正确解耦，您可以想象对于您将支持的每个新处理器，您需要创建一个新的 if // switch case每种方法，这只会变得更加复杂，但是，通过使用依赖注入（或控制反转-有时称为，这意味着控制程序运行的人仅在运行时才知道，而不是复杂性），您可以实现一些目标非常整洁和可维护。

```
class PaypalProcessor implements PaymentProcessor{

    public void authorize(){
        // Do PayPal authorization
    }
}

class OtherProcessor implements PaymentProcessor{

    public void authorize(){
        // Do other processor authorization
    }
}

class PaymentFactory{

    public static PaymentProcessor create(String type){

        switch(type){
            case Consts.PAYPAL;
                return new PaypalProcessor();

            case Consts.OTHER_PROCESSOR;
                return new OtherProcessor();
        }
    }
}

interface PaymentProcessor{
    void authorize();
} 
```

** 代码不会编译，我知道 :)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-01-13T09:46:12.657

使用 DI 的主要原因是您希望将实现知识的责任放在知识存在的地方。DI 的思想非常符合封装和接口设计。如果前端向后端询问一些数据，那么后端如何解决这个问题对于前端来说并不重要。这取决于请求处理程序。

这在 OOP 中已经很常见了。多次创建代码片段，例如：

```
I_Dosomething x = new Impl_Dosomething(); 
```

缺点是实现类仍然是硬编码的，因此前端知道使用哪个实现。DI 将接口设计更进一步，前端唯一需要知道的就是接口的知识。介于 DYI 和 DI 之间的是服务定位器模式，因为前端必须提供一个键（存在于服务定位器的注册表中）才能解决其请求。服务定位器示例：

```
I_Dosomething x = ServiceLocator.returnDoing(String pKey); 
```

DI 示例：

```
I_Dosomething x = DIContainer.returnThat(); 
```

DI 的要求之一是容器必须能够找出哪个类是哪个接口的实现。因此，DI 容器是否需要强类型设计，并且每个接口同时只需要一个实现。如果您同时需要更多接口的实现（如计算器），则需要服务定位器或工厂设计模式。

D(b)I：依赖注入和接口设计。不过，这个限制并不是一个很大的实际问题。使用 D(b)I 的好处是它服务于客户端和提供者之间的通信。界面是对一个对象或一组行为的看法。后者在这里至关重要。

我更喜欢在编码中与 D(b)I 一起管理服务合同。他们应该一起去。在我看来，使用 D(b)I 作为技术解决方案而无需对服务合同进行组织管理并不是很有好处，因为 DI 只是一个额外的封装层。但是，当您可以将它与组织管理一起使用时，您就可以真正利用 D(b)I 提供的组织原则。从长远来看，它可以帮助您在测试、版本控制和替代方案开发等主题上与客户和其他技术部门进行沟通。当您在硬编码类中具有隐式接口时，与使用 D(b)I 使其显式时相比，随着时间的推移，它的可通信性会大大降低。这一切都归结为维护，这是随着时间的推移而不是一次。:-)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-08-31T16:21:08.280

坦率地说，我相信人们使用这些依赖注入库/框架是因为他们只知道如何在运行时做事，而不是加载时间。所有这些疯狂的机器都可以通过设置您的`CLASSPATH`环境变量（或其他语言等效项，如`PYTHONPATH`, `LD_LIBRARY_PATH`）来指向特定类的替代实现（**都具有相同的名称）。**因此，在接受的答案中，您只需留下您的代码

`var logger = new Logger() //sane, simple code`

并且适当的记录器将被实例化，因为 JVM（或您拥有的任何其他运行时或 .so 加载器）将从通过上述环境变量配置的类中获取它。

不需要让所有东西都成为接口，不需要疯狂地产生破碎的对象来注入东西，不需要疯狂的构造函数将每一块内部机器暴露给世界。只需使用您正在使用的任何语言的本机功能，而不是想出在任何其他项目中都不起作用的方言。

PS：这也适用于测试/模拟。您可以很好地设置您的环境以在加载时加载适当的模拟类，并跳过模拟框架的疯狂。

# python - 用于获取 RSS 的 Django cron

> ID：14301390
> 
> 赞同：2
> 
> 时间：2013-01-13T06:59:59.573
> 
> 标签：python, django, rss, cron

我是 Django、Python 和 Web 开发的新手，我正在尝试将 RSS 阅读器作为一个学习项目。现在，我需要帮助来实施定期检查所有频道以获取新内容的部分（比如每 15 分钟一次）。我需要一个 cron 工作来做这件事，而自定义管理命令是解决这个问题的方法，我知道很多。但我正在努力弄清楚如何实现它。[这个](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)链接是大多数人在 SO 上推荐的，但我觉得它没有多大帮助，例如，我没有解释 X 时间部分的调度。

有人可以通过代码解释如何每 15 分钟检查一次新内容的频道。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T07:19:52.003

“每 15 分钟”位实际上是最简单的。一旦你编写了检查*一次*的命令，你就可以设置 cron 每 15 分钟执行一次命令。

[本文](http://net.tutsplus.com/tutorials/other/scheduling-tasks-with-cron-jobs/)简要概述了 cron 以及如何设置它。

运行 cron 时要记住的事项：

1.  Cron 进程在它们自己的 shell（通常是`/bin/sh`）下运行，因此无法访问您的所有自定义项（例如您添加到`PATH`.
2.  这也意味着您需要提供您需要运行的任何可执行文件的*完整路径。*例如，不要键入`python`，而是`/usr/bin/python`，或者任何适用于您的系统的内容。
3.  cron 任务的结果通常会通过电子邮件发送到您的系统用户帐户。您可以通过安装邮件阅读器来查看这些消息。[`mutt`](http://www.mutt.org)是我最喜欢的控制台电子邮件阅读器。`MAILTO`如果要将 cron 结果重定向到电子邮件，可以在 cron 文件中设置变量。
4.  另外，请记住，像命令这样的常见[bashism](http://mywiki.wooledge.org/Bashism)`source`在 cron 中不起作用。

编写好管理命令后；只需将其添加到您自己的 crontab 文件中。该文件列出了系统范围的 cron 进程将执行的所有命令。

要编辑您的 crontab 文件，请`crontab -e`从控制台键入。

文件中不是注释的每一行都是一个条目。条目以频率开头，然后是要运行的命令。这是一般格式：

```
*    *    *    *    *  command to be executed
┬    ┬    ┬    ┬    ┬
│    │    │    │    │
│    │    │    │    │
│    │    │    │    └───── day of week (0 - 7) (0 or 7 are Sunday, or use names)
│    │    │    └────────── month (1 - 12)
│    │    └─────────────── day of month (1 - 31)
│    └──────────────────── hour (0 - 23)
└───────────────────────── min (0 - 59) 
```

`*`任何位置的星号都表示“全部”。

每 15 分钟运行一次：

```
0/15**** /usr/bin/python /home/myuser/project/manage.py foo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:32:01.993

只是为了将来对此的参考，频率参数用空格分隔（也许它们在帖子中丢失了）。尝试各种组合的好地方是 www.dataphyx.com/cronsandbox/。

# arrays - AS3：错误 #1065：未定义变量

> ID：14301392
> 
> 赞同：0
> 
> 时间：2013-01-13T07:00:31.847
> 
> 标签：arrays, actionscript-3, external, runtime-error

使用`getDefinitionByName`我一直收到错误说它没有定义（如标题所示）。我正在使用的特定代码是

`var tileID:String = String(getDefinitionByName("evt.target.data."+mapData[i][j]))` mapData 已经在每个位置填充了一个字符。计划是我可以使用任何 mapData 的值作为将单个字符转换为图块的完整链接名称的变量名称。这些属性来自另一个为变量设置的外部 .txt 文件（这是代码行链接到的外部文件）。

外部文件中的变量类似于`&N=exampleTile`.

因此，当涉及到设置时，`tileID`它最终应该是`exampleTile`. （假设`mapData[i][j] = "N"`）。

但事实并非如此。我读过其他解决方案，说文件可能没有加载或任何东西，但我无法理解或应用任何这些修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:57:59.487

这没有任何意义。`getDefinitionByName`用于检索`Class`某种类型的实例 -`Class`命名类似于传递的字符串。并且定义将始终以`"evt.target.data."`.

你有没有调试过它？

```
function any_handler(i:int, j:int):void {
  const suffix:String = mapData[i][j],
        qualifiedName:String = "evt.target.data." + suffix;

  // this is wrong
  const titleID:String = String(getDefinitionByName(qualifiedName));
} 
```

您确实应该查看调试器，以了解您正在创建的字符串的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T15:22:25.570

正如 Florian 指出的那样，`getDefinitionByName`它专门用于获取 Class 参考。例如，像“flash.net.URLLoader”这样的东西会给你一个 URLLoader 类的引用。它不用于通过名称获取常规变量（因此即使“N”是 的属性，“evt.target.data.N”也不会返回任何内容`data`）。

听起来你`evt.target.data`是一个沿着“ *A=tileA&B=tileB&C=tileC* ”行的长字符串。如果是这样，您需要先将该字符串解析为单独的变量。您应该能够使用具有该数据格式的 URLVariables (flash.net.URLVariables)，然后您可以使用 [ ] 数组访问运算符读取解析的变量：`urlVariablesObject["variableName"]`。所以你可能会做这样的事情：

```
import flash.events.Event;
import flash.net.URLVariables;
import flash.net.URLLoader;
import flash.net.URLRequest;

var loader:URLLoader = new URLLoader();
var parsedData:URLVariables;
var mapData:Array = [["A", "B", "C"], ["D", "E", "F"]];

loader.addEventListener(Event.COMPLETE, externalFileLoaded);
loader.load(new URLRequest("externalFile.txt"));
// externalFile.txt contains "A=tileA&B=tileB&C=tileC&D=tileD&E=tileE&F=tileF".

function externalFileLoaded(evt:Event):void {

    parsedData = new URLVariables(evt.target.data);

    var tileID:String = readMap(0, 1);

    trace(tileID); // "tileB".

}

function readMap(i:uint, j:uint):String {

    var mapValue:String = mapData[i] [j];
    var tileID:String = parsedData[mapValue];

    return tileID;

} 
```

# c - execvp 如何运行命令？

> ID：14301407
> 
> 赞同：21
> 
> 时间：2013-01-13T07:03:21.663
> 
> 标签：c, file, unix

我知道`execvp`可以用来执行简单的命令如下：

```
char* arg[] = {"ls", "-l", NULL};
execvp(arg[0],arg); 
```

我想知道我跑步时这里发生了什么`execvp`。在手册页中，它说`execvp`用新的图像替换过程图像的图像。但是在这里我正在运行一个命令而不是可执行文件。

具体来说，假设有一个命令特别需要输入，例如 cat。如果我有一个包含 cat 预期文件名的文本文件 text.txt 并且我将 stdin 重定向到文件的文件流，则`execle("cat","cat",NULL)`or的输出`execvp("cat", arg)`（显然是 arg 存储`"cat"`和的位置`NULL`）会导致控制台中的输出为`cat /filename`将？我的直觉是我必须阅读文件并可能解析它以将参数存储在 arg 中。不过我想确定一下。

提前致谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-13T07:56:09.563

以下是通话中发生的情况`execvp`：

1.  如果适用，您的 libc 实现会在 中搜索`PATH`要执行的文件。大多数（如果不是全部）类 UNIX 系统中的命令都是可执行的。如果不是，会发生什么？尝试一下。看看[glibc 是如何做到](http://sourceware.org/git/?p=glibc.git;a=blob;f=posix/execvpe.c;h=588e7a71b1a5b507c7628b4ec7a467f4ba78b1d3;hb=HEAD)的。
2.  通常，如果找到可执行文件，将调用`execve`。部分`execve`可以在 libc 中实现，也可以是系统调用（如在 Linux 中）。
3.  Linux 通过为程序分配内存、打开程序、调度执行、初始化内存结构、根据调用提供的参数设置其参数和环境`execvp`、找到适合加载二进制文件的处理程序以及设置当前任务来准备程序（`execvp`调用者）没有执行。你可以[在这里](http://lxr.free-electrons.com/source/fs/exec.c#L1478)找到它的实现。

上述所有步骤都符合相关[手册页](http://linux.die.net/man/3/execvp)中描述的 POSIX 设置的要求。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-13T23:10:17.873

关于你的问题：

> 在手册页中，它说`execvp`用新的图像替换过程图像的图像。但是在这里我正在运行一个命令而不是可执行文件。

很久以前，shell 非常有限，几乎所有 UNIX 命令都是独立的可执行文件。现在，主要是出于速度目的，一些 UNIX 命令子集在 shell 本身内部实现，这些命令称为`builtins`. 您可以通过命令检查在您的 shell 中实现的任何命令是否是内置的`type`：

```
λ ~/ type echo
echo is a shell builtin 
```

（带有描述的内置函数的完整列表可以在`man`您的 shell 页面中找到，例如`man bash-builtins`或`man builtin`。）

但是大多数命令仍然有它们的可执行对应项：

```
λ ~/ whereis echo
/bin/echo 
```

因此，在您运行时的特定情况下：

```
char* arg[] = {"ls", "-l", NULL};
execvp(arg[0],arg); 
```

您实际上是用 (最有可能) 的地址空间替换当前进程的地址空间`/bin/ls`。

* * *

> 我的直觉是我必须阅读文件并可能解析它以将参数存储在 arg 中。

确实你有。但是您也可以为此使用一些内核函数，即“shebang”：
不要将文件名放在单独的文件中，而是添加所谓的 shebang 作为您想要 cat 的文件的第一行：

```
#!/bin/cat 
```

并添加`chmod +x`到它。然后您可以将其作为可执行文件运行（通过任何`exec`函数或 shell）：

```
λ ~/tmp/ printf '#!/bin/cat\nTEST\n' > cat_me
λ ~/tmp/ chmod +x cat_me
λ ~/tmp/ ./cat_me 
#!/bin/cat
TEST 
```

当然，它有一个`shebang`用文件打印自身的缺点，但在内核中执行它仍然很有趣=）

顺便提一句。您描述的问题很常见，以至于有一个称为特殊可执行文件`xargs`（在非常简化的解释中）在通过标准输入传递的参数列表上执行给定程序。欲了解更多信息，请咨询`man xargs`。

* * *

为了便于记忆`exec`-family，我经常使用下表：

```
 Figure 8.14\. Differences among the six exec functions
+----------+----------+----------+----------+--------+---------+--------+
| Function | pathname | filename | agr list | argv[] | environ | envp[] |
+----------+----------+----------+----------+--------+---------+--------+
|  execl   |    *     |          |     *    |        |    *    |        |
+----------+----------+----------+----------+--------+---------+--------+
|  execlp  |          |    *     |     *    |        |    *    |        |
+----------+----------+----------+----------+--------+---------+--------+
|  execle  |    *     |          |     *    |        |         |   *    |
+----------+----------+----------+----------+--------+---------+--------+
|  execv   |    *     |          |          |    *   |    *    |        |
+----------+----------+----------+----------+--------+---------+--------+
|  execvp  |          |    *     |          |    *   |    *    |        |
+----------+----------+----------+----------+--------+---------+--------+
|  execve  |    *     |          |          |    *   |         |   *    |
+----------+----------+----------+----------+--------+---------+--------+
|  letter  |          |    p     |     l    |    v   |         |   e    |
+----------+----------+----------+----------+--------+---------+--------+ 
```

所以在你的情况下`execvp`需要文件名，argv（**v**）和environ（**e**）。然后它尝试通过将`filename`（在你的情况下`cat`）附加到每个路径组件中来“猜测”路径名（又名完整路径），`PATH`直到找到带有可执行文件的路径`filename`。

在[W. Richard Stevens 和 Stephen A. Rago](https://rads.stackoverflow.com/amzn/click/com/0201433079) aka APUE2的 UNIX 环境中的高级编程（第 2 版）`exec`中可以找到更多关于 . 如果您对 UNIX 内部结构感兴趣，您可能应该阅读它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T07:21:52.257

“ls”不仅仅是一个命令，它实际上是一个程序（大多数命令都是）。当你像这样运行 execvp 时，它会破坏你的整个程序，它的内存，它的堆栈，它的堆等等......从概念上“清除它”并将它交给“ls”，这样它就可以将它用于自己的堆栈，堆等

简而言之，execvp 将破坏您的程序，并用另一个程序替换它，在本例中为“ls”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T08:05:07.327

> 我的直觉是我必须阅读文件并可能解析它以将参数存储在 arg 中。不过我想确定一下。

你的直觉在很大程度上是正确的。`cat`您作为示例使用的实用程序有两个单独的代码路径：

*   如果有指定为参数的文件名，它将依次打开并读取每个文件名。
*   如果没有指定文件名，它将从标准输入中读取。

此行为是在`cat`实用程序中专门实现的——它没有在任何较低级别实现。特别是，它绝对不是`exec`系统调用的一部分。系统`exec`调用根本不“查看”参数；他们只是将它们直接传递给 中的新流程`argv`，然后该流程会以它认为合适的方式处理它们。

# graphics - 在 XNA 中更改 rect 目标

> ID：14301408
> 
> 赞同：0
> 
> 时间：2013-01-13T07:03:32.133
> 
> 标签：graphics, xna

大家好，我是新手，我对 XNA 矩形感到困惑

我画了一些东西并旋转它，但矩形目标仍然相同，如何更改目标矩形，以便我可以使用 intersect 方法检查碰撞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:19:21.833

您不能旋转矩形。

相反，您想要做的是一个边界框。它不会为您提供像素完美碰撞，但它会为您提供快速相交检查，可以搭配更精细的碰撞检查。

请参阅有关如何创建边界框的问题： [https ://gamedev.stackexchange.com/questions/2438/how-do-i-create-bounding-boxes-with-xna-4-0](https://gamedev.stackexchange.com/questions/2438/how-do-i-create-bounding-boxes-with-xna-4-0)

# html - 同一页面中的 css 覆盖

> ID：14301410
> 
> 赞同：2
> 
> 时间：2013-01-13T07:03:44.347
> 
> 标签：html, css, cross-browser

我试图找到答案，但什么都没有......

我有一个小型应用程序，可以加载到`div`标签内的其他网站。这`div`有一个特定的 id，比如 -> "myAppHere"

现在，所有的 html 都在 this 里面`div`，但是我可以看到我的元素受到每个站点自己的 css 规则的影响。

有没有办法取消所有其他网站`css`规则？

就像是：

```
#myAppHere *{
    padding: 0;
    margin: 0;
    etc....
} 
```

因为上面的示例代码不能很好地工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T08:50:54.817

您不能简单地添加：

```
 #myAppHere * {
             ...
 } 
```

因为一般规则被更具体的规则覆盖。您没有说应用程序以何种方式加载到该 div 中（是内框架、纯 HTML 等），因此很难找到解决方案。

您可以做的（假设它只是添加到您的`#myAppHere`元素中的额外 HTML）是检查为每个元素设置的 CSS 样式（使用例如 Firebug）并在您的 CSS 文件中编写您的 on 规则，这些规则更具体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T07:08:27.303

这是你在那里的一个可怕的要求。

您可以尝试将 !important 添加到 css 规则中，如下所示：

```
#myAppHere *{
    padding: 0 !important;
    margin: 0 !important;
    etc....
} 
```

但即使这样也不会覆盖一些在规则中具有 !important 样式属性的元素，例如在发生这种情况时：

```
<div id="myAppHere">
    <div style="margin: 20px !important;">Hello</div>
</div> 
```

您也许可以使用 javascript 进入其他网站的源代码，并删除所有样式和类属性……这可能是唯一可以确定的方法。像这样的东西，如果你在你的 javascript 中使用 jquery：

```
$("#myAppHere *").removeAttr("style");
$("#myAppHere *").removeAttr("class"); 
```

不过要小心删除这些类属性，因为这意味着如果你想自己设置样式，你将没有任何类可以使用。不过，您可以在之后使用更多的 javascript 添加新类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T08:55:46.840

如果您在一个元素中插入一个完整的 HTML 文档`div`，结果会以一种严重混乱的方式包含无效标记。特别是，如果内部文档有任何`style`元素，实际上将被视为应用于整个页面。

解决方案是停止这样做（并首先考虑您是否可以合法地做这些事情——这通常会构成侵犯版权）。从技术上讲，您需要删除或重写嵌入文档的大部分内容（例如，没有简单的方法来处理其中的 CSS 代码或从中链接），或者使用`iframe`元素（或`frame`或`object`元素）将页面嵌入为“自治”（因此它将显示在独立的子窗口中）。

# php - 如何在php中添加社交关注按钮

> ID：14301412
> 
> 赞同：0
> 
> 时间：2013-01-13T07:04:00.297
> 
> 标签：php, social-networking, linkedin, google-plus, twitter-follow

我正在开发一个在 twitter、google+ 和linkedin 上有社交关注的网络。

我在网上搜索，但我没有运气。

有没有关于如何使用 php 获得关注链接和关注者数量的示例？例如：

```
my@twitter.com > 100 followers
my@googleplus > 100 followers
my@linkedin >200 follower 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T07:10:24.177

对于 LinkedIn：http: [//developer.linkedin.com/plugins/follow-company](http://developer.linkedin.com/plugins/follow-company)

对于 Twitter：[https ://dev.twitter.com/docs/follow-button](https://dev.twitter.com/docs/follow-button)

对于 Google+：[https ://developers.google.com/+/plugins/badge/](https://developers.google.com/+/plugins/badge/)

你应该知道的一切都在那里。它应该是纯 HTML 而不是正在使用的 PHP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:12:14.663

为什么不使用linkedin 和Google+ 提供的按钮？

请检查[https://developers.google.com/+/plugins/+1button/](https://developers.google.com/+/plugins/+1button/)和[http://developer.linkedin.com/plugins](http://developer.linkedin.com/plugins)

# rabbitmq - 尝试安装和使用rabbitmq服务器

> ID：14301413
> 
> 赞同：4
> 
> 时间：2013-01-13T07:04:08.200
> 
> 标签：rabbitmq

我通过使用 `brew update`和安装`brew install rabbitmq`。然后尝试停止服务器并重新启动它（我之前尝试通过下载源来安装）。

`rabbitmqctl stop`但我得到`停止和停止节点rabbit@localhost ...

```
Error: unable to connect to node rabbit@localhost: nodedown

DIAGNOSTICS
===========

nodes in question: [rabbit@localhost]

hosts, their running nodes and ports:
- localhost: [{rabbit,61707},{rabbitmqctl33002,62384}]

current node details:
- node name: 'rabbitmqctl33002@Dev-MacBook-Air'
- home dir: /Users/ohad
- cookie hash: aeUlHJghkW6Yr7EMVbRJTg==` 
```

我认为这意味着没有进程，所以我尝试重新开始：

```
rabbitmq-server 
```

我得到

```
ERROR: node with name "rabbit" already running on "localhost"

DIAGNOSTICS
===========

nodes in question: [rabbit@localhost]

hosts, their running nodes and ports:
- localhost: [{rabbit,61707},{rabbitmqprelaunch33047,62398}]

current node details:
- node name: 'rabbitmqprelaunch33047@Dev-MacBook-Air'
- home dir: /Users/ohad
- cookie hash: aeUlHJghkW6Yr7EMVbRJTg== 
```

# php - 存储和搜索申请人简历或简历文件的最佳实践

> ID：14301414
> 
> 赞同：0
> 
> 时间：2013-01-13T07:04:19.013
> 
> 标签：php, mysql, windows

我正在开始一家招聘咨询公司，迟早我们会处理许多申请人的**简历**或**简历（履历）**。我正在构建一个简单的应用程序，`PHP`并且`MySQL`（目标服务器是 windows）让申请人在我们的网站上上传**简历。**目前我会将上传文件限制为 MS Word docs 和 MAX size `500 KB`。

现在我的问题是关于将对这些文件执行的两个操作。

1.  在这些文件中搜索特定关键词的内容，以找到与简历匹配的相关技能。

2.  然后通过下载文件链接或将简历通过电子邮件发送给我们的雇主，将这些文件提供给我们的雇主。

直奔问题

1.  我是否将实际文件存储在文件系统上并对其执行 Windows 搜索？

2.  或者我只将内容插入 MySQL blob/cblob，对表执行搜索，然后将表本身的内容提供给雇主。

3.  或者我将文件存储在文件系统上，并将内容插入 mysql blob。在 mysql 中搜索内容并从文件系统提供文件。

我认为一旦简历数量达到数千，Windows搜索会非常慢，但我在互联网上搜索发现将大量文件内容存储在数据库中是不可取的。

因此，我只需要您对我应该采用的方法提出建议，因为假设在某个时间点我们将存储和检索数千份简历。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:00:01.420

您想要的是文档的全文索引。这往往是例如 Solr 的工作（请参阅 StackOverflow 上的交叉引用：[如何在 Solr 中索引文档](https://stackoverflow.com/questions/2802000/how-do-i-index-documents-in-solr)）。数据库将保留对磁盘上文件的引用。您不应尝试使用 row_format=dynamic 将 blob 数据保存到不在梭子鱼格式上运行的 innodb 表。有关 innodb主题中的[Blob 存储](http://www.mysqlperformanceblog.com/2010/02/09/blob-storage-in-innodb/)的更多详细信息，请参阅 MySQL 性能博客。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:06:28.977

一种选择是混合：将简历索引到数据库中，但将文件系统路径存储为位置。当您在数据库中获得成功并想要检索简历时，请通过数据库中指示的路径将其从文件系统中取出。

# backbone.js - parseJSON(response) 为空

> ID：14301418
> 
> 赞同：1
> 
> 时间：2013-01-13T07:04:53.710
> 
> 标签：backbone.js

我有一个成功发出服务器请求的主干模型。回调是使用主干的触发方法来触发关联视图中的事件，并将服务器请求中解析的 json 响应作为触发方法的第二个参数传递，如主干文档中所述。在视图中，事件触发了render方法，但是视图中的响应对象为null。它抛出这个错误

```
Uncaught TypeError: Cannot read property 'word' of null 
```

谁能看到我可能做错了什么？

**来自模型的服务器请求**

```
 new: function() {
      var _this = this;
       console.log("new function of model"); 

      $.ajax({
        url: "/gamestart",
        type: "GET",
        success: function(response) {
          console.log(response);
          var json = $.parseJSON(response);

          _this.set({lost: false});
          _this.set({win: false});
          _this.trigger("gameStartedEvent", json);
        }
      })
    }, 
```

**视图的初始化方法中的事件，它触发渲染方法来渲染响应**

```
this.model.on("gameStartedEvent", this.render, this); 
```

**响应为 null 的渲染方法**

```
render: function(response) {
      $("#hint").show();
      console.log(response); 
      var html = this.template({characters: response.word});
      this.el.hide();
      this.el.html(html).show();
    }, 
```

请注意，如果重要，视图正在使用模型实例化

```
var word_view = new WordView({model: game}) 
```

**更新**

实际上错误发生在这里。响应成功返回，但我解析不正确。当我检查控制台时，变量 json 为空。你能看出我做错了什么吗？

```
 var json = $.parseJSON(response);
 console.log(json) 
```

**回复**

```
Object {word: Array[6]}
word: Array[6]
__proto__: Object 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:28:14.823

实际上不需要在响应对象上调用 parseJSON。我可以直接从响应对象中获取单词属性，所以我只是将响应对象作为第二个参数传递给触发器，并`response.word`在视图中调用。

```
 $.ajax({
        url: "/gamestart",
        type: "GET",
        success: function(response) {
          console.log(response.word);
          var json = $.parseJSON(response);    ####unnecessary to parseJSON here
          console.log(json);

          _this.set({lost: false});
          _this.set({win: false});
          _this.trigger("gameStartedEvent", response);
        }
      })
    }, 
```

# jquery - jQuery - 隐藏除单击元素之外的所有元素

> ID：14301421
> 
> 赞同：0
> 
> 时间：2013-01-13T07:06:01.723
> 
> 标签：jquery

我有一个名为.flyout 的jQuery 淡入淡出框。当您单击它时，我将其淡出。如果单击另一个，我也希望它淡出。我尝试隐藏所有 .flyout 类，但这会导致当前活动的 .flyout 在您单击它时快速淡入和淡出。我玩过 jQuery not，父母，兄弟姐妹等，但无法让它工作。

```
//hide flyout
$("body").on("click", function() {
    $(".flyout").fadeOut(150);
});
//show flyout
$(".rate").on("click", function(event) {
    event.stopPropagation();
    $(".flyout", this).fadeIn(150);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:13:24.623

这是一个[演示](http://jsfiddle.net/hzuXq/)。我确实稍微更改了您的代码。这是`.flyout`针对每个元素执行的，因此您必须单独单击每个元素。你会看到我`.active`在“活动”弹出窗口中添加了一个类。希望这可以帮助！

```
$('.flyout').on("click", function() {
    if( !$(this).hasClass('active') ) {
        $(this).fadeOut(150);
    } else {
        $(this).fadeOut(150);
        $(this).fadeIn(150);
    }
}); 
```

# android - 旋转方法之间的区别？

> ID：14301424
> 
> 赞同：2
> 
> 时间：2013-01-13T07:07:15.383
> 
> 标签：android, canvas, camera

我的问题是关于.In Docs中的`rotate`方法，我看到了这些评论：`android.graphics.Camera`

> public void **rotateX** (float deg) 自：API 级别 1
> 应用围绕 X 轴的旋转变换。

> public void **rotate** (float x, float y, float z) 自：API 级别 12
> 围绕所有三个轴应用旋转变换。

我的问题是：使用**rotate** (float x, float y, float z) 和一系列**rotate***方法有什么区别，例如这两个片段 A 和 B 之间的区别：
A)

```
camera.rotate (x, y, z); 
```

二）

```
camera.rotateX (x);
camera.rotateY (y);
camera.rotateZ (z); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T07:24:45.483

查看源代码`frameworks/base/core/jni/android/graphics/Camera.cpp`没有区别：

```
static void Camera_rotate(JNIEnv* env, jobject obj, jfloat x, jfloat y, jfloat z) {
    Sk3DView* v = (Sk3DView*)env->GetIntField(obj, gNativeInstanceFieldID);
    v->rotateX(SkFloatToScalar(x));
    v->rotateY(SkFloatToScalar(y));
    v->rotateZ(SkFloatToScalar(z));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T07:27:24.723

重要性在于应用旋转的顺序。

例如，一架向前飞行的飞机首先在其 Z 轴上旋转 90 度（*滚动*），然后在其 X 轴上旋转 90 度（*俯仰*）。结果是飞机现在向右飞行，右翼向下。现在考虑以 90 度俯仰和 90 度滚动的相反顺序操作。飞机现在正在向上飞行，其右翼指向前方（*这些结果可能因您的坐标系而异*）。

camera.rotate 提供了一个快速简便的函数，可以使用一个函数应用所有三个旋转。其余三个旋转函数的原因是允许开发人员希望以特定顺序应用一个或多个旋转的情况。

# javascript - 如何将 .getJSON 转换为 .ajax

> ID：14301427
> 
> 赞同：1
> 
> 时间：2013-01-13T07:08:19.327
> 
> 标签：javascript, ajax, jquery

我怎样才能转换这个：

```
 var dataURL = 'http://example.com/data.json';
    var queryOptions = {
        start: Date.parse('today - 15 years').getTime()/1000,
        end: Date.parse('today').getTime()/1000
    }

    $.getJSON(dataURL, queryOptions, function(jsonresult) { 
```

...到 jQuery .ajax 调用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T07:14:38.047

```
$.ajax({
    url: dataURL
    data: queryOptions,
    dataType: 'json',
    success:function(jsonresult){
        //json here
    }
}); 
```

虽然，`$.getJSON()`它只是该方法的简写 JSON 准备包装器`$.ajax()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T07:15:05.743

```
$.ajax({
    type: "GET",
    url: dataURL,
    dataType: "json",
    data: queryOptions,
    success: function(result) {
        //
    },
    error: function(xhr, status, error) {
        //
    }
}); 
```

# facebook - 帖子上的 Facebook 点赞按钮无法正常工作

> ID：14301433
> 
> 赞同：0
> 
> 时间：2013-01-13T07:09:38.633
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-javascript-sdk

我第一次使用开放图。在任何这样的 url 中，您都可以在顶部看到该网站 Facebook 页面的点赞按钮，在文章标题和摘要之后看到另一个点赞按钮。第二个赞按钮未按要求工作。如果我从该链接中喜欢，那么网站的 Facebook 页面会被喜欢而不是文章，而我想向其他看到类似帖子的 Facebook 用户显示的信息是文章的摘要，而是显示该人喜欢该页面懒惰的家伙。并且图像也没有显示我在打开图形标签中指定的内容。该网站仍然不完整。我现在已经试过很多次了。

[看看这个页面](http://www.alazydude.com/index.php/content/article/10/The-most-loyal-footballers-in-Europe)。中间的第二个赞按钮无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:18:17.207

确保在代码中使用正确的 data-href 来点赞文章。（您应该参考那篇文章的 URL，即使它位于包含多篇文章的页面上。）

例如：

```
<div class="fb-like"
     data-href="http://www.yoursite.net/articles/unique-article-id-goes-here-or-something-like-that"
     data-send="false"
     data-layout="button_count"
     data-width="140"
     data-show-faces="false"
     data-font="segoe ui"></div> 
```

Facebook 开发了一个方便的小工具来为您创建代码！请务必查看[Facebook 开发人员页面上的点赞按钮](https://developers.facebook.com/docs/reference/plugins/like/ "Facebook 开发者页面上的点赞按钮")。

正确完成后，它应该从该链接获取 opengraph-data 并且将同​​时修复。

**您必须确保 og-data 设置正确。**（这是在 www.yoursite.net/articles/unique-article-id-goes-here-or-something-like-that 页面上。）

```
<meta property="og:title" content="Title of the article" />
<meta property="og:type" content="article" />
<meta property="og:url" content="same-url-as-the-data-href-from-like-button" />
<meta property="og:image" content="url-to-image-you-would-like" />
<meta property="og:site_name" content="Name of your site" / 
```

祝你好运！

# php - PHP preg-match-all 正则表达式

> ID：14301434
> 
> 赞同：1
> 
> 时间：2013-01-13T07:09:49.023
> 
> 标签：php, regex, preg-match-all

我想用 PHP 中的 preg_match_all 在他们自己的组中捕获这些中的每一个。

1.  章、节或页
2.  指定章、节或页的编号（或字母，如果有的话）。如果它们之间有一个空格，则应考虑到
3.  单词“和”、“或”

请记住，字符串中的项目数可能是动态的，正则表达式应该适用于以下所有示例：

1.  Ch1 和 Sect2b
2.  Ch 4 x blahunwantedtext 和 Sect 5y 和 Sect6 z 和 Ch7 或 Ch8

到目前为止，这是我设法提出的：

```
<?php

    $str = 'Ch 1 a and Sect 2b and Pg3';
    preg_match_all ('/([a-z]+)([\s]?[0-9]+)([\s]?[a-z]*)([\s]?and*[\s]?)/is', $str, $matches);

    Array
    (
        [0] => Array
            (
                [0] => Ch 1 a and 
                [1] => Sect 2b and 
            )

        [1] => Array
            (
                [0] => Ch
                [1] => Sect
            )

        [2] => Array
            (
                [0] =>  1
                [1] =>  2
            )

        [3] => Array
            (
                [0] =>  a
                [1] => b
            )

        [4] => Array
            (
                [0] =>  and 
                [1] =>  and 
            )

    ) 
```

我无法匹配数组中字符串 (Pg3) 的最后部分。

预期的结果应该是：

```
 Array
    (
        [0] => Array
            (
                [0] => Ch 1 a and 
                [1] => Sect 2b and 
                [2] => Pg3
            )

        [1] => Array
            (
                [0] => Ch
                [1] => Sect
                [2] => Pg
            )

        [2] => Array
            (
                [0] =>  1
                [1] =>  2
                [2] =>  3
            )

        [3] => Array
            (
                [0] =>  a
                [1] => b
                [2] => 
            )

        [4] => Array
            (
                [0] =>  and 
                [1] =>  and 
                [2] =>  
            )

    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T07:26:47.470

这个正则表达式应该工作`/(ch|sect|pg)\s*(\d)\s*([a-z]?\b)\s*(and|or)?/i`：

```
$str = 'Ch 1 a and Sect 2b and Pg3';
preg_match_all('/(ch|sect|pg)\s*(\d)\s*([a-z]?\b)\s*(and|or)?/i', $str, $matches);

array (size=5)
  0 => 
    array (size=3)
      0 => string 'Ch 1 a and' (length=10)
      1 => string 'Sect 2b and' (length=11)
      2 => string 'Pg3' (length=3)
  1 => 
    array (size=3)
      0 => string 'Ch' (length=2)
      1 => string 'Sect' (length=4)
      2 => string 'Pg' (length=2)
  2 => 
    array (size=3)
      0 => string '1' (length=1)
      1 => string '2' (length=1)
      2 => string '3' (length=1)
  3 => 
    array (size=3)
      0 => string 'a' (length=1)
      1 => string 'b' (length=1)
      2 => string '' (length=0)
  4 => 
    array (size=3)
      0 => string 'and' (length=3)
      1 => string 'and' (length=3)
      2 => string '' (length=0) 
```

# c++ - 在 VC++ 6.0 中使用 CString::AllocSysString 时出现链接错误

> ID：14301436
> 
> 赞同：0
> 
> 时间：2013-01-13T07:10:17.473
> 
> 标签：c++, mfc

添加了以下代码

```
BSTR pbstrBuffer;
pbstrBuffer = buff.AllocSysString(); 
```

构建项目时出现以下错误：

```
Linking...
  Creating library pcciortl.lib and object pcciortl.exp .obj : error LNK2001: unresolved external symbol "public: unsigned short  * __thiscall CString::AllocSysString(void)const " (?AllocSysString@CString@@QBEPAGXZ) 
```

c:\pct3/pcciortl.dll : 致命错误 LNK1120: 1 unresolved externals 执行 link.exe 时出错。

其他 CString 方法似乎没问题。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:15:56.350

找到了一个手动包含的解决方案`mfco42d.lib`，然后找到了真正的解决方案，在项目中包含一个 MFC 包含文件

```
#include <afxole.h>         // MFC OLE classes
#include <afxdisp.h>        // MFC OLE automation classes 
```

它的作用是将库包含`mfco42d.lib`在 Visual C++ 6.0 中

# c# - 如何在 Entity Framework 中使用 SQL“and”语句？

> ID：14301445
> 
> 赞同：1
> 
> 时间：2013-01-13T07:11:47.073
> 
> 标签：c#, entity-framework

我必须进行类似的查询

```
SELECT * FROM Movies WHERE title='Pulp Fiction' AND year='1994' 
```

但使用实体框架我不能这样做

```
var query = from m in db.movies
            where m.title =='Pulp Fiction'
            AND m.year == '1994'//<----- this I can't do
            select m; 
```

我怎样才能做到这一点？

提前致谢。:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T07:14:18.173

```
var query = from m in db.movies
            where m.title =='Pulp Fiction'
            && m.year == '1994'
            select m; 
```

你在这里编码 C#，所以你应该使用 C# 和 && 的语法

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T07:14:30.077

您对表达式使用 C# 语法，即`&&`运算符：

```
var query =
  from m in db.movies
  where m.title == 'Pulp Fiction' && m.year == '1994'
  select m; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-13T07:17:10.487

它将`&&`代替`AND`：

```
var query = from m in db.movies
            where m.title == 'Pulp Fiction'
            && m.year == '1994'
            select m; 
```

# java - 用Java截屏？

> ID：14301449
> 
> 赞同：0
> 
> 时间：2013-01-13T07:13:07.780
> 
> 标签：java, screen-capture

> **可能重复：**
> [有没有办法使用 Java 截取屏幕截图并将其保存到某种图像中？](https://stackoverflow.com/questions/58305/is-there-a-way-to-take-a-screenshot-using-java-and-save-it-to-some-sort-of-image)

我想在特定应用程序或特定窗口中捕获屏幕。我正在考虑用Java做它。如果 Java 可以用于此目的，那么我可以使用哪些 API/类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T07:15:07.700

看看 Java [Robot#createScreenCapture](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html#createScreenCapture%28java.awt.Rectangle%29) API。

# perl - 为什么不允许“使用”，如“使用严格；” 在 Perl 5.14 中？

> ID：14301453
> 
> 赞同：12
> 
> 时间：2013-01-13T07:13:49.577
> 
> 标签：perl, shebang, use-strict

我正在尝试使用以下约定，我被指示为我的`"Hello, World!"`程序使用良好/正确/安全的 Perl 代码：

```
use strict;
use warnings; 
```

我在我的主 Windows 7 操作系统上使用 (Strawberry) Perl 5.12 创建并成功运行了以下“Hello World”程序：

```
!#/usr/bin/perl
use strict;
use warnings;

print "Hello, World!\n"; 
```

正如预期的那样，我得到的结果是`"Hello, World!"`。

令我感到非常奇怪的是，使用 Perl 5.14 在我的虚拟化 Linux Mint 14 操作系统的终端中运行的相同程序产生了以下错误：

```
"use" not allowed in expression at /PATH/hello_world.pl line 2, at end of line
syntax error at /PATH/hello_world.pl line 2, near "use strict"
BEGIN not safe after errors--compilation aborted at /PATH/hello_world.pl line 3. 
```

我随后创建了其他没有`use strict;`or`use warnings;`行的“Hello World”程序，还有一个带有 的程序`-w`，我在一些教程中看到过，如果我没记错的话，会打开警告。

我的两个替代版本都可以正常工作，因为它们产生了我的预期结果：

```
Hello, World! 
```

我不能确定的是，我是否需要`use`5.14 及更高版本的 Perl 程序中的语句，或者是否可以`-w`在第一行的末尾写下。

我想我可以在我所有的 Perl 程序中使用一致的标头，可以这么说，无论它们是 Windows 还是 Linux，Perl 5.12 或 5.14 或其他。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-14T08:51:04.653

您的图像显示所有脚本都以`!#/usr/bin/perl`. 这是错误的。这不是一个有效的 she-bang 行，它被读作 negation`!`后跟一个 comment `#`。解析将继续并使用**script1.pl** perl 将执行`! print "Hello world.\n";`。这将打印`Hello world`并否定`print`... 不是真正有用但有效的 perl 的结果。

在**script2.pl** perl 看到`! use strict;`这是一个编译时错误，因此 perl 失败并报告该行的错误`use strict;`。

因此，如果您使用正确的 she-bang 行，所有三个脚本都将按设计工作。

*编辑（添加了测试脚本）：*

**脚本1.pl**

```
!#/usr/bin/perl

print "Hello world.\n" ; 
```

打电话`perl script1.pl`给

```
Hello world. 
```

**脚本2.pl**

```
!#/usr/bin/perl

use strict;
use warnings ;

print "Hello world.\n" ; 
```

打电话`perl script2.pl`给

```
"use" not allowed in expression at script2.pl line 3, at end of line
syntax error at script2.pl line 3, near "use strict "
BEGIN not safe after errors--compilation aborted at script2.pl line 4. 
```

使用正确的语法**script3.pl**

```
#!/usr/bin/perl

use strict ;
use warnings ;

print "Hello world.\n" ; 
```

打电话`perl script3.pl`给

```
Hello world. 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-13T07:16:27.800

你做了类似的事情

```
use warnings
use strict; 
```

代替

```
use warnings;
use strict; 
```

* * *

实际上，我认为这可能是一个行尾问题。你有 LF，你应该有 CR LF，反之亦然。我已经看到这导致 Perl 认为代码从 shebang 行的中途开始（例如`perl use strict;`）

* * *

如其他地方所述，您发布的代码和您使用的代码是不同的。你实际使用过

```
!use strict; 
```

由于糟糕的shebang线。

```
!#/u...         # Negation followed by a comment 
```

应该

```
#!/u...         # Shebang 
```

# java - 遍历哈希图

> ID：14301455
> 
> 赞同：2
> 
> 时间：2013-01-13T07:14:15.377
> 
> 标签：java, collections, hashmap

> **可能重复：**
> [如何遍历地图中的每个条目？](https://stackoverflow.com/questions/46898/how-do-i-iterate-over-each-entry-in-a-map)
> [如何遍历 <String, POJO> 的映射？](https://stackoverflow.com/questions/3995463/how-can-i-iterate-over-a-map-of-string-pojo)

我已经编写了以下代码，并且一直在迭代哈希图。

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;

class demo
{
    public static void main(String v[]) {
        ArrayList<String> contactIds = new ArrayList<String>();
        contactIds.add("2");
        contactIds.add("3");

        HashMap names = new HashMap();
        names =  getNames(contactIds);

        // I want to get the total size of the hashmap  - names
        // for ex now there are 6 elements inside hashmap.
        // How can I get that count?

    }

    private static HashMap getNames(ArrayList contactIds) {
        HashMap names = new HashMap();
        String params = null;
        List<String> list = new ArrayList<String>();
        for(int i=0; i<contactIds.size();i++) {
            params = contactIds.get(i).toString();

            list.add(0,"aer-1");
            list.add(1,"aer-2");
            list.add(2,"aer-3");

            names.put(params,list) ;
         }

        return names;
    }
} 
```

在这段代码中，地图中有六个元素，现在在 main 方法中，我如何遍历地图并获得总数？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T07:18:29.537

你的问题被问到 - 并得到了回答 - 在这里：

[如何有效地迭代地图中的每个条目？](https://stackoverflow.com/questions/46898/how-do-i-iterate-over-each-entry-in-a-map)

```
for (Map.Entry<String, String> entry : map.entrySet()) {
    System.out.println(entry.getKey() + "/" + entry.getValue());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T07:17:34.350

看看[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)。您正在寻找`HashMap.size()`总计数和`HashMap.values()`地图中的所有值，或`HashMap.entries()`每对键和值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T09:34:07.980

'Map' 数据结构不是 Collection 对象，但 Sets 是。

迭代 Map 的最常用方法是使用底层的 .entrySet 方法。

```
// For each loop
for ( Entry<String, String> entry : names ) {
    System.out.println( String.format( "(%s, %s)", entry.getKey(), entry.getValue() ) );
}

// Iterator
Iterator iterator = names.entrySet().iterator
while( iterator.hasNext() ){
     Entry entry = iterator.next()
     System.out.println( String.format( "(%s, %s)", entry.getKey(), entry.getValue() ) );
} 
```

如果有兴趣查找 Map 节点的总数，请使用 .size() 方法。

编辑：

由于您希望将每个列表的总大小存储在地图中，因此您可以执行以下操作。

```
Iterator iterator = names.entrySet().iterator
int count = 0;

while( iterator.hasNext() ){
     Entry entry = iterator.next()
     count += entry.getValue().size()
} 
```

# c# - 无法解析 Oracle 与实体框架工具的连接

> ID：14301468
> 
> 赞同：1
> 
> 时间：2013-01-13T07:16:20.393
> 
> 标签：c#, oracle11g, entity-framework-5, odp.net

我正在尝试在我的项目中学习和实施 Entity FW（使用`Oracle 11g`）。我正在尝试使用`ODP.NET`数据源连接到我的项目并收到下一个错误：

> “ORA:12154:TNS: 无法解析指定的连接标识符”

![我正在尝试做的屏幕截图，显示错误](../Images/741ffd36db2787bb9d46d27568b4ae6d.png)

我查看了stuckoverflow，看到说看看`PATH`变量是否配置正确，我看到了这个：

```
C:\app\USER\oracle\bin;C:\app\USER\product\11.2.0\client_1\bin;C:\app\USER\product\11.2.0\client_1; 
```

在所有这些之后，我检查了我的`TNSNAMES.ORA`文件，发现在我的 2 个`HOME`文件夹中有相同的`TNSNAMES.ORA`文件，并且我尝试连接的实例也配置正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T07:40:35.553

您必须执行以下提到的检查列表才能解决此问题。

*   如果您使用本地命名（TNSNAMES.ORA 文件）：

*   确保“TNSNAMES”列为 Oracle Net 配置文件 (SQLNET.ORA) 中 NAMES.DIRECTORY_PATH 参数的值之一

*   验证 TNSNAMES.ORA 文件是否存在并且位于正确的目录中并且可以访问。

*   检查用作连接标识符的网络服务名称是否存在于 TNSNAMES.ORA 文件中。

*   确保 TNSNAMES.ORA 文件中的任何位置都没有语法错误。查找不匹配的括号或杂散字符。TNSNAMES.ORA 文件中的错误可能使其无法使用。

*   如果您使用目录命名：

*   验证“LDAP”是否列为 Oracle Net 配置文件 (SQLNET.ORA) 中 NAMES.DIRETORY_PATH 参数的值之一。

*   验证 LDAP 目录服务器是否已启动并且可以访问。

*   验证目录中是否配置了用作连接标识符的网络服务名称或数据库名称。

*   通过将完全限定的网络服务名称或完整的 LDAP DN 指定为连接标识符来验证正在使用的默认上下文是否正确

*   如果您使用的是简单连接命名：

*   验证“EZCONNECT”是否列为 Oracle Net 配置文件 (SQLNET.ORA) 中 NAMES.DIRETORY_PATH 参数的值之一。

*   确保指定的主机、端口和服务名称正确。

*   尝试将连接标识符括在引号中。有关命名的更多信息，请参阅 Oracle 网络服务管理员指南或 Oracle 操作系统特定指南。

有关详细信息，请查看“Oracle 网络连接”下[**的 Oracle® 数据库网络服务管理员指南**](http://docs.oracle.com/cd/B19306_01/network.102/b14212/toc.htm)[](http://docs.oracle.com/cd/B19306_01/network.102/b14212/toc.htm)

 **我希望这对你有帮助。**

# html - 悬停时下拉菜单 CSS3

> ID：14301477
> 
> 赞同：2
> 
> 时间：2013-01-13T07:17:21.027
> 
> 标签：html, css, drop-down-menu

目前我`<span>Home<span>`正在`anchor`使用`li`. 但是，我需要一个悬停下拉菜单。就像同一个家`span`，但在它下面还有两三个物品。任何帮助，将不胜感激。点击获取[jsFiddle](https://jsfiddle.net/AmerSohail/tPHcd/)

[![](../Images/b9a59987ffd18db3ea3ab2b2c375b65d.png)](https://i.stack.imgur.com/z6wAW.jpg) ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:17:12.650

你应该看看使用图标字体而不是图片，如果你使用很多这样的图像，整个网站会变得更小，并且效率更高，现在为你制作一个 jsfiddle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:22:17.817

如果您使用`<ul>`and`<li>`而不是使用`<span>`. 就像 Parallel 2ne 所说的，这取决于您的 html 标记。`<span>`但是，您也可以通过 Javascript/jQuery 创建一个在单独悬停元素时自动触发的函数来强制它。当它触发时，它适用`display:block`于`display:hidden`子`<span>`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T20:43:24.443

您可以在 css 和 html 上执行此操作，无需任何 js 文件。您需要的 HTML 代码：

```
<ul>
<li>
    <span>Menu 1</span>
    <div class="sub-menu">
        <ul>
            <li>sub1</li>
            <li>sub2</li>
        </ul>
    </div>
</li>
<li>
    <span>Menu 2</span>
</li> 
```

这是您必须附加的 CSS：

```
li .sub-menu {
    visibility:hidden;
    opacity:0;
    /*and more custom CSS as you need*/
}
li:hover .sub-menu {
    visibility:visible;
    opacity:1;
} 
```

您可以使用过渡来为您的效果设置动画。

# iphone - Bundle Identifier 提交应用到应用商店

> ID：14301479
> 
> 赞同：1
> 
> 时间：2013-01-13T07:17:51.073
> 
> 标签：iphone, ios, objective-c, xcode, app-store

这非常令人沮丧....在尝试验证时，我被告知我的捆绑 ID 与 iTunes 连接上的不匹配。

在 iTunes 连接上：

`Bundle ID:My App-*`（就像那样，最后有一个空格和 -* ）

```
Bundle Suffix:ABC 
```

目前，在 Xcode 中，Bundle Identifier 填写如下：
`ABC.My-App`(My-App) 显示为灰色，无法更改。

请帮助我，我不知道为什么提交过程如此繁琐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T07:44:28.277

好吧，这就是你的答案。您在 iTunesConnect 中的捆绑包 ID 和 Xcode 中的捆绑包 ID 应该相同。在您的供应门户中，使用您项目的确切 sami 包 ID 创建一个 App ID。带有`*`符号的那个是有效的，因为它是一个`wildcard`ID，但是当你想提交到 App Store 时，你应该创建一个新的。

# wmi - WMI - IWbemClassObject::GetObjectText 的 WBEM_FLAG_NO_SEPARATOR 标志在哪里定义？

> ID：14301480
> 
> 赞同：1
> 
> 时间：2013-01-13T07:17:51.610
> 
> 标签：wmi, definition, flags

MSDN 说有 2 个标志可以传递给`IWbemClassObject::GetObjectText`,`WBEM_FLAG_NO_FLAVORS`和`WBEM_FLAG_NO_SEPARATOR`.

但我似乎无法找到它们的定义位置。我尝试用谷歌搜索它们，但我只能发现 NO_FLAVORS 等于`0x1`. 唯一的结果`NO_SEPARATOR`是 MSDN`GetObjectText`页面（或第 3 方网站上的逐字副本）。有谁知道它是什么？

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa391448(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa391448(v=vs.85).aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:37:16.677

我发现这个常量只是在 win SDK 中进行搜索，希望它有所帮助。

WBEM_FLAG_NO_FLAVORS = 0x00000001

但是，我没有找到另一个。

# mysql - MySQL Query 不使用此查询返回所有行

> ID：14301487
> 
> 赞同：1
> 
> 时间：2013-01-13T07:19:49.143
> 
> 标签：mysql, row

我有以下查询：

```
SELECT 
  IF(COUNT(*) > 0, COUNT(*), '0') AS Found, 
  IF(NWLat, NWLat, '0')           AS NWLat, 
  IF(NWLon, NWLon, '0')           AS NWLon, 
  IF(SELat, SELat, '0')           AS SELat, 
  IF(SELon, SELon, '0')           AS SELon 
FROM s 
WHERE s.ci = '4' 
  AND s.snf = 'Ch'
GROUP BY s.sid 
```

现在它返回匹配查询的行。但是，当没有任何内容匹配时，它不会返回任何内容。如果什么也没找到，我怎样才能让它返回“Found: 0, NWLat: 0, NWLon: 0, SELat: 0, SELon: 0”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:00:57.980

最好不要在 MySQL 中这样做。SQL 与此无关。如果您的查询未返回任何记录，则从您的前端应用程序中，您可以轻松打印 0。

**但是**，如果您需要以任何方式执行此操作，您可以执行以下操作：

```
SELECT 
  IF(COUNT(*) > 0, COUNT(*), '0') AS Found, 
  IF(NWLat, NWLat, '0')           AS NWLat, 
  IF(NWLon, NWLon, '0')           AS NWLon, 
  IF(SELat, SELat, '0')           AS SELat, 
  IF(SELon, SELon, '0')           AS SELon 
FROM s 
WHERE s.ci = '4' 
  AND s.snf = 'Ch'
GROUP BY s.sid 
UNION ALL
SELECT
  '0' AS Found, 
  '0' AS NWLat, 
  '0' AS NWLon, 
  '0' AS SELat, 
  '0' AS SELon 
FROM s 
WHERE NOT EXISTS(
    SELECT 
      IF(COUNT(*) > 0, COUNT(*), '0') AS Found, 
      IF(NWLat, NWLat, '0')           AS NWLat, 
      IF(NWLon, NWLon, '0')           AS NWLon, 
      IF(SELat, SELat, '0')           AS SELat, 
      IF(SELon, SELon, '0')           AS SELon 
    FROM s 
    WHERE s.ci = '4' 
    AND s.snf = 'Ch'
    GROUP BY s.sid
); 
```

**演示：**

*   [如果有记录](http://www.sqlfiddle.com/#!2/75c29/1)。
*   [如果没有返回记录](http://www.sqlfiddle.com/#!2/2efdb/1)，这将为您提供：

    ```
    | FOUND | NWLAT | NWLON | SELAT | SELON |
    -----------------------------------------
    |     0 |     0 |     0 |     0 |     0 | 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:39:48.390

仅供参考，如果你真的有一个`COUNT(*)`0，这意味着该组*没有*行，所以结果中永远不会有一行。你`IF(COUNT(*) > 0, COUNT(*), '0')`不会对你有任何好处，因为不会有任何一行显示 0。

至于其他如果，我怀疑你想要这样的东西：等等。
`SELECT (case when NWLat is null then 0 else NWLat end)
. . .
GROUP BY sid, (case when NWLat is null then 0 else NWLat end),`

这将允许那些被包含在组中，并允许 0 显示为一个组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T07:41:38.693

对于你最后的评论，你想试试这个吗？在这里，您不必全部计算以确定您是否有根据条件需要的记录。

```
SELECT     
case when NWLat is null then 0 else NWLat end AS NWLat, 
case when NWLon is null then 0 else NWLon end AS NWLon,
case when SELat is null then 0 else SELat end AS SELat,
case when SELon is null then 0 else SELon end AS SELon
FROM S
where NOT EXISTS(SELECT 1
             FROM s
             WHERE ci = 4 and snf = 'Ch')
GROUP BY sid, NWLon, SELat, SELon; 
```

# ruby-on-rails - 载波 + 嵌套模型：file_field 未调用“创建”方法

> ID：14301493
> 
> 赞同：2
> 
> 时间：2013-01-13T07:20:59.837
> 
> 标签：ruby-on-rails, carrierwave, nested-forms

我正在尝试按照 Railscast Ep 381 将多文件上传集成到我的 Rails 应用程序中。对于我的应用程序，项目模型有很多步骤，步骤有很多图像。Image 模型使用的是 Carrierwave 上传器。

现在，我可以从 edit_steps 路径中上传单个图像文件。但是我正在尝试设计上传界面，以便在添加新图像后，edit_steps 页面上的图库会自动刷新（因此，一旦选择了图像但尚未提交表单）。

根据 Railscast 情节，当您选择图像时，它们应该自动为每个文件调用创建操作。但我的应用程序显然没有这样做。如何确保调用 Image 模型的 create 方法？

步骤.rb

```
class Step < ActiveRecord::Base
    extend FriendlyId
    friendly_id :number

    attr_accessible :description, :name, :number, :project_id, :images_attributes
    belongs_to :project
    has_many :images
    accepts_nested_attributes_for :images, :allow_destroy => :true

end 
```

图片.rb

```
class Image < ActiveRecord::Base
  attr_accessible :project_id, :step_id, :file, :caption

  belongs_to :step
  belongs_to :project

  mount_uploader :file, FileUploader
end 
```

意见/步骤/edit.html.erb

```
%= semantic_form_for [@project, @step], :html => {:multipart => true} do |f| %>
<%= f.inputs do%>

....

    <div id="images">
        <%= render :partial => 'images/image', :collection => @step.images.all %>
    </div>
    <div class="clear"></div>

....

        <%= f.fields_for :images, Image.new do |image_form| %>
          <%= image_form.file_field :file, multiple: true, name: "image[file]"%>
        <%end%> 
```

javascript/images.js.coffee

```
jQuery ->
  $('#new_image').fileupload
    dataType: "script" 
```

控制器/images.controller

```
 def create
    @image = Image.create(params[:image])
  end 
```

图像/create.js.erb

```
<% if @image.new_record? %>
  alert("Failed to upload image: <%= j @image.errors.full_messages.join(', ').html_safe %>");
<% else %>
  alert("adding images")
  $("#images").append("<%= j render(@image) %>");
<% end %> 
```

# r - 如何从矩阵中提取行名？

> ID：14301498
> 
> 赞同：13
> 
> 时间：2013-01-13T07:21:55.623
> 
> 标签：r, matrix, rowname

我有一个带有日期的行名的矩阵。我想将这些行名提取到一个变量中，然后使用 rownames() 将这些日期应用于我拥有的另一个矩阵。假设矩阵称为“data.matrix”。

每当我跑步时：

```
data.matrix[,0] 
```

我得到了所有日期的打印输出。所以我这样做：

```
v <- data.matrix[,0] 
```

当我返回 v 时，我会得到一份很好的所有日期列表。但是当我使用：

```
rownames(other.matrix) <- v 
```

然后我返回：

```
head(other.matrix) 
```

我没有得到任何新的列名。

另外，当我尝试时：

```
head(v) 
```

我明白了`NULL`

但是当我这样做时：

```
v 
```

我得到了我所有日期的漂亮打印输出。

那么给了什么？起初我认为矩阵和日期是不相容的，但似乎它们是不相容的。

现在我正在使用`merge()`这种方式添加日期：

```
z <- merge(v, other.matrix) 
```

但感觉有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-13T07:30:55.760

命令

```
data.matrix[,0] 
```

确实返回一个没有列的矩阵对象。因此，您只能看到它的行名。

要从对象中提取行名，请使用以下`rownames`函数：

```
v <- rownames(data.matrix) 
```

# ruby-on-rails - Ruby on Rails - ffi_lib 中的块：无法打开库“libcurl”

> ID：14301500
> 
> 赞同：3
> 
> 时间：2013-01-13T07:22:23.323
> 
> 标签：ruby-on-rails, ruby, windows-7

我在下面的链接中收到错误。- ffi_lib 中的块：无法打开库“libcurl”

Rails 版本：3.2.11 Ruby 版本：1.9.3p125 操作系统：Windows 7

[错误](http://imageshack.us/photo/my-images/824/fmla.jpg/)

# c# - 将字典项目添加到标签？

> ID：14301502
> 
> 赞同：0
> 
> 时间：2013-01-13T07:23:16.890
> 
> 标签：c#, winforms

我需要制作按钮来添加项目以标记这是字典项目

```
 var menu = new Dictionary<string, double>();
        //names of the items the user is buying and the count
        var items = new Dictionary<string, int>();
        menu.Add("soda", 0.5);
        menu.Add("water", 0.5);
        menu.Add("juice", 0.5);
        menu.Add("rice", 0.5);
        menu.Add("soup", 0.5);
        menu.Add("chicken", 0.5);
        menu.Add("steak", 0.5);
        menu.Add("beef", 0.5); 
```

如何制作按钮以将项目添加到标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T07:31:58.637

```
foreach (var m in menu)
{
    label1.Text += m.Key + ":" + m.Value.ToString() + Environment.NewLine;
} 
```

# android - Android App Development Help : 输入数据后立即执行操作

> ID：14301506
> 
> 赞同：1
> 
> 时间：2013-01-13T07:24:02.487
> 
> 标签：android

我在 Android 上看到过一个应用程序，只要一个人在文本框中输入任何内容，显示输出的另一个文本框就会自动更改，而无需按下任何按钮或任何东西。我想知道如何为 Android 应用程序做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T07:29:24.083

您可以通过将[addTextChangedListener](http://developer.android.com/reference/android/widget/TextView.html)添加到 EditText 来做到这一点。对用户输入的数据执行所有操作，`afterTextChanged`因为当用户停止在 Edittext 中输入时调用此方法

```
EditText edttext = (EditText)findViewById(R.id.edttext);
edttext.addTextChangedListener(textChecker);
    TextWatcher textChecker = new TextWatcher() {

    public void afterTextChanged(Editable s) {
                  //set text to other Views 
     }

    }; 
```

请参阅[此](http://www.cybernetikz.com/blog/android-textwatcher-example/)示例了解我们如何使用 TextWatcher

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:29:01.763

您可以`addTextChangedListener`对您的 EditText 并使用`onTextChanged`函数来更改其他 EditText 中的文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T09:56:51.383

这里 ed 是 EditText ，我想，这段代码完成了你的期望..试试这段代码

```
ed.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int end) {
            // TODO Auto-generated method stub
            //tv.setText(s.toString());
        if(s.length()==1){
                String get=s.toString();
             tv.setText(s.toString());
             tv.startAnimation(mytrans);
             mytrans.reset();
            }else if(s.length()==2){
                tv1.setText(s.subSequence(1,2));
                 tv1.startAnimation(myanim);
            }else if(s.length()==3){
                tv2.setText(s.subSequence(2, 3));
                tv2.startAnimation(mytrans);
            }else if(s.length()==4){
                tv3.setText(s.subSequence(3, 4));
                tv3.startAnimation(myalpha);
        }else if(s.length()==5){
            tv4.setText(s.subSequence(4, 5));
            tv4.startAnimation(myanim1);
        }else{
            tv.setText(s.toString());

                    ObjectAnimator animation2 = ObjectAnimator.ofFloat(tv,"translationX",180);
                    animation2.setDuration(2000);
                    animation2.start();
                    ObjectAnimator animation3 = ObjectAnimator.ofFloat(tv,"translationY",100);
                    animation3.setDuration(2000);
                    animation3.start();
                    ObjectAnimator animation4 = ObjectAnimator.ofFloat(tv,"rotation",360);
                    animation4.setDuration(2000);
                    animation4.start();
                    ib.startAnimation(myanim);
                    ib1.startAnimation(myanim1);
                    tv.startAnimation(mytrans); 
        }
            /*if(s.length()==6){
                ib.requestFocus();
            }*/
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int end,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub
            /*ib.startAnimation(myanim);
            ib1.startAnimation(myanim1);
            tv.startAnimation(mytrans); */

        }
    }); 
```

# iphone - UIImagepickerController 通过双击更改捕获帧大小

> ID：14301507
> 
> 赞同：2
> 
> 时间：2013-01-13T07:24:05.843
> 
> 标签：iphone, ios, uiimagepickercontroller

我已经定制了 UIImagePickerController 来以我自己的风格捕捉视频帧。我创建了一个 UIImagePickerController 如下所示。

```
self.iPicker = [[[UIImagePickerController alloc] init] autorelease];
self.iPicker.delegate = self;
self.iPicker.sourceType = sourceType;

self.iPicker.showsCameraControls = NO;
self.iPicker.allowsEditing = YES;
self.iPicker.wantsFullScreenLayout = YES;
self.iPicker.navigationBarHidden = YES;
self.iPicker.mediaTypes = [UIImagePickerController availableMediaTypesForSourceType:
                           UIImagePickerControllerSourceTypeCamera];
self.iPicker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModeVideo;
self.iPicker.videoQuality = UIImagePickerControllerQualityTypeHigh; 
```

但是，当我在单击录制按钮之前双击捕获屏幕时，它会将捕获帧大小更改为视网膜大小。如果我再做一次，它会恢复到原来的大小。我不希望在我的选择器控制器中出现这种行为。当用户从设置菜单中选择视频质量时，我想更改选择器大小。

众所周知，UIImagePickerController 对象的视频捕获大小有 6 种质量类型。它们如下所示。

```
typedef NS_ENUM(NSInteger, UIImagePickerControllerQualityType) {
    UIImagePickerControllerQualityTypeHigh = 0,       // highest quality
    UIImagePickerControllerQualityTypeMedium = 1,     // medium quality, suitable for transmission via Wi-Fi 
    UIImagePickerControllerQualityTypeLow = 2,         // lowest quality, suitable for tranmission via cellular network
    UIImagePickerControllerQualityType640x480 = 3,    // VGA quality
    UIImagePickerControllerQualityTypeIFrame1280x720 = 4,
    UIImagePickerControllerQualityTypeIFrame960x540 = 5
}; 
```

请帮我解决自动更改行为的问题。

# python - 存储固定键键的最佳方法：在 python 中通过键访问的值数据集？

> ID：14301511
> 
> 赞同：2
> 
> 时间：2013-01-13T07:24:38.947
> 
> 标签：python, dictionary, python-3.x, key-value, namedtuple

我想要的是能够处理具有一组固定键的数据集。所有的键都是字符串。数据永远不会被编辑。我知道这可以用普通的字典来完成，如下所示：

```
data_a = {'key1': 'data1a', 'key2': 'data2a', 'key3': 'data3a'}
data_b = {'key1': 'data1b', 'key2': 'data2b', 'key3': 'data3b'}
data_c = {'key1': 'data1c', 'key2': 'data2c', 'key3': 'data3c'} 
```

他们必须能够像这样被调用：

```
data_a['key1'] # Returns 'data1a' 
```

但是，这看起来很浪费内存（因为字典显然让自己保持 1/3 为空或类似的东西，同时还要多次存储键），而且创建起来也很乏味，因为我需要继续输入相同的键在我的代码中一遍又一遍。我还冒着意外更改数据集中某些内容的风险。

我目前的解决方案是先将一组键存储在一个元组中，然后将数据也存储为元组。它看起来像这样：

```
keys = ('key1', 'key2', 'key3')
data_a = ('data1a', 'data2a', 'data3a')
data_b = ('data1b', 'data2b', 'data3b')
data_c = ('data1b', 'data2c', 'data3c') 
```

要检索数据，我会这样做：

```
data_a[keys.index('key1')] # Returns 'data1a' 
```

然后，我了解了这个名为 namedtuples 的东西，它似乎能够做我需要的事情：

```
import collections
Data = collections.namedtuple('Data', ('key1', 'key2', 'key3'))
data_a = Data('data1a', 'data2a', 'data3a')
data_b = Data('data1b', 'data2b', 'data3b')
data_c = Data('data1b', 'data2c', 'data3c') 
```

但是，看来我不能简单地通过键调用值。相反，要通过键检索数据，我必须使用 getattr，这似乎不是很直观：

```
getattr(data_a,'key1') # Returns 'data1a' 
```

我的标准首先是内存效率，然后是性能效率。在这 3 种方法中，哪种方法最好？还是我错过了一些东西，并且有一个更pythonic的成语来获得我想要的东西？

编辑：我现在最近也了解到了 的存在`__slots__`，它显然对 key:value 对运行更有效，同时几乎消耗了相同的（？）内存量。[与此类](https://stackoverflow.com/a/2648186/272515)似的实现会是命名元组的合适替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T07:29:54.150

[`namedtuple`](http://docs.python.org/3/library/collections.html#collections.namedtuple)似乎是正确的使用方法。如果你的“键”是固定的，你不需要`getattr`并且可以使用正常的语法来检索对象的属性：

```
In [1]: %paste
import collections
Data = collections.namedtuple('Data', ('key1', 'key2', 'key3'))
data_a = Data('data1a', 'data2a', 'data3a')
data_b = Data('data1b', 'data2b', 'data3b')
data_c = Data('data1b', 'data2c', 'data3c')

## -- End pasted text --

In [2]: data_a.key1
Out[2]: 'data1a' 
```

文档中也演示了这种用法：

```
>>> # Basic example
>>> Point = namedtuple('Point', ['x', 'y'])
>>> p = Point(11, y=22)     # instantiate with positional or keyword arguments
>>> p[0] + p[1]             # indexable like the plain tuple (11, 22)
33
>>> x, y = p                # unpack like a regular tuple
>>> x, y
(11, 22)
>>> p.x + p.y               # fields also accessible by name
33
>>> p                       # readable __repr__ with a name=value style
Point(x=11, y=22) 
```

`getattr`如果第二个参数（属性名称）是常量，您通常不会使用。只有当它可能发生变化时才需要它：

```
In [3]: attr = input('Attribute: ')
Attribute: key3

In [4]: getattr(data_b, attr)
Out[4]: 'data3b' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T10:34:43.397

是的，`__slots__`应该做。

```
class Data:
    __slots__ = ["key1", "key2"]

    def __init__(self, k1, k2):
        self.key1, self.key2 = k1, k2

    def __getitem__(self, key):
        if key not in self.__slots__:
            raise KeyError("%r not found" % key)
        return getattr(self, key) 
```

让我们试试看：

```
>>> Data(1, 2)["key1"]
1 
```

条件`key not in self.__slots__`是健全性检查；如果它不存在，`getattr`会很乐意为我们取货。`__init__`

# r - 我应该如何在 r 中组合两个循环？

> ID：14301516
> 
> 赞同：0
> 
> 时间：2013-01-13T07:25:14.597
> 
> 标签：r, loops

我想问问你的意见，因为我不太确定该怎么做。这是关于我的论文项目的一部分，我的情况是：

## 阶段I

我有 2 个组，对于每个组，我需要计算以下步骤：

1.  从正态分布生成 3 个随机数并将它们平方。
2.  重复步骤 1 15 次，最后我会得到 15 个随机数。

我已经完成了使用 for 循环的阶段。

```
n1<-3
n2<-3
miu<-0
sd1<-1
sd2<-1
asim<-15
w<-rep(NA,asim)
x<-rep(NA,asim)
for (i in 1:asim) {
    print(i)
    set.seed(i)

    data1<-rnorm(n1,miu,sd1)
    data2<-rnorm(n2,miu,sd2)

    w[i]<-sum(data1^2)
    x[i]<-sum(data2^2)
}

w
x 
```

第二阶段是；

## 第二阶段

对于每个组，我需要：

1.  对组进行排序；
2.  找到每个组的修剪平均值。

对于整个过程（第一阶段和第二阶段），我需要模拟它们 5000 次。我将如何进行第 2 步？你认为我需要再放一个循环来进行第二阶段吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T07:50:01.460

这些是无需显式循环即可完成的任务。因此，请注意以下几点：如果您生成 3 次 15 次 2000 的随机数，或者您一次生成所有这些随机数，都是一样的。它们仍然共享相同的分布。

下一步：在每个循环中设置种子使您的模拟具有确定性。在脚本开始时调用`set.seed` *一次。*

所以，我们要做的是一次生成所有随机数，然后计算它们的平方范数，以三组为一组，然后构建 15 组。

首先是一些变量定义：

```
set.seed(20131301)
repetitions <- 2000
numperval <- 3
numpergroup <- 15
miu <- 0
sd1 <- 1
sd2 <- 1 
```

由于我们需要两个组，我们将组生成的东西包装到一个自定义函数中。这不是必需的，但确实有助于保持代码清洁可读。

```
generateGroup <- function(repetitions, numperval, numpergroup, m, s) {
    # Generate all data
    data <- rnorm(repetitions*numperval*numpergroup, m, s)

    # Build groups of 3:
    data <- matrix(data, ncol=numperval)
    # And generate the squared norm of those
    data <- rowSums(data*data)
    # Finally build a matrix with 15 columns, each column one dataset of numbers, each row one repetition
    matrix(data, ncol=numpergroup)
} 
```

太好了，现在我们可以为我们的组生成随机数：

```
group1 <- generateGroup(repetitions, numperval, numpergroup, miu, sd1)
group2 <- generateGroup(repetitions, numperval, numpergroup, miu, sd2) 
```

为了计算修剪后的平均值，我们再次使用`apply`：

```
trimmedmeans_group1 <- apply(group1, 1, mean, trim=0.25)
trimmedmeans_group2 <- apply(group2, 1, mean, trim=0.25) 
```

我使用`mean`了`trim`参数而不是排序、丢弃和计算平均值。如果您明确需要排序的数字，您可以手动完成（这次只针对一组）：

```
sorted <- t(apply(group1, 1, sort))
# We have to transpose as apply by default returns a matrix with each observation in one column. I chose the other way around above, so we stick with this convention and transpose. 
```

现在，如果您想手动完成，很容易丢弃第一列和最后两列并生成平均值。

# macos - 如何保存焦点上下文并在 OSX 应用程序中返回它？

> ID：14301517
> 
> 赞同：2
> 
> 时间：2013-01-13T07:25:17.280
> 
> 标签：macos, cocoa, focus, menubar

我正在编写一个菜单栏应用程序，当按下全局热键时会显示一个窗口。该应用程序没有停靠图标和普通菜单（只有 statusItem）。

在激活应用程序之前，假设我在以 chrome 为中心的网页上有一个文本框。当我的应用程序被驳回时，如何重新调整该文本框的焦点。

如果你熟悉 Text Expander，他们会做类似的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:57:50.640

我想通了。你需要一个 NSRunningApplication：

`@implementation AppDelegate { NSRunningApplication *_previousApplication; }`

然后在您激活之前存储上一个应用程序：

`_previousApplication = [[NSWorkspace sharedWorkspace] frontmostApplication];`

最后，在您停用后，只需带回另一个应用程序：

`[_previousApplication activateWithOptions:NSApplicationActivateIgnoringOtherApps];`

# ssh - 如何将 .pub 文件复制到 ssh authorized_key

> ID：14301519
> 
> 赞同：1
> 
> 时间：2013-01-13T07:25:31.797
> 
> 标签：ssh, amazon-web-services, fedora, amazon-elastic-beanstalk

我从 Beanstalkapp 获得了 .pub 文件，并将其下载到本地计算机，现在我要做的是将此 .pub 复制到我的 AWS EC2 fedora 实例，以便我可以通过 beanstalkapp 将文件部署到服务器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T07:48:41.237

密钥需要存在于`~/.ssh/authorized_keys`您的应用程序在 EC2 实例上运行的用户的文件中。

要做到这一点：

SSH 到您的 EC2 实例：

```
ssh -i /path/to/your/amazon/private/key.pem your_ec2_user@your_ec2_instance_ip 
```

然后检查你是否已经有一个 authorized_keys 文件

```
cat .ssh/authorized_keys 
```

如果您没有，则创建一个

```
mkdir .ssh
cd .ssh
touch authorized_keys
chmod 600 authorized_keys 
```

然后在您的源计算机上，在文本编辑器中打开您的 .pub（或在终端中打开它）并将内容复制到剪贴板。

最后，使用 vi、vim、nano 或您选择的文本编辑器附加 .pub 的内容

使用 vi：

```
vi authorized_keys 
```

*   滚动到要插入文本的位置
*   按 i 进入插入模式
*   粘贴 .pub 的内容（CTRL/COMMAND V 或 Edit->Paste 在终端/PuTTY 窗口上）
*   按下`<ESCAPE>`退出编辑模式
*   输入：w！（冒号 w ！`<enter>`）保存只读文件
*   输入 :q 并按下`<enter>`退出 vi

您的 .pub 证书现在位于您的 EC2 实例上。

# database - 使用线程内的数据库时发生 CoInitialize 错误

> ID：14301520
> 
> 赞同：4
> 
> 时间：2013-01-13T07:26:30.503
> 
> 标签：database, multithreading, delphi, delphi-7, ado

使用 Delphi 7，每当我尝试在线程内执行任何数据库工作时，都会收到此错误：

> “尚未调用 CoInitialize”

我在线程内使用了一个包含 ADOConnection.Open 的简单代码。

但是，如果以任何想法的形式使用相同的代码，它可以正常工作吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-13T10:43:23.857

@mjn：我不允许在上一个答案中评论您的评论，因此我创建了一个新答案：从构造函数调用 CoInitialize 是程序员所做的典型错误之一。

构造函数在另一个线程的上下文中执行，但您需要在当前线程上初始化 COM（当线程过程正在运行时，即作为 Execute 方法的一部分）[请参阅](http://msdn.microsoft.com/en-us/library/windows/desktop/ms678543%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-13T07:33:21.707

```
procedure TYourThread.execute;
begin
  CoInitialize(nil); 
  FConnection:=TConnection.Create(...);
  try
    ThreadCode ....
  finally
    FConnection.free;
    CoUninitialize;
  end;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-09T05:44:02.883

另一个原因是 Application.Initialize; 在主应用程序 DPR 中丢失或注释掉。

# php - 在将数据提交到 CodeIgniter 中的数据库之前转义数据的最佳安全实践是什么

> ID：14301521
> 
> 赞同：0
> 
> 时间：2013-01-13T07:26:33.713
> 
> 标签：php, codeigniter

我写了一个插入我的数据库的函数。我有一点疑问。

**我的以下代码是否提供了良好的安全性来在将数据提交到我的数据库之前对其进行转义？**

如果以下代码没有提供将数据插入 db views.php 的好方法，请为此建议我一些解决方案

```
 <? echo form_open('Setups/subject'); ?> 
                 <? echo '<div id="level">'. $subjectname.' : '.form_input($fsubjectname); ?>  
                 <?  echo form_submit($submitbtn); 
                  echo form_reset($resetbtn);  
                  echo '</fieldset>'; ?>

   <? echo form_close(); ?> 
```

控制器.php

```
class Setups extends CI_Controller  {

function subject(){
    $this->load->helper('form'); 
    $this->load->model('Setupsmodel');

    if($this->input->post('subsubmit')){
        $this->Setupsmodel->entry_insert();
    }

    $data=$this->Setupsmodel->subjectsetup(); 
    $this->load->view('admin/setups/subject_setups',$data); 
  }
} 
```

模型.php

```
 class Setupsmodel extends CI_Model {

  function __construct()
{
    // Call the Model constructor
    parent::__construct();
}

function subjectsetup()
{
 $data['subjectname']='Enter Subject Name';  
 $data['fsubjectname']=      
  array('name'=>'subject_name','class'=>'input','size'=>30,'id'=>'txtsubject'); 

 $data['formtopic']='Subject Details Form';

 $data['submitbtn'] = array(
'name' => 'subsubmit',
'class' => 'button',
'value' => 'Submit',
'type' => 'submit',
'content' => 'Submit'

 );
  $data['resetbtn'] = array(
'name' => 'button',
 'class' => 'rsetbutton',
'value' => 'Reset',
'type' => 'reset',
'content' => 'Reset'
);

 return $data;   
}

//--------------Insertion of new record in the table subjectdetails into the db------------

function entry_insert(){
   $this->load->database();
   $data=array(
       'subject_name'=>$this->input->post('subject_name'));
$this->db->insert('subjectdetails',$data);
}   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:37:59.997

你没有过滤你的用户输入，所以这是有风险的。无论如何，`CodeIgniter`带有一个跨站点脚本黑客预防过滤器，它可以自动运行以过滤遇到的所有 POST 和 COOKIE 数据，或者您可以按每个项目运行它。默认情况下，它不会全局运行，因为它需要一些处理开销，而且您可能并非在所有情况下都需要它。要通过 XSS 过滤器过滤数据，您可以使用[安全类中的以下方法](http://ellislab.com/codeigniter/user-guide/libraries/security.html)

```
$data = $this->security->xss_clean($data); 
```

如果您希望过滤器在每次遇到 POST 或 COOKIE 数据时自动运行，您可以通过打开 application/config/config.php 文件并设置它来启用它

```
$config['global_xss_filtering'] = TRUE; 
```

如果您使用表单验证类，它还为您提供`XSS`过滤选项，使用[表单验证类](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#validationrulesasarray)`set_rules`的方法。

```
$this->form_validation->set_rules('input_name', 'input label', 'xss_clean'); 
```

所以在这种情况下，你可以在你的控制器中使用

```
$this->form_validation->set_rules('subject_name', 'Subject Name', 'xss_clean|required');
if($this->form_validation->run())
{
    $this->Setupsmodel->entry_insert();
} 
```

`xss_clean`规则将过滤输入，规则`required`将检查输入是否为空，因此如果验证成功，则您的插入方法将起作用。

# ios - 无需重启的程序化语言本地化

> ID：14301523
> 
> 赞同：2
> 
> 时间：2013-01-13T07:26:52.897
> 
> 标签：ios, objective-c, internationalization

我想用英语和阿拉伯语创建一个 iPhone 应用程序。我检查了语言切换器的国际化文档，但是要使其生效，我必须手动更改 iPhone 设置。我不想那样做。所以我的计划是在主屏幕上我将有两个按钮，分别是英语和阿拉伯语。如果用户点击阿拉伯语，我将有阿拉伯语文本，如果用户选择英语，应用程序将是英语。

任何想法/建议如何完成这项工作？

**注意：**我不想手动更改语言。

* * *

## 编辑 1

根据@Jano，我在下面做了。

创建了新项目。在本地化中添加了阿拉伯语。现在我有两个故事板和两个 InfoPlist.strings 文件。

添加了 Localization.h 和 .m 文件，如答案所示。

目录结构是`MyProject-ar.lproj`&`MyProject-en.lproj`

Plist 的内容是`"myButton01" = "Back";`&`"myButton01" = "ظهر";`

第一个视图控制器有两个按钮，分别是英语和阿拉伯语。在这些按钮上调用操作。

```
- (IBAction)pressedEnglish:(id)sender {
    [Localization sharedInstance].fallbackLanguage = @"ar";
    [Localization sharedInstance].preferredLanguage = @"en";
    NSLog(@"pressed english");
}

- (IBAction)pressedArabic:(id)sender {
    [Localization sharedInstance].fallbackLanguage = @"en";
    [Localization sharedInstance].preferredLanguage = @"ar";
    NSLog(@"pressed arabic");
} 
```

在第二个视图控制器中，我添加了一个按钮并将名称命名为`myButton`. 现在`viewDidLoad`，我有

`[self.myButton setTitle:localize(@"myButton01") forState:UIControlStateNormal];`

我希望这应该可以工作，但是当我运行项目时，我看到按钮为**myButton01**

为什么会发生这种情况？

* * *

## 编辑 2

我有`Edit 1`问题。我重命名`InfoPlist.strings`为`Localizable.strings`并且它起作用了。但是，但是，无论我按什么按钮，我仍然会收到阿拉伯语文本。

在寻找原因时，我发现这是因为我们在`Localization.m`

```
static Localization *shared = nil;
dispatch_once(&pred, ^{
    shared = [[Localization alloc] init];
    shared.fallbackLanguage = @"en";
    shared.preferredLanguage = @"ar"; 
```

问题出在最后两行。由于我们已将阿拉伯语设置为首选语言，因此我总是看到阿拉伯语文本。

我需要做哪些更改，以便可以根据按下的按钮进行更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T08:41:29.853

您想从应用程序 UI 设置应用程序的语言，而忽略设备上的用户首选项。这很不寻常，但是你去...

首先将所有语言字符串写在这样的目录结构中：

```
i18n/en.lproj/Localizable.strings
i18n/ar.lproj/Localizable.strings 
```

为每种支持的其他语言创建一个具有相应两个字母代码的附加目录。

如果文件被识别为 i18n 资源，它们将如下所示： ![在此处输入图像描述](../Images/9ffc635f7ba9a81fcb84630addbfae56.png)

文件将具有以下格式的 key=value：

```
"button.back" = "ظهر"; 
```

在您的代码中，将任何可本地化的字符串替换为该键。例子：

```
[self.stateBtn setTitle:localize(@"button.back") forState:UIControlStateNormal]; 
```

通常你会使用`NSLocalizedString(@"key",@"fallback")`，但由于你想忽略 iPhone 设置，我在`localize(@"key")`上面写了一个宏，它具有以下实现：

本地化.h

```
#ifndef localize
#define localize(key) [[Localization sharedInstance] localizedStringForKey:key]
#endif

@interface Localization : NSObject

@property (nonatomic, retain) NSBundle* fallbackBundle;
@property (nonatomic, retain) NSBundle* preferredBundle;

@property (nonatomic, copy) NSString* fallbackLanguage;
@property (nonatomic, copy) NSString* preferredLanguage;

-(NSString*) localizedStringForKey:(NSString*)key;

-(NSString*) pathForFilename:(NSString*)filename type:(NSString*)type;

+(Localization*)sharedInstance;

@end 
```

本地化.m

```
#import "Localization.h"

@implementation Localization

+(Localization *)sharedInstance
{
    static dispatch_once_t pred;
    static Localization *shared = nil;
    dispatch_once(&pred, ^{
        shared = [[Localization alloc] init];
        [shared setPreferred:@"en" fallback:@"ar"];
    });
    return shared;
}

-(void) setPreferred:(NSString*)preferred fallback:(NSString*)fallback 
{
    self.fallbackLanguage = fallback;
    self.preferredLanguage = preferred;
    NSString *bundlePath = [[NSBundle mainBundle] pathForResource:@"Localizable" ofType:@"strings" inDirectory:nil forLocalization:self.fallbackLanguage];
    self.fallbackBundle = [[NSBundle alloc] initWithPath:[bundlePath stringByDeletingLastPathComponent]];
    bundlePath = [[NSBundle mainBundle] pathForResource:@"Localizable" ofType:@"strings" inDirectory:nil forLocalization:self.preferredLanguage];
    self.preferredBundle = [[NSBundle alloc] initWithPath:[bundlePath stringByDeletingLastPathComponent]];
}

-(NSString*) pathForFilename:(NSString*)filename type:(NSString*)type
{
    NSString *path = [self.preferredBundle pathForResource:filename ofType:type inDirectory:nil forLocalization:self.preferredLanguage];
    if (!path) path = [self.fallbackBundle pathForResource:filename ofType:type inDirectory:nil forLocalization:self.fallbackLanguage];
    if (!path) NSLog(@"Missing file: %@.%@", filename, type);
    return path;
}

-(NSString*) localizedStringForKey:(NSString*)key
{
    NSString* result = nil;
    if (_preferredBundle!=nil) {
        result = [_preferredBundle localizedStringForKey:key value:nil table:nil];
    }
    if (result == nil) {
        result = [_fallbackBundle localizedStringForKey:key value:nil table:nil];
    }
    if (result == nil) {
        result = key;
    }
    return result;
}

@end 
```

这将使用在阿拉伯语文件中查找键字符串，如果缺少键，它将在阿拉伯语文件中查找。如果您希望以另一种方式使用，请从您的按钮处理程序中执行以下操作：

```
[[Localization sharedInstance] setPreferred:@"ar" fallback:@"en"]; 
```

[Github 上的示例项目](https://github.com/j4n0/14301523)。

## 如果本地化不起作用

如果本地化不起作用，请使用 plutil 命令行工具来验证文件的格式。它应该输出：`Localizable.strings: OK`. 例子：

```
$ plutil -lint Localizable.strings
Localizable.strings: OK 
```

[国际化编程主题 >本地化字符串资源](https://developer.apple.com/library/ios/documentation/MacOSX/Conceptual/BPInternational/Articles/StringsFiles.html)中描述了这种格式。您可以选择添加`// single-line`或`/* multi-line */`评论。对于非拉丁语言，建议将 Localized.strings 编码为 UTF-16。您可以在 XCode 的检查器窗格中转换编码。

如果它仍然不起作用，请检查您是否在目标的 Copy files 阶段复制 Localizable.strings 文件。请注意，当您在其中添加 Localizable.strings 文件时，有时它们会显示为红色，继续执行此操作直到文件显示为黑色，然后删除红色的文件（我知道，怪不得 Xcode）。

![复制文件](../Images/f99a6418257e24f5bae7a3f0f76ec968.png)

# javascript - 在 Angular 中，如何使用 $location.path 作为 $http.post 成功回调进行重定向

> ID：14301524
> 
> 赞同：72
> 
> 时间：2013-01-13T07:26:57.433
> 
> 标签：javascript, model-view-controller, angularjs

我正在尝试通过将 Post 发送到 php 文件来创建一个简单的身份验证服务，我需要它在`ng-view`成功时加载我的部分主页。

这是我尝试过的：

```
function loginCtrl($scope, $http, $location){
    $http.post(url,data).success(function(data){
        $location.path('/home');
    });
} 
```

结果我的网址发生了变化但`ng-view`没有更新。当我手动刷新页面时它会更新。

（路由已正确配置`$routeProvider`，我已经测试了使用独立函数而不是回调来重定向它并且它可以工作）

我也尝试过定义`$location.path('/home')`为一个函数，然后在回调中调用它仍然不起作用。

我做了一些研究，发现一些文章说明使用另一个第三方插件时会发生这种情况，我只加载 angular.js

对某些学习材料的任何见解或指示都会很棒

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-01-17T20:42:01.127

这是本文中的 changeLocation 示例[http://www.yearofmoo.com/2012/10/more-angularjs-magic-to-supercharge-your-webapp.html#apply-digest-and-phase](http://www.yearofmoo.com/2012/10/more-angularjs-magic-to-supercharge-your-webapp.html#apply-digest-and-phase)

```
//be sure to inject $scope and $location
var changeLocation = function(url, forceReload) {
  $scope = $scope || angular.element(document).scope();
  if(forceReload || $scope.$$phase) {
    window.location = url;
  }
  else {
    //only use this if you want to replace the history stack
    //$location.path(url).replace();

    //this this if you want to change the URL and add it to the history stack
    $location.path(url);
    $scope.$apply();
  }
}; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-08-04T21:51:43.287

官方指南中有一个简单的答案：

> 它不做什么？
> 
> 当浏览器 URL 更改时，它不会导致整个页面重新加载。要在更改 URL 后重新加载页面，请使用较低级别的 API，$window.location.href。

来源：[https ://docs.angularjs.org/guide/$location](https://docs.angularjs.org/guide/$location "https://docs.angularjs.org/guide/$location")

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-27T09:49:39.177

我正在执行以下页面重定向（从登录到主页）。我还必须将用户对象传递给主页。所以，我正在使用 Windows 本地存储。

```
 $http({
        url:'/login/user',
        method : 'POST',
        headers: {
            'Content-Type': 'application/json'
          },
        data: userData
    }).success(function(loginDetails){
        $scope.updLoginDetails = loginDetails;
        if($scope.updLoginDetails.successful == true)
            {
                loginDetails.custId = $scope.updLoginDetails.customerDetails.cust_ID;
                loginDetails.userName = $scope.updLoginDetails.customerDetails.cust_NM;
                window.localStorage.setItem("loginDetails", JSON.stringify(loginDetails));
                $window.location='/login/homepage';
            }
        else
        alert('No access available.');

    }).error(function(err,status){
        alert('No access available.');      
    }); 
```

它对我有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-24T13:52:09.893

我没有使用`success`，而是将其更改为`then`并且可以正常工作。

这是代码：

```
lgrg.controller('login', function($scope, $window, $http) {
    $scope.loginUser = {};

    $scope.submitForm = function() {
        $scope.errorInfo = null

        $http({
            method  : 'POST',
            url     : '/login',
            headers : {'Content-Type': 'application/json'}
            data: $scope.loginUser
        }).then(function(data) {
            if (!data.status) {
                $scope.errorInfo = data.info
            } else {
                //page jump
                $window.location.href = '/admin';
            }
        });
    };
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-18T06:22:13.723

使用：$window.location.href = '/Home.html';

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-20T03:34:32.780

这是非常简单的代码..但很难罚款..

```
detailsApp.controller("SchoolCtrl", function ($scope, $location) { 
      $scope.addSchool = function () {

        location.href='/ManageSchool/TeacherProfile?ID=' + $scope.TeacherID;
      }
}); 
```

# c# - 如何从 C# 触发动画？

> ID：14301525
> 
> 赞同：1
> 
> 时间：2013-01-13T07:27:07.887
> 
> 标签：c#, windows-phone-7, xaml, windows-phone-8

> **可能重复：**
> [文本更改时启动情节提要](https://stackoverflow.com/questions/1569624/start-storyboard-when-text-changes)

我创建了一个动画：

```
<phone:PhoneApplicationPage
    ...>

    <phone:PhoneApplicationPage.Resources>
        <Storyboard x:Name="MessageFadeInOut" Storyboard.TargetProperty="Opacity">
            <DoubleAnimation From="0" To="1" Duration="0:0:1" BeginTime="0:0:0" />
            <DoubleAnimation From="1" To="1" Duration="0:0:1" BeginTime="0:0:1" />
            <DoubleAnimation From="1" To="0" Duration="0:0:1" BeginTime="0:0:2" />
        </Storyboard>
    </phone:PhoneApplicationPage.Resources> 
```

我想要做的是让一些东西淡入，停留一会儿然后淡出。

我通过以下方式触发它：

```
private void Unit_Tap_1(object sender, System.Windows.Input.GestureEventArgs e)
        {
            Storyboard sb = this.Resources["MessageFadeInOut"] as Storyboard;
            Storyboard.SetTarget(sb, this.Message);
            sb.Begin();
        } 
```

但是在 sb.Begin() 我得到“System.InvalidOperationException”。怎么来的？消息是图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T22:49:40.953

我不确定在这种情况下“消息”是什么，这可能就是您看到此异常的原因。或者它可能不是。

无论哪种方式，您都不应该抓住故事板并手动启动它们。您应该使用 VisualStateManager 通过在每个状态中封装一个故事板来管理您的视觉状态。你可以阅读更多关于这个[@Start Storyboard When Text Changes](https://stackoverflow.com/questions/1569624/start-storyboard-when-text-changes/1569743#1569743)

开始使用 VSM 的一个好方法是观看 Steve White 在 Expression Blend 2 发布中的这些视频：

*   添加控制状态 @ [http://msdn.microsoft.com/en-us/expression/ff898424](http://msdn.microsoft.com/en-us/expression/ff898424)
*   创建自定义按钮 @ [http://msdn.microsoft.com/en-us/expression/ff921363](http://msdn.microsoft.com/en-us/expression/ff921363)
*   自定义复选框的复选标记 @ [http://msdn.microsoft.com/en-us/expression/ff921365](http://msdn.microsoft.com/en-us/expression/ff921365)
*   使用状态动画@ [http://msdn.microsoft.com/en-us/expression/ff921380](http://msdn.microsoft.com/en-us/expression/ff921380)

这些视频中的每一个都是一个系列的一部分，因此请考虑观看该系列的其余部分。还有文章可以看@http [://www.interact-sw.co.uk/iangblog/2008/06/10/visual-state](http://www.interact-sw.co.uk/iangblog/2008/06/10/visual-state)

# wpf - Mvvmlight 工具包 WPF4.5 中不存在 EventToCommand

> ID：14301527
> 
> 赞同：10
> 
> 时间：2013-01-13T07:27:54.133
> 
> 标签：wpf, mvvm-light

我正在使用版本 4.1.26.24928 的最新 MVVMLight Tookit，并且正在使用 WPF 4.5 编写程序。

现在我不能在 VS2012 XAML 文件中使用 EventToCommand，它说**命名空间 "clr-namespace:GalaSoft.MvvmLight.Command;assembly=GalaSoft.MvvmLight.WPF45" 中不存在 "EventToCommand"**。

我的 dll 引用是：

```
System.Windows.Interactivity (v4.5.0.0)

Galasoft.MvvmLight.WPF45 (v4.1.26.24928)

Galasoft.MvvmLight.Extras.WPF45 (v4.1.26.24928) 
```

这是我的代码：

命名空间：

```
xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
xmlns:cmd="clr-namespace:GalaSoft.MvvmLight.Command;assembly=GalaSoft.MvvmLight.WPF45" 
```

文本块：

```
<TextBlock>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="MouseDown">
            <cmd:EventToCommand></cmd:EventToCommand>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</TextBlock> 
```

我做错了吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-09T09:07:27.180

我有一个类似的问题，使用 VS2013。我的说道：

**[命名空间“ http://www.galasoft.ch/mvvmlight](http://www.galasoft.ch/mvvmlight) ”中不存在 EventToCommand**

这听起来像是胡说八道，因为一切似乎都匹配......并且该项目在重建/清理/无论如何之后运行。

**解决方案**：

1）使用NuGet（在解决方案资源管理器中右键单击项目）我卸载了“仅MVVM Light Libraries”（它询问我是否要卸载相关的CommonServiceLocator，我说：是的，随便）

重建，（以防万一）它按预期给出了很多错误，关于 EventToCommand 的错误仍然存​​在。

2) 使用 NuGet 我现在安装了“仅 MVVM Light Libraries”。重建，现在它可以工作了。没有错误，没有警告，继续前进 ;-)

# eclipse - SpagoBI AxisFault

> ID：14301532
> 
> 赞同：3
> 
> 时间：2013-01-13T07:28:50.170
> 
> 标签：eclipse, apache, tomcat, http-status-code-404, axis

我正在尝试通过 SpagoBISDK 中的 .jar 文件将 SpagoBI 集成到我现有的 Web 应用程序中。

1.  我下载了他们的 All-In-One-SpagoBI，其中包含他们的 BI 服务器，该服务器已经配置了 apache tomcat 6.0.18。当我通过 Web 浏览器上的此链接对其进行测试时，它运行良好：localhost:8080/SpagoBI

2.  之后，我下载了他们的示例项目 SpagoBISDK.war。当我将 .war 文件放在“BI 服务器配置”的 apache-tomcat-6.0.18/webapps 文件夹中并启动 tomcat 时。当我通过 Web 浏览器上的此链接对其进行测试时，它运行良好：localhost:8080/SpagoBISDK。

3.  下载 All-In-One-SpagoBI 的链接：http://forge.ow2.org/project/download.php?group_id=204&file_id= [18770](http://forge.ow2.org/project/download.php?group_id=204&file_id=18770)

4.  SpagoBISDK 下载链接：http://forge.ow2.org/project/download.php?group_id=204&file_id= [18561](http://forge.ow2.org/project/download.php?group_id=204&file_id=18561)

注意：SpagoBISDK 需要 All-In-One-SpagoBI 才能工作。此外，SpagoBISDK.war 就像一个示例 Web 应用程序项目。

**问题：** 当我将SpagoBI.war作为项目导入Eclipse，使用“BI server-configured”apache-tomcat-6.0.18运行项目时，遇到如下错误：

```
INFO: Server startup in 444 ms  
AxisFault  
faultCode: {http://xml.apache.org/axis/}HTTP  
faultSubcode:   
faultString: (404)Not Found  
faultActor:   
faultNode:   
faultDetail:   
{}:return code:  404  
<html><head><title>Apache Tomcat/6.0.18 - Error report</title><style><!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--></style> </head><body><h1>HTTP Status 404 - /SpagoBI/sdk/TestConnectionService</h1><HR size="1" noshade="noshade"><p><b>type</b> Status report</p><p><b>message</b> <u>/SpagoBI/sdk/TestConnectionService</u></p><p><b>description</b> <u>The requested resource (/SpagoBI/sdk/TestConnectionService) is not available.</u></p><HR size="1" noshade="noshade"><h3>Apache Tomcat/6.0.18</h3></body></html>  
{http://xml.apache.org/axis/}HttpErrorCode:404  

(404)Not Found  
at org.apache.axis.transport.http.HTTPSender.readFromSocket(HTTPSender.java:744)  
at org.apache.axis.transport.http.HTTPSender.invoke(HTTPSender.java:144)  
at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)  
at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)  
at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)  
at org.apache.axis.client.AxisClient.invoke(AxisClient.java:165)  
at org.apache.axis.client.Call.invokeEngine(Call.java:2784)  
at org.apache.axis.client.Call.invoke(Call.java:2767)  
at org.apache.axis.client.Call.invoke(Call.java:2443)  
at org.apache.axis.client.Call.invoke(Call.java:2366)  
at org.apache.axis.client.Call.invoke(Call.java:1812)  
at it.eng.spagobi.sdk.test.stub.TestConnectionServiceSoapBindingStub.connect(TestConnectionServiceSoapBindingStub.java:100)  
at it.eng.spagobi.sdk.proxy.TestConnectionServiceProxy.connect(TestConnectionServiceProxy.java:67)  
at org.apache.jsp.documentsList_jsp._jspService(documentsList_jsp.java:95)  
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)  
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)  
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)  
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)  
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)  
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)  
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)  
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)  
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)  
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)  
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)  
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)  
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)  
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)  
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)  
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)  
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)  
at java.lang.Thread.run(Unknown Source) 
```

我搜索了其他人面临的类似问题。许多人提到网络服务的链接不正确。但是，我通过 web 浏览器运行 webapps 文件夹中的 SpagoBI.war 文件测试了链接（如上所述的第 2 步），它们运行良好。

如果有人能向我解释为什么会这样，我将不胜感激，并希望我该如何解决这个问题。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:07:36.193

关于我的问题，我已经解决了。

1.  默认情况下，Eclipse 使用“使用工作空间元数据（不修改 Tomcat 安装）”。您必须将服务器位置更改为“使用 Tomcat 安装（控制 Tomcat 安装），以便 SpagoBI SDK 示例项目在将其导出到 Eclipse 后正常工作。请参阅链接 - [Tomcat 在 Eclipse 中启动但无法连接到 http： //本地主机：8085/](https://stackoverflow.com/questions/2280064/tomcat-...-to-link-to-http-localhost8085)

2.  如果您无法更改设置，其他人提供了有关如何更改设置的说明。请参阅链接 - [Eclipse“服务器位置”部分已禁用，需要更改以使用 Tomcat 安装](https://stackoverflow.com/questions/1012378/eclipse...nge-to-use-tomcat-installation)

希望这可以帮助！

# powershell - 从另一台服务器远程运行任务调度程序

> ID：14301539
> 
> 赞同：0
> 
> 时间：2013-01-13T07:29:33.010
> 
> 标签：powershell, task, scheduler

是否可以从另一台服务器中的另一个任务调度程序运行任务调度程序！？我所有的任务都是为了运行 PowerShell

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:54:29.827

Yes.

Open Task Scheduler, click Action -> Connect to another computer..., then enter the name of the remote computer and click OK.

Sean.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T21:15:37.007

[http://blogs.msdn.com/b/powershell/archive/2009/10/15/introducing-the-windows-7-resource-kit-powershell-pack.aspx](http://blogs.msdn.com/b/powershell/archive/2009/10/15/introducing-the-windows-7-resource-kit-powershell-pack.aspx)

Check the Task Scheduler Module.

Import-Module TaskScheduler

# javascript - 使用数据属性创建 div

> ID：14301540
> 
> 赞同：26
> 
> 时间：2013-01-13T07:29:35.657
> 
> 标签：javascript, jquery

我正在通过以下方式创建 div

```
$('<div/>', {
    "class" : 'draggable player' + player + ' unit unit' + unit
}) 
```

而且我找不到可以像分配类一样分配给它的其他属性。特别是如果我可以分配`data`或`attr`？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-13T07:54:36.027

根据[`jQuery()`函数文档](http://api.jquery.com/jQuery/#jQuery2)（的别名`$()`），您可以在第二个参数中定义属性、事件和方法。

所以是的，你定义的任何东西[`attr()`](http://api.jquery.com/attr/)都是公平的游戏。这包括“data-whatever”*属性*（奇怪的是可以通过 访问`$elem.data('whatever')`），但是它们不会[`jQuery.data`](http://api.jquery.com/jQuery.data/)像通过定义的任何变量一样保存[`$elem.data('name', 'value')`](http://api.jquery.com/data/)（至少在您调用之前`$elem.data('whatever')`- 请参阅[http://api.jquery.com/jQuery.data/ #entry-longdesc-1](http://api.jquery.com/jQuery.data/#entry-longdesc-1)）。

所以澄清一下：

```
var $elem = jQuery('<div/>', { 'data-test': "Testing" }); 
```

将创建这个元素，并返回一个包含它的 jQuery 对象：

```
<div data-test="Testing"></div> 
```

从那里，您将能够：

```
jQuery.data($elem[0], 'test'); // => undefined
$elem.data('test');            // => "Testing"
jQuery.data($elem[0], 'test'); // => "Testing" 
```

当然，`$elem.attr('data-test')`也会起作用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-13T07:32:02.827

您可以分配所需的任何属性：

```
$('<div/>', {
    "class" : 'draggable player' + player + ' unit unit' + unit,
    "data-info": 'Anything you want',
    "even-non-validating-attributes": 'ANYTHING!!'
}); 
```

这是小提琴：http: [//jsfiddle.net/vCaym/](http://jsfiddle.net/vCaym/)

# build-system - 为什么 tup 每个目录需要一个 Tupfile？

> ID：14301543
> 
> 赞同：5
> 
> 时间：2013-01-13T07:30:40.067
> 
> 标签：build-system, tup

我已经阅读了很多关于[tup 构建系统](http://gittup.org/tup/)的信息。

很多地方都说tup“不支持递归规则”，每个目录都*需要*一个Tupfile。然而，我还没有看到官方声明或解释。

上述说法正确吗？

如果是，为什么，这对于哪种任务有问题？一个例子会很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-14T12:04:37.833

值得注意的是，目前 Tupfile 可以在不同的目录中创建文件。您总是可以从不同的目录读取文件，因此目前您可以为整个项目使用一个 Tupfile。

更多信息：[https](https://groups.google.com/d/msg/tup-users/h7B1YzdgCag/qsOpBs4DIQ8J) ://groups.google.com/d/msg/tup-users/h7B1YzdgCag/qsOpBs4DIQ8J （有点过时）+ [https://groups.google.com/d/msg/tup-users/ -w932WkPBkw/7ckmHJ9WUCEJ](https://groups.google.com/d/msg/tup-users/-w932WkPBkw/7ckmHJ9WUCEJ)（使用​​组作为输入的新语法）

如果您使用新的 LUA 解析器，您还可以拥有一个“默认”Tupfile - 请参阅此处[http://gittup.org/tup/lua_parser.html](http://gittup.org/tup/lua_parser.html)并查看有关 Tupdefault.lua 的信息

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-09T20:03:04.950

一些答案已经提到，限制实际上是每个要输出文件的目录一个 Tupfile，而不是每个目录一个 Tupfile。在最近的提交中，此限制已[放宽](https://github.com/gittup/tup/commit/9ec4c983aaf97a49501df33972e90a8b03247c4c)，tup 允许您将输出文件也放置在 Tupfile 的子目录中。

此外，使用[variables](http://gittup.org/tup/manual.html)，可以在构建树的任何位置生成输出文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T13:45:52.177

官方声明可以在tup手册中找到：http: [//gittup.org/tup/manual.html](http://gittup.org/tup/manual.html)

> 您必须在要基于输入文件创建输出文件的 tup 层次结构中的任何位置创建一个名为“Tupfile”的文件。输入文件可以在 tup 层次结构中的任何其他位置，但输出文件必须写入与 Tupfile 相同的目录中。

（引用是手册中 TUPFILES 部分的第一段）

AFAIK，这是一个限制，它与 tup 如何在子目录中存储依赖项的方式有关，`.tup`但我不知道细节。

# text - .txt 到二进制 c++，int 问题

> ID：14301546
> 
> 赞同：0
> 
> 时间：2013-01-13T07:31:15.433
> 
> 标签：text, binary, int

我有一个要转换为二进制的文本文件。它是一个 7 位数的号码。后跟一个名称，然后重复列出许多名称。

```
1234567 First Last
7654321 First Last 
```

因为它是一个 7 位数的 int，所以我无法使用这种带有 int 结构的方法将它输出到二进制文件。每当我写入它时，它都会给我一个非常大的 .DAT（二进制）文件，即使只有 3 个名称。有没有更好的输出方法让我的二进制 .dat 文件看起来大约 200kb 并且最终不会在 20mb+ 范围内？

```
const int MAX = 50;

struct StudentRegistration{
    int studentID;
    char name[MAX];
};

    fstream afile;
    ifstream infile;

  afile.open (fileName2, ios::out | ios::binary);
    infile.open (fileName1);

 while (infile >> s.studentID)
    {
        infile.get(space);
        infile.getline(&s.name, MAX);
        afile.seekp((s.studentID-1)*sizeof(StudentRegistration), ios::beg);
        afile.write(reinterpret_cast <const char *>(&s), sizeof(s));
    }

    afile.close();
    infile.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:09:33.110

我删除了 seekp 行，它现在似乎做了我想做的事。

# php - 动态创建输入字段并需要发送值

> ID：14301552
> 
> 赞同：1
> 
> 时间：2013-01-13T07:32:46.463
> 
> 标签：php, forms

我没有在这里写我的确切代码，但我给出了基本的想法。

```
<form action="thispageagain.php">

for($i=0; $i<$n; $i++){
echo "<input type=\"submit\" value=\"view post\" />";
}

</form> 
```

现在，当有人点击查看帖子时，我必须发送该帖子的帖子 ID。我怎样才能做到这一点。我必须在这里使用 post 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:41:32.527

每个提交输入字段都需要采用自己的形式。

```
for ($i = 0; $i < $n; $i++) {
    echo "<form action="thispageagain.php">";
    echo "<input type=\"submit\" value=\"view post\" />";
    echo "</form>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T08:25:00.563

您需要正确发送帖子 ID...如果我没有弄错您的问题，那么您可以按以下方式进行操作。我假设 $i 代表您要发送的帖子 ID。

```
<?php
  if(isset($_POST['formsubmitted']) && $_POST['formsubmitted'] === 'Y'){
      $postId = array_keys($_POST['btnviewPost']);
      print_r( $postId);
  }
?>
<form action="" method="post">
 <input type="hidden" name="formsubmitted" value="Y" />
 <?php for($i=0;$i<$n;$i++){?>
    <input type="submit" value="view post" name="btnviewPost[<?php echo $i?>]" />
 <?php }?> 
</form> 
```

# php - PHP OOP MySQL (WAMP) 变量范围

> ID：14301554
> 
> 赞同：0
> 
> 时间：2013-01-13T07:33:02.717
> 
> 标签：php, mysql, scope

我遇到范围问题；我已经阅读了多个关于在 MySQL 中使用 OOP PHP 的 TUTS，但我仍然遇到问题.. 所以这里是：我有一个变量 ($GetUsersSQL)，其中包含 MySQL SELECT 用于检索用户数据以填充表。但是，当尝试对这些数据使用 MySQL UPDATE 时；它说 POST 数据为空。这就是我所拥有的（请原谅我在代码中的创可贴修复）。

```
Class Lib
{
        //public variables are still not retrieved by uploaddata method.
        public $rank;
        public $username;
        public $regiment;
        public $EventsRan;
        public $RankUp;
        public $DatePromoted;
        public $ReadNextRank;
        public $TimeReady;
        public $registered;
        public $ontag;
        public $Notes;
        public $GetUsersSQL;

    function Connection($host,$user,$password,$datab){
        $con = mysql_connect($host,$user,$password) or die(mysql_error());
            if (isset($con))
                {
                    $db = mysql_select_db($datab);
                }
        $LoginSQL = /**mysql_query("SELECT regiment FROM Users WHERE username='$username' AND password='$userpassword'")**/ mysql_query("SELECT * FROM NewOrder");

        $regiment = $LoginSQL;
    }
    function GetUsers($rank){
    $GetUsersSQL =/** mysql_query("SELECT * FROM Users WHERE regiment='$regiment' ORDER BY rank DESC")**/ mysql_query("SELECT * FROM NewOrder where rank='$rank'");
            while ($row = mysql_fetch_array($GetUsersSQL))
                {
                echo '
                    <tr>
                    <td>
                    <input  type="text" value="'.$row['Rank'].'" id="rank"></td>
                    <td><input  type="text" value="'.$row['Name'].'" id="name"></td>
                    <td><input type="text" value="'.$row['Regiment'].'" id="regiment"></td>
                    <td><input type="text" value="'.$row['Events Ran'].'" id="EventsRan"></td>
                    <td><input type="text" value="'.$row['Rank Up?'].'" id="RankUp"></td>
                    <td><input type="text" value="'.$row['Read next Rank'].'" id="ReadyNextRank"></td>
                    <td><input type="text" value="'.$row['Date Promoted'].'" id="DateLastPromoted"></td>
                    <td><input type="text" value="'.$row['Time ready'].'" id="TimeReady"></td>
                    <td><input type="text" value="'.$row['Registered'].'" id="Registered"></td>
                    <td><input type="text" value="'.$row['On Tag?'].'" id="OnTag"></td>
                    <td><input type="text" value="'.$row['Notes'].'" id="Notes"></td>
                ';
                }

        }
        public function __UploadData()
            {
                return $this->GetUsersSQL;
                //this is still broken
                if (isset($_POST['rank']))
                {
                    $this->rank = $_POST['rank'];
                    $this->name = $_POST['name'];
                    $this->regiment = $_POST['regiment'];
                    $this->EventsRan = $_POST['EventsRan'];
                    $this->RankUp = $_POST['RankUp'];
                    $this->DatePromoted = $_POST['DateLastPromoted'];
                    $this->ReadNextRank = $_POST['ReadyNextRank'];
                    $this->TimeReady = $_POST['TimeReady'];
                    $this->registered = $_POST['Registered'];
                    $this->ontag = $_POST['OnTag'];
                    $this->Notes = $_POST['Notes'];

                    $Query = mysql_query("UPDATE gfy SET rank='$this->rank', name='$this->name',ReadNextRank ='$this->ReadNextRank', regiment='$this->regiment', EventsRan='$this->EventsRan', RankUp='$this->RankUp', DatePromoted='$this->DatePromoted', timeReady='$this->Timeready',registered='$this->registered',ontag='$this->ontag' notes='$this->notes' WHERE name='$this->name'")or die(mysql_error());
                }
                else
                {
                    echo 'EMPTY';
                }

            }
} 
```

自太平洋时间 2013 年 1 月 13 日凌晨 1:11 起进行了以下更改：致 GetUsers($rank): $this->GetUsersSQL = '...'; 到 _UploadData()： isset 更改为 isset($this->rank) 并且查询现在使用 '".$this->rank."'... vs '$rank'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T07:47:58.720

在你`__UploadData()`使用

```
public function __UploadData()
{
    return $this->GetUsersSQL; // execution is being terminated here
    $this->rank = $_POST['rank']; // out of reach
    $this->name = $_POST['name']; // out of reach
    // more code here
} 
```

在这种情况下，因为`return`这里的关键字在`return $this->GetUsersSQL`进一步之前返回。同样在您的`GetUsers()`功能中

```
function GetUsers($rank){
    $GetUsersSQL = "...";
    // ...
} 
```

你应该使用

```
$this->GetUsersSQL = "..."; 
```

同时替换以下行

```
mysql_query("UPDATE gfy SET rank='$this->rank', name='$this->name',ReadNextRank ='$this->ReadNextRank', regiment='$this->regiment', EventsRan='$this->EventsRan', RankUp='$this->RankUp', DatePromoted='$this->DatePromoted', timeReady='$this->Timeready',registered='$this->registered',ontag='$this->ontag' notes='$this->notes' WHERE name='$this->name'")or die(mysql_error()); 
```

和

```
mysql_query("UPDATE gfy SET rank='".$this->rank."', name='".$this->name."'..."); 
```

# javascript - 从 jsp 发送到 javascript 函数时值意外更改

> ID：14301555
> 
> 赞同：0
> 
> 时间：2013-01-13T07:33:19.773
> 
> 标签：javascript, jsp

我在jsp中有一段代码：

```
String temp=new SimpleDateFormat("MMddyyyy").format((java.sql.Date)ppdates.get(authShown));
out.print(temp);

<select id="pcol<%=i%><%=weekNo%><%=au%>" onChange="pSelectedAuth(<%=i%>,<%=weekNo%>,<%=au%>,<%=currentEmployee%>,<%=temp%>)"> 
```

这将打印`06042012`在屏幕上。

现在，我的 javascript 函数如下：

```
function pSelectedAuth(formID,weekNo, index, currentEmployee,startDate){
alert(formID+":"+weekNo+":"+index+":"+currentEmployee+":"+startDate); 
```

onchange，此警报显示`1623050` 有人知道如何让我`06042012`回来吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T07:39:07.213

你没有做任何事情来引用你的论点（也就是说——你没有将它们包装在`'...'`or中`"..."`），所以它们被解释为 JavaScript 表达式。在 JavaScript 源代码中，`06042012`被解释为 base-8 整数（因为前导`0`），所以它表示 1623050。

要解决此问题，请务必将 JavaScript 字符串包含在`'...'`or中`"..."`（以及正确转义任何内部引号、反斜杠、换行符、特殊字符、`</`等等）。这样，您将拥有`'06042012'`or `"06042012"`，JavaScript 将按照您的意愿将其解释为字符串。

# python - python：全局编辑时列表更改

> ID：14301560
> 
> 赞同：0
> 
> 时间：2013-01-13T07:34:58.883
> 
> 标签：python, python-2.7

```
a = [1]

def do():
    global a
    b=a
    print b
    a[0] = 2
    print b

do() 
```

输出：1 2

我很确定这与“a”是一个全局列表这一事实有关。有人可以向我解释为什么全局变化时变量 b 会发生变化。我怎么可能阻止它发生？

问题的扩展：您将如何处理进一步的嵌套，例如：

```
a = []
b = []
def do():
    global a, b
    b.append(a[:])
    print a, b
    a[0][0] +=1
    print a, b

a.append([1])
do() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T07:36:54.930

在这一行`b=a`中，您实际上创建了一个引用 b，它指向 a。这在 python 中不会创建列表的新副本，而只是创建指向它的新链接。

如果要创建副本，`a`则需要明确执行。使用列表推导，您可以这样做：

```
b = a[:] 
```

这将创建一个将被 b 引用的 a 的副本。看看它在行动：

* * *

```
>>> a = [1]
>>> b = a #Same list
>>> a[0] = 2
>>> b
[2] #Problem you are experiencing 
```

您可以通过以下方式亲自查看它们是否引用相同的对象：

```
>>> a is b
True 
```

true 表示它们指的是同一个对象。

```
>>> b = a[:] #Solution <<-------------- 
```

再次做同样的测试：

```
>>> a is b
False 
```

并且问题解决了。它们现在指代不同的对象。

```
>>> b
[2]
>>> a[0] = 3 #a changed
>>> a
[3]
>>> b
[2] #No change here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:43:53.927

当您分配时，您将`b = a`引用复制到保存到的列表对象中`a`，`b`因此它们指向同一个列表。对基础对象的更改将通过任一引用反映出来。

如果要创建列表的副本，请使用

```
b = list(a) 
```

或者，一种适用于*大多数*对象的方法：

```
import copy
b = copy.copy(a) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T07:47:38.400

我认为您对python的变量模型有误解。这是我读到的[文章](http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#other-languages-have-variables)，它让我点击了（“其他语言有变量”和“Python 有名称”部分）。

# java - 在 Mac OS X 上使用 sqlite4java Jar 的 UnsatisfiedLinkError

> ID：14301562
> 
> 赞同：3
> 
> 时间：2013-01-13T07:35:23.243
> 
> 标签：java, macos, unsatisfiedlinkerror

我在我的 Java 应用程序中使用 sqlite4java 库，当我在 Eclipse 中运行它时它工作得很好。但是当我构建可运行的 JAR 并尝试在 Mac OS X 上运行它时，我收到以下错误：

```
Error: Could not load database file. 
Error: com.almworks.sqlite4java.SQLiteException: [-91] cannot load library:
java.lang.UnsatisfiedLinkError: no sqlite4java-osx-x86_64 in java.library.path 
```

即使我选择“将所需的库打包到生成的 JAR 中”也会发生这种情况，这应该会复制我需要的所有文件。为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:35:23.243

与许多其他依赖项不同，sqlite4java 使用基于主机平台的附加文件来与 SQLite 数据库交互。当 Eclipse 打包所需的库时，它只复制 sqlite4java.jar 文件，而不复制其他所需的文件。

您可能认为解决方案是使用“将所需库复制到生成的 JAR 旁边的子文件夹”选项导出可运行的 JAR 文件并手动添加丢失的文件，但是，唉，这似乎也不起作用.

我发现的最佳解决方案实际上是对 Mac 最友好的解决方案。您无需导出为可运行的 JAR 文件，而是导出为 Mac OS X 应用程序包！要在 Eclipse 中执行此操作：

1.  转到“文件”->“导出...”
2.  在“其他”文件夹下，选择“Mac OS X 应用程序包”
3.  填写第一个屏幕，然后单击“下一步”
4.  在“添加到捆绑包”部分下，从 SQLite 下载的“添加到类路径”部分添加“libsqlite4java-osx.jnilib”文件（您也可以添加 libsqlite4java-osx-10.4.jnilib 和 libsqlite4java-osx-ppc。 jnilib 如果您支持旧硬件）
5.  点击“完成”

您现在将拥有一个可以正确加载 sqlite4java 的 Mac OS X 应用程序。

# php - 使用 ajax 调用从不同的用户 id 获取下 5 个条目（分页）

> ID：14301564
> 
> 赞同：0
> 
> 时间：2013-01-13T07:35:28.223
> 
> 标签：php, mysql, ajax, pagination

我有一个页面 Home.php，它对 load_more.php 进行了 ajax 调用。Home.php 显示 5 个条目，但仅显示相同用户的 1 个条目（隐藏其他条目）。对于接下来的 5 个条目，我调用 load_more.php，它应该返回接下来的 5 个条目，但又隐藏了类似用户的条目？

如何将最后一个 id 返回到 Home.php？这样，当用户单击“更多”时，会检索并显示其他 5 个条目。

谢谢！欣赏它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:57:58.993

假设您的 Ajax 调用一次检索 5 个，则需要传递一个偏移量。然后它将这个偏移量发送到限制子句中的数据库查询。就像是：

```
SELECT * FROM users GROUP BY users LIMIT 5,5 
```

这将显示从结果 #6 开始的 5 个结果。要显示下一个 5，您将再次调用 load_more.php，这次将偏移量传递给 10：

```
SELECT * FROM users GROUP BY users LIMIT 10,5 
```

# c++ - 使用 OpenCV 的矩阵运算（加减法） OpenCV C++

> ID：14301576
> 
> 赞同：0
> 
> 时间：2013-01-13T07:39:11.063
> 
> 标签：c++, image-processing, opencv, c++11

我使用openCV的addweighted函数将两个图像加在一起

```
addWeighted(ROI,1,watermark,0.5,0.0,ROI); 
```

然而，当我尝试做相反的事情时，我得到了黑色的补丁，而不是从结果图像中删除第二个图像。

```
addWeighted(ROI,1,watermark,-0.5,0.0,ROI); 
```

我也尝试过使用减法，但我得到了相同的结果。下图描述了我在说什么。请注意，我的算法没有正确检测到所有带水印的区域，但是对于那些被正确检测到的区域，我无法从中减去水印。

![在此处输入图像描述](../Images/74c21361c57e54df9be5a8608ae83fb9.png)

如果你们能建议我如何做减法，将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:14:49.657

根据[addWeighted](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html)的文档，你给予一半的权重`watermark`（你能解释为什么？）并且你的最后一个参数是深度类型......不是数组......所以它应该是 -1 如果`watermark`和`ROI`是相同的深度，或者你把您想要输入的深度值...如果您在文档中注意到最终值是一个饱和值...也就是说，如果它超过 255，它会被拉低到 255...所以难怪你减去你会赢' t 得到两个确切的值。

** 编辑：** 对你来说，lena 图像`I + 0.5W = R`在哪里，水印在哪里，结果图像在哪里。由于在 255 以上被截断，因此将 存储在整数矩阵中。由于您使用的是 OpenCV 2.1，因此最好通过扫描图像而不是使用 OpenCV API 来执行加权加法。这样，您可以将 保存在一个整数矩阵中，您可以获得的最大值为 (255 + 255)，这将很容易存储。对于显示使用 uchar 矩阵（截断一个）和反转过程使用整数矩阵...`I``W``R``R``R``CV_32UC3``R`

![在此处输入图像描述](../Images/9be441432fef08b738840267ef95a5f0.png)

# php - 如何使用 jquery ajax 方法访问 php 页面中动态变化的变量到其他 html 页面？

> ID：14301577
> 
> 赞同：1
> 
> 时间：2013-01-13T07:39:13.403
> 
> 标签：php, jquery

这是与变量相呼应的 php 页面`$correct`。其初始值为`0`。它随着其值的增加而变化，但是当我使用 jquery ajax 方法将其回显到其他页面后加载此值时，它只返回`0`不返回增量值。

```
<?php

$i=1;
while($i<=10) {

    $answer="answer_".$i;
    ${"answer_$i"}=$_POST[$answer];
    $i++;
}

$correct=0;

if($answer_1=="a")
$correct=$correct+10;
else {
    if($answer_1=="b" || $answer_1=="c" || $answer_1=="d")
        $correct=$correct-10;

}
if($answer_2=="a")
$correct=$correct+10;
else {
if($answer_2=="b" || $answer_2=="c" || $answer_2=="d")
            $correct=$correct-10;
}
if($answer_3=="a")
$correct=$correct+10;
else {
    if($answer_3=="b" || $answer_3=="c" || $answer_3=="d")
        $correct=$correct-10;
}
if($answer_4=="a")
$correct=$correct+10;
else
{   if($answer_4=="b" || $answer_4=="c" || $answer_4=="d")
        $correct=$correct-10;
}
if($answer_5=="a")
$correct=$correct+10;
else
{   if($answer_5=="b" || $answer_5=="c" || $answer_5=="d")
        $correct=$correct-10;
}
if($answer_6=="a")
$correct=$correct+10;
else
{   if($answer_6=="b" || $answer_6=="c" || $answer_6=="d")
        $correct=$correct-10;
}
if($answer_7=="a")
$correct=$correct+10;
else
{   if($answer_7=="b" || $answer_7=="c" || $answer_7=="d")
        $correct=$correct-10;
}
if($answer_8=="a")
$correct=$correct+10;
else {
    if($answer_8=="b" || $answer_8=="c" || $answer_8=="d")
        $correct=$correct-10;
}
if($answer_9=="a")
$correct=$correct+10;
else
{
    if($answer_9=="b" || $answer_9=="c" || $answer_9=="d")
        $correct=$correct-10;
}
if($answer_10=="a")
$correct=$correct+10;
else
{
    if($answer_10=="b" || $answer_10=="c" || $answer_10=="d")
        $correct=$correct-10;
}
echo "$correct";
?> 
```

这是访问此变量的其他页面上的脚本，`$correct`但它总是导致`0`，尽管变量值在 php 页面上发生变化？我该如何纠正这个？

```
<script>
$(function(){
$('form').submit(function(event){
event.preventDefault();
$.ajax({
url:"results.php",
type:"POST",
success:function(result){
console.log(result);
$('#results').html("<p>"+result+"</p>");
}
});
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T07:58:13.557

您没有将任何答案从 AJAX 传递给 PHP。
因此，您在 PHP 中的任何条件都不满足。
因此它返回 0。

要通过 post 请求传递数据，请参阅 ajax 文档 (http://api.jquery.com/jQuery.ajax/)。您将要查看该`data`属性。

你会想要这样的东西：

```
$.ajax({
    url:"results.php",
    type:"POST",
    data: {
        answer_1: 'blue'    // what colour is the sky?
    },
    success:function(result){
        console.log(result);
        $('#results').html("<p>"+result+"</p>");
    }
}); 
```

然后你的 PHP 需要收集数据，但我想你已经有了这个设置：

```
$answer1 = $_POST['answer1']; 
```

* * *

**更新：** 包括来自用户评论的示例信息。

```
<input type="radio" name="answer_1" value="a" id="question_1_answer_a"/> 
<label for="question_1_answer_a">anirudh</label> 
<input type="radio" name="answer_1" value="b" id="question_1_answer_b"/> 
<label for="question_1_answer_b">anirudh</label> 
```

所以你想要这样的东西：

```
data: {
    answer_1: $('input[name="answer_1"]').val(),    // from HTML example
    answer_2: $('input[name="answer_2"]').val(),
    answer_3: $('input[name="answer_3"]').val()
    // etc
}, 
```

如果您不打算使用 jQuery 修改任何表单数据，您总是可以将其序列化并发布：http: [//api.jquery.com/serialize/](http://api.jquery.com/serialize/)

# ruby-on-rails - 我如何使 to_json 在 Rails 中工作，因为它在普通 Ruby 中工作？

> ID：14301578
> 
> 赞同：0
> 
> 时间：2013-01-13T07:39:44.983
> 
> 标签：ruby-on-rails, ruby, json

对于在 Rails 项目之外依赖 Ruby 的 JSON 序列化的许多人来说，这个问题将会浮出水面。当他们尝试在 Rails 项目中使用他们的代码时，它不会按预期工作。

以下代码从 Ruby（无 Rails）运行，打印 A。从 rails 控制台运行时，它打印 Hash。

这意味着我的 json 序列化在我的命令行 lib/app 中有效，但在导入 Rails 项目时无效。

这是什么原因/解决方法？

```
require 'json'

class A
  def to_json(*a)
    {:json_class => self.class.name}.to_json(*a)
  end
  def self.json_create(o)
    A.new
  end
end

class B
  attr_accessor :value
  def initialize(value)
    @value = value
  end

  def to_json(*a)
    {:json_class => self.class.name, :value => value}.to_json(*a)
  end
  def self.json_create(o)
    B.new(o['value'])
  end
end
b = JSON.parse(B.new(A.new).to_json)
puts b.value.class 
```

Ruby 是 1.9.3，Rails 是 3.2.10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T08:22:45.707

问题是 Rails 使用[ActiveSupport::JSON。](http://api.rubyonrails.org/classes/ActiveSupport/JSON.html)

对于序列化，它使用 as_json，而不是 to_json。所以这条线

```
 {:json_class => self.class.name, :value => value}.to_json(*a) 
```

在散列中不包含 JSON 版本的值，因为 A 类没有 as_json 方法。为了让你的代码在 Ruby 和 Rails 中都能正常工作，你需要显式调用 A::to_json 和 A::json_create 方法，如下所示：

```
 def to_json(*a)
    {:json_class => self.class.name, :value => JSON.dump(value)}.to_json(*a)
  end
  def self.json_create(o)
    B.new(A.json_create(o['value']))
  end 
```

然后打电话，`b = JSON.parse(JSON.dump(B.new(A.new)))`

这将修复示例，但我认为您可能想阅读[to_json vs as_json 的解释](http://jonathanjulian.com/2010/04/rails-to_json-or-as_json/)并适当地修改您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:30:40.113

根据其他人的说法，答案是肯定的。 [http://www.rubyhood.com/2011/06/rails-spoiled-standard-json-library.html](http://www.rubyhood.com/2011/06/rails-spoiled-standard-json-library.html)

简而言之，让 as_json 做 to_json 所做的事情。这让我得到了我想要/期望的东西（以及我从纯 Ruby - Rails 中得到的东西）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T09:17:10.930

对于那些仍在徘徊为什么在 Rails 中发生奇怪行为的人，可以在以下位置找到解释： [https](https://github.com/flori/json/compare/v1.6.7...v1.6.8) ://github.com/flori/json/compare/v1.6.7...v1.6.8 和 [https://github.com /intridea/multi_json/compare/v1.5.0...v1.5.1](https://github.com/intridea/multi_json/compare/v1.5.0...v1.5.1)

由于在这些版本升级中 JSON.parse 的工作方式不同。JSON.load 可能仍然有用。最快的解决方法是：

```
gem 'json', '1.6.7'
gem 'multi_json', '1.5.0' 
```

但留下一些安全问题。建议在需要时显式提供`create_additions: true`JSON 解析。

# haskell - 如何在 Haskell 中查找类的源代码（实现）

> ID：14301581
> 
> 赞同：4
> 
> 时间：2013-01-13T07:40:16.620
> 
> 标签：haskell, happstack

我正在阅读有关 IxSet 的[http://happstack.com/docs/crashcourse/AcidState.html#ixset](http://happstack.com/docs/crashcourse/AcidState.html#ixset)的一些文档，我想知道如何查看从 Data.IxSet 导入的 Indexable 类型类的来源。

然后我拿了一个 Happstack 的存储库并在那里查看（darcs 获取[http://patch-tag.com/r/mae/happstack](http://patch-tag.com/r/mae/happstack)），但这让我更加沮丧。

我看到了 happstack/happstack-ixset/src/Happstack/Data/IxSet.hs 文件，它创建了一个模块 Happstack.Data.IxSet，但我看不到哪个文件创建了一个模块 Data.IxSet（并实现了类 Indexable） .

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T12:45:35.753

Haskell 代码的首选地址是[hackage](http://hackage.haskell.org)。[在首页上有一个指向Hayoo](http://holumbus.fh-wedel.de/hayoo/hayoo.html)的链接，这是除了[Hoogle](http://haskell.org/hoogle/)之外的另一个主要的 Haskell 搜索引擎。两者都比另一个有优势。

Hayoo 索引所有关于 hackage 的包，默认情况下搜索包括关于 hackage 的所有包。如果你想搜索一个已知的名字，例如`Indexable`，那是更方便的引擎，特别是如果你不知道这个名字来自哪个包。- 目前 - 第五次击球带你到[`Data.IxSet.Indexable`](http://hackage.haskell.org/packages/archive/ixset/latest/doc/html/Data-IxSet.html#t%3aIndexable)。在 Haddock 文档的右侧，您可以找到一个[Source](http://hackage.haskell.org/packages/archive/ixset/latest/doc/html/src/Data-IxSet.html#Indexable)链接，该链接将您带到 hscoloured 源（在这种情况下，这不是很有用，但是，只有一个类成员，没有默认实现，它不会告诉您任何内容文档）。

默认情况下，Hoogle 仅搜索少量包，如果您想在搜索中包含其他包，则必须通过添加`+packagename`到搜索中来指定 - 但这会将搜索限制为指定的包。[手册](http://www.haskell.org/haskellwiki/Hoogle)中有关 Hoogle 搜索的更多信息。Hoogle 的强项是按类型搜索。Hoogle 的按类型搜索对搜索的类型应用了更多的转换，因此如果您不知道确切的类型，则比 Hayoo 找到更多的匹配项（这并非没有缺点，但是，有时您会得到很多不相关的命中）。如果您搜索 example [`Map k a -> k -> Maybe a`](http://www.haskell.org/hoogle/?hoogle=Map+k+a+-%3E+k+-%3E+Maybe+a)，Hoogle 的第一个结果是最有可能的候选`Data.Map.lookup :: Ord k => k -> Map k a -> Maybe a`者，而 Hayoo 没有找到它，因为它不会置换参数。

无论哪种方式，两个搜索引擎都会将您引导到 hackage 的 Haddock 文档中查询实体（如果搜索成功），`Source`如果您愿意，链接会将您带到代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T07:48:12.523

使用本地生成或在线的 Haddock 文档。Google 搜索通常会在顶部附近返回相关文档。该文档是交叉链接的，因此您可以浏览所需的模块。每个定义旁边都有一个指向源的链接，[例如](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Ix.html).

这个特定的模块属于基础库集。

# perl - 在 Expect.pm 中找不到模式

> ID：14301583
> 
> 赞同：1
> 
> 时间：2013-01-13T07:40:27.743
> 
> 标签：perl, expect

我尝试了以下示例，为什么找不到？

```
#!/usr/bin/perl
use Expect;

my $exp = new Expect;
$exp->expect(10, 'match me exactly', '-re', "match me exactly") or print "Not found\n"; 
```

起初，我根据 Expect.pm 示例尝试使用 'match\s+me\s+exactly'，但它也不起作用。

有什么建议么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T07:50:27.423

您忘记启动您期望其输出匹配的孩子。

# grails - grails oAuth 2.0 文档？

> ID：14301586
> 
> 赞同：0
> 
> 时间：2013-01-13T07:40:42.487
> 
> 标签：grails, oauth

我正在浏览[http://aiten.github.com/grails-oauth-scribe/guide/usingThePlugin.html](http://aiten.github.com/grails-oauth-scribe/guide/usingThePlugin.html)

我的主要问题是，我有我的linkedin 访问令牌，但是这个 API 强制我使用

```
Token linkedInAccessToken = oauthService.findSessionKeyForAccessToken('linkedin') 
```

我想用一个字符串初始化 Token 对象。

我在任何地方都找不到 API 文档，请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:23:46.460

Edvinas 拥有它 - Token 对象（来自 Scribe）允许按照他的指定进行初始化。

还有一个可选的第三个参数，它是来自服务器的整个原始 oauth 响应，如果您想获取/存储过期信息等，这很有用。

正如 Jeff 所说，该插件的设计使您可以愉快地使用令牌而不必担心它 - 将对象存储为对象而不是字符串要干净得多，并且可能有助于避免代码中出现奇怪的运行时错误。

如果要将其存储为 Map，则应首先将其序列化。

资料来源：我写了插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T19:28:04.087

我猜你想保留令牌对象。它由两个 Sting fiekds 组成：token 和 secret。当您将它们存储在数据库中时，您始终可以简单地创建令牌：

```
Token linedInAcessToken = new org.scribe.model.Token(token, secret) 
```

这可以稍后在 oauthService 中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T15:40:00.503

如果您已经拥有访问令牌，则不需要真正执行 oauth 请求，您可以使用您拥有的令牌发出请求。下面将linkedInAccessToken 更改为具有令牌的字符串。

```
 oauthService.postLinkedInResource(linkedInAccessToken, 'http://api.yourprovider.com/users/list') 
```

# regex - （正则表达式）检索具有 2 个符号之间的特定单词的整个短语

> ID：14301592
> 
> 赞同：2
> 
> 时间：2013-01-13T07:41:57.133
> 
> 标签：regex, perl, match

我的问题看起来像 Stackoverflow 中的其他一些问题，但我没有找到我想要的东西。

我需要检索包含特定单词的整个短语。该短语也在“>”和“<”之间。

例如：

```
text:
 "<div>bla bla bla</div><div>blu blu GOLD blu</div><form> bla bla...."

What I need is:
 blu blu GOLD blu 
```

我正在尝试在 Perl 中做到这一点。到目前为止，我所拥有的是：

```
$specific_word = GOLD;
while ($var=~/[>]?(?<phrase>(.*?)\Q$specific_word\E(.*?))</ig) {
   script.....
} 
```

鉴于上面的例子，我用这个正则表达式得到的是： `<div>bla bla bla</div><div>blu blu GOLD blu`

如何找到我的特定单词之前的第一个“>”，而不是整个文本的第一个“>”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T10:59:26.853

HTML::TreeBuilder 是在 Perl 中解析 HTML 的更好方法。

但是要回答这个问题，您可能想要匹配`/[^>]*${specific_word}[^<]*/g`，它基本上表示它`>`不在短语的左侧，`<`也不在短语的右侧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T20:42:24.383

正确地提到了一个 html 解析器。您可以通过以下方式`div`使用[Mojo::DOM](http://search.cpan.org/~tempire/Mojolicious-3.11/lib/Mojo/DOM.pm)在字符串的第二个中找到“GOLD” ：

```
use strict;
use warnings;
use Mojo::DOM;

my $html = '<div>bla bla bla</div><div>blu blu GOLD blu</div>';
my $dom  = Mojo::DOM->new($html);

for my $e ( $dom->div->each ) {
    print $e->text if $e->text =~ /\bGOLD\b/;
} 
```

输出：

```
blu blu GOLD blu 
```

# android - 什么可以更新这个viewpager？

> ID：14301595
> 
> 赞同：2
> 
> 时间：2013-01-13T07:42:11.840
> 
> 标签：android, android-listview, android-fragments, android-viewpager

我有一个页面适配器，其中有两个来自 sherlockfragment 的页面，但是当我将页面从一页更改为二页时，页面不会更新并且屏幕是白页。

我的适配器页面代码是：

```
public class VpiAbsTestActivitynouser extends SherlockFragmentActivity {

private static final String[] CONTENT = new String[] {" 1","2"};

TestFragmentAdapter mAdapter;
 ViewPager mPager;
    PageIndicator mIndicator;

protected void onCreate(Bundle savedInstanceState) {
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.simple_tabs);

    mAdapter = new TestFragmentAdapter(getSupportFragmentManager());
    mPager = (ViewPager)findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);
    mIndicator = (TabPageIndicator)findViewById(R.id.indicator);
    mIndicator.setViewPager(mPager);

}

class TestFragmentAdapter extends FragmentPagerAdapter {        
    private int mCount = CONTENT.length;

    public TestFragmentAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        switch(position) {

        case 0:

            return new customlistnotuser();

        case 1:

            return new anotherpage();

        default:
            return null;

        }
    }

    @Override
    public int getCount() {
        return mCount;
    }

    public CharSequence getPageTitle(int position) {
        return VpiAbsTestActivitynouser.CONTENT[position % VpiAbsTestActivitynouser.CONTENT.length].toUpperCase();
    }

     @Override
        public void destroyItem(View collection, int position, Object view) {
             ((ViewPager) collection).removeView((View) view);
        }

 } 
```

}

我的片段看起来像这样：

```
 public class customlistnotuser extends SherlockFragment  {

// All static variables
static final String URL = "url";
// XML node keys
static final String KEY_TEST = "test"; // parent node
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_Description = "description";
static final String KEY_DURATION = "duration";
static final String KEY_THUMB_URL = "thumb_url";
static final String KEY_PRICE = "price";
static final String KEY_URL = "url";

 private ProgressDialog pDialog;

ListView list;
LazyAdapterbeth adapter;
XMLParser parser = new XMLParser();
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

}

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    new getFeed().execute();

}

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) 

{

    View thisfragment = inflater.inflate(R.layout.dovomi, container, false);

    return thisfragment;
}

private class getFeed extends AsyncTask<Void, Void, Document> {

       }

    protected Document doInBackground(Void... params) {

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        return doc;
    }

    protected void onPostExecute(Document doc) {

    ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    NodeList nl = doc.getElementsByTagName(KEY_TEST);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_Description, parser.getValue(e, KEY_Description));
        map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
        map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));
        map.put(KEY_PRICE, parser.getValue(e, KEY_PRICE));
        map.put(KEY_URL, parser.getValue(e, KEY_URL));
        // adding HashList to ArrayList
        songsList.add(map);
         pDialog.dismiss();
    }

    list=(ListView)getActivity().findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapter=new LazyAdapterbeth(getActivity(), songsList);
    list.setAdapter(adapter);

    // Click event for single list row
    list.setOnItemClickListener(new OnItemClickListener() { 
```

当我从第一页转到第二页时，如何更新我的视图？

我如何使用 instantiateItem 和 notifyDataSetChanged()；在此代码上更新视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:20:53.173

首先你的 Fragment 需要返回一个 Fragment 的实例，你可以通过添加一个 newInstance(Bundle args); 来做到这一点。然后，您可以使用 FragmentArguments 根据 ViewPager 中的位置更新 Fragment。

```
public class CustomList extends SherlockListFragment{
int fragment_position_in_viewpager = 0;
....
public static CustomList newInstance(Bundle args) {
customlist fragment = new CustomList();
fragment.setArguments(args);
return fragment;
}
....

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
if (getArguments() != null) {
    fragment_position_in_viewpager = getArguments().getInt("position"); 
} 
String[] params = {xmlURLArray[fragment_position_in_viewpager]}

new getFeed().execute(params);

}

protected Document doInBackground(String... params) {

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(params[0]); // getting XML from URL
....

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
 ViewGroup root = (ViewGroup) inflater.inflate(
            R.layout.layout_custom_list, container, false);

    //initialize your widgets here
    //button = (Button) root.findViewById(R.id.button);

    return root;
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
super.onViewCreated(view, savedInstanceState);

final int fragment_position_in_viewpager;
if (getArguments() != null) {
    fragment_position_in_viewpager = getArguments().getInt("position"); 
} 

     //Update the Fragment UI depending on the ViewPager Position.

.... 
```

然后在你的 TestFragmentAdapter (FragmentPagerAdaper)

```
....
@Override
public Fragment getItem(int position) {

         //Return a Fragment
        //from a new Instance with FragmentArguments
            Bundle args = new Bundle();
            args.putInt("position", position);
            return CustomList.newInstance(args);

//use a switch if you have different types Fragments
//switch(position) {
    //case 0:
        //From the Fragment Constructor 
            //    return (mCustomList = new CustomList());
.... 
```

# python - Jinja2 奇怪的编码错误

> ID：14301599
> 
> 赞同：0
> 
> 时间：2013-01-13T07:43:12.613
> 
> 标签：python, markdown, jinja2

我已经为此奋斗了整整一个晚上...

我正在尝试使用[Python markdown](http://packages.python.org/Markdown/)从 .md 文件生成 HTML 文件并将它们嵌入到其他一些 HTML 文件中。

这是有问题的片段：

```
md = markdown.Markdown(encoding="utf-8")
input_file = codecs.open(f, mode="r", encoding="utf-8") # f is the name of the markdown file
text = input_file.read()
html = md.convert(text) # html generated from the markdown file

context = {
    'css_url': url_for('static', filename = 'markdown.css'),
    'contents': html
}

rendered_file = render_template('blog.html', **context)
output = open(splitext(f)[0] + '.html', 'w') # write the html to disk
output.write(rendered_file)
output.close() 
```

这是我的“blog.html”模板，非常简单：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>blog</title>
  <link rel="stylesheet" href="{{ css_url }}" type="text/css" />
</head>

<body>
  {{ contents }}
</body>

</html> 
```

然而，这就是我得到的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>blog</title>
  <link rel="stylesheet" href="/static/markdown.css" type="text/css" />
</head>

<body>
&lt;li&gt;People who love what they are doing&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ol&gt;
</body>

</html> 
```

所以我得到了那些奇怪的“>”、“<”的东西，即使我已经将编码指定为“utf-8”。什么可能出错？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T07:49:22.337

`&lt;&gt;`与编码无关。这些是代表您输入的 HTML 实体。您应该[将其标记为安全](http://jinja.pocoo.org/docs/templates/#safe)，这样 jinja 就不会自动逃脱它。

```
{{ contents|safe }} 
```

# sorting - 如何使用自定义比较器对 Vala 中的列表进行排序

> ID：14301601
> 
> 赞同：1
> 
> 时间：2013-01-13T07:43:44.280
> 
> 标签：sorting, vala

我正在尝试获取目录列表并使用 Vala 将其排序为最后修改的时间顺序。

我已将目录列表部分放入 List < FileInfo >。但我不知道如何对列表进行排序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T23:17:12.830

这是通过类中的`sort(CompareFunc<G> compare_func)`方法完成的`List`。[你可以在这里](http://www.valadoc.org/#!api=glib-2.0/GLib.List.sort)阅读更多关于它的信息。

字符串的一个基本示例是：

```
list.sort((a,b) => {
    return a.ascii_casecmp(b);
}); 
```

传递给的函数的返回值与`sort()`ISO C90`qsort(3)`函数相同：

> 如果认为第一个参数分别小于、等于或大于第二个参数，则比较函数必须返回一个小于、等于或大于零的整数。

由于您对修改时间感兴趣，因此`FileAttribute`您正在寻找的是[TIME_MODIFIED](http://www.valadoc.org/#!api=gio-2.0/GLib.FileAttribute.TIME_MODIFIED)，您可以通过`get_attribute_*`调用`FileInfo`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:34:03.833

```
static int main (string[] args) {
var directory = File.new_for_path ("/var/db/pkg");
var glib_list = new GLib.List<FileInfo> ();
try {
    var enumerator = directory.enumerate_children (FileAttribute.TIME_MODIFIED, FileQueryInfoFlags.NOFOLLOW_SYMLINKS);
    FileInfo file_info;
    while ((file_info = enumerator.next_file()) != null) {
        glib_list.append(file_info);
    }
} catch(Error e) {
    stderr.printf ("Error: %s\n", e.message);
}
// Lets sort it.
CompareFunc<FileInfo> my_compare_func = (a, b) => {
    long c = a.get_modification_time().tv_sec;
    long d = b.get_modification_time().tv_sec;
    return (int) (c > d) - (int) (c < d);
};
glib_list.sort(my_compare_func);
foreach (FileInfo file_info in glib_list) {
    stdout.printf ("%s\n", file_info.get_name());
}
return 0; 
```

}

# android - 更改按钮可见性 onClick 时出错

> ID：14301603
> 
> 赞同：0
> 
> 时间：2013-01-13T07:44:01.400
> 
> 标签：android, button, visibility, onclicklistener

我有一个名为 Check 的按钮，我希望它在我每次单击它时不可见和可见，因为如果它可见并且我单击它将变得不可见并且诗意！

但是我的代码不起作用！有任何想法吗 ？

```
 Button Check ;
        @Override   
         public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);  
           setContentView(R.layout.settings);

        Check  = (Button)findViewById(R.id.checkButton);

           Check.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View View) {

                if (View.getVisibility() == android.view.View.VISIBLE) 
                        View.setVisibility(android.view.View.INVISIBLE);
                        else if (View.getVisibility() == android.view.View.INVISIBLE)
                            View.setVisibility(android.view.View.VISIBLE);

            }
        }); 
```

***在我的活动中，它一开始是可见的，当我点击它时，它变得不可见，但是当我再次点击它时它保持不可见！***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T07:50:23.163

将您的代码更改为此，

```
Check.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                if (v.isShown()) 
                        v.setVisibility(View.INVISIBLE);
                else
                        v.setVisibility(View.VISIBLE);

            } 
```

但我认为问题是，当按钮变得不可见时，你没有得到任何点击事件。首先确保`onClick`在按钮不可见时调用该方法。

**不可见的按钮不会调度任何交互事件**。因此，您可以设置透明或空白背景或类似的东西，而不是将按钮的可见性设置为不可见。

**但我个人认为，你应该改变你的用例，因为为什么会点击隐形按钮。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T08:03:59.977

尝试这个：

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="abcd" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:onClick="abc"
        android:text="Button" />
</LinearLayout>

public void abc(View v) {
    v.setVisibility(View.INVISIBLE);
}

public void abcd(View v) {
    v.findViewById(R.id.button1).setVisibility(View.VISIBLE);
} 
```

不可见的项目不会收到点击事件。因此，您可以在不可见视图上接收点击的唯一方法是接收其他视图来代替不可见视图。上述解决方案将按钮包装在布局中，因此当按钮不可见时，单击时会传递给布局，布局会处理事件并相应执行。如果您对此类布局的使用率很高，您还可以使用上述机制创建自定义按钮。

# php - 升级到 3.5 版后出现 wordpress 错误

> ID：14301604
> 
> 赞同：0
> 
> 时间：2013-01-13T07:44:08.713
> 
> 标签：php, wordpress

当我登录到我的 wordpress 管理页面时，它显示请升级到 wordpress 3.5，当我单击升级时它已经升级但我发现以下 php 错误

**警告：缺少 wpdb::prepare() 的参数 2，在第 1120 行的 E:\wamp\www\wordpress\wp-3.3-RC3\wp-content\plugins\wp-symposium\wp-symposium.php 中调用并定义在 E:\wamp\www\wordpress\wp-3.3-RC3\wp-includes\wp-db.php 第 990 行**

请帮我 。我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T09:48:49.130

从技术上讲，不是你应该解决这个问题。

问题是由[WP Symposium](http://wordpress.org/extend/plugins/wp-symposium/)插件的文件引起的。您是否安装了最新版本的插件？我没有检查插件本身，但从下载页面他们说插件兼容 WordPress 版本 3.5

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T07:45:58.590

那是因为`prepare`应该与`?`未验证参数的占位符一起使用。从 3.5 版开始，Wordpress 决定在您滥用它时发出警告。

Andrew Nacin（他是 3.5 的首席开发人员）[在 make.wordpress.com 上的博客文章中](http://make.wordpress.org/core/2012/12/12/php-warning-missing-argument-2-for-wpdb-prepare/)宣布了这一变化：

> 这不是一个轻率的决定。我们不喜欢将 PHP 警告推到用户和开发人员的脸上。但考虑到潜在的安全风险，我们希望每个人都能立即了解他们是如何运行查询的。而且，当然，请始终妥善准备它们。

# actionscript - Flex 移动项目与动作脚本移动项目

> ID：14301609
> 
> 赞同：5
> 
> 时间：2013-01-13T07:44:56.310
> 
> 标签：actionscript, adobe, flash-builder, flex-mobile

我是开发新手，想开发一个 android 应用程序。我之前使用 Adob​​e Flash Builder 4.6 和 Flex Mobile Project 构建了一个应用程序。我最近才注意到在 4.7 中有一个 Action Script Mobile Project 选项。

有人可以向我解释两者之间的区别以及使用其中一个的利弊吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T13:01:41.067

如果您打算使用 Flex 框架提供的声明性标记、内置 UI 组件和数据绑定，那么您可能应该从 Flex 移动项目开始。这种方法的缺点是 Flex 框架的额外脚手架会导致轻微的性能损失，并且会增加项目的整体文件大小。

另一方面，如果性能至关重要并且您不需要声明性标记、内置 UI 组件或 Flex 框架提供的数据绑定，那么您应该从纯 ActionScript 移动项目开始。真正简单的应用程序、游戏或具有高度自定义 UI 的应用程序将是纯 ActionScript 方法可能更适合的项目示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-09T01:31:42.907

优点：创建 Flex 移动项目更容易（使用带有设计模式的 Flex 4.6 快速原型制作，4.7 进行开发）并且直观地让您拖放您可以使用数据绑定和其他方便的内置工具

与其他任何事情一样，使用 Flex 移动项目而不是完整的基于 ActionScript 的解决方案有好有坏。主要是，自定义预加载器、启动屏幕和其他类似于自定义应用程序如何处理屏幕的功能要容易得多。下面是使用 Flex 移动版本而不是 ActionScript 的一些优点和缺点。

缺点：性能较慢 不能使用 Adob​​e Scout，它是用于实时基准测试和分析的绝佳工具。使用内置的可以，但它不会为您提供 Scout 提供的惊人信息。

我的建议：如果您足够精明，可以在 ActionScript 中完成所有工作，那么一定要创建一个 ActionScript 项目，您的用户会因此而爱上您。另外，它并没有那么难，它可以让你对你的组件进行无数的额外控制。此外，您不必处理数据绑定带来的开销（它会生成事件侦听器、get 和 set 方法，您可以自己创建更高效​​的方法）。通过创建 ActionScript 版本，还有许多其他事情可以使您受益，例如重构和更好的颠覆，但这些都是比其他任何事情更多的激励。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T16:30:39.507

仅供参考，您可以在 Flex 应用程序上使用 Adob​​e Scout。[Apache Flex](https://blogs.apache.org/flex/entry/apache_flex_announces_the_release)现在支持高级遥测。您还可以使用[SWF Scout Enabler](http://renaun.com/blog/2012/12/enable-advanced-telemetry-on-flex-or-old-swfs-with-swf-scount-enabler/)向任何 SWF 添加高级遥测。

# jquery - 如何使用 Devise 和 activerecord-reputation-system 为 Ajax 投票获取 current_user

> ID：14301610
> 
> 赞同：2
> 
> 时间：2013-01-13T07:45:02.283
> 
> 标签：jquery, ruby-on-rails, ajax

我希望能够允许用户使用 AJAX 对资源进行投票，但是，我不确定如何在资源控制器中获取 current_user 的 id。

我四处搜索，我已经阅读了很多将 user_id 保存为隐藏字段的建议，然后使用它来发送 AJAX 请求，但这不会让我面临安全漏洞吗？任何恶意用户都可以更改 user_id，然后作为他选择的随机用户投票。

获取 AJAX 请求的 current_user id 的标准方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T08:20:30.307

如果整个事情都在身份验证之后，您不需要将 user_id 存储在视图中，或者花费任何精力来传递它。只需像往常一样在控制器中访问`current_user`（或）。`current_user.id`

“整个事情都在身份验证之后”我的意思是具有投票接口的视图的控制器，以及 AJAX 请求的目的地的控制器都应该有`before_filter :authenticate_user!`，或者从一个类派生。如果是这种情况，devise 将以与其他所有经过身份验证的请求相同的方式识别用户。请求是 JSON 无关紧要，如果您还没有类似的东西，您可能需要调整您的未经授权的行为以将 javascript 重定向到您的登录名。

# vim - 在vim中创建依赖于另一个语法文件的语法文件的正确方法

> ID：14301612
> 
> 赞同：2
> 
> 时间：2013-01-13T07:45:27.750
> 
> 标签：vim, syntax-highlighting

我目前正在为 WordPress 创建一个 Vim 语法文件，并将它放在一个名为`wordpress.vim`

所有 WordPress 文件都是 PHP 文件，但并非所有 PHP 文件都是 WordPress 文件。

我的`wordpress.vim`语法文件依赖于 php 语法文件。所以我使用以下行包含它

```
so <sfile>:p:h/php.vim 
```

我的问题是将所有 PHP 语法包含到 WordPress 语法中的最优雅的方法是什么，以及我应该将`wordpress.vim`我创建的新文件放在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T08:19:12.623

语法文件的正确位置应该是：

```
~/.vim/syntax/wordpress.vim 
```

你应该看看`$VIMRUNTIME/syntax/cpp.vim`我认为是正确的语法：

```
if version < 600
  syntax clear
elseif exists("b:current_syntax")
  finish
endif

" Read the C syntax to start with
if version < 600
  so <sfile>:p:h/c.vim
else
  runtime! syntax/c.vim
  unlet b:current_syntax
endif 
```

# php - 具有 3 列第二个表 ID 的 Sql 表

> ID：14301615
> 
> 赞同：0
> 
> 时间：2013-01-13T07:45:43.673
> 
> 标签：php, mysql, sql, database

我是 sql 新手，正在构建一个 mysql 和 php 应用程序。我可能会错误地计划表格本身，如果是这样，我会感谢任何想法。

我有包含一些列的块，包括标题、文本、口号。标题和文本都比看起来更复杂，因为我需要字体、大小以及对每个文本的批准。所以我用这些列创建了一个文本表。这些是表格：

```
blocks
id(increment),text(texts.id),title(texts.id),slogan(texts.id),
type(enum),time(datetime),difficulty(int)

texts
id(increment),Text(text),font(varchar),size(int),approval(approval.id)

aprrovals
id(increment), User(varchar), time(datetime) 
```

所以这里是问题：

1.  这是保存这些信息的好方法吗？我应该让 textxs 保存它们所属的块 id 吗？
2.  如何显示包含所有块列的表格，但显示来自 texts.Text 而不是 id 的实际文本？
3.  如何选择特定块的特定文本的批准。用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:04:10.550

您的第一个问题是唯一可以真正回答的人是您，但是根据您的描述，这似乎是明智的。将列命名为“文本”并不是最好的主意，因为它是 mysql 中的保留字。您必须始终记住转义列名。我建议改用“body”之类的东西。（我相信时间和类型也是如此。）

您接下来的两个问题需要了解 JOIN。JOIN 允许您根据定义的条件将两个表连接在一起。我将以相反的顺序回答问题，因为您的第二个问题将是一个更复杂的连接。

所以 3）文本和批准它们的用户：

```
SELECT  
  t.`id`, t.`Text`, a.`User` 
FROM 
  texts t  
INNER JOIN
  approvals a
ON
  t.approval=a.id; 
```

这将返回已批准的任何行的文本 ID、文本和用户名。如果您还想查看未经批准的内容，请更改`INNER JOIN`为`LEFT JOIN`。这将始终从 ON 语句左侧的表中返回行。

现在返回所有块的问题是您需要多次加入文本表。这使它有点复杂，但很容易做到：

```
SELECT 
  t1.`Text` as 'Title', 
  t2.`Text` as 'Slogan', 
  t3.`Text` as 'Body',
  b.`type` as 'Type',
  b.`time` as 'Time'
  b.`difficulty` as 'Difficulty'
FROM 
  blocks b
INNER JOIN
  texts t1
ON 
  b.`title` = t1.`id`
INNER JOIN
  texts t2
ON 
  b.`slogan` = t2.`id`
INNER JOIN
  texts t3
ON 
  b.`text` = t3.`id`; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:55:38.487

如果我正确理解您的问题，我认为没有必要拥有 Approvals 表。如果一个Text可以有一个且只有一个用户批准，并且可以在一个且只有一个日期批准，则不需要单独的Approvals。

> 我应该让 textxs 保存它们所属的块 id 吗？

我认为这取决于您的建模需求。是不是一直是一个文字，一个标题，一个标语，三者都要填写？如果是这样，那么您是否像现在那样做也没关系。但是，如果您经常看到一个只有文本而没有标题和标语的块，则让文本引用块可能更有意义。

> 如何显示包含所有块列的表格，但显示来自 texts.Text 而不是 id 的实际文本？

这样的事情应该让你开始：

```
SELECT b.id, text.text, title.text, slogan.text, b.type, b.time, b.difficulty
FROM blocks AS b
JOIN texts AS text ON b.text = texts.id
JOIN texts AS title ON b.title = texts.id
JOIN texts AS slogan ON b.slogan = texts.id 
```

> 如何选择特定块的特定文本的批准。用户？

```
SELECT a.user
FROM approvals AS a
JOIN texts AS t ON a.id = t.approval
JOIN blocks AS b ON b.text = t.id
WHERE b.id = idToLookFor 
```

# java - Java Sound可以用来控制系统音量吗？

> ID：14301618
> 
> 赞同：9
> 
> 时间：2013-01-13T07:47:13.513
> 
> 标签：java, audio, volume, javasound, mixer

Java Sound 提供`FloatControl`了各种声音线功能的实例，以及一个[`MASTER_GAIN`](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/FloatControl.Type.html#MASTER_GAIN)&[`VOLUME`](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/FloatControl.Type.html#VOLUME)控制类型。

这些控件可以用来改变系统音量吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-13T07:47:13.513

不，它不能。这是改编自在 coderanch 上[调整主音量的答案的源代码。](http://www.coderanch.com/t/492931/java/java/Adjusting-master-volume-Windows-XP)源迭代可用的行，检查它们是否具有正确类型的控件，如果是，则将它们放入附加到`JSlider`

```
import java.awt.*;
import javax.swing.*;
import javax.sound.sampled.*;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class SoundMixer {

    public Component getGui() {
        JPanel gui = new JPanel(new GridLayout(0,1));

        Mixer.Info[] mixers = AudioSystem.getMixerInfo();
        System.out.println(
                "There are " + mixers.length + " mixer info objects");
        for (Mixer.Info mixerInfo : mixers) {
            System.out.println("mixer name: " + mixerInfo.getName());
            Mixer mixer = AudioSystem.getMixer(mixerInfo);
            Line.Info[] lineInfos = mixer.getSourceLineInfo();
            for (Line.Info lineInfo : lineInfos) {
                System.out.println("  Line.Info: " + lineInfo);
                try {
                    Line line = mixer.getLine(lineInfo);
                    FloatControl volCtrl = (FloatControl)line.getControl(
                            FloatControl.Type.MASTER_GAIN);
                    VolumeSlider vs = new VolumeSlider(volCtrl);
                    gui.add( new JLabel(volCtrl.toString()) );
                    gui.add( vs.getVolume() );
                    System.out.println(
                            "    volCtrl.getValue() = " + volCtrl.getValue());
                } catch (LineUnavailableException e) {
                    e.printStackTrace();
                } catch (IllegalArgumentException iaEx) {
                    System.out.println("    " + iaEx);
                }
            }
        }

        return gui;
    }

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                SoundMixer sm = new SoundMixer();
                Component c = sm.getGui();
                JOptionPane.showMessageDialog(null, c);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
}

class VolumeSlider {

    JSlider volume;

    VolumeSlider(final FloatControl volumeControl) {
        volume = new JSlider(
                (int) volumeControl.getMinimum() * 100,
                (int) volumeControl.getMaximum() * 100,
                (int) volumeControl.getValue() * 100);
        ChangeListener listener = new ChangeListener() {

            @Override
            public void stateChanged(ChangeEvent e) {
                float val = volume.getValue() / 100f;
                volumeControl.setValue(val);
                System.out.println(
                        "Setting volume of " + volumeControl.toString() + 
                        " to " + val);
            }
        };
        volume.addChangeListener(listener);
    }

    public JSlider getVolume() {
        return volume;
    }
} 
```

在这台 Windows 7 机器上，我得到了两个控件，都来自“Java Sound Audio Engine”。两者都对当前系统音量没有任何影响。

```
run:
There are 4 mixer info objects
mixer name: Primary Sound Driver
  Line.Info: interface SourceDataLine supporting 8 audio formats, and buffers of at least 32 bytes
    java.lang.IllegalArgumentException: Unsupported control type: Master Gain
  Line.Info: interface Clip supporting 8 audio formats, and buffers of at least 32 bytes
    java.lang.IllegalArgumentException: Unsupported control type: Master Gain
mixer name: Speakers (VIA High Definition Audio)
  Line.Info: interface SourceDataLine supporting 8 audio formats, and buffers of at least 32 bytes
    java.lang.IllegalArgumentException: Unsupported control type: Master Gain
  Line.Info: interface Clip supporting 8 audio formats, and buffers of at least 32 bytes
    java.lang.IllegalArgumentException: Unsupported control type: Master Gain
mixer name: Java Sound Audio Engine
  Line.Info: interface SourceDataLine supporting 8 audio formats
    volCtrl.getValue() = 0.0
  Line.Info: interface Clip supporting 8 audio formats, and buffers of 0 to 4194304 bytes
    volCtrl.getValue() = 0.0
mixer name: Port Speakers (VIA High Definition A
Setting volume of Master Gain with current value: 0.0 dB (range: -80.0 - 13.9794) to 0.0
Setting volume of Master Gain with current value: 0.0 dB (range: -80.0 - 13.9794) to -0.41
Setting volume of Master Gain with current value: 0.0 dB (range: -80.0 - 13.9794) to -0.68
... 
```

交换看看..没有控制`FloatControl.Type.MASTER_GAIN`。`FloatControl.Type.VOLUME`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:48:06.857

在 Line 初始化后添加以下行。这是打开线路所必需的。

```
boolean opened = line.isOpen() || line instanceof Clip;
if(!opened){
    System.out.println("Line is not open, trying to open it...");
    line.open();
    opened = true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T15:43:41.550

试试这个它不会让你失望......我们可以相应地修改上面的例子。

```
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.FloatControl;
import javax.sound.sampled.Line;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.Mixer;
import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JProgressBar;

public class SoundMeter {

JFrame j;

public SoundMeter() {
    j = new JFrame("SoundMeter");
    j.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    j.setLayout(new BoxLayout(j.getContentPane(), BoxLayout.Y_AXIS));
    printMixersDetails();
    j.setVisible(true);
}
public void printMixersDetails(){
    javax.sound.sampled.Mixer.Info[] mixers = AudioSystem.getMixerInfo();
    System.out.println("There are " + mixers.length + " mixer info objects");  
    for(int i=0;i<mixers.length;i++){
        Mixer.Info mixerInfo = mixers[i];
        System.out.println("Mixer Name:"+mixerInfo.getName());
        Mixer mixer = AudioSystem.getMixer(mixerInfo);
        Line.Info[] lineinfos = mixer.getTargetLineInfo();
        for(Line.Info lineinfo : lineinfos){
            System.out.println("line:" + lineinfo);
            try {
                Line line = mixer.getLine(lineinfo);
                line.open();
                if(line.isControlSupported(FloatControl.Type.VOLUME)){
                    FloatControl control = (FloatControl) line.getControl(FloatControl.Type.VOLUME);
                    System.out.println("Volume:"+control.getValue());   
                    JProgressBar pb = new JProgressBar();
                    // if you want to set the value for the volume 0.5 will be 50%
                    // 0.0 being 0%
                    // 1.0 being 100%
                    control.setValue((float) 0.5);
                    int value = (int) (control.getValue()*100);
                    pb.setValue(value);
                    j.add(new JLabel(lineinfo.toString()));
                    j.add(pb);
                    j.pack();
                }
            } catch (LineUnavailableException e) {
                e.printStackTrace();
            }
        }
    }
}
public static void main(String[] args) {
    new SoundMeter();
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-15T17:47:47.400

我正在使用[`VOLUME`](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/FloatControl.Type.html#VOLUME)控制类型。此代码适用于 XP 和 WIN 7，但不适用于 OSX。看我的例子：

```
import java.io.IOException;

import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.FloatControl;
import javax.sound.sampled.Line;
import javax.sound.sampled.Mixer;
import javax.swing.JPanel;
import javax.swing.JSlider;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class VolumeExample extends JPanel {

/**
 * @return main sound control object
 * @throws Exception for any problem
 */
private FloatControl getVolumeControl() throws Exception {
    try {
        Mixer.Info mixers[] = AudioSystem.getMixerInfo();
        for (Mixer.Info mixerInfo : mixers) {
            Mixer mixer = AudioSystem.getMixer(mixerInfo);
            mixer.open();

            //we check only target type lines, because we are looking for "SPEAKER target port"
            for (Line.Info info : mixer.getTargetLineInfo()) {
                if (info.toString().contains("SPEAKER")) {
                    Line line = mixer.getLine(info);
                    try {
                        line.open();
                    } catch (IllegalArgumentException iae) {}
                    return (FloatControl) line.getControl(FloatControl.Type.VOLUME);
                }
            }
        }
    } catch (Exception ex) {
        System.out.println("problem creating volume control object:"+ex);
        throw ex;
    }
    throw new Exception("unknown problem creating volume control object");
}

   VolumeExample() {
        JSlider slider = new JSlider();
        add(slider);

        //this is for setting the value
        slider.addChangeListener(new ChangeListener() {

            @Override
            public void stateChanged(ChangeEvent e) {
                JSlider src = (JSlider)e.getSource();
                //if (src.getValueIsAdjusting()) return; //optional
                if (src.getValue() % 5 !=0) return;
                float value = src.getValue() / 100.0f;
                try {
                    getVolumeControl().setValue(value);
                    //you can put a click play code here to have nice feedback when moving slider
                } catch (Exception ex) {
                    System.out.println(ex);
                }
            }
        });

        //and this is for getting the value
        try {
            slider.setValue((int) (getVolumeControl().getValue()*100.0f));
        } catch (Exception e) {
            System.out.println(e);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-26T18:47:17.550

我最近关注同样的问题。最后，我决定用 C++ 编写一个名为 VolumeChanger.exe 的小程序，并从 java 中调用它。效果很好。你可以从java调用一个exe

`Process process = new ProcessBuilder(vcpath,"-u").start();`

wehre vcpath 是您的 exe 文件的路径（当然可以是真实的）。

如果您对我如何使用此工具感兴趣，请访问[muteFritz](https://sourceforge.net/projects/mutefritz/)

如果您对整个源代码感兴趣，请随时 PM 我...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-06T11:39:29.373

这是一个仅适用于 OS X 的解决方案（我正在运行 10.10）：

```
import java.io.BufferedReader;
import java.io.File;
import java.io.InputStreamReader;

public class MasterVolume
{
    public void setMasterVolume(float value)
    {
        String command = "set volume " + value;
        try
        {
            ProcessBuilder pb = new ProcessBuilder("osascript","-e",command);
            pb.directory(new File("/usr/bin"));
            System.out.println(command);
            StringBuffer output = new StringBuffer();
            Process p = pb.start();
            p.waitFor();

            BufferedReader reader =
                    new BufferedReader(new InputStreamReader(p.getInputStream()));

            String line;
            while ((line = reader.readLine())!= null)
            {
                output.append(line + "\n");
            }
            System.out.println(output);
        }
        catch(Exception e)
        {
            System.out.println(e);
        }
    }
} 
```

您可以这样调用该方法：

```
MasterVolume.setMasterVolume(3.5f); 
```

这会将音量设置为 50%，因为范围是 0.1 到 7.0

# javascript - 如何使用 for 循环创建 JavaScript 对象？

> ID：14301619
> 
> 赞同：0
> 
> 时间：2013-01-13T07:47:15.247
> 
> 标签：javascript, jquery, object, for-loop, each

我有一个对象样本`data`：

```
[Object, Object, Object]
  0: Object
    test_id: "1"
    area: "high"
  1: Object
    test_id: "1"
    area: "saw"
  2: Object
    test_id: "2"
    area: "look" 
```

我正在尝试通过分组来创建一个新对象`test_id`。

```
var obj = new Object();
$.each(data, function(k, v){
    obj[v.test_id] += {area: v.area};
}); 
```

这似乎不起作用，它只返回一个对象线......

我想得到类似的东西：

```
1: {
    {area: "high"}
    {area: "saw"}
}
2: {
    {area: "look""
} 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T07:50:03.073

在您进行编辑后，我注意到一些事情，您正在尝试使用没有名称的属性创建一个 javascript 对象，这不是格式。在 JSON（javascript 对象表示法）中，每个属性都必须有一个值，您尝试存储的内容更适合数组。

相反，将其推入数组

```
 $.each(data, function(k, v){
    obj[v.test_id].area.push(v.area);
}); 
```

只需记住首先创建 obj[v.test_id] 并将其 area 属性设置为 []。这导致：

```
1: {
    area: ["high","saw"]
}
3: {
    area: ["look"]
} 
```

此外，如果您愿意考虑使用下划线，它具有非常强大（但基本）的收集方法，您可能想看看[http://underscorejs.org/#groupBy](http://underscorejs.org/#groupBy)

# svn - 如何在我的桌面上使用 EFS 保护本地 SVN 存储库？

> ID：14301621
> 
> 赞同：2
> 
> 时间：2013-01-13T07:47:36.373
> 
> 标签：svn, encryption

我在我的桌面上使用本地 svn 存储库。当我在存储库文件夹上手动启用 EFS 时，SVN 无法访问它。但是，我希望在我未登录时对存储库进行加密。任何想法和建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T04:00:55.507

当我遇到类似的问题时，我使用 vbscript 在注销期间加密文件夹并在登录期间对其进行解密。如果您使用的是 windows，则可以使用以下 vbscript。在两个单独的文件中创建这两个脚本。

```
'Encrypt.vbs
Dim strDir, objShell, FSO, WshShell
strDir = "D:\Repositories"
Set objShell = CreateObject("Shell.Application")
Set FSO = CreateObject("Scripting.FileSystemObject")
Set WshShell = WScript.CreateObject("WScript.Shell")
retval = WshShell.Run("CIPHER /E /S:" & strDir, 0, True)
MsgBox("Success")

'Decrypt.vbs
Dim strDir, objShell, FSO, WshShell
strDir = "D:\Repositories"
Set objShell = CreateObject("Shell.Application")
Set FSO = CreateObject("Scripting.FileSystemObject")
Set WshShell = WScript.CreateObject("WScript.Shell")
retval = WshShell.Run("CIPHER /D /S:" & strDir, 0, True)    
MsgBox("Success") 
```

1.  执行运行命令“gpedit.msc”
2.  在左侧窗格中选择本地计算机策略 | 用户配置 | Windows 设置 | 脚本（登录/注销）
3.  在右侧窗格中双击“登录”
4.  在登录属性对话框中单击“显示文件...”按钮
5.  位置“C:\Windows\System32\GroupPolicy\User\Scripts\Logon”打开
6.  将 Decrypt.vbs 复制到此位置
7.  同样将 Encrypt.vbs 复制到“C:\Windows\System32\GroupPolicy\User\Scripts\Logoff”
8.  在登录属性对话框中，单击添加按钮并选择 Decrypt.vbs
9.  同样在注销属性对话框中，单击添加按钮并选择 Encrypt.vbs
10.  执行运行命令“gpupdate”，等待策略更新
11.  注销并以其他用户身份登录，并通过尝试读取任何人类可读文件（例如 readme.txt）来验证存储库文件夹是否已加密。
12.  现在，每次您登录存储库时，SVN 都可以对其进行解密和访问，并且当您注销时，存储库在磁盘上仍保持加密状态。

# asp.net - WCF 服务异常远程服务器返回意外响应：（413）请求实体太大

> ID：14301623
> 
> 赞同：1
> 
> 时间：2013-01-13T07:47:38.773
> 
> 标签：asp.net, wcf, .net-4.0

我有以下 wcf 服务方法，它采用 Attachment 对象，并且 Attachment 类定义是：

```
 [DataContract]
    public class Attachment
    {
        [DataMember]
        public int AttachmentId { get; set; }
        [DataMember]
        public String DMSFileId { get; set; }
        [DataMember]
        public String FileName { get; set; }
        [DataMember]
        public int? FileSize { get; set; }
        [DataMember]
        public String FileSource { get; set; }
        [DataMember]
        public byte[] File { get; set; }
    } 
```

方法定义是：

```
[OperationContract]    
public int AddAttachment(DataTypes.Administration.Attachment attachment)
{
   return AttachmentBusinessLogic.AddAttachment(attachment);
} 
```

调用该方法时，出现以下异常：远程服务器返回意外响应：（413）请求实体太大

谷歌搜索我遇到了许多绑定配置的错误，但它们都没有工作，不是 maxReceivedMessageSize 也不是 readerQuotas。

这是服务和客户端的 Web 配置：

**服务**

```
<system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
</system.serviceModel> 
```

**客户**

```
 <system.serviceModel>
        <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
        <behaviors>
          <endpointBehaviors>
            <behavior name="AdministrationBehavior">
              <dataContractSerializer maxItemsInObjectGraph="2147483647" />
            </behavior>
          </endpointBehaviors>
        </behaviors>
        <bindings>
          <basicHttpBinding>
            <binding name="BasicHttpBinding_IAdministrationService" sendTimeout="00:05:00"
                     openTimeout="00:05:00"
                     receiveTimeout="00:05:00"
                     maxReceivedMessageSize="2147483647"
                     maxBufferSize="2147483647"
                     maxBufferPoolSize="2147483647">
                <readerQuotas maxArrayLength="2147483647"
                              maxStringContentLength="2147483647" />
            </binding>
          </basicHttpBinding>
        </bindings>
        <client>
          <endpoint address="http://localhost:8001/AdministrationService.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IAdministrationService" contract="AdministrationService.IAdministrationService" name="BasicHttpBinding_IAdministrationService" behaviorConfiguration="AdministrationBehavior" />
    </client>
</system.serviceModel> 
```

请提供有关如何克服此异常的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:11:49.307

您需要处理的地方是web config，您需要添加可以设置数据大小的服务行为。比如像这样，

```
 </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="SilverlightWCFLargeDataApplication">
      <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
    </behavior>
  </endpointBehaviors>
</behaviors> 
```

如果这不起作用，请在此处发布您的网络配置。希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:06:04.440

我设法通过按照在另一篇文章中配置 wcf Web 配置文件的步骤来解决它。

[使用标签配置 WCF](https://stackoverflow.com/questions/4731403/configuring-wcf-wtih-services-tag)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T11:25:11.750

使用此设置

```
 <basicHttpBinding>
        <binding maxReceivedMessageSize="2147483647"  messageEncoding="Text" maxBufferSize="2147483647" maxBufferPoolSize="2147483647" >
          <readerQuotas  maxStringContentLength="525288"></readerQuotas>
        </binding>
      </basicHttpBinding> 
```

# jquery - Kendo UI - null 的“错误”

> ID：14301626
> 
> 赞同：-1
> 
> 时间：2013-01-13T07:48:04.003
> 
> 标签：jquery, kendo-ui

我在我的页面中使用 Kendo UI 控件（网格和组合框），该页面在本地运行良好。但在服务器中，页面抛出未捕获的异常，如下所示。

*在 IE8 中 - 网页错误详情

消息：“错误”为空或不是对象行：11 字符：12208 代码：0 URI：`http://xxxx/Scripts/KendoUI/kendo.web.min.js`

在 Chrome 中 - TypeError：无法读取 null 的属性“错误”。*

谁能告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:04:43.397

从控制器加载部分视图解决了这个问题。

# php - 在 WordPress 中编辑主页

> ID：14301631
> 
> 赞同：0
> 
> 时间：2013-01-13T07:48:50.227
> 
> 标签：php, html, wordpress, webpage

如何更改 WordPress 的主页？当我转到网站 URL (www.linkzgamez.com) 时，它有一个我想更改的主屏幕，但我在 WordPress 中的任何地方都找不到它。我可以在 WP 中找到和更新/控制主页上的所有其他链接，但不是设置为默认主题的主页。我什至删除了 WP 中的另一个页面，但它仍然出现在我无法找到编辑它的主屏幕上。我如何找到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T07:52:26.660

我建议您阅读有关创建/编辑主题和模板的 Wordpress Codex：

[http://codex.wordpress.org/Templates](http://codex.wordpress.org/Templates)

在大多数情况下，主页由`index.php`主题中的文件控制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T13:55:42.690

我只是快速浏览了一下，它看起来好像设置为默认值 - 显示最后 10 个帖子（即使您目前只有一个帖子）。

如果您不想在首页上显示帖子，您可以创建一个名为“主页”的新“页面”，然后转到：

设置 -> 阅读 -> 选择“首页显示静态页面”，然后从下拉菜单中选择“主页”。

希望这可以帮助 ;）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T07:55:27.237

我建议您阅读[Template Hierarchy](http://codex.wordpress.org/Template_Hierarchy#Home_Page_display)。

如果您的主题文件夹中不存在这些文件（home.php、index.php、front-page.php）；WordPress 将使用默认主题中的主题。

# javascript - 您如何在严格模式下找到匿名函数的数量？

> ID：14301634
> 
> 赞同：0
> 
> 时间：2013-01-13T07:49:18.480
> 
> 标签：javascript, jquery, scope, anonymous-function, arity

遵循[jQuery 插件模式](http://docs.jquery.com/Plugins/Authoring)`methods.myfunc`，如果我们使用 apply() 来定义`this` 和应用于this 的范围，如何找到函数的元数，比如函数`arguments`？

```
(function($, window, document ){

"use strict";
//...
methods = {
  myfunc: function(){
    // myfunc.length? tried, didnt work
    // arguments.length? tried, didnt work
    // methods.myfunc.length? tried, didnt work
    // arguments.callee tried, doesnt work in strict mode
  }
  //...
}

$.MyPluginThing = function( method ){

  if( methods[method] ){
      return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
  }else if( typeof method === "object" || ! method ){
      return methods.init.apply( this, arguments, window );
  }else{
      $.error( "Method " +  method + " does not exist on jQuery.MyPluginThing" );
  }

}... 
```

这可能会暴露我对函数范围的一些无知，但我在这里很困惑，并且没有找到一个足够好的例子来解释这一点。

我对这个问题的部分灵感来自 NodeJS/ExpressJS，它们为某些函数提供了可变数量的参数。例如，如果传递了 3 个参数，则假定存在错误对象，但您也可以轻松传递两个参数，这没有问题！

**更新**：将代码中的函数从 init 更改为 myfunc

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T07:51:46.770

您必须使用命名函数表达式（[及其所有特质](http://kangax.github.com/nfe/)）：

```
var methods = {
  init : function init () {
    var arity = init.length;
  }
}; 
```

这是小提琴：http: [//jsfiddle.net/tqJSK/](http://jsfiddle.net/tqJSK/)

不过说实话，我不知道你为什么需要这个。您可以在函数中对该数字进行硬编码，因为命名参数的数量永远不会改变......

* * *

**更新：**正如@TJCrowder 所指出的，您可以改用常规函数声明：

```
(function($, window, document) {

    function init () {
        var arity = init.length;
    }

    var methods = {
      init : init
    };

}(jQuery, window, document)); 
```

* * *

**更新 2：**如果您要查找的只是*此特定调用*中提供的参数数量，请使用`arguments.length`：

```
var methods = {
  init : function () {
    var count = arguments.length;
  }
}; 
```

这是小提琴：http: [//jsfiddle.net/tqJSK/1/](http://jsfiddle.net/tqJSK/1/)

# gcc - gcc 程序集中的 atomic_inc 和 atomic_xchg

> ID：14301644
> 
> 赞同：0
> 
> 时间：2013-01-13T07:50:44.973
> 
> 标签：gcc, assembly, x86, x86-64

我编写了以下用户级代码片段来测试两个子函数，原子`inc`和`xchg`（参考 Linux 代码）。我需要的只是尝试对 32 位整数执行操作，这就是我明确使用`int32_t`. 我假设`global_counter`将由不同的线程进行比赛，虽然`tmp_counter`很好。

```
#include <stdio.h>
#include <stdint.h>
int32_t global_counter = 10;

/* Increment the value pointed by ptr */
void atomic_inc(int32_t *ptr)
{
    __asm__("incl %0;\n"
        : "+m"(*ptr));
}

/* 
 * Atomically exchange the val with *ptr.
 * Return the value previously stored in *ptr before the exchange
 */
int32_t atomic_xchg(uint32_t *ptr, uint32_t val)
{
    uint32_t tmp = val;
    __asm__(
        "xchgl %0, %1;\n"
        : "=r"(tmp), "+m"(*ptr)
        : "0"(tmp)
        :"memory");
    return tmp;
}

int main()
{
    int32_t tmp_counter = 0;

    printf("Init global=%d, tmp=%d\n", global_counter, tmp_counter);

    atomic_inc(&tmp_counter);
    atomic_inc(&global_counter);
    printf("After inc, global=%d, tmp=%d\n", global_counter, tmp_counter);

    tmp_counter = atomic_xchg(&global_counter, tmp_counter);
    printf("After xchg, global=%d, tmp=%d\n", global_counter, tmp_counter);

    return 0;
} 
```

我的两个问题是：

1.  这两个子函数写得正确吗？
2.  当我在 32 位或 64 位平台上编译它时，它的行为是否相同？例如，指针地址是否可以具有不同的长度。或者可能`incl`并且`xchgl`将与操作数冲突？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T02:06:11.680

我对这个问题的理解如下，如果我错了，请纠正我。

所有读-修改-写指令（例如：incl、add、xchg）都需要一个锁定前缀。lock指令是通过在内存总线上断言LOCK#信号来锁定其他CPU访问的内存。

Linux 内核中的 __xchg 函数暗示没有“锁定”前缀，因为无论如何 xchg 总是暗示锁定。[http://lxr.linux.no/linux+v2.6.38/arch/x86/include/asm/cmpxchg_64.h#L15](http://lxr.linux.no/linux+v2.6.38/arch/x86/include/asm/cmpxchg_64.h#L15)

但是， atomic_inc 中使用的 incl 没有这个假设，因此需要 lock_prefix。 [http://lxr.linux.no/linux+v2.6.38/arch/x86/include/asm/atomic.h#L105](http://lxr.linux.no/linux+v2.6.38/arch/x86/include/asm/atomic.h#L105)

顺便说一句，我认为您需要将 *ptr 复制到 volatile 变量以避免 gcc 优化。

威廉

# java - Java $APP_PACKAGE 路径名变量不起作用

> ID：14301645
> 
> 赞同：0
> 
> 时间：2013-01-13T07:50:57.540
> 
> 标签：java, macos, info.plist

根据[Java Info.plist Key Reference for Mac](https://developer.apple.com/library/mac/#documentation/java/Reference/Java_InfoplistRef/Articles/JavaDictionaryInfo.plistKeys.html#//apple_ref/doc/uid/TP40001969)，您应该能够使用 $APP_PACKAGE 变量来访问 Mac 应用程序包的根目录。所以我想我可以在 Contents/Resources/ 文件夹中存储一个文件并通过调用来访问它

```
new File("$APP_PACKAGE/Contents/Resources/MyFile.txt") 
```

但是，这似乎不起作用，我只是得到一个找不到文件的错误。此外，我尝试了以下方法以查看是否可以缩小问题范围：

```
new File("$APP_PACKAGE/Contents").exists() //Returns false
System.out.printline(new File("$APP_PACKAGE").getParent()) //Returns an empty string 
```

我确实使用 Eclipse 的 Export to Mac OS X 应用程序包生成了 Mac OS X 包，如果这很重要的话。任何帮助（或合适的解决方法）将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:47:02.440

我想到了！即使应用程序很难告诉我工作目录是什么，我还是设法弄清楚它是应用程序所在的文件夹。然后我能够通过将应用程序称为目录来解决它：

```
new File("MyApp.app/Contents/Resources/MyFile.txt").exists() //Returns true!!! 
```

我还想补充一点，我在[这篇博](http://howlingmoonsoftware.com/wordpress/?p=36)文中找到了将以下内容添加到我的 info.plist 文件中的建议：

```
<key>WorkingDirectory</key>
<string>$APP_PACKAGE/Contents/Resources</string> 
```

不幸的是，这似乎不适用于 Mac OS 10.7.5，工作目录只是被重置为应用程序所在的文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T08:14:59.230

如果该值设置为环境变量，您可以`System.getEnv()`先获取实际值，`APP_PACKAGE`然后`File`使用它创建对象。

```
String appPackage = System.getEnv("APP_PACKAGE");
new File(appPackage + "/Contents/Resources/MyFile.txt"); 
```

也就是说，从您[给定的链接](https://developer.apple.com/library/mac/#documentation/java/Reference/Java_InfoplistRef/Articles/JavaDictionaryInfo.plistKeys.html#//apple_ref/doc/uid/TP40001969)的阅读中，我想知道这个变量是否只是在从`plist`文件中读取时才被使用，而不是在您的 Java 进程中。如果变量实际上没有作为环境变量提供给您的 Java 程序，您可以`Contents`轻松地在目录中检索您的文件，因为我记得 Mac 上的应用程序打包应该具有以下架构

```
/Contents
  /MacOS
    YourBinary
  /Resources
    YourFile.txt 
```

根据您的应用程序的当前工作目录（我认为它应该默认为`/Contents/MacOS`），您可以使用`../Resources/YourFile.txt`. 如果您不知道当前工作目录，您可以打印`new File(".").getAbsolutePath()`

# delphi - 如何在按下 dbnavigator 删除按钮后根据决定中止删除记录？

> ID：14301646
> 
> 赞同：6
> 
> 时间：2013-01-13T07:51:00.567
> 
> 标签：delphi, delphi-xe2, ttnavigator, anydac

`dbnavigator`按下删除按钮后，我可以根据决定中止删除记录吗？我检查了`beforeAction`事件

```
if Button = nbDelete then  
  //check if not OK then

Button := nbCancel; 
```

但它不起作用。有什么帮助吗？

我正在使用`DelPhi XE2, anyDac Components`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:43:54.343

使用**BeforeAction**事件

```
procedure TForm1.DBNavigator1BeforeAction(Sender: TObject; Button: TNavigateBtn);
begin
  if Button = nbDelete then
  begin
    if MessageDlg('Confirm delete now?', mtConfirmation, [mbYes,mbNo], 0) = mrNo then
    begin
      Abort;
    end;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-02T08:12:51.373

您可以使用 BeforeDelete 事件：

```
procedure Tdm.MyDataSetBeforeDelete(DataSet: TDataSet);
begin
  if SomeCondition then
  begin
    ShowMessage('Sorry, you can not delete this record.');
    Abort;
  end;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-12T19:36:39.810

选择 DBNavigator，然后在 Options 内的 Object Inspector 上将 noConfirmDelete 设置为“false”

# php - MYSQL查询简单数据范围

> ID：14301651
> 
> 赞同：0
> 
> 时间：2013-01-13T07:51:51.167
> 
> 标签：php, mysql

我是 mysql 编码的新手，因此将不胜感激。

我有一个简单的数据库，其中包含一个名为 history 的表，该表将数据存储在日期中。

该表称为历史记录，并且有一个列名为“用户”、“数据”和“创建”，即日期。“创造”中的数据戳是这样的“2013-01-13 07:45:49”

我用 PHP 尝试了一些非常基本的东西，我得到了数据，例如： $result = mysql_query("SELECT data FROM history WHERE user='705'");

将显示来自用户“705”的所有数据

但是，如何仅在特定数据范围内为用户 705 选择相同的数据？例如只显示上周的数据？或任何日期范围...

顺便说一句，“数据”只是像“88993”这样的数字，所以在我当前的查询中，我得到了一长串数字。我只想按日期缩小我的选择范围。

帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T07:54:43.823

尝试之间的日期..

```
select * from yourtable
where userid =785
and date between yourdate1 and yourdate2
; 
```

您可以使用`interval`来指定您需要的日期间隔：

```
select * from yourtable
    where userid =785
    and date between '2013-01-13 07:45:49' 
    and '2013-01-13 07:45:49' interval -10 day
    ; 
```

根据您的最后评论尝试此操作：

```
select * from yourtable
        where userid =785
        and creation between Now() 
        and Now() interval -7 day
order by creation
limit 7
; 
```

参考：[您可以在此处查看所有日期时间功能](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T08:07:57.270

上周试试这个：

```
select data from history
where (user='705') AND (date between date_sub(now(),INTERVAL 1 WEEK) and now()); 
```

您还可以将“1 WEEK”替换为“1 MONTH”、“2 MONTH”、“1 YEAR”和...

# c++ - C++ 在类中声明 char 数组的正确方法是什么？

> ID：14301655
> 
> 赞同：1
> 
> 时间：2013-01-13T07:52:58.967
> 
> 标签：c++, arrays, class, char

这是一种伪代码，但它应该清楚我想知道的内容。我在不同的代码中看到了所有 3 个变体。

我的问题是这样做的正确方法是什么，为什么？（另见代码片段中的注释）

test.h 第一种方式：

```
class Test {
    public:
        Test() 
            :_buffer(NULL)
         {
            _buffer = new char[1024];
        }

        ~Test() {
           delete _buffer;
        }

        int Function() {
           //use some function like inet_ntop doesn't work _buffer is not filled
           inet_ntop(p->ai_family, addr, _buffer,  sizeof(_buffer)-1);
           //here sizeof(_buffer) returns 4, WHY ?
           cout << sizeof(_buffer) << endl;
        }

    private:
        char *_buffer;
}; 
```

test.h 第二种方式：

```
class Test {
    public:
        Test() {
            //_buffer is never initialized WHY ?
        }
        ~Test() {
           //_buffer is never deleted WHY ?
        }
        int Function() {
           //use some function like inet_ntop works correctly here _buffer is filled 
           inet_ntop(p->ai_family, addr, _buffer,  sizeof(_buffer)-1);
           //here sizeof(_buffer) returns 1024, WHY ?
           cout << sizeof(_buffer) << endl;
        }
     private:
         char _buffer[1024];
}; 
```

test.h 第三种方式：

```
class Test {
    public:
        Test() {
        }
        ~Test() {
        }
        int Function() {
           char buffer[1024];
           //use some function like inet_ntop works correctly here _buffer is filled
           inet_ntop(p->ai_family, addr, _buffer,  sizeof(_buffer)-1);
           //here sizeof(_buffer) returns 1024
           cout << sizeof(_buffer) << endl;
        }
     private:
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T07:53:46.693

> **C++ 在类中声明 char 数组的正确方法是什么？**

两者都不。
在 C++ 中，正确的方法是使用：

```
std::string buffer; 
```

这正是 C++ 提供`std::string`. 它使您可以自由：

*   显式管理内存，如`#1`&
*   覆盖静态分配数组的边界，如`#2`.

* * *

请注意，您展示的 3 个示例并不相同。
`#1`&`#2`将字符缓冲区的生命周期绑定到您的对象实例，
而 While`#3`不这样做。

请注意，如果您需要一个本地缓冲区（*其大小是固定的*）只是为了传递给 c 风格的 api，那么这种用法并不能很好地利用所提供的好东西，`std::string`并且可能静态分配的字符数组更合适。

如果您的要求与 in 一样`#1`，`#2`那么当然是更好的选择`std::string`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T07:57:42.327

第一种变体：字符数组是从堆中分配的。IIRC，析构函数中的删除应该是`delete [] _buffer`.

第二种变体：字符数组是类的一部分，与类一起生死。可以从堆或堆栈中分配，具体取决于类的实例化方式。

第三种变体：字符数组在堆栈上分配，并在封闭范围（在本例中为`Function()`）结束时释放。

话虽如此，除非您出于正当理由确实需要一组字符，否则使用`std::string`要好得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T08:13:15.567

我不相信您正在尝试做的事情有“一种真正的方式”。每种方法都涉及权衡。具体来说：

方法1）你在堆上分配内存。您会受到（轻微的）性能损失。但是，您的类在内存中的大小会减少。如果你在堆栈上分配你的类，你会浪费更少的堆栈空间。正如其他人所提到的，您需要使用该`delete []`语句。

关于您的评论， sizeof(buffer) 返回 4 因为 buffer 是一个字符指针。您的平台将指针定义为 4 字节大。它不报告已分配数组的大小，因为 sizeof 适用于对其描述的类型。inet_ntop 没有填满你的缓冲区，因为你告诉它你的缓冲区只有 4 个字节大。inet_ntop 只是失败了，因为该缓冲区非常小。

方法 2）这用方法 1 的额外堆分配来增加类大小。

关于注释，缓冲区没有被初始化或删除，因为 C++ 处理它。由于您指示编译器为您提供大小为 1024 字节的 char 数组，因此它为您提供了一个。您不需要为编译器初始化/清理。此外，sizeof 返回 1024，因为类型是 1024 字节的 char 数组，因此编译器知道这一点并给出数组大小。它不会在这里返回指针的大小，因为您没有要求指针。

方法3）这个方法改为每次调用函数时分配缓冲区，并将其放入堆栈。根据您打算如何处理数据，这可能是最佳解决方案，或者根本不适用。如果函数结束后不需要缓冲区，那么它是一个不错的选择。

# c# - 数组中最长的子序列

> ID：14301664
> 
> 赞同：0
> 
> 时间：2013-01-13T07:54:57.193
> 
> 标签：c#

我正在尝试使用列表来解决我的任务，我知道我非常接近解决它，但我现在被卡住了。代码中有问题，我无法弄清楚它是什么。能否请您看一下并提供帮助：

```
 /*
Write a program that reads an array of integers and removes from it a minimal number of elements in such way that the
remaining array is sorted in increasing order. Print the remaining sorted array.
Example: {6, 1, 4, 3, 0, 3, 6, 4, 5}  {1, 3, 3, 4, 5}
 */
using System;
using System.Collections.Generic;

class RemoveMinimalElements
{

    static void Main()
    {
        int n;
        n = int.Parse(Console.ReadLine());
        List<int> arr = new List<int>();
        List<int> sorted = new List<int>();
        int maxSubsetLenght = 0;

        for (int i = 0; i < n; i++)
        {
            arr.Add(int.Parse(Console.ReadLine()));
        }

        for (int i = 1; i <= (int)Math.Pow(2, n) - 1; i++)
        {
            int tempSubsetLenght = 0;
            string tempString = "";
            List<int> temp = new List<int>();

            for (int j = 1; j <= n; j++)
            {
                int andMask = i & (1 << j);
                int bit = andMask >> j;

                if (bit == 1)
                {
                    temp.Add(arr[n - 1 - j]);
                    tempSubsetLenght++;
                }
                if (tempSubsetLenght > maxSubsetLenght)
                {
                    maxSubsetLenght = tempSubsetLenght;

                    for(int k =1; k < temp.Count; k ++)
                    {
                        if (temp[k] >= temp[k - 1])
                        {
                            sorted = temp;
                        }
                    }
                }
            }
        }

        for (int i = sorted.Count - 1; i > 0; i--)
        {
            Console.WriteLine(sorted[i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:19:27.497

我没有遵循代码，我只是测试了您的应用程序。

这是我的第一个输入：5。

然后我输入了这 5 个输入 2,4,6,8,10 所以

```
arr = {2,4,6,8,10}; 
```

当它来到最后几行时，它给了我**ArguementOutOfRangeException** `(Index was out of range. Must be non-negative and less than the size of the collection.)` 因为它试图获取 arr[item] 而 item 是 6 所以它试图获取`arr[6]`不存在的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T11:19:56.663

我不知道详尽的搜索是否适合您的情况，但这对您有用吗？

```
static void Main(string[] args)
        {
            int[] input = new[] { 6, 1, 4, 3, 0, 3, 6, 4, 5 };
            int[] expectedOutput = new[] { 1, 3, 3, 4, 5 };

            int[] solution = TryGetSolution(input);

            Console.WriteLine("Input: " + FormatNumbers(input));
            Console.WriteLine("Expected Output: " + FormatNumbers(expectedOutput));
            Console.WriteLine("Output: " + FormatNumbers(solution));
            Console.ReadLine();
        }

        private static string FormatNumbers(int[] numbers)
        {
            return string.Join(", ", numbers);
        }

        private static int[] TryGetSolution(int[] input)
        {
            return TryWithoutAnyItem(input);
        }

        private static int[] TryWithoutAnyItem(int[] items)
        {
            return Enumerable.Range(0, items.Length)
                             .Select(i => TryWithoutItem(items, i))
                             .Where(solution => solution != null)
                             .OrderByDescending(solution => solution.Length)
                             .FirstOrDefault();
        }

        private static int[] TryWithoutItem(int[] items, int withoutIndex)
        {
            if (IsSorted(items)) return items;
            var removed = items.Take(withoutIndex).Concat(items.Skip(withoutIndex + 1));
            return TryWithoutAnyItem(removed.ToArray());
        }

        private static bool IsSorted(IEnumerable<int> items)
        {
            return items.Zip(items.Skip(1), (a, b) => a.CompareTo(b)).All(c => c <= 0);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T15:58:45.870

我解决了！非常感谢您的支持。我是一个初学者，我还不能使用和理解更困难的东西，所以这就是我所做的，我已经知道了：

```
/*
Write a program that reads an array of integers and removes from it a minimal number of elements in such way that the
remaining array is sorted in increasing order. Print the remaining sorted array.
Example: {6, 1, 4, 3, 0, 3, 6, 4, 5}  {1, 3, 3, 4, 5}
 */
using System;
using System.Collections.Generic;

class RemoveMinimalElements
{
    static bool CheckAscending(List<int> list)
    {
        bool ascending = true;

        for (int i = 0; i < list.Count - 1; i++)
        {
            if (list[i] > list[i + 1])
            {
                ascending = false;
            }
        }

        return ascending;
    }

    static void Main()
    {
        int n;
        n = int.Parse(Console.ReadLine());
        List<int> arr = new List<int>();
        List<int> sorted = new List<int>();
        int maxSubsetLenght = 0;

        for (int i = 0; i < n; i++)
        {
            arr.Add(int.Parse(Console.ReadLine()));
        }

        for (int i = 1; i <= (int)Math.Pow(2, n) - 1; i++)
        {
            int tempSubsetLenght = 0;
            List<int> temp = new List<int>();

            for (int j = 1; j <= n; j++)
            {
                if (((i >> (j - 1)) & 1) == 1)
                {
                    temp.Add(arr[j - 1]);
                    tempSubsetLenght++;
                }

            }

            if ((tempSubsetLenght > maxSubsetLenght) && (CheckAscending(temp)))
            {
                sorted = temp;
                maxSubsetLenght = tempSubsetLenght;
            }
        }

        for (int i = 0; i < sorted.Count; i++)
        {
            Console.WriteLine(sorted[i]);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-04T01:32:24.750

这对我有用

```
 private static void FindLongestRisingSequence(int[] inputArray)
    {
        int[] array = inputArray;

        List<int> list = new List<int>();
        List<int> longestList = new List<int>();
        int highestCount = 1;
        for (int i = 0; i < array.Length; i++)
        {
            list.Add(array[i]);
            for (int j = i+1; j < array.Length; j++)
            {
                if (array[i] < array[j])
                {
                    list.Add(array[j]);
                    i++;
                }
                else 
                {
                    break;
                }
                i = j;
            }
            // Compare with in previous lists  
            if (highestCount < list.Count)
            {
                highestCount = list.Count;
                longestList = new List<int>(list);
            }
            list.Clear();

        }
        Console.WriteLine();

        // Print list  
        Console.WriteLine("The longest subsequence");
        foreach (int iterator in longestList)
        {
            Console.Write(iterator + " ");
        }
        Console.WriteLine();
    } 
```

# sql - 访问查询更新不够快

> ID：14301665
> 
> 赞同：0
> 
> 时间：2013-01-13T07:55:06.423
> 
> 标签：sql, database, ms-access, database-design

我正在建立一个关键的库存管理系统。我创建了一个查询，通过确定哪些密钥已归还、未丢失或从未租用，显示当前未使用的密钥。我将此查询复制到我的 keyActivity 表中的 key_id 查找字段（用于记录键注销）。问题是查询不会更新以提供可用键，直到表 keyActivity 关闭并再次打开

示例：我打开keyActivity，表明key_id = 5 丢失。当我转到新记录并选择要注销的密钥时，key_id = 5 显示为可用。直到我关闭表，再次打开它，key = 5 才从列表中删除。

在这里您可以看到键 5 在 id 5 中被指示为丢失，但在 id 7 中选择键时，5 在不应该出现时可用。 ![在此处输入图像描述](../Images/7346452566dca0db86e6e4143b38e003.png)

无论如何要解决此问题或将其设置为按预期工作。我计划使用表格来呈现所有信息。也许有一个表格解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T09:51:16.330

建议您最好`Form`更改表数据。它可以很容易地`requery`根据您所做的更改更新表格并相应地显示更新的数据。另请阅读给定的参考资料以获取更多信息。

在多用户环境中的数据更新和[锁定方面，本文可能会有所帮助。](http://database.ittoolbox.com/groups/technical-functional/access-l/automatic-requery-in-a-network-environment-3809834)

” `Access is NOT a database server. It's a desktop database. It has been pushed to the limit to support mutli-user environments, but only in the sense that you can share the "back end" database across a network.`“……

“ `Even the record locking is performed by the Front End. All of the front end database applications share the "lock file" (a file with the same name as the database file, but with the extension LDB); but that file is simply a mechanism that the front ends use to determine which front end can make changes to the database.`”……

这是重新查询和刷新之间的区别：

`Me.Requery`强制重新加载表单的整个记录​​集（基础数据）。这意味着您当前表单中的所有记录都将重新加载。您当前的位置将会丢失，因此如果您坐在 100 的记录中的第 10 位，您会发现自己又回到了第一个记录。`Me.Requery`本质上与关闭和重新打开表单相同。其他并发用户添加的任何新记录都将可用。同样，任何已删除的记录都会消失。Requery 本质上是“重新运行查询”，它首先将数据拉入表单。您还可以使用 requery 来更新列表框或组合框中的数据。

`Me.Refresh`保存您正在处理的当前记录。它还将检索对当前表单中显示的任何记录的任何更改（但不是添加或删除）。重新计算表单上的任何计算（未绑定字段）。刷新不会重新加载记录集。您不会失去您在表格中的位置（您保留在当前记录上）。不会显示其他用户添加的任何新记录。

*   [参考](http://www.599cd.com/tips/access/requery-v-refresh/)
*   [MS Access - 更改表单中的值后立即写入表](https://stackoverflow.com/questions/9521493/ms-access-write-to-table-immediately-after-changing-value-in-form)

# jquery - webapi 失败，因为 $.getJSON 添加了原始控制器的名称

> ID：14301666
> 
> 赞同：0
> 
> 时间：2013-01-13T07:55:13.183
> 
> 标签：jquery

我正在尝试从标准控制器加载的剃须刀页面中的 web-api 控制器加载数据。

但是，当我尝试执行 $.getJSON() 时它失败了，因为 getJSON 方法在调用前面添加了它的原始控制器名称。我该如何解决这个问题？

示例：从控制器 MyController 加载剃刀视图。我有一个名为 ExplorerApi 的 webapi 控制器，我希望在其中执行一个方法。所以从我打电话的剃刀视图中

`$.getJSON("api/explorerapi/getavailablegroups?userid=marcel", function (data))`

失败是因为 jQuery 在前面添加了 MyController 并将其转换为：

```
$.getJSON("MyController/api/explorerapi/getavailablegroups?userid=marcel", function (data)) 
```

编辑 -

我可以从浏览器调用 web api，它只需`http://localhost:59475/api/ExplorerApi/getavailablegroups?userid=marcel&context=pf`在浏览器中输入即可愉快地返回 json 数据！但是使用下面的代码，它会在前面添加原始控制器名称！

```
var uID = sessionStorage.getItem("symUserID");

            var v = "userid=" + uID + "&context=portfolio";
            $.getJSON("api/explorerapi/GetAvailableGroups?" + v, null, function (data) {
                debugger;
            })
            .fail(
            function (jqXHR, textStatus, err) {
                debugger;
                alert(err);
            }); 
```

警报消息说：未找到 - 那么如果您查看 jqXHR.responseText 加载的数据，则会出现错误 404，并且在它尝试执行的语句的下方放置了原始控制器的名称！

请求的 URL http://localhost:59475/MyController/api/explorerapi/GetAvailableGroups?userid=marcel&context=portfolio&_=1358064733267

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:26:16.407

而不是“api/explorerapi/GetAvailableGroups？” 使用“/api/explorerapi/GetAvailableGroups？”。

# facebook - 查找“用户查看的帖子”facebook graph api FQL

> ID：14301668
> 
> 赞同：0
> 
> 时间：2013-01-13T07:55:31.700
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我正在尝试构建一个类似于 facebook 的 edgerank 算法的安静算法。我有点缺少“边缘”部分，这是关于用户查看任何人的帖子，因此在这方面创造了优势。有没有办法让用户查看过的帖子，而不管用户是否喜欢/评论过它们。显然，在对图/fql 进行了一些研究之后，我认为这在某种程度上是不可行的。但是，你们中有人遇到过这样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:47:29.467

不，没有办法通过 API 或任何其他对开发人员开放的方法来查看用户看到或没有看到的帖子。您唯一可以通过的是喜欢，评论和分享。就是这样。

# jboss - 如何使用 ActiveMQ 5.7.0 在 JBoss AS 7 中配置资源适配器

> ID：14301672
> 
> 赞同：4
> 
> 时间：2013-01-13T07:56:31.220
> 
> 标签：jboss, activemq

我需要在 JBoss AS 7 中使用 ActiveMQ 5.7.0 配置资源适配器。

# android - 如何在没有用户界面的情况下以编程方式在 Android 上打开 GPS，即没有活动，没有按钮？

> ID：14301676
> 
> 赞同：0
> 
> 时间：2013-01-13T07:57:10.483
> 
> 标签：android, gps

> **可能重复：**
> [以编程方式启用 GPS 不起作用](https://stackoverflow.com/questions/11616931/enabling-gps-programmatically-not-working)

我正在制作这个应用程序，我需要通过读取传入消息中的特殊代码来打开 GPS，并将其 GPS 位置（经纬度）发送给发件人。所以我需要知道如何在不使用任何用户界面的情况下通过编码启用 GPS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:01:29.633

使用从 BroadcastReceiver 启动的服务（用于检测传入 SMS 的服务）。调用是一样的。如果你真的需要 GPS 坐标（网络不够好），你需要在 LocationManager 上调用 requestLocationUpdates 并等待 GPS 同步并调用你的监听器。我曾经为一个应用程序做过同样的事情，工作得很好。

# sql - 在 SQL 查询中多次使用别名？

> ID：14301677
> 
> 赞同：0
> 
> 时间：2013-01-13T07:57:13.853
> 
> 标签：sql, alias

我在查询中两次使用相同的别名 (RankedPrice)。我预计这会导致错误。但它运作良好。为什么会这样？我原以为它会抛出像 C++ 或 Java 这样的变量范围错误，但它没有发生。

```
select *
from
(select *, RANK() over(order by retailprice) as RankedPrice
from CurrentProducts) as RankedPrice
where RankedPrice = 5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T08:11:10.407

由于 SQL 的工作方式，您永远不会对在任何特定引用中引用的对象*类型有任何混淆。*

如果您有`SELECT a, ...`，您就知道这`a`是对列的引用。它不能是对表、数据库、存储过程、UDF 等的引用。(*)

如果您有`SELECT a.b, ...`，则您知道这`a`是对表的引用（+），并且`b`是对列的引用。（*）

因此，没有逻辑上的理由来排除一个表包含一个表和列具有相同名称的列。

* * *

(*) - 这适用于`SELECT`条款。在`FROM`子句中，单部分名称只能是表（+），两部分名称只能是模式+表等。但是在每个子句中，所引用的对象类型始终是明确的。

(+) - 好吧，我在这里真正的意思是一个行源 - 一个表、一个视图、一个 CTE。如果您愿意，可以将其构造为表并在查询中使用它。

* * *

正如其他人所说，在子查询中引入相同的别名也没有障碍。但这在这里没有发生，因为我们最终得到了一个可以（正确）被引用为`RankedPrice.RankedPrice`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T08:08:44.357

父查询和嵌套子查询具有不同的别名命名空间。因此嵌套子查询使用相同的别名是可以的，但是对于阅读代码的人来说可能有点混乱。

您的代码`RankedPrice`中所说的首先用作列别名，然后用作派生表别名，尽管前面提到的命名空间分隔可以防止任何冲突。

我还应该指出，相关子查询有一个共享命名空间。

# c# - 来自 Codebehind 的 Ext.net 2.1 多列组合框

> ID：14301683
> 
> 赞同：0
> 
> 时间：2013-01-13T07:58:23.163
> 
> 标签：c#, asp.net, ext.net

如何从后面的代码创建一个简单的两列组合框，如[http://examples.ext.net/#/Form/ComboBox/Two_Columns/所示？](http://examples.ext.net/#/Form/ComboBox/Two_Columns/)

通过将标记转换为代码隐藏来创建完全相同的控件时，很少会出现空引用错误：

```
cbStates.ListConfig.....
cbStates.ListConfig.Tpl... 
```

代码：

```
<%@ Register Assembly="Ext.Net" Namespace="Ext.Net" TagPrefix="ext" %>
<script runat="server">
    protected void Page_Load(object sender, EventArgs e)
    {
        this.Store1.DataSource = new object[]
        {
            new object[] { "AL", "Alabama", "The Heart of Dixie"},
            new object[] { "AK", "Alaska", "The Land of the Midnight Sun"},
            new object[] { "AZ", "Arizona", "The Grand Canyon State"},
            // 44 other states
            new object[] { "WV", "West Virginia", "Mountain State"},
            new object[] { "WI", "Wisconsin", "America's Dairyland"},
            new object[] { "WY", "Wyoming", "Like No Place on Earth"} 
        };

        this.Store1.DataBind();
        CreateCombo();
    }

    private void CreateCombo()
    {
        Ext.Net.ComboBox cbStates = new Ext.Net.ComboBox();
        cbStates.EmptyText = "Select State";
        cbStates.TypeAhead = true;
        cbStates.ForceSelection = true;
        cbStates.DisplayField = "state";
        cbStates.ValueField = "abbr";
        cbStates.MinChars = 1;
        cbStates.MatchFieldWidth = false;
        cbStates.PageSize = 10;
        cbStates.StoreID = "Store1";

        cbStates.ListConfig.Width = 320;
        cbStates.ListConfig.Height = 300;
        cbStates.ListConfig.ItemSelector = ".x-boundlist-item";
        cbStates.ListConfig.Tpl.Html = "<tpl for=\".\">"
                            + "<tpl if=\"[xindex] == 1\">"
                            + "<table class=\"cbStates-list\">"
                            + "<tr>"
                            + "<th>State</th>"
                            + "<th>Nick</th>"
                            + "</tr>"
                            + "</tpl>"
                            + "<tr class=\"x-boundlist-item\">"
                            + "<td>{state}</td>"
                            + "<td>{nick}</td>"
                            + "</tr>"
                            + "<tpl if=\"[xcount-xindex]==0\">"
                            + "</table>"
                            + "</tpl>"
                            + "</tpl>";

        Ext.Net.FieldTrigger trigger1 = new FieldTrigger();
        trigger1.Icon = TriggerIcon.Clear;
        trigger1.HideTrigger = true;

        cbStates.Triggers.Add(trigger1);

        cbStates.Listeners.BeforeQuery.Handler = "this.getTrigger(0)[this.getRawValue().toString().length == 0 ? 'hide' : 'show']();";
        cbStates.Listeners.TriggerClick.Handler = "if (index == 0) {this.focus().clearValue(); trigger.hide();}";
        cbStates.Listeners.Select.Handler = "this.getTrigger(0).show();";

        form1.Controls.Add(cbStates);
    }
</script>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <ext:ResourceManager runat="server" />
    <ext:Store ID="Store1" runat="server" IsPagingStore="true" PageSize="10">
        <Model>
            <ext:Model ID="Model1" runat="server">
                <Fields>
                    <ext:ModelField Name="abbr" />
                    <ext:ModelField Name="state" />
                    <ext:ModelField Name="nick" />
                </Fields>
            </ext:Model>
        </Model>
    </ext:Store>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:50:53.787

这样做：

```
Ext.Net.ComboBox cbStates = new Ext.Net.ComboBox();
cbStates.EmptyText = "Select State";
cbStates.TypeAhead = true;
cbStates.ForceSelection = true;
cbStates.DisplayField = "state";
cbStates.ValueField = "abbr";
cbStates.MinChars = 1;
cbStates.MatchFieldWidth = false;
cbStates.PageSize = 10;
cbStates.StoreID = "Store1";

BoundList listConfig = new BoundList();
listConfig.Width = 320;
listConfig.Height = 300;
listConfig.ID = "lc";
listConfig.ItemSelector = ".x-boundlist-item";
XTemplate tpl = new XTemplate();

tpl.Html = "<tpl for=\".\">"
                    + "<tpl if=\"[xindex] == 1\">"
                    + "<table class=\"cbStates-list\">"
                    + "<tr>"
                    + "<th>State</th>"
                    + "<th>Nick</th>"
                    + "</tr>"
                    + "</tpl>"
                    + "<tr class=\"x-boundlist-item\">"
                    + "<td>{state}</td>"
                    + "<td>{nick}</td>"
                    + "</tr>"
                    + "<tpl if=\"[xcount-xindex]==0\">"
                    + "</table>"
                    + "</tpl>"
                    + "</tpl>"; lc.Tpl = tpl;

cbStates.ListConfig = lc;

Ext.Net.FieldTrigger trigger1 = new FieldTrigger();
trigger1.Icon = TriggerIcon.Clear;
trigger1.HideTrigger = true;

cbStates.Triggers.Add(trigger1);

cbStates.Listeners.BeforeQuery.Handler = "this.getTrigger(0)[this.getRawValue().toString().length == 0 ? 'hide' : 'show']();";
cbStates.Listeners.TriggerClick.Handler = "if (index == 0) {this.focus().clearValue(); trigger.hide();}";
cbStates.Listeners.Select.Handler = "this.getTrigger(0).show();";

form1.Controls.Add(cbStates); 
```

# android - 是否可以通过手机应用程序播放系统声音？

> ID：14301685
> 
> 赞同：0
> 
> 时间：2013-01-13T07:58:45.430
> 
> 标签：android, iphone

有没有办法通过 iPhone 或 android 手机应用程序播放声音。我可以播放声音以便对方可以听到歌曲吗？是否有 API 访问电话堆栈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:11:38.300

Android 不允许您在通话期间修改传出音频流。您能做的最好的事情就是通过扬声器播放您想要播放的任何内容，并希望麦克风能够接收到它。

除了在 iOS 上发起呼叫外，Apple 不允许您做任何事情，因此也不可能这样做。

# iphone - AVCaptureSession，多个 AVCaptureAudioDataOutputs

> ID：14301686
> 
> 赞同：1
> 
> 时间：2013-01-13T07:58:53.717
> 
> 标签：iphone, objective-c, avfoundation, multimedia, avcapture

**环境**

*   苹果手机
*   arm7/sdk6.0
*   代码 4.5

**用例**

1.  基于 AVCam 示例
2.  使用 AVCaptureMovieFileOutput 将 A/V 捕获到文件中
3.  添加额外的 AVCaptureAudioDataOutput 以在录制时截取正在写入文件的音频

**如何**

1.  将视频输入添加到捕获会话
2.  将音频输入添加到捕获会话
3.  将文件输出添加到捕获会话
4.  将音频输出添加到捕获会话
5.  配置
6.  开始录制

**问题**

似乎音频输出是互斥的，因此，要么我将数据写入磁盘，要么我调用 AVCaptureAudioDataOutput 捕获委托，当添加 AVCaptureMovieFileOutput 时（顺序无关紧要），不调用 AVCaptureAudioDataOutput 委托。

*   如何解决？如何让“AVCaptureAudioDataOutput”触发它的委托/选择器，同时使用“AVCaptureMovieFileOutput”将数据写入磁盘？
*   除了使用较低级别的 API（例如，例如。AVAssetWriter 等人？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:32:15.047

AVAssetWriter 将与 AVAssetWriterInputPixelBufferAdaptor 一起使用，可以在[此处](https://stackoverflow.com/questions/9257052/avcapturesession-only-got-video-buffer)找到如何实现此目的的一个很好的示例。
然后，在调用“AVCaptureAudioDataOutputSampleBufferDelegate”时，可以传播原始音频缓冲区以进行进一步处理（与将数据写入磁盘并行）。

# c# - MVVM Light 和一个应用程序实例

> ID：14301691
> 
> 赞同：2
> 
> 时间：2013-01-13T07:59:57.787
> 
> 标签：c#, wpf, singleton, mvvm-light

我正在使用 MVVM Light 开发 WPF 应用程序。

我想知道如何检查和防止用户运行多个应用程序实例？

谢谢您的帮助。

罗曼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:17:10.687

Arik Poznanski 在他的博客上写了一篇关于这个主题的文章。

这是第一[篇文章的链接](http://blogs.microsoft.co.il/blogs/arik/archive/2010/05/28/wpf-single-instance-application.aspx)

这是[更新的链接](http://blogs.microsoft.co.il/blogs/arik/archive/2011/04/04/wpf-single-instance-application-update.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T08:07:13.057

您可以在应用程序启动时检查正在运行的进程，如果副本已经存在则退出：

```
var appProcessName = Process.GetCurrentProcess().ProcessName;
var matchingProcesses = Process.GetProcessesByName(appProcessName);
if (matchingProcesses.Any())
{
    // Exit
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T08:21:01.437

我认为您正在寻找的东西称为单实例互斥锁。谷歌有很多结果，但我最近使用了这个线程中的一个用于 Windows 窗体应用程序。

[https://stackoverflow.com/a/7810107/1718702](https://stackoverflow.com/a/7810107/1718702)

# asp.net-mvc - 尝试执行多项目 ASP.Net MVC 站点时出现编译错误

> ID：14301693
> 
> 赞同：4
> 
> 时间：2013-01-13T08:00:30.270
> 
> 标签：asp.net-mvc

我收到这个错误。

> 编译错误描述：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：CS1704：已导入具有相同简单名称“MyMVCAssembly，版本=1.0.0.0，文化=中性，PublicKeyToken=null 的程序集。尝试删除其中一个引用或对其进行签名以并排启用。

我的解决方案有 2 个 ASP.Net MVC 项目 - 拆分主要内容和区域。主项目没有对第二个项目的引用。相反，它获取文件夹中的所有 MVC DLL 并将其存储到 IOC 容器中，该容器负责注册所有控制器。

当我将第二个 ASP.Net MVC 项目的输出设置到主项目的 bin 文件夹中时，出现错误。（我已将区域解决方案中的所有视图设置为始终复制。）

我还尝试了将 DLL 复制到主 bin 而不是设置输出的构建后操作，但结果是相同的。

我应该怎么办？

* * *

此外，我有以下设置：

1.  它设置为使用本地 IIS 服务器而不是 VS 开发服务器。
2.  在“输出”窗口中，我看到本地 Web 服务器正在从 GAC 和 Temporary ASP.Net 文件夹加载所有 DLL。我看到的问题是它还试图从我的解决方案文件夹中加载我的 DLL 文件。

任何想法为什么它也试图从解决方案中获取唯一的 DLL？对于其他项目，它没有这种行为。

* * *

更新：

这是一个奇怪的行为：

[1] 我清除了违规程序集的所有副本。

[2] 我删除了将该程序集复制到我的主 MVC 项目 bin 文件夹的构建后操作。

[3] 我运行主要项目。它可以正常工作，但当然不会加载缺少的程序集。

[4] 我手动将该程序集复制到 mian MVC 项目 bin 文件夹中。

[5] 我运行解决方案。它再次收到错误！

有人可以解释为什么它试图从两个不同的地方加载这个相同的程序集吗？

好的，这可能是问题的线索：因为我将程序集复制到主 MVC 项目的 bin 文件夹，它也被复制到临时 ASP.NEt 文件夹中。同时，由于该项目没有被解决方案中的任何其他项目引用，因此它也在将相同的程序集复制到 IIS 中。我怎样才能防止这种情况发生？如果我排除将程序集复制到主 MVC bin 的步骤，它根本不会加载到 IIS 中。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T16:54:08.373

> 此错误指出两个引用具有相同的程序集标识，因为所讨论的程序集缺少强名称，它们没有签名，因此编译器无法在元数据中区分它们。因此，运行时会忽略版本和区域性程序集名称属性。用户应该删除多余的引用，重命名其中一个引用，或者为它们提供一个强名称。

可以像下面这样解释。

下面的示例创建一个程序集并将其保存到根目录。

```
// CS1704_a.cs
// compile with: /target:library /out:c:\\cs1704.dll
public class A {} 
```

下面的示例创建了一个与前一个示例同名的程序集，但将其保存到不同的位置。

```
// CS1704_b.cs
// compile with: /target:library /out:cs1704.dll
public class A {} 
```

下面的示例尝试引用这两个程序集。下面的示例生成**CS1704**。

```
// CS1704_c.cs
// compile with: /target:library /r:A2=cs1704.dll /r:A1=c:\\cs1704.dll
// CS1704 expected
extern alias A1;
extern alias A2; 
```

**更新**

如果两个程序集都是强名称（签名），则 CLR 将始终从 GAC 加载。

您可以按照以下提到的步骤操作：

> 1.  通过检查适用的配置文件（包括应用程序配置文件、发布者策略文件和机器配置文件）来确定正确的程序集版本。如果配置文件位于远程机器上，则运行时必须首先找到并下载应用程序配置文件。
>     
>     
> 2.  检查程序集名称是否已绑定到之前，如果是，则使用先前加载的程序集。如果加载程序集的先前请求失败，则请求立即失败，而不尝试加载程序集。
>     
>     
> 3.  检查全局程序集缓存。如果在那里找到该程序集，则运行时将使用该程序集。
>     
>     
> 4.  装配探针（有关更多信息，请查看下面提到的文章）

有关更多信息，请查看[**运行时如何定位程序集**](http://msdn.microsoft.com/en-us/library/yx7xezcf.aspx)

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T12:57:14.653

我在使用添加了错误引用的测试容器项目时遇到了类似的问题。我删除了它，发现在解决方案清理和重建之后，问题是 bin 目录中的两个 DLL 发生冲突。删除它们并重建一切都很好。

# python - 蒙特卡罗模拟期间 random.sample 函数的意外行为

> ID：14301694
> 
> 赞同：0
> 
> 时间：2013-01-13T08:00:49.150
> 
> 标签：python, random

假设我想用 Python 模拟一个经典问题：有一个袋子，里面有 55% 的红球和 45% 的绿球。

我想提取 10 个球，并检测所有这些球为绿色的概率是多少。

我使用蒙特卡罗模拟，使用这样的函数 random.sample(balls, 10) ：

```
from random import choice, shuffle, sample, randint

Red = False
Green = True

bags = [Red for _ in range(55)]
bags.extend([Green for _ in range(45)])
# shuffle(bags)

def testonce():
    return all(sample(bags, 10))

def test(N):
    K = 0
    for _ in xrange(N): K += testonce()
    return float(K)/N

print '/', test (10000000)
print ':', .45**10 
```

此代码打印模拟检测到的概率和真实概率（正确答案）。它是这样打印的：

```
/ 0.0001848
: 0.00034050628916 
```

这种差异向我表明

*   随机模块是错误的

*   要么我错过了什么，要么在代码中做错了什么。

我想念什么？如何正确编写模拟，使得当 N 增长时，返回的数字收敛到真实概率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T08:05:49.797

`radom.sample`选择不替换，您正在计算替换的概率。

```
random.sample(population, k)
    Return a k length list of unique elements chosen from the population sequence. Used for random sampling without replacement. 
```

（[文档](http://docs.python.org/2/library/random.html#random.sample)）

正确的概率（对于你 MC）是：

```
In [30]: np.prod(np.arange(36,46)/np.arange(91.0,101))
Out[30]: 0.00018429406441449519 
```

# c++ - SFML 键盘输入延迟

> ID：14301703
> 
> 赞同：2
> 
> 时间：2013-01-13T08:01:54.330
> 
> 标签：c++, keyboard, sfml

我开始使用 C++ 的 SFML 库，我来到了一个一切正常的地方，但不是我想要的方式。

我的问题是，我怎样才能用键盘平稳地移动一个物体，而没有一点延迟？

```
#include <SFML/System.hpp>
#include <SFML/Graphics.hpp>

using namespace sf;

const int SCREEN_WIDTH = 800;
const int SCREEN_HEIGHT = 600;

int main(){
VideoMode VMode(SCREEN_WIDTH, SCREEN_HEIGHT, 32);
RenderWindow screen(VMode, "Empty Window");
Event event;
Keyboard key;
Color screencolor(0,150,0);
Texture pietexture;
pietexture.loadFromFile("image.png");
Sprite pie(pietexture);
pie.setPosition(150,150);
screen.draw(pie);
screen.display();
bool on = true;
while(on){
    screen.clear(Color(0,255,0));
    while(screen.pollEvent(event)){
        if(event.type == Event::Closed){
            screen.close();
            on = false;
        }
        else if(event.type == Event::KeyPressed){
            if(key.isKeyPressed(Keyboard::Left)){
                pie.move(-10,0);
            }
            if(key.isKeyPressed(Keyboard::Right)){
                pie.move(10,0);
            }
            if(key.isKeyPressed(Keyboard::Up)){
                pie.move(0,-10);
            }
            if(key.isKeyPressed(Keyboard::Down)){
                pie.move(0,10);
            }

        }
    }
    screen.draw(pie);
    screen.display();
} 
```

}

它目前所做的，是在按键后稍作停顿，然后正常运行，但是我怎么能在开始时没有那个小停顿。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T08:09:02.830

不要在按键事件上移动对象，而是设置一个变量来指示它应该移动的方向和速度。然后，在按键释放事件中，将速度重置为 0。然后与事件处理部分分开处理移动，由这些变量和某种计时系统的组合来调节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T10:32:10.303

用于`sf::Keyboard::isKeyPressed(key)`实时轮询按键状态。根据经验，不要在需要高度响应界面的地方使用事件。

您还需要一个计时机制来调节速度。有一个`sf::Clock`您可以用于此目的。

# c# - 如何循环遍历所有级别的树视图以根据某些条件隐藏某些节点？

> ID：14301704
> 
> 赞同：0
> 
> 时间：2013-01-13T08:02:13.020
> 
> 标签：c#, asp.net, treeview, nodes, xmldatasource

有没有办法遍历所有`the levels of treeview nodes`.

我有一个带有 xml 数据源的树视图：

```
<asp:TreeView ID="tv_products" runat="server" ImageSet="Events" DataSourceID="XmlDataSource1" OnSelectedNodeChanged="DirectoryTree_SelectedNodeChanged" ShowLines="True" OnDataBound="DirectoryTree_DataBound">
           <DataBindings>
                <asp:TreeNodeBinding DataMember="MenuItem" ImageUrl="~/images/folder.png" TextField="fullname" ValueField="maincode" ToolTipField="fullname" />
           </DataBindings>
                 <ParentNodeStyle Font-Bold="False" />
                     <HoverNodeStyle Font-Underline="False" ForeColor="Red" />
                             <SelectedNodeStyle Font-Underline="True" Font-Bold="true" Font-Size="Small" HorizontalPadding="0px" VerticalPadding="0px" />
                             <NodeStyle Font-Names="Verdana" Font-Size="8pt" ForeColor="Black" HorizontalPadding="5px" NodeSpacing="0px" VerticalPadding="0px" /></asp:TreeView> 
```

如果可能，请举个例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T06:42:06.900

编写一个获取树节点作为属性的方法。该方法的逻辑应该类似于遍历每个子节点并检查每个子节点的子节点数是否 > 0，如果是，则将此子节点传递给该方法。

正如您所说，您必须在此处检查一个条件，您可以在代码中任何您想要的地方插入您的条件。

希望能帮助到你！！！

# asp.net-mvc - DateTime 字段的时间格式在编辑模式 Asp Mvc 中不显示

> ID：14301706
> 
> 赞同：1
> 
> 时间：2013-01-13T08:02:28.370
> 
> 标签：asp.net-mvc

在我的模型中，我有以下内容：

```
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:H:mm}")]
public DateTime _time { get; set; } 
```

在我`Edit`的文本框中的视图中，设置的值是完整的**日期**和*时间*，当我尝试通过浏览器手动编辑值时，jQuery 验证会产生日期格式不正确的错误

当我`ApplyFormatInEditMode=true`在文本框中添加为什么我得到格式化的一个（*唯一时间*）的完整日期时，为什么当格式是没有日期的时间时jQuery验证器会抛出错误，我该如何绕过它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T08:54:49.613

如果要应用自定义格式，则应使用`Html.EditorFor`而不是：`Html.TextBoxFor`

```
@Html.EditorFor(x => x._time) 
```

此外，通过命名属性`_time`，您至少违反了 2 个 C# 命名约定（属性名称以大写字母开头，而不是下划线）。

# algorithm - 寻找路径是一个大部分为空的加权网格

> ID：14301711
> 
> 赞同：0
> 
> 时间：2013-01-13T08:03:22.313
> 
> 标签：algorithm, sorting, path-finding, heuristics

我需要在 8 个连接的网格（上/下左/右和对角线）中找到从 A 到 B 的路径。问题是，这个网格大部分 (25-60%) 是空的，但是可能必须通过某些具有高权重值的点（〜空瓷砖重量的 20 倍）。我已经用 RSR 和 JPS 研究过 A* 之类的东西，但这些似乎只适用于未加权的网格。现在我已经推出了一个 A* 实现，但它比我想要的要慢。我什至不需要一个完全最优的算法，只需要一个接近的算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T10:29:52.110

[JPS](http://users.cecs.anu.edu.au/~dharabor/data/papers/harabor-grastien-aaai11.pdf) was formulated and analyzed for uniform grids with obstacles. I think that if you treat any "unusual" tiles as you would treat obstacles, JPS will work (i.e. will let you go fast through uniform regions). JPS' author even speculated as much in the comments to his [JPS blog post](http://harablog.wordpress.com/2011/09/07/jump-point-search/) (and it seems fairly obvious):

> simply treat any neighbour which is of a different terrain type to the current node, as forced. This will allow you to quickly search across a uniform-cost region, stop to expand a node when crossing into a different region, and continue jumping on the other side

However you seem to imply that your grid is not just non-uniform, but also has bonus tiles in addition to penalty tiles. You will need to deal with those as well (e.g. bias all grid weights up to avoid negative weights).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T21:55:19.190

如果速度是一个问题，请考虑使用图形硬件（例如 CUDA 或 OpenCL）。 [本文](https://www.google.com/url?url=http://scholar.google.com/scholar_url?hl=en&q=http://ecommons.library.cornell.edu/bitstream/1813/6962/2/90-1122.ps&sa=X&scisig=AAGBfm37aLjFRQXWcE3l-R-Xsd34PAXvNA&oi=scholarr&rct=j&sa=X&ei=MizzUKu5LaTb0wH1m4CgAQ&ved=0CC0QgAMoADAA&q=robot%20path%20planning%20graphics%20hardware%20siggraph&usg=AFQjCNGuyOvoZJRiXuzhPKGxtoX1_WoMkQ)讨论了 3d 网格上的“brushfire”算法，用于为 2d 机器人找到具有旋转的路径。尽管您是二维的，但它几乎与您的问题完全相同。

# cocoa - 如何将 NSString 发送到另一个应用程序当前聚焦的 UIElement？

> ID：14301712
> 
> 赞同：2
> 
> 时间：2013-01-13T08:03:23.820
> 
> 标签：cocoa, accessibility, uielement

我有一个没有停靠图标或全局菜单的菜单栏应用程序，它只是一个 StatusItem 和一个窗口。

我已经将它连接到激活窗口的热键，并且在停用窗口后，我可以将焦点发送回先前活动的应用程序。

如何将 NSString 发送到另一个应用程序中的活动文本区域，就好像用户直接键入它一样？

[我认为使用辅助功能](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSAccessibility_Protocol/Reference/Reference.html)可能是可能的。如果可能的话，我想避免使用 AppleScript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T10:02:15.993

从[焦点 UI 元素](http://developer.apple.com/library/mac/documentation/Accessibility/Reference/AccessibilityCarbonRef/Reference/reference.html#//apple_ref/c/macro/kAXFocusedUIElemenAttribute)中，您需要[得到](http://developer.apple.com/library/mac/documentation/ApplicationServices/Reference/AXUIElement_header_reference/Reference/reference.html#//apple_ref/c/func/AXUIElementCopyAttributeValue)两件事：

*   它的[价值](http://developer.apple.com/library/mac/documentation/Accessibility/Reference/AccessibilityCarbonRef/Reference/reference.html#//apple_ref/c/macro/kAXValueAttribute)。
*   其[选定的文本范围](http://developer.apple.com/library/mac/documentation/Accessibility/Reference/AccessibilityCarbonRef/Reference/reference.html#//apple_ref/c/macro/kAXSelectedTextRangeAttribute)。

现在，直接的方法是只获取这两个属性，但这实际上是错误的解决方案。

问题是 value 属性的值是一个纯字符串。如果元素是富文本视图，您将丢失用户可能拥有的任何格式或嵌入对象。那会很糟糕。

所以获取值的正确方法是获取元素的[字符数](http://developer.apple.com/library/mac/documentation/Accessibility/Reference/AccessibilityCarbonRef/Reference/reference.html#//apple_ref/c/macro/kAXNumberOfCharactersAttribute)，以该数字为长度构造一个从零开始的范围，然后[获取](http://developer.apple.com/library/mac/documentation/ApplicationServices/Reference/AXUIElement_header_reference/Reference/reference.html#//apple_ref/c/func/AXUIElementCopyParameterizedAttributeValue)该[范围的属性字符串](http://developer.apple.com/library/mac/documentation/Accessibility/Reference/AccessibilityCarbonRef/Reference/reference.html#//apple_ref/c/macro/kAXAttributedStringForRangeParameterizedAttribute)。如果失败，*那么*您将获得纯值。

获得值（作为属性字符串或纯字符串）和选定范围后，[将值中的选定文本范围替换为要插入的文本](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSMutableAttributedString_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMutableAttributedString/replaceCharactersInRange%3awithString%3a)。如果用户没有选择任何内容，则范围将是插入点位置处的空范围（长度为零），替换将有效地成为插入。

然后，将元素的值设置为修改后的字符串。（我只能希望将其设置为属性字符串会起作用。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T00:39:38.420

我最终使用了粘贴板并`CGEventCreateKeyboardEvent()`模仿了`[cmd+v]`粘贴的键盘快捷键。

在激活我的窗口之前，我记录了之前的应用程序：

```
_previousApplication = [[notification userInfo] objectForKey:NSWorkspaceApplicationKey]; 
```

关闭窗口后，我激活了之前的应用程序：

```
[_previousApplication activateWithOptions:NSApplicationActivateIgnoringOtherApps]; 
```

然后粘贴 NSString：

```
#define KEY_CODE_v ((CGKeyCode)9)

void DCPostCommandAndKey(CGKeyCode key) {
    CGEventSourceRef source = CGEventSourceCreate(kCGEventSourceStateCombinedSessionState);

    CGEventRef keyDown = CGEventCreateKeyboardEvent(source, key, TRUE);
    CGEventSetFlags(keyDown, kCGEventFlagMaskCommand);
    CGEventRef keyUp = CGEventCreateKeyboardEvent(source, key, FALSE);

    CGEventPost(kCGAnnotatedSessionEventTap, keyDown);
    CGEventPost(kCGAnnotatedSessionEventTap, keyUp);

    CFRelease(keyUp);
    CFRelease(keyDown);
    CFRelease(source);
}

DCPostCommandAndKey(KEY_CODE_v); 
```

# r - 如何在 ESS 的缓冲区顶部制作 R 的当前提示，就像 R 控制台中的 Control + L

> ID：14301722
> 
> 赞同：1
> 
> 时间：2013-01-13T08:05:33.923
> 
> 标签：r, emacs, elisp, ess

我试图将以下内容放入`my .emacs`文件中。

```
(defun clear-shell ()
   (interactive)
   (let ((old-max comint-buffer-maximum-size))
     (setq comint-buffer-maximum-size 0)
     (comint-truncate-buffer)
     (setq comint-buffer-maximum-size old-max))) 
(global-set-key (kbd "\C-x c") 'clear-shell) 
```

它有效，但它也删除了我之前输入的所有命令。所以这不是我想要的。我只希望当前提示 > 在缓冲区的顶部，而不是删除我之前输入的任何命令。

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T08:45:58.957

对我来说`Esc-0 Ctr-l`似乎工作。

`Ctrl-h k' 输出为：

```
C-l runs the command recenter-top-bottom,
which is an interactive compiled Lisp function in window.el'. 
```

根据Emacs 手册中的[这个页面](http://www.gnu.org/software/emacs/manual/html_node/emacs/Recentering.html)：

```
Scroll the selected window so the current line is the 
center-most text line; on subsequent consecutive invocations,
make the current line the top line, the bottom line, and so on in
cyclic order. Possibly redisplay the screen too (recenter-top-bottom). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:43:05.990

这似乎完成了工作（尽管我实际上不确定这是否是您所追求的）：

```
(defun clean-shell ()
 (interactive)

 ; if you call this from your .r script, it will switch to the next window
 (when (eq major-mode 'ess-mode) (other-window 1))   

 (mark-whole-buffer)
 (exchange-point-and-mark)
 (move-beginning-of-line 1)
 (delete-region (region-beginning) (region-end))
 (end-of-line)
) 
```

编辑：或者也许这个？

```
(defun clean-shell ()
 (interactive)
 (when (eq major-mode 'ess-mode) (other-window 1))
 (mark-whole-buffer)
 (exchange-point-and-mark)
 (move-beginning-of-line 0)
 (delete-region (region-beginning) (region-end))
 (end-of-line)
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:53:10.593

有什么问题`C-l C-l`？它适用于任何缓冲区。

# javascript - 如何使用 d3.js 在世界地图上绘制 3d 条形图？

> ID：14301724
> 
> 赞同：1
> 
> 时间：2013-01-13T08:05:50.260
> 
> 标签：javascript, map, 3d, d3.js, bar-chart

我想做[这种地理定位的 3d 条形图](http://www.kartograph.org/showcase/3d/)

d3.js 可以处理[3d 地图投影](http://bl.ocks.org/3711652)

有没有办法在给定坐标上投影一个条形以获得类似于 kartograph 的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:03:53.383

D3 中的任何投影数据都可以在其上放置条形，矩形的 xy 位于经纬度点。这是 D3 的卫星投影示例：

[http://bl.ocks.org/4531633](http://bl.ocks.org/4531633)

为了匹配 Kartograph 示例的样式，您需要相对于与其关联的点的投影旋转矩形，并使用不透明度。

# node.js - 处理 MongoDB 从节点断开/重新连接

> ID：14301725
> 
> 赞同：4
> 
> 时间：2013-01-13T08:05:54.320
> 
> 标签：node.js, mongodb, mlab, node-mongodb-native

当我的 MongoDB 连接空闲几分钟后，下一个请求以错误结束。从命令行`mongo`客户端，它看起来像这样：

```
> db.users.find()
Sat Jan 12 23:42:35 Socket recv() errno:54 Connection reset by peer 107.22.25.25:47207
Sat Jan 12 23:42:35 SocketException: remote: 107.22.25.25:47207 error: 9001 socket exception [1] server [107.22.25.25:47207] 
Sat Jan 12 23:42:35 DBClientCursor::init call() failed
Sat Jan 12 23:42:35 query failed : chowology.users {} to: ds047207.mongolab.com:47207
Error: error doing query: failed
Sat Jan 12 23:42:35 trying reconnect to ds047207.mongolab.com:47207
Sat Jan 12 23:42:35 reconnect ds047207.mongolab.com:47207 ok 
```

我看到了 MongoHQ 和 MongoLab 沙盒实例的问题。

由于重新连接，下一个请求顺利进行。这是我的网络应用程序中的一个问题，因为几分钟不活动后，在网络请求期间会出现此错误。有两点让我吃惊：

1.  MongoDB 连接如此频繁且频繁地被破坏，并且
2.  驱动程序只是引发了一个异常，而不是在重新连接后自动重试（我使用的是 connect-mongo，它使用了 mongoose，而 mongoose 又使用了[node-mongodb-native](https://github.com/mongodb/node-mongodb-native)）。

这是其他人的经验吗？这个应该怎么处理？如果应用程序开发人员将他们的数据库操作包装在一些重试异常处理废话中，我会感到惊讶。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T23:03:56.540

您想查看 Server 对象的文档

[http://mongodb.github.com/node-mongodb-native/api-generated/server.html#server](http://mongodb.github.com/node-mongodb-native/api-generated/server.html#server)

Especially the socketOptions where you can set keepAlive and the connection timeouts. By default keepalive is off and timeout is 0 or never which means the os default socket timeout is in effect (varies from os to os). Keep alive will send a packet once in awhile down the tcp socket connection to keep it alive. Sometimes firewalls are badly configured and don't send an end packet when they close a connection leaving the connection dead and in limbo which is what the monoglabs people are talking about (more often than not to be honest they are horribly configured).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T19:04:41.287

1.  检查您的计算机不会进入睡眠状态
2.  检查您的路由器/防火墙是否没有杀死空闲连接

第一个问题原来是我的电脑在不知不觉中休眠并断开网络连接。这是一台新电脑，我没有意识到我没有禁用睡眠 :-P

MongoLab 的 Jared 帮助我解决了这个问题，我对此表示感谢。他说这种行为在通过防火墙时很常见（正如 mjhm 在他的评论中所建议的那样）。因此，一项测试是绕过它。

仍然通过我的路由器，空闲几个小时后我得到一个不同的错误：

```
db.users.find()
Sun Jan 13 14:55:02 Socket say send() errno:32 Broken pipe 107.22.25.25:47207
Error: 9001 socket exception [2] server [107.22.25.25:47207] 
Sun Jan 13 14:55:02 trying reconnect to ds047207.mongolab.com:47207
Sun Jan 13 14:55:02 reconnect ds047207.mongolab.com:47207 ok 
```

我会从不通过我的路由器/防火墙的服务器再试一次。

驱动程序在当前操作上引发异常的行为是预期的并且可以接受，因为断开连接确实是一个例外情况。

***更新**：当我绕过我的路由器时，这些问题都不会发生，它们也不会发生在我的 Nodejitsu 实例中，我相信它在 Joyent 数据中心中运行。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T06:42:26.157

I had the same problem and I think it's because I'm accessing the internet behind a proxy server

# javascript - 当您想将它们与 javascript 一起使用时，您如何避免重复的 keydown 消息，您按住键但希望它只播放一次？

> ID：14301728
> 
> 赞同：1
> 
> 时间：2013-01-13T08:06:36.240
> 
> 标签：javascript, dom, keypress

我有一段看起来像下面的代码，它工作正常。它的作用是在鼠标单击名为 synth 的 div 时发出振荡器声音。然后在释放鼠标按钮时停止播放振荡器。

```
 synth.onmousedown= function () {
    oscillator = context.createOscillator(),  // Creates the oscillator 
    oscillator.type = synthWaveform.value;  
    oscillator.frequency.value = pitchInput.value;                   
    oscillator.connect(context.destination);  // Connects it to output
    oscillator.noteOn(0); 

    };

    synth.onmouseup = function ()    {  
    oscillator.disconnect(); 

    }; 
```

然后我添加了下面的代码，以便当用户按下键盘字符时它会触发振荡器。问题是当按键被按住时，它会重复播放，然后在释放键盘字符时不会停止。我想知道是否有任何库或代码可以用来规避这个问题。目标是使最终结果类似于鼠标向下/向上效果，但键盘移动会触发声音。谢谢。

```
$('body').keydown(function() {
oscillator = context.createOscillator(),  // Creates the oscillator 
oscillator.type = synthWaveform.value;  
oscillator.frequency.value = pitchInput.value;                   
oscillator.connect(context.destination);  // Connects it to output
oscillator.noteOn(0); 
});

$('body').keyup(function() {
oscillator.disconnect();

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:14:52.040

如果您需要比以下选项更高级的东西，您可以使用 underscore.js debounce。

```
var keydown = false;

$('body').keydown(function() {
    if(!keydown){
        oscillator = context.createOscillator(),  // Creates the oscillator 
        oscillator.type = synthWaveform.value;  
        oscillator.frequency.value = pitchInput.value;                   
        oscillator.connect(context.destination);  // Connects it to output
        oscillator.noteOn(0);
        keydown = true;
    }
});

$('body').keyup(function() {
    oscillator.disconnect();
    keydown = false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T08:14:26.990

这可能是一种解决方法

```
var keyIsDown = false;

$('body').keydown(function() {
    if(keyIsDown) {
       // key is already down
       return true;
    }

    keyIsDown = true;

    // do your keydown handler
}

$('body').keyup(function() {
    keyIsDown = false;
} 
```

# java - 跨多个代码库链接的 javadocs

> ID：14301738
> 
> 赞同：1
> 
> 时间：2013-01-13T08:08:00.787
> 
> 标签：java, javadoc, maven-javadoc-plugin

我有一个应用程序，其各种组件分布在大约 100 个 git 存储库中。它们都是独立的 maven 项目（当然，它们之间存在依赖关系），我通过为应用程序捆绑所有它们来创建一个 .war。

我想创建尽可能完全相互关联的javadocs（任何提及来自不同maven项目的类型都超链接到它的javadoc页面）。Maven javadoc 插件似乎不允许这样做。是否有 Maven 配置/我可以做到这一点的任何其他方式？

谢谢，阿曼

# c# - 连接视频文件 DirectShow

> ID：14301741
> 
> 赞同：1
> 
> 时间：2013-01-13T08:08:40.817
> 
> 标签：c#, video, directshow, directshow.net

**使用 C#，**

如何使用 DrirectShow 连接两个视频文件（.avi 文件）..？请帮忙！

以下代码仅用于解释问题...

```
VideoSpanCollection newList = new VideoSpanCollection();
        int j;
        for(int i=0; i<oldItems.Count; i = j)
        {
            for(j=i+1;
                j<oldItems.Count && 
                oldItems[j].File.FullName == oldItems[j-1].File.FullName &&
                Math.Abs(oldItems[j].StartPosition - oldItems[j-1].StopPosition) < 0.5;
                j++);

            VideoSpan newSpan = new VideoSpan();
            newSpan.File = oldItems[i].File;
            newSpan.StartPosition = oldItems[i].StartPosition;
            newSpan.StopPosition = oldItems[j-1].StopPosition;
            AddSpanToListView(newSpan, -1);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T08:24:01.527

There is no standard/universal way to, not to mention that they have to be of compatible formats.

In DirectShow you need either custom filter that stream from 2+ sources and route data into recording leg of the pipeline, updating time stamps on the way.

[DirectShow Editing Services (DES)](http://msdn.microsoft.com/en-us/library/windows/desktop/dd387919%28v=vs.85%29.aspx) might be of some help though it might re-compress the output while rendering the target file. Good news DES is also covered by DirectShow.NET and provides you with sample code to combine video and audio into single output file.

```
Samples\Editing\DESCombine
--------------------------
A class library that uses DirectShow Editing Services to combine video and audio 
files (or pieces of files) into a single output file.  A help file (DESCombine.chm) 
is provided for using the class. 
```

# php - 如果 _GET 不存在如何使用一个查询，如果存在则使用其他查询？

> ID：14301750
> 
> 赞同：0
> 
> 时间：2013-01-13T08:09:44.160
> 
> 标签：php, mysql, sql

我想要一些奇怪的东西。如果有人打开`index.php`页面，`$select`必须是`full`, 。但是如果有人打开`index.php?var=4 page`，`$select`必须是其他的，带有 var `from _GET`。

我现在有这个代码，但它只有在`?var=3 exists`.

我错过了什么？

```
foreach($_GET as $name=>$value)
{
    if($name == 'lvl') {
        $value = mysql_real_escape_string($_GET[lvl]);
        $select = mysql_query("SELECT * from $table where lvl='$value'");
    }
    else {
        $select = mysql_query("SELECT name,image,lvl,team,icon FROM $table");
    }
}
while ($row = mysql_fetch_array($select))
{
   $name = mysql_real_escape_string($row['name']); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:17:40.600

您取决于`?lvl=...`代码中是否存在 a 。此外，不推荐使用 mysql-functions，因为它们已被弃用。考虑更改为 mysqli 或 PDO。对于这个例子，我仍然会使用 mysql-functions。

最好使用这个：

```
if (isset($_GET['lvl'])) { // Check to see whether or not lvl is set in url
    $value = mysql_real_escape_string($_GET['lvl']);
    $select = mysql_query("SELECT * FROM $table WHERE lvl = '$value';");
} else { // If not, use other query
    $select = mysql_query("SELECT name, image, lvl, team, icon FROM $table;");
}

while ... 
```

# javascript - 匹配组内的正则表达式组（如果它们存在于 javascript 中）

> ID：14301752
> 
> 赞同：1
> 
> 时间：2013-01-13T08:09:56.120
> 
> 标签：javascript, regex

我有这几行我想匹配，现在我使用多个正则表达式来匹配它们，但是我想知道是否可以在一个正则表达式中匹配两者：

```
@@Author:logan
//and these, three variations
@@tags:markdown,github,repetitivetag, tagwithsubtags:subtag, another:subtag:subtag2:repeating:this:repeating,repetitivetag,repetitivetag:withsubby,repetitivetag:withsubtag
@@tags:markdown;github;repetitivetag;tagwithsubtags:subtag,another:subtag:subtag2:repeating:this:repeating;repetitivetag;repetitivetag:withsubby;repetitivetag:withsubtag
@@tags:markdown;git-hub;repetitive-tag;tag_with_sub-tags:sub_tag,another:sub_tag:sub-tag2:repeating:this:repeat-_-_-ing;repetitive-tag;repetitive_tag:with_subby;repetitive_tag:with_subtag 
```

我首先要做的是匹配`@@NAME:VALUE`部分：

*   `/^(?:@@)(\w+):(.*.)(?:\n+|$)/gm`

假设第一组是`NAME`，第二组是`VALUE`。

如果`NAME`是，`tags`那么我匹配以下正则表达式`VALUE`：

*   `/(\w+)((?=,|;)|(:\w[\w|\-]+\w){0,}|)/g`

这匹配了几个类似`TAG;TAG;TAG ...`或我们之前匹配`TAG,TAG,TAG ...`的组`VALUE`

然后我将每个`TAG`与此匹配以获得`SUBTAG`

*   `/(:)(\w[\w|\-]+\w)(?=:|)/g`

现在匹配我们上面匹配`:SUBTAG:SUBTAG:SUBTAG ...`的组`TAG`

# 总之

我要匹配

*   `(@@)(NAME)(:)(VALUE)`
    *   `(TAG)(;)(TAG)(;)(TAG) ...`价值
        *   `(:)(SUBTAG)(:)(SUBTAG))(;)`在标签中

## 例子

1.  `@@Author:logan`应该可以得到`Name = Author`，`Value = logan`

2.  如果值是多个，比如如果它用逗号或分号分隔，那么匹配类似的东西`@@tags:tag1;tag2`应该能够得到

    `Name = Tags`, `值 = ['tag1','tag2']

3.  如果 value 有一个子值，例如

    `@@Author:logan:lastname`

    或以此为预期目的

    `@@Tags:tag1:subtag;tag2:subtag1:subtag2`应该能够得到：

    `Name = Author`,`Value = [{logan : [lastname]}]`和

    `Name = Tags`,`Value = [{tag1 : [subtag]}, {tag2 : [subtag1, subtag2]}]`

我如何匹配组内的组，并且只有当它们存在时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:48:54.677

这正是您想要的输出：

```
// Examples:
var a='@@Author:logan';
var b='@@tags:tag1;tag2';
var c='@@Author:logan:lastname';
var d='@@Tags:tag1;tag2:subtag1:subtag2';
var hard1='@@tags:markdown,github,repetitivetag, tagwithsubtags:subtag, another:subtag:subtag2:repeating:this:repeating,repetitivetag,repetitivetag:withsubby,repetitivetag:withsubtag';
var hard2='@@tags:markdown;github;repetitivetag;tagwithsubtags:subtag,another:subtag:subtag2:repeating:this:repeating;repetitivetag;repetitivetag:withsubby;repetitivetag:withsubtag';
var hard3='@@tags:markdown;git-hub;repetitive-tag;tag_with_sub-tags:sub_tag,another:sub_tag:sub-tag2:repeating:this:repeat-_-_-ing;repetitive-tag;repetitive_tag:with_subby;repetitive_tag:with_subtag';

function tags(a){
    // Gets the name:
    var name=a.match(/^@@.*?(:|.$)/);
    if(!name) return;
    var temp=a.indexOf(':')+1;
    name=name[0].substring(2).replace(':','');
    // Returns the name if thats all there is:
    if(!temp) return name;
    a=a.substring(temp);
    // Gets the value:
    var value=a.split(/[,;]/);
    if(value.length==1&&value[0].indexOf(':')==-1)
        value=value[0];
    else for(var i=0;i<value.length;i++) if(value[i].indexOf(':')!=-1) {
        // Gets the subtags if they exist:
        temp={};
        a=value[i].split(':');
        // .shift() will remove/return the first of the array
        temp[a.shift()]=a;
        value[i]=temp;
    }
    return {name:name,value:value};
}
console.log([tags(a),tags(b),tags(c),tags(d),tags(hard1),tags(hard2),tags(hard3)]); 
```

实际上，这真的很酷。我不确定您的问题是否正是您想要的，但如果没有，那么一切都应该很容易修改。希望你喜欢 else-for-if 语句！

# rest - JSF restful 输出非英文字符

> ID：14301753
> 
> 赞同：0
> 
> 时间：2013-01-13T08:10:39.053
> 
> 标签：rest, jakarta-ee, jax-rs

我有一个休息类将 JSON 字符串发送到 POST 请求。数据以 UTF-8 格式存储在数据库中。但是非英文字符总是显示为'??????'，如果我从@Model 获取记录，一切正常。这是其余的代码快照（使用简单的 JSON 编码 JSON 字符串）：

```
@POST
@Path("/holidaylist")
@Produces(MediaType.APPLICATION_JSON)
public String getHoliday(){

    List list = new LinkedList();
    // Get list of holidays
    List<Holiday> holidays = em.createQuery("SELECT holiday FROM Holiday holiday").getResultList();

    Map event;
    for(Holiday holiday : holidays){
        System.out.println("======== Holiday name： " + holiday.getHolidayName());
        event = new HashMap();
        event.put("id", holiday.getHolidayId());
        event.put("title", holiday.getHolidayName());
        event.put("start", holiday.getStartDate().toString());

        list.add(event);
    }

    return JSONValue.toJSONString(list);
} 
```

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:38:49.073

您需要确保从数据库到前端始终正确处理数据编码。我对 SimpleJSON api 并不完全熟悉，但确定 toJSONString 使用 UTF-8 编码吗？另外，请确保您呈现的页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T09:24:50.617

通过使用 JAXB 实现解决。似乎是简单的 JSON 编码问题。

感谢大家。

# hadoop - 如何使用 Hadoop 和本地文件系统上的数据实现所需的块大小

> ID：14301755
> 
> 赞同：1
> 
> 时间：2013-01-13T08:10:58.147
> 
> 标签：hadoop

我有一个 2TB 的序列文件，我正在尝试使用 Hadoop 处理该文件，该文件位于设置为使用本地（光泽）文件系统而不是 HDFS 进行存储的集群上。我的问题是，无论我尝试什么，当我以这些数据作为输入运行 map/reduce 作业时，我总是被迫执行大约 66000 个 map 任务。这似乎对应于 2TB/66000 =~ 32MB 的块大小。每个地图任务中的实际计算执行得非常快，但是与如此多的地图任务相关的开销会大大减慢速度。

对于创建数据的作业和所有后续作业，我有 dfs.block.size=536870912 和 fs.local.block.size=536870912 (512MB)。我还发现建议尝试这样做：

```
hadoop fs -D fs.local.block.size=536870912 -put local_name remote_location 
```

用更大的块制作一个新副本，我没有这样做。我还更改了 lustre 文件的条带大小。对于本地文件系统，似乎任何与块大小有关的参数都被忽略了。

我知道使用 luster 代替 HDFS 是 hadoop 的非传统用法，但这是我必须使用的。我想知道其他人是否有这方面的经验，或者有什么想法可以尝试，而不是我提到的。

如果有用，我正在使用 cdh3u5。

# c# - 事件处理程序行为异常

> ID：14301756
> 
> 赞同：0
> 
> 时间：2013-01-13T08:11:04.320
> 
> 标签：c#, wpf, event-handling

我正在使用以下 WPF

```
<Button Style="{DynamicResource NoChromeButton}" x:Name="cmdImage" Grid.Row="1" Margin="10" MouseDoubleClick="cmdImage_MouseDoubleClick" MouseDown="imgMain_MouseDown_1" MouseMove="imgMain_MouseMove_1" MouseUp="imgMain_MouseUp_1">
    <Grid x:Name="ImageGrid">
        <Image x:Name="imgMain" Panel.ZIndex="0" />
        <Button x:Name="rectBounds" Template="{StaticResource DesignerItemTemplate}" Visibility="Hidden" IsVisibleChanged="Button_IsVisibleChanged" Panel.ZIndex="1" />
    </Grid>
</Button> 
```

奇怪的是，最外层按钮的`MouseUp`、`MouseDown`和`MouseMove`事件甚至不会触发`ImageSource`，如果`Image`不是`null`（加载了图像）。

我尝试将它们移至`Image`控件。它们确实触发了，但行为出乎意料。

```
private void imgMain_MouseDown_1(object sender, MouseButtonEventArgs e)
{
    startPoint = e.GetPosition(ImageGrid);
    rect = new Rectangle
                {
                    Margin =
                        new Thickness(e.GetPosition(ImageGrid).X, e.GetPosition(ImageGrid).Y,
                                        ImageGrid.ActualWidth - e.GetPosition(ImageGrid).X,
                                        ImageGrid.ActualHeight - e.GetPosition(ImageGrid).Y),
                    Stroke = Brushes.Black,
                    StrokeThickness = 1.0
                };
    ImageGrid.Children.Add(rect);
    Panel.SetZIndex(rect, 2);
}

private void imgMain_MouseMove_1(object sender, MouseEventArgs e)
{
    if (e.LeftButton == MouseButtonState.Released || rect == null)
        return;

    Point pos = e.GetPosition(ImageGrid);

    double x = Math.Min(pos.X, startPoint.X);
    double y = Math.Min(pos.Y, startPoint.Y);

    double w = Math.Max(pos.X, startPoint.X) - x;
    double h = Math.Max(pos.Y, startPoint.Y) - y;

    rect.Margin = new Thickness(x, y, ImageGrid.ActualWidth - x - w, ImageGrid.ActualHeight - y - h);
}

private void imgMain_MouseUp_1(object sender, MouseButtonEventArgs e)
{
    rect = null;
} 
```

按照所有明显的规则，应该会出现一个可拖动的矩形，一旦松开鼠标按钮就会消失。它没有。有趣的是，当我更改 的可见性时`rectBounds`，会出现一个矩形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:42:18.527

这里有几件事要解决。

首先，您的 XAML。另一个按钮内的按钮？我无法想象那应该是什么感觉。然后`ZIndex`. 这是多余的，因为 Image 和 Button 在同一个 Grid 单元格中，并且 Image 在 Button 之前声明。而且也没有必要设置新创建`Rectangle`的 in `imgMain_MouseDown_1`。

> 奇怪的是，如果 Image 的 ImageSource 不为空，最外层按钮的 MouseUp、MouseDown 和 MouseMove 事件甚至都不会触发。

这正是您所期望的，因为鼠标事件仅在实际绘制的控件区域（即[命中测试](http://msdn.microsoft.com/en-us/library/ms752097.aspx)成功的区域）上生成。当没有实际内容（您的示例中没有图像）时，命中测试会失败。您可以简单地为 Grid 分配一个透明背景，以确保命中测试始终成功：

```
<Grid x:Name="ImageGrid" Background="Transparent">
    <Image x:Name="imgMain" />
    <Button x:Name="rectBounds" Template="{StaticResource DesignerItemTemplate}" Visibility="Hidden" IsVisibleChanged="Button_IsVisibleChanged" />
</Grid> 
```

> 按照所有明显的规则，应该会出现一个可拖动的矩形，一旦松开鼠标按钮就会消失。

不，不应该，除非您实际上从网格中删除了该矩形。设置`rect = null`不会那样做。

```
private void imgMain_MouseUp_1(object sender, MouseButtonEventArgs e)
{
    ImageGrid.Children.Remove(rect);
    rect = null;
} 
```

# javascript - 由 javascript 提供支持的引导选项卡中的 CKEditor

> ID：14301759
> 
> 赞同：0
> 
> 时间：2013-01-13T08:11:29.397
> 
> 标签：javascript, twitter-bootstrap, ckeditor

我在引导选项卡中有一个带有 CKEditor 的应用程序，这些选项卡由 javascript 提供支持，当我在初始化选项卡**之前**初始化 CKEditor 时，这些选项卡只能在`Chrome`.

我想出了一个解决方案，我仅在 CKEditor 选项卡处于活动状态时才初始化 CKEditor，但现在当我提交表单时（所有选项卡都包含在表单中）CKEditor 不会将其内容与表单一起发送。

我该如何解决这个问题？

这是一些代码：

当我在选项卡之前初始化 ckeditor 时，选项卡只能在`chrome`.

```
$(function(){
  $('.editor').ckeditor();
}); 
```

当我在 ckeditor 的选项卡处于活动状态时对其进行初始化时，它不会将其内容与表单一起发送...

```
$('#ckeditor-tab').click(function(){
  setTimeout(function(){
   $('.editor').ckeditor();
  }, 500);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T13:49:41.617

听起来 CKEditor 下面的文本区域没有更新。`CKEDITOR.instances.yourInstance.updateElement();`在表单提交之前添加它应该可以工作。

请参阅[http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#updateElement](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#updateElement)

# php - 使用 PHP 提取文章的第一段

> ID：14301761
> 
> 赞同：0
> 
> 时间：2013-01-13T08:12:02.003
> 
> 标签：php, regex, preg-match-all

我想使用 RegEx 和 PHP 提取文章的第一段。我开始写一个正则表达式如下：

```
'/<p([^>]+)>(.*)<\/p>/i' 
```

这就是工作，但唯一的小错误是，虽然标记被缩小并在一行中，如下所示：

```
<p>First Paragraph</p><p>SecondParagraph</p> 
```

它只是匹配所有`<p>First Paragraph</p><p>SecondParagraph</p>`.
另外，我知道一个段落不能在另一个段落中，但我无法控制用户写什么，所以他可能会做这样的事情，在这种情况下，RegEx 会返回意想不到的结果，如下所示：

```
<p>
    First Paragraph
    <p>SecondParagraph</p>
</p> 
```

现在正则表达式匹配`<p>First Paragraph<p>SecondParagraph</p>`但应该提取`<p>First Paragraph<p>SecondParagraph</p></p>`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:36:18.957

我参考了答案[https://stackoverflow.com/a/1732454/268074](https://stackoverflow.com/a/1732454/268074)

并建议您使用 Simple HTML DOM：

[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

```
str_get_html($string)->find('p')->plaintext; 
```

# boost - 提升 API 文档位置？

> ID：14301763
> 
> 赞同：0
> 
> 时间：2013-01-13T08:12:44.183
> 
> 标签：boost

我想知道 boost 库是否有 javadoc 风格的 API 参考？

我注意到有这些类型的 url 的类描述：

[http://www.boost.org/doc/libs/1_52_0/doc/html/boost/program_options/typed_value.html](http://www.boost.org/doc/libs/1_52_0/doc/html/boost/program_options/typed_value.html)

而特定库的文档如下：

[http://www.boost.org/doc/libs/1_52_0/doc/html/program_options/](http://www.boost.org/doc/libs/1_52_0/doc/html/program_options/)

注意 html/boost 子目录。考虑到这一点，也许这些原始索引有一个组织/分类的 API 索引：

[http://www.boost.org/doc/libs/1_52_0/doc/html/boost](http://www.boost.org/doc/libs/1_52_0/doc/html/boost) http://www.boost.org/doc/libs/1_52_0/doc/html/boost/program_options/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:13:55.523

Boost 是许多不同作者的许多[不同库](http://www.boost.org/doc/libs/)的集合。没有全面的文档。正如您已经注意到的，一些库提供了 API 文档。我认为[Asio API 文档](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference.html)写得特别好。

# entity-framework - 将 max() 函数与实体框架一起使用会引发异常

> ID：14301764
> 
> 赞同：1
> 
> 时间：2013-01-13T08:12:55.660
> 
> 标签：entity-framework, max

所以我需要使用实体框架获取一列（或最后一列）的最大值，并且这两个查询都抛出异常：

（我要检索的 ID 是 varchar 类型，但它可以在原始 sql 中工作，我认为它也应该在这里工作）

这个：

```
string maxCurrentID = db.reservations.Max().ReservationID; 
```

抛出这个：

无法将类型“System.Linq.Queryable”的指定方法“EntityClub_.reservacion Maxreservacion”转换为 LINQ to Entities 存储表达式，因为没有重载与传递的参数匹配。

和这个：

```
 string maxCurrentID = db.reservations.LastOrDefault().ReservationID; 
```

LINQ to Entities 无法识别方法 'EntityClub_.reservacion LastOrDefaultreservacion' 方法，并且此方法无法转换为存储表达式。

如何获得预期值？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-06-25T06:50:32.750

```
var maxReservationId=db.reservations.Max(u =>(int?)u.ReservationID) ?? 0; 
```

如果表中没有数据，则替换`null`为`0`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-13T08:18:19.713

您不是在要求最高的 ReservationID，而是在尝试获得最高的 Reservation，并获得它的 ReservationID。EF不明白“最高预订”是什么意思。

```
var maxReservationID = db.reservations.Max(r => r.ReservationID); 
```

或者

```
var maxReservationID = db.reservations.Select(r => r.ReservationID).Max(); 
```

应该管用。

# mysql - MySql :: 选择多变量

> ID：14301765
> 
> 赞同：1
> 
> 时间：2013-01-13T08:12:57.003
> 
> 标签：mysql, select

当我尝试执行以下查询时：

```
SELECT filesinfo.IsFolder INTO @IsFolder, filesinfo.FileName 
FROM filesinfo 
WHERE filesinfo.FileID = 1; 
```

发生以下错误：

> [ **SQL** ] SELECT filesinfo.IsFolder INTO @IsFolder, filesinfo.FileName FROM filesinfo WHERE filesinfo.FileID = 1; [Err] 1327 -**未声明的变量：filesinfo**

但是当像这样删除第二个参数时：

```
SELECT filesinfo.IsFolder INTO @IsFolder 
FROM filesinfo 
WHERE filesinfo.FileID = 1; 
```

没有发生错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:17:47.997

你能试试这个吗，假设你已经正确地声明了变量并且你在表中有一个名为 FileName 的列..：

```
SELECT @IsFolder:=IsFolder, FileName 
FROM filesinfo 
WHERE FileID = 1; 
```

感谢@Mahmoud Gamal 为我提供了SQLFIDDLE，请看一下它以查看查询的实时结果：

*** [SQLFIDDLE 演示](http://www.sqlfiddle.com/#!2/8cd1a/5)**

如果要选择多列，可以声明多个变量并将它们设置如下：

```
SELECT @IsFolder:=IsFolder, @FileName:=FileName 
FROM filesinfo 
WHERE FileID = 1; 
```

# jquery - jQuery访问一个div字符串爆炸和比较

> ID：14301766
> 
> 赞同：-1
> 
> 时间：2013-01-13T08:12:58.337
> 
> 标签：jquery

我想访问隐藏在页面底部的 div。$existing_user 是一个数组，div 是隐藏的。

```
<div id="existing_user"><?php echo json_encode($existing_user); ?></div> 
```

然后我试图将 div 与用户生成的输入进行比较。

```
<input type='text' name='user_name' id='user_name' /> 
```

这是我的 jQuery 代码：

```
var existing_user_string = $('#existing_user').text();
var existing_user_array = explode(",",existing_user_string);

if (jQuery.inArray($('#fruit').val(),existing_user_array) == -1) {
    alert('no way this worked');
    } 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T08:14:10.553

JavaScript 没有`explode`函数。要获取用户数组，请使用`JSON.parse`*：

```
var existing_user_array = JSON.parse( $('#existing_user').text() );

if (jQuery.inArray($('#fruit').val(),existing_user_array) == -1) {
    alert('no way this worked');
} 
```

* * *

**PS**您没有`echo`将`json_encode`d 数组直接写入脚本的任何原因？

```
<script>var existing_user_array = <?php echo json_encode($existing_user); ?></script> 
```

这样您就不必在 DOM 中钓鱼，甚至不必解析 JSON（只需确保在页面中包含其他脚本之前生成此脚本，这样`existing_user_array`就是在您尝试使用它之前填充）。

[*`JSON.parse`在 IE7 及以下版本中不可用。如果您必须走这条路并且必须支持那些旧浏览器，请务必包含[Crockford 的 json2 库](https://github.com/douglascrockford/JSON-js)。]

# java - 获取子进程id

> ID：14301767
> 
> 赞同：1
> 
> 时间：2013-01-13T08:13:05.410
> 
> 标签：java, shell, unix

> **可能重复：**
> [杀死所有子进程的最佳方法](https://stackoverflow.com/questions/392022/best-way-to-kill-all-child-processes)

我正在运行一个脚本，它使用 eval 命令在后台运行一个 java 程序。

```
eval <java java_program & > 
```

在运行上述命令时，我发现它创建了一个新的子进程。现在，当我想停止进程时，在脚本中我尝试使用命令“$！”，它总是只给我父进程 ID。所以`kill -9 $!`杀死父进程并让子进程仍在后台运行。

有没有办法找到与进程 ID 关联的所有子进程并杀死所有进程？或者杀死所有进程的有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:27:29.707

You may try to use pstree using the parent pid

and for killing it may worth a visit for this:

[Best way to kill all child processes](https://stackoverflow.com/questions/392022/best-way-to-kill-all-child-processes)

# high-availability - /sbin/drbdadm 验证内核后 DRBD 消息过多：块 drbdX：不同步：

> ID：14301769
> 
> 赞同：0
> 
> 时间：2013-01-13T08:13:41.157
> 
> 标签：high-availability, drbd

在验证日志中有许多消息后，在我使用 DRBD 的所有系统中。

```
kernel: block drbd0: Out of sync: start=403446112, size=328 (sectors) 
```

在某些系统中可能会认为这是由工作量决定的，但是有些团队几乎没有工作。

计算机连接在 1Gb 质量的网络中

这些消息并没有给我太多关于系统的信息，最终需要 cron 检查时序，并重置故障块，这当然会在异步系统中转换同步系统。

这是正常的吗？有什么解决办法吗？有错吗？

```
common {
    protocol C;

handlers {
            pri-on-incon-degr "/usr/lib/drbd/notify-pri-on-incon-degr.sh; /usr/lib/drbd/notify-emergency-reboot.sh; echo b > /proc/sysrq-trigger ; reboot -f";
    pri-lost-after-sb "/usr/lib/drbd/notify-pri-lost-after-sb.sh; /usr/lib/drbd/notify-emergency-reboot.sh; echo b > /proc/sysrq-trigger ; reboot -f";
    local-io-error "/usr/lib/drbd/notify-io-error.sh; /usr/lib/drbd/notify-emergency-shutdown.sh; echo o > /proc/sysrq-trigger ; halt -f"                                                                                                                     
}
    syncer {
            # rate after al-extents use-rle cpu-mask verify-alg csums-alg                                                                                                                               
    verify-alg sha1;
       rate 40M;
}
}

resource r0 {
  protocol C;
   startup {
     wfc-timeout  15;     # non-zero wfc-timeout can be dangerous (http://forum.proxmox.com/threads/3465-Is-it-safe-to-use-wfc-timeout-in-DRBD-configuration)
     degr-wfc-timeout 60;
 }
 net {
    cram-hmac-alg sha1;
    shared-secret "XXXXXXXXXX";
    after-sb-0pri discard-zero-changes;
    after-sb-1pri discard-secondary;
    after-sb-2pri disconnect;
 }
 on pro01 {
   device /dev/drbd0;
   disk /dev/pve/vm-100-disk-1;
   address YYY.YYY.YYY.YYY:7788;
    meta-disk internal;
 }
 on pro02 {
   device /dev/drbd0;
    disk   /dev/pve/vm-100-disk-1;
    address YYY.YYY.YYY.YYY:7788;
    meta-disk internal;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T06:53:53.417

与此相关的故事很长（[http://www.gossamer-threads.com/lists/drbd/users/25227](http://www.gossamer-threads.com/lists/drbd/users/25227)），但我仍然不确定这是否可以（或应该）由 DRBD 开发人员或我们需要修复上层行为（在我的例子中是 KVM）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:14:20.677

它可能会不时发生，这很正常。
只需断开连接并再次连接 - 然后将同步不同步的块。

[DRBD - 在线验证](http://www.drbd.org/users-guide/s-use-online-verify.html)

# jquery - Sprockets::FileNotFound - 找不到文件'query.effects.core'

> ID：14301772
> 
> 赞同：0
> 
> 时间：2013-01-13T08:14:11.770
> 
> 标签：jquery, ruby-on-rails, ruby, sprockets

当我开始运行我的 Rails 服务器时，当我转到 localhost:3000 时，我收到此文件未找到错误。我收到的信息是`couldn't find file 'jquery.effects.core'`。从我的 repo 中提取应用程序的新克隆到重新安装 Rails 和 Ruby，我几乎已经做了所有我能做的事情，但这一切都导致了同样的错误。有任何想法吗？

当我运行我的 rails 服务器时，我得到以下输出：

```
sudo rails s
=> Booting Thin
=> Rails 3.2.9 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
        SECURITY WARNING: No secret option provided to Rack::Session::Cookie.
        This poses a security threat. It is strongly recommended that you
        provide a secret to prevent exploits that may be possible from crafted
        cookies. This will not be supported in future versions of Rack, and
        future versions will even invalidate your existing user cookies.

        Called from: /usr/local/rvm/rubies/ruby-1.9.2-p290/lib/ruby/gems/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/middleware/session/abstract_store.rb:28:in `initialize'.

>> Thin web server (v1.5.0 codename Knife)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:3000, CTRL+C to stop 
```

这是我的 Gemfile

```
source 'https://rubygems.org'

gem 'rails', '3.2.9'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'pg'
gem 'rails_admin'
gem 'devise'
gem 'cancan'
gem 'simple_form'
gem 'kaminari'
gem 'bootstrap-kaminari-views'
gem 'recaptcha', :require => 'recaptcha/rails'
gem 'acts_as_commentable_with_threading'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

group :production do
  gem 'thin'
end

gem 'libv8', '~> 3.11.8'
gem "therubyracer", '>= 0.11.0beta8', :require => 'v8'
gem 'twitter-bootstrap-rails', :git => 'git://github.com/seyhunak/twitter-bootstrap-rails.git'
gem "less-rails"

gem 'paperclip'
gem 'aws-sdk'

gem 'jquery-rails' 
```

**编辑（已解决）**：这是我的 application.js 文件。当我取消注释该行时，一切似乎都有效`= require jquery`。我不知道如何解释这一点，因为即使该行已被注释掉，也有其他人在使用同一组源代码时不会遇到此问题。

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery <----------------
//= require jquery_ujs
//= require twitter/bootstrap
//= require_tree . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:43:02.580

看起来这是 RailsAdmin gem 中的一个错误：

[https://github.com/sferik/rails_admin/issues/1471](https://github.com/sferik/rails_admin/issues/1471)

运行“捆绑更新”为我解决了这个问题。

# ruby - 不同环境的 Gemfile 依赖项

> ID：14301773
> 
> 赞同：2
> 
> 时间：2013-01-13T08:14:17.220
> 
> 标签：ruby, gem, dependencies, gemfile

所以我有一些我想在 Mac OSX 上运行的特定 gem，一些我想在 Linux 上运行，还有一些我想在 Windows 上运行，以用于我的不同开发环境，因为这些机器具有特定的依赖性，但我不确定如何在 gemfile 中执行此操作。

有没有办法在 Gemfile 中为不同的环境设置一个特定的组（即 :group => Linux、:group => macosx 等）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:00:27.533

我最终只安装了所有的 gem，而不仅仅是每个单独环境所需的 gem。我想您可能可以在 Gemfile 中的不同 :groups 中设置 gem，然后在每个环境中使用 Bundler 构建 --without {xyz env Gem's}，但这比它的价值更麻烦。我认为添加的 gem 使我的应用程序有点膨胀，但在这一点上，让它在我所有不同的环境中工作真是太好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T08:37:50.633

我没有亲自这样做，但有关于这样做的信息：

[谷歌](https://www.google.com/webhp?sourceid=chrome-instant&ie=UTF-8&ion=1#hl=en&tbo=d&sclient=psy-ab&q=rails%20group%20dependencies%20by%20os&oq=&gs_l=&pbx=1&fp=e93440e096ce03cd&ion=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.1357700187,d.aWM&biw=1535&bih=788),[类似的 SO](https://stackoverflow.com/questions/3642085/make-bundler-use-different-gems-for-different-platforms) , [SO 再次](https://stackoverflow.com/questions/6070817/how-do-you-make-a-gemfile-group-for-a-specific-operating-system)

希望这些帮助。

# java - 获取组合键

> ID：14301775
> 
> 赞同：5
> 
> 时间：2013-01-13T08:14:38.657
> 
> 标签：java, linux, awt, keyevent, vnc-viewer

如何使用 Java获得键盘 EG ( `Ctrl`+ `somekey`, `Alt`+ ) 上的组合键？`somekey`

我对键盘上的所有键使用`KeyEvent`监听器，监听器。`MouseEvent`我可以使用该侦听器捕获键盘上的所有键事件。但是，我无法捕捉到组合键，例如 ( `Ctrl`+ `Alt`+ `Del`)....等。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T08:30:23.143

```
public void keyPressed(KeyEvent kevt) {
 if(kevt.getKeyChar()=='c') {
  if(kevt.isAltDown())
  //Code if Alt+c pressed
  if(kevt.isControlDown())
  //Code if Ctrl+c pressed
  if(kevt.isShiftDown())
  //Code if Shift+c pressed
  if(kevt.isAltDown()&&kevt.isControlDown()&&(!kevt.isShiftDown()))
  //Code if Alt+Ctrl+c pressed
  if(kevt.isAltDown()&&kevt.isShiftDown()&&(!kevt.isControlDown()))
  //Code if Alt+Shift+c pressed
  if(!(kevt.isAltDown())&&kevt.isControlDown()&&(kevt.isShiftDown()))
  //Code if Shift+Ctrl+c pressed
  if(kevt.isAltDown()&&kevt.isControlDown()&&kevt.isShiftDown())
  //Code if Alt+Ctrl+Shift+c pressed
} 
```

使用上面的代码，使用任何字符如果你想检查是否`Alt+C+E`被按下，请执行以下操作

```
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.swing.*;

public class Sample implements KeyListener {
  private JTextField lbl=new JLabel("Hello");
  private JPanel pnl=new JPanel(new BorderLayout());
  private JFrame frm=new JFrame ("Sample");
  int []arr;int i=0;

  public Sample() {
    pnl.add("North", lbl);
    frm.setContentPane(pnl);
    frm.pack();
    frm.setVisible(true);
    lbl.addKeyListener(this);
    arr= new int[3];

    public void keyPressed(KeyEvent key) {
       arr[i]=key.getKeyCode();
       i++;
       if((arr[0]==VK_ALT||arr[1]==VK_ALT||arr[2]==VK_ALT)&&   (arr[0]==VK_C||arr[1]==VK_C||arr[2]==VK_C)&&(arr[0]==VK_E||arr[1]==VK_E||arr[2]==VK_E)) {
        //Code you want
       }
     }

     public void keyReleased(KeyEvent evt) {
       arr[i]=null;
     }

     public void keyTyped(KeyEvent kvt) {
     }
 }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:16:17.243

```
@Override
public void keyPressed(KeyEvent evt) {
         if (evt.getKeyCode()==KeyEvent.VK_CONTROL) { ctrl  = true; }
    else if (evt.getKeyCode()==KeyEvent.VK_SHIFT)   { shift = true; }
    else if (evt.getKeyCode()==KeyEvent.VK_ALT)     { alt   = true; }
    else {
        keyHit = KeyEvent.getKeyText( evt.getKeyCode() );
        System.out.println("Key Hit is "+keyHit);
    }

    processLocalKeyEvent(evt);
}

@Override
public void keyReleased(KeyEvent evt) {

    if (evt.isControlDown() && keyHit != "") ctrl  = true;
    if (evt.isAltDown()     && keyHit != "") alt   = true;
    if (evt.isShiftDown()   && keyHit != "") shift = true;

    if (ctrl)  sb.append("Ctrl");
    if (shift) sb.append("Shift");   
    if (alt)   sb.append("Alt"); 
    if (!ctrl && !shift && !alt) {
        sb.append(keyHit);
    } else {
        sb.append("_"+keyHit);
    }

    if (ctrl || shift || alt) {
        Thread thread = new Thread();
        try {
            thread.sleep(300);
            rfbProto.capture();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } else if ((ctrl || shift || alt) && keyHit=="") {
        rfbProto.capture();
    } else if ((!ctrl || !shift || !alt) && keyHit!="") {
        rfbProto.capture();
    }

    ctrl  = false;
    shift = false;
    alt   = false;
    keyHit = "";
    sb = new StringBuffer();
    processLocalKeyEvent(evt);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-31T09:11:10.783

其中许多答案似乎非常复杂，只是想我会添加我的解决方案。

我写了一个 KeyBinder 类：

```
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.util.Hashtable;

public abstract class KeyBinder implements KeyListener
{
    private Hashtable<Integer, Boolean> keyMap;

    private int[] keyCodes;

    public KeyBinder(final int... keyCodes)
    {
        this.keyMap = new Hashtable<>();
        this.keyCodes = keyCodes;
    }

    @Override
    public void keyTyped(final KeyEvent e) { }

    @Override
    public void keyPressed(final KeyEvent e)
    {
        getKeyMap().put(e.getKeyCode(), true);

        if (getKeysDown())
        {
            onKeysDown();
        }
    }

    @Override
    public void keyReleased(final KeyEvent e)
    {
        getKeyMap().put(e.getKeyCode(), false);
    }

    private Hashtable<Integer, Boolean> getKeyMap()
    {
        return this.keyMap;
    }

    public boolean getKeysDown()
    {
        for (final int key : this.keyCodes)
        {
            if (getKeyMap().containsKey(key))
            {
                if (!getKeyMap().get(key))
                {
                    return false;
                }
            } else {
                return false;
            }
        }

        return true;
    }

    public abstract void onKeysDown();
} 
```

然后在我的控制下：

```
final KeyBinder binder = new KeyBinder(KeyEvent.VK_ALT, KeyEvent.VK_A)
{
    @Override
    public void onKeysDown()
    {
        System.out.println("Alt+A");
    }
};

startButton.addKeyListener(binder); 
```

简单的 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-23T14:20:15.150

```
 private void jTable1KeyReleased(java.awt.event.KeyEvent evt) {                                    
   System.out.println(evt.getKeyCode()); //showing code of released button

    if(evt.isControlDown() && evt.getKeyCode()==40) // 40 is code for arrow down
    {
      //if ctrl is pressed and arrow down is released  
        System.out.println("Released " + evt.getKeyCode());
    } 
```

简单版

# java - 在服务器上发送大量请求时出现 java.net.SocketException

> ID：14301776
> 
> 赞同：0
> 
> 时间：2013-01-13T08:14:42.807
> 
> 标签：java, sockets

每当我尝试在 Jboss 服务器上发送大量请求时，我都会面临套接字写入异常。我们的服务器在 Windows Server 2008 R2 数据中心上运行。搜索了很多关于它，但我找不到关于这个问题的任何东西。

我在我的 Windows 7 机器上的本地服务器上运行了相同的问题，但它根本没有重现，但每当我在 Windows Server 2008 机器上运行它时，它会在 4 到 5 次请求命中后重现。

以下是异常的堆栈跟踪：

```
2012-12-31 14:33:03,427 SEVERE [com.sun.xml.ws.servlet.http] (http-0.0.0.0-8988-16) caught throwable
javax.xml.ws.WebServiceException: javax.xml.bind.MarshalException
 - with linked exception:
[ClientAbortException:  java.net.SocketException: Connection reset by peer: socket write error]
    at com.sun.xml.ws.message.jaxb.JAXBMessage.writePayloadTo(JAXBMessage.java:325)
    at com.sun.xml.ws.message.AbstractMessageImpl.writeTo(AbstractMessageImpl.java:142)
    at com.sun.xml.ws.encoding.StreamSOAPCodec.encode(StreamSOAPCodec.java:109)
    at com.sun.xml.ws.encoding.SOAPBindingCodec.encode(SOAPBindingCodec.java:278)
    at com.sun.xml.ws.transport.http.HttpAdapter.encodePacket(HttpAdapter.java:383)
    at com.sun.xml.ws.transport.http.HttpAdapter.access$100(HttpAdapter.java:93)
    at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:529)
    at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:288)
    at com.sun.xml.ws.transport.http.servlet.ServletAdapter.handle(ServletAdapter.java:143)
    at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doGet(WSServletDelegate.java:155)
    at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doPost(WSServletDelegate.java:189)
    at com.sun.xml.ws.transport.http.servlet.WSServlet.doPost(WSServlet.java:76)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Thread.java:662)
Caused by: javax.xml.bind.MarshalException
 - with linked exception:
[ClientAbortException:  java.net.SocketException: Connection reset by peer: socket write error]
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:271)
    at com.sun.xml.bind.v2.runtime.BridgeImpl.marshal(BridgeImpl.java:100)
    at com.sun.xml.bind.api.Bridge.marshal(Bridge.java:141)
    at com.sun.xml.ws.message.jaxb.JAXBMessage.writePayloadTo(JAXBMessage.java:317)
    ... 33 more
Caused by: ClientAbortException:  java.net.SocketException: Connection reset by peer: socket write error
    at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:399)
    at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:449)
    at org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:349)
    at org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:422)
    at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:411)
    at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:89)
    at com.sun.xml.bind.v2.runtime.output.UTF8XmlOutput.write(UTF8XmlOutput.java:406)
    at com.sun.xml.bind.v2.runtime.output.Encoded.write(Encoded.java:163)
    at com.sun.xml.bind.v2.runtime.output.UTF8XmlOutput.writeName(UTF8XmlOutput.java:235)
    at com.sun.xml.bind.v2.runtime.output.UTF8XmlOutput.endTag(UTF8XmlOutput.java:279)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.leafElement(XMLSerializer.java:326)
    at com.sun.xml.bind.v2.model.impl.RuntimeBuiltinLeafInfoImpl$StringImpl.writeLeafElement(RuntimeBuiltinLeafInfoImpl.java:158)
    at com.sun.xml.bind.v2.runtime.reflect.TransducedAccessor$CompositeTransducedAccessorImpl.writeLeafElement(TransducedAccessor.java:252)
    at com.sun.xml.bind.v2.runtime.property.SingleElementLeafProperty.serializeBody(SingleElementLeafProperty.java:121)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:340)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:696)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementNodeProperty.serializeItem(ArrayElementNodeProperty.java:65)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementProperty.serializeListBody(ArrayElementProperty.java:168)
    at com.sun.xml.bind.v2.runtime.property.ArrayERProperty.serializeBody(ArrayERProperty.java:155)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:340)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:696)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:264)
    ... 36 more
Caused by: java.net.SocketException: Connection reset by peer: socket write error
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)
    at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
    at org.apache.coyote.http11.InternalOutputBuffer.realWriteBytes(InternalOutputBuffer.java:724)
    at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:449)
    at org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:349)
    at org.apache.coyote.http11.InternalOutputBuffer$OutputStreamOutputBuffer.doWrite(InternalOutputBuffer.java:748)
    at org.apache.coyote.http11.filters.ChunkedOutputFilter.doWrite(ChunkedOutputFilter.java:126)
    at org.apache.coyote.http11.InternalOutputBuffer.doWrite(InternalOutputBuffer.java:557)
    at org.apache.coyote.Response.doWrite(Response.java:567)
    at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:394)
    ... 57 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T08:36:45.460

你`HTTP client`断线了。

可能有更多相同的理由

*   响应请求时间过长，客户端放弃

*   您回复了客户不理解的内容

*   最终用户实际上取消了请求
*   发生网络错误
*   .. 和更多。

您需要调试并确定原因。很难用您的信息查明原因。

# java - Java ForkJoinPool 的并行度是多少？

> ID：14301780
> 
> 赞同：17
> 
> 时间：2013-01-13T08:15:17.923
> 
> 标签：java, fork-join

当我遇到这个构造函数时，我正在研究关于 Fork/Join 框架的 oracle 文档`ForkJoinPool`：`ForkJoinPool(int parallelism)`. 文档说这是*并行度级别，默认情况下等于可用处理器的数量*。谁能告诉我如何使用它来提高程序的速度和效率？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T08:36:33.943

本质上，并行度设置告诉了`ForkJoinPool`要使用多少个工作线程。

默认设置通常是最佳的，但是假设您有一个独立于 的工作线程`ForkJoinPool`，那么您可能会发现将工作线程的数量设置为处理器数量 - 1 比使用所有处理器更好。通常，在特定程序中提高速度和效率的唯一方法是使用不同的设置进行配置文件。

# assembly - 防止在 Keil 中生成“BX LR”

> ID：14301781
> 
> 赞同：0
> 
> 时间：2013-01-13T08:15:21.680
> 
> 标签：assembly, compiler-construction, arm, arm7

如何强制编译器不为返回函数生成“BX LR”。我还设置了选项 --ARM_only(in compiler + assembler + linker) 但这没有用，我最后在 axf 文件中有这个代码。我在 Keil 中的目标设置为 ARM7TDMI（我无法将我的目标设置为 ARM7 或没有 Thumb 的任何其他目标）那么我们可以做些什么来防止生成“BX LR”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T08:54:57.260

`BX`如果目标地址的最低有效位为 0，则不会切换到 Thumb 模式。换句话说，它也可以用作常规分支。

和 的指令周期时间在`BX LR`ARM7TDMI`MOV PC,LR`上也是相同的（2S + 1N 个周期），因此使用其中一个或另一个在性能方面没有什么可取之处。

# android - 如何在android中从下到上动画视图

> ID：14301782
> 
> 赞同：5
> 
> 时间：2013-01-13T08:15:28.460
> 
> 标签：android, android-layout

我有 listView 我从底部添加项目。我想为添加的项目设置动画，列表视图的其余部分应该向上滑动。动画效果应该是从下到上。我试过翻译动画，但它只滑动添加的项目。谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-09-07T11:54:21.410

```
public static void slideToBottom(View view){
    TranslateAnimation animate = new TranslateAnimation(0,0,0,view.getHeight());
    animate.setDuration(500);
    animate.setFillAfter(true);
    view.startAnimation(animate);
    view.setVisibility(View.GONE);
}

public static void slideToTop(View view){
    TranslateAnimation animate = new TranslateAnimation(0,0,view.getHeight(),0);
    animate.setDuration(500);
    animate.setFillAfter(true);
    view.startAnimation(animate);
    view.setVisibility(View.VISIBLE);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T12:32:06.357

看到这个 LIB 它可能对你有帮助

> [http://nhaarman.github.io/ListViewAnimations/?ref=app](http://nhaarman.github.io/ListViewAnimations/?ref=app)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-30T05:40:53.420

尝试将 listView 背景设置为白色

# automation - MYOB - 任务自动化

> ID：14301783
> 
> 赞同：0
> 
> 时间：2013-01-13T08:15:49.920
> 
> 标签：automation, autoit, myob

是否有任何工具可以自动从 MYOB (AccountRight Plus) 导出所有报告？我已经尝试过 AutoIt 和 Sikuli，但似乎鼠标点击（和键盘发送/键入命令）以某种方式被忽略了。可能吗？下面是我正在使用的 AutoIt 脚本：

```
 #include <ImageSearch.au3>
    #include <WinAPI.au3>
    #include <Constants.au3>
    $x1=0
    $y1=0
    WinActivate("AccountRight Plus")
    Sleep(200)
    $result = _ImageSearch("Accounts.bmp",1,$x1,$y1,0)
    if $result=1 Then
        MouseMove($x1,$y1,3)
        MouseClick("left")
        Sleep(1000)
        MouseClick("left")
        $aMouse = MouseGetPos() ; Remembers current mouse position
        ConsoleWrite("Mouse Clicked at " & $aMouse[0] & "," & $aMouse[1] & @LF)
        Sleep(500)
        ;Try with Handle
        Local $handle = WinGetHandle("AccountRight Plus")
        If @error Then
            MsgBox(4096, "Error", "Could not find the correct window")
        Else
            ConsoleWrite("$handle = " & $handle & @LF)
            ControlSend($handle, "", "", "^i")
        EndIf
        Sleep(1000)
        ;try winAPI
        ;MsgBox(0, "Info", "Moving mouse")
        _WinAPI_Mouse_Event($MOUSEEVENTF_MOVE, 653, 454)
        _WinAPI_Mouse_Event($MOUSEEVENTF_LEFTDOWN)
        Sleep(500)
        _WinAPI_Mouse_Event($MOUSEEVENTF_LEFTUP)
        ; try Control Click
        $controResult=ControlClick("ABC - Command Centre",20806,"left",2,62,106)
        ConsoleWrite("controlResult = " & $controResult & @LF)
        Sleep(1000)
        ; try ControSend to inner frame
        $controResult=ControlSend("AccountRight Plus","ABC- Command Centre",20806,"{TAB}")
        ConsoleWrite("controlResult = " & $controResult & @LF)
        Sleep(1000)
        ; try ControSend to outer frame
        $controResult=ControlSend("AccountRight Plus","","","{ALT}")
        ConsoleWrite("controlResult = " & $controResult & @LF)
        Sleep(1000)
        ; try with CLASS
        $controResult=ControlSend("AccountRight Plus","","[CLASS:MDIClient; INSTANCE:1]","{TAB}")
        ConsoleWrite("controlResult = " & $controResult & @LF)
        Sleep(1000)
        ; try send
        Send("{TAB}")
        Sleep(1000)
        Send("{TAB}")
        Sleep(1000)
        ;try MenuSelect
        WinMenuSelectItem("AccountRight Plus", "", "&File")
        Sleep(1000)
        MsgBox(0,"Found","picture found.")
            EndIf 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:01:00.503

努西,,

您是否尝试过直接在您的应用程序中使用扫描码？

这是一个例子。它在当前位置单击鼠标，然后发送 {Tab}。您需要根据需要更改此设置。您可以先使用“MouseMove,150,250”将鼠标移动到正确的位置，这些是 X、Y 位置。

```
F8:: ; Press F8 to start macro
Send, {vk01} ; Click left mouse button
;Send, {scYYY} ; 
Send, {vk09sc00F} ; Send the Vk and SC codes for the {Tab} key.
Return 
```

让我知道这个是否奏效

# javascript - 如何使用 javascript 播放任意 MIDI 音符？

> ID：14301785
> 
> 赞同：17
> 
> 时间：2013-01-13T08:16:07.217
> 
> 标签：javascript, midi

澄清一下：我不想生成 MIDI 文件，也不想播放 MIDI 文件，我希望即时播放 MIDI 音符。

我尝试使用[https://github.com/mudcube/MIDI.js](https://github.com/mudcube/MIDI.js)作为 MIDI 库，并且它有点工作。

我可以通过调用来演奏音符`MIDI.noteOn(0,midiNumber,100);`。然而，这会播放一个音符几秒钟，然后逐渐减弱，即使我从不叫`MIDI.noteOff`.

我不相信这就是 MIDI 的工作方式。我希望能够调用 noteOn 并播放和维持音符，直到调用 noteOff 为止。

预期浏览器：现代 firefox/chrome。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T08:26:54.653

这是您的 MIDI.js 版本的错误：

```
var playChannel = function (id) {
    var note = notes[id];
    if (!note) return;
    var nid = (channel_nid + 1) % channels.length;
    var time = (new Date()).getTime();
    var audio = channels[nid];
    channel_map[note.id] = audio;
    audio.src = MIDI.Soundfont[note.id];
    audio.volume = volume;
    audio.play();
    channel_nid = nid;
}; 
```

如您所见`playChannel`，将加载给定的音符并播放。由于没有自动循环属性，它不会重复，所以`noteOff`不需要调用。如果您将`audio`元素设置为自动循环，您可以自己解决此问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-14T14:06:39.580

或者，[http](http://mohayonao.github.io/timbre.js/) ://mohayonao.github.io/timbre.js/ 提供了可以调用 noteOn 和 noteOff 的各种声音生成器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-28T19:28:05.500

不同的乐器表现不同。钢琴有一个“内在”的音符，但管风琴没有。

此外，`noteOn`并`noteOff`取决于实施。`modcu.be`在 HTML5 实现中，为每个音符播放一个 OGG 文件，它根本不关心`noteOff`。当 OGG 结束时，声音停止。`autoloop`在这种情况下，对钢琴没有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T21:47:28.323

谷歌网页 MIDI API。它尚未在所有浏览器中实现，但 GitHub 上的 Chris Wilson 提供了一个 polyfill。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-01T06:35:15.093

这是正确的行为。您需要一个更好的样本库来播放长声音。

参见无尽声音的[教堂管风琴示例](https://surikov.github.io/midi-sounds-react-examples/examples/midi-sounds-example10/build/)。

这个例子使用[WebAudioFont](https://github.com/surikov/webaudiofont)来演奏超过 1500 种乐器和鼓。这个库支持 ADSR、混响和循环点。

# php - php move_uploaded_file 添加另一个文件夹

> ID：14301787
> 
> 赞同：-1
> 
> 时间：2013-01-13T08:16:49.243
> 
> 标签：php, forms, file-upload, directory

我想知道如何添加到这行代码以将图像上传到`photos/`，以及`/mobile/photos`？那么我将如何添加`/mobile/photos`到脚本中呢？

```
$place_file = move_uploaded_file( 
    $_FILES['fileField']['tmp_name'], 
    "photos/".$newname); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:20:03.357

```
if (move_uploaded_file($_FILES['fileField']['tmp_name'], "photos/$newname")) {
    copy("photos/$newname", "mobile/photos/$newname");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T08:25:48.417

Its simple just use the [copy](http://php.net/manual/en/function.copy.php) PHP function. But first confirm that file exist before attempting to copy because copying might fail based a number of reasons

Here is a sample code:

```
if ($success = move_uploaded_file($_FILES['fileField']['tmp_name'], 
                                  "photos/$newname") )   
{
    copy("photos/$newname", "mobile/photos/$newname");
}else{

 // error occurred
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T08:19:55.480

您可以先将_uploaded_file 移动到第二个文件夹，然后再[复制](http://php.net/manual/en/function.copy.php)到第二个文件夹，例如：

```
if( move_uploaded_file( $_FILES['fileField']['tmp_name'], "photos/".$newname) ) {
   //copy to mobile/photos
   copy("photos/".$newname, "mobile/photos/".$newname);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T08:21:19.377

您可以使用 php[复制文件：](http://php.net/manual/en/function.copy.php)

```
copy("photos/$newname", "mobile/photos/$newname"); 
```

# python - 在python中返回对象

> ID：14301798
> 
> 赞同：-1
> 
> 时间：2013-01-13T08:18:59.757
> 
> 标签：python, object

我有一个代码：

```
response = urllib2.urlopen(url)
htmlparser = etree.HTMLParser()
tree = etree.parse(response, htmlparser)
result = tree.xpath(xpath)
# result return [<Element div at 0x2d903a0>]
# I want to view html string 
```

我认为结果是对象。如何查看结果结构以访问我需要的返回值？

当我编写python代码时。我通常会得到像 <... at 0x325dc> 这样的回报。我不知道 <... at 0x325dc> 的值是多少。我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T08:21:52.763

来自[http://docs.python.org/2/library/xml.etree.elementtree.html](http://docs.python.org/2/library/xml.etree.elementtree.html)

> xml.etree.ElementTree.tostring(element, encoding="us-ascii", method="xml") 生成 XML 元素的字符串表示形式，包括所有子元素。element 是一个 Element 实例。encoding [1] 是输出编码（默认为 US-ASCII）。方法是“xml”、“html”或“text”（默认为“xml”）。返回包含 XML 数据的编码字符串。

了解您的文档。

# python - Scrapy：如何在已由 scrapy/wget 下载的文件上使用 XPath 选择器？

> ID：14301809
> 
> 赞同：0
> 
> 时间：2013-01-13T08:20:54.953
> 
> 标签：python, scrapy

我正在关注[Scrapy 教程](http://doc.scrapy.org/en/latest/intro/tutorial.html)。我的项目涉及解析已由 Scrapy 或 wget 下载的文件。我知道我可以为此使用 XPath 选择器，但到目前为止我看到的示例涉及在 Scrapy 的 parse 方法中调用的 XPath 选择器，因此仅适用于 Scrapy 下载的文件。有没有办法可以直接在下载的文件上使用 XPath？我是 Python 和 Scrapy 的新手，所以我找不到在独立的非 Scrapy Python 脚本中调用 XPath 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:31:31.087

您可以`Beautiful Soup`用于解析已经下载的文件。它更易于使用

[http://www.crummy.com/software/BeautifulSoup/bs4/doc/](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)

即使在用scrapy解析时我也很想使用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T07:43:43.090

大多数情况下，scrapy[`lxml`](http://lxml.de/tutorial.html)用作 xpath 选择器后端。

您可以直接在任何文件上使用 lxml。

PS [https://github.com/scrapy/scrapy/blob/master/scrapy/selector/lxmlsel.py](https://github.com/scrapy/scrapy/blob/master/scrapy/selector/lxmlsel.py)

您还可以手动构造一个 Response 对象并将其提供给 HtmlXPathSelector（未测试）：

```
from scrapy.selector import HtmlXPathSelector
from scrapy.http import TextResponse

body = '<your html page here'
response = TextResponse(url = '', body = body, encoding = 'utf-8')

hxs = HtmlXPathSelector(response)
subcategories = hxs.select("your xpath query here")
print subcategories 
```

# html - div的定位会影响SEO吗？

> ID：14301814
> 
> 赞同：0
> 
> 时间：2013-01-13T08:22:21.743
> 
> 标签：html, search-engine, seo, google-search

在现场我有这个顺序的 div 容器：

1.  不太重要的左侧栏
2.  不太重要的右侧
3.  最后是核心中心内容

由于核心内​​容排在侧边栏之后；这对SEO有什么不好的影响吗？如果是，那么我怎样才能将中心 div 放在侧边栏之前。**需要流体中心和固定侧边栏。**

```
 #left {float:left;width:200px;}
    #right {float:right;width:200px;}
    #center div {margin: 0 200px;}
    <!--X-->
    <div id="left"> ... </div>
    <div id="right"> ... </div>
    <div id="center"> ... </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T08:26:39.903

> “除了最常见的东西，如关键字覆盖率标题、内容的关键短语密度、良好的元标记等。还有一个方面鲜为人知：内容的每个部分都是根据其在整个页面的内容，以及网站所有页面内容之间的独特程度。这来自一个简单、自然的原则，如果一个页面想要“说”什么，它会从它开始，然后把其他不太重要的事情在后面。所以最重要的部分应该在开头找到。但是，如果部分内容似乎出现在太多页面上（如标题、菜单、侧边栏内容等），那么它就被认为是“普通的”——这与特殊的、独特的相反——因此，从内容的角度来看，它的重要性较低，所谓的“搜索引擎优化汁”也较少。”

搜索了一下，发现这个[here](http://dionesku.com/better-seo-performance-through-css-content-positioning-46.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T21:39:39.163

2011 年初，Google 发布了“布局”算法更新，该更新会惩罚在页面顶部和页面独特内容或文本之前显示广告横幅的 div 页面。

如果广告很重要并且需要保持在首屏上方并且您希望避免这种惩罚，请考虑使用 position:relative 将您的广告置于页面代码的 html 排序中位于其前面的 div 之上。

通过这种方式，您将拥有两全其美的优势，让代码检查算法保持愉快，并且您的网站访问者将通过点击页面顶部的广告来帮助为您的网站支付费用。（有点像谷歌安排搜索结果的方式；）

# asp.net - GridView 'PendingRecordsGridview' 触发了未处理的事件 RowDeleting

> ID：14301815
> 
> 赞同：9
> 
> 时间：2013-01-13T08:22:23.773
> 
> 标签：asp.net, gridview, row, delete-row

我在谷歌搜索有一个简单的方法来删除使用此代码确认的记录：

```
<asp:templatefield HeaderText="Delete">
                    <ItemTemplate>
                        <asp:Button ID="deleteButton" runat="server" CommandName="Delete" Text="Delete" OnClientClick="return confirm('Are you sure you want to delete this user?');" />
                    </ItemTemplate>
                </asp:templatefield> 
```

但是当我运行它并单击删除并单击“是”进行确认时。出现此错误： GridView 'PendingRecordsGridview' 触发了未处理的事件 RowDeleting。

有人帮助我:(我也尝试添加此代码 ``OnRowDeleting = "PendingRecordsGridview_RowDeleting" 但没有成功！:(

这是我的gridview完整代码：

```
<asp:GridView OnPageIndexChanging="PendingRecordsGridview_PageIndexChanging" ID="PendingRecordsGridview" runat="server" AutoGenerateColumns="False" DataKeyNames="ID" OnRowcommand="PendingRecordsGridview_RowCommand" DataSourceID="sd1" BorderStyle="Ridge" BackColor="White" BorderColor="Black" BorderWidth="3px" CellPadding="4" Width="1070px" PageSize="2" AllowPaging="True">
        <RowStyle ForeColor="#003399" HorizontalAlign="Center" />
        <Columns>
            <asp:templatefield HeaderText="Accept">
                <ItemTemplate>
                    <asp:Button CommandArgument='<%# Bind("id") %>' ID="Button1" runat="server" CausesValidation="false" CommandName="accept" Text="Accept" />
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Delete">
                    <ItemTemplate>
                        <asp:Button ID="deleteButton" runat="server" CommandName="Delete" Text="Delete" OnClientClick="return confirm('Are you sure you want to delete this user?');" />
                    </ItemTemplate>
                </asp:templatefield>
            <asp:templatefield HeaderText="ID" SortExpression="ID">
                <EditItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Eval("ID") %>'>
                    </asp:Label>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label2" runat="server" Text='<%# Bind("ID") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="First Name" SortExpression="FirstName">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("FirstName") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label3" runat="server" Text='<%# Bind("FirstName") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Last Name" SortExpression="LastName">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("LastName") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label4" runat="server" Text='<%# Bind("LastName") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Middle Name" SortExpression="MiddleLastName">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("MiddleName") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label5" runat="server" Text='<%# Bind("MiddleName") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Address" SortExpression="Address">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Address") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label6" runat="server" Text='<%# Bind("Address") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Gender" SortExpression="Gender">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Gender") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label7" runat="server" Text='<%# Bind("Gender") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Contact No." SortExpression="ContactNumber">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("ContactNumber") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label18" runat="server" Text='<%# Bind("ContactNumber") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Plate No." SortExpression="PlateNumber">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("PlateNumber") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label19" runat="server" Text='<%# Bind("PlateNumber") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Mobile Color" SortExpression="Color">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Color") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label11" runat="server" Text='<%# Bind("Color") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Brand" SortExpression="Brand">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Brand") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label12" runat="server" Text='<%# Bind("Brand") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Liscenced No." SortExpression="LiscensedNumber">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("LiscensedNumber") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label10" runat="server" Text='<%# Bind("LiscensedNumber") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:TemplateField>
            <HeaderTemplate>Image</HeaderTemplate>
            <ItemTemplate>
                <img src='data:image/jpg;base64,<%# Eval("Image") != System.DBNull.Value ? Convert.ToBase64String((byte[])Eval("Image")) : string.Empty %>' alt="image" height="85" width="85"/>
            </ItemTemplate>
        </asp:TemplateField>        </Columns>
        <FooterStyle BackColor="#99CCCC" ForeColor="#003399" />
        <PagerStyle HorizontalAlign="Center" BackColor="#999999" ForeColor="#003399" />
        <EmptyDataTemplate>
            NO PENDING REQUEST!
        </EmptyDataTemplate>
        <SelectedRowStyle BackColor="#009999" Font-Bold="True" ForeColor="#CCFF99" />
        <HeaderStyle BackColor="#999999" Font-Bold="True" ForeColor="#003399" HorizontalAlign="Center" />
        <AlternatingRowStyle BorderColor="Black" BorderWidth="3px" BorderStyle="Ridge" />
    </asp:GridView>
        </td>
        <td style="height: 282px">&nbsp;</td>
        </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td style="height: 37px">&nbsp;</td>
        </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td valign="top">
<asp:SqlDataSource runat="server" id="sd1" ProviderName="<%$ ConnectionStrings:ConnectionString.ProviderName %>" ConnectionString="<%$ ConnectionStrings:ConnectionString %>" SelectCommand="SELECT * FROM [PendingRecords]" DeleteCommand="DELETE FROM [PendingRecords] WHERE [ID] = ?" InsertCommand="INSERT INTO [PendingRecords] ([Username], [Password], [FirstName], [LastName], [MiddleName], [Address], [Gender], [ContactNumber], [PlateNumber], [Color], [Brand], [LiscensedNumber]) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)" UpdateCommand="UPDATE [PendingRecords] SET [Username] = ?, [Password] = ?, [FirstName] = ?, [LastName] = ?, [MiddleName] = ?, [Address] = ?, [Gender] = ?, [ContactNumber] = ?, [PlateNumber] = ?, [Color] = ?, [Brand] = ?, [LiscensedNumber] = ? WHERE [ID] = ?">
    <DeleteParameters>
        <asp:parameter Name="ID" Type="Int32" />
    </DeleteParameters>
    <UpdateParameters>
        <asp:parameter Name="Username" Type="String" />
        <asp:parameter Name="Password" Type="String" />
        <asp:parameter Name="FirstName" Type="String" />
        <asp:parameter Name="LastName" Type="String" />
        <asp:parameter Name="MiddleName" Type="String" />
        <asp:parameter Name="Address" Type="String" />
        <asp:parameter Name="Gender" Type="String" />
        <asp:parameter Name="ContactNumber" Type="String" />
        <asp:parameter Name="PlateNumber" Type="String" />
        <asp:parameter Name="Color" Type="String" />
        <asp:parameter Name="Brand" Type="String" />
        <asp:parameter Name="LiscensedNumber" Type="String" />
        <asp:parameter Name="ID" Type="Int32" />
    </UpdateParameters>
    <InsertParameters>
        <asp:parameter Name="Username" Type="String" />
        <asp:parameter Name="Password" Type="String" />
        <asp:parameter Name="FirstName" Type="String" />
        <asp:parameter Name="LastName" Type="String" />
        <asp:parameter Name="MiddleName" Type="String" />
        <asp:parameter Name="Address" Type="String" />
        <asp:parameter Name="Gender" Type="String" />
        <asp:parameter Name="ContactNumber" Type="String" />
        <asp:parameter Name="PlateNumber" Type="String" />
        <asp:parameter Name="Color" Type="String" />
        <asp:parameter Name="Brand" Type="String" />
        <asp:parameter Name="LiscensedNumber" Type="String" />
    </InsertParameters>
</asp:SqlDataSource>
        </td>
        <td>&nbsp;</td>
        <td style="height: 33px">&nbsp;</td>
        </tr>
    <tr>
        <td style="width: 32px">&nbsp;</td>
        <td style="width: 8px">&nbsp;</td>
        <td style="width: 87px">&nbsp;</td>
        <td style="width: 542px">&nbsp;</td>
        <td style="width: 447px">&nbsp;</td>
        <td style="height: 83px; width: 34px;">&nbsp;</td>
        </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-03-06T19:12:29.103

您正在尝试为删除按钮使用命令名称**Delete**。所以gridview会自动创建一个**行删除**事件......

您需要将命令参数从**Delete**更改为其他内容，例如**Delete_Product**或其他...

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-13T08:56:31.400

请修改您的标记和代码以包含该`OnRowDeleting`事件。

```
<asp:GridView OnPageIndexChanging="PendingRecordsGridview_PageIndexChanging" ID="PendingRecordsGridview" runat="server" AutoGenerateColumns="False" DataKeyNames="ID" OnRowcommand="PendingRecordsGridview_RowCommand" DataSourceID="sd1" BorderStyle="Ridge" BackColor="White" BorderColor="Black" BorderWidth="3px" CellPadding="4" Width="1070px" PageSize="2" AllowPaging="True">
        <RowStyle ForeColor="#003399" HorizontalAlign="Center" OnRowDeleting="PendingRecordsGridview_RowDeleting"/> 
```

在后面的代码上添加这个方法。

```
public void PendingRecordsGridview_RowDeleting (Object sender, GridViewDeleteEventArgs e)
{

} 
```

# c# - asp.net gridview 的复选框值

> ID：14301821
> 
> 赞同：1
> 
> 时间：2013-01-13T08:23:12.160
> 
> 标签：c#, jquery

我有一个带有复选框的gridview，我正在尝试获取单击行的复选框是否被选中。

```
<td>
<input type="button" id="upbutt" value="edit" />
</td><td>60</td><td>h767</td><td>itsatesthere</td><td>cat4</td><td><span class="aspNetDisabled" title="control"><input id="GridView1_ctl00_11" type="checkbox" name="GridView1$ctl13$ctl00" checked="checked" disabled="disabled" /></span></td>

 <td>
<input type="button" id="upbutt" value="edit" />
</td><td>55</td><td>F309</td><td>ahmeds</td><td>cat1</td><td><span class="aspNetDisabled" title="control"><input id="GridView1_ctl00_8" type="checkbox" name="GridView1$ctl10$ctl00" disabled="disabled" /></span></td>/tr>

    $(function () {

        var tr = $('#GridView1').find('tr');
        tr.bind('click', function (event) {
            var tds = $(this).find('td:not(:first-child)');

            $.each(tds, function (index, item) {
                if ('#txtbadd' + (index + 1) != '#txtbadd5') {
                    $('#txtbadd' + (index + 1)).val(item.innerHTML);
                    alert($("td:has(:checkbox:checked)").text());
                }
            });

            $("#modialog").dialog("open");
            return false;
        });
    }); 
```

alert($("td:has(:checkbox:checked)").text());

此代码有效，但它使所有行都带有选中的复选框。我只想知道是否选中了单击的行复选框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:26:45.330

您需要使用选择器传递当前行的上下文

改变

```
alert($("td:has(:checkbox:checked)").text()); 
```

到

```
alert($("td:has(:checkbox:checked)", this).text()); 
```

我做了一些小改动，为演示制作了两行，这可以帮助您了解它的工作原理并简化 javascript。

**[现场演示](http://jsfiddle.net/5XuJY/3/)**

```
$('#GridView1 tr').bind('click', function (event) {
    alert($("td:has(:checkbox:checked)", this).length > 0 ? "Checked" : "Not checked");
}); 
```

从 jQuery 1.7 开始，.on() 方法是优于 bind 的用于将事件处理程序附加到文档的首选方法。[**你可以在这里**](http://api.jquery.com/bind/)阅读更多[](http://api.jquery.com/bind/)

# .net - 来自存储过程的 PetaPoco 输出参数未返回

> ID：14301824
> 
> 赞同：0
> 
> 时间：2013-01-13T08:23:26.657
> 
> 标签：.net, sql-server, vb.net, petapoco

使用带有最新 PetaPoco 的 SQL Server 2005 和以下代码：

```
 Dim count = New SqlParameter("@Count", System.Data.ParameterDirection.Output)
    count.DbType = Data.DbType.Int32

    Dim results = db.Query(Of User)(";exec SearchUserPaged @@page=@page, @@maximumRows=@maximumRows, @@ClientID=@ClientID, @@orderBy=@SortExp, @@Count=@Count OUT",
                                    New With {.page = pageEx, .maximumRows = maximumRowIndex, .ClientID = Me.ClientID, .SortExp = sortExpression, .Count = count}).ToList()

    'Dim results = db.EDPEntities.Query(Of User)(";exec SearchUserPaged @@page=@0, @@maximumRows=@1, @@ClientID=@2, @@orderBy=@3, @@Count=@4 OUTPUT",
    '                                  pageEx, maximumRowIndex, Me.ClientID, sortExpression, count).ToList()

    If IsDBNull(count.Value) Then
        Me.Count = 0
    Else
        Me.Count = count.Value
    End If 
```

但是输出参数总是返回 0 值。对 PetaPoco 来说很新，所以不确定我是否遗漏了一些非常明显的东西。

这是 Peta 生成的 SQL，它在查询分析器中运行良好：

```
DECLARE @0 int,@1 int,@2 int,@3 nvarchar(4000),@4 int
SET @0=1
SET @1=25
SET @2=10145
SET @3=NULL
SET @4=2
exec SearchUserPaged @page=@0, @maximumRows=@1, @ClientID=@2, @orderBy=@3, @Count=@4 OUT

SELECT @4 
```

当我`SELECT @4`返回正确的值时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:21:48.840

这有效（不知道为什么）：

```
 Dim count = New SqlParameter("@Count", System.Data.SqlDbType.Int)
    count.Direction = System.Data.ParameterDirection.Output
    count.Value = DBNull.Value

    Dim results = db.Query(Of User)(";exec SearchUserPaged @@page=@page, @@maximumRows=@maximumRows, @@ClientID=@ClientID, @@orderBy=@SortExp, @@Count=@Count OUT", New With { _
        Key .page = pageEx, _
        Key .maximumRows = maximumRowIndex, _
        Key .ClientID = ClientID, _
        Key .SortExp = sortExpression, _
        Key .Count = count _
    }).ToList()

    If IsDBNull(count.Value) Then
        Me.Count = 0
    Else
        Me.Count = count.Value
    End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T07:04:40.573

我认为这是因为 Param 的默认值

```
Dim count = New SqlParameter("@Count", System.Data.SqlDbType.Int)
count.Direction = System.Data.ParameterDirection.Output
count.Value = DBNull.Value -- this fixed the error. 
```

希望这可以帮助

# android - 为什么调用种类/范围指令中指示的寄存器数量与参数类型的数量不匹配？

> ID：14301825
> 
> 赞同：2
> 
> 时间：2013-01-13T08:23:29.653
> 
> 标签：android, dalvik, smali

在以下示例字节码中：

```
 invoke-virtual/range {v0 .. v5}, Landroid/location/LocationManager;->requestLocationUpdates(Ljava/lang/String;JFLandroid/location/LocationListener;)V 
```

寄存器的范围表示寄存器`v0`, `v1`, `v2`, `v3`, `v4`, `v5`, 是传递给方法的，但是为什么数量和表示的类型的数量不一样，只有2个？？

调用种类/范围和普通调用种类之间有区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T00:17:10.993

参数列表中一共提到了 4 个参数，`Ljava/lang/String;`, `J`, `F`, 和`Landroid/location/LocationListener;`。此外，由于 is 是一个非静态方法，因此`this`在其他参数之前存在一个隐含参数。最后一个缺失的部分是“J”是一个双精度类型，它是一个 64 位类型——这意味着它需要两个寄存器。

所以参数是：

```
this - v0
Ljava/lang/String; - v1
J - v1 and v2
F - v3
Landroid/location/LocationListener; - v4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:48:27.687

好的...这些类型没有用 分隔`,`，这让初学者很难区分：`Ljava/lang/String`是完整的类名，`J`是长类型，`F`是浮点类型，`Landroid/location/LocationListener`是完整的类名。但是，仍然不清楚，对于所有指定的参数类型，加上该`this`方法正在调用的对象类型，数量是 5 个参数类型，但为什么将寄存器的范围指定为 6？

# vim - Correct filename for new file types inside ftdetect folder for vim

> ID：14301826
> 
> 赞同：1
> 
> 时间：2013-01-13T08:23:30.623
> 
> 标签：vim

I am creating a new filetype for arduino files in vim.

I looked into the [ftdetect documentation](http://vimdoc.sourceforge.net/htmldoc/filetype.html#new-filetype) and it is specified that a new file with the following content inside the `.vim/ftdetect/` folder should be created

```
au BufRead,BufNewFile *.mine        set filetype=mine 
```

In the above example both the file extension and filetype are same and the file is created with the name `mine.vim`

But for arduino the file extension (`.ino` and `pde`) is different from the filetype (`arduino`)

My question is what should be the filename in this case. Should it be `ino` or `arduino`?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T11:07:25.253

文件名应该与文件类型相同，即`arduino.vim`在这种情况下。为了识别这两个文件扩展名，将它们列出如下：

```
au BufRead,BufNewFile *.ino,*.pde set filetype=arduino 
```

# sql - Can I enforce user to enter value in minimum one of many nullable fields in SQL?

> ID：14301830
> 
> 赞同：0
> 
> 时间：2013-01-13T08:24:01.617
> 
> 标签：sql, sql-server, sql-server-2008

> **Possible Duplicate:**
> [One of the column between two columns should be NOT NULL. How to enforce it in schema?](https://stackoverflow.com/questions/7017871/one-of-the-column-between-two-columns-should-be-not-null-how-to-enforce-it-in-s)

I have a table with 5 null able fields and every record must have a value for one of those fields. Can I enforce user to enter value in minimum one of many nullable fields in SQL? Thanx

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T08:29:32.293

是的，你可以，[使用`CHECK`约束](http://msdn.microsoft.com/en-us/library/ms188258(v=sql.105).aspx)；

```
CREATE TABLE test
(
  id INT,
  val1 VARCHAR(32),
  val2 VARCHAR(32),
  val3 VARCHAR(32),
  val4 VARCHAR(32),
  val5 VARCHAR(32),
  CHECK (COALESCE(val1,val2,val3,val4,val5) IS NOT NULL)
); 
```

...将要求至少一个 val1-val5 不为空。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T08:29:49.660

```
ADD CONSTRAINT chkAnyNotNULL CHECK (col1 IS NOT NULL OR Col2 IS NOT NULL OR ....); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T08:36:32.140

是的。使用`CHECK CONSTRAINT`;

```
USE tempdb
GO

IF OBJECT_ID('tempdb.dbo.MyTable') IS NOT NULL DROP TABLE MyTable

CREATE TABLE MyTable
(
    Col1    INT NULL,
    Col2    INT NULL,
    Col3    INT NULL,
    Col4    INT NULL,
    Col5    INT NULL,
    CONSTRAINT OneNonNull CHECK (COALESCE(Col1, Col2, Col3, Col4, Col5) IS NOT NULL)
)
GO

INSERT INTO MyTable
SELECT 1,2,3,4,5
GO

INSERT INTO MyTable
SELECT 1,NULL, NULL, NULL, NULL
GO

INSERT INTO MyTable
SELECT NULL, NULL, NULL, NULL, NULL
GO

SELECT *
FROM MyTable 
```

# javascript - create dynamic price range slider in java

> ID：14301834
> 
> 赞同：0
> 
> 时间：2013-01-13T08:24:49.457
> 
> 标签：javascript

I want to create a dynamic Price range slider somthing like makemytrip.com. which will have min and max price value based on product price e.g the lowest product price is $50 and the highest is $200, can the available range in the slider start with $50 and end with $200?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:33:50.820

使用[jQuery 滑块](http://jqueryui.com/slider/#range)来实现这个功能。[此处](http://jqueryui.com/slider/#range)提供演示

您将不得不为此使用以下代码

```
 $(function () {
   $("#slider-range").slider({
     range: true,
     min: 50,
     max: 200,
     values: [50, 200],
     slide: function (event, ui) {
       $("#amount").val("$" + ui.values[0] + " - $" + ui.values[1]);
     }
   });
   $("#amount").val("$" + $("#slider-range").slider("values", 0) +
     " - $" + $("#slider-range").slider("values", 1));
 }); 
```

创建滑块后，您可以更改滑块的最小值和最大值，如下所示

```
$( "#slider-range" ).slider( "option", "max", 60 );
$( "#slider-range" ).slider( "option", "min", 300 ); 
```

# math - Angle between two vectors confused

> ID：14301836
> 
> 赞同：-1
> 
> 时间：2013-01-13T08:25:02.613
> 
> 标签：math, vector

I wonder why angle between two vectors is `alpha` but not `beta` or `2*pi - alpha` as below image: [Angle between two vectors http://img202.imageshack.us/img202/1936/80732467.png](http://img202.imageshack.us/img202/1936/80732467.png)

Why the formular: `cos(phi) = (vector a DOT vector b)/(|vector a| * |vector b|)` always returns cos of alpha (but not `beta` or `2*pi - alpha`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:56:53.827

因此，向量的（代表）是有向线段，根据定义，两个向量之间的角度是从第一个向量逆时针到第二个向量时形成的角度。在你的情况下，这个角度是`2*pi- alpha`。实际上`cos(2*pi-alpha) = cos(-alpha) = cos(alpha)`，如果您只关心余弦，那么顺时针还是逆时针方向都无关紧要。

# postgresql - ActiveRecord association methods not being added to model

> ID：14301837
> 
> 赞同：0
> 
> 时间：2013-01-13T08:25:12.303
> 
> 标签：postgresql, activerecord, ruby-on-rails-3.2

I'm having to build a rails app around a legacy PostgreSQL database that doesn't conform to "the Rails way" in the sense that plurality is not possible -- and I'm not sure if that's what is tripping me up or what's tripping me up is that I've been away from Rails for too many months.

According to the Rails Guide, when you declare belongs_to on a model, four methods will be added to each instance of that model. In the Guide example, adding belongs_to :customer on the Order table adds: customer, customer=, build_customer, and create_customer.

I'm not seeing that in my inspection. Did I do something wrong or miss a step?

My two tables look like this:

```
class Zzaddress < ActiveRecord::Base
   set_table_name 'zzaddress'
   has_many :zzpersons, :class_name => 'Zzperson'
end

class Zzperson < ActiveRecord::Base
   set_table_name 'zzperson'
   belongs_to :zzaddress, :class_name => 'Zzaddress', :foreign_key => "zzaddress_id"
end 
```

Now if I retrieve an address like this:

```
myaddr = Zzaddress.where( :id => 972 ) 
```

I get a result back as I expect.

When I try to access any person assigned to that address, like this:

```
myaddr.zzpersons 
```

I get the beloved

```
NoMethodError: undefined method `zzpersons' for #<ActiveRecord::Relation:0x103c015d0> 
```

Sure enough, if I look at the methods for the model, it's not there either:

```
myaddr.methods.sort 
```

Spew forth lots of methods, and nothing much down in the zz range ;-)

If I do it without associations it works as you would expect:

```
grp = Zzperson.where( :zzaddress_id => 972 )

=> [#<Zzperson id: 1347, ....>, #<Zzperson id: 1349, ...>, #<Zzperson id: 1968, ...>] 
```

A lesson learned from long ago was to exit the rails console in between edits to the model files, which I continue to adhere to. Is there a way to inspect the model definition from within the console? I also recall the reload! command, but may date myself in suggesting that didn't always work?

This is rails 3.2.11 (fresh install so everything should be current), as is activerecord at 3.2.11, etc. For what it's worth, the PostgreSQL gem is pg (0.14.1). And PostgreSQL is at version 9.1.4.

And for completeness, the schema.rb was created by rake:schema:dump, and it looks valid to me:

```
create_table "zzaddress", :id => false, :force => true do |t|
   t.integer "id", :null => false
   <snip>
end

create_table "zzperson", :id => false, :force => true do |t|
   t.integer "id", :null => false
   t.integer "zzaddress_id", :default => 0, :null => false
   <snip>
end 
```

The SQL statements file created by pg_dump shows creation of the tables as expected:

```
CREATE TABLE zzaddress (
   id integer NOT NULL,
   etc.
);

CREATE TABLE zzperson (
   id integer NOT NULL,
   zzaddress_id integer DEFAULT 0 NOT NULL,
   etc.
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:06:38.067

如果我没记错的话，我相信`set_table_name`已被弃用。尝试

```
self.table_name = 'zzaddress' 
```

和

```
self.table_name = 'zzperson' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:04:52.723

叹。答案是我离开 Rails 太久了。

```
aperson = Zzperson.where(:id=>123) 
```

返回一个集合！

```
aperson = Zzperson.where(:id=>123).first 
```

返回*一个人*，这是我一直在寻找但一直忘记的。

# c# - Opening an XML file and converting this to UTF-8

> ID：14301838
> 
> 赞同：3
> 
> 时间：2013-01-13T08:25:14.983
> 
> 标签：c#, xml, utf-8, ansi

I'm trying to open a xml file (ansi) and converting and saving it UTF-8.

Here is my code:

```
using System;
using System.IO;
using System.Text;
using System.Xml;

class Test
{

public static void Main()
{
    string path = @"C:\test\test.xml";
    string path_new = @"C:\test\test_new.xml";

    try
    {
        XmlTextReader reader = new XmlTextReader(path);        

          XmlWriterSettings settings = new XmlWriterSettings();
                           settings.Encoding = new UTF8Encoding(false);
            using (var writer = XmlWriter.Create(path_new, settings))
            {
                reader.Save(writer);
            }

    }
    catch (Exception e)
    {
        Console.WriteLine("The process failed: {0}", e.ToString());
    }
}

} 
```

I'm getting an error 'System.Xml.XmlTextReader' does not contain a definition for 'Save' and no extension method 'Save' accepting a first argument of type 'System.Xml.XmlTextReader' could be found (are you missing a using directive or an assembly reference?)

What class am I missing here ? Is my code correct to do the job

EDIT:

Okay here another code that is giving me exception:

```
using System;
using System.IO;
using System.Text;
 using System.Xml;

class Test
{

public static void Main()
{
    string path = @"C:\project\rdsinfo.xml";
    //string path_new = @"C:\project\rdsinfo_new.xml";

    try
    {
        XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.Load(path);

    }
    catch (Exception e)
    {
        Console.WriteLine("The process failed: {0}", e.ToString());
    }
}
} 
```

It's giving me an exception, invalid character in the given encoding.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T10:43:50.993

它很简单：

```
string path = @"C:\test\test.xml";
string path_new = @"C:\test\test_new.xml";

Encoding utf8 = new UTF8Encoding(false);
Encoding ansi = Encoding.GetEncoding(1252);

string xml = File.ReadAllText(path, ansi);

XDocument xmlDoc = XDocument.Parse(xml);

File.WriteAllText(
    path_new,
    @"<?xml version=""1.0"" encoding=""utf-8""?>" + xmlDoc.ToString(),
   utf8
); 
```

将 ANSI 编码（示例中的 1252）更改为您的 ANSI 文件所在的任何一个 - 请参阅 [编码列表](http://msdn.microsoft.com/en-us/library/system.text.encoding.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T08:28:16.307

You can use `writer`, your instance of XmlTextWriter, to write this Xml to a file. This class contains a number of methods that can be used to generate the output file (i.e. `writer.WriteString()`).

The reference can be found at: [http://msdn.microsoft.com/en-us/library/system.xml.xmltextwriter.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmltextwriter.aspx)

A better method can be found by utilizing the answer to this question: [Convert utf-8 XML document to utf-16 for inserting into SQL](https://stackoverflow.com/questions/10890450/convert-utf-8-xml-document-to-utf-16-for-inserting-into-sql)

# javascript - Javascript Asynchronous Exception Handling with node.js

> ID：14301839
> 
> 赞同：17
> 
> 时间：2013-01-13T08:25:15.190
> 
> 标签：javascript, node.js, asynchronous, exception-handling, promise

I'm currently working on a node.js app and I'm having the usual asynchronous code issue.

I'm implementing a service server on top of Node's HTTP module.

This server supports (express like) routes. For example I have code that looks like this:

```
server.any("/someRoute",function(req,resp){
    resp.end("this text is sent to clients via http")
}); 
```

The server needs to be able to withstand failure, I do not want to crash the whole server when there is a problem in a function passed to any. The problem occurs when I'm writing code that looks like:

```
server.any("/someRoute",function(req,resp){
    setTimeout(function(){
        throw new Error("This won't get caught");
    },100);
}); 
```

I don't see how I possible can catch the error here. I don't want to crash the server over one server-side glitch, instead I want to serve 500\.

The only solutions I've been able to come up with are really not expressive. I've only come up with using `process.on("uncaughtException",callback)` and similar code using node 0.8 `Domains` (which is a partial remedy but Domains are currently buggy and this is still not very expressive since I end up having to create a domain for every handle).

What I would like to accomplish is binding `throw` actions from a function to a scope, the ideal solution is something like binding all thrown errors from a function to a specific handler function.

Is this possible? What is the best practice to handle errors in this case?

I'd like to emphasise that it should be able to continue serving requests after a bad requests, and restarting the server on every request or creating domains for every handler and catching their uncaught exceptions seems like a bad idea to me. Additionally - I've heard promises might be able to assist me (something about `throw` in promises), can promises aid me in this situation?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-13T13:43:08.473

**警告**：我不会推荐使用域的原始答案，域将来会被弃用，我写原始答案很有趣，但我不再认为它太相关了。相反 - 我建议使用事件发射器和具有更好错误处理的承诺 - 这是下面的示例，而不是承诺。这里使用的承诺是[Bluebird](https://github.com/petkaantonov/bluebird)：

```
Promise.try(function(){ 
    throw new Error("Something");
}).catch(function(err){
    console.log(err.message); // logs "Something"
}); 
```

超时（注意我们必须返回 Promise.delay）：

```
Promise.try(function() {
    return Promise.delay(1000).then(function(){
        throw new Error("something");
    });
}).catch(function(err){
    console.log("caught "+err.message);
}); 
```

使用一般的 NodeJS 功能：

```
var fs = Promise.promisifyAll("fs"); // creates readFileAsync that returns promise
fs.readFileAsync("myfile.txt").then(function(content){
    console.log(content.toString()); // logs the file's contents
    // can throw here and it'll catch it
}).catch(function(err){
    console.log(err); // log any error from the `then` or the readFile operation
}); 
```

这种方法既快速又安全，我推荐它在下面的答案之上，它使用可能不会留在这里的域。

* * *

我最终使用了域，我创建了以下我调用的文件`mistake.js`，其中包含以下代码：

```
var domain=require("domain");
module.exports = function(func){
    var dom = domain.create();
    return { "catch" :function(errHandle){
        var args = arguments;
        dom.on("error",function(err){
            return errHandle(err);
        }).run(function(){
            func.call(null, args);
        });
        return this;
    };
}; 
```

这是一些示例用法：

```
var atry = require("./mistake.js");

atry(function() {
    setTimeout(function(){
        throw "something";
    },1000);
}).catch(function(err){
    console.log("caught "+err);
}); 
```

它也像同步代码的正常捕获一样工作

```
atry(function() {
    throw "something";
}).catch(function(err){
    console.log("caught "+err);
}); 
```

我将不胜感激有关解决方案的一些反馈

附带说明一下，在 v 0.8 中，当您在域中捕获异常时，它仍然冒泡到`process.on("uncaughtException")`. 我在我`process.on("uncaughtException")`的 with中处理了这个

```
 if (typeof e !== "object" || !e["domain_thrown"]) { 
```

但是，文档建议反对`process.on("uncaughtException")`任何方式

# php - Replace a string starting on 2nd

> ID：14301844
> 
> 赞同：0
> 
> 时间：2013-01-13T08:25:56.013
> 
> 标签：php, regex

How can I replace a string, using normal replace or regular expression to replace only the 2nd found result onwards

```
<div id="fb-root"></div>
codes

<div id="fb-root"></div>

aas
<div id="fb-root"></div>
ss
<div id="fb-root"></div> 
```

Expected results should be

```
<div id="fb-root"></div>
codes

aas
ss 
```

the 2nd fb-root div upto the last should be removed.

Thanks in advance for the help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:40:11.740

可能有更好的方法来做到这一点，但为什么不为第一个使用占位符，替换其余的，然后将占位符改回来呢？

```
$full_text = file_get_contents($filename);
$text_to_replace = '<div id="fb-root"></div>';
$placeholder = '__PLACEHOLDER__';

$full_text = str_replace($text_to_replace, $placeholder, $full_text, 1);
$full_text = str_replace($text_to_replace, '', $full_text);
$full_text = str_replace($placeholder, $text_to_replace, $full_text); 
```

这里的关键是第一次调用中的第四个参数`str_replace`，它告诉函数只替换搜索文本的一个实例。它将仅用占位符替换第一个实例，然后第二次调用将删除所有剩余实例，第三次调用将用原始文本替换占位符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T08:43:01.223

尝试这个：

```
$str = 'STRING HERE';
$result = preg_replace_callback('@<div\s+id="fb-root"></div>@', function(){
    static $count = 0;
    if(++$count > 1){
        return null;
    }else{
        $args = func_get_arg(0);
        return $args[0];
    }
}, $str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T09:13:01.217

你可以这样做：

```
$str = "...";

$needle = '<div id="fb-root"></div>';
$len = strlen($needle);
$pos = strpos($str, $needle) + $len; // skip the first occurance
while (($pos = strpos($str, $needle, $pos)) !== false)
    $str = substr($str, 0, $pos) . substr($str, $pos + $len);// remove the needle 
```

# html - 如何在angularjs函数中获取事件

> ID：14301847
> 
> 赞同：2
> 
> 时间：2013-01-13T08:26:18.653
> 
> 标签：html, angularjs

在此代码事件中显示未定义。

```
<div class="div1" ng-click="displayinfo(event)">
    sadfasf
</div>

$scope.displayinfo = function(event)
{
     alert(event);
} 
```

谁能帮忙。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T08:30:31.177

使用 $event 代替事件。它在文档[http://docs.angularjs.org/api/ng.directive:ngClick中几乎没有隐藏](http://docs.angularjs.org/api/ng.directive:ngClick)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T08:27:42.857

非常接近——但它是`$event`。

```
<div class="div1" ng-click="displayinfo($event)">
    sadfasf
</div>

$scope.displayinfo = function(event)
{
     alert(event);
} 
```

# php - symfony2 custom time choice field

> ID：14301850
> 
> 赞同：4
> 
> 时间：2013-01-13T08:26:33.133
> 
> 标签：php, datetime, symfony, symfony-2.1

I'm trying to make custom datetime form fields. Like in this [answer](https://stackoverflow.com/questions/11449556/datatransformer-split-datetime-into-two-fields) i have split datetime fields with one date form field and on time form field using a DataTransformer.

I use a jquery datepicker for date selection, but i want to have ONE custom choice form field for time selection whith half hours intervalls:

```
00:00
00:30
...
23:30 
```

Here is my code but i'm not sure how to approach this

In my entity

```
/**
 * Time
 *
 * @ORM\Table(name="time")
 * @ORM\Entity
 */
class Time
{

...

    /**
     * @var \DateTime
     *
     * @ORM\Column(name="begin_date", type="datetime", nullable=false)
     */
    private $beginDate;

    /**
     * @var \DateTime
     *
     * @ORM\Column(name="end_date", type="datetime", nullable=false)
     */
    private $endDate;

...

    /**
     * Set beginDate
     *
     * @param \DateTime $beginDate
     * @return Time
     */
    public function setBeginDate($beginDate)
    {
        $this->beginDate = $beginDate;

        return $this;
    }

    /**
     * Get beginDate
     *
     * @return \DateTime 
     */

        public function getBeginDate()
    {
        $this->beginDate;
    }

    /**
     * Set endDate
     *
     * @param \DateTime $endDate
     * @return Time
     */
    public function setEndDate($endDate)
    {
        $this->endDate = $endDate;

        return $this;
    }

    /**
     * Get endDate
     *
     * @return \DateTime 
     */
    public function getEndDate()
    {
        return $this->endDate;
    }

...

} 
```

The form type

```
class TimeType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
        ->add('beginDate', 'my_datetime', array('label' => 'label.form.date'))
        ->add('endDate', 'my_datetime', array('label' => 'label.form.date'));
    }

    public function getName()
    {
        return 'Time';
    }
} 
```

So here is my custom form type:

```
 class MyDateTimeType extends AbstractType
{

public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
    ->add('date', 'genemu_jquerydate', array('input'  => 'datetime','widget' => 'single_text','format' => 'dd/MM/yyyy','error_bubbling' => true))
    ->add('time', 'choice', array(
        'choices'   => array(
            '00:00' => '00:00',
            '00:30' => '00:30',
            '01:00' => '01:00',
...
            '22:30' => '22:30',
            '23:00' => '23:00',
            '23:30' => '23:30',
            ),'error_bubbling' => true
));

    $builder->appendClientTransformer(new DateTimeToDateTimeArrayTransformer());
}

public function getDefaultOptions(array $options)
{
    return array(
        'label' => 'label.form.date',
        'error_bubbling' => false
        );
}

public function getName()
{
    return 'my_datetime';
}
} 
```

And this is the DataTransformer:

```
class DateTimeToDateTimeArrayTransformer implements DataTransformerInterface
{
public function transform($datetime)
{
    if(null !== $datetime)
    {
        $date = clone $datetime;
        $date->setTime(12, 0, 0);

        $time = clone $datetime;
        $time->setDate(1970, 1, 1);
    }
    else
    {
        $date = null;
        $time = null;
    }

    $result = array(
        'date' => $date,
        'time' => $time
    );

    return $result;
}

public function reverseTransform($array)
{
    $date = $array['date'];
    // $time = $array['time']; // Fatal error: Call to a member function format() on a non-object
    $time = new \DateTime($array['time']);

    if(null == $date || null == $time)
        return null;

    $date->setTime($time->format('G'), $time->format('i'));

    return $date;
}
} 
```

Form display is correct, but when i submit the form i get this error:

> Notice: Object of class DateTime could not be converted to int in /var/www/ttime/vendor/symfony/symfony/src/Symfony/Component/Form/Extension/Core/ChoiceList/ChoiceList.php line 457 500 Internal Server Error - ErrorException

Whereas i have the split items datetime + custom choice correctly persisted to DB.

I think that the **reverseTransform** function return datetime format, and the form builder can't convert it to the choice format:

> array('00:00' => '00:00',...)

Can you tell me how can get rid of this error?

Is there a better way for doing this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:59:19.280

datatransformers 转换函数返回的数据数组是一个 DateTime 对象数组。这些对象不能转换为选择字段值。要解决此问题，请返回实际格式化的日期和时间字符串：

```
$result = array(
    'date' => $date->format('Y-m-d'),
    'time' => $time->format('H:i')
); 
```

然后 reverseTransform 函数应使用以下代码将这些字符串转换回实际的 DateTime 对象：

```
$dateTimeString = $array['date'] . ' ' . $array['time'];
return DateTime::createFromFormat('Y-m-d H:i', $dateTimeString); 
```

# magento - Magento观察者没有开火

> ID：14301861
> 
> 赞同：0
> 
> 时间：2013-01-13T08:28:06.100
> 
> 标签：magento

有一个自定义观察者没有接受事件的问题。该模块已启用并显示在仪表板的高级部分中。我已经清除了所有缓存等，所以它必须是一个小配置问题。

任何人都可以帮助发现问题吗？

**配置文件**

```
<modules>
    <Hatclub_MembershipHandler>
        <version>1.0.0</version>
    </Hatclub_MembershipHandler>
</modules>

<global>

    <models>
        <dispatcher>
            <class>Hatclub_MembershipHandler_Model</class>
        </dispatcher>
    </models>

    <events>

        <customer_register_success>
            <observers>
                <registration_success_observer>
                    <class>dispatcher/observer</class>
                    <method>associateMembership</method>
                </registration_success_observer>
            </observers>
        </customer_register_success>

        <customer_session_init>
            <observers>
                <session_init_observer>
                    <class>dispatcher/observer</class>
                    <method>associateMembership</method>
                </session_init_observer>
            </observers>
        </customer_session_init>

        <customer_login>
            <observers>
                <login_observer>
                    <class>dispatcher/observer</class>
                    <method>associateMembership</method>
                </login_observer>
            </observers>
        </customer_login>

    </events>

</global> 
```

**观察者.php**

```
class Hatclub_MembershipHandler_Model_Observer {

    // this is hook to magento event dispatched before action is run [only allow if membership exists]
    public function associateMembership(Varien_Event_Observer $observer) {

        // event
        $event = $observer->getEvent()->getControllerAction()->getFullActionName();

        Mage::log('**** EVENT FIRED ****' . $event);

        Mage::log(json_encode($observer->getEvent()));

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T08:58:02.590

修改你`config.xml`的

```
<modules>
    <Hatclub_MembershipHandler>
        <version>1.0.0</version>
    </Hatclub_MembershipHandler>
</modules>

<global>

    <models>
        <dispatcher>
            <class>Hatclub_MembershipHandler_Model</class>
        </dispatcher>
    </models>

    <events>

        <customer_register_success>
            <observers>
                <registration_success_observer>
                    <class>Hatclub_MembershipHandler_Model_Observer</class>
                    <method>associateMembership</method>
                </registration_success_observer>
            </observers>
        </customer_register_success>

        <customer_session_init>
            <observers>
                <session_init_observer>
                    <class>Hatclub_MembershipHandler_Model_Observer</class>
                    <method>associateMembership</method>
                </session_init_observer>
            </observers>
        </customer_session_init>

        <customer_login>
            <observers>
                <login_observer>
                    <class>Hatclub_MembershipHandler_Model_Observer</class>
                    <method>associateMembership</method>
                </login_observer>
            </observers>
        </customer_login>

    </events>

</global> 
```

您提到了错误的班级名称。

# http - Task with EventMachine service

> ID：14301862
> 
> 赞同：0
> 
> 时间：2013-01-13T08:28:11.077
> 
> 标签：http, get, eventmachine

I need to resolve this task.

I need to develop a service, which delivers HTTP GET requests with guarantee using EventMachine.

*   Service has API /send? url=http%3A%2F%2Fya.ru, where url it is http request which is need to be delivered/

On every request the API responds at once 200 with body OK. After this, the service tries to deliver all requests. If answer 200 is received, then the request is considered as delivered. If the request failed, then try to repeat later.

*   Service has function /stats, which shows a diagram with 'highcharts' where we see three lines - received requests, successful requests, failed requests.

The step is 1 second. The code should be covered with tests rspec/cucumber. Is it possible if the service is not persistent, it will loose data after restart?

Any help will be greatly appreciated. I don't know where to begin. But I have some experience with building applications using RoR. I'll be pleased if someone can give me really similar task which is solved already.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T21:04:34.037

这是一个片段，可以帮助您入门。它使用`em-http-request`gem 来执行一个 GET 请求，如果在一小段延迟后返回 404 状态码，它会重试。您应该能够使用此代码作为基础来构建您所要求的内容。

```
require "eventmachine"
require "em-http"

def do_get_request(url)

  request = EM::HttpRequest.new(url).get

  request.callback do

    status = request.response_header.status

    if status == 404
      puts "Request #{url} failed with status #{status}, retrying"
      EM.add_timer(1) do
        do_get_request(url)
      end
    else
      # Process request.response
    end

  end
end

EM.run do
  do_get_request(ARGV[0])
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T10:17:19.727

您将需要持久队列，并且需要一种管理和监视异常的方法，这可能意味着 EventMachine 不是适合该工作的工具。尝试一些后台作业服务，请参阅[https://www.ruby-toolbox.com/categories/Background_Jobs](https://www.ruby-toolbox.com/categories/Background_Jobs)

如果您要执行大量简单任务和类似反应器的模式，那么 bealnstalkd 可能是要走的路，请参阅：

[http://kr.github.io/beanstalkd/](http://kr.github.io/beanstalkd/) [http://railscasts.com/episodes/243-beanstalkd-and-stalker](http://railscasts.com/episodes/243-beanstalkd-and-stalker)

# node.js - 当仅更新 1 个条目时，Meteor Reactivity 会在每个循环中重绘 Handlebars 中的每个实体

> ID：14301868
> 
> 赞同：4
> 
> 时间：2013-01-13T08:28:46.903
> 
> 标签：node.js, meteor

该应用程序部署在此处：`memoryapp.meteor.com` 源代码可在此处的 git 存储库中找到：[https ://github.com/SnappyCroissant/memoryapp](https://github.com/SnappyCroissant/memoryapp)

重置应用程序运行

```
Cards.update({}, {$set: {state: 'play'}}, {multi: true}) 
```

从控制台。

我知道让客户端访问这样的集合是很糟糕的，该应用程序还远未准备好生产我只是通过 Meteor 找到自己的方式。

`DOM`目前，每当在 Cards 中运行任何更新时，除了那些我称之为持久性的元素之外，整个重绘都会重新绘制。据我所知，元素应该只在更新时重绘，还是我误解了反应性的工作方式？

脚本中唯一真正发生的动态变化是`'state'`卡片中对象的属性正在发生变化。然而它会重绘每个属性和每个 DOM 元素，除非明确声明不这样做。

是因为它们都在一个数组中传递给模板吗？如果是这样，最好的替代方法是什么。

这个结构有点大杂烩，因为它是一种学习体验，这个问题的所有重要部分（据我所知）都存在于`client/memory.js`和`server/model.js`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T20:06:42.193

要获得 的反应式实现`#each`，您需要将`LocalCollection.Cursor`对象直接传递给`#each`. 数组不会做任何特别的事情，并且当任何元素发生更改时，整个数组都将被重做，这就是您所看到的：

换句话说，这应该做你想要的：

```
 return Cards.find({ deck_id: deck['_id'] }, {sort: {order: 1}}) 
```

这会导致额外的重新渲染：

```
 return Cards.find({ deck_id: deck['_id'] }, {sort: {order: 1}}).fetch(); 
```

# enums - Jbeahve - 转换枚举参数

> ID：14301869
> 
> 赞同：3
> 
> 时间：2013-01-13T08:28:51.687
> 
> 标签：enums, jbehave

我在我的项目中使用 jbehave。

故事：

```
Scenario: Basic new document creation
Given a user Micky Mouse
When new document created
Then document should named new document
And document status should be NEW 
```

我的代码：

```
/snip
    @Then("document status should be $status")
        public void documentStatusShouldBe(@Named("status") DocStatus status) {
            System.out.println(activeDocument.getStatus());
            assertThat(activeDocument.getStatus(), equalTo(status));
        }
/snip 
```

我的枚举：

```
public enum DocStatus {
    NEW, IN_PROGRESS, APPROVE
} 
```

当我进行测试时，我得到：

> org.jbehave.core.embedder.Embedder$RunningStoriesFailed：运行故事中的失败：ReportsCount[stories=1,storiesNotAllowed=0,storiesPending=0,scenarios=1,scenariosFailed=1,scenariosNotAllowed=0,scenariosPending=0,stepsFailed=1 ] 在 org.jbehave.core.embedder.Embedder.handleFailures(Embedder.java:265) 在 org.jbehave.core.embedder 的 org.jbehave.core.embedder.Embedder$ThrowingRunningStoriesFailed.handleFailures(Embedder.java:499)。 Embedder.generateReportsView(Embedder.java:252) at org.jbehave.core.embedder.Embedder.generateReportsView(Embedder.java:233) at org.jbehave.core.embedder.Embedder.runStoriesAsPaths(Embedder.java:212) at org .jbehave.core.junit.JUnitStory.run(JUnitStory.java:24) 在 sun.reflect.NativeMethodAccessorImpl 的 stories.DocStories.run(DocStories.java:34)。org.junit.runners 的 java.lang.reflect.Method.invoke(Unknown Source) 的 sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) 的 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 的 invoke0(Native Method)。 model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15) at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java :41) 在 org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79) 在 org.junit.runners.InvokeMethod.evaluate(InvokeMethod.java:20) 在 org.junit.runners.BlockJUnit4ClassRunner。 runChild(BlockJUnit4ClassRunner.java:71) 在 org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49) 在 org.junit.runners.ParentRunner$3.run(ParentRunner.java:193) 在 org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52) 在 org.junit.runners.ParentRunner.runChildren(ParentRunner .java:191) 在 org.junit.runners.ParentRunner.access$000(ParentRunner.java:42) 在 org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184) 在 org.junit.runners.ParentRunner。在 org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.run(JUnit4TestReference.java:50) 处运行 (ParentRunner.java:236) java:38) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)在 org.eclipse.jdt.internal.junit.runner。RemoteTestRunner.run(RemoteTestRunner.java:390) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

我在做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T11:48:00.983

您的嵌入器（通常是故事类）需要将 EnumConverter 显式添加到已知列表中：

```
configuration().useParameterConverters(
    configuration().parameterConverters().addConverters(
          new ParameterConverters.EnumConverter() ) ); 
```

JBehave 默认不添加此转换器（请参阅 ParmeterConverters.defaultConverters()）

# c++ - 将数组作为参数传递给函数

> ID：14301873
> 
> 赞同：0
> 
> 时间：2013-01-13T08:29:32.973
> 
> 标签：c++

在下面的代码中，我想通过数组输入一些记录，最后想比较字符串的记录以生成输出。没有得到比较功能的功能。请帮忙...................

```
#include <iostream> 
#include <string>
using namespace std;

int compare(string record[20], int numb1)
{
    system("pause");
    int i;
    string str, substring;
    cout<<"enter the string"<<endl;
    getline(cin, str);
    for (i=0;i<numb1;i++)
    {
        if(str == record[i])
        {
               substring = str.substr(0,2); 
        }
        break;
    }
    if (substring == 'del')
    {
             cout<<"you have a delux type"<<endl;
    }
    else if ('bas' == substring)
    {
         cout<<"you have a basics type"<<endl;
    }
    else
    {
        cout<<"invalid id"<<endl;
    }
    system("pause");
    return 0;
}

int enter_record(int n)
{
    int i;
    string rec[20];
    char choice_1;
    for(i=0;i<n1;i++)
    {
    cout<<"enter value for "<<i+1<<" record"<<endl;
    cin>> rec[i];
    }
    cout <<"\t\t\t FINAL DESIGNED PACKAGES ARE :- "<<endl;
    cout <<"\t\t\t ----------------------------"<<endl;
    for(i=0;i<n;i++)
    {
              cout<<i+1<<". "<<rec[i]<<endl;
    }         
    cout<< "\t\t\tdo you want to compare an string (y/n)"<<endl;
    if ('y' == choice_1)
    {
       compare(rec, n);
    }
    system("pause");
    return 0;
}

int main()
{
    int numb;
    cout<<"\t\t\t WELCOME TO TOUR PACKAGE CHECKING"<<endl;
    cout<<"\t\t\t --------------------------------"<<endl;
    cout<<"enter number of records you want"<<endl;
    cin>>numb;
    enter_record(numb);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:33:08.013

在 C++ 中，单个刻度用于字符。`del`不是合法字符。所以你想要`"del"`，不是`'del'`。但实际上，您应该使用比 C 样式数组更智能的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T08:34:54.877

你应该做`substring = str.substr(0,3);`而不是`str.substr(0,2);`. 记住**第二个参数是 substring 的长度**。所以如果你使用`2`, 而不是`del`, 你会得到`de`. 这就是为什么，我猜，你总是得到**“无效的 id”**。正如@David 所说，您还需要修复字符串周围的引号。

当然，您的代码还有其他问题，例如缓冲区溢出。您假设最多有 20 条记录，但我可以尝试输入 200 条...接受@chris 的建议并使用`std::vector`而不是原始字符串数组。

* * *

## 编辑

在解决上述问题之前，您也有一个逻辑错误。请参阅下面的代码段。

```
cout<< "\t\t\tdo you want to compare an string (y/n)"<<endl;
if ('y' == choice_1)
{
   compare(rec, n);
} 
```

您要求用户输入，但**您实际上并没有输入它**。因此，您正在比较可能为假的未初始化`char`对象`y`，因此永远不会调用 compare 函数。

您应该`cin>>choice_1`在`if`.

# asp.net - 删除页面的水平滚动条

> ID：14301878
> 
> 赞同：0
> 
> 时间：2013-01-13T08:29:52.740
> 
> 标签：asp.net, html, css

我有一个多控制页面。

页面中没有水平滚动条。但是当我添加 AjaxControlToolkit.Editro 或`treeview`页面时，水平滚动会自动添加到页面中。

例如，当我在页面上添加树视图时。

> $(文档).width()=11061
> 
> $(窗口).width()=1349

我为控件设置了宽度，但再次出现了水平滚动。

代码 ：

```
 <div class="row">
   <span style="width: 100px" class="rowtitle">کلمات کلیدی</span>
   <asp:TextBox ID="KeywordTextBox" Width="600px" runat="server" />
   <asp:RequiredFieldValidator Text="*" ID="KeywordRFV" runat="server" ControlToValidate="KeywordTextBox" ForeColor="Red" ValidationGroup="Save" ErrorMessage="کلمات کلیدی را وارد کنید." />
  </div>
  <div class="row" style="height: 300px">
   <span style="width: 100px" class="rowtitle">توضیحات کامل</span>
   <HTMLEditor:Editor ID="DescriptionHtmlEditor" runat="server" Height="300px" Width="80%" AutoFocus="true" />
   <asp:RequiredFieldValidator Text="*" ID="DescriptionRFV" runat="server" ControlToValidate="DescriptionHtmlEditor" ForeColor="Red" ValidationGroup="Save" ErrorMessage="توضیحات را وارد کنید ." />
   </div> 
```

树视图：

```
<table width="100%">
            <tr>
                <td style="padding: 5px; width: 40%; overflow: hidden" valign="top">
                    <asp:TreeView  ShowLines="True" ID="TreeView" runat="server" Width="200px" OnSelectedNodeChanged="TreeView_SelectedNodeChanged" LineImagesFolder="~/TreeLineImages" ExpandDepth="0">
                        <SelectedNodeStyle BackColor="#E8DFCE" />
                    </asp:TreeView>
                </td>
                <td style="width: 60%" valign="top">
                    <div class="row" style="text-align: left">
                        <asp:ImageButton ID="btncancle" runat="server" ImageUrl="~/images/btnCancel.png" OnClick="btncancle_Click" ToolTip="انصراف" />
                        <asp:ImageButton ID="btnsave" runat="server" ImageUrl="~/images/btnSave.png" OnClick="btnsave_Click" ToolTip="ذخیره" ValidationGroup="Save" />
                        <asp:ImageButton ID="btndel" OnClick="btndel_Click" OnClientClick="return confirm('آیا از حذف اطمینان دارید ؟');" runat="server" ImageUrl="~/images/btnDelete.png" ToolTip="حذف" />
                        <asp:ImageButton ID="btnedit" runat="server" ImageUrl="~/images/btnEdit.png" OnClick="btnedit_Click" ToolTip="ویرایش" />
                        <asp:ImageButton ID="btnadd" runat="server" ImageUrl="~/images/btnAdd.png" OnClick="btnadd_Click" ToolTip="جدید" />
                    </div>
                    <input type="hidden" runat="server" id="Mode" />
                    <asp:Panel ID="Panel" runat="server" Enabled="false" Style="padding: 0">
                        <div class="row">
                            <span class="rowtitle">نام</span>
                            <asp:TextBox ID="CategoryTextBox" runat="server" MaxLength="300" />
                            <asp:RequiredFieldValidator ForeColor="Red" ID="CategoryRFV" runat="server" ValidationGroup="Save" ControlToValidate="CategoryTextBox" ErrorMessage="*"></asp:RequiredFieldValidator>
                        </div>

                        <asp:Label runat="server" ID="ErrorLabel" ForeColor="Red" />
                    </asp:Panel>
                </td>
            </tr>
        </table> 
```

我在 < Body > 标签中使用了这段代码

> 溢出-x：隐藏；

删除水平滚动，但是当用户最小化窗口时，页面不显示滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T10:07:31.517

如果您找不到影响滚动的 CSS 样式，那么您可以执行以下操作：

```
// CSS
.overflow{ overflow-x:hidden; }

// Script
$(document).resize(function(){
    if($(this).width() <= y){
        $('body').addClass('overflow');
    }else{
        $('body').removeClass('overflow');
    }
}); 
```

其中 y 是不显示滚动条的最小值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-28T03:16:17.527

//CSS

```
*{
    box-sizing: border-box;
}

.boxsizing-border {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
} 
```

这将删除页面中的水平滚动条 =)

# objective-c - Obj-C：尝试发出简单的获取请求，答案总是空的

> ID：14301881
> 
> 赞同：-3
> 
> 时间：2013-01-13T08:30:12.273
> 
> 标签：objective-c

我是 Objective-c 的新手。我正在尝试执行一个简单的获取请求并获取页面内容，但响应始终为空。

这是我的代码，我在这里做错了什么？

## 主要的

```
HttpManager* pHttpManager;
pHttpManager  = [[HttpManager alloc] init];
NSURL *myURL = [pHttpManager getUrlContent:@"http://www.wikipedia.org"];
NSError* error = nil;
if(myURL) {
  NSLog(@"NSURL is valid");
  NSLog(@"absoluteString:%@",myURL.absoluteString);
  NSString *myHomePage = [NSString stringWithContentsOfURL: myURL encoding: NSASCIIStringEncoding error:&error];
  if(myHomePage) {
    NSLog(@"%@", myHomePage);
  } else {
    NSLog(@"Error = %@", error);
  }
} else {
  NSLog(@"NSURL with error");
} 
```

## HttpManager 类

```
@implementation HttpManager
-(NSURL*) getUrlContent:(NSString*) url {
  NSURL *myURL = [NSURL URLWithString:url];
  return myURL;
} 
```

## 错误：

> $ ./obj/simple_app.exe
> 2013-01-13 10:15:06.400 simple_app[7656] NSURL 有效
> 2013-01-13 10:15:06.406 simple_app[7656] absoluteString:http://www.wikipedia.org
> 2013-01-13 10:15:07.383 simple_app[7656] 无法设置阻塞模式 - 提供了无效参数。
> 2013-01-13 10:15:07.398 simple_app [7656] 错误 = NSCocoaErrorDomain 259

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:37:06.270

通常人们会这样做：

```
NSString *myHomePage = [NSString stringWithContentsOfURL: myURL
                        encoding: NSUTF8StringEncoding error:&error]; 
```

当你尝试时会发生什么？（你为什么首先使用`NSASCIIStringEncoding`？）

网页`http://www.wikipedia.org`包含无法用[ASCII 编码表示的](http://en.wikipedia.org/wiki/ASCII)[Unicode](http://en.wikipedia.org/wiki/Unicode)字符，但可以用（更现代的）[UTF-8 编码](http://en.wikipedia.org/wiki/Utf-8)表示。除非您使用非常旧的数据，否则几乎没有理由再使用 ASCII。

# c# - 在 DataGridView 中更改单元格的值

> ID：14301884
> 
> 赞同：0
> 
> 时间：2013-01-13T08:30:56.937
> 
> 标签：c#, winforms

我在 ac# windows 窗体应用程序中有一个 DataGridView。此列返回（长）值。

现在我想改变它的价值，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:36:25.313

如果您进行绑定（[C# 教程 - 将 DataGridView 绑定到集合](http://www.switchonthecode.com/tutorials/csharp-tutorial-binding-a-datagridview-to-a-collection)） - 它会自动更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T08:39:35.803

使用以下内容：

```
dataGridView.Rows[i].Cells[j].Value = value; 
```

# jquery - 如何在可拖动的 div 中获取列表项的文本？

> ID：14301886
> 
> 赞同：0
> 
> 时间：2013-01-13T08:31:08.140
> 
> 标签：jquery, jquery-ui, draggable, jquery-ui-draggable, jquery-draggable

我一直试图解决这个问题，但无济于事。

我有一个容器 div 和一个产品 div。产品是可拖动的，容器是可放置和排序的，并且只接受产品。产品是多个列表项。我在可拖动事件中使用了辅助函数来创建一个列表项，并将多个列表项附加到它，以发送到容器。但是，我真正想要的是从所有列表项中收集文本并将其全部合并到一个列表项中。我怎么做？

HTML 代码 - 产品

```
<div class="phrase product ui-draggable">
<ul>
        <li class="bit-box">Atlanta<a href="#"></a></li>
        <li class="bit-box">London<a href="#"></a></li>
        <li class="bit-box">Mumbai<a href="#"></a></li>
        <li class="bit-input"><input type="text" class="maininput" /></li>
</ul> 
```

HTML 代码 - 容器

```
<div id="container" style="border: 2px solid red; height: 400px;" class="ui-droppable ui-sortable ui-state-highlight">
<li class="containerproduct">Rio</li>
<li class="containerproduct">Santiago</li>
<li class="containerproduct">Atlanta London Mumbai</li> 
```

最后一项是对应产品拖到容器中时容器应该有的东西。

查询

```
 $(".product").draggable({
    helper: function (e,ui) {
        return $("<li class=\"containerproduct\">asd</li>").append($(this).find('.bit-box').clone().removeClass());
    },
    axis: 'y',
    revert : true
    }); 
```

现在，它都保存为列表项，[即全部在单独的行中](http://i.imgur.com/OF2Tv.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:37:30.313

我使用解决了这个问题

*   first()，我用来克隆列表项，以及
*   each()，我用来遍历位框列表项以获取它们的文本

有点附加，我们回家了:)

```
 $(".product").draggable({
                distance: 10,
                cursor: "move",
                helper: function (e, ui) {
                    var newListItem = $(this).find('.bit-box').first().clone().removeClass().addClass("ui-state-default");
                    var fullCommand = "";
                    $(this).find('.bit-box').each(function( index ) {
                        fullCommand += $(this).text() + " ";
                    });

                    newListItem.text(fullCommand);
                    return (newListItem);
                },
                revert : true
                }); 
```

# php - 查找具有特定字符串的文件

> ID：14301895
> 
> 赞同：5
> 
> 时间：2013-01-13T08:33:21.317
> 
> 标签：php, windows, unix

我在这里是一个真正的菜鸟。我想知道是否有人可以给我一段代码，它将查找某个目录中的所有文件以及该目录的子目录以及用户指定的字符串。如果可能限制要搜索的文件类型，例如`*.php`

我有 99% 可能使用`RecursiveDirectoryIterator`，`preg_match`或者`GLOB`但我对 php 真的很陌生，并且对这些功能几乎一无所知。

这种代码当然很容易用`UNIX`命令来完成，但 PHP 我有点卡住了（需要 PHP 而不是 unix 解决方案）。将不胜感激我能从你们那里得到的一切帮助！

编辑：似乎我可能让你们中的一些人感到困惑。我希望该字符串位于文件内部而不是文件名中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-13T08:44:20.843

你可以很容易地做到这一点。

```
// string to search in a filename.
$searchString = 'myFile';

// all files in my/dir with the extension 
// .php 
$files = glob('my/dir/*.php');

// array populated with files found 
// containing the search string.
$filesFound = array();

// iterate through the files and determine 
// if the filename contains the search string.
foreach($files as $file) {
    $name = pathinfo($file, PATHINFO_FILENAME);

    // determines if the search string is in the filename.
    if(strpos(strtolower($name), strtolower($searchString))) {
         $filesFound[] = $file;
    } 
}

// output the results.
print_r($filesFound); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T09:22:17.927

仅在 FreeBSD 上测试...

`string`在传递目录的所有文件中查找（仅限*nix）：

```
<?php

$searchDir = './';
$searchString = 'a test';

$result = shell_exec('grep -Ri "'.$searchString.'" '.$searchDir);

echo '<pre>'.$result.'</pre>';

?> 
```

仅使用 PHP 在传递的目录中查找`string`所有文件（不推荐在大量文件中使用）：

```
<?php

$searchDir = './';
$searchExtList = array('.php','.html');
$searchString = 'a test';

$allFiles = everythingFrom($searchDir,$searchExtList,$searchString);

var_dump($allFiles);

function everythingFrom($baseDir,$extList,$searchStr) {
    $ob = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($baseDir), RecursiveIteratorIterator::SELF_FIRST);
    foreach($ob as $name => $object){
        if (is_file($name)) {
            foreach($extList as $k => $ext) {
                if (substr($name,(strlen($ext) * -1)) == $ext) {
                    $tmp = file_get_contents($name);
                    if (strpos($tmp,$searchStr) !== false) {
                        $files[] = $name;
                    }
                }
            }
        }
    }
    return $files;
}
?> 
```

编辑：基于更多细节的更正。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-01T16:02:23.017

我找到了一个小文件来搜索文件夹中的字符串：

[从](https://github.com/skfaisal93/AnyWhereInFiles)这里下载文件。

# javascript - 使用原始 javascript 在 DOM 中通过其类属性查找元素而不使用 id

> ID：14301896
> 
> 赞同：1
> 
> 时间：2013-01-13T08:33:43.317
> 
> 标签：javascript, jquery, class

行。突然，我的脑海里出现了这个疑问。

像**jQuery**这样的库使得查找具有一些`class`. 它不会强迫我们对`id`要找到的元素应用 an 。`getElementById()`在 Vanilla js 中，我们可以选择使用强制我在很大程度上应用 ID的方法来查找元素。

我查看了这个[解决方案](http://snipplr.com/view/1853/get-elements-by-attribute/)来查找使用属性的元素，在这种情况下将是`class`. 经过解决方案后，我发现它在浏览器上非常繁重。如果我有一个复杂的 DOM 结构，它会成本性能。我的问题还是一样。

如何在 Vanilla Javascript 中使用`class name`和不使用来查找元素？`id`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T08:37:53.543

怎么样

```
var elems = document.getElementsByClassName('someclass'); 
```

这将返回一组具有给定类的元素。然后您可以使用 访问它们`elems[0]`，`elems[1]`依此类推..

请记住，jQuery 最终是基于 JavaScript 的，因此从执行的角度来看，它不可能更快。

你可能会在这里找到一些有趣的 jQuery 到 JavaScript 的翻译

[http://vanilla-js.com/](http://vanilla-js.com/)

对于旧版本的 IE，您需要使用`getElementsByTagName`并循环返回的元素。此实用程序功能应该[从 IE6 开始兼容](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName#Browser_Compatibility)（可能类似于您链接到的解决方案）

```
function getElementsByAttributeValue(atrName,atrValue) {
    var matchElems = [];

    var allElems = document.getElementsByTagName('*');
    for(var x = 0, len = allElems.length; x < len; x++) {
        if(allElems[x].getAttribute(atrName) != atrValue) {
            continue;
        }

        matchElems.push(allElems[x]);
    }

    return matchElems;
} 
```

用法是：

```
var elems = getElementsByAttributeValue("class","someclass"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T09:59:22.963

`document.getElementByClassName('testclass');`将为您提供带有 testclass 的元素，您也可以使用`document.getElementsByTagName('img');`它将为您提供 img 元素。

# c++ - 如何声明“静态”类/枚举？

> ID：14301898
> 
> 赞同：3
> 
> 时间：2013-01-13T08:33:59.057
> 
> 标签：c++

有没有办法强制类/枚举只能在同一个文件中访问，类似于静态函数/变量的行为方式？

```
// free-floating static function
// basically I want similar access restrictions on helper-type classes/enums
static void func(void)
{
}

// this is a compiler error
static class A
{
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T08:37:49.063

在**Unnamed 命名空间**中声明的类是您想要的：

```
namespace
{

class SomeClass { };

} 
```

这将被编译器以这样一种方式命名为 mangled，即它在该翻译单元之外是不可访问的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-13T08:34:52.160

只需在**[Unnamed namespace](http://msdn.microsoft.com/en-us/library/yct4x9k5%28v=vs.80%29.aspx)**中声明它们。

请注意，`static`将变量的范围限制在同一*翻译单元*中的用法受到以下事实的限制：它只能应用于变量声明和函数，而**不能应用于用户定义的类型**。

未命名的命名空间消除了这个缺点，并允许您在同一翻译单元的范围内定义用户定义的类型。

来自链接的 MSDN：

> 未命名的命名空间是变量静态声明的更好替代品。它们允许变量和函数在整个翻译单元内可见，但在外部不可见。**尽管未命名命名空间中的实体可能具有外部链接，但它们有效地由其翻译单元唯一的名称限定，因此永远无法从任何其他翻译单元看到。**

# c++ - 链接@_Znam 和@_Znwm

> ID：14301899
> 
> 赞同：3
> 
> 时间：2013-01-13T08:34:03.203
> 
> 标签：c++, llvm, std

我是 C++ 编程新手，目前正在从事`llvm`前端开发项目。当我链接 llc 创建的目标文件时，我的链接器找不到以下函数。我知道这些是标准的 c++ 库函数，但使用`-lstdc++`不起作用。现在我的问题是，这些函数是在哪里定义的，如何将它们与我的目标文件链接起来，实际上它们是做什么的？

```
declare noalias i8* @_Znam(i64)

declare noalias i8* @_Znwm(i64) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T06:07:08.533

这些函数是标准 C++ 库函数，尤其`operator new[](unsigned long)`是`operator new(unsigned long)`. 它们应该由您的 C++ 运行时库提供。根据您使用的编译器，这将是 libsupc++ 或 libc++abi 或 libcxxrt。

# c - 在 C 中使用旧式函数定义在 MinGW 编译器中给出错误

> ID：14301901
> 
> 赞同：1
> 
> 时间：2013-01-13T08:34:14.190
> 
> 标签：c, function, dev-c++

我正在研究 dwayne phillips 的 C 图像处理，并使用它的源代码来了解图像处理的基础知识。源代码中的所有函数都以我通常使用的不同风格给出

在这里，我给出了源代码中给出的普通函数。我使用带有`minGW`编译器的 dev c++ 来编译具有该函数的代码

```
edm8(in_name, out_name, the_image, out_image,
                  il, ie, ll, le, value)
           char   in_name[], out_name[];
           int    il, ie, ll, le;
           short  the_image[ROWS][COLS],
                  out_image[ROWS][COLS],
                  value;
        {
       int    a, b, count, i, j, k;

       create_file_if_needed(in_name, out_name, out_image);

       read_tiff_image(in_name, the_image, il, ie, ll, le);

       for(i=0; i<ROWS; i++)
          for(j=0; j<COLS; j++)
             out_image[i][j] = 0;

          /***************************
          *
          *   Loop over image array
          *
          ****************************/

       printf("\n");

       for(i=0; i<ROWS; i++){
          if( (i%10) == 0) printf("%3d", i);
          for(j=0; j<COLS; j++){
             if(the_image[i][j] == value)
                out_image[i][j] = distance_8(the_image, i, j, value);
          }  /* ends loop over j */
       }  /* ends loop over i */

       write_array_into_tiff_image(out_name, out_image,
                                   il, ie, ll, le);

    }  /* ends edm8 */ 
```

现在当我编译像上面这样的任何函数时，我得到了这两个错误

```
 [Error] expected constructor, destructor, or type conversion before '(' token  
 [Error] expected unqualified-id before '{' token in 
```

我无法追踪、调试和理解他们产生的原因？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T08:42:53.907

以下消息：[错误] '(' 标记之前的预期构造函数、析构函数或类型转换

让我认为您实际上是在 C++ 中编译，而不是在 C 中。

通过在您的环境中设置正确的构建选项，仔细检查您是否真的使用 C 而不是 C++ 进行编译。即使文件具有 .c 扩展名，许多 IDE 默认编译和 C++。

# .net - 带有 Twitter Bootstrap 模板的 HTML5 样板

> ID：14301902
> 
> 赞同：1
> 
> 时间：2013-01-13T08:34:28.030
> 
> 标签：.net, asp.net-mvc-3, twitter-bootstrap, html5boilerplate

我对这个模板世界有很多问题。我觉得这是解决我的问题的正确地方。

**Q 1.**我已经为我的 ASP.Net MVC 3 项目安装了`HTML5`Boilerplate ( `H5BT`) 默认模板。那么我需要为我的应用程序找到模板。我需要选择这样做。是否有任何 H5BT 模板集合? 如果它在那里，请放一个链接。

**Q 2.**为我的 mvc 3 应用程序安装默认模板后`H5BT`，我可以在我的应用程序中使用任何引导模板 ( `BST`)。?

**Q 3.**我看到有很多按钮、脚手架和很多 UI 组件存在，`BST`但是我怎样才能找到这样的集合`H5BT`呢？如果它在那里，请放那个链接。

**Q 4.**这与**Q 3**有关。也就是说，我可以使用带有我的 mvc 3 应用程序安装的默认模板的`BST`组件（按钮等）吗？`H5BT`?

**Q 5.**我仍然有机会为我的应用程序选择预构建模板。那么你应该为我建议哪个。`H5BT`或者`BST`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T05:42:51.413

1.  HTML5 Boilerplate 与模板无关，它是一个干净的板，您可以在上面放置任何需要的东西。

2.  是的，您可以在 Boilerplate 之上使用 Bootstrap。检查此链接 - Initializr 将两者无缝结合。- [http://www.initializr.com/](http://www.initializr.com/)

3.  同样，我不知道并且认为这样的模板会在那里。您始终可以使用可用于 Bootstrap 的模板 - [http://bootswatch.com/#gallery](http://bootswatch.com/#gallery)

这些将自动回答您的 q4 和 q5 :)

# cuda - Kepler 上的 CUDA 5.x、动态内核执行和最大递归“深度”

> ID：14301903
> 
> 赞同：1
> 
> 时间：2013-01-13T08:34:33.113
> 
> 标签：cuda

在 CUDA 5 编程指南中，如下所述：

> 发布可能会持续到 24 代的深度，但这个深度通常会受到 GPU 上可用资源的限制

我的问题如下：

*   GPU 上的 CUDA 运行时是否保证始终可以达到 24 的深度，并且在某些情况下甚至可能超过 24（案例 A）？还是他们的意思是 24 是绝对最大限制，并且在运行时可能确实无法达到这个数字（案例 B）？

*   如果是情况 B，当内核在 GPU 上启动并且没有足够的资源时会发生什么？发射失败了吗？（如果是这种情况很奇怪！）

我计划编写一个 CUDA 程序，我想从 Kepler 架构中受益。我的算法通常绝对需要 15-19 级别的函数递归（递归级别绑定到我的数据结构）。

参考：[TechBrief_Dynamic_Parallelism_in_CUDA_v2.pdf](https://developer.nvidia.com/sites/default/files/akamai/cuda/docs/TechBrief_Dynamic_Parallelism_in_CUDA_v2.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:07:26.247

CUDA 不保证会实现递归深度 1 - 与传统操作系统不保证启动新进程/线程会成功类似。例如，如果您有以下程序：

```
int main() {
    pid_t pid;
    while (pid = fork ());
    while (true) {
        dummy<<<1, 1024>>> ();
    }
}

__global void dummy() {} 
```

在某些时候某些事情会失败——要么你将耗尽 CPU 或 GPU 内存。在 GPU 上以类似的方式，它可能会失败（返回错误 - CUDA 或 fork 将返回 -1）。

另一种看待它的方式是，在最坏的情况下，每次启动都可以有`(2^31-1)^2*(2^10-1) ≃ 2^72`每个带有线程的块。`2^10`即在单次启动中你可以有`2^82`线程。现在每个递归都是指数级的，因此即使在最坏的情况下启动后终止线程，它也需要保证调度`2^1968`线程。如果每个线程的状态是 1/32 位，无论是否完成扭曲，它都需要`2^1945`GiB 的内存（这“略”多于观察到的宇宙的信息容量 - 即`2^1595`多倍）。

因此，它肯定是案例 B，并且不可能是案例 A（扭曲状态必须至少包括指令指针）。根据分支因子，如果您同步，您的算法可能可以实现 15-19 的递归深度。

**编辑**：如果您的意思是普通递归而不是递归启动，那么实际上它受到堆栈的限制。根据确切的代码，它在 Fermi+ 上实际上可能是无限的（特斯拉一代不支持递归 IIRC）。同样，没有保证的最小深度——在堆栈/本地内存上分配大数组，你会用完空间（优化器很好地摆脱了它）。

# php - 在mysql中按类别顺序显示0值，并在另一个循环中发送和扣除这个值

> ID：14301904
> 
> 赞同：-1
> 
> 时间：2013-01-13T08:34:36.317
> 
> 标签：php, mysql

大家好，我想在一个循环中搜索 n/a 值，包括 0 值，并在另一个循环中发送该值与类别。我的代码是

```
$i=0;   
$j=0;   
$newcount=$db->get_results("SELECT s2.qcategory, s1.id, count(s1.na) as na_count FROM (select distinct `qcategory` from store) s2  left join store s1  on  s1.`qcategory` = s2.`qcategory` and s1.survey_name='$userID' and s1.dateone='$dateVal' and s1.branch='$branch'  and s1.`na` = '1' group by 1 order by s1.id ");
    if($newcount)

    foreach($newcount as $sqcount)
    {
    $arval[$j]=$sqcount->na_count;
    $j++;   
    }

$newqcat=$db->get_results("SELECT count(id) as r_count, sum(point) as point_value,dateone, na, qcategory FROM store where survey_name='$userID' and dateone='$dateVal' and branch='$branch' group by qcategory order by id");

if($newqcat)
    {
    foreach($newqcat as $sqcat1)
            {
      echo  $sqcat1->qcategory?></a>
        $vv1=$arval[$i];
        $tcount_val1=$sqcat1->r_count-$vv1;
        $rowval=$sqcat1->qcategory;
        $per=($sqcat1->point_value*100)/($tcount_val1*5);
}

} 
```

我想计算每个类别的不适用值，例如

```
**First impression - 3
    Quality and value -0 
    Overall impression and ambiance - 1** 
```

并在另一个循环中扣除每个 n/a 值

任何人都可以帮助我如何做到这一点？我用数组试过了，但它不能正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:04:34.413

```
$newqcat=$db->get_results("SELECT count(id) as r_count, sum(point) as point_value,dateone, na, qcategory FROM store where survey_name like '%$userID%' and dateone='$dateVal' and branch='$branch' group by qcategory order by id");
    if($newqcat)
    {
    foreach($newqcat as $sqcat1)
            {

    $newcount1=$db->get_row("SELECT s2.qcategory, s1.id, count(s1.na) as na_count FROM (select distinct `qcategory` from store where qcategory='$sqcat1->qcategory' and dateone='$dateVal' and branch='$branch') s2  left join store s1  on  s1.`qcategory` = s2.`qcategory` and s1.`na` = '1' and  s1.branch='$branch' and s1.dateone='$dateVal' and s1.survey_name='$userID' group by qcategory " );

$tcount_val1=$sqcat1->r_count-$newcount1->na_count;

    $rowval=$sqcat1->qcategory; 
    $per=($sqcat1->point_value*100)/($tcount_val1*5);
    echo "<td align=center valign=center>".round($per)."%</td></tr>";

}

} 
```

# php - scandir 显示错误的结果

> ID：14301911
> 
> 赞同：0
> 
> 时间：2013-01-13T08:36:06.617
> 
> 标签：php, scandir

我的代码：

```
if ($d = opendir('.')) {
       while (($file = readdir($d)) !== false) {
            if ( $file != "."  && $file != ".." ){
                echo "filename: $file \n";
                $files[]=$file;
            }
       }
    closedir($d);
} 
```

输出：

> ```
> filename: audio_files
> filename: backup_files
> filename: compressed_files
> filename: database_files
> filename: data_files
> filename: developer_files
> filename: disk_image_files
> filename: executable_files
> filename: font_files
> filename: genstats.php
> filename: raster_image_files
> filename: spreadsheet_files
> filename: text_files
> filename: text_filesdesktop__dup.ini
> filename: video_files
> filename: web_files 
> ```

而`text_filesdesktop__dup.ini`甚至不存在。

> ```
> C:\Users\Steve\Desktop\Files>del text_filesdesktop__dup.ini
> Could Not Find C:\Users\Steve\Desktop\Files\text_filesdesktop__dup.ini 
> ```

我试过使用`scandir()`，删除文件并重新创建它等，但无济于事。我根本无法让那个 .ini 文件消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:18:34.547

可能是您的目录中有隐藏文件

您使用的是什么平台，Windows 或 Linux，

如果您只想排除以点开头的文件，“。”，

试试这个：

```
$files = readdir('/path/to/folder');
$files = array_filter($files, create_function('$a','return ($a[0]!=".");')); 
```

上面的函数只返回文件，chich 不是以 .

但是在 Windows 上隐藏文件的工作方式不同，我不知道如何使用它。

# python - 按对象将熊猫分组转换为多索引数据框

> ID：14301913
> 
> 赞同：19
> 
> 时间：2013-01-13T08:36:21.320
> 
> 标签：python, group-by, dataframe, pandas, multi-index

如果我有以下数据框

```
>>> df = pd.DataFrame({'Name': ['Bob'] * 3 + ['Alice'] * 3, \
'Destination': ['Athens', 'Rome'] * 3, 'Length': np.random.randint(1, 6, 6)}) 
>>> df    
  Destination  Length   Name
0      Athens       3    Bob
1        Rome       5    Bob
2      Athens       2    Bob
3        Rome       1  Alice
4      Athens       3  Alice
5        Rome       5  Alice 
```

我可以按名称和目的地...

```
>>> grouped = df.groupby(['Name', 'Destination'])
>>> for nm, gp in grouped:
>>>     print nm
>>>     print gp
('Alice', 'Athens')
  Destination  Length   Name
4      Athens       3  Alice
('Alice', 'Rome')
  Destination  Length   Name
3        Rome       1  Alice
5        Rome       5  Alice
('Bob', 'Athens')
  Destination  Length Name
0      Athens       3  Bob
2      Athens       2  Bob
('Bob', 'Rome')
  Destination  Length Name
1        Rome       5  Bob 
```

但我想要一个新的多索引数据框，看起来像

```
 Length
Alice   Athens       3
        Rome         1
        Rome         5
Bob     Athens       3
        Athens       2
        Rome         5 
```

似乎应该有一种方法来`Dataframe(grouped)`获取我的多索引数据帧，但我得到了一个`PandasError`（“数据帧构造函数未正确调用！”）。

得到这个最简单的方法是什么？另外，任何人都知道是否会有将 groupby 对象传递给构造函数的选项，或者我只是做错了吗？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-13T18:51:30.860

由于您没有聚合类似索引的行，因此请尝试使用列名列表设置索引。

```
In [2]: df.set_index(['Name', 'Destination'])
Out[2]: 
                   Length
Name  Destination        
Bob   Athens            3
      Rome              5
      Athens            2
Alice Rome              1
      Athens            3
      Rome              5 
```

# version-control - 如何知道谁代表另一个用户签到（使用 /author）

> ID：14301922
> 
> 赞同：5
> 
> 时间：2013-01-13T08:37:16.253
> 
> 标签：version-control, tfs

在 TFS2010 中，可以代表另一个用户签入（假设他有权这样做）：

```
> tf.exe checkin (...) /author:OtherUser 
```

签入历史将 OtherUser 显示为进行签入的用户：

```
> tf history (...) /noprompt
Changeset User              Date       Comment
--------- ----------------- ---------- -----------
1234      OtherUser         (...) 
```

我发现一篇[博客文章](http://blogs.msdn.com/b/buckh/archive/2006/03/20/checkin.aspx)说“*您的用户名和其他用户都记录在变更集数据中，以便您始终可以确定谁签入了更改*”。我认为它记录在[Changeset](http://msdn.microsoft.com/en-US/library/microsoft.teamfoundation.versioncontrol.client.changeset_properties%28v=vs.80%29.aspx) .Commiter vs ChangeSet.Owner 中，但`tf history`或者`tf changeset`不显示。

是否有一些显示此信息的 UI/工具？

[编辑] 注意：似乎 Commiter 可能意味着 2 个不同的东西：

1.  代表 OtherUser 签入的用户，使用`tf checkin /author`.
2.  运行门控签入的用户（机器帐户或构建用户）。

如果有人`tf checkin /author`进入门控签到，则意味着 1 赢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:08:44.873

您是对的，涉及两个不同的用户。

1.  [`Changeset.Committer`](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.changeset.committer.aspx)- 实际执行签到的用户（即通过服务器身份验证的用户）
2.  [`Changeset.Owner`](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.changeset.owner.aspx)- 代表执行签到的用户（即指定为`/author:OtherUser`）

Visual Studio UI 不会显示涉及的两个不同用户。它只会显示所有者/作者。（这是有道理的，因为提交者很少会有所不同）

如果您想查看这两个用户，可以使用以下命令行，使用 /noprompt 开关强制输出到控制台：

```
C:\code>tf changeset 1234 /noprompt
Changeset: 1234
User: ChangesetOwnerOrAuthorUser
Checked in by: ChangesetCommitterUser
Date: Friday, 1 February 2013 12:00:00 PM

Comment:

Items:
  edit $/project/test/test.txt 
```

# nhibernate-mapping - 每个类的表 nhibernate 映射用于继承。如何？

> ID：14301923
> 
> 赞同：0
> 
> 时间：2013-01-13T08:37:17.480
> 
> 标签：nhibernate-mapping

我经历了几个 NHibernate 映射教程，但这部分对我来说似乎有点复杂。我在ayende 的网站上发现了一个使用超类中的区分值来解释每个类的表。就我而言，我没有使用区分值。

我怎样才能映射这个？

我有一个类似于以下的类结构。

![在此处输入图像描述](../Images/0bd54b3cb1b307624161a84b419a2afd.png)

“Student”和“Teacher”类都继承自“Person”抽象类。我需要每个类都应该映射到一个表而不使用超类中的区分值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:44:58.010

假设有三个表：`PersonTable`, `StudentTable`, `TeacherTable`。我们可以使用

*   [8.1.2\. 每个子类的表](http://nhforge.org/doc/nh/en/index.html#inheritance-tablepersubclass)

映射到*PersonTable*的基类将包含通用属性，并已`ID`生成。*StudentTable*和*TeacherTable*将提供来自父母的 ID

```
<class name="Person" table="PersonTable" abstract="true">
  <id name="PID" type="Int32" column="PersonId">
    <generator class="native"/>
  </id>

  <!-- common properties of a Person -->
  <property name="FirstName" />
  <property name="LastName" />
  <property name="DOB" />
  <property name="Gender" />

    <!-- Student and its own table -->
    <joined-subclass name="Student" table="StudentTable">
      <key column="SutdentID"/> <!-- Filled with PersonId value from a base -->
      <property name="Grade" />
    </joined-subclass>

    <!-- Teacher and its own table -->
    <joined-subclass name="Teacher" table="TeacherTable">
      <key column="TeacherId"/><!-- Filled with PersonId value from a base -->
      <property name="Subjects" />
    </joined-subclass>    
</class> 
```

现在我们每个超类和子类都有表，没有鉴别器

# java - 在 w/java 的字符串中查找子字符串

> ID：14301932
> 
> 赞同：0
> 
> 时间：2013-01-13T08:38:14.240
> 
> 标签：java, string, substring

如何在字符串中找到多个子字符串？让我们将其与基因测序进行比较。你有一个字符串：TTCGAGATGCTGATTGACATGTTAGTAG。我已经弄清楚如何仅使用 TGA 找到我的序列的开头（ATG 是起点）和序列的结尾。我不知道如何为 TAA 和 TGA 重复该过程。是否可以让我的代码行中的所有 3 个子字符串都在寻找我的终点？

```
String genome = input.nextLine();
    //first check: see if the genome contains the marker "ATG"  
    if (genome.contains("atg")){
    //if the genome contains "ATG" marker, begin second test: see if the   genome contains the marker "TAG"
    if (genome.contains("tag")) 
```

我正在使用嵌套的 if 语句，并尝试在上面的代码行中添加一些东西，但一无所获！我知道我可以复制/粘贴和更改参数，但如果该行中有多个序列，我无法弄清楚那个。我想从上面的字符串中得到的是： TTCGAG*ATG* **C** *TGA*TTGAC*ATG* **T** *TAG*TAG 我可以打印**C**，但不能打印到**T**。一旦找到第一个子字符串“ **C** ” ，我的程序就会停止运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:09:01.273

您可以使用正则表达式，对于序列 ATG...TGA，您可以尝试，

```
String input = "TTCGAGATGCTGATTGACATGTTAGTAG";
Pattern pattern  = Pattern.compile("ATG(.*?)TGA");
Matcher matcher = pattern.matcher(input);
while (matcher.find()) {
    System.out.println(matcher.group(1));
} 
```

你会得到'C'。

如果您想在发布的问题中获得“T”，您可以将正则表达式更改为 ATG(.*?)TAG，因为前缀和后缀明显不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T08:47:36.500

我不确定我是否理解了这个问题，但也许这与您正在寻找的内容很接近。

```
String getSubstringBetween(String start, String[] ends) {
    int indexOfStart = genome.indexOf(start);
    if(indexOfStart >= 0) {
       int indexOfEnd = -1;
       int i = 0;
       while(i < ends.length() && indexOfEnd < 0) {
          indexOfEnd = genome.indexOf(ends[i++], indexOfStart);
       }
       if(indexOfEnd >= 0) {
          String end = ends[i - 1];
          return genome.substring(indexOfStart, indexOfEnd + end.length());
       } else {
          return genome.substring(indexOfStart);
       }
    }
    return "";
} 
```

# jquery - fn.toggle(handler(eventObject), handler(eventObject)...) 去哪儿了？

> ID：14301935
> 
> 赞同：21
> 
> 时间：2013-01-13T08:38:25.600
> 
> 标签：jquery, deprecated

我有[这个jsfiddle](http://jsfiddle.net/mplungjan/eQZp4/)

它使用[切换事件](http://api.jquery.com/toggle-event/)- 不要与[切换](http://api.jquery.com/toggle/)混淆- jQuery 版本设置为**EDGE**

它突然停止工作并删除了我想要作为触发器的单元格，因为它显然恢复为[toggle](http://api.jquery.com/toggle/)。

我找不到任何弃用标签等

[http://api.jquery.com/category/deprecated/](http://api.jquery.com/category/deprecated/)给出 404

如果我添加[Migrate](https://github.com/jquery/jquery-migrate)模块，我的[jsFiddle 就会工作](http://jsfiddle.net/mplungjan/cBgtn/)，我会在控制台中看到警告（由 Frédéric Hamidi 发布的[https://github.com/jquery/jquery-migrate/blob/master/warnings.md详细阐述）](https://github.com/jquery/jquery-migrate/blob/master/warnings.md)

我看到了[Deprecate fn toggle](https://github.com/jquery/jquery/pull/970)和[issue 24](https://github.com/jquery/2012-dev-summit/issues/24)和[Ticket #11786](http://bugs.jquery.com/ticket/11786)，但在我希望看到的地方没有。

我错过了什么，我在哪里可以找到它的替代品和文档？

注意：我了解弃用的原因，我只是找不到弃用的*官方*文档

```
$('#tbl .xx').toggle(
  function() {
    $(this).siblings().each(function(){
      var t = $(this).text();
      $(this).html($('<input />',{'value' : t}));
    });
  },
  function() {
    $(this).siblings().each(function(){
      var inp = $(this).find('input');
      if (inp.length){
        $(this).text(inp.val());
      }
    });
  }    
); 
```

迁移中的代码：

```
jQuery.fn.toggle = function( fn, fn2 ) {
  // Don't mess with animation or css toggles
  if ( !jQuery.isFunction( fn ) || !jQuery.isFunction( fn2 ) ) {
    return oldToggle.apply( this, arguments );
  }
  migrateWarn("jQuery.fn.toggle(handler, handler...) is deprecated");
  // Save reference to arguments for access in closure
  var args = arguments,
  guid = fn.guid || jQuery.guid++,
  i = 0,
  toggler = function( event ) {
    // Figure out which function to execute
    var lastToggle = ( jQuery._data( this, "lastToggle" + fn.guid ) || 0 ) % i;
    jQuery._data( this, "lastToggle" + fn.guid, lastToggle + 1 );
    // Make sure that clicks stop
    event.preventDefault();
    // and execute the function
    return args[ lastToggle ].apply( this, arguments ) || false;
  };
  // link all the functions, so any of them can unbind this click handler
  toggler.guid = guid;
  while ( i < args.length ) {
    args[ i++ ].guid = guid;
  }
  return this.click( toggler );
}; 
```

**更新**我问他们是否可以将代码保留为 fn.toggler 所以它是重命名而不是删除

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-08-06T00:14:37.880

jquery .toggle() 的弃用现在记录在[api.jquery.com](http://api.jquery.com/toggle-event/)。我在我现在使用的[forum.jquery](http://forum.jquery.com/topic/beginner-function-toggle-deprecated-what-to-use-instead "论坛.jquery")找到了一个很好的替代品。它工作得很好:)

```
$.fn.toggleClick = function() {
  var functions = arguments,
      iteration = 0;
  return this.click(function() {
    functions[iteration].call();
    iteration = (iteration + 1) % functions.length;
  });
} 
```

用法：

```
$("#target").toggleClick(function() {
  alert( "First handler for .toggle() called." );
}, function() {
  alert( "Second handler for .toggle() called." );
}); 
```

2014 年 8 月 6 日编辑：我重新考虑了原始代码，发现 .apply 不适合使用。将其更改为 .call 且未传入任何参数。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-13T10:05:28.367

[您可以在 jQuery Migrate 插件发出的警告列表中找到有关](https://github.com/jquery/jquery-migrate/blob/master/warnings.md)[`toggle()`弃用](https://github.com/jquery/jquery-migrate/blob/master/warnings.md#jqmigrate-jqueryfntogglehandler-handler-is-deprecated)的官方文档：

> **JQMIGRATE：不推荐使用 jQuery.fn.toggle(handler, handler...)**
> 
> **原因：**该方法有两种完全不同的含义`.toggle()` 。显示或隐藏元素的使用`.toggle()`不受影响。在 1.8 中已弃用`.toggle()`作为专用点击处理程序的使用，并在 1.9 中删除。
> 
> **解决方案：**重写依赖的代码`$().toggle()`，使用 jQuery Migrate 插件的缩小生产版本提供功能，或者`$().toggle()`从插件源中提取方法并在应用程序中使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T14:34:26.117

jQuery 1.9 还不是最终版本。根据升级指南：

“目前，本指南作为标准 jQuery API 文档的附录，这些页面可能无法描述 1.9 版的行为。请耐心等待我们更新 api.jquery.com 上各个页面的文档以反映1.9 的变化。”

在这种情况下，我们只是还没有记录它。你们这样的人比我们快！请在此处提交文档票：http: [//github.com/jquery/api.jquery.com](http://github.com/jquery/api.jquery.com)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-22T21:35:55.843

我使用的代码：

```
$('#example').click(function()
    {
    isClicked=$(this).data('clicked');
    if (isClicked) {isClicked=false;} else {isClicked=true;}
    $(this).data('clicked',isClicked);

    if(isClicked)
        {
        ...do stuff...
        }
    else
        {
        ...do stuff...
        }
    }); 
```

* * *

优化后的代码（mplungjan 建议）是：

```
$('#example').click(function()
    {
    $(this).data('clicked',!$(this).data('clicked'));

    if ($(this).data('clicked'))
        {
        ...do stuff...
        }
    else
        {
        ...do stuff...
        }
    }); 
```

# google-app-engine - Google App Engine Datastore：如果父键未知，如何通过 ID/名称获取实体？

> ID：14301936
> 
> 赞同：24
> 
> 时间：2013-01-13T08:38:42.910
> 
> 标签：google-app-engine, google-cloud-datastore

有两种实体：User 和 Trip。用户是 Trip 的父级，而 Trip 是 User 的子级。

出于隐私考虑，我只发布旅行 ID/名称。因为它看起来像旅行密钥包含编码的用户 ID/名称。

如果父键未知，如何通过 ID/名称获取实体？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-13T10:36:39.883

你不能。父键是实体键的一部分，您需要一个完整的键来获取实体。

[除非您指定祖先键，否则使用键过滤器查询](https://cloud.google.com/appengine/docs/java/datastore/queries#Java_Key_filters)也不会找到具有父级的实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T06:49:42.453

如果您在“根”实体下创建所有“用户”实体并向“旅行”实体添加“uuid”属性，则可以查找具有指定 UUID 的单个“旅行”。

```
Filter uuidFilter = new FilterPredicate("uuid", FilterOperator.EQUAL, uuid.toString());
Query q = new Query("Trip").setAncestor(root.getKey()).setFilter(uuidFilter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:01:24.593

@peter-knego 在最初的问题中：用户是 Trip 的父母。要通过 id 获取实体，您需要使用父项重建密钥以获取完整密钥。但是您可以避免这种情况，只需为 Trip 的完整密钥分配 id。您可以使用分配的 id 构造完整的密钥。这是我的逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-29T18:54:08.070

你可以这样做：

```
public Entity GetEntity(String kind, String idName) 
        throws EntityNotFoundException{
    Key key = KeyFactory.createKey(kind, Long.parseLong(idName));
    return datastore.get(key);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-03T23:35:59.463

我制定了 3 个可以解决此问题的替代方案，恕我直言，这是一个非常重要的替代方案。

**---- 第一种选择 ----**

如果您的行程 ID 是根据其他属性计算的，则有一种方法。而不是`Trip`通过`id`它从其他计算属性中获取它。让我们想象一下，您的 Trip 的 id 是由某个规范名称（您从其完整标题推断出的 URN）计算得出的，例如，如果 Trip 的全名是

> 珠穆朗玛峰之旅

您的规范名称可能是`voyage-to-the-everest`，这是您用作密钥名称的字符串。因此，不要使用 use 获取元素`datastore.get`：

```
@Override
public Optional<Trip> findById(String tripCanonicalName) {
   StructuredQuery.PropertyFilter eqTripCanonicalName = StructuredQuery.PropertyFilter
                    .eq("canonicalName", tripCanonicalName);

   EntityQuery query = Query.newEntityQueryBuilder().setKind("Trip")
                    .setFilter(eqTripCanonicalName).setLimit(1).build();

   QueryResults<Entity> results = getDatastoreService().run(query);

   if (results.hasNext()) {
       return Optional.of(fromEntity(results.next()));
   }

   return Optional.empty();
} 
```

这将获得实体 ( `Trip`)，无论其父 ( `User`) 是谁。

**---- 第二种选择 ----**

在访问一个元素之前，您可能首先必须列出它们，然后选择一个并转到访问链接。正如我们所知，使用任务的 id 是不够的，因为它仅对其父级 ( `User`) 是唯一的，而不是显示`id`您可以使用 url 安全 id：

```
entity.getKey().toUrlSafe() 
```

所以在从实体到对象的转换中，将`Task`这个 id 编码为[base-64 编码](http://docs.oracle.com/javase/8/docs/api/java/util/Base64.html)的元素分配。要从 url 安全使用中取回密钥

```
Key.fromUrlSafe 
```

它将保证您将始终使用全局唯一 ID。

**---- 第三种选择 ----**

使用[HATEOAS](https://en.wikipedia.org/wiki/HATEOAS)，您可以指定用于访问 的链接`Task`，因此，如果任务有一些 id，例如`parentId`or`userId`基本上是在获取他的父节点的 id，那么您可以很容易地建立一个指向这样的 url 的链接

[http://base-url.com/users/](http://base-url.com/users/) {userId}/tasks/{taskId}

因此，在 HATEOAS 请求中，这可以在链接中指示，指示元素允许的操作，因此查看元素使用`self`，例如

```
{
  "id": "voyage-to-the-everest",
  "name":"Voyage to the Everest",
  "userId": "my-traveler-user-id",
  "_links":{
    "self":{
      "href":"http://localhost:8080/users/my-traveler-user-id/tasks/voyage-to-the-everest
    }
  }
} 
```

如果您使用 a 而不是 a`userId`您`parentId`可以使用所有节点指定它们是否有父节点的接口来解决它。`parent`使用定义整个父层次结构的属性甚至可以更灵活：

```
public interface DatastoreNode{
  String getParentId();
  String getParentKind();
  String getParentUrlTag();
  DatastoreNode getParent();
} 
```

尽管强烈建议使用 HATEOAS，但您可以推断出具有 json 结构的相同 url，例如

```
 {
      "id": "voyage-to-the-everest",
      "name":"Voyage to the Everest",
      "parent": {
           parentKind: "User",
           parentId: "my-traveler-user-id",
           parentUrlTag: "users",
           parent: {}  
       }
    } 
```

# android - NinePatch 两个文本框和一个图像

> ID：14301938
> 
> 赞同：5
> 
> 时间：2013-01-13T08:38:59.063
> 
> 标签：android

我想实现这个图像 ![在此处输入图像描述](../Images/008d11ef02d3c203dfc6d0cbe1d74ba6.png)

# 区域 textbox1 和 textbox2 Ninepatch 可以

![在此处输入图像描述](../Images/443b2a3087fde9c480c2f9f031e2ddcc.png)

我怎么能九补丁到底这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T08:57:47.067

android 9-patch 有一个限制：由右下边框定义的内容区域必须是连续的（即您只能在右下边框上有一个段）。

另一方面，您可以在顶部和左侧边框上定义多个可拉伸区域。

在你的情况下：

对于可拉伸区域：

*   在左边框上画一段

*   在顶部边框上绘制两个段（长度相同）（围绕垂直分隔线对称，但不包括垂直分隔线）。

对于内容区域：

*   在底部边框上绘制一段
*   在右边框上绘制一段

对于内容：

*   定义一个水平线性布局，其中包含 2 个 TextView（宽度 = 0dp，重量 = 1.0）
*   使用您的九个补丁图像作为背景

希望这有帮助。

# -------------------------------------------------- --------------------------

**结果 ：**

我使用你的计划，但结果是这样的 ![在此处输入图像描述](../Images/d7b9c3f4a61a3ff4fbf1db02139a8665.png)

当我的文本增加文本框高度不增加

**怎么解决呢？**

# -------------------------------------------------- --------------------------

我认为它与 9-patch 图像无关。它更有可能与 textView 有关。

尝试：在 textView

```
android:layout_height="WRAP_CONTENT" 
```

在线性布局上

```
android:layout_height="WRAP_CONTENT" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T09:53:45.040

`LinearLayout`允许您在其子项之间指定分隔符。所以你需要：

1.  把你`TextView`的 s 放在一个水平的里面`LinearLayout`
2.  将没有分隔线的圆角矩形 9-patch 分配为背景`LinearLayout`
3.  将分隔线添加到您的`LinearLayout`： `android:divider="drawable_resource"
    android:showDividers="middle"`

`TextView`这种布局也更加灵活——如果你想要 3 个或更多的 s ，你不需要再做一个 9-patch

# linux - 用于测试文件操作的 Linux 命令

> ID：14301943
> 
> 赞同：0
> 
> 时间：2013-01-13T08:39:46.597
> 
> 标签：linux, file, text

在 Linux 中，我有很多文件，我需要将所有文件的第 n 行的第 m 个单词连同文件名复制粘贴到一个普通的 .txt 文件中。所以我的最终文本文件看起来有点像这样......

```
<FileName1> <mth word of nth line of FileName1>
<FileName2> <mth word of nth line of FileName2>
.
.
<FileNameN> <mth word of nth line of FileNameN> 
```

有人可以让我知道这个Linux命令。感谢您！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:05:08.513

```
#!/bin/sh
if [ "$#" != 3 ]
then
  echo "$0 [dir] [lineno] [wordno]"
  exit
fi

rm -f a.txt
dir=$1
lineno=$2
wordno=$3

while read -u3 file
do
  read -a words < <(tail -n+$lineno $file)
  echo $file ${words[wordno-1]} >> a.txt
done 3< <(find $dir -type f) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T09:59:25.603

怎么用`awk`？

```
#!/bin/bash

# Usage: <line> <word> <files...>

awk "NR==$1 { print FILENAME \" \" \$$2 }" "${@:3}" 
```

# html - 仅针对父容器定位元素？

> ID：14301953
> 
> 赞同：0
> 
> 时间：2013-01-13T08:41:45.877
> 
> 标签：html, css

我对元素定位的痛苦仍在继续：

```
<div id="container">
<div id="div1"></div>
<div id="div2"></div>
<div id="div3"></div>
</div>

#div1 {
right:0; // what I want - it's right border should be 0px from the parent's right border, regardless of any other div inside.
}

#div2 {
bottom:0; // it's bottom border should be 0px from the parent's bottom border, regardless of any other div inside.
}

#div3 {
margin-left:auto;
margin-right:auto;
// should be on the parent's center, regardless...
} 
```

所以，我希望父母成为参考，而不是邻居。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T08:55:12.050

检查这个：

```
 #container {
  position: relative;
  }

  #div1 {
  position: absolute;
  right: 0px;
  }

  #div2 {
  position: absolute;
  bottom: 0px;
  }

  #div3 {
  margin: 0px auto;
  } 
```

但这是您在阅读有关 div 定位的 30 秒后可以找到的解决方案...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T08:58:56.817

只需使用 CSS

```
position:relative; 
```

将此设置为`div1`, `div2`, `div3`。

# php - [1]+[2] != [1,2] （数组联合运算符在非关联数组上的行为）

> ID：14301956
> 
> 赞同：2
> 
> 时间：2013-01-13T08:42:12.397
> 
> 标签：php, arrays, operators

`[1=>0]+[2=>0]`产量`[1=>0,2=>0]`。但是有什么技巧可以将这种语法糖用于`[1]+[2]`. 所以`[1]+[2]`产量`[1,2]`？

**注意**：我关心的是这样的语法，而不是其他相关的 PHP 函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T08:45:54.560

请改用[array_merge()](http://php.net/manual/en/function.array-merge.php)。我难倒了这么多`+`与数组一起使用的奇怪行为，我向自己保证永远不会再使用它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-13T08:49:59.153

`+`是数组联合运算符，它将跳过现有的键。

您想要`array_merge()`在您的示例中将它们连接起来（它对带有数字键的数组执行此操作）。

对你来说不幸的是，没有办法重载`+`运算符来执行任何不同的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T08:55:54.530

这是因为**`+`是联合运算符。它不追加或合并。**

```
[1] is array(0=>1);
[2] is array(0=>2); 
```

如果你联合它将成为第一个数组中已经存在的键`array(0=>1)`。`0`

没有语法糖可以做到这一点。但是，你可以试试这个

```
[1]+[1=>2] 
```

或其他丑陋的表达

```
[1]+[count([1])=>2] 
```

在语法上`[1]+[2] == [1,2]`也完全没有意义。那是蟒蛇的事情。

# php - 从另一个片段调用函数时出现未定义变量错误

> ID：14301958
> 
> 赞同：0
> 
> 时间：2013-01-13T08:42:24.017
> 
> 标签：php, scope

以下 PHP 页面

```
<?php
$a = "World";

function say() {
    echo $a;
}
?>

Hello, <?php say(); ?> 
```

失败：

```
Undefined variable: a in test.php on line 5 
```

有人能解释一下为什么吗，解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T08:50:01.363

您必须在函数内将变量定义为全局变量

```
<?php
 $a = "World";

function say() {
global $a;
echo $a;
}
 say(); 
?> 
```

# javascript - 我不是程序员。只需要知道 DART 是否可以替代 JAVA

> ID：14301959
> 
> 赞同：-1
> 
> 时间：2013-01-13T08:42:26.173
> 
> 标签：javascript

我不是程序员，我真的不知道我在网上做了多少工作，依赖于 JAVA。现在每个人都被要求禁用它 - 我无法找到任何关于潜在替代品的信息。分享该信息的文章均未提及任何替代方案。谷歌只是没有推销这个东西吗？我很困惑。

**我可以只下载 DART**并让它代替我的 JAVA 运行吗？** 然后可以继续照常营业吗？还是比这更复杂？

EX-如果我的 Chrome 停止工作。我可以下载其他选项，例如 FireFox 或 IE，然后继续工作。

我只想能够像启用 Java 时那样使用我的计算机。DART 是可以帮助我做到这一点的软件类型吗？

任何想法将不胜感激！！！！！！！太感谢了！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:47:06.860

DART 不是 Java 的替代品。DART 是一种编程语言，可将其程序翻译成 JavaScript（尽管它的名称不是 Java），以便它们可以在您的浏览器上运行。您不需要下载 DART，除非您想创建自己的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T08:58:08.933

我认为您的意思是每个人都要求您禁用 JavaScript，而不是 Java。目前，JavaScript 是浏览器中唯一无需插件即可工作的编程语言。所以你别无选择。禁用 JavaScript 的 Internet 服务不会给您带来太多乐趣。

# playframework-2.0 - 在 Play 框架中使用外部 jar

> ID：14301960
> 
> 赞同：7
> 
> 时间：2013-01-13T08:42:27.513
> 
> 标签：playframework-2.0

最近，我尝试使用 java-image-scaling 库来调整图像文件的大小。因此，我通过 Eclipse 设置 java-image-scaling jar 文件，就像通常的 Eclipse 项目设置其外部 jar 文件一样。在 Eclipse 中，使用 java-image-scaling 库没有错误（我的意思是，没有红色下划线。）。但是，当我尝试通过 Play 编译它时！控制台，编译器说找不到 java-image-scaling jar 文件。这很奇怪，因为我对 Joda Time 库做了完全一样的事情并且没有问题。

我是否缺少在 Play 框架项目中使用外部 jar（java 库）的东西？

![在此处输入图像描述](../Images/deda88499227edbcdeedbd578cb3e9a2.png)

检查此屏幕截图，显示我已经添加了 Joda 数据时间库和 java-image-scaling 库。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-13T09:03:05.127

您必须在`project/Build.scala`文件中添加您的依赖项：

```
val appDependencies = Seq(
  "com.mortennobel" % "java-image-scaling" % "0.8.5"
) 
```

或者，您可以将 jar 直接放在`lib`Play 应用的文件夹中。

然后，在 Play 控制台中，使用命令`eclipsify`或`eclipse`根据您的 Play 版本（2.1.x 或 2.0.x）重新生成 Eclipse 文件。

对于 Joda 来说，它之所以有效，是因为该库已经存在于 Play 依赖项中。

有关详细信息，请参阅[Play 文档](http://www.playframework.org/documentation/2.0.4/SBTDependencies)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T09:17:49.103

如果您不想使用依赖项，您可以在此处找到在项目中添加外部 jar 的过程：[Add external Jar file to Play 2.0.4](https://stackoverflow.com/questions/12820715/add-external-jar-file-to-play-2-0-4/12822926#12822926)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-02T02:51:29.090

在 play 1.x 中，您可以添加包含在`conf/dependencies.yml`

# python - 函数参数中的裸星号？

> ID：14301967
> 
> 赞同：372
> 
> 时间：2013-01-13T08:43:12.027
> 
> 标签：python, python-3.x, parameter-passing

函数参数中的星号有什么作用？

当我查看[泡菜模块](http://docs.python.org/3.3/library/pickle.html#pickle.dump)时，我看到了这个：

```
pickle.dump(obj, file, protocol=None, *, fix_imports=True) 
```

我知道参数前面有一个单星号和双星号（对于可变数量的参数），但这什么都没有。我很确定这与泡菜无关。这可能只是发生这种情况的一个例子。当我将它发送给解释器时，我才知道它的名字：

```
>>> def func(*):
...     pass
...
  File "<stdin>", line 1
SyntaxError: named arguments must follow bare * 
```

如果重要的话，我在 python 3.3.0 上。

* * *

## 回答 #1

> 赞同：334
> 
> 时间：2013-01-13T08:50:58.730

Bare`*`用于强制调用者使用命名参数 - 因此`*`当您没有以下关键字参数时，您不能将函数定义为参数。

有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/14298976/180174)或[Python 3 文档](http://docs.python.org/3/reference/compound_stmts.html#function-definitions)。

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2016-09-02T04:16:24.207

虽然原始答案完全回答了这个问题，但只是添加了一些相关信息。单个星号的行为源自[`PEP-3102`](https://www.python.org/dev/peps/pep-3102/). 引用相关部分：

```
The second syntactical change is to allow the argument name to
be omitted for a varargs argument. The meaning of this is to
allow for keyword-only arguments for functions that would not
otherwise take a varargs argument:

    def compare(a, b, *, key=None):
        ... 
```

用简单的英语来说，这意味着要传递 key 的值，您需要将其显式传递为`key="value"`.

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2018-10-22T19:20:12.010

```
def func(*, a, b):
    print(a)
    print(b)

func("gg") # TypeError: func() takes 0 positional arguments but 1 was given
func(a="gg") # TypeError: func() missing 1 required keyword-only argument: 'b'
func(a="aa", b="bb", c="cc") # TypeError: func() got an unexpected keyword argument 'c'
func(a="aa", b="bb", "cc") # SyntaxError: positional argument follows keyword argument
func(a="aa", b="bb") # aa, bb 
```

上面带有 **kwargs 的示例

```
def func(*, a, b, **kwargs):
    print(a)
    print(b)
    print(kwargs)

func(a="aa",b="bb", c="cc") # aa, bb, {'c': 'cc'} 
```

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2019-11-25T04:12:31.110

从语义上讲，这意味着它后面的参数是仅限关键字的，因此如果您尝试提供一个参数而不指定其名称，则会收到错误消息。例如：

```
>>> def f(a, *, b):
...     return a + b
...
>>> f(1, 2)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: f() takes 1 positional argument but 2 were given
>>> f(1, b=2)
3 
```

务实地说，这意味着您必须使用关键字参数调用该函数。如果没有参数名称给出的提示，很难理解参数的目的，通常会这样做。

比较例如`sorted(nums, reverse=True)`与如果你写`sorted(nums, True)`的。后者的可读性要差得多，因此 Python 开发人员选择让您以前一种方式编写它。

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2019-11-01T13:14:20.333

假设你有功能：

```
def sum(a,key=5):
    return a + key 
```

您可以通过 2 种方式调用此函数：

`sum(1,2)`或者`sum(1,key=2)`

假设您希望`sum`仅使用关键字参数调用函数。

您添加`*`到函数参数列表以标记位置参数的结尾。

所以函数定义为：

```
def sum(a,*,key=5):
    return a + key 
```

只能使用调用`sum(1,key=2)`

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2019-05-05T10:07:59.900

我发现以下链接对解释非常有帮助`*`，`*args`并且`**kwargs`：

[https://pythontips.com/2013/08/04/args-and-kwargs-in-python-explained/](https://pythontips.com/2013/08/04/args-and-kwargs-in-python-explained/)

基本上，除了上面的答案之外，我还从上面的网站（信用：[https](https://pythontips.com/author/yasoob008/) ://pythontips.com/author/yasoob008/ ）了解到以下内容：

下面先定义演示函数，有两个例子，一个with `*args`，一个with`**kwargs`

```
def test_args_kwargs(arg1, arg2, arg3):
    print "arg1:", arg1
    print "arg2:", arg2
    print "arg3:", arg3

# first with *args
>>> args = ("two", 3,5)
>>> test_args_kwargs(*args)
arg1: two
arg2: 3
arg3: 5

# now with **kwargs:
>>> kwargs = {"arg3": 3, "arg2": "two","arg1":5}
>>> test_args_kwargs(**kwargs)
arg1: 5
arg2: two
arg3: 3 
```

因此`*args`，您可以动态构建参数列表，这些参数将按输入顺序进行，同时`**kwargs`可以启用 NAMED 参数的传递，并且可以由 NAME 相应地处理（与输入顺序无关） .

该网站继续指出，参数的正确顺序应该是：

```
some_func(fargs,*args,**kwargs) 
```

# php - 如何在 php 中将数据从一个 db 表显示到另一个 db 表的视图页面？

> ID：14301968
> 
> 赞同：0
> 
> 时间：2013-01-13T08:43:12.753
> 
> 标签：php

我有 2 个 db 表 aspect 和 aspectdet_1。每个都有添加、查看、编辑和删除页面。

表：`aspect`有行`ascode`& `asname`。

表：`aspectdet_1`有行`Dept_Code`, `ascode`, `astype`, `cndtn`& `asscope`。

我想`asname`从 Table:`aspect`在 Table:`aspectdet_1`的视图页面中显示。我使用了代码

```
$query="SELECT aspectdet_1.Dept_Code, aspectdet_1.ascode, aspectdet_1.astype, aspectdet_1.cndtn, aspectdet_1.asscope, aspect.asname ".
    "FROM aspectdet_1, aspect ".
    "WHERE aspectdet_1.ascode = aspect.ascode "; 
```

它在视图页面中工作。

但是当我想编辑或删除不支持的页面时。

那个代码对吗？

编辑和删除怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:57:26.903

听起来像数据库权限问题。请确保您用于连接数据库的**mysql-user**（用于 mysql_connet）是否具有表的编辑和删除权限。

您可以在**Phpmyadmin中检查数据库表权限**

关于权限的一个很好的教程：http: [//dev.mysql.com/doc/refman/5.1/en/privileges-provided.html](http://dev.mysql.com/doc/refman/5.1/en/privileges-provided.html)

# jquery - 如何设置窗口位置？

> ID：14301970
> 
> 赞同：2
> 
> 时间：2013-01-13T08:43:27.433
> 
> 标签：jquery, html, asp.net-mvc-3, telerik

我正在使用 Jquery 打开一个新的 Telerik 窗口，例如：

```
var win = $('#myWindow').data('tWindow');
win.open(); 
```

我有鼠标位置（x，y），我想在同一位置打开窗口。

如何设置窗口位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T15:00:49.700

尝试这个：

打开（'btn'，'teste'）；

```
function open(div,data){

    var x = 50,
        y = 50;

    if($('#'+div).attr('data') == 'teste'){

        $('#'+div).attr( 'data', data).css({'top' : x, 'left' : y});

    }

} 
```

# c++ - IPv6下的网络字节顺序没有意义吗？

> ID：14301973
> 
> 赞同：4
> 
> 时间：2013-01-13T08:44:11.110
> 
> 标签：c++, c, ipv6, ipv4, htonl

如果我们使用 32 位整数来存储 IPv4 地址，那么必须考虑整数的字节顺序。

但是，由于几乎所有平台下都没有内置的 128 位整数类型，因此 IPv6 地址必须存储到字节数组中，所以，我认为字节顺序不再是问题。

我对么？或者 IPv6 有对应的函数 htonlXXX 吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-13T12:19:00.863

IPv6 确实需要 ipv6 地址的网络字节顺序。hton 和 ntoh 都是关于将地址从您在代码中存储的方式转换为需要在数据包中存储的方式（反之亦然）。所以问题就变成了如何将它存储在代码中。

此外，在代码中定义 IPv6 地址可以允许更多的方式来解决它，而不仅仅是一个字节数组：

```
struct in6_addr
{
    union 
    {
        __u8 u6_addr8[16];
        __u16 u6_addr16[8];
        __u32 u6_addr32[4];
    } in6_u;
#define s6_addr in6_u.u6_addr8
#define s6_addr16 in6_u.u6_addr16
#define s6_addr32 in6_u.u6_addr32
}; 
```

对于用户，IPv6 地址表示为 8 个 16 位值。如果您在代码中将地址存储为 8 个 16 位值，那么您需要在使用 u6_addr16[] 数组将其放入数据包时对每个 16 位值使用 htons，并在检索每个 16 位值时使用 ntohs - 来自 u6_addr16[] 的位值。

这些链接很有帮助：

[http://msdn.microsoft.com/en-us/library/ee175867.aspx](http://msdn.microsoft.com/en-us/library/ee175867.aspx)

[http://en.wikipedia.org/wiki/IPv6_address](http://en.wikipedia.org/wiki/IPv6_address)（尤其是右上角的图表）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T09:06:35.920

网络字节排序在 2 种情况下很有用。首先，您可以在您所说的地址上使用它。其次，您必须考虑发送数据的字节顺序。您在评论中说 TCP 只是一个字节流是对的，但是许多协议将数字的字节顺序规定为网络顺序。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-13T10:17:01.663

> 但是，由于几乎所有平台下都没有内置的 128 位整数类型，因此 IPv6 地址必须存储到字节数组中，所以，我认为字节顺序不再是问题。

这不符合; 在构造字节数组的时候，还是要考虑是按0123456789ABCDEF还是FEDCBA976543210的顺序打包数据。仍然需要正确的字节顺序，只是诸如`ntohl()`和之类的功能`htonl()`不适用于生成 128 位地址。

[例如，如果您使用inet_ntop()](http://pubs.opengroup.org/onlinepubs/009604599/functions/inet_ntop.html)从“表示”形式生成二进制地址，则您不需要自己考虑任一地址类型的字节顺序。字节顺序仍然很重要，但 API 会为您处理。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-13T13:19:27.013

在处理 IPv4 地址和端口号时必须密切注意字节顺序的具体原因是结构`sockaddr_in`和`in_addr`数据成员的整数类型大于`char`，并且其内容要求按网络字节顺序排列。

即使使用 IPv4，您也可以避免担心地址部分的字节顺序——使用`inet_aton`或直接从字符串`inet_pton`中填充。`in_addr`后一个函数也处理 IPv6 地址（填充一个`in6_addr`）。

使用 IPv6 时，您仍然需要`htons`端口号，如果您选择访问`in6_addr`大于字节的块，则需要进行主机/网络转换。

正如您所说，如果您的平台没有 128 位类型，那么您无法像访问单个 32 位块那样访问`in6_addr`单个 128`in_addr`位块。但是，如果某些具有 128 位类型的网络接口/实现确实决定公开它的 128 位视图，那么希望它也能提供匹配`ntohX`和`htonX`功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-13T08:54:27.760

```
struct in6_addr{
　　uint8_t s6_addr[16];//128bit ipv6 address
}; 
```

通过这个结构，你认为是对的。

# c# - 使用嵌套母版页检查身份验证和授权的最佳方法是什么

> ID：14301975
> 
> 赞同：1
> 
> 时间：2013-01-13T08:44:28.127
> 
> 标签：c#, asp.net, authentication, master-pages, multilingual

我正在使用 asp.net 和 C# 实现我的网站。我有自己的会员系统，包括角色、活动和用户。

我正在使用嵌套母版页，Main.master 是父母版页，`Sub.master`是子母版页。我的登录页面正在使用`Sub.master`，但用户菜单位于`Master.master`.

我的问题是是否有任何解决方案来检查所有内容页面的身份验证和授权，而不是在每个内容页面中执行此操作？

而且我也不知道在这种结构中改变我的网站文化。

我已阅读有关母版页内容页面生命周期的信息，但我感到困惑。我不知道哪种方法更适合身份验证。我的意思是，`Page_Init`父母版页子母版页或内容页。`Pre_Init``Page_Load`

如果您能给我一些建议，我将不胜感激。

# java - 为什么 J2EE 1.4 和 Java EE 5 命名？

> ID：14301983
> 
> 赞同：2
> 
> 时间：2013-01-13T08:46:27.297
> 
> 标签：java, jakarta-ee, versioning

任何人都可以解释为什么两个版本的 Java Enterprise Edition 的命名不同。J2EE 1.4 和下一个版本是 Java EE 5。

这背后的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T08:48:41.010

根据甲骨文[网站](http://www.oracle.com/technetwork/java/javase/namechange-140185.html)：

> Sun Microsystems 在 2006 年简化了平台名称，以更好地反映 Java 平台内置的成熟度、稳定性、可扩展性和安全性水平。Sun 去掉了名称中的“2”并删除了“点号”（句号后面的数字）。对 Java 平台的任何更新都将被简单地记录为更新，而不是在平台名称的末尾添加“点号”。

上述文章与 Java SE 相关，但同样适用于 Java EE，请参阅[此处](http://www.java.com/en/about/javanaming.jsp)了解更多信息。

# iphone - 升级 iOS 时缓存目录会被删除吗？

> ID：14301985
> 
> 赞同：0
> 
> 时间：2013-01-13T08:47:09.253
> 
> 标签：iphone, ios, objective-c, ios5

我想知道升级iOS时Cache目录是否被删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:11:32.830

文档中对此没有明确的答案。当设备磁盘空间不足或执行完全恢复时，可以清除它。

> Application_Home/库/缓存
> 
> 使用此目录来编写您希望在应用程序启动之间或应用程序更新期间保留的任何特定于应用程序的支持文件。您的应用程序通常负责添加和删除这些文件。它还应该能够根据需要重新创建这些文件，因为 iTunes 会在设备完全恢复期间删除它们。

# ruby-on-rails - Rails - 将多个 HTML 输入的内容转换为单个字符串

> ID：14301987
> 
> 赞同：2
> 
> 时间：2013-01-13T08:47:25.763
> 
> 标签：ruby-on-rails, forms, field, textinput, string-concatenation

**0\. 要点**

使用 Rails 表单和输入，如何将大量文本输入连接到一个字符串属性中？

例如 "A" 、 "B" 、 "C" 是 Rails 形式的每个输入，它们将被连接并读入`:string_field => "ABC"`

**1\. 背景**

我正在制作一个允许用户制作自己的填字游戏的应用程序。谜题是我的 CrosswordPuzzle 类的成员，其中的`:letters`属性（字符串）描述了谜题中字母和空格的布局。

例如，一个 3x3 拼图如下...

```
FOO
O■U
BAR 
```

...应该有一个`:letters`属性`"FOOO_UBAR"`（字符串代表从左到右，从上到下阅读的拼图）。

**2.问题**

用户首先指定拼图的大小（行 x 列）来创建拼图。这将创建一个该大小的空白拼图，每个单元格都是一个空白的 HTML 输入元素。然后用户可以在空白单元格中输入适当的字母并构建他们的拼图。

我不明白该怎么做是`:letters`在我提交编辑表单时获取所有这些单独的单字符输入并让 Rails 解释它们或将它们更改为拼图的单个属性。此外，由于拼图可能具有不同大小和不同数量的单元格，因此答案需要可扩展，以便可以将 100-600 个输入元素读入单个 100-600 个字符串。

任何帮助将非常感激。

PS 因为这是我在 StackOverflow 上的第一篇文章，如果我犯了任何错误，我提前道歉。（我之前广泛检查过是否涵盖了类似的主题，但他们要么没有，要么我对术语太不熟悉而无法识别它们）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:18:50.923

配置您的表单，以便每个文本输入都有一个名称`cell[?]`，例如？是一个从零开始的数组索引。所以, `cell[0]`, `cell[1]`, 等等。Rails 会将所有这些转换为单个参数条目`cell`，该参数条目将是一个数组。然后，将它们连接在一起。

跳过铁轨......像这样的东西。

```
1.8.7 > a = []
 => [] 
1.8.7 > a[0] = 'f'
 => "f" 
1.8.7 > a[1] = 'o'
 => "o" 
1.8.7 > a[2] = 'o'
 => "o" 
1.8.7 > a[3] = 'o'
 => "o" 
1.8.7 > a
 => ["f", "o", "o", "o"] 
1.8.7 > a.join
 => "fooo" 
1.8.7 > 
```

或者.. 做同样的事情，但在客户端使用 javascript，将结果填充到隐藏的“字母”字段中，然后 Rails 不需要做任何事情。

# jsf - pageflowScope 在 ADF Faces 中究竟做了什么？

> ID：14301990
> 
> 赞同：3
> 
> 时间：2013-01-13T08:48:03.007
> 
> 标签：jsf, jsf-2, oracle-adf, trinidad

`pageflow`除了正常的会话、请求、查看范围之外，ADF 面还公开了一个新范围（称为） `managed beans`。这个范围有什么作用？它的优点和缺点是什么？放在里面的对象什么时候`pageflowScope`被垃圾收集？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T06:16:04.167

pageFlowScope bean 的范围限定为“任务流”的 ADF 控制器概念，即无界任务流 (UTF) 或有界任务流 (BTF)。在 ADF 中，任务流是页面或页面片段的集合，这些页面或页面片段汇集在一个流中，或者换句话说，是一组定义的活动，包括路由器、方法调用和页面/页面片段调用。

pageFlowScope 生命周期/范围是任务流的生命周期/范围。它们在任务流中第一次通过代码或 EL（不一定是任务流的开头）访问时就存在，而在任务流退出（或用户注销或会话超时）时超出范围. 由于任务流可以以堆叠的方式调用任务流，因此任何时候都可能有多个 pageFlowScope bean 在运行。

pageFlowScope 没有太多的优点/缺点，而是你应该在什么时候使用它们。pageFlowScope bean 携带任务流的状态，并允许任务流的状态与较大范围的会话和 applicationScope bean 分开，并且不像较小范围的请求、backingBean 和视图范围的 bean 那样频繁地重新创建。例如，任务流的传入和传出参数非常适合存储在 pageFlowScope 中。作为要在当前页面上操作的反示例值，最好将其放置在 request/backingBean/view 范围内。

pageFlowScope bean 的另一个优点是它们知道多浏览器选项卡。如果同一个会话在不同的浏览器选项卡中打开了两个应用程序实例，ADF 将为每个选项卡生成两个单独的 pageFlowScope bean，而 sessionScope 只会生成一个。这允许任务流在每个选项卡上具有独立的状态。

最后解决您的最后一个问题，pageFlowScope bean 中的对象仅在 pageFlowScope bean 本身超出范围时才可用于垃圾收集，即当任务流退出、用户注销或会话超时时。当然，如果程序员在 pageFlowScope bean 上保留了间接句柄，则通常需要注意，在这种情况发生之前，该 bean 不会成为垃圾收集的候选对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:52:29.133

ADF 具有任务流的概念，您可以在其中将一些相关页面与导航规则放在一起。页面流范围涵盖了这样一个任务流的执行。这可能需要比请求更长的时间，并且可以跨越多个视图，因此此范围比请求和视图范围长，但小于会话范围。当您离开组成任务流的页面时，范围会被破坏。作为一个非常简单的用例，请考虑一个向导，在该向导中，您必须在提交最终结果进行处理之前填写几页数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T05:05:35.287

除了上述帖子之外，pageFlowScope 的主要用途是 ADF 有界任务流具有不同的活动。示例视图、方法调用、任务流返回等。

PageFlowScope 用于在任务流中的活动之间共享数据。任务流的输入参数和输出参数也存储在页面流范围内。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-16T11:46:07.610

**简单地说**：

**pageFlowScope**：只要用户从一个页面导航到另一个页面，此范围就可用。如果用户打开一个新的浏览器窗口并开始导航，则该系列窗口将拥有自己的 pageFlowScope 范围。

1.  每个 ADF 任务流实例都被授予其自己的页面流范围

2.  当您离开任务流时，页面流范围不会被破坏，除非您使用任务流返回活动并调用终结器

3.  您只能通过使用任务流返回活动来访问先前离开的页面流范围。

**如何以编程方式访问 pageFlowScope 对象**

```
 AdfFacesContext context= AdfFacesContext.getCurrentInstance();
    Map pageFlowScope = context.getPageFlowScope();
    pageFlowScope.put("Name","myName"); 
```

# ssl - 使用 CXF 前端以编程方式为 RESTful Web 服务配置 SSL？

> ID：14301993
> 
> 赞同：1
> 
> 时间：2013-01-13T08:48:09.250
> 
> 标签：ssl, cxf, configure

我有一个关于使用 javax.xml.ws.Provider 以编程方式为 CXF 前端配置 SSL 的问题。

基本上我已经实现了一个简单的Restful webservice，比如

```
@WebServiceProvider()
@ServiceMode(value = Service.Mode.PAYLOAD)
public class RestWebServiceProvider implements Provider<DOMSource> {
    ...
} 
```

并用类似的代码发布它

```
public class RestServer {

    protected RestServer() throws Exception {
        System.out.println("Starting Server");
        Endpoint e = Endpoint.create(HTTPBinding.HTTP_BINDING, new RestWebServiceProvider() );
        String address = "http://localhost:9000/rest/test";
        e.publish(address);

    }

    public static void main(String args[]) throws Exception {
        new RestServer();
        System.out.println("Server ready...");

        Thread.sleep(5 * 60 * 1000);
        System.out.println("Server exiting");
        System.exit(0);
    }

} 
```

与 CXF 下载的示例文件夹中的 restful_dispatch 示例项目完全一样。

现在我想要实现的是以编程方式配置 SSL，而不是使用 XML。

为什么？因此，可以在运行时从浏览器配置 SSL，而无需重新启动 Web 应用程序。

我做了一些功课，看到示例项目 /jax_rs/basic_https 是这样做的

```
 static {
    // set the configuration file
    SpringBusFactory factory = new SpringBusFactory();
    Bus bus = factory.createBus("ServerConfig.xml");
    BusFactory.setDefaultBus(bus);
} 
```

在 Server 类中，ServerConfig.xml 定义了实际的 SSL 配置。但这对于我的用例来说不够灵活。

我已经对 stackoverflow 进行了一些挖掘，我发现的最佳链接似乎来自[带有 HTTPS 的 javax.xml.ws.Endpoint](https://stackoverflow.com/questions/4621313/using-javax-xml-ws-endpoint-with-https)

我自己还没有尝试过这种方法，但是如果这是你的专家所做的或者是否有更好的方法，我正在徘徊。

以前有没有人做过这样的事情并愿意分享一些建议？

谢谢

山姆

# javascript - 如何在 JavaScript 中将字符串转换为对象？

> ID：14301994
> 
> 赞同：0
> 
> 时间：2013-01-13T08:48:11.397
> 
> 标签：javascript

我有一个想法，即制作一个接收对象名称并输出其所有属性的 Web 表单。为此，我编写了以下代码：

```
var html5form = document.getElementsByClassName("html5_form");
html5form[0].onsubmit = function (e) {
    var val = e.target.querySelector("input[name=obj]").value,
        obj = window[val],
        enumObj = new obj();            
    for (prop in enumObj) {                
        console.log(prop);
    }
    return false;
} 
```

我用对象构造函数制作了一个数据列表并将其附加到输入字段。但我实际上是在迭代对象实例，而不是构造函数。上面提到的代码仅在我输入 DataView 和 ArrayBuffer 等构造函数时才有效，并且不适用于 Array、Number 等。我的代码有什么问题？我试过调试，但没有结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:00:58.127

JavaScript 没有您所想的标量/基元对象。有拳击，但仅此而已。

例如，当您在其上使用方法时，会自动将字符串原语装箱到字符串对象，例如`'text'.method()`or `(6).toString()`。但是，我知道如果不检查数据类型然后自己选择正确的转换（我什至不确定这样做是否是最佳做法），就无法自动返回装箱值。而且，如果您要这样做，您也可以更改您的函数以正确处理原语。

另外，它会给你带来什么？假设你得到一个 String 对象。您希望在其上列举哪些属性？对于此类事情，我知道的唯一属性不是属性，而是在装箱对象原型的方法中，您可以使用`this`引用——它返回标量值。

问题是您期望对象像`Number`或`String`具有属性并像其他对象一样行事，但它们没有也不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T08:55:00.660

不确定这是否是你想要做的

```
window.myObject = function(){};

var objectName = 'myObject';
var objectInstance = new window[objectName]; 
```

`objectInstance`现在包含一个实例`myObject`

另一方面，如果您的对象只是一个对象文字，则不应使用`new`关键字。

```
window.myObject = {};

var objectName = 'myObject';
var objectReference = window[objectName]; 
```

# c++ - 如何从 XLL UDF 返回数组

> ID：14301998
> 
> 赞同：3
> 
> 时间：2013-01-13T08:49:21.777
> 
> 标签：c++, excel, xll

我正在尝试使用 C API 为 Excel 编写一个数组构造函数作为工作表函数。

目标：`=array_cons(1, 2, 3) => {1, 2, 3}`

但是，我没有正确初始化 XLOPER12。在 Excel 中，我的函数当前返回`#NUM`. 我正在获取参数列表并`vargs`通过宏将其打包到一个数组中，然后尝试返回提供的数组部分。

```
#include <windows.h>
#include <xlcall.h>
#include <framewrk.h>
#include <boost/preprocessor.hpp>

#define VARG_COUNT 250
#define VARG_FORMAT(Z, A, B) B##A, 
#define VARG_DEF_LIST(N) BOOST_PP_REPEAT(N, VARG_FORMAT, LPXLOPER12 varg) \
                         LPXLOPER12 varg##N
#define VARG_ARRAY(N) { BOOST_PP_REPEAT(N, VARG_FORMAT, varg) varg##N }
#define GET_VARGS VARG_ARRAY(VARG_COUNT)

__declspec(dllexport) LPXLOPER12 WINAPI array_cons(VARG_DEF_LIST(VARG_COUNT))
{
    LPXLOPER12 vargs[] = GET_VARGS;
    int args_passed = 0;
    for(int i = 0; i < VARG_COUNT; ++i, ++args_passed)
    {
        if (vargs[i]->xltype == xltypeMissing)
        {
            break;
        }
    }
    if (args_passed == 0)
    {
        XLOPER12 err;
        err.xltype = xltypeErr;
        err.val.err = xlerrValue;
        return (LPXLOPER12)&err;
    }
    XLOPER12 list;
    list.xltype = xltypeMulti;
    list.val.array.lparray = (XLOPER12*)vargs;
    list.val.array.rows = args_passed;
    list.val.array.columns = 1;
    return (LPXLOPER12)&list;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:22:03.997

我想到了。这里有几点需要注意——

您需要确保您的 UDF 注册使用正确的签名。就我而言，我希望 Excel 引用给我它们各自的值，所以我`Q`在注册函数时使用了类型。如果您不明白这一点，请查看[http://msdn.microsoft.com/en-us/library/office/bb687869.aspx](http://msdn.microsoft.com/en-us/library/office/bb687869.aspx)

为了返回一个数组，您必须为`list.val.array.lparray`成员动态分配新内存并迭代地填充它。

```
__declspec(dllexport) LPXLOPER12 WINAPI array_cons(VARG_DEF_LIST(VARG_MAX)) {
    LPXLOPER12 vargs[] = GET_VARGS;
    int args_passed = 0;
    for(int i = 0; i < VARG_MAX; ++i, ++args_passed) {
        if (vargs[i]->xltype == xltypeMissing) {
            break;
        }
    }
    XLOPER12 list;
    list.xltype = xltypeMulti | xlbitDLLFree;
    list.val.array.lparray = new XLOPER12[args_passed];
    list.val.array.rows = args_passed;
    list.val.array.columns = 1;
    for(int i = 0; i < args_passed; ++i) {
        list.val.array.lparray[i] = *vargs[i];
    }
    return &list;
} 
```

由于我们动态分配内存，我们需要定义回调来释放它。

```
__declspec(dllexport) void WINAPI xlAutoFree12(LPXLOPER12 p) {
    if (p->xltype == (xltypeMulti | xlbitDLLFree)) {
        delete [] p->val.array.lparray;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T16:35:39.540

您的解决方案不完整。

你写

```
XLOPER12 list; 
```

在函数体中。这使“列表”成为在堆栈上创建的局部变量。当函数返回时，“list”超出范围。您正在返回一个指向不再在范围内的变量的指针，并且当 Excel 尝试访问此指针时，行为未定义。如果 Excel 在处理返回值之前碰巧调用了另一个函数，您的列表变量将被破坏。

解决方案是您要么必须为 list 动态分配内存（然后确保它稍后被释放），要么让 list 成为静态或全局变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T02:38:38.197

不知道为什么您认为 xll 库不允许您开发开源插件。IANAL，但 Ms-PL 似乎允许这样做。你看过[http://xllfunctional.codeplex.com/](http://xllfunctional.codeplex.com/)吗？它使用了类似的非便携式技巧，不会将 boost 拖入解决方案。WINAPI/__stdcall 就是这样。如果你知道事情是如何发生在硅片上的，你就可以利用它。

# r - glm 和相对风险 - 在 R 中复制 Stata 代码

> ID：14301999
> 
> 赞同：6
> 
> 时间：2013-01-13T08:49:36.277
> 
> 标签：r, stata, glm

谁能帮我在 R 中复制这些相对风险计算（及其置信区间）？

[此处](http://www.ats.ucla.edu/stat/stata/faq/relative_risk.htm)描述了在 Stata 中使用的类似过程。谁能告诉我如何在 R 中做到这一点（我的数据有集群和层，但我举了一个更简单的例子）？我已经尝试了 relrisk.est 函数，但我更愿意使用调查包，因为它可以处理非常复杂的设计。我还想比较 Stata 和 R 的估计值。我按照[这里](http://r.789695.n4.nabble.com/relative-risk-regression-with-survey-data-td2538241.html)的建议使用泊松。

```
###STATA CODE
use http://www.ats.ucla.edu/stat/stata/faq/eyestudy 
tabulate carrot lenses
*same as R binomial svyglm below
xi: glm lenses carrot, fam(bin) 
*switch reference code
char carrot[omit] 1
xi: glm lenses i.carrot, fam(poisson) link(log) nolog robust eform

###R
library(foreign)
library(survey)
D<-read.dta("http://www.ats.ucla.edu/stat/stata/faq/eyestudy.dta")
table(D$lenses,D$carrot)
D$wgt<-rep(1,nrow(D))
Dd<-svydesign(id=~1,data=D,weights=~wgt)
#change category and eform....?
svyglm(lenses~carrot,Dd,family=binomial)
svyglm(lenses~carrot,Dd,family=quasipoisson(log)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T11:43:25.140

您的示例是一个简单的数据集，因此您根本不需要使用调查包。我还建议，在使用 R 学习多元回归时，您可以从更简单的示例开始，逐步建立对所涉及方法的理解。

毕竟，我的观点是 Stata 和 R 的理念不同。Stata 很容易在你面前抛出大量信息，而你却不知道它的含义或它是如何派生的。另一方面，R 可以同样（甚至更多）强大且更通用，但缺乏 Stata 的“自动化”，并迫使您放慢速度以获得您想要的结果。

这是您的 Stata 代码的更直译：

```
require(foreign)
data <- read.dta("http://www.ats.ucla.edu/stat/stata/faq/eyestudy.dta")
with(data, table(carrot, lenses))
glm.out.1 <- glm(lenses ~ carrot, family="binomial", data=data)
summary(glm.out.1)
logLik(glm.out.1)   # get the log-likelihood for the model, as well
glm.out.2 <- glm(lenses ~ factor(carrot, levels=c(1,0)), family="poisson"(link="log"), data=data)
summary(glm.out.2)
logLik(glm.out.2)
exp(cbind(coefficients(glm.out.2), confint(glm.out.2)))

# deriving robust estimates. vcovHC() is in the sandwich package.
require(sandwich)
robSE <- sqrt(diag(vcovHC(glm.out.2, type="HC")))[2]
rob <- coef(glm.out.2)[2]
rob <- exp(c(rob, rob+qnorm(0.025)*robSE, rob-qnorm(0.025)*robSE))
names(rob) <- c("", "2.5 %", "97.5 %")
rob 
```

请注意，`(link="log")`第二次`glm()`调用中的 不是必需的，因为它是 时的默认链接函数`family="poisson"`。

为了得出“稳健”的估计，我必须阅读[这个](https://stat.ethz.ch/pipermail/r-help/2008-May/161610.html)，这非常有帮助。您必须使用`vcovHC()`三明治包中的函数来获得与由 计算的不同的方差-协方差矩阵`glm()`，并使用它来计算标准误差和参数估计值。

“稳健”的估计与我从 Stata 得到的几乎相同，精确到小数点后三位。所有其他结果完全相同；运行代码并亲自查看。

哦，还有一件事：当您找到将 glm() 用于非分层设计的方式时，然后在`survey`包中映射您的方式，该包包含此功能的对应项以及针对复杂设计修改的其他分析功能。我还建议您阅读 Thomas Lumley 的书“复杂调查：使用 R 进行分析的指南”。