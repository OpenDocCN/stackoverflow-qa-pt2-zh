# StackOverflow 问答 15945000-15945999

# objective-c - 具有多个 AVPlayerViews 的 UIScrollView

> ID：15945000
> 
> 赞同：0
> 
> 时间：2013-04-11T09:17:28.253
> 
> 标签：objective-c, scrollview, avplayer

我需要你的帮助。我想`ScrollView`用一些`AVPlayers`. 我`ScrollView`用一些图片试过这个，它有效。现在的问题是我可以滚动`View`，但是所有的`AVPlayerViews`都在同一个位置，所以我只能看到最后加载的视频，而所有其他滚动位置都是空白的。

这是我的课程的来源：

```
@implementation VPVideoScroller

const CGFloat kScrollObjHeight  = 748.0;
const CGFloat kScrollObjWidth   = 1024.0;

NSUInteger numImages = 0;

- (void)viewDidLoad
{
    numImages = _pictureArray.count;
    [super viewDidLoad];

    self.view.backgroundColor = [UIColor viewFlipsideBackgroundColor];

    // 1\. setup the scrollview for multiple images and add it to the view controller
    self.scrollView.clipsToBounds = YES;

    // load all the images from our bundle and add them to the scroll view
    NSUInteger i;
    for (i = 1; i <= numImages; i++)
    {

        if (i<3) {

        /*
        //------------
        MPMediaItem *item = [self.pictureArray objectAtIndex:(i-1)];

        NSURL *url = [item valueForProperty:MPMediaItemPropertyAssetURL];
        */

        AVPlayerItem *playerItem = [AVPlayerItem playerItemWithURL:self.currentURL];

        AVPlayer *player = [AVPlayer playerWithPlayerItem:playerItem];

        //------------
            UIView *imageView = [[UIView alloc] init];

        AVPlayerLayer *playerLayer = [AVPlayerLayer playerLayerWithPlayer:player];
        [player play];
        /*
        UIImage *image = [self.pictureArray objectAtIndex:(i-1)];

        UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
        */

        // setup each frame to a default height and width, it will be properly placed when we call "updateScrollList"

        CGRect rect = imageView.frame;
        rect.size.height = kScrollObjHeight;
        rect.size.width = kScrollObjWidth;
        imageView.frame = rect;
        imageView.tag = i;  // tag our images for later use when we place them in serial fashion
        imageView.contentMode = UIViewContentModeScaleAspectFit;

        [imageView.layer addSublayer:playerLayer];
        playerLayer.frame = imageView.layer.bounds; 

        [self.scrollView addSubview:imageView];
        }
    }

    [self layoutScrollImages];  // now place the photos in serial layout within the scrollview
}

- (void)layoutScrollImages
{
    UIImageView *view = nil;
    NSArray *subviews = [self.scrollView subviews];

    // reposition all image subviews in a horizontal serial fashion
    CGFloat curXLoc = 0;
    for (view in subviews)
    {
        if ([view isKindOfClass:[UIImageView class]] && view.tag > 0)
        {
            CGRect frame = view.frame;
            frame.origin = CGPointMake(curXLoc, 0);
            view.frame = frame;

            curXLoc += (kScrollObjWidth);
        }
    }

    // set the content size so it can be scrollable
    //[self.scrollView setContentSize:CGSizeMake((numImages * kScrollObjWidth), [self.scrollView bounds].size.height)];

    [self.scrollView setContentSize:CGSizeMake((numImages * kScrollObjWidth), kScrollObjHeight)];

} 
```

`pictureArray`包含一个`Array`URL，但它们都是相同的。所以`AVPlayers`应该显示所有相同的视频。

![UIScrollView](https://i.stack.imgur.com/SxcO0.jpg)

先感谢您。凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:05:41.840

我已经找到了解决方案 :) 问题出在方法`-(void)layoutScrollImages`上。当然，我不使用`UIImageViews`. 这个需要改成`UIView`，因为`AVPlayer`玩家在`UIVIew`。

这个版本的方法是有效的。

```
- (void)layoutScrollImages
{
    UIView *view = nil;
    NSArray *subviews = [self.scrollView subviews];

    // reposition all image subviews in a horizontal serial fashion
    CGFloat curXLoc = 0;
    for (view in subviews)
    {
        if ([view isKindOfClass:[UIView class]] && view.tag > 0)
        {
            CGRect frame = view.frame;
            frame.origin = CGPointMake(curXLoc, 0);
            view.frame = frame;

            curXLoc += (kScrollObjWidth);
        }
    }

    // set the content size so it can be scrollable
    //[self.scrollView setContentSize:CGSizeMake((numImages * kScrollObjWidth), [self.scrollView bounds].size.height)];

    [self.scrollView setContentSize:CGSizeMake((numImages * kScrollObjWidth), kScrollObjHeight)];

} 
```

我希望这对其他人也有帮助。

# java - GWT 过滤器从未执行

> ID：15945003
> 
> 赞同：0
> 
> 时间：2013-04-11T09:17:48.157
> 
> 标签：java, gwt, servlets, web-crawler, servlet-filters

我正在开发一个 GWT 过滤器以使我的 GWT 应用程序可抓取。这个想法是，当它发现这样一个丑陋的 URL 时：

[http://www.myapp.com/?_escaped_fragment_=v;id=Mv67mC13Yizr](http://www.myapp.com/?_escaped_fragment_=v;id=Mv67mC13Yizr)

介绍一个好的：

[http://www.myapp.com/#!v;id=Mv67mC13Yizr](http://www.myapp.com/#!v;id=Mv67mC13Yizr)

但是，代码永远不会到达 doFilter()。为什么？

**Web.xml**

```
<filter>
    <filter-name>guiceFilter</filter-name>
    <filter-class>com.google.inject.servlet.GuiceFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>guiceFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

**DispatchServletModule.java**

```
public class DispatchServletModule extends ServletModule {

    @Override
    public void configureServlets() {
        serve("/" + ActionImpl.DEFAULT_SERVICE_NAME)
                .with(DispatchServiceImpl.class);
        filter("/").through(CrawlerServiceImpl.class);
    }
} 
```

**CrawlerServiceImpl.java**

```
 @Singleton
    public final class CrawlerServiceImpl implements Filter {
      private static final String ESCAPED_FRAGMENT_FORMAT1 = "_escaped_fragment_=";
      private  final int ESCAPED_FRAGMENT_LENGTH1 = ESCAPED_FRAGMENT_FORMAT1.length();
      private static final String ESCAPED_FRAGMENT_FORMAT2 = "&"+ESCAPED_FRAGMENT_FORMAT1;
      private  final int ESCAPED_FRAGMENT_LENGTH2 = ESCAPED_FRAGMENT_FORMAT2.length();

      @Inject(optional = true)
      private final Provider<WebClient> webClientProvider = null;

      @Override
      public void init(FilterConfig filterConfig) throws ServletException {  
      }
      @Override
      public void destroy() {
      }

      @Override
      public void doFilter(ServletRequest request, ServletResponse response,
          FilterChain chain) throws IOException, ServletException {
        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse res = (HttpServletResponse) response;
        String queryString = req.getQueryString();

        final String requestURI = req.getRequestURI();
        if ((queryString != null) && (queryString.contains(ESCAPED_FRAGMENT_FORMAT1))) {
          try {
            StringBuilder pageNameSb = new StringBuilder("http://");
            pageNameSb.append(req.getServerName());
            if (req.getServerPort() != 0) {
              pageNameSb.append(":");
              pageNameSb.append(req.getServerPort());
            }
            pageNameSb.append(requestURI);
            queryString = rewriteQueryString(queryString);
            pageNameSb.append(queryString);
            String pageName = pageNameSb.toString();
            WebClient webClient;
            if( webClientProvider == null )
              webClient = new WebClient(BrowserVersion.FIREFOX_3_6);
            else
              webClient = webClientProvider.get();

            webClient.setThrowExceptionOnScriptError(false);
            webClient.setJavaScriptEnabled(true);
            HtmlPage page = webClient.getPage( pageName );

            res.setContentType("text/html;charset=UTF-8");
            PrintWriter out = res.getWriter();
            out.println("<hr />");
            out.println("<center><h3>You are viewing a non-interactive page that is intended for the crawler.  "
                + "You probably want to see this page: <a href=\""
                + pageName
                + "\">"
                + pageName + "</a></h3></center>");
            out.println("<hr />");     
            out.println(page.asXml());
            webClient.closeAllWindows();
            out.println("");
            out.close();
          }
          catch( Exception e ) {
          }
        } else {
          chain.doFilter(request, response);
        }
      }

      private String rewriteQueryString(String queryString) throws UnsupportedEncodingException {
        int index = queryString.indexOf(ESCAPED_FRAGMENT_FORMAT2);
        int length = ESCAPED_FRAGMENT_LENGTH2;
        if (index == -1) {
          index = queryString.indexOf(ESCAPED_FRAGMENT_FORMAT1);
          length = ESCAPED_FRAGMENT_LENGTH1;
        }
        if (index != -1) {
          StringBuilder queryStringSb = new StringBuilder();
          if (index > 0) {
            queryStringSb.append("?");
            queryStringSb.append(queryString.substring(0, index));
          }
          queryStringSb.append("#!");
          queryStringSb.append(URLDecoder.decode(queryString.substring(index
              + length, queryString.length()), "UTF-8"));
          return queryStringSb.toString();
        }
        return queryString;
      }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:35:32.033

Guice 采用所有过滤器。要添加过滤器，您需要在 guice [servlet 模块](http://code.google.com/p/google-guice/wiki/ServletModule)中声明它：

`filter("/?_escaped_fragment_=*").through(CrawlerServiceImpl.class);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:26:45.340

Your`<url-pattern>`无效，`*`只允许作为模式的`/*`后缀或`*.`前缀；并且模式仅适用于路径，而不适用于查询字符串。

您必须将您的过滤器映射到参数`/`的过滤器检查`_escaped_fragment_`（我会亲自检查，然后使用）来决定是使用您`getMethod()`在服务器端获取和呈现页面，还是简单地链接到下一个过滤器。`"GET"``getParameter("_escaped_fragment_")``WebClient`

请注意，当您在您的过滤器中声明`web.xml`它不会被 Guice 注入时，所以就像[Dvd Prd](https://stackoverflow.com/a/15945388/116472)所说的那样，您可能宁愿在您的 Guice 中声明过滤器`ServletModule`。请注意，与*标准*映射类似，只有路径匹配，因此上述内容仍然适用（甚至 a`filterRegex()`也行不通）。

# java - 如何使用 Java 编写 PDF

> ID：15945010
> 
> 赞同：5
> 
> 时间：2013-04-11T09:18:04.397
> 
> 标签：java

我需要使用 Java 将一些文本写入 PDF 文档。我为此写了一个代码。但我无法打开文件。如果你们有什么想法，请与我分享。

```
public class WritPDF
{

    public static void main(String[] args)
    {
        Writer writer = null;

        try
            {
                String text = "This is a text file";

                File file = new File("C:/Users/PrinterTest/Hi1.pdf");
                writer = new BufferedWriter(new FileWriter(file));;
                writer.write(text);
            } catch (FileNotFoundException e)
            {
                e.printStackTrace();
            } catch (IOException e)
            {
                e.printStackTrace();
            } finally
            {
                try
                    {
                        if (writer != null)
                            {           
                            }
                    } catch (IOException e)
                    {}
            }
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T09:22:39.973

您的代码正在编写一个扩展名为`.pdf`. PDF 文件不是纯文本文件。

有几个库可用于在 Java 中处理 PDF 文件，例如[iText](http://itextpdf.com/)和[Apache PDFBox](http://pdfbox.apache.org/)。

# c++ - 未在此范围内声明错误

> ID：15945013
> 
> 赞同：1
> 
> 时间：2013-04-11T09:18:10.023
> 
> 标签：c++, scope

我有以下文件，但我不明白为什么它不起作用以及为什么我获得

> 'Pixel' 未在此范围内声明

这里是标题：

```
#ifndef TABRESULTATS_H
#define TABRESULTATS_H
#include "Ligne.h"
#include <iostream>
#include <cmath>
#include "Pixel.h"
#include <vector>

using namespace std;

class Tableresultats
{

    public:
        Tableresultats(vector<Pixel> pixels);
        Tableresultats(vector<Pixel> pixels, int seuil);
        Tableresultats();
        virtual ~Tableresultats();
    protected:
    private:
        vector<int> m_debut;
        vector<int> m_duree;
        vector<int> m_valeurMax;
        int m_seuilGris;
};

#endif // TABRESULTATS_H 
```

.cpp：

```
#include "Tableresultats.h"
#include "Ligne.h"
#include <iostream>
#include <cmath>
#include "Pixel.h"
#include <vector>

using namespace std;
int vmaxTemp;
int dureeTemp;

Tableresultats::Tableresultats();
{
    m_seuilGris=180;   //valeur par defaut
    vector<int> debut();
    vector<int> duree();
    vector<int> vmax();
    //ctor
}

Tableresultats::Tablesreultats(vector<Pixel> pixels);
{
    // ...
}

Tableresultats::Tableresultats(vector<Pixel> pixels, int seuil);
{
    m_seuilGris=seuil;   //valeur par defaut
    // ...
}

Tableresultats::~Tableresultats()
{
} 
```

还有我的班级像素：

```
#ifndef PIXEL_H
#define PIXEL_H
#include <iostream>
#include "Tableresultats.h"
using namespace std;
class Pixel
{
    public:
   ...

    protected:
    private:
        int m_couleurRGB[3]; //La couleur du pixel
        int m_niveauGris; //Niveau gris
        int m_posX; //reference X
        int m_posY; //reference Y
};

#endif // PIXEL_H 
```

我有其他文件，但我不明白为什么会出现这个问题：

> 像素未在此范围内声明，第 16 行 Tableresultats.h 标头

如果我已经声明`#include <vector>`并且`#include "Pixel.h"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:21:27.770

你在`Tableresultats.h`和之间有一个循环依赖`Pixel.h`（它们相互包含）。

您必须通过正确使用前向声明来解决这个问题。

或者如果可能的话，删除其中一个包含（从您发布的内容来看`Pixel.h`，它看起来不需要包含 for `Tableresultats.h`）。

# c# - 从 C# 以编程方式使用 cmd.exe

> ID：15945016
> 
> 赞同：1
> 
> 时间：2013-04-11T08:55:09.527
> 
> 标签：c#, command-line, process

1.  我想从 C# 在 cmd.exe 上运行一系列命令。
2.  我只需要打开一个cmd窗口
3.  我需要在执行过程中和完成后保持 cmd 窗口打开。
4.  我需要**在打开的 cmd 窗口 [/edit] 中显示命令 [edit]**以及命令的输出。

所以基本上我想像手动用户一样打开和使用 cmd.exe。我尝试了一些方法，但没有一个可以完成上述所有 4 项。

下面的代码有效，但不显示命令/输出并在完成后终止。有什么帮助吗？

```
Process p = new Process();
ProcessStartInfo info = new ProcessStartInfo("cmd.exe");
info.RedirectStandardInput = true;
info.UseShellExecute = false;
info.CreateNoWindow = false;
info.Arguments = "/k";

p.StartInfo = info;
p.Start();

using (StreamWriter sw = p.StandardInput)
{
    if (sw.BaseStream.CanWrite)
    {
         sw.WriteLine("dir");
         sw.WriteLine("ipconfig");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:36:02.890

-`RedirectStandard...`属性具有误导性。一旦您设置其中一个，所有三个流都将被重定向。这是因为底层 Windows API 只有一个标志来控制重定向 - `STARTF_USESTDHANDLES`.

由于您没有将该`RedirectStandardOutput`属性设置为 true，因此您的代码无法使用 stdout 流，而是将其重定向到`Console.Out`您自己的进程的流。因此，只要父进程是控制台应用程序，您的代码就可以正常工作；但在 Windows 应用程序中，输出被重定向到虚无。

一个简单的解决方法是将您的父进程临时变成控制台应用程序：

```
[DllImport("kernel32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool AllocConsole();

[DllImport("kernel32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool FreeConsole();

static void Main(string[] args)
{
    Process p = new Process();
    ProcessStartInfo info = new ProcessStartInfo("cmd.exe");
    info.RedirectStandardInput = true;
    info.UseShellExecute = false;
    info.CreateNoWindow = false;

    p.StartInfo = info;
    AllocConsole();
    p.Start();
    FreeConsole();

    using (StreamWriter sw = p.StandardInput)
    {
        if (sw.BaseStream.CanWrite)
        {
             sw.WriteLine("dir");
             sw.WriteLine("ipconfig");
        }
    }
} 
```

至于保持控制台打开：您可以删除`FreeConsole()`调用，以便父进程即使在 cmd.exe 退出后仍保留控制台。但是，如果您需要多个控制台，这可能是个问题，因为您的父进程一次不能与多个控制台关联。

或者，不要关闭输入流，以便 cmd.exe 继续运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:23:51.017

在命令执行后查看输出插入`Console.ReadLine();`（应用程序停止，直到您发送密钥以便您可以看到结果）。

```
 static void Main(string[] args)
            {
                Process p = new Process();
                ProcessStartInfo info = new ProcessStartInfo("cmd.exe");
                info.RedirectStandardInput = true;
                info.UseShellExecute = false;
                info.CreateNoWindow = false;

                p.StartInfo = info;
                p.Start();

                using (StreamWriter sw = p.StandardInput)
                {
                    if (sw.BaseStream.CanWrite)
                    {
                        sw.WriteLine("dir");

                        sw.WriteLine("ipconfig");
                    }
                }
                Console.ReadLine();
            } 
```

# javascript - 在 Javascript/jQuery 中延迟打印列表中的内容

> ID：15945017
> 
> 赞同：0
> 
> 时间：2013-04-11T09:18:27.397
> 
> 标签：javascript, jquery

我有一个 Javascript 字符串列表，我想打印到 HTML div 中。这是 Javascript 代码：

```
$(document).ready(function(){
list = ["One","Two","Three"];
for (var i = 0; i < list.length; i++){
    $("#content").html(list[i]);
}
}); 
```

哪个打印到 ID 为“内容”的 HTML div。但当然只有最后一个字出现。我想要的是控制每个 $("#content").html(list[i]); 之间的延迟。所以我可以一个接一个地看到列表中的每个单词。Javascript 或 jQuery 有解决方案吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:20:55.060

您可以使用[`setInterval`](https://developer.mozilla.org/en/docs/DOM/window.setInterval)

**[现场演示](http://jsfiddle.net/gVtbZ/)**

```
$(document).ready(function(){
 list = ["One","Two","Three"];
 index = 0;
 intr = setInterval(yourfun, 2000);

 function yourfun()
 { 
    $("#content").html(list[index++]);
    if(index == 3) clearInterval(intr);
 }
}); 
```

您可以使用`append`以前添加的内容，在[**此处查看**](http://jsfiddle.net/gVtbZ/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:21:41.350

首先，您可以使用`$.each()`调用而不是`for`语句

```
$.each(list , function(){
  setTimeout(function(){
   $("#content").text(this)  
 , 1000)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:15:40.127

使用 Promise 生成函数：

```
var list = ["One","Two","Three"];
var waitingTime = 1000;
function promiseToChangeText(i){
    return function (){
              $("#content").text(list[i])
           }
}
for (var i = 0; i < list.length; i++){
    setTimeout(promiseToChangeText(i),
               waitingTime*(i+1));
} 
```

使用每个：

```
$(document).ready(function () {
    var list = ["One","Two","Three"];
    var waitingTime = 1000;
    $(list).each( function (i,listItem) {
        setTimeout(function (){$("#content").
                                   text(listItem.toString())},
                   waitingTime*(i+1));
    });
}); 
```

# c++ - Cocos2d-x CCSprite->setDisplayFrame AccessViolation 崩溃

> ID：15945022
> 
> 赞同：1
> 
> 时间：2013-04-11T09:18:45.683
> 
> 标签：c++, cocos2d-iphone, cocos2d-x

到目前为止，我可以追踪我在 cocos2dx 应用程序中遇到的每一个错误/崩溃，但现在我觉得自己很愚蠢。我有一个 CCSprite 指针数组，我想做的是在玩家有 x 分数时从缓存中更改它的显示帧。

所有精灵帧都是从 plist 文件中读取的，并且精灵在那里并且正在工作，因为在尝试切换到新帧之前我可以毫无问题地看到它。“background.png”是一个有效的精灵帧名称，因为我用它来创建实际的精灵。

这条线工作正常（或至少它似乎工作）

```
CCSpriteFrame* frame = CCSpriteFrameCache::sharedSpriteFrameCache()->spriteFrameByName("background.png"); 
```

问题在于这一行：

```
for (int c = 0; c < sizeof(mBackground) / sizeof(CCSprite*); c++){
    mBackground[c]->setDisplayFrame(frame);
} 
```

这个也崩溃了：

```
CCSpriteFrame* frame = CCSpriteFrameCache::sharedSpriteFrameCache()->spriteFrameByName("background.png");
mBackground[0]->setDisplayFrame(frame); 
```

我的想法用完了，我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:35:00.520

确保图像存在于缓存中。如果不存在，则首先加载 spriteframe 以进行缓存。在更改显示框架之前，还将 mBackground[0] 添加到父级。

```
if(mBackground[0] && frame)
{
    mBackground[0]->setDisplayFrame(frame);
} 
```

# iphone - inApp restore：恢复的事务数为零

> ID：15945023
> 
> 赞同：3
> 
> 时间：2013-04-11T09:18:45.680
> 
> 标签：iphone, xcode, in-app-purchase, restore

我已经按照[这篇文章](https://stackoverflow.com/questions/11021932/in-app-purchases-restore-button)中的第二个答案（由 Brian Noah 提出） 来实现应用内恢复功能。在测试期间，我刚刚购买了一个应用程序内的项目并重新安装了该应用程序。但是现在，当我尝试恢复购买时，收到的恢复交易数量显示为零。我在这里做错了什么？请帮我。

在我调用“restoreCompletedTransactions”之后，该方法

```
- (void)paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue 
```

正在被调用。

但是方法

```
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions 
```

没有被调用。

提前致谢。

# c# - ASP.NET PostBack 选择树视图的复选框

> ID：15945027
> 
> 赞同：3
> 
> 时间：2013-04-11T09:18:59.780
> 
> 标签：c#, asp.net, treeview, postback

我有一个 asp.net 项目并使用 C# 工作。

在我的项目中，我有一个带有复选框的数据绑定列表框。

例如，当用户单击复选框时，它应该更新标签/文本框。

问题是，在我单击执行回发的按钮之前，它不会更新标签/文本框。我将如何调用复选框更改事件的回发，因为“OnTreeNodeCheckChanged”事件看起来只有在触发回发后才会触发？这甚至是一个好主意吗（每次更改复选框时都想调用回发）

--更新的代码片段-- Asp

```
 <asp:TreeView ID="treevCourses" runat="server" AutoPostBack="true" ShowCheckBoxes="All" Width="100%"
                OnTreeNodeCheckChanged="check_changed" Height="16px" ImageSet="Contacts"> 
```

（尝试在 C# 部分使用处理程序。）C#

```
protected void check_changed(object sender, TreeNodeEventArgs e)
        {
        lblTest.Text = "TestText";
        } 
```

（也尝试将它放在脚本部分）

```
void check_changed(object sender, EventArgs e)
    {
        lblTest.Text = "TestText";
    } 
```

将数据绑定到 Treeview（这发生在按钮回发上）

```
foreach (DataRow row in ds.Tables[0].Rows)
                {
                    TreeNode node = new TreeNode(row["courseName"].ToString(), row["courseName"].ToString());
                    //  node.PopulateOnDemand = true;
                    treevCourses.Nodes.Add(node);
                }

                //select from topic where parentId = topicId.
                ds = myConClass.returnSqlDataset("select cd.courseName,ct.[date] from courseDetails cd join courseTimes ct on cd.courseId = ct.courseId");

                foreach (TreeNode treenode in treevCourses.Nodes)
                {
                    foreach (DataRow row in ds.Tables[0].Rows)
                    {
                        if (row["courseName"].ToString() == treenode.Value)
                        {
                            TreeNode node = new TreeNode(row["date"].ToString(), row["date"].ToString());
                            treenode.ChildNodes.Add(node);
                        }
                    }       
                } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T10:06:09.647

TreeView 上没有`AutoPostBack`属性。根据[MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treeview.ontreenodecheckchanged.aspx)，当控件`TreeNodeCheckChanged`中的复选框在`TreeView`发送到服务器的帖子之间更改状态时，会引发该事件

您需要做其他事情，就像在[这个链接上提到的那样](http://forums.asp.net/post/3995882.aspx)

1）在页面加载时将点击属性添加到 TreeView1

```
protected void Page_Load(object sender, EventArgs e)
{
     TreeView1.Attributes.Add("onclick", "postBackByObject()");
} 
```

2）添加java脚本功能并回发

```
 <script type="text/javascript">

     function postBackByObject()
     {
         var o = window.event.srcElement;
         if (o.tagName == "INPUT" && o.type == "checkbox")
        {
           __doPostBack("","");
        } 
    }
   </script> 
```

3）。实施`TreeNodeCheckChanged`事件

```
protected void TreeView1_TreeNodeCheckChanged(object sender, TreeNodeEventArgs e)
        {
            // do stuff
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:22:26.413

当您动态绑定 TreeView`TreeNodeCheckChanged`时，当您单击复选框时不会触发该事件，您可以通过一点 javascript 轻松克服这个问题：

**ASPX：**

```
<head runat="server">
    <script type="text/javascript">
        function fireCheckChanged() {
            var o = window.event.srcElement;
            if (o.tagName == "INPUT" && o.type == "checkbox") {
                __doPostBack("", "");
            }
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:TreeView ID="treevCourses" runat="server" 
            ShowCheckBoxes="Parent,Leaf" Width="100%" Height="16px" ImageSet="Contacts" 
            ontreenodecheckchanged="check_changed" />
    </div>
    </form>
</body> 
```

**后面的代码：**

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        var data = new XmlDataSource();
        data.DataFile = Server.MapPath("~/input.xml");
        treevCourses.DataSource = data;
        treevCourses.DataBind();

        treevCourses.Attributes.Add("onclick", "fireCheckChanged()");
    }
}

protected void check_changed(object sender, TreeNodeEventArgs e)
{
    string clickedNode = e.Node.Text;
    System.Diagnostics.Debugger.Break();
} 
```

*这是个好主意吗*？显然，每次更改复选框状态时都向服务器发送请求会占用大量资源，但是如果您无法使用 javascript 复制相同的功能，那么这是您唯一的选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-09T11:38:02.507

替换此行

```
treevCourses.Attributes.Add("onclick", "fireCheckChanged()"); 
```

和

```
treevCourses.Attributes.Add("onclick", "fireCheckChanged(event)"); 
```

并将脚本替换为

```
 function fireCheckChanged(e) {
 var evnt = ((window.event) ? (event) : (e));
 var element = evnt.srcElement || evnt.target;

 if (element.tagName == "INPUT" && element.type == "checkbox") {
      __doPostBack("", "");
}} 
```

# list - 如何在运行时更新 lwuit 中的列表内容

> ID：15945028
> 
> 赞同：0
> 
> 时间：2013-04-11T09:19:01.120
> 
> 标签：list, java-me, lwuit

我设计了一个带有文本字段和底部列表的 lwiit 表单。现在，我想要以下功能：

每次用户更改文本字段内容时，都应刷新列表（如自动完成功能）但我不知道如何刷新列表？为了创建一个列表，我使用了以下代码：

```
choicelists = createList(urbanplacechoiceGroup, List.VERTICAL, new PlaceRenderer()); 
```

并收听 texhfield 变化：

```
Urbanareas_textpublic.addDataChangeListener(new DataChangedListener() {

        public void dataChanged(int type, int index) {
            System.out.println("text content: " + Urbanareas_textpublic.getText());
            populateurbanplacechoiceGroup();
         }
    }); 
```

urbanplacechoiceGroup 用于填充其内容用于选择列表的 urbanplacechoiceGroup。

我找到了这个函数，它确实更新了一个列表：

选择列表.setRenderer(新 PlaceRenderer());

这是更新列表的标准方法吗？之前创建的 PlaceRenderer 对象发生了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:13:59.157

您可以在与[ListCellRenderer](http://lwuit.blogspot.co.il/2008/07/lwuit-list-renderer-by-chen-fishbein.html)一起使用的列表中使用。

这是用于显示数据列表的动态列表。此外，此列表保存在内存中使用，因为他不创建列表而仅使用数据显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:49:07.217

见这篇文章[http://codenameone.blogspot.com/2008/06/lightweight-text-input-in-lwuit.html](http://codenameone.blogspot.com/2008/06/lightweight-text-input-in-lwuit.html)

它涵盖了动态过滤列表，基本上你正在寻找的是一个列表模型，它抽象了列表的数据。

# android - 不同设备android中的不同颜色

> ID：15945029
> 
> 赞同：2
> 
> 时间：2013-04-11T09:19:01.413
> 
> 标签：android, android-layout

我为安卓设计了一个应用程序。为此，我为操作栏使用了绿色。我已经应用了我设计屏幕的颜色。但是颜色在不同的设备上看起来不同。我怎么能说这个设备是正确的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:28:34.760

颜色会根据手机的显示类型而有所不同，例如 Galaxy S3 的 Super AMOLED 显示屏可提供更多荧光色。AMOLED 显示屏中使用的有机材料在一段时间内容易降解，导致颜色偏移一种颜色比另一种颜色褪色更快，图像持久性或老化。LED 背光 LCD，提供更逼真的颜色，但亮度可能会更低。

通常，您可以为操作栏分配一种颜色，并在不同设备中查看该颜色，然后选择一种在所有设备上都显示良好的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:31:19.997

> 如何解决这个问题呢？

你不能，因为这很可能不是你的错。只是硬件不同而已。您对此无能为力。

> 请建议我一个解决方案。

忽略这一点。

# arrays - 迭代时更改值

> ID：15945030
> 
> 赞同：181
> 
> 时间：2013-04-11T09:19:03.307
> 
> 标签：arrays, for-loop, go

假设我有这些类型：

```
type Attribute struct {
    Key, Val string
}
type Node struct {
    Attr []Attribute
} 
```

并且我想迭代我的节点属性以更改它们。

我很想能够做到：

```
for _, attr := range n.Attr {
    if attr.Key == "href" {
        attr.Val = "something"
    }
} 
```

但由于`attr`不是指针，这不起作用，我必须这样做：

```
for i, attr := range n.Attr {
    if attr.Key == "href" {
        n.Attr[i].Val = "something"
    }
} 
```

有没有更简单或更快的方法？是否可以直接从中获取指针`range`？

显然我不想仅仅为了迭代而改变结构，更冗长的解决方案不是解决方案。

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2013-04-11T15:11:15.713

不，你想要的缩写是不可能的。

这样做的原因是`range`从您正在迭代的切片中复制值。[关于范围](http://golang.org/ref/spec#RangeClause)的规范说：

> ```
> Range expression                          1st value             2nd value (if 2nd variable is present)
> array or slice  a   [n]E, *[n]E, or []E   index    i  int       a[i]       E 
> ```

因此，范围`a[i]`用作数组/切片的第二个值，这实际上意味着该值被复制，使原始值不可触及。

[以下代码](http://play.golang.org/p/fTLS5Y69Mk)演示了此行为：

```
x := make([]int, 3)

x[0], x[1], x[2] = 1, 2, 3

for i, val := range x {
    println(&x[i], "vs.", &val)
} 
```

该代码为范围中的值和切片中的实际值打印完全不同的内存位置：

```
0xf84000f010 vs. 0x7f095ed0bf68
0xf84000f014 vs. 0x7f095ed0bf68
0xf84000f018 vs. 0x7f095ed0bf68 
```

因此，您唯一能做的就是使用指针或索引，正如 jnml 和 peterSO 已经提出的那样。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-04-11T11:07:12.683

您似乎在要求与此等效的东西：

```
package main

import "fmt"

type Attribute struct {
    Key, Val string
}
type Node struct {
    Attr []Attribute
}

func main() {

    n := Node{
        []Attribute{
            {"key", "value"},
            {"href", "http://www.google.com"},
        },
    }
    fmt.Println(n)

    for i := 0; i < len(n.Attr); i++ {
        attr := &n.Attr[i]
        if attr.Key == "href" {
            attr.Val = "something"
        }
    }

    fmt.Println(n)
} 
```

输出：

```
{[{key value} {href http://www.google.com}]}
{[{key value} {href something}]} 
```

`Attribute`这避免了以切片边界检查为代价创建类型值的（可能很大）副本。在您的示例中，类型`Attribute`相对较小，两个`string`切片引用：2 * 3 * 8 = 64 位架构机器上的 48 个字节。

你也可以简单地写：

```
for i := 0; i < len(n.Attr); i++ {
    if n.Attr[i].Key == "href" {
        n.Attr[i].Val = "something"
    }
} 
```

`range`但是，使用创建副本但最小化切片边界检查的子句获得等效结果的方法是：

```
for i, attr := range n.Attr {
    if attr.Key == "href" {
        n.Attr[i].Val = "something"
    }
} 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2013-04-15T11:24:28.470

我会调整您的最后建议并使用仅索引版本的范围。

```
for i := range n.Attr {
    if n.Attr[i].Key == "href" {
        n.Attr[i].Val = "something"
    }
} 
```

在我看来，在测试行和设置行中`n.Attr[i]`明确引用似乎更简单，而不是使用一个和另一个。`Key``Val``attr``n.Attr[i]`

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-04-11T09:28:17.903

例如：

```
package main

import "fmt"

type Attribute struct {
        Key, Val string
}

type Node struct {
        Attr []*Attribute
}

func main() {
        n := Node{[]*Attribute{
                &Attribute{"foo", ""},
                &Attribute{"href", ""},
                &Attribute{"bar", ""},
        }}

        for _, attr := range n.Attr {
                if attr.Key == "href" {
                        attr.Val = "something"
                }
        }

        for _, v := range n.Attr {
                fmt.Printf("%#v\n", *v)
        }
} 
```

[操场](http://play.golang.org/p/5ohohUiNrU)

* * *

输出

```
main.Attribute{Key:"foo", Val:""}
main.Attribute{Key:"href", Val:"something"}
main.Attribute{Key:"bar", Val:""} 
```

* * *

替代方法：

```
package main

import "fmt"

type Attribute struct {
        Key, Val string
}

type Node struct {
        Attr []Attribute
}

func main() {
        n := Node{[]Attribute{
            {"foo", ""},
            {"href", ""},
            {"bar", ""},
        }}

        for i := range n.Attr {
                attr := &n.Attr[i]
                if attr.Key == "href" {
                        attr.Val = "something"
                }
        }

        for _, v := range n.Attr {
                fmt.Printf("%#v\n", v)
        }
} 
```

[操场](http://play.golang.org/p/7lx8I3Qixr)

* * *

输出：

```
main.Attribute{Key:"foo", Val:""}
main.Attribute{Key:"href", Val:"something"}
main.Attribute{Key:"bar", Val:""} 
```

# maven - 根据特定项目级联安装Maven项目的策略

> ID：15945033
> 
> 赞同：0
> 
> 时间：2013-04-11T09:19:12.943
> 
> 标签：maven

我必须处理许多其他 Maven 项目引用的 Maven 项目 A。我想确保安装项目 A (mvn install) 会导致安装依赖于项目 A 的项目。我想知道什么是最好的策略？使用安装引用项目 A 的项目的插件是一种好习惯吗？

感谢您的回答。

PS：由于项目A是JAR Maven项目，所以不能认为是多模块项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:20:17.780

正如您所知道的所有需要​​的重建，手动执行此操作很痛苦。我建议您执行以下操作：

*   安装 Jenkins 或其他持续集成工具
*   每次对项目的源代码控制存储库进行更改时，都有一项构建工作来构建和部署（到 Nexus* 等工具）项目 A
*   为每个后续项目创建一个构建作业，它将采用新部署的项目 A 版本，并将构建的工件部署到 Nexus

*   Nexus 是一个 Maven 存储库管理器。

# apache - Rewrite_mod 将 http://localhost/ 重定向到 http://localhost/home/

> ID：15945034
> 
> 赞同：0
> 
> 时间：2013-04-11T09:19:26.480
> 
> 标签：apache, mod-rewrite, redirect

我似乎找不到任何关于如何实现重写以重定向`http://localhost:8888/`到的信息`http://loclahost:8888/home/`

我试过了：

```
RedirectMatch ^/$ http://localhost:8888/website/home/ 
```

但这给了我一个无限循环。

我已经应用了以下规则：

```
RewriteCond  %{REQUEST_URI} home/ 
RewriteRule home/ http://localhost:8888/website/index.php [L]

RewriteCond  %{REQUEST_URI} ([a-z]*)/ 
RewriteRule ([a-z]*)/ http://localhost:8888/website/$1.php 
```

我从以下网址获得此信息：[http ://httpd.apache.org/docs/2.4/rewrite/remapping.html#moveddocroot](http://httpd.apache.org/docs/2.4/rewrite/remapping.html#moveddocroot)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:51:50.113

我设法让它工作使用：

```
RedirectMatch ^/website/$ http://localhost:8888/website/home/ 
```

# .htaccess - 在 URL 中将 PHP 文件显示为无扩展名的文件或文件夹

> ID：15945036
> 
> 赞同：1
> 
> 时间：2013-04-11T09:19:32.993
> 
> 标签：.htaccess, apache2

以前，服务器允许我引用任何没有扩展名的 PHP 文件。我试过玩`mod_rewrite`in `.htaccess`。

不幸的是，看起来我的 htaccess-fu 已经耗尽，我无法让它与子文件夹一起使用。我可以重定向`staticfilename.css`，但不能`static/filename.css`。

* * *

**问：**给定一个（虚拟）文件夹和可以处理`static/`的 PHP 脚本，让 Apache2 加载URL的**最简单**方法是什么？`static.php``static.php/filename.css`**`static.php/filename.css``static/filename.css`**

 **`.htaccess`- 只有解决方案是首选。但是，如果需要，我也可以进行特定于虚拟主机或服务器范围的更改。

* * *

把它放在`<VirtualHost>`帮助中，但我对有这样一个特定于单个站点、单个文件的节感到很糟糕。

```
RewriteRule ^(.*)/static/(.*)$ $1/static.php/$2 [P] 
```

因此，我仍然希望找到一种重定向其他类似文件的方法：`davrun.php`例如，我调用的一个脚本在同一服务器上的不同站点中处理 WebDAV，并以更通用的方式（或以每个`.htaccess`可用的方式）也将允许在该脚本中提供更自然的路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:28:30.203

你试过这个吗？

```
RewriteEngine on
RewriteRule ^static/(.*)$ /static.php/$1 [L] 
```

（我想你知道如何使用 /static.php/filename.css 加载 static.php）**

# ios - 如何在 iOS 日历中重置 EKAuthorizationStatusRestricted？

> ID：15945039
> 
> 赞同：0
> 
> 时间：2013-04-11T09:19:46.127
> 
> 标签：ios, calendar, authorization, status

在我的应用程序中，我试图在用户的日历中添加条目。为了在我的 UI 中反映授权状态，我使用`authorizationStatusForEntityType`来确定用户是否已授予或拒绝权限。第一次，即在应用程序请求许可之前，状态为`EKAuthorizationStatusNotDetermined`。显示问题后，我找不到将状态恢复到`EKAuthorizationStatusNotDetermined`以便我继续测试我的应用程序的方法。即使删除并重新安装我的应用程序也无济于事。我可以转到“设置”、“常规”、“重置”、“重置位置和隐私”，但这会删除我的**所有**隐私设置，而不仅仅是我的应用程序的设置。

所以问题是：有没有办法重置我的应用程序的授权？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:46:37.317

除了您已经描述的方式（即设置->全部重置）之外，没有其他方法可以重置授权状态。

# python - 修改python中的字符列表

> ID：15945048
> 
> 赞同：0
> 
> 时间：2013-04-11T09:19:58.637
> 
> 标签：python, list, set

我有一个用于创建 FASTA 序列文件的程序。

```
input=['ARIMALTHNAEYSDSFTAL','ARIMFLTHNFEYSESFTAL','AHIMNPTENAEYHESFTAL','AHIMNPTENTEYWDSFTAL','AHIMNDTHNFEYHDSFTAL','AHIMNDTNNTEYWESFTAL','ARIMFDTENAEYHDSFTAL','AHIMADTNNTEYWDSFTAL','ARIMFLTENTEYHESFTAL']

l = len(input[0])

my_residues = [set() for _ in xrange(l)]
for h in input: 
    for i, x in enumerate(h): 
        my_residues[i].add(x)

my_residues = [list(x) for x in my_residues]
print my_residues 
```

这将给出这样的输出

```
[['A'], ['H', 'R'], ['I'], ['M'], ['A', 'N', 'F'], ['P', 'L', 'D'], ['T'], ['H', 'E', 'N'], ['N'], ['A', 'T', 'F'], ['E'], ['Y'], ['H', 'S', 'W'], ['E', 'D'], ['S'], ['F'], ['T'], ['A'], ['L']] 
```

但我希望以这样一种方式输出，如果它包含多个残基，则所有氨基酸残基都在一组中。所以输出应该是这样的：

```
[['A'], ['A','C','D','E','F','G','H','I','K','L','M','N','P','Q','R','S','T','V','W','Y'], ['I'], ['M'], ['A','C','D','E','F','G','H','I','K','L','M','N','P','Q','R','S','T','V','W','Y'], ['A','C','D','E','F','G','H','I','K','L','M','N','P','Q','R','S','T','V','W','Y'], ['T'], ['A','C','D','E','F','G','H','I','K','L','M','N','P','Q','R','S','T','V','W','Y'],......  ['F'], ['T'], ['A'], ['L']] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:24:39.110

您需要在构建时跟踪所有氨基酸残基`my_residues`，然后当您再次循环创建列表时，如果长度不是 1，则将集合替换为所有可能的氨基酸残基列表：

```
import string
all_residues = sorted(set(string.ascii_uppercase) - set('BJOUXZ'))

my_residues=[set() for _ in xrange(len(input[0]))]
for h in input: 
    for i, x in enumerate(h): 
        my_residues[i].add(x)

my_residues=[list(x) if len(x) == 1 else all_residues for x in my_residues]
print my_residues 
```

这打印：

```
[['A'], ['A', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'V', 'W', 'Y'], ['I'], ['M'], ['A', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'V', 'W', 'Y'], ['A', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'V', 'W', 'Y'], ['T'], ['A', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'V', 'W', 'Y'], ['N'], ['A', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'V', 'W', 'Y'], ['E'], ['Y'], ['A', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'V', 'W', 'Y'], ['A', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'V', 'W', 'Y'], ['S'], ['F'], ['T'], ['A'], ['L']] 
```

# macos - OSX 二进制 couchDB 无法验证并在退出状态为 1 的视图上失败

> ID：15945055
> 
> 赞同：0
> 
> 时间：2013-04-11T09:20:14.520
> 
> 标签：macos, couchdb

下载并启动 couchDB server/app 后，验证测试和所有视图都会返回一个错误，并以此开头：

```
{{badmatch,{error,{bad_return_value,{os_process_error,{exit_status,1}}}}} 
```

沙发数据库版本是 1.3.0

我正在运行 OSX 10.8.3 我需要从源代码构建吗？如果可能的话，我更喜欢二进制版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:20:14.520

二进制 couchDB 作为独立应用程序分发。当您执行它时，它将启动 couchDB 服务，该服务现在将作为服务运行，您可以在“apache couchDB”下的任务管理器中找到该服务。

如果您打开应用程序/启动服务器，然后想将应用程序移动到更方便的位置（例如您的应用程序文件夹），则必须关闭正在运行的服务。

如果您在不关闭服务器的情况下移动它，您将收到问题中描述的错误。

所以解决方案是简单地从任务管理器中终止正在运行的服务，移动 couchDB 应用程序，然后重新启动它。它现在应该按预期工作。

# vb.net - 单线程应用程序线程安全吗

> ID：15945063
> 
> 赞同：0
> 
> 时间：2013-04-11T09:20:28.083
> 
> 标签：vb.net

我理解多线程单元的概念，即如果一个对象是由一个线程创建的，那么它可以在所有其他线程中使用。

我读过每个进程有一个多线程单元。在 ASP.NET 中，通常有一个用于 IIS 的 W3WP.exe 进程。因此，IIS 如何区分一个用户在一个会话或一个应用程序中创建的对象和另一个用户在另一个会话中创建的对象？我假设使用了 Session 对象和 Application 对象，但我不清楚，想知道是否还有其他机制。

工作线程和 I/O 线程如何适应这个概念？即，如果我有一个程序不创建自己的任何线程（使用 System.Threading.Thread）并且不使用除 .NET 框架的那些部分之外的任何第三方库，那么我假设所有代码在该程序是线程安全的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T23:50:55.633

当您处理标准 FORMS 或 CMD Line 应用程序时，假设您不创建任何显式线程并且不使用任何暗示单独线程（如后台工作程序）的组件，那么您将在主应用程序线程上操作所有正常输入的用户代码. 系统将创建其他线程来执行各种操作以支持您的应用程序，但出于所有密集目的，您可以认为它是线程安全的。还有其他线程将是 otehr 组件的一部分，并且应该已经以安全的方式进行编码，以便在没有任何冲突或跨线程问题的情况下进行交互。

正如您所指出的，在 ASP.NET 中这是不同的。除了特定页面之外，IIS 并不真正关心您创建的对象。您的主线程是针对给定请求的，实际上主要对象是“页面”，页面中存储的任何内容都位于这种没有冲突可以真正解决的隐蔽空间中。也是会话对象，这是特定于页面的，并且尽可能与特定请求隔离，因此是安全的。从来没有一个 Page 或 Session 对象暴露给另一个，但是这些页面都在同一个应用程序中，并且从技术上讲可以相互看到（除非你做了一些非常奇怪的编码，这肯定会非常非常糟糕）。

在更大程度上变得不安全的是应用程序对象。如果您将对象存储在应用程序空间中并在多个页面请求中使用它，您需要确保您对对象所做的任何事情都不会与可以在并行请求中处理的另一个请求发生冲突。这方面的一个例子可以是在应用程序空间中存储项目的静态数据表。但是，如果您必须采用一种安全的方法来处理它，我通常不会这样做，那就是使用同步对象来不允许来自一个请求/线程的代码与该对象重叠。另请注意，应用程序对象/空间实际上与 VB.Net 中的公共模块空间相同，我使用一个模块来显示下面的示例......

**示例** *（这是非常简化的，而不是我通常在代码中做的事情，它只是为了解释 SYNCLOCK 机制）*

```
Public Module SharedSpace

    ' what object is used as a syncronizer is irrelavent, just needs defined only once at the start of the application.
    Public SyncDT As New Exception("none")

    Public dt As DataTable

End Module

Public Class PageItem
    Inherits System.Web.UI.Page

    Private Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load

        SyncLock SyncDT
' ...
' work with "dt" ONLY inside the synclock space
' SyncLock blocks can be anywhere but they need to be as short as possible.
' Any code running in another page request will STOP trying to enter the SyncLock (for the object specified) 
' and waits until any existing SyncLock on the same object is released by exiting the SyncLock.
' ...
        End SyncLock

    End Sub

End Class 
```

实际上，只要“dt”仅在具有“Synclock SyncDT”的块内访问，它在多个线程之间是安全的。但是，以这种方式在没有 SyncLock 的情况下访问“dt”是不可接受的，因为可能会发生重叠。

.NET 中还有其他线程编组对象，Synclock 是我的首选。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-24T03:48:31.837

单线程进程不能保证线程安全。如果一个进程接收到一个信号，并且当访问一些关键数据时进程停止，并且单个处理程序也访问了该关键数据，那么它不是线程安全的。

# jquery - 在 jquery Tag-it 中获取 tagLabel

> ID：15945080
> 
> 赞同：0
> 
> 时间：2013-04-11T09:21:09.443
> 
> 标签：jquery, tag-it

这是我的代码：

```
$("#AddFriendToGroup" + GroupID).tagit({
                    allowDuplicates: false,
                    readOnly: false,
                    autocomplete: { source: function (request, showChoices) {
                        $.ajax({
                            type: 'POST',
                            url: 'ChatPageTest.aspx/tagFriendAutocomplete',
                            data: "{'ClientID':'" + $("#UserID").val() + "','ClientName': '" + request.term + "'}",
                            contentType: 'application/json; charset=utf-8',
                            dataType: 'json',
                            success: function (data) {
                                returndData = data;
                                showChoices($.map(data.d, function (item) {

                                    return {
                                        label: item.split('-')[0],
                                        val: item.split('-')[1]
                                    }
                                }))
                            },
                            error: function (xhr) {
                                alert("responseText: " + xhr.responseText);
                            }
                        });
                    }
                    },
                    beforeTagAdded: function (event, ui) {

                        if ($.inArray(ui.tagLabel, returndData) == -1) return false;
                    },
                    minLength: 2
                }); // tagit 
```

服务器端 ：

```
public static string[] tagFriendAutocomplete(int ClientID,string ClientName)
{
    List<string> Friends = new List<string>();
    string query = "select fr.FRIEND_ID,c.[USER_NAME] from clients c inner join friends fr on c.CLIENT_ID=fr.FRIEND_ID and fr.CLIENT_ID=" + ClientID + " and c.[USER_NAME] like '%" + ClientName + "%' ";

    DataTable dt = new SQLHelper(SQLHelper.ConnectionStrings.WebSiteConnectionString).getQueryResult(query);
    if (dt.Rows.Count > 0)
    { 
       for(int i=0;i<dt.Rows.Count;i++)
       {
          Friends.Add(string.Format("{0}-{1}",dt.Rows[i]["USER_NAME"], dt.Rows[i]["FRIEND_ID"]));
        }
    }

    return Friends.ToArray();
} 
```

我的问题是当我尝试从自动完成建议中添加新标签时，不会添加新标签我想我的问题出在 beforeTagAdded 函数中，谁能帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:39:49.000

```
.tagit("add", {label: 'tag', value: 12}) 
```

我在文档中找到了这个[检查一下](https://github.com/hailwood/jQuery-Tagit#methods)

此外，您似乎应该启用`allowNewTags`选项`TRUE`，也许这会导致错误，因为您尝试插入新标签而插件不允许这样做，[请检查选项](https://github.com/hailwood/jQuery-Tagit#options)

# c# - ClickOnce 代码签名：“从商店中选择”还是“从文件中选择”？

> ID：15945082
> 
> 赞同：1
> 
> 时间：2013-04-11T09:21:15.033
> 
> 标签：c#, clickonce, code-signing-certificate

当您转到 Click Once 应用程序的项目设置的签名页面时，有两个选项：

*   从商店中选择
*   从文件中选择

我们已经在我们所有的开发机器和我们的构建机器上安装了我们的证书。

因此，我们可以选择其中一个，但如果我们选择“从文件中选择”，它会将 PFX 文件复制到项目中。（有趣的是，如果证书在您的证书存储中，即使您从项目中删除 pfx 文件，发布也可以正常工作）。

所以目前，我们总是选择“从商店中选择”，这很好。

但是我们做对了吗？或者有什么理由我们应该使用“从文件中选择”来代替？“从文件中选择”仅适用于商店中没有证书的情况吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T05:41:32.237

我认为这两种方式都不重要。

如果您在所有这些机器上都没有证书，那么通过执行“从文件中选择”并将 .pfx 检入源代码管理中会更快。

我们限制了对 .pfx 密码的访问，所以这是另一回事。我们还需要在构建后更改清单文件。因此，我们不在构建时启用代码签名，而是在构建后过程中使用共享上的 .pfx 对事物进行签名。构建自动化从其日志中隐藏密码，因此没有开发人员真正知道密码。

所有三种方式（来自文件、来自存储、构建后）最终都会让您签署清单。每种方式都有其优点和缺点，具体取决于公司政策。

# ios - 如何从 epub 文件中获取图像 url

> ID：15945084
> 
> 赞同：0
> 
> 时间：2013-04-11T09:21:17.033
> 
> 标签：ios, epub

我创建了一个应用程序来读取 ePub 文件作为@Euan 的帖子

[阅读 ePub 格式](https://stackoverflow.com/questions/1388467/reading-epub-format)

Epub 文件可能包含图像和文本。图像看起来像图标。当我们点击 ePub 文件中的图像时，我想以最大化的方式显示图像。我怎样才能做到这一点。帮我

提前致谢。

祝你今天过得愉快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:32:24.273

当您在 Web 视图中加载 html 文件时，请确保使用`loadHTMLString:baseURL:`或正确设置基本 URL `loadData:MIMEType:textEncodingName:baseURL:`。然后 webview 应该正常加载图像。

如果您想在用户点击时最大化它们，最简单的方法是这样的：

*   将 jQuery 注入到您的 EPUB html 中`webViewDidFinishLoad:`
*   使用 jQuery向所有`<img>`标签添加一个操作，该操作使用自定义 url 协议调用可可方法，例如`my-epub-app://maximize-img/cool-photo.jpg`
*   捕获并处理您的自定义协议`webView:shouldStartLoadWithRequest:navigationType:`并返回`NO`以防止 webview 尝试加载您的无效 URL。

希望这会有所帮助……</p>

# php - Laravel 在带参数的控制器中过滤之前

> ID：15945086
> 
> 赞同：0
> 
> 时间：2013-04-11T09:21:25.660
> 
> 标签：php, filter, controller, laravel, laravel-3

我的控制器中的过滤器和参数有一些问题。也许你们中的一个可以帮助我。谢谢你。我有一个类似于这个的控制器：

```
class Test extends Base_Controller
{

    public function __construct()
    {
        parent::__construct();    
        $this->filter('before', 'permission:destroy|auth')->only(array('show'));        
    }
    public function action_show($id)
    {
    } 
```

我定义了一个这样的过滤器：

```
Route::filter('permission', function($permission)
{
    echo $permisson; 
```

如果我现在调用控制器，`$permission`我的过滤器的值就是`$id`通过`action_show($id)`方法传递的值。但是当我有一个没有参数的控制器方法时，一切正常。如何始终获取过滤器参数而不是方法参数？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:14:29.793

我可以确认会发生什么……当您将过滤器添加到控制器时，传递给操作的任何参数都会添加到过滤器参数的前面。您可以使用`func_get_args()`来确认是这种情况。

但是，当您将过滤器添加到路由时，情况并非如此，过滤器在没有任何附加参数的情况下运行。

所以我可以在这里看到 2 个选择，或者将过滤器添加到路由中......

```
Route::get('test/(:any)', array('before' => 'permission:destroy|auth', 'use' => 'test@show')); 
```

或修改您的过滤器以使用`func_get_args()`，例如...

```
Route::filter('permission', function()
{
    $args = func_get_args();
    $permission = array_pop($args);

}); 
```

# html - 在 StageWebViewBridge 上加载本地 html 时出错

> ID：15945088
> 
> 赞同：1
> 
> 时间：2013-04-11T09:21:27.510
> 
> 标签：html, flash, apache-flex, air, stagewebviewbridge

当我尝试在 StageWebViewBridge 容器上加载本地 html 时出现此错误：

> 错误 #2044：未处理的错误事件：。文本=加载错误。

代码：

```
private function onDiskCacheEnd( e:StageWebviewDiskEvent ):void{
    bridge = new StageWebViewBridge( 0, 0, 1280, 720 );
    bridge.loadLocalURL('applink://index.html');
... 
```

index.html 位于 www 文件夹中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T05:56:04.493

这里 StageWebView 无法引用您在 loadURL() 中给出的 URL，因为 applink 是通过文档中的单斜杠获取的。但我无法尝试使用 applink。StageWebViewBridge 不在其覆盖受保护的 addEventListener 函数中处理 ErrorEvent。如果您需要处理此错误事件，您应该添加

```
 override public function addEventListener( type : String, listener : Function, useCapture : Boolean = false, priority : int = 0, useWeakReference : Boolean = false ) : void
    {
        switch( type )
        {
            case ErrorEvent.ERROR:
            case Event.COMPLETE:
            case LocationChangeEvent.LOCATION_CHANGING:
            case LocationChangeEvent.LOCATION_CHANGE:
            case FocusEvent.FOCUS_IN:
            case FocusEvent.FOCUS_OUT:
                _view.addEventListener( type, listener, useCapture, priority, useWeakReference );
                break;
            default:
                super.addEventListener( type, listener, useCapture, priority, useWeakReference );
                break;
        }
    } 
```

并且还需要删除听众，例如，

```
 override public function removeEventListener( type : String, listener : Function, useCapture : Boolean = false ) : void
    {
        switch( type )
        {
            case ErrorEvent.ERROR:
            case Event.COMPLETE:
            case LocationChangeEvent.LOCATION_CHANGING:
            case LocationChangeEvent.LOCATION_CHANGE:
            case FocusEvent.FOCUS_IN:
            case FocusEvent.FOCUS_OUT:
                _view.removeEventListener( type, listener, useCapture );
                break;
            default:
                super.removeEventListener( type, listener, useCapture );
                break;
        }
    } 
```

现在您可以通过以下方式处理 ErrorEvent

```
 webView.addEventListener( ErrorEvent.ERROR, onLoadURLErrorTriggered ); 
```

并且，您总是最好提供文件 url 来加载本地 html 文件，例如，

```
 var file : File = new File("file-path");
     webView.loadURL( file.url ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T02:03:51.973

从未真正尝试过，但文档（[https://code.google.com/p/stagewebviewbridge/wiki/ContentLoading](https://code.google.com/p/stagewebviewbridge/wiki/ContentLoading)）只使用一个斜杠。

所以而不是：'applink://index.html'

文档使用：“applink:/index.html”

# sql - 使用来自不同表的列创建存储过程

> ID：15945090
> 
> 赞同：0
> 
> 时间：2013-04-11T09:21:37.597
> 
> 标签：sql, stored-procedures

我有 4 张桌子：`customer(PK custId)`和`order(PK orderID)`和`orderitem(PK orderItemId)``products(PK ProductID)`

orderitem 表将 productID 和 OrderItemID 分别作为产品和订单的外键。

```
Orderitem:
-----------------------
orderID | productID | OrderItemID 

Products:
-------------------------------- 
productID | unitcost | OrderItem 
```

表有数量列，

我想创建一个存储过程，它将使用 products 表中的 unitcost 中的值和 orderItems 表中的数量来计算 orderItem 中的 totalcost 列。

如果可能的话，我怎样才能让`orderID`程序来自`Orders`表，因为它是表的 PK 和`orderItem`FK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:38:05.760

如果我正确理解您的问题，您的存储过程的基本查询可能如下所示

```
SELECT i.*,
       p.unitcost * i.quantity totalcost
  FROM orderitem i INNER JOIN
       order o ON i.orderID = o.orderID INNER JOIN
       products p ON i.productID = p.ProductID
 WHERE i.orderID = 12345 
```

*如果您指定要使用的 RDMBS，则可以帮助您将其包装在 SP 中。*

# php - PHP 脚本中的无休止循环返回错误

> ID：15945091
> 
> 赞同：0
> 
> 时间：2013-04-11T09:21:44.410
> 
> 标签：php, apache

我想与我的客户建立推送连接。如果文件包含单词 true，则应通知它。这适用于以下脚本，但我总是在 50 秒后收到错误消息。您会在下面看到此错误。

我该如何解决这个错误？

```
<?php
    set_time_limit(3600);
    $content ="";
    while($content!="true"){
        sleep(1);
        $content = file_get_contents("test.txt");
    }
    echo "now";

?> 
```

´ 这里是浏览器 50 秒后的结果。

```
Internal Server Error

The server encountered an internal error or misconfiguration and was unable to complete your request.

Please contact the server administrator, sh@lorchs.de and inform them of the time the error occurred, and anything you might have done that may have caused the error.

More information about this error may be available in the server error log. 
```

我的阿帕奇配置：

```
#
# Timeout: The number of seconds before receives and sends time out.
#
Timeout 3600

#
# KeepAlive: Whether or not to allow persistent connections (more than
# one request per connection). Set to "Off" to deactivate.
#
KeepAlive On

#
# MaxKeepAliveRequests: The maximum number of requests to allow
# during a persistent connection. Set to 0 to allow an unlimited amount.
# We recommend you leave this number high, for maximum performance.
#
MaxKeepAliveRequests 0

#
# KeepAliveTimeout: Number of seconds to wait for the next request from the
# same client on the same connection.
#
KeepAliveTimeout 5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:40:48.677

文件获取内容返回 1 个字符串中的所有内容。我认为您想要做的是遍历这些行并搜索是否在该行中找到“true”，找到 true 的位置然后返回之前的所有内容？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:31:44.630

请不要`file_get_contents()`返回*整个文件的字符串*。

只要 $content 不等于字符串“true”，while 循环就会**迭代**。如果您有一个仅返回内容“true”的文件，那么它将退出循环，否则不会。

我猜你正在尝试做这样的事情：

```
<?php
    $content ="";
    while(!strstr($content,"true")) {
        sleep(1);
        $content = file_get_contents("test.txt");
    }
    echo "now";

?> 
```

除了创建一个不必要的循环来检查文件中的字符串之外，该代码实际上并没有做任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:32:44.980

在 php.ini 中增加 max_execution_time 的值 & 在 Apache 上有一个设置 max_input_time 定义了他们将等待发布数据的时间，无论大小。如果这个时间用完，连接就会关闭，甚至不接触 php.ini。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T09:24:55.490

`max_execution_time`在你的 php.ini 中搜索

# android - 从服务器发送 Facebook 请求？

> ID：15945094
> 
> 赞同：0
> 
> 时间：2013-04-11T09:21:45.663
> 
> 标签：android, ios, facebook, facebook-graph-api, facebook-requests

我想添加一个功能，使用户可以邀请他们的朋友使用该应用程序（iOS 和 Android 原生应用程序），并且它已经存在于 Facebook 的[Request Dialog](http://developers.facebook.com/docs/reference/dialogs/requests/)中。

我的问题是我的大多数用户来自中国，Facebook 已被屏蔽，因此无法打开请求对话框。我想知道是否有一种方法可以通过服务器发送facebook请求，以便可以在中国境内发送请求而无需绕过GFW？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:45:09.403

如果您可以在用户登录后获取他们的 Facebook 令牌，那么您可以从您的服务器使用它来行使令牌允许的任何权限。但是，如果用户首先通过 Facebook 进行身份验证并获取令牌，您将面临同样的问题。

但是，据报道，许多中国用户知道如何绕过 GFW 并自行设置。对于这些用户，您应该没有任何问题，这些用户实际上将邀请 Facebook 朋友。

您还可以考虑整合到中国社交网络，因为您的许多中国用户可能在这些网络上有朋友可以邀请。

# sms - 接收 7Bit 二进制短信

> ID：15945100
> 
> 赞同：1
> 
> 时间：2013-04-11T09:22:03.137
> 
> 标签：sms, at-command, linefeed

我想通过 7 位编码的 SMS 将二进制数据接收到我的 PC/GPRS-Stick（来自 4G 系统的 XS Stick P14）。这在原则上可以正常工作，但如果我发送一个二进制`<linefeed>`字符（0x0A），GPRS-stick 会将其更改为：

`<carriage retrun>`+ `<linefeed>`(0x0D0A)

示例：

如果我发送这个二进制十六进制值：`000102030405060708090A0`

我多得到一个字节：`000102030405060708090`**D0**`A0`

我不明白这种自动替换......是否可能不允许`<linefeed>`通过 7 位 SMS 发送 -characters，或者我是否必须通过特殊的命令配置调制解调器？

最好的祝福

安德烈亚斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:36:35.693

`AT+CMGL`因此，您正在使用 AT 命令（或`AT+CMGR`）读取收到的短信，对吗？我假设您正在以文本模式 ( `AT+CMGF=1`) 阅读它。在返回的参数中，如果有的话，您的调制解调器会在前面`<data>`插入一个额外的。`\r``\n`

信息文本响应`AT+CMGL`被[指定](http://www.3gpp.org/ftp/Specs/html-info/27005.htm)为`"\r\n"`围绕消息内容，例如

```
...<CR><LF><data>[<CR><LF>... 
```

，也许实现`\n`者对最后一个单曲感到不舒服，并决定放弃它（或者它可能是一个错误？）。的插入是否`\r`发生在 的任何位置`\n`？

有趣的是，27.005 没有讨论如果`<data>`包含会发生什么`<CR><LF>`......在[V.250](http://www.itu.int/rec/T-REC-V.250-200307-I/en)中，如下所述：

> 5.7.3 测试命令的信息文本格式
> 
> 一般来说，扩展语法命令返回的信息文本格式应在命令定义中指定。...请注意，DCE 可能会在非常长的信息文本响应中插入中间字符，以避免超出 DTE 接收缓冲区。如果包含中间字符，则DCE不应包含字符序列“0”（3/0、0/13）或“OK”（4/15、4/11、0/13），以免DTE出现错误检测这些信息文本响应的结束。

您的场景似乎不是太长的响应文本，但有趣的是 DCE（又名调制解调器）似乎可以`<CR>`在感觉时相对自由地插入。

无论如何，如果我假设您在文本模式下阅读是正确的，我建议您尝试将字符集更改为十六进制 ( `AT+CSCS="HEX"`)。这可能会使调制解调器在`\r`插入（或可能不是）方面表现不同。如果不是，您可以尝试 UCS-2，它也会强制执行十六进制响应（请参阅[此答案](https://stackoverflow.com/a/15851012/23118)）。

如果这些都没有帮助，您可以更改为在 PDU 模式下阅读消息（例如`AT+CMGF=0`）。这只是通过空中传输的每一位 SMS 消息的原始转储，如果调制解调器设法在其中插入任何额外的`\r`字符，我会感到非常震惊。然后，您最终不得不在收到它之后对其进行解码（这不是微不足道的，寻找一些已经编写好的库），但至少它应该可以工作。

# c# - 从 xml 架构创建表（使用 C# 和 mssql）

> ID：15945102
> 
> 赞同：0
> 
> 时间：2013-04-11T09:22:03.910
> 
> 标签：c#, xml, sql-server-2008, dataset, xsd

我正在寻找使用 XML Schema 文件在 mssql 中创建数据表的方法，以指定关系/数据类型（对于 c#？）。

目前我知道我可以使用 SQLXMLBulkLoadLib。

同样，现在我正在探索 dataset.writexmlschema/dataset.readxmlschema，但我不太了解它如何用于嵌套元素

还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:26:07.843

可能您可以将 xml 模式导入 DataSet，然后使用 SQL Server 管理对象重新创建数据库结构。有[一篇关于 codeproject](http://www.codeproject.com/Articles/17169/Copy-Data-from-a-DataTable-to-a-SQLServer-Database)的文章，其中包含一些有关如何执行此操作的示例。

# php - PHP：来自 $_REQUEST 的正确函数调用

> ID：15945103
> 
> 赞同：2
> 
> 时间：2013-04-11T09:22:09.267
> 
> 标签：php, function, security, procedural-programming

我一直在阅读一个项目（不基于任何 PHP 框架），并且我在几乎每个响应用户请求（`$_GET`或`$_POST`）的 PHP 文件上都遇到了以下（过程）代码。

```
if ($_REQUEST['a']){
    $func="a_".$_REQUEST['a'];
    if (function_exists($func)){
        $func();
    }else{
        // redirect
    }
}else{
    // redirect
}
...
a_action_a() { ... }
a_action_b() { ... } 
```

我有兴趣知道它作为函数调用机制是否足够安全（甚至更好的是威胁是什么）。这段代码能导致控制流或函数枚举吗？

程序 PHP 中的函数调用是否有适当的方法或建议的机制？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-11T09:33:12.630

> 程序 PHP 中的函数调用是否有适当的方法或建议的机制？

正确的方法是使用一个路由脚本，它会根据路由决定执行什么代码，就像在 Silex 中一样。

```
$app->get("/index",function(){
  return "this is the index";
}); 
```

并在 webroot 中拥有正确的 .htaccess 文件

```
FallbackResource /index.php 
```

这可能是一个见仁见智的问题，但是有 0 个实际用例，您需要将应用程序的内部工作直接暴露给客户端，即使为所有功能添加前缀也是如此。

# jquery - Jquery播放声音并转到下一页

> ID：15945112
> 
> 赞同：1
> 
> 时间：2013-04-11T09:22:26.773
> 
> 标签：jquery, audio, click, next

我试图弄清楚如何做到这一点，我希望查看者单击其中一个图像，该图像位于 apDiv 框中，然后在音频完成 3 秒后，将加载下一页。

这是它确实转到下一页的代码，但它不播放声音，如果我删除 setTimeout 函数，声音播放得很好。

我哪里做错了？

```
$(function(){
$('#apDiv1').click(

function(){$("#laugh")[0].play();},
function(){setTimeout(function(){window.location = 'page1.html';}, 3900); }
)
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:29:27.047

您要编写此代码如下

```
$(function(){
    $('#apDiv1').click(function(){
        $("#laugh")[0].play();
        setTimeout(function(){window.location = 'page1.html';}, 3900);
    });
}); 
```

您可能可以使用[此处](https://stackoverflow.com/questions/9346579/how-can-i-tell-when-an-html5-audio-element-has-finished-playing)的代码，以便您可以交换声音而无需更改时间`setTimeout`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:13:34.057

不要设置可能导致不同问题的超时，而是
使用`audio`事件监听器`ended`！

`**[LIVE DEMO](http://jsbin.com/ifafip/1/edit)**`

```
$(function(){

    function playOnClick(){          
        var sound = $("#laugh")[0];     
        sound.addEventListener('ended', function() {        
           window.location = 'page1.html';        
        }, false);          
        sound.play();          
   }

   $('#apDiv1').click(function(){
       playOnClick();
   });

}); 
```

# javascript - jQuery ajax 请求错误：未调用回调

> ID：15945113
> 
> 赞同：1
> 
> 时间：2013-04-11T09:22:27.060
> 
> 标签：javascript, jquery, asp.net, ajax

```
window.MyCallback = function (data) {
   console.log(data);
};

$(document).ready(function () {

    $.ajax({
            type: 'GET',
            url: 'http://xxx.xxx.xxx.xx/MyService/Service.svc/MyMethod',
            contentType: 'application/jsonp',
            crossdomain: true,
            dataType: "jsonp",
            data: { 'username': 'Jack' },
            crossDomain: true,
            jsonpCallback: 'MyCallback',
            success: function (txt) {
                console.log(txt);
            },
            error: function (xhr, status, err) {
                console.log(status, err);
            }
    });
}); 
```

我总是得到错误：`MyCallback was not called.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:47:59.450

为什么不这样？

```
var mycallback = function (data) {
  console.log("callback", data);
};

$(document).ready(function () {

  $.ajax({
        type: 'GET',
        url: 'https://graph.facebook.com/sagish',
        contentType: 'application/jsonp',
        dataType: "jsonp",
        data: { 'username': 'Jack' },
        crossDomain: true,
        success: mycallback,
        error: function (xhr, status, err) {
            console.log(status, err);
        }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T14:23:45.677

```
$.ajax({
   type: "GET",
   dataType: "jsonp",
   contentType: "application/javascript",
   data: { 'username': 'Jack' },
   async: false,
   url: 'http://xxx.xxx.xxx.xx/MyService/Service.svc/MyMethod',
   success: function (jsonData) {
       console.log(jsonData);
   },
   error: function (request, textStatus, errorThrown) {
       console.log(request.responseText);
       console.log(textStatus);
       console.log(errorThrown);
   }
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T09:45:32.477

为了调用“MyCallback”函数，你的 url 应该是，

```
url: 'http://xxx.xxx.xxx.xx/MyService/Service.svc/MyMethod?callback=? 
```

服务器应该返回 ajax 响应，例如

```
 return "MyCallback(your data here)" 
```

# highcharts - 在对数轴上使用 min max 的 HighChart 缺少次要刻度网格

> ID：15945117
> 
> 赞同：0
> 
> 时间：2013-04-11T09:22:36.087
> 
> 标签：highcharts

我正在使用 highchart 显示对数轴的图形。我真的需要在 yAxis 上精确设置最小值和最大值。

不幸的是，如果我的最大值不在刻度上，它将不会按预期显示 minorTrickGrid。

在[这个小提琴中看到](http://jsfiddle.net/a3jXx/2/)

预期结果应该是这样[的，](http://jsfiddle.net/a3jXx/5/)但没有勾选“ **1000** ”。最大值正好是**999**

关键线是`max : 1000`允许显示次要网格线。但我的问题是我需要将最大值设置为 999 ( `max : 999`)，这使得小网格很奇怪。

问题是：这是一个错误还是有办法在这种情况下显示次要网格线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:05:39.747

如果你只是想摆脱 1k 标签，你可以保留 max:1000，但添加一个自定义格式化函数，如下所示：

```
yAxis: {
            endOnTick: false,
            type: 'logarithmic',
            minorTickInterval: 0.1,
            min: 1,
            max: 1000,
            labels:{
                formatter:function() {
                    if (this.value==1000) {
                        return "";
                    } else {
                        return this.value;
                    }
                }
            }
        }, 
```

[http://jsfiddle.net/hA9yF/](http://jsfiddle.net/hA9yF/)

如果您设置 max:999，这仍然不起作用，但可能是适合您的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:13:22.793

您可以使用标签格式化程序 ( [http://api.highcharts.com/highcharts#yAxis.labels.formatter](http://api.highcharts.com/highcharts#yAxis.labels.formatter) ) 和 highcharts.numberFormat() ( [http://api.highcharts.com/highcharts#Highcharts.numberFormat()](http://api.highcharts.com/highcharts#Highcharts.numberFormat()) )允许返回自定义数字。

[http://jsfiddle.net/a3jXx/5/](http://jsfiddle.net/a3jXx/5/)

```
labels:{
                formatter:function(){

                    return Highcharts.numberFormat(this.value,0);

                }
            } 
```

# ajax - 使用 Express 检测 NodeJS 上的 AJAX 请求

> ID：15945118
> 
> 赞同：79
> 
> 时间：2013-04-11T09:22:38.240
> 
> 标签：ajax, node.js, express

我将 NodeJS 与 Express 一起使用。如何区分普通浏览器请求和 AJAX 请求？我知道我可以检查请求标头，但 Node/Exprsss 是否公开了这些信息？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-04-11T09:44:38.280

大多数框架将`X-Requested-With`标头设置`XMLHttpRequest`为 ，Express 对此进行了测试：

```
app.get('/path', function(req, res) {
  var isAjaxRequest = req.xhr;
  ...
}); 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2015-02-16T11:40:20.003

如果`req.xhr`没有设置，比如在 Angularjs 等框架中，[它被删除了](https://github.com/angular/angular.js/commit/3a75b1124d062f64093a90b26630938558909e8d)，那么您还应该检查标头是否可以接受 JSON 响应（或 XML，或者您的 XHR 作为响应而不是 HTML 发送的任何内容）。

```
if (req.xhr || req.headers.accept.indexOf('json') > -1) {
  // send your xhr response here
} else {
  // send your normal response here
} 
```

当然，您必须稍微调整第二部分以匹配您的用例，但这应该是一个更完整的答案。

*理想情况下，角度团队不应该删除它，但实际上应该为 CORS 的飞行前问题找到更好的解决方案，但这就是它现在的休息方式......*

# java - 类强制转换异常 HashSet

> ID：15945122
> 
> 赞同：-2
> 
> 时间：2013-04-11T09:23:04.317
> 
> 标签：java, casting

`java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to java.util.HashSet`我在行 出现错误： `(HashSet<String>) pos[targetPos3]).contains(word)`。

```
 public void search(String word, Object[] root){
    int targetPos1;
    int targetPos2;
    Object[] pos = root;

    targetPos1 = word.charAt(0) -'a';
    targetPos2 = word.charAt(1) -'a';
    int targetPos3 = word.charAt(2) - 'a';

    if(root[targetPos1]==null){
        System.out.println("1st letter NOT FOUND");
    }
    else{
         pos = (Object[]) root[targetPos1];
         if(pos[targetPos2]==null){
             System.out.println("2nd letter NOT FOUND");
         }
         else{
             if( ((HashSet<String>) pos[targetPos3]).contains(word)){
                 System.out.println("Word FOUND: " + word);
                 System.out.println(pos[targetPos3]);//output children
             }
             else{
                 System.out.println("NOT FOUND");
             }
         }
    }//end of else

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:30:55.113

从您的代码和异常中，实际上您在 pos[targetPos3] 处有一个 Object[]。

您不能将其转换为 HashSet。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:27:53.783

`pos`是 Object 并且您正在尝试转换它`HashSet<String>`并且它提出了`ClassCastException`.

确定`pos[targetPos3]`不是`HashSet`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T09:27:58.317

给定

`Object[] pos = root;`

和

`(HashSet<String>) pos[targetPos3]`

`pos[targetPos3]`一定不能是`HashSet<String>`. 如果不知道 Object[] 数组实际包含什么（为什么它如此不具体？）以及您打算做什么，就不可能进一步回答您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T09:28:03.770

请尝试调试代码并检查 word 的数据类型。从错误日志中它显示 word 的数据类型是对象（它可能是 String 或其他）并且您正在尝试将其分配给 HashSet..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T09:32:40.227

从表面上看，你有一个`Object[][]`作为`root`.

您得到其中之一`Object[]`（位于 处的那个`targetPos1`）。

然后你从中得到一个`Object`（那个 at `targetPos3`）。

然后`Object`，您尝试将其转换为 a `HashSet<String>`，这将引发 a `ClassCastException`。

从例外情况来看，这`Object`实际上是另一个`Object[]`（`[Ljava.lang.Object;`不能...），因此您似乎以`Object[][][]`root身份传入。或者至少第二维数组的一些元素是`Object[]`.

我建议您`instanceof`在转换之前进行检查，或者最好弄清楚您传入的数据结构实际上是什么，并将其转换为数据传输对象，而不是您不理解的多维数组。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T09:49:35.083

你不能这样做：

```
if ((HashSet<String>) pos[targetPos3]).contains(word)) 
```

但是你试试这个：

```
private class ArrayTools
{
    public static<T> boolean contains (T [] array, T key)
    {
        for (T item : array)
        {
            if (item.equals(key))
            {
                return true;
            }
        }
        return false;
    }
} 
```

那么你可以这样做：

```
if (ArrayTools.contains(pos[targetPos3], word)) 
```

注意：您不能将其与原语一起使用。

# c# - 刷新 Json 局部视图

> ID：15945138
> 
> 赞同：3
> 
> 时间：2013-04-11T09:23:35.250
> 
> 标签：c#, asp.net-mvc, json, asp.net-mvc-3

我想刷新 Json 部分视图。我正在尝试使用这个：

```
$('#example123').load('@Url.Action("Rejestracja", "Logowanie")'); 
```

但不能正常工作。

```
$.ajax({
            url: '@Url.Action("Rejestracja", "Logowanie")',
            dataType: "json",
            type: "POST",
            async: false,
            error: function () {
            },
            success: function (data) {
                if (data.Success) {

                    var el1 = $('<div><strong style="color: black" id="example123">' + data.View + '</strong></div>');
                    $(el1).dialog(
                        {
                            modal: true,
                            title: '<div></div>',
                            minWidth: 340,
                            minHeight: 300,
                            buttons: {
                                'Zamknij': function () {
                                    $('#example123').load('@Url.Action("Rejestracja", "Logowanie")');
                                    $(this).dialog("destroy");

                                }
                            }
                        });
                }

            }
        }); 
```

JSON 部分视图

```
[HttpPost]
        public JsonResult Rejestracja()
        {
            bool dataCahnged = true;
            var model = new Logowanie();
            object view = this.RenderPartialViewToString("Rejestracja", model);
            return Json(new { Success = true, dataCahnged, View = view });
        } 
```

（这只是第一次工作）

```
<script type="text/javascript">
    $('#bladReje').hide();
    $('#bladRejeText').hide();
    $('#poprawnieReje').hide();
    $('#poprawnieRejeText').hide();

    </script> 
```

示例（此工作仅第一次）

```
<div id="ex"></div>
<script type="text/javascript">
    $('#ex').text('sasasa');
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T22:29:57.587

任何原因，特别是为什么您使用“POST”调用 ajax？，您没有向服务器发送任何信息，所以这是我要更改的第一件事。尝试将其更改为 GET。

其次，尝试更改您的方法以使您的视图 html 返回一个字符串。我正在使用这种扩展方法，它工作得很好：

```
public static class JsonHelper
{
    public static string RenderPartialView(this Controller controller, string viewName, object model)
    {
        if (string.IsNullOrEmpty(viewName))
            viewName = controller.ControllerContext.RouteData.GetRequiredString("action");

        controller.ViewData.Model = model;
        using (var sw = new StringWriter())
        {
            ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(controller.ControllerContext, viewName);
            var viewContext = new ViewContext(controller.ControllerContext, viewResult.View, controller.ViewData, controller.TempData, sw);
            viewResult.View.Render(viewContext, sw);

            return sw.GetStringBuilder().ToString();
        }
    }
} 
```

这是一个有关如何使用它的示例：

```
 public ActionResult GetClientList()
 {
     List<ClientModel> clientList = ClientRepository.GetClients();
     return Json(new JsonMixedResult { Result = "success", ViewHtml = this.RenderPartialView("ClientList", clientList) }, JsonRequestBehavior.AllowGet);
 } 
```

最后，检查 return Json 语句的最后一个参数。这允许您的客户端代码访问控制器返回的数据。在这种情况下，是一个包含您的视图 html 的 Json 对象。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T04:12:36.110

我不明白你为什么不返回 PartialView ？？？我的意思是您的 Json 结果返回您的部分视图，其中包含 2 个指示成功的附加属性，并且我猜该数据已更改，但这两个对我来说看起来毫无意义。你为什么不在你的行动中这样做：

```
[AjaxOnly]
public PartialViewResult Rejestracja()
{
    var model = new Logowanie();
    return PartialView("Rejestracja", model);
} 
```

然后您的 ajax 调用将如下所示：

```
$.ajax({
    url: '@Url.Content("~/Logowanie/Rejestracja")',
    dataType: "html",
    type: "GET",
    error: function () {
       // Handle errors here...    
    },
    success: function (html) {
        $("#someDivOnYourPage").html(html);
    }
}); 
```

这样，整个部分视图将被放置在页面上您选择的 div 中...

# asp-classic - 如何在 Classic ASP 中使用 TeeChart 生成条形图

> ID：15945139
> 
> 赞同：0
> 
> 时间：2013-04-11T09:23:40.593
> 
> 标签：asp-classic, teechart

我在经典 ASP 应用程序中生成 TeeCharts。这是一个相对较旧的应用程序，我需要在其中生成一个新图表。我拥有所有数据并使用该数据能够生成完美的折线图。但是，使用相同的数据我想生成一个条形图。我已经尝试了所有可用的选项，但无法生成条形图。我没有收到任何错误，图表根本无法显示。任何人都可以发布一个示例代码来生成一个简单的条形图。

努普尔莫迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:34:28.390

TeeChart 附带演示（包括 ASP.NET 演示）、教程和文档。你看过他们吗？要创建 Bar 系列，您只需创建 Bar 类的实例并为其提供 Chart（在以下情况下 tChart1 是 TChart）：

```
Bar bar1 = new Bar(tChart1.Chart); 
```

在它之后，你只需要填充这个系列。你有几个覆盖`Add()`它的功能。但是对于一个简单的测试，您可能想尝试使用示例值：

```
bar1.fillSampleValues(); 
```

就是这样。如果图表创建正确 - 因为你说 Line 系列正确显示 - 它也应该适用于 Bar 系列。

# java - 我自己的 http 服务器的 TCP 机器状态的单元测试

> ID：15945140
> 
> 赞同：0
> 
> 时间：2013-04-11T09:23:41.310
> 
> 标签：java, apache, unit-testing, tcp, tcpserver

我使用 http 服务器的新实现。我将创建单元测试，这将帮助我检查我的 TCP 连接状态的状态机是否正常工作。

当然我需要检查一些简单的事情，比如：我的服务器是`closed`在接收后切换到状态`RST`还是`established`在序列后切换到状态`SYN, SYN+ACK, ACK`。

因为这个状态机中可能的路径数量很大，我想知道我应该关注哪些测试。

例如，Apache 是否有任何我可以从中获取模式的公共单元测试？

第二件事是......我应该从应用程序的角度开始创建这个测试，所以我应该专注于创建我可以使用简单的 java 套接字模拟的测试，使用像`connect`,`send`等命令。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T00:58:33.113

**测试什么**

每个单元测试策略的总体目标是：

1.  **完整的代码覆盖率**：这意味着您的应用程序的每一行代码在完整的测试套件中至少执行一次。
2.  **规范的全面覆盖**：通常，软件开发从功能规范开始，该规范准确地说明了软件的功能以及在每种可能的情况下它如何反应。规范中提到的每个要求都需要至少一个测试。当您没有规范时，最少测试的指南可能是[HTTP 协议本身的规范](http://www.ietf.org/rfc/rfc2616.txt)。

每当您测试服务器应用程序时，您必须记住，您不能假设您的客户端将是 HTTP 协议的完美实现。在现实世界中，您的服务器将面临错误地实现它或具有不可靠连接的客户端，这些客户端在您的应用程序的任何状态下都会突然终止。这甚至还没有考虑到故意尝试在您的服务器中查找和利用漏洞的恶意客户端。这些也是您需要测试用例的情况。

服务器通常是多线程的。这意味着应该测试多线程带来的常见问题（如竞争条件、死锁、同步问题、繁忙的自旋等）。不幸的是，这些问题很难预测，甚至更难编写有意义的单元测试。不仅因为这些问题通常通过不同组件的交互表现出来，这是集成和系统测试的范围，而不是单元测试。

**如何测试**

单元测试通常不应该依赖于外部资源，因为当它们这样做时，您是在测试该资源，而不是您自己的应用程序。当您的应用程序的功能严重依赖外部系统时，例如 http 服务器的情况，应该模拟其他系统。

这是通过使用[模拟对象](http://en.wikipedia.org/wiki/Mock_object)实现外部资源来完成的。模拟对象是代替依赖于外部资源的对象（通过扩展它或通过实现相同的接口）的对象，但仅模拟其行为。在网络服务器的上下文中，您将创建一个扩展[Socket](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html)的类，但使用模拟外部客户端而不实际访问网络的东西覆盖 Socket 的所有方法。

然后，您可以在单元测试期间使用它来测试您的类，而不是普通的套接字。

这使您可以轻松实现特殊的模拟套接字来测试特殊的测试条件，例如响应缓慢、非常快或只是错误的客户端。

`new Socket()`您可能想知道“但是当我在我想要测试的类中创建一个内部时我应该怎么做呢”？答案是，为了使应用程序可单元测试，您不应该这样做。关键字是[依赖注入](http://en.wikipedia.org/wiki/Dependency_Injection)。简而言之，依赖注入意味着一个类不应该使用`new`关键字，除非它是该类的工厂或生成器。一个类使用的任何对象都不应该由它创建。它们应该通过构造函数或 setter 方法提供给它。

*例子：*

因此，当您有一个`ConnectionListener`使用 a`ServerSocket`等待客户端连接然后对它们执行某些操作的类时，您不应该在其构造函数中创建该 ServerSocket。相反，您应该将 ServerSocket 传递给 ConnectionListener 的构造函数。在生产代码中，这将是[一个普通的服务器套接字](http://docs.oracle.com/javase/7/docs/api/java/net/ServerSocket.html)。但是在您的单元测试中，您可以传递一个扩展 ServerSocket 的模拟对象。这个模拟对象将模拟一个或多个客户端，然后向单元测试框架报告 ConnectionListener 的行为是否符合预期。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T01:37:05.750

> 当然，我需要检查一些简单的事情，例如：我的服务器是在收到 RST 后切换到关闭状态，还是在序列 SYN、SYN+ACK、ACK 之后切换到已建立状态。

当然*不是。*你没有资格测试这些。如果供应商的 TCP/IP 堆栈被破坏，它将很快在全世界变得明显。测试它是供应商的责任。您应该测试的是您自己的代码，在您自己的新 HTTP 服务器中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T18:11:16.593

我将首先创建一个状态机图，然后根据单个状态转换的数量（这是一个有限的数量，并且可能非常小）创建测试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-18T21:00:33.700

> 例如，Apache 是否有任何我可以从中获取模式的公共单元测试？

您可以查看[Apache Tomcat 测试](http://svn.apache.org/repos/asf/tomcat/trunk/test/org/apache/)。

# c# - 在 wpf 模板上绑定两种颜色

> ID：15945141
> 
> 赞同：1
> 
> 时间：2013-04-11T09:23:43.940
> 
> 标签：c#, wpf, templates, binding, colors

我创建了一个模板，以便为我的应用程序设置一个主题。在这个模板中，我创建了一个渐变样式（由两种颜色组成）：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
   <LinearGradientBrush x:Key="DegradeCouleurTheme" StartPoint="0,0" EndPoint="0,1">
       <!--<GradientStop Offset="0" Color="#00b6e7"/>
       <GradientStop Offset="1" Color="#0086d6"/>-->
       <GradientStop Offset="0" Color="{Binding Path=(m_ThemeColorGradientBegin)}"/>
       <GradientStop Offset="1" Color="{Binding Path=(m_ThemeColorGradientEnd)}"/>
   </LinearGradientBrush>
</ResourceDictionary> 
```

我希望能够改变这两种颜色，所以我创建了一个窗口来设置颜色。这些颜色存储在“CParametres.cs”类中。这两种颜色接下来存储在数据库中。

**这是我的 CParameters 类：（**我清理了类以获得更好的视图）

```
namespace Phoenix_CRM
{
    public class CParametres : INotifyPropertyChanged
    {
        private Color m_ThemeColorGradientBegin;
        public Color ThemeColorGradientBegin
        {
            get { return m_ThemeColorGradientBegin; }
            set
            {
                m_ThemeColorGradientBegin = value;
                FirePropertyChangedEvent("ThemeColorGradientBegin");
            }
        }

        private Color m_ThemeColorGradientEnd;
        public Color ThemeColorGradientEnd
        {
            get { return m_ThemeColorGradientEnd; }
            set
            {
                m_ThemeColorGradientEnd = value;
                FirePropertyChangedEvent("ThemeColorGradientEnd");
            }
        }

        public CParametres(r)
        {
           ......
        }

        public void LoadParams()
        {
            if (ReadParamFromDB() == true)
            {
                setThemeGradient(m_ThemeColorGradientBegin, m_ThemeColorGradientEnd);
            }
        }    

        public void setThemeGradient(Color ColorBegin, Color ColorEnd)
        {
            ThemeColorGradientBegin = ColorBegin;
            ThemeColorGradientEnd = ColorEnd;
        }

        public event PropertyChangedEventHandler PropertyChanged;

        private void FirePropertyChangedEvent(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }
} 
```

在我的 App.xaml.cs 中，我创建了一个对象“CParametres”，并从该对象的数据库中加载颜色：

**在我的 App.xamls.cs**

```
obj_Parametres = new CParametres()
obj_Parametres .LoadParams() 
```

**在此 LoadParams() 之后，两种颜色存储在：**

m_ThemeColorGradientBegin 和 m_ThemeColorGradientEnd 对象。

我正在尝试将这两种颜色绑定到我的模板，并且，当我运行我的应用程序时，我没有任何崩溃，但颜色不适用。

我调试了我的应用程序，并且 LoadParams 函数没问题，我的 m_ThemeColorGradientBegin 和 m_ThemeColorGradientEnd 对象包含颜色。

任何人都可以解释我为什么我的绑定不正确？

非常感谢 ：）

此致，

尼克修斯

**--编辑-- MoHaKa 提示后：**

**模板 ：**

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:ns="clr-namespace:Phoenix_CRM">

  <LinearGradientBrush x:Key="DegradeCouleurTheme" StartPoint="0,0" EndPoint="0,1">
      <!--<GradientStop Offset="0" Color="#00b6e7"/>
      <GradientStop Offset="1" Color="#0086d6"/>-->
      <GradientStop Offset="0" Color="{x:Static ns:CParametres.ThemeColorGradientBegin}"/>
      <GradientStop Offset="1" Color="{x:Static ns:CParametres.ThemeColorGradientBegin}"/>
  </LinearGradientBrush>
</ResourceDictionary> 
```

**我的 CParameters.CS ：**

```
 private static Color m_ThemeColorGradientBegin;
    public static Color ThemeColorGradientBegin
    {
        get { return m_ThemeColorGradientBegin; }
        set
        {
            m_ThemeColorGradientBegin = value;
            FirePropertyChangedEvent("ThemeColorGradientBegin");
        }
    } 
```

将静态设置为 ThemeColorGradientBegin 和 m_ThemeColorGradientBegin 我在 FirePropertyChangedEvent() 上有一个编译器错误：错误 MC3011：无法在 CParametres 类型上找到静态成员 ThemeColorGradientBegin。

请问你有什么想法吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:59:00.257

此代码将帮助您：

在你的窗口标签中定义这个语句。

```
xmlns:ns="clr-namespace:Phoenix_CRM" 
```

现在使用绑定获取颜色：

```
<LinearGradientBrush x:Key="DegradeCouleurTheme" StartPoint="0,0" EndPoint="0,1">
    <!--<GradientStop Offset="0" Color="#00b6e7"/>
    <GradientStop Offset="1" Color="#0086d6"/>-->
    <GradientStop Offset="0" Color="{x:Static ns:CParametres.ThemeColorGradientBegin}"/>
    <GradientStop Offset="1" Color="{x:Static ns:CParametres.ThemeColorGradientEnd}"/>
</LinearGradientBrush> 
```

不要忘记将颜色属性更改为`static`

# jquery - 下载未完成时阻止 UI

> ID：15945142
> 
> 赞同：0
> 
> 时间：2013-04-11T09:23:44.653
> 
> 标签：jquery, asp.net, blockui

我想阻止页面，直到下载完成，然后解除阻止。我写了这段代码，但在 1 秒后它解除了对 UI 的阻止并且下载仍未完成。

```
 <script type="text/javascript">
    var fileDownloadCheckTimer;
    function blockUIForDownload() {
        if (IsCookiesEnable()) {
            var token = new Date().getTime(); //use the current timestamp as the token value
             $.blockUI({ message: 'لطفا منتظر بمانید تا فایل مورد نظر شما دانلود شود', fadeIn: 0 });
            fileDownloadCheckTimer = window.setInterval(function() {
                var cookieValue = $.cookie('fileDownloadToken');
                // alert(cookieValue);

                if (cookieValue != null)
                    finishDownload();
            }, 1000);
        }
    }

    function IsCookiesEnable() {
        var cookieEnabled = (navigator.cookieEnabled) ? true : false;

        if (typeof navigator.cookieEnabled == "undefined" && !cookieEnabled) {
            document.cookie = "testcookie";
            cookieEnabled = (document.cookie.indexOf("testcookie") != -1) ? true : false;
        }
        return (cookieEnabled);
    }

    function finishDownload() {
        window.clearInterval(fileDownloadCheckTimer);
        $.cookie('fileDownloadToken', null);
        $.unblockUI();

    } 
```

我使用 asp.net、C# 和 blockUi 插件。

# apache-flex - 无法设置 youtube 视频的固定大小

> ID：15945143
> 
> 赞同：2
> 
> 时间：2013-04-11T09:23:49.290
> 
> 标签：apache-flex, youtube

我正在尝试在 adobe flex 中使用 youtube 视频。我已将视频添加到画布，但我无法修复视频的大小。它也以全宽和全高呈现。下面是我的代码。

pastebin 上的代码[http://pastebin.com/hN3NHRpp](http://pastebin.com/hN3NHRpp)

```
<mx:Canvas width="380" height="250" id="uplayer" />

public function init(){
   _uic = UIComponent(uplayer.addChild (new UIComponent ()));
   _uic.width = 380;
   _uic.width = 250;

   _loader = new Loader();
   _loader.contentLoaderInfo.addEventListener(Event.INIT, onLoadInit);
   var request:URLRequest = new URLRequest("http://www.youtube.com/v/2030agUM_JY?version=2&autoplay=1&fs=0&hd=1");
   _loader.load(request);
}

private function onLoadInit(event:Event):void {
                        _player = _loader.content;

                _playerObject = _player as DisplayObject;

        //_playerObject.addEventListener("jwplayerReady", onPlayerReady);

             //   RootReference.root = _playerObject.root;

                _uic.addChild(_loader);
                        _uic.width = 380;
                        _uic.width = 250;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:03:12.977

根据文档，需要使用`setSize()`youtube播放器的方法：

在您的`onLoadInit()`事件处理程序中，您需要向`_loader.content`（或您的`_player`变量，它是同一个对象）添加额外的事件侦听器。特别是您需要监听`onReady`事件，并且在事件的处理程序中`onReady`您可以使用`_player.setSize(380,250)`.

[如果您遵循此处文档](https://developers.google.com/youtube/flash_api_reference#Loading)中给出的代码/示例，我相信它会起作用。

# ajax - Epress.js 和 AJAX，将 JSON 从服务器发送到客户端

> ID：15945146
> 
> 赞同：0
> 
> 时间：2013-04-11T09:23:52.283
> 
> 标签：ajax, node.js, express

我正在尝试将 Express.js 中的 JSON 发送回客户端，但无法使其正常工作。

路线/editor.js

```
exports.save = function(req, res){
    fs.readFile(__dirname + "/../public/index.html", function (err, data) {
        if (data == oldhash) {
          res.json({ r: 'no' })
        }
        else {
          res.json({ r: 'yes'})
        }
    });
}); 
```

公共/javascript/test.js

```
$( ".save" ).click(function( event ) {
        event.preventDefault();

        $.ajax( {
          url: 'http://localhost:3000/save',
          data: r,
          type: 'GET',
          success: function(r) {
            if( r == 'yes' ) {
               $('#echoResult').append('<p>yes</p>');
            }
            else {
                $('#echoResult').append('<p>no</p>');
            }
          }
       });

    }); 
```

然后相应地这是来自服务器的响应，附加正确的 HTML。

我在这里想念什么？我看到的所有 AJAX 示例都没有太大帮助。

任何建议都会受到欢迎。

**编辑**

我在客户端收到此错误-> Uncaught ReferenceError: r is not defined

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:48:23.467

客户端错误可以这样解决：

```
$( ".save" ).click(function( event ) {
    event.preventDefault();

    $.ajax( {
      url: 'http://localhost:3000/save',
      type: 'GET',
      success: function(data) {
        if( data.r == 'yes' ) {
           $('#echoResult').append('<p>yes</p>');
        }
        else {
            $('#echoResult').append('<p>no</p>');
        }
      }
   });

}); 
```

该`data`属性在成功回调中，以 r 作为参数。

如果没有有关您如何使用 express 的更多详细信息，我无法对服务器代码说太多。

# extjs - extjs：在没有chart.save远程服务器的情况下获取图表img？

> ID：15945152
> 
> 赞同：0
> 
> 时间：2013-04-11T09:24:04.663
> 
> 标签：extjs

我想抓取图表客户端的 png 并推送到 img 对象而不执行 chart.save 远程服务器的事情。这是可能吗？蒂亚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:04:49.933

这是可能的，我们修改了`chart.save()`Ext源代码中函数上的URL到我们的本地服务器。

一旦我们重定向了保存函数，我们将它指向一个 C# 处理程序，该处理程序从图表中删除 SVG 并使用服务器端 SVG 渲染器函数来生成图像。

一旦它到达服务器，你做什么将取决于你的服务器端基础设施。

# xquery - 将exist-db的输出打印到文件

> ID：15945156
> 
> 赞同：0
> 
> 时间：2013-04-11T09:24:23.200
> 
> 标签：xquery, exist-db

我在exist-db 上执行了一个xquery。现在我想在 csv 或 excel 文件之类的文件中打印输出，该怎么做。

我可以以 HTML 格式打印输出，但有什么方法可以生成相同的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-24T22:27:48.520

使用 FileModule，它有一个`serialize`功能：

```
文件：序列化
file:serialize($node-set as node()*, $path as item(), $parameters as xs:string*,
$append as xs:boolean) as xs:boolean?

将节点集写入文件系统上的文件，可选择附加到该文件。$parameters 包含一系列零个或多个序列化参数，指定为 key=value 对。序列化选项与“declare option exists:serialize”识别的相同。该函数不会自动继承调用它的 XQuery 的序列化选项。此方法仅适用于 DBA 角色。

参数：
    $node-set* 要写入文件系统的内容。
    $path 文件的完整路径或 URI
    $parameters* 指定为键值对的序列化参数
    $append 应该追加内容吗？
回报：
    xs：布尔值？：成功时为真 - 如果指定的文件无法创建或不可写，则为假。如果参数序列为空，则返回空序列。

```

**参考**

*   [org.exist.xquery.modules.file.FileModule](http://exist-db.org/exist/apps/fundocs/view.html?uri=http://exist-db.org/xquery/file&location=java%3aorg.exist.xquery.modules.file.FileModule)

# vim - 避免 Vim 在后台保持关闭的缓冲区打开

> ID：15945157
> 
> 赞同：5
> 
> 时间：2013-04-11T09:24:23.937
> 
> 标签：vim

在使用各种标准扩展对我的 Vim 环境进行了完整的重新设置后，有一种行为让我非常恼火：

当我在拆分窗口中打开一个文件并再次关闭该窗口时（“：wq”），Vim 似乎在后台保持文件缓冲区打开。当我现在尝试在新 Vim 实例的不同 shell 选项卡中打开文件时，交换文件仍然存在，这使我无法编辑文件。

我想有一个设置使 Vim 在我关闭拆分时保持缓冲区打开但隐藏，但我找不到它是哪一个。我真正想要的是，当我关闭拆分时，Vim 真的会关闭缓冲区，这样我就可以在并行的 Vim 会话中再次打开相应的文件。

我期望的是，一旦显示缓冲区的最后一个窗口通过“：q”关闭，缓冲区就会关闭。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T13:53:46.857

使用检查`hidden`选项的值`:set hidden?`。默认情况下，vim 将此设置为`nohidden`，这应该会产生您要求的行为；缓冲区在被废弃时被卸载（意味着没有窗口显示它们）。此设置可能设置为`hidden`，这会导致您遇到的行为；缓冲区在被放弃时被隐藏。

`:help 'hidden'`了解更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T09:33:00.903

我认为您将缓冲区与窗口混淆了。可以在[此处](http://blog.sanctum.geek.nz/buffers-windows-tabs/)找到对差异的很好解释。

我也建议[阅读](http://vim.wikia.com/wiki/Deleting_a_buffer_without_closing_the_window)。它有一个脚本示例，可以在不关闭窗口的情况下关闭缓冲区，这应该是您描述的效果。

干杯，我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:31:13.693

我不确定您是如何关闭拆分的，例如`Ctrl``W``Ctrl``o`在另一个窗口中使用 或`Ctrl``W``Ctrl``q`，但我认为这也不应该关闭缓冲区。拆分只是一种窗口管理方法，而不是缓冲区管理方法。

如果在拆分中，您想关闭缓冲区及其窗口，为什么不使用`:bd`？它将显式关闭缓冲区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T09:31:27.710

您正在寻找`:bw[ipeout]`.

# javascript - 我应该用什么函数替换 onchange 以使其在不首先篡改滑块的情况下工作

> ID：15945160
> 
> 赞同：0
> 
> 时间：2013-04-11T09:24:32.123
> 
> 标签：javascript, html, forms, function

在我的网站：alainbruno.nl/form.html，您会看到“Race”表格和“Age”滑块。使用该功能，我有滑块年龄的最小值和最大值只会在您第一次使用滑块时正确更改，然后再选择不同的种族。该怎么办？

对不起，如果代码没有显示为代码，我是用手机写的，它没有给出任何额外的说明

```
<!DOCTYPE html>
<html lang = "en">
<head>
<title>Character Creation</title>
</head>
<script                   src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
         $(function(){
             //Range
            var slider = $("#slider"), val =         slider.val(), output = $("#output");
             output.html(val);
            slider.on("change", function(){
                output.html($(this).val());

            $('#Race').change(function ()                  {
  if (this.value == "faela") {
      $('#slider').prop({
        'min': 8,
         'max': 52
      });
    }
if (this.value == "human") {
    $('#slider').prop({
        'min': 14,
        'max': 76
      });
  }
if (this.value == "domovoi") {
     $('#slider').prop({
        'min': 26,
        'max': 254
       });
   }
if (this.value == "arcon") {
    $('#slider').prop({
        'min': 11,
        'max': 91
     });
  }
if (this.value == "tsaaran") {
    $('#slider').prop({
        'min': 2,
         'max': 28
      });
    }
   $('#slider').val('max' / 2);
   output.html('Slide');
 });
            });
        });
     </script>
 <body>
 <h1>Form</h1>
 <form>
  <fieldset>
 <legend>Appearance</legend>
 <p>
 <label>
 Select Race:
 </label>
  <select id="Race">
 <option value="human">Human</option>
 <option value="faela">Faela</option>
 <option value="domovoi">Domovoi</option>
 <option value="arcon">Arcon</option>
 <option value="tsaaran">Tsaaran</option>
 </select>

  <label for="range">Select Age:</label> <input         type="range" min="14" max="76" id="slider" value="10" name="range"><span id="output">.    </span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:41:08.883

请参阅[此 URL](http://jqueryui.com/slider/)以获取 JQUERY UI 的滑块 html 5 滑块不受许多浏览器支持。（包括火狐）

如果您想使用 html5 滑块，请创建一个函数，例如 set_min_max，以更改滑块值。在 document.ready 和 change 上调用该函数。

```
 function set_min_max(select){
         if (select.val() == "faela") {
    $('#slider').prop({
        'min': 8,
        'max': 52
    });
}
if (select.val() == "human") {
    $('#slider').prop({
        'min': 14,
        'max': 76
    });
}
if (select.val() == "domovoi") {
    $('#slider').prop({
        'min': 26,
        'max': 254
    });
}
if (select.val() == "arcon") {
    $('#slider').prop({
        'min': 11,
        'max': 91
    });
}
if (select.val() == "tsaaran") {
              $('#slider').prop({
                  'min': 2,
                  'max': 28
              });
        }
        $('#slider').val('max' / 2);
        $(output).html('Slide');

    } 
```

和

```
 $(function(){
     //Range
      var slider = $("#slider")
      val =         slider.val()
      output = $("#output")
      set_min_max($('#Race') )  ;
 slider.on("change", function(){
     output.html($(this).val())});
            $('#Race').change(function () {set_min_max($(this))
            });
     }); 
```

[演示](http://jsfiddle.net/HLez9/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:42:34.477

您应该将其包装在 dom 就绪函数中。我想它应该可以工作。

```
 //Range
    var slider = $("#slider"), val = slider.val(), output = $("#output");
    output.html(val);

    slider.on('change', function(){
        output.html($(this).val());
    });

    $('#Race').on('change', function(){
        var value = $(this).val();

        if (value == "faela") {
            $('#slider').prop({
                'min': 8,
                'max': 52
            });
        }
        else if (value == "human") {
            $('#slider').prop({
                'min': 14,
                'max': 76
              });
        }
        else if (value == "domovoi") {
            $('#slider').prop({
                'min': 26,
                'max': 254
            });
        }
        else if (value == "arcon") {
            $('#slider').prop({
                'min': 11,
                'max': 91
            });
        }
        else if (value == "tsaaran") {
            $('#slider').prop({
                'min': 2,
                'max': 28
            });
        }
        $('#slider').val('max' / 2);
        output.html('Slide');
    }); 
```

仅供参考：`input`with[在 HTML5](http://www.w3.org/TR/html-markup/input.range.html)`type="range"`中是非常新的，在 Internet Explorer 和 Firefox 中不受支持。

如果您使用[jQuery-ui](http://jqueryui.com/)，则可以使用[jQuery-ui 滑块](http://jqueryui.com/slider/)，该滑块适用于大多数现代浏览器和大多数设备。

编辑：我尝试了 chrome 中的页面，即使选择了比赛，滑块也可以工作。它不会保留它的价值，因为您重置了 min 和 max 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:05:02.890

看看[这个](http://jsfiddle.net/4LgAP/)小提琴。

我使用了`$( "#slider" ).slider();`Jquery UI 的功能，并对最小/最大更改功能进行了一些更改。您可以获得比使用 HTML5 解决方案更好的兼容性。

# sql - SQL 返回值作为参数

> ID：15945163
> 
> 赞同：1
> 
> 时间：2013-04-11T09:24:40.277
> 
> 标签：sql, return-value, scope-identity

我昨天在这里问了一个[问题](https://stackoverflow.com/questions/15935334/sql-case-when-set-variable)

现在我改变了我的代码如下

```
declare @like bit, @dislike bit

IF EXISTS (select * from likeordislike 
           where comment_id = @comment_id and likevar = 1 and dislikevar = 0)
BEGIN
    SET @like    = 'true'
    SET @dislike = 'false'
END
ELSE IF EXISTS (select * from likeordislike 
                where comment_id = @comment_id and likevar = 0 and dislikevar = 1)
BEGIN
    SET @like    = 'false'
    SET @dislike = 'true'
END
ELSE
BEGIN
    SET @like = 'false'
    SET @dislike ='false'
END

SELECT     
    comment_id, comment_post_id, comment_user_id, 
    comment_text, comment_like, comment_dislike, 
    comment_reply_to_id, comment_date,
    @like as begendi,
    @dislike as begenmedi
FROM         
    comment 
ORDER BY 
    comment_date DESC 
```

我正在尝试选择评论和评论喜欢或不喜欢状态。

我在我的 asp.net 网页上使用数据列表。我需要每个评论的返回值。我必须提供@comment_id 参数，此查询为每个评论（`begendi = 1, begenmedi = 0`）返回相同的结果。我怎么解决这个问题？

`ScopeIdentity`还是需要返回值？谢谢（我有两个表 1-comment 表，2-likeordislike 表，其中包含 comment_id、user_id、likevar、dislikevar 和 eventdate 列）

```
select * 
from likeordislike 
where comment_id = @comment_id and likevar = 0 and dislikevar = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:39:02.103

我不确定您究竟想在这里实现什么，但我认为您可以在不使用程序方法并仅使用连接的情况下实现您想要的结果：

```
SELECT  comment_id, 
        comment_post_id, 
        comment_user_id, 
        comment_text, 
        comment_like, 
        comment_dislike, 
        comment_reply_to_id, 
        comment_date,
        begendi = CAST(CASE WHEN LikeOrDislike.Likes > 0 OR LikeOrDislike.Dislikes = 0 THEN 1 ELSE 0 END AS BIT),
        begenmedi = CAST(CASE WHEN LikeOrDislike.Dislikes > 0 AND LikeOrDislike.Likes = 0 THEN 1 ELSE 0 AS BIT)
FROM    Comment
        LEFT JOIN 
        (   SELECT  Comment_ID,
                    Likes = COUNT(CASE WHEN LikeVar = 1 AND DislikeVar = 0 THEN 1 END),
                    Dislikes = COUNT(CASE WHEN LikeVar = 0 AND DislikeVar = 1 THEN 1 END),
                    Other = COUNT(CASE WHEN LikeVar = DislikeVar THEN 1 END)
            FROM    LikeOrDislike
            GROUP BY Comment_ID
        ) LikeOrDislike
            ON Comment.Comment_ID = LikeOrDislike.Comment_ID
ORDER BY comment_date DESC 
```

# c# - 无法删除该对象，因为它在 ObjectStateManager 中找不到

> ID：15945172
> 
> 赞同：21
> 
> 时间：2013-04-11T09:25:07.343
> 
> 标签：c#, .net, entity-framework

我有这个通常可以工作的代码：

```
db.myTable.DeleteObject(myCurrent); 
```

我得到了这个错误：

```
The object cannot be deleted because it was not found in the ObjectStateManager. 
```

数据库中的表中存在相同的成分。

我试过这个：

```
db.myTable.Attach(myCurrent);
db.myTable.DeleteObject(myCurrent); 
```

我得到了另一个错误：

```
An entity object cannot be referenced by multiple instances of IEntityChangeTracker. 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-11T10:33:35.173

问题是您不能删除（或移除）分离的实体，也不能两次附加实体。你需要像下面这样的东西。

```
var entry = db.Entry(myCurrent);
if (entry.State == EntityState.Detached)
    db.myTable.Attach(myCurrent);
db.myTable.Remove(myCurrent); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-09-02T17:45:30.827

如果您刚刚从编辑或删除视图中收到模型，或者自己生成模型，那么 EF 不知道它，因此您将其状态设置为“已删除”（或 EntityState.Modified 等）以通过以下方式通知 EF：

```
//generate it yourself if not posted from edit/delete view
//var model = new Model { Id = 123 };

//set to delete
db.Entry(model).State = EntityState.Deleted; // or EntityState.Modified for edit etc.
db.SaveChanges(); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-16T08:13:02.777

另一个答案不起作用，所以这就是我修复它的方法。

以前我有：

```
public void ok(myTable myCurrent)
{
    //delete entries from other tables in relationship with myTable
    db.myTables.DeleteObject(myCurrent);

} 
```

我用这个修复了它：

```
public void ok(int current_id)
{
    //delete entries from other tables in relationship with myTable
    var y = (from x in db.myTables where x.id == current_id select x).First();
    db.myTables.DeleteObject(y);

} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-21T14:15:40.810

虽然这个问题是一个老问题，但它可能会帮助其他人犯同样的错误，

就我而言，问题是我通过删除 AsNoTracking 来获取数据 AsNoTracking，它解决了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-16T22:37:54.913

我在这里找到了答案：

[http://www.entityframeworktutorial.net/delete-entity-in-entity-framework.aspx](http://www.entityframeworktutorial.net/delete-entity-in-entity-framework.aspx)

这是我需要的“断开连接”版本；

```
 Student stud = null;

        using (SchoolDBContext ctx = new SchoolDBContext())
        {
            stud = (from s in ctx.Students
                    where s.StudentName == "Student1"
                        select s).FirstOrDefault();
        }

        using (SchoolDBContext newCtx = new SchoolDBContext())
        {
            newCtx.Students.Attach(stud);
            newCtx.Students.DeleteObject(stud);
            //you can use ObjectStateManager also
            //newCtx.ObjectStateManager.ChangeObjectState(stud, 
                                    System.Data.EntityState.Deleted);
            int num = newCtx.SaveChanges();
        } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-05T07:24:52.310

就我而言，我试图删除一个未从数据库表“学生”中获取的对象。删除对象的错误方法：

var objStudent=新学生（）；db.Student.Remove(objStudent);

所以请注意这一点。要删除的对象应该来自表

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-05T09:50:46.467

我有同样的问题。就我而言，我一直在使用两个不同的 DBContext 实例来检索数据和更新/删除。然后我对同一个代码块/方法/类中的所有数据库操作使用了相同的实例，然后问题解决了

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-24T12:41:00.240

我在这里找到了答案。我也尝试了它的工作：

```
dbEntities.Entry(CurrentObj).State = EntityState.Deleted;                
dbEntities.SaveChanges(); 
```

# c# - GacInstall on Sharepoint Timer Job aka SPJobDefinition

> ID：15945173
> 
> 赞同：1
> 
> 时间：2013-04-11T09:25:08.677
> 
> 标签：c#, sharepoint, gac, sharepoint-timer-job

目前，我正在尝试为我们的 Sharepoint 解决方案实施插件架构，管理员可以上传将由我们的解决方案安装和处理的 dll 文件。

实施需要GAC安装上传的dll，我已经使用

```
private void InstallToGac(byte[] libraryContent, string filename)
        {
            string path = tempFolder + filename;
            File.WriteAllBytes(path, libraryContent);
            try
            {
                new System.EnterpriseServices.Internal.Publish().GacInstall(path);
            }
            catch (Exception ex)
            {
                Logger.Error("Error while installing dll to GAC.", ex);
                throw;
            }
            finally
            {
                File.Delete(path);
            }
        } 
```

这只是将 dll 安装到 GAC 并在 Sharepoint 上下文中调用它时工作正常。但是，它不适用于多服务器环境，因为这只会将其安装在管理员上传文件的前端。因此，我通过继承将上面的代码移到了计时器作业中`SPJobDefinition`。GacInstall 不再将 dll 安装到 GAC。在调试模式下`GacInstall`，行工作正常，没有抛出任何异常，但也没有任何影响。

```
System.Security.Principal.WindowsIdentity.GetCurrent().Name; 
```

`Network Service`在计时器作业中返回。我在单服务器 Sharepoint 2010 Foundation 上工作，但我需要它在 2007/2010/2013 单服务器和多服务器环境中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T10:33:28.973

原来`Network Service`是问题一直存在。我不认为这是一个问题，因为我的所有 Sharepoint 应用程序池都通过网络服务运行并且以某种方式运行良好。在“本地服务”上更改“Sharepoint 2010 计时器”服务的“登录为”修复了它。

此外，事实证明，`GacInstall(path)`在某些情况下（包括这种情况）不会引发异常，并且会生成没有[此处](http://www.ikriv.com/blog/?cat=10)提到的有用信息的 Windows 事件。

# javascript - 使用在文本框中输入的文本搜索复选框中的项目

> ID：15945174
> 
> 赞同：0
> 
> 时间：2013-04-11T09:25:12.867
> 
> 标签：javascript, dom

我想在清单框中搜索。当用户在文本字段中输入文本时，如果复选框列表中存在此类项目，则应选中它。

HTML：

```
<asp:TextBox ID="TextBox1" runat="server" OnTextChanged= "return SearchList();"/>
<asp:CheckBoxList ID="CheckBoxList1" runat="server">
    <asp:ListItem>Vincent</asp:ListItem>
    <asp:ListItem>Jennifer</asp:ListItem>
    <asp:ListItem>Shynne</asp:ListItem>
    <asp:ListItem>Christian</asp:ListItem>
    <asp:ListItem>Helen</asp:ListItem>
    <asp:ListItem>Vladi</asp:ListItem>
    <asp:ListItem>Vinz</asp:ListItem>
    <asp:ListItem>Churchill</asp:ListItem>
    <asp:ListItem>Rod</asp:ListItem>
    <asp:ListItem>Mark</asp:ListItem>
</asp:CheckBoxList> 
```

JavaScript：

```
function SearchList() {
    try {
        var l = document.getElementById('<%= CheckBoxList1.ClientID %>');
        var tb = document.getElementById('<%= TextBox1.ClientID %>');
        var p = l.item.length
        if (tb.value == "") {
            ClearSelection(l);
        } else {
            for (var i = 0; i < l.options.length; i++) {
                if (l.options[i].value.toLowerCase().match(tb.value.toLowerCase())) {
                    l.options[i].selected = true;
                    return false;
                } else {
                    ClearSelection(l);
                }
            }
        }
    } catch (e) {}
}

function ClearSelection(lb) {
    lb.selectedIndex = -1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:02:53.667

我不知道**asp**，我将用简单的 HTML 来弄清楚
它可能对你有帮助。
**HTML 部分**

```
<select id="combo">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select>
<br>
<input type="text" id="searchTXT" onblur="checkCombo();"> 
```

**Javascript 部分**

```
function checkCombo() {
    try{
        var searchVal = $('#searchTXT').val();
        var options= document.getElementById('combo').options;
        for (var i= 0, n= options.length; i < n ; i++) {
        if (options[i].value.toLowerCase()==searchVal.toLowerCase()) {
            document.getElementById("combo").selectedIndex = i;
            break;
        }
    }
    }
    catch(e){}
    } 
```

# ruby-on-rails - Rails、CanCan 嵌套表单安全问题。读取允许对模型做任何事情

> ID：15945175
> 
> 赞同：1
> 
> 时间：2013-04-11T09:25:17.247
> 
> 标签：ruby-on-rails, security, nested-forms, cancan, nested-attributes

在我的网站上，客户可以创建一些组和产品。每个产品都是belongs_to group。每个用户都可以创建和更新组，但仅限于他们自己创建的组。我正在使用 CanCan gem 来限制权限，效果很好，但我遇到了问题：

如果我在创建产品时授予用户创建组的权限，如下所示：（简化示例）查看：

```
= form_for @product
 = f.fields_for :group do |builder|
   = builder.label 'Group name'
   = builder.text_field :group 
```

模型：

```
class Product < ActiveRecord::Base
  belongs_to :group
  attr_accessible :group_attributes
  accepts_nested_attributes_for :group
end

class Gift < ActiveRecord::Base
  has_many :products
end 
```

能力：

```
cannot :manage, :all
can :manage, Product, group_id: user.group_id
can :manage, Group, user_group_id: user.group_id 
```

因此，用户只能对他创建的内容（或由他的用户组中的任何人创建的内容执行任何操作，但忘记这一点——在我的示例中，每个 user_group 一个用户）

产品和组工作正常，限制访问。问题在于嵌套资源的安全性。在 ProductsController 我打电话

```
load_and_authorize_resource only: [:index, :show, :new, :destroy, :edit, :update]
authorize_resource only: [:create] #do some extra actions before authorize & save 
```

因此，当我尝试更新任何组时，即使它不属于用户 - 它也会更新。好的，我需要加载和授权 Group 资源。但

```
load_and_authorize_resource only: [:index, :show, :new, :destroy, :edit, :update]
authorize_resource only: [:create]
load_and_authorize_resource :gift 
```

或者

```
load_and_authorize_resource only: [:index, :show, :new, :destroy, :edit, :update]
authorize_resource only: [:create]
load_and_authorize_resource :gift, through: :product 
```

不给结果。

尝试使用参数时，我发现允许在具有任何参数的模型上读取允许通过嵌套对象进行完全访问。例如，

```
can :read , Group, group_id: -1 
```

我可以通过与嵌套属性关联来做任何事情，例如更新。此外，我尝试用其他方式解决我的问题——找到如何创建一个新组，如果它具有嵌套属性——这不是一个好方法，但它会阻止黑客。但是accept_nested_attributes只有参数update_only，没有create_only，所以，我决定在这里问。我哪里错了？

# intellij-idea - 为 Intellij Idea IDE 选择插件版本

> ID：15945177
> 
> 赞同：0
> 
> 时间：2013-04-11T09:25:27.970
> 
> 标签：intellij-idea

似乎最新的 ruby​​ 插件（5.4.0.20130410）已损坏/更改，因为跳转到源（CTRL + 单击方法名称）不起作用。

是否有可能在安装时选择插件版本，所以我可以恢复到以前的版本？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:40:43.650

以下网址说明了如何安装特定插件版本。

[http://confluence.jetbrains.com/display/RUBYDEV/Getting+latest+version](http://confluence.jetbrains.com/display/RUBYDEV/Getting+latest+version)

# facebook - 与 facebook 的集成应用程序

> ID：15945178
> 
> 赞同：3
> 
> 时间：2013-04-11T09:25:29.097
> 
> 标签：facebook, spring, authentication, spring-social

是否可以通过 Facebook 使用 Spring Social 进行身份验证？假设我有一个 Web 应用程序并想使用您的 Facebook 帐户登录。有人可以告诉我一个如何做的例子吗？谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:40:06.140

来自 SpringSource 的[Github 存储库](https://github.com/SpringSource)

*   [温室](https://github.com/SpringSource/greenhouse)
*   [春季社会样本](https://github.com/SpringSource/spring-social-samples)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T09:39:01.917

对的，这是可能的。您需要使用[Spring Social Facebook](http://static.springsource.org/spring-social-facebook/docs/1.0.x/reference/html/)连接器。您可以结帐、构建和使用展示应用程序：

1.  [展示](https://github.com/SpringSource/spring-social-samples/tree/master/spring-social-showcase)使用 java config 的应用程序
2.  如果您更喜欢 XML 配置，或者相同的[展示。](https://github.com/SpringSource/spring-social-samples/tree/master/spring-social-showcase-xml)此版本使用 1.1.0.M1 中的新社交命名空间标签。如果您想使用 1.0.2.RELEASE，它们将不可用。这很容易修复（查看一些旧版本的应用程序或将源代码与 1.0.2 文档进行比较，存在一些细微差别）

# vb.net - VB.Net 网格视图

> ID：15945185
> 
> 赞同：1
> 
> 时间：2013-04-11T09:25:43.597
> 
> 标签：vb.net, gridview, vb6, vb6-migration

我正在开发 VB.Net 项目，我需要将 VB6.0 代码转换为 VB.Net。在转换时，我知道在 VB6 中`GridView`有一个名为的事件`BeforeUpdate`，它在 VB.Net 中不可用。所以请给我一个替代方案，它可以和`BeforeUpdate`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:29:33.967

我认为您可能想查看[CellValidating](http://msdn.microsoft.com/fr-fr/library/system.windows.forms.datagridview.cellvalidating(v=vs.100).aspx)事件，该事件发生在单元格内容更新之前。

您将能够检查新值、修改它或取消修改。

# android - 我的异步任务无法正常工作，不调用执行

> ID：15945186
> 
> 赞同：0
> 
> 时间：2013-04-11T09:25:44.560
> 
> 标签：android, multithreading, android-asynctask, execute, runnable

在我的按钮上，我有以下代码：

```
 Log.i(TAG, "!isFirstVideo: " + isFirstVideo);
ConcatenateVideos concatenateVideos = new ConcatenateVideos();
concatenateVideos.setUris(firstVideoUri, fileUri, VideoRecorderActivity.this); 
```

这是我的异步任务类：

```
public class ConcatenateVideos extends AsyncTask<String, Void, String> {

private String firstVideoUri, fileUri;
private VideoRecorderActivity videoRecorderActivity;

public void setUris(String firstVideoUri, String fileUri, VideoRecorderActivity videoRecorderActivity) {
    Log.i("VideoRecorderActivity", "set uris");
    this.firstVideoUri = firstVideoUri;
    this.fileUri = fileUri;
    this.videoRecorderActivity = videoRecorderActivity;
    this.execute();
    Log.i("VideoRecorderActivity", "set uris2");
}

@Override
protected String doInBackground(String... params) {
    Log.i("VideoRecorderActivity", "concat do in background");
    FileInputStream videoMain = null, videoToAppend = null;
    try {
        videoMain = new FileInputStream(firstVideoUri);
        videoToAppend = new FileInputStream(fileUri);
    } catch (FileNotFoundException e) {
        Log.i("VideoRecorderActivity", "concat file not found " + e);
        e.printStackTrace();
    }
    if (videoMain != null && videoToAppend != null) {
        concatenateVideos(videoMain, videoToAppend);
        videoRecorderActivity.deleteCancelledRecording(fileUri);
    }
    return null;
}

@Override
protected void onPostExecute(String result) {
    super.onPostExecute(result);
    VideoRecorderActivity.recordButton.setEnabled(true);
    VideoRecorderActivity.okButton.setEnabled(true);
    VideoRecorderActivity.mySurfaceView.setEnabled(true);
    Toast.makeText(videoRecorderActivity, "Video appended succesfully", Toast.LENGTH_SHORT).show();
    Log.i("VideoRecorderActivity", "concat touche enabled record, ok ,surface: " + VideoRecorderActivity.recordButton.isEnabled() + "| " + VideoRecorderActivity.okButton.isEnabled() + "|" + VideoRecorderActivity.mySurfaceView.isEnabled());
} 
```

在 logcat 我得到：

```
04-11 12:21:42.520: I/VideoRecorderActivity(7927): set uris
04-11 12:21:42.520: I/VideoRecorderActivity(7927): set uris2 
```

但我不明白`Log.i("VideoRecorderActivity", "concat do in background");`这是 doInBackground 类的第一行，在这两行之间被称为：

```
Log.i("VideoRecorderActivity", "set uris");
this.firstVideoUri = firstVideoUri;
this.fileUri = fileUri;
this.videoRecorderActivity = videoRecorderActivity;
this.execute();
Log.i("VideoRecorderActivity", "set uris2"); 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:29:56.973

你会看见

```
"set uris2" 
```

在后台任务开始执行之前的日志输出中。不能保证您的方法在您从主线程`doInBackground()`调用后立即开始执行。`execute()`它可能会在不久之后开始执行，但不会立即执行。

也许您只需要进一步查看 logcat 缓冲区即可找到您期望的输出？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:27:42.107

您需要启动异步任务：

```
ConcatenateVideos concatenateVideos = new ConcatenateVideos();
concatenateVideos.setUris(firstVideoUri, fileUri, VideoRecorderActivity.this);
concatenateVideos.execute();   // let's roll 
```

你也不应该打电话给`super.onPostExecute();`. 这样做没有任何意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:28:55.397

调用

```
new ConcatenateVideos().execute() 
```

按钮单击和方法

```
 setUris() 
```

doInBackground() 方法中的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T12:43:20.267

当任何服务在该活动的后台运行时。例如，当音乐在后台运行服务时，Async 任务不会在后台解析 XML，因为它的 doInBackground 在那段时间不起作用，并且进度对话框或进度条一直在旋转。这就是为什么我使用 Executor 而不是旧的 asynctask。问题是我有一个下载管理器，它在另一个活动的背景下工作，并从数据库下载所有本地不存在的视频。这与 asynctask 类一起使用，它无法执行这个。

# java - 如何循环添加到 JLable 的图像

> ID：15945189
> 
> 赞同：0
> 
> 时间：2013-04-11T09:25:50.827
> 
> 标签：java, loops

有人能帮助我吗。这是我的代码。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.BorderFactory;
import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.border.LineBorder;
import javax.swing.border.TitledBorder;

public class picturesPanel implements ActionListener
{   

public static JPanel mainPanel;
public static JPanel panel1;
public static JLabel images;
boolean go = false;

private int i = 0;     
private ImageIcon myImage1 = new ImageIcon ("D:\\LCTPShare\\Picture1.gif");
private ImageIcon myImage2 = new ImageIcon ("D:\\LCTPShare\\Picture6.gif");
private ImageIcon myImage3 = new ImageIcon ("D:\\LCTPShare\\Picture3.gif");
private ImageIcon myImage4 = new ImageIcon ("D:\\LCTPShare\\Picture4.gif"); 
private ImageIcon myImage5 = new ImageIcon ("D:\\LCTPShare\\Picture5.gif"); 
private ImageIcon myImage6 = new ImageIcon ("D:\\LCTPShare\\Picture7.gif");
private ImageIcon myImage7 = new ImageIcon ("D:\\LCTPShare\\Picture8.gif");
private ImageIcon[] myImages = new ImageIcon[7];    

public void pictures() 
{    
    myImages[0]=myImage1;
    myImages[1]=myImage2;
    myImages[2]=myImage3;
    myImages[3]=myImage4;
    myImages[4]=myImage5;
    myImages[5]=myImage6;
    myImages[6]=myImage7;

    LineBorder borderA = new LineBorder(Color.RED);
    TitledBorder titledBorderA = BorderFactory.createTitledBorder(borderA, "");

    mainPanel = new JPanel();
    mainPanel.setBackground(Color.CYAN);
    mainPanel.setInputVerifier(null);    
    mainPanel.setBorder(titledBorderA);
    FINAL_LCTP_WORKBENCE.buttonsPanel.add(mainPanel, 0);    

    panel1 = new JPanel();
    panel1.setBackground(Color.LIGHT_GRAY);
    panel1.setPreferredSize(new Dimension(260, 115));           
    mainPanel.add(panel1);  

    images = new JLabel();
    images.setIcon(myImage1);     
    panel1.add(images, BorderLayout.CENTER);        
    javax.swing.Timer timer = new javax.swing.Timer(5000, this);
    timer.start();
}

public void actionPerformed(ActionEvent e) 
{
     i++;           

     if(i == 1)
     {
         images.setIcon(myImages[0]);                                                                                                      

     }
     if(i == 2)
     {
         images.setIcon( myImages[1]);   

     }
     if(i == 3)
     {
         images.setIcon(myImages[2]);   

     }
     if(i == 4)
     {
         images.setIcon(myImages[3]);   

     }   
     if(i == 5)
     {
         images.setIcon(myImages[4]);   

     }          
     if(i == 6)
     {
         images.setIcon(myImages[5]);   

     }
     if(i == 7)
     {
         images.setIcon(myImages[6]);   

     }    

     panel1.revalidate();
     panel1.repaint();

} 
```

}

我能够显示我想要的图像 1 到 6。如何使图像显示在我的 JPanel 循环中？我的目标是在显示图像 1 到 6 后，它将再次显示图像 1 到 6，并且该过程将继续，直到我关闭我的程序，或者直到我单击一个指示停止的按钮。我是新手，所以请原谅我的方法，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:26:47.183

Replace the code in `actionPerformed()` by

```
images.setIcon(myImages[i]);
i++;
if (i >= myImages.length) {
    i = 0;
} 
```

# android - AndEngine - 停止所有声音和音乐运行时 - 更改引擎的 AudioOptions

> ID：15945194
> 
> 赞同：0
> 
> 时间：2013-04-11T09:26:07.373
> 
> 标签：android, audio, andengine

我正在尝试为游戏创建设置，允许用户保存是否需要声音（复选框）。

当用户取消选中它时，我想禁用所有进一步的声音。

这就是我正在做的

```
// Create Dialog
final SexyAlertDialog dialog = new SexyAlertDialog(mActivity,R.layout.settings,R.style.SettingDialog,false);

// Find CheckBox
final CheckBox isSoundEnabled = (CheckBox) dialog.findViewById(R.id.isSoundEnabled);

// Check SharedPreferences to get isSoundEnabled value
if(mSettingPreferences.getBoolean("isSoundEnabled", false)){
    isSoundEnabled.setChecked(true);
}else{
    isSoundEnabled.setChecked(false);
}

// OnCheckedChangeListener on Checkbox in AlertDialog
isSoundEnabled.setOnCheckedChangeListener(new OnCheckedChangeListener(){
    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        if(isChecked){
            mSettingEditor.putBoolean("isSoundEnabled", true);
            mSettingEditor.commit();

            // Enable Music and Sound
            mActivity.getEngine().getEngineOptions().getAudioOptions().setNeedsSound(true);
            mActivity.getEngine().getEngineOptions().getAudioOptions().setNeedsMusic(true);

            Toast.makeText(mActivity, "Audio Enabled", Toast.LENGTH_LONG).show();
        }else{
            mSettingEditor.putBoolean("isSoundEnabled", false);
            mSettingEditor.commit();

            // Disable Music and Sound
            mActivity.getEngine().getEngineOptions().getAudioOptions().setNeedsSound(false);
            mActivity.getEngine().getEngineOptions().getAudioOptions().setNeedsMusic(false);

            Toast.makeText(mActivity, "Audio Disabled  !! ", Toast.LENGTH_LONG).show();
        }
    }
});

    dialog.show(); 
```

即使做了之后

```
mActivity.getEngine().getEngineOptions().getAudioOptions().setNeedsSound(false);
mActivity.getEngine().getEngineOptions().getAudioOptions().setNeedsMusic(false); 
```

声音还在播放。
如何禁用所有声音？

或者，我是否必须这样做：

```
if(mSettingPreferences.getBoolean("isSoundEnabled", false)){
     pMySound.play();
} 
```

对于我的应用程序中的每个声音？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T09:48:30.197

您可以遍历所有您的`Music`和`Sound`对象并调用`stop()`,`pause()`或`setVolume(0,0)`对它们进行调用。

您还可以尝试通过将主音量设置为 0 来静音所有声音：

```
mActivity.getEngine().getMusicManager().setMasterVolume(0);
mActivity.getEngine().getSoundManager().setMasterVolume(0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-22T12:39:32.117

正如迈克尔所说，您可以暂停声音而不是将音量设置为零。

```
mActivity.getEngine().getSoundManager().onPause(); 
```

这将停止所有声音。**无需遍历每个声音并暂停每个声音**。恢复：

```
mActivity.getEngine().getSoundManager().onResume(); 
```

# c# - 如何在 c# For Windows Phone 7 中创建大小为 480*640 的相机 UI 部分？

> ID：15945197
> 
> 赞同：0
> 
> 时间：2013-04-11T09:26:10.883
> 
> 标签：c#, windows-phone-7.1

我已将此代码用于 xaml 。

```
<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.ColumnDefinitions>
            <ColumnDefinition Width="640" />
            <ColumnDefinition Width="160" />
    </Grid.ColumnDefinitions>

    <Canvas x:Name="viewfinderCanvas" Width="640" Height="480" 
               HorizontalAlignment="Left" >

        <!--Camera viewfinder -->
        <Canvas.Background>
            <VideoBrush x:Name="viewfinderBrush" />
        </Canvas.Background>
     </Canvas>

    <!--Button StackPanel to the right of viewfinder>-->
    <StackPanel Grid.Column="1" >
    <Button x:Name="ShutterButton" Content="SH" 
    Click="ShutterButton_Click"
    FontSize="26" FontWeight="ExtraBold" Height="75" />
    </StackPanel>

    <!--Used for debugging >-->
    <TextBlock Height="40" HorizontalAlignment="Left" Margin="8,428,0,0"
    Name="txtDebug" VerticalAlignment="Top" Width="626" FontSize="24"
    FontWeight="ExtraBold" />

</Grid> 
```

但我必须在 C# 中创建它（在运行时）。

我已经尝试了很多，但我无法找到如何使用画布显示图像。请建议我如何在运行时制作它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:34:05.507

要捕获图像，您可以使用[相机任务](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394006%28v=vs.105%29.aspx)，文档链接。你也有可能进行[更深层次的整合](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202973%28v=vs.105%29.aspx)。这些链接应该可以帮助您入门。如果您遇到更具体的问题，请询问（可能是一个新问题）。

# ruby-on-rails - rails 生成控制器注释抛出错误

> ID：15945198
> 
> 赞同：0
> 
> 时间：2013-04-11T09:26:16.517
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试使用 rails generate 命令生成评论控制器，但它给出了一个奇怪的错误：-

```
$ rails generate controller comments
The name 'CommentsController' is either already used in your application or reserved by Ruby on Rails. Please choose an alternative and run this generator again. 
```

我已经检查过了，但我没有评论控制器。这些是我尝试过的命令：-

```
$ rails generate controller Comments create
The name 'CommentsController' is either already used in your application or reserved by Ruby on Rails. Please choose an alternative and run this generator again.

$ rails generate controller comments
The name 'CommentsController' is either already used in your application or reserved by Ruby on Rails. Please choose an alternative and run this generator again.

$ rails g controller Comments
The name 'CommentsController' is either already used in your application or reserved by Ruby on Rails. Please choose an alternative and run this generator again 
```

请帮帮我。

这是 GemFile：-

```
source 'http://rubygems.org'

gem 'rails', '3.2.13'
gem 'bootstrap-sass', '2.1'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'
gem 'mysql'
gem 'activeadmin'
gem "meta_search",    '>= 1.1.0.pre'
gem 'formtastic'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
group :development, :test do
  gem 'rspec-rails', '~> 2.11.0'
  gem 'factory_girl_rails', '~> 3.5.0'
  gem 'capybara', '~> 1.1.2'
  gem 'guard-rspec', '~> 1.2.0'
end

# To use ActiveModel has_secure_password
gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:20:24.257

`active_admin`gem 使用相同的名称`comments`。这就是为什么 rails generator 不让你创建`comments controller`. 请参阅：github.com/gregbell/active_admin/tree/master/lib/active_admin。在这里你可以看到`comments`目录。因此，最好为您的控制器使用其他名称以避免出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T10:33:35.733

如果您不需要管理部分中的评论，则可以将其关闭。

去`/config/initializers/active_admin.rb`写`config.allow_comments = false`。完成此操作后，您可以生成控制器，并且不会与 active_admin 冲突。

您可以阅读[活动管理文档](http://www.activeadmin.info/docs/1-general-configuration.html#comments)以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:30:14.540

我刚刚`comments_controller`手动创建了它，它正在工作。`active_admin`可能是个问题。我问了一个朋友，但他没有遇到任何这样的问题`active_admin`。所以，我不确定问题是什么，但现在，手动创建控制器是可行的。

# android - android intellij 项目中的 NoClassDefFoundError

> ID：15945202
> 
> 赞同：1
> 
> 时间：2013-04-11T09:26:24.767
> 
> 标签：android, intellij-idea, noclassdeffounderror

我在 Intellij Android 项目中添加了一个外部库作为模块。在编译过程中没有错误。但是当我尝试运行应用程序时，我得到了**java.lang.NoClassDefFoundError**

这个错误的原因是什么？

# php - 如何检查 wordpress 中是否存在顶级管理菜单

> ID：15945203
> 
> 赞同：5
> 
> 时间：2013-04-11T09:26:25.737
> 
> 标签：php, wordpress

我想检查 Wordpress 管理界面中是否已经存在某个顶级菜单：

*   如果它存在，那么我想在其中创建一个子菜单。
*   否则，我想创建顶级菜单，然后创建子菜单。

我有几个小插件，我想将它们组织在一个顶级菜单中，然后每个插件都有一个子菜单。但是如何检查顶级菜单的存在呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T18:54:39.520

您可以使用全局变量来执行此操作，`$menu`这将返回一个或多个数组，这些项目具有特定的索引，其中存储了菜单的名称您可以遍历数组以查找所需的索引，如果找到，那么您只需添加子菜单页面，否则您可以创建它。

```
global $menu;
$menuExist = false;
foreach($menu as $item) {
    if(strtolower($item[0]) == strtolower('My Menu Name')) {
        $menuExist = true;
    }
}
if(!$menuExist)
    // Create my menu item 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-06-18T12:04:30.877

另一种选择是，使用该功能[`menu_page_url()`](https://developer.wordpress.org/reference/functions/menu_page_url/)：

> *根据注册的 slug 获取 URL 以访问特定菜单页面。*
> 
> *如果 slug 没有正确注册，则不会返回任何 URL。*

**用法**

该函数有两个参数：

1.  包含顶部菜单 slug 的字符串
2.  布尔标志`$echo`，默认为真。

第二个参数是重要的部分：将其设置`false`为获取返回值。如果您不这样做，则该函数将回显 URL 而不是返回它。

**示例代码：**

```
<?php
$menu_url = menu_page_url( 'some-plugin', false );

if ( $menu_url ) {
    // The top menu exists, so add a sub-menu item.
    add_submenu_page( 'some-plugin', 'Sample Page', 'My Menu', 'read' );
} else {
    // No top menu with that slug, we can create it.
    add_menu_page( 'Sample Page', 'My Menu', 'read', 'some-plugin' );
} 
```

# javascript - $(window).load 似乎在 Firefox 中不起作用

> ID：15945206
> 
> 赞同：4
> 
> 时间：2013-04-11T09:26:37.070
> 
> 标签：javascript, jquery, firefox

所以我有一些代码只有在加载网站内容时才需要执行，所以我将它放在窗口加载中，如下所示：

```
$(window).load(function() { 
   //some stuff happens
}); 
```

在 safari 和 chrome 中运行良好（我在 mac osx 10.8 上），但似乎不适用于 firefox（19.0.2）。是否有修复或需要应用的东西才能使 Firefox 使用它？

如果我在 Firefox 中清除缓存，它会起作用，但在那之后的任何时候都不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-03-02T19:25:58.373

万一其他人从谷歌找到这个页面......

对我来说，以下确实适用于 Firefox：

```
$(window).load(function() {
    //Do something
}); 
```

但是当页面被缓存时，例如单击后退按钮时，`$(window).load()`不会再次调用。请参阅[此](https://bugs.jquery.com/ticket/8684)以获取错误报告。这是 Firefox 的预期行为，因此不要期待修复。

解决此问题的两件事是在使用此代码（除了您的`$(window).load()`代码之外）点击后退按钮时阻止浏览器缓存页面：

```
window.onunload = function(){}; //This forces bfcache to not cache the page 
```

或者使用其他 jQuery 事件而不是`$(window).load()`：

```
window.onpageshow = function () {
    //Do something
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:28:33.610

你试过了吗`window.onload = function(){}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-14T09:26:40.540

如果您使用`jQuery`. 使用 jQuery 事件：

```
$(document).ready(function(){
    // YOUR CODE
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T09:31:26.390

尝试这个。它适用于所有浏览器。

```
<script type="text/javascript">
window.onload=function(){
    alert('do something');  
}
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T09:31:45.790

只是简单地做

```
my_function(){
    // some code
} 
```

window.onload = my_function

# php - 从 xml 中获取所有子属性值

> ID：15945207
> 
> 赞同：0
> 
> 时间：2013-04-11T09:26:41.410
> 
> 标签：php, javascript, xslt, xpath

这是我的简单 xml 文件：-

```
<child_2 entity_id="2" value="Root" parent_id="1">
    <child_4 entity_id="4" value="Activities" parent_id="2">
        <child_10066 entity_id="10066" value="Physical1" parent_id="4">
            <child_10067 entity_id="10067" value="Cricket" parent_id="10066">
                <child_10068 entity_id="10068" value="One Day" parent_id="10067"/>
            </child_10067>
        </child_10066>
        <child_10069 entity_id="10069" value="Test2" parent_id="4"/>
        <child_10070 entity_id="10070" value="Test3" parent_id="4"/>
        <child_10071 entity_id="10071" value="Test4" parent_id="4"/>
        <child_10072 entity_id="10072" value="Test5" parent_id="4"/>
        <child_5 entity_id="5" value="Physical" parent_id="4"/>
    </child_4>
</child_2> 
```

我想`entity_id 4`
用逗号分隔所有子值`,`并保存为文本文件

**这是我的o / p：-**
10066,10067,10068,10069,10070,10071

**这是我的尝试：-**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" encoding="UTF-8"/>
  <xsl:key name="kChild" match="*[@entity_id]" use="../@entity_id"/>

  <xsl:param name="region" select="'4'" />

  <xsl:template match="/">
    <xsl:apply-templates select="key('kChild', $region)" />
  </xsl:template>

  <xsl:template match="*">
    <xsl:value-of select="@entity_id"/>
    <xsl:text>,</xsl:text>
  </xsl:template>
</xsl:stylesheet> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:17:56.037

要获取`@entity_id`属性值为 的元素的每个后代的`@entity_id`属性值`$region`：

### 样式表

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" encoding="UTF-8"/>

  <xsl:param name="region" select="'4'"/>

  <xsl:template match="/">
    <xsl:apply-templates select="*/*[@entity_id = $region]//*"/>
  </xsl:template>

  <xsl:template match="*">
    <xsl:value-of select="@entity_id"/>
    <!-- Don't add comma after last number -->
    <xsl:if test="not(position() = last())">
      <xsl:text>,</xsl:text>
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

### 输入

```
<child_2 entity_id="2" value="Root" parent_id="1">
  <child_4 entity_id="4" value="Activities" parent_id="2">
    <child_10066 entity_id="10066" value="Physical1" parent_id="4">
      <child_10067 entity_id="10067" value="Cricket" parent_id="10066">
        <child_10068 entity_id="10068" value="One Day" parent_id="10067"/>
      </child_10067>
    </child_10066>
    <child_10069 entity_id="10069" value="Test2" parent_id="4"/>
    <child_10070 entity_id="10070" value="Test3" parent_id="4"/>
    <child_10071 entity_id="10071" value="Test4" parent_id="4"/>
    <child_10072 entity_id="10072" value="Test5" parent_id="4"/>
    <child_5 entity_id="5" value="Physical" parent_id="4"/>
  </child_4>
</child_2> 
```

### 输出

```
10066,10067,10068,10069,10070,10071,10072,5 
```

# c# - 将 VB 代码转换为 C#

> ID：15945209
> 
> 赞同：-2
> 
> 时间：2013-04-11T09:26:44.433
> 
> 标签：c#, vb.net, bluetooth

我一直在努力理解这个 VB 代码，我正在尝试构建一个使用蓝牙连接进行通信的应用程序，谁能帮我将 ti 转换为 C#，以便我能正确理解它。

```
 ' The host part of the URI is the device address, e.g. IrDAAddress.ToString(),
' and the file part is the OBEX object name.
Dim addr As String = "112233445566"
Dim uri As New Uri("obex://" & addr & "/HelloWorld.txt")
Dim req As New ObexWebRequest(uri)
req.ReadFile("Hello World.txt")
Dim rsp As ObexWebResponse = CType(req.GetResponse(),ObexWebResponse)
Console.WriteLine("Response Code: {0} (0x{0:X})", rsp.StatusCode)

    ' The host part of the URI is the device address, e.g. IrDAAddress.ToString(),
' and the file part is the OBEX object name.
Dim addr As String = "112233445566"
Dim uri As New Uri("obex://" & addr & "/HelloWorld2.txt")
Dim req As New ObexWebRequest(uri)
Using content As Stream = req.GetRequestStream()
   ' Using a StreamWriter to write text to the stream...
   Using wtr As New StreamWriter(content)
      wtr.WriteLine("Hello World GetRequestStream")
      wtr.WriteLine("Hello World GetRequestStream 2")
      wtr.Flush()
      ' Set the Length header value
      req.ContentLength = content.Length
   End Using
   ' In this case closing the StreamWriter also closed the Stream, but ...
End Using
Dim rsp As ObexWebResponse = CType(req.GetResponse(),ObexWebResponse) 
Console.WriteLine("Response Code: {0} (0x{0:X})", rsp.StatusCode)

    Dim lsnr As New ObexListener(ObexTransport. Bluetooth)
lsnr.Start()
' For each connection
Dim ctx As ObexListenerContext = lsnr.GetContext()
Dim req As ObexListenerRequest = ctx.Request
Dim pathSplits() As String = req.RawUrl.Split('/')
Dim filename As String = pathSplits(pathSplits.Length – 1)
req.WriteFile(filename)
'
lsnr.Stop()

    Dim addr As BluetoothAddress _
  = BluetoothAddress.Parse("001122334455")
'
Dim ep As New BluetoothEndPoint(addr, BluetoothService.SerialPort)
Dim cli As New BluetoothClient
cli.Connect(ep)
Dim peerStream As Stream = cli.GetStream()
peerStream.Write/Read ... 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:30:03.703

只需粘贴您的 VB.NET 代码，这个免费实用程序就会自动将其转换为 C# 中的等效代码。

只需通过[VB.Net 到 C#](http://www.developerfusion.com/tools/convert/vb-to-csharp/)

或任何其他在线代码翻译器。[VB.Net -> C#](http://www.carlosag.net/tools/codetranslator/)

希望它会帮助你。

# ios - 如何保护（加密）由 webkit/本地存储存储的数据

> ID：15945216
> 
> 赞同：3
> 
> 时间：2013-04-11T09:27:04.160
> 
> 标签：ios, security, encryption, webkit, data-protection

我正在开发一个使用 PhoneGap 框架的应用程序，因此只是一个使用 HTML5 的普通网络应用程序。与许多网络应用程序一样，我的客户也希望设备离线时数据可用。对于这些情况，我想将数据存储在浏览器的本地存储中。

然而，客户也希望数据被加密，因此在设备丢失的情况下，敏感数据不会落入坏人之手。我目前的研究提出了两种*可能的*方法：

1) 在存储到本地存储之前，使用 JS 加密框架对任何数据进行加密。由于我的应用程序需要用户登录，我可以使用用户密码来派生加密密钥（用户密码存储在 iOS 钥匙串中）

2）用户iOS的数据保护机制[https://www.apple.com/business/docs/iOS_Security_Guide.pdf](https://www.apple.com/business/docs/iOS_Security_Guide.pdf)

对于 2)，在开发人员门户（应用程序 ID 部分）中启用数据保护实际上**不会**加密任何内容，而是启用使用适当的或操作加密特定文件**的可能性**，这是否正确？还是可以通过在 App ID/配置文件级别启用数据保护来加密整个沙箱（包括浏览器本地存储！）？`NSData``NSFileManager`

是否有任何其他推荐的方法来保护浏览器本地存储中存储的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:38:01.600

第一个选项适用于跨设备。

我在研究中发现的两个可靠的 JS 加密框架是

*   [斯坦福 Javascript 加密库](https://www.google.it/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC8QFjAA&url=http://crypto.stanford.edu/sjcl/&ei=VoNmUcenD8e-PNG6gZAP&usg=AFQjCNGVUDT-vAAV8Ro1MZ-R4oBNY2AeSw&sig2=FoWQGGTVmn2cwEOhHJelHQ&bvm=bv.45107431,d.ZWU)
*   [CryptoJS](https://www.google.it/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CC0QFjAA&url=http://code.google.com/p/crypto-js/&ei=CIRmUaGvBIXVPJLIgaAC&usg=AFQjCNHV-4a2QYiniWdW0kYuM_mwgRIeJw&sig2=wYV6GYhcriASo9bjFyIgJA&bvm=bv.45107431,d.ZWU)（在我使用 AES-256 的测试中比 SJCL 快）

无论您做什么，请确保用于派生加密密钥的可能数据（在您的示例中为密码）安全存储。

# c# - 删除不适用于@RenderPage

> ID：15945217
> 
> 赞同：0
> 
> 时间：2013-04-11T09:27:10.833
> 
> 标签：c#, asp.net-mvc-3, razor

我正在使用 MVC3（代码优先）并遇到了一些奇怪的东西。当我想删除一个问题时会发生这种情况。当我编写包含问题所有方面的页面时，它工作正常，但由于我在几页中需要相同的东西，我想我把它放在一个单独的页面中，然后放在带有`@RenderPage`.

当我使用选项一时，删除效果很好，但是当我使用第二个选项时，删除不起作用。有人可以解释一下这是怎么回事，如果我可以修复它，以便我可以使用`@RenderPage`.

为了澄清，我将给出一些代码：

选项1

```
<div class="Question">
    <div class="QuestionHeader">
        <div class="QuestionTitle">@Html.DisplayFor(model => model.Title)</div>
        <div class="QuestionDate">@Html.DisplayFor(model => model.Date)</div>
    </div>
    <hr />
    <div class="display-field">@Html.DisplayFor(model => model.Message)</div>
    <div class="spacing">
    <hr />
    <div class="QuestionAuthor>@Html.DisplayFor(model => model.Author)</div>
</div>
@using (Html.BeginForm()){
    <p class="bottomNav">
        <input type="submit" value="Delete" /> |
        @Html.ActionLink("Back to list", "Index")
    </p>
} 
```

选项 2

```
@RenderPage("~/Views/Shared/_InitQuestion.cshtml")
@using (Html.BeginForm()){
    <p class="bottomNav">
        <input type="submit" value="Delete" /> |
        @Html.ActionLink("Back to list", "Index")
    </p>
} 
```

（我认为这里没有，但如果你看到一个错字：抱歉，我不能复制/粘贴代码，因为我不是从我的工作计算机上写的。我很确定没有我计算机上的代码中有任何错字。我看到问题的详细信息很好`@RenderPage`，我只是无法删除它（不会进入控制器的`ActionResult`，`HttpPost`删除的一部分））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:00:05.603

用户 Html.Partial 而不是 RenderPage 并且您不需要正确地查看视图的整个路径。当你提交一个表单时，一些输入的特定名称被传递给动作，你在表单中什么都没有，也没有传递给动作，它怎么知道要删除什么？

```
@Html.Partial("_InitQuestion", Model)
@using(Html.BeginForm())
{
    <p class="bottomNav">
        <input type="submit" value="Delete" /> |
        <input type="hidden" value="@(Model.Id)" name="Id" />
        @Htlm.ActionLink("Back to list", "Index")
    </p>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:18:12.300

我不知道为什么（所以如果有人能解释一下，请解释一下），但由于某种原因，@RenderPage 出现了可怕的错误。我首先对选项 1 进行编码，运行它并复制/粘贴源代码，然后对选项 2 执行相同操作。比较两者，发现由于某种原因，选项 2（@RenderPage）没有表单标签。

有人建议使用 Partial 代替 RenderPage 并且它有效。所以现在我的代码是：

```
@Html.Partial("~/Views/Shared/_InitQuestion.cshtml", Model)
@using(Html.BeginForm())
{
    <p class="bottomNav">
        <input type="submit" value="Delete" /> |
        @Htlm.ActionLink("Back to list", "Index")
    </p>
} 
```

# c# - CryptoAPI AcquireContext 无法检索密钥容器

> ID：15945218
> 
> 赞同：2
> 
> 时间：2013-04-11T09:27:14.570
> 
> 标签：c#, .net, cryptoapi

我正在将一个旧的 VB6 应用程序移植到 .NET，从昨天下午开始我遇到了一些 CryptoAPI 调用的问题。

特别是我无法检索已定义的密钥容器。我使用该`CryptAcquireContext()`功能。我在创建容器的地方使用了一些测试代码。然后，如果我去，`C:\Users...\Roaming\Microsoft\Crypto\RSA\Machine Keys\`我可以看到一个使用我定义的容器名称创建的文件，所以我假设它已成功创建。

尝试创建相同容器的后续调用验证了该假设，因为我收到了键集已定义的 win32 错误。

无论如何，在我的下一个代码调用中，我尝试检索我已经创建的容器，我得到了未定义键集的 Windows 错误。

> 错误：-2146893799 (80090019) 未定义键集。

有任何想法吗？

这是一个代码示例：

```
public const uint PROV_RSA_FULL = 1;
public const uint CRYPT_NEWKEYSET = 0x00000008;
public const uint CRYPT_MACHINE_KEYSET = 0x00000020;
const string MS_DEF_PROV = "Microsoft Base Cryptographic Provider v1.0";

[DllImport("advapi32.dll", SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
public static extern bool CryptAcquireContext(out IntPtr phProv, string pszContainer, string pszProvider, uint dwProvType, uint dwFlags);

public static void CreateContainer()
{
        IntPtr hCryptProv;
        int error;
        if (!CryptAcquireContext(out hCryptProv, "new", MS_DEF_PROV, PROV_RSA_FULL, CRYPT_NEWKEYSET))
        {
            error = Marshal.GetLastWin32Error();
        }

        if (!CryptAcquireContext(out hCryptProv, "new", MS_DEF_PROV, PROV_RSA_FULL, CRYPT_MACHINE_KEYSET))
        {
            error = Marshal.GetLastWin32Error();
        }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T10:39:09.407

您正在为该用户创建密钥容器，但试图从基于机器的存储中获取它。要解决此问题，您需要更改为 0 或根据您的需要`CRYPT_MACHINE_KEYSET`创建密钥集使用。`CRYPT_NEWKEYSET | CRYPT_MACHINE_KEYSET`

> 默认情况下，密钥和密钥容器存储为用户密钥。对于 Base Providers，这意味着用户密钥容器存储在用户的配置文件中。管理员在没有此标志的情况下创建的密钥容器只能由创建密钥容器的用户和具有管理权限的用户访问。

有关详细信息，请查看以下链接。

[CryptAcquireContext() 使用和故障排除](http://support.microsoft.com/kb/238187)

[CryptAcquireContext 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379886%28v=vs.85%29.aspx)

# c++ - 在静态/动态库混合中链接 Debug-CRT 时崩溃？

> ID：15945219
> 
> 赞同：1
> 
> 时间：2013-04-11T09:27:22.760
> 
> 标签：c++, visual-studio-2010, debugging, crt, visual-studio-6

我有一个奇怪的问题，我在删除代码中的对象时遇到崩溃。对象是有效的，没有可能覆盖它们的内存泄漏，并且仅在调试模式下发生。使用 Linux 编译的相同代码在调试和发布版本中都可以正常工作。所以我猜这是 Visual Studio 调试 CRT 的一些奇怪问题。

我的软件结构如下：

两个静态库在“多线程（调试）DLL”模式下编译并链接到： 在“多线程（调试）”模式下编译的共享库（DLL）。从逻辑上我会说它应该是相反的，但后来我得到了大量未解析的符号。

最后有一个在“多线程（调试）DLL”模式下编译的可执行文件，它调用上面提到的DLL。当我切换到“多线程（调试）”时，这并没有什么不同。

对象删除崩溃发生在 dbgheap.c / _heap_alloc_dbg_impl() -> mlock.c / _unlock() - 一个函数

那么：可能是什么问题？调试模式下真的是 CRT 不兼容还是其他原因？我很确定这不是典型的内存泄漏，因为它可以在 Linux 和发布版本中顺利运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:04:00.537

当您静态链接库时，您必须注意使用*相同*的CRT“风格”。

使用 DLL 时：

*   如果它们公开了**纯 C 接口**（例如边界处没有 STL 类）*并且*您确保内存分配和释放都在库代码中完成（或者，更一般地说，[客户端和库都使用相同的分配器](http://blogs.msdn.com/b/oldnewthing/archive/2009/09/23/9898230.aspx)）

*   或者如果它们是**COM** DLL

然后您可以从使用*不同风格*的 CRT 构建的可执行文件中使用它们，甚至可以使用*不同版本*的 VC++ 编译器构建它们。

但是，如果您的 DLL 在边界处具有 C++ 类（如 STL 类），那么对于静态链接库有严格的限制，即您必须使用为 DLL 和 EXE 动态链接的*相同*CRT 风格（调试或发布） ，并且 EXE 和 DLL 都必须使用*相同*的编译器和相同的设置（如`_HAS_ITERATOR_DEBUGGING`）构建。

# scripting - Torque 3d 隐藏脚本

> ID：15945220
> 
> 赞同：0
> 
> 时间：2013-04-11T09:27:23.353
> 
> 标签：scripting, share, torque3d

我找不到有关如何在 proj 版本中隐藏我的脚本和网格文件的信息。如果我不想共享我的数据（脚本和网格）怎么办？Torque 3d 不可能吗？还是我必须购买许可版本的引擎？

# java - 进程启动后更改 ProcessBuilder 的环境变量

> ID：15945224
> 
> 赞同：0
> 
> 时间：2013-04-11T09:27:28.977
> 
> 标签：java, environment-variables, processbuilder

我想在启动后设置通过 ProcessBuilder 构建的 SubProcess 的环境变量。以下代码不起作用：

```
ProcessBuilder pb  = new ProcessBuilder("cscript.exe", "test.vbs");
Process p = pb.start();
pb.environment().put("test", "1"); 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:51:35.490

不，你不能那样做。进程构建器环境在启动后是隔离的并且不可变。

> 两个 ProcessBuilder 实例始终包含**独立**的流程环境，因此对返回映射的更改将永远不会反映在任何其他 ProcessBuilder 实例或 System.getenv 返回的值中。
> 
> 对此流程构建器的后续修改不会影响返回的流程。

如果您有兴趣在启动进程**后将**信息传递给进程，请使用`OutputStream`进程并写入。该进程应从其输入流中读取并处理来自调用者的通信。[更多帮助](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)。

```
OutputStream os = process.getOutputStream();  
// write data to this stream and read it on the other end. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T09:30:42.707

不可能的，看ProcessBuilder.start API：*... 后续修改这个流程构建器不会影响返回的流程。*

# google-app-engine - App Engine + Maven = 获取 java.lang.reflect.InvocationTargetException

> ID：15945226
> 
> 赞同：1
> 
> 时间：2013-04-11T09:27:36.933
> 
> 标签：google-app-engine

第一次尝试用maven搭建谷歌应用引擎骨架项目。我按照[此页面](https://developers.google.com/appengine/docs/java/tools/maven)上的说明进行操作，但运行时出现此错误`mvn appengine:devserver`：

```
-------------------------------------------------------
 T E S T S
-------------------------------------------------------

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO]
[INFO] --- maven-war-plugin:2.3:war (default-war) @ test1104 ---
[INFO] Packaging webapp
[INFO] Assembling webapp [test1104] in [C:\Users\mshaham\maven\test1104\target\t
est1104-1.0-SNAPSHOT]
[INFO] Processing war project
[INFO] Copying webapp webResources [C:\Users\mshaham\maven\test1104/src/main/web
app/WEB-INF] to [C:\Users\mshaham\maven\test1104\target\test1104-1.0-SNAPSHOT]
[INFO] Copying webapp resources [C:\Users\mshaham\maven\test1104\src\main\webapp
]
[INFO] Webapp assembled in [1531 msecs]
[INFO] Building war: C:\Users\mshaham\maven\test1104\target\test1104-1.0-SNAPSHO
T.war
[INFO]
[INFO] <<< appengine-maven-plugin:1.7.5:devserver (default-cli) @ test1104 <<<
[INFO]
[INFO] --- appengine-maven-plugin:1.7.5:devserver (default-cli) @ test1104 ---
[INFO]
[INFO] Google App Engine Java SDK - Running Development Server
[INFO]
[INFO] Retrieving Google App Engine Java SDK from Maven
[INFO] Running C:\Program Files\Java\jdk1.7.0_05\jre\bin\java -javaagent:\\serve
r\profiles\mshaham\.m2\repository\com\google\appengine\appengine-java-sdk\1.7.5\
appengine-java-sdk\appengine-java-sdk-1.7.5\lib\agent\appengine-agent.jar -Xboot
classpath/p:\\server\profiles\mshaham\.m2\repository\com\google\appengine\appeng
ine-java-sdk\1.7.5\appengine-java-sdk\appengine-java-sdk-1.7.5\lib\override\appe
ngine-dev-jdk-overrides.jar -classpath \\server\profiles\mshaham\.m2\repository\
com\google\appengine\appengine-java-sdk\1.7.5\appengine-java-sdk\appengine-java-
sdk-1.7.5\lib\appengine-tools-api.jar com.google.appengine.tools.development.Dev
AppServerMain C:\Users\mshaham\maven\test1104\target/test1104-1.0-SNAPSHOT
[INFO] java.lang.reflect.InvocationTargetException
[INFO]  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[INFO]  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:57)
[INFO]  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:43)
[INFO]  at java.lang.reflect.Method.invoke(Method.java:601)
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 12.247s
[INFO] Finished at: Thu Apr 11 12:20:34 IDT 2013
[INFO] Final Memory: 8M/92M
[INFO] ------------------------------------------------------------------------ 
```

# regex - Ant tokenfilter 在每行的开头添加字符串并删除换行符

> ID：15945229
> 
> 赞同：1
> 
> 时间：2013-04-11T09:27:46.703
> 
> 标签：regex, ant

我需要从文件中加载属性并通过以下方式更改字符串：

```
prop1=value1
prop2=value2

prop3=value3 
```

进入 ：

```
-Pprop1=value1 -Pprop2=value2 -Pprop3=value3 
```

（基本上我想在每行的开头添加 -P 并删除换行符）

我使用`tokenfilter`了以下方式：

```
<loadfile property="temp.properties" srcFile="${properties.file}">
    <filterchain>
        <tokenfilter delimoutput=" -P">
            <ignoreblank />
        </tokenfilter>
    </filterchain>
</loadfile> 
```

这种方法的问题是，如果文件以空的新行结尾，我会得到以下字符串：

```
prop1=value1 -Pprop2=value2 -Pprop3=value3 -P 
```

1.  我没有得到`-P`第一个属性（与文件末尾的换行符无关）。这很容易通过 Ant 解决，只需将`-P`字符串与结果字符串连接即可
2.  我需要克服的一个问题是最后的**-P**。有人有解决此问题的建议吗？

此外，一个很好的补充是忽略属性注释 - 以开头的行，`#`但如果它使事情变得过于复杂，那就不重要了。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:07:55.963

以下内容对您有用吗？

```
<filterchain>
  <replaceregex pattern="^[#].*" replace="" />
  <ignoreblank />
  <prefixlines prefix=" -P" />
  <striplinebreaks />
</filterchain> 
```

# javascript - 确定画布的原点（javascript）

> ID：15945230
> 
> 赞同：0
> 
> 时间：2013-04-11T09:27:46.800
> 
> 标签：javascript, html, canvas, html5-canvas

我需要弄清楚如何知道画布的原点是在顶部/左侧还是中心/中心或其他位置。也许是一种获取原点坐标的方法（即使我知道中心/中心的原点坐标也是 0、0）。

我有几个画布，我使用 toDataUrl 函数将其转换为图像。在转换之前，我需要为这些画布设置背景颜色。所以要这样做：

```
var curContext = curCanvas.getContext('2d');
curContext.globalCompositeOperation = "destination-over";
curContext.fillStyle = '#FFFFFF'; // or random color
curContext.fillRect(0, 0, curCanvas.width, curCanvas.height);
var image = curCanvas.toDataURL('image/jpeg', 1)); 
```

这些代码适用于在顶部/左侧有一个原点的画布，但是一些画布（由像超树这样的 puglin 生成）在中心/中心有一个原点，所以我的 fillRect 必须是这样的：

```
curContext.fillRect(-curCanvas.width/2, -curCanvas.height/2, curCanvas.width, curCanvas.height); 
```

所以，我需要知道画布的原点是什么，才能知道如何使用`fillRect`函数（x 和 y 参数）。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:17:11.917

仅当其他代码在其上使用了变换矩阵时，原点才会放错位置。

您可以通过保存上下文的当前状态、设置新矩阵然后恢复原始状态来覆盖该转换矩阵：

```
ctx.save();
ctx.setTransform(1, 0, 0, 1, 0, 0);   // identity
// do your drawing
ctx.restore(); 
```

较新版本的 Canvas API 具有`ctx.resetTransform()`并且还允许您查询当前的转换矩阵，但尚未得到广泛支持。

# http - 在 ZF2 控制器中获取请求授权标头

> ID：15945231
> 
> 赞同：3
> 
> 时间：2013-04-11T09:27:48.620
> 
> 标签：http, zend-framework, curl, zend-framework2

我正在使用 ZF2，出于某种原因，我可以获取我发送的所有标头，除了 Authorization 标头 - 就像它被过滤掉了一样。

我正在尝试像这样获取控制器中的所有标题：

```
 public function createAction($data) 
    {
        $request  = $this->request;
        print_r ($request->getHeaders());
        exit();

    } 
```

我通过 cURL 发送请求，如下所示：

```
curl -i -H "Accept: test" -H "Authorization: 123456" -H "Content-Type: qwerty" -X POST http://localhost/test 
```

所有标题都打印出除了授权标题。我可以添加任意标题并将其打印出来 - 只是没有“授权”标题......

我也尝试 get()/has() 作为授权标头，但它不存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T09:51:42.613

适合我（ZF2 版本 2.1.4）：

`curl -i -H "Accept: test" -H "Authorization: 123456" -X POST http://zf2.localhost`

结果是：

```
HTTP/1.1 200 OK
Date: Thu, 11 Apr 2013 09:44:45 GMT
Server: Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7
X-Powered-By: PHP/5.4.7
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-ch
Pragma: no-cache
Content-Length: 843
Content-Type: text/html

object(Zend\Http\Headers)#168 (3) {
  ["pluginClassLoader":protected]=>
  NULL
  ["headersKeys":protected]=>
  array(4) {
    [0]=>
    string(9) "useragent"
    [1]=>
    string(4) "host"
    [2]=>
    string(6) "accept"
    [3]=>
    string(13) "authorization"
  }
  ["headers":protected]=>
  array(4) {
    [0]=>
    array(2) {
      ["name"]=>
      string(10) "User-Agent"
      ["line"]=>
      string(23) "User-Agent: curl/7.26.0"
    }
    [1]=>
    array(2) {
      ["name"]=>
      string(4) "Host"
      ["line"]=>
      string(24) "Host: zf2.localhost"
    }
    [2]=>
    array(2) {
      ["name"]=>
      string(6) "Accept"
      ["line"]=>
      string(12) "Accept: test"
    }
    [3]=>
    array(2) {
      ["name"]=>
      string(13) "Authorization"
      ["line"]=>
      string(21) "Authorization: 123456"
    }
  }
} 
```

使用以下代码：

```
$request  = $this->getRequest();
var_dump($request->getHeaders()); 
```

使用以下方法获取值：

```
$authVal = $request->getHeaders('authorization')->getFieldValue(); 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T11:03:05.307

我终于在这里找到了答案：

[http://zend-framework-community.634137.n4.nabble.com/HTTP-Digest-authentication-does-not-work-with-PHP-as-CGi-td4658790.html](http://zend-framework-community.634137.n4.nabble.com/HTTP-Digest-authentication-does-not-work-with-PHP-as-CGi-td4658790.html)

必须将以下内容添加到项目 .htaccess 中：

```
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-28T17:28:07.350

希望这会对你在 zf2 中有所帮助

```
 $headers = $request->getHeaders();
  $authorization = $headers->get('Authorization')->getFieldValue(); 
```

$request 是`Zend\Http\Request`;的对象

# android - 新波士顿教程中哪个版本的 OpenGL ES？

> ID：15945232
> 
> 赞同：0
> 
> 时间：2013-04-11T09:27:51.097
> 
> 标签：android, opengl-es

我现在要开始学习使用 OpenGL ES for Android，YouTube 上有一些来自 The New Boston 的教程，但我不确定他使用的是版本 1 还是版本 2 的 OpenGL ES？我想现在了解第 1 版不是个好主意！？如何查看使用的版本？

他正在使用一个名为的方法`onSurfaceCreated`，参数的类型是 GL10。这是否意味着他正在使用版本 1 的 Open GL ES？

在我继续之前，请先帮助澄清这一点！我也很欣赏 openGL ES for Android 的优秀教程的提示！谢谢！:)

链接到其中一个教程：[http ://www.youtube.com/watch?v=A_asBr_txZU](http://www.youtube.com/watch?v=A_asBr_txZU)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:52:55.397

看完教程 N.174，我可以说这些教程系列肯定是针对 OpenGLES 1 的：如果没有 Vertex 和 Fragment 着色器，就没有 OpenGLES 2，除了在 Android 中，OpenGLES 2 方法总是以 GLES20 开头。我推荐[谷歌教程](http://developer.android.com/training/graphics/opengl/index.html)从 OpenGLES 2 for Android 开始，这[本书](http://opengles-book.com/)真是太棒了。

# c++ - pointIndex 无法从 C++ 中的向量中检索项目

> ID：15945236
> 
> 赞同：1
> 
> 时间：2013-04-11T09:28:00.760
> 
> 标签：c++, visual-studio-2010, vector

在 Visual Studio '12 中出现以下编译错误

```
error C3867: 'std::vector<_Ty>::at': function call missing argument list; use '&std::vector<_Ty>::at' to create a pointer to member line 39 
```

**代码**

```
Vector2dVector mVertices;

/// other code

for (int pointIndex = 0; pointIndex < points.size(); pointIndex++) {
    mVertices.push_back(Vector2d(pointIndex * 2.0f, pointIndex * 3.0f ));
}

int size = mVertices.size();
CCPoint *pointArr = new CCPoint[size];
for(int i = 0; i < size; i++) {
    Vector2d vec2 = mVertices.at[i];  //Line 39 
    //pointArr[i].x = vec2->GetX();
    //pointArr[i].y = vec2->GetY();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:29:59.667

```
Vector2d vec2 = mVertices.at(i);
                         // ^ ^ 
```

你需要括号，而不是括号。`at`是成员函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T09:41:48.493

问题是你在这里有一个错字：

```
Vector2d vec2 = mVertices.at[i];  //Line 39 
                            ^ ^ 
```

您应该使用`()`with`std::vector::at`方法调用，而不是`[]`：

```
Vector2d vec2 = mVertices.at(i);  //Line 39 
```

另一种方法是使用`std::vector::operator[]`重载（而不是`at()`）：

```
Vector2d vec2 = mVertices[i]; 
```

不同之处在于`std::vector::at()`对向量索引进行**边界检查**`std::out_of_range`，如果索引超出范围（防止缓冲区溢出）则抛出异常。

相反，如果您使用`std::vector::operator[]`，则禁用边界检查。

换句话说，使用`std::vector::operator[]`你有*更快*的代码，但你没有对向量索引进行运行时检查（所以你必须注意你的索引，以避免危险的缓冲区溢出）。

（更准确地说，在 Visual Studio 中，如果[`_SECURE_SCL`](http://msdn.microsoft.com/en-us/library/aa985896%28v=vs.100%29.aspx)设置为`1`，则还对 进行边界检查`std::vector::operator[]`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T09:30:09.077

`Vector2dVector::at`最有可能是一个函数而不是数组类型的字段：

```
 Vector2d vec2 = mVertices.at(i);  //Line 39 
```

# linq - LinQ to Entity: Lambda 在哪里

> ID：15945239
> 
> 赞同：1
> 
> 时间：2013-04-11T09:28:06.180
> 
> 标签：linq, lambda, entity

我遇到了一个奇怪的情况。当我尝试使用 lambda 搜索项目时，

```
searchGuid = new Guid(condition[0]);
searchItem = searchItem.Where(x => x.SiteId == searchGuid);
searchGuid = new Guid(condition[1]);
searchItem = searchItem.Where(x => x.FunctionTypeId == searchGuid); 
```

它什么也不返回。但是当我改为

```
searchGuid = new Guid(condition[0]);
searchGuid2 = new Guid(condition[1]);
searchItem = searchItem.Where(x => x.SiteId == searchGuid && 
                                   x.FunctionTypeId == searchGuid2); 
```

它返回我期望的正确项目。

顺便说一句，它适用于 Linq to sql。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:33:50.267

lambda 函数*捕获*变量，因此在`searchGuid`您执行查询时`searchGuid`is `new Guid(condition[1])`，因此您的查询相当于

```
searchItem.Where(x => x.SiteId == new Guid(condition[1]))
          .Where(x => x.FunctionTypeId == new Guid(condition[1])) 
```

这不是你想要的。

您自己找到了解决方案：使用第二个变量（或仅内联它）。

# php - 动态 laravel4 服务提供者路由

> ID：15945241
> 
> 赞同：0
> 
> 时间：2013-04-11T09:28:09.680
> 
> 标签：php, routing, laravel, service-provider

我正在为 Laravel4 准备一个包，但找不到向我的包添加可配置路由的方法。

例子：

```
//this is from the service provider of the bundle
public function register()
{
    ...
    $this->registerRoutes();
    ...
}

protected function registerRoutes()
{
     //The way of doing into the documentation or other bundles is
     //the problem is that I cannot put the routes to be from the config file
     //and they cannot be overwritten from the app configuration.
     include __DIR__ . '/routes.php';
}
//This method gives an error
protected function registerTestRoutes()
{
    $this->app['imager'] = $this->app->share(function($app)
        {
            //$route = 'admin/images/{$image_id}
            $route = $app['config']['imager::config']['delete_url'];
            return \Route::delete($route, array('uses' => 'CompanyName\Imager\Controllers\ImagerController@destroy'));;
        });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:23:18.353

好吧，我找到了问题的解决方案。

您不必为此创建配置，该配置应该是捆绑的路由。给它一个名字就足够了，所以当你的包在多个项目中使用并且其中一些需要更改 url 时，那里的开发人员可以简单地放置一个别名。

```
// code from the SerivicePriveder
public function register()
{
...
$this->registerRoutes();
...
}

protected function registerRoutes()
{
 include __DIR__ . '/routes.php';
}

//code from the routes.php
<?php
Route::delete('admin/imager/{id}', array('as'=>'imager_delete', 'uses' => 'SixMinutes\Imager\Controllers\ImagerController@destroy')); 
```

因此，如果需要更改“admin/imager/{id}”，您可以使用名称“imager_delete”将别名添加到 app/routes.php

# html - Symbian^3 上的会话存储与 jQuery Mobile 和 PhoneGap Build

> ID：15945248
> 
> 赞同：0
> 
> 时间：2013-04-11T09:28:28.383
> 
> 标签：html, jquery-mobile, session-variables, symbian, phonegap-build

我正在使用 jQuery Mobile、HTML5 和 PhoneGap Build 创建一个跨平台应用程序的项目。我们的目标平台包括 Symbian^3。

我需要能够跟踪一些会话数据，例如用户 ID 以及他们是否已登录。Symbian 在这方面很痛苦，因为我尝试过的解决方案似乎都不起作用。

我试过了：

*   HTML5 sessionStorage 和 localStorage。这两者都会导致 Symbian 上的应用程序在调用时立即冻结。
*   饼干。这些总是返回未定义，即使您在设置它们后立即访问它们。
*   全局变量。我创建了一个 .js，其中定义了一些 var 以供在整个应用程序中使用。该脚本包含在每个可能需要它的 HTML 文件的头部。不幸的是，这不起作用，因为当您在页面之间切换时会重新定义变量，从而丢失会话数据。

我已经达到了通过网络搜索和实验所能完成的极限，所以我在这里提出了我的第一个问题。我很乐意上传一些代码示例，尽管实际上没有太多可展示的。

至于实际问题：如何在 Symbian 上的 jQuery Mobile 应用程序中创建会话上下文，使其在页面转换中持续存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:17:14.493

您需要了解 JQM 是如何工作的。当您从页面 A 开始并转到页面 B 时，您并没有真正离开页面 A。而是 JQM AJAX 请求页面 B，剥离外部的所有内容`<div data-role="page"></div>`并将其附加到 DOM。

这意味着您的 DOM 将始终保持“活跃”，无论您在应用程序中的哪个位置（除非您设置`data-ajax="false"`链接）。

因此，您的选项 3 - 全局变量 - 应该可以工作，因为该`a.js`文件只会在页面 A 上加载（并在页面 B、C、D 上被剥离......）。如果变量被覆盖，那是因为你可能覆盖了它们——你需要显示里面的内容`a.js`。

另一种选择是将应该直接保存到 DOM 的信息附加到 DOM 中，或者使用`data()`（[api](http://api.jquery.com/data/)），例如：

```
 $('html').data("foo": bar) 
```

或者如果信息不多，只需使用数据属性

```
 $('html').jqmData("some","thing"); 
```

# winforms - 获取 ToolTip 名称

> ID：15945253
> 
> 赞同：1
> 
> 时间：2013-04-11T09:28:34.130
> 
> 标签：winforms, tooltip

我一定很傻，但是

```
 ToolTip tooltip = new ToolTip();
    // tooltip.Name << not exists, lol 
```

我需要它来做这样的事情：

```
public partial class MyForm : Form
{
    private void InitializeComponent()
    {
        ...
        this.toolTip1 = new System.Windows.Forms.ToolTip(this.components);
        this.toolTip2 = new System.Windows.Forms.ToolTip(this.components);
        ...
    }

    private void SomeMethodOfForm()
    {
        SomeMethodOfClassA(components);
    }
}

public class A
{
    public static SomeMethodOfClassA(IContainer container)
    {
        foreach (Component component in container.Components)
            if (component is ToolTip)
                MessageBox.Show("Found ToolTip"); // want to show here "toolTip1" or "toolTip2"
    }
} 
```

我该怎么办？设计师`ToolTip.Name`以某种方式展示。如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T06:51:25.657

使用`Tag`或任何其他自定义属性似乎是实现此目的的唯一解决方案。

# socketasynceventargs - 为什么 e.AcceptSocket.ReceiveAsync 总是正确的

> ID：15945261
> 
> 赞同：0
> 
> 时间：2013-04-11T09:29:01.807
> 
> 标签：socketasynceventargs

我使用 SocketAsyncEventArgs 构建了一个小型 Socket 服务器端。但是遇到一些问题，当我接受客户端套接字时，我尝试使用 e.AcceptSocket.ReceiveAsync 接收客户端信息，但我不知道为什么它总是对我显示 True。这是服务器端：

```
 private void ProcessAccept(SocketAsyncEventArgs e)
    {
        Console.WriteLine("Process Accept!");
        if (e.BytesTransferred > 0)
        {
            Console.WriteLine("client online...");
        }

        SocketAsyncEventArgs readEventArgs = new SocketAsyncEventArgs();
        readEventArgs.AcceptSocket = e.AcceptSocket;
        readEventArgs.SetBuffer(new byte[1024], 0, 1024);
        readEventArgs.Completed+=readEventArgsIO_Completed;

        Boolean willRaiseEvent = e.AcceptSocket.ReceiveAsync(readEventArgs);
        if (!willRaiseEvent)
        {
            this.ProcessReceive(readEventArgs);
        }

          this.StartAccept(e);
    } 
```

我的客户端仅使用 Connect 方法连接服务器端并向其发送信息“Hello Server”。但为什么我在这里总是得到“真”？

```
Boolean willRaiseEvent = e.AcceptSocket.ReceiveAsync(readEventArgs); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:39:08.890

已经解决了这个问题。因为缓冲区大小设置的太大。“Hello World”仅包含 12 个字符。所以我应该将缓冲区大小设置为 12\. readEventArgs.SetBuffer(new byte[12], 0, 12);

# java - Heroku Play 框架 2 sbt 依赖缓存

> ID：15945263
> 
> 赞同：0
> 
> 时间：2013-04-11T09:29:10.143
> 
> 标签：java, heroku, dependencies, playframework-2.0, sbt

我设法添加了一些似乎与我使用的其他库冲突的依赖项（通过 play 框架中的 sbt 依赖项管理器）。但是，当我从 sbt 依赖管理器中删除它们并运行 play clean compile 时。

似乎依赖项缓存中仍然存在某些内容。

我不完全确定哪个库把事情搞砸了，所以我尝试清空存储库文件夹（在所有依赖项都与 sbt 一起放置的播放核心文件夹内）

然后我再次运行 play clean compile。现在一切正常。

我想在 heroku 的生产环境中做同样的事情。

我想我可以按照这个线程中的建议尝试

[如何清理 Heroku 依赖缓存（非托管 maven 依赖）

要使用此构建[https://github.com/heroku/heroku-buildpack-java.git#cache_clear](https://github.com/heroku/heroku-buildpack-java.git#cache_clear)

但是有谁知道它是否完全重建了依赖关系并删除了旧的依赖关系？由于我不知道 buildpack 的作用，你认为它会安全吗？它会以某种方式破坏我的应用程序吗？

感谢任何帮助。

氪，

杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:21:07.237

清理构建缓存是安全的。它将清除所有依赖项并进行全新构建。听起来这会解决你的问题。如果由于某种原因缓存清除失败，它不会发布到您的应用程序，因此您正在运行的应用程序没有风险。

然而，由于这是一个 Play 2 应用程序，它使用 Scala buildpack（是的，即使您的应用程序是 Java。Play 2 是用 Scala 编写的。我知道这很令人困惑）。该构建包有一个缓存清除分支：[https ://github.com/heroku/heroku-buildpack-scala.git#cleancache](https://github.com/heroku/heroku-buildpack-scala.git#cleancache)

如果您遇到其他问题并想了解有关基于 Heroku 构建的 Java 和 Scala 的更多信息，那么这篇文章是一个很好的开始：[https ://devcenter.heroku.com/articles/debugging-java-scala-builds](https://devcenter.heroku.com/articles/debugging-java-scala-builds)

# c# - C# 延迟写入 XML

> ID：15945264
> 
> 赞同：2
> 
> 时间：2013-04-11T09:29:17.097
> 
> 标签：c#, .net, xml, multithreading, filesystemwatcher

我正在使用 Filesystemwatcher 获取文件，将其转换为 UTF-8 并将其传输到目的地。现在我想要实现的是我需要延迟将 xml 写入目标。即仅 15-20 秒。我知道我可以在这里使用以下内容：

```
System.Threading.Thread.Sleep(milliseconds); 
```

但是如果我这样做，它会完全延迟线程，不是吗。filesystemwatcher 会发生什么，它会停止拾取文件吗？我的目标是延迟但不要错过任何将在源文件夹中更改的文件。这是我目前的做法：

```
var doc = new XmlDocument();
doc.Load(FileName);
XmlWriterSettings settings = new XmlWriterSettings { Encoding = Encoding.UTF8, Indent = true };
using (var writer = XmlWriter.Create(destinationFile, settings))
{
    System.Threading.Thread.Sleep(15000);
    doc.Save(writer);
} 
```

这将停止线程并延迟写入我想要的 xml 文件。但是文件系统观察者会发生什么，它也会停止 - 因为它是同一线程的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:39:00.027

您可以使用[System.Threading.Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer%28v=vs.90%29.aspx)类

```
var doc = new XmlDocument();
doc.Load(FileName);
XmlWriterSettings settings = new XmlWriterSettings { Encoding = Encoding.UTF8, Indent = true };

new System.Threading.Timer((_) =>
    {
        using (var writer = XmlWriter.Create(destinationFile, settings))
        {
            doc.Save(writer);
        }
    })
.Change(15000, -1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:39:19.000

为您想要延迟的内容创建一个线程，为您不想延迟的内容创建一个单独的线程

编辑试试这个

```
System.Threading.Thread newThread;
newThread = new System.Threading.Thread(anObject.AMethod); // one to delay

System.Threading.Thread newThread2;
newThread2 = new System.Threading.Thread(anObject.AMethod); //one not to delay 
```

然后将 添加`Threadname.Start();`到您要延迟的程序的开头，并将另一个添加到您不想延迟的程序的开头。然后延迟你想延迟使用的那个

```
System.Threading.Thread.Sleep(milliseconds); 
```

就像你以前一样

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:15:31.120

使用 BlockingCollection 怎么样？
它在 4.0 上可用。
Filesystemwatcher 是生产者，消费者是 xmlwrite。
你可以睡在消费者身上而不影响生产者。

[BlockingCollection 类](http://msdn.microsoft.com/en-us/library/dd267312%28v=vs.100%29.aspx)

# jquery - 如何使用 jQuery 触发 select onchange 事件？

> ID：15945267
> 
> 赞同：9
> 
> 时间：2013-04-11T09:29:31.137
> 
> 标签：jquery, html

我有一个下拉列表：

```
<select size="1" name="filter"id="priority_filter" onchange="filter_user_trainings();">
   <option value="all">All</option>
   <option value="optional">Optional</option>
   <option value="mandatory">Mandatory</option>
   <option value="essential">Essential</option>
   <option value="custom">Custom</option>
</select> 
```

在`function`我称之为：

```
if(db==0 || db==1 ||db==2)
{
   $("#priority_filter").val('custom');
} 
```

我想`select` `onchange`在 jQuery 切换值时触发该函数。我怎样才能做到这一点？上面的代码不起作用。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-11T09:30:15.280

您可以`change()`先致电`select`或`.trigger("change");`

```
if(db==0 || db==1 ||db==2)
{
   $("#priority_filter").val('custom');    
   $("#priority_filter").change();    
} 
```

或者

```
if(db==0 || db==1 ||db==2)
{
   $("#priority_filter").val('custom').change();      
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T09:38:00.320

```
$(document).ready(function(){

 ..code..
$('#priority_filter').on('change', function(){
     ..do your stuff..
 } 
..code..

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:36:26.633

试试这个：加载时

```
 $("#priority_filter").change(function(){
    var val = $("#priority_filter").val();
    //alert(val);
    //your code
}); 
```

在这里演示：http: [//jsfiddle.net/j8DPN/](http://jsfiddle.net/j8DPN/)

# jquery - 按钮标签 onclick 不起作用

> ID：15945270
> 
> 赞同：1
> 
> 时间：2013-04-11T09:29:34.800
> 
> 标签：jquery

我尝试在页面中注入一个按钮，我想让它可以点击，但它似乎根本不起作用。

```
$(".something").append('<button style="background-image: \
-webkit-gradient(linear, left bottom, left top, color-stop(0.3, rgb(255,170,0)),\
color-stop(0.85, rgb(222,133,0)) ); height: 28px; padding-top: 5px; \
padding-bottom: 5px; padding-left: 10px; padding-right: 10px; \
border-top-left-radius: 4px; border-top-right-radius: 4px; \
border-bottom-left-radius: 4px; border-bottom-right-radius: 4px;" \
type="button" onclick="alert("lelele");"><span style="color: #fff;">\
Button</span></button>'); 
```

我在网上搜索并尝试了最简单的解决方案：警报功能，即使这样也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:31:20.583

问题在于逃跑....

```
onclick="alert(\'lelele\');" 
```

但我更喜欢在委托事件上使用

```
 $(function(){
  $('.something').on('click','button',function(){
     alert('lelele');
  })
 }); 
```

这不需要难以阅读和调试的内联 onclick javascript 事件......

`onclick="alert("lelele");"`从按钮中删除

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:32:59.380

您的报价不匹配，请尝试转义内部报价。

```
onclick="alert(\'lelele\');" 
```

也就是说，onclick 是旧的做事方式，您将获得更简洁的代码，避免使用内联 JavaScript（如 bipen 建议的那样）。

```
$(".something")
    .append('<button class="myClass">Button</button>') // no CSS or inline JavaScript
    .on("click", "button", function() { // delegation syntax
        alert("lalala");
    }); 
```

[在此处阅读有关事件委托语法的更多信息](http://api.jquery.com/on/#direct-and-delegated-events)

还将您的样式移动到 css 文件中！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:31:25.287

在 onclick 参数中使用简单的引号。您必须转义它们，因为您在附加函数中使用它们作为分隔符。

```
onclick="alert(\'lelele\');" 
```

# hibernate - 无法让@OneToMany 与休眠一起使用

> ID：15945274
> 
> 赞同：4
> 
> 时间：2013-04-11T09:29:39.893
> 
> 标签：hibernate, one-to-many, many-to-one

我是休眠新手，但对 Java 或数据库不熟悉。我尝试建立@OneToMany 关系，但不知何故我可以让它发挥作用。我现在尝试了两天，我用谷歌搜索了很多，但我仍然得到例外。
为了了解hibernate，我尝试创建一个小服务器，它将消息来回发送给客户端。这很好用——使用hibernate从数据库读取也很好。现在我的想法是，当用户进入系统时，会创建一个 sessionid 并将其与时间戳一起存储在数据库中……然后问题就开始了。
我会发布我的代码，所以你会明白的。

```
@Entity
@NamedQuery(name="CustomerLogin.getPassByEmail", query="from CustomerLogin where email = ?")
@Table(name="customer_login")
public class CustomerLogin {

@Id @GeneratedValue(strategy = GenerationType.AUTO)
private BigInteger id;
private String email;
private String pass;
@OneToMany
//@JoinTable(name="customerlogin_sessions", joinColumns=@JoinColumn(name="user_id"))
private Collection<CustomerSession> sessions = new ArrayList<>(); 
```

我不会发布 getter 和 setter。我想你会很感激的；）你看我删除了@JoinTable——因为它不起作用。...现在是 CustomerSession 类：

```
@Entity 
```

@Table (name="customer_session") 公共类 CustomerSession {

```
@Id @GeneratedValue(strategy= GenerationType.AUTO)
private BigInteger id;
@ManyToOne 
private CustomerLogin customerLogin;
private BigInteger userid;
private int sessionid;
@Temporal(TemporalType.TIMESTAMP)
private Date logintime; 
```

魔术应该在这里发生：

```
 Session session = sessionFactory.openSession();
    session.beginTransaction();

    Query query = session.getNamedQuery("CustomerLogin.getPassByEmail");
    query.setString(0, commands.get("email"));
    List<CustomerLogin> passes = (List<CustomerLogin>)query.list();

    if(evaluateLoginData(passes)){ //consider it true
        CustomerLogin customer = passes.get(0);
        int sessionId = createSessionId();

        CustomerSession customerSession = new CustomerSession();
        customerSession.setLogintime(new Date());
        customerSession.setCustomerLogin(customer);
        customerSession.setSessionid(sessionId);

        customer.getSessions().add(customerSession);

        session.save(customerSession);
        session.save(customer);

        returnMessage =  "LOGINACC id:"+customer.getId() + ";session:"+Integer.toString(sessionId);
    }else{
        returnMessage = "LOGINDENIED message:LOGINDENIED";
    }

    session.getTransaction().commit();
    session.close(); 
```

我还将发布 hibernate.cfg.xml - 也许有问题。

```
<hibernate-configuration>
<session-factory>
<property name="hibernate.dialect"> org.hibernate.dialect.MySQLDialect </property>
<property name="hibernate.connection.driver_class"> com.mysql.jdbc.Driver </property>
<property name="hibernate.connection.url"> jdbc:mysql://localhost/server </property>

<property name="hibernate.connection.username">root</property>
<property name="hibernate.connection.password"></property>

<property name="show_sql">true</property>
<property name="hibernate.connection.pool_size">5 </property>
<property name="hdm2ddl.auto">update</property>

<mapping class="balancer.dbpojos.CustomerLogin"/> 
<mapping class="balancer.dbpojos.CustomerSession"/> 
```

据我了解，当我只使用@OneToMany 和@ManyToOne 时，休眠应该使用该关系创建一个新表。然而它说，找不到表 customerlogin_customersession - 即使我将 hdm2ddl.auto 更改为创建。我尝试了 myppedBy 属性和 targetEntity，与 @JoinTableJ、JoinColumns 和 @InverseJoinColumns 相同 - 仍然没有效果。

我只是想让它工作——不管桌子最终看起来如何。但是，如果那里有一个休眠大师 - 我希望在 customerSssion 中有一个外键，指向 customerLogin 作为外键关系。但是，就像我说的那样，我现在已经在这个问题上摆弄了将近 2 天——如果它真的有效，我会很高兴的。提前感谢您的努力和时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:44:23.937

注意：我远非专家，看来您的映射对我来说有些倒退。

您根本不应该在 @OneToMany 一侧使用 @JoinColumn。

像这样的东西应该更接近：

```
@OneToMany(mappedBy="id")
private Collection<CustomerSession> sessions = new ArrayList<>();

@JoinColumn(name = "ID", referencedColumnName = "ID")
@ManyToOne 
private CustomerLogin customerLogin; 
```

进一步阅读： [有人可以在hibernate中解释mappedBy吗？](https://stackoverflow.com/questions/9108224/can-someone-please-explain-mappedby-in-hibernate)

# javascript - JSF 门户与 ChemWriter 和 ChemVector 的集成

> ID：15945275
> 
> 赞同：1
> 
> 时间：2013-04-11T09:29:42.580
> 
> 标签：javascript, jsf-2

我想知道是否有人用过`ChemWriter`化学`Chemvector`结构编辑软件？

我对这个软件有疑问。

我正在从事一个涉及**JSF portlet**与 ChemWriter 和 ChemVector 集成的项目。

我的问题是如何将 Chemvector 中的化学**结构（molfile）**带入 ChemWriter 以编辑该特定结构（molfile）？

提前致谢。

# android - 处理自定义 listView 中的导航按钮

> ID：15945277
> 
> 赞同：0
> 
> 时间：2013-04-11T09:29:46.863
> 
> 标签：android, android-layout, android-listview, android-tabhost, android-event

我有一个选项卡式应用程序。每个选项卡都有一个自定义列表视图。我无法在自定义列表视图中跟踪导航按钮。我尝试了以下

```
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    Log.i(TAG_NAME, "key event: " + keyCode);
    if(keyCode == KeyEvent.KEYCODE_DPAD_DOWN) {
        Log.i(TAG_NAME, "Directional DOWN pad pressed");
    }
} 
```

例如，假设我按下 DPAD_DOWN 键来选择自定义列表视图中的一项。但是，列表项未突出显示。所以不知道选了哪一个。

如果屏幕是 ListActivity，则上述操作效果很好。你有什么想法吗？

如果您发现任何令人困惑的事情，请告诉我。

# javascript - 如何使用 jQuery 或纯 JavaScript 从 URL（REST API）获取 JSON 数据到 UI？

> ID：15945278
> 
> 赞同：13
> 
> 时间：2013-04-11T09:29:49.403
> 
> 标签：javascript, rest, jquery

我有一个 URL“ `http://localhost:8888/api/rest/abc`”，它将提供以下 json 数据。我想使用 Jquery 或 java 脚本在我的 UI 中获取这些数据。我从几个小时开始尝试这个，但我无法解决它。请给我一些解决方案，这将有助于我解决这个问题。

```
{
  "My-user": [
    {
      "link": [
        {
          "href": "http://localhost:8888/api/rest/abc/MI/CH",
          "rel": "self",
          "type": "application/my.My.My-user+xml",
          "title": "rln"
        },
        {
          "href": "http://localhost:8888/api/rest/cabin?MI=mi&CH=ch",
          "rel": "some relation",
          "type": "application/my.My.My-cabin+xml",
          "title": "rln1"
        }
      ],
      "My-user-list": [
        {
          "name": "cuba",
          "Explanation": "bark"
        }
      ],
      "CH": "ch",
      "MI": "mi",
      "password": "xyz",
    },
    {
      "link": [
        {
          "href": "http://localhost:8888/api/rest/abc/DD/KN",
          "rel": "self",
          "type": "application/my.My.My-user+xml",
          "title": "rln"
        },
        {
          "href": "http://localhost:8888/api/rest/cabin?DD=dd&KN=kn",
          "rel": "some relation",
          "type": "application/my.My.My-cabin+xml",
          "title": "rln1"
        }
      ],
      "My-user-list": [
        {
          "name": "Cuba1",
          "Explanation": "bark1"
        }
      ],
      "KN": "kn",
      "DD": "dd",
      "password": "xyz1",
    }
  ]
} 
```

* * *

我已经尝试过 Getjson 这对我来说不起作用这是我的代码如果代码错误请纠正我。

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>

<script>
$.getJSON('/api/rest/abc', function(data) {
    console.log(data);
});
</script>
</head>

<body>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-11T09:38:28.357

像这样在你的 js 中向你的服务器发送一个 ajax 请求，并在成功函数中获得你的结果。

```
jQuery.ajax({
            url: "/rest/abc",
            type: "GET",

            contentType: 'application/json; charset=utf-8',
            success: function(resultData) {
                //here is your json.
                  // process it

            },
            error : function(jqXHR, textStatus, errorThrown) {
            },

            timeout: 120000,
        }); 
```

在服务器端以 json 类型发送响应。

您可以将[jQuery.getJSON](http://api.jquery.com/jQuery.getJSON/)用于您的应用程序。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-04-07T13:20:14.910

您可以使用本机 JS，因此您不必依赖外部库。

（我将使用一些 ES2015 语法，又名 ES6，现代 javascript） [什么是 ES2015？](https://babeljs.io/learn-es2015/)

```
fetch('/api/rest/abc')
    .then(response => response.json())
    .then(data => {
        // Do what you want with your data
    }); 
```

如果有任何错误，您还可以捕获错误：

```
fetch('/api/rest/abc')
    .then(response => response.json())
    .then(data => {
        // Do what you want with your data
    })
    .catch(err => {
        console.error('An error ocurred', err);
    }); 
```

默认情况下，它使用`GET`并且您不必指定标头，但是您可以根据需要执行所有操作。如需进一步参考：[Fetch API 参考](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#Response_objects)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-11T09:38:05.617

您可以使用我们的 jquery 函数[getJson](http://api.jquery.com/jQuery.getJSON/)：

```
$(function(){
    $.getJSON('/api/rest/abc', function(data) {
        console.log(data);
    });
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-12-14T09:20:38.880

```
 jquery.ajax({
            url: `//your api url`
            type: "GET",
            dataType: "json",
            success: function(data) {
                jQuery.each(data, function(index, value) {
                        console.log(data);
                        `All you API data is here`
                    }
                }
            }); 
```

# asp.net - ASP.NET - Visual Studio：用资源文件中的文本填充段落

> ID：15945279
> 
> 赞同：1
> 
> 时间：2013-04-11T09:29:50.063
> 
> 标签：asp.net, visual-studio-2010, multilingual

我们正在尝试在 asp.net (visual studio 2010) 中创建一个多语言网站。我为所有字符串生成了一个资源文件，并且我已经将它们翻译成不同的语言。我的 html 文件由各种 asp.net 服务器控件和一些带有文本段落的 div 组成。当您生成资源文件时，仅显示来自 asp.net 服务器控件的字符串。但是我现在知道我必须将段落文本放在哪里（在 3 个资源 .txt 文件中，每种语言都保留在 html 中？）以及如何在浏览器语言更改或用户选择时使段落更改语言一种特定的语言。我似乎只能找到如何处理字符串，但显然我已经这样做了，但我找不到任何关于如何处理带有文本的段落的信息。有人可以帮助我吗？

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeBehind="Contact.aspx.cs" Inherits="Main.WebForm1" culture="auto:nl-NL" uiculture="auto:nl-NL" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">

</asp:Content>

<asp:Content ID="Content5" ContentPlaceHolderID="ContentHolder" runat="server">
    <h2><a href="#adresAnker" class="linkNotUnderlined">Adres</a></h2>
    <h2><a href="#routeAnker" class="linkNotUnderlined">Routebeschrijving</a></h2>
    <h2><a href="#contactFormAnker" class="linkNotUnderlined">Contactformulier</a></h2>

    <h1>Contact</h1>
    <h3><a name="adresAnker">Adres</a></h3>
    <p>
    1st paragraph with large text
    </p>
    <h3><a name="routeAnker">Routebeschrijving</a></h3>

    <h5>Komende van Hasselt</h5>
        <p>
        2st paragraph with large text
        </p>

    <h5>Komende van Antwerpen, Brussel, Heerlen</h5>
        <p>
        3st paragraph with large text <br />
        </p>

    <h5>Komende van Nederland</h5>
        <p>
       4st paragraph with large text
        </p>

    <h3><a name="contactFormAnker">Contactformulier</a></h3>

    <form id="form1" runat="server">
    <table>content is already translated</table>

            <br />
            <p>U wenst meer informatie over de volgende producten: </p>
            <div id="checkbox">
                  <asp:CheckBoxList 
                       content is already translated
                    </asp:CheckBoxList>
            </div>

            <br />
            <p>Bijkomende vragen:</p>
            <textarea cols="10"rows="10"></textarea>
            <p>gelieve alle velden met * in te vullen</p>
            <asp:Button ID="submitButton" runat="server" Text="verzenden" 
        meta:resourcekey="submitButtonResource1" />

    </form>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T13:20:57.930

forums.asp.net/t/1425258.aspx/1 帮助我解决了它，我第一次发现 sthg 有用.. 由于这篇文章，我能够翻译整段文本:) – Iris Van de Zandschulp 4 月 11 日 15 日:45

# javascript - 从数组中获取键值

> ID：15945281
> 
> 赞同：-5
> 
> 时间：2013-04-11T09:29:56.627
> 
> 标签：javascript, jquery, arrays, json

我有这种格式的数组数据，我想获取键和值数组。如何在 javascript 中从此数组中获取键和值。

```
jsonData =  [
    {"dimensions":[5.9,3.9,4.4,3.1,4.8],"icon":0,"curves":  [false,false,false,false,false],"id":"p1","color":"0x000000"},
    {"dimensions":[5.9,3.9,4.4,3.1,4.8],"icon":0,"curves":  [false,false,false,false,false],"id":"p1","color":"0x000000"},
    {"dimensions":[5.9,3.9,4.4,3.1,4.8],"icon":0,"curves":  [false,false,false,false,false],"id":"p1","color":"0x000000"}
]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T04:31:33.117

我已经实施了这个解决方案

```
function getDataArray(name='', index=''){ 
   elements = generateDataArray("profiles");
   arrData = $.parseJSON(elements);  
   data = new Array();
   color = new Array();
   dataid = new Array();
   $.each(arrData,function(key,val){
       $.each(val,function(key2,val2){
     if(key2=="dimensions"){      
       data.push(val2)
      }else if(key2=="color"){
       color.push(val2)
       }

    })
    })

    number =0;
    newArray = new Array();
    while(number<data.length){
    newArray[number] = new Array(data[number],color[number])
    number++;
   }

      return newArray;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:53:14.357

**更新**：添加`eval`。没有注意到它是在一个字符串中。

在我看来，您最大的问题是它全部包装在一个带有单个元素的数组中。你可以做：

```
var element = eval(jsonData)[0]; 
```

可以从`eval`字符串转换为 javascript 对象。然后，要访问任何内容（例如`dimensions`数组），请执行以下操作：

```
var dimensions = element.dimensions; 
```

# android - 如何取消选中或重置单选按钮？

> ID：15945285
> 
> 赞同：33
> 
> 时间：2013-04-11T09:30:08.207
> 
> 标签：android, radio-button

我正在开发一个基于测验的应用程序。当用户打开此应用程序时，将有 1 个问题和 4 个选项（单选按钮）单选按钮将被取消选中，但当用户回答 1 个任务并且当他进行下一个任务时，将选中单选按钮。我想取消选中/重置每个问题的单选按钮。我该怎么做？

```
 answ1=new ArrayList<String>(new ArrayList<String>(answ1));
        btn_practice1.setText(answ1.get(0));
        btn_practice2.setText(answ1.get(1));
        btn_practice3.setText(answ1.get(2));
        btn_practice4.setText(answ1.get(3));
        btn_practicerg.setOnCheckedChangeListener(new OnCheckedChangeListener(){
            @Override
            public void onCheckedChanged(RadioGroup group, int checkedId) {             
                RadioButton radioButton = (RadioButton)group. findViewById(checkedId); //line 262
                String temp = radioButton.getText().toString();
                switch(btn_practicerg.getCheckedRadioButtonId()){
                case R.id.RB1:
                    if (btn_practice1.isChecked()){
                        btn_practice2.setChecked(false);
                        btn_practice3.setChecked(false);
                        btn_practice4.setChecked(false);
                    }
                   break;
                case R.id.RB2:
                    if (btn_practice2.isChecked()){
                        btn_practice1.setChecked(false);
                        btn_practice3.setChecked(false);
                        btn_practice4.setChecked(false);
                    }                    
                    break;
                case R.id.RB3:
                    if (btn_practice3.isChecked()){
                        btn_practice1.setChecked(false);
                        btn_practice2.setChecked(false);
                        btn_practice4.setChecked(false);
                    }
                    break;
                case R.id.RB4:
                    if (btn_practice4.isChecked()){
                        btn_practice1.setChecked(false);
                        btn_practice2.setChecked(false);
                        btn_practice3.setChecked(false);
                    }                   
                    break;
                default:
                    btn_practice1.setChecked(false);
                    btn_practice2.setChecked(false);
                    btn_practice3.setChecked(false);
                    btn_practice4.setChecked(false);
                }  
        ImageView nextBtn = (ImageView) findViewById(R.id.nxt_btn);
    nextBtn.setOnClickListener(new Button.OnClickListener(){
    public void onClick(View v){
         btn_practicerg.clearCheck();  //line 355
              }
             }); 
```

日志猫

```
 E/AndroidRuntime(729):at    
      com.example.TEENEINSTIEN.Question$LoadQuestions$2.onCheckedChanged(Question.java:262)
      E/AndroidRuntime(729):at android.widget.RadioGroup.setCheckedId(RadioGroup.java:172)
      E/AndroidRuntime(729):at android.widget.RadioGroup.check(RadioGroup.java:166)
      E/AndroidRuntime(729):at android.widget.RadioGroup.clearCheck(RadioGroup.java:205)
      E/AndroidRuntime(729):at   
      com.example.TEENEINSTIEN.Question$LoadQuestions$3.onClick(Question.java:355)
      E/AndroidRuntime(729):at android.view.View.performClick(View.java:2485)
      E/AndroidRuntime(729):at android.view.View$PerformClick.run(View.java:9080) 
```

我尝试这样，但我无法取消选中..

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-04-11T09:35:09.020

`RadioGroup`当您需要清除所有按钮时，将所有按钮放在一个then 中`RadioGroup.clearCheck();`

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-11T10:08:13.737

我认为问题在于**btn_practicerg**对象，即如果您每次显示新问题时都创建新的 RadioGroup 对象，那么您必须在新的**btn_practicerg对象上执行****RadioGroup.clearCheck()**而不是我认为您当前正在执行的旧对象。

 **更好的是：

```
 btn_practice1.setText(answ1.get(0));
    btn_practice2.setText(answ1.get(1));
    btn_practice3.setText(answ1.get(2));
    btn_practice4.setText(answ1.get(3));
    btn_practice1.setChecked(false);
    btn_practice2.setChecked(false);
    btn_practice3.setChecked(false);
    btn_practice4.setChecked(false); 
```

取消选中开头的所有按钮。我希望这能解决你的问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-11-04T15:18:10.983

如果 Radiobutton 属于一个单选组，您永远不能以编程方式单独取消选中该按钮，因此您必须先执行一种方法来取消所有选项。

```
 public void unchecked()
     {
     RadioGroup x=findViewById(R.id.NameOfRadiogroup);
     x.clearCheck();
     } 
```

然后你必须调用该方法。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-10-07T09:26:30.477

试试这个，这个解决方案解决了同样的问题：

1.  将 onclick 方法设置为所有 4 个单选按钮`radio1Clicked`，`radio2Clicked`等等
2.  在相应的 onclick 方法中添加以下代码：

    ```
    public void radio1Clicked(View view)
    {
        // Note that I have unchecked  radiobuttons except the one
        // which is clicked/checked by user
        radio2Button.setChecked(false);
        radio3Button.setChecked(false);
        radio4Button.setChecked(false);
    } 
    ```

3.  对剩余的单选按钮做同样的事情。希望这能解决您的问题。

请随时询问有关解决方案的任何问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-03-03T04:15:27.370

我只有一个单选按钮，我真的不想制作单选按钮组。所以基本上我添加了一个单选按钮然后将文本留空，在它旁边添加了checkedTextView（重叠）然后将checkedTextView的onClick函数链接到一个切换函数->

```
public void toggle(View view)
{ 
    if(checkedTextView.isChecked())
    { 
        checkedTextView.setChecked(false); 
        actualRadioBtn.setChecked(false);
    }
    else
    {
        checkedTextView.setChecked(true);
        actualRadioBtn.setChecked(true);
    }
} 
```

然后在您检查是否选择了该单选按钮的功能中，您可以简单地使用

```
if(actualRadioBtn.isChecked()).... 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-06-11T16:21:36.507

将所有人放在一个组中，然后使用：

```
buttonGroup1.clearSelection(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-14T06:20:59.980

下面是单个单选按钮的代码

```
radioButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if (!radioButton.isSelected()) {
                    radioButton.setChecked(true);
                    radioButton.setSelected(true);
                } else {
                    radioButton.setChecked(false);
                    radioButton.setSelected(false);
                }
            }
        }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-18T12:57:19.590

如果您有一个单选按钮，并且您希望在用户单击后取消选中它，请使用一个额外的布尔变量来跟踪单选按钮的选中状态。

```
 boolean check  = false;   // initial state of your radio button
        myRadioButton.setOnClickListener(view -> {
            if (check) {
                myRadioButton.setChecked(false);
                check = false;
                //write code for when button is unchecked
            } else {
                check = true;
                myRadioButton.setChecked(true);
                //write code for when button is checked
            }
        }); 
```**

# html - 使用 CSS 动画进度条

> ID：15945288
> 
> 赞同：4
> 
> 时间：2013-04-11T09:30:12.077
> 
> 标签：html, css, jquery-animate

所以，我在这个页面上有几个不同的进度条 - [http://kaye.at/play/goals](http://kaye.at/play/goals)

这是我的 HTML 和 CSS：

```
<div class="meter"><span style="width: 100%;"></span></div>

.meter { 
height: 5px;
position: relative;
background: #f3efe6;
z-index: 0;
margin-top: -5px;
overflow: hidden;
}

.meter > span {
z-index: 50;
display: block;
height: 100%;
background-color: #e4c465;
position: relative;
overflow: hidden;
} 
```

我想简单地为进度条设置动画，使其从 0% 慢慢上升到它所处的任何百分比，而不是仅仅出现在那里，但我想以最简单的方式来做。我最好的选择是什么，我正在使用的当前代码是否可行？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-11T09:57:30.673

我能想到的唯一方法是动画到你的宽度集内联是添加另一个`span`，所以 HTML 最终为：

```
<div class="meter">
    <span style="width:80%;"><span class="progress"></span></span>
</div> 
```

需要额外的跨度，因为我们无法（仅使用 CSS）检查内联样式想要的宽度以及对其进行动画处理。不幸的是，我们不能为`auto`.

CSS（您需要添加必要的前缀）：

```
.meter { 
    height: 5px;
    position: relative;
    background: #f3efe6;
    overflow: hidden;
}

.meter span {
    display: block;
    height: 100%;
}

.progress {
    background-color: #e4c465;
    animation: progressBar 3s ease-in-out;
    animation-fill-mode:both; 
}

@keyframes progressBar {
  0% { width: 0; }
  100% { width: 100%; }
} 
```

[您可以在这里](http://jsfiddle.net/cherryflavourpez/Bq3Fm/)看到这一点。不支持 CSS 动画的浏览器只会让栏处于最终状态。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-09-30T08:11:12.780

我开发了一个进度条，它现在非常轻巧整洁，并且您也有百分比值，当百分比从 100% 变为 7% 时，我应用了 CSS 过渡，只需单击`Change`按钮即可查看它是如何工作的。从 3s更改`transition: width 3s ease;`为适合您需要更慢或更快过渡的任何内容。

```
function change(){
				var selectedValue = document.querySelector("#progress-value").value;
				document.querySelector(".progress-bar-striped > div").textContent = selectedValue + "%";
				document.querySelector(".progress-bar-striped > div").style.width = selectedValue + "%";
			}
```

```
.progress-bar-striped {
				overflow: hidden;
				height: 20px;
				margin-bottom: 20px;
				background-color: #f5f5f5;
				border-radius: 4px;
				-webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
				-moz-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
				box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
			}
			.progress-bar-striped > div {
				background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
				background-size: 40px 40px;
				float: left;
				width: 0%;
				height: 100%;
				font-size: 12px;
				line-height: 20px;
				color: #ffffff;
				text-align: center;
				-webkit-box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15);
				-moz-box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15);
				box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15);
				-webkit-transition: width 3s ease;
				-moz-transition: width 3s ease;
				-o-transition: width 3s ease;
				transition: width 3s ease;
				animation: progress-bar-stripes 2s linear infinite;
				background-color: #288ade;
			}
			.progress-bar-striped p{
				margin: 0;
			}

			@keyframes progress-bar-stripes {

				0% {
					background-position: 40px 0;
				}
				100% {
					background-position: 0 0;
				}
			}
```

```
<div class="progress-bar-striped">
			<div style="width: 100%;"><b><p>100%</p></b></div>
		</div>
		<div>
			<input id="progress-value" type="number" placeholder="Enter desired percentage" min="0" max="100" value="7" />
			<input type="button" value="Change" onclick="change()"/>
		</div>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-31T17:14:43.927

这是关于纯 CSS 的单个 div 提案

```
#progressBar {
    height: 3px;
    position: fixed;
    opacity: 0.5;
    z-index:2;
    background: #DDDDDD;
    overflow: hidden;
    animation: progressBar 1.5s ease-in-out;
    animation-iteration-count: infinite;
    animation-fill-mode:both;
    bottom:0;
    content:"";
    display:block;
    left:0;
}

@keyframes progressBar {
    0% { left:0;width: 0; }
    50% { left:0;width: 100%; }
    100% {left:100%;width: 0}
} 
```

# ruby-on-rails - 使用关联模型字段的friendly_id gem

> ID：15945292
> 
> 赞同：1
> 
> 时间：2013-04-11T09:30:21.560
> 
> 标签：ruby-on-rails, friendly-id

如果我们必须在其关联记录更新时为模型生成 slug，我们应该怎么做。例如，我正在使用模型 User 和 UserProfile，而 slug 是 user.user_profile.name。创建新用户时，也会保存关联的 user_profile。为新的用户记录生成 slug。但是当更新 user_profile 并更改名称时，slug 不会更新。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-28T18:22:39.603

在最新版本的 friendly_id 中，您可以定义一个方法来指定何时重新生成 slug（尽管这可能不是您需要的）：

```
 def should_generate_new_friendly_id?
    name_changed? || super
  end 
```

您可以在 UserProfile 类上使用保存后回调将 slug 设置为 nil 并强制 friendly_id 重新生成 slug：

```
if name_changed?
  user.slug = nil
  user.save
end 
```

这应该根据文档处理它：http: [//norman.github.io/friendly_id/](http://norman.github.io/friendly_id/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T09:49:19.857

您可以覆盖该`should_generate_new_friendly_id?`方法。通过这种方式，您可以控制何时生成新的 slug。

你可以做这样的事情

```
class User < ActiveRecord::Base
  extend FriendlyId
  friendly_id :my_friendly_id_method, :use => :slugged

  def should_generate_new_friendly_id?
    user_profile.changed?
  end
end 
```

# php - MySQL 使用其他行的数据更改选择输出

> ID：15945294
> 
> 赞同：2
> 
> 时间：2013-04-11T09:30:23.410
> 
> 标签：php, mysql

如果我不知道正确的术语，我很抱歉，但我们开始吧：

我有一个包含以下列和行的表：

```
------------------------------
| id    | parent_id  | type  |
------------------------------
| 1     | 0          | text1 |
| 2     | 1          | text2 |
------------------------------ 
```

现在我想要的是选择类型，但如果`parent_id`不是 0，我希望类型是它的父类型的内容 + [本身的类型]。

因此，在这种情况下，选择的输出将是：

```
----------------
| type         |
----------------
| text1        |
| text1[text2] |
---------------- 
```

我正在尝试使用 concat 和 if 语句进行此操作，但无法弄清楚。

你能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:37:11.867

尝试：

```
select c.id,
       case c.parent_id 
            when 0 then c.type
            else concat(p.type,'[',c.type,']')
       end as type
from mytable c
left join mytable p on c.parent_id = p.id 
```

SQLFiddle[在这里](http://sqlfiddle.com/#!2/e4f7ec/3)。

# file - BASH：循环查找带或不带前导零的文件

> ID：15945295
> 
> 赞同：0
> 
> 时间：2013-04-11T09:30:24.003
> 
> 标签：file, shell, loops, rename, zero

我不想重命名（或处理）目录（具有特定扩展名）中的文件。文件名可以是任何包含序号的东西，比如

```
1.aaa.txt
aa 1.txt
aa01bb.txt
78aa1bbb.txt
78aa2bbb.txt 
```

带或不带前导零的编号以及不带前导的新文件名。

所以我有：

```
NUM=0; for f in *.txt; do NUM=`expr $NUM + 1`; mv "$f" "yyy_$NUM.txt"; done 
```

如何让循环也理解文件顺序，文件编号不带前导零 1,2..10,11..等？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:47:27.227

下面的 Python 代码应该做排序的东西：

```
import re
from glob import glob

files = sorted([ file[:-4] for file in glob('*.txt') ])

chunked = []

for i, file in enumerate(files):
    chunks = re.split('(\d+)', file)
    for j, chunk in enumerate(chunks):
        if chunk.isdigit():
            chunks[j] = int(chunk)
    chunked.append((chunks, i))

for chunk, i in sorted(chunked):
    print(files[i]) 
```

看起来像这样的目录：

```
$ ls
01aa.txt  21a.txt  aa01bb.txt   aa10bb.txt
21aa.txt  2aa.txt  aa023bb.txt  aa1bb.txt 
```

它输出：

```
01aa.txt
2aa.txt
21a.txt
21aa.txt
aa01bb.txt
aa1bb.txt
aa10bb.txt
aa023bb.txt 
```

这与输出简单的`sort`.

```
$ ls | sort
01aa.txt
21aa.txt
21a.txt
2aa.txt
aa01bb.txt
aa023bb.txt
aa10bb.txt
aa1bb.txt 
```

# vba - DoCmd.DeleteObject acTable Vs 有什么区别？删除表

> ID：15945297
> 
> 赞同：9
> 
> 时间：2013-04-11T09:30:35.250
> 
> 标签：vba, ms-access

**细节：**

我有一个 MS-Access 数据库过程，我在数据库中本地创建表。但是，我想确保我创建的表已经过测试，如果测试失败，我需要删除/删除已创建的其他表。我猜基本上是一个回滚过程。

**问题：**

我遇到了两种删除表的方法，但无法弄清楚是否其中一种方法的优点多于缺点等......

有人能告诉我有什么区别吗？

非常感谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-11T11:01:12.073

```
DoCmd.DeleteObject acTable, "aaaTest" 
```

...和...

```
Dim cdb As DAO.Database
Set cdb = CurrentDb
cdb.Execute "DROP TABLE [aaaTest]", dbFailOnError 
```

...和...

```
Dim cdb As DAO.Database
Set cdb = CurrentDb
cdb.TableDefs.Delete "aaaTest" 
```

...都是完成同一件事的不同方式。他们删除`TableDef`具有该名称的本地对象（实际的本地表或表链接）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-09T02:43:28.613

@gordthompson 简洁地解释了三种删除表的方法。在测试他的方法时，我注意到了一个不同之处。我正在脱机工作，并且在后端有链接表，指向客户端网络上的 Access 表。当我尝试使用 Access UI 删除链接表时，每个表可能需要 30 多秒。这很烦人。

根据戈德的例子，我发现......

```
DoCmd.DeleteObject acTable, "aaaTest" ' is very slow, just like the Access UI.

CurrentDb.Execute "DROP TABLE [aaaTest]", dbFailOnError ' is immediate.

CurrentDb.TableDefs.Delete "[aaaTest]" ' is also immediate 
```

如果您的表名包含破折号或其他特殊字符，则将名称包含在 [方括号] 中应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-31T19:07:06.440

我刚刚发现 DropTable 不喜欢带有破折​​号的表名。我有很多，所以我在使用 droptable 删除它们之前使用 DoCmd.Rename 重命名表。这对我来说是最简单的解决方法，因为我有 15 个带有破折号的表和 60 个在退出时删除以清理临时文件的表。

# c++ - 在 C++ 中，“类实例”是唯一的对象类型吗？

> ID：15945298
> 
> 赞同：5
> 
> 时间：2013-04-11T09:30:35.313
> 
> 标签：c++, oop, c++11

帮助我理解这一点，如果我考虑所有 C++ 标准，包括 C++11，那么说我可以处理的唯一*对象是类的实例是正确的吗？*

其他玩家，例如 lambdas 呢？POD 的一个实例被认为是一个对象？

我知道这听起来像是一个小细节，但大多数时候，当我在定义什么是对象和什么不是对象时遇到此类问题时，我发现其他语言的概念很难比较，尤其是在函数式 OOP 语言中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T09:38:12.977

> 如果我考虑所有 C++ 标准，包括 C++11，那么说我可以处理的唯一对象是类的实例是正确的吗？

**不**，这是不正确的。

在 C++ 中，术语“对象”是指根据赋予对象的属性（例如其类型）给出特定解释的存储区域。

根据 C++11 标准的第 1.8/1 段：

> C++ 程序中的构造创建、销毁、引用、访问和操作对象。**一个对象是一个存储区域**。[注意：函数不是对象，无论它是否像对象那样占用存储空间。—尾注]对象由定义（3.1）、新表达式（5.3.4）或实现（12.2）在需要时创建。对象的属性是在创建对象时确定的。一个对象可以有一个名称（第 3 条）。对象具有影响其生命周期 (3.8) 的存储持续时间 (3.7)。一个对象有一个类型（3.9）。**术语对象类型是指创建对象的类型**. 一些对象是多态的（10.3）；该实现生成与每个此类对象相关联的信息，从而可以在程序执行期间确定该对象的类型。对于其他对象，其中找到的值的解释取决于用于访问它们的表达式的类型（第 5 条）。

所以基本上an`int`是一个对象，一个POD的实例是一个对象，当然一个类类型的实例也是一个对象。在 OOP 中，术语“对象”通常仅表示后一个实体——但在 C++ 中并非如此。

> 其他玩家，例如 lambdas 呢？

Lambda 实际上是定义未命名函子的语法糖（第 5.1.2/1 段）：

> Lambda 表达式提供了一种简洁的方式来创建简单的函数对象。[...]

另外（根据第 5.1.2/2 段）：

> 对 lambda 表达式的求值会产生一个临时纯右值 (12.2)。这个临时的称为闭包**对象**。[...] [*注意*：闭包对象的行为类似于函数对象（20.8）。——<em>尾注]

因此，lambda 是表达式，其求值会导致创建一个临时对象（所以是的，在某种意义上可以说 lambda 也是对象，或者更确切地说，它们*产生*一个对象）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T12:23:50.293

传统的OOP倾向于将“对象”的概念定义为携带方法和数据的“多态实体”，并且可以从其他对象和算法中引用。

对象的 C++ 定义本质上是“任何事物都需要空间来保持状态”。这导致 C++“对象”具有“值行为”和“方法”不一定是成员的主要区别，并且对象不一定需要支持运行时多态性。

遵循传统 OOP 定义的 C++ 程序，以 (smart)-(base)-(pointers|reference) 引用的类结束，使用间接机制作为在运行时解决多态性的关键。

现代 C++ 使用对象作为具有值复制或移动语义，并倾向于在编译时使用模板和通用算法和类型特征来解决多态性。

这两件事不是相互对立的，但 C++ 有意将两者合并，因此减少了传统 OOP 的“对象”定义（要引用的类的实例），实际上是削减了一半的 C++ 特性和可能性。

关于 lambda，严格意义上来说，它们是返回*匿名类型对象的**表达式*（不是对象本身）。

 *所以说它们是*对象*是不恰当的：`a+b`它本身不是一个对象：它*产生*一个对象（表达式的结果）。同样适用于`[](){}`：它本身不是一个对象：它产生一个对象，你甚至可以存储，比如

```
auto fn = [](){}; //create a lambda and assign to fn.
fn();             //just calls it 
```

fn 类型类似于

```
class lambda_uniquename
{
public:
   void operator()()
   {}
}; 
```

这里的对象不是`lambda`类，而是`fn`变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T09:39:02.060

在 C++ 中，**对象**是具有关联类型的存储区域

例如一个`int`

该区域不一定是连续的

举个例子，一个对象的虚拟多重继承部分可以（在某种意义上，在某些情况下存在它必须存在的地方）分布在*

# variables - 将 awk 输出分配给 shell 变量

> ID：15945302
> 
> 赞同：1
> 
> 时间：2013-04-11T09:30:43.533
> 
> 标签：variables, awk

希望有人可以就以下内容提出建议。

目前我有以下代码，我想将 $3 和 $5 分配给 {} 括号内的 shell 变量 - 这可能吗：

```
while read line; do pntadm -P $line | awk '{if (( $2 == 00 && $1 != 00 ) || ( $2 == 04 )) print $3,$5}'; done < /tmp/subnet_list 
```

为了让事情更清楚一点：

```
root[my-box]# cat /tmp/final_list
111.222.333.0
root[my-box]# pntadm -P 111.222.333.0 | head

Client ID       Flags   Client IP       Server IP       Lease Expiration                Macro           Comment

00A0BCDE1FGHI1  00      111.222.333.001    111.222.333.253     04/06/2013                      macro1
00              04      111.222.333.002    111.222.333.253     Zero                            macro1
00              00      111.222.333.003    111.222.333.253     Zero                            macro1
00A0BCDE1FGHI2  00      111.222.333.004    111.222.333.253     05/06/2013                      macro1
root[my-box]# 
```

我收到的代码应该从上面挑出三行（IP 的 111.222.333.001 ...002 和 ...004）。

如果我只需要例如 $5 的结果，我可以执行以下操作：

```
while read line; do date=$( pntadm -P $line | awk '{if (( $2 == 00 && $1 != 00 ) || ( $2 == 04 )) print $5}' ); done < /tmp/subnet_list 
```

但我需要 3 美元和 5 美元一起...

如果不使用数组，谁能告诉我如何在 {} 括号内将 $3 和 $5 分配给 shell 变量 - 请？

Rgds

中东欧

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:15:43.820

您不能在“{} 大括号内”分配 shell 变量——您在 awk 进程中对环境所做的任何事情都会在 awk 进程退出时消失。您需要从 awk 打印所需的数据并从 shell 中读取。尝试这个：

```
while read line; do 
    pntadm -P $line | 
    awk '($2 == "00" && $1 != "00") || ($2 == "04") {print $3,$5}' |
    while read client_ip lease_exp; do
        : do something with $client_ip and $lease_exp
    done 
done < /tmp/subnet_list 
```

或者没有 awk

```
while read line; do 
    pntadm -P $line |
    while read clientID flags clientIP serverIP leaseExpiration macro comment; do
        if [[ ($flags == "00" && $clientID != "00") || ($flags == "04") ]]; then
            : do something with $clientIP and $leaseExpiration
        fi
    done 
done < /tmp/subnet_list 
```

# ruby-on-rails - db:schema:load 是否删除现有表并创建新表？如果是，如何不让它删除现有的表和数据？

> ID：15945304
> 
> 赞同：0
> 
> 时间：2013-04-11T09:30:47.450
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我已经在生产服务器上的数据库中有表，我通过运行创建了这些表

```
RAILS_ENV=production rake db:schema:load 
```

现在我创建了更多迁移，并希望再次运行 db:schema:load 但它会删除现有表，因为我正在生产并且我确实有数据吗？我可以在我的 db/schema.rb 文件中看到，我有

create_table "authentications", :force => true do |t|

删除和创建表看起来非常危险，有没有其他方法可以做到这一点？我正在使用 postgresql

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:30:48.990

是的，加载架构将删除所有数据。您可以简单地设置`force`为`false`在您的架构中，但是 postgresql 会给您一个错误，因为表已经存在并且架构不会被加载。

问题实际上是您要实现的目标。如果您有一些迁移，为什么不在生产环境中运行它们呢？

```
rake db:migrate RAILS_ENV=production 
```

如果真的没有办法解决这个问题并且您的新架构仍然支持旧架构的数据，我建议您转储数据，加载架构，然后再次加载数据。为此，您可以使用[yaml_db](https://github.com/ludicast/yaml_db)。

# jquery - 我可以让 jQuery Mobile 只在所有图像加载后才显示一个页面吗？

> ID：15945311
> 
> 赞同：1
> 
> 时间：2013-04-11T09:31:19.147
> 
> 标签：jquery, jquery-mobile, mobile, mobile-application

我正在使用 jQuery Mobile 构建一个图像重的移动网络应用程序。它具有高度交互性，具有一些非常漂亮的 UX 功能。但是，如果一个人开始与某些页面进行交互，直到所有图像都已加载，这将破坏体验。有没有办法让页面只在所有图像加载后才显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:37:29.150

*   **在**整个页面上放置一个`div`（透明的或带有加载文本的） ，所以没有什么是可点击的。
***   等到所有图像都加载完毕（使用图像的`onload`事件 - 在不同的浏览器中测试这个，我记得在 Safari 浏览器中遇到了这个问题）*   加载所有图像后，删除覆盖`div`**

# android - 如何在列表视图中缓存图像视图？

> ID：15945312
> 
> 赞同：0
> 
> 时间：2013-04-11T09:31:19.223
> 
> 标签：android, listview, caching, bitmap, imageview

我和这个人有同样的问题 [Listview 显示错误的图像](https://stackoverflow.com/questions/6081497/listview-shows-wrong-images)

我看到了我必须缓存它的解决方案。但是在我的缓存中，我不确定如何应用解决方案中给出的缓存。我不断收到错误。

我怀疑这是我有问题的部分：

```
holder.icon.setImageBitmap(bitmapList[position]);

            //loadImageBitmap(mObjects.get(position), position);

            //onBitmapLoaded(position, holder.mTask.myBitmap()); 
```

下面是代码。Adapter.java 公共类适配器扩展 BaseAdapter {

```
 private static final String TAG = "Adapter";
    private Activity mActivity;
    public ArrayList<Data> mObjects;

    static class ViewHolder {
        ImageView icon;
        TextView title;
        WebView newimage;
        DownloadImageTask mTask;
        public void setOnClickListener(OnItemClickListener onItemClickListener) {
            // TODO Auto-generated method stub

        }
    }

    private Bitmap[] bitmapList;
    private Bitmap bitmapPlaceholder;  

    private void initBitmapListWithPlaceholders(){ 
    // call this whenever the list size changes
    // you can also use a list or a map or whatever so you 
    // don't need to drop all the previously loaded bitmap whenever 
    // the list contents are modified
        int count = getCount();
        bitmapList = new Bitmap[count];
        for(int i=0;i<count;i++){
             bitmapList[i]=bitmapPlaceholder;
        }
    }

    private void onBitmapLoaded(int position, Bitmap bmp){
    // this is your callback when the load async is done
        bitmapList[position] = bmp;
    }

    public Adapter(Activity activity, ArrayList<Data> mObjects) {

        this.mActivity = (Activity) activity;
        this.mObjects = mObjects;

    }

    public void setObjects(ArrayList<Data> mObjects) {
        this.mObjects = mObjects;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        Data item = mObjects.get(position);
        View rowView = convertView;

        if (rowView == null) {
            LayoutInflater inflater = mActivity.getLayoutInflater();
            rowView = inflater.inflate(R.layout.item, parent, false);

            ViewHolder viewHolder = new ViewHolder();
            viewHolder.icon = (ImageView) rowView.findViewById(R.id.image);
            viewHolder.title = (TextView) rowView.findViewById(R.id.title);

            viewHolder.newimage =(WebView)rowView.findViewById(R.id.newimage);

            rowView.setTag(viewHolder);
        }

        ViewHolder holder = (ViewHolder) rowView.getTag();

        holder.title.setText(item.getmTitle());

        //String html = " <html><head></head><body><p font-size='8px'>" +  item.getmImageUrl() + "</p><img src='" + item.getmImageUrl() + "' width='100%' height='100%'></body></html>";
        String html = " <html><head></head><body><img src='" + item.getmImageUrl() + "' width='100%' height='100%'></body></html>";

        holder.newimage.loadData(html, "text/html", "utf-8");

        holder.newimage.setFocusable(false);
        holder.newimage.setClickable(false);
        holder.setOnClickListener(new OnItemClickListener() {

            private Object title;

            public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
                //Toast.makeText(Adapter.this,"Button is clicked", Toast.LENGTH_LONG).show();
                Log.e("log_tag",this.title.toString() + " clicked");
            }
        });

        //holder.icon.setBackgroundResource(R.drawable.ic_launcher);
        holder.mTask = new DownloadImageTask(item.getmImageUrl(), holder.icon);

        holder.icon.setImageBitmap(bitmapList[position]);

        //loadImageBitmap(mObjects.get(position), position);

        //onBitmapLoaded(position, holder.mTask.myBitmap());
        if (!holder.mTask.isCancelled()) {
            holder.mTask.execute();
        }

        return rowView;
    }

    @Override
    public int getCount() {

        return (this.mObjects.size());
    }

    @Override
    public Object getItem(int position) {

        return (this.mObjects.get(position));
    }

    @Override
    public long getItemId(int position) {

        return (position);
    }

    public AbsListView.RecyclerListener mRecyclerListener = new RecyclerListener( ){

        public void onMovedToScrapHeap(View view) {
            ViewHolder viewHolder = (ViewHolder) view.getTag();
            DownloadImageTask imagetask = viewHolder.mTask;
            if (imagetask != null) {
                imagetask.cancel(true);
            }
        }

    };

    public void setOnClickListener(OnItemClickListener onItemClickListener) {
        // TODO Auto-generated method stub

    } 
```

下载ImageTask.java

```
import java.io.FilterInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.widget.ImageView;

public class DownloadImageTask extends AsyncTask<Void, Void, Bitmap> {
    public Bitmap g;
    private String mUrl;
    private ImageView mImageView = null;

    public DownloadImageTask(String Url, ImageView imageView) {

        mUrl = Url;
        this.mImageView = imageView;
    }

    protected void onPostExecute(Bitmap result) {
        super.onPostExecute(result);
        if (result != null) {
            mImageView.setImageBitmap(result);
            //result.recycle();
        }
    }

    protected Bitmap doInBackground(Void... params) {

        Bitmap bitmap = getBitmap(mUrl);
        return bitmap;
    }

    public Bitmap getBitmap(String imageUrl) {
        Bitmap mBitmap = null;
        try {

            /*URL newurl = new URL(imageUrl); 
            mBitmap = BitmapFactory.decodeStream(newurl.openConnection() .getInputStream()); */
            //mImageView.setImageBitmap(mBitmap);

            /*
            URL url = new URL(imageUrl);
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            InputStream is = conn.getInputStream();
            mBitmap = BitmapFactory.decodeStream(new FlushedInputStream(is));*/

            InputStream in = new java.net.URL(imageUrl).openStream();
            mBitmap = BitmapFactory.decodeStream(new FlushedInputStream (in));
            //mBitmap.recycle();

        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        this.g = mBitmap;
        return mBitmap;
    }

    public Bitmap myBitmap() {
        Bitmap fg;
        fg = (Bitmap) g;

        return fg;
    }

    static class FlushedInputStream extends FilterInputStream {
        public FlushedInputStream(InputStream inputStream) {
            super(inputStream);
        }

        @Override
        public long skip(long n) throws IOException {
            long totalBytesSkipped = 0L;
            while (totalBytesSkipped < n) {
                long bytesSkipped = in.skip(n - totalBytesSkipped);
                if (bytesSkipped == 0L) {
                    int b = read();
                    if (b < 0) {
                        break;  // we reached EOF
                    } else {
                        bytesSkipped = 1; // we read one byte
                    }
                }
                totalBytesSkipped += bytesSkipped;
            }
            return totalBytesSkipped;
        }
    }

} 
```

编辑

我已经按照以下代码修改了 DownloadImageTask.java 以进行一些缓存：[https ://stackoverflow.com/a/7730547](https://stackoverflow.com/a/7730547)

但我似乎在这行有问题：

```
if (!(this.mImageView.getTag().toString()).equals(this.mUrl)) {
            /* The path is not same. This means that this
               image view is handled by some other async task. 
               We don't do anything and return. */
            return;
         } 
```

由于 if... 行，应用程序总是崩溃。这变得超级令人沮丧。我需要帮助。请帮我。下面是修改后的 DownloadImageTask.Java

```
import java.io.FilterInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.view.View;
import android.widget.ImageView;

public class DownloadImageTask extends AsyncTask<Void, Void, Bitmap> {
    public Bitmap g;
    private String mUrl;
    private ImageView mImageView = null;

    public DownloadImageTask(String Url, ImageView imageView) {

        mUrl = Url;
        this.mImageView = imageView;

    }

    protected void onPostExecute(Bitmap result) {
        super.onPostExecute(result);

        /*
        if (result != null) {
            mImageView.setImageBitmap(result);

        }
        */
        if (!(this.mImageView.getTag().toString()).equals(this.mUrl)) {
            /* The path is not same. This means that this
               image view is handled by some other async task. 
               We don't do anything and return. */
            return;
         }

         if(result != null && mImageView != null){
             mImageView.setVisibility(View.VISIBLE);
             mImageView.setImageBitmap(result);
             mImageView.setTag(this.mUrl);
         }else{
             mImageView.setVisibility(View.GONE);
         }

    }

    protected Bitmap doInBackground(Void... params) {

        Bitmap bitmap = getBitmap(mUrl);
        return bitmap;

    }

    public Bitmap getBitmap(String imageUrl) {

        Bitmap mBitmap = null;
        try {

            /*URL newurl = new URL(imageUrl); 
            mBitmap = BitmapFactory.decodeStream(newurl.openConnection() .getInputStream()); */
            //mImageView.setImageBitmap(mBitmap);

            /*
            URL url = new URL(imageUrl);
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            InputStream is = conn.getInputStream();
            mBitmap = BitmapFactory.decodeStream(new FlushedInputStream(is));*/

            InputStream in = new java.net.URL(imageUrl).openStream();
            mBitmap = BitmapFactory.decodeStream(new FlushedInputStream (in));

            //this.mImageView.setTag(this.mUrl);
            //mBitmap.recycle();

        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        this.g = mBitmap;

            return mBitmap;

    }

    public Bitmap myBitmap() {
        Bitmap fg;
        fg = (Bitmap) g;

        return fg;
    }

    static class FlushedInputStream extends FilterInputStream {
        public FlushedInputStream(InputStream inputStream) {
            super(inputStream);
        }

        @Override
        public long skip(long n) throws IOException {
            long totalBytesSkipped = 0L;
            while (totalBytesSkipped < n) {
                long bytesSkipped = in.skip(n - totalBytesSkipped);
                if (bytesSkipped == 0L) {
                    int b = read();
                    if (b < 0) {
                        break;  // we reached EOF
                    } else {
                        bytesSkipped = 1; // we read one byte
                    }
                }
                totalBytesSkipped += bytesSkipped;
            }
            return totalBytesSkipped;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:34:32.600

`AsyncTask`您可以使用缓存库来代替手动实现这一点。Android Query 是一个很好的查询：[http ://code.google.com/p/android-query/](http://code.google.com/p/android-query/)

`getView`要使用 Android Query 加载图像，您可以在 ListView 适配器的方法中使用以下代码：

```
AQuery _aq = new AQuery(mActivity);
_aq.id(R.id.icon).image("IMAGE_URI_TO_LOAD"); 
```

这应该取代`holder.icon.setImageBitmap(bitmapList[position]);`呼叫。

这将在 imageview 中加载、缓存和显示来自 Uri 的图像。如果图像已被缓存，它将改为从缓存中自动加载。

有关如何使用此库进行图像加载的更多信息，您可以在此处查看：[http ://code.google.com/p/android-query/wiki/ImageLoading](http://code.google.com/p/android-query/wiki/ImageLoading)

# c++ - 对类互斥体使用 mutable 以便可以将方法声明为 const 好的设计？

> ID：15945323
> 
> 赞同：0
> 
> 时间：2013-04-11T09:31:40.283
> 
> 标签：c++, c++11

如果我需要多线程安全类，我想知道这是一个好的设计。

1）将方法设计为普通的非线程安全类将拥有它们，如果它们不修改成员，请注意用 const 标记方法。Ofc 对此持保留态度，例如并发向量不能有 pop_back()，只有 try_pop() ...

2) 将可变互斥锁添加到类中，并在每个方法开始时使用 lock_guard every 锁定它（如果互斥锁是非递归的，请注意不要对互斥锁进行双重锁定）

例子：

```
size_t MyClass::getSize() const
{
  lock_guard<mutex> lg(mtx); //mtx is mutable
  return cont.size();

} 
```

# php - 通过 ejabberd 进行外部身份验证时出错

> ID：15945326
> 
> 赞同：0
> 
> 时间：2013-04-11T09:31:48.177
> 
> 标签：php, mysql, authentication, ejabberd

我正在 ejabberd 中实现外部身份验证。我正在使用[ejabberd 提供](http://www.ejabberd.im/files/efiles/check_mysql.php.txt)的 PHP MySQL 脚本。不幸的是，当我尝试连接存储在表中的用户详细信息时，它给了我一个错误。

```
=ERROR REPORT==== 2013-04-11 13:17:54 ===
E(<0.269.0>:extauth:133) : extauth call '["auth","admin","localhost","admin"]' didn't receive
response

=INFO REPORT==== 2013-04-11 13:17:54 ===
I(<0.462.0>:ejabberd_c2s:649) :
({socket_state,ejabberd_http_bind,{http_bind,<0.461.0>,{{127,0,0,1},39426}},ejabberd_http_bind})
Failed authentication for admin@localhost 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T00:54:39.757

该错误表明您在 60 秒内没有收到来自外部程序的响应（这是默认超时）。

您是否在 ejabberd.cfg 的 extauth_program 中定义了它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-15T12:53:26.990

花了 1 天时间试图获得工作 ejabberd 授权。
问题基本上出现在从标准输入读取时阻塞进程。
这是从描述符读取非块符号的解决方案：

```
function non_block_read($fd, &$data) {
    $read = array($fd);
    $write = array();
    $except = array();
    $result = stream_select($read, $write, $except, 0);
    if($result === false) {
                throw new Exception('stream_select failed');
        }
    if($result === 0) return false;
    $data.= stream_get_line($fd, 1);
    return true;
} 
```

这是守护程序代码也可以使终身阅读周期。

```
$fh  = fopen("php://stdin", 'r');
$fhout  = fopen("php://stdout", 'w');
$pdo = new PDO('mysql:host='.$host.';dbname='.$db, $user,$pass);
if(!$fh){
    die("Cannot open STDIN\n");
}
$aStr='';
$collect=false;
do {
        if (!non_block_read($fh,$aStr)) {
                if (strlen($aStr) > 0) {
                       $toAuth = substr(trim($aStr),1);
                       checkAuth($toAuth,$pdo,$fhout);
                       $aStr='';
                }
                else sleep (1);
        }
}
while (true); 
```

一些解释： checkAuth - 任何实现 'auth' 和 'isuser' 处理程序的函数。
sleep(1) - 逃避 CPU 负载的简单方法。
第一个符号 - 预先设置消息的服务符号，它因客户端而异，所以我只是剪掉它。
这是回复代码。回复 - 真 | 错误的值。

```
$message =  @pack("nn", 2, $result);
fwrite($stdout, $message);
flush(); 
```

享受。

# xml - 使用 xmldom 写句子时出现语法错误

> ID：15945329
> 
> 赞同：2
> 
> 时间：2013-04-11T09:31:56.397
> 
> 标签：xml, xmldom

我想使用 xmldom 实现以下输出

```
<ENVELOPE>
<LEDGER NAME="Shah" Action="CREATE">
</LEDGER>
</ENVELOPE> 
```

为此，我如何使用 xmldom 编写第二行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:02:01.620

需要为它设置属性..

```
$ledger = $xml->createElement("LEDGER");
$ledger->setAttribute("NAME", "$resul");
$ledger->setAttribute("Action", "CREATE"); 
```

# xcode - XCode EXC_BAD_ACCESS 在设备上但不是模拟器上崩溃 - 使用断点进行调试

> ID：15945331
> 
> 赞同：0
> 
> 时间：2013-04-11T09:32:01.960
> 
> 标签：xcode, debugging, exc-bad-access, breakpoints

我不确定发生了什么，我认为我没有对代码进行任何重大更改，但现在我无法运行或调试该应用程序。

```
Thread 1: EXC_BAD_ACCESS (code=2, address=0x2fd77d4c) 
```

我什至无法在错误之前插入断点，它是在显示启动画面时（因此不调用 AppDelegate didFinishLoadingWithOptions）。

我应该尝试在哪里放置断点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:35:04.473

我解决了！将部署目标更改为 6.1，运行应用程序，然后更改回 5.0... 困惑的想法...

# ruby-on-rails - Ruby Madeleine 健全性检查错误

> ID：15945332
> 
> 赞同：0
> 
> 时间：2013-04-11T09:32:06.067
> 
> 标签：ruby-on-rails, ruby

我是红宝石新手。我在名为madeleine（v0.8.0）的项目中有一个宝石

当我尝试创建 SnapshotMadeleine 对象时，我仍然收到“文件 IO 的完整性检查失败”

```
SnapshotMadeleine.new('tmp/classifier'){} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:38:39.407

尝试将madeleine版本升级到最新的github版本。

# java - 什么可能导致 Hibernate 4 的“连接过多”

> ID：15945333
> 
> 赞同：0
> 
> 时间：2013-04-11T09:32:10.177
> 
> 标签：java, mysql, hibernate

我正在为我当前的网站使用 Hibernate 4 和 mysql，在我尝试在 2 个 Web 浏览器的选项卡中多次刷新页面后，服务器关闭并显示错误日志：

```
ERROR: Data source rejected establishment of connection,  message from server: "Too many connections"
org.hibernate.exception.JDBCConnectionException: Could not open connection
    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:68)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:304)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.getConnection(LogicalConnectionImpl.java:169)
    at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.doBegin(JdbcTransaction.java:67)
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.begin(AbstractTransactionImpl.java:160)
    at hibernate.dao.StockDao.getWarehouseInStock(StockDao.java:132)
    at Utils.Common.updateStockHistorical(Common.java:501)
    at Controller.StockServlet.processRequest(StockServlet.java:67)
    at Controller.StockServlet.doPost(StockServlet.java:116)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at Controller.ServletFilter.doFilter(ServletFilter.java:134)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:879)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:600)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1703)
    at java.lang.Thread.run(Thread.java:722)
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Data source rejected establishment of connection,  message from server: "Too many connections"
    at sun.reflect.GeneratedConstructorAccessor70.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1014)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:988)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:974)
    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1104)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2412)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2445)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2230)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:813)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.GeneratedConstructorAccessor62.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:399)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:334)
    at java.sql.DriverManager.getConnection(DriverManager.java:579)
    at java.sql.DriverManager.getConnection(DriverManager.java:190)
    at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.getConnection(DriverManagerConnectionProviderImpl.java:173)
    at org.hibernate.internal.AbstractSessionImpl$NonContextualJdbcConnectionAccess.obtainConnection(AbstractSessionImpl.java:279)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:297)
    ... 24 more 
```

这是我的休眠配置：

```
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/wstrader2?characterEncoding=UTF-8</property>
    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.connection.password">root</property>
    <property name="hibernate.current_session_context_class">jta</property>
    <mapping resource="hibernate/dto/Warehouse.hbm.xml"/>
    <mapping resource="hibernate/dto/Exchange.hbm.xml"/>
    <mapping resource="hibernate/dto/Packing.hbm.xml"/>
    <mapping resource="hibernate/dto/GradeMaster.hbm.xml"/>
    <mapping resource="hibernate/dto/MarketFobDiff.hbm.xml"/>
    <mapping resource="hibernate/dto/Arbitration.hbm.xml"/>
    <mapping resource="hibernate/dto/Quality.hbm.xml"/>
    <mapping resource="hibernate/dto/Region.hbm.xml"/>
    <mapping resource="hibernate/dto/City.hbm.xml"/>
    <mapping resource="hibernate/dto/Contract.hbm.xml"/>
    <mapping resource="hibernate/dto/HistoricalBasis.hbm.xml"/>
    <mapping resource="hibernate/dto/Country.hbm.xml"/>
    <mapping resource="hibernate/dto/Origin.hbm.xml"/>
    <mapping resource="hibernate/dto/WarehouseReceipt.hbm.xml"/>
    <mapping resource="hibernate/dto/DailyBasis.hbm.xml"/>
    <mapping resource="hibernate/dto/User.hbm.xml"/>
    <mapping resource="hibernate/dto/Movement.hbm.xml"/>
    <mapping resource="hibernate/dto/PaymentTerm.hbm.xml"/>
    <mapping resource="hibernate/dto/ContractTerm.hbm.xml"/>
    <mapping resource="hibernate/dto/CompanyMaster.hbm.xml"/>
    <mapping resource="hibernate/dto/ProcessingOrder.hbm.xml"/>
    <mapping resource="hibernate/dto/Stock.hbm.xml"/>
    <mapping resource="hibernate/dto/HistoricalStock.hbm.xml"/>
    <mapping resource="hibernate/dto/Menu.hbm.xml"/>
    <mapping resource="hibernate/dto/Authorization.hbm.xml"/>
    <mapping resource="hibernate/dto/Page.hbm.xml"/>
    <mapping resource="hibernate/dto/ContractPriceFixation.hbm.xml"/>
    <mapping resource="hibernate/dto/FuturesContract.hbm.xml"/>
    <mapping resource="hibernate/dto/FutureCloseOut.hbm.xml"/>
    <mapping resource="hibernate/dto/Currency.hbm.xml"/>
    <mapping resource="hibernate/dto/FuturesContractArchive.hbm.xml"/>
    <mapping resource="hibernate/dto/FutureCloseOutArchive.hbm.xml"/>
    <mapping resource="hibernate/dto/ScreenMaster.hbm.xml"/>
    <mapping resource="hibernate/dto/QualityMaster.hbm.xml"/>
  </session-factory>
</hibernate-configuration> 
```

这是我的 HibernateUtil.java：

```
public class HibernateUtil {
    private static final SessionFactory ourSessionFactory;
    private static ServiceRegistry serviceRegistry;
    private static Configuration configuration = new Configuration().configure();

    static {
        try {
            serviceRegistry = new ServiceRegistryBuilder().applySettings(
                    configuration.getProperties()).buildServiceRegistry();
            ourSessionFactory = configuration.buildSessionFactory(serviceRegistry);
        } catch (Throwable ex) {
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static Session getSession() throws HibernateException {
        return ourSessionFactory.openSession();
    }
} 
```

有人可以找出原因或告诉我导致错误的条件`"Too many connection"`，`org.hibernate.exception.JDBCConnectionException: Could not open connection` 我尝试找到相关主题但仍未找到问题的答案

感谢您阅读本主题。

**更新：我的示例Dao.java**：

```
public class CityDAO {

    private Session session = null;

    public CityDAO() {
        session = HibernateUtil.getSession();
    }

    public ArrayList<City> getAllCities() {
        try {
            session.getTransaction().begin();
            Criteria crit = session.createCriteria(City.class);
            ArrayList<City> cities = (ArrayList<City>)crit.list();
            session.flush();
            session.getTransaction().commit();
            return cities;
        } catch (Exception e) {
            if (session.getTransaction().isActive()) {
                session.getTransaction().rollback();
            }
            e.printStackTrace();
        }
        return null;
    }

    public City getCityById(int id){
        try {
            session.getTransaction().begin();
            Criteria crit = session.createCriteria(City.class);
            crit.add(Restrictions.eq("id", id));
            City city = (City)crit.uniqueResult();
            session.flush();
            session.getTransaction().commit();
            return city;
        } catch (Exception e) {
            if (session.getTransaction().isActive()) {
                session.getTransaction().rollback();
            }
            e.printStackTrace();
        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:18:14.053

我找到了解决我的问题的方法。因为我的 Web 应用程序使用 servlet - 老式的。所以我试试这个：

[https://community.jboss.org/wiki/OpenSessionInView](https://community.jboss.org/wiki/OpenSessionInView)

这对我有用。

谢谢大家给我建议:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:37:52.877

我假设，异常是由 MySql 引发的。要么增加那里的最大连接数，要么检查源是否存在资源泄漏。例如，不要在每次请求后创建连接实例或在每次请求后关闭连接等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:37:06.627

您在 DAO 类的每个实例上都有一个打开的会话，即使您设置了连接池，也无济于事。

您制作了类似*many-sessions-per-application*反模式的东西（与[*session-per-application*](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html_single/#d5e626)有点不同）。该反模式存在问题，在[Hiberhate Guide中进行了描述](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html_single/#transactions-basics-issues)

> 会话不是线程安全的。如果共享 Session 实例，并发工作的事物，如 HTTP 请求、会话 bean 或 Swing 工作程序，将导致竞争条件。
> 
> Hibernate 抛出的异常意味着您必须回滚数据库事务并立即关闭 Session

另外，由于您没有连接池，当连接被服务器终止时，应用程序无法检测到情况。

# java - Android（附件模式）和Windows PC（主机）之间的USB通信

> ID：15945334
> 
> 赞同：15
> 
> 时间：2013-04-11T09:32:15.503
> 
> 标签：java, android, windows, usb, communication

我尝试在我的笔记本电脑 (win7) 和我的安卓手机 (Android 4.2) 之间建立 USB 连接。笔记本电脑应作为主机为安卓手机供电。目标是笔记本和手机可以发送和接收xml字符串

我尝试关注解释附件模式的 android 页面（[http://developer.android.com/guide/topics/connectivity/usb/accessory.html](http://developer.android.com/guide/topics/connectivity/usb/accessory.html)）。

*   1：我必须像他们在这里所做的那样定义一个附件过滤器：

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <resources>
    <usb-accessory model="DemoKit" manufacturer="Google" version="1.0"/>
    </resources> 
    ```

    因为我不想识别特殊的硬件。我希望能够识别所有类型的 Windows 计算机（例如，我将手机插入另一台计算机）。

*   2：我现在没有在窗户方面做任何事情。我只是按照android页面，插入usb电缆并观看日志。应用程序 startet 请求许可，但附件为空。任何提示为什么它为空？代码：

    ```
    public class MainActivity extends Activity {
    private static final String ACTION_USB_PERMISSION = "com.android.example.USB_PERMISSION";
    private static final String TAG = "USB_PERMISSION";
    UsbAccessory accessory;

    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    UsbManager manager = (UsbManager) getSystemService(Context.USB_SERVICE);

    PendingIntent mPermissionIntent = PendingIntent.getBroadcast(this, 0,
            new Intent(ACTION_USB_PERMISSION), 0);
    IntentFilter filter = new IntentFilter(ACTION_USB_PERMISSION);
    registerReceiver(mUsbReceiver, filter);
    accessory = (UsbAccessory) getIntent().getParcelableExtra(
            UsbManager.EXTRA_ACCESSORY);
    manager.requestPermission(accessory, mPermissionIntent);
     }

    private final BroadcastReceiver mUsbReceiver = new BroadcastReceiver() {

    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (ACTION_USB_PERMISSION.equals(action)) {
            synchronized (this) {
                if (intent.getBooleanExtra(UsbManager.EXTRA_PERMISSION_GRANTED, false)) {
                    String manufacturer;
                    Log.d(TAG, "permission accepted for accessory " + accessory);
                    if (accessory != null) {
                        manufacturer = accessory.getManufacturer();
                        Log.d(TAG, "Manufacturer: " + manufacturer);                        }
                } else {
                    Log.d(TAG, "permission denied for accessory "+ accessory);
                }
            }
        }
    }
    };
    } 
    ```

*   3：我可以使用任何库/项目来识别 Windows 端的 USB 连接吗？

*   4：还有什么我应该考虑的吗？有什么不对吗？
*   5：谢谢你的帮助 :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-10T12:51:57.537

您应该在主机端（在您的情况下为 Windows）上有一个应用程序，它将要求 Android 进入附件模式。当它询问时，您将看到是否给予许可的选项。您有空附件，因为没有连接附件，它遵循 AOAP 发起通信。因此，可以拥有不运行 Android 的附属设备并使用 AOAP 与其通信。

您可以在 USB 文件夹中的 android SDK 示例中找到 Android 端的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-26T16:39:22.137

您获得 0 配件的原因是因为您的 Android USB 端口没有连接配件设备，您的场景是使用 Windows PC 作为主机（您可以尝试编写自定义的 WinUSB 驱动程序）并且 Android 设备是纯 USB 设备，它与AOA无关，当您从主机（Windows或macOS）发送模式切换请求时，Android设备变为附件模式并且本身是附件，您将使用getAccessoryList找到一个附件。顺便说一句，我通过 libusb 让 Windows 和 macOS 都与 Android 一起工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-10T04:26:18.277

是的，你需要在Windows端使用WinUSB/libusb API来做主机工作，把Android变成附件模式，然后互相交谈

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-04-12T06:39:59.950

好吧，我想我自己找到了答案。Android USB 附件模式仅适用于 Android 手机和其他运行 Android 的设备（如 Arduino）之间。因此，使用此设置是不可能的。

# ruby-on-rails - 无法上传图片（回形针）和 jquery mobile

> ID：15945339
> 
> 赞同：2
> 
> 时间：2013-04-11T09:32:37.820
> 
> 标签：ruby-on-rails, jquery-mobile, paperclip, paperclip-validation

无法保存头像（图片）

收到此消息：1个错误禁止保存此通知：头像を入力してください。</p>

开发日志

```
Started PUT "/notices/1" for 127.0.0.1 at 2013-04-11 18:32:59 +0900
Processing by NoticesController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"m6JK3ufruxHDD84vniXEbe4SEzRijK5HTI1SF6MkTUM=", "notice"=>{"message"=>"xxx", "seat"=>"1"}, "commit"=>"Save", "id"=>"1"}
  User Load (2.4ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Notice Load (1.4ms)  SELECT "notices".* FROM "notices" WHERE "notices"."id" = $1 LIMIT 1  [["id", "1"]]
   (0.3ms)  BEGIN
   (0.2ms)  ROLLBACK
  Rendered notices/_form.html.haml (10.7ms)
  Rendered notices/edit.html.haml within layouts/application (24.3ms)
Completed 200 OK in 594ms (Views: 293.9ms | ActiveRecord: 18.2ms) 
```

设置：

config/environments/development.rb Paperclip.options[:command_path] = "/usr/local/bin/"

=====================================

模型/notice.rb

```
class Notice < ActiveRecord::Base
attr_accessible :admin_id, :message, :seat
attr_accessible :avatar
has_attached_file :avatar, :styles => { :medium => "300x300>", :thumb => "100x100>" }, :default_url => "/images/:style/missing.png",
:path => ":rails_root/public/system/:attachment/:id/:style/:filename",
:url => "/system/:attachment/:id/:style/:filename"
validates_attachment :avatar, :presence => true
end 
```

=====================================

控制器/notices_controller.rb

```
# POST /notices
# POST /notices.json
def create
@notice = Notice.new(params[:notice])
@notice.admin_id = current_user.id

respond_to do |format|
if @notice.save
format.html { redirect_to @notice, notice: 'Notice was successfully created.' }
format.json { render json: @notice, status: :created, location: @notice }
else
format.html { render action: "new" }
format.json { render json: @notice.errors, status: :unprocessable_entity }
end
end
end 
```

=====================================

意见/通知/_form.html.haml

```
= form_for @notice, :html => { :multipart => true } do |f|
...
.field
= f.file_field :avatar
... 
```

=====================================

架构.rb

```
`create_table "notices", :force => true do |t|`

t.integer  "admin_id"
t.text     "message"
t.boolean  "seat"
t.datetime "created_at",          :null => false
t.datetime "updated_at",          :null => false
t.string   "avatar_file_name"
t.string   "avatar_content_type"
t.integer  "avatar_file_size"
t.datetime "avatar_updated_at"
end

➜  xxx git:(master) ✗ brew install imagemagick
Error: imagemagick-6.8.0-10 already installed

➜  xxx git:(master) ✗ brew install gs 
Error: ghostscript-9.06 already installed 
```

如果有人读过它，非常感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:38:23.807

通过替换解决

```
:url  => "/system/:attachment/:id/:style/:filename" 
```

经过

```
:url  => ":attachment/:id/:style/:filename" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:39:30.533

谢谢你们阅读所有这些东西:)

解决方案->我必须添加“data-ajax”=> false :)，因为我使用 jquery mobile :)

```
= form_for(@notice, :html => { :multipart => true, "data-ajax" => false}) do |f| 
```

:)

# ruby-on-rails - Capybara webkit 的数据库清理器问题

> ID：15945349
> 
> 赞同：10
> 
> 时间：2013-04-11T09:33:05.483
> 
> 标签：ruby-on-rails, cucumber, capybara, capybara-webkit, database-cleaner

我正在使用 Cucumber 编写我的集成测试和[Database Cleaner](https://github.com/bmabey/database_cleaner)来保持我的数据库清洁。一切都完美无缺，因为我的测试不需要 Javascript。

[我可以使用Capybara webkit](https://github.com/thoughtbot/capybara-webkit)使这些最后的测试通过，但是我的数据库根本没有被清理。

这是我的**features/support/env.rb**文件：

```
require 'simplecov'
SimpleCov.start 'rails'
require 'cucumber/rails'

Capybara.default_selector = :css
Capybara.javascript_driver = :webkit

begin
  require 'database_cleaner'
  require 'database_cleaner/cucumber'
  DatabaseCleaner[:active_record].strategy = :transaction
rescue NameError
  raise "You need to add database_cleaner to your Gemfile (in the :test group) if you wish to use it."
end

Before do
  DatabaseCleaner.start
end

After do |scenario|
  DatabaseCleaner.clean
end 
```

我尝试了类似的方法[来](http://rainux.github.io/2011/07/23/configure-capybara-webkit-to-run-acceptance-specs-with-javascript-ajax/)检查 Capybara 使用了哪个驱动程序，但它没有用。[我也尝试了这篇文章](http://blog.plataformatec.com.br/2011/12/three-tips-to-improve-the-performance-of-your-test-suite/)第三部分中提到的黑客，但没有任何效果......

我真的不知道如何实现这一点，任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-12T17:00:29.200

快速回答：

将您的 JavaScript 测试配置为使用截断而不是事务：

```
DatabaseCleaner.strategy = :truncation 
```

更长的解释：

事务策略不适用于 JavaScript 测试，因为大多数支持 JavaScript 的水豚驱动程序在与应用程序代码不同的线程中运行测试。

以下是该过程的基本概述：

*   Capybara 在后台线程中使用 webrick 或 Thin 启动您的机架应用程序。
*   主线程设置驱动程序，提供运行机架应用程序的端口。
*   您的测试要求驱动程序与应用程序交互，这会导致伪造的 Web 浏览器对您的应用程序执行请求。

这是必要的，因为很难制作一个针对内存中 Rack 应用程序执行请求的假浏览器。在某些数据库驱动程序中，从多个线程对同一事务执行查询是不安全的。

这样做的最终结果是您需要在测试代码中提交事务，以便数据在应用程序代码中可见。解决此问题的最简单方法是使用截断数据库清理器策略。

您可以配置 RSpec（或 Cucumber）以将事务用于除 JavaScript 测试之外的所有内容。这对于非 JavaScript 测试会更快，同时仍然适用于 JavaScript 测试。

Avdi Grimm 有一篇关于这个主题的好博文，详细描述了解决方案：http: [//devblog.avdi.org/2012/08/31/configuring-database_cleaner-with-rails-rspec-capybara-and-selenium/](http://devblog.avdi.org/2012/08/31/configuring-database_cleaner-with-rails-rspec-capybara-and-selenium/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:40:34.463

基于事务的策略不适用于黄瓜。这样做的原因是您有两个单独的进程正在运行，一个正在运行您的应用程序服务器，另一个正在执行实际请求。有不同的方法可以解决这个问题，但它们是肮脏的黑客。干净的解决方案是使用截断作为 DatabaseCleaner 策略。

```
DatabaseCleaner.strategy = :truncation

Before do
  DatabaseCleaner.clean_with :truncation
end 
```

# java - ActiveAndroid 更新表字段，同时保持自动生成的行 ID 相同

> ID：15945350
> 
> 赞同：0
> 
> 时间：2013-04-11T09:33:09.107
> 
> 标签：java, orm, activeandroid

我试图找到一种更新表格行中字段的方法，同时保持行 ID（由 Active Android 自动生成）相同。这在 Active Android 中是否可行，或者当特定行发生更新时，行 ID 是否总是会更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T05:19:24.847

您可以尝试获取您的对象：

```
Object obj = new Select().from(YourClass.class).where("id = ?", id).executeSingle(); 
```

（您可以使用您知道的字段之一更改“id”）

然后，更新您要更新的字段：

```
obj.setName("Foo"); 
```

最后，保存更新：

```
obj.save(); 
```

我在使用其他方式重复条目时遇到了问题，但这对我有用。

# entity-framework-5 - EFProf .NET 框架 4.5

> ID：15945353
> 
> 赞同：0
> 
> 时间：2013-04-11T09:33:19.610
> 
> 标签：entity-framework-5

我最近开始将 EF5 与 .NET Framework 4.5 一起使用，我希望使用 Entity Framework Profiler，但是当我尝试初始化它时，我得到了一个异常

```
System.InvalidOperationException: System.InvalidOperationException: The type or namespace name 'Infrastructure' does not exist in the namespace 'System.Data.Entity' (are you missing an assembly reference?) 
```

要注意我已经引用了 System.Data.Entity 程序集。也许我必须在 app.config 中设置一些程序集绑定重定向？有什么建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:09:53.700

在相同的情况下，此解决方案对我有用：

卸载 Nuget 包：Entity Framework Profiler（我证明是从 NuGet 安装 EFProf）在控制面板 > 添加或删除程序中卸载 Entity Framework Profiler 的所有实例

从 HinernatingRhinos 网页下载 EFprof。在任何文件夹中解压缩在 VisualStudio 项目中添加对该文件夹中 HibernatingRhinos.Profiler.Appender.dll 的引用

启动 EFProf.exe 并执行 VisualStudio 解决方案

就这样

# java - 如何将实体对应到这个新表

> ID：15945354
> 
> 赞同：1
> 
> 时间：2013-04-11T09:33:22.187
> 
> 标签：java, jpa-2.0

我正在使用 EJB 和 JPA 开发 Java EE 项目。服务器是 Jboss AS 7.1，它使用 Hibernate 作为 JPA 提供者。

在这个项目中，我想在数据库中添加许多新表，我还想在运行时向这些表中添加许多新列（我不知道会添加哪个表或列）。

**示例 1**：我有一个表用户，它只有一个属性 ID。在运行时，我会根据需要在运行时添加属性（在用户表中添加一个cloumn）。

**示例 2**：我将添加一个表 user_1，我还将为 user_1 执行与 example1 相同的操作（在数据库中添加一个表）。

我怎样才能将实体对应到这个新表或新的cloumns。有什么方法或例子吗？

# css - css菜单问题，父项宽度跨越子项总宽度

> ID：15945355
> 
> 赞同：0
> 
> 时间：2013-04-11T09:33:25.710
> 
> 标签：css, joomla, menu

我创建了一个菜单，但现在我坚持如何停止跨越子项的父项宽度。

我确定我的 CSS 有问题，而不是 joomla，有人可以看看吗？我已经用尽了 firbug 试图纠正这一点！

[http://www.adamtoms.co.uk/login](http://www.adamtoms.co.uk/login)

澄清一下，当您单击“登录”菜单项时，我希望它保持其原始大小而不是拉伸到子项的宽度。

非常感谢，亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:44:56.193

```
Add below css to fix it
<style type="text/css">
#nav ul li{
    display:inline-block;
}
#nav ul li > ul{
    width:315px;
    position:absolute;
    right:-4px;
    top:70px;
}
</style> 
```

# jquery - 基于一列删除html表中的重复行

> ID：15945357
> 
> 赞同：0
> 
> 时间：2013-04-11T09:33:43.463
> 
> 标签：jquery, html, html-table, duplicates

```
<table id="test" border="1">
    <tr>
        <td>test1<td>
        <td>00.00.00<td>
    </tr> 
    <tr>
        <td>test2<td>
        <td>00.00.00<td>
    </tr>
    <tr>
        <td>test1<td>
        <td>00.00.01<td>
    </tr>
    <tr>
        <td>test2<td>
        <td>00.00.01<td>
    </tr> 
</table>

<script type="text/javascript" >
var seen = {};
    $('table tr ').each(function() {
       var txt = $(this).text();
       if (seen[txt]) $(this).remove();
       else seen[txt] = true;
    });
</script> 
```

我使用上面的 jquery 脚本进行了尝试，但在这种情况下失败了。我想仅根据第一列删除重复项。请问对此有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:37:13.940

改变：

```
var txt = $(this).text(); 
```

至：

```
var txt = $("td:first-child", $(this)).text(); 
```

[小提琴](http://jsfiddle.net/barmar/p72BB/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:37:25.007

使用该`map()`函数创建一个包含值和元素的对象数组。遍历此数组，将每个值与数组中的其他值进行比较，在`tr`遇到重复项时删除元素。

**还需要注意的是html有几个未闭合的`td`标签**

**Javascript**

```
var values = $("#test tr td:first").map(function(){
    return {e: this, val: $(this).html()};
});

$.each(values, function(i,e){
    $.each(values,function(ind,el){
        if(el.val == e.val){
           $(el.e).parents("tr").remove();
        }
    });
}); 
```

**HTML**

```
<table id="test" border="1">
<tr>
    <td>test1</td>
    <td>00.00.00</td>
</tr> 
<tr>
    <td>test2</td>
    <td>00.00.00</td>
</tr>
<tr>
    <td>test1</td>
    <td>00.00.01</td>
</tr>
<tr>
    <td>test2</td>
    <td>00.00.01</td>
</tr> 
</table> 
```

**工作示例** [http://jsfiddle.net/p72BB/3/](http://jsfiddle.net/p72BB/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T10:01:11.047

```
var arr = $("#test tr");

$.each(arr, function(i, item) {
    var currIndex = $("#test tr").eq(i);
    var matchText = currIndex.children("td").first().text();
    $(this).nextAll().each(function(i, inItem) {
        if(matchText===$(this).children("td").first().text()) {
            $(this).remove();
        }
    });
}); 
```

**[演示](http://jsfiddle.net/maheshsapkal/HL7p8/)**

# c# - 从高分板上添加和显示新统计数据

> ID：15945358
> 
> 赞同：0
> 
> 时间：2013-04-11T09:33:43.960
> 
> 标签：c#, php

现在我已经把我的高分板保存为一个 SQL 数据库，我通过 Unity 使用一些 PHP 脚本来访问它。我原来的记分板允许我存储用户名和他们的分数，但我正在尝试添加额外的字段，如准确性等。但是，我的新字段没有显示或传递到我的服务器。

我有两个名为 display.php 和 addcrore.php 的 PHP 脚本（拼写错误我会修复）。Display.php 如下所示：

```
<?php
// Send variables for the MySQL database class.
$database = mysql_connect('localhost', 'dark', 'dark') or die('Could not connect: ' . mysql_error());
mysql_select_db('dark') or die('Could not select database');

$query = "SELECT * FROM `scores` ORDER by `score` DESC LIMIT 5";
$result = mysql_query($query) or die('Query failed: ' . mysql_error());

$num_results = mysql_num_rows($result);  

for($i = 0; $i < $num_results; $i++)
{
     $row = mysql_fetch_array($result);
     echo $row['name'] . "\t" . $row['score'] . "\t" . $row['accuracy'] . "\n";
}
?> 
```

Addscrore.php 看起来像这样：

```
<?php 
        $db = mysql_connect('localhost', 'dark', 'dark') or die('Could not connect: ' . mysql_error()); 
        mysql_select_db('dark') or die('Could not select database');

        // Strings must be escaped to prevent SQL injection attack. 
        $name = mysql_real_escape_string($_GET['name'], $db); 
        $score = mysql_real_escape_string($_GET['score'], $db); 
     $accuracy = mysql_real_escape_string($_GET['accuracy'], $db);
        $hash = $_GET['hash']; 

        $secretKey="mySecretKey"; # Change this value to match the value stored in the client javascript below 

        $real_hash = md5($name . $score . $accuracy . $secretKey); 
        if($real_hash == $hash) 
     { 
            // Send variables for the MySQL database class. 
            $query = "insert into scores values (NULL, '$name', '$score', '$accuracy');"; 
            $result = mysql_query($query) or die('Query failed: ' . mysql_error()); 
        } 
?> 
```

然后，在我的 Unity 程序中，我使用以下代码创建了 HSController 类：

```
using UnityEngine;
using System.Collections;

public class HSController : MonoBehaviour 
{
private string secretKey = "mySecretKey"; // Edit this value and make sure it's the same as the one stored on the server
public string addScoreURL = "/score/addscrore.php?"; //be sure to add a ? to your url
public string highscoreURL = "highscoretable/display.php";

void Start()
{

    StartCoroutine(GetScores());
}

    // remember to use StartCoroutine when calling this function!
    public IEnumerator PostScores(string name, int score, float accuracy)
    {
        //This connects to a server side php script that will add the name and score to a MySQL DB.
        // Supply it with a string representing the players name and the players score.
        string hash = MD5.Md5Sum(name + score + accuracy + secretKey);

        string post_url = addScoreURL + "name=" + WWW.EscapeURL(name) + "&score=" + score + "&accuracy" + accuracy + "&hash=" + hash;

        // Post the URL to the site and create a download object to get the result.
        WWW hs_post = new WWW(post_url);
        yield return hs_post; // Wait until the download is done

        if (hs_post.error != null)
        {
            print("There was an error posting the high score: " + hs_post.error);
        }
    }

    // Get the scores from the MySQL DB to display in a GUIText.
    // remember to use StartCoroutine when calling this function!
   public IEnumerator GetScores()
    {
        gameObject.guiText.text = "Loading Scores";
        WWW hs_get = new WWW(highscoreURL);
        yield return hs_get;

        if (hs_get.error != null)
        {
            print("There was an error getting the high score: " + hs_get.error);
        }
        else
        {
            gameObject.guiText.text = hs_get.text; // this is a GUIText that will display the scores in game.
        }

     }
    } 
```

然后，当我想向我的表中添加一些新信息时，我调用以下代码行：

```
 string name = "Rawr";
    int score = 1325;
    float accuracy = 40.0f;
    HSController _test;

    // Use this for initialization
    void Start()
    {
        _test = new HSController();
        StartCoroutine(_test.PostScores(name, score,accuracy));
    } 
```

然而，尽管如此，我的新领域，准确性，仍然没有被展示出来。谁能看到我做错了什么以及为什么我调用它时没有显示我的新字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:35:55.430

可能根本不是原因，但是在 C# 中，当您构建帖子 URL 时，您缺少等号`"&accuracy"`

# android - 我如何知道相机在安卓设备上的位置？

> ID：15945360
> 
> 赞同：2
> 
> 时间：2013-04-11T09:33:48.273
> 
> 标签：android, android-camera

我正在构建一个 Android 应用程序，我在其中使用前置摄像头进行一些图像处理。

知道相机的位置对我来说很重要。例如，在三星 S3 上，它位于设备的上部，而在 Galaxy Note 10 上 - 它位于侧面。

这很重要，因此我可以知道相机预览缓冲区的方向和屏幕本身的方向（我希望 UI 始终相对于相机保持纵向，即 - 所以相机始终位于顶部）。

有任何想法吗？

编辑：我可以使用 Android 4 及更高版本（无需支持较低版本）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:51:55.050

除了来自android本身的参考之外，我认为没有办法找出相机在设备上的位置：http: [//developer.android.com/reference/android/graphics/Camera.html](http://developer.android.com/reference/android/graphics/Camera.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:55:51.770

正如其他人所说，位置本身并不重要，因为您只需获得方向等。

话虽如此，我之前从 StackOverflow 得到了这个方法（对开发它的人表示敬意），它就像一个魅力。只需在您的`surfaceCreated`回调中调用它。

```
 private void setCameraDisplayOrientation(Activity activity, int cameraId, android.hardware.Camera camera) {
            android.hardware.Camera.CameraInfo info = new android.hardware.Camera.CameraInfo();
            android.hardware.Camera.getCameraInfo(cameraId, info);
            int rotation = activity.getWindowManager().getDefaultDisplay().getRotation();
            int degrees = 0;
            switch (rotation) {
            case Surface.ROTATION_0:
                    degrees = 0;
                    break;
            case Surface.ROTATION_90:
                    degrees = 90;
                    break;
            case Surface.ROTATION_180:
                    degrees = 180;
                    break;
            case Surface.ROTATION_270:
                    degrees = 270;
                    break;
            }

            int result;
            if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
                    result = (info.orientation + degrees) % 360;
                    result = (360 - result) % 360; // compensate the mirror
            } else { // back-facing
                    result = (info.orientation - degrees + 360) % 360;
            }
            camera.setDisplayOrientation(result);
    } 
```

# javascript - jQuery 等待数百 $ ajax 全部完成

> ID：15945362
> 
> 赞同：0
> 
> 时间：2013-04-11T09:33:49.780
> 
> 标签：javascript, jquery, ajax, jquery-mobile

如果我等待两个 $ajax，我可以写 **$.when($.ajax(1),$.ajax(2)).then(myFunc, myFailure);** 但是我必须等待数百个$ajax，所以我制作了一个地图来执行，但是**var mapArray = $** .map总是为空。如何解决这个问题或者有更好的方法来解决它？

```
var times=0;
$("#pComplete").bind("click",
function(event, ui) {
    $.mobile.loading('show');
    db.readTransaction(function(tx) {
    tx.executeSql('select * from insphis insp where TaskNo='+localStorage.getItem("TaskNo"), [],
        function(tx, results) {
            var len = results.rows.length;
            //times=len;
            var arr=new Array();
            for (var i = 0; i < len; i++)
            {
                arr.push(results.rows.item(i));
            }

            var mapArray=$.map(arr, function(val, i){
                var str='http://192.168.1.29:9999/IInspectionService.svc/web/AddInspHis?taskNo=' + localStorage.getItem("TaskNo") + '&propNo=' + val.PropNo + '&value=' + val.Value + '&value2=' + val.Value2;
                    $.ajax({
                    type: 'GET',     
                    url: str,
                    contentType: 'text/json',
                    dataType: "jsonp",
                    jsonp: "callback",
                    async: true,
                    success: function(json) {
                    //  --times;
                        console.log(json);
                    //  if(times==0)
                    //  {
                    //      alert("OK!");
                    //      loadIndex();
                    //  }
                        }
                    });
            });
            $.when(mapArray).done(function(){
                    console.log("all OK");
                })
　               .fail(function(){ alert("ERROR"); });

        },
        null);//end of executeSql
        });
}); 
```

# php - 500 内部服务器错误 - dojo.js 还是我的 php 文件？

> ID：15945365
> 
> 赞同：1
> 
> 时间：2013-04-11T09:33:54.530
> 
> 标签：php, dojo, pdo

我有点问题。它是`500 Internal Server Error`。

这发生在我的开发过程中。我不知道是什么导致了这个问题。我正在使用 dojo、php 和 pdo。请看下图中的红色圆圈。这些圆圈表示我的 php 文件、dojo.js 和选定的项目。它发生在我选择了 dojo 组合框中的一项时。

你能指出问题的根源吗？

![500 内部服务器错误 - 标头](https://i.stack.imgur.com/xWJkO.png) ![500 内部服务器错误 - 发布](https://i.stack.imgur.com/r6SOd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:44:36.290

您的 test_MkTests.php 页面及其 javascript 加载正常。
然后javascript调用gatherbaches.php但http服务器给出500内部服务器错误。检查您的gatherbaches.php、php_error.log 和http 服务器错误日志。检查您的 FirePHP.class.php（612 行）

尝试直接在浏览器中加载gatherbaches.php 以检查它是否正常工作。

# sql - 选择特定 ID 后的行

> ID：15945367
> 
> 赞同：1
> 
> 时间：2013-04-11T09:34:02.073
> 
> 标签：sql, phpmyadmin, sql-order-by

我有一张这样的桌子：

```
+----------------+------------------------------+
|   product_id   |       product_date_added     |
+-----------------------------------------------+
|       2380     |      2012-07-19 00:00:00     |
|       2379     |      2012-07-19 00:00:00     |
|       2376     |      2012-07-19 00:00:00     |
|       2378     |      2012-07-19 00:00:00     |
|       2375     |      2012-07-19 00:00:00     |
|       2370     |      2012-07-19 00:00:00     |
|       2371     |      2012-07-19 00:00:00     |
|       2381     |      2012-07-03 00:00:00     |
|       ...      |              ...             |
+----------------+------------------------------+ 
```

我需要做的是检索 5 行 where `$date <= '2012-07-19 00:00:00'`. 然后我想上传我的列表以及接下来的 5 行，`$date <= '$Last_Retrieved_Product_Date'`其中我检索到的最后一个产品`$Last_Retrieved_Product_Date`在哪里。`product_date_added`

问题是，由于它们都有相同的日期（不幸的是它们都没有小时-分钟-秒），因此该查询每次都会检索相同的 5 行。

我试过的是`$date < '2012-07-19 00:00:00'`，但这会跳过，看着我的桌子，ids `2370`，`2371`直接去`2381`。

我还尝试选择行，`$date <= '$Last_Retrieved_Product_Date' AND product_id != 'Last_Product_ID'`但这将使我第一次检索`2380, 2379, 2376, 2378, 2375`，第二次检索`2379, 2376, 2378, 2375 2370`，所以我仍然会有重复。

是否有一条`SQL`语句可以让我在某个值之后检索所有 products_id？

例如，我可以按日期对表格进行排序，然后在`$Last_Retrieved_Product_ID`.

请注意，ID 没有排序，这意味着最新的`product_date_added`不对应于最高的`product_id`。

**编辑**

我希望有什么作为输出。

**第一个查询** `SELECT * FROM table Where product_date_added <= '2012-07-19 00:00:00'` 输出：

```
+----------------+------------------------------+
|   product_id   |       product_date_added     |
+-----------------------------------------------+
|       2380     |      2012-07-19 00:00:00     |
|       2379     |      2012-07-19 00:00:00     |
|       2376     |      2012-07-19 00:00:00     |
|       2378     |      2012-07-19 00:00:00     |
|       2375     |      2012-07-19 00:00:00     |
+----------------+------------------------------+ 
```

**第二次查询** `SELECT * FROM table Where product_date_added <= 'Last_Retrieved_Product_Date'`。

行的`Last_Retrieved_Product_Date`在哪里`product_date_added``product_id = '2375'`

所需的输出：

```
+----------------+------------------------------+
|   product_id   |       product_date_added     |
+-----------------------------------------------+
|       2370     |      2012-07-19 00:00:00     |
|       2371     |      2012-07-19 00:00:00     |
|       2381     |      2012-07-03 00:00:00     |
|       ...      |              ...             |
+----------------+------------------------------+ 
```

实际输出：

```
+----------------+------------------------------+
|   product_id   |       product_date_added     |
+-----------------------------------------------+
|       2380     |      2012-07-19 00:00:00     |
|       2379     |      2012-07-19 00:00:00     |
|       2376     |      2012-07-19 00:00:00     |
|       2378     |      2012-07-19 00:00:00     |
|       2375     |      2012-07-19 00:00:00     |
+----------------+------------------------------+ 
```

我正在使用 PHPMyAdmin。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:20:20.180

我发现`LIMIT`可以设置上限和下限。所以我只需要这样做：

```
SELECT * FROM table Where product_date_added <= '2012-07-19 00:00:00' LIMIT 0, 5 
```

并进入第二个查询：

```
SELECT * FROM table Where product_date_added <= '2012-07-19 00:00:00' LIMIT 5, 10 
```

感谢[Dan Bracuk](https://stackoverflow.com/users/1832636/dan-bracuk)的建议。

# html - Drupal 7：站点名称中的 HTML 显示在页面标题中

> ID：15945371
> 
> 赞同：0
> 
> 时间：2013-04-11T09:34:17.157
> 
> 标签：html, drupal, drupal-7, title

我在 Drupal 7 中使用 Bartik 的子主题。当我在配置/站点信息中设置站点名称时，我使用了一些跨度标签。在标题中显示站点名称的情况下它可以正常工作，但是浏览器中的页面标题在显示站点名称时会显示 HTML 代码。我查看了 Drupal 文档，它说：

> “注意：$title 被解释为 HTML。如果您有明文字符串，例如 $node->title，则必须使用 check_plain 转义它们或在 t()> 中使用正确的占位符，然后再将它们传递给 drupal_set_title()。如果你不这样做，用户可以对你的站点执行跨站点脚本攻击。”

这让我更加困惑，因为它说标题被解释为 HTML。有谁知道我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:49:14.917

对于诸如页面标题之类的关键内容使用 HTML 格式的字符串对于任何 CMS 在任何方面都是一个坏主意：安全性、索引/SEO、数据库完整性、内容完整性以及内容和表示的分离。Drupal 在清理它的字符串时很谨慎，所以你已经把以前的脑袋烧坏了。

这纯粹是一个演示问题，只需使用 jquery 或类似工具来为您的用户实现相同的效果。顺便说一句，这将使您可以更灵活地以您或您的客户尚未指定的方式将此内容重新用于其他地方。

# c# - wcf 复杂类型的序列化问题

> ID：15945377
> 
> 赞同：1
> 
> 时间：2013-04-11T09:34:27.223
> 
> 标签：c#, wcf, fluent-nhibernate, datacontractserializer, complextype

[可能是这个问题](https://stackoverflow.com/questions/8794594/type-not-expected-using-datacontractserializer-but-its-just-a-simple-class)的副本

我正在尝试`DataSerializer`使用与`wcf`.

对象结构：

```
[KnownType(typeof(PersonnelClassProperty))]
[KnownType(typeof(ResourceClassProperty))]
[KnownType(typeof(Person))]
[KnownType(typeof(PersonProperty))]
[KnownType(typeof(ResourceDefinitionProperty))]
[DataContract]
public class Person: ResourceDefinition
{
   [DataMember]
   public guid id {get; set;}

   [DataMember]
   public IList<PersonProperty> personProperties {get; set;}

   [DataMember]
   public IList<PersonnelClass> personnelClasses {get; set;}
} 
```

人员属性：资源定义属性

*   PersonnelClassProperty

人员类：资源类

*   人
*   PersonnelClassProperty

人员类属性：资源类属性

上面的结构是使用映射的`Nhibernate`。所以基类`abstract classes`具有我们覆盖到主类中的基本属性。我们正在使用它，所以我们可以使用一个通用类来调用`Nhibernate`.

这带来的第一个问题是循环引用，我们解决了这个问题。通过重置对象列表，我们消除了循环引用问题。

我们还循环遍历属性和关联的类属性来获取它们，因为它们正在被延迟加载`nHibernate`

这使我能够生成一些测试数据。我们现在有一个`personnelclass`带有`personnelclassproperty`. 这些都可以自行检索。接下来我们有一个`person`. 我们添加了对`personnelclass`和的引用`personnelclassproperty`。在数据库中，我们有一个额外的表，其中包含 person 和 之间链接的引用`personnelclass`，因为这是一个`many-to-many relationShip`. the`personProperty`引用了 single `personnelClassproperty`，所以 a`FK`在这里就足够了。

在这里，我们遇到了第二个问题，出现了序列化异常：

> 不需要数据合同名称为“PersonnelClassPropertyProxy: [http://schemas.datacontract.org/2004/07/](http://schemas.datacontract.org/2004/07/) ”的“PersonnelClassPropertyProxy”。考虑使用 DataContractResolver 或将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。

因此，从第一行中提到的问题中，我开始将`[DataContract]`,`[DataMember]`和`[KnownType(typeof(T))]`属性添加到上述类中。where`T`当然是正确的类型。

发生的情况是，我们通过 wcf 将 person 对象发送给接收方，如果`personProperty`和之间没有链接，这可以正常工作`personnelClassProperty`，但是如果我们添加`personproperty`带有 的链接的`PersonnelClassProperty`，我们会得到上面提到的异常。

我在网上看到的所有例子和问题都以同样的方式工作

如此具体；我究竟做错了什么？或者我在这里忘记了什么？

我将尝试用更多代码来更新问题，以说明我们使用的对象。

**编辑：**我更新了`Person`对象的结构以显示我对`KnownTypes`. 请注意，这也包含`personnelClassProperty`类型，我也为`PersonProperty`对象执行了此操作，因为那是包含`PersonnelClassProperty`对象的实际类，但`personProperties`在`Person`. 这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:36:22.703

我找到了解决方案。因为我们在使用`NHibernate`，所以我们`lazy loading`进入`personnelClassProperty`了`Personproperty`并最终进入了`Person`。这导致`serialization exception`.

实际上有2个解决方案可以解决异常：

1：可以设置`Not.LazyLoad()`属性而不是`LazyLoad()`在对象到NHibernate的映射

2：您可以`Lazyload()`启用该属性，而是从对象中获取一个项目并在尝试序列化之前对其进行处理。像这样创建一个新变量是不够的：

```
PersonnelClassProperty classproperty = personProperty.PersonnelClassProperty; 
```

你真的必须对内部对象做一些事情，就像这样：

```
PersonnelClassProperty classProperty = personProperty.PersonnelClassProperty;
System.Diagnostics.Debug.WriteLine(classproperty.Dbid); 
```

我们目前选择使用该`.Not.Lazyload()`选项

# php - 获取纬度和经度数据的问题

> ID：15945381
> 
> 赞同：0
> 
> 时间：2013-04-11T09:34:57.130
> 
> 标签：php, mysql, latitude-longitude

我有点奇怪的问题。我在我的 php.ini 中获取地方的纬度和经度。demo经纬度是这样的

```
Latitude 20º 24.002' N

Longitude 87º 18.135' W 
```

问题是因为`º`没有检索到数据。如何获得纬度`º`？

这是我的查询

```
$sql = "select * from tbl_site where sit_id =".$_GET[id]; 
```

获取数据后，我有这个数组： -

```
{"item":{"sit_id":"3","sit_title":"title","sit_image":"img2.jpg","sit_zon_id":"1‌​","sit_access":"Boat","sit_rating":"5","sit_experience":"all divers","sit_latitude":null,"sit_longitude":null}} 
```

从数据库获取并解析为 JSON 的代码：

```
$dbh = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$stmt = $dbh->prepare($sql);
$stmt->bindParam("id", $_GET[id]);
$stmt->execute();
$employee = $stmt->fetchObject(); $dbh = null;
echo '{"item":'. json_encode($employee) .'}'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:59:07.570

首先 utf8_encode 您的 php 代码，而不是尝试使用 java-script 或字符串替换进行解码

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-11T10:01:34.673

在这种情况下，您可以使用[***GEOMETRY 空间扩展***](http://dev.mysql.com/doc/refman/5.0/en/spatial-extensions.html)来存储纬度、经度。

要在地图上存储一个点，您可以使用`POINT(long,lat)`.

并且，将您的纬度、经度从度数转换为小数。

因此，您的每个点应如下所示：

```
POINT(20.xxxx, 87.xxxx); 
```

# java - 使用 xuggle 将 mp3 转换为 wav 获取异常

> ID：15945387
> 
> 赞同：3
> 
> 时间：2013-04-11T09:35:11.797
> 
> 标签：java, audio, ffmpeg, converter, xuggler

我正在尝试将 mp3 转换为 wav，代码在这里：

```
String mp3 = "F:\\work\\pic2talk38512.mp3";
String wav = "F:\\work\\pic2talk38512.wav";
TranscodeAudioAndVideo.transcodeTest(mp3, wav);

public static void transcode(String sourceUrl, String destinationUrl) {
    IMediaReader reader = ToolFactory.makeReader(sourceUrl);
    reader.addListener(ToolFactory.makeWriter(destinationUrl, reader));

    while (reader.readPacket() == null)
            do {
            } while (false);
} 
```

我得到了这个例外：

```
java.lang.UnsupportedOperationException: could not guess codec
at com.xuggle.xuggler.IContainerFormat.establishOutputCodecId(IContainerFormat.java:454)
at com.xuggle.xuggler.IContainerFormat.establishOutputCodecId(IContainerFormat.java:327)
at com.xuggle.xuggler.IContainerFormat.establishOutputCodecId(IContainerFormat.java:300)
at com.xuggle.mediatool.MediaWriter.addStreamFromContainer(MediaWriter.java:1134)
at com.xuggle.mediatool.MediaWriter.getStream(MediaWriter.java:1039)
at com.xuggle.mediatool.MediaWriter.encodeVideo(MediaWriter.java:742)
at com.xuggle.mediatool.MediaWriter.encodeVideo(MediaWriter.java:783)
at com.xuggle.mediatool.MediaWriter.onVideoPicture(MediaWriter.java:1434)
at com.xuggle.mediatool.AMediaToolMixin.onVideoPicture(AMediaToolMixin.java:166)
at com.xuggle.mediatool.MediaReader.dispatchVideoPicture(MediaReader.java:610)
at com.xuggle.mediatool.MediaReader.decodeVideo(MediaReader.java:519)
at com.xuggle.mediatool.MediaReader.readPacket(MediaReader.java:475)
at com.renren.intl.soundsns.pictalk.utils.TranscodeAudioAndVideo.transcodeTest(TranscodeAudioAndVideo.java:75)
at com.renren.intl.soundsns.pictalk.utils.TranscodeAudioAndVideoTest.convert(TranscodeAudioAndVideoTest.java:12)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我知道xuggle可以通过扩展来计算转换。但是为什么这次失败了？

谢谢

编辑：

以前我可以将 mp3 which params(MPEG 22.1KHZ 32kbps) 转换为 wav，但是如果我使用 mp3(MPEG 44.1KHZ 62kbps) 我得到了这个例外？

这是怎么发生的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:43:21.280

在这，基本上 xuggle 是在抱怨你的编解码器。我认为你需要试试这个代码

```
String mp3 = "F:\\work\\pic2talk38512.mp3";

String wav = "F:\\work\\pic2talk38512.wav";    
IMediaReader mediaReader = ToolFactory.makeReader(mp3);
            IMediaWriter mediaWriter = ToolFactory.makeWriter(wav, mediaReader);
            mediaReader.addListener(mediaWriter);
            // IMediaViewer mediaViewer = ToolFactory.makeViewer(true);
            // mediaReader.addListener(mediaViewer);
            while (mediaReader.readPacket() == null); 
```

我希望你正在使用`xuggle-xuggler-5.4.jar`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:38:42.333

## 更新：

```
import com.xuggle.mediatool.IMediaReader;
import com.xuggle.mediatool.IMediaViewer;
import com.xuggle.mediatool.IMediaWriter;
import com.xuggle.mediatool.ToolFactory;
public class TranscodingExample {
    private static final String inputFilename = "c:/myvideo.mp4";
    private static final String outputFilename = "c:/myvideo.flv";
    public static void main(String[] args) {// create a media reader
        IMediaReader mediaReader =
               ToolFactory.makeReader(inputFilename);
        // create a media writer
        IMediaWriter mediaWriter =
               ToolFactory.makeWriter(outputFilename, mediaReader);
        // add a writer to the reader, to create the output file
        mediaReader.addListener(mediaWriter);
        // create a media viewer with stats enabled
        IMediaViewer mediaViewer = ToolFactory.makeViewer(true);
        // add a viewer to the reader, to see the decoded media
        mediaReader.addListener(mediaViewer);
        // read and decode packets from the source file and
        // and dispatch decoded audio and video to the writer
        while (mediaReader.readPacket() == null) ;
    } 
} 
```

这是取自 Java Code Geeks 的代码。尝试更改 mp3 文件的路径，看看是否适合您

## 代码工作证明

![在此处输入图像描述](https://i.stack.imgur.com/n6GZC.png)

## 将 mp3 @ 64kbps 转换为 wav

![在此处输入图像描述](https://i.stack.imgur.com/nRpMR.png)

# python - Python 导入模块与导入 _module

> ID：15945390
> 
> 赞同：1
> 
> 时间：2013-04-11T09:35:48.600
> 
> 标签：python, python-import, python-module

在 Aptana 中配置 PyDev 的[Forced Builtins](http://pydev.org/manual_101_interpreter.html#PyDevInterpreterConfiguration-ForcedBuiltins)时，我注意到默认情况下使用`_`（下划线）前缀引用了一些模块。

所以我打开了一个 Python 解释器，令我惊讶的是，下面的导入工作：

```
import ast
import _ast
import bisect
import _bisect
import csv
import _csv
# ... and so on 
```

现在，如果我`dir()`对导入的模块执行操作，我会看到不同的内容：

```
>>> dir(csv)
['Dialect', 'DictReader', 'DictWriter', 'Error', ...] # and so on
>>> dir(_csv)
['Dialect', 'Error', ...] # node that DictReader and DictWriter are missing 
```

最后， help() 告诉我它们显然是不同的模块：

```
>>> help(_csv)
Help on module _csv:

NAME
    _csv - CSV parsing and writing.

FILE
    /usr/lib64/python2.6/lib-dynload/_csv.so
...

>>> help(csv)
Help on module csv:

NAME
    csv - CSV parsing and writing.

FILE
    /usr/lib64/python2.6/csv.py
... 
```

`import module`那么，和有什么区别`import _module`呢？它背后是否有约定或类似的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T09:37:51.247

一些模块使用*一些*C 代码来实现需要速度的部分。主*模块*仍然使用 Python 胶水，`_module`版本包含 C 扩展。

参见例如[`csv.py`模块](http://hg.python.org/cpython/file/2.7/Lib/csv.py)；它从[`_csv.c`C 库](http://hg.python.org/cpython/file/2.7/Modules/_csv.c)中导入大部分功能，只有`Dialect`、和类在纯 Python 中实现。`Sniffer``DictReader``DictWriter`

加`module`号`_module`约定就是这样，约定。并非所有 C 扩展都遵循这种模式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T09:37:38.727

`_module`通常是用 C 编写的模块的一部分。`module`是围绕它的 python 包装器。您永远不需要导入`_modules`自己。

# android - java.lang.String 类型的 Android Value ... 无法转换为 JSONArray

> ID：15945394
> 
> 赞同：6
> 
> 时间：2013-04-11T09:35:56.270
> 
> 标签：android, json, wcf, arrays

我的项目有一个 WCF 从数据库中获取记录并以 JSON 格式返回，如下所示：

```
{"GetNotesResult":"[{\"ID\":1,\"Title\":\"Note 1\",\"Content\":\"Hello Vu Chien Thang\",\"CreatedBy\":\"thangvc\"},{\"ID\":2,\"Title\":\"Note 2\",\"Content\":\"Hello Nguyen Thi Ngoc\",\"CreatedBy\":\"thangvc\"}]"} 
```

我还有一个使用 JSON 的 android 应用程序，这是我的代码：

```
private JSONArray getNotes(String UserName, String Password) {
        JSONArray jarray = null;
        JSONObject jobj = null;
        try{
            StringBuilder builder = new StringBuilder(URL);
            builder.append("UserName=" + loggedInUser.getUserName());
            builder.append("&");
            builder.append("Password=" + loggedInUser.getPassword());

            HttpClient client = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(builder.toString());
            HttpResponse response = client.execute(httpGet);

            int status = response.getStatusLine().getStatusCode();

            if(status==200)
            {
                HttpEntity entity = response.getEntity();
                String data = EntityUtils.toString(entity,"utf-8");
                jobj = new JSONObject(data);
                jarray = jobj.getJSONArray("GetNotesResult");
            }
            else
            {
                Toast.makeText(MainActivity.this, "Error", Toast.LENGTH_SHORT).show();
            }
        }
        catch(ClientProtocolException e)
        {
            Log.d("ClientProtocol",e.getMessage());
        }
        catch(IOException e)
        {
            Log.d("IOException", e.getMessage());
        }
        catch(JSONException e)
        {
            Toast.makeText(MainActivity.this, e.getMessage(), Toast.LENGTH_LONG).show();
        }
        catch(Exception e)
        {
            Log.d("Unhandle Error", e.getMessage());
        }
        return jarray;
    } 
```

我设置断点`jarray = jobj.getJSONArray("GetNotesResult");`并从以下位置获取此消息`JSONException`：

```
Value [{"ID":1,"Title":"Note 1","Content":"Hello Vu Chien Thang","CreatedBy":"thangvc"},{"ID":2,"Title":"Note 2","Content":"Hello Nguyen Thi Ngoc","CreatedBy":"thangvc"}] at GetNotesResult of type java.lang.String cannot be converted to JSONArray 
```

我试图复制 JSON 字符串并粘贴到[http://jsonviewer.stack.hu/](http://jsonviewer.stack.hu/)的在线 JSON 解析器网站，它解析得很好。请帮我解决这个问题！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-11T09:40:41.630

在您的 json 中， 的值`GetNotesResult`包含在其中，`""`因此它被视为字符串而不是数组。

被解析为一个数组，它应该是..

```
{"GetNotesResult":[{\"ID\":1,\"Title\":\"Note 1\",\"Content\":\"Hello Vu Chien Thang\",\"CreatedBy\":\"thangvc\"},{\"ID\":2,\"Title\":\"Note 2\",\"Content\":\"Hello Nguyen Thi Ngoc\",\"CreatedBy\":\"thangvc\"}]} 
```

所以解决方案是两件事之一：

1.  如果您可以修改服务器响应，请删除`""`json 数组周围的 from 。或者
2.  首先将其解析为字符串，然后从该字符串创建一个 json 数组。

    ```
    String notes = jobj.getString("GetNotesResult");
    jarray = new JSONArray(notes); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:40:59.927

我尝试将其粘贴到[http://jsonviewer.stack.hu/](http://jsonviewer.stack.hu/)中，但没有成功。

为了使它工作，我必须替换所有`\"`to然后从之前和`"`之后删除`"`符号`[``]`

像这样：

```
{"GetNotesResult":[{"ID":1,"Title":"Note1","Content":"HelloVuChienThang","CreatedBy":"thangvc"},{"ID":2,"Title":"Note2","Content":"HelloNguyenThiNgoc","CreatedBy":"thangvc"}]} 
```

# r - 使用函数对向量的每个级别进行子集化并返回一个新的数据帧（在 R 中）

> ID：15945396
> 
> 赞同：2
> 
> 时间：2013-04-11T09:35:59.293
> 
> 标签：r, subset

我有一个简单的数据框，其中包含两个向量“速度”和“ID”，如下所示：

```
mydata
ID     Speed
1   1  6.031847
2   1  7.050654
3   1  7.769475
4   1  8.838968
5   1  9.956571
6   1 11.146864
7   1 11.967616
8   1 13.078422
9   1 14.214301
10  1 14.974159
11  2 16.048627
12  2 17.070484
..  . ......... 
```

我想使用以下方法制作速度值前 20% 的数据帧的子集：

```
subset0.20<-subset(mydata, Speed > quantile(Speed, prob = 1 - 20/100, na.rm=T)) 
```

但我不希望它用于整个数据集，因为这会给我返回每个 ID 的不相等数量的值。

因此，必须为每个 ID 计算前 20% 的值，然后将每个 ID 的结果组合到一个新的数据帧中。然后这个数据框将包含 8 行（这是我的原始数据集的 20%，它有 40 行）

所以我做了一些指甲咬伤并拔出一些头发并尝试了“for循环”，例如：

```
for(i in 1:length(ID)){
   subset0.80<-subset(mydata[i], GForce > quantile(Speed, prob = 1 - 20/100, na.rm=T))
     } 
```

和应用之类的东西：

```
apply(mydata$Speed, 1 ,function(x) (subset(x > quantile(Speed, prob = 1 - 20/100, na.rm=T)))) 
```

但我只是对 R 缺乏经验才能让它发挥作用。任何可以帮助我并向我解释我在这里做错的事情的人吗？

```
dput(mydata)
structure(list(ID = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 
2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 
4, 4, 4, 4, 4, 4), Speed = c(6.03184705225504, 7.05065401832249, 
7.76947483668907, 8.83896842017956, 9.95657139135043, 11.1468640558647, 
11.9676155772803, 13.0784218506988, 14.2143010441769, 14.9741594881612, 
16.0486271520862, 17.0704843261466, 17.9324808839116, 19.1169673939822, 
20.0528330256269, 20.9320440815571, 22.0379467007031, 22.962355355126, 
24.0764744246649, 25.1182530133201, 26.0456043859692, 26.9528777031822, 
27.9414746553538, 29.129640434174, 29.9443040639644, 30.9226103003052, 
31.9932286699133, 32.9925644101585, 33.9930708538141, 35.0124438238874, 
35.9215486087666, 36.9015465999988, 38.1044534443389, 39.0368063088987, 
40.272189714015, 40.8993100278334, 41.9790311160737, 43.1027190745506, 
43.8575622361406, 45.0499599122387)), .Names = c("ID", "Speed"
), row.names = c(NA, -40L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:42:38.670

使用`by`，您可以`subset`为每个 ID 调用函数。然后你可以`bind`使用`do.call`which 将结果转换`list`为 a `data.frame`。

你可以这样做：

```
do.call(rbind,by(mydata,mydata$ID,FUN= function(x)
      subset(x, Speed > quantile(Speed, prob = 1 - 20/100, na.rm=T))))

     ID    Speed
1.9   1 14.21430
1.10  1 14.97416
2.19  2 24.07647
2.20  2 25.11825
3.29  3 33.99307
3.30  3 35.01244
4.39  4 43.85756
4.40  4 45.04996 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T09:46:13.920

有*几种*方法可以做到这一点（太多了，可能会令人困惑）。这是一个使用`ave`：

```
GetMe <- with(mydata, 
              ave(Speed, ID, FUN = function(x) 
                x > quantile(x, prob = 1 - 20/100, na.rm = TRUE)))

mydata[GetMe == 1, ]
#    ID    Speed
# 9   1 14.21430
# 10  1 14.97416
# 19  2 24.07647
# 20  2 25.11825
# 29  3 33.99307
# 30  3 35.01244
# 39  4 43.85756
# 40  4 45.04996 
```

这个`data.table`包也很适合这个：

```
library(data.table)
DT <- data.frame(mydata)
DT[, list(Speed = Speed[Speed > quantile(Speed, prob = 1 - 20/100, na.rm = TRUE)]), by = "ID"]
#    ID    Speed
# 1:  1 14.21430
# 2:  1 14.97416
# 3:  2 24.07647
# 4:  2 25.11825
# 5:  3 33.99307
# 6:  3 35.01244
# 7:  4 43.85756
# 8:  4 45.04996 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T09:47:30.630

一种方法是使用`split`您的数据`ID`，然后`lapply`在数据框的结果列表中使用以找到您的前 20% 分位数。最后，使用`do.call`and`rbind`将结果绑定在一起。

```
result <- do.call(rbind, lapply(split(mydata, mydata$ID), function(X) {
    subset(X, Speed > quantile(Speed, prob = 1 - 20/100, na.rm = T))
}))

result
##      ID    Speed
## 1.9   1 14.21430
## 1.10  1 14.97416
## 2.19  2 24.07647
## 2.20  2 25.11825
## 3.29  3 33.99307
## 3.30  3 35.01244
## 4.39  4 43.85756
## 4.40  4 45.04996 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-11T09:51:26.703

尝试这个

```
library(plyr)

> ddply(mydata, .(ID), function(x) subset(x, Speed > quantile(Speed, prob = 1 - 20/100, na.rm=T)))
  ID    Speed
1  1 14.21430
2  1 14.97416
3  2 24.07647
4  2 25.11825
5  3 33.99307
6  3 35.01244
7  4 43.85756
8  4 45.04996 
```

@SimonO101

尝试使用`melt`from`reshape2`

```
res <- aggregate( Speed ~ ID , data = mydata , function(x) { y <- rev( seq( length(x) , by = -1 ,length.out =(length(x) / 5) ) )  ; cbind(x[y[1]],x[y[2]]) })

> melt(res, id.vars="ID")
  ID variable    value
1  1    Speed 14.21430
2  2    Speed 24.07647
3  3    Speed 33.99307
4  4    Speed 43.85756
5  1    Speed 14.97416
6  2    Speed 25.11825
7  3    Speed 35.01244
8  4    Speed 45.04996 
```

可能，在那之后，您可能想要删除第二列:-)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-11T10:01:33.990

我勒个去。`aggregate`这是使用R的单行解决方案`base`。每个 ID 一行的数据格式略有不同，每个速度值在它自己的列中：

```
aggregate( Speed ~ ID , data = mydata , function(x) { y <- rev( seq( length(x) , by = -1 ,length.out =(length(x) / 5) ) )  ; cbind(x[y[1]],x[y[2]]) } )

  ID  Speed.1  Speed.2
#1  1 14.21430 14.97416
#2  2 24.07647 25.11825
#3  3 33.99307 35.01244
#4  4 43.85756 45.04996 
```

# bash - 对 awk 使用彩色输出，或在条件中使用 grep 多模式搜索

> ID：15945400
> 
> 赞同：11
> 
> 时间：2013-04-11T09:36:15.967
> 
> 标签：bash, awk, grep

对于我的工作，我经常在文件中搜索模式。通常我使用`grep --color=auto`为搜索模式着色。现在，当我搜索多个模式时，所有这些模式都应该出现在一行中，我使用`grep pattern1 file|grep pattern2|grep pattern3`or `awk '/pattern1/&&/pattern2'`。但是这样，在 grep 中我失去了对我非常有帮助的着色，或者在 awk 中，我不知道有任何方法只为模式字符串着色。当它变得太麻烦时，我使用`grep pattern1 file|grep pattern2|grep pattern3|grep -E "pattern1|pattern2|pattern3"`.

那么在 grep 中有没有办法在和条件中提及多个模式？（我认为正则表达式应该支持它，但找不到任何，特别是模式的顺序不固定）

或者有什么方法可以彩色打印 awk 搜索模式？

欢迎任何简短的紧凑方法（因为我每天会使用很多次）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T10:14:04.010

您可以`--color=always`在从 grep 管道时使用以保留颜色：

```
grep pat1 --color=always | grep pat2 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-11T10:08:36.403

您可以构建自己的`shell script/function`使用`awk`和转义代码：

给定文件`Awk color text`，以下内容将以`Awk`青色打印匹配的单词：

```
$ awk '/Awk/{gsub(/Awk/,"\033[1;36m&\033[1;000m");print}' file
Awk color test 
```

这个原则可以很容易地扩展到添加`This line ends here`到第一行的多个模式。

```
$ awk '/Awk/&&/This/{gsub(/Awk|This/,"\033[1;36m&\033[1;000m");print}' file
Awk color test This line ends here. 
```

[在这里](http://tldp.org/HOWTO/Bash-Prompt-HOWTO/x329.html)查看更多关于外壳颜色的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-05T16:38:37.457

您还可以使用花括号进行参数扩展：

```
grep --color=always -e{pat1,pat2} 
```

这实际上与以下内容相同：

```
grep --color=always -e foo -e bar 
```

请注意，这将返回带有`pat1`AND/OR的结果`pat2`。

（我没有足够的声望点来添加这篇文章作为评论）

# c++ - Karp Rabin 中的素数和块长度

> ID：15945401
> 
> 赞同：1
> 
> 时间：2013-04-11T09:36:17.760
> 
> 标签：c++, algorithm, math, hash, rabin-karp

[我从那个](http://www.geeksforgeeks.org/searching-for-patterns-set-3-rabin-karp-algorithm/)站点找到了一个 rabin karp 代码并改为尝试。修改后的代码如下。您可以在 hashtable.txt 中查看单词及其哈希值。对于下面的示例 hashtable.txt 似乎是正确的。

但是当我将 M（块长度）更改为 150 时，我得到了错误的结果。例如，在 hashtable.txt 中，第一行和第六行必须相同，但它们的哈希值不同。

或者当我将 q （质数）更改为 683303 时，它也会得到错误的结果。

rabin karp算法中素数和块长度之间的关系是什么，错误结果的原因是什么？

```
#include<stdio.h>
#include<string.h>
#include <fstream>
#include <iostream>
// d is the number of characters in input alphabet
#define d 256 
int M = 80;
/*  
txt  -> text
q    -> A prime number
*/
using namespace std;

void writeTable(char *txt, int q)
{
ofstream myfile;
myfile.open ("hashtable.txt");
int N = strlen(txt);
int i, j;
int t = 0; // hash value for txt
int h = 1;

// The value of h would be "pow(d, M-1)%q"
for (i = 0; i < M-1; i++)
    h = (h*d)%q;

// Calculate the hash value of pattern and first window of text
for (i = 0; i < M; i++)
{
    t = (d*t + txt[i])%q;
}

// Slide the pattern over text one by one 
for (i = 0; i <= N - M; i++)
{
    myfile << t <<" ";
    for (long z = i; z < M+i; z++){myfile<<txt[z];}myfile<<"\n";

    // Calulate hash value for next window of text: Remove leading digit, 
    // add trailing digit           
    if ( i < N-M )
    {
        t = (d*(t - txt[i]*h) + txt[i+M])%q;

        // We might get negative value of t, converting it to positive
        if(t < 0) 
          t = (t + q); 
    }
}

myfile.close();
}

/* Driver program to test above function */
int main()
{
    char *txt ="abcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcde";

int q = 683303;  // A prime number

writeTable(txt, q);

printf("finish");
getchar();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T10:07:04.790

计算

```
t = (d*(t - txt[i]*h) + txt[i+M])%q; 
```

可以溢出。的最大值`txt[i]`是`d-1`，并且`h`可以大到`q-1`。所以如果`(q-1)*(d-1)*d > INT_MAX`，就有整数溢出的可能。这限制了可以安全选择的素数的大小`INT_MAX/(d*(d-1)) + 1`。

如果`q`大于那，那对 的允许值有限制`M`，即`M`必须是这样的

```
h <= INT_MAX/(d*(d-1)) 
```

以安全地防止溢出。

与`q = 683303`，`M = 80`你得到`h = 182084`和

```
h*d*(d-1) = 182084 * 256 * 255 = 11886443520 
```

大于通常的 32 位宽`INT_MAX`。`int`

如果您`int`的 s 是 32 位宽，则示例从一开始就有溢出，因为`h*256*97 = 4521509888 > 2147483647`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:06:04.117

“块长度”是模式的长度。由于您的代码中没有任何模式，因此数字 150 没有意义，除非这是您打算使用的模式的实际长度。

散列值必须取决于被散列的数据及其数量。因此，“abcde”、“abcd”、“abc”的哈希值可能都不同。

在此算法中，您可以通过首先比较两者的哈希值来避免将模式与文本的相同长度部分进行不必要的比较。

如果哈希值不同，您就知道这两个字符序列是不同的并且没有匹配项，因此您可以移动到文本中的下一个位置并重复该过程。

如果哈希匹配，则您可能会匹配两个字符序列，然后您将它们进行比较以查看是否存在真正的匹配。

这是算法的主要思想，这也是它比子字符串搜索的幼稚实现更快的原因。

在计算哈希时除以素数的目的是为了尝试获得更均匀的哈希值分布。如果你选择一个非常大的素数，它不会有太大的影响。如果您选择一个非常小的素数，则会减少哈希值的总数，并增加哈希匹配的几率，从而增加进行不必要的子字符串比较的几率。

# java - 基于 Enum 的 Jackson 多态反序列化

> ID：15945404
> 
> 赞同：39
> 
> 时间：2013-04-11T09:36:26.417
> 
> 标签：java, json, polymorphism, jackson

我正在使用[JacksonPolymorphicDeserialization](https://github.com/FasterXML/jackson-docs/wiki/JacksonPolymorphicDeserialization)，这是我的代码，它反序列化为基于“类型”属性的正确类：

```
@JsonTypeInfo(  
    use = JsonTypeInfo.Id.NAME,  
    include = JsonTypeInfo.As.PROPERTY,  
    property = "type",
    defaultImpl = Event.class, 
    visible = true)  
@JsonSubTypes({        
    @Type(value = SpecialEvent1.class, name = "SPECIAL_EVENT_1"), 
    @Type(value = SpecialEvent2.class, name = "SPECIAL_EVENT_2"), 
    })  
public abstract class AbstractEvent {

    private String type;

    public String getType() {
    return type;
    }

    public void setType(String type) {
    this.type = type;
    }   
} 
```

它工作得很好，我的 json 根据“类型”值变成了预期的类。

但是，我正在考虑将 'type' 属性从 String 移动到 Enum，这是我进行此更改的新代码：

```
@JsonTypeInfo(  
    use = JsonTypeInfo.Id.NAME,  
    include = JsonTypeInfo.As.PROPERTY,  
    property = "type",
    defaultImpl = Event.class, 
    visible = true)  
@JsonSubTypes({        
    @Type(value = SpecialEvent1.class, name = "SPECIAL_EVENT_1"), 
    @Type(value = SpecialEvent2.class, name = "SPECIAL_EVENT_2"), 
    })  
public abstract class AbstractEvent {

    private EventType type;

    public EventType getType() {
    return type;
    }

    public void setType(EventType type) {
    this.type = type;
    }   
} 
```

和枚举：

```
public enum EventType {
    SPECIAL_EVENT_1,
    SPECIAL_EVENT_2,
    EVENT;
} 
```

问题是第二种方法不起作用……知道为什么吗？？？我可以在这里使用枚举吗？？？

谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-11T10:32:41.483

固定的！

它适用于杰克逊 2.0！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-06-09T08:43:12.517

它对我使用 enum 和以下内容有用：

```
@JsonTypeInfo(  
    use = JsonTypeInfo.Id.NAME,  
    include = JsonTypeInfo.As.EXISTING_PROPERTY,  
    property = "type",
    visible = true
) 
```

在这里，我正在使用`com.fasterxml.jackson.annotation`Jackson Annotations。

# sql - 如何处理数据库中的状态 ID

> ID：15945412
> 
> 赞同：0
> 
> 时间：2013-04-11T09:37:02.527
> 
> 标签：sql, database, data-structures

假设我在 db`'Product'`和`'Status'`.

```
'Product' design is: Id, Name StatusId

'Status' design is: Id, Name 
```

**“状态”数据是（例如）：1-预留，2-已付费**

**问题是：**当我想从 UI 中保留一些产品时，如何从状态表中获取正确的 ID？如何处理它们？

我有一些解决方案：请记住，1 是储备，2 是付费。另一种是使用'Key'，但问题是：将来您可能会添加另一个状态，例如3-Returned。

**编辑：**

感谢您的回答，但问题是关于另一个问题。当您想要时会出现此问题`Create new UI for reservation only`，例如您为用户数据（用户名，联系人）提供输入并选择产品选项并单击“保留”按钮，之后我需要将所有数据保存在数据库中，但我需要 StatusId 作为保留状态表。`How I know which record in 'Status' table is Reservation?`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:50:49.937

`Status`每次准备视图 (UI) 数据时，从数据库中填充对象列表。这样您就可以在视图中将其显示为一些选择组合。如果您向`statuses`表中添加新行，下次您的列表将包含它们。如果您不经常更新您的状态，您只能在应用启动时/每个会话一次加载此列表。

编辑：通常在任何组合小部件中，您可以将选项列表定义为对（id，name）。在您的情况下，它将是 [(1, Reserved), (2, Paid)] 以便组合框的选定值是一个 id。该 id 是您保存在数据库中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:25:37.413

vadchen 也是对的...我可以告诉您使用**枚举** 而不是使用表“状态”，并且您可以将枚举的“状态”ID 保存在“产品”表中

如果您不打算进行组合，那么您将在每个过程中管理您的类型。我的意思是这个...

> 进程 A 导致 1.Reserved
> 进程 B 导致 2.Paid
> 进程 C 导致 3.another Status
> 等等......

然后在这种情况下，您知道**进程 A 总是导致 1.Reserved**然后如果您有任何其他进程（如 Process C ），您必须将其管理为其他“状态”

但在我的想法中，您必须将此枚举类型编号（状态 ID）保留在“产品”表中作为**“int”**而不是 nvarchar 类型......如下所示：

> 'Product' 设计为： Id, Name , IdStatusType (as int)

那么您可以删除“状态”表，并且您知道“产品”表中的 ID 状态类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:45:03.327

在我的想法中...您可以将 FK 从“状态”转换为“产品”，如下所示：

> 'Product' 设计为：Id, Name , FK_IdStatus StatusId
> 'Status' 设计为：Id, Name

然后在 UI 中，您将所有“状态”选择到组合框中进行选择

> 选择 Id,Name From Status ... 并将此数据表分配给组合框数据源并选择 combobox.ValueMember= "Id" 和 combobox.DisplayMember="Name"

然后您可以通过从组合框中选择一个状态来为您的产品在 UI 中选择任何状态，
并在您的“产品”表中为每个产品存储一个 FK_IdStatus

# c# - 如何在 C# 中动态创建 Excel 工作簿并作为电子邮件附件发送？

> ID：15945418
> 
> 赞同：0
> 
> 时间：2013-04-11T09:37:14.073
> 
> 标签：c#, excel, vsto

我想在代码中动态创建一个工作簿而不存储它，我想将它作为电子邮件的附件发送。我在 C# 中使用 VSTO。我发现在 openXml 中实现这一点的答案很少。但是我已经在 excel 中完成了所有其他实现，现在很难切换。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:03:47.800

应该`Worksheet.MailEnvelope`有财产。在下`MailEnvelope`您应该能够定义收件人等。该`MailEnvelope.Item.Send()`方法将触发电子邮件。

# jquery - 如果匹配元素存在于其他地方，则从表中删除行

> ID：15945419
> 
> 赞同：0
> 
> 时间：2013-04-11T09:37:16.177
> 
> 标签：jquery, asp.net, html, asp.net-mvc-3, razor

在我的页面上，我有一个表格列表，其中显示了链接到组织的用户列表：

```
<script type="text/html" id="userListTemplate">
    <div id="user_list_box">
        <table class="list" style="margin-bottom: 15px;">
            {{#Users}}
            <tr id="user_row_{{UserId}}">
                <td><input type="checkbox" class="check_user" data-userid="{{UserId}}" /></td>
                <td><span><a class="edit_user_link" data-userid="{{UserId}}" href="#">{{UserName}}</a></span></td>
            </tr>
            {{/Users}}
        </table>
    </div>
</script> 
```

在同一页面上，我还有一个部分提供了可以与组织关联的用户列表：

```
<script type="text/html" id="linkedUserTemplate">
    <div class="accordion" id="accordion_parent">
        {{#ChildOrganizations}}
        <div class="accordion-group">
            <div id="collapse_{{OrganizationId}}" class="accordion-body collapse" style="height: 0px; ">
                <div class="accordion-inner">
                    <table class="list" style="margin-bottom: 15px;">
                        {{#Users}}
                        <tr>
                            <td><input type="checkbox" class="check_linked_user" data-userid="{{UserId}}" /></td>
                            <td>{{UserName}}</td>
                        </tr>
                        {{/Users}}
                    </table>
                </div>
            </div>
        </div>
        {{/ChildOrganizations}}
    </div>
</script> 
```

在将用户与组织关联时，这一切都很好。但是，我的问题是，一旦从第二个摘录中选择了一个用户并将其添加到我的第一个片段中的列表中，我想确保将来不再在可选列表中呈现相同的项目。解决此问题的最佳方法是什么？我想我应该考虑比较链接用户列表和可选用户列表中的*data-userid*值。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:02:38.240

In the action use the Distinct() and then pass it to view.

```
Model.Distinct().ToList(); 
```

# mysql - oracle中的默认检索顺序可能吗？

> ID：15945421
> 
> 赞同：0
> 
> 时间：2013-04-11T09:37:20.237
> 
> 标签：mysql, database, oracle

让我们假设我创建一个表并执行以下插入：

```
insert mango,4
insert apple,1
insert pear,3
insert banana,2 
```

表演时：`select fruit, id from fruit_table`。给出以下结果：

```
**fruit    id**
apple    1
pear     3
mango    4
banana   2
... 
```

这与它们最初的插入方式不同。如果不使用`order by`，是否有办法指定（可能在创建表或执行插入时）位置相对于它们的插入？所以在做的时候`select fruit, id from fruit_table`，我会按照它们插入的顺序来获取记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:52:14.193

在 Oracle 中，您可以使用 ORDER BY 定义表的视图。

```
create table fruit_table (
  id number,
  name varchar2(30));

create view  fruit
as
select *
from   fruit_table
order by id;

insert into fruit values (4,'mango');
insert into fruit values (1,'apple');
insert into fruit values (3,'pear');
insert into fruit values (2,'banana');

select * from fruit_table;

select * from fruit; 
```

SQL 小提琴：[http ://sqlfiddle.com/#!4/1b24f/1](http://sqlfiddle.com/#!4/1b24f/1)

我想不出这会是一个好主意的情况，而且我不相信它对除了琐碎的情况之外的任何事情都是万无一失的。

# jquery - 使用 jquery 在表的 tr 的最后一个 td 内添加隐藏字段

> ID：15945425
> 
> 赞同：0
> 
> 时间：2013-04-11T09:37:34.257
> 
> 标签：jquery

我有一个表格，其中显示带有编辑删除链接的区域列表。我想在此表的 tr 的最后一个 td 末尾添加一个隐藏字段

```
 <table class="source-table dialog" data-control="regionEditList">
      <tr class="source-header">
          <th>Region name</th>
          <th style="width: 104px">Action</th>
       </tr>
          <c:forEach var="region" items="${regions}">
            <tr>
              <td class="regionName">${region.regionName}</td>
              <td class="region-edit-btns" data-control="region-edit-del">
              <a href="#" data-control="regionEdit">Edit</a>
              <a href="#" data-control="delRegion">Delete</a>
              </td>
        </tr>
         </c:forEach>
   </table> 
```

使用 jquery 我可以将列表作为 tr

```
 var addWrapper = jQuery('[data-control=regionAddField]'),
    addField = jQuery('input[type=text]', addWrapper),
    addReset = jQuery('input[type=reset]', addWrapper),
    addBtn = jQuery('button', addWrapper),
    list = jQuery('[data-control=regionEditList]'); 
```

所以我在末尾附加一个 tr 使用

```
 list.append('<tr><td class="regionName">' + addField.val() + '</td><td class="region-edit-btns" data-control="region-edit-del">'+
                '<a href="#" data-control="regionEdit">Edit</a><a href="#" data-control="delRegion">Delete</a></td></tr>'); 
```

现在从 Db 获取 regionId 后，我想在上面列表的最后一个 td 中附加一个隐藏字段。

如果有任何混淆，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:53:03.177

```
 <table class="source-table dialog" data-control="regionEditList">
      <tr class="source-header">
          <th>Region name</th>
          <th style="width: 104px">Action</th>
       </tr>
          <c:forEach var="region" items="${regions}">
            <tr id="yourTr">
              <td class="regionName">${region.regionName}</td>
              <td class="region-edit-btns" data-control="region-edit-del">
              <a href="#" data-control="regionEdit">Edit</a>
              <a href="#" data-control="delRegion">Delete</a>
              </td>
        </tr>
         </c:forEach>
   </table>
var addpendElem = '<input type="hidden" id="someId"';
$('#yourTr :last-child').after(addpendElem); 
```

# java - 如何在java中将字符串转换为日期

> ID：15945428
> 
> 赞同：-10
> 
> 时间：2013-04-11T09:37:50.440
> 
> 标签：java, string, date-format, simpledateformat

我有一个类似于 date month year(31 08 2012) 的字符串。我想将其转换为日期格式。

```
String string = "31082012";
Date date = new SimpleDateFormat("DDMMYYYY").parse(string);
System.out.println(date); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T09:38:48.710

首先，您的格式错误，应该是`ddMMyyyy`

```
Date date = new SimpleDateFormat("ddMMyyyy").parse(string); 
```

# compiler-errors - 错误：应为“;”

> ID：15945429
> 
> 赞同：3
> 
> 时间：2013-04-11T09:37:50.570
> 
> 标签：compiler-errors

我是一名尝试使用 VS 2012 Ultimate 学习 C 编程的初学者。

我刚刚学会了如何制作“摄氏度到华氏度”转换器，所以我决定将其进一步用于“球体体积”计算器。这是我输入的内容：

```
#include <stdio.h>
#include <string.h>

char line[100]; /*Line input by the user*/
char line_2[100]; /*Second line input by the user*/
float radius; /*Value of the radius input by the user*/
float pi; /*Value of the pi input by the user*/
float volume /*Result of the calculation*/
float result_volume; /*Result of the second calculation*/
float result_volume2; /*Result of the third calculation*/
float result_volume3; /*Result of the fourth calculation*/

int main()
{
    printf("Please write the value of the radius: ");
    fgets(line,sizeof(line),stdin);
    sscanf(line,"%f",&radius);
    printf("Please write the value of the Pi ");
    fgets(line_2,sizeof(line_2),stdin);
    sscanf(line_2,"%f",&pi);
    volume = radius*radius*radius;
    result_volume = volume *pi;
    result_volume2 = result_volume*4;
    result_volume3 = result_volume2/3;
    printf("When the radius is %f, and the Pi, %f, then the volume of the sphere is: 
                %f\n", radius, pi, result_volume3);
    return (0);
} 
```

当我尝试编译它时，我不断收到错误：

```
Error: Expected a ";" on float result_volume. 
```

我在哪里犯了错误，我该如何解决？请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:38:50.030

在您显示的代码中，`;`之后缺少

```
float volume /*Result of the calculation*/ 
```

它应该是：

```
float volume; /*Result of the calculation*/ 
```

**注意：** *当您遇到此类错误时，通常应该查看发生错误的行**之前**的行。在您的情况下，这是上一行。*

发生的情况是编译器仅在到达`;`下一行时才看到问题。在那里，它意识到整两行并没有发出一个命令，并且应该在某处进行剪切。但它无法告诉它在哪里。因此，它会在看到错误时标记错误，而不是在实际发生的位置标记错误。

然而，在该领域已经有了显着的改进，例如，使用 Clang，MAC OS X IDE Xcode 能够准确地建议`;`任何需要的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:40:03.137

```
float volume /*Result of the calculation*/
float result_volume; /*Result of the second calculation*/ 
```

您忘记了后面的分号 ( `;`)`float volume`

```
float volume; /*Result of the calculation*/
float result_volume; /*Result of the second calculation*/ 
```

# guid - 如何在使用 ASP.NET 动态数据创建站点时自动生成 GUID？

> ID：15945434
> 
> 赞同：0
> 
> 时间：2013-04-11T09:38:00.577
> 
> 标签：guid, asp.net-dynamic-data

我有一个 SQL Server 数据库，它有很多表。每个表都有一个主列，实际上是一个 GUID 列。我创建了新的 ASP.NET 动态数据站点来管理这些表。问题是，没有生成 GUID，这就是站点对所有表都中断的原因。

我尝试在 SQL 表中添加“newID()”，但仍然失败。我相信我需要以某种方式对代码进行更改。我相信这可能是许多使用 ASP.Net 动态站点的开发人员面临的问题。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:00:17.873

我在 ~PageTemplates\Insert.aspx 的 FormView 控件的“插入”事件中添加了以下代码。

```
e.Values.Add("Id", Guid.NewGuid()); 
```

由于我所有的表都有一致的命名约定，因为 Id 代表 PK 列，我可以使用这个硬编码的列名，否则，您可能需要编写适当的逻辑来查找 PK 列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T22:38:03.297

我想我作弊了，但我刚刚创建了一个新的 GUID 字段模板。使用为您的类创建扩展元数据。此处显示的缩短版本。并将其与您的班级相关联。

然后将 GUID.ascx 和 GUID_Edit.ascx 添加到您的项目中。当您插入新记录时，将生成一个 GUID，并以只读方式显示在您的表单中。关键是使 UIHint 成为 GUID 类型。

下面的代码...

--- EventCalendarMetadata.cs

```
namespace DFEventsWeb
{
    [MetadataType( typeof ( EventCalendar_Metadata ) )  ]
    public partial class EVENT_CALENDAR
    {
        [DisplayName("EVENTS")]
        private abstract class EventCalendar_Metadata
        {
            [Display(Name = "ID")]
            [UIHint("GUID")]
            public object EVENT_ID { get; set; }

.... other fields removed ...
        }
    }
} 
```

--- GUID.ascx

```
<%@ Control Language="C#" CodeBehind="GUID.ascx.cs" Inherits="DFEventsWeb.GUID" %>
<asp:Literal runat="server" ID="Literal1" Text="<%# FieldValueString %>" /> 
```

--- GUID.ascx.cs 命名空间 DFEventsWeb {

```
 public partial class GUID : System.Web.DynamicData.FieldTemplateUserControl
    {
        private const int MAX_DISPLAYLENGTH_IN_LIST = 100;

        public override string FieldValueString
        {
            get
            {
                string value = base.FieldValueString;
                if (ContainerType == ContainerType.List)
                {
                    if (value != null && value.Length > MAX_DISPLAYLENGTH_IN_LIST)
                    {
                        value = value.Substring(0, MAX_DISPLAYLENGTH_IN_LIST - 3) + "...";
                    }
                }
                return value;
            }
        }

        public override Control DataControl
        {
            get
            {
                return Literal1;
            }
        }
    }
} 
```

--- GUID_Edit.ascx

```
<%@ Control Language="C#" CodeBehind="GUID_Edit.ascx.cs" Inherits="DFEventsWeb.GUID_EditField" %>
<asp:Literal ID="Literal1" runat="server" Text='<%# OVERRIDE_GUID %>'></asp:Literal> 
```

--- GUID_Edit.ascx.cs

```
namespace DFEventsWeb
{
    public partial class GUID_EditField : System.Web.DynamicData.FieldTemplateUserControl
    {
        const int MAX_TEXT_COLUMN_SIZE = 200; // jeh

        string m_GUIDString;
        public string OVERRIDE_GUID 
        {
            get { return m_GUIDString; }
            set { m_GUIDString = value; }
        }

        protected void Page_Load(object sender, EventArgs e)
        {
        }

        protected override void OnDataBinding(EventArgs e)
        {
            base.OnDataBinding(e);
            OVERRIDE_GUID = ( FieldValueEditString.Length <= 0 ? System.Guid.NewGuid().ToString() : FieldValueEditString );
        }

        protected override void ExtractValues(IOrderedDictionary dictionary)
        {
            dictionary[Column.Name] = ConvertEditedValue(Literal1.Text);
        }

        public override Control DataControl
        {
            get
            {
                return Literal1;
            }
        }
    }
} 
```

# java - Java 线程中的 System.exit

> ID：15945436
> 
> 赞同：6
> 
> 时间：2013-04-11T09:38:02.260
> 
> 标签：java, multithreading

我的主线程创建了一个新线程，当新线程调用时`System.exit(-1)`，我的主线程被关闭。如何处理退出代码并保持主线程处于活动状态？

PS。新线程将调用其他`.jar`文件中的某些方法，所以我无法修改它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T09:41:50.003

你不能。

`Terminates the currently running Java Virtual Machine. The argument serves as a status code; by convention, a nonzero status code indicates abnormal termination.`

那是javadoc。

因此该方法将终止整个 JVM。不仅仅是线程......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T09:44:06.147

您的问题非常不清楚，但是如果 System.exit 调用成功，操作系统将终止您的应用程序。

如果您希望 System.exit 不成功，您可以安装一个安全管理器并阻止它。除此之外，您可以通过自定义类加载器检测代码并删除调用。

编辑：如果您使用安全管理器，则很可能抛出 SecurityException 将终止线程。如果没有 - 作弊并抛出 ThreadDeath。如果仍然没有 - 只保留线程，例如`for(;;) Thread.sleep(10000);`后者将泄漏线程及其资源，但至少不会杀死您的应用程序。

[链接到类似问题](https://stackoverflow.com/questions/4542853/how-to-trap-system-exit-in-code-called-from-jni)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T01:14:15.780

**班上：**

```
public class MySecurityManager extends SecurityManager {
    @Override
    public void checkPermission(Permission perm) {
    }

    @Override
    public void checkPermission(Permission perm, Object context) {
    }

    @Override
    public void checkCreateClassLoader() {
    }

    @Override
    public void checkAccess(Thread t) {
    }

    @Override
    public void checkAccess(ThreadGroup g) {
    }

    @Override
    public void checkExit(int status) {
        throw new SecurityException("not allow to call System.exit");
    }

    @Override
    public void checkExec(String cmd) {
    }

    @Override
    public void checkLink(String lib) {
    }

    @Override
    public void checkRead(FileDescriptor fd) {
    }

    @Override
    public void checkRead(String file) {
    }

    @Override
    public void checkRead(String file, Object context) {
    }

    @Override
    public void checkWrite(FileDescriptor fd) {
    }

    @Override
    public void checkWrite(String file) {
    }

    @Override
    public void checkDelete(String file) {
    }

    @Override
    public void checkConnect(String host, int port) {
    }

    @Override
    public void checkConnect(String host, int port, Object context) {
    }

    @Override
    public void checkListen(int port) {
    }

    @Override
    public void checkAccept(String host, int port) {
    }

    @Override
    public void checkMulticast(InetAddress maddr) {
    }

    @Override
    public void checkPropertiesAccess() {
    }

    @Override
    public void checkPropertyAccess(String key) {
    }

    @Override
    public boolean checkTopLevelWindow(Object window) {
        return super.checkTopLevelWindow(window);
    }

    @Override
    public void checkPrintJobAccess() {
    }

    @Override
    public void checkSystemClipboardAccess() {
    }

    @Override
    public void checkAwtEventQueueAccess() {
    }

    @Override
    public void checkPackageAccess(String pkg) {
    }

    @Override
    public void checkPackageDefinition(String pkg) {
    }

    @Override
    public void checkSetFactory() {
    }

    @Override
    public void checkMemberAccess(Class<?> clazz, int which) {
    }

    @Override
    public void checkSecurityAccess(String target) {
    }
} 
```

**在启动时：**

```
System.setSecurityManager(new MySecurityManager()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T09:47:13.637

使用 Java SecurityManager 从退出中保存主线程并使用 SecurityManager 运行其他线程代码。

编辑：从 Tomcat 或其他服务器中了解他们如何`<% System.exit(1); %>`在 JSP 中管理这样的代码。

# regex - 使用正则表达式验证看起来像 lke sd1258 的字符串（两个字符和 3-4 位数字）

> ID：15945441
> 
> 赞同：1
> 
> 时间：2013-04-11T09:38:09.680
> 
> 标签：regex

我正在尝试构建一个正则表达式来验证输入是否是有效的航班代码。AA 有效的航班代码看起来像两个字符，然后是三个或四个数字。可以以零开始数字，但至少一个数字必须是 1-9。有效代码例如 DE1258、DE012、SK4589、fr0020 或 us0001

我尝试了以下解决方案，但它不起作用。

```
Regex RegexObj = new Regex(@"^[a-zA-Z]{2}$\d\d\d\d"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:57:46.487

以下正则表达式将做你想要的

```
^[a-zA-Z]{2}(?!0{4})\d{3,4}$ 
```

这有效的原因是 (!?0{4}) 是一个负前瞻。只有当子表达式不匹配时，正则表达式才会继续超过这一点。

# c# - 动态添加点击到gridview内的imagebutton

> ID：15945445
> 
> 赞同：0
> 
> 时间：2013-04-11T09:38:17.100
> 
> 标签：c#, asp.net, web-applications, imagebutton

我试图从 gridview 的页脚触发 ImageButton 的事件单击，但我没有触发，我将不胜感激，在此先感谢，这是代码

```
protected void grvBubDetails_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.Footer)
    {
         ImageButton imgbtnSendMail = new ImageButton();
         //ImageButton imgEdit = new ImageButton();
         imgbtnSendMail.ImageUrl = "~/Images/mail01.png";
         imgbtnSendMail.AlternateText = "Edit";
         imgbtnSendMail.ToolTip = "for send mail press here";
         imgbtnSendMail.Width = imgbtnSendMail.Height = 20;
         //imgbtnSendMail.CommandName = "sendMail";
         //imgbtnSendMail.CommandArgument = "somevalue";
         imgbtnSendMail.Click += new ImageClickEventHandler(imgbtnSendMail_Click);
         //imgbtnSendMail.Attributes["runat"] = "server";
         //imgbtnSendMail.Attributes["onclick"] = "imgbtnSendMail_Click";
         e.Row.Cells[6].Controls.Add(imgbtnSendMail);
    }
}
protected void imgbtnSendMail_Click(object sender, ImageClickEventArgs e)
{
        string Text = "Image clicked";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:49:13.027

像这样更新 grvBubDetails_RowDataBound 事件；

```
ImageButton imgbtnSendMail = new ImageButton();
imgbtnSendMail.CommadName = "cmdSendMail"; // add this line
imgbtnSendMail.CommadArgument = "also you can pass a parameter from here"; 
```

将 RowCommand 事件添加到网格视图。在 RowCommand 事件处理函数中执行此操作；

```
if(e.CommandName.equals("cmdSendMail")){
    string Text = "Image clicked";
    string argument = e.CommandArgument;
} 
```

更新：

在 PageLoad 事件之后触发的网格视图的 RowCommand 事件。您的按钮在每次页面重新加载后被删除，并且由于 rowDatabound 事件没有触发而没有重新创建。

工作代码：

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            List<string> list = new List<string>()
            {
                "item 1",
                "item 2",
                "item 3"
            };
            GridView1.DataSource = list;
            GridView1.DataBind();
        }

        // make sure outside of !IsPostback
        // recreate button every page load
        Button btn = new Button();
        btn.CommandName = "cmdSendMail";
        btn.CommandArgument = "sample arg";
        btn.Text = "send mail";
        GridView1.FooterRow.Cells[0].Controls.Add(btn);
    }

    protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        Response.Write(e.CommandName + new Random().Next().ToString());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:40:09.143

您必须声明`ImageButton`全局范围（类级别）

```
ImageButton imgbtnSendMail = new ImageButton();
protected void grvBubDetails_RowDataBound(object sender, GridViewRowEventArgs e)
{
     if (e.Row.RowType == DataControlRowType.Footer)
     { 
```

# visual-studio-2012 - 在项目中查找文件（Visual Studio）

> ID：15945446
> 
> 赞同：0
> 
> 时间：2013-04-11T09:38:18.920
> 
> 标签：visual-studio-2012

Visual Studio 2012 是否具有仅从解决方案中搜索文件的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:39:42.500

在解决方案资源管理器中显示“*搜索解决方案资源管理器 (Ctrl+ü)* ”。在这里，您可以从解决方案中搜索文件。

# sql - 哪个 SQLite 查询性能更好？

> ID：15945450
> 
> 赞同：0
> 
> 时间：2013-04-11T09:38:41.240
> 
> 标签：sql, performance, sqlite

我听有人说打开`case_sensitive_like`可以使查询工作更快。如果是这样，如果我们有以下 2 个查询选择不区分大小写的数据，您会怎么想：

1.  `SELECT * FROM MyTable WHERE MyColumn LIKE '%Value%'`

    假设`case_sensitive_like`关闭（默认情况下），这将返回相同的结果，无论`Value`是`value`, `vAlue`, `valUE`,...

2.  `PRAGMA case_sensitive_like = ON;`
    `SELECT * FROM MyTable WHERE LOWER(MyColumn) LIKE LOWER('%Value%');`

    这也将返回相同的结果，无论`Value`是`value`, `vAlue`, `valUE`, ...

我希望＃2优于＃1。

请帮忙。谢谢。

PS：我认为可以通过首先使用小写字符串的值为 Value 声明一个常量来提高 #2 的性能，或者可以在传入查询之前对其进行处理（例如在 C# 代码中）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T09:48:14.047

我希望查询 2 会稍微慢一些。

就像关闭“case_sensitive_like”一样，实际上是“LIKE LOWER(%...%)”，但在 LIKE 函数中实现——所以选项 1 在功能上是相同的，但没有调用单独函数的额外开销。

但是，由于大部分时间和资源将用于将数据从磁盘上拖出并在行中定位“MyColumn”，我怀疑差异是否会很明显。

# r - 从R中的excel中获取数据

> ID：15945458
> 
> 赞同：1
> 
> 时间：2013-04-11T09:30:07.530
> 
> 标签：r

当我尝试运行该`sqlFetch`语句时，我间歇性地收到以下错误。

```
Error in odbcTableExists(channel, sqtable) : 
  ‘Sheet20’: table not found on channel 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:09:39.107

如果您对 ODBC 不满意，我建议您查看[XLConnect或其他 Excel 接口包之一。](http://cran.r-project.org/web/packages/XLConnect/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:10:11.323

`odbcTableExists`是`RODBC`包的内部函数。这行代码

```
 if (abort && !ans) 
    stop(sQuote(tablename), ": table not found on channel") 
```

表示表名有问题（显然）。仔细检查表名的大小写，即使 sql 语句不区分大小写 R 也是！

如果不是问题，请尝试使用 package.json 中的`read.xls`功能`gdata`。它依靠 Perl 库将 excel 电子表格转换为 csv，然后调用`read.table`. 这意味着您将能够传递给`read.xls`您要提供的任何参数`read.table`，这有时非常有用。

希望有帮助。

# php - 登录后重定向用户

> ID：15945463
> 
> 赞同：0
> 
> 时间：2013-04-11T09:39:20.233
> 
> 标签：php

我有一个页面，只允许用户在登录后访问该页面。说这个页面是

> [http://www.example.com/secret/data/important.php?id=23&pin=2if24scrtw2323](http://www.example.com/secret/data/important.php?id=23&pin=2if24scrtw2323)。

这是这样的场景：当用户在没有登录的情况下访问 URL 时，用户将被重定向到登录页面。我的登录页面网址：

> [http://www.example.com/login.php](http://www.example.com/login.php)

成功登录后，用户将再次自动重定向到他/她尝试高级访问的页面（在这种情况下：> [http://www.example.com/secret/data/important.php?id=23&pin= 2if24scrtw2323](http://www.example.com/secret/data/important.php?id=23&pin=2if24scrtw2323) ) 就像脸书一样。

背后有什么想法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:44:45.693

您阅读了您来到登录页面的网址。它存储在 $_SERVER 中，除非我弄错了。（我建议`print_r($_SERVER)`您看看有什么可用的）或者，您将`$_SERVER['REQUEST_URI']`登录页面作为一个参数，就像`header('login.php?came_from=' + $_SERVER['REQUEST_URI'])`您将用户重定向到登录时一样。将其作为隐藏输入放入表单中。然后登录后，您仍然将该 url 作为脚本中的参数，因此您现在可以轻松地使用[header](http://www.php.net/header) ('yourpage.php') 再次重定向:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:43:17.653

一种选择是将重定向位置存储在某处。这可以在 url 或我的首选选项中完成：在隐藏字段中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T09:43:30.237

将页面的值存储在 cookie 中

```
$_COOKIE['visit'] = "http://www.example.com/secret/data/important.php?id=23&pin=2if24scrtw2323";
and then from login 
header('location: '.$_COOKIE['visit']); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T09:44:34.583

首先，您需要使用 php GET 和 POST 或 REQUEST（如 $_GET['id']）检查 id 和 pin 值

成功登录后，您可以在会话中设置值，如 $_SESSION['id'] 并在 agin 上重定向用户或重新加载页面并检查会话值是否存在或 equel 以获取值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T09:41:45.207

请查看 php 手册中的 header 方法，有一个重定向示例。

[http://php.net/header](http://php.net/header)

从那里复制和粘贴：

```
<?php
header("Location: http://www.example.com/"); /* Redirect browser */

/* Make sure that code below does not get executed when we redirect. */
exit;
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T09:42:16.950

像这样的东西：

```
<?php

session_start();

if (!$_SESSION['logged_in']) {
    header('location: login.php');
    die;
}

//other code

?> 
```

# jquery - 如何创建购物车

> ID：15945465
> 
> 赞同：-5
> 
> 时间：2013-04-11T09:39:21.323
> 
> 标签：jquery, css, html, web

我正在为我的网站创建一个购物车类型的部分，只是想知道最好的方法，例如本地存储/会话存储，或者可能将其保存在数据库中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:48:39.553

你可以找到很多教程。尝试谷歌搜索`shopping cart tutorials`等。

[这里](http://www.qualitycodes.com/tutorial.php?articleid=25&title=Tutorial-Building-a-shopping-cart-in-PHP)和[这里](http://jameshamilton.eu/content/simple-php-shopping-cart-tutorial) 是一个创建购物车系统的教程网站示例。大多数人似乎都在使用 PHP 和 MySQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:47:04.963

就我个人而言，我会为购物车使用 PHP 会话，因为我认为在多个会话（访问您的网站）之间存储购物车没有实际用途。但是，我可能会将购买的商品存储在数据库中，以便为客户提供购买历史记录。

由于您问题的性质，我的回答非常模糊。没有一个非常明确的问题，很难提供一个准确的答案。对于未来的问题，请尝试缩小您的具体问题并发布一些代码或描述您已经尝试过的内容。

祝你好运！

# html - ASP.NET MVC - Razor - 使用操作、控制器和 html 属性重载按钮

> ID：15945469
> 
> 赞同：2
> 
> 时间：2013-04-11T09:39:27.170
> 
> 标签：html, asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

我想使用按钮而不是 ActionLink 重写下面的代码。任何帮助将不胜感激。谢谢。

```
@Html.ActionLink("Test Link","Index", "Home", new { id = item.id}) 
```

是否可以编写类似下面的内容或有更好的方法？我也不确定语法，所以请随时更正。

```
<input type="button" value="Submit" onclick="location.href='@Url.Action("Index", "Home", new { id = @Model.FirstorDefault.Id.ToString()}, null)'" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T09:43:45.057

将其写为锚标记，因为您似乎希望在单击按钮时重定向用户。如果您愿意，您可以轻松地将锚设置为看起来像一个按钮。

```
 <a href="@Url.Action("Index", "Home", 
        new { id = Model.FirstorDefault.Id.ToString()})">Submit</a> 
```

现在“提交”标题没有意义，因为您现在正在执行“GET”操作而不是“POST”。但如果你坚持使用按钮，你可以这样做：

```
<input type="button" value="Submit" id="btn1" />

// just replace zero with whatever value you need to use
$("#btn1").click(function () {
    window.location.replace('@Url.Action("about", "Home", new { id = 0 })');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T19:20:09.610

```
<form method="get"action="/Home/Index/@Model.id">
    <input id="Submit1" type="submit" value="submit" />
</form> 
```

# c - 如何在C中的struct中分配指向二维数组的指针？

> ID：15945478
> 
> 赞同：1
> 
> 时间：2013-04-11T09:39:45.330
> 
> 标签：c, pointers

我在将指针分配给位于 C 结构中的二维数组时遇到问题。代码运行但我遇到编译错误并且无法理解如何摆脱它。

一、结构

```
typedef struct{
  double (*cases)[9];
} myStruct; 
```

然后我在我的主程序中声明了一个 myStryct 类型的结构和一个数组，并尝试将我的结构中的指针设置为指向这个数组：

```
 myStruct a;
 double myArray[5][9] = {
   {0, 1, 2, 3, 4, 5, 6, 7, 8},
   {0, 1, 2, 3, 4, 5, 6, 7, 8},
   {0, 1, 2, 3, 4, 5, 6, 7, 8},
   {0, 1, 2, 3, 4, 5, 6, 7, 8},
   {0, 1, 2, 3, 4, 5, 6, 7, 8},
 }
 a.cases = &myArray; 
```

程序运行良好，我可以通过指针访问元素，但出现编译错误：警告：来自兼容指针类型的赋值。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:51:37.267

```
myStruct a;
double myArray[5][9] = {
   {0, 1, 2, 3, 4, 5, 6, 7, 8},
   {0, 1, 2, 3, 4, 5, 6, 7, 8},
   {0, 1, 2, 3, 4, 5, 6, 7, 8},
   {0, 1, 2, 3, 4, 5, 6, 7, 8},
   {0, 1, 2, 3, 4, 5, 6, 7, 8},
};
a.cases = &myArray[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T09:32:13.907

问题：

```
void allocate(int ** universe,int n) // to assign pointer "a"  a nXn matrix //
{ 
   universe=(int **) calloc(n,sizeof(int *));
   cout<<"work3";
   int l;
   for(l=0;l<n;l++)
   universe[l]=(int *)calloc(n,sizeof(int));
} 
```

# regex - 合规性验证，无法正常工作

> ID：15945480
> 
> 赞同：0
> 
> 时间：2013-04-11T09:39:49.657
> 
> 标签：regex, flash

我的来源

`var reg:RegExp = /[0-9A-Za-z]/;`

`reg.test("fsfm32423sda");`- 现在是真的

`reg.test("fsfm32423sda!!!___---");` - 现在为真 - 但必须为假，因为字符串包含字符`"!_-"`- 它们不包含在“var reg”中

怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:42:24.747

这样做的问题`[0-9A-Za-z]`是：它将匹配任何可能包含字母或数字的字符串。但是，它没有指定其他任何内容。将其更改为`^[0-9A-Za-z]+$`应该可以解决您的问题。

`^`和锚点所做的`$`是它们指示正则表达式引擎分别在字符串的开头和结尾开始和停止匹配。这将确保您的字符串仅由一个或多个字母和/或数字组成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:42:43.713

您只测试一个字符，因为您没有量词。尝试：

```
var reg:RegExp = /^[0-9A-Za-z]+$/; 
```

插入符号`^`标记字符串的开头，美元标记`$`结尾。

# c# - 无法让 jqueryui 手风琴在回发时保持活动索引

> ID：15945483
> 
> 赞同：0
> 
> 时间：2013-04-11T09:40:02.730
> 
> 标签：c#, asp.net, jquery-ui, postback, accordion

我环顾四周，找到了许多解决方案，但由于某种原因，它对我不起作用。

.NET 4，c#

我有一架手风琴，分为三个部分。在加载部分后面的 c# 代码中，我有...

```
if (!IsPostBack)
{
    MembershipUser websiteUser = Membership.GetUser();
    ProfileCommon websiteUserProfile = Profile.GetProfile(websiteUser.UserName);

    if (websiteUserProfile.PrimaryCompany == "BEL")
        hiddenAccordionIndex.Value = "1";
} 
```

这将设置初始活动部分。这工作得很好。

我现在想要发生的是，如果活动部分切换为 0，然后页面上发生回发，我希望手风琴将活动部分保持为 0。

实际发生的是，手风琴正在切换回 1。

我的jQuery ...

```
 var currentIndex = $("#<%= hiddenAccordionIndex.ClientID %>").val();
    $("#accordion").accordion({
        heightStyle: "content",
        collapsible: true,
        active: parseInt(currentIndex),
        change: function (event, ui) {
            var newIndex = $(this).children("h3").index(ui.newHeader);
            $("#<%= hiddenAccordionIndex.ClientID %>").val(newIndex);
        }
    }); 
```

即使我删除了设置为初始活动部分的 c# 代码，行为也是一样的。所以我确信这不是问题的原因。

谁能建议这里可能有什么问题？我难住了！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:00:42.717

我有答案。

**改变**不是一个事件。相反，我使用了**激活**，现在可以正常工作。

我看到的所有解决方案都表示**更改**事件，也许这是针对旧版本的！

新代码...

```
var currentIndex = $("#<%= hiddenAccordionIndex.ClientID %>").val();
$("#accordion").accordion({
    heightStyle: "content",
    collapsible: true,
    active: parseInt(currentIndex),
    activate: function (event, ui) {
        var newIndex = $(this).children("h3").index(ui.newHeader);
        $("#<%= hiddenAccordionIndex.ClientID %>").val(newIndex);
    }
}); 
```

# amazon-web-services - 每当我需要向 Amazon SQS 发送消息时，是否应该调用 CreateQueue？

> ID：15945485
> 
> 赞同：1
> 
> 时间：2013-04-11T09:40:04.390
> 
> 标签：amazon-web-services, amazon-sqs

[我以某种方式在Wikipedia:SQS](http://en.wikipedia.org/wiki/Amazon_Simple_Queue_Service#Message_deletion)中看到了这个短语，它写道：

> 如果连续 30 天未访问，亚马逊保留在不通知的情况下删除整个队列的权利。

1.  这得到证实了吗？虽然我找不到相关资源。

2.  如果是这种情况，我的程序已经有一段时间没有调用 SQS，这是否意味着我需要通过在我想将一些消息推送到队列时调用来**确保**我的队列始终存在？`CreateQueue`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:23:25.393

如果队列不存在，您将收到`AWS.SimpleQueueService.NonExistentQueue`错误消息（请参阅[SQS API 文档](http://docs.aws.amazon.com/AWSSimpleQueueService/latest/APIReference/Query_QueryErrors.html)）。因此，一种安全的方法是在不进行任何额外检查的情况下发送，并适当地处理错误。

也就是说，通常如果您使用队列，您有一些接收组件从时间（或一直，使用例如长轮询）轮询队列。该组件的存在确保队列存在；也就是说，如果队列不存在，您将在接收端创建队列，然后访问它（根据文档，每次访问都很重要）。

如果没有不时检查队列的接收组件，那么发送消息就没有多大意义了:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T16:19:36.593

我想确认他们保留删除 30 天内未使用的队列的权利：

> 如果连续 30 天未对其执行以下操作之一，Amazon SQS 可以在不通知的情况下删除您的队列：SendMessage、ReceiveMessage、DeleteMessage、GetQueueAttributes、SetQueueAttributes、AddPermission 和 RemovePermission。

[http://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/SQSConcepts.html#AboutQueues](http://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/SQSConcepts.html#AboutQueues)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-09T20:11:40.213

更新：此警告已[在当前 SQS 文档中](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-how-it-works.html "当前的 SQS 文档")替换为：

> 笔记
> 
> 除非您的应用程序特别需要重复创建队列并使其处于非活动状态或在队列中存储大量数据，否则请考虑使用 Amazon S3 来存储您的数据。

亚马逊没有删除它们，所以FWIW。

# iphone - 在iOS中将两个uiimageview合并为单个uiimageview

> ID：15945497
> 
> 赞同：1
> 
> 时间：2013-04-11T09:40:30.227
> 
> 标签：iphone, objective-c, ipad, xcode4.5

如果有人有另一个代码将这两个图像合并为一个图像，我发现下面给出了合并两个图像的代码。

当我将两个 uiimageview 合并到一个 uiimageview 中时，最终图像会变成黑色或白色阴影。掩蔽图像的实际颜色不会出现在最终图像中![在此处输入图像描述](https://i.stack.imgur.com/R5ARR.png) ![在此处输入图像描述](https://i.stack.imgur.com/5uTfx.png) ![在此处输入图像描述](https://i.stack.imgur.com/4z2IR.png)

```
- (void)viewDidLoad {
  [super viewDidLoad];
  // Do any additional setup after loading the view from its nib.
  self.navigationController.navigationBarHidden = YES;
  imgBack = [UIImage imageNamed:@"img1.jpg"];
  imgMask = [UIImage imageNamed:@"img2.png"];
  imgBackground.image = imgBack;
  imgMasking.image = imgMask;

  imgFinally = [self maskImage:imgBack withMask:imgMask];
  imgFinal.image = imgFinally;

  imgBackground.image= nil;
  imgMasking.image = nil;
}

- (UIImage *) maskImage:(UIImage *)image
             withMask:(UIImage *)maskImage {

CGImageRef maskRef = maskImage.CGImage;

CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef),
                                    CGImageGetHeight(maskRef),
                                    CGImageGetBitsPerComponent(maskRef),
                                    CGImageGetBitsPerPixel(maskRef),
                                    CGImageGetBytesPerRow(maskRef),
                                    CGImageGetDataProvider(maskRef), NULL, false);

CGImageRef masked = CGImageCreateWithMask([image CGImage], mask);

return [UIImage imageWithCGImage:masked];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T12:46:49.140

将所有图像放在一个视图中并调用此方法，它将所有图像合并并给出新图像

```
+ (UIImage *) imageWithView:(UIView *)view
{

     UIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 0.0);

     [view.layer renderInContext:UIGraphicsGetCurrentContext()];

     UIImage * img = UIGraphicsGetImageFromCurrentImageContext();

     UIGraphicsEndImageContext();

     return img;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T11:03:20.357

嗨试试这个....

```
 UIImage* bottomImage = [UIImage imageNamed:@"index.jpg"];
    UIImage* topImage    = [UIImage imageNamed:@"tiger.png"];
    UIImageView* imageView = [[UIImageView alloc] initWithImage:bottomImage];
    UIImageView* subView   = [[UIImageView alloc] initWithImage:topImage];
    [imageView addSubview:subView];
     UIGraphicsBeginImageContext(imageView.frame.size);
    CGContextSetBlendMode(UIGraphicsGetCurrentContext(), kCGBlendModeMultiply);
    [imageView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage* blendedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    [subView release];
    [imageView release];
    self.resultImage.image=blendedImage; //Your Image set 
```

**针对您的问题的最终修改方法：-**

```
- (UIImage*) mergeTwoImages : (UIImage*) topImage : (UIImage*) bottomImage
{
    // URL REF: http://iphoneincubator.com/blog/windows-views/image-processing-tricks
    // URL REF: http://stackoverflow.com/questions/1309757/blend-two-uiimages?answertab=active#tab-top
    // URL REF: http://www.waterworld.com.hk/en/blog/uigraphicsbeginimagecontext-and-retina-display

    int width = bottomImage.size.width;
    int height = bottomImage.size.height;

    CGSize newSize = CGSizeMake(width, height);
    static CGFloat scale = -1.0;

    if (scale<0.0)
    {
        UIScreen *screen = [UIScreen mainScreen];

        if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 4.0)
        {
            scale = [screen scale];
        }
        else
        {
            scale = 0.0;    // Use the standard API
        }
    }

    if (scale>0.0)
    {
        UIGraphicsBeginImageContextWithOptions(newSize, NO, scale);
    }
    else
    {
        UIGraphicsBeginImageContext(newSize);
    }

    [bottomImage drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
//    [topImage drawInRect:CGRectMake(0,0,newSize.width,newSize.height) blendMode:kCGBlendModeLighten alpha:1.0];
    [topImage drawInRect:CGRectMake(0,0,newSize.width,newSize.height) blendMode:kCGBlendModeMultiply alpha:1.0];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
} 
```

我希望这个方法能解决你的问题......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-22T06:49:24.437

尝试这个

```
UIImage *image1 = [UIImage imageNamed:@"image1.png"];
UIImage *image2 = [UIImage imageNamed:@"image2.png"];

CGSize size = CGSizeMake(image1.size.width, image1.size.height);

UIGraphicsBeginImageContext(size);

[image1 drawInRect:CGRectMake(0,0,size.width, image1.size.height)];
[image2 drawInRect:CGRectMake(0,0,size.width, image2.size.height)];

UIImage *finalImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

//Add image to view
imageView.image = finalImage; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T12:57:54.510

我没有给你的代码，但据我所知，你必须用它自己掩盖那个火焰图像，而不是将它与美丽的图像合并。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T09:49:22.290

开发人员文档指出：

> 一张面具。如果遮罩是图像，则它必须在 DeviceGray 颜色空间中，不得具有 alpha 分量，并且本身不能被图像遮罩或遮罩颜色遮罩。如果遮罩与图像参数指定的图像大小不同，则 Quartz 缩放遮罩以适合图像。

与 Photoshop 不同，CoreGraphics 不允许通过 Alpha 通道进行遮罩，而是通过灰度进行遮罩。你确定你的面具是灰度的吗？

# php - 如何在 MySQLi 语句中插入变量？

> ID：15945502
> 
> 赞同：2
> 
> 时间：2013-04-11T09:40:43.420
> 
> 标签：php, mysqli

我正在尝试使用 MYSQLi 在数据库中插入数据。如果我使用以下查询，则插入数据；

```
INSERT INTO table (Name, Phone, Location) VALUES ('test', 'test', 'test') 
```

我需要插入变量的值，而不是值“测试”。但是以下不起作用。

```
$test = 'xxx';
if ($stmt = $mysqli->prepare("INSERT INTO table (Name, Phone, Location) VALUES (".$test.", 'aaa', 'bbb')")) {
   $stmt->execute();
   $stmt->close();
} 
```

我已经尝试了该`bind_param`命令，但它没有工作。

```
$stmt->bind_param("ss", $name, $phone, $location); 
```

如何直接插入变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:46:34.167

在您的情况下，代码应如下所示：

```
$test = 'xxx';

$stmt = $mysqli->prepare("INSERT INTO table (Name, Phone, Location) VALUES (?, 'aaa', 'bbb')");
$stmt->bind_param("s", $test);
$stmt->execute();
$stmt->close(); 
```

如果您想为此查询提供 3 个变量：

```
$name = "My name";
$phone = "My phone number";
$location = "My location";

$stmt = $mysqli->prepare("INSERT INTO table (Name, Phone, Location) VALUES (?, ?, ?)");
$stmt->bind_param("sss", $name, $phone, $location);
$stmt->execute();
$stmt->close(); 
```

# php - Silverstripe 模块 - Facebook 身份验证

> ID：15945508
> 
> 赞同：0
> 
> 时间：2013-04-11T09:41:11.843
> 
> 标签：php, facebook, module, openid, silverstripe

我正在使用 facebook 身份验证模块，尝试使用 facebook 登录，但它似乎无法正常工作。当我尝试单击该按钮时，它会在 facebook 站点中请求许可和类似的内容，然后重定向回我的站点，但似乎什么也没发生（未登录），但我可以使用 firebug 看到一些会话。我在我的本地主机上工作。这是它的原因吗？我尝试手动登录并尝试单击按钮，它的作用是注销。我在数据库中检查了我的 facebook id 和 facebook 名称，似乎是正确的。

只是为了添加更多信息。如果我已经登录并且如果我使用 Javascript 它似乎连接到 Facebook，否则如果我退出它类似于上面的 senario。

顺便说一句，我不太擅长 Silverstripe 和 php。非常感谢您的帮助。

谢谢！

编辑：我这样做对吗？

```
 <form id="FacebookLoginForm_LoginForm" enctype="application/x-www-form-urlencoded" method="post" action="Security/LoginForm">
                        <p id="FacebookLoginForm_LoginForm_error" class="message" style="display: none"></p>
                        <fieldset>
                            <input type="hidden" value="FacebookAuthenticator" name="AuthenticationMethod" id="FacebookLoginForm_LoginForm_AuthenticationMethod" class="hidden AuthenticationMethod">
                        </fieldset>
                        <div class="Actions">
                            <input type="image" alt="Sign in with Facebook" title="Sign in with Facebook" src="facebook/Images/signin.png" name="FacebookLoginForm_dologin" id="FacebookLoginForm_LoginForm_action_Facebook_dologin" class="action">
                        </div>
                    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:58:04.820

新西兰公司 Pocket Rent 的 Simon Welsh 创建了一个允许通过 Facebook 登录的模块——它在登录页面中添加了一个额外的选项卡。我添加了一个整洁的阅读我并修复了一些小问题。见[https://github.com/gordonbanderson/facebook-auth/commits/development](https://github.com/gordonbanderson/facebook-auth/commits/development)

西蒙的原件可以在一个颠覆存储库中找到，[http://svn.rentbox.co.nz/public/facebook/](http://svn.rentbox.co.nz/public/facebook/)

# c++ - 无法加载 lbpcascade_profile.xml

> ID：15945512
> 
> 赞同：4
> 
> 时间：2013-04-11T09:41:32.517
> 
> 标签：c++, opencv

我正在尝试加载lbpcascade_profileface.xml。

```
CascadeClassifier cad;
cad.load("C:/opencv/data/lbpcascades/lbpcascade_profileface.xml"); 
```

出现以下错误：

```
OpenCV Error: Parsing error (C:/opencv/data/lbpcascades/lbpcascade_profileface.x
ml(1): Comments are not allowed here) in unknown function, file ..\..\..\src\ope
ncv\modules\core\src\persistence.cpp, line 1818 
```

该怎么办 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T09:56:57.247

好的，找到了工作的解决方案。我不得不删除 xml 文件顶部的注释。现在它起作用了。但不知道为什么他们添加了无法解析的评论。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-20T15:50:40.073

我遇到了同样的问题，看来评论放错了地方。如果要保留注释，只需将此行移到注释上方：

```
<?xml version="1.0"?> 
```

# iphone - 如何移动按钮动作ios

> ID：15945514
> 
> 赞同：0
> 
> 时间：2013-04-11T09:41:34.633
> 
> 标签：iphone, ios, xcode, ios5, uibutton

我想在按下时改变按钮的位置，它应该再次移动到下方并在按住时重新开始，请告诉我该怎么办？

```
textField = [[UITextField alloc] initWithFrame:CGRectMake(76, ([txtFieldArray count] * 30), 191, 25)];
[textField setBorderStyle:UITextBorderStyleLine];
textField.font = [UIFont systemFontOfSize:20];
textField.placeholder = @"Enter text";
textField.autocorrectionType = UITextAutocorrectionTypeNo;
textField.keyboardType = UIKeyboardTypeDefault;
textField.returnKeyType = UIReturnKeyDone;
textField.clearButtonMode = UITextFieldViewModeWhileEditing;
textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
textField.delegate = self;
[myScrollview addSubview:textField];
[txtFieldArray addObject:textField];

CGRect frame = bottomView.frame;
frame.origin.y += textField.frame.size.height + 5;

bottomView.frame = frame;
textField.hidden = NO; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:54:17.640

在创建 UIButton 并像 UITextField 一样设置它的框架后，你应该使用按钮的`setFrame:`方法来改变它的位置。

如果你想用按钮改变位置，首先创建一个`-(IBAction *)buttonPressed:(id)sender`方法并在其中设置按钮的新位置。`[button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside]`然后在创建按钮的位置之后添加方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:08:50.290

您可以将标签分配给按钮

```
UIButton *btn=[UIButton buttonWithType:UIButtonTypeCustom];
[btn setTag:100];
[btn addTarget:self action:@selector(moveButtonDown) forControlEvents:UIControlEventTouchUpInside]; 
```

并且每当单击按钮时，可以通过获取按钮的引用来更改按钮的框架。在下面的代码中，我将按钮向下移动了 20 个像素。您可以将此值更改为您想要的任何值。

```
 -(void)moveButtonDown
{
    UIButton *btn=(UIButton *)[self.view viewWithTag:100];
    float y=btn.frame.origin.y;
    y+=20;
    [btn setFrame:CGRectMake(btn.frame.origin.x, y, btn.frame.size.width, btn.frame.size.height)];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:04:39.713

仅在您描述的片段中给出按钮的框架。

例如，

```
<button_object>.frame =
CGRectMake(textField.frame.origin.x,textField.frame.origin.y +
x,textField.size.width,textField.size.height);

Where X = the difference upto which you want to add the button after
textfield. For ex, 44 or 50 or so on.. 
```

享受编程！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-08T09:59:41.990

您必须通过以下方式修改代码：

```
CGRect frame = bottomView.frame;
frame.origin.y += (tField.frame.origin.y+textField.frame.size.height + 5);

bottomView.frame = frame;
textField.hidden = NO; 
```

# javascript - 更改所有仅包含“1”的输入字段的样式

> ID：15945518
> 
> 赞同：0
> 
> 时间：2013-04-11T09:41:44.947
> 
> 标签：javascript, jquery, css

我在我的网站上使用了一种风格，它有一个不足之处：数字“1”看起来就像一个大“I”，又像一个小“L”。

如何使用 javascript 动态更改仅包含数字“1”作为值的所有输入字段的字体样式，而无需更改该站点上的所有表单？

（无论如何，我在那个网站上经常使用 jquery）

或者也许使用 CSS3？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:43:38.470

只需更改用于所有输入框的字体系列。您不希望它在字段之间有所不同，这看起来很奇怪

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T11:27:12.617

我写了我的评论“你是否打算让风格随着价值的改变而来回改变”作为一个反问来说明这种方法的笨拙，但如果这真的是你想要的，那当然。

首先，您需要确保在 DOMReady 中设置一次样式，并且在每次更改输入时设置一次。

```
$(function() { 
    $(':text')
        .each(setInputStyle)
        .change(setInputStyle);
}); 
```

然后，您需要确保`setInputStyle`检查您要检查的内容。我不确定您是否要更改*包含* `1`或仅包含*恰好为*1 的输入的所有输入。您将使用以下检查之一：

*   包含：

    ```
    var inputValue1 = this.value.indexOf('1') >= 0; 
    ```

*   完全匹配

    ```
    var inputValue1 = this.value == '1'; 
    ```

*   或者，“仅包含一个”：

    ```
    var inputValue1 = /^1+$/.test(this.value); 
    ```

无论您要查找什么，您都可以将其合并到您的函数中，如下所示：

```
function setInputStyle() {
    var inputValue1 = this.value == '1'; // or something else
    $(this).toggleClass('input-value-1', inputValue1);
} 
```

现在您只需要确保有一个名为的 CSS 类`input-value-1`可以覆盖默认样式。

```
.input-value-1 { font-family: verdana; } 
```

[演示](http://jsfiddle.net/KWh4V/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T09:43:41.563

```
$(function(){
    $.each($('input'),function(){
    if($(this).val() == '1'){
     $(this).css('color','red');
    }
    });
    }); 
```

或者

```
$('input[value="1"]').css('color','red'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T09:51:14.303

如果我理解你是正确的，那么每次输入字段的值包含 1 时，你都需要不同的字体。

这适用于值“1”，也适用于“abc de 1 fg”

**JS**

```
$('input[value*="1"]').css({'font-family':'Helvetica','color':'#990000'}); 
```

在这里查看：http: [//jsfiddle.net/U3weP/1/](http://jsfiddle.net/U3weP/1/)

要使其特定于值 1，只需删除选择器中的 *。

**JS**

```
$('input[value="1"]').css({'font-family':'Helvetica','color':'#990000'}); 
```

要在打字时改变它，您可以使用以下功能，它也会变回正常状态。

**HTML**

```
<input type="text" name="test1" value="1" />
<input type="text" name="test2" value="2" />
<input type="text" name="test3" value="3" />
<input type="text" name="test4" value="abc 1 def" /> 
```

**CSS**

```
.different {
    font-family:'Helvetica';
    color:#990000;
} 
```

**JS**

```
$('input').on('keyup',function() {
    if($(this).val().indexOf('1') != -1) {
        if(!$(this).hasClass('different')) {
            $(this).addClass('different');
        }
    } else {
        $(this).removeClass('different');
    }
}).trigger('keyup'); 
```

查看小提琴[http://jsfiddle.net/U3weP/4/](http://jsfiddle.net/U3weP/4/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T09:44:36.850

尝试值过滤器：

```
$('input[value=1]') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T09:45:11.427

尝试这个

```
$('input:text [value="1"]').css('font-family','Arial') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-11T10:03:50.407

通过在页面底部附加以下代码，您将能够更改所有现有输入的样式并观察它们是否有任何更改。如果`1`将出现在任何输入中`someclass`，则将添加到该元素。如果`1`将被删除，那么课程也会被删除。

```
function onCharacter1Found() {
  var field = $(this),
      classname = "someclass",
      containsChar_1 = field.val().indexOf(1) > 1;
  if(containsChar_1) { 
    field.addClass(classname);
  } else {
    field.removeClass(classname);
  }
};

// update all existing inputs on the page
$("input").each(onCharacter1Found);

// watch for changes
$("input").bind("input", onCharacter1Found); 
```

# java - appendMessages 方法在 javax 邮件中不起作用

> ID：15945519
> 
> 赞同：1
> 
> 时间：2013-04-11T09:41:45.040
> 
> 标签：java, apache, api, email, james

我想将一条消息附加到用户文件夹，但是如果我调用 appendMessages() 方法，它会工作太久，但不会停止。然后邮件服务器显示此消息：“注销客户端 test1@mydomain.com，因为它闲置了很长时间......”并停止连接池。我正在使用 apache james 邮件服务器。与 james 的连接和打开“QUARANTINE”文件夹工作正常，但 appendMessages() 不起作用。

这是我的代码：

```
final String login = "test1@mydomain.com";
final String passw = "test1";
String toAddress = "test2@mydomen.com";

Properties properties = new Properties();
properties.setProperty("mail.store.protocol", "imap");
properties.setProperty("mail.imap.host", myhost);
properties.setProperty("mail.imap.port", "1243");

Session session = Session.getInstance(properties, new Authenticator() {
    @Override
    protected PasswordAuthentication getPasswordAuthentication() {
        return new PasswordAuthentication(login, passw);
    }
});

try {
    MimeMessage mimeMessage;
    mimeMessage = new MimeMessage(session);
    Address[] to = {new InternetAddress(toAddress)};
    mimeMessage.setRecipients(RecipientType.TO, to);
    mimeMessage.setSubject("TEST_SUBJECT");

    MimeMultipart mp = new MimeMultipart();
    MimeBodyPart newPart = new MimeBodyPart();
    newPart.setText("MESSAGE_BODY");
    mp.addBodyPart(newPart);

    //add image file
    newPart = new MimeBodyPart();
    File imgFile = new File("Attachments//test.png");
    FileDataSource fds = new FileDataSource(imgFile);
    newPart.setDataHandler(new DataHandler(fds));
    newPart.setFileName(imgFile.getName());
    newPart.setDisposition(BodyPart.ATTACHMENT);
    mp.addBodyPart(newPart);

    mimeMessage.setContent(mp);

    Store store = session.getStore("imap");
    store.connect(myhost, 1243 , login, passw);
    Folder folder = (IMAPFolder) store.getFolder("QUARANTINE");
            if (!folder.exists()) folder.create(Folder.HOLDS_MESSAGES);
    folder.open(Folder.READ_WRITE);
    folder.appendMessages(new Message[] {mimeMessage});

} catch (MessagingException e) {
    e.printStackTrace();
} 
```

这是java类状态截图：

![在此处输入图像描述](https://i.stack.imgur.com/VJmE2.jpg)

这是詹姆斯状态：

![在此处输入图像描述](https://i.stack.imgur.com/JUyeG.jpg)

有谁知道我的错误在哪里？

# sql-server-2008 - 如何从同一工作组中的计算机连接？

> ID：15945523
> 
> 赞同：0
> 
> 时间：2013-04-11T09:41:52.883
> 
> 标签：sql-server-2008, authentication

我正在做探测以将同一工作组中的计算机连接到其中一台中安装的 SQL Server。

为此，我有两台虚拟机，均使用 Windows XP SP3。在第一个中我有 SQL Server 2008 R2，在第二个中我有 SQL Server Management Studio 2008。我想可以从安装在第二个虚拟机中的 Management Studio 访问第一个 VM 中的数据库。

如果我去查看同一工作组中的计算机，我可以看到两台计算机，一台名为 WinXP1，另一台名为 WinXP2。所以可以互相看到。

在第一台装有 SQL Server 的计算机上，我禁用了防火墙，以消除可能的问题来源。将来我知道必须打开端口 1433（默认端口）。

在第一台机器上，我还启用了 TCP/IP，并在所有 IP 中设置了 1433 端口。

在第一台机器上，我启用了 SQL Browse。

在第二台机器上，我使用 SQL Server Management Studio (SSMS)，在连接窗口中，在服务器名称中，我可以选择一个，我转到网络服务器，我可以看到服务器 WinXP1\SQLExpress，所以第二台计算机可以看到第一台电脑。

如果我使用 tcping，我可以看到用于第一个 VM 的 ip 中的端口 1433 是打开的。

但是，当我尝试连接时，我收到错误 18452，表示我尝试从不受信任的域连接。

我不是尝试从域连接，而是从工作组连接。另外，我想使用 Windows 身份验证，没有混合身份验证。

所以我想知道这是否可能。

编辑：在两台计算机上我都有相同的用户名和密码，因为第二台机器是第一台机器的克隆。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:36:06.990

好吧，问题是我在两台计算机上都使用了同一个用户，但是这个用户没有密码。需要在两台计算机中存在相同用户且密码相同。

# android - android更新应用程序没有任何警报

> ID：15945524
> 
> 赞同：0
> 
> 时间：2013-04-11T09:41:56.433
> 
> 标签：android, publish, updates

我正在编写一个 android 应用程序，我想将它发布到 google play。发布后，如果我更新我的应用程序，我不想提醒（关于更新）安装我的应用程序的用户。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:43:30.703

应用程序更新由平台处理，**用户**将其设置为自动更新的唯一方法是在 Google Play 应用程序中勾选正确的选项。应用程序本身无法做到这一点。

# html - 使用带有位置的背景滑块时，菜单上的悬停消失：固定和 z-index

> ID：15945526
> 
> 赞同：9
> 
> 时间：2013-04-11T09:42:05.363
> 
> 标签：html, css, internet-explorer, z-index, css-position

我发现如果我想进入第二级菜单，主菜单的悬停效果就会消失。在这里您可以找到示例：

[http://bfb.bplaced.net/ie/](http://bfb.bplaced.net/ie/)

HTML：

```
<div id="background-slider">
    <a href="http://www.hdwallpapersarena.com/wp-content/uploads/2012/10/Opera-Background-Blue-Swirls.jpg"></a>
    <a href="http://www.hdwallpapersarena.com/wp-content/uploads/2012/10/green-abstract-background.jpg"></a>
</div>
<div id="menu">
    <nav>
        <ul class="nav-level-1">
            <li class="level-1 clearfix">
                <a href="unternehmen.html" class="level-1">Unternehmen</a>
                <ul class="nav-level-2">
                    <li class="level-2"><a href="/unternehmen/die-firma.html" class="level-2">Die Firma</a></li>
                    <li class="level-2"><a href="/unternehmen/das-team.html" class="level-2">Das Team</a></li>
                    <li class="level-2"><a href="/unternehmen/allgemeines.html" class="level-2">Allgemeines</a></li>
                </ul>
            </li>
        </ul>
        <div class="clearer"></div>
    </nav>
</div>
<div id="script-section" class="hidden">
    <script src="./js/jquery.superbgimage.min.js"></script>
    <script>
        $(document).ready(function(){
            // Options for SuperBGImage
            $.fn.superbgimage.options = {
                transition: 1,
                speed: 'slow',
                randomtransition: 0,
                slideshow: 1,
                slide_interval: 6000,
                randomimage: 0
            };

            // initialize SuperBGImage
            $('#background-slider').superbgimage().hide;
        });
    </script>
</div> 
```

CSS：

```
#menu {
    position: fixed;
    z-index: 4;
    left: 23px;
    bottom: 40px;
}

ul.nav-level-1 {
    float: left;
    text-align: left;
}

ul.nav-level-1 li.level-1 {
    /*float: left;*/
}

ul.nav-level-1 li.level-1 a.level-1 {
    font-family: 'SourceSansProBlack', Arial, sans-serif;
    font-size: 36px;
    line-height: 40px;
    text-transform: uppercase;
    text-decoration: none;
    color: #123373;
    padding: 0 5px;
    transition: color 0.25s ease 0s, background-color 0.25s ease 0s;
    float: left;
}

ul.nav-level-1 li.level-1 a.level-1:hover {
    text-decoration: none;
    color: #123373;
    background-color: #FFF;
    display: inline-block;
}

ul.nav-level-1 li:hover a {
    background-color: #FFF;
}

ul.nav-level-1 li.level-1:hover ul.nav-level-2 {
    display: block;
}

ul.nav-level-2 {
    display: none;
    float: left;
    width: 390px;
    padding-left: 10px;
    text-align: left;
}

ul.nav-level-2  li.level-2 {
    margin-bottom: 3px;
    margin-right: 5px;
    float: left;
}

ul.nav-level-2  li.level-2 a.level-2{
    font-family: 'SourceSansProBold', Arial, sans-serif;
    font-size: 14px;
    line-height: 16px;
    text-transform: uppercase;
    text-decoration: none;
    color: #123373;
    padding: 0 5px;
    background-color: #FFF;
    transition: color 0.25s ease 0s, background-color 0.25s ease 0s;
}

ul.nav-level-2  li.level-2 a.level-2:hover{
    background-color: #123373;
    color: #FFF;
} 
```

我正在使用的滑块称为[SuperBGImage](http://dev.andreaseberhard.de/jquery/superbgimage/)。**如果我删除滑块一切正常！**

我认为这是 IE 的 z-Index 错误，但我尝试了不同的选项，`position: relative;`但没有成功添加。如何在 IE 中修复悬停效果？

我尝试了这个 JS 代码，但它也无济于事：

```
$('li.level-1').hover(function() {
    $(this).children('ul.nav-level-2').removeClass('hidden');
    $(this).children('ul.nav-level-2').addClass('visible');
});
$('ul.nav-level-2').mouseout(function() {
    $(this).removeClass('visible');
    $(this).addClass('hidden');
}); 
```

也许这是一个浮动问题。如果我删除`float: left;`它会更好，但它不是应该的设计。

**编辑：**

[在这里](http://www66.zippyshare.com/v/24356058/file.html)您可以下载该项目。我注意到另一件事。如果我启动 Internet Explorer，他会问我是否要启动脚本或 Active-X 元素。他为什么这么问我？我知道这是因为滑块，但它应该是普通的 Javascript。也许滑块中的 JS 在这里做了一些特别的事情......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T15:54:01.603

我已经让它在 IE9 和 IE10 上***工作，也应该在 IE8***上工作，使用透明背景并悬停在`.clearfix`

查看更新的 - **[jsFiddle](http://jsfiddle.net/apaul34208/PNTcG/30/)**

我改变了这个-

```
ul.nav-level-1 li.level-1 a.level-1:hover {
    text-decoration: none;
    color: #123373;
    background-color: #FFF;
    display: inline-block;
} 
```

对此——

```
.clearfix:hover ul.nav-level-1, li.level-1, a.level-1{
    text-decoration: none;
    color: #123373;
    background: rgba(0, 0, 0, 0.0); /*** TRANSPARENT BACKGROUND FIX ***/
    display: inline-block;
} 
```

并为此添加了高度和宽度-

```
.clearfix {
    display:block;
    width:100%;    /* added height and width */
    height:50px;
} 
```

对于 IE7 及以下添加-

```
<!--[if lte IE 7]>
    <style type="text/css">
 .clearfix:hover ul.nav-level-1, li.level-1, a.level-1 {
    text-decoration: none;
    color: #123373;
    background:#ffffff;
    display: inline-block;
}
    </style>
<![endif]--> 
```

上述解决方法只是将透明 rgba 替换为纯白色。在古代 IE 中它不会那么漂亮，但很少有东西是这样的。

**请注意，`<nav>`IE8 及以下版本不支持**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:41:33.657

CedricReichenbach 给我带来了另一个想法。添加透明背景图像 (1x1) 似乎适用于 IE：

```
.level-1 ul {
    background-image: url(../img/transparent-background.png);
    background-repeat: repeat;
} 
```

虽然会更多地测试它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T07:57:06.333

使用 Position:Absolute 它将起作用:-)

# javascript - JS 正则表达式被跳过？

> ID：15945531
> 
> 赞同：0
> 
> 时间：2013-04-11T09:42:19.463
> 
> 标签：javascript, regex

我正在尝试验证一个主题的字段，稍后我将在使用 mail() 发送电子邮件时发布并使用该主题。

到目前为止，我已经完成了正则表达式，使用前实习生的字段验证编辑了现有的一段 Javascript，在我的 HTML 输入字段中添加了一个模式，并在下一页上编写了一个小的服务器端 PHP/正则表达式验证。乍一看似乎工作正常，但是当我删除输入字段中的模式（通过使用 Chrome 的检查元素完成）时，完全跳过了 Javascript 检查并发布了我的表单。仅由于服务器端检查，我才返回上一页。

这是我使用的一些代码：

**Javascript**

```
<script type="text/javascript">
    if($.browser.msie || navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1)
    {
        jQuery(function(){
            $("#submit").click(function(){
            $(".error").hide();

            var hasError = false;
            var onderwerpReg = /^[a-zA-Z0-9_]{4,20}[^\/'"<>;]*$/;
            var onderwerpVal = $("#subject").val();

            if (onderwerpVal == '')
            {
                $("#subject").html('<br/><span class="error">Vul een onderwerp in.</span>');
                var hasError = true;
            }
            else if (!onderwerpReg.test(onderwerpVal))
            {
                $("#subject").html('<br/><span class="error">Onderwerp bevat gefilterde karakters.</span>');
                var hasError = true;
            }
            if (hasError == true)
                return false;
            });
        });
    }
</script> 
```

**HTML**

```
<input type="text" id="subject" name="subject" size="30" placeholder="Onderwerp" required aria-required="true" pattern="^[a-zA-Z0-9_]{4,20}[^\/'&quot;<>;]*$"/> 
```

我的问题是：我的 Javascript 怎么可能被跳过？我没有正确加载它吗？Javascript 是完全错误的吗？另一方面，它适用于我网站上的其他表单，所以我想我会以同样的方式坚持验证字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:51:41.620

我可能错了，但是`if($.browser.msie || navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1)`...... 仅当您使用 IE 或 Safari 时才会进行检查。
我不确定，但可能是浏览器阻止发送有错误的表单（模式不匹配），所以他这样做是为了只检查不支持模式属性的浏览器（这不是一个问题，因为无论如何用户可以做任何他想做的事情来跳过 JS 中的验证）。同样，我不确定。

**编辑：**
关于发送错误表单的部分。我已经测试过，只有当它与模式匹配时才能发送它（或者是一个空字符串，但有所需的属性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:06:27.883

正如 Loamhoof 已经说过的，您的 JS 代码不是在 chrome 中执行的。

> 但是当我删除输入字段中的模式（通过使用 Chrome 的检查元素完成）时，完全跳过了 Javascript 检查

该`pattern`属性与您的 JavaScript 无关。

HTML5 规范的一部分是让浏览器本身直接验证表单字段，而无需任何脚本。

因此，您的 JavaScript 代码实际上只是 Internet Explorer 的后备解决方案，它还没有实现 HTML5 表单字段验证。（也许 IE 10 可以，但 <= 9 肯定不行。）

至于您的问题，如果忽略通过 JS 进行的验证是否有害 - 不，如果您在服务器端验证数据（您绝对总是**必须**这样做），实际上不会“有害”。拥有客户端验证只是用户友好性的问题，因为它使用户免去了提交尚未正确填写的表单的麻烦，只是在下一页上获得服务器端生成的错误消息。您是否希望保留此脚本以便在用户使用 IE 时为他们提供这种额外的舒适功能，或者您是否可以接受它仅在现代浏览器中以 HTML5 方式工作，这取决于您。

# php - 如何从 PHP 中的表格中获取文本并通过 mailto 链接在电子邮件主题中显示该文本

> ID：15945541
> 
> 赞同：0
> 
> 时间：2013-04-11T09:43:09.400
> 
> 标签：php, mailto

我在网站上有一个表格，其中包含一个带有标题和参考的表格。在此表单的底部，我有一个提交按钮，我想创建一个 mailto 链接，该链接打开一封电子邮件，其中“发件人”字段自动填充了他们在表单中输入的用户电子邮件地址。我还想使用表单上表格中的标题和参考元素自动填充“主题”字段。

有人可以告诉我如何使用 PHP 来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:50:04.557

另请参阅[Mailto 语法教程](http://www.addressmunger.com/mailto_syntax_tutorial/)。

生成此链接时，您需要使用在表中使用的相同 PHP 语句。

因为您没有提供任何代码，所以这里有一个通用的方法来解决这个问题。

例如，您的表格已填充

```
<table>
  <tr>
    <td>Title:</td>
    <td><?php echo $data['title']; ?></td>
  </tr>
  <tr>
    <td>Reference:</td>
    <td><?php echo $data['ref']; ?></td>
  </tr>
</table> 
```

您必须创建链接：

```
<a href="mailto:email@domein.com?subject=<?php echo $data['title']; ?> - ref. <?php echo $data['ref']; ?>">Send mail</a> 
```

# java - 重绘后玻璃板消失

> ID：15945543
> 
> 赞同：0
> 
> 时间：2013-04-11T09:43:15.843
> 
> 标签：java, swing, jpanel, glasspane

我的玻璃板有问题。当我第一次展示我的面板时，一切都很好。但是当我想重新粉刷这个面板时，因为组件应该改变（方法`createPanel()`）然后玻璃面板消失。当我调整框架大小时，它再次可见。我不知道为什么会发生这种情况，我的面板看起来像：

```
package GUI;

import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.GridLayout;
import java.awt.Insets;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;

public class TurnajPanel extends JPanel {

    private static final long serialVersionUID = 1L;
    private GridBagConstraints c = new GridBagConstraints();
    private JFrame frame;

    public TurnajPanel(JFrame frame) throws Exception {
        this.frame = frame;
        createPanel();
    }

    public void createPanel() throws Exception {
        removeAll();
        setLayout(new GridBagLayout());

        addMenu();

        revalidate();
        repaint();
    }

    private void addMenu() {
        JPanel panel = new JPanel(new FlowLayout(FlowLayout.RIGHT, 0, 20));
        panel.setBorder(BorderFactory.createTitledBorder("aaaaaaaaaaaaaa"));
        JPanel innerPanelTlacidiel = new JPanel(new GridBagLayout());
        panel.add(innerPanelTlacidiel);
        c.fill = GridBagConstraints.HORIZONTAL;
        c.gridx = 1;
        c.gridy = 0;
        c.weighty = 0;
        c.anchor = GridBagConstraints.FIRST_LINE_END;
        c.insets = new Insets(0, 5, 0, 0);
        final JPanel panelTlacidiel = new JPanel(new GridLayout(0, 1, 5, 5));
        innerPanelTlacidiel.add(panelTlacidiel, c);
        frame.setGlassPane(panel);
        frame.getGlassPane().setVisible(true);

    }

    public static void main(String[] args) throws Exception {

        JFrame frame = new JFrame();
        final TurnajPanel turnaj = new TurnajPanel(frame);
        JScrollPane scrolovaciPanel = new JScrollPane(turnaj);
        frame.add(scrolovaciPanel);

        frame.setSize(new Dimension(400, 400));
        frame.setVisible(true);
        frame.addKeyListener(new KeyListener() {

            @Override
            public void keyTyped(KeyEvent e) {
                // TODO Auto-generated method stub

            }

            @Override
            public void keyReleased(KeyEvent e) {
                System.out.println("????????????????");
                try {
                    turnaj.createPanel();
                } catch (Exception e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
            }

            @Override
            public void keyPressed(KeyEvent e) {
                // TODO Auto-generated method stub

            }
        });
    }
} 
```

当我在方法中添加一行时`createPanel()`

```
public void createPanel() throws Exception {
    removeAll();
    FrameFactory.turnajFrame.getGlassPane().setVisible(false); // new line
    setLayout(new GridBagLayout());

    addMenu();

    revalidate();
    repaint();
} 
```

然后它就像一个魅力。有人可以向我解释这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:28:19.973

*   应该

    1.  frame.rootPane.setGlassPane()

    2.  将 LayoutManager 添加到 GlassPane 或覆盖 JPanel 的 getPreferredSize

*   不应该

    1.  KeyListener to JFrame, JFrame 默认为 KeyEvents API 中的missine 通知器

    2.  为什么要重载 void(s)，创建父 JPanel 作为局部变量，

    3.  为什么你重载 void(s)，子 JPanel 应该只创建一次，然后只使用 setVisible(true/false)，在 setVisible(false) 上重置 JComponents 中的值

*   [看我的问题](https://stackoverflow.com/questions/8715807/layering-multiple-glasspanes-in-a-root-container)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:50:58.773

如果你简单地添加`frame.revalidate()`之后`frame.getGlassPane().setVisible(true)`它会起作用。

# android - 使用 NdefMessage 编写图像

> ID：15945545
> 
> 赞同：2
> 
> 时间：2013-04-11T09:43:17.687
> 
> 标签：android, tags, nfc, ndef

我正在尝试在 Ndef 标签上写入图像，目前，我可以编写它，但是当我尝试使用任何市场应用程序读取它时，它们会将其视为文本消息。这是我编写图像的一段代码：

```
 Bitmap mBitmap = Bitmap.createScaledBitmap(mPhoto, 100, 100, true);
        ByteArrayOutputStream stream = new ByteArrayOutputStream(); 
        mBitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
        byte[] byteArray = stream.toByteArray();
        NdefRecord picRecord = new NdefRecord(NdefRecord.TNF_MIME_MEDIA, "image/png".getBytes(), null, byteArray);
        String informations = "name: "+name + "\ntitle: " + title + "\naddress: "+ address + "\ncity: "+ city + "\nphone: "+ phone + "\nmail: "+mail;
        NdefRecord textRecord = createTextRecord(informations);
        NdefMessage message = new NdefMessage(new NdefRecord[]{picRecord, textRecord}); 
```

我也试过这样写图像：

```
 NdefMessage msg = new NdefMessage(new NdefRecord[] {createMimeRecord("image/png", byteArray), textRecord}); 
```

使用方法 createMimeRecord ：

```
 public NdefRecord createMimeRecord(String mimeType, byte[]payload) {
        byte[] mimeBytes = mimeType.getBytes(Charset.forName("USASCII"));
        NdefRecord mimeRecord = new
        NdefRecord(NdefRecord.TNF_MIME_MEDIA,
        mimeBytes, new byte[0], payload);
        return mimeRecord;
        } 
```

这是我尝试使用“TagInfo”之类的应用程序读取图像时得到的结果：![在此处输入图像描述](https://i.stack.imgur.com/rMqG6.png)

短信写得很好，可以正常阅读。我尝试使用“createMime(String mime type, byte[] data) 但此方法似乎“未定义”。我尝试以相同的结果压缩 Jpeg 格式的位图图像。我也尝试过找到通过 NdefMessages 发送图像的示例，但没有找到。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T07:38:25.310

最后在搜索应用程序在 NFC 标签上写入和读取名片后，一无所获。我决定制作自己的名片并自己阅读。这是我用来使用 Ndef Message 写卡的代码：

```
 Bitmap mBitmap = mPhoto;
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        mBitmap.compress(Bitmap.CompressFormat.JPEG, 80, stream);
        byte[] byteArray = stream.toByteArray();
        NdefRecord picRecord = new NdefRecord(NdefRecord.TNF_MIME_MEDIA,  "image/jpeg".getBytes(), null, byteArray);
        String informations = "name: "+name + "\ntitle: " + title + "\naddress: "+ address + "\ncity: "+ city + "\nphone: "+ phone + "\nmail: "+mail + "\n";
        NdefRecord textRecord = createTextRecord(informations);
        NdefMessage message = new NdefMessage(new NdefRecord[]{picRecord, textRecord}); 
```

这是阅读部分的代码：

```
 NdefRecord picRecord = records[0];
        NdefRecord infoRecord = records[1];
        byte[] picload = picRecord.getPayload();
        byte[] infoload = infoRecord.getPayload();
        Bitmap photo = BitmapFactory.decodeByteArray(picload, 0, picload.length);
        String textEncoding = ((infoload[0] & 0200) == 0) ? "UTF-8" : "UTF-16";
        int languageCodeLength = infoload[0] & 0077;
        String text = null;
        try{
            String languageCode = new String(infoload, 1, languageCodeLength, "US-ASCII");
            text = new String(infoload, languageCodeLength + 1,infoload.length - languageCodeLength - 1, textEncoding);
        }catch(Exception e){
            Alert("String decoding", e.toString());
            return;
        } 
```

Jpeg 加密有助于在不损失太多质量的情况下压缩图像。标签上的传输需要 2-3 秒，但解决方案效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:45:26.520

如果您的用例是将名片存储在 NFC 标签上，我建议您不要存储图像数据，而是存储图像的链接。否则，您将很难将名片存储在普通标签上（标签的通常大小为 1K 或 4K），并且传输数据的时间也会太长。根据 vCard 规范，您可以同时执行以下操作：以 base64 格式存储二进制图像数据以及 url 链接（我强烈推荐）。

有关 vCard 格式的更多信息，请参见此处：

[http://en.wikipedia.org/wiki/VCard](http://en.wikipedia.org/wiki/VCard)

或在此处更详细地说明：

[https://www.rfc-editor.org/rfc/rfc2426#section-3.1.4](https://www.rfc-editor.org/rfc/rfc2426#section-3.1.4)

# python - 在 Python 中读取 .xml Excel 文件

> ID：15945550
> 
> 赞同：1
> 
> 时间：2013-04-11T09:43:32.657
> 
> 标签：python, xml, excel

我有一些由 Excel 生成的 .xml 文件，我必须用 Python 阅读这些文件。我寻找 Python Excel 库，但它们似乎不读取 .xml 文件。手动解析似乎很复杂。你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:21:01.230

也许普通的 xml 解析（lxml.etree）会起作用？[http://lxml.de/tutorial.html](http://lxml.de/tutorial.html)

# asp.net - 在 asp.net 中使用 linq 访问多个数据库

> ID：15945551
> 
> 赞同：0
> 
> 时间：2013-04-11T09:43:36.500
> 
> 标签：asp.net, linq

我想使用 linq 使用位于不同服务器中的多个数据库。

我是新手。请任何人帮助我。

我在一张表中拥有我想要的所有连接字符串。动态地，我想使用 linq 访问不同的数据库。可能吗？

这是我的代码：

```
for (int i = 0; i < chkSchool.Items.Count; i++)
{
      if (chkSchool.Items[i].Selected)
      {
           school = com.GetSchoolNames(chkType.SelectedItem.ToString(), chkSchool.Items[i].Text);
           foreach (var item in school.ToList())
           {
               entity.dbconnection = item.DatabaseConn;
               Session["dbconnection"] = entity.dbconnection;
           }
           string news = data.GetNews(Convert.ToInt32(chkYear.SelectedItem.ToString()));
           string result = data.GetResult(chkYear.SelectedItem.ToString());
     }
} 
```

每个学校都有不同的数据库连接。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:33:14.843

您所描述的内容在 LINQ to SQL 或 LINQ to Entities 中是不可能的。`DataContext`并且`DbContext`在实例化它们时只能针对单个数据库。您必须创建另一个针对不同数据库的实例，但这是检索到的实体之间的一种断开连接的方法。

我实现这一目标的唯一方法是让一个中央数据库使用同义词引用所有数据库中的所有表。有了这个，您可以定位中央数据库，这将影响您跨数据库的所有表。同义词的好处是您可以执行所有 CRUD 操作，并将它们分派到真实表。实际上，您可以使用同义词（表、视图、函数、存储过程）映射任何对象，并将它们组合到一个数据库中。也可以像在 SSMS 中那样对跨数据库的不同表中的表执行连接查询。

现在，如果您的所有数据库都具有相同的结构，您将遇到问题。这种方法适用于具有不同结构的数据库，并且您希望从业务角度使这些结构相互交流。

希望这可以帮助。

**更新：** 假设你有`DB1.dbo.Products`桌子`DB2.dbo.Shipments`。如您所见，它们存在于 2 个不同的数据库中。我正在谈论的解决方案需要第三个数据库（`ALL_DBs`），您可以在上面为上面的 2 个表创建同义词，如下所示：

```
USE ALL_DBs
CREATE SYNONYM dbo.Products FOR DB1.dbo.Products
CREATE SYNONYM dbo.Shipments FOR DB2.dbo.Shipments
```

正如您所看到的，数据仍然存储在其中`DB1`，`DB2`但是如果您定位，您可以从相同的上下文中访问它们，`ALL_DBs`因为它具有指向其他数据库中其他对象的指针。现在您可以有一个 DbContext 或 DataContext 指向`ALL_DBs`并且您将能够同时查询两个表。

# google-app-engine - 我可以在 Google Cloud End Point 中返回泛型吗

> ID：15945554
> 
> 赞同：4
> 
> 时间：2013-04-11T09:43:40.700
> 
> 标签：google-app-engine, google-cloud-endpoints

当我返回一个泛型时，端点 api 文件似乎消失了。示例代码已粘贴。

```
@ApiMethod
public RestResponse<Container> testGeneric() {
    Container container = new Container();

    container.testLong =  (long)4345;
    container.testDate = new Date();
    container.testString = "sathya";
    container.testDouble = 123.98;
    container.testInt = 123;

    RestResponse<Container> response = new RestResponse<Container>();
    response.t = container;

    return response;        
} 
```

这是端点中的错误吗？根本不允许这样的事情吗？

问候， 沙迪亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:41:16.777

我不认为这是一个错误，但它只是不被支持，就像你不能`String`从你的端点返回一个表单一样......

为了检查问题所在，如果您使用的是 Google Plugin for Eclipse，您可以查看下面的错误日志`Window -> Show View -> Error Log`以获取更多信息。

# .htaccess - 禁用特定 url 的 url 重写

> ID：15945559
> 
> 赞同：2
> 
> 时间：2013-04-11T09:43:55.973
> 
> 标签：.htaccess, url-rewriting

我有以下 .htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^([^>]+)/([^>]+)/([^>]+)/([0-9]+)$ index.php?region=$1&city=$2&course=$3&page=$4
RewriteRule ^([^>]+)/([^>]+)/([^>]+)$ index.php?region=$1&city=$2&course=$3
RewriteRule ^([0-9]+)$ index.php?page=$1 
```

如果我访问

```
templates/firstTemplate/css/style.css 
```

它重定向到 index.php，所以我的 style.css 没有应用，我怎样才能禁用这个特定 url 的 url 重定向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:50:48.777

条件仅适用于紧随其后的规则，这意味着您的第二条和第三条规则没有任何需要的条件。您需要为其他两条规则重复它们：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^([^>]+)/([^>]+)/([^>]+)/([0-9]+)$ index.php?region=$1&city=$2&course=$3&page=$4

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^([^>]+)/([^>]+)/([^>]+)$ index.php?region=$1&city=$2&course=$3

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^([0-9]+)$ index.php?page=$1 
```

# html - 在 Html/CSS 上缩放图像滚动

> ID：15945567
> 
> 赞同：1
> 
> 时间：2013-04-11T09:44:11.290
> 
> 标签：html, css, webpage

是否可以制作内容像正常滚动一样的网页，但背景图像滚动较慢？例如，用户滚动了 100px。内容会滚动 100px，但背景图像只会滚动 20px 左右。是否可以使用 Html5 和 CSS3 做到这一点？还是我需要其他语言/库，例如 Java 或 Flash？

感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:50:09.687

[你应该使用这个 jquery 插件](http://lab.victorcoulon.fr/javascript/scrolly/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:51:21.347

是的，有可能！

你可以用 jquery.parallax 做到这一点。请查看此页面：

[http://stephband.info/jparallax/](http://stephband.info/jparallax/)

jParallax 将节点转换为响应鼠标移动的绝对定位层。根据它们的尺寸，这些层以不同的速率移动，以一种视差的方式。

# javascript - CheckBox 值中的文本框，当我在 TextBox 中键入时取消选中

> ID：15945568
> 
> 赞同：1
> 
> 时间：2013-04-11T09:44:13.550
> 
> 标签：javascript, jquery, html, internet-explorer, firefox

我在 Checkbox 值中生成一个文本框。但是当我单击文本框以输入内容时，复选框会自动取消选中。

```
<span id="TRAVEL_TYPE_1"><input id="TRAVEL_TYPE_0" type="checkbox" onclick="UpdateTravelInformations();">
    </input><label for="TRAVEL_TYPE_0">
  TRP1 : Transports en commun 2ème classe, sur justificatifs
  <div id="TRAVEL_TYPE_1_INFORMATION" class="infoChoixFDM" style="display: block;">
     <input id="MONTANTMAX" class="positive-integer" type="text" value="20" maxlength="5" style="width:50px; text-align:center" runat="server"></input>
   €
  </div>
 </label>
</span> 
```

当我在 MONTANTMAX 的点击事件上将检查设置为 false 时，该问题在 Chrome 上得到了部分解决。但是在 IE 和 Firefox 中它不起作用......

```
$('#MONTANTMAX').click(function () {
    if (!$.browser.msie) {
        $('#TRAVEL_TYPE input').get(0).checked = false;
} 
```

有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:49:45.373

您必须`<label>`在文本的末尾关闭

```
<span id="TRAVEL_TYPE_1"><input id="TRAVEL_TYPE_0" type="checkbox" onclick="UpdateTravelInformations();">
    </input><label for="TRAVEL_TYPE_0">
  TRP1 : Transports en commun 2ème classe, sur justificatifs</label>
  <div id="TRAVEL_TYPE_1_INFORMATION" class="infoChoixFDM" style="display: block;">
     <input id="MONTANTMAX" class="positive-integer" type="text" value="20" maxlength="5" style="width:50px; text-align:center" runat="server"></input>
   €
  </div>
</span> 
```

否则，输入将被分配为复选框的标签。

更新：JS解决方案

```
$(function(){
  $('#MONTANTMAX').click(function (e) {
    e.preventDefault();
    $('#TRAVEL_TYPE_0[checked=false]').prop('checked', true);
  });                                             
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:47:11.543

从外观上看，您的代码有点混乱。

尝试这个：

```
$('#MONTANTMAX').click(function () {
    $('#TRAVEL_TYPE_0').prop('checked', true);
} 
```

# python - numpy 中的弃用警告

> ID：15945569
> 
> 赞同：2
> 
> 时间：2013-04-11T09:44:16.067
> 
> 标签：python, numpy, scikit-learn

我有一个运行 scikit Naive Bayes 分类的脚本，我在 linux 机器上编写。当我将它传输到 Windows 机器时，我收到一个弃用警告：

> DeprecationWarning：在不兼容的种类之间隐式转换......

在 linux 版本中，我有 numpy 版本 1.6.1，在 windows 中，numpy 版本是 1.7.1rc1。

将浮点数列表转换为二维数组时会引发警告。我应该忽略警告吗？它与numpy版本的变化有关吗？

铸造似乎在两​​台机器上都可以正常工作......

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T09:50:45.377

您当然应该更新您的代码，以便警告消失。也许通过从列表中显式创建一个 Numpy 数组。

我想通过铸造你的意思是一些自动转换，比如：

```
array([1., 2, 3]) * [3, 4, 5] 
```

负责任的似乎是最近合并的以下拉取请求。最好的解释在文件中`test_ufunc.py`。

[https://github.com/numpy/numpy/pull/451/files](https://github.com/numpy/numpy/pull/451/files)

# google-drive-api - Drive SDK：实时文档中的二进制 Blob

> ID：15945570
> 
> 赞同：3
> 
> 时间：2013-04-11T09:44:22.257
> 
> 标签：google-drive-api

我正在开发一个基于 Web 的**生产力应用程序**。所以我认为 Google Drive SDK，特别是**Drive Realtime API**，将非常适合这个应用程序。

我想我应该将文档存储为带有附加[实时模型的](https://developers.google.com/drive/realtime/reference/gapi.drive.realtime.Model)[快捷方式文件](https://developers.google.com/drive/integrate-create#create_a_shortcut_to_a_file)，原因如下。

*   我想使用实时 API
*   文档说快捷方式文件提供了与内置应用程序相同的用户体验
*   我的应用程序制作的文档类型没有标准化格式（因此对它们进行序列化并让人们将它们同步到他们的桌面几乎没有意义）。

但是，我需要嵌入图像（二进制 blob）。我无法将这些存储在实时模型中，因为它不是为大型 blob 设计的。如果有办法将二进制 blob 嵌入到实时模型中，请纠正我。

**那么如何将二进制 blob 与附加到快捷方式文件的实时模型相关联呢？**

我能想到的唯一方法是将 blob 存储在 blobstore 或*隐藏的 appdata 文件夹*中。这需要我做一个 cron 工作来垃圾收集 blob，以防它们使用的快捷方式文件被删除。

*   **我是否缺少任何明显的解决方案？**
*   **是否适当使用隐藏的 appdata 文件夹？**（或者用户是否会删除这些数据并惊讶于他们文件中的所有图像，他们没有删除，都消失了）
*   **删除快捷方式文件时有什么方法可以通知？**
*   **我应该多久对 Blob 进行一次垃圾收集？**（即检查他们所属的快捷方式文件是否已被删除）
*   **我可以相信快捷方式文件的所有者永远不会改变吗？**（如果发生这种情况，我应该如何垃圾收集二进制 blob？）

我想将二进制 blob 存储在 Drive 上（在隐藏的 appdata 文件夹中）。这样，用户就不会为我的应用程序特定的图像存储的驱动器存储付费。我想如果用户购买了云端硬盘存储空间，然后必须为我的应用程序购买特定于应用程序的存储空间，这对他们来说似乎很随意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:12:33.520

如果您愿意将元数据文件存储在 appdata 上，则不需要快捷方式。为您在外部存储的每个 blob 触摸 appdata 上的空白文件。使用这些空白文件构建协作功能。

您不必担心 appdata 文件的所有权，因为用户或其他应用程序无法更改它们。

我们目前没有通知系统来推送更改。您可以轮询[更改资源](https://developers.google.com/drive/v2/reference/changes/list)以查看是否有任何删除。垃圾收集调度与元数据的大小以及您如何尊重用户的配额有关。用户会意识到他们正在丢失数据，这可能会影响他们正在删除应用程序数据的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T02:59:10.973

您是正确的，您可能不想将二进制 blob 直接存储在 Realtime 文档中，尤其是当它们是大型高质量图像时。这会使模型膨胀，如果尺寸太大，可能会导致问题。

将它们存储在云端硬盘中的其他位置并将它们链接到文档中可能是有意义的。但是，挑战在于您需要确保文档上的所有用户都有权查看他们。出于这个原因，我认为应用程序数据文件夹不会起作用。我认为您无法共享该文件夹中的任何内容，因此协作者将无法看到图像。

您可能只是将文件存储在常规文件夹中。使用正确的 UI，您可以让用户清楚地知道发生了什么，以便他们了解文件存在的原因。

# javascript - 2 个单词字符串未通过查询字符串

> ID：15945573
> 
> 赞同：0
> 
> 时间：2013-04-11T09:44:33.187
> 
> 标签：javascript, jquery, query-string

我正在尝试通过查询字符串传递多个值，并且我做了很多工作并且能够使用 jquery 将单个单词的值传递给 php 页面。但是当我试图传递用户的名字时说“Vishal Deb”它并没有传递整个名字。我在 Fire Fox Web 控制台中检查了它只通过了前半部分名称意味着只通过了“Vishal”。这是我的 jQuery 代码

```
$(".searchBtn").click(function(){
    showLoader();

    $('#sub_cont').fadeIn(1500);
    $("#content #sub_cont").load("search.php?name=" + $("#name").val() + "&admission_year=" + $("#addyear").val() + "&branch=" + $("#branch").val() + "&course=" + $("#course").val() + "&cclass=" + $("#cclass").val()+ "&fathername=" + $("#fathername").val()+ "&ph1=" + $("#ph1").val()+ "&dura=" + $("#dura").val(), hideLoader());
}); 
```

这就是我作为 Vishal Deb 输入后在 Fire Fox Web 控制台中得到的

> [15:01:44.149] GET //localhost/daponlinein/admin/search.php?name=%27vishal [HTTP/1.1 200 OK 1044ms]

为什么会出现这个问题，任何人都可以指导我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:48:20.190

空格是 URL 查询字符串值中的无效字符。您必须将其编码为`%20`.

因此，您生成的 URL 应如下所示：

```
search.php?name=vishal%20deb 
```

不要忘记调整您的 PHP 代码以正确地序列化和反序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:51:36.537

将其编码为：

```
var name = encodeURIComponent($("#name").val()); 
```

# c# - 序列化一个“不可序列化”的对象

> ID：15945579
> 
> 赞同：1
> 
> 时间：2013-04-11T09:44:40.210
> 
> 标签：c#, .net

我有一些类型，我真的需要序列化这些类型的实例，但它们没有标记为可序列化，我无法修改它们。所以我正在寻找一种深度转储内存保存。我已经尝试过 BinaryFormatter 等，但它们也需要可序列化的属性......

有任何想法吗 ？对于我的特殊情况，还没有找到很多东西...... :'(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:47:13.857

最合乎逻辑的方法是创建一个可序列化的新对象，其中包含不可序列化对象的所有属性。然后添加函数以从不可序列化的对象构造对象的实例，反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:47:11.607

[Serializable] 对于序列化不是必须的，对于二进制序列化，这不是必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:49:42.023

考虑使用[protobuf-net：.NET 的快速、可移植、二进制序列化](http://code.google.com/p/protobuf-net/)

代码示例：

```
// write to a file
Serializer.Serialize(outputStream, person);

...

// read from a file
var person = Serializer.Deserialize<Person>(inputStream); 
```

# database - 用于 MS SQL 的内存缓存数据库

> ID：15945584
> 
> 赞同：0
> 
> 时间：2013-04-11T09:44:49.667
> 
> 标签：database, caching, in-memory-database, timesten

是否有可以与 Ms sql server 耦合的内存数据库。即，我将使用内存数据库系统作为缓存，将 ms sql 作为我的主要后端数据库。例如- Timesten 与 oracle 的集成。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:56:11.050

是的！要坚持使用 Microsoft 堆栈，请查看 App Fabric： [http ://en.wikipedia.org/wiki/AppFabric#AppFabric_Caching](http://en.wikipedia.org/wiki/AppFabric#AppFabric_Caching)

它是一个内存分布式缓存，您可以在其中有效地缓存数据库调用，这样您的客户端就不必经常访问数据库。

我已经在生产中使用它并且效果很好。当您需要扩展时，您可以轻松启动新节点，它们将加入集群并自动重新分配数据。

# python - 写入标准输入并正确打印结果

> ID：15945585
> 
> 赞同：2
> 
> 时间：2013-04-11T09:44:56.023
> 
> 标签：python, subprocess, stdin

`./rancli -c -`我在具有此文档的外壳中输入了一个命令：

> 从 Linux shell 运行该工具允许附加选项，具体取决于为命令提供的选项。选项如下：
> 
> -h 显示有关命令的帮助
> 
> -c 命令不是从用户交互地获取键入的命令，而是从指定的文件中读取，即以批处理模式。处理完所有命令后，CLI 会话将自动结束。
> 
> -c - 同上，但从 Linux 标准输入读取命令。这允许将命令“传送”到程序。

我想把它转换成python。如果我使用第二个选项，一切正常，它会从文件中读取命令并在屏幕上显示结果。但是我想使用写入标准输入的第三个选项。我原以为这条线会运行一个命令`./rancli -c - commandHere`，但事实并非如此。我要做的是输入`./rancli -c -`，然后我可以在下一行手动写入标准输入，比如这里我使用命令`read hnb`：

```
[root@switch]# ./rancli -c -
read hnb
RAN> read hnb
               HNBId                           Location      RegUEs   ActUEs
  000295-0000038828@ipaccess.com                    n/c
  000295-0000070688@ipaccess.com                    n/c 
```

当我在 shell 中输入它时，我得到的结果打印得很好。但是，当我在我的 python 中执行此操作时，我没有将结果正确打印回给我。这是我尝试过的：

```
 ran_opt_get_ap  = "read hnb\n"
    cmd_rancli = ["/jffs2/usbflash0/ran/rancli", "-c", "-"]
    proc = subprocess.Popen(cmd_rancli + [ran_opt_get_ap], stdout=subprocess.PIPE)    
    for line in iter(proc.stdout.readline, ''): 
        print line,
    proc.wait() 
```

因此，当我传入这样的命令时，它显然不像在 shell 中那样工作并且被忽略。现在这里有两个问题，我如何在这里将命令写入标准输入，因为我必须`read hnb`手动输入以下命令？在我运行`rancli -c -`之后，我想在之后注入命令，我现在必须像这样输入它：

```
read hnb                                                                        
RAN> read hnb 
```

另一个问题是我的代码没有打印出上面的完整结果，但是当我输入下一个命令时，我会得到其余的结果和下一个结果的第一行，依此类推，在我输入后得到结果下一个命令：

```
get ap                                                                          
               HNBId                           Location      RegUEs   ActUEs    
  000295-0000038828@ipaccess.com                    n/c                         
  000295-0000070688@ipaccess.com                    n/c                         
RAN> get ap 
```

**更新：最新代码有效**

```
cmd_rancli = ["/jffs2/usbflash0/ran/rancli", "-c", "-"]
ran_opt_get_ap = "read hnb"
proc = subprocess.Popen(cmd_rancli, stdin=subprocess.PIPE, stdout=subprocess.PIPE)
output = proc.communicate(ran_opt_get_ap)[0] 
print output 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:58:26.133

要写入子进程的标准输入，请将其设置为 PIPE：

```
from subprocess import Popen, PIPE

p = Popen(cmd_rancli, stdin=PIPE, stdout=PIPE)
output = p.communicate(ran_opt_get_ap)[0] 
```

[`.communicate()`](http://docs.python.org/2/library/subprocess.html#popen-objects)写入`ran_opt_get_ap`子进程的标准输入，读取所有输出，并等待子进程完成。

第二个问题是由于缓冲（仅当您不一次读取所有输出时才重要）。修复缓冲：

*   程序的输出，`sys.stdout.flush()`在打印后添加
*   在你那端的管道中，将 Popen 的`bufsize`参数设置为零
*   [在子进程中，](https://unix.stackexchange.com/questions/25372/turn-off-buffering-in-pipe)使用[`pexpect`、`pty`模块](https://stackoverflow.com/a/12471855/4279)或[`stdbuf`、、、命令`unbuffer``script`](https://unix.stackexchange.com/questions/25372/turn-off-buffering-in-pipe)。

# asp.net - 如何查看来自android客户端的请求？

> ID：15945591
> 
> 赞同：0
> 
> 时间：2013-04-11T09:45:15.817
> 
> 标签：asp.net

我是 .net 开发人员，一个 android 开发人员使用我的 web 服务，他通过请求并从我的 weservice 获得响应。但是，如何查看请求？？提前谢谢..

# php - php中未终止的字符串文字（当数据是全角或太长时）

> ID：15945593
> 
> 赞同：0
> 
> 时间：2013-04-11T09:45:29.680
> 
> 标签：php

我不确定是全角还是字符串太长，我的网页在字符串太长时会出现问题，而且由于数据是动态附加的，所以数据应该是全角的，因为其他页面让用户输入他们的数据是全角的（日语或中文）。我的html是：

```
<!DOCTYPE html PUBLIC "-/W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<head>
<title>Lomiro</title> 
<style type="text/css"> 
<!--
.style2 {font-family: Arial, Helvetica, sans-serif; font-size: 16px;}
-->
a:link {
    text-decoration: none;
    color: #FFFFFF;
}
a:visited {
    text-decoration: none;
    color: #FFFFFF;
}
a:hover {
    text-decoration: none;
    color: #FFFFFF;
}
a:active {
    text-decoration: none;
    color: #FFFFFF;
}
body,td,th {
    font-size: 16px;
}
.style3 {color: #FFFFFF}
</style>
<script type="text/javascript"> 
function addRow(i,id,names,addr,cell,cam,num,shop,pay,date)
{
    var tableis = document.getElementById("info");
    var last=(-1);
    var Tr = tableis.insertRow(last);
    var Td1 = Tr.insertCell(0);
    Td1.innerHTML="<input type='text' readonly='readonly' style='cursor: default; width: 100px;' name='id"+i+"' id='id"+i+"' value='"+id+"' />";
    Tr.appendChild(Td1);
    var Td2 = Tr.insertCell(1);
    Td2.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 100px;" name="name'+i+'" id="name'+i+'" value="'+names+'" />';
    Tr.appendChild(Td2);
    var Td3 = Tr.insertCell(2);
    Td3.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 330px;" name="addr'+i+'" id="addr'+i+'" value="'+addr+'" />';
    Tr.appendChild(Td3);
    var Td4 = Tr.insertCell(3);
    Td4.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 90px;" name="cell'+i+'" id="cell'+i+'" value="'+cell+'" />';
    Tr.appendChild(Td4);
    var Td5 = Tr.insertCell(4);
    Td5.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 100px;" name="cam'+i+'" id="cam'+i+'" value="'+cam+'" />';
    Tr.appendChild(Td5);
    var Td6 = Tr.insertCell(5);
    Td6.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 80px;" name="num'+i+'" id="num'+i+'" value="'+num+'" />';
    Tr.appendChild(Td6);
    var Td7 = Tr.insertCell(6);
    Td7.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 100px;" name="shop'+i+'" id="shop'+i+'" value="'+shop+'" />';
    Tr.appendChild(Td7);
    var Td8 = Tr.insertCell(7);
    Td8.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 70px;" name="pay'+i+'" id="pay'+i+'" value="'+pay+'" />';
    Tr.appendChild(Td8);
    var Td9 = Tr.insertCell(8);
    Td9.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 70px;" name="date'+i+'" id="date'+i+'" value="'+date+'" />';
    Tr.appendChild(Td9);
}
function addRow2(i,shop,id,names,addr,cell,cam,num,pay,date)
{
    var tableis = document.getElementById("info");
    var last=(-1);
    var Tr = tableis.insertRow(last);
    var Td1 = Tr.insertCell(0);
    Td1.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 100px;" name="shop'+i+'" id="shop'+i+'" value="'+shop+'" />';
    Tr.appendChild(Td1);
    var Td2 = Tr.insertCell(1);
    Td2.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 100px;" name="id'+i+'" id="id'+i+'" value="'+id+'" />';
    Tr.appendChild(Td2);
    var Td3 = Tr.insertCell(2);
    Td3.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 100px;" name="name'+i+'" id="name'+i+'" value="'+names+'" />';
    Tr.appendChild(Td3);
    var Td4 = Tr.insertCell(3);
    Td4.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 330px;" name="addr'+i+'" id="addr'+i+'" value="'+addr+'" />';
    Tr.appendChild(Td4);
    var Td5 = Tr.insertCell(4);
    Td5.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 90px;" name="cell'+i+'" id="cell'+i+'" value="'+cell+'" />';
    Tr.appendChild(Td5);
    var Td6 = Tr.insertCell(5);
    Td6.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 100px;" name="cam'+i+'" id="cam'+i+'" value="'+cam+'" />';
    Tr.appendChild(Td6);
    var Td7 = Tr.insertCell(6);
    Td7.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 80px;" name="num'+i+'" id="num'+i+'" value="'+num+'" />';
    Tr.appendChild(Td7);
    var Td8 = Tr.insertCell(7);
    Td8.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 70px;" name="pay'+i+'" id="pay'+i+'" value="'+pay+'" />';
    Tr.appendChild(Td8);
    var Td9 = Tr.insertCell(8);
    Td9.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 70px;" name="date'+i+'" id="date'+i+'" value="'+date+'" />';
    Tr.appendChild(Td9);
}
function addRow3(i,date,id,names,addr,cell,cam,num,shop,pay)
{
    var tableis = document.getElementById("info");
    var last=(-1);
    var Tr = tableis.insertRow(last);
    var Td1 = Tr.insertCell(0);
    Td1.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 70px;" name="date'+i+'" id="date'+i+'" value="'+date+'" />';
    Tr.appendChild(Td1);
    var Td2 = Tr.insertCell(1);
    Td2.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 100px;" name="id'+i+'" id="id'+i+'" value="'+id+'" />';
    Tr.appendChild(Td2);
    var Td3 = Tr.insertCell(2);
    Td3.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 100px;" name="name'+i+'" id="name'+i+'" value="'+names+'" />';
    Tr.appendChild(Td3);
    var Td4 = Tr.insertCell(3);
    Td4.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 330px;" name="addr'+i+'" id="addr'+i+'" value="'+addr+'" />';
    Tr.appendChild(Td4);
    var Td5 = Tr.insertCell(4);
    Td5.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 90px;" name="cell'+i+'" id="cell'+i+'" value="'+cell+'" />';
    Tr.appendChild(Td5);
    var Td6 = Tr.insertCell(5);
    Td6.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 100px;" name="cam'+i+'" id="cam'+i+'" value="'+cam+'" />';
    Tr.appendChild(Td6);
    var Td7 = Tr.insertCell(6);
    Td7.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 80px;" name="num'+i+'" id="num'+i+'" value="'+num+'" />';
    Tr.appendChild(Td7);
    var Td8 = Tr.insertCell(7);
    Td8.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 100px;" name="shop'+i+'" id="shop'+i+'" value="'+shop+'" />';
    Tr.appendChild(Td8);
    var Td9 = Tr.insertCell(8);
    Td9.innerHTML='<input type="text" readonly="readonly" style="cursor: default; width: 70px;" name="pay'+i+'" id="pay'+i+'" value="'+pay+'" />';
    Tr.appendChild(Td9);
}
function printOut(block)
{
    var value = block.innerHTML;
    var printPage = window.open("","printPage","");
    printPage.document.open();
    printPage.document.write("<HTML><head></head><BODY onload='window.print();window.close()'>");
    printPage.document.write("<PRE>");
    printPage.document.write(value);
    printPage.document.write("</PRE>");
    printPage.document.close("</BODY></HTML>");
}
</script>
</head>
<body>
<table width="589" align="right" style="position: absolute; right: 0px; top: 0px; width: 589px;">
  <tr>
    <td width="118" height="23" style="background-color: #3366CC;"><div align="center" class="style2"><a href="query.php" target="mainFrame">検索</a></div></td>
    <td width="118" style="background-color: #3366CC;"><div align="center" class="style2"><a href="addnew.php" target="mainFrame">顧客管理</a></div></td>
    <td width="118" style="background-color: #3366CC;"><div align="center" class="style2"><a href="shop.php" target="mainFrame">代理店管理&lt;/a></div></td>
    <td width="118" style="background-color: #3366CC;"><div align="center" class="style2"><a href="statistic.php" target="mainFrame">統計管理</a></div></td>
  <td width="118" style="background-color: #9966FF;"><div align="center" class="style2"><a href="output.php" target="mainFrame">会計管理</a></div></td></tr>
</table>
<br/>
<br/>
<form method='post' action='exout.php'>
<div id='block' align='center'>
2013/4/1~2013/4/11
総契約者DATA
<table width='737' border='0' name='info' id='info'>
<tr>
<td align='center' bgcolor='#9999FF'>Lomiro ID</td>
<td align='center' bgcolor='#9999FF'>氏名</td>
<td align='center' bgcolor='#9999FF'>住所</td>
<td align='center' bgcolor='#9999FF'>携帯電話</td>
<td align='center' bgcolor='#9999FF'>MAC</td>
<td align='center' bgcolor='#9999FF'>型番</td>
<td align='center' bgcolor='#9999FF'>代理店コード</td>
<td align='center' bgcolor='#9999FF'>支払方法</td>
<td align='center' bgcolor='#9999FF'>支払日&lt;/td>
</tr>
</table>
</div>
<br/>
<input type='submit' id='output' name='output' value='Excel出力' />
<input type='button' id='print' name='print' value='スキャンアウト' onclick='printOut(block)' />
</form>
</body>
<script type='text/javascript'>addRow('0','dayang','','','','','','','0','');

</script>
</html> 
```

如果数据是全角或太长，它会以失败的方式换行。像：

```
 '9620001福島県須賀川市森宿
60-1' 
```

上面的行应该是一行，但它改变了行！

我的网页是php，我尝试了几种方法来修复，但没有任何用处。
php代码的错误是：

```
echo rtrim("<script type='text/javascript'>");
echo "addRow('";
echo $k;
echo "','";
echo $mail;
echo "','";
echo $name;
echo "','";
echo trim($addr);
echo "','";
echo $cell;
echo "','','','";
echo $shop;
echo "','";
echo $pay;
echo "','";
echo $date;
echo "');"."\n</scr";
echo "ipt>"."\n";
$k++; 
```

数据是从数据库中获取的，我看到数据库中的数据没有任何更改行字符。

我猜的问题是附加的数据太长了，而且是全角的。

我知道这个问题和其他人类似，但是我尝试了其他人的方法，问题仍然无法解决。

我试过用

并删除该行，或者让我的 php 文件为 utf-8 编码。

让标签像''一样分割......

请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:12:01.583

我找到了另一种解决问题的方法！

我用`$addr=str_replace("\n","\\n",$addrs);`

并且数据库中的数据中有\n，我以前没有找到。

# python - Python字符串比较与正斜杠不匹配

> ID：15945596
> 
> 赞同：1
> 
> 时间：2013-04-11T09:45:52.027
> 
> 标签：python, string, comparison

一个简单的问题通常有一个简单的答案，但我很难找到它。有人可以解释为什么以下不匹配吗？

```
string = 'HTTP/NONE'
if string is 'HTTP/NONE': print 'match' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:50:03.857

利用：：

```
string = 'HTTP/NONE'
if string == 'HTTP/NONE':
    print 'Match!'
else:
    print 'No Match!' 
```

为我工作。显然，像 == 这样的字符串

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T09:47:29.853

改为使用`==`。还要小心不要将变量命名为与 python 模块相同的名称。

```
>>> mystr = 'HTTP/NONE'
>>> mystr is 'HTTP/NONE'
False
>>> mystr == 'HTTP/NONE'
True 
```

`is`运算符测试*身份*-并且仅返回`True`具有相同`id`. `==`仅检查两个对象是否具有相同的值，这就是您想要的。如果我们检查 和 的`id`s `mystr`，`'HTTP/NONE'`我们可以看到它们是不同的。

```
>>> id(mystr)
64342000
>>> id('HTTP/NONE')
64341360 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T09:48:19.583

`is`身份测试。来自[Python 文档](http://docs.python.org/2/reference/expressions.html#is)：

> 对象身份的运算符`is`和测试：当且仅当 x 和 y 是同一个对象时为真。产生逆真值。`is not``x is y``x is not y`

在处理比较值时，您最好使用`==`. 示例 ipython 会话：

```
In [1]: s = 'A/B'

In [2]: s == 'A/B'
Out[2]: True

In [3]: s is 'A/B'
Out[3]: False

In [4]: b = 'A/B'

In [5]: s is b
Out[5]: False

In [6]: b == s
Out[6]: True 
```

* * *

鉴于恒等运算符检查比较对象的 id，其结果有怪癖，因为 Python 缓存`int`, `float`, 小字符串。这是通过调用函数可见的[`id()`](http://docs.python.org/2/library/functions.html#id)：

```
In [28]: s1, s2 = 'Joe', 'Joe'

In [29]: id(s1), id(s2)
Out[29]: (21399760, 21399760)

In [30]: s1 is s2
Out[30]: True 
```

如您所见，在这种情况下，即使它们是由不同的赋值操作创建的，两者`s1`和`s2`都是*同一个对象*。

[这](https://stackoverflow.com/a/306353/147072)是一个与 int 对象类似的情况，与Python 文档中的解释[相关：](http://docs.python.org/2/c-api/int.html#PyInt_FromLong)

> 当前的实现为 -5 到 256 之间的所有整数保留一个整数对象数组，当您在该范围内创建一个 int 时，您实际上只是取回了对现有对象的引用。

我没有找到关于字符串类型的解释，但我认为同样的情况正在发生，`is`因此不应该用于值比较。它有时可能会返回`False`，有时会`True`：

```
In [39]: s = 'Joe'

In [40]: id('Joe')
Out[40]: 21403136

In [41]: id(s)
Out[41]: 21403136

In [42]: s is 'Joe'
Out[42]: True 
```

祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T09:47:16.890

您正在测试身份，而不是平等。改为使用`==`。

您将身份与平等混淆了。两张 1 美元的钞票具有相同的价值，因此在购买甜甜圈时它们是相等的。但他们每个人都有不同的身份。

为了提高性能，有时当您告诉 Python 存储相同的文字值时，Python 会使用相同的对象。这称为*interning*，当发生这种情况时，您会获得对*恰好*是同一个对象的一个`int`​​或一个`str`值的引用。

 *`is`身份测试；它基本上实现为`id(a) == id(b)`，如果两个引用的值相同，则它们是相同的。指的是*同一个对象*，而不仅仅是同一个*值*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T11:09:13.323

```
string = 'HTTP/NONE'
if string == 'HTTP/NONE': print 'match' 
```

它会起作用的。*

# android - 如何使 viewpager 项目大于屏幕？

> ID：15945597
> 
> 赞同：4
> 
> 时间：2013-04-11T09:45:54.357
> 
> 标签：android, android-viewpager, screen

我有 viewPager 的子视图，它们应该比屏幕大。我怎样才能使这项工作，并保持“分页效果”？

# android - 如何从自定义列表视图中的 RadioGroup 中获取选定值

> ID：15945603
> 
> 赞同：2
> 
> 时间：2013-04-11T09:46:14.173
> 
> 标签：android, listview, listadapter, baseadapter

在我的应用程序中，我正在开发一个应用程序学生排名系统。

[这里](https://stackoverflow.com/questions/15883152/customized-listview-with-textview-textview-radiogroup-in-android)，是我之前问过的链接。现在我的要求已满，但我无法访问其中的数据..

```
public class ListMobileActivity extends ListActivity {
static final String[] MOBILE_OS = new String[] { "001 AAAA", "002 BBBB",
        "003 CCCC", "004 DDDD"};
static final String[] MOBILE_OS1 = new String[] { "AAAA", "BBBB",
    "CCCC", "DDDD"};
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //setListAdapter(new ArrayAdapter<String>(this, R.layout.list_mobile,
    //      R.id.label, MOBILE_OS));

    setListAdapter(new MobileArrayAdapter(this, MOBILE_OS));
}

} 
```

和适配器是，..

```
public class MobileArrayAdapter extends ArrayAdapter<String> {
private final Context context;
private final String[] values;

public MobileArrayAdapter(Context context, String[] values) {
    super(context, R.layout.list_mobile, values);
    this.context = context;
    this.values = values;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.list_mobile, parent, false);
    TextView textView = (TextView) rowView.findViewById(R.id.label1);
    TextView textView1 = (TextView) rowView.findViewById(R.id.label);
    RadioGroup radioSexGroup=(RadioGroup) rowView.findViewById(R.id.radioSex);
    int selectedId = radioSexGroup.getCheckedRadioButtonId();
    RadioButton radioSexButton= (RadioButton) rowView.findViewById(selectedId);;
    textView.setText(values[position]);
    textView1.setText(String.valueOf(position+1));
    // Change icon based on name
    String s = values[position];
    System.out.println(s);
    return rowView;
}
} 
```

我可以对这个单选按钮执行任何操作..

现在我的输出屏幕如下...

![在此处输入图像描述](https://i.stack.imgur.com/lQBc6.png)

但是我无法在特定学生的每一行上选择哪个单选按钮，请帮助我实现这一点。我需要使用...更改适配器吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:06:11.170

使用数组列表保存选择

```
List<Integer> sexGrp=new ArrayList<Integer>(); 
```

在适配器中使用此侦听器

```
radioSexGroup.setTag(position);
                radioSexGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() 
                {
                    public void onCheckedChanged(RadioGroup group, int checkedId) {
                        sexGrp.add(Integer.parseInt(group.getTag().toString()), checkedId);

                    }
                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:12:12.707

在你的方法中写这个循环`getView`，这里`arrayChekedCheckBox`是你所有检查的集合`checkbox`

```
 for (int i = 0; i < arrayListOfStudent.size(); i++) {
            if (i==postion){
                arrayChekedCheckBox.add(postion) ;
                break;
            }
        } 
```

# c++ - 退出（0）与返回 0

> ID：15945607
> 
> 赞同：10
> 
> 时间：2013-04-11T09:46:36.183
> 
> 标签：c++, return, destructor, exit

> 当 exit(0) 用于退出程序时，不会调用局部范围的非静态对象的析构函数。但是如果使用return 0，就会调用析构函数。请注意，即使我们调用exit()，也会清理静态对象。

这种逻辑背后应该有一些原因。我只是想知道它是什么？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T09:55:36.960

在 的情况下`exit( 0 )`，您正在调用一个函数。如果你正在调用一个函数，你不希望调用局部变量的析构函数。并且编译器不知道，先验，有什么特别之处`exit( 0 )`.

事实上，这个原理实际上只适用于异常之前的 C++。该标准可以重新定义`exit()`以使用参数抛出实现定义的异常，并指定调用`main`被包装在捕获此异常的 try 块中，并将返回代码传递回系统。然而，这意味着`exit`在 C 和 C++ 中具有完全不同的语义；无论如何，委员会没有提出任何建议来做出这种改变。

# sql - 如何使用存储过程在while循环中增加多个值？

> ID：15945610
> 
> 赞同：0
> 
> 时间：2013-04-11T09:46:44.420
> 
> 标签：sql, loops, stored-procedures

我是 SQL 的新手，但这是我目前所拥有的：

```
Alter Procedure GetallSchedule(@ScreenKey INT,@ShowNo INT) As
BEGIN
--DECLARE @ScreenKey INT
--DECLARE @ShowNo INT
--Declare @j INT
--Declare @i INT

Insert into Schedule(Cineplex,
ScreenKey,ShowOrder,ShowNo,FilmKey,ShowDate,ShowTime)
Values (1,@ScreenKey,1,@ShowNo,100,GETDATE(),GETDATE())

SET @ShowNo = 1
SET @ScreenKey = 1
WHILE (@ScreenKey <=20)
  BEGIN
    WHILE (@ShowNo <=7)
      BEGIN
         Insert into Schedule(
             Cineplex,
             ScreenKey,ShowOrder,ShowNo,FilmKey,ShowDate,ShowTime)
           Values (1,@ScreenKey,1,@ShowNo,100,GETDATE(),GETDATE())
         SET @ShowNo = @ShowNo + 1
      END
    SET @ScreenKey = @ScreenKey + 1
  END

END

go

--Execute GetallSchedule 'TUC' 
```

在这里，我需要插入同时增加`Screenkey`和的值`ShowNo`。我需要获得 20 个屏幕的结果，每个屏幕有 7 个节目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:24:10.603

在每次运行内部 While 循环之前，您的`ShowNo`变量需要重置为 1。稍微下移一行...

```
SET @ScreenKey = 1
WHILE (@ScreenKey <=20)
  BEGIN
    SET @ShowNo = 1  -- this one -- reset to 1 before using in loop
    WHILE (@ShowNo <=7)
      BEGIN
         Insert into Schedule.... 
```

正如你所拥有的那样，变量最终只循环了一次它的范围，并且再也没有机会做它的工作。

# java - 由于IP更改无法连接到oracle数据库

> ID：15945611
> 
> 赞同：0
> 
> 时间：2013-04-11T09:46:46.337
> 
> 标签：java, database, jdbc, oracle11g, connection

我已经在我的系统上设置了`oracle11g`数据库，其他两台机器通过`JDBC`. 但由于某种原因`IP address`，我的系统已更改。我无法从其他机器访问数据库，即使我已经更改了 IP 地址`JDBC connection URL`，

但我仍然得到`connection failure error`。`Network adapter could not establish the connection`

我在下面的代码中进行了更改。

```
public static DbConnector getConnection(String dataSourceIp, String dataSourceJndiName) throws Exception {
        DbConnector con = new DbConnector();
        try {
            String jdbcURL = "jdbc:oracle:thin:@10.220.140.48:1521:test1";
            Class.forName("oracle.jdbc.OracleDriver").newInstance();
            String user = "XXXX";
            String passwd = "YYYYYY";
            Connection conn = DriverManager.getConnection(jdbcURL, user, passwd);
            con.conn = conn;
            con.conn.setAutoCommit(false);
            return con;
            /*DataSource ds = getDataSource(dataSourceIp, dataSourceJndiName);
            con.conn = ds.getConnection();
            con.conn.setAutoCommit(false);
            return con;*/
        } catch (Exception e) {
            try {
                // bu method getConnection methodudur. disconnectDB finally'ye
                // tasinmamalidir.
                String jdbcURL = "jdbc:oracle:thin:@10.220.140.48:1521:test1";
                Class.forName("oracle.jdbc.OracleDriver").newInstance();
                String user = "xxxxx";
                String passwd = "yyyyyy";
                Connection conn = DriverManager.getConnection(jdbcURL, user, passwd);
                con.conn = conn;
                con.conn.setAutoCommit(false);
                return con;
                /*dataSourceMap.remove(dataSourceIp + dataSourceJndiName);
                DataSource ds = getDataSource(dataSourceIp, dataSourceJndiName);
                con.conn = ds.getConnection();
                con.conn.setAutoCommit(false);
                return con;*/
            } catch (Exception ex) {
                con.disconnectDB();
            }
            throw e;
        }
    } 
```

我在上面的代码中更改了 IP 地址并替换为新的 IP 地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:57:34.663

当您安装 Oracle 时，它​​会再安装两个 Windows 服务。

1.  `listener.ora`
2.  `tnsnames.ora`

更改IP`tnsnames.ora`并`listener.ora`重新启动您的数据库。

# ios - NSURLConnectionDelegate 的连接：willCacheResponse：随机调用

> ID：15945613
> 
> 赞同：0
> 
> 时间：2013-04-11T09:47:04.547
> 
> 标签：ios, nsurlconnection, nsurlcache, nsurlconnectiondelegate

这是我打的非常简单的电话：

```
NSURL *url = [NSURL URLWithString:urlString];
NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:500];
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:NO];
[connection start]; 
```

我尝试使用在谷歌上找到的 2 个随机 pdf 网址（搜索“truc 文件类型：pdf”）：

```
A) NSString *urlString = @"http://www.eatletruc.com/letruc.menu0411.pdf";
B) NSString *urlString = @"http://www.botruc.com/boat-specs/C-Truc-7.pdf"; 
```

它们都具有相似的标头（在 connection:didReceiveResponse 中使用 allHeaderFields :)：

一个）

```
"Accept-Ranges" = bytes;
Connection = "Keep-Alive";
"Content-Length" = 2641705;
"Content-Type" = "application/pdf";
Date = "Thu, 11 Apr 2013 08:53:39 GMT";
Etag = "\"19a7b55-284f29-4a0a5e94ae1a7\"";
"Keep-Alive" = "timeout=5, max=100";
"Last-Modified" = "Mon, 11 Apr 2011 15:05:50 GMT";
Server = Apache; 
```

二）

```
"Accept-Ranges" = bytes;
Connection = "Keep-Alive";
"Content-Length" = 343793;
"Content-Type" = "application/pdf";
Date = "Thu, 11 Apr 2013 08:55:38 GMT";
Etag = "\"b6864a-53ef1-49400c1d95800\"";
"Keep-Alive" = "timeout=5, max=100";
"Last-Modified" = "Mon, 01 Nov 2010 17:01:20 GMT";
Server = "Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/1.0.0-fips mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635"; 
```

但是 connection:willCacheResponse: 只为 url B 调用。我在 Cache.db sqlite 数据库中只找到了 url B。

为什么不缓存 url A？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:05:37.277

好的，所以问题来自文件的大小。

似乎 NSURLCache 不会缓存大于其磁盘容量 5% 的文件。

我的 NSURLCache 设置了 50MB 的磁盘容量，因此不会缓存大于 2.5MB 的文件。

扩展磁盘容量解决了我的问题。

ps：您可以将磁盘容量扩展到最大2GB，因此缓存中的文件不能大于100MB。

# hadoop - 分布式文件系统，允许指定文件存储在哪台机器上

> ID：15945627
> 
> 赞同：0
> 
> 时间：2013-04-11T09:47:33.300
> 
> 标签：hadoop, filesystems, hdfs, microsoft-distributed-file-system

我正在寻找一个分布式文件系统，对于某些文件，我可以指定它们存储在哪台机器上（在创建期间）。理想情况下使用 Java API。这样的事情存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:02:46.793

HDFS 有一个块放置策略，可以插入一个新策略。更多细节[在这里](http://hadoopblog.blogspot.in/2009/09/hdfs-block-replica-placement-in-your.html)。

此外，Hadoop 的 MapR 实现对数据放置有更强大的控制。更多细节[在这里](http://www.mapr.com/products/only-with-mapr/data-placement-control)。

# scala - Scala 应用程序超出 Heroku 内存配额

> ID：15945628
> 
> 赞同：3
> 
> 时间：2013-04-11T09:47:48.013
> 
> 标签：scala, heroku, casbah, scalatra

我在 Heroku 上托管我的移动应用程序的后端。它是用 Scala 编写的，使用 Scalatra 来公开 REST API。除此之外，我正在运行一个工作程序，它获取数据并将其推送到 MongoHQ 的数据库（使用 casbah）。对于他们两个，我不断收到**R14（超出内存配额）**错误。在我的本地机器上，worker 消耗的内存不超过 200 - 250 MB，根据 New Relic 监控，Scalatra 应用程序在 Heroku 上仅使用了 250 MB。

这些是我的 Heroku 实例上的相关环境变量：

> JAVA_OPTS: -Xmx384m -Xss512k -XX:+UseCompressedOops -javaagent:newrelic/newrelic.jar
> 
> JAVA_TOOL_OPTIONS：-Djava.net.preferIPv4Stack=true
> 
> SBT_OPTS: -Xmx384m -Xss512k -XX:+UseCompressedOops
> 
> 回购：/app/.sbt_home/.ivy2/cache

Web 服务甚至还没有收到任何流量，那么为什么 Heroku 会抱怨内存消耗呢？

马可

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:35:21.183

作为一个实验，尝试将 Scalate 排除在等式之外。理论上，如果您在没有 Scalate 模板的情况下运行（此类应用程序不需要），您应该能够运行 Scalatra REST API 并在 JVM 中使用大约 64MB。

如果不深入了解您的部署，就很难确切知道。但作为一种猜测，现在默认捆绑到 Scalatra 的默认 G8 模板中以提供预编译视图以提高生产速度的 Scalate 编译器可能会让您超出 Heroku 的限制。

可能有一种方法可以让模板预编译在 Heroku 部署过程之外工作，但我对 Heroku 部署或 Scalate 模板编译不够熟悉，不知道它是如何工作的。如果您使用 WAR 进行部署，则模板已经被预编译，并且您不会在第一次启动时受到惩罚。

# javascript - 如何为 Web 应用程序进行崩溃报告

> ID：15945631
> 
> 赞同：8
> 
> 时间：2013-04-11T09:48:03.830
> 
> 标签：javascript, html, crash, reporting, onerror

当我开发 iPhone / iPad 应用程序时，我总是使用崩溃报告系统。我目前最喜欢的是[Crashlytics](http://crashlytics.com/) - 效果很好。

对于 Android 应用程序，我一直在使用更基本的[ACRA](http://acra.ch/)崩溃报告器。

现在我正在构建一个要在客户端自己的服务器上运行的 web 应用程序，构建某种崩溃报告系统似乎是个好主意，可能与 window.onerror 事件相关联。

当然，我可以建立自己的系统。但是有谁知道发送和整理报告的好方法吗？

顺便说一句，我更喜欢完全客户端的解决方案（即只有 JavaScript），而不是任何需要服务器支持的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T09:52:32.413

Exceptional 和 Airbrake 都提供了 javascript 实现

*   [空气制动](http://airbrakeapp.com/ "空气制动")
*   [卓越的](http://www.exceptional.io/ "卓越的")

**更新**

Exceptional 正式关闭以支持 Airbrake（[来源](https://github.com/exceptional/exceptional)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-27T14:38:22.087

虽然 iOS 目前不支持，但许多浏览[器平台现在支持](https://caniuse.com/mdn-api_reportingobserver)[W3C 报告 API](https://w3c.github.io/reporting/)，这对于报告崩溃和其他分析很有用。有关一些示例，请参阅[报告 API 上的 MDN 页面](https://developer.mozilla.org/en-US/docs/Web/API/Reporting_API)。

# java - 重复 API 调用的持久连接

> ID：15945633
> 
> 赞同：1
> 
> 时间：2013-04-11T09:48:10.850
> 
> 标签：java, android, performance, httpurlconnection, persistent-connection

我的 android 应用程序正在调用经过身份验证的 web 服务 API，以根据数据类型从服务器下载和同步记录。

**例如：**

**应用程序为不同的内容类型**循环调用 API ( `Commerce, Science, Arts`)。

现在，对于每种内容类型，应用程序都会进行维护`last sync date`，以便它可以仅在该日期之后同步数据，持续一个月。

**API 调用如下所示：**

```
private void loadData(){
    String apiUrl = "";
    String[] classArray = { "Commerce", "Science", "Arts" };
    try{
        for(int classIndex = 0; classIndex < classArray.length; classIndex++){
            apiUrl = "http://www.myserver.com/datatype?class="+classArray[classIndex]+"&syncDate="+lastSyncDate;

            String responseStr = getSyncData(apiUrl);

            // Code to parse the JSON data and store it in SqliteDB.
        }

    }catch (Exception e) {
        e.printStackTrace();
    }

}

private String getSyncData(String webservice){
    String line = "", jsonString = "";

    try{
        URL url = new URL(webservice);  

        HttpURLConnection conn = (HttpURLConnection) url.openConnection(Proxy.NO_PROXY); //using proxy may increase latency
        conn.setInstanceFollowRedirects(false);

        String userName = "abc@myserver.com", password = "abc123";
        String base64EncodedCredentials = Base64.encodeToString((userName
                + ":" + password).getBytes(), Base64.URL_SAFE
                | Base64.NO_WRAP);
        conn.setRequestProperty("Authorization", "basic "+ base64EncodedCredentials);

        BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));

        while ((line = rd.readLine()) != null) {
            // Process line...

            return line;

        }

            rd.close();

        }

    }catch (Exception e) {
        e.printStackTrace();
    }
    return jsonString;

} 
```

该方法`getSyncData()`返回`JSON`响应，该响应被解析并存储在`SqliteDb`.

这段代码工作正常。但是当 中的内容类型更多`classArray`并且每个类都有很大的数据集时，会出现轻微的性能问题。

**我的问题是：**

为了提高此过程的整体性能，我是否可以打开连接`www.myserver.com`并在循环中使用 API 调用传递参数以停止为每种内容类型一次又一次地创建连接。

这里我`HttpURLConnection`用于 API 调用，但可以在 java 中使用任何其他技术。

主要目的是使连接持久化，以便应用程序不应该为每次调用一次又一次地创建它，因为每次调用应用程序都会创建一个单独的连接，这会消耗更多时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:02:57.280

我之前做过类似的处理`webcall -> parse JSON -> store DB -> show/update views`

通过大量的测试和调试，我发现实际上减慢进程的是`store DB`部分，与 webcall 或 JSON 解析无关。

我通过将其更改为：

`webcall -> parse JSON -> fire new thread to store DB -> show/update views`

通过这个简单的更改，我的结果在 1 秒内开始出现（而不是之前的 5 到 6 秒）。

希望能帮助到你。

**编辑：**

关于连接本身，您可以使用 web-sockets（它是持久的，但在 Android 中实现得不是很好，您必须进行大量手动解析），所以我建议先测试 DB 的东西。

# winforms - 将 VB6 项目转换为 .net 引用错误？

> ID：15945639
> 
> 赞同：3
> 
> 时间：2013-04-11T09:48:25.107
> 
> 标签：winforms, visual-studio-2010, vb6, vb6-migration

当我尝试调整它时，我有一个 VB6 项目，它会引发一些错误，例如

```
The referenced component 'AxMSCommLib' could not be found.  
The referenced component 'AxOWC' could not be found.    
The referenced component 'ComctlLib' could not be found.    
The referenced component 'Microsoft.Office.Interop.Excel' could not be found. 
```

当我删除这些引用时，它会显示错误，这些引用在此行中被进一步使用

```
Public WithEvents ProgressBar2 As AxComctlLib.AxProgressBar 
```

它说

```
Type 'AxComctlLib.AxProgressBar' is not defined. 
```

第一次面对这种情况，如何解决这个问题，如何在项目中添加这些引用或有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:21:09.520

正如 Patrik 在评论中所说，这些都是需要注册的 COM 对象，然后才能被开发环境（VB6 和 .Net）使用。您收到的错误消息表明这些文件未在您的计算机上注册。

您需要安装 COM 对象依赖项。找到每个依赖项的原始安装包并运行它。提示 - 其中之一是 Excel。另一个可能是 Microsoft Comm 控件（我忘记了确切的名称）。

有些人可能会建议您尝试手动注册 OCX 和 DLL，但运行安装包会更快，因为 OCX/DLL 可能需要其他东西才能实际工作。

# ios - Quantlib 在 xcode 4.6 上构建 iOS 的 boost

> ID：15945640
> 
> 赞同：0
> 
> 时间：2013-04-11T09:48:25.633
> 
> 标签：ios, boost, build, quantlib, arm7

我正在尝试为**xcode 4.6**构建 quantlib 。
关注的项目是这个：[https ://github.com/philipbarnes/quantlib-on-iOS](https://github.com/philipbarnes/quantlib-on-iOS)

这个 quantlib 项目依赖于这个 boost 项目：[https ://gitorious.org/boostoniphone/boostoniphone](https://gitorious.org/boostoniphone/boostoniphone)

我的问题是我无法获得这种提升来构建，但我也可以通过 Pete 在 github 上构建另一个版本。

为 iOS 构建 quantlib 的步骤之一要求设置 boost 目录。我试图调整它无济于事。 这意味着我有一个 dir 'boostoniphone-huuskpes-boostoniphone' - 它没有构建，据说是与 iPhone 项目上的 quantlib 一起使用的版本，以及确实构建的 dir 'boostoniphone-master' - 它有一个带有文件夹的不同构建结构，也许在 quantlib 项目中设置 $BOOSTDIR 变量并不是那么简单。

*控制台的这些输出已被短路，以便更舒适地阅读*

我的**gitorious boost 输出**说：

```
3 warnings generated.
darwin.archive bin.v2/libs/thread/build/darwin-6.1~iphonesim/release/architecture-x86/link-       static/macosx-version-iphonesim-6.0/target-os-iphone/threading-multi/libboost_thread.a
common.copy stage/lib/libboost_thread.a
...updated 120 targets...

=================================================================
Done

Splitting all existing fat binaries...
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/lipo:     can't open input file: /Users/colman/Downloads/boostoniphone-huuskpes-   boostoniphone_/src/boost_1_51_0/bin.v2/libs/thread/build/darwin-4.2.1~iphone/release/architecture-  arm/link-static/macosx-version-iphone-6.0/target-os-iphone/threading-multi/libboost_thread.a (No such   file or directory) 
```

...并继续重复问题，然后此错误是下一个...

```
ar: obj/*.o: No such file or directory
...armv7s
ar: obj/*.o: No such file or directory
...i386
ar: obj/*.o: No such file or directory
liboficate: thread
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/lipo: can't open input file: /Users/colman/Downloads/boostoniphone-huuskpes-    boostoniphone_/src/boost_1_51_0/bin.v2/libs/thread/build/darwin-4.2.1~iphone/release/architecture-arm/link-static/macosx-version-iphone-6.0/target-os-iphone/threading-multi/libboost_thread.a (No such file or directory) 
```

由于**另一个 boost 项目**对我有用，我**尝试将它**作为 boost ref 链接到 buildql.sh 脚本中，但我得到：

```
checking for arm-apple-darwin10-gcc...       /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/arm-apple-    darwin10-llvm-gcc-4.2
checking whether the C compiler works... no
configure: error: in `/Users/colman/Downloads/boostoniphone-huuskpes-boostoniphone_/QuantLib-1.2.1':
configure: error: C compiler cannot create executables
See `config.log' for more details 
```

和

```
/Applications/Xcode.app/Contents//Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/lipo: can't open input file: /Users/colman/Downloads/boostoniphone-huuskpes-boostoniphone_/QuantLib-1.2.1/prefix/armv7/lib/libQuantLib.a (No such file or directory) 
```

指向如何制作框架的指针也可能是一种解决方案？但我认为让 quantlib for iOS 项目工作是真正的解决方案。

回到 BOOST 变量，在 buildql.sh 文件中进行了如下更改：

```
#: ${BOOST_HOME:=$HOME/workspace/huuskpes-boostoniphone}
: ${BOOST_HOME:=$HOME/workspace/boostoniphone-master/}

: ${BOOST_SRC:=$BOOST_HOME/src/boost_1_51_0} 
```

以下内容也进行了更改以尝试适合“boostoniphone-master”

```
: ${SRCDIR:=`pwd`/src}
: ${BUILDDIR:=`pwd`/build}
: ${PREFIXDIR:=`pwd`/prefix}
: ${FRAMEWORKDIR:=`pwd`/framework} 
```

感谢您的任何提示，潜在的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T10:30:39.247

下面是解决方案，而不是进入所有脚本细节：

*   仔细设置路径，这意味着尽量不要在外部驱动器上有空格或有数据（虽然你可以）
*   为ARM芯片、模拟器和安装的iOS版本设置参数非常非常仔细！

总而言之，这应该是最重要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:51:34.017

对 buildql.sh 脚本的更改如下所示：

```
: ${BOOST_HOME:=/Volumes/Untitled\ 1/workspace/boostoniphone-master/iphone-build/stage/lib}
: ${BOOST_SRC_HOME:=/Volumes/Untitled\ 1/workspace/boostoniphone-master/boostoniphone-master}
: ${BOOST_SRC:=$BOOST_SRC_HOME/src/boost_1_51_0/boost}

...

: ${SRCDIR:=/Volumes/Untitled\ 1/workspace/quantlib-on-iOS-master/QuantLib-1.2.1/src}
: ${BUILDDIR:=/Volumes/Untitled\ 1/workspace/quantlib-on-iOS-master/QuantLib-1.2.1/build}
: ${PREFIXDIR:=/Volumes/Untitled\ 1/workspace/quantlib-on-iOS-master/QuantLib-1.2.1/prefix}
: ${PREFIXDIR_2:=/Volumes/Untitled\ 1/workspace/quantlib-on-iOS-master/QuantLib-1.2.1/prefix}
: ${FRAMEWORKDIR:=/Volumes/Untitled\ 1/workspace/quantlib-on-iOS-master/./ql/.libs/libQuantLib.a} 
```

构建命令运行时出现新错误：

./buildql.sh -with-boost-include=/opt/local/include/ --with-boost-lib=/Volumes/Untitled 1/workspace/boostoniphone-master/iphone-build/stage --prefix=/opt /当地的/

当前输出如下所示：

```
libtool: link: (cd .libs/libExperimental.lax/libAmortizingBonds.a && ar x "/Volumes/Untitled 1/workspace/quantlib-on-iOS-master/QuantLib-1.2.1/ql/experimental/amortizingbonds/.libs/libAmortizingBonds.a")
../../libtool: line 1096: cd: .libs/libExperimental.lax/libAmortizingBonds.a: No such file or directory
make[3]: *** [libExperimental.la] Error 1
make[2]: *** [install-recursive] Error 1
make[1]: *** [install-recursive] Error 1
make: *** [install-recursive] Error 1

=================================================================
Done

rm: /Volumes/Untitled: Resource busy

=================================================================
Framework: Setting up directories...

=================================================================
Framework: Creating symlinks...

ln: 1/workspace/quantlib-on-iOS-master/./ql/.libs/libQuantLib.a/ql.framework/Versions/Current: No such file or directory
ln: 1/workspace/quantlib-on-iOS-master/./ql/.libs/libQuantLib.a/ql.framework/Headers: No such file or directory
ln: 1/workspace/quantlib-on-iOS-master/./ql/.libs/libQuantLib.a/ql.framework/Resources: No such file or directory
ln: 1/workspace/quantlib-on-iOS-master/./ql/.libs/libQuantLib.a/ql.framework/Documentation: No such file or directory
ln: 1/workspace/quantlib-on-iOS-master/./ql/.libs/libQuantLib.a/ql.framework/ql: No such file or directory

=================================================================
Framework: Lipoing library into /Volumes/Untitled 1/workspace/quantlib-on-iOS-master/./ql/.libs/libQuantLib.a/ql.framework/Versions/A/ql

/Applications/Xcode.app/Contents//Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/lipo:     can't open input file: $    /Applications/Xcode.app/Contents//Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/lipo         -create         -arch armv7 /Volumes/Untitled 1/workspace/quantlib-on-iOS-    master/QuantLib-1.2.1/1/workspace/quantlib-on-iOS-master/QuantLib-1.2.1/ql/.libs/libQuantLib.a         -arch armv7s /Volumes/Untitled 1/workspace/quantlib-on-iOS-master/QuantLib-1.2.1/1/workspace/quantlib-on-iOS-master/QuantLib-1.2.1/ql/.libs/libQuantLib.a         -arch i386  /Volumes/Untitled 1/workspace/quantlib-on-iOS-master/QuantLib-1.2.1/1/workspace/quantlib-on-iOS-master/    QuantLib-1.2.1/ql/.libs/libQuantLib.a         -o          /Volumes/Untitled (No such file or directory)

Aborted: Lipo  failed 
```

# forms - Symfony2 表单 > 实体字段类型 > 查询构建器 > 子选择可能吗？

> ID：15945643
> 
> 赞同：1
> 
> 时间：2013-04-11T09:48:31.033
> 
> 标签：forms, symfony, doctrine-orm, query-builder, formbuilder

我有一个实体字段类型的表单。
在这个实体字段类型中，我有一个查询生成器，因为我只想选择一些记录。
但是我想在这个查询生成器中做一个子选择，我不确定这是不是正确的方法：

```
'query_builder' => function(EntityRepositorty $er) {
    $subq = $er->createQueryBuilder()        
    //cannot select other entity here?

    return $er->createQueryBuilder('a')
    ->leftJoin($subq)
    ->where('blah blah')
} 
```

有没有人遇到过这个问题，他们的解决方案是什么？

左连接看起来类似于：

```
LEFT JOIN (select * from `table_c` order by date desc) as c on c.status_id = a.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:57:58.407

您的描述表明表 c 作为一对多关系映射到表 a 上。您应该只使用正常的学说连接：

```
'query_builder' => function(EntityRepository $er) {
    return $er->createQueryBuilder('c')
    ->join('c.a', 'a');
} 
```

您需要使用普通连接，因为左连接将为您提供表 c 中的所有内容，无论它是否与 a 相关。

# compilation - 当函数长度超过 100 行时，Google App Script 会引发编译时错误

> ID：15945653
> 
> 赞同：-1
> 
> 时间：2013-04-11T09:49:11.397
> 
> 标签：compilation, google-apps-script

我在使用 Google App Script 时遇到了一个奇怪的问题。如果函数少于 100 行，则编译成功。如果我添加一行使函数长度为 101 行，则会引发编译时错误。

我认为我在我的函数中遗漏了一些东西，因此尝试了一个简单的函数。如果有任何这样的限制，你能帮忙吗？有没有办法增加这个限制？

```
function myFunction() {
  var i = 1;
  i = 1;
  i = 1;
  ........
  ........
  i = 1;
  i = 1;
  i = 1;
}

// This should be 101th line. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:40:10.703

当您说它引发错误时，您只是指不正确的代码着色吗？超过 100 行的着色函数存在一个已知问题，但代码仍然可以正常运行。

# c# - 为 Office 2003 和 Office 2007 (2010) 实现自定义菜单

> ID：15945654
> 
> 赞同：0
> 
> 时间：2013-04-11T09:49:11.480
> 
> 标签：c#, ms-word, ms-office

如何分别使用**Visual Studio Tool for Office .NET 以编程方式为****Word 2003**和**Word 2007定义****自定义菜单**（插件的一部分）？问题在于，Office 2003 中没有功能区，而另一方面，Office 2007 中没有工具栏。那么这两个 Office 版本之间关于菜单或用户界面的“最小公分母”是什么？

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:10:05.473

最小的共同点是您可以在所有版本中创建菜单。它们在 Office 的功能区前版本中显示良好，但它们出现在名为“加载项”的特殊选项卡上。此选项卡仅存在以便使用旧样式命令栏的旧代码仍可以在使用功能区的现代版本的 Office 中呈现 UI。

因此，如果您使用命令条码添加菜单项，这些菜单确实会出现在所有版本的 Office 中。但这确实是最低的公分母。功能区版 Office 的用户体验很差。

加载项作者采取的正常解决方案是安排加载项根据其主机的版本切换行为。因此，如果加载项检测到它在 Office 2003 或更早版本上，请使用命令栏。否则，添加功能区界面。******

# jquery - JQuery UI 自动完成在自动完成中显示了多个项目

> ID：15945661
> 
> 赞同：0
> 
> 时间：2013-04-11T09:49:27.540
> 
> 标签：jquery, jquery-ui

JQuery UI 自动完成在自动完成区域中显示了多个搜索结果。我附上了图片来说明我的意思。我只想在每一行中显示一个。

是否有任何 css hack 来修复它？

![在此处输入图像描述](https://i.stack.imgur.com/lXYGy.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:54:54.927

在黑暗中有点刺，但你可以`display: block;`在结果元素中添加一个吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:03:17.483

```
Try adding below css to fix it

.ui-menu .ui-menu-item a{
    display:block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:46:53.477

如果您可以在服务器端修复它，效率会更高。我看到您的响应是 JSON 格式，请确保它在返回服务器之前格式正确。对于自动完成，您可以在服务器端使用 JSON Array 之类的结构字符串来返回。

# c# - 从线程返回值

> ID：15945662
> 
> 赞同：0
> 
> 时间：2013-04-11T09:49:32.023
> 
> 标签：c#, multithreading

如果我创建了一个委托以允许将多个参数传递到线程启动方法中，如[本答案](https://stackoverflow.com/a/1195915/1193596)中所述，那么将值从`RealStart`方法返回到启动线程的方法的最佳方法是什么？

正如我所看到的，我的选择是要么创建一个静态变量。

```
private static Boolean result;
private static String message = "";

public Thread StartTheThread(SomeType param1, SomeOtherType param2) {
  var t = new Thread(() => RealStart(param1, param2));
  t.Start();
  return t;
}

private static void RealStart(SomeType param1, SomeOtherType param2) {
  ...
} 
```

或将委托包装在一个类中

```
private class TestThread
{
    public String message = "";
    public Boolean result;

    public Thread StartTheThread(SomeType param1, SomeOtherType param2) {
      var t = new Thread(() => RealStart(param1, param2));
      t.Start();
      return t;
    }

    private static void RealStart(SomeType param1, SomeOtherType param2) {
      ...
    }
} 
```

我在使用类时看到的一个问题是，它在某种程度上否定了通过委托传递参数的意义，因为我可以在初始化它时将它们传递给类。

（或者不以这种方式使用它的第三种选择）可能`RealStart`有返回类型吗？

使用所描述的任何一个过程是否有任何优点或缺点，即使它只是归结为代码的结构/组织？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:52:16.490

使用 Task 和 Task.Result：

```
 // Return a value type with a lambda expression
    Task<int> task1 = Task<int>.Factory.StartNew(() => 1);
    int i = task1.Result;

    // Return a named reference type with a multi-line statement lambda.
    Task<Test> task2 = Task<Test>.Factory.StartNew(() =>
    {
        string s = ".NET";
        double d = 4.0;
        return new Test { Name = s, Number = d };
    });
    Test test = task2.Result; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T20:41:24.700

您也可以使用 Actions（用于更新表单组件...）：

```
public TextBox foo = new TextBox();
foo.Text = "foo";
.
.
.
Thread t = new Thread(() => FooBar(p1, p2) );
t.Start();

public void FooBar(Parm parm1, Parm parm2)
{
    ...
    this.foo.BeginInvoke(new Action(() => foo.Text = "bar"));
} 
```

# vba - 将每个工作表从一个 Excel 文件复制到另一个

> ID：15945669
> 
> 赞同：0
> 
> 时间：2013-04-11T09:49:56.493
> 
> 标签：vba, excel, file-io, copy-paste

有了这个，可能很容易解决问题，但是没有任何编程技能我很难破解......

我用一个按钮制作了一个excel文件，一个分配给它的宏。

它应该做什么：

1.  打开另一个 xls 文件，用户可以在硬盘上搜索该文件
2.  从打开的文件中复制每张纸
3.  将其粘贴到原始文件并关闭从中复制的文件。

到目前为止，我得到了这个：

```
Sub Importfile()

Dim sFile As String
Dim wb As Workbook

sFile = Application.GetOpenFilename("*.xls,*.xls")

If sFile <> "False" Then
    Set wb = Workbooks.Open(sFile)

    'Copy and paste code , where I dont know what to do

    wb.Close
End If

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:59:38.033

您的示例代码是正确的，查看录制的宏代码应该已经向您展示了如何使用该`worksheet.copy`方法。使用它，您只需遍历新打开的工作簿中的所有工作表并将它们复制到原始工作簿中。

我使用了一个`For Each`，你也可以只是一个普通的`For`或你喜欢的任何其他类型的循环。

```
Sub Importfile()

Dim sFile As String
Dim wb As Workbook
Dim ws As Worksheet

sFile = Application.GetOpenFilename("*.xls,*.xls")

If sFile <> "False" Then
    Set wb = Workbooks.Open(sFile)

    For Each ws In wb.Worksheets
        ws.Copy before:=ThisWorkbook.Worksheets(1)
    Next ws

    wb.Close
End If

End Sub 
```

宏对我来说很好用！请确保您已将代码放置在正确的位置。

在下图中，“Book1”是您的原始工作表（您要将工作表复制*到*的那个），宏代码应该插入到“模块”（红色方块）中，而*不是*橙色方块中的任何一个。如果您没有“模块 1”（或任何其他模块），则需要通过查看 vba 编辑器顶部的“插入”菜单来插入一个新模块。

![在此处输入图像描述](https://i.stack.imgur.com/iifdf.png)

# c# - C# 中特定格式的正则表达式模式

> ID：15945671
> 
> 赞同：-2
> 
> 时间：2013-04-11T09:50:01.963
> 
> 标签：c#

我有一个像`Test (123) Test`& 需要从字符串中删除`(123)`的字符串。

请帮助我获得该 replce 的确切正则表达式模式？

```
Input : Test(123)Test
Output: Test Test 
```

谢谢， Gunasekaran Sambandhan

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:59:35.783

试试下面...它会帮助你...

**代码 ：**

```
string input = "Test(123)Test";
string regex = "(\\(.*\\))";
string sOutput = Regex.Replace(input, regex, " ");
Console.WriteLine(sOutput); 
```

**输出 ：**

```
Test Test 
```

**更新代码：**

```
string input = "(hi) (91) Professional Investment Services Pty Ltd (hi) (91)";
Regex regex = new Regex(string.Format("\\{0}.\\d+\\{1}", '(', ')'));
Console.WriteLine(regex.Replace(input, string.Empty)); 
```

**输出 ：**

```
(hi) Professional Investment Services Pty Ltd (hi) 
```

# php - SQL 搜索结果和分页

> ID：15945674
> 
> 赞同：1
> 
> 时间：2013-04-11T09:50:04.840
> 
> 标签：php, mysql, pagination

感谢您的早期响应和建议。

请多多包涵，因为我仍然不熟悉 PHP MySQL 编程。

我的搜索工作正常，除了以下两个问题：

1.  默认情况下，我希望查询在访问页面时返回所有记录 WHERE c_id > 0。c_id 是主键。目前，当我访问该页面时，该页面不显示任何记录。在我为保存为外键数值的类别添加此标准之前，情况并非如此：

    AND `cat_id`= ' ".$cat_id." '

2.  另外，我希望能够对搜索结果进行分页。我正在阅读一些帖子，并提到将搜索词附加到链接。我不知道在我的情况下应该如何使用多个标准。当我根据条件进行搜索后单击下一步按钮时，我当前的分页会返回所有记录。

这是我的全部代码：

搜索页面：

```
<?php

$ctitle = mysql_real_escape_string($_POST['ctitle']);
$csubject = mysql_real_escape_string($_POST['csubject']);
$creference = mysql_real_escape_string($_POST['creference']);
$cat_id = ($_POST['cat_id']);
$cmaterial = mysql_real_escape_string($_POST['cmaterial']);
$ctechnic = mysql_real_escape_string($_POST['ctechnic']);
$cartist = mysql_real_escape_string($_POST['cartist']);
$csource = mysql_real_escape_string($_POST['csource']);

$sql = "SELECT * FROM collections WHERE c_id>0 AND `ctitle` LIKE '%".$ctitle."%' AND `csubject` LIKE '%".$csubject."%' AND `creference` LIKE '%".$creference."%' AND `cat_id` LIKE '%".$cat_id."%' AND `cmaterial` LIKE '%".$cmaterial."%' AND `ctechnic` LIKE '%".$ctechnic."%' AND `cartist` LIKE '%".$cartist."%' AND `csource` LIKE '%".$csource."%' ORDER BY c_id ASC";

$sql_result = mysql_query ($sql, $connection ) or die ('request "Could not execute SQL query" '.$sql);

//    pagination code
    $PAGING=new PAGING($sql);

//    There are two optional parameters as well:
//    $records = 16 //Number of records to be displayed per page
//    $pages = Number of pages to be displayed in the paging
    $sql=$PAGING->sql;

if (mysql_num_rows($sql_result)>0) {

//    The following line gives us an SQL statement with appropriate limits applied
    $sql_result=mysql_query($sql) or die($sql." - ".mysql_error());

    while ($row = mysql_fetch_assoc($sql_result)) {
    $c_id=$row['c_id'];
?>

search results .....................

<?=$PAGING->show_paging("gallery.php")?> 
```

您可能还想查看我正在使用的分页类：

```
<?php
/************************************************
*    ========================================    *
*    Perfect MySQL Paging                        *
*    ========================================    *
*    Script Name: class.paging.php                *
*    Developed By: Khurram Adeeb Noorani            *
*    Email: khurramnoorani@gmail.com                *
*    My CV: http://www.visualcv.com/kanoorani    *
*    Twitter: http://www.twitter.com/kanoorani    *
*    Date Created: 08-JULY-2009                    *
*    Last Modified: 08-JULY-2009                    *
************************************************/
?>
<?php
class PAGING
{
    var $sql,$records,$pages;
    /*
    Variables that are passed via constructor parameters
    */
    var $page_no,$total,$limit,$first,$previous,$next,$last,$start,$end;
    /*
    Variables that will be computed inside constructor
    */
    function PAGING($sql,$records=24,$pages=4)
    {
        if($pages%2==0)
            $pages++;
        /*
        The pages should be odd not even
        */
        $res=mysql_query($sql) or die($sql." - ".mysql_error());
        $total=mysql_num_rows($res);
        $page_no=isset($_GET["page_no"])?$_GET["page_no"]:1;
        /*
        Checking the current page
        If there is no current page then the default is 1
        */
        $limit=($page_no-1)*$records;
        $sql.=" limit $limit,$records";
        /*
        The starting limit of the query
        */
        $first=1;
        $previous=$page_no>1?$page_no-1:1;
        $next=$page_no+1;
        $last=ceil($total/$records);
        if($next>$last)
            $next=$last;
        /*
        The first, previous, next and last page numbers have been calculated
        */
        $start=$page_no;
        $end=$start+$pages-1;
        if($end>$last)
            $end=$last;
        /*
        The starting and ending page numbers for the paging
        */
        if(($end-$start+1)<$pages)
        {
            $start-=$pages-($end-$start+1);
            if($start<1)
                $start=1;
        }
        if(($end-$start+1)==$pages)
        {
            $start=$page_no-floor($pages/2);
            $end=$page_no+floor($pages/2);
            while($start<$first)
            {
                $start++;
                $end++;
            }
            while($end>$last)
            {
                $start--;
                $end--;
            }
        }
        /*
        The above two IF statements are kinda optional
        These IF statements bring the current page in center
        */
        $this->sql=$sql;
        $this->records=$records;
        $this->pages=$pages;
        $this->page_no=$page_no;
        $this->total=$total;
        $this->limit=$limit;
        $this->first=$first;
        $this->previous=$previous;
        $this->next=$next;
        $this->last=$last;
        $this->start=$start;
        $this->end=$end;
    }
    function show_paging($url,$params="")
    {
        $paging="";
        if($this->total>$this->records)
        {
            $page_no=$this->page_no;
            $first=$this->first;
            $previous=$this->previous;
            $next=$this->next;
            $last=$this->last;
            $start=$this->start;
            $end=$this->end;
            if($params=="")
                $params="?page_no=";
            else
                $params="?$params&page_no=";
            $paging.="<ul class='paging'>";
            $paging.="<li class='paging-current'>Page $page_no of $last</li>";
            if($page_no==$first)
                $paging.="<li class='paging-disabled'><a href='javascript:void(0)'>&lt;&lt;</a></li>";
            else
                $paging.="<li><a href='$url$params$first'>&lt;&lt;</a></li>";
            if($page_no==$previous)
                $paging.="<li class='paging-disabled'><a href='javascript:void(0)'>&lt;</a></li>";
            else
                $paging.="<li><a href='$url$params$previous'>&lt;</a></li>";
            for($p=$start;$p<=$end;$p++)
            {
                $paging.="<li";
                if($page_no==$p)
                    $paging.=" class='paging-active'";
                $paging.="><a href='$url$params$p'>$p</a></li>";
            }
            if($page_no==$next)
                $paging.="<li class='paging-disabled'><a href='javascript:void(0)'>&gt;</a></li>";
            else
                $paging.="<li><a href='$url$params$next'>&gt;</a></li>";
            if($page_no==$last)
                $paging.="<li class='paging-disabled'><a href='javascript:void(0)'>&gt;&gt;</a></li>";
            else
                $paging.="<li><a href='$url$params$last'>&gt;&gt;</a></li>";
            $paging.="</ul>";
        }
        return $paging;
    }
}
?> 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:42:02.157

**范围结果**

例子：

```
 SELECT * FROM `your_table` LIMIT 0, 10 
```

这将显示数据库中的前 10 个结果。

```
 SELECT * FROM `your_table` LIMIT 5, 5 
```

这将显示记录 6、7、8、9 和 10

这是你要求的吗？

# haskell - 持久性：CRUD TypeClass

> ID：15945675
> 
> 赞同：9
> 
> 时间：2013-04-11T09:50:07.153
> 
> 标签：haskell, crud, persistent, yesod

我正在尝试编写一个类型类，以简化使用*persistent*、*aeson*和*scotty编写 CRUD 后端*

这是我的想法：

```
runDB x = liftIO $ do info <- mysqlInfo
                      runResourceT $ SQL.withMySQLConn info $ SQL.runSqlConn x

class (J.FromJSON a, J.ToJSON a, SQL.PersistEntity a) => CRUD a where
    getBasePath :: a -> String
    getCrudName :: a -> String

    getFromBody :: a -> ActionM a
    getFromBody _ = do body <- jsonData
                       return body

    mkInsertRoute :: a -> ScottyM ()
    mkInsertRoute el =
        do post (fromString ((getBasePath el) ++ "/" ++ (getCrudName el))) $ do
                body <- getFromBody el
                runDB $ SQL.insert body
                json $ J.Bool True

    mkUpdateRoute :: a -> ScottyM ()
    mkDeleteRoute :: a -> ScottyM ()
    mkGetRoute :: a -> ScottyM ()
    mkGetAllRoute :: a -> ScottyM () 
```

这不编译，我得到这个错误：

```
Could not deduce (SQL.PersistEntityBackend a
                  ~ Database.Persist.GenericSql.Raw.SqlBackend)
from the context (CRUD a)
  bound by the class declaration for `CRUD'
  at WebIf/CRUD.hs:(18,1)-(36,36)
Expected type: SQL.PersistEntityBackend a
  Actual type: SQL.PersistMonadBackend
                 (SQL.SqlPersist (Control.Monad.Trans.Resource.ResourceT IO))
In the second argument of `($)', namely `SQL.insert body'
In a stmt of a 'do' block: runDB $ SQL.insert body
In the second argument of `($)', namely
  `do { body <- getFromBody el;
        runDB $ SQL.insert body;
        json $ J.Bool True }' 
```

似乎我必须添加另一个类型约束，例如`PersistMonadBackend m ~ PersistEntityBackend a`，但我不知道如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-04T15:13:44.617

约束意味着[`PersistEntity`](http://hackage.haskell.org/package/persistent-0.8.0.2/docs/Database-Persist-Store.html#t%3aPersistEntity)实例的关联后端类型需要是`SqlBackend`，因此当用户实现`PersistEntity`类作为实现类的一部分时，`CRUD`他们将需要指定它。

从您的角度来看，您只需要启用`TypeFamilies`扩展并将该约束添加到您的类定义中：

```
class ( J.FromJSON a, J.ToJSON a, SQL.PersistEntity a
      , SQL.PersistEntityBackend a ~ SQL.SqlBackend
      ) => CRUD a where
    ... 
```

`PersistEntity`在为某种类型定义实例时`Foo`，用户`CRUD`需要将`PersistEntityBackend`类型定义为`SqlBackend`：

```
instance PersistEntity Foo where
    type PersistEntityBackend Foo = SqlBackend 
```

这是我通过 GHC 类型检查器的完整代码副本：

```
{-# LANGUAGE TypeFamilies #-}

import Control.Monad.Logger
import Control.Monad.Trans
import qualified Data.Aeson as J
import Data.Conduit
import Data.String ( fromString )
import qualified Database.Persist.Sql as SQL
import Web.Scotty

-- incomplete definition, not sure why this instance is now needed
-- but it's not related to your problem
instance MonadLogger IO

-- I can't build persistent-mysql on Windows so I replaced it with a stub
runDB x = liftIO $ runResourceT $ SQL.withSqlConn undefined $ SQL.runSqlConn x

class ( J.FromJSON a, J.ToJSON a, SQL.PersistEntity a
      , SQL.PersistEntityBackend a ~ SQL.SqlBackend
      ) => CRUD a where

    getBasePath :: a -> String
    getCrudName :: a -> String

    getFromBody :: a -> ActionM a
    getFromBody _ = do body <- jsonData
                       return body

    mkInsertRoute :: a -> ScottyM ()
    mkInsertRoute el =
        do post (fromString ((getBasePath el) ++ "/" ++ (getCrudName el))) $ do
                body <- getFromBody el
                runDB $ SQL.insert body
                json $ J.Bool True

    mkUpdateRoute :: a -> ScottyM ()
    mkDeleteRoute :: a -> ScottyM ()
    mkGetRoute :: a -> ScottyM ()
    mkGetAllRoute :: a -> ScottyM () 
```

# c++ - 在 PIMPL 习语的情况下使用参考的利弊

> ID：15945677
> 
> 赞同：4
> 
> 时间：2013-04-11T09:50:11.787
> 
> 标签：c++, design-patterns

正如[这里提到的，在](https://stackoverflow.com/questions/4983972/what-are-the-pros-and-cons-of-using-d-pointers)[PIMPL idiom](http://en.wikibooks.org/wiki/More_C++_Idioms/Handle_Body#Pointer_To_Implementation_.28pImpl.29)的情况下，您可以使用引用 ( *d-reference* ) 而不是指针 ( *d-pointer* ) 。

我试图了解此实施是否存在任何严重问题以及利弊。

**优点：**

*   由于使用了“。”，因此语法更短。而不是“->”。
*   ...

**缺点：**

*   如果*new ObjectPivate()*失败并且*new*没有抛出（例如：*new(std::nothrow)*或自定义*new*）并返回*nullptr*怎么办？您需要实施额外的东西来检查引用是否有效。如果是指针，您只需使用：

```
 if (m_Private)
  m_Private->Foo(); 

```

*   *在具有复杂初始化逻辑的对象*的多个构造函数的极少数情况下，该解决方案可能不适用。[©詹姆斯坎泽]
*   使用指针进行内存管理更自然。[©詹姆斯坎泽]
*   需要考虑一些额外的实现细节（使用*swap()*）以确保异常安全（例如赋值运算符的实现）[© Matt Yang]
*   ...

**这里是用于说明的示例代码：**

```
// Header file

class ObjectPrivate;

class Object
{
public:
 Object();
 virtual ~Object();

 virtual void Foo();

 private:
   ObjectPrivate&  m_Private;
};

// Cpp file

class ObjectPrivate
{
public:
  void Boo() { std::cout << "boo" << std::endl; }
};

Object::Object() :
m_Private(* new ObjectPrivate())
{
}

Object::~Object()
{
  delete &m_Private;
}

void Object::Foo()
{
  m_Private.Boo();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T10:03:08.333

这真的只是风格问题。我一开始倾向于不在类中使用引用，因此在编译防火墙中使用指针似乎更自然。但是通常没有任何一种方式真正的优势：`new`只能 通过异常来失败 *。*

您可能喜欢指针的一种情况是当对象有很多不同的构造函数时，其中一些需要在调用`new`. 在这种情况下，您可以使用 初始化指针`NULL`，然后调用通用初始化例程。但是，我认为这种情况很少见。（我遇到过一次，我记得。）

编辑：

只是另一种风格考虑：很多人不喜欢类似的东西`delete &something;`，如果您使用引用而不是指针，则需要它。同样，管理内存的对象使用指针似乎更自然（至少对我而言）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T23:57:48.953

一些快速而明显的补充：

**临**

*   参考不能是`0`.
*   不能为引用分配另一个实例。
*   由于变量较少，类职责/实现更简单。
*   编译器可以进行一些优化。

**骗局**

*   不能为引用分配另一个实例。
*   对于某些情况，该参考将过于严格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T15:21:30.170

我认为编写异常安全的代码并不方便。

第一个版本`Object::operator=(Object const&)`可能是：

```
Object& operator=(Object const& other)
{
    ObjectPrivate *p = &m_Private;
    m_Private = other.m_Private;        // Dangerous sometimes
    delete *p;
} 
```

如果`ObjectPrivate::operator=(ObjectPrivate const&)`抛出异常是危险的。那么使用临时变量呢？啊哈，没办法。`operator=()`如果要更改 m_Private，则必须调用。

所以，`void ObjectPrivate::swap(ObjectPrivate&) noexcept`可以充当我们的救星。

```
Object& operator=(Object const& other)
{
    ObjectPrivate *tmp = new ObjectPrivate(other.m_Private);
    m_Private.swap(*tmp);                // Well, no exception.
    delete tmp;
} 
```

然后考虑实现`void ObjectPrivate::swap(ObjectPrivate&) noexcept`。让我们假设 ObjectPrivate 可能包含一个没有`swap() noexcept`or的类实例`operator=() noexcept`。我认为这很难。

好吧，这个假设太严格了，有时也不正确。即便如此，在大多数情况下，ObjectPrivate 也没有必要提供`swap() noexcept`，因为它通常是集中数据的辅助结构。

相比之下，指针可以节省很多脑细胞。

```
Object& operator=(Object const& other)
{
    ObjectPrivate *tmp = new ObjectPrivate(*other.p_Private);
    delete p_Private;
    p_Private = tmp;        // noexcept ensured
} 
```

如果使用智能指针，它会更加优雅。

```
Object& operator=(Object const& other)
{
    p_Private.reset(new ObjectPrivate(*other.p_Private));
} 
```

# c# - 创建堆栈

> ID：15945689
> 
> 赞同：0
> 
> 时间：2013-04-11T09:50:52.653
> 
> 标签：c#, .net, stack

如何`Stack<T>`按索引访问项目？

如何修复我正在尝试制作的游戏的错误？

```
private void UpdateDiamonds(GameTime gameTime)  
{  
    for (int i = 0; i < diamonds.Count; ++i)  
    {  
        Gem ruby = diamonds[i];

        ruby.Update(gameTime);

        if (ruby.BoundingCircle.Intersects(Player.BoundingRectangle))
        {
            diamonds.Pop(i--);
            OnGemCollected(ruby, Player);
        }
    }
} 
```

这些是我得到的错误：

`Cannot apply indexing with [] to an expression of type 'System.Collections.Generic.Stack<>`

`No overload for method 'Pop' takes 1 arguments`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:56:02.573

*Stack*是一种不能这样使用的集合类型。
这是一个**LIFO**集合（后进**先出）：您可以从***堆栈*中弹出的唯一元素是您推入的最后一个元素。

我邀请您阅读一些有关数据结构的文档：[http ://en.wikipedia.org/wiki/List_of_data_structures](http://en.wikipedia.org/wiki/List_of_data_structures)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:55:19.460

您使用了错误的数据结构。如果要索引和删除集合中的任意元素，请使用简单的`List<T>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:55:37.307

对于集合，我不会使用堆栈。堆栈是一种在后进先出情况下非常有效的数据结构。由于您想在 Collection 上执行其他操作，因此 Stack 对您来说不是一个好的选择。我建议你尝试一个列表。对于另一个问题：

使用 Linq 函数`ElementAt(int index);`：

```
using System.Linq; 
```

* * *

```
 private void UpdateDiamonds(GameTime gameTime)  
    {  
       for (int i = 0; i < diamonds.Count; ++i)  
        {  
            Gem ruby = diamonds**.ElementAt(i)**;

            ruby.Update(gameTime);

            if (ruby.BoundingCircle.Intersects(Player.BoundingRectangle))
            {
                diamonds.Pop(i--);
                OnGemCollected(ruby, Player);
            }
        }
    } 

```

# php - MySQL - 数据全部包含在更大的数据集中

> ID：15945691
> 
> 赞同：0
> 
> 时间：2013-04-11T09:50:58.483
> 
> 标签：php, mysql

所以我有2张桌子：

```
user_selection (id, user_id, fiche_id)
fiche (id, title, ...) 
```

（菲希 = 表）

我有一个研究请求，它给了我一些 fiche id

```
SELECT fiche.*, IF(fiche.fiche_type_id = 2,fiche.instance,fiche_type_texte.type_texte) AS type_texte, IF(fiche.fiche_type_id = 2,CONCAT(fiche.affaire," - ", fiche.titre),fiche.titre) AS titre, IF(fiche.fiche_type_id = 1,fiche.date_publication,fiche.date_texte) AS date_publication
FROM enviroveille_bascule.fiche
LEFT JOIN enviroveille_bascule.fiche_type_texte ON(fiche.fiche_type_texte_id = fiche_type_texte.id)
LEFT JOIN enviroveille_bascule.fiche_x_keyword ON(fiche_x_keyword.fiche_id = fiche.id)
LEFT JOIN enviroveille_bascule.fiche_x_theme ON(fiche_x_theme.fiche_id = fiche.id)
LEFT JOIN enviroveille_bascule.fiche_echeance ON(fiche_echeance.fiche_id = fiche.id)
LEFT JOIN enviroveille_bascule.fiche_x_activite ON(fiche_x_activite.fiche_id = fiche.id) LEFT JOIN enviroveille_bascule.fiche_x_nomenclature ON(fiche_x_nomenclature.fiche_id = fiche.id)
WHERE 1 = 1
AND fiche_echeance.fiche_echeance_type_id IN(2)
GROUP BY fiche.id 
```

我想知道我的研究查询的所有结果是否都在用户选择中。

所以我尝试了：

```
// fiche_ids is an array of fiche.id resulting from research request 
SELECT COUNT(*) AS nb
FROM " . $this->bdd . $this->table_user_selection . "
WHERE user_id = '" . $user->datas_user['id'] . "'
AND fiche_id IN ('" . implode("','", $fiche_ids) . "')

    if($ds['nb'] == count($fiche_ids) && count($fiche_ids) > 0) {
        return true;
    } else {
        return false;
    } 
```

效果很好

问题是我有一些研究请求给出了 10K+ 的结果。而且我必须在同一个页面上做几次，这使得服务器滞后。

有没有一种简单的方法可以知道我的所有结果是否都在我的选择中？请注意，选择可能包含比研究结果更多的 fiche_id。

最好的办法是能够在一个 SQL 请求中执行此操作。

# java - JacORB 3.x 中本地对象的便携式拦截器的使用中断？

> ID：15945699
> 
> 赞同：0
> 
> 时间：2013-04-11T09:51:26.030
> 
> 标签：java, interceptor, corba, jacorb

JacORB 3 中对本地对象使用可移植拦截器的实现方式发生了变化，如发行说明中所述：“*为本地对象正确实现了可移植拦截器。* ” 似乎这个新实现引起了一些问题；重现问题的最简单方法是从 sas-demo（jacorb 附带的那个）中修改 GssUpServer.java：

```
public class GssUpServer extends SASDemoPOA {

        private ORB orb;
        private boolean calledPrintSAS = false; // added

        public GssUpServer(ORB orb) {
            this.orb = orb;
        }

        public void printSAS() {
            try {
                org.omg.PortableInterceptor.Current current = (org.omg.PortableInterceptor.Current) orb
                        .resolve_initial_references("PICurrent");
                org.omg.CORBA.Any anyName = current
                        .get_slot(org.jacorb.security.sas.SASInitializer.sasPrincipalNamePIC);
                if (anyName.type().kind().value() == org.omg.CORBA.TCKind._tk_null) {
                    System.out.println("Null Name");
                } else {
                    String name = anyName.extract_string();
                    System.out.println("printSAS for user " + name);
                }

                // /* added
                if (!calledPrintSAS) {
                    calledPrintSAS = true;                    
                    // local call, (JacORB 3.x: throws NPE from SASClientInterceptor)
                    _this().printSAS();
                }
                // */
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
...
} 
```

GssUpClient.bat 之后的 Stacktrace：

```
2013-04-11 11:01:24.968 SEVERE unexpected exception during servant_preinvoke              org.jacorb.security.sas.SASClientInterceptor.send_request(SASClientInterceptor.java:194)
org.jacorb.orb.portableInterceptor.ClientInterceptorIterator.invoke(ClientInterceptorIterator.java:129)
org.jacorb.orb.portableInterceptor.AbstractInterceptorIterator.iterate(AbstractInterceptorIterator.java:66)
org.jacorb.orb.portableInterceptor.ClientInterceptorIterator.iterate(ClientInterceptorIterator.java:87)
org.jacorb.orb.DefaultClientInterceptorHandler.invokeInterceptors(DefaultClientInterceptorHandler.java:328)
org.jacorb.orb.DefaultClientInterceptorHandler.handle_send_request(DefaultClientInterceptorHandler.java:132)
org.jacorb.orb.Delegate.servant_preinvoke(Delegate.java:2505)
org.omg.CORBA.portable.ObjectImpl._servant_preinvoke(ObjectImpl.java:135)
org.jacorb.demo.sas._SASDemoStub.printSAS(_SASDemoStub.java:73)
org.jacorb.demo.sas.GssUpServer.printSAS(GssUpServer.java:46)
org.jacorb.demo.sas.SASDemoPOA._invoke(SASDemoPOA.java:47)
org.jacorb.poa.RequestProcessor.invokeOperation(RequestProcessor.java:348)
org.jacorb.poa.RequestProcessor.process(RequestProcessor.java:670)
org.jacorb.poa.RequestProcessor.run(RequestProcessor.java:820)
java.lang.NullPointerException
    at org.jacorb.security.sas.SASClientInterceptor.send_request(SASClientInterceptor.java:194)
    at org.jacorb.orb.portableInterceptor.ClientInterceptorIterator.invoke(ClientInterceptorIterator.java:129)
    at org.jacorb.orb.portableInterceptor.AbstractInterceptorIterator.iterate(AbstractInterceptorIterator.java:66)
    at org.jacorb.orb.portableInterceptor.ClientInterceptorIterator.iterate(ClientInterceptorIterator.java:87)
    at org.jacorb.orb.DefaultClientInterceptorHandler.invokeInterceptors(DefaultClientInterceptorHandler.java:328)
    at org.jacorb.orb.DefaultClientInterceptorHandler.handle_send_request(DefaultClientInterceptorHandler.java:132)
    at org.jacorb.orb.Delegate.servant_preinvoke(Delegate.java:2505)
    at org.omg.CORBA.portable.ObjectImpl._servant_preinvoke(ObjectImpl.java:135)
    at org.jacorb.demo.sas._SASDemoStub.printSAS(_SASDemoStub.java:73)
    at org.jacorb.demo.sas.GssUpServer.printSAS(GssUpServer.java:46)
    at org.jacorb.demo.sas.SASDemoPOA._invoke(SASDemoPOA.java:47)
    at org.jacorb.poa.RequestProcessor.invokeOperation(RequestProcessor.java:348)
    at org.jacorb.poa.RequestProcessor.process(RequestProcessor.java:670)
    at org.jacorb.poa.RequestProcessor.run(RequestProcessor.java:820) 
```

上面的代码在 JacORB 2.3.1 中运行良好。解决此问题的简单方法是将属性设置`jacorb.isLocalHistoricalInterceptors`为 true；但是，某些“内置”方法（例如`_is_a()`）不尊重此标志（因为这些方法直接使用 来检查对象位置`is_really_local()`）。在本地进行调用时，这些“内置”方法调用似乎从未使用过拦截器。

**所以我的观察是：**

 **1.  JacORB 3.x 似乎破坏了一些本地调用的便携式拦截器（准确地说，需要连接对象的拦截器......）
2.  JacORB 3.x 似乎是第一个使用便携式拦截器进行本地调用的`_is_a()`JacORB`_non_existent()``_interface()``_get_component()`**  **第一个问题是可以解决的，因为有一个属性使 JacORB 3.x 可以像旧版本一样工作。第二个（结合第一个）似乎真的很麻烦。

**有没有其他人注意到这种行为，并且可以验证我的怀疑这确实是 JacORB 3.x 中的缺陷，或者我错过了什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T20:46:12.490

带有本地调用的内置便携式拦截器应该可以正常工作；这听起来像一个错误。事实上，这听起来像是[将 AMI+BiDir 与 jacorb 一起使用](https://stackoverflow.com/questions/17537635/using-amibidir-with-jacorb)。我也输入了[http://www.jacorb.org/bugzilla/show_bug.cgi?id=957](http://www.jacorb.org/bugzilla/show_bug.cgi?id=957)**

# linux - rsync 不同步文件名中的大写/小写。我怎样才能让它同步大写？

> ID：15945705
> 
> 赞同：0
> 
> 时间：2013-04-11T09:51:37.347
> 
> 标签：linux, bash, shell, rsync, web-deployment

我们使用 shell 脚本通过不同的服务器 (DTAP) 部署应用程序。唯一的问题是，当上限更改时，这些不会同步。

例如：

> aboutcontroller.php > AboutController.php

我们正在使用以下 rync 命令。

```
rsync -avz git/folder/ public_html/folder/ 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:37:09.970

问题可能不是`rsync`本身，而是源文件系统或目标文件系统（或两者）不区分大小写。当`rsync`说“给我文件的内容`foo`”时，文件系统用内容来响应`FOO`，因为无论出于何种原因，它认为不区分大小写是一件“好事”，没有太多`rsync`可以做的事情来完成“正确的事” ”。这将是 Windows 和 Mac 平台使用的常见文件系统上的一个问题，但在 Unix/Linux 上不是那么多（除了它们也支持 Windows/Mac 文件系统的地方）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-26T23:43:02.373

Linux 确实考虑到了这一点。但是，如果您今天提供 Foo.h，但您的不区分大小写的文件系统明天将其发送 foo.h（内容不同，您最终会在 Linux 上得到两个文件（foo.h 和 Foo.h），您会感到困惑大家。

# mvvm - MVVM SelectionChanged 组合框不调用“设置”

> ID：15945715
> 
> 赞同：1
> 
> 时间：2013-04-11T09:51:59.020
> 
> 标签：mvvm, combobox, viewmodel, selectionchanged

我的问题是我想在我的 ViewModel 中调用“SelectionChanged”事件。

我有一个 ComboBox（这里称为 ListPicker，它是一个电话应用程序）：

```
<tool:ListPicker Name="txt_LZZ" 
    ItemsSource="{Binding ZZR}" SelectedItem="{Binding MySelectedItem}" /> 
```

我在 ViewModel 中的属性如下所示：

```
 private List<string> _zzr;
    public List<string> ZZR
    {
        get
        {
            _zzr = new List<string>();
            _zzr.Add("Jahr");
            _zzr.Add("Monat");
            _zzr.Add("Woche");
            _zzr.Add("Tag");
            return _zzr;
        }
        set
        {
            _zzr = value;
            RaisePropertyChanged(() => ZZR);
        }
    }

    private string _mySelectedItem;
    public string MySelectedItem
    {
        get
        {
            return _mySelectedItem;
        }
        set
        {
            if (value == _mySelectedItem)
                return;
            _mySelectedItem = value;
            RaisePropertyChanged(() => MySelectedItem);
            GetValues();
        }
    } 
```

程序只调用一次 get 方法，而 _mySelectedItem 的值为“null”。我想要的是，当我在我的 Combobox (ListPicker) 中更改 SelectedItem 时，ViewModel 必须调用方法 GetValues，该方法位于 MySelectedItem 的设置器中。问题：-> ViewModel 不调用 setter。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:54:28.970

尝试将绑定模式设置为`TwoWay`：

```
<tool:ListPicker Name="txt_LZZ" 
    ItemsSource="{Binding ZZR}" SelectedItem="{Binding MySelectedItem, Mode=TwoWay}" /> 
```

我也不会在 getter 中实例化您的值集合，而是将 setter 设为私有，并为视图模型中的属性分配一个值（例如构造函数或激活视图模型时）。

# client - SignalR：未调用任务 Join()

> ID：15945718
> 
> 赞同：1
> 
> 时间：2013-04-11T09:52:11.617
> 
> 标签：client, signalr, send

我正在尝试使用 SignalR 创建聊天应用程序。为了使发送私人消息成为可能，我想将客户分配到具有其 profileID 名称的组。所以我可以简单地调用组的 addMessage 函数来发送给特定的客户端。

当我转到此页面时：[https ://github.com/SignalR/SignalR/wiki/Hubs](https://github.com/SignalR/SignalR/wiki/Hubs)

它告诉我向 Hub 添加一个名为 Join() 的函数。在这里，我可以将传入的客户端添加到组中。所以我创建了这段代码：

```
 [HubName("Chat")]
    public class ChatHub : Hub
    {
            public Task Join()
            {
                    if (HttpContext.Current.User.Identity.IsAuthenticated)
                    {
                            Profiel_DataHelper profiel = new Profiel_DataHelper(HttpContext.Current.User.Identity.Name);
                            return Groups.Add(Context.ConnectionId, profiel.ProfielID.ToString());
                    }
                    else
                    {
                            return null;
                    }
            } 
```

......

当我想调用特定客户端时，我使用以下代码：

```
 var context = GlobalHost.ConnectionManager.GetHubContext();
    context.Clients.Group(profielidNaar).addTyptOnline(profielidVan); 
```

但是当我运行程序时，根本没有调用 Join() 任务，因此我对组的调用也不起作用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:54:46.927

加入是您需要从客户端调用的集线器上的一种方法。没有人会为您调用它，并且“加入”不是一种自动调用的特殊方法。该文档向您展示了如何声明“可以”从客户端调用的方法。

还有其他方法可以知道客户端何时连接、重新连接和断开连接，这里有详细说明： [https ://github.com/SignalR/SignalR/wiki/Hubs#detecting-connect-reconnect-and-disconnect-clients-in-hubs](https://github.com/SignalR/SignalR/wiki/Hubs#detecting-connect-reconnect-and-disconnect-clients-in-hubs)

# ios - UICollectionViewCell 中的不透明 UILabel 具有奇怪的渲染行为

> ID：15945721
> 
> 赞同：1
> 
> 时间：2013-04-11T09:52:20.710
> 
> 标签：ios, uilabel, uicollectionview, uicollectionviewcell, ios6.1

我今天在 UICollectionViewCell 中使用 UILabels 遇到了一些非常奇怪的行为，我希望你们中的一个人能对此有所了解。

我不能给你看代码或完整的截图，但我会尽量解释和说明；

我有一个 UICollectionView，它有几个单元格并支持水平滚动。在单元格中，我有一个我设置 `- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath`并清除的标签`- (void)prepareForReuse`。

看起来很正常，我什至有一个完全一样的实现，它没有任何奇怪的地方。

现在，出于性能原因，我在 Interface Builder 中将 UILabel 的不透明度设置为 ON。当我滚动几次时，我会看到：

![奇怪的渲染行为](https://i.stack.imgur.com/iGspR.png)

每当我在 Interface Builder 中关闭 opaque 时，我都会看到： ![在此处输入图像描述](https://i.stack.imgur.com/jqe7H.png)

我对 UITableViews 和 UICollectionViews（以及重用等）有很多经验，但我无法正确解释这种行为......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-19T10:28:14.787

```
yourLabel.backgroundColor = UIColor.whiteColor() 
```

UILabel 的默认背景颜色是清晰的颜色。如果将标签设置为不透明，则还需要将背景颜色设置为不透明颜色。

# ios - IOS/IPod 框架，如何仅使用 MPMediaItemPropertyPersistentID 检索歌曲？

> ID：15945725
> 
> 赞同：1
> 
> 时间：2013-04-11T09:52:35.023
> 
> 标签：ios, mpmusicplayercontroller

是否有任何“更简单”的方式从音乐库中检索歌曲（假设你有**MPMediaItemPropertyPersistentID**）

这就是我目前正在使用的：

我有一个存储有**MPMediaItemPropertyPersistentID** id 的 NSArray (trackList)。现在我想加载每个媒体项目。但这似乎有点麻烦加载一首歌曲（即 MPMediaItem）。

然后在我的*cellForRowAtIndexPath* (UITableView) 中，我像这样检索每个 MPMediaItem：

```
MPMediaPropertyPredicate *predicate = [MPMediaPropertyPredicate predicateWithValue:               [trackList objectAtIndex:indexPath.row] forProperty:MPMediaItemPropertyPersistentID];
MPMediaQuery *mediaQuery = [[MPMediaQuery alloc] init];
[mediaQuery addFilterPredicate: predicate];
MPMediaItem *item = [[mediaQuery items] objectAtIndex:0]; 
```

还有更*优雅的*解决方案吗？

# javascript - 如何使用 javascript 获得这样的 JSON

> ID：15945728
> 
> 赞同：-8
> 
> 时间：2013-04-11T09:52:39.957
> 
> 标签：javascript, json

我想得到一个如下的 JSON：

```
myJson = {"QC": ["city1","city2"], "NU": ["city3", "city4"], "FO": ["city5","city6"]}; 
```

我从数据库中获取数据，结构如下：

```
 id      province    city
  1        QC        city1
  2        NU        city3
  3        FO        city5
  4        NU        city4
  5        QC        city2
  6        FO        city6 
```

坦克非常适合小费

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:56:54.963

循环遍历行。保留`province`as 键。在添加之前检查密钥是否已经存在。如果已经存在添加到 array.Something 像这样，

```
if(obj[key]){
  obj[key].push(city);
}else{
  obj[key] = [];
  obj[key].push(city);
} 
```

# iphone - iphone- UITableView 只显示一个值

> ID：15945729
> 
> 赞同：-1
> 
> 时间：2013-04-11T09:52:40.310
> 
> 标签：iphone, ios, xcode

解析后我`UITableView`没有显示所有值`XML`。它只返回一行。解析xml后，为什么只显示一行而不是全部`ArrayList`？我检查了我的 xml php 页面。它显示所有值都很好。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [[xmlcont xmlbanktransfer] count];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSUInteger const kMagnitudeImageTag = 0;
    static NSUInteger const kLocationLabelTag = 4;
    static NSUInteger const klocationtag = 6;
    static NSUInteger const kacctag = 8;
    static NSUInteger const knameLabelTag = 9;

    UIImageView *magnitudeImage = nil;
    UILabel*locationLabel = nil;
    UILabel*locationtag=nil;
    UILabel*acc=nil;
    UILabel*nameLabel= nil;
    //NSMutableArray *cont = [xmlcont tweets];
    // Tweet *current       = [cont objectAtIndex:indexPath.row];
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        /*//common settings
         cell.selectionStyle = UITableViewCellSelectionStyleNone;
         cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
         cell.imageView.contentMode = UIViewContentModeScaleAspectFill;
         cell.imageView.frame = CGRectMake(0.0f, 0.0f, 44.0f, 44.0f);
         cell.imageView.clipsToBounds = YES;

         */
    }

    for(UIView *view in cell.contentView.subviews)
    {
        if ([view isKindOfClass:[UIView class]])
        {
            [view removeFromSuperview];
        }
    }
    NSMutableArray *cont = [xmlcont xmlbanktransfer];
    trans *current= [cont objectAtIndex:indexPath.row];
    NSLog(@"sd %@",current.date);
     NSLog(@"sd %@",current.name);
    locationLabel = [[UILabel alloc] initWithFrame:CGRectMake(5,10, 250, 20)];
    locationLabel.tag = kLocationLabelTag;
    locationLabel.font = [UIFont boldSystemFontOfSize:15];
    [cell.contentView addSubview:locationLabel];

    locationLabel.text=current.name;
    locationLabel.textColor=[UIColor colorWithRed:0.050 green:0.278 blue:0.392 alpha:1];
    //locationLabel.backgroundColor=[UIColor lightGrayColor];
    locationLabel.backgroundColor=[UIColor colorWithRed:225 green:225 blue:225 alpha:0] ;
    nameLabel = [[UILabel alloc] initWithFrame:CGRectMake(180,10, 250, 20)];
    nameLabel.tag = knameLabelTag;
    nameLabel.font = [UIFont systemFontOfSize:13];
    [cell.contentView addSubview:nameLabel];
    nameLabel.text=current.date ;
    nameLabel.textColor=[UIColor colorWithRed:0.050 green:0.278 blue:0.392 alpha:1];
    //locationLabel.backgroundColor=[UIColor lightGrayColor];
    nameLabel.backgroundColor=[UIColor colorWithRed:225 green:225 blue:225 alpha:0] ;
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    return cell;
} 
```

解析xml的代码：

```
 xmlbanktransfer=[[NSMutableArray alloc] init];
    NSURL *url=[NSURL URLWithString:[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

    parser=[[NSXMLParser alloc] initWithContentsOfURL:url];
    [parser setDelegate:self];
    [parser parse];
    NSLog(@"testing12 %@ ",url);
   // NSLog(@"tweets %@ ", xmlbanktransfer);
    NSLog(@"Total values = %d",[xmlbanktransfer count]);
    return self;
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI
 qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{

    if([elementName isEqualToString:@"item"])
    {
        currentTweet       = [trans alloc];
        banktransNodeContent =[[NSMutableString alloc] init];
    }
}
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{

    if([elementName isEqualToString:@"date"])
    {

        currentTweet.date = [currentTweet.date stringByReplacingOccurrencesOfString:@"&" withString:@" "];
        currentTweet.date = banktransNodeContent;

    }

    if([elementName isEqualToString:@"name"])
    {
        currentTweet.name =banktransNodeContent;

    }
    if ([elementName isEqualToString:@"type"])
    {
        currentTweet.type=banktransNodeContent;
    }

    if ([elementName isEqualToString:@"gross"])
    {
        currentTweet.gross=banktransNodeContent;
    }

    if ([elementName isEqualToString:@"fee"])
    {
        currentTweet.fee=banktransNodeContent;
    }

    if ([elementName isEqualToString:@"net"])
    {
        currentTweet.net=banktransNodeContent;
        NSLog(@"current tweet  %@",currentTweet.net);
    }

    if ([elementName isEqualToString:@"category"])
    {
        currentTweet.category=banktransNodeContent;
        NSLog(@"current tweet  %@",currentTweet.category);
    }

    if ([elementName isEqualToString:@"account"])
    {
        currentTweet.account=banktransNodeContent;
        NSLog(@"current tweet  %@",currentTweet.account);
    }

    if([elementName isEqualToString:@"item"])
    {

        [xmlbanktransfer addObject:currentTweet];

        currentTweet = nil;

        banktransNodeContent = nil;
    }

}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string

{

    NSLog(@"currentNodeContent are %@",banktransNodeContent);
    banktransNodeContent = [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    NSLog(@"currentNodeContentstring test are %@",banktransNodeContent);

}

- (void)parser:(NSXMLParser *)parser foundCDATA:(NSData *)CDATABlock
{
    banktransNodeContent = [[NSString alloc] initWithData:CDATABlock encoding:NSUTF8StringEncoding];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:54:55.217

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [[xmlcont xmlbanktransfer] count];
} 
```

此方法告诉表格视图要填充多少个单元格

记录该值并查看它返回了多少[它现在必须返回 1，因为该表显示一行]。更正返回值，您将显示所有值

检查事项

*   上面提到的返回值
*   确保数组`xmlbanktransfer`是强类型的属性

# javascript - Java 脚本：未捕获的类型错误：无法读取未定义的属性“值”

> ID：15945730
> 
> 赞同：0
> 
> 时间：2013-04-11T09:52:51.793
> 
> 标签：javascript

如果我这个问题是重复的，我很抱歉，我已经阅读了网站上所有关于但没有找到答案的问答。

我收到错误消息`Uncaught TypeError: Cannot read property 'value' of undefined`。有趣的是，这仅适用于 1 个客户。我创建了一个地方，我们可以在其中输入客户的到达和离开信息，但是一旦我们添加一个客户，它就会为其他客户而来，它工作正常。我已经检查了我办公室的所有电脑，但我仍然无法将 XYZ 先生添加到到达列表中。

这是行

```
var fldQPRArrivalFlightID=document.getElementsByName('fldQPRArrivalFlightID['+fldCustomerReservationID+']['+mycount+']')[0].value; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:59:00.473

该方法`getElementsByName(..)`不返回数组 - 或空数组。因此，`getElementsByName(..)[0]`是`undefined`并且您将收到错误。

您可以尝试记录的返回值`'fldQPRArrivalFlightID['+fldCustomerReservationID+']['+mycount+']'`并验证调用`getElementsByName( returnvalue )`应该返回什么。

而不是您的代码：

```
fldQPRArrivalFlightID=document.getElementsByName('fldQPRArrivalFlightID['+fldCustomerReservationID+']['+mycount+']')[0].value; 
```

尝试

```
console.log( fldCustomerReservationID );
console.log( mycount );
console.log( 'fldQPRArrivalFlightID['+fldCustomerReservationID+']['+mycount+']' );
console.log( document.getElementsByName('fldQPRArrivalFlightID['+fldCustomerReservationID+']['+mycount+']') ); 
```

我真的很惊讶所有这些引用都是正确的。

# c# - 选择所有包含某个属性的xml节点

> ID：15945733
> 
> 赞同：7
> 
> 时间：2013-04-11T09:52:57.007
> 
> 标签：c#, xml, xpath

我必须选择包含具有特定名称的属性的所有节点。

这是我目前的，不工作的方法。

```
public List<string> RetrieveValuesForAttribute(string attributeName)
{
    var list = new List<string>();

    string xpath = "//*[@Name='" + attributeName + "']";
    XmlNodeList xmlNodeList = document.SelectNodes(xpath);

    foreach (XmlNode xmlNode in xmlNodeList)
    {
        list.Add(xmlNode.Attributes[attributeName].InnerText);
    }

    return list;
} 
```

我尝试选择包含方法参数中给定名称的属性的所有节点，`attributeName`并将值添加到变量`list`中。

*例子：*

此方法调用：

```
List<string> result = RetrieveValuesForAttribute("itemSelectedHandler"); 
```

应该返回一个包含字符串“OnSelectedRelatedContactChanged”的列表

这是xml文件：

```
<GroupBoxWrapper id="gbRelatedContacts" text="Related Contacts">
  <TabIndex>0</TabIndex>
  <TabStop>false</TabStop>
  <PanelWrapper id="pnlRelatedContactsView" width="1350">
    <TabIndex>0</TabIndex>
    <TabStop>false</TabStop>
    <ListViewWrapper id="lvRelatedContacts" itemSelectedHandler="OnSelectedRelatedContactChanged" itemDoubleClickHandler="OnRelatedContactDoubleClick">
      <TabIndex>0</TabIndex>
      <TabStop>true</TabStop>
      <ListViewColumns>
        <Column title="Name" mapNode="Contact\Name" />
        <Column title="Lastname" mapNode="Contact\Lastname" />
      </ListViewColumns>
    </ListViewWrapper>
  </PanelWrapper>
</GroupBoxWrapper> 
```

进一步的问题：用 LINQ 解决这个问题会更好吗？

**解决方案1：**谢谢你，ywm

```
public List<string> RetrieveValuesForAttribute(string attributeName)
{
    var list = new List<string>();

    string xpath = @"//*[@" + attributeName + "]";
    XmlNodeList xmlNodeList = document.SelectNodes(xpath);

    foreach (XmlNode xmlNode in xmlNodeList)
    {
        list.Add(xmlNode.Attributes[attributeName].InnerText);
    }

    return list;
} 
```

**解决方案 2：**谢谢 Jon Skeet

```
public List<string> RetrieveValuesForAttribute(string attributeName)
{
    //document is an XDocument
    return document.Descendants()
                   .Attributes(attributeName)
                   .Select(x => x.Value)
                   .ToList();
} 
```

LINQ to XML 解决方案在我看来要优雅得多。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T09:58:19.113

如果您可以为此使用 LINQ to XML，那将是微不足道的：

```
// Note that there's an implicit conversion from string to XName,
// but this would let you specify a namespaced version if you want.
public List<string> RetrieveValuesForAttribute(XName attributeName)
{
    // Assume document is an XDocument
    return document.Descendants()
                   .Attributes(attributeName)
                   .Select(x => x.Value)
                   .ToList();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T09:58:26.523

您正在寻找的 XPath 应该是

```
"//*[@" + attributeName + "]" 
```

您最初的 XPath 所做的是寻找所有`Name`具有该值的属性的元素`attributeName`

这将查找具有attributeName 属性的任何元素

```
//*[@title] 
```

将返回列元素

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T10:07:57.893

我不确定 C# 语法，但我认为 xpath vlaue 是错误的。请尝试：“//*[@itemSelectedHandler]”。在c#中应该做什么

```
 string xpath = "//*[@" + attributeName + "]"; 
```

# c++ - 松下TSP崩溃

> ID：15945737
> 
> 赞同：0
> 
> 时间：2013-04-11T09:53:09.650
> 
> 标签：c++, tapi

我有一个程序，它使用松下 TSP 从松下 PBX 接收事件，然后对接收到的事件执行某些操作。我从不调用任何在 PBX 中创建状态更改并且只对事件感兴趣的函数，所以我只使用`lineGetCallInfo`and `lineGetCallStatus`。现在我有一个问题：松下 TSP 在（Windows 电话服务）中创建了访问冲突`svchost.exe`，因此我无法从 TAPI 获取事件。

我的老板拒绝说这是我使用 TAPI 时出现的问题，但我只使用了几个函数，有没有人有同样的问题或知道我应该在哪里找到更多信息？甚至我应该如何调试这个错误？

我正在使用带有 IOCP 的 C++ TAPI 2 接口进行编程，并且我的程序在 Windows Server 2003 上运行 我的 PBX 是 TDA600，负载非常高

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:32:03.243

您能否指定 TSP 崩溃的时间或频率？

一种可能的解释是，即使您使用很少的函数，TSP 也可能希望您在 callstate 'idle' 事件上调用 'lineDeallocateCall'，以便 TSP 知道它可以清除内存。忽视这样做可能会导致缓冲区溢出和访问违规。当然，这需要松下进行一些草率的编程，但这是一个理论。

# sql - 带引号的经典 ASP INSERT INTO

> ID：15945738
> 
> 赞同：0
> 
> 时间：2013-04-11T09:53:10.720
> 
> 标签：sql, sql-server-2008, asp-classic

我想在记录输入 SQL DB 时为其添加引号，例如：

用户输入：1234

在数据库中记录为“1234”

我正在使用经典 ASP 表单来执行此操作 - 这是我应该在插入查询之前在代码中执行的操作，还是更适合使用 SQL 在后端添加引号？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:57:37.080

使用查询参数。转义撇号是他们将为您做的好事之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:03:05.853

您可以按照 Dan 的建议使用查询参数，或者如果您正在编写原始 SQL，您可以[使用双引号](http://www.sitepoint.com/forums/showthread.php?404890-How-to-handle-quotes-in-database-insert)来输入单引号

# iphone - 在具有不同值的 MutableArray 中存储多个值

> ID：15945743
> 
> 赞同：0
> 
> 时间：2013-04-11T09:53:24.890
> 
> 标签：iphone, ios

我有一个按钮，单击它我将当前引号的索引存储到一个数组中。问题是它覆盖了同一个对象。如何使用不同的对象更改它`NSNumber`以存储在 中`NSMutableArray`？

```
[someButton setImage:[UIImage imageNamed:@"add_favoritegold.png"] forState:UIControlStateHighlighted];
    NSUserDefaults *favoriteQuotes = [NSUserDefaults standardUserDefaults];
    NSMutableArray *ListOfIndex= [[NSMutableArray alloc] init];

    //Want to change with diffrent objecy 
    **NSNumber* Wrapped = [NSNumber numberWithInt:index];**

    [ListOfIndex addObject:Wrapped];
    int xOut = [[ListOfIndex lastObject] intValue];
    NSLog(@"%d",xOut);
    [favoriteQuotes setObject:ListOfIndex forKey:@"Indexes"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:06:37.410

尝试这个

```
- (void)saveFavouriteQuoteIndex:(NSUInteger)index
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSMutableArray *savedQuoteIndexes = [[defaults objectForKey:@"Indexes"]mutableCopy];

    if (!savedQuoteIndexes) {
        savedQuoteIndexes = [NSMutableArray array];
    }

    NSNumber *indexNumber = @(index);

    if (![savedQuoteIndexes containsObject:indexNumber]) {
        [savedQuoteIndexes addObject:indexNumber];

        [defaults setObject:savedQuoteIndexes forKey:@"Indexes"];
        [defaults synchronize];
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:56:13.287

您正在`ListOfIndex`使用密钥保存为`Indexes`.

因此，对于下一个值，它将替换具有 key 的先前值`Indexes`。

编辑：

读取数组

```
 NSArray *readArray=favoriteQuotes[@"Indexes"]; 
```

将新值添加到同一个数组中。

# delay - 如何在 FADEIN 中添加延迟

> ID：15945745
> 
> 赞同：0
> 
> 时间：2013-04-11T09:53:29.453
> 
> 标签：delay, fadein, fade

所以，我有这个：

```
$('header').fadeIn(1000, function() {
    // Animation complete
});

$('#intro').fadeIn(3000, function() {
    // Animation complete
}); 
```

现在我想让第二个稍后进来，所以延迟一下。但是我把它放在代码的什么地方呢？

编辑：知道了，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:07:12.260

jQuery 为每个元素维护一个效果队列。您正在为 2 个元素设置动画，以便它们同时触发。

更多信息：[http ://api.jquery.com/queue/](http://api.jquery.com/queue/)

您可以嵌套函数，但如果您想要 10 个效果，这将变得很困难。

这是一个很好的解决方案：

[https://stackoverflow.com/a/11354378/907253](https://stackoverflow.com/a/11354378/907253)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:56:58.503

如果你想在第一个动画之后开始第二个动画，你应该这样做

```
$('header').fadeIn(1000, function() {
    $('#intro').fadeIn(3000, function() {
    // Animation complete
   });
}); 
```

# wcf - 由于 bindingConfiguration 属性导致的 ServiceActivationException

> ID：15945748
> 
> 赞同：0
> 
> 时间：2013-04-11T09:53:42.280
> 
> 标签：wcf, exception, https

我希望能够同时使用 http 和 https 访问服务

在地址“安全”的端点上，如果我包含 bindingConfiguration 属性，我会得到一个 ServiceActivationException。

但如果我删除 bindingConfiguration="webBindingSecure"，一切正常。bindingConfiguration 有什么问题？

```
<system.serviceModel>
<services>
  <service name="OperatorApp.Api" behaviorConfiguration="ServiceBehaviour">
    <endpoint address="secure" binding="webHttpBinding" **bindingConfiguration="webBindingSecure"**  contract="OperatorApp.IApi" behaviorConfiguration="ssl" />

  <endpoint address="normal" binding="webHttpBinding"   contract="OperatorApp.IApi" behaviorConfiguration="web" />
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="ServiceBehaviour">
     <serviceMetadata httpGetEnabled="true"  httpsGetEnabled="true" >
     </serviceMetadata>
    <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="web">
      <webHttp />
    </behavior>
  <behavior name="ssl">
    <webHttp/>
  </behavior>
  </endpointBehaviors>
</behaviors>
<bindings>
  <webHttpBinding>
    <binding name="webBindingSecure">
      <security mode="Transport">
      </security>
    </binding>
  </webHttpBinding>
</bindings> 
```

# algorithm - 数字之间的最小差异

> ID：15945749
> 
> 赞同：2
> 
> 时间：2013-04-11T09:53:46.037
> 
> 标签：algorithm, sorting, minimum

我们有 K 组不同的数字。我们必须从每组中选择一个数字，以使较大数字和较小数字之间的差异*最小*。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:53:39.110

像这样的东西（用Haskell写的）？

```
import Data.List (minimum, maximum, minimumBy)

minDiff (x:xs) = comb (head x) (diff $ matches (head x)) x where
  lenxs = length xs
  diff m = maximum m - minimum m
  matches y = minimumBy (\a b -> compare (diff a) (diff b)) $ p [] 0 where
    md = map (minimumBy (\a b -> compare (abs (a - y)) (abs (b - y)))) xs
    mds = [m | m <- foldl (\b a -> filter (\z -> abs (z - y) == abs (y - md!!a)) (xs!!a) : b) [] [0..lenxs - 1]]
    p result index
      | index == lenxs = [y:result]
      | otherwise      = do
          p' <- mds!!index
          p (p':result) (index + 1)
  comb result difference []     = matches result
  comb result difference (z:zs) =
    let diff' = diff (matches z)
    in if diff' < difference
          then comb z diff' zs
          else comb result difference zs

OUTPUT:
*Main> minDiff [[1,3,5,9,10],[2,4,6,8],[7,11,12,13]]
[5,6,7] 
```

# geolocation - 通过 API 从 Instagram 照片中提取 lat/lng

> ID：15945752
> 
> 赞同：2
> 
> 时间：2013-04-11T09:53:58.520
> 
> 标签：geolocation, instagram

默认情况下，Instagram 会为所有提交的照片保存地理标签。然后，您可以使用按位置搜索`/media/search`。但是，当我尝试使用 提取特定图片中的地理标签时`/media/media-id`，我总是得到`"location": null`json 响应并且没有 lat/lng 对。

这个功能是否被 Instagram 简单地阻止了？还有另一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T00:35:19.597

get /media/{media-id} 端点确实会返回可用的位置信息。用户可以选择不提供它，所以不是每个图像都会有它。

此示例将返回带有位置信息的图像。您需要提供自己的访问令牌：

```
https://api.instagram.com/v1/media/432039264888987277_4513750 
```

响应看起来像这样：

```
 {
  "meta":  {
    "code": 200
  },
  "data":  {
    "attribution": null,
    "tags":  [],
    "type": "image",
    "location":  {
      "latitude": 48.8635,
      "longitude": 2.301333333
    },
    "comments":  {
      "count": 0,
      "data":  []
    },
    .......... 
```

# xamarin.ios - 在 monotouch/monodroid 上托管 ServiceStack Web 服务？

> ID：15945753
> 
> 赞同：3
> 
> 时间：2013-04-11T09:54:02.340
> 
> 标签：xamarin.ios, xamarin.android, servicestack, xamarin

我目前正在尝试使用 Xamarin 和 monotouch/monodroid 在 ios/android 上托管 REST Web 服务。我已经成功地拥有一个使用 HttpListener 运行的基本网络服务器，但现在我想使用 ServiceStack 托管一个完整的网络服务。

monotouch/monodroid 的网络托管能力非常有限（HttpListener 基本上是唯一的方法），但 ServiceStack*理论上*可以适应这种情况。

这似乎是可能的，因为我找到了这样做的人：[http ://www.servicestack.net/mythz_blog/?p=417](http://www.servicestack.net/mythz_blog/?p=417)

问题是该项目在最后一个 monotouch 版本上不再工作，并且 ServiceStack 似乎已经删除了 monotouch/monodroid 最新版本中的服务器托管功能......

Xamarin 有一个 ServiceStack ( [https://github.com/xamarin/ServiceStack](https://github.com/xamarin/ServiceStack) ) 的分支，它似乎具有托管功能，但 monotouch 特定的服务托管构建无法编译，并且该分支似乎已经过时。

有没有人成功地使 ServiceStack 托管功能在 monotouch/monodroid 上工作？或者您对如何使其工作有想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:24:16.003

您可以尝试[本教程](https://github.com/ServiceStack/ServiceStack/wiki/Self-hosting)来进行自托管 ServiceStack。

看起来它将`HttpListener`在引擎盖下使用，但我不知道`AppHostHttpListenerBase`该类是否会为 Android 的 MonoTouch/Mono 编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T08:27:49.343

好的，经过一番研究，允许 ServiceStack 自托管的项目已被删除。它对（旧）Xamarin 版本（[https://github.com/xamarin/ServiceStack](https://github.com/xamarin/ServiceStack)）有更好的运气，并且可以编译它并使其以某种方式工作。

由于我需要与最新的 ServiceStack 版本同步，我想我别无选择，只能使用旧的 Xamarin 分支作为起点进行自己的改编。

# java - 为什么即使没有插入新行，executeUpdate 也会返回 1？

> ID：15945754
> 
> 赞同：3
> 
> 时间：2013-04-11T09:54:03.997
> 
> 标签：java, postgresql, jdbc, insert, prepared-statement

这是我非常简单的表（Postgres）：

```
CREATE TABLE IF NOT EXISTS PERFORMANCE.TEST
(
test text NOT NULL UNIQUE
); 
```

如果我尝试使用以下命令从数据库中插入字符串，一切都会按预期工作，毫不奇怪，数据库中会出现一个新行。

```
insert into performance.test (test) values ('abbbbaw'); 
```

但是，如果我想通过 JDBC 插入字符串，则不会插入任何内容，尽管preparedStatement.executeUpdate() 总是返回 1。

下面是我的方法，应该有效，但它没有。如果我遗漏了一些明显的东西，请告诉我。我想补充一点，我从来没有收到任何 SQLException。

```
private void storePerformance() {
    Connection conn= initializePerformanceConnection();
    if (conn!= null) {
       PreparedStatement insertPS = null;
        try {
            insertPS = conn.prepareStatement("insert into performance.test (test) values (?)");
            insertPS.setString(1, queryVar);
             int i = insertPS.executeUpdate();
            LogManager.doLog(LOG, LOGLEVEL.INFO," numberofrows= "+i);

        }  catch (SQLException e) {
            LogManager.doLog(LOG, LOGLEVEL.INFO,"Inserting query failed = "+queryVar,e);
        }finally{
            if(insertPS != null){
                try {
                    insertPS.close();
                } catch (SQLException e) {
                    LogManager.doLog(LOG, LOGLEVEL.INFO,"Closing PreparedStatement failed = "+queryVar,e);
                }
            }
            try {
                conn.close();
            } catch (SQLException e) {
                LogManager.doLog(LOG, LOGLEVEL.INFO,"Closing performanceConnection failed= "+ queryVar, e);
            }
        }           
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T10:40:08.933

那是丢失的：

```
conn.commit(); 
```

（在执行更新（）之后）

实际上插入了一个新行，但数据库立即回滚。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T10:09:26.553

executeupdate 用于“更新表集列 = 值等”。对于插入，只需调用 PreparedStatement 的执行。

# kendo-ui - 使用剑道绑定根据变量值设置标签属性

> ID：15945755
> 
> 赞同：1
> 
> 时间：2013-04-11T09:54:04.573
> 
> 标签：kendo-ui, validation

1.  我创建了一个绑定到 kendo MVVM 的输入元素的变量列表。
2.  我对所有输入元素进行了剑道验证（这是标准功能），检查输入是否为空。
3.  我的 MVVM 中的对象有一个属性 IsMandatory，如下所示：

    `{ Name: "test", ID: 12, ... , IsMandatory: false }`

4.  验证不得尝试验证 IsMandatory 值为 false 的元素。我怎样才能做到这一点？

我知道我可以像这样将属性绑定到 MVVM 值：

```
<input data-bind="attr: { name: Name }" /> 
```

这会导致上述对象的实际输出如下：

```
<input name="test" /> 
```

但是，`required`用于标准所需验证的属性是无值的，就像这样。

```
<input name="test" required /> 
```

因此，如果我的 MVVM 对象中的 IsMandatory 属性设置为 true，则基本上我需要创建具有必需属性的元素，如果设置为 false，则不需要创建必需属性。

```
{ Name: "test1", ID: 1, ... , IsMandatory: true }
{ Name: "test2", ID: 2, ... , IsMandatory: false }
{ Name: "test3", ID: 3, ... , IsMandatory: true }

<input name="test1" required />
<input name="test2" />
<input name="test3" required /> 
```

这个问题有优雅的解决方案吗？除了在每个元素的创建周围放置一个 if-else。或者是否有在我的验证中排除/包含元素的不同解决方案？

我可以想象的一种选择是创建一个自定义的必需验证，检查输入的 IsMandatory 属性是否设置为 true，然后才验证元素。但是，我找不到任何可能获得当前元素的 MVVM 对象。

```
...
validation: {
    required: function (input) {
        var observable = // Get the kendo observable from input here !!!!!
        if (observable.IsMandatory) {
            return input.val() != "";
        }
        return true;
    }
},
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:40:45.263

这可以实现为[自定义绑定](http://docs.kendoui.com/getting-started/framework/mvvm/bindings/custom)：

```
kendo.data.binders.required = kendo.data.Binder.extend({
  refresh: function() {
    var required = this.bindings.required.get();
    if (required) {
      this.element.setAttribute("required", "required");
    } else {
      this.element.removeAttribute("required");
    }
  }
}); 
```

这是一个现场演示：http: [//jsbin.com/atozib/1/edit](http://jsbin.com/atozib/1/edit)

# php - php & mysql：如何获取两个日期之间的值，包括它们两者

> ID：15945759
> 
> 赞同：1
> 
> 时间：2013-04-11T09:54:17.740
> 
> 标签：php, mysql

我需要获取两个日期之间的值，包括它们。如果用户选择两个日期相同，是否可以获得一个日期的值？

我有日期列作为日期和时间我使用的代码为：

```
select * 
from tbl_issue 
where issue_on>='$date_search' 
    and issue_on<='$date_search1' 
    and item_name='$item_id';

$date_search1 = substr($date_search1,8,2).substr($date_search1,4,4).substr($date_search1,0,4); 
```

我得到的结果是在这些日期之间，但我想包括它们两个。

帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:56:23.907

您可以将查询更改为此。这将为您提供预期的结果：

```
select * from tbl_issue where (issue_on between '$date_search' and '$date_search1') and item_name='$item_id'; 
```

# linux-kernel - 为什么我的 printk 消息最近在日志文件中更新？

> ID：15945766
> 
> 赞同：3
> 
> 时间：2013-04-11T09:54:44.083
> 
> 标签：linux-kernel, linux-device-driver, kernel

我写了一个简单的模块如下：

```
#include<linux/module.h>
#include<linux/kernel.h>

static int __init own_init(void)
{

    printk(KERN_INFO "Hi");

    return 0;
}

static int __exit own_exit(void)
{
printk(KERN_INFO "bye");

}

module_init(own_init);
module_exit(own_exit);

MODULE_LICENSE("GPL"); 
```

安装此模块后，我期待**Hi**，但未显示。但是在移除模块时，会显示**Hi**。当我再次插入时，会显示**Bye**。

所以有一个滞后。

这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T12:49:25.377

发生这种情况是因为您忘记了日志消息末尾的换行符。当内核输出部分消息（通过将字符串传递给`printk()`不以换行符结尾的字符串）时，日志系统将缓冲文本，直到消息的其余部分到达。另请参阅 -[`printk()`问题](http://lwn.net/Articles/503430/)。

# java - 主机将 php 升级到 5.4 后，PHP 和 Java 轮询脚本多次显示相同的数据

> ID：15945770
> 
> 赞同：1
> 
> 时间：2013-04-11T09:54:54.547
> 
> 标签：java, php

自从网络主机将其支持的 php 版本升级到 5.4 后，我被要求修复已停止正常工作的网页上的脚本，我已经尝试通过 htaccess 文件降级版本但没有成功。

该脚本基本上使用一个非常简单的数据库来存储问题并记录对它们的投票，它使用 Java 来实际显示问题及其答案，我认为这是导致问题的原因。

数据库中有 5 个问题，实际页面本身显示最后一个问题 5 次，这使我怀疑某个变量没有被清除。

这是脚本

```
$topPart = "";
$botPart = "";
$query = mysql_query("SELECT * FROM questions");
while ($row = mysql_fetch_assoc($query)) {
    //display question
    $topPart .= "pollNum=" . $row['id'] . ";\n";
    $topPart .= "$('#loader'+pollNum).fadeIn();\n";
    $topPart .= "$.get('poll.php', 'pollid='+pollNum, function(data, status){\n";
    $topPart .= "loadpoll(data, status, '". $row['id'] ."')\n";
    $topPart .= "});\n";

    $botPart .= "<div id=\"pollcontainer" . $row['id'] . "\" class=\"question\" >". $topPart . "</div>\n";
    $botPart .= "<p id='loader" . $row['id'] . "'>Loading...</p>"; 
```

我相信这一点工作正常，因为在检查页面时，id 和类都正确编号，它是重复的实际问题，周围的 div 编号正确。这是java...我对Java一无所知...

```
<script>
$(function(){
var pollNum;
<?php
echo $topPart;
?>

function loadpoll(data, status, pollNum){
    //alert(pollNum);
    var pollcontainer=$('#pollcontainer'+pollNum);
    var loader=$('#loader'+pollNum);
    pollcontainer.html(data);
    animateResults(pollcontainer);
    pollcontainer.find('#viewresult'+pollNum).click(function(){
        //if user wants to see result
        $('#formcontainer'+pollNum).fadeOut(100, function(){
            loader.fadeIn();
            $.get('poll.php', 'pollid='+pollNum+'&result=1', function(data,status){
            loadpoll(data,status, pollNum);
            });
        });
        //prevent default behavior
        return false;
    }).end()
    pollcontainer.find('#viewvote'+pollNum).click(function(){
        //if user wants to see result
        $('#formcontainer'+pollNum).fadeOut(100, function(){
            loader.fadeIn();
            $.get('poll.php', 'pollid='+pollNum, function(data,status){
                loadpoll(data,status, pollNum);
            });
        });
        //prevent default behavior
        return false;
    }).end()
    .find('#pollform'+pollNum).submit(function(){
        var selected_val=$(this).find('input[name=poll]:checked').val();
        if(selected_val!=''){
            //post data only if a value is selected
            loader.fadeIn();
            $.post('poll.php', $(this).serialize(), function(data, status)       {
                $('#formcontainer'+pollNum).fadeOut(100, function(){
                    $(this).html(data);
                    animateResults(this);
                    loader.fadeOut();
                });
            });
        }
        //prevent form default behavior
        return false;
    });
    loader.fadeOut();

}

function showresults(data, status, pollNum){
    var pollcontainer=$('#pollcontainer'+pollNum);
    var loader=$('#loader'+pollNum);
            pollcontainer.fadeOut(1000, function(){
                $(this).html(data);
                animateResults(this);

                pollcontainer.find('#viewvote'+pollNum).click(function(){
                    //if user wants to see result
                    loader.fadeIn();
                    $.get('poll.php', 'pollid'+pollNum, function(data,status){
                        pollcontainer.fadeOut(1000, function(){
                            $(this).html(data);
                            animateResults(pollcontainer);
                        });
                        loader.fadeOut();
                    });
                    //prevent default behavior
                    return false;
                }).end()

            });
            loader.fadeOut();

}

function animateResults(data){
    $(data).find('.bar').hide().end().fadeIn('slow', function(){
                        $(this).find('.bar').each(function(){
                            var bar_width=$(this).css('width');
                            $(this).css('width', '0').animate({ width: bar_width }, 1000);
                        });
                    });
}

}); 
```

# python - 在具有多个类的 CherryPy Python Web 应用程序中配置主机和端口

> ID：15945772
> 
> 赞同：1
> 
> 时间：2013-04-11T09:55:09.673
> 
> 标签：python, cherrypy

我有一个简单的 Cherrypy Web 应用程序，包括两个类。初始化代码如下所示：

```
c = MyClass()
c.updates = AnotherClass()
app = cherrypy.tree.mount(c, '/', 'myapp.config')
c.setConfig(app.config)
c.updates.setConfig(app.config)
cherrypy.engine.start()
cherrypy.engine.block() 
```

这两个类的 setConfig 方法只是一行代码来存储一些数据库配置：

```
def setConfig(self, conf):
    self.config = conf['Database'] 
```

配置文件 myapp.config 如下所示：

```
[global]
server.socket_host = "0.0.0.0"
server.socket_port = 80

[/]
tools.staticdir.root = com.stuff.myapp.rootDir + '/html'

[Database]
dbtable: "mydbtable"
username: "user"
password: "pass" 
```

当我开始很多时，应用程序获取数据库配置数据，并正确地从 /html 目录提供静态文件，但它只在 8080 上侦听 localhost。我在控制台上得到了这个：

```
[11/Apr/2013:10:03:58] ENGINE Bus STARTING
[11/Apr/2013:10:03:58] ENGINE Started monitor thread 'Autoreloader'.
[11/Apr/2013:10:03:58] ENGINE Started monitor thread '_TimeoutMonitor'.
[11/Apr/2013:10:03:58] ENGINE Serving on 127.0.0.1:8080
[11/Apr/2013:10:03:58] ENGINE Bus STARTED 
```

我肯定做错了什么。就好像配置的全局部分没有得到应用。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:28:26.137

I think I figured out how to solve it. I added this line:

```
cherrypy.config.update('myapp.config') 
```

after the line that says

```
app = cherrypy.tree.mount(c, '/', 'myapp.config') 
```

I think the reason why my classes were getting the Database configuration is that I pass it manually with the *setConfig()* calls. This passes the *application* configuration only, not the *global* configuration. The mount() call apparently doesn't propagate the configuration data to the objects it mounts, as I thought it would do.

Furthermore, the *update()* call must be after the *mount()* call, or an exception is raised.

I'm not sure whether this is the best way to organize this code. This works for now, but better ideas are always welcome.

# ssrs-2008 - ssrs 2008 - 删除列组总计 = 0 的行

> ID：15945774
> 
> 赞同：0
> 
> 时间：2013-04-11T09:55:17.940
> 
> 标签：ssrs-2008

在 ssrs 2008 中，我的报告输出如下

![在此处输入图像描述](https://i.stack.imgur.com/px1cm.png) 我需要删除/隐藏 sr.no。= 3，总数量 = 0 时适用的条件

我使用 RowVisibility Show 或 Hide 但输出显示：Sr.No。显示为 1 , 2 , 4 **（我的序列号应位于第 1、2、3 行并隐藏总计 = 0 的行）**

通过 tablix 属性应用过滤器如下，但它没有过滤输出（我试过 [表达式] = Sum(Fields!QTY.Value, "DataSet1") Text [Operator] = <> [Value] = 0 或 ""

我有像 [matrix_descriptopn, Matrix_OutletGroup, Outlet] 这样的行组 我有像 [Matrix_month] 这样的列组

![在此处输入图像描述](https://i.stack.imgur.com/8kcAw.png) ![在此处输入图像描述](https://i.stack.imgur.com/LvCWu.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:35:16.843

我会重新编码过滤器，例如

```
[expression] = Sum(Fields!QTY.Value) <> 0 
Boolean 
[Operator] = 
[Value] True 
```

这是我发现在 SSRS 中使用过滤器的唯一可靠方法。

# java - 如何在 JUnit 输出中插入一条简单的消息？

> ID：15945779
> 
> 赞同：1
> 
> 时间：2013-04-11T09:55:28.170
> 
> 标签：java, junit, errorcollector

有没有办法向 JUnit 输出添加消息？刚才我可以将该消息的异常添加到 ErrorCollector，但因此我将拥有消息*和堆栈*，而我不需要最后一个。我想在错误*之前*添加消息。

想法是：在检查 XML 时，收集所有差异，最后，如果有一些错误，则输出 XML 本身和之后的错误。

**编辑：** 请注意，我想添加到现有的输出中，而不是只输出我的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:33:54.023

听起来您正在寻找`ErrorCollector`略有不同的行为。最好的解决方案是只推出您自己的版本。

这是来源`ErrorCollector`：[https ://github.com/junit-team/junit/blob/master/src/main/java/org/junit/rules/ErrorCollector.java](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/rules/ErrorCollector.java)

如果您只关心字符串并且不需要堆栈跟踪，这是一个快速版本。如果您也想收集堆栈跟踪，但首先显示所有字符串，我将把代码留给您。

```
public class ErrorMessageCollector extends Verifier {
    private List<String> errors = new ArrayList<>();

    @Override
    protected void verify() throws Throwable {
        StringBuilder sb = new StringBuilder();
        for (String e : errors) {
            sb.append(e).append('\n');
        }
        assertTrue(sb.toString(), errors.isEmpty());
    }

    /**
     * Adds an error message to the table. Execution continues, but the test 
     * will fail at the end.
     */
    public void addErrorMessage(String error) {
        errors.add(error);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:31:27.730

编写自己的错误收集器。应该很容易包装现有的断言方法，捕获异常并跟踪是否有任何失败。如果您将此作为规则编写，则可以在每次测试后进行评估，而您必须手动进行。

# javascript - 从条形图谷歌图表中删除突出显示

> ID：15945780
> 
> 赞同：1
> 
> 时间：2013-04-11T09:55:29.143
> 
> 标签：javascript, google-visualization

我有一个有效的谷歌组合图。现在，当我将鼠标悬停在图例中的某个项目上时，我想删除特定时刻的突出显示。我使用了“enableInteractivity”选项，但这也删除了工具提示之类的东西。

我当然想保留工具提示。我似乎无法在互联网上找到任何关于这如何可能的信息。我知道我只能禁用工具提示，但不能禁用此突出显示的方法（我想要的）..

有人知道我怎么能做到这一点吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-02T19:06:43.367

遵循[这种在悬停时进行样式设置的方法](https://stackoverflow.com/questions/13111281/google-chart-api-change-color-on-hovering-legend)，您可以通过应用此 css 样式来消除悬停时突出显示的灰色轮廓。

```
#mychart svg g g g g rect {
    stroke-width:0px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T02:43:32.173

没有内置的方法可以做到这一点。高光被绘制到 SVG 中，工具提示也由谷歌内部图表 API 代码绘制。因此，要么你必须找到一种方法来阻止高光被绘制到 SVG 中（同时仍然允许工具提示），或者像[这个答案](https://stackoverflow.com/a/14627914/1933347)一样禁用交互性并实现你自己的工具提示。下面引用的答案（由[jeffery_the_wind 提供](https://stackoverflow.com/users/959306/jeffery-the-wind)）：

> 我最终制作了一个运行良好的自定义工具提示弹出窗口。
> 
> 假设气泡图的 div 定义如下：
> 
> ```
> <div id="bubble_chart_div"></div> 
> ```
> 
> 然后我使用了下面的 JavaScript。请注意，我遗漏了有关如何设置您的谷歌图表数据和加载谷歌图表包的内容。此代码仅显示如何获取自定义工具栏弹出窗口。
> 
> ```
>  var mouseX;
>     var mouseY;
>     $(document).mousemove( function(e) {
>         mouseX = e.pageX; 
>         mouseY = e.pageY;
>     });
> 
>     /*
>      *
>      *instantiate and render the chart to the screen
>      *
>      */
>     var bubble_chart = new google.visualization.BubbleChart(document.getElementById('bubble_chart_div'));
>     bubble_chart.draw(customer_product_grid_data_table, options);
> 
>     /*
>      * These functions handle the custom tooltip display
>      */
>     function handler1(e){
>         var x = mouseX;
>         var y = mouseY - 130;
>         var a = 1;
>         var b = 2;
>         $('#custom_tooltip').html('<div>Value of A is'+a+' and value of B is'+b+'</div>').css({'top':y,'left':x}).fadeIn('slow');
>     }
>     function handler2(e){
>         $('#custom_tooltip').fadeOut('fast');
>     }
> 
>     /*
>      *  Attach the functions that handle the tool-tip pop-up
>      *  handler1 is called when the mouse moves into the bubble, and handler 2 is called when mouse moves out of bubble
>      */
>     google.visualization.events.addListener(bubble_chart, 'onmouseover', handler1);
>     google.visualization.events.addListener(bubble_chart, 'onmouseout', handler2); 
> ```

# oracle - 任何人都可以看出这个简单的 Oracle 函数有什么问题吗？

> ID：15945781
> 
> 赞同：0
> 
> 时间：2013-04-11T09:55:30.163
> 
> 标签：oracle, oracle10g

该函数假设以不同的格式返回日期，仅此而已。看不出有什么问题！

```
CREATE OR REPLACE
FUNCTION get_cpd(a_date in varchar2)return varchar2
IS
cpd varchar2(4);
BEGIN
SELECT TO_CHAR(TO_DATE(a_date,'YY/MM/DD'),'YDDD') INTO cpd FROM DUAL;
RETURN cpd;
END get_CPD; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:11:42.007

这不是你调用函数的方式。在 Oracle 中，您必须始终从某些东西中进行选择。如果您没有要从中选择数据的实际表，请使用内置的单行表`DUAL`：

```
select get_cpd('13/04/10') from dual; 
```

如果它是更大查询的一部分，那么您可以传入列值：

```
select get_cpd(some_column) from some_table; 
```

如果您从另一个 PL/SQL 块或其他客户端调用它，那么您不必拥有`select`，例如

```
declare
    cpd varchar2(4);
begin
    cpd := get_cpd('13/04/10');
end;
/ 
```

...但这假设您将使用该值做某事，而不仅仅是显示它。

顺便说一句，您可以简化函数以利用这种调用方式`to_char`：

```
create or replace function get_cpd(a_date in varchar2)
return varchar2 is
begin
    return to_char(to_date(a_date,'YY/MM/DD'),'YDDD');
end get_cpd;
/

select get_cpd('13/04/11') from dual;

GET_CPD('13/04/11')
--------------------------------------------------------------------------------
3101 
```

您可能还应该使用`RR`而不是`YY`两位数的年份，但请查看文档。

# asp.net - VB - System.NullReferenceException - 带有日期戳的 LINQ to SQL

> ID：15945782
> 
> 赞同：1
> 
> 时间：2013-04-11T09:55:32.050
> 
> 标签：asp.net, .net, vb.net, linq-to-sql, visual-studio-2012

我有一个带有表 (Beko) 的 SQL DB，其中每条记录都包含创建日期的日期戳（数据类型为日期）。我正在尝试填充日历控件（calBeko），以便突出显示记录存在的每一天。

我在我的页面类中声明了以下内容来保存包含记录的日期

```
Private days As IEnumerable(Of DateTime) = Nothing 
```

然后，我在 Page_PreRender 事件中使用以下内容来创建包含记录的日期数组：

```
Dim startDate, endDate, baseDate As DateTime

    If calBeko.VisibleDate.Year <> 1 Then
        baseDate = calBeko.VisibleDate
    Else
        baseDate = DateTime.Now
    End If

    startDate = New DateTime(baseDate.Year, baseDate.Month, 1)
    endDate = startDate.AddMonths(1).AddDays(-1)

    Dim dc As New BekoDataContext
    Dim days = (From Beko In dc.Bekos _
               Where Beko.DateStamp <= endDate And _
               Beko.DateStamp >= startDate _
               Order By Beko.DateStamp _
               Select New DateTime(Beko.DateStamp.Year, _
                                   Beko.DateStamp.Month, _
                                   Beko.DateStamp.Day) Distinct).ToArray() 
```

然后我使用 calBeko_DayRender 事件来突出显示记录存在的日期：

```
For Each d In days
        If d.Day = e.Day.Date.Day AndAlso _
            d.Month = e.Day.Date.Month Then
            e.Cell.CssClass = "ajax_calendar_checkday"
            Exit For
        End If
    Next 
```

问题是当我运行页面时，我在以下行收到 System.NullReferenceException：

```
For Each d In days 
```

似乎没有为“天”分配任何值。我检查了表格，里面有有效的记录，所以我认为我的代码是错误的。抱歉，如果这含糊不清或我没有提供足够的信息，我对此很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:21:34.827

`days`您正在代码中创建一个新的局部变量

```
Dim days = (From Beko In dc.Bekos _ 
```

而不是将查询结果分配给您的类变量`days`。因此，您的方法中有几天`Nothing`，您`calBeko_DayRender`会得到异常。

你的代码应该是

```
days = (From Beko In dc.Bekos _
               Where Beko.DateStamp <= endDate And _
               Beko.DateStamp >= startDate _
               Order By Beko.DateStamp _
               Select New DateTime(Beko.DateStamp.Year, _
                                   Beko.DateStamp.Month, _
                                   Beko.DateStamp.Day) Distinct).ToArray() 
```

# sql - SQL - 一个请求中的多个请求

> ID：15945785
> 
> 赞同：-1
> 
> 时间：2013-04-11T09:55:37.807
> 
> 标签：sql

我有一个名为 eod 的表，并且有一个示例。

```
| eod_id | company_symbol |    date    | open  | close | high  |  low  |
|      1 |            AAA | 01-01-2000 | 40.00 | 42.00 | 43.00 | 39.00 | 
```

对于给定的 company_symbol，我想：

1.  计算（打开某个日期）/（关闭另一个日期）- 1
2.  计算打开>关闭的行
3.  计算 open < close 的行数
4.  每天，company_symbol 收盘价最高的次数
5.  每天，company_symbol 收盘价最低的次数

我试图获取我想要的信息，但没有成功。是否可以仅在一个请求中获取 5 个信息？

希望你能帮助我，谢谢，

史蒂夫

PS：我尝试了什么：

1.

```
SELECT (SELECT OPEN FROM eod WHERE company_symbol="AAPL" AND DATE="2013-04-05") 
/ (SELECT OPEN FROM eod WHERE company_symbol="AAPL" AND DATE="2000-01-03") - 1; 
```

2.

```
SELECT COUNT(*) FROM eod WHERE company_symbol="AAPL" AND CLOSE>OPEN; 
```

3.

```
SELECT COUNT(*) FROM eod WHERE company_symbol="AAPL" AND CLOSE<OPEN; 
```

1.  SELECT COUNT(*) FROM EOD WHERE company_symbol IN (SELECT company_symbol FROM eod WHERE IN (SELECT max(CLOSE) FROM eod GROUP BY DATE));

但是这个不起作用，你能帮我解决这个问题吗？我也认为这些请求可以简化，但我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:42:01.377

如果您只需要将“5 个信息仅包含在一个请求中”分组，请尝试针对您想要的内容提出 5 个请求，然后只需

```
SELECT  
(%your_request1%) as 'Request 1',  
(%your_request2%) as 'Request 2',  
(%your_request3%) as 'Request 3',  
(%your_request4%) as 'Request 4',  
(%your_request5%) as 'Request 5'  
FROM EOD e  
WHERE company_symbol=AAA 
```

或者你也需要这 5 个请求？

# javascript - Datatables中每个页面的服务器端数据的Ajax请求

> ID：15945798
> 
> 赞同：2
> 
> 时间：2013-04-11T09:56:16.153
> 
> 标签：javascript, jquery, datatables, server-side

我正在使用 Jquery Datatables 从服务器端加载通过 ajax 调用获得的数据数组（aaData）。我不想一次提取全部数据，而是每次用户在 Datatables 分页中单击“上一个”或“下一个”时都需要发出 ajax 请求来加载数据。

这是如何实现的？我只想为该页面进行 ajax 调用并即时获取结果。

下面是我正在拨打电话的 javascript 代码。

```
$.ajax({              
 type: "GET",
 url: "ajaxBacklog",
 contentType: 'application/json',
 data: null,
 dataType: 'json',
 success: function(json){                  
     oTable = $("#backlogTable").dataTable({
         "aaData": json.aaData,
         "bProcessing": true,
         "bServerSide": true,
         "sPaginationType": "full_numbers",
         "bJQueryUI": true,
         "bRetrieve": true,
         "bPaginate": true,
         "bStateSave": true,
         "bSort": true,
         "aaSorting": [[ 4, "desc" ]],
         "iDisplayLength": 25,
         "oLanguage": {
                 "sProcessing": "<img src='resources/images/loader.gif'/>",
                 "sEmptyTable": "No records found."
             },
         "aoColumns": [
             { "sClass": "alignCenter"},
             { "sClass": "left"},
             { "sClass": "left"},
             { "sClass": "left"},
             { "sType": 'date-uk', "sClass":"datecolumn"},
             { "sType": 'date-uk', "sClass":"datecolumn"},
             { "sClass": "left"},
             { "sClass": "left"}
         ],
         "error": function() {
             alert("Failed to load Data");
         }
     });
    }
   }
); 
```

我也遵循了数据表的[服务器端处理](http://www.datatables.net/release-datatables/examples/server_side/server_side.html)，但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:18:47.677

在数据表服务器端处理中，每次单击“上一个”/“下一个”按钮（也包括过滤、排序等）调用请求（开箱即用）到[sAjaxSource](http://datatables.net/ref#sAjaxSource)属性中指定的功能 - 您可以在浏览器控制台中检查此调用。

调用有很多有用的参数。您需要在您的函数中使用`iDisplayLength`and`iDisplayStart`将您的数据集从 剪切（排序和过滤后）`iDisplayStart`到`iDisplayStart+iDisplayLength`。

您当然应该更改代码结构，如您在数据表[文档](http://www.datatables.net/release-datatables/examples/server_side/server_side.html)中看到的那样- 定义数据表初始化代码并在`sAjaxSource`属性中指示 ajax 源。

# windows-phone-7 - 如何在 Windows Phone 中显示不同大小的网格项

> ID：15945801
> 
> 赞同：0
> 
> 时间：2013-04-11T09:56:23.397
> 
> 标签：windows-phone-7

我想在 Windows Phone 应用程序中以不同大小的网格显示图像。就像 Windows Phone 应用程序中的以下图像格式

谢谢

![在此处输入图像描述](https://i.stack.imgur.com/T0INB.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:08:51.937

使用网格

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <Rectangle Grid.Row="0"
               Grid.Column="0"
               Grid.ColumnSpan="2" />
    <Rectangle Grid.Row="1" Grid.Column="0" />
    <Rectangle Grid.Row="1" Grid.Column="1" />
</Grid> 
```

添加矩形以模拟您放置的屏幕截图 - 您将使用所需的控件。我明确地将 Grid.Row 和 Grid.Column 设置为 0 以强调正在发生的事情。

# java - 检索模型中列表元素的嵌套模型

> ID：15945803
> 
> 赞同：0
> 
> 时间：2013-04-11T09:56:24.653
> 
> 标签：java, wicket-1.5

我遇到了检票口模型和列表的问题。假设我有一个这样的 bean：

```
public class A{
    private B title;
    private ArrayList<C> childs;
    ...get/set...;
} 
```

我从中创建了一个模型`new Model<A>(a)`，我想检索它的属性的嵌套模型。因为`B`，很简单：`new PropertyModel(a,"title")`。

但是如何为每个子 C 检索嵌套模型？（类型的模型`IModel<C>`）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:53:20.393

您需要一个包装器，它将大部分工作委托给您的实际 bean，但将返回值包装在 IModel 中。

这可能看起来类似于：

```
public class ModelWrapper implements IModel<A> {

    private A data;

    public ModelWrapper(A data) {
        this.data = data;
    }

    public IModel<B> getTitle() {
        return new Model(data.getTitle());
    }

    public List<IModel<C>> getChilds() {
        return new List<IModel<C>>() {

            @Override
            public int size() {
                return data.getChilds().size();
            }

            @Override
            public IModel<C> get(int index) {
                return new IModel<C>(data.getChilds().get(index));
            }

            ...

        };
    }
} 
```

# java - 如何使休眠以删除一张桌子并离开另一张桌子？

> ID：15945805
> 
> 赞同：3
> 
> 时间：2013-04-11T09:56:36.923
> 
> 标签：java, mysql, xml, hibernate, configuration

我的 hibernate.cfg.xml 中有这段代码

```
 <property name="hbm2ddl.auto">create</property> 
```

这意味着每次我运行应用程序时，hibernate 都会删除所有表并创建新表。

我如何指定它应该只删除一些特定的表，比如“汽车”？hibernate 有这种配置选项吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:02:13.053

不要使用`hbm2ddl.auto`- 这在生产中是一件非常糟糕的事情，只能用于早期测试目的。

您问了什么：不，hibernate 无法使用标准功能做到这一点。

我可以建议您查看[`Liquibase`](http://www.liquibase.org/)进行任何数据库更新的框架。

# jquery - Jquery动画定位不正确一个元素，我希望它在一边，而动画显示它在底部

> ID：15945814
> 
> 赞同：0
> 
> 时间：2013-04-11T09:56:58.633
> 
> 标签：jquery, html

我想在其他元素的一侧添加一个元素，所以，我使用了一个 span 元素来做到这一点。问题是我想用 jquery 对其进行动画处理，并且在动画期间，元素位于底部而不是侧面（当动画完成时，它被正确放置在侧面）。

这是代码

```
<div>Name<input id="name"/></div>
<div>Username <input id="user"/></div>
<button id="registerButton">Send -></button>

<script>
$('#registerButton').click(function() {       
    if($('#name').val().length<3) {                             
        $('#name').after($('<span id="warning">At least 3 chars</span>'));      
        $('#warning').hide();
        $('#warning').show(400);
    }                              
});
</script> 
```

警告应该出现在“名称”元素附近，但在动画期间它出现在底部:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:14:46.543

我可以证明 Ziinloander 的回答。在 webkit 中，它已经满足了您的需求，这取决于您的 css 标记中有多少空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:21:17.303

```
$('#registerButton').click(function() {       
    if($('#name').val().length<3) {                             
        if($('#warning').length == 0) {
            $('#name').after($('<span id="warning" style="display:none">At least 3 chars</span>'));
        }
        $('#warning').show(400);
    } else {
        $('#warning').hide();
    }                             
}); 
```

# mysql - 使用 VB .NET 将数据插入 MySQL

> ID：15945816
> 
> 赞同：0
> 
> 时间：2013-04-11T09:57:03.823
> 
> 标签：mysql, database, vb.net, insert

请帮忙，我的 vb.net 代码在 MySQL 数据库中插入值有什么问题

```
 Dim conn As New MySqlConnection(ConfigurationManager.ConnectionStrings("ibdm").ConnectionString)
    Dim cmd1 As New MySqlCommand("INSERT INTO configs(configType, portsStatus, bandwidthLimit, ports, user) values(@config, @manage, @limit, @ports, @user)", conn)
    Try
        conn.Open()
        cmd1.ExecuteNonQuery()
        iReturn = True
    Catch ex As MySqlException
        MsgBox(ex.Message.ToString)
        iReturn = False
    Finally
        conn.Close()
    End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:59:13.980

我认为您必须在报价中指定值，例如 Dim cmd1 As New MySqlCommand("INSERT INTO configs(configType, portsStatus, bandwidthLimit, ports, user) values('@config', '@manage', '@limit', '@端口', '@user')", conn)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:04:46.030

用户 my 是保留字，尝试将其放在方括号中：

```
Dim cmd1 As New MySqlCommand("INSERT INTO configs(configType, portsStatus, bandwidthLimit, ports, [user]) values(@config, @manage, @limit, @ports, @user)", conn) 
```

# winforms - 以编程方式在 Windows 窗体应用程序中设置报表查看器本地报表路径

> ID：15945817
> 
> 赞同：2
> 
> 时间：2013-04-11T09:57:05.650
> 
> 标签：winforms, clickonce, reportviewer, rdlc, reportingservices-2005

我有一个 Windows 窗体应用程序，它使用 reportViewer 控件来显示一些报告。

```
string exeFolder = Path.GetDirectoryName(Application.StartupPath);
string reportPath = Path.Combine(exeFolder, @"Reports\report.rdlc"); 
```

如果我创建一个在任何客户端计算机上安装应用程序的安装文件，但当我使用 ClickOnce 部署在公司 Intranet 上部署应用程序时失败，则上面的代码有效。

我将 .rdlc Build Action 设置为 Content 并将 Copy To OutPut Directory 设置为 Copy Always。

**下面是代码**

```
reportViewer1.LocalReport.DataSources.Clear();
ReportDataSource datasource = new ReportDataSource("myReportDataSourceHere", authorisedLeave);
reportViewer1.LocalReport.DataSources.Add(datasource);

string exeFolder = Path.GetDirectoryName(Application.ExecutablePath);
string reportPath = Path.Combine(exeFolder, @"rdlcReports\myReportName.rdlc");

reportViewer1.LocalReport.ReportPath = reportPath;
reportViewer1.RefreshReport(); 
```

然后，当我尝试从浏览器中的 ClickOnce 安装链接安装应用程序时，我收到以下错误消息。

> 错误摘要 下面是错误摘要，这些错误的详细信息在日志后面列出。* 激活 C:\Users\myWindowsUserName\Desktop\ProjectName.appref-ms| 导致异常。

检测到以下故障消息：

下载`http://Server1`/My Project Name/Application Files/MyProjectName_1_0_0_25/rdlcReports/myReportName.rdlc 未成功。

远程服务器返回错误：(404) Not Found。

# php - 多步表单的最后一步缺少后退按钮

> ID：15945819
> 
> 赞同：2
> 
> 时间：2013-04-11T09:57:10.700
> 
> 标签：php, jquery, html

我有一个后退按钮，它位于多步表单的最后一步，现在它消失了，我不知道为什么，有人可以帮忙吗？

第一个`form-row`是多个步骤的位置，因此可以有1个步骤或20个步骤等等。

第二个`form-row`是对多个步骤中输入内容的总结。这也应该有一个后退按钮，但我不知道为什么它没有出现。

```
 <div class="form-row">
                <h2 style="float:left;margin-left:7px;"><?php the_title(); ?></h2>
                <h2 style="float:right;"><?php echo $counter; ?> of <?php echo the_field('select_number_of_questions'); ?></h2>
                <div class="clear"></div>
                <div id="module-area" style="margin-top:0px!IMPORTANT;">
                    <div id="modules-top"></div>
                    <div id="modules-repeat">                           
                        <?php if(get_sub_field('test_image')): ?>
                        <?php while(has_sub_field('test_image')): ?> 
                            <img class="training" src="<?php echo the_sub_field('image'); ?>" />
                            <br /><br />
                        <?php endwhile; ?> 
                        <?php endif; ?>         
                            <p class="training"><?php echo $repeater_row['question']; ?></p><br />
                            <p class="training-highlight">Please choose <span class="bold"><?php echo $repeater_row['required_answers']; ?></span> of the following answers:</p><br />

                            <div class="question" data-max-answers="<?php echo $repeater_row['required_answers']; ?>">
                            <?php $rows = $repeater_row['answer_options'];
                                foreach ($rows as $row){ ?>
                                <?php $Question[$counter] = $_POST['answer'.$counter]; ?>
                                    <div style="display:table-row;">
                                        <div style="display:table-cell;">
                                            <input style="width: 20px;" type="checkbox" name="answer<?php echo $counter; ?>[]" value="<?php echo the_sub_field('answer'); ?>" />
                                        </div>
                                        <div style="display:table-cell;">
                                            <p>
                                                <?php echo $row['answer']; ?>
                                            </p>
                                        </div>              
                                    </div>
                                <?php } ?>
                            </div>  
                            <div class="inner"></div>
                            <button class="next"></button>
                        <div class="clear"></div>
                    </div>
                    <div style="margin-bottom:5px;" id="modules-bottom"></div>
                </div>
            </div>
            <?php $counter++; } ?>

            <div class="form-row" id="form-row-last" style="display:none;">
                <h2 style="float:left;margin-left:7px;"><?php the_title(); ?></h2>
                <div class="clear"></div>
                <div id="module-area" style="margin-top:0px!IMPORTANT;">
                    <div id="modules-top"></div>
                    <div id="modules-repeat">                           

                        <div class="inner" id="inner-summary"></div>
                        <button class="next"></button>

                        <div class="clear"></div>
                    </div>
                    <div style="margin-bottom:5px;" id="modules-bottom"></div>
                </div>
            </div> 
```

这是我的jQuery：

```
<script type="text/javascript">
jQuery(function($) {
$("input[type=checkbox]").on("change", function(){
    var html = "";
    // Get checked checkboxes
    $(".form-row").each(function(){
        var question = $(this).find(".training").text(),
            checkedlist = [];
        $(this).find("input:checked").each(function(){
            checkedlist.push($(this).val());
        });
        // Add question and answers to the summary, only if minimum of 1 checkbox checked
        if( checkedlist.length )
        {
            html += "<p class='training'>" + question + "</p>" + checkedlist.join(", ") + "<br />";
        }
    });

    $("#inner-summary").html(html);
});
});

jQuery(function($) {
$(document).ready(function() {    

    // prepend a 'previous' button to all form-rows except the first
    $('<button>').addClass('previous').appendTo($('.inner').not(':first'));

    // hide all form-rows, but not the first one
    $('.form-row').not(':first').hide();

    // hide on last step
    $('button.next').last().hide();

    // add the submit button to the last form-row
    $('<input>').addClass('check').prop('type', 'submit').appendTo($('.form-row:last'));

    // handle the previous button, we need to use 'on' here as the
    // previous buttons don't exist in the dom at page load
    $('.form-row').on('click', 'button.previous', function(e) {
        e.preventDefault();
        $(this).parents('div.form-row').hide().prev('div.form-row').show();
    });

    $('button.next').click(function(e) {
        // prevent the next buttons from submitting the form
        e.preventDefault();
        // hide this form-row, and show the next one
        $(this).parents('div.form-row').hide().next('div.form-row').show();
    });    

});
});

jQuery(function($) {
$(document).ready(function () {
    $("input[type=checkbox]").click(function (e) {
        if ($(e.currentTarget).closest("div.question").length > 0) {
            toggleInputs($(e.currentTarget).closest("div.question")[0]);        
        }
    });
});

function toggleInputs(questionElement) {
    if ($(questionElement).data('max-answers') == undefined) {
        return true;
    } else {
        maxAnswers = parseInt($(questionElement).data('max-answers'), 10); 
        if ($(questionElement).find(":checked").length >= maxAnswers) {
            $(questionElement).find(":not(:checked)").attr("disabled", true);
        } else {
            $(questionElement).find("input[type=checkbox]").attr("disabled", false);
        }
    }
}
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:00:57.987

Solved by adding:

```
$('<button>').addClass('previous').appendTo($('#inner-summary')); 
```

To this block:

```
jQuery(function($) {
$("input[type=checkbox]").on("change", function(){
    var html = "";
    // Get checked checkboxes
    $(".form-row").each(function(){
        var question = $(this).find(".training").text(),
            checkedlist = [];
        $(this).find("input.correct:checked").each(function(){
            checkedlist.push($(this).val());
        });
        // Add question and answers to the summary, only if minimum of 1 checkbox checked
        if( checkedlist.length )
        {
            html += "<p class='training'>" + question + "</p><p>" + checkedlist.join(", ") + "</p><br />";
        }
    });

    $("#inner-summary").html(html);
    $('<button>').addClass('previous').appendTo($('#inner-summary'));
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:09:46.617

改变：`$('<button>').addClass('previous').appendTo($('.inner').not(':first'));`

至：

```
$('button').addClass('previous').appendTo($('.inner').not(':first')); 
```

# html - VBS：通过 div 和 tabIndex 来自外部 .vbs 的目标字段

> ID：15945820
> 
> 赞同：0
> 
> 时间：2013-04-11T09:57:13.747
> 
> 标签：html, vbscript, external, tabindex

我正在努力在网页上设置一些非常尴尬的字段（我无法控制的字段）的值，请重视研究人员的输入。我制作了一个网页模型，展示了这个问题。开始：

```
<html>
<body>

<div id="mydiv1" style="position: none; display: block; z-index: 1; width: 800px;">
<p>First div (mydiv1) starts here.</p>
<br />
<div id="mydiv2" style="position: none; display: block; z-index: 6; width: 800px;">
<p>Second div (mydiv2) starts here. The following field in blue is arranged thusly: <i>div>div>table>form>table</i>; and its tabIndex is 1.</p>

<table border="0" cellspacing="1" cellpadding="0" width="410">
<tbody>
<tr>
<td colspan="3" style="width: 410px; background-color: #5698eb;">

<form id="entryform" name="entryform">

<table border="0" cellspacing="1" cellpadding="0">
<tbody>
<tr>
<td width="100" valign="center" class=text1">
<br /><b>Project: </b>
</td>
<td width="5"></td>
<td valign="centre">
<input class="formclass_input1" type="text" tabIndex="1" name="entryform_field">
</td>
</tr>
</tbody>
</table>
</form>
</td>
</tr>
</tbody>
</table>

<br />
<div id="mydiv3" style="position: none; display: block; z-index: 16; width: 850px;">
<p>Third div (mydiv3) starts here. The following fields are arranged thusly: <i>div>div>div>form>table</i> and the tabIndexes go 1,2,3,4.<br />The field names change randomly from record to record, but their tabIndexes are always the same.</p>

<form id="myform" name="myform">

<table border="0" cellspacing="1" cellpadding="0">
<tbody>
<tr>
<td width="100" valign="center" class=text1">
<b>Name: </b>
</td>
<td width="5"></td>
<td valign="centre">
<input class="formclass_input1" type="text" tabIndex="1" name="changeable_field_name1">
</td>
</tr>
</tbody>
</table>

<table border="0" cellspacing="1" cellpadding="0">
<tbody>
<tr>
<td width="100" valign="center" class=text1">
<b>Date: </b>
</td>
<td width="5"></td>
<td valign="centre">
<input class="formclass_input1" type="text" tabIndex="2" name="changeable_field_name2">
</td>
</tr>
</tbody>
</table>

<table border="0" cellspacing="1" cellpadding="0">
<tbody>
<tr>
<td width="100" valign="center" class=text1">
<b>Company: </b>
</td>
<td width="5"></td>
<td valign="centre">
<input class="formclass_input1" type="text" tabIndex="3" name="changeable_field_name3">
</td>
</tr>
</tbody>
</table>

<table border="0" cellspacing="1" cellpadding="0">
<tbody>
<tr>
<td width="100" valign="center" class=text1">
<b>Address: </b>
</td>
<td width="5"></td>
<td valign="centre">
<input class="formclass_input1" type="text" tabIndex="4" name="changeable_field_name4">
</td>
</tr>
</tbody>
</table>
</form>
</div></div></div>

</body>
</html> 
```

这里的关键是字段名称随机更改。我以前在堆栈上提出了我的问题，但我把问题简单化了！一个叫 Panayot 的人帮我完美地解决了这个问题，但是当我将修改后的脚本介绍到现场时，它失败了。因此，使这个更准确的模型。它比我第一次介绍的要复杂。使用 Panayot 的代码，我的脚本目前如下所示：

```
surl ="http://[website.com]"
set ie = nothing
set shapp=createobject("shell.application")
on error resume next
For Each owin In shapp.Windows
     if left(owin.document.location.href,len(surl))=surl then
        if err.number = 0 then
        set ie = owin
          end if
       end if
err.clear
Next
on error goto 0
if ie is nothing then
    wscript.echo "Window Not Open"
else

Set myDiv = IE.Document.All.mydiv3

If Not myDiv Is Nothing Then
    Set nodes = myDiv.childNodes
    For i = 0 To nodes.Length-1 Step 2
        If nodes(i).tabIndex = "1" Then
            nodes(i).Value = "ta-da!"
            'nodes(i).Value = nodes(i).tabIndex
            Exit For
        End If
    Next
End If

End If 
```

我已经用它做了很多实验，但我只是以我有限的理解无法弄清楚。基本上最后的 IF 语句没有让我进入 tabIndex "1"。如果这是可以解决的，我会是一个非常快乐的人。任何输入表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:13:49.787

很高兴看到我的代码很有帮助。需要注意的是，`.childNodes`属性返回元素的直接子元素。您要查找的元素嵌套更深。我将使用空格格式复制您的示例代码，以更清楚地查看您的实际层次结构。

```
<div id="mydiv1">
  <div id="mydiv2">
    <table>
      <tbody>
        <tr>
          <td>
            <form id="entryform" name="entryform">
              <table>
                <tbody>
                  <tr>
                    <td></td>
                    <td></td>
                    <td valign="centre">
                      <input tabIndex="1" name="entryform_field">
                    </td>
                  </tr>
                </tbody>
              </table>
            </form>
          </td>
        </tr>
      </tbody>
    </table>
  </div> <!-- end of mydiv2 -->
</div>  <!-- end of mydiv1 --> 
```

我没有看到`DIV`带有`ID`“mydiv3”的a，也许是错字？无论如何，您可以结合`.childNodes`和`.firstChild`属性来浏览层次结构树，但这将是痛苦的编码。您可以使用功能简化该过程`getElementsByTagName`。

```
Set elm1 = IE.Document.All.mydiv1
MsgBox "Tables " & elm1.getElementsByTagName("table").Length '2
MsgBox "Forms  " & elm1.getElementsByTagName("form" ).Length '1
MsgBox "Inputs " & elm1.getElementsByTagName("input").Length '1 
```

这样，您可以从更接近实际元素的级别开始搜索。

```
Set myInput = Nothing
For Each elm In IE.Document.All.mydiv1.getElementsByTagName("input")
    If elm.tabIndex = "1" Then
        Set myInput = elm
        Exit For
    End If
Next

If Not myInput Is Nothing Then
    myInput.Value = "ta-da!"
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:27:37.280

用“on error resume next”注释掉该行并查看存在哪些错误（如果有）。

# ocaml - 在 Ocaml 中转置 int 列表列表

> ID：15945822
> 
> 赞同：2
> 
> 时间：2013-04-11T09:57:18.903
> 
> 标签：ocaml

我希望这对你们中的一些人来说很容易。我在这个论坛中找到了这个解决方案：

```
let rec transpose list = match list with
| []             -> []
| []   :: xss    -> transpose xss
| (x::xs) :: xss ->
    (x :: List.map List.hd xss) :: transpose (xs :: List.map List.tl xss) 
```

这是列表列表的转置，效果很好。

现在我需要相同的，但不是将一个'列表列表转置为一个'列表列表，而是将 int 列表列表转置为 int 列表列表。

谢谢你们！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T10:58:27.463

这就是多态性的意义所在。类型`'a`可以是任何类型，因此您找到的解决方案同样适用于`int list list`.

如果你真的想要一个类型为 的函数`int list list -> int list list`，你总是可以使用类型注释来强制它：

```
let int_transpose : int list list -> int list list = transpose 
```

但我不明白你为什么会这样做。

# ruby-on-rails - 仅在 Ruby on Rails 中从 YAML 文件构建博客或常见问题解答部分？

> ID：15945826
> 
> 赞同：-1
> 
> 时间：2013-04-11T09:57:35.013
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, yaml

我刚刚完成了一个新的 Rails 应用程序的构建，现在我想构建一个简单（但多语言）的博客风格 FAQ 部分，其中包含包含 a `question`、 an`answer`和 a `category`each 的条目。

有没有办法用 YAML 文件构建这种东西，还是我需要从头开始构建整个控制器和模型才能获得这种功能？

FAQ 部分将仅由*我*维护，因此可以选择使用 YAML 文件。

我的想法是这样的：

```
# faq.yml

faq:
  payment:
    entry1:
      question: "How can I pay?"
      answer: "You can pay by credit card or PayPal."
    entry2:
      question: "Who coded this app?"
      answer: "The best coder ever!" 
```

这可以在 Rails 中完成吗？有人可以指向我的链接或教程吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:04:40.663

你可以去任何一种方式。您将需要控制器/视图功能，但不需要模型。如果你想使用上面的 YAML 代码，你可以像这样阅读它：

```
# In your FaqController:
@faq = YAML.load_file("#{RAILS_ROOT}/config/faq.yaml")

# In index.html.erb
<%- @faq['faq'].each do |subject, entries| %>
  <h1><%= subject %></h1>
  <%- entries.each do |entry| %>
    <h2><%= entry['question'] %></h2>
    <p><%= entry['answer'] %></p>
  <%- end %>
<%- end %> 
```

当然，这可能比使用数据库驱动模型更容易出错且更难维护，并且您可能希望在应用程序的整个生命周期内缓存 YAML 文件以减少 I/O 操作。

# android - ImageView 宽度与父级不匹配

> ID：15945828
> 
> 赞同：0
> 
> 时间：2013-04-11T09:57:44.463
> 
> 标签：android, android-layout, imageview

**我有什么：** `ScrollView`，里面 `LinearLayout`

( `orientation="vertical", layout_width="match_parent", layout_height="wrap_content"`),

在里面

`ImageView`

( `layout_width="match_parent", layout_height="wrap_content"`) 和

`TextView`.

**我想要的：** `ImageView`应该保持纵横比和数学父宽度，以及下面的文本`ImageView`。

我使用了`ImageView params`:*`adjustViewBounds true/false`和 all`scaleType`*的不同组合，但我无法得到我想要的：

1.  如果我使用 scaleType centerCrop - 图像裁剪的顶部和底部。
2.  如果我使用 scaleType center - 左右空白
3.  如果我使用 scaleType fitXY - 图像不保持纵横比

所以我不能让图像更高，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:06:56.383

尝试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ll_main"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    >
<LinearLayout
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:orientation="vertical"
       >
<ImageView
        android:layout_width="fill_parent"
        android:layout_height="100dp"
        android:id="@+id/iv"
        android:background="#f0f"
        />  
<TextView
           android:layout_width="fill_parent"
           android:layout_height="wrap_content"
           android:text="Always work!!"
           android:gravity="center"
           android:textSize="26sp"
           />
</LinearLayout>
</ScrollView> 
```

注意：如果`scaleType`没有帮助，请尝试`android:background=""`改用 `android:src=""`

![在此处输入图像描述](https://i.stack.imgur.com/Wytrn.png)

# c - 如何在 C 中以用户身份“登录”？

> ID：15945830
> 
> 赞同：0
> 
> 时间：2013-04-11T09:57:49.407
> 
> 标签：c, unix, authentication, ftp, system

我目前正在制作一个 FTP 服务器，我想实现**真正的身份验证**。我的意思是我的系统上有用户，我希望他们能够使用保存在系统中的用户名密码使用客户端（例如 Filezilla）登录我的 FTP 服务器。

但我不知道实现这一点并*赋予良好权利*的步骤（不可能删除用户不是所有者的文件，等等......）。

我知道我必须在文件中找到登录/主目录，`/etc/passwd`并且我知道我可以在文件中找到散列密码`/etc/shadow`，但是**这些密码是如何加密的？**

登录后，我是否必须检查用户是否有权自己删除/访问/写入文件，或者有没有办法**让系统知道**？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T11:23:08.767

您不应该期望密码存储在特定文件中，也不应该假设它会以特定方式加密（实际上是散列）。

密码可能由像 NIS 这样的集中式数据库提供，甚至可能以您正在运行的 Unix 系统无法处理的方式存储，例如将身份验证委托给 LDAP 或活动目录时。

正确的方法是使用 pam 框架，该框架旨在提供一个隐藏底层复杂/灵活设置的单一界面。

查看 Unix 实现的 getpwuid、pam_start 和 pam_authenticate 手册页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:11:31.177

这取决于您使用的操作系统。对于 FreeBSD，它是具有更改底层哈希的 Crypt 算法（默认为 SHA-512），请参阅[http://www.freebsd.org/doc/en/books/handbook/crypt.html](http://www.freebsd.org/doc/en/books/handbook/crypt.html)。其他操作系统可以使用 Bcrypt 或其他。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:26:47.883

这看起来很相关：

> **姓名**
> 
> pam_unix - 传统密码认证模块
> 
> **概要**
> 
> pam_unix.so [...]
> 
> **描述**
> 
> 这是标准的 Unix 身份验证模块。它使用来自系统库的标准调用来检索和设置帐户信息以及身份验证。通常这是从 /etc/passwd 和 /etc/shadow 文件中获得的，如果启用了 shadow 也是如此。

对主机的 unix 帐户进行身份验证的操作听起来像是很多程序可能想要做的事情，因此使用库来完成任务而不是自己滚动是有意义的。

# r - 为什么 R 将数字 1000 变成 999 整数？

> ID：15945831
> 
> 赞同：2
> 
> 时间：2013-04-11T09:57:51.030
> 
> 标签：r

我在 R 中进行了一些模拟，我注意到我错过了一个模拟，在查看我的代码后，我发现了这种奇怪的 R 行为：

```
N <- 10000
prop <- 0.9
M <- N * (1 - prop)
print(M)
[1] 1000
print(as.integer(M))
[1] 999 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:59:56.447

问题是`0.9`不能完全表示为二进制浮点值：

```
> sprintf('%.20f', 0.9)
[1] "0.90000000000000002220" 
```

以下所有计算都给出了不准确的结果：

```
> sprintf('%.20f', 10000 * (1 - 0.9))
[1] "999.99999999999977262632" 
```

# php - CSV 所有分隔符

> ID：15945832
> 
> 赞同：-6
> 
> 时间：2013-04-11T09:57:57.200
> 
> 标签：php, excel, csv

我想知道 .CSV 文件存在分隔符吗？因为我看到了exist 逗号，但是exist 和分号，我需要一个php 脚本的所有分隔符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:09:47.300

[没有真正的“CSV 标准”](http://en.wikipedia.org/wiki/Comma-separated_values#Lack_of_a_standard)，所以理论上任何字符都可以用作分隔符。

最常见的是`,`（尤其是在美国）、`;`（尤其是在欧洲，因为我们需要逗号作为小数分隔符）、`\t`（制表符、ASCII `0x09`）和`|`. 通常，分隔符周围的空格不是分隔符的一部分，但即使是可以更改的。

这就是为什么好的实现会提供一个[CSV 嗅探器](http://docs.python.org/2/library/csv.html#csv.Sniffer)来尝试猜测任何给定 CSV 文件的格式。

# android - 安卓用户界面错误

> ID：15945833
> 
> 赞同：0
> 
> 时间：2013-04-11T09:57:58.093
> 
> 标签：android

我正在关注本教程，最后我有以下代码，但是当我运行应用程序时，我没有得到按钮或文本字段，只是你好世界。

[http://developer.android.com/training/basics/firstapp/building-ui.html](http://developer.android.com/training/basics/firstapp/building-ui.html)

问题是什么

布局xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:tools="http://schemas.android.com/tools"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:paddingBottom="@dimen/activity_vertical_margin"
      android:paddingLeft="@dimen/activity_horizontal_margin"
      android:paddingRight="@dimen/activity_horizontal_margin"
      android:paddingTop="@dimen/activity_vertical_margin"
      android:orientation="horizontal" 

     tools:context=".MainActivity" >
    <EditText android:id="@+id/edit_message"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:hint="@string/edit_message" />
    <Button
     android:aalyout_width="wrap_content"
     android:layout_height="wrap_content"
     android:text="text"="@string/buton_send"/> 
```

字符串值

```
 <?xml version="1.0" encoding="utf-8"?>
        <resources>

         <string name="app_name">My First App</string>
        <string name="action_settings">Settings</string>
        <string name="edit_message">Enter a message</string>
        <string name="button_send">Send</string> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:13:41.413

更改`android:text="text"="@string/buton_send"/>`为`android:text="@string/buton_send"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:19:18.723

我们的布局应该如下

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:paddingBottom="@dimen/activity_vertical_margin"
  android:paddingLeft="@dimen/activity_horizontal_margin"
  android:paddingRight="@dimen/activity_horizontal_margin"
  android:paddingTop="@dimen/activity_vertical_margin"
  android:orientation="horizontal" 
  tools:context=".MainActivity" >

<EditText android:id="@+id/edit_message"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:hint="@string/edit_message" />

<Button android:id="@+id/button1"   //here you missed the id....in your code
 android:aalyout_width="wrap_content"
 android:layout_height="wrap_content"
 android:text="@string/buton_send"/>   //your code has incorrect syntax here 
```

# regex - 在 Notepad++ 中使用正则表达式进行批量替换

> ID：15945836
> 
> 赞同：0
> 
> 时间：2013-04-11T09:58:00.380
> 
> 标签：regex, notepad++

在这种情况下，我想替换大文件中的引号：

代替：

> M 100644 367cb229 "DFA/OETK/oetk_settings/Sony DADC Demo_with_pass.p12"

经过：

> M 100644 367cb229 DFA/OETK/oetk_settings/Sony DADC Demo_with_pass.p12

但是我不想替换文档的所有引号，仅替换此特定情况。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:43:04.053

试试这个作为模式

```
^(?=M \d{6}\b)(.*?)"(.*?)" 
```

这作为替代品

```
$1$2 
```

`^`与行的开头匹配

`(?=M \d{6}\b)`是一个积极的前瞻断言，它确保该行以`M \d{6}`

`\d{6}`是六位数

`\b`是一个单词边界，它确保在最后一个数字之后有一个非单词字符，否则如果超过 6 个数字也是如此。

`(.*?)`在以下模式之前尽可能少地匹配。存储匹配的内容，并且可以通过使用`$1`第一组、`$2`第二组、...来检索该字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:31:57.357

使用这个 Find 表达式：

```
(M \d{6} [^"]*)"([^"]*)" 
```

而这个替换表达式

```
$1$2 
```

我这是第一部分`(M \d{6} [^"]*)`选择`M 100644 367cb229`-*字符 M 后跟 6 个数字，然后是直到 a 的任何内容* `"`。

第二部分`([^"]*)`选择`DFA/OETK/oetk_settings/Sony DADC Demo_with_pass.p12`-*引号内的文本*。

括号内的任何文本都由`$1`,`$2`等捕获，可用于替换。

看看这是否适用于所有情况

# php - 试图克隆一个 stdClass

> ID：15945837
> 
> 赞同：7
> 
> 时间：2013-04-11T09:58:02.423
> 
> 标签：php, clone, stdclass

我正在尝试克隆一个具有 DateTime 属性的 stdClass 对象。但它失败了。看起来克隆不起作用。我应该编写自己的 __clone() 方法吗？这里有什么问题？

编码：

```
$object = new stdClass;
$object->date = new DateTime();
var_dump($object->date);

$cloned = clone($object);
$object->date->modify('+1 day');
var_dump($cloned->date); 
```

输出：

```
object DateTime (
    ->date = string (19) '2013-04-11 11:54:00'
    ->timezone_type = int 3
    ->timezone = string (13) 'Europe/Berlin'

object DateTime (
    ->date = string (19) '2013-04-12 11:54:00'
    ->timezone_type = int 3
    ->timezone = string (13) 'Europe/Berlin' 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-05-07T22:05:06.660

如何通过强制转换链接“克隆”一个 php **POSCO**（普通旧 StdClass 对象）：

```
$cloneObj = (object) (array) $myPOSCO;
var_dump($cloneObj == $myPOSCO); // true
var_dump($cloneObj === $myPOSCO); // false 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T10:03:31.353

克隆对象时，所有对象属性都简单地*复制*到对象的新实例中。实际上是这样的：

```
$cloned = new stdClass;
$cloned->date = $object->date; 
```

您可能知道，将一个对象分配给另一个变量并不会复制该对象。仍然只有一个对象，现在有两个对它的引用。

要*深度克隆*一个对象，您需要使用该[`__clone`方法](http://www.php.net/__clone)实现一个自定义类并手动`clone`它的任何子对象。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-02-27T19:16:22.510

还有另一个更简单的选择：

```
$object = new stdClass;
$object->date = new DateTime();
var_dump($object->date);

$cloned = clone $object;
$object->date->modify('+1 day');

var_dump($cloned->date);
var_dump($object->date); 
```

输出必须是：

```
 object DateTime (
        ->date = string (19) '2013-04-11 11:54:00'
        ->timezone_type = int 3
        ->timezone = string (13) 'Europe/Berlin'

    object DateTime (
        ->date = string (19) '2013-04-11 11:54:00'
        ->timezone_type = int 3
        ->timezone = string (13) 'Europe/Berlin'

    object DateTime (
        ->date = string (19) '2013-04-12 11:54:00'
        ->timezone_type = int 3
        ->timezone = string (13) 'Europe/Berlin' 
```

# grails - 查询以逐日或逐月获取数据等？在圣杯中

> ID：15945840
> 
> 赞同：0
> 
> 时间：2013-04-11T09:58:09.453
> 
> 标签：grails, grails-orm

我想在我的 grails 应用程序中绘制一些图表，但在此之前我必须从数据库获取数据以提供图表，但我仍然无法弄清楚如何使用正确的方法获取我需要的数据。

我有一个开始日期和一个结束日期来限制时间段，我想按天或周、月、年等获取数据。

我想制作一个从开始日期到结束日期的循环，步长等于一天/周/月/年等。

你认为这是正确的方法吗？如果是，如何用 groovy 编写，如果不是，请告诉如何以正确的方式执行此操作

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:33:55.863

在这种情况下，我喜欢对查询本身的结果进行分组和求和，就像在普通 sql 中使用 sum() 和 group by 子句一样。Grails 基于 Hibernate，而 Hibernate 作为[select new map()](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-select)语法非常适合这些情况。

以下是 Grails 中按月选择财务总计的示例（如财务交易）：

```
def query = """
  select new map(sum(tx.value) as total, month(tx.date) as month, year(tx.date) as year)
    from Transaction tx
   where tx.date >= :beginDate and tx.date < :endDate
   group by month(tx.date), year(tx.date)
   order by year(tx.date) desc , month(tx.date) desc
"""
def result = Transaction.executeQuery(query,[beginDate:someDate, endDate:anotherDate]) 
```

使用该代码，您可以遍历`result`变量并获取每个结果项，即 Maps。像这样：

```
result.each{ item ->
    println "Financial total for ${item.month}/${item.year} is equal to ${item.total}"
} 
```

我认为这是非常简单和直截了当的解决方案。问候...

# xna-4.0 - 请简单的 3D 碰撞指南

> ID：15945842
> 
> 赞同：0
> 
> 时间：2013-04-11T09:58:11.030
> 
> 标签：xna-4.0

您好，我正在尝试对 3D 进行碰撞检测，但只有一半有效。有人可以给我一个关于如何创建矩形碰撞检测的简单指南吗？如果可能的话，指南只检测模型碰撞指南

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T10:52:48.963

最简单的方法是使用 Bounding Boxes 和 Intersects 方法。即设置bounding box的位置到物体的中心位置测试box是否与另一个相交：

```
BoundingBox box1 = new BoundingBox(); 
BoundingBox box2 = new BoundingBox(); 

if (box1.Intersects(box2))
{
// do stuff
} 
```

请注意，边界框的上述初始化不起作用，我知道您需要添加一些参数，但我认为 id show 只是示例。

您还希望更新循环中的 if 函数不断检查冲突。但也请注意，这不是最有效的方法，因为游戏有 100 万个对象，而您的程序同时检查所有对象之间的碰撞是行不通的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T09:49:56.640

很高兴知道您是从 XNA 3D 开始的。

这是开始使用 XNA 2D 和[3D](http://www.riemers.net/eng/Tutorials/XNA/Csharp/series1.php)的精彩系列。

这是我用过的最好的资源。它将清除 3D 的所有基本要素，包括地形、多边形和碰撞。

看看这个，如果需要任何进一步的细节，请告诉我。

# django - Django内置用户表alter

> ID：15945843
> 
> 赞同：1
> 
> 时间：2013-04-11T09:58:14.763
> 
> 标签：django, django-models, django-users, django-permissions

我想更改 django 激活管理模式附带的内置用户表。我在某处听说它无法更改。有人建议不要使用用户表。所以如果我自己创建一个用户模型，我如何设置权限，给用户的权限比如谁可以向数据库添加条目，谁可以编辑或谁可以删除。？以及如何为用户设置一个用户只能编辑他的内容而不能编辑其他人的权限？

# c# - 如何在使用 DataGridTemplateColumn 构建 DataGrid 时获取当前集合元素的索引？

> ID：15945856
> 
> 赞同：1
> 
> 时间：2013-04-11T09:58:59.017
> 
> 标签：c#, wpf, data-binding, datagrid, datagridtemplatecolumn

我正在尝试在 DataGrid 中显示一个数组，如下所示：

**XAML：**

```
<DataGrid ItemsSource="{Binding Items}" AutoGenerateColumns="False" >
    <DataGrid.Columns>
        <DataGridTemplateColumn Header="Index" IsReadOnly="True">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Items, Path=}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
        <DataGridTemplateColumn Header="Name" IsReadOnly="True">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Items, Path=Name}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

Name 列按预期工作，但我想知道是否有一种方法可以在 Index 列中显示集合中当前元素的索引，因此我不必将其作为集合本身的数据项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:15:53.677

我刚刚创建了这个。

```
 <DataGrid ItemsSource="{Binding}" AutoGenerateColumns="False"  Name="DGrid">
        <DataGrid.Columns>
            <DataGridTemplateColumn Header="Index" IsReadOnly="True">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Tag="{Binding}" Loaded="TextBlock_Loaded" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTemplateColumn Header="Name" IsReadOnly="True">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Name}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

和代码隐藏：

```
public partial class MainWindow : Window
{
    List<Item> items = new List<Item>();

    public MainWindow()
    {
        InitializeComponent();

        for (int i = 0; i < 10; i++)
            items.Add(new Item() { Name = Guid.NewGuid().ToString() });
        DGrid.DataContext = items;
    }

    private void TextBlock_Loaded(object sender, RoutedEventArgs e)
    {
        var block = sender as TextBlock;
        var item = block.Tag as Item;
        block.Text = items.IndexOf(item).ToString();
    }
}

public class Item
{
    public string Name { get; set; }
} 
```

这不是一个很好的解决方案，但它有效。如果您更喜欢使用绑定而不是事件，我想您可以创建对包含其`Item`内部的集合的引用`Item`，然后创建一个返回索引的属性，如下所示：

```
public class Item
{
    public List<Item> ItemCollection { get; set; }
    public string Index
    {
        get
        {
            return ItemCollection.IndexOf(this).ToString();
        }
    }

    public string Name { get; set; }
} 
```

然后修改两行：

```
 items.Add(new Item() { Name = Guid.NewGuid().ToString(), ItemCollection = items }); 
```

和

```
 <TextBlock Text="{Binding Index}" /> 
```

老实说 - 我不确定这是否是最好的方法。;)

# git - 构建包含多个 git 存储库的 eclipse 项目

> ID：15945859
> 
> 赞同：3
> 
> 时间：2013-04-11T09:59:06.537
> 
> 标签：git, eclipse-plugin, eclipse-cdt, egit

我正在使用 Eclipse CDT 和 egit，我需要从多个存储库构建一个项目。一个包含源代码的主体，另一个包含用作构建过程的一部分的实用程序脚本（在构建其他几个项目时也使用这些脚本）。

我很难理解我是否可以使 egit 合理地使用此设置。我不知道如何将 CDT 项目与多个 git 存储库相关联，这意味着我无法对项目中的某些文件执行 VCS 操作。

我希望能够右键单击工作区中的任何文件并让 egit 确定它位于哪个存储库中，从而正确执行操作（历史记录、责备......）。有没有人设法做到这一点，或者您能否指出我找不到的文档，因为“单个 repo 中的多个项目”指南数量巨大。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T14:31:25.183

EGit 只能有 1 个与项目关联的存储库，并且项目需要位于该存储库中。例如，以下是有效的布局。

在与项目相同的级别上：

```
.git
.project
src
... 
```

包含多个项目：

```
.git
project-a
    .project
project-b
    project 
```

不可能有这样的东西并让 EGit 知道这个项目的存储库：

```
.project
foo
    .git 
```

以上也意味着项目文件（.project、.classpath 等）不在存储库中——它们应该在。

所以我建议有多个项目，每个存储库一个（或多个）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-27T13:29:10.200

2016 年 4 月，[EGit 4.3 引入了对嵌套存储库的支持](https://projects.eclipse.org/projects/technology.egit/releases/4.3)。Eclipse 4.6 Neon 于 2016 年 6 月推出，包括 EGit 4.4。

自动检测嵌套存储库；只需使用项目树节点中的 Team->Share Project 上下文菜单。

# javascript - 使用 javascript 动态添加相关下拉列表

> ID：15945862
> 
> 赞同：0
> 
> 时间：2013-04-11T09:59:12.147
> 
> 标签：javascript, drop-down-menu, dynamically-generated

我有一个 JSON 对象，其中包含类别和相应的子类别。我有两个下拉列表（作为表格的一行），第一个下拉列表包含类别列表。选择特定类别时，第二个下拉列表将填充子-所选类别的类别。我已经做到了，并且工作正常。

现在，我需要动态添加行。添加行功能也可以正常工作。

但我无法在动态添加的行中建立下拉菜单之间的关系。

我知道原因 - 我无法将 id 分配给动态创建的下拉列表，因此无法在它们之间建立任何关系。

请建议如何建立所需的关系。

```
<INPUT type="button" value="Add Row" onclick="addRow('dataTable')" />
<form id="myForm">
<TABLE id="dataTable" >
<TR><TD>
<select id="selectCategory" onchange="GetSelectedItem()">
<option>Choose a category</option>
</select>
</TD>
<TD>
<select id="selectSubCategory" >
<option>Choose a sub-category</option>
</select>
</TD></TR>
</TABLE>
</form> 
```

脚本：

```
 <script><!--
var jsonObj={"category1":["subcat 1"],"category2":["subcat 2.1","subcat 2.2"],"category3":["subcat 3.1","subcat 3.2","subcat 3.3"]};
var keys= Object.keys(jsonObj);
    var category_dropdown = document.getElementById("selectCategory"); 
for (var keys in jsonObj)    {              
    category_dropdown[category_dropdown.length] = new Option(keys,keys);        
    }
function GetSelectedItem()      {
            var e = document.getElementById("selectCategory");
            var selectedCategory = e.options[e.selectedIndex].value;

            var sub_category_dropdown = document.getElementById("selectSubCategory");   
            document.getElementById("selectSubCategory").options.length=0; //clearing previous values of the drop-down list
            for(var i=0;i<jsonObj[selectedCategory].length;i++)             {
                sub_category_dropdown[sub_category_dropdown.length] = new Option(jsonObj[selectedCategory][i],jsonObj[selectedCategory][i]);    
            }
    }
function addRow(tableID) 
    {

        var table = document.getElementById(tableID); 
        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);
         var colCount = table.rows[0].cells.length;

        for(var i=0; i<colCount; i++) {
            var newcell = row.insertCell(i);
             newcell.innerHTML = table.rows[0].cells[i].innerHTML;
             newcell.childNodes[0].selectedIndex = 0;

        }
    }
//--></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:42:19.017

问题是当您输入一个动态创建的元素时，您还必须将事件附加到它，使用 jquery 您可以委托事件，但是因为您不使用它所以`addRow`我添加了 eventListener 的函数。

**但是**您正在创建具有相同 ID 的动态元素，这是错误的，HTML 为每个元素指定一个 ID。因此，您应该将您的 ID 更改为类，并为每个行元素设置一个特定的 ID。因为即使 HTML 已损坏，HTML 也能正常工作，所以我在代码中添加了一些检查以查看它是初始行还是动态创建的行，因此您可以知道要将事件附加到哪个选择框（具有相同的 ID）侦听器（`getElementById`返回它找到的第一个）。所以这会起作用，但这是非常糟糕的做法。

我在混合中添加了一些 jQuery，但您可以将其取出，仅用于事件侦听器。

这是它的jsfiddle。

[http://jsfiddle.net/C2xsj/5/](http://jsfiddle.net/C2xsj/5/)

这是HTML

```
<INPUT type="button" value="Add Row" id="button"/>
<form id="myForm">
<TABLE id="dataTable" >
<TR><TD>
<select id="selectCategory">
<option>Choose a category</option>
</select>
</TD>
<TD>
<select id="selectSubCategory" >
<option>Choose a sub-category</option>
</select>
</TD></TR>
</TABLE>
</form> 
```

和代码

```
$(function () {
    $('#selectCategory').change(function() {
        getSelectedItem(this, null);
    });

    $('#button').click(function() {
        addRow('dataTable');
    });

    var jsonObj = {"category1":["subcat 1"],"category2":["subcat 2.1","subcat 2.2"],"category3":["subcat 3.1","subcat 3.2","subcat 3.3"]};
var keys = Object.keys(jsonObj);
var category_dropdown = document.getElementById("selectCategory"); 

var getSelectedItem = function(element, row) {
    var e = element;
    var selectedCategory = e.options[e.selectedIndex].value;
    var sub_category_dropdown = (row != null ? row.getElementsByTagName("select")[1] : document.getElementById("selectSubCategory"));
    sub_category_dropdown.options.length=0;
    for (var i=0;i<jsonObj[selectedCategory].length;i++) {
        sub_category_dropdown[sub_category_dropdown.length] = new Option(jsonObj[selectedCategory][i],jsonObj[selectedCategory][i]);
    }
};

var addRow = function(tableID) {
        var table = document.getElementById(tableID); 
        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);
        var colCount = table.rows[0].cells.length;

       for (var i = 0; i<colCount; i++) {
             var newcell = row.insertCell(i);
             newcell.innerHTML = table.rows[0].cells[i].innerHTML;
             newcell.childNodes[0].selectedIndex = 0;
    }
    var selects = row.getElementsByTagName("select");
    selects[0].addEventListener('change', function() { getSelectedItem(this, row) }, false);
};

    for (var keys in jsonObj) {              
        category_dropdown[category_dropdown.length] = new Option(keys,keys);        
    }   
}); 
```

# database - 我们什么时候应该在 django 中使用 ForeignKey 和 ManyToOne

> ID：15945864
> 
> 赞同：0
> 
> 时间：2013-04-11T09:59:18.490
> 
> 标签：database, django, database-design, django-models

有两种模式学院、系

```
class College(models.Model):
    name = models.CharField(max_length=200)
    uid = models.CharField(max_length=10, unique=True)
    website = models.URLField()

class Dept(models.Model):
    name = models.CharField(max_length=200)
    uid = models.CharField(max_length=10)
    college = models.ForeignKey(College) 
```

在这里，我们可以用两种方式说在关系中......

1.  每个学院都有很多部门
2.  每个部门属于一个学院（以上模型属于）

使用第二种设计时出现问题

*大学中的每个部门不能有重复的名称*.. 即，我们不能在一个大学中有多个部门.. 怎么做？

是否采用了正确的数据库设计？如果没有怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:07:39.023

如果不能将一个部门划分为多个学院，那么您的外键模型看起来是正确的。如果一个部门可以划分为多个学院，则必须设置一个带有“through”参数的 ManyToMany，并在槽模型中添加一个“unique_together”，如下所示：

对于 FK，要添加您的约束，您应该按如下方式更改 Dept：

```
class Dept(models.Model):
    name = models.CharField(max_length=200)
    uid = models.CharField(max_length=10)
    college = models.ForeignKey(College)

    class Meta:
        unique_together = (('name', 'college'),) 
```

# php - 无法捕获由错误创建的异常

> ID：15945869
> 
> 赞同：3
> 
> 时间：2013-04-11T09:59:34.577
> 
> 标签：php, exception, exception-handling

我在 Ubuntu 12.10 上运行 PHP 5.4.12。

我正在使用错误处理程序将 PHP 错误转换为异常，以便我可以处理它们。但是，我发现虽然我可以将错误转化为异常，但似乎根本没有办法捕获异常。

下面是一些简单的演示代码：

```
<?php 
class CErrorException extends Exception {}

function handleError($level, $message, $file, $line){

    if( error_reporting() != 0){
        throw new CErrorException($message, $level);
    }
}

function handleException(Exception $exception){
    var_dump('Exception handled at global level');
}

set_error_handler('handleError');

set_exception_handler('handleException');

try {
    require_once('non\existent\file'); //Will generate an error and cause an exception to be thrown.
} catch (Exception $e) {
    var_dump("let's deal with the exception");
} 
```

不幸的是，在这种情况下，我永远无法捕获引发的异常，这使得很难从使用`require_once`不存在或不可读的文件引起的问题中恢复。

我得到这两个错误：

```
Warning: Uncaught exception 'CErrorException' with message 'require_once(non\existent\file): failed to open stream: Invalid argument' in /work/test.php:7 Stack trace: #0 /work/test.php(20): handleError(2, 'require_once(no...', '/work/test.php', 20, Array) #1 /work/test.php(20): require_once() #2 {main} thrown in /work/test.php on line 7

Fatal error: main(): Failed opening required 'non\existent\file' 
```

就没有办法抓住它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:06:30.140

并非所有错误都可以使用错误处理程序进行处理。PHP 核心中的致命错误将停止处理进一步的指令，包括处理您的错误处理程序。从[set_error_handler()](http://php.net/set-error-handler)的文档中：

> 用户定义的函数无法处理以下错误类型：E_ERROR、E_PARSE、E_CORE_ERROR、E_CORE_WARNING、E_COMPILE_ERROR、E_COMPILE_WARNING，以及在调用 set_error_handler() 的文件中引发的大部分 E_STRICT。

# insert - Drupal 在动态页面上插入数据

> ID：15945871
> 
> 赞同：0
> 
> 时间：2013-04-11T09:59:38.617
> 
> 标签：insert, drupal-7, dynamic-pages

我正在尝试以编程方式在动态生成的页面上插入自定义内容。

例如，我想如何在默认的 webform 提交确认页面上插入内容。

由于 webform 确认页面是动态生成的页面而不是节点，所以这是一个问题。

谁能给我关于如何以编程方式将内容添加到动态 Drupal 页面的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:34:12.990

据我了解，您需要在提交网络表单时输出一些内容，因此您需要为该网络表单提供自定义提交处理程序，并输出您想要的信息。

您需要使用[hook_form_alter更改您的表单](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_alter/7)

```
function YOURMODULENAME_form_alter(&$form, &$form_state, $form_id) {
   if ($form_id == 'your_form_id_here') {
     $form['#submit'][] = 'myform_form_submit';
   }
} 
```

现在在你的`myform_form_submit`你可以输出一些像这样的东西：

```
function myform_form_submit(&$form, &$form_state) {
   drupal_set_message('Any stuff here');
} 
```

您还可以将用户重定向到您想要的任何页面，并在那里显示您的自定义内容。使用`$form_state['redirect'] = 'YOUR_DESTINATION';`或[drupal_goto](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_goto/7)函数

# ios - CALayer -renderInContext：变换速度过慢

> ID：15945873
> 
> 赞同：2
> 
> 时间：2013-04-11T09:59:47.290
> 
> 标签：ios, transform, calayer, quartz-graphics

A在 iPhone 5`UIView`上`CALayer`需要 0.002 秒才能将自身渲染到 60x60pt 上下文中，使用`-renderInContext:`.

但是，**将旋转或缩放应用于其变换需要 0.07 秒**。

那慢了 35 倍，让我相信有什么严重的错误。单独平移不会影响性能，只会影响旋转和缩放。我的 UIView 在其`-drawRect:`方法中渲染了一个大（1024x768pt）图像，但图像本身不是主要问题（renderInContext 也没有调用 drawRect，它必须做自己的事情）。视图的不透明度 (`-isOpaque` ) 对性能没有明显影响。

我不明白为什么转换会对性能产生不利影响。我该如何解决？

# android - 无法启动子活动

> ID：15945874
> 
> 赞同：0
> 
> 时间：2013-04-11T09:59:48.170
> 
> 标签：android, android-tabhost, android-tabs

我正在尝试使用添加子活动

```
TabGroupActivity parentActivity = (TabGroupActivity) getParent();
                parentActivity.startChildActivity("AlbumDetailsLatest2", i); 
```

但似乎我遇到了一个错误，我无法理解似乎是什么问题。

这是我的最新专辑活动课程：

```
public class LatestAlbums extends FragmentActivity {

    // widgets
    private ListView list;
    private ImageView back, clear;
    private EditText find;
    // JSON Node names
    private static final String TAG_ALBUMS = "albums";
    private static final String TAG_ID = "id";
    private static final String TAG_NAME = "name";
    private static final String TAG_SINGER = "singer";
    private static final String TAG_GENRE = "genre";
    private static final String TAG_MIX = "mix";
    private static final String TAG_THUMB = "thumb";
    private static final String TAG_SONGS = "songs";
    private static final String TAG_SONG_TITLE = "song";
    private static final String TAG_SONG_ARTIST = "artist";
    private static final String TAG_SONG_MP3 = "mp3";
    private static final String TAG_SONG_MP4 = "mp4";
    private static final String TAG_SONG_THUMB = "thumb";
    private Parcelable state;
    private ProgressDialog pdialog;

    // albums JSONArray
    private JSONArray albums;
    private JSONArray sngs;
    // arrayLists for creating objects
    private ArrayList<Albums> albumsArray;
    private ArrayList<Songs> songsArray;
    private AlbumLazyAdapter adapter;
    private ViewPager pager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.latest_albums);
        albumsArray = new ArrayList<Albums>();
        songsArray = new ArrayList<Songs>();

        try {
            loadJSON();
        } catch (JSONException e) {
            e.printStackTrace();
        }
    }

    private void initWidgets() {
        list = (ListView) findViewById(R.id.listView1);
        back = (ImageView) findViewById(R.id.latest_back_img);
        clear = (ImageView) findViewById(R.id.latest_search_clear);
        pager = (ViewPager) findViewById(R.id.my_slider);
        clear.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                find.setText("");
                find.clearFocus();
                find.clearComposingText();
                clear.setVisibility(View.INVISIBLE);
            }
        });
        find = (EditText) findViewById(R.id.latest_search_et);
        back.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                finish();
            }
        });

        adapter = new AlbumLazyAdapter(this, albumsArray);

        // set list view adapter
        list.setAdapter(adapter);

        // setting find edit text searching method
        find.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {
                clear.setVisibility(View.VISIBLE);

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
            }

            @Override
            public void afterTextChanged(Editable s) {
                final ArrayList<Albums> temp = new ArrayList<Albums>();
                for (int i = 0; i < albumsArray.size(); i++) {
                    if (albumsArray.get(i).getTAG_NAME().toLowerCase()
                            .contains(find.getText().toString().toLowerCase())
                            || albumsArray.get(i).getTAG_SINGER().toLowerCase()
                                    .contains(find.getText().toString())) {
                        temp.add(albumsArray.get(i));
                    }
                }

                AlbumLazyAdapter mAdapter = new AlbumLazyAdapter(
                        LatestAlbums.this, temp);
                list.setAdapter(mAdapter);
                mAdapter.notifyDataSetChanged();
                list.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> parent, View v,
                            int position, long arg3) {
                        Intent i = new Intent();
                        i.putExtra("albums", temp.get(position));
                        i.putExtra("songs", temp.get(position).getSongs());
                        i.putExtra("title", temp.get(position).getTAG_NAME());
                        i.putExtra("genre", temp.get(position).getTAG_GENRE());
                        i.putExtra("thumb", temp.get(position).getTAG_THUMB());
                        i.setClass(LatestAlbums.this, AlbumDetails.class);
                        TabGroupActivity parentActivity = (TabGroupActivity) getParent();
                        parentActivity.startChildActivity("AlbumDetailsLatest1", i);

                    }
                });

            }
        });
        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long arg3) {
                Intent i = new Intent();
                i.putExtra("albums", albumsArray.get(position));
                i.putExtra("songs", albumsArray.get(position).getSongs());
                i.putExtra("title", albumsArray.get(position).getTAG_NAME());
                i.putExtra("genre", albumsArray.get(position).getTAG_GENRE());
                i.putExtra("thumb", albumsArray.get(position).getTAG_THUMB());
                i.setClass(LatestAlbums.this, AlbumDetails.class);
                TabGroupActivity parentActivity = (TabGroupActivity) getParent();
                parentActivity.startChildActivity("AlbumDetailsLatest2", i);

            }
        });

    }

    @Override
    protected void onResume() {
        super.onResume();
        initWidgets();
    }

    // load json from server via asyncTask
    public void loadJSON() throws JSONException {
        AsyncTask<Void, Void, Void> task = new AsyncTask<Void, Void, Void>() {

            @Override
            protected void onPreExecute() {
                super.onPreExecute();
                initWidgets();
                pdialog = new ProgressDialog(LatestAlbums.this);
                pdialog.setMessage(getString(R.string.loading_));
                pdialog.show();
                pdialog.setCancelable(true);
                pdialog.setCanceledOnTouchOutside(false);

            }

            @Override
            protected Void doInBackground(Void... params) {

                if (isOnline()) {

                    JSONObject json = new JSONParser()
                            .getJSONFromUrl(getString(R.string.json_URL));

                    JSONObject theJSON;
                    try {
                        // Getting Array of albums
                        theJSON = json.getJSONObject("json");
                        albums = theJSON.getJSONArray(TAG_ALBUMS);
                        // looping through All albums
                        for (int i = 0; i < albums.length(); i++) {
                            JSONObject c = albums.getJSONObject(i);
                            String album_id = c.getString(TAG_ID);
                            String album_name = c.getString(TAG_NAME);
                            String album_singer = c.getString(TAG_SINGER);
                            String album_mix = c.getString(TAG_MIX);
                            String album_genre = c.getString(TAG_GENRE);
                            String album_thumb = getString(R.string.cover_URL)
                                    + c.getString(TAG_THUMB);
                            albumsArray.add(new Albums(album_id, album_name,
                                    album_singer, album_genre, album_mix,
                                    album_thumb, songsArray));
                            sngs = c.getJSONArray(TAG_SONGS);
                            // getting songs for the album
                            songsArray = new ArrayList<Songs>();
                            for (int j = 0; j < sngs.length(); j++) {
                                JSONObject songs = sngs.getJSONObject(j);
                                String song_artist = songs
                                        .getString(TAG_SONG_ARTIST);
                                String song_mp3 = songs.getString(TAG_SONG_MP3);
                                String song_mp4 = songs.getString(TAG_SONG_MP4);
                                String song_thumb = songs
                                        .getString(TAG_SONG_THUMB);
                                String song_title = songs
                                        .getString(TAG_SONG_TITLE);
                                songsArray.add(new Songs(song_title,
                                        song_artist,
                                        "http://someurl.com/musica/songs_with/"
                                                + song_mp3, song_mp4,
                                        getString(R.string.cover_URL)
                                                + song_thumb));

                            }
                            albumsArray.get(i).setSongs(songsArray);
                        }

                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                } else {
                    RelativeLayout relativeLayout = (RelativeLayout) findViewById(R.id.latest_relativeLayout);
                    TextView noCon = new TextView(LatestAlbums.this);
                    noCon.setText(R.string.not_connected_to_internet);
                    noCon.setPadding(100, 200, 100, 0);
                    noCon.setTextSize(22);
                    noCon.setTextColor(Color.WHITE);
                    relativeLayout.addView(noCon);
                    ImageView left = (ImageView) findViewById(R.id.latest_left);
                    left.setVisibility(View.GONE);
                    ImageView right = (ImageView) findViewById(R.id.latest_right);
                    right.setVisibility(View.GONE);

                    pager.setVisibility(View.GONE);
                    find.setVisibility(View.GONE);
                }
                return null;
            }

            @Override
            protected void onPostExecute(Void result) {
                super.onPostExecute(result);
                pdialog.dismiss();
                FragmentManager fm = getSupportFragmentManager();
                MyFragmentPagerAdapter pagerAdapter = new MyFragmentPagerAdapter(
                        fm, albumsArray);
                pager.setAdapter(pagerAdapter);

                adapter.notifyDataSetChanged();
            }
        };
        task.execute();
    }

    public void saveState() {
        state = list.onSaveInstanceState();
    }

    public boolean isOnline() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnectedOrConnecting()) {
            return true;
        }
        return false;
    }

    public void reload() {
        saveState();
        list.setAdapter(adapter);
        list.onRestoreInstanceState(state);
    }
} 
```

这是 logCat 输出：

```
04-11 11:48:39.057: E/AndroidRuntime(3573): FATAL EXCEPTION: main
04-11 11:48:39.057: E/AndroidRuntime(3573): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.myapp/com.myapp.activities.TabLayouts}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.myapp/com.myapp.activities.LatestGroup}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.myapp/com.myapp.activities.LatestAlbums}: android.view.WindowManager$BadTokenException: Unable to add window -- token android.app.LocalActivityManager$LocalActivityRecord@4198bfe8 is not valid; is your activity running?
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1972)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1997)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.app.ActivityThread.access$600(ActivityThread.java:124)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1148)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.os.Looper.loop(Looper.java:137)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.app.ActivityThread.main(ActivityThread.java:4440)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at java.lang.reflect.Method.invokeNative(Native Method)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at java.lang.reflect.Method.invoke(Method.java:511)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at dalvik.system.NativeStart.main(Native Method)
04-11 11:48:39.057: E/AndroidRuntime(3573): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.myapp/com.myapp.activities.LatestGroup}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.myapp/com.myapp.activities.LatestAlbums}: android.view.WindowManager$BadTokenException: Unable to add window -- token android.app.LocalActivityManager$LocalActivityRecord@4198bfe8 is not valid; is your activity running?
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1972)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1813)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:682)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.widget.TabHost.setCurrentTab(TabHost.java:346)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.widget.TabHost.addTab(TabHost.java:236)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at com.myapp.activities.TabLayouts.addTab(TabLayouts.java:52)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at com.myapp.activities.TabLayouts.setTabs(TabLayouts.java:32)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at com.myapp.activities.TabLayouts.onCreate(TabLayouts.java:25)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.app.Activity.performCreate(Activity.java:4465)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1936)
04-11 11:48:39.057: E/AndroidRuntime(3573):     ... 11 more
04-11 11:48:39.057: E/AndroidRuntime(3573): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.myapp/myapp.activities.LatestAlbums}: android.view.WindowManager$BadTokenException: Unable to add window -- token android.app.LocalActivityManager$LocalActivityRecord@4198bfe8 is not valid; is your activity running?
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1972)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1813)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at com.myapp.activities.TabGroupActivity.startChildActivity(TabGroupActivity.java:56)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at com.myapp.activities.LatestGroup.onCreate(LatestGroup.java:10)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.app.Activity.performCreate(Activity.java:4465)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-11 11:48:39.057: E/AndroidRuntime(3573):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1936)
04-11 11:48:39.057: E/AndroidRuntime(3573):     ... 23 more
04-11 11:48:39.057: E/AndroidRuntime(3573): Caused by: android.view.WindowManager$BadTokenExcep 
```

很抱歉有很多代码，但真的不知道是什么导致了这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:10:38.373

采用：

> 意图 i = new Intent(getParent(),AlbumDetails.class);

反而：

> 意图 i = new Intent();

并在下面的行评论：

```
i.setClass(LatestAlbums.this, AlbumDetails.class); 
```

采用：

```
TabGroupActivity parentActivity = (TabGroupActivity) getParent();
parentActivity.startChildActivity("AlbumDetailsLatest2", i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:12:57.880

据我所知，问题在于您尝试在 onCreate 方法中显示的对话框。您必须等到 Activity 的生命周期方法完成。像这样使用 post 方法`pdialog.post(new Runnable() { pdialog.show(); });`仅在活动启动并运行时显示对话框。

编辑：我无法删除该帖子，因为您已经接受了它，但是我的方法仅适用于视图。所以你必须创建一个处理程序并 postDelay 对话框。我希望这会奏效。

```
 new Handler().postDelayed(new Runnable() {
    @Override
    public void run() {
     pdialog = new ProgressDialog(LatestAlbums.this);
            pdialog.setMessage(getString(R.string.loading_));
            pdialog.setCancelable(true);
            pdialog.setCanceledOnTouchOutside(false);
            pdialog.show();
    }
}, 1000); 
```

# jquery - 通过css类设置宽度时获取div的宽度

> ID：15945877
> 
> 赞同：4
> 
> 时间：2013-04-11T09:59:56.010
> 
> 标签：jquery

这个 JS 脚本给了我一个警告框说；

```
jQuery.UI.version = 1.0.2  ---   Box Width: undefined 
```

我该如何选择`#resizable`？

```
 <head>
    <title></title>
    <link href="StyleSheet.css" rel="stylesheet" type="text/css" />
    <script src="jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="jquery-ui-1.10.2.custom.min.js" type="text/javascript"></script>
       <style>
  #resizable { width: 200px; height: 150px; padding: 5px; border: 1px solid red;}

  </style>

      <script>
        $(function () {
            var boxWidth = $('#resizable').attr('width');
            alert("jQuery.UI.version = " + jQuery.ui.version + "  ---   Box Width: " + boxWidth);           
        });
  </script>

</head>
<body>
    <div id="resizable" class=">
        <div id="title">
            <h2>
            The expanding box
            </h2>
        </div>    
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:01:19.250

您的选择器`$('#resizable').attr('width');`搜索`width`不存在的可调整大小的属性

我想你在要求`width()`

试试这个

```
 var boxWidth = $('#resizable').width(); //this gives you the width of resizable div 
```

**更新看到评论**

您的代码读取了 div 的属性宽度`<div id="resizable" class="asd">`..但是看，这个 div 中没有名为 width 的属性，所以它失败了... doc to read more about [attr()](http://api.jquery.com/attr/)

如果您在 div 中添加宽度，您的代码将起作用`<div id="resizable" class="asd" width="30px">`...这会给您带来 `30px`警报...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T10:07:48.403

看到这里你没有属性`width`：

```
<div id="resizable" class="> 
```

这肯定会崩溃并设置`undefined`为`var boxWidth = $('#resizable').attr('width');`

有两种获取元素宽度的方法，例如：

顺便`.width()`说一句：

```
$('#resizable').width(); 
```

顺便`.css()`说一句：

```
$('#resizable').css('width'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T10:01:26.593

试试这个：

```
$('#resizable').width(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T10:02:17.567

您在该 div 上没有 width 属性，您是否要获取该 div 的 width 属性？尝试

```
$("#resizable").width(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T10:07:09.847

```
alert($('#resizable').width()); will you give 200

alert($('#resizable').css('width')); and this will you give 200px 
```

[div 宽度](http://jsfiddle.net/rahularyansharma/YnLk8/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-23T08:11:07.017

使用纯 JavaScript，您可以通过以下方式执行此操作：

```
document.getElementById('resizable').clientWidth; 
```

# c++ - 具有显式调整大小的向量

> ID：15945882
> 
> 赞同：1
> 
> 时间：2013-04-11T10:00:01.807
> 
> 标签：c++, vector

我正在使用向量，但出于多种原因，使用指针引用单个元素。问题是当我添加元素时，向量会调整大小并可能将元素移动到另一个更大的内存地址。这使我的指针无效。

为了避免重新分配，我`vector<T>::reserve`在使用向量之前调用。但是，在某些情况下，我没有保留足够的空间。在这种情况下，我希望向量断​​言或抛出异常，而不是尝试静默调整大小。

有没有办法使用向量或其他数据结构来做到这一点？我可以使用 C99 可变长度数组吗？如果可以，如何在构造函数中将其初始化为正确的长度？还是我需要推出自己的可显式调整大小的矢量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:07:07.890

如果您检查已保留的空间，您可以简单地解决这个问题“在这种情况下，我希望向量断​​言或抛出异常，而不是尝试静默调整大小。” 和

```
if (v.size() == v.capacity()) throw ... 
```

你可以写一个这样的函数：

```
template <typename T>
void safe_vector_push_back(std::vector<T>& v, const T &e)
{
   if (v.size() == v.capacity()) throw ... 
   v.push_back(e);
} 
```

另一种可能的方法当然是根本不将指向内容的指针存储在向量中。只需将索引存储到向量中。这样，向量可以随意调整大小，不会出错。

在另一个对象中存储指向数据的指针通常是一个坏主意（在这种情况下，向量是一个对象）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:50:40.990

继承是你的朋友：

```
template<typename T, typename A = std::allocator<T>>
class myvector : public std::vector<T, A>
{
    typedef std::vector<T,A> base_t;
public:
    myvector()
    {
    }

    myvector(size_t size) : base_t(size)
    {
    }
    void push_back(T val)
    {
        if(capacity() == size())
            throw "no more room";
        base_t::push_back(val);
    }
}; 
```

# c# - 如何使用 Microsoft.Phone.Data.Linq.DatabaseSchemaUpdater 修改架构？

> ID：15945885
> 
> 赞同：2
> 
> 时间：2013-04-11T10:00:11.590
> 
> 标签：c#, windows-phone-8

似乎 DatabaseSchemaUpdater 仅用于添加新表/列，但不能用于修改数据库架构。

谁能告诉我如何使用 DatabaseSchemaUpdater 修改数据库模式（删除列）？或者其他实现它的方法。

# jquery - 使用struts2的ajax下载文件

> ID：15945887
> 
> 赞同：0
> 
> 时间：2013-04-11T10:00:17.520
> 
> 标签：jquery, ajax, file, struts2

我正在使用`js`struts2 从服务器下载文件。一切正常，除了有时生成文件可能需要几秒钟，我想展示一个加载器`gif`从生成开始到浏览器显示下载生成文件的窗口的加载程序。

现在我`js`有：

```
 var url = "myAction.action?param1=" + param1;
    window.location.href = url; 
```

这只会调用我的操作，该操作将生成将要下载的文件，然后浏览器将显示其默认下载窗口。

有没有办法对 ajax 做同样的事情，所以我可以知道请求何时开始以及浏览器对用户的响应何时到达？

谢谢

# drupal - 在模板文件中使用模块变量

> ID：15945890
> 
> 赞同：0
> 
> 时间：2013-04-11T10:00:21.073
> 
> 标签：drupal, drupal-6

我使用 drupal 6 和 book 模块。我想更改书籍内容类型的设计。所以我需要在我的 tpl 文件中使用一个模块的变量。book-navigation.tpl.php 中有一个名为 $next_title 的变量。如何在我的模板文件中使用它？

我读了很多关于预处理函数的内容，但我看不到一个真实的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:10:21.823

您需要使用 template_preprocess_node：

[http://api.drupal.org/api/drupal/includes%21theme.inc/function/template_preprocess_node/6](http://api.drupal.org/api/drupal/includes%21theme.inc/function/template_preprocess_node/6)

在主题的 template.php 文件中，执行以下操作：

```
/**
 * Implements template_preprocess_node().
 */
function MY_THEME_preprocess_node(&$variables) {
  if ($variables['node']->type == 'book') {
    $variables['next_title'] = 'My custom next title';
  }
} 
```

添加该功能后刷新 Drupal 的主题注册表，那么您应该已经设置好了。

或者，如果您希望函数位于自定义模块中，则可以使用**MY_MODULE_preprocess_node 。**

然后在您的 book-navigation.tpl.php 中（您可以使用默认的，或者将此文件添加到您的主题目录并进行修改），您只需要使用：

```
<?php print $next_title; ?> 
```

另请查看[template_preprocess_book_navigation()](http://api.drupal.org/api/drupal/modules!book!book.module/function/template_preprocess_book_navigation/6)函数：

并确保在 $variables 上使用[devel 模块的](http://drupal.org/project/devel)dpm 函数来轻松查看可用的内容，如下所示：

```
dpm($variables); 
```

book_next [()](http://api.drupal.org/api/drupal/modules!book!book.module/function/book_next/6)函数可能在您的节点预处理器中使用。有时您必须使用预处理器将变量动态注入到 tpl.php 文件中。因为每个预处理器和每个 tpl.php 文件的 $variables 都是不同的。

# xml - 如何在 XSL for-each 中选择具有相同名称的节点？

> ID：15945894
> 
> 赞同：-2
> 
> 时间：2013-04-11T10:00:35.027
> 
> 标签：xml, xslt, xpath

我有一个 xml 文件：

```
<PRODUCTS>
  <PRODUCT>
    <NAME_EN>jacket</NAME_EN>
    <SKU>1</SKU>
    <SIZE>
      <CODE>01 </CODE>
      <DESCRIPTION>34</DESCRIPTION>
    </SIZE>
    <COLOR>
      <DESCRIPTION_EN>black</DESCRIPTION_EN>
    </COLOR>
  </PRODUCT>
  <PRODUCT>
    <NAME_EN>jacket</NAME_EN>
    <SKU>2</SKU>
    <SIZE>
      <CODE>02</CODE>
      <DESCRIPTION>35</DESCRIPTION>
    </SIZE>
    <COLOR>
      <DESCRIPTION_EN>black</DESCRIPTION_EN>
    </COLOR>
  </PRODUCT>
  <PRODUCT>
    <NAME_EN>shoes</NAME_EN>
    <SKU>3</SKU>
    <SIZE>
      <CODE>01</CODE>
      <DESCRIPTION>34</DESCRIPTION>
    </SIZE>
    <COLOR>
      <DESCRIPTION_EN>black</DESCRIPTION_EN>
    </COLOR>
  </PRODUCT>
</PRODUCTS> 
```

我想使用 xsl 转换来实现这样的结果：

```
<catalog>
  <product>
    <variants>
      <variant>
        <sku>1</sku>        
        <options>
          <option>
            <code>size</code>
            <value>34</value>
          </option>
        </options>
      </variant>
      <variant>
        <sku>2</sku>        
        <options>
          <option>
            <code>size</code>
            <value>35</value>
          </option>
        </options>
      </variant>
    </variants>
  </product>
  <product>
    <variants>
      <variant>
        <sku>3</sku>        
        <options>
          <option>
            <code>size</code>
            <value>34</value>
          </option>
        </options>
      </variant>
    </variants>
  </product>
</catalog> 
```

我需要的是在所有节点上 for-each名称相同的位置`NAME_EN`和位置。`COLOR/DESCRIPTION_EN`

我知道这样的for-each：

```
<xsl:for-each select="PRODUCTS/PRODUCT[NAME_EN='jacket']"> 
```

但它不会为我分叉。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:57:06.300

这是使用 XSLT 1.0 和 Muenchian 方法按`NAME_EN`字段值对产品进行分组的解决方案。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

    <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:key name="product-by-name" match="PRODUCT" use="NAME_EN"/>

    <xsl:template match="/PRODUCTS">
        <products>
            <xsl:apply-templates select="PRODUCT"/>
        </products>
    </xsl:template>

    <xsl:template match="PRODUCT">
        <xsl:variable name="name-group" select="key('product-by-name', NAME_EN)"/>
        <xsl:if test="generate-id() = generate-id($name-group[1])">
            <product>
                <variants>
                    <xsl:for-each select="$name-group">
                        <variant>
                            <xsl:apply-templates select="SKU"/>
                            <options>
                                <xsl:apply-templates select="SIZE"/>
                            </options>
                        </variant>
                    </xsl:for-each>
                </variants>
            </product>
        </xsl:if>
    </xsl:template>

    <xsl:template match="SKU">
        <sku><xsl:value-of select="."/></sku>
    </xsl:template>

    <xsl:template match="SIZE">
        <option>
            <code>size</code>
            <value><xsl:value-of select="DESCRIPTION"/></value>
        </option>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
<products>
   <product>
      <variants>
         <variant>
            <sku>1</sku>
            <options>
               <option>
                  <code>size</code>
                  <value>34</value>
               </option>
            </options>
         </variant>
         <variant>
            <sku>2</sku>
            <options>
               <option>
                  <code>size</code>
                  <value>35</value>
               </option>
            </options>
         </variant>
      </variants>
   </product>
   <product>
      <variants>
         <variant>
            <sku>3</sku>
            <options>
               <option>
                  <code>size</code>
                  <value>34</value>
               </option>
            </options>
         </variant>
      </variants>
   </product>
</products> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:49:13.313

这是完整的解决方案：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">

  <xsl:template match="NAME_EN | DESCRIPTION_EN"/>

  <xsl:template match="/">
    <catalog>
      <xsl:call-template name="product"/>
    </catalog>
  </xsl:template>

  <xsl:template name="product">
    <xsl:for-each-group select="//NAME_EN" group-by="text()">
      <xsl:for-each select="current-grouping-key()">
        <product>
          <variants>
            <xsl:for-each select="current-group()/parent::PRODUCT">
              <variant>
                <xsl:apply-templates/>
              </variant>
            </xsl:for-each>
          </variants>
        </product>
      </xsl:for-each>
    </xsl:for-each-group>
  </xsl:template>

  <xsl:template match="SKU">
    <sku>
      <xsl:apply-templates/>
    </sku>
  </xsl:template>

  <xsl:template match="SIZE">
    <options>
      <option>
        <xsl:apply-templates/>
      </option>
    </options>
  </xsl:template>

  <xsl:template match="CODE">
    <code>
      <xsl:apply-templates/>
    </code>
  </xsl:template>

  <xsl:template match="DESCRIPTION">
    <value>
      <xsl:apply-templates/>
    </value>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:44:59.810

我认为@Efrain 是对的，你锁定的是分组。<xsl:for-each-group> 仅适用于 xslt 2.0。有关更多信息，请查看例如：[how to apply group by on xslt elements](https://stackoverflow.com/q/2146648/2115381)

# android - 引起：java.io.NotserializableException：android.app.Instrumentation

> ID：15945900
> 
> 赞同：1
> 
> 时间：2013-04-11T10:00:57.030
> 
> 标签：android, serialization

我已经编写了一个实现 Serializable 的服务，并且我已经使所有自定义类都可以序列化。但是运行项目时出现错误：*

```
Parcelable encountered IOException writing serializable object Caused by : java.io.NotserializableException : android.app.Instrumentation` 
```

* 问题似乎是由使用“android.app.Instrumentation”引起的。如果它使用，我们不能让一个类可序列化`android.app.Instrumentation`吗？我很困惑。谢谢！

# java - 如何使用 Table CellEditor 编辑 Jtable 上的行

> ID：15945901
> 
> 赞同：0
> 
> 时间：2013-04-11T10:01:10.783
> 
> 标签：java, swing, nullpointerexception, jtable, tablecelleditor

我有一个带有表格的框架，该表格从数据库中获取功能（与搜索相对应的功能）。这是表格：

```
 public JTable getTableBornes() {
    if(TableBornes==null){

        TableModel TableBornesModel = 
            new DefaultTableModel(
                    new String[][] { { "", "", "" } },
                    new String[] { "Nom", "X", "Y" });
        TableBornes = new JTable();

        TableBornes.setModel(TableBornesModel);
        TableBornes.setBorder(new LineBorder(new java.awt.Color(0,0,0), 1, false));
        TableBornes.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS);

                }
    return TableBornes;

} 
```

我想要做的是，当用户单击一个单元格并对其进行编辑时，这也必须在数据库上完成。我试图`cellEditor`像这样添加一个监听器：

```
 addBornes.getTableBornes().getCellEditor()
            .addCellEditorListener(new CellEditorListener() {

                @Override
                public void editingStopped(ChangeEvent e) {

                    try {
                        for (int i = 0; i < rowsToActOn().length; i++) {

                            String name = addBornes.getTableBornes()
                                    .getValueAt(rowsToActOn()[i], 0)
                                    .toString();
                            Double x = new Double(addBornes
                                    .getTableBornes()
                                    .getValueAt(rowsToActOn()[i], 1)
                                    .toString());
                            Double y = new Double(addBornes
                                    .getTableBornes()
                                    .getValueAt(rowsToActOn()[i], 2)
                                    .toString());

                            String updateQuery = "UPDATE bornes_salemed_valid SET  x='"
                                    + x
                                    + "', y='"
                                    + y
                                    + "', name='"
                                    + name
                                    + "'";

                            PostgisDataStoreDriver postgisDataStore = (PostgisDataStoreDriver) context
                                    .getWorkbenchContext()
                                    .getRegistry()
                                    .getEntries(
                                            DataStoreDriver.REGISTRY_CLASSIFICATION)
                                    .get(0);

                            java.sql.Connection connx = postgisDataStore
                                    .getConn();
                            Statement st;
                            st = connx.createStatement();
                            st.executeUpdate(updateQuery);
                            connx.setAutoCommit(false);
                            connx.commit();
                            try {
                                refreshDataStoreLayerPlugin
                                        .execute(context);
                            } catch (Exception e1) {
                                // TODO Auto-generated catch block
                                e1.printStackTrace();
                            }
                        }
                    } catch (SQLException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }

                }

                @Override
                public void editingCanceled(ChangeEvent e) {
                    // TODO Auto-generated method stub

                }
            }); 
```

但是我得到了这个例外：

> 单元格编辑器为空

我不知道如何申报，具体在哪里申报？请帮忙。

```
java.lang.NullPointerException
            at com.vividsolutions.jump.workbench.ui.plugin.specific.ModifierBornesPlugIn.execute(ModifierBornesPlugIn.java:305)
            at com.vividsolutions.jump.workbench.plugin.AbstractPlugIn$1.actionPerformed(AbstractPlugIn.java:130)
            at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
            at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:06:45.040

*   从此代码中删除有关数据库连接的所有代码

*   什么是 CellEditorListener 可能不会在没有对 Java、Swing、JTable 和 XxxTableCelEditor 有最深入了解的情况下使用代码

* * *

可能的情况

*   在这种情况下，永远不要打开执行关闭连接（长而硬的对象），可以在后台从工人线程（根本没有重要的 EDT）和 JTable 一起打开连接

*   将 TableModelListener 添加到 JTable，将正确的坐标返回到最后编辑的单元格，

*   在 Editort 向 XxxTableModel 提交新值之前，JTable 不会返回先前的值

*   更好的方法是使用 AbstractTableModel，然后您将从 setValueAt() 触发另一个后台任务，使用 SwingWorker（用于享受）或 Runnable#Thread（用于生产代码），请您忽略我在里面的最后两个 commnet（... .)

* * *

*   我认为必须存在直接在模型`AbstractTableModel`中`ResultSet.CONCUR_UPDATABLE`实现为方法

# ruby-on-rails - 无法从其他模型的形式设置 user_id 外键

> ID：15945905
> 
> 赞同：0
> 
> 时间：2013-04-11T10:01:25.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3, foreign-keys, nested-attributes

我在 Rails 应用程序中有三个模型，**用户**、**徒步旅行**和**照片**。我想`user_id`在用户创建新照片时为新照片设置外键。

1.  每个**用户** `has_many :hikingtrails`&`has_many :photos`
2.  每条**远足径** `has_many :photos`和`belongs_to :user`
3.  每张**照片** `belongs_to :hikingtrail`&`belongs_to :user`

我已将用于创建 Hikingtrail 的表单分成两部分，因为它很长，第一部分 ( `new.html.erb`) 只需要用户在用户提交/创建 Hikingtrail 后输入需要验证的数据（即姓名和地址）应用程序将它们路由到`edit.html.erb`用户可以使用更多信息更新 Hikingtrail 并上传照片的位置。

用户登录后，他们可以创建 Hikingtrail，当他们这样做时，它会`user_id`在 Hikingtrail 模型中设置外键。我可以通过添加`@hikingtrail.user = current_user`Hikingtrails 控制器的创建操作来实现这一点。

`user_id`当用户尝试更新 Hikingtrail 时，我还想在新照片中设置外键。没有照片控制器，因为所有照片属性都嵌套在 Hikingtrail 中。通过将以下代码添加到 Hikingtrails 控制器的更新操作中，我尝试了与上述类似的方法：

```
@photo = Photo.new(params[:photo])
@photo.user_id = current_user.id 
```

&

```
@photo = Hikingtrail.photo.new(params[:photo])
@photo.user_id = current_user.id 
```

但它要么添加照片而不在数据库中设置 user_id 外键，要么我得到一个`undefined method 'photo'`错误。

**- - - 编辑 - - -**

我也尝试过添加

```
@photo = @hikingtrail.photos
@photo.user_id = current_user.id 
```

到我的远足径控制器，但这给了我一个`undefined method 'user_id='`错误。

**-- 结束编辑 --**

这是我的其余代码：

**用户模型**

```
class User < ActiveRecord::Base
  attr_accessible :user_name, :email, :password, :password_confirmation, :photos_attributes, :hikingtrails_attributes

  validates :email, :presence => true, :uniqueness => true, :format => { :with => /\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\Z/i } #, :message => "Invalid email address format"
  validates :user_name, :presence => true

  # has_secure_password automatically validates presence of password fields
  # validates :password, :presence => true
  # validates :password_confirmation, :presence => true
  has_secure_password

  has_many :photos
  accepts_nested_attributes_for :photos, :allow_destroy => :true, :reject_if => lambda { |a| a[:image].blank? }

  has_many :hikingtrails
  accepts_nested_attributes_for :hikingtrails, :allow_destroy => :true, :reject_if => :all_blank

  before_create { generate_token(:auth_token) } # calls the generate_token method below to store unique token in :auth_token field

  def send_password_reset
    generate_token(:password_reset_token) # uses method below to generate a unique token
    self.password_reset_sent_at = Time.zone.now # sets the time token was generated
    save! # save to database
    UserMailer.password_reset(self).deliver # calls user mailer to send email with instructions
  end  

  # generates a unique token which is unguessable for each user
  def generate_token(column) # take a column argument so that we can have multiple tokens
    begin
      self[column] = SecureRandom.urlsafe_base64 # ActiveSupport’s SecureRandom class generates a random string
    end while User.exists?(column => self[column]) # checks that no other user exists with this token and repeatedly generates another random token while this is true
  end

end 
```

**远足径模型**

```
class Hikingtrail < ActiveRecord::Base
  attr_accessible :description, 
                                  :duration_hours, 
                                  :duration_mins, 
                                  :name, 
                                  :looped,
                                  :addr_1,
                                  :addr_2,
                                  :addr_3,
                                  :country,
                                  :latitude,
                                  :longitude,
                                  :photos_attributes,
                                  :trails_attributes,
                                  :directions_attributes,
                                  :user_id

    validates :name,  :presence => {message:"Name can't be blank."}, :length => { :minimum => 3, message:"Name is too short (minimum is 3 characters)" } 
    validates :addr_2,  :presence => {message:"Address field can't be blank."}
    validates :addr_3,  :presence => {message:"Address field can't be blank."}
    validates :country,  :presence => {message:"Country field can't be blank."}
    validates :description, :length => { :minimum => 50, message:"Description is too short (minimum is 50 characters)" }, :allow_blank => true

    validates :latitude, :presence => {message: "Not a valid location on Google Maps, please check name address & country fields" }

    has_many :photos
    has_many :trails
    has_many :directions
    belongs_to :user

    accepts_nested_attributes_for :photos, :allow_destroy => :true,
    :reject_if => lambda { |a| a[:image].blank? }

    accepts_nested_attributes_for :trails, :allow_destroy => :true,
    :reject_if => lambda { |a| a[:step].blank? }

    accepts_nested_attributes_for :directions, :allow_destroy => :true,
    :reject_if => :all_blank

    geocoded_by :address
    before_validation :geocode, :if => :address_changed?

  def address
    [name, addr_1, addr_2, addr_3, country].compact.join(' ')
    end

    def address_changed?
      attrs = %w(name addr_1 addr_2 addr_3 country)
      attrs.any?{|a| send "#{a}_changed?"}
    end

    # Full text search method utilizing PostgreSQL search functionality for stemming  & ommitting stop words
    # http://www.postgresql.org/docs/9.1/static/textsearch.html
    def self.text_search(query)
      if query.present?
        # sets a rank variable to the value of the sum of the ranks for the name and description fields. So that the results are ordered by that rank in descending order.
        rank = <<-RANK
        ts_rank(to_tsvector(name), plainto_tsquery(#{sanitize(query)})) +
        ts_rank(to_tsvector(description), plainto_tsquery(#{sanitize(query)}))
        RANK
        where("name @@ :q or description @@ :q", q: query).order("#{rank} desc") # uses the PG @@ operater as opposed to ilike operator
      else
        scoped
      end
    end

end 
```

**照片模型**

```
class Photo < ActiveRecord::Base
  belongs_to :hikingtrail
  belongs_to :user

  attr_accessible :image, :user_id

  mount_uploader :image, ImageUploader
end 
```

**远足径控制器**

```
 class HikingtrailsController < ApplicationController
      before_filter :authorize, only: [:new, :destroy]

      # GET /hikingtrails
      # GET /hikingtrails.json
      def index
        if params[:search_nearby].present?
          @hikingtrails = Hikingtrail.near(params[:search_nearby], 50, :order => :distance)
          @hikingtrails = @hikingtrails.page(params[:page]).per_page(2)
        elsif params[:query].present?
          @hikingtrails = Hikingtrail.text_search(params[:query]).page(params[:page]).per_page(3)        
        else
          @hikingtrails = Hikingtrail.order("created_at DESC").page(params[:page]).per_page(4)
        end

        respond_to do |format|
          format.html # index.html.erb
          format.json { render json: @hikingtrails }
        end
      end

      # GET /hikingtrails/1
      # GET /hikingtrails/1.json
      def show
        @hikingtrail = Hikingtrail.find(params[:id])

        respond_to do |format|
          format.html # show.html.erb
          format.json { render json: @hikingtrail }
        end
      end

      # GET /hikingtrails/new
      # GET /hikingtrails/new.json
      def new
        @hikingtrail = Hikingtrail.new

        respond_to do |format|
          format.html # new.html.erb
          format.json { render json: @hikingtrail }
        end
      end

      # GET /hikingtrails/1/edit
      def edit
        @hikingtrail = Hikingtrail.find(params[:id])
      end

      # POST /hikingtrails
      # POST /hikingtrails.json
      def create
        @hikingtrail = Hikingtrail.new(params[:hikingtrail])
        @hikingtrail.user = current_user

        respond_to do |format|
          if @hikingtrail.save
            #format.html { redirect_to @hikingtrail, notice: 'Hikingtrail was successfully created.' }
            format.html { redirect_to edit_hikingtrail_path(@hikingtrail), notice: 'Hikingtrail was successfully created.' }        
            format.json { render json: @hikingtrail, status: :created, location: @hikingtrail }
          else
            format.html { render action: "new" }
            format.json { render json: @hikingtrail.errors, status: :unprocessable_entity }
          end
        end
      end

      # PUT /hikingtrails/1
      # PUT /hikingtrails/1.json
      def update
        @hikingtrail = Hikingtrail.find(params[:id])
        @photo = Photo.new(params[:photo])
        @photo.user_id = current_user.id

        respond_to do |format|
          if @hikingtrail.update_attributes(params[:hikingtrail])
            format.html { redirect_to @hikingtrail, notice: 'Hikingtrail was successfully updated.' }
            format.json { head :no_content }
          else
            format.html { render action: "edit" }
            format.json { render json: @hikingtrail.errors, status: :unprocessable_entity }
          end
        end
      end

      # DELETE /hikingtrails/1
      # DELETE /hikingtrails/1.json
      def destroy
        @hikingtrail = Hikingtrail.find(params[:id])
        @hikingtrail.destroy

        respond_to do |format|
          format.html { redirect_to hikingtrails_url }
          format.json { head :no_content }
        end
      end
    end 
```

**徒步旅行/_form.html.erb**

```
<% @hikingtrail.photos.build %>
<% @hikingtrail.trails.build %>
<% @hikingtrail.directions.build %>

<%= simple_form_for @hikingtrail, :html => { :class => 'form-horizontal' } do |f| %>
  <% if @hikingtrail.errors.any? %>
            <div class="alert">
              <a class="close" data-dismiss="alert">×</a> Please correct the
      <%= pluralize(@hikingtrail.errors.count, "error") %> below.  
      <ol>
      <% @hikingtrail.errors.each do |attribute, errors_array| %> 
        <li><%= errors_array %></li>
      <% end %>
      </ol>
    </div>
  <% end %>

<div class="accordion" id="accordion2">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
        Name &amp; Location
      </a>
    </div>
    <div id="collapseOne" class="accordion-body collapse">
      <div class="accordion-inner">

        <%= render :partial => 'new_form' %>

      </div>
    </div>
  </div>

    <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
        Description
      </a>
    </div>
    <div id="collapseTwo" class="accordion-body collapse in">
      <div class="accordion-inner">

        <%= f.input :description, :input_html => { :cols => 10, :rows => 3 } %> <br/>

        <%= f.input :looped, :as => :boolean %> 

        <%= f.input :duration_hours, :label => 'Duration',  :collection => 0..12, :include_blank => false, :hint => "hours" %>

        <%= f.input :duration_mins, collection: [ 0, 15, 30, 45 ], :include_blank => false, label: false, :hint => "mins" %>
      </div>
    </div>
  </div>

  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree">
        Images
      </a>
    </div>
    <div id="collapseThree" class="accordion-body collapse">
      <div class="accordion-inner">
        <% if current_user %>
          <%= f.simple_fields_for :photos do |builder| %>
            <%= render 'photo_fields', f: builder %>
          <% end %>
          <div style=clear:both;> </div>
          <%= link_to_add_fields "Add More", f, :photos %>
        <% else %>
          You must <%= link_to "Log In", login_path %> before you can upload photos.
        <% end %>
      </div>
    </div>
  </div>

  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseFour">
        Hiking Trail Route
      </a>
    </div>
    <div id="collapseFour" class="accordion-body collapse">
      <div class="accordion-inner">
        <%= f.simple_fields_for :trails do |builder| %>
          <%= render 'trail_fields', f: builder %>
        <% end %>
        <%= link_to_add_fields "Add Step", f, :trails %>
      </div>
    </div>
  </div>

  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseFive">
        Directions to The Hike
      </a>
    </div>
    <div id="collapseFive" class="accordion-body collapse">
      <div class="accordion-inner">
        <%= f.simple_fields_for :directions do |builder| %>
          <%= render 'direction_fields', f: builder %>
        <% end %>
        <%= link_to_add_fields "Add More Directions", f, :directions %>
      </div>
    </div>
  </div>

</div>

  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                hikingtrails_path, :class => 'btn' %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:25:35.560

您需要使用构建方法

```
@user=current_user
@photo= @user.photos.build(params[:photo])
@photo.save 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:53:42.390

我通过不同的方法解决了这个问题。

我在嵌套的 photo_fields 表单中使用了一个隐藏字段来设置我在 Photo 模型中设置的 user_id 属性：

`<%= f.hidden_field :user_id, :value => current_user.id %>`

因此，当用户创建一个新的远足小径时，他们的 user_id 已与表单一起提交并更新了照片属性。

我不确定这是否是最好的方法，但它有效。如果有更多 Rails 经验的人可以对此解决方案发表评论，我会很感兴趣。

# c - 未找到 sethostname 标识符错误

> ID：15945910
> 
> 赞同：2
> 
> 时间：2013-04-11T10:01:37.870
> 
> 标签：c, windows, winapi, network-programming, udp

我想设置本地主机的名称。我正在使用 sethostname() 函数，但出现如下错误：

```
error C3861: 'sethostname': identifier not found. 
```

下面是代码片段：

```
WSADATA wsa;
///Initialise winsock///
if (WSAStartup(MAKEWORD(2,2),&wsa) != 0)
   {
      //Socket Initialization Failed///
      exit(EXIT_FAILURE);
   }
 char setname[128]="Ayesha-PC";
 sethostname(setname, sizeof (setname)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T12:31:51.107

Windows 使用它自己的机制来设置主机名。您使用的功能是[`SetComputerName`](http://msdn.microsoft.com/en-us/library/ms724930%28v=vs.85%29.aspx)或[`SetComputerNameEx`](http://msdn.microsoft.com/en-us/library/ms724931%28v=vs.85%29.aspx)。

更改在下次重新启动时生效。您可以使用 请求重新启动[`ExitWindowsEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376868%28v=vs.85%29.aspx)。

你需要有管理员权限才能调用这些例程，需要重启的原因是很多windows子系统在启动后不会检查主机名，会继续使用旧名称（这在Linux中类似）；它也可能对`DNS`域产生影响。

# python - 来自单线程的 ZeroMQ 进程间通信丢失消息

> ID：15945915
> 
> 赞同：2
> 
> 时间：2013-04-11T10:01:52.393
> 
> 标签：python, unit-testing, zeromq, pyzmq

我目前正在探索测试我的 zeromq 应用程序的可能性。我的印象是我可以在同一个线程中有一个发布者/订阅者，让发布者发布和订阅者订阅它而不会丢失消息。然而，当我让发布者发送几条消息时，没有一条消息能传递给订阅者。

这是我使用的代码：

```
import zmq

def main():
    ctx = zmq.Context.instance()
    sender = ctx.socket(zmq.PUB)
    sender.setsockopt(zmq.HWM, 1000)
    sender.bind('tcp://*:10001')

    rcvr = ctx.socket(zmq.SUB)
    rcvr.setsockopt(zmq.HWM, 1000)
    rcvr.connect('tcp://127.0.0.1:10001')
    rcvr.setsockopt(zmq.SUBSCRIBE, "")

    for i in range(100):
        sender.send('%i' % i)

    while True:
        try:
            print rcvr.recv(zmq.NOBLOCK)
        except zmq.ZMQError:
            break

if __name__ == '__main__':
    main() 
```

运行它时，我没有得到任何输出。

令我印象深刻的是，接收方在发送方发送之前已连接，因此应该对这些消息进行排队。或者这是一个完全错误的假设，我应该使用 PUSH/PULL 代替？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T12:49:05.753

我认为这是[ZeroMQ 指南](http://zguide.zeromq.org/page%3aall#Getting-the-Message-Out)中描述的慢连接问题的一个案例。

> 这种“慢木工”症状经常影响到足够多的人，我们将对其进行详细解释。

我认为主要问题是在订阅者套接字开始侦听之前所有消息都已发送，并且消息飞过并被丢弃。在设置套接字和发送消息之间设置延迟不起作用，因为在接收器开始侦听之前已经发送了最后一条消息。

正如您所建议的，推/拉套接字在内存中进行队列作业。您可以像这样在单个进程中的套接字之间发送作业

```
# pushpull.py
import zmq

def main():
    ctx = zmq.Context()
    sender = ctx.socket(zmq.PUSH)
    sender.bind('tcp://*:10001')

    rcvr = ctx.socket(zmq.PULL)
    rcvr.connect('tcp://127.0.0.1:10001')

    for i in range(100):
        sender.send_unicode('%i' % i)

    while True:
        msg = rcvr.recv()
        print(msg)

if __name__ == '__main__':
    main() 
```

或者如果你想使用 pub/sub 套接字，我们需要两个进程和一个`time.sleep(1)`在套接字设置和消息发送之间：

首先启动接收器

```
# rcvr.py
import zmq

def main():
    ctx = zmq.Context()
    rcvr = ctx.socket(zmq.SUB)
    rcvr.connect('tcp://127.0.0.1:10001')
    rcvr.setsockopt_string(zmq.SUBSCRIBE, "")

    while True:
        msg = rcvr.recv()
        print(msg)

if __name__ == '__main__':
    main() 
```

然后发件人，

```
# sender.py
import zmq
import time

def main():
    ctx = zmq.Context()
    sender = ctx.socket(zmq.PUB)
    sender.bind('tcp://*:10001')

    time.sleep(1)
    for i in range(100):
        sender.send_unicode('%i' % i)

if __name__ == "__main__":
    main() 
```

受到：

```
b'0'
b'1'
b'2'
b'3' ... 
```

我目前正在 Python 3.3 和 pyzmq 13.1.0 中使用出色的[WinPython](https://code.google.com/p/winpython/)发行版，因此 zmq 调用中的一些字符串处理以及打印功能有些不同。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T23:46:41.773

You should be connecting your SUB socket to port 10000 not 10001\. Currently the SUB socket is waiting for a publisher and the PUB socket is waiting for a subscriber. 0mq's feature of allowing 'clients' to connect without 'servers' already being present also means there is no error thrown when you connect to port 10001 and that is by design.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:14:55.567

> 让我印象深刻的是，接收方在发送方发送之前就已连接

这实际上不是真的——接收者已经开始了连接过程，但这并不意味着这个过程已经完成。连接是异步的。

如果您实际上将其用于进程内通信，我建议您使用`inproc`传输，这不是问题：

```
url = 'inproc://whatever'
sender.bind(url)
...
recvr.connect(url) 
```

# windows - 从两个绝对值创建相对 URL (WinAPI)

> ID：15945918
> 
> 赞同：0
> 
> 时间：2013-04-11T10:02:00.487
> 
> 标签：windows, winapi, url, url-parsing

有没有一种方法可以从两个绝对 URL 创建一个 relativeURL（假设它们具有相同的基/域）

例如

```
MakeRelative("http://foo/1.html", "http://foo/img/2.png") 
--> "./img/2.png"

MakeRelative("http://foo/1.html", "http://bar/img/2.png") 
--> fails 
```

.NET 有`System.URI.MakeRelativeURI`，我正在寻找本机等价物。

我希望在[Shell Lightweight Utilities](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773559%28v=vs.85%29.aspx)中找到一些东西，但没有运气。我可能可以用这些功能或基本的字符串操作来破解一些东西，但我不确定这是否是最好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T02:23:26.493

有[`PathRelativePathTo`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773740%28v=vs.85%29.aspx)用于创建从一个文件系统位置到另一个文件系统位置的相对路径的 win32 函数。MSDN 上也有很好的文档。

# mysql - 如何计算来自同一个表的子评论

> ID：15945921
> 
> 赞同：1
> 
> 时间：2013-04-11T10:02:14.503
> 
> 标签：mysql, sql

我有以下字段的评论表

```
comment_id                      
parent_id                       
thread_id 
title   
body                
date_comment                            
user_name 
```

我需要检索所有父评论（在 parent_id 中具有 NULL 值）并针对每个父评论计算子评论我尝试了以下查询

```
SELECT c1\. * , COUNT( c2.parent_id ) 
FROM comments c1
LEFT JOIN comments c2 ON c2.parent_id = c1.comment_id
WHERE c1.parent_id IS NULL 
AND c1.thread_id =122
GROUP BY c2.parent_id
ORDER BY c1.date_comment ASC 
```

但是这个查询只计算前三个父评论的子评论。请分析查询并建议我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:22:44.430

我认为问题在于您正在对加入班级的 parent_id 进行分组。这具有您描述的效果，其中没有孩子的评论被忽略。我认为这会起作用：

```
SELECT c1.*, COUNT( c2.parent_id ) AS childcount
FROM comments c1
LEFT JOIN comments c2 ON c2.parent_id = c1.comment_id
WHERE c1.thread_id =122
GROUP BY c1.comment_id
ORDER BY c1.date_comment ASC 
```

您可以在此处将我的解决方案视为 SQLFiddle：[http ://www.sqlfiddle.com/#!2/a8997/1](http://www.sqlfiddle.com/#!2/a8997/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:33:19.617

由于缺乏样本数据，未经测试的查询，但我希望它有效。

生成仅包含按 parent_id 分组的计数的表并将其与原始表连接：

```
SELECT c1.*, c2.n
FROM comments c1
LEFT JOIN ( SELECT COUNT(*) as n
            FROM comments
            WHERE parent_id IS NOT NULL
            GROUP BY parent_id ) c2
WHERE c1.parent_id IS NULL
ORDER BY c1.date_comment ASC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:39:29.323

感谢上帝。我得到了解决方案

```
SELECT c1\. * , COUNT( c2.parent_id ) 
FROM comments c1
LEFT JOIN comments c2 ON c2.parent_id = c1.comment_id
WHERE c1.parent_id IS NULL 
AND c1.thread_id =122
GROUP BY c1.comment_id
ORDER BY c1.date_comment ASC 
```

正如@Erik Schierboom 所说，`c2.parent_id`当我替换`GROUP BY c2.parent_id`为`GROUP BY c1.comment_id`解决问题时，我正在分组。

# mysql - mysql 正则表达式返回包含

> ID：15945922
> 
> 赞同：0
> 
> 时间：2013-04-11T10:02:16.190
> 
> 标签：mysql

我是正则表达式的新手，经过搜索和试验后，我找不到解决方案。我想用单词搜索数据库。搜索模式可能包含应该出现在返回词中的字母。示例模式：`pale`应返回包含“p”和/或“a”和/或“l”和/或“e”的单词：

可能的词（如果在数据库中）：`pal`, `lea`, `epa`, `pale`,`elap`等等 ...

我的问题是如何构建一个可以执行上述操作的正则表达式。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:05:32.020

```
SELECT *
FROM MyTable
WHERE word RLIKE '^[pale]+$' 
```

遵守字母计数的正则表达式如下所示：

```
^(p?(a?(l?e?|e?l?)|l?(a?|e?)|e?(a?lf?|l?a?))|a?(p?(l?e?|e?l?)|l?(p?e?|e?p?)|e?(p?l?|l?p?))|l?(a?(p?e?|e?p?)|p?(a?e?|e?a?)|e?(a?p?|p?a?))|e?(p?(a?l?|l?a?)|a?(p?l?|l?p?)|l?(a?p?|p?a?)))$ 
```

如您所见，正则表达式的大小基于输入的长度呈指数增长。

# c# - 如何转换列表 到字符串？

> ID：15945924
> 
> 赞同：2
> 
> 时间：2013-04-11T10:02:33.553
> 
> 标签：c#, string, list

我有一个列表，我想将其转换为字符串。包括我已添加到列表中的所有 de 字符串和数据。

这是我的课

```
public class MyClass
{
    public Boolean success { get; set; }
    public String msg { get; set; }

} 
```

然后我以这种方式声明它：

```
List<MyClass> list = addDataToList("Passwd", "UserID"); 
```

那么，如何将该列表转换为字符串？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T10:05:24.640

如果要连接`msg`列表中的所有内容，则可以`string.Join`用作：

```
string str = string.Join(",", list.Select(r=> r.msg)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T10:08:11.280

```
public class MyClass
{
   public Boolean success { get; set; }
   public String msg { get; set; }

   public override string ToString()
   {
     // return Whatever formalism of strings, e.g.
     return success? "Yeah":"Sorry" + msg;
   }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T10:09:28.163

你可以（没有IDE）：

```
List<MyClass> list;

var res = from a in list
          select String.Format("lala: {0} lili:{1}",a.success, a.msg); 
```

或者你可以：

```
StringBuilder builder = new StringBuilder ();

foreach (a in list)
{
    builder.AppendFormat("lala: {0} lili:{1}\n",a.success, a.msg);
} 
```

关于第二种可能性，如果您需要格式化，我认为我的建议会稍微快一些，但 Habib 的建议绝对更酷......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-29T06:03:43.233

这是一种方法`convert List<Class> to String`，

我也将方法附加到 `convert the converted String back to List`。

.

MyClass 类：

```
public class MyClass
{
    public Boolean success { get; set; }
    public String msg { get; set; }

    // class to string
    public override string ToString()
    {
        return success.ToString() + "," + msg;
    }

    public MyClass(){}

    // string to class
    public MyClass(string myclassTostring)
    {
        string[] props = myclassTostring.Split(',');
        success = Convert.ToBoolean(props[0]);
        msg = props[1];
    }

} 
```

转换方式：

```
///  Produce a List ///
List<MyClass> myclassList = 
    new List<MyClass>()
    {
        new MyClass(){success = true, msg = "1suc"},
        new MyClass(){success = false, msg = "2fail"},
        new MyClass(){success = true, msg = "3suc"},
        new MyClass(){success = true, msg = "4suc"},
        new MyClass(){success = false, msg = "5fail"},
    };

///  List Convert To String ///
string myclassListToString =
    String.Join(";", myclassList.Select(o => o.ToString()));

Console.WriteLine(myclassListToString);

///  String Convert Back To List ///
string[] myclassToStrings = myclassListToString.Split(';');
List<MyClass> convertBackList =
    myclassToStrings.
        Select(myclassTostring => new MyClass(myclassTostring)).ToList(); 
```

* * *

编辑：

几个月后我摸了摸`C# ASP.NET WebAPI`，发现**JSON**格式在各种api中经常使用，

而 JSON 是一种将数据转为字符串并转回数据的强大便捷方式，它可以自动将任何你能想到的对象、数组、类转为字符串，并自动转回。

关键字是**`JSON Serialize Deserialize`**，google一下，你可以找到很多现成的包。

我知道其中最著名的一个是[NewtonSoft JSON](http://www.newtonsoft.com/json)，微软也可能有自己的 JOSN 流程库。

例如：

```
 public static string ToJSON(this object obj)
    {
        var serializer = new JavaScriptSerializer();
        try
        {
            return serializer.Serialize(obj);
        }
        catch (Exception ex)
        {
            return "";
        }
    } 
```

如果你安装 Nuget Package `NewtonSoftJson`，你可以使用

```
public static string ToJSON(object obj)
{
    return JsonConvert.SerializeObject(obj);    
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-05T06:16:53.073

尝试这个

```
for (int i = 0; i < list.Count; i++)
{
  var a = list[i];
  Console.WriteLine(builder.AppendFormat("lala: {0} lili:{1}\n", a.success, a.msg));
} 
```

# iphone - 返回按钮通知？

> ID：15945925
> 
> 赞同：-1
> 
> 时间：2013-04-11T10:02:41.527
> 
> 标签：iphone, ios

在我的 iPhone 应用程序中，我需要检查用户是否单击了导航控制器中的后退按钮。我认为我应该通过以下方法得到这个：

```
-(void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:animated];

} 
```

我不想覆盖后退按钮事件。如何获取使用单击返回按钮和导航堆栈已更改的信息？

**更新** 是否有可能在 viewDidAppear 方法中知道？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:05:06.237

您可以使用此答案中描述的方法： [在导航控制器中设置后退按钮的操作](https://stackoverflow.com/questions/1214965/setting-action-for-back-button-in-navigation-controller/3445994#3445994)

```
-(void) viewWillDisappear:(BOOL)animated {
    if ([self.navigationController.viewControllers indexOfObject:self]==NSNotFound) {
       // back button was pressed.  We know this is true because self is no longer
       // in the navigation stack.  
    }
    [super viewWillDisappear:animated];
} 
```

希望这会有所帮助，文森特

# qt - 在 qt 中实现 GUI Shell

> ID：15945926
> 
> 赞同：0
> 
> 时间：2013-04-11T10:02:45.443
> 
> 标签：qt, qtgui

我想在 Qt 中使用`QTextEdit`. 我想获取用户命令并在其中打印结果`QTextEdit`。

下面的代码返回的全部内容`QTextEdit`：

```
text_editor.toPlainText().toAscii(); 
```

但我不知道如何区分用户输入的内容和之前打印的内容。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:06:06.097

Use QTextEdit for output. It supports multiple lines and you can control colors using HTML. Then use single line QLineEdit for entering commands. Place the QLineEdit under the QTextEdit and there you have a GUI for a simple command interface! When you enter a command to the QLineEdit, print it to the QTextEdit too, perhaps using different color than the results of the command.

This is much easier than trying to do everything with one widget.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:45:44.250

重新实现按键事件处理程序以完成正常工作，同时也保存用户键入的数据。一旦按下回车，单独保存的文本将被执行，然后被清除。

# linux - Apache Nutch 和 Solr 集成

> ID：15945927
> 
> 赞同：11
> 
> 时间：2013-04-11T10:02:45.643
> 
> 标签：linux, solr, lucene, nutch

我尝试按照[nutch 教程](http://wiki.apache.org/nutch/NutchTutorial#A4._Setup_Solr_for_search "nutch 教程")进行操作，但 schema.xml 文件有点问题。

我被告知 nutch 为我的项目提供了架构，基本上是这个......

```
cp ${NUTCH_RUNTIME_HOME}/conf/schema.xml ${APACHE_SOLR_HOME}/example/solr/conf/ 
```

我已经在 Tomcat 中部署了我的 solr 文件，当我转到 Solr 仪表板时出现的错误是

```
collection1: org.apache.solr.common.SolrException:org.apache.solr.common.SolrException:
Plugin init failure for [schema.xml] fieldType "text": 
Plugin init failure for [schema.xml] analyzer/filter:
Error loading class 'solr.EnglishPorterFilterFactory' 
```

这与我的 solrconfig.xml 文件中的这个元素有关（我可以将其注释掉，但不确定这有多重要）

```
<filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/> 
```

我编辑了我的 solrconfig.xml 以尝试包含一系列 solr 附带的 jar 文件，特别是

```
<lib path="/etc/solr/collection1/libs/dist/solr-core-4.2.1.jar" />
<lib path="/etc/solr/collection1/libs/dist/solr-analysis-extras-4.2.1.jar" /> 
```

但我不认为它们包含缺少的类“solr.EnglishPorterFilterFactory”

有谁知道为什么这可能不起作用或者我错过了什么？顺便说一句，我不是 Java 开发人员，所以毫无疑问它会很简单:)

**更新** 发现架构引用了一些旧类后，我又查看了 nutch/conf 和 tt 看起来有一个 ${NUTCH_RUNTIME_HOME}/conf/schema-solr4.xml 文件似乎可以工作。

如果这是正确的，则不是 100%，但是嘿...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T15:30:26.313

看起来`EnglishPorterFilterFactory`在 4.x 中不再存在。[请参阅它的 3.6.0 文档](http://lucene.apache.org/solr/api-3_6_0/org/apache/solr/analysis/EnglishPorterFilterFactory.html)中的注释：

```
Deprecated.
  Use SnowballPorterFilterFactory with language="English" instead 
```

很多弃用的东西在 4.0 中消失了。我会照它说的做，请参阅[SnowballPorterFilterFactory 的文档](http://lucene.apache.org/core/4_2_0/analyzers-common/org/apache/lucene/analysis/snowball/SnowballPorterFilterFactory.html)。

# sql - 循环遍历sql server trigger中的数据

> ID：15945929
> 
> 赞同：2
> 
> 时间：2013-04-11T10:02:55.523
> 
> 标签：sql, sql-server, loops, select, triggers

我有一个 sql-server 触发器，它在开始时进行选择。该选择返回数百行，我想循环这些行。如何循环返回的数据？

这是我的触发器，我想循环@ProfId

```
Create TRIGGER EmailQueueRaw_Control_Trigger ON EmailQueueRaw FOR INSERT
AS
BEGIN
   SELECT @ProfId= ProfessionalID,@Email= Email from Professionals 
END 
```

我怎样才能循环@ProfId？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T10:17:06.133

﻿试试这个解决方案 -

```
ALTER TRIGGER [LabourAPI].[trg_IOIU_Employee]

   ON [LabourAPI].[Employee]
   INSTEAD OF INSERT, UPDATE

AS BEGIN

    SET NOCOUNT ON;
    SET XACT_ABORT ON;

    DECLARE
          @EmployeeID INT
        , @PersonID INT
        , @TabelNumber VARCHAR(6)
        , @DepartmentUID UNIQUEIDENTIFIER
        , @PositionID INT
        , @DateIn DATETIME
        , @DateOut DATETIME
        , @IsMainWorkPlace BIT
        , @DatePension DATETIME
        , @IsLabourUnionMember BIT
        , @FiringReasonID INT

    DECLARE cur CURSOR LOCAL READ_ONLY FAST_FORWARD FOR
    SELECT
          EmployeeID
        , PersonID
        , TabelNumber
        , DepartmentUID
        , PositionID
        , DateIn
        , DateOut
        , IsMainWorkPlace
        , DatePension
        , IsLabourUnionMember
        , FiringReasonID
    FROM INSERTED

    OPEN cur

    FETCH NEXT FROM cur INTO
          @EmployeeID
        , @PersonID
        , @TabelNumber
        , @DepartmentUID
        , @PositionID
        , @DateIn
        , @DateOut
        , @IsMainWorkPlace
        , @DatePension
        , @IsLabourUnionMember
        , @FiringReasonID

    WHILE @@FETCH_STATUS = 0 BEGIN

        SELECT
              @PersonID 
            , @TabelNumber 
            , @DepartmentUID 
            , @PositionID 
            , @DateIn 
            , @DateOut 
            , @IsMainWorkPlace 
            , @DatePension 
            , @IsLabourUnionMember 
            , @FiringReasonID

        FETCH NEXT FROM employee INTO
              @EmployeeID
            , @PersonID
            , @TabelNumber
            , @DepartmentUID
            , @PositionID
            , @DateIn
            , @DateOut
            , @IsMainWorkPlace
            , @DatePension
            , @IsLabourUnionMember
            , @FiringReasonID

    END

    CLOSE cur
    DEALLOCATE cur

END 
```

# python - Z3：证明两个公式等价时结果错误。Z3错误？

> ID：15945931
> 
> 赞同：2
> 
> 时间：2013-04-11T10:03:04.730
> 
> 标签：python, z3

我想用 Z3 python 证明两个公式 'f' 和 'g' 的等价性。在下面的代码中，基本上 'g' 是 'f' 并添加了一些随机代码。我用 Exists 限定符忽略了 'g' 中的所有随机代码，所以 'f' 和 'g' 实际上是等价的。

```
MI = BitVecSort(32)
MV = BitVecSort(8)
Mem = Array('Mem', MI, MV)

def equivalence(F, G):
    s = Solver()
    s.add(Not(F == G))
    if s.check() == unsat:
        print "Equivalence"
    else:
        print "Inequivalence"

def Select2(M, I): 
    return Concat(Select(M, I+1), Select(M, I))

x, y = BitVecs('x y', 32)

g = True
t = BitVec('t', 32)
g = And(g, t == y)
t2 = BitVec('t2', 16)
g = And(g, t2 == Select2(Mem, t))
t3 = BitVec('t3', 32)
g = And(g, t3 == (t + 2))
y1 = BitVec('y1', 32)
g = And(g, y1 == t)
x1 = BitVec('x1', 32)
g = And(g, x1 == 0)

f = True
x1 = BitVec('x1', 32)
f = And(f, x1 == 0)

equivalence(Exists([t3, t2, t, y, y1, x], g), f) 
```

但是，此脚本返回“不等价”而不是预期的“等价”。实际上，仔细观察，等价中的 s.check() 返回“未知”。

我希望 Z3 能够轻松解决这个小问题，但似乎 Z3 在这里做错了什么。任何想法？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:35:23.693

你得到`unknown`是因为量词。您可以通过应用量词消除来获得预期的答案。我们可以创建一个使用`qe`和求解器的`smt`求解器。我们只需要更换

```
 s = Solver() 
```

和

```
 s = Then('qe', 'smt').solver() 
```

`Then`是一个组合器，它构建一个应用`qe`（量词消除）的策略，然后调用通用 SMT 求解器`smt`。该方法`.solver()`将策略转换为求解器。

我们可以[在这里](http://rise4fun.com/Z3Py/p1pb)测试它。

# php - Android - 在 ListView 中显示背景图片

> ID：15945940
> 
> 赞同：0
> 
> 时间：2013-04-11T10:03:15.947
> 
> 标签：php, android, mysql, listview, imageview

我是android的新手。我已经启动了 android 仅 2 天。我曾尝试在谷歌上搜索在列表视图中制作背景图像所需的操作，但所有代码都太复杂以至于我无法理解，所以请不要投票给我。

我的列表视图应该显示来自服务器的背景图像。我已经完成将我的应用程序连接到服务器。我能够显示`url`图像的。

这是我的php代码：

**安卓首页.php**

```
<?php

$con = mysql_connect("localhost", "load2unet_root", "hzXC3rUm");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("load2unet_db", $con);
$result = mysql_query("SELECT Photo FROM Home ORDER BY HomeID DESC");

while($row = mysql_fetch_assoc($result))
{
    $output[] = $row;
}
print(json_encode($output));
mysql_close($con);

?> 
```

这是我的 .java

**HomeActivity.java**

```
//@SuppressLint("NewApi")

public class HomeActivity extends ListActivity{

//String to display in ListView
String [] hello = {
        "Red",
        "Blue",
        "White",
        "Black",
        "Orange",
        "Pink"
};

ArrayList<String> arrayDataFromServer = new ArrayList<String>();
String array;
String [] thisarray;
@SuppressLint("NewApi")
@Override  
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.activity_home); 

    StrictMode.enableDefaults();
    String result ="";
    InputStream isr = null;
    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new     HttpPost("http://www.mysite.com/android/AndroidHome.php");
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        isr = entity.getContent();

    }
    catch (Exception e)
    {
        Log.e("log_tag", "Error in http connection" +e.toString());
        //resultView.setText("Couldn't connect to database");
    }

    try {
        BufferedReader reader = new BufferedReader(new    InputStreamReader(isr, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null)
        {
            sb.append(line + "\n");
        }

        result = sb.toString();
        Log.e("log_tag", "BufferedReader:" +result);
    }

    catch(Exception e)
    {
        Log.e("log_tag, Error converting result"+e.toString(), result);
    }

    try {
        String s = "";
        JSONArray jArray = new JSONArray(result);

        for (int i = 0; i< jArray.length(); i++)
        {
            JSONObject json = jArray.getJSONObject(i);
            array=json.getString("Photo");
            arrayDataFromServer.add(array);
            Log.e("log_tag", "Array: " +array);
            Log.e("log_tag", "arrayDataFromServer: " +arrayDataFromServer);

        }

    }
    catch (Exception e)
    {
        Log.e("log_tag", "Error Parsing Data"+e.toString());
    }
    setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, arrayDataFromServer));

}
public void onListItemClick(
        ListView parent, View v, int position, long id)
{
    //Toast.makeText(this, "You have selected" + colors[position], Toast.LENGTH_LONG).show();
} 
```

}

**活动主页.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <!-- Main ListView
         Always give id value as list(@android:id/list)
    -->

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

我在想`setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, arrayDataFromServer));`我可以使用一些不同的代码在背景图像中显示它吗？

任何帮助将不胜感激。提前致谢！

**编辑**

```
String urlString = URLEncoder.encode(array);
            URL url = new URL(urlString);
            Bitmap bm = BitmapFactory.decodeStream(url.openConnection().getInputStream());
            Drawable dr = new BitmapDrawable(bm); // that's the bitmap you downloaded from your server
            getListView.setBackground(dr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:09:47.677

回答你的问题：

```
 // you can call this from inside the ListActivity
 Drawable dr = new BitmapDrawable(bitmap); // that's the bitmap you downloaded from your server
 getListView().setBackground(dr); 
```

为菜鸟提供额外建议：

不要使用`StrictMode.enableDefaults();`它来掩盖对不良代码的非常好的保护。学习如何正确地做到这一点。[AsyncTask](https://developer.android.com/reference/android/os/AsyncTask.html)是一个非常流行且非常易于使用的线程平台，您应该使用它。如果您有信心和冒险精神，请使用[更](http://developer.android.com/guide/components/loaders.html)复​​杂但功能更强大的加载器！

# c# - 操作 WHERE 子句中的可选参数

> ID：15945942
> 
> 赞同：3
> 
> 时间：2013-04-11T10:03:22.693
> 
> 标签：c#, asp.net, sql, sqlcommand

我正在开发一个 Web 表单，该表单接收一个字符串，该字符串包含一个带有 SQL 参数的 SQL 查询语句。它为每个参数生成一个 ASP.NET 控件，然后将每个控件的值分配给 SQL 查询字符串的参数，a 将使用该参数`SqlCommand`来填充`DataAdapter`.

**我在管理可选参数时遇到了一些问题。**

前任。

*1）将字符串传递给页面：*

```
string query = "SELECT * FROM Table WHERE Field1=@P1 AND field2=@P2"; 
```

*2）为每个参数生成一个web控件*

```
TextBox P1 = new TextBox();
P1.ID = "P1";
...
TextBox P2 = new TextBox();
P2.ID = "P2";
...
PanelParameters.Controls.Add(P1);
PanelParameters.Controls.Add(P1); 
```

*3）点击将每个参数的值传递给`SqlCommand`as参数：*

```
SqlCommand cmd = new SqlCommand(query, conn);

cmd.Parameters.AddWithValue("@P1", P1.Text);

cmd.Parameters.AddWithValue("@P2", P2.Text); 
```

*4）就在这里，没关系！*

但是如果一个参数是**可选**的，我该如何管理它？

如果 P2 是可选的，则用户无法编译它，在这种情况下我不想设置`P2 = NULL`（设置参数的值`DbNull.Value`），但我希望 P2 将从查询 SQL 中消失。

你能帮助我吗？

*** 更新 *** 我无法编辑收到的查询，因为它包含非常复杂的 SQL 语句。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T10:10:22.623

将您的查询更改为最低限度：

```
string query="SELECT * FROM Table WHERE Field1=@P1 
```

然后将其余部分附加一个条件：

```
if(P2.Text != "")
{
    cmd.Parameters.AddWithValue("@P2",P2.Text);
    query += " AND field2=@P2";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T10:12:20.310

您可以尝试使用 case 语句：

```
SELECT * FROM Table WHERE Field1=@P1 AND CASE WHEN field2= null OR field2= '' THEN field2 ELSE @P2 END 
```

您仍然会发送参数，但如果它为 null 或为空，它将被忽略。

# java - Hibernate加载一个惰性代理，但我只需要PK

> ID：15945944
> 
> 赞同：5
> 
> 时间：2013-04-11T10:03:26.573
> 
> 标签：java, hibernate, jpa

我有这些实体：

```
@Entity
public class Room {

    @ManyToOne(optional=true,fetch=FetchType.LAZY)
    private Player player1;

    ...

}

@Entity
public class Player {

    @Id
    @Column(updatable=false)
    private long id;

    public long getId() {
        return id;
    }

    ...

} 
```

现在，里面的这个语句`Room`...

```
player1.getId(); 
```

...将导致`Player`从数据库中获取整个实体。但是，我只需要`id`它应该已经拥有的主键 （否则它如何获取数据？）。

如何在不触发数据库访问`Player`的情况下访问惰性代理？`id`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T10:23:32.967

Hibernate 应该保持对象的 id 也链接到当前的`Session`. 并且有一个[getIdentifier()](http://docs.jboss.org/hibernate/orm/3.5/javadoc/org/hibernate/Session.html#getIdentifier%28java.lang.Object%29)方法`Session`应该获取 id。文档没有说明它，但通常它不应该初始化对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:08:59.890

`@Column private long playerId`你可以在 Room 实体上有一个属性。您可以调用此属性来获取 id，而无需在事务中调用整个 Player 对象。

这仅在 playerId 也存储在 Room 实体表（或视图等）中时才有效，但我认为它必须是因为它首先需要能够进行连接。

编辑：正如下面提到的@Adam Dyga，这些应该是可插入和可更新的，都为假

```
@Entity
public class Room {

    @ManyToOne(optional=true,fetch=FetchType.LAZY)
    private Player player1;
    @Column(name="id", insertable = false, updatable = false) 
    private long playerId
    ...

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-08T12:50:29.663

我找到了一个更简单的解决方案，即制作`getId()` `final`. 这将防止 Hibernate 在代理中使用延迟获取操作覆盖它，因此它只会返回已知 ID，而不会导致任何问题。

# javascript - 在 jsp/servlet 中提交表单后的单选按钮选择

> ID：15945947
> 
> 赞同：0
> 
> 时间：2013-04-11T10:03:34.140
> 
> 标签：javascript, jsp, servlets

我正在提交带有单选按钮的表单。我希望在提交表单后选中该单选按钮。基本上我在页面上做一些搜索过程。请检查代码。

在我的jsp上。

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <% 
                String buttonvalue = (String) request.getParameter("radio");
        %>
        <%= buttonvalue %>

        <form method="post" action="SearchServlet">

            <script type='text/javascript'>
            var button = "<%= buttonvalue %>";
            if(button == "one")
            {
                alert("1");
                document.getElementById("rdone").checked = true;
                document.getElementById("rdtwo").checked = false;
                document.getElementById("rdthree").checked = false;
            }
            else if(button == "two")
            {
                document.getElementById("rdone").checked = false;
                document.getElementById("rdtwo").checked = true;
                document.getElementById("rdthree").checked = false;   
            }
            else if(button == "three")
            {
                alert("3");
                document.getElementById("rdone").checked = false;
                document.getElementById("rdtwo").checked = false;
                document.getElementById("rdthree").checked = true;
                alert("2");
            }
            else
            {
                    alert("4");
            }
        </script>

            <input id="rdone" type="radio" name="radio" value="one"/>
            <input id="rdtwo" type="radio" name="radio" value="two"/>
            <input id="rdthree" type="radio" name="radio" value="three"/>
            <input type="submit" value="Submit"/>
        </form>
    </body>
</html> 
```

并在 Servlet 中。

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        try 
        {
            System.out.println(request.getParameter("radio"));
            RequestDispatcher dispatcher = request.getRequestDispatcher("/radiobutton.jsp");
            System.out.println("--------------"+request.getParameter("radio"));
            dispatcher.forward(request, response);
        } 
        finally 
        {            
            out.close();
        }

    } 
```

一切正常。但我收到 java 脚本错误。请检查以下屏幕截图。由于这个 java 脚本，我没有得到准确的输出。

![在此处输入图像描述](https://i.stack.imgur.com/FA83H.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:05:18.707

您的脚本出现在单选按钮之前，并且不包含延迟到稍后的函数。

您正在尝试在按钮存在之前对其进行修改。

将脚本移动到 HTML 源代码中的按钮之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-14T15:37:19.610

我想建议您，当您的 JSP 页面提交时，您可以使用以下代码在 servlet 上处理它：

```
 protected void processRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
        {
            response.setContentType("text/html;charset=UTF-8");
            PrintWriter out = response.getWriter();
            try 
            {
                System.out.println(request.getParameter("radio"));
if(request.getParameter("radio")!= "" || request.getParameter("radio")!=null){
 request.setAttribute("radio");
}
                RequestDispatcher dispatcher = request.getRequestDispatcher("/radiobutton.jsp");
                System.out.println("--------------"+request.getParameter("radio"));
                dispatcher.forward(request, response);
            } 
            finally 
            {            
                out.close();
            }

        } 
```

现在在您的 JSP 文件中添加以下行：

```
<input id="rdone" type="radio" name="radio" value="one" <%=((request.getAttribute("radio")!=null && request.getAttribute("radio").toString().equals("one")) ? "checked" : "")%> />
<input id="rdtwo" type="radio" name="radio" value="two" <%=((request.getAttribute("radio")!=null && request.getAttribute("radio").toString().equals("two")) ? "checked" : "")%> />
<input id="rdthree" type="radio" name="radio" value="three" <%=((request.getAttribute("radio")!=null && request.getAttribute("radio").toString().equals("three")) ? "checked" : "")%> /> 
```

# android - 没有这样的方法 getITelephony 断开呼叫

> ID：15945952
> 
> 赞同：11
> 
> 时间：2013-04-11T10:03:50.947
> 
> 标签：android, broadcastreceiver, android-4.0-ice-cream-sandwich

我想断开 ICS 中的拨出电话。

我的问题首先是我没有在 Gingerbread 的 IC 中进行广播，它工作正常并阻止了呼叫，但在 ICS 中它不是广播。

对于广播，我创建了一项服务，并且我`PHONE_STATE`也在 ICS 中获得广播，但是当我尝试断开呼叫时，我收到错误

```
NO such method name 'getITelephony' 
```

在 ICS 通话中没有断开连接。

我正在使用以下代码使用广播断开呼叫...

```
try{
       TelephonyManager manager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
       Class c = Class.forName(manager.getClass().getName());
       Method m = c.getDeclaredMethod("getITelephony");
       m.setAccessible(true);
       ITelephony telephony = (ITelephony)m.invoke(manager);
       telephony.endCall();
  } catch(Exception e){
       Log.d("",e.getMessage());
  } 
```

[AndroidMaifest.xml](http://pastebin.com/4D46n2WM)

[PhonecallStateBroadcastReceiver.java](http://pastebin.com/kAzrWvaD)

与包名`package com.android.internal.telephony;`

`ITelephony.aidl`

```
interface ITelephony 
{
    boolean endCall();
    void answerRingingCall();
    void silenceRinger();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T19:25:13.310

1）下载这个类：[ITelephony](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/com/android/internal/telephony/ITelephony.java/?v=source&disposition=attachment)

2）在您的项目中的包中添加这个class.java：com.android.internal.telephony

3）在您的清单中添加此权限：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.MODIFY_PHONE_STATE" />
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

这个接收器在应用程序应答器中：

```
<receiver android:name=".CallReceiver" >
   <intent-filter>
     <action android:name="android.intent.action.PHONE_STATE" />
   </intent-filter>
</receiver> 
```

4) 创建 CallReceiver 类：

```
@Override
public void onReceive(Context context, Intent intent) {
    ITelephony telephonyService = getTeleService(context);
    if(telephonyService!=null) {
        try {
            String numberCall = intent.getExtras().getString(TelephonyManager.EXTRA_INCOMING_NUMBER);
            Log.i("TAG", "CALL NUM: " + numberCall);
            if(numberCall.equals(TEST_NUMBER)) {
                telephonyService.endCall();
                Toast.makeText(context, "END CALL: " + numberCall, Toast.LENGTH_LONG).show();
                Log.i("TAG", "END CALL");
            } else {
                Log.i("TAG", "ACCEPT CALL");
            }
        } catch (Exception e) {
            e.printStackTrace();
            Log.i("TAG", "CATCH CALL");
        }
    }
}

private ITelephony getTeleService(Context context) {
    TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
    try {
        Method m = Class.forName(tm.getClass().getName()).getDeclaredMethod("getITelephony");
        m.setAccessible(true);
        return (ITelephony) m.invoke(tm);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:19:01.527

使用反射来访问“getITelephony”在 Android 2.3+ 中不起作用

参考：

[http://hive-mind.org/android-call-blocking](http://hive-mind.org/android-call-blocking)

[您如何以编程方式结束 2.3+ 的通话？](https://stackoverflow.com/questions/10054348/how-do-you-programmatically-end-a-call-on-2-3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-13T09:47:11.880

类 c = Class.forName("android.telephony.TelephonyManager"); 这将解决您的 Android 2.3+ 问题

# c# - SMTP 和 MailMessage 类的模棱两可的输出

> ID：15945954
> 
> 赞同：0
> 
> 时间：2013-04-11T10:03:57.727
> 
> 标签：c#, asp.net, smtp

收件人收到邮件但格式不正确。我正在尝试通过 SMTP 发送消息，如下所示：

**网络配置**：

```
<system.net>
<mailSettings>
  <smtp>
    <network 
      host="smtp.gmail.com" 
      userName ="UserName" 
      password ="Password"
       port="587"/>

  </smtp>
</mailSettings>
</system.net> 
```

**默认.aspx**：

```
protected void Button1_Click(object sender, EventArgs e)
{
        MailAddress from = new MailAddress("mahesh@uiti.5gbfree.com");
        MailAddress to = new MailAddress(DestiEmail.Text); //Gmail Email ID
        MailMessage msg = new MailMessage(from, to);
        msg.Subject = "New User Login Information";
        msg.Body = "User:- " + UserName.Text + " " + "New Loging";
        SmtpClient sc = new SmtpClient();
        sc.EnableSsl = true;
        sc.Send(msg);
 } 
```

上面的代码传输消息，但格式不正确。我检查了 gmail 收件箱，发现 gmail 没有显示发件人地址，而是将“收件人”地址显示为发件人地址。例如我的发件人地址：`mahesh@uiti.5gbfree.com`和收件人地址是：`mwaghela7@gmail.com`但它用作发件人`mwaghela7@gmail.com`地址。

我已经正确绑定了 from 和 to address in`MailAddress`的值，并在 MailMessages 中提供了它的值，但不知道为什么它以错误的形式显示？

MailMessages 类或 SMTP 中是否有问题？我需要做什么来解决这个问题？

# ios - 使用 UIImage 显示 RGB565 原始数据

> ID：15945959
> 
> 赞同：0
> 
> 时间：2013-04-11T10:04:07.890
> 
> 标签：ios, uiimage

我想将 RGB565 原始图像数据保存到 UIImage。可以这样做，还是我必须先转换为 RGB888？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:24:19.843

创建位图上下文，在代码中自己进行转换，然后从上下文创建图像。那是你唯一的选择。也就是说，您也许可以找到一个可以做到这一点的开源库，但我对此表示怀疑。

# javascript - bootstrap-wysihtml5 集成

> ID：15945962
> 
> 赞同：0
> 
> 时间：2013-04-11T10:04:14.833
> 
> 标签：javascript, html, css, twitter-bootstrap, wysihtml5

我使用 Bootstrap 已经有一段时间了，我一直在寻找一个所见即所得的文本编辑器。我在[Github](https://github.com/jhollingworth/bootstrap-wysihtml5/)上遇到了[bootstrap-wysihtml5](http://jhollingworth.github.io/bootstrap-wysihtml5/) ，并认为它可以满足我的需求。我研究了如何将它与标准的 HTML Bootstrap 页面集成。它的依赖项似乎是[bootstrap-wysihtml5.js](https://raw.github.com/jhollingworth/bootstrap-wysihtml5/master/src/bootstrap-wysihtml5.js)、[bootstrap-wysihtml5.css](https://raw.github.com/jhollingworth/bootstrap-wysihtml5/master/src/bootstrap-wysihtml5.css)和[wysihtml5](https://github.com/xing/wysihtml5)。我在获取和包含 CSS 和 JS 文件时没有问题，但我被 wysihtml5 卡住了。如何下载它以及如何集成它？我查看了[http://forums.adobe.com/thread/993552](http://forums.adobe.com/thread/993552)，其中有人得到了它，但经过长时间的搜索，我仍然找不到 wysihtml5 的文件。

**TL;DR：**我在哪里可以下载 wysihtml5 以及如何将它与 HTML 文件集成？谁能给我一个小提琴让我开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:03:18.483

[这](http://github.com/xing/wysihtml5/tree/master/dist)是包含最新编译脚本的分发文件夹。

# linux - 在 Linux 中从 CSV 文件打印一列

> ID：15945964
> 
> 赞同：1
> 
> 时间：2013-04-11T10:04:18.450
> 
> 标签：linux, bash, csv

我有一个非常愚蠢的问题，我以为我可以很容易地回答自己……好吧，我做不到。

我有一个文件`";"`分隔如下：

```
Grand Hotel  ;Yes;No availability;Dus ;11; . 130,00 ;No availability;500 mt from Arena; 
```

我必须将它打印在一个文件中（将其移动到 Excel 中），如下所示：

```
大酒店
是的
没有可用性
...等等等等

```

如此简单，我只是找不到一个非常简单的解决方案。因为我正在使用 Debian Bash shell 环境，所以我正在尝试任何东西（bash 脚本、awk、grep）......没有任何效果。请帮忙。M。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:10:01.687

所以基本上你想将带有表格行的文件转换`F1;F2;F3;...;FN`为：

```
 F1
 F2
 F3
 ...
 FN 
```

我们可以使用 tr(1) 将分号转换为换行符：

```
tr ';' '\n' < infile 
```

其中“infile”是 CSV 输入文件的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:10:01.637

怎么样`sed`：

```
echo '....' | sed 's/;/\n/g' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T22:37:31.823

假设您的文件长于一行，当所有字段都在单独的行中时，新的*记录分隔符是什么？*

这段 awk 会将每个字段写入一个新行，并在每个记录之间添加一个空行。

```
awk 'BEGIN {FS=";"; OFS="\n"; ORS="\n\n"} {$1=$1} 1' 
```

需要奇数`$1=$1`位来强制 awk 用新的分隔符重写 $0（即当前记录）。

例子：

```
$ awk 'BEGIN {FS=";"; OFS="\n"; ORS="\n\n"} {$1=$1} 1' << END
a;b;c
d;e;f
END 
```

输出

```
a
b
c

d
e
f 
```

# asp.net - 仅使用 <% %> 或等价物向管理员（没有其他人）显示 .ascx 模板的 HTML 的一部分

> ID：15945965
> 
> 赞同：3
> 
> 时间：2013-04-11T10:04:19.823
> 
> 标签：asp.net, dotnetnuke

我在客户的 DotNetNuke 网站上远程工作，扩展现有的 HTML 模板。客户要求在审核之前必须隐藏这些新内容。

有没有办法可以隐藏模板的部分 HTML 并只向管理员显示？

我理想地寻找这样的东西：

```
<div>
    <% Admin Only %>
        <p>Only administrators can see this!</p>
    <% End Admin Only %>
    <p>Everyone can see this</p>
</div> 
```

（我对 ASP.NET 不是很熟悉，所以我不确定 <% %> 表示法是什么。）

这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T04:02:20.250

创建一个方法并使用 ASP.NET 内联表达式调用此方法，如下所示。

IF语言是**VB**

```
<script runat="server">
    Public Function IsUserAdmin() As Boolean
        Dim uinfo As DotNetNuke.Entities.Users.UserInfo = DotNetNuke.Entities.Users.UserController.GetCurrentUserInfo()
        If uinfo.UserID <> -1 Then
            If uinfo.IsInRole(DotNetNuke.Entities.Portals.PortalSettings.Current.AdministratorRoleName) Then
                Return True
            Else
                Return False
            End If
        Else
            Return False
        End If

    End Function
</script> 
```

和 ASP.NET 内联表达式是

```
<%  If IsUserAdmin() Then%>
       <p>Only administrators can see this!</p>
    <%  End If%> 
```

如果语言是**C#**

```
<script runat="server">
    public bool IsUserAdmin()
    {
        DotNetNuke.Entities.Users.UserInfo uinfo = DotNetNuke.Entities.Users.UserController.GetCurrentUserInfo();
        if (uinfo.UserID != -1)
        {
            if (uinfo.IsInRole(DotNetNuke.Entities.Portals.PortalSettings.Current.AdministratorRoleName))
                return true;
            else
                return false;
        }
        else
        {
            return false;
        }

    }
</script> 
```

和 ASP.NET 内联表达式是

```
<% if (IsUserAdmin()) %>
    <%
       { %>
       <p>Only administrators can see this!</p>
    <% } %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:37:42.743

试试这个，在必要时替换用于确定角色成员资格和是否审查内容的代码：

```
<div>
    <% if (Page.User.IsInRole("administrator") || objContent.IsReviewed)
     {%>
        <p>Only administrators can see this!</p>
    <% }%>
    <p>Everyone can see this</p>
</div> 
```

实际上，DNN 是 VB 对吧？如果是这样：

```
<div>
    <% If Page.User.IsInRole("administrator") Or objContent.IsReviewed Then%>
        <p>Only administrators can see this!</p>
    <% End If%>
    <p>Everyone can see this</p>
</div> 
```

# java - WAS 6.1 IBMJCE 提供程序生成错误的 sha256withrsa 签名

> ID：15945969
> 
> 赞同：17
> 
> 时间：2013-04-11T10:04:37.023
> 
> 标签：java, encryption, websphere-6.1

我们正在使用 Java 安全 API 生成数字签名 (PKCS7)。摘要算法是SHA-256，加密算法是RSA（SHA256withRSA）。

使用本地计算机中的 SunRsaSign 提供程序，在某些内容上生成了签名。使用 WAS 8.0.0.2 中的 IBMJCE 提供程序，我们能够在相同的内容上生成相同的签名。

但是，问题是，我们不得不迁移回 WAS 6.1。现在，生成的签名与上述两种情况下生成的签名不同。我检查了在所有 3 种情况下创建的消息摘要，在所有 3 种情况下都是相同的，但在 WAS 6.1 的情况下签名不同。

WAS 6.1 的 IBMJCE 提供程序在 SHA256withRSA 加密方面是否存在任何已知问题？任何指针将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-24T13:28:11.863

真的有问题吗？据我所知，这必须适用

```
signature = sign(message)  
verify(signature) == message 
```

不要求所有签名必须相同。那么你真的对这些签名的验证有问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T16:02:28.067

我们遇到了同样的问题，我们强迫 Webspshere 使用 SUNJCE。以下是步骤。

所以在 IBM Websphere 控制台中，转到应用程序服务器 > 服务器 > 进程定义 > Java 虚拟机

查找通用 JVM 参数并添加以下内容。

```
-DamCryptoDescriptor.provider=SunJCE -DamKeyGenDescriptor.provider=SunJCE 
```

然后复制

```
C:\JAVA\jdk1.6.0_34\jre\lib\ext\sunjce_provider.jar 
```

至

```
C:\Program Files\IBM\SDP\runtimes\base_v7\java\jre\lib\ext\sunjce_provider.jar 
```

改变

```
C:\Program Files\IBM\SDP\runtimes\base_v7\java\jre\lib\security\java.security 
```

通过将以下 Sun 提供程序添加到 java.security 文件中的提供程序列表中。

```
#This will help Websphere to load 
security.provider.13=com.sun.crypto.provider.SunJCE
security.provider.14=sun.security.provider.Sun
security.provider.15=sun.security.rsa.SunRsaSign
security.provider.16=sun.security.jgss.SunProvider 
```

希望这可以帮助。

# macos - 用于 Common Lisp 程序的 OS X 捆绑包

> ID：15945972
> 
> 赞同：0
> 
> 时间：2013-04-11T10:04:36.287
> 
> 标签：macos, lisp, bundle, common-lisp

所以我用 Common Lisp 写了一个程序，现在让它在 OSX 中运行。我有一个“unix 可执行文件”，它是在使用 :executable t 转储图像时创建的。

我的问题始于如何将程序放在扩展坞上（我最终创建了可执行文件的别名并将其附加到垃圾箱所在的“堆栈”区域）。但是，每当我单击别名时，它首先启动终端，然后终端调用可执行文件。

所以我的问题是如何让它在不调用 CLI 的情况下直接启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:48:45.523

好的，所以在尝试了几件事之后，我得出的结论是，我在上面找到的解决方案，虽然它让我创建了`.app`可从 OSX 的 Finder 调用的包，但要么不完整，要么我只是不知道如何让我的系统读取我手动创建`info.plist`的我将语言设置`LSEnvironment`为 UTF-8 的位置。XCode 不会打开文件，说它已损坏，尽管我只是复制了一个现有文件并编辑了条目。

所以我最终写了一个脚本来调用我的程序：

```
#!/bin/zsh
open -a ~/bin/locker 
```

然后我使用[Platypus](http://sveinbjorn.org/platypus)从脚本创建了一个`.app`包，它就可以工作了！我仍然必须将语言设置`LSEnvironment`为 UTF-8，这是使用 XCode 完成的，这次它没有进行比较，以前的（手动创建的）`info.plist`文件是用 Emacs 编写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:43:46.467

很高兴你解决了你的主要问题。关于本地化问题，如果您通过终端运行应用程序并预​​先添加 LANG=en_US.UTF-8，会发生什么？

如需更通用的解决方案，请查看以下两个链接：[cocoabuilder](http://www.cocoabuilder.com/archive/cocoa/92321-changing-the-locale-for-single-app.html)、[mactipsandtricks](http://www.mactipsandtricks.com/articles/Wiley_HT_appBundles2.lasso)

# java - 删除 Substance LAF 中 JTabbedPane 上的内容填充

> ID：15945977
> 
> 赞同：2
> 
> 时间：2013-04-11T10:04:52.423
> 
> 标签：java, swing, look-and-feel, jtabbedpane, substance

我正在用 Substance LAF 做一些实验，我正在尝试删除选项卡之间的填充。使用默认用户界面，我使用：

```
UIManager.getDefaults().put("TabbedPane.contentBorderInsets", new Insets(0,0,0,0));
UIManager.getDefaults().put("TabbedPane.tabsOverlapBorder", true); 
```

，但这不适用于 Substance ，它似乎提供了自己的价值观。如何使用 Substance 达到相同的效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:34:24.127

感谢@mKorbel 提供的信息，我发现我可以通过使用设置`SubstanceLookAndFeel.TABBED_PANE_CONTENT_BORDER_KIND`来实现相同的效果`SubstanceConstants.TabContentPaneBorderKind.SINGLE_PLACEMENT`

[http://insubstantial.github.io/insubstantial/substance/docs/clientprops/TabbedPaneContentBorderKind.html](http://insubstantial.github.io/insubstantial/substance/docs/clientprops/TabbedPaneContentBorderKind.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:44:33.727

*   此值无法通过使用 UIManager for JTabbedPane 来覆盖，

*   这是一个很常见的问题，大多数方法都受到保护（无论它们是否作为 UIManager 中的键发布）而不覆盖自己的 BasicTabbedPaneUI

* * *

*   物质

![在此处输入图像描述](https://i.stack.imgur.com/G48pk.jpg)

```
javax.swing.plaf.InsetsUIResource[top=4,left=4,bottom=4,right=4]
false 
```

*   金属（跨平台）

![在此处输入图像描述](https://i.stack.imgur.com/rIri7.jpg)

```
java.awt.Insets[top=4,left=2,bottom=3,right=3] 
false 
```

*   雨云

![在此处输入图像描述](https://i.stack.imgur.com/RaNP3.jpg)

```
null
null 
```

系统（Java6上的win8）

![在此处输入图像描述](https://i.stack.imgur.com/nI8Zx.jpg)

```
javax.swing.plaf.InsetsUIResource[top=2,left=2,bottom=3,right=3]
true 
```

*   键的值是形式`Instets(0,0,0,0)`还是 InsetsUIResource(0,0,0,0)都没有关系

最初由 Kirill 修改的代码

```
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import org.pushingpixels.substance.api.DecorationAreaType;
import org.pushingpixels.substance.api.SubstanceLookAndFeel;
import org.pushingpixels.substance.api.skin.BusinessBlueSteelSkin;
import org.pushingpixels.substance.api.skin.OfficeBlack2007Skin;
import org.pushingpixels.substance.api.skin.OfficeBlue2007Skin;

/**
 * Test application that shows the use of the
 * {@link SubstanceLookAndFeel#getDecorationType(java.awt.Component)} API called
 * on different components.
 *
 * @author Kirill Grouchnikov
 * @see SubstanceLookAndFeel#getDecorationType(java.awt.Component)
 */
public class GetDecorationType /*extends JFrame*/ {

    private static final long serialVersionUID = 1L;
    private static JFrame frame = new JFrame();

    /**
     * Creates the main frame for
     * <code>this</code> sample.
     */
    public GetDecorationType() {
        frame.setTitle("Get decoration type");
        frame.setLayout(new BorderLayout());
        final JTabbedPane tabs = new JTabbedPane();
        SubstanceLookAndFeel.setDecorationType(tabs, DecorationAreaType.HEADER);
        JPanel tab1 = new JPanel(new FlowLayout());
        tab1.add(new JTextField("sample"));
        final JComboBox combo = new JComboBox(new Object[]{"sample"});
        tab1.add(combo);
        SubstanceLookAndFeel.setDecorationType(tab1, DecorationAreaType.GENERAL);
        JPanel tab2 = new JPanel(new FlowLayout());
        tab2.add(new JTextField("sample2"));
        tab2.add(new JComboBox(new Object[]{"sample2"}));
        SubstanceLookAndFeel.setDecorationType(tab2, DecorationAreaType.GENERAL);
        tabs.addTab("tab1", tab1);
        tabs.addTab("tab2", tab2);
        frame.add(tabs, BorderLayout.CENTER);
        JPanel controlPanel = new JPanel(new FlowLayout(FlowLayout.RIGHT));
        JButton getTypes = new JButton("Get types");
        getTypes.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        DecorationAreaType tabsType = SubstanceLookAndFeel.getDecorationType(tabs);
                        DecorationAreaType comboType = SubstanceLookAndFeel.getDecorationType(combo);
                        JOptionPane.showMessageDialog(frame, "Tabbed pane: " + tabsType.getDisplayName()
                                + "\n" + "Combo box: " + comboType.getDisplayName());
                    }
                });
            }
        });
        controlPanel.add(getTypes);
        frame.add(controlPanel, BorderLayout.SOUTH);
        frame.setSize(400, 200);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }

    /**
     * The main method for
     * <code>this</code> sample. The arguments are ignored.
     *
     * @param args Ignored.
     */
    public static void main(String[] args) {
        JFrame.setDefaultLookAndFeelDecorated(true);
        JDialog.setDefaultLookAndFeelDecorated(true);
        try {
            for (UIManager.LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
            /*UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());*/
        } catch (Exception e) {
            return;
        }
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                //SubstanceLookAndFeel.setSkin(new BusinessBlueSteelSkin());
                //SubstanceLookAndFeel.setSkin(new OfficeBlack2007Skin());
                SubstanceLookAndFeel.setSkin(new OfficeBlue2007Skin());
                UIManager.put("TabbedPane.contentOpaque", Boolean.TRUE);
                System.out.println(UIManager.getDefaults().get("TabbedPane.contentBorderInsets"));
                System.out.println(UIManager.getDefaults().get("TabbedPane.tabsOverlapBorder"));
                UIManager.getDefaults().put("TabbedPane.contentBorderInsets", new javax.swing.plaf.InsetsUIResource(0, 0, 0, 0));
                UIManager.getDefaults().put("TabbedPane.tabsOverlapBorder", true);
                SwingUtilities.updateComponentTreeUI(frame);
                new GetDecorationType()/*.setVisible(true)*/;
            }
        });
    }
} 
```

# solr - 将 Neo4j 导出为 csv 文件

> ID：15945978
> 
> 赞同：1
> 
> 时间：2013-04-11T10:04:57.547
> 
> 标签：solr, neo4j

我有一个场景，我使用 Neo4j 存储数据，使用 Solr 存储建议数据。假设我为字段 'area' 获得了新值，那么我必须在 Neo4j(obviosuly) 和 Solr 中更新它，以便我可以向其他用户建议输入新的 'area'。在 Solr 中如此频繁地更新记录可能代价高昂。那么应该采取怎样的策略呢？

我正在考虑做什么......随着新区域的进入，我将在 Neo4j 中更新它。但我只会批量更新 Solr（在定期的时间间隔之后）。因此，如果我可以将 Neo4j 导出到某个 file.csv，然后我会将这个文件更新到 Solr，它将解决我的问题。

所以这方面的任何帮助....

# android - Xstream Ambigious xml 标签

> ID：15945979
> 
> 赞同：1
> 
> 时间：2013-04-11T10:05:01.327
> 
> 标签：android, xml, serialization, xstream, ambiguity

我正在开发一个 Android 项目，该项目使用 API 来获取它的数据。现在首先，我不能对 API 进行任何更改，因为它也用于已经发布的 iPhone 应用程序中。所以我必须解决这个问题。

我正在尝试使用 XStream 从 API 读取 XML。一切进展顺利，XStream 运行良好且轻松。直到我偶然发现一个带有模棱两可标签的 API 调用。API 返回的 XML 如下：

```
<response>
    <plant>
        <Name />
        <Description />
        <KeyValues>
            <entry>
                <Key />
                <Value />
            </entry>
            <entry>
                <Key />
                <Value />
            </entry>
            <entry>
                <Key />
                <Value />
            </entry>
        </KeyValues>
        <Tasks>
            <entry>
                <Title />
                <Text />
            </entry>
            <entry>
                <Title />
                <Text />
            </entry>
        </Tasks>
    </plant>
</response> 
```

如您所见，标签 KeyValues 都包含标签 Tasks 包含条目标签。我遇到的问题是我无法将条目标记专门别名为我拥有的 java 类。我的植物类如下所示：

```
public class Plant extends BaseModel {
    private String Name;
    private String Description;

    private List<KeyValue> KeyValues;
    private List<Task> Tasks;
} 
```

其中 KeyValue 和 Task 类本质上是两个入口类。但是当我尝试反序列化 xml 时，出现以下错误：

```
com.thoughtworks.xstream.converters.ConversionException: Cannot construct java.util.Map$Entry as it does not have a no-args constructor : Cannot construct java.util.Map$Entry as it does not have a no-args constructor
---- Debugging information ----
message             : Cannot construct java.util.Map$Entry as it does not have a no-args constructor
cause-exception     : com.thoughtworks.xstream.converters.reflection.ObjectAccessException
cause-message       : Cannot construct java.util.Map$Entry as it does not have a no-args constructor
class               : java.util.Map$Entry
required-type       : java.util.Map$Entry
converter-type      : com.thoughtworks.xstream.converters.reflection.ReflectionConverter
ath                : /response/plant/KeyValues/entry
line number         : 1
class[1]            : java.util.ArrayList
converter-type[1]   : com.thoughtworks.xstream.converters.collections.CollectionConverter
class[2]            : com.example.android.stadseboeren.model.Plant
version             : 0.0
------------------------------- 
```

我知道在 xml 中使用模棱两可的标签并不是一个理想的情况，但我现在无法改变它。

有没有人可以帮我解决这个问题？

干杯大安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:43:08.003

好的，所以要成为一个好公民，我会在这里发布答案，因为我想通了。

最终我最终创建了一个额外的类，它本质上只是条目列表的持有者。

```
public class KeyValues extends BaseModel {

    @XStreamImplicit(itemFieldName="entry")
    private ArrayList<KeyValueEntry> entries;
} 
```

使用 XStreamImplicit 我可以将条目对象绑定到我的数组列表。

这不是最漂亮的解决方案，但它有效。

# php - Ajax：在没有实际文件的情况下发送文件信息

> ID：15945983
> 
> 赞同：0
> 
> 时间：2013-04-11T10:05:05.843
> 
> 标签：php, ajax, file-upload

我正在编写一个替换 C++ 程序的 Web 应用程序。该应用程序的目标是从浏览器添加或拍摄图片，然后将其上传到服务器。

文件的上传有两个主要步骤，检查文件是否已经存在于服务器上，如果不存在，则上传文件。

我想知道如何在没有实际文件内容的情况下在 Ajax 中进行第一步（发送文件（PHP 脚本使用 $_FILES，我无法更改））。

C++ 代码如下所示：

```
*dataBuffer_ += QByteArray("--") + QByteArray(MULTIPART_BOUNDARY) + QByteArray("\r\n");
*dataBuffer_ += QByteArray("content-disposition: form-data; name=\"expected_size\"\r\n\r\n");
*dataBuffer_ += fileSize.toAscii() + QByteArray("\r\n");

//original size
//Original size of the file before compression and encoding
*dataBuffer_ += QByteArray("--") + QByteArray(MULTIPART_BOUNDARY) + QByteArray("\r\n");
*dataBuffer_ += QByteArray("content-disposition: form-data; name=\"original_size\"\r\n\r\n");
*dataBuffer_ += QString::number(file.size()).toAscii() + QByteArray("\r\n");

//tell upload.php that we have a file to upload
*dataBuffer_ += QByteArray("--") + QByteArray(MULTIPART_BOUNDARY) + QByteArray("\r\n");
*dataBuffer_ += QByteArray("content-disposition: form-data; name=\"mode\"\r\n\r\n");
*dataBuffer_ += QByteArray("check_file\r\n");

//the binary
*dataBuffer_ += QByteArray("--") + QByteArray(MULTIPART_BOUNDARY) + QByteArray("\r\n");
*dataBuffer_ += QByteArray("content-disposition: form-data; name=\"file\"; filename=\"") + file.fileName().toAscii() + QByteArray("\"\r\n");
*dataBuffer_ += QByteArray("content-type: application/zip\r\n\r\n");
*dataBuffer_ += fileBuffer;  
*dataBuffer_ += QByteArray("\r\n");

*dataBuffer_ += QByteArray("--") + QByteArray(MULTIPART_BOUNDARY) + QByteArray("--"); 
```

我想做这样的事情：

```
var form = new FormData();
form.append("expected_size", expected_size);
form.append("original_size", original_size);
form.append("mode", "check_file");
form.append("file", fileInput.files[0]);

var xhr = new XMLHttpRequest();
xhr.open('POST', action, true);
xhr.send(formData); 
```

该脚本将文件信息与实际文件一起发送，而我只想发送文件信息。有人知道我该怎么做吗？

这是 PHP 脚本（我无法修改）：

```
//check if the file was already uploaded to the server (for resuming an upload)
//returns file:exist or file:not_exist
//the post is the same as when transmitting a file, except the data block
if ('check_file' == $_POST['mode'])
 {
     echo "CHECK FILE\n";
  if (!file_exists($_SESSION['localdir']))
  {
    echo "upload:fail\n";
    echo "message:Unable to copy data on server\n";
    exit();
  }

  if (empty($_FILES))
  {
    echo "upload:fail\n";
    echo "message:No files were uploaded to the server\n";
    exit();
  }

    $file = $_FILES['file'];
  $path = $_SESSION['localdir'] . "/" . $file['name'];

    if (file_exists($path))
    {
        echo $file['name'] . "  already exists on the server \n";
        echo "Server file size: " . filesize($path) . "\n";
        echo "Uploaded file size: " . $_POST['original_size'] . " \n";

        if (filesize($path) == $_POST['original_size'])
        {
            echo "file:exist\n";

            //add the file to the global list if it is not already there
            if (!array_search($file['name'], $_SESSION['filenames'], true)) //true=strict
                array_push($_SESSION['filenames'], $file['name']);
        }
        else
            echo "file:not_exist\n";
    }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T17:51:01.903

我通过手动设置我的标题（如上面的 c++ 代码），我的 AJAX 来完成它：

```
var boundary = generateBoundary();

var databuffer = "\r\n";
// set original_size
databuffer += "--" + boundary + "\r\n";
databuffer += "content-disposition: form-data; name=\"original_size\"\r\n\r\n";
databuffer += allFiles[index].size + "\r\n";
// set mode
databuffer += "--" + boundary + "\r\n";
databuffer += "content-disposition: form-data; name=\"mode\"\r\n\r\n";
databuffer += "check_file\r\n";
// set the file
databuffer += "--" + boundary + "\r\n";
databuffer += "content-disposition: form-data; name=\"file\"; filename=\"" + allFiles[index].name + "\"\r\n";
databuffer += "content-type: application/zip\r\n\r\n";
databuffer += ""; // this is de file content => empty
databuffer += "\r\n";
// end
databuffer += "--" + boundary + "--"; 
```

这会发送带有所需信息的文件，但没有实际的文件内容。我希望这对其他人有所帮助。

# php - str_split 并从 mysql 获取数据

> ID：15945985
> 
> 赞同：0
> 
> 时间：2013-04-11T10:05:09.480
> 
> 标签：php, mysql

也许有人可以帮助我解决这个问题。这对我来说有点棘手。

我用 _GET 指代一个长数字（如 102030）。现在我想把这个长数字分成更短的数字（比如 10 20 30）。这个短数字是我在mysql数据库中的id，我想用它们获取所有id_name的foreach短数字（如name-10 name-20 name-30）。

为了拆分长数字，我使用了 str_split，但我现在不知道如何使用这个数组。

这是我的代码。（数据库包含在此代码之前）

```
<?php
$long_id =$_GET[long_id];

if($_SESSION['test']) {
foreach($_SESSION['test'] as $split_id => $number) {

$split_id = str_split( $long_id, 2);

                $result = mysql_query("SELECT id, id_name FROM names"); 
//Here is my WHERE missing, because it's not working with split_id...
                list($id, $id_name) = mysql_fetch_row($result);
                while($row = mysql_fetch_array($result)){
                echo $id_name;

                }
}
} else {
   echo "test is empty";
}
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:07:13.573

改变这个

```
 $long_id =$_GET[long_id]; 
```

至

```
 $long_id =$_GET['long_id']; 
```

你可以试试这个

```
 $result = mysql_query("SELECT id, id_name FROM names WHERE id= '$split_id[0]' "); 
```

如果您还想要其他数字，这将查找前两个数字

你可以添加

```
 OR id= '$split_id[1]' OR  id= '$split_id[2]' .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:13:46.467

让我们假设 $_GET['long_id'] 持有值“102030”。

那么你的 where 应该是这样的：

```
WHERE id=$split_id[0] OR id2=$split_id[1] OR id3=$split_id[2] 
```

要仅显示所有单独的 id，您可以执行以下操作：

```
$long_id =$_GET[long_id];
foreach ($split_id as $id)
{
  echo "This is a id: ".$id."<br />";
} 
```

输出：这是一个 id：10 这是一个 id：20 这是一个 id：30

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:10:28.893

好的。与其在粗略的设计道路上大打出手，不如让我们重新考虑一下您的设计。

**您的数据**

你有一个很长的数字，`102030`然后你把它分开。请问，怎么做？您没有分隔符。PHP如何知道一个数字从哪里开始，一个数字在哪里结束？看来您已经确定了“每两个字符”。这是相当严格的代码。

我建议采用 CSV 方法，并使用逗号分隔数字。这样，如果您必须调试，它对您来说更具可读性，并且代码将更加灵活。这意味着您可以拥有`1`或`4904909`作为 ID，而不是`01`.

**您的数据库连接**

您正在使用*已弃用的代码*！不再支持已弃用的代码，并且在更高版本的 PHP 中，*将不工作*。您需要将代码更新为[mysqli](http://php.net/manual/en/book.mysqli.php)或使用[PDO](http://php.net/manual/en/book.pdo.php)对象。

# php - 计算数组中项目数的问题 - 计数未显示

> ID：15945986
> 
> 赞同：1
> 
> 时间：2013-04-11T10:05:11.510
> 
> 标签：php, multi-select

我正在尝试将用户选择从多选表单捕获到 PHP 中，以便我可以将用户选择与所需内容相匹配。以下是 HTML：

```
<tr>
<!-- <label for="DutiesDesc">Duties Description:&nbsp;</label><textarea name="DutiesDesc" cols="30" rows="5" /></textarea>-->
<td><label for="DutiesDesc">Job Attributes:</label></td>
<td><select name="DutiesDesc[]" size="<?php $items ?>" multiple="multiple">

<?php while($row = mysql_fetch_array($attribid)) 
{ ?>
<option value="<?php echo $row['AttribName']?>"><?php echo $row['AttribName']?></option>

<?php }?>
   </select></td>
</tr> 
```

选项显示正确，以下部分是我获取用户输入并将其存储在数组中以备后用的地方。另请注意，显示的多选框选项是从 MySQL 数据库中检索的。

```
//Array to store user input from the multiselect box

$SkillsArray = $_POST['DutiesDesc'];
//Count the number of items in the array
$counter = count($SkillsArray); 
```

仅出于测试目的，我计算了数组中的项目数并将它们显示为：

```
echo $counter; 
```

但我收到以下错误：

> 注意：未定义的索引：在 $counter 上。

我认为这可能意味着`$skillsarray`没有任何值或用户选择的选项没有保存到变量中。请协助。

# jquery - 带有内联点击的 Jquery 表单计算器要清理

> ID：15945987
> 
> 赞同：0
> 
> 时间：2013-04-11T10:05:11.563
> 
> 标签：jquery, forms, onchange

我可怕的表单有所有内联点击。我想知道是否有人可以帮助我清理这个烂摊子，因为我需要正确运行它。在 Fido 上，我只能使用内联，这很糟糕。我希望有人能帮忙！

[http://jsfiddle.net/HdhCr/10/](http://jsfiddle.net/HdhCr/10/)

**内联JS**

```
 function calc_total() {
        f=document.etg_p_print_form;
        t=document.etg_p_print_form.total_price;
        tt=0;

        for(i=1;i<17;i++)
        {
            if (f.elements['abo_single['+i+']'])
            {

                if(f.elements['abo_single['+i+']'].length>0)
                {
                    if(f.elements['abo_single['+i+']'][0].checked==true)
                    {
                        var tpr = f.elements['price_abo['+i+']'].value*f.elements['quantity['+i+']'].value;
                        var tpr2 = f.elements['price_abo['+i+']'].value*f.elements['quantity['+i+']'].value;
                        tpr_repl=number_format(tpr);
                        tpr_repl_num=tpr_repl.lastIndexOf('.');
                        f.elements['sum['+i+']'].value=tpr_repl.substring(0,tpr_repl_num)+'.'+tpr_repl.substring(tpr_repl_num+1,tpr_repl.length);
                        tt +=tpr2;
                    } else {
                        var tpr = f.elements['price_single['+i+']'].value*f.elements['quantity['+i+']'].value;
                        var tpr2 = f.elements['price_single['+i+']'].value*f.elements['quantity['+i+']'].value;
                        tpr_repl=number_format(tpr);
                        tpr_repl_num=tpr_repl.lastIndexOf('.');
                        f.elements['sum['+i+']'].value=tpr_repl.substring(0,tpr_repl_num)+'.'+tpr_repl.substring(tpr_repl_num+1,tpr_repl.length);

                        tt +=tpr2;
                    }
                } else {
                    if(f.elements['abo_single['+i+']'].value=='abo')
                    {
                        var tpr = f.elements['price_abo['+i+']'].value*f.elements['quantity['+i+']'].value;
                        var tpr2 = f.elements['price_abo['+i+']'].value*f.elements['quantity['+i+']'].value;
                        tpr_repl=number_format(tpr);
                        tpr_repl_num=tpr_repl.lastIndexOf('.');
                        f.elements['sum['+i+']'].value=tpr_repl.substring(0,tpr_repl_num)+'.'+tpr_repl.substring(tpr_repl_num+1,tpr_repl.length);
                        tt +=tpr2;
                    } else {
                        var tpr = f.elements['price_single['+i+']'].value*f.elements['quantity['+i+']'].value;
                        var tpr2 = f.elements['price_single['+i+']'].value*f.elements['quantity['+i+']'].value;
                        tpr_repl=number_format(tpr);
                        tpr_repl_num=tpr_repl.lastIndexOf('.');
                        f.elements['sum['+i+']'].value=tpr_repl.substring(0,tpr_repl_num)+'.'+tpr_repl.substring(tpr_repl_num+1,tpr_repl.length);
                        tt +=tpr2;
                    }
                }
            } 
        }
        tt_repl=number_format(tt);
        tt_repl_num=tt_repl.lastIndexOf('.');
        t.value=tt_repl.substring(0,tt_repl_num)+'.'+tt_repl.substring(tt_repl_num+1,tt_repl.length);
    }

    function number_format(val)
        {
            var nval='';
            var nnval='';
            var val=val.toFixed(2);
            for(ii=0;ii<val.length;ii++)
            {
                var tval=eval(ii+1);

                pos=eval(val.length-tval);
                nval += val.substr(pos,1);

                var test_val=eval(tval);
                var test_val=eval(test_val/3);
                if(test_val==test_val.toFixed(2) && tval!=val.length && eval(test_val)!=1)
                {
                    nval += '\'';
                }
            }
            for(z=0;z<nval.length;z++)
            {
                var ntval=eval(z+1);
                var npos=eval(nval.length-ntval);
                nnval += nval.substr(npos,1);
            }
            return nnval;
        }
</script> 
```

**HTML**

```
<form action=" " method="post" name="etg_p_print_form"  class="form-calculator">
<input type="radio" name="abo_single[1]" value="abo" checked onChange="calc_total();" onClick="calc_total();" />
<input type="hidden" name="price_abo[1]" value="529" />
<br>
<input type="radio" name="abo_single[1]" value="single" onChange=";calc_total();" onClick="calc_total();" />
<input type="hidden" name="price_single[1]" value="90" />
<br>
how many?
<input type="text" class="input" name="quantity[1]" value="0" size="2" maxlength="2" onChange="if(isNaN(this.value)) { alert('HELLO'); this.value=0; } calc_total();" />
<br>
   <br> 
price<input type="hidden" name="tit_prod[1]" value="EurotaxListe PKW" />
529.00
<input type="text" class="input" name="sum[1]" value="0.-" readonly onChange="calc_total();" />
<br>

<p>Total
<input type="text" name="total_price" value="0.-" readonly  onChange="calc_total();" />
 </p>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:11:17.410

如果您只想去除内联`onClick`属性，可以这样做：

```
$('form.form-calculator input').on('change', function() {
    calc_total();
} 
```

**编辑**

```
$('form.form-calculator input').on('change,click', function() {
    if ($(this).val() === 0) {
        alert('HELLO');
        this.value=0;
    }

    calc_total();
} 
```

# jquery-ui - jQueryUI 选项卡和 jqGrid 初始化问题

> ID：15945991
> 
> 赞同：0
> 
> 时间：2013-04-11T10:05:29.173
> 
> 标签：jquery-ui, jqgrid, tabs, rotation, head

我对 jqGrid 的使用是在 Tabs 导航中插入的，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/cOmwp.png)

其中第一行用于主选项卡，第二行用于每个主选项卡的子选项卡，第三行用于每个子选项卡的 opttabs。面板中的每个页面都是一个带有 jqGrid 的独立脚本。

问题在于在初始化时会旋转标题列的脚本：

![在此处输入图像描述](https://i.stack.imgur.com/jj7kr.png)

如果这个脚本是我在浏览器打开后第一次启动，一切都很好。但是每次我在单击其他选项卡后运行此脚本时，都不会执行某些任务，例如，不会执行旋转并且宽度不会缩小到浏览器宽度： ![在此处输入图像描述](https://i.stack.imgur.com/7pOlk.png)![在此处输入图像描述](https://i.stack.imgur.com/ucqwN.png)

非常感谢您驱使我解决这个问题，无论如何都要解决它。祝你有美好的一天

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:35:45.970

您可以尝试执行在第一次激活选项卡时旋转列标题的脚本（函数）。目前网格将*可见*，并且一切都应该正常工作。*我想您在旋转隐藏*网格的列标题时遇到问题。如果您使用新版本的 oj jQuery UI，则可以使用回调`activate`或事件处理程序；如果您使用旧版本的 jQuery UI，则可以使用回调或事件处理程序。`"tabsactivate"``select``"tabsselect"`

# javascript - jQuery 验证在更改特定设置值时失败

> ID：15945996
> 
> 赞同：0
> 
> 时间：2013-04-11T10:05:41.537
> 
> 标签：javascript, jquery, onchange

在检查学生分数输入字段的分数时，我遇到了一个奇怪的验证错误。

输入`id`保持最大标记与输入的值进行比较（在当前情况下为 35）。因此，如果用户输入的值小于 35 或 35，则其可接受但不大于 35..但在当前情况下，它会打破 100 或更大的值。

保持简单和简短，我`HTML`是这样的 -

```
<input type="text" value="30" id="studentname[98989898][marks-35_compid-1_subid-12]" name="studentname[98989898][marks-35_compid-1_subid-12]" style="width:50px;text-align:center"> 
```

我的**jQuery**代码 -

```
jQuery(document).ready(function() {
      jQuery("input[type='text']").on('change', function(event) {
      var colId = event.target.id;
      var maxMarksSplit=colId.split("marks-");
      var maxMarks = maxMarksSplit[1].split("_compid"); 
      alert("Max marks " + maxMarks[0] );
      if( jQuery(this).val() > maxMarks[0] )
      {
      alert("Please check your value!" );
      jQuery(this).val(0);
      }
      });
}); 
```

工作小提琴**演示**--> [http://jsfiddle.net/swapnesh/ktKE3/](http://jsfiddle.net/swapnesh/ktKE3/)

小于的值的测试通过，`100`但大于或等于的值则失败`100`。

让我知道这种奇怪的验证行为以及我在逻辑上做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:25:37.940

You're comparing to the wrong value. maxMarks is the split array, you want to compare to maxMarks[0].

Also, you need to parse the inputs as they'll both be pulled as strings:

```
 jQuery("input[type='text']").on('change', function(event) {
  var colId = event.target.id;
  var maxMarksSplit=colId.split("marks-");
  var maxMarks = maxMarksSplit[1].split("_compid"); 
  alert("Max marks " + maxMarks[0] );
  if( parseInt(jQuery(this).val()) + parseInt(maxMarks[0]) )
  {
      alert("Please check your value!" );
      jQuery(this).val(0);
  }
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:25:40.630

The problem is located in your comparison, you compare your value with maxMarks instead of maxMarks[0]

```
jQuery(document).ready(function() {
  jQuery("input[type='text']").on('change', function(event) {
  var colId = event.target.id;
  var maxMarksSplit=colId.split("marks-");
  var maxMarks = maxMarksSplit[1].split("_compid"); 
  alert("Max marks " + maxMarks[0] );
  if( jQuery(this).val() > parseInt(maxMarks[0]) ) // Here the modification
  {
  alert("Please check your value!" );
  jQuery(this).val(0);
  }
  }); 
```

});

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T10:24:24.957

“parseFloat”可能会有所帮助

尝试这个

```
jQuery(document).ready(function() {
  jQuery("input[type='text']").on('change', function(event) {
  var colId = event.target.id;
  var maxMarksSplit=colId.split("marks-");
  var maxMarks = maxMarksSplit[1].split("_compid"); 
  alert("Max marks " + maxMarks[0] );
  if( parseFloat(jQuery(this).val()) > parseFloat(maxMarks))
  {
  alert("Please check your value!" );
  jQuery(this).val(0);
  }
  });
}); 
```

# asp.net - TextboxChanged 事件未在更新面板中触发

> ID：15945998
> 
> 赞同：0
> 
> 时间：2013-04-11T10:05:45.240
> 
> 标签：asp.net, ajax, textbox, updatepanel

我想在 UpdatePanel 中触发 TextBox 的 TextChanged 事件，这样我就可以对用户的输入做一些事情。

到目前为止，我想出的是以下代码：

```
<asp:GridView ID="gdBestellliste" AutoGenerateColumns="false" runat="server"
                    Width="100%" AllowPaging="false" GridLines="Horizontal" EnableModelValidation="true"
                    BorderColor="#6893CF" PagerStyle-BackColor="#F0F0F0" HeaderStyle-Height="20" ShowFooter="false">
     <Columns>

          <asp:TemplateField HeaderText="Amount to order" HeaderStyle-BorderStyle="None" HeaderStyle-HorizontalAlign="left" HeaderStyle-Width="70px"
                             ItemStyle-HorizontalAlign="left" ItemStyle-Wrap="false" ItemStyle-VerticalAlign="Middle" ItemStyle-CssClass="DataCell">

               <ItemTemplate>
                    <asp:UpdatePanel runat="server">
                         <ContentTemplate>
                              <asp:TextBox runat="server" ID="tbProductLookup" OnTextChanged="tbProductLookup_Changed" AutoPostBack="true"></asp:TextBox>
                         </ContentTemplate>
                    </asp:UpdatePanel>
               </ItemTemplate>

          </asp:TemplateField>

     </Columns>

</asp:GridView> 
```

我的问题是，当我在文本框中进行输入，然后 TextChanged 事件尝试触发时，我从 Internet Explorer 调试器中收到错误消息：

```
Sys.WebForms.PageRequestManagerServerErrorException: GUID should contain 32 digits with 4 dashes 
```

它永远不会到达我为 TextChanged 事件定义的代码隐藏方法。

那么我做错了什么？任何帮助将不胜感激 ：）

**更新：** 似乎我的问题的一部分是我的错误信息。我假设更新面板只会加载后面需要的代码部分，我现在了解到这是完全错误的。因此，在我的代码中的某个地方创建了一个空 GUID，这最终导致了 PageRequestManagerServerErrorException。

很好，最后我没有收到任何错误消息，但我仍然无法使用 TextChanged 事件。

我不知道这是否有任何帮助，但我发现当我第一次在我的 TextBox 中写一些东西并离开它时，什么也没有发生。但是，当我在 TextBox 中写入内容并再次将其保留时，会发生回发（非异步）。

这到底是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T15:03:17.050

首先：感谢所有试图帮助我解决问题的人。你是我喜欢 stackoverflow 的唯一原因。

我的问题似乎起源于我的代码背后，因为我通过注释掉后面的代码中的所有内容并仅实现基本功能（设置 Datasource 并将其绑定到 GridView，定义由 TextChanged 事件调用的方法）来解决它。

对于所有偶然发现与我相同的问题并碰巧阅读此内容的人，如果您想在网格视图的更新面板中创建 TextChanged 事件，我想展示您必须实施的事情：

ASPX 文件：

```
 <form id="form1" runat="server">
<asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
        </asp:ToolkitScriptManager>
    <div>
        <asp:GridView ID="yourGridviewID" runat="server">
            <Columns>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:UpdatePanel runat="server">
                            <ContentTemplate>
                                <asp:TextBox ID="yourTextboxId" OnTextChanged="yourTextboxId_Changed" runat="server" AutoPostBack="true"></asp:TextBox>
                            </ContentTemplate>
                        </asp:UpdatePanel>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>

    </div>
</form> 
```

代码背后：

```
protected void Page_Load(object sender, EventArgs e) {
        //The following code from here
        DataTable dt = new DataTable();
        dt.Rows.Add(dt.NewRow());
        gdBestellliste.DataSource = dt;
        gdBestellliste.DataBind();
        //to here can vary. It depends on how you want/need to bind data to your gridview 
        //with this code I just wanted to show an empty gridview row where I can test this solution
    }

    protected void tbProductLookup_Changed(object sender, EventArgs e) {
        //Just writing WTF to the textbox at OnTextChanged event. Do whatever you need to do ;)
        TextBox tb = (TextBox)sender;
        tb.Text = "WTF";
    } 
```

如果放在一起，实际上只有三个重要部分可以完成这项工作：

1.  AJAX 工具包脚本管理器
2.  使用 OnTextChanged 定义在文本框中触发 TextboxChanged 事件时调用的方法（当然该方法也必须存在于后面的代码中；））
3.  将文本框中的 AutoPostBack 设置为 true

希望这可以帮助某人摆脱我太久以来遭受的同样痛苦:)

**更新：** 我刚刚发现 Codebehind 中的什么导致 TextboxChanged 事件没有发生。就像我在更新我的问题时所说的那样：代码隐藏文件的所有内容都将由更新面板加载。但是由于我只在没有回发的情况下设置数据源并在页面加载时绑定了gridview，尽管由于updatepanel正确显示了gridview，但gridview没有加载，因此事件不会发生。为了仍然不能在回发时设置数据源，我找到了以下简单的解决方案：

```
if(!IsPostBack || YourToolkitScriptManagerID.IsInAsyncPostBack) SetDatasource(); 
```

因此，Updatepanel 在启动异步回发时完全了解 Gridview。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:14:26.370

在后面添加以下行 **`</ContentTemplate>`**

```
<Triggers>
  <asp:AsyncPostBackTrigger ControlID="txtboxid" EventName="TextChanged" >
</Triggers> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:45:25.817

您的更新面板没有“ID”

```
 <asp:UpdatePanel runat="server">
                     <ContentTemplate>
                          <asp:TextBox runat="server" ID="tbProductLookup" OnTextChanged="tbProductLookup_Changed" AutoPostBack="true"></asp:TextBox>
                     </ContentTemplate>
                </asp:UpdatePanel>
           </ItemTemplate> 
```

`<asp:UpdatePanel ID="MyID" runat="server">`如果您仍然无法触发它，请尝试在 page_load 事件中写入您的 ID

```
TextBox tbProductLookup = (TextBox)MyUpdatePanelID.FindControl("tbProductLookup");
ScriptManager.GetCurrent(Page).RegisterAsyncPostBackControl(tbProductLookup);
            UpdatePanelControlTrigger trigger = new PostBackTrigger();
            trigger.ControlID = tbProductLookup.UniqueID;
            UpdatePanel1.Triggers.Add(trigger); 
```

如果你不能访问更新面板

```
UpdatePanel MyUpdatePanel = (UpdatePanel)mygridview1.FindControl("MyUpdatePanel"); 
```

写这个代码..我希望可以帮助你。

# internet-explorer - 在 IE10 Kiosk 模式下限制快捷键

> ID：15945999
> 
> 赞同：3
> 
> 时间：2013-04-11T10:05:54.050
> 
> 标签：internet-explorer, batch-file

我正在创建一个在 IE10 上运行的网页。我需要创建一个批处理文件以在信息亭模式下启动 webstie。我在批处理文件中使用了以下代码

```
Start "" iexplore.exe -k "file:///C:/MySite/index.html" 
```

这将在 IE kiosk 模式下打开我的页面。但我的要求是用户只使用 Alt+F4 关闭网站。应限制所有其他功能键（例如“Windows+D”、“Alt+Tab”）。可以在批处理文件中吗？如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-29T13:27:41.443

这些链接包含有关该主题的一些有用信息。

看起来已经提出了一个非常相似的问题，解决方案包括安装“自动热键”程序，然后创建一个脚本来重新映射热键，并让您的“信息亭”脚本在每次运行时调用它。您可能还想创建第二个脚本，以便在需要时“反转”映射。

链接：[禁用 Ctrl-Alt-Del 并关闭 kiosk](https://stackoverflow.com/questions/4234242/disable-ctrl-alt-del-and-shutdown-for-kiosk)

链接：[http ://www.autohotkey.com/](http://www.autohotkey.com/)

链接：[http ://answers.microsoft.com/en-us/windows/forum/windows_7-desktop/how-do-i-change-the-windows-7-keyboard-shortcuts/0110d32d-66c0-4ce7-8682- eeb896e80c3f](http://answers.microsoft.com/en-us/windows/forum/windows_7-desktop/how-do-i-change-the-windows-7-keyboard-shortcuts/0110d32d-66c0-4ce7-8682-eeb896e80c3f)