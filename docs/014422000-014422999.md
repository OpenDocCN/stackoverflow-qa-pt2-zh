# StackOverflow 问答 14422000-14422999

# jquery - 如何根据哪个字段可见来验证字段？

> ID：14422000
> 
> 赞同：0
> 
> 时间：2013-01-20T05:36:56.783
> 
> 标签：jquery, ruby-on-rails-3, jquery-validate

我将 JQuery Validation 插件的逻辑放在哪里，以根据哪个可见字段来验证字段？

```
<%= form_for @contact, html: { class: "form-horizontal" } do |f| %>

  <div class="control-group">
    <%= f.label :name, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :name, class: 'required' %>
    </div>
  </div>

  <div class="control-group">
    <%= f.label "How would you like to be contacted?", :class => 'control-label' %>
    <div class="controls">
      <div class="btn-group" data-toggle="buttons-radio">
        <button class="btn" type="button" name="contact_type" id="email_button" value="email">
          Email
        </button>
        <button class="btn" type="button" name="contact_type" id="telephone_button" value="phone">
          Telephone
        </button>
      </div>
    </div>
  </div>

  <div class="control-group" id="email">
    <%= f.label :email, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :email %>
    </div>
  </div>

  <div class="control-group" id="telephone">
    <%= f.label :telephone, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :telephone %>
    </div>
  </div>

  <div class="control-group">
    <div class="controls">
      <%= f.submit "Submit", class: "btn btn-primary" %>
    </div>
  </div>
<% end %> 
```

JavaScript

```
$(document).ready(function() {
  $('#email').hide();
  $('#telephone').hide();

  var email = false;
  var telephone = false;

  $('#email_button').click(function() {
    $('#email').show();
    $('#telephone').hide();

    email = true;
    telephone = false;
  });
  $('#telephone_button').click(function() {
    $('#telephone').show();
    $('#email').hide();

    telephone = true;
    email = false;
  });

  jQuery.validator.addMethod("phoneUS", function(phone_number, element) {
    phone_number = phone_number.replace(/\s+/g, "");
    return this.optional(element) ||
        phone_number.match(/^[2-9]\d{2}-[2-9]\d{2}-\d{4}$/);
  }, "Please specify a valid phone number");

  $('#new_contact').validate({
    ignore: ":hidden",
    rules: {
      'contact[name]': {
        required: true
      },
      'contact[email]': {
        required: true,
        email: true
      },
      'contact[telephone]': {
        required: true,
        phoneUS: true
      },
      'contact[description]': {
        required: true
      }
    },

    messages: {
      'contact[name]': {
        required: "Please provide a name."
      },
      'contact[telephone]': {
        required: "Please provide a valid telephone number."
      },
      'contact[description]': {
        required: "Please provide a description of the work you would like done."
      }
    },

    errorPlacement: function(error, element) {
      error.appendTo("#error");
    }

  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T05:41:43.537

忽略不可见的输入。

```
$("form").validate({ignore:":not(:visible)"}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T05:46:13.543

您可以在插件中使用忽略属性

```
$("#new_contact").validate({
  //All your options go here
  ignore: ':hidden'
}); 
```

# vba - 使用公式生成超链接时，VBA 无法打开 Excel 超链接

> ID：14422003
> 
> 赞同：4
> 
> 时间：2013-01-20T05:38:11.483
> 
> 标签：vba, excel, hyperlink, formula

使用公式生成的 Excel 超链接似乎存在错误。我正在使用 Excel 2010。我有一个包含 URL 的单元格的电子表格，我的目标是做以下两件事：

1.  将这些单元格变成超链接。
2.  创建一个键盘快捷键来打开这些超链接，这样我就不必使用鼠标了。

要做#1，最初我只是使用了函数`=HYPERLINK()`。所以，我的 URL 在 column`A`中，我使用这个公式在 column 中创建超链接`B`。

`Ctrl`要执行 #2，我创建了以下宏，它应该使用键盘快捷键+打开超链接`H`：

```
Sub Open_Hyperlink()
'
' Open_Hyperlink Macro
'
' Keyboard Shortcut: Ctrl+h
'
    Selection.Hyperlinks(1).Follow NewWindow:=False, AddHistory:=True
End Sub 
```

问题是这个宏似乎只适用于不是使用公式创建的超链接。例如，如果我只是输入一个单元格`http://www.google.com`，Excel 会自动将其设为超链接，并且键盘快捷键宏可以工作，而它不适用于公式生成的超链接。

我还注意到，当我右键单击公式生成的超链接时，下拉菜单中没有打开超链接的选项，但右键单击不是由公式生成的超链接时有该选项。

我找到了以下解决方法。我没有使用公式生成超链接，而是使用了在[这里](https://stackoverflow.com/questions/2595692/how-do-i-convert-a-column-of-text-urls-into-active-hyperlinks-in-excel/2595806#2595806)找到的宏。

```
Sub HyperAdd()

'Converts each text hyperlink selected into a working hyperlink

For Each xCell In Selection
    ActiveSheet.Hyperlinks.Add Anchor:=xCell, Address:=xCell.Formula
Next xCell

End Sub 
```

我可以使用键盘快捷键打开使用此宏生成的超链接。我想知道是否有人遇到过类似的问题，以及为什么公式生成的超链接对我不起作用。我将来更喜欢使用公式制作超链接，因为它更简单，所以如果有人知道避免使用宏制作超链接的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T09:06:30.183

> 我想知道是否有人遇到过类似的问题，以及为什么公式生成的超链接对我不起作用。

唉，这似乎是一个痛苦的事实：Excel 没有添加到`Hyperlinks`集合公式生成的链接 - 下面是调试器中指向的屏幕`=HYPERLINK("http://www.google.com/";"Google")`：

![单元格超链接集合](../Images/cc899ce15e3c4aa43ca5116bb6341077.png)

我不确定这是故意实现还是错误，但是是的，可能无法使用`Hyperlinks().Follow`方法打开公式生成的链接。

但是，如果您要使用键盘快捷键打开链接，只需使用以下代码 - 它会自动转换为可点击链接选定的单元格文本并打开它：

```
Sub Open_Hyperlink()
    Selection.Hyperlinks.Add Anchor:=Selection, Address:=Selection.Formula
    Selection.Hyperlinks(1).Follow NewWindow:=False, AddHistory:=True
End Sub 
```

只需分配任何快捷方式，您就可以开始了）这里是示例：[https ://www.dropbox.com/s/d4cie7lun22quma/FollowLinks.xlsm](https://www.dropbox.com/s/d4cie7lun22quma/FollowLinks.xlsm)

希望这会有所帮助。祝你好运！

# java - 两个不同程序之间的事件处理

> ID：14422007
> 
> 赞同：2
> 
> 时间：2013-01-20T05:38:31.873
> 
> 标签：java, swing

我有两个不同的程序`MenuWindow.java`和`SettingsWindow.java` 两个 GUI，都是使用 Swing 制作的。是否可以`SettingsWindow.java`通过单击中的按钮打开`MenuWindow.java`？

这里有两个代码：

## 菜单窗口.java

```
import java.awt.*;
import javax.swing.*;

public class MenuWindow
{
JFrame f ;
JMenuBar m ;
JMenu File , Settings , Timer , Programs , Store , Run , Help ;
JMenuItem m1 , m2 , m3 , m4 , m5 , m6 , m7 , m8 , m9 , m10 , m11 , m12 ;
JButton jb1, jb2, jb3 , jb4 , jb5 , jb6;

public MenuWindow() 
{

    f = new JFrame("Reflow") ;
    f.setSize(600, 600) ;
    m = new JMenuBar() ;
    File = new JMenu("File") ;
    Settings = new JMenu("Settings") ;
    Timer = new JMenu("Timer") ;
    Programs = new JMenu("Programs") ;
    Store = new JMenu("Store");
    Run = new JMenu("Run");
    Help = new JMenu("Help");
    m1 = new JMenuItem("Exit") ;
    m2 = new JMenuItem("Temperature") ;
    m3 = new JMenuItem("Clock") ;
    m4 = new JMenuItem("Profile") ;
    m5 = new JMenuItem(" Weekly Timer") ;
    m6 = new JMenuItem("Preset Programs") ;
    m7 = new JMenuItem("Errors") ;
    m8 = new JMenuItem("Profile") ;
    m9 = new JMenuItem("Auto Run") ;
    m10 = new JMenuItem("Profile Run") ;
    m11 = new JMenuItem("Manual Run") ;
    m12 = new JMenuItem("About");

    ImageIcon SettingsIc = new ImageIcon("settings.png");
    jb1 = new JButton(SettingsIc);
    jb1.setFocusPainted( false );
    //jb1.setBorderPainted(false); 
    jb1.setContentAreaFilled(false); 

    ImageIcon TimerIc = new ImageIcon("clock.png");
    jb2 = new JButton(TimerIc);
    jb2.setFocusPainted( false );
    //jb2.setBorderPainted(false); 
    jb2.setContentAreaFilled(false); 

    ImageIcon ProgramsIc = new ImageIcon("programs.png");
    jb3 = new JButton(ProgramsIc);
    jb3.setFocusPainted( false );
    //jb3.setBorderPainted(false); 
    jb3.setContentAreaFilled(false); 

    ImageIcon StoreIc = new ImageIcon("store.png");
    jb4 = new JButton(StoreIc);
    jb4.setFocusPainted( false );
    //jb4.setBorderPainted(false); 
    jb4.setContentAreaFilled(false); 

    ImageIcon RunIc = new ImageIcon("run.png");
    jb5 = new JButton(RunIc);
    jb5.setFocusPainted( false );
    //jb5.setBorderPainted(false); 
    jb5.setContentAreaFilled(false); 

    ImageIcon ConnectIc = new ImageIcon("connect.png");
    jb6 = new JButton(ConnectIc);
    jb6.setFocusPainted( false );
    //jb6.setBorderPainted(false); 
    jb6.setContentAreaFilled(false); 

    File.add(m1) ;
    Settings.add(m2) ;
    Settings.add(m3) ;
    Settings.add(m4) ;
    Timer.add(m5) ;
    Programs.add(m6) ;
    Store.add(m7);
    Store.add(m8);
    Run.add(m9);
    Run.add(m10);
    Run.add(m11);
    Help.add(m12);
    m.add(File) ;
    m.add(Settings) ;
    m.add(Timer) ;
    m.add(Programs) ;
    m.add(Store) ;
    m.add(Run) ;
    m.add(Help) ;
    f.add(m) ;
    f.add(jb1);
    f.add(jb2);
    f.add(jb3);
    f.add(jb4);
    f.add(jb5);
    f.add(jb6);

    jb1.setToolTipText("Settings");
    jb2.setToolTipText("Weekly Timer");
    jb3.setToolTipText("Program List");
    jb4.setToolTipText("Store");
    jb5.setToolTipText("Run");
    jb6.setToolTipText("Connect");

    System.out.println(System.getProperty("user.dir"));

    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setJMenuBar(m);
    f.setLayout(new FlowLayout()) ;
    f.setVisible(true) ;

}

public static void main(String[] arg)
{
        MenuWindow w = new MenuWindow() ;

}

} 
```

## 设置窗口.java

```
import java.awt.*;
import javax.swing.*;

public class SettingsWindow 
{

JFrame f;
JButton b1, b2, b3; 

public SettingsWindow() 
{
    f = new JFrame ("Settings") ;
    f.setSize(400, 400) ;

    ImageIcon TempuratureIc = new ImageIcon("heat.png");
    b1 = new JButton(TempuratureIc);
    b1.setFocusPainted(false);
    //b1.setBorderPainted(false);
    b1.setContentAreaFilled(false);

    ImageIcon TimeIc = new ImageIcon("timetable.png");
    b2 = new JButton(TimeIc);
    b2.setFocusPainted(false);
    //b2.setBorderPainted(false);
    b2.setContentAreaFilled(false);

    ImageIcon ProfileIc = new ImageIcon("graph.png");
    b3 = new JButton(ProfileIc);
    b3.setFocusPainted(false);
    //b3.setBorderPainted(false);
    b3.setContentAreaFilled(false);

    f.add(b1);
    f.add(b2);
    f.add(b3);

    b1.setToolTipText("Temperature Settings");
    b2.setToolTipText("Time Settings");
    b3.setToolTipText("Profile Settings");

    System.out.println(System.getProperty("user.dir"));

    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setLayout(new FlowLayout());
    f.setVisible(true);

}

public static void main(String[] arg)
{
    SettingsWindow w = new SettingsWindow() ;
}

} 
```

谁能详细解释一下？我对 Java 很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T05:43:08.863

`SettingWindow`将对象的引用传递给`MenuWindow`. `setVisible`并在 MenuWindow 类中单击按钮操作时使用方法。

**更新 - 1：**

将 ActionListener 添加到 jb1（我假设这是调用 SettingsWindow 的按钮）并`SettingWindow`在单击按钮时调用。

```
 jb1.addActionListener(new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent arg0) {
        new SettingWindow();
    }
}); 
```

也`main`从`SettingWindow`班级中删除。这不是必需的。

**更新 - 2：**

在您的代码中，您添加了一个类似以下代码的按钮：

```
ImageIcon SettingsIc = new ImageIcon("settings.png");
jb1 = new JButton(SettingsIc);
jb1.setFocusPainted(false);
jb1.setContentAreaFilled(false);
jb1.addActionListener(new ActionListener() {

  @Override
  public void actionPerformed(ActionEvent arg0) {
     new SettingWindow();
  }
 }); 
```

所以你添加了一个按钮。单击按钮时，应调用一个动作。向此按钮写入一个`ActionListener`，以便它弹出相应的窗口。类似地，创建不同的窗口并通过`ActionListener`像我上面所说的那样写入所有按钮来调用它们。另请阅读[如何编写 ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T05:53:52.190

在`SettingWindow`，类构造函数中，添加`mnuwindow=new MenuWindow(this);`. 在`MenuWindow`类构造函数中，添加`frame.setVisible(false);`. 在`mouseClicked(MouseEvent me)`添加`mnuwindow.getframe().setVisible(true);`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T07:24:11.250

请参阅[使用多个 JFrame，好/坏做法？](https://stackoverflow.com/a/9554657/418556)

使用模态`JDialog`或 a`JOptionPane`代替第二个“子”窗口。

![在此处输入图像描述](../Images/0f5ae4c934122239d9e2922afe84e550.png)

```
package menuwindow;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class MenuWindow {

    JFrame f;
    JMenuBar m;
    JMenu File, Settings, Timer, Programs, Store, Run, Help;
    JMenuItem m1, m2, m3, m4, m5, m6, m7, m8, m9, m10, m11, m12;
    JButton jb1, jb2, jb3, jb4, jb5, jb6;

    public MenuWindow() {

        f = new JFrame("Reflow");
        f.setSize(600, 600);
        m = new JMenuBar();
        File = new JMenu("File");
        Settings = new JMenu("Settings");
        Timer = new JMenu("Timer");
        Programs = new JMenu("Programs");
        Store = new JMenu("Store");
        Run = new JMenu("Run");
        Help = new JMenu("Help");
        m1 = new JMenuItem("Exit");
        m2 = new JMenuItem("Temperature");
        m3 = new JMenuItem("Clock");
        m4 = new JMenuItem("Profile");
        m5 = new JMenuItem(" Weekly Timer");
        m6 = new JMenuItem("Preset Programs");
        m7 = new JMenuItem("Errors");
        m8 = new JMenuItem("Profile");
        m9 = new JMenuItem("Auto Run");
        m10 = new JMenuItem("Profile Run");
        m11 = new JMenuItem("Manual Run");
        m12 = new JMenuItem("About");

        Icon SettingsIc = UIManager.getIcon("OptionPane.questionIcon");
                //new ImageIcon("settings.png");
        ActionListener al = new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                new SettingsWindow(f);
            }
        };
        jb1 = new JButton(SettingsIc);
        jb1.addActionListener(al);
        jb1.setFocusPainted(false);
        //jb1.setBorderPainted(false); 
        jb1.setContentAreaFilled(false);

        ImageIcon TimerIc = new ImageIcon("clock.png");
        jb2 = new JButton(TimerIc);
        jb2.setFocusPainted(false);
        //jb2.setBorderPainted(false); 
        jb2.setContentAreaFilled(false);

        ImageIcon ProgramsIc = new ImageIcon("programs.png");
        jb3 = new JButton(ProgramsIc);
        jb3.setFocusPainted(false);
        //jb3.setBorderPainted(false); 
        jb3.setContentAreaFilled(false);

        ImageIcon StoreIc = new ImageIcon("store.png");
        jb4 = new JButton(StoreIc);
        jb4.setFocusPainted(false);
        //jb4.setBorderPainted(false); 
        jb4.setContentAreaFilled(false);

        ImageIcon RunIc = new ImageIcon("run.png");
        jb5 = new JButton(RunIc);
        jb5.setFocusPainted(false);
        //jb5.setBorderPainted(false); 
        jb5.setContentAreaFilled(false);

        ImageIcon ConnectIc = new ImageIcon("connect.png");
        jb6 = new JButton(ConnectIc);
        jb6.setFocusPainted(false);
        //jb6.setBorderPainted(false); 
        jb6.setContentAreaFilled(false);

        File.add(m1);
        Settings.add(m2);
        Settings.add(m3);
        Settings.add(m4);
        Timer.add(m5);
        Programs.add(m6);
        Store.add(m7);
        Store.add(m8);
        Run.add(m9);
        Run.add(m10);
        Run.add(m11);
        Help.add(m12);
        m.add(File);
        m.add(Settings);
        m.add(Timer);
        m.add(Programs);
        m.add(Store);
        m.add(Run);
        m.add(Help);
        f.add(m);
        f.add(jb1);
        f.add(jb2);
        f.add(jb3);
        f.add(jb4);
        f.add(jb5);
        f.add(jb6);

        jb1.setToolTipText("Settings");
        jb2.setToolTipText("Weekly Timer");
        jb3.setToolTipText("Program List");
        jb4.setToolTipText("Store");
        jb5.setToolTipText("Run");
        jb6.setToolTipText("Connect");

        System.out.println(System.getProperty("user.dir"));

        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setJMenuBar(m);
        f.setLayout(new FlowLayout());
        f.setVisible(true);

    }

    public static void main(String[] arg) {
        MenuWindow w = new MenuWindow();

    }
}

class SettingsWindow {

    JFrame f;
    JButton b1, b2, b3;

    public SettingsWindow(Container c) {
        JPanel f = new JPanel(new FlowLayout());
        //f.setSize(400, 400);

        Icon TempuratureIc = UIManager.getIcon("OptionPane.warningIcon");
        b1 = new JButton(TempuratureIc);
        b1.setFocusPainted(false);
        //b1.setBorderPainted(false);
        b1.setContentAreaFilled(false);

        Icon TimeIc = UIManager.getIcon("OptionPane.errorIcon");
        b2 = new JButton(TimeIc);
        b2.setFocusPainted(false);
        //b2.setBorderPainted(false);
        b2.setContentAreaFilled(false);

        Icon ProfileIc = UIManager.getIcon("OptionPane.informationIcon");
        b3 = new JButton(ProfileIc);
        b3.setFocusPainted(false);
        //b3.setBorderPainted(false);
        b3.setContentAreaFilled(false);

        f.add(b1);
        f.add(b2);
        f.add(b3);

        b1.setToolTipText("Temperature Settings");
        b2.setToolTipText("Time Settings");
        b3.setToolTipText("Profile Settings");

        System.out.println(System.getProperty("user.dir"));

        //f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        //f.setLayout();
        //f.setVisible(true);

        JOptionPane.showMessageDialog(c, f, "Settings", JOptionPane.QUESTION_MESSAGE);
    }
} 
```

# ios - 方法和返回值计算有问题

> ID：14422009
> 
> 赞同：0
> 
> 时间：2013-01-20T05:38:35.523
> 
> 标签：ios, objective-c, cocoa-touch

我创建了一种计算简单计算的方法。

我希望该方法返回一个 int 并采用 2 个 int 参数。

我创建了一个名为计算的类。我将计算导入 viewController.m 并创建了一个动作 2 textFields 和一个文本标签。我正在使用此视图来测试该方法。我的方法在计算中返回 0。我究竟做错了什么？这很简单，但我似乎无法弄清楚我在哪里犯了错误。这是代码。

计算.h

```
#import <Foundation/Foundation.h>

@interface Calculation : NSObject

@property (nonatomic) int odometerStart;
@property (nonatomic) int odometerEnd;
@property (nonatomic) int odometerTotal;

- (int)mileageStart:(int)start mileageEnd: (int)end;    

@end 
```

计算.m

```
#import "Calculation.h"

@implementation Calculation
@synthesize odometerEnd, odometerStart, odometerTotal;      

- (int)mileageStart:(int)start mileageEnd:(int)end
{
    odometerStart = start;
    odometerEnd = end;
    odometerTotal = end - start;        
    return odometerTotal;
} 
@end 
```

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface MileageViewController : UIViewController
- (IBAction)calculateMileage:(id)sender;
@property (strong, nonatomic) IBOutlet UITextField *startLabel;
@property (strong, nonatomic) IBOutlet UITextField *endLabel;
@property (strong, nonatomic) IBOutlet UILabel *displayLabel;
@end 
```

视图控制器.m

```
#import "MileageViewController.h"
#import "Calculation.h"

@implementation MileageViewController
@synthesize startLabel;
@synthesize endLabel;
@synthesize displayLabel;

- (void)viewDidUnload
{
    [self setStartLabel:nil];
    [self setEndLabel:nil];
    [self setDisplayLabel:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (IBAction)calculateMileage:(id)sender {        
    Calculation *mileage = [[Calculation alloc] init];

    int odomStart = [[startLabel text] intValue];
    int odomEnd = [[endLabel text ] intValue];
    [mileage mileageStart:odomStart mileageEnd:odomEnd];
    mileage.odometerTotal = displayLabel.text.intValue;
    NSLog(@"THe total is %d", mileage.odometerTotal); 
```

我的总数一直等于 0。计算没有被计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T05:44:26.903

你的说法是倒退的。您正在尝试将 odometerTotal 的值设置为标签的值，但您希望它反过来。它应该是：

displayLabel.text = [NSString stringWithFormat:@"%d",mileage.odometerTotal];

但是，mileage 返回一个 int 值，因此您实际上并不需要 Calculation 类中的 odometerTotal 属性。你可以这样做：

```
displayLabel.text = [NSString stringWithFormat:@"%d",[mileage mileageStart:odomStart mileageEnd:odomEnd]]; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-20T07:03:52.083

我看了整个程序，你做的作业好像错了，

粗体表示如下：

**mileage.odometerTotal = displayLabel.text.intValue;**

您想使用计算类来计算总值。而顺序应该相反。

这个怎么样：

```
displayLabel.text.iniValue = mileage.odometerTotal; 
```

然后使用该`NSLog`方法打印您的预期结果。

# .net - 存储层方法返回类型

> ID：14422014
> 
> 赞同：1
> 
> 时间：2013-01-20T05:39:15.160
> 
> 标签：.net, unit-testing

```
public void SaveStatus(Status newStatus); 
```

上述方法将一些新状态保存到数据库中。它是否应该返回诸如布尔标志之类的东西来指示保存操作的成功或失败。

在编写单元测试时，我遇到了一个关于我断言的问题，是否`SaveStatus()`成功。如果没有抛出异常，在单元测试的情况下可以认为是成功的。

这方面的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T05:44:14.923

不，这没有意义。从返回 void 的函数返回值是无效的。不过，您可以返回布尔值。从您调用的函数中获得所需的输出只不过是它的成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T16:47:02.843

**不**

该方法的名称让我们清楚地知道它的契约：它必须保存状态。当一个方法由于任何原因不能做它必须做的事情时，它必须抛出一个异常，这就是 OOP 的工作方式。如果您返回错误代码或标志，您将在所有调用者中结束以下内容：

```
if(xxx.SaveStatus(newStatus)){
   // do something
}
else
{
   // and here.. what? return another boolean???? Ignore it???? ummmm
} 
```

如果它失败了，你会得到一个异常，这就足够了。

在您的 UT 中，您必须断言新状态已保存，为此您必须使用例如存储库或您正在使用的任何东西来模拟您的数据库访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T16:52:41.057

不，不应该。这将明显违反[Command Query Separation](http://en.wikipedia.org/wiki/Command-query_separation)。一个方法应该要么返回一些东西，要么改变一些状态，而不是两者兼而有之**。**

由于您使用的是 .NET，因此您应该利用异常来指示失败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T16:56:39.067

抛出异常表示失败。这允许您包含应用程序逻辑可以用来决定如何处理故障的故障详细信息。对于@Hexxagonal 的观点，如果代码失败很多，这可能是一种不好的技术，但是如果您的存储库层失败很多，性能将不是您最关心的问题。

要进行单元测试，请模拟存储机制（数据库？）并验证模拟上的调用。我为此推荐[起订量。](http://code.google.com/p/moq/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T05:45:44.947

如果您关心成功，那么是的，您可以返回一个指示成功/失败的布尔值。另一个可能的选择是抛出异常。我更喜欢使用布尔值作为返回值而不是抛出异常。如果该方法中确实发生了异常，我将在该方法中处理它们`SaveStatus`并返回 false。

在这种情况下我不倾向于抛出异常的原因是因为它会对应用程序的性能产生负面影响。微软标准规定“[对于经常失败的代码，您可以使用设计模式来最小化性能问题](http://msdn.microsoft.com/en-us/library/vstudio/ms229009%28v=vs.100%29.aspx)”。

# java - 绘制弧线并对其进行渐变

> ID：14422025
> 
> 赞同：5
> 
> 时间：2013-01-20T05:42:51.167
> 
> 标签：java, graphics, awt, gradient, java-2d

我想知道是否可以使用渐变在图形面板上绘制弧线以及我将如何去做。

我的最终目标是将圆弧旋转一整圈，使其类似于旋转加载圈。但是，它不是加载栏。这将是自定义 JButton 的背景。

任何会产生类似效果的替代方案的建议将不胜感激。

这类似于 oi 想要绘制的内容。请记住，它将“旋转”

![在此处输入图像描述](../Images/517ec44140fa8da92a3777e6153c9672.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T05:56:28.103

![在此处输入图像描述](../Images/6ca72bc2d6dc251e689c42e95bccf70c.png)

```
public class TestArc {

    public static void main(String[] args) {
        new TestArc();
    }

    public TestArc() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();

            int radius = Math.min(getWidth(), getHeight());
            int x = (getWidth() - radius) / 2;
            int y = (getHeight() - radius) / 2;

            RadialGradientPaint rgp = new RadialGradientPaint(
                            new Point(getWidth() / 2, getHeight() / 2),
                            radius,
                            new float[]{0f, 1f},
                            new Color[]{Color.RED, Color.YELLOW}
                            );
            g2d.setPaint(rgp);
            g2d.fill(new Arc2D.Float(x, y, radius, radius, 0, 45, Arc2D.PIE));
            g2d.dispose();
        }

    }

} 
```

您可能想查看[2D 图形](http://docs.oracle.com/javase/tutorial/2d/index.html)以获取更多信息

**额外输入后更新**

所以你想要一个锥形填充效果......

我的实现来自[Harmonic Code](http://harmoniccode.blogspot.com.au/)，但我找不到直接引用它（我认为这是他（优秀）系列的一部分），但您可以在[此处查看源代码](http://www.jarvana.com/jarvana/view/eu/hansolo/SteelSeries/3.5.3/SteelSeries-3.5.3-sources.jar!/eu/hansolo/steelseries/tools/ConicalGradientPaint.java)

现在。我遇到了角度问题，因为看起来 0 从顶点（而不是左侧）开始，并且它不喜欢负角度......你可能会有更好的运气，但我所做的是在某个位置创建一个基本缓冲区我可以轻松开始工作，然后使用`AffineTransformation`...

![在此处输入图像描述](../Images/ce71d1e98e5e58abfc45adf247079e37.png)

```
public class TestArc {

  public static void main(String[] args) {
    new TestArc();
  }

  public TestArc() {
    EventQueue.invokeLater(new Runnable() {
      @Override
      public void run() {
        try {
          UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
        }

        JFrame frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new BorderLayout());
        frame.add(new TestPane());
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
      }
    });
  }

  public class TestPane extends JPanel {

    private float angle = 0;
    private float extent = 270;
    private BufferedImage buffer;

    public TestPane() {
      Timer timer = new Timer(125, new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
          angle -= 5;
          if (angle > 360) {
            angle = 0;
          }
          repaint();
        }
      });
      timer.setRepeats(true);
      timer.setCoalesce(false);
      timer.start();
    }

    @Override
    public Dimension getPreferredSize() {
      return new Dimension(200, 200);
    }

    protected BufferedImage getBuffer() {

      if (buffer == null) {
        int radius = Math.min(getWidth(), getHeight());
        int x = (getWidth() - radius) / 2;
        int y = (getHeight() - radius) / 2;
        buffer = new BufferedImage(radius, radius, BufferedImage.TYPE_INT_ARGB);
        Graphics2D g2d = buffer.createGraphics();
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        float startAngle = 0;
        Color start = new Color(0, 128, 0, 128);
        Color end = new Color(0, 128, 0, 0);
        ConicalGradientPaint rgp = new ConicalGradientPaint(
            true,
            new Point(getWidth() / 2, getHeight() / 2),
            0.5f,
            new float[]{startAngle, extent},
            new Color[]{start, end});
        g2d.setPaint(rgp);
        g2d.fill(new Arc2D.Float(x, y, radius, radius, startAngle + 90, -extent, Arc2D.PIE));
//      g2d.fill(new Ellipse2D.Float(0, 0, radius, radius));
        g2d.dispose();
        g2d.dispose();
      }

      return buffer;
    }

    protected void paintComponent(Graphics g) {
      super.paintComponent(g);
      Graphics2D g2d = (Graphics2D) g.create();
      g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

      int radius = Math.min(getWidth(), getHeight());
      int x = (getWidth()) / 2;
      int y = (getHeight()) / 2;
      BufferedImage buffer = getBuffer();
      g2d.setTransform(AffineTransform.getRotateInstance(Math.toRadians(angle), x, y));
      x = (getWidth() - buffer.getWidth()) / 2;
      y = (getHeight() - buffer.getHeight()) / 2;
      g2d.drawImage(buffer, x, y, this);
      g2d.dispose();
    }
  }

  public final class ConicalGradientPaint implements java.awt.Paint {

    private final java.awt.geom.Point2D CENTER;
    private final double[] FRACTION_ANGLES;
    private final double[] RED_STEP_LOOKUP;
    private final double[] GREEN_STEP_LOOKUP;
    private final double[] BLUE_STEP_LOOKUP;
    private final double[] ALPHA_STEP_LOOKUP;
    private final java.awt.Color[] COLORS;
    private static final float INT_TO_FLOAT_CONST = 1f / 255f;

    /**
     * Standard constructor which takes the FRACTIONS in values from 0.0f to
     * 1.0f
     *
     * @param CENTER
     * @param GIVEN_FRACTIONS
     * @param GIVEN_COLORS
     * @throws IllegalArgumentException
     */
    public ConicalGradientPaint(final java.awt.geom.Point2D CENTER, final float[] GIVEN_FRACTIONS, final java.awt.Color[] GIVEN_COLORS) throws IllegalArgumentException {
      this(false, CENTER, 0.0f, GIVEN_FRACTIONS, GIVEN_COLORS);
    }

    /**
     * Enhanced constructor which takes the FRACTIONS in degress from 0.0f to
     * 360.0f and also an GIVEN_OFFSET in degrees around the rotation CENTER
     *
     * @param USE_DEGREES
     * @param CENTER
     * @param GIVEN_OFFSET
     * @param GIVEN_FRACTIONS
     * @param GIVEN_COLORS
     * @throws IllegalArgumentException
     */
    public ConicalGradientPaint(final boolean USE_DEGREES, final java.awt.geom.Point2D CENTER, final float GIVEN_OFFSET, final float[] GIVEN_FRACTIONS, final java.awt.Color[] GIVEN_COLORS) throws IllegalArgumentException {
      // Check that fractions and colors are of the same size
      if (GIVEN_FRACTIONS.length != GIVEN_COLORS.length) {
        throw new IllegalArgumentException("Fractions and colors must be equal in size");
      }

      final java.util.ArrayList<Float> FRACTION_LIST = new java.util.ArrayList<Float>(GIVEN_FRACTIONS.length);
      final float OFFSET;
      if (USE_DEGREES) {
        final double DEG_FRACTION = 1f / 360f;
        if (Double.compare((GIVEN_OFFSET * DEG_FRACTION), -0.5) == 0) {
          OFFSET = -0.5f;
        } else if (Double.compare((GIVEN_OFFSET * DEG_FRACTION), 0.5) == 0) {
          OFFSET = 0.5f;
        } else {
          OFFSET = (float) (GIVEN_OFFSET * DEG_FRACTION);
        }
        for (float fraction : GIVEN_FRACTIONS) {
          FRACTION_LIST.add((float) (fraction * DEG_FRACTION));
        }
      } else {
        // Now it seems to work with rotation of 0.5f, below is the old code to correct the problem
//            if (GIVEN_OFFSET == -0.5)
//            {
//                // This is needed because of problems in the creation of the Raster
//                // with a angle offset of exactly -0.5
//                OFFSET = -0.49999f;
//            }
//            else if (GIVEN_OFFSET == 0.5)
//            {
//                // This is needed because of problems in the creation of the Raster
//                // with a angle offset of exactly +0.5
//                OFFSET = 0.499999f;
//            }
//            else
        {
          OFFSET = GIVEN_OFFSET;
        }
        for (float fraction : GIVEN_FRACTIONS) {
          FRACTION_LIST.add(fraction);
        }
      }

      // Check for valid offset
      if (OFFSET > 0.5f || OFFSET < -0.5f) {
        throw new IllegalArgumentException("Offset has to be in the range of -0.5 to 0.5");
      }

      // Adjust fractions and colors array in the case where startvalue != 0.0f and/or endvalue != 1.0f
      final java.util.List<java.awt.Color> COLOR_LIST = new java.util.ArrayList<java.awt.Color>(GIVEN_COLORS.length);
      COLOR_LIST.addAll(java.util.Arrays.asList(GIVEN_COLORS));

      // Assure that fractions start with 0.0f
      if (FRACTION_LIST.get(0) != 0.0f) {
        FRACTION_LIST.add(0, 0.0f);
        final java.awt.Color TMP_COLOR = COLOR_LIST.get(0);
        COLOR_LIST.add(0, TMP_COLOR);
      }

      // Assure that fractions end with 1.0f
      if (FRACTION_LIST.get(FRACTION_LIST.size() - 1) != 1.0f) {
        FRACTION_LIST.add(1.0f);
        COLOR_LIST.add(GIVEN_COLORS[0]);
      }

      // Recalculate the fractions and colors with the given offset
      final java.util.Map<Float, java.awt.Color> FRACTION_COLORS = recalculate(FRACTION_LIST, COLOR_LIST, OFFSET);

      // Clear the original FRACTION_LIST and COLOR_LIST
      FRACTION_LIST.clear();
      COLOR_LIST.clear();

      // Sort the hashmap by fraction and add the values to the FRACION_LIST and COLOR_LIST
      final java.util.SortedSet<Float> SORTED_FRACTIONS = new java.util.TreeSet<Float>(FRACTION_COLORS.keySet());
      final java.util.Iterator<Float> ITERATOR = SORTED_FRACTIONS.iterator();
      while (ITERATOR.hasNext()) {
        final float CURRENT_FRACTION = ITERATOR.next();
        FRACTION_LIST.add(CURRENT_FRACTION);
        COLOR_LIST.add(FRACTION_COLORS.get(CURRENT_FRACTION));
      }

      // Set the values
      this.CENTER = CENTER;
      COLORS = COLOR_LIST.toArray(new java.awt.Color[]{});

      // Prepare lookup table for the angles of each fraction
      final int MAX_FRACTIONS = FRACTION_LIST.size();
      this.FRACTION_ANGLES = new double[MAX_FRACTIONS];
      for (int i = 0; i < MAX_FRACTIONS; i++) {
        FRACTION_ANGLES[i] = FRACTION_LIST.get(i) * 360;
      }

      // Prepare lookup tables for the color stepsize of each color
      RED_STEP_LOOKUP = new double[COLORS.length];
      GREEN_STEP_LOOKUP = new double[COLORS.length];
      BLUE_STEP_LOOKUP = new double[COLORS.length];
      ALPHA_STEP_LOOKUP = new double[COLORS.length];

      for (int i = 0; i < (COLORS.length - 1); i++) {
        RED_STEP_LOOKUP[i] = ((COLORS[i + 1].getRed() - COLORS[i].getRed()) * INT_TO_FLOAT_CONST) / (FRACTION_ANGLES[i + 1] - FRACTION_ANGLES[i]);
        GREEN_STEP_LOOKUP[i] = ((COLORS[i + 1].getGreen() - COLORS[i].getGreen()) * INT_TO_FLOAT_CONST) / (FRACTION_ANGLES[i + 1] - FRACTION_ANGLES[i]);
        BLUE_STEP_LOOKUP[i] = ((COLORS[i + 1].getBlue() - COLORS[i].getBlue()) * INT_TO_FLOAT_CONST) / (FRACTION_ANGLES[i + 1] - FRACTION_ANGLES[i]);
        ALPHA_STEP_LOOKUP[i] = ((COLORS[i + 1].getAlpha() - COLORS[i].getAlpha()) * INT_TO_FLOAT_CONST) / (FRACTION_ANGLES[i + 1] - FRACTION_ANGLES[i]);
      }
    }

    /**
     * Recalculates the fractions in the FRACTION_LIST and their associated
     * colors in the COLOR_LIST with a given OFFSET. Because the conical
     * gradients always starts with 0 at the top and clockwise direction you
     * could rotate the defined conical gradient from -180 to 180 degrees which
     * equals values from -0.5 to +0.5
     *
     * @param FRACTION_LIST
     * @param COLOR_LIST
     * @param OFFSET
     * @return Hashmap that contains the recalculated fractions and colors after
     * a given rotation
     */
    private java.util.HashMap<Float, java.awt.Color> recalculate(final java.util.List<Float> FRACTION_LIST, final java.util.List<java.awt.Color> COLOR_LIST, final float OFFSET) {
      // Recalculate the fractions and colors with the given offset
      final int MAX_FRACTIONS = FRACTION_LIST.size();
      final java.util.HashMap<Float, java.awt.Color> FRACTION_COLORS = new java.util.HashMap<Float, java.awt.Color>(MAX_FRACTIONS);
      for (int i = 0; i < MAX_FRACTIONS; i++) {
        // Add offset to fraction
        final float TMP_FRACTION = FRACTION_LIST.get(i) + OFFSET;

        // Color related to current fraction
        final java.awt.Color TMP_COLOR = COLOR_LIST.get(i);

        // Check each fraction for limits (0...1)
        if (TMP_FRACTION <= 0) {
          FRACTION_COLORS.put(1.0f + TMP_FRACTION + 0.0001f, TMP_COLOR);

          final float NEXT_FRACTION;
          final java.awt.Color NEXT_COLOR;
          if (i < MAX_FRACTIONS - 1) {
            NEXT_FRACTION = FRACTION_LIST.get(i + 1) + OFFSET;
            NEXT_COLOR = COLOR_LIST.get(i + 1);
          } else {
            NEXT_FRACTION = 1 - FRACTION_LIST.get(0) + OFFSET;
            NEXT_COLOR = COLOR_LIST.get(0);
          }
          if (NEXT_FRACTION > 0) {
            final java.awt.Color NEW_FRACTION_COLOR = getColorFromFraction(TMP_COLOR, NEXT_COLOR, (int) ((NEXT_FRACTION - TMP_FRACTION) * 10000), (int) ((-TMP_FRACTION) * 10000));
            FRACTION_COLORS.put(0.0f, NEW_FRACTION_COLOR);
            FRACTION_COLORS.put(1.0f, NEW_FRACTION_COLOR);
          }
        } else if (TMP_FRACTION >= 1) {
          FRACTION_COLORS.put(TMP_FRACTION - 1.0f - 0.0001f, TMP_COLOR);

          final float PREVIOUS_FRACTION;
          final java.awt.Color PREVIOUS_COLOR;
          if (i > 0) {
            PREVIOUS_FRACTION = FRACTION_LIST.get(i - 1) + OFFSET;
            PREVIOUS_COLOR = COLOR_LIST.get(i - 1);
          } else {
            PREVIOUS_FRACTION = FRACTION_LIST.get(MAX_FRACTIONS - 1) + OFFSET;
            PREVIOUS_COLOR = COLOR_LIST.get(MAX_FRACTIONS - 1);
          }
          if (PREVIOUS_FRACTION < 1) {
            final java.awt.Color NEW_FRACTION_COLOR = getColorFromFraction(TMP_COLOR, PREVIOUS_COLOR, (int) ((TMP_FRACTION - PREVIOUS_FRACTION) * 10000), (int) (TMP_FRACTION - 1.0f) * 10000);
            FRACTION_COLORS.put(1.0f, NEW_FRACTION_COLOR);
            FRACTION_COLORS.put(0.0f, NEW_FRACTION_COLOR);
          }
        } else {
          FRACTION_COLORS.put(TMP_FRACTION, TMP_COLOR);
        }
      }

      // Clear the original FRACTION_LIST and COLOR_LIST
      FRACTION_LIST.clear();
      COLOR_LIST.clear();

      return FRACTION_COLORS;
    }

    /**
     * With the START_COLOR at the beginning and the DESTINATION_COLOR at the
     * end of the given RANGE the method will calculate and return the color
     * that equals the given VALUE. e.g. a START_COLOR of BLACK (R:0, G:0, B:0,
     * A:255) and a DESTINATION_COLOR of WHITE(R:255, G:255, B:255, A:255) with
     * a given RANGE of 100 and a given VALUE of 50 will return the color that
     * is exactly in the middle of the gradient between black and white which is
     * gray(R:128, G:128, B:128, A:255) So this method is really useful to
     * calculate colors in gradients between two given colors.
     *
     * @param START_COLOR
     * @param DESTINATION_COLOR
     * @param RANGE
     * @param VALUE
     * @return Color calculated from a range of values by given value
     */
    public java.awt.Color getColorFromFraction(final java.awt.Color START_COLOR, final java.awt.Color DESTINATION_COLOR, final int RANGE, final int VALUE) {
      final float SOURCE_RED = START_COLOR.getRed() * INT_TO_FLOAT_CONST;
      final float SOURCE_GREEN = START_COLOR.getGreen() * INT_TO_FLOAT_CONST;
      final float SOURCE_BLUE = START_COLOR.getBlue() * INT_TO_FLOAT_CONST;
      final float SOURCE_ALPHA = START_COLOR.getAlpha() * INT_TO_FLOAT_CONST;

      final float DESTINATION_RED = DESTINATION_COLOR.getRed() * INT_TO_FLOAT_CONST;
      final float DESTINATION_GREEN = DESTINATION_COLOR.getGreen() * INT_TO_FLOAT_CONST;
      final float DESTINATION_BLUE = DESTINATION_COLOR.getBlue() * INT_TO_FLOAT_CONST;
      final float DESTINATION_ALPHA = DESTINATION_COLOR.getAlpha() * INT_TO_FLOAT_CONST;

      final float RED_DELTA = DESTINATION_RED - SOURCE_RED;
      final float GREEN_DELTA = DESTINATION_GREEN - SOURCE_GREEN;
      final float BLUE_DELTA = DESTINATION_BLUE - SOURCE_BLUE;
      final float ALPHA_DELTA = DESTINATION_ALPHA - SOURCE_ALPHA;

      final float RED_FRACTION = RED_DELTA / RANGE;
      final float GREEN_FRACTION = GREEN_DELTA / RANGE;
      final float BLUE_FRACTION = BLUE_DELTA / RANGE;
      final float ALPHA_FRACTION = ALPHA_DELTA / RANGE;
      //System.out.println(DISTANCE + "     " + CURRENT_FRACTION);

      return new java.awt.Color(SOURCE_RED + RED_FRACTION * VALUE, SOURCE_GREEN + GREEN_FRACTION * VALUE, SOURCE_BLUE + BLUE_FRACTION * VALUE, SOURCE_ALPHA + ALPHA_FRACTION * VALUE);
    }

    @Override
    public java.awt.PaintContext createContext(final java.awt.image.ColorModel COLOR_MODEL, final java.awt.Rectangle DEVICE_BOUNDS, final java.awt.geom.Rectangle2D USER_BOUNDS, final java.awt.geom.AffineTransform TRANSFORM, final java.awt.RenderingHints HINTS) {
      final java.awt.geom.Point2D TRANSFORMED_CENTER = TRANSFORM.transform(CENTER, null);
      return new ConicalGradientPaintContext(TRANSFORMED_CENTER);
    }

    @Override
    public int getTransparency() {
      return java.awt.Transparency.TRANSLUCENT;
    }

    private final class ConicalGradientPaintContext implements java.awt.PaintContext {

      final private java.awt.geom.Point2D CENTER;

      public ConicalGradientPaintContext(final java.awt.geom.Point2D CENTER) {
        this.CENTER = new java.awt.geom.Point2D.Double(CENTER.getX(), CENTER.getY());
      }

      @Override
      public void dispose() {
      }

      @Override
      public java.awt.image.ColorModel getColorModel() {
        return java.awt.image.ColorModel.getRGBdefault();
      }

      @Override
      public java.awt.image.Raster getRaster(final int X, final int Y, final int TILE_WIDTH, final int TILE_HEIGHT) {
        final double ROTATION_CENTER_X = -X + CENTER.getX();
        final double ROTATION_CENTER_Y = -Y + CENTER.getY();

        final int MAX = FRACTION_ANGLES.length;

        // Create raster for given colormodel
        final java.awt.image.WritableRaster RASTER = getColorModel().createCompatibleWritableRaster(TILE_WIDTH, TILE_HEIGHT);

        // Create data array with place for red, green, blue and alpha values
        int[] data = new int[(TILE_WIDTH * TILE_HEIGHT * 4)];

        double dx;
        double dy;
        double distance;
        double angle;
        double currentRed = 0;
        double currentGreen = 0;
        double currentBlue = 0;
        double currentAlpha = 0;

        for (int py = 0; py < TILE_HEIGHT; py++) {
          for (int px = 0; px < TILE_WIDTH; px++) {

            // Calculate the distance between the current position and the rotation angle
            dx = px - ROTATION_CENTER_X;
            dy = py - ROTATION_CENTER_Y;
            distance = Math.sqrt(dx * dx + dy * dy);

            // Avoid division by zero
            if (distance == 0) {
              distance = 1;
            }

            // 0 degree on top
            angle = Math.abs(Math.toDegrees(Math.acos(dx / distance)));

            if (dx >= 0 && dy <= 0) {
              angle = 90.0 - angle;
            } else if (dx >= 0 && dy >= 0) {
              angle += 90.0;
            } else if (dx <= 0 && dy >= 0) {
              angle += 90.0;
            } else if (dx <= 0 && dy <= 0) {
              angle = 450.0 - angle;
            }

            // Check for each angle in fractionAngles array
            for (int i = 0; i < (MAX - 1); i++) {
              if ((angle >= FRACTION_ANGLES[i])) {
                currentRed = COLORS[i].getRed() * INT_TO_FLOAT_CONST + (angle - FRACTION_ANGLES[i]) * RED_STEP_LOOKUP[i];
                currentGreen = COLORS[i].getGreen() * INT_TO_FLOAT_CONST + (angle - FRACTION_ANGLES[i]) * GREEN_STEP_LOOKUP[i];
                currentBlue = COLORS[i].getBlue() * INT_TO_FLOAT_CONST + (angle - FRACTION_ANGLES[i]) * BLUE_STEP_LOOKUP[i];
                currentAlpha = COLORS[i].getAlpha() * INT_TO_FLOAT_CONST + (angle - FRACTION_ANGLES[i]) * ALPHA_STEP_LOOKUP[i];
                continue;
              }
            }

            // Fill data array with calculated color values
            final int BASE = (py * TILE_WIDTH + px) * 4;
            data[BASE + 0] = (int) (currentRed * 255);
            data[BASE + 1] = (int) (currentGreen * 255);
            data[BASE + 2] = (int) (currentBlue * 255);
            data[BASE + 3] = (int) (currentAlpha * 255);
          }
        }

        // Fill the raster with the data
        RASTER.setPixels(0, 0, TILE_WIDTH, TILE_HEIGHT, data);

        return RASTER;
      }
    }
  }
} 
```

# meteor - 如何从终端重命名部署的流星应用程序？

> ID：14422038
> 
> 赞同：4
> 
> 时间：2013-01-20T05:44:27.753
> 
> 标签：meteor, web-deployment

在你部署了一个流星应用程序之后——比如说 foo.meteor.com——你可以重命名应用程序的 URL 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T05:47:39.870

[看起来不像](http://docs.meteor.com/#meteordeploy)，但你总是可以删除它并部署一个新的：

```
meteor deploy --delete YOUR_APP
meteor deploy YOUR_NEW_APP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T06:00:07.247

[Meteor 命令行](http://docs.meteor.com/#commandline)没有任何用于重命名已部署应用程序的命令。

但是您可以使用新名称而不是旧名称部署应用程序，如下所示：

```
meteor deploy new_app_name.meteor.com 
```

# jquery-ui - jQuery UI Sortable + Droppable 在 droppable 上放置时都会触发

> ID：14422041
> 
> 赞同：1
> 
> 时间：2013-01-20T05:45:03.527
> 
> 标签：jquery-ui, jquery-ui-sortable, jquery-ui-droppable

我有一个可排序且排序良好的元素列表。我还有一个位于可排序列表之外的可放置对象。当我在 droppable 上放置项目时，它旨在执行复制操作，这意味着在此操作期间排序是不可取的。

然而不幸的是，将 sortable 拖动到外部 droppable 会导致 sortable.update 触发。如果将可排序元素拖到给定元素之外，是否有办法忽略所有可排序的拖放事件？

我经历了所有相关的可排序事件，我似乎找不到任何对可排序元素的引用，以查看它们是否有共同的父母。

这是一个要演示的小提琴：http: [//jsfiddle.net/6yhbG/](http://jsfiddle.net/6yhbG/)

将任何一个可排序的 1/2 拖动到可放置的对象都会导致`sortable.sort`触发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T06:59:48.920

好的，终于找到了它的底部：`sortable('cancel')`需要从中调用`sortable.stop`，我只是将一个类添加到可排序对象中，以便它知道是否要取消自己：

```
$('div').droppable({
    drop: function(e, ui) {
        ui.draggable.parent().addClass('dropped');
    }
});

$('ul').sortable({
    stop: function(){
        if ($(this).hasClass('dropped')){
            $(this).sortable('cancel');
            $(this).removeClass('dropped');
        }           
    }
}); 
```

在我的更新示例中：http: [//jsfiddle.net/6yhbG/1/](http://jsfiddle.net/6yhbG/1/)

# drupal - 使用自定义条件搜索

> ID：14422045
> 
> 赞同：2
> 
> 时间：2013-01-20T05:45:32.827
> 
> 标签：drupal, drupal-7, drupal-search

如何向默认搜索模块添加条件？

我想向节点添加一个名为“允许搜索”的复选框字段，未选中的项目不会显示在搜索结果中。

[扩展 Drupal 7 搜索](https://stackoverflow.com/questions/8575289/extending-drupal-7-search)似乎是我的解决方案，但我无法使其工作；`hook_search_execute()`不执行。

你能解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T00:21:33.320

您需要首先在 admin/config/search/settings 上选择您的模块，并可能在“Active search modules”中取消选择 Node 模块。如果没有在那里选择您的模块，则不会调用您的钩子。

> ![截屏](../Images/df339be50dbc355bfc08e1614648a8fb.png)

至于为什么一个钩子被调用，一个钩子不被调用，[search_get_info()](http://api.drupal.org/api/drupal/modules!search!search.module/function/search_get_info/7)（从[search_menu()](http://api.drupal.org/api/drupal/modules!search!search.module/function/search_menu/7)调用来构建搜索菜单的函数）执行的代码首先调用了每个实现`hook_search_info()`，然后它检查了哪些模块搜索集成已启用。由于您的模块没有启用搜索集成，因此`hook_search_execute()`您的模块将永远不会被调用。

```
 if (!isset($search_hooks)) {
    foreach (module_implements('search_info') as $module) {
      $search_hooks[$module] = call_user_func($module . '_search_info');
      // Use module name as the default value.
      $search_hooks[$module] += array(
        'title' => $module,
        'path' => $module,
      );
      // Include the module name itself in the array.
      $search_hooks[$module]['module'] = $module;
    }
  }

  if ($all) {
    return $search_hooks;
  }

  $active = variable_get('search_active_modules', array('node', 'user'));
  return array_intersect_key($search_hooks, array_flip($active)); 
```

# android - 安卓sqlite读写

> ID：14422053
> 
> 赞同：0
> 
> 时间：2013-01-20T05:46:29.933
> 
> 标签：android, multithreading, sqlite, wait, notify

登录后，我在 tabhost 上填写表格。我已经设置了一个线程来填写表格。同时，我单击已设置另一个线程的选项卡以从同一个表中读取数据并填充列表视图的适配器。

我的问题是，在 tabhost 上填充表格的线程需要一些时间，同时如果我单击选项卡以显示表格中的数据，由于适配器为空，它显示没有找到数据。

如何解决这个问题？`wait()`是否可以使用and来解决生产者/消费者之类的问题`notify()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T06:08:56.847

我能想象的最简单（又名最黑客）的方式？

在您的主要活动中创建一个设置为 false 的静态布尔值。更新数据后，让后台线程将其设置为 true。另一个活动可以检查布尔值是否为假，然后将您送回主程序或举杯祝酒，说明数据仍在加载。

或者，如果没有找到数据，只需举起您正在加载的 toast。您可以运行计时器来刷新页面，直到找到数据。

# mysql - MySQL 查询多个连接

> ID：14422054
> 
> 赞同：0
> 
> 时间：2013-01-20T05:46:36.700
> 
> 标签：mysql, left-join, max

我有以下查询，它给了我大部分正确的结果。唯一的问题是可以有多张具有相同用户 ID 的照片，我希望它提取最近上传的照片。目前构成它给了我一张随机的照片。我在 中有一个时间戳字段`tblimage`，但我不知道如何将其合并到此查询中以提取最后上传的照片。

```
SELECT tblimage.*, events.* 
  FROM (events LEFT JOIN tblfollowers
 ON events.id_user = tblfollowers.username) 
     LEFT JOIN tblimage ON events.id_user = tblimage.userid
     WHERE (((tblfollowers.follower_id)='$test') 
     AND (DATE_FORMAT(events.start_date,'%Y-%m-%d')='$today')) 
     OR (((tblfollowers.follower_id)='$test') 
     AND (DATE_FORMAT(events.end_date,'%Y-%m-%d')='$today')) 
     OR (((events.id_user) ='$test') 
     AND (DATE_FORMAT(events.start_date,'%Y-%m-%d')='$today')) 
     OR (((events.id_user) ='$test') 
     AND (DATE_FORMAT(events.end_date,'%Y-%m-%d')='$today')) 
GROUP BY  events.event_id 
```

我想我可以分享更多细节。 `tblimage`例如有以下记录：

```
userid=25 photo = 1.png timestamp = 12:00 jan 19
userid=25 photo = 2.png timestamp = 1:00 jan 18 
```

我希望它只给我 1 月 19 日的照片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T05:53:27.963

最后包括

GROUP BY tblimage.userid Order By tblimage.userid DESC

并且您已经包含了 Goup by，因此您将获得用户的最新图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T06:05:28.443

哇，这很令人费解。

您需要在 where 子句中添加以下内容：

```
events.start_date=MAX(events.start_date) OR events.end_date=MAX(events.end_date) 
```

如果该日期有多个记录，它将返回 > 1，除非该日期是时间戳，否则它不会。

# android - 在选项卡后面修剪的 Android 自定义通知布局

> ID：14422059
> 
> 赞同：1
> 
> 时间：2013-01-20T05:48:38.790
> 
> 标签：android, android-notifications

我看到了一个特殊的问题。我的通知内容上的自定义布局在通知滚动条上不完全可见。我想知道为什么。

注意最后一个通知布局，2 个按钮部分可见。

![这里](../Images/8237eeda0c82abdcf56ce8c58c38f251.png)

相关代码

```
RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.pickupnotification);
    contentView.setTextViewText(R.id.title, "Siddharth" + "2km -> 20km");
    contentView.setTextViewText(R.id.countDown, "-1:29");
    contentView.setTextViewText(R.id.from,
            "FROM 2:00pm 14th Jan 2013, Some Address");
    contentView.setTextViewText(R.id.to,
            "TO4:00pm 14th Jan 2013 Some address");
Notification noti = new NotificationCompat.Builder(this).setContent(contentView)
...
notification.contentView = contentView ; 
```

我正在使用以 RelativeLayout 作为根的布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:37:04.217

很可能您正在使用相对布局，并且应该通过定义它们的左/右边界来避免重叠文本视图。

像[“到左边”](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html#attr_android%3alayout_toLeftOf)，[“到右边”](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html#attr_android%3alayout_toRightOf) .... :)

# java - 计算 n 位 2 的补数的绝对值

> ID：14422064
> 
> 赞同：2
> 
> 时间：2013-01-20T05:49:10.100
> 
> 标签：java, bit-manipulation, twos-complement, absolute-value

该方法接受一个 n 位 2 的补数，我们试图找到其绝对值，以及该数字的位数。这里有些例子：

绝对（0x00001234, 16）；// => 0x00001234

绝对（0x00001234, 13）；// => 0x00000DCC

所以你可以看到在第一个例子中 0x00001234 只是产生自己，因为它有 16 位，它有足够的前导零来成为它自己。

但是，对于第二个示例，使用 13 位会使 0x00001234 的符号位为 1，因此当您将此 13 位数字转换为正数时，它会产生 0x00000DCC。

我觉得到目前为止我所拥有的应该可以工作，但是在某些情况下它不起作用：/知道出了什么问题或我应该朝哪个方向前进吗？

编辑：也忘了提一下，我们不能使用 >>> 或 +,-,*,/ 除非我们只是增加 1。

```
public static int abs(int num, int n)
{

    boolean set = ((1 << n-1) & num) == (1 << n-1);
    if (!set) {
        return num;
    } else {
        int bitmask = (0x7FFFFFFF >> (32-n)) | (1 << n-1);
        return (num ^ bitmask) + 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T07:13:50.037

哇，以后来的人请看这里：

```
 public static int abs(int num, int n)
  {
      int topbit = 1<<(n-1);
      int ones = (topbit<<1)-1;
      num &= ones;                     // sanity check
      if (0==(topbit&num)) {
          return num;
      } else {
          return (num ^ ones) + 1;
      }
  } 
```

所以问题是，可以从这里删除操作以使此功能更快吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T06:07:51.490

这是错误的

```
int bitmask = 0xFFFFFFFF >> (32 - n); 
```

它总是 0xFFFFFFFF，使用

```
int bitmask = 0xFFFFFFFF >>> (32 - n); 
```

见[http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.19](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.19)

**更新**据我所知，您不得使用无符号班次。在这种情况下尝试

```
 int bitmask = (int) (0xFFFFFFFFL >> (32 - n)); 
```

完整代码

```
public static int abs(int num, int n) {
    int bitmask = (int) (0xFFFFFFFFL >> (32 - n));
    boolean set = ((1 << n - 1) & num) != 0;
    if (!set) {
        return num & bitmask;
    } else {
        return -(num | ~bitmask);
    }
} 
```

# linux - 如何在 shell 脚本中以 cat 命令格式打印 echo 语句？

> ID：14422065
> 
> 赞同：0
> 
> 时间：2013-01-20T05:49:11.053
> 
> 标签：linux, shell, unix, awk, echo

```
 rm -rf xyz.log
    echo "Enter n"
    read n
    x[0]=ABC
    x[1]=DEF
    x[2]=GHI
    y[0]=MNO
    y[1]=PQR
    y[2]=STQ
    z[0]=RTY
    z[1]=LKJ
    z[2]=LDF
    for (( i=0; i<n; ++i ))
    do
      echo "${x[i]} ---- ${y[i]} ---- ${z[i]}" >> xyz.log
    done
    o=`cat xyz.log`
    echo $o 
```

当我执行上述脚本时，我在一行中得到所有输出，但在 xyz.log 中，它是逐行打印的。我希望在 echo 命令中打印相同的内容。提前致谢。

**$ ./val.sh**

输入 n

3

ABC ---- MNO ---- RTY DEF ---- PQR ---- LKJ GHI ---- STQ ---- LDF

**$猫xyz.log**

ABC ---- MNO ---- RTY

DEF ---- PQR ---- LKJ

GHI ---- STQ ---- LDF

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T13:54:06.557

您在最后一行缺少引号：

```
o=`cat xyz.log`
echo "$o"
# ---^--^ 
```

添加引号将允许 shell 准确地使用变量的内容。否则，您将要求 shell 执行分词，其中任何空格序列（包括换行符）都将替换为单个空格（默认情况下）。

经验法则：*总是*引用`"$variables"`，除非你特别不想引用它们。

另外，这是错误的

```
`rm -rf xyz.log` 
```

您正在子 shell 中执行删除，然后将输出用作命令。这种情况下是没有输出的，但是可以看到这样的效果

```
`echo hi there` # -- command not found 'hi' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T05:58:37.797

-e 选项用于启用 echo 对换行符的其他实例的解释以及对其他特殊字符的解释，例如由 \t 表示的水平制表符。因此，例如，以下将产生格式化的输出：

```
echo -e "\n Projects: \n\n\tplan \n\tcode \n\ttest\n" 
```

因此，请使用您的 echo 命令，例如：

```
echo -e "${x[i]} ---- ${y[i]} ---- ${z[i]} \n" >> xyz.log 
```

它可以解决问题，并为您提供您正在寻找的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T06:22:30.093

使用 上的`-n`选项`echo`。 `-n`意思是“不要像往常一样在行尾写换行符”。它记录在`bash`手册页中。

我还建议只`echo >> xyz.log`在文件末尾放一个换行符。

OUTFILE="xyz.log"

```
`rm -rf "$OUTFILE"`
echo "Enter n"
read n
x[0]=ABC
x[1]=DEF
x[2]=GHI
y[0]=MNO
y[1]=PQR
y[2]=STQ
z[0]=RTY
z[1]=LKJ
z[2]=LDF
for (( i=0; i<n; ++i )) ; do
    echo -n "${x[i]} ---- ${y[i]} ---- ${z[i]}" >> "$OUTFILE"
done
o=`cat "$OUTFILE"`
echo $o 
```

# perl - 为什么我的排序不能在 Perl 中工作？

> ID：14422066
> 
> 赞同：3
> 
> 时间：2013-01-20T05:49:12.487
> 
> 标签：perl, sorting, inheritance, methods, subroutine

我从未使用过 Perl，但我需要完成这个练习。我的任务是以几种不同的方式对数组进行排序。我得到了一个测试脚本。该脚本将数组放在一起，并为其排序的每个阶段打印语句。我将其命名为 foo.pl：

```
use strict;
use warnings;
use MyIxHash;

my %myhash;
my $t = tie(%myhash, "MyIxHash", 'a' => 1, 'abe' => 2, 'cat'=>'3');
$myhash{b} = 4;
$myhash{da} = 5;
$myhash{bob} = 6;

print join(", ", map { "$_ => $myhash{$_}" } keys %myhash) . " are the starting key => val pairs\n";

$t->SortByKey;  # sort alphabetically
print join(", ", map { "$_ => $myhash{$_}" } keys %myhash) . " are the alphabetized key => val pairs\n";

$t->SortKeyByFunc(sub {my ($a, $b) = @_; return ($b cmp $a)});  # sort alphabetically in reverse order
print join(", ", map { "$_ => $myhash{$_}" } keys %myhash) . " are the reverse alphabetized key => val pairs\n";

$t->SortKeyByFunc(\&abcByLength);  # use abcByLength to sort
print join(", ", map { "$_ => $myhash{$_}" } keys %myhash) . " are the abcByLength sorted key => val pairs\n";

print "Done\n\n";

sub abcByLength {
  my ($a, $b) = @_;

  if(length($a) == length($b)) { return $a cmp $b; }
  else { return length($a) <=> length($b) } 
} 
```

Foo.pl 使用一个名为 MyIxHash 的包，我为它创建了一个名为 MyIxHash.pm 的模块。该脚本按字母顺序运行：“SortByKey”，我通过模块中的“IxHash”包继承了它。最后两种是给我带来问题的。当我创建的 sub: "SortKeyByFunc" 在数组上运行时，它传入数组和一个子例程作为参数。我试图接受这些论点并将它们与变量相关联。

最终排序应该按字符串长度排序，然后按字母顺序排序。在 foo.pl 的底部提供了一个子程序，名称为“abcByLength”。与反向 alpha 排序一样，此子例程作为参数传递给我的 SortKeyByFunc 子例程。

对于这两种类型，似乎为我完成了实际的排序工作，我只需要将这个子例程应用于我的数组。

我的主要问题似乎是，如果可能的话，我不知道如何获取我的子例程参数并通过它作为参数运行我的数组。我在我的阵列上错误地运行我的方法？

```
package MyIxHash;
#use strict;
use warnings;
use parent Tie::IxHash;
use Data::Dumper qw(Dumper);

sub SortKeyByFunc {
    #my $class = shift;
    my ($a, $b) = @_;

    #this is a reference to the already alphabetaized array being passed in
    my @letters = $_[0][1];

    #this is a reference to the sub being passed in as a parameter
    my $reverse = $_[1];

    #this is my variable to contain my reverse sorted array
    my @sorted = @letters->$reverse();

    return @sorted;
}

1; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T07:06:26.923

> “我的问题出现在我尝试的地方：`my @sorted = @letters->$reverse();`我也尝试过：`my @sorted = sort {$reverse} @letters;`”

你真的很亲近；正确的语法是：

```
my $reverse = sub { $b cmp $a };
# ...
my @sorted = sort $reverse @letters; 
```

另请注意，由于基本上是历史原因，`sort`将参数传递给（稍微）神奇的全局变量中的比较函数，`$a`而`$b`不是 in `@_`，因此您不需要（并且确实不应该）`my ($a, $b) = @_;`在 sortsubs 中执行（除非您使用原型声明它们；有关详细信息，请参见[perldoc -f sort](http://perldoc.perl.org/functions/sort.html) )。

* * *

**编辑：**如果你得到一个比较函数，由于某种原因*确实*期望它的参数 in `@_`，并且你不能更改该函数的定义，那么你最好的选择可能是将它包装在这样的闭包中：

```
my $fixed_sortsub = sub { $weird_sortsub->($a, $b) };

my @sorted = sort $fixed_sortsub @letters; 
```

或者简单地说：

```
my @sorted = sort { $weird_sortsub->($a, $b) } @letters; 
```

* * *

**编辑2：**啊，我看到了/一个问题。当你写：

```
my @letters = $_[0][1]; 
```

你最终得到的是一个包含任何内容的单元素数组`$_[0][1]`，这可能是一个[数组引用](http://perldoc.perl.org/perlreftut.html)。您应该立即取消引用它，如下所示：

```
my @letters = @{ $_[0][1] }; 
```

或者只是暂时保留它作为参考，并在您使用它时取消引用它：

```
my $letters = $_[0][1];
# ...
my @sorted = sort $whatever @$letters; 
```

* * *

**编辑3：** 一旦您设法对键进行排序，那么，正如duskwuff 在他的原始答案中指出的那样，您还需要`Reorder()`从您的父类[Tie::IxHash](http://search.cpan.org/perldoc/Tie%3a%3aIxHash)调用该方法来实际更改键的顺序。另外，第一行：

```
my ($a, $b) = @_; 
```

在应该是一个需要代码引用的对象方法中完全不合适（事实上，如果您想稍后在同一代码块中调用，那么词法化`$a`并且无论如何都是一个坏主意）。它应该读到的内容类似于：`$b``sort`

```
my ($self, $sortfunc) = @_; 
```

事实上，与其列举所有似乎与您的原始代码有问题的事情，不如修复它可能更容易：

```
package MyIxHash;
use strict;
use warnings;
use parent 'Tie::IxHash';

sub SortKeyByFunc {
    my ($self, $sortfunc) = @_;

    my @unsorted = $self->Keys();

    my @sorted = sort { $sortfunc->($a, $b) } @unsorted;

    $self->Reorder( @sorted );
}

1; 
```

或者简单地说：

```
sub SortKeyByFunc {
    my ($self, $sortfunc) = @_;

    $self->Reorder( sort { $sortfunc->($a, $b) } $self->Keys() );
} 
```

（Ps。我现在明白为什么比较函数被指定为接受它们的参数`@_`而不是全局变量`$a`以及通常将它们放在`$b`哪里`sort`：这是因为比较函数属于不同的包，并且不够`$a`神奇*以至于*在每个包都喜欢，说，并且是。我想这*可以*解决，但它需要一些非常重要的技巧。）`$b`*`$_``@_`*`caller`**

 **（Pps。请在你提交练习时感谢我和黄昏/堆栈溢出。祝你学习 Perl 好运——相信我，拥有这将是一项有用的技能。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T06:05:28.690

您的`SortKeyByFunc`方法返回对数组 ( `@sorted`) 进行排序的结果，但它不会“就地”修改数组。因此，仅仅调用`$t->SortKeyByFunc(...);`不会产生任何可见的永久效果。

您需要`$t->Reorder()`在您的`SortKeyByFunc`方法中调用才能对阵列产生任何持久影响。我没有尝试过，但类似：

```
$t->Reorder(@sorted); 
```

在您的方法结束时可能就足够了。**

# ubuntu - ubuntu 12.04 无法连接蓝牙伴侣

> ID：14422069
> 
> 赞同：1
> 
> 时间：2013-01-20T05:50:08.297
> 
> 标签：ubuntu, bluetooth, arduino

我正在尝试将运行 ubuntu 12.04 的笔记本电脑连接到连接到 arduino 的蓝牙 Mate Silver。

接线是：

```
CTS-I->No connection (leave floating)
VCC->5V
GND->GND
TX-O->D2
RX-I->D3
RTS-O->No connection (leave floating) 
```

在 arduino 上运行的代码：

```
$include <SoftwareSerial.h>  

int bluetoothTx = 2;  // TX-O pin of bluetooth mate, Arduino D2
int bluetoothRx = 3;  // RX-I pin of bluetooth mate, Arduino D3

SoftwareSerial bluetooth(bluetoothTx, bluetoothRx);

void setup()
{
  Serial.begin(9600);  // Begin the serial monitor at 9600bps

  bluetooth.begin(115200);  // The Bluetooth Mate defaults to 115200bps
  bluetooth.print("$$$");  // Enter command mode
  delay(100);  // Short delay, wait for the Mate to send back CMD
  bluetooth.println("U,9600,N");  // Temporarily Change the baudrate to 9600, no parity
  // 115200 can be too fast at times for NewSoftSerial to relay the data reliably
  bluetooth.begin(9600);  // Start bluetooth serial at 9600
}

void loop()
{
  if(bluetooth.available())  // If the bluetooth sent any characters
  {
    // Send any characters the bluetooth prints to the serial monitor
    Serial.print((char)bluetooth.read());  
  }
  if(Serial.available())  // If stuff was typed in the serial monitor
  {
    // Send any characters the Serial monitor prints to the bluetooth
    bluetooth.print((char)Serial.read());
  }
  // and loop forever and ever!
} 
```

当我在 ubuntu 中打开蓝牙管理器时，我发现蓝牙伴侣是可见但未知的，并且当我右键单击它时没有 SPP 连接选项。我浏览的所有教程和博客都通过 SPP 选项连接到蓝牙伴侣。

我的蓝牙管理器的图片：[http ://www2.picturepush.com/photo/a/12001550/640/12001550.jpg](http://www2.picturepush.com/photo/a/12001550/640/12001550.jpg)

那么现在我如何连接到蓝牙伴侣？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:45:00.637

经过大量谷歌搜索和阅读各种博客后，我发现了这个命令：

```
 sudo rfcomm bind 0 00:06:66:48:71:0C 
```

其中 00:06:66:48:71:0C 是 bluetooth mate silver 的 MAC 地址。

一旦我这样做了，我发现蓝牙管理器中我的设备的串行端口选项已启用。我从那里继续连接到设备。

# delphi - 适当的灾难性错误处理

> ID：14422070
> 
> 赞同：4
> 
> 时间：2013-01-20T05:50:08.713
> 
> 标签：delphi, error-handling, delphi-2006, delphi-3

我一直遇到一些我真的没有用 Delphi 程序解决的问题，想知道是否有人可以指导我。正如主题所说，您如何进行适当的灾难性错误处理？例如：

```
// is file necessary for the program present?
if not FileExists(FilePath1) then
   begin
     raise Exception.Create(FilePath1 + ' does not exist and is required for this program to function.');
   // I obviously need to do something here to make the program QUIT and not have
   // any more code run.

     Application.Terminate;
     Abort;
   end; 
```

我也可以在那里使用异常单元并抛出异常，但程序会像以前一样继续。我过去曾使用过暂停调用，但它似乎没有进行任何清理或类似操作，所以我最终为我所做的一切进行了关闭和免费调用的大程序，以确保（即使那样我'不确定任何幕后的东西）。

那么处理此类事情的正确方法是什么？

编辑：澄清一下，我想知道如何让程序做它需要做的清理工作，然后立即退出而不做任何其他代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T08:37:59.497

要执行异常终止调用 Halt() 传递退出代码。

```
if CatastropicErrorDetected then
begin
  ... show error message
  Halt(1);
end; 
```

在 Windows 上，这会导致调用[TerminateProcess](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms682658.aspx)并将在那里停止执行。

您注意到没有执行清理，通常这就是您想要的。由于您在应用程序启动时执行此检查，因此应该没有什么需要清理的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T08:19:21.350

恕我直言，唯一干净的方法是在应用程序运行之前检查“致命情况”。

```
program Project2;

uses
  Forms,Dialogs,
  Unit1 in 'Unit1.pas' {Form1};

{$R *.res}

begin
  ReportMemoryLeaksOnShutDown := true;
  Application.Initialize;
  if True then // your condition here
    begin
      MessageDLG('Fatal Error',mtError,[mbok],0);
    end
  else
    begin
      Application.CreateForm(TForm1, Form1);
      Application.Run;
    end;
end. 
```

任何其他方法都会有副作用

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs;

type
  TForm1 = class(TForm)
    procedure FormCreate(Sender: TObject);
  private
    { Private-Deklarationen }
    FSL:TStringList;
  public
   Destructor Destroy;override;
    { Public-Deklarationen }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

destructor TForm1.Destroy;
begin
  FreeAndNil(FSL);
  Showmessage('Will never be seen with Application.Terminate + HALT');
  inherited;
end;

procedure TForm1.FormCreate(Sender: TObject);
const
  Testing=0; // try 1 and 2 too
begin

   FSL:=TStringList.Create;
   Try
      raise Exception.Create('Terminating now');
   except
     case Testing of
         0: begin
             // exception object will not be freed other code will be prevented, Form won't be shown
             Application.Terminate;
             HALT;
            end;
         1: begin
             // exception object will not be freed Form won't be shown
             HALT;
            end;
         2: begin
             // clean but Form will be shown
             Application.Terminate;
            end;

     end;
   end;

end;

end. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T06:22:31.387

您可以通过调用来指示应用程序全局对象终止程序[`Application.Terminate`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Forms.TApplication.Terminate)。

> 调用 Terminate 以编程方式结束应用程序。通过调用 Terminate 而不是释放应用程序对象，**您可以让应用程序以有序的方式关闭**。
> 
> Terminate 调用 Windows API PostQuitMessage 函数来**执行应用程序的有序关闭**。终止不是立即的。

由于调用可能发生在堆栈的更深处，您还可以[引发 Exception](http://docwiki.embarcadero.com/RADStudio/XE3/en/Exceptions)，并且您将程序编码为不处理它，以便让执行到达主应用程序循环并且默认异常处理程序捕获它。

这样，您可以有效地防止更多代码在您的应用程序中运行。

在代码中它可能看起来像这样：

```
if not FileExists(FilePath1) then
  begin
    MessageDlg(FilePath1 + ' does not exist and is required for this program to function.',
               mtWarning, [mbOK], 0);

    Application.Terminate;
    Abort;  //raising a EAbort just as an example
  end; 
```

根据调用此代码的位置，我建议您不要直接显示消息，而是引发消息异常并让应用程序对象默认的 HandleException 方法为您显示消息：

```
if not FileExists(FilePath1) then
  begin
    Application.Terminate;
    raise EMyFatalException.Create(FilePath1 
      + ' does not exist and is required for this program to function.');
  end; 
```

这对我来说看起来更自然。EMyFatalException 是一个假设的异常类，您可以在 except 子句中声明但从不处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T09:25:30.677

您可以编写自己的`Application.OnException`处理程序，例如：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    procedure HandleException(Sender: TObject; E: Exception);
  end;

var
  Form1: TForm1;

type
  EMyFatalError = class(Exception);

implementation

{$R *.dfm}

procedure TForm1.Button1Click(Sender: TObject);
begin
  Application.OnException:= HandleException;
  raise EMyFatalError.Create('OOPS!');
end;

procedure TForm1.HandleException(Sender: TObject; E: Exception);
begin
  Application.ShowException(E);
  if E is EMyFatalError then
    Application.Terminate;
end;

end. 
```

# jsp - 使用带有 Multipartrequest 的 Java Servlet 上传图像

> ID：14422077
> 
> 赞同：0
> 
> 时间：2013-01-20T05:51:31.710
> 
> 标签：jsp, servlets, image-uploading, multipartform-data

```
 package imageUplaod;

    import java.io.File;
    import java.io.IOException;
    import java.io.PrintWriter;

    import javax.servlet.ServletContext;
    import javax.servlet.ServletException;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;
    import com.oreilly.servlet.MultipartRequest;
    import com.oreilly.servlet.multipart.DefaultFileRenamePolicy;
    import java.util.Enumeration;

     public class UploadImage extends HttpServlet {
       private static final long serialVersionUID = 1L;

    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {        

    final int permitedSize = 314572800;  //~ 300 MB in bytes

    PrintWriter out = response.getWriter();
    response.setContentType("text/html;charset=UTF-8");
    response.setHeader("Cache-Control", "no-cache");
    response.setHeader("Pragma", "No-cache");
    response.setDateHeader("Expires",0);                       

    try{               
       String type = "";
       String name = "";
       String originalFilename = "";
       String extension1 = "";
       String extension2 = "";
       String filename = "";

       String strDirectory = "files";
       ServletContext sc=getServletContext();
       String uploadPath = sc.getRealPath("//WEB-INF//"+strDirectory+"//");

       MultipartRequest multipartRequest = new MultipartRequest(request, uploadPath, permitedSize, "ISO-8859-1", new DefaultFileRenamePolicy()); 

       Enumeration<String> files = multipartRequest.getFileNames();           

          while (files.hasMoreElements()) 
             { 
                 name = files.nextElement();
                 type = multipartRequest.getContentType(name); 
                 filename = multipartRequest.getFilesystemName(name); 
                 originalFilename = multipartRequest.getOriginalFileName(name);                 

                 extension1 = filename.substring(filename.length() - 4, filename.length());
                 extension2 = originalFilename.substring(originalFilename.length() - 4, originalFilename.length());

                 //return a File object for the specified uploaded file                   
                 File currentFile = multipartRequest.getFile(name);
                 InputStream inputStream = new BufferedInputStream(new FileInputStream(currentFile));
                 if(currentFile == null) {
                      out.println("There is no file selected!");
                      return;
                    }

                 //checking the file extensions according to the MIME types
                 if((type.equals("text/plain") || type.equals("image/gif") || type.equals("image/pjpeg")
                   || type.equals("image/x-png") || type.equals("image/jpeg"))) {       
                     //show a few details about the uploaded file        
                     out.println("file: "+filename);
                     out.println("type: "+type); 
                     out.println("size: "+currentFile.length());
                   } else {
                            out.println("\n Invalid format!");
                          } 
                 }                        

       }catch (Exception exception)
          {                     
      response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED);
      } finally { if(out != null) {out.close();} }      
    }       

    public UploadImage() {
        super();
        // TODO Auto-generated constructor stub
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        processRequest(request, response);

    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        processRequest(request, response);

    }
    }

       this is my index page:

    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><%@page
    language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
    <html>
    <head>
    <title>index</title>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    </head>
    <body>

    <h5>O'Reilly COS Upload</h5>
    <table>
    <tr>
     <td align="center">
      <form enctype="multipart/form-data" action="UploadImage" method="POST">
       Select the file to upload: 
       <input type="file" name="userfile">
       <input type="submit" value="Upload">
    </form>
    </td>
    </tr>
   </table>
   </body>
   </html> 
```

**当我运行它时，我收到以下错误：**

```
 Error 404: javax.servlet.UnavailableException: SRVE0203E: Servlet [UploadImage]:  
     imageUplaod.UploadImage was found, but is missing another required class. SRVE0206E: 
```

此错误通常意味着 servlet 最初是使用服务器无法定位的类编译的。SRVE0187E: 检查您的类路径以确保 servlet 所需的所有类都存在。SRVE0210I: 可以通过仅使用应用程序的运行时类路径中的类重新编译 servlet 来调试此问题 SRVE0234I:

```
 Application class path=[C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\java\lib;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\java\lib\dt.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\java\lib\htmlconverter.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\java\lib\ibmorbtools.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\java\lib\jconsole.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\java\lib\tools.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\classes;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\classes;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\EJBCommandTarget.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\IVTClient.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\OTiSConvertTime.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\activation-impl.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\aspectjrt.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\bootstrap.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\bsf-engines.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\cimgr.ops.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\commandlineutils.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\commons-discovery.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\databeans.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\ffdcSupport.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\htmlshell.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\installver.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\installxml.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\iscdeploy.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\ivblogbr.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\j2ee.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\jNative2ascii.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\jacl.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\jrom.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\jsf-nls.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\launchclient.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\lmproxy.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\mail-impl.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\nif.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\pc-appext.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\pmirm4arm.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\rrd-appext.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\rsadbutils.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\rsahelpers.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\serviceadapter.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\setup.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\startup.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\tcljava.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\urlprotocols.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\wses_dynaedge.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\lib\wsif-compatb.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\installedChannels;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\web\help;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\deploytool\itp\plugins\com.ibm.etools.ejbdeploy\runtime;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\deploytool\itp\plugins\com.ibm.etools.ejbdeploy\runtime\batch.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\deploytool\itp\plugins\com.ibm.etools.ejbdeploy\runtime\ejbdeploy.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\deploytool\itp\plugins\com.ibm.etools.ejbdeploy\runtime\ejbmapvalidate.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\derby\lib\derby.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\installedConnectors\sib.api.jmsra.rar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.mq.commonservices.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.mq.connector.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.mq.headers.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.mq.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.mq.jmqi.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.mq.jmqi.local.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.mq.jmqi.remote.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.mq.jmqi.system.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.mq.jms.admin.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.mq.pcf.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.mqjms.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.msg.client.commonservices.j2se.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.msg.client.commonservices.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.msg.client.jms.internal.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.msg.client.jms.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.msg.client.matchspace.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.msg.client.provider.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.msg.client.ref.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.msg.client.wmq.common.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.msg.client.wmq.factories.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.msg.client.wmq.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\com.ibm.msg.client.wmq.v6.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1\installedConnectors\wmq.jmsra.rar\dhbcore.jar;C:\Program Files (x86)\IBM\SQLLIB\java\db2jcc.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\universalDriver\lib\db2jcc_license_cu.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\was70profile1/properties;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/properties;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/lib/startup.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/lib/bootstrap.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/lib/jsf-nls.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/lib/lmproxy.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/lib/urlprotocols.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/deploytool/itp/batchboot.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/deploytool/itp/batch2.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/java/lib/tools.jar;C:\Users\drunkendeath\IBM\rationalsdp\workspace\UploadImage\WebContent\WEB-INF\classes;C:\Users\drunkendeath\IBM\rationalsdp\workspace\UploadImage\WebContent] 
```

那么这里出了什么问题，有人可以解释吗？我已经包含了所有的 .jars。代码没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T06:35:13.267

该错误告诉您 Websphere 未找到您的其中一个导入。您使用的唯一类是 O'Reilly 类和标准 Java 类。它极不可能是未找到的 Java 类之一。

确保 O'Reilly jar 位于您的 WEB-INF/lib 目录中或将其放入 Websphere 的类路径中。如果它在那里，请重新启动 Websphere（我在 IBM 时使用的产品中的标准修复它的解决方案）。

# android - .git/hooks 未生成新的更改 id

> ID：14422078
> 
> 赞同：0
> 
> 时间：2013-01-20T05:51:56.167
> 
> 标签：android, git, gerrit, repository

我正在尝试将更改推送到远程服务器并遇到“更改已关闭”错误，那是因为尝试推送的更改 ID 与已推送的早期更改相同（不知道为什么相同），我尝试了要使用 .git/hook 生成新的提交消息，它会生成一个新的提交消息，但我的更改 ID 仍然相同，我仍然无法推送，关于为什么没有生成新的更改 ID 的任何输入？

```
<username:promt>git push ssh://repo.company.com:29418/platform/vendor/com-proprietary/radio HEAD:refs/for/master
Counting objects: 1852, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (688/688), done.
Writing objects: 100% (809/809), 1.37 MiB, done.
Total 809 (delta 678), reused 177 (delta 95)
remote: Resolving deltas: 100% (678/678)
remote: Processing changes: refs: 1, done    
To ssh://username@repo.company.com:29418/platform/vendor/com-proprietary/radio
 ! [remote rejected] HEAD -> refs/for/master (change 219386 closed)
error: failed to push some refs to 
'ssh://username@repo.company.com:29418/platform/vendor/com-proprietary/radio' 
```

尝试使用以下方法生成更改 ID

```
cd .git/hooks
scp -p -P 29418 username@repo.company.com:hooks/commit-msg .
cd ../.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T06:13:03.597

`! [remote rejected] HEAD -> refs/for/master (change 219386 closed)`

看起来更改已被放弃（从您上次更改中**恢复***Gerrit WebUI*中的更改并重试`push`）或已提交/合并（`push`您`commit`的新更改）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:34:58.647

您运行以生成更改 ID 的命令仅将提交挂钩复制到您的存储库。现在你应该做

```
git commit --amend 
```

从消息中删除现有的更改 id，提交挂钩将为您创建一个新的。提交挂钩使用以下内容创建更改 ID：

*   提交的树的 SHA-1
*   父提交的 SHA-1
*   作者的姓名、电子邮件地址、时间戳
*   提交者的姓名、电子邮件地址、时间戳
*   提议的提交消息（在插入 Change-Id 之前）

如果您更改其中任何一个，您将获得不同的 id。当然，最容易编辑提交消息。

# matlab - 对照矩阵元素检查向量元素

> ID：14422079
> 
> 赞同：2
> 
> 时间：2013-01-20T05:52:09.037
> 
> 标签：matlab, vector, matrix, compare, element

检查第一次出现的向量中的任何元素是否存在于矩阵中的正确方法是什么？例如，如果我有

```
A = [1, 3] 
```

和

```
B = [ 1, 2 ; 
      1, 4 ; 
      2, 3 ; 
      2, 4 ; 
      3, 4 ]; 
```

我应该得到一些东西，它返回满足这个条件的矩阵 B 的索引。所以对于我应该得到的例子。

指数 = [1, 1]

我正在使用 MATLAB R2012a

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T05:54:03.270

你可以使用[`ismember`](http://www.mathworks.com/help/matlab/ref/ismember.html)：

```
vec=ismember(A,B); 
```

或者

```
vec=ismember(B,A) 
```

取决于你想要什么（A的元素在B中找到，反之亦然）。然后你可以

```
[row col]=find(vec,1, 'first') 
```

获取索引位置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T17:01:21.777

必须尝试`strfind`在 Matlab 中使用命令。

你可以尝试这样的事情：

```
res = strfind(B(:)',A) 
```

这将给出 A 在 B 中的所有出现。所以，第一次出现将是`res(1)`

希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T06:34:24.297

为了在矩阵中搜索向量的**所有**元素，您可以使用：`A``B``bsxfun`

```
tmp = bsxfun( @eq, B(:), A ); 
```

这种比较忽略了矩阵的形状，`B`并将其视为一堆元素。在您的示例中，`B`有`10`元素和`A`有`2`，因此`tmp`是大小的**二进制**矩阵，`10x2`其中`true`任何地方`B`都等于 的元素`A`。

要找到它的第一个元素`B`等于你的**任何**元素，`A`只需执行

```
idx = find( any( tmp, 2 ), 1, 'first' ); 
```

将线性索引`idx`转换为行列对`B`

```
[r c] = ind2sub( size(B), idx ); 
```

干杯!

# ios - 在视图控制器上启用滑动，但在该 VC 的视图中禁用

> ID：14422080
> 
> 赞同：0
> 
> 时间：2013-01-20T05:53:26.433
> 
> 标签：ios, uiview, uiviewcontroller, uigesturerecognizer

我有一个 UIViewController，其中有 2 个 UISwipeGestureRecognizers 处理撤消和重做（向右滑动以撤消，向左滑动以重做）。在这个 VC 中，我还有一个 UIView，它跟踪触摸开始/移动/结束以更改另一个 UIView 上的颜色。顺便说一句，撤消/重做与颜色变化有关。

我遇到的问题是，当我在换色器视图中执行触摸事件时，它们有时被解释为滑动并且正在发生撤消/重做。

如何仅为相关 UIView 禁用滑动手势，但保留在 VC 的其他区域执行滑动的能力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T06:04:50.517

让视图控制器成为手势识别器的委托，然后实现这个委托方法：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {

    return touch.view != self.mySubviewToExclude;
} 
```

# choice - 伊莎贝尔集的最大值

> ID：14422089
> 
> 赞同：5
> 
> 时间：2013-01-20T05:54:28.960
> 
> 标签：choice, isabelle

如何在 Isabelle 的一组数字 (nat) 中找到最大元素。max 函数不起作用，因为它只定义为取两个元素中的最大值。我知道如何使用类似 reduce 的函数来实现它，但我不知道如何从一组中选择一个随机元素。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T20:07:48.633

您正在寻找的功能被称为`Max`。如果您正在寻找基本常量，Isabelle 官方文档中的[What's in Main](http://isabelle.in.tum.de/dist/Isabelle2012/doc/main.pdf "主要有什么")指南通常很有用。还有一个`find_consts`命令可用于按类型搜索功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T17:26:02.783

如果您遵循主 HOL 库中`Max`to theory的定义`Big_Operators`，您会看到它是这样定义的：

```
Max = fold1 max 
```

组合`fold1`器是适用于有限集的“类约归函数”。另请参阅理论`Finite_Set`及其语言环境`folding`，了解此处折叠任意集合而不是具体列表所需的数学背景。

# javascript - css/javascript - 如何实现这些不寻常的设计要求？

> ID：14422090
> 
> 赞同：-3
> 
> 时间：2013-01-20T05:54:44.023
> 
> 标签：javascript, html, css

我有一个页眉 div 和页脚 div。标题 div 从不移动；但是，无论屏幕大小如何，页脚 div 都必须位于窗口底部，即“粘性页脚”。在这两个 div 之间是一个动态填充的内容 div。

1.  内容 div 的底部直接位于页脚 div 的顶部，它必须随着页脚 div 上下移动（当屏幕尺寸垂直扩展和收缩时）。它也可以被认为是“粘性的”。

2.  但是，如果有足够的内容，则内容 div 必须垂直扩展（内容 div 的底部仍直接保留在页脚 div 的顶部）以容纳尽可能多的内容。这将发生，直到内容 div 的顶部运行到标题 div...

3.  然后，如果在页眉和页脚 div 之间显示的内容过多，则内容 div 将变为可滚动的，内容 div 的高度会收缩，从而不会与页眉 div 重叠或与页脚 div 重叠。

4.  同样，内容 div 永远不能与页眉 div 或页脚 div 重叠。如果两个 div 之间没有足够的空间在一个视图中显示所有内容，则内容 div 必须变为可滚动的`overflow-y: scroll;`。

这解释了我迄今为止的（徒劳的）尝试：
我还没有成功完成任何这些。我所拥有的东西很少，而且基本上没用。我遇到的一些问题是： 如果我制作页脚 div`position: absolute; bottom: 0px;`这将是一个“粘性页脚”，并且无论垂直屏幕大小如何，都会留在我的屏幕底部。然而，通过这种绝对定位，内容 div 将很高兴地与页脚重叠。我试图通过制作内容 div 来防止这种情况`position: absolute; bottom: 180px;`。这`180px`是我的页脚 div 的高度。这行得通……有点。当需要动态添加内容时，它很快就会成为一个问题。内容 div 的顶部将很快与标题 div 重叠......所以我为内容 div 设置了一个固定高度，并在超过该高度时启用滚动，但这并没有考虑到比我自己更大的屏幕可能有更多空间显示内容的地方。

最终，这些都不是我需要的方式。使用 CSS 和/或 javascript（如果需要）完成此任务的最佳方法是什么？而且，是否有一个很好的起点可以让我走上您可能知道的正确轨道？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T05:58:18.443

我不认为这在没有`flexbox`. 如果你足够幸运，只需要支持支持 flexbox 的浏览器（或者如果你可以回退到旧浏览器中的标准布局），你可以试试这个：

**HTML：**

```
<header></header>

<div class="content">
    <div class="container"></div>
</div>

<footer></footer> 
```

**CSS：**

```
header, footer {
    position: fixed;
    left: 0; right: 0;
    height: 100px;
}

header { top: 0 }
footer { bottom: 0 }

.content {
    position: fixed;
    top: 100px; bottom: 100px;
    left: 0; right: 0;
    overflow-y: scroll;

    display: -webkit-flex;
    display: -moz-flex;
    display: -o-flex;
    display: flex;

    -webkit-align-items: flex-end;
    -moz-align-items: flex-end;
    -o-align-items: flex-end;
    align-items: flex-end;
} 
```

这是小提琴：http: [//jsfiddle.net/qhKa9/](http://jsfiddle.net/qhKa9/)

* * *

如果您对 JavaScript 的依赖没有问题，那么可能会有一个不同的解决方案，它具有更深入的浏览器支持。这是一个镜头。

**CSS：**

```
header, footer {
    position: fixed;
    left: 0; right: 0;
    height: 100px;
}

header { top: 0 }
footer { bottom: 0 }

.content {
    position: fixed;
    top: 100px; bottom: 100px;
    left: 0; right: 0;
    overflow-y: scroll;
}

.container {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
} 
```

**JavaScript**（使用 jQuery）：

```
var $content = $('.content'),
    $container = $('.container'),
    containerHeight = $container.outerHeight();

$(window).resize(function () {
    $container.css({
        position: $content.innerHeight() > containerHeight ? 'absolute' : 'static'
    });
}).resize(); 
```

这是小提琴：http: [//jsfiddle.net/N672c/](http://jsfiddle.net/N672c/)

**PS**您可能应该[限制](http://underscorejs.org/#throttle)调整事件侦听器的大小，但这是[另一天的讨论](http://ejohn.org/blog/learning-from-twitter/)。

# asp.net - 计算 Gridview 中的记录并显示标签消息

> ID：14422096
> 
> 赞同：0
> 
> 时间：2013-01-20T05:56:08.443
> 
> 标签：asp.net, count, microsoft-expression-web

我有一个“待处理记录页面”，我想计算所有待处理的记录。例如，我想在我的主页中添加“您有（记录数）个新的待处理记录”我想在我的页面中添加它。就像在 Facebook 中一样。从字面上看，它就像一条通知消息:) 例如，我想在我的主页上显示“您有 23 条新的待处理记录”。代码是什么？请帮忙。

这是我主页的截图。我在油漆中编辑。您可以看到我想要显示的标签文本消息。

![在此处输入图像描述](../Images/1e48f2b0f559e1e5f970b01ae3a66c30.png)

这是我的待处理记录页面的代码：

```
<%@ Page Language="C#" Debug="true" %>
<%@ Import Namespace="System" %>
<%@ Import Namespace="System.Data" %>
<%@ Import Namespace = "System.Data.SqlClient" %>
<%@ Import Namespace= "System.Data.OleDb" %>
<title>Pending Records</title>

<head>
<style type="text/css">
.style1 {
    background-image: url('images/pending.jpg');
}
.style2 {
    margin-bottom: 0px;
}
</style>
<script type="text/javascript">
<!--
function FP_swapImgRestore() {//v1.0
 var doc=document,i; if(doc.$imgSwaps) { for(i=0;i<doc.$imgSwaps.length;i++) {
  var elm=doc.$imgSwaps[i]; if(elm) { elm.src=elm.$src; elm.$src=null; } } 
  doc.$imgSwaps=null; }
}

function FP_swapImg() {//v1.0
 var doc=document,args=arguments,elm,n; doc.$imgSwaps=new Array(); for(n=2; n<args.length;
 n+=2) { elm=FP_getObjectByID(args[n]); if(elm) { doc.$imgSwaps[doc.$imgSwaps.length]=elm;
 elm.$src=elm.src; elm.src=args[n+1]; } }
}

function FP_preloadImgs() {//v1.0
 var d=document,a=arguments; if(!d.FP_imgs) d.FP_imgs=new Array();
 for(var i=0; i<a.length; i++) { d.FP_imgs[i]=new Image; d.FP_imgs[i].src=a[i]; }
}

function FP_getObjectByID(id,o) {//v1.0
 var c,el,els,f,m,n; if(!o)o=document; if(o.getElementById) el=o.getElementById(id);
 else if(o.layers) c=o.layers; else if(o.all) el=o.all[id]; if(el) return el;
 if(o.id==id || o.name==id) return o; if(o.childNodes) c=o.childNodes; if(c)
 for(n=0; n<c.length; n++) { el=FP_getObjectByID(id,c[n]); if(el) return el; }
 f=o.forms; if(f) for(n=0; n<f.length; n++) { els=f[n].elements;
 for(m=0; m<els.length; m++){ el=FP_getObjectByID(id,els[n]); if(el) return el; } }
 return null;
}
// -->
</script>
</head>

<script runat="server" type="css">

protected void PendingRecordsGridview_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    PendingRecordsGridview.PageIndex = e.NewPageIndex;

    PendingRecordsGridview.DataBind();

}

protected void Page_Load(object sender, EventArgs e)
{

}

protected void PendingRecordsGridview_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "accept")
    {
        Session["ID"] = e.CommandArgument.ToString();
        OleDbConnection con = new OleDbConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
            con.Open();
            OleDbCommand cmd1 = new OleDbCommand("INSERT INTO DriversRecords (ID, FirstName, LastName, MiddleName, Address, Gender, ContactNumber, PlateNumber, Color, Brand, LiscensedNumber, [Image]) SELECT ID, FirstName, LastName, MiddleName, Address, Gender, ContactNumber, PlateNumber, Color, Brand, LiscensedNumber, [Image]  FROM PendingRecords where ID="+Session["ID"].ToString()+"", con);
            OleDbCommand cmd2 = new OleDbCommand("delete from PendingRecords where ID="+Session["ID"].ToString()+"", con);
            cmd1.ExecuteNonQuery();
            cmd2.ExecuteNonQuery();

        PendingRecordsGridview.DataBind();
    }
}

public void PendingRecordsGridview_RowDeleting(Object sender, GridViewDeleteEventArgs e)
{

}

</script>
<body onload="FP_preloadImgs(/*url*/'images/backhover.jpg')" style="margin: 0; background-color: #808080">

<form id="form1" runat="server" class="style2" style="height: 646px">

<table style="width: 1150px; height: 646px" cellspacing="0" cellpadding="0" align="center" class="style1">
    <!-- MSTableType="layout" -->
    <tr>
    <td>&nbsp;</td>
    <td></td>
    <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>

        <td style="height: 98px">&nbsp;</td>
        </tr>
    <tr>
        <td>&nbsp;</td>
        <td></td>
        <td valign="top"><a href="passwordprotect.asp">
        <img alt="" src="images/back.jpg" width="83" height="32" id="img1" onmouseout="FP_swapImgRestore()" onmouseover="FP_swapImg(1,1,/*id*/'img1',/*url*/'images/backhover.jpg')"></a></td>

        <td>&nbsp;</td>
        <td>&nbsp;</td>

        <td>&nbsp;</td>
        <td style="height: 36px">&nbsp;</td>

        </tr>
    <tr>

        <td>&nbsp;</td>
        <td></td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td style="height: 23px">&nbsp;</td>
        </tr>
    <tr>
        <td>&nbsp;</td>
        <td></td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td valign="top">
<asp:SqlDataSource runat="server" id="sd1" ProviderName="<%$ ConnectionStrings:ConnectionString.ProviderName %>" ConnectionString="<%$ ConnectionStrings:ConnectionString %>" SelectCommand="SELECT * FROM [PendingRecords]" DeleteCommand="DELETE FROM [PendingRecords] WHERE [ID] = ?" InsertCommand="INSERT INTO [PendingRecords] ([Username], [Password], [FirstName], [LastName], [MiddleName], [Address], [Gender], [ContactNumber], [PlateNumber], [Color], [Brand], [LiscensedNumber]) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)" UpdateCommand="UPDATE [PendingRecords] SET [Username] = ?, [Password] = ?, [FirstName] = ?, [LastName] = ?, [MiddleName] = ?, [Address] = ?, [Gender] = ?, [ContactNumber] = ?, [PlateNumber] = ?, [Color] = ?, [Brand] = ?, [LiscensedNumber] = ? WHERE [ID] = ?">
    <DeleteParameters>
        <asp:parameter Name="ID" Type="Int32" />
    </DeleteParameters>
    <UpdateParameters>
        <asp:parameter Name="Username" Type="String" />
        <asp:parameter Name="Password" Type="String" />
        <asp:parameter Name="FirstName" Type="String" />
        <asp:parameter Name="LastName" Type="String" />
        <asp:parameter Name="MiddleName" Type="String" />
        <asp:parameter Name="Address" Type="String" />
        <asp:parameter Name="Gender" Type="String" />
        <asp:parameter Name="ContactNumber" Type="String" />
        <asp:parameter Name="PlateNumber" Type="String" />
        <asp:parameter Name="Color" Type="String" />
        <asp:parameter Name="Brand" Type="String" />
        <asp:parameter Name="LiscensedNumber" Type="String" />
        <asp:parameter Name="ID" Type="Int32" />
    </UpdateParameters>
    <InsertParameters>
        <asp:parameter Name="Username" Type="String" />
        <asp:parameter Name="Password" Type="String" />
        <asp:parameter Name="FirstName" Type="String" />
        <asp:parameter Name="LastName" Type="String" />
        <asp:parameter Name="MiddleName" Type="String" />
        <asp:parameter Name="Address" Type="String" />
        <asp:parameter Name="Gender" Type="String" />
        <asp:parameter Name="ContactNumber" Type="String" />
        <asp:parameter Name="PlateNumber" Type="String" />
        <asp:parameter Name="Color" Type="String" />
        <asp:parameter Name="Brand" Type="String" />
        <asp:parameter Name="LiscensedNumber" Type="String" />
    </InsertParameters>
</asp:SqlDataSource>
        </td>
        <td>&nbsp;</td>
        <td style="height: 33px;">&nbsp;</td>
        </tr>
    <tr>
        <td>&nbsp;</td>
        <td></td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td style="height: 30px">&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td valign="top" colspan="5">
<asp:GridView OnPageIndexChanging="PendingRecordsGridview_PageIndexChanging" ID="PendingRecordsGridview" runat="server" AutoGenerateColumns="False" DataKeyNames="ID" OnRowcommand="PendingRecordsGridview_RowCommand" DataSourceID="sd1" BorderStyle="Ridge" BackColor="White" BorderColor="Black" BorderWidth="3px" CellPadding="4" Width="1089px" PageSize="2" AllowPaging="True" OnRowDeleting="PendingRecordsGridview_RowDeleting">
        <RowStyle ForeColor="#003399" HorizontalAlign="Center" />
        <Columns>
            <asp:templatefield HeaderText="Accept">
                <ItemTemplate>
                    <asp:Button CommandArgument='<%# Bind("ID") %>' ID="Button1" runat="server" CausesValidation="false" CommandName="accept" Text="Accept" />
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Ignore">
                <ItemTemplate>
                    <asp:Button ID="deleteButton" runat="server" CommandName="Delete" Text="Ignore" CausesValidation="False" OnClientClick="return confirm('Are you sure you want to cancel this request?');" />
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="First Name" SortExpression="FirstName">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("FirstName") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label3" runat="server" Text='<%# Bind("FirstName") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Last Name" SortExpression="LastName">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("LastName") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label4" runat="server" Text='<%# Bind("LastName") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Middle Name" SortExpression="MiddleLastName">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("MiddleName") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label5" runat="server" Text='<%# Bind("MiddleName") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Address" SortExpression="Address">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Address") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label6" runat="server" Text='<%# Bind("Address") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Gender" SortExpression="Gender">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Gender") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label7" runat="server" Text='<%# Bind("Gender") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Contact No." SortExpression="ContactNumber">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("ContactNumber") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label18" runat="server" Text='<%# Bind("ContactNumber") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Plate No." SortExpression="PlateNumber">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("PlateNumber") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label19" runat="server" Text='<%# Bind("PlateNumber") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Mobile Color" SortExpression="Color">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Color") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label11" runat="server" Text='<%# Bind("Color") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Brand" SortExpression="Brand">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Brand") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label12" runat="server" Text='<%# Bind("Brand") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Liscenced No." SortExpression="LiscensedNumber">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("LiscensedNumber") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label10" runat="server" Text='<%# Bind("LiscensedNumber") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield>
                <HeaderTemplate>
                    Image
                </HeaderTemplate>
                <ItemTemplate>
                    <img src="data:image/jpg;base64,<%# Eval("Image") != System.DBNull.Value ? Convert.ToBase64String((byte[])Eval("Image")) : string.Empty %>" alt="image" height="85" width="85" />
                </ItemTemplate>
            </asp:templatefield>
        </Columns>
        <FooterStyle BackColor="#99CCCC" ForeColor="#003399" />
        <PagerStyle HorizontalAlign="Center" BackColor="#999999" ForeColor="#003399" />
        <SelectedRowStyle BackColor="#009999" Font-Bold="True" ForeColor="#CCFF99" />
        <HeaderStyle BackColor="#A0A0A0" Font-Bold="True" ForeColor="#003399" HorizontalAlign="Center" />
        <AlternatingRowStyle BorderColor="Black" BorderWidth="3px" BorderStyle="Ridge" />
    </asp:GridView>
        </td>
        <td style="height: 333px">&nbsp;</td>
    </tr>
    <tr>
        <td style="width: 29px">&nbsp;</td>
        <td style="width: 3px"></td>
        <td style="width: 95px">&nbsp;</td>
        <td style="width: 33px">&nbsp;</td>
        <td style="width: 542px">&nbsp;</td>
        <td style="width: 422px">&nbsp;</td>
        <td style="height: 93px; width: 26px">&nbsp;</td>
    </tr>
</table>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T06:19:21.723

这只是伪代码，但它与您将在代码中放入的内容非常接近。

从 id=Session["ID"].ToString() 的 pendingrecords 中选择 count(id) 作为 PendingRecordCount

# ruby-on-rails - Rails 中的反向多态关联（访问父级的属性）

> ID：14422101
> 
> 赞同：1
> 
> 时间：2013-01-20T05:56:40.410
> 
> 标签：ruby-on-rails, polymorphic-associations

我用这个问题的选定答案在 Rails 中实现了一个反向多态的示例： [Reverse Polymorphic Associations](https://stackoverflow.com/questions/3487730/reverse-polymorphic-associations)

有了这个，我们可以做到以下几点：

```
t = Article.new
t.article_elements  # []
p = Picture.new
t.article_elements.create(:element => p)
t.article_elements  # [<ArticleElement id: 1, article_id: 1, element_id: 1, element_type: "Picture", created_at: "2011-09-26 18:26:45", updated_at: "2011-09-26 18:26:45">]
t.pictures # [#<Picture id: 1, created_at: "2011-09-26 18:26:45", updated_at: "2011-09-26 18:26:45">] 
```

我想知道是否可以修改它，这样如果我这样做 `t.article_elements`，我也可以看到图片的属性。例如，如果我有一个用于变量 p 的 picture_name 属性，我如何从 t.article_elements 访问它？所以基本上，我试图从子对象访问父对象的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:38:14.433

*请注意，这`t.article_elements`是一个集合。我将`article_element`用来指代集合中的一个成员。*

根据你的例子，

```
article_element.element.picture_name 
```

将工作。

但是，由于属性不匹配，您会遇到未定义方法的问题。例如，视频将没有`picture_name`属性。如果所有元素类型共享一个公共属性，例如`name`，那就没问题了。

避免此问题的一种方法是检查元素是否响应给定的属性方法。例如：

```
# models/article_element.rb
def element_try(method)
  self.element.respond_to?(method) ? self.element.send(method) : ""
end 
```

如果我们的元素是视频并且我们调用：

```
article_element.element_try(:picture_name) # => "" 
```

我们将得到一个空白字符串而不是`NoMethodError`.

这个解决方案有点hacky，所以使用风险自负。就个人而言，我会改用通用属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-20T20:00:45.913

我有类似的情况。

```
class User < ActiveRecord::Base
    has_one :image, as: :imageable
end
class Person < ActiveRecord::Base
    has_one :image, as: :imageable
end
class Image < ActiveRecord::Base
    belongs_to :imageable, :polymorphic => true
end 
```

当您想访问图像的父级时，您可以这样做`Image.last.imageable`，这将为您提供 User 或 Person 对象。它与 has_many 关系相同。

# r - 对给定时间序列的数据进行插值，并用 R 中的方程绘制散点图

> ID：14422105
> 
> 赞同：-1
> 
> 时间：2013-01-20T05:57:47.663
> 
> 标签：r, plot, scatter-plot

我有一个超过 2500 个点的时间序列。我也观察过数据集，但它不是连续的。我想使用观察到的数据集并从时间序列数据中找出建模数据。在同一时间找到建模数据后，我想绘制相关图并在图上显示方程和相关系数。

示例时间序列可在以下链接中找到 [https://www.dropbox.com/s/uxg0g1h7vbhxp3z/33010G10.csv](https://www.dropbox.com/s/uxg0g1h7vbhxp3z/33010G10.csv)

观测数据如下：

```
260.323 25.170
267.316 25.520
274.313 24.950
281.333 25.140
288.326 24.130
295.319 19.540
302.330 10.280
309.323 17.340
317.326 18.300
323.323 11.280
329.355 12.450
337.333 9.050
351.323 14.620
364.389 16.350
372.368 19.400
379.382 10.980
393.382 14.260
414.377 11.640
421.382 10.660
428.378 3.950
435.382 18.950
442.378 18.180
449.378 20.570
456.368 18.400
463.375 11.770
470.382 18.130
477.372 18.370
484.368 21.310
491.375 24.200
498.378 24.070
505.382 18.600
512.389 24.670
526.392 28.310
533.406 28.310
540.399 28.700
547.375 28.400
554.389 27.050 
```

请让我知道如何有效地安排数据集，以便我可以在其他几个位置重复此操作。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T08:33:04.940

包'plottrix'中有一个`textbox`功能。对于绘制回归线，这应该足够了

```
 plot(dat$Date,dat$Minimum)
 abline(coef(lm(Minimum~Date, data=dat))) 
```

您需要通过“安排数据集以便我可以在其他几个位置重复此操作”来描述您的意思。

# java - 缺少退货声明是否可以修复？

> ID：14422108
> 
> 赞同：-2
> 
> 时间：2013-01-20T05:58:14.467
> 
> 标签：java

我不知道为什么这总是编译说它缺少返回语句，如果有人可以帮助我，那就太好了！我已经尝试了几个小时，但仍然不明白为什么这段代码无法编译。我对 java 不是很好，但这段代码对我来说看起来很完美。

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Point;
import java.awt.Rectangle;

import javax.swing.JFrame;
import javax.swing.JOptionPane;

import net.xotiksys.api.ActiveScript;
import net.xotiksys.api.Manifest;
import net.xotiksys.api.methods.input.Mouse;
import net.xotiksys.api.methods.recognition.ColorRecognition;
import net.xotiksys.api.painting.Paintable;
import net.xotiksys.api.util.Time;

@Manifest(author = "iwrestledabearonce", description = "Auto Miner with bank support", name = "MiningBot", version = 1.0)
public class MiningBot extends ActiveScript implements Paintable {

    private int Mined;
    private Color ITEM = new Color(0, 0, 0);
    private static final Color addy = new Color(74, 93, 74);
    private static final Rectangle magicTab = new Rectangle(629, 170, 28, 30);
    private static final Rectangle inv = new Rectangle(551, 206, 185, 255);
    private static final Rectangle GFrame = new Rectangle(2, 3, 517, 339);
    private static final long START_TIME = System.currentTimeMillis();
    private Point ROCK = null;
    private Point rockToMine = null;
    private String Status = "Starting Auto Miner by iwrestledabearonce - Version 1.0 - Please be patient...";
    private String TempColor = "";

    @Override
    public int script() {
        Time.sleep(700);
        if (ROCK != null) {
            startMining(); //by iwrestledabearonce
        }
        else
            return 700;
    }

    public void startMining() {
    do {
            ROCK = ColorRecognition.getPoint(addy, 2, inv);
            rockToMine = ColorRecognition.getPoint(ITEM, 2, inv);
                if (ROCK != null) {
                    Mouse.click(ROCK, 0, 0, true);
                    Time.sleep(700);
                    Mined++;
                    Status = "Mining Ore...";
                    stopScript();
            } while (ROCKS != null && validate());
    }

    public void paint(final Graphics g) {
        g.setColor(Color.ORANGE);
        int ycoord = 349;
        g.drawString("Status: " + Status, 15, ycoord += 10);
        g.drawString("Rock's Mined: " + Mined, 15, ycoord += 20);
        g.drawString("Run Time: "+ Time.format(System.currentTimeMillis() - START_TIME),15, ycoord += 30);
    }
} 
```

上面的新代码现在会在下面创建此错误：

```
Scripts\MiningBot.java:52: error: while expected
        }
         ^
Scripts\MiningBot.java:56: error: illegal start of expression
        public void paint(final Graphics g) {
               ^
Scripts\MiningBot.java:56: error: ')' expected
        public void paint(final Graphics g) {
                   ^
Scripts\MiningBot.java:56: error: ';' expected
        public void paint(final Graphics g) {
                         ^
Scripts\MiningBot.java:56: error: ';' expected
        public void paint(final Graphics g) {
                                          ^
Scripts\MiningBot.java:63: error: reached end of file while parsing
}
 ^
6 errors

C:\Users\TJ\Desktop\XotikColor>pause
Press any key to continue . . . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T06:00:51.530

问题出在`script`方法上。您应该始终返回一个值。我正在展示编译器如何读取您的代码：

```
public int script() {
    Time.sleep(700);
    if (ROCK != null) {
        startMining(); //by iwrestledabearonce
    } else {
        return 700;
    }
    //where's the result?
} 
```

为了使这个工作，改变方法来返回一些东西。一种方法是`else`从`if`代码块中删除 ，如下所示：

```
public int script() {
    Time.sleep(700);
    if (ROCK != null) {
        startMining(); //by iwrestledabearonce
    }
    return 700;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T06:07:19.920

问题出现是因为，if `(ROCK!= null )`is`false` `700`会被返回，if`true`会返回什么？？？所以，还要`return`在里面添加一条语句`if block`

```
public int script() {
        Time.sleep(700);
        if (ROCK != null) {
            startMining(); //by iwrestledabearonce
        }
        else
            return 700;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T06:16:01.437

编辑：看起来你在你的程序中粘贴了一个额外的 { 或 }，这把整个事情都扔掉了。撤消您所做的任何更改，在 return(700) 之后通过 } 从 public int script() 中删除整个块并粘贴：

```
public int script() {
    Time.sleep(700);
    if (ROCK != null) {
        startMining(); //by iwrestledabearonce
    } else {}
    return 700;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T06:00:34.783

在这里，您仅在 else 块而不是 if 块的情况下返回：

```
public int script() {
        Time.sleep(700);
        if (ROCK != null) {
            startMining(); //by iwrestledabearonce
        }
        else
            return 700;
    } 
```

您应该从所有可能的分支返回一些值，而不仅仅是一个

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T06:01:17.530

失去`else`：

```
 public int script() {
        Time.sleep(700);
        if (ROCK != null) {
            startMining(); //by iwrestledabearonce
        } // ELSE REMOVED
        return 700;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-20T06:03:02.150

这是因为您开始了 else 语句并且没有关闭它。要么删除 else 语句，要么这样做：

```
 public int script() {
        Time.sleep(700);
        if (ROCK != null) {
            startMining(); //by iwrestledabearonce
        } else {}
        return 700; 
```

# vb.net - 如何在 VISUAL BASIC 中创建自己的数据类型变量？

> ID：14422113
> 
> 赞同：-1
> 
> 时间：2013-01-20T05:58:35.500
> 
> 标签：vb.net, binary

**我想创建我自己的仅包含两个值 0 和 1 的变量**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T07:14:18.897

您不能在 Visual Basic .NET 中创建任何此类数据类型

# android - IllegalArgumentException：文件包含路径分隔符

> ID：14422115
> 
> 赞同：6
> 
> 时间：2013-01-20T05:58:42.810
> 
> 标签：android

我正在尝试检查应用程序内部存储的子目录中是否存在 zip：

```
File file = this.getApplicationContext().getFileStreamPath(this.getFilesDir().getAbsolutePath() + "/thesubdirectory/the.zip";
if(file.exists()) {
    Log.e(this.class.getName(), "file exists");
} 
```

这是抛出一个`java.lang.IllegalArgumentException: File /data/data/my.package.name/files/thesubdirectory/the.zip contains a path separator`.

为什么会这样？我认为这是您*应该*检查文件是否存在的方式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T06:02:22.637

file.exists 是。但是 getFileStreamPath 不能采用路径，它需要在该目录中采用文件名。试试这个：

```
File file = new File(this.getFilesDir().getAbsolutePath() + "/thesubdirectory/the.zip"); 
```

# jquery - 如何为此添加淡入淡出过渡？

> ID：14422116
> 
> 赞同：0
> 
> 时间：2013-01-20T05:58:49.367
> 
> 标签：jquery, transition

我有这个 jQuery 内容切换器，它只是在内容之间切换而没有效果。我希望它有一个简单的淡入淡出效果。我该怎么做才能添加它？

这是[小提琴](http://jsfiddle.net/LjHfZ/5/)，这是 jQuery 代码。

```
$(function(){

    function contentSwitcher(settings){
        var settings = {
           contentClass : '.content',
           navigationId : '#navigation'
        };

        //Hide all of the content except the first one on the nav
        $(settings.contentClass).not(':first').hide();
        $(settings.navigationId).find('li:first').addClass('active');

        //onClick set the active state, 
        //hide the content panels and show the correct one
        $(settings.navigationId).find('a').click(function(e){
            var contentToShow = $(this).attr('href');
            contentToShow = $(contentToShow);

            //dissable normal link behaviour
            e.preventDefault();

            //set the proper active class for active state css
            $(settings.navigationId).find('li').removeClass('active');
            $(this).parent('li').addClass('active');

            //hide the old content and show the new
            $(settings.contentClass).hide();
            contentToShow.show();
        });
    }
    contentSwitcher();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T06:01:03.617

替换这个：

```
 //hide the old content and show the new
    $(settings.contentClass).hide();
    contentToShow.show(); 
```

有了这个：

```
 //hide the old content and show the new
    $(settings.contentClass).fadeOut(800, function() {
       contentToShow.fadeIn(800);
    }); 
```

该[`.fadeOut()`方法](http://api.jquery.com/fadeout/)接受一个回调作为参数 - 它会在淡入淡出完成后调用您提供的函数，这是开始淡入其他内容的适当时间（在我看来）。

您可以通过提供字符串 (`"fast"`或`"slow"`) 或毫秒数来设置淡入淡出的速度。

演示：http: [//jsfiddle.net/LjHfZ/8/](http://jsfiddle.net/LjHfZ/8/)

# c++ - 接收函子作为参数的最通用方法？

> ID：14422122
> 
> 赞同：0
> 
> 时间：2013-01-20T06:00:35.427
> 
> 标签：c++, c++11

我正在为多线程方案编写一个包装器。它应该像计时器一样运行。

我有一个特定的类 ( `clock`)，它实现了一个调用的函数，该函数`tick`应该传递给构造函数。如何将 C++ 风格的函数（myClass::myfunction，与 C 约定相对）描述为方法或构造函数的参数？

有人愿意向我展示这种构造函数的声明吗？

```
clock myInstance(otherClass::aMethod)
myInstance.tick(); // Should call otherClass::aMethod
myInstance.tick(); 
```

C++11 和 Bind 有帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T06:24:06.613

您可以调用类的静态成员函数或对象的非静态成员函数。非静态成员函数需要具有对象（`this`指针）的上下文。

这是一个简化示例，说明如何使用仿函数和绑定来调用成员函数。

```
#include <functional>

class clock
{
public:
   clock(const std::function<void()>& tocall) : m_tocall(tocall) {}
   void tick() {m_tocall();}

private:
   std::function<void()> m_tocall;
};

class otherclass
{
public:
   void aMethod() {}
};

int main(int argc, char *argv[])
{
   otherclass A;
   clock c( std::bind(&otherclass::aMethod, &A) );

   c.tick(); // Will end up calling aMethod() of object A
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T07:11:11.253

你不需要为此使用`std::function`。您需要有两个指针：一个是类对象，一个是该类的方法。简单来说，你需要让它能够做到：

```
CallNonVirtual(pClassPtr, pFuncAddr); 
```

因此，您需要这两个参数，以便您*实际上*可以这样称呼它：

```
(pClassPtr->*pFuncAddr)(); // Assuming no parameter 
```

为此，您可以执行以下操作：

```
class Clock
{
    COtherClass* pClassPtr; 

    /// Typedef simplifies
    typedef void (COtherClass::*TargetFuncType)();
    TargetFuncType pFuncAddr;

public:
    Clock(COtherClass* pOther, TargetFuncType pFunc) : 
          pClassPtr(pOther), pFuncAddr(pFunc) 
   { 
   }

   void tick()
   {
       (pClassPtr->*pFuncAddr)();
   }
 }; 
```

并拨打电话：

```
int main()
{
   COtherClass Obj;
   Clock theClock(&Obj, &COtherClass::TheNonStatic);

   theClock.tick();
} 
```

# php - 如何以 PHP 等脚本语言获取 AFNetworking 身份验证标头？

> ID：14422123
> 
> 赞同：0
> 
> 时间：2013-01-20T06:00:48.970
> 
> 标签：php, afnetworking

我有 ：

```
 [client setAuthorizationHeaderWithUsername:userNameOrEmail password:password]; 
```

如果发布到 PHP 应用程序，如何获取这些值？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T06:14:50.760

AFNetworking 使用**HTTP 基本身份验证**就是这种情况。您可以使用`$_SERVER['PHP_AUTH_USER']`获取用户名和`$_SERVER['PHP_AUTH_PW']`密码。

请参阅： http: [//php.net/manual/en/features.http-auth.php](http://php.net/manual/en/features.http-auth.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T06:21:45.970

发送请求时，它似乎使用了`Authentication`HTTP 标头。然而，在 PHP 中，要获取标头，您需要执行以下调用：

```
$headers = getallheaders(); 
```

您需要获取与`Authentication`密钥关联的条目。为了使 PHP 代码完全符合标准，您需要执行类似的操作，以不区分大小写的方式匹配标头：

```
$auth = null;
foreach (getallheaders() as $name => $value) {
    if (strtolower($name) === 'authentication') {
        $auth = $value;
        break;
    };
};
// if $auth === null, the header was not set 
```

一般来说，我想 using`getallheaders()`将帮助您回答所有关于 AFNetworking 在标题中发送到您的脚本的内容的问题 :)

更多阅读：

*   [`getallheaders()`](http://php.net/manual/en/function.getallheaders.php),
*   [`apache_request_headers()`](http://php.net/manual/en/function.apache-request-headers.php),

# php - MySQL 查询在一个查询中从第二个表中选择一些数据

> ID：14422125
> 
> 赞同：-2
> 
> 时间：2013-01-20T06:01:00.807
> 
> 标签：php, mysql, sql

基本上，我有一个函数可以将数据导出为 csv 格式的 excel ......我试图有一个查询来选择所选时间段内的所有销售记录，但我需要查询到的第一列来自另一张桌子。我当前的查询如下：

```
$select = "SELECT `record_date` AS 'Sale Date',
                  `record_order_number` AS 'Order #',
                  `record_activity_number` AS 'Activity #',
                  `record_total_diy_revenue` AS 'Revenue $'
             FROM st_entered_records 
            WHERE `record_user_id` = '$this->user_id' AND 
                  `record_date` BETWEEN '$this->start_date' AND '$this->end_date' "; 
```

前

```
`record_date` AS 'Sale Date' 
```

我需要它运行第二次选择以获取用户的名字和姓氏格式：

```
"LastName, FirstName"
 (user_last_name)", "(user_first_name) from a second table (st_users) 
 where `user_id` = '$this->user_id' 
```

任何帮助，将不胜感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T06:05:30.100

您可以做一个连接示例：

```
 SELECT t2.lastName,t2.firstName,
           t1.record_date AS 'Sale Date',
           t1.record_order_number AS 'Order #',
           t1.record_activity_numbe AS 'Activity #',
           t1.record_total_diy_revenue AS 'Revenue $' 

    FROM st_entered_records1 t1

    INNER JOIN stusers t2 ON t1.record_user_id=t2.userid

    WHERE t1.userid = $this->user_id AND
    t1.record_date BETWEEN $this->start_date AND $this->end_date 
```

确保你匹配表名和字段名我相信你已经知道了:)

编辑： `Stongly advise you do not use MYSQL_*`

原因：

`This extension is deprecated as of PHP 5.5.0, and will be removed in the future. Instead, the MySQLi or PDO_MySQL extension should be used.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T06:08:09.067

尝试

```
SELECT
    `st_entered_records`.`record_date` AS 'Sale Date',
    `st_entered_records`.`record_order_number` AS 'Order #',
    `st_entered_records`.`record_activity_number` AS 'Activity #',
    `st_entered_records`.`record_total_diy_revenue` AS 'Revenue $',
    `st_users`.`user_last_name` AS 'LastName',
    `st_users`.`user_first_name` AS 'FirstName',
FROM `st_entered_records`
INNER JOIN `st_users` ON `st_entered_records`.`record_user_id` = `st_users`.`user_id`
WHERE
    `record_user_id` = :uid AND
    `record_date` BETWEEN :startDate AND :endDate; 
```

顺便说一句，我已经用命名参数替换了变量。我强烈推荐使用准备好的语句，但如果你坚持使用连接查询（无论是 mysql、mysqli 还是 PDO），请记住对变量进行转义！

# android - listView.setBackgroundDrawable();

> ID：14422129
> 
> 赞同：0
> 
> 时间：2013-01-20T06:02:06.687
> 
> 标签：android, listview

打电话时我的`listview`背景没有改变`listView.setBackgroundDrawable()`。

我已经搜索了很多，但没有找到解决方案。

这是代码

```
ListView v= new ListView(Menu2.this);
v.setBackgroundDrawable(getResources().getDrawable(R.drawable.android));
上下文 c=v.getContext();
setListAdapter(new ArrayAdapter(c, android.R.layout.simple_list_item_1, list));

```

背景就像我没有调用该方法一样。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T06:29:00.060

用这个 ：

```
ListView v= getListView();
v.setBackground(getResources().getDrawable(R.drawable.android)); 
```

代替，

```
ListView v= new ListView(Menu2.this);
v.setBackgroundDrawable(getResources().getDrawable(R.drawable.android)); 
```

# google-apps-script - 如何在 Google Apps 脚本中处理 Google Contacts API 返回的照片字节

> ID：14422138
> 
> 赞同：2
> 
> 时间：2013-01-20T06:03:44.893
> 
> 标签：google-apps-script, google-api, google-contacts-api

我正在使用 Oauth2 授权成功检索 Google Apps 域用户的个人资料照片的字节`UrlFetch`，但我不确定从这里去哪里 - 在这种情况下，我希望将图像包含在`HtmlService`交付的页面中。字节在那里，如果用作 webapp 的文本，我可以看到正常的 JFIF mumbo jumbo 输出。

我试过使用：

```
'<img src="data:image/jpeg;base64,' + Utilities.base64Encode(Response.getAs('image/jpeg').getBytes()) + '" > 
```

但 caja 似乎把它去掉了（我怀疑 chrome 开发工具`<img>`在源代码中显示为空。

我尝试了各种方法将字节保存到文件中，使用`DocsList.createFile()`blob、字节和文本等，但没有一种方法可以生成有效的图像。

数据卫生是否总是会在这里引起问题，没有`ContentService.MimeType`图像，因此使用正确的标头提供字节将不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T13:21:45.287

这是一个已知的功能请求，我们将看看我们能做什么。

# java - 用于执行 Java 自动导入的控制台命令

> ID：14422141
> 
> 赞同：7
> 
> 时间：2013-01-20T06:04:28.933
> 
> 标签：java, autocomplete, console-application, notepad++

我使用记事本在 Java 中开发。我对开发周期非常满意，但是我缺少 Eclipse 和其他大型 IDE 所具有的自动导入功能。我的猜测是：如果 Eclipse 做到了，那么有一个外部工具可以做到这一点。

我可以安装这样的工具并从命令行使用它吗？

例如我有这个源代码：

```
public class Test extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        final TextView tv = new TextView(this);
        tv.setText("Hello World!");
        setContentView(tv);
    }
} 
```

我想运行一些这样的实用程序：

```
jautoimp Test.java 
```

并得到这个输出：

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-06-20T20:33:34.663

**更新：** [serv-inc](https://github.com/serv-inc/javimp)已经创建了这个程序的一个版本，它可以自动确定您需要导入的类（而不必自己手动指定它们）。

用法：`./javimp.py <java-src-file> [<java-src-file> ...]`

仅支持插入模式（意味着文件本身将被更改）。这个工具可能更接近大多数想要命令行自动导入工具的人正在寻找的东西。

* * *

我今天也在找同样的东西，但我没有找到。但是，我今天花费了大部分时间制作了一个具有执行类似功能的 Python 脚本。

[javimp.py](https://github.com/winterweird/javimp)通过 CLI 工作。它有几种不同的模式，但在您的情况下，该`-i`选项可能是您想要的。

```
python javimp.py -i YourJavaFile.java 
```

运行此命令将使 javimp.py 通过 YourJavaFile.java 查找以“import”开头的行。当它找到一个时，它将尝试将该行的其余部分与由网络抓取创建的 Java 类数据库中的条目的结尾进行匹配，如果找到匹配项，它会将该行替换为`import full.package.to.WhateverClassYouHadImported;`. 它还将解释缺少（甚至太多）分号。

在您的示例中，这将是：

```
// Note that you still need to import the classes, but
// you don't need to remember the packages in your head
// anymore

import Activity; // -> import android.app.Activity;
import Bundle;   // -> import android.os.Bundle;
import TextView; // -> import android.widget.TextView;

public class Test extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        final TextView tv = new TextView(this);
        tv.setText("Hello World!");
        setContentView(tv);
    }
} 
```

这种方法并不完美 - 值得注意的是，如果数据库中某处有两个具有相同名称的类，则可能会得到错误的匹配，并且它还需要一个涵盖所有开发领域的最新数据库。但是，只要您不太信任它，它可能是一个有用的工具。您还可以编辑源代码以将网络抓取扩展到其他网页，而不是我在快速混杂解决方案中指定的网页。开箱即用，它应该支持 Java 标准库和 Android API，截至 2016/06/20。

请记住，如果您没有使 javimp.py 可以从文件系统中的任何位置访问，如果您从其他位置而不是它所在的目录运行它，您仍然需要指定它的路径。就个人而言，我通过向我的编辑器添加一个命令来规避这个问题，该命令通过指定绝对路径在活动文件上运行它。你可能会做类似的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:42:40.200

现代 IDE 可以自动完成的主要原因是因为它们对您的完整项目有深入的了解。即使没有单独的编译步骤，一个好的自动完成功能也可以工作。

这意味着编辑器和编译器是*非常*好的朋友，因此编译器会在编辑文件时处理文件（而不是编译所有内容），并且编辑器知道编译器从您的源代码中派生出什么。

在 Unix 世界中，这通常被称为 TAGS，有两种方言——一种用于 vi，一种用于 emacs。在我看来，最好的选择是切换到这些编辑器之一，然后根据需要手动生成 TAGS 文件。曾尝试在 Emacs（Java EE 项目）中编写更完整的 Java 编程环境，但 Eclipse 因无法进行重构而扼杀了它。

请注意，您要求的功能实际上是 IDE 的特性之一。您可能需要考虑是否准备好使用更多的 IDE 功能，而不仅仅是自动完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-18T10:44:01.680

@winterweird 的回答似乎不错。[https://github.com/serv-inc/javimp](https://github.com/serv-inc/javimp)上的代码扩展了他的自动添加 javac 说它需要的导入。它缺少除`-i`. 你可以把它称为

```
python javaimp.py JavaFile.java 
```

或者，更新班级列表，如`python javimp.py`. 您需要该文件[`javimp.py`](https://github.com/serv-inc/javimp/blob/master/javimp.py)，并且需要为当前班级列表运行一次，或者还需要下载该文件[`java_classes.list`](https://github.com/serv-inc/javimp/blob/master/java_classes.list)。

PS：生成的文件是

```
import android.widget.TextView;
import android.os.Bundle;
import android.app.Activity;
public class Test extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        final TextView tv = new TextView(this);
        tv.setText("Hello World!");
        setContentView(tv);
    }
} 
```

# sql-server - 将索引视图移动到单独的文件组

> ID：14422142
> 
> 赞同：0
> 
> 时间：2013-01-20T06:04:50.050
> 
> 标签：sql-server, sql-server-2012, indexed-view

我有多个索引视图，我想将它们从主文件组移动到另一个文件组，对性能的影响最小。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T06:50:52.967

这应该生成脚本来执行您想要的操作，包括聚集索引和任何非聚集索引。我添加了`ONLINE = ON`最小化对现有工作负载的影响的选项，但无论如何，理论上，您的索引视图不应该很大，因此不应该产生任何重大影响。当然，这个选项只在企业版中可用，脚本会处理它。如果您不能在线执行此操作，您肯定希望使用模拟工作负载测试影响（无论如何您都希望首先在测试环境中测试此操作）。而且您最好将这项工作安排在相对停机时间，或者理想情况下，是一个维护窗口。

```
DECLARE @opt NVARCHAR(13),  @sql NVARCHAR(MAX), @fg  NVARCHAR(128);

SELECT @fg  = N'OtherFileGroupName', -- please fix this
  @sql = N'', 
  @opt = CASE WHEN CONVERT(NVARCHAR(32), SERVERPROPERTY('Edition')) 
    LIKE N'Enterprise%' THEN N', ONLINE = ON' ELSE N'' END;

SELECT @sql = @sql + N'
  CREATE ' + CASE WHEN i.index_id = 1 
    THEN 'UNIQUE CLUSTERED' 
    ELSE '' END
  + ' INDEX ' + QUOTENAME(i.name) 
  + ' ON ' + QUOTENAME(SCHEMA_NAME(v.[schema_id]))
  + '.' + QUOTENAME(v.name) 
  + '(' + STUFF((SELECT ',' + QUOTENAME(c.name)
    FROM sys.columns AS c
    INNER JOIN sys.index_columns AS ic 
    ON c.[object_id] = ic.[object_id]
    AND c.column_id = ic.column_id
    WHERE c.[object_id] = v.[object_id]
    AND ic.index_id = i.index_id
    FOR XML PATH, 
    TYPE).value(N'./text()[1]', N'nvarchar(max)'),1,1,N'')
  + ') 
  WITH (DROP_EXISTING = ON' + @opt + ')
  ON ' + QUOTENAME(@fg) + ';'
FROM sys.views AS v
INNER JOIN sys.indexes AS i
ON v.[object_id] = i.[object_id]
ORDER BY i.index_id;

SELECT @sql;
-- EXEC sp_executesql @sql; 
```

这应该产生一个脚本，如：

```
CREATE UNIQUE CLUSTERED INDEX [x] 
  ON [dbo].[splunge_view]([id])
  WITH (DROP_EXISTING = ON, ONLINE = ON)
  ON [OtherFileGroupName];

CREATE  INDEX [y] 
  ON [dbo].[splunge_view]([c],[id]) 
  WITH (DROP_EXISTING = ON, ONLINE = ON)
  ON [OtherFileGroupName];

... 
```

当您对输出感到满意时`SELECT`（在模式下效果最佳`results to text`，但仍限制为 8K，并且仅当您更改 中的设置时`tools / options`），取消注释`EXEC`. 但同样，首先在测试环境中！

# java - 逐行读取文本区域并分配变量

> ID：14422144
> 
> 赞同：0
> 
> 时间：2013-01-20T06:05:06.493
> 
> 标签：java, textarea

我需要将变量附加到`TextArea`. 已`TextArea`编码，并且可以完美运行。我可以`TextArea`通过使用从 中检索信息`TextArea.getText();` 为了将其分开，我正在尝试使用`BufferedReader`. 不幸的是，这不起作用。有不同的方法吗？以下是如何将信息写入文本区域的示例：

“工人姓名”

“工人部门”

“工人编号”

```
BufferedReader inStream= new BufferedReader 
(new InputStreamReader(TextArea.getText()));

String workerName = "";

String workerDepartment = "";

int workerNumber = 0;

String line = inStream.readLine();            

while (line != null) {                        

 workerName = line;

 line = inStream.readLine();               

 workerDepartment = line;

 line = inStream.readLine();               

 workerNumber = Integer.parseInt(line);

 }

 inStream.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T06:12:44.893

如果行由任何分隔符分隔（例如换行符，逗号...），则使用 String 的 split 方法并放置分隔符

```
String[] lines = TextArea.getText().split("\n");

//then you can access your array
String workerName = lines[0];
String workerDepartment = lines[1];
// and so on 
```

此外，您需要在获取值之前检查数组大小以防止 ArrayOutOfIndexException，例如，如果只有两行，则不应调用行 [2]，因此请检查：

```
 if ( lines.length < 3 ) {
      // input is not complete, show error message
   }
   else {
      // do your splitting and reading values
   } 
```

# segmentation-fault - llvm 分段错误

> ID：14422145
> 
> 赞同：0
> 
> 时间：2013-01-20T06:05:13.923
> 
> 标签：segmentation-fault, llvm

我正在开发一个 llvm 前端。我的问题是，当我使用“存储”指令将值存储在复杂类型的成员中时，会出现分段错误。例如，假设我在模块中定义了 %mytype = type {i32, ...} 之类的类型，然后我使用以下命令将 3 存储在此类型对象的第一个字段中。这个导致段错误的代码有什么问题？

```
define void f() {
...
%alloc = alloca %mytype*
%myinstance = load %mytype** %alloc
%firstfield = getelementptr %mytype* %myinstance, i32 0, i32 0
store i32 3, i32* %firstfield
...
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T07:54:06.220

问题是您分配了一个*指针*而没有分配它所指向的内容，因此当您尝试取消引用该指针时，您会遇到分段错误也就不足为奇了。

你需要做的是

```
%alloc = alloca %mytype
%firstfield = getelementptr %mytype* %alloc, i32 0, i32 0
store i32 3, i32* %firstfield 
```

如果由于某种原因您仍然需要分配一个指针 - 换句话说，您想要一个`%mytype**`指向内存位置的值，其中有一个指向已分配内存的指针 - 那么您还可以添加到上面：

```
%ptrptr = alloca %mytype*
store %mytype* %alloc, %mytype** %ptrptr 
```

# amazon-web-services - .NET 项目的 Elastic Beanstalk 和 CloudFormation 有什么区别？

> ID：14422151
> 
> 赞同：153
> 
> 时间：2013-01-20T06:05:44.427
> 
> 标签：amazon-web-services, amazon-elastic-beanstalk, amazon-cloudformation

我开发了一个 .NET MVC 应用程序并开始使用 AWS 并通过 Visual Studio Toolkit 进行部署。我已使用工具包中的 Elastic Beanstalk 选项成功部署了应用程序。

当我浏览使用工具包将 .NET 应用程序部署到 AWS 的教程时，我注意到有使用[Elastic Beanstalk 和 CloudFormation](http://aws.amazon.com/visualstudio/)进行部署的教程。这两者有什么区别？

据我所知，他们似乎本质上都在做同样的事情——让您的应用程序更容易部署到 AWS 云（设置 EC2 实例、负载均衡器、自动扩展等）。我已经尝试阅读它们，但除了一堆对我来说听起来相同的流行语之外，我似乎什么也找不到。我什至在 AWS 网站上找到了一个应该回答这个确切问题的[常见问题](http://aws.amazon.com/cloudformation/faqs/#3)解答，但我不太明白。

我应该使用其中一种吗？两个都？

* * *

## 回答 #1

> 赞同：282
> 
> 时间：2013-01-20T21:53:02.430

他们其实很不一样。Elastic Beanstalk 旨在让开发人员的生活更轻松。CloudFormation 旨在让系统工程师的生活更轻松。

Elastic Beanstalk 是 AWS 的 IaaS 服务之上的一个类似 PaaS 的层，它抽象出底层的 EC2 实例、弹性负载均衡器、自动扩展组等。这让不想打交道的开发人员更容易与所有系统的东西，让他们的应用程序快速部署在 AWS 上。它与 Heroku、EngineYard、Google App Engine 等其他 PaaS 产品非常相似。使用 Elastic Beanstalk，您无需了解任何底层魔法是如何工作的。

另一方面，CloudFormation 不会自动执行任何操作。它只是一种在巨大的 JSON/YAML 文件中定义部署所需的所有资源的方法。因此，CloudFormation 模板实际上可能会创建两个 Elastic Beanstalk 环境（生产和暂存）、几个 ElasticCache 集群、一个 DynamoDB 表，然后是 Route53 中的正确 DNS。然后我将此模板上传到 AWS，然后走开，45 分钟后一切准备就绪，等待中。因为它只是一个纯文本 JSON/YAML 文件，所以我可以将它粘贴到我的源代码控制中，这为我的应用程序部署版本提供了一种很好的方式。它还确保我有一个可重复的、“已知良好”的配置，我可以在不同的区域快速部署它。

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2017-01-04T17:45:46.690

为了快速开始部署标准 .NET Web 应用程序，**Elastic Beanstalk**是适合您的服务。

[![应用服务比较图](../Images/efc06f7515589a4ce466ff468ff92176.png)](http://www.allthingsdistributed.com/2013/02/aws-opsworks.html)

### [**AWS CloudFormation**](https://aws.amazon.com/cloudformation/)：“模板驱动的配置”

> AWS CloudFormation 为开发人员和系统管理员提供了一种简单的方法来创建和管理相关 AWS 资源的集合，以有序且可预测的方式预置和更新它们。

CloudFormation (CFn) 是对现有 AWS API 的轻量级低级抽象。使用静态 JSON/YAML[模板](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-guide.html)文档，您声明一组与 AWS API 上的 CRUD 操作相对应的[资源](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/resources-section-structure.html)（例如[EC2 实例](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html)或[S3 存储桶）。](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket.html)

当您创建 CloudFormation 堆栈时，CloudFormation 会调用相应的 API 来创建关联的资源，而当您删除堆栈时，CloudFormation 会调用相应的 API 来删除它们。[支持大多数（但不是全部）AWS API](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html)。

### [AWS Elastic Beanstalk](https://aws.amazon.com/elasticbeanstalk/)：“轻松实现 Web 应用程序”

> AWS Elastic Beanstalk 是一种易于使用的服务，用于在 Apache、Nginx、Passenger 等熟悉的服务器上部署和扩展使用[Java](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Java.html)、[.NET](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_NET.html)、[PHP](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_PHP_eb.html)、[Node.js](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_nodejs.html)、[Python](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-python-apps.html)、[Ruby](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Ruby.html)、[Go](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_go.html)和[Docker](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_docker.html)开发的 Web 应用程序和服务和 IIS。
> 
> 您只需上传代码，Elastic Beanstalk 就会自动处理部署，从容量配置、负载平衡、自动扩展到应用程序运行状况监控。

Elastic Beanstalk (EB) 是一种更高级别的托管“平台即服务”(PaaS)，用于托管 Web 应用程序，其范围类似于[Heroku](https://www.heroku.com/)。EB 不是直接处理低级 AWS 资源，而是提供了一个完全托管的平台，您可以在其中使用[Web 界面](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/applications-console.html)[创建应用程序环境](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features.environments.html)，选择您的应用程序使用的[平台](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/concepts.platforms.html)，创建和上传[源包](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/applications-sourcebundle.html)，其余的由 EB 处理。

[使用 EB，您可以获得用于监控应用程序环境](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/environments-health.html)和[部署新版本](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features.deploy-existing-version.html)应用程序的各种内置功能。

在后台，EB 使用 CloudFormation 创建和管理应用程序的各种 AWS 资源。[您可以通过将CloudFormation 资源](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/environment-resources.html)添加到与您的应用程序一起部署的[EB 配置文件](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/ebextensions.html)来自定义和扩展默认 EB 环境。

### 结论

如果您的应用程序是使用 Elastic Beanstalk 支持的平台之一的标准 Web 层应用程序，并且您希望为您的应用程序提供易于管理、高度可扩展的托管，请**使用 Elastic Beanstalk**。

如果你：

*   想要直接管理您应用程序的所有 AWS 资源；
*   想要管理或大量定制您的实例供应或部署过程；
*   需要使用 Elastic Beanstalk 不支持的应用平台；或者
*   只是不想要/不需要任何更高级别的 Elastic Beanstalk 功能

然后**直接使用 CloudFormation**，避免添加 Elastic Beanstalk 的配置层。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-01-20T22:02:07.870

Cloud Formation 是一项可让您部署 AWS 服务的服务。您创建一个模板文件来描述您想要的服务。当您部署该模板时，Cloud Formation 会为您创建资源作为“包”。您在模板中定义的所有资源都将一起启动和终止。可以使用 Cloud Formation 创建的资源类型示例包括：S3、EC2 实例、AutoScaling、DynamoDb 等。对于 EC2，Cloud Formation 还使您能够使用“cfn-init”脚本；它可以与模板结合使用来引导您的实例。

Elastic Beanstalk 使用 Cloud Formation 模板和 scipts 来： 1\. 创建负载均衡器和 Auto Scaling 组，2\. 将代码复制到 S3， 3\. 引导 Ec2 实例以从 S3 下载代码并进行部署。

Cloud Formation 不如 EB 好用，但功能强大得多，因为您可以创建 EC2 实例以外的资源，控制 cfn-init 脚本的方式等。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-12-23T09:23:39.233

还有其他值得注意的差异。Elastic beanstalk 被设计为单个应用程序的容器。我有一组多个网站和服务，但发现使用 beanstalk 部署多个网站非常困难，经过几次尝试后，AWS 建议在这种情况下使用云形成，因为它具有额外的灵活性。这里有一篇关于引导 AWS 云形成和更新运行站点的非常有用的文章，[这](http://blog.kloud.com.au/2013/08/05/bootstrapping-on-aws/)比 AWS 页面更清晰。仍在尝试确定我们是否可以从 VS 直接部署到存储在 S3 上的云形成模板并让它像 beanstalk 一样自动更新......

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-02-22T15:01:46.553

这些服务旨在相互补充。AWS Elastic Beanstalk 提供了一个在云中轻松部署和运行应用程序的环境。它与开发人员工具集成，为您提供管理应用程序生命周期的一站式体验。AWS CloudFormation 是一种适用于各种 AWS 和第三方资源的便捷预置机制。它支持许多不同类型应用程序的基础设施需求，例如现有企业应用程序、遗留应用程序、使用各种 AWS 资源构建的应用程序和基于容器的解决方案（包括使用 AWS Elastic Beanstalk 构建的解决方案）。

AWS CloudFormation 支持将 Elastic Beanstalk 应用程序环境作为一种 AWS 资源类型。例如，这允许您创建和管理 AWS Elastic Beanstalk 托管的应用程序以及用于存储应用程序数据的 RDS 数据库。除了 RDS 实例，任何其他受支持的 AWS 资源也可以添加到组中。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-01-15T06:15:24.410

Elastic Beanstalk 根据您上传到其中的代码自动处理部署，从容量配置、负载平衡、自动扩展到应用程序运行状况监控，其中 CloudFormation 是一个自动配置引擎，旨在通过 JSON 脚本部署整个云环境。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-10T00:49:25.703

Beanstalk：使开发人员能够只管理代码而不是系统

Cloud Formation：简化系统工程师并使一切变得更容易

如果开发人员或开发团队正在寻找快速 MVP 测试，最好的选择是使用 Beanstalk 快速部署并进行检查。

当 AWS 迁移发生时，系统工程师将参与配置，而 Cloud Formation 将提供很大帮助并提供更精细的控制。

# objective-c-runtime - 是否 IMP imp = imp_implementationWithBlock((void*) objc_unretainedPointer(^(id me, BOOL selected)

> ID：14422152
> 
> 赞同：1
> 
> 时间：2013-01-20T06:06:00.833
> 
> 标签：objective-c-runtime

以下提供了一种在运行时向类添加方法的便捷方法：

```
imp_implementationWithBlock((void*) objc_unretainedPointer(^(id me, BOOL selected) 
```

然后可以使用 class_addMethod() 添加该方法。这些实现最终会被缓存并使用快速方法调度系统吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T05:24:15.480

我的直觉是肯定的，因为否则会使精致、一致和漂亮的 Objective-C 运行时复杂化 :)

还有这个链接-> [http://kevin.sb.org/2006/11/16/objective-c-caching-and-method-swizzling/](http://kevin.sb.org/2006/11/16/objective-c-caching-and-method-swizzling/)

看起来还挺自信的。调用class_addMethod后，它们都是类中的方法。据我所知，如果我错了，请纠正我，没有办法将它们与编译的区别开来。

# matlab - 获取情节点指标

> ID：14422155
> 
> 赞同：2
> 
> 时间：2013-01-20T06:07:18.730
> 
> 标签：matlab, plot, matlab-figure, roi

如果我需要在 a 上`figure`或`axe`通过使用框选择来获取某些绘制点的索引，如下所示：

```
load cities
education = ratings(:,6);
arts = ratings(:,7);
plot(education,arts,'+') 
```

![绘制演示图像](../Images/ebcf3580466619bb34e52354881752c4.png)

如何获取向量中这些点的索引而`education`不是来自`x axis`？

我希望解决方案灵活，而不仅仅是这个情节。我想使用框选择来获取任何点集的索引。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T06:10:10.307

**(i)**如果点数较小，可以使用图形 gui 中的数据光标工具。

**(ii)**给定一些边界，您可以使用`find`或逻辑条件，例如：

```
 ind = find(arts>2e4 & education>2500 & education<3800);
  ans = arts(ind)` 
```

所以`plot(education(ind),arts(ind),'ro')`会显示它：

![在此处输入图像描述](../Images/6c19e77f7389bdca576b7895359809b9.png)

**(iii)**您可以通过交互方式选择一个框`imrect`

```
h = imrect;
position = wait(h); 
```

然后使用函数的`position`（这是一个向量`[xmin ymin width height]`）值`find`：

```
ind =find(education>position(1) & education<position(1)+position(3) & ...
     arts>position(2) & arts<position(2)+position(4)) 
```

**编辑：**

在我被问到如何`impoly`使用多边形选择之后，这是解决方案：

```
h = impoly;
position = wait(h);
points_in= inpolygon(education,arts,position (:,1),position (:,2));
ind=find(points_in);
... 
```

# windows-xp - WinXP：进入安全模式后显示模糊/模糊

> ID：14422156
> 
> 赞同：0
> 
> 时间：2013-01-20T06:07:19.107
> 
> 标签：windows-xp

我在一个 XP 盒子上进入了安全模式（是的，我知道，它是旧的，但它仍然可以正常工作），在它出来之后，显示现在变得模糊/模糊 - 在整个显示屏上。从桌面上的图标到 Netscape 上的字体，现在一切都以某种低分辨率字体呈现，使其无法阅读。

我试图让它升级显示设备驱动程序，但它报告它是“最新的”。

这太奇怪了..我的意思是，为什么进入安全模式会导致计算机无法使用？

有没有人经历过这样的事情？

好吧，我想我可能不得不报废这个盒子。我情绪低落。但是，这不是它应该结束的方式。

蒂亚！！

大学教师

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T06:13:38.760

当您进入安全模式时，会激活低分辨率视频，但不会更改硬件中的任何内容，您的视频卡可能已损坏，通常奇怪的颜色和蹩脚的随机图像是内存错误的常见问题，显示图像的缓冲区, 已损坏。

# facebook - API 从 Windows 手机连接到 Facebook？

> ID：14422158
> 
> 赞同：0
> 
> 时间：2013-01-20T06:07:23.073
> 
> 标签：facebook, windows-phone-7

我正在编写一个 Windows Phone 应用程序，它应该允许用户从应用程序内发布状态更新。允许我们连接到 facebook 的 API 或帮助文档的任何链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T17:25:34.917

[在此处](http://csharpsdk.org/)查看 Facebook C# SDK

[您可以在 GitHub](https://github.com/facebook-csharp-sdk/facebook-windows-phone-sample)上的 Windows Phone 应用程序中查看有关如何使用 Facebook C# SDK 的示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T06:12:22.117

这里是使用的起点`Facebook API`

[http://developers.facebook.com/](http://developers.facebook.com/)

[http://developers.facebook.com/docs/reference/apis/](http://developers.facebook.com/docs/reference/apis/)

[Facebook_authentication_in_Windows_Phone_application](http://www.developer.nokia.com/Community/Wiki/Facebook_authentication_in_Windows_Phone_application)

# java - 在可运行的 jar 中加载和保存资源？

> ID：14422160
> 
> 赞同：1
> 
> 时间：2013-01-20T06:07:57.617
> 
> 标签：java, eclipse, resources, inputstream, outputstream

> **可能重复：**
> [Java 程序如何使用 .jar 中的文件进行读写？](https://stackoverflow.com/questions/5052311/how-can-a-java-program-use-files-inside-the-jar-for-read-and-write)

我正在创建一个游戏，我希望它全部从可运行的 jar 文件中运行，所以我的所有资源（图像和文本文件）都将在 jar 文件中。

我遇到的问题是处理 jar 内的文件非常困难。

我正在使用 eclipse，它有时会欺骗你，因为如果你从 eclipse 运行它，它会找到文件，但如果你导出它就不会。

我只想知道基本正确的露水方法：

1.  我需要能够加载图像（不知何故，我已经在工作了。我对它进行了一些修改并意外地做到了，所以我不知道它是如何工作的）
2.  我需要能够从文本文件中读取（我也有这个工作，再次，偶然和数小时的猜测。）
3.  我需要能够写入存在并且在 jar 中的文本文件。这就是让我觉得我做错了的原因。我想要做的就是能够保存某些设置，以便它们在下一次加载时工作，我不知道如何写入文件。

在eclipse（Indigo）中，我创建了一个文件夹名称“资源”并将其标记为源文件夹。我把我所有的图像和文本文件都放在那里。我读到这样的图像：

```
public static Image ammo = new ImageIcon(TankMazeGame.class.getResource("ammo.png")).getImage(); 
```

我读了这样的文本文件：

```
InputStream is = TankMazeRunner.class.getClassLoader().getResourceAsStream("Settings.txt");
Scanner settingsReader = new Scanner(new InputStreamReader(is)); 
```

我正在像这样写入我的设置文件，但它并没有真正起作用，所以这就是我需要帮助的地方。

```
File settingsFile = new File(DisplayMenu.class.getClassLoader().getResource("Settings.txt").getFile());
try {
    OutputStream os = new FileOutputStream(settingsFile, true);
    PrintWriter pw = new PrintWriter(os, true);
    pw.write("SIZE: " + TankMazeRunner.WIDTH + "\n");
    os.flush();
    pw.close(); 
} catch (Exception e2) {
    System.out.println("Error");
} 
```

正如您可能从我的代码中看出的那样，我迷路了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T09:40:58.057

对于遇到这个问题的其他人。

除非您可以对正在使用的操作系统施加限制，否则您无法执行此操作，即使那样您也可能无法执行此操作。

以下是一些需要注意的限制：

*   Microsoft Windows 实现了自己的读写锁符号：当有一个读句柄打开时，您不能写入文件。JVM 将打开一个读取句柄，因为这是类路径上的文件，因此在 Java 中是不可能的（除非你想派生一个临时进程，杀死自己，让临时进程重写并重新启动......这会很难看并且防病毒软件可能会停止临时进程）

*   大多数 unix OS 实现都没有问题，尽管 JVM 会在 JAR 文件中缓存偏移量，所以一旦你完成并尝试加载一个类，你的程序就会崩溃。

*   只有 Windows 用户倾向于不使用文件权限来锁定对可执行文件的写入权限，因此假设您对 jar 具有写入权限是无效的。

第二点让所有操作系统实现都陷入困境（除非您可以使用叉子，并且叉子无论如何都会做出很多冒险的假设）

只需写入一个单独的文件即可完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T06:35:14.360

> 将设置写入 JAR 之外的知名位置怎么样？

作为保存设置的替代方法，请考虑以下方法之一：

*   `java.util.prefs.Preferences`[，这里](https://stackoverflow.com/a/9481515/230513)提到。

*   JWS `PersistenceService`，[在此处](https://stackoverflow.com/a/6886694/230513)描述。

*   Cookie，在[*访问 Cookie*](http://docs.oracle.com/javase/tutorial/deployment/doingMoreWithRIA/accessingCookies.html)中讨论。

# javascript - Dojo FilteringSelect 显示为纯文本框

> ID：14422161
> 
> 赞同：1
> 
> 时间：2013-01-20T06:08:08.117
> 
> 标签：javascript, dojo, arcgis-server

我刚刚开始尝试将 Dojo 与 ESRI ArcGIS Server 一起使用。我已经尝试了一些教程，但我遇到了 Dojo FilteringSelect Dijit 的问题。

我的代码的相关部分：

```
<script>
  dojo.require("esri.map");
  dojo.require("esri.tasks.query");
  dojo.require("dojo.data.ItemFileReadStore");
  dojo.require("dijit.form.FilteringSelect");

  var map;

  function init() {
    map = new esri.Map("mapDiv",{
      basemap: "streets",
      center: [-80.94, 33.646],
      zoom: 8
    });
    dojo.connect(map, "onLoad", initFunctionality);
  }

  function initFunctionality(map) {
    //build query task
    var queryTask = new esri.tasks.QueryTask("http://sampleserver1.arcgisonline.com/ArcGIS/rest/services/Demographics/ESRI_Census_USA/MapServer/3");

    //build query filter
    var query = new esri.tasks.Query();
    query.returnGeometry = true;
    query.outFields = ["NAME", "POP2000", "POP2007", "POP00_SQMI", "POP07_SQMI"];
    query.where = "STATE_NAME = 'South Carolina'";
    query.outSpatialReference = {"wkid":102100};

    var infoTemplate = new esri.InfoTemplate();
    infoTemplate.setTitle("${NAME}");
    infoTemplate.setContent( "<b>2000 Population: </b>${POP2000}<br/>"
                         + "<b>2000 Population per Sq. Mi.: </b>${POP00_SQMI}<br/>"
                         + "<b>2007 Population: </b>${POP2007}<br/>"
                         + "<b>2007 Population per Sq. Mi.: </b>${POP07_SQMI}");

    map.infoWindow.resize(245,105);

    //Can listen for onComplete event to process results or can use the callback option in the queryTask.execute method.
    dojo.connect(queryTask, "onComplete", function(featureSet) {
      map.graphics.clear();

      var symbol = new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID, new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID, new dojo.Color([255,255,255,0.35]), 1),new dojo.Color([125,125,125,0.35]));

      //QueryTask returns a featureSet.  Loop through features in the featureSet and add them to the map.
      dojo.forEach(featureSet.features,function(feature){
        var graphic = feature;
        graphic.setSymbol(symbol);
        graphic.setInfoTemplate(infoTemplate);

        map.graphics.add(graphic);
      });
    });

    queryTask.execute(query);
  }

  function initLineID(features) {
    var lineIdObjects = [];
    dojo.forEach(features.features, function(feature) {
        lineIdObjects.push({"name": feature.attributes.field_name});
    });

    //Build the appropriate data object for our data component
    var data = {
          "identifier": "name",
          "items": lineIdObjects
    }

    //bind the data object to the datastore
    var lineDataStore = new dojo.data.ItemFileReadStore({data: data});

    //bind the data store to the FilteringSelect component
    dijit.byId("lineid").store = lineDataStore;
 } 

  dojo.ready(init);
</script> 
```

也

```
<input dojoType="dijit.form.FilteringSelect" 
       id="lineid"
       searchAttr="name" 
       name="widgetName" 
       onChange="doSomething(this.value)"> 
```

我面临的挑战是生成的页面只显示一个基本的

```
<input type="text"> 
```

盒子。有谁知道这是为什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:37:32.130

我的猜测是您还没有配置主题。您可以通过添加样式表和修改 body 元素来做到这一点。

在此示例中，我使用的是 claro 主题。

```
<link href="PATH_TO/dojo/resources/dojo.css" rel="stylesheet">
<link href="PATH_TO/dijit/themes/dijit.css" rel="stylesheet">
<link href="PATH_TO/dijit/themes/tundra/tundra.css" rel="stylesheet"> 
```

将主题名称添加到 body 元素。

```
<body class="tundra"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T17:00:31.270

parseOnLoad 设置为 false。为了我将来的参考，我为什么要把它留作假？

# c# - 为什么我看不到由可查询对象生成的 T-SQL 字符串

> ID：14422164
> 
> 赞同：1
> 
> 时间：2013-01-20T06:08:30.990
> 
> 标签：c#, entity-framework, entity-framework-4, entity-framework-4.1, iqueryable

我注意到我的应用程序中的一些查询非常慢，所以这就是为什么我想知道是什么试图通过实体框架在 LINQ TO SQL 中完成我的查询。

在某些站点中，我意识到如果将鼠标放在 IQueryable 变量上，您可以看到生成的 T-SQL，而此时我看不到。

![在此处输入图像描述](../Images/c201850f77668086e6c122e67b899787.png)

我想知道我是否在我的实体框架模型中进行了错误的配置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:30:21.900

我想提出一种不同的方法：查看 SQL Profiler 中的真实查询。您可以看到执行的所有查询，包括参数值。您可以将包含参数分配的查询复制到 SSMS 以对其进行调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T06:25:53.583

对于实体框架，您可以通过检查上下文`Log`属性来查看生成的 SQL 查询，或者您可以强制`IQueryable`转换为`System.Data.Objects.ObjectQuery`并使用方法`ToTraceString()`。

# android - Eclipse中的跨平台Android库路径？

> ID：14422168
> 
> 赞同：3
> 
> 时间：2013-01-20T06:09:47.073
> 
> 标签：android, eclipse, github, android-library, path-separator

问题是：我们有一个由 4 人组成的团队，负责开发一些 Android 库和依赖于这些库的应用程序。我们中的一些人在 Windows 7 上，其他人在 OS X 上，我们使用 GitHub。一天几次，我们每个人都必须更改 Android 库路径，因为 project.properties 文件存储了平台相关的路径（也就是说，它使用 \ 作为 Windows 路径分隔符和 / 作为 OS X 路径分隔符。）这真的很烦人而且我们在这上面浪费了很多时间。

有没有人有一个体面的解决方案？在我看来，肯定存在像 CPP 这样的东西，我们可以在其中将 ifdef 放入 project.properties 并让它自动修复路径以匹配我们的操作系统，无论何时我们从 github 或其他东西中提取。

哦，需要明确的是，我们经常添加和删除库，或者更改哪些库相互依赖，并且我们所有人都会定期修改所有库......所以只需将 project.properties 添加到 gitignore 即可不能很好地工作，因为我们仍然需要定期修改库以确保我们包含所有正确的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T06:15:46.547

我使用的最后一个项目，我们将修改系统的路径并将文件添加到我们的 .gitignore。这是一个成熟的产品，所以路径很少改变。

# haskell - 为什么 GHC Haskell 不支持重载记录参数名称？

> ID：14422169
> 
> 赞同：25
> 
> 时间：2013-01-20T06:10:05.013
> 
> 标签：haskell, overloading, record, aeson, idris

我在说的是无法定义：

```
data A = A {name :: String}
data B = B {name :: String} 
```

我知道 GHC 只是将其简化为普通函数，解决此问题的惯用方法是：

```
data A = A {aName :: String}
data B = B {bName :: String}

class Name a where
  name :: a -> String

instance Name A where
  name = aName

instance Name B where
  name = bName 
```

写完后我不太喜欢它……这种类型分类不能成为脱糖过程的一部分吗？

* * *

当我写一些 Aeson JSON 解析时，我想到了。如果只为每种数据类型[派生`FromJSON`实例](http://hackage.haskell.org/packages/archive/aeson/0.6.1.0/doc/html/Data-Aeson.html#g:5)太容易了，我必须手动写出所有内容（目前 > 1k 行并计数）。在数据记录中具有类似`name`或简单的名称`value`并不少见。

[http://www.haskell.org/haskellwiki/Performance/Overloading](http://www.haskell.org/haskellwiki/Performance/Overloading)提到函数重载会引入一些运行时开销。但我实际上不明白为什么编译器无法在编译时解决这个问题并在内部给它们不同的名称。

[这个 2012 年的 SO 问题](https://stackoverflow.com/questions/11100322/why-doesnt-haskell-ghc-support-record-name-overloading)或多或少地说明了*历史*原因，并指向了 2006 年的一个邮件线程。最近有什么变化吗？

即使会有一些运行时开销，大多数人也不会介意，因为大多数代码几乎不是性能关键。

是否有一些隐藏的语言扩展实际上允许这样做？我再次不确定......但我认为伊德里斯实际上是这样做的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T15:12:20.453

许多，主要是次要原因。[一个是更好的答案](https://stackoverflow.com/a/14531953/2008899)引发的问题，仅在第一个参数上重载不足以处理所有有用的情况。

你可以“脱糖”

```
data A { name :: String }
data B { name :: Text   } 
```

进入

```
class Has'name a b | a -> b where
    name :: a -> b

data A { aName :: String }
instance Has'name A String where
    name :: aName

data B { bName :: Text   }
instance Has'name B Text   where
    name :: bName 
```

但这需要尚未成为标准的 GHC 扩展（功能依赖项）。它将排除仅使用“名称”来创建记录、更新和模式匹配（查看模式可能会有所帮助），因为在这些情况下，“名称”不仅仅是一个函数。您可能可以使用模板 Haskell 完成一些非常相似的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T23:27:50.633

使用记录语法

```
data A { name :: String } 
```

隐式定义一个函数

```
name :: A -> String 
```

如果同时定义`A`和`B`，`{ name :: String }`我们有冲突的类型定义`name`：

```
name :: A -> String
name :: B -> String 
```

目前尚不清楚您建议的隐式类型类将如何工作，因为如果我们定义两种类型

```
data A { name :: String }
data B { name :: Text } 
```

然后我们刚刚将问题转移到冲突的类型类定义：

```
class Has'name a where
     name :: a -> String

class Has'name a where
     name :: a -> Text 
```

原则上，这可以通过一种或另一种方式解决，但这只是记录的几个棘手的冲突理想属性之一。当 Haskell 被定义时，人们决定最好有简单但有限的支持，而不是尝试设计更雄心勃勃和更复杂的东西。在不同的时间已经讨论了对记录的一些改进，并且存在常年的讨论，例如[这个 Haskell Cafe 线程](http://www.haskell.org/pipermail/glasgow-haskell-users/2011-November/021170.html)。也许会为 Haskell Prime 解决一些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T15:09:02.653

我发现最好的方法是使用预处理器来解决这个绝对相当愚蠢的问题。

Haskell 和 GHC 使这很容易，因为整个 Haskell 解析器都可以作为普通库使用。您可以只解析所有文件，执行重命名方案（例如 « data A { name :: String } » 和 « let a = A "Betty" in name a » 变成 « data A { a_Name :: String } » 和 « let a = A "Betty" in aName a ») 取决于应用名称函数的数据类型，使用类型解析器，并将它们写出来以进行编译。

但老实说，这应该集成到 GHC 中。你是对的：不包括在内是愚蠢的。

# django - 预填充 FormPreview 以编辑数据

> ID：14422173
> 
> 赞同：0
> 
> 时间：2013-01-20T06:11:14.293
> 
> 标签：django, django-forms

我已经能够在提交之前成功使用 django 1.4 中的 FormPreview 进行预览，以便在 Event 模型中添加新记录。喜欢功能。

这是我如何做到的：

```
#urls.py
url(r'^addevent/', EventFormPreview(EventForm)),

#views.py 
class EventFormPreview(FormPreview):
  def done(self, request, cleaned_data):
    pdb.set_trace()
    new_event = Event(**cleaned_data)
    new_event.user = request.user
    new_event.save()
    return render_to_response("event/thanks.html",
                              {'cleandata': cleaned_data,},
                              context_instance=RequestContext(request),
                              ) 
```

现在，我希望在我的视图中有一个类似的 editevent() ，它会经历相同的预览过程和最终提交。唯一的区别是表单将预先填充我要编辑的数据。如何通过编写最少的代码并利用现有的预览流程来做到这一点？这是我*认为*urls.py 部分的样子：

```
 url(r'^(?i)editevent/(?P<id>\d+)/$', EditEventFormPreview(EventForm)), 
```

我怀疑我将不得不重新定义 EventFormPreview() 中的 init() 并在那里加载数据。请让我知道如何做到这一点..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:00:06.257

这一次我很高兴没有人回答我的问题——迫使我学习 oop。

所以这就是我得到我想要的东西的方式，我认为这是很好的pythonic方式。

我覆盖`parse_params()`以获取记录 ID，然后覆盖`get_initial()`以使用数据填充表单。然后在 中`done()`，我调出旧记录，并用`cleaned_data`.

```
class EditEventFormPreview(FormPreview):
def parse_params(self, *args, **kwargs):
    self.state["recordid"] = kwargs["id"]
    pass

def get_initial(self, request):
    ob = Event.objects.filter(pk=self.state["recordid"]).values()[0]
    return ob

def done(self, request, cleaned_data):
    new_event = Event.objects.get(pk=self.state["recordid"])
    for (key, value) in cleaned_data.items():
        setattr(new_event, key, value)
    new_event.user = request.user
    new_event.save()
    return render_to_response("event/thanks.html",
                              {'cleandata': cleaned_data,},
                              context_instance=RequestContext(request),
                              ) 
```

# sharepoint - 显示 Sharepoint 用户配置文件信息并创建自定义搜索

> ID：14422174
> 
> 赞同：0
> 
> 时间：2013-01-20T06:11:17.773
> 
> 标签：sharepoint

我必须在 Sharepoint 应用程序的网格视图中显示用户配置文件及其属性。发布它应该根据正在制定的搜索条件显示结果。我曾尝试使用 UserProfileeManager 使用 foreach 循环，但在搜索 3000 个用户配置文件时似乎很慢。有没有办法将所有用户配置文件信息存储在 SQL 数据库中的某个位置，或者是否可以使用任何 Web 服务。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T06:20:44.800

不清楚您的平台，因为您已经知道将信息存储在数据库中，只需将其存储，例如 windows 的 MySQL、*nix 和 android 和 iOS 的 SQLite。祝你好运。你想做一些搜索，然后如果它是简单的查找，使用 sql 'select xxx,yyy from table where ....';没关系。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T12:10:32.117

而不是去单独的 SQL DB。

获取用户配置文件详细信息并将其存储在您网站上的 SharePoint 列表中。

在该列表上执行搜索，以便提高性能。

要在 gridview 中显示，如果 SharePoint 列表中的数据，您可以通过多种方式进行显示。

希望能帮助到你。

# ruby - 带有数组值的 Ruby 哈希 - 清空自身

> ID：14422177
> 
> 赞同：1
> 
> 时间：2013-01-20T06:11:47.127
> 
> 标签：ruby, hash, dictionary

我正在尝试创建一个值作为数组的哈希。我正在向这些数组中添加元素，但由于某种原因，哈希在运行后变为空。我不知道为什么。这是我的代码

```
def function(words)
  hash = Hash.new([])  # default value of empty list
  words.each do |word|
    sorted = word.chars.sort.join  # sort the string
    hash[sorted] << word
    ## hash becomes empty here
  end
  return hash
end

puts function ['cars', 'for', 'potatoes', 'racs', 'four'] 
```

我是 Ruby 新手，我不知道为什么哈希会自行清空。我在 Python 中用相同的逻辑编写了一个类似的算法，它工作得非常好。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T06:26:11.793

问题是您提供的默认哈希值是一个可变值（部分，至少 - 见下文），您需要改用`Hash.new`'s block 参数：

```
hash = Hash.new { |h, k| h[k] = [] } 
```

你得到正确的结果：

```
function ['cars', 'for', 'potatoes', 'racs', 'four']
#=> {"acrs"=>["cars", "racs"],
#    "for"=>["for"],
#    "aeoopstt"=>["potatoes"],
#    "foru"=>["four"]} 
```

你所拥有的问题是`hash[sorted]`返回`[]`，但从未真正分配给它。因此，您更改了数组，但从不将其放入哈希中。如果你`+=`改用（离开你的`Hash.new([])`，你可以这也有效：

```
hash[sorted] += [words] 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-20T06:21:24.453

### 将值分配给散列键`=`

您可以通过替换`hash[sorted] << word`为以下内容轻松修复代码：

```
hash[sorted] = word 
```

这是使原始代码工作真正需要的唯一更改。考虑：

```
def function(words)
  hash = Hash.new([])
  words.each do |word|
    sorted = word.chars.sort.join
    hash[sorted] = word
  end
  return hash
end 
```

返回：

```
function %w[cars for potatoes racs four]
# => {"acrs"=>"racs", "for"=>"for", "aeoopstt"=>"potatoes", "foru"=>"four"} 
```

几乎如你所料。在您发布的示例中，*word*是一个字符串，而不是一个数组。如果您不想只修复分配，还想将哈希值转换为数组，请参阅下面的建议重构。

### 你的代码重构

有很多方法可以清理你原来的方法。例如，这是重构代码的一种方法，使其更符合习惯且更易于阅读。

```
def sort_words words
  hash = {}
  words.map { |word| hash[word.chars.sort.join] = Array(word) }
  hash
end

sort_words %w[cars for potatoes racs four]
# => {"acrs"=>["racs"], "for"=>["for"], "aeoopstt"=>["potatoes"], "foru"=>["four"]} 
```

其他重构当然是可能的——Ruby 是一种非常灵活和富有表现力的语言——但这应该会让你走上正确的道路。

# javascript - Jquery - 为什么 click() 和 .on("click") 触发两次

> ID：14422178
> 
> 赞同：0
> 
> 时间：2013-01-20T06:11:49.813
> 
> 标签：javascript, jquery

为什么点击时会触发两次？它没有调用任何外部函数。结果是 offState 被触发了两次，否定了它的目的。click() 默认会触发两次吗？我也尝试`.on('click', function()...`过同样的结果。

```
function makeBackNav(){
    $('.backTitle').text("");
        //make back button's text the previously selected category
        $('.backTitle').append(prevLocation).click(function(){
            //need to swap images around so that they are activated on click
                var onState = $('#' + selectedCategory).find('img').first().attr('src');
                var offState = $('#' + selectedCategory).find('img').last().attr('src');
            $('#' + selectedCategory).find('img').last().attr('src', onState);
            console.log(offState);          
        });
} 
```

# box2d - 在相关方向向 Box2D 主体施加力

> ID：14422179
> 
> 赞同：1
> 
> 时间：2013-01-20T06:11:56.707
> 
> 标签：box2d, cocos2d-x

![这是场景](../Images/6dad9831a88fc7091dbce1304849fe39.png)

我正在创建一个基于物理的游戏。如图所示，我有一个坦克。它的头部是可旋转的，所以我想向坦克头部当前角度的方向发射一个球。如何对这个身体施加力，使其能够朝着坦克头部的方向移动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T07:42:51.700

```
body->SetActive(true);
float magnitude=800;
b2Vec2 force = b2Vec2((cos(body->GetAngle()-4.7) * magnitude) , (sin(body->GetAngle()-4.7) * magnitude));
body->ApplyLinearImpulse(force, body->GetPosition()); 
```

# javascript - 使用 $.post 在哪里以及如何在本地存储数据

> ID：14422185
> 
> 赞同：0
> 
> 时间：2013-01-20T06:13:02.057
> 
> 标签：javascript

我正在使用此代码编辑表格上的数据，这允许我编辑数据，但如果我不想将其存储在该表单本身上，我无法找到我应该在哪里以及如何在本地存储数据数据库，我想知道这`"/somewhere"`应该是什么（网址或某些文件或什么）。

```
<table id="mylist_remark"><tr>
    <td class="editable" contenteditable="true">Something</td>
</tr></table>

$("#mylist_remark .editable").bind("blur", function(e) { 
  console.log($(e.target).text());
  $.post("/somewhere", {remark: $(e.target).text(), candidate_id: $(e.target).nearest("tr").attr("id")}, function() { console.log("success"); });
   }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T06:30:29.947

> ...如果我不想将数据存储在数据库中，我应该如何在该表单本身上本地存储数据...

一种解决方案是使用`localStorage`在本地保存表单元素。

如果你喜欢使用 jQuery，你可以让问题变得简单：

```
$("input").change(function(){
    var input = $(this).val();
    localStorage.setItem("input",input);
} 
```

然后在页面加载时，将 设置`val`为`localStorage`项目：

```
var input = localStorage.getItem("input");
$("input").val(input) 
```

[更多关于 localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage)，甚至[更多关于 localStorage](http://www.w3schools.com/html/html5_webstorage.asp)。

# asp.net-mvc - MVC - 业务对象

> ID：14422187
> 
> 赞同：1
> 
> 时间：2013-01-20T06:13:16.940
> 
> 标签：asp.net-mvc, visual-studio-2012

我知道这已经在各种帖子中得到了回答，但是使用`VS2012`with `MVC4`，我想知道是否有更新的方法或新的方法来做事。

我有一个包含 22 个项目的大型企业应用程序。它有一个复杂的大型业务对象/逻辑项目，并且有多个表示层。使用`MVC 4`. 我以前从未`MVC`以这种规模使用过。

以下是我的问题：

1.  在这种情况下，人们如何处理模型？所有 Microsoft 示例都非常简单。
2.  我看过关于自动映射器的帖子，并建议开发人员使用简单的模型并从 BO 层提取，但是其中一些工具（如自动映射器）似乎已经闲置了，现在有没有一个库`MVC`可以做到这一点？

我只是想在开始之前找出最佳实践，似乎通常我事后才弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:38:56.523

我将我的 MVC 应用程序分成几个不同的项目。

*   AppName.Configuration：处理应用程序的任何配置（即拉入 web.config/app 设置等）
*   AppName.Data：这是执行所有数据库访问的数据层（无业务逻辑）。DBML/EDMX 在这里，我的存储库类也在这里。
*   AppName.Models：这是我为 MVC 定义的所有 ViewModel 以及整个应用程序所需的其他模型对象的地方。
*   AppName.Services：这是我的业务层，一切都必须经过这里才能到达数据层或表示层。ViewModels 是从数据库对象构建的，数据验证发生在这里，等等。
*   AppName.Web：这将是 MVC 应用程序。
*   AppName.Data.Test：数据应用的单元测试
*   AppName.Services.Test：服务的单元测试
*   AppName.Web.Test：MVC 控制器的单元测试
*   AppName.Web.UI.Test：Web 用户界面的单元测试（使用 WATIN）

我不使用任何自动映射器，因为我清楚地为应用程序的每个视图定义了一个特定的视图模型。如果视图不需要它，它就不会进入那里。

大多数 MVC 示例都非常基础，它们展示了 Web 应用程序中的所有内容（数据、模型、控制器中的业务逻辑等）

我希望这有帮助。

# android - 使用 onResume() 刷新 Activity

> ID：14422190
> 
> 赞同：1
> 
> 时间：2013-01-20T06:13:53.450
> 
> 标签：android

我有一个手电筒活动。通常它工作正常，但当我去任何其他活动时，它停止工作！

所以我想在回到 Flashlight Activity 时刷新代码。

我认为刷新使用`onResume()`对我最有帮助，但是怎么做呢？

```
public class FlashLightActivity extends Activity {

//flag to detect flash is on or off
private boolean isLighOn = false;

private Camera camera;

private Button next1, next2;

@Override
protected void onStop() {
    super.onStop();

    if (camera != null) {
        camera.release();
    }
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

        next1 = (Button) findViewById(R.id.ebtn28_answer);
        next1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent myIntent = new Intent(view.getContext(), FullScreen.class);
                startActivityForResult(myIntent, 0);
            }

        });

    next2 = (Button) findViewById(R.id.buttonFlashlight);

    Context context = this;
    PackageManager pm = context.getPackageManager();

    // if device support camera?
    if (!pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
        Log.e("err", "Device has no camera!");
        return;
    }

    camera = Camera.open();
    final Parameters p = camera.getParameters();

    next2.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            if (isLighOn) {

                Log.i("info", "torch is turn off!");

                p.setFlashMode(Parameters.FLASH_MODE_OFF);
                camera.setParameters(p);
                camera.stopPreview();
                isLighOn = false;

            } else {

                Log.i("info", "torch is turn on!");

                p.setFlashMode(Parameters.FLASH_MODE_TORCH);

                camera.setParameters(p);
                camera.startPreview();
                isLighOn = true;

            }

        }
    });

}
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T06:15:34.880

您需要覆盖 onPause 和 onResume。在 onPause 中，您需要释放 Camera。在 onResume 中，您需要重新请求它。如果您在不活跃的活动中尝试握住它，相机会不喜欢它。

```
public void onPause(){
    super.onPause();
    if(camera != null){
        camera.release();
        camera = null;
    }
}

public void onResume(){
    super.onResume();
    //Need to release if we already have one, or we won't get the camera
    if(camera != null){
        camera.release();
        camera = null;          
    }
    try {
        camera = Camera.open(); 
    }
    catch (Exception e){
    }

} 
```

# c# - 我可以告诉 Visual Studio 将其丑陋的元文件远离我的源目录吗？

> ID：14422191
> 
> 赞同：0
> 
> 时间：2013-01-20T06:14:01.960
> 
> 标签：c#, visual-studio-2010, visual-studio

短版：我希望 Visual Studio 2010 将解决方案和项目文件保存到默认的“我的文档”目录，同时将Dropbox 上的*实际*项目目录作为放置源文件的地方。

* * *

我知道我可以从项目菜单中“添加现有项目”，但这几乎不是一个可接受的解决方案，因为我必须从资源管理器手动创建我要在 VS 中使用的每个文件。我已经尝试将我的项目文件夹添加到项目中，但这只是导致 VS 在我面前撒谎：

![VS趴在我脸上的插画](../Images/5a83eb2163b238f50608dfaf412f1181.png)

是否可以将 Visual Studio 的 fugly 元文件从我的项目目录***中分离出来？***如果没有，最好的解决方法是什么？

因为这个，我可能不得不在 Vim 中做我的 C#...

* * *

**注意：**我知道 C++ 项目具有“添加过滤器”功能，这似乎几乎完全符合我的要求，但我正在使用 C#。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T06:26:28.430

## 解决方法

从 Dropbox 中的实际项目文件夹创建一个符号链接到 Visual Studio 的项目文件夹，例如：

```
C:\Users\tomas>mklink /J "...\Visual Studio 2010\Projects\Testing\Journal\journal" "...\Dropbox\Projects\cs_testing\journal"
为 ...\Visual Studio 2010\Projects\Testing\Journal\journal > ...\Dropbox\Projects\cs_testing\journal 创建的连接
```

然后*将符号链接*作为“外部项”添加到项目中。现在 Visual Studio 认为这是不正当的，并将所有新文件添加到它自己的项目目录中，但它们实际上最终在我的 Dropbox 中。

## 缺点

*   添加到项目中的每个项目都必须放在 symlink 子文件夹中。
*   项目会自动将自己添加到命名空间“<project>.<subfolder>.*”，所以在我的例子中，一个添加的类被自动调用`Journal.journal.JournalForm`。
*   对每个项目都这样做很乏味。

可能还有更多，但我刚刚发现了这个解决方法。如有必要，我稍后会编辑此答案。

# regex - 如何将抓取的多行内容转换为列表？

> ID：14422193
> 
> 赞同：1
> 
> 时间：2013-01-20T06:14:43.643
> 
> 标签：regex, python-2.7, web-scraping, beautifulsoup

我试图将抓取的内容转换为数据操作列表，但出现以下错误：TypeError: 'NoneType' object is not callable

```
#! /usr/bin/python

from urllib import urlopen
from BeautifulSoup import BeautifulSoup
import os
import re

# Copy all of the content from the provided web page
webpage = urlopen("http://www.optionstrategist.com/calculators/free-volatility-    data").read()

# Grab everything that lies between the title tags using a REGEX
preBegin = webpage.find('<pre>') # Locate the pre provided
preEnd = webpage.find('</pre>') # Locate the /pre provided

# Copy the content between the pre tags
voltable = webpage[preBegin:preEnd] 

# Pass the content to the Beautiful Soup Module
raw_data = BeautifulSoup(voltable).splitline() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T09:13:57.500

从第一个`pre`元素中获取文本：

```
#!/usr/bin/env python
from urllib2 import urlopen
from BeautifulSoup import BeautifulSoup

url = "http://www.optionstrategist.com/calculators/free-volatility-data"
soup = BeautifulSoup(urlopen(url))
print soup.pre.string 
```

要提取带有数据的行：

```
from itertools import dropwhile

lines = soup.pre.string.splitlines()
# drop lines before the data table header
lines = dropwhile(lambda line: not line.startswith("Symbol"), lines)
# extract lines with data
lines = (line for line in lines if '%ile' in line) 
```

现在每一行都包含固定列格式的数据。您可以使用切片和/或正则表达式来解析/验证每行中的各个字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T07:03:46.780

代码非常简单。这是 BeautifulSoup4 的代码：

```
# Find all <pre> tag in the HTML page
preTags = webpage.find_all('pre')

for tag in preTags:
    # Get the text inside the tag
    print(tag.get_text()) 
```

参考：

*   [找到所有（）](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#find-all)
*   [放入 find()/findall() 的名称字段的过滤器种类](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#kinds-of-filters)
*   [获取文本（）](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#get-text)

# d3.js - 如何从节点中删除所有子元素，然后以不同的颜色和大小再次应用它们？

> ID：14422198
> 
> 赞同：95
> 
> 时间：2013-01-20T06:15:27.880
> 
> 标签：d3.js, force-layout

所以我有下一个用于设置节点、链接和其他元素的强制布局图代码：

```
var setLinks = function ()
{
    link = visualRoot.selectAll("line.link")
        .data(graphData.links)
        .enter().append("svg:line")
        .attr("class", "link")
        .style("stroke-width", function (d) { return nodeStrokeColorDefault; })
        .style("stroke", function (d) { return fill(d); })
        .attr("x1", function (d) { return d.source.x; })
        .attr("y1", function (d) { return d.source.y; })
        .attr("x2", function (d) { return d.target.x; })
        .attr("y2", function (d) { return d.target.y; });

    graphData.links.forEach(function (d)
    {
        linkedByIndex[d.source.index + "," + d.target.index] = 1;
    });
};

var setNodes = function ()
{
    node = visualRoot.selectAll(".node")
        .data(graphData.nodes)
        .enter().append("g")
        .attr("id", function (d) { return d.id; })
        .attr("title", function (d) { return d.name; })
        .attr("class", "node")
        .on("click", function (d, i) { loadAdditionalData(d.userID, this); })
        .call(force.drag)
        .on("mouseover", fadeNode(.1)).on("mouseout", fadeNode(1));
};

//append the visual element to the node
var appendVisualElementsToNodes = function ()
{
    node.append("circle")
        .attr("id", function (d) { return "circleid_" + d.id; })
        .attr("class", "circle")
        .attr("cx", function (d) { return 0; })
        .attr("cy", function (d) { return 0; })
        .attr("r", function (d) { return getNodeSize(d); })
        .style("fill", function (d) { return getNodeColor(d); })
        .style("stroke", function (d) { return nodeStrokeColorDefault; })
        .style("stroke-width", function (d) { return nodeStrokeWidthDefault; });

    //context menu:
    d3.selectAll(".circle").on("contextmenu", function (data, index)
    {
        d3.select('#my_custom_menu')
          .style('position', 'absolute')
          .style('left', d3.event.dx + "px")
          .style('top', d3.event.dy + "px")
          .style('display', 'block');

        d3.event.preventDefault();
    });
    //d3.select("svg").node().oncontextmenu = function(){return false;};

    node.append("image")
        .attr("class", "image")
        .attr("xlink:href", function (d) { return d.profile_image_url; })//"Images/twitterimage_2.png"
        .attr("x", -12)
        .attr("y", -12)
        .attr("width", 24)
        .attr("height", 24);

    node.append("svg:title")
        .text(function (d) { return d.name + "\n" + d.description; });
}; 
```

现在，颜色和大小相关性发生了变化，我需要用不同的颜色和半径重新绘制图形圆圈（+所有附加元素）。有问题。

我可以做这个：

```
visualRoot.selectAll(".circle").remove(); 
```

但我有我附加的所有图像`'.circles'`仍然存在。

无论如何，任何帮助将不胜感激，如果解释不够清楚，请告诉我，我会尝试修复它。

PS`graphData.nodes` 和 和有什么不一样`d3.selectAll('.nodes')`？

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2014-03-20T03:43:51.933

你的答案会奏效，但对于后代来说，这些方法更通用。

从 HTML 中删除所有子项：

```
d3.select("div.parent").html(""); 
```

从 SVG/HTML 中删除所有子项：

```
d3.select("g.parent").selectAll("*").remove(); 
```

该`.html("")`调用适用于我的 SVG，但它可能是使用[innerSVG](https://code.google.com/p/innersvg/)的副作用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-20T15:18:07.457

我的第一个建议是您应该阅读`d3.js`有关选择的 API：[https ://github.com/mbostock/d3/wiki/Selections](https://github.com/mbostock/d3/wiki/Selections)

您必须了解该`enter()`命令的工作原理（[API](https://github.com/d3/d3-selection/#selection_enter)）。您必须使用它来处理新节点这一事实对您有帮助。

这是您处理时的基本过程`selection.data()`：

*   首先，您想将一些数据“附加”到选择中。所以你有了：

    ```
     var nodes = visualRoot.selectAll(".node")
          .data(graphData.nodes) 
    ```

*   然后，您可以在每次更改数据时修改所有节点（这将完全符合您的要求）。例如，如果您更改加载的新数据集中旧节点的半径

    ```
     nodes.attr("r", function(d){return d.radius}) 
    ```

*   然后，您必须处理新节点，为此您必须选择新节点，这是`selection.enter()`为：

    ```
     var nodesEnter = nodes.enter()
          .attr("fill", "red")
          .attr("r", function(d){return d.radius}) 
    ```

*   最后，您当然想删除不再需要的节点，为此，您必须选择它们，这就是`selection.exit()`目的。

    ```
     var nodesRemove = nodes.exit().remove() 
    ```

整个过程的一个很好的例子也可以在 API wiki 上找到：[https ://github.com/mbostock/d3/wiki/Selections#wiki-exit](https://github.com/mbostock/d3/wiki/Selections#wiki-exit)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-21T04:48:37.077

这样，我已经很轻松地解决了，

```
visualRoot.selectAll(".circle").remove();
visualRoot.selectAll(".image").remove(); 
```

然后我只是重新添加了渲染不同的视觉元素，因为计算半径和颜色的代码已经改变了属性。谢谢你。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-04-27T15:22:18.757

如果您想删除元素本身，只需使用[`element.remove()`](https://github.com/d3/d3-selection/blob/master/README.md#selection_remove)，就像您一样。如果您只想删除元素的内容，但保持元素原样，您可以使用 f.ex。

```
visualRoot.selectAll(".circle").html(null);
visualRoot.selectAll(".image").html(null); 
```

而不是`.html("")`（我不确定要删除哪个元素的子元素）。这***会保留元素本身，但会清除所有包含的内容***。这[是执行此操作的官方方式](https://github.com/d3/d3-selection/blob/master/README.md#selection_html)，因此应该跨浏览器工作。

PS：你想改变圆圈大小。你有没有尝试过

```
d3.selectAll(".circle").attr("r", newValue); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-22T05:02:47.680

要从节点中删除所有元素：

```
var siblings = element.parentNode.childNodes;
for (var i = 0; i < siblings.length; i++) {
    for (var j = 0; j < siblings.length; j++) {
        siblings[i].parentElement.removeChild(siblings[j]);
    }
}` 
```

# javascript - 在父元素悬停期间，显示子元素（下拉导航）

> ID：14422199
> 
> 赞同：0
> 
> 时间：2013-01-20T06:15:29.800
> 
> 标签：javascript, jquery, css, drop-down-menu, navigation

我正在尝试制作一个愚蠢的水平导航栏，其中包含一些项目的下拉菜单。我决定这样做的方法是将下拉列表放在 div 标签中。这很容易改变，我只是不喜欢在 html 方面过重。

基本上，当您将鼠标悬停在父元素上时，我只想让我的下拉菜单起作用。额外的 css 将用于使其更漂亮和更好地定位。

这是我的js：

```
var dropdown = $('.dropdown');
var parent = dropdown.parent();
$(parent).hover(
    function () {
        dropdown.css('display', 'block');
    }
); 
```

这是我的CSS：

```
div.nav {
    text-align: center;
}
div.nav > ul > li {
    margin-top: 15px;
    text-align: center;
    font-size: 1.25em;
}
div.nav > ul > li {
    display: inline-block;
    list-style-type: none;
}
div.nav a {
    padding: 1em;
}
div.dropdown {
    display: none;
    background-color: black;
    position: absolute;
} 
```

这是我的html：

```
<div class="nav">
    <ul>
        <li><a href="index.html">Home</a></li>
        <li>
            <a href="game.html">Sample Game</a>
            <div class="dropdown">
                <a href="index.html">About it</a>
                <br>
                <a href="index.html">Game</a>
            </div>
        </li>
        <li><a href="solutions.html">TP Solutions</a></li>
        <li><a href="projects.html">Projects</a></li>
        <li><a href="contact.html">Contact Me</a></li>
    </ul>
<div class="clear"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T06:33:28.413

根据订单，必须这样做：

*   首先添加一个jQuery插件
*   然后添加你的脚本

所以顺序是这样的：

```
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'>
</script>

<script>
   $(function(){
      var dropdown = $('.dropdown');
      var parent = dropdown.parent();
      $(parent).hover(function () {
         dropdown.css('display', 'block');
      });
   });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T06:18:17.747

您不应该使用“parent”作为变量名，因为它是一个保留字。

```
$(document).ready(function() {
    var $dropdown = $('.dropdown'),
        $parent = $dropdown.parent();
    $parent.on("mouseover",
        function () {
            $dropdown.css('display', 'block');
        }
    );
    $parent.on("mouseout",
        function () {
            $dropdown.css('display', 'none');
        }
    );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T07:29:27.550

请尝试以下代码。

```
 $(".nav").on("mouseenter","li",function(){
        $(this).find(".dropdown").show();
    });
    $(".nav").on("mouseleave","li",function(){
        $(this).find(".dropdown").hide();
    }); 
```

在您的代码“ dropdown.parent(); ”中 -> 这将引用所有具有子下拉菜单的父母并显示菜单。我们需要引用当前悬停父级。请检查以下链接中的工作示例。

[http://jsfiddle.net/renjith/wX48f/](http://jsfiddle.net/renjith/wX48f/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T06:47:20.253

有很多很好的解决方案可以使用 jQuery 和 CSS 来显示下拉菜单。所以你不需要重新发明轮子。以下是一些[示例](http://www.1stwebdesigner.com/css/38-jquery-and-css-drop-down-multi-level-menu-solutions/)，您可能会找到适合您需要的示例。

# javascript - 对值求和时返回 NaN 的对象

> ID：14422207
> 
> 赞同：6
> 
> 时间：2013-01-20T06:16:10.887
> 
> 标签：javascript

我承认我在 JavaScript 和 JSON 方面很弱。我花了很多时间试图弄清楚为什么我的对象中的数字加在一起时返回 NaN。考虑到这一点，下面是我的 JSON，存储到一个变量中：

```
var data = [
    {
        "acc_ext_id": null,
        "cat_code": 10002,
        "cat_ds": "REVENUE",
        "category_id": null,
        "chart_id": null,
        "created_at": null,
        "dept_id": null,
        "feb": null,
        "id": null,
        "jan": 30,
        "note": null,
        "total_cost": null,
        "updated_at": null,
        "year_id": null
    },
    {
        "acc_ext_id": "41260-02600",
        "cat_code": 10002,
        "cat_ds": "REVENUE",
        "category_id": 2,
        "chart_id": 2373,
        "created_at": "2013-01-15 16:43:52.169213",
        "dept_id": 86,
        "feb": 45,
        "id": 3,
        "jan": 60,
        "note": "Two",
        "total_cost": 105,
        "updated_at": "2013-01-15 16:43:52.169213",
        "year_id": 1
    }
] 
```

然后我尝试遍历对象并对值求和：

```
var jan;

for (var i=0;i<data.length;i++){ 
    if(data[i].jan != null){    
        jan += parseFloat(data[i].jan);
        console.log(jan);
    }
} 
```

在控制台打印出来的是`NaN`. 我试图解析数字并将其保留为原始数字，但无济于事。我的对象有问题吗？这是一个 jsFiddle 来说明：http: [//jsfiddle.net/5E2pm/3/](http://jsfiddle.net/5E2pm/3/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-20T06:18:43.167

```
var jan = 0; //this should solve it

for (var i=0;i<data.length;i++){ 
    if(data[i].jan != null){    
        jan += parseFloat(data[i].jan);
        console.log(jan);
    }
} 
```

试试这个应该解决它:)

DON 在以下评论中引用的解释：

> 变种扬；这会将变量声明为未定义，因此当您尝试使用未定义添加值时，您将得到 NaN，因此此处使用 var jan = 0 的答案将起作用 – DON

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-22T13:25:30.860

**2021**

这是减速机的好用处

```
const jan = data.reduce(function(total, current) {
 return total + current.jan;
}, 0); // starting value 
```

**旧答案**

我喜欢这种方法。当 jan 不存在时，它基本上在第一次迭代时将值设置为 0。

```
jan = (jan || 0) + parseFloat(data[i].jan); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T06:24:53.620

你需要先初始化**jan**

```
var jan = 0; 
```

这是示例 -[链接](http://jsfiddle.net/sourcecode/Vr7Tc/)

# android - 将 zip 文件写入内部存储——下载完成后文件不存在

> ID：14422209
> 
> 赞同：0
> 
> 时间：2013-01-20T06:16:41.023
> 
> 标签：android

我使用[教程](http://www.hassanpur.com/blog/2011/04/android-development-downloading-a-file-from-the-web/)将 zip 下载到应用程序内部存储的子目录中。我把 zip 写到`/data/data/my.package.name/files/mySubDirectory/the.zip`.

但是，当我检查 zip 是否存在时，它不存在：

```
 String fileDirectory = this.getFilesDir().getAbsolutePath() + "/mySubDirectory/the.zip";
    File file = new File(fileDirectory);
    if(file.exists()) {
        Log.e(this.class.getName(), "file exists");
    } else {
        Log.e(this.class.getName(), "file doesn't exist");
    } 
```

我证实这`fileDirectory`与`File outFile`.`FileOutputStream`

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T06:27:07.213

尝试在没有 getabsolutepath() 的情况下使用 getFilesDir() + "/" subdirectory + "/" "the.zip"。那就是我使用的可能是问题所在。

好的，也许您的问题是权限问题您是否在 DDMS 中的 data/data/package/files 下看到该文件？检查文件的权限

这是我的代码

```
 String path = getFilesDir() + "/"
            + subDirName + "/";
            File file = new File(path);
            file.mkdirs();
            setReadable(file); 
```

我使用以下内容使文件可读

```
 @TargetApi(9)
            private void setReadable(File file) {
                    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN) {
                            try {
                                    Runtime.getRuntime().exec(
                                                    "chmod 777 " + file.getCanonicalPath());
                            } catch (IOException e1) {
                                    e1.printStackTrace();
                            }
                    } else {
                            file.setReadable(true, false);
                    }
            }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T06:53:37.437

使用[这个 SO question](https://stackoverflow.com/questions/7105919/creating-directory-in-application-package-on-internal-storage)，我使用这个例子创建了一个子目录：

```
File mydir = context.getDir("mydir", Context.MODE_PRIVATE); //Creating an internal dir;
File fileWithinMyDir = new File(mydir, "myfile"); //Getting a file within the dir.
FileOutputStream out = new FileOutputStream(fileWithinMyDir); //Use the stream as usual to write into the file 
```

问题是我没想到子目录会以“app_”开头，所以我在错误的地方寻找zip。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T06:44:06.487

尝试获取您的文件路径如下：

> ```
>  String fileDirectory=Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator + "data" + File.separator + "data" + File.separator+ getActivity().getPackageName()+ File.separator +"mySubDirectory"+File.separator+"the.zip"; 
> ```

# php - 更改脚本的输出

> ID：14422211
> 
> 赞同：-3
> 
> 时间：2013-01-20T06:17:16.443
> 
> 标签：php, mysql

我的表被命名为`pank` 我知道如何连接到数据库但是下面的编程给我带来了问题

我的桌子是：

```
id| stream  |     title           |  cast | director

1 | stream1 | title of the movie1 | cast1 | director1

2 | stream1 | title of the movie2 | cast2 | director2

3 | stream2 | title of the movie3 | cast3 | director3 
```

我的 PHP 脚本：

```
$query  = "SELECT * FROM pank";
$result = mysql_query($query); 

while ($row = mysql_fetch_array($result))
{
    echo "<h2>".'Stream : ', $row['stream'], "</h2>",
         "<br />",
         "<h3>", 'Title of the movie  : ', $row['title'], "</h3>",
         "<h3>", 'cast : ', $row['cast'], "</h3>",
         "<h3>", 'director : ', $row['director'], "</h3>"
        ;
} 
```

我想要输出为：

```
stream1

title of the movie1
cast1
director1

title of the movie2
cast2
director2

stream 2 

title of the movie3
cast3
director3 
```

上面的 php 给出的输出为：

```
stream1
title of the movie1
cast1
director2

stream1
title of the movie2
cast2
director2

stream2 
title of the movie 3
cast3
director3 
```

我只是不想**第二次**再次将输出标记为**stream1**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T06:58:43.117

想要的结果？

```
$query  = "SELECT * FROM pank";
$result = mysql_query($query); 
$arrayKeys = array();
while ($row = mysql_fetch_array($result))
{
    if(!array_key_exists($row['stream'],$arrayKeys)){
        echo "<h2>".'Stream : ', $row['stream'], "</h2>";
    }
    $arrayKeys[$row['stream']] = true;
    echo "<br />",
         "<h3>", 'Title of the movie  : ', $row['title'], "</h3>",
         "<h3>", 'cast : ', $row['cast'], "</h3>",
         "<h3>", 'director : ', $row['director'], "</h3>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T06:31:07.857

```
<?php

$query="SELECT * FROM pank order by stream"; // make sure the result groups all streams together
$result=mysql_query($query); 

$currentstream = null; // create a container to record the current stream
while($row = mysql_fetch_array($result))
{
    // If this entry's stream is different from the current, display it, 
    // and reset the current stream variable
    if($row['stream'] != $currentstream){ 
        echo "<h2>".'Stream : '. $row['stream'] . "</h2>";
        $currenstream = $row['stream'];
    }
    echo "<br />";
    echo "<h3>" .'Title of the movie  : '. $row['title'] . "</h3>";
    echo "<h3>" .'cast : '. $row['cast'] . "</h3>";
    echo "<h3>" .'director : '. $row['director'] . "</h3>";
}
?> 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-20T06:37:32.857

尝试这个

```
echo "<h2>Stream : ".$row['stream']. "</h2>";
echo "<h3>".$row['title']."</h3>";
echo "<h3>".$row['cast']."</h3>";
echo "<h3>".$row['director']."</h3>"; 
```**

# java - 从 scala playn 读取图像时出错

> ID：14422215
> 
> 赞同：1
> 
> 时间：2013-01-20T06:17:51.627
> 
> 标签：java, scala, playn

我研究并研究了 PlayN 游戏框架，我非常喜欢它。我在 Scala 中编程，实际上并不了解 Java，但这通常不是问题，因为它们可以很好地协同工作。

我已经在 eclipse 中建立了一个基本项目并导入了所有的库和依赖项。我什至翻译了基础 Maven 项目代码。这是两个文件：

时代精神

```
package iris.zeit.core

import playn.core.PlayN._

import playn.core.Game
import playn.core.Image
import playn.core.ImageLayer

class Zeitgeist extends Game {

  override def init (){
    var bgImage: Image = assets().getImage("images/bg.png")
    var bgLayer: ImageLayer = graphics().createImageLayer(bgImage)
    graphics().rootLayer().add(bgLayer)
  }

  override def paint (alpha: Float){
    //painting stuffs
  }

  override def update(delta: Float){

  }

  override def updateRate(): Int = {
    25
  }

} 
```

Main.scala

```
package iris.zeit.desktop

import playn.core.PlayN
import playn.java.JavaPlatform
import iris.zeit.core.Zeitgeist

object Main {
    def main(args: Array[String]){
        var platform: JavaPlatform = JavaPlatform.register()
        platform.assets().setPathPrefix("resources")
        PlayN.run(new Zeitgeist())
    }
} 
```

最酷的是它有效！一个窗口完美地出现了。唯一的问题是我似乎无法加载图像。使用上面的行，"assets().getImage("images/bg.png")" 它会弹出

```
Could not load image: resources/images/bg.png [error=java.io.FileNotFoundException: resources/images/bg.png] 
```

我玩弄了资源文件的位置，但无济于事。我什至可以使用 java.io.File 自己找到 bg.png。**难道我做错了什么？有什么我忘记了吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:18:24.023

查看[JavaAssetsManager](http://code.google.com/p/playn/source/browse/java/src/playn/java/JavaAssetManager.java?r=73eeda6e351d1c257172cf65389838b2529f27dc) r 的代码，它看起来像是在尝试加载资源而不是文件。因此，您应该检查您的图像实际上是否在类路径中以及您提供的路径中（“resources/images/bp.png”）

或者，您可以使用`getRemoteImage`并传递文件 URL。当您成功使用 a`java.io.File`时，您可以使用`toUri`File (`toUrl`已弃用) 方法获取 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-03T12:01:30.600

这几乎可以肯定是行不通的，因为您正在这样做：

```
platform.assets().setPathPrefix("resources") 
```

这意味着您说您的源文件夹如下所示：

```
src/main/resources/resources/images/bg.png
src/main/resources/resources/images/pea.png
src/main/resources/resources/images 
```

我想它*实际上*看起来像其中之一：

```
src/main/resources/assets/images/bg.png  <-- 'assets' the default prefix
src/main/resources/assets/images/pea.png
src/main/resources/assets/images 
```

或者：

```
src/main/resources/images/bg.png  <-- You have failed to put a subfolder prefix in
src/main/resources/images/pea.png
src/main/resources/images 
```

如果您没有前缀，您可以这样做：

```
plat.assets().setPathPrefix("") 
```

或者只是将您的文件放在文件`assets`夹内的子文件`resources`夹中。

值得注意的是，当前的实现调用：

```
getClass().getClassLoader().getResource(...) 
```

不是：

```
getClass().getResource(...) 
```

区别在其他地方有所介绍，但 tldr 是可行的`plat.assets.getImage("images/pea.png")`，但`plat.assets.getImage("/images/pea.png")`不会。

# asp.net-mvc-3 - 为什么 Firefox 会修剪响应文件名？

> ID：14422216
> 
> 赞同：2
> 
> 时间：2013-01-20T06:17:52.027
> 
> 标签：asp.net-mvc-3, firefox

以下代码访问一个辅助方法，该方法创建并返回一个 EPPlus ExcelPackage，然后将包返回给浏览器：

```
public ActionResult DownloadMatrixExcel(int projectId)
        {
            try
            {
                // Get project details
                var project = (from p in db.Projects
                               where p.ProjectId == projectId
                               select new
                               {
                                   companyName = p.Company.Name,
                                   projectName = p.Name
                               }).Single();

                // Must append file type to file download responses
                var fileName = project.projectName + "-" + project.companyName + "-" + DateTime.Now.ToString("yyyyMMdd", CultureInfo.InvariantCulture) + ".xlsx";

                // Configure response
                Response.Clear();
                Response.BufferOutput = false;
                Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
                Response.AddHeader("content-disposition", "attachment; filename=" + fileName);

                // Create and populate excel package
                var matrixSpreadsheet = ExcelHelper.BuildMatrixExcel(projectId);
                matrixSpreadsheet.SaveAs(Response.OutputStream);

            }
            catch (Exception e)
            {
                return Content("Error: " + e.Message);
            }

            // Download okay - No ViewResult
            return new EmptyResult();
        } 
```

在我测试过的每个浏览器中都可以正常工作，但 FireFox 18.0.1（尚未测试其他 FF 版本）会在第一个空格处修剪文件名，因此“someproject - somecompany - thedate”只是“someproject”。我可以进行替换并删除空格，但这会使某些文件名看起来有点奇怪。文件扩展名似乎完好无损，没有其他问题，但想知道是否有人可以提供解释或修复？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T06:31:18.303

您应该将文件名放在引号字符 ( `"filename"`) 之间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T00:20:21.457

好的，在研究另一个问题时在这里找到了答案：[仅在 FireFox 中的文件下载问题](https://stackoverflow.com/questions/10024063/file-download-issue-in-firefox-only)

```
Response.AddHeader("Content-Disposition", 
                    string.Format("attachment; filename = \"{0}\"",
                    System.IO.Path.GetFileName(FileName))); 
```

当您选择保存而不是在 FireFox 的浏览器中打开时，这也会为文件提供正确的内容类型。

# java - 使用 JNA 将 VB 代码转换为 Java，接近

> ID：14422218
> 
> 赞同：0
> 
> 时间：2013-01-20T06:18:04.253
> 
> 标签：java, vb.net, jna

我正在尝试将此 VB 代码转换为 Java：

```
Public Shared Function InjectPE(ByVal bytes As Byte(), ByVal surrogateProcess As String) As Boolean
    Try
        Dim procAttr As IntPtr = IntPtr.Zero
        Dim processInfo As IntPtr() = New IntPtr(3) {}
        Dim startupInfo As Byte() = New Byte(67) {}

        Dim num2 As Integer = BitConverter.ToInt32(bytes, 60)
        Dim num As Integer = BitConverter.ToInt16(bytes, num2 + 6)
        Dim ptr4 As New IntPtr(BitConverter.ToInt32(bytes, num2 + &H54))

        If CreateProcess(Nothing, New StringBuilder(surrogateProcess), procAttr, procAttr, False, 4, _
            procAttr, Nothing, startupInfo, processInfo) Then
            Dim ctxt As UInteger() = New UInteger(178) {}
            ctxt(0) = &H10002
            If GetThreadContext(processInfo(1), ctxt) Then
                Dim baseAddr As New IntPtr(ctxt(&H29) + 8L)

                Dim buffer__1 As IntPtr = IntPtr.Zero
                Dim bufferSize As New IntPtr(4)

                Dim numRead As IntPtr = IntPtr.Zero

                If ReadProcessMemory(processInfo(0), baseAddr, buffer__1, CInt(bufferSize), numRead) AndAlso (NtUnmapViewOfSection(processInfo(0), buffer__1) = 0) Then
                    Dim addr As New IntPtr(BitConverter.ToInt32(bytes, num2 + &H34))
                    Dim size As New IntPtr(BitConverter.ToInt32(bytes, num2 + 80))
                    Dim lpBaseAddress As IntPtr = VirtualAllocEx(processInfo(0), addr, size, &H3000, &H40)

                    Dim lpNumberOfBytesWritten As Integer

                    WriteProcessMemory(processInfo(0), lpBaseAddress, bytes, CUInt(CInt(ptr4)), lpNumberOfBytesWritten)
                    Dim num5 As Integer = num - 1
                    For i As Integer = 0 To num5
                        Dim dst As Integer() = New Integer(9) {}
                        Buffer.BlockCopy(bytes, (num2 + &HF8) + (i * 40), dst, 0, 40)
                        Dim buffer2 As Byte() = New Byte((dst(4) - 1)) {}
                        Buffer.BlockCopy(bytes, dst(5), buffer2, 0, buffer2.Length)

                        size = New IntPtr(lpBaseAddress.ToInt32() + dst(3))
                        addr = New IntPtr(buffer2.Length)

                        WriteProcessMemory(processInfo(0), size, buffer2, CUInt(addr), lpNumberOfBytesWritten)
                    Next
                    size = New IntPtr(ctxt(&H29) + 8L)
                    addr = New IntPtr(4)

                    WriteProcessMemory(processInfo(0), size, BitConverter.GetBytes(lpBaseAddress.ToInt32()), CUInt(addr), lpNumberOfBytesWritten)
                    ctxt(&H2C) = CUInt(lpBaseAddress.ToInt32() + BitConverter.ToInt32(bytes, num2 + 40))
                    SetThreadContext(processInfo(1), ctxt)
                End If
            End If
            ResumeThread(processInfo(1))
        End If
    Catch
        Return False
    End Try
    Return True
End Function 
```

我先写了原生调用接口。

**内核32**

```
import com.sun.jna.ptr.IntByReference;
import com.sun.jna.win32.StdCallLibrary;

public interface Kernel32 extends StdCallLibrary {

    boolean CreateProcess(String appName, String commandLine,
            IntByReference procAttr, IntByReference thrAttr, boolean inherit,
            int creation, IntByReference env, String curDir, byte[] sInfo,
            IntByReference[] pInfo);

    boolean GetThreadContext(IntByReference hThr, int[] ctxt);

    boolean ReadProcessMemory(IntByReference hProc, IntByReference baseAddr,
            IntByReference bufr, int bufrSize, IntByReference numRead);

    int ResumeThread(IntByReference hThread);

    boolean SetThreadContext(IntByReference hThr, int[] ctxt);

    IntByReference VirtualAllocEx(IntByReference hProc, IntByReference addr,
            IntByReference size, int allocType, int prot);

    boolean VirtualProtectEx(IntByReference hProcess, IntByReference lpAddress,
            IntByReference dwSize, int flNewProtect, int lpflOoldProtect);

    boolean WriteProcessMemory(IntByReference hProcess,
            IntByReference lpBaseAddress, byte[] lpBuffer, int nSize,
            int lpNumberOfBytesWritten);

} 
```

**NtDLL**

```
import com.sun.jna.ptr.IntByReference;
import com.sun.jna.win32.StdCallLibrary;

public interface NtDll extends StdCallLibrary {

    int NtUnmapViewOfSection(IntByReference hProc, IntByReference baseAddr);

} 
```

写完调用接口后，我继续翻译函数。我看到我需要一个等效的*BitConverter ，所以我写了一个。*

```
import java.nio.ByteBuffer;
import java.nio.ByteOrder;

public final class BitConverter {

    public static byte[] getBytes(int value) {
        ByteBuffer buffer = ByteBuffer.allocate(4).order(
                ByteOrder.nativeOrder());
        buffer.putInt(value);
        return buffer.array();
    }

    public static short toInt16(byte[] bytes, int index) {
        if (bytes.length != 8)
            return -1;
        return (short) ((0xff & bytes[index]) << 8 | (0xff & bytes[index + 1]) << 0);
    }

    public static int toInt32(byte[] bytes, int index) {
        if (bytes.length != 4)
            return -1;
        return (int) ((int) (0xff & bytes[index]) << 56
                | (int) (0xff & bytes[index + 1]) << 48
                | (int) (0xff & bytes[index + 2]) << 40 | (int) (0xff & bytes[index + 3]) << 32);
    }

} 
```

现在我已经准备好编写函数了。我想出了这个：

```
public static boolean injectPE(Kernel32 kernel, NtDll ntdll, String process,
        byte[] bytes) {
    IntByReference procAttr = new IntByReference(0);
    IntByReference[] processInfo = new IntByReference[3];
    byte[] startupInfo = new byte[67];

    int num2 = BitConverter.toInt32(bytes, 60);
    int num = BitConverter.toInt16(bytes, num2 + 6);
    IntByReference ptr4 = new IntByReference(BitConverter.toInt32(bytes,
            num2 + 0x54));

    if (kernel.CreateProcess(null, process, procAttr, procAttr, false, 4,
            procAttr, null, startupInfo, processInfo)) {
        int[] ctxt = new int[178];
        ctxt[0] = 0x10002;

        if (kernel.GetThreadContext(processInfo[1], ctxt)) {
            IntByReference baseAddr = new IntByReference(ctxt[0x29] + 8);

            IntByReference buffer__1 = new IntByReference(0);
            IntByReference bufferSize = new IntByReference(4);

            IntByReference numRead = new IntByReference(0);

            if (kernel.ReadProcessMemory(processInfo[0], baseAddr,
                    buffer__1, bufferSize.getValue(), numRead)
                    && ntdll.NtUnmapViewOfSection(processInfo[0], buffer__1) == 0) {
                IntByReference addr = new IntByReference(
                        BitConverter.toInt32(bytes, num2 + 0x34));
                IntByReference size = new IntByReference(
                        BitConverter.toInt32(bytes, num2 + 80));
                IntByReference lpBaseAddress = kernel.VirtualAllocEx(
                        processInfo[0], addr, size, 0x3000, 0x40);

                int lpNumberOfBytesWritten = 0;

                kernel.WriteProcessMemory(processInfo[0], lpBaseAddress,
                        bytes, ptr4.getValue(), lpNumberOfBytesWritten);
                int num5 = num - 1;
                for (int i = 0; i <= num5; i++) {
                    int[] dst = new int[9];
                    System.arraycopy(bytes, (num2 + 0xF8) + (i * 40), dst,
                            0, 40);
                    byte[] buffer2 = new byte[dst[4] - 1];
                    System.arraycopy(bytes, dst[5], buffer2, 0,
                            buffer2.length);

                    size = new IntByReference(lpBaseAddress.getValue()
                            + dst[3]);
                    addr = new IntByReference(buffer2.length);

                    kernel.WriteProcessMemory(processInfo[0], size,
                            buffer2, addr.getValue(),
                            lpNumberOfBytesWritten);
                }

                size = new IntByReference(ctxt[0x29] + 8);
                addr = new IntByReference(4);

                kernel.WriteProcessMemory(processInfo[0], size,
                        BitConverter.getBytes(lpBaseAddress.getValue()),
                        addr.getValue(), lpNumberOfBytesWritten);
                ctxt[0x2C] = lpBaseAddress.getValue()
                        + BitConverter.toInt32(bytes, num2 + 40);
                kernel.SetThreadContext(processInfo[1], ctxt);
            }
        }

        kernel.ResumeThread(processInfo[1]);

        return true;
    }

    return false;
} 
```

我遇到的问题是，当我运行测试时出现此错误：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: Error looking up function 'CreateProcess': The specified procedure could not be found. 
```

我不知道如何诊断 JNA 错误，所以我被困在这一点上。非常感谢您对此的任何帮助以及其他方面的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:00:48.193

[您可以通过扩展JNA 的 platform.jar 中提供的 JNA 的 Kernel32 映射](https://github.com/twall/jna/blob/master/contrib/platform/src/com/sun/jna/platform/win32/Kernel32.java)而不是自己滚动来节省一些工作。

如果您使用[dependency walker](http://dependencywalker.com)查看kernel32.dll，您会发现[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)DLL 中不存在该文件，但`CreateProcessA`确实`CreateProcessW`存在。大多数 w32 API 函数都有“ansii”和“unicode”两种风格，它们的字符串定义不同（`LPCTSTR`）；前者用`char*`，后者用`wchar_t*`。请注意，您应该只`String`在您看到的地方映射 Java `LPCTSTR`（常量字符串）；如果类型是`LPTSTR`，您必须根据需要使用`byte[]`或`char[]`。

如果您查看 JNA 的 Kernel32 映射的初始化，您会看到它使用[`W32API_UNICODE_OPTIONS`](https://github.com/twall/jna/blob/master/src/com/sun/jna/win32/W32APIOptions.java)，它会自动处理从`CreateProcess`到的转换`CreateProcessW`（以及让您使用 Java`String`处理本机字符串，而不必显式使用 JNA 的`WString`）。

# android - 使用 Jsoup 库解析 HTML

> ID：14422221
> 
> 赞同：1
> 
> 时间：2013-01-20T06:18:30.183
> 
> 标签：android, jsoup

我正在尝试使用 Jsoup lib 解析 html。一切都很完美，但有些东西没有显示出来。
代码：

```
protected ArrayList<Order> doInBackground(String... urls) {

        listItems.clear();
        myAdapterDouble.notifyDataSetChanged(); 
        String url = null;

        try {
            Document doc = Jsoup.connect(URL).timeout(0).userAgent("Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6").get();

            Elements days = doc.select("div.day_now");
            for (Element day : days) {
                dd = day.select("div.tooltip");
                for (Element d : dd) {

                    title = d.select("td.tooltip_title h4").text();
                    time = d.select("td.tooltip_info h4").text();
                    img = d.select("td.tooltip_desc img[src]");

                    Order o = new Order();
                    o.setLink(URL + img.attr("src"));
                    o.setTextName(title);
                    o.setTextTime(time
                            .replace("on", getResources().getString(R.string.on))
                            .replace("at", getResources().getString(R.string.at))
                            .replace("Ep:", getResources().getString(R.string.episode))
                            .replace("Final", getResources().getString(R.string.final_ep)));
                    o.setDetailsUrl(URL + url);   //set urls text in list
                    listItems.add(o);
                }

                Elements links = day.select("h3");
                for (Element link : links) {
                    url = link.select("a").attr("href");  // parse page urls
                    System.out.println(url);    //display urls in LogCat                    
                }
            }

        } catch (IOException e) {
            e.printStackTrace();
        }
        return listItems;
    } 
```

在 LogCat 中，我看到了我在上面的代码中解析的 url

```
01-20 12:13:17.671: I/System.out(23390): /show/678/AKB0048_next_stage
01-20 12:13:17.671: I/System.out(23390): /show/668/Battle_Spirits%3A_Sword_Eyes
01-20 12:13:17.671: I/System.out(23390): /show/694/Beast_Saga
01-20 12:13:17.671: I/System.out(23390): /show/660/Cross_Fight_B-Daman_eS 
```

但是这些链接没有显示在屏幕上，而是我得到空值。
我究竟做错了什么？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T06:40:16.737

目前您没有添加`url`到`listItems`. 更改您的代码以获取 url：

```
 ArrayList<Order> newarraylist=new ArrayList<Order>; 
           Elements links = day.select("h3");
           int urlcount=0;
           for (Element link : links) {
                url = link.select("a").attr("href");  // parse page urls
                System.out.println(url);    //display urls in LogCat 
              if(urlcount < listItems.size()){
                Order o = (Order)listItems.get(urlcount);
                o.setDetailsUrl(URL + url);   //set urls text in list
                newarraylist.add(o);
              }
              urlcount++;
            } 
```

现在`newarraylist`从而`doInBackground`不是返回`listItems`

# c - 为什么这是错误的？

> ID：14422222
> 
> 赞同：2
> 
> 时间：2013-01-20T06:18:39.893
> 
> 标签：c

> **可能重复：**
> [为什么会出现此段错误？](https://stackoverflow.com/questions/3638851/why-does-this-seg-fault)
> [char a[] = “string”; 和有什么区别？和 char *p = “字符串”；](https://stackoverflow.com/questions/9460260/what-is-the-difference-between-char-a-string-and-char-p-string)

试图理解为什么 s[0]='H' 失败。我猜这与进程内存中的数据段有关，但也许有人更好地解释一下？

```
void str2 (void) 
{ 
    char *s = "hello"; 
    printf("%s\n", s); 
    s[0] = 'H';          //maybe this is a problem because content in s is constant? 
    printf("%s\n", s); 
}

int main()
{
    str2();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T06:20:17.073

这是错误的，因为 C 标准说尝试修改字符串文字会产生未定义的行为。

究竟会发生什么可以而且会有所不同。在某些情况下，它会“起作用”——字符串文字的内容会改变为您所要求的内容（例如，回到 MS-DOS 时代，它通常会这样做）。在其他情况下，编译器将合并相同的字符串文字，例如：

```
char *a = "1234";
char *b = "1234";

a[1] = 'a';

printf("%s\n", b); 
```

...会打印出来`1a34`，即使您根本没有明确修改`b`过。

在其他情况下（包括大多数现代系统），您可以预期尝试的写入完全失败，并且会抛出某种异常/信号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T06:20:10.123

您正在尝试修改驻留在实现定义的只读内存中的字符串文字，从而导致**Undefined Behavior**。请注意，未定义的行为并不保证您的程序崩溃，但它可能会向您显示任何行为。

**好读：**
[char a[] = ?string?; 之间有什么区别？和 char *p = ?string?;?](https://stackoverflow.com/questions/9460260/what-is-the-difference-between-char-a-string-and-char-p-string)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T06:57:46.867

我认为这种行为，一个好的或严厉的编译器不应该允许，因为这是 (char *s = "hello") 指向常量的指针，即修改内容将导致未定义的行为，如果编译器不会对此抛出任何错误

# java - GWT 向面板和元素添加点击处理程序

> ID：14422224
> 
> 赞同：2
> 
> 时间：2013-01-20T06:19:13.273
> 
> 标签：java, gwt

我有一个 GWT 水平面板，我对其进行了样式设置，使其看起来像`div`具有给定高度和宽度的自定义（`HTML`在这里使用 raw 对我来说是不行的）。现在我想附加一个`clickhandler`。我该怎么做？

做类似`mypanel.addClickHandler() {}`的事情会引发错误，指出我无法将此类事件附加到面板。也一样`mypanel.getElement().addClickHandler() {}`。有没有办法将`clickhandler`等附加`keyuphandler`到元素和面板，即不是按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:06:31.353

You can add a ClickHandler directly to your HorizontalPanel:

```
ClickHandler handler = new ClickHandler() {

    @Override
    public void onClick(ClickEvent event) {
        // Do something
    }
};
myPanel.addDomHandler(handler, ClickEvent.getType()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T06:42:43.790

您应该使用[FocusPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/user/client/ui/FocusPanel.html)，它增加了捕捉鼠标和键盘事件的能力。您可以将您的添加`HorizontalPanel`到 a 中`FocusPanel`，然后添加所需的事件处理程序。

# ruby-on-rails - 控制器未将值从 from 传递到 create 方法

> ID：14422226
> 
> 赞同：0
> 
> 时间：2013-01-20T06:19:29.667
> 
> 标签：ruby-on-rails

我的 Create 控制器将嵌套资源的子项作为 null 传递，而不是传递我刚刚输入到表单中的值。

这是我的代码

**路线：**

```
resources :trips do
 resources :pilgrims
end 
```

**楷模：**

*旅行：*

```
 class Trip < ActiveRecord::Base 
  has_many :pilgrims 
  accepts_nested_attributes_for :pilgrims, :allow_destroy => true
  attr_accessible :end_date, :leader_id, :name, :start_date, :pilgrim_attributes

 end 
```

*朝圣：*

```
 class Pilgrim < ActiveRecord::Base 
  belongs_to :trip 
    attr_accessible :pilgrim_id, :surname, :name, :middle, :aka, :prefix, :address, :city, :state, :zip, :email, :telephone, :nationality, :date_of_birth, :passport_number, :expiration, :jordan, :room, :price, :status, :trip_id

 end 
```

我的朝圣者控制器：

```
 def new
  @trip = Trip.find(params[:trip_id])
  @pilgrim = Pilgrim.new
 end

def create
  @trip = Trip.find(params[:trip_id])
  @pilgrim = @trip.pilgrims.build(params[:pilgrim])

  if @pilgrim.save
    flash[:notice] = "The <b>#{ @pilgrim.name }</b> has been created successfully."
    redirect_to(trip_pilgrims_path, :notice => "The <b>#{ @pilgrim.name }</b> ship has been saved successfully.")
  else
    render(:new, :error => @pilgrim.errors)
  end
 end 
```

[使用我的表单代码表单](https://gist.github.com/4577016)链接到要点

路线似乎是正确的，当我单击 new_trip_pilgrim_path(@trip) 时，它确实指向 trips/:trip_id/pilgrims/new 并加载新的朝圣者表格。

但是，当我单击表单上的保存时，它会将我重定向到路线 trips/3/pilgrims，但会显示新的 pilgrim 表单，说所有必填字段都留空。

这是日志中显示的内容。

```
Started POST "/trips/3/pilgrims" for 127.0.0.1 at 2013-01-19 22:12:06 -0800
Processing by PilgrimsController#create as HTML
Parameters: {"utf8"=>"✓", "authenticity_token"=>"kOE06m3DNax43BOLYZ6t1lS7/T4wOWb2xM8m/mlQzvA=", "commit"=>"Create Pilgrim", "trip_id"=>"3"}
Trip Load (0.3ms)  SELECT `trips`.* FROM `trips` WHERE `trips`.`id` = 3 LIMIT 1
(0.2ms)  BEGIN
(0.2ms)  ROLLBACK
Pilgrim Load (0.4ms)  SELECT `pilgrims`.* FROM `pilgrims` WHERE `pilgrims`.`trip_id` = 3
Rendered pilgrims/_form.html.erb (36.4ms)
Rendered pilgrims/new.html.erb within layouts/application (37.2ms)
User Load (0.2ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1
Trip Load (0.3ms)  SELECT `trips`.* FROM `trips` 
Completed 200 OK in 244ms (Views: 102.5ms | ActiveRecord: 11.2ms) 
```

Pilgrim 创建控制器发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T06:36:41.590

您正在尝试通过调用创建一个新的 pilgrim 对象

```
@pilgrim = @trip.pilgrims.build(params[:pilgrim]) 
```

在朝圣者控制器中。但`Parameters: {"utf8"=>"✓", "authenticity_token"=>"kOE06m3DNax43BOLYZ6t1lS7/T4wOWb2xM8m/mlQzvA=", "commit"=>"Create Pilgrim", "trip_id"=>"3"}`不包含任何朝圣者参数。所以问题在于用于创建新朝圣者的形式

# c# - 如何在我的程序中从网站获取图片？

> ID：14422227
> 
> 赞同：3
> 
> 时间：2013-01-20T06:19:54.740
> 
> 标签：c#

下午好。[这里](http://roswebrealty.ru/ "这里")有一个托管公告的网站 我需要在任何公告的页面上获取电话号码，例如[这里](http://velikie-luki.roswebrealty.ru/o82682 "示例1") 的电话号码表示为图片。我想获取图片的链接并保存这张图片并识别这张图片。但是当我开始在我的程序中获取图片的链接时，我看到这张图片生成了java脚本。这是我试图在我的程序中获取图片链接的代码：

```
.....
HtmlNode bodyNode7 = doc.DocumentNode.SelectSingleNode(@".//*//table[6][@class='objectView']//tr[2]//td");
Console.WriteLine(bodyNode7.InnerText.ToString());
..... 
```

我使用 HtmlAgilityPack 库 (C#) 来解析图片链接。我打开了这个页面的源代码（[这里](http://velikie-luki.roswebrealty.ru/o82682)），看到了生成图片的 Javascript：

```
<tr id="ctl00_cphBody_FlatSell_Obj_adapterObject_trPhones" style="background-color: white">
        <th>Телефоны:</th>
        <td>
                    <script language="javascript" type="text/javascript">document.write(decs("0x88e36b6d468b03acca9737a99ba0fffe05cb3a53de8858b798194826c94719e2193434b3377d69745a1a28879291ecfd69c703de931ac8f551fe22229ef49160"));</script>
        </td>
</tr> 
```

在 javascript 中使用函数 decs() 来生成图片。这是代码：

```
function decs(a){
return deco(key,hexToString(a),0,1,iv)
}; 
```

如果我理解正确的话，这个函数创建了一个带有电话号码的图片的链接，或者这个函数创建了这个图片。在这种情况下，该函数使用参数“key”。如何创建这个参数，我不知道。

**问题：**如何在我的程序中获取带有电话号码的图片的链接或下载带有电话号码的图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:56:33.440

你有几个选择。一种是使用像 OpenWebkitSharp 这样的库，它在您的 .NET 应用程序中托管 Webkit 的实例，您可以使用它来执行页面上的任何脚本，然后检查生成的 DOM 以提取图像。该库位于此处：[http ://code.google.com/p/open-webkit-sharp/](http://code.google.com/p/open-webkit-sharp/)

然而，在您的应用程序中托管 webkit 意味着它需要一段时间才能加载并且会消耗大量内存。您需要经常修补 webkit 的更新，几乎每周都会发布。

另一种选择，假设页面的 HTML 和 Javascript 保持不变，是使用正则表达式提取特征，然后自己进行转换。

您将有一个正则表达式，它可以找到“ `decs(`”文本并在之后提取十六进制编码的文本，然后将其输入到您自己的`decs`函数实现中，这应该很容易做到。

HTH。

# macos - 基本 OS X 程序集和 Mach-O 格式

> ID：14422229
> 
> 赞同：4
> 
> 时间：2013-01-20T06:20:03.463
> 
> 标签：macos, assembly, x86-64, mach-o, dwarf

`x86-64`我对 Mac OS X 平台上的汇编编程很感兴趣。我遇到了[这个关于创建 248B Mach-O 程序的页面](http://osxbook.com/blog/2009/03/15/crafting-a-tiny-mach-o-executable/)，这让我找到了[Apple 自己的 Mach-O 格式参考](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/MachORuntime/Reference/reference.html)。之后我想我会在 Xcode 中制作同样简单的 C 程序并检查生成的程序集。

这是代码：

```
int main(int argc, const char * argv[])
{
    return 42;
} 
```

但是生成的程序集是 334 行，包含（基于 248B 模型）*很多*多余的内容。

首先，为什么 C 可执行文件的发布版本中包含这么多 DWARF 调试信息？其次，我注意到 Mach-O 标头数据包含 4 次（在不同的 DWARF-related 中`sections`）。为什么这是必要的？最后，Xcode 程序集包括：

```
.private_extern _main
.globl  _main
_main:
    .cfi_startproc 
```

但在 248B 程序中，这些都无处可见——程序反而从`_start`. 如果根据定义所有程序都开始于 ，那怎么可能`main`？

* * *

完整的 Xcode 组装：

```
# Assembly output for main.c
# Generated at 4:04:08 PM on Sunday, January 20, 2013
# Using Release configuration, x86_64 architecture for Tiny target of Tiny project

    .section    __TEXT,__text,regular,pure_instructions
    .file   1 "/Users/####/Desktop/Tiny/Tiny/main.c"
    .section    __DWARF,__debug_info,regular,debug
Lsection_info:
    .section    __DWARF,__debug_abbrev,regular,debug
Lsection_abbrev:
    .section    __DWARF,__debug_aranges,regular,debug
    .section    __DWARF,__debug_macinfo,regular,debug
    .section    __DWARF,__debug_line,regular,debug
Lsection_line:
    .section    __DWARF,__debug_loc,regular,debug
    .section    __DWARF,__debug_pubtypes,regular,debug
    .section    __DWARF,__debug_str,regular,debug
Lsection_str:
    .section    __DWARF,__debug_ranges,regular,debug
Ldebug_range:
    .section    __DWARF,__debug_loc,regular,debug
Lsection_debug_loc:
    .section    __TEXT,__text,regular,pure_instructions
Ltext_begin:
    .section    __DATA,__data
    .section    __TEXT,__text,regular,pure_instructions
    .private_extern _main
    .globl  _main
_main:                                  ## @main
    .cfi_startproc
Lfunc_begin0:
    .loc    1 12 0                  ## /Users/####/Desktop/Tiny/Tiny/main.c:12:0
## BB#0:
    pushq   %rbp
Ltmp2:
    .cfi_def_cfa_offset 16
Ltmp3:
    .cfi_offset %rbp, -16
    movq    %rsp, %rbp
Ltmp4:
    .cfi_def_cfa_register %rbp
    ##DEBUG_VALUE: main:argc <- EDI+0
    ##DEBUG_VALUE: main:argv <- RSI+0
    movl    $42, %eax
    .loc    1 15 5 prologue_end     ## /Users/####/Desktop/Tiny/Tiny/main.c:15:5
Ltmp5:
    popq    %rbp
    ret
Ltmp6:
Lfunc_end0:
    .cfi_endproc

Ltext_end:
    .section    __DATA,__data
Ldata_end:
    .section    __TEXT,__text,regular,pure_instructions
Lsection_end1:
    .section    __DWARF,__debug_info,regular,debug
Linfo_begin1:
    .long   127                     ## Length of Compilation Unit Info
    .short  2                       ## DWARF version number
Lset0 = Labbrev_begin-Lsection_abbrev   ## Offset Into Abbrev. Section
    .long   Lset0
    .byte   8                       ## Address Size (in bytes)
    .byte   1                       ## Abbrev [1] 0xb:0x78 DW_TAG_compile_unit
Lset1 = Lstring0-Lsection_str           ## DW_AT_producer
    .long   Lset1
    .short  12                      ## DW_AT_language
Lset2 = Lstring1-Lsection_str           ## DW_AT_name
    .long   Lset2
    .quad   0                       ## DW_AT_entry_pc
    .long   0                       ## DW_AT_stmt_list
Lset3 = Lstring2-Lsection_str           ## DW_AT_comp_dir
    .long   Lset3
    .byte   1                       ## DW_AT_APPLE_optimized
    .byte   2                       ## Abbrev [2] 0x27:0x3e DW_TAG_subprogram
Lset4 = Lstring3-Lsection_str           ## DW_AT_name
    .long   Lset4
    .byte   1                       ## DW_AT_decl_file
    .byte   11                      ## DW_AT_decl_line
    .byte   1                       ## DW_AT_prototyped
    .long   101                     ## DW_AT_type
    .byte   1                       ## DW_AT_external
    .quad   Lfunc_begin0            ## DW_AT_low_pc
    .quad   Lfunc_end0              ## DW_AT_high_pc
    .byte   1                       ## DW_AT_frame_base
    .byte   86
    .byte   3                       ## Abbrev [3] 0x46:0xf DW_TAG_formal_parameter
Lset5 = Lstring5-Lsection_str           ## DW_AT_name
    .long   Lset5
    .byte   1                       ## DW_AT_decl_file
    .byte   11                      ## DW_AT_decl_line
    .long   101                     ## DW_AT_type
Lset6 = Ldebug_loc0-Lsection_debug_loc  ## DW_AT_location
    .long   Lset6
    .byte   3                       ## Abbrev [3] 0x55:0xf DW_TAG_formal_parameter
Lset7 = Lstring6-Lsection_str           ## DW_AT_name
    .long   Lset7
    .byte   1                       ## DW_AT_decl_file
    .byte   11                      ## DW_AT_decl_line
    .long   125                     ## DW_AT_type
Lset8 = Ldebug_loc2-Lsection_debug_loc  ## DW_AT_location
    .long   Lset8
    .byte   0                       ## End Of Children Mark
    .byte   4                       ## Abbrev [4] 0x65:0x7 DW_TAG_base_type
Lset9 = Lstring4-Lsection_str           ## DW_AT_name
    .long   Lset9
    .byte   5                       ## DW_AT_encoding
    .byte   4                       ## DW_AT_byte_size
    .byte   4                       ## Abbrev [4] 0x6c:0x7 DW_TAG_base_type
Lset10 = Lstring7-Lsection_str          ## DW_AT_name
    .long   Lset10
    .byte   6                       ## DW_AT_encoding
    .byte   1                       ## DW_AT_byte_size
    .byte   5                       ## Abbrev [5] 0x73:0x5 DW_TAG_const_type
    .long   108                     ## DW_AT_type
    .byte   6                       ## Abbrev [6] 0x78:0x5 DW_TAG_pointer_type
    .long   115                     ## DW_AT_type
    .byte   6                       ## Abbrev [6] 0x7d:0x5 DW_TAG_pointer_type
    .long   120                     ## DW_AT_type
    .byte   0                       ## End Of Children Mark
Linfo_end1:
    .section    __DWARF,__debug_abbrev,regular,debug
Labbrev_begin:
    .byte   1                       ## Abbreviation Code
    .byte   17                      ## DW_TAG_compile_unit
    .byte   1                       ## DW_CHILDREN_yes
    .byte   37                      ## DW_AT_producer
    .byte   14                      ## DW_FORM_strp
    .byte   19                      ## DW_AT_language
    .byte   5                       ## DW_FORM_data2
    .byte   3                       ## DW_AT_name
    .byte   14                      ## DW_FORM_strp
    .byte   82                      ## DW_AT_entry_pc
    .byte   1                       ## DW_FORM_addr
    .byte   16                      ## DW_AT_stmt_list
    .byte   6                       ## DW_FORM_data4
    .byte   27                      ## DW_AT_comp_dir
    .byte   14                      ## DW_FORM_strp
    .ascii   "\341\177"             ## DW_AT_APPLE_optimized
    .byte   12                      ## DW_FORM_flag
    .byte   0                       ## EOM(1)
    .byte   0                       ## EOM(2)
    .byte   2                       ## Abbreviation Code
    .byte   46                      ## DW_TAG_subprogram
    .byte   1                       ## DW_CHILDREN_yes
    .byte   3                       ## DW_AT_name
    .byte   14                      ## DW_FORM_strp
    .byte   58                      ## DW_AT_decl_file
    .byte   11                      ## DW_FORM_data1
    .byte   59                      ## DW_AT_decl_line
    .byte   11                      ## DW_FORM_data1
    .byte   39                      ## DW_AT_prototyped
    .byte   12                      ## DW_FORM_flag
    .byte   73                      ## DW_AT_type
    .byte   19                      ## DW_FORM_ref4
    .byte   63                      ## DW_AT_external
    .byte   12                      ## DW_FORM_flag
    .byte   17                      ## DW_AT_low_pc
    .byte   1                       ## DW_FORM_addr
    .byte   18                      ## DW_AT_high_pc
    .byte   1                       ## DW_FORM_addr
    .byte   64                      ## DW_AT_frame_base
    .byte   10                      ## DW_FORM_block1
    .byte   0                       ## EOM(1)
    .byte   0                       ## EOM(2)
    .byte   3                       ## Abbreviation Code
    .byte   5                       ## DW_TAG_formal_parameter
    .byte   0                       ## DW_CHILDREN_no
    .byte   3                       ## DW_AT_name
    .byte   14                      ## DW_FORM_strp
    .byte   58                      ## DW_AT_decl_file
    .byte   11                      ## DW_FORM_data1
    .byte   59                      ## DW_AT_decl_line
    .byte   11                      ## DW_FORM_data1
    .byte   73                      ## DW_AT_type
    .byte   19                      ## DW_FORM_ref4
    .byte   2                       ## DW_AT_location
    .byte   6                       ## DW_FORM_data4
    .byte   0                       ## EOM(1)
    .byte   0                       ## EOM(2)
    .byte   4                       ## Abbreviation Code
    .byte   36                      ## DW_TAG_base_type
    .byte   0                       ## DW_CHILDREN_no
    .byte   3                       ## DW_AT_name
    .byte   14                      ## DW_FORM_strp
    .byte   62                      ## DW_AT_encoding
    .byte   11                      ## DW_FORM_data1
    .byte   11                      ## DW_AT_byte_size
    .byte   11                      ## DW_FORM_data1
    .byte   0                       ## EOM(1)
    .byte   0                       ## EOM(2)
    .byte   5                       ## Abbreviation Code
    .byte   38                      ## DW_TAG_const_type
    .byte   0                       ## DW_CHILDREN_no
    .byte   73                      ## DW_AT_type
    .byte   19                      ## DW_FORM_ref4
    .byte   0                       ## EOM(1)
    .byte   0                       ## EOM(2)
    .byte   6                       ## Abbreviation Code
    .byte   15                      ## DW_TAG_pointer_type
    .byte   0                       ## DW_CHILDREN_no
    .byte   73                      ## DW_AT_type
    .byte   19                      ## DW_FORM_ref4
    .byte   0                       ## EOM(1)
    .byte   0                       ## EOM(2)
    .byte   0                       ## EOM(3)
Labbrev_end:
    .section    __DWARF,__apple_names,regular,debug
Lnames_begin:
    .long   1212240712              ## Header Magic
    .short  1                       ## Header Version
    .short  0                       ## Header Hash Function
    .long   1                       ## Header Bucket Count
    .long   1                       ## Header Hash Count
    .long   12                      ## Header Data Length
    .long   0                       ## HeaderData Die Offset Base
    .long   1                       ## HeaderData Atom Count
    .short  1                       ## eAtomTypeDIEOffset
    .short  6                       ## DW_FORM_data4
    .long   0                       ## Bucket 0
    .long   2090499946              ## Hash in Bucket 0
    .long   LNames0-Lnames_begin    ## Offset in Bucket 0
LNames0:
Lset11 = Lstring3-Lsection_str          ## main
    .long   Lset11
    .long   1                       ## Num DIEs
    .long   39
    .long   0
    .section    __DWARF,__apple_objc,regular,debug
Lobjc_begin:
    .long   1212240712              ## Header Magic
    .short  1                       ## Header Version
    .short  0                       ## Header Hash Function
    .long   1                       ## Header Bucket Count
    .long   0                       ## Header Hash Count
    .long   12                      ## Header Data Length
    .long   0                       ## HeaderData Die Offset Base
    .long   1                       ## HeaderData Atom Count
    .short  1                       ## eAtomTypeDIEOffset
    .short  6                       ## DW_FORM_data4
    .long   -1                      ## Bucket 0
    .section    __DWARF,__apple_namespac,regular,debug
Lnamespac_begin:
    .long   1212240712              ## Header Magic
    .short  1                       ## Header Version
    .short  0                       ## Header Hash Function
    .long   1                       ## Header Bucket Count
    .long   0                       ## Header Hash Count
    .long   12                      ## Header Data Length
    .long   0                       ## HeaderData Die Offset Base
    .long   1                       ## HeaderData Atom Count
    .short  1                       ## eAtomTypeDIEOffset
    .short  6                       ## DW_FORM_data4
    .long   -1                      ## Bucket 0
    .section    __DWARF,__apple_types,regular,debug
Ltypes_begin:
    .long   1212240712              ## Header Magic
    .short  1                       ## Header Version
    .short  0                       ## Header Hash Function
    .long   2                       ## Header Bucket Count
    .long   2                       ## Header Hash Count
    .long   20                      ## Header Data Length
    .long   0                       ## HeaderData Die Offset Base
    .long   3                       ## HeaderData Atom Count
    .short  1                       ## eAtomTypeDIEOffset
    .short  6                       ## DW_FORM_data4
    .short  3                       ## eAtomTypeTag
    .short  5                       ## DW_FORM_data2
    .short  5                       ## eAtomTypeTypeFlags
    .short  11                      ## DW_FORM_data1
    .long   0                       ## Bucket 0
    .long   1                       ## Bucket 1
    .long   193495088               ## Hash in Bucket 0
    .long   2090147939              ## Hash in Bucket 1
    .long   Ltypes0-Ltypes_begin    ## Offset in Bucket 0
    .long   Ltypes1-Ltypes_begin    ## Offset in Bucket 1
Ltypes0:
Lset12 = Lstring4-Lsection_str          ## int
    .long   Lset12
    .long   1                       ## Num DIEs
    .long   101
    .short  36
    .byte   0
    .long   0
Ltypes1:
Lset13 = Lstring7-Lsection_str          ## char
    .long   Lset13
    .long   1                       ## Num DIEs
    .long   108
    .short  36
    .byte   0
    .long   0
    .section    __DWARF,__debug_pubtypes,regular,debug
Lset14 = Lpubtypes_end1-Lpubtypes_begin1 ## Length of Public Types Info
    .long   Lset14
Lpubtypes_begin1:
    .short  2                       ## DWARF Version
Lset15 = Linfo_begin1-Lsection_info     ## Offset of Compilation Unit Info
    .long   Lset15
Lset16 = Linfo_end1-Linfo_begin1        ## Compilation Unit Length
    .long   Lset16
    .long   0                       ## End Mark
Lpubtypes_end1:
    .section    __DWARF,__debug_loc,regular,debug
Ldebug_loc0:
    .quad   Lfunc_begin0
    .quad   Ltmp6
Lset17 = Ltmp8-Ltmp7                    ## Loc expr size
    .short  Lset17
Ltmp7:
    .byte   85                      ## DW_OP_reg5
Ltmp8:
    .quad   0
    .quad   0
Ldebug_loc2:
    .quad   Lfunc_begin0
    .quad   Ltmp6
Lset18 = Ltmp10-Ltmp9                   ## Loc expr size
    .short  Lset18
Ltmp9:
    .byte   84                      ## DW_OP_reg4
Ltmp10:
    .quad   0
    .quad   0
Ldebug_loc4:
    .section    __DWARF,__debug_aranges,regular,debug
    .section    __DWARF,__debug_ranges,regular,debug
    .section    __DWARF,__debug_macinfo,regular,debug
    .section    __DWARF,__debug_inlined,regular,debug
Lset19 = Ldebug_inlined_end1-Ldebug_inlined_begin1 ## Length of Debug Inlined Information Entry
    .long   Lset19
Ldebug_inlined_begin1:
    .short  2                       ## Dwarf Version
    .byte   8                       ## Address Size (in bytes)
Ldebug_inlined_end1:
    .section    __DWARF,__debug_str,regular,debug
Lstring0:
    .asciz   "Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)"
Lstring1:
    .asciz   "/Users/####/Desktop/Tiny/Tiny/main.c"
Lstring2:
    .asciz   "/Users/####/Desktop/Tiny"
Lstring3:
    .asciz   "main"
Lstring4:
    .asciz   "int"
Lstring5:
    .asciz   "argc"
Lstring6:
    .asciz   "argv"
Lstring7:
    .asciz   "char"

.subsections_via_symbols 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-20T07:30:00.993

> 首先，为什么 C 可执行文件的发布版本中包含这么多 DWARF 调试信息？

能够调试优化的代码非常有用。错误仅在优化构建中可见的情况并不少见。如果您正在手写程序集，那么您不太可能关心 DWARF 信息，因此我建议您在没有`-g`参数的情况下构建您的比较代码。

* * *

> 其次，我注意到 Mach-O 标头数据包含 4 次（在不同的 DWARF 相关部分中）。为什么这是必要的？

这些不是您看到的 Mach-O 标头。它们是[DWARF 加速器表](https://github.com/llvm-mirror/llvm/blob/1ced208b/lib/CodeGen/AsmPrinter/DwarfAccelTable.cpp#L109)的标头，它是 DWARF的 LLVM 扩展，可优化符号是否在给定编译单元中定义的测试。

* * *

> 但在 248B 程序中，这些都无处可见 - 程序反而从 _start 开始。如果根据定义，所有程序都从 main 开始，这怎么可能？

从历史上看，在 OS X 上，所有程序都以`start`. 但是，此符号通常来自系统库，而不是由程序本身定义。的系统实现`start`将执行一些初始化，然后跳转到您的程序“真正的”入口点。

Mach-O 二进制文件的入口点由`LC_UNIXTHREAD`or 或`LC_MAIN`load 命令定义。当`LC_UNIXTHREAD`10.8 之前的 OS X 版本的约定与链接器`start`用作入口点的常规 C 或 C++ 程序一起使用时。该符号通常来自`/usr/lib/crt1.o`，其地址写入`LC_UNIXTHREAD`加载命令的指令指针字段。您链接到的 248B 二进制文件包含一个设置为 0x000010e8的`LC_UNIXTHREAD`命令。`eip`那是符号的地址`_start`。由于这个小程序是一个静态可执行文件，并且二进制文件是直接生成的，因此它可以将它希望写入的任何地址写入加载命令的指令指针字段。

如果您正在构建针对 OS X 10.8+ 的可执行文件，链接器将生成一个`LC_MAIN`加载命令而不是`LC_UNIXTHREAD`. 内核知道使用该`LC_MAIN`命令的二进制文件应该通过加载动态链接器并跳转到其入口点来执行。动态链接器 dyld 初始化自身，然后跳转到`LC_MAIN`命令中指定的地址。在这个勇敢的新世界中，根本没有`start`使用命名的符号。

# javascript - 如何在 JavaScript 中的函数中选择随机变量？

> ID：14422233
> 
> 赞同：2
> 
> 时间：2013-01-20T06:21:15.283
> 
> 标签：javascript

我在一个函数中放置了多个变量，我想知道 JavaScript 中是否有任何方法可以在该函数中随机选择一个变量。任何帮助是极大的赞赏。非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T06:22:22.620

如果您使用数组而不是多个变量，则可以从数组中选择一个随机元素：

```
function test() {
    var values = ["test","values","go","here"],
        valueToUse = values[Math.floor(Math.random() * values.length)];
    // do something with the selected value
    alert(valueToUse);
} 
```

演示：http: [//jsfiddle.net/XDn2f/](http://jsfiddle.net/XDn2f/)

（当然，数组不必包含像我展示的字符串那样的简单值，你可以有一个对象数组，或者对其他函数的引用等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T06:22:45.257

如果您的参数之一是数组，您可以从中随机选择一个值。

```
function myFunc(arrayInput)
{
     var randomIndex = Math.floor((Math.random()*10)+1);
     return (arrayInput[randomIndex]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T06:26:29.273

如果您有 N 个变量，那么将它们放在一个数组中并在该数组中生成一个随机索引是最干净的。

```
var items = [1,2,3,4];
var index = Math.floor(Math.random() * items.length);
items[index] = whatever; 
```

如果您只有几个变量，您可以生成一个随机数并使用`if/else`语句对所需变量进行操作。

```
var a, b;
var index = Math.random();
if (index < 0.5) {
    // operate on a
    a = 3;
} else {
    // operate on b
    b = 3;
} 
```

# angularjs - 如何将变量注入指令的范围？

> ID：14422236
> 
> 赞同：5
> 
> 时间：2013-01-20T06:21:47.163
> 
> 标签：angularjs

假设我有一个如下所示的指令：

```
directive('attachment', function() {
    return {
        restrict: 'E',
        controller: 'AttachmentCtrl'
    }
}) 
```

这意味着我可以编写一个“附件”元素列表，如下所示：

```
<attachment ng-repeat="a in note.getAttachments()">
    <p>Attachment ID: {{a.id}}</p>
</attachment> 
```

在上面的代码片段中，我们假设它`note.getAttachments()`返回一组简单的 javascript 对象哈希。

由于我为指令设置了一个控制器，因此我可以内联包含对该控制器范围函数的调用。

这是控制器：

```
function AttachmentCtrl($scope) {
    $scope.getFilename = function() {
        return 'image.jpg';
    }
} 
```

这是修改后的 HTML，当我们包含对该`$scope.getFilename`函数的内联调用时（新的第二段）：

```
<attachment ng-repeat="a in note.getAttachments()">
    <p>Attachment ID: {{a.id}}</p>
    <p>Attachment file name: {{getFilename()}}
</attachment> 
```

但是，这没有用。这将只打印相同的字符串“image.jpg”作为每个附件的文件名。

实际上，附件的文件名基于附件 ID。因此，ID 为“2”的附件的文件名为“image-2.jpg”。

所以我们的`getFilename`函数需要修改。让我们修复它：

```
function AttachmentCtrl($scope) {
    $scope.getFilename = function() {
        return 'image-' + a.id + '.jpg';
    }
} 
```

但是等等——这行不通。范围内没有变量`a`。由于 ，我们可以使用`a`内联变量`ng-repeat`，但该`a`变量不适用于绑定到指令的范围。

所以问题是，我如何让`a`这个范围可用？

请注意：我意识到在这个特定的例子中，我可以只打印`image-{{a.id}}.jpg`内联。但这并不能回答问题。这只是一个极其简化的例子。实际上，该`getFilename`函数过于复杂而无法内联打印。

编辑：是的，`getFilename`可以接受一个论点，这会奏效。然而，这也不能回答问题。我仍然想知道，如果没有变通方法，您是否可以`a`在不使用内联的情况下进入范围。

例如，也许有一种方法可以将它直接注入控制器，所以它可以写成：

```
function AttachmentCtrl($scope, a) { ... } 
```

但是我会从哪里传进去呢？有什么我可以添加到指令声明中的吗？也许我可以在 ng-repeat 旁边添加一个 ng-* 属性？我只是想知道这是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T03:48:54.097

> 但是等等——这行不通。范围内没有变量“a”。多亏了 ng-repeat，我们可以使用内联变量，但是变量在绑定到指令的范围内不可用。

实际上变量`a`在与指令控制器关联的范围内。该指令创建的每个控制器都获取由 ng-repeat 迭代创建的子范围。所以这有效（注意**$scope** .a.id）：

```
function AttachmentCtrl($scope) {
    $scope.getFilename = function() {
        return 'image-' + $scope.a.id + '.jpg';
} 
```

这是一个显示控制器范围、指令范围和 ngRepeat 范围的[小提琴。](http://jsfiddle.net/mrajcok/wWJ8z/)

> “如果同一元素上的多个指令请求新范围，则只会创建一个新范围。”——[指令文档](http://docs.angularjs.org/guide/directive)，“指令定义对象”部分

在您的示例中， ng-repeat 正在创建一个新范围，因此同一元素上的所有指令都获得相同的新（子）范围。

此外，如果您确实遇到需要将变量放入控制器的情况，使用属性会比使用 ng-init 更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T06:56:18.977

另一种方法是使用`ng-init`和设置子范围的模型属性。看到这个[小提琴](http://jsfiddle.net/3d38H/3/)

相关代码将是

```
<div ng-app='myApp' ng-controller='MyCtrl'>
    <attachment ng-repeat="a in attachments" ng-init='model=a'>
        <p>Attachment ID: {{model.id}}</p>
        <p>Attachment file name: {{getFilename()}}</p>
    </attachment>
</div> 
```

和

```
function AttachmentCtrl($scope) {
    $scope.getFilename = function () {
        return 'image-' + $scope.model.id + '.jpg';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T06:37:02.690

只需将其传递给您的函数即可。

**看法：**

```
<attachment ng-repeat="a in note.getAttachments()">
    <p>Attachment ID: {{ a.id }}</p>
    <p>Attachment file name: {{ getFilename(a) }}
</attachment> 
```

**控制器**：

```
function AttachmentCtrl ($scope) {
    $scope.getFilename = function (a) {
        return 'image-' + a.id + '.jpg';
    }
} 
```

# c# - 是否有与 LINQ 的 All 方法相反的方法？

> ID：14422240
> 
> 赞同：15
> 
> 时间：2013-01-20T06:22:44.050
> 
> 标签：c#, linq

我目前正在使用

```
a_list.All(item => !(item.field_is_true == true)) 
```

效果很好，但我想知道是否有合适的 LINQ 方法来做相反的事情。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-20T06:42:09.373

All() 检查给定 Predicate 是否对所有项目返回 true。在框架开发方面，编写一个单独的方法来检查给定 Predicate 是否对所有项目返回 false 是没有任何意义的，因为很容易“不是”一个谓词。但是，您可以编写自己的扩展方法：

```
public static bool None<T>(this IEnumerable<T> source, Func<T, bool> predicate)
{
    return !source.Any(predicate);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-20T06:24:42.707

`All()`本质上与 完全相反`None`，但由于 LINQ 没有`None()`方法，因此您可以通过`!set.Any()`.

```
!a_list.Any(item => item.matches == true) 
```

`true`如果 a_list 中没有任何项目的`matches`值为真，这将产生。

另一个例子：

```
names.All(item => item.StartsWith("R")) 
```

如果**所有**项目都`names`以 R 开头（如您所知），则为真。

```
!names.Any(item => item.StartsWith("R")) 
```

如果**没有**`names`以 R 开头的项目，则为真。

根据您在下面的评论，听起来您可能只是在寻找一种方法来完成与当前代码片段相同的结果，但方式不同。这应该提供与您当前代码相同的结果，但`!`在谓词中没有：

```
!a_list.Any(item => item.matches == true) 
```

这可以进一步简化为：

```
!a_list.Any(item => item.matches) 
```

我想你的也可以简化为：

```
a_list.All(item => !item.matches) 
```

很少有充分的理由明确地将布尔值与`true`or进行比较`false`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T08:16:41.393

你写了：

```
a_list.All(item => !(item.field_is_true == true)) 
```

这就像做：

```
a_list.All(item => item.flag== false)   // more readable to me...
        //return true if all of the items have a **flase** value on their flag 
```

你也可以使用**.any()**来达到同样的效果：

```
!a_list.Any(item => item.flag==true) 
```

至于性能问题：**.any()** 与.all( **)** - **两者都具有相同的性能** （使用 linq to object 时），请在此处找到更多信息：[LINQ: Not Any vs All Don't](https://stackoverflow.com/q/9027530/1219182)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T06:53:17.550

而不是否定 All() 条件，只需将 Any() 与相同的谓词一起使用并适当地处理返回的布尔值。

所以，而不是：

```
bool conditionDoesntExist = a_list.All(item => !(item.field_is_true == true)); 
```

你可以有

```
bool conditionDoesExist = a_list.Any(item => item.field_is_true == true) 
```

注意标志名称的变化。（当然我忽略了语义的东西，比如原始谓词可以写成`item => item.field_is_true == false`或简单地写成`item => !item.field_is_true`）。

如果您想保持标志名称相同，则仍使用 Any() 但将其取反：

```
bool conditionDoesntExist = !a_list.Any(item => item.field_is_true == true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-14T20:43:50.787

**全部**

```
a_list.All(item => item.condition) 
```

**一些**

```
a_list.Any(item => item.condition) 
```

**不是全部**

```
!a_list.All(item => item.condition) 
```

或者：

```
a_list.Any(item => !(item.condition)) 
```

**没有任何**

```
!a_list.Any(item => item.condition) 
```

或者

```
a_list.All(item => !(item.condition)) 
```

# c# - 在 WinRT 和 C# 中将图像保存到应用程序

> ID：14422242
> 
> 赞同：0
> 
> 时间：2013-01-20T06:22:54.007
> 
> 标签：c#, c#-4.0, windows-8, windows-runtime, winrt-xaml

我想创建一个游戏，用户有机会加载自己的图形，现在我必须将这些图像保存在我的应用程序中，我该怎么做？因为用户可以从 HDD 中删除图像，但我仍然希望在我的应用程序中保留这些图像。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T07:17:26.737

当用户从这个 Pictures 文件夹加载图形时，您可以将文件复制到应用程序的[Local Folder](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx)。它仍然驻留在机器上，但在`%AppData%\Local\Packages`文件夹中有些模糊。

当然，这并不能保证精明的用户不会删除该文件，并且它会使您的应用程序严格需要的存储量增加一倍，因为用户可能没有删除原始文件。

另一种选择是在用户加载自己的图形时将自己的图像备份到云存储，例如 Windows Azure blob 存储。然后，您将确保拥有所有可用的东西，但它在云中，因此您在解决方案中添加了一个额外的移动部分，并且您需要处理断开连接的场景、延迟等。

# python - 如何在 Pygame 上显示分数？

> ID：14422244
> 
> 赞同：-1
> 
> 时间：2013-01-20T06:23:35.530
> 
> 标签：python, pygame

我是一名新程序员，正在为我的计算机科学总结开发记忆游戏。游戏是这样的：计算机在随机位置显示随机框，然后用户必须猜测框在哪里并单击它。

我基本上完成了，除了现在我正在尝试创建 5 个不同级别的难度级别。例如，级别 1 将显示为 2 个框，级别 2 将显示为 5，等等。然后，如果用户通过所有级别，他们可以再次玩。我知道很多，但我真的很想在这方面获得 A。

但是现在我被卡住了，因为在我尝试关闭窗口之前它并没有真正起作用，即使那样它也只能运行到一半。我在想它是如何定义函数的，但我不确定。任何帮助，将不胜感激。

```
import pygame , sys
import random
import time

size=[500,500]
pygame.init()
screen=pygame.display.set_mode(size)

# Colours
LIME = (0,255,0) 
RED = (255, 0, 0)
BLACK = (0,0,0)
PINK = (255,102,178)
SALMON = (255,192,203)
WHITE = (255,255,255)
LIGHT_PINK = (255, 181, 197)
SKY_BLUE = (176, 226, 255)
screen.fill(BLACK)

# Width and Height of game box
width=50
height=50

# Margin between each cell
margin = 5

rows = 20
columns = 20

# Set title of screen
pygame.display.set_caption("Spatial Recall")

# Used to manage how fast the screen updates
clock=pygame.time.Clock()

coord=[]

# Create a 2 dimensional array. A two dimesional
# array is simply a list of lists.
def resetGrid():
    grid = []
    for row in range(rows):
        # Add an empty array that will hold each cell
        # in this row
        grid.append([])
        for column in range(columns):
            grid[row].append(0) # Append a cell  
    return grid

def displayAllPink(pygame):
    for row in range(rows):
        for column in range(columns):
            color = LIGHT_PINK
            pygame.draw.rect(screen,color,[(margin+width)*column + margin,(margin+height)*row+margin,width,height])
            pygame.display.flip()      

def displayOtherColor(pygame,grid):
    coord = []
    for i in range(random.randint(2,5)):
        x = random.randint(2, rows-1)
        y = random.randint(2, columns-1)                
        color = LIME    
        pygame.draw.rect(screen,color,[(margin+width)*y + margin,(margin+height)*x+margin,width,height])
        coord.append((x,y))  
        grid[x][y] = 1
        pygame.display.flip() 
    time.sleep(1)
    return coord

def runGame(gameCount,coord,pygame,grid):
    pygame.event.clear()
    pygame.display.set_caption("Spatial Recall: Level "+ str(gameCount))
    pygame.time.set_timer(pygame.USEREVENT,1000)
    time = 0
    #clock.tick( 
            # -------- Main Program Loop -----------
    #Loop until the user clicks the close button.
    done = False
    while done==False:    
        event = pygame.event.wait() # User did something
        if event.type == pygame.QUIT: # If user clicked close
            done=True # Flag that we are done so we exit this loop
            pygame.event.clear()
            print "Game ",gameCount, "ends"
        elif event.type == pygame.USEREVENT:
            time = time + 1
            pygame.display.set_caption("Spatial Recall: Level "+ str(gameCount) + " Time: "+ str(time))
            if time == 100:
                done = True
                pygame.display.set_caption("Time out, moving to next level")
                pygame.event.clear()
                return False
        elif event.type == pygame.MOUSEBUTTONDOWN:
            # User clicks the mouse. Get the position
            pos = pygame.mouse.get_pos()
            # Change the x/y screen coordinates to grid coordinates
            column=pos[0] // (width+margin)
            row=pos[1] // (height+margin)
            if (row,column) in coord:
                print coord
                coord.remove((row,column))
                print coord
                color = LIME
                pygame.draw.rect(screen,color,[(margin+width)*column + margin,(margin+height)*row+margin,width,height])
                if coord == []:
                    done=True 
                    pygame.display.set_caption("Time out, moving to next level")
                    pygame.event.clear()
                    return True
            else:
                color = RED
                pygame.draw.rect(screen,color,[(margin+width)*column + margin,(margin+height)*row+margin,width,height])
            pygame.display.flip() 

def startTheGame(gameCount):
    grid = resetGrid()
    displayAllPink(pygame)
    coord = displayOtherColor(pygame,grid)
    displayAllPink(pygame)
    runGame(gameCount,coord,pygame,grid)

for i in range(2):
    startTheGame(i+1)
pygame.quit () 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T08:07:43.867

目前无法正常工作的主要问题是：

*   您的全局变量设置为 20 `rows`，`columns`但您的棋盘只有 9 个字段，这就是为什么**大多数**随机选择`coords`的棋盘都没有

然后，您无法控制相同`coord`的选择 2 次。

一般来说，我会建议选择更好的名称，尤其是`displayOtherColor`为每个级别组装目标坐标的名称。

对于您如何显示分数的问题，我建议将其设置为标题，就像您已经在运行时间一样。

# c++ - 砍掉最后一个数字以获得双倍

> ID：14422246
> 
> 赞同：-1
> 
> 时间：2013-01-20T06:23:43.833
> 
> 标签：c++

如果我有双倍：732734

我怎样才能返回 73273 <---- 注意丢失 '4'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T06:28:51.007

除以 10，然后将其取底以删除小数：

```
number = floor(number / 10.0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T06:35:06.683

我在某个地方找到了这个。它删除小数点后的最后一位数字。不是实际的解决方案，但这可能会给您一些提示：

```
int main(){
    for (int a=0;a<80;a++)
        printf(".");
    printf("%2.0f\n",1024.48);
    printf("%2.0f\n",4.48);
    for (int a=0;a<80;a++)
        printf(".");
    return 0;
} 
```

输出：

```
................................................................................
1024
4
................................................................................ 
```

# solr - SOLR ExternalFileField 与 NRT

> ID：14422248
> 
> 赞同：1
> 
> 时间：2013-01-20T06:24:25.237
> 
> 标签：solr

我注意到 SOLR 中有一个相对较新的功能，即 ExternalFileField。我见过的大多数例子都使用了使用页面浏览量来衡量流行度的例子。我想知道为什么页面视图不会像往常一样被索引并使用新的近实时功能进行更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T18:01:17.970

假设页面视图会频繁更改，并且重新索引文档是一项相对昂贵的操作。而且，重新索引需要存储所有字段，而不仅仅是索引，因为“更新”只是对记录的完全重新创建（由于 Lucene 的存储格式）。

# ios - merging images from two imageviews into a single image in iOS

> ID：14422255
> 
> 赞同：1
> 
> 时间：2013-01-20T06:25:59.427
> 
> 标签：ios, merge, uiimageview, uiimage

I have two imageviews `view1` and `view2` having `image1` and `image2` respectively. `view1` is bigger than `view2`.

It is oriented such that `view2` is located inside `view1`. `view2` is draggable as well.

How could i write a code to merge these two images in imageviews to a single image?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-16T16:07:40.347

You can merge two images using `UIGraphicsBeginImageContext`. Here is a small function written with Swift 2.1.1 which takes two images and creates a single image.

```
func mergeImages (forgroundImage : UIImage, backgroundImage : UIImage) {

    let bottomImage = forgroundImage
    let topImage = backgroundImage

    let size = backgroundImage.size
    UIGraphicsBeginImageContext(size)

    let areaSize = CGRect(x: 0, y: 0, width: size.width, height: size.height)
    bottomImage.drawInRect(areaSize)

    topImage.drawInRect(areaSize, blendMode: .Normal, alpha: 1.0)

    let newImage:UIImage = UIGraphicsGetImageFromCurrentImageContext()
    resultImageView.image = newImage

    UIGraphicsEndImageContext()
} 
```

You can call it like

```
mergeImages(yourImageViewOne.image!, backgroundImage: yourImageViewTwo.image!) // Call to mege images 
```

And here is a [link](https://github.com/saqibomer/GiggleMerge) for further exploring.

# oauth - 适用于 iOS 的 Oauth 库（尤其是 Yelp）

> ID：14422261
> 
> 赞同：0
> 
> 时间：2013-01-20T06:26:57.453
> 
> 标签：oauth

我想将 Yelp 搜索添加到我的应用程序中。

为此，我需要使用 Yelps Oauth 身份验证。这听起来很简单，因为我以前做过一些服务器应用程序。

但是，我不断收到`INVALID_SIGNATURE`我创建的用于从构造的 URL 中创建和检索数据的代码。

[我检查了我的应用程序输出的签名，它与他们在http://api.yelp.com](http://api.yelp.com)提供的签名完全相同（我什至检查了[http://www上的两个字符串（在散列之前） .textdiff.com](http://www.textdiff.com)，他们说他们是一样的）

看来我走到了死胡同，无法绕过这个错误。

*谁能指出我正确的方向，为什么我的签名可能不起作用*

和/或

*有人可以给我指出一个好的 iOS Oauth 教程和库（我发现的任何库都没有关于如何使用它的文档）*

谢谢

# python - Python — 保存系统和非返回变量？

> ID：14422265
> 
> 赞同：-3
> 
> 时间：2013-01-20T06:27:12.920
> 
> 标签：python, variables, return, pickle, savestate

几周前，我开始学习 Python，我想掌握它的最佳方法是直接进入，制作一个简单的（？）基于文本的游戏，可以选择保存进度并将保存的游戏重新加载到稍后继续。

因为我需要它来编写一个包含多个嵌套列表和字典（而不是简单的字符串）的保存对象，所以我选择了 Pickle。

出了什么问题：save() 函数本身可以正常工作，但我稍后需要访问其中的两个变量。出于某种原因，无论我做什么，save() 都不会返回 savePath 和 saveName；它抛出一个 NameError: savePath/saveName is not defined。我确信我错过了一些非常愚蠢和明显的东西，但我看不出是什么。

PS 我为我的代码的混乱道歉——我还没有真正学会如何有效地编码。

为此，我删除了工作功能并简化了类，但本质上其他一切都是一样的。

[http://pastebin.com/x7UPYe5T](http://pastebin.com/x7UPYe5T)

任何想法将不胜感激。我只知道当我看到问题所在时，我会踢自己......</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T06:36:14.823

使用返回值：

```
path, name = save() 
```

里面的局部变量在`save()`它外面不可见（不存在）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T06:37:13.923

从根本上说，您的问题是您期望`savePath`并`saveName`处于全局范围内，它们仅在 function 中可用`save()`。您的直接问题可能会通过包括以下行来解决：

```
global saveName, savePath 
```

在`save()`函数的顶部。

[这](http://www.saltycrane.com/blog/2008/01/python-variable-scope-notes/)是一篇很好的博客文章，解释了变量范围的一些差异。另请参阅[Python global 的文档](http://docs.python.org/2/reference/simple_stmts.html#global)。

也就是说：全局变量通常是有问题的设计的标志。特别是因为您不厌其烦地返回`savePath`and `saveName`，更好的解决方案是确保在返回它们时实际保存这些值：

```
(savePath, saveName) = save() 
```

在这里，您再次节省了全局范围——但是当您将外部代码级别包装在一个函数中时，您将拥有更好的封装。

# qt - Qt 在模型使用 internalpointer() 时重新实现 QSortFilterProxyModel::data()

> ID：14422267
> 
> 赞同：3
> 
> 时间：2013-01-20T06:27:42.337
> 
> 标签：qt

我有一个`internalpointer()`用于他的`data()`实现的书面模型（myModel）。我想使用过滤树（基于myModel）`QSortFilterProxyModel`，

我让它工作，只有当我尝试从树中获取任何数据时，我的应用程序才会崩溃。

我认为这是因为在调用树数据时，期望得到 myModel indexModel，我得到了`myQSortFilterProxyModel`indexModel。

```
myItem *myModel::getItem(const QModelIndex &index) const
{
    if (index.isValid()) {
        myItem *item = static_cast<myItem*>(index.internalPointer());
        if (item) return item;
    }
    return rootItem;
} 
```

我的模型`data()`使用`internalPointer()`

```
QVariant myModel::data(const QModelIndex &index, int role) const
{
    if (!index.isValid())
        return QVariant();

    if (role != Qt::DisplayRole && role != Qt::EditRole)
        return QVariant();

    myItem *item = getItem(index);

    return item->data(index.column());
} 
```

在 myModel 和树之间设置过滤器模型

```
void myTree::myInit()
{
...
    myModel *model = new myModel();
    proxyModel = new mySortFilterProxyModel(this);
    proxyModel->setSourceModel(model);
    this->setModel(proxyModel);
... 
```

myTree 是 QTreeView 的子类。我想用来`tree->model()`获取 myModel 模型

如何获取源模型数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:20:16.340

由于您指出的原因，这种方法不适用于代理模型。Internalpointer/id 只能在保证传递属于模型本身的索引的方法中访问，例如 data() 等。

获取索引项的更好方法是通过自定义角色传递它：

```
 enum Roles {
     MyItemRole=Qt::UserRole
 };

 QVariant data( const QModelIndex& index, int role ) const {
      ...   
      if ( role == MyItemRole )
          return QVariant::fromValue<MyItem>( item ); 
         //MyItem or MyItem*, depending on whether it can be copied/has
         // value semantics or not
      ...
 } 
```

在使用代码时：

```
 const MyItem item = index.data( MyModel::MyItemRole ).value<MyItem>(); 
```

您需要在标头中添加 Q_DECLARE_METATYPE(MyItem)（或 MyItem*）并在运行时调用 qRegisterMetaType()，以便 MyItem/MyItem* 可以作为 QVariant 传递。

这种方法的优点是无论中间有任何代理模型，它都可以工作，并且调用数据的代码甚至不必知道代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T16:22:42.150

您所要做的就是在调用 getItem() 之前调用 mapToSource()。

这是我用来更改某种类型项目的字体的 data() 方法。否则它只会调用 QSortFilterProxyModel 的 data()。

```
virtual QVariant data(const QModelIndex & proxy_index, int role) const
{
    QModelIndex source_index = mapToSource(proxy_index);
    IT::TreeItem * item = IT::toItem(source_index);
    if (role == Qt::FontRole && item->isMessage()) return _bold_font;
    return QSortFilterProxyModel::data(proxy_index, role);
} 
```

# javascript - 在服务器上连接 sqlite 和 HTML5

> ID：14422274
> 
> 赞同：1
> 
> 时间：2013-01-20T06:29:56.313
> 
> 标签：javascript, html, sqlite

如何将 HTML5 Web 应用程序连接到服务器端的 sqlite 数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T06:40:25.007

以下是解释将 sqllite 与 html5 连接的博客

[HTML5 数据库的 SQL Lite 类](http://blog.heldes.com/html5/sqlite-class-for-html5-database/)

[在 HTML5 Sql Lite 中存储数据](http://cookbooks.adobe.com/post_Store_data_in_the_HTML5_SQLite_database-19115.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T07:40:57.830

您需要使用服务器端语言，例如 php（或任何其他支持 sqlite 数据库的服务器端语言）。除了作为 http 服务（例如网页或 json Web 服务）公开的信息之外，客户端应用程序无法访问服务器上的任何内容。您的 html5 应用程序可以使用 ajax 向服务器端脚本发出 http 请求，该脚本实际上进行 sqlite 数据库查询并将信息返回给您的应用程序。使用像 jquery 这样好的客户端库可以使 ajax 调用变得非常容易：

```
$.getJSON("path/to/server-side-script.php", function(dataReturned){ 
  alert(dataReturned);
}; 
```

上面的代码只是一个例子——它可能不完全正确，但你应该明白了。我不会举例说明服务器端脚本将如何从 sqlite 检索数据并将其作为 JSON（或您喜欢的任何数据格式）返回 - 它们很容易通过快速的 google/bing 搜索找到。

# android - 从 WebView 获取 URL

> ID：14422276
> 
> 赞同：0
> 
> 时间：2013-01-20T06:30:03.323
> 
> 标签：android, android-webview

我想知道是否有另一种有效的方法来获取将加载到 WebView 上的 URL。我当前的代码给出了当前的 URL，而不是将要加载的 URL。

例如，如果我的 WebView 加载这个：**`http://stackoverflow.com`**

加载后如果我点击**Questions**，我不会得到这个 url **http://stackoverflow.com/questions**，由于某种原因我会得到**`http://stackoverflow.com`**

所以我的问题是**你将如何获得将在 WebView 上加载的 url？**

这是我的代码，请帮忙！

```
import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Toast;

public class MainActivity extends Activity {

    // Declaring
    WebView browser;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Initializing
        browser = (WebView) findViewById(R.id.webView1);

        browser.getSettings().setJavaScriptEnabled(true);
        browser.getSettings().setLoadWithOverviewMode(true);
        browser.getSettings().setUseWideViewPort(true);
        browser.getSettings().setBuiltInZoomControls(true);

        // Loading
        browser.loadUrl("http://stackoverflow.com");

        browser.setWebViewClient(new WebViewClient() {
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                    view.loadUrl(url);

                return true;
            }

            public void onLoadResource(WebView view, String url) {

                //here I get the Url, but its not accurate. Sometimes it works, sometiems it doesn't 
                    Toast.makeText(getApplicationContext(), browser.getUrl(),
                            Toast.LENGTH_SHORT).show(); 
            }

        });

    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T06:34:11.553

尝试从此函数获取 url：

**编辑：**

```
 browser.loadUrl("http://stackoverflow.com");

        browser.setWebViewClient(new WebViewClient() {
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                Toast.makeText(getApplicationContext(), url, Toast.LENGTH_SHORT).show(); 
                Log.v("TEST", url);
                if(url.equals("http://stackoverflow.com/questions")){
                    Toast.makeText(getApplicationContext(), "SKIP", Toast.LENGTH_SHORT).show();
                }
                else{
                   view.loadUrl(url); 
                }                 
                return true;
            }
        }); 
```

参考 ：

[shouldOverrideUrlLoading](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-14T11:27:16.073

我知道它很晚，但是对于其他用户，如果它有帮助，那将是我的荣幸。在您的 WebViewClient 中，您可以使用：

```
private class MyWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {         
            String webUrl=view.getUrl();
            return true;
        }
    }
```

# core-foundation - CFUUIDCreate 线程安全吗？

> ID：14422278
> 
> 赞同：1
> 
> 时间：2013-01-20T06:30:22.973
> 
> 标签：core-foundation

`CFUUIDCreate`线程安全吗？[在docs](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFUUIDRef/Reference/reference.html)中没有看到任何关于此的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T06:40:29.620

基于[当前的 10.8.2 源代码](http://www.opensource.apple.com/source/CF/CF-744.12/CFUUID.c)，它肯定是线程安全的。函数体使用一个`LOCKED()`函数将`dispatch_sync`所有真正的工作放到一个单一的串行 GCD 调度队列上。因此，来自多个线程的同时调用将被序列化。

如果您对早期版本的 Mac OS X 感兴趣，可以在[此处](http://www.opensource.apple.com)找到代码。不幸的是，Apple 没有在 iOS 上发布 CoreFoundation 的源代码，但可以肯定的是，它类似于 OS X 版本。

# opengl - OpenGL中的反射和深度

> ID：14422279
> 
> 赞同：0
> 
> 时间：2013-01-20T06:30:23.577
> 
> 标签：opengl, reflection, depth, stencil-buffer

我正在尝试在 OpenGL 中创建镜像。我发现的大多数参考资料都建议使用模板缓冲区来定义镜子本身的边界，并结合使用平移和缩放矩阵来进行实际反射。当观察场景时，我设法让它工作，这样镜子前面就没有物体了。然而，当一个物体在镜子前面时，重叠部分不会显示出来，使它看起来好像它在镜子后面。我很有可能误解了模板缓冲区的工作原理，因为这是我第一次尝试使用它，但我也可能在深度或其他方面犯了一些错误。我会很感激任何建议。这是代码。

```
#include <gl/glut.h>

// perspective
void view(void) {
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-2.0, 2.0, -2.0, 2.0, -2.0, 2.0);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    glRotatef(-85.0, 1.0, 0.0, 0.0);
    glScalef(0.25, 0.25, 0.25);
}

void init(void) {
    glEnable(GL_DEPTH_TEST);
    glClearStencil(0);
    glEnable(GL_STENCIL_TEST);
}

void mirror(GLboolean inside, GLfloat vertSet[4][3]) {
    GLint i;
    if(inside)
        glBegin(GL_QUADS); // draw inside of mirror
    else
        glBegin(GL_LINE_LOOP); // draw frame of mirror
            for(i = 0; i < 4; i++)
                glVertex3fv(vertSet[i]);
    glEnd();
}

void scene(void) {
    glMatrixMode(GL_MODELVIEW);
    glPushMatrix();
    glRotatef(90.0, 1.0, 0.0, 0.0);
    glutSolidTeapot(1.0);
    glPopMatrix();
}

void display(void) {
    GLfloat vertSet1[4][3] = {{-3.0, 3.0, 0.0}, {2.0, 3.0, 0.0}, 
        {2.0, 3.0, 2.0}, {-3.0, 3.0, 2.0}};

    view();

    // store mirror shape in the stencil buffer.
    glClear(GL_STENCIL_BUFFER_BIT);
    glStencilFunc(GL_ALWAYS, 1, 1);
    glStencilOp(GL_REPLACE, GL_REPLACE, GL_REPLACE);
    mirror(true, vertSet1);

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    // draw mirror frame.
    glColor3f(0.0, 0.0, 0.0);
    mirror(false, vertSet1);

    // draw scene outside mirror
    glStencilOp(GL_KEEP, GL_KEEP, GL_KEEP);
    glStencilFunc(GL_NOTEQUAL, 1, 1);
    scene();

    // draw reflection of scene in mirror
    glStencilFunc(GL_EQUAL, 1, 1);
    glTranslatef(0.0, 3.0, 0.0);
    glScalef(1.0, -1.0, 1.0);
    glTranslatef(0.0, -3.0, 0.0);
    scene();

    glFlush();
    glutSwapBuffers();
    glutPostRedisplay();
}

int main (int argc, char **argv) {
    glutInit(&argc, argv);
    glutInitWindowSize(500, 500);
    glutInitWindowPosition(0, 0);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_STENCIL | GLUT_DEPTH);
    glutCreateWindow("");

    glClearColor(1.0, 1.0, 1.0, 0.0);

    init();

    glutDisplayFunc(display);

    glutMainLoop();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T12:02:05.757

模板的想法是，当您通常在场景中渲染镜子的玻璃时绘制它。您希望对模板的绘图进行深度测试。完成场景渲染后，在镜像平面中添加一个剪辑平面，然后清除深度缓冲区并重新绘制场景。由于您清除了深度缓冲区，因此您需要先对模板进行深度测试，以使镜子不会过度绘制世界上已经绘制的对象。

请注意，绘制镜子本质上与绘制门户相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T09:09:40.267

这是我在旧 opengl 中进行反射的代码，希望对您有所帮助请注意，大部分代码来自 NeHe 教程： http: [//nehe.gamedev.net/tutorial/clipping__reflections_using_the_stencil_buffer/17004/](http://nehe.gamedev.net/tutorial/clipping__reflections_using_the_stencil_buffer/17004/)

```
double eqr[] = { 0.0f, -1.0f, 0.0f, 0.0f };
glColorMask(0, 0, 0, 0);

glEnable(GL_STENCIL_TEST);
glStencilFunc(GL_ALWAYS, 1, 1); 
glStencilOp(GL_KEEP, GL_KEEP, GL_REPLACE);  

glDisable(GL_DEPTH_TEST);   
DrawFloor();    // draw flor to the stencil buffer

glColorMask(1, 1, 1, 1);            
glStencilFunc(GL_EQUAL, 1, 1);      

glStencilOp(GL_KEEP, GL_KEEP, GL_KEEP);

glEnable(GL_CLIP_PLANE0);       

glClipPlane(GL_CLIP_PLANE0, eqr);
glPushMatrix();
    glScalef(1.0f, -1.0f, 1.0f);
    //glLightfv(GL_LIGHT0, GL_POSITION, light_pos);     
    glFrontFace(GL_CW);
    glTranslatef(0.0f, 0.3f, 0.0);
    RenderScene();
    glFrontFace(GL_CCW);
glPopMatrix();
glDisable(GL_CLIP_PLANE0);                  
glDisable(GL_STENCIL_TEST); 

glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glColor4f(0.6f, 0.7f, 1.0f, 0.5f);
    DrawFloor();    // draw floor second time
glDisable(GL_BLEND);

// draw normal scene
glPushMatrix();
    glColor3f(1.0f, 1.0f, 1.0f);
    glTranslatef(0.0f, 0.3f, 0.0);
    RenderScene();
glPopMatrix(); 
```

为了获得更好的结果，您可以使用 RenderToTexture 或使用立方体贴图

# ios - 当我使用 NavController 推送视图时如何隐藏标签栏？

> ID：14422286
> 
> 赞同：1
> 
> 时间：2013-01-20T06:32:09.883
> 
> 标签：ios, ios6, ios5.1

我尝试了以下两种方法：

* * *

> 1.[self.tabBarController.tabBar setHidden:YES];

* * *

> 2\. self.navigationController.hidesBottomBarWhenPushed = YES;
> 
> [self.navigationController pushViewController:OneViewController 动画：YES];

但是结果是tabbar项被隐藏了，但是那里还是有黑块， ![在此处输入图像描述](../Images/fd593771f538e09a56076d469abd6ed9.png)

我猜是因为视图的标签栏样式没有设置为无。就像下面IB的视图设置： ![在此处输入图像描述](../Images/fdf969a7a9d649f43d24591273308dc5.png)

这个问题怎么解决，thx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T06:51:29.160

要隐藏导航栏，请使用此代码

```
[[self navigationController] setNavigationBarHidden:YES animated:YES]; 
```

要显示导航栏，您可以使用此代码

```
[[self navigationController] setNavigationBarHidden:NO animated:YES]; 
```

这是可能对我的朋友有帮助的文档

[https://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](https://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

希望对你有所帮助。

编辑

这是一个隐藏标签栏的github项目。希望这对您有所帮助。

[https://github.com/idevsoftware/Cocoa-Touch-Additions/tree/master/UITabBarController_setHidden](https://github.com/idevsoftware/Cocoa-Touch-Additions/tree/master/UITabBarController_setHidden)

让我知道这是否是您正在寻找的，以及您是否需要更多帮助。

# extjs - extjs 4 休息代理和 zend 2 休息控制器

> ID：14422289
> 
> 赞同：-1
> 
> 时间：2013-01-20T06:33:26.560
> 
> 标签：extjs, zend-framework2, extjs-mvc

我想从 EXTJS 4 rest 代理将数据发布到 Zend 2 restful 控制器。但是当我用萤火虫检查时，我发现有帖子数据，但我无法获取该数据。如何获取该帖子数据以在我的方法中使用它。我在哪里弄错了，我无法弄清楚。任何人有步骤将数据从 REST Extjs 4 代理方法发布到 Zend？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:06:46.307

PHP 中从 HTTP 请求正文加载 JSON 的标准方法是使用

```
$some_json = file_get_contents('php://input');
$some_object = json_decode($some_json); 
```

我不知道 Zend2 是否有自己的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-05T09:36:39.827

`ExtJS``sort`将, `page`,等参数发送`filter`到 URL，例如：`http://myhost.com/?page=2&sort=myfield`.

在这种情况下，您只需从您的`RESTController`操作中截取查询参数：

```
$page   = $this->params()->fromQuery('page');
$sort   = $this->params()->fromQuery('sort'); 
```

到 ZF2 REST 控制器的数据传输取决于您使用的 HTTP 方法：

*   `GET`, `PUT`,`DELETE`接收`$id`参数；
*   `POST`用于创建新记录并接收 $data 参数。

有关更多信息，您可以在这里查看：

[http://framework.zend.com/manual/current/en/modules/zend.mvc.controllers.html#the-abstractrestfulcontroller](http://framework.zend.com/manual/current/en/modules/zend.mvc.controllers.html#the-abstractrestfulcontroller)

如果您有兴趣，我正在开发我的 REST 代理`Sencha`，我已经使用`ExtJS`和`Sencha Touch`框架进行了测试，它支持分页、远程过滤器、远程排序等。

它是使用 Zend Framework 2 开发的，可以在同一安装中支持不同的 DB 类型。看一下：

[http://apiskeleton.asaconsult.com/](http://apiskeleton.asaconsult.com/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-10T06:05:00.080

我也有完全一样的问题。现在，之前的回复不起作用的原因是 Zend Studio 10 有一个新功能，可以从一个可视化编辑器配置 REST 服务，该编辑器接收参数并创建路由。这个服务设计者实际上接受了 Restful 服务的 POST 操作的主体参数，但它以某种方式忽略了从 ExtJS 发送的 JSon。更糟糕的是，如果您使用 Zend Studio 10 中的集成 GUI 测试该服务，它可以完美运行，并且生成的 JSon 与来自 ExtJS 的 100% 相同（我实际上执行了一些数据转换以达到这一点），并且它不起作用。

真正的问题是 POST 方法中存在与 ExtJS 请求不同的“某些东西”，而不是框架本身所期望的 JSon，它从开发人员那里抽象出用于反序列化此 JSon 的代码。

真正的问题是，Zend 服务器网关库期望 ExtJS 在 POST 正文中以不同的方式发送什么？如果这里成千上万的专家中的任何一位可以检查一下并给出正确的答案，我将不胜感激。回答这个问题的人必须拥有或下载 Zend Studio 10 的试用版，并亲自检查 ZS10 附带的 Visual Service Tool 是如何工作的。到目前为止，我发现 ExtJS4 像这样生成它的 JSON：

```
{"data":
 {"IdCurso":"0","Nombre":"NodeJS","IdEstadoCurso":"1",
  "IdTipoPeriodo":"1","CantPeriodo":"1","CantAsignatura":"1","IdPlantel":"1"}
} 
```

用于测试服务的 Zend GUI 生成（并且服务接受）JSON，如下所示：

```
{
    'data' : '{"Nombre":"NodeJS","IdEstadoCurso":"1","IdTipoPeriodo":"1","CantPeriodo":"1","CantAsignatura":"1","IdPlantel":"1","IdCurso":"0"}'
} 
```

如您所见，数据用单引号括起来，其内容也可供 Zend Framework 毫无问题地使用它。ExtJS 使用双引号，并且不引用数据包本身的内容。

这是一个真正有效的补丁，不是最终的解决方案，如果有人找到更好的解决方案，那就太好了。

试试这个作为 add() (POST) 方法中的第一条指令：

```
$data = json_decode($this->getRequest()->getContent()); 
```

您可能需要添加以下内容：

```
$data = (array) $data; 
```

之后，继续使用 $data 变量正常编写代码，就像参数实际工作时所做的那样。

# javascript - 不同端口上的 JS 和 API 服务器之间的交互

> ID：14422291
> 
> 赞同：4
> 
> 时间：2013-01-20T06:33:28.550
> 
> 标签：javascript, ajax, cross-domain-policy

我有一个在端口上运行的 API 服务器和在开发机器`AAAA`上的端口上运行的 JS 前端应用程序（emberjs，使用 yeoman） 。`BBBB`在实时服务器上，这些端口将是相同的。不幸的是，在开发机器上我遇到了跨域策略问题。

我能做些什么呢？

PS：目前我通过使用启动 Chrome 解决了这个问题

```
open -a Google\ Chrome --args --disable-web-security 
```

`http://localhost:8888/`并在 JS api 中使用绝对根路径。但我并不是硬编码的 url 和特殊标志的粉丝。如果有更好的解决方案，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T07:23:21.350

除了使用 chrome with 之外`--disable-web-security`，我还使用此代码段来避免对 API 源进行硬编码

```
var origin = location.origin.replace(/localhost:(\d+)/, 'localhost:8888'); 
```

并且只为本地发展而改变它。

# javascript - 在 jQuery 中：如何触发自定义延迟事件

> ID：14422301
> 
> 赞同：1
> 
> 时间：2013-01-20T06:36:39.217
> 
> 标签：javascript, jquery, jquery-plugins, jquery-deferred

我有一个这样的插件：

```
(function($){
  $.fn.extend({
    myplugin: function () {
      var jobs = [];
      this.each(function(){
        jobs.push($(this).one(
          'load',
          function(){
            // Line A: "Load" fires here
            // Replace image source
            $(this).attr('src','new_url');
            // Line B: Everything is done, fire now!
          }));
        });
        // Callback
        $.when.apply(null,jobs).then(function(){
          alert($(this).attr('src'));
        });
        return this;
      }
    });
  })(jQuery); 
```

`when`助手总是提醒旧图像源。`load`因为它在**Line A**上被调用。但我需要在**Line B**上开火。

如何解决这个问题？有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T06:42:40.480

您没有将任何延迟传递给`when`. 你传递给它的只是一个 jQuery 对象数组。

[`deferred`](http://api.jquery.com/category/deferred-object/)为集合中的每个项目创建一个新项目，然后[`resolve`](http://api.jquery.com/deferred.resolve/)在事件侦听器中创建一个新项目：

```
(function($){
    $.fn.myplugin = function () {
        var deferreds = [];

        this.each(function() {
            var deferred = $.Deferred();

            deferreds.push(deferred);

            $(this).one('load', function() {
                this.src = 'new_url';
                deferred.resolve();
            });
        });

        $.when.apply($, deferreds).then(function() {
            alert('All sources have been changed.');
        });

        return this;
    };
})(jQuery); 
```

* * *

为了更简洁，您可以将函数传递给延迟构造函数：

```
this.each(function (i, element) {
    deferreds.push( $.Deferred(function (deferred) {

        $(element).one('load', function() {
            this.src = 'new_url';
            deferred.resolve();
        });

    }));
}); 
```

# c++ - Qt SQL - 配置与数据库的连接

> ID：14422304
> 
> 赞同：0
> 
> 时间：2013-01-20T06:36:53.080
> 
> 标签：c++, sql, qt, qtsql

我已经放弃尝试为 Qt 5.0 库配置 MYSQL 驱动程序，我将使用当前可用的唯一驱动程序 - “QSQLITE”。

我已经尝试了很长一段时间，并尝试了类似帖子中提到的所有内容： [Select from SQLite with Qt](https://stackoverflow.com/questions/2311218/select-from-sqlite-with-qt)

```
QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE");
db.setHostName(SQL_SERVER);
db.setPort(SQL_PORT);
db.setDatabaseName(SQL_DATABASE);
db.setUserName(SQL_USER);
db.setPassword(SQL_PASS);
bool dbSuccess = db.open();
QList<QString> deviceNames;
QString deviceName;
qDebug() << db;
if(dbSuccess){
    QSqlQuery query;
    qWarning("We made it into the DB");
    query.exec("SELECT device_name FROM tbl_device");
    while (query.next() ){
        qDebug() << query.value(1).toString();
       // deviceNames.append(deviceName);
        //qDebug() << "Test: "<< deviceName;
    }
}
else if(!db.open()){
    qWarning("Database failed to load!");
} 
```

其中 SQL_Server = 192.168.1.100

我从应用程序中得到以下 qDebug 输出：

```
QSqlDatabase(driver=""QSQLITE"", database=""homelogic"", host=""hendrenserver"", port=3306, user=""homelogic"",      open=true) 
We made it into the DB 
```

输出表明数据库连接是有效的，但是如果我将服务器名称更改为完全错误的名称，例如“xlkcjox”或其他随机键 - 我会得到相同的输出。我在这里想念什么？我觉得这应该相对容易。

请指教！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T08:16:15.840

当使用 qt 的 sqlite 驱动程序时，数据库名称是磁盘上的一个文件，与主机名无关。这就是 sqlite 的工作原理。它不需要主机，只需要一个文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:52:01.817

我正在重新审视这个问题，以分享我今天遇到的一个非常有用的链接。我使用 Qt 4.8.4 和 QODBC 驱动程序找到了解决方案。由于需要使用QSerialPort和项目bug，我今天更新到5.0.1。在重建我的 ODBC 插件时，我发现了这个链接：[http](http://seppemagiels.com/blog/create-mysql-driver-qt5-windows) ://seppemagiels.com/blog/create-mysql-driver-qt5-windows 。在 20 分钟内，我得到了我最初想要的 QMYSQL 驱动程序。我希望这对其他人有帮助！

# c++ - iostream 出现致命错误

> ID：14422305
> 
> 赞同：0
> 
> 时间：2013-01-20T06:36:53.470
> 
> 标签：c++, llvm, clang

我想写一个简单的clang插件。所以我只是执行了`"PrintFunctionNames"`llvm-clang中提供的一个插件。但是当我尝试执行命令时：

> " clang -cc1 -load ../../Debug+Asserts/lib/libPrintFunctionNames.so -plugin print-fns some-input-file.c "

它给了我 1 个致命错误：

```
fatal error: 'iostream.h' file not found
#include<iostream.h>
        ^
1 error generated. 
```

我也尝试使用 -I 选项提供包含目录的路径，`'iostream'`但它仍然给我同样的错误。

我试过这样：

> 'clang++ -I//usr/include/c++/4.6 -cc1 -load ../../../../Release+Asserts/lib/libPrintFunctionNames.so -plugin print-fns ak.cpp'

那么我该如何进行这项工作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T06:46:08.143

不要在末尾添加 .h。

```
#include <iostream> 
```

那应该解决它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T06:47:35.873

`iostream`属于 C++ 而不是 C。所以你应该把它包括为

```
#include <iostream> 
```

此外，由于您使用 C++ 编程，因此您应该将源文件命名为以 .cpp 而不是 .c 结尾，以使编译器和其他所有人清楚您想要使用 C++。此外，您可能需要`clang++`在第一次编译器调用中调用（但我不确定在插件的上下文中）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T06:47:27.117

在 C++ 语言被 ISO 标准化后，头文件`iostream.h`被重命名为`iostream`. 更改您的程序以使用`#include <iostream>`它，它应该编译。

您还需要`using namespace std;`在每个包含之后添加语句（或在每个对 iostream 函数/对象的引用前加上`std::`）。

你可以从使用这个开始

```
#include <iostream>
using namespace std; 
```

一旦您对命名空间更加熟悉，您可以删除`using`语句 & 代替 use`std::cout`等`std::cin`或使用

```
using std::cout;
using std::cin; 
```

等等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-01T02:29:59.373

我遇到同样的问题，

*   模板.cpp

```
g++ template.cpp 
```

```
compare<int>com1(3,7); 
```

1.  项目清单

```
compare<double>com2(12.34,56.78); 
compare<char>com3('a','x'); 
cout<<",the max value:"<<com1.max()<<endl;   
cout<<",the max value:"<<com2.max()<<endl;
cout<<",the max value:"<<com3.max()<<endl;
return  0; 
```

问题是代码段编写不好，下次使用 shift + table 输入。

# python - Django：测试应用程序导致 Tastypie 错误

> ID：14422306
> 
> 赞同：0
> 
> 时间：2013-01-20T06:36:56.127
> 
> 标签：python, django, testing, tastypie, django-south

我正在尝试通过测试我的 Django 应用程序

```
python manage.py test project 
```

但我收到错误消息

```
django.db.utils.DatabaseError: relation "tastypie_apiaccess" already exists 
```

这怎么可能？以前从未测试过。这与我存储在 app 文件夹中并`test`使用迁移创建我的数据库的 sqlite 副本的迁移文件有关吗？

我`South`作为迁移应用程序运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:27:22.723

这可能与南迁有关。如果是这样，您可以通过使用来避免这种情况`SOUTH_TESTS_MIGRATE = False`，然后测试运行程序将使用 syncdb 而不是 migrate。

# variables - Cuda 中的 blockIdx（和 threadIdx）

> ID：14422308
> 
> 赞同：0
> 
> 时间：2013-01-20T06:37:10.223
> 
> 标签：variables, cuda

为什么 Cuda 变量 'blockIdx' 被称为 blockIdx 而不仅仅是 blockId？这似乎令人困惑，因为您可以同时拥有 blockIdx.x 和 blockIdx.y，而且因为它只是块的 ID，所以“x”是什么意思？与 threadIdx 相同。

刚开始接触 Cuda 并试图向某人解释块和线程是如何工作的，我们都认为这是一个奇怪/令人困惑的命名约定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T06:59:14.943

常用快捷键：

*   id - 标识符
*   idx - 索引

在 CUDA 中，您谈论“块索引”和“线程索引”，因此使用快捷方式 Idx。

# vb.net - Visual Basic 2010 - 从 html div 中检索数字

> ID：14422310
> 
> 赞同：0
> 
> 时间：2013-01-20T06:37:17.630
> 
> 标签：vb.net, visual-studio-2010, html, html-parsing

我目前正在开发一个程序，该程序将平均上搜索项目的价格`Amazon`。

我在程序上有一个按钮，当按下它时，将源代码打印`HTML`到 a`richtextbox`中，然后`div`在源代码中找到特定的。

我现在唯一的问题是让它在每次之后打印出金额`div`。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:32:19.500

您可以使用**[HTMLAgilityPack](http://htmlagilitypack.codeplex.com/)**，这是最好的 HTML 解析库之一来简化此任务。一个**[例子](http://htmlagilitypack.codeplex.com/wikipage?title=Examples)**。

**例子：**

*假设 div 的 id 是 divPrice*

```
 HtmlDocument doc = new HtmlDocument();
        doc.LoadHtml(yourHTML);
        HtmlNode priceNode = doc.GetElementbyId("divPrice");
        string price = priceNode.InnerText; 
```

假设 div 没有 id 但有一个 css 类*cssPrice*，那么您可以使用 XPath 查询它：

```
 HtmlNode priceNode = doc.DocumentNode.SelectSingleNode("//div[@class='cssPrice']"); 
```

**或者**

```
 HtmlNodeCollection nodes = doc.DocumentNode.SelectNodes("//div[@class='cssPrice']");
        foreach (HtmlNode node in nodes) {
            string nodeText = node.InnerText;
        } 
```

# json - Popover 不适用于 json 多个值

> ID：14422314
> 
> 赞同：2
> 
> 时间：2013-01-20T06:38:48.773
> 
> 标签：json, backbone.js, twitter-bootstrap, mustache

```
[
  {
    "id"  : 1,
    "name"  : "clevin",
    "description" : "Version 1 : some desc",
    "info" : [{
      "id"  : 2,
      "name"  : "abc",
      "size"  : "5 GB",
      "used"  : "25%"

    },
    {
      "id"  : 3,
      "name"  : "def",
      "size"  : "10 GB",
      "used"  : "15%"
    },
    {
      "id"  : 4,
      "name"  : "ghi",
      "size"  : "20 GB",
      "used"  : "5%"
    }],

  }] 
```

这是我的 json 文件。当我将鼠标悬停在“info.name”[abc, def, ghi] 上时，弹出框将显示“name”、“size”和“used”。

但我的问题是“abc”是第一个值，当我将鼠标悬停时它会按预期显示值。但是当我将鼠标悬停在“def”和“ghi”上时，什么都没有发生:(。

```
<ul type="none">
            <li>
                <label id="vol-label" class="muted">Info :</label>
                {{#info}}
                <span id="value"><a><u>{{name}}</u></a></span>
                <span id="info-popover-title" class="hide">{{name}}</span>
                <div id="info-popover-content" class="hide">
                    <p>Size : {{size}}</p> <p> Used : {{used}}</p><p> Status : {{status}}</p>
                </div>
                {{/info}}
            </li>
</ul> 
```

这是我的模板（小胡子）。以下是我的观点部分（backbone.js）

```
 events: {
              "mouseenter #value" :   "showDetails", 

              "mouseleave #value" :   "hideDetails" ,
            },

    showDetails : function() {

                this.$("#value").popover({

                    html : true,

                    title: function() {

                         return $("#info-popover-title").html();

                    },

                    content: function() {

                      return $("#info-popover-content").html();

                    }
                });    

                this.$("#value").popover('show');        
            },

            hideDetails : function() {

                this.$("#value").popover('hide');   

            }, 
```

请查看我的两个屏幕截图以了解该问题。在第一个屏幕热看到我得到所有 json 信息值 "abc" "def" 和 "ghi" 。在第二个屏幕截图中，如果我将鼠标悬停在“abc”值上。但是“def”和“ghi”值根本没有显示。我不知道是什么问题:(。

![在此处输入图像描述](../Images/73b5fc702597f4b8a42fcc6fee90b34f.png)

![在此处输入图像描述](../Images/b1b0fe0ec8ec587672fa72867adc97de.png)

![在此处输入图像描述](../Images/2a9b235a649ec208df5008f702ef58b5.png)

我还需要弹出“def”和“ghi”值。但我认为我的逻辑有问题。提前致谢。这对我来说真的是一个罕见的问题，可能其他人也一样。

如果我使用 id 的类 insted 以下是屏幕截图:( ![在此处输入图像描述](../Images/5a846a147d1f237c8415b2233eb58d10.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:29:26.713

您需要在此处更改 2 件事。首先，是使用类来定义popovers而不是id。第二个是将每个抽象`<li>`成自己的视图。目前，您有一个循环遍历整个集合的视图。您的所有事件当前都与这一视图相关联。做我提到的那些事情应该可以解决这个问题。

你可以做这样的事情来拥有它自己的视图，它带有它自己的子元素。只是快速写了这个，还没有测试，但这个想法是这样的。我不确定您使用的是哪个弹出框库，但想法通常是相同的。

编辑：没有意识到你在使用 Mustache/Handlebars，所以这里是 JS Fiddle。[代码](http://jsfiddle.net/U5kmY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T08:06:12.743

现在，如果您尝试调用每个对象，它应该可以工作。

```
 var abc =
 {
     "id"  : 1,
"name"  : "clevin",
"description" : "Version 1 : some desc",
"info" : {
  "id"  : 2,
  "name"  : "abc",
  "size"  : "5 GB",
  "used"  : "25%"
}
 };

 var def = 
 {
     "id"  : 3,
  "name"  : "def",
  "size"  : "10 GB",
  "used"  : "15%"
};
var ghi = {
  "id"  : 4,
  "name"  : "ghi",
  "size"  : "20 GB",
  "used"  : "5%"
};

var output = 
{
    show : function()
    {
        return abc["info"];
    }
};

console.log(output.show()); 
```

# ios - 在任何 UIViewControllers 之间交替？

> ID：14422315
> 
> 赞同：0
> 
> 时间：2013-01-20T06:39:13.073
> 
> 标签：ios, uiviewcontroller

这个问题很长，请耐心等待。

我们知道有两种显示控制器的方法：推送或呈现。还有两个复合控制器：tabbarcontroller 和导航控制器。有了这些可以制作复杂的视图控制器树。现在我有一个像这样的复杂视图控制器树。

T：tabbarcontroller N：navigationcontroller V：普通viewcontroller P：push S：present

所以 PV2 表示 push a viewcontroller ，这是六种组合，但是 PN 是被禁止的，你不能 push a navigation controller。当我研究

```
  T1
  ---------------------
  N1 N2 N3
  | |
  PV1 PV3
  |
  PV2

```

现在当前的视图控制器是 V2。我想跳到N3并推V3。我写了这段代码：

```
[self.navigationcontroller popToRootViewControllerAnimated:NO]; // No is important
tabbarcontroller.selectIndex = 2;
[N3 pushViewController:V3]; 
```

它有效，但仍然很糟糕，太糟糕了。1：N3必须知道v3，viewcontroller之间的耦合性很强。2：不能在复杂的情况下工作……也会导致动画问题。

我的一个朋友告诉我，他们制作了一个 PageConductor，可以轻松地在任何视图控制器之间切换。这真的让我很困惑......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:25:05.493

1.  N3 知道 V3 有什么问题？您是说 V2 知道 V3 吗？无论如何，我在了解 T 的 V2 中看到了一个更大的问题。如果您真的必须执行此复杂的屏幕流程，请将其委托给专用对象（例如您朋友提到的 PageConductor）。根据用户操作而不是控制器操作（如或其他）与此对象交谈`[screens showUserProfile:userId]`，这将为您提供控制器之间的真正解耦。

2.  什么是“复杂情况”的例子？至于这种特殊情况下的动画问题，请在弹出 T1 堆栈之前尝试切换到 T3。

*更新*

一个虚构的应用程序的屏幕管理器的小例子。

```
@implementation ScreenManager {
}

@synthesize tabController = _tabController;

- (BOOL)goToUserList
{
    // user list is a root controller of tab 0 navigation controller
    BOOL switched = [self switchToTab:0];
    UINavigationController *nc = [self rootNavigationAtTab:0];
    [nc popToRootViewControllerAnimated:!switched]; // we should animate popping if we didn't change tabs
    return switched;
}

- (BOOL)showUserProfile:(NSUInteger)userId
{
    BOOL switched = [self goToUserList];
    UIViewController *uc = [[UserDetailsController alloc] initWithUserId:userId];
    UINavigationController *nc = [self rootNavigationAtTab:0];
    [nc pushViewController:uc animated:YES];
    return switched;
}

- (BOOL)showMapAtLocation:(CLLocation *)location
{
    MapController *mc = [self downcast:[self rootControllerAtTab:1] to:[MapController class]];
    mc.location = location;
    return [self switchToTab:1];
}

/* returns if we actually switched tabs as a result of this action */
- (BOOL)switchToTab:(NSUInteger)tabIdx
{
    NSUInteger prevTabIdx = _tabController.selectedIndex;
    _tabController.selectedIndex = tabIdx;
    return prevTabIdx != tabIdx;
}

- (BOOL)pushController:(UIViewController *)controller animated:(BOOL)animated toTab:(NSUInteger)tabIdx
{
    BOOL switchedTabs = [self switchToTab:tabIdx];
    UINavigationController *nc = [self rootNavigationAtTab:tabIdx];
    [nc pushViewController:controller animated:animated];
    return switchedTabs;
}

- (UINavigationController *)rootNavigationAtTab:(NSUInteger)tabIdx
{
    return [self downcast:[self rootControllerAtTab:tabIdx] to:[UIViewController class]];
}

- (id)downcast:(id)obj to:(Class)klass
{
    return [obj isKindOfClass:klass] ? obj : nil;
}

- (UINavigationController *)rootControllerAtTab:(NSUInteger)tabIdx
{
    return [_tabController.viewControllers objectAtIndex:tabIdx];
}

+ (ScreenManager *)currentManager
{
    static ScreenManager *manager;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
    manager = [ScreenManager new];
});

    return manager;
}

@end 
```

在这里，我们有 3 个操作可供用户使用 - “按 ID 显示用户个人资料”、“显示用户列表”和“在地图上显示某些位置”。人们可能会调整这个基本解决方案以满足他们的应用程序需求，但它的想法是将标签/屏幕管理逻辑与本地控制器逻辑分离。所有操作都返回一个布尔值，指示在此期间是否切换了选项卡，因此客户端代码可以根据此进行一些调整（例如在选项卡更改时弹出其导航堆栈）。

# c++ - 提升线程概念化/问题

> ID：14422319
> 
> 赞同：2
> 
> 时间：2013-01-20T06:40:14.047
> 
> 标签：c++, multithreading, boost, boost-thread

我有一个通常运行 50 次的函数（运行 50 次模拟）。通常这是按顺序单线程完成的，但我想使用多线程来加快速度。线程不需要访问彼此的内存或数据，所以我认为赛车不是问题。本质上，线程应该只是完成它的任务，然后返回到它完成的主线程，同时返回一个双精度值。

首先，浏览所有 boost 文档和示例真的让我很困惑，我不确定我在寻找什么。提升::线程？推动未来？有人可以举例说明适用于我的情况。此外，我不明白如何指定要运行多少个线程，是否更像是我会运行 50 个线程并且操作系统处理何时执行它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T09:18:43.710

如果您的代码完全受 CPU 限制（没有网络/磁盘 IO），那么您将受益于启动与 CPU 一样多的后台线程。使用 Boost 的 hardware_concurrency() 函数来确定该数字和/或允许用户设置它。仅仅启动一堆线程是没有帮助的，因为这会增加创建、切换和终止线程所带来的开销。

启动线程的代码是一个简单的循环，然后是另一个循环以等待线程完成。您也可以为此使用 thread_group 类。如果作业数量未知且无法在线程启动时分配，请考虑使用线程池，您只需在其中启动合理数量的线程，然后在它们出现时给它们作业。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T12:43:17.390

阅读[Boost.Thread Futures](http://www.boost.org/doc/libs/1_52_0/doc/html/thread/synchronization.html#thread.synchronization.futures)文档，了解使用期货并`async`实现这一目标的想法。它还展示了如何使用`thread`对象手动（硬方式）执行此操作。

鉴于此序列号：

```
double run_sim(Data*);

int main()
{
  const unsigned ntasks = 50;

  double results[ntasks];
  Data data[ntasks];

  for (unsigned i=0; i<ntasks; ++i)
    results[i] = run_sim(data[i]);
} 
```

一个幼稚的并行版本是：

```
#define BOOST_THREAD_PROVIDES_FUTURE
#include <boost/thread/future.hpp>
#include <boost/bind.hpp>

double run_task(Data*);

int main()
{
  const unsigned nsim = 50;

  Data data[nsim];
  boost::future<int> futures[nsim];

  for (unsigned i=0; i<nsim; ++i)
    futures[i] = boost::async(boost::bind(&run_sim, &data[i]));

  double results[nsim];
  for (unsigned i=0; i<nsim; ++i)
    results[i] = futures[i].get();
} 
```

因为`boost::async`还不支持延迟函数，所以每次异步调用都会创建一个新线程，所以这一次会产生 50 个线程。这可能表现得很糟糕，所以你可以把它分成更小的块：

```
#define BOOST_THREAD_PROVIDES_FUTURE
#include <boost/thread/future.hpp>
#include <boost/thread/thread.hpp>
#include <boost/bind.hpp>

double run_sim(Data*);

int main()
{
  const unsigned nsim = 50;
  unsigned nprocs = boost::thread::hardware_concurrency();
  if (nprocs == 0)
    nprocs = 2;   // cannot determine number of cores, let's say 2

  Data data[nsim];   
  boost::future<int> futures[nsim];
  double results[nsim];

  for (unsigned i=0; i<nsim; ++i)
  {
    if ( ((i+1) % nprocs) != 0 )
      futures[i] = boost::async(boost::bind(&run_sim, &data[i]));
    else
      results[i] = run_sim(&data[i]);
  }

  for (unsigned i=0; i<nsim; ++i)
    if ( ((i+1) % nprocs) != 0 )
      results[i] = futures[i].get();
} 
```

如果`hardware_concurrency()`返回4，这将创建三个新线程然后`run_sim`在`main()`线程中同步调用，然后再创建另外三个新线程然后`run_sim`同步调用。这将防止一次创建 50 个线程，因为主线程停止做一些工作，这将允许其他一些线程完成。

上面的代码需要相当新版本的 Boost，如果可以使用 C++11，使用标准 C++ 会稍微容易一些：

```
#include <future>

double run_sim(Data*);

int main()
{
  const unsigned nsim = 50;
  Data data[nsim];

  std::future<int> futures[nsim];
  double results[nsim];

  unsigned nprocs = std::thread::hardware_concurrency();
  if (nprocs == 0)
    nprocs = 2;

  for (unsigned i=0; i<nsim; ++i)
  {
    if ( ((i+1) % nprocs) != 0 )
      futures[i] = std::async(boost::launch::async, &run_sim, &data[i]);
    else
      results[i] = run_sim(&data[i]);
  }

  for (unsigned i=0; i<nsim; ++i)
    if ( ((i+1) % nprocs) != 0 )
      results[i] = futures[i].get();
} 
```

# android - 当 EditText 视图为空时应用程序崩溃

> ID：14422320
> 
> 赞同：-2
> 
> 时间：2013-01-20T06:40:13.533
> 
> 标签：android, android-widget

我已经为名称、体重和身高创建了三个编辑文本视图，名称采用 PersonName 值，体重和身高采用数字值，我正在使用以下代码检查 EditText 视图是否为空。正如您在下面看到的，如果代码块为空，我尝试了所有方法来获取，但是当我将 editText 视图留空时，应用程序仍然崩溃。什么可能出错？

```
if(getName.equals("") || getName.length()<=2 || getName.equals(null) || getName.trim().length()<1)
                        {
                            NameWarning.setText("Please Enter Your Name Correctly");
                        }
                        else if(heightcm.getText().toString().equals("") || heightcm.getText()==null || heightcm.getText().toString().equals(null) || heightcm.getText().toString().trim().length()<1)
                        {
                            HeightWarning.setText("Please Enter Your Height Correctly");
                        }
                        else if(getWeight.getText().toString().equals("") || getWeight.getText().toString()==null || getWeight.getText().toString().equals(null) || getWeight.getText().toString().trim().length()<1)
                        {
                            WeightWarning.setText("Please Enter Your Weight Correctly");
                        }
                        else if (getName.equals("") || heightcm.getText().toString().equals("") || getWeight.getText().toString().equals("") || getName==null || heightcm.getText().toString()==null || getWeight.getText().toString()==null || getName.equals(null) || heightcm.getText().toString().equals(null) || getWeight.getText().toString().equals(null)
                                || getName.trim().length()<1 || heightcm.getText().toString().trim().length()<1 || getWeight.getText().toString().trim().length()<1)
                        {
                            NameWarning.setText("Please Fill Your Details Correctly !!");
                            HeightWarning.setText("Please Fill Your Details Correctly !!");
                            WeightWarning.setText("Please Fill Your Details Correctly !!");
                        } 
```

当应用程序崩溃时，我正在获取此文件

```
// Compiled from Integer.java (version 1.5 : 49.0, super bit)
// Signature: Ljava/lang/Number;Ljava/lang/Comparable<Ljava/lang/Integer;>;
public final class java.lang.Integer extends java.lang.Number implements java.lang.Comparable {

  // Field descriptor #11 I
  public static final int MAX_VALUE = 2147483647;

  // Field descriptor #11 I
  public static final int MIN_VALUE = -2147483648;

  // Field descriptor #11 I
  public static final int SIZE = 32;

  // Field descriptor #19 Ljava/lang/Class;
  // Signature: Ljava/lang/Class<Ljava/lang/Integer;>;
  public static final java.lang.Class TYPE;

  // Method descriptor #23 (I)V
  // Stack: 3, Locals: 2
  public Integer(int value);
     0  aload_0 [this]
     1  invokespecial java.lang.Number() [1]
     4  new java.lang.RuntimeException [2]
     7  dup
     8  ldc <String "Stub!"> [3]
    10  invokespecial java.lang.RuntimeException(java.lang.String) [4]
    13  athrow
      Line numbers:
        [pc: 0, line: 6]
      Local variable table:
        [pc: 0, pc: 14] local: this index: 0 type: java.lang.Integer
        [pc: 0, pc: 14] local: value index: 1 type: int

  // Method descriptor #30 (Ljava/lang/String;)V
  // Stack: 3, Locals: 2
  public Integer(java.lang.String string) throws java.lang.NumberFormatException;
     0  aload_0 [this]
     1  invokespecial java.lang.Number() [1]
     4  new java.lang.RuntimeException [2]
     7  dup
     8  ldc <String "Stub!"> [3]
    10  invokespecial java.lang.RuntimeException(java.lang.String) [4]
    13  athrow
      Line numbers:
        [pc: 0, line: 7]
      Local variable table:
        [pc: 0, pc: 14] local: this index: 0 type: java.lang.Integer
        [pc: 0, pc: 14] local: string index: 1 type: java.lang.String

  // Method descriptor #36 ()B
  // Stack: 3, Locals: 1
  public byte byteValue();
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 8]
      Local variable table:
        [pc: 0, pc: 10] local: this index: 0 type: java.lang.Integer

  // Method descriptor #38 (Ljava/lang/Integer;)I
  // Stack: 3, Locals: 2
  public int compareTo(java.lang.Integer object);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 9]
      Local variable table:
        [pc: 0, pc: 10] local: this index: 0 type: java.lang.Integer
        [pc: 0, pc: 10] local: object index: 1 type: java.lang.Integer

  // Method descriptor #41 (Ljava/lang/String;)Ljava/lang/Integer;
  // Stack: 3, Locals: 1
  public static java.lang.Integer decode(java.lang.String string) throws java.lang.NumberFormatException;
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 10]
      Local variable table:
        [pc: 0, pc: 10] local: string index: 0 type: java.lang.String

  // Method descriptor #43 ()D
  // Stack: 3, Locals: 1
  public double doubleValue();
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 11]
      Local variable table:
        [pc: 0, pc: 10] local: this index: 0 type: java.lang.Integer

  // Method descriptor #45 (Ljava/lang/Object;)Z
  // Stack: 3, Locals: 2
  public boolean equals(java.lang.Object o);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 12]
      Local variable table:
        [pc: 0, pc: 10] local: this index: 0 type: java.lang.Integer
        [pc: 0, pc: 10] local: o index: 1 type: java.lang.Object

  // Method descriptor #49 ()F
  // Stack: 3, Locals: 1
  public float floatValue();
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 13]
      Local variable table:
        [pc: 0, pc: 10] local: this index: 0 type: java.lang.Integer

  // Method descriptor #41 (Ljava/lang/String;)Ljava/lang/Integer;
  // Stack: 3, Locals: 1
  public static java.lang.Integer getInteger(java.lang.String string);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 14]
      Local variable table:
        [pc: 0, pc: 10] local: string index: 0 type: java.lang.String

  // Method descriptor #51 (Ljava/lang/String;I)Ljava/lang/Integer;
  // Stack: 3, Locals: 2
  public static java.lang.Integer getInteger(java.lang.String string, int defaultValue);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 15]
      Local variable table:
        [pc: 0, pc: 10] local: string index: 0 type: java.lang.String
        [pc: 0, pc: 10] local: defaultValue index: 1 type: int

  // Method descriptor #53 (Ljava/lang/String;Ljava/lang/Integer;)Ljava/lang/Integer;
  // Stack: 3, Locals: 2
  public static java.lang.Integer getInteger(java.lang.String string, java.lang.Integer defaultValue);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 16]
      Local variable table:
        [pc: 0, pc: 10] local: string index: 0 type: java.lang.String
        [pc: 0, pc: 10] local: defaultValue index: 1 type: java.lang.Integer

  // Method descriptor #55 ()I
  // Stack: 3, Locals: 1
  public int hashCode();
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 17]
      Local variable table:
        [pc: 0, pc: 10] local: this index: 0 type: java.lang.Integer

  // Method descriptor #55 ()I
  // Stack: 3, Locals: 1
  public int intValue();
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 18]
      Local variable table:
        [pc: 0, pc: 10] local: this index: 0 type: java.lang.Integer

  // Method descriptor #58 ()J
  // Stack: 3, Locals: 1
  public long longValue();
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 19]
      Local variable table:
        [pc: 0, pc: 10] local: this index: 0 type: java.lang.Integer

  // Method descriptor #60 (Ljava/lang/String;)I
  // Stack: 3, Locals: 1
  public static int parseInt(java.lang.String string) throws java.lang.NumberFormatException;
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 20]
      Local variable table:
        [pc: 0, pc: 10] local: string index: 0 type: java.lang.String

  // Method descriptor #61 (Ljava/lang/String;I)I
  // Stack: 3, Locals: 2
  public static int parseInt(java.lang.String string, int radix) throws java.lang.NumberFormatException;
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 21]
      Local variable table:
        [pc: 0, pc: 10] local: string index: 0 type: java.lang.String
        [pc: 0, pc: 10] local: radix index: 1 type: int

  // Method descriptor #64 ()S
  // Stack: 3, Locals: 1
  public short shortValue();
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 22]
      Local variable table:
        [pc: 0, pc: 10] local: this index: 0 type: java.lang.Integer

  // Method descriptor #66 (I)Ljava/lang/String;
  // Stack: 3, Locals: 1
  public static java.lang.String toBinaryString(int i);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 23]
      Local variable table:
        [pc: 0, pc: 10] local: i index: 0 type: int

  // Method descriptor #66 (I)Ljava/lang/String;
  // Stack: 3, Locals: 1
  public static java.lang.String toHexString(int i);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 24]
      Local variable table:
        [pc: 0, pc: 10] local: i index: 0 type: int

  // Method descriptor #66 (I)Ljava/lang/String;
  // Stack: 3, Locals: 1
  public static java.lang.String toOctalString(int i);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 25]
      Local variable table:
        [pc: 0, pc: 10] local: i index: 0 type: int

  // Method descriptor #71 ()Ljava/lang/String;
  // Stack: 3, Locals: 1
  public java.lang.String toString();
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 26]
      Local variable table:
        [pc: 0, pc: 10] local: this index: 0 type: java.lang.Integer

  // Method descriptor #66 (I)Ljava/lang/String;
  // Stack: 3, Locals: 1
  public static java.lang.String toString(int i);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 27]
      Local variable table:
        [pc: 0, pc: 10] local: i index: 0 type: int

  // Method descriptor #72 (II)Ljava/lang/String;
  // Stack: 3, Locals: 2
  public static java.lang.String toString(int i, int radix);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 28]
      Local variable table:
        [pc: 0, pc: 10] local: i index: 0 type: int
        [pc: 0, pc: 10] local: radix index: 1 type: int

  // Method descriptor #41 (Ljava/lang/String;)Ljava/lang/Integer;
  // Stack: 3, Locals: 1
  public static java.lang.Integer valueOf(java.lang.String string) throws java.lang.NumberFormatException;
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 29]
      Local variable table:
        [pc: 0, pc: 10] local: string index: 0 type: java.lang.String

  // Method descriptor #51 (Ljava/lang/String;I)Ljava/lang/Integer;
  // Stack: 3, Locals: 2
  public static java.lang.Integer valueOf(java.lang.String string, int radix) throws java.lang.NumberFormatException;
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 30]
      Local variable table:
        [pc: 0, pc: 10] local: string index: 0 type: java.lang.String
        [pc: 0, pc: 10] local: radix index: 1 type: int

  // Method descriptor #75 (I)I
  // Stack: 3, Locals: 1
  public static int highestOneBit(int i);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 31]
      Local variable table:
        [pc: 0, pc: 10] local: i index: 0 type: int

  // Method descriptor #75 (I)I
  // Stack: 3, Locals: 1
  public static int lowestOneBit(int i);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 32]
      Local variable table:
        [pc: 0, pc: 10] local: i index: 0 type: int

  // Method descriptor #75 (I)I
  // Stack: 3, Locals: 1
  public static int numberOfLeadingZeros(int i);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 33]
      Local variable table:
        [pc: 0, pc: 10] local: i index: 0 type: int

  // Method descriptor #75 (I)I
  // Stack: 3, Locals: 1
  public static int numberOfTrailingZeros(int i);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 34]
      Local variable table:
        [pc: 0, pc: 10] local: i index: 0 type: int

  // Method descriptor #75 (I)I
  // Stack: 3, Locals: 1
  public static int bitCount(int i);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 35]
      Local variable table:
        [pc: 0, pc: 10] local: i index: 0 type: int

  // Method descriptor #81 (II)I
  // Stack: 3, Locals: 2
  public static int rotateLeft(int i, int distance);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 36]
      Local variable table:
        [pc: 0, pc: 10] local: i index: 0 type: int
        [pc: 0, pc: 10] local: distance index: 1 type: int

  // Method descriptor #81 (II)I
  // Stack: 3, Locals: 2
  public static int rotateRight(int i, int distance);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 37]
      Local variable table:
        [pc: 0, pc: 10] local: i index: 0 type: int
        [pc: 0, pc: 10] local: distance index: 1 type: int

  // Method descriptor #75 (I)I
  // Stack: 3, Locals: 1
  public static int reverseBytes(int i);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 38]
      Local variable table:
        [pc: 0, pc: 10] local: i index: 0 type: int

  // Method descriptor #75 (I)I
  // Stack: 3, Locals: 1
  public static int reverse(int i);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 39]
      Local variable table:
        [pc: 0, pc: 10] local: i index: 0 type: int

  // Method descriptor #75 (I)I
  // Stack: 3, Locals: 1
  public static int signum(int i);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 40]
      Local variable table:
        [pc: 0, pc: 10] local: i index: 0 type: int

  // Method descriptor #87 (I)Ljava/lang/Integer;
  // Stack: 3, Locals: 1
  public static java.lang.Integer valueOf(int i);
     0  new java.lang.RuntimeException [2]
     3  dup
     4  ldc <String "Stub!"> [3]
     6  invokespecial java.lang.RuntimeException(java.lang.String) [4]
     9  athrow
      Line numbers:
        [pc: 0, line: 41]
      Local variable table:
        [pc: 0, pc: 10] local: i index: 0 type: int

  // Method descriptor #88 (Ljava/lang/Object;)I
  // Stack: 2, Locals: 2
  public bridge synthetic int compareTo(java.lang.Object x0);
    0  aload_0 [this]
    1  aload_1 [x0]
    2  checkcast java.lang.Integer [5]
    5  invokevirtual java.lang.Integer.compareTo(java.lang.Integer) : int [6]
    8  ireturn
      Line numbers:
        [pc: 0, line: 2]
      Local variable table:
        [pc: 0, pc: 9] local: this index: 0 type: java.lang.Integer
        [pc: 0, pc: 9] local: x0 index: 1 type: java.lang.Object

  // Method descriptor #91 ()V
  // Stack: 1, Locals: 0
  static {};
    0  aconst_null
    1  putstatic java.lang.Integer.TYPE : java.lang.Class [7]
    4  return
      Line numbers:
        [pc: 0, line: 47]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T06:50:02.223

试试这种方式：

> ```
>  if(getName.getText.toString().equals("") || getName.getText().toString().length()<=2 || getName.getText().toString().equals(null) || getName.getText().toString().trim().length()<1)
>                     {
>                         NameWarning.setText("Please Enter Your Name Correctly");
>                     }
>                    .................. 
> ```

也用于`.getText().toString()`您的第一个 if 条件。

# ios - 如何使放置在 UIView 框架之外的 UIView 的 SubView 具有交互性？

> ID：14422323
> 
> 赞同：2
> 
> 时间：2013-01-20T06:40:27.307
> 
> 标签：ios, uiview, uibutton

我已将 a 添加`UIView`到视图控制器的视图中。说：

```
CGRect paneRect = {10.0f, 10.0f, 300.0f, 50.0f};
UIView *pane = [[UIView alloc] initWithFrame:paneRect];
pane.backgroundColor = [UIColor greenColor];
pane.userInteractionEnabled = YES;
pane.clipsToBounds = NO;
[self.view addSubview:pane]; 
```

然后我添加了一个 UIButton 到`pane`：

```
CGRect testRect = {10.0f, 25.0f, pane.frame.size.width - 20.0f, 50.0f};
UIButton *test = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[test setTitle:@"test" forState:UIControlStateNormal];
[test setFrame:testRect];
[pane addSubview:test]; 
```

现在“测试”按钮的一半在窗格内，另一半不在。上半部分是交互式的，对触摸有反应，但下半部分不是。

![在此处输入图像描述](../Images/a73e1b9f50361c7f842736c38ab06851.png)

是否有可能使整个“测试”按钮交互和可触摸而不是它的一半？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T06:53:16.070

就这样做

```
CGRect paneRect = {10.0f, 10.0f, 300.0f, 50.0f};
UIView *pane = [[UIView alloc] initWithFrame:paneRect];
pane.backgroundColor = [UIColor greenColor];
pane.userInteractionEnabled = NO;
pane.clipsToBounds = NO;
[self.view addSubview:pane];

CGRect testRect = {10.0f, 25.0f, pane.frame.size.width - 20.0f, 50.0f};
UIButton *test = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[test setTitle:@"test" forState:UIControlStateNormal];
test.userInteractionEnabled = YES;
[test setFrame:testRect];
[pane addSubview:test]; 
```

对于 UIButton 的操作，只需添加

```
[test addTarget:self action:@selector(processButtonCLick) forControlEvents:UIControlEventTouchUpInside]; 
```

如果要在窗格的 uibutton 中心添加

```
 test.center =pane.center; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T07:03:28.590

如果你真的想让这些观点相互一致，那么你可以做这样的事情

```
CGRect mainViewRect = {10.0f, 10.0f, 300.0f, 75.0f};
UIView *mainView = [[UIView alloc] initWithFrame:mainViewRect];
mainView.backgroundColor = [UIColor clearColor];
mainView.userInteractionEnabled = YES;
[self.view addSubview:mainView];

CGRect paneRect = {0.0f, 0.0f, 300.0f, 50.0f};
UIView *pane = [[UIView alloc] initWithFrame:paneRect];
pane.backgroundColor = [UIColor greenColor];
pane.userInteractionEnabled = YES;
pane.clipsToBounds = NO;
[mainView addSubview:pane];

CGRect testRect = {10.0f, 25.0f, pane.frame.size.width - 20.0f, 50.0f};
UIButton *test = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[test setTitle:@"test" forState:UIControlStateNormal];
[test setFrame:testRect];
[mainView addSubview:test]; 
```

# grails - Grails：如何将位置上传到本地主机？

> ID：14422325
> 
> 赞同：0
> 
> 时间：2013-01-20T06:40:56.440
> 
> 标签：grails, upload, localhost

如何设置 Grails 上传位置 localhost？

```
f = request.getFile('Filedata')
if(!f.empty) {
    f.transferTo( new File("http://localhost/uploads" + File.separatorChar + f.getOriginalFilename()))
} 
```

当我运行这段代码时，我得到一个错误：

> （文件名、目录名或卷标语法不正确）。
> Stacktrace 如下： 消息：http:\localhost\uploads\images.jpg（
> 文件名、目录名或卷标语法不正确）

但是当我指定“c:/xampp/htdocs/uploads/”时，它正在工作。怎么了？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:31:00.803

无法像这样传输文件。文件数据需要保存在文件系统的物理位置。错误消息清楚地解释了这一点。“http://localhost”不是文件系统，而是本地虚拟主机。“c:/xampp/htdocs/uploads/”是一个真实的位置，所以可以工作！

所以你应该将文件保存到挂载到的目录中

> `http://localhost/uploads`

挂载点。

# android - 在 Jenkins 中自动构建 Actionbarsherlock 出错

> ID：14422328
> 
> 赞同：4
> 
> 时间：2013-01-20T06:42:16.567
> 
> 标签：android, jenkins, actionbarsherlock

我有几个图书馆项目。

1.  动作条夏洛克
2.  九老安卓
3.  libCommon1
4.  libCommon2

libCommon2 参考 ActionBarShelock、NineOldAndroid 和 libCommon1。

而我的MainGUI项目是入口项目，只引用了libCommon2。

我将我的 Jenkins 配置为按以下顺序构建这些项目：

1.  动作栏Shelock
2.  九老安卓
3.  libCommon1
4.  libCommon2
5.  主界面

当我尝试构建项目时。前三个项目构建成功，到了libCommon2，有几个错误指向ActionBarShelock，关于字段重定义。

以下是错误：

* * *

```
-code-gen:
[mergemanifest] Merging AndroidManifest files into one.
[mergemanifest] Manifest merger disabled. Using project manifest only.

 [echo] Handling aidl files..
 [aidl] No AIDL files to compile.
 [echo] ----------
 [echo] Handling RenderScript files...
 [renderscript] No RenderScript files to compile.
 [echo] ----------
 [echo] Handling Resources...
 [aapt] Generating resource IDs...
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:4: error: Attribute "titleTextStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:5: error: Attribute "subtitleTextStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:6: error: Attribute "background" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:7: error: Attribute "backgroundSplit" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:8: error: Attribute "height" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:9: error: Attribute "divider" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:17: error: Attribute "actionBarTabStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:18: error: Attribute "actionBarTabBarStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:19: error: Attribute "actionBarTabTextStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:20: error: Attribute "actionOverflowButtonStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:22: error: Attribute "actionBarStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:27: error: Attribute "actionBarSplitStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:35: error: Attribute "actionBarWidgetTheme" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:38: error: Attribute "actionBarSize" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:42: error: Attribute "actionBarDivider" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:44: error: Attribute "actionBarItemBackground" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:47: error: Attribute "actionMenuTextAppearance" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:49: error: Attribute "actionMenuTextColor" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:55: error: Attribute "actionModeStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:56: error: Attribute "actionModeCloseButtonStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:58: error: Attribute "actionModeBackground" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:60: error: Attribute "actionModeSplitBackground" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:62: error: Attribute "actionModeCloseDrawable" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:64: error: Attribute "actionModeShareDrawable" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:67: error: Attribute "actionModePopupWindowStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:75: error: Attribute "buttonStyleSmall" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:81: error: Attribute "windowContentOverlay" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:84: error: Attribute "textAppearanceLargePopupMenu" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:87: error: Attribute "textAppearanceSmallPopupMenu" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:91: error: Attribute "textAppearanceSmall" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:93: error: Attribute "textColorPrimary" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:94: error: Attribute "textColorPrimaryDisableOnly" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:95: error: Attribute "textColorPrimaryInverse" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:97: error: Attribute "spinnerItemStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:98: error: Attribute "spinnerDropDownItemStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:106: error: Attribute "listPreferredItemHeightSmall" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:109: error: Attribute "listPreferredItemPaddingLeft" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:111: error: Attribute "listPreferredItemPaddingRight" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:114: error: Attribute "textAppearanceListItemSmall" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:117: error: Attribute "windowMinWidthMajor" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:118: error: Attribute "windowMinWidthMinor" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:123: error: Attribute "dividerVertical" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:125: error: Attribute "actionDropDownStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:126: error: Attribute "actionButtonStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:127: error: Attribute "homeAsUpIndicator" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:128: error: Attribute "dropDownListViewStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:129: error: Attribute "popupMenuStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:130: error: Attribute "dropdownListPreferredItemHeight" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:131: error: Attribute "actionSpinnerItemStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:132: error: Attribute "windowNoTitle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:133: error: Attribute "windowActionBar" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:134: error: Attribute "windowActionBarOverlay" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:135: error: Attribute "windowActionModeOverlay" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:136: error: Attribute "windowSplitActionBar" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:139: error: Attribute "listPopupWindowStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:143: error: Attribute "activityChooserViewStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:145: error: Attribute "activatedBackgroundIndicator" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:148: error: Attribute "absForceOverflow" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:157: error: Attribute "navigationMode" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:166: error: Attribute "displayOptions" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:175: error: Attribute "title" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:177: error: Attribute "subtitle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:183: error: Attribute "icon" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:185: error: Attribute "logo" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:191: error: Attribute "backgroundStacked" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:195: error: Attribute "customNavigationLayout" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:199: error: Attribute "homeLayout" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:201: error: Attribute "progressBarStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:203: error: Attribute "indeterminateProgressStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:205: error: Attribute "progressBarPadding" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:208: error: Attribute "itemPadding" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:227: error: Attribute "itemTextAppearance" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:229: error: Attribute "horizontalDivider" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:231: error: Attribute "verticalDivider" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:233: error: Attribute "headerBackground" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:235: error: Attribute "itemBackground" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:237: error: Attribute "windowAnimationStyle" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:239: error: Attribute "itemIconDisabledAlpha" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:241: error: Attribute "preserveIconSpacing" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:250: error: Attribute "initialActivityCount" has already been defined
 [aapt] /var/lib/jenkins/jobs/Vinson_libactionbarsherlock/workspace/res/values/abs__attrs.xml:257: error: Attribute "expandActivityOverflowButtonDrawable" has already been defined 
```

* * *

我不确定它是来自 ActionBarShelock 还是来自我的 Jenkins 的配置。如果有人对这些错误有任何想法，请提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-25T17:29:30.963

我偶然发现了一个类似的问题。另一个项目（在我的例子中是 aviary.com sdk）似乎在第 262 行的 aviary_attrs.xml 中具有相同的 attr 名称。也许重命名它们可以解决问题？

# ios - 调整 UIImage 大小的问题，总是得到空图像

> ID：14422329
> 
> 赞同：0
> 
> 时间：2013-01-20T06:42:24.640
> 
> 标签：ios, resize, uiimage

我使用了非常简单的方法。我创建了一个基于位图的图像上下文并绘制了缩放的图像。但我总是得到空图像。

```
- (UIImage *)resizeImage:(UIImage *)image to:(CGSize)newSize
{
    UIGraphicsBeginImageContextWithOptions(newSize, NO, 1.0);
    [image drawInRect:CGRectMake(0.0, 0.0, newSize.width, newSize.height)];
    UIImage * scaledImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return scaledImage;
} 
```

任何提示哪里错了？我尝试更改坐标系。它仍然不起作用。

```
CGContextTranslateCTM(UIGraphicsGetCurrentContext(), 0.0, newSize.height);
CGContextScaleCTM(UIGraphicsGetCurrentContext(), 1.0, -1.0); 
```

# jsf-2 - 如何从bean设置JSF组件的styleclass属性？

> ID：14422330
> 
> 赞同：0
> 
> 时间：2013-01-20T06:42:27.737
> 
> 标签：jsf-2, icefaces-3

我正在使用 Icefaces 3.2。我想知道如何从支持 bean 方法重置组件的 styleClass 属性，例如 textarea。

用例：我有一个`ace:textAreaEntry`在支持 bean 中有一个验证器方法。在这个支持 bean 中，我正在做一些验证。如果验证失败，我希望将特定的 CSS 类应用于组件。所以我想重置 styleclass 属性的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T07:08:09.703

您可以`styleClass`有条件地设置，像这样

```
<ace:textAreaEntry 
    styleClass="#{facesContext.validationFailed?'failedClass':'validClass'}"/> 
```

或仅分配失败课程，否则根本不分配课程

```
<ace:textAreaEntry 
    styleClass="#{facesContext.validationFailed?'failedClass':''}"/> 
```

如果您手动设置要在页面中显示的消息，您可以检查是否`facesContext.messageList`为空，如下所示

```
<ace:textAreaEntry 
    styleClass="#{(not empty facesContext.messageList)?'filedClass':'validClass'}"/> 
```

* * *

如果你想测试一些特定的内部逻辑验证，你可以检查一些布尔值，例如

```
<ace:textAreaEntry 
    styleClass="#{(myBean.someComponentFailed)?'filedClass':'validClass'}"/> 
```

`someComponentFailed`验证失败时您设置为真/假的某些属性在哪里

# python - MANIFEST.in、package_data 和 data_files 澄清？

> ID：14422340
> 
> 赞同：31
> 
> 时间：2013-01-20T06:45:04.583
> 
> 标签：python, setuptools, distutils

我正在尝试创建一个 Python 包，并且我有一个这样的目录结构：

```
mypkg/
├── __init__.py
├── module1
│   ├── x.py
│   ├── y.py
│   └── z.txt
└── module2
    ├── a.py
    └── b.py 
```

然后我添加了所有文件`MANIFEST.in`，当我检查创建的存档时，它包含所有文件。

当我`python setup.py install`在`dist-packages/mypkg/module1`. 我只看到 Python 文件而不是`z.txt`.

我有`z.txt`两个`MANIFEST.in`和`setup.py`：

```
setup (
    packages = [
        'mypkg',
        'mypkg.module1',
        'mypkg.module2',
    ],
    package_data = {
        'mypkg': ['module1/z.txt']
    },
    include_package_data = True, 
    ...
) 
```

我也尝试添加文件，`data_files`但是在`/usr/local`. 我想将它保存在源代码目录中，因为代码使用该数据。

我已经阅读了下面列出的帖子，但我一直对什么是之后保持`z.txt`在正确位置的正确方法感到困惑`setup.py install`。

*   [MANIFEST.in 在“python setup.py install”上被忽略 - 没有安装数据文件？](https://stackoverflow.com/questions/3596979/manifest-in-ignored-on-python-setup-py-install-no-data-files-installed/3597263#3597263)
*   [使用 setup.py 将数据文件安装到站点包中](https://stackoverflow.com/questions/9689816/installing-data-files-into-site-packages-with-setup-py)
*   [http://blog.codekills.net/2011/07/15/lies,-more-lies-and-python-packaging-documentation-on--package_data-/](http://blog.codekills.net/2011/07/15/lies,-more-lies-and-python-packaging-documentation-on--package_data-/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-20T14:36:54.527

尝试使用 setuptools 而不是 distutils。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T18:21:16.063

更新：当我开始使用 setuptools 而不是 distutils.core 时，它​​得到了修复。我认为 distutils 不同意清单是一些问题，而 setuptools 工作时没有对代码进行任何更改。我建议将来使用 setuptools。使用[此处的链接：设置工具 - 开发人员指南](http://peak.telecommunity.com/DevCenter/setuptools#developer-s-guide)

# java - 为什么我不能在 Java 中的数组上倒数？

> ID：14422345
> 
> 赞同：0
> 
> 时间：2013-01-20T06:47:11.307
> 
> 标签：java

我目前正在尝试获取数组的元素并在 Java 中反转其顺序。为什么我不能通过使用 for 循环向下计数而不更改数组中元素的实际顺序来打印数组的元素？

```
private void printArray(int[] array) {
    for (int i = array.length; i >= 0; i--){
        println(array[i]);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T06:49:36.423

数组索引从 开始`0`和结束`array.length - 1`。在这里，您会得到一个，`ArrayIndexOutOfBOundsException`因为您的第一次读取超出了数组的末尾 ( `int i = array.length;`)。

做：

```
for (int i = array.length - 1; i >= 0; i--)
    println(array[i]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T06:49:27.513

尝试

```
for (int i = array.length - 1; -1 != i; --i){ 
```

由于索引从 0 开始

# ruby - RSpec 定位资源路径

> ID：14422351
> 
> 赞同：3
> 
> 时间：2013-01-20T06:48:23.660
> 
> 标签：ruby, rspec, rspec2

我有一个小项目（非 Rails），我正在使用 RSpec 进行测试。为了加载我正在使用的模型：

```
require_relative "../lib/checkout" 
```

但是我在加载配置文件时遇到了问题，例如，在以下情况下，测试不再找到我的“items.csv”：

```
CSV.foreach("items.csv") do |row| 
```

请注意，仅当从规范目录运行规范时才会出现问题，即：

```
rspec checkout_spec.rb 
```

从项目根目录运行它很好：

```
rspec spec/checkout_spec.rb 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T07:43:58.753

`CSV.foreach`使用当前目录查找文件。您可能应该使用`File.expand_path`获取绝对路径`items.csv`来避免此问题。

编辑添加示例

假设文件是​​ at `root/items.csv`，并且带有这段代码的 ruby​​ 文件是 at `root/lib/file.rb`，你可以写

```
path = File.expand_path File.join(File.dirname(__FILE__), '..', 'items.csv')
CSV.foreach path do |row|
  # rest of code... 
```

# android - 数据库更新后刷新 Listfragment 中的列表视图

> ID：14422352
> 
> 赞同：1
> 
> 时间：2013-01-20T06:48:55.640
> 
> 标签：android, android-listview

我将相同的活动用于保存和编辑目的。我有一个列表视图。

在列表片段中我有

```
@Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        if(dbHelper != null){
            Item item = (Item) this.getListAdapter().getItem(position);
            Intent intent = new Intent(getActivity(), SaveEditActivity.class);
            intent.putExtra("Update_Item", item);
            startActivity(intent);
        }
    } 
```

现在在 SaveEditActivity 我有

```
@Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(....);
        Intent intent = getIntent();
        if(intent.hasExtra("Update_Item")){
            Item item = (Item) intent.getSerializableExtra("Update_Item");
            if(item != null){
                this.isEdit = true;
                this.editedItem = item;
                setItemData(item); // set the data in activity
            }
        }
} 
```

现在，当用户单击保存按钮时，我检查 isEdit 标志

```
 if(isEdit == true){
        updateItem();//update
     }else{
      saveItem(); // add
     }
 } 
```

在 Update 方法中，我使用`editedItem`Object更新数据库中的项目

```
private void updateItem(){
      if(this.editedItem != null){
          dbHelper.updateItem(editedItem);
      }
    } 
```

但是我的列表视图没有用新数据刷新。

我正在使用`customAdapter`which extends `BaseAdapter`。

在 ListFragmet 中，我在 onResume() 方法中将数据加载到适配器中

```
@Override
    public void onResume() {
        super.onResume();
        dbHelper = new DatabaseHandler(getActivity());
        List<Item> existingItems = dbHelper.getItemData();
        adapter = new CustomAdapter(getActivity().getApplicationContext(), existingItems);
        if(adapter != null){
           this.setListAdapter(adapter);
           adapter.notifyDataSetChanged();
        }
    } 
```

现在，当从活动返回时，应该调用这个方法并且应该通知适配器更改？对不对？

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T07:13:25.317

您必须以某种方式通知您`ListView`数据集已更改/更新，以便它应该自行刷新。在我的一个应用程序中，我使用`Observer`接口和`Observable`类来观察数据是否发生变化。这有助于我解决这个问题。

您可以使用的想法是每次更新/保存更改的数据集，因此在这样做之后您应该调用一个名为`notifyDataSetChanged()`

```
/* don't be confuse with this method's name, Its a custom method. I
   used this name. You may use another like myAbcdMethod() :) */
private void notifyDataSetChanged() {
    setChanged();
    notifyObservers(new Boolean(true));
} 
```

`notifyDataSetChanged()`是一个私有方法，你应该在你的 DbHelper 中实现它。每次 edit.save 后，您都可以调用它。

在您的活动中，您应该使用以下内容来刷新列表：

```
 @Override
    public void update(Observable observable, Object data) {
        isDataChanged = (Boolean) data;
    }

    @Override
    protected void onRestart() {
        super.onRestart();
        if (isDataChanged) {
            adapter.clear();
            adapter.refresh(screenNames.toArrayList());
            adapter.notifyDataSetChanged();
            isDataChanged = false;
        }
    } 
```

这适用于单个活动应用程序到多个活动应用程序。

# compiler-construction - 关于编译器的问题

> ID：14422353
> 
> 赞同：1
> 
> 时间：2013-01-20T06:49:05.477
> 
> 标签：compiler-construction

当编译器以文本形式编译我的代码时，它会将文本代码转换为低级代码，在代码块中的 GCC 的情况下，汇编。

1.  我可以直接在我的机器上运行这个编译的程序，而不需要 windows 操作系统吗？

2.  .exe 是带有内置汇编指令的编译文件吗？

3.  如果windows已经是一个**巨大的汇编程序，它如何运行汇编程序**？

4.  如果汇编语言程序是字节码，为什么当我用 PIC 刻录机录制 PIC 时，我会向它写入 hexacode？

5.  x64 架构是具有新指令的新架构，但仍然具有 x86 指令？对或错？

6.  如何读取编译器生成的低级代码？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T07:18:34.170

虽然我同意 templatetypedef 的评论，即这应该分成更小的问题，但我会尽力在此处为您的每个问题提供一些指示。

> 我可以直接在我的机器上运行这个编译的程序，而不需要 windows 操作系统吗？

从技术上讲，是的，但这将涉及修改正常的启动过程。这与您的第三个问题有关。Windows 本身是一种应用程序加载器，它是一种旨在启动其他应用程序（并做其他有用的事情）的应用程序。目前，当您的计算机启动时，它的第一条指令可能是`JUMP`告诉计算机“跳转到”您的操作系统的内存位置并开始其初始化的指令。从此，操作系统相对独立。

> .exe 是带有内置汇编指令的编译文件吗？

`.exe`文件只是一种可执行文件。其他包括`ELF`和`Mach-O`以及其他一系列。文件`.exe`就像任何其他文件一样，除了它的“标题”告诉机器以下数据是机器可执行指令的形式（1 和 0）。不要将汇编语言与机器指令混淆。`mov %eax, %ebx`机器不会读取类似的汇编指令。首先它通过一个`assmebler`并转换为 1 和 0。

> 如果汇编语言程序是字节码，为什么当我用 PIC 刻录机录制 PIC 时，我会向它写入 hexacode？

如上。`Bytecode`是一个有很多含义的词。十六进制只是表示二进制的另一种（较短）方式。在一天结束时，一切都归结为二进制。

> x64 架构是具有新指令的新架构，但仍然具有 x86 指令？对或错？

真的。英特尔尽最大努力保持完全的向后兼容性。这不一定适用于操作系统。

> 如何读取编译器生成的低级代码？

低级别我假设您的意思是汇编代码，而不是 1 和 0。最常见的方法是将`-S`标志与`gcc`. 这将输出一个`.s`程序集文件而不是一个`.o`对象或`.exe(etc)`可执行文件。

如果您想了解更多关于组装的信息，这是英特尔处理器（（'x86'）和）的[上帝参考](http://download.intel.com/products/processor/manual/325462.pdf)。请注意，这是非常沉重的。您最好在 Google 上查找 Windows 或 OS X 组装教程。如果您想入门，[NASM是一个免费的多平台汇编器，不过它的语法与其他汇编器略有不同。](http://www.nasm.us)在你进行任何这些之前，我建议你学习计算机系统的基础知识——处理器是如何工作的，等等。也许首先学习一种更简单的汇编语言，比如 DLX 或 MIPS。`IA-32``x86-64`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T07:22:14.607

> 我可以直接在我的机器上运行这个编译的程序，而不需要 windows 操作系统吗？

一般来说，没有。程序几乎总是使用操作系统的 API 来执行常见的任务，因此它们不能在没有操作系统的情况下运行。此外，大多数操作系统要求可执行文件采用特定的文件格式（Windows 为“PE”，Linux 为“ELF”，OS X 为“Mach-O”等），以便它们（更准确地说loader) 可以做它想要/需要做的事情。为了运行原始机器代码，您需要一种所谓的平面二进制格式。

> .exe 是带有内置汇编指令的编译文件吗？

是的，正如我上面提到的，它还包含操作系统所需的一些元数据。

> 如果windows已经是一个巨大的汇编程序，它如何运行汇编程序？

它将其加载到适当地址的内存并跳转到其入口点。

> 如果汇编语言程序是字节码，为什么当我用 PIC 刻录机录制 PIC 时，我会向它写入 hexacode？

不，PIC（以及所有一般的微控制器）以二进制形式存储原始机器代码。文件中的十六进制表示`.hex`只是一种方便的、人类可读的数据存储形式。

> x64 架构是具有新指令的新架构，但仍然具有 x86 指令？对或错？

我会说它向后兼容 x86 并提供一些支持。它确实具有x86的指令集。

> 如何读取编译器生成的低级代码？

也许通过在文本编辑器中打开它？这是一个太模糊的问题。但是，如果您想问如何查看生成的人类可读的汇编代码，请查阅编译器的手册。对于`gcc`and `clang`，这通常是使用`-S`编译器标志来实现的。

# javascript - 如何使用 jquery 选择 DOM 元素

> ID：14422355
> 
> 赞同：1
> 
> 时间：2013-01-20T06:49:18.260
> 
> 标签：javascript, jquery, canvas

我在 javascript 中有一个函数可以在随机画布上绘制图像

我使用 javascript 默认选择器选择我的`img`源，然后在所需的画布上绘制此图像的一部分

我想使用 jquery 来选择我的 img 对象，但是当我替换`var img =document ...`为 时`var img=$("#karajan")`，该函数不会在画布上绘制图像

我也尝试过`var img=$("#karajan").text() .... $("#karajan").val() .... $("#karajan").html()`，但没有一个不起作用

```
 function drawImage() {

        var img = document.getElementById("karajan");
        var arr = getRandomArray();
        for (var i = 0; i < 3; i++) {
            for (var j = 0; j < 3; j++) {
                var dx = ((j == 0) ? 0 : j * 150 + j * 10);
                var dy = ((i == 0) ? 0 : i * 150 + i * 10);
                var k = i * 3 + j;
                if (k > 7) continue;

                getCanvas(arr[k] - 1).drawImage(img, j * 150, i * 150, 150, 150, 0, 0, 150, 150);

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T07:06:24.663

你可以只使用`$("#karajan").get(0)`. 或`$("#karajan")[0]`。

# python - 如何让我的 python 脚本以 html 显示，并接受来自网络表单的输入以检查脚本

> ID：14422356
> 
> 赞同：0
> 
> 时间：2013-01-20T06:49:27.047
> 
> 标签：python, html

我四处寻找这个问题的答案，但我找不到一个对我来说似乎很清楚的答案。基本上，我正在编写一个询问用户问题的 python 脚本。根据他们的回答（和一些 if/else 语句），脚本将返回一个字符串（如果我能弄清楚的话，还会返回一个图像）。基本上我想要一个网页，显示我在 python 中打印的问题字符串，并有一个接受答案的表单，然后根据脚本检查答案，并返回结果。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T07:00:21.400

您需要某种来自 Python 的 Web 服务器来支持这一点。您可以从简单而平凡的[SimpleHTTPServer](http://docs.python.org/2/library/simplehttpserver.html)开始，它*可以*完美地满足您的需求，到更健壮的东西，例如[Flask](http://flask.pocoo.org/)。还有其他的：

*   [姜戈](https://www.djangoproject.com/)
*   [樱桃派](http://cherrypy.org)
*   [网页.py](http://webpy.org/)

您还需要注意模板，它通常以[Jinja](http://jinja.pocoo.org/2/)、[Genshi](http://genshi.edgewall.org/)或[Mako](http://www.makotemplates.org/)的形式出现，它们与所有这些兼容，除了 web.py （我认为）。

# c# - 如何翻译这个 Queryable linq 函数

> ID：14422366
> 
> 赞同：1
> 
> 时间：2013-01-20T06:50:16.133
> 
> 标签：c#, linq, entity-framework, entity-framework-4

我正在努力尝试在正确的 T-SQL 函数中生成这个 LINQ 函数。

请检查以下句子：

```
// determine the max count of exams applied by students
IQueryable query = (from at in Database.Current.AnsweredTests
                    where at.TestId == id
                    group at by at.StudentId into s
                    select s.Count()).Max(); 
```

正如你所看到的，这个函数在语法上是错误的，因为`Max`扩展返回`int`. 所以我想要完成的是生成一个正确的 T-SQL。

像这样的东西：

```
MAX(SELECT x.COUNT()
FROM...
GROUP BY StudentId) 
```

我这样做只是因为我想要一个好的表现，那就是表现不佳。所以我的问题是我怎样才能用聚合函数写一个正确的 LINQ 语句`MAX`和`COUNT`。

更新：

```
SELECT [GroupBy1].[A1] AS [C1]
FROM ( SELECT 
    [Extent1].[StudentId] AS [K1], 
    COUNT(1) AS [A1]
    FROM [dbo].[AnsweredTests] AS [Extent1]
    WHERE  CAST( [Extent1].[TestId] AS int) = @p__linq__0
    GROUP BY [Extent1].[StudentId]
)  AS [GroupBy1] 
```

这就是生成 IQueryable 的原因（当然，如果我删除了最大扩展名）。我想知道是否有办法在 T-SQL 查询中包含聚合函数 MAX 以提高服务器端的性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T06:58:45.460

您还可以通过以下方式表达您的查询：

```
SELECT TOP 1 COUNT(*)
FROM AnsweredTests
WHERE TestId = @id
GROUP BY StudentId
ORDER BY COUNT(*) DESC 
```

按照这个逻辑，这（未经测试）应该是您正在寻找的：

```
var result = (from at in Database.Current.AnsweredTests
              where at.TestId == id
              group at by at.StudentId into s
              orderby s.Count() descending
              select s.Count()).First() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T07:33:01.480

你可以先做`ORDER BY DESCENDING`然后采取：

```
var Max = (from at in Database.Current.AnsweredTests
           where at.TestId == id
           group at by at.StudentId into s
           select new { Count = s.Count() }).OrderByDescending(o=>o.Count).First(); 
```

# wcf - IErrorHandler 接口让我感到困惑

> ID：14422367
> 
> 赞同：1
> 
> 时间：2013-01-20T06:50:21.820
> 
> 标签：wcf, exception-handling, soapfault, ierrorhandler

我创建了一个实现 IErrorHandler 和 IServiceBehavior 的类。我将行为添加到我的 ServiceHost 并运行它。

我开始尝试了解 IErrorHandler 的原因是因为我不得不将所有与回调通道接口的服务代码包装在 try catch 语句中，并且想知道是否有一种全局方法来捕获异常。

好吧，从我在 StackOverflow 上读到的内容，我看到这确实是我想要的东西。

然而，在执行过程中，这让我非常困惑。如果我有一个执行以下操作的合同方法......

```
 Dictionary<IChatCallback, string> userChannels = new Dictionary<IChatCallback, string>();

    public void SendMessage(string message)
    {
        IChatCallback callback = OperationContext.Current.GetCallbackChannel<IChatCallback>();
        string senderName = userChannels[callback];

        SendMessageToAllUsers(message, senderName);
    }

    public void SendMessageToAllUsers(string message, string sender)
    {
        foreach (var userChannel in userChannels.Keys)
        {
            userChannel.ReceiveMessage(new ChatMessage(message, sender));
        }
    } 
```

如果客户端在我的服务器上并且他从地球表面掉下来并且通道出现故障，我的服务器似乎需要一段时间才能意识到通道出现故障。即使我订阅了 ICommunicationObject 的事件，服务器似乎也需要一段时间才能意识到通道出现故障。例如，如果有人正在发送消息并且有人断开连接，并且同时正在传播一条消息。

现在，我有另一种方法，基本上定期 ping 客户端以确定它们是否仍然存在，因此我可以将它们从`userChannel`字典中删除。

IErrorHandler 究竟应该如何帮助我？即使它发现错误，它似乎也不能完全帮助我的服务崩溃。因为我的服务无法以超快的速度 ping 我的客户，所以有时一条消息似乎会在上一条引发异常的消息之后立即进入（我正在测试这个）。它似乎已经处理了第一个，但是第二个抛出了另一个没有被捕获的异常，我的服务崩溃了，因为服务器试图与一个有故障的通道通信。现在，我的服务确实会清理那些故障通道，但它会定期清理。

我希望通过实现 IErrorHandler 我可以避免将所有方法包装在 try{}catch{} 块中......但似乎我仍然必须检查我是否正在与故障通道进行通信？

或者，也许我只是在不正确地使用 IErrorHandler 并认为它应该做不应该做的事情。我是否应该让我的服务实现它，并将自己作为 IServiceBehavior 注入到 Servicehost 中？然后在我的 HandleError() 方法中从我的客户列表中删除频道？这似乎有点混乱，因为我将 WCF 管道的东西放在我的服务类中，但这是我能想到的让异常代码本身从回调列表中删除通道的唯一方法。

我正在尝试大量阅读，因为我是新手，但 WCF 中的错误处理世界似乎令人生畏。

即使我尝试删除通道，因此它不会通过订阅故障事件在服务上调用，但它的工作速度不够快，并且仍然会引发服务器似乎无法从 IErrorHandler 中恢复的异常。

例如，当用户第一次连接时，我订阅了事件。

```
 IChatCallback callback = OperationContext.Current.GetCallbackChannel<IChatCallback>();
        ICommunicationObject callbackComm = (ICommunicationObject) callback;
        callbackComm.Faulted += (sender, e) =>
            {
                lock (lockObject)
                {
                    string name = userChannels[callback];
                    userChannels.Remove(callback);
                    NotifyOfUserDisconnect(name);
                }
            }; 
```

我是否只需要进入所有方法并检查通道是否关闭或出现故障，并将所有内容包装在 try/catch 块中以删除引用并通知客户？

# sql-server - SQL Server 客户端统计参数

> ID：14422368
> 
> 赞同：0
> 
> 时间：2013-01-20T06:50:24.810
> 
> 标签：sql-server, sql-server-2008, sql-server-2012

如何使用客户端统计参数，以获得更好的查询性能。我使用 SQL Server 2012。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T07:20:15.577

你不能仅仅因为这样的概念不存在而使用'client statistics parameters。有“[客户统计](http://msdn.microsoft.com/en-us/library/aa833228%28v=vs.90%29.aspx)”，也有“[参数](http://msdn.microsoft.com/en-us/library/ms189260%28v=sql.105%29.aspx)”。

要获得更好的查询性能，首先要使用[等待和队列](http://technet.microsoft.com/en-us/library/cc966413.aspx)等故障排除方法来识别瓶颈，然后采取适当的措施来消除瓶颈。

# c# - 没有 oAuth 的 Instagram 登录

> ID：14422376
> 
> 赞同：2
> 
> 时间：2013-01-20T06:52:30.407
> 
> 标签：c#, android, networking, instagram

我正在尝试再次登录 instagram，但我必须在不使用他们的 api v2 的情况下执行此操作，该 api v2 使用 oAuth 进行验证。我唯一拥有的是用于登录的用户名和密码。所以我所做的就是寻找适用于 Android 的 Instagram 应用程序，并希望 IOS 能做到这一点。

我看到它在以下网址创建了一个请求： [https ://instagr.am/api/v1/accounts/login/](https://instagr.am/api/v1/accounts/login/)

如果您直接访问该链接，您很可能会收到一条错误消息，指出无法找到该页面。经过一番谷歌搜索，我发现了一篇 2 年前的帖子，其中指出在 Useragent 中，我们必须包含字符串“Instagram”才能使其工作。

我通过伪造用户代理来做到这一点，结果如下：

```
{"status":"fail","message":"Your version of Instagram is out of date. Please upgrade your app in the Play Store to log in to Instagram."} 
```

现在，我猜我们还需要添加其他内容或其他一些标头，所以我正在寻找一种方法来获取他们的 Android 或 IOS 应用程序发送到 instagram 的请求。

所以接下来我下载了 Bluestack 并使用它在我的计算机上安装并运行了 instagram。我能够成功安装并登录它，但后来我无法使用 Charles 记录它，因为请求被发送到 https:// 服务器

我也尝试通过 Wireshark 来获取它，但不幸的是，我在使用它方面没有太多经验，因此不知道它的用途。

**所以任何人都可以帮助我了解如何在不使用 oAuth 的情况下使用 C# 登录 instagram，因为我只有用户名和密码。**

**我可能会编写请求自己的最后部分，但我无法捕获发送到 instagram 的标题。**

此外，如果有任何类似 Charles/Wireshark 的东西可以捕获 Android 的网络流量，也请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T07:02:43.827

如果您可以告诉您的设备通过 USB 使用您的电脑互联网连接，您应该能够使用 Fiddler 捕获请求并查看请求标头。看起来你已经接近了，但可能只需要在你的请求中的某个地方提供一个版本号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-22T15:46:31.053

是的，你可以使用`Webview` Here you go

```
 mWebView.setWebViewClient(new WebViewClient() {

            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                UrlQuerySanitizer.ValueSanitizer sanitizer = UrlQuerySanitizer.getAllButNulLegal();
// remember to decide if you want the first or last parameter with the same name
// If you want the first call setPreferFirstRepeatedParameter(true);
                sanitizer.sanitize(url);
                String value = sanitizer.sanitize("username"); // get your value
                if(MyBridge.getUsername()!=null)username = MyBridge.getUsername();
               return  true;

            }

            @Override
            public void onPageStarted(WebView view, String url, Bitmap favicon) {
                super.onPageStarted(view, url, favicon);
//                showLoading();

                CookieManager.getInstance().removeAllCookies(null);
//                CookieManager.getInstance().flush();
                progressBar.setVisibility(View.VISIBLE);

            }

            @Override
            public void onPageFinished(WebView view, String url) {
                super.onPageFinished(view, url);

                progressBar.setVisibility(View.GONE);

                if (url.equalsIgnoreCase(mURL)) {
                    view.addJavascriptInterface(new MyBridge(InstagramOfficalLoginActivity.this), "bridge");
                    String javascript = "javascript: document.getElementsByClassName(\"_0mzm- sqdOP  L3NKy       \")[0].onclick = function() {\n" +
                            "        var username = document.getElementsByName(\"username\").value;\n" +
                            "        var password = document.getElementsByName(\"password\").value;\n" +
                            "        bridge.saveData(username, password);\n" +
                            "    };";
                    view.loadUrl(javascript);
                }

                    if (isSessionid ) {
//                        username = MyBridge.getUsername();
                        //сохранение данных пользователя
                        Logins logins = new Logins();
                        logins.setUserId(InstaUtils.getUserId());
                        logins.setUserName("");
                        logins.setProfilePic("");
                        logins.setSession_id(InstaUtils.getSessionid());
                        logins.setCooki(InstaUtils.getCookies());
                        logins.setCsrf(InstaUtils.getCsrf());

                        long id = DataObjectRepositry.dataObjectRepositry.addNewUser(logins);

                        PreferencesManager.savePref(GlobalConstant.USERNAME,username);
                        PreferencesManager.savePref(GlobalConstant.USER_ID, InstaUtils.getUserId());
                        PreferencesManager.savePref(GlobalConstant.TOKEN, InstaUtils.getSessionid());
                        PreferencesManager.savePref(GlobalConstant.PROFILE_PIC,"");

                        Intent intent = new Intent(InstagramOfficalLoginActivity.this, MainActivity.class);

                        PreferencesManager.savePref("isLogin",true);
                        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
                        intent.putExtra("user", InstaUtils.getUserId());
                        intent.putExtra("database_id",String.valueOf(id));

                        mWebView.destroy();
                        mWebView = null;
                        startActivity(intent);

                    }

            }

            @Override
            public void onLoadResource(WebView view, String url) {
                super.onLoadResource(view, url);
                progressBar.setVisibility(View.GONE);
                cookies = CookieManager.getInstance().getCookie(url);

                try {
                    String session_id = getCookie(url, "sessionid");
                    String csrftoken = getCookie(url, "csrftoken");
                    String userid = getCookie(url, "ds_user_id");
                    if (session_id != null && csrftoken != null && userid != null) {
                        isSessionid = true;
                        InstaUtils.setSessionId(session_id);
                        InstaUtils.setUserId(userid);
                        InstaUtils.setCookies(cookies);
                        InstaUtils.setCsrf(csrftoken, cookies);

                    }
                }catch (Exception e){
                    e.printStackTrace();
                }

            }

            @SuppressWarnings("deprecation")
            @Override
            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                ToastUtils.ErrorToast(InstagramOfficalLoginActivity.this, description);
            }

            @TargetApi(android.os.Build.VERSION_CODES.M)
            @Override
            public void onReceivedError(WebView view, WebResourceRequest req, WebResourceError rerr) {
                // Redirect to deprecated method, so you can use it in all SDK versions
                onReceivedError(view, rerr.getErrorCode(), rerr.getDescription().toString(), req.getUrl().toString());
            }

        });

        mWebView.loadUrl(mURL); 
```

您还可以从我的 github 个人资料下载完整的工作代码，[这](https://github.com/beNitinhere/Instagram-Profile-Downloader)是链接。

我希望它有效，谢谢:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:02:25.700

您始终可以通过[https://instagram.com/accounts/login/](https://instagram.com/accounts/login/)只有登录名\密码登录。

具有嗅探流量的能力对您没有帮助，因为他们现在签署所有消息以防止您尝试实现的目标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-11T08:26:56.810

你可以在这里找到 Instaguser 库。[https://github.com/ThinhVu/InstagramUser](https://github.com/ThinhVu/InstagramUser)

Instaguser 允许您在没有 OAuth 的情况下登录 instagram。目前，您可以更改用户信息：用户名、简历等。

# python - 将 ssh 命令转换为 python

> ID：14422378
> 
> 赞同：0
> 
> 时间：2013-01-20T06:53:05.233
> 
> 标签：python

我正在尝试将以下 ssh 命令转换为 python 代码，我能够转换为 python 但 python 代码没有给出任何输出，所以我认为我没有正确转换它，尤其是布尔“AND”逻辑..任何人都可以指出这里有什么问题？

```
ssh -p 29418 company.com gerrit query --current-patch-set --commit-message --files 'status:open project:platform/code branch:master label:Developer-Verified=1 AND label:Code-Review>=1' 
```

Python代码：-

```
with open(timedir + "/ids.txt", "wb") as file:
    check_call("ssh -p 29418 company.com "
        "gerrit query --commit-message --files --current-patch-set "
        "status:open project:platform/code branch:master label:Developer-Verified=1 AND label:Code-Review>=1 |"
        "grep refs |"
        "cut -f4 -d'/'",
            shell=True,   # need shell due to the pipes
            stdout=file)  # redirect to a file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T07:43:48.760

`>=1`可能被解释为重定向到`=1`文件，这就是 ids.txt 文件中没有输出的原因。

您在 check_call() 中使用的字符串没有引用 gerrit 的参数。将其与引用参数的第一个命令进行比较。

您可以使用`pipes.quote()`将字符串转义为 shell 的单个命令行参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T07:45:01.033

使用[Paramiko](https://github.com/paramiko/paramiko/)通过 ssh 连接

```
import paramiko
ssh = paramiko.SSHClient()
ssh.connect('127.0.0.1', username='xxx', 
    password='xxx') 
```

然后就可以使用`subprocess`python模块来执行系统调用了。

[在 Python 中调用外部命令](https://stackoverflow.com/questions/89228/calling-an-external-command-in-python)

# amazon-web-services - Elasticache 和可用区

> ID：14422379
> 
> 赞同：3
> 
> 时间：2013-01-20T06:53:10.317
> 
> 标签：amazon-web-services, amazon-ec2, amazon-elasticache

我在新加坡的 2 个可用区使用 AWS 负载平衡和多个 Web 服务器。

我现在正在寻找跨两个可用区部署 elasticache 节点，并想知道是否存在由 Web 服务器访问不同可用区的 elasticache 节点引起的延迟问题？

更新 - 实际上经过更多调查后，似乎一个 elasticache 集群只能存在于一个可用区中。因此，处理可用区中断的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T08:44:30.970

您说得对，ElasticCache 尚不支持多可用区功能。但是 AZ 之间 1ms 的低延迟通常不是什么大问题。

缓存的目的是从内存中进行长时间且频繁的 SQL 查询。这不是 300 毫秒的 SQL 查询，您可以通过单个内存查找来提供它。与 1ms 相比，网络延迟应该不是问题。

作为 ElasticCache 的缓存的第二个属性是您正在对其进行预热并使用数据库中的实时数据对其进行保温。你永远不应该期望你的缓存作为一个整体是最新的，因为后台的数据一直在变化。预计会丢失集群中的缓存节点（与大型系统中的任何其他故障一样），因为您的系统应该相当快地预热新创建的缓存节点。ElasticCache 将为您替换故障节点，但您需要用缓存数据再次填充它。

关于可用区之间的冗余，您可以查看 AWS[描述](http://aws.amazon.com/elasticache/#details)：

> 在不同的可用区设置冗余缓存集群
> 
> Amazon ElastiCache 监控您的缓存节点的运行状况，并在发生网络分区、主机硬件或软件故障时替换它们。但是，鉴于缓存的短暂性，缓存节点替换开始为空（也称为“冷”），并且根据您的工作负载模式，可能需要一些时间来重新填充数据（也称为“预热”）。此外，Amazon ElastiCache 提供的自动替换功能仅限于单个可用区。如果您的应用程序对缓存节点的故障恢复或“预热”时间很敏感，或者您希望增强对可用区级别故障的容错能力，您可能希望在不同的可用区中部署冗余 ElastiCache 集群。
> 
> 管理数据冗余的方法之一是让您的应用程序将所有缓存写入应用到这些可用区中的缓存节点。如果主可用区中的一个或多个缓存节点发生故障，您可以将读取定向到辅助可用区中的相应缓存节点，而 Amazon ElastiCache 会恢复主可用区中的缓存节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T21:40:14.500

可用区之间的延迟通常在 2ms 左右，所以不，这通常不是问题。

我真的需要更多地了解您如何使用它才能解决您问题的第二部分。由于它只是一个缓存层，因此应用程序通常只能在降级模式下运行，直到 AWS 修复问题或您进行手动干预。或者，可以将应用程序设计为自动故障转移到不同可用区中的第二个集群。发生这种情况时，缓存将不得不从持久数据存储中重建。您可以让缓存未命中发生，也可以在应用程序开始使用它之前先启动它。

# javascript - jQuery UI：模型对话框“关闭”

> ID：14422385
> 
> 赞同：0
> 
> 时间：2013-01-20T06:53:52.843
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-ui, razor

我有 2 个 Razor 视图，其中一个在 jQuery UI 对话框中加载另一个。在对话框中加载的视图中；我正在打开另一个 jQuery UI 对话框来显示一条消息。

目标是在单击消息对话框`Cancel`按钮时关闭两个对话框。

剃刀代码如下：

主视图

```
<button id="openModel" onclick="openModel()">

<div id="mainDialog" />

<script type="text/javascript">
    function openModel() {
        $('#mainDialog').dialog({
            open: function () {
                // loading "the secondary view in the model dialog"
                // url: controller-action url to load the second view
                $(this).load('url'); 
            }
        });
    }
</script> 
```

对话框视图

```
<button id="messageOpener">Verify</button>

<div id="messageDialog" />

<script type="text/javascript">

    $(document).ready(function () {

        $("#messageOpener").click(function () {
            $("#messageDialog").dialog("open");
                return false;
        });

        $("#messageDialog").dialog({
            buttons: {
                Retry: function () {
                    $(this).dialog("close");
                },
                Cancel: function () {
                    // **** ?? must close both dialogs. ****
                }                
            },
            autoOpen: false,
        });
    });

</script> 
```

我尝试了以下方法来关闭对话框：

**方法01：**

```
$(".ui-dialog-content").dialog("close"); 
```

**方法 02：**

```
$(this).dialog("close");
$("#mainDialog").dialog("close"); 
```

**方法 03：**

```
$(".ui-dialog:visible").find(".dialog").dialog("close"); 
```

但以上所有内容都没有按预期关闭对话框，而是产生以下 JS 错误：

> 未捕获的错误：无法在初始化之前调用对话框上的方法；试图调用方法'close'
> v.extend.error
> （匿名函数）
> v.extend.each
> v.fn.v.each
> e.fn.（匿名函数）
> $.dialog.buttons.Cancel
> r.click
> v.event。调度
> o.handle.u

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:07:20.110

用以下方式重写代码解决问题..

**1\. 主视图**

```
<button id="openModel" onclick="openModel()">

<div id="mainDialog" />

<script type="text/javascript">

    var $modelDialog = $('#mainDialog').dialog({
        autoOpen: false,
        open: function () {
            // loading "the secondary view in the model dialog"
            // url: controller-action url to load the second view
            $(this).load('url'); 
        }
    });

    function openModel() {
        $modelDialog.dialog('open');    
    }

    function closeModel() {
        $modelDialog.dialog('close');    
    }

</script> 
```

**2.对话框视图**

```
<button id="messageOpener">Verify</button>

<div id="messageDialog" />

<script type="text/javascript">

    var $messageDialog;

    $(document).ready(function () {

        $("#messageOpener").click(function () {
            $messageDialog.dialog("open");
                return false;
        });

        $messageDialog = $("#messageDialog").dialog({
            buttons: {
                Retry: function () {
                    $messageDialog.dialog("close");
                },
                Cancel: function () {
                    // [!!]
                    $messageDialog.dialog("destroy");
                    closeModel();
                }                
            },
            autoOpen: false,
        });
    });

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T07:09:43.763

方法 2 看起来不错，但是`mainDialog`当您尝试关闭`message`对话框时，您会收到该错误，因为该模式未打开。此外，函数`openModel`不会在任何地方被调用。

# java - 是否有任何标准方法来获取最后一个 SMTP 返回码，使用 javamail 的通用实现

> ID：14422389
> 
> 赞同：1
> 
> 时间：2013-01-20T06:55:54.703
> 
> 标签：java, smtp, jakarta-mail

我可能只是要求确认我认为会是否定的答案。我已经阅读了代码并搜索了文档，但似乎并非如此。

此外，由于在使用 gnu freemail 实现时似乎也没有“非标准”方式来做到这一点，我想知道其他人在做什么？

唯一留给我的就是希望 exception.getMessage() 函数总是给我最后的 SMTP 服务器响应，并且我可以解析出响应代码；550、250 等。除此之外，我找不到任何文档说我可以从 SendFailedException 或 MessagingException 中期待这一点（尽管从测试来看，情况似乎如此）。

您还能如何编写逻辑代码来处理各种故障情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:35:00.050

没有标准的方法可以做到这一点，但是 Oracle 的 JavaMail 参考实现中的 SMTP 提供程序有一种方法可以做到这一点。

# c++ - 如何使用 libssh 运行 makefile？

> ID：14422396
> 
> 赞同：2
> 
> 时间：2013-01-20T06:58:35.670
> 
> 标签：c++, makefile, libssh

我对 libssh (libssh.org) 有疑问。我需要在远程服务器上运行一个 makefile。我用命令“channel_request_exec”来做：

```
int SSHExecCmd (void(* MessSender)(char* CurMessage, bool IsError, CWnd* MainWnd),ssh_session session,  CString & ShellEcho, char * cmd, CWnd* MainWnd)
{
    ssh_channel channel;
    int rc;
    channel = ssh_channel_new(session);
    if (channel == NULL) return SSH_ERROR;
    rc = ssh_channel_open_session(channel);
    if (rc != SSH_OK)
    {
        ssh_channel_free(channel);
        return rc;
    }
    rc = ssh_channel_request_exec(channel, cmd);
    if (rc != SSH_OK)
    {
        ssh_channel_close(channel);
        ssh_channel_free(channel);
        return rc;
    }
    char buffer[256];
    unsigned int nbytes;
    nbytes = ssh_channel_read(channel, buffer, sizeof(buffer), 0);
    while (nbytes > 0)
    {
        if (fwrite(buffer, 1, nbytes, stdout) != nbytes)
        {
            ssh_channel_close(channel);
            ssh_channel_free(channel);
            return SSH_ERROR;
        }
        nbytes = ssh_channel_read(channel, buffer, sizeof(buffer), 0);
    }
    if (nbytes < 0)
    {
        ssh_channel_close(channel);
        ssh_channel_free(channel);
        return SSH_ERROR;
    }
    return SSH_OK;
} 
```

Makefile 位于根目录下：

```
all: mpi_cuda.o pattern2d.o
        mpicc mpi_cuda.o pattern2d.o -o mpi_cuda -lrt -lpthread -L/opt/cuda/lib64 -lcudart -lm

mpi_cuda.o: mpi_cuda.c
        mpicc -g -std=c99 -D_GNU_SOURCE -I/opt/cuda/include -c $< -o $@

pattern2d.o: pattern2d.cu
        nvcc -g -c $< -o $@ 
```

我发送命令“make”并接收回声：

```
mpicc -g -std=c99 -D_GNU_SOURCE -I/opt/cuda/include -c mpi_cuda.c -o mpi_cuda.oda 
```

但什么也没发生（不执行编译）。

如果我用腻子做：一切正常。回声：

```
make
mpicc -g -std=c99 -D_GNU_SOURCE -I/opt/cuda/include -c mpi_cuda.c -o mpi_cuda.o
mpi_cuda.c: В функции ‘main’:
mpi_cuda.c:148: предупреждение: недостаточно аргументов для указанного формата
nvcc -g -c pattern2d.cu -o pattern2d.o
mpicc mpi_cuda.o pattern2d.o -o mpi_cuda -lrt -lpthread -L/opt/cuda/lib64 -lcudart -lm 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:46:45.103

不熟悉 libssh，但可能会出错，因为环境设置不同，因此通过 shell 显式运行 make 可能会有所帮助。

尝试将命令（`make`？）更改为

```
bash -c make 
```

如果这不起作用，请尝试

```
bash -c "export > env.txt ; make > make_out.txt 2> make_err.txt" 
```

然后检查这些文件是否出现，以及它们包含的内容，这应该会给出很好的提示。

如果您有一个工作案例和一个非工作案例，则从这两个案例中获取这些文件，并比较它们（例如 with `diff -u`）。

如果您不使用 bash，则更改为您使用的任何 shell（在这种情况下，检查是否是正确的开关以提供命令字符串，以及是否是正确的命令以显示环境`bash`）`-c`。`export`

* * *

基于以下评论： env.txt 的差异可能是，因为某些环境变量只为交互式 shell 设置。例如，在我的 Ubuntu 框中，.bashrc 的开头有这样的行：

```
# If not running interactively, don't do anything
[ -z "$PS1" ] && return 
```

现在，如果在该行之后的 .bashrc 中设置了任何所需的环境变量，并且您的 ssh 连接是非交互式的（没有伪 tty），则不会设置这些变量。

如果是这种情况，请将这些环境变量集移动到`~/.profile`，或在`~/.bashrc`上述测试之前。也这样做`man bash`，并阅读有关初始化文件的内容（例如`~/.bashrc`）。

其他解决方案是使 ssh-session 具有交互性，我相信在此页面上记录了 libssh：[http](http://api.libssh.org/master/libssh_tutor_shell.html) ://api.libssh.org/master/libssh_tutor_shell.html 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T13:19:53.007

我建议打开一个非交互式外壳并在那里进行。看

[http://api.libssh.org/master/libssh_tutor_shell.html](http://api.libssh.org/master/libssh_tutor_shell.html)

# java - 在写入数据库之前在 java (jsp) 中进行适当的数据清理？

> ID：14422398
> 
> 赞同：0
> 
> 时间：2013-01-20T06:58:39.673
> 
> 标签：java, security, jsp

我一直在修改一个个人项目，该项目涉及我将一些变量写入 mysql 数据库，其中一些（名字、姓氏、电子邮件）已提交，并且我正在编写自己的卫生字符串. 我正在考虑做类似的事情

```
string allowed="@_=-ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890";
string userEntered = [form submitted] // just skipping all the backstory there
for(int i=0; i<userEntered.length; i++){
    if(allowed.contains(userEnetered[i]){
       //continue processing
    }
    else{
        //flush data and deny
    }
} 
```

这样的事情就足够了吗？还是我忘记了其他考虑因素？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:11:35.030

如果你打算在 JSP 中向数据库写入一些东西，当然，你不应该使用这种类型的 SQL 查询：

```
String sql = "Select * from tblUsers where Username = '" + usern + " and password = '" + pwd + "'"; 
```

如果您使用上述方法，您很容易受到 SQL 注入攻击。而是尝试使用准备好的语句，它们会转义单引号字符并使其无法进行 SQL 注入攻击，如下所示：

```
String securesql = "Select * from tblUsers where Username = ? and Password = ?";
PreparedStatement prepstat = conn.prepareStatement(securesql);
prepstat.setString(1, usern);
prepstat.setString(2, pwd); 
```

另外我建议您尝试在 SQL 中使用存储过程和函数。例如，为了登录创建一个存储过程，它将执行查询并使用您拥有的参数调用它。

此外，即使您可以在传递给preparedStatement 之前进行字符串操作（如您的示例代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:51:08.130

如果您担心跨站点脚本攻击，最简单的第一步是在将用户输入的数据重新显示在页面上时对其进行 HTML 转义，而不是在将其保存到数据库之前对其进行清理。您可以使用 JSTL escapeXml EL 函数来执行此操作。您只需将 jstl.jar 放到 WEB-INF/lib 中，然后执行以下操作：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>

<input name="firstName" value="${fn:escapeXml(user.firstName)}"> 
```

这是一个好的开始。如果您在其他上下文中显示用户输入的数据，例如在 Javascript 中，您需要根据上下文适当地对其进行转义。查看[OWASP 跨站点脚本备忘单以获得好的示例](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)。

如果您遇到在显示之前转义用户输入的数据还不够的情况，[OWASP 输入验证备忘单是一个很好的资源](https://www.owasp.org/index.php/Input_Validation_Cheat_Sheet)，其中包含使用白名单输入验证的示例。

# wpf - 事件触发器在情节提要上不起作用

> ID：14422402
> 
> 赞同：2
> 
> 时间：2013-01-20T06:58:59.853
> 
> 标签：wpf, inotifypropertychanged, eventtrigger

我只是希望你能帮助填补我在 WPF 知识方面的空白。

（请原谅通用命名，不确定是否有帮助）

我有一个自定义对象 MyObject，它实现了 INotifyPropertyChanged。它有一个名为 MyCustomProperty 的属性，如下所示；

```
public int MyCustomProperty
{
 get { return this._myCustomProperty; }
 set
 {
  if (this._myCustomProperty == value)
    return;
  this._myCustomProperty= value;
  OnPropertyChanged("MyCustomProperty");
 }
} 
```

这一切都有效。在我的 WPF 应用程序中，我有这 3 个功能；

```
private void DoStuff()
{
   AddItemsToCanvas();
   ChangeValues();
}

private void AddItemsToCanvas()
{
   DataTemplate dt = (DataTemplate)FindResource("myDataTemplate");
   foreach (MyObject temp in ListOfMyObjects)
   {
     ContentControl cc = new ContentControl();
     cc.ContentTemplate = dt;
     cc.Content = temp;
     myCanvas.Children.Add(cc);
   }
}

private void ChangeValues()
{
  // this simply changes the MyCustomPropery in each of the objects
} 
```

DataTemplate 看起来像这样；

```
<DataTemplate x:Key="myDataTemplate">
 <Canvas>
  <TextBlock Name="tb_debug" Text="{Binding Path=MyCustomProperty, NotifyOnTargetUpdated=True}">
   <TextBlock.Triggers>
    <EventTrigger RoutedEvent="Binding.TargetUpdated">
     <BeginStoryboard>
      <Storyboard>
       <DoubleAnimation Storyboard.TargetName="tb_debug" Storyboard.TargetProperty="(Canvas.Top)" From="0" To="350" Duration="0:0:1.6" />
      </Storyboard>
     </BeginStoryboard>
    </EventTrigger>
   </TextBlock.Triggers>
  </TextBlock>
 </Canvas>
</DataTemplate> 
```

当 MyCustomProperty 更改时，它只是将文本框从画布的顶部移动到底部。

加载 UserControl 时，我同时调用 AddItemsToCanvas() 和 ChangeValues()。文本值更新并显示正确的值，但触发器不触发（即文本框不移动）。在那之后的任何时候，当我调用 ChangeValues() 时，文本会更新并且文本框会移动。

为什么 EventTrigger 会在初始时间失败？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T20:26:20.103

我不知道为什么`Binding.TargetUpdated`不调用它，但它只能在目标被更新时被调用，一旦已经设置，而不是在它第一次设置时（可能）。

但是你可以在你的中添加另一个`EventTrigger`以`TextBlock` `Loaded`确保`DataTremplate`它在`UserControl`加载时触发。

例子：

```
<DataTemplate x:Key="myDataTemplate">
    <DataTemplate.Resources>
        <Storyboard x:Key="animation" >
            <DoubleAnimation Storyboard.TargetName="tb_debug" Storyboard.TargetProperty="(Canvas.Top)" From="0" To="350" Duration="0:0:1.6" />
        </Storyboard>
    </DataTemplate.Resources>
    <Canvas>
        <TextBlock Name="tb_debug" Text="{Binding Path=MyCustomProperty, NotifyOnTargetUpdated=True}">
           <TextBlock.Triggers>
            <EventTrigger RoutedEvent="Binding.TargetUpdated">
                <BeginStoryboard Storyboard="{StaticResource animation}" />
            </EventTrigger>
               <EventTrigger RoutedEvent="Loaded">
                <BeginStoryboard Storyboard="{StaticResource animation}" />
            </EventTrigger>
           </TextBlock.Triggers>
        </TextBlock>
    </Canvas>
</DataTemplate> 
```

# jquery - 表单验证黑客字符数

> ID：14422404
> 
> 赞同：0
> 
> 时间：2013-01-20T06:59:11.110
> 
> 标签：jquery, if-statement

我正在编写这段代码来计算表单中的字符。虽然它在某种意义上有效，但我认为它实际上并没有计算在内。我不断收到警报说它没有达到它的最小计数

```
$(function(){
  var minLength = 10;
  var form = $('form[action*="post"]');
form.submit(function (e) {
  var mini = $('#text_editor_textarea');
       if (mini.text().length < minLength) {
    alert ('You need to enter at least' +minLength + ' characters');
  e.preventDefault();
   }
   else if (mini.text().length > minLength) {
}
 });
}); 
```

现在我的 else if 应该通过我想，因为它在语句中确实没有限制，这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T07:02:03.163

在您的代码中，`mini`是 的结果`.val`，它是一个字符串。你需要的是使用`mini.length`

更新：我的意思是

```
var mini = $(element).val().length;
// .val() gives the text, .length gives the string's length 
```

# java - ThreadLocal 与克隆

> ID：14422408
> 
> 赞同：4
> 
> 时间：2013-01-20T07:00:08.177
> 
> 标签：java, multithreading, thread-local

我一直在阅读有关 threadlocal 和它有用的场景。我喜欢这个概念，但想知道它与克隆有何不同？

因此，threadlocal 将返回一个变量的新副本，这意味着我们不必使用同步。一个很好的例子是 SimpleDateFormat 对象，它不是线程安全的，而 ThreadLocal 提供了一种很好的使用方式。但是为什么我们不能简单地创建一个 varibale use clone 的新副本呢？

与克隆相比，ThreadLocal 类提供的附加值是多少？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T07:24:04.053

**[ThreadLocal](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html)不是同步或线程安全对象访问的替代品**。如果*相同的对象*从不同的线程分配给 ThreadLocal，那么*程序不会比以前更线程安全*：*相同的对象*仍将在不同的线程之间共享。

ThreadLocal 就像一个变量；也就是说，它“命名”或“引用”一个对象：

> [ [ThreadLocal](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html) ] 提供线程局部变量 [.. 这样] 访问一个（通过其 get 或 set 方法）的每个线程都有自己的，独立初始化的变量副本。

也就是说，ThreadLocal 所做的是在*使用相同 ThreadLocal*对象的线程之间提供 get/set 隔离。因此，每个线程都可以将自己的*不同*对象分配/检索到 ThreadLocal；但这仍然需要“克隆”或新的实例化来分配*不同*的对象！

请记住，赋值（或方法调用）*永远不会*创建对象的隐式克隆/复制/复制 - 这会扩展到 ThreadLocal。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-20T07:06:45.003

通过使用 ThreadLocal，您可以创建与线程一样多的变量，而无需任何进一步的检查。但是请记住，存储本身并不能保证线程安全。您必须确保存储在本地存储中的每个对象仅在该线程中使用！

如果您手动克隆对象，则必须在每次使用对象时克隆它，或者检查我们在哪个线程中然后克隆。

此外 - 克隆操作是线程安全的吗？如果两个不同的线程试图克隆一个对象会发生什么？我实际上不知道，但我认为这不是一个好习惯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T07:21:58.830

使用 ThreadLocal 更快，存储在 ThreadLocal 中的 SimpleDateFormat 实例可以在同一个线程中重复使用多次，而克隆意味着每次都创建一个新对象。

# python - Python中元组和冻结集之间的区别

> ID：14422409
> 
> 赞同：60
> 
> 时间：2013-01-20T07:00:17.370
> 
> 标签：python, data-structures, set, tuples

我正在使用 The Quick Python Book 学习 Python 3，作者在其中谈到了 freezesets，指出由于集合是可变的，因此不可散列，因此不适合作为字典键，因此引入了它们的冻结对应项。除了元组是有序数据结构而frozenset（或更一般地说是集合）是无序的明显区别之外，元组和frozenset之间还有其他区别吗？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-01-20T07:07:22.753

`tuples`是不可变的`lists`，`frozensets`是不可变的`sets`。

`tuples`确实是对象的有序集合，但它们可以包含重复对象和不可散列的对象，并且具有切片功能

`frozensets`没有索引，但您具有`sets`- O(1) 元素查找的功能，以及联合和交集等功能。它们也不能包含重复项，就像它们的可变对应项一样。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-11-20T18:32:01.890

有点反直觉 - 这个好词怎么样：

```
sss = frozenset('abc')
sss |= set('efg') 
```

将产生：

```
frozenset(['a', 'c', 'b', 'e', 'g', 'f']) 
```

当然，这等价于 x = x | 是的，所以不改变原来的frozenset，但它不会对代码审查者的“不可变”一词产生一半的嘲弄！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-20T07:06:55.220

想到的一个区别是重复的问题。一个 tuple`(1, 1, 1, 1, 2, 2, 2)`正是您所期望的，但是 freezeset 会删除所有这些重复项，给您留下`frozenset([1, 2])`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-05-27T09:01:11.893

Volatility 确实提到了frozensets 没有被索引。我在看其他功能，所以没有立即意识到标准的 python 切片是不可能的。

```
a = frozenset((1, 1, 1, 1, 2, 2, 2))  # results in frozenset([1, 2])
print a[0] 
```

会报错：

```
TypeError: 'frozenset' object does not support indexing 
```

显然它没有被索引，但尽管值得在这里明确添加

# java - 自动对象命名java

> ID：14422411
> 
> 赞同：-3
> 
> 时间：2013-01-20T07:00:49.623
> 
> 标签：java

我是 java 新手，我一直在尝试编写一种方法，允许我创建和声明一个对象并将其自动添加到我的数组列表中。

```
public static void 

public static int objectCreate(String a, ArrayList<pet> list,int x)
{
pet pets= new pet ("pet"+ x);
pet pets.getName() = new pet("dog",10,"healthy");
list.add(pet.getName());
x++;
return x
} 
```

字符串 a 是宠物的名字，我正在尝试这样做，以便每次调用此方法时，它都会创建一个具有不同名称的对象。例如，我第二次调用这个名称时，它会创建一个名为 pet2 的对象，依此类推。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:18:19.703

看看[类变量](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)。

# passwords - 使密码在 ASP.NET 的提示框中显示为 ***

> ID：14422414
> 
> 赞同：-2
> 
> 时间：2013-01-20T07:01:46.307
> 
> 标签：passwords, prompt

我有一些按钮，当用户单击这些按钮时，会打开一个提示框并获取用户的密码。该程序运行良好，但我希望该密码显示`***`在提示中，但我做不到。我如何找到解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T07:52:02.657

如果我理解正确，您将需要密码类型输入。

`<input type="password" />`

# php - 如何在 Twitter 中创建重新认证？

> ID：14422415
> 
> 赞同：-1
> 
> 时间：2013-01-20T07:01:46.073
> 
> 标签：php, javascript

我有一个查询，我想在我的网站中设置重新身份验证，如下所示：

如果我在我的网站上注册过一次并将我的帐户与 twitter 相关联，那么下次我登录该网站时，我将不需要使用 twitter 登录。它将自动与推特连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T07:12:54.470

您仍然需要每次都使用 twitter 进行身份验证，但是您可以将用户保存`oauthtoken`到`oauthtoken secret`mySQL 数据库中，这样您就不必要求用户手动进行身份验证。如果您愿意，这些密钥永远不会过期。但是，Twitter 用户可以撤销您的应用程序身份验证。这是有关从头开始设置的有用[教程。](http://net.tutsplus.com/tutorials/php/how-to-authenticate-users-with-twitter-oauth/)一些最初的步骤已更改，但“注册用户”部分将对您有所帮助。

# sql-server - 查询存储为 xml 的 SQL Server 2012 中的文档

> ID：14422419
> 
> 赞同：1
> 
> 时间：2013-01-20T07:03:28.387
> 
> 标签：sql-server, xml, openxml, sql-server-2012

我一直在尝试学习 Open XML，并在 Visual Studio c# 中成功生成了一个自由文本 2007 .docx 文件。之后，我将文件以 .xml 格式保存在 Word 中，然后将 .xml 文件导入 sql server 2012 到名为 XML 的表中到名为 xml 的列中：这是表的代码：

```
CREATE TABLE [dbo].[XML](
    [XML_ID] [int] IDENTITY(1,1) NOT NULL,
    [XML] [xml] NOT NULL,
 CONSTRAINT [PK_XML] PRIMARY KEY CLUSTERED 
(
    [XML_ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO 
```

这是我运行的插入

```
INSERT INTO XML(XML)
SELECT * FROM OPENROWSET(
   BULK 'C:\Users\bbt2d\Desktop\Document.xml',
   SINGLE_BLOB) AS x; 
```

当我运行一个 select * 时，xml 文件出现了，但是当我尝试从段落中查询一些数据时，我没有得到任何结果。

这是存储在 sql server 中的 xml 的部分截图：想知道我是否执行了错误的过程，或者您将如何从文档中查询文本。

```
?mso-application progid="Word.Document"?>
<pkg:package xmlns:pkg="http://schemas.microsoft.com/office/2006/xmlPackage">
  <pkg:part pkg:name="/_rels/.rels" pkg:contentType="application/vnd.openxmlformats-package.relationships+xml" pkg:padding="512">
    <pkg:xmlData>
      <Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
        <Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml" />
        <Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml" />
        <Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="word/document.xml" />
      </Relationships>
    </pkg:xmlData>
  </pkg:part>
  <pkg:part pkg:name="/word/_rels/document.xml.rels" pkg:contentType="application/vnd.openxmlformats-package.relationships+xml" pkg:padding="256">
    <pkg:xmlData>
      <Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
        <Relationship Id="rId8" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/fontTable" Target="fontTable.xml" />
        <Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings" Target="settings.xml" />
        <Relationship Id="rId7" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer" Target="footer1.xml" />
        <Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml" />
        <Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering" Target="numbering.xml" />
        <Relationship Id="rId6" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/endnotes" Target="endnotes.xml" />
        <Relationship Id="rId5" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes" Target="footnotes.xml" />
        <Relationship Id="rId10" Type="http://schemas.microsoft.com/office/2007/relationships/stylesWithEffects" Target="stylesWithEffects.xml" />
        <Relationship Id="rId4" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/webSettings" Target="webSettings.xml" />
        <Relationship Id="rId9" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme" Target="theme/theme1.xml" />
      </Relationships>
    </pkg:xmlData>
  </pkg:part>
  <pkg:part pkg:name="/word/document.xml" pkg:contentType="application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml">
    <pkg:xmlData>
      <w:document xmlns:ve="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:m="http://schemas.openxmlformats.org/officeDocument/2006/math" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing" xmlns:w10="urn:schemas-microsoft-com:office:word" xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" xmlns:wne="http://schemas.microsoft.com/office/word/2006/wordml">
        <w:body>
          <w:p w:rsidR="00C32D34" w:rsidRDefault="00C32D34">
            <w:pPr>
              <w:pStyle w:val="Heading1" />
              <w:spacing w:line="240" w:lineRule="auto" />
              <w:jc w:val="center" />
              <w:rPr>
                <w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" />
                <w:sz w:val="44" />
                <w:szCs w:val="44" />
              </w:rPr>
            </w:pPr>
            <w:r>
              <w:rPr>
                <w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" />
                <w:sz w:val="44" />
                <w:szCs w:val="44" />
              </w:rPr>
              <w:t>School District of Marshfield</w:t>
            </w:r>
          </w:p>
          <w:p w:rsidR="00C32D34" w:rsidRDefault="00C32D34">
            <w:pPr>
              <w:autoSpaceDE w:val="0" />
              <w:autoSpaceDN w:val="0" />
              <w:adjustRightInd w:val="0" />
              <w:spacing w:after="0" w:line="240" w:lineRule="auto" />
              <w:rPr>
                <w:rFonts w:ascii="Cambria" w:hAnsi="Cambria" w:cs="Cambria" />
                <w:b />
                <w:bCs />
                <w:sz w:val="28" />
                <w:szCs w:val="28" />
              </w:rPr>
            </w:pPr>
          </w:p>
          <w:p w:rsidR="00C32D34" w:rsidRDefault="00DE219B">
            <w:pPr>
              <w:autoSpaceDE w:val="0" />
              <w:autoSpaceDN w:val="0" />
              <w:adjustRightInd w:val="0" />
              <w:spacing w:after="0" w:line="240" w:lineRule="auto" />
              <w:jc w:val="center" />
              <w:rPr>
                <w:rFonts w:ascii="Cambria" w:hAnsi="Cambria" w:cs="Cambria" />
                <w:b />
                <w:bCs />
                <w:sz w:val="28" />
                <w:szCs w:val="28" />
              </w:rPr>
            </w:pPr>
            <w:r>
              <w:rPr>
                <w:rFonts w:ascii="Cambria" w:hAnsi="Cambria" w:cs="Cambria" />
                <w:b />
                <w:bCs />
                <w:sz w:val="28" />
                <w:szCs w:val="28" />
              </w:rPr>
              <w:t>Exploring French</w:t>
            </w:r>
            <w:r w:rsidR="00C32D34">
              <w:rPr>
                <w:rFonts w:ascii="Cambria" w:hAnsi="Cambria" w:cs="Cambria" />
                <w:b />
                <w:bCs />
                <w:sz w:val="28" />
                <w:szCs w:val="28" />
              </w:rPr>
              <w:t xml:space="preserve"> &amp; Spanish</w:t>
            </w:r> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T09:49:54.657

您发布的 XML 不完整 - 假设您的表的 XML 是完整的，您可以尝试这样的事情（*顺便说一句：作为旁注：我建议**不要**为您的列使用保留字；不要调用您的列**XML** - 这是一个保留关键字；使用**XmlDoc**或类似的东西......*）

```
-- define the two XML namespaces we need to use to get to the data in question
;WITH XMLNAMESPACES ('http://schemas.microsoft.com/office/2006/xmlPackage' as pkg, 
                     'http://schemas.openxmlformats.org/wordprocessingml/2006/main' as w)
select
    XmlContent.value('(//w:t)[2]', 'varchar(100)')
FROM dbo.YourTable
where ....(some condition here)..... 
```

真正有趣的部分是找出正确的 XPath 表达式来获取您的数据。不幸的是，您感兴趣的文本似乎不在特定标记的段落中，例如围绕它的`<w:r>`和`<w:rPr>`标签没有您可以检查的任何特定属性 - 所以您所能做的就是弄清楚它是`<w:t>`该文档中您感兴趣的第二个节点，并以这种方式获取其文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T07:47:23.280

当您在 sql server 中处理 XML 数据类型时，我总是建议使用 Xquery，下面是让您清楚了解 Xquery 的 url。 [http://www.youtube.com/watch?v=mj4qodGsgDA](http://www.youtube.com/watch?v=mj4qodGsgDA)

# php - 使用 JS 通过 AJAX Post 序列化的 PHP 清理数据的最佳实践是什么？

> ID：14422421
> 
> 赞同：1
> 
> 时间：2013-01-20T07:03:32.180
> 
> 标签：php, jquery, serialization, sanitization

所以我有这个表单，它是通过 AJAX 提交的，表单数据是序列化的。所以在后端，当我通过 PHP 接收这些数据时，我只是在数据上使用 parse_str 并再次将其序列化以保存到数据库中。

所以我的问题是，如何清理通过序列化的 JS AJAX 传入的数据？我是否必须将它分开并通过 mysql_real_escape_string 运行每个值，还是有更简单的方法？

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T07:21:44.217

永远不要操作序列化的数据：长度的任何变化都会破坏它并使其无法反序列化。

如果您使用的是传统形式，您会这样做：

1.  在客户端，使用隐藏的输入字段发送字符串化 JSON`JSON.stringify()`
2.  `json_decode()`在服务器端，你会得到一个数组，你可以像任何其他表单数据一样进行清理。
3.  `serialize()`清理过的数组并保存到数据库

如果您使用 JQuery AJAX 并发送 POST 请求，则第 1-2 阶段是多余的，因为您可以按原样将 JSON 对象或数组传递给数据，它将自动转换为 PHP 对象/数组。

# windows-7 - RDP 中的用户名或密码不正确

> ID：14422425
> 
> 赞同：2
> 
> 时间：2013-01-20T07:04:03.517
> 
> 标签：windows-7, remote-desktop, rdp, authentication, mstsc

我尝试使用`Remote Desktop Protocol(RDP)`.

我配置了我的桌面远程设置并勾选了远程协助（允许远程协助连接到这台计算机）以及远程桌面字段中的第二个单选按钮（允许连接来自运行任何版本或 RD 的计算机）。

但是当我开始使用笔记本电脑远程远程桌面时，`MSTSC`它会将我带到欢迎屏幕（蓝屏），我看到它说用户名或密码不正确（在单词上方的底部中心`"Window & Ultimate"`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:07:58.670

1.  Just open your CMD, type net user and press enter.
2.  You will see a list of user name here. This are the valid users of your computer.
3.  Now please check the username you are using is available in the list.
4.  if not then try any of the username from the list to connect through RDP. it should work.

# android - ViewPager 不会滚动到下一页

> ID：14422428
> 
> 赞同：0
> 
> 时间：2013-01-20T07:04:36.977
> 
> 标签：android, android-viewpager

我有一个带有标签的 FragmentActivity。第一个选项卡中有一个 ViewPager。ViewPager 不起作用。它显示第一页，但不会滚动到下一页。我看到下一个页面调用了 instantiateItem。我想也许触摸被其他东西拦截了，不太确定。

```
<?xml version="1.0" encoding="utf-8"?>

<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tabHost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/main"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/topbanner" />

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <LinearLayout
                android:id="@+id/hometab"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical" >

                <android.support.v4.view.ViewPager
                    android:id="@+id/product_viewpager"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

            </LinearLayout>
            <ScrollView
                android:id="@+id/scroller"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:fillViewport="true" >

                <LinearLayout
                    android:id="@+id/articlestab"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:orientation="vertical" >
                </LinearLayout>
            </ScrollView>

            <LinearLayout
                android:id="@+id/videostab"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/txt3"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:text="This is tab 3" />
            </LinearLayout>
        </FrameLayout>
    </LinearLayout>

</TabHost> 
```

这是我放入 ViewPager 的 image_page，我添加了 6 个。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/image_page"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/border"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/image"
        android:layout_width="100dip"
        android:layout_height="100dip"
        android:layout_gravity="center_vertical"
        android:src="@drawable/app" />

    <TextView
        android:id="@+id/caption"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Title"
        android:textStyle="bold" />

</LinearLayout> 
```

这是我添加适配器的地方：

```
 MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.product_viewpager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(0); 
```

这是适配器：

```
private class MyPagerAdapter extends PagerAdapter {
    public int getCount() {
        return 6;
    }

    public Object instantiateItem(View collection, int position) {
        String image = null;
        String caption = null;
        Log.d(TAG, "instantiateItem called for position: " + position);
        if (sliderResults != null) {
            LinearLayout layout1 = null;
            LayoutInflater inflater = (LayoutInflater) collection.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            JSONArray jArray = null;
            try {
                jArray = new JSONArray(sliderResults);
                JSONObject j = jArray.getJSONObject(0);
                layout1 = (LinearLayout) inflater.inflate(R.layout.image_page, null);

                switch (position) {
                case 0:
                    image = "img1";
                    caption = "capt1";
                    break;
                case 1:
                    image = "img2";
                    caption = "capt2";
                    break;
                case 2:
                    image = "img3";
                    caption = "capt3";
                    break;
                case 3:
                    image = "img4";
                    caption = "capt4";
                    break;
                case 4:
                    image = "img5";
                    caption = "capt5";
                    break;
                case 5:
                    image = "img6";
                    caption = "capt6";
                    break;
                }
                new DownloadImageTask((ImageView) layout1.findViewById(R.id.image), 100).execute("http://removed" + j.getString(image));
                ((TextView) layout1.findViewById(R.id.caption)).setText(j.getString(caption));

            } catch (JSONException e) {
                Log.d(TAG, "JSONException");
                e.printStackTrace();
            }

            // View view = inflater.inflate(resId, null);
            ((ViewPager) collection).addView(layout1, 0);
            return layout1;
        }else{
            Log.d(TAG, "slider results not ready yet");
        }
        return null;
    }

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) {
        ((ViewPager) arg0).removeView((View) arg2);
    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        return arg0 == ((View) arg1);
    }

    @Override
    public Parcelable saveState() {
        return null;
    }
} 
```

我使用相同的代码创建了一个测试视图活动，并且 ViewPager 可以正常工作。我相信它与 TabHost 有关。也许是拦截触摸事件或什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T02:47:41.950

这是如何做到的：

```
int resId = 0;
switch (position) {
case 0:
    resId = R.layout.your_first_layout_id;
    break;
case 1:
    resId = R.layout.your_second_layout_id;
    break;
case 2:
    resId = R.layout.your_third_layout_id;
    break;
case 3:
    resId = R.layout.your_fourth_layout_id;
    break;

}

View view = inflater.inflate(resId, null);
((ViewPager) collection).addView(view, 0);
return view;

} 
```

我就是这样做的，您需要在开关/案例中调用您的布局ID。或者你可以像这样膨胀视图：

```
case 0:
        view = inflater.inflate(R.layout.some_layout, null);
        break; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:16:54.540

由于这个问题终于弄清楚了：[TAB 内的按钮不可点击/响应](https://stackoverflow.com/questions/7106733/buttons-inside-tab-dont-clickable-responding)

不要在 FrameLayout 中放置任何东西。将所有布局移动到单独的 xml 文件中，然后以编程方式将它们添加到框架布局中。最初我在框架布局中只尝试了一个孩子，但这使得最后一个选项卡无法正常工作。

# jquery - 无法对backbonejs中的集合使用create方法

> ID：14422433
> 
> 赞同：2
> 
> 时间：2013-01-20T07:05:02.677
> 
> 标签：jquery, backbone.js, underscore.js

我在骨干中有一个这样的集合：

```
app.ledgerList=Backbone.Collection.extend({
model: app.ledger,
localStorage:new Store('ledgers')
});

///initializing

app.ledgers=new app.ledgerList(); 
```

在我稍后在应用程序中的一个观点中，我有：

```
saveLedger: function(){

    name=$("#ledgerName").val();
    email=$("#ledgerEmail").val();
    address=$("#ledgerAddress").val();
    phone=$("#ledgerPhone").val();
    console.log(app.ledgers.length);
    app.ledgers.create({name:name,email:email,address:address,phone:phone});
} 
```

这回我`Uncaught TypeError: Object [object Object] has no method 'apply'`就行了`app.ledgers.create({name:name,email:email,address:address,phone:phone})` 可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T01:33:53.660

看起来在您调用时`create()`不再`app.ledgers`是一个集合。您应该`console.log(app.ledgers)`在 create() 语句的正上方。

# facebook - Facebook API 似乎改变了花费的价值

> ID：14422438
> 
> 赞同：-1
> 
> 时间：2013-01-20T07:06:23.307
> 
> 标签：facebook, api

我们使用 facebook api 为我们的帐户下载报告。问题是 - 我们有一个格林威治标准时间 +2 帐户，我们每天在格林威治标准时间 0 上午 11:30 下载其数据。

几天后我再次检查数据时，我看到它发生了变化，从十进制数字变为整数，例如 - 当按广告系列查看时，我得到 201.23、199.33、199.20 ......几天后它变成了 200、200、200 .

最后，我在我的应用程序中为我的客户展示了不同的结果。

为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:42:42.810

您需要根据广告帐户的时区调整时间戳来请求统计信息 - 如果该帐户是 GMT +2（通过调用 来检查`/act_<ACCOUNT ID HERE>`），请确保您在`00:00:00 +0200`第二天的同一时间请求统计信息

# ios - Objective-C：我的 UILabel 上的文本没有正确换行

> ID：14422444
> 
> 赞同：0
> 
> 时间：2013-01-20T07:06:56.137
> 
> 标签：ios, objective-c, text, nsstring, uilabel

我在显示 5 个随机字符串中的 1 个的 uilabel 时遇到了一些问题。有时整个字符串显示没有问题，但通常情况下，某些文本会被截断。这是我目前拥有的：

```
// These are the 5 NSStrings which are placed in an array.
NSString *badOne = @"Bad? Your bill is nothing. I would consider that good service. SMDH.";
NSString *badTwo = @"You left out the amount dude.";
NSString *badThree = @"I can't tell you what the tip should be, if you don't tell me how much you dropped.";
NSString *badFour = @"Forgetting something?";
NSString *badFive = @"The tip should be over 9000... /n kidding.";

NSArray *badComments = [[NSArray alloc] initWithObjects:badOne, badTwo, badThree, badFour, badFive, nil];

// A random string is selected and assigned to badJoke.    
int rand = arc4random()%5;

NSString *badJoke = [badComments objectAtIndex:rand];

// Here's the problematic code:    
[_mainLabel setText:(badJoke)];
[_mainLabel setFrame:CGRectMake(50, 295, 200, 80)];
_mainLabel.adjustsFontSizeToFitWidth = NO;
_mainLabel.numberOfLines = 0;

[_amountTextField resignFirstResponder];

// This is a separate label, completely unrelated.    
[_tipAmount setText:@""]; 
```

因此，例如，有时它可能会显示“不好？您的帐单是否”。我也试过没有 setFrame 线，但没有运气。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:35:18.360

理想的解决方案是计算在标签内显示文本所需的确切框架......

```
NSString *badJoke = [badComments objectAtIndex:rand];

CGSize maximumSize = CGSizeMake(200, CGFLOAT_MAX);//you can give any max width which you feel that suits you...

UIFont *font = [UIFont systemFontOfSize:16];/Give your font size

CGSize size = [badJoke sizeWithFont:font constrainedToSize:maximumSize lineBreakMode:NSLineBreakByWordWrapping];
//size.height will get you the total height of the lable to be created.

_mainLable=[[UILable alloc]initWithFrame:CGRectMake(50, 295, size.width, size.height)];
//if you haven't initialized.Or else you can use the same as you were using..[_mainLabel setFrame:CGRectMake(50, 295, size.width, size.height)];

_mainLabel.text= badJoke;

_mainLabel.lineBreakMode=NSLineBreakByWordWrapping;

_mainLabel.numberOfLines = 0; 
```

我不确定语法，因为我在记事本上写了代码。希望它对你有用。快乐编码:)

# android - 在应用程序的内部存储中创建子目录时删除“app_”前缀

> ID：14422445
> 
> 赞同：5
> 
> 时间：2013-01-20T07:07:00.460
> 
> 标签：android

Android 提供了许多用于在设备上持久存储数据的选项。我选择了[内部存储](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)，所以请不要建议存储在 SD 卡上。（我看到太多关于内部存储的问题有 SD 卡的答案！！）

我想在我的应用程序的内部存储目录中创建子目录。我遵循[了这个 SO answer](https://stackoverflow.com/questions/7105919/creating-directory-in-application-package-on-internal-storage)，转载如下。

```
File mydir = context.getDir("mydir", Context.MODE_PRIVATE); //Creating an internal dir;
File fileWithinMyDir = new File(mydir, "myfile"); //Getting a file within the dir.
FileOutputStream out = new FileOutputStream(fileWithinMyDir); //Use the stream as usual to write into the file. 
```

不幸的是，这是创建带有“app_”前缀的子目录。因此，从示例中，子目录看起来像“app_mydir”（不理想）。

[这个 SO question 的答案](https://stackoverflow.com/questions/10872588/make-directories-in-files-internal-storage)表明您可以通过这种方式摆脱“app_”前缀：

```
m_applicationDir = new File(this.getFilesDir() + "");
m_picturesDir = new File(m_applicationDir + "/mydir"); 
```

但我想写一个 zip 到 /data/data/com.mypackages/files/mydir/the.zip 之类的东西。

所以，最后，我的代码如下所示：

```
File appDir = new File(getApplicationContext().getFilesDir() + "");
File subDir = new File(appDir + "/subDir");
File outFile = new File(subDir, "/creative.zip"); 
```

但是，当我尝试这个时，这会产生另一个错误：“文件不存在”：

```
FileOutputStream fileStream = new FileOutputStream(outFile); 
```

我如何（1）创建一个没有“app_”前缀的子目录并（2）在其中写入一个 zip？

另外，如果我的第一个要求不合理，请在评论中告诉我原因！我确信“app_”前缀有一些让我无法理解的含义。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-20T07:17:16.167

您是否创建了目录？

```
File appDir = getApplicationContext().getFilesDir();
File subDir = new File(appDir, "subDir");
if( !subDir.exists() )
    subDir.mkdir();
File outFile = new File(subDir, "creative.zip"); 
```

请注意，您不应该`/`在应用程序的任何地方使用，以防万一它发生变化。如果您确实想创建自己的路径，请使用`File.separator`.

# c - 我在哪里获得 BIOS.h 文件，以导入 Mingw？

> ID：14422452
> 
> 赞同：1
> 
> 时间：2013-01-20T07:08:14.030
> 
> 标签：c, sys

Mingw 默认没有 BIOS.h 文件。我正在使用 netbeans IDE 和第三方工具 mingw 进行系统编程。. ?

任何人都可以帮助我，我在哪里得到那个文件？

这是代码。

```
#include<stdio.h>
#include<BIOS.H>
#include<DOS.H>

char st[80] ={"Hello World$"};

void main()
{
    _DX = (unsigned int) st;
    _AH = 0x09;
    geninterrupt(0x21);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T07:26:46.347

无处，你没有。

这些头文件 (`dos.h`和`bios.h`) 来自 16 位 DOS 编译器，例如 Turbo C 或 Open Watcom C。MinGW 是用于 Windows 的 32 位编译器。因此，即使您获得了这些头文件，它们也将毫无用处，因为：

1.  它们与 gcc 不兼容
2.  他们还需要对应的库，因为标头本身不包含诸如`geninterrupt()`
3.  DOS 中断服务 ( `int 21h`) 不适用于 Win32 程序

此外，gcc 不支持变量别名为 CPU 寄存器（例如`_DX`, `_AH`）。

您要么需要使用适当的 16 位 DOS 编译器，要么使用 gcc 和 Win32 API 提供的功能编写 Windows 程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T07:15:46.757

你真的需要吗？它已经过时了一百次左右。但据我所知，一些较旧的 Turbo C 版本可能有它。您也可以尝试[http://www.sandroid.org/TurboC/](http://www.sandroid.org/TurboC/)，但他们说该文件可能没有所有功能。

# c++ - 如何在 C++ 中将对象存储在另一个对象中？

> ID：14422453
> 
> 赞同：4
> 
> 时间：2013-01-20T07:08:58.620
> 
> 标签：c++

我想确保我正在正确地创建/销毁这个对象......

这是我的 Camera 对象的定义，其中包含对 Vector 对象的引用：

```
#ifndef CAMERA_H
#define CAMERA_H

#include "vector.h"

class Camera {
 private:
  Vector* location;
  Vector* direction;
  float velocity;
 public:
  Camera();
  ~Camera();
};

#endif 
```

在构造函数中创建：

```
#include "camera.h"

Camera::Camera() {
  location = new Vector(1.0, 1.0, 1.0);
  direction = new Vector(1.0, 1.0, 1.0);
  velocity = 0.0;
}

Camera::~Camera() {
  delete location;
  delete direction;
} 
```

然后，每当我想要一个相机对象时，我只需调用`Camera camera`.

*   我是否正确假设当变量`camera`超出范围时，将调用析构函数并且我不会遭受任何内存泄漏？

*   如果我想`camera`在范围关闭之前删除变量，执行是否正确`delete camera`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T07:10:44.047

是和是（*提供`Camera`是通过调用创建的`new`*）。
但是你也需要遵循**[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)**。

此外，重新考虑是否真的需要动态分配的成员是个好主意？
请记住，通过将原始指针与动态内存一起使用，您将负责为您的类显式执行内存管理，这很容易出错。您最好只使用实例而不是指针：

```
 Vector location;
  Vector direction; 
```

如果您必须至少使用指针，请使用**智能指针**而不是原始指针成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T07:14:26.447

> 我是否正确假设当可变相机超出范围时，将调用析构函数并且我不会遭受任何内存泄漏？

是的

> 如果我想在范围关闭之前删除可变相机，执行删除相机是否正确？

不，相机不是由`new`运营商分配的，你不能删除它，直到它超出范围。除非调用`new/delete`强制对象持续时间。

**潜在的内存泄漏：**

在下面的代码中，有可能泄漏内存。如果构造`location`完成但`direction = new Vector(1.0, 1.0, 1.0);`失败并抛出异常，则不会调用 Camera 析构函数，从而导致`location`内存泄漏。

```
Camera::Camera() {
  location = new Vector(1.0, 1.0, 1.0);
  direction = new Vector(1.0, 1.0, 1.0);
  velocity = 0.0;
} 
```

**更好的解决方案：** 不需要为 Vector 成员引入指针。应首选使用自动存储。

```
class Camera {
 private:
  Vector location;
  Vector direction;
  float velocity;

 public:
  Camera() 
  : location(1.0, 1.0, 1.0), 
    direction(1.0, 1.0, 1.0),
    velocity(0.0f)
  {
  }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T07:14:52.777

要回答您的直接问题，是的，析构函数将被触发，是的，您的内存将被清理。但是您没有为不正确的复制、分配此对象类型和虚拟破坏提供保护，这可能会导致严重的问题。更多关于这方面的细节可以通过阅读[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)和关于 SO 主题的*许多文章来找到。*

除非您需要动态分配（而且您*很*可能不需要），否则请改为：

```
class Camera 
{
private:
    Vector location;
    Vector direction;
    float velocity;
public:
    Camera();
};

Camera::Camera() 
    : location(1.0, 1.0, 1.0)
    , direction(1.0, 1.0, 1.0)
    , velocity(0.0)
{
} 
```

不需要析构函数。

# php - PHP - session_start()

> ID：14422454
> 
> 赞同：0
> 
> 时间：2013-01-20T07:08:58.233
> 
> 标签：php, session

我有一个顶部有 session_start() 的 PHP 页面。在页面进行到一半时，如果满足某个条件，则使用 JavaScript 重新加载页面。我想知道在重新加载页面时是否再次调用 session_start() 或者 PHP 是否知道由于会话已经开始而跳过它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T07:10:48.073

[session_start](http://php.net/manual/en/function.session-start.php) — 开始新的或恢复现有的会话。如果未启动则启动新会话，否则恢复现有会话。

**添加** 您可以检查并启动，例如：

```
if (session_id() == "") {
    session_start();
} 
```

# pdf - 如何在 JPanel 中使用 PDFBox 显示 pdf 文件？

> ID：14422455
> 
> 赞同：3
> 
> 时间：2013-01-20T07:08:59.243
> 
> 标签：pdf, netbeans, pdfbox

我已经在 netbeans 中创建了一个 JForm，它可以使用 PDFBox 读取 pdf 文件。但问题是我使用了非常慢的方法 PDPage.convertToImage() 。任何人都可以帮助我在 JPanel 中使用 PDFBox 以更快的速度显示 pdf 吗？

我编写的代码在 JButton 的 ActionListener 中。

```
File f = null;
ArrayList<JLabel> jl = new ArrayList<JLabel>();
BufferedImage bi = null;
JFileChooser fc = new JFileChooser();
int x=fc.showOpenDialog(null);
if(x==JFileChooser.APPROVE_OPTION)
{
    f=fc.getSelectedFile();
}
        PDDocument doc=null;
    try {
        doc = PDDocument.load(f);
    } catch (IOException ex) {
        JOptionPane.showMessageDialog(null, "not done\n"+ex);

    }
    List pages = doc.getDocumentCatalog().getAllPages();
    Iterator itr = pages.iterator();
    int q=0;
    while(itr.hasNext())
    {
        PDPage page = (PDPage)itr.next();
        try
        {
            bi = page.convertToImage();
            q++;
            jl.add(new JLabel(new ImageIcon(bi)));
        }catch(Exception e)
        {
            JOptionPane.showMessageDialog(null, e);
        }
    }
    itr = jl.iterator();
    while(itr.hasNext())
    {
        viewPanel.setVisible(false);
        viewPanel.add((JLabel)itr.next());
        viewPanel.setVisible(true);
    }
    JOptionPane.showMessageDialog(null, "done"); 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-20T09:42:29.687

NetBeans 有几个插件来显示 PDF

[http://plugins.netbeans.org/plugin/5809/java-pdf-reader](http://plugins.netbeans.org/plugin/5809/java-pdf-reader) http://plugins.netbeans.org/plugin/11676/netbeans-pdfviewer [http://plugins.netbeans.org/plugin/17/ pdf-viewer-javafx-converter-and-bookmarking-application](http://plugins.netbeans.org/plugin/17/pdf-viewer-javafx-converter-and-bookmarking-application)

您尝试过其中任何一个吗？

# perl - 在 perl 和 ksh 脚本中显示最近 3 个月的星期日

> ID：14422456
> 
> 赞同：-1
> 
> 时间：2013-01-20T07:09:01.053
> 
> 标签：perl, ksh

我想在 perl 脚本中显示最近 3 个月的星期日

例如，假设今天是 2013 年 1 月 20 日星期日，从现在开始的最后 3 个月的星期日

```
 2013-01-20
  .
  .
  2013-01-06
  .
  .
  2012-12-30

  2012-12-02
  .
  .
  2012-11-25
  .
  .
  2012-11-04 
```

它应该根据当前日期和时间更改最近 3 个月的星期日

在 linux 的 ksh 脚本中需要同样的东西

提前致谢。

* * *

这是代码..它是上周日给的..但我需要最后 3 个月的周日

```
#!/usr/bin/perl

$today = date(time);
$weekend = date2(time);

sub date {
     my($time) = @_;     

     @when = localtime($time);
     $dow=$when[6];
     $when[5]+=1900;
     $when[4]++;
     $date = $when[5] . "-" . $when[4] . "-" . $when[3];

     return $date;
}

sub date2 {
     my($time) = @_;     # incoming parameters

     $offset = 0;
     $offset = 60*60*24*$dow;
     @when = localtime($time - $offset);
     $when[5]+=1900;
     $when[4]++;
     $date = $when[5] . "-" . $when[4] . "-" . $when[3];

     return $date;
}

print "$weekend \n"; 
```

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:19:38.623

使用 Perl 的 DateTime 模块的简单解决方案。

```
#!/usr/bin/perl

use strict;
use warnings;
use 5.010;

use DateTime;

# Get the current date and time
my $now = DateTime->now;

# Work out the previous Sunday
while ($now->day_of_week != 7) {
  $now->subtract(days => 1);
}

# Go back 13 weeks from the previous Sunday
my $then = $now->clone;
$then->subtract(weeks => 13);

# Decrement $now by a week at a time until
# you reach $then
while ($now >= $then) {
  say $now->ymd;
  $now->subtract(weeks => 1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:08:56.383

在 ksh 中（使用 pdksh 和 GNU coreutils 日期测试）：

```
timestamp=`date +%s`
date=`date --date=@$timestamp +%F`
month=`date --date=@$timestamp +%Y-%m`
for months in 1 2 3; do
    while [[ $month == `date --date=@$timestamp +%Y-%m` ]]
    do
        if [[ 7 == `date --date=@$timestamp +%u` ]]; then echo $date; fi
        let timestamp-=12*60*60
        date=`date --date=@$timestamp +%F`
    done
    month=`date --date=@$timestamp +%Y-%m`
done | uniq 
```

# sql - Rails：对 3 个模型进行复杂搜索，只返回最新的 - 怎么做？

> ID：14422460
> 
> 赞同：0
> 
> 时间：2013-01-20T07:10:07.277
> 
> 标签：sql, ruby-on-rails, postgresql, ruby-on-rails-3.2

我正在尝试向我的应用程序添加一个高级搜索选项，用户可以在其中根据来自 3 个不同模型的属性搜索某些链接。

我的应用程序设置`User has_many :websites`为`Website has_many :links``Link has_many :stats`

我知道如何在 Rails 中使用连接或包含等创建 SQL 查询，**但**我遇到了困难，因为我只想检索每个链接而不是所有链接的最新统计信息 - 我不知道最有效的方法来做到这一点.

例如，假设一个用户有 2 个网站，每个网站有 10 个链接，每个链接有 100 个统计信息，总共 2,022 个对象，但我只想搜索 42 个对象（每个链接只有 1 个统计信息）。

一旦我在数据库查询中只获得了这 42 个对象，我就可以添加`.where("attribute like ?", user_input)`并返回正确的链接。

## 更新

我尝试将以下内容添加到我的 Link 模型中：

```
has_many :stats, dependent: :destroy
has_many :one_stat, class_name: "Stat", order: "id ASC", limit: 1 
```

但这似乎不起作用，例如，如果我这样做：

```
@links = Link.includes(:one_stat).all

@links.each do |l|
  puts l.one_stat.size
end 
```

我没有得到`1, 1, 1...`所有统计数据的数量：`125, 40, 76...`。

我可以使用限制选项来获得我想要的结果还是不能这样工作？

## 第二次更新

我已经根据 Erez 的建议更新了我的代码，但仍然无法正常工作：

```
has_one :latest_stat, class_name: "Stat", order: "id ASC"

@links = Link.includes(:latest_stat)

@links.each do |l|
  puts l.latest_stat.indexed
end

=> true
=> true
=> true
=> false
=> true
=> true
=> true

Link.includes(:latest_stat).where("stats.indexed = ?", false).count
=> 6

Link.includes(:latest_stat).where("stats.indexed = ?", true).count
=> 7 
```

它应该返回 1 和 6，但它仍在检查所有统计信息，而不仅仅是最新的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:02:49.193

有时，您必须突破 AR 抽象并启动您的 SQL。只是一点点。

假设您有非常简单的关系：`Website` `has_many :links`、`Link` `belongs_to :website`和`has_many :stats`、 和`Stat` `belongs_to :link`。任何地方都没有非规范化。现在，您想要构建一个查询，查找所有链接，以及每个链接的最新统计信息，但仅针对具有某些属性的统计信息（或者它可能是具有某些属性的网站或具有某些属性的链接）。

未经测试，但类似于：

```
Website
  .includes(:links => :stats)
  .where("stats.indexed" => true)
  .where("stats.id = (select max(stats2.id) 
     from stats stats2 where stats2.link_id = links.id)") 
```

最后一位子选择作为每个链接一部分的统计信息并找到最大 id。然后它会过滤掉与该最大 ID 不匹配的统计信息（从顶部的连接中）。查询返回网站，每个网站都有一些链接，每个链接在其`stats`集合中只有一个统计信息。

**一些额外的信息**

[我最初是根据窗口函数](http://www.postgresql.org/docs/9.1/static/tutorial-window.html)来写这个答案的，结果证明这有点矫枉过正，但我​​认为无论如何我都应该在这里介绍它，因为，好吧，很有趣。您会注意到，我们上面使用的聚合函数技巧之所以有效，是因为我们正在根据 ID 确定要使用的统计信息，这正是我们需要用来过滤连接中的统计信息的属性。但是，假设您只想要按 ID 以外的某些标准排名的第一个统计信息，例如`number_of_clicks`; 该技巧将不再起作用，因为聚合失去了对 ID 的跟踪。这就是窗口函数的用武之地。

同样，完全未经测试：

```
Website
  .includes(:links => :stats)
  .where("stats.indexed" => true)
  .where(                                 
     "(stats.id, 1) in (
       select id, row_number() 
       over (partition by stats2.id order by stats2.number_of_clicks DESC)
       from stat stats2 where stats2.link_id = links.id
     )"
   ) 
```

最后一个`where`子选择与每个链接匹配的统计数据并按`number_of_clicks`升序对其进行排序，然后该`in`部分将其与连接中的统计数据匹配。请注意，窗口查询不能移植到其他数据库平台。您也可以使用此技术来解决您提出的原始问题（只需交换`stats2.id`）`stats2.number_of_clicks`；可以想象它可以表现得更好，并且被这篇[博文](http://blog.hashrocket.com/posts/sql-window-functions)提倡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:25:23.223

我会试试这个：

```
has_one :latest_stat, class_name: "Stat", order: "id ASC"

@links = Link.includes(:latest_stat)

@links.each do |l|
  puts l.latest_stat
end 
```

请注意，您不能打印`latest_stat.size`，因为它是 stat 对象本身而不是关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T04:31:57.263

这是你要找的吗？

```
@user.websites.map { |site| site.links.map { |link| link.stats.last } }.flatten 
```

对于给定的用户，这将返回一个数组，其中包含该用户网站上链接的最后统计信息。

# wordpress - 当帖子标题已经存在时，如何获取唯一的元标题（帖子编号）

> ID：14422461
> 
> 赞同：-1
> 
> 时间：2013-01-20T07:10:22.513
> 
> 标签：wordpress, get, unique, title, permalinks

据我所知，如果数据库中已经存在同名的帖子，WordPress 会自动在永久链接（帖子名称）的末尾添加后缀。

但不要在 Meta 标题的末尾添加后缀，因为它取决于主题。

无论如何，我正在使用论文主题，存档元标题没有重复的元标题，

**主页**

mydomainname.com = 在第 1 页中，标题是`<title>My Homepage Title</title>`

mydomainname.com/page/ **2** = 在第 2 页中，标题为`<title>My Homepage Title — Page 2</title>`

**类别**

mydomainname.com/category/category-title = 在第 1 页，标题是`<title>My Category Title</title>`

mydomainname.com/category/category-title/page/ **2** = 在第 2 页中，标题为`<title>My Category Title — Page 2</title>`

**TAGS** 相同的，总是动态唯一的。

越来越多的第 3、4、5++ 页标题仍然是自动的（不重复）。

我在我的博客上使用论文主题（公共用户可以在前端更新帖子），用户只能在前端创建帖子，作者无法访问我的 wp-admin CMS 和论文“详细信息和附加样式”字段。那么，帖子条目标题怎么样？当用户创建具有相同标题的新帖子时如何获得此功能？

**例如，我试图做如下：**

[webresepi.com/sambal-udang](http://webresepi.com/sambal-udang) = 第一篇文章元标题是`<title>Sambal Udang</title>`

[webresepi.com/sambal-udang- **2**](http://webresepi.com/sambal-udang-2/) = 这个帖子标题已经存在于我的数据库中，所以我想要这个帖子元标题像这样`<title>Sambal Udang — 2</title>`

当数据库中已经存在帖子标题时，从该永久链接获取编号。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-20T09:47:54.453

这使用了与 faa 相同的想法，但他的解决方案中有很多东西会阻止它工作。使用 FTP 在文件夹 /wp-content/themes/ 中找到您的主题，然后将这段代码放入 functions.php 中：

```
add_action( 'template_redirect', function() {
if( is_single() ) { // Is a single post
    $slug = basename( $_SERVER['REQUEST_URI'] ); // The slug e.g. sambal-udang-2
    $slug = ucwords( str_replace( '-', ' ', $slug ) );
    add_filter( 'wp_title', function( $title ) use( $slug ) {
        return $slug;
    }); // This filter overrides wp_title which is used to print the meta title. It replaces whatever would we written normally with our edited version of the slug.
}
}); 
```

上面的代码假定您的服务器使用 PHP 5.3 或更高版本。为了支持旧系统，我们需要取消匿名函数：

```
add_action( 'template_redirect', 'xyz_tmplt_redirect' );

function xyz_tmplt_redirect() {
    if( is_single() ) {
        add_filter( 'wp_title', 'xyz_change_title' );
    }
}

function xyz_change_title( $title ) {
    $slug = basename( $_SERVER['REQUEST_URI'] ); // The slug e.g. sambal-udang-2
    $slug = ucwords( str_replace( '-', ' ', $slug ) );
    return $slug;
} 
```

# java - 以编程方式关闭由 theme.dialog 打开的对话框

> ID：14422467
> 
> 赞同：0
> 
> 时间：2013-01-20T07:11:32.037
> 
> 标签：java, android, dialog

我有两个 xml 文件和两个 java 文件。在第一个 xml 中，我有几个按钮，其中一个是 EXIT。在 java 文件中，我在 onCreate 中写入：

```
Button exitButton = (Button) this.findViewById(R.id.button_exit);
    exitButton.setOnClickListener(this); 
```

然后再往下写我写的代码：

```
@Override
public void onClick(View v) {
    switch (v.getId()) {

    case R.id.button_exit:
        Intent switchtoExit = new Intent(StartActivity.this, ExitActivity.class);
        startActivityForResult(switchtoExit, MESSAGE_REQUEST);
        break;
    }
} 
```

第二个 java 文件称为 ExitActivity.java。在清单文件中，我写道：

```
<activity android:name=".ExitActivity" 
            android:label="@string/exit_title"
            android:theme="@android:style/Theme.Dialog"/> 
```

为了使第二个xml文件像对话框一样弹出。我的第二个java文件是（像对话框一样弹出的那个）：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class ExitActivity extends Activity implements OnClickListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.activity_exit);

        Button noExitButton = (Button) this.findViewById(R.id.exit_no_button);
        noExitButton.setOnClickListener(this);
        Button yesExitButton = (Button) this.findViewById(R.id.exit_yes_button);
        yesExitButton.setOnClickListener(this);

    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.exit_no_button:
            Toast.makeText(this, "Good Choice :-D", Toast.LENGTH_SHORT).show();
            break;
        case R.id.exit_yes_button:
            Toast.makeText(this, "So sad... \nnice playing with you...", Toast.LENGTH_SHORT).show();
            break;
        //break;
        }
    }
} 
```

我的第二个java文件有：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="@color/red">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/exitTV"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/exit_body" 
            />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/exit_no_button"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/exit_no_button" 
                android:layout_weight="1.0"
                />

            <Button
                android:id="@+id/exit_yes_button"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/exit_yes_button" 
                android:layout_weight="1.0"
                />

        </LinearLayout>

    </LinearLayout>

</LinearLayout> 
```

我想做的是让一个按钮关闭对话框，另一个按钮停止应用程序。我试过finish（），它工作得很好。但是当我添加 onDestroy() 方法时，一个按钮将重新启动应用程序，而另一个按钮则将其关闭。此外，当我按下后退按钮时，它会关闭应用程序。

谁能解释我如何让以下事情发生：

1.  当对话框弹出时，我按下后退按钮，它只是关闭对话框？
2.  当我按下退出按钮时，它会关闭应用程序。
3.  当我按下停留按钮时，它会关闭对话框。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T07:18:33.953

你这样做是错误的。使用第二个活动是矫枉过正的。使用 AlertDialog，您可以使用 AlertDialogBu​​ilder 轻松制作。将其设置为具有正面和负面按钮。为在唯一活动上调用完成的肯定按钮设置 OnClickListener。你去 - 1个活动，对话框类本身将负责弹出和​​关闭自己。

# c# - 在 Visual C# 和 XNA 中复制精灵数组

> ID：14422468
> 
> 赞同：1
> 
> 时间：2013-01-20T07:11:46.943
> 
> 标签：c#, xna-4.0

我正在使用 Visual C# 2010 和 XNA 4.0 开发 Uno 纸牌游戏。我创建了一个包含所有 Uno Card 的 108 个元素的数组作为数组元素。

现在我想在游戏开始时为 4 名玩家中的每人随机分配 7 张牌。所以我正在创建一个随机数，然后将该编号的卡分配给玩家。

```
 for (int i = 0; i < 7; i++)
        {
            int r = rnd.Next(108);
            if (vis[r] != 1)  //vis[] is an array to checkk visited elements
            {

              //  u[i] = Content.Load<Texture2D>("toString.Allcards[r]");
                u[i]=Content.Load<Texture2D>(ToString("Allcards[r]"));
            } 
```

这不起作用，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:25:29.070

```
 for (int i = 0; i < 7; i++)
            {
                int r = rnd.Next(108);
                if (vis[r] != 1)  //vis[] is an array to checkk visited elements
                {

                  //  u[i] = Content.Load<Texture2D>("toString.Allcards[r]");
                    u[i]=Content.Load<Texture2D>(Allcards[r].ToString());
                } 
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:15:11.880

您想`Content.Load<Texture2D>(Allcards[r]);`假设 Allcards 是一个字符串数组。如果 Allcards 是一个 Texture2D 对象的数组，那么`Content.Load`是不必要的，因为您已经加载了它；你可以使用`u[i] = Allcards[r]`.

话虽如此，您可能不想只为玩家提供纹理；你会想给他们真正的卡片。我建议创建一个 Card 类并为其分配纹理，以及一些有用的信息，如 ID，也许还有一些属性来解释它的作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T08:31:48.097

假设 "Allcards[r]" 包含卡片的纹理（即，Allcards[1] == "Ace of Spades" 并且在您的项目中有一个名为 Ace of Spades 的纹理），您可能想要这个：

```
u[i]=Content.Load<Texture2D>(Allcards[r]); 
```

# php - 无法创建新的 OpenSSL 密钥

> ID：14422470
> 
> 赞同：0
> 
> 时间：2013-01-20T07:11:48.020
> 
> 标签：php, windows, openssl, xampp

我想学习 OpenSSL，但我只是`boolean false`在尝试使用此代码时得到：

```
$config = array('private_key_bits' => 512);
$privKey = openssl_pkey_new($config);

var_dump($privKey); 
```

OpenSSL 扩展在我的服务器上被激活。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:15:19.837

*在调用openssl_* * 函数后使用[openssl_error_string() ：](http://php.net/manual/en/function.openssl-error-string.php)

 *```
while($e = openssl_error_string() ) {
    print_r($e."\n");
} 
```

在我的 Windows 上，它输出：

```
error:02001003:system library:fopen:No such process
error:2006D080:BIO routines:BIO_new_file:no such file
error:0E064002:configuration file routines:CONF_load:system lib
error:02001003:system library:fopen:No such process
error:2006D080:BIO routines:BIO_new_file:no such file
error:0E064002:configuration file routines:CONF_load:system lib 
```

请参阅此函数[openssl_pkey_new()](http://php.net/manual/en/function.openssl-pkey-new.php)的第一个注释：

> 注意：您需要安装有效的 openssl.cnf 才能使此功能正常运行。有关详细信息，请参阅安装部分下的注释。*

# android - Android 无法插入 SQLite3 DB

> ID：14422472
> 
> 赞同：1
> 
> 时间：2013-01-20T07:12:29.813
> 
> 标签：android, sql, sqlite

我正在尝试将一些数据插入到 android 上的 SQLite DB 中，但下面的代码不起作用。任何人都可以发现问题。

```
db = this.openOrCreateDatabase("data_7.db", 0, null);
db.execSQL("CREATE TABLE IF NOT EXISTS 'group' (my_id TEXT NOT NULL, my_key TEXT NOT NULL)");
db.execSQL("INSERT INTO 'group' (my_id, my_key) VALUES ('abc', '123')");
db.close(); 
```

运行代码后，我从模拟器中提取了 SQLite 文件并使用 SQLite GUI 查看器打开它，创建了表但没有插入数据。

**笔记：**

*   我在这个网站上搜索了一整天，找不到这个问题的合适答案
*   我想在没有 .insert() 等辅助方法的帮助下做到这一点。IE。我需要使用纯 SQL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T07:54:45.900

试试这种方式：

> ```
> "INSERT INTO group (my_id, my_key) " + "VALUES ('" + field_one + "', '" + field_two + "')"; 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:08:37.247

`onCreate()`您必须在必须像这样构建的 Dababase 类上找到的方法中创建表：

```
public class Database extends SQLiteOpenHelper
{
    public static final String DB_NAME="YourDBName";
    public static final int VERSION=1;
    Context context=null;
    public Database(Context context) 
    {
        super(context, DB_NAME, null, VERSION);
        this.context=context;
    }
    @Override
    public void onCreate(SQLiteDatabase db) 
    {
        try
        {
            String sql="CREATE TABLE group(my_id TEXT NOT NULL PRIMARY KEY, my_key TEXT NOT NULL)";
            String insert="INSERT INTO group VALUES('abc','123');";
            db.execSQL(sql);     
            db.execSQL(insert);  
        }
        catch(Exception e)
        {
            Log.d("Exception", e.toString());
        }
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
    {
        db.execSQL("DROP TABLE IF EXISTS group");
        onCreate(db);
    }
} 
```

确保删除旧数据库或将版本更改为 2 以执行查询。如果您需要执行此查询，您需要编写：

```
Database db=new Database();
SQLiteDatabasse read=db.getReadableDatabase(); 
```

# php - JavaScript 与正在运行的程序来回切换

> ID：14422475
> 
> 赞同：1
> 
> 时间：2013-01-20T07:13:09.530
> 
> 标签：php, javascript, ajax, proc-open

**问题**：

我正在尝试查看是否可以在服务器端运行的程序和客户端运行的 JavaScript 之间来回切换。程序的所有输出都发送到 JavaScript 以显示给用户，用户的所有输入都从 JavaScript 发送到程序。

让 JavaScript 接收输出并发送输入很容易使用 AJAX 完成。问题是我不知道如何访问服务器上已经运行的程序。

**尝试**：

我尝试使用 PHP，但遇到了一些我无法跨越的障碍。现在，我可以使用 PHP 执行程序而没有任何问题`proc_open`。我可以挂钩`stdin`和`stdout`流，我可以从程序中获取输出并将其发送输入。但我只能这样做一次。

如果再次执行相同的 PHP 脚本（？），我最终会再次运行该程序。因此，我从多次执行中得到的只是程序`stdout`首先多次写入的内容。

现在，我`proc_open`在应该只处理输入和输出的脚本中使用，因为我不知道如何访问已经运行的程序的`stdout`和`stdin`流。在我看来，我需要在同一 PHP 脚本的多次执行中保持程序的执行状态；维护返回的**资源**`proc_open`并`pipes`连接到`stdin`和`stdout`流中。

`$_SESSION`不工作。我不能用它来维护资源。

有没有办法让程序有这样的来回？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T07:17:23.063

这听起来像是[websockets的工作](https://developer.mozilla.org/en-US/docs/WebSockets)

尝试类似[http://socketo.me/](http://socketo.me/)或[http://code.google.com/p/phpwebsocket/](http://code.google.com/p/phpwebsocket/)

我一直将 Node 用于这种类型的事情，但从上面的两个链接和其他一些链接来看，似乎 PHP 也有选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T07:22:58.520

可能有一种更有效的方法，但您可以让程序将其输出写入文本文件，并使用 php.ini 读取该文本文件的内容。这样，您就可以访问正在运行的程序中的完整数据流。管理文件大小和处理来自多个客户端的请求存在问题，但这是一种简单的方法，可能足以满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T07:50:31.123

您再次运行相同的程序，因为这是 PHP 的工作方式。在您的情况下，客户端执行 HTTP 请求并运行脚本。第二个请求将再次运行脚本。我不确定是否可以进行连续交互，因此我建议让您的脚本能够处理离散事务。

为了计算相同“交互”的不同步骤，您必须将有关先前步骤的数据保存在数据库中。基本上，您需要为每个客户端提供一些唯一的哈希值以在脚本中识别它们，然后它会知道谁发出了请求，并且能够区分来自一个用户的连续请求和不同用户的请求。

如果您的脚本很重并且运行时间很长，请考虑制作两个脚本 - 一个很重，一个用于交互（AJAX 将查询第二个）。在这种情况下，第二个脚本会将数据填充到数据库中，而繁重的脚本将从那里简单地获取它。

# php - 试图从网页中抓取所有 facebook 链接

> ID：14422477
> 
> 赞同：0
> 
> 时间：2013-01-20T07:13:21.563
> 
> 标签：php, regex

我正在尝试从 Facebook 抓取链接页面。但是，我得到一个空白页，没有任何错误消息。

我的代码如下：

```
<?php
error_reporting(E_ALL);

function getFacebook($html) {

    $matches = array();
    if (preg_match('~^https?://(?:www\.)?facebook.com/(.+)/?$~', $html, $matches)) {
        print_r($matches);

    }
}

$html = file_get_contents('http://curvywriter.info/contact-me/');

getFacebook($html); 
```

它出什么问题了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T07:34:11.533

更好的选择（并且更健壮）是使用 DOMDocument 和 DOMXPath：

```
<?php
error_reporting(E_ALL);

function getFacebook($html) {

    $dom = new DOMDocument;
    @$dom->loadHTML($html);

    $query = new DOMXPath($dom);

    $result = $query->evaluate("(//a|//A)[contains(@href, 'facebook.com')]");

    $return = array();

    foreach ($result as $element) {
        /** @var $element DOMElement */
        $return[] = $element->getAttribute('href');
    }

    return $return;

}

$html = file_get_contents('http://curvywriter.info/contact-me/');

var_dump(getFacebook($html)); 
```

* * *

但是，对于您的具体问题，我做了以下事情：

*   更改`preg_match`为`preg_match_all`，以便在第一次查找后不停止。
*   从模式中删除了`^`（开始）和`$`（结束）字符。您的链接将出现在文档的中间，而不是在开头或结尾（绝对不能同时出现！）

所以更正的代码：

```
<?php
error_reporting(E_ALL);

function getFacebook($html) {

    $matches = array();
    if (preg_match_all('~https?://(?:www\.)?facebook.com/(.+)/?~', $html, $matches)) {
        print_r($matches);

    }
}

$html = file_get_contents('http://curvywriter.info/contact-me/');

getFacebook($html); 
```

# c++ - 如何从 Python/C 过渡到 C++

> ID：14422486
> 
> 赞同：0
> 
> 时间：2013-01-20T07:15:04.577
> 
> 标签：c++

> **可能重复：**
> [权威 C++ 书籍指南和列表](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

我已经用 Python 编程了一年，同时我在 5 个月前开始学习 C。现在我面临学习 C++ 的需要。我对 C 的了解以指针结尾。我注意到 C 和 C++ 语法很常见。所以我的问题是：我需要从头开始学习 C++ 吗？或者我可以直接进入以下主题：指针、动态内存？

另外，我需要什么水平的知识才能开始学习 STL？

# java - How to switch to a Displayable class that has the main method

> ID：14422490
> 
> 赞同：2
> 
> 时间：2013-01-20T07:16:10.340
> 
> 标签：java, java-me, lcdui

I'm working in java me, I'm trying to switch between visual designs using ok Commands and back Commands. I have a form displayable which I named `formA` in my main class `A.java` and a `formB` in another class `B.java`. I used an ok Command in `formA` which on selection, is supposed to take the user to `formB`. At first when I tried to call the `getFormB` method from my main class, it didn't work(non-static method cannot be referenced from a static context).

I was adviced to create a reference to B.java so I added this line in my main class `A.java`

```
B b = new B(this); 
```

now I could call the getFormB method from my commandAction in `formA`. At this point, everything worked well but when I tried to add a backCommand which is supposed to take me back to `formA` in `A.java` I get ds error again 'non-static method `getFormA()` cannot be referenced from a static context', so I tried creating a reference in `B.java` same way I did in `A.java`, here's the code:

```
A a = new A(); 
```

then in command action I did ds on the backCommand:

```
switchDisplayable(null, a.getFormA()); 
```

This time, it compiled without errors. But at runtime I get a SecurityException MIDlet Manager ERROR:

> Illegal attempt to construct hello.A@e938beb1

'hello' is the package containing both java files.

Can anyone help me out?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:01:09.023

It seems that your A class extends MIDlet. If this is the case you should not try to make a new instance of it.
You should add an A attribute to your B class and receive the instance as a constructor parameter or have a setter method.
With this you can call the getFormA() method from the attribute.
**Update**

```
public class A extends MIDlet {
  B b;

  public A() {
    b = new B(this);
  }
}

class B {
  A a;

  B(A a) {
    this.a = a;
  }

  public void commandAction(Command c, Displayable d) {
    switchDisplayable(null, a.getFormA());
  }
} 
```

# android - 引用可绘制的大小并渲染彼此相邻的可绘制对象

> ID：14422491
> 
> 赞同：0
> 
> 时间：2013-01-20T07:16:35.147
> 
> 标签：android, canvas, bitmap, rendering

我正在开发一款使用 2D 平铺地图的游戏。地图是通过 SurfaceView 中的自定义方法 doDraw() 呈现的。这是一个简单的 double for 循环，它从 2D 数组中获取 tile 类型，确定该类型的相应位图，然后在指定坐标处将 tile 绘制到画布上。

以前我的可绘制文件夹中有占位符 .pngs。这些占位符可绘制对象是我在 ms paint 中创建的简单的 100x100 .png 纯色文件。在我用一些漂亮的纹理绘图替换占位符绘图之前，一切似乎都很好。然后我意识到我引用坐标来绘制瓷砖的方式是不正确的，实际上导致它们重叠。当瓷砖是纯色时，这并不明显，但随着纹理的出现，瓷砖的两侧被相邻的瓷砖覆盖变得非常明显。

我相信问题实际上不在于我的 doDraw() 方法，而很可能在于我引用图块大小的方式。.png 文件为 100x100，但它们可能会根据我设备的像素密度转换为不同的大小。我认为这就是正在发生的事情，我一直在阅读如何处理这个问题，但是我在那里发现的所有内容通常都是关于单个位图，而不是需要相对于绘制的许多小位图彼此。

这是我的 SurfaceView 中的相关代码：

```
public class MapView extends SurfaceView implements SurfaceHolder.Callback {

protected Context context;
public World world;
public Map<Integer,Bitmap> TILE_MAP;
public Bitmap SPRITE;
public Player player;
public Camera camera;

//hardcoded parameters for testing
private int tile_width = 50;
private int tile_height = 50;
public int screen_width = 12; //specifies how many tiles to draw in y direction
public int screen_height = 6; //specifies how many tiles to draw in x direction

public MapThread mapThread; 

public MapView(Context context, AttributeSet attrs) {

    super(context, attrs);
    this.context = context;
    Log.d("LOGCAT", "MapView created"); 

    //get the tile map
    WorldFeatures worldFeatures = new WorldFeatures(context);       
    TILE_MAP = worldFeatures.TILE_MAP;
    SPRITE = worldFeatures.SPRITE;

    SurfaceHolder holder = getHolder();
    holder.addCallback(this);

}

public void doDraw(Canvas canvas) {

    /*the draw method looks a little muddled at the moment as my camera is referencing 
    the center tile instead of the top left tile. I'll be updating that soon*/

    int screenX = 0; //reset screenX each loop 

    for (int worldX = (camera.x - screen_height/2 + 1); worldX < (camera.x + screen_height/2 + 1); worldX += 1, screenX += 1) {

        int screenY = 0; //reset screenY each loop 

        for (int worldY = (camera.y - screen_width/2 + 1);  worldY < (camera.y + screen_width/2 + 1); worldY += 1, screenY += 1) {

            canvas.drawBitmap(TILE_MAP.get(world.world_map[worldX][worldY]), screenY*tile_height , screenX*tile_width, null);

            if (player.x == worldX && player.y == worldY) { //if the player is standing here, draw the sprite
                canvas.drawBitmap(SPRITE, screenY*tile_height + tile_height/5, screenX*tile_width + tile_width/5, null);

            }

        }
    }

}

    } 
```

正如你在上面看到的，我已经硬编码了瓷砖的高度和宽度。一种抽象的方法会很好，但首先我想了解要使用的正确数字是什么。如果我将图块的高度和宽度设置为 100，我会得到图块之间的空间。如果将它们设置为 50，我会得到重叠。这告诉我要参考的正确尺寸介于两者之间。我可以一直猜测，直到我猜对了，但我想了解如何确定我的可绘制对象缩放到什么像素密度。

目前，我的可绘制对象位于我的 drawable-hdpi 文件夹中，没有其他地方。我想知道如果我把它们放在一个通用的“可绘制”文件夹中，我能否将 tile_height 和 tile_width 引用为 100x100？我已经阅读了有关获取固有高度和宽度的信息，但是当为视图或设备缩放位图时，这无济于事。即使可以根据原始可绘制尺寸以某种方式引用瓷砖尺寸，我认为应该有比通过任何特定数字引用它们更好的方法。在我的绘制方法中，我不应该能够找出缩放的大小吗？然后用它来确定将瓷砖绘制到什么坐标？更好的是，在将位图绘制到画布之前，有没有办法强制我希望位图缩放到什么大小？

[我已经在http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)阅读了像素密度、dpi、可绘制文件夹等信息，但是当我绘制相对于彼此，因此需要坐标。

我还研究了使用 Rectangles 绘制到画布，因为 Canvas 的 drawbitmap() 方法将 Rectangles 作为输入不依赖于像素密度。但是我不确定当我有一组 12x6 的瓷砖要绘制时，使用 Rectangles 会有多实用。每个图块位置需要一个矩形吗？

任何关于处理缩放位图和/或更好的方法来绘制我正在绘制的东西的解释都是最有帮助的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:45:51.173

睡觉后回答了我自己的问题。要在 android 自动缩放后获取位图的高度，请在位图上使用 getWidth() 和 getHeight()。要强制位图缩放到特定大小，请使用 scaleBitmap()

# wpf - MVVM WPF Datagrid SelectedValue 按视图模型绑定？

> ID：14422492
> 
> 赞同：2
> 
> 时间：2013-01-20T07:16:36.707
> 
> 标签：wpf

任何人都知道如何通过 ViewModel 更改数据网格的 SelectedValue。如果我们更改 View，那么它将触发 VM，但反之亦然。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T07:43:37.550

```
 public ViewModel()
    {
        PriceLogs = new ObservableCollection<PriceLog>();

        PriceLogs.Add(new PriceLog() { LogDateTime = DateTime.Now.AddDays(2), Price = 200 });
        PriceLogs.Add(new PriceLog() { LogDateTime = DateTime.Now.AddDays(20), Price = 200 });
        PriceLogs.Add(new PriceLog() { LogDateTime = DateTime.Now.AddDays(50), Price = 200 });
        PriceLogs.Add(new PriceLog() { LogDateTime = DateTime.Now.AddDays(80), Price = 600 });
        PriceLogs.Add(new PriceLog() { LogDateTime = DateTime.Now.AddDays(80), Price = 300 });
        PriceLogs.Add(new PriceLog() { LogDateTime = DateTime.Now.AddDays(2), Price = 200 });
        //Here is how you can change selected Item from ViewModel
        SelectedPriceProlog = PriceLogs.Last();
       // SelectedPriceProlog = PriceLogs[2];
  }
    public ObservableCollection<PriceLog> PriceLogs { get; set; }

    private PriceLog selectedPriceProlog;
    public PriceLog SelectedPriceProlog 
    {
        get { return selectedPriceProlog; }

        set
        {
            selectedPriceProlog = value;
            Notify("SelectedPriceProlog");
        }
    }

<DataGrid ItemsSource="{Binding PriceLogs}" SelectedItem="{Binding SelectedPriceProlog, Mode=TwoWay}"> 
```

如何设置选定值

```
 public ViewModel()
    {
        PriceLogs = new ObservableCollection<PriceLog>();

        PriceLogs.Add(new PriceLog() { LogDateTime = DateTime.Now.AddDays(2), Price = 200 });
        PriceLogs.Add(new PriceLog() { LogDateTime = DateTime.Now.AddDays(20), Price = 200 });
        PriceLogs.Add(new PriceLog() { LogDateTime = DateTime.Now.AddDays(50), Price = 200 });
        PriceLogs.Add(new PriceLog() { LogDateTime = DateTime.Now.AddDays(80), Price = 600 });
        PriceLogs.Add(new PriceLog() { LogDateTime = DateTime.Now.AddDays(80), Price = 900 });
        PriceLogs.Add(new PriceLog() { LogDateTime = DateTime.Now.AddDays(2), Price = 200 });
        //Here is how you can change selected value from ViewModel
        SelectedPrice = 900;
       // SelectedPriceProlog = PriceLogs[2];

        //Or ypu can set 
  }
    public ObservableCollection<PriceLog> PriceLogs { get; set; }

    private int selectedPrice ;
    public int SelectedPrice 
    {
        get { return SelectedPrice ; }

        set
        {
            selectedPrice = value;
            Notify("SelectedPriceProlog");
        }
    }

 <DataGrid ItemsSource="{Binding PriceLogs}" SelectedValue="{Binding SelectedPrice, Mode=TwoWay}" SelectedValuePath="Price"> 
```

您可以通过将 DataGrid 的 SelectedItem 属性绑定到 ViewModel 属性来做到这一点，该属性必须是您的 DataGrids ItemSource 和绑定必须是 TwoWay 的类型，然后您可以在 VewModel 中将该属性设置为您的集合中的任何项目。或者您可以这样做与 SelectedValue 如上所示。**现在，如果您想从 View 更改为 ViewModel Only 那么您的绑定模式必须是 OneWay**。我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T07:21:12.430

您正在寻找一个 DataBinding 更新 ViewModel 但反之亦然，因此有一个 DataBinding 模式调用`OneWayToSource`ex ：
`<TextBox Text="{Binding TextProperty, Mode=OneWayToSource}"/>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T09:58:48.113

你有两个解决方案。

*   作为 DataGrids 集合的一个项目的每个 VM 都可以实现`IsSelected`属性。然后您应该调整绑定并通知父虚拟机更新其属性`SelectedItem`或 `SelectedItems`
*   我们希望`SelectedItems`在两个方向（VM -> V 和 V -> VM）上工作，而不需要为`IsSelected`项目声明属性。
    我编写了带有几个附加属性的静态类 SelectionHelper。这些属性之一接受项目集合并保持 DataGrid.SelectedItems 与其同步。因此，我们可以控制来自 VM 的选择。
    另一个属性是 type `ICommand`。每次用户操作更改选择时，都会执行此命令。该命令的参数是DataGrid.SelectedItems 集合。
    现在我计划支持直接操作绑定集合而不是执行命令。

如果你需要我可以在明天来办公室时分享代码。

# node.js - 什么时候使用非阻塞 I/O？

> ID：14422497
> 
> 赞同：0
> 
> 时间：2013-01-20T07:17:25.383
> 
> 标签：node.js, nonblocking

我试图了解在哪些情况下 nodejs 会比它的专业人士更快。我完全理解异步 I/O 和非阻塞 I/O 这两个术语，但想不出它有用的用例。有人可以给我一个例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T07:28:11.787

Node 是为什么异步 I/O 有用的一个典型例子。

节点（就用户而言）是单线程的，因此等待同步 I/O 将*停止唯一正在执行代码的线程*。由于无法保证 I/O 将花费多长时间，这可能/将使 Node 代码运行非常缓慢。

这就是 Node 几乎只使用异步 I/O 的原因，它允许单线程快速将 I/O 工作卸载到操作系统，同时继续执行代码而不会中断，直到操作系统通知 Node I/O 操作完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-24T07:44:50.497

NodeJS 基本上是基于单线程概念的服务器端编码，因此我们必须管理该线程本身上的所有 I/O 和 CPU 工作。

我们知道，I/O 操作是正在运行的线程的基本阻塞操作（例如：I/O 操作可能包括从用户那里获取输入，或者从数据中心读取一个大文件；这些操作可能会挂起线程一段时间，这可能会导致挂起许多客户端请求）。

为了避免上述情况，NodeJS 提出了`single thread asynchronous non-blocking I/O`（也克服了在多线程情况下创建多个线程的开销）的概念。

# c - 从文件动态读取结构时 fread 不起作用

> ID：14422506
> 
> 赞同：1
> 
> 时间：2013-01-20T07:18:55.200
> 
> 标签：c, struct, fwrite, fread, file-handling

我正在创建一个链接列表，然后将其写入文件并再次读取。我正在使用 fwrite 和 fread 一次写入和读取结构的整个实例。但问题是它不能正常工作。我想在看到输出文件后写作工作正常，但仍然不确定。但是阅读根本不起作用。

下面是结构

```
struct student
{
int roll_num;
char name[100];
struct student *next;
}; 
```

下面是逻辑

```
ifd = fopen("qwer1234.txt","wb");
struct student *temp;
temp = start;
while(temp != NULL)
{
    fwrite(temp, sizeof(struct student), 1, ifd);
    temp = temp->next;
}
close(ifd);

ifd = fopen("qwer1234.txt","rb");
temp = NULL;
temp = malloc(sizeof(struct student));
fread(temp, sizeof(struct student), 1, ifd);
start = temp;
//temp->next = NULL;
printf("%s\t%d\n",temp->name,temp->roll_num);
temp = malloc(sizeof(struct student));
/*while(fread(temp, sizeof(struct student), 1, ifd) == 1)
{

    temp->next = start;
    start = temp;
    printf("%d/n",temp->roll_num);
    temp = malloc(sizeof(struct student));

}*/
close(ifd); 
```

虽然我暂时只阅读了一个实例，但它仍然无法正常工作。没有任何内容存储在 temp->name 中，0 存储在 temp->roll_num 中。我坚持了最后4个小时。我可以通过单独存储结构元素来做到这一点，但这次我想用不同的方式来做。

对于所有重要的人来说，这是一个家庭作业问题。

任何帮助将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T07:32:57.017

对于初学者，

```
close(ifd); 
```

不正确，因为它不是描述符，它是一个`FILE*`. 采用：

```
fclose(ifd); 
```

由于您没有刷新，除非它是一个相当大的列表，否则可能还没有写入任何内容，并且您的新分配将是列表中唯一的分配，因为您的文件中还没有数据。

# c++ - cmake 将 xxd 作为自定义命令运行

> ID：14422507
> 
> 赞同：1
> 
> 时间：2013-01-20T07:19:05.433
> 
> 标签：c++, cmake, embedded-resource

我有一个`rc`要`xxd -i filename`在该目录中递归运行的目录。并将生成的文件添加到我的项目中。

我正在检查一些关于lua的[答案。](https://stackoverflow.com/questions/6395350/using-cmake-with-a-custom-file-generator)我以类似的方式做到了。

```
SET(RESOURCE_COMPILER "xxd")
SET(COMPILED_RESOURCES "rc/base.css rc/common.js")
FOREACH(F ${COMPILED_RESOURCES})
    ADD_CUSTOM_COMMAND(
        OUTPUT "${COMPILED_RESOURCES}/${F}"
        COMMAND ${RESOURCE_COMPILER} -i "${COMPILED_RESOURCES}/${F}"
        COMMENT "Compiling ${F} to binary")
    LIST (APPEND COMPILED_RESOURCES "${COMPILED_RESOURCES}/${F}")
ENDFOREACH() 
```

但我根本看不到任何文件生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:39:20.653

您可能看不到输出文件有几个原因。您的 xxd 命令在 .txt 中的格式不`add_custom_command`正确，而且仅当需要输出文件作为同一 CMakeLists.txt 中另一个 CMake 目标（exe 或 lib）的源时，才会执行该命令。

我会将您的代码段更改为：

```
SET(RESOURCE_COMPILER xxd)
FILE(GLOB_RECURSE COMPILED_RESOURCES "rc/*")
FOREACH(INPUT_FILE ${COMPILED_RESOURCES})
    SET(OUTPUT_FILE ${INPUT_FILE}.hex)
    ADD_CUSTOM_COMMAND(
        OUTPUT ${OUTPUT_FILE}
        COMMAND ${RESOURCE_COMPILER} -i ${INPUT_FILE} ${OUTPUT_FILE}
        COMMENT "Compiling ${INPUT_FILE} to binary")
    LIST(APPEND COMPILED_RESOURCES ${OUTPUT_FILE})
ENDFOREACH() 
```

然后，如果您有另一个依赖于`${OUTPUT_FILE}`s 的目标，则该命令将在构建该目标时执行：

```
ADD_EXECUTABLE(MY_EXE main.cc ${COMPILED_RESOURCES}) 
```

# android - 这个drawable在哪里？

> ID：14422508
> 
> 赞同：0
> 
> 时间：2013-01-20T07:19:12.077
> 
> 标签：android, call, drawable

我使用了[这个答案](https://stackoverflow.com/a/8655456/1974738)中的代码，并成功编译了所有内容。

但是，我不知道如何使用我刚刚创建的可绘制对象。这是我的代码：

```
Drawable dr2 = getResources().getDrawable(android.R.drawable.ic_menu_manage);
Bitmap bitmap2 = ((BitmapDrawable) dr2).getBitmap();
Drawable f = new BitmapDrawable(getResources(), Bitmap.createScaledBitmap(bitmap2, 256, 256, true));

private Integer[] menu_icon = {
    android.R.drawable.f,
    // I can't figure out how to call Drawable f
}; 
```

将 drawable 转换为 后`Drawable f`，我无法找到如何调用调整大小的 drawable。我已经尝试在我的代码中使用所有可能的位置来确定它可能在哪里（/res/drawable 和其他一些位置）。但是，无论我如何尝试调用 Drawable f，我都无法编译。任何帮助将不胜感激！

（不，我在那个数组中有八个元素，但只有复制+粘贴一个）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T07:23:15.987

它只存在于内存中，而不存在于磁盘上的任何地方。您不能通过 id 引用它。相反，您需要调用采用 Drawable 而不是采用 int resourceID 的函数版本。

# android - 为什么我的 R.java 文件没有从我的 XML 文件生成显示 id 或 button1 id？

> ID：14422509
> 
> 赞同：0
> 
> 时间：2013-01-20T07:19:28.767
> 
> 标签：android, xml, eclipse, android-layout, r.java-file

我已经用谷歌搜索并阅读了几个 Stack Overflow 的答案，我很确定问题出在我的布局文件上。我还清理了我的项目，所以我的 R.java 文件被删除了，但我认为在我发现错误之后它会自动生成。

这是我的 XML 代码。

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="20sp"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/update"
        android:textSize="25sp" />

    <EditText
        android:id="@+id/guess"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:inputType="number"
        android:textSize="26sp" />

    <TextView
        android:id="@+id/display"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="6sp"
        android:paddingTop="6sp"
        android:text="@string/default"
        android:textSize="18sp" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:onClick="evaluate"
        android:text="@string/btn" />

</LinearLayout> 
```

以下是显示错误的 java 行，以防此处出现问题：

```
Button button = (Button) view;
TextView log = (TextView)(findViewById(R.id.display));
EditText field = (EditText)(findViewById(R.id.guess)); 
```

更新：这是我在 MainActivity.java 文件中的评估方法

```
public void evaluate(View view)
{
    Button button = (Button) view;
    TextView log = (TextView)(findViewById(R.id.display));
    EditText field = (EditText)(findViewById(R.id.guess));

    if(button.getText().toString().charAt(0) == 'S')
    {
        int guess = Integer.parseInt(field.getText().toString());
        if(guess == num)
        {
            log.setText("Congratulations! You guessed it in " + guessCount + "moves");
            button.setText("New game");
        }
        else
        {
            guessCount++;
            if(guess < num)
                log.setText("Try again. Too low");
            else
                log.setText("Try again. Too high");
        }
    }
    else
        refresh(button, log);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T07:55:39.427

`R.java``res`只要文件夹或文件中存在任何编译错误，就会被删除`AndroidManifest.xml`。假设您没有编译错误（除了应该引用 R.java 中的字段的文件），我的第一个调用是查看`evaluate`方法以查看它是否在当前调用`Activity`中，如下所示：

**Java 代码：**

```
public class MyActivity extends Activity {
    Button button;
    TextView log;
    EditText field;
    ...
    ...

    @Override
    public void onCreate(Bundle savedInstanceState) {
        button = (Button) new Button(this);
        log = (TextView) findViewById(R.id.display);
        field = (EditText) findViewById(R.id.guess);
        ...
        ...
        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                evaluate(v);
            }
        });
    }
    ...
    ...
    // **evaluate** is visible(public) and 
    // within the same activity where the **button** is
    public void evaluate(View v) { 
        ...
        ...

    }
} 
```

`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T07:28:42.900

eclipse 不会在 res 的文件夹中显示任何错误吗？

在：**android:onClick="evaluate"**的行中，我以前没有见过这样的值，对吗？

# asp.net - 设置标签短信统计记录

> ID：14422510
> 
> 赞同：-1
> 
> 时间：2013-01-20T07:19:32.827
> 
> 标签：asp.net, count, records

我再次问清楚，解释清楚。

我想像这样在我的 admin.aspx 上添加标签文本消息（请参见下图...我只是在绘画中对其进行编辑，以便您可以看到输出）

![在此处输入图像描述](../Images/65c757acf70721a820392bf770256e6f.png)

就我而言。我想计算待处理的记录。然后会有一个标签文本消息，通知有多少记录在等待中。该标签短信的代码是什么？

这是我的待处理记录页面 (Pending.aspx) 的代码。

```
<%@ Page Language="C#" Debug="true" %>
<%@ Import Namespace="System" %>
<%@ Import Namespace="System.Data" %>
<%@ Import Namespace = "System.Data.SqlClient" %>
<%@ Import Namespace= "System.Data.OleDb" %>
<title>Pending Records</title>

<head>
<style type="text/css">
.style1 {
    background-image: url('images/pending.jpg');
}
.style2 {
    margin-bottom: 0px;
}
</style>
<script type="text/javascript">
<!--
function FP_swapImgRestore() {//v1.0
 var doc=document,i; if(doc.$imgSwaps) { for(i=0;i<doc.$imgSwaps.length;i++) {
  var elm=doc.$imgSwaps[i]; if(elm) { elm.src=elm.$src; elm.$src=null; } } 
  doc.$imgSwaps=null; }
}

function FP_swapImg() {//v1.0
 var doc=document,args=arguments,elm,n; doc.$imgSwaps=new Array(); for(n=2; n<args.length;
 n+=2) { elm=FP_getObjectByID(args[n]); if(elm) { doc.$imgSwaps[doc.$imgSwaps.length]=elm;
 elm.$src=elm.src; elm.src=args[n+1]; } }
}

function FP_preloadImgs() {//v1.0
 var d=document,a=arguments; if(!d.FP_imgs) d.FP_imgs=new Array();
 for(var i=0; i<a.length; i++) { d.FP_imgs[i]=new Image; d.FP_imgs[i].src=a[i]; }
}

function FP_getObjectByID(id,o) {//v1.0
 var c,el,els,f,m,n; if(!o)o=document; if(o.getElementById) el=o.getElementById(id);
 else if(o.layers) c=o.layers; else if(o.all) el=o.all[id]; if(el) return el;
 if(o.id==id || o.name==id) return o; if(o.childNodes) c=o.childNodes; if(c)
 for(n=0; n<c.length; n++) { el=FP_getObjectByID(id,c[n]); if(el) return el; }
 f=o.forms; if(f) for(n=0; n<f.length; n++) { els=f[n].elements;
 for(m=0; m<els.length; m++){ el=FP_getObjectByID(id,els[n]); if(el) return el; } }
 return null;
}
// -->
</script>
</head>

<script runat="server" type="css">

protected void PendingRecordsGridview_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    PendingRecordsGridview.PageIndex = e.NewPageIndex;

    PendingRecordsGridview.DataBind();

}

protected void Page_Load(object sender, EventArgs e)
{

}

protected void PendingRecordsGridview_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "accept")
    {
        Session["ID"] = e.CommandArgument.ToString();
        OleDbConnection con = new OleDbConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
            con.Open();
            OleDbCommand cmd1 = new OleDbCommand("INSERT INTO DriversRecords (ID, FirstName, LastName, MiddleName, Address, Gender, ContactNumber, PlateNumber, Color, Brand, LiscensedNumber, [Image]) SELECT ID, FirstName, LastName, MiddleName, Address, Gender, ContactNumber, PlateNumber, Color, Brand, LiscensedNumber, [Image]  FROM PendingRecords where ID="+Session["ID"].ToString()+"", con);
            OleDbCommand cmd2 = new OleDbCommand("delete from PendingRecords where ID="+Session["ID"].ToString()+"", con);
            cmd1.ExecuteNonQuery();
            cmd2.ExecuteNonQuery();

        PendingRecordsGridview.DataBind();
    }
}

public void PendingRecordsGridview_RowDeleting(Object sender, GridViewDeleteEventArgs e)
{

}

</script>
<body onload="FP_preloadImgs(/*url*/'images/backhover.jpg')" style="margin: 0; background-color: #808080">

<form id="form1" runat="server" class="style2" style="height: 646px">

<table style="width: 1150px; height: 646px" cellspacing="0" cellpadding="0" align="center" class="style1">
    <!-- MSTableType="layout" -->
    <tr>
    <td>&nbsp;</td>
    <td></td>
    <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>

        <td style="height: 98px">&nbsp;</td>
        </tr>
    <tr>
        <td>&nbsp;</td>
        <td></td>
        <td valign="top"><a href="passwordprotect.asp">
        <img alt="" src="images/back.jpg" width="83" height="32" id="img1" onmouseout="FP_swapImgRestore()" onmouseover="FP_swapImg(1,1,/*id*/'img1',/*url*/'images/backhover.jpg')"></a></td>

        <td>&nbsp;</td>
        <td>&nbsp;</td>

        <td>&nbsp;</td>
        <td style="height: 36px">&nbsp;</td>

        </tr>
    <tr>

        <td>&nbsp;</td>
        <td></td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td style="height: 23px">&nbsp;</td>
        </tr>
    <tr>
        <td>&nbsp;</td>
        <td></td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td valign="top">
<asp:SqlDataSource runat="server" id="sd1" ProviderName="<%$ ConnectionStrings:ConnectionString.ProviderName %>" ConnectionString="<%$ ConnectionStrings:ConnectionString %>" SelectCommand="SELECT * FROM [PendingRecords]" DeleteCommand="DELETE FROM [PendingRecords] WHERE [ID] = ?" InsertCommand="INSERT INTO [PendingRecords] ([Username], [Password], [FirstName], [LastName], [MiddleName], [Address], [Gender], [ContactNumber], [PlateNumber], [Color], [Brand], [LiscensedNumber]) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)" UpdateCommand="UPDATE [PendingRecords] SET [Username] = ?, [Password] = ?, [FirstName] = ?, [LastName] = ?, [MiddleName] = ?, [Address] = ?, [Gender] = ?, [ContactNumber] = ?, [PlateNumber] = ?, [Color] = ?, [Brand] = ?, [LiscensedNumber] = ? WHERE [ID] = ?">
    <DeleteParameters>
        <asp:parameter Name="ID" Type="Int32" />
    </DeleteParameters>
    <UpdateParameters>
        <asp:parameter Name="Username" Type="String" />
        <asp:parameter Name="Password" Type="String" />
        <asp:parameter Name="FirstName" Type="String" />
        <asp:parameter Name="LastName" Type="String" />
        <asp:parameter Name="MiddleName" Type="String" />
        <asp:parameter Name="Address" Type="String" />
        <asp:parameter Name="Gender" Type="String" />
        <asp:parameter Name="ContactNumber" Type="String" />
        <asp:parameter Name="PlateNumber" Type="String" />
        <asp:parameter Name="Color" Type="String" />
        <asp:parameter Name="Brand" Type="String" />
        <asp:parameter Name="LiscensedNumber" Type="String" />
        <asp:parameter Name="ID" Type="Int32" />
    </UpdateParameters>
    <InsertParameters>
        <asp:parameter Name="Username" Type="String" />
        <asp:parameter Name="Password" Type="String" />
        <asp:parameter Name="FirstName" Type="String" />
        <asp:parameter Name="LastName" Type="String" />
        <asp:parameter Name="MiddleName" Type="String" />
        <asp:parameter Name="Address" Type="String" />
        <asp:parameter Name="Gender" Type="String" />
        <asp:parameter Name="ContactNumber" Type="String" />
        <asp:parameter Name="PlateNumber" Type="String" />
        <asp:parameter Name="Color" Type="String" />
        <asp:parameter Name="Brand" Type="String" />
        <asp:parameter Name="LiscensedNumber" Type="String" />
    </InsertParameters>
</asp:SqlDataSource>
        </td>
        <td>&nbsp;</td>
        <td style="height: 33px;">&nbsp;</td>
        </tr>
    <tr>
        <td>&nbsp;</td>
        <td></td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td style="height: 30px">&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td valign="top" colspan="5">
<asp:GridView OnPageIndexChanging="PendingRecordsGridview_PageIndexChanging" ID="PendingRecordsGridview" runat="server" AutoGenerateColumns="False" DataKeyNames="ID" OnRowcommand="PendingRecordsGridview_RowCommand" DataSourceID="sd1" BorderStyle="Ridge" BackColor="White" BorderColor="Black" BorderWidth="3px" CellPadding="4" Width="1089px" PageSize="2" AllowPaging="True" OnRowDeleting="PendingRecordsGridview_RowDeleting">
        <RowStyle ForeColor="#003399" HorizontalAlign="Center" />
        <Columns>
            <asp:templatefield HeaderText="Accept">
                <ItemTemplate>
                    <asp:Button CommandArgument='<%# Bind("ID") %>' ID="Button1" runat="server" CausesValidation="false" CommandName="accept" Text="Accept" />
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Ignore">
                <ItemTemplate>
                    <asp:Button ID="deleteButton" runat="server" CommandName="Delete" Text="Ignore" CausesValidation="False" OnClientClick="return confirm('Are you sure you want to cancel this request?');" />
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="First Name" SortExpression="FirstName">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("FirstName") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label3" runat="server" Text='<%# Bind("FirstName") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Last Name" SortExpression="LastName">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("LastName") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label4" runat="server" Text='<%# Bind("LastName") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Middle Name" SortExpression="MiddleLastName">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("MiddleName") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label5" runat="server" Text='<%# Bind("MiddleName") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Address" SortExpression="Address">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Address") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label6" runat="server" Text='<%# Bind("Address") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Gender" SortExpression="Gender">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Gender") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label7" runat="server" Text='<%# Bind("Gender") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Contact No." SortExpression="ContactNumber">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("ContactNumber") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label18" runat="server" Text='<%# Bind("ContactNumber") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Plate No." SortExpression="PlateNumber">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("PlateNumber") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label19" runat="server" Text='<%# Bind("PlateNumber") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Mobile Color" SortExpression="Color">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Color") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label11" runat="server" Text='<%# Bind("Color") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Brand" SortExpression="Brand">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Brand") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label12" runat="server" Text='<%# Bind("Brand") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield HeaderText="Liscenced No." SortExpression="LiscensedNumber">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("LiscensedNumber") %>'>
                    </asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label10" runat="server" Text='<%# Bind("LiscensedNumber") %>'>
                    </asp:Label>
                </ItemTemplate>
            </asp:templatefield>
            <asp:templatefield>
                <HeaderTemplate>
                    Image
                </HeaderTemplate>
                <ItemTemplate>
                    <img src="data:image/jpg;base64,<%# Eval("Image") != System.DBNull.Value ? Convert.ToBase64String((byte[])Eval("Image")) : string.Empty %>" alt="image" height="85" width="85" />
                </ItemTemplate>
            </asp:templatefield>
        </Columns>
        <FooterStyle BackColor="#99CCCC" ForeColor="#003399" />
        <PagerStyle HorizontalAlign="Center" BackColor="#999999" ForeColor="#003399" />
        <SelectedRowStyle BackColor="#009999" Font-Bold="True" ForeColor="#CCFF99" />
        <HeaderStyle BackColor="#A0A0A0" Font-Bold="True" ForeColor="#003399" HorizontalAlign="Center" />
        <AlternatingRowStyle BorderColor="Black" BorderWidth="3px" BorderStyle="Ridge" />
    </asp:GridView>
        </td>
        <td style="height: 333px">&nbsp;</td>
    </tr>
    <tr>
        <td style="width: 29px">&nbsp;</td>
        <td style="width: 3px"></td>
        <td style="width: 95px">&nbsp;</td>
        <td style="width: 33px">&nbsp;</td>
        <td style="width: 542px">&nbsp;</td>
        <td style="width: 422px">&nbsp;</td>
        <td style="height: 93px; width: 26px">&nbsp;</td>
    </tr>
</table>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:53:54.093

您可以使用特定 aspx 页面的 aspx.cs 页面从后端编码加载待处理请求计数，在页面加载方法中，您可以添加代码以获取特定计数，您可以将其存储在变量中并宾果游戏该变量值可以用来得到你真正想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T09:18:52.363

您可以在加载*Admin.aspx*时执行*PendingRecords*查询：

 ***示例：**假设您有一个用于处理数据库操作的*DataAccessLayer类*

```
protected void Page_Load(object sender, EventArgs e){
    if(!IsPostBack){
        int pendingRecords;
        // You can place this query in a stored procedure
        string query = "SELECT count(*) FROM [PendingRecords]";

        // Execute query or its stored procedure

        // Show total pending records in label
        lblPending.Text = pendingRecords.ToString();
    }
} 
```*

# flash - Flash cs6 有没有办法从当前场景播放动画？

> ID：14422517
> 
> 赞同：-1
> 
> 时间：2013-01-20T07:20:54.947
> 
> 标签：flash, animation, scene

当我搜索某个场景时，我找不到任何关于从某个场景播放的信息，所以请有人帮我解决这个问题。

假设我有一个有 5 个场景的动画，我如何从场景 3 预览我的动画，所以它只播放场景 3,4 和 5？

这是一部很长的动画，我厌倦了看前几个场景，只是想看看最后几个场景是如何结合在一起的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:21:17.390

我认为没有合适的方法来执行此操作，但您可以暂时将此 ActionScript 片段添加到您的第一个场景的第一帧（选择该帧，然后将代码粘贴到*Window / Actions*面板中）：

```
gotoAndPlay(1, "Scene 3"); 
```

“场景 3”是您的第三个场景的实际名称。

# if-statement - 当健康等于0时，我如何调用我的游戏结束方法？

> ID：14422518
> 
> 赞同：0
> 
> 时间：2013-01-20T07:20:57.220
> 
> 标签：if-statement, methods, global-variables, health-monitoring, method-call

我正在为我的计算机课制作游戏`Java`，我正在使用`NetBeans`。它更像是一个选择你自己的冒险游戏。如果他们选择了会对他们造成伤害的选项，我会称之为我的健康方法。

它工作正常，它可以按照我想要的方式消除损坏。我遇到的一个问题是将 if 语句发送到 gameover 方法。它给了我以下错误-

```
incompatible types
Required: boolean
Found: int 
```

请帮我解决这个问题。

```
package sauvelostdog;

import java.awt.Toolkit;
import java.util.Scanner;

public class SauveLostDog {

   //set starting health to 10

  static int playerHealth = 10;

    public static void health(int damageAmount) {

       int damage;

       //player taking 3 damage
        if (damageAmount == 3) {
            damage = 3;
            playerHealth = playerHealth - damage;
            System.out.println(playerHealth);
        } else if (damageAmount == 4) {
            //player taking 4 damage
            damage = 4;
            playerHealth = playerHealth - damage;
            System.out.println(playerHealth);
        } else if (damageAmount == 5) {
            //player taking 5 damage
            damage = 5;
            playerHealth = playerHealth - damage;
            System.out.println(playerHealth);
        }
            //this is what is giving me problems
            if(playerHealth => 0){
            gameover();

     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T07:23:36.310

变量 playerhealth 必须等于或小于零。`gameover();`当您的健康大于或等于零时，您实际上是在输出。

```
if(playerHealth <= 0){
    gameover();
} 
```

# c# - 如何获得 .m4v 格式的电影的运行时间？

> ID：14422519
> 
> 赞同：1
> 
> 时间：2013-01-20T07:21:05.277
> 
> 标签：c#, .net, wpf, windows, m4v

如何使用 C# .NET 获得电影的运行时间（在我的情况下为 .m4v）？

我不确定为此使用什么 API。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T07:26:18.720

我在一些项目中所做的方式是使用 MediaInfo 库：[链接在这里](http://mediainfo.sourceforge.net/en)

使用系统；使用 System.Runtime.InteropServices；

```
namespace MediaInfoLib
{
    public enum StreamKind
    {
        General,
        Video,
        Audio,
        Text,
        Chapters,
        Image
    }

    public enum InfoKind
    {
        Name,
        Text,
        Measure,
        Options,
        NameText,
        MeasureText,
        Info,
        HowTo
    }

    public enum InfoOptions
    {
        ShowInInform,
        Support,
        ShowInSupported,
        TypeOfValue
    }

    public enum InfoFileOptions
    {
        FileOption_Nothing      = 0x00,
        FileOption_NoRecursive  = 0x01,
        FileOption_CloseAll     = 0x02,
        FileOption_Max          = 0x04
    };

    public class MediaInfo
    {
        //Import of DLL functions. DO NOT USE until you know what you do (MediaInfo DLL do NOT use CoTaskMemAlloc to allocate memory)  
        [DllImport("MediaInfo.dll")]
        private static extern IntPtr MediaInfo_New();
        [DllImport("MediaInfo.dll")]
        private static extern void   MediaInfo_Delete(IntPtr Handle);
        [DllImport("MediaInfo.dll")]
        private static extern IntPtr MediaInfo_Open(IntPtr Handle, [MarshalAs(UnmanagedType.LPWStr)] string FileName);
        [DllImport("MediaInfo.dll")]
        private static extern IntPtr MediaInfoA_Open(IntPtr Handle, IntPtr FileName);
        [DllImport("MediaInfo.dll")]
        private static extern IntPtr MediaInfo_Open_Buffer_Init(IntPtr Handle, Int64 File_Size, Int64 File_Offset);
        [DllImport("MediaInfo.dll")]
        private static extern IntPtr MediaInfoA_Open(IntPtr Handle, Int64 File_Size, Int64 File_Offset);
        [DllImport("MediaInfo.dll")]
        private static extern IntPtr MediaInfo_Open_Buffer_Continue(IntPtr Handle, IntPtr Buffer, IntPtr Buffer_Size);
        [DllImport("MediaInfo.dll")]
        private static extern IntPtr MediaInfoA_Open_Buffer_Continue(IntPtr Handle, Int64 File_Size, byte[] Buffer, IntPtr Buffer_Size);
        [DllImport("MediaInfo.dll")]
        private static extern Int64  MediaInfo_Open_Buffer_Continue_GoTo_Get(IntPtr Handle);
        [DllImport("MediaInfo.dll")]
        private static extern Int64  MediaInfoA_Open_Buffer_Continue_GoTo_Get(IntPtr Handle);
        [DllImport("MediaInfo.dll")]
        private static extern IntPtr MediaInfo_Open_Buffer_Finalize(IntPtr Handle);
        [DllImport("MediaInfo.dll")]
        private static extern IntPtr MediaInfoA_Open_Buffer_Finalize(IntPtr Handle);
        [DllImport("MediaInfo.dll")]
        private static extern void   MediaInfo_Close(IntPtr Handle);
        [DllImport("MediaInfo.dll")]
        private static extern IntPtr MediaInfo_Inform(IntPtr Handle, IntPtr Reserved);
        [DllImport("MediaInfo.dll")]
        private static extern IntPtr MediaInfoA_Inform(IntPtr Handle, IntPtr Reserved);
        [DllImport("MediaInfo.dll")]
        private static extern IntPtr MediaInfo_GetI(IntPtr Handle, IntPtr StreamKind, IntPtr StreamNumber, IntPtr Parameter, IntPtr KindOfInfo);
        [DllImport("MediaInfo.dll")]
        private static extern IntPtr MediaInfoA_GetI(IntPtr Handle, IntPtr StreamKind, IntPtr StreamNumber, IntPtr Parameter, IntPtr KindOfInfo);
        [DllImport("MediaInfo.dll")]
        private static extern IntPtr MediaInfo_Get(IntPtr Handle, IntPtr StreamKind, IntPtr StreamNumber, [MarshalAs(UnmanagedType.LPWStr)] string Parameter, IntPtr KindOfInfo, IntPtr KindOfSearch);
        [DllImport("MediaInfo.dll")]
        private static extern IntPtr MediaInfoA_Get(IntPtr Handle, IntPtr StreamKind, IntPtr StreamNumber, IntPtr Parameter, IntPtr KindOfInfo, IntPtr KindOfSearch);
        [DllImport("MediaInfo.dll")]
        private static extern IntPtr MediaInfo_Option(IntPtr Handle, [MarshalAs(UnmanagedType.LPWStr)] string Option, [MarshalAs(UnmanagedType.LPWStr)] string Value);
        [DllImport("MediaInfo.dll")]
        private static extern IntPtr MediaInfoA_Option(IntPtr Handle, IntPtr Option,  IntPtr Value);
        [DllImport("MediaInfo.dll")]
        private static extern IntPtr MediaInfo_State_Get(IntPtr Handle);
        [DllImport("MediaInfo.dll")]
        private static extern IntPtr MediaInfo_Count_Get(IntPtr Handle, IntPtr StreamKind, IntPtr StreamNumber);

        //MediaInfo class
        public MediaInfo()
        {
            Handle = MediaInfo_New();
            if (Environment.OSVersion.ToString().IndexOf("Windows")==-1)
                MustUseAnsi=true;
            else
                MustUseAnsi=false;
        }
        ~MediaInfo() { MediaInfo_Delete(Handle); }
        public int Open(String FileName)
        {
            if (MustUseAnsi)
            {
                IntPtr FileName_Ptr = Marshal.StringToHGlobalAnsi(FileName);
                int ToReturn = (int)MediaInfoA_Open(Handle, FileName_Ptr);
                Marshal.FreeHGlobal(FileName_Ptr);
                return ToReturn;
            }
            else
                return (int)MediaInfo_Open(Handle, FileName);
        }
        public int Open_Buffer_Init(Int64 File_Size, Int64 File_Offset)
        {
            return (int)MediaInfo_Open_Buffer_Init(Handle, File_Size, File_Offset);
        }
        public int Open_Buffer_Continue(IntPtr Buffer, IntPtr Buffer_Size)
        {
            return (int)MediaInfo_Open_Buffer_Continue(Handle, Buffer, Buffer_Size);
        }
        public Int64 Open_Buffer_Continue_GoTo_Get()
        {
            return (int)MediaInfo_Open_Buffer_Continue_GoTo_Get(Handle);
        }
        public int Open_Buffer_Finalize()
        {
            return (int)MediaInfo_Open_Buffer_Finalize(Handle);
        }
        public void Close() { MediaInfo_Close(Handle); }
        public String Inform()
        {
            if (MustUseAnsi)
                return Marshal.PtrToStringAnsi(MediaInfoA_Inform(Handle, (IntPtr)0));
            else
                return Marshal.PtrToStringUni(MediaInfo_Inform(Handle, (IntPtr)0));
        }
        public String Get(StreamKind StreamKind, int StreamNumber, String Parameter, InfoKind KindOfInfo, InfoKind KindOfSearch)
        {
            if (MustUseAnsi)
            {
                IntPtr Parameter_Ptr=Marshal.StringToHGlobalAnsi(Parameter);
                String ToReturn=Marshal.PtrToStringAnsi(MediaInfoA_Get(Handle, (IntPtr)StreamKind, (IntPtr)StreamNumber, Parameter_Ptr, (IntPtr)KindOfInfo, (IntPtr)KindOfSearch));
                Marshal.FreeHGlobal(Parameter_Ptr);
                return ToReturn;
            }
            else
                return Marshal.PtrToStringUni(MediaInfo_Get(Handle, (IntPtr)StreamKind, (IntPtr)StreamNumber, Parameter, (IntPtr)KindOfInfo, (IntPtr)KindOfSearch));
        }
        public String Get(StreamKind StreamKind, int StreamNumber, int Parameter, InfoKind KindOfInfo)
        {
            if (MustUseAnsi)
                return Marshal.PtrToStringAnsi(MediaInfoA_GetI(Handle, (IntPtr)StreamKind, (IntPtr)StreamNumber, (IntPtr)Parameter, (IntPtr)KindOfInfo));
            else
                return Marshal.PtrToStringUni(MediaInfo_GetI(Handle, (IntPtr)StreamKind, (IntPtr)StreamNumber, (IntPtr)Parameter, (IntPtr)KindOfInfo));
        }
        public String Option(String Option, String Value)
        {
            if (MustUseAnsi)
            {
                IntPtr Option_Ptr=Marshal.StringToHGlobalAnsi(Option);
                IntPtr Value_Ptr=Marshal.StringToHGlobalAnsi(Value);
                String ToReturn=Marshal.PtrToStringAnsi(MediaInfoA_Option(Handle, Option_Ptr, Value_Ptr));
                Marshal.FreeHGlobal(Option_Ptr);
                Marshal.FreeHGlobal(Value_Ptr);
                return ToReturn;
            }
            else
                return Marshal.PtrToStringUni(MediaInfo_Option(Handle, Option, Value));
        }
        public int State_Get() { return (int)MediaInfo_State_Get(Handle); }
        public int Count_Get(StreamKind StreamKind, int StreamNumber) { return (int)MediaInfo_Count_Get(Handle, (IntPtr)StreamKind, (IntPtr)StreamNumber); }
        private IntPtr Handle;
        private bool MustUseAnsi;

        //Default values, if you know how to set default values in C#, say me
        public String Get(StreamKind StreamKind, int StreamNumber, String Parameter, InfoKind KindOfInfo) { return Get(StreamKind, StreamNumber, Parameter, KindOfInfo, InfoKind.Name); }
        public String Get(StreamKind StreamKind, int StreamNumber, String Parameter) { return Get(StreamKind, StreamNumber, Parameter, InfoKind.Text, InfoKind.Name); }
        public String Get(StreamKind StreamKind, int StreamNumber, int Parameter) { return Get(StreamKind, StreamNumber, Parameter, InfoKind.Text); }
        public String Option(String Option_) { return Option(Option_, ""); }
        public int Count_Get(StreamKind StreamKind) { return Count_Get(StreamKind, -1); }
    }

} //NameSpace 
```

用法 ：

```
using System;
using MediaInfoLib;

namespace ConsoleApplication1
{

    class Program
    {

        private static void Main(string[] args)
        {

            MediaInfo info = new MediaInfo();
            info.Open(@"E:\Songs Collection\Video's\Hindi Song's\Ajab.Si.By.HFZ.avi");
            var movie_lenstr = info.Get(StreamKind.General, 0, "Duration");
            Int32 movie_len;
            if (Int32.TryParse(movie_lenstr, out movie_len))
            {
                Console.WriteLine("Length of movie in milli-second : {0}", movie_len);
            }
            info.Close();

        }

    }

} 
```

有很多可用的参数，所以请浏览一下文档

*   对于 x86 操作系统：[这里](http://mediaarea.net/download/binary/libmediainfo0/0.7.61/MediaInfo_DLL_0.7.61_Windows_i386_WithoutInstaller.7z)
*   对于 x64 操作系统：[这里](http://mediaarea.net/download/binary/libmediainfo0/0.7.61/MediaInfo_DLL_0.7.61_Windows_x64_WithoutInstaller.7z)

**注意**：

1.  放置`mediainfo.dll`在应用程序目录/系统目录中
2.  确保为 x64/x86 操作系统使用正确的 dll 构建格式，否则可能会导致

> 试图加载格式不正确的程序

# matlab - MATLAB 在将 .m 文件转换为共享库期间是否会创建 c++ 文件？

> ID：14422521
> 
> 赞同：1
> 
> 时间：2013-01-20T07:21:17.710
> 
> 标签：matlab, shared-libraries

我可以通过在 matlab 中使用**deploytool**创建一个共享库和我的 .m 文件。但现在我需要来自这个 .m 文件的 .cpp 源。我知道我可以使用**Matlab coder**。但作为替代解决方案，我可以在创建 c++ 共享库期间获取由 matlab 生成的 c++ 源文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:21:32.013

将您的 MATLAB 代码部署到共享库时，MATLAB 编译器会归档和加密您的 MATLAB 代码，并创建一个小型包装库（或可执行文件）文件。当库（或可执行文件）运行时，它会解压缩和解密您的 MATLAB 代码，并针对 MATLAB 编译器运行时 (MCR) 运行它。

它不会将您的 MATLAB 代码转换为 C 或 C++，因此您无法检索任何 C++ 源代码。

MATLAB Coder 将 MATLAB 语言的子集转换为 C 代码。它不生成 C++ 代码。

# c++ - 静态常量数组

> ID：14422527
> 
> 赞同：4
> 
> 时间：2013-01-20T07:22:50.923
> 
> 标签：c++

如果我在类中将其作为数据成员读取，是`static`指整个表达式（数组本身）还是数组的元素？

`static const int* array[100];`

数组 , 是`array`静态的，还是数组包含 100 `static const int pointers`？

我假设是前者，但是这个词`const`改变含义的方式让我想知道是否`static`也会根据它在表达式中的位置来改变含义。在上面，指针`array`还不`const`是数组的元素*是* `const`，所以我想知道数组的指针是不是`static`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T07:35:24.327

**C++11 7.1.1 存储类说明符：**
§5

> static 说明符只能应用于变量和函数的名称以及匿名联合 (9.5)。块内不能有静态函数声明，也不能有任何静态函数参数。**变量声明中使用的静态说明符将变量声明为具有静态存储持续时间**(3.7.1)，除非伴随着 thread_local 说明符，它声明变量具有线程存储持续时间 (3.7.2)。静态说明符可用于类成员的声明；9.4 描述了它的作用。对于使用静态说明符声明的名称的链接，请参见 3.5。

那么你在代码示例中声明了什么？

```
static const int* array[100]; 
```

显然，您正在声明变量`array`因此`static`适用于`array`.
不要将*存储类说明符*与*cv-qualifiers*混淆，前者适用于被声明的变量，而后者适用于*类型*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T07:30:10.637

`static`,`extern`并`register`应用于您声明的变量，`array`在此示例中。

因此，您将获得一个包含 100 个指向常量整数的指针的静态数组。

# google-books - 如何使用 Google Book API 从 ISBN 获取书籍封面？

> ID：14422528
> 
> 赞同：28
> 
> 时间：2013-01-20T07:22:53.763
> 
> 标签：google-books

有没有一种简单的方法可以使用 Google Book API 从 ISBN 获取 JSON 格式的书籍封面？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-20T07:31:37.317

您可以使用`isbn:`查询，如下所示：

```
https://www.googleapis.com/books/v1/volumes?q=isbn:0771595158 
```

如果未找到 ISBN，这将返回包含图书信息或错误描述的正确 JSON 响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T04:36:42.143

如果您正在寻找有关如何获取转换图像的 Ruby（Rails、Sinatra 或控制台）答案的答案，或者就此而言，可以通过 Google Books API 获得任何详细信息，我认为[GoogleBooks](https://github.com/zeantsoi/GoogleBooks) gem 是一个不错的起点。

例如，对于相同的场景：

安装宝石

```
gem install googlebooks 
```

使用宝石

```
require 'googlebooks'
GoogleBooks.search('isbn:9781443411080').first.image_link 
```

`first`因为它返回书籍的集合。

# android - 无法触发按钮的 OnClick

> ID：14422535
> 
> 赞同：0
> 
> 时间：2013-01-20T07:24:03.807
> 
> 标签：android, triggers, onclick, onclicklistener

我知道还有其他类似的帖子，但没有一个有适合我的解决方案。

代码：[http://pastebin.com/LSC3eH8p](http://pastebin.com/LSC3eH8p) 回购：[https ://github.com/josiah14/FuelConsumptionTutorial](https://github.com/josiah14/FuelConsumptionTutorial)

当我单击按钮时，ConsCalc 活动中添加记录按钮的 OnClick 事件未触发。起初我认为这是一个热插拔问题，但我在最后 2 次测试之间完全卸载了该应用程序，并且回调仍然没有被触发。这里发生了什么？

```
public class AddRecord extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.add_record);

        // Show the Up button in the action bar.
//      getActionBar().setDisplayHomeAsUpEnabled(true);
    }

public class CalcMenu extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.calc_menu);

    // create a button object
    final Button buttonAddRecord = (Button) findViewById(R.id.buttonAddRecord);
    // attach a listener to the button
    buttonAddRecord.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // create an Intent object for this activity, including its destination class
            Intent myIntent = new Intent(CalcMenu.this, AddRecord.class);
            // run the activity
            startActivity(myIntent);
        }
    }); 
```

和清单...

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="idig.za.net.conscalc"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="15" />

        <application
            android:allowBackup="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name="idig.za.net.conscalc.GetRegistration"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
            <activity android:name="idig.za.net.conscalc.SplashScreen" >
            </activity>
            <activity android:name="idig.za.net.conscalc.CalcMenu" >
            </activity>
            <activity android:name="idig.za.net.conscalc.SearchRecord" >
            </activity>
            <activity android:name="idig.za.net.conscalc.AddRecord">
            </activity>
        </application>

    </manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T07:43:24.110

查看您的 pastebin，您似乎为 buttonAddRecord 设置了几次 onClickListener，而 OnClickListeners 为空。我认为您可能有一个复制粘贴错误，您打算为不同的按钮设置 onClickListener。

更正的代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.calc_menu);

    // create a button object
    final Button buttonAddRecord = (Button) findViewById(R.id.buttonAddRecord);
    // attach a listener to the button
    buttonAddRecord.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View v) {
                            // create an Intent object for this activity, including its destination class
                            Intent myIntent = new Intent(CalcMenu.this, AddRecord.class);
                            // run the activity
                            startActivity(myIntent);
                    }
            });

    // create a button object
    final Button buttonCalculateConsumption = (Button) findViewById(R.id.buttonCalculateConsumption);
    // attach a listener to the button
    buttonCalculateConsumption.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View v) {
//                              // create an Intent object for this activity, including its destination class
//                              Intent myIntent = new Intent(CalcMenu.this, CalculateConsumption.class);
//                              // run the activity
//                              startActivity(myIntent);
                    }
            });

    // create a button object
    final Button buttonDeleteRecord = (Button) findViewById(R.id.buttonDeleteRecord);
    // attach a listener to the button
    buttonDeleteRecord.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View v) {
//                              // create an Intent object for this activity, including its destination class
//                              Intent myIntent = new Intent(CalcMenu.this, DeleteRecord.class);
//                              // run the activity
//                              startActivity(myIntent);
                    }
            });

    // create a button object
    final Button buttonEditRecord = (Button) findViewById(R.id.buttonEditRecord);
    // attach a listener to the button
    buttonEditRecord.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View v) {
                            // TODO Auto-generated method stub
                    }
            });
} 
```

# java - 按相关实体过滤休眠条件

> ID：14422543
> 
> 赞同：4
> 
> 时间：2013-01-20T07:26:23.740
> 
> 标签：java, hibernate, jakarta-ee, criteria-api

我有一个包含相关实体集合的实体。

```
public class Student{

@OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
@JoinColumn(name = "COURSE_STUDENT_ID" , insertable=false,updatable=false)
private Set <Course> courses; 
```

我想按课程名称和学生班级 ID 过滤学生。现在我已经弄清楚了如何按类 id 过滤，但我不知道如何按 courseId 过滤，因为 Student 实体有一组课程并且表是相关的。我已经阅读了一些文章，但没有代码与我已经阅读的代码相匹配。

```
CriteriaBuilder criteriaBuilder = persistenceStore.createCriteriaBuilder();
CriteriaQuery<Object> criteria = criteriaBuilder.createQuery();
Root<Student> root = criteria.from(Student.class);
List<Predicate> params = new ArrayList<Predicate>();

params.add(criteriaBuilder.equal(root.get("classId"),classId));

Predicate[] predicates = new Predicate[params.size()];
params.toArray(predicates);
criteria.select(root);
criteria.where(criteriaBuilder.and(predicates));
Query query = persistenceStore.createQuery(criteria);
List<Student> resultList = query.getResultList(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T09:32:47.180

首先，您的实体中存在错误：在您的情况下`JoinColumn`，注释适用于关系反面的实体`Course`。

所以，如果`Course`实体有一个属性`student`，学生有一个属性，如：

```
@OneToMany(cascade = CascadeType.ALL, mappedBy = "student")
private Set<Course> courses; 
```

并且在您拥有的课程实体中（这里还指出，在数据库中，表课程有一个名为“学生”的字段：

```
@JoinColumn(name = "student", referencedColumnName = "id")
@ManyToOne(optional = false)
private Student student; 
```

阅读[此链接](http://en.wikibooks.org/wiki/Java_Persistence/OneToMany)以获取有关如何映射实体关系的入门级说明。

关于 Criteria Query，由于您想检索`Student`S 的 List，您可以以更安全的方式定义您的 CriteriaQuery：

```
CriteriaQuery<Student> criteria = criteriaBuilder.createQuery(Student.class); 
```

关于这个问题，您必须以这种方式加入表格：

```
SetJoin<Student, Course> courses = root.join("courses"); 
```

或者，使用元模型：

```
SetJoin<Student, Course> courses = root.join(Student_.courses); 
```

（如果 OneToMany 属性被定义为 a`List`或 a `Collection`，您将不得不使用相应的`ListJoin`和`CollectionJoin`类）。

在课程上，您可以应用所需的`Predicate`条件（假设 Course 实体有一个名为 的字符串属性`courseName`）：

```
Predicate p = criteriaBuilder.equal(courses.get("courseName"), "name-to-look-for"); 
```

或者，使用元模型：

```
Predicate p = criteriaBuilder.equal(courses.get(Course_.courseName), "name-to-look-for"); 
```

最后，为了正确连接谓词列表，您可以（至少）使用两种技术：

```
Predicate p1 = ...;
Predicate p2 = ...;

criteria.where(criteriaBuilder.and(p1, p2)); 
```

或者

```
List<Predicate> conditions = new ArrayList<Predicate> ();
conditions.add(p1);
conditions.add(p2);
criteria.where(conditions.toArray(new Predicate[] {})); 
```

另请参阅这篇出色的[文章](http://www.ibm.com/developerworks/java/library/j-typesafejpa/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-09T17:44:58.237

类型不匹配：无法从 cascadetype 转换为 cascadetype[]

答案是：

导入 javax.persistence.CascadeType；

导入这一行

# sql - 事实表未填充数据

> ID：14422548
> 
> 赞同：1
> 
> 时间：2013-01-20T07:27:11.513
> 
> 标签：sql

我正在尝试使用数据创建和填充三个维度和一个事实表。维度工作得很好，但我无法将任何数据放入我的事实表中。如果有人能指出我做错了什么，我将不胜感激。

非常感谢大家。

```
create table Customer
(
    CUID integer identity(1,1) primary key,
    Name varchar (25)  
)
insert into Customer select distinct  customer  from [Data]

create table Agent
(
    AID integer identity(1,1) primary key,
    Agent varchar (25)  
)
insert into Agent select distinct Seller from [Data]

create table Time
(
    TID integer identity(1,1) primary key,
    Week varchar (25),
    Month varchar (25),
    Year int 
)
insert into Time
    (Week,Month,Year)
    select distinct Day,Month,Year from [Data]

Create Table Fact
(
    CUID integer,
    AID integer,
    TID integer,
    Sale money,
    constraint pk_Fact primary key (CUID, AID, TID),
    constraint fk1_Fact foreign key (CUID)
        references Customer (CUID),
    constraint fk2_Fact foreign key (AID)
        references Agent (AID),
    constraint fk3_Fact foreign key (TID)
        references Time (TID),
)
insert into Fact
    (CUID, AID, TID, Sale)
    SELECT CUID, AID, TID, Sale
        FROM Customer, 
             Agent,
             Time,
             [Data] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:08:51.217

您需要处理立方体。在 Visual Studio 2008 中打开它并进行处理。之后，数据将可见。您是否看到维度与度量的映射是正确的？

# asp.net - 更改母版页时如何保留内容页控件的视图状态？

> ID：14422551
> 
> 赞同：0
> 
> 时间：2013-01-20T07:27:35.230
> 
> 标签：asp.net, delphi-prism, oxygene

我在 Global.asax 中使用此代码更改母版页：

```
method Global.Application_PreRequestHandlerExecute(src: System.Object; e: EventArgs);
begin
  var p: System.Web.UI.Page := System.Web.UI.Page(self.Context.Handler);
  if p <> nil then
    p.PreInit += new EventHandler(page_PreInit)
end;

method Global.page_PreInit(sender: System.Object; e: EventArgs);
var
  S: String;
begin
  var p: System.Web.UI.Page := System.Web.UI.Page(self.Context.Handler);
  if p <> nil then
    if p.Master <> nil then
    begin
      if Request.Params['__EVENTTARGET'] <> nil then
      begin
        S := Request.Params['__EVENTTARGET'];
        if S.Length > 0 then
          S := S.Substring(S.IndexOf('$') + 1);
        if S = 'lbPrint' then
          Session['P'] := '1'
        else if S = 'lbNormal' then
          Session['P'] := '0';

        if Session['P'].ToString = '1' then
          S := '/Print.Master'
        else
          S := '/Site.Master';
        if not p.MasterPageFile.ToUpper.Equals(S.ToUpper) then
          p.MasterPageFile := S;
      end;
    end;
end; 
```

每当更改母版页时，内容页中所有控件的视图状态都会丢失。我想知道如何保存它们...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:08:30.833

更改母版页确实会影响生成的控制结构。因此 ASP.NET 无法加载视图状态，因为它使用控制索引来执行此操作。

我不知道您使用的是哪个版本的 .NET，但可能有解决方案。

你试过[`ViewStateModeByIdAttribute`](http://msdn.microsoft.com/de-de/library/system.web.ui.viewstatemodebyidattribute.aspx)吗？

您可能需要一个自定义容器控件，该控件使用此属性并且是`INamingContainer`.

# jquery - jquery s3slider滑块，如何改变效果？

> ID：14422552
> 
> 赞同：0
> 
> 时间：2013-01-20T07:27:35.610
> 
> 标签：jquery, html, css

我想在我的项目中使用这个[http://www.serie3.info/s3slider](http://www.serie3.info/s3slider)插件我如何将效果更改为简单的淡入淡出，目前它具有额外的效果（类似于发光淡入淡出）

演示：[http ://www.serie3.info/s3slider/demonstration](http://www.serie3.info/s3slider/demonstration)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:27:14.393

您也可以尝试这些 jquery 插件中的任何一个。

*   [http://slidesjs.com/examples/images-with-captions/](http://slidesjs.com/examples/images-with-captions/)
*   [http://wowslider.com/html-slideshow-silence-blur-demo.html](http://wowslider.com/html-slideshow-silence-blur-demo.html)

# compression - 如何压缩我可以获得高度图？

> ID：14422555
> 
> 赞同：1
> 
> 时间：2013-01-20T07:27:49.483
> 
> 标签：compression, heightmap

我一直在玩简单的地形生成（菱形正方形算法），我开始思考我实际上能做到多大。

如果我想生成一个大陆，那么一个`1000 by 1000 km`正方形就足够大了，但如果我还想要高分辨率，它很快就会产生巨大的文件大小。`1000 by 1000 km = 1`万平方公里，如果我每米存储一个点，那么每平方公里就是一百万平方米。

如果我使用无符号短裤（最大海拔 10,000 米）并且我的数学计算正确，那就是 2TB 的数据。当然，我不能一次将它们全部存储在 RAM 中，但即使 HDD 空间每天变得更便宜，2TB 的高度图也不实用。

我开始考虑压缩数据，但我以前从未做过压缩，也不知道我能把它缩小多远，如果它从 2 变为`1.9 TB`，那就不值得了。哪些压缩方法在不丢失数据的情况下效果最好？

我愿意减小高度图的大小和分辨率，但我想让它尽可能大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T07:10:27.047

你能做什么很大程度上取决于你的需求。如果您不需要所有的几何数据并且可以节省大量的 CPU 时间，那么只需几个字节的随机种子就足以可靠地重新生成整个地形。您还可以继续将您的大陆划分为多个补丁，并为每个补丁存储一个种子。这样，您就可以可靠地重新创建大陆的较小部分，而无需每次只需要一小部分几何体时就创建整个大陆的费用。

# javascript - 使用 JavaScript 检测到不存在的网站的链接

> ID：14422560
> 
> 赞同：0
> 
> 时间：2013-01-20T07:29:07.020
> 
> 标签：javascript

我正在尝试使用 JavaScript 检测网页上损坏的链接，但遇到了问题。有什么方法可以使用客户端 JavaScript 检测不存在的 URL，如下所示？

```
function URLExists(theURL){
    //return true if the URL actually exists, and return false if it does not exist
}

//test different URLs to see if they exist
alert(URLExists("https://www.google.com/")); //should print the message "true";

alert(URLExists("http://www.i-made-this-url-up-and-it-doesnt-exist.com/")); //should print the message "false"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T07:40:44.207

由于[Same Origin Policy](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)，您需要在服务器上创建一个代理来访问该站点并发回其可用性状态 - 例如使用 curl：

```
<?PHP

$data = '{"error":"invalid call"}'; // json string
if (array_key_exists('url', $_GET)) {
  $url = $_GET['url'];
  $handle = curl_init($url);
  curl_setopt($handle,  CURLOPT_RETURNTRANSFER, TRUE);

  /* Get the HTML or whatever is linked in $url. */
  $response = curl_exec($handle);
  $httpCode = curl_getinfo($handle, CURLINFO_HTTP_CODE);
  curl_close($handle);

  $data = '{"status":"'.$httpCode.'"}';

  if (array_key_exists('callback', $_GET)) {

    header('Content-Type: text/javascript; charset=utf8');
    header('Access-Control-Allow-Origin: http://www.example.com/');
    header('Access-Control-Max-Age: 3628800');
    header('Access-Control-Allow-Methods: GET, POST, PUT, DELETE');

    $callback = $_GET['callback'];
    die($callback.'('.$data.');'); // 
  }
}
// normal JSON string
header('Content-Type: application/json; charset=utf8');
echo $data;

?> 
```

现在，您可以使用要测试的 URL 对该脚本进行 ajax 处理并读取返回的状态，可以是 JSON 或 JSONP 调用

* * *

我发现最好的仅限客户端的解决方法是加载网站的徽标或网站图标并使用 onerror/onload 但这并不能告诉我们是否缺少特定页面，只有当网站关闭或删除了他们的网站图标/徽标时：

```
function isValidSite(url,div) {
  var img = new Image();
  img.onerror = function() { 
     document.getElementById(div).innerHTML='Site '+url+' does not exist or has no favicon.ico';
  } 
  img.onload = function() { 
    document.getElementById(div).innerHTML='Site '+url+' found';
  } 
  img.src=url+"favicon.ico";
}

isValidSite("http://google.com/","googleDiv") 
```

# android - 处理程序可运行中断应用程序

> ID：14422563
> 
> 赞同：0
> 
> 时间：2013-01-20T07:29:19.143
> 
> 标签：android, handler, runnable, timertask

我有每 1 秒安排一次的计时器，由于我们不能在 timertask 中敬酒，所以我使用了 handler.post()。但是这段代码破坏了我的应用程序：

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_game);

    handler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            String text = (String) msg.obj;
            sec_view.setText(text);
        }
    };

    MyTimerTask myTask = new MyTimerTask();
    timer = new Timer();
    timer.schedule(myTask, 1000, 1000);
}

Runnable makeToast = new Runnable() {
    public void run() {
        Toast.makeText(null, "qwerty", Toast.LENGTH_LONG).show();
    }
};

class MyTimerTask extends TimerTask {
    public void run(){
        if(0 == --sec){
            handler.post(makeToast);  //breaks there
            timer.cancel();
        }
        Message msg = new Message();
        msg.obj = sec+" sekund";
        handler.sendMessage(msg);
    }
} 
```

我可以使用其他任何东西来从 timertask 敬酒吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T07:31:04.490

目前您在.just中`null`作为 Context 传递，而不是 null 以显示 toast`Toast.makeText`

```
Toast.makeText(Your_Activity.this, "qwerty", Toast.LENGTH_LONG).show(); 
```

并显示 Toast 或从 timertask 运行方法访问 UI 元素，使用[runOnUiThread()](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)作为

```
public void run() {
  Current_Activity.this.runOnUiThread(new Runnable() {
     @Override
     public void run() {
          //show your toast here
       }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T02:20:14.783

把吐司改成

Toast.makeText(getApplicationContext(), "qwerty", Toast.LENGTH_LONG).show();

然后在处理程序中的 void run 上方添加 @override 注释

# css - 我怎样才能把内容放在覆盖层上？- CSS 问题

> ID：14422565
> 
> 赞同：0
> 
> 时间：2013-01-20T07:29:20.947
> 
> 标签：css, position, overlay, z-index

div 标签有一个背景图片，我想把覆盖放在主标签的背景图片上，其余的内容放在它们上面。但是下面的代码会将覆盖标签放在内容上。

HTML：

```
<div id="nav-section">
    <div class="overlay"></div>
    <div class="container">
        <p>test</p>
        <h5>test</h5>
    </div>
</div> 
```

CSS：

```
#nav-section{
background-image: url('../img/1.jpg');
background-position: top center;
background-size: cover;
position: relative;
}

#nav-section .overlay{
position: absolute;
top: 0;
height: 100%;
width:100%;
background-color: rgba(0,0,0,0.9);
z-index: 1;
}

#nav-section .container{
height: 600px;
}

#nav-section .container ul li{
float: left;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:16:45.030

使用 z 索引。

给#nav-section .container z-index，它高于你希望他覆盖的 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T07:34:58.873

使`#nav-section .container`z-index 具有高于叠加层的相对或绝对位置。

# vector - 在 libgdx box2d 中旋转矢量，从大炮发射炮弹

> ID：14422568
> 
> 赞同：1
> 
> 时间：2013-01-20T07:29:31.830
> 
> 标签：vector, rotation, box2d, libgdx

我有一门可以发射炮弹和烟雾粒子效果的大炮，我希望炮弹从大炮的末端开始，我可以通过将大炮的宽度添加到它的 x 位置并将一半的高度添加到大炮。当大炮未旋转时，这可以正常工作，但是当我旋转大炮时，它不在正确的位置。这就是我用来尝试旋转矢量的方法。

```
Vector2 rotPos = cannon.position.tmp().add(cannon.bounds.width, cannon.bounds.height/2).rotate(cannon.angle); 
```

我怎样才能得到一个旋转的矢量，在正确的位置发射炮弹。见下图。 ![在此处输入图像描述](../Images/e815b1ae90e6a390a2c28054f11386d1.png)

更新我也尝试了下面的，同样的结果，球在左边

```
Vector2 rotPos = world.CannonBody.getWorldVector( world.CannonBody.getPosition() ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T17:39:20.307

我遇到了一个和你类似的问题。这是一个有答案的问题：

[安卓。如何沿它所面对的方向移动对象（使用 Vector3 和四元数）](https://stackoverflow.com/questions/18485854/android-how-to-move-object-in-the-direction-it-is-facing-using-vector3-and-qua/18489102)

你需要类似的东西

```
translation.set(baseDirection).rot(modelInstance.transform).nor() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T00:30:15.660

你描述问题的方式，你只解决了一个案例。这真的只是一个数学问题。想想你要射击的方向，大炮的枪管，作为一个圆上的坐标。

既然你知道角度，这很容易。在中心画一个圆点。然后从中心到右边缘画一条线。然后从第一条线向上以 45 度角画另一条线。用直线连接边缘上的两个点。你现在有一个三角形。

让我们将 45 度角线称为“r”。我们称第一行为 x，最后一行为 y。

你应该有这样的东西：http: [//i.stack.imgur.com/MJNWZ.jpg](http://i.stack.imgur.com/MJNWZ.jpg)

我们知道 sin(angleInRadians) = y/r。做一点代数，我们可以把它变成 r*sin(angleInRadians) = y

繁荣，你有你的y坐标。

几乎相同的东西： cos(angleInRadians) = x/r

所以 r*cos(angleInRadians) = x

这是你的 x 坐标。

您可以直接从 box2d 获得身体的角度，这很容易。您只需要为“r”选择一个值，该值代表您用来以给定角度概念化大炮枪管的圆的正确半径。如果大炮围绕圆心旋转，则 r 是大炮的长度。

# c# - 注册和注销 OCX dll

> ID：14422572
> 
> 赞同：0
> 
> 时间：2013-01-20T07:30:08.960
> 
> 标签：c#, .net, ocx

为什么要注册 DLL？我对 DLL 有很多基本的疑问，我试图将它们放在下面列出的问题表格中：

1.  为什么我们需要注册一个DLL？

2.  当我们注册一个 DLL 时会发生什么？

3.  当我在 C# 代码中使用“LoadLibrary”时，我不进行任何注册。两者之间有什么联系/区别？（注册 DLL 和加载 DLL）

4.  我可以注册所有的 DLL 吗？或者是否有一些无法注册的 DLL，为什么？

如果有人可以推荐一些在线文章来澄清我的疑问，那将有很大帮助！否则代码片段。

我正在使用这段代码，但它并没有给出我需要的东西，这就是我在这里问的原因....它在 32 位机器上工作正常，但它在 64 位机器上给出了拒绝路径错误

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;
using System.Security;
using System.Management;
using System.IO;
using CCC_DLLRegistar.LoadLibrary;
using System.Security.Principal;
using System.Diagnostics;

namespace CCC_DLLRegistar
{
    public partial class Form1 : Form
    {

        #region Is64BitOperatingSystem (IsWow64Process)

        public static bool Is64BitOperatingSystem()
        {
            if (IntPtr.Size == 8)  // 64-bit programs run only on Win64
            {
                return true;
            }
            else  // 32-bit programs run on both 32-bit and 64-bit Windows
            {
                // Detect whether the current process is a 32-bit process 
                // running on a 64-bit system.
                bool flag;
                return ((DoesWin32MethodExist("kernel32.dll", "IsWow64Process") &&
                    IsWow64Process(GetCurrentProcess(), out flag)) && flag);
            }
        }

        static bool DoesWin32MethodExist(string moduleName, string methodName)
        {
            IntPtr moduleHandle = GetModuleHandle(moduleName);
            if (moduleHandle == IntPtr.Zero)
            {
                return false;
            }
            return (GetProcAddress(moduleHandle, methodName) != IntPtr.Zero);
        }

        [DllImport("kernel32.dll")]
        static extern IntPtr GetCurrentProcess();

        [DllImport("kernel32.dll", CharSet = CharSet.Auto)]
        static extern IntPtr GetModuleHandle(string moduleName);

        [DllImport("kernel32", CharSet = CharSet.Auto, SetLastError = true)]
        static extern IntPtr GetProcAddress(IntPtr hModule,
            [MarshalAs(UnmanagedType.LPStr)]string procName);

        [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        static extern bool IsWow64Process(IntPtr hProcess, out bool wow64Process);

        #endregion

        #region Is64BitOperatingSystem (WMI)

        public static bool Is64BitOperatingSystem(string machineName,
            string domain, string userName, string password)
        {
            ConnectionOptions options = null;
            if (!string.IsNullOrEmpty(userName))
            {

                options = new ConnectionOptions();
                options.Username = userName;
                options.Password = password;
                options.Authority = "NTLMDOMAIN:" + domain;
            }
            // Else the connection will use the currently logged-on user

            // Make a connection to the target computer.
            ManagementScope scope = new ManagementScope("\\\\" +
                (string.IsNullOrEmpty(machineName) ? "." : machineName) +
                "\\root\\cimv2", options);
            scope.Connect();

            ObjectQuery query = new ObjectQuery(
                "SELECT AddressWidth FROM Win32_Processor");

            // Perform the query and get the result.
            ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);
            ManagementObjectCollection queryCollection = searcher.Get();
            foreach (ManagementObject queryObj in queryCollection)
            {
                if (queryObj["AddressWidth"].ToString() == "64")
                {
                    return true;
                }
            }

            return false;
        }

        #endregion

        public Form1()
        {
            InitializeComponent();
        }

        private string _RootPath = string.Empty;
        private string _path = string.Empty;
        private List<string> _Regfiles;

        DLLHelper obj;

        public string path
        {
            get { return _path; }
            set { _path = value; }
        }

        public string RootPath
        {
            get { return _RootPath; }
            set { _RootPath = value; }

         }

        private void Form1_Load(object sender, EventArgs e)
        {

            // Solution 1\. Is64BitOperatingSystem (IsWow64Process)
            // Determine whether the current operating system is a 64 bit 
            // operating system.
            bool f64bitOS = Is64BitOperatingSystem();
            //Console.WriteLine("The current operating system {0} 64-bit.",
            //    f64bitOS ? "is" : "is not");

            // Solution 2\. Is64BitOperatingSystem (WMI)
            // Determine whether the current operating system is a 64 bit 
            // operating system through WMI. The function is also able to 
            // query the bitness of OS on a remote machine.
            try
            {
                f64bitOS = Is64BitOperatingSystem(".", null, null, null);
                //Console.WriteLine("The current operating system {0} 64-bit.",
                //    f64bitOS ? "is" : "is not");
                if (f64bitOS == true)
                {
                    RootPath = "C:\\windows\\SysWow64\\";
                }
                else
                {
                    RootPath = "C:\\Windows\\System32\\";
                }

                bool isAdmin = new WindowsPrincipal(WindowsIdentity.GetCurrent())
                 .IsInRole(WindowsBuiltInRole.Administrator) ? true : false;

                if (isAdmin)
                {
                    MessageBox.Show("you are an administrator");
                }
                else
                {
                    MessageBox.Show("You are not an administrator");
                }
                path = Application.StartupPath + "\\CCC DLL\\";

                List<string> regsvr = new List<string>();

                foreach (string s in Directory.GetFiles(path, "*.*").Select(Path.GetFileName))
                {
                    regsvr.Add(Application.StartupPath + "\\CCC DLL\\" + s);
                }

                foreach (string filepath in regsvr)
                {
                    Registar_Dlls(filepath);
                }

                _Regfiles=new List<string>();
                foreach (string s in Directory.GetFiles(path, "*.dll").Select(Path.GetFileName))
                {
                    _Regfiles.Add(Application.StartupPath + "\\CCC DLL\\" + s);
                    if (DLLHelper.UnmanagedDllIs64Bit(Application.StartupPath + "\\CCC DLL\\" + s) == true)
                    {
                        MessageBox.Show("62 bit");
                    }
                    else
                    {
                        MessageBox.Show("32 bit");
                    }
                }

                foreach (string s in Directory.GetFiles(path, "*.ocx").Select(Path.GetFileName))
                    _Regfiles.Add(Application.StartupPath + "\\CCC DLL\\" + s);

                    foreach (string filepath in _Regfiles)
                    {
                        obj = new DLLHelper(filepath);
                        obj.DumpToFile(RootPath + obj.GetDLLName());                       
                    }

                    MessageBox.Show("Register Colmpleted");

            }
            catch (Exception ex)
            {
                //Console.WriteLine("Is64BitOperatingSystem throws the exception: {0}",
                //    ex.Message);
                MessageBox.Show(ex.Message.ToString());
            }
        }

        public  void Registar_Dlls(string filePath)
        {

            try
            {
                //'/s' : Specifies regsvr32 to run silently and to not display any message boxes.
                //string arg_fileinfo = "/s" + " " + "\"" + filePath + "\"";

                string arg_fileinfo = RootPath +"\regsvr32.exe"+" "+ "/s" + " "  + "\"" + filePath;
                Process reg = new Process();
                //This file registers .dll files as command components in the registry.
                reg.StartInfo.FileName = "cmd.exe"; //"regsvr32.exe";
                reg.StartInfo.Arguments = arg_fileinfo;
                reg.StartInfo.UseShellExecute = false;
                reg.StartInfo.CreateNoWindow = true;
                reg.StartInfo.RedirectStandardOutput = true;
                if (System.Environment.OSVersion.Version.Major >= 6)
                {
                    reg.StartInfo.Verb = "runas";
                }
                reg.Start();
                reg.WaitForExit();
                reg.Close();
               // MessageBox.Show("Successfully Registered your Ocx files");
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }

    }
} 
```

# plc - 在欧姆龙PLC中使用<>

> ID：14422574
> 
> 赞同：1
> 
> 时间：2013-01-20T07:31:03.233
> 
> 标签：plc

我的梯形逻辑中有一个 <>305，就像这样

```
<> D19720 D3890 
```

然后在它之后我有一个小于和一个更大的然后像这样

```
cf002  cf005 
```

它的作用是检查编码器当前值 (d19720) 和存储值 (d3890) 以确保它们是相同的值。由于它是一个编码器，因此该值不需要太多 + 或 - 2 。

有什么办法可以保留上面的代码，但说它是否大于或小于当前数字 +/- 4？

因此，如果存储的值为 500 ，则更大的 then 直到 504 才会出现，而较小的 then 直到 496 才会出现

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:38:35.497

当然。当我需要超过编码器范围的输出时，我通常会做的事情是

```
|                                             12.34
|--[  >=  ]---[  <=  ]--------------------------O
|  [ D100 ]   [ D100 ]
|  [ D201 ]   [ D202 ] 
```

`12.34`当 D100 介于 D201 和 D202 的值范围之间时，此功能会通电。在这种情况下，您将 D100 作为您的编码器值，D201 将是`496`，D202 将是`504`。

当然，在这个梯级之上，您需要一个梯级（可能总是打开），`500`在这种情况下，它将获取您的设定点值 ( )，然后减去 4，然后存储在 D201 中；并添加4并存储在D202中。

# javascript - 移动时在 div 后创建虚线“轨迹”

> ID：14422579
> 
> 赞同：3
> 
> 时间：2013-01-20T07:32:23.767
> 
> 标签：javascript, jquery, html, css

我有这个[演示](http://www.aaronlumsden.com/articles/recreate-paths-ios-style-navigation-using-html-css3-jquery/)中使用的菜单的一个经过大量修改的版本：

当较小的圆圈散开时，我想在中央主要项目和较小的外圈之间放置多个小“点”，这将形成连接这两个项目的虚线。

它会产生与此类似的效果，但以放射状图案（橙色圆圈）多次：

![上述演示的草图，所需圆圈为橙色](../Images/7e9e24853e0904c8152a9fc6c8960d74.png)

动态完成此任务的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T11:02:12.230

通常对于这种事情，我建议使用像[Raphael](http://raphaeljs.com)这样的库。使用图形库而不是 HTML DOM 来呈现图形效果确实会使事情变得更容易，尤其是当事情变得更加复杂时，而且它可以实现的事情也更加灵活。Raphael 站点有很多关于它能够做什么的演示，我想说，一旦你掌握了 Raphael API 的窍门，这样的效果会很容易。缺点是如果你走这条路，你可能不得不使用 Raphael 编写整个菜单，所以你会扔掉你已经拥有的东西并从头开始。

因此，在这种情况下，既然您已经有了一个只使用常规 HTML 元素的工作演示，那么您不妨使用现有的。修改它似乎不应该太难；只需在主菜单元素后面添加额外的几组元素，并将它们设置为以与它们跟随的菜单元素相同的速度进行动画处理，但距离更短。

这是相当多的额外标记，但应该做得很好。我不会给你详细的说明，因为可能有一百种方法。而且我没有时间想出一个完整的教程，但归根结底，它应该只是复制+粘贴的情况。不是最优雅的代码编写方式，但它应该可以工作。我可以预见的唯一警告是，如果您同时在屏幕上播放五倍的动画内容，它可能会减慢速度。但是，一旦您使事情正常进行，就可以进行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T11:05:02.687

我已经创建了一个您需要的动画[示例。](http://jsfiddle.net/MvRbQ/1/)这是如何完成的：

创建具有径向渐变背景的橙色点并重复它：

```
background: radial-gradient(circle, orange 5px, transparent 5px) 15px 0;
background-size: 20px 10px; 
```

旋转元素：

```
transform: rotate(-45deg);
transform-origin: 0 0; 
```

当后圆飞出时，改变元素宽度，使用过渡使其平滑。在我的示例中，我使用了动画，但没有太大区别。

```
transition: width 2s; 
```

# facebook - Like for Dutch 的描述，描述变为：Niet Beschikbaar

> ID：14422580
> 
> 赞同：0
> 
> 时间：2013-01-20T07:32:46.927
> 
> 标签：facebook, facebook-like

我有一个网站，在 facebook 上注册为应用程序（使用 fb 登录）。该网站是英文的，并且在页面的元数据中有 og:title og:description app id 等。

如果人们喜欢网站上的页面，描述和标题会很好地放在他们的时间线上。

但是，如果他们在荷兰语中使用 Facebook，他们会在时间轴上获得标题，但他们分享的文章的描述被替换为 4 次“niet beschikbaar”（这意味着“不可用”）

我用德语尝试了 Facebook，但那里使用了英文描述....

这是 Facebook 的错误吗？还是我？为什么只有（看起来）使用荷兰语的 fb 用户出现“错误”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:59:11.233

我确实有同样的问题。来自 facebook 的工具/调试 lint 没有看到任何错误。

**报告了一个错误，请参阅：**

[http://developers.facebook.com/bugs/326334460804515?browse=search_51130494eb59c1a06817175](http://developers.facebook.com/bugs/326334460804515?browse=search_51130494eb59c1a06817175)

那里没有解决方案，希望很快就会有。

更多信息：

聚合

聚合的某些组件由 Facebook 翻译，而其他组件由您的应用程序翻译。

通常，对象由您的应用程序翻译，与操作相关的字符串由 Facebook 翻译。

**聚合**

聚合的标题及其所有标题文本均通过标准的 Facebook 国际化流程进行翻译。对对象标题和对象描述的引用由您的应用程序翻译。

资料来源：[https ://developers.facebook.com/docs/technical-guides/opengraph/internationalization/](https://developers.facebook.com/docs/technical-guides/opengraph/internationalization/)

我真的认为这是翻译中的错误。

问候，

凯文·霍克曼

# django-rest-framework - django rest 框架教程 4 序列化器概念

> ID：14422584
> 
> 赞同：1
> 
> 时间：2013-01-20T07:33:25.817
> 
> 标签：django-rest-framework

[我在http://django-rest-framework.org/tutorial/4-authentication-and-permissions.html](http://django-rest-framework.org/tutorial/4-authentication-and-permissions.html)完成了教程 1-4并运行了代码。

但是，我并不完全理解周围的解释：

```
owner = serializers.Field(source='owner.username') 
```

我对哪个字段引用哪个字段感到困惑。

1.例如models.py中的Snippet类中定义了一个owner字段。在查看[https://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey](https://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey)后，它说`ForeignKey()`返回一个类。它会返回`auth.User`课程吗？

2.如果有，“所有者”是做什么的

```
owner = serializers.Field(source='owner.username') 
```

参考？我在 的导入部分没有找到所有者`serializers.py`。

`serializers.Field(source='owner.username')`3.退货是什么？它是否返回 auth.User 中的用户名？

4.如果对应的模型有对另一个表的字段引用，我们是否应该在序列化器类中添加对应的字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:20:07.280

source = 'owner.username' 将转换为 'user.username' 因为所有者只不过是 FK-User。

请注意，在您的情况下，字段左侧的“所有者”在这里并不重要。即，您仍然可以添加自定义字段，例如，

```
xyz = serializers.Field(source='owner.username') 
```

# ruby - class_eval 的 Ruby 问题

> ID：14422586
> 
> 赞同：1
> 
> 时间：2013-01-20T07:34:03.390
> 
> 标签：ruby, setter, class-eval

我正在尝试运行以下命令，但我不断收到

> “NoMethodError：#/Foo:0x86f69ba/ 的未定义方法 `bar='”

```
 class Class
    def my_attr_accessor(name)

    attr_name = name.to_s  
    attr_reader name       
    attr_reader "my_"+name 
    class_eval %Q"def #{name}=(val)
                 @#{name}=val
                 end"
      end

    end 
```

我实际上正在使用类似于这篇文章的内容：[Ruby - Using class_eval to define methods](https://stackoverflow.com/questions/9561072/ruby-using-class-eval-to-define-methods)

编辑：你说得对，我做出了改变来反映这一点..非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T07:41:05.577

`class_eval`是一种方法，但您在此处分配了一个变量 ( `class_eval =`)

# azure - 如何在我的应用程序中实现 Windows Azure 或其他云平台？

> ID：14422592
> 
> 赞同：1
> 
> 时间：2013-01-20T07:35:07.093
> 
> 标签：azure, cloud

我为 Windows store 8 制作了一个简单的生产力应用程序，审阅者最需要的功能是云同步。我试过找到一些关于如何实现它的教程，但没有发现任何有用的东西。

我是否必须将 Windows Azure 用于 Windows store 8 应用程序，因为据我所知，它只提供 3 个月的试用期，而且不值得付费，因为我的应用程序是免费的，没有收入来源。

是否还有其他易于集成到应用程序中且免费的云计算平台？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T12:50:26.563

Eventually every cloud provider would charge you for using their services and even under free mode, they will provide services with certain caveats. For example, Windows Azure Websites are currently free for 1 year when running under shared mode. Amazon AWS provides a free usage tier ([http://aws.amazon.com/free/](http://aws.amazon.com/free/)) but it also has some limitation and the moment you go above those, you will be charged.

Not knowing much about your application, there're three possible solution I could recommend (just thinking out loud :):

1.  Keep a free version of the product with no cloud syncing (as you have currently).
2.  Provide a **ad supported free version** of the product with cloud syncing(kind of freemium offering).
3.  Provide a **paid, ad-free version** of the product with cloud syncing.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T09:21:04.437

[SkyDrive](http://windows.microsoft.com/en-IN/skydrive/download)（正式名称为 Microsoft SkyDrive，以前称为 Windows Live SkyDrive 和 Windows Live 文件夹）是一种文件托管服务，允许用户将文件上传和同步到云存储。

它提供 7 GB 的免费云存储空间，可从任何地方访问。

# image-processing - OpenCV 图像处理

> ID：14422593
> 
> 赞同：2
> 
> 时间：2013-01-20T07:35:17.850
> 
> 标签：image-processing, opencv

我有一张图像，我想放大并以高细节查看。它的大小未知，大部分是黑白的，上面有一些文字。当我放大文本变得不可读时，我认为这是因为没有足够的像素/纹素来显示，所以我将图像放大了 2 倍。现在我已经缩放了它，它仍然不可读。

然后我开始使用 OpenCV：

```
void resizeFirst(){
  Mat src = imread( "../floor.png", 1 );
  Mat tmp;
  resize(src,tmp,Size(),3,3,INTER_CUBIC);
  Mat dst = tmp.clone();
  Size s(3,3);
  //blur( tmp, dst, s, Point(-1,-1) );//homogeneous
  GaussianBlur(tmp, dst, s, 3);//gaussian
  //medianBlur ( tmp, dst, 5 );//median
  //bilateralFilter ( tmp, dst, 5, 5*2, 5/2 );
  addWeighted(tmp, 1.5, dst, -0.5, 0, dst);
  imwrite("sharpenedImage.png",dst);
}

void blurFirst(){
  Mat src = imread( "../floor.png", 1 );
  Size s(3,3);
  Mat dst;
  GaussianBlur(src, dst, s, 3);//gaussian
  addWeighted(src, 2, dst, -1, 0, dst);
  Mat tmp;
  resize(dst,tmp,Size(),3,3,INTER_CUBIC);
  imwrite("sharpenedImage0.png",tmp);
} 
```

并且输出更好，但图像仍然不清晰。有没有人对放大图像时如何保持文本清晰有任何想法？

编辑：下面是示例图像。

![原始图像](../Images/920a60d5e389f9b1b352a85c5d35ea21.png)

![增强图像](../Images/b68942a846a39512ad8f16d50ee87f4c.png)

第一个是较小的原始分辨率，第二个是我调整大小并尝试按照以下方式进行高斯锐化

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T08:42:18.777

调整大小功能提供不同的插值方法

```
INTER_NEAREST nearest-neighbor interpolation
INTER_LINEAR bilinear interpolation (used by default)
INTER_AREA resampling using pixel area relation. It may be the preferred method for image decimation, as it gives moire-free results. But when the image is zoomed, it is similar to the INTER_NEAREST method
INTER_CUBIC bicubic interpolation over 4x4 pixel neighborhood
INTER_LANCZOS4 Lanczos interpolation over 8x8 pixel neighborhood 
```

尝试所有插值方法并使用最适合您的一种。但是，调整大小功能会改变图像的纵横比。

# javascript - Tumblr 帖子上的鼠标悬停 Div

> ID：14422595
> 
> 赞同：0
> 
> 时间：2013-01-20T07:35:41.770
> 
> 标签：javascript, html, mouseover

我发现了这个漂亮的代码：

```
<div style="width: 80px; height: 20px; background-color: red;" 
     onmouseover="document.getElementById('div1').style.display = 'block';">
   <div id="div1" style="display: none;" onmouseout="document.getElementById('div1').style.display = 'none';"> Text</div>
</div> 
```

我一直在尝试使用在 Tumblr 上显示/隐藏预先确定的 div 的 div，但我可能使用错了，这会工作还是我必须使用其他代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:46:47.120

这是您需要的功能。

html

```
<div class="divStyle" onmouseover="showHide()" onmouseout="showHide()">
   <div id="div1" class="displayNone"> Text</div>
</div> 
```

css

```
.divStyle { width: 80px; height: 20px; background-color: red; }
.displayNone { display: none; } 
```

javascript

```
function showHide() {
    var obj = document.getElementById('div1');
    if(obj.style.display == 'block'){
        obj.style.display = 'none';
    }
    else
    {
        obj.style.display = 'block';
    }
} 
```

# validation - 尽管来自 ace:textAreaEntry 验证器的验证失败，但 JSF actionListener 被调用

> ID：14422602
> 
> 赞同：0
> 
> 时间：2013-01-20T07:37:38.637
> 
> 标签：validation, jsf-2, icefaces-3

我正在使用 ICEfaces 3.2。我为特定`ace:textAreaEntry`字段定义了一个验证器方法。如果我的验证器中的验证代码失败，我将在上下文中添加一条面孔错误消息。我希望当这个错误消息被添加到上下文中时，我`actionListener`不会被执行。但我注意到的是，即使在我的验证器向上下文中添加了 faces 错误消息之后，也会`actionListener`执行。我认为因为验证失败，面孔不会执行`actionlistener`.

XHTML 文本区域入口代码：

```
<ace:textAreaEntry
  id="addrincountryofincorp"
  value="#{strformbean.addrInCountryOfIncorp}"
  required="true" styleClass="#{facesContext.validationFailed?'ui-state-error':''}"
  label="Address in Country of Incorporation" cols="50" rows="5"
  validator="#{strformbean.validateAddrLen}" /> 
```

验证器方法：

```
public void validateAddrLen(FacesContext fc,UIComponent uc, Object obj){
  int len = 0;
  Map compAttr = uc.getAttributes();
  log.debug("inside validateAddrLen...");
  log.debug("obj = "+obj);
  if(obj !=  null && ! obj.equals("")){
    len = obj.toString().length();
    if(len > 200){
      Utility.addValMesgToContext(compAttr.get("label").toString() + " cannot exceed 200 Characters");
      return;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:09:57.157

仅当您实际抛出一个`javax.faces.validator.ValidatorException`

尝试在里面抛出一个带有 FacesMessage 的异常：

```
FacesMessage msg = new FacesMessage("my validaton message");
msg.setSeverity(FacesMessage.SEVERITY_ERROR);
throw new ValidatorException(msg); 
```

# magento - 如何检查 magento 是否在 zend 服务器上运行

> ID：14422603
> 
> 赞同：0
> 
> 时间：2013-01-20T07:37:52.520
> 
> 标签：magento, zend-server

我在cent os上。我想按照我的 TL 的指示在 zend 服务器上安装 magento。我已经通过命令“yum erase httpd”删除了我的 Apache。后来我安装了zend服务器。*我通过运行http://localhost:10081/zendserver*验证了 zend 服务器。它正在运行。

后来我下载了magento并授予了媒体、应用程序等文件夹的权限。然后我输入*http://localhost/magento*然后安装窗口出现，我提供了所需的详细信息。所以现在magento管理面板在*http://localhost/magento/index.php/admin*和主页在*http://localhost/magento。*我的疑问是，在浏览器中，如果我只给出*'localhost'* apache 服务器主页即将到来。如果我作为*localhost:10081*给出，那么 zend 服务器主页正在工作。

我的 zend 服务器文档根目录是 /var/www/html。我只把我的magento文件夹放在那里。

我想清楚我的magento在哪台服务器上运行？我是否清除了apache？

请解决我的疑惑......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T10:19:52.167

创建一个文件 - info.php 并将这样的代码放入其中：

```
<?php phpinfo(); ?> 
```

打开

```
 http://localhost:10081/info.php
 http://localhost/info.php 
```

查看 SERVER_SOFTWARE 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:26:49.153

您也可以使用

php phpinfo();

死（）;

在文件开头的 index.php 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-09T11:46:02.783

好的，不要担心这有点令人困惑，因为它发生在所有新的 Zend Server 用户身上......

当您安装 Zend Server 时，您最终会安装几个程序：

Web 服务器：apache（或 nginx，如果您选择该选项） 应用服务器：Zend Server DB 服务器：MySQL

我的猜测是，当您运行命令删除 httpd 时，它删除了您的可执行文件，但在 /etc/httpd/httpd.conf （或您的操作系统中的等效项）中保留了您的配置

当 Zend Server 安装它的 apache 时，该进程可能已经获取了您以前的配置。

检查 etc 中是否有任何关于 httpd.conf 的内容，并将那里的虚拟主机设置与您在 Zend 服务器中的设置进行比较，这可能会告诉您这是正在发生的事情还是发生了其他事情。

# sql - 从Table1中选择不重复的数据并插入Table2

> ID：14422605
> 
> 赞同：0
> 
> 时间：2013-01-20T07:39:00.057
> 
> 标签：sql

我有一个表，我们将其称为 Table1，其中包含一堆垃圾数据，并且没有唯一标识符列。

我想从 Table1 中选择一些列并将数据传输到 Table2。但是，我想防止插入来自 3 列的重复条目。

假设我有一行需要传输的列`[FirstName]`, `[LastName]`, `[CompanyName]`,`[City]`和。我只希望将具有、和`[State]`的唯一组合的行连同它们各自的和一起复制到 Table2 中。`[FirstName]``[LastName]``[CompanyName]``[City]``[State]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T07:45:47.533

我假设您有如下数据要清理：

```
名字 | 姓氏 | 公司名称 | 城市 | 状态
-------------------------------------------------- --------
鲍勃 | 史密斯 | 美国广播公司 | 纽约 | 纽约
鲍勃 | 史密斯 | 美国广播公司 | 纽瓦克 | 新泽西州
简 | 亚当斯 | ACME | 西雅图 | 西澳

```

因此，我假设您的意思是“他们各自的城市和州”是指“从相应行中随机选择的一个城市和州”，这实际上使问题变得困难：

```
WITH [Names] AS (
    SELECT DISTINCT [FirstName], [LastName], [CompanyName]
    FROM Table1
)
INSERT INTO Table2 ([FirstName], [LastName], [CompanyName], [City], [State])
SELECT [FirstName], [LastName], [CompanyName], [City], [State]
FROM [Names]
CROSS APPLY
(
    SELECT TOP 1 [City], [State]
    FROM Table1
    WHERE Table1.[FirstName] = [Names].[FirstName]
    AND Table1.[LastName] = [Names].[LastName]
    AND Table1.[CompanyName] = [Names].[CompanyName]
) [FirstRespectiveAddress] 
```

如果“一些随机行”对您不起作用，您将必须明确定义每个人要选择哪个城市和州。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T07:58:28.450

如果您对每个组合选择哪个城市/州没有任何偏好`FirstName / LastName / CompanyName`，您可以使用 a`LEFT JOIN`相当简单地完成它，而不依赖于任何特定的 SQL 方言；

```
INSERT INTO Table2
SELECT DISTINCT t1.FirstName, t1.LastName, t1.CompanyName, t1.City, t1.State
FROM Table1 t1
LEFT JOIN Table1 d
ON t1.FirstName = d.FirstName AND t1.LastName  = d.LastName AND
   t1.CompanyName = d.CompanyName AND (t1.City > d.City OR t1.State > d.State)
WHERE d.FirstName IS NULL; 
```

[SQLfiddle 演示](http://sqlfiddle.com/#!6/196d1/3)。

该查询将基本上采用所有没有更大（按排序顺序）城市/州组合的行（每个名字/姓氏/公司名组合）并显示它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T07:53:41.687

您可以创建一个循环，开始传输每一行并在每个插入查询之前放置 if 条件检查另一个查询的行数，该查询检查您插入的 Col 的值是否存在。例如，从表中选择 Col,Col,Col，其中 Col=您要插入的值，它适用于您需要多少列。比制作​​ mysql_num_rows，如果 var 大于零，它已经在表中，你不要插入它。希望你明白。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T08:07:16.110

此查询应该只为您提供具有 [FirstName]、[LastName] 和 [CompanyName] 的唯一组合的行：

```
SELECT t1.FirstName, t1.LastName, t1.CompanyName, t1.City, t1.State
FROM Table1 t1
INNER JOIN (
   SELECT FirstName, LastName, CompanyName
   FROM Table1
   GROUP BY FirstName, LastName, CompanyName
   HAVING COUNT(*) = 1
) t2 ON t1.FirstName = t2.FirstName AND t1.LastName = t2.LastName AND t1.CompanyName = t2.CompanyName 
```

# html - 使用 CSS 限制下拉列表中显示的选项

> ID：14422609
> 
> 赞同：0
> 
> 时间：2013-01-20T07:40:09.543
> 
> 标签：html, css, select, options

是否有任何 css 属性可以限制下拉列表中显示的选项。

我知道在 select 中设置**size = 'value'**会将 drpdown 中显示的选项限制为该值。这可以使用css实现吗？

```
<select size="5">
<option>1</option>
<option>2</option>
<option>3</option>
<option>4</option>
<option>5</option>
<option>6</option>
<option>7</option>
<option>8</option>
<option>9</option>
<option>10</option>
<option>11</option>
<option>12</option>
</select> 
```

使用它，可见选项的数量将限制为 5。这可以在 css 中完成吗？实际上，我的应用程序中有很多下拉菜单，为每个下拉菜单添加大小非常耗时，我可能需要更改之后显示的项目数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T07:46:56.503

向要更改的选择添加一个类：

```
<select class="limit">
...
</select> 
```

然后使用一些jQuery：

```
$('.limit').attr('size', 5); 
```

这是一个[例子](http://jsfiddle.net/FG6QW/)。

# codeigniter - CodeIgniter 和设置字符的问题

> ID：14422615
> 
> 赞同：1
> 
> 时间：2013-01-20T07:40:59.523
> 
> 标签：codeigniter, chars

我使用 CodeIgniter 和 MySQL。我收到以下消息：

> 无法初始化字符集 iso 8859-15（路径：/usr/share/mysql/charsets/）

我使用托管服务器，无法访问 usr 目录。这是 CI mysql_driver 类中关于字符集的函数：

```
function db_set_charset($charset, $collation) {
  if (!isset($this->use_set_names)) {
    // mysql_set_charset() requires PHP >= 5.2.3 and MySQL >= 5.0.7, use SET NAMES as fallback
    $this->use_set_names = (version_compare(PHP_VERSION, '5.2.3', '>=') && version_compare(mysql_get_server_info(), '5.0.7', '>=')) ? FALSE : TRUE;
  }
  if ($this->use_set_names === TRUE) {
    return @mysql_query("SET NAMES '".$this->escape_str($charset)."' COLLATE '".$this->escape_str($collation)."'", $this->conn_id);
  } else {
    return @mysql_set_charset($charset, $this->conn_id);
  }
} 
```

CI Config 具有 UTF-8 设置：

```
$config['charset'] = 'utf-8'; 
```

我的 Notepad++ 分别设置为 UTF-8 和 ANSI。如何将全局 MySQL 设置更改为 UTF-8？我是否必须`config.php`在我的 Web 服务器设置中添加 MySQL 字符设置？喜欢`character_set_database="utf-8"`。

为什么会出现带有 iso-8859 的通知？对我来说，iso-8859 很好，因为它可以显示德语特殊字符，而 UTF 不能。

我有解决方案： CI 在 conig.php 中设置为以下 `$config['charset'] = 'utf-8';`

当我`utf8_encode`在打印前使用时，我将 char 设置硬编码为 UTF 8 并且它可以工作。如果我不使用该功能，它将显示错误的字符。我不明白为什么我必须使用该功能，因为配置设置具有 UTF-8。我试图打印`$config['charset']`以验证，但没有输出。

蒂莫

# android - AlertDialog 按钮大小没有改变

> ID：14422619
> 
> 赞同：1
> 
> 时间：2013-01-20T07:41:50.320
> 
> 标签：android, android-layout, android-alertdialog, android-button, android-dialog

我有一个具有背景资源的警报对话框。当我设置背景资源时，图像的大小在我的屏幕上占据了很大的空间。请让我知道如何控制按钮的大小。提前致谢。

以下是代码片段。

```
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()){
    case R.id.bNewTicket:    
        // custom dialog 
        LayoutInflater li = LayoutInflater.from(context);
        final View promptsView = li.inflate(R.layout.homepagedialognewticket, null);
        AlertDialog.Builder alertDialogBuilder  = new AlertDialog.Builder(context); 
        alertDialogBuilder.setView(promptsView); 

        // set dialog message
        alertDialogBuilder.setPositiveButton("Go", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) { 
                    EditText etTableNumber,etGuestCount;  
                    etTableNumber = (EditText) promptsView.findViewById(R.id.etTableNumber);
                    etGuestCount  = (EditText) promptsView.findViewById(R.id.etGuestCount);
                    tableNumber = etTableNumber.getText().toString();
                    guestCount  = etGuestCount.getText().toString();  
                    dialog.cancel();
                    if ( tableNumber.isEmpty() || guestCount.isEmpty() ) {
                        Dialog d = new Dialog(context);
                        d.setTitle("Alert  ");
                        TextView tv = new TextView(context);
                        tv.setText("Table # and Guest # are mandatory ");
                        d.setContentView(tv);
                        d.show();
                    } else{  
                        new longRunningProcess().execute("newticket",null,null);  
                        }
                }
              })
              .setNegativeButton("Back",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) { 
                dialog.cancel();
                }
              });

        AlertDialog alertDialog = alertDialogBuilder.create(); 
        alertDialog.show();  

        Button imagebutt = alertDialog.getButton(AlertDialog.BUTTON_POSITIVE); 
        imagebutt.setBackgroundResource(R.drawable.go); 

        if (imagebutt != null) imagebutt.setHeight(20);
        break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:37:07.457

在 alertDialog 上的 show() 之后尝试在按钮上执行 setHeight。

# html - 表格对齐问题

> ID：14422620
> 
> 赞同：0
> 
> 时间：2013-01-20T07:41:54.457
> 
> 标签：html

> **可能重复：**
> [HTML 表格无论如何都无法适应整个屏幕](https://stackoverflow.com/questions/14415905/html-table-wont-fit-whole-screen-no-matter-what)

基本上，我的网站上有一张不适合浏览器屏幕 100% 宽度的表格。即使我将宽度更改为 110%，它也只是与右侧重叠，但左侧仍有一个边距空间（表格的外部空间）。我希望表格从左到右完全压在浏览器屏幕上，完全没有空格或边框。我该怎么做呢？我已经尝试了一切，但仍然无法正常工作。我什至尝试了负边距和填充

请帮助我失去理智。这是我的 HTML 代码：

提前致谢

编辑：抱歉不包括代码。由于某种原因，它一直说格式不正确。代码现在在我对 rob 的回复中。

# c++ - xml文件保存在两个不同的路径

> ID：14422636
> 
> 赞同：0
> 
> 时间：2013-01-20T07:45:24.233
> 
> 标签：c++, xml, visual-c++, windows-installer, tinyxml

我创建了将一些数据存储到 XML 文件的应用程序。问题在于 XML 保存的路径。我正在使用 TinyXML 将数据保存在 vc++ 中。

当我部署此应用程序时，它会安装在`"C:\Program files(x86)\applicationname "`其中，当我运行应用程序时，XML 文件会保存在其中

```
"C:\Users\UserName\AppData\Local\VirtualStore\Program Files (x86)\ApplicationName ". 
```

我已经让这个应用程序在系统启动时工作。所以当我重新启动这个应用程序时，xml文件存储在不同的路径中`"C:\Users\UserName\AppData\Local\VirtualStore\windows\sysWOW64"`

我希望我的 XML 存储在我安装的路径中或应该存储在 appdata、应用程序名称中

我应该怎么做才能将 XML 文件存储在安装应用程序的地方？

```
doc.SaveFile( "test.xml" ); // xml saving code in tinyxml library 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T09:00:52.717

首先，这与 C++ 无关，因为 C++ 代码可能正在工作。与 XML 和 tinyxml 甚至 visual-c++ 相同。

似乎 Windows 将这些写访问重定向到特定于用户的“VirtualStore\Program Files”，但我会留给你研究它的实际语义。在启动时，当没有用户时，这条路径明显不同，因为以前的用户没有登录。

现在，为了获得固定路径，您可以使用该函数`GetModuleFileName()`找出可执行文件的位置，并使用该路径定位 Smartmeter.xml。但是，您现在面临的问题是安装在“程序文件”下的程序不会神奇地获得对其安装目录的写访问权限。这是为了防止一个用户弄乱另一个用户的数据。

我认为你正在做的是编写一个在后台运行的程序，这在 MS Windows 下被称为“服务”。仍然不清楚的是你想用这个文件实现什么，以及你总体上打算做什么，这些都是决定未来步骤的事情。无论如何，看看服务提供的可能性，也许有适合您需求的东西。

# ios - Cocos2D + 仅禁用 Retina iPad 图形

> ID：14422637
> 
> 赞同：1
> 
> 时间：2013-01-20T07:45:34.883
> 
> 标签：ios, xcode, ipad, cocos2d-iphone, retina-display

从 Xcode 4.3+ 导出基于 cocos2d 的游戏时，我现在遇到了问题。

虽然我不打算在我的游戏中包含 iPad Retina 图形，但似乎游戏需要 Retina iPad 图形，并且现在仅在 iPad Retina 上错误地加载了所有内容。

仅在从基于比例的 UI 加载资产时，是否有一种快速简单的方法来禁用 iPad Retina 图像？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T08:17:22.650

所以这很简单。将此代码添加到 AppDelegate.m 文件

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
    [director enableRetinaDisplay:NO];

} else {

    [director enableRetinaDisplay:YES];

} 
```

繁荣。希望这可以帮助其他人，因为我没有看到任何现成的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-10T22:08:51.313

截至 2015 年 7 月，这仍然很有效。你只需要像这样改变它：

```
if ( [[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad )
    {
        [director_ enableRetinaDisplay:NO];
    } else {
        if( ! [director_ enableRetinaDisplay:YES] )
    } 
```

# google-drive-api - 与 Google Drive UI 集成 - 向 Open URL 添加 2 个参数

> ID：14422640
> 
> 赞同：1
> 
> 时间：2013-01-20T07:46:47.057
> 
> 标签：google-drive-api

当我通过 Google Drive UI 打开文件时，有没有办法向 Open URL 添加 2 个参数？如果没有，我可以将这些参数添加到我通过重定向请求获得的状态参数中吗？public ActionResult Index(字符串状态，字符串代码)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:11:13.530

抱歉，您不能向该重定向 URI 添加参数。

但是，您可以自己启动授权流程（请参阅 Drive SDK 的开发者控制台，并取消选中“当用户从 Drive 打开我的应用程序时自动启动 OAuth 2.0 流程”）这将允许您使用标准 OAuth 2.0，您可以在其中使用你喜欢的任何状态参数。这种方法很可能会成为推荐的使用 open with 进行授权的方法。

# text - .txt 文件在 readlines() 下表现得很奇怪

> ID：14422642
> 
> 赞同：1
> 
> 时间：2013-01-20T07:47:17.910
> 
> 标签：text, python-2.7, textedit, readlines

该文件的内容如下所示：

```
1/15/13,930,1441.5
1/15/13,1000,1442.75
1/15/13,1030,1444 
```

我跑：

```
the_txt_file = open('/txt_file') 
```

然后我运行：

```
the_txt_file_as_a_list =  the_txt_file.readlines() 
```

然后我运行：

```
print the_txt_file_as_a_list 
```

我明白了：

```
['1/15/13,930,1441.5\r1/15/13,1000,1442.75\r1/15/13,1030,1444\r1/'] 
```

但我期待的是这样的：

```
['1/15/13,930,1441.5\n','15/13,1000,1442.75\n','15/13,1030,1444\n'] 
```

这种情况经常发生在我身上，这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:32:34.897

所以看来这个问题与我的mac与.txt文件交互的方式有关

通过交换解决了该问题：

```
the_txt_file = open('/txt_file') 
```

和：

```
the_txt_file = open('/txt_file', 'rU') 
```

'rU' 被称为'universal-readline'。以“rU”模式打开文件是以通用读取线模式打开文件。运行时：

```
the_txt_file_as_a_list =  the_txt_file.readlines() 
```

接着：

```
print the_txt_file_as_a_list 
```

我的输出来自：

```
['1/15/13,930,1441.5\r1/15/13,1000,1442.75\r1/15/13,1030,1444\r1/'] 
```

至：

```
['1/15/13,930,1441.5\n', '1/15/13,1000,1442.75\n', '1/15/13,1030,1444\n'] 
```

后来，我能够通过以下方式单独打印每个项目：

```
for item in the_txt_file_as_a_list:
    print item 
```

输出看起来像：

```
1/15/13,930,1441.5

1/15/13,1000,1442.75

1/15/13,1030,1444 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T08:21:26.347

我假设您或此数据文件的原始创建者在 Mac 上。似乎您期望它是一个简单的 '\n' 行结尾，但会受到原始编辑器系统默认行结尾的影响（很可能）。

一个简单的解决方法是`open(...)`使用如下`rU`选项调用：

`the_txt_file = open('/txt_file', 'rU')`

这确保文件以只读方式打开**，**并在读取特定文件时使用**通用**换行支持。

祝你好运！

# iphone - 将导航栏添加到 MoviePlayer

> ID：14422646
> 
> 赞同：0
> 
> 时间：2013-01-20T07:47:58.293
> 
> 标签：iphone, ios, ipad, mpmovieplayercontroller

就播放视频而言，我正在尝试找出我可以用 iPad 做什么。我有以下 UIButton 操作的代码。

```
- (IBAction)playClick:(id)sender {
NSBundle *bundle = [NSBundle mainBundle];
NSString *moviePath = [bundle pathForResource:@"video3" ofType:@"m4v"];
NSURL  *movieURL = [NSURL fileURLWithPath:moviePath];
MPMoviePlayerController *theMovie = [[MPMoviePlayerController alloc] initWithContentURL:movieURL];
theMovie.scalingMode = MPMovieScalingModeAspectFill;
[theMovie play];
MPMoviePlayerViewController *moviePlayer = [[MPMoviePlayerViewController alloc] initWithContentURL:movieURL];
[self presentMoviePlayerViewControllerAnimated:moviePlayer];
} 
```

![视频](../Images/da2529bc9353a33f10869a51691b91f5.png)

如上所示，我确实得到了一个电影屏幕。我想知道是否可以在电影屏幕的顶部（“完成”上方）或底部（控制器下方）包含一个导航栏，以便在用户播放视频时添加一些操作？我想[这个话题](https://stackoverflow.com/questions/6677333/iphone-add-button-on-mpmovieplayerviewcontrollers-navigation-bar)可能与我正在尝试做的事情有关。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T10:35:08.663

您可以使用添加更多按钮，

```
UIBarButtonItem *button = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(yourButtonAction:)]; 
moviePlayer.navigationItem.rightBarButtonItem = button; 
```

根据您的需要自定义这些按钮。

试试这个。希望有意义。

问候

# html - 在 CSS 中使用相对定位

> ID：14422649
> 
> 赞同：0
> 
> 时间：2013-01-20T07:48:23.227
> 
> 标签：html, css

我有一个显示基本用户信息的 div。'search-person' div 的高度为 'auto'。这样个人资料图片的大小就可以是动态的，最高可达 170 像素。现在，我想在个人资料图片上显示一个按钮，我想为 div 中的内容添加相对定位并将其向上移动并在按钮下方，按钮似乎不想正常工作。我能做错什么？

这是我的问题：

[http://jsfiddle.net/C9Zj5/](http://jsfiddle.net/C9Zj5/)

```
#wrap {
    position: relative
    height: auto;
    width: auto;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:42:11.647

包含相对位置的 div 应该包含在另一个具有绝对位置的 div 中，以便它可以正确浮动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:45:41.560

如果您设置`position:absolute`为`#buttons`它们，您将在个人资料图片上看到按钮。使用`left`和`top`将按钮定位在您想要的任何位置`#person-wrap`。

我不确定*“我想在 div 中的内容中添加相对定位并将其向上和在按钮下方移动”*是什么意思，但是如果你想在里面显示信息，`#person-wrap`你可以使用绝对位置或负边距.

**旁白**`div`：在链接标签中包含元素不是一个好习惯。还有为什么你需要一个按钮？也许您还需要重新考虑 html 结构；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T07:56:22.607

制作`#person-wrap` `position:relative`然后`#buttons`div `position:absolute`。这应该会给你你正在寻找的效果。

# python - 使用 Django 类视图获取当前登录用户？

> ID：14422651
> 
> 赞同：11
> 
> 时间：2013-01-20T07:48:59.443
> 
> 标签：python, django, views

我正在尝试获取当前登录的用户并显示在每个视图的顶部。我已经到处搜索了这个，但我永远找不到我的问题的直接答案。

我能够在表单视图中获得它，但由于某种原因我无法在普通视图中显示它。它快把我逼疯了。

```
from django.http import HttpResponse, Http404
from django.views.generic import ListView, DetailView, FormView
from django.template import RequestContext, loader, Context
from django.core.urlresolvers import reverse
from boards.models import Links, LinksCreateForm, Category
from django.contrib.auth.models import User

def get_user(request):
    current_user = request.get.user
    return current_user

class LinksListView(ListView):
    model = Links

class LinksDetailView(DetailView):
    model = Links

class LinksCreateView(FormView):
    template_name = 'boards/link_create.html'
    form_class = LinksCreateForm

    def form_valid(self, form):
        name = form.cleaned_data['name']
        description = form.cleaned_data['description']
        user = self.request.user
        category = Category.objects.get(id=form.cleaned_data['category'].id)
        link = Links(name=name, description=description, user=user, category=category)
        link.save()
        self.success_url = '/boards/'

        return super(LinksCreateView, self).form_valid(form) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-20T07:57:01.167

在您的通用视图实现中，您需要扩展`get_context_data`

```
def get_context_data(self, **kwargs):
# Call the base implementation first to get a context
        c = super(ReqListView, self).get_context_data(**kwargs)
        user = self.request.user
        return c 
```

然后，这取决于您的要求，您想用它做什么。

[为通用 get_context_data 扩展通用视图类](https://stackoverflow.com/questions/10337290/extending-generic-view-classes-for-common-get-context-data)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-20T07:52:02.127

在您的视图中，您可以访问请求（因此也可以访问用户）：

```
self.request.user 
```

由于您正在谈论在“视图”顶部显示它，我相信您希望在模板中访问它。

您应该能够在模板中访问它：

```
{{ request.user }} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-20T08:40:30.753

您可以在 settings.py 中添加`'django.core.context_processors.request'`，`TEMPLATE_CONTEXT_PROCESSORS`然后以`{{ request.user }}`. 如果您没有此变量，则可以将其添加为：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.request',
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'django.core.context_processors.tz',
    'django.contrib.messages.context_processors.messages'
) 
```

[https://docs.djangoproject.com/en/1.4/ref/settings/#std:setting-TEMPLATE_CONTEXT_PROCESSORS](https://docs.djangoproject.com/en/1.4/ref/settings/#std:setting-TEMPLATE_CONTEXT_PROCESSORS)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T18:13:31.453

正如@sneawo 指出的那样，添加到模板上下文处理器是最好的方法。但是，我**不喜欢覆盖**默认值，而是**扩展**它。像这样：

```
from django.conf.global_settings import TEMPLATE_CONTEXT_PROCESSORS as TCP
# ...
TEMPLATE_CONTEXT_PROCESSORS = TCP + (
    'django.core.context_processors.request',
) 
```

为什么？因为 django 中的默认上下文处理器列表会随着版本的变化而变化。一些内置/附带的（contrib）库依赖于默认设置。一般来说，我认为最好不要覆盖默认值，除非你必须这样做。

# ubuntu - 如何配置 Jetty 8 以使用 syslog

> ID：14422653
> 
> 赞同：3
> 
> 时间：2013-01-20T07:49:06.413
> 
> 标签：ubuntu, jetty, syslog

在 Ubuntu 上运行我希望 Jetty 8 写入 syslog 而不是日志文件夹。在我的 Java 中，我只想使用 getLogger.info(messaeg)...

我可以在 Jetty 日志中看到我的应用程序日志`$JETTY_HOME/logs`，但我希望将所有 Jetty 消息写入 syslog。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T09:03:23.197

我建议使用 slf4j + logback，如下所述：http: [//wiki.eclipse.org/Jetty/Tutorial/Sifting_Logs_with_Logback](http://wiki.eclipse.org/Jetty/Tutorial/Sifting_Logs_with_Logback)

然后您可以配置 logback 以写入像这样的 syslog appender：http: [//logback.qos.ch/manual/appenders.html#SyslogAppender](http://logback.qos.ch/manual/appenders.html#SyslogAppender)

使用这些文档应该非常简单。如果您仍有任何问题，请立即提问。

# c# - DataTable上的Linq：将特定列选择到数据表中，而不是整个表

> ID：14422655
> 
> 赞同：9
> 
> 时间：2013-01-20T07:49:58.960
> 
> 标签：c#, linq, datatable

我`datatable`在 c# 中运行 LINQ 查询。

我想选择特定列而不是整行并将结果输入到`datatable`. 我怎样才能做到这一点？？

我的代码：

```
public DataTable getConversions(string c_to, string p_to)
{
    var query = from r in matrix.AsEnumerable()
                where r.Field<string>("c_to") == c_to &&
                      r.Field<string>("p_to") == p_to
                select r;

    DataTable conversions = query.CopyToDataTable(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T02:26:35.643

如果您事先已经知道新 DataTable 将有多少列，则可以执行以下操作：

```
DataTable matrix = ... // get matrix values from db

DataTable newDataTable = new DataTable();
newDataTable.Columns.Add("c_to", typeof(string));
newDataTable.Columns.Add("p_to", typeof(string));

var query = from r in matrix.AsEnumerable()
            where r.Field<string>("c_to") == "foo" &&
                    r.Field<string>("p_to") == "bar"
            let objectArray = new object[]
            {
                r.Field<string>("c_to"), r.Field<string>("p_to")
            }
            select objectArray;

foreach (var array in query)
{
    newDataTable.Rows.Add(array);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-18T16:01:17.537

在这里，我从 mainDataTable 中仅获取三个特定列并使用过滤器

```
DataTable checkedParams = mainDataTable.Select("checked = true").CopyToDataTable()
.DefaultView.ToTable(false, "lagerID", "reservePeriod", "discount"); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-07T13:54:13.070

尝试[访问 DataTable 最简单的方法](http://www.developer2blog.com/post/2013/01/21/Access-DataTable-easiest-way.aspx)，它可以帮助您获得使用 Linq 访问 DataTable、DataSet 的完美想法...

考虑以下示例，假设我们有如下所示的**DataTable**。

```
DataTable ObjDt = new DataTable("List");
ObjDt.Columns.Add("WorkName", typeof(string));
ObjDt.Columns.Add("Price", typeof(decimal));
ObjDt.Columns.Add("Area", typeof(string));
ObjDt.Columns.Add("Quantity",typeof(int));
ObjDt.Columns.Add("Breath",typeof(decimal));
ObjDt.Columns.Add("Length",typeof(decimal)); 
```

上面是DatTable的代码，这里我们假设这个DataTable中有一些数据可用，我们必须通过处理一些数据来绑定特定的Grid视图，如下所示。

> **面积**| **数量**| **呼吸**| **长度**| **价格=数量*呼吸*长度**

比我们必须触发以下查询，这将为我们提供我们想要的准确结果。

```
var data = ObjDt.AsEnumerable().Select
            (r => new
            {
                Area = r.Field<string>("Area"),
                Que = r.Field<int>("Quantity"),
                Breath = r.Field<decimal>("Breath"),
                Length = r.Field<decimal>("Length"),
                totLen = r.Field<int>("Quantity") * (r.Field<decimal>("Breath") * r.Field<decimal>("Length"))
            }).ToList(); 
```

我们只需要将这个数据变量指定为数据源。

通过使用这个简单的 Linq 查询，我们可以获得所有的接受，并且我们可以使用它执行所有其他 LINQ 查询……</p>

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-01-20T07:04:21.870

LINQ 在列表而不是 DataTable 上非常有效且易于使用。我可以看到上面的答案有一个循环（for，foreach），我不会喜欢它。

因此，从 DataTable 中选择特定列的最佳方法是使用 DataView 过滤列并根据需要使用它。

在这里找到如何做到这一点。

```
DataView dtView = new DataView(dtYourDataTable);
DataTable dtTableWithOneColumn= dtView .ToTable(true, "ColumnA"); 
```

现在 DataTable **dtTableWithOneColumn**只包含一列（ColumnA）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-20T08:03:05.003

您的 select 语句返回的是匿名类型序列，而不是 DataRows 序列。CopyToDataTable() 仅适用于`IEnumerable<T>`where `T`is 或 derived from `DataRow`。您可以选择`r`行对象以对其调用 CopyToDataTable。

```
var query = from r in matrix.AsEnumerable()
                where r.Field<string>("c_to") == c_to &&
                      r.Field<string>("p_to") == p_to
                 select r;

DataTable conversions = query.CopyToDataTable(); 
```

您还可以在通用类型 T 不是 DataRow 的[情况下实现 CopyToDataTable 。](http://msdn.microsoft.com/en-us/library/bb669096.aspx)

# javascript - youtube默认图片，没有api的视频

> ID：14422660
> 
> 赞同：2
> 
> 时间：2013-01-20T07:50:50.607
> 
> 标签：javascript, html, youtube

我正在开发一个网站，我将在其中向用户展示 youtube 视频，

脚步：

1）我会将视频网址上​​传到数据库（手动将网址输入数据库。）

2）使用该网址我想在我的网站中显示默认图像

3）如果用户点击该网址视频将播放。

没有youtube api可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-05T08:41:52.237

YouTube 视频默认有 4 张图片，由 youtube 提供

```
http://img.youtube.com/vi/<insert-youtube-video-id-here>/0.jpg
http://img.youtube.com/vi/<insert-youtube-video-id-here>/1.jpg
http://img.youtube.com/vi/<insert-youtube-video-id-here>/2.jpg
http://img.youtube.com/vi/<insert-youtube-video-id-here>/3.jpg 
```

显示这些图像，当用户点击它时显示视频

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T08:56:24.333

w3schools 有一个关于如何使用基本 HTML 进行此操作的教程部分；不需要javascript：

> ```
> <video width="320" height="240" controls>
>   <source src="movie.mp4" type="video/mp4">
>   <source src="movie.ogg" type="video/ogg">
>   <source src="movie.webm" type="video/webm">
>   <object data="movie.mp4" width="320" height="240">
>     <embed src="movie.swf" width="320" height="240">
>   </object> 
> </video> 
> ```

[http://www.w3schools.com/html/html_videos.asp](http://www.w3schools.com/html/html_videos.asp)

# java - 使用 Google Drive SDK 将文件保存在特定文件夹中

> ID：14422661
> 
> 赞同：5
> 
> 时间：2013-01-20T07:50:56.133
> 
> 标签：java, android, google-drive-api

我一直在尝试将纯文本文件保存到 Android 上 Google Drive 中的特定文件夹中。

到目前为止，使用 Google Drive 上的文档和[快速入门指南](https://developers.google.com/drive/quickstart-android)，我已经能够做一些朝着正确方向发展的事情，首先我能够创建一个纯文本文件：

```
 File body = new File();
  body.setTitle(fileContent.getName());
  body.setMimeType("text/plain");
  File file = service.files().insert(body, textContent).execute(); 
```

我已经能够在 Google Drive 的基本目录中创建一个新文件夹：

```
 File body = new File();
  body.setTitle("Air Note");
  body.setMimeType("application/vnd.google-apps.folder");
  File file = service.files().insert(body).execute(); 
```

我还能够列出用户 Google Drive 帐户中的所有文件夹：

```
 List<File> files = service.files().list().setQ("mimeType = 'application/vnd.google-apps.folder'").execute().getItems();
      for (File f : files) {
          System.out.println(f.getTitle() + ", " + f.getMimeType());
      } 
```

但是，我对如何将文本文件保存到 Google Drive 中的文件夹中有些困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T08:04:59.743

您需要使用 parent 参数使用 insert 将文件放入文件夹中。更多详细信息，请访问[https://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)

像这样的东西

```
File body = new File();  
body.setTitle(fileContent.getName());
body.setMimeType("text/plain");
body.setParents(Arrays.asList(new File.ParentReference().setId(parentId));  
File file = service.files().insert(body, textContent).execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-02T10:52:58.453

如果您想在 Google Drive 的特定文件夹中插入文件，请按照以下步骤操作。假设我们已经从驱动器中检索了所有文件夹，现在我将在列表中的第一个文件夹中插入一个空文件，所以

```
 //Getting Folders from the DRIVE
List<File> files = mService.files().list().setQ("mimeType = 'application/vnd.google-apps.folder'").execute().getItems();

   File f  =files.get(1)//getting first file from the folder list
    body.setTitle("MyEmptyFile");
    body.setMimeType("image/jpeg");
    body.setParents(Arrays.asList(new ParentReference().setId(f.getId())));
    com.google.api.services.drive.model.File file = mService.files().insert(body).execute(); 
```

现在这将在检索文件列表顶部的文件夹中创建一个空文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-25T14:03:31.080

第一步：创建文件夹

```
File body1 = new File();
body1.setTitle("cloudbox");
body1.setMimeType("application/vnd.google-apps.folder");
File file1 = service.files().insert(body1).execute(); 
```

第二步：插入你的文件

```
File body2 = new File();  
body2.setTitle(fileContent.getName());
body2.setMimeType("text/plain");
body2.setParents(Arrays.asList(new ParentReference().setId(file1.getId())));  
File file2 = service.files().insert(body2, mediaContent).execute(); 
```

# ruby-on-rails - 将用户帐户链接到他们的 twitter/facebook/etc 帐户

> ID：14422662
> 
> 赞同：0
> 
> 时间：2013-01-20T07:50:58.373
> 
> 标签：ruby-on-rails, facebook, devise, omniauth, twitter-oauth

我有一个现有的 Rails 应用程序，它使用“设计”进行身份验证。

我希望用户能够将他们的 twitter 和 facebook 帐户链接到他们在我的网站上的帐户，以便我的应用程序可以代表他们发布更新。

理想情况下：

*   注册时可以选择设置标准账号，或者使用twitter、facebook等凭证。
*   如果用户选择使用 facebook 凭据，我仍然希望他们能够链接他们的 twitter 帐户，以便我的应用程序可以代表他们同时发布到两者。
*   奖励将允许他们拥有身份，他们可以将推特账户 A 链接到一个身份，然后切换身份并使用另一个推特账户。

我的问题是：

*   如果他们使用标准帐户，并链接 facebook 和 twitter，每次我代表他们发帖时，他们是否会被提示输入这些凭据？还是omniauth 给了我一个无限有效的令牌？
*   我知道设计可以处理omniauth，但我似乎无法判断它是否可以处理我的要求。似乎它的omniauth支持更像是根据twitter凭据对站点用户进行身份验证，而不是用于链接多个。
*   是否有一个 Rails gem 可以做到这一点，并且得到很好的支持？我看到不再支持社交名流，但这似乎是一种或另一种类型的交易，反正不是我想要的。
*   因为我已经在使用设计进行标准身份验证，所以强制用户创建一个标准帐户，然后直接使用 twitter 和 facebook api 会更简单吗？

在这里寻找最佳策略来做我想做的事。

*注意：如果您认为我可以通过我所有目标的 25% 的努力得到我想要的 75%，请告诉我。*

谢谢，

~S

# java - NetBeans 库问题

> ID：14422663
> 
> 赞同：0
> 
> 时间：2013-01-20T07:51:12.570
> 
> 标签：java, netbeans

我是 Java 新手，我想问一下关于导入库的问题。我正在尝试导入一个文件夹，我可以从

`properties -> library -> add jar/folder`

我正在尝试添加一个包含多个 jar 文件的文件夹，但在“添加文件夹”选项中找不到任何意义，因为我无法使用该文件夹中存在的类。如何添加文件夹并使用它包含的所有类或 .jar？

.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:06:29.817

以下是创建步骤`Netbeans Library`

1.  选择工具 -> Ant 库
2.  选择“新建库”
3.  提供新的库名称
4.  添加罐子

创建库后，您可以在项目中选择该库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T08:06:03.270

您可以在项目下创建一个“lib”文件夹，并在其中包含所有 jar。

# spring - 使用 Java 注解的 Spring 配置

> ID：14422668
> 
> 赞同：0
> 
> 时间：2013-01-20T07:53:11.703
> 
> 标签：spring, jakarta-ee, spring-mvc

我已经开始使用[Spring Framework](http://en.wikipedia.org/wiki/Spring_Framework) 3.1.1** 开发库存管理系统（Web 应用程序），并希望使用 Java 注释配置 Spring Framework。我搜索了 Google，但找不到合适的示例来展示如何在 Web 应用程序中使用 Java 注释配置 Spring Framework。哪里有合适的例子或教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T11:30:20.107

Spring Framework 参考资料很全面。参考Spring参考资料，*[3.11基于Java的容器配置](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-java)*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-30T13:43:46.423

另一个需要考虑的选项是使用基于 Java 的配置。它更具可读性，并且比注释更容易。

[弹簧文档](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html#beans-java)

[使用基于 Java 的配置的简单示例](http://anandsekar.github.io/spring-configuration-in-java/)

# c++ - 函数重载 C++

> ID：14422672
> 
> 赞同：-1
> 
> 时间：2013-01-20T07:54:24.963
> 
> 标签：c++

```
typedef int INT;

1.void f(int x);
2.void f(INT x);

3.g(char (*) [10]);
4.g(char [5] [10]); 
```

的两个重载都`f`可以存在！的两个重载都`g`可以存在！

我们可以在一个类中重载这些函数吗？作为基类中的 1,3 和派生类中的 2,4。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T08:12:41.370

```
both the overloads of `f` can exist? 
```

不，INT 基础类型`int`因此都`f`具有相同的函数签名。这打破了 C++

```
both the overloads of g can exist? 
```

不。数组衰减为指针，因此`char [5] [10])`转向 `char (*) [10]`哪些是相同的类型。

函数重载的重要规则是函数具有不同的签名，这需要函数具有不同的参数列表（参数类型或数量）。

请参阅示例代码：[链接](http://ideone.com/RSfPZt)

# chef-infra - 如何用chef-solo覆盖vagrant的“非默认”属性？

> ID：14422673
> 
> 赞同：4
> 
> 时间：2013-01-20T07:54:27.640
> 
> 标签：chef-infra, vagrant

# 问题

我正在使用带有厨师独奏的流浪汉。

1.  如何覆盖“**非**默认”属性？
2.  如果我要创建厨师食谱，我应该什么时候使用“**非**默认”属性？

# 描述

`openldap['rootpw']`我在[openldap的属性中](https://github.com/opscode-cookbooks/openldap/blob/a49dc8cf89d7f7345e011bdc65cd3858a3a8978e/attributes/default.rb#L27)看到了

我想覆盖`openldap['rootpw']`属性。

我试图覆盖配置，如下

```
# Vagrantfile
Vagrant::Config.run do |config|
  config.vm.provision :chef_solo do |chef|

    #....

    chef.json = {
      'rootpw' => 'xxxx....',
      'openldap' => {
        'rootpw' => 'xxxx....'
      }
    }
  end
end 
```

但是，属性没有被覆盖。

我认为，如果属性是`default['openldap']['rootpw']`.

如何覆盖“**非**默认”属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:35:39.723

使用覆盖属性。[您可以将它们设置在不同的地方](http://wiki.opscode.com/pages/viewpage.action?pageId=8257848)（食谱、角色、环境），也许您能找到适合您的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T17:32:23.010

您不能像默认值一样轻松地覆盖“非默认”属性，因为它在链的下游进行评估。基本上，顺序是默认、force_default、正常、覆盖、force_override、自动的连续统一体。如果您想覆盖某些内容，只需在列表中往下走。最佳做法是使用默认值并覆盖它们。

[http://docs.opscode.com/essentials_cookbook_attribute_files.html#attribute-precedence](http://docs.opscode.com/essentials_cookbook_attribute_files.html#attribute-precedence)

# optimization - gcc 是否优化内核代码？

> ID：14422688
> 
> 赞同：1
> 
> 时间：2013-01-20T07:58:18.153
> 
> 标签：optimization, gcc, linux-kernel, kernel

我在`struct thread_info`计算某个事件时添加了一个变量。这是在来宾操作系统中完成的。
在虚拟机的执行过程中，我不时地从我的主机中读取这些变量。
我观察到有时我得到了预期的值，但有时我读取了垃圾值。我认为 GCC 正在优化我的变量，而我正在读取的内存处于垃圾状态。
我想知道可能的预防方法。
关闭内核的 GCC 优化是毫无疑问的，因为我的目标是根据我计算的事件加速虚拟机。
`#pragma optimize("",off)`
使其效率降低，因为那样我将不得不将我的事件计数代码（只有 2 行）分解为一个函数。我计算的这个事件经常发生。
有没有我可以使用的#pragma 技术？
使我的变量 volatile 有助于解决问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T08:09:48.007

制作变量`volatile`将阻止 GCC 优化它们。您不需要完全禁用优化。

但是，您可能需要处理在内核可能仍在更新结构时尝试从结构中读取而导致的竞争条件。不过，我不知道您将如何在 VM 上下文中执行此操作。也许您正在使用的虚拟机管理程序提供了一些特殊的来宾-主机通信机制。例如，VMware 有[VMCI](http://pubs.vmware.com/vmci-sdk/VMCI_intro.html)。

# javascript - 使用 AudioContext 时 Chrome 会更改音频元素的来源

> ID：14422691
> 
> 赞同：1
> 
> 时间：2013-01-20T07:58:34.057
> 
> 标签：javascript, html5-audio

如果在 AudioContext 的 createMediaElementSource 中使用了该元素，则当我动态更改其源时，音频声音会失真（例如同时播放两次或类似的东西）。

这是错误的极简示例：http: [//jsfiddle.net/BaliBalo/wkFpv/](http://jsfiddle.net/BaliBalo/wkFpv/)（起初它运行良好，但当您单击链接更改源时它会变得疯狂）。

```
var audio = document.getElementById('music');
var actx = new webkitAudioContext();
var node, processor = actx.createScriptProcessor(1024, 1, 1);
processor.onaudioprocess = function(e) { /* STUFF */ };
processor.connect(actx.destination);
audio.addEventListener('canplay', canPlayFired);
function canPlayFired(event)
{
    node = actx.createMediaElementSource(audio);
    node.connect(processor);
    audio.removeEventListener('canplay', canPlayFired);
}
$('a.changeMusic').click(function(e){
    e.preventDefault();
    audio.src = $(this).attr('href');
}); 
```

如果我把它放在它工作`node.disconnect(0);`之前`audio.src = ...`，但数据不再被处理。我尝试了很多东西，比如创建一个新的上下文，但它似乎没有删除以前设置的 javascript 节点。

你知道我该如何解决吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:58:14.957

我建议看看这个：[jsbin.com/acolet/1](http://jsbin.com/acolet/1)

它似乎在做你正在寻找的同样的事情。

我从[这篇文章](https://stackoverflow.com/questions/14958175/html5-audio-api-audio-resources-unavailable-for-audiocontext-construction)中找到了这个。

# node.js - socket io 向房间中的用户发送消息

> ID：14422693
> 
> 赞同：1
> 
> 时间：2013-01-20T07:58:51.407
> 
> 标签：node.js, socket.io, chatroom

我正在使用 nodejs 和 socketio。我制作了一个私人聊天应用程序，向选定的用户发送消息。

我当前的代码是：

```
 chat_room.sockets.socket(user).emit(
                'chat', 
                { 
                    message : message,
                    from : sockets[socket.id].username
                }
            ); 
```

现在我创建了房间，我想向特定房间的用户发送消息。

我尝试了下面的代码但没有工作

```
socket.get('room', function(err, room) {
         chat_room.sockets.socket(room)(user).emit(
                'chat', 
                { 
                    message : message,
                    from : sockets[socket.id].username
                }
            );

}); 
```

它错了，它给了我一个错误：

> \Users\Niraj\Desktop\node\joomla-chat\node_modules\socket.io\lib\manager.js:487:38) 在 WebSocket.Transport.onMessage (C:\Users\Niraj\Desktop\node\joomla-chat \node_modules\socket.io\lib\transport.js:387:20）在 Parser。(C:\Users\Niraj\Desktop\node\joomla-chat\node_modules\socket.io\lib\transports\websocket\hybi-16.js:39:10) 在 Parser.EventEmitter.emit (events.js:96 :17)

如何向房间的特定用户发送消息

- - - - - - - - - - - - - - - -编辑 - - - - - - - - - ---------- 所以如果我这样做：

```
socket.get('room', function(err, room) {
              chat_room.sockets.socket(user).emit(
                    'chat', 
                    { 
                        message : message,
                        from : sockets[socket.id].username
                    }
                );

        }); 
```

然后这会将消息发送到 Mr.X 到 ABC 房间

我对吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T08:36:02.960

不管你想联系的用户是否在房间里，只要你有正确的识别信息，联系他们的最简单方法仍然只是一个简单的 socket.emit()。

你说你已经有了他们的socket.id；如果是这样，那么获取他们的套接字对象就像：`io.sockets.sockets[socket.id]`.

要发送消息，您可以说：`io.sockets.sockets[socket.id].emit('identifier', data);`

这应该可以回答您的问题，尽管这些是您可能会发现有帮助的另外两件事：

- 向您关注的整个房间广播：`io.sockets.in('room').emit('event_name', data)`

- 在 io.sockets 中存储了关于房间和连接的套接字的大量信息。我强烈建议您`console.log(io.sockets);`在代码的开头加上 a 并仔细检查该对象以查看您还可以访问什么。

希望这可以帮助！

# mathematical-optimization - 地理分散启发式

> ID：14422694
> 
> 赞同：3
> 
> 时间：2013-01-20T07:59:11.747
> 
> 标签：mathematical-optimization, geography

我正在尝试实现爬山算法，以根据特定标准从一组位置中选择哪些位置。多达 5000 个地点可供选择。

这些标准之一是地理分散，因此我需要能够为我的位置的任何子集分配一个代表分散的值。

每个位置都有纬度和经度数据。

速度是一个问题，这就是为什么我需要一些启发式方法来估计一组特定位置（即可能的解决方案）的分散程度。

我曾尝试将潜在解决方案中每个位置的成对距离相加，但这证明太慢了。

然后，我尝试了在我的潜在解决方案中与所有位置中心的距离总和，这被证明更快，但效果不佳。使用这种方法将有利于几个位置集群。

任何其他建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:39:38.067

首先，你能重申一下成对和的意思吗？我在问，因为听起来你形成了所有可能的配对，这将是非常低效的。如果是这种情况，如何首先找到 1) 最近的邻居，然后 2) 最长的路径？

1）如果我没记错的话，您可以在少于 O(n log n) 的时间内完成此操作。2）如果形成的树是断开的，你也必须找到树之间的最短距离。并且由于树，这不是一个 NP 完全问题，但实际上最短路径 alg 就足够了。

此刻，我非常怀疑我没有正确理解您的问题，在 geog 区域的出现次数上出现某种偏差怎么样，或者在极值点之间平均分配，或者使用一些先验的启发式方法选择。

您能否定义或进一步阐述色散概念？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-29T19:03:27.403

考虑三种情况：

1.  您的所有节点都在一个密集的集群中。
2.  您的所有节点都在一个集群中，但集群很宽。
3.  您的许多节点都在集群中，但少数节点远离集群。

您在所有成对距离上的总和很好地捕获了 (1) 和 (2)：紧密的集群比大型集群给出的结果更小。它对（3）有什么作用？这里，`e`节点总数的一部分`N`距离很远，平均距离为`D`。其他`(1-e)N`节点在平均距离为`d`.

现在，必须考虑多少成对连接？对于集群节点，有`((1-e)N)^2=e^2*N^2-2*e*N^2+N^2`这样的连接。对于遥远的节点，有`e^2*N^2`连接。

现在，将这些值乘以平均距离。这给出了 的总成对平均值`(d*(e^2*N^2-2*e*N^2+N^2)+D*(e^2*N^2))/N`。现在，假设它`e`很小，我们可以忽略包含 的项`e^2`。因此，平均值为`d*(N^2-2*e*N^2)/N`。

现在，考虑您的第二个指标：每个人与平均中心点的距离。这在 (1) 和 (2) 上也很好：紧密的集群比较大的集群具有更小的结果。3 的表现如何？用`e`同上来表示异常值的比例。现在，节点到中心点的平均距离由下式给出`(d*(1-e)*N+D*e*N)/N`。换句话说，集群节点的权重不再那么大。

有没有一种方法可以让您进行轻量级计算并且仍然更适当地加权集群节点？我认同。

我的建议是您从列表中选择随机节点对，计算节点间距离，然后对结果进行平均。对于 (1) 紧密集群，所有节点将靠近在一起，因此您绘制的所有随机对都将接近您在计算中得到的成对平均值。对于 (2)，松散簇，同样如此。对于 (3)，一个具有异常值的集群，您更有可能从集群内部绘制节点而不是从外部绘制节点，因此异常值最终会被忽略。

随着您增加采样节点的数量，集群将倾向于主导随机采样。我猜这将提供不错的准确性`O(N)`而不是`O(N^2)`时​​间。

# ssis - SSIS 查找在 x64 机器上验证失败

> ID：14422699
> 
> 赞同：1
> 
> 时间：2013-01-20T08:00:29.673
> 
> 标签：ssis, 32bit-64bit, lookup

我有一个使用查找的 SSIS 包：

*   Target 和 Source 使用**OLE DB**连接，查看*SQL Server 2008 R2*。
*   查找正在使用**Full cache**和**OLE DB 连接管理器**（默认值）。
*   Lookup 查找包含*13 列*的键。其中之一是**Date**类型，稍后验证失败。

这一切都在我的机器上运行良好，自然。
我可以在生产环境中安装该软件包，但是在运行它时，它会在验证查找时快速失败：

> 输入列 [ColumnName] (238) 和名为 [ColumnName] 的引用列具有不兼容的数据类型

这显然是一个谎言——它们具有相同的类型。看起来这是 Lookup 组件的一个已知问题：

*   [查找声明不兼容的数据类型](http://social.msdn.microsoft.com/Forums/en/sqlintegrationservices/thread/f468442c-85a2-4db3-85c9-1add39979fb8)
*   [SSIS 查找组件错误：输出列“x”和名为“y”的引用列具有不兼容的数据类型](http://coastalcoder.wordpress.com/2007/07/26/ssis-lookup-component-error-output-column-x-and-reference-column-named-y-have-incompatible-data-types/)

在这两种情况下，有些人建议以 32 位运行包解决了他们的问题。但是，我的包在 32 位运行时无法连接到服务器...

我错过了什么？我应该安装额外的 x86 提供程序吗？
有没有修复查找的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-10-09T19:34:21.883

我知道这是一篇旧帖子，但如果有人在这里绊倒，这是我的解决方案。

我得到了同样的答案，在对 lkp 的查询中，我使用 CAST 语句明确转换了问题数据类型。我在调试时也没有问题，但是在 SSMS 上部署和运行时遇到了错误。这为我修好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T09:03:47.423

作为一种解决方法，我能够在生产服务器上打开 Microsoft Visual Studio 2008 Shell，并通过那里运行包。由于这是一项一次性迁移工作，我并不介意。

# php - 在 foreach 循环优化中使用 curl？

> ID：14422701
> 
> 赞同：0
> 
> 时间：2013-01-20T08:00:37.583
> 
> 标签：php, optimization, curl

如果我在 foreach 循环中使用 curl 是不好的做法还是会变慢？

我计划有一个自动完成输入字段，输入中的查询将被发送到 API 调用。

我从某个链接（即：[http](http://api.linke1.com/names) ://api.linke1.com/names ）获得一个 id

```
foreach($json as j){

    $id = $j->id; //from http://api.linke1.com/names

    $url = "https://api.site/{$id}/photos";
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    $output = curl_exec($ch);
    curl_close($ch);    

    $jsonDecode = json_decode($output);
    $results = $jsonDecode->results;
    foreach($results as $result)
    {   
            $photoURL= $result->photo->url; //from https://api.site/{$id}/photos
    }
} 
```

因此，每次我输入名称时，它都会进入 foreach 从 中搜索 id `http://api.linke1.com/names`，然后它会从另一个链接中查找照片 url。我想输出一个数组列表，所以最终我会有一个数据列表来输出显示信息，如姓名、照片等......

这是否会显着减慢，因为在输入字段中键入的每个字母都会通过这个 foreach 循环运行。会有更简单的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:06:02.807

初始化 curl 和循环之前不会改变的东西，然后关闭它。

这将加快事情一点点。

您可以使用 curl_multi_*，它可以并行获取多个 URL。

[http://se2.php.net/manual/en/ref.curl.php](http://se2.php.net/manual/en/ref.curl.php)

# python - Open CV - Python RGB 到 GREY 转换器

> ID：14422704
> 
> 赞同：3
> 
> 时间：2013-01-20T08:01:23.367
> 
> 标签：python, opencv, numpy, grayscale, computer-vision

我想在没有任何内置 Open-CV 功能的情况下将此 RGB 编码为灰度转换器。这就是我的代码的样子

```
import cv2 , numpy
def GrayConvertor(img):

    rows , cols , layers = img.shape

    matrix = numpy.zeros((rows , cols))

    for i in range(rows):
        for j in range(cols):
            val = 0.114 * (img[i][j][0]) + 0.587 * (img[i][j][1]) + 0.299 * (img[i][j][2])
            fraction = val - int(val)
            if fraction >= 0.5:
                matrix[i][j] = (int(val) + 1) 

            else: 
                matrix[i][j] = int(val) 
    cv2.imshow("gray" , matrix)
    cv2.waitKey(0) 
```

但是它显示一个空白图像，有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T09:06:07.190

当您`matrix`使用它创建数组时`np.zeros`，默认情况下，已分配`dtype=float`. 因此，即使您将值四舍五入并将其转换为`int`，当将它们写入时，它们`matrix`也会存储为`float`s。如果您阅读[文档，`cv.imshow`](http://docs.opencv.org/modules/highgui/doc/user_interface.html#imshow)您会发现以下内容：

> *   如果图像是 32 位浮点，则像素值乘以 255。即取值范围 [0,1] 映射到 [0,255]。

因此，图像中的所有内容都乘以 255，从而弄乱了最终结果。

你可以做两件事：

1.  有一个浮点数`matrix`，跳过所有舍入，然后将您的值除以 255。
2.  明确地创建你`matrix`的`dtype='uint8'`并保持一切不变。

还有一个事实是您对 numpy 的功能的使用非常差。我在上面给你的两个选项，你可以在没有循环或矩阵分配的情况下进行编码，如

```
rgb2k = np.array([0.114, 0.587, 0.299])
matrix_int = np.round(np.sum(img * rgb2k, axis=-1)).astype('uint8')
matrix_float = np.sum(img * rgb2k, axis=-1) / 255 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T08:51:03.893

尝试：

```
import cv2 , numpy
def GrayConvertor(img):

    rows , cols , layers = img.shape

    matrix = numpy.zeros((rows , cols))

    for i in range(rows):
        for j in range(cols):
            val = 0.114 * (img[i][j][0]) + 0.587 * (img[i][j][1]) + 0.299 * (img[i][j][2])
                matrix[i][j] = round(val) 
    cv2.imshow("gray" , matrix)
    cv2.waitKey(0) 
```

# google-sheets - 自动单元格数学谷歌电子表格

> ID：14422706
> 
> 赞同：0
> 
> 时间：2013-01-20T08:01:36.503
> 
> 标签：google-sheets

我正在使用 Google 电子表格为游戏开发一个统计跟踪器，正如您在下面的链接图片中看到的那样，从 D3 中减去 D2 以给 F3 一个值。E 和 G 列具有相同的关系。

我的问题是，虽然公式很简单（即在 F3 类型中，=d3-d2 来获取一个值），但总共输入这个公式 100 次有点平凡。

无论如何，我可以自动完成这项工作吗？我还有更多想要添加的功能，但由于这个问题我推迟了。

希望此链接有效，我没有足够的代表来发布图片。[http://imgur.com/cyh27np](http://imgur.com/cyh27np)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:20:44.497

您不需要为每个单元格键入公式，您只需选择单元格，将其复制并粘贴到下面的单元格中。引用的单元格是相对于它们的位置的，因此它们会相应地改变。

例如，在您的情况下，如果您选择并复制单元格 F3 并将其粘贴到单元格 F4 上，您将看到粘贴的公式实际上是 =D4-D3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T21:22:54.330

只需左键单击要复制的公式（或偶数序列）的右下角，然后将其向下或拖动到您喜欢的任意多个单元格中。该程序将识别该模式并相应地继续它。

# javascript - 基本提交按钮 - 保存文本

> ID：14422709
> 
> 赞同：0
> 
> 时间：2013-01-20T08:02:17.207
> 
> 标签：javascript, html

我是新手，想了解有关提交按钮的知识。我正在开发一个非常小的程序。你可以写一些名字，然后我想保存它们的值并在我的 Javascript 代码中使用它们。

我真正想要的是调用所有的文本框，这样我就可以在我的 Javascript 中使用值（名称）。

```
 <form name="input" action="#" method="post">
    <table>
        <tr>
            <td>
                <input type="text" name="txt" value="Insert name"><br/>
                <input type="text" name="txt" value="Insert name"><br/>
                <input type="text" name="txt" value="Insert name"><br/>
                <input type="text" name="txt" value="Insert name"><br/>
                <input type="text" name="txt" value="Insert name"><br/>
                <input type="text" name="txt" value="Insert name"><br/>
                <input type="text" name="txt" value="Insert name"><br/>
                <input type="text" name="txt" value="Insert name"><br/>
                <input type="text" name="txt" value="Insert name"><br/>
                <input type="text" name="txt" value="Insert name"><br/>
            </td>
    </tr>
</table>

    <input type='submit' > 
```

**编辑：**所以下一个问题是我如何制作一个可以运行 javascript 的按钮？当用户完成类型名称时，他可以按下按钮，然后 javascript 会运行并将“txt”值堆叠在输入数组中吗？我知道如何制作 javascript，但按钮是问题所在。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:08:36.307

如果你想获得所有`input`的价值，你的`html`

```
<input type="text" name="txt" value="Insert name"><br/>
<input type="text" name="txt" value="Insert name"><br/>
<input type="text" name="txt" value="Insert name"><br/>
<input type="text" name="txt" value="Insert name"><br/>
<input type="text" name="txt" value="Insert name"><br/>
<input type="text" name="txt" value="Insert name"><br/>
<input type="text" name="txt" value="Insert name"><br/>
<input type="text" name="txt" value="Insert name"><br/>
<input type="text" name="txt" value="Insert name"><br/>
<input type="text" name="txt" value="Insert name"><br/>
<input type="button" value="Calculate" onclick="Calculate()" /> 
```

然后你可以`javascript`像这样使用

```
function Calculate(){
    var inputs = document.getElementsByName("txt");
    for(i=0; i<inputs.length; i++)
    {
       alert(inputs[i].value);
    }
} 
```

[getElementsByName() 参考](http://www.w3schools.com/jsref/met_doc_getelementsbyname.asp)

和`jquery`

```
function Calculate(){  
    $("input[name=txt]").each(function(){
         alert($(this).val());
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T08:11:35.593

更好地使用 jquery 来检索更容易和更简单的值。[http://api.jquery.com/attribute-equals-selector/](http://api.jquery.com/attribute-equals-selector/)

```
<form name="input" action="#" method="post">
<table>
    <tr>
        <td>
            <input type="text" name="1" value="Insert name"><br/>
            <input type="text" name="2" value="Insert name"><br/>
            <input type="text" name="3" value="Insert name"><br/>
            <input type="text" name="4" value="Insert name"><br/>
            <input type="text" name="5" value="Insert name"><br/>
            <input type="text" name="6" value="Insert name"><br/>
            <input type="text" name="7" value="Insert name"><br/>
            <input type="text" name="8" value="Insert name"><br/>
            <input type="text" name="9" value="Insert name"><br/>
            <input type="text" name="10" value="Insert name"><br/>
        </td>
</tr> 
```

```
<input type='submit' >

<script>
 var one = $('input[name=1]').val();
 var two = $('input[name=2]').val();
 var three= $('input[name=3]').val();
 var four = $('input[name=4]').val();
 ..
 //use one,two,three according to your wish
</script> 
```

甚至更简单（将 更改`name=1,2..`为`name=txt`）：

```
$('input[name=txt]').each(function() {
  alert($(this).val());
}); 
```

`$('input[name=txt]')`< -- 这部分将成为所有输入值的数组。`each`将遍历它们。

编辑：你的按钮应该是这样的：

```
<input type="button" id="submitme" value="Submit"/> 
```

你会这样调用你的js函数：

```
$('#submitme').click(function(){
   $('input[name=txt]').each(function() {
     alert($(this).val());
   });      
}); 
```

顺便说一句：我只是假设您不想先提交表单，而只是将值放入数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T08:14:05.147

您可以使用 JQuery。

像这样

```
 <input type="text" name="txt" value="Insert name"><br/>
 <input type="text" name="txt" value="Insert name"><br/>
 <input type="text" name="txt" value="Insert name"><br/>
 <input type="text" name="txt" value="Insert name"><br/>
 <input type="text" name="txt" value="Insert name"><br/>
 <input type="text" name="txt" value="Insert name"><br/>
 <input type="text" name="txt" value="Insert name"><br/>
 <input type="text" name="txt" value="Insert name"><br/>
 <input type="text" name="txt" value="Insert name"><br/>
 <input type="text" name="txt" value="Insert name"><br/> 
```

代码：

```
 $('input[name="txt"]').each(function(index, element) {
       alert(element.value);         
 }); 
```

# java - IntelliJ IDEA 12.0 意图调整（插入）

> ID：14422712
> 
> 赞同：1
> 
> 时间：2013-01-20T08:02:55.920
> 
> 标签：java, ide, intellij-idea, keyboard-shortcuts, shortcut

当我正在寻找使用 IDEA 加快开发和使用的方法时，我正在使用 Intentions（即：默认情况下为 Alt+Enter 键映射）来自动插入诸如减速、构造函数和所有爵士乐之类的东西，试图让自己远离尽可能使用鼠标。

让我恼火的一件事是创建常量、字段和参数。生成它们后，IDE 会跳转到它们声明的位置，并提示输入名称和类型。通常这会导致双击回车键，但是，光标会留在那儿。有没有办法通过这个特性声明后跳回使用？干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:32:25.143

假设您想要一个字段`foo`，您可以键入 foo，然后立即使用快速修复意图创建一个字段 foo。现在您可以键入`Alt +F7`（“查找用法”）。这将带您进入您刚刚输入的用法（因为它是唯一的）。这假设您在“查找使用设置”（*编辑 > 查找 > 查找使用设置*或`Ctrl+Alt+Shift+F7`）中设置了“跳过一个使用的结果选项卡”选项。如果您没有配置该设置，结果将在“*查找”*工具窗口中打开用法突出显示。然后您可以键入`F4`（跳转到源）。

# facebook - 将 AddThis 小部件与 Facebook 喜欢同步？

> ID：14422715
> 
> 赞同：9
> 
> 时间：2013-01-20T08:03:51.440
> 
> 标签：facebook, facebook-like, facebook-social-plugins, addthis, sharethis

我想知道是否可以在您的实际页面上的“喜欢”按钮与您在 facebook 本身上获得的喜欢之间同步喜欢！？

例如.....我们目前在 FB 上有 15 个赞，但我们网站上的 AddThis 小部件仅显示 1 个赞。

所以我想知道，有没有一种方法可以将两者与`AddThis`或同步`ShareThis`；平台无关紧要，只是希望它能够同步。

如果您从 facebook 本身获取代码而不是使用这些服务，那么我认为它会被同步？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T16:14:31.343

如果您`fb:like:href="THE URL"`在调用 AddThis 赞按钮时专门将您的赞 URL 指向您的 Facebook 页面，它应该与那里的赞同步。

像这样：

```
<a class="addthis_button_facebook_like" fb:like:href="THE URL TO YOUR FACEBOOK PAGE"></a> 
```

例如：

```
<a class="addthis_button_facebook_like" fb:like:href="http://www.facebook.com/nike"></a> 
```

因为您在标签中引用了 FB 社交插件，所以我可以确认这绝对是 Facebook 自己的点赞按钮的情况。

```
<div class="fb-like" data-send="false" data-layout="standard" data-width="450" data-show-faces="false" data-colorscheme="light" data-action="like" data-href="http://www.nike.com/"></div> 
```

给那个网站点赞。和：

```
<div class="fb-like" data-send="false" data-layout="standard" data-width="450" data-show-faces="false" data-colorscheme="light" data-action="like" data-href="http://www.facebook.com/nike"></div> 
```

为他们的 FB 页面显示喜欢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T23:20:32.120

我认为这个问题存在对平台的误解或可能与语义混淆。有人可以*通过一个小部件“喜欢”您网站上的内容，该小部件*会将喜欢的内容分享到他们的 Facebook 个人资料中。此外，您可以使用 Facebook 小部件或 AddThis 小部件显示您网站页面的点赞数量。

但是，如果您从您*网站的 Facebook 页面*共享一个页面并且用户可以喜欢该页面，但这不会增加上述小部件中显示的喜欢。希望这可以清除它？

# android - 如何在android中读取fql响应

> ID：14422718
> 
> 赞同：1
> 
> 时间：2013-01-20T08:04:12.440
> 
> 标签：android, facebook, facebook-graph-api

我一直在考虑以下内容： [https ://developers.facebook.com/docs/howtos/androidsdk/3.0/run-fql-queries/#step2](https://developers.facebook.com/docs/howtos/androidsdk/3.0/run-fql-queries/#step2)

它具有以下代码（为简单起见，我更改了 fql 查询）：

```
queryButton.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        String fqlQuery = "SELECT name FROM user WHERE uid IN " +
                "(SELECT uid2 FROM friend WHERE uid1 = me()LIMIT 2)";
        Bundle params = new Bundle();
        params.putString("q", fqlQuery);
        Session session = Session.getActiveSession();
        Request request = new Request(session,
            "/fql",                         
            params,                         
            HttpMethod.GET,                 
            new Request.Callback(){         
                public void onCompleted(Response response) {
                    Log.i(TAG, "Result: " + response.toString());
                }                  
        }); 
        Request.executeBatchAsync(request);                 
    }
}); 
```

专门查看 Log.i，response.toString() 会返回以下格式的内容：

```
Result: {Response:  responseCode: 200, graphObject: GraphObject{graphObjectClass=GraphObject, state={"data":[{"name":"John Doe"},{"name":"Jake Josh"}]}}, error: null, isFromCache:false} 
```

现在我的假设是响应是一个 json obj 所以我尝试了这样的事情：

```
JSONObject json=new JSONObject(response); 
```

但这不起作用，所以我不确定如何阅读我得到的回复，**严格来说，我只想遍历名称，但无法弄清楚如何实际阅读回复**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T08:22:53.483

尝试这个 ：

```
public static final void parseUserFromFQLResponse( Response response )
{
    try
    {
        GraphObject go  = response.getGraphObject();
        JSONObject  jso = go.getInnerJSONObject();
        JSONArray   arr = jso.getJSONArray( "data" );

        for ( int i = 0; i < ( arr.length() ); i++ )
        {
            JSONObject json_obj = arr.getJSONObject( i );

            String name   = json_obj.getString( "name" );

            //...

        }
    }
    catch ( Throwable t )
    {
        t.printStackTrace();
    }
} 
```

像这样拨打电话：

```
public void onCompleted(Response response) {
     Log.i(TAG, "Result: " + response.toString());
     parseUserFromFQLResponse(response);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T08:21:07.547

从for 和 for的[源代码`GraphObject`](https://github.com/facebook/facebook-android-sdk/blob/sdk-version-3.0/facebook/src/com/facebook/model/GraphObject.java)[`Response`](https://github.com/facebook/facebook-android-sdk/blob/sdk-version-3.0/facebook/src/com/facebook/Response.java)来看，您可以执行以下操作：

```
JSONObject data = response.getGraphObject().getInnerJSONObject(); 
```

# java - 局部变量可能尚未初始化的原因？

> ID：14422722
> 
> 赞同：-1
> 
> 时间：2013-01-20T08:04:46.737
> 
> 标签：java

这就是我的方法的样子

```
public int abc()
{
  int x;
  if(x > 100)
  {
    //Say ok
    return x;//Causes compiler error
  }

  //if something more, x = some number 

  return x;//Causes compiler error

} 
```

我在 SO - [Java 上看到了一个答案：“局部变量可能尚未初始化”不够智能？](https://stackoverflow.com/questions/12661417/java-local-variable-may-not-have-been-initialized-not-intelligent-enough)

但是，我仍然不确定为什么会发生此错误。它是编译器错误而不是警告。所以，问题一定是比“走安全路线”更严重的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T08:06:13.020

局部变量在被访问之前必须被初始化。这就是出现编译器错误的原因。

您应该在`if`第一次访问它的语句中出现错误。

# jquery - 由于 $(element).end() 而在段落中复制文本？

> ID：14422728
> 
> 赞同：0
> 
> 时间：2013-01-20T08:05:27.630
> 
> 标签：jquery, while-loop, paragraph

我有`div`一个类`textareaedit`，其中可以包含多个`p`（段落）。但我只想抓住最后一段并处理该文本。

我的 HTML 是这样的：

```
<div class="textareaedit">
<p>  </p>
<p>  </p>
</div> 
```

还有我的 javascript：

```
$thisinput = $('forminput');

$taedit = $('.textareaedit');
    var $target = $taedit.children(); //in case there is more than one <p> here

  while( $target.length ) {
  $target = $target.children();
   }            

  $target.end().text($thisinput.val()) ; 
```

每当用户将注意力集中在表单元素上时，就会触发此代码`forminput`。我希望用户的文本转到`$taedit`. 但是如果`$taedit`碰巧有多个段落，那么每次用户输入`forminput`，然后`$taedit`复制其中的文本。

示例：如果`$taedit`只有一个`p`，那么当用户输入 时`This is my text`，`$taedit`如下所示：

```
This is my text 
```

但是如果`$taedit`碰巧有两个`p`，那么当用户输入时`This is my text`（只有一次！），然后`$taedit`看起来像这样：

```
This is my text
This is my text 
```

如果用户再次输入它，它会加倍：

```
This is my text
This is my text
This is my text
This is my text 
```

我知道由于循环必须发生某些事情`while`，但我不明白的是我只调用`$target.end()`一次......所以文本应该只附加到最后一段？我的目标是没有重复，不管有多少`p`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:23:02.947

不知道为什么你需要while循环？您可以将 while 循环和最后一条语句替换为：

```
$target.last().text($thisinput.val()); 
```

# php - 将字符串转换为支持不同语言环境（英语和法语）的浮点数？

> ID：14422736
> 
> 赞同：0
> 
> 时间：2013-01-20T08:06:49.890
> 
> 标签：php, localization, number-formatting

假设我有两种不同的符号，英语和法语这些相似的数字

> 1,200.25 = 英语
> 
> 1 200,25 = 法语

是否有一个 PHP 函数可以接受这两个数字中的任何一个并将它们转换为浮点数？

> 1200.25 = 浮动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:44:40.533

检查此代码：

```
<?php

function parse_float_locale($float_string, $locale) {
    $locale_info = array();
    switch ($locale) {
        case 'fr':
            $locale_info['thousands_sep'] = ' ';
            $locale_info['decimal_point'] = ',';
            break;
        case 'en':
        default:
            $locale_info['thousands_sep'] = ',';
            $locale_info['decimal_point'] = '.';
    }

    $float_string = str_replace($locale_info['thousands_sep'], '', $float_string);
    $float_string = str_replace($locale_info['decimal_point'], '.', $float_string);

    return floatval($float_string);
}

$str_en = '1,200.25';
$str_fr = '1 200,25';

$number_en = parse_float_locale($str_en, 'en');
$number_fr = parse_float_locale($str_fr, 'fr');

echo "Value en: $number_en";
echo "Value fr: $number_fr"; 
```

这将打印：

值 en：1200.25

值fr：1200.25

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T08:33:51.223

你可以使用这样的东西：

```
$replacements = array("1,200.25","1 200,25");
foreach($replacements AS $replaceText):
    $replace = preg_replace("#^(.*)(?:\.|\,)([0-9]{1,})$#","$1.$2",$replaceText);
    $replaceChars = array("# #","#,#");
    $text = preg_replace($replaceChars, "", $replace);
    echo $replaceText. " got replaced by: ".$text."<br />";
endforeach; 
```

# c - 程序即将出现未知异常

> ID：14422737
> 
> 赞同：-2
> 
> 时间：2013-01-20T08:06:54.177
> 
> 标签：c, pointers, memory-management, multidimensional-array

我的程序旨在在运行时为二维数组分配内存，然后将元素放入其中，然后显示它。我的 prog 抛出了一些异常，任何人都可以帮我识别它吗？

```
#include<stdio.h>
#include<malloc.h>
#include<stdlib.h>

int main()
{

int i,j,row, col;
    int *ptr;
    printf("enter size of row and col\n");
    scanf("%d%d",&row,&col);
    ptr = (int *)malloc(row*col*sizeof(int));
    if(ptr==NULL)
    {
        printf("stderr, not able to allocate memory");
        exit(1);
    }
    else
    {
        printf("enter the element");
        for(i=0; i<row;i++)
            for(j=0;j<col;j++)
            {
              scanf("%d",ptr[i+j]);

            }
        for(i=0; i<row;i++)
        {   
            for(j=0;j<col;j++)
                printf("%d ",ptr[i+j]);
            printf("\n");
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:33:01.550

您对可能打算作为二维数组的访问`ptr`是非常可疑的，它应该`ptr[row * i + j]`每次都进行（在修复`scanf`另一个答案中提到的混乱之后）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T08:12:30.953

正如 Alok 正确猜测的那样，您的问题在于您调用`scanf`

```
scanf("%d",ptr[i+j]); 
```

因为`scanf`您需要传递变量的地址，而不是变量本身。您可以执行以下任一操作来修复您的代码。

```
scanf("%d",&ptr[i+j]);

scanf("%d",(ptr+i+j)); 
```

ps minor nit，在编译器的眼中，您正在分配一个 1D 数组，只有在使用它时，您才像访问 2d 数组一样访问它。

pps 正如 PaulR 指出的，您应该使用 &ptr[i*col+j] 正确模拟二维数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T08:13:18.637

`scanf()`需要指向其参数的指针，因为它需要修改它们。因此，

```
scanf("%d", ptr[i + j]); 
```

应该

```
scanf("%d", &ptr[i + j]); 
```

或者

```
scanf("%d", ptr + i + j); 
```

反而。

（如果你真的打算模拟一个二维数组，那么你应该使用

```
&ptr[i * columns + j] 
```

无论如何 - 感谢 PaulR 指出这一点。）

# asp.net-mvc - 在两个 MVC 应用程序之间共享会话

> ID：14422741
> 
> 赞同：-1
> 
> 时间：2013-01-20T08:07:16.400
> 
> 标签：asp.net-mvc

我有一个较旧的应用程序，它有一个 ActionResult 函数，我想将它包含在另一个较新的应用程序中。

我发现我可以添加旧控制器作为参考，将控制器实例化为对象，然后相应地调用 ActionResult 函数，如下所示：

```
public ActionResult test()
    {
        OlderApplication.Controllers.PatronController temp = new OlderApplication.Controllers.PatronController();

        return temp.Index();
    } 
```

我的问题在于它在 temp.Index() 内部引用了 Session，并且它以 null 的形式出现，而不是具有应该存在的值。我可以通过这种方式提供会话吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:47:42.863

在您给出的示例中，您没有两个 MVC 应用程序 - 您有一个共享相同代码库的应用程序。一个“应用程序”是由网络服务器定义的，但我离题了。

Session `temp`inside 为 null 的原因是您没有正确初始化控制器 - 控制器不是 POCO，它们需要初始化。调用`temp.Initialize()`，但是您需要自己创建`RequestContext`实例，如下所示：

```
RequestContext context = new RequestContext( this.Context, this.RouteData );
OlderApplication.Controllers.PatronController oldController = new OlderApplication.Controllers.PatronController();
oldController.Initialize( context );

return oldController.Index(); 
```

尽管如果您正在执行此步骤，您不妨将旧控制器连接到您的区域注册和/或 URI 路由表，从而无需编写此代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T08:54:49.457

正如戴指出的那样，您没有正确创建控制器。我建议使用控制器工厂来创建您的控制器。

```
var oldController  = ControllerBuilder.Current.GetControllerFactory().CreateController(Request.RequestContext, "Patron"); 
```

# windows-phone-7 - 从 WP7 日历中获取具体事件

> ID：14422743
> 
> 赞同：0
> 
> 时间：2013-01-20T08:07:40.487
> 
> 标签：windows-phone-7, calendar

我正在开发一个 WP7 应用程序，如果日历上的当前事件是“会议”，我需要它来播放第一个链接中的歌曲。但是，使用当前代码，即使事件设置正确，它也会播放第二首歌曲而不是第一首歌曲。

这是我的代码：

```
public partial class MainPage : PhoneApplicationPage
{   
    // Constructor
    public MainPage()
    {
        InitializeComponent();

        // Set the data context of the listbox control to the sample data
        DataContext = App.ViewModel;
        this.Loaded += new RoutedEventHandler(MainPage_Loaded);
    }

    // Load data for the ViewModel Items
    private void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
        if (!App.ViewModel.IsDataLoaded)
        {
            App.ViewModel.LoadData();
        }
    }        

    private void button1_Click(object sender, RoutedEventArgs e)
    {            
        Appointments appts = new Appointments();

        //Identify the method that runs after the asynchronous search completes.
        appts.SearchCompleted += new EventHandler<AppointmentsSearchEventArgs>(Appointments_SearchCompleted);

        DateTime start = DateTime.Now;
        DateTime end = DateTime.Now;
        int max = 1;

        //Start the asynchronous search.
        appts.SearchAsync(start, end, max, "Appointments Test #1");
        textBlock3.Text = DateTime.Now.ToString("hh:mm:ss tt");
    }

    void Appointments_SearchCompleted(object sender, AppointmentsSearchEventArgs e)
    {
        try
        {
            AppointmentResultsDataLINQ.DataContext =
                from Appointment appt in e.Results
                where appt.IsAllDayEvent == false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                select appt;       

        }
        catch (System.Exception)
        {

        }
    }

    private void button2_Click(object sender, RoutedEventArgs e)
    {

        if ((AppointmentResultsDataLINQ.DataContext).Equals("Meeting"))
        {
             mediaElement1.Source = new Uri("http://www.opendrive.com/files/NV8zNTMwNDYwX2hxRXZR/Crystallize.mp3", UriKind.Absolute);              
        }          

        else
        {
            mediaElement1.Source = new Uri("https://www.opendrive.com/files/NV8zMjAxODY0X0VBNDJY/Hetken%20tie%20on%20kevyt%20(piano%20cover)%20-%20YouTube.mp3", UriKind.Absolute);                
        }
            mediaElement1.Play();
    }          
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:01:38.663

问题似乎是这一行：

```
if ((AppointmentResultsDataLINQ.DataContext).Equals("Meeting")) 
```

您正在将在实例上调用`ToString()`方法的结果`Appointment`与字符串“Meeting”进行比较。

你可能想要：

```
if ((AppointmentResultsDataLINQ.DataContext as Appointment).Subject.Equals("Meeting")) 
```

**更新**
您实际上是在检查约会的可枚举。
以下是检查其中任何一个是否为“会议”的方法：

```
if ((AppointmentResultsDataLINQ.DataContext as IEnumerable<Appointment>).Any(app => app.Subject.Equals("Meeting"))) 
```

# php - 响应为 iOS 应用程序开发的 php(Magento) Web 服务的 Http 状态码

> ID：14422745
> 
> 赞同：0
> 
> 时间：2013-01-20T08:07:57.563
> 
> 标签：php, web-services, magento, ios6, http-status-codes

我正在开发像 eBay 这样的 iOS 应用程序。对于这个 Web 服务开发人员正在使用 Magento。他为 Login 开发了 Web 服务。以下是情况：

1）如果我发送有效的登录凭据，他会返回我登录使用的信息作为响应 + 一个标志作为结果 = true & 在这种情况下 http 状态代码是 200。

2）如果我发送了错误的密码，他会返回一个标志，因为结果 = false & http 状态码是 200。

基本上我不想依赖结果标志，因为如果开发人员更改了结果标志名称，那么 iOS 应用程序将无法识别。所以我想遵循http状态码的标准。

我的问题是，在第二种情况下发送 200 作为 http 状态码是否正确？我认为他应该给我发 401 吗？如果我错了，请纠正我。如果我是对的，有没有办法从 php 代码发送 http 状态代码，以便我可以在 iOS 端检查 http 状态代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-10T05:54:46.693

您可以通过以下方式在 Magento 中添加自定义响应状态代码，

```
$this->getResponse()->setHeader('HTTP/1.0','404',true);
$this->getResponse()->setHeader('HTTP/1.0','200',true); 
```

where $this is controller action object, code works in your magento controller

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T08:19:10.193

> 我的问题是，在第二种情况下发送 200 作为 http 状态码是否正确？我认为他应该给我发 401 吗？如果我错了，请纠正我。

这取决于您的需求。编写规范，然后相应地实施。如果你说401，就拿401。

> 如果我是对的，有没有办法从 php 代码发送 http 状态代码，以便我可以在 iOS 端检查 http 状态代码？

当然，有。幸运的是[，之前有人问过](https://stackoverflow.com/q/4797274/367456)这个问题，所以信息已经在这个网站上，我们不需要再次回答。

# python - FlickrApi 异常：调用 photo.getSizes() 时找不到照片

> ID：14422746
> 
> 赞同：2
> 
> 时间：2013-01-20T08:07:58.540
> 
> 标签：python, api, flickr

我`flickrapi.exceptions.FlickrError: Error: 1: Photo not found`在下面的代码中得到一个异常，在这一行：

```
sizes_element =  self.flickr.photos_getSizes(k_id = id) 
```

但是，根据我的`photo_id`说法，我通过的是正确的。

```
import flickrapi

class FlickrDownloader():

def __init__(self,key,secret):
   self.api_key = key
   self.secret = secret
   self.flickr = flickrapi.FlickrAPI(self.api_key,self.secret)

def getUrls(self):
    self.photos = self.flickr
    self.urlList = []

    #get a list of photos
    photo_element = self.flickr.photos_search(tags = 'flowers',per_page = '10')
    #get and iterator over elements
    photo_iter = photo_element.iter('photo')
    self.i = 0

    for photo in photo_iter:
        #get the photo id
        id = photo.attrib['id']
        print id
        #get the different sizes of photo
        sizes_element =  self.flickr.photos_getSizes(k_id = id)
        #get an interator
        sizes_iter = sizes_element.iter('size')

        #iterate over the sizes
        for size in sizes_iter:
            #check if its original size
            if size.attrib['label'] == 'Original':
                self.urlList.append(size.attrib['source'])

    return self.urlList 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-02T08:05:00.323

flickr.photos.getSizes 调用不带`k_id`参数。检查[Flickr 文档](http://www.flickr.com/services/api/flickr.photos.getSizes.html)，它显示您需要使用`photo_id`参数传递照片 ID。您需要正确获取参数名称，否则 Flickr 不知道如何处理它们。

# ruby-on-rails-3 - rail3中的简单路线

> ID：14422748
> 
> 赞同：0
> 
> 时间：2013-01-20T08:08:35.940
> 
> 标签：ruby-on-rails-3, subdomain

我正在尝试使用管理子域来提供对我的网站的一些后端保护访问。

我看到很多关于如何使子域匹配任何字符串的相当复杂的教程，但我只想要一些简单的东西。

在我的路线中，我有

```
约束(:subdomain => 'admin') 做
    资源：管理员
    根 :to => 'admin#index'
  结尾

```

但这并不能解决。

我在 ubuntu 虚拟机上运行我的开发，所以我通过 ip 地址而不是 localhost 进行连接，所以大多数人因为 localhost 而遇到问题的问题我认为不适用于我。

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:39:54.010

您需要通过 /etc/hosts 处理此问题，并在连接时提供真实的主机名，例如 admin.example.com

# c# - Asp.Net：从更新面板中的用户控件重定向到另一个页面

> ID：14422750
> 
> 赞同：1
> 
> 时间：2013-01-20T08:08:37.357
> 
> 标签：c#, javascript, asp.net

我有一个更新面板，里面有一个菜单。
当用户单击用户控件（在我的更新面板中）的网格视图中的打印按钮时，我想重定向到另一个页面
我使用了这些代码，但它们对我不起作用：

```
1 : Response.Redirect("PrintTicket.aspx");
2 : Response.Write("<script>window.open('PrintTicket.aspx','_parent');</script>");
3 : Page.Response.Redirect("PrintTicket.aspx", true);
4 : Page.ClientScript.RegisterStartupScript(typeof(Page), "ClientScript", "<script     language='javascript' type='text/javascript'>window.location.replace('http://vinaticket.ir    /PrintTicket.aspx');</script> ", false);
5 : ScriptManager.RegisterStartupScript(this, this.GetType(),     "redirect","window.location='" + Request.ApplicationPath + "PrintTicket.aspx';", true);
6 : Page.ClientScript.RegisterStartupScript(typeof(Page), "ClientScript", "<script     language='javascript' type='text/javascript'> postRefId('" + Session["TicketID"].ToString() +     "');</script> ", false);
7 : ScriptManager.RegisterStartupScript(this, this.GetType(), "redir", "document.location = 'PrintTicket.aspx'", true); 
```

这是我的代码：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" ChildrenAsTriggers="true"     UpdateMode="Conditional">
<ContentTemplate>
----menu .... with exit button
    <asp:PlaceHolder ID="PlaceHolder1" runat="server" ViewStateMode="Enabled">

    </asp:PlaceHolder>

</ContentTemplate>
<Triggers>
    <asp:PostBackTrigger ControlID="exit" />
</Triggers>
</asp:UpdatePanel>
//code behind to loade user control
private string LastLoadedControl
{
    get
    {
        return ViewState["LastLoaded"] as string;
    }
    set
    {
        ViewState["LastLoaded"] = value;
    }
}

private void LoadUserControl()
{
    try
    {
        string controlPath = LastLoadedControl;

        if (!string.IsNullOrEmpty(controlPath))
        {
            PlaceHolder1.Controls.Clear();
            UserControl uc = (UserControl)LoadControl(controlPath);
            PlaceHolder1.Controls.Add(uc);
        }
    }  
    catch (Exception ex) { }
} 
```

我的菜单按钮：

```
protected void your_ticket_Click(object sender, EventArgs e)
    {
        尝试
        {
            会话["pg"] = "Z_ViewTicket.ascx";
            设置路径（）；
        }
        捕捉（异常前）{}
    } and set path method(): `protected void setPath()
{
    try
    {
        string controlPath = string.Empty;
        controlPath = BASE_PATH + Session["pg"].ToString();
        LastLoadedControl = controlPath;
        LoadUserControl();
    }
    catch (Exception ex) { }
}` 

**注意：**我测试了一个示例代码并找到了原因，在我的示例代码中，我将用户控件拖到我的更新面板并且按钮工作，但是当我通过这些代码调用用户控件时，按钮不起作用（以防万一用户控制注册到主页，但如果两个主页中没有任何注册代码）

对于这个问题**，我如何重定向到其他页面？**

            回答 #1

赞同：0

时间：2013-01-20T10:16:29.263

我将对“没有例外”做出几个大胆的假设，但让我们试一试：

1.  您[在 Visual Studio 中为脚本禁用了 JIT 调试](http://msdn.microsoft.com/en-us/library/k8kf6y2a%28v=vs.80%29.aspx)
2.  您已[在 Internet Explorer 中禁用调试](http://msdn.microsoft.com/en-us/library/ms241741%28v=vs.80%29.aspx)

参考问题真实主题，您可能正在将数据源绑定到您`GridView`的`Page_Load`事件（检查此[答案](https://stackoverflow.com/a/12450217/674700)）。

在您的用户控件内（或将数据绑定到 GridView 的任何位置），您必须`!Page.IsPostback`在将 GridView 绑定到数据源之前进行检查：

```
if (!IsPostBack)
{
    gridView.DataSource = new[] { new { Id = 1, Value = "test" } };
    gridView.DataBind();
} 
```

```

# java - 从远程服务器下载 pdf

> ID：14422751
> 
> 赞同：0
> 
> 时间：2013-01-20T08:08:41.143
> 
> 标签：java, android

我正在尝试制作一个应用程序，该应用程序需要将 pdf 文件从手机推送到服务器，同时在 wifi 可用时从不同手机中的服务器下载这些文件……所以请帮助我启动…​​…

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:25:32.600

您应该提供更多信息，但如果我通过服务器上的 URL 获得资源，我会这样做。

如果您只想在设备上查看它：

> startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(some-url)));

如果你想下载它并用它做其他事情，那么使用 Java 套接字连接到服务器并获取文件。

要知道 WiFi 何时可用，您需要注册一个 BroadcastReceiver，以便在 WiFi 的连接状态更改时通知您的活动。

[在这里](https://stackoverflow.com/questions/5888502/android-wifi-how-to-detect-when-wifi-connection-has-been-established)，您有一个帖子，其中最佳答案显示了如何做到这一点的示例。

# android - 按下按钮时相机不拍照

> ID：14422753
> 
> 赞同：0
> 
> 时间：2013-01-20T08:08:56.760
> 
> 标签：android, android-intent, camera

我正在使用以下代码在按下按钮时使用相机拍照。

但是，当我运行代码时，它只会在按下按钮后启动相机应用程序，**但不会拍照。为什么这不起作用？**

***我想在按下按钮时拍照并将其存储在可以在图库应用程序中查看的 SD 卡上。***

```
public class demo extends Activity 
{
Button ButtonClick;
int CAMERA_PIC_REQUEST = 1337; 

@Override
public void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

ButtonClick =(Button) findViewById(R.id.Camera);
ButtonClick.setOnClickListener(new OnClickListener ()
   {
    @Override
    public void onClick(View view)
    {
        Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        // request code

        startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);

    }
  });

 }

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{
   if( requestCode == 1337)
   {
   //  data.getExtras()
      Bitmap thumbnail = (Bitmap) data.getExtras().get("data");          
   }
   else 
   {
    Toast.makeText(demo.this, "Picture NOt taken", Toast.LENGTH_LONG).show();
   }
    super.onActivityResult(requestCode, resultCode, data);
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:25:45.877

是的，这是默认行为。有两种方法。

1）启动相机应用程序意图（您正在这样做），然后通过相机应用程序单击图片（就像默认相机一样，通过单击相机拍照按钮或硬键。）

2) 使用 Camera 类和 Surfaceview 创建您的自定义相机视图。它可以让你完全控制用相机做任何你想做的事情（虽然有限）

# java - 用Java画一个漂亮的圆圈

> ID：14422757
> 
> 赞同：6
> 
> 时间：2013-01-20T08:10:29.477
> 
> 标签：java, graphics, awt, geometry, java-2d

我正在使用 Java Graphics，但我不断得到“丑陋”的圆圈。

这是我的 Java 程序所做的 ![在此处输入图像描述](../Images/2ed5fd51d06af6189ccf87d29916f511.png)

这是在 Matlab 中做的同样的事情![在此处输入图像描述](../Images/896b65cc453790628c6d0c3d0d2b4a26.png)

我认为很明显，Java 不像 Matlab 那样“漂亮”，尤其是在圆圈的边缘。请注意，这与分辨率无关......这些图像实际上大小相同。另请注意，我已经在设置渲染提示。

这是一个独立的 Main 函数，您可以运行它来测试它。

```
package test;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.Shape;
import java.awt.geom.AffineTransform;
import java.awt.geom.Ellipse2D;
import java.awt.image.BufferedImage;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;

public class SimplePaint02 {

    private static final int LINE_THICKNESS = 4;
    private static final int LINE_GAP = 10;
    private Color lineColor = Color.red;

    public static void main(String[] args) {
        new SimplePaint02();
    }

    public SimplePaint02() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(100, 100);
        }

        @Override
        public void paintComponent(Graphics g) {

            int radius = 50;
            BufferedImage buffer = new BufferedImage(radius, radius, BufferedImage.TYPE_INT_ARGB);
            Graphics2D g2d = buffer.createGraphics();
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION,RenderingHints.VALUE_INTERPOLATION_BILINEAR);

            Ellipse2D circle = new Ellipse2D.Float(0, 0, radius,radius);
            Shape clip = g2d.getClip();
            g2d.setClip(circle);
            AffineTransform at = g2d.getTransform();

            g2d.setTransform(AffineTransform.getRotateInstance(Math.toRadians(45),radius / 2, radius / 2));

            int gap = LINE_GAP;

            g2d.setColor(Color.WHITE);
            g2d.fill(circle);

            g2d.setColor(lineColor);
            //g2d.setStroke(new BasicStroke(LINE_THICKNESS));
            for (int index = 0; index < 10; index++) {
                int x1 = index*gap-(LINE_THICKNESS/2);
                int y1 = 0;
                int x2 = index*gap+(LINE_THICKNESS/2);
                int y2 = radius;
                int width = x2 - x1;
                int height = y2 - y1;

                g2d.fillRect(x1, y1, width, height);
                //g2d.drawLine(index * gap, 0, index * gap, getRadius());
            }

            g2d.setTransform(at);
            g2d.setClip(clip);
            g2d.dispose();
            g.drawImage(buffer, 0, 0, this);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T08:28:24.867

**编辑：**请参阅下面的 Code Guy 的答案以获得解决方案。这被标记为正确，因为最初是乔伊·罗汉（Joey Rohan）发现的！

* * *

当我尝试同样的事情时，我得到了平滑的边缘：

```
 g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,    RenderingHints.VALUE_ANTIALIAS_ON); 
```

![在此处输入图像描述](../Images/fdf704d543d63a855d7ef8b2febed505.png)

```
import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.image.BufferedImage;
import java.io.File;
import javax.imageio.ImageIO;

public class DrawSmoothCircle {
    public static void main(String[] argv) throws Exception {
        BufferedImage bufferedImage = new BufferedImage(100, 100, BufferedImage.TYPE_INT_RGB);
        Graphics2D g2d = bufferedImage.createGraphics();

        g2d.setRenderingHint (RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setPaint(Color.green);
        g2d.fillOval(10, 10, 50, 50);
        g2d.dispose();

        ImageIO.write(bufferedImage, "png", new File("e:\\newimage.png"));
    }
} 
```

**更新：**

经过大量搜索：

代码没有错，但是，

**好吧，不幸的是，Java 2D（或至少 Sun 当前的实现）不支持“软剪辑”。**

但也有剪辑技巧：[点击此链接](http://weblogs.java.net/blog/campbell/archive/2006/07/java_2d_tricker.html)，您可以实现您的要求。

（另外，我有一个平滑的边缘，因为我没有使用剪辑的东西，在我的上图中）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T09:49:29.610

这就是答案。[我改编了这个网站](http://weblogs.java.net/blog/campbell/archive/2006/07/java_2d_tricker.html)的大部分代码。看一看：

![在此处输入图像描述](../Images/4da326fd015848eb64ce51ec34d0b857.png)

这是代码：

```
public void paintComponent(Graphics g) {

        // Create a translucent intermediate image in which we can perform
        // the soft clipping
        GraphicsConfiguration gc = ((Graphics2D) g).getDeviceConfiguration();
        BufferedImage img = gc.createCompatibleImage(getWidth(), getHeight(), Transparency.TRANSLUCENT);
        Graphics2D g2 = img.createGraphics();

        // Clear the image so all pixels have zero alpha
        g2.setComposite(AlphaComposite.Clear);
        g2.fillRect(0, 0, getWidth(), getHeight());

        // Render our clip shape into the image.  Note that we enable
        // antialiasing to achieve the soft clipping effect.  Try
        // commenting out the line that enables antialiasing, and
        // you will see that you end up with the usual hard clipping.
        g2.setComposite(AlphaComposite.Src);
        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2.setColor(Color.WHITE);
        g2.fillOval(0, 0, getRadius(), getRadius());

        // Here's the trick... We use SrcAtop, which effectively uses the
        // alpha value as a coverage value for each pixel stored in the
        // destination.  For the areas outside our clip shape, the destination
        // alpha will be zero, so nothing is rendered in those areas.  For
        // the areas inside our clip shape, the destination alpha will be fully
        // opaque, so the full color is rendered.  At the edges, the original
        // antialiasing is carried over to give us the desired soft clipping
        // effect.
        g2.setComposite(AlphaComposite.SrcAtop);
        g2.setColor(lineColor);
        int gap = LINE_GAP;
        AffineTransform at = g2.getTransform();

        g2.setTransform(AffineTransform.getRotateInstance(Math.toRadians(45),getRadius() / 2, getRadius() / 2));

        for (int index = 0; index < 10; index++) {
            int x1 = index*gap-(LINE_THICKNESS/2);
            int y1 = 0;
            int x2 = index*gap+(LINE_THICKNESS/2);
            int y2 = getRadius();
            int width = x2 - x1;
            int height = y2 - y1;

            g2.fillRect(x1, y1, width, height);
        }

        g2.setTransform(at);
        g2.dispose();

        // Copy our intermediate image to the screen
        g.drawImage(img, 0, 0, null);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T08:32:56.020

## 更新

好的。然后这个想法是*根本不使用剪裁**，***而是通过相互减去区域来制作剪裁形状。

![通过减去区域进行裁剪](../Images/8f2651ff4ef3bef9032916f26ba8a349.png)

```
import java.awt.*;
import java.awt.geom.*;
import java.awt.image.BufferedImage;
import javax.swing.*;

public class SimplePaint02 {

    private static final int LINE_THICKNESS = 4;
    private static final int LINE_GAP = 10;
    private Color lineColor = Color.red;

    public static void main(String[] args) {
        new SimplePaint02();
    }

    public SimplePaint02() {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        int radius = 75;

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(radius, radius);
        }

        @Override
        public void paintComponent(Graphics g) {

            Ellipse2D circle = new Ellipse2D.Float(0, 0, radius, radius);
            Area lines = new Area();

            int gap = LINE_GAP;

            for (int index = 0; index < 10; index++) {
                int x1 = index * gap - (LINE_THICKNESS / 2);
                int y1 = 0;
                int x2 = index * gap + (LINE_THICKNESS / 2);
                int y2 = radius;
                int width = x2 - x1;
                int height = y2 - y1;

                Shape lineShape = new Rectangle2D.Double(x1, y1, width, height);
                lines.add(new Area(lineShape));

                //g3d.fillRect(x1, y1, width, height);
                //g2d.drawLine(index * gap, 0, index * gap, getRadius());
            }
            //g2d.setClip(circle);

            Area circleNoLines = new Area(circle);
            circleNoLines.subtract(lines);

            Area linesCutToCircle = new Area(circle);
            linesCutToCircle.subtract(circleNoLines);

            //g2d.setTransform(at);
            BufferedImage buffer = new BufferedImage(radius * 2, radius * 2, BufferedImage.TYPE_INT_ARGB);
            Graphics2D g2d = buffer.createGraphics();

            RenderingHints rh = new RenderingHints(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            g2d.setTransform(AffineTransform.getRotateInstance(Math.toRadians(45), radius / 2, radius / 2));
            g2d.setRenderingHints(rh);
            g2d.setColor(Color.ORANGE);
            g2d.fill(linesCutToCircle);
            g2d.setColor(Color.RED);
            g2d.fill(circleNoLines);

            g2d.dispose();
            g.drawImage(buffer, 0, 0, this);
        }
    }
} 
```

## 旧代码

部分问题是渲染操作通常不适用于 a `Clip`，尽管它们将适用于`Shape`绘制时。我通常通过（最后）绘制`Shape`本身来解决这个问题。例如

![SimplePaint02](../Images/a800089bf1b16bc32899091ed788919a.png)

此处使用1.5 像素`BasicStroke`作为红色圆圈 - 平滑由`Clip`.

```
import java.awt.*;
import java.awt.geom.AffineTransform;
import java.awt.geom.Ellipse2D;
import java.awt.image.BufferedImage;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;

public class SimplePaint02 {

    private static final int LINE_THICKNESS = 4;
    private static final int LINE_GAP = 10;
    private Color lineColor = Color.red;

    public static void main(String[] args) {
        new SimplePaint02();
    }

    public SimplePaint02() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        int radius = 75;

        @Override
        public Dimension getPreferredSize() {
            return new Dimension((int)(1.1*radius), (int)(1.1*radius));
        }

        @Override
        public void paintComponent(Graphics g) {

            BufferedImage buffer = new BufferedImage(radius*2, radius*2, BufferedImage.TYPE_INT_ARGB);
            Graphics2D g2d = buffer.createGraphics();

            RenderingHints rh = new RenderingHints(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            rh.put(RenderingHints.KEY_DITHERING,RenderingHints.VALUE_DITHER_ENABLE);
            rh.put(RenderingHints.KEY_COLOR_RENDERING,RenderingHints.VALUE_COLOR_RENDER_QUALITY);
            g2d.setRenderingHints(rh);

            Ellipse2D circle = new Ellipse2D.Float(0, 0, radius,radius);
            Shape clip = g2d.getClip();
            g2d.setClip(circle);
            AffineTransform at = g2d.getTransform();

            g2d.setTransform(AffineTransform.getRotateInstance(Math.toRadians(45),radius / 2, radius / 2));

            int gap = LINE_GAP;

            g2d.setColor(Color.WHITE);
            g2d.fill(circle);

            g2d.setColor(lineColor);
            //g2d.setStroke(new BasicStroke(LINE_THICKNESS));
            for (int index = 0; index < 10; index++) {
                int x1 = index*gap-(LINE_THICKNESS/2);
                int y1 = 0;
                int x2 = index*gap+(LINE_THICKNESS/2);
                int y2 = radius;
                int width = x2 - x1;
                int height = y2 - y1;

                g2d.fillRect(x1, y1, width, height);
                //g2d.drawLine(index * gap, 0, index * gap, getRadius());
            }

            g2d.setTransform(at);
            g2d.setClip(clip);
            g2d.setClip(null);
            g2d.setStroke(new BasicStroke(1.5f));
            g2d.draw(circle);
            g2d.dispose();
            g.drawImage(buffer, 0, 0, this);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-29T19:17:08.297

我使用 drawPolygon 方法通过在具有建议半径的圆的圆周上生成大多数点的数组来绘制圆。代码：

```
 import java.awt.*;
           import java.applet.*;

            /*<applet code="OnlyCircle" width=500 height=500>
                 </applet>*/

          public class OnlyCircle extends Applet{

            public void paint(Graphics g){

              int r=200;//radius
              int x1=250;//center x coordinate
              int y1=250;//center y coordinate
              double x2,y2;
              double a=0;
              double pi=3.14159;
              int count=0; 
              int i=0;
              int f=0;
              int[] x22=new int[628319];
              int[] y22=new int[628319];

             while(a<=2*pi&&i<628319&&f<628319)
                  {
                   double k=Math.cos(a);
                   double l=Math.sin(a);
                     x2=x1+r*k;
                     y2=y1+r*l;
                  x22[i]=(int)x2;
                  y22[f]=(int)y2;
                   i++;
                   f++;
                   a+=0.00001;
                  }
               int length=x22.length;
               g.drawPolygon(x22,y22,length);
                 }
               } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T08:24:42.500

您可以启用抗锯齿：

```
Graphics2D g2 = (Graphics2D) g;
Map<RenderingHints.Key, Object> hints = new HashMap<RenderingHints.Key, Object>();
hints.put(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON); 
g2.setRenderingHints(hints); 
```

我还建议您绘制从该`paintComponent`方法获得的 Graphics 对象，而不是创建一个中间`BufferedImage`.

# sql - 数据库列中深度嵌套的类型是否存在重大缺点？

> ID：14422762
> 
> 赞同：-1
> 
> 时间：2013-01-20T08:11:46.330
> 
> 标签：sql, database-design, schema, data-modeling

我正在尝试以各种方式评估构建我的数据模型的利弊，我想知道我是否会通过将相当复杂的嵌套数据类型填充到 SQL 表的各个列中来打击自己.

例如，假设我想序列化一个结构数组（或者更糟糕的是，哈希数组）并将其保存在单个列中。它很可能是一个有点嵌套的 JSON 字典。就像是：

```
user_id | user_related_data_blob
---------------------------
1       | { .... } 
```

我可以立即看到的明显缺点是数据耦合，以防某些数据与用户的关系不是很紧密。还有每个检索到的行的大小，这可能会使从 Web 获取相当慢，尤其是在大多数数据甚至不是客户端立即需要的情况下。通过这些列执行 SQL 也变得相当复杂（并且可能不可索引），除非有特殊的技术来支持它。

几乎唯一的好处是，如果您不想创建复杂的模式并花费大量时间确保所有约束都是合理的并且您拥有的约束更少移动部件。对于像快速原型这样的东西，它甚至可能是有意义的。

我在这里错过了什么吗？SQL 世界中是否有一条经验法则规定您永远不应将数据嵌套在单个列中？有什么好的指导方针吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T08:42:22.133

> SQL 世界中是否有一条经验法则规定您永远不应将数据嵌套在单个列中？

[开始的第一个范式](http://en.wikipedia.org/wiki/First_normal_form)。也许您正在寻求 NoSQL 解决方案？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:42:42.933

在 SQL 数据库中存储 blob 数据是个坏主意，因为 SQL 不理解它，也没有提供有用的工具来处理它。

1.  无法搜索或过滤 BLOB 数据
2.  没有办法只检索 BLOB 的一部分，要么全有要么全无
3.  大多数 SQL 数据库不是为处理 BLOB 而在内部构建的

您可以找到一个肮脏的解决方法，使用 SQL 中的字符串操作来获得对 blob 内容的一些有限访问，但是这些将非常非常缓慢且难以实现和维护。

但是当嵌套文档是表达数据的最佳方式时，您应该考虑使用面向文档的数据库，例如 MongoDB 或 CouchDB，它们提供了搜索、过滤和修改文档的各个字段的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T11:22:45.487

一个主要问题是您可能需要将数据检索到另一个环境中才能有效地更新它，而不太可能以最有效的方式访问它。例如，Postgres 有一个 json 数据类型和一些用于检索和存储数据的功能，包括类型验证，但是您仍然需要从数据库中检索对象，在代码中将其序列化，然后以您想要的方式访问它。

如果您必须以特定格式存储数据，那么由于数据存储种类繁多，我会寻找围绕该格式设计的选项。例如，Mongo 和 Couchbase 是存储 JSON 编码数据的出色引擎，允许您将 JSON 对象作为其自然类型进行访问。

回到 Postgres，它确实提供了 row_to_json() 函数，该函数将返回格式化为 JSON 的表行。如果您可以轻松地将 JSON 数据映射到平面表结构，这可能会提供一些可能性。当然，它对非结构化或半结构化数据没有帮助。

# jquery - 使用ajax请求，jquery检查用户身份验证

> ID：14422765
> 
> 赞同：0
> 
> 时间：2013-01-20T08:12:39.320
> 
> 标签：jquery, ajax, node.js, authentication

我有一个接收这个 ajax 请求的基于 nodeJS 的服务器

```
 $("#inbox").click(function() {
        $.ajax({
            type: "POST",
        url: "/inbox",
        data: dataString,
        username: 'test',
        password: 'test',
        success: function(data) {
        mails = JSON.parse(data);
        var html = new String();
        for (var i = 0 ; i < mails.length ; i++) {
            html += mails[i].from + ": " + mails[i].subject + "<br>";
        }
        $("#emails").html(data);
            },
        error: function(xhr, textStatus, errorThrown) {
        $("#emails").html("bad");
        }
        });
    }); 
```

如何在服务器端获取用户名和密码？我检查了请求标头，没有看到任何对我有帮助的东西。

另外：登录后，验证用户名和密码后，我会发送一个响应，将用户重定向到`/mail?user=username`. 我如何安全地发送密码以便`mail.html`将其发送给进一步的请求？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T10:01:39.227

如果您使用 Express，则需要先使用`basicAuth`中间件之类的东西。如果你正在使用它，你可以开始`username`使用`req.user`. 如果您还想访问密码，我认为您需要提供自己的验证回调：

```
app.use(express.basicAuth(function(user, pass){
  // validate username/password and return true or false
})); 
```

如需更多信息，[请查看此处](http://expressjs.com/api.html#basicAuth)。

至于将密码传递给`mail.html`：不要。改用会话。

# javascript - 使用 jQuery 滚动时调整 div 不透明度？

> ID：14422767
> 
> 赞同：0
> 
> 时间：2013-01-20T08:12:43.783
> 
> 标签：javascript, jquery, animation, opacity

我已经阅读了一些关于如何执行此操作的建议，但我找不到一个涵盖如何在不透明度达到页面上的偏移量并为更改设置动画时更改不透明度的建议。还要记住，我不想完全淡出 div，只要用户滚动到某个点后将不透明度减半。

我想出了这个，但我不知道如何正确地动画不透明度的变化：

```
<script type="text/javascript">
var fadeStart=150 
,fading = $('#header')
;

$(window).bind('scroll', function(){
var offset = $(document).scrollTop()
;
if( offset<=fadeStart ){
    opacity=1;
}else if( offset>=fadeStart ){
    opacity=0.5;
}
fading.css('opacity',opacity);
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:29:55.083

与其将最终值设置为一个 using `fading.css('opacity',opacity);`，不如通过 using 对其进行动画处理`fading.animate({opacity: opacity}, 'fast');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T09:44:42.800

我认为您可以使用以下内容进行编辑：

```
var fadeStart=150
    ,fading = $('#header')
;

$(window).bind('scroll', function(){
    var offset = $(document).scrollTop()
        ,opacity=0
    ;
    if( offset<=fadeStart ){
        opacity=1;
    }else if( offset<=fadeUntil ){
        opacity=1-offset/fadeUntil;
    }
    fading.css('opacity',opacity)//.html(opacity)
    ;
}); 
```

# javascript - 禁用表单而不丢失发布数据

> ID：14422768
> 
> 赞同：0
> 
> 时间：2013-01-20T08:12:46.587
> 
> 标签：javascript, jquery, ruby, sinatra

如果我这样做

```
function disableSearchForm(){
    $("#myform :input").prop("disabled", true);
  }
$(document).on("click", "#ididid123", function(){
    disableSearchForm();
    $.ajax({
         //............
    });

    return false;
  }); 
```

然后`params`由于调用`disableSearchForm();`. 那么我可以“吃蛋糕也吃”吗？我想禁用表单并且仍然能够从`params`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:51:41.180

在禁用输入之前[序列化表单：](http://api.jquery.com/serialize/)

```
$(document).on("click", "#ididid123", function(){
    var data = $('#myform').serialize();
    disableSearchForm();
    $.ajax({
      data: data
      //............
    });
    return false;
}); 
```

# c++ - 在 boost::asio 中选择功能

> ID：14422769
> 
> 赞同：16
> 
> 时间：2013-01-20T08:12:55.937
> 
> 标签：c++, sockets, boost-asio

我将为我的项目使用 boost::asio lib。`select()`但是从本机套接字 C 库中对应哪个函数并不是很明显。asio里有这个吗？或者 boost 是否提供了一种替代方法来确定套接字是否准备就绪？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T12:37:08.883

的高级设计`Boost.Asio`基于[Proactor设计模式](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/overview/core/async.html)。因此，您无需在`select`. 相反，为异步操作提交完成处理程序，当操作完成时 - 完成处理程序被调用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-20T15:34:41.713

该文档有一个[特定部分](http://www.boost.org/doc/libs/release/doc/html/boost_asio/overview/networking/bsd_sockets.html)用于将 BSD 套接字 API 调用映射到它们各自的 Asio 等效项

> **`poll()`, `select()`,`pselect()`**
> 
> `io_service::run()`, `io_service::run_one()`, `io_service::poll()`, `io_service::poll_one()`
> 
> 注意：结合异步操作。

请注意，每种方法之间存在细微差别`io_service`，选择正确的方法取决于您的应用程序设计。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-03T10:06:27.883

Boost.Asio 确实使用 null_buffers 提供了类似选择的功能。[https://stackoverflow.com/a/4686523/1134207](https://stackoverflow.com/a/4686523/1134207)解释更多。

# c# - 使用 GZipStream 解压缩 .gz 文件

> ID：14422773
> 
> 赞同：5
> 
> 时间：2013-01-20T08:13:49.977
> 
> 标签：c#, filestream, gzipstream

我有几个.gz文件，我想一一解压。我在 C# 中使用 GzipStream 编写了一个简单的代码，但失败了。我想知道一个正确而有用的方法来实现我想要的。非常感谢。

```
private string Extrgz(string infile)
{
    string dir = Path.GetDirectoryName(infile);
    string decompressionFileName = dir + Path.GetFileNameWithoutExtension(infile) + "_decompression.bin";
    using (GZipStream instream = new GZipStream(File.OpenRead(infile), CompressionMode.Compress))// ArgumentException...
    {
        using (FileStream outputStream = new FileStream(decompressionFileName, FileMode.Append, FileAccess.Write))
        {
            int bufferSize = 8192, bytesRead = 0;
            byte[] buffer = new byte[bufferSize];
            while ((bytesRead = instream.Read(buffer, 0, bufferSize)) > 0)
            {
                outputStream.Write(buffer, 0, bytesRead);
            }
        }
    }
    return decompressionFileName;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-20T08:55:55.277

您需要解压缩，但您设置`CompressionMode.Compress`，将其替换为`CompressionMode.Decompress`.

[**这里**](http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream.aspx)的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-30T09:43:37.980

这里：

```
public static void DeCompressFile(string CompressedFile, string DeCompressedFile)
{
    byte[] buffer = new byte[1024 * 1024];

    using (System.IO.FileStream fstrmCompressedFile = System.IO.File.OpenRead(CompressedFile)) // fi.OpenRead())
    {
        using (System.IO.FileStream fstrmDecompressedFile = System.IO.File.Create(DeCompressedFile))
        {
            using (System.IO.Compression.GZipStream strmUncompress = new System.IO.Compression.GZipStream(fstrmCompressedFile,
                    System.IO.Compression.CompressionMode.Decompress))
            {
                int numRead = strmUncompress.Read(buffer, 0, buffer.Length);

                while (numRead != 0)
                {
                    fstrmDecompressedFile.Write(buffer, 0, numRead);
                    fstrmDecompressedFile.Flush();
                    numRead = strmUncompress.Read(buffer, 0, buffer.Length);
                } // Whend

                //int numRead = 0;

                //while ((numRead = strmUncompress.Read(buffer, 0, buffer.Length)) != 0)
                //{
                //    fstrmDecompressedFile.Write(buffer, 0, numRead);
                //    fstrmDecompressedFile.Flush();
                //} // Whend

                strmUncompress.Close();
            } // End Using System.IO.Compression.GZipStream strmUncompress 

            fstrmDecompressedFile.Flush();
            fstrmDecompressedFile.Close();
        } // End Using System.IO.FileStream fstrmCompressedFile 

        fstrmCompressedFile.Close();
    } // End Using System.IO.FileStream fstrmCompressedFile 

} // End Sub DeCompressFile

// http://www.dotnetperls.com/decompress
public static byte[] Decompress(byte[] gzip)
{
    byte[] baRetVal = null;
    using (System.IO.MemoryStream ByteStream = new System.IO.MemoryStream(gzip))
    {

        // Create a GZIP stream with decompression mode.
        // ... Then create a buffer and write into while reading from the GZIP stream.
        using (System.IO.Compression.GZipStream stream = new System.IO.Compression.GZipStream(ByteStream
            , System.IO.Compression.CompressionMode.Decompress))
        {
            const int size = 4096;
            byte[] buffer = new byte[size];
            using (System.IO.MemoryStream memory = new System.IO.MemoryStream())
            {
                int count = 0;
                count = stream.Read(buffer, 0, size);
                while (count > 0)
                {
                    memory.Write(buffer, 0, count);
                    memory.Flush();
                    count = stream.Read(buffer, 0, size);
                }

                baRetVal = memory.ToArray();
                memory.Close();
            }

            stream.Close();
        } // End Using System.IO.Compression.GZipStream stream 

        ByteStream.Close();
    } // End Using System.IO.MemoryStream ByteStream

    return baRetVal;
} // End Sub Decompress 
```

# c - 如何在C中检查给定的字符串是否仅包含数字

> ID：14422775
> 
> 赞同：9
> 
> 时间：2013-01-20T08:14:10.757
> 
> 标签：c

如何检查给定的字符串是否仅包含数字？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-20T08:40:51.873

您可以使用`isdigit()`宏来检查字符是否为数字。使用它，您可以轻松编写一个检查字符串是否仅包含数字的函数。

```
#include <ctype.h>

int digits_only(const char *s)
{
    while (*s) {
        if (isdigit(*s++) == 0) return 0;
    }

    return 1;
} 
```

超小型文体旁注：为空字符串返回 true。您可能想要也可能不想要这种行为。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-20T09:09:27.737

```
#include<stdio.h>
void main()
{
    char str[50];
    int i,len = 0,count = 0;
    clrscr();
    printf("enter any string:: ");
    scanf("%s",str);
    len = strlen(str);
    for(i=0;i<len;i++)
    {
            if(str[i] >= 48 && str[i] <= 57)    
            {
                  count++;
            }
    }
    printf("%d outoff %d numbers in a string",count,len);
    getch();
} 
```

# asp.net - 如何在单个表中插入来自不同文本框的多条记录？

> ID：14422776
> 
> 赞同：0
> 
> 时间：2013-01-20T08:14:19.843
> 
> 标签：asp.net, database, vb.net, linq

我有一个视图，它由八个组成，`Textboxes`用于从用户输入问题的选项文本以在`DataBase`表中提交。这些值将进入名为 Question_Options 的表中，该表具有相同的 Question_Id(FK)，我保存在隐藏字段中，现在我必须提交所有`TextBoxes`值`DataBase`，我想通过循环来完成 ....请有任何想法 ....i我只是一个初学者。

我的 HTML 代码是

```
 <table>
        <tr>
            <td>Option 1
                <asp:HiddenField ID="HF_QidOpt" runat="server" />
            </td>
            <td>
                <asp:TextBox ID="txt_OptText" runat="server" Height="54px" TextMode="MultiLine" Width="310px"></asp:TextBox>
            </td>
            <td>Option 1 Description</td>
            <td>
                <asp:TextBox ID="txt_OptDesc" runat="server" TextMode="MultiLine" Height="54px" Width="310px"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td>Option 2</td>
            <td>
                <asp:TextBox ID="txt_OptText2" runat="server" Height="54px" TextMode="MultiLine" Width="310px"></asp:TextBox>
            </td>
            <td>Option 2 Description</td>
            <td>
                <asp:TextBox ID="txt_OptDesc2" runat="server" TextMode="MultiLine" Height="54px" Width="310px"></asp:TextBox></td>
        </tr>
        <tr>
            <td>Option 3</td>
            <td>
                <asp:TextBox ID="txt_OptText3" runat="server" Height="54px" TextMode="MultiLine" Width="310px"></asp:TextBox></td>
            <td>Option 3 Description</td>
            <td>
                <asp:TextBox ID="txt_OptDesc3" runat="server" TextMode="MultiLine" Height="54px" Width="310px"></asp:TextBox></td>
        </tr>
        <tr>
            <td>Option 4</td>
            <td>
                <asp:TextBox ID="txt_OptText4" runat="server" Height="54px" TextMode="MultiLine" Width="310px"></asp:TextBox></td>
            <td>Option 4 Description</td>
            <td>
                <asp:TextBox ID="txt_OptDesc4" runat="server" TextMode="MultiLine" Height="54px" Width="310px"></asp:TextBox></td>
        </tr>
        <tr>
            <td>
                <asp:Button ID="btn_Create_Option" runat="server" Text="Create Option" /></td>
        </tr>
        </table> 
```

我已经尝试过这个但无法获得价值

```
Try
            Dim DB As New SQLDBDataContext
            Dim NGUID As New System.Guid(HF_QidOpt.Value.ToString)
            Dim boxes As TextBox() = New TextBox() {txt_OptText, txt_OptText2, txt_OptText3, txt_OptText4, txt_OptDesc, txt_OptDesc2, txt_OptDesc3, txt_OptDesc4}
            For Each t As TextBox In boxes
                If t IsNot Nothing Then
                    Dim CO As New Question_Option
                    With CO
                        .UID = System.Guid.NewGuid
                        .Question_ID = NGUID
                        .Option_Text = 'How to get value of txt_OptText, txt_OptText2, txt_OptText3, txt_OptText4'
                        .Option_Description = 'How to get value of txt_OptDesc, txt_OptDesc2, txt_OptDesc3, txt_OptDesc4'
                    End With
                    DB.Question_Options.InsertOnSubmit(CO)
                End If
            Next
                    DB.SubmitChanges()
                    MV_Default.SetActiveView(V_Success)

        Catch ex As Exception
            lbl_Failure.Text = ex.Message
            MV_Default.SetActiveView(V_Failure) 
```

结束尝试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:03:38.610

您必须在 SQL Server 中使用 UNION ALL 在单个语句中的 SQL 脚本中插入多行。

```
 INSERT INTO Table 
     (Name, Location) 
  SELECT 'Name1', 'Location1' 
  UNION ALL
   SELECT 'Name2', 'Location2'
   UNION ALL
   SELECT 'Name3', 'Location3' 
```

参考[这个](http://blog.sqlauthority.com/2007/06/08/sql-server-insert-multiple-records-using-one-insert-statement-use-of-union-all/)和[这个](http://forums.asp.net/t/1146530.aspx)

# mongodb - 如何从嵌套集合中删除数据？

> ID：14422778
> 
> 赞同：0
> 
> 时间：2013-01-20T08:14:45.047
> 
> 标签：mongodb, mongodb-.net-driver

如何删除嵌套集合，例如下面，我想从 Pic 中删除 id 50d3dbce1292dd2e98af1dd2？

数据：

```
{
    "_id": "50d3dbce1292dd2e98af1dd1",
    "Name": "Bubba",
    "Address": "1111",
    "Pic" : [{"_id": "50d3dbce1292dd2e98af1dd2", "Name": "test1.jpg", "Size":"1000"}, {"_id": "50d3dbce1292dd2e98af1dd3",. "Name": "test2.jpg", "Size":"2000"}],
    "LastModified": {
        "$date": "2012-12-21T03:47:26.535Z"
    }
} 
```

* * *

用 $pull 解决：

db.coll.update({}, {$pull: {'things': {'myval': 1}}});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:40:34.680

db.collection.update（标准，objNew，upsert，multi）

```
db.collection.update( { "_id": "50d3dbce1292dd2e98af1dd1" }, { $unset : { "Pic._id" : 1 } }, false, true); 
```

如果要更新多条记录，请记住将 multi 选项设置为 true。

**更新**

为了让它发挥作用，我们应该以这样的方式改变标准

```
{ "Pic._id": "50d3dbce1292dd2e98af1dd2" } 
```

或者`$pull`像 Kev 所说的那样使用：

```
db.coll.update({}, {$pull: {'things': {'myval': 1}}}); 
```

# c++ - 为什么 setter 不改变 C++ 中的值？

> ID：14422779
> 
> 赞同：1
> 
> 时间：2013-01-20T08:14:53.503
> 
> 标签：c++

以下代码打印：

```
2
1 
```

代替

```
2
2 
```

为什么我的设置器没有调整值？

## 主要的

```
Vector location = camera.get_location();
camera.get_location().set_y(location.get_y() + 1);
std::cout << location.get_y() + 1 << std::endl;
std::cout << camera.get_location().get_y() << std::endl; 
```

## 相机.h

```
#ifndef CAMERA_H
#define CAMERA_H

#include "vector.h"

class Camera {
 private:
  Vector location;
 public:
  Vector get_location();
  void set_location(Vector);
};

#endif 
```

## 相机.cpp

```
#include "camera.h"

Vector Camera::get_location() { return location; }
void Camera::set_location(Vector l) { location = l; } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T08:17:56.443

```
camera.get_location().set_y(location.get_y() + 1); 
```

`get_location`返回原始对象的*副本*。`set_y`修改也是如此，`y` **但**它正在修改原始位置的*副本*。如果您希望上述内容按预期工作，请返回*参考*：

```
Vector & get_location(); 
```

函数体将与以前相同：

```
Vector& Camera::get_location() { return location; } 
```

现在它将按您预期的方式工作。

您可以将代码编写为：

```
Vector  & location = camera.get_location(); //save the reference
location.set_y(location.get_y() + 1); 
```

它修改了`camera`的位置对象。

将上面的代码与此进行比较：

```
Vector location = camera.get_location(); //save the copy!
location.set_y(location.get_y() + 1); 
```

它不会修改`camera`的位置对象！它修改副本，而不是原件。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T08:18:50.020

```
camera.get_location().set_y(location.get_y() + 1); 
```

正在设置`y`一个临时向量而不是修改`camera`' 向量。

你必须这样做：

```
Vector new_vector = camera.get_location;
new_vector.set_y(location.get_y() + 1);
camera.set_location(new_vector) 
```

一个更好的主意是避免使用 getter 和 setter。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T08:19:10.217

您的吸气剂`Camera::get_location()`返回一个`Vector`对象。这最终成为其成员变量的副本。`Vector`因此，对此的任何更改都不会修改`Camera`.

如果您希望它是可修改的，则应将其更改为返回`Vector&`参考。

# entity-framework-4 - 无法在会话状态下存储 POCO 实体生成器生成的类

> ID：14422780
> 
> 赞同：2
> 
> 时间：2013-01-20T08:14:57.360
> 
> 标签：entity-framework-4, session-state

我的项目中有一个 EDMX 模型。我使用 POCO 实体生成器来生成我的实体类并向我的所有 POCO 实体添加一个 Serializable 属性。但是钢我得到了这个错误：

```
Unable to serialize the session state. In 'StateServer' and 'SQLServer' mode, ASP.NET will serialize the session state objects, and as a result non-serializable objects or MarshalByRef objects are not permitted. The same restriction applies if similar serialization is done by the custom session state store in 'Custom' mode. 
```

大约一周前，我遇到了这个错误，我的问题通过添加该属性解决了。但是今天我又遇到了这个错误！！！我做错了什么？！！有什么我应该添加到我的 POCO 生成器来解决这个问题的吗？！！

**更新 1**：

这是我在 web.config 中使用的代码

```
<sessionState timeout="30" mode="StateServer" stateConnectionString="tcpip=localhost:42424" /> 
```

**更新 2**：

这是我的 POCO 生成器：

```
// Emit Entity Types
foreach (EntityType entity in ItemCollection.GetItems<EntityType>().OrderBy(e => e.Name))
{
    fileManager.StartNewFile(entity.Name + ".cs");
    BeginNamespace(namespaceName, code);
    bool entityHasNullableFKs = entity.NavigationProperties.Any(np => np.GetDependentProperties().Any(p=>ef.IsNullable(p)));
#>
[Serializable()]
<#=Accessibility.ForType(entity)#> <#=code.SpaceAfter(code.AbstractOption(entity))#>partial class <#=code.Escape(entity)#><#=code.StringBefore(" : ", code.Escape(entity.BaseType))#>
{
<#
.... 
```

# c - 如何找到在c中作为参数传递的整数数组的长度？

> ID：14422782
> 
> 赞同：2
> 
> 时间：2013-01-20T08:15:28.090
> 
> 标签：c, arrays

我需要在猴子方法中计算传递数组的长度。如何做到这一点，因为输入衰减到猴子方法内的指针......？

```
int monkey(int input1[])
{

    //Write code here
} 
```

约束： 1) 不允许更改函数签名。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T08:18:21.980

```
int monkey(int input1[], size_t arraySize)
{

} 
```

传递数组的大小是最常用的方法。

或者，您可以执行 C 字符串之类的操作，并在数组末尾添加一个**标记值**（最大值、0、-1 等）并计算此标记值之前的元素数。

我想不出其他选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-20T08:20:30.677

在一般情况下，您不会。因为它只是一个指针，所以关于数组的信息不可用。

因此，您应该传入一个大小，或者将其包装在一个包含该大小的结构中。

或者因为它是一个 int 数组，所以您可以使用数组中的第一个值作为大小。

或者，根据您的用例，您可以对数组中的数据进行零终止（或明确标记结束）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-20T08:21:40.723

在C中没有办法做这样的事情。你的函数的定义

```
int monkey(int input[]) 
```

形式上等价于

```
int monkey(int *input) 
```

所以你总是需要将数组的长度作为附加参数传递

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T08:24:20.110

两种选择：

```
int array[10+1];
array[0] = 10;
// fill in the rest in array[1...10]
monkey(array);
// monkey() checks input1[0] to see how many data elements there are 
```

和

```
int array[10+1];
array[0] = 10;
// fill in the rest in array[1...10]
monkey(array + 1);
// monkey() checks input1[-1] to see how many data elements there are 
```

或者，您可以通过不同的通道传递大小/计数，例如，全局变量，如果需要，您可以使用临界区或信号量/锁来保护它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-20T08:24:31.963

将数组传递给函数时，可以将长度存储为数组的第一个元素：

```
int monkey(int input1[])
{
    int len = input1[0];
    for (int i = 1; i < len; ++i) {
        // do something with the array
    }
}

//...

int array[20];
array[0] = 20;
monkey(array); 
```

另一种方法是使用指针算法来代替，以便函数可以将数组视为从 0 开始：

```
int monkey(int input1[])
{
    int len = *(input1 - 1);
    for (int i = 0; i < len; ++i) {
        // do something with the array
    }
}

//...

int array[20];
array[0] = 19;
monkey(array + 1); 
```

但这真的是一回事。唯一的好处是防止出现从 0 而不是 1 开始的错误。但这意味着`array + 1`当你调用它时你可能会忘记通过。所以嗯。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-22T18:34:45.217

```
int main()
{
    int arr[] = { 62,34,4,4,4,3,2,-1 };

    monkey(arr);
    return 0;
}

int monkey(int input1[])
{
    int n = 0;

    while (a[n] != -1)
    {
        n++;
    }

    printf_s("Length of input1[] is: %d", n);

    return n;
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-12-04T14:23:15.910

诠释猴子（诠释输入1 []）{

```
//Write code here 
```

}

int len = sizeof(input1)/sizeof(input1[0]); 或 int len = sizeof(input1)/sizeof(int);

是错误的.. 它总是会给出 2.. 因为 input1 是一个长指针，所以 size 是 8，sizeof(int) 是 4..

如果你想找到长度，有两种方法...... 1）传递长度......（我想你不能）2）如果你有想法......关于 input1 数组......说（TECH GIG竞赛）试试找出数组的未定义部分中包含的数字.. 在这里说我找到了样本.. {1,2,3,4,5} => input1[6] => 包含数字 -9999

所以只写了一个while循环来查找长度

而（输入1[len]！=-9999）len++；

找出 input1[6] => 包含数字 -9999

我在答案中使用 return input1[6]..来检查 -9999 是否是答案

我刚刚提交了 TECH GIG 竞赛的答案

# java - 使用 mysql 和 java 检索与一个用户匹配的联系人记录总和的 sql 查询

> ID：14422783
> 
> 赞同：1
> 
> 时间：2013-01-20T08:15:29.127
> 
> 标签：java, sql, select, foreign-keys

我有两个表用户和联系人，每个用户可以有多个联系人我想用 JFreeChart（java 库）绘制一个图表（camembert）来显示我测试的每个用户的联系人数量：

```
select u.name, sum(c) from user u, contact c 
```

但是我有

```
unknown column c in field list 
```

这是表的结构：

utilisateur = idutilisateur, identifiant, motdepasse, nom, prenom

联系人 = idcontact, ......, idutilisateur

我怎样才能做到这一点，

另外，请给我教程的链接，以学习如何进行这样的查询，因为我总是遇到这个问题，而且我只找到基本教程，提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:20:07.597

您需要引用要计数的表的列，而不仅仅是表本身。

如果你试试：

```
select u.name, count(c.ID) 
from user u, contact c 
```

您可以计算在 ID 字段中有值的所有记录。如果这是一个主键，那么所有记录都应该有这个字段。注意从`sum`到的变化`count`。

这不会完全解决您的问题。您还必须通过加入让 sql 知道这两个表是相关的：

```
JOIN contact
ON user.ID=contact.userID 
```

把这个放在`from user u`代替之后`, contact c`

为了学习 sql 有一个好的开始，试试这里： [http ://www.w3schools.com/sql/default.asp](http://www.w3schools.com/sql/default.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T08:18:04.040

```
String sql1 = "SELECT u.nom, COUNT(c.idcontact) ContactsCount FROM utilisateur u LEFT " + "JOIN contact c ON u.idutilisateur = c.idutilisateur " + "GROUP BY u.nom";

sql = "SELECT u.nom + ' ' + u.prenom dd, COUNT(c.idcontact) FROM utilisateur u " + "LEFT OUTER JOIN contact c ON u.idutilisateur = c.idutilisateur GROUP BY u.nom + ' ' + u.prenom"; 
```

# javascript - 悬停时显示隐藏的 div

> ID：14422784
> 
> 赞同：0
> 
> 时间：2013-01-20T08:15:41.720
> 
> 标签：javascript, jquery, html, css

我有一个带有按钮的隐藏 div，当您将鼠标悬停在 div 'person-wrap' 上时，我希望它出现。我怎样才能做到这一点？我应该使用 CSS 技巧还是可以使用 JQUERY 来完成？

JSFIDDLE：http: [//jsfiddle.net/ceTdA/3/](http://jsfiddle.net/ceTdA/3/)

我希望出现的 div：

```
#buttons {
display: none;
    position:absolute;
    right:10px;
    top:10px;
margin: 0px 0px 0px 0px;
height: 30px;
width: 225px;
overflow: auto;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T08:35:25.770

鉴于您的`#buttons`div 是您的孩子，`#person-wrap`只需 CSS 即可：

```
#person-wrap:hover #buttons {
    display : block;
} 
```

演示：http: [//jsfiddle.net/ceTdA/4/](http://jsfiddle.net/ceTdA/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T09:26:51.497

你应该试试这段代码：

```
$("#person-wrap").hover(function() {
    $(this).find('#buttons').show();
}, function() {
    $(this).find('#buttons').hide();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T08:23:23.623

nnnnnn 解释了一种最好的纯 css 方式，但使用 jQuery 也很简单，它所做的只是在鼠标悬停时调用第一个函数，当鼠标离开时调用第二个函数。

```
$("#person-wrap").hover(
    function () {
        $("#buttons").addClass("hover");
},
    function () {
        $("#buttons").removeClass("hover");
}); 
```

和简单的CSS：

```
.hover{
    display:inline;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T09:25:59.023

添加这个CSS：

```
#profile-pic:hover #buttons{
     display:inline;
} 
```

这是工作的[jsfiddle](http://jsfiddle.net/ceTdA/8/)

# java - 用于集成测试的块端口

> ID：14422785
> 
> 赞同：3
> 
> 时间：2013-01-20T08:15:45.457
> 
> 标签：java, junit, connection, block, false-positive

有没有办法阻止运行 Java 应用程序的端口，模拟连接失败，进行误报测试：

*   阻止与**DB**的连接以模拟 **DB 故障
*   阻止与 JMS 的连接**以**模拟 JMS 故障
*   阻止与**Internet**的连接以模拟独立模式下的行为

我在这里谈论的是集成测试，使用独立的码头服务器，它运行在同一台机器上但在不同的 JVM 中。因此，我正在寻找一种比 Mock 框架更通用的端口阻塞机制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T08:37:02.400

一个模拟框架，例如[Mockito](http://code.google.com/p/mockito/)可以用来测试这种情况。例如，使用mockito，您可以模拟一个`DBConnection`类，这样当您尝试调用方法来运行SQL 查询时，您可以使该方法抛出`ConnectionException`或`timeout`测试您的应用程序如何响应这种情况。

# c# - 反射的替代方案

> ID：14422786
> 
> 赞同：2
> 
> 时间：2013-01-20T08:15:49.237
> 
> 标签：c#, generics, reflection

我对泛型和反射的经验非常少。我从以下示例中假设是执行需要花费太多时间。有没有办法让我在不使用反射的情况下完成以下操作..

场景我正在研究一种通用的方法。它接受一个传递给它的类的实例，并从所有属性中生成 SqlParameters。以下是名为“Store”的泛型方法的代码，以及另一种将 c# 类型转换为 DbType 的 SqlDbType 的方法。

```
 List<SqlParameter> parameters = new List<SqlParameter>();
        public T Store<T>(T t)
        {
            Type type = t.GetType();
            PropertyInfo[] props = (t.GetType()).GetProperties();
            foreach (PropertyInfo p in props)
            {
                SqlParameter param = new SqlParameter();
                Type propType = p.PropertyType;
                if (propType.BaseType.Name.Equals("ValueType") || propType.BaseType.Name.Equals("Array"))
                {
                    param.SqlDbType = GetDBType(propType); //e.g. public bool enabled{get;set;} OR public byte[] img{get;set;}
                }
                else if (propType.BaseType.Name.Equals("Object"))
                {
                    if (propType.Name.Equals("String"))// for string values
                        param.SqlDbType = GetDBType(propType);
                    else
                    {
                        dynamic d = p.GetValue(t, null); // for referrences e.g. public ClassA obj{get;set;}
                        Store<dynamic>(d);
                    }
                }
                param.ParameterName = p.Name;
                parameters.Add(param);
            }
            return t;
        }

        // mehthod for getting the DbType OR SqlDbType from the type...
        private SqlDbType GetDBType(System.Type type)
        {
            SqlParameter param;
            System.ComponentModel.TypeConverter tc;
            param = new SqlParameter();
            tc = System.ComponentModel.TypeDescriptor.GetConverter(param.DbType);
            if (tc.CanConvertFrom(type))
            {
                param.DbType = (DbType)tc.ConvertFrom(type.Name);
            }
            else
            {
                // try to forcefully convert
                try
                {
                    param.DbType = (DbType)tc.ConvertFrom(type.Name);
                }
                catch (Exception e)
                {
                    switch (type.Name)
                    {
                        case "Char":
                            param.SqlDbType = SqlDbType.Char;
                            break;
                        case "SByte":
                            param.SqlDbType = SqlDbType.SmallInt;
                            break;
                        case "UInt16":
                            param.SqlDbType = SqlDbType.SmallInt;
                            break;
                        case "UInt32":
                            param.SqlDbType = SqlDbType.Int;
                            break;
                        case "UInt64":
                            param.SqlDbType = SqlDbType.Decimal;
                            break;
                        case "Byte[]":
                            param.SqlDbType = SqlDbType.Binary;
                            break;
                    }
                }
            }
            return param.SqlDbType;
        } 
```

调用我的方法假设我有 2 个类如下

```
public class clsParent
{
    public int pID { get; set; }
    public byte[] pImage { get; set; }
    public string pName { get; set; }
}

and

public class clsChild
{
    public decimal childId { get; set; }
    public string childName { get; set; }
    public clsParent parent { get; set; }
}

and this is a call 

clsParent p = new clsParent();
p.pID = 101;
p.pImage = new byte[1000];
p.pName = "John";
clsChild c = new clsChild();
c.childId = 1;
c.childName = "a";
c.parent = p;

Store<clsChild>(c); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T21:47:22.570

如果你想摆脱反射，你可以在下面的代码中找到灵感。

这里对要存储在数据库中的对象的所有访问以及 sql 属性值分配都由从数据类型构建的运行时编译表达式处理。

假定保存值的表是，`test`并且假定字段名称与属性值相同。

对于每个属性 a`Mapping<T>`被构造。它将包含一个`FieldName`包含数据库字段的 a `SqlParameter`，它应该被正确插入到 SQL`INSERT`语句中（例如 in `main`），最后如果包含已编译的操作，它可以获取输入`T`对象的实例并将值分配给`SqlParameters`property `Value`。这些映射的集合的构建是在`Mapper<T>`类中完成的。内联代码以供解释。

最后，该`main`方法展示了如何将这些东西绑定在一起。

```
using System;
using System.Collections.Generic;
using System.Data.SqlClient;
using System.Diagnostics;
using System.Linq;
using System.Linq.Expressions;

namespace ExpTest
{
    class Program
    {
        public class Mapping<T>
        {
            public Mapping(string fieldname, SqlParameter sqlParameter, Action<T, SqlParameter> assigner)
            {
                FieldName = fieldname;
                SqlParameter = sqlParameter;
                SqlParameterAssignment = assigner;
            }
            public string FieldName { get; private set; }
            public SqlParameter SqlParameter { get; private set; }
            public Action<T, SqlParameter> SqlParameterAssignment { get; private set; }
        }

        public class Mapper<T>
        {
            public IEnumerable<Mapping<T>> GetMappingElements()
            {
                foreach (var reflectionProperty in typeof(T).GetProperties())
                {
                    // Input parameters to the created assignment action
                    var accessor = Expression.Parameter(typeof(T), "input");
                    var sqlParmAccessor = Expression.Parameter(typeof(SqlParameter), "sqlParm");

                    // Access the property (compiled later, but use reflection to locate property)
                    var property = Expression.Property(accessor, reflectionProperty);

                    // Cast the property to ensure it is assignable to SqlProperty.Value 
                    // Should contain branching for DBNull.Value when property == null
                    var castPropertyToObject = Expression.Convert(property, typeof(object));

                    // The sql parameter
                    var sqlParm = new SqlParameter(reflectionProperty.Name, null);

                    // input parameter for assignment action
                    var sqlValueProp = Expression.Property(sqlParmAccessor, "Value");

                    // Expression assigning the retrieved property from input object 
                    // to the sql parameters 'Value' property
                    var dbnull = Expression.Constant(DBNull.Value);
                    var coalesce = Expression.Coalesce(castPropertyToObject, dbnull);
                    var assign = Expression.Assign(sqlValueProp, coalesce);

                    // Compile into action (removes reflection and makes real CLR object)
                    var assigner = Expression.Lambda<Action<T, SqlParameter>>(assign, accessor, sqlParmAccessor).Compile();

                    yield return
                        new Mapping<T>(reflectionProperty.Name, // Table name
                            sqlParm, // The constructed sql parameter
                            assigner); // The action assigning from the input <T> 

                }
            }
        }

        public static void Main(string[] args)
        {
            var sqlStuff = (new Mapper<Data>().GetMappingElements()).ToList();

            var sqlFieldsList = string.Join(", ", sqlStuff.Select(x => x.FieldName));
            var sqlValuesList = string.Join(", ", sqlStuff.Select(x => '@' + x.SqlParameter.ParameterName));

            var sqlStmt = string.Format("INSERT INTO test ({0}) VALUES ({1})", sqlFieldsList, sqlValuesList);

            var dataObjects = Enumerable.Range(1, 100).Select(id => new Data { Foo = 1.0 / id, ID = id, Title = null });

            var sw = Stopwatch.StartNew();

            using (SqlConnection cnn = new SqlConnection(@"server=.\sqlexpress;database=test;integrated security=SSPI"))
            {
                cnn.Open();

                SqlCommand cmd = new SqlCommand(sqlStmt, cnn);
                cmd.Parameters.AddRange(sqlStuff.Select(x => x.SqlParameter).ToArray());

                dataObjects.ToList()
                    .ForEach(dto =>
                        {
                            sqlStuff.ForEach(x => x.SqlParameterAssignment(dto, x.SqlParameter));
                            cmd.ExecuteNonQuery();
                        });
            }

            Console.WriteLine("Done in: " + sw.Elapsed);
        }
    }

    public class Data
    {
        public string Title { get; set; }
        public int ID { get; set; }
        public double Foo { get; set; }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T08:26:47.687

我认为您通常会从使用标准 ORM（如`NHibernate`or ）中受益`Entity Framework`。两者都可以进行（可定制）从类到关系数据库的映射，NHibernate 为您提供了所有标准 DBMS 系统之间的完全灵活性。

话虽如此，您应该能够通过使用`Linq`表达式来获得一些功能，这些功能可以稍后进行编译；这应该会给你更好的表现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T09:45:12.533

有人告诉您，反射确实很重性能，但您并没有真正通过分析器运行您的代码。

我尝试了您的代码，运行时间为 18 毫秒（65000 滴答），我必须说与将数据保存在数据库中所需的时间相比，它相当快。但你说得对，时间真的太多了。我发现您的代码在转换 Byte[] 时调用 tc.ConvertFrom 时引发了一个异常。从 clsParent 中删除 byte[] pImage 运行时下降到 850 个滴答声。

这里的性能问题是异常，而不是反射。

我冒昧地将您的 GetDBType 更改为：

```
 private SqlDbType GetDBType(System.Type type)
    {
        SqlParameter param;
        System.ComponentModel.TypeConverter tc;
        param = new SqlParameter();
        tc = System.ComponentModel.TypeDescriptor.GetConverter(param.DbType);
        if (tc.CanConvertFrom(type))
        {
            param.DbType = (DbType)tc.ConvertFrom(type.Name);
        }
        else
        {
            switch (type.Name)
            {
                case "Char":
                    param.SqlDbType = SqlDbType.Char;
                    break;
                case "SByte":
                    param.SqlDbType = SqlDbType.SmallInt;
                    break;
                case "UInt16":
                    param.SqlDbType = SqlDbType.SmallInt;
                    break;
                case "UInt32":
                    param.SqlDbType = SqlDbType.Int;
                    break;
                case "UInt64":
                    param.SqlDbType = SqlDbType.Decimal;
                    break;
                case "Byte[]":
                    param.SqlDbType = SqlDbType.Binary;
                    break;

                default:
                    try
                    {
                        param.DbType = (DbType)tc.ConvertFrom(type.Name);
                    }
                    catch
                    {
                        // Some error handling
                    }
                    break;
            }
        }
        return param.SqlDbType;
    } 
```

我希望这对你的追求有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-20T11:58:30.773

不是替代方案，而只是一个建议：如果在运行时重复存储类型，您可以尝试通过引入一些缓存来调整反射方法。

而不是：

```
PropertyInfo[] props = (t.GetType()).GetProperties(); 
```

尝试以下缓存方法：

```
PropertyInfo[] props = GetProperties(type); 
```

`GetProperties(Type)`像这样实现的地方在哪里：

```
private Dictionary<Type, PropertyInfo[]> propertyCache;
// ...
public PropertyInfo[] GetProperties(Type t)
{
    if (propertyCache.ContainsKey(t))
    {
        return propertyCache[t];
    }
    else
    {
        var propertyInfos = t.GetProperties();
        propertyCache[t] = propertyInfos;
        return propertyInfos;
    }
} 
```

这就是您可以缓存 Type.GetProperties() 方法调用的方式。您可以应用相同的方法来查找代码的其他部分。比如你使用的地方`param.DbType = (DbType)tc.ConvertFrom(type.Name);`。也可以用查找替换 if 和 switch。但在你做这样的事情之前，你真的应该做一些分析。它使代码复杂化了很多，如果没有充分的理由，你不应该这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-30T13:56:58.897

除非使用构建后处理来重写代码，否则除了反射之外别无选择。如果您仅将反射用于准备动态发出的类型/方法/委托并将其自然地包含为策略模式，则可以使用反射而不会出现任何性能问题。

# c# - 通过我的 Metro 应用程序在 facebook 和 twitter 上分享

> ID：14422796
> 
> 赞同：1
> 
> 时间：2013-01-20T08:16:59.553
> 
> 标签：c#, facebook, xaml, twitter, microsoft-metro

我正在开发一个地铁应用程序，并想在 Facebook 和 twitter 上分享一些东西。但在 Metro 共享中，它们是源应用程序和目标应用程序的概念。源应用程序是我的，但我应该如何将 Facebook 和 twitter 作为目标应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:27:29.753

在您将内容分享到 Facebook 或 Twitter 之前，首先您需要使用人脉应用程序（已安装在您的 Windows 8 上）将您的 Facebook 帐户连接到 Windows 8

您可以在此处找到更多详细信息：http: [//windows8tipstricks.com/connect-facebook-account-windows-8-people-app/](http://windows8tipstricks.com/connect-facebook-account-windows-8-people-app/)

# python - 访问函数调用的打印输出

> ID：14422797
> 
> 赞同：4
> 
> 时间：2013-01-20T08:17:02.450
> 
> 标签：python, python-2.7, stdout

我的部分脚本从（我们称之为`foo`）另一个模块（很久以前由其他人编写，我现在不想开始修改它）调用一个函数。
`foo`部分地通过调用其他函数将有趣的东西写入`stdout`（但返回`None`）。我想访问这些`foo`写入的有趣的东西`stdout`。

据我所知，`subprocess`这意味着调用我通常会从命令行调用的命令。我会从我的脚本中调用的 python 函数是否有等价物？

我在 python2.7 上，如果重要的话

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T08:30:06.130

正如@JimDeville 评论的那样，您可以交换标准输出：

```
#!python2.7
import io
import sys

def foo():
    print 'hello, world!'

capture = io.BytesIO()
save,sys.stdout = sys.stdout,capture
foo()
sys.stdout = save
print capture.getvalue() 
```

输出：

```
hello, world! 
```

`io.StringIO`由于`stdout`预期是 Unicode 流，Python 3 版本改为使用：

```
#!python3
import io
import sys

def foo():
    print('hello, world!')

capture = io.StringIO()
save,sys.stdout = sys.stdout,capture
foo()
sys.stdout = save
print(capture.getvalue()) 
```

# tomcat - Tomcat 给出相同的响应

> ID：14422799
> 
> 赞同：1
> 
> 时间：2013-01-20T08:17:20.063
> 
> 标签：tomcat, tomcat7

我正在使用 ajax 向使用 tomcat Web 服务器的 servlet 发送请求。首先我发送一个请求并从 servlet 获得响应，然后我调用该 ajax 以使用相同的 uri 向 servlet 发送请求，tomcat 不会调用我的 servlet 它发送先前的响应。

最初我所做的是，当我的 ajax 请求页面在一段时间后转到 servlet 时，它会响应我。当我刷新或重新运行应用程序时，它不会发送 servlet 的请求对象，tomcat 直接将先前的响应发送到 ajax。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:59:42.657

我的猜测是，不是 Tomcat 向您发送相同的响应，而是您的浏览器缓存。尝试使用 POST 而不是 GET，或者使用[jQuery 的`cache`设置](http://api.jquery.com/jQuery.ajax/)（或类似技巧）来防止浏览器缓存。

# javascript - JavaScript onclick 以编程方式并不总是有效

> ID：14422801
> 
> 赞同：0
> 
> 时间：2013-01-20T08:17:44.740
> 
> 标签：javascript, javascript-events

我正在尝试设置一个 onclick 事件处理程序。由于某种原因，这有效：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script type="text/javascript">
        function init() {
            var td = document.getElementById("td");
            var table = document.createElement("table");
            var row = table.insertRow(0);
            var cell = row.insertCell(0);
            cell.innerHTML = "test";
            cell.onclick = function () { alert(); };
            td.appendChild(table);
        }
    </script>
</head>
<body id="td" onload="init()">
</body>
</html> 
```

当把它放在外部 js 文件中时它不起作用：

```
function buildChessBoard() {
    var currentColor = white;
    //var table = "<table>";
    var table = document.createElement("table");          
    for (var i = 0; i < chessBoardsize / 8; i++) {
        //table += "<tr>";
        var row = table.insertRow(i);
        for (var j = 0; j < 8; j++) {
            //table += "<td class=" + currentColor + "Cell" + " id=" + (i * 8 + j) + " onclick=setCell(this)></td>";
            var cell = row.insertCell(j);
            cell.innerHTML = "test";
            cell.onclick = function () { alert(); };
            if (j != 7) {
                if (currentColor == white)
                    currentColor = gray;
                else
                    currentColor = white;
            }
        }
        //table += "</tr>";
    }
    //table += "</table>";
    //chessBoardDiv.innerHTML = table;
    chessBoardDiv.appendChild(table);
} 
```

知道为什么吗？

# iphone - 为什么在 iOS 上启动了几个线程后我的线程似乎失败了？

> ID：14422802
> 
> 赞同：3
> 
> 时间：2013-01-20T08:17:55.903
> 
> 标签：iphone, ios, multithreading, cocoa-touch, grand-central-dispatch

我在`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`委托调用中有这段代码：

```
dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    AVPlayerItem *playerItem = [AVPlayerItem playerItemWithURL:[webUrls objectAtIndex:indexPath.row]];
    CMTime timeduration = playerItem.duration;
    float seconds = CMTimeGetSeconds(timeduration);
    NSString *duration = [NSString stringWithFormat:@"%f", seconds];

    dispatch_async( dispatch_get_main_queue(), ^{

        UITableViewCell *updatecell = [tblView cellForRowAtIndexPath:indexPath];
        updatecell.detailTextLabel.text = duration;
        [updatecell setNeedsLayout];
    });
}); 
```

每个单元格在后台缓慢地加载`seconds`到`updatecell.detailTextLabel.text`单元格上。问题是在我滚动后，加载了大约 3 或 4 个单元格后，其余的只是在 detailTextLabel 中快速显示 0 并且不加载。

任何想法为什么会这样？我没有正确地穿线吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T14:42:25.217

几个想法：

1.  许多服务器对它们从给定客户端接受的并发请求数量施加了限制。我建议您使用`NSOperationQueue`将您对服务器发出的并发请求数限制为 4 或 5，而不是使用调度队列。

2.  您可能会使问题变得比需要的更糟，因为如果您向下滚动表格视图然后备份，当您重新显示前几个单元格时，您正在重新下载`AVPlayerItem`并尝试发出额外的并发请求你的服务器。您确实应该保存以前下载的结果，以消除重复请求相同数据的需要。

3.  在尝试更新 UI 之前，您当前没有检查刚刚下载的单元格是否仍然可见。你真的应该检查一下。

所以，我可能会提出以下建议：

1.  在您的视图控制器中`viewDidLoad`，创建`NSOperationQueue`我们将用于下载的。还要指定您的服务器将允许多少并发操作：

    ```
    downloadQueue = [[NSOperationQueue alloc] init];
    downloadQueue.maxConcurrentOperationCount = 4; // replace this with an appropriate value for your server 
    ```

2.  之前，您有一个数组 ，`webUrls`它是一个`NSURL`对象数组。在下面的第 4 点中，我们将讨论停用该数组，并创建一个新的行对象数组。但在我们这样做之前，我们应该创建这个新`RowData`对象。

    每个行对象不仅有`webURL`，还有其他东西，比如 ，`durationText`甚至可能还有`AVPlayerItem`它本身。（通过保留这些其他对象属性，当单元格滚动回视图时，我们不需要重新下载数据。）所以这个新类的公共接口可能如下所示：

    ```
    //
    //  RowData.h
    //

    #import <Foundation/Foundation.h>

    @class AVPlayerItem;

    @interface RowData : NSObject

    @property (nonatomic, strong) NSURL *webURL;
    @property (nonatomic, strong) NSString *durationText;
    @property (nonatomic, strong) AVPlayerItem *playerItem;
    @property (nonatomic, getter = isDownloaded, readonly) BOOL downloaded;
    @property (nonatomic, getter = isDownloading, readonly) BOOL downloading;

    - (void)downloadInQueue:(NSOperationQueue *)queue completion:(void (^)(BOOL success))block;
    - (void)cancelDownload;

    @end 
    ```

    顺便说一句，我对类名并不疯狂，`RowData`. 这有点太模棱两可了。但我对您的模型数据的性质知之甚少，无法建议一个更好的名称。随意调用这个类你认为是合适的。

3.  您的新`RowData`类可以有一个名为 的实例方法，`downloadInQueue`它执行下载、设置`durationText`适当的等。通过将下载逻辑移到此处，我们成功地隔离`cellForRowAtIndexPath`了与下载有关的一些血腥细节。不过同样重要的是，此`downloadInQueue`方法不会更新用户界面本身，而是它具有`completion`由`cellForRowAtIndexPath`（在下面的第 5 点演示）提供的块，因此此`downloadInQueue`方法不必担心 UI 考虑因素。无论如何，实现`downloadInQueue`可能看起来像：

    ```
    //
    //  RowData.m
    //

    #import "RowData.h"
    #import <AVFoundation/AVFoundation.h>

    @interface RowData ()

    @property (nonatomic, getter = isDownloaded) BOOL downloaded;
    @property (nonatomic, getter = isDownloading) BOOL downloading;
    @property (nonatomic, weak) NSOperation *operation;

    @end

    @implementation RowData

    - (void)downloadInQueue:(NSOperationQueue *)queue completion:(void (^)(BOOL success))completion
    {
        if (!self.isDownloading)
        {
            self.downloading = YES;

            NSOperation *currentOperation = [NSBlockOperation blockOperationWithBlock:^{
                BOOL success = NO;

                self.playerItem = [AVPlayerItem playerItemWithURL:self.webURL];
                if (self.playerItem)
                {
                    success = YES;
                    CMTime timeduration = self.playerItem.duration;
                    float seconds = CMTimeGetSeconds(timeduration);
                    self.durationText = [NSString stringWithFormat:@"%f", seconds];
                }
                self.downloading = NO;
                self.downloaded = YES;

                [[NSOperationQueue mainQueue] addOperationWithBlock:^{
                    completion(success);
                }];
            }];

            [queue addOperation:currentOperation];
            self.operation = currentOperation;
        }
    }

    - (void)cancelDownload
    {
        if ([self isDownloading] && self.operation)
        {
            self.downloading = NO;
            [self.operation cancel];
        }
    }

    @end 
    ```

4.  在您的主视图控制器中，与其创建旧数组，不如`webUrls`创建一个由这些`RowData`对象组成的新数组，例如，`objects`. `webURL`当然，为每个`RowData`对象设置属性。（再一次，我对 的模棱两可的名称并不感到疯狂`objects`，但我对您的应用程序的了解不够多，无法提出更具体的建议。您可以随意调用它。但我下面的代码将使用`objects`。）

5.  最后，修改您`cellForRowAtIndexPath`以使用这个新`RowData`对象及其`downloadInQueue`方法。另外，请注意，`completion`块检查以确保单元格仍然可见：

    ```
    RowData *rowData = self.objects[indexPath.row];

    if ([rowData isDownloaded])
    {
        cell.detailTextLabel.text = rowData.durationText;
    }
    else
    {
        cell.detailTextLabel.text = @"..."; // you really should initialize this so we show something during download or remove anything previously there

        [rowData downloadInQueue:self.downloadQueue completion:^(BOOL success) {
            // note, if you wanted to change your behavior based upon whether the 
            // download was successful or not, just use the `success` variable

            UITableViewCell *updateCell = [tblView cellForRowAtIndexPath:indexPath];

            // by the way, make sure the cell is still on screen

            if (updateCell)
            {
                updateCell.detailTextLabel.text = rowData.durationText;
                [updateCell setNeedsLayout];
            }
        }];
    } 
    ```

6.  如果使用 iOS 6，如果您想在单元格滚动离开屏幕时取消挂起的下载，您可以使用协议的`didEndDisplayingCell`方法`UITableViewDelegate`。

    ```
    - (void)tableView:(UITableView *)tableView didEndDisplayingCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
    {
        RowData *rowData = self.objects[indexPath.row];

        if ([rowData isDownloading])
            [rowData cancelDownload];
    } 
    ```

    如果支持 iOS 的早期版本，则必须使用`UIScrollViewDelegate`协议方法，例如[`scrollViewDidScroll`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html#//apple_ref/occ/intfm/UIScrollViewDelegate/scrollViewDidScroll%3a)，手动确定哪些单元格已滚动出屏幕（例如未包含在 中`indexPathsForVisibleRows`），但想法是相同的。

顺便说一句，在我上面的示例中`RowData`，我正在保存`AVPlayerItem`. 仅当您需要`AVPlayerItem`后者时才应该这样做。我们已经保存了`duration`，它实现了我们对 的所有需要`UITableViewCell`​​，但我假设您以后可能想要对 做一些事情`AVPlayerItem`，所以我也保存了它。但是，如果您`AVPlayerItem`以后不需要它，请不要将其保存在`RowData`对象中。另外，我不知道它们有多大，但是您可能想编写一个`didReceiveMemoryWarning`将遍历您`objects`并将每个项目的`playerItem`对象设置为`nil`.

# javascript - 使用 Javascript 和 HTML 5 创建和保存新列表项

> ID：14422806
> 
> 赞同：1
> 
> 时间：2013-01-20T08:18:26.500
> 
> 标签：javascript, html, html-lists, local-storage

我有以下代码。

```
 <!DOCTYPE html>

<html>

<head>

<script type="text/javascript">
function addChildElements()
{
var newdiv=document.createElement("li");
var newtext=document.createTextNode("test");
newdiv.appendChild(newtext); 
document.getElementById("scribble").appendChild(newdiv); 
}
</script>

<script>
  function storeUserScribble(id) {
    var scribble = document.getElementById('scribble').children;
    localStorage.setItem('userScribble',scribble);
  }

  function getUserScribble() {
    if ( localStorage.getItem('userScribble')) {
      var scribble = localStorage.getItem('userScribble');
    }
    else {
      var newdiv=document.createElement("li");
      var newtext=document.createTextNode("test");
      newdiv.appendChild(newtext); 
      document.getElementById("scribble").appendChild(newdiv); 
    }
    document.getElementById('scribble').children = scribble;
  }

  function clearLocal() {
    clear: localStorage.clear(); 
    return false;
  }
</script>

</head>

<body>

<ol id="scribble" contenteditable="false" onclick="storeUserScribble(this.id);">

</ol>

<input type="button" value="Add Child Element" onclick="addChildElements(); storeUserScribble(document.getElementById('scribble').id);"/>

</body>
</html> 
```

这意味着在创建列表项时保存它们，但我完全不知所措。此代码不起作用。我知道这可能与以下内容有关：

```
var scribble = document.getElementById('scribble').children; 
```

或者

```
onclick="addChildElements(); storeUserScribble(document.getElementById('scribble').id);" 
```

但这就是我的 JS 知识停止的地方。

任何帮助深表感谢。

# mysql - 如果我的应用程序在保存数据之前已经验证了数据，为什么我需要对列使用 UNIQUE 约束？

> ID：14422807
> 
> 赞同：4
> 
> 时间：2013-01-20T08:18:29.047
> 
> 标签：mysql, sql, optimization, unique

UNIQUE 是一个索引，它使您的字段非常独特。但是，如果您在插入新数据之前已经在 PHP 中进行了验证，是否值得使用它？额外的 INDEX 并不是世界末日，但如果您在进行查询优化，那么 UNIQUE 就会妨碍您，对吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-20T08:30:44.167

如果你是一个好司机，为什么要系安全带，你可以节省两秒钟的总行程时间？

**程序员要学习的最重要的一课是他是人，他会犯错误。** 更糟糕的是，处理此代码的其他所有人也是人。

为什么存在 UNIQUE 约束？保护数据库不被人犯错误。关闭您的 UNIQUE 约束表示“您不必担心，数据库先生，我永远不会给您提供与我的意图不符的数据。”

如果你的代码发生了一些事情，以至于你的唯一性验证被破坏了怎么办？现在您的代码将重复记录转储到数据库中。但是，如果您对该列有一个 UNIQUE 约束，那么当您的前端代码停止工作时，您的查询就会爆炸。

你是人类。接受。让计算机完成它的工作并帮助保护您免受自己的伤害。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T08:26:14.277

UNIQUE 不仅用于确保数据有效。主要目的是优化查询：如果数据库知道该字段是唯一的，它可以在找到第一条记录后立即停止搜索命中。您不能仅通过精心设计的查询将该信息传递到数据库。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-20T08:30:12.883

这是一个有趣的问题。

*   您确定您的代码无法被绕过吗？
*   您确定除了 PHP 应用程序之外没有其他任何东西可以访问数据吗？
*   您确定在插入副本的情况下您的应用程序的其余部分不会失败吗？
*   有重复条目的含义是什么，这会对未来的参考或计算造成问题吗？

这是数据库级别的约束有助于解决的一些问题。

至于优化，约束不会使检索数据的过程明显变慢，实际上它可以在某些时候在执行计划中使用，因为它与索引有关。

所以不，它不会妨碍优化，它还会保护您的数据免受不一致的影响。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-20T08:29:04.290

正如 pst 所提到的，在您开发的这个阶段，您无法开始优化您的数据库或有问题的应用程序。

在系统中添加额外的**健全性检查**通常不是一件*坏事*。是的，您对性能的影响只是那么一点点，但是任何用户都不会注意到额外的一两个 CPU 滴答声。

 **想一想：今天您在 php 中进行验证，但不要在数据库中断言唯一性。将来，您、您的同事或其他已经分叉您的项目的人会更改原始的 php 验证，破坏它，或者完全忘记它。此时，您可能希望在您的数据库中添加检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T18:07:37.643

tl：博士；**事务完整性**（在数据库中）处理**竞争条件**（在应用程序中）。

[这些 Rails 文档](http://api.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html)的*并发和完整性*部分通过示例场景解释了为什么这是必要的。

具有事务完整性的数据库通过[隔离](http://en.wikipedia.org/wiki/Isolation_%28database_systems%29)来保证唯一性，而应用程序实际上在事务隔离之外采取了几个单独的步骤（获取值，检查是否有其他值，然后保存值），这使它们容易受到[竞争条件](http://en.wikipedia.org/wiki/Race_condition)的影响，尤其是在规模上。**

# javascript - 使用 CSS 的 jQuery 垂直滑出菜单

> ID：14422808
> 
> 赞同：0
> 
> 时间：2013-01-20T08:18:30.017
> 
> 标签：javascript, jquery, css, drop-down-menu, menu

我编写了一个垂直菜单，`sub-items`当鼠标悬停在父级上时会显示。HTML结构是：

```
<ul id="nav">
    <li><a href="#">Continents</a>
        <ul>
            <li><a href="#">Europe</a>
                <ul>
                    <li><a href="#">A</a></li>
                    <li><a href="#">B</a></li>
                    <li><a href="#">C</a></li>
                </ul>
            </li>
            <li><a href="#">Asia</a>
                <ul>
                    <li><a href="#">A</a></li>
                    <li><a href="#">B</a></li>
                    <li><a href="#">C</a></li>
                </ul>
            </li>
            <li><a href="#">Africa</a>
                <ul>
                    <li><a href="#">A</a></li>
                    <li><a href="#">B</a></li>
                    <li><a href="#">C</a></li>
                </ul>
            </li>
        </ul>
    </li>
    <li><a href="#">Places</a>
        <ul>
            <li><a href="#">Place1</a></li>
            <li><a href="#">Place2</a></li>
        </ul>
    </li>
    <li><a href="#">Oceans</a>
        <ul>
            <li><a href="#">Pacific</a></li>
            <li><a href="#">Atlantic</a></li>
        </ul>
    </li>
</ul> 
```

最初只`nav li`显示元素。但是当用户将鼠标悬停在 上时`nav li a`，会显示连续的子元素。当元素`ul`下只有一个时，我成功地做到了这一点。`initial li`但是 [正如您将在上面的 HTML 结构中看到的那样]，我需要第二个嵌套`ul`在第一个`li`分支中。

我的 JavaScript 代码是：

```
<script type="text/javascript">
            $(document).ready(function () {
                $('#nav > li > a').hover(function(){
                    if ($(this).attr('class') != 'active'){
                        $('#nav li ul').slideUp();
                        $(this).next().slideToggle();
                        $('#nav li a').removeClass('active');
                        $(this).addClass('active');
                    }
                });
            });         
        </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T09:06:38.953

您是否需要这种输出：http: [//jsfiddle.net/uNKvu/](http://jsfiddle.net/uNKvu/)

```
$('#nav li').hover(function () {
    $('> ul',this).slideToggle();
}); 
```

# iphone - 如何将 JqueryMobile 网站转换为 ipad、tab 网站

> ID：14422819
> 
> 赞同：0
> 
> 时间：2013-01-20T08:21:03.610
> 
> 标签：iphone, ipad

我已经为 iphone、android 等智能手机使用 jquerymobile 创建了一个网站。现在我想将此网站转换为 ipad、tab 网站。我怎样才能转换它？我不确定这个 jquerymobile 是否适用于 smartPhones 和 ipad ？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:09:43.077

是的，jQuery Mobile 适用于所有移动设备，您无需进行更改。但是，您可以为平板电脑制作优化版本。

# java - 将休眠对象作为参数添加到 jasperreports

> ID：14422821
> 
> 赞同：0
> 
> 时间：2013-01-20T08:21:15.320
> 
> 标签：java, spring, jasper-reports, ireport

我正在尝试将休眠对象作为参数添加到 jasperreports。

我已经添加了适当的导入（在我的 .jrxml 文件中），但仍然无法编译报告。

[这里](https://stackoverflow.com/questions/2684025/how-can-i-pass-an-arbitrary-object-to-jasper-report-as-parameter)有一个建议是在 jasperreports 的 iReport 设置中设置正确的 ClassPath，但是如果我有没有第三方 jar 的简单 Web 应用程序，我不知道应该将设置导航到哪个文件夹？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:02:24.687

如果你使用 JasperReports IReport，那么很简单。您只需添加您的应用程序 的**构建文件夹，其中包含所有 *.class 文件。**

去`Preferences -> iReport -> Classpath`

# android - greendao：调试查询的方法？

> ID：14422825
> 
> 赞同：12
> 
> 时间：2013-01-20T08:21:40.253
> 
> 标签：android, greendao

有什么方法可以让正在对 Logcat 执行的[greendao](http://greendao-orm.com/)吐出查询？我只是想确保一切正常，在习惯系统的同时拥有它是一个很好的功能。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-25T19:49:18.637

QueryBuilder 类对此有一个静态标志：

```
/** Set to true to debug the SQL. */
public static boolean LOG_SQL; 
```

所以只要设置 *QueryBuilder.LOG_SQL = true*，你就会得到你想要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-21T12:36:40.903

```
 dao.queryBuilder().LOG_VALUES=true; (For values)
            dao.queryBuilder().LOG_SQL=true;     (For query) 
```

# c++ - Eclipse CDT 中的虚假错误：boost::iostreams

> ID：14422827
> 
> 赞同：5
> 
> 时间：2013-01-20T08:22:02.657
> 
> 标签：c++, eclipse, boost, eclipse-cdt, boost-iostreams

我在 Eclipse CDT (Juno SR1) 中有以下代码：

```
#include <fstream>
#include <iostream>

#include <boost/iostreams/filter/gzip.hpp>
#include <boost/iostreams/filtering_streambuf.hpp>
#include <boost/iostreams/copy.hpp>

int main() 
{
   using namespace std;
   namespace io = boost::iostreams;

   ifstream file("data.gz", ios_base::in | ios_base::binary);
   io::filtering_streambuf<io::input> in;
   in.push(io::gzip_decompressor());       // error here
   in.push(file);                          // and here
} 
```

`g++ 4.7.2`代码没有问题。然而，Eclipse 抱怨这两`in.push()`行。两种情况下的错误消息是相同的：

```
Invalid arguments '
Candidates are:
void push(std::basic_streambuf<#10000,#10001> &, ?, ?)
void push(std::basic_istream<#10000,#10001> &, ?, ?)
void push(std::basic_ostream<#10000,#10001> &, ?, ?)
void push(std::basic_iostream<#10000,#10001> &, ?, ?)
void push(const boost::iterator_range<#10000> &, ?, ?)
void push(const boost::iostreams::pipeline<#10000,#10001> &)
void push(const #10000 &, ?, ?, boost::disable_if<boost::iostreams::is_std_io<#10000>,void>::type *)
' 
```

如何解决或解决此问题以停止 CDT 抱怨？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T20:41:29.020

我在 Juno SR2 中没有看到这个问题，所以可能最简单的解决方案是更新您的 Eclipse 安装，假设您使用的所有插件都与最新的 SR 兼容。

# entity-framework - 实体框架给出错误底层提供者在打开时失败

> ID：14422832
> 
> 赞同：1
> 
> 时间：2013-01-20T08:22:53.997
> 
> 标签：entity-framework

我使用实体框架在本地电脑和本地数据库上开发了一个网站，现在我将所有代码提供给了我的客户，现在实体框架给出了一个错误，底层提供者在打开时失败了我修改了数据源、初始目录、用户 ID 和密码实体框架的连接字符串，但没用，请帮忙。下面是我的连接字符串。

```
<add name="SBV_dbEntities" connectionString="metadata=res://*/SBVEntityModel.csdl|res://*/SBVEntityModel.ssdl|res://*/SBVEntityModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\SQLEXPRESS;initial catalog=yagnesh_db;user id=yagnesh;password=yagnesh@123;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:39:26.053

使用如下。给 SQL 服务器的连接字符串如下（这是一个示例代码）。

```
<add name="ContextName" connectionString="Data Source=ServerName;Initial Catalog=DBCatalogName;Integrated Security=True;MultipleActiveResultSets=True;App=EntityFramework"
   providerName="System.Data.SqlClient" /> 
```

**例如**

```
<add name="PawLoyalty" connectionString="Server=.;database=PawLoyalty;Trusted_connection=true;pooling=true;MultipleActiveResultSets=True" providerName="System.Data.SqlClient" /> 
```

我希望这对你有帮助。

# python - 删除类时 __subclasses__ 的行为

> ID：14422834
> 
> 赞同：4
> 
> 时间：2013-01-20T08:23:55.067
> 
> 标签：python, garbage-collection

编辑：由于 NPE 的评论，概括了这个问题。

在 Python 2.7.3 交互式会话中：

```
>>> class Foo(object):
...     pass
... 
>>> type("Bar", (Foo,), {})
<class '__main__.Bar'>
>>> Foo.__subclasses__()
[<class '__main__.Bar'>]
>>> 
```

还：

```
>>> class Foo(object):
...     pass
... 
>>> class Bar(Foo):
...     pass
... 
>>> Foo.__subclasses__()
[<class '__main__.Bar'>]
>>> del Bar
>>> Foo.__subclasses__()
[<class '__main__.Bar'>] 
```

怎么`Bar`还能通过`__subclasses__`函数获得？我原以为它会被垃圾收集。

相反，如果我希望它被垃圾收集，我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T08:49:48.103

看到[这个线程](http://www.gossamer-threads.com/lists/python/python/626283)。似乎发生的是类的`__mro__`属性存储了对自身的引用，从而创建了引用循环。您可以强制执行完整的 gc 运行，这将检测循环并删除对象：

```
>>> class Foo(object): pass
>>> class Bar(Foo): pass
>>> import gc
>>> del Bar
>>> gc.collect()
3
>>> Foo.__subclasses__()
[] 
```

或者，如果您输入其他命令一段时间，gc 将自行运行并收集循环。

请注意，在交互式测试时必须小心，因为交互式解释器会将对最近返回值的引用存储在 "last value" 变量`_`中。如果你显式查看子类列表，然后立即尝试收集，它不会起作用，因为该`_`变量将保存一个对类有强引用的列表。

# php - PDO 给 Mysql 错误 1146

> ID：14422838
> 
> 赞同：-1
> 
> 时间：2013-01-20T08:24:29.517
> 
> 标签：php, mysql, pdo, mysql-error-1146

```
 $deleteID = $_POST['oz'];
    if(!$deleteID){
        echo '2';
        die;    
    } else {
        //It should be working.
    }
    $checkVar = $pdo->prepare("SELECT * FROM `user_posts` WHERE `id`=:delete");
    $checkVar->bindValue(':delete',$deleteID,PDO::PARAM_STR);
    if($checkVar->execute() == false){
        echo '2';
        die;
    } 
```

我真的很生气。提供了 $deleteID，没有绑定任何内容。为什么不行，求大神帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T08:34:02.807

1.  连接后使 PDO 在错误时抛出异常
    `$pdo->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );`
    。
2.  确保您可以在日志或屏幕上看到发生的错误。
3.  运行您在此处发布**的代码，****而不是**其他代码。与其他代码一样，可能存在其他错误，与您的绑定问题无关。

对于这个`Table doesn't exist`问题，您必须检查诸如拼写错误、字母大小写、错误的服务器连接、错误的 PHP 文件编辑等错误。比如说，您正在针对 localhost 运行 PHPMyAdmin，而针对远程主机或类似的东西运行实际脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T09:14:45.860

如果它说该表不存在，则该表不存在。

您要么连接到错误的服务器，要么选择了错误的数据库，要么遇到了案例问题。

[http://dev.mysql.com/doc/refman/5.5/en/identifier-case-sensitive.html](http://dev.mysql.com/doc/refman/5.5/en/identifier-case-sensitivity.html)

> [..] 因此，底层操作系统的大小写敏感性在数据库、表和触发器名称的大小写敏感性中起作用。这意味着此类名称在 Windows 中不区分大小写，但在大多数 Unix 中都区分大小写。

确保您正在连接到您当前正在查看的同一数据库和服务器

```
print_r( $pdo ); 
```

这不是授权问题。

还有一个建议。如果您生气了，请休息一下，喝杯茶，冷静下来，然后阅读“您的常识”出色的答案并再次查看您的代码:)

# javascript - 跟踪 github 中的 javascript 库

> ID：14422840
> 
> 赞同：-2
> 
> 时间：2013-01-20T08:24:32.290
> 
> 标签：javascript, jquery, ruby-on-rails-3, version-control, github

随着开发的进展，我使用越来越多的 github 中的 javascript/jQuery 库（我知道还有其他来源，但 github 是最突出的）。

当我注意到库更新了错误修复或新功能或更糟 - 对其他库的向后不兼容更改时，问题就出现了。

有没有像[Gemnasium](https://gemnasium.com)这样的 JavaScript 库？跟踪我使用的未加密的库的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T08:32:21.353

您应该考虑使用包管理器，例如[Bower](https://github.com/bower/bower)。它`gem`适用于 javascript 和其他客户端资产。

还有其他的，但我推荐 Bower，因为它与 GitHub 集成得很好。许多流行的组件可以在[Bower 包注册表](http://sindresorhus.com/bower-components/)中找到，但如果没有，Bower 还支持直接从 git url 拉取依赖项。

Bower 允许您使用支持版本范围的[语义版本控制](http://semver.org/)`bower update`来指定依赖版本，并且当您运行时，如果在您指定的约束范围内有新版本可用，它会更新项目的包。

# regex - 正则表达式 '$' 符号必须不带空格

> ID：14422845
> 
> 赞同：0
> 
> 时间：2013-01-20T08:25:08.317
> 
> 标签：regex, string

我有一个字符串。该字符串可以包含空格、拉丁字符和符号 $。

例子：`tert ertert$sdfsdf`

但是，符号 $ 必须只被字符包围，而不是空格。

好字符串：`"teststring$sdfsdf"`

坏字符串：`"test $sdfsdf"`

坏字符串`"test $ string"`

我怎样才能为这个字符串做正则表达式？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T08:28:48.967

不确定您需要什么语言，但这将`/\s+\$|\$\s+/`与“坏”场景相匹配。

逻辑是

```
\s+ //at least one space
\$  //follow by a dollar sign
|  // or
\$ //dollar sign
\s+ followed by at least one space 
```

所以，如果这是 Java，它看起来像：

```
myString.matches("\\s+\\$|\\$\\s+") 
```

在 Perl 中，它将是：

```
if(myString =~ m/\s+\$|\$\s+/){
   //found bad example
} 
```

我建议更具体地询问语言示例，因为这些示例确实会因使用而有所不同。

此外，该网站上的人倾向于认为您应该在来这里寻求帮助之前尝试自己解决这个问题。因此，如果您想避免看到关于您已经尝试过的事情的尖刻评论，您应该将失败的尝试作为对暴躁力量的牺牲：)。只是问“我该怎么做”确实会让这个人回答“我从哪里开始......你已经知道什么，你实际上在哪里卡住等等”。

# css - CSS修改后的上传按钮在jQuery UI对话框中不起作用

> ID：14422851
> 
> 赞同：0
> 
> 时间：2013-01-20T08:26:23.353
> 
> 标签：css, jquery-ui

我在 jQuery UI 对话框中放置了一个修改后的 CSS 文件上传字段。一切正常，除了当我点击上传字段时，选择文件的对话框没有打开。我怎样才能解决这个问题？

这是[jsfiddle](http://jsfiddle.net/JXHPc/)。

这是我的javascript：

```
$(function() {
  $("#dialog").dialog({
    autoOpen: false,
    width: 400,
    modal: true,
    buttons: [{
      text: "Submit",
      click: function() {
        $( this ).dialog( "close" );
      }
    },
    {
      text: "Cancel",
      click: function() {
        $(this).dialog("close");
      }
    }]
  });
  // Link to open the dialog
  $("#dialog-link").click(function(event) {
    $("#dialog").dialog("open");
    event.preventDefault();
  });
  // Hover states on the static widgets
  $("#dialog-link, #icons li").hover(
    function() {
      $(this).addClass("ui-state-hover");
    },
    function() {
      $(this).removeClass("ui-state-hover");
    }
  );
}); 
```

我的 CSS 样式：

```
body{
  margin: 0;
  padding: 0;
  color: #666;
  font-family: Tahoma, Geneva, sans-serif;
  font-size:13px;
  line-height: 1.4em;
  background-color: #f7f7f7;
  background-repeat: repeat-x;
  background-position: top;
}
.demoHeaders {
  margin-top: 2em;
}
#dialog-link {
  padding: .4em 1em .4em 20px;
  text-decoration: none;
  position: relative;
}
#dialog-link span.ui-icon {
  margin: 0 5px 0 0;
  position: absolute;
  left: .2em;
  top: 50%;
  margin-top: -8px;
}
#icons {
  margin: 0;
  padding: 0;
}
#icons li {
  margin: 2px;
  position: relative;
  padding: 4px 0;
  cursor: pointer;
  float: left;
  list-style: none;
}
#icons span.ui-icon {
  float: left;
  margin: 0 4px;
}
.fakewindowcontain .ui-widget-overlay {
  position: absolute;
}
#FileUpload {
  position:relative;
}
#BrowserVisible {
  position: absolute;
  top: 0px;
  left: 0px;
  z-index: 1;
  background:url('http://i.stack.imgur.com/PaT3a.png') 100% 1px no-repeat;
  width:345px;
  height:30px;
}
#FileField {
  width:250px;
  margin-right:85px;
  padding: 6px;
  font-size: 13px;
  background: #fff url('bg-form-field.gif') top left repeat-x;
  border: 1px solid #d5d5d5;
  color: #333;
  border-radius: 4px 4px 4px 4px !important;
}
#BrowserHidden {
  position:relative;
  width:345px;
  height:30px;
  text-align: right;
  -moz-opacity:0;
  filter:alpha(opacity: 0);
  opacity: 0;
  z-index: 2;
} 
```

这是HTML：

```
<p><a href="#" id="dialog-link" class="ui-state-default ui-corner-all"><span class="ui-icon ui-icon-newwin"></span>Open Dialog</a></p>
<div id="dialog" title="Update Profile Picture" style="font-size: 12px;">
  <div id="FileUpload">
    <input type="file" size="24" id="BrowserHidden" onchange="getElementById('FileField').value = getElementById('BrowserHidden').value;" />
    <div id="BrowserVisible"><input type="text" id="FileField" /></div>
  </div>
</div> 
```

我通过将上传表单放在对话框之外来测试它并且它可以工作。只有当它放在 jQuery UI 对话框中时，它才不起作用。这是 jsfiddle 链接[http://jsfiddle.net/Tdkre/1/](http://jsfiddle.net/Tdkre/1/)放置在对话框之外时有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:44:48.730

将文件上传的 z-index 设置为高于对话窗口的 z-index。

```
#BrowserHidden {
    position:relative;
    width:345px;
    height:30px;
    text-align: right;
    -moz-opacity:0;
    filter:alpha(opacity: 0);
    opacity: 0;
    z-index: 1050; //z-index of dialog is 1002, causing it to appear above input
} 
```

工作演示：http: [//jsfiddle.net/JXHPc/1/](http://jsfiddle.net/JXHPc/1/)

# sencha-touch - 如何更改 Sencha 控制器内部的标签值？

> ID：14422852
> 
> 赞同：0
> 
> 时间：2013-01-20T08:26:42.183
> 
> 标签：sencha-touch, label, sencha-touch-2

我在一个容器中有两个标签。当我单击某个按钮时，我想更改标签值。我尝试了很多方法。但它没有改变。

这是我的视图代码：

```
 Ext.define('MortgageCalculator.view.CalculateScreen', {
    extend : 'Ext.Panel',

    config : {
        scrollable : true,
        items : [{
            xtype : 'titlebar',
            docked : 'top',
            ui : 'green',
            title : 'MORTGAGE CALCULATOR'
        }, {

            xtype : 'container',
            layout : {
                type : 'vbox'
            },
items : [{

xtype : 'button',
                name : 'submitbtn',
                text : 'Calculate Monthly',
                ui : 'confirm',
                width: 200,
                height : 40,
                margin : 'auto'
            }, {

                xtype : 'container',
                id:'capandintsum',
                layout : {
                    type : 'hbox'
                },
                items : [{
                    xtype : 'label',
                    layout : 'fit',
                    html : 'Capital & Interest',
                    flex : 1,
                    margin : '60 0 0 20'
                }, {
                    xtype : 'label',
                    layout : 'fit',
                    name:'cap&int',
                    id : 'cap&int',
                    html : '0',
                    flex : 1,
                    margin : '60 0 0 20'
                }]
            },

            {
                xtype : 'container',
                layout : {
                    type : 'hbox'
                },
                items : [{
                    xtype : 'label',
                    layout : 'fit',
                    html : 'Interest Only',
                    flex : 1,
                    margin : '20 0 0 20'
                }, {
                    xtype : 'label',
                    layout : 'fit',
                    name:'intonly',
                    id : 'intonly',
                    html : '0',
                    flex : 1,
                    margin : '20 0 0 20'
                }]
        }]
    }
}); 
```

对于控制器，我使用以下代码：

```
Ext.define('MortgageCalculator.controller.Calculate', {         
        extend : 'Ext.app.Controller',
        config : {
            refs : {
                submitbtn : 'button[name=submitbtn]',
                capandintlbl : '#intonly'
                // capandintlbl :  '#cap&int', 
                // onlyintlbl : '#intonly' 
            },
            control : {
                submitbtn : {
                    tap : 'onSubmitButtonTap'
                },
            }
        },

        onSubmitButtonTap : function(button, e, options) {
                                this.getCapandintlbl.setHtml('hello, it is changed');           }

    }) 
```

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:09:03.897

只需为 label 设置一个值，您可以使用 label 中描述的 setText 方法

看到[这个链接](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.Label-method-setText)

```
 yourLabel.setText('value'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T13:05:16.503

终于我能够以这种方式制作：

```
var me = this; 
var labelfield = me.getCapandintlbl(); 
labelfield.setHtml('it is changing'); 
```

谢谢雷切尔..

# yii - 如何写三个模型之间的关系

> ID：14422857
> 
> 赞同：2
> 
> 时间：2013-01-20T08:27:12.077
> 
> 标签：yii

我有三个模型（表）：

1.  内容
2.  类别
3.  内容类别

`contentCategory`have`content_id`和`category_id`that 相互关联。

我必须如何在每个模型中编写关系来选择特定类别的内容？

```
public function relations()
{
    return array(
    );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:09:09.593

如果您的表`contentCategory`只有 2 个字段`content_id`，`category_id`那么您不需要为此表创建模型，而在其他模型中您将拥有

内容：

```
'categories'=>array(self::MANY_MANY, 'Category',
                'contentCategory(content_id, category_id)'), 
```

类别：

```
'contents'=>array(self::MANY_MANY, 'Content',
                    'contentCategory(category_id, content_id)'), 
```

如果您的表格`contentCategory`有更多内容，那么您需要使用`through`：

[链接到指南](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#relational-query-with-through)

# parsing - 与后缀/中缀运算符的优先级冲突

> ID：14422861
> 
> 赞同：0
> 
> 时间：2013-01-20T08:27:35.157
> 
> 标签：parsing, shift-reduce-conflict, lemon

这是为柠檬解析器生成器编写的语法：

```
%left  PostDecrementation.
%right PreDecrementation.

program ::= expression.
expression ::= Terminal.
expression ::= unaryoperation.
unaryoperation ::= Decrementation expression. [PreDecrementation]
unaryoperation ::= expression Decrementation. [PostDecrementation] 
```

尝试编译它时，生成器会产生以下冲突：

```
State 0:
      program ::= * expression
      expression ::= * Null
      expression ::= * unaryoperation
      unaryoperation ::= * Decrementation expression
      unaryoperation ::= * expression Decrementation

                      Null shift  5
            Decrementation shift  1
                   program accept
                expression shift  2
            unaryoperation shift  4

State 1:
      expression ::= * Null
      expression ::= * unaryoperation
      unaryoperation ::= * Decrementation expression
      unaryoperation ::= Decrementation * expression
      unaryoperation ::= * expression Decrementation

                      Null shift  5
            Decrementation shift  1
                expression shift  3
            unaryoperation shift  4

State 2:
  (0) program ::= expression *
      unaryoperation ::= expression * Decrementation

                         $ reduce 0
            Decrementation shift  6

State 3:
  (3) unaryoperation ::= Decrementation expression *
      unaryoperation ::= expression * Decrementation

            Decrementation shift  6
            Decrementation reduce 3   ** Parsing conflict **
                 {default} reduce 3

State 4:
  (2) expression ::= unaryoperation *

                         {default} reduce 2

State 5:
  (1) expression ::= Null *

                 {default} reduce 1

State 6:
  (4) unaryoperation ::= expression Decrementation *

                 {default} reduce 4 
```

为什么会出现冲突，因为 PreIncrementation 和 PostDecrementation 的优先级和关联性已在语法中明确指定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:45:09.040

您只是为伪终端定义优先规则（PostDecrementation 和 PreDecrementation）。您在任何地方都没有定义实际终端递减的优先级。

优先级总是在产生式（可以减少）和终端（可以移动）之间进行比较。所以需要指定Decrementation的优先级来解决冲突。

就个人而言，在这种情况下，我不会使用优先声明。但是如果你真的想要，你可能应该只使用一个伪终端，并让 Decrementation 成为使用它的两个产品之一的优先级。

# android - Android 类树

> ID：14422862
> 
> 赞同：1
> 
> 时间：2013-01-20T08:28:06.490
> 
> 标签：android

我对使用 Android SDK 进行编程相当陌生。想知道是否存在以易于阅读的格式显示类和包树以及源代码的程序。

正在考虑类似[UnCodeX](http://uncodex.elmuerte.com/)但适用于 Android 而不是 UnrealScript 的东西。

也最好用于Linux？

# javascript - 在javascript中创建一个重复的数学函数？

> ID：14422863
> 
> 赞同：1
> 
> 时间：2013-01-20T08:28:10.127
> 
> 标签：javascript, math

这似乎是一个愚蠢的问题，但我大约一周前才开始学习 javascript。我决定尝试使用 javascript 自动化我的作业，但我不知道如何做到这一点。它的工作原理如下：

您正在计算人口达到一定数量需要多少年。

我们将把它简化，并使增长率为 0.20。人口将从 50 人开始，我们希望它达到 100 人。

到目前为止，这就是我所拥有的：

```
 function newPeople(start, growth) {
    var a = start * growth;
    var b = start + a;
    var c = Math.round(b);
    var d = c * growth;
    var e = c + d;
    var f = Math.round(e);
    return f;
    }

    newPeople(50, .20); 
```

你可以看到它可以通过每次创建一组新的变量来手动完成，但是我该如何自动化呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:35:23.933

这应该有效：

```
// start is the current population
// growth is the growth rate
// target is the target population
function newPeople(start, growth, target) {

    var pop = start;
    var years = 0;
    while(pop <= target) {
        years++; // increment year by one
        pop = pop + Math.floor(pop * growth);
    }

    // return what you need from the function here
    // "return years;" will give you the number of years it takes to go from "start" to "target"
    // "return pop;" will give you the actual population after "years" number of years
} 
```

# sql-server - 选择 SQL 映射查询

> ID：14422864
> 
> 赞同：0
> 
> 时间：2013-01-20T08:28:12.197
> 
> 标签：sql-server, sql-server-2008, sql-server-2012

我使用 SQL Server 2012，我有这些表：

表**Tb1** ( `ID Int, CodeID Int, Value Int`)

```
 ID     CodeID    Value
 ----------------------
 1      1         10
 2      1         14
 3      1         5
 4      1         25
 5      2         12
 6      2         17
 7      2         4
 8      2         10
 9      2         6 
```

表**Tb2** ( `CodeID Int Value Int`)

```
CodeID    Value
---------------
1         25
2         20 
```

我想要查询从 Tb1 获取 SUM(Tb1.Value) <= Tb2.Value 的记录

例如上述记录的结果是：

```
Tb1.ID   Tb1.CodeID  Tb1.Value   UsedValue     Tb2.Value
--------------------------------------------------------
1         1          10          10            25
2         1          14          14            25
3         1          5           1             25
5         2          12          12            20
6         2          17          8             20 
```

我使用游标来获取上述查询。但是我的查询以低性能执行。我想要一个没有光标的查询。

**编辑 1** UsedValue 是 Tb1.Value，直到 Tb1.Value 的总和低于 Tb2.Value。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:16:55.533

```
select 
T.Id
, T.CodeId
, T.Value
, T.Value -(Total - T2.Value) as UsedValue
, T2.Value as T2_Value
from 
(
   select a.id
   , a.codeid
   , a.Value
   , sum(b.value) as Total
   from Tb1 a join Tb1 b 
   on a.Id >= b.id and a.CodeId = b.CodeId
   group by a.id, a.CodeId, a.Value
) T
join Tb2 T2 
on T.CodeId = T2.CodeId
where Total < (T2.Value + T.Value) 
```

我写这段代码时只有一个假设。这些行是按 ID 排序的，如果不是真的，你必须添加排序列！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:15:27.670

```
select id,codeid,value,case when vt>0 then value else value+vt end usedvalue, 
       value2 
from (select *, value2-runtot vt,
       max(case when value2-runtot<0 then value2-runtot else -runtot end) 
       over(PARTITION BY codeid)  usedvalue 
           from (SELECT t1.id, t1.codeid, t1.value, t2.value value2, 
                sum(t1.value) OVER(PARTITION BY t1.codeid ORDER BY t1.id) runtot
              FROM tb1 t1
              INNER JOIN tb2 t2 ON t1.codeid = t2.codeid
              ) X
             )Y
where vt>=usedvalue 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T08:56:59.353

尝试这个：

```
;WITH Subtotals
AS
(
  SELECT
    T1.Id, T1.CodeId, SUM(T2.Value) SubTotal  
  FROM Tb1 T1
    JOIN Tb1 T2
       ON T1.CodeId = T2.CodeId
         AND T1.Id >= T2.Id
  GROUP BY T1.Id, T1.CodeId
)
SELECT
    S.ID,
    S.CodeID,
    T1.Value,
    CASE WHEN T2.value >= S.Subtotal
         THEN T1.value
         ELSE T1.value - (S.Subtotal - T2.value)
    END UsedValue,
    T2.Value T2Value
FROM Subtotals S
   JOIN Tb2 T2
      ON S.CodeId = T2.CodeId
   JOIN Tb1 T1
      ON S.Id = T1.Id
WHERE T2.Value >= S.SubTotal - T1.Value 
```

查看[**SQL FIDDLE上的结果**](http://sqlfiddle.com/#!6/5c5a8/3)

# delphi - 我可以检查安装的 Indy 版本吗？

> ID：14422866
> 
> 赞同：7
> 
> 时间：2013-01-20T08:28:13.590
> 
> 标签：delphi, delphi-xe2, indy

我需要使用最新的 Indy 组件库版本。我可以通过一些源代码命令或任何其他技巧来获取库版本，以确保我使用的是正确的库。我知道我正在使用`indy....160.bpl`- 这是我的 Delphi XE2 在将鼠标移到组件栏上时所说的。我从[Fulgan Indy获取的最新 INDY 库](http://indy.fulgan.com/)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-20T08:35:12.667

***如何在运行时使用 Indy 组件获取 Indy 版本？***

正如@Remy 在他的评论中指出的那样，您可以使用该[`Version`](http://www.indyproject.org/docsite/html/frames.html?frmname=topic&frmfile=TIdBaseComponent_Version.html)属性从任何 Indy 组件中获取 Indy 版本。这是使用`TIdHTTP`组件的示例：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  ShowMessage('Indy version: ' + IdHTTP1.Version);
end; 
```

***如何在运行时获取没有 Indy 组件的 Indy 版本？***

您可以获取 Indy 版本控制格式的整个版本字符串：

```
<major>.<minor>.<release>.<build> 
```

从包含在单元中`gsIdVersion`的文件中定义的常量，如下所示：`IdVers.inc``IdGlobal.pas`

```
uses
  IdGlobal;

procedure TForm1.Button1Click(Sender: TObject);
begin
  ShowMessage('Indy version: ' + gsIdVersion);
end; 
```

或者如果您至少从 2012 年 10 月 25 日 (4850) 开始有 Indy 修订版，您可以使用单独的版本信息元素，这些信息元素在前面提到的同一个包含文件中定义，例如：

```
uses
  IdGlobal;

procedure TForm1.Button1Click(Sender: TObject);
begin
  ShowMessage('Indy version: ' +
    IntToStr(gsIdVersionMajor) + '.' +
    IntToStr(gsIdVersionMinor) + '.' +
    IntToStr(gsIdVersionRelease) + '.' +
    IntToStr(gsIdVersionBuild)
  );
end; 
```

***如何在设计时获取 Indy 版本？***

要在设计时获得 Indy 版本，您只需右键单击放置在表单上的任何 Indy 组件，然后通过菜单项打开其`About`框。`About Internet Direct (Indy)...`

***版本信息在哪里定义？***

正如我之前提到的，它位于库文件夹中`IdVers.inc`存储的包含文件中`..\Lib\System\`，它可能是如何获取 Indy 版本信息的下一个选项。

***免责声明***

这里提到的一些内容目前适用于 Indy 的最新版本，但我不确定它是否也适用于所有旧版本（例如 Indy 9）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T14:04:43.017

如果你的应用程序已经有一个 Indy 组件的实例（它继承了 TIdBaseComponent），你可以简单地通过

```
Version := SomeIndyComponent.Version; 
```

在当前版本中，此函数将返回`10.5.9.0`

# facebook - 如何创建一个 Facebook 登录框？

> ID：14422871
> 
> 赞同：0
> 
> 时间：2013-01-20T08:29:07.723
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

好的 facebook 的教程到处都是，有谁知道我可以找到创建登录框的教程的地方。

我有一个从 facebook 社交插件页面获得的登录按钮，但我不知道如何自定义它。

但是我现在想知道的是如何创建一个登录框，当用户单击 facebook 登录按钮时，该按钮会消失并显示一个带有他们的个人资料图片名称和我的活动的框。

例如看看 WETPAINT.COM，他们有我在说什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:56:07.383

以下代码为您提供了一个登录按钮。这个按钮的行为就像[文档](https://developers.facebook.com/docs/reference/plugins/login/)说的那样：

“如果用户在退出 Facebook 后到达您的站点，按钮将显示登录。当用户单击它时，将提示她输入她的 Facebook 用户名和密码。

如果她尚未注册您的网站，她将被重定向到您在*registration-url*参数中指定的URL。

如果她已经为您的站点注册，该按钮将触发 onlogin() Javascript 事件。触发此事件时，您应该将用户登录到您的站点。

如果用户登录 Facebook，但尚未注册您的网站，按钮将显示注册并单击它将用户带到您的*注册网址*。

这个文档页面值得一看。

```
<?php

<!DOCTYPE html>

<html lang="en-US">
 <head>
 </head>
 <body>
    <div id="fb-root"></div>
        <script type="text/javascript">
            (function(d, s, id) {
              var js, fjs = d.getElementsByTagName(s)[0];
              if (d.getElementById(id)) return;
              js = d.createElement(s); js.id = id;
              js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
              fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));

            window.fbAsyncInit = function() {
                FB.init({
                  appId      : 'YOUR APP ID', 
                  channelUrl : 'YOUR CHANNEL URL', 
                  status     : true, 
                  cookie     : true, 
                  oauth      : true, 
                  xfbml      : true  
                });
                FB.Event.subscribe('auth.login', function(response) {
                    window.location.reload();
                });
                FB.Event.subscribe('auth.logout',    function(response) {
                  window.location.reload();
                });
              };
            </script>

        <fb:login-button
           registration-url="...PATH/TO/THE/PAGE/FOR/REGISTERED/USERS.php" 
           on-login="console.log(arguments)"
        />
</body> 
```

# c++ - #pragma once 不会阻止多个变量定义

> ID：14422872
> 
> 赞同：4
> 
> 时间：2013-01-20T08:29:23.683
> 
> 标签：c++

我`#pragma once`经常使用它，它在处理标头时似乎工作正常，但由于某种原因，以下创建了多个定义的链接器错误：

```
#pragma once
int someVariable=5; 
```

不应该也`pragma`防止这种情况吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T08:30:50.260

> 编译指示不应该也阻止这种情况吗？

不，在这种情况下，如果此头文件包含在多个位置，则会创建 someVariable 的多个定义。如果 Bh 和 Ch 都包含你的头文件，那么将创建两个 someVariable。

更好的方法是仅在一个 .cpp 文件中定义变量并`extern`在其他地方使用。

# jquery - 加载 jquery-ui 作为 requirejs 模块

> ID：14422882
> 
> 赞同：0
> 
> 时间：2013-01-20T08:31:07.520
> 
> 标签：jquery, jquery-ui, requirejs

我正在使用`require-jquery.js`，我正在尝试添加`jquery-ui`到组合中。

如果我在我的主页上使用这个定义，我会正确地得到 jquery-ui：

```
// load main app
        require( { paths: {
            'jqueryui': 'cafe/lib/jqueryui',
            'ca': 'cafe/ca',
            'ko': 'cafe/lib/knockout/knockout',
            'komap': 'cafe/lib/knockout/knockout.mapping',
            'kopost': 'cafe/lib/knockout/knockout-postbox',
            'jd': 'cafe/lib/jaydata-1.2.5/jaydata',
            'jdKo': 'cafe/lib/jaydata-1.2.5/jaydatamodules/knockout',
            'jdDeferred': 'cafe/lib/jaydata-1.2.5/jaydatamodules/deferred',
        },
        waitSeconds: 60,
        shim: {
            'jd': { exports: '$data', deps: [ 'cafe/lib/jaydata-1.2.5/datajs-1.0.3' ] },
            'jdDeferred': { exports: '$data', deps: [ 'jd' ] },
        }
    }, [ 'jquery',  'ko', 'cafe/log', 'sp/app','jqueryui' ], function($, ko, log, app ) {
        //this logs the ui object properly
        console.log($.ui);

    } ); 
```

但是当我尝试从另一个模块调用它时：

```
define(['jquery', 'ko','jqueryui'], function ($, ko) 
```

我从 require.js 得到一个错误：`Uncaught TypeError: Object 0 has no method 'match'`。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T09:46:26.637

尝试将配置对象放在单独的`require.config`调用中：

```
require.config({
  paths : { ... }
}); 
```

另请参阅[有关 RequireJS 配置的此页面。](http://requirejs.org/docs/api.html#config)

# css - [class^=blah] 在 CSS 中是什么意思

> ID：14422883
> 
> 赞同：-3
> 
> 时间：2013-01-20T08:31:17.860
> 
> 标签：css, css-selectors

这个 CSS 选择器是什么意思；

[类^=废话]

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T08:51:49.540

那就是 CSS**属性以**选择器开头。`[class^="blah"]`字面意思是：

> `class`具有以开头的属性的元素`blah`。例如：`blahello`或`blahfoobar`

查看**[规格](http://www.w3.org/TR/selectors/#attribute-substrings)**

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-20T08:44:44.573

如此处所写：[CSS3 [attribute^=value] 选择器](http://www.w3schools.com/cssref/sel_attr_begin.asp)

此选择器匹配其指定属性为特定值的每个元素。

例如：

我有以下html

```
<a href="www.google.com">Lorem Ipsum</a>
<a href="myhomepage.com">Dolor Sit Amet</a> 
```

我想用不同的颜色为我主页的所有链接着色，我会做

```
a[href="myhomepage.com"]
{
   color: #00FF00;
} 
```

这将选择 href 属性等于 myhomepage.com 的所有 a 元素。

在这里检查这个[小提琴](http://jsfiddle.net/Y4F6w/2/)

# .htaccess - 重定向 (301) 随机 URL

> ID：14422884
> 
> 赞同：0
> 
> 时间：2013-01-20T08:31:25.430
> 
> 标签：.htaccess, redirect, http-status-code-301

如何使用 .htaccess 方法重定向（301）随机 URL，例如 /search.php?tag=Classy。我试过下面的一个没有用。

```
Redirect 301 /search.php?tag=Classy http://www.domain.com/tag/classy/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:37:03.523

您的重定向规则看起来不错。只要这是您网站根目录中的 .htaccess，它就应该找到它。但是，您还需要确保在您的 Apache 实例中启用了**mod_alias**模块，您可能会这样做。

我之前犯了一个错误，但是是的，如果你有 RewriteRules，你将需要以下内容：

`Options +FollowSymLinks
RewriteEngine On`

..你提到重写确实有效。

另一种可能性是您的重写与您的重定向重叠。mod_rewrite 指令将在 mod_alias 之前执行，无论 .htaccess 中的顺序如何。

# html - 在表格中居中不均匀行

> ID：14422887
> 
> 赞同：1
> 
> 时间：2013-01-20T08:32:07.503
> 
> 标签：html, html-table

我有一张有两行的桌子；一个有 5 个定义，一个有 4 个。有没有办法让第二行位于列不对齐的第一行的中心？

```
<table class="productBrowserTableControllerType" id="productBrowserTableControllerType" border="1">
    <tr>
        <td>Standard Solenoid</td>
        <td>"Classic" Solenoid</td>
        <td>Manual Lever</td>
        <td>Palm Button</td>
        <td>Foot Pedal/Treadle</td>
    </tr>
    <tr>
        <td>Cam Roller</td>
        <td>Piston</td>
        <td>Remote Pilot</td>
        <td>Differential Pilot</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:45:47.777

将第二行包装在另一个表中，并将整个东西放入一个`<td>`像这样的 colspan 为 5 的表中......

[http://jsfiddle.net/FzUhA/1/](http://jsfiddle.net/FzUhA/1/)

```
 <tr>
        <td>Standard Solenoid</td>
        <td>"Classic" Solenoid</td>
        <td>Manual Lever</td>
        <td>Palm Button</td>
        <td>Foot Pedal/Treadle</td>
    </tr>
    <tr>
       <td colspan = "5" align="center">
           <table><tr>
           <td>Cam Roller</td>
           <td>Piston</td>
           <td>Remote Pilot</td>
           <td>Differential Pilot</td>
           </tr>
           </table>
         </td>
    </tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T08:49:07.233

这会将第二行移动到中心，它在左侧和右侧具有相等的间距。见[小提琴](http://jsfiddle.net/j3gJY/)

```
<table class="productBrowserTableControllerType" id="productBrowserTableControllerType" border="1">
    <tr>
        <td colspan="2">Standard Solenoid</td>
        <td colspan="2">"Classic" Solenoid</td>
        <td colspan="2">Manual Lever</td>
        <td colspan="2">Palm Button</td>
        <td colspan="2">Foot Pedal/Treadle</td>
    </tr>
    <tr>
        <td></td>
        <td colspan="2">Cam Roller</td>
        <td colspan="2">Piston</td>
        <td colspan="2">Remote Pilot</td>
        <td colspan="2">Differential Pilot</td>
        <td></td>
    </tr>
</table> 
```

# animation - cocos 2d 动画中的抽搐

> ID：14422891
> 
> 赞同：1
> 
> 时间：2013-01-20T08:32:40.700
> 
> 标签：animation, cocos2d-iphone, plist

我必须运行一个 19 秒的动画，每帧 466 帧是“1024x768”我正在使用 zwoptex 制作一个精灵表，但一张表是“4096 X 4096”，它只能容纳 15 帧。

我制作了多张纸，准确地说是 30 张，并用它们运行动画，但它有抖动，当我只使用 2 或 3 张纸时，它非常光滑。

这是我的代码

```
 cache=[CCSpriteFrameCache sharedSpriteFrameCache];
    [cache addSpriteFramesWithFile:@"Set_1.plist"];

    cache1=[CCSpriteFrameCache sharedSpriteFrameCache];
    [cache1 addSpriteFramesWithFile:@"Set_2.plist"];

    cache2=[CCSpriteFrameCache sharedSpriteFrameCache];
    [cache2 addSpriteFramesWithFile:@"Set_3.plist"];

    cache3=[CCSpriteFrameCache sharedSpriteFrameCache];
    [cache3 addSpriteFramesWithFile:@"Set_4.plist"];

    cache4=[CCSpriteFrameCache sharedSpriteFrameCache];
    [cache4 addSpriteFramesWithFile:@"Set_5.plist"];

    cache5=[CCSpriteFrameCache sharedSpriteFrameCache];
    [cache5 addSpriteFramesWithFile:@"Set_6.plist"];

    cache6=[CCSpriteFrameCache sharedSpriteFrameCache];
    [cache6 addSpriteFramesWithFile:@"Set_7.plist"];

    cache7=[CCSpriteFrameCache sharedSpriteFrameCache];
    [cache7 addSpriteFramesWithFile:@"Set_8.plist"];

    cache8=[CCSpriteFrameCache sharedSpriteFrameCache];
    [cache8 addSpriteFramesWithFile:@"Set_9.plist"];

    cache9=[CCSpriteFrameCache sharedSpriteFrameCache];
    [cache9 addSpriteFramesWithFile:@"Set_10.plist"];

    cache10=[CCSpriteFrameCache sharedSpriteFrameCache];
    [cache10 addSpriteFramesWithFile:@"Set_11.plist"];

    cache11=[CCSpriteFrameCache sharedSpriteFrameCache];
    [cache11 addSpriteFramesWithFile:@"Set_12.plist"];

    cache12=[CCSpriteFrameCache sharedSpriteFrameCache];
    [cache12 addSpriteFramesWithFile:@"Set_13.plist"];

    cache13=[CCSpriteFrameCache sharedSpriteFrameCache];
    [cache13 addSpriteFramesWithFile:@"Set_14.plist"];

    cache14=[CCSpriteFrameCache sharedSpriteFrameCache];
    [cache14 addSpriteFramesWithFile:@"Set_15.plist"];

    cache15=[CCSpriteFrameCache sharedSpriteFrameCache];
    [cache15 addSpriteFramesWithFile:@"Set_16.plist"];

    equ=[CCSprite spriteWithFile:@"m1.png"];
    [self addChild:equ z:5 tag:90 ];
    equ.anchorPoint=ccp(0, 0);
    equ.position=ccp(0, 0);

    NSMutableArray *framesArray=[NSMutableArray array];
     NSMutableArray *framesArray1=[NSMutableArray array];
    NSMutableArray *framesArray2=[NSMutableArray array];
    NSMutableArray *framesArray3=[NSMutableArray array];
    NSMutableArray *framesArray4=[NSMutableArray array];
    NSMutableArray *framesArray5=[NSMutableArray array];
    NSMutableArray *framesArray6=[NSMutableArray array];
    NSMutableArray *framesArray7=[NSMutableArray array];
    NSMutableArray *framesArray8=[NSMutableArray array];
    NSMutableArray *framesArray9=[NSMutableArray array];
    NSMutableArray *framesArray10=[NSMutableArray array];
    NSMutableArray *framesArray11=[NSMutableArray array];
    NSMutableArray *framesArray12=[NSMutableArray array];
    NSMutableArray *framesArray13=[NSMutableArray array];
    NSMutableArray *framesArray14=[NSMutableArray array];
   // NSMutableArray *framesArray15=[NSMutableArray array];

    for (int i=1; i<=15; i++) {
        NSString *frameName=[NSString stringWithFormat:@"m%d.png", i];
        NSString *frameName1=[NSString stringWithFormat:@"m%d.png", i+(15*1)];
        NSString *frameName2=[NSString stringWithFormat:@"m%d.png", i+(15*2)];
        NSString *frameName3=[NSString stringWithFormat:@"m%d.png", i+(15*3)];
        NSString *frameName4=[NSString stringWithFormat:@"m%d.png", i+(15*4)];
        NSString *frameName5=[NSString stringWithFormat:@"m%d.png", i+(15*5)];
        NSString *frameName6=[NSString stringWithFormat:@"m%d.png", i+(15*6)];
        NSString *frameName7=[NSString stringWithFormat:@"m%d.png", i+(15*7)];
        NSString *frameName8=[NSString stringWithFormat:@"m%d.png", i+(15*8)];
        NSString *frameName9=[NSString stringWithFormat:@"m%d.png", i+(15*9)];
        NSString *frameName10=[NSString stringWithFormat:@"m%d.png", i+(15*10)];
        NSString *frameName11=[NSString stringWithFormat:@"m%d.png", i+(15*11)];
        NSString *frameName12=[NSString stringWithFormat:@"m%d.png", i+(15*12)];
        NSString *frameName13=[NSString stringWithFormat:@"m%d.png", i+(15*13)];
        NSString *frameName14=[NSString stringWithFormat:@"m%d.png", i+(15*14)];

        id frameObject=[cache spriteFrameByName:frameName];
        id frameObject1=[cache1 spriteFrameByName:frameName1];
        id frameObject2=[cache2 spriteFrameByName:frameName2];
        id frameObject3=[cache3 spriteFrameByName:frameName3];
        id frameObject4=[cache4 spriteFrameByName:frameName4];
        id frameObject5=[cache5 spriteFrameByName:frameName5];
        id frameObject6=[cache6 spriteFrameByName:frameName6];
        id frameObject7=[cache7 spriteFrameByName:frameName7];
        id frameObject8=[cache8 spriteFrameByName:frameName8];
        id frameObject9=[cache9 spriteFrameByName:frameName9];
        id frameObject10=[cache10 spriteFrameByName:frameName10];
        id frameObject11=[cache11 spriteFrameByName:frameName11];
        id frameObject12=[cache12 spriteFrameByName:frameName12];
        id frameObject13=[cache13 spriteFrameByName:frameName13];
        id frameObject14=[cache14 spriteFrameByName:frameName14];

        [framesArray addObject:frameObject];
        [framesArray1 addObject:frameObject1];
        [framesArray2 addObject:frameObject2];
        [framesArray3 addObject:frameObject3];
        [framesArray4 addObject:frameObject4];
        [framesArray5 addObject:frameObject5];
        [framesArray6 addObject:frameObject6];
        [framesArray7 addObject:frameObject7];
        [framesArray8 addObject:frameObject8];
        [framesArray9 addObject:frameObject9];
        [framesArray10 addObject:frameObject10];
        [framesArray11 addObject:frameObject11];
        [framesArray12 addObject:frameObject12];
        [framesArray13 addObject:frameObject13];
        [framesArray14 addObject:frameObject14];

    }

    id animObject=[CCAnimation animationWithSpriteFrames:framesArray delay:0.0407];
    id animObject1=[CCAnimation animationWithSpriteFrames:framesArray1 delay:0.0407];
    id animObject2=[CCAnimation animationWithSpriteFrames:framesArray2 delay:0.0407];
    id animObject3=[CCAnimation animationWithSpriteFrames:framesArray3 delay:0.0407];
    id animObject4=[CCAnimation animationWithSpriteFrames:framesArray4 delay:0.0407];
    id animObject5=[CCAnimation animationWithSpriteFrames:framesArray5 delay:0.0407];
    id animObject6=[CCAnimation animationWithSpriteFrames:framesArray6 delay:0.0407];
    id animObject7=[CCAnimation animationWithSpriteFrames:framesArray7 delay:0.0407];
    id animObject8=[CCAnimation animationWithSpriteFrames:framesArray8 delay:0.0407];
    id animObject9=[CCAnimation animationWithSpriteFrames:framesArray9 delay:0.0407];
    id animObject10=[CCAnimation animationWithSpriteFrames:framesArray10 delay:0.0407];
    id animObject11=[CCAnimation animationWithSpriteFrames:framesArray11 delay:0.0407];
    id animObject12=[CCAnimation animationWithSpriteFrames:framesArray12 delay:0.0407];
    id animObject13=[CCAnimation animationWithSpriteFrames:framesArray13 delay:0.0407];
    id animObject14=[CCAnimation animationWithSpriteFrames:framesArray14 delay:0.0407];

    id animAction=[CCAnimate actionWithAnimation:animObject];
    id animAction1=[CCAnimate actionWithAnimation:animObject1];
    id animAction2=[CCAnimate actionWithAnimation:animObject2];
    id animAction3=[CCAnimate actionWithAnimation:animObject3];
    id animAction4=[CCAnimate actionWithAnimation:animObject4];
    id animAction5=[CCAnimate actionWithAnimation:animObject5];
    id animAction6=[CCAnimate actionWithAnimation:animObject6];
    id animAction7=[CCAnimate actionWithAnimation:animObject7];
    id animAction8=[CCAnimate actionWithAnimation:animObject8];
    id animAction9=[CCAnimate actionWithAnimation:animObject9];
    id animAction10=[CCAnimate actionWithAnimation:animObject10];
    id animAction11=[CCAnimate actionWithAnimation:animObject11];
    id animAction12=[CCAnimate actionWithAnimation:animObject12];
    id animAction13=[CCAnimate actionWithAnimation:animObject13];
    id animAction14=[CCAnimate actionWithAnimation:animObject14];

    //animAction=[CCRepeatForever actionWithAction:animAction];
    CCSequence *moveAction = [CCSequence actions:animAction,animAction1,animAction2,animAction3,animAction4,animAction5,animAction6,animAction7,animAction8,animAction9,animAction10,animAction11,animAction12,animAction13,animAction14,nil];
    moveAction.tag=100;
    [equ runAction:moveAction]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T09:26:23.117

> 每帧 466 帧的动画是“1024x768”

停在那儿！

问题是每个 4096x4096 纹理图集（spritesheets）都使用 64 MB 内存。在任何给定时间，只有 2-4 个（取决于设备内存）适合内存。

由于您按顺序缓存它们，因此您额外增加了加载时间，因为到它应该缓存纹理编号 3 或 4 时 cocos2d 将收到内存警告，并清除未使用的纹理 - 前几个纹理。

然后，当您开始动画时，它会在使用每个纹理图集时将其加载到内存中，因为此时唯一缓存的纹理可能是 8 到 10。同时其他未使用的纹理会被缓存，因为您不断收到内存警告.

你有两个选择：

*   停止这种疯狂（™）
*   也许最终可能通过使用 TexturePacker 并将纹理颜色深度降低到 16 位（RGB565 或 RGBA5551 - 将内存使用量减少一半）并将它们导出为 NPOT（轻微内存减少）和 .pvr.ccz（更快的加载和内存减少）可以改善情况。

有关更多信息，请查看我的[cocos2d 内存优化指南](http://www.learn-cocos2d.com/2012/11/optimize-memory-usage-bundle-size-cocos2d-app/)。

# ruby-on-rails - 如何在 Rails 文档中查找数据类型？

> ID：14422893
> 
> 赞同：-1
> 
> 时间：2013-01-20T08:32:52.253
> 
> 标签：ruby-on-rails, ruby, return-value, duck-typing, rails-activerecord

Ruby 相对较新，我在文档方面遇到了很多麻烦。我的主要问题是，我如何判断一个方法返回什么类型的对象？

如果我看一下 Objective-C 或 Java 文档，我可以看到：

> FunctionX 返回 Y 类型的对象。

我可以单击 Y 并了解有关该课程的所有信息。[将其与 ActiveRecord::Base 的文档](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)进行对比。如果我查看该`#connection`方法，它会告诉我：

```
Returns the connection currently associated with the class. 
```

什么是连接？我想了解更多关于连接对象的类。不是每个方法都指定返回类型是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T09:07:02.283

### Ruby 使用 Duck 类型

Ruby 不会像你想象的那样使用类型。方法只返回最后评估的任何表达式。您可以对返回值做任何您想做的事情，包括：

1.  `#inspect`它。
2.  问其`#class`。
3.  看看会不会`#respond_to?`有什么方法。
4.  无论你想用它做什么。

### 至于你的问题...

Rails 文档对于您通常希望在应用程序中接触的内容相当全面，但它们对内部结构可能不太清楚。不过，[ActiveRecord::Base](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)的 API 文档似乎一点也不不清楚。

> 连接通常通过::establish_connection 创建并由#connection 检索。从 ActiveRecord::Base 继承的所有类都将使用此连接。

出于实际目的，您将返回一个描述通常在`config/database.yml`文件中定义的数据库连接的对象。例如：

```
$ rails runner 'puts ActiveRecord::Base.connection.class'
ActiveRecord::ConnectionAdapters::SQLite3Adapter 
```

如果您想了解 Rails 的内部结构，您可能需要了解一些深层嵌套的方法调用并了解支撑该框架的 Ruby 元编程（例如[BasicObject#method_missing ）。](http://www.ruby-doc.org/core-1.9.3/BasicObject.html#method-i-method_missing)但是，您可以通过使用鸭子类型来处理返回的对象，从而为自己省去很多麻烦。

# javascript - 如何从 event.target 获取元素的 ID

> ID：14422898
> 
> 赞同：25
> 
> 时间：2013-01-20T08:33:18.843
> 
> 标签：javascript, jquery, html

考虑一段如下所示的代码：

```
$('body').on('click', function(e){

}); 
```

我知道有一种方法可以从`e.target`ie中获取元素类型`e.target.nodeName`，但是如何从中获取该元素的 id？如果无法做到这一点，是否有另一种方法来获取被点击元素的 id？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-20T08:34:12.693

您可以使用`e.target.id`. e.target 代表`DOM`对象，您可以访问其所有属性和方法。

```
$('body').on('click', function(e){
    alert(e.target.id);    
}); 
```

您可以使用 jQuery 函数将 DOM 对象转换为 jQuery 对象，`jQuery(e.target)`或者`$(e.target)`在其上调用 jQuery 函数。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-11-27T01:09:03.033

要在 JavaScript 中获取目标元素的属性，您只需使用：

```
e.target.getAttribute('id'); 
```

另请参阅：[https](https://stackoverflow.com/a/10280487/5025060) ://stackoverflow.com/a/10280487/5025060 ，了解 DOM 属性及其属性之间的细微区别。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-20T08:36:17.963

```
$('body').on('click', function(e){
    var id = $(this).attr('id');
    alert(id);
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-20T08:53:31.397

可以这样做：

```
$('body').on('click', 'a', function (e) {//you can do $(document) instead $(body)
    e.preventDefault();
    alert($(this).attr('id'));//<--this will find you the each id of `<a>`
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-16T15:37:27.733

试试这个

```
 $('body').on('click', '*', function() {

    var id = $(this).attr('id');
    console.log(id); 
}); 
```

# javascript - iPhone 无法识别 PhoneGap 的 navigator.app

> ID：14422908
> 
> 赞同：8
> 
> 时间：2013-01-20T08:35:26.030
> 
> 标签：javascript, iphone, html, cordova

我有一个退出应用程序的按钮。该函数如下所示：

```
//Close application
function close_window() {
  navigator.app.exitApp();
} 
```

它没有用，所以我尝试了以下行：

```
navigator.device.exitApp(); 
```

它也没有工作。然后我通过alert发现iPhone无法识别PhoneGap的navigator.app和navigator.device。我使用 PhoneGap 2.2.0 版。

为什么会这样？

PS：它适用于我在Android上。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-20T09:07:41.747

**navigator.app.exitApp()**不适用于 IOS，仅适用于 Android。在 iOS 上，Apple 不允许应用程序以编程方式退出。

它可以通过 iOS 目标 c 端完成，但这个应用程序很有可能会在 Apple 应用商店被拒绝。

在这里你会找到一个很好的解释：[https](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/XjTm0ua4uOY) ://groups.google.com/forum/?fromgroups=#!topic/phonegap/XjTm0ua4uOY 。

# sql - SQL：如何搜索文本字段

> ID：14422913
> 
> 赞同：0
> 
> 时间：2013-01-20T08:36:19.090
> 
> 标签：sql, oracle11g

我有一个表格，其中一列包含 xml 文件的内容。在这些 xml 文件中，有些包含文本 HASH_VALUE。我想找出包含带有文本 HASH_VALUE 的 xml 文件的行。我尝试使用`like(%HASH_VALUE%)`，但这不会检索任何行

谁能解释我如何做到这一点。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T08:56:44.257

这里有两种方法：

一个使用xml：

```
select id, xml_col 
from t 
where xmlelement(r, xmltype(xml_col)).extract('//HASH_VALUE') is not null; 
```

另一种是你的方式：

```
select id, xml_col 
from t 
where xml_col like '%HASH_VALUE%'; 
```

[**这是一个 sqlfiddle 演示**](http://www.sqlfiddle.com/#!4/c67ff/1)

# jsf-2 - readonly 在多个 autoComplete primefaces 中不起作用

> ID：14422919
> 
> 赞同：1
> 
> 时间：2013-01-20T08:37:29.683
> 
> 标签：jsf-2, autocomplete, primefaces

的`readonly`属性`<p:autoComplete>`不起作用。我仍然可以在设置后输入文本`readonly="true"`。我不想使用`disabled="true"`，因为它不会让我删除任何选择。这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T09:24:25.933

似乎是一个已知问题（至少在 3.4.2 中）

[问题 5070：自动完成只读但将 ajax 发送到服务器](http://code.google.com/p/primefaces/issues/detail?id=5070)

可能的解决方法：

> 改为渲染 outputText 或只读 inputText 组件。

[PrimeFaces 社区论坛：只读自动完成：仍然发送 ajax](http://forum.primefaces.org/viewtopic.php?f=3&t=27627)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-04T15:48:23.803

我有同样的问题。但是，我找到了解决方法。您可以将自动完成的各个内容设置为只读。

```
<script type="text/javascript">
    //<![CDATA[

    $(document).ready(function() {
        document.getElementById('contentForm:myId_input').setAttribute("readOnly","true");
    });

    // ]]>
</script> 
```

这里**myId**是自动完成的 id。输入框有一个 id **myId_input**，它只是简单地附加在末尾的“_input”。

就现有值而言，您可以使用**select**和**unselect**事件来限制更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-17T21:59:12.183

这是我的解决方法。**它看起来像自动完成组件**

```
<h:panelGroup layout="block" styleClass="ui-autocomplete ui-autocomplete-multiple">
    <h:panelGroup layout="block" styleClass="ui-autocomplete-multiple-container ui-widget ui-inputfield ui-corner-all">
        <ui:repeat value="#{bean.values}" var="value">
            <h:panelGroup layout="block" styleClass="ui-autocomplete-token ui-state-active ui-corner-all">
                <h:outputText styleClass="ui-autocomplete-token-label" value="#{value}"/>
            </h:panelGroup>
        </ui:repeat>
    </h:panelGroup>
</h:panelGroup> 
```

# php - 附加 where 子句

> ID：14422920
> 
> 赞同：0
> 
> 时间：2013-01-20T08:37:42.143
> 
> 标签：php, mysql, sql

我有以下代码来返回我想要的字符串

```
$sql = "
    SELECT `description` 
    FROM `auctions` 
    WHERE `description` REGEXP '[0-9]{10}'
"; 
```

但是我需要为这样的事情运行更新查询

```
UPDATE `url` 
FROM `auctions_media`
WHERE `url` = "$sql" AND `auction_id` = SomeNumber 
```

我如何匹配表，以便`auction_id`for`auctions`表与`auction_id`in`auctions_media`表匹配？

我希望代码遍历所有行，从描述中返回字符串，然后将其用于更新查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:11:26.143

也不完全确定你在追求什么，但也许是这样的：

```
UPDATE auctions_media JOIN auctions USING (auction_id)
SET    auctions_media.url = auctions.description
WHERE  auctions.description REGEXP '[0-9]{10}' 
```

或这个：

```
UPDATE auctions
  JOIN auctions_media
    ON auctions_media.auction_id = auctions.auction_id
   AND auctions_media.url        = auctions.description
SET    ...
WHERE  auctions.description REGEXP '[0-9]{10}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T08:41:56.547

# puzzle - 查找我选择的号码

> ID：14422921
> 
> 赞同：-1
> 
> 时间：2013-01-20T08:37:44.177
> 
> 标签：puzzle

我在脑海中随机选择了一个 1 到 1200 之间的数字。如果你只能问我只会回答“是”或“否”的问题，你需要问多少问题才能得到我在脑海中选择的数字的答案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T08:42:22.640

查找二分查找。这就是你要找的。

[http://en.wikipedia.org/wiki/Binary_search_algorithm](http://en.wikipedia.org/wiki/Binary_search_algorithm)

在上面的链接中，查找*Number Guessing Game*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T09:16:37.667

已经指出，这在[http://en.wikipedia.org/wiki/Binary_search_algorithm](http://en.wikipedia.org/wiki/Binary_search_algorithm)的维基百科页面中进行了讨论。

让我们更详细地看一下，看看答案是否真的是 ceil(log(1200)/log(2)=11。要做到这一点，我们必须证明两件事：

1.  可以在 11 个问题中识别数字
2.  在少于 11 个问题中无法确定数字

对于（1）：

正如大家所说，给出二分搜索算法就足够了。例如：

*   小于 1024
*   如果是，是否小于 512，
    等等。

给出一个直觉：假设数字是 3，那么我们有 < 1024 (1 个问题), < 512 (2), < 256 (3), < 128 (4), < 64 (5), < 32 (6) , < 16 (7), < 8 (8), < 4 (9), (not) < 2 (10), < 3 (11)。

这行得通吗？我不会严格展示这一点，但假设您正在考虑的数字是 x = a[10]*1+...a[0]*2^10 （二进制表示）。观察你开始问它是否小于 2^10，然后对于 nth，你问它是否小于 sum(a[j]*2^(10-j)+2^(10-n), j=0\. ..n-1)。观察对于每个第 i 个问题，如果答案是肯定的，那么 a[i-1] = 0（否则 a[i-1]=1）。在 11 个问题 (i=0,...10) 之后，您将发现所有 a[0]...a[10]。

对于（2），[再次，不严格]

假设你问了 N 个问题。从这 N 个问题中，你只能推断出 2^N 个数字，因为只有 2^N 种可能的方法可以得出答案。假设 N < 11，则 2^N <= 1024 < 1200。所以根据鸽子洞原理，您不能唯一标识 N<11 的所有 1200 个数字。

事实上，这行论点（#2）是用来说明比较排序不能比 O(n log n) 快的。

现在，如果有人可以使这个严格：p 也可以推广到 M 而不是 1200，那就太好了。

好的，这很容易，如果您可以问：由复杂公式构造的数字 y 是否小于、等于或大于由复杂公式构造的数字 z？（答案可以小于、等于或大于）您需要多少个问题？

# android - Android 上的完整路径

> ID：14422924
> 
> 赞同：0
> 
> 时间：2013-01-20T08:39:03.063
> 
> 标签：android, resources

如何在 Android 中获得完整的合格路径（例如 /res/value-de-land-car-xhdpi-finger-v17...）？我想在三台设备上进行测试，但我不知道从哪里开始。

编辑：我想在设计时知道文件夹，因为我必须知道我必须将文件放在哪个文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:03:45.757

无法获取资源文件夹的路径。资源文件夹编译成apk，甚至可能不按原样存储。（例如，那些布局 xml 文件一旦被编译就不再是 xml 文件）。

我不知道您要在这里实现什么，但一种解决方案可能是使用 sdk-tools 将您需要的文件推送到已知位置（如 /mnt/sdcard/... ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T08:51:26.863

使用 File 对象的[getAbsolutePath()](http://developer.android.com/reference/java/io/File.html#getAbsoluteFile%28%29)方法。

使用 File("relative/path/to/file") 构造函数创建 File 对象。

编辑：现在我注意到了你的例子。如果您真正想要做的是获取资源的绝对路径，据我所知这是不可能的，您可能也不应该这样做。您不应该依赖 Android 如何打包您的应用程序，它可能会在未来发生变化。

# linux - 执行之间的区别。script.sh 与 ./script.sh

> ID：14422926
> 
> 赞同：0
> 
> 时间：2013-01-20T08:39:21.377
> 
> 标签：linux

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T08:42:23.950

区别很简单

```
. script.sh 
```

使用您当前的 shell 执行 shell 脚本，因此您在脚本中所做的所有更改（如更改目录或变量）都会影响您正在运行的 shell

```
./script.sh 
```

另一方面将启动一个新的 shell 来执行脚本。这通常是启动脚本的更好方法

# java - JUnit - 从 TestSuite 访问 TestResult

> ID：14422928
> 
> 赞同：1
> 
> 时间：2013-01-20T08:39:49.780
> 
> 标签：java, unit-testing, junit, junit4, test-suite

我的 TestSuite 在构建期间使用 ant 目标运行。
我想在我的套件中访问 TestResult 并在测试成功与否时执行一些操作。
有没有办法在拆卸方法中检索对象？
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T09:07:01.123

使用 jUnit3 我会尝试子类化`Test`并覆盖该`run`方法。这将使我能够访问该`TestResult`实例。像这样的东西：

```
public class MyTest extends Test {
  @Overwrite
  public void run(TestResult result) {
    super.run(result);
    doSomethingWithResults(result);
  }

  // ...
} 
```

使用 jUnit4，我会考虑实现一个 TestRunner（基于标准运行器）。听起来很难，但实际上并非如此。将默认的子类化并简单地添加`@RunWith`注释以使用您自己的跑步者（可以对结果做一些事情）

# php - 如何在 PHP 中创建成功的域对象工厂

> ID：14422937
> 
> 赞同：3
> 
> 时间：2013-01-20T08:41:33.377
> 
> 标签：php, oop, model-view-controller, design-patterns, domain-object

我正在摆弄一个 MVC 框架，我偶然发现了一个我不知道如何解决的问题。

我想为`DomainObjectFactory`我的应用程序的模型层创建一个，但是，每个域对象都会有一组不同的参数，例如：

*   人员 - $id、$name、$age。
*   帖子 - $id、$author、$title、$content、$comments
*   评论 - $id, $author, $content

等等。我怎样才能轻松地告诉我的工厂我需要什么样的对象？

我想出了几个选择：

*   传递一个数组——我不喜欢这个，因为你不能依赖构造函数的契约来告诉对象他的工作需要什么。
*   制作`DomainObjectFactory`一个接口，并制作具体的类 - 有问题，因为要制作大量的工厂！
*   使用反射 - 服务定位器多吗？我不知道，在我看来就是这样。

我可以在这里使用一个有用的设计模式吗？还是其他一些聪明的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T14:03:38.947

为什么要初始化一个分配了所有属性的[*域对象？*](http://c2.com/cgi/wiki?DomainObject)

相反，只需创建一个空的*Domain Object*。您可以在工厂检查它是否有`prepare()`执行方法。哦.. 如果您使用的是[*DAO*](http://www.oracle.com/technetwork/java/dataaccessobject-138824.html)，而不是直接与[*Mappers*](http://martinfowler.com/eaaCatalog/dataMapper.html)交互，您可能希望在您的*域对象中构造和注入适当的**DAO*。

 *值的分配应该只发生在[*Service*](https://en.wikipedia.org/wiki/Service_%28systems_architecture%29)中。通过使用普通的二传手。

### 一些例子：

> [检索现有文章]

```
public function retrieveArticle( $id )
{
    $mapper = $this->mapperFactory->create('Article');
    $article = $this->domainFactory->create('Article');

    $article->setId( $id );
    $mapper->fetch( $article );
    $this->currentArticle = $article;
} 
```

> [发表新评论]

```
public function addComment( $id, $content )
{

    $mapper = $this->mapperFactory->create('article');
    $article = $this->domainFactory->create('Article');
    $comment = $this->domainFactory->create('Comment');

    $comment->setContent( $content );
    $comment->setAuthor( /* user object that you retrieved from Recognition service */ );

    $article->setId( $id );
    $article->addComment( $comment );
    // or you might retrieve the ID of currently view article
    // and assign it .. depends how you build it all

    $mapper->store( $article ); // or 
} 
```

> [传递用户输入]

```
public function getArticle( $request )
{
    $library = $this->serviceFactory->build('Library');
    $library->retrieveArticle( $request->getParameter('articleId'));
} 
```*

# c# - 我真的必须为所有变量赋予初始值吗？

> ID：14422948
> 
> 赞同：-1
> 
> 时间：2013-01-20T08:43:24.027
> 
> 标签：c#

> **可能重复：**
> [为什么我必须在默认为 0 时为 C# 中的 int 赋值？](https://stackoverflow.com/questions/1423437/why-do-i-have-to-assign-a-value-to-an-int-in-c-sharp-when-defaults-to-0)

我刚刚开始通过编写一个名为 Journal 的人为应用程序来学习 C#。在解析日志文件的函数中，我声明了变量`DateTime currentEntryDate`. 在我到达定义新条目的行之前，它不会获得值。第二*次*到达入口行时，该变量将用于`JournalEntry`为前一个入口创建类的实例。

问题是使用变量的代码无法编译：

> 使用未分配的局部变量“currentEntryDate”

这对我来说毫无意义。为了让编译器满意，我真的必须给我的变量一个浪费的初始值吗？当然我误解了一些东西，或者我的代码某处有错误。

Pastebin上的代码：[Journal.cs](http://pastebin.com/1JcqDzx4)。我已经强调了相关的行。

编码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;
using System.IO;

namespace Journal
{
    class Journal
    {
        public List<JournalEntry> Entries;

        private static readonly string EntryLineRegex =
            @"-- Entry: (?<title>.*) \((?<year>\d{4})-(?<month>\d{2})" +
            @"-(?<day>\d{2})\)";

        public static Journal FromFile(string filePath)
        {
            Journal returnValue = new Journal();

            StreamReader fileReader = new StreamReader(filePath);

            // Prepare variables for parsing the journal file.
            bool hitFirstEntry = false;
            DateTime currentEntryDate;
            string currentEntryTitle;
            StringBuilder currentEntryText = new StringBuilder();

            // Prepare a regular expression for the entry lines.
            Regex entryLineRegex = new Regex(EntryLineRegex);

            while (!fileReader.EndOfStream)
            {
                string line = fileReader.ReadLine();

                if (line.StartsWith("--"))
                {
                    // Is this the first entry encountered? If so, don't try to
                    // process the previous entry.
                    if (!hitFirstEntry)
                    {
                        hitFirstEntry = true;
                    }
                    else
                    {
                        // Create a JournalEntry with the current entry, then
                        // reset for the next entry.
                        returnValue.Entries.Add(
                            new JournalEntry(
                                currentEntryText.ToString(), currentEntryDate
                            )
                        );

                        currentEntryDate = new DateTime();
                        currentEntryText.Clear();
                    }

                    // Extract the new entry title and date from this line and
                    // save them.
                    Match entryMatch = entryLineRegex.Match(line);
                    GroupCollection matches = entryMatch.Groups;

                    currentEntryDate = new DateTime(
                        Convert.ToInt16(matches["year"].Value),
                        Convert.ToInt16(matches["month"].Value),
                        Convert.ToInt16(matches["day"].Value)
                    );

                    currentEntryTitle = matches["title"].Value;
                }
                else
                {
                    currentEntryText.Append(line);
                }
            }

            return returnValue;
        }
    }

    class JournalEntry
    {
        public string Text;
        public DateTime EntryDate;

        public JournalEntry(string text, DateTime entryDate)
        {
            this.Text = text;
            this.EntryDate = entryDate;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T08:45:28.567

我认为这里的问题是编译器不够聪明，无法掌握您读取输入的方式，并且存在变量不会被初始化的执行路径，即如果它通过第`else`一个，在`if`. 为避免这种情况，您可能需要在定义时进行初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T08:59:38.150

像这样重组你的循环怎么样？这将确保`currentEntryDate`在您使用它之前具有值：

```
string line = fileReader.ReadLine();
while (line != null)
{
    // Extract the new entry title and date from this line and
    // save them.
    Match entryMatch = entryLineRegex.Match(line);
    GroupCollection matches = entryMatch.Groups;

    currentEntryDate = new DateTime(
        Convert.ToInt16(matches["year"].Value),
        Convert.ToInt16(matches["month"].Value),
        Convert.ToInt16(matches["day"].Value)
    );

    currentEntryTitle = matches["title"].Value;

    while ((line = fileReader.ReadLine()) != null && !line.StartsWith("--"))
    {
        currentEntryText.Append(line);
    }

    // Create a JournalEntry with the current entry, then
    // reset for the next entry.
    returnValue.Entries.Add(
        new JournalEntry(
            currentEntryText.ToString(), currentEntryDate
        )
    );

    currentEntryText.Clear();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T08:59:54.487

在这种情况下，编译器没有意识到 和 之间的“依赖`hitFirstEntry`” `currentEntryDate`。

即使您可以“证明”无论何时`hitFirstEntry`更改为`true`，然后将`currentEntryDate`很快分配 ，并且直到（最早）在循环的下一次迭代中才第一次*读取，编译器不是***那个**复杂。也许你可以重新编写你的代码。`currentEntryDate`

 *****编辑：**这是您的代码的“最小”版本：

```
 bool isFirstTime = true;
        DateTime localVarToBeAssigned;

        while (true)
        {
            if (isFirstTime)
            {
                isFirstTime = false;
            }
            else
            {
                // this reads the variable
                Console.WriteLine(localVarToBeAssigned);
            }

            // this assigns the variable
            localVarToBeAssigned = DateTime.Now;
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T08:56:24.713

如果你真的，真的不想实例化它：

```
DateTime? currentEntryDate = null 
```

问号使 DateTime 可以为空，它通常不是。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-20T08:56:22.410

您声明局部变量，此变量没有默认值，并从堆栈中获取它们的内存，您应该在使用它们之前初始化局部变量，并与此代码的更改行一起使用：

currentEntryDate = new DateTime();

你的代码行得通，***

# regex - 带有空白字符的正则表达式

> ID：14422949
> 
> 赞同：3
> 
> 时间：2013-01-20T08:43:26.347
> 
> 标签：regex

我正在尝试编写一个与具有以下属性的字符串匹配的正则表达式：

1.  正好包含 3 个字符。
2.  可以包含空格。
3.  至少一个字符应为非空格。
4.  只允许空格和数字。

请参阅下面的示例。我`b`用来表示一个空格字符。

**有效示例**

```
123
b12
bb1
1bb
12b

```

**无效示例**

```
bbb
1b2

```

我试过了

```
 [0-9 ]{1, 3} 
```

上面的正则表达式匹配所有字符为空的字符串。有人可以帮我写一个更好的正则表达式吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T08:57:16.103

我会为此使用前瞻：

```
^(?=.*\d)[\d ]{3}$ 
```

**解释：**

```
^         # Start of string
(?=.*\d)  # Assert presence of at least one digit
[\d ]{3}  # Match exactly three digits or spaces
$         # End of string 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-20T08:52:32.147

这应该完整地写出来。幸运的是，如果您的意思是您只需要可选地前面或后面有空格的数字（从`1b2`不允许的位来看），那么只有少数可能性。

```
([0-9]  )|([0-9]{2} )|([0-9]{3})|(  [0-9])|( [0-9]{2}) 
```

你有它。

当然，如果您可以在正则表达式之外检查长度=3，则正则表达式本身可以缩短为

```
([0-9]{1,3}[ ]*)|([ ]*[0-9]{1,3}) 
```

# json - 如何在 Aeson 中匹配数组

> ID：14422952
> 
> 赞同：2
> 
> 时间：2013-01-20T08:43:59.143
> 
> 标签：json, haskell, aeson

尝试处理 JSON 数据时，haskell 中的初学者问题。

我有一个名为*kk*的简单文件，其内容如下：

```
{
 "id": 123,
 "name": "Test1"
} 
```

我正在使用以下代码成功读取和解析它：

```
{-# LANGUAGE OverloadedStrings #-}

import Data.Aeson
import Data.Aeson.Types
import Control.Applicative ((<$>), (<*>))
import Control.Monad
import qualified Data.ByteString.Lazy.Char8 as BS

data Test = Test { id       ∷ Integer
                 , name     ∷ String
                 } deriving (Show)

process v = Test <$>
                 (v .: "id")       <*>
                 (v .: "name")

instance FromJSON Test where
  parseJSON (Object o) = process o
  parseJSON (Array  a)  = mzero
  parseJSON _ = mzero

main = do
    src ← readFile "kk"
    let t = decode (BS.pack src) ∷ Maybe Test
    print t 
```

但是，如果它是一个数组，我似乎无法确定我应该如何处理该文件，这意味着：

```
[{
 "id": 1,
 "name": "Test1"
},
{
 "id": 2,
 "name": "Test2"
}] 
```

如何折叠或以其他方式迭代数组案例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T19:16:40.263

尝试

```
let t = decode (BS.pack src) :: Maybe [Test] 
```

# c# - 使用 c# 访问 Windows 8

> ID：14422961
> 
> 赞同：1
> 
> 时间：2013-01-20T08:46:32.823
> 
> 标签：c#, windows-8, remote-access, remote-server

我正在编写一个应用程序，它执行以下操作：创建目录、复制文件和执行命令。

我的应用程序是服务器应用程序，客户端是 Windows 8 机器。

例如，我正在尝试在我的 Windows 8 机器上创建一个目录，因此我使用以下命令：

```
string outputPath = @"\\" + ipAddress+ "\\C\\NewDir";
Directory.CreateDirectory(outputPath); 
```

请注意，C 是共享的并且具有权限。（我的代码用于连接到 Windows 7 机器，一切正常......）

起初，它不起作用，声称我输入了无效的用户名和/或密码。经过几次尝试和错误尝试，我尝试使用 Windows 的运行 (\10.0.1.125\C) 直接访问远程“C”驱动器。当然，它要求输入密码，当我输入我的凭据并点击“保存它们”时，我访问了我的远程“C”驱动器。然后，当我再次运行我的应用程序时，它也可以正常工作，并且已经创建了目录。

但是，它以前工作过，所以我猜有某种“超时”来保存远程计算机的凭据。

所以我想我的问题是：有什么方法可以更改连接字符串，使其包含嵌入在连接字符串中的凭据，这样我就不必每次都远程键入它们，然后启动我的应用程序？

就像是：

```
string outputPath = @"\\" + userName + ":" passWord + "@" + ipAddress+ "\\C\\NewDir";
Directory.CreateDirectory(outputPath); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:26:55.380

您需要使用 WNetAddConnection2 函数来设置您的凭据。

您将在其他帖子中找到实现目标的几种方法：

[连接到网络共享时如何提供用户名和密码](https://stackoverflow.com/questions/295538/how-to-provide-user-name-and-password-when-connecting-to-a-network-share)

# c++ - 运行 Magick++ 程序时内存冲突

> ID：14422970
> 
> 赞同：1
> 
> 时间：2013-01-20T08:48:12.903
> 
> 标签：c++, imagemagick

我在运行任何 Magick++ 程序时遇到问题，程序链接和编译成功，但是当我运行它们时，我收到以下错误。

内部调用堆栈选项卡：

```
CORE_RL_Magick++_.dll!6b004bca() 
[Frames below may be incorrect and/or missing, no symbols loaded for CORE_RL_Magick++_.dll] 
CORE_RL_Magick++_.dll!6affb2d8() 
>   button.exe!main(int __formal=-1990322582, char * * argv=0x53535330) Line 65 C++ 
```

内部输出选项卡：

```
'button.exe': Loaded 'C:\Windows\SysWOW64\msctf.dll'
First-chance exception at 0x6b004bca in button.exe: 0xC0000005: Access violation writing location 0x00bbd458.
Unhandled exception at 0x6b004bca in button.exe: 0xC0000005: Access violation writing location 0x00bbd458.
First-chance exception at 0x6b004bca in button.exe: 0xC0000005: Access violation writing location 0x00bbd458.
Unhandled exception at 0x6b004bca in button.exe: 0xC0000005: Access violation writing location 0x00bbd458. 
```

**这是我已经尝试过的事情。**

*   已经尝试重新安装 Visual Studio。
*   尝试了 Magick++ 的 x86 和 x64 版本。
*   当上述任何事情都不起作用时，我最终以完整的格式重新安装了操作系统。

但是在重新安装 OS 、 Visual Studio 和 Magick++ 后，我仍然遇到同样的错误。

这是什么访问冲突写入错误？

PS：我使用的是Windos 7 x64，并且我已经以管理员身份登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:07:49.723

“访问冲突写入”意味着您的程序试图写入它没有写入权限的地址。还存在读取和可能执行代码的访问冲突。你可以很容易地得到这个：

```
char* ptr = "foo";
strcpy(ptr, "bar"); 
```

建议：

*   创建程序的调试版本并查看堆栈跟踪以找出导致错误的调用顺序。
*   在网络上搜索此程序中的此错误以及您已找到的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:59:02.197

我建议从源代码构建 Magick++，然后将项目文件用于 Magick++ 测试/演示之一，作为如何为您自己的应用程序创建项目文件的示例。您是从源代码构建还是使用二进制安装包中准备好的 DLL？您使用的是 ImageMagick 还是 GraphicsMagick 的 Magick++？

Bob Friesenhahn（Magick++ 原作者）

# expression-web - 不受欢迎的自动完成行为

> ID：14422971
> 
> 赞同：0
> 
> 时间：2013-01-20T08:48:13.647
> 
> 标签：expression-web

Microsoft Expression 4 web 会自动在结尾添加代码，或者它会尝试猜测我正在输入的代码。

例如，如果我输入：

```
<a href="http://whatever.com 
```

它将添加：

```
</a> 
```

最后或者如果我输入：

```
<img 
```

我将在 crusor 旁边获得一个下拉菜单，其中包含以开头的代码列表`<img`

如何禁用此行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:53:49.647

去 `Tools > Page Editor Options > General Tab`

从那里`uncheck`

`Automatically enclose form fields within a form`

[来源：检查这里](http://www.expression-web-tutorials.com/ew4/setting-up-expression-web-4.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T20:33:16.443

转到工具 > 页面编辑器选项 > IntelliSense 并取消选中关闭标记、HTML 语句完成、CSS 状态完成等。在该页面中，您可以禁用程序执行的任何形式的自动完成。

# python-3.x - 导入 pandas 显示 ImportError: cannot import name hashtable

> ID：14422976
> 
> 赞同：26
> 
> 时间：2013-01-20T08:48:56.137
> 
> 标签：python-3.x, pandas

我在 python 3.3 上安装了 pandas，编码如下：

```
import csv
import pandas
from pandas import DataFrame

csvdata = pandas.read_csv('datafile.csv')
df = DataFrame(csvdata) 
```

它带有以下错误消息：

```
cannot import name hashtable
Traceback (most recent call last):
  File "C:\Users\document\test4.py", line 5, in <module>
    import pandas
  File "C:\Python33\lib\site-packages\pandas\__init__.py", line 6, in <module>
    from . import hashtable, tslib, lib
ImportError: cannot import name hashtable 
```

谁能帮我弄清楚如何解决这个错误？Python 和 pandas 安装成功。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-20T19:37:25.950

### [更新：我现在建议使用Anaconda](http://docs.continuum.io/anaconda/)安装科学的 Python 堆栈。

Pandas 捆绑在一起，可以使用 conda 轻松更新：

```
conda update pandas 
```

它还与 cython、scipy（很难通过 pip 安装）、statsmodels 捆绑在一起，并为您管理这些包之间的依赖关系/关系。

*值得强调的是，您不需要 admin/sudo 访问权限即可在机器上安装它来安装 Anaconda。*

* * *

如果您不使用 Anaconda，推荐的[安装 pandas](http://pandas.pydata.org/pandas-docs/stable/install.html#overview)的方法是通过 pip（在 Mac 和 Windows 上）：

```
pip install pandas 
```

*在 Linux 上，您也可以`python-pandas`在任何存储库中安装，但请注意您可能正在安装旧版本的 pandas，理想情况下您应该使用最新的稳定版本。*

* * *

看起来您已尝试[从 source 安装](http://pandas.pydata.org/pandas-docs/stable/install.html#installing-from-source)，文档提到：

> 从 git 存储库**安装需要最近安装 Cython，因为 cython 化的 C 源代码不再签入源代码控制**。已发布的源代码分发版将包含已构建的 C 文件。我建议通过安装最新的 Cython`easy_install -U Cython`
> 
> 请注意，如果您在源目录中打开解释器，**您将无法导入 pandas ，****除非您在适当的位置构建 C 扩展**：
> 
> ```
> python setup.py build_ext --inplace 
> ```

*如果不编译[`hashtables.pyx`](https://github.com/pydata/pandas/tree/master/pandas)（以及其他一些 cython 文件），pandas 将无法导入它们。这些是 pandas 所必需的（这解释了您的错误消息）。*

*注意：[对于 0.11.1 及更高版本，此错误消息更具描述性](https://github.com/pydata/pandas/pull/3827)，它会说未构建 C 扩展。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T19:41:05.417

这里的熊猫 Python 3.3 二进制文件[http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)似乎没有编译成功。我没有时间配置我的构建机器来构建和测试 Python 3.3 二进制文件，但我知道在其他平台上的 Python 3.3 上也能正常工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-09T14:18:00.087

当我尝试安装 pandas 0.13.1 时，我也遇到了同样的问题。它已安装但我无法导入它。

正如@danioyuan 建议的那样，我使用easy_install 安装了Cython，现在我可以导入熊猫了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-03-03T20:32:25.660

我已经尝试了上面所有的东西，对我没有用。

你可以改变你的`pandas`版本

```
pip install --user pandas==0.22 
```

只有这对我有用:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-24T06:41:25.387

我遇到了同样的问题。我使用命令 pip install pandas 安装了熊猫。

默认情况下，我的 pip 在 python3.2 的 dist-packages 中安装了 pandas，我的默认 python 版本是 2.7。结果当我做python打开交互式shell并尝试做

```
 import pandas

 File "<stdin>", line 1, in <module>
 File "/usr/local/lib/python3.2/dist-packages/pandas/__init__.py", line 6, in <module>
 from . import hashtable, tslib, lib
 ImportError: cannot import name hashtable 
```

解决我的问题是：

```
 python3.2
 import pandas 
```

请检查您是否使用相同的 Python 版本，其 dist-packages 包含 pandas。

# matlab - 理解 SVM 光输出（matlab）

> ID：14422980
> 
> 赞同：1
> 
> 时间：2013-01-20T08:49:51.227
> 
> 标签：matlab, machine-learning, svm

我`SVM-light`在 matlab 上使用，我有兴趣`W`自己提取结果（而不是使用内置`predict`函数）。结果是一个结构

*   `model.supvec`，支持向量，但增加了一个全零向量（我不知道为什么它有好处）。

*   `model.a`并且`model.alpha`似乎系数在 中`model.a`，所以我不知道存储在什么中`model.alpha`。

*   `model.index`，我理解为保留支持向量的索引，即什么系数与什么支持向量相匹配，但除此之外还有很多数字`1:num(suuport vectors)`（有时我得到一个索引出现两次但系数为零）。

总而言之，我无法弄清楚其中的一半（但到目前为止它工作得非常好）。任何人都知道所有这些数据意味着什么？

# postgresql - 无法通过 JDBC 连接到 postgreSQL

> ID：14422990
> 
> 赞同：0
> 
> 时间：2013-01-20T08:51:49.897
> 
> 标签：postgresql

在这几天我无法连接到我的本地机器上的我的 postgreSQL 数据库，运行 mac os ML。

我的机器的 nmap 显示 postgres 正在 5432 上运行，我可以通过 pgadmin 和 psql 在本地连接。

```
pg_hba.conf file for postgres    
local   all             all                                     trust    
host    all             all             127.0.0.1/32           trust    
host    all             all             192.168.0.2/16            trust 
```

监听地址设置为 *

当我尝试连接 JDBC 时出现以下异常

org.postgresql.util.PSQLException：连接被拒绝。检查主机名和端口是否正确以及 postmaster 是否接受 TCP/IP 连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:59:44.583

在对这些类型的问题进行故障排除时，请按顺序检查以下内容：

1.  你能从局域网上的另一台机器连接到 PostgreSQL 吗？如果不是，那可能不是监听地址？

2.  可以本地连接吗？它甚至在运行吗？

现在，在第二个成功而第一个失败的情况下，请按顺序检查以下内容：

1.  `listen_address`在 postgresql.conf 中

2.  防火墙规则

3.  介于两者之间的任何东西都可能会干扰网络连接。

# javascript - Javascript xsltProcessor transformToFragment 异步（Firefox），如何控制何时完成？

> ID：14422994
> 
> 赞同：0
> 
> 时间：2013-01-20T08:52:32.500
> 
> 标签：javascript, asynchronous, firefox, xslt-1.0

我正在使用 Firefox 的 XSLT 引擎转换一个大型 XML 文档。当这个文件对于 Firefox 来说太大时，浏览器就会冻结（在 Mac Os - i7 中比在 Windows - core 2 duo 中要早得多，令人惊讶）。

作为一种简化流程的方法，我将 XML 文件分成小部分，并依次转换它们。这大大改善了事情（和速度）。但是，当文件仍然很大时，我有同样的症状。

现在，我认为正在发生的是该`transformToFragment`函数是异步的。这意味着我在前一个转换完成之前开始下面的转换，最后它阻止了浏览器（实际上也阻止了计算机）。

然后，在继续该过程之前，我找不到任何可以依赖的事件。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:31:58.157

最后，它似乎不是异步的。我试图控制它每 x 秒检查一次响应的值，但在 transformToFragment 过程结束之前我没有检查任何内容。

我仍然无法避免此过程冻结浏览器和计算机。现在我希望这个过程是异步的。无论如何，这与这个“错误”的问题无关。

# vb6 - 从弹出菜单错误中卸载项目

> ID：14422996
> 
> 赞同：2
> 
> 时间：2013-01-20T08:52:36.910
> 
> 标签：vb6, popupmenu

我收到了这个错误

> “无法在此上下文中卸载”

每当我尝试像他一样从弹出菜单中卸载菜单项时

```
For i = mnuTCategory.Count - 1 To 1 Step -1
       Unload mnuTCategory(i)
Next 
```

有没有办法做到这一点没有这个错误>？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:30:26.763

为了能够从 a 中删除控件`Form`，当被 a 触发时`ComboBox`，您将需要通过 a 执行删除操作`Timer`。

因此，当`ComboBox`要触发事件时，启动（启用）一个`Timer`在触发时调用您首先要调用的子例程。

这就是代码的样子：

```
Private Sub MyCombo_Change()
    MyTimer.Enabled = False
    MyTimer.Enabled = True
End Sub

Private Sub MyTimer_Timer()
    MyTimer.Enabled = False
    DeleteMenuItems
End Sub

Private Sub DeleteMenuItems()
    Dim i As Intener
    For i = mnuTCategory.Count - 1 To 1 Step -1
       Unload mnuTCategory(i)
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:22:23.980

我下面的测试项目对我来说没有错误，它对你有用吗？

```
'1 form with :
'    1 command button : name=Command1
'    1 main menu item : name=mnuMain
'    1 sub menu item  : name=mnuSub    index=0
Option Explicit

Private Sub Command1_Click()
  Dim intIndex As Integer
  For intIndex = mnuSub.Count - 1 To 1 Step -1
    Unload mnuSub(intIndex)
  Next intIndex
End Sub

Private Sub Form_Load()
  Dim intIndex As Integer
  For intIndex = 1 To 3
    Load mnuSub(intIndex)
    mnuSub(intIndex).Caption = "Sub" & CStr(intIndex)
  Next intIndex
End Sub 
```

## 编辑

有趣的！下面的 testproject 给出了同样的错误：它确实是由从组合框调用卸载引起的。

```
'1 form with :
'    1 combobox       : name=Combo1
'    1 main menu item : name=mnuMain
'    1 sub menu item  : name=mnuSub    index=0
Option Explicit

Private Sub Combo1_Click()
  Dim intIndex As Integer
  With Combo1
    Select Case .ListIndex
      Case 0 'add
        For intIndex = 1 To 3
          Load mnuSub(intIndex)
          mnuSub(intIndex).Caption = "Sub" & CStr(intIndex)
        Next intIndex
      Case 1 'del
        For intIndex = mnuSub.Count - 1 To 1 Step -1
          Unload mnuSub(intIndex)
        Next intIndex
    End Select
  End With 'Combo1
End Sub

Private Sub Form_Load()
  With Combo1
    .AddItem "add"
    .AddItem "del"
  End With 'Combo1
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:51:22.720

这让我很感兴趣，但我找不到比使用另一个控件更简洁的解决方案，这个控件可以是您已经在表单上拥有的控件，也可以是仅用于此目的的虚拟控件。然后您可以使用组合框的 lostfocus 事件

请参阅下面的测试项目：

```
'1 form with :
'    1 combobox       : name=Combo1
'    1 textbox        : name=Text1
'    1 main menu item : name=mnuMain
'    1 sub menu item  : name=mnuSub    index=0
Option Explicit

Private Sub Combo1_Click()
  Dim intIndex As Integer
  With Combo1
    Select Case .ListIndex
      Case 0 'add
        For intIndex = 1 To 3
          Load mnuSub(intIndex)
          mnuSub(intIndex).Caption = "Sub" & CStr(intIndex)
        Next intIndex
      Case 1 'del
        Text1.SetFocus
    End Select
  End With 'Combo1
End Sub

Private Sub Combo1_LostFocus()
'use the lostfocus event to unload stuff
  Dim intIndex As Integer
  For intIndex = mnuSub.Count - 1 To 1 Step -1
    Unload mnuSub(intIndex)
  Next intIndex
End Sub

Private Sub Form_Load()
  With Combo1
    .AddItem "add"
    .AddItem "del"
  End With 'Combo1
End Sub

Private Sub Text1_GotFocus()
  Combo1.SetFocus
End Sub 
```

# objective-c - 以一种奇怪的方式变成 0 的整数

> ID：14422997
> 
> 赞同：1
> 
> 时间：2013-01-20T08:52:45.090
> 
> 标签：objective-c, c

我有一个整数：（`xcode`用于 iPhone）。

```
int wordCounter=1; 
```

后来，当我用它填充数组时——作为一个指针，在一个 for 循环中，它变成某个数字后不知何故变成了 0。我已经多次检查我的程序是否存在错误，并且我意识到我什至在任何地方都没有减少它。我有 `wordCounter++`。

现在我已经看到我有很多这样的行，在它们之后它变成 0 ：

```
if(tempBinary[countWords-1][j] != tempBinary[countWords][j]) 
```

所以我在想，`countWords-1`一次又一次地减少它，这可能吗？在我的整个程序中，我没有对此变量进行任何其他减量或初始化。我可以看到，当`tempBinary`定义为大小 7 时，它初始化为 5，如果`tempBinary`是 5，它在 3 处归零 .. 数组是否有可能溢出并归零？我不这么认为。。

这里有什么问题？谢谢 。

**编辑**（有问题的状态之一）

```
int countWords=1;  
 int stabilityK=0;

tempBinary[0][0]= tempBinary[0][1]=tempBinary[0][2]=tempBinary[0][3]=tempBinary[0][4]=tempBinary[0][5]=tempBinary[0][6]=tempBinary[0][7]=1 ;

for(int k=0;k<numOfBuffers;k++)
{
    NSLog(@"countwords:%d",countWords-1);
    float *temp=getFFT(buffersRing[k],buffersRing[k][0]);
    for(int j=0;j<wordSize;j++)
    {

        switch(state_on_signal)
        {

            case WAIT_FOR_SECOND_CHANGE:
                //get new word
                if(temp[goodBins[j]] > decisionLine[j])
                    tempBinary[countWords][j]=1;
                else
                    tempBinary[countWords][j]=0;

                if(tempBinary[countWords-1][j] != tempBinary[countWords][j])
                    newData=1;
                  NSLog(@"s1: countwords:%d",countWords-1);
                if(j==wordSize-1)
                {
                    NSLog(@"s2: countwords:%d",countWords-1);
                    NSLog(@"PRE TEMP:%d%d%d%d%d%d%d%d",tempBinary[countWords-1][0],tempBinary[countWords-1][1],tempBinary[countWords-1][2],tempBinary[countWords-1][3],tempBinary[countWords-1][4],tempBinary[countWords-1][5],tempBinary[countWords-1][6],tempBinary[countWords-1][7] );
                    NSLog(@"NEW TEMP-WAIT FOR SECOND CHANGE :%d%d%d%d%d%d%d%d",tempBinary[countWords][0],tempBinary[countWords][1],tempBinary[countWords][2],tempBinary[countWords][3],tempBinary[countWords][4],tempBinary[countWords][5],tempBinary[countWords][6],tempBinary[countWords][7] );

                    NSLog(@"s3: countwords:%d",countWords-1);
                    //TAKE NEW DATA
                    if(newData==1)
                    {
                             NSLog(@" TOOK new BINARY at current k:%d, so took data at: %d",k,(k+markedK)/2);

                        for(int s=0;s<wordSize;s++)
                        {
                            if( getFFT(buffersRing[(k+markedK)/2],buffersRing[(k+markedK)/2][0])[goodBins[s]  ]  >decisionLine[s] )
                              binary[countWords-1][s]=  1;
                               else
                                binary[countWords-1][s]=  0;

                        }
                        NSLog(@"s4: countwords:%d",countWords-1);
                        NSLog(@"BINARY%d: %d%d%d%d%d%d%d%d :%d",(countWords-1), binary[(countWords-1)][0], binary[(countWords-1)][1], binary[(countWords-1)][2], binary[(countWords-1)][3], binary[(countWords-1)][4], binary[(countWords-1)][5], binary[(countWords-1)][6], binary[(countWords-1)][7],[self getDecimal:binary[countWords-1]]);

                            countWords++;
                            markedK=k;
                            state_on_signal=WAIT_FOR_STABILITY;

                    }
                    newData=0;

                }
                break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T23:22:04.180

> 所以我在想 countWords-1 一次又一次地递减它，这可能吗？

不

*通常*，当您误用指针并将值写入内存中的错误地址时，就会发生这种情况。

例如：在哪里以及如何声明**tempBinary**？

由于（至少对我而言）不可能仅查看您的代码就看到问题，我建议您使用调试器逐步检查您的代码并查看**countWords 何时**更改。这就是问题所在（至少其中一个）。

# vb.net - DateTime.Date（长值）

> ID：14422998
> 
> 赞同：-1
> 
> 时间：2013-01-20T08:52:47.480
> 
> 标签：vb.net, date, datetime, basic4android

我花了好几个小时仍然无法理解这一点：

```
Dim unix_time_at_midnight As Long
DateTime.DateFormat = "MM/dd/yyyy"   
unix_time_at_midnight = DateTime.DateParse(DateTime.Date(unix_time*1000))/1000 
```

其中 unix_time_at_midnight 和 unix_time 都是长值。我了解`DateTime.DateParse`String 除外并将其转换为 DateTime。返回什么`(DateTime.Date(unix_time*1000))/1000`以及它在 Java 中的等价物是什么？要求是获取自格林威治标准时间午夜以来的秒数，我已经在 J​​ava 中成功实现了它。但是，我想了解这行用 VB.net 编写的特定代码

编辑：这个方法是用[Basic4Android编写的，可能比](http://www.basic4ppc.com/android/wiki/index.php/DateTime)[vb.net](http://msdn.microsoft.com/en-US/library/system.datetime_methods%28v=vs.80%29.aspx)构成更多的库。但是，我已经查看了每个细节，但无法理解。如果您能详细说明，将不胜感激。请查看链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:59:54.940

拿着这个：

```
DateTime.Date(unix_time*1000) 
```

文档说：

> **日期（滴答声）作为字符串**
> 
> 返回日期的字符串表示形式（存储为刻度）。可以使用 DateFormat 关键字设置日期格式。

所以该部分返回一个表示日期的*字符串。*

然后它使用`DateTime.DateParse`，记录为：

> **DateParse（日期作为字符串）只要**
> 
> 解析给定的日期字符串并返回其刻度表示。

* * *

总而言之，这似乎将滴答声乘以 1000，转换为不包含小时信息的字符串，该字符串被解析回除以 1000 的滴答声。

需要注意的重要一点是，`DateFormat`前行的集合仅包含日期的格式，其中不存在小时/分钟/秒和更小的时间单位。这意味着返回的字符串基本上代表该日期的午夜。

# java - 在类路径中找不到 GWTTestCase

> ID：14422999
> 
> 赞同：0
> 
> 时间：2013-01-20T08:53:06.627
> 
> 标签：java, gwt, junit

我正在使用 eclipse juno 和 gwt 2.5， 当我创建由 GWTTestCase 扩展的测试类时，我遵循[gwt Junit 测试教程，我收到以下消息：](https://developers.google.com/web-toolkit/doc/latest/tutorial/JUnit)

`Description Resource Path Location Type The project was not built since its build path is incomplete. Cannot find the class file for junit.framework.TestCase. Fix the build path then try building this project homeopathischeAnwendung Unknown Java Problem`

该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T22:28:00.857

我找到了解决方案。我一开始犯了一个错误。

我下载了 junit.jar 并将其添加到构建路径中。那是错误的。用eclipse添加junit的正确方法是在gwt.project上的包资源管理器中右键->构建路径->添加库->JUnit。

我犯的第二个错误是我的测试班所在的位置。我创建了一个名为“Test”的额外文件夹，并在此文件夹中放置了带有 Test-Class 的包。那也是错误的。

```
MyGwtApplication
src
    package.number.one
        MyGwtApplication.gwt.xml
    package.number.one.client
        MyGwtApplication.java
test
    package.number.one.testing
        MyTestClass.java 
```

那是假的！

测试类必须在 src 文件夹中

```
MyGwtApplication
src
    package.number.one
        MyGwtApplication.gwt.xml
    package.number.one.client
        MyGwtApplication.java
    package.number.one.client.testing
        MyTestClass.java 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T09:02:10.040

您的类路径中缺少 Junit：http: [//junit.sourceforge.net/](http://junit.sourceforge.net/)

或 Maven 依赖项：

```
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.11</version>
    <scope>test</scope>
</dependency> 
```