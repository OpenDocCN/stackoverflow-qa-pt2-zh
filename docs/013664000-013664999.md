# StackOverflow 问答 13664000-13664999

# gnuplot - Gnuplot：如何在曲线拟合后隐藏数据点

> ID：13664000
> 
> 赞同：0
> 
> 时间：2012-12-01T21:38:07.280
> 
> 标签：gnuplot

这应该很简单，但我似乎找不到答案。我有一个已成功拟合曲线的数据文件。现在我想显示曲线，而不是单个数据点。我怎么做？这就是我现在所拥有的。

```
f1(x) = a1 + b1*exp(x/c1)
a1 = 1
b1 = 10
c1 = 1000
fit f1(x) 'datafile.txt' using 1:2 via a1, b1, c1
plot f1(x) , "datafile.txt" 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T21:49:33.353

在最后一行中，您指示 gnuplot 绘制拟合函数 f1(x) 和文件中的数据点。如果省略文件名，则不会绘制点。

因为它不再知道数据的范围，所以它不会使用相同的范围。因此，您需要明确设置范围，例如：

```
plot [0:100] f1(x) 
```

# html - div即使溢出也添加滚动条：隐藏

> ID：13664007
> 
> 赞同：2
> 
> 时间：2012-12-01T21:38:58.033
> 
> 标签：html, css

我想要做的是有一个全屏背景，上面有一个径向图像，没有滚动条。现在它有点工作。我的意思是带有径向渐变（img）的 div 会添加一个滚动条，即使溢出：隐藏。

```
html { 
background: url(background.jpg) no-repeat center center fixed; 
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover
}

#glow{
width:1043px;
height:763px;
position:absolute;
left:50%;
top:50%;
background-image: url('outer_glow.png');
margin-left:-543px; /* Negative half the width*/
margin-top:-381px; /* Negative half the height */
overflow: hidden;
} 
```

我想要做的是，如果图像径向太大而无法将其切断并将其居中。但目前它仍然在我的浏览器中显示一个垂直条。下面的html

```
<!DOCTYPE html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="styleit.css" rel="stylesheet">
<title>Title</title>
</head>
<body>
<div id="glow"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T21:49:45.490

这里的问题是您没有考虑到 DOM 树中的最后一个节点是`body`元素。

发生的情况是，当您调整窗口大小时，主体会看到它的子项比自己大，因此它会显示滚动条。

尝试将此添加到您的 CSS 中：

```
body {
  overflow: hidden;
} 
```

# .net - 继承树上的反序列化顺序

> ID：13664008
> 
> 赞同：3
> 
> 时间：2012-12-01T21:39:04.563
> 
> 标签：.net, deserialization

我有一个标记的基类`Serializable`，也标记了派生类`Serializable`。我想在反序列化期间在基类中做一些事情，因此声明了一个标记为的方法`OnDeserializing`，但重要的是该方法将在任何派生类的`OnDeserializing`方法之前执行。
派生类也可能由其他人编写。
我可以相信基类的方法将在派生类中的任何序列化方法之前被调用吗？
我会`SoapFormatter`用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T21:57:24.720

我要冒险说它可能会首先找到派生方法，而不是基于我所看到的将反射用于其他目的的基本方法。我建议您可能希望显式调用子级的基本行为，而不是依赖于标记有该属性的方法的任何顺序。如果较低级别的对象是直接可实例化的，而不是抽象的，因此也可能具有 OnDeserializing 标记的方法，您可能需要设置标志以指示该级别是否已被处理。

# java - Java - 红、绿、蓝获取RGB

> ID：13664011
> 
> 赞同：3
> 
> 时间：2012-12-01T21:39:24.833
> 
> 标签：java, rgb, bufferedimage

通过调用`getRGB(int x, int y)`一个`BufferedImage`对象，可以得到一个单一的负数。

如何将三个不同的值（红色、绿色和蓝色）转换为这个单一的负数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T21:41:11.153

使用颜色类：

```
new Color(r, g, b).getRGB() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T21:41:58.077

BufferedImage 最终委托给`java.awt.image.ColorModel`which 使用以下代码：

```
public int getRGB(Object inData) {
    return (getAlpha(inData) << 24)
        | (getRed(inData) << 16)
        | (getGreen(inData) << 8)
        | (getBlue(inData) << 0);
} 
```

修改它以满足您的需求是一项简单的练习。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-04-16T11:37:56.877

**JB Nizet 的回答很棒**，但是在创建数千次“颜色”类型的新对象时可能会非常慢。最简单的方法是：

```
int rgb = (red << 16 | green << 8 | blue) 
```

正如[ByteBit所回答的那样](https://stackoverflow.com/a/24596140/3496570)

# objective-c - 在 IOS 5 中使用 JSON 解析

> ID：13664013
> 
> 赞同：-1
> 
> 时间：2012-12-01T21:40:00.667
> 
> 标签：objective-c, json, ios5

> **可能重复：**
> [iPhone/iOS JSON 解析教程](https://stackoverflow.com/questions/5813077/iphone-ios-json-parsing-tutorial)

我正在尝试在我的 IOS 5 应用程序中解析以下 JSON 信息；

```
[
    {
    "name":"Aranmore",
    "pressures":[
        "1019.000"
    ],
    "temps":[
        "8.600"
    ],
    "waterLevels":[
        "0.726"
    ],
    "dates":[
        "01/12/2012 21:00:00"
    ]
},
{
    "name":......
} 
```

我可以从数组中获取名称以填充表格视图，当用户选择单元格时，我希望与名称关联的附加信息在另一个视图中填充标签。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:07:19.993

我认为最好的方法是子类化`UITableViewCell`并创建具有`NSArray`or类型的新属性`NSMutableArray`。在此属性中，将此对象从 JSON 数组中放入。然后，如果您想在将来使用这些数据，您可以简单地从选定的单元格中获取这些数据。您选择单元格并从例如读取数据`cell.data`。简单的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T22:27:57.823

如果您将 jSON 解析为 NSArray，则当用户点击您可以使用的单元格时（在 didselect... 方法中）

```
objClass *obj = [yourArray objectAtIndex:indexpath.row]; 
```

并且您拥有带有信息的对象。

# jquery - JQuery 自动完成和克隆

> ID：13664020
> 
> 赞同：7
> 
> 时间：2012-12-01T21:40:39.017
> 
> 标签：jquery, autocomplete, clone

使用 jQuery 克隆时，我在尝试将 jQuery AutoComplete 应用于表中的多行时遇到问题。AutoComplete 在第一行上工作，但在向表中添加其他行时无法工作。到目前为止，我有以下内容：

HTML表格：

```
 <table class="table" cellspacing="0" id="myTable">
      <tr> 
        <th width="40%">Item</th> 
        <th width="60%">Description</th> 
      </tr> 
      <tr>
        <td>input name="product_title" id="product_title" type="text"><td> 
        <td><textarea name="product_description" id="product_description"></textarea></td> 
      </tr> 
    </table>
   <input type="button" value="Add Row" onclick="javascript:addRow()"> 
```

克隆脚本：

```
function addRow(){
  $('#myTable tr:last').clone(true).insertAfter('#myTable tr:last');
  $('#myTable tr:last input').val("");
  $('#myTable tr:last input:first').focus();        
} 
```

自动完成脚本：

```
$().ready(function() {
  $("#product_title").autocomplete(products, {
    width: 380,
    matchContains: "word",
    formatItem: function(row) {
      return row.title;
    }
  });   
  $('#product_title').result(function(event, data) {
  $('#product_description').val(data.description);
  });   
}); 
```

自动完成的数据是从一个简单的 MySQL 查询中提取的，该查询定义了产品标题和描述。

目前，添加新行工作正常，表第一行的自动完成也是如此，但是它无法在添加的任何其他行上工作。即使我手动将第二行添加到 HTML 表中，AutoComplete 也不起作用。

有谁知道是否有一种（简单的）方法可以修改上述代码以使其工作？我是 jQuery 的新手，所以越详细越好。

提前致谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T22:05:35.837

这是在动态添加的元素上使用插件的常见问题。它通常需要在新元素插入 DOM 后调用插件。无需为初始页面加载元素和新元素复制相同的代码，您通常可以创建一个简单的辅助函数，该函数使用父元素作为主要引用，并仅在该元素中搜索要应用插件的元素。

**重要提示：**当您克隆新行时，您正在重复 ID，并且根据定义，ID 在页面中必须是唯一的。以下代码将您的 ID 更改为 class，您需要在标记中执行相同操作。

```
var $table;
$(function() {
     $table=$('#myTable'); 
     var $existRow=$table.find('tr').eq(1);
      /* bind to existing elements on page load*/
      bindAutoComplete($existRow);
});

function addRow(){
    var $row=$table.find('tr:last').clone(true);
    var $input=$row.find('input').val("");
    $table.append($row);
    bindAutoComplete($row );
    $input.focus();

}

function bindAutoComplete($row ){
    /* use row as main element to save traversing back up from input*/
    $row.find(".product_title").autocomplete(products, {
        width: 380,
        matchContains: "word",
        formatItem: function(row) {
            return row.title;
        }
    });
    $row.find('.product_title').result(function(event, data) {
        $row.find('.product_description').val(data.description);
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-20T13:06:20.057

我认为问题在于，`clone()`您克隆了一个元素，该元素已经具有自动完成属性，然后自动完成无法将“再次”添加到新元素。我认为你不应该`clone()`，你应该使用元素的原始 HTML 代码并将其放入。

**编辑：**

我如何修复它：

1.  `autocomplete("destroy")`对于您要克隆的原始输入字段。
2.  克隆您的元素并为其添加自动完成功能

并且不要使用`clone(true)`，但你可以使用`clone()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T01:37:49.513

Charlietfl 的帖子解决了我的问题，我唯一要做的改变是替换：

`var $row=$table.find('tr:last').clone(true);`

和

`var $row=$table.find('tr:last').clone();`删除`true`.

希望这对其他人有帮助:)

# java - Eclipse 中的 Storm 集群关闭

> ID：13664029
> 
> 赞同：4
> 
> 时间：2012-12-01T21:41:39.483
> 
> 标签：java, real-time, distributed-computing, apache-storm

我有一个问题。我理解麻烦，但我没有找到解决方案。集群没有关闭，抛出 IOException。I/O 方法不起作用，因为 Windows 不允许临时文件夹。我的意思是这条路径；

> C:\Users\Mert\AppData\Local\Temp\8bbdc8e5-a753-40f3-afe0-0c2fcc1c25a0\version-2\log.1

Storm 能够删除日志文件以进行关机。

我尝试了 Eclipse.exe 和 javaw.exe 的管理员模式，但它不起作用。我该怎么办？

**IO 异常堆栈跟踪：**

> exception.detailMessage -> java.io.IOException：无法删除文件：C:\Users\Mert\AppData\Local\Temp\c3c9b21b-7817-4b63-92ae-555a49743d9d\version-2\log.1
> 
> exception.stackTrace -> StackTraceElement[0] (id=130)

**运行后控制台输出：**

```
java.io.IOException: Unable to delete file: C:\Users\Mert\AppData\Local\Temp\0edc7fc7-590f-452c-8f99-231b95a64a19\version-2\log.1
    at org.apache.commons.io.FileUtils.forceDelete(FileUtils.java:1390)
    at org.apache.commons.io.FileUtils.cleanDirectory(FileUtils.java:1044)
    at org.apache.commons.io.FileUtils.deleteDirectory(FileUtils.java:977)
    at org.apache.commons.io.FileUtils.forceDelete(FileUtils.java:1381)
    at org.apache.commons.io.FileUtils.cleanDirectory(FileUtils.java:1044)
    at org.apache.commons.io.FileUtils.deleteDirectory(FileUtils.java:977)
    at org.apache.commons.io.FileUtils.forceDelete(FileUtils.java:1381)
    at backtype.storm.util$rmr.invoke(util.clj:413)
    at backtype.storm.testing$kill_local_storm_cluster.invoke(testing.clj:163)
    at backtype.storm.LocalCluster$_shutdown.invoke(LocalCluster.clj:25)
    at backtype.storm.LocalCluster.shutdown(Unknown Source)
    at WordCountTopology.main(WordCountTopology.java:83) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T07:12:35.150

nathanmarz 的回复：

[https://github.com/nathanmarz/storm/pull/102](https://github.com/nathanmarz/storm/pull/102)

也许你需要一个蝙蝠来清除日志。

# ios - 将 MPVolumeView 添加到底部工具栏

> ID：13664033
> 
> 赞同：1
> 
> 时间：2012-12-01T21:42:27.273
> 
> 标签：ios, subview, mpvolumeview

我正在尝试将 MPVolumeView 的实例添加到导航控制器的底部栏。（工具栏框已打勾）我的代码没有出现任何错误，但是当我在设备上运行项目时，音量滑块不是显示。提前感谢您的任何建议，这是我的代码：

```
@interface ViewController ()
{
AVPlayer *vPlayer;
AVPlayerItem *playerItem;
UISegmentedControl *segm;
UIToolbar *toolbar;
}
@end

@implementation ViewController
@synthesize myViewVolume;
@synthesize nowPlaying;

- (void)viewDidLoad
{
[super viewDidLoad];
playerItem = [AVPlayerItem playerItemWithURL:[NSURL URLWithString:@"http://vibesradio.org:8000  /listen.pls"]];
vPlayer = [[AVPlayer alloc] initWithPlayerItem:playerItem];
[playerItem addObserver:self forKeyPath:@"timedMetadata" options:NSKeyValueObservingOptionNew context:NULL];

//self.myViewVolume = [[MPVolumeView alloc] initWithFrame:CGRectMake(20, 330, 280, 50)];

self.myViewVolume = [[MPVolumeView alloc] initWithFrame: toolbar.bounds];
[self.myViewVolume sizeToFit];
[self.view addSubview:toolbar];
[toolbar addSubview:self.myViewVolume];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T21:46:14.270

您不能将子视图添加到工具栏。您必须添加一个 UIBarButtonItem，其视图是您要显示的视图。

```
UIBarButtonItem* b = [[UIBarButtonItem alloc] initWithCustomView: myVolumeView];
myToolbar.items = @[b]; 
```

这与 MPVolumeView 无关。您想添加到工具栏或导航栏的任意视图*都是*如此。

这是在我的设备上为导航界面中的视图控制器工作的实际代码：

```
MPVolumeView* vv = [[MPVolumeView alloc] initWithFrame: CGRectMake(0, 0, 150, 40)];
UIBarButtonItem* b = [[UIBarButtonItem alloc] initWithCustomView: vv];
self.toolbarItems = @[b];
self.navigationController.toolbarHidden = NO; 
```

还要注意，您必须在设备上进行测试；模拟器中没有音量视图的界面。:(

# html - HTML5 布局 - 如何让它在 Internet Explorer 中也能正常工作？

> ID：13664041
> 
> 赞同：-2
> 
> 时间：2012-12-01T21:44:55.053
> 
> 标签：html, css

在所有浏览器中都可以按照我想要的方式进行操作，但在 IE 中却没有。在 IE 中，内容显示在菜单下方，并且不显示标题。是否有一个简单的方法让它在 IE 中也能正常工作？

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script src="jquery-1.8.2.min.js"></script>
<script src="a_script.js"></script>
<link rel="stylesheet" media="all" href="a_css.css">
<link rel="stylesheet" media="all" href="form.css">
<script src="jquery.tipTip.js"></script>
<link rel="stylesheet" media="all" href="tipTip.css"> 
<title>andierni.ch</title>

</head>
<body>

<header class="shadow">

<hgroup>

    <h1>'</h1>

    <!--[if lte IE 8]>
        <a>Bitte besuchen Sie diese Seite mit einem modernen Browser.</a>
        <p>Meine Empfehlung ist Firefox: <a href="http://www.mozilla.org/de/firefox/new/">Mozilla Firefox Download</a></p>
         <a>IE Nutzer: Ziehen Sie den Mauszeiger links weg vom Menü, um zum Inhalt zu gelangen.</a>
    <![endif]-->

</hgroup>    

</header>

<aside>

<p id="home">Home</p>
<p id="blogs">Blogs</p>
<p id="homepages">Homepages</p>
<p id="apps">Mobile Apps</p>
<p id="facebook">Facebook & Co.</p>
<p id="kontakt">Kontakt</p>    

</aside>

<div id="content" class="shadow">

    <img src="fuss2.png" alt="digital footprint" id="foot">

    <article id="welcome">

        <h1>andierni.ch</h1>
        <br>
        <br>
        <br>
        <h2 id="textcolor">Welcome to my digital footprint!</h2>
        <br>
        <br>
        <p>Diese Seiten geben einen Überblick</p>
        <p>über meine Web-Aktivitäten.</p>
    </article>

    <article id="browser">

        <a>Bitte besuchen Sie diese Seite mit einem modernen Browser.</a>
        <p>Meine Empfehlung ist Firefox: <a href="http://www.mozilla.org/de/firefox/new/">Mozilla Firefox Download</a></p>

    </article>

</div>

<footer>
<p class="copyright">
&copy; 2012 Andreas Erni
</p>
</footer>

</body>

</html> 
```

这里是 CSS：

```
body {
font-family: sans-serif;
font-size: 130%;
width: 90%;
margin: auto;
background-color: #EEE;
}
header, aside, #content, footer {
background-color: #FFF;
}

/* display: block for new elements
not needed for browsers supporting them
*/
header, hgroup, article, aside, section, nav, footer {
display: block;
}

header {
margin: 10px 0px 3px 0px;
border: 1px solid #CCC;
padding-left: 10px;

}
header img {
float: left;
padding: 5px;
width: 20%;
height: 20%;
}

header h1 {
margin: 10px 0px 10px 0px;

}

aside {
border: 1px solid #CCC;
float: left;
width: 17%;
font-size: 0.9em;
padding: 10px 10px 10px 10px;
}

#content {
border: 1px solid #CCC;
float: right;
width: 80%;
margin-bottom: 3px;
line-height: 0.3em; 
}

#content h2 {

font-size: large;
}

#content h3 {

font-size: small;
}

#content p, a {

font-size: smaller;
}

article {
padding: 0px 10px 0px 20px;
display: block;
}
article img {
float: left;
padding: 0px 10px 10px 0px;
}
article p, a {
text-align: left !important;
line-height: 1em !important;
}

footer {
background-color: #EEE;
width: 100%;
text-align: left;
font-size: 0.8em;
}

footer .copyright {
float: left;
margin-top: 3px;
padding-left: 3px;
font-size:0.9em;
color:#666;
}

.shadow {
-moz-box-shadow: 4px 0px 10px -3px silver;
-webkit-box-shadow: 4px 0px 10px -3px silver;
box-shadow: 4px 0px 10px -3px silver;
}

section {

display: block;
line-height: 1em;

}

section h1 {

padding: 20px;
margin-top: 10px !important;

}

.hover {

color: royalblue;

}

.tag {

float: right;
padding-left: 3px;

}

p, a {
line-height: 1.0em !important;
}

.abstand {

line-height: 1em;

}

.empty{

color: white;

}

#foot {

float: right;
margin-top: 50px;
margin-right: 50px;

}

#browser {

display: inline-block;
vertical-align: bottom;

}

#welcome{

float: left;
margin-top: 40px;

}

#welcomeB{

float: left !important;

}

#textcolor {

color: olivedrab;

}

header {

background: url("pA7.png");
background-color: white;

}

hgroup h1 {color: white;} 
```

将不胜感激任何帮助。谢谢，安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:01:08.500

对于 IE8，你需要一个 html5shiv。

[http://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T22:05:10.970

IE8 及更早版本不支持 HTML5 标签，默认无法正常显示。

[解决方案是一个名为html5Shiv](http://code.google.com/p/html5shiv/)的 Javascript hack 。此 hack 修复了旧 IE 版本中 HTML5 元素的显示问题，以及与它们一起出现的一些其他小错误。

您可能还想尝试[Modernizr](http://modernizr.com)脚本。这是一个更大的 javascript 工具，它包含 htm5Shiv 功能，但也提供 JS 和 CSS 挂钩，让您的代码知道用户浏览器支持哪些 HTML5 功能。

这个 javascript 解决方案是解决旧 IE 版本中 HTML5 显示问题的唯一已知方法。这意味着您不能为禁用 Javascript 的 IE8 用户支持 HTML5 标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T21:55:48.500

IE 和 firefox 在您的代码上几乎给出了相同的结果。

试试这个：通过十个步骤学习 CSS 定位
[http://www.barelyfitz.com/screencast/html-training/css/positioning/](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

IE9： ![IE9](../Images/c5673d772a76dbeadb2078365e93a2a8.png)

火狐16： ![火狐16](../Images/2c3635ef1debf25ad5c164d70bccbcee.png)

# c - 创建一个进程的 C 程序，该进程被阻塞直到终止

> ID：13664042
> 
> 赞同：-3
> 
> 时间：2012-12-01T21:44:56.997
> 
> 标签：c, linux

如何在 C 中创建一个进程并使用它的状态？

*   我想知道如何创建一个流程。
*   我想知道如何将此进程置于阻塞状态。
*   我想知道如何将此过程置于僵尸状态。

关于如何在 C 上使用进程的指南会很有帮助，我只是找不到它。这样我就可以自己回答这些问题了。

我一直在玩 ps 来查看进程的状态，但真的不知道如何开始。

我在 Linux 上工作，对不起我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:03:19.363

使用 fork() 创建一个子进程 - 你的程序本身无论如何都在一个进程中运行

将进程置于“阻塞”状态：- 使用 sleep() 或发出阻塞 write() - 阅读手册页以获取更多信息 - 不知道这里的“阻塞”到底是什么意思

创建一个僵尸 - fork() 然后退出程序。你可以从 ps 中“看到”僵尸

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T22:04:05.743

如果抛开对典型父子进程的理解，事情就变得简单了

```
childpid=fork();
switch (childpid){
case 0 : //normally considered the child, but we will use it to continue on
     finish_program();
     return(0);
case -1 : //error occurred
default : //normally considered the parent, but our "blocked" process
     wait(childpid); //waits for the child process to terminate
     dostuff();
} 
```

父母被阻止，直到孩子终止

通常你会使用信号量和共享内存来阻塞进程，但这是一个好的开始

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T22:08:04.280

@user1869399 - 我认为您提出了一个非常好的问题，我认为 Bug Catcher 给出了一个非常好的答案。

Bug Catcher 关于创建“僵尸”的建议的关键是在进程退出后分叉一个进程而不进行“清理”（即未能调用“waitpid()”）。

这是关于 Linux 进程状态的一个非常好的链接：

*   [http://www.tldp.org/LDP/tlk/kernel/processes.html](http://www.tldp.org/LDP/tlk/kernel/processes.html)

另外，请查看 waitpid() 的“手册页”中的“注释”部分：

*   [http://www.kernel.org/doc/man-pages/online/pages/man2/wait.2.html](http://www.kernel.org/doc/man-pages/online/pages/man2/wait.2.html)

# python - brew install python 失败并出现 AttributeError

> ID：13664043
> 
> 赞同：0
> 
> 时间：2012-12-01T21:45:09.907
> 
> 标签：python, homebrew

`brew install python`失败了

```
AttributeError: 'module' object has no attribute 'BufferedIOBase' 
```

有谁知道这意味着什么？

完整输出如下：

```
==> Downloading http://www.python.org/ftp/python/2.7.3/Python-2.7.3.tar.bz2
Already downloaded: /Library/Caches/Homebrew/python-2.7.3.tar.bz2
==> ./configure --prefix=/usr/local/Cellar/python/2.7.3 --enable-ipv6 --dataroot
==> make
==> make install PYTHONAPPSDIR=/usr/local/Cellar/python/2.7.3
==> make frameworkinstallextras PYTHONAPPSDIR=/usr/local/Cellar/python/2.7.3/sha
==> Downloading http://pypi.python.org/packages/source/d/distribute/distribute-0
Already downloaded: /Library/Caches/Homebrew/distribute-0.6.30.tar.gz
==> /usr/local/Cellar/python/2.7.3/bin/python -s setup.py --no-user-cfg install 
  File "/private/tmp/__UNKNOWN__-iM08/distribute-0.6.30/setuptools/command/easy_install.py", line 18, in <module>
    import zipfile
  File     "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/zipfile.py", line 464, in <module>
    class ZipExtFile(io.BufferedIOBase):
 AttributeError: 'module' object has no attribute 'BufferedIOBase' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T04:14:06.017

github/homebrew 上的人[建议](https://github.com/mxcl/homebrew/issues/16351)我删除`/usr/local/lib/python2.7/`. 这样做后，`brew install python`再次工作。

# android - 到 Azure webrole 的 HTTP POST 在 Android 应用程序中不起作用

> ID：13664045
> 
> 赞同：1
> 
> 时间：2012-12-01T21:45:22.560
> 
> 标签：android, post, azure-web-roles

我有一个使用 WCF REST 服务实现的 Azure Webrole。我正在尝试使用 HTTP POST 请求将一个小图像文件（小于 50KB）上传到该服务。

它适用于以下方法：

1.  使用 .从 Windows 窗体应用程序上传`WebRequest`。
2.  通过 Fiddler 代理时从 Android 手机上传。

尝试直接 POST 到 Azure Webrole 时，在同一部 Android 手机上使用相同的 Android 代码失败。

在这种情况下，我得到一个超时，`SocketException`并且 detailMessage="Connection reset by peer"。在 Azure 中查看 VM 实例（使用 RDP）时，我看到此调用的状态为 400。

这是安卓代码：

```
DefaultHttpClient httpclient = new DefaultHttpClient();  
String requestStr = "http://servername.cloudapp.net/Rest/RestAPI?action_type=upload_file&user_id=5";

HttpPost httpPost = new HttpPost(requestStr);
HttpParams httpParams = new BasicHttpParams();

// Set the default connection timeout  
// in milliseconds which is the timeout for waiting for a connection.
int timeoutConnection = 60000; 
HttpConnectionParams.setConnectionTimeout(httpParams, timeoutConnection);

// Set the default socket timeout (SO_TIMEOUT)  
// in milliseconds which is the timeout for waiting for data. 
int timeoutSocket = 60000;
HttpConnectionParams.setSoTimeout(httpParams, timeoutSocket);

httpPost.setParams(httpParams);
httpPost.addHeader("Content-Type", "application/x-data-png");
httpPost.addHeader("FileName", fileName);

ByteArrayEntity byteArrayEntity = new ByteArrayEntity(bytes);
httpPost.setEntity(byteArrayEntity);

//Execute HTTP Post Request  
HttpResponse response = httpclient.execute(httpPost);
int statusCode = response.getStatusLine().getStatusCode();

HttpEntity entity = response.getEntity();
String responseStr = EntityUtils.toString(entity); 
```

这是我的 WebRole 代码（用于测试此问题）：

```
[OperationContract]
[WebInvoke(UriTemplate = "?action_type=upload_file&user_id={userID}", Method = "POST", BodyStyle = WebMessageBodyStyle.Bare)]
public void UploadFile(string userID, Stream fileContents)
{
    WebOperationContext.Current.OutgoingResponse.StatusCode = System.Net.HttpStatusCode.OK;
} 
```

更多信息：我尝试了相同的方法，但发送了一个像这样的短字节数组，它确实有效：

```
String someString = "some string";
byte[] byteArray = someString.getBytes(); 
```

这让我觉得也许我没有正确读取文件或者字节数组太长（50KB 应该是个问题吗？）

这是我用来获取文件字节的 Android 代码：

```
FileInputStream fileStream = new FileInputStream(fileToUpload);
fileStream.read(bytes);
fileStream.close(); 
```

我究竟做错了什么？

**更新：**我在直接发布到服务器的 Android 模拟器中尝试了完全相同的代码，它工作了......为什么这不能通过手机工作？！

**更新：**原来我的路由器上的 WiFi 有一个奇怪的问题（！）

其他一切工作正常，仅从 Android 手机上传到一定大小以上的 Azure 失败……（从同一部手机上传的其他内容确实有效……）我将路由器换成了新路由器，一切都恢复正常了。

另外：我要表扬一下整整一周没有抛弃我并帮助我最终理解问题的 Azure 支持人员。

我想我应该把这当成一场怪异的事故，然后继续我的生活:-)

这也意味着上面的代码是如何做事的一个很好的例子。希望它会帮助某人...

# ios - 如何以编程方式在 iOS 中添加图标覆盖？

> ID：13664051
> 
> 赞同：2
> 
> 时间：2012-12-01T21:46:42.080
> 
> 标签：ios, objective-c, cocoa-touch, uiimageview

当用户查看包含视频的帖子的详细信息时，我想在帖子缩略图上显示一个“播放”图标。

我试过这个，但它没有编译：

```
 if ([postType isEqualToString:@"video"]) {
        UIImageView *videoIcon = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"vicon"]];
        videoIcon.frame = CGRectMake(5, 10, 35, 35);
        [self addSubview:videoIcon]; 
    } 
```

给出的错误是：

```
No visible @interface declares the selector addSubview 
```

有谁知道如何使这项工作？

上面的代码在我的 DetailViewController.m 中。整体结构是具有 Master/Detail 接口的 UICollectionView 的结构。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T21:50:13.983

也许

```
[self.view addSubview:videoIcon]; 
```

if `self`is not a subclass of `UIView`then`addSubview`不太可能被定义

# xml - 允许元素按任何顺序但没有重复的模式？

> ID：13664054
> 
> 赞同：0
> 
> 时间：2012-12-01T21:47:14.817
> 
> 标签：xml, xsd

我正在尝试编写一个 XSD 架构，其中某些元素可以按任何顺序出现 - 但不能有重复项。

所以这是有效的：

```
<parent>
    <my-element-A>1</my-element-A>
    <my-element-B>2</my-element-B>
    <my-element-C>3</my-element-C>
</parent> 
```

...这是有效的：

```
<parent>
    <my-element-B>2</my-element-B>
    <my-element-A>1</my-element-A>
    <my-element-C>3</my-element-C>
</parent> 
```

但这不是：

```
<parent>
    <my-element-A>1</my-element-A>
    <my-element-B>2</my-element-B>
    <my-element-A>1</my-element-A><!-- Fail! Duplicate my-element-A -->
    <my-element-C>3</my-element-C>
</parent> 
```

我怎样才能用 XSD 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:15:32.543

`<xs:all>`元素定义“序列的[分组是一组子序列，其中一些或全部可能为空，使得原始序列的每个成员在其中一个子序列中出现一次且仅出现一次，并且所有成员所有子序列都在原始序列中。”](http://www.w3.org/TR/xmlschema11-1/#all-mg)

```
 <?xml version="1.0" encoding="UTF-8"?>
  <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
    <xs:element name="parent">
      <xs:complexType>
        <xs:all minOccurs="0">
          <xs:element name="my-element-A" type="xs:string"/>
          <xs:element name="my-element-B" type="xs:string"/>
          <xs:element name="my-element-C" type="xs:string"/>
        </xs:all>
      </xs:complexType>
    </xs:element>
  </xs:schema> 
```

# binding - Gmail 期间 Conkeror 的 CUA 绑定

> ID：13664056
> 
> 赞同：1
> 
> 时间：2012-12-01T21:47:39.863
> 
> 标签：binding, key-bindings, conkeror

如何在 Gmail 而不是 EMACS 绑定期间为复制 (Cc)、粘贴 (Cv) 和可能的剪切 (Cx) 提供 CUA 样式绑定？理解 cut as Cx 更难，因为它是一个前缀。

# ruby-on-rails - 如何让轮胎按 current_team 过滤？

> ID：13664062
> 
> 赞同：0
> 
> 时间：2012-12-01T21:48:45.720
> 
> 标签：ruby-on-rails, elasticsearch, tire

我正在使用 Tire（和 Ryan Bates 的 railscasts）作为站点范围的搜索来实现 Elasticsearch。它搜索多个模型。我希望它按 current_team 过滤。我至少有两个问题：

1) 将过滤器硬编码为“团队 2”不会返回任何结果。在我正在运行的特定查询中，我应该得到两个。我尝试了多种格式的号码、团队等。我尝试过的任何一种方式都不起作用。

2）我不知道如何将 team_id 作为变量传递给过滤器。我尝试像这样发送它：**__** .search(params, team)，但这导致没有查询结果（这导致我像 #1 一样对团队 ID 进行硬编码）

到目前为止，我已经在 Google 上花费了大约 6 个小时。我得到的最接近的事情是 Karmi 在 github 上对类似问题的回答，基本上说，“阅读手册，它就在那里。” :) 我读过它，作为一个新手，我还是迷路了。

这是现在的代码。

应用程序.html.erb

```
<bunch of code>

<%= form_tag searches_path, method: :get do %>
  <p>
    <%= text_field_tag :query, params[:query] %>
    <%= submit_tag "Search", name: nil %>
  </p>
<% end %>

<bunch of code> 
```

联系人控制器.rb

```
class Contact < ActiveRecord::Base
  attr_accessible :address_1, :address_2, :city, :first_name, :last_name, :state, :zip, :team_id
  has_and_belongs_to_many :properties
  belongs_to :user
  belongs_to :team
  has_many :appointments

  before_save :update_name 

  def update_name
    self.name = [first_name, last_name].join(' ')
  end

  #for elastic search
  include Tire::Model::Search 
  include Tire::Model::Callbacks
  def self.search(params)
    tire.search(load: true) do 
      query { string params[:query], default_operator: "AND" } if params[:query].present?
      filter :term, :team_id => ['2']
    end
  end  
end 
```

search_controller.rb

```
class SearchesController < ApplicationController

  def index
    current_team = :current_team
    @contacts = Contact.search(params)
    @properties = Property.search(params)
   # @events = Event.search(params[:query], load: true)
  end
  def show

  end

end 
```

搜索：index.html.erb：

```
<div id="content">
  <h1>Search Results</h1>

  <table>
  <tr>
    <th>First Name</th>
    <th>Last Name</th>
    <th>Last Name</th>
  </tr>

<% @contacts.each do |contact| %>
  <tr>
    <td><%= contact.first_name %></td>
    <td><%= contact.last_name %></td>
    <td><%= contact.team_id %></td>
  </tr>
<% end %>
</table>

  <table>
  <tr>
    <th>Name</th>
    <th>Address 1</th>
  </tr>

<% @properties.each do |property| %>
  <tr>
    <td><%= property.name %></td>
    <td><%= property.address_1 %></td>
  </tr>
<% end %>
</table>

</div> 
```

请注意，Properties 控制器中有类似的搜索功能。我只是想让联系人现在工作。

下面请求的 curl 命令产生：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:03:18.550

您可以通过参数传递 current_team 值并保留当前搜索方法签名。例如，在您的控制器中：

```
def index
  params[:current_team] = current_team # method that returns current team ID, are you using devise?
  @contacts = Contact.search(params)
  @properties = Property.search(params)
  # @events = Event.search(params[:query], load: true)
end 
```

在你的模型中：

```
def self.search(params)
  tire.search(load: true) do 
    query { string params[:query], default_operator: "AND" } if params[:query].present?
    filter :term, params[:current_team] if params[:current_team].present?
  end
end 
```

# django - Django 会话数据和 Redis 作为后端

> ID：13664069
> 
> 赞同：3
> 
> 时间：2012-12-01T21:49:27.770
> 
> 标签：django, redis, session-storage

我的顾问接管了一个相当繁忙的 Django 应用程序，它通过 Redis 处理缓存，除了 Django.session 数据。唯一可用的信息是诸如“Reverting session storage via Redis”之类的提交消息。

我已经测试了存储在 Redis 中的 Django 会话，这似乎是一个不错的解决方案，但我很犹豫是否将其推下管道，因为我想知道为什么原始开发人员会取消它。

据我了解 Django 会话逻辑，它只是一个 key:value 存储，其中 value 是一个带有相关会话数据的腌制 Python 对象。

简洁版本：

使用 Redis 处理 Django.session 数据的缺点是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T20:32:14.880

Redis 是存储会话而不是将会话添加到 SQL 数据库中的快速快捷方式（尝试监控查询会话表所用的时间），如果您使用 django-toolbar app 之类的工具，这一点显然会很清楚。

另一方面，唯一可能出现问题的是您的会话数据持久性，在 Redis 中已通过 2 种不同的方法进行处理，您可以选择适合您需要的方法，请参阅文档以获取更多详细信息，以及制作集群或故障转移 Redis 服务器的选项。

我遇到了类似的情况，出于速度和其他与项目相关的原因，我需要将会话存储在 NoSQL DB 中，这发生在我使用 django-redisession 应用程序时，我建议尝试一下。

最后，关于你一直在说的购物卡问题，这绝对和 Redis 无关，请检查你的系统配置以及不同软件组件之间的交互方式。我还建议在复制服务器中进行测试，而不是在生产服务器上执行此操作，以确保一切正常工作且配置良好。

**更新**

顺便说一句，Stackoverflow 使用 Redis 进行会话处理，这是使用 NoSQL DB 作为后端的会话管理的一个非常强大的示例。

# django - 使用 Django 和 Redis 的简单活动提要

> ID：13664078
> 
> 赞同：0
> 
> 时间：2012-12-01T21:50:34.870
> 
> 标签：django, redis, feed, django-settings

如何使用 Django 和 Redis 构建一个简单的活动提要来存储特定用户的所有提要项。我正在寻找一个全面深入的答案，因为任何地方都没有太多的分步说明。

例如：

```
Bob liked John's picture (2 seconds ago)

Bob started following you (5 minutes ago) 
```

（每个用户的提要都充满了所有关注者的最新 10 个事件）

使这成为可能需要哪些步骤？需要对 settings.py 进行哪些更改？如何设置views.py？如果 Redis 后端位于另一台服务器上，如何将它连接到 Django？

如果有人可以通过示例逐步给出答案，那将不胜感激。我知道还有很多来自 stackoverflow 的其他用户也在寻找这个答案！社区将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T01:13:47.480

在一个项目中，我使用[Django-Notification](https://github.com/jtauber/django-notification)来显示和让用户了解最新活动。就 redis 而言，您的 django 项目使用 Sessions，并在大多数网页上对您的数据库进行查询。所以只需让 Redis 处理会话而不是 DJango。本文更深入地介绍了使用 Redis [。](http://unfoldthat.com/2011/09/14/try-redis-instead.html)祝你好运 ：）

# c# - 从给定节点获取兄弟节点

> ID：13664079
> 
> 赞同：2
> 
> 时间：2012-12-01T21:50:35.943
> 
> 标签：c#, .net, xml, siblings

我有这个 XML 文件：

```
 <material>
   <item>
      <name>theName1</name>
      <val1>1.1</val1>
      <val2>2.5</val2>
      <val3>5.2</val3>
   </item>
   <item>
      <name>theName2</name>
      <val1>2.1</val1>
      <val2>3.5</val2>
      <val3>6.2</val3>
   </item>
 </material> 
```

好的，现在我有 1 件事：项目 > 名称节点之一的值（例如：theName2）知道这一点我需要选择它的兄弟姐妹（val1，val2 ...）

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T21:59:47.597

将您的 xml 加载到 XmlDocument 后，执行以下操作：

```
document.SelectSingleNode("/material/item[val1='2']/name").InnerText 
```

这是你需要的吗..？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T22:01:52.187

一点点 XPath + Linq 可能会有所帮助

```
var xDoc = XDocument.Parse(xml); //OR XDocument.Load(filename);
string xpath = String.Format("//item[name[text()='{0}']]","theName2");

var dict = xDoc.XPathSelectElement(xpath).Descendants()
            .Where(d=>d.Name.LocalName!="name")
            .ToDictionary(x=>x.Name.LocalName,x=>(decimal)x); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T22:15:41.083

```
XDocument xdoc = XDocument.Load("file.xml");
IEnumerable<double> values =
    xdoc.Descendants("item")
        .Where(i => (string)i.Element("name") == "theName2") // select item
        .Select(i => i.Element("name")) // select name node 
        .SelectMany(e => e.ElementsAfterSelf()) // take siblings
        .Select(v => (double)v); // convert all value nodes to double 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T22:03:39.937

```
 var doc = XDocument.Parse(Xml); //create XDocument from string
    var items = doc.Descendants("item"); //select all 'item' elements
    foreach (var item in items)
    {
        var childs = item.Elements().Skip(1); //skip <name> element
        foreach (var child in childs)
            Console.WriteLine(child); // val1, val2, val3, etc
    } 
```

要选择所有“名称”元素：

```
 var names = doc.Descendants("name");
    foreach (var name in names)
        Console.WriteLine(name); 
```

# model-view-controller - 数据传输对象可以/应该实现接口吗？

> ID：13664080
> 
> 赞同：5
> 
> 时间：2012-12-01T21:50:46.127
> 
> 标签：model-view-controller, software-design, n-tier-architecture

我想知道是否有人可以帮助我解决这个“建筑困境”，

我正在从不同类型（类）中检索一些对象，例如：帖子、文档和图片

事实证明，在表示层中，我必须在单个容器中呈现它们：想想共享点库的示例，其中您有一个文件夹，并且可以在其中包含各种对象。

我想按属性对它们进行排序（比如说 PublishingDateTime）

我知道如果我想对它们进行排序，它们都应该实现相同的接口，所以将它们实现为（比如说 ISortingCapable）

现在，在我的领域层中，界面看起来还不错，

但是后来，我意识到这并没有帮助，因为这些实例化的对象作为 DTO 进入了表示层（它们不再是相同的域对象）=> 将 DTO 视为 MVC 中视图的模型。

简单的说：

如果在表示层我有一个

```
List<PostDTO> 
List<PictureDTO> 
List<DocDTO> 
```

=> 简单的对象，简单的渲染。

现在我想在单个内容流中对它们进行排序。

我的问题是：DTO 是否应该再次实现完全相同的接口？还是我从错误的角度看待问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T17:00:50.767

如果在某些时候您需要将它们与视图再次分开的逻辑，假设您想查看进入其自己的控制器的每个单独的项目，您也可以聚合它们并包含一些导航属性：

```
 public IEnumerable<StreamItem> GetStream() {
        var posts = (from post in postsDb
                     select new StreamItem() { ID = post.ID, Name = post.Name, Url = "Posts/Details/" });

        var docs = (from doc in docsDb
                    select new StreamItem() { ID = doc.ID, Name = doc.Name, Url = "Docs/Details/" });

        var stream = posts.Union(docs);

        return stream;
    }

    public class StreamItem {

        public string Url { get; set; }
        public int ID { get; set; }
        public string Name { get; set; }

    } 
```

Mushin 说得对，虽然它们中的每一个都应该已经从一个基本类型继承，在我之前的例子中可能是 StreamItem。

您只需要视图端的 Url（或其他一些标识符）就可以计算出它在返回的路上是什么。

如果您查看 MVC 的默认项目中的 AccountModels，您会发现 User 是 DTO，并以多种方式进行操作（LoginModel、ForgotPasswordModel、RegisterModel），但最终总是回到 DTO。当通过视图查看 DAL 时，事情并不总是它们看起来的样子；）

# google-apps - 使用 PHP 代码示例时，“webViewLink”为空/null

> ID：13664084
> 
> 赞同：3
> 
> 时间：2012-12-01T21:51:41.850
> 
> 标签：google-apps, google-drive-api

使用来自谷歌的最新版本的 PHP api (0.60)，来自[谷歌开发者页面](https://developers.google.com/drive/publish-site)的代码示例似乎可以工作，除了在函数末尾使用“print_r($createdFile)”时“webViewLink”字段为空/null。

我的 Google Apps 域的 drive.google.com 站点显示使用公共权限成功创建的新文件夹。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-29T07:34:32.677

“几年”后，这是一个带有服务帐户的工作示例。我有一个 G Suite 帐户，并且在[https://admin.google.com/example.com/AdminHome?chromeless=1#OGX:ManageOauthClients](https://admin.google.com/example.com/AdminHome?chromeless=1#OGX:ManageOauthClients)我已将我的 API 客户端设置为 API 范围[https://www.googleapis.com/身份验证/驱动器](https://www.googleapis.com/auth/drive)，然后

```
include_once __DIR__ . '/../vendor/autoload.php';
$client = new Google_Client();
$client->setAuthConfig('my_auth.json');
$client->addScope('https://www.googleapis.com/auth/drive');
$client->setSubject('admin.example.com');
$service = new Google_Service_Drive($client);
$x = $service->files->listFiles([
  'spaces' => 'drive', // this doesn't seem necessary
  'q' => 'name = "download"',
  'fields' => 'files(id, name, webViewLink, webContentLink)',
]); 
```

请注意这个`fields`论点：它不会*检索*任何东西，但`id`如果`name`你把它排除在外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:55:20.063

我编写了一个小型 JavaScript 应用程序，列出了您的公共文件夹。您能否确认您的文件夹显示在列表中？如果它没有显示，它不会公开共享，因此没有 webViewLink：

[https://googledrive.com/host/0B0YvUuHHn3Mna3Rzb19tLTYyOXc/](https://googledrive.com/host/0B0YvUuHHn3Mna3Rzb19tLTYyOXc/)

该页面托管在 Google 驱动器本身中，因此它由 Google 驱动器提供服务并访问 Google 驱动器，并且对于任何询问的人，不，宇宙没有内爆:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T06:33:43.603

作为一种解决方法，如果您有文件夹 ID，则可以使用[https://googledrive.com/host/FOLDER_ID_HERE](https://googledrive.com/host/FOLDER_ID_HERE)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-07T14:59:10.373

可以通过执行以下操作来检索**WebViewLink**文件属性：

```
$file = $service->files->get($file_id, array('fields' => 'webViewLink'));
$web_link_view = $file->getWebViewLink(); 
```

或者

```
$sheetsList = $drive_service->files->listFiles([
  'fields' => 'files(id, name, webViewLink, webContentLink)',
]);

$web_link_view = $sheetsList->current()->getWebViewLink(); 
```

正如@chx 提到的，您应该加载文件，指定您想要携带的字段（在这种情况下，`webViewLink`）。如果您不这样做，则只有`id`并且`name`将可用。

如果您还需要配置文件权限，您可以执行以下操作：

```
$permissions = new \Google_Service_Drive_Permission();
$permissions->setRole('writer');
$permissions->setType('anyone');

$drive_service->permissions->create($file_id, $permissions); 
```

`setRole()`和的可能值`setType()`可以在这里找到：[https ://developers.google.com/drive/api/v3/reference/permissions/create](https://developers.google.com/drive/api/v3/reference/permissions/create)

# breeze - Breeze Web API 与 Cordova 电话应用程序保存更改

> ID：13664085
> 
> 赞同：5
> 
> 时间：2012-12-01T21:52:05.080
> 
> 标签：breeze

我创建了一个 ASP.NET MVC 4 Web API 项目并通过 NuGet 安装了 Breeze，包括客户端示例，并且 ToDo 应用程序运行良好。我还有通过 Cordova 在 Android 平板电脑上调用 WebAPI 运行的应用程序，除了保存实体时，这也很有效。我已对 Global.asax ("Access-Control-Allow-Origin", "*") 进行了适当的更改以支持跨域操作。

当 Android 客户端调用它的 saveChanges() 时，数据实际上被保存到数据库中，但它的失败承诺总是在客户端上触发。

在 Web API 服务器上，我注意到通过浏览器进行 Breeze 调用时，我得到以下输出跟踪并成功保存：

```
iisexpress.exe Information: 0 : Operation=ODataActionFilter.ActionExecuting
iisexpress.exe Information: 0 : Message='Action returned 'Breeze.WebApi.SaveResult'', Operation=ReflectedHttpActionDescriptor.ExecuteAsync
iisexpress.exe Information: 0 : Message='Will use same 'JsonMediaTypeFormatter' formatter', Operation=JsonMediaTypeFormatter.GetPerRequestFormatterInstance
iisexpress.exe Information: 0 : Message='Selected formatter='JsonMediaTypeFormatter', content-type='application/json; charset=utf-8'', Operation=DefaultContentNegotiator.Negotiate
iisexpress.exe Information: 0 : Operation=ApiControllerActionInvoker.InvokeActionAsync, Status=200 (OK)
iisexpress.exe Information: 0 : Operation=ODataActionFilter.ActionExecuted, Status=200 (OK)
iisexpress.exe Information: 0 : Operation=BreezeSampleController.ExecuteAsync, Status=200 (OK)
**iisexpress.exe Information: 0 : Response, Status=200 (OK), Method=POST, Url=http://localhost:59912/api/BreezeSample/SaveChanges, Message='Content-type='application/json; charset=utf-8', content-length=unknown'**
iisexpress.exe Information: 0 : Operation=JsonMediaTypeFormatter.WriteToStreamAsync
iisexpress.exe Information: 0 : Operation=BreezeSampleController.Dispose 
```

但是，当从 Android 应用程序调用时，我会写入数据，但此跟踪出现错误：

```
iisexpress.exe Information: 0 : Message='Action returned 'Breeze.WebApi.SaveResult'', Operation=ReflectedHttpActionDescriptor.ExecuteAsync
iisexpress.exe Information: 0 : Message='Will use same 'XmlMediaTypeFormatter' formatter', Operation=XmlMediaTypeFormatter.GetPerRequestFormatterInstance
iisexpress.exe Information: 0 : Message='Selected formatter='XmlMediaTypeFormatter', content-type='application/xml; charset=utf-8'', Operation=DefaultContentNegotiator.Negotiate
iisexpress.exe Information: 0 : Operation=ApiControllerActionInvoker.InvokeActionAsync, Status=200 (OK)
iisexpress.exe Information: 0 : Operation=ODataActionFilter.ActionExecuted, Status=200 (OK)
iisexpress.exe Information: 0 : Operation=BreezeSampleController.ExecuteAsync, Status=200 (OK)
**iisexpress.exe Information: 0 : Response, Status=200 (OK), Method=POST, Url=http://192.168.1.9:59912/api/BreezeSample/SaveChanges, Message='Content-type='application/xml; charset=utf-8', content-length=unknown'**
iisexpress.exe Error: 0 : Operation=XmlMediaTypeFormatter.WriteToStreamAsync, Exception=System.Runtime.Serialization.SerializationException: Type 'SMHMobileAPI.Models.BreezeSampleTodoItem' with data contract name 'BreezeSampleTodoItem:http://schemas.datacontract.org/2004/07/SMHMobileAPI.Models' is not expected. Consider using a DataContractResolver or add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiType(XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle objectTypeHandle, Type objectType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, Type declaredType)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)
   at WriteArrayOfanyTypeToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , CollectionDataContract )
   at System.Runtime.Serialization.CollectionDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)
   at WriteSaveResultToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract )
   at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)
   at System.Runtime.Serialization.DataContractSerializer.InternalWriteObjectContent(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)
   at System.Runtime.Serialization.DataContractSerializer.InternalWriteObject(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)
   at System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)
   at System.Runtime.Serialization.DataContractSerializer.WriteObject(XmlWriter writer, Object graph)
   at System.Net.Http.Formatting.XmlMediaTypeFormatter.<>c__DisplayClass7.<WriteToStreamAsync>b__6()
   at System.Threading.Tasks.TaskHelpers.RunSynchronously(Action action, CancellationToken token) 
```

除了一些序列化错误，我还注意到帖子标题“application/xml”。我不确定这是否相关，但如果有人可以提供帮助，我肯定需要一些帮助来尝试找到解决方案。

谢谢马克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T17:20:33.370

我很确定`"application/xml"` **是**相关的。

保存后，Breeze Web API 控制器将更新/添加的实体返回给您。您提到的“接受”标头会导致 Web API 尝试使用几乎总是失败的 XML 格式化程序格式化这些实体。

我不认为 Breeze 本身不会在 POST 上设置 Accept 标头（我不确定它是否在 GET 上设置了 Accept 标头）。

查看 IE10 中 jQuery AJAX 生成的请求表明 GET 的 Accept 标头是`"application/json, text/javascript, */*; q=0.01"`. 对于 POST，Accept 和 Content-type 标头分别是`"*\*"`和`"application/json"`。

您的 Android 流量中的 Accept 标头是什么？您没有指定将哪个标头设置为`"application/xml"`...但是由于这总是“错误的”，我认为这并不重要:)

您可以自定义 Breeze AJAX 适配器或完全[按照此处所述](http://www.breezejs.com/documentation/customizing-ajax "定制的 Ajax")替换它。你可以试试：

```
// 获取当前默认的 Breeze ajax 适配器
 var ajaxAdapter = 微风.core.config.getAdapterInstance("ajax");
 // 设置固定标题
 ajaxAdapter.defaultSettings = {
       标题：{
           “接受”：“应用程序/json，文本/javascript，*/*；q=0.01”
       },
};
```

这似乎在我对 IE10 和 Chrome 的测试中起到了作用。

我还将建议 Breeze Web API JsonFormatterAttribute 删除 XML 格式化程序给 tnat，我们知道它不适用于 Breeze 流量​​。

希望这有效。

# ios - iOS AudioUnits 通过

> ID：13664087
> 
> 赞同：7
> 
> 时间：2012-12-01T21:52:11.100
> 
> 标签：ios, core-audio, audiounit, avaudiosession

我正在尝试编写一个 iOS 应用程序，它将从麦克风接收到的声音传递到扬声器而不做任何更改。我已经阅读了苹果文档和指南。我从本[指南](http://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/ConstructingAudioUnitApps/ConstructingAudioUnitApps.html#//apple_ref/doc/uid/TP40009492-CH16-SW1)中选择了第一个模式。但什么也没发生——沉默。如您所见，我尝试使用 AUAudioGraph（已评论）-结果相同（在这个简单的示例中我是否需要它？）。

我在互联网上看到几个使用回调的例子，但我不想使用任何回调。可能吗？

有什么建议么？感谢关注。

实际代码

```
#import "AudioController.h"
#import <AudioToolbox/AudioToolbox.h>
#import <AVFoundation/AVFoundation.h>
#import <AudioToolbox/AudioServices.h>
#define kInputBus 1
#define kOutputBus 0

@interface AudioController ()
{
    AudioComponentDescription desc;
    AudioComponent component;
    AudioUnit unit;
    AudioStreamBasicDescription audioFormat;
    double rate;
    //AUGraph graph;
}

@end

@implementation AudioController

- (void) setUp {
    AVAudioSession *sess = [AVAudioSession sharedInstance];
    NSError *error = nil;
    rate = 44100.0;
    [sess setPreferredSampleRate:rate error:&error];
    [sess setCategory:AVAudioSessionCategoryPlayAndRecord error:&error];
    [sess setActive:YES error:&error];
    rate = [sess sampleRate];
    if (error) {
        NSLog(@"%@", error);
    }

    NSLog(@"Init...");
    [self createUnitDesc];
    [self getComponent];
    [self getAudioUnit];
    [self enableIORec];
    [self enableIOPb];
    [self createFormat];
    [self applyFormat];
    OSStatus err = AudioUnitInitialize(unit);
    if (noErr != err) {
        [self showStatus:err];
    }
    /*NewAUGraph(&graph);
    AUNode node;
    AUGraphAddNode(graph, &desc, &node);
AUGraphInitialize(graph);
AUGraphOpen(graph);*/
}

- (void) createUnitDesc {
    desc.componentType = kAudioUnitType_Output;
    desc.componentSubType = kAudioUnitSubType_RemoteIO;
    desc.componentFlags = 0;
    desc.componentFlagsMask = 0;
    desc.componentManufacturer = kAudioUnitManufacturer_Apple;

}

- (void) getComponent {
    component = AudioComponentFindNext(NULL, &desc);
}

- (void) getAudioUnit {
    OSStatus res = AudioComponentInstanceNew(component, &unit);
    if (noErr != res) {
        [self showStatus:res];
    }
}

- (void) enableIORec {
    UInt32 flag = 1;
    OSStatus err = AudioUnitSetProperty(unit,
                                  kAudioOutputUnitProperty_EnableIO,
                                  kAudioUnitScope_Input,
                                  kInputBus,
                                  &flag,
                                  sizeof(flag));
    if (noErr != err) {
        [self showStatus:err];
    }
}

- (void) enableIOPb {
    UInt32 flag = 1;
    OSStatus err = AudioUnitSetProperty(unit,
                                  kAudioOutputUnitProperty_EnableIO,
                                  kAudioUnitScope_Output,
                                  kOutputBus,
                                  &flag,
                                  sizeof(flag));
    if (noErr != err) {
        [self showStatus:err];
    }
}

- (void) createFormat {
    // Describe format
    audioFormat.mSampleRate         = rate;//44100.00;
    audioFormat.mFormatID           = kAudioFormatLinearPCM;
    audioFormat.mFormatFlags        = kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;
    audioFormat.mFramesPerPacket    = 1;
    audioFormat.mChannelsPerFrame   = 1;
    audioFormat.mBitsPerChannel     = 16;
    audioFormat.mBytesPerPacket     = 2;
    audioFormat.mBytesPerFrame      = 2;
}

- (void) applyFormat {
    OSStatus err = AudioUnitSetProperty(unit,
                                  kAudioUnitProperty_StreamFormat,
                                  kAudioUnitScope_Output,
                                  kInputBus,
                                  &audioFormat,
                                  sizeof(audioFormat));
    if (noErr != err) {
        [self showStatus:err];
    }
}

- (void) start {
    NSLog(@"starting");
    OSStatus err = AudioOutputUnitStart(unit);
    //AUGraphStart(graph);
    if (noErr != err) {
        [self showStatus:err];
    }
}

- (void) end {
    NSLog(@"ending");
    OSStatus err = AudioOutputUnitStop(unit);
    //AUGraphStop(graph);
    if (noErr != err) {
        [self showStatus:err];
    }
}

- (void) showStatus:(OSStatus) st{
    NSString *text = nil;
    switch (st) {
        case kAudioUnitErr_CannotDoInCurrentContext: text = @"kAudioUnitErr_CannotDoInCurrentContext"; break;
        case kAudioUnitErr_FailedInitialization: text = @"kAudioUnitErr_FailedInitialization"; break;
        case kAudioUnitErr_FileNotSpecified: text = @"kAudioUnitErr_FileNotSpecified"; break;
        case kAudioUnitErr_FormatNotSupported: text = @"kAudioUnitErr_FormatNotSupported"; break;
        case kAudioUnitErr_IllegalInstrument: text = @"kAudioUnitErr_IllegalInstrument"; break;
        case kAudioUnitErr_Initialized: text = @"kAudioUnitErr_Initialized"; break;
        case kAudioUnitErr_InstrumentTypeNotFound: text = @"kAudioUnitErr_InstrumentTypeNotFound"; break;
        case kAudioUnitErr_InvalidElement: text = @"kAudioUnitErr_InvalidElement"; break;
        case kAudioUnitErr_InvalidFile: text = @"kAudioUnitErr_InvalidFile"; break;
        case kAudioUnitErr_InvalidOfflineRender: text = @"kAudioUnitErr_InvalidOfflineRender"; break;
        case kAudioUnitErr_InvalidParameter: text = @"kAudioUnitErr_InvalidParameter"; break;
        case kAudioUnitErr_InvalidProperty: text = @"kAudioUnitErr_InvalidProperty"; break;
        case kAudioUnitErr_InvalidPropertyValue: text = @"kAudioUnitErr_InvalidPropertyValue"; break;
        case kAudioUnitErr_InvalidScope: text = @"kAudioUnitErr_InvalidScope"; break;
        case kAudioUnitErr_NoConnection: text = @"kAudioUnitErr_NoConnection"; break;
        case kAudioUnitErr_PropertyNotInUse: text = @"kAudioUnitErr_PropertyNotInUse"; break;
        case kAudioUnitErr_PropertyNotWritable: text = @"kAudioUnitErr_PropertyNotWritable"; break;
        case kAudioUnitErr_TooManyFramesToProcess: text = @"kAudioUnitErr_TooManyFramesToProcess"; break;
        case kAudioUnitErr_Unauthorized: text = @"kAudioUnitErr_Unauthorized"; break;
        case kAudioUnitErr_Uninitialized: text = @"kAudioUnitErr_Uninitialized"; break;
        case kAudioUnitErr_UnknownFileType: text = @"kAudioUnitErr_UnknownFileType"; break;
        default: text = @"unknown error";
    }
    NSLog(@"TRANSLATED_ERROR = %li = %@", st, text);
}

- (void) dealloc {
    AudioUnitUninitialize(unit);

    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-02T11:24:07.107

正如 warrenm 所说，在远程 IO 元素之间建立连接会有所帮助。所以在所有初始化完成后放置的代码：

```
AudioUnitConnection conn;
conn.destInputNumber = kOutputBus;
conn.sourceAudioUnit = unit;
conn.sourceOutputNumber = kInputBus;
err = AudioUnitSetProperty(unit, kAudioUnitProperty_MakeConnection, kAudioUnitScope_Input, kOutputBus, &conn, sizeof(conn));
if (noErr != err) { [self showStatus:err]; } 
```

**更新** 为了方便其他人使用该解决方案，我将在此处发布完整代码：

.h 文件

```
#import <Foundation/Foundation.h>

@interface AudioController : NSObject

- (void)setUp;
- (void)start;
- (void)end;
@end 
```

.m 文件

```
#import "AudioController.h"
#import <AudioToolbox/AudioToolbox.h>
#import <AVFoundation/AVFoundation.h>
#import <AudioToolbox/AudioServices.h>
#define kInputBus 1
#define kOutputBus 0

@interface AudioController ()
{
    AudioComponentDescription desc;
    AudioComponent component;
    AudioUnit unit;
    AudioStreamBasicDescription audioFormat;
    double rate;
}
@end

@implementation AudioController

- (void)setUp
{
    AVAudioSession *sess = [AVAudioSession sharedInstance];
    NSError *error = nil;
    rate = 44100.0;
    [sess setPreferredSampleRate:rate error:&error];
    [sess setCategory:AVAudioSessionCategoryPlayAndRecord error:&error];
    [sess setActive:YES error:&error];
    rate = [sess sampleRate];
    if (error) {
        NSLog(@"%@", error);
    }

    NSLog(@"Initing");
    [self createUnitDesc];
    [self getComponent];
    [self getAudioUnit];
    [self enableIORec];
    [self enableIOPb];
    [self createFormat];
    [self applyFormat];
    OSStatus err = AudioUnitInitialize(unit);
    if (noErr != err) {
        [self showStatus:err];
    }

    AudioUnitConnection conn;
    conn.destInputNumber = 0;
    conn.sourceAudioUnit = unit;
    conn.sourceOutputNumber = 1;
    err = AudioUnitSetProperty(unit, kAudioUnitProperty_MakeConnection, kAudioUnitScope_Input, 0, &conn, sizeof(conn));
    if (noErr != err) {
        [self showStatus:err];
    }
}

- (void)createUnitDesc
{
    desc.componentType = kAudioUnitType_Output;
    desc.componentSubType = kAudioUnitSubType_RemoteIO;
    desc.componentFlags = 0;
    desc.componentFlagsMask = 0;
    desc.componentManufacturer = kAudioUnitManufacturer_Apple;

}

- (void)getComponent
{
    component = AudioComponentFindNext(NULL, &desc);
}

- (void)getAudioUnit
{
    OSStatus res = AudioComponentInstanceNew(component, &unit);
    if (noErr != res) {
        [self showStatus:res];
    }
}

- (void)enableIORec
{
    UInt32 flag = 1;
    OSStatus err = AudioUnitSetProperty(unit,
                                  kAudioOutputUnitProperty_EnableIO,
                                  kAudioUnitScope_Input,
                                  kInputBus,
                                  &flag,
                                  sizeof(flag));
    if (noErr != err) {
        [self showStatus:err];
    }
}

- (void)enableIOPb
{
    UInt32 flag = 1;
    OSStatus err = AudioUnitSetProperty(unit,
                                  kAudioOutputUnitProperty_EnableIO,
                                  kAudioUnitScope_Output,
                                  kOutputBus,
                                  &flag,
                                  sizeof(flag));
    if (noErr != err) {
        [self showStatus:err];
    }
}

- (void)createFormat
{
    // Describe format
    audioFormat.mSampleRate         = rate;
    audioFormat.mFormatID           = kAudioFormatLinearPCM;
    audioFormat.mFormatFlags        = kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;
    audioFormat.mFramesPerPacket    = 1;
    audioFormat.mChannelsPerFrame   = 1;
    audioFormat.mBitsPerChannel     = 16;
    audioFormat.mBytesPerPacket     = 2;
    audioFormat.mBytesPerFrame      = 2;
}

- (void)applyFormat
{
    OSStatus err = AudioUnitSetProperty(unit,
                                  kAudioUnitProperty_StreamFormat,
                                  kAudioUnitScope_Output,
                                  kInputBus,
                                  &audioFormat,
                                  sizeof(audioFormat));
    if (noErr != err) {
        [self showStatus:err];
    }
}

- (void)start
{
    NSLog(@"starting");
    OSStatus err = AudioOutputUnitStart(unit);
    if (noErr != err) {
        [self showStatus:err];
    }
}

- (void)end
{
    NSLog(@"ending");
    OSStatus err = AudioOutputUnitStop(unit);
    if (noErr != err) {
        [self showStatus:err];
    }
}

- (void)showStatus:(OSStatus)st
{
    NSString *text = nil;
    switch (st) {
        case kAudioUnitErr_CannotDoInCurrentContext: text = @"kAudioUnitErr_CannotDoInCurrentContext"; break;
        case kAudioUnitErr_FailedInitialization: text = @"kAudioUnitErr_FailedInitialization"; break;
        case kAudioUnitErr_FileNotSpecified: text = @"kAudioUnitErr_FileNotSpecified"; break;
        case kAudioUnitErr_FormatNotSupported: text = @"kAudioUnitErr_FormatNotSupported"; break;
        case kAudioUnitErr_IllegalInstrument: text = @"kAudioUnitErr_IllegalInstrument"; break;
        case kAudioUnitErr_Initialized: text = @"kAudioUnitErr_Initialized"; break;
        case kAudioUnitErr_InstrumentTypeNotFound: text = @"kAudioUnitErr_InstrumentTypeNotFound"; break;
        case kAudioUnitErr_InvalidElement: text = @"kAudioUnitErr_InvalidElement"; break;
        case kAudioUnitErr_InvalidFile: text = @"kAudioUnitErr_InvalidFile"; break;
        case kAudioUnitErr_InvalidOfflineRender: text = @"kAudioUnitErr_InvalidOfflineRender"; break;
        case kAudioUnitErr_InvalidParameter: text = @"kAudioUnitErr_InvalidParameter"; break;
        case kAudioUnitErr_InvalidProperty: text = @"kAudioUnitErr_InvalidProperty"; break;
        case kAudioUnitErr_InvalidPropertyValue: text = @"kAudioUnitErr_InvalidPropertyValue"; break;
        case kAudioUnitErr_InvalidScope: text = @"kAudioUnitErr_InvalidScope"; break;
        case kAudioUnitErr_NoConnection: text = @"kAudioUnitErr_NoConnection"; break;
        case kAudioUnitErr_PropertyNotInUse: text = @"kAudioUnitErr_PropertyNotInUse"; break;
        case kAudioUnitErr_PropertyNotWritable: text = @"kAudioUnitErr_PropertyNotWritable"; break;
        case kAudioUnitErr_TooManyFramesToProcess: text = @"kAudioUnitErr_TooManyFramesToProcess"; break;
        case kAudioUnitErr_Unauthorized: text = @"kAudioUnitErr_Unauthorized"; break;
        case kAudioUnitErr_Uninitialized: text = @"kAudioUnitErr_Uninitialized"; break;
        case kAudioUnitErr_UnknownFileType: text = @"kAudioUnitErr_UnknownFileType"; break;
        default: text = @"unknown error";
    }
    NSLog(@"TRANSLATED_ERROR = %li = %@", st, text);
}

- (void)dealloc
{
    AudioUnitUninitialize(unit);

    [super dealloc];
}

@end 
```

# sql - 选择艺术家的专辑列表并显示每个专辑曲目计数已请求列表中的艺术家和专辑

> ID：13664089
> 
> 赞同：1
> 
> 时间：2012-12-01T21:52:41.957
> 
> 标签：sql, sqlite, select, group-by

我需要进行复杂的查询。我有表：

```
CREATE TABLE IF NOT EXISTS tracks
     ( id INTEGER PRIMARY KEY, path TEXT,
     title TEXT, artist TEXT,
     album TEXT, genre TEXT, 
    duration INTEGER, rating INTEGER ); 
```

对不起，问题的肮脏标题，但我不明白如何更简短地解释它。

问题：如何显示请求艺术家的专辑列表，并为每个显示的专辑计算单个查询中当前专辑中请求艺术家的曲目数。

我尝试过这样的事情：

```
SELECT albtbl.album as album, albtbl.artist as artist, 
( SELECT count(*) FROM trackstbl WHERE trackstbl.artist = albtbl.aritst ) as tracksCount 
FROM ( SELECT tbl.album as album, tbl.artist as artist, count(title) as tracksCount FROM tracks as tbl  WHERE tbl.artist = 'requested_artist'
 GROUP BY tbl.album ) as albtbl, FROM tracks as trackstbl ORDER BY album ASC 
```

但它没有编译：

> SQLiteException：在“FROM”附近：语法错误：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T21:57:34.053

不确定，为什么这很复杂。下面的查询应该为您返回每个搜索艺术家专辑的曲目计数：

```
 select artist, album, count(*) as tracksCount
     from tracks
     where artist = 'requested_artist'
     group by artist, album; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T21:59:31.920

```
select artist, album, count(1) as countTracks
from tracks
where artist = @requestedArtist
group by artist, album 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T21:57:50.423

它并不复杂，但很难阅读。我第一眼就看到了错误。这里：

```
as albtbl, FROM tracks 
```

逗号是额外的。所以把它改成这样：

```
as albtbl FROM tracks 
```

希望能帮助到你。

# matlab - 如何在 MATLAB 中初始化结构数组？

> ID：13664090
> 
> 赞同：51
> 
> 时间：2012-12-01T21:52:41.600
> 
> 标签：matlab

如何在 MATLAB 中预分配结构数组？我想在这个例子中预先分配“a”，这样它就不会多次调整大小。

```
a = []
for i = 1:100
  a(i).x = i;
end 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-12-01T22:40:28.860

Using`repmat`是迄今为止最有效的预分配结构的方法：

```
N = 10000;    
b = repmat(struct('x',1), N, 1 ); 
```

使用 Matlab 2011a 比通过索引预分配快**约 10 倍，如**

```
N      = 10000;
b(N).x = 1 
```

索引方法只比不预分配快一点。

```
No preallocation:            0.075524    
Preallocate Using indexing:  0.063774
Preallocate with repmat:     0.005234 
```

* * *

* * *

如果您想验证，请使用下面的代码。

```
 clear;
        N = 10000;

    %1) GROWING A STRUCT
        tic;
        for ii=1:N
            a(ii).x(1)=1;    
        end
        noPreAll = toc;        

    %2)PREALLOCATING A STRUCT
        tic;
        b = repmat( struct( 'x', 1 ), N, 1 );
        for ii=1:N
            b(ii).x(1)=1;    
        end;  
        repmatBased=toc;        

    %3)Index to preallocate
        tic;
        c(N).x = 1;
        for ii=1:N
            c(ii).x(1)=1;    
        end;  
        preIndex=toc;

        disp(['No preallocation:        ' num2str(noPreAll)])            
        disp(['Preallocate Indexing:    ' num2str(preIndex)])
        disp(['Preallocate with repmat: ' num2str(repmatBased)]) 
```

命令窗口中的结果：

```
No preallocation:        0.075524    
Preallocate Indexing:    0.063774
Preallocate with repmat: 0.0052338
>> 
```

**PS** 我很想知道为什么这是真的，如果有人能解释的话。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-01T22:47:18.033

有很多方法可以初始化结构。例如，您可以使用以下`struct`命令：

```
a(1:100) = struct('x',[]); 
```

它将所有字段设置`x`为空。

`deal`如果您知道应该放入哪些数据，您也可以使用它来创建和填充结构

```
xx = num2cell(1:100);
[a(1:100).x]=deal(xx{:});
a(99).x
ans =
    99 
```

或者您可以`struct`再次使用（注意，如果结构的字段应该是单元格数组，则单元格需要用大括号括起来！）

```
a = struct('x',xx) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-12-01T22:12:12.820

[Loren 在 MATLAB 艺术](http://blogs.mathworks.com/loren/2008/02/01/structure-initialization/)博客上对此进行了很好的讨论。

如果我理解正确，这里有一种方法来初始化你想要的结构：

```
a(100).x = 100; 
```

使用这种方法，我们可以看到元素被空数组填充。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-07T20:54:21.370

应该这样做的方式，最简单的是

```
a=struct('x',cell(1,N)); 
```

如果修复缺失的“tic”并将此方法添加到 jerad 提供的基准测试代码中，我上面提出的方法比 repmat 慢一点，但实现起来要简单得多，以下是输出：

```
No preallocation:        0.10137
Preallocate Indexing:    0.07615
Preallocate with repmat: 0.01458
Preallocate with struct: 0.07588 
```

repmat 更快的原因是因为在预分配期间为每个“x”字段分配了一个值，而不是将其留空。如果更改了上述预分配技术，那么我们从所有 x 字段开始分配一个值（一），如下所示：

```
 a=cell(1,N);
    a(:)={1};
    d=struct('x',a); 
```

然后，基准测试改进了很多，非常接近或比 repmat 快了一段时间。差异是如此之小，以至于每次我运行它都会改变哪个更快。这是一个输出示例：

```
No preallocation:        0.0962
Preallocate Indexing:    0.0745
Preallocate with repmat: 0.0259
Preallocate with struct: 0.0184 
```

反之，如果repmat预分配改为设置字段为空，像这样

```
b = repmat( struct( 'x', {} ), N, 1 ); 
```

失去所有速度优势

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-11T08:32:30.573

使用 cell2struct 是迄今为止我能想到的最快的方法。只需检查以下代码进行比较：

```
clear;
N = 10000;

cel2s=0;
repm=0;

for i=1:100
a=0.0; b=0.0;

tic;
a = cell2struct(cell(1,N), {'x'}, 1 );
cel2s = cel2s + toc;

tic;
b = repmat(struct('x',1), N, 1 );
repm = repm + toc;
end

disp(['cell2struct preallocation: ', num2str(cel2s/100)]);
disp(['repmat preallocation     : ', num2str(repm/100)]);
disp(['speedup                  : ', num2str(fix( repm/cel2s ) ) , ' X']); 
```

典型结果显示平均加速大约**19 倍！**wrt repmat方法：

```
cell2struct preallocation: 1.4636e-05
repmat preallocation     : 0.00028794
speedup                  : 19 X 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-06-24T16:39:47.473

根据[这个答案](https://stackoverflow.com/a/13336106/311834)，还有另一种方法：

```
[a.x] = deal(val); 
```

`val`您要分配给结构的*每个*元素的值在哪里。

此命令的效果与其他命令不同，因为`x`每个结构的每个字段都`a`将被赋值`val`。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-07-13T15:51:47.263

与预先分配结构数组不同，反转循环可能更容易。这样，数组在第一次迭代中分配，其余的迭代用于填充结构。

```
a = []
for i = 100:-1:1
    a(i).x = i;
end 
```

# debugging - 如何监控 Coldfusion 中的计划任务是否设置正确？

> ID：13664092
> 
> 赞同：3
> 
> 时间：2012-12-01T21:52:45.173
> 
> 标签：debugging, coldfusion, scheduled-tasks

我正在尝试设置我的第一个 Coldfusion 计划任务，但无法让它工作。我无权访问`cfadmin`，我需要使用`cfschedule`标签来完成。我正在设置这样的东西：

```
<cfschedule action = "update"
    task = "taskManager" 
    operation = "HTTPRequest"
    url = "path/to/task_manager.cfm"
    startDate = "12/01/12"
    startTime = "10:30 PM"
    interval = "60"
    resolveURL = "Yes"
    publish = "No"
    path = "#variables.baseUrl#"
    requestTimeOut = "100"> 
```

我正在投入其中`task_init.cfm`。如果我在浏览器中打开此页面，则不会报告任何错误，但没有任何反应。

**问题：**
我知道在 CFAdmin 中需要允许计划任务。还有办法测试任务是否正在运行吗？该任务现在应该只发送一封电子邮件，所以我可以查看它是否正常工作，但我没有得到任何东西，我很好奇我是否做错了什么。

谢谢！

**编辑：**
好的，所以我已经完成了一半。我可以像这样列出任务：

```
 <cfdump output="dump.txt" label="catch" var="#createobject("java","coldfusion.server.ServiceFactory").getCronService().listall()#"> 
```

这给了我所有当前计划的任务。

我现在这样称呼我的任务：

```
<cfschedule  
proxyport="80"
port="80"
action="update"
operation="HTTPRequest"
task="taskManager_init"
interval="60"
publish="NO"
requestTimeOut="500"
resolveurl="NO"
startDate="12/01/2012"
startTime="11:30:00 AM"
URL="http://www.page.com/t/task_manager.cfm"
> 
```

其中，当我调用然后转储所有任务时，会创建一个如下条目：

```
 xx) [undefined array element] 
```

代替：

```
 xx) [struct]
disabled: NO
file: [empty string]
http_port: 80
http_proxy_port: 80
interval: xxxx
operation: HTTPRequest
password: xxxxxxxxxx
path: [empty string]
paused: NO
proxy_server: [empty string]
publish: NO
request_time_out: 500
resolveurl: NO
start_date: 12/12/2012
start_time: 1:00:00 AM
task: some task
url: xxxxx
username: xxxxxxx 
```

我可以删除我的`[undefined array element]`呼叫：

```
 <cfschedule action = "delete" task = "taskManager_init"> 
```

因此，我可以添加/删除任务，但它们没有正确显示在列表中，因此不会按应有的方式执行。

知道我做错了什么吗？（除了周一打电话给我的系统管理员......）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T06:14:05.050

您可以查看 cfroot\lib\neo-cron.xml 配置文件。这将确认信息已保存。

正在运行的任务可以生成输出或将详细信息放入日志文件或数据库中。即使 ColdFusion JVM 运行完全正常，我也看到调度程序运行了几个月，然后就停止运行。

看起来也`path = "#variables.baseUrl#"`很奇怪。我认为任务调度程序不支持将变量作为配置选项的一部分。你可能有

# python - 从旧数组中取消链接新数组：python

> ID：13664097
> 
> 赞同：1
> 
> 时间：2012-12-01T21:53:13.563
> 
> 标签：python, numpy

我的问题如下。我有一个二维数组。我从二维数组中取出一行作为一维数组并使用它并进行更改，但它也会更改二维数组中的原始条目，但我希望它们保持不变。我如何在python中解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T21:55:45.410

你可以使用[`ndarray.copy()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.copy.html#numpy.copy)：

```
In [17]: A = array([[1, 1], [3, 2], [-4, 1]])

In [18]: b = A[1].copy()

In [19]: b
Out[19]: array([3, 2])

In [20]: b[0] = 4

In [21]: b
Out[21]: array([4, 2])

In [22]: A
Out[22]: 
array([[ 1,  1],
       [ 3,  2],
       [-4,  1]]) 
```

如您所见，`A[1]`保持不变。

# c# - 输入字符串的格式不正确

> ID：13664098
> 
> 赞同：0
> 
> 时间：2012-12-01T21:53:27.200
> 
> 标签：c#, listview

为什么我会收到错误消息`Input string was not in a correct format`。在我的这行代码中？

```
Convert.ToInt32(listView1.Items[4].SubItems[4].ToString()) 
```

下面是我使用它的完整代码：

```
foreach (ListViewItem iiii in listView1.Items)
{
    if (Convert.ToInt32(listView1.Items[4].SubItems[4].ToString()) <= Convert.ToInt32(tenthousand.ToString()))
    {
        message2 = "GREAT";
        msgColor2 = System.Drawing.Color.Green;
        break;   // no need to check any more items - we have a match!
    }

    labelVideoViews2.Text = message2;
    labelVideoViews2.ForeColor = msgColor2;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T22:01:51.790

我认为您不需要将整数转换为字符串并将其解析回来：

```
Convert.ToInt32(tenthousand.ToString()) 
```

此外，您正在枚举所有项目，但仅使用第四项`listView1.Items[4]`。我认为这是错误的。并用于`Int32.TryParse`避免解析异常：

```
foreach (ListViewItem iiii in listView1.Items)
{
     int value;
     string text = iiii.SubItems[4].ToString();
     if (!Int32.TryParse(text, out value))
     {
         MessageBox.Show(String.Format("Cannot parse text '{0}'", text));
         continue; // not number was in listview, continue or break
     }

     if (value <= tenthousand)
     {
          labelVideoViews2.Text = "GREAT";
          labelVideoViews2.ForeColor = Color.Green;
          break;
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T21:55:11.770

[`Convert.ToInt32`](http://msdn.microsoft.com/en-us/library/sf1aw27b.aspx)当您向它传递一个不是数字的字符串时，该方法将抛出此异常。

如果值不包含可选符号后跟数字序列（0 到 9），则会引发此异常。因此，请确保字符串值`listView1.Items[4].SubItems[4].ToString()`是有效数字，并且仅包含 0-9 的数字和开头的可选符号。

或者，您可以使用[`int.TryParse`](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)不会引发异常的方法：

```
int result;
if (int.tryParse(listView1.Items[4].SubItems[4].ToString(), out result))
{
    // the value was successfully parsed to an integer => use the result variable here
}
else
{
   // the supplied value was not a valid number
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T21:56:02.000

您的字符串很可能包含除`int`字母甚至点之外的字符

在转换之前调试您的应用程序并确保它实际上只是数字

```
listView1.Items[4].SubItems[4].ToString() 
```

# iphone - 如何保存响应然后输出到屏幕

> ID：13664100
> 
> 赞同：-4
> 
> 时间：2012-12-01T21:53:50.260
> 
> 标签：iphone, objective-c

在我的应用程序中，我让用户输入一个数字，然后一旦输入该数字，就会向屏幕上的分配空间发送响应。如何保存多个响应以随机生成到指定区域？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-01T22:14:26.593

创建一个`NSMutableArray`并在那里添加数字。

```
NSMutableArray *array = [[NSMutableArray alloc] init];

//add the number
[array addObject: number]; 
```

现在您可以从数组中随机选择数字并显示它们。

```
int number = [array objectAtIndex: 1]; 
```

# cordova - PhoneGap/Cordova BlackBerry FileSystem.root 总是返回 SD 卡？

> ID：13664102
> 
> 赞同：7
> 
> 时间：2012-12-01T21:53:54.500
> 
> 标签：cordova, blackberry, file-io, sd-card

我在 BlackBerry 上加载了两个应用程序，一个是本机应用程序，另一个是基于 PhoneGap / Cordova 的应用程序。

这两个应用程序共享一个设置文件：`file:///store/home/user/myfile.txt`

要通过 Cordova 访问此文件，我调用：

`fileSystem.root.getFile("home/user/myfile.txt", null, gotFileEntry, fail);`

但是，在某些设备上`fileSystem.root`返回 SDCard 目录，而不是存储文件的内部存储器，因此出现`FileNotFound`错误。

我试过打电话`fileSystem.root.getParent(gotParent, fail);`，希望得到文件系统的根，然后从内部存储器中获取文件，如下所示：

`parentDir.getFile("store/home/user/myfile.txt", null, gotFileEntry, fail);`

但这也不起作用，我仍然收到未找到文件的错误。

如何每次使用 PhoneGap/Cordova 获取内部存储器的根目录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T13:33:58.303

您使用什么版本的 Cordova？从 BlackBerry WebWorks（OS 5.0 及更高版本）开始支持
Cordova [File-API 。](http://docs.phonegap.com/en/2.2.0/cordova_file_file.md.html)

我是否正确假设您只想读取（和写入）该文件？
如果是这样，您可以尝试使用[Cordova File-Reader](http://docs.phonegap.com/en/2.2.0/cordova_file_file.md.html#FileReader)和[Cordova File-Writer](http://docs.phonegap.com/en/2.2.0/cordova_file_file.md.html#FileWriter)。

**文件阅读器**

```
function win(file) {
    var reader = new FileReader();
    reader.onloadend = function(evt) {
        console.log("read success");
        console.log(evt.target.result);
    };
    reader.readAsText(file);
};

var fail = function(evt) {
    console.log(error.code);
};

entry.file(win, fail); 
```

**文件编写器**

```
function win(writer) {
    writer.onwrite = function(evt) {
        console.log("write success");
    };
    writer.seek(writer.length);
    writer.write("appended text");
};

var fail = function(evt) {
    console.log(error.code);
};

entry.createWriter(win, fail); 
```

**否则**试试那个片段（代码是一个旧项目，但当时工作）

```
<script type="text/javascript" charset="utf-8" src="css-js/phonegap-1.0.0.js"></script>
<script type="text/javascript" charset="utf-8">

// Wait for PhoneGap to load
//
document.addEventListener("deviceready", onDeviceReady, false);

// PhoneGap is ready
//
function onDeviceReady() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);

}

function gotFS(fileSystem) {
    var path = "readme.txt";
    fileSystem.root.getFile(path, {create: true, exclusive: false}, gotFileEntry, fail);

}

function gotFileEntry(fileEntry) {

    fileEntry.createWriter(gotFileWriter, fail);
}

function gotFileWriter(writer) {
    writer.onwrite = function(evt) {
        console.log("write success");
    };
    writer.write("some sample text"); 
```

我希望我能帮助你，最好的问候 F481

# c++ - 使用 C++ 创建所有者绘制的菜单，2012 风格

> ID：13664105
> 
> 赞同：5
> 
> 时间：2012-12-01T21:54:17.480
> 
> 标签：c++, winapi, contextmenu

我的任务目标很简单——将图标添加到通过调用 TrackPopupMenu API 显示的上下文菜单中。但显然，为 Windows 编码就像用勺子划桨一样，除了制作所有者绘制的菜单之外，没有简单的方法可以添加图标。所以我做了一些搜索，找到了一堆关于所有者绘制菜单的 C++ 代码，但到目前为止我找不到任何对我有用的东西。原因很简单——它绘制的菜单看起来像是从 Windows 95 中出来的……那么有什么方法可以制作具有默认 Windows 7 外观的自绘菜单吗？

PS。如果有一种更简单的方法可以向菜单项添加图标，例如 LoadIcon 然后 ChangeMenuItem 来设置它，如果有人能告诉我如何设置它，我将不胜感激，因为我很乐意使用它......

**PS2。**好吧，我喜欢的时间太长了。为什么我似乎不能在这个操作系统中做最简单的任务:(我做了一个[小测试项目](http://forums.codeguru.com/attachment.php?attachmentid=30701&d=1354434597)来说明这个问题。我用自己的 CreatePARGBBitmapFromIcon 方法加载位图，该方法将图标转换为 PARGB 位图（如下所示）然后在两个地方显示它：CStatic 控件（屏幕中间，看起来不错）和菜单项（完全是这样）。这是 Windows 7 和 XP 的屏幕截图（两者看起来完全不同）：

![在此处输入图像描述](../Images/485ad935eca09d884fafa6fed63d1b1e.png)

![在此处输入图像描述](../Images/598b61c126aaadb7693ff8d0961cc5a0.png)

所以，伙计们，说真的，我在这里错过了什么？？？？

**PS3。**感谢@DavidHeffernan，我能够修复它。[这是有效的 C++/MFC 解决方案](http://forums.codeguru.com/attachment.php?attachmentid=30707&d=1354594868)，这是该解决方案所基于的[文章，下面是几个屏幕截图：](http://www.nanoant.com/programming/themed-menus-icons-a-complete-vista-xp-solution)

![在此处输入图像描述](../Images/b118491f3f0cf67f15cd29c0a03cd1ab.png) ![在此处输入图像描述](../Images/947ee77be45caef805396f7adc0cb130.png)

仅供参考，我花了大约 2 天的时间来解决这个问题——在 OS X 或 iOS 上大约需要 2 分钟......

最后，我完全赞同源文章中我最喜欢的几句话：

> 如果只有简单一致的 API 用于制作菜单项图标，所有这些技巧和食谱都将毫无价值。不幸的是，菜单图标，一直存在于 Windows 和 Microsoft 应用程序中的东西，从来没有任何像样的 API，而且使这些图标工作的方法在每个主要的 Windows 版本中都发生了变化，**这使得我们开发人员浪费我们的时间将我们的应用程序“移植”到新的“闪亮的“Windows，而不是做一些富有成效**的事情。

这很好地总结了它：

> **啊啊啊啊啊啊啊啊啊啊啊啊啊啊！为什么微软被白痴填满？？？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T10:44:10.843

这篇文章告诉你怎么做： http: [//www.nanoant.com/programming/themed-menus-icons-a-complete-vista-xp-solution](http://www.nanoant.com/programming/themed-menus-icons-a-complete-vista-xp-solution)

总之，在 XP 上，您应该在 MENUITEMINFO 结构的 hbmpItem 字段中传递 HBMMENU_CALLBACK。这使您的菜单所有者绘制，但您只需要处理 WM_MEASUREITEM 和 WM_DRAWITEM 中的图标。

在 Vista 及更高版本中，您将 PARGB32 位图（预乘 alpha，32 位颜色深度）放入 hbmpItem 并让系统绘制菜单。因此，没有所有者可以使用 Vista 及更高版本。尽管主题 API 确实提供了绘制菜单的功能，但要做到正确非常困难，而且实际上没有必要，因为您可以让系统来做。

# jquery - jQuery UI 可拖动不是函数错误

> ID：13664106
> 
> 赞同：0
> 
> 时间：2012-12-01T21:54:23.770
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

好的，我不断收到错误消息，无法拖动任何 div...

错误信息如下：

> 未捕获的异常：TypeError: '$(".polaroid_attachments_mod_25").draggable' is not a function 在[http://developers.dream-portal.net/test/index.php](http://developers.dream-portal.net/test/index.php)中 ($) 中的第 343 行第 4 列抛出错误: $(".polaroidpolaroid_attachments_mod_25").draggable({ 通过 Function.prototype.apply() 从第 2 行调用，在 [http://ajax.googleapis.com/ajax/libs/jquery/1/ (t) 中的第 33900 列jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js) : if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse) 从 [http://ajax 中 () 中的第 2 行第 34244 列调用。 googleapis.com/ajax/libs/jquery/1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js): (function r(t){v.each(t,function(t,n){var i=v.type(n);i==="function"?(!e.unique||!c.has (n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(参数),i?o=a.length:n&&(s=t,l(n) ) 从[http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js) (e) 中的第 2 行第 22488 列调用 ：返回 v.ready.promise().done(e) ，这从[http://developers.dream-portal.net/test/index.php](http://developers.dream-portal.net/test/index.php)中 startPolaroids() 的第 276 行第 3 列调用 ： jQuery(document).ready(function($){ 从第 1322 行调用，列5 in () 在 [http://developers.dream-portal.net/test/Themes/default/scripts/script.js?fin20](http://developers.dream-portal.net/test/Themes/default/scripts/script.js?fin20) : aOnloadEventsi;

我正在使用一个外部 js 文件，该文件通过以下功能加载到网页的头部：

```
var aOnloadEvents = new Array();
function addLoadEvent(fNewOnload)
{
    // If there's no event set, just set this one
    if (typeof(fNewOnload) == 'function' && (!('onload' in window) || typeof(window.onload) != 'function'))
        window.onload = fNewOnload;

    // If there's just one event, setup the array.
    else if (aOnloadEvents.length == 0)
    {
        aOnloadEvents[0] = window.onload;
        aOnloadEvents[1] = fNewOnload;
        window.onload = function() {
            for (var i = 0, n = aOnloadEvents.length; i < n; i++)
            {
                if (typeof(aOnloadEvents[i]) == 'function')
                    aOnloadEvents[i]();
                else if (typeof(aOnloadEvents[i]) == 'string')
                    eval(aOnloadEvents[i]);
            }
        }
    }

    // This isn't the first event function, add it to the list.
    else
        aOnloadEvents[aOnloadEvents.length] = fNewOnload;
} 
```

在网页正文中（这是我可以从运行它的脚本中访问的所有内容），我有以下用 PHP 编写的代码（所以请原谅引号的转义）：

```
// Only want to load up jQuery 1 time here!
if(!window.jQuery)
{
   var script = document.createElement("script");
   script.type = "text/javascript";
   script.async = true;
   script.src = "//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js";
   var oScripts = document.getElementsByTagName("script");
   var s = oScripts[0];
   s.parentNode.insertBefore(script, s);
}

if(!jQuery.ui)
{
   var script = document.createElement("script");
   script.type = "text/javascript";
   script.async = true;
   script.src = "//ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js";
   var oScripts = document.getElementsByTagName("script");
   var s = oScripts[0];
   s.parentNode.insertBefore(script, s);
}

function randomNum_polaroid_attachments_mod_25(minVal, maxVal)
{
    var randVal = minVal + (Math.random() * (maxVal - minVal + 1));
    return Math.round(randVal);
}

function startPolaroids()
{
    jQuery(document).ready(function($){
        // Set up default values.
        var offsetStartX = 0;
        var offsetEndX = $(document).width() - $(".polaroidpolaroid_attachments_mod_25").width();
        var offsetStartY = 0;
        var offsetEndY = $(document).height() - $(".polaroidpolaroid_attachments_mod_25").height();
        var objContain = 'document';
            var objEle = document.getElementById("placeholder");
            if (objEle)
            {

                var getObjOffset = $("#placeholder").position();

                offsetStartX = getObjOffset.left;
                offsetEndX = (offsetStartX + $("#placeholder").outerWidth(true)) - $(".polaroidpolaroid_attachments_mod_25").width();
                offsetStartY = getObjOffset.top;
                offsetEndY = (offsetStartY + $("#placeholder").outerHeight(true)) - $(".polaroidpolaroid_attachments_mod_25").height();

                if (offsetEndY < offsetStartY)
                    offsetEndY = offsetStartY + 1;

                if (offsetEndX < offsetStartX)
                    offsetEndX = offsetStartX + 1;
                objContain = '#placeholder';
            }

        // When everything has loaded, place all polaroids on a random position relative to document or element id!
        $(".polaroidpolaroid_attachments_mod_25").each(function (i) {
            var tempVal = Math.round(Math.random());
            if(tempVal == 1) {
                var rotDegrees = randomNum_polaroid_attachments_mod_25(330, 360); // rotate left
            } else {
                var rotDegrees = randomNum_polaroid_attachments_mod_25(0, 30); // rotate right
            }

            var cssObj = { 'left' : randomNum_polaroid_attachments_mod_25(offsetStartX, offsetEndX),
                'top' : randomNum_polaroid_attachments_mod_25(offsetStartY, offsetEndY),
                msTransform: 'rotate('+ rotDegrees + 'deg)', // IE 9
                '-moz-transform' : 'rotate('+ rotDegrees + 'deg)',  // Firefox
                '-webkit-transform' : 'rotate('+ rotDegrees + 'deg)',  // Safari & Chrome
                '-o-transform' : 'rotate('+ rotDegrees + 'deg)', // Opera
                'transform' : 'rotate\('+ rotDegrees + 'deg)' }; // added in case CSS3 is standard
            $(this).css(cssObj);
        });

        // Set the Z-Index (used to display images on top while dragging)
        var zindexnr = 1;

        // boolean to check if the user is dragging
        var dragging = false;

        // Show the polaroid on top when clicked on
        $(".polaroidpolaroid_attachments_mod_25").mouseup(function(e){
            if(!dragging) {
                // Bring polaroid to the foreground
                zindexnr++;
                var cssObj = { 'z-index' : zindexnr,
                'transform' : 'rotate(0deg)',           // added in case CSS3 is standard
                '-webkit-transform' : 'rotate(0deg)',   // Chrome and Safari
                msTransform: 'rotate(0deg)', // IE 9
                '-moz-transform' : 'rotate(0deg)',      // Firefox
                '-o-transform' : 'rotate(0deg)' };      // Opera
                $(this).css(cssObj);
            }
        });

        // Make the polaroid draggable & display a shadow when dragging
        $(".polaroidpolaroid_attachments_mod_25").draggable({
            cursor: 'pointer',
            containment: objContain,
            start: function(event, ui) {
                dragging = true;
                zindexnr++;
                var cssObj = { 'box-shadow' : '#888 5px 10px 10px', // added in case CSS3 is standard
                    '-ms-box-shadow' : '#888 5px 10px 10px', // IE 9
                    '-o-box-shadow' : '#888 5px 10px 10px',  // Opera
                    '-moz-box-shadow' : '#888 5px 10px 10px', // firefox 3.5 - 4.0
                    '-webkit-box-shadow' : '#888 5px 10px 10px', // Chrome & Safari
                    'margin-left' : '-10px',
                    'margin-top' : '-10px',
                    'z-index' : zindexnr };
                $(this).css(cssObj);
            },
            stop: function(event, ui) {
                var tempVal = Math.round(Math.random());
                if(tempVal == 1) {
                    var rotDegrees = randomNum_polaroid_attachments_mod_25(330, 360); // rotate left
                } else {
                    var rotDegrees = randomNum_polaroid_attachments_mod_25(0, 30); // rotate right
                }
                var cssObj = { 'box-shadow' : '', // added in case CSS3 is standard
                    '-ms-box-shadow' : '', // IE 9
                    '-o-box-shadow' : '',  // Opera
                    '-moz-box-shadow' : '', // firefox 3.5 - 4.0
                    '-webkit-box-shadow' : '', // Chrome & Safari
                    'transform' : 'rotate('+ rotDegrees + 'deg)', // added in case CSS3 is standard
                    '-webkit-transform' : 'rotate('+ rotDegrees + 'deg)', // Chrome & Safari
                    msTransform: 'rotate('+ rotDegrees + 'deg)', // IE 9
                    '-moz-transform' : 'rotate('+ rotDegrees + 'deg)',  // Firefox
                    '-o-transform' : 'rotate('+ rotDegrees + 'deg)', // Opera
                    'margin-left' : '0px',
                    'margin-top' : '0px' };
                $(this).css(cssObj);
                dragging = false;
            }
        });
    })
}
        // Calling SMF js function, defined in script.js, here.
        addLoadEvent(startPolaroids); 
```

我无法拖动 div，它们确实存在于 HTML 中。我在上面得到了那个错误，所以，试图在这里查明确切的问题，可以用另一双眼睛来解决这个问题。

如果有帮助，这里还有一个指向实际页面的链接：http: [//developers.dream-portal.net/test/index.php](http://developers.dream-portal.net/test/index.php)

多谢你们 ：）

所以，如果我改变这个：

```
// Only want to load up jQuery 1 time here!
if(!window.jQuery)
{
   var script = document.createElement("script");
   script.type = "text/javascript";
   script.async = true;
   script.src = "//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js";
   var oScripts = document.getElementsByTagName("script");
   var s = oScripts[0];
   s.parentNode.insertBefore(script, s);
}

if(!jQuery.ui)
{
   var script = document.createElement("script");
   script.type = "text/javascript";
   script.async = true;
   script.src = "//ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js";
   var oScripts = document.getElementsByTagName("script");
   var s = oScripts[0];
   s.parentNode.insertBefore(script, s);
} 
```

对此：

```
if(!window.jQuery)
{
   var script = document.createElement("script");
   var uiScript = document.createElement("script");
   script.type = "text/javascript";
   uiScript.type = "text/javascript";
   script.async = false;
   uiScript.async = false;
   script.src = "//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js";
   uiScript.src = "//ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js";
   var oScripts = document.getElementsByTagName("script");
   var s = oScripts[0];

   s.parentNode.insertBefore(script, s);
   s.parentNode.insertBefore(uiScript, s);
} 
```

它比 WORKS 看起来不错，但是如果 jQuery 存在并且 jQuery UI 尚未出现在页面上，则代码不会将 jQuery UI 放入其中。我该怎么做呢？因为其他软件也可能在操作页面，并将 jQuery 添加到页面中。我应该如何编码？认为我们不能使用 oScripts[0] 插入到该元素之前......因为我们真的不知道从哪里调用 jQuery，只是它存在......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T23:52:37.983

我看到你的 jQuery UI 没有加载。你的脚本：

```
if(!jQuery.ui)
{
   // bla bla
} 
```

导致错误，因为未定义 jQuery。我认为您应该先等待 jQuery 完全加载，然后继续执行下一个函数以检查 jQuery UI 的可用性。您需要使用同步执行脚本：

```
if(!window.jQuery)
{
   var script = document.createElement("script");
   script.type = "text/javascript";
   script.async = false; // CHANGES
   script.src = "//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js";
   var oScripts = document.getElementsByTagName("script");
   var s = oScripts[0];
   s.parentNode.insertBefore(script, s);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-08T08:40:42.630

**序列**非常重要，您需要先加载/导入 JQuery，然后再加载/导入 Jquery UI。如下 ： `<script src="https://code.jquery.com/jquery-1.10.2.js"></script> <script src="https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>`

# jquery - 单选按钮的标签在使用 jquery modal popup 创建的弹出窗口中不起作用

> ID：13664107
> 
> 赞同：1
> 
> 时间：2012-12-01T21:54:32.477
> 
> 标签：jquery, html

这听起来更像是一个 html 问题而不是 jquery，我希望有人可以帮助我解决这个问题。

我有一个隐藏的 div，其中包含带有 Label For 标签的单选按钮。这在页面上效果很好（我通过从 div 中删除隐藏属性进行了测试），但是当我从使用 jquery 创建的模式弹出窗口中拉出该 div 内容时，我的 Label For 在弹出窗口上不起作用。似乎当我从模态窗口单击标签时，它会单击父页面上的相应单选，而不是模态窗口上的单选。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:01:01.813

嗯...将标签连接到输入元素的老式方式是为标签赋予与输入元素`for`相等的属性`id`。

```
<label for="acceptEmail" >Accept emails</label>
<input type="checkbox" id="acceptEmail" /> 
```

您也可以通过将输入元素*放在*标签内来获得相同的结果。

```
<label>Accept emails
  <input type="checkbox" id="acceptEmail" />
</label> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-08T12:04:17.580

我在输入旁边添加了一个带有 class="text" 的 span 标签

```
 <label>
                <input type="radio" name="rr"  />
                <span class="text">&nbsp;</span>
            </label> 
```

# performance - 矩阵的行主要与列主要布局

> ID：13664110
> 
> 赞同：4
> 
> 时间：2012-12-01T21:54:54.083
> 
> 标签：performance, matrix, fortran

在对密集矩阵计算进行编程时，是否有任何理由选择行优先布局而不是列优先布局？

我知道，根据所选矩阵的布局，我们需要编写适当的代码来有效地使用高速缓存来提高速度。

以行为主的布局似乎更自然、更简单（至少对我而言）。但是像 LAPACK 这样用 Fortran 编写的主要库使用列主布局，所以做出这个选择肯定是有原因的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-02T00:23:38.847

FORTRAN 旨在解决科学和工程问题。从科学的角度来看，以列为主的存储更为自然，因为一般的线性代数约定使用列向量并且通常将矩阵视为列向量的串联。在矩阵向量乘法中，列向量位于右侧（乘法后），连续矩阵进一步添加在左侧，例如`B*(A*x)`. 诸如 COBOL、PL/1 和 C 之类的语言将矩阵视为行记录的集合，因此对它们而言，行优先顺序更为自然。

在线性代数中，向量由其坐标表示：`x = x[1]*e1 + x[2]*e2 + ... + x[n]*en`其中`x[i]`是向量坐标，`ei`是第`i`- 个基向量。在矩阵表示中，基向量是列向量。然后，一个线性算子`A`，作用于`x`，给出：

```
y = A*x = A*{x[1]*e1 + x[2]*e2 + ... x[n]*en}
        = x[1]*(A*e1) + x[2]*(A*e2) + ... x[n]*(A*en) 
```

在矩阵表示中，线性算子`A`由`n`列组成，其中列`i`是`A`作用于`i`第 - 个基向量的结果，`A*x`然后是 的列`A`与来自 的坐标的系数的线性组合`x`。在 FORTRAN 中，这将是：

```
! Zero out the result vector
DO k = 1,n
  y(k) = 0.0
END DO

! Iterate over the columns of A
DO i = 1,n
  ! Add the i-th column to the linear combination with a weight of x(i)
  w = x(i)
  DO k = 1,n
    y(k) = y(k) + w*A(k,i)
  END DO
END DO 
```

这会自动优先于`A`. 这可能看起来很尴尬，但早在 50 年代，当 FORTRAN 诞生时，FMAC 硬件和寄存器优化并没有像现在这样流行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T23:20:37.680

我没有看到任何区别。两者都是将多维矩阵转换为线性内存顺序的好方法。转换方程非常相似。

还有 / 和 \ 。以及大端和小端。有人做出了选择，后来有人做出了另一个选择。

# loops - Smalltalk - 每 2 秒打印一次

> ID：13664115
> 
> 赞同：3
> 
> 时间：2012-12-01T21:55:43.953
> 
> 标签：loops, delay, smalltalk, pharo

我正在使用 Pharo 在 Smalltalk 中编码。我的代码：

```
|i delay|
i := 0.
[i < 5] whileTrue: [
    [
        delay := Delay forSeconds: 2.
        delay wait.
        Transcript show: '2 seconds are up'.
        Transcript cr.
    ] fork.
    i := i + 1.
] 
```

它一次打印所有“2 秒到了”，而不是每 2 秒打印一次：

```
2 seconds are up
2 seconds are up
2 seconds are up
2 seconds are up
2 seconds are up 
```

拜托，谁能告诉我如何在 Smalltalk 中每 2 秒打印一些东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T22:06:14.417

您一次分叉了所有 5 个进程，以便所有 5 个延迟同时结束。要从后台每 2 秒打印一次，而是在一个单独的进程中分叉一个完整的循环：

```
|i delay|
[   
    i := 0.
    [i < 5] whileTrue: [
        delay := Delay forSeconds: 2.
        delay wait.
        Transcript show: '2 seconds are up'.
        Transcript cr.
        i := i + 1]
] fork 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T06:47:20.490

Janko 给出的答案当然是正确的——你立即分叉了 5 个进程，所有这些进程都等待了相同的 2 秒，所以它们都同时完成。

这里有一点解释：

```
[|delay|
  delay := Delay forSeconds: 2.
  5 timesRepeat: [
     delay wait.
     Transcript crShow: '2 secs']
] fork 
```

您只需创建一个延迟对象，因为您希望每次迭代都延迟相同的时间。

如果您不需要索引值，则 timesRepeat: 更干净（如果您确实需要索引值，to:do: 比 whileTrue: 更干净）。

最后，如果您尝试通过向块发送值消息而不是分叉来进行调试，您将看到 10 秒延迟，然后将显示所有 5 行。这是因为在前台任务繁忙时 GUI 不会更新，而 fork 会导致块在后台运行并允许 GUI（特别是 Transcript）更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T22:59:36.177

```
[5 timesRepeat: [
    (Delay forSeconds: 2) wait.
     Transcript crShow: '2 secs'] .
] fork 
```

# ruby - 将长字符串散列到给定范围内的值的快速有效方法

> ID：13664118
> 
> 赞同：0
> 
> 时间：2012-12-01T21:55:50.027
> 
> 标签：ruby, string, hash

将随机字符串（最多 1024 个字符，它们可以是 UTF8）散列到从 0 到 100 的整数值的最有效方法是什么？我认为计算 CRC 是最快的，但我不确定。

编辑：这个散列的唯一要求是超级快并且不在会话之间改变（相同的数据=>相同的散列值）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T23:20:08.030

尝试以下操作：

```
"af".sum % 100 # => 99
"ag".sum % 100 # => 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T23:18:50.023

使用任何散列函数，将其转换为整数值，然后计算 100 的模数。

使用 MD5 的示例：

```
require 'digest/md5'

def hash_100(str)
  Digest::MD5.hexdigest(str).to_i(16) % 100
end

hash_100('hello') # => 94
hash_100('world') # => 51 
```

我怀疑有一种方法可以直接从摘要中获取整数，而无需先通过十六进制，但这在我的脑海中。

# wcf - 具有企业身份验证和模拟的 Windows 应用商店应用

> ID：13664120
> 
> 赞同：2
> 
> 时间：2012-12-01T21:55:55.270
> 
> 标签：wcf, windows-8, microsoft-metro, impersonation, windows-store-apps

**简短版本**：为什么当我模拟 Windows 应用商店应用程序发出的网络请求时，我得到具有正确用户名的 WindowsIdentity 对象，但其 IsAuthenticated 属性返回 False？从浏览器（包括 Metro IE10）发出相同的请求会给出 IsAuthenticated==true。

**长版**：
我正在制作一个内部企业解决方案的原型，它由 WCF 服务和 WinJS 应用程序组成。WCF 服务基于 webHttpBinding（即简单的 GET/POST 请求）。

需要代表用户发出请求来处理某些操作，因此服务被配置为模拟其调用者。这是示例配置：

```
<system.serviceModel>
  <bindings>
    <webHttpBinding>
      <binding name="CustomizedWebBinding">
        <security mode="TransportCredentialOnly">
          <transport clientCredentialType="Windows" />
        </security>
      </binding>
    </webHttpBinding>
  </bindings>
    <behaviors>
      <endpointBehaviors>
        <behavior name="Web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
        <serviceBehaviors>
            <behavior name="">
                <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
                <serviceDebug includeExceptionDetailInFaults="false" />
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <services>
        <service name="WcfService">
            <endpoint address="" binding="webHttpBinding" bindingConfiguration="CustomizedWebBinding" contract="IWcfService" behaviorConfiguration="Web">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
            <host>
                <baseAddresses>
                    <add baseAddress="http://localhost:8787/" />
                </baseAddresses>
            </host>
        </service>
    </services>
</system.serviceModel> 
```

...和代码：

```
public class WcfService : IWcfService
{
    [OperationBehavior(Impersonation=ImpersonationOption.Required)]
    public UserInfo GetUserInfo()
    {
        UserInfo ui = new UserInfo();
        WindowsIdentity identity = ServiceSecurityContext.Current.WindowsIdentity;

        ui.UserName = identity.Name;
        ui.IsAuthenticated = identity.IsAuthenticated;
        ui.ImpersonationLevel = identity.ImpersonationLevel.ToString();
        ui.IsAnonymous = identity.IsAnonymous;
        ui.IsGuest = identity.IsGuest;
        ui.IsSystem = identity.IsSystem;
        ui.AuthenticationType = identity.AuthenticationType;

        return ui;
    }
} 
```

因此，此操作只是收集有关调用者的信息并将其发送回 json 字符串。

移动到客户端。为了启用自动身份验证，我在 Windows Store 应用程序的清单文件中检查了“企业身份验证”、“Internet（客户端）”和“私有网络”。

在 Windows Store 应用程序中，我使用 WinJS.xhr 函数发送请求：

```
 var options = {
        url: "http://localhost:8787/getuserinfo"
    };

    WinJS.xhr(options).then(function (xhrResponse) {
        var userInfoBlock = document.getElementById("userInfoBlock");
        var data = JSON.parse(xhrResponse.response);

        userInfoBlock.innerHTML += "<ul>"

        for (var p in data) {
            if (data.hasOwnProperty(p)) {
                userInfoBlock.innerHTML += "<li>" + p + ": " + data[p] + "</li>";
            }
        }

        userInfoBlock.innerHTML += "</ul>";
    }); 
```

现在，当我执行 Windows Store 应用程序并发送请求时，我得到的响应是：

```
AuthenticationType: "NTLM"
ImpersonationLevel: "Impersonation"
IsAnonymous: false
IsAuthenticated: false
IsGuest: false
IsSystem: false
UserName: "TESTBOX\dev" 
```

如果我使用浏览器的地址栏发送请求，我会得到相同的响应，唯一的区别是“IsAuthenticated: true”。

我还注意到，如果我禁用“企业身份验证”，它会导致凭据选择器弹出，并且在提供正确的凭据后，我会得到“IsAuthenticated：true”。

我是否遗漏了某些东西或对企业身份验证功能期望过高？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T10:07:46.073

我想我偶然发现了同样的问题（[Calling a WCF service using Windows Auth from a Windows Store App](https://stackoverflow.com/questions/18589315/calling-a-wcf-service-using-windows-auth-from-a-windows-store-app/18632649#18632649)），看起来具有企业身份验证的 Windows Store Apps 会阻止使用模拟调用本地主机上的服务。

当我在域上的另一台服务器上托管我的服务时，它工作得很好。

# c# - 使用 Linq 将自定义模型索引与 C# 中的 int 数组进行比较

> ID：13664121
> 
> 赞同：1
> 
> 时间：2012-12-01T21:55:56.730
> 
> 标签：c#, linq

我目前正在开发一个使用 Code First 和 Linq to 实体的网站。我有一个名为 Productos 的自定义模型，其中包含一个名为 Especificaciones 的自定义模型列表，其中还包含一个名为 Etiquetas 的自定义模型。Etiquetas 有一个名为 EtiquetaId 的属性。

这是我的模型的一个例子：

```
 public class ObjectProducto
    {
         public IEnumerable<ObjectEspecificaciones> Especificaciones { get; set; }
    }

    public class ObjectEspecificaciones
    {
         public IEnumerable<Etiquetas> etiquetas { get; set; }
    }

    public  class Etiquetas
    {
           [Key]
           [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
           public int EtiquetaId { get; set; }
           public string texto { get; set; }
    } 
```

我有一个用视图中的值填充的 int 数组，该数组称为 MyOptions。

我需要在 MyOptions 中获取所有包含 EtiquetaId 和 EtiquetaId 的 Especificaciones。

在这一点上，我已经检索到与 MyOptions 中的任何值匹配的所有 Especificaciones，但我需要 Etiquetas Inside Especificaciones 与所有 MyOptions 值匹配。

我有来自 Productos 的值，它们的所有 Especificaciones 和所有 Especificaciones 中的所有 Etiquetas 都已经在一个名为 procatm 的变量中。

目前我的查询如下所示：

```
ProductosCatalogo = 
    (from procatm in catm.ProductosCatalogo 
     where procatm.Especificaciones.Any(e => e.etiquetas.Any(et =>                
                                  et.tipo_etiqueta.CompareTo("categoria") != 0 && 
                                  et.tipo_etiqueta.CompareTo("tipo") != 0 && 
                                  MyOptions.Contains(et.EtiquetaId))) 
     select procatm).AsEnumerable() 
```

我不知道我能不能做出类似的东西

```
ProductosCatalogo = 
    (from procatm in catm.ProductosCatalogo 
     where procatm.Especificaciones.Any(e => e.etiquetas.Any(et =>  
                                  et.tipo_etiqueta.CompareTo("categoria") != 0 && 
                                  et.tipo_etiqueta.CompareTo("tipo") != 0 &&
                                  MyOptions.All(...)..... 
     select procatm).AsEnumerable() 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T03:25:09.087

您在 SelectMany 之后，SelectMany 基本上会展平集合，例如 {1, 2} 和​​ {3, 4} 之类的两个集合变成 {1, 2, 3, 4}

尝试这个：

```
 ProductosCatalogo = 
           catm.ProductosCatalogo
           .Where(pc => pc.Especificaciones.Any(e => e.etiquetas.Any(et => et.tipo_etiqueta.CompareTo("categoria") != 0 && et.tipo_etiqueta.CompareTo("tipo") != 0 && MyOptions.Contains(et.EtiquetaId))))
           .SelectMany(pc => pc.Especificaciones.SelectMany(et => et.etiquetas)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:20:04.837

我相信我对这个问题的解释还不够远。只需要检查一个 Etiquetas 数组是否是另一个数组的子集，但是 opciones 中的所有元素都包含在标签 Ienumerable 中。

找到了答案:)

感谢所有提交答案的人：D

```
public bool IsSubsetof(int[] opciones, IEnumerable<Etiquetas> tags)
{ 
    int[] tagens;
    tagens= new int[tags.Count()];
    for (int i = 0; i < tagens.Length; i++)
    {
        tagens[i] = tags.ToArray()[i].EtiquetaId;
    }
    return !opciones.Except(tagens).Any();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T09:31:59.387

如果我理解正确，那么您只需将 second 替换`Any`为`All`

```
ProductosCatalogo = 
    (from procatm in catm.ProductosCatalogo 
     where procatm.Especificaciones.Any(e => e.etiquetas.All(et =>
                                 et.tipo_etiqueta.CompareTo("categoria") != 0 &&
                                 et.tipo_etiqueta.CompareTo("tipo") != 0 && 
                                 MyOptions.Contains(et.EtiquetaId))) 
     select procatm).AsEnumerable() 
```

在这种情况下，Especificaciones 的所有 Etiquetas 都应该出现在 MyOptions 数组中。

# c - 如何在C中提取子字符串

> ID：13664126
> 
> 赞同：0
> 
> 时间：2012-12-01T21:56:50.840
> 
> 标签：c, file, substring

我正在从文件中读取数据，我只需要从以下数据中提取整数。我该如何完成它？谢谢。

我的输入将是 field6，我需要删除这些字符“];” 并将其存储在一个整数变量中。

我的代码：-

```
field6 = strtok(NULL," ");
if (isdigit(field6))
{
   weight = atoi (field6);
   printf("%d\n",weight);
} 
```

输入：

```
43];
2];
4];
16];
25]; 
```

输出：

```
43
2
4
16
25 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:11:20.200

尝试

```
field6 = strtok(NULL,"\n");
weight = atoi (field6);
printf("%d\n",weight); 
```

这是 atoi 完全按照您的需要做的那些罕见的情况之一。

无法检测到的错误条件是“];” 那将被解释为零。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-01T22:27:44.297

没有 sscanf 然后：

```
#include <stdio.h>

int main(int argc, char** argv)
{
  const char *test = "123];";

  int i = 0;

  const char *p = test;
  while (*p && isdigit(*p))
  {
    if (p != test) i *= 10;
    i += *p - '0';
    ++p;
  }

  if (*p != ']')
  {
    // we have an error!
    return 1;
  }

  printf("%i\n", i);
} 
```

# zsh - 使用 urxvt click 在当前运行的浏览器中打开链接的 Shell 脚本

> ID：13664128
> 
> 赞同：4
> 
> 时间：2012-12-01T21:57:05.833
> 
> 标签：zsh, rxvt

我有一个简单的 shell 脚本：

```
#!/bin/zsh

URL=$1

function findBrowser {
    processName=$1
    ps ax | grep "$processName" | grep -v grep | wc -l
}

CNTFF=`findBrowser "firefox"`
CNTCH=`findBrowser "chromium"`

echo "$*" > $HOME/logurls

if [ $CNTFF -ge 1 ] 
then
    /usr/bin/firefox "$URL"
elif [ $CNTCH -ge 1 ] 
then
    /usr/bin/chromium "$URL"
else
    echo "No running browser instance"
fi 
```

如果使用 URL 作为参数从命令行调用它，则一切正常。但是，如果我在 urxvt 的配置中指定脚本，则不会传递任何 URL（我正在检查 logurls）。

urxvt 的配置是

```
URxvt.perl-ext-common:  default,matcher,clipboard
URxvt.matcher.button:   1
URxvt.urlLauncher:      $HOME/bin/openurl 
```

最奇怪的是，如果我将 urlLauncher 更改为 /usr/bin/firefox - 那么它会以某种方式打开 URL。所以看起来 URL 被传递给了 firefox，但没有传递给我的脚本。

调试的方法是什么？还是我错过了有关 urxv 的一些东西？

*如果我指定*/home/user/bin/openurl*而不是*$HOME/bin/openurl则**更新效果很好**

# python - 用 matplotlib 绘制皮尔逊相关系数

> ID：13664129
> 
> 赞同：1
> 
> 时间：2012-12-01T21:57:10.877
> 
> 标签：python, matplotlib, statistics, scipy

我已经能够在 sciPy 中使用 pearsonr 函数来获取相关系数，现在想使用 matplotlib 将结果绘制到散点图上。

我浏览了文档，但看不到任何帮助。

实现这一目标的最佳方法是什么。

我不是数学家，所以这一切都很新。

Excel中有一个函数可以做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-02T06:31:13.403

matplotlib.org 有几个例子。以下是您开始使用数据的方法：

```
import matplotlib.pyplot as plt
fig, ax1 = plt.subplots()
x = [50,500,1500,2500];
y = [72,414,1,13]
ax1.plot(x, y, 'bo')
plt.show() 
```

这里是可用的最基本示例的链接：http: [//matplotlib.org/examples/pylab_examples/simple_plot.html](http://matplotlib.org/examples/pylab_examples/simple_plot.html)

# android - Android 开发 - 单击一个列表视图到另一个列表视图的代码

> ID：13664131
> 
> 赞同：-1
> 
> 时间：2012-12-01T21:57:14.703
> 
> 标签：android, listview, click

我只是想创建一个包含“a”、“b”、“c”的 ListView。当我单击每个项目时，我希望每个项目都指向一个独特的活动，每个活动都包含不同的 ListView。

列表显示

*   一个
    *   1
    *   2
    *   3
*   乙
    *   3
    *   4
    *   5
*   C
    *   6
    *   7
    *   8

请为此提供最佳代码。在这里很难找到能做到这一点的东西。大多数条目对我来说太具体了，无法清楚地了解如何以最一致、最有效的方式完成所有这些工作。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T23:52:26.733

如果您想要一个 Activity 中具有 A、B、C 的 ListView 以及另一个 Activity 中的子列表，您实际上只需要一个通用 ListActivity 来处理这个问题。您只需向 ListActivity 传递不同的数据集。

在`onCreate()`下面：

*   如果 Activity 没有传递特殊数据，它将显示 A、B、C 并使用该`onListItemClick()`方法启动子 Activity。
*   如果 Activity 确实在 Intent 中存储了额外的数据，那么它会在 ListView 中显示这些额外的数据，并且将忽略对`onListItemClick()`.

```
public class Example extends ListActivity {
    boolean isSubList = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        String[] array;
        Intent received = getIntent();
        // Setup as main ListView
        if(received == null || !received.hasExtra("array")) {
            array = new String[] {"A", "B", "C"};
        }
        // Setup as sub ListView
        else {
            isSubList = true;
            array = received.getStringArrayExtra("array");
        }

        setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, array));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        if(!isSubList) {
            Intent starting = new Intent(Example.this, Example.class);
            switch(position) {
            case 0:
                starting.putExtra("array", new String[] {"1", "2", "3"});
                break;
            case 1:
                starting.putExtra("array", new String[] {"4", "5", "6"});
                break;
            case 2:
                starting.putExtra("array", new String[] {"7", "8", "9"});
                break;
            }
            startActivity(starting);
        }
    }
} 
```

# asp.net - 使用 Mysql 的 IIS 上的 WCF 数据服务

> ID：13664133
> 
> 赞同：2
> 
> 时间：2012-12-01T21:57:26.143
> 
> 标签：asp.net, mysql, wcf, c#-4.0, wcf-data-services

我有一个基于从 MySQL 模式创建的 EntityFramework 模型创建为 WFC 数据服务的 Web 服务。当我在 Visual Studio 中运行 Web 服务时，会创建 Web 服务并且我能够检索数据。我在本地运行测试，但 Web 服务连接到远程数据库（MySQL-net/connector 6.6.4.0）。它运行得像个冠军。

当我将数据服务发布到我的共享主机提供商时，我的问题就开始了。当我这样做时，我收到以下错误消息：

```
 The server encountered an error processing the request. The exception message is 'Exception has been thrown by the target of an invocation.'. See server logs for more details. The exception stack trace is:

at System.RuntimeFieldHandle.GetValue(RtFieldInfo field, Object instance, 
RuntimeType fieldType, RuntimeType declaringType, Boolean& domainInitialized)
at System.Reflection.RtFieldInfo.InternalGetValue(Object obj, Boolean     doVisibilityCheck, Boolean doCheckConsistency)
at System.Reflection.RtFieldInfo.GetValue(Object obj)
at System.Data.Common.DbProviderFactories.GetFactory(DataRow providerRow)
at System.Data.Common.DbProviderFactories.GetFactory(String providerInvariantName)
at System.Data.EntityClient.EntityConnection.GetFactory(String providerString)
at System.Data.EntityClient.EntityConnection.ChangeConnectionString(String newConnectionString)
at System.Data.EntityClient.EntityConnection..ctor(String connectionString)
at system.Data.Entity.Internal.LazyInternalConnection.InitializeFromConnectionStringSetting(ConnectionStringSettings appConfigConnection)
at system.Data.Entity.Internal.LazyInternalConnection.TryInitializeFromAppConfig(String name, AppConfig config)
at System.Data.Entity.Internal.LazyInternalConnection.Initialize() 
at System.Data.Entity.Internal.LazyInternalConnection.CreateObjectContextFromConnectionModel() 
at System.Data.Entity.Internal.LazyInternalContext.InitializeContext() 
at System.Data.Entity.Internal.InternalContext.ForceOSpaceLoadingForKnownEntityTypes()
at System.Data.Entity.DbContext.System.Data.Entity.Infrastructure.IObjectContextAdapter.get_ObjectContext() at lambda_method(Closure , Object ) 
at System.Data.Services.Providers.DbContextHelper.GetObjectContext(Object o) 
at System.Data.Services.Caching.MetadataCache`1.TryLookup(Type serviceType, Object dataContextInstance) 
at System.Data.Services.Providers.BaseServiceProvider.LoadMetadata() 
at System.Data.Services.DataService`1.CreateMetadataAndQueryProviders(IDataServiceMetadataProvider& metadataProviderInstance, IDataServiceQueryProvider& queryProviderInstance, BaseServiceProvider& builtInProvider, Object& dataSourceInstance) 
at System.Data.Services.DataService`1.CreateProvider() 
at System.Data.Services.DataService`1.HandleRequest() 
at System.Data.Services.DataService`1.ProcessRequestForMessage(Stream messageBody) 
at SyncInvokeProcessRequestForMessage(Object , Object[] , Object[] ) 
at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]& outputs) 
at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) 
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc) 
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc& rpc) 
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc) 
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc) 
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc) 
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc) 
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc) 
at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 
at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) 
```

我的 Web.Config 文件如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
    <!--
      For more information on how to configure your ASP.NET application, please visit
      http://go.microsoft.com/fwlink/?LinkId=169433
      -->
    <configuration>
      <configSections>
        <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
        <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
      </configSections>
       <system.web>
        <compilation debug="true" targetFramework="4.0">
          <assemblies>
            <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
          </assemblies>
        </compilation>
        <customErrors mode="Off"></customErrors>
      </system.web>
      <connectionStrings>
        <add name="UgyvediAdatbazisEntities" connectionString="metadata=res://*/ugyvediDbModell.csdl|res://*/ugyvediDbModell.ssdl|res://*/ugyvediDbModell.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;server=UgyvediAdatbazis.db.10115243.hostedresource.com;user id=UgyvediAdatbazis;password=*******;database=UgyvediAdatbazis&quot;" providerName="System.Data.EntityClient" />
      </connectionStrings>
      <entityFramework>
        <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
          <parameters>
            <parameter value="v11.0" />
          </parameters>
        </defaultConnectionFactory>
      </entityFramework>
      <system.serviceModel>
        <diagnostics>
          <messageLogging logMalformedMessages="true"
                          logMessagesAtServiceLevel="true"
                          logMessagesAtTransportLevel="true"
                          logEntireMessage="true"
                          maxMessagesToLog="10000"/>
        </diagnostics>
        <behaviors>
          <serviceBehaviors>
            <behavior name="Hibajelzes" >
              <serviceDebug includeExceptionDetailInFaults="true" />
            </behavior>
          </serviceBehaviors>
        </behaviors>
        <bindings>
          <webHttpBinding>
            <binding name="NoAuth">
              <security mode="None">
                <!--<transport clientCredentialType="None"></transport>-->
              </security>               
            </binding>
          </webHttpBinding>
          <basicHttpBinding>
            <binding name="NoAuth">
              <security mode="None"></security>
            </binding>
            <binding name="BasicAuth">
              <security mode="Transport">
                <transport clientCredentialType="Basic" />
              </security>
            </binding>
          </basicHttpBinding>
        </bindings>
        <services>
          <service name="UgyvediWebApp.UgyvediDataService" behaviorConfiguration="Hibajelzes">
            <endpoint address=""
                      binding="webHttpBinding"
                      bindingConfiguration="NoAuth"
                      contract="System.Data.Services.IRequestHandler">          
            </endpoint>
          </service>
        </services>
        <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true">

          <baseAddressPrefixFilters>
            <!--<add prefix="http://www.omegabridge.com/ugyvediservice/"/>-->
          </baseAddressPrefixFilters>
        </serviceHostingEnvironment>
      </system.serviceModel>

      <system.data>
        <DbProviderFactories>
          <add
                name="MySQL Data Provider"
                invariant="MySql.Data.MySqlClient"
                description=".Net Framework Data Provider for MySQL"
                type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, 
                      Version=6.6.4.0, Culture=neutral, 
                      PublicKeyToken=c5687fc88969c44d"
            />
        </DbProviderFactories>

      </system.data>

      <system.webServer>
        <httpErrors errorMode="Detailed"/>
        <asp scriptErrorSentToBrowser="true"/>
      </system.webServer>

    </configuration> 
```

我认为我的问题出在 MySQL 连接器上，但我无法弄清楚到底是什么。MySQL.Data、MySQL.Data.Entity 和 MySQL.Web 被引用并设置为 Copy Local。我什至尝试使用嵌入式数据服务诊断，但 wcf 跟踪文件只返回之前显示的堆栈跟踪。

请。如果有小伙子有任何想法如何解决这个问题，请与我分享。

# css - 阻止 div 重叠

> ID：13664143
> 
> 赞同：0
> 
> 时间：2012-12-01T21:59:11.170
> 
> 标签：css, html, positioning

我想向网站添加一个侧边栏，并希望将现有的主要内容推到右侧，但某些元素浮动在侧边栏下方。请参阅：[http](http://wittmerperformance.com/site/) ://wittmerperformance.com/site/如何调整它以使蓝色引号 div 不会在侧栏下方延伸？

请指教！

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:05:02.937

可以设置元素的宽度，`width: 620px`似乎可以达到预期的效果。通过（ab）使用内联样式和浮点数，您在这里让事情变得更加困难。我建议您研究[浮动内容的实际工作原理](http://www.w3.org/TR/CSS2/visuren.html#float-position)，因为它可以为您简化很多事情。

# unit-testing - 如何使用 $location 服务对 angularjs 控制器进行单元测试

> ID：13664144
> 
> 赞同：34
> 
> 时间：2012-12-01T21:59:11.060
> 
> 标签：unit-testing, angularjs

我正在尝试创建一个简单的单元测试来测试我的 show 功能。

我收到以下错误：

```
TypeError: Object #<Object> has no method 'show' 
```

好像`$rootScope`不是控制器的范围？

这是我的控制器：

```
function OpponentsCtrl($scope, $location) {
    $scope.show = function(url) {
        $location.path(url);
    }
}
OpponentsCtrl.$inject = ['$scope', '$location']; 
```

这是我的控制器单元测试：

```
describe('OpponentsCtrl', function() {
    beforeEach(module(function($provide) {
        $provide.factory('OpponentsCtrl', function($location){
            // whatever it does...
        });
    }));

    it('should change location when setting it via show function', inject(function($location, $rootScope, OpponentsCtrl) {
        $location.path('/new/path');
        $rootScope.$apply();
        expect($location.path()).toBe('/new/path');

        $rootScope.show('/test');
        expect($location.path()).toBe('/test');
    }));
}); 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-12-01T21:59:11.060

这就是我的测试结束的方式。

```
describe('OpponentsCtrl', function() {
    var scope, rootScope, ctrl, location;

    beforeEach(inject(function($location, $rootScope, $controller) {
        location = $location;
        rootScope = $rootScope;
        scope = $rootScope.$new();
        ctrl = $controller(OpponentsCtrl, {$scope: scope});
    }));

    it('should change location when setting it via show function', function() {
        location.path('/new/path');
        rootScope.$apply();
        expect(location.path()).toBe('/new/path');

        // test whatever the service should do...
        scope.show('/test');
        expect(location.path()).toBe('/test');

    });
}); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-10-25T17:30:22.653

你为什么不简单地使用一个 spyOn 函数？

```
describe('OpponentsCtrl', function() {

    var location;

    beforeEach(module(function($provide) {
        $provide.factory('OpponentsCtrl', function($location){
            location = $location;
        });
    }));

    it('should change location when setting it via show function', inject(function() {    
        spyOn(location, 'path');    
        expect(location.path).toHaveBeenCalledWith('/new/path');
    }));
}); 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-12T21:01:33.010

我更喜欢模拟位置和服务，因为它是一个单元（不是集成）测试：

```
'use strict';
describe('flightController', function () {
  var scope;
  var searchService;
  var location;

  beforeEach(module('app'));
  beforeEach(inject(function ($controller, $rootScope) {
    scope = $rootScope.$new();
    mockSearchService();
    mockLocation();
    createController($controller);
  }));

  it('changes location to month page', function () {
    searchService.flightToUrl.and.returnValue('Spain/Ukraine/December/1');
    scope.showMonth();
    expect(location.url).toHaveBeenCalledWith('search/month/Spain/Ukraine/December/1');
  });

  function mockSearchService() {
    searchService = jasmine.createSpyObj('searchService', ['flightToUrl']);
  }

  function mockLocation() {
    location = jasmine.createSpyObj('location', ['url']);
  }

  function createController($controller) {
    $controller('flightController', {
      $scope: scope,
      searchService: searchService,
      $location: location
    });
  }
}); 
```

干杯

# php - 根据其他两个数组对数组进行排序

> ID：13664145
> 
> 赞同：1
> 
> 时间：2012-12-01T21:59:12.540
> 
> 标签：php, arrays, array-multisort

我一共有三个数组

**阵列 1**

```
array1 = Array( 
    [0] => Array(
        [name] => John 
        [city] => San Francisco 
        [state] => CA 
    ) 
    [1] => Array(
        [name] => Smith 
        [city] => Atlanta 
        [state] => GA 
    ) 
    [2] => Array(
        [name] => Peter 
        [city] => New York 
        [state] => NY 
    ) 
    [3] => Array(
        [name] => Mary 
        [city] => San Jose 
        [state] => CA 
    ) 
) 
```

**数组 2（按平均年龄排序）**

```
array2 = Array(
    [0] => CA 
    [1] => NY 
    [2] => GA
) 
```

**数组 3（按人口排序）**

```
array3 = Array(
    [0] => New York 
    [1] => San Francisco 
    [2] => Atlanta 
    [3] => San Jose
) 
```

如何首先根据数组 2 对数组 1 进行排序，然后再根据数组 3 对数组 1 进行排序。我想要以下输出：

**排序数组 1**

```
Array
(
    [0] => Array
        (
            [name] => John
            [city] => San Francisco
            [state] => CA
        )

    [1] => Array
        (
            [name] => Mary
            [city] => San Jose
            [state] => CA
        )

    [2] => Array
        (
            [name] => Peter
            [city] => New York
            [state] => NY
        )

    [3] => Array
        (
            [name] => Smith
            [city] => Atlanta
            [state] => GA
        )

) 
```

我尝试使用`array_multisort`来实现这一点，但它不起作用，例如

```
array_multisort($array2,$array3,$array1) 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:44:39.337

这是一种排序`$array1`方式`$array2`并`$array3`产生您想要的结果：

```
<?php

$array1 = array(
    array('name' => 'John',  'city' => 'San Francisco', 'state' => 'CA'),
    array('name' => 'Smith', 'city' => 'Atlanta',       'state' => 'GA'),
    array('name' => 'Peter', 'city' => 'New York',      'state' => 'NY'),
    array('name' => 'Mary',  'city' => 'San Jose',      'state' => 'CA'),
);

$array2 = array(
    'CA',
    'NY',
    'GA'
);

$array3 = array(
    'New York',
    'San Francisco',
    'Atlanta',
    'San Jose'
);

usort(
    $array1,
    function ($element1, $element2) use ($array2, $array3) {
        $state_sort_order = array_flip($array2);

        $element1_state_sort_order = $state_sort_order[$element1['state']];
        $element2_state_sort_order = $state_sort_order[$element2['state']];

        $state_sort_result = $element1_state_sort_order - $element2_state_sort_order;

        if ($state_sort_result === 0) {
            $city_sort_order = array_flip($array3);
            $element1_city_sort_order = $city_sort_order[$element1['city']];
            $element2_city_sort_order = $city_sort_order[$element2['city']];

            return $element1_city_sort_order - $element2_city_sort_order;
        } else {
            return $state_sort_result;
        }
    }
);

print_r($array1); 
```

同样，[usort](http://php.net/manual/en/function.usort.php)似乎是最灵活的选择。可能有一种方法可以弄清楚如何使用[array_multisort](http://php.net/manual/en/function.array-multisort.php)，但根据您提供的数据我无法判断。

我使用函数闭包，捕获`$array2`并`$array3`从外部范围进行排序。它定义了一个比较函数，`usort`用于应用到元素`$array1`以确定排序顺序。在此函数中，`$element1`每个`$element2`都接收来自要处理的元素的值`$array1`以进行比较，例如`'Smith,Atlanta,GA'`，或`'Mary,San Jose,CA'`。

对于每个元素，我提取元素的城市和州部分。如果您翻转`$array2`和，当您分别用和`$array3`索引它们时，它们将成为排序顺序的查找表。`$city``$state`

如果州排序顺序相等，其余的只是返回城市排序顺序之间的差异，否则只返回州排序顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T22:05:39.930

你会想要使用[usort](http://php.net/manual/en/function.usort.php)。您可以定义一个用户定义的函数，将数组 1 的元素与数组 2 和 3 的元素进行比较，并在 usort 中使用该回调来执行排序。

# yii - 用户身份和会话问题

> ID：13664148
> 
> 赞同：1
> 
> 时间：2012-12-01T21:59:26.807
> 
> 标签：yii

我有以下课程。但是当我尝试访问`Yii::app()->user->realName;`它时会产生错误。

我无法理解这一切。请帮忙！

以下代码是我`UserIdentity`班级的代码。

```
<?php

/**
 * UserIdentity represents the data needed to identity a user.
 * It contains the authentication method that checks if the provided
 * data can identity the user.
 */
class UserIdentity extends CUserIdentity {

    public $id, $dmail, $real_name;

    /**
     * Authenticates a user.
     * The example implementation makes sure if the username and password
     * are both 'demo'.
     * In practical applications, this should be changed to authenticate
     * against some persistent user identity storage (e.g. database).
     * @return boolean whether authentication succeeds.
     */
    public function authenticate() {
        $theUser = User::model()->findByAttributes(array(
                    'email' => $this->username,
                   // 'password' => $this->password
                ));
        if ($theUser == null) {
            $this->errorCode = self::ERROR_PASSWORD_INVALID;
        } else {
            $this->id = $theUser->id;
            $this->setState('uid', $this->id);
         //   echo $users->name; exit;
          //  $this->setState('userName', $theUser->name);
            $this->setState("realName",$theUser->fname .' '. $theUser->lname);
            $this->errorCode = self::ERROR_NONE;
        }
        return!$this->errorCode;
    }

}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T09:31:29.733

您需要扩展 CWebUser 类以实现您想要的结果。

```
class WebUser extends CWebUser{
    protected $_realName = 'wu_default';

    public function getRealName(){
        $realName = Yii::app()->user->getState('realName');
        return (null!==$realName)?$realName:$this->_realName;
    }

    public function setRealName($value){
        Yii::app()->user->setState('realName', $value);
    }
} 
```

然后，您可以`realName`使用 分配和调用属性`Yii::app()->user->realName`。

这`protected $_realName`是可选的，但允许您定义默认值。`getRealName`如果您选择不使用它，请将方法的返回行更改为`return $realName`.

将上面的类放在`components/WebUser.php`，或者任何它将被加载或自动加载的地方。

更改您的配置文件以使用您的新 WebUser 类，您应该已准备就绪。

```
'components'=>
    'user'=>array(
        'class'=>'WebUser',
    ),
...
), 
```

# javascript - 获取每个组上每个复选框的值并使用 jQuery 将其附加到跨度计数器

> ID：13664150
> 
> 赞同：-1
> 
> 时间：2012-12-01T21:59:36.147
> 
> 标签：javascript, jquery, html, jquery-ui

我有一个带有复选框的组，我试图在选中时获取每个复选框的值，并将该值附加到我旁边的计数器跨度元素，但每次我点击任何复选框时都会附加所有计数器元素的值。我创建了一个[http://jsfiddle.net/creativestudio/xm838/](http://jsfiddle.net/creativestudio/xm838/)

这是我正在使用的 Js：

```
function set_index_id_checkbox() {
    $("input:checkbox[name='like']").each(function (index) {
        var currElem = $(this);
        var prevLabel = currElem.next();
        currElem.attr("id", this.id + index);
        prevLabel.attr("for", prevLabel.attr("for") + index);
    });
}

set_index_id_checkbox();

function getValues() {
    $("input:checkbox[name='like']").click(function () {
        if ($(this).is(':checked')) {
            $('.likes').html($(this).val());
        }
    });
}

getValues(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:03:56.550

那是因为您正在选择所有具有 class of 的元素`likes`，您可以使用`prev`and `find`or`closest`方法来选择目标元素。

```
$(this).parent().prev().find('.likes').html(this.value); 
```

或者：

```
if (this.checked) { // better than creating an unnecessary jQuery object
   $(this).closest('.block').find('span.likes').text(this.value);
} else {
  // ...
} 
```

[http://jsfiddle.net/Ud9T4/](http://jsfiddle.net/Ud9T4/)

# javascript - Knockoutjs 无法解析绑定。消息：SyntaxError: Unexpected token };

> ID：13664152
> 
> 赞同：0
> 
> 时间：2012-12-01T22:00:00.310
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

这是[示例](http://jsfiddle.net/fustic/NpK3K/5/)。
我尽可能地简化了它，但我仍然无法理解我错在哪里。
请帮我 ））

PS stackoverflow 需要一个代码，而不仅仅是链接到 jsfiddle，所以就是这样：
html：

```
<form action="" method="GET" data-bind="FacebookContacts">
    <table class="importContacts table import">
        <thead>
            <tr>
                <td></td>
                <td>Photo</td>
                <td>Name</td>
                <td>Login</td>
            </tr>
        </thead>
        <tbody data-bind="foreach: contacts">
            <tr>
                <td>
                    <span data-bind="text:FullName"></span>
                </td>
                <td>

                </td>
                <td>

                </td>
                <td>

                </td>
            </tr>
        </tbody>
    </table>
</form>​ 
```

javascript:

```
var FacebookContactsViewModel = function () {
        var _self = this;
        _self.FacebookContacts = ko.observable();
        _self.GetData = function() {
            var localData=ko.mapping.fromJS(JSON.parse(contacts));
            _self.FacebookContacts(localData);
            ko.applyBindings(_self);
        };
    _self.GetData();
};
var contacts='{"contacts":[{"FullName":"Petr Perelygin"}]}';
var vm = new FacebookContactsViewModel();​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:17:35.200

看看这里，让你的代码更简单，更容易阅读：

[http://jsfiddle.net/NpK3K/24/](http://jsfiddle.net/NpK3K/24/)

问题是您将对象放入`"FacebookContacts"`属性而不是数组。因此，您应该`"with"`首先对根元素使用绑定扩展来更改嵌套元素的数据上下文。

希望能帮助到你。

# haskell - Haskell - 我自己的数据类型的特定类型错误

> ID：13664153
> 
> 赞同：0
> 
> 时间：2012-12-01T22:00:08.537
> 
> 标签：haskell, types, typeerror

我正在尝试在 Haskell 中为 Brainf*ck 编写解释器。但我收到类型错误。

下面只显示代码的相关部分：

```
--my own defined data type
data BFState = BFState {
  program :: String,      -- program being interpreted
  input :: String,  -- input for the program
  memory :: [Word8],     -- memory is a list of 8bit representation of INTs since only least 8 bits are read
  prog_pointer :: Int,         -- current pointer in the program STRING (pc)
  mem_pointer :: Int         -- current pointer in the memory LIST (pos)
}

--Initialise the BFState before the Intepreter runs the inputted BF code.
initState :: String -> String -> Int -> BFState
initState program input memSize = BFState program input (take memSize (repeat 0)) 0 0

--Helper function for the main function (bf program input)
run state = if isEnd state
            then return () --when reached the end, just return
            else do newState <- (iterateBF state) --update to new state after iterating one BF comand
                    run newState --run with new state

--the main function
bf program input = run (initState program input 10000) 
```

现在，我收到一个类型错误：

```
Couldn't match expected type `String'
            with actual type `BFState -> String'
In the first argument of `initState', namely `program'
In the first argument of `run', namely
  `(initState program input 10000)'
In the expression: run (initState program input 10000) 
```

编译器说的时候指的是什么`actual type 'BFState -> String'`？

----对于sepp2k

```
iterateBF :: BFState -> IO BFState
iterateBF state = case (program state !! prog_pointer state) of
    '+' -> return state {memory = setMem state ((getMem state) + 1), prog_pointer = nextPP state}
    '-' -> return state {memory = setMem state ((getMem state) - 1), prog_pointer = nextPP state}
    '>' -> return state {mem_pointer = (mem_pointer state) + 1, prog_pointer = nextPP state}
    '<' -> return state {mem_pointer = (mem_pointer state) - 1, prog_pointer = nextPP state}
    '[' -> return state {prog_pointer = prog_pointer'} where
            prog_pointer' = findClosingBrace (program state) (prog_pointer state)
    ']' -> return state {prog_pointer = prog_pointer'} where
            prog_pointer' = findOpeningBrace (program state) (prog_pointer state)
    ',' -> let inputVal = fromIntegral (fromEnum (head (input state))) in 
           return state {memory = setMem state inputVal, prog_pointer = nextPP state, input = drop 1 (input state)}
    '.' -> do hPutChar stdout (chr (fromEnum $ getMem state))
              hFlush stdout
              return state { prog_pointer = prog_pointer state}
    otherwise -> return (state {prog_pointer = nextPP state}) --ignore other characters

--check if we are at the end of the program
isEnd :: BFState -> Bool
isEnd state = (prog_pointer state) >= length (program state) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T22:13:57.343

那是因为“程序”的类型（initState 函数的第一个参数）不是字符串。它实际上是 BFState -> String，您可以通过在 ghci 提示符中输入 ":t program" 来验证（当然，不带引号）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T22:06:31.107

`program`应该有类型（因为这就是类型签名所说的应该是），但*实际上**有*类型，因为这是 . 的第一个参数的类型。`String``initState`*`BFState -> String``bf`*

 *如果您为 提供显式类型签名`bf`，您可能会发现代码中的实际错误是您`bf`使用类型的第一个参数调用的某个地方`BFState -> String`。*

# android - 动态添加和删除视图到 viewpager

> ID：13664155
> 
> 赞同：165
> 
> 时间：2012-12-01T22:00:11.993
> 
> 标签：android, android-viewpager, swipe

**（我想出了一个解决方案 - 请在下面的答案部分查看我的帖子。）**

在我的应用程序中，用户将从其数据的单一视图开始。我想添加一个 ViewPager 并允许用户根据需要添加更多视图。我该怎么做呢？（我不想使用 FragmentPagerAdapter。）

我已经阅读了无数的帖子和概述，但仍然缺少一些东西。以下是我认为我理解的内容：

MainActivity 创建一个 ViewPager 和 PagerAdapter：

```
ViewPager pager = null;
MainPagerAdapter adapter = null;
public void onCreate (Bundle savedInstanceState)
{
  super.onCreate (savedInstanceState);
  pager = new ViewPager (this);
  setContentView (pager);

  adapter = new MainPagerAdapter();
  pager.setAdapter (adapter); 

  View v0 = code_to_create_initial_view();
  adapter.add (v0, 0);      
} 
```

使用 PagerAdapter 提供视图集。为此，我似乎需要添加和删除视图的方法，就像这样；显然需要更多的信息来告诉 ViewPager 的东西已经改变以及如何显示改变：

```
class MainPagerAdapter extends PagerAdapter
{
  // This holds all the currently displayable views, in order from left to right.
  private ArrayList<View> views = new ArrayList<View>();

  public void addView (View v, int position)
  {
    views.add (position, v);
  }

  public void removeView (int position)
  {
    views.remove (position);
  }
} 
```

此外，我需要实现以下虚拟方法。我在这里迷路了 - 什么叫他们，他们应该做什么（好吧，getCount 很明显）？

```
 public object instantiateItem (ViewGroup pager, int position);
  public void destroyItem (ViewGroup, int, Object);
  public int getCount ();
  public boolean isViewFromObject (View, Object); 
```

*   ViewGroup 参数是什么 - 包含组不是 ViewPager 本身吗？
*   isViewFromObject 做了什么 - 首先对象是如何与视图关联的？
*   添加或删除视图时是否应该调用 startUpdate 和 finishUdate？

谢谢。

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2012-12-02T17:29:12.793

在弄清楚 ViewPager 调用了哪些 ViewPager 方法以及用于其他目的之后，我想出了一个解决方案。我在这里介绍它，因为我看到很多人都在为此苦苦挣扎，而我没有看到任何其他相关的答案。

首先，这是我的适配器；希望代码中的注释就足够了：

```
public class MainPagerAdapter extends PagerAdapter
{
  // This holds all the currently displayable views, in order from left to right.
  private ArrayList<View> views = new ArrayList<View>();

  //-----------------------------------------------------------------------------
  // Used by ViewPager.  "Object" represents the page; tell the ViewPager where the
  // page should be displayed, from left-to-right.  If the page no longer exists,
  // return POSITION_NONE.
  @Override
  public int getItemPosition (Object object)
  {
    int index = views.indexOf (object);
    if (index == -1)
      return POSITION_NONE;
    else
      return index;
  }

  //-----------------------------------------------------------------------------
  // Used by ViewPager.  Called when ViewPager needs a page to display; it is our job
  // to add the page to the container, which is normally the ViewPager itself.  Since
  // all our pages are persistent, we simply retrieve it from our "views" ArrayList.
  @Override
  public Object instantiateItem (ViewGroup container, int position)
  {
    View v = views.get (position);
    container.addView (v);
    return v;
  }

  //-----------------------------------------------------------------------------
  // Used by ViewPager.  Called when ViewPager no longer needs a page to display; it
  // is our job to remove the page from the container, which is normally the
  // ViewPager itself.  Since all our pages are persistent, we do nothing to the
  // contents of our "views" ArrayList.
  @Override
  public void destroyItem (ViewGroup container, int position, Object object)
  {
    container.removeView (views.get (position));
  }

  //-----------------------------------------------------------------------------
  // Used by ViewPager; can be used by app as well.
  // Returns the total number of pages that the ViewPage can display.  This must
  // never be 0.
  @Override
  public int getCount ()
  {
    return views.size();
  }

  //-----------------------------------------------------------------------------
  // Used by ViewPager.
  @Override
  public boolean isViewFromObject (View view, Object object)
  {
    return view == object;
  }

  //-----------------------------------------------------------------------------
  // Add "view" to right end of "views".
  // Returns the position of the new view.
  // The app should call this to add pages; not used by ViewPager.
  public int addView (View v)
  {
    return addView (v, views.size());
  }

  //-----------------------------------------------------------------------------
  // Add "view" at "position" to "views".
  // Returns position of new view.
  // The app should call this to add pages; not used by ViewPager.
  public int addView (View v, int position)
  {
    views.add (position, v);
    return position;
  }

  //-----------------------------------------------------------------------------
  // Removes "view" from "views".
  // Retuns position of removed view.
  // The app should call this to remove pages; not used by ViewPager.
  public int removeView (ViewPager pager, View v)
  {
    return removeView (pager, views.indexOf (v));
  }

  //-----------------------------------------------------------------------------
  // Removes the "view" at "position" from "views".
  // Retuns position of removed view.
  // The app should call this to remove pages; not used by ViewPager.
  public int removeView (ViewPager pager, int position)
  {
    // ViewPager doesn't have a delete method; the closest is to set the adapter
    // again.  When doing so, it deletes all its views.  Then we can delete the view
    // from from the adapter and finally set the adapter to the pager again.  Note
    // that we set the adapter to null before removing the view from "views" - that's
    // because while ViewPager deletes all its views, it will call destroyItem which
    // will in turn cause a null pointer ref.
    pager.setAdapter (null);
    views.remove (position);
    pager.setAdapter (this);

    return position;
  }

  //-----------------------------------------------------------------------------
  // Returns the "view" at "position".
  // The app should call this to retrieve a view; not used by ViewPager.
  public View getView (int position)
  {
    return views.get (position);
  }

  // Other relevant methods:

  // finishUpdate - called by the ViewPager - we don't care about what pages the
  // pager is displaying so we don't use this method.
} 
```

这里有一些代码片段展示了如何使用适配器。

```
class MainActivity extends Activity
{
  private ViewPager pager = null;
  private MainPagerAdapter pagerAdapter = null;

  //-----------------------------------------------------------------------------
  @Override
  public void onCreate (Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView (R.layout.main_activity);

    ... do other initialization, such as create an ActionBar ...

    pagerAdapter = new MainPagerAdapter();
    pager = (ViewPager) findViewById (R.id.view_pager);
    pager.setAdapter (pagerAdapter);

    // Create an initial view to display; must be a subclass of FrameLayout.
    LayoutInflater inflater = context.getLayoutInflater();
    FrameLayout v0 = (FrameLayout) inflater.inflate (R.layout.one_of_my_page_layouts, null);
    pagerAdapter.addView (v0, 0);
    pagerAdapter.notifyDataSetChanged();
  }

  //-----------------------------------------------------------------------------
  // Here's what the app should do to add a view to the ViewPager.
  public void addView (View newPage)
  {
    int pageIndex = pagerAdapter.addView (newPage);
    // You might want to make "newPage" the currently displayed page:
    pager.setCurrentItem (pageIndex, true);
  }

  //-----------------------------------------------------------------------------
  // Here's what the app should do to remove a view from the ViewPager.
  public void removeView (View defunctPage)
  {
    int pageIndex = pagerAdapter.removeView (pager, defunctPage);
    // You might want to choose what page to display, if the current page was "defunctPage".
    if (pageIndex == pagerAdapter.getCount())
      pageIndex--;
    pager.setCurrentItem (pageIndex);
  }

  //-----------------------------------------------------------------------------
  // Here's what the app should do to get the currently displayed page.
  public View getCurrentPage ()
  {
    return pagerAdapter.getView (pager.getCurrentItem());
  }

  //-----------------------------------------------------------------------------
  // Here's what the app should do to set the currently displayed page.  "pageToShow" must
  // currently be in the adapter, or this will crash.
  public void setCurrentPage (View pageToShow)
  {
    pager.setCurrentItem (pagerAdapter.getItemPosition (pageToShow), true);
  }
} 
```

最后，您可以将以下内容用于您的`activity_main.xml`布局：

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.v4.view.ViewPager
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/view_pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

</android.support.v4.view.ViewPager> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-23T16:19:42.270

我一直在寻找简单的解决方案来动态地从 viewpager（无片段）中删除视图。因此，如果您有一些信息，您的页面属于，您可以将其设置为查看为标签。就像那样（适配器代码）：

```
@Override
public Object instantiateItem(ViewGroup collection, int position)
{
    ImageView iv = new ImageView(mContext);
    MediaMessage msg = mMessages.get(position);
    ...

    iv.setTag(media);
    return iv;
}

@Override
public int getItemPosition (Object object)
{
    View o = (View) object;
    int index = mMessages.indexOf(o.getTag());
    if (index == -1)
        return POSITION_NONE;
    else
        return index;
} 
```

您只需从 mMessages 中删除您的信息，然后调用`notifyDataSetChanged()`您的适配器。坏消息是在这种情况下没有动画。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-05T20:46:41.290

这是此问题的替代解决方案。我的适配器：

```
 private class PagerAdapter extends FragmentPagerAdapter implements 
                    ViewPager.OnPageChangeListener, TabListener {

    private List<Fragment> mFragments = new ArrayList<Fragment>();
    private ViewPager mPager;
    private ActionBar mActionBar;

    private Fragment mPrimaryItem;

    public PagerAdapter(FragmentManager fm, ViewPager vp, ActionBar ab) {
        super(fm);
        mPager = vp;
        mPager.setAdapter(this);
        mPager.setOnPageChangeListener(this);
        mActionBar = ab;
    }

    public void addTab(PartListFragment frag) {
        mFragments.add(frag);
        mActionBar.addTab(mActionBar.newTab().setTabListener(this).
                            setText(frag.getPartCategory()));
    }

    @Override
    public Fragment getItem(int position) {
        return mFragments.get(position);
    }

    @Override
    public int getCount() {
        return mFragments.size();
    }

    /** (non-Javadoc)
     * @see android.support.v4.app.FragmentStatePagerAdapter#setPrimaryItem(android.view.ViewGroup, int, java.lang.Object)
     */
    @Override
    public void setPrimaryItem(ViewGroup container, int position,
            Object object) {
        super.setPrimaryItem(container, position, object);
        mPrimaryItem = (Fragment) object;
    }

    /** (non-Javadoc)
     * @see android.support.v4.view.PagerAdapter#getItemPosition(java.lang.Object)
     */
    @Override
    public int getItemPosition(Object object) {
        if (object == mPrimaryItem) {
            return POSITION_UNCHANGED;
        }
        return POSITION_NONE;
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        mPager.setCurrentItem(tab.getPosition());
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) { }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) { }

    @Override
    public void onPageScrollStateChanged(int arg0) { }

    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) { }

    @Override
    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
    }

    /**
     * This method removes the pages from ViewPager
     */
    public void removePages() {
        mActionBar.removeAllTabs();

                    //call to ViewPage to remove the pages
        vp.removeAllViews();
        mFragments.clear();

        //make this to update the pager
        vp.setAdapter(null);
        vp.setAdapter(pagerAdapter);
    }
} 
```

动态删除和添加的代码

```
//remove the pages. basically call to method removeAllViews from `ViewPager`
pagerAdapter.removePages();

pagerAdapter.addPage(pass your fragment); 
```

在 Peri Hartman 的建议下，在我设置 null do ViewPager 适配器并在删除视图后再次放置适配器后，它开始工作。在此之前，页面 0 没有显示其列表内容。

谢谢。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-22T09:45:38.133

围绕这个话题有不少讨论

*   [ViewPager PagerAdapter 不更新视图](https://stackoverflow.com/a/7287121/494659)
*   [动态更新 ViewPager？](https://stackoverflow.com/questions/10849552/update-viewpager-dynamically?rq=1)
*   [从 FragmentStatePagerAdapter 中删除片段](https://stackoverflow.com/questions/25928732/removing-fragments-from-fragmentstatepageradapter)

尽管我们经常看到它，但 using`POSITION_NONE`似乎并不是要走的路，因为**它在内存方面效率非常低。**

在这个问题中，我们应该考虑使用[Alvaro 的方法](https://stackoverflow.com/a/8024557/494659)：

> ...是实例化新视图时的`setTag()`方法 。`instantiateItem()`然后 `notifyDataSetChanged()`，您可以使用`findViewWithTag()`来查找要更新的视图，而不是使用。

这是基于此想法[的代码的SO答案](https://stackoverflow.com/a/10907281/494659)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-28T10:21:32.887

我做了一个类似的程序。希望这会对你有所帮助。在它的第一个活动中，可以选择四个网格数据。在下一个活动中，有一个视图分页器，其中包含两个必填页面。另外还有 4 个页面，这些页面将对应于所选的网格数据可见。

以下是mainactivity MainActivity

```
 package com.example.jeffy.viewpagerapp;
    import android.content.Context;
    import android.content.Intent;
    import android.content.SharedPreferences;
    import android.database.Cursor;
    import android.database.SQLException;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteOpenHelper;
    import android.os.Bundle;
    import android.os.Parcel;
    import android.support.design.widget.FloatingActionButton;
    import android.support.design.widget.Snackbar;
    import android.support.v7.app.AppCompatActivity;
    import android.support.v7.widget.Toolbar;
    import android.util.Log;
    import android.view.View;
    import android.view.Menu;
    import android.view.MenuItem;
    import android.widget.AdapterView;
    import android.widget.Button;
    import android.widget.GridView;
    import java.lang.reflect.Array;
    import java.util.ArrayList;
    public class MainActivity extends AppCompatActivity {
    SharedPreferences pref;
    SharedPreferences.Editor editor;
    GridView gridView;
    Button button;
    private static final String DATABASE_NAME = "dbForTest.db";
    private static final int DATABASE_VERSION = 1;
    private static final String TABLE_NAME = "diary";
    private static final String TITLE = "id";
    private static final String BODY = "content";
    DBHelper  dbHelper = new DBHelper(this);
    ArrayList<String> frags = new ArrayList<String>();
    ArrayList<FragmentArray> fragmentArray = new ArrayList<FragmentArray>();
    String[] selectedData;
    Boolean port1=false,port2=false,port3=false,port4=false;
    int Iport1=1,Iport2=1,Iport3=1,Iport4=1,location;

    // This Data show in grid ( Used by adapter )
        CustomGridAdapter customGridAdapter = new           CustomGridAdapter(MainActivity.this,GRID_DATA);
    static final String[ ] GRID_DATA = new String[] {
            "1" ,
            "2",
            "3" ,
            "4"
    };
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
        setSupportActionBar(toolbar);
        frags.add("TabFragment3");
        frags.add("TabFragment4");
        frags.add("TabFragment5");
        frags.add("TabFragment6");
        dbHelper = new DBHelper(this);
        dbHelper.insertContact(1,0);
        dbHelper.insertContact(2,0);
        dbHelper.insertContact(3,0);
        dbHelper.insertContact(4,0);
        final Bundle selected = new Bundle();
        button = (Button) findViewById(R.id.button);
        pref = getApplicationContext().getSharedPreferences("MyPref", MODE_PRIVATE);
        editor = pref.edit();
        gridView = (GridView) findViewById(R.id.gridView1);

        gridView.setAdapter(customGridAdapter);

        gridView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
              //view.findViewById(R.id.grid_item_image).setVisibility(View.VISIBLE);
                location = position + 1;
                if (position == 0) {
                    Iport1++;
                    Iport1 = Iport1 % 2;
                    if (Iport1 % 2 == 1) {
                        //dbHelper.updateContact(1,1);
                        view.findViewById(R.id.grid_item_image).setVisibility(View.VISIBLE);
                        dbHelper.updateContact(1,1);
                    } else {
                        //dbHelper.updateContact(1,0);
                        view.findViewById(R.id.grid_item_image).setVisibility(View.INVISIBLE);
                        dbHelper.updateContact(1, 0);
                    }
                }
                if (position == 1) {
                    Iport2++;
                    Iport1 = Iport1 % 2;
                    if (Iport2 % 2 == 1) {
                        //dbHelper.updateContact(2,1);
                        view.findViewById(R.id.grid_item_image).setVisibility(View.VISIBLE);
                        dbHelper.updateContact(2, 1);
                    } else {
                        //dbHelper.updateContact(2,0);
                        view.findViewById(R.id.grid_item_image).setVisibility(View.INVISIBLE);
                        dbHelper.updateContact(2,0);
                    }
                }
                if (position == 2) {
                    Iport3++;
                    Iport3 = Iport3 % 2;
                    if (Iport3 % 2 == 1) {
                        //dbHelper.updateContact(3,1);
                        view.findViewById(R.id.grid_item_image).setVisibility(View.VISIBLE);
                        dbHelper.updateContact(3, 1);
                    } else {
                        //dbHelper.updateContact(3,0);
                        view.findViewById(R.id.grid_item_image).setVisibility(View.INVISIBLE);
                        dbHelper.updateContact(3, 0);
                    }
                }
                if (position == 3) {
                    Iport4++;
                    Iport4 = Iport4 % 2;
                    if (Iport4 % 2 == 1) {
                        //dbHelper.updateContact(4,1);
                       view.findViewById(R.id.grid_item_image).setVisibility(View.VISIBLE);
                        dbHelper.updateContact(4, 1);
                    } else {
                        //dbHelper.updateContact(4,0);
                       view.findViewById(R.id.grid_item_image).setVisibility(View.INVISIBLE);
                        dbHelper.updateContact(4,0);
                    }
                }
            }
        });
        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                editor.putInt("port1", Iport1);
                editor.putInt("port2", Iport2);
                editor.putInt("port3", Iport3);
                editor.putInt("port4", Iport4);
                Intent i = new Intent(MainActivity.this,Main2Activity.class);
                if(Iport1==1)
                    i.putExtra("3","TabFragment3");
                else
                    i.putExtra("3", "");
                if(Iport2==1)
                    i.putExtra("4","TabFragment4");
                else
                    i.putExtra("4","");
                if(Iport3==1)
                    i.putExtra("5", "TabFragment5");
                else
                    i.putExtra("5","");
                if(Iport4==1)
                    i.putExtra("6", "TabFragment6");
                else
                    i.putExtra("6","");
                dbHelper.updateContact(0, Iport1);
                dbHelper.updateContact(1, Iport2);
                dbHelper.updateContact(2, Iport3);
                dbHelper.updateContact(3, Iport4);
                startActivity(i);
            }
        });
    }
} 
```

这里 TabFragment1、TabFragment2 等是要显示在 viewpager 上的片段。我没有显示布局，因为它们超出了这个项目的范围。

MainActivity 将意图 Main2Activity Main2Activity

```
 package com.example.jeffy.viewpagerapp;

import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.support.design.widget.CollapsingToolbarLayout;
import android.support.design.widget.FloatingActionButton;
import android.support.design.widget.Snackbar;
import android.support.design.widget.TabLayout;
import android.support.v4.view.ViewPager;
import android.support.v4.widget.NestedScrollView;
import android.support.v7.app.AppCompatActivity;
import android.support.v7.widget.Toolbar;
import android.text.TextUtils;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.FrameLayout;

import java.util.ArrayList;

public class Main2Activity extends AppCompatActivity {

    private ViewPager pager = null;
    private PagerAdapter pagerAdapter = null;
    DBHelper dbHelper;
    Cursor rs;
    int port1,port2,port3,port4;
    //-----------------------------------------------------------------------------
    @Override
    public void onCreate (Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main2);
        Toolbar toolbar = (Toolbar) findViewById(R.id.MyToolbar);
        setSupportActionBar(toolbar);

        getSupportActionBar().setDisplayHomeAsUpEnabled(true);

        CollapsingToolbarLayout collapsingToolbar =
                (CollapsingToolbarLayout) findViewById(R.id.collapse_toolbar);

        NestedScrollView scrollView = (NestedScrollView) findViewById (R.id.nested);
        scrollView.setFillViewport (true);

        ArrayList<String > selectedPort = new ArrayList<String>();

        Intent intent = getIntent();
        String Tab3 = intent.getStringExtra("3");
        String Tab4 = intent.getStringExtra("4");
        String Tab5 = intent.getStringExtra("5");
        String Tab6 = intent.getStringExtra("6");

        TabLayout tabLayout = (TabLayout) findViewById(R.id.tab_layout);
        tabLayout.addTab(tabLayout.newTab().setText("View"));
        tabLayout.addTab(tabLayout.newTab().setText("All"));

        selectedPort.add("TabFragment1");
        selectedPort.add("TabFragment2");
        if(Tab3!=null && !TextUtils.isEmpty(Tab3))
        selectedPort.add(Tab3);
        if(Tab4!=null && !TextUtils.isEmpty(Tab4))
        selectedPort.add(Tab4);
        if(Tab5!=null && !TextUtils.isEmpty(Tab5))
        selectedPort.add(Tab5);
        if(Tab6!=null && !TextUtils.isEmpty(Tab6))
        selectedPort.add(Tab6);

        dbHelper = new DBHelper(this);
//        rs=dbHelper.getData(1);
//        port1 = rs.getInt(rs.getColumnIndex("id"));
//
//        rs=dbHelper.getData(2);
//        port2 = rs.getInt(rs.getColumnIndex("id"));
//
//        rs=dbHelper.getData(3);
//        port3 = rs.getInt(rs.getColumnIndex("id"));
//
//        rs=dbHelper.getData(4);
//        port4 = rs.getInt(rs.getColumnIndex("id"));

        Log.i(">>>>>>>>>>>>>>", "port 1" + port1 + "port 2" + port2 + "port 3" + port3 + "port 4" + port4);

        if(Tab3!=null && !TextUtils.isEmpty(Tab3))
        tabLayout.addTab(tabLayout.newTab().setText("Tab 0"));
        if(Tab3!=null && !TextUtils.isEmpty(Tab4))
        tabLayout.addTab(tabLayout.newTab().setText("Tab 1"));
        if(Tab3!=null && !TextUtils.isEmpty(Tab5))
        tabLayout.addTab(tabLayout.newTab().setText("Tab 2"));
        if(Tab3!=null && !TextUtils.isEmpty(Tab6))
        tabLayout.addTab(tabLayout.newTab().setText("Tab 3"));
        tabLayout.setTabGravity(TabLayout.GRAVITY_FILL);

        final ViewPager viewPager = (ViewPager) findViewById(R.id.view_pager);
        final PagerAdapter adapter = new PagerAdapter
                (getSupportFragmentManager(), tabLayout.getTabCount(), selectedPort);
        viewPager.setAdapter(adapter);
        viewPager.addOnPageChangeListener(new TabLayout.TabLayoutOnPageChangeListener(tabLayout));
        tabLayout.setOnTabSelectedListener(new TabLayout.OnTabSelectedListener() {
            @Override
            public void onTabSelected(TabLayout.Tab tab) {
                viewPager.setCurrentItem(tab.getPosition());
            }

            @Override
            public void onTabUnselected(TabLayout.Tab tab) {

            }

            @Override
            public void onTabReselected(TabLayout.Tab tab) {

            }
        });
//        setContentView(R.layout.activity_main2);
//        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
//        setSupportActionBar(toolbar);

//        TabLayout tabLayout = (TabLayout) findViewById(R.id.tab_layout);
//        tabLayout.addTab(tabLayout.newTab().setText("View"));
//        tabLayout.addTab(tabLayout.newTab().setText("All"));
//        tabLayout.addTab(tabLayout.newTab().setText("Tab 0"));
//        tabLayout.addTab(tabLayout.newTab().setText("Tab 1"));
//        tabLayout.addTab(tabLayout.newTab().setText("Tab 2"));
//        tabLayout.addTab(tabLayout.newTab().setText("Tab 3"));
//        tabLayout.setTabGravity(TabLayout.GRAVITY_FILL);

}
    } 
```

ViewPagerAdapter Viewpageradapter.class

```
package com.example.jeffy.viewpagerapp;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentStatePagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.View;
import android.view.ViewGroup;

import java.util.ArrayList;
import java.util.List;

/**
 * Created by Jeffy on 25-01-2016.
 */
public class PagerAdapter extends FragmentStatePagerAdapter {
    int mNumOfTabs;

    List<String> values;

    public PagerAdapter(FragmentManager fm, int NumOfTabs, List<String> Port) {
        super(fm);
        this.mNumOfTabs = NumOfTabs;
        this.values= Port;
    }

    @Override
    public Fragment getItem(int position) {

        String fragmentName = values.get(position);
        Class<?> clazz = null;
        Object fragment = null;
        try {
            clazz = Class.forName("com.example.jeffy.viewpagerapp."+fragmentName);
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
        try {
            fragment = clazz.newInstance();
        } catch (InstantiationException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }

        return (Fragment) fragment;
    }

    @Override
    public int getCount() {
        return values.size();
    }
} 
```

main2activity activity_main2.xml 的布局

```
 <android.support.design.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:id="@+id/main_content"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:fitsSystemWindows="true">

        <android.support.design.widget.AppBarLayout
            android:id="@+id/MyAppbar"
            android:layout_width="match_parent"
            android:layout_height="256dp"
            android:fitsSystemWindows="true">

            <android.support.design.widget.CollapsingToolbarLayout
                android:id="@+id/collapse_toolbar"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                app:layout_scrollFlags="scroll|exitUntilCollapsed"
                android:background="@color/material_deep_teal_500"
                android:fitsSystemWindows="true">

                <ImageView
                    android:id="@+id/bgheader"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:scaleType="centerCrop"
                    android:fitsSystemWindows="true"
                    android:background="@drawable/screen"
                    app:layout_collapseMode="pin" />

                <android.support.v7.widget.Toolbar
                    android:id="@+id/MyToolbar"
                    android:layout_width="match_parent"
                    android:layout_height="?attr/actionBarSize"
                    app:layout_collapseMode="parallax" />

            </android.support.design.widget.CollapsingToolbarLayout>

        </android.support.design.widget.AppBarLayout>

        <android.support.v4.widget.NestedScrollView
            android:layout_width="match_parent"
            android:id="@+id/nested"
            android:layout_height="match_parent"
            android:layout_gravity="fill_vertical"
            app:layout_behavior="@string/appbar_scrolling_view_behavior">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">
        <android.support.design.widget.TabLayout
            android:id="@+id/tab_layout"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/MyToolbar"
            android:background="?attr/colorPrimary"
            android:elevation="6dp"
            android:minHeight="?attr/actionBarSize"
            android:theme="@style/ThemeOverlay.AppCompat.Dark.ActionBar"/>

        <android.support.v4.view.ViewPager
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/view_pager"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

        </android.support.v4.view.ViewPager>
    </LinearLayout>

        </android.support.v4.widget.NestedScrollView>

    </android.support.design.widget.CoordinatorLayout>

Mainactivity layout
activity_main.xml

        <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    app:layout_behavior="@string/appbar_scrolling_view_behavior"
    tools:context="com.example.jeffy.viewpagerapp.MainActivity"
    tools:showIn="@layout/activity_main">

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <GridView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/gridView1"
        android:numColumns="2"
        android:gravity="center"
        android:columnWidth="100dp"
        android:stretchMode="columnWidth"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

    </GridView>

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="SAVE"
        android:id="@+id/button" />

</LinearLayout>

</RelativeLayout> 
```

希望这会对某人有所帮助...如果这对您有帮助，请单击向上按钮

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-04T10:47:19.670

我创建了一个[自定义 PagerAdapters 库](https://github.com/takaaki7/ArrayPagerAdapter)来动态更改 PagerAdapters 中的项目。

您可以使用此库动态更改项目，如下所示。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
        /** ... **/
    adapter = new MyStatePagerAdapter(getSupportFragmentManager()
                            , new String[]{"1", "2", "3"});
    ((ViewPager)findViewById(R.id.view_pager)).setAdapter(adapter);
     adapter.add("4");
     adapter.remove(0);
}

class MyPagerAdapter extends ArrayViewPagerAdapter<String> {

    public MyPagerAdapter(String[] data) {
        super(data);
    }

    @Override
    public View getView(LayoutInflater inflater, ViewGroup container, String item, int position) {
        View v = inflater.inflate(R.layout.item_page, container, false);
        ((TextView) v.findViewById(R.id.item_txt)).setText(item);
        return v;
    }
} 
```

Thils 库还支持由 Fragments 创建的页面。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-17T12:08:39.040

要删除，您可以直接使用它：

```
getSupportFragmentManager().beginTransaction().remove(fragment).
                            commitAllowingStateLoss(); 
```

`fragment`是您要删除的片段。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-05-31T09:45:12.627

我为这个问题找到了一个很好的解决方案，这个解决方案可以让它工作并且不需要重新创建 Fragments。
我的重点是：

1.  **每次删除或添加选项卡（片段）时设置 ViewPager。**
2.  **覆盖 getItemId 方法，返回一个特定的 id 而不是位置。**

源代码

```
package com.zq.testviewpager;

import android.support.annotation.Nullable;
import android.support.design.widget.TabLayout;
import android.support.design.widget.FloatingActionButton;
import android.support.design.widget.Snackbar;
import android.support.v7.app.AppCompatActivity;
import android.support.v7.widget.Toolbar;

import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;

import android.widget.TextView;

import java.util.ArrayList;
import java.util.Arrays;
/**
 * Created by z8888q@gmail.com on 2017/5/31.
 * Implement dynamic delete or add tab(TAB_C in this test code).
 */
public class MainActivity extends AppCompatActivity {

    private static final int TAB_A = 1001;
    private static final int TAB_B = 1002;
    private static final int TAB_C = 1003;
    private static final int TAB_D = 1004;
    private static final int TAB_E = 1005;
    private Tab[] tabsArray = new Tab[]{new Tab(TAB_A, "A"),new Tab(TAB_B, "B"),new Tab(TAB_C, "C"),new Tab(TAB_D, "D"),new Tab(TAB_E, "E")};

    private ArrayList<Tab> mTabs = new ArrayList<>(Arrays.asList(tabsArray));

    private Tab[] tabsArray2 = new Tab[]{new Tab(TAB_A, "A"),new Tab(TAB_B, "B"),new Tab(TAB_D, "D"),new Tab(TAB_E, "E")};

    private ArrayList<Tab> mTabs2 = new ArrayList<>(Arrays.asList(tabsArray2));

    /**
     * The {@link android.support.v4.view.PagerAdapter} that will provide
     * fragments for each of the sections. We use a
     * {@link FragmentPagerAdapter} derivative, which will keep every
     * loaded fragment in memory. If this becomes too memory intensive, it
     * may be best to switch to a
     * {@link android.support.v4.app.FragmentStatePagerAdapter}.
     */
    private SectionsPagerAdapter mSectionsPagerAdapter;

    /**
     * The {@link ViewPager} that will host the section contents.
     */
    private ViewPager mViewPager;
    private TabLayout tabLayout;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
        setSupportActionBar(toolbar);
        // Create the adapter that will return a fragment for each of the three
        // primary sections of the activity.
        mSectionsPagerAdapter = new SectionsPagerAdapter(mTabs, getSupportFragmentManager());

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.container);
        mViewPager.setAdapter(mSectionsPagerAdapter);

        tabLayout = (TabLayout) findViewById(R.id.tabs);
        tabLayout.setupWithViewPager(mViewPager);

        FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.fab);
        fab.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                Snackbar.make(view, "Replace with your own action", Snackbar.LENGTH_LONG)
                        .setAction("Action", null).show();
            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.menu_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle action bar item clicks here. The action bar will
        // automatically handle clicks on the Home/Up button, so long
        // as you specify a parent activity in AndroidManifest.xml.
        int id = item.getItemId();

        //noinspection SimplifiableIfStatement
        if (id == R.id.action_settings) {
            return true;
        }else if (id == R.id.action_delete) {
            int currentItemPosition = mViewPager.getCurrentItem();
            Tab currentTab = mTabs.get(currentItemPosition);

            if(currentTab.id == TAB_C){
                currentTab = mTabs.get(currentItemPosition == 0 ? currentItemPosition +1 : currentItemPosition - 1);
            }

            mSectionsPagerAdapter = new SectionsPagerAdapter(mTabs2, getSupportFragmentManager());
            mViewPager.setAdapter(mSectionsPagerAdapter);
            tabLayout.setupWithViewPager(mViewPager);

            mViewPager.setCurrentItem(mTabs2.indexOf(currentTab), false);
            return true;
        }else if (id == R.id.action_add) {

            int currentItemPosition = mViewPager.getCurrentItem();
            Tab currentTab = mTabs2.get(currentItemPosition);

            mSectionsPagerAdapter = new SectionsPagerAdapter(mTabs, getSupportFragmentManager());
            mViewPager.setAdapter(mSectionsPagerAdapter);
            tabLayout.setupWithViewPager(mViewPager);

            mViewPager.setCurrentItem(mTabs.indexOf(currentTab), false);
            return true;
        }else

        return super.onOptionsItemSelected(item);
    }

    /**
     * A placeholder fragment containing a simple view.
     */
    public static class PlaceholderFragment extends Fragment {
        /**
         * The fragment argument representing the section number for this
         * fragment.
         */
        private static final String ARG_SECTION_NUMBER = "section_number";

        public PlaceholderFragment() {
        }

        /**
         * Returns a new instance of this fragment for the given section
         * number.
         */
        public static PlaceholderFragment newInstance(int sectionNumber) {
            PlaceholderFragment fragment = new PlaceholderFragment();
            Bundle args = new Bundle();
            args.putInt(ARG_SECTION_NUMBER, sectionNumber);
            fragment.setArguments(args);
            return fragment;
        }

        @Override
        public void onCreate(@Nullable Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            Log.e("TestViewPager", "onCreate"+getArguments().getInt(ARG_SECTION_NUMBER));
        }

        @Override
        public void onDestroy() {
            super.onDestroy();
            Log.e("TestViewPager", "onDestroy"+getArguments().getInt(ARG_SECTION_NUMBER));
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                                 Bundle savedInstanceState) {
            View rootView = inflater.inflate(R.layout.fragment_main, container, false);
            TextView textView = (TextView) rootView.findViewById(R.id.section_label);
            textView.setText(getString(R.string.section_format, getArguments().getInt(ARG_SECTION_NUMBER)));
            return rootView;
        }
    }

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
     * one of the sections/tabs/pages.
     */
    public class SectionsPagerAdapter extends FragmentPagerAdapter {
        ArrayList<Tab> tabs;

        public SectionsPagerAdapter(ArrayList<Tab> tabs, FragmentManager fm) {
            super(fm);
            this.tabs = tabs;
        }

        @Override
        public Fragment getItem(int position) {
            // getItem is called to instantiate the fragment for the given page.
            // Return a PlaceholderFragment (defined as a static inner class below).
            return PlaceholderFragment.newInstance(tabs.get(position).id);
        }

        @Override
        public int getCount() {
            return tabs.size();
        }

        @Override
        public long getItemId(int position) {
            return tabs.get(position).id;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            return tabs.get(position).title;
        }
    }

    private static class Tab {
        String title;
        public int id;

        Tab(int id, String title){
            this.id = id;
            this.title = title;
        }

        @Override
        public boolean equals(Object obj) {
            if(obj instanceof Tab){
                return ((Tab)obj).id == id;
            }else{
                return false;
            }
        }
    }
} 
```

代码在我的[Github Gist](https://gist.github.com/z8888q/056ff15d7bfa5fff57985bf4f08e907b)中。

# c# - Google.Apis.Util.Utilities.GetStringValue(System.Enum) 和 Google.Apis.Util.Utilities.GetStringValue(System.Enum) 之间的模糊调用

> ID：13664156
> 
> 赞同：2
> 
> 时间：2012-12-01T22:00:27.277
> 
> 标签：c#, google-api, google-drive-api

我在此站点上发布的代码存在此问题[https://developers.google.com/drive/quickstart-cs](https://developers.google.com/drive/quickstart-cs)是 Google 的 Google Drive 快速入门开发人员站点。我在网站上运行它并且运行良好。当我尝试在我为学术目的（请帮助）开发的桌面应用程序中使用该代码或其中的一部分时，问题就出现了，该应用程序需要将文件上传到 Google Drive。显然我不能使用他们在示例中使用的提示调用（例如 Console.WriteLine("File id: " + file.Id); ）。我的问题是它如何在基本的 promt 应用程序上正常工作，当我尝试在其他任何地方重用代码时给出错误“Google.Apis.Util.Utilities.GetStringValue(System.Enum) 和 Google.Apis 之间的模糊调用。 Util.Utilities.GetStringValue(System.Enum)"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:41:40.110

如果您在完全相同的完全限定类型中获得对看似完全相同的方法的模棱两可的调用，则表明您的项目引用的两个（或更多！）程序集公开了相同的完全限定类型名称。

在这种情况下（根据评论），您引用了 Silverlight 和“普通”桌面框架库。

# android - Android - 当设备改变方向时，布局土地中的布局 xml 未加载

> ID：13664157
> 
> 赞同：1
> 
> 时间：2012-12-01T22:00:29.300
> 
> 标签：android, android-layout, landscape

我正在为我的 CS 课程开发一个 Android 项目，我需要在其中输入模拟坐标。我想为方向和纵向指定不同的布局文件。我的文件夹中有一个`layout`文件夹和一个`layout-land`文件`/res`夹。layout 文件夹中的 xml 文件和 layout-land 文件夹中的 xml 文件命名完全相同。我没有`android:configChanges="orientation"`或没有`android:screenOrientation="portrait"`为此特定活动设置 - 但是，我确实为其他活动设置了它。我也没有`onConfigurationChanged`在这项活动中实施。

`layout-land`从理论上讲，当方向随这些设置发生变化时，屏幕应该更改为指定的布局，对吗？

然而，这种情况并非如此。布局保持不变。

我试图通过给横向布局一个不同的布局ID来强制它改变`android:id="@+layout/activity_mock_coor_land"`，然后做`setContentView(R.layout.activity_mock_coor_land)"`。

但是，它给了我这个堆栈跟踪的错误：

```
AndroidRuntime(13964): FATAL EXCEPTION: main
AndroidRuntime(13964): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mixd.grounds.tour/com.mixd.grounds.tour.MockCoor}: android.content.res.Resources$NotFoundException: Resource ID #0x7f030009 type #0x12 is not valid
AndroidRuntime(13964):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
AndroidRuntime(13964):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
AndroidRuntime(13964):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
AndroidRuntime(13964):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
AndroidRuntime(13964):  at android.os.Handler.dispatchMessage(Handler.java:99)
AndroidRuntime(13964):  at android.os.Looper.loop(Looper.java:123)
AndroidRuntime(13964):  at android.app.ActivityThread.main(ActivityThread.java:4627)
AndroidRuntime(13964):  at java.lang.reflect.Method.invokeNative(Native Method)
AndroidRuntime(13964):  at java.lang.reflect.Method.invoke(Method.java:521)
AndroidRuntime(13964):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
AndroidRuntime(13964):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
AndroidRuntime(13964):  at dalvik.system.NativeStart.main(Native Method)
AndroidRuntime(13964): Caused by: android.content.res.Resources$NotFoundException: Resource ID #0x7f030009 type #0x12 is not valid
AndroidRuntime(13964):  at android.content.res.Resources.loadXmlResourceParser(Resources.java:1874)
AndroidRuntime(13964):  at android.content.res.Resources.getLayout(Resources.java:731)
AndroidRuntime(13964):  at android.view.LayoutInflater.inflate(LayoutInflater.java:318)
AndroidRuntime(13964):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
AndroidRuntime(13964):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
AndroidRuntime(13964):  at android.app.Activity.setContentView(Activity.java:1647)
AndroidRuntime(13964):  at com.mixd.grounds.tour.MockCoor.onCreate(MockCoor.java:21)
AndroidRuntime(13964):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
AndroidRuntime(13964):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
AndroidRuntime(13964):  ... 11 more 
```

我不太确定这意味着什么。它找不到我的布局`layout-land`吗？

任何人都可以帮助解决这个问题吗？

编辑：清单：

> `<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="com.mixd.grounds.tour" android:versionCode="1" android:versionName="1.0" >`

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
<uses-permission android:name="android.permission.INTERNET" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <uses-library
        android:name="com.google.android.maps"
        android:required="true" />

    <activity
        android:name=".SplashScreen"
        android:label="@string/title_activity_main"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".MapsActivity"
        android:configChanges="orientation|keyboardHidden"
        android:label="@string/title_activity_maps"
        android:theme="@android:style/Theme.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
        </intent-filter>
    </activity>
    <activity
        android:name=".MainActivity"
        android:configChanges="keyboardHidden"
        android:label="@string/title_activity_main"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Choice"
        android:label="@string/title_activity_choice"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
        </intent-filter>
    </activity>
    <activity
        android:name=".MockCoor"
        android:label="@string/title_activity_mock_coor" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
        </intent-filter>
    </activity>
    <activity
        android:name=".MockActivity"
        android:label="@string/title_activity_mock"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
        </intent-filter>
    </activity>
    <activity
        android:name=".NextCoor"
        android:label="@string/title_activity_next_coor" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
        </intent-filter>
    </activity>
    <activity
        android:name=".HistoryButton"
        android:label="@string/title_activity_history_button" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
        </intent-filter>
    </activity>
    <activity
        android:name=".DisplayHistory"
        android:label="@string/title_activity_display_history" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
        </intent-filter>
    </activity>
</application> 
```

> `</manifest>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T22:23:54.477

如果您要为布局文件使用新名称，则需要从头开始重建所有内容，这意味着您必须手动重新创建包括所有视图在内的所有内容。使用布局域时，您必须对所有内容保持相同的命名约定。如果您发布所有代码，我们可能会为您提供帮助，但绝对不要将土地文件与新命名的文件一起使用，因为您必须在配置更改时重建整个活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:03:52.160

确保您的设备中启用了“自动旋转”功能。在我的设备（Galaxy Gio）中，我可以在通知窗口中启用它...

# python - python验证码解码器库

> ID：13664161
> 
> 赞同：1
> 
> 时间：2012-12-01T22:00:44.697
> 
> 标签：python, image, image-processing, python-imaging-library, captcha

我需要一个用于 python 的验证码解码器来读取简单的图像验证码，如下图所示：

![验证码](../Images/9be2f82a4d6810dfedccb643f5236840.png)

![简单的验证码](../Images/06307f3c0b1a378c0b59a8ec5325afa9.png)

![验证码](../Images/020e6a3cc0efce64250ac6b068479930.png)

您知道可以帮助我阅读此验证码的图书馆吗？

如果您不知道用于阅读验证码的图书馆，您能帮我用 PIL 阅读这个（以及其他类似的）吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T00:23:23.020

我希望这个验证码不会在任何地方使用。

以下是一种解码它的虚拟方法。基本上，您需要的是这些验证码中存在的从 0 到 9 的模式。从您的示例中，我只有 0 3 4 5 7 8 的模式。由于所有内容都固定在它们上，因此您知道在哪里拆分每个字符。你也知道每个字符都是一些固定大小和固定字体的。如果它还包含字母或更多字符，但大小和字体是固定的，则可以轻松修改以下代码。

代码的作用是：a）加载模式（我认为它们被命名为 n0.png，n1.png，...）；b) 将验证码拆分为 NUMS 块；c) 对每个模式和每个拆分数之间的平方差求和；d) 确定拆分数是总和最小的拆分数。它按顺序返回验证码中存在的每个数字的列表。要获得初始模式，您可以取消注释保存拆分编号的行，`return`在该部分之后放置一个，然后调整文件名。

```
import sys
from PIL import Image, ImageOps

PAT_SIZE = (8, 10)
NUMS = 3
FIRST_NUM_OFFSET = 5
NUM_OFFSET = (1, 3)

NUMBERS = []
for i in xrange(10):
    try:
        NUMBERS.append(Image.open('n%d.png' % i).load())
    except IOError:
        print "I do not know the pattern for the number %d." % i
        NUMBERS.append(None)

def magic(fname):
    captcha = ImageOps.grayscale(Image.open(fname))
    im = captcha.load()

    # Split numbers
    num = []
    for n in xrange(NUMS):
        x1, y1 = (FIRST_NUM_OFFSET + n * (NUM_OFFSET[0] + PAT_SIZE[0]),
                NUM_OFFSET[1])
        num.append(captcha.crop((x1, y1, x1 + PAT_SIZE[0], y1 + PAT_SIZE[1])))

    # If you want to save the split numbers:
    #for i, n in enumerate(num):
    #    n.save('%d.png' % i)

    def sqdiff(a, b):
        if None in (a, b): # XXX This is here just to handle missing pattern.
            return float('inf')

        d = 0
        for x in xrange(PAT_SIZE[0]):
            for y in xrange(PAT_SIZE[1]):
                d += (a[x, y] - b[x, y]) ** 2
        return d

    # Calculate a dummy sum of squared differences between the patterns
    # and each number. We assume the smallest diff is the number in the
    # "captcha".
    result = []
    for n in num:
        n_sqdiff = [(sqdiff(p, n.load()), i) for i, p in enumerate(NUMBERS)]
        result.append(min(n_sqdiff)[1])
    return result

print magic(sys.argv[1]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T22:27:31.177

我希望您真诚地使用它，并且您不会伤害（/垃圾邮件）任何人。

我不会为您编写脚本，也不会将您转发给外部插件。但是如果你是自己写的，这可能会有所帮助：

*   如果您尝试解码特定的验证码模式，您应该收集所有字符（我从您附加的示例中看到它只是数字，所以它不应该做很多工作）。
*   将所有字符放在一个文件中并使用 PIL 进行分析
*   将每个字符、其位置和含义保存在一个数组中。
*   获取验证码图像 - 如有必要，清除背景噪音。
*   将 Captcha 图像拆分为 char 大小，并通过您自制的字符字典将其交叉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T01:14:12.343

出于学术原因，这是一个不错的项目，我前一阵子对此很感兴趣。你有几个选择：

1.  您可以在此站点的帮助下编写自己的代码：*[已清理的死链接]*

2.  您使用 OpenCV 进行匹配。

如果认为有一个专门用于神经网络图像匹配的库，但我似乎找不到它。

基本上正如其他人所说，您想要去除噪音，分成单个字符并使用选定的技术将其与模型字符进行比较。

# jquery - Fancybox 2：更新播放次数

> ID：13664170
> 
> 赞同：1
> 
> 时间：2012-12-01T22:01:47.807
> 
> 标签：jquery, youtube, fancybox, youtube-api, fancybox-2

我想使用 fancybox 2（或类似的东西）嵌入 youtube 视频。我知道如果视频设置为自动播放，播放计数将不会更新。如果我禁用了 fancybox 中的自动播放功能，由于用户正在与 youtube 播放器交互，播放计数是否会更新？

# asp.net-mvc - 使用 MVC4 / IIS7.5 重定向到非 www-url 域

> ID：13664171
> 
> 赞同：1
> 
> 时间：2012-12-01T22:01:50.880
> 
> 标签：asp.net-mvc, iis, web-config

首先，我只是在 Stackoverflow 上花了几个小时阅读类似的问题，但似乎没有答案对我有用。

我有一个存在 SEO 问题的 MVC4 应用程序：非 www 未重定向到 www。我已经在服务器（IIS7.5）和我的本地环境（VS2010）上安装了重写模块。我尝试了很多方法，但似乎没有一个有效......

理想情况下，我希望在我的 MVC4 解决方案中使用重写规则，并避免进行服务器端配置，因为它在部署到新服务器时更方便。

我试图将以下代码块放在我的 web.config 中：

```
 <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <!-- code added for SEO non-www to www redirect -->
    <rewrite>
      <rules>
        <rule name="Remove WWW prefix" >
          <match url="(.*)" ignoreCase="true" />
          <conditions>
            <add input="{HTTP_HOST}" pattern="^domain\.com" />
          </conditions>
          <action type="Redirect" url="http://www.domain.com/{R:1}"
              redirectType="Permanent" />
        </rule>
      </rules>
    </rewrite>
    <!-- SEO code -->
  </system.webServer> 
```

然后我发布了解决方案（使用正确的域名），但没有任何变化。尝试访问[http://domain.com](http://domain.com)时，我只收到 404 not found 错误。

我为此部分尝试了几个代码块，但它从来没有工作过。我也尝试在服务器上配置它，但效果不佳。最好的解决方案是在我的 web.config 中进行重写，这样每当我发布到新的 Web 服务器时都会应用这些规则。

有人认为这有什么问题吗？我的 web.config 在我的 MVC4 应用程序中，并通过我们在 VS2010 中右键单击解决方案时获得的发布菜单发布。

非常感谢您的回复。

我也尝试了这个块的规则，但它没有改变任何东西..

```
 <rule name="Redirect to WWW" stopProcessing="true">
  <match url=".*" />
  <conditions>
    <add input="{HTTP_HOST}" pattern="^domain.com$" />
  </conditions>
  <action type="Redirect" url="http://www.domain.com/{R:0}" redirectType="Permanent" />
</rule> 
```

# click - Raphael JS：单击/鼠标按下/拖动的奇怪行为

> ID：13664180
> 
> 赞同：1
> 
> 时间：2012-12-01T22:02:36.750
> 
> 标签：click, raphael, element, transform

嗨，我目前正在开发一个包含 Raphael JS 的 facebook 应用程序。用户可以在画布周围单击和拖动几何形状，然后将坐标存储在外部数据库中。出于某种原因，在我的一位同事的一台机器上，每次用户与使用 Raphael js 库绘制的形状进行交互时，元素都会跳转到画布的左上角。在所有其他机器上，元素在单击时保持原位，用户可以按预期拖动对象。

是否有一个原因？我检查了开发人员日志，没有明显错误。也没有警告或类似的东西。我使用的唯一添加的库是 FreeTransform [https://github.com/ElbertF/Raphael.FreeTransform](https://github.com/ElbertF/Raphael.FreeTransform)

任何投入将不胜感激！

编辑

这是我用来初始化我的形状的代码。我正在循环一系列数组项并生成许多元素。

```
for (i in fb_circs){
    var s = paper.set();
    var c = paper.circle(fb_circs[i].x, fb_circs[i].y, fb_circs[i].r); c.title = fb_circs[i].id; c.p_set = s;
    var n = paper.circle(fb_circs[i].x, fb_circs[i].y, fb_circs[i].r); n.title = fb_circs[i].id; n.p_set = s;
    var l = paper.text(fb_circs[i].x, fb_circs[i].y, fb_circs[i].title.replace(/ /g,'\n')).attr({fill: fb_circs[i].tColour, 'font-size': fb_circs[i].font}); l.title = fb_circs[i].id; l.p_set = s;
    c.attr({"fill": fb_circs[i].f, "stroke": fb_circs[i].s, "stroke-width": fb_circs[i].swidth });
    n.attr({"fill": "#fff", 'fill-opacity': 0, 'opacity':0, "stroke": fb_circs[i].s, 'stroke-width':fb_circs[i].swidth });
    s.main_type = 'circle set';
    s.push(c); s.push(n); s.push(l);
    var f = paper.freeTransform(s, { keepRatio: true, drag: 'self', draw: [ 'bbox', 'circle' ] }, function(f, events){ });
    f.attrs.rotate = fb_circs[i].rotate; f.apply();

    f.setOpts({drag:'self', scale:false, rotate:false, draw:false}, function(f, events){
        var evt = String(events);
        if (evt.indexOf('end') == -1) return false;
        if (selected_circ == null) return false;
        if (!$('.colorpicker').is(':visible')) sets[selected_circ].last_rotate = f.attrs.rotate;
        if (editingCirc == 0) updateCirc(selected_circ);
    });

    s.id = fb_circs[i].id;
    s.primary_colour = fb_circs[i].f;
    s.t_colour = fb_circs[i].tColour;
    s.circ_title = fb_circs[i].title;
    s.stroke_colour = fb_circs[i].s;
    s.lastview = fb_circs[i].lastview;
    s.last_rotate = fb_circs[i].rotate;

    sets[s.id] = s;
    circs[s.id] = c;
    notifs[s.id] = n;
    lbls[s.id] = l;
    fts[s.id] = f;
    titles[s.id] = fb_circs[i].title;

    s.click(function(){ 
        if (editingCirc == 1){
            if (this.title != selected_circ){
                return false;
            }
        }
        selected_circ = this.title;         
        curr_type='1';
    });

    s.mousedown(function(){ 
        if (editingCirc == 1){
            if (this.title != selected_circ){
                return false;
            }
        }
        selected_circ = this.title;
        curr_type='1';
        sets[selected_circ].forEach(function (el){ el.node.ownerSVGElement.appendChild(el.node); }); 
    });

    s.hover( 
        function(){ 
            /* over */
            if (editingCirc == 1){
                if (this.title != selected_circ){
                    return false;
                }
            }
            curr_type='1';
            selected_circ = this.title;
            $('.popup_title').text(titles[this.title]);
            if (this.type!='text'){
                showPopup(this.getBBox());
            }
        }, 
        function(){ 
            /* out */
            //$('#tTip').fadeOut();
        }
    );

    s.drag( 
        function(){ 
            /* object moving */ 
            if (editingCirc == 1){
                if (this.title != selected_circ){
                    return false;
                }
            }
            showPopup( this.getBBox() ); 
        }, 
        function(){ 
            /* start drag */ 
        }, 
        function(){ 
            /* end drag */ 
        } 
    );
} 
```

# android - 其中许多的位图

> ID：13664182
> 
> 赞同：4
> 
> 时间：2012-12-01T22:02:44.043
> 
> 标签：android, performance, bitmap, android-canvas, bitmapfactory

伙计们，我有一个解决方案可以从 5 个不同的另一个中创建一个位图。但是，我希望这个解决方案更快。我找不到另一种简单快捷的方法来做同样的事情。

```
private void createImage() {
    // Magic numbers from image files
    int numberOfImages = 5;
    int imgWidth = 125;
    int imgHeight = 300;
    int totalwidth = imgWidth * numberOfImages;
    int totalheight = imgHeight;

    img = Bitmap.createBitmap(totalwidth, totalheight, Bitmap.Config.ARGB_8888);

    for (int i = 0; i < numberOfImages; i++) {
        Bitmap imgFile = BitmapFactory.decodeResource(context.getResources(), context.getResources().getIdentifier(
                "f" + i, "drawable", context.getPackageName()));
        for (int x = 0; x < imgWidth; x++) {
            for (int y = 0; y < imgHeight; y++) {
                int targetX = x + (i * imgWidth);
                int targetY = y;
                int color = imgFile.getPixel(x, targetY);
                img.setPixel(targetX, targetY, color);
            }
        }
    }

    img = Bitmap.createScaledBitmap(img, screenWidth, screenHeight, true);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T22:14:11.050

你大部分时间都在那里。您已经创建了一个足够宽的位图以供所有人使用。

然后您需要做的是一次将位图直接绘制到其上，但一次绘制整个位图，而不是逐个像素。

您可以使用调用来执行此操作[`Canvas`](http://developer.android.com/reference/android/graphics/Canvas.html)。这有助于将事物绘制到位图上。

```
img = Bitmap.createBitmap(totalwidth, totalheight, Bitmap.Config.ARGB_8888);
Canvas drawCanvas = new Canvas(img);

for (int i = 0; i < numberOfImages; i++) {
    Bitmap imgFile = BitmapFactory.decodeResource(context.getResources(), context.getResources().getIdentifier(
            "f" + i, "drawable", context.getPackageName()));

          // Draw bitmap onto combo bitmap, at offset x, y.
          drawCanvas.drawBitmap(imgFile, i * imgWidth, 0, null);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T22:24:12.217

我想`Bitmap.getPixels()`and`Bitmap.setPixels()`方法可能会有所帮助。

```
private void createImage() {
    // Magic numbers from image files
    int numberOfImages = 5;
    int imgWidth = 125;
    int imgHeight = 300;
    int totalwidth = imgWidth * numberOfImages;
    int totalheight = imgHeight;

    img = Bitmap.createBitmap(totalwidth, totalheight, Bitmap.Config.ARGB_8888);

    int buf[] = new int[totalwidth * totalheight];

    for (int i = 0; i < numberOfImages; ++i) {
        Bitmap imgFile = BitmapFactory.decodeResource(context.getResources(),
            context.getResources().getIdentifier(
                "f" + i, "drawable", context.getPackageName()));
        imgFile.getPixels(buf, i*imgWidth, totalwidth, 0, 0, imgWidth, imgHeight);
    }
    img.setPixels(buf, 0, totalwidth, 0, 0, totalwidth, totalheight);

    img = Bitmap.createScaledBitmap(img, screenWidth, screenHeight, true);

} 
```

我没有尝试过，但根据[文档](http://developer.android.com/reference/android/graphics/Bitmap.html#setPixels%28int%5B%5D,%20int,%20int,%20int,%20int,%20int,%20int%29) [，](http://developer.android.com/reference/android/graphics/Bitmap.html#getPixels%28int%5B%5D,%20int,%20int,%20int,%20int,%20int,%20int%29)我认为它应该可以工作。我想它有望快得多，因为我们只用 6 个函数调用来完成所有工作，假设这些函数在幕后做的事情比仅仅遍历数组（例如直接内存复制）更聪明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-16T19:28:19.097

Doomsknight 的回答对我来说似乎是正确的，但您不应该在 Android 的主线程上执行此类进程。太多的图像可能会达到[16 毫秒的障碍](https://developer.android.com/training/testing/performance.html#measure)。

您可以在后台处理程序线程中执行此操作，并在完成后更新 UI 线程。

```
HandlerThread cropperHandlerThread = new HandlerThread("background_cropper");
cropperHandlerThread.start();
// Do not call getLooper before start handler thread.
Handler cropperHandler = new Handler(cropperHandlerThread.getLooper());
cropperHandler.post(new Runnable() {
    @Override
    public void run() {
        // Create Bitmap Here
        MainActivity.this.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                // Update ImageView here
            }
        });
    }
}); 
```

# android - 网络状态改变后 SMS_RECEIVED BroadcastReceiver 如何启动

> ID：13664184
> 
> 赞同：0
> 
> 时间：2012-12-01T22:02:54.070
> 
> 标签：android

假设网络服务不可用或您处于飞行模式，此时您收到一条短信。BroadcastReceiver 如何被触发，它如何知道在网络关闭或不可用时收到了一条短信？它是默认的彩信应用程序，还是内部服务或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:08:12.717

不是，飞行模式意味着无线电关闭，没有服务意味着您的手机无法访问其网络，因此没有应用程序可以与外界通信。如果向您发送了一条短信，您的手机将无法检索它。但是，下次有服务时，它会检查。

# javascript - JS设置的div的文本内容不会换行

> ID：13664187
> 
> 赞同：0
> 
> 时间：2012-12-01T22:03:20.937
> 
> 标签：javascript, html

我有一些用 JS 创建的 div， `mydiv.textContent="blahblahblahblahblahblah";` 尽管事实上 mydiv 的宽度设置为 100px，但分配给 div 的文本字符串一直在一行中，不会下降到其他文本。我很困惑

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T22:06:45.850

在你的 CSS 中使用

```
word-wrap: break-word; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T22:23:58.330

如果您想将字符串分成两行并且不包含空格，则需要插入合适的控制字符或 HTML 标记以允许可接受的中断，或者可能使用自动连字符。所以这真的取决于你拥有的内容类型；请参阅我[关于 HTML 中分词的页面](http://www.cs.tut.fi/~jkorpela/html/nobr.html)。

如果内容实际上`"blahblahblahblahblahblah"`是 JavaScript 字符串，则将其设为`"blah\xadblah\xadblah\xadblah\xadblah\xadblah"`. 该符号`\xad`代表 U+00AD SOFT HYPHEN，它被视为不可见的断字提示。

# matlab - 在 MatLab 中制定求和目标函数以最小化 fmincon

> ID：13664189
> 
> 赞同：1
> 
> 时间：2012-12-01T22:03:45.033
> 
> 标签：matlab, optimization, nonlinear-functions, nonlinear-optimization

我有一个求和目标函数（非线性投资组合优化），如下所示：

```
minimize w(i)*w(j)*cv(i,j) for i = 1 to 10 and j = 1 to 10 
```

*   **w**是决策向量
*   **cv**是一个已知的 10 x 10 矩阵

我已经为约束（项目约束的单独 .m 文件）和 fmincon 的执行（下/上限、初始值和使用参数调用 fmincon 的单独 .m 文件）制定了公式。

我只是不知道如何做目标函数。我习惯于在 GLPK 而不是 matlab 中进行线性编程，所以我做得不太好。

我目前得到：

**目标函数.m**

```
function f = obj(w)

cv = [all the constants are in here]

i = 1;    
j = 1;    
n = 10;    
var = 0;    

while i <= n    
       while j<=n    
           var = var + abs(w(i)*w(j)*cv(i, j));    
           j = j + 1;    
       end    
       i = i + 1;    
end

f = var 
```

...但这不起作用。

任何帮助，将不胜感激！提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:28:20.960

所以这是我几年前上的一门课，但它解决了一个与您自己非常相似的问题，即使用 fminsearch 优化某些值。问题本质上是你有 at, y，你想要一个连续的指数函数来表示 t, y 用 c1*t.*exp(c2*t) 表示。我从中提取值的教科书称为[Timothy Sauer 的《数值分析》](https://rads.stackoverflow.com/amzn/click/com/0321268989)。不幸的是，我不记得确切的问题或章节，但它就在某个地方。

c1 和 c2 是通过 fminsearch 最小化残差 y - ((c1) * t .* exp((c2) * t)) 递归找到的。尝试在下面复制并运行我的代码来感受一下：

```
 %% Main code
    clear all; 
    t = [1,2,3,4,5,6,7,8]; 
    y = [8,12.3,15.5,16.8,17.1,15.8,15.2,14]; 
    lambda0=[1 -.5]; 
    lambda=fminunc(@expdecayfun,lambda0, ...
    optimset('LargeScale','off','Display','iter','TolX',1.e-6),t,y); 
    c1=lambda(1);
    c2=lambda(2); 
    fprintf('Using the BFGS method through fminunc, c1 = %e\n',c1); 
    fprintf('and c2 = %e. Since these values match textbook values for\n', c2); 
    fprintf('c1 and c2, I will stop here.\n');        

    %% Index of functions:
    % expdecayfun
    function res=expdecayfun(lambda,t,y) c1=lambda(1); 
    c2=lambda(2); 
    r=y-((c1)*t.*exp((c2)*t)); 
    res=norm(r); 
```

希望这可以帮助！

# android - Android Facebook SDK：不发送访问令牌？

> ID：13664192
> 
> 赞同：0
> 
> 时间：2012-12-01T22:04:05.470
> 
> 标签：android, facebook-graph-api, facebook-android-sdk

我正在使用以下代码段来请求授权用户的好友列表：

```
System.out.println("AT: " + facebook.getAccessToken());
String response = facebook.request("me/friends?fields=first_name,last_name,id,gender"); 
```

我得到的回应：

```
{"error":{"message":"An active access token must be used to query information about the current user.","type":"OAuthException","code":2500}} 
```

我正在打印访问令牌，这给了我一个有效的令牌。此外，`getAccessExpires()`返回未来的时间。当我请求`"me/friends"`没有任何参数的 url 时，我得到了预期的（但数据较少）朋友列表而没有错误。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:46:31.203

> String response = facebook.request("me/friends?fields=first_name,last_name,id,gender");

那是不正确的使用方式`facebook.request`。我假设您没有使用 beta Android SDK，因此正确的方法是执行以下操作：

```
Facebook facebook = new Facebook(YOUR_APP_ID);
AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
Bundle params = new Bundle();
params.put("fields", "first_name, last_name, id, gender");
mAsyncRunner.request("me/friends", params, new RequestListener() {
    // get response here
    ....
}); 
```

希望这可以帮助。

# database - 如何查找所有房地产列表数据？

> ID：13664196
> 
> 赞同：8
> 
> 时间：2012-12-01T22:04:34.570
> 
> 标签：database, api

我想知道 redfin 或 zillow 之类的网站如何获取所有房地产列表和开放日信息。是否有任何开放数据源或 API 来获取所有这些？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T00:38:47.627

[MLS](http://www.mls.com/) gives real estate listings for various parts of the United States. And there's a [real estate cloud api](http://www.programmableweb.com/api/real-estate-cloud-mls) to access its data.

# dictionary - 如何标题大小写特定字符

> ID：13664198
> 
> 赞同：0
> 
> 时间：2012-12-01T22:05:07.643
> 
> 标签：dictionary, python-3.x, formatting, case

所以我创建了我的字典，然后感谢这个网站上一些好人的帮助，我设法以一种很好的方式将密钥打印给用户。然后我自己想出了如何按值对字典进行排序，以便我可以以有序的方式打印唯一的键。

这是我所在的位置：

```
diff_dict = {'easy':0.2, 'medium':0.1, 'hard':0.05} # difficulty level dict

from collections import OrderedDict

diff_dict = OrderedDict(sorted(diff_dict.items(), key= lambda x: x[1], reverse\
 = True))

print ('\nHere are the 3 possible choices: ', ' - '.join(diff_dict)) 
```

哪个输出：

> 以下是 3 种可能的选择：简单 - 中等 - 困难

所以我的第一个想法是通过像这样格式化这些键来让它变得更好：

```
print ('\nHere are the 3 possible choices: ', ' - '.join(diff_dict).upper()) 
```

> 以下是 3 种可能的选择：简单 - 中等 - 困难

更好的是，我尝试只大写第一个字母怎么样？所以我研究了一下，我的第一个想法是找到一些格式来指定第一个字母。我找不到解决方案，或者更好地说，我找到了一个让我有更多问题的解决方案：

```
print ('\nHere are the 3 possible choices: ', ' - '.join(diff_dict).title()) 
```

> 以下是 3 种可能的选择：简单 - 中等 - 困难

所以这正是我正在寻找的输出，但我很好奇，所以我想要一些反馈，例如：

1.  如果我想实现相同但使用字符串格式（如 str.upper）怎么办？
2.  如果我想更改特定字符而不仅仅是第一个字符怎么办？（替换，案例，随便）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:07:59.423

您不需要为此使用 an `OrderedDict`。使用列表理解要容易得多：

```
options = [o.title() for o in sorted(diff_dict, key=lambda k: diff_dict[k], reverse=True)]
print('\nHere are the 3 possible choices: ', ' - '.join(options)) 
```

`[expr for var in iterable]`列表推导将该方法应用于我们`.title()`通过对 的键进行排序得到的每个字符串`diff_dict`。这样，您可以单独格式化每个单词，而不是应用`.title()`到已经连接的整体。

这打印：

> 以下是 3 种可能的选择：简单 - 中等 - 困难

如果你想知道为什么会这样，这里有一些组成部分：

```
>>> sorted(diff_dict, key=lambda k: diff_dict[k], reverse=True)
['easy', 'medium', 'hard']
>>> [o.title() for o in sorted(diff_dict, key=lambda k: diff_dict[k], reverse=True)]
['Easy', 'Medium', 'Hard']
>>> ' - '.join([o.title() for o in sorted(diff_dict, key=lambda k: diff_dict[k], reverse=True)])
'Easy - Medium - Hard' 
```

希望这能给您一些关于如何使用其他方法操作每个选项字符串的想法。

# php - PHP引号和双引号不会显示数据

> ID：13664201
> 
> 赞同：1
> 
> 时间：2012-12-01T22:05:19.577
> 
> 标签：php, sql-server

我正在尝试从 MSSQL 中显示 PHP 中的文本字段，我已经阅读了大量内容，但没有任何效果，select 语句在 MSSQL 中有效，但是当我将它放入 PHP 中时，它会破坏 PHP 代码并且页面获胜不显示。
所以这是我的问题，我在 mssql 中有一个描述字段，它将输出这样的数据

```
30" x 60" D/S Banner 
```

或者

```
Billboard 16 x 60 (17'H x 61'W)  3/3 Pockets 
```

或者

```
Barbara's Mesh Banner 
```

因此，当我显示一系列作业时，作业编号、数量和日期显示正常，但描述不会显示任何内容所以我尝试将 sql 中的 qutoes 替换为

```
replace( replace( convert(varchar(max), Description), '"', ''), '''', '') as Description 
```

但这破坏了我的 PHP 页面并且没有显示任何内容，但是在我的 MSSQL qry 中它运行良好。我已经从 PHP 端尝试使用 str_replace 无济于事。任何输入将不胜感激

我在 PHP 中的 sql 语句

```
$qry = odbc_exec($connection, "SELECT A.CompanyName, TH.OrderNumber, TD.ID AS PartNumber, TD.Description, TD.Quantity, TD.LineItemNumber,
TH.AccountID, TH.OrderCreatedDate, TH.SaleDate, TH.DueDate, InternalNotes, ProductionNotesTemplate
From TransHeader TH
    Join TransDetail TD
        ON TH.OrderNumber = TD.TransHeaderTransNumber
    LEFT JOIN Account A
        ON TH.AccountID = A.ID
WHERE  AccountNumber = '$AccountNumber' " ); 
```

在 PHP 中显示数组

```
while(odbc_fetch_array($qry)){

        $OrderNumber        = odbc_result($qry, "OrderNumber");

        $PartNumber         = odbc_result($qry, "PartNumber");

        $QTY            = odbc_result($qry, "Quantity");

        $InternalNotes      = odbc_result($qry, "InternalNotes");
        $Description        = odbc_result($qry, "Description");

        $DueDate        = odbc_result($qry, "DueDate");
        $LineItemNumber     = odbc_result($qry, "LineItemNumber");
        $ProductionNotes    = odbc_result($qry, 'ProductionNotesTemplate') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T22:49:49.380

在您的代码中，没有理由发生这种情况。

您的替换查询因引用而失败：尝试使用“here-document”语法来简化转义

```
$sql_code = <<<SQL_CODE 
```

选择 A.CompanyName、TH.OrderNumber、TD.ID 作为 PartNumber、TD.Description、TD.Quantity、TD.LineItemNumber、TH.AccountID、TH.OrderCreatedDate、TH.SaleDate、TH.DueDate、替换（替换（转换（varchar (max), InternalNotes), '"', 'in'), '\'', 'ft') as InternalNotes, ProductionNotesTemplate From TransHeader TH Join TransDetail TD ON TH.OrderNumber = TD.TransHeaderTransNumber LEFT JOIN Account A ON TH。 AccountID = A.ID WHERE AccountNumber = '$AccountNumber'; SQL_CODE;

```
$qry = odbc_exec($connection, $sql_code); 
```

但是前面的错误，即不更换显示被破坏的事实，没有解释，除非该字段包含比引号更奇怪的东西，或者您不只是“输出”它（例如：如果您尝试通过生成 HTML 并将其放入 Javascript 代码中，那么是的，引号几乎肯定会破坏您的页面，并且可能根本不显示任何内容。即使*这*仍然不能解释 500 错误）。

所以尝试原始查询，但输出`InternalNotes`如下：

```
<td><?php print HTMLEntities($InternalNotes); ?></td> 
```

看看这个变量里面到底是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T22:24:40.877

为什么不使用[PDO](http://php.net/manual/en/ref.pdo-sqlsrv.php)并使用准备好的语句，[将值绑定](http://php.net/manual/en/pdostatement.bindvalue.php)到您的查询，完全绕过整个引号转义问题？

要了解有关使用 PDO 的分步过程的更多信息，[Google](https://www.google.com/?q=pdo%20prepared%20statement%20tutorial)是您的朋友。快速浏览第一页的结果后，[本教程](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)似乎最有希望。

希望这可以帮助！

# php - require_once 在网络服务器上找不到文件，但在本地主机上工作

> ID：13664209
> 
> 赞同：1
> 
> 时间：2012-12-01T22:06:06.243
> 
> 标签：php

所有，我有以下文件：

builder.php Oauth.php twitteroauth.php

在我的 builder.php 页面中，我有以下代码：

```
require_once('twitteroauth.php'); 
```

然后在我的 twitteroauth.php 页面中，我有以下代码：

```
require_once('OAuth.php'); 
```

所有这些文件都在以下路径中：wp-content/themes/alyeska/framework/frontend/functions

我正在我的本地主机上测试它，它工作正常。但是，当我将所有这些文件上传到我的网络服务器时，我收到以下错误消息：

警告：require_once(OAuth.php) [function.require-once]：无法打开流：/home/arokyne/website.com/wp-content/themes/alyeska/framework/frontend/functions/ 中没有这样的文件或目录第 10 行的 twitteroauth.php

致命错误：require_once() [function.require]：在 /home 中打开所需的 'OAuth.php' (include_path='.:/usr/local/lib/php:/usr/local/php5/lib/pear') 失败/arokyne/website.com/wp-content/themes/alyeska/framework/frontend/functions/twitteroauth.php 在第 10 行

我不确定为什么会收到这些错误，因为它可以在我的本地主机上运行。谁能指出我如何解决这个问题的正确方向？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T22:10:01.513

有两件事让我想到——确保你的路径是正确的，包括区分大小写；另外，确保文件的权限允许 php 服务器读取文件。我相信 644 模式就足够了；但是，在最坏的情况下，755 肯定会工作。

最后，您可能想检查您的包含路径是否正确。

# ruby - 来自两个哈希的红宝石单线

> ID：13664215
> 
> 赞同：0
> 
> 时间：2012-12-01T22:06:47.550
> 
> 标签：ruby

```
a = {"rows" => [{"id" => "231-z", "name" => 'jon', "age"=> 27, "state" => 'AL'}, 
                {"id" => "4121-x", "name" => 'ton', "age"=> 37, "state" => 'VA'}
               ]
    }

b = {"rows" => [{"key" => ["xyz","4121-x"], "value" =>{"sum" => 12312, "realage" => 29}}, 
                {"key" => ["xyz","231-z"], "value" =>{"sum" => 1212, "realage" => 33}}
               ]
    } 
```

在 hash`a`中，`age`不正确

在 hash`b`中，`realage`是正确的。在 hash id 中还有映射到hash`b`的第一个数组中的第二个值。那些是 4121-x, 231-z 对应哈希 a`id``a`

我想更正哈希中的年龄`a`并将其与哈希交换`realage`我`b` 可以通过多个步骤来完成，但是是否可以在一个衬里或非常短的时间内完成？所以最后正确的哈希`a`应该看起来像

```
a = {"rows" => [{"id" => "231-z", "name" => 'jon', "age"=> 33, "state" => 'AL'}, 
                {"id" => "4121-x", "name" => 'ton', "age"=> 29, "state" => 'VA'}
               ]
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:24:05.720

这看起来合理吗？

```
a['rows'].each_with_index do |ah, i|
  (bh = b['rows'].select {|h| h['key'].last == ah['id'] }.first) &&
    a['rows'][i] = ah.update('age' => bh['value']['realage'])
end

p a

{
    "rows" => [
        [0] {
               "id" => "231-z",
             "name" => "jon",
              "age" => 33,
            "state" => "AL"
        },
        [1] {
               "id" => "4121-x",
             "name" => "ton",
              "age" => 29,
            "state" => "VA"
        }
    ]
} 
```

请注意，`a`只有`id`在`b`.

此外，行顺序无关紧要，行数也无关紧要，重要`b`的是要有一行与`id`已处理的行相同`a`

### [这是一个工作演示](http://cibox.org/slivu/stackoverflow?lang=ruby&file=ruby-one-liner-from-two-hashes.rb&run=true)

# c#-4.0 - 创建模型时无法使用上下文

> ID：13664218
> 
> 赞同：1
> 
> 时间：2012-12-01T22:07:10.717
> 
> 标签：c#-4.0, entity-framework-4, parallel-processing

错误是：创建模型时无法使用上下文。

我正在使用这段代码：

```
Parallel.Invoke(AddDataParallel);

  private void AddDataParallel()
    {
        Parallel.For(1001, 2001, delegate(int i)
                                     {
                                         User user = new User();
                                         user.UserName = "user" + i;
                                         _userService2.Add(user);
                                     });

    } 
```

错误 ：

```
public T Add(T entity)
    {
        return _entities.Add(entity);//The context cannot be used while the model is being created.
    } 
```

为什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:25:56.793

您似乎只使用了一个上下文实例（包含在 中`_userService2`）。但是根据[MSDN](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx)`ObjectContext` ， (or `DbContext`) 不是线程安全的。见备注：

> ObjectContext 类不是线程安全的。在多线程场景下，无法保证 ObjectContext 中数据对象的完整性。

所以你必须重新设计你的插入场景。当您使自己成为自己的并发用户时，对数据库的并行化总是很棘手。如果您想要快速插入，请查看[`BulkInsert`](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.tasks.bulkinserttask.bulkinserttask.aspx).

# python - 如何将现有的 csv 文件从字典写入特定列？

> ID：13664235
> 
> 赞同：1
> 
> 时间：2012-12-01T22:09:11.950
> 
> 标签：python, excel, csv, dictionary

我有一个从 csv 文件创建的字典，并希望使用此字典来更新名为 sheet2.csv 的不同 csv 文件的特定列中的值。

Sheet2.csv 有许多具有不同标题的列，我只需要根据我的字典中的键值对更新列 PartNumber。

我的问题是如何使用 dict 中的键搜索 sheet2.csv 并仅更新/写入具有适当值的 PartNumber 列？

我是 python 新手，所以我希望这不会太令人困惑，并且感谢任何帮助！

这是我用来创建字典的代码：

```
import csv 
a = open('sheet1.csv', 'rU')
csvReader = csv.DictReader(a)
dict = {}

for line in csvReader:
    dict[line["ReferenceID"]] = line["PartNumber"]
print(dict)    

dict = {'R150': 'PN000123', 'R331': 'PN000873', 'C774': 'PN000064', 'L7896': 'PN000447', 'R0640': 'PN000878', 'R454': 'PN000333'} 
```

为了让事情变得更加混乱，我还需要确保 sheet2 中已经存在的行保持不变。例如，如果存在 ReferenceID 为 R1234 且 PartNumber 为 PN000000 的行，它应该保持不变。所以我需要跳过不在我的字典中的行。

链接到示例 CSV：

*   [http://dropbox.com/s/zkagunnm0xgroy5/Sheet1.csv](http://dropbox.com/s/zkagunnm0xgroy5/Sheet1.csv)
*   [http://dropbox.com/s/amb7vr48mdc94v6/Sheet2.csv](http://dropbox.com/s/amb7vr48mdc94v6/Sheet2.csv)

编辑：让我重新表述我的问题并提供一个更好的示例 csvfile。

假设我有一个 Dict = {'R150': 'PN000123', 'R331': 'PN000873', 'C774': 'PN000064', 'L7896': 'PN000447', 'R0640': 'PN000878', 'R454' '：'PN000333'}。

我需要填写这个 csv 文件：[https ://www.dropbox.com/s/c95mlitjrvyppef/sheet.csv](https://www.dropbox.com/s/c95mlitjrvyppef/sheet.csv)

具体来说，我需要使用我创建的 dict 的键填写 PartNumber 列。所以我需要遍历列 ReferenceID 并将该值与我在 dict 中的键进行比较。如果匹配，我需要用该值填写相应的 PartNumber 单元格......如果这一切都令人困惑，我很抱歉！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T06:33:26.410

下面的代码应该可以解决问题。它首先像您的代码一样构建一个字典，然后继续`Sheet2.csv`逐行读取，可能会更新部件号。输出`temp.csv`可以与初始值进行比较`Sheet2.csv`。如果您想`Sheet2.csv`用 的内容覆盖`temp.csv`，只需取消注释该行`shutil.move`。

请注意，您提供的示例文件不包含任何可更新的数据，因此`Sheet2.csv`和`temp.csv`将是相同的。我对它进行了稍微修改的测试`Sheet1.csv`，我确保它实际上包含`Sheet2.csv`.

```
import csv
import shutil

def createReferenceIdToPartNumberMap(csvToReadPath):
    result = {}
    print 'read part numbers to update from', csvToReadPath
    with open(csvToReadPath, 'rb') as csvInFile:
        csvReader = csv.DictReader(csvInFile)
        for row in csvReader:
            result[row['ReferenceID']] = row['PartNumber']
    return result

def updatePartNumbers(csvToUpdatePath, referenceIdToPartNumberMap):
    tempCsvPath = 'temp.csv'
    print 'update part numbers in', csvToUpdatePath
    with open(csvToUpdatePath, 'rb') as csvInFile:
        csvReader = csv.reader(csvInFile)

        # Figure out which columns contain the reference ID and part number.
        titleRow = csvReader.next()
        referenceIdColumn = titleRow.index('ReferenceID')
        partNumberColumn = titleRow.index('PartNumber')

        # Write tempoary CSV file with updated part numbers.
        with open(tempCsvPath, 'wb') as tempCsvFile:
            csvWriter = csv.writer(tempCsvFile)
            csvWriter.writerow(titleRow)
            for row in csvReader:
                # Check if there is an updated part number.
                referenceId = row[referenceIdColumn]
                newPartNumber = referenceIdToPartNumberMap.get(referenceId)
                # If so, update the row just read accordingly.
                if newPartNumber is not None:
                    row[partNumberColumn] = newPartNumber
                    print '  update part number for %s to %s' % (referenceId, newPartNumber)
                csvWriter.writerow(row)

        # TODO: Move the temporary CSV file over the initial CSV file.
        # shutil.move(tempCsvPath, csvToUpdatePath)

if __name__ == '__main__':
    referenceIdToPartNumberMap = createReferenceIdToPartNumberMap('Sheet1.csv')
    updatePartNumbers('Sheet2.csv', referenceIdToPartNumberMap) 
```

# c - 对大数组进行排序时出现分段错误

> ID：13664236
> 
> 赞同：0
> 
> 时间：2012-12-01T22:09:16.460
> 
> 标签：c, segmentation-fault

我正在尝试对一个数组进行排序，该数组的元素是从一个大小约为 5 GB 且包含大约 500000 个数据元素的文件中读取的。

在数据大小为 300.000.000 之后，由于分段错误，程序在排序过程中出错并终止。

我认为问题的发生是由于分配给程序的内存空间不足。如何在我的 C 代码中更改它？

你能帮我解决这个问题吗？谢谢你。

```
int arraysize = atoi(argv[1]);
int* array    = malloc(sizeof(int)*arraysize);
int* temp     = malloc(sizeof(int)*arraysize);
int i;

FILE *fi;
char buffer[20];
fi = fopen("DATASET.dat", "r");

for(i=0; i<arraysize; i++){
  fgets(buffer, 20, fi);
  array[i] = atoi(buffer);
}

fclose(fi);

//function is called to perform the sorting
mergesort_array(array, arraysize, temp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:42:55.587

> int* 数组 = malloc(sizeof(int) *arraysize); int* temp = malloc(sizeof(int)*arraysize);

通常，每当您分配内存时，请检查分配是否成功：

```
int *array = NULL, *temp = NULL;

if (NULL == (array = malloc(sizeof(int)*arraysize)))
{
    fprintf(stderr, "Out of memory allocating %d bytes\n", sizeof(int)*arraysize);
    abort();
}
if (NULL == (temp = malloc(sizeof(int)*arraysize)))
{
    fprintf(stderr, "Out of memory allocating %d bytes\n", sizeof(int)*arraysize);
    abort();
} 
```

然后，一种可能性是*在磁盘上*实现合并排序，使用整数文件（您也可以 mmap() 文件）。

但我觉得奇怪的是，在堆上分配 300000 个整数 - 最多 4.8 兆字节，使用 64 位整数 - 会导致分配错误，所以我认为这是合并排序实现中的问题；也许与递归实现有关。

我会先用完整的调试信息编译程序，然后用`gdb`.

## 一个“简单”的 malloc 问题

必须处理*表示数字的非常大的 ASCII 字符串*数组，您可以首先将其转换为*整数*文件。

```
FILE *fi, *fo, *ft;
char buffer[20];
int  array[4096], b = 0;

fi = fopen("DATASET.dat", "r");
if (NULL == fi)
{
    fprintf(stderr, "Cannot open input file\n");
    abort();
}
fo = fopen("INTEGER.dat", "w");
if (NULL == fo)
{
    fprintf(stderr, "Cannot open output file\n");
    abort();
}
ft = fopen("TEMP.dat", "w");
if (NULL == ft)
{
    fprintf(stderr, "Cannot open output file\n");
    abort();
}
for(i=0; i<arraysize; i++){
   fgets(buffer, 20, fi);
   array[b++] = atoi(buffer);
   if (4096 == b)
   {
       if (b != fwrite(buffer, sizeof(int), b, fo))
       {
           fprintf(stderr, "write error\n");
           abort();
       }
       if (b != fwrite(buffer, sizeof(int), b, ft))
       {
           fprintf(stderr, "write error\n");
           abort();
       }
       b = 0;
   }
}
if (b)
{
    if (b != fwrite(buffer, sizeof(int), b, fo))
    {
        fprintf(stderr, "write error\n");
        abort();
    }
    if (b != fwrite(buffer, sizeof(int), b, ft))
    {
        fprintf(stderr, "write error\n");
        abort();
    }
}
fclose(fi); fi = NULL;
fclose(fo); fo = NULL;
fclose(ft); ft = NULL; 
```

现在你有一个`INTEGER.dat`由固定大小的整数组成的文件。就所有意图和目的而言，它是内存中数组的文件副本。临时数组也是如此。

您*可以*告诉系统将该文件视为内存中的一个数组。

```
int *sort = NULL;
int *temp = NULL;

// Temp is not shown -- identical treatment as sort

fd = open ("INTEGERS.dat", O_RDWR);
if (fd == -1)
{
    fprintf(stderr, "cannot reopen output\n");
    abort();
}
if (MAP_FAILED == (sort = mmap (0, arraysize*sizeof(int), PROT_READ|PROT_WRITE, MAP_SHARED, fd, 0)))
{
    fprintf(stderr, "mmap error\n");
    abort();
}
if (-1 == close (fd))
{
    fprintf(stderr, "error closing output file\n");
    return 1;
}

do_sort(sort, temp, arraysize);

if (-1 == munmap (sort, arraysize*sizeof(int)))
{
    fprintf(stderr, "error releasing mmap for %s\n", "sort");
    abort();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T23:33:50.227

Sounds like you are using 32 bit operating system version, or at least 32 bit compiler, resulting ib 32 bit pointers, and max 4 gigs of memory (or even less, depending on OS). Switch to 64 bit OS and compile with 64 bit compiler.

Problem with 32 bit OS is, it simply cannot address enough memory for your "naive" algorithm, which requires all data to be in one flat memory space. Using mmap would not help either, for same reason. If you have to stick with 32 bit mode, you have to merge sort in parts, using files.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T22:32:23.910

首先，如果您的数据集这么大，我会使用数据库。然后，您可以免费获得它以及访问/插入/更新/删除数据的简单方法。

但是，要回答您的问题并且您在分配内存时遇到问题，请尝试改用内存映射文件。如果在 Linux 或 UNIX 上，请参阅[mmap 。](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)

# google-app-engine - 无法部署到 GAE - 应用程序不存在

> ID：13664237
> 
> 赞同：3
> 
> 时间：2012-12-01T22:09:30.437
> 
> 标签：google-app-engine, gae-eclipse-plugin

使用 Eclipse，我在尝试使用 JAX-RS 和 JAXB 部署相当基本的 Web 应用程序时遇到错误。它在本地运行正常，但是在远程服务器上尝试时，我收到如下所示的消息...

“部署到 Google”遇到问题/此应用程序不存在

![在此处输入图像描述](../Images/370d1f055ffd84e606f543a1ea3e88cb.png)

下面显示了我的 appengine-web.xml

![在此处输入图像描述](../Images/b7ea7093ad517f04ab13f91e478bda62.png)

XML 文件说明我在 xml 中使用的名称与项目属性中指定的名称相同...

![在此处输入图像描述](../Images/29b66e7441a7b302779688eea2b3a08b.png)

输出窗口显示...

```
------------ Deploying frontend ------------

Preparing to deploy:
    Created staging directory at: '/var/folders/n8/6by626014jbfc0dwmxnb0ly00000gn/T/appcfg2754901216637807129.tmp'
    Scanning for jsp files.
    Scanning files on local disk.
    Initiating update.
com.google.appengine.tools.admin.HttpIoException: Error posting to URL: https://appengine.google.com/api/appversion/create?app_id=hillingarincident&version=0&
404 Not Found
This application does not exist (app_id=u'hillingarincident').

Debugging information may be found in /private/var/folders/n8/6by626014jbfc0dwmxnb0ly00000gn/T/appengine-deploy447984481661870877.log 
```

引用的调试日志显示...

```
Unable to update:
com.google.appengine.tools.admin.HttpIoException: Error posting to URL: https://appengine.google.com/api/appversion/create?app_id=hillingarincident&version=0&
404 Not Found
This application does not exist (app_id=u'hillingarincident').

        at com.google.appengine.tools.admin.AbstractServerConnection.send1(AbstractServerConnection.java:293)
        at com.google.appengine.tools.admin.AbstractServerConnection.send(AbstractServerConnection.java:253)
        at com.google.appengine.tools.admin.AbstractServerConnection.post(AbstractServerConnection.java:232)
        at com.google.appengine.tools.admin.AppVersionUpload.send(AppVersionUpload.java:644)
        at com.google.appengine.tools.admin.AppVersionUpload.beginTransaction(AppVersionUpload.java:449)
        at com.google.appengine.tools.admin.AppVersionUpload.doUpload(AppVersionUpload.java:124)
        at com.google.appengine.tools.admin.AppAdminImpl.doUpdate(AppAdminImpl.java:371)
        at com.google.appengine.tools.admin.AppAdminImpl.update(AppAdminImpl.java:53)
        at com.google.appengine.eclipse.core.proxy.AppEngineBridgeImpl.deploy(AppEngineBridgeImpl.java:433)
        at com.google.appengine.eclipse.core.deploy.DeployProjectJob.runInWorkspace(DeployProjectJob.java:148)
        at org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

任何答案将不胜感激。有一次我的浏览器没有登录到目标谷歌帐户，所以我稍后换到正确的，谷歌确实按预期呈现应用程序名称。

![在此处输入图像描述](../Images/483120a82789a72e386d38133d6e0606.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T16:28:00.450

好的，最后这很简单！Eclipse 会自动登录到 Google 帐户，不幸的是，我在登录到一个 Google 帐户时创建了 Eclipse 项目，然后尝试指定应用程序名称。

您会在右下角（或某些版本的左下角）看到一个 Google 图标，其中包含您登录时的用户名。如果这不是定义您的应用程序的帐户，则只需注销该帐户，然后以正确的 Google 帐户登录。

现在没有错误:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-16T03:28:55.773

我知道这个问题已经很老了，但是我整天都遇到这个问题，最后我找到了解决方案。也许它会在未来帮助某人。

在 Google Cloud Platform 中创建项目后，您必须在项目中进入 google cloud shell 并运行命令

```
gcloud beta app create 
```

运行此命令后，系统将提示您选择区域。然后回到eclipse并尝试部署它。它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T10:41:25.443

可能还有另一个问题，当您向 Google App Engine 注册时，您会收到表明您已激活的电子邮件。如果您还没有收到电子邮件，也可能会出现此问题。另一个问题可能是使用 Google App Engine 的 gmail 帐户来避免任何此类错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-24T23:41:24.493

导致此问题的方法不止一种。对我来说，我在使用 Maven 创建项目时遇到了这个问题。但是，如果我直接从 Google 插件创建项目，我不会遇到同样的问题。

# c# - c# - 如何使用 SAPI 对文本进行语音转换？

> ID：13664239
> 
> 赞同：3
> 
> 时间：2012-12-01T22:09:39.677
> 
> 标签：c#, speech-to-text, sapi

我想学习 C# 的 SAPI api 来进行语音到文本识别。

我找不到任何教程。任何人都可以告诉我一个例子在哪里或者可以在这里展示吗？

它需要支持从网络摄像头麦克风中获取语音。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:12:38.610

API 文档： http: [//msdn.microsoft.com/en-us/library/ms723627 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms723627(v=vs.85).aspx)

在 C# 中使用 SAPI：http: [//windowscoding.com/blogs/blake/archive/2006/11/01/How-to-use-Microsofts-Speech-API-in-a-managed-application.aspx](http://windowscoding.com/blogs/blake/archive/2006/11/01/How-to-use-Microsofts-Speech-API-in-a-managed-application.aspx)

你是对的，没有很多/任何教程。但是有基础知识 - 并且有大量的 C/C++ 资源。试一试，如果您有*具体问题*，最好在 StackOverflow 上提问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T00:48:57.457

我知道这个问题有点晚了，但希望它可以帮助以后的人。我最近想做同样的事情，使用麦克风作为语音输入，然后 sapi 做识别部分。我实际上是在sapi自己的文档中找到了示例代码，它是用C#编写的。作为默认安装位置，它应该在文件夹 C:\Program Files\Microsoft SDKs\Speech\v11.0\Docs 中。它工作得很好。

# javascript - 从javascript中的url同步解析json

> ID：13664240
> 
> 赞同：1
> 
> 时间：2012-12-01T22:09:41.747
> 
> 标签：javascript, jquery, json, synchronous

我正在尝试获取 youtube 视频的标题。所以我使用jQuery来解析json。但它是异步工​​作的，所以答案是在页面加载后出现的。结果是：

> [http://www.youtube.com/watch?v=Ym0hZG-zNOk](http://www.youtube.com/watch?v=Ym0hZG-zNOk)（未定义）

我该如何解决？

谢谢。

[http://jsfiddle.net/3vQht/](http://jsfiddle.net/3vQht/)

```
<html>

<head>
    <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script>
        var link = "http://www.youtube.com/watch?v=Ym0hZG-zNOk";

        var videoID = link.substring(link.indexOf("=") + 1, link.length);

        document.writeln("<a target='_blank' href='" + link + "'>" + link.bold() + "</a> (" + name(videoID) + ")<br>");

        function name(value) {
            var source = "http://gdata.youtube.com/feeds/api/videos/" + value + "?v=2&prettyprint=true&alt=jsonc&callback=?";
            var fin;

            $.getJSON(source, function(json) {
                fin = json.data.title;
                console.log(fin);
            });

            return fin;
        }
    </script>
</head>

<body>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T23:06:28.533

嘿，
这是解决方案:)

```
<script type="text/javascript">
    function name(value) {
        var source = "http://gdata.youtube.com/feeds/api/videos/" + value + "?v=2&prettyprint=true&alt=jsonc";
        $.ajax({
            type: 'GET',
            url: source,
            contentType: "application/json",
            dataType: 'json',
            success: function (json) {
                alert("here is the title: "+json.data.title+" .Use it how you want!");
            },
            error: function (e) {
                alert("error");
            }
        });
    }

    $(document).ready(function() {
        var link = "http://www.youtube.com/watch?v=Ym0hZG-zNOk";
        var videoID = link.substring(link.indexOf("=") + 1, link.length);
        name(videoID);
    });
</script> 
```

如果您想获得数据同步，只需使用此版本：

```
 $.ajax({
            type: 'GET',
            url: source,
            async: false,
            contentType: "application/json",
            dataType: 'json',
            success: function (json) {
                alert("here is the title: "+json.data.title+" .Use it how you want!");
            },
            error: function (e) {
                alert("error");
            }
        });
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T22:12:18.607

`getJSON`是异步的，所以当`return fin;`到达时，数据还没有被获取。

依赖于 JSON 的所有内容都***必须***在成功回调中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T22:35:53.880

如果您愿意，您还可以同步获取数据。检查参数的[jQuery.ajax() 文档](http://api.jquery.com/jQuery.ajax/)。`async`

编辑：刚刚发现您正在使用 JSONP 加载数据，并且不可能同步执行此操作。您需要改用异步回调。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T22:53:40.973

我没有玩过他们的api，但快速浏览一下

[https://developers.google.com/youtube/2.0/developers_guide_json](https://developers.google.com/youtube/2.0/developers_guide_json)

表示它们支持 jsonp 回调，以便您可以预先添加一个将数据发送到回调函数的脚本（只需将 &callback=yourFunction 添加到 url 的末尾）

```
function prependScriptFromUrl(s){
  var a=document.createElement("script");
  var b=document.getElementsByTagName('head')[0];
  a.src=s;
  b.insertBefore(a,b.firstChild)
} 
```

# c++ - 访问结构 C++ 中存在的位集

> ID：13664241
> 
> 赞同：-1
> 
> 时间：2012-12-01T22:09:47.020
> 
> 标签：c++, struct, bitset

我有一个看起来像这样的结构：

```
struct bf_t {
bitset<250000> h0;
}; 
```

我想知道如何为这个结构分配内存以及如何在我的 main() 中访问 h0 。

我试过这样做：

```
bf_t *b;
b->h0.set(1); 

error: base operand of ‘->’ is not a pointer

bf_t *b ;
b.h0.set(1); 

error: request for member ‘h0’ in ‘b’, which is of non-class type ‘long long int’ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T22:19:36.773

当您声明这样的指针时，`bf_t *b;`您必须在使用它们之前分配给它们。您可能希望像这样在堆上创建一个新的 bf_t `b = new bf_t();`：然后你可以使用`->`它来访问它的成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T22:22:56.303

错误消息和您的代码不匹配。然而，它更容易——你根本不需要指针：

```
bf_t b;
b.h0.set(1); 
```

# c++ - 无法将缓冲区 [200] 转换为 str []

> ID：13664243
> 
> 赞同：-3
> 
> 时间：2012-12-01T22:09:57.897
> 
> 标签：c++

我必须从控制台读取一些文本，然后在该字符串中搜索文本“simple”。我有：

```
char Buffer[200];
cin >> Buffer; //read text form keybord

char str[] = Buffer;
char * pch;
pch = strstr (str,"simple");
strncpy (pch,"sample",6);
puts (str); 
```

如何转换`Buffer[200]`为`str[]`使程序正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T22:34:19.083

如果你坚持使用 C 风格的字符串，你可能想要这样的东西：

```
char Buffer[200];
cin >> Buffer; //read text form keybord

char *pos = strstr(buffer, "simple");
if (pos) {
    buffer[1] = 'a';
    puts(buffer);
} 
```

如果你想编写实际的 C++，你可能会做更多类似的事情：

```
std::string buffer;

std::getline(std::cin, buffer);

int pos;

if ((pos=buffer.find("simple")) !=std::string::npos)
    buffer[pos+1] = 'a';

std::cout << buffer; 
```

# java - java - 如何使用两个excel表通过JDBC-ODBC读取java中的数据？

> ID：13664246
> 
> 赞同：0
> 
> 时间：2012-12-01T22:10:10.453
> 
> 标签：java, excel

我想使用 JDBC 从两个 excel 表中读取数据。所以我为两张excel表设置了两个数据源（系统DSN名称）。现在我可以从一张excel表中读取数据了吗？但是如何连接第二个excel表？

请参阅下面的编码以从一个 Excel 表中读取数据。但是如何在第二个连接中使用第二个数据源名称？你能给些建议么。

```
public class MergeXSLFiles {

public static Connection getConnection() throws Exception {
String driver = "sun.jdbc.odbc.JdbcOdbcDriver";
String url = "jdbc:odbc:Report";
String username = "";
String password = "";
Class.forName(driver);
return DriverManager.getConnection(url, username, password);
}

public static void main(String args[]) throws Exception {
Connection conn = null;
Statement stmt = null;
ResultSet rs = null;

conn = getConnection();
stmt = conn.createStatement();
String excelQuery = "select * from [Sheet$]";
rs = stmt.executeQuery(excelQuery);

while (rs.next()) {
  System.out.println(rs.getString("name") + " " + rs.getString("age"));
}

rs.close();
stmt.close();
conn.close();
}
} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T22:17:11.620

```
String excelQuery = "select * from [Sheet$]1";
String excelQuery2 = "select * from [Sheet$]2";
rs = stmt.executeQuery(excelQuery);

while (rs.next()) {
  System.out.println(rs.getString("name") + " " + rs.getString("age"));
}
rs = stmt.executeQuery(excelQuery2);
while (rs.next()) {
  System.out.println(rs.getString("name") + " " + rs.getString("age"));
} 
```

只需执行另一个查询即可从下一张表中获取结果

# android - String[] 和 listArray 的区别

> ID：13664247
> 
> 赞同：10
> 
> 时间：2012-12-01T22:10:12.107
> 
> 标签：android, string, arraylist

就像标题一样，我想知道String[]和ListArray[String]之间的区别，它们在某种程度上是否相同。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-01T22:15:34.773

数组`String[]`无法扩展其大小。您可以在给它一个永久大小后对其进行初始化：

```
String[] myStringArray = new String[20]();
myStringArray[0] = "Test"; 
```

An`ArrayList<String>`的大小是可变的。您可以动态添加和删除项目：

```
ArrayList<String> myStringArrayList = new ArrayList<String>();
myStringArrayList.add("Test");
myStringArrayList.remove(0); 
```

此外，您可以在使用`ArrayList`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-01T22:30:42.470

String[] 是一个字符串数组，而 ArrayList 是一个通用类，它接受不同类型的对象（这里它接受字符串）。因此，您只能使用 String[] 执行正常的数组操作。但是，您可以在 ArrayList 中使用其他方便的实用程序，例如 isEmpty()、迭代器等，因为它还实现了 Collection 接口。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-01T22:13:03.583

ArrayList 有一些简洁的方法，例如 add()、remove()、contains()

# c++ - 为什么 argc 返回 6 而不是 3？

> ID：13664248
> 
> 赞同：1
> 
> 时间：2012-12-01T22:10:26.107
> 
> 标签：c++, arguments, argc

我有以下程序，我在命令行中传递了 2 个参数，如下所示。我期待 argc 为 3，但它打印为 6。为什么？

```
#include <iostream>
#include <string>
#include <stdlib.h>

using namespace std;
void usage();

int main(int argc, char *argv[])
{
    cout << argc << endl;
    if (argc != 3)
            usage();

    string regex = argv[1];
    string searchString = argv[2];

    cout << "regex: " << regex << " . searchString: " << searchString << endl;

    return 0;
}

void usage()
{
    cout << "Usage: ./stringmatch <regex> <searchString>" << endl;
    exit(1);
} 
```

命令行：

```
[jim@cola c++]$ ./stringmatch [yyyy\d\d\d]* yyyy1234
 6
 Usage: ./stringmatch <regex> <searchString> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T22:11:57.700

您的 shell 正在扩展 glob 模式`[yyyy\d\d\d]*`，因此这导致的实际参数数量取决于当前目录的内容！

成为匹配字符的`[yyyy\d\d\d]`字符类`y`and `d`，并且`*`匹配后面的任何内容，所以我猜你当前目录有 4 个以`y`or开头的文件`d`。要查看它扩展到什么，请使用`echo`：

```
$ echo [yyyy\d\d\d]* 
```

要使其按预期工作，请引用参数：

```
$ ./stringmatch '[yyyy\d\d\d]*' yyyy1234 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T22:11:54.043

`[yyyy\d\d\d]*`由 shell 扩展为与模式匹配的多个文件名。引用它得到 3。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T22:13:12.057

shell 将您的命令行解析为

```
./stringmatch [yd]* yyyy1234 
```

它给出了以 y 或 d 加上 yyyy1234 开头的所有文件。因此，如果您有 4 个以 y 和 d 开头的文件加上 yyyy1234 加上 ./stringmatch 将恰好给出 6。

有关详细信息，请参阅[文件名扩展和模式匹配](http://www.gnu.org/software/bash/manual/bashref.html#Filename-Expansion)。

如果您只需要两个参数，则必须用单引号或双引号引用第一个参数

```
./stringmatch '[yyyy\d\d\d]*' yyyy1234 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T22:12:19.780

因为您的外壳正在扩展参数 - 将它们包装在 '' 中以防止这种情况。

# c# - 如何检测何时在绑定源中留下一行？

> ID：13664250
> 
> 赞同：1
> 
> 时间：2012-12-01T22:10:45.273
> 
> 标签：c#, datagridview, bindingsource, updating

我有一个 datagridview 显示 baisc 文档数据（名称，类型），用户导航以访问每个文档。出现导航时，富文本框会显示每个文档的第一页。但是，由于每个文档可以有多个页面，因此这些页面在单独的 BindingSource 中进行管理，因此用户可以“翻阅”它们并进行更改。

如果用户对文档名称或任何页面上的信息进行了更改，他有两种选择来保存这些内容，通过更新按钮或导航到 datagridview 中的另一个文档。

该按钮很好，因为所有绑定源都处于“静态”状态。

但是，我在使用第二个选项时遇到了问题，因为 datagridview 不提供“行更改”事件。“RowLeave”事件是不合适的，因为用户可能在一行中，但是单击富文本框以编辑相应的页面，这当然会触发“RowLeave”事件。我只想在用户实际更改文档时捕获一个事件。

我已经尝试过 Documents BindingSource "CurrentChanged" 和 "PositionChanged" 事件，但它们都发生在 "Current" 指针更改之后，因此我没有正确的更新上下文。我可以有一个全局“CurrentPosition”变量，用于在我进行更新时重新获得上下文，但这似乎不优雅。对此相当陌生，我猜我错过了一些东西，所以任何帮助都会很棒。

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:39:48.430

嗨尝试使用 bindingSource`CurrentItemChanged`功能

例子：

```
private void bindingSource1_CurrentItemChanged(object sender, EventArgs e)
{
if (!dataGridView1.IsCurrentCellDirty) return; // or IsCurrentRowDirty
//Your code
} 
```

我希望它会有所帮助:)

# java - java弹出菜单与VK_CONTEXTMENU没有焦点

> ID：13664252
> 
> 赞同：3
> 
> 时间：2012-12-01T22:10:57.950
> 
> 标签：java, swing, focus, keyevent, jmenu

我在我的 java 应用程序中加入了一个弹出菜单。

我添加了一个鼠标侦听器来显示它，并且我还使用 key event 注册了一个键盘操作`KeyEvent.VK_CONTEXT_MENU`，这也将其显示出来。

问题是弹出窗口在显示时没有焦点。我不能使用向上和向下箭头来遍历它。事实上，它只能用鼠标来操作（这让我希望只用键盘来操作系统......）。

我在网上找不到关于该问题的任何有用信息，并且已经阅读了[menu 上的 java 教程条目](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html)。我还尝试了以下方法（每个都独立，并合作），但都没有奏效：

*   在调用`popupmenu.requestFocusInWindow()`之前和之后`show`调用。
*   在调用`popupmenu.setSelected(firstMenuItemObjectInstance)`之前和之后`show`调用。
*   在调用`firstMenuItemObjectInstance.requestFocusInWindow()`之前和之后`show`调用。

有任何想法吗 ？

# python - Python多线程和不一致的输出

> ID：13664253
> 
> 赞同：1
> 
> 时间：2012-12-01T22:11:00.517
> 
> 标签：python, multithreading, concurrency

```
import threading

x = 0;

class Thread1(threading.Thread):
    def run(self):
        global x
        for i in range(1,100000):
            x = x + 1

class Thread2(threading.Thread):
    def run(self):
        global x
        for i in range(1,100000):
            x = x - 1

#create two threads
t1 = Thread1()
t2 = Thread2()

#start the threads
t1.start()
t2.start()

#wait for the threads to finish
t1.join()
t2.join()

print x; 
```

多次运行会产生不同的输出，有些是负面的，有些是正面的。是因为这两个线程使用的是同一个全局 x 吗？我不明白为什么：尘埃落定后，净效应（输出）不应该相同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T22:31:52.683

不必要。想象以下事件序列。我们将在程序运行一段时间后的精确时刻开始；两者`Thread1`都`Thread2`在它们的`for`循环内，并且`x = 0`

1.  `Thread1`有控制权。它访问`x`以确定`x + 1`; `x`是`0`，所以结果是`1`。然而...
2.  在`Thread1`完成分配之前，控制权传递给`Thread2`。`x`还在`0`。
3.  `Thread2`现在访问`x`. 它计算`x - 1`，也就是`-1`，因为`x`是静止的`0`。由于线程时间的不可预测性，它设法完成操作，分配`-1`给`x`.
4.  控制现在返回到`Thread1`。它已经计算出`x + 1`to be的值`1`。它分配`1`给`x`。

两个线程都完成了一次迭代， 的值`x`应该是`0`，但它的实际值是`1`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T22:33:14.307

这是多线程计算中的经典并发问题。每个线程必须从内存中读取 x 的当前值，对其进行修改，然后将其写回。如果线程 1 读取该值，则线程 2 更新它，当线程 1 写回该值时，它将取消线程 2 的更新。这就是为什么您应该*始终*使用正确的同步结构，例如信号量等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T22:29:37.213

这是一个经典的竞争条件。[Wiki](http://en.wikipedia.org/wiki/Race_condition#Software)对这种情况有很好的解释。

# jquery - 通过 jQuery 的 CSS 选择器性能

> ID：13664254
> 
> 赞同：2
> 
> 时间：2012-12-01T22:11:01.903
> 
> 标签：jquery, css

它[在这里（http://api.jquery.com/first-selector）](http://api.jquery.com/first-selector)上说“为了在使用 :first 选择元素时获得最佳性能，首先使用纯 CSS 选择器选择元素，然后使用 .filter(” ：第一的”） ”

有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:14:17.813

示例收集所有`DIV`，然后过滤`:first`

```
var divFirst=$('div').filter(':first'); 
```

也可以使用`first()`也将`filter()`在 jQuery 内部使用的方法

```
var divFirst=$('div').first(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T22:14:33.673

```
$('.elements').filter(':first'); 
```

或者：

```
$('.elements').first(); 
```

或者：

```
$('.elements').eq(0); 
```

比以下更有效：

```
$('.elements:first'); 
```

其他 jQuery 选择器（例如`:has`vs.`has`方法）就是这种情况。

# google-app-engine - 在谷歌应用引擎中需要一个实体父级

> ID：13664255
> 
> 赞同：1
> 
> 时间：2012-12-01T22:11:10.997
> 
> 标签：google-app-engine, python-2.7

我有一个没有父母就没有意义的模型。有没有办法强制实体拥有父级？如果子实体在没有父实体的情况下被实例化，我希望引发异常，类似于必需的属性。

```
class Parent(db.Model):
    eye_color = db.StringProperty(required=True)

class Child(db.Model):
    pass 
```

不引发异常：

```
mom = Parent(eye_color='purple')
jimmy = Child(parent=mom) 
```

引发异常：

```
mom = Parent(eye_color='purple')
jimmy = Child() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T05:53:23.980

我没有亲自尝试过，但是您应该能够覆盖`__init__`Child 类并检查以确保父级不是 None。像这样：

```
class Child(db.Model):
  pass

  def __init__(self,
               parent=None,
               key_name=None,
               _app=None,
               _from_entity=False,
               **kwds):
    if not parent:
      raise ValueError('parent is required.')
    super(Did, self).__init__(parent=parent, key_name=key_name, app=_app,
                              _from_entity=_from_entity, **kwds) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:49:18.700

使用 ndb，您可以使用 pre put hook 方法来检查该实例是否具有父级，如果没有则引发异常。我看到您使用的是较旧的 db 模块，我相信它没有相同的钩子方法。您应该考虑迁移到更好和改进的 ndb 数据存储 API，您将获得其他好处，例如自动缓存等等。

新开发银行：[https ://developers.google.com/appengine/docs/python/ndb/overview](https://developers.google.com/appengine/docs/python/ndb/overview)

NDB 模型挂钩：[https ://developers.google.com/appengine/docs/python/ndb/entities#hooks](https://developers.google.com/appengine/docs/python/ndb/entities#hooks)

编辑：我只是提醒您可以使用 db API 执行类似于 ndb 模型挂钩的操作。[在此](http://blog.notdot.net/2010/04/Pre--and-post--put-hooks-for-Datastore-models)解释，像往常一样，来自尼克约翰逊的帖子。

# regex - 包含箭头的行的正则表达式

> ID：13664257
> 
> 赞同：1
> 
> 时间：2012-12-01T22:11:25.960
> 
> 标签：regex

在我的博客上，我使用了一个名为 Search Regex 的插件。

在每篇文章的结尾，我都会描述这篇文章所涉及的人的血统。

请问正则表达式是什么

代替：

```
Joe Smith --> John Smith --> Bill Smith 
```

和：

```
(div tag here)Joe Smith --> John Smith --> Bill Smith(closing div tag here) 
```

基本上**任何**包含**大于号的破折号**的行我都希望该行以此 div 标签开头并以结束 div 标签结束。

什么是正则表达式，可以识别任何带有大于符号的破折号的行，然后插入上面的 div 标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T22:13:31.060

`/.*-->.*/`用value替换正则表达式`<div>$0</div>`，其中`$0`是匹配字符串的占位符（确切的语法可能因您使用的语言而异）。

请注意，`.`默认情况下不匹配新行。

# ios - 从上下文创建子图像

> ID：13664259
> 
> 赞同：2
> 
> 时间：2012-12-01T22:11:34.413
> 
> 标签：ios, core-graphics

我想知道是否有一种方法可以`CGImage`在上下文中创建一个对应于矩形的方法？

我现在在做什么：

我正在使用从上下文`CGBitmapContextCreateImage`创建一个。`CGImage`然后，我`CGImageCreateWithImageInRect`用来提取该子图像。

阿尼尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T02:10:54.780

试试这个：

```
static CGImageRef createImageWithSectionOfBitmapContext(CGContextRef bigContext,
    size_t x, size_t y, size_t width, size_t height)
{
    uint8_t *data = CGBitmapContextGetData(bigContext);
    size_t bytesPerRow = CGBitmapContextGetBytesPerRow(bigContext);
    size_t bytesPerPixel = CGBitmapContextGetBitsPerPixel(bigContext) / 8;
    data += x * bytesPerPixel + y * bytesPerRow;
    CGContextRef smallContext = CGBitmapContextCreate(data,
        width, height,
        CGBitmapContextGetBitsPerComponent(bigContext), bytesPerRow,
        CGBitmapContextGetColorSpace(bigContext),
        CGBitmapContextGetBitmapInfo(bigContext));
    CGImageRef image = CGBitmapContextCreateImage(smallContext);
    CGContextRelease(smallContext);
    return image;
} 
```

或这个：

```
static CGImageRef createImageWithSectionOfBitmapContext(CGContextRef bigContext,
    size_t x, size_t y, size_t width, size_t height)
{
    uint8_t *data = CGBitmapContextGetData(bigContext);
    size_t bytesPerRow = CGBitmapContextGetBytesPerRow(bigContext);
    size_t bytesPerPixel = CGBitmapContextGetBitsPerPixel(bigContext) / 8;
    data += x * bytesPerPixel + y * bytesPerRow;
    CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, data,
        height * bytesPerRow, NULL);
    CGImageRef image = CGImageCreate(width, height,
        CGBitmapContextGetBitsPerComponent(bigContext),
        CGBitmapContextGetBitsPerPixel(bigContext),
        CGBitmapContextGetBytesPerRow(bigContext),
        CGBitmapContextGetColorSpace(bigContext),
        CGBitmapContextGetBitmapInfo(bigContext),
        provider, NULL, NO, kCGRenderingIntentDefault);
    CGDataProviderRelease(provider);
    return image;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T22:20:49.893

您可以按照[此处](http://mobiledevelopertips.com/graphics/how-to-crop-an-image.html)所述创建裁剪图像，

例如：-

```
UIImage *image = //original image
CGRect rect = //cropped rect
CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], rect);
UIImage *img = [UIImage imageWithCGImage:imageRef]; 
CGImageRelease(imageRef); 
```

您需要从上下文中获取 CGImage 以使用上述代码对其进行裁剪。您可以`CGBitmapContextCreateImage`按照问题中所述使用。这是[文档。](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGBitmapContext/Reference/reference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T01:10:55.940

您可以使用分配的缓冲区创建 CGBitmapContext，并使用相同的缓冲区从头开始创建 CGImage。使用上下文和图像共享缓冲区，您可以绘制到上下文中，然后使用主图像的该部分创建一个 CGImage。

请注意，如果您之后绘制到相同的上下文中，裁剪后的图像实际上可能会接收到更改（取决于内部进行了多少共享引用而不是复制）。根据您正在做的事情，您可能会也可能不会觉得这是可取的。

# python - 如何在不同的 Qt 线程中调用 GUI 元素？

> ID：13664267
> 
> 赞同：2
> 
> 时间：2012-12-01T22:12:26.270
> 
> 标签：python, multithreading, qt, user-interface

我有一个应用程序，其中一个线程（不是主线程）需要访问 GUI 的元素（发送单击操作、显示消息框等）。我在 python 和 Qt 中工作，也知道在非主线程中是不可能的。有没有办法做到这一点？我的意思是将我想在线程中执行的操作发送到主线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:39:09.710

这是一个关于如何使用 Qthread 的好教程：http: [//joplaete.wordpress.com/2010/07/21/threading-with-pyqt4/](http://joplaete.wordpress.com/2010/07/21/threading-with-pyqt4/)。这将展示如何在不同的自定义线程中调用 GUI 元素。希望这可以帮助。

# javascript - Jquery将html的值附加到输入框但不是跨度内的文本

> ID：13664270
> 
> 赞同：1
> 
> 时间：2012-12-01T22:12:34.637
> 
> 标签：javascript, jquery, html, select

我有一个 ajax 查询，它带回搜索到的名称和 id：

```
if($result)
{
    while($row=mysqli_fetch_array($result))
    {
    extract($row);
    echo "<li>".$row['first_name']." ".$row['last_name']."<span class='uid'>".$row['user_id']."</span></li>";
    }
} 
```

我要做的是将名字和姓氏附加到搜索框，然后检索用户 ID 并将其放在另一个搜索框中。

```
$('li').click(function(){
    $('.client_name').not('span.uid').val($(this).text());
    $('.listbox').hide();
    }); 
```

上面的 jquery 不起作用，因为我觉得我错误地使用了 'not' 属性。是否可以拆分这些值？

html如下

```
<div class="form_align">
        <label>
        Client Name
        </label>
        <input type="text" class="client_name" />

        <label>
        Client Account No.
        <span class="small">This is important !</span>
        </label>
        <input type="text" class="client_account_no" />
        <div class="listbox">
            <div class="nameslist">
            </div>
        </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:24:39.703

我建议更改 AJAX 响应以将名称包含在自己的`<span class='ajaxname'>`. 这将使将名称与兄弟节点分开定位变得更加简单`<span class='uid'>`。否则，要排除 ' 的值，`<span class='uid'>`你需要做一些棘手的事情，比如暂时将其从 DOM 中删除以获取`<li>`' 的文本，然后将其放回。一切都太复杂了。

```
echo "<li><span class='ajaxname'>".$row['first_name']." ".$row['last_name']."</span><span class='uid'>".$row['user_id']."</span></li>"; 
```

由于 AJAX 响应会向`<li>`您的 DOM 发送一个新的，因此您需要使用它[`.on()`](http://api.jquery.com/on/)来绑定 click 事件。

```
$('li').on('click', function(){
    // Get the name from its <span> and put it into the input
    $('.client_name').val($(this).find('.ajaxname').text());
    // Get the uid and put it inot .client_account_no
    $('.client_account_name').val($(this).find('.uid').text());
    $('.listbox').hide();
}); 
```

你知道吗，[*它有效*（jsfiddle）](http://jsfiddle.net/Ecmvd/)。

### 附录：

其他答案从未实现，所以这是一个可以说是更好的解决方案，使用`data-uid`AJAX 返回的 HTML 中的属性

```
// PHP supplies the user_id in an HTML attribute data-uid
echo "<li data-uid='" . $row['user_id'] . "'>".$row['first_name']." ".$row['last_name'] . "</li>"; 
```

JavaScript 的工作要容易得多：

```
$('li').on('click', function(){
    // Get the name, which is just the <li>'s text content...
    $('.client_name').val($(this).text());
    // Get the uid from the data-uid attribute
    $('.client_account_name').val($(this).attr('data-uid'));
    $('.listbox').hide();
}); 
```

# java - 递归判断是否可以找到目标数

> ID：13664273
> 
> 赞同：2
> 
> 时间：2012-12-01T22:12:56.313
> 
> 标签：java, recursion, combinations

我将为初学者更好地解释标题。我的问题与常见问题非常相似：查找整数数组问题的所有排列。

我试图在给定整数列表和目标数字的情况下查找是否可以从列表中选择数字的任何组合，以便它们的总和与目标匹配。它必须使用函数式编程实践来完成，这意味着所有循环和突变都已经结束，只有巧妙的递归。完全公开：这是一个家庭作业，方法头由教授设置。这就是我所拥有的：

```
public static Integer sum(final List<Integer> values) {
     if(values.isEmpty() || values == null) {
             return 0;
     }
     else {
             return values.get(0) + sum(values.subList(1, values.size()));
     }
 }

public static boolean groupExists(final List<Integer> numbers, final int target) {
     if(numbers == null || numbers.isEmpty()) {
             return false;
     }
     if(numbers.contains(target)) {
             return true;
     }
      if(sum(numbers) == target) {
              return true;
      }
      else {
              groupExists(numbers.subList(1, numbers.size()), target);
              return false;
      }
  } 
```

sum 方法已经过测试和工作，groupExists 方法是我正在研究的方法。我认为它非常接近，如果给定一个列表 [1,2,3,4]，它将对 3 和 10 等目标返回 true，但对 6 则返回 false，这让我感到困惑，因为 1,2,3 是正确的并添加到 6。显然缺少一些东西。此外，我正在查看的主要问题是它没有测试所有可能的组合，例如，第一个和最后一个数字没有被加在一起作为一种可能性。

更新：根据西蒙的回答工作了一段时间后，这就是我所看到的：

```
public static boolean groupExists(final List<Integer> numbers, final int target) {
     if(numbers == null || numbers.isEmpty()) {
             return false;
      }
     if(numbers.isEmpty()) {
              return false;
      }
      if(numbers.contains(target)) {
              return true;
      }
      if(sum(numbers.subList(1, numbers.size())) == (target - numbers.get(0))) {
              return true; }                                                                                                                                                                                                     
      else {
              return groupExists(numbers.subList(1, numbers.size()), target);
      }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:37:29.443

假设您有`n`数字`a[0]`, `a[1]`, ..., `a[n-1]`，并且您想知道某个子集是否等于`N`。

假设你有这样一个子集。现在，要么`a[0]`包含，要么不包含。如果包含，则必须存在`a[1]`, ... 的子集，`a[n]`其总和为`N - a[0]`。如果不是，则存在`a[1]`, ... 的子集，`a[n]`总和为`N`。

这将引导您找到递归解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T22:23:55.943

检查所有组合是次要的（您的实现有点遗漏）。为什么不尝试不同的（动态）方法：请参阅[Hitchhikers Guide to Programming Contests](http://comscigate.com/Books/contests/icpc.pdf)，第 1 页（子集总和）。

您的主要方法将类似于：

```
boolean canSum(numbers, target) {
  return computeVector(numbers)[target]
} 
```

`computeVector`返回包含所有数字的向量，这些数字可以与 的集合相加`numbers`。该方法`computeVector`以递归方式执行有点棘手，但您可以执行以下操作：

```
boolean[] computeVector(numbers, vector) {
  if numbers is empty:
    return vector

  addNumber(numbers[0], vector)

  return computeVector(tail(numbers), vector);
} 
```

`addNumber`将采用向量并用新的“可行”数字“填充”（请参阅​​搭便车者以获取解释）。`addNumber`也可能有点棘手，我把它留给你。基本上你需要以递归方式编写以下循环：

```
for(j=M; j>=a[i]; j--)
  m[j] |= m[j-a[i]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T07:25:31.693

为方便起见，声明

```
static Integer head(final List<Integer> is) {
  return is == null || is.isEmpty()? null : is.get(0);
}
static List<Integer> tail(final List<Integer> is) {
  return is.size() < 2? null : is.subList(1, is.size());
} 
```

那么你的功能是这样的：

```
static boolean groupExists(final List<Integer> is, final int target) {
  return target == 0 || target > 0 && head(is) != null &&
       (groupExists(tail(is), target) || groupExists(tail(is), target-head(is)));
} 
```

毫无疑问，定期检查基本情况加上最后一行，其中左右操作数分别搜索包含或不包含头部的“组”。

我编写它的方式乍一看很明显，这些都是纯函数，但是，由于这是 Java 而不是 FP 语言，因此这种编写方式并不理想。最好将任何多次发生的函数调用缓存到最终的本地变量中。当然，这仍然是书本上的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T22:55:05.967

可以通过在每次递归时询问一个非常简单的决定来获得所有可能组合的列表。这个组合是否包含我列表的头部？要么有，要么没有，所以每个阶段有 2 条路径。如果任一路径导致解决方案，那么我们希望返回 true。

```
boolean combination(targetList, sourceList, target)
{
    if ( sourceList.isEmpty() ) {
        return sum(targetList) == target;
    } else {
        head = sourceList.pop();
        without = combination(targetList, sourceList, target); // without head
        targetList.push(head);
        with = combination(targetList, sourceList, target); // with head
        return with || without;
    }
} 
```

# javascript - 如果我的输入有两个状态 0 和 1，如何制作“onUp”事件？

> ID：13664277
> 
> 赞同：1
> 
> 时间：2012-12-01T22:13:08.470
> 
> 标签：javascript, dom-events

这是我的麻烦。

*   当按钮关闭时，它的值为 0。
*   按下时变为 1。
*   当它被释放时，它会回到 0。

现在我正在使用以下代码来监听更改事件：

```
if (obj[0].state.A === 1) {
    //do some thing
} 
```

问题是我有一个环绕我的代码的函数。它是 TICK 功能，`$obj.state.A`如果没有按下它会重置为 0。它每 0.10 毫秒滴答一次。

现在这就是问题所在，`$if (obj[0].state.A === 1)`给出了我在按钮按下时执行的代码。但我需要让它发生在按钮上！事件，并且一次按一次。

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:48:35.097

我找到了！

我是这样做的：

```
if (gamepads[0].state.A === 1 && this.lastStateA == 0) {
      //do stuff
}
this.lastStateA = gamepads[0].state.A; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T23:23:07.877

如果我理解正确，试试这个：

```
jQuery('#button').bind('mouseup', function(event){
    if (jQuery(this).state === 1) {
        doJob(); // here your code fires
    }
}) 
```

# javascript - 如何使日期选择器日历按钮居中

> ID：13664288
> 
> 赞同：0
> 
> 时间：2012-12-01T22:14:17.063
> 
> 标签：javascript, jquery-ui, jquery-ui-datepicker

使用下面的代码将打开日历的自定义按钮添加到 Jquery ui datepicker 小部件。

按钮未与输入字段出现在同一行：

![在此处输入图像描述](../Images/f82c4c1a48e405c77da219e4ea0cc487.png)

如何向下移动按钮，使其与其他元素出现在同一行？

```
 setTimeout(function () {
    $(elem).css({ "box-sizing": "border-box", width: "68px" }).datepicker({
        dateFormat: 'dd.mm.yy',
        showOn: 'button',
        changeYear: true,
        changeMonth: true,
        showWeek: true,
        showButtonPanel: true
    })
    .removeClass("ui-corner-all").addClass("ui-corner-left");

    $(elem).next('button.ui-datepicker-trigger').button({
        text: false,
        icons: { primary: 'ui-icon-calculator' }
    }).css({ width: '1em', height: '1em' })
        .removeClass("ui-corner-all").addClass("ui-corner-right")
    .find('span.ui-button-text')
    .css({ padding: '0.1em' })
    .siblings('span.ui-button-icon-primary')
    .css({ marginLeft: "-8.5px", marginTop: "-8.5px" });

}, 100); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:35:30.137

尝试将相同的`vertical-align`CSS 属性添加到输入和按钮。例如，`$(elem).next('button.ui-datepicker-trigger').andSelf().css("verticalAlign", "middle");`

# apache - htaccess 从 zeus 转换为 apache 重写

> ID：13664289
> 
> 赞同：0
> 
> 时间：2012-12-01T22:14:24.727
> 
> 标签：apache, .htaccess, mod-rewrite

我正在从 zeus 平台迁移到 apache，并且在以下重写时遇到问题：

```
/12345-somepage.html
/event.php?ref=12345 
```

这是.htaccess

```
RewriteEngine  on
RewriteRule    ^/([0-9]*)- /event.php?ref=$1 <-- This doesn't work 404 not found
RewriteRule    ^otherpage.htm  index.php?Month=0&Category=otherpage <- This one works 
```

这是现有的宙斯重写规则：

```
match URL into $ with ^/([0-9]*)-
if matched then set URL = /event.php?ref=$1 
```

我已经验证目标地址有效，即`/event.php?ref=12345`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:59:34.393

您的默认值`RewriteBase`是`/`，这就是您不匹配前导的原因`/`，设置`RewriteBase`以防止意外行为，添加修饰符`[L]`以便 Apache 在匹配后停止处理以下重写，添加`[QSA]`以附加来自原始 url 的查询字符串

这有效：

```
RewriteEngine On
RewriteBase /

RewriteRule    ^([0-9]+)- /event.php?ref=$1 [L,QSA] 
```

我的事件.php

```
<?php 
echo $_SERVER['PHP_SELF'];
echo "\n";
print_r( $_GET ); 
?> 
```

输出

```
# curl -i http://localhost/1234-mypage.html
HTTP/1.1 200 OK
Date: Sat, 01 Dec 2012 22:57:28 GMT
Content-Type: text/html

/event.php
Array
(
    [ref] => 1234
) 
```

# asp.net-mvc-3 - 无法对其进行 IEnumerable 的客户端验证 在 MVC3 中

> ID：13664295
> 
> 赞同：1
> 
> 时间：2012-12-01T22:15:02.130
> 
> 标签：asp.net-mvc-3, unobtrusive-validation

我只是列出复选框来选择开发人员有才华的语言。我喜欢验证必须至少选择一种语言。

服务器端验证没有失败。但是我无法让它在客户端工作。**甚至从未调用过“GetClientValidationRules”方法**。这就是我好奇的一点。

客户端验证不支持 IEnumerable 吗？这样做的方法是什么？

ps：我不需要放置js验证代码，因为我认为一旦调用GetClientValidationRules就可以了

视图：（为简洁起见）

```
public class DeveloperViewModel
{        
    [DeveloperLanguageSelectOneValidation(ErrorMessage="Please check at least one lang")]
    public IEnumerable<SelectListItem> LanguagesModel { get; set; }

} 
```

验证：

```
public class DeveloperLanguageSelectOneValidationAttribute : ValidationAttribute ,IClientValidatable
{
    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        IEnumerable<SelectListItem> items = (IEnumerable<SelectListItem>)value;
        foreach (var item in items)
            if (item.Selected)
                return ValidationResult.Success;
        return new ValidationResult(FormatErrorMessage(validationContext.DisplayName));
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule() 
        {
            ErrorMessage = FormatErrorMessage(metadata.GetDisplayName()),
            ValidationType = "developerlanguageselectone"                        
        };

        return new[] { rule };
    }
} 
```

选择列表项视图：

```
@model SelectListItem
<li>
    @Html.HiddenFor(a => a.Value)
    @Html.CheckBoxFor(a => a.Selected)
    @Html.DisplayFor(a => a.Text)
</li> 
```

开发者视图：

```
 <ul>
        @Html.EditorFor(a => a.LanguagesModel)</ul>
    @Html.ValidationMessageFor(a => a.LanguagesModel) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T07:07:03.123

使用jquery怎么样？

```
$.validator.addMethod('require-one', function(value) {
    return $('.require-one:checked').size() > 0;
}, 'Please check at least one box.');

var checkboxes = $('.require-one');
var checkbox_names = $.map(checkboxes, function(e, i) {
    return $(e).attr("name")
}).join(" ");

$("#itemForm").validate({
    groups: {
        checks: checkbox_names
    },
    errorPlacement: function(error, element) {
        if (element.attr("type") == "checkbox") error.insertAfter(checkboxes.last());
        else error.insertAfter(element);
    }
}); 
```

你的表格：

```
<form name="itemForm" id="itemForm" method="post">

<label for="checkbox1">checkbox1</label>
<input checked="checked" data-val="true" data-val-required="The checkbox1 field is required." id="checkbox1" name="checkbox1" type="checkbox" value="true" class="require-one" />
<input name="checkbox1" type="hidden" value="false" /><br />

<label for="checkbox2">checkbox2</label>
<input checked="checked" data-val="true" data-val-required="The checkbox2 field is required." id="checkbox2" name="checkbox2" type="checkbox" value="true" class="require-one" />
<input name="checkbox2" type="hidden" value="false" /><br />

<label for="checkbox3">checkbox3</label>
<input checked="checked" data-val="true" data-val-required="The checkbox3 field is required." id="checkbox3" name="checkbox3" type="checkbox" value="true" class="require-one" />
<input name="checkbox3" type="hidden" value="false" /><br />

<input type="submit" />
</form> 
```

来自：[https ://stackoverflow.com/a/11512622/1026898](https://stackoverflow.com/a/11512622/1026898)

# opengl-es - LibGDX 重复 TextureRegion

> ID：13664296
> 
> 赞同：6
> 
> 时间：2012-12-01T22:15:08.033
> 
> 标签：opengl-es, textures, libgdx, repeat

我正在将 LibGDX 用于一个项目，并且我正在尝试在特定数量的空间中平铺/重复纹理。目前，我正在使用设置为适当大小的 TextureRegion，并且纹理的任何额外空间都将被填充，正如您在 OpenGL 中使用“Clamp To Edge”所期望的那样。我认为有一种简单的方法可以将此行为更改为“重复”模式，但是我似乎无法找到一种方法来实现这一点，尽管它看起来应该很容易改变。

那么，基本上，有没有一种简单的方法可以使用 LibGDX 在设置区域中重复图像，而不必通过自己以某种形式的循环重复纹理来手动构建它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-04T13:42:15.160

如果您使用的是`TextureRegion`，则可以像这样使用[TiledDrawable](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/utils/TiledDrawable.html)：

```
TiledDrawable tile = new TiledDrawable(textureRegion);
tile.draw(spriteBatcher, x, y, width, height); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-04T13:52:07.360

您可以在纹理上使用“SetWrap”并基于该纹理创建一个 TextureRegion。 **重要提示：**我花了一段时间才弄清楚，但要进行镜像，您的纹理必须是两倍大小的幂。它可以在 Android 上运行，但不能在 iOS 上运行，并且您没有收到消息 - 它显示为黑色。所以它必须是 4x4 或 8x8、16x16 .. 256x256 或 512x512 .. 创建 3x3 镜像（或 axb 大小）

```
Texture imgTexture = new Texture(Gdx.files.internal("badlogic.jpg"));
imgTexture.setWrap(Texture.TextureWrap.MirroredRepeat, Texture.TextureWrap.MirroredRepeat);
TextureRegion imgTextureRegion = new TextureRegion(imgTexture);
imgTextureRegion.setRegion(0,0,imgTexture.getWidth()*3,imgTexture.getHeight()*3); 
```

会给你这个： [![在此处输入图像描述](../Images/131378632aa9d7bd4d73073518205a9e.png)](https://i.stack.imgur.com/bh5qY.png)

您可以在下面看到使用舞台和图像 Actor (Scene2D) 生成该图片的示例代码

```
public class GameScreen implements Screen {

    MyGdxGame game;
    private Stage stage;

    public GameScreen(MyGdxGame aGame){
        stage = new Stage(new ScreenViewport());
        game = aGame;
        Texture imgTexture = new Texture(Gdx.files.internal("badlogic.jpg"));
        imgTexture.setWrap(Texture.TextureWrap.MirroredRepeat, Texture.TextureWrap.MirroredRepeat);
        TextureRegion imgTextureRegion = new TextureRegion(imgTexture);
        imgTextureRegion.setRegion(0,0,imgTexture.getWidth()*3,imgTexture.getHeight()*3);

        TextureRegionDrawable imgTextureRegionDrawable = new TextureRegionDrawable(imgTextureRegion);
        Image img = new Image();
        img.setDrawable(imgTextureRegionDrawable);
        img.setSize(imgTexture.getWidth()*3,imgTexture.getHeight()*3);
        stage.addActor(img);
    }

    @Override
    public void show() {

    }

    @Override
    public void render(float delta) {
        Gdx.gl.glClearColor(1, 0, 0, 1);
        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);
        stage.act(delta);
        stage.draw();
    }

    @Override
    public void resize(int width, int height) {
        stage.getViewport().update(width, height, true);
    }

    @Override
    public void pause() {

    }

    @Override
    public void resume() {

    }

    @Override
    public void hide() {

    }

    @Override
    public void dispose() {
        stage.dispose();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T01:11:55.300

我自己没有尝试过，但是当我尝试解决另一个问题时，我在谷歌上找到了这篇文章。在LIBGDX api中我找到了这个方法，也许它可以帮助？

[http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/graphics/Texture.html#setWrap(com.badlogic.gdx.graphics.Texture.TextureWrap，com.badlogic.gdx.graphics.Texture](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/graphics/Texture.html#setWrap(com.badlogic.gdx.graphics.Texture.TextureWrap)。纹理包裹）

这不是纹理区域，而是纹理本身......

# android - getWindowManager().getDefaultDisplay().getMetrics(metrics) 无法正常工作

> ID：13664300
> 
> 赞同：2
> 
> 时间：2012-12-01T22:15:30.140
> 
> 标签：android, android-screen

我正在使用此代码来获取屏幕尺寸

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.some_layout);
    //more stuff
    setTextSize();
}

private void setTextSize() {
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    int width = metrics.widthPixels;
    //more code
    sometextview.setTextSize(TypedValue.COMPLEX_UNIT_PX, width/10); //example only
} 
```

事实证明，**在极少数情况下这不起作用**。我正在设置一些文本大小，有时它根本不会调整文本大小。我认为只有当我有一段时间没有打开应用程序时才会发生这种情况，因此很难调试它。我唯一的想法是，*这是在应用程序甚至知道之前询问屏幕尺寸*（这是第一个活动）。*我该如何解决这个问题？*这是我知道的支持所有 API 的唯一获取屏幕分辨率的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:17:08.720

您需要为此特定的 Textview 使用 ViewTreeObserver。

一些代码片段。

```
ViewTreeObserver vto = myTextView.getViewTreeObserver();
vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

            @Override
            public void onGlobalLayout() {
                setTextSize();

            }
        }); 
```

唯一需要注意的是，每次视图更改时都会重复调用它，因此您需要保留一个脏标志来跟踪更改。

# python - 从字典的字典创建python数组

> ID：13664305
> 
> 赞同：1
> 
> 时间：2012-12-01T22:15:52.617
> 
> 标签：python, arrays, dictionary

对我来说是新的——我假设这很容易，但我以前从未使用过数组，所以我很好奇它是如何工作的。

我有一个字典，像这样：

```
{'bob': {'a':1, 'b':2, ...}, 'joe': {'a':2, 'c':3, ...} ...} 
```

我想把它变成一个数组，这样我就可以把它写成一个 CSV，然后用 R 把它变成一个热图。我试图作弊，只是把每个嵌套的 dict 写到一个单独的行，但当然不会t 工作，因为不是每个键都存在于每个嵌套的字典中。很简单，对吧？

所需的输出看起来像（以表格形式）：

```
,a,b,c
bob,1,2,0
joe,2,0,3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T22:24:28.160

如果您的列是固定的，您可以简单地执行以下操作：

```
cols = ['a', 'b', 'c']
csv.writerow([''] + cols)
for name, values in data.iteritems():
    csv.writerow([name] + [values.get(c, 0) for c in cols]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T22:26:03.123

假设您有 3 个预定义键，您可以使用 dict 的 get 函数来获取值，如果键不在 dict 中，则可以使用默认值：

```
headers = ('a', 'b', 'c')
for key, values in dict.item():
     print ','.join([values.get(h, '') for h in headers]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T22:34:29.707

其他人已经回答了打印，但假设是固定的标题。要从字典中获取列标题：

```
columns = sorted(set(column for subdict in dict_of_dicts.itervalues() for column in subdict)) 
```

或者，更详细地说：

```
column_set = set()
for subdict in dict_of_dicts.itervalues():
  for column in subdict:
    column_set.add(column)
columns = sorted(column_set) 
```

在一长列中创建数组，只是为了好玩，不推荐：

```
array = [[''] + columns] + [[key] + [subdict.get(column, 0) for column in columns] for key, subdict in dict_of_dicts.iteritems()] 
```

# mysql - SQL Puppy 数据库：尝试使用内部连接进行特定查询，卡住了？

> ID：13664308
> 
> 赞同：0
> 
> 时间：2012-12-01T22:16:06.717
> 
> 标签：mysql, database

我有一个用于学习 SQL 的示例数据库，并且正在尝试编写一个查询来选择小狗来显示它知道的技巧，给定以下条件：

狗 ID 和名称 技巧 ID 和名称 学习日期和技能水平

这是我的数据库图的图片：

![数据库图](../Images/71032e04f84336cd6c0d0c043c59a96c.png)

非常感谢任何帮助，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:39:41.013

首先，您永远不应该真正选择 *（返回所有列），具体说明您想要的列。这样，将来，如果表发生更改并删除了列，它将立即崩溃，您将立即知道为什么某些事情失败了而不是猜测。

接下来，在编写查询时，在表之间使用显式连接，而不考虑条件。这只是为了让您了解 SQL 中的关系是如何工作的……以下内容适用于您的图表。我正在使用“别名”（P 表示小狗，PT 表示小狗技巧等）来帮助简化查询的长输入。

```
select
      P.puppyID,
      P.PuppyName,
      P.Breed,
      PT.TrickID,
      PT.SkillLevel,
      PT.DateLearned,
      T.TrickName,
      TK.KennelName,
      TK.KennelAddress
   from
      Puppy P
         JOIN Puppy_Trick PT
            on P.PuppyID = PT.PuppyID
            JOIN Trick T
               on PT.TrickID = T.TrickID
               JOIN Trick_Kennel TK
                  on T.TrickID = TK.TrickID
                  JOIN Kennel K
                     on TK.TrickKennelID = K.TrickKennelID 
```

注意我的格式/对齐方式。我发现它有助于将一个与下一个的关系视为一条链……如果不经过所有其他人，就无法从 Puppy 到 Kennel。

现在，标准。一旦你了解了如何获得 abcde 关系，你在寻找什么。您可以通过将“AND”条件添加到表的相应连接来应用它。例如，如果您正在寻找“Jump through hoop”的技巧，它与实际描述的技巧表相关联，所以从上面

```
Join Trick T
   on PT.TrickID = T.TrickID
   AND T.TrickName = 'Jump through hoop' 
```

如果您想要特定小狗的东西，因为那是根级别（即：查询中的第一个表），那将在上述所有内容的末尾添加一个“WHERE”子句......

（所以，加入犬舍后）

```
 JOIN Kennel K
                         on TK.TrickKennelID = K.TrickKennelID
   WHERE
      P.PuppyName = 'Spot' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T22:25:14.900

这是一个 SQL 查询：

```
SELECT *
From Puppy As p, Trick as t, Pappy_Trick as pt 
Where 
p.PuppyID = pt.PuppyId AND t.TrickID = pt.TrickID
AND p.PuppyID = 'value' AND PuppyName = 'value' AND t.TrickID = 'value' AND TrickName = 'value' AND DateLearned = 'value' AND SkillLevel = 'value'; 
```

重要的是 where 子句中的第一个条件

```
p.PuppyID = pt.PuppyId AND t.TrickID = pt.TrickID 
```

这有助于链接 3 个表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T22:25:59.643

您需要使用链接表来加入 Puppy 和 Trick 表...

```
SELECT *
FROM   Puppy AS P 
       INNER JOIN Puppy_Trick AS PT ON P.PuppyID = PT.PuppyID
       INNER JOIN Trick AS T ON T.TrickID = PT.TrickID 
```

然后，而不是`SELECT *`选择您真正想要的字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T22:27:56.810

```
 Select PuppyName, TrickName
 From Puppy 
 Join Puppy_Trick
 On Puppy.PuppyID = Puppy_Trick.PuppyID
 Join Trick
 On Puppy_Trick.PuppyTrickID = Trick.TrickID 
```

# html - 使 div 填充父高度（jsfiddle）

> ID：13664309
> 
> 赞同：0
> 
> 时间：2012-12-01T22:16:19.207
> 
> 标签：html, css

具体用例：

[http://jsfiddle.net/MgcDU/271/](http://jsfiddle.net/MgcDU/271/)

这是一个 twitter 引导选项卡，选项卡的内容包含：菜单层（固定但未知的高度），以及我想要填充选项卡窗格的其余空间的第二部分。

所以，我需要黄色窗格来填充其余的浅灰色空间（10px 填充除外），红色内容填充黄色空间（当然填充除外）。

最好的方法是什么，没有标签窗格的绝对定位是否可能？

代码（最好看小提琴）：

HTML：

```
<div class="container">
    <div class="tabs-above">
            <ul class="nav nav-tabs">
                <li class="active"><a href="#" data-toggle="tab">Tab1</a></li>
                <li><a href="#" data-toggle="tab">Tab2</a></li>
                <li><a href="#" data-toggle="tab">Tab3</a></li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane active">
                    <div class="menu">
                        <div class="input-prepend btn-group">
                            <button class="btn btn-inverse dropdown-toggle">Select</button>
                            <select class="span1" ></select>
                        </div>
                    </div>
                    <div class="content">
                        Scrollable content<br>
                        Scrollable content<br>
                        Scrollable content<br>
                        Scrollable content<br>
                        Scrollable content<br>
                        Scrollable content<br>
                        Scrollable content<br>
                        Scrollable content<br>
                        Scrollable content<br>
                        Scrollable content<br>
                        Scrollable content<br>
                        Scrollable content<br>
                        Scrollable content<br>
                    </div>
                </div>
            </div>
        </div>
</diV>​ 
```

CSS：

```
@import url('http://twitter.github.com/bootstrap/assets/css/bootstrap.css');

.container {
    position: absolute;
    top: 0; left 0;
    width: 200px;
    height: 300px;          
    background: lightgray;        
    padding: 10px;
}

.tab-pane {
    background: yellow;            
    padding: 10px;
}

.content {
    background: red;
    height: 100px;
    width: 100%;
    overflow: auto;
}
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:29:45.987

[这个 SO question](https://stackoverflow.com/questions/8709337/css-stretch-div-to-100-of-its-parents-height-with-margin-padding)有一个对你有用的建议。

更新你的`tab-pane`和`content`类：

```
.tab-pane {
    background: yellow;            
    padding: 10px;
    top: 55px;
    bottom: 10px;
    right: 10px;
    left: 10px;
    position:absolute;
}

.content {
    background: red;
    overflow: auto;
    position: absolute;
    left:10px; right: 10px;
    bottom: 10px;
    top: 50px;   
} 
```

看到[这个 jsFiddle](http://jsfiddle.net/MgcDU/274/)。

# arrays - 在 Delphi 中比较数组

> ID：13664311
> 
> 赞同：10
> 
> 时间：2012-12-01T22:16:49.613
> 
> 标签：arrays, delphi, indexing, compare

我有 3 个数组，例如：

```
const
  A: Array[0..9] of Byte = ($00, $01, $AA, $A1, $BB, $B1, $B2, $B3, $B4, $FF);
  B: Array[0..2] of Byte = ($A1, $BB, $B1);
  C: Array[0..2] of Byte = ($00, $BB, $FF); 
```

有没有办法比较并获得正确的索引，而不是逐个检查每个字节？例如：

```
function GetArrayIndex(Source, Value: Array of Byte): Integer;
begin
..
end;

GetArrayIndex(A, B); // results 3
GetArrayIndex(A, C); // results -1 
```

先感谢您。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-01T22:50:46.243

```
function ByteArrayPos(const SearchArr : array of byte; const CompArr : array of byte) : integer;
//  result=Position or -1 if not found
var
  Comp,Search : AnsiString;
begin
  SetString(Comp, PAnsiChar(@CompArr[0]), Length(CompArr));
  SetString(Search, PAnsiChar(@SearchArr[0]), Length(SearchArr));
  Result := Pos(Search,Comp) - 1;
end; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-01T23:17:47.313

这是 Andreas answer [here](https://stackoverflow.com/a/4959721/576719)的修改版本。

```
function BytePos(const Pattern: array of byte; const Buffer : array of byte): Integer;
var
  PatternLength,BufLength: cardinal;
  i,j: cardinal;
  OK: boolean;
begin
  Result := -1;
  PatternLength := Length(Pattern);
  BufLength := Length(Buffer);
  if (PatternLength > BufLength) then
    Exit;
  if (PatternLength = 0) then
    Exit;
  for i := 0 to BufLength - PatternLength do
    if Buffer[i] = Pattern[0] then
    begin
      OK := true;
      for j := 1 to PatternLength - 1 do
        if Buffer[i + j] <> Pattern[j] then
        begin
          OK := false;
          Break;
        end;
      if OK then
        Exit(i);
    end;
end;

begin
  WriteLn(BytePos(B,A)); // 3
  WriteLn(BytePos(C,A)); // -1
  ReadLn;
end. 
```

不过，Bummis 的回答是更喜欢。好多了。

* * *

只是评论中提到的一个评论。

对于小型数据集，`BytePos`性能优于`ByteArrayPos`，而对于大型数据集（10000 个项目），性能则相反。

这适用于 32 位模式，其中汇编程序优化的`Pos()`系统功能在大型数据集上发挥最佳效果。

但是在 64 位模式下，没有汇编器优化的 Pos() 函数。在我的基准测试中，对于所有类型的数据集大小，`BytePos`比 快 4-6 倍。`ByteArrayPos`

* * *

**更新**

基准测试是使用 XE3 进行的。

> 在测试过程中，我`purepascal`在 System.pas 函数中发现了一个有缺陷的循环`Pos()`。

添加了改进请求[QC111103](http://qc.embarcadero.com/wc/qcmain.aspx?d=111103)，其中建议的功能快了大约 3 倍。

我还对上述`BytePos`内容进行了一些优化，并在下面将其呈现为`ByteposEx()`.

```
function BytePosEx(const Pattern,Buffer : array of byte; offset : Integer = 0): Integer;
var
  LoopMax    : Integer;
  OK         : Boolean;
  patternP   : PByte;
  patStart   : Byte;
  i,j        : NativeUInt;
begin
  LoopMax := High(Buffer) - High(Pattern);
  if (offset <= LoopMax) and
     (High(Pattern) >= 0) and
     (offset >= 0) then
  begin
    patternP := @Pattern[0];
    patStart := patternP^;
    for i := NativeUInt(@Buffer[offset]) to NativeUInt(@Buffer[LoopMax]) do
    begin
      if (PByte(i)^ = patStart) then
      begin
        OK := true;
        for j := 1 to High(Pattern) do
          if (PByte(i+j)^ <> patternP[j]) then
          begin
            OK := false;
            Break;
          end;
        if OK then
          Exit(i-NativeUInt(@Buffer[0]));
      end;
    end;
  end;
  Result := -1;
end; 
```

# javascript - 谷歌地图：我怎么能不让用户创建一个面积超过 X 的矩形？

> ID：13664321
> 
> 赞同：2
> 
> 时间：2012-12-01T22:17:37.217
> 
> 标签：javascript, google-maps, area, rectangles

我已经使用 javascript 在我的网站（本地主机）上设置了谷歌地图。现在用户可以创建`circles`或`rectangles`通过左键或右键单击。用户还可以使矩形更大或更小，同样适用于圆形。我希望应用程序不要让用户创建面积超过 X 的矩形。我设法用圆来实现这一点，因为圆的面积是由它的`radius`and定义的`Math.PI`。我知道对于矩形，面积是底部的长度乘以高度的长度。但是，如何从西南角和东北角的纬度和经度中找到这些信息？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T22:34:43.680

让`P(X1, Y1)`和`Q(X2, Y2)`成为东北和西南坐标（我想您已经先将它们转换为像素）。那么矩形的面积就是`A = (X2-X1)*(Y2-Y1)`。

# javascript - 谷歌地图标记聚类器不起作用

> ID：13664322
> 
> 赞同：5
> 
> 时间：2012-12-01T22:17:46.890
> 
> 标签：javascript, google-maps, google-maps-api-3, markerclusterer

我有以下代码来尝试让 MarkerClusterer 库为我的谷歌地图工作，但由于某种原因，它并没有改变任何东西。我有一些 jinja2 用于循环，但一切正常。你能看到任何错误吗？

```
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <style type="text/css">
          html { height: 100% }
          body { height: 100%; margin: 0; padding: 0 }
          #map_canvas { height: 100% }
        </style>
        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyD-pLsocZXv5mYwJsSxMghJncxa6iklFUU&sensor=false"></script>
        <script type="text/javascript" src="/static/js/markerclusterer.js"></script>
        <script type="text/javascript">

    var map;    

    function initialize() {

        var centerlocation = {{centerlocation|json_encode|safe}};   
        var LatLng = centerlocation.replace("(", "").replace(")", "").split(", ")
        var Lat = parseFloat(LatLng[0]);
        var Lng = parseFloat(LatLng[1]);

        var zoomAmt = 10;

      var USA = new google.maps.LatLng(Lat, Lng);
      var mapOptions = {
        zoom: zoomAmt,
        center: USA,
        mapTypeId: google.maps.MapTypeId.TERRAIN
      };
      map =  new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    // Global var
       var infowindow = new google.maps.InfoWindow();

    //markers array
    var markers = [];

    //put all the markers on the map
    {% for location in locations %}

    //need to do the JSON encoding because JavaScript can't have Jinja2 variables
    //I need the safe here because Jinja2 tries to escape the characters otherwise
    var GPSlocation = {{location.GPSlocation|json_encode|safe}};    
    var LatLng = GPSlocation.replace("(", "").replace(")", "").split(", ")
    var Lat = parseFloat(LatLng[0]);
    var Lng = parseFloat(LatLng[1]);    

    var markerLatlng = new google.maps.LatLng(Lat, Lng);
    var title = {{location.title|json_encode|safe}}
    var iwContent = {{location.render_front()|json_encode|safe}}

    var marker = new google.maps.Marker({
            position: markerLatlng,
            title: title,
            map: map
      });

    google.maps.event.addListener(marker, 'click', function () {
      infowindow.setContent(iwContent);
      infowindow.open(map, marker);
      });

    //putting the marker onto the markers array
    markers.push(marker);

    {% endfor %}

    //creating the marker cluster
    var markerCluster = new MarkerClusterer(map, markers);

    }

    </script> 
```

就像我说的那样，在我调用 MarkerClusterer 后地图看起来很正常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T05:13:44.583

看起来您需要从标记中删除 {map: map} 属性。

这是一个集群的[工作示例](http://www.geocodezip.com/v3_MW_example_map3_clustered.html)。

[此页面上](http://www.exployre.com/map)chrome Javascript 控制台中的错误：

*   未捕获的 ReferenceError：未定义 GOverlay markerclusterer.js:630
*   未捕获的 ReferenceError：未定义标记

第一个暗示您使用了错误版本的 markerclusterer 脚本（GOverlay 来自 Google Maps API v2）

如果我将[您的代码](http://www.geocodezip.com/v3_simpleMap_markerClusterer.html)与正确的 MarkerClusterer 一起使用并声明标记数组，则群集器可以工作，但是您在 InfoWindow 内容与标记的关联方面存在问题（可以使用 createMarker 函数修复）。

[这](http://www.geocodezip.com/v3_simpleMap_markerClusterer_CM.html)是一个使用 createMarker 函数来修复标记与信息窗口的关联的示例。它基于您的代码，但还有改进的余地（您的代码中有很多冗余）。

# mysql - 用于大量记录的 longblob 性能存储

> ID：13664324
> 
> 赞同：0
> 
> 时间：2012-12-01T22:18:05.060
> 
> 标签：mysql

app_files 表

```
+-----------+--------------+------+-----+---------+----------------+
| Field     | Type         | Null | Key | Default | Extra          |
+-----------+--------------+------+-----+---------+----------------+
| file_id   | int(10)      | NO   | PRI | NULL    | auto_increment |
| file_name | varchar(255) | NO   |     | NULL    |                |
| file_data | longblob     | NO   |     | NULL    |                |
+-----------+--------------+------+-----+---------+----------------+
3 rows in set (0.00 sec) 
```

如果我将 10,000 张图像添加到此表并根据 file_id 查找图像，性能会受到影响吗？

我已经知道不建议将文件存储在数据库中，但我需要它在一个地方处理备份。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:22:06.250

不，性能会很好，因为您正在查询已编入索引的主键。但是，如果您打算对 file_name 进行查询，请不要忘记在该字段上创建索引。并且不要对 file_data 进行查询 :)

# facebook - 与 FQL 中的朋友联合我的最佳方式是什么？

> ID：13664326
> 
> 赞同：0
> 
> 时间：2012-12-01T22:18:45.503
> 
> 标签：facebook, facebook-fql

我想要相当于`SELECT uid1 FROM friend WHERE uid2=me() UNION SELECT me()`. 我想要这个，以便我可以将其插入其他查询并获取所有用户的信息，而不仅仅是朋友。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-11T17:30:25.230

我们正在使用下一个 FQL 查询：

```
 select uid1,uid2 FROM friend where uid1=me() OR uid2=me() 
```

这给了你一个不规范的友谊数组，它包含重复的条目，你与朋友的友谊和他与你的友谊

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T21:31:08.200

CBroe是对的`SELECT uid, name FROM user WHERE uid IN (SELECT uid1 FROM friend WHERE uid2 = me()) OR uid = me()`应该回归

*   朋友名单和
*   当前用户

# ios - 打开引导访问的 openURL 电话

> ID：13664327
> 
> 赞同：6
> 
> 时间：2012-12-01T22:18:46.237
> 
> 标签：ios, openurl, guided-access

我有一个简单的联系人应用程序，旨在以引导访问/单应用程序模式运行。当用户点击联系人时，应用程序会拨打电话：

```
[[UIApplication sharedApplication] openURL:phoneURL]; 
```

超级简单，在关闭引导访问的情况下工作正常。我想知道在引导访问开启时是否有任何方法可以拨打电话？我敢肯定，它可能是引导访问的一项功能，不允许拨出电话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T04:28:08.093

> Guided Access 将 iPhone 保留在单个应用程序中，并允许您控制可用的功能。...

从引导访问的描述中，我确定没有正常的方式（也许越狱的 iPhone 可能，我不确定）打电话。因为电话发生在另一个应用程序中。苹果肯定会禁止这样做。

# python-3.x - 使用 Python3.x 时，“def function(foo):”中的“foo”是什么意思

> ID：13664330
> 
> 赞同：5
> 
> 时间：2012-12-01T22:19:15.643
> 
> 标签：python-3.x

您好，我只是想知道 Python3.x 中的某些内容。

当你也可以使用时， `foo`in是做什么用的？`def function(foo):``def function():`

我知道有区别，我只是不明白我在各种书籍和教程中找到的定义。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T22:28:41.253

展示比解释容易，这里有一个例子：

```
def function():
    print("Hello") 
```

无论用户如何，此功能都将*始终*打印。`Hello`现在看看这个函数：

```
def function(foo):
    print(foo) 
```

如您所见，我们正在打印`foo`（称为函数参数）而不是字符串。这样，当我们调用函数时，我们可以（在这种情况下，我们**必须**）用任何值替换`foo`函数调用中的 ，并且该值将被设置为`foo`。它基本上是函数内部的一个局部变量，它会在函数被调用时由用户定义。

几个例子：

```
 In[1]: function("Hey")
Out[1]: "Hey"
 In[2]: function(5)
Out[2]: 5 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T22:31:26.860

这是一个温和的笑话。美国有一个古老的军事缩写，FUBAR。这就像说把你要的东西放在这里；它没有本地化为 Python。

例如：

```
int function1( int value ) { ... }

int function1( string value ) { ... } 
```

foo = 定义你需要的状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T22:22:09.500

这是一个论点。如果将函数定义为 function()，则必须在不带参数的情况下调用它。如果将其定义为 function(foo)，则必须使用一个参数调用它。该参数的副本可作为名为 foo 的局部变量提供给函数。

# c++ - 在哪里可以找到 MinGW C 库中所有函数的列表？

> ID：13664331
> 
> 赞同：1
> 
> 时间：2012-12-01T22:19:32.790
> 
> 标签：c++, c, mingw

我在互联网上搜索了一些参考资料，其中包含 MinGW 附带的库中所有 C/C++ 函数的列表，但我只发现大型网站有数百页，每个页面都深入描述了每个函数。但我只想要一个所有函数的简单列表，其中包含它们的名称和所需的参数类型/名称，以及可以找到每个函数的标题，没有所有细节（因为我已经知道它们的作用，我只想有一个可以打印的快速参考列表，特别是因为我似乎不记得参数列表）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T15:42:26.250

我认为这就是你要找的：

1.  [http://www.delorie.com/djgpp/doc/libc/](http://www.delorie.com/djgpp/doc/libc/)
2.  [http://www.cppreference.com/](http://www.cppreference.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:34:53.023

也许[Microsoft Visual Studio 运行时参考](http://www.microsoft.com/downloads/details.aspx?familyid=b8704100-0127-4d88-9b5d-896b9b388313&displaylang=en&tm)可以解决您的问题？

# git - 如何永久删除 git-credential-osxkeychain？

> ID：13664334
> 
> 赞同：1
> 
> 时间：2012-12-01T22:21:16.283
> 
> 标签：git, credentials

我的问题：安装 git-credential-osxkeychain 后，每当我在命令行上键入“git”时，都会收到以下响应：

```
Usage: git credential-osxkeychain <get|store|erase> 
```

当我键入任何其他 git 命令时，例如`git pull`出现一个空白行，我必须按回车键才能返回命令行。如果我输入任何其他内容但返回，我会得到`bad input: ...`这意味着 git 命令行完全是 foobar！尽管塔继续工作。

当我运行 /usr/bin/git 时会发生相同的行为 - 只是为了确保没有两个冲突的 git 命令。我也重新安装了 git 无济于事。

**我要我的 git 回来！！！**：/

[我已经阅读了这篇文章](https://stackoverflow.com/questions/11745504/remove-credential-osxkeychain)，但它没有帮助，因为 .gitconfig 文件中实际上并不存在 osxkeychain，因为当我将 git-credential-osxkeychain 移动到 git 目录时，git 开始出现这种行为（我遵循了这个[设置指南](http://help.github.com/articles/set-up-git)）。所以它应该将它添加到 .gitconfig 的最后一个命令已经破坏了 git。

我想，好吧，我将删除 git-credential-osxkeychain 文件并完成它。如果我能找到文件就好了。这不是我把它移到的地方，也不是我看过的其他几个“垃圾箱”的地方。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-01T23:10:31.397

我做了一件愚蠢的事。我将 git-credential-osxkeychain 复制到正确的目录，但用它覆盖了 git 命令。哦！

# windows-8 - Windows 8 JavaScript 应用程序开发 - 共享魅力 - 将默认消息从“此应用程序无法共享”更改。

> ID：13664342
> 
> 赞同：5
> 
> 时间：2012-12-01T22:22:51.730
> 
> 标签：windows-8

我用 JavaScript 编写的 Windows 8 应用程序允许用户在某些视图中进行共享。当用户处于不允许共享的视图中时，共享超级按钮会显示“此应用无法共享”。我如何将措辞更改为“目前没有可分享的内容”。

Windows 8 帮助文件说：

“在无法完成共享时向用户提供消息如果您的应用支持共享但由于某种原因无法完成特定的共享操作，请提供一条消息以显示在共享窗口中，描述用户必须采取的纠正步骤问题。”

但它没有指定如何更改默认共享消息？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T22:26:09.823

你需要使用 failWithDisplayText

```
var dataTransferManager = Windows.ApplicationModel.DataTransfer.DataTransferManager.getForCurrentView();
dataTransferManager.addEventListener("datarequested", dataRequested);

function dataRequested(e) {
    var request = e.request;
    request.failWithDisplayText("Select a news story and then try again");
} 
```

充足的？:)

# android - Android：在 webvieww 中更改链接颜色

> ID：13664347
> 
> 赞同：1
> 
> 时间：2012-12-01T22:23:16.800
> 
> 标签：android, html, hyperlink, webview

我有一个 webview，它显示使用本地 css 文件格式化的远程 HTML 内容。在我的 css 文件中，我将背景颜色强制为黑色，但由于它们的蓝色，它使链接不易阅读。如何从我的 css 文件中更改这些链接的颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T03:00:17.043

您可以通过寻址 css 文件中的锚元素来更改锚标记。

```
a{
  color:White;
 } 
```

这会将页面上的所有链接更改为白色，希望这是您正在寻找的内容，祝您好运。

# java - 在java中的单链表中附加唯一值

> ID：13664349
> 
> 赞同：0
> 
> 时间：2012-12-01T22:23:22.637
> 
> 标签：java, linked-list

我想在不重复值的情况下附加到链表中。这是我的功能：但这不会过滤掉重复项。知道我哪里出错了吗？Node 由一个字符串值和一个 next 指针组成。

```
public static void append( Node head, Node newNode ) {  
   Node currentNode = head;  
   while( currentNode.next != null ) { 
      if(currentNode.value.trim().equals(newNode.value.trim())) {
         return;
      }
      currentNode = currentNode.next;
   }  
   currentNode.next = newNode; 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T22:37:50.587

你没有检查最后一个节点是否有重复（正如 jtahlborn 在他的回答中所说，当我开始写这个时它被删除了......）。您需要继续直到`currentNode`为空，但您*还*需要记住前一个节点，以便将其用作尾节点。

这是一个简短但完整的程序，展示了它的工作原理。它有讨厌的包访问字段等，但它有效......

```
class Test {
    public static void main(String[] args) {
        Node head = new Node("head");
        append(head, new Node("foo"));
        append(head, new Node("bar"));
        append(head, new Node("bar"));
        append(head, new Node("bar"));
        append(head, new Node("baz"));
        dump(head);
    }        

    public static void append(Node head, Node newNode) {
        Node currentNode = head;
        Node previousNode = null;

        while (currentNode != null) {
            previousNode = currentNode;
            if (currentNode.value.trim().equals(newNode.value.trim())) {
                return;
            }
            currentNode = currentNode.next;
        } 

        previousNode.next = newNode;        
    }

    public static void dump(Node head) {
        Node currentNode = head;

        while (currentNode != null) {
            System.out.println(currentNode.value);
            currentNode = currentNode.next;
        } 
    }
}

class Node {
    String value;
    Node next;

    Node(String value) {
        this.value = value;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T22:24:35.753

你永远不会检查最后一个节点是否有重复。

将来查找此类问题的最佳方法是在调试器中逐步检查您的代码，而不是在论坛上提问。否则，您将永远无法自己学习编码。

# batch-file - 复制并替换多个文件夹，到用户的“我的文档\我的数据”到与要复制的文件夹同名的相应文件夹中

> ID：13664363
> 
> 赞同：1
> 
> 时间：2012-12-01T22:24:46.130
> 
> 标签：batch-file, copy

Windows 7-批处理脚本帮助，请：我需要修改下面的脚本以复制并粘贴/覆盖多个文件夹，（不移动文件）从服务器到每个用户的“我的文档\我的数据”到具有相同的相应文件夹中名称作为要复制的文件夹。我做了一些研究，发现克林特的回应是：http: [//www.computing.net/answers/programming/copy-files-to-folders-with-samename/18511.html](http://www.computing.net/answers/programming/copy-files-to-folders-with-samename/18511.html)

```
@echo off
setlocal enabledelayedexpansion
pushd "C:\Change to\Whateveryour\path"
for %%j in (*) do (
set name=%%~nj
if exist !name!\ (
move "%%j" "!name!"
) else (
echo Warning: %%j not moved to !name!: folder does not exist.
)
)
popd
pause
exit 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:09:17.163

```
@echo off
set destination="some_folder\"
setlocal enabledelayedexpansion
pushd "C:\Change to\Whateveryour\path"
for /D %%j in (".\*") do (
  set f_name=%%j
  if exist !name!\ (
    xcopy "%%j" "!destination!\%%~nj" /I /S /Y /C /H /R
  ) else (
    echo Warning: %%j not moved to !name!: folder does not exist.
  )
)
popd
pause
exit 
```

对于目录迭代`FOR /F`id 更方便。要复制您需要的文件夹结构`XCOPY`或`ROBOCOPY`（这里我使用`XCOPY`）。Move 仅适用于文件。

# r - 与 knitr 一起使用什么 LaTeX 包来获得更多的表格控制？禁忌？

> ID：13664365
> 
> 赞同：3
> 
> 时间：2012-12-01T22:25:13.113
> 
> 标签：r, latex, knitr

我正在使用 knitr 编写一个更长的表，`xtable`并且在我的-file`tabular.environment='longtable'`中使用 longtable 包时，问题是我无法充分控制 longtable 环境。`print``.Rnw`

我有一些文本我想在表格内以某种方式左对齐和连字符（即我有一些包含大量文本的单元格）

关于我如何做到这一点的任何建议？你会推荐什么套餐？有人试过这个`tabu`包吗？

我主要寻找的是一种在我的表格中以一种很好的方式证明我的文本的方法。类似这样的东西，

![在此处输入图像描述](../Images/964dc7078f6d5b5bc326a31885ac7767.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-15T00:27:13.070

我可以确认（作为 的维护者`xtable`）不需要反斜杠。我已经更新了`xtable`R-Forge 上的文档。

几点注意事项：

`xtable`在画廊小插图中有一个使用固定宽度对齐的示例。

此外，还有一个稍微简单的规范，即`align = "llp{5cm}"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T11:16:52.853

`xtable`有参数`align`；对于您的示例，请尝试

```
 align=c("l","l","l","p\{5cm\"}) 
```

**已编辑**（在检查@Alex A. 评论之后）：最后一个 " 之前的 \before" 肯定是错误的，但这次我仔细检查了。看起来下面没有任何反斜杠的版本是正确的。我会将文档中的错误报告给包作者。

```
\documentclass{article}

\begin{document}

<<a, results='asis'>>=
library(xtable)
x  = data.frame(a=1:10,
     b=rep("This is a very long text that takes up to much space",10),
     stringsAsFactors = FALSE)

xt = xtable(x, align=c("l","l","p{5cm}"))
print(xt, include.rownames=FALSE)
@

\end{document} 
```

# jquery - 用于查找元素标题的变量

> ID：13664369
> 
> 赞同：0
> 
> 时间：2012-12-01T22:25:34.790
> 
> 标签：jquery, attr

```
$(document).ready(function() { 
var $postBG = $('.post .poster-profile img'); 
$postBG.find("[title='male']")
    .closest('tr')
      .addClass('male')
        .children('td')
         .removeClass('row1 row2');
$postBG.find("[title='female']")
   .closest('tr')
     .addClass('female')
      .children('td')
       .removeClass('row1 row2');
 }); 
```

只是试图找出img标题是女性还是男性，然后执行以下代码。我试过

```
$postBG.attr("male") 
```

尽管有任何帮助，但还是没有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:28:55.777

`find`在所选元素的上下文中查找元素，您可以使用`filter`方法：

```
var $postBG = $('.post .poster-profile img'); 
$postBG.filter('[title="male"]').foo() 
```

或`attribute`选择器：

```
var $postBG = $('.post .poster-profile img[title="male"]'); 
```

# javascript - 将函数应用于变量？JavaScript/jQuery

> ID：13664370
> 
> 赞同：1
> 
> 时间：2012-12-01T22:25:39.003
> 
> 标签：javascript, jquery

例如

```
var contents = 'some text';

function fileSave(path){
// I'll handle saving the file, but I need the file contents
}

contents.fileSave('index.html'); 
```

因此，当函数对内容变量很有趣时，函数可以访问该变量。就像 replace() 在 JavaScript 中的工作方式一样。

前任。

```
str.replace(); 
```

但在这种情况下

```
contents.fileSave(); 
```

该变量是可互换的，该函数也适用于任何变量。

对不起，新手。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:31:40.587

这可能是一种更好的方法，无需修改`String.prototype`

```
function fileEditor(path) {
    this.save = function(data) {
       // do something with path & data
    }
} 
```

用法是，

```
var someFile = new fileEditor("index.html");
someFile.save("some text"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T22:28:52.957

如果要为所有字符串添加方法，请将其添加到`String.prototype`.

```
String.prototype.fileSave = function(path) {
    var str = this + "";
    // work with the string
    console.log(str, path);
}; 
```

请注意您的环境。扩展本机原型可能会与其他代码发生冲突。您需要自己决定这是否会成为问题。

```
var contents = 'some text';

contents.fileSave('index.html'); // some text index.html 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T22:35:06.137

此代码会将函数 newMethod 附加到所有 String 实例，您也可以对其他类型执行此操作。

```
newMethod = function (signature) {...}
String.prototype.newMethod = newMethod
'a'.newMethod() 
```

正如其他人所指出的，这可能不是最好的方法，但我仍然认为了解 javascript 如何工作对您来说可能很有趣（好吧，至少要开始使用 javascript 中的原型）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T22:56:36.750

切勿编辑不属于您的对象的原型！解决方案 1：使用构造函数，创建一个新对象，因为丢失的源写道解决方案 2：通过对象字面量声明一个对象：

```
var content={
    text:"loremipsum",
    save:function(){ // do work here }
} 
```

并通过 content.save() 你保存。

# database - Oracle Database XE 11.2 - 创建数据库

> ID：13664378
> 
> 赞同：1
> 
> 时间：2012-12-01T22:26:27.920
> 
> 标签：database, oracle

经过几个小时的折腾，我终于设法安装了 Oracle Express 版本。我现在需要创建一个非常基本的数据库，其中包含一个只有 3 个字段的表。但是我没有使用 Oracle 只有 MySQL 的经验，因此不知道从哪里开始。

目前我所能做的就是在以下位置查看“某事”：`http://127.0.0.1:8080/apex/f?p=4950`

有人可以指出我创建这个的正确方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T18:30:13.087

当您安装 XE....时，它会自动创建一个名为“XE”的数据库。您可以使用您设置的登录“系统”和密码登录。

关键信息

服务器：（您定义）
端口：1521
数据库：XE
用户名：系统
密码：（您定义）

哦，是的，基本上Oracle 很困难，不会让您轻松创建多个数据库。您必须使用 SQL 或工具来创建除“XE”之外的另一个数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T22:41:48.207

它是oracle APEX。这是在 APEX 中创建表格的[视频](http://www.youtube.com/watch?v=AclUZCtgrKY)。

或者，

您可以使用[SQLPLUS](http://www.orafaq.com/wiki/SQL%2aPlus)。它包含在 Oracle 软件包中。或者更好的是，下载 Oracle [SQLDEVELOPER](http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html)，它是用于 Oracle 开发的免费 ide。

之后，使用您应该在安装过程中配置的用户名和密码登录。

稍后您可以创建一个新用户（可选但推荐）并创建您想要的表。只是 Google 用于创建 Oracle 表。

# objective-c - 如何在地图视图上添加透明蒙版

> ID：13664379
> 
> 赞同：1
> 
> 时间：2012-12-01T22:26:32.333
> 
> 标签：objective-c, ios, cocoa-touch, mkmapview

我想在我的 MapView 屏幕上添加一个颜色遮罩（没有坐标，我想在我的所有 mapView 上显示它）并将控件保留在这个 mapView 上。
我听说过 MKOverlay，但我不知道如何在所有地图上使用它，并且不使用坐标，因为我希望它出现在所有地图屏幕上。

![](../Images/f96410afdabc998afc857c84090ae0e1.png)

有人有这个想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T01:15:33.453

您可以在地图视图之上叠加视图。它不应该是地图视图的子视图，而是其父视图的子视图 - 但在地图视图的前面。如果覆盖视图有一个半透明的背景颜色，我们可以看穿它。如果覆盖视图禁用了用户交互（`userInteractionEnabled`= NO），触摸将落入地图视图 - 好像覆盖视图不存在，这正是您想要的。换句话说，它看起来好像地图本身被半透明颜色所遮蔽。

这与地图视图或 mkoverlay 无关。您应该相应地修复您的标签。这只是一个关于用偏色或其他视觉修改覆盖*任何视图的问题。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T01:55:45.130

`-hitTest:withEvent:`您可以通过实现该方法来创建过滤器视图。当您触摸过滤器视图时，它将在它返回的视图上工作：

> 返回包含指定点的视图层次结构（包括其自身）中接收器的最远后代。

假设您有一个名为 的 MKMapView`mapView`和一个名为 的 MapFilterView（从 UIView 子类化）`mapFilterView`，它们都是 的子视图`mainView`，除了图层（`mapFilterView`在上`mapView`）。这是一段代码，可以清楚地描述它：

MapFilterView.h

```
...
@interface MapFilterView : UIView {
  MKMapView * mapView_;
}
@property (nonatomic, retain) MKMapView * mapView;
@end 
```

MapFilterView.m

```
#import "MapFilterView.h"

@implementation MapFilterView

@synthesize mapView = mapView_;

- (void)dealloc {
  self.mapView = nil;
  [super dealloc];
}

- (id)initWithFrame:(CGRect)frame {
  self = [super initWithFrame:frame];
  if (self) {
    // Initialization code
  }
  return self;
}

- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
  UIView * child = [super hitTest:point withEvent:event];
  if (child == self)
    return mapView_;
  return child;
} 
```

在您的主视图控制器中（假设在 中`-viewDidLoad:`）：

```
// Create the map view
...
[self.view addSubview:self.mapView];

// Create the map filter view
mapFilterView_ = [[MapFilterView alloc] initWithFrame:mapFilterViewFrame];
mapFilterView_.mapView = self.mapView;
[self.view addSubview:mapFilterView_]; 
```

这段代码只是一个示例，您最好自己测试一下。希望这会有所帮助！:)

# java - try-catch 块是否应该围绕一个捕获它抛出的所有异常的函数？

> ID：13664383
> 
> 赞同：1
> 
> 时间：2012-12-01T22:27:36.243
> 
> 标签：java, exception

我是 JAVA 中异常处理的新手。我对此有一些基本问题：

在 First.java 内部：

```
public void foo ()
{
  Second obj = new Second();
  obj.boo();
} 
```

Second.java里面

```
public void boo()
{
   try { /* may throw some I/O Exception here */ }
   catch (IOException e) { System.err.println(e.message()); }
   catch (Exception e) { System.err.println(e.message()); }
} 
```

我的问题是，我们是否也需要（我们应该）在 First.java 的 foo() 方法中添加 try/catch 块吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:29:32.423

您不需要，但如果您不想在 boo() 中处理它，您可以执行以下操作：

```
public void boo() throws IOException{

...

}

public void foo(){
   try{
   boo();
   }catch(IOException ioe){ System.out.println(ioe.message());}
} 
```

但是你所拥有的应该可以正常工作。希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T22:29:06.247

不，这实际上是一个编译错误（或警告？），就像非抛出`boo`一样（除非`Second`的构造函数抛出）。尝试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T22:36:15.207

由于您在 boo() 方法中捕获了异常，因此您也没有。

但是相反，如果您为调用方法抛出异常来处理它，您将不得不在那里处理异常..

```
public void boo() throws IOException{
//something raising IOException
}

public void foo(){
  try{
      Sound obj = new Sound();
        obj.boo();
} catch(IOException io) {

//handle your exception
}
} 
```

如果你不想在 foo() 方法中处理异常，你可以选择再次抛出它：

```
public void foo() throws IOException{
   //your code here
} 
```

再次调用 foo() 的方法必须处理异常，否则会导致异常

# c# - 为什么 Json.Net 为事件的值返回 null？

> ID：13664384
> 
> 赞同：0
> 
> 时间：2012-12-01T22:27:40.207
> 
> 标签：c#, json.net, deserialization, windows-phone

在这个 Windows Phone 应用程序中使用 Json.Net，我似乎从 JSON 反序列化程序中得到了一个异常，这是“事件”返回为 null 的直接结果。以下是应用程序 MainPage.xaml 的重要内容：

```
 <ListBox x:Name="event_list" >
       <ListBox.ItemTemplate>
           <DataTemplate>
               <StackPanel Orientation="Vertical">
                   <TextBlock Text="{Binding name}" TextWrapping="Wrap" />
                   <TextBlock Text="{Binding description}" Style="{StaticResource PhoneTextSubtleStyle}" />
               </StackPanel>
           </DataTemplate>
       </ListBox.ItemTemplate> 
```

这是应用程序的 MainPage.xaml.cs：

```
 using Microsoft.Phone.Controls;
 using Microsoft.Phone.Tasks;
 using System;
 using System.IO;
 using System.Linq;
 using System.Net;
 using System.Windows;
 using System.Windows.Controls;
 using System.Xml;

 using Newtonsoft.Json;
 using System.Collections.Generic;

 namespace WPDevNorthTX
 {
     public partial class MainPage : PhoneApplicationPage
     {

    #region Constructor

    // Constructor
    public MainPage()
    {
        InitializeComponent();
    }

    #endregion

    void webClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {

        if (e.Error != null)
        {
            return;
        }

        List<Result> events = JsonConvert.DeserializeObject<List<Result>>(e.Result);
        this.event_list.ItemsSource = events;
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        string requestUrl = @"https://api.meetup.com/2/events?key=766be5c39495111785c7947714359&sign=true&group_urlname=Windows-Phone-App-Development-Group-DFW-Dallas-Texas";

        WebClient webClient = new WebClient();
        webClient.DownloadStringAsync(new Uri(winPhoneGeekTweetsUrl));
        webClient.DownloadStringCompleted += new DownloadStringCompletedEventHandler(webClient_DownloadStringCompleted);
    }
}

     public class Result
     {
         public string visibility { get; set; }
         public string status { get; set; }
         public int maybe_rsvp_count { get; set; }
         public string id { get; set; }
         public int utc_offset { get; set; }
         public int duration { get; set; }
         public object time { get; set; }
         public int waitlist_count { get; set; }
         public int yes_rsvp_count { get; set; }
         public object created { get; set; }
         public object updated { get; set; }
         public string event_url { get; set; }
         public string description { get; set; }
         public int headcount { get; set; }
         public string name { get; set; }
         public Group group { get; set; }
         public Venue venue { get; set; }
     }

     public class RootObject
     {
         public List<Result> results { get; set; }
     }

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:38:29.607

您的 json 至少需要**4 个**类和太多字段。因此我会`dynamic`走

```
dynamic dynObj = JsonConvert.DeserializeObject(e.Result);

Console.WriteLine(dynObj.meta.description);

foreach (var result in dynObj.results)
{
    Console.WriteLine(result.description);
} 
```

**或者**

```
var dynObj = (JObject)JsonConvert.DeserializeObject(e.Result);

Console.WriteLine(dynObj["meta"]["description"]);

foreach (var result in dynObj["results"])
{
    Console.WriteLine(result["description"]);
} 
```

![在此处输入图像描述](../Images/17c56e8ab917d1495902465897c7ab1c.png)

# php - 如何在 MySQL 中按前两个字符和后两个字符搜索数据

> ID：13664396
> 
> 赞同：0
> 
> 时间：2012-12-01T22:29:32.317
> 
> 标签：php, mysql, regex, where

我正在使用一个包含 1,000 多种产品的大型数据库。每个产品都有一个 SKU 代码。我正在开发一个脚本，其中根据前两个和最后两个字符删除某些产品。我想知道是否有一种快速的方法可以只使用 MySQL 来删除这些。

有没有办法可以使用 WHERE 语句来搜索以“XX”开头并以“XX”结尾的值？

如果不是，那么我不介意使用旧的 PHP 方式，我只是认为 MySQL 方式会更高效。

非常感谢，彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:31:21.777

这是一个简单的删除语句

```
delete from products
where sku_code like 'XX%XX' 
```

如果您想要以 XX 开头或以 XX 结尾的产品，请使用 or 条件

```
delete from products
where sku_code like 'XX%'
      or sku_code like '%XX' 
```

请参阅[SQL Fiddle](http://www.sqlfiddle.com/#!2/c9f9f/1/0)进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T22:32:16.053

只需`LIKE`在 where 语句中使用一个子句，即

```
....
WHERE sku LIKE 'xx%' OR 
      sku LIKE '%xx' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T22:34:25.510

您可以使用 LIKE 运算符查找特定模式并将 % 用于通配符。

在您的情况下，您可以使用以下内容：

```
DELETE FROM Products
WHERE SKUCode LIKE 'XX%' OR SKUCode LIKE '%XX'; 
```

您可以在[此处](http://www.w3schools.com/sql/sql_like.asp)阅读更多内容。

# c++ - Qt - 从对象数组启动 5 个线程时出错

> ID：13664400
> 
> 赞同：1
> 
> 时间：2012-12-01T22:30:10.393
> 
> 标签：c++, qt

我正在 Qt 中申请作为我的学期项目。题目是“请教哲学家的问题”。现在我有一个问题，我真的不知道如何解决它。问题是：我有一个名为（philisophers）的对象数组，`filozofowie`它包含类`filozof`（philosopher）的对象。philospher 类派生自 Thread 类。当我试图在 for 循环中从数组启动线程时，它会启动其中的四个，然后发生错误。
这是错误：http: [//i.imgur.com/D0i7T.png](http://i.imgur.com/D0i7T.png)

这是代码：

菲洛佐夫.h

```
#ifndef FILOZOF_H
#define FILOZOF_H

#include <QtCore>
#include <QtGui>

class Filozof : public QThread
{
    public:
    Filozof();
    void run();
    QString name;
    QLabel *stan;
};

#endif 
```

主类.h

```
#ifndef MAINCLASS_H
#define MAINCLASS_H

#include <QtGui>
#include <QtCore>
#include "ui_mainwindow.h"
#include "Filozof.h"

class MainClass : public QMainWindow
{
    Q_OBJECT

public:
    MainClass(QWidget *parent = 0, Qt::WFlags flags = 0);
    ~MainClass();
    Ui::MainClassClass ui;
    Filozof filozofowie[4];
    QSystemSemaphore *kelner;

public slots: 
    void startSimulation();
    void stopSimulation();
};

#endif // MAINCLASS_H 
```

部分`mainclass.cpp`

```
void MainClass::startSimulation() 
{
    this->kelner = new QSystemSemaphore("kelner", 4, QSystemSemaphore::Create);
    ui.textEdit->append("[" + QDateTime::currentDateTime().toString() + "] Start      symulacji");
    for(int i = 0; i < 5; i++)
    {
        filozofowie[i].start();
        if(filozofowie[i].isRunning())
        {
           ui.textEdit->append("[" + QDateTime::currentDateTime().toString() + "] Watek filozofa " + QString::number(i) + " wystartowal");
        }else{
           ui.textEdit->append("[" + QDateTime::currentDateTime().toString() + "] Blad podczas tworzenia watku filozofa " + QString::number(i));
       }
   }

    ui.buttonStart->setEnabled(false);
    ui.buttonStop->setEnabled(true);
} 
```

请不要介意附加的文字，这些是波兰语的消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T23:46:16.133

至少你在这里有问题：

```
Filozof filozofowie[4]; 
```

索引是 0..3，但在这里你有 0..4：

```
for(int i = 0; i < 5; i++) 
```

另外，你的“if isRunning”有点好笑。您可能应该连接启动信号，或使用 waitForStarted 方法。

# arrays - 计算prolog中列表中字符的出现次数

> ID：13664401
> 
> 赞同：3
> 
> 时间：2012-12-01T22:30:20.370
> 
> 标签：arrays, list, prolog

```
walls(This) :- 
    append(This, NewMap),
    length(NewMap, N),
    numWalls(NewMap, W),
    W >= N/10.

numWalls([], _, 0).
numWalls('w'|Tail, W) :-
    W is W1 + 1,
    numWalls(Tail, W1).
numWalls(_|Tail, W):-
    numWalls(Tail, W). 
```

我逐行注释掉并得到错误，直到我取出 numWalls(NewMap,W), 行。追加展平二维数组，长度返回展平地图的正确长度。我们需要计算“w”在列表列表中出现的次数，如果超过 10% 的列表是“w”，则返回 True。

* * *

```
walls(Maps) :- 
    append(Maps, NewMap),
    length(NewMap, N),
    print(NewMap),
    numWalls(NewMap, W),
    print(W) .

numWalls([], 0).
numWalls(['w'|Tail], W) :-
    numWalls(Tail, W1),
    W1 is W-1.
numWalls([_|Tail], W):-
    numWalls(Tail, W). 
```

“错误：is/2：参数没有充分实例化”看起来错误与我的 is 语句有关？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T22:42:32.297

看起来您缺少一些方括号。除了那个小的语法问题，你的程序逻辑很好：

```
numWalls([], 0).
numWalls(['w'|Tail], W) :-
    numWalls(Tail, W1),
    W is W1 + 1.
numWalls([H|Tail], W):-
    H \= (w),
    numWalls(Tail, W). 
```

**编辑：**正如[错误](https://stackoverflow.com/users/772868/false)的评论，第二条规则需要改变`w`以防止误用 a ，以避免`numWalls([w,w], 0).`成功。

[链接到 ideone 上的演示。](http://ideone.com/j0RHId)

# network-programming - Java客户端服务器编程

> ID：13664403
> 
> 赞同：2
> 
> 时间：2012-12-01T22:30:31.880
> 
> 标签：network-programming, client-server

服务器代码如何跟踪客户端。我无法理解这一点：如果客户端 A 和客户端 B 不断向服务器发送请求，我怎么知道哪个是客户端 A，哪个是客户端 B？

请帮忙。

我的服务器代码是：-

```
while (true) {
            try {
                System.out.println("Connecting " + count++);
                Socket client = acceptor.accept();
                System.out.println("here 1");
                logger.log(Level.INFO, "Client ["+client.getInetAddress() +"] tried to connect at "
                        + new GregorianCalendar().getTime());
                logger.log(Level.INFO,
                        "Connection received from  " + client.getInetAddress()
                                + ":" + client.getLocalPort() );
                processRequest(client);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T21:08:40.847

这取决于你想如何编码。我遇到过同样的情况，我们有基于登录的客户端服务器会话。所以直到他们登录它很容易理解。

# eclipse - Eclipse IDE - 你能一次性批量生成代码吗？

> ID：13664404
> 
> 赞同：2
> 
> 时间：2012-12-01T22:30:34.160
> 
> 标签：eclipse, netbeans, ide, code-generation

我最近开始使用 Eclipse 开发一些 Google App Engine 代码，我正处于创建大量实体/域类的早期阶段。我通常的模式是创建域类，添加私有属性，然后通过 IDE 菜单

1.  根据字段生成构造函数
2.  生成默认构造函数
3.  生成 getter 和 setter
4.  生成哈希码/相等函数
5.  生成 toString 函数

对我来说似乎很疯狂的是，我不能只进入一个组合视图，使我能够一步指定字段并为上面列出的每个项目设置复选框。

我猜 Groovy 会给我一个解决方案 3 - 因为它会生成自动 getter 和 setter，但我不想为快速项目添加任何“新”到我的学习曲线。

Eclipse 中有没有一种方法可以快速生成代码——而不是让我发疯的手动 5 个步骤？！我也很想知道 Netbeans 中是否提供此功能，因为我也大量使用此功能。

谢谢，罗伯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T01:35:42.153

我不知道生成#1 中提到的构造函数类型的自动方法。

#2 到 #5 可以使用`ctrl`+`space`下拉菜单快速解决。在下面的下拉列表中，您可以看到默认构造函数、equals、hashCode、toString 和两个 getter/setter 对的代码生成选项。

首先键入选项的前几个字母将更快地缩小选项范围。例如，键入“set”后跟`ctrl`+`space`会将列表缩减为以“set”开头的选项，例如 setter 生成选项。

![用于代码生成的 ctrl+space 示例](../Images/f47b95241f45e56b84b92a9c68246c51.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:08:34.793

看看[Eclipse M2T](http://www.eclipse.org/modeling/m2t/)（模型到文本）项目中的代码生成功能。那里有几种技术，每种技术都以不同的方式解决这个问题。基本思想是您对要生成的代码进行建模，然后使用某种模板方法从该模型生成代码。例如，模型将列出类中每个属性的名称、类型和维度，模板将为声明、getter、setter 和这些变量的任何其他使用提供样板。

事实证明，您可以为要生成的整个类集建模架构模式，因此可以生成除业务逻辑之外的几乎所有代码。

我会告诉您使用 M2T-JET，但是对于 Eclipse M2T 中的其他每一种技术，都会有同样直言不讳的拥护者。这是另一个答案的链接，我在其中[举例说明了如何使用 M2T-JET](https://stackoverflow.com/questions/11904803/generating-java-code-from-xml-in-eclipse)

# mongodb - CloudFoundry mongoDb 访问权限

> ID：13664406
> 
> 赞同：1
> 
> 时间：2012-12-01T22:30:41.507
> 
> 标签：mongodb, grails, cloud-foundry

我已将我的 grails 应用程序部署到 CloudFoundry。以下代码

```
GMongo mongo
def index() {
    [databases:mongo.databaseNames]
} 
```

抛出异常

```
Class
com.mongodb.CommandResult$CommandFailure
Message
command failed [listDatabases]: { "serverUsed" : "/172.30.48.61:25242" , "errmsg" : "need to login" , "ok" : 0.0}

   Line | Method
->>  88 | getException     in com.mongodb.CommandResult
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   134 | throwOnError     in     ''
|   374 | getDatabaseNames in com.mongodb.Mongo 
```

为什么此操作（以及许多其他操作）受到限制？可以吗？是否可以在 CloudFoundry 上获得完全访问权限？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T00:00:13.583

当您在 CloudFoundry 上创建数据库服务时，它会映射到该服务节点上的*一个数据库。*该节点是多租户的，该节点上还有其他数据库（服务实例）。这就是您没有权限在该节点上创建、删除或检查其他数据库的原因。

# php - Drupal-6 CCK 字段需要取决于另一个字段值

> ID：13664409
> 
> 赞同：0
> 
> 时间：2012-12-01T22:31:03.250
> 
> 标签：php, validation, drupal, drupal-6, cck

我有一个包含一堆 CCK 字段的表单，其中一个是主“请求类型”字段。

表单上的其他字段是必需的，具体取决于主字段的状态。

示例表格：

* * *

{主字段}

{field one}（始终需要，由 cck 表单设置）

{fieldgroup 我的垂直标签组} {

-{字段二}（必需的 IF 主字段 == '1'）

-{字段三}（必需的 IF 主字段 == '1' OR '2'）

}

* * *

我一直在尝试使用表单验证来完成此操作，在这个阶段我试图在不检查主字段的情况下即时制作所需的字段，但我无法将其呈现为表单上的必填字段......

```
function my_module_form_alter(&$form, $form_state, $form_id) {
  switch ($form_id) 
  {
   case 'my_node_node_form':
    $form['#validate'][] = 'my_module_form_validate';
    break;
   default:
    // nothing
    break;
  }
 }

function my_module_form_validate($form, &$form_state) {
  // there are so many versions of the same field, which one do I use?
  $form['#field_info']['field_two']['required'] = '1'; 
  $form['group_my_group']['field_two']['#required'] = '1';
  $form['group_my_group']['field_two'][0]['#required'] = 'TRUE';
 } 
```

当我提交表格时，我得到的只是`Field One field is required.`

当我在验证函数中对 $form 执行 print_r 转储时，它表明我已成功更改值，但未按要求呈现。

如何根据另一个字段值使一个字段成为必填字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T12:25:57.147

我发现关键是不要使用`$form['#validate'][]`但是`$form['#after_build'][]`，像这样

```
function my_module_form_alter(&$form, $form_state, $form_id) {
  switch ($form_id) 
  {
   case 'my_node_node_form':
    $form['#after_build'][] = 'my_module_form_after_build';
    break;
   default:
    // nothing
    break;
  }
 }

function my_module_form_after_build($form, &$form_state) {
  switch ($form['field_master_field']['#value']['value']) {
    case '2':
      $form['group_my_group']['field_three'][0]['value']['#required'] = TRUE;
    case '1':
      $form['group_my_group']['field_two'][0]['value']['#required'] = TRUE;
    case '0':
      $form['group_my_group']['field_one'][0]['value']['#required'] = TRUE;        
     break;
    }
   return $form;
  } 
```

工作一种享受

# java - java从方法返回String []

> ID：13664412
> 
> 赞同：1
> 
> 时间：2012-12-01T22:31:17.857
> 
> 标签：java, filereader

我有一个文件阅读器，需要将文本用于标签循环的文本。我遇到了麻烦。我需要标签中的文本是 setLabel 方法中的名称数组。

主类一个包构建；

```
import java.io.IOException;
import java.awt.*;
import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JRadioButton;
import javax.swing.JPanel;

public class a {
    final static boolean shouldFill = true;
    final static boolean shouldWeightX = true;
    final static boolean RIGHT_TO_LEFT = false;

    public static void addComponentsToPane(Container pane) {
        a st = new a(); // object <<<<<<<<<<<<<<<<<<<<

        if (RIGHT_TO_LEFT) {
            pane.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
        }

            JButton button;
        JLabel headlabel;
        JLabel label[] = new JLabel[10];
        JRadioButton radioButton;
        JPanel panel1, panel2, panel3, panel4;

            pane.setLayout(new GridBagLayout());
            GridBagConstraints c = new GridBagConstraints();

panel1 = new JPanel(new GridBagLayout());
    c.gridx = 0;
    c.gridy = 0;
    pane.add(panel1, c);
    panel2 = new JPanel(new GridBagLayout());
    c.gridx = 0;
    c.gridy = 1;
    pane.add(panel2, c);
    panel3 = new JPanel(new GridBagLayout());
    c.gridx = 0;
    c.gridy = 2;
    pane.add(panel3, c);
        for (int i = 0; i < 10; i = i+1) {
            for (int e = 0; e < 8; e = e+1) {
                label[i]= new JLabel(st.setLabel()); // return String[] stocknames <<<<<<<<<<<
                label[i].setBorder(BorderFactory.createLineBorder(Color.black));
                    c.fill = GridBagConstraints.HORIZONTAL;
                    c.ipady = 0;       //reset to default
                    c.weighty = 1.0;   //request any extra vertical space
                    c.anchor = GridBagConstraints.PAGE_END; //bottom of space
                    //c.insets = new Insets(5,5,5,5);  //top padding
                    c.gridx = e;       //aligned with button 2
                    //c.gridwidth = 100;   //2 columns wide
                    c.gridy = i;       //third row
                    panel3.add(label[i], c);
            }
        }
    }

    /**
    * Create the GUI and show it.  For thread safety,
    * this method should be invoked from the
    * event-dispatching thread.
    */
    private static void createAndShowGUI() {
            //Create and set up the window.
            JFrame frame = new JFrame("Stock Table");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            //Set up the content pane.
        //frame.setPreferredSize(new Dimension(600, 600));
            addComponentsToPane(frame.getContentPane());

            //Display the window.
            frame.pack();
            frame.setVisible(true);
        }

        public static void main(String[] args) {

            //Schedule a job for the event-dispatching thread:
            //creating and showing this application's GUI.
            javax.swing.SwingUtilities.invokeLater(new Runnable() {
                    public void run() {
                        createAndShowGUI();
                    }
            });
        }

    public String[] setLable() throws IOException {
        String file_name = "path";

        try {
            ReadFile file = new ReadFile(file_name);
            String[] aryLines = file.OpenFile();
            String[] names = new String[aryLines.length];
            String[] links = new String[aryLines.length];

            int i;
            for(i=2; i < aryLines.length; i++) {
                //System.out.println(aryLines[i]);
                int firstquote = aryLines[i].indexOf("\"")+1;
                int secondquote = aryLines[i].indexOf("\"", firstquote+1);
                int thirdquote = aryLines[i].indexOf("\"", secondquote+1)+1;
                int fourthquote = aryLines[i].indexOf("\"", thirdquote+1);
                names[i] = aryLines[i].substring(firstquote, secondquote);
                links[i] = aryLines[i].substring(thirdquote, fourthquote);

            }

        return names;
        }
        catch (IOException e) {
            System.out.println( e.getMessage() );
        }

    }

} 
```

读取文件类

```
package build;

import java.io.IOException;
import java.io.FileReader;
import java.io.BufferedReader;

public class ReadFile {
    private String path;

    public ReadFile(String file_path) {
        path = file_path;
    }

    public String[] OpenFile() throws IOException {

        FileReader fr = new FileReader(path);
        BufferedReader textReader = new BufferedReader(fr);

        int numberOfLines = readLines();
        String[] textData = new String[numberOfLines];

        int i;

        for(i=0; i < numberOfLines; i++) {
            textData[i] = textReader.readLine();
        }

        textReader.close();
        return textData;

    }

    int readLines() throws IOException {

        FileReader file_to_read = new FileReader(path);
        BufferedReader bf = new BufferedReader(file_to_read);

        String aLine;
        int numberOfLines = 0;

        while ((aLine = bf.readLine()) != null) {
            numberOfLines++;
        }

        bf.close();

        return numberOfLines;

    }

} 
```

*完全的*

```
package build;

import java.io.IOException;
import java.awt.*;
import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JRadioButton;
import javax.swing.JPanel;

public class a {
    final static boolean shouldFill = true;
    final static boolean shouldWeightX = true;
    final static boolean RIGHT_TO_LEFT = false;

    public static void addComponentsToPane(Container pane) {
        a st = new a();
        if (RIGHT_TO_LEFT) {
            pane.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
        }

            JButton button;
        JLabel headlabel;
        JLabel label[] = new JLabel[10];
        JRadioButton radioButton;
        JPanel panel1, panel2, panel3, panel4;

            pane.setLayout(new GridBagLayout());
            GridBagConstraints c = new GridBagConstraints();
            if (shouldFill) {
                //natural height, maximum width
                c.fill = GridBagConstraints.HORIZONTAL;
            }

        panel1 = new JPanel(new GridBagLayout());
        c.gridx = 0;
        c.gridy = 0;
        pane.add(panel1, c);
        panel2 = new JPanel(new GridBagLayout());
        c.gridx = 0;
        c.gridy = 1;
        pane.add(panel2, c);
        panel3 = new JPanel(new GridBagLayout());
        c.gridx = 0;
        c.gridy = 2;
        pane.add(panel3, c);

        String[] labels = st.setLabel();
        for (int i = 0; i < 10; i = i+1) {
            for (int e = 0; e < 8; e = e+1) {
                label[i]= new JLabel(labels[i]);
                label[i].setBorder(BorderFactory.createLineBorder(Color.black));
                    c.fill = GridBagConstraints.HORIZONTAL;
                    c.ipady = 0;       //reset to default
                    c.weighty = 1.0;   //request any extra vertical space
                    c.anchor = GridBagConstraints.PAGE_END; //bottom of space
                    //c.insets = new Insets(5,5,5,5);  //top padding
                    c.gridx = e;       //aligned with button 2
                    //c.gridwidth = 100;   //2 columns wide
                    c.gridy = i;       //third row
                    panel3.add(label[i], c);
            }
        }

    }

    /**
    * Create the GUI and show it.  For thread safety,
    * this method should be invoked from the
    * event-dispatching thread.
    */
    private static void createAndShowGUI() {
            //Create and set up the window.
            JFrame frame = new JFrame("Stock Table");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            //Set up the content pane.
        //frame.setPreferredSize(new Dimension(600, 600));
            addComponentsToPane(frame.getContentPane());

            //Display the window.
            frame.pack();
            frame.setVisible(true);
        }

        public String[] setLabel() {
            String file_name = "path";
            String[] names = null;
            try {
                ReadFile file = new ReadFile(file_name);
                String[] aryLines = file.OpenFile();
                String[] links = new String[aryLines.length];
                names = new String[aryLines.length];

                int i;
                for(i=2; i < aryLines.length; i++) {
                        //System.out.println(aryLines[i]);
                        int firstquote = aryLines[i].indexOf("\"")+1;
                        int secondquote = aryLines[i].indexOf("\"", firstquote+1);
                        int thirdquote = aryLines[i].indexOf("\"", secondquote+1)+1;
                        int fourthquote = aryLines[i].indexOf("\"", thirdquote+1);
                        names[i] = aryLines[i].substring(firstquote, secondquote);
                        links[i] = aryLines[i].substring(thirdquote, fourthquote);
                }
        }catch (IOException e) {
                System.out.println( e.getMessage() );
            }
            return names;

        }

        public static void main(String[] args) {

         // get the values of x & y from class A
        int x = ReadWrite.getX();
        int y = ReadWrite.getY();
        // print them out
        //System.out.println("x = " + x + ", y = " + y);
            //Schedule a job for the event-dispatching thread:
            //creating and showing this application's GUI.
            javax.swing.SwingUtilities.invokeLater(new Runnable() {
                public void run() {
                    createAndShowGUI();
                }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:38:24.117

在块之前移动`String[] names`in的声明，并在 catch 之后类似地移动 return 语句，例如`setLable()``try`

```
 public String[] setLable() {
      String file_name = "path";
      String[] names = null;
      try {
        ReadFile file = new ReadFile(file_name);
        String[] aryLines = file.OpenFile();
        String[] links = new String[aryLines.length];
        names = new String[aryLines.length];

        int i;
        for(i=2; i < aryLines.length; i++) {
            //System.out.println(aryLines[i]);
            int firstquote = aryLines[i].indexOf("\"")+1;
            int secondquote = aryLines[i].indexOf("\"", firstquote+1);
            int thirdquote = aryLines[i].indexOf("\"", secondquote+1)+1;
            int fourthquote = aryLines[i].indexOf("\"", thirdquote+1);
            names[i] = aryLines[i].substring(firstquote, secondquote);
            links[i] = aryLines[i].substring(thirdquote, fourthquote);
        }
       }catch (IOException e) {
        System.out.println( e.getMessage() );
       }
       return names;
    } 
```

**请注意：**如果人口之前有任何异常`names`，那么它将返回`null`。`throws`此外，当您处理异常（打印消息）时，我也删除了。

最后，方法名称听起来不合适。最好将其命名为`getLables`or `getLableNames`。

您需要使用`String[]`of 标签将字符串设置为：

```
 String [] lables = st.setLabel();//change to getLables
  for (int i = 0; i < 10; i = i+1) {
    for (int e = 0; e < 8; e = e+1) {
      label[i]= new JLabel(lables[i]);//use string array index to set the string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T22:44:39.600

我不完全确定我是否正确理解了这个问题，但我认为你需要改变它：

```
for (int i = 0; i < 10; i = i+1) {
    for (int e = 0; e < 8; e = e+1) {
        label[i]= new JLabel(st.setLabel()); // return String[] stocknames <<<<<<<<<<< 
```

对此：

```
String[] labels = st.setLabel();
for (int i = 0; i < 10; i = i+1) {
    for (int e = 0; e < 8; e = e+1) {
        label[i]= new JLabel(labels[i]); 
```

另请注意，您的`public String[] setLable()`拼写错误，应该是`public String[] setLabel()`.

# javascript - 尝试在 wordpress 中创建一个带有帖子标题、图像和摘录的水平滚动代码

> ID：13664419
> 
> 赞同：0
> 
> 时间：2012-12-01T22:32:01.950
> 
> 标签：javascript, jquery, wordpress, scroll, ticker

我正在尝试在 wordpress 中创建一个滚动新闻自动收录器，以在我的页脚中定位自定义帖子类型。这是下面的javascript和我的div。谢谢。

```
 $('.ticker-wrapper').cycle({
     fx: 'scrollHorz',
     continuous: 1,
     easeIn: 'linear',
     easeOut: 'linear'
  });

<div class ="ticker-wrapper">
<!--pulling in custom post type "Ticker"-->
<article class="ticker">

<?php $recentPosts = new WP_Query("showposts=8&post_type=Ticker"); 
while($recentPosts->have_posts()):$recentPosts->the_post();?>

<article id="post-<?php the_ID(); ?>" <?php post_class('clearfix'); ?> role="article">   

<a href="<?php the_permalink(); ?>"><?php the_post_thumbnail('ticker-img', array('class' => 'ticker-image'));?></a>
<h2 class="ticker-title"><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>
<p class="ticker-excerpt"><?php the_excerpt('ticker_length'); ?></p>
</article>  <!--end ticker-->

<?php endwhile; wp_reset_query(); ?>
</div> <!--end ticker-wrapper--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:33:46.987

确保你有 jQuery Cycle 运行，并确保它在 jQuery 之后被调用。然后，您需要在 jQuery Cycle 调用中的 article 类之外开始和结束您的自定义循环。所以试试下面的代码。

**把它放在你的`<head></head>`标签中，在链接到 jQuery 和 jQuery Cycle 之后。**

```
$(document).ready(function () { 
    $('.ticker-wrapper').cycle({
        fx: 'scrollHorz',
        continuous: 1,
        easeIn: 'linear',
        easeOut: 'linear'
    });
}); 
```

**把它放在你想要滚动条的地方。**

```
<?php $recentPosts = new WP_Query("showposts=8&post_type=Ticker"); 
while($recentPosts->have_posts()):$recentPosts->the_post();?>

<div class="ticker-wrapper">

    <article <?php post_class('clearfix'); ?> role="article" class="ticker" id="post-<?php the_ID(); ?>">   

        <a href="<?php the_permalink(); ?>"><?php the_post_thumbnail('ticker-img', array('class' => 'ticker-image'));?></a>

        <h2 class="ticker-title"><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>
        <p class="ticker-excerpt"><?php the_excerpt('ticker_length'); ?></p>

    </article>  <!--end .ticker-->

</div> <!--end ticker-wrapper-->

<?php endwhile; wp_reset_query(); ?> 
```

我还稍微修改了代码并取出了其中一个标签，因为它基本上是上面标签`article`的副本。`article`我在上一篇文章中添加了那篇文章中的类和 ID。这应该可以，但如果没有回复任何 PHP 或 JS/jQuery 错误。

# jquery - CakePhP 和 jquery.getJSON 如何将数据传递给控制器

> ID：13664434
> 
> 赞同：0
> 
> 时间：2012-12-01T22:33:54.733
> 
> 标签：jquery, json, cakephp

我使用 jquery 1.8.3 和 cakephp2，我无法通过 ajax 将数据传递给控制器​​这是我的代码：

*.js

```
 $.getJSON("json/", {data: "somedata"}, function (data) {
        console.log(data['data']);
        d = data;
    }).error(function() { alert("error"); }) 
```

*控制器.php：

```
public function json($site = null)
{
    $data = Array(
        "name" => $site,
    );
    $this->layout = 'ajax';
    $this->set(compact('data', $data));
} 
```

视图.ctp：

```
<?php 
    $this->autoRender = false;    
    echo json_encode(compact('data', $data)); 
?> 
```

但在控制台名称变量为空，有人知道怎么做吗？谢谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T10:19:38.083

在你的控制器中试试这个：

```
return new CakeResponse(array('body' => json_encode($data))); 
```

# android - 如何使用意图将 int[] 数据从一个活动传输到另一个活动

> ID：13664435
> 
> 赞同：0
> 
> 时间：2012-12-01T22:33:56.713
> 
> 标签：android, google-maps, arraylist, integer, int

我有两个活动。第一个生成整数数组列表数据，我想在第二个活动中将数据用作 int[] 数据。我的第二个活动的代码如下：

```
public class maptask extends MapActivity {

    @Override

    protected boolean isRouteDisplayed() {
        return false;
    }

      @Override
      public void onCreate(Bundle icicle) {

        super.onCreate(icicle);
        Intent intent= new Intent();

        List<Integer> x=intent.getIntegerArrayListExtra("lat");
        List<Integer> y=intent.getIntegerArrayListExtra("lon");
        //receive the data from the first activity

        setContentView(R.layout.map);  

        MapView mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
        List<Overlay> mapOverlays = mapView.getOverlays();

        Drawable drawable = this.getResources().getDrawable(R.drawable.ic_action_search);
        mapoverlay itemizedoverlay = new mapoverlay(drawable, this);

        int a=0, b=0;
        for(a=0; a<x.size();a++)
        //here, the logcat shows there must be something wrong.

            for(b=0; b<y.size(); b++)
            {
                if(a==b)
                {
                    GeoPoint Point =new GeoPoint(x.get(a),y.get(b));

                    OverlayItem overlayitem = new OverlayItem(Point, "Hola, Mundo!", "I'm in Mexico City!");
                    mapOverlays.add(itemizedoverlay);
                    itemizedoverlay.addOverlay(overlayitem);

              }

        }
      }
} 
```

为了找到问题所在，一开始尝试在代码开头定义两个2的int[]而不是arrarylist，运行成功。所以问题一定存在于数据类型传输或意图数据传输中。

下面是第一个活动：

公共类 MainActivity 扩展 Activity {

```
public  List<String> position = new ArrayList<String>(); 
public  List<Long> time=new ArrayList<Long>();
public  List<Integer> lat= new ArrayList<Integer>(); 
public  List<Integer> lon= new ArrayList<Integer>(); 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final Button mapbutton=(Button) findViewById(R.id.button1);
    mapbutton.setOnClickListener(new OnClickListener(){
        public void onClick(View v){
            Intent intent =new Intent();
            intent.setClass(MainActivity.this, maptask.class);
            intent.putIntegerArrayListExtra("lat", (ArrayList<Integer>) lat);
            intent.putIntegerArrayListExtra("lon", (ArrayList<Integer>) lon);
                intent.putStringArrayListExtra("data", (ArrayList<String>) position);

                startActivity(intent);

            }
        });

        final Button listbutton=(Button) findViewById(R.id.button2);
        listbutton.setOnClickListener(new OnClickListener(){
            public void onClick(View v){
                Intent intent =new Intent();
                intent.setClass(MainActivity.this, list.class);
                intent.putStringArrayListExtra("data", (ArrayList<String>) position);
                //String yes="my name";
                //intent.putExtra("yes", yes);
                startActivity(intent);

            }
        });

        LocationManager locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
        String provider = locationManager.GPS_PROVIDER;
        Location location = locationManager.getLastKnownLocation(provider);
        locationManager.requestLocationUpdates(provider, 2000, 10, locationListener);

    } 

    private void additem(Location location){
         String latLongString = "Lat:" + location.getLatitude() + "\nLong:" + location.getLongitude();
         position.add(latLongString);
         long t=location.getTime();
         time.add(t);

    }

    private void addgeo(Location location){
        int x=(int)location.getLatitude()*1000000;
        int y=(int)location.getLongitude()*1000000;
        lat.add(x);
        lon.add(y);

    }
  //I use the addgeo to put the data into arraylist.    

private  LocationListener locationListener = new LocationListener() {
    public void onLocationChanged(Location location) {
          additem(location);
          addgeo(location);

            };
     // updateWithNewLocation(location);

//      addlayout(location);

    public void onProviderDisabled(String provider){
      //updateWithNewLocation(null);
  //    addlayout(null);

    }

    public void onProviderEnabled(String provider) {
        //updateWithNewLocation(null);
    //  addlayout(null);

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {}
  }; 
```

![下面是logcat截图](../Images/5ad60e96d1a40d1319e98ef01b0f1670.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:47:50.067

如果您正在使用，`int[] lats`您应该使用：

```
intent.putExtra("lat", lats); 
```

并阅读[`getIntArrayExtra()`](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20int%5b%5d%29)：

```
int[] lats = intent.getIntArrayExtra("lat"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T23:22:51.547

它不起作用，因为在您的第二个活动中

```
 Intent intent= new Intent(); 
```

它应该是

```
Intent intent = getIntent(); 
```

# c++ - 零行 1000 列的矩阵？

> ID：13664437
> 
> 赞同：3
> 
> 时间：2012-12-01T22:34:17.157
> 
> 标签：c++, opencv

我在看一个`CvNormalBayesClassifier::train`输入/输出矩阵是一维向量的例子。

我正在查看的示例通过使用以下行创建一个具有 0 行和 1000 列的 cv::Mat 矩阵来实现这一点：

`Mat trainingData(0, 1000, CV_32FC1);`

阅读 opencv 文档中的基本数据类型，这是我为 Mat 找到的：

> 有许多不同的方法来创建 Mat 对象。以下是一些流行的：
> 
> ```
> using create(nrows, ncols, type) method or
> 
>     the similar constructor
> 
> Mat(nrows, ncols, type[, fill_value]) constructor. 
> ```

无论如何，第一个参数是行。我看它的方式是，即使我们确实创建了一个 1000 列的矩阵，它也至少有 1 行。它怎么可能有0行？

对不起，如果这是一个非常基本的问题。

更新：根据要求，这是完整的代码。

```
 #include <vector>
#include <boost/filesystem.hpp>
#include <opencv2/opencv.hpp>

using namespace std;
using namespace boost::filesystem;
using namespace cv;

//location of the training data
#define TRAINING_DATA_DIR "data/train/"
//location of the evaluation data
#define EVAL_DATA_DIR "data/eval/"

//See article on BoW model for details
Ptr<DescriptorMatcher> matcher = DescriptorMatcher::create("FlannBased");
Ptr<DescriptorExtractor> extractor = DescriptorExtractor::create("SURF");
Ptr<FeatureDetector> detector = FeatureDetector::create("SURF");

//See article on BoW model for details
int dictionarySize = 1000;
TermCriteria tc(CV_TERMCRIT_ITER, 10, 0.001);
int retries = 1;
int flags = KMEANS_PP_CENTERS;

//See article on BoW model for details
BOWKMeansTrainer bowTrainer(dictionarySize, tc, retries, flags);
//See article on BoW model for details
BOWImgDescriptorExtractor bowDE(extractor, matcher);

/**
 * \brief Recursively traverses a folder hierarchy. Extracts features from the training images and adds them to the bowTrainer.
 */
void extractTrainingVocabulary(const path& basepath) {
    for (directory_iterator iter = directory_iterator(basepath); iter
            != directory_iterator(); iter++) {
        directory_entry entry = *iter;

    if (is_directory(entry.path())) {

        cout << "Processing directory " << entry.path().string() << endl;
        extractTrainingVocabulary(entry.path());

    } else {

        path entryPath = entry.path();
        if (entryPath.extension() == ".jpg") {

            cout << "Processing file " << entryPath.string() << endl;
            Mat img = imread(entryPath.string());
            if (!img.empty()) {
                vector<KeyPoint> keypoints;
                detector->detect(img, keypoints);
                if (keypoints.empty()) {
                    cerr << "Warning: Could not find key points in image: "
                            << entryPath.string() << endl;
                } else {
                    Mat features;
                    extractor->compute(img, keypoints, features);
                    bowTrainer.add(features);
                }
            } else {
                cerr << "Warning: Could not read image: "
                        << entryPath.string() << endl;
            }

        }
    }
}
}

/**
 * \brief Recursively traverses a folder hierarchy. Creates a BoW descriptor for each image encountered.
 */
void extractBOWDescriptor(const path& basepath, Mat& descriptors, Mat& labels) {
    for (directory_iterator iter = directory_iterator(basepath); iter
            != directory_iterator(); iter++) {
        directory_entry entry = *iter;
        if (is_directory(entry.path())) {
            cout << "Processing directory " << entry.path().string() << endl;
            extractBOWDescriptor(entry.path(), descriptors, labels);
        } else {
            path entryPath = entry.path();
            if (entryPath.extension() == ".jpg") {
                cout << "Processing file " << entryPath.string() << endl;
                Mat img = imread(entryPath.string());
                if (!img.empty()) {
                    vector<KeyPoint> keypoints;
                    detector->detect(img, keypoints);
                    if (keypoints.empty()) {
                        cerr << "Warning: Could not find key points in image: "
                                << entryPath.string() << endl;
                    } else {
                        Mat bowDescriptor;
                        bowDE.compute(img, keypoints, bowDescriptor);
                        descriptors.push_back(bowDescriptor);
                        float label=atof(entryPath.filename().c_str());
                        labels.push_back(label);
                    }
                } else {
                    cerr << "Warning: Could not read image: "
                            << entryPath.string() << endl;
                }
            }
        }
    }
}

int main(int argc, char ** argv) {

cout<<"Creating dictionary..."<<endl;
extractTrainingVocabulary(path(TRAINING_DATA_DIR));
vector<Mat> descriptors = bowTrainer.getDescriptors(); //descriptors from training images
int count=0;
for(vector<Mat>::iterator iter=descriptors.begin();iter!=descriptors.end();iter++)
{
    count+=iter->rows;
}
cout<<"Clustering "<<count<<" features"<<endl;
Mat dictionary = bowTrainer.cluster();
bowDE.setVocabulary(dictionary);
cout<<"Processing training data..."<<endl;
Mat trainingData(0, dictionarySize, CV_32FC1);
Mat labels(0, 1, CV_32FC1);
extractBOWDescriptor(path(TRAINING_DATA_DIR), trainingData, labels);

NormalBayesClassifier classifier;
cout<<"Training classifier..."<<endl;

classifier.train(trainingData, labels);

cout<<"Processing evaluation data..."<<endl;
Mat evalData(0, dictionarySize, CV_32FC1);
Mat groundTruth(0, 1, CV_32FC1);
extractBOWDescriptor(path(EVAL_DATA_DIR), evalData, groundTruth);

cout<<"Evaluating classifier..."<<endl;
Mat results;
classifier.predict(evalData, &results);

double errorRate = (double) countNonZero(groundTruth - results) / evalData.rows;
        ;
cout << "Error rate: " << errorRate << endl;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T01:59:50.457

现在您已经发布了代码，这很有意义。这个 0 行向量被初始化为有 0 行，但它是增量创建的。

0 行矩阵被传递给`extractBOWDescriptor()`，它本身计算几个描述符并用于`cv::Mat.push_back()`向矩阵添加行。

它从 0 行开始，因为一开始我们没有描述符来填充矩阵。

# c# - 如何使用 Mono 的 mcs 编译和运行 csproj 文件？

> ID：13664441
> 
> 赞同：40
> 
> 时间：2012-12-01T22:34:30.567
> 
> 标签：c#, mono, gmcs

我是一个 Unix 人，需要尝试编译一些 C# 代码才能工作。我已经下载了 Mono for Mac 和 mcs 命令行工具。这个库附加了一个 csproj 文件，其中包含我需要编译的所有文件的 XML。

Mono/mcs 可以读取这个 csproj 文件并从中生成一个 DLL 吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-12-02T01:54:03.927

如果你不想使用 MonoDevelop 而想使用命令行，可以使用 xbuild。xbuild 是 MSBuild 的 Mono 等价物。

```
xbuild /p:Configuration=Release HelloWorld.csproj 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T22:36:47.373

最简单的方法是前往[monodevelop](http://monodevelop.com/)并下载他们的 IDE。它可以打开 Visual Studio 生成的项目文件。

现在您还可以使用 aptitude 的便利，如下所示：

```
sudo apt-get install monodevelop mono-gmcs 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-11-02T13:35:41.593

这个问题很旧，答案已被弃用。我按照以下步骤成功地从 csproj 生成和运行 DLL：

*   安装 dotnet：[https](https://dotnet.microsoft.com/download) ://dotnet.microsoft.com/download 。对于 linux，请按照以下步骤操作：[https ://docs.microsoft.com/en-us/dotnet/core/install/linux](https://docs.microsoft.com/en-us/dotnet/core/install/linux)
*   对于 ubuntu 和 osx，你应该安装 openssl`apt-get install openssl`

然后，用于`dotnet build YourProject.csproj`编译项目并`dotnet run YourProject.csproj`运行它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T21:00:03.693

对于 Ubuntu，可能还有其他基于 Debian 的发行版：

```
sudo apt-get install monodevelop mono-gmcs 
```

（`mono-gmcs`可能需要编译 .net 2.0 或 3.5 项目）

# jquery - 使用 PHP 变量作为自动完成源

> ID：13664443
> 
> 赞同：0
> 
> 时间：2012-12-01T22:34:55.487
> 
> 标签：jquery, jquery-ui, autocomplete

我已经尽可能地简化了问题，我觉得这应该可行。以下脚本控制自动完成功能并按预期工作（如果用户键入“t”，“test”将显示为建议的输入）。

```
<script type="text/javascript">
$(function() {
    var availableClients = ['test'];
    $("#addClient").autocomplete({
        source: availableClients,
    });
});
</script> 
```

但是，如果我设置 PHP 变量 $test = "'test'" 并将原始脚本中的 'test' 替换`<?php echo $test; ?>`为自动完成脚本，则不再有效。有没有另一种方法可以使用 PHP 变量作为自动完成源，或者我错过了什么？

编辑：这是其中包含 PHP 的脚本。

```
<script type="text/javascript">
$(function() {
    var availableClients = [<?php echo $test; ?>];
    $("#addClient").autocomplete({
        source: availableClients,
    });
});
</script> 
```

唯一相关的 PHP 代码就是这个。

```
$test = "'test'"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:45:20.860

问题可能是您在回显变量值时没有包含引号。尝试这个：

```
var availableClients = ['<?php echo $test; ?>']; 
```

事实证明，问题实际上是你在定义它`$test`之前没有定义`echo`它。这个：

```
$test = "'test'"; 
```

需要在此*之前*发生：

```
<script type="text/javascript">
$(function() {
    var availableClients = [<?php echo $test; ?>];
    $("#addClient").autocomplete({
        source: availableClients,
    });
});
</script> 
```

# c++ - 如何重复函数直到条件不会编译

> ID：13664444
> 
> 赞同：-3
> 
> 时间：2012-12-01T22:34:55.583
> 
> 标签：c++

我得到了代码：

```
void Grown()
          {
    if(!hero.getMoving()
    {
        SendAttack(int 110000001, int 1)
    }
         } 
```

如何重复函数（ if(!hero.getMoving() ）直到条件无法编译？我不想重复所有 void Grown()，只有 if(!hero.getMoving()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:37:34.950

就这样放一个循环

```
void Grown()
      {
while(!hero.getMoving())
{
    SendAttack(int 110000001, int 1)
}
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T22:41:51.140

将 if 更改为 while：

```
void Grown()
{
  while(!hero.getMoving())
  {
    SendAttack(int 110000001, int 1)
  }
} 
```

当您的英雄移动时，此循环将停止。

# matlab - .fig 加载时 MATLAB GUI 程序崩溃

> ID：13664449
> 
> 赞同：0
> 
> 时间：2012-12-01T22:35:18.030
> 
> 标签：matlab, user-interface, figure

我对我的 GUI .fig 文件进行了一些更新 - 重命名所有内容（其他人创建了初始 GUI）、移动内容并添加了几个对象。我不认为我尝试运行程序/GUI 而不产生错误，但是我上次尝试运行它时发生了崩溃（我不能 Shift+F5 退出 - 我必须关闭 MATLAB）说什么关于加载 .fig 文件的错误，该文件（可能）与 createfnc （或类似）相关联。我检查了 GUI 的 .m 文件，我认为所有的重命名都已经完成。

有没有其他人经历过这个？

有没有办法强制 GUI 的 .m 文件更新（即强制 .fig 上的更改到 .m）？

有人知道怎么修这个东西吗？

谢谢！

# c++ - c++ 矩阵使用迭代器插入值（作业）

> ID：13664453
> 
> 赞同：2
> 
> 时间：2012-12-01T22:36:05.207
> 
> 标签：c++, matrix, iterator

我对 C++ 很陌生，并且得到了一项仅使用 STL 容器制作矩阵的任务。我使用了向量（列）的向量（行）。我遇到的问题是在“写”操作中——我可能只使用基于迭代器的实现。问题很简单：它什么也没写。

我已经用一个填充了不同值的矩阵进行了测试，虽然迭代器最终恰好位于正确的位置，但它并没有改变值。

这是我的代码：

```
void write(matrix mat, int row, int col, int input)
{
    assert(row>=0 && col>=0);
    assert(row<=mat.R && col<=mat.C);

    //I set up the iterators.
    vector<vector<int> >::iterator rowit;
    vector<int>::iterator colit;
    rowit = mat.rows.begin();

    //I go to the row.
    for(int i = 0; i<row-1; ++i)
    {   
        ++rowit;
    }

    colit = rowit->begin();

    //I go to the column.
    for(int j = 0; j<col-1; ++j)
    {
        ++colit;
    }

    *colit = input; //Does nothing.
} 
```

我在看什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:41:57.127

`matrix mat`是值参数，它复制矩阵，因此您正在写入副本。

您应该通过引用传递矩阵，例如`matrix & mat`.

* * *

**但是等等...**您每次都将矩阵作为第一个参数传递，这是一个不好的迹象！

这通常表明应该将参数转换为可以在其上运行方法的对象；这样，您根本不需要传递参数。`Matrix`所以，改为创建一个类。

* * *

请注意，有[std::vector::operator[]](http://en.cppreference.com/w/cpp/container/vector/operator_at)。

所以，你可以这样做：

```
void write(matrix & mat, int row, int col, int input)
{
    assert(row>=0 && col>=0);
    assert(row<=mat.R && col<=mat.C);

    mat[row][col] = input;
} 
```

# qt - 为什么不调用 MyModel::data()（继承 QSqlQueryModel）

> ID：13664455
> 
> 赞同：3
> 
> 时间：2012-12-01T22:36:30.400
> 
> 标签：qt, view, model, qtableview, model-view

嗨我不知道为什么我的`data()`函数在填充 QTableView 时从未被调用

我继承了 QSqlQueryModel。标题是这样的：

```
class TicketModel : public QSqlQueryModel
{
    Q_OBJECT
public:
    explicit TicketModel(QObject *parent = 0);

    QVariant data(const QModelIndex &index, int role);
    QVariant headerData(int section, Qt::Orientation orientation, int role) const;

}; 
```

在主窗口中，我将模型设置为表格

```
TicketModel *model = new TicketModel();
QSortFilterProxyModel *proxyModel = new QSortFilterProxyModel(this);
proxyModel->setSourceModel(model);

QSqlQuery *query = _tf->search(1); 
model->setQuery(*query); 

_ui->dashTable->setModel(proxyModel);    // <<<<<<<<<<<<<< I setting model here too, didn't work
_ui->dashTable->setSortingEnabled(true);              
_ui->dashTable->horizontalHeader()->setVisible(true);  
_ui->dashTable->setSelectionBehavior(QAbstractItemView::SelectRows); 
```

被`TicketModel::headerData(...)`调用，但`TicketModel::data(...)`在创建表时从不调用。为什么？我怎样才能让它被调用？

我希望我只是忽略了一些简单的事情，但我已经尝试了几个小时才弄清楚。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T23:25:01.950

你签名错了。你需要一个常量。

QVariant 数据( const QModelIndex & index, int role = Qt::DisplayRole ) const

# xslt - 使用 XSLT 验证 html 样式的表数据

> ID：13664456
> 
> 赞同：1
> 
> 时间：2012-12-01T22:36:30.400
> 
> 标签：xslt, html-table, xslt-2.0

我需要能够使用 html 样式的表格数据检查 xml，以确保它是“矩形”的。例如这是矩形（2x2）

```
<table>
  <tr>
    <td>Foo</td>
    <td>Bar</td>
  </tr>
  <tr>
    <td>Baz</td>
    <td>Qux</td>
  </tr>
</table> 
```

这不是

```
<table>
  <tr>
    <td>Foo</td>
    <td>Bar</td>
  </tr>
  <tr>
    <td>Baz</td>
  </tr>
</table> 
```

这因行和列跨度以及我需要接受两种标记样式的事实而变得复杂，其中跨单元格包含为空`td` **或**省略跨单元格。

```
<!-- good (3x2), spanned cells included -->
<table>
  <tr>
    <td colspan="2">Foo</td>
    <td/>
    <td rowspan="2">Bar</td>
  </tr>
  <tr>
    <td>Baz</td>
    <td>Qux</td>
    <td/>
  </tr>
</table>

<!-- also good (3x2), spanned cells omitted -->
<table>
  <tr>
    <td colspan="2">Foo</td>
    <td rowspan="2">Bar</td>
  </tr>
  <tr>
    <td>Baz</td>
    <td>Qux</td>
  </tr>
</table> 
```

这里有一堆坏表的例子，如何处理它们是模棱两可的

```
<!-- bad, looks like spanned cells are included but more cells in row 1 than 2 -->
<table>
  <tr>
    <td colspan="2">Foo</td>
    <td/>
    <td rowspan="2">Bar</td>
    <td>BAD</td>
  </tr>
  <tr>
    <td>Baz</td>
    <td>Qux</td>
    <td/>
  </tr>
</table>

<!-- bad, looks like spanned cells are omitted but more cells in row 1 than 2 -->
<table>
  <tr>
    <td colspan="2">Foo</td>
    <td rowspan="2">Bar</td>
    <td>BAD</td>
  </tr>
  <tr>
    <td>Baz</td>
    <td>Qux</td>
  </tr>
</table>

<!-- bad, can't tell if spanned cells are included or omitted -->
<table>
  <tr>
    <td colspan="2">Foo</td>
    <td rowspan="2">Bar</td>
  </tr>
  <tr>
    <td>Baz</td>
    <td>Qux</td>
    <td/>
  </tr>
</table>

<!-- bad, looks like spanned cells are omitted but a non-emtpy cell is overspanned -->
<table>
  <tr>
    <td colspan="2">Foo</td>
    <td rowspan="2">Bar</td>
  </tr>
  <tr>
    <td>Baz</td>
    <td>Qux</td>
    <td>BAD</td>
  </tr>
</table> 
```

对于这个问题，我已经有了一个有效的 XSLT 2.0 解决方案，其中涉及将数据规范化为“包含的跨单元格”样式然后进行验证，但是，我的解决方案很麻烦，并且对于面积超过 1000 个单元格的表格开始表现不佳。我的规范化和验证例程涉及按顺序迭代单元格并传递应该由跨度创建的单元格参数，并在我在表格中传递它们的坐标时插入它们。我对他们中的任何一个都不满意。

我正在寻找有关实现此验证的更聪明方法的建议，希望在大型表上具有更好的性能配置文件。为了简单起见，我需要考虑但从示例中省略，它们可以在任何答案中包含`th`或忽略`td`。`th`我不检查`thead`,`tbody`和/或`tfoot`是否具有相同的宽度，这也可以包含或省略。我目前正在使用 XSLT 2.0，但如果 3.0 解决方案明显优于 2.0 中实现的解决方案，我会对它们感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:47:19.403

我认为这类问题不适合 XSLT——尤其是当您必须处理非常大的表时。

我建议使用程序语言开发一个解决方案——也许使用 XSLT 对 XML 进行预处理或后处理。

# python - 在python中按给定顺序排列列表以转储到json中

> ID：13664458
> 
> 赞同：2
> 
> 时间：2012-12-01T22:36:48.387
> 
> 标签：python, json, sorting

我有列表中的项目位置错误的列表。我想以定义的方式重新排序它们并写入文件以供将来使用。

**蟒蛇2.7.3**

我有的：

```
data_in = [..., [a1, a4, a0, a2, a3], ...] # where a0..a4 - some values
order_key = [2,0,3,4,1] # "2" means: in place with index 0 shall be item with index 2 
```

结果应该是：

```
file.jsons:
prefix [ ... ] \n
prefix [a0, a1, a2, a3, a4] \n
prefix [ ... ] \n 
```

我以这种“天真”的方式做到这一点：

```
import json
from itertools import imap
formatter = "prefix {} \n".format
with open('file.jsons') as f:
    f.writelines( imap(formatter, imap(json.dumps,([row[i] for i in order_key] for row in data_in ))))
    # ([row[i] for i in order_key] for row in data_in ) - generator: yields arranged rows
    # imap(json.dumps, ...) - generator: dumps lists into json strings
    # imap(formatter, ... ) - generator: formats strings in proper way
    # f.writelines( .. ) - consumes and writes to file 
```

我有一些问题：

*   这是重新排列的正确方法吗？转储？
*   有没有更快的方法？（我需要尽快做到这一点）
*   我应该使用 json.dumps()/json.reads() 还是 str()/eval() - 我知道这是一种非常糟糕的做法，但我确信自己是一个安全的数据提供者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:16:10.903

在我看来，你在这里所拥有的东西实际上并不是不合理的。从风格的角度来看，提高可读性的几个中间步骤会有所帮助（为什么要关注单行解决方案？）。如果文件仅由您的程序使用，您还可以查看`pickle`and模块。`shelve`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T23:48:28.270

直升机，

我不是特别了解json。但是您的代码在我看来是精心设计的。
如果**order_key = [2,0,3,4,1]**中的顺序是稳定的，它认为使用补充函数可能会更快：

```
import json
from itertools import imap
# order_key = [2,0,3,4,1] 

formatter = "prefix {} \n".format

def reorder(x):
    return (x[2],x[0],x[3],x[4],x[1])

with open('file.jsons') as f:
    f.writelines( imap(formatter,
                       imap(json.dumps,
                            (reorder[row) for row in data_in )))) 
```

我在您的问题中没有看到任何可批评的地方，所以我反对反对票

# 编辑

```
order_key = [2,0,3,4,1]

exec('def reorder(x):\n    return (%s)'
     % ' , '.join( 'x[%d]' % i for i in (order_key)))

cn = (111,444 ,000,222,333)
cv = ['a1', 'a4', 'a0', 'a2', 'a3']
cx = ('one','four','zero','two','three')

print map(reorder,(cn,cv,cx)) 
```

结果

```
[(0, 111, 222, 333, 444), ('a0', 'a1', 'a2', 'a3', 'a4'),('zero', 'one', 'second', 'third', 'four')] 
```

# java - 我是否需要将我的 Java 应用程序转换为小程序才能将其发布到网页上？

> ID：13664459
> 
> 赞同：1
> 
> 时间：2012-12-01T22:37:11.470
> 
> 标签：java, lwjgl

是否可以在网站上发布 Java 应用程序而不将其转换为小程序？我一直在努力制作游戏，我想分享它。我的游戏使用轻量级 Java 游戏库，因此很难转换为小程序。它目前是一个应用程序，我不想重新开始使它成为一个小程序......

如果我确实需要将其转换为小程序，我还能使用大部分代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T22:44:39.030

**如果将其部署为 Java Web Start，则不需要进行太多更改。**

我强烈建议您[查看此表](http://mindprod.com/jgloss/javawebstart.html#APPLETSVSJWS)，该表清楚地显示了 Java 应用程序、Java Applet 和 Java Web Start 应用程序之间的差异。

# php - Wordpress 中带有 If / Else 语句的多个 $GetPosts？

> ID：13664466
> 
> 赞同：0
> 
> 时间：2012-12-01T22:37:54.543
> 
> 标签：php, if-statement, wordpress

我在 WordPress 中有这个插件，我已经进行了大量修改。该插件的目的最初是显示您告诉它的任何类别的缩略图。截至目前，我已经完成的远不止这些。但无论如何，这是插件的简码..

```
[categorythumbnaillist 7] 
```

7 当然是类别 ID。该插件会获取您告诉它的任何类别的帖子（即 7、3、4），并使用我制作的以下代码对它们进行排序：

```
$args=array(
       'showposts'=>5,
       'category'=> $listCatId[1],
       'orderby'=> $categoryThumbnailList_OrderType,
       'order'=> $categoryThumbnailList_Order

       );
      $myposts = get_posts( $args); 
```

现在，我希望插件仅在其中包含“新闻”标签时才显示帖子。所以我做了这样的新闻标签：

```
$args=array(
      'tag' => 'news',
      'showposts'=>5,
      'category'=> $listCatId[1],
      'orderby'=> $categoryThumbnailList_OrderType,
      'order'=> $categoryThumbnailList_Order

       );
       $myposts = get_posts( $args); 
```

如果其中有“新闻”标签，这将成功显示 5 个帖子。但问题来了……

我将在一页上多次使用这个插件。因此，当我使用上面列出的具有不同类别 ID 的短代码时，插件不会显示相应类别的帖子，因为除了新闻类别之外，没有任何帖子标记为“新闻”。:(

要解决此问题并使插件仅显示带有“新闻”标签的新闻帖子，同时仍能正确显示其他类别的帖子……我尝试设置一个简单的 if / else 语句……像这样：

```
$args=array(
      'tag' => 'news',
      'showposts'=>5,
      'category'=> $listCatId[1],
      'orderby'=> $categoryThumbnailList_OrderType,
      'order'=> $categoryThumbnailList_Order
       );

$targs=array(
  'showposts'=>5,
  'category'=> $listCatId[1],
  'orderby'=> $categoryThumbnailList_OrderType,
  'order'=> $categoryThumbnailList_Order

    );

if ( tag == true ) {
$myposts = get_posts( $args);
}

else {
$myposts = get_posts( $targs);
} 
```

这成功地过滤了新闻帖子，只显示其中带有“新闻”标签的帖子。但是它没有得到任何其他类别的帖子。:(

如果有人知道我将如何解决此 if / else 语句或更改代码以使插件仅显示带有“新闻”标签的新闻帖子，同时仍能正确显示其他类别的帖子，请填写我！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:45:14.073

这看起来不对 - 看起来您缺少一个`$`：

```
if ( tag == true ) { 
```

但我认为在标签的短代码中添加另一个参数会更灵活，如果存在，请使用它。像这样的东西：

```
$args = array(
    'showposts' => 5,
    'category'  => $listCatId[1],
    'orderby'   => $categoryThumbnailList_OrderType,
    'order'     => $categoryThumbnailList_Order
);

if ($tag) { // tag from your shortcode
    $args['tag'] = $tag;
}

$myposts = get_posts( $args); 
```

您可能需要开始命名您的简码参数。详情请查看[codex](http://codex.wordpress.org/Shortcode_API)。

# html - 格式化 HTML 列表以添加可变大小的空间

> ID：13664472
> 
> 赞同：1
> 
> 时间：2012-12-01T22:38:41.263
> 
> 标签：html, css

有没有办法在列表中放置一个“制表符”符号，所以不同长度的单词将被格式化为表格：

例如

```
<li>Word1 <something> description111111111111</li>
<li>Word2222222 <something> description</li> 
```

最后它看起来像这样：

```
Word1            description11111111111
Word2222222      description 
```

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:44:33.557

使用 SPAN 标记，然后将其绝对定位在 LI 标记内：

```
 <li>Column 1<span>Column 2</span></li> 
```

CSS

```
li { position: relative } 
li span { position: absolute; left: 100px } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T22:41:27.270

查看[这篇文章的答案，](https://stackoverflow.com/a/1571662/96505)其中说：

> 使用 CSS 更简洁。酌情尝试 padding-left:5em 或 margin-left:5em 。

# git - Git 作为没有版本控制的仓库？

> ID：13664474
> 
> 赞同：0
> 
> 时间：2012-12-01T22:39:12.930
> 
> 标签：git, backup, 7zip

好吧，这里有一个奇怪的！

我有一个漂亮的小 32gig 拇指驱动器，我把它放在我的钱包里，里面包含我在计算机上生活所需的所有最新文件。它包含我所有的 BASH 命令参考，从魔方算法到我用于参考和数字书籍的 PDF 以及我曾经编写过的所有软件。朋友需要一下子修好电脑吗？砰！我用左口袋里的软件把它盖住了。甜吗？

好吧，我想跟踪我对 repo 所做的每一次更改，并对其进行持续备份。Git 在这方面工作得很好，除了它复制了我所有的文件并大幅增加了 repo 的大小！这不是一个真正的大问题，但它很烦人。我知道 Git 用于软件存储库，我对此很满意（这就是我主要使用它的原因）

所以我在想，作为一个 git nub，我能否以某种方式使用 git 记录我对 repo 所做的更改，但不保留每个实际更改的运行副本，而只保留 HEAD 版本？因此，当我执行推/拉操作时，将使用我的所有评论备份存储库，但只有闪存驱动器中活动目录树中的内容会保存在 Git 存储库中？所以不会有重复的二进制条目，如果我删除了一个 .exe 文件，它会记录它但永远摆脱该文件？

也许有更好的方法可以在不使用 git 的情况下做到这一点？例如，我使用 7ZIP 手动压缩和备份，然后将它们保存到云服务器以实现备份冗余。这比简单的：时间密集，更烦人：

```
git add .
git commit -m "changes"
(git gc)
git push 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T22:44:47.963

[git-annex](http://git-annex.branchable.com/)做你想做的事。它使用 git-plumbing 进行版本控制，但在索引和存储库中没有副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T23:05:19.233

如果我对您的理解正确，您需要记录被触摸的文件、时间以及更改内容的人工书面描述……但您不想要实际的更改，只需要最新的。

手动编写更改文件（或者可能编写一个小脚本来获取时间戳和更改文件）并使用 rsync 保持文件同步。简单的。

但实际上，您将需要一个完整的更改存储库（如果您现在不想要它，您将在六个月后想要它），而不是在您的闪存驱动器上。我不确定你为什么想要你在闪存驱动器上所做的更改日志，所以我会放弃这个要求。相反，我建议在具有完整 git 存储库和完整备份的真实磁盘上进行开发。然后将文件部署到您的闪存驱动器。有几种方法可以做到这一点。

一种是使用[rsync](https://rsync.samba.org/)。它真的很擅长并且很容易获得。

或者在您的闪存驱动器上使用`git clone --depth 0 <repo>`. 这样你仍然可以拉取、区分和提交。你不会有完整的日志，但我不明白你为什么需要它在你的闪存驱动器上。你不能从这个存储库推送，但你仍然可以做一个 diff 来查看本地更改并创建一个补丁文件。无论如何，您不应该在闪存驱动器上进行开发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T22:42:09.847

听起来你想要一个集中的源代码控制系统，比如 Subversion。Git 的全部意义在于在本地拥有一个存储库。使用 Subversion，您将拥有一个中央副本，并且在您的拇指驱动器上只携带一个工作副本。

中央副本仍然有完整的历史记录，尽管我认为从 Subversion 中删除旧提交可能比从 Git 中更容易。

# android - 3个选项的统计帮助

> ID：13664475
> 
> 赞同：0
> 
> 时间：2012-12-01T22:39:15.083
> 
> 标签：android, statistics

我正在开发一个 Android 应用程序，在该应用程序中，有时会要求用户输入是否有帮助。

他们的选项是“是”、“否”和“不知道”；或者他们可以选择忽略它。

这是针对一个日期范围内的多个“事物”。

日期范围的摘要视图显示为每个“某事”输入的“是”、“否”和“不知道”的百分比。

我还将“总体有效性”显示为“是”输入的百分比，我意识到这是不正确的。

我正在考虑将其更改为“是”减去“否”，但这并不能解决“不知道”的输入。

我将如何处理数据以使“总体有效性”代表所有 3 个数据输入？

那么，对于一个“是”为 25%、“否”为 25%、“不知道”为 50% 的“某事”，这是否是 0% 的“整体有效性”？或者“不知道”会影响这个数字吗？

除此之外，除了 Pie 之外，哪种图表类型最能显示所有 3 个数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T22:49:33.340

我会说“不知道”与根本没有答案是一样的，所以我会将整体有效性（称为 OE）计算为`OE = yes / (yes + no)`.

# iphone - 获取参与者并从游戏中心比赛中转

> ID：13664476
> 
> 赞同：0
> 
> 时间：2012-12-01T22:39:21.573
> 
> 标签：iphone, ios, xcode, game-center

我想在我的游戏菜单中查看我目前正在参加的比赛。我比赛中的所有比赛都有 2 名球员，你和你的对手。我没有通过开发人员指南完成它。

当我的玩家通过游戏中心进行身份验证时，我有一个当前加载的所有比赛的数组：

```
[GKTurnBasedMatch loadMatchesWithCompletionHandler:^(NSArray *matches, NSError *error) {
    if (matches) {         
        thisMatch = matches[0];
    }
} 
```

例如，我将如何获得`matches[0]`该游戏中的对手名称以及轮到谁，您还是另一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T05:17:48.500

`thisMatch.currentParticipant`会给你`GKTurnBasedParticipant`下一个轮到谁。要获取对手的名字，请遍历`thisMatch.participants`并找到与`playerID`您的 ID 不相等的那个。

# c# - int[] 到字符串 c#

> ID：13664478
> 
> 赞同：0
> 
> 时间：2012-12-01T22:39:34.047
> 
> 标签：c#, c++

嗨，我正在用 C# 开发客户端应用程序，服务器是用 C++ 编写的

服务器使用：

```
inline void StrToInts(int *pInts, int Num, const char *pStr)
{
  int Index = 0;
  while(Num)
  {
    char aBuf[4] = {0,0,0,0};
    for(int c = 0; c < 4 && pStr[Index]; c++, Index++)
      aBuf[c] = pStr[Index];
    *pInts = ((aBuf[0]+128)<<24)|((aBuf[1]+128)<<16)|((aBuf[2]+128)<<8)|(aBuf[3]+128);
    pInts++;
    Num--;
  }

  // null terminate
  pInts[-1] &= 0xffffff00;
} 
```

将字符串转换为 int[]

在我的 C# 客户端中，我收到：

```
int[4] { -14240, -12938, -16988, -8832 } 
```

如何将数组转换回字符串？我不想使用不安全的代码（例如指针） 我的任何尝试都导致了不可读的字符串。

编辑：这是我的方法之一：

```
private string IntsToString(int[] ints)
{
  StringBuilder s = new StringBuilder();
  for (int i = 0; i < ints.Length; i++)
  {
    byte[] bytes = BitConverter.GetBytes(ints[i]);
    for (int j = 0; j < bytes.Length; j++)
      s.Append((char)(bytes[j] & 0x7F));
  }
  return s.ToString();
} 
```

我知道我需要注意字节顺序，但是由于服务器也在我的本地机器和服务器上运行，我认为这不是问题。
我的另一个尝试是使用具有显式布局和相同 FieldOffset 的整数和字符的结构，但它也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:44:43.690

您可以通过这种方式创建逗号分隔的字符串：

```
string str = String.Join(", ", intArray.Select(x => x.ToString()).ToArray()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T23:12:04.027

也许尝试类似（使用 LINQ）：

```
int[] fromServer = { -14240, -12938, -16988, -8832, };

string reconstructedStr = new string(fromServer.SelectMany(BitConverter.GetBytes).Select(b => (char)(b - 128)).ToArray()); 
```

未经测试，但有一些东西可以开始。不知道减法`128`是否正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T23:01:15.853

```
 var ints = new[] {-14240, -12938, -16988, -8832};
    var result = string.Join("-", ints.Select(i => BitConverter.ToString(BitConverter.GetBytes(i))));
    Console.WriteLine(result); //60-C8-FF-FF-76-CD-FF-FF-A4-BD-FF-FF-80-DD-FF-FF 
```

`BitConverter.ToString`可以在这里用其他东西代替，这取决于您稍后将如何解析字符串。

# python - 如何在另一个 AWS 实例上共享相同的模型

> ID：13664482
> 
> 赞同：0
> 
> 时间：2012-12-01T22:40:42.963
> 
> 标签：python, django

我想使用 Django 编写我的第一个 Python 程序。该网站将托管在亚马逊上。但是，我的 API 将使用 Django 和 Piston 坐在另一个实例上。我不想在两台服务器上复制我的模型。我怎样才能让 API 与主 Django 实例共享相同的模型，或者我应该吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T23:20:40.557

您可以创建一个小型 django 应用程序（将包含模型定义和逻辑）作为 python 模块并将其安装在两个服务器/应用程序上，而不是两次编写相同的数据模型。

# c++ - 将一串十六进制存储到一个字符中？

> ID：13664484
> 
> 赞同：1
> 
> 时间：2012-12-01T22:40:56.190
> 
> 标签：c++, ascii, cout

所以我有一个字符串，其中有一个十六进制值。例如，我的字符串可能有

```
string a = "0x4D"; 
```

是否可以将**0x4D**分配给**char**？因为我知道如果我有

`char c = 0x4D` 然后我可以打印出它的 ASCII 符号，即**M**。

是否可以将**“0x4D”**存储到一个字符中，以便我可以打印出它的 ascii 符号？如果有人有任何提示，将不胜感激！如果有更好的方法可以做到这一点，请告诉我！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:45:23.740

您可以使用`strtol`将字符串转换为数字。然后，您可以打印此号码或用它做其他您喜欢的事情。

哦，等等，你给它贴上了 C++ 的标签，而且`strtol`是非常 C 风格的。在 C++ 中，您可以使用字符串流，并从中提取一个数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T22:48:58.337

您可以使用`std::stoi`将字符串转换为整数（从`0x`前缀自动检测基数）：

```
std::string str = "0x4D";
char c = static_cast<char>(std::stoi(str));
std::cout << c << std::endl; 
```

但是，这不能保证为您提供该值的 ASCII 字符。仅在这个简单的代码中就出现了字符集之间的各种转换。例如，`char`字符串文字中的 s使用实现定义的*执行字符集中*`"0x4D"`的相应值进行初始化。打印的字符也取决于显示它的媒体的解释。

 *您能做的最好的事情是提供从 ASCII 值到字符的映射。您可以使用索引为 ASCII 值且元素为相应字符的数组来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T22:56:18.000

这是一个基于以下的解决方案`std::stringstream`：

```
std::istringstream iss ("0x4D");
iss.flags(std::ios::hex);
int i;
iss >> i;

std::cout << "[" << (char)i << "]" << std::endl;   //--> prints "[M]" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T22:54:58.603

按照 Bas 的建议使用字符串流：

```
int x;
string s = "0x10";
stringstream ss;
ss << hex << s;
ss >> x; 
```

但我认为这是一种浪费的方式。*

# linux - 将文本添加到行的中间

> ID：13664497
> 
> 赞同：2
> 
> 时间：2012-12-01T22:42:17.757
> 
> 标签：linux, shell, sed, awk, sh

我需要使用 sed 或 awk 将文本添加到一行文本中的几个位置的帮助。这是我写到 test.txt 的 df 命令的输出

```
fsu:/dev/sda3             34407336   3348680  29282672  11% /
fsu:/dev/sda1               124427     11578    106425  10% /boot
fsu:tmpfs                  4086720         0   4086720   0% /dev/shm
fsu:/dev/sdb1             20635732    725376  18862116   4% /cmdb
fsu:/dev/sdc              51606140   2531372  46453328   6% /data 
```

我想让 test.txt 看起来像这样：

```
fsu:/dev/sda3 T: 34407336 U: 3348680  A: 29282672  P: 11% M: /
fsu:/dev/sda1 T: 124427 U: 11578 A: 106425 P: 10% M: /boot
fsu:tmpfs T: 4086720 U: 0 A: 4086720 P: 0% M: /dev/shm
fsu:/dev/sdb1 T: 20635732 U: 725376 A: 18862116 P: 4% M: /cmdb
fsu:/dev/sdc T: 51606140 U: 2531372 A:46453328 P: 6% M: /data 
```

我不知道如何在数字前面添加字母和冒号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T22:49:04.333

使用`awk`：

```
awk '{print $1, "T:", $2, "U:", $3, "A:", $4, "P:", $5, "M:", $6}' file 
```

输出：

```
fsu:/dev/sda3 T: 34407336 U: 3348680 A: 29282672 P: 11% M: /
fsu:/dev/sda1 T: 124427 U: 11578 A: 106425 P: 10% M: /boot
fsu:tmpfs T: 4086720 U: 0 A: 4086720 P: 0% M: /dev/shm
fsu:/dev/sdb1 T: 20635732 U: 725376 A: 18862116 P: 4% M: /cmdb
fsu:/dev/sdc T: 51606140 U: 2531372 A: 46453328 P: 6% M: /data 
```

`column -t`如果您希望列很好地对齐，请通过管道。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T22:49:12.173

这听起来像是一份工作`awk`：

```
awk '{ printf "%s T: %s U: %s A: %s P: %s M: %s\n", $1, $2, $3, $4, $5, $6 }' file 
```

结果：

```
fsu:/dev/sda3 T: 34407336 U: 3348680 A: 29282672 P: 11% M: /
fsu:/dev/sda1 T: 124427 U: 11578 A: 106425 P: 10% M: /boot
fsu:tmpfs T: 4086720 U: 0 A: 4086720 P: 0% M: /dev/shm
fsu:/dev/sdb1 T: 20635732 U: 725376 A: 18862116 P: 4% M: /cmdb
fsu:/dev/sdc T: 51606140 U: 2531372 A: 46453328 P: 6% M: /data 
```

# javascript - 如何在 Knockout 中使用下拉列表进行过滤

> ID：13664499
> 
> 赞同：1
> 
> 时间：2012-12-01T22:42:31.780
> 
> 标签：javascript, jquery, knockout.js

我刚刚开始使用 Knockout，我想通过从下拉列表中选择一个项目来过滤我在 UI 中显示的数据。到目前为止，我还无法从下拉列表中获取选定的值，然后我需要根据该值实际过滤显示的数据。到目前为止，这是我的代码：

```
 @model Models.Fixture

@{
    ViewBag.Title = "Fixtures";
    Layout = "~/Areas/Development/Views/Shared/_Layout.cshtml";
}
@Scripts.Render("~/bundles/jqueryval")
<script type="text/javascript" src="@Url.Content("~/Scripts/knockout-2.1.0.js")"></script>
<script type="text/javascript">

    function FixturesViewModel() {
            var self = this;
            var baseUri = '@ViewBag.ApiUrl';
            self.fixtures = ko.observableArray();
            self.teams = ko.observableArray();

            self.update = function (fixture) {

                $.ajax({ type: "PUT", url: baseUri + '/' + fixture.Id, data: fixture });
            };

            self.sortByAwayTeamScore = function () {
                this.fixtures.sort(function(a, b) 
                { return a.AwayTeamScore < b.AwayTeamScore ? -1 : 1; });
            };

            self.select = function (team) {

            };

            $.getJSON("/api/fixture", self.fixtures);
            $.getJSON("/api/team", self.teams);
    }

    $(document).ready(function () {
        ko.applyBindings(new FixturesViewModel());
    }); 

  </script>

<div class="content">
    <div>
        <table><tr><td><select data-bind="options: teams, optionsText: 'TeamName', optionsCaption: 'Select...', optionsValue: 'TeamId', click: $root.select"> </select></td></tr></table>
        <table class="details ui-widget-content">
            <thead>
                <tr><td>FixtureId</td><td>Season</td><td>Week</td><td>AwayTeam</td><td><a id="header" data-bind='click: sortByAwayTeamScore'>AwayTeamScore</a></td><td>HomeTeam</td><td>HomeTeamScore</td></tr>
            </thead>    
            <tbody data-bind="foreach: fixtures">
                <tr>
                    <td><span data-bind="text: $data.Id"></span></td>
                    <td><span data-bind="text: $data.Season"></span></td>
                    <td><span data-bind="text: $data.Week"></span></td>
                    <td><span data-bind="text: $data.AwayTeamName"></span></td>
                    <td><input type="text" data-bind="value: $data.AwayTeamScore"/></td>
                    <td><span data-bind="text: $data.HomeTeamName"></span></td>
                    <td><input type="text" data-bind="value: $data.HomeTeamScore"/></td>
                    <td><input type="button" value="Update" data-bind="click: $root.update"/></td>
                </tr>
            </tbody>
        </table>
    </div>
</div> 
```

编辑：想通了：

```
 <script type="text/javascript">

function FixturesViewModel() {
        var self = this;
        var baseUri = '@ViewBag.ApiUrl';
        self.fixtures = ko.observableArray();

        self.teams = ko.observableArray();
        self.TeamName = ko.observable('');

        self.filteredItems = ko.computed(function () {

            var TeamName = self.TeamName();
                if (!TeamName || TeamName == "None") {

                            return self.fixtures();
                        } else {
                            return ko.utils.arrayFilter(self.fixtures(), function (i) {
                                return i.AwayTeamName == TeamName;
                            });
                }
        });

        self.update = function (fixture) {
            $.ajax({ type: "PUT", url: baseUri + '/' + fixture.Id, data: fixture });
        };

        self.sortByAwayTeamScore = function () {
            this.fixtures.sort(function(a, b) 
            { return a.AwayTeamScore < b.AwayTeamScore ? -1 : 1; });
        };

        $.getJSON("/api/fixture", self.fixtures);
        $.getJSON("/api/team", self.teams);
}

$(document).ready(function () {
    ko.applyBindings(new FixturesViewModel());
}); 
```

```
<select data-bind="options: teams, optionsText: 'TeamName', optionsCaption: 'Select...', optionsValue: 'TeamName', value:TeamName"> </select> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T23:00:08.020

剔除中的过滤通常使用[计算的 observable](http://knockoutjs.com/documentation/computedObservables.html)完成。这是一个基本的 ViewModel，它可以根据类型的下拉列表进行过滤（包括“无”的过滤选项）。

```
var ViewModel = function(data) {
    var self = this;
    self.filters = ko.observableArray(data.filters);
    self.filter = ko.observable('');
    self.items = ko.observableArray(data.items);
    self.filteredItems = ko.computed(function() {
        var filter = self.filter();
        if (!filter || filter == "None") {
            return self.items();
        } else {
            return ko.utils.arrayFilter(self.items(), function(i) {
                return i.type == filter;
            });
        }
    });
}; 
```

这是[小提琴](http://jsfiddle.net/tyrsius/DJGxC/)中的代码，因此您可以使用它。

# facebook - Facebook Graph API：按地点获取事件

> ID：13664500
> 
> 赞同：8
> 
> 时间：2012-12-01T22:42:54.617
> 
> 标签：facebook, facebook-graph-api, facebook-fql

有没有办法查询特定**场地**的所有活动？我注意到没有这样的实体 Venue - 它是事件对象内部的结构。

假设没有，您如何看待以下解决方案？

1.  查询会场附近的所有事件（我得到了会场坐标）
2.  过滤所有与 Venue ID 不匹配的事件。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T10:50:24.343

不幸的是，你是对的。唯一的方法是按场地过滤所有事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:15:21.450

截至目前，还没有通过纯 SQL 的方法。跟踪所有事件会变得非常难看，并且不能保证你得到了每一个事件。可能会有一个 Facebook 用户邀请他的 30 个最好的朋友参加生日聚会，尽管我认为这并不令人担心。

# javascript - 如何确保来自我的 Rails 视图的请求来自我的 Rails 服务器？

> ID：13664502
> 
> 赞同：0
> 
> 时间：2012-12-01T22:43:06.713
> 
> 标签：javascript, jquery, ruby-on-rails

我正在深入研究 Ruby on Rails 并构建一个用户必须回答问题的网络游戏。我正在浏览器中用 Javascript 处理所有答案验证逻辑，这样我的服务器就不必这样做了。当我的 javascript 代码验证答案是否正确时，我的 Javascript 代码将向我的 Rails 服务器发送一个请求，让它知道用户使用类似...

```
$.ajax({
  type: 'POST',
  url: url,
  data: data,
  success: success,
  dataType: dataType
}); 
```

由于任何人都可以使用 curl 之类的工具来作弊并发送类似的请求，我如何确保请求来自我的 Rails 视图中的 javascript？

非常感谢您的智慧！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:45:59.587

Rails 默认在表单中使用 CSRF 标签来阻止来自外部源的请求。[阅读此](http://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf)内容以获取有关跨站点请求伪造的更多信息。

# html - 如何使单选按钮位于标签内并在它们旁边居中文本？

> ID：13664505
> 
> 赞同：1
> 
> 时间：2012-12-01T22:43:44.840
> 
> 标签：html, css, alignment

# [小提琴](http://jsfiddle.net/mnpenner/uyHYW/1/)

```
* {
    font-family:sans-serif;
}
#quote_form table {
    border-collapse: collapse;
}
#quote_form td, #quote_form th {
    padding: 0;
    margin: 0;
}
#quote_form fieldset>label {
    display: block;
    font-weight: bold;
    margin-top: 7px;
}

#quote_form input {
    height: 16px;
    padding: 2px;
}
#quote_form select {
    height: 22px;
    padding: 2px;
}

#quote_form td>label {
    font-size: .9em;
}
#quote_form td {
    padding-right: 3px;
}
#quote_form td>input {
    width: 200px;
}
#quote_form .required {
    color: red;
}
#quote_form input {
    font-family: sans-serif;
}
#quote_form fieldset>input {
    width: 500px;
}
#quote_form fieldset>select {
    width:  504px;
}
#quote_form fieldset {
    border: 1px solid silver;
    padding: 10px;
}
#quote_form legend {
    margin-left: 15px;
    padding: 2px;
    font-weight: bold;
}
#quote_form .calendar {
    width: 80px;
}
#quote_form .datetime td {
    padding: 0;
}
#quote_form .datetime .date {
    padding-right: 4px;
}
#quote_form .datetime .hour {
    font-weight:bold;
}
#quote_form .datetime .minute {
    padding-right: 4px;
}
#quote_form .datetime .ampm input {
    margin: 0 2px 0 0;
}
#quote_form .datetime .ampm label {
    text-align: baseline;
    margin-right: 2px;
    background-color: #eeeeee;
    border-radius: 4px;
}
```

```
<form id="quote_form">
    <table class="datetime">
        <tbody>
            <tr>
                <td class="date"><input type="text" class="calendar"></td>
                <td class="hour"><select></select>:</td>
                <td class="minute"><select></select></td>
                <td class="ampm">
                    <label><input type="radio" name="pickup_ampm">AM</label>
                    <label><input type="radio" name="pickup_ampm">PM</label>
                </td>
            </tr>
            <tr>
                <td><label>Date</label></td>
                <td><label>HH</label></td>
                <td><label>MM</label></td>
                <td></td>
            </tr>
        </tbody>
    </table>
</form>
```

单选按钮从灰色标签中伸出。我希望它们坐得更低一点，以便它们位于标签文本旁边的中心。我尝试了负边距——没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T22:56:48.043

如果我理解正确，这应该做你想做的事。

```
.ampm label{
    display:block;
    float: left;
    padding:2px 4px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T23:08:20.627

我在这里使用 windows8 效果很好。

无论如何尝试这种方法。

```
label > input[type="radio"]
{
    position: relative; // Don't forgot this line
    top: -5px; // Change this value to set exact place.
} 
```

花药自动方式是

```
label > input[type="radio"]
{
    position: relative;
    vertical-align: middle;
} 
```

# mobile - Adobe Flash Builder 4.6 中的 Web 浏览器控件

> ID：13664508
> 
> 赞同：1
> 
> 时间：2012-12-01T22:44:20.047
> 
> 标签：mobile, adobe, flash-builder

我正在尝试将 Adob​​e Flash Builder 4.6 中的 Web 浏览器控件添加到移动应用程序。

到目前为止，我在谷歌上能找到的只是添加`xmlns:mx="library://ns.adobe.com/flex/mx"`到我的视图和使用中`<mx:HTML>`，但我只得到图形对象。

任何人都知道浏览器控件是否可用以及在哪里可以找到它？

这是我的观点声明：

```
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark"
        xmlns:mx="library://ns.adobe.com/flex/mx" title="myView"> 
```

# asterisk - 在 Windows Server 2008 R2 上将 Asterisk 作为虚拟机运行？

> ID：13664511
> 
> 赞同：0
> 
> 时间：2012-12-01T22:44:27.313
> 
> 标签：asterisk

我正在为服务中心配置站点，并且我有一台带有双 Xeon CPU 的 HP Proliant 服务器。我想知道在 Windows Server 2008 R2 上将 Asterisk 平台作为虚拟机运行是否是个好主意。最多 15 个座席将同时处于活动状态，除此之外，我可能需要激活通话记录、生成报告等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T00:06:57.407

由于语音可能是我们大多数系统管理员会遇到的最苛刻的网络流量流，因此您需要领先于这一点。除非您准备好多年，不间断地使用各种管理程序和各种管理程序配置，以每秒 1000 个时钟滴答的速度进行调试和编程，并掌握来宾内部计时源的最细微差别您正在使用哪个 CODEC，取决于您是否将进行 1 个呼叫、10 个呼叫或 100 个呼叫，以及您是否会记录这些呼叫，以及系统上的其他任何人是否会同时进行电话会议，基于守护进程和驱动程序的确切版本，那么，我会谦虚而专业地建议现在走另一条路线，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:15:20.513

您可以在 vmware 或 virtualbox 中运行星号。在 hyper-v 中运行对我来说从来没有成功过。Vmware 有更多的机会正常工作。

但在高负载下（超过 10 次通话），您可能会遇到音质问题。

因此，不建议在生产中运行 15 个并发调用。

# javascript - javascript window.open 函数

> ID：13664514
> 
> 赞同：1
> 
> 时间：2012-12-01T22:44:34.897
> 
> 标签：javascript

我正在尝试将贝宝整合到一个网站中。因为paypal 提供了JSP 源代码，程序员可以使用它来监听paypal IPN 事件，一旦您收到IPN 事件，您就可以随心所欲地处理信息。就我而言，我要做的只是插入一个新的 js 行以将 IPN 信息重定向到新网页，如下所示，

`<%@ page import= "java.util.*" %@>`
`<%@ page import= "java.net.*" %@>`
`<%@ page import= "javax.net.ssl.*" %@>`
`<%@ page import= "java.io.*" %@>`

`<%@`
`... paypal js source code`
`window.open("http://somesite.com?IPN_INFO"); // <--- new line inserted`
`... paypal js source code`
`%@>`

问题是，无论我用什么方式调用函数“window.open”，tomcat 服务器总是响应下一个错误：

`...`
`The method window.open(String) is undefined for the type paypal_005fipn_jsp`
`62: String url = &quot;http://192.168.1.85:80?IPN_INFO&quot;;`
`63: window.open(url);`
`...`

我真的很感激对此的任何反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:27:04.083

我不确定您的示例为什么需要使用 JSP 代码来执行此操作。只需通过编写普通的 HTML 和脚本标记将 JS 代码插入 JSP 中。

语法 <%@ 是 javascript 中的指令。它用于页面导入和包含等内容。您要做的是使用以下内容在您的页面中插入一些 javascript：

```
<%
System.out.println( "window.open(\"http://somesite.com?IPN_INFO\"); // <--- new line inserted );");
%> 
```

您还可以像这样插入 JSP 变量：

```
window.open("http://somesite.com?IPN_INFO$var1=<%=someVariable%>"); 
```

# python - windows上pygtk 2中的gtkSwitch

> ID：13664520
> 
> 赞同：1
> 
> 时间：2012-12-01T22:44:50.730
> 
> 标签：python, pygtk, gtk3, gtk2

我正在创建一个 python 程序来打开和关闭一些硬件设备。该程序必须在 Windows 上运行。我真的很想使用在 gtk 3.0 中创建的[gtkSwitch 小部件](http://developer.gnome.org/gtk3/3.0/GtkSwitch.html)，因为很明显您希望打开或关闭设备，但不幸的是 gtk3 尚未正确移植到 windows for python。那么有什么方法可以使用 gtk 3.0 附带的 gtkswitch 而不必在 gtk3 中编写程序，或者有人知道在 windows 上使用 python 绑定 gtk 3.0 的方法吗？

多谢！

德克·邦扎耶

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-06-27T10:03:06.187

请看我的代码

[https://gist.github.com/shellexy/2f86cfa4a0448f7125e8](https://gist.github.com/shellexy/2f86cfa4a0448f7125e8)

我使用 gtk.ToggleButton 来模拟 gtk.Switch 按钮。

[http://i.stack.imgur.com/fLvq7.png](http://i.stack.imgur.com/fLvq7.png)

gtkswitchbutton.py

```
    #!/usr/bin/python
    # -*- 编码：UTF-8 -*-
    # vim:set shiftwidth=4 tabstop=4 expandtab textwidth=79:
    '''用于 PyGtk2 的 GtkSwitch
    @作者：Shellexy
    @许可证：LGPLv3+
    @看：
    '''

    导入 gtk、gobject

    尝试：导入 i18n
    除外：从 gettext 导入 gettext as _

    类开关按钮（gtk.Table）：
        __gtype_name__ = '开关按钮'
        __gsignals__ = {
            “切换”：（gobject.SIGNAL_RUN_LAST，无，（）），
        }
        def __init__(self):
            gtk.Table.__init__(self)
            self.label = _("ON\tOFF")
            self.tbutton = gtk.ToggleButton()
            self.tbutton.set_label(self.label)
            self.cbutton = gtk.Button()
            self.cbutton.set_sensitive(True)
            self.cbutton.set_can_focus(False)
            self.cbutton.set_can_default(False)
            self.attach(self.cbutton, 0, 2, 0, 1)
            self.attach(self.tbutton, 0, 4, 0, 1)
            self.tbutton.connect('toggled', self.do_switch)
            self.cbutton.connect('clicked', lambda *args: self.clicked)
            #self.connect('实现', self.do_switch)
            self.set_active(False)
            self.show_all()
            经过

        def 切换（自我，* args）：
            返回 self.clicked()

        默认点击（自我，* args）：
            返回 self.tbutton.clicked()

        def set_inconsistent（自我，设置）：
            返回self.tbutton（设置）

        def set_active(self, is_active):
            返回 gobject.idle_add（self.tbutton.set_active，不是 is_active）

        def get_active(self):
            返回不是 self.tbutton.get_active()

        def do_switch(self, *args):
            返回 gobject.idle_add(self._do_switch, *args)

        def _do_switch(self, *args):
            t = 自我
            tb = self.tbutton
            b = self.c按钮
            l = tb.get_child()
            l.set_justify(gtk.JUSTIFY_FILL)
            bs = tb.get_style().copy()
            ls = l.get_style().copy()
            bs.bg[gtk.STATE_NORMAL] = ls.bg[gtk.STATE_SELECTED]
            ls.fg[gtk.STATE_NORMAL] = ls.text[gtk.STATE_SELECTED]       
            如果 self.get_children():
                t.remove(b); t.remove(tb)
                经过
            如果 self.get_active():
                t.attach(b, 2, 4, 0, 1) ; t.attach(tb, 0, 4, 0, 1)
                bs.bg[gtk.STATE_PRELIGHT] = ls.bg[gtk.STATE_SELECTED]
                ls.fg[gtk.STATE_PRELIGHT] = ls.text[gtk.STATE_SELECTED]
                经过
            别的：
                t.attach(b, 0, 2, 0, 1) ; t.attach(tb, 0, 4, 0, 1)
                bs.bg[gtk.STATE_PRELIGHT] = ls.bg[gtk.STATE_INSENSITIVE]
                ls.fg[gtk.STATE_PRELIGHT] = ls.text[gtk.STATE_NORMAL]
                经过
            tb.set_style(bs)
            l.set_style(ls)
            tb.do_focus(tb, 1)
            self.emit('切换')
            经过

    定义主（）：
        窗口 = gtk.Window()
        window.set_title('PyGtk2 SwitchButton')
        选项= [
                ['连接：'，假]，
                ['自动连接：'，真]，
                ['自动代理：'，真]，
        ]
        vbox = gtk.VBox()
        vbox.set_spacing(5)
        def foo(*args):
            打印参数
        对于选项中的 k、v：
            s = 开关按钮（）
            s.set_active(v)
            s.connect('toggled', foo, k)
            hbox = gtk.HBox()
            标签 = gtk.Label(k)
            label.set_alignment(0, 0.5)
            hbox.pack_start(标签, 1, 1, 0)
            hbox.pack_start(s, 0, 0, 0)
            vbox.pack_start(hbox, 0, 0, 0)
            经过
        window.add(vbox)
        window.show_all()
        window.connect('destroy', lambda *args: gtk.main_quit())
        gtk.main()
        经过

    如果 __name__=="__main__":
        主要的（）

```

# php - php包含来自更高目录

> ID：13664521
> 
> 赞同：0
> 
> 时间：2012-12-01T22:44:53.510
> 
> 标签：php

我有一个像这样的目录结构：

```
/
 index.php
 global.php
 classes/
   class1.php
   class2.php
 management/
   manage.php 
```

在 index.php 中，我`require_once "global.php"`.

在 global.php 中，我确实`foreach(glob("classes/*") as $filename) { require_once $filename }`需要我的所有课程。稍后在 global.php 中，我需要实例化这些类之一。

现在，我正在处理我网站的管理部分，所以`management/manage.php`我需要访问我所有的课程。如果我这样做`require_once "../global.php"`了，该文件会很好地包含在内，但是稍后在 global.php 中，当我需要实例化其中一个类时，我会收到一条错误消息，指出找不到该类。

当我处理顶级目录中的文件时，我可以毫无问题地使用 global.php 中的所有类。只有当我从 management/manage.php 包含 global.php 时才会弹出此错误，说找不到该类。错误的来源在 global.php 中报告为一行。

如何正确包含所有必要的文件？我宁愿将我的所有类都包含在 global.php 中。

# android - 来自服务的 AlarmManager

> ID：13664523
> 
> 赞同：0
> 
> 时间：2012-12-01T22:45:04.547
> 
> 标签：android, alarmmanager

我有一个后台服务启动和 AlaramManager。我已经记录了 AlarmManager 何时触发并看到它仅在应用程序没有运行活动并且唯一运行的是后台服务时触发。为什么会这样？

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    if (app.isApplicationInitilized())
    {
        //stopAlarmManager();
        server.start();
        startAlarmManager();            
    }
    return START_NOT_STICKY;
}

public void startAlarmManager()
{       
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + (10*1000), 10*1000, alarmPendingIntent);
}

private void setAlarmManager() {
    alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
    Intent intent = new Intent(this, AlarmManagerReceiver.class);       
    alarmPendingIntent = PendingIntent.getBroadcast(this, 8258, intent, PendingIntent.FLAG_CANCEL_CURRENT);

} 
```

# java - Apache HttpClient、用户代理和企业代理

> ID：13664526
> 
> 赞同：3
> 
> 时间：2012-12-01T22:45:21.357
> 
> 标签：java, proxy, user-agent, apache-httpclient-4.x, apache-httpcomponents

这在某种程度上是一个推测性的问题，因为答案在我可用的信息中可能并不明显，但我希望有足够经验的人能够根据公司代理的常见做法识别出可能的答案。

我在公司代理背后工作（不是作为软件开发人员）。在业余时间，我正在玩弄我正在开发的 Java 程序。该程序需要发出一些非常简单的 HTTP GET 请求，为此我使用了 Apache HttpClient。起初我担心我是否会通过代理服务器。在我们的网络浏览器中，代理服务器可以简单地输入到网络设置中……不需要身份验证。因此，我在我的 Java 程序中添加了以下内容：

```
myClient.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, MY_PROXY); 
```

果然，成功了！然而，我还有另一个顾虑。来自我的程序的 HTTP 请求可能指定了一些奇怪的用户代理（我已经确认是这种情况），我不希望它们在自动或手动数据包检查中引发任何怀疑。于是我对自己说，“为什么不直接把 User-Agent 头设置成和本机的浏览器一样呢？”

```
myClient.getParams().setParameter(CoreProtocolPNames.USER_AGENT, BROWSER_AGENT); 
```

这就是奇怪的地方。如果`BROWSER_AGENT`上面的字符串设置为与我机器上公司提供的浏览器（IE 或 FF）**完全相同的值，我会收到从公司代理服务器返回的“身份验证失败，缺少凭据”类型的错误消息。**但是，如果我将 User-Agent 标头设置为通用的，比如说`Mozilla 5.0`，甚至是一个完全伪造的字符串，甚至是一个**空**字符串，它都可以正常工作！让我困惑的部分是：

*   当 User-Agent 设置为与我的浏览器相同（一个长而复杂的字符串）时，我以某种方式“身份验证失败”，这是没有意义的，因为在真正的浏览器中我不提供身份验证信息（除非它来自一些预安装的证书也许？）
*   如果公司要求对发送到端口 80 上的代理服务器的任何请求进行身份验证，那么他们如何让随机的 User-Agent 字符串通过？监督？还有什么我无法理解的原因？

希望这个问题不会太投机而不能被认为是建设性的。我很想听听有这方面经验的人的意见。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T06:04:14.533

默认情况下，HTTPClient 将自己标识为用户代理。如您所见，您可以将其覆盖为您想要的任何字符串。

看起来您的代理服务器配置为根据浏览器类型自动添加用户凭据，但是由于发现了一些异常，您的管理员添加了一个异常规则，即当用户代理未知时，让它通过。就个人而言，我认为这是一个非常糟糕的安全策略，因为正如您所发现的，所有程序都可以通过您的代理而无需身份验证，只需使用伪造的用户代理即可。

# c - 无明显原因的分段错误

> ID：13664531
> 
> 赞同：0
> 
> 时间：2012-12-01T22:46:38.990
> 
> 标签：c, segmentation-fault

我没有明显的原因得到分段错误。我正在使用该`strtok`函数并将每一行拆分为多个标记并将它们存储在 char 指针中。我的数据如下所示：

输入：

```
200 -> 103 [weight=7];
200 -> 153 [weight=27];
200 -> 53 [weight=9];
200 -> 178 [weight=43];
55 -> 2 [weight=23];
55 -> 14 [weight=50];
55 -> 20 [weight=17];
55 -> 22 [weight=1];
55 -> 74 [weight=7];
55 -> 93 [weight=9];
55 -> 122 [weight=27];
65 -> 8 [weight=27];
65 -> 9 [weight=9]; 
```

代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc,char **argv)
{
        char *ipfile,line[80];
        FILE *fp;
        char *field1,*field2,*field3,*field4,*field5,*field6,mystr[10];
        int row,column,weight;
        ipfile = (char *)argv[1];
        printf("The input file name is %s\n",ipfile);
        fp = fopen(ipfile,"r");

        if(fp ==NULL) //Checking whether the command line argument was correctly or not.
        printf("There is no such file in the directory.\n");

        while(fgets(line,80,fp) != NULL)
        {
                field1 = strtok(line," ");
                //row    = atoi(field1);
                field2 = strtok(NULL," ");
                field3 = strtok(NULL," ");
                //column = atoi(field3);
                field4 = strtok(NULL," ");
                field5 = strtok(NULL," ");
                //field6 = strtok(NULL," ");

                printf("%s\n",field5);
                //printf("Row-%d Column - %d Weight - %d\n",row,column,weight);
        }
        fclose(fp);
        return 0;
} 
```

来自评论：

> 当我尝试打印`field1`, `field2`, 时`field3`，`field4`它们正在被打印。但是当我尝试`field5`并且`field6`我的程序出现分段错误时。

在 SO 用户的建议之后添加代码。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc,char **argv)
{
        char *ipfile,line[80];
        FILE *fp;
        char *field1,*field2,*field3,*field4,*field5,*field6,mystr[10];
        int row,column,weight;
        ipfile = (char *)argv[1];
        printf("The input file name is %s\n",ipfile);
        fp = fopen(ipfile,"r");

        if(fp == NULL) //Checking whether the command line argument was correctly or not.
        printf("There is no such file in the directory.\n");

        while(fgets(line,80,fp) != NULL)
        {
                field1 = strtok(line," ");
                //row    = atoi(field1);
                field2 = strtok(NULL," ");
                field3 = strtok(NULL," ");
                //column = atoi(field3);
                field4 = strtok(NULL," ");
                field5 = strtok(NULL," []=;");
                //field6 = strtok(NULL," ");

                printf("%s\n",field5);
                //printf("Row-%d Column - %d Weight - %d\n",row,column,weight);
        }
        fclose(fp);
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T22:52:16.963

您将字符串拆分为空格，因此只有 4 个标记，而您的代码需要 6 个：

```
200 -> 103 [weight=7]; 
```

指定`" []=;"`为分隔符以解决此问题。（或者`->`在您使用时也包括在内。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T23:21:24.850

试试这个：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc, char **argv)
{
    char line[80];
    char *field1, *field2, *field3, *field4, *field5;
    char *ipfile = argv[1];

    if (argc == 1)
    {
        fprintf(stderr, "Usage: %s file\n", argv[0]);
        return(1);
    }
    printf("The input file name is %s\n", ipfile);
    FILE *fp = fopen(ipfile, "r");

    if (fp == NULL) //Checking whether the command line argument was correctly or not.
    {
        fprintf(stderr, "There is no such file in the directory.\n");
        return(1);
    }

    char const *delim = " [];=";
    while (fgets(line, sizeof(line), fp) != NULL)
    {
        printf("Input: %s", line);
        field1 = strtok(line, delim);
        //row    = atoi(field1);
        field2 = strtok(NULL, delim);
        field3 = strtok(NULL, delim);
        //column = atoi(field3);
        field4 = strtok(NULL, delim);
        field5 = strtok(NULL, delim);
        //field6 = strtok(NULL, delim); 
        printf("Field 1: %s\n", field1);
        printf("Field 2: %s\n", field2);
        printf("Field 3: %s\n", field3);
        printf("Field 4: %s\n", field4);
        printf("Field 5: %s\n", field5);
        //printf("Row-%d Column - %d Weight - %d\n", row, column, weight);
    }
    fclose(fp);
    return 0;
} 
```

在您的数据（存储在文件中`strtok.data`）上，它会产生：

```
The input file name is strtok.data
Input: 200 -> 103 [weight=7];
Field 1: 200
Field 2: ->
Field 3: 103
Field 4: weight
Field 5: 7
Input: 200 -> 153 [weight=27];
Field 1: 200
Field 2: ->
Field 3: 153
Field 4: weight
Field 5: 27
Input: 200 -> 53 [weight=9];
Field 1: 200
Field 2: ->
Field 3: 53
Field 4: weight
Field 5: 9
Input: 200 -> 178 [weight=43];
Field 1: 200
Field 2: ->
Field 3: 178
Field 4: weight
Field 5: 43
Input: 55 -> 2 [weight=23];
Field 1: 55
Field 2: ->
Field 3: 2
Field 4: weight
Field 5: 23
Input: 55 -> 14 [weight=50];
Field 1: 55
Field 2: ->
Field 3: 14
Field 4: weight
Field 5: 50
Input: 55 -> 20 [weight=17];
Field 1: 55
Field 2: ->
Field 3: 20
Field 4: weight
Field 5: 17
Input: 55 -> 22 [weight=1];
Field 1: 55
Field 2: ->
Field 3: 22
Field 4: weight
Field 5: 1
Input: 55 -> 74 [weight=7];
Field 1: 55
Field 2: ->
Field 3: 74
Field 4: weight
Field 5: 7
Input: 55 -> 93 [weight=9];
Field 1: 55
Field 2: ->
Field 3: 93
Field 4: weight
Field 5: 9
Input: 55 -> 122 [weight=27];
Field 1: 55
Field 2: ->
Field 3: 122
Field 4: weight
Field 5: 27
Input: 65 -> 8 [weight=27];
Field 1: 65
Field 2: ->
Field 3: 8
Field 4: weight
Field 5: 27
Input: 65 -> 9 [weight=9];
Field 1: 65
Field 2: ->
Field 3: 9
Field 4: weight
Field 5: 9 
```

如果遇到问题，请打印内容。打印输入行以确保您正在阅读您认为正在阅读的内容。打印你得到的值。如果您遇到段错误问题，请小心打印空指针。`<null>`如果您尝试打印空字符串，一些 C 库（非常）和 print或类似的东西；其他人崩溃。你很幸运；你有一个崩溃的，所以当你做错了你就会知道。我没有添加代码来检查来自`strtok()`; 如果这是我的代码并且我正在使用`strtok()`- 这不太可能；我不喜欢`strtok()`——然后我会在重试之前检查每个字段是否不为空。我可能也会使用数组和循环而不是单独命名的变量。

# javascript - 如何将数据发送到休息端点？

> ID：13664534
> 
> 赞同：0
> 
> 时间：2012-12-01T22:46:56.447
> 
> 标签：javascript, jquery, rest

我正在查看[http://jqueryui.com/autocomplete/上的自动完成器](http://jqueryui.com/autocomplete/)

我正在寻找一个回调，它将在用户键入时将文本框的数据发送到“休息”服务。

因此，如果用户在文本框中键入“a”-

> 我的服务？参数=a

已发送

如果然后 'b' 被输入到文本框中（附加到 'a'）

> 我的服务？参数=ab

已发送

是否有使用 jQuery 自动完成器的回调或方法？我查看了“源”回调，但这似乎只是获取静态内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T23:18:43.197

jQueryUI 自动完成将在每次击键时发送数据，`term`默认情况下带有参数名称。[**在使用远程演示**](http://jqueryui.com/autocomplete/#remote)时查看浏览器控制台 将看到每个请求都随着每个新字母的添加而产生

# magento - 无法在产品集合上使用 type_id 加载和过滤

> ID：13664535
> 
> 赞同：5
> 
> 时间：2012-12-01T22:47:08.127
> 
> 标签：magento

我想覆盖目录/图层模型的函数 prepareProductCollection($collection)。

因为，我只想展示简单的产品，所以我想做：

```
 public function prepareProductCollection($collection)
    {
        $collection
           ->addAttributeToSelect(Mage::getSingleton('catalog/config')->getProductAttributes())
           ->addMinimalPrice()
           ->addFinalPrice()
           ->addTaxPercents()
           ->addUrlRewrite($this->getCurrentCategory()->getId());

        Mage::getSingleton('catalog/product_status')->addVisibleFilterToCollection($collection);
        Mage::getSingleton('catalog/product_visibility')->addVisibleInCatalogFilterToCollection($collection);

        $collection
         ->addAttributeToSelect('type_id')
         ->addAttributeToFilter('type_id','simple');
       echo $collection->getSelect()->__toString();

    } 
```

但是当我这样做时，我有这个错误：

```
SQLSTATE[42S22]: Column not found: 1054 Unknown column 'e.type_id' in 'where clause'

Trace:
#0 /Users/Ditchou/Documents/ProjetsWeb/lolote/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#1 /Users/Ditchou/Documents/ProjetsWeb/lolote/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#2 /Users/Ditchou/Documents/ProjetsWeb/lolote/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#3 /Users/Ditchou/Documents/ProjetsWeb/lolote/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('SELECT FLOOR((R...', Array)
#4 /Users/Ditchou/Documents/ProjetsWeb/lolote/lib/Varien/Db/Adapter/Pdo/Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract->query('SELECT FLOOR((R...', Array)
#5 /Users/Ditchou/Documents/ProjetsWeb/lolote/lib/Zend/Db/Adapter/Abstract.php(808): Varien_Db_Adapter_Pdo_Mysql->query(Object(Varien_Db_Select), Array)
#6 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Catalog/Model/Resource/Layer/Filter/Price.php(274): Zend_Db_Adapter_Abstract->fetchPairs(Object(Varien_Db_Select))
#7 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Catalog/Model/Layer/Filter/Price.php(158): Mage_Catalog_Model_Resource_Layer_Filter_Price->getCount(Object(Mage_Catalog_Model_Layer_Filter_Price), 10)
#8 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Catalog/Model/Layer/Filter/Price.php(115): Mage_Catalog_Model_Layer_Filter_Price->getRangeItemCounts(10)
#9 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Catalog/Model/Layer/Filter/Price.php(314): Mage_Catalog_Model_Layer_Filter_Price->getPriceRange()
#10 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Catalog/Model/Layer/Filter/Abstract.php(151): Mage_Catalog_Model_Layer_Filter_Price->_getItemsData()
#11 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Catalog/Model/Layer/Filter/Abstract.php(120): Mage_Catalog_Model_Layer_Filter_Abstract->_initItems()
#12 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Catalog/Model/Layer/Filter/Abstract.php(109): Mage_Catalog_Model_Layer_Filter_Abstract->getItems()
#13 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Catalog/Block/Layer/Filter/Abstract.php(132): Mage_Catalog_Model_Layer_Filter_Abstract->getItemsCount()
#14 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/design/frontend/decostore/default/template/catalog/layer/view.phtml(49): Mage_Catalog_Block_Layer_Filter_Abstract->getItemsCount()
#15 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Core/Block/Template.php(241): include('/Users/Ditchou/...')
#16 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/decost...')
#17 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#18 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#19 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Core/Block/Text/List.php(43): Mage_Core_Block_Abstract->toHtml()
#20 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Text_List->_toHtml()
#21 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Core/Block/Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
#22 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Core/Block/Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('left', true)
#23 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/design/frontend/decostore/default/template/page/2columns-left.phtml(19): Mage_Core_Block_Abstract->getChildHtml('left')
#24 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Core/Block/Template.php(241): include('/Users/Ditchou/...')
#25 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/decost...')
#26 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#27 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#28 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Core/Model/Layout.php(555): Mage_Core_Block_Abstract->toHtml()
#29 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Core/Controller/Varien/Action.php(390): Mage_Core_Model_Layout->getOutput()
#30 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Catalog/controllers/CategoryController.php(159): Mage_Core_Controller_Varien_Action->renderLayout()
#31 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Catalog_CategoryController->viewAction()
#32 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('view')
#33 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#34 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#35 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#36 /Users/Ditchou/Documents/ProjetsWeb/lolote/index.php(87): Mage::run('', 'store')
#37 {main} 
```

错误似乎发生在这里：#6 /Users/Ditchou/Documents/ProjetsWeb/lolote/app/code/core/Mage/Catalog/Model/Resource/Layer/Filter/Price.php(274): Zend_Db_Adapter_Abstract->fetchPairs(对象（Varien_Db_Select））

我不明白，因为当我只是做

```
$collectionSimple = Mage::getResourceModel('catalog/product_collection')
     ->addAttributeToFilter('type_id', array('eq' => 'simple')); 
```

sql请求的回声给了我：

```
SELECT `e`.*, `cat_index`.`position` AS `cat_index_position`, `price_index`.`price`, `price_index`.`tax_class_id`, `price_index`.`final_price`, IF(price_index.tier_price IS NOT NULL, LEAST(price_index.min_price, price_index.tier_price), price_index.min_price) AS `minimal_price`, `price_index`.`min_price`, `price_index`.`max_price`, `price_index`.`tier_price` FROM `catalog_product_entity` AS `e` INNER JOIN `catalog_category_product_index` AS `cat_index` ON cat_index.product_id=e.entity_id AND cat_index.store_id=1 AND cat_index.visibility IN(2, 4) AND cat_index.category_id='3' INNER JOIN `catalog_product_index_price` AS `price_index` ON price_index.entity_id = e.entity_id AND price_index.website_id = '1' AND price_index.customer_group_id = 0 WHERE (`e`.`type_id` = 'simple') 
```

有用。

为什么图层模型的集合不一样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T23:33:13.480

你确定这是你得到的错误吗？在 Magento 1.7.x 中，当我用`prepareProductCollection`上面提供的方法体替换方法体时，出现**此**错误

```
SQLSTATE[42S22]: Column not found: 1054 Unknown column 'e.min_price' in 'where clause' 
```

那是因为我`prepareProductCollection`没有设置与原来相同的属性。对于初学者，请确保你的。如果您使用基于配置的重写来执行此操作，请调用

```
parent::prepareProductCollection($collection); 
```

在您的方法开始时。如果您使用的是`local`或`community`代码池覆盖，则需要从`core`文件中复制/粘贴代码。在 1.7.1 中，看起来像这样

```
 $collection
        ->addAttributeToSelect(Mage::getSingleton('catalog/config')->getProductAttributes())
        ->addMinimalPrice()
        ->addFinalPrice()
        ->addTaxPercents()
        ->addUrlRewrite($this->getCurrentCategory()->getId());

    Mage::getSingleton('catalog/product_status')->addVisibleFilterToCollection($collection);
    Mage::getSingleton('catalog/product_visibility')->addVisibleInCatalogFilterToCollection($collection);

    $collection
        ->addAttributeToSelect('type_id')
        ->addAttributeToFilter('type_id','simple'); 
```

如果这对您没有帮助，请跟踪您的调用堆栈 - 如果您的错误确实是，`1054 Unknown column 'e.type_id' in 'where clause'`那么我的猜测是您在某处运行了一些自定义代码，将集合的过滤器复制到**不同**的集合。

此外，您可以通过使用获取集合的主要 SQL 查询

```
echo $collection->getSelect()->__toString(); 
```

这应该给你足够的调试信息来开始。

**更新：**好的，根据上面的新信息，这似乎只在有价格过滤器和/或索引处于特定状态时才会生效。

这是你的问题。看看这个调用堆栈行

```
#7 app/code/core/Mage/Catalog/Model/Layer/Filter/Price.php(158):    Mage_Catalog_Model_Resource_Layer_Filter_Price->getCount(Object(Mage_Catalog_Model_Layer_Filter_Price), 10) 
```

如果你跳转到该`getCount`方法，你会看到一个调用`_getSelect`

```
#File: app/code/core/Mage/Catalog/Model/Resource/Layer/Filter/Price.php 
public function getCount($filter, $range)
{
    $select = $this->_getSelect($filter); 
```

如果你看 的定义`_getSelect`，

```
#partial method reproduction
#File: app/code/core/Mage/Catalog/Model/Resource/Layer/Filter/Price.php
protected function _getSelect($filter)
{    
    $collection = $filter->getLayer()->getProductCollection();
    $collection->addPriceData($filter->getCustomerGroupId(), $filter->getWebsiteId());
    if (!is_null($collection->getCatalogPreparedSelect())) {
        $select = clone $collection->getCatalogPreparedSelect();
    } else {
        $select = clone $collection->getSelect();
    } 
```

你会看到 Magento 正在从集合中**克隆**选择，然后修改它以从索引表中选择

```
 // processing FROM part
    $priceIndexJoinPart = $fromPart[Mage_Catalog_Model_Resource_Product_Collection::INDEX_TABLE_ALIAS];
    $priceIndexJoinConditions = explode('AND', $priceIndexJoinPart['joinCondition']);
    $priceIndexJoinPart['joinType'] = Zend_Db_Select::FROM;
    $priceIndexJoinPart['joinCondition'] = null;
    $fromPart[Mage_Catalog_Model_Resource_Product_Collection::MAIN_TABLE_ALIAS] = $priceIndexJoinPart;
    unset($fromPart[Mage_Catalog_Model_Resource_Product_Collection::INDEX_TABLE_ALIAS]);
    $select->setPart(Zend_Db_Select::FROM, $fromPart);
    foreach ($fromPart as $key => $fromJoinItem) {
        $fromPart[$key]['joinCondition'] = $this->_replaceTableAlias($fromJoinItem['joinCondition']);
    }
    $select->setPart(Zend_Db_Select::FROM, $fromPart); 
```

由于索引表没有 `type_id`列，因此上述股票 Magento 代码与您的更改不兼容。如果我要继续这件事，我会

1.  转向基于重写的方法

2.  创建一个重写，添加您的`type_id`过滤器代替您的覆盖

3.  在上面的方法上创建第二次重写`_getSelect`，检查`type_id`筛选器的选择，如果找到，则将其删除

或者，您可以尝试找到一种不同的方法来重写更接近使用位置的集合对象。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:29:12.530

2-3 周前，当我尝试将图层导航添加到自定义集合（不是依赖于类别或搜索集合的集合）时，我也遇到了同样的问题。我遇到了与您遇到的相同问题，它源于分层导航中使用的价格过滤器处理。就像 Alan 建议的那样，在 Magento 1.7 中，他们对用于价格过滤选项的 select sql 进行了优化。他们删除了 FROM sql 部分（这是产品实体 - 包含 type_id 属性），并使 price_index 相关表成为主要表 - 在查询的 FROM 部分中使用的表。因此，基本上从中选择数据的表不再是产品实体表（您丢失了所有产品基本属性），主表成为产品索引。这是 Magento 团队从 1 开始添加的核心更新。

我也有一个解决这个问题的方法，我明天会和你分享，我现在无法访问代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T03:17:03.910

当我从 select 语句中删除导致错误的字段时，我在扩展 _getSelect 函数时遇到问题，它没有为侧边栏中的价格过滤器返回正确的集合。

因此，为了解决不存在字段的问题，我使用了一个确实存在的字段 entity_id。我扩展了 Mage_Catalog_Model_Category，更改了函数 getProductCollection：

```
$collection = Mage::getResourceModel('catalog/product_collection')
    ->setStoreId($this->getStoreId())
    ->addAttributeToFilter('type_id', array('eq' => 'simple'));
// Get the product ids of the filtered collection
$entityIds = $collection->getAllIds();

$collection = Mage::getResourceModel('catalog/product_collection')
    ->setStoreId($this->getStoreId())
    ->addCategoryFilter($this)
    // Apply the product ids as a filter
    ->addIdFilter($entityIds,false);

return $collection; 
```

# eclipse - 将 java 从 1.6 升级到 1.7 时，无头 AJDT 构建失败

> ID：13664536
> 
> 赞同：0
> 
> 时间：2012-12-01T22:47:15.100
> 
> 标签：eclipse, ajdt

strong texti 有一个非常简单的基于 eclipse 3.8 的 rcp 应用程序，带有一个 .aj 文件。我还安装了 AJDT 2.2.1，并且在我的 build.properties 中有以下四个条目：

```
javacSource=1.6
javacTarget=1.6

compilerAdapter=org.eclipse.ajdt.core.ant.AJDT_AjcCompilerAdapter
sourceFileExtensions=*.java, *.aj 
```

我正在通过 Ant 使用无头构建方法，在使用 java 1.6 时，它一直像魅力、AJDT 等一样工作。但是，一旦我从 java 1.6 升级到 1.7，并将前面提到的两个 build.properties 条目——javacSource 和 javacTarget——值从 1.6 更改为 1.7，我得到了大量的构建错误，所有这些都带有以下后缀：

```
... are only available if source level is 1.5 or greater 
```

将 build.properties 的**javacSource**设置回 1.6，同时将**javacTarget 设置**为 1.7 有效。或者如果我要从我的 build.properties 中注释掉两个特定于 AJDT 的条目，同时将**javacSource**和**javacTarget**值保留为 1.7。构建也完成得很好。所以我的猜测是 AJDT 编译器在某种程度上是罪魁祸首。问题是为什么以及可以做些什么来解决它。

感谢您的时间！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:40:56.920

这听起来像是两件事之一：

1.  您安装的 AJDT 中没有与 Java 1.7 兼容的 AspectJ。您正在构建什么 AspectJ 版本？请注意，此 aspectj 版本可能与您的目标平台中的版本不同。
2.  您没有以 AspectJ 可以识别的方式正确指定 Java 源/目标版本。您如何指定 Java 源/目标版本？

# javascript - 使用 JavaScript 进行 ASP.NET 回发（单击 LinkBut ton） - 回发发生但未发生 Click 事件

> ID：13664539
> 
> 赞同：0
> 
> 时间：2012-12-01T22:47:34.560
> 
> 标签：javascript, asp.net, postback, pagerequestmanager

我正在使用一些脚本来导致回发。这是上下文：

*   用户单击链接以执行需要知道其当前位置的功能
*   脚本从浏览器获取当前位置（使用 navigator.geolocation.getCurrentPosition）
*   当它有位置时（上面的调用是异步的 - 你必须等待用户同意分享他们的位置）我希望脚本将位置发布回服务器。我通过模拟隐藏链接按钮的回发来做到这一点。

以下是相关代码：

```
function submitLocation_Inline(position) {
var latitude = position.coords.latitude;
var longitude = position.coords.longitude;
document.getElementById("ctr11837_Locator_hLat").value = latitude;
document.getElementById("ctr11837_Locator_hLng").value = longitude;
var prm = Sys.WebForms.PageRequestManager.getInstance();
prm._doPostBack('ctr11837_Locator_btnSubmitLocation', 'inline');
} 

<a href="javascript:__doPostBack('ctr11837$Locator$btnSubmitLocation','')" id="ctr11837_Locator_btnSubmitLocation"></a> 
```

在后面的代码中，我有一个用于隐藏链接按钮（btnSubmitLocation_Click）上的单击事件的处理程序。但是，这永远不会被调用。回发确实发生得很好，但要处理它，我必须在 Page_Load 期间检查 Request["_ *EVENTTARGET"] 和 Request[* "_EVENTARGUMENT"]以验证它是我想要的回发。

我将如何调整我的代码以导致调用 btnSubmitLocation_Click？

PS - 不确定这是否相关：隐藏的链接按钮位于更新面板内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T01:22:47.933

我认为问题在于您正在调用 __doPostback() 发送控件的 ClientId（我想您正在使用 asp.net 链接按钮）。只需看一下`href`链接按钮自动生成的内容。

试着打电话`prm.__doPostBack('ctr11837$Locator$btnSubmitLocation', 'inline')`。

编辑：看起来您在 中添加了一个下划线`prm.__doPostBack()`，请检查您的代码。

# asp.net - asp.net 在 Page_Load 中告诉请求来自哪里

> ID：13664542
> 
> 赞同：0
> 
> 时间：2012-12-01T22:48:02.233
> 
> 标签：asp.net

如果对我的页面的请求来自另一个站点的重定向，我可以在 Page_Load 函数中分辨出来自哪个站点吗？如果是这样，这有多安全和准确？它可以很容易地被欺骗吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T01:38:39.727

[不能保证 HTTP 引用者信息，它是可选的，](https://stackoverflow.com/q/2158283/304683)也不是“准确的”。一系列重定向，通常由广告代理商完成，可能只会为您提供（如果）原始重定向（而不是沿途的其他重定向）。

能轻易被骗吗？**是**的，只需模仿/生成任何 http 请求并`Referer`在 HTTP 标头中提供您想要的任何内容。

# objective-c - 扩展 EventKit 功能

> ID：13664544
> 
> 赞同：1
> 
> 时间：2012-12-01T22:48:11.793
> 
> 标签：objective-c, xcode, macos, eventkit, ekeventkit

这是我在 SO 上的第一篇文章，所以我会马上开始。

我正在开发一个日历应用程序，并试图弄清楚如何向 EKEvents 添加新功能。我已经做了足够的研究，知道 EKEvent 类并不是真的要被子类化，因为如果强制转换并强制进入事件存储区，它将丢失任何数据。

有什么方法可以完成向 EventKit 对象添加新功能？

也许能够将 EKEventStore 与 EKEvent 一起子类化，以便它们一起工作？或者也许您只需要创建一个单独的数据库来存储指向事件的指针以及任何新数据（或类似的东西）？

任何想法都非常感谢！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T23:59:51.950

当你想扩展它的功能时，你不必在 Objective-C 中创建一个子类。

如果你想向 EventKit 类添加一个方法，你应该使用类别。一个例子是：

1.  创建一个名为 BaseClass+Category.h 和 BaseClass+Category.m 的新 Objective-c .h 和 .m 文件
2.  在他们身上实施你的方法
3.  在任何有 EventKit 对象的地方使用该方法

[代码]

```
//BaseClass+MyMethod.h
#import "BaseClass.h"

@interface BaseClass (MyMethod)

- (void) myMethodImplementation;

@end

//BaseClass+MyMethod.m
#import "BaseClass+MyMethod.h"

@implementation BaseClass (MyMethod)

- (void) myMethodImplementation { }
@end

//In Your Code Somewhere
BaseClass *object = [[BaseClass alloc] init];
[object myMethodImplementation]; 
```

[/代码]

# ruby-on-rails - 如何防止 Rails 受到“cUrl post injection 攻击”？

> ID：13664559
> 
> 赞同：0
> 
> 时间：2012-12-01T22:50:08.507
> 
> 标签：ruby-on-rails, security, post, curl, code-injection

我的网站正受到新注册和新帖子的攻击，其中一些甚至没有关联 user.id。

我该如何解决这个问题？我应该将什么代码添加到 user#new 页面和/或 post#new 页面。

如果有帮助，请查看我的仓库：[https ://github.com/nixor/cpblog](https://github.com/nixor/cpblog)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T22:57:01.027

您需要验证 a`Post`是否有用户。您可以从添加用户存在的验证开始。

在 Post 模型中添加：

`validates :user, presence: true`

您还可以检查控制器中是否存在属性以通知用户。

# apache-flex - Flex（尤其是移动）状态 - 多个同时状态？

> ID：13664561
> 
> 赞同：0
> 
> 时间：2012-12-01T22:50:25.140
> 
> 标签：apache-flex, mobile, states

我们知道我们可以在 .mxml 中定义状态。问题是，我们的应用程序或组件在任何时候都可能只处于其中一种状态。

在为 Flex Mobile 编程时，横向和纵向（方向）通常需要成为状态，以便轻松定义控件/组件/元素是 [不] 可见、（禁用/启用）还是使用某些颜色着色。但是我们的应用程序或组件也有其他的状态，独立于屏幕方向，例如 SufficientCredit 和 InsufficientCredit。

假设我们只想在状态为 SufficientCredit 时显示提交按钮。但是，当您更改手机的方向时，您还需要显示/隐藏/着色其他控件。在现实生活中，您的信用状态确实是 SufficientCredit，但您的应用现在处于 Portrait 或 Landscape 状态。现在我们的提交按钮将消失，尽管它不在 InsufficientCredit 状态。

我不想创建像 LandscapeSufficientCredit、LandscapeInsufficientCredit、PortraitSufficientCredit 和 PortraitInsufficientCredit 这样的“组合”状态。我也不想完全放弃状态并编写一个巨大的 if-else 语句，其中每个分支都必须包含修改组件属性（颜色、大小、可见性等）的代码，然后记得从很多地方调用它那会改变状态。

我听说过状态组，但它们的文档确实令人困惑，我不确定它们是否会在这种情况下有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:42:24.463

StateGroups 是您的答案。您可以执行以下操作：

```
<s:State name="portrait" group="portraitStates"/>
<s:State name="landscape" group="landscapeStates"/>
<s:State name="portraitState1" group="portraitStates, state1States"/>
<s:State name="landscapeState1" group="landscapeStates, state1States"/>
<s:State name="portraitState2" group="portraitStates, state2States"/>
<s:State name="landscapeState2" group="landscapeStates, state2States"/> 
```

然后在您的视图中覆盖 getCurrentState() 方法以确定您的状态。如

```
override public function getCurrentViewState():String
{
    var aspect:String = FlexGlobals.topLevelApplication.aspectRatio; //gets landscape/portrait
    //some logic to determine current state
    return aspect+currentState;
} 
```

我这样做是为了让手机/平板电脑的横向/纵向+多个状态都在一个视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:39:51.417

我想如果你同时想要两个状态，那么这些状态会影响独立的参数（我猜屏幕方向和颜色是独立的）。

在这种情况下，您可能需要制作一些子组件来监视特定父级的状态并在内部处理它们。

在这种情况下，您也可以使用继承的样式来实现它——您在父组件中调用 setStyle("Credit","Insufficient") ，所有知道这些样式的子组件都会相应地更改它们的表示。

# macos - 是否有用于 gvim 或 macvim 的 Om Writer 风格的前端

> ID：13664565
> 
> 赞同：1
> 
> 时间：2012-12-01T22:51:13.980
> 
> 标签：macos, vim, macvim

这是我的困境：我喜欢 vim 的功能，但我也喜欢使用 Om Writer 来增强放松和创造力。对于那些不熟悉的人，Om Writer 会清除所有其他程序，用一个完整的空白页填满屏幕，并播放音乐和声音。它甚至有 _ 字符作为光标以避免墙壁样式 | 字符在行尾！

所以我使用 Om Writer 来做一些事情，但我肯定会想念你可以在 vim 中通过键盘完成的所有简洁的事情。Om Writer 需要大量的鼠标移动。所以我环顾四周，一无所获，但我想知道是否可能有这样的东西，比如 Vim 的 Om Writer 风格的前端？

如果不是，那么在 Snow Leopard 上为 MacVim 编程会有多困难？（作为一名程序员，我在幼儿园水平，但如果这项工作不是很复杂，我会考虑花钱请人去做。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T07:24:35.737

我记得[一个插件](http://projects.mikewest.org/vimroom/)，但一个快速的谷歌返回了[另外](http://paulrouget.com/e/vimdarkroom/)[两个](http://www.laktek.com/2012/09/05/distraction-free-writing-with-vim/) 项目。不过，播放音乐与 Vim 的理念完全相反，但没有什么能阻止你在 iTunes 中启动播放列表。

而且我不会对那些“无干扰”的编辑器进行咆哮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:54:17.627

我第二个 romainl 的 vimroom[推荐](http://projects.mikewest.org/vimroom/)；我试过了，发现它很不错。此外，[shell.vim 插件](http://www.vim.org/scripts/script.php?script_id=3123)有一个全屏模式，可以将窗口标题、任务栏等隐藏起来。

# android - 从 1 个活动中获取值并发送到第 2 个活动

> ID：13664566
> 
> 赞同：1
> 
> 时间：2012-12-01T22:51:13.617
> 
> 标签：android

因此，为此，我尝试在主要活动中提供的 2 个 EditTexts 中获取用户输入的 2 个整数值并将它们加在一起。然后，我希望 android 应用程序切换到第二个 Activity，并在 EditText 框中显示从上一个（主）Activity 输入到 2 个 EditText 框中的 2 个值的总和。

我认为我在正确的轨道上，但我不太确定如何在第二个活动中获得总和。我试过搞乱捆绑包等，但我仍然无法弄清楚。

******* *重新编辑以反映一些建议。第二个活动仍然没有显示总数......我认为这是某种转换错误。**

 *****我几乎可以肯定它与第二个活动有关..第一个对我来说很合适

**完美的！这是一个转换错误。谢谢大家的帮助：D

```
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;

public class MainActivity extends Activity 
{   

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void OnClick(View v) //android:onClick="OnClick"   added to activity_main.xml for this button
    {
        Intent intent = new Intent(MainActivity.this, Summation.class);
    EditText v1 = (EditText)findViewById(R.id.editText1);
    EditText v2 = (EditText)findViewById(R.id.editText2);   
    int first =  Integer.parseInt(v1.getText().toString());
    int second = Integer.parseInt(v2.getText().toString());
    String sum = String.valueOf(first + second);
    intent.putExtra("sum", sum);
    startActivity(intent);          
    }
} 
```

第二活动课

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.EditText;

public class Summation extends Activity 
{
    //Second Activity 

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {   
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_2);        
        String sum = (getIntent().getExtras().getString("sum"));
        EditText addsum = (EditText)findViewById(R.id.editText1);
        addsum.setText(sum);

    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:03:41.283

您不能`int`直接从 edittext 分配您的值。您需要分配编辑文本，例如

```
EditText eText1 = (EditText) findViewById(R.id.yourfirstedittext) 
```

和你的第二个一样。然后获取值

`int firstNum = Integer.parseInt(eText1.getValue.toString())`

当然与第二个相同。然后，您可以将这两个加`ints`在一起并简单地将它们传递给`intent.putExtra("sume, sum)`. 然后让他们在你的第二`Activity`个`getIntent()`

```
Intent ci = getIntent();
final int sum = ci.getIntExtra("sum", yourDefaultIntValue) 
```

如果您以 an 身份传递，`int`则需要以这种方式进行并获取`String`. `int`但是，如果您以 a 的身份通过，`String`那么您就可以了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T22:55:18.760

好吧，一切都几乎完美了，但是如果您不将捆绑包附加到缩进，那么向捆绑包添加值是没有意义的，这是您忘记的步骤 :) 所以要么添加

```
 intent.putExtras( bundle ); 
```

或使您的代码不使用其他代码，而是看起来像：

```
 Intent intent = new Intent();
    int value1 =(R.id.editText1);
    int value2 =(R.id.editText2);
    double sum = (value1 + value2);
    intent.putExtra("sum", sum);
    intent.setClass(MainActivity.this, Summation.class);
    startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-01T22:57:17.207

这么近！在您的第一个活动中，请记住在此之前执行此操作`startActivity(intent)`：

```
intent.putExtras(bundle); 
```

然后在你的第二个活动类的 onCreate 方法结束时试试这个：

```
String valu = getIntent().getExtras().getString("sum");
EditText addsum = (EditText)findViewById(R.id.editText1);
addsum.setText(valu, TextView.BufferType.NORMAL); 
```**

# javascript - 第一次运行，div 被删除，第二次运行，div 没有被删除。弹出“灯箱”

> ID：13664570
> 
> 赞同：0
> 
> 时间：2012-12-01T22:51:44.347
> 
> 标签：javascript, jquery

我试图制作一种灯箱思想。它是一种学习体验，所以我不想使用 fancybox 等。

我的问题是：我有 2 个链接。每个都打开一个叠加层，顶部是一个带有内容的白框。这行得通。当我关闭时，只有第一个打开白盒的链接会同时关闭白盒和覆盖。第二个链接只关闭覆盖，而不是白盒。:S 怎么来的？

html代码：

```
<!DOCTYPE>
<head>
<title>Box</title>
<link href="style.css" rel="stylesheet" type="text/css" />
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="whitebox.js"></script>
</head>

<body>

<div id="div0">
   box0   
</div> 

<div id="box0" class="box">
    <a class="closeBtn">X</a>
    <h1>box0</h1>
    <form action="" method="POST">
        <div>Your email: <input type="text"></div>
        <br />
        <div>Message: <input type="textarea"></div>
    </form>

</div>

<div id="div1">
   box1    
</div> 

<div id="box1" class="box">
    <a class="closeBtn">X</a>
    <h1>box1</h1>
    <form action="" method="POST">
        <div>Your email: <input type="text"></div>
        <br />
        <div>Message: <input type="textarea"></div>
    </form>

</div>

    <div class="pageOverlay"></div> 

</body>
</html> 
```

白盒.js：

```
var state = 0;

function startOverlay(id){

if(state == 0){
    $(".pageOverlay").css({"opacity": "0.85"});
    $(".pageOverlay").fadeIn("fast");
    $(id).fadeIn("fast");

    state = 1;
}
}

//closes the overlay and box
function closeBox(id){

if(state == 1){     
    $(".pageOverlay").fadeOut("fast");
    $(id).fadeOut("fast");
    state = 0;
}
}

function centerBox(id){
//alert(id);
var browserWidth = document.documentElement.clientWidth;
var browserHeight = document.documentElement.clientHeight;
var boxHeight = $(id).height();
var boxWidth = $(id).width();

$(id).css({"position": "absolute","top": (browserHeight / 2) - (boxHeight /                2),"left": (browserWidth / 2) - (boxWidth / 2)});

}

function runBox(link, id){
$(link).click(function(){
    startOverlay(id); 
    centerBox(id);
});

//this function closes the overlay when user clicks "close"
$(".closeBtn").click(function(){
    closeBox(id);
});

//this function closes the overlay when user clicks outside the message area
$(".pageOverlay").click(function(){
    closeBox(id);
});
}
//Makes sure the document is fully loaded. 
$(document).ready(function(){
runBox("#div0","#box0");
runBox("#div1","#box1");
}); 
```

样式.css：

```
#div0{
margin-top:150px;
margin-left:auto;
margin-right:auto;
text-align:center;
border:1px solid black;
cursor: pointer;
width: 150px;
}
#div1{
margin-top:150px;
margin-left:auto;
margin-right:auto;
text-align:center;
border:1px solid black;
cursor: pointer;
width: 150px;
}
.pageOverlay{
display:none;
position:fixed;
height:100%;
width:100%;
top:0;
left:0;
background:#000000;
z-index:1000;
}
.box{
display:none;
position:relative;
height:450px;
width:450px;
background:#ffffff;
border:2px solid #a0a0a0;
z-index:2000;
padding:12px;
font-size:14px;
font-family:Arial, Helvetica, sans-serif;
}
.box h1{
text-align:left;
color:#7FA5FE;
font-size:22px;
font-weight:700;
border-bottom:1px solid #a0a0a0;
padding-bottom:2px;
margin-bottom:20px;
font-family:Arial, Helvetica, sans-serif;
}
.box a{
cursor: pointer;    
}
.box p{
text-align:center;
}

.closeBtn{
font-size:12px;
line-height:14px;
right:6px;
top:4px;
position:absolute;
color:#7FA5FE;
font-weight:700;
display:block;
#div0{
margin-top:150px;
margin-left:auto;
margin-right:auto;
text-align:center;
border:1px solid black;
cursor: pointer;
width: 150px;
}
#div1{
margin-top:150px;
margin-left:auto;
margin-right:auto;
text-align:center;
border:1px solid black;
cursor: pointer;
width: 150px;
}
.pageOverlay{
display:none;
position:fixed;
height:100%;
width:100%;
top:0;
left:0;
background:#000000;
z-index:1000;
}
.box{
display:none;
position:relative;
height:450px;
width:450px;
background:#ffffff;
border:2px solid #a0a0a0;
z-index:2000;
padding:12px;
font-size:14px;
font-family:Arial, Helvetica, sans-serif;
}
.box h1{
text-align:left;
color:#7FA5FE;
font-size:22px;
font-weight:700;
border-bottom:1px solid #a0a0a0;
padding-bottom:2px;
margin-bottom:20px;
font-family:Arial, Helvetica, sans-serif;
}
.box a{
cursor: pointer;    
}
.box p{
text-align:center;
}

.closeBtn{
font-size:12px;
line-height:14px;
right:6px;
top:4px;
position:absolute;
color:#7FA5FE;
font-weight:700;
display:block;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:47:21.843

1.  你不需要保持状态，因为如果覆盖在这里你不能点击不正确的按钮，
2.  您使用了选择器，而您只需要制作`box`var 一次，
3.  当您使用一个叠加元素时，您需要每次都为它绑定点击事件，（见`one()`我用
4.  最好使用`$(document).ready(function() {})`整个代码来保持全局范围的清洁。
5.  我做了一个技巧，只绑定一个元素的点击并由另一个元素触发它，没有重复的事件运行器。

这里是[固定代码](http://jsfiddle.net/oceog/r627f/)：

```
$(document).ready(function() {

function startOverlay(box) {
    $(".pageOverlay").css({
        "opacity": "0.85"
    });
    $(".pageOverlay").fadeIn("fast");
    box.fadeIn("fast");
}

//closes the overlay and box

function closeBox(box) {
    $(".pageOverlay").fadeOut("fast");
    box.fadeOut("fast");
}

function centerBox(box) {
    //alert(id);
    var browserWidth = document.documentElement.clientWidth;
    var browserHeight = document.documentElement.clientHeight;
    var boxHeight = box.height();
    var boxWidth = box.width();

    box.css({
        "position": "absolute",
        "top": (browserHeight / 2) - (boxHeight / 2),
        "left": (browserWidth / 2) - (boxWidth / 2)
    });

}
 //trigger click on close button by click on pageOverlay, to not duplicate events
 $(".pageOverlay").bind("click", function() {
     $('.closeBtn:visible').click();
        });

function runBox(link, id) {
    var box = $(id);
    $(link).click(function() {
        startOverlay(box);
        centerBox(box);
        //this function closes the overlay when user clicks "close" or outside of area
        //bind to only visible button
        $(".closeBtn:visible").one("click",function() {
            closeBox(box);
        })

    });

}

    runBox("#div0", "#box0");
    runBox("#div1", "#box1");
});​ 
```

我还可以建议生成对话框内容，而不是在 DOM 中包含多个元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:02:10.357

我认为问题出在绑定事件处理程序时：如果您尝试这样做：

```
//this function closes the overlay when user clicks outside the message area
$(".pageOverlay").click(function(){
    alert(id); //Or better console.log(id)
    closeBox(id);
}); 
```

您将看到任何链接都会触发函数 closeBox*两次*，这是因为您实际上是两次调用事件绑定。尝试消除该`runBox()`功能：

```
//Makes sure the document is fully loaded. 
$(document).ready(function(){

    $('#div0').click(function(){
        startOverlay('#box0'); 
        centerBox('#box0');
    });

    $('#div1').click(function(){
        startOverlay('#box1'); 
        centerBox('#box1');
    });

    //this function closes the overlay when user clicks "close"
    //Note: you can bind both on the same call
    $(".closeBtn,.pageOverlay").click(function(){
        if(jQuery('#box0:visible').length>0){
            closeBox('#box0');
        }else{
            closeBox('#box1');
        }
    });

});​ 
```

# ruby-on-rails - Heroku- 在任何来源中都找不到回形针 3.1.3

> ID：13664572
> 
> 赞同：0
> 
> 时间：2012-12-01T22:51:54.653
> 
> 标签：ruby-on-rails, heroku, paperclip

今天早上，当我尝试更新我的网站时，heroku 没有让我推送应用程序。这是我收到的信息。

```
Fetching gem metadata from http://rubygems.org/.......
   Fetching gem metadata from http://rubygems.org/..
   Fetching git://github.com/drhenner/nifty-generators.git
   Could not find paperclip-3.1.3 in any of the sources
!
!     Failed to install gems via Bundler.
!
!     Heroku push rejected, failed to compile Ruby/rails app

! [remote rejected] master -> master (pre-receive hook declined) 
```

我的 gem 文件中没有回形针 3.1.3。我不确定它为什么要寻找回形针 3.1.3 这是我的 gem 文件

```
source 'http://rubygems.org'

gem 'rails', '~> 3.2.6'
gem 'asset_sync'
group :assets do
  gem 'uglifier', '>= 1.0.3'
end
gem 'sass-rails', "  ~> 3.2.3"

gem "activemerchant",  '~> 1.17.0' #, :lib => 'active_merchant'
gem 'authlogic', "3.0.3"
gem 'bluecloth',     '~> 2.1.0'
gem 'cancan', '~> 1.6.7'
gem 'compass', '~> 0.12.rc.0'
gem 'compass-rails'
gem 'dalli', '~> 1.1.5'

gem "friendly_id", "~> 3.3"
gem 'haml',  ">= 3.0.13"#, ">= 3.0.4"#, "2.2.21"#,
gem "jquery-rails"

gem 'aws-sdk'

group :production do
  gem  'pg'
  gem 'thin'
end

gem 'nested_set', '~> 1.6.3'
gem 'nokogiri', '~> 1.5.0'
gem 'paperclip', '~> 3.0'
gem 'prawn', '~> 0.12.0'

gem 'rails3-generators', '~> 0.17.0'
gem 'rmagick',    :require => 'RMagick'

gem 'rake', '~> 0.9.2'
gem 'state_machine', '~> 1.1.2'

gem 'sunspot_solr'
gem 'sunspot_rails', '~> 1.3.0rc'

gem 'will_paginate', '~> 3.0.0'
gem 'dynamic_form'

group :development do
  gem 'sqlite3'

  gem "autotest-rails-pure"

  gem "rails-erd"
  gem "ruby-debug19"

end
group :test, :development do
  gem "rspec-rails", "~> 2.8.0"
  gem 'capybara', :git => 'git://github.com/jnicklas/capybara.git'
  gem 'launchy'
  gem 'database_cleaner'
end

group :test do
  gem 'factory_girl', "~> 3.3.0"
  gem 'factory_girl_rails', "~> 3.3.0"
  gem 'mocha', '~> 0.10.0', :require => false
  gem 'rspec-rails-mocha'
  gem "rspec",        "~> 2.8.0"
  gem "rspec-core",         "~> 2.8.0"
  gem "rspec-expectations", "~> 2.8.0"
  gem "rspec-mocks",        "~> 2.8.0"
  gem 'email_spec'
  gem "faker"
  gem "autotest", '~> 4.4.6'
  gem "autotest-rails-pure"
  gem "autotest-growl"
  gem "ZenTest", '4.6.2'

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:00:00.783

Paperclip 3.1.3 版由于某种原因被“猛拉”。您可以在[该版本的 RubyGems 页面](http://rubygems.org/gems/paperclip/versions/3.1.3)上看到这一点。显然，您的 Gemfile 是在此 Gem 可用的短暂时间内捆绑在一起的。

如果您不想升级到最新版本 (3.3.1)，它会立即替换 3.1.4 版本。

要使用它，您应该更新您的 Gemfile 以读取：

```
gem 'paperclip', '~> 3.1.4' 
```

`bundle update paperclip`编辑 Gemfile 后运行。

> “我的 gem 文件中没有回形针 - 3.1.3。我不确定它为什么要寻找回形针 3.1.3”

`~>3.0`就像说`>=3.0`and `<4.0`。因此 3.1.3 是有效的。相关文档可在[Bundler 网站上找到](http://gembundler.com/v1.2/gemfile.html)。

# ios - iOS 6 原生 Facebook/Twitter 登录信息

> ID：13664574
> 
> 赞同：0
> 
> 时间：2012-12-01T22:52:18.677
> 
> 标签：ios, facebook, twitter, ios6, slcomposeviewcontroller

我想在 iOS6 中使用 SLComposeViewController 在我的应用程序中添加 Facebook/Twitter 发布，我只想添加一个检查用户是否已经在设备上登录到 Facebook/Twitter。所以我的问题是，是否有必要添加这种支票？iOS 6 会自动处理这个问题吗？如果我确实需要添加它，该怎么做？我环顾四周，但在这方面找不到太多帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T23:41:19.040

在我看来这是一个错误，但如果用户尚未在他们的设备上设置 Twitter/Facebook 帐户，它就不会出现在 UIActivity 操作表中。

对于现有的 iOS 6 Apple 应用程序，此错误不存在，因此当用户在操作表上点击 Twitter 并且如果他们尚未设置帐户时，将出现 UIAlert 并询问用户是否愿意转到设置以配置新帐户。不幸的是，直到或如果错误得到修复，第 3 方应用程序才能获得此功能。

# java - 每个阵列与每个

> ID：13664576
> 
> 赞同：0
> 
> 时间：2012-12-01T22:52:38.587
> 
> 标签：java, arrays, list, each

我正在尝试以下操作：我在列表中有 n 个数组。每个数组都有可变大小。

例子：

```
List<char[]> list = ArrayList<char[]>();
char[] a = {'0'};
char[] b = {'1','2'};
char[] c = {'3','4','5'};
list.add(a);list.add(b);list.add(c);
... algorithmus 
```

结果应该是这样的：

```
0-1-3
0-1-4
0-1-5
0-2-3
0-2-4
0-2-5 
```

要做到这一点，我会使用三个 for 循环。但我需要它动态。有人知道吗？

# reporting-services - ReportRenderingException MemoryStream 长度必须为非负数且小于 2^31

> ID：13664580
> 
> 赞同：2
> 
> 时间：2012-12-01T22:53:28.530
> 
> 标签：reporting-services, sql-server-2008-r2, aspose

我们有一些包含多个图表的 SSRS 报告。这些报告通过自定义 .NET MVC 应用程序呈现为 PDF，或使用 Aspose 幻灯片呈现到 PowerPoint。

我们最近将报告从 2005 SSRS 服务器移至 2008 R2 SSRS 服务器。这些报告大多运作良好。但是，当页面数量很大（19）并且我们尝试渲染到 PowerPoint（PDF 可以正常工作）时，一份报告会引发以下错误。

> 错误消息：Microsoft.ReportingServices.OnDemandReportRendering.ReportRenderingException：报告呈现期间发生错误。---> System.ArgumentOutOfRangeException：MemoryStream 长度必须为非负且小于 2^31 - 1 - 原点。参数名称：偏移量

如果应用不同的过滤器导致页面更少，则相同的报表可以很好地呈现给 PowerPoint。

这似乎是一个 SSRS 问题，但我不确定。它会是 Aspose，甚至是自定义的 .NET 应用程序吗？

# file - Jenkins 从 Workspace 中删除文件

> ID：13664582
> 
> 赞同：3
> 
> 时间：2012-12-01T22:53:40.173
> 
> 标签：file, jenkins, copy, jobs

我有 jenkin 的工作，它从 linux 用户文件夹复制 tar 文件，然后从另一个工作复制二进制文件（已编译）并制作新的 tar 文件。然后 jenkins 用户可以从 jenkin 的工作区复制新的 tar 文件。它不构建任何东西或从 SCM 获取文件。然后过了一会儿，突然 tar 文件已从工作区中删除，我不得不再次运行作业。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-01T23:24:12.023

你真的不应该依赖工作完成后存在的工作空间，因为工作空间可能会被另一个开始的构建覆盖，或者当有人删除构建时，被奴隶离线等等......

由于您想保存文件以供以后使用，您应该在作业的构建后配置中使用“存档工件”选项。`**/*.tar`例如，如果您输入，Jenkins 将在构建结束时保存所有 TAR 文件。

然后您可以使用 Jenkins 的永久链接来访问工件，例如：
`http://JENKINS/job/JOB_NAME/lastSuccessfulBuild/artifact/bin/my-app.tar`

正如 URL 所暗示的，这将为您提供*上次成功*构建的文件。

* * *

作为旁注，如果您想将归档文件复制到另一个版本，最好的方法是使用[Copy Artifact 插件](https://wiki.jenkins-ci.org/display/JENKINS/Copy+Artifact+Plugin)。

这样 Jenkins 会为您处理文件复制，即使跨多个 Jenkins 从属服务器，您也不必做任何讨厌的事情，比如硬编码到其他 Jenkins 工作区的路径。

# r - eval 中的错误（expr，envir，enclos） - 矛盾？

> ID：13664585
> 
> 赞同：9
> 
> 时间：2012-12-01T22:54:06.677
> 
> 标签：r, ggplot2

### 编辑以提供更完整的代码示例和特定问题

我正在编写一个函数来生成股票价格的时间序列图。但是，我收到以下错误

eval 中的错误（expr、envir、enclos）：找不到对象“df1234”

下面是一个函数示例：

```
plot.prices <- function(df1234) {
  require(ggplot2)
  g <- ggplot(df1234, aes(x= as.Date(Date, format= "%Y-%m-%d"), y= df1234[, 3], 
              colour= brewer.pal(12,"Set3")[1])) + geom_point(size=1)
  g + geom_point(aes(x= date, y = df1234[, 4], 
                 colour= brewer.pal(12,"Set3")[2]), size=1)

  # ... code not shown...
  g
} 
```

和示例数据：

```
spy <- read.csv(file= 'http://ichart.finance.yahoo.com/table.csv?s=SPY&d=11&e=1&f=2012&g=d&a=0&b=29&c=1993&ignore=.csv', header= T)

plot.prices(spy) # produces error
g <- ggplot(spy, aes(x= as.Date(Date, format= "%Y-%m-%d"), y= spy[, 3], 
              colour= brewer.pal(12,"Set3")[1])) + geom_point(size=1)
  g + geom_point(aes(x= as.Date(Date), y = spy[, 4], 
                 colour= brewer.pal(12,"Set3")[2]), size=1)
## does not produce error 
```

如您所见，代码是相同的。如果对 ggplot() 的调用在函数内部，但如果对 ggplot() 的调用在函数外部，则不会出现错误。

### 任何人都知道为什么看似矛盾？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T23:02:24.560

发生错误是因为您在 gglpot2 中使用 df[, 7]，使用列名 Adj.Close 将解决问题。

```
 g <- ggplot(df, aes(x= as.Date(Date, format= "%Y-%m-%d"),
                  y= Adj.Close)) + geom_point(size=1) 
```

实际上错误，它是一个范围错误。**aes**找不到 df 环境。它试图在全局范围内寻找它。

如果您想使用索引调用，您可以使用**aes_string**例如，并操作字符串而不是表达式

```
plot.prices <- function(df) {
  require(ggplot2)

  df$Date <- as.Date(df$Date, format= "%Y-%m-%d")

  g <- ggplot(df, aes_string(x= 'Date',
                      y= colnames(df)[7])) + geom_point(size=1)

  # ... code not shown...
  g
} 
```

![在此处输入图像描述](../Images/39fc1eaf9d4fc57863b9dab24bad5ded.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T02:27:48.150

我不确定这是否是您想要的，但它可能会有所帮助。我修改了agstudy的代码：

```
spy <- read.csv(file= 'http://ichart.finance.yahoo.com/table.csv?s=SPY&d=11&e=1&f=2012&g=d&a=0&b=29&c=1993&ignore=.csv', header= T)

library(ggplot2)
library(RColorBrewer)

 plot.prices <- function(df) {

   df$Date <- as.Date(df$Date, format= "%Y-%m-%d")

   g <- ggplot(df, aes_string(x='Date', y= colnames(df)[3])) + 
                   geom_point(colour= brewer.pal(12,"Set3")[1], size=1)

   gg <- g + geom_point(aes_string(x='Date', y= colnames(df)[4]),
                   colour= brewer.pal(12,"Set3")[2], size=1)
   gg
 }

 plot.prices(spy) 
```

这是不使用的代码`brewer.pal`：

```
library(ggplot2)

spy <- read.csv(file= 'http://ichart.finance.yahoo.com/table.csv?s=SPY&d=11&e=1&f=2012&g=d&a=0&b=29&c=1993&ignore=.csv', header= T)

 plot.prices <- function(df) {

   df$Date <- as.Date(df$Date, format= "%Y-%m-%d")

   g <- ggplot(df, aes_string(x='Date', y= colnames(df)[3])) + 
                   geom_point(colour= 'green', fill='green', size=1)

   gg <- g + geom_point(aes_string(x='Date', y= colnames(df)[4]),
                   colour= 'black', fill='black', size=1)
   gg
 }

 plot.prices(spy) 
```

# android - 通过 Android 应用从乐高超声波/颜色传感器读取数据

> ID：13664588
> 
> 赞同：2
> 
> 时间：2012-12-01T22:54:24.867
> 
> 标签：android, sensors, lego

我正在开发用于控制 Lego Mindstorm 的 Android 应用程序。我已经完成了基本操作（我可以连接、发送、接收消息），所以我可以控制电机。但我对传感器有疑问。我连接了超声波和颜色传感器。为了控制超声波传感器，我发送了一条带有 Lowspeed9V 和 Rawmode 参数的消息 SETINPUTMODE，但是当我使用 GETINPUTVALUES 时，它总是返回距离 0。我尝试在消息中使用其他传感器类型，但它返回 0 或不随实际距离变化的值。对于颜色传感器，无论我使用什么参数，它都不会发光（传感器工作正常，我直接在 NXT 和 PC 上检查过）。我需要的是一个建议，无论我做错了什么，还是一个不需要在机器人上安装任何东西的工作代码，因为它是学校的财产。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-08T03:43:15.130

**1\. 使用参数 LOWSPEED__9V (0x0B) 和 RAWMODE (0x00) 的 SETINPUTMODE (0x05) 命令设置输入模式。**

因此，**SETINPUTMODE**命令将发送以下字节**{0x00, 0x05, 0x03, 0x0B, 0x00}**，其中：

```
 0x00: DIRECT REPLY or 0x80 DIRECT NO REPLY
 0x05: SETINPUTMODE
 0x03: Port where the sensor is connected. The documentation recommends port 4 for ultrasonic sensor.
 0x0B: LOWSPEED__9V
 0x00: RAWMODE 
```

**2\. 使用 LSWRITE (0x0F) 命令告诉 NXT 您希望得到多少字节的答案。**

因此**LSWRITE**命令将发送以下字节**{0x00, 0x0F, 0x03, 0x02, 0x01, 0x02, 0x42}**，其中：

```
0x00: DIRECT REPLY or 0x80 DIRECT NO REPLY
0x0F: LSWRITE
0x03: Port where the sensor is connected. The documentation recommends port 4 for ultrasonic sensor.
0x02: Tx -> Transmitted Data Length
0x01: Rx -> Receive Data Length
0x02: Byte 5 is the i2c address of the device, for the NXT it is usually 0x02.
0x42: This is the register you are attempting to write to. It is device dependent. For the NXT Ultrasonic Sensor 0x41 is used for commands, and the read registers are in 0x42 to 0x49 so you could use any from 0x42 to 0x49. 
```

**3\. 使用 LSGETSTATUS (0x0E) 命令告诉 NXT 您已准备好接收答案。**

因此**LSGETSTATUS**命令将发送以下字节**{0x00, 0x0e, 0x03}**，其中：

```
0x00: DIRECT REPLY
0x0E: LSGETSTATUS
0x03: Port where the sensor is connected. The documentation recommends port 4 for ultrasonic sensor. 
```

**4\. 等待成功值 = 0x00 的回复。**

因此，一旦达到这一点，您必须继续发送**LSGETSTATUS**命令，直到您获得成功（0），因为这意味着答案已准备好阅读。如果**LSGETSTATUS**回复返回一个不同于 0 的值，那么答案还没有准备好。给它一些时间，也许是 300 毫秒。

正确的回复数据将如下所示**{0x02, 0x0e, 0x00, 0x01}**其中：

```
0x02: REPLY
0x0E: LSGETSTATUS
0x00: SUCCESS (different from 0x00 means a specific error. Take a look at the documentation if you need to)
0x01: Bytes ready to be read. 
```

**5\. 使用 LSREAD (0x10) 命令读取值。**

因此**LSREAD**命令将发送以下字节**{0x00, 0x10, 0x03}**，其中：

```
0x00: DIRECT REPLY
0x10: LSREAD
0x03: Port where the sensor is connected. The documentation recommends port 4 for ultrasonic sensor. 
```

**6\. NXT 积木响应后，您将获得以厘米为单位的距离。**

正确的回复数据将如下所示**{0x02, 0x10, 0x00, 0x01, byte1, byte2, byte3, ......, byte19}**其中：

```
0x02: REPLY
0x10: LSREAD
0x00: SUCCESS (different from 0x00 means a specific error. Take a look at the documentation if you need to)
0x01: Bytes that contains the answer. You asked for 1 byte.
byte1...byte19: Zero-padded -> HERE IS THE ANSWER 
```

读取对应于数组第 5 个字节的答案的第一个字节。它的值将是传感器读取的距离。范围为 1 至 255 厘米。

**7\. 循环重复步骤 2 到 6，不断向传感器询问距离。**

# java - 分区循环理解

> ID：13664597
> 
> 赞同：0
> 
> 时间：2012-12-01T22:55:29.763
> 
> 标签：java, quicksort

为什么分区方法的循环体从不抛出 ArrayIndexOutOfBounds 异常？

```
public static int partition( int[] a, low, high ) {

    int k = low, m = low;

    /* loop invariant:
    *     low <= k <= m <= high  and
    *     all elements in a[low..k-1] are RED (i.e., < pivot) and
    *     all elements in a[k..m-1] are BLUE (i.e., >= pivot)
    */
    while (m != high)  {
       if (a[m] >= pivot)     // a[m] is BLUE
          { }
       else  {                // a[m] is RED
          swap(a,k,m);
          k = k+1;
       }
       m = m+1;
    }
    return k;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T23:13:20.247

```
// m <= high (loop invariant)
while (m != high)  {
    // m < high, hence correct index
    a[m] ...

    m = m + 1;
    // m <= high (loop invariant)
} 
```

思想交换不会改变 m。也许你认为 k 和 m 交换了，但可能是 a[k] 和 a[m]。因为 m 是一个局部 int 变量，而 int 是按值传递的。

即使 m 和 k 交换：m <= high

循环不变量 k <= m 保持不变：

```
// k <= m
if (...) {
    swap(a, k, m);
    // m <= old m // if call-by-reference

    k = k + 1;
    // k - 1 <= m if call-by-value
}
m = m + 1;
// k <= m again; if call-by-value 
```

# java - 组件不会在小程序中调整大小

> ID：13664598
> 
> 赞同：2
> 
> 时间：2012-12-01T22:55:55.143
> 
> 标签：java, swing, applet, resize, gridbaglayout

我的目标是让我的组件根据我的 GridBagConstraints 调整大小，但由于某种原因，当我的小程序运行时，组件会出现，但不会像我预期的那样填满整个小程序。这是我的代码：

服务器面板：

```
public class ServerPanel extends JPanel{
    public ServerPanel(){
    setLayout(new GridBagLayout()); //use gridbag layout
    GridBagConstraints gbc = new GridBagConstraints();

    JButton reverse = new JButton("Reverse text");
    JButton send = new JButton("Send text");
    JButton clear = new JButton("Clear text");
    JTextField text = new JTextField("Test");
    JScrollPane scrollPane = new JScrollPane(text, ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS, ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);

    //Reverse button
    gbc.gridx = 0;
    gbc.gridy = 0;
    gbc.fill = gbc.HORIZONTAL;
    add(reverse, gbc);

    //send button
    gbc.gridy = 1;
    add(send, gbc);

    //clear button
    gbc.gridy = 2;
    add(clear,gbc);

    //text field
    gbc.gridy = 3;
    gbc.ipadx = 20;
    gbc.ipady = 20;
    gbc.fill = gbc.BOTH;
    add(scrollPane, gbc);
    }

} 
```

扩展 JApplet 的 ServerApplet 的相关代码：

```
public void init(){
        //dim = getSize();
        //create the GUI in the EDT
        SwingUtilities.invokeLater(new Runnable(){
        @Override
        public void run(){
            //System.out.println(dim);
            setLayout(new BorderLayout());
            add(new ServerPanel(), BorderLayout.CENTER);

        }
    });
} 
```

发生的情况是创建了正确的组件，并且面板在小程序中居中，但它不会扩展以填充整个小程序。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T23:09:05.533

当我看到这个：

> 但由于某种原因，当我的小程序运行时，组件出现了，但没有像我预期的那样填满整个小程序......

与 GridBagLayout 一起使用时，我查看是否在 GridBagConstraints 上设置了 weightx 和 weighty 字段，因为它们被保留为默认值 0 的症状是组件都聚集在中心。

解决方案：在需要的地方和时间设置这些字段。如果一个组件应该在 x 方向上扩展，那么给它一个 + weightx，也许是 1.0，对于 weighty 也是如此。

# java - 如何获取带有逗号和空格的字符串并存储在数组变量中

> ID：13664608
> 
> 赞同：0
> 
> 时间：2012-12-01T22:57:23.727
> 
> 标签：java, android, arrays

我有这个代码：

```
 tvData1 = (TextView)findViewById(R.id.tvData1);
    tvData2 = (TextView)findViewById(R.id.tvData2);
    tvData3 = (TextView)findViewById(R.id.tvData3);
    GetData data= new GetData();
    try {
        SharedPreferences getName = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
        String name = getName.getString("name", "");
        String returned = data.getData(name); //Gets data from internet
        String[] dataSplit = returned.split(",");
        for(int i = 0; i < dataSplit.length; i++){
            String stringData1 = dataSplit[0];
            String stringData2 = dataSplit[1];
            String stringData3 = dataSplit[2];

            tvData1.setText(stringData1);
            tvData2.setText(stringData2);
            tvData3.setText(stringData3);
        } 
```

嗯，从网上得到的字符串是这样的：

```
"1,2,3 4,5,6" 
```

并且该空间在 3 到 4 之间的位置实际上显示在一个新行中，例如：

```
1,2,3
4,5,6 
```

但基本上我想要的结果是

```
stringData1 = 1
stringData2 = 2
stringData3 = 3
stringData4 = 4
etc... 
```

代替：

```
stringData1 = 1
stringData2 = 2
stringData3 = 3 4 
```

这就是它现在正在做的事情。

我似乎遇到的另一个不相关的问题是 tvData2 无论如何都不会 setText，即使我做了 tvData2.setText("Some Text");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:12:31.500

`String`的`split()`方法采用正则表达式。所以可能你可以在表达式中有一个字符类，它会在逗号和换行符上分开。也许以下会起作用。（*编辑：刚刚对其进行了测试，它确实对我有用。*）

```
String[] dataSplit = returned.split("[,\n]"); 
```

另一种选择可能是使用空格的快捷方式，以拆分*所有*空格字符：`\s`. （请注意，您需要转义`\`字符：

```
String[] dataSplit = returned.split("[,\\s]"); 
```

经过测试，这也适用于字符串`"1,2,3\n4,5,6"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T23:13:42.310

应该管用...

```
 returned.split("[,\\s]+"); 
```

# ios - UISlider 移动 UIImage

> ID：13664610
> 
> 赞同：2
> 
> 时间：2012-12-01T22:57:46.093
> 
> 标签：ios, xcode

我正在使用 UIslider 在屏幕上左右移动 UIImage。当 UISlider 完全在左侧时，图像将在屏幕左侧 X 轴上的某个位置，当滑块完全在右侧时，图像在屏幕右侧。例如，如果我想让图像灵活移动 600 像素，我该怎么做？

```
-(IBAction)sliderValueChanged:(UISlider *)sender
{

if (sender.value >= 0.5) {

int value;
value = sender.value * 6;

[photoView setFrame:CGRectMake(photoView.frame.origin.x + value,
                                PhotoView.frame.origin.y,photoView.frame.size.width,photoView.frame.size.height)];
}else{

int value;
value = sender.value * -6;

[photoView setFrame:CGRectMake(photoView.frame.origin.x + value,
                               photoView.frame.origin.y,photoView.frame.size.width,photoView.frame.size.height)];

} 
```

...这是我的猜测

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T23:30:52.933

我最近不得不做与您尝试做的相同的事情，以便在 iPad/iPhone 充当仪表仪表的全尺寸飞机上使用。

这是我用来移动飞机仪表读数的图像的代码： 此外，您应该将浮点值四舍五入为 int，因为我们正在处理整个像素点。（图像仍然可以使用浮点值很好地移动，但我喜欢在处理像素点时使用 int。）

```
#import "ViewController.h"
#import <math.h>

@interface ViewController()

@property (nonatomic, strong) IBOutlet UIImageView *XAxis;
@property (nonatomic, strong) IBOutlet UISlider *XSlider;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.XSlider.minimumValue = 0.0f;
    self.XSlider.maximumValue = 600.0f;
}

- (IBAction)XValueChanged:(UISlider *)XSlider;
{
    int XResult = (int)floorf(XSlider.value);

    self.XAxis.center = CGPointMake(self.XAxis.center.x, XResult);

    NSLog(@"X Value: %d", XResult);
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T23:13:40.080

这样的事情怎么样

```
slider.minimumValue = 0.0f;
slider.maximumValue = 600.0f;

-(IBAction)sliderValueChanged:(UISlider *)sender
{
  [photoView setFrame:CGRectMake(sender.value, PhotoView.frame.origin.y,photoView.frame.size.width,photoView.frame.size.height)];
} 
```

您也可以通过根据要设置 photoView 的位置更改某个固定数字的位置来执行此`photoView.frame.origin.x + value`操作`floatValue + value`。`floatValue`还要计算值作为`value = sender.value * constant`where`constant`再次取决于每次滑块移动需要移动多少。

查看[文档以获取有关属性的更多详细信息](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISlider_Class/Reference/Reference.html)

# macos - 应用程序不适用于 10.6

> ID：13664611
> 
> 赞同：1
> 
> 时间：2012-12-01T22:57:55.703
> 
> 标签：macos, cocoa, compatibility

我目前正在为 Mac OS X 开发我的 Windows 游戏的端口，当在 OS X 10.8 上使用 Xcode 4.5.2 编译时，它在我的 Mac 上运行良好，但在运行 10.6 的朋友 Mac 上崩溃。起初我以为这是由于我一直在使用的框架之一，但标准的 Cocoa 应用程序模板也崩溃了，没有任何可见的错误消息。

我已经尝试将部署目标设置为 10.5，但这并没有改变任何东西。启动应用程序时，它会在 Dock 中出现一小段时间，然后消失，不显示任何类型的 UI 或错误消息。

# java - 丰富：dataScroller 不起作用

> ID：13664614
> 
> 赞同：1
> 
> 时间：2012-12-01T22:58:33.940
> 
> 标签：java, jsf-2, richfaces

这是场景，我有一个数据库表，其中包含客户已支付和未支付的账单。在托管 bean 中，这由 Map<Cliente, List<Carrito> 表示，其中 Cliente 是每个客户，List<Carrito> 是未支付的账单列表。

我通过查询获得了这张地图，同时我计算了客户在地图上的账单金额。此计数器值用于初始化属性（int[] 页）。

该地图显示在每个客户的一个丰富的数据表中。每个数据表都是分页的，我在它们的页脚中设置，

```
<rich:dataScroller page="#{adminCarritoBean.page[current.index]}"/> 
```

是 current.index 的索引

```
<ui:repeat varStatus=”current”&gt; 
```

用于选择每一对 Cliente-List<Carrito>。

现在的问题。每次在数据表中选择一个页面时，我都会得到一个 ClassCastException。我有一个样本，有两个客户，一个有三张钞票，另一个有六张钞票。每张桌子都显示五张钞票，所以当分页的一张显示在第二位时，我无法分页，页脚被锁定。

这是代码，

```
<ui:repeat value="#{adminCarritoBean.clientes.entrySet().toArray()}"
    var="cliente" varStatus="current" id="repeat">
    <table style="border-collapse:collapse; border:1px solid black;">
    <tbody>
      <tr><td>
          <h:outputText value="#{cliente.key.nombre} #{cliente.key.apellido1} #{cliente.key.apellido2}" />
          </td></tr>
    </tbody>
</table>
<c:set value="#{adminCarritoBean.selectedIds.get(cliente.key)}" var="mapIds"/>
<rich:dataTable id="crtoTable" value="#{cliente.value}"
        var="crto" iterationStatusVar="it" rows="5">
    <rich:column>
    <f:facet name="header">Referencia</f:facet>
    <h:outputText value="#{crto.referencia}" />
    </rich:column>
    <rich:column>
    <f:facet name="header">Fecha de Compra</f:facet>
    <h:outputText value="#{crto.fechaCompra}" />
    </rich:column>
    ----------------------------
        ----------------------------
    <rich:column>
    <f:facet name="header">Select</f:facet>
    <h:selectBooleanCheckbox value="#{mapIds[crto.id]}" />
    </rich:column>
    <f:facet name="footer">
        <rich:dataScroller page="#{adminCarritoBean.page[current.index]}"/>
    </f:facet>
</rich:dataTable>
<br />
</ui:repeat> 
```

初始化int[]页面的代码如下，

```
if(count > 0) {
loadList = true;
if((null == page) || ((null != page) && (count < page.length))) {
    page = new int[count];
    for(int i = 0; i < count; i++) {
        page[i] = 1;
    }
}
} 
```

# iphone - 围绕由 CGMutablePaths 组成的 Shape 拖动 UIView

> ID：13664615
> 
> 赞同：10
> 
> 时间：2012-12-01T22:58:39.440
> 
> 标签：iphone, ios, cocoa-touch

我有一个简单的椭圆形（由 CGMutablePaths 组成），我希望用户能够从中拖动一个对象。只是想知道这样做有多复杂，我是否需要了解大量的数学和物理知识，或者是否有一些简单的内置方法可以让我做到这一点？IE 用户将这个对象拖到椭圆周围，然后它围绕它运行。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-02T06:51:34.423

这是一个有趣的问题。我们想拖动一个对象，但将其限制在一个`CGPath`. 你说你有一个“简单的椭圆形”，但这很无聊。让我们用图 8 来做。当我们完成后它看起来像这样：

![图 8 拖动](../Images/8e3f6cc67448e41d7c728ea3719ab7a8.png)

那么我们该怎么做呢？给定一个任意点，在贝塞尔样条曲线上找到最近的点相当复杂。让我们用蛮力来做。我们将沿路径创建一个紧密间隔的点数组。对象从这些点之一开始。当我们尝试拖动对象时，我们将查看相邻点。如果其中一个更近，我们会将对象移动到该相邻点。

即使沿着 Bezier 曲线获得一组紧密间隔的点也并非易事，但有一种方法可以让 Core Graphics 为我们做这件事。我们可以使用`CGPathCreateCopyByDashingPath`短划线模式。这会创建一条包含许多短线段的新路径。我们将每个段的端点作为我们的点数组。

这意味着我们需要遍历 a 的元素`CGPath`。迭代 a 元素的唯一方法`CGPath`是使用`CGPathApply`函数，该函数接受回调。用块迭代路径元素会更好，所以让我们添加一个类别到`UIBezierPath`. 我们首先使用“单一视图应用程序”模板创建一个新项目，并启用 ARC。我们添加一个类别：

```
@interface UIBezierPath (forEachElement)

- (void)forEachElement:(void (^)(CGPathElement const *element))block;

@end 
```

实现非常简单。我们只是将块作为`info`路径应用程序函数的参数传递。

```
#import "UIBezierPath+forEachElement.h"

typedef void (^UIBezierPath_forEachElement_Block)(CGPathElement const *element);

@implementation UIBezierPath (forEachElement)

static void applyBlockToPathElement(void *info, CGPathElement const *element) {
    __unsafe_unretained UIBezierPath_forEachElement_Block block = (__bridge  UIBezierPath_forEachElement_Block)info;
    block(element);
}

- (void)forEachElement:(void (^)(const CGPathElement *))block {
    CGPathApply(self.CGPath, (__bridge void *)block, applyBlockToPathElement);
}

@end 
```

对于这个玩具项目，我们将在视图控制器中完成其他所有操作。我们需要一些实例变量：

```
@implementation ViewController { 
```

我们需要一个 ivar 来保存对象遵循的路径。

```
 UIBezierPath *path_; 
```

很高兴看到路径，所以我们将使用 a`CAShapeLayer`来显示它。（我们需要将`QuartzCore`框架添加到我们的目标中才能正常工作。）

```
 CAShapeLayer *pathLayer_; 
```

我们需要将沿路径的点数组存储在某处。让我们使用一个`NSMutableData`：

```
 NSMutableData *pathPointsData_; 
```

我们需要一个指向点数组的指针，类型为`CGPoint`指针：

```
 CGPoint const *pathPoints_; 
```

我们需要知道其中有多少点：

```
 NSInteger pathPointsCount_; 
```

对于“对象”，我们将在屏幕上有一个可拖动的视图。我称它为“句柄”：

```
 UIView *handleView_; 
```

我们需要知道句柄当前在哪个路径点上：

```
 NSInteger handlePathPointIndex_; 
```

当平移手势处于活动状态时，我们需要跟踪用户尝试拖动手柄的位置：

```
 CGPoint desiredHandleCenter_;
} 
```

现在我们必须开始初始化所有这些 ivars！我们可以在以下位置创建视图和图层`viewDidLoad`：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [self initPathLayer];
    [self initHandleView];
    [self initHandlePanGestureRecognizer];
} 
```

我们像这样创建路径显示层：

```
- (void)initPathLayer {
    pathLayer_ = [CAShapeLayer layer];
    pathLayer_.lineWidth = 1;
    pathLayer_.fillColor = nil;
    pathLayer_.strokeColor = [UIColor blackColor].CGColor;
    pathLayer_.lineCap = kCALineCapButt;
    pathLayer_.lineJoin = kCALineJoinRound;
    [self.view.layer addSublayer:pathLayer_];
} 
```

注意我们还没有设置路径层的路径！现在知道路径还为时过早，因为我的视图还没有按最终尺寸布局。

我们将为手柄画一个红色圆圈：

```
- (void)initHandleView {
    handlePathPointIndex_ = 0;

    CGRect rect = CGRectMake(0, 0, 30, 30);
    CAShapeLayer *circleLayer = [CAShapeLayer layer];
    circleLayer.fillColor = nil;
    circleLayer.strokeColor = [UIColor redColor].CGColor;
    circleLayer.lineWidth = 2;
    circleLayer.path = [UIBezierPath bezierPathWithOvalInRect:CGRectInset(rect, circleLayer.lineWidth, circleLayer.lineWidth)].CGPath;
    circleLayer.frame = rect;

    handleView_ = [[UIView alloc] initWithFrame:rect];
    [handleView_.layer addSublayer:circleLayer];
    [self.view addSubview:handleView_];
} 
```

同样，现在要知道我们需要将手柄放在屏幕上的确切位置还为时过早。我们将在视图布局时处理这个问题。

我们还需要在手柄上附加一个平移手势识别器：

```
- (void)initHandlePanGestureRecognizer {
    UIPanGestureRecognizer *recognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handleWasPanned:)];
    [handleView_ addGestureRecognizer:recognizer];
} 
```

在视图布局时，我们需要根据视图的大小创建路径，计算路径上的点，使路径层显示路径，并确保手柄在路径上：

```
- (void)viewDidLayoutSubviews {
    [super viewDidLayoutSubviews];
    [self createPath];
    [self createPathPoints];
    [self layoutPathLayer];
    [self layoutHandleView];
} 
```

在您的问题中，您说您使用的是“简单的椭圆形”，但这很无聊。让我们画一个漂亮的图 8。弄清楚我在做什么留给读者作为练习：

```
- (void)createPath {
    CGRect bounds = self.view.bounds;
    CGFloat const radius = bounds.size.height / 6;
    CGFloat const offset = 2 * radius * M_SQRT1_2;
    CGPoint const topCenter = CGPointMake(CGRectGetMidX(bounds), CGRectGetMidY(bounds) - offset);
    CGPoint const bottomCenter = { topCenter.x, CGRectGetMidY(bounds) + offset };
    path_ = [UIBezierPath bezierPath];
    [path_ addArcWithCenter:topCenter radius:radius startAngle:M_PI_4 endAngle:-M_PI - M_PI_4 clockwise:NO];
    [path_ addArcWithCenter:bottomCenter radius:radius startAngle:-M_PI_4 endAngle:M_PI + M_PI_4 clockwise:YES];
    [path_ closePath];
} 
```

接下来，我们将要计算沿该路径的点数组。我们需要一个辅助例程来挑选每个路径元素的端点：

```
static CGPoint *lastPointOfPathElement(CGPathElement const *element) {
    int index;
    switch (element->type) {
        case kCGPathElementMoveToPoint: index = 0; break;
        case kCGPathElementAddCurveToPoint: index = 2; break;
        case kCGPathElementAddLineToPoint: index = 0; break;
        case kCGPathElementAddQuadCurveToPoint: index = 1; break;
        case kCGPathElementCloseSubpath: index = NSNotFound; break;
    }
    return index == NSNotFound ? 0 : &element->points[index];
} 
```

为了找到这些点，我们需要让 Core Graphics “划线”路径：

```
- (void)createPathPoints {
    CGPathRef cgDashedPath = CGPathCreateCopyByDashingPath(path_.CGPath, NULL, 0, (CGFloat[]){ 1.0f, 1.0f }, 2);
    UIBezierPath *dashedPath = [UIBezierPath bezierPathWithCGPath:cgDashedPath];
    CGPathRelease(cgDashedPath); 
```

事实证明，当 Core Graphics 划破路径时，它可以创建稍微重叠的线段。我们希望通过过滤掉与其前身太接近的每个点来消除这些点，因此我们将定义一个最小点间距离：

```
 static CGFloat const kMinimumDistance = 0.1f; 
```

要进行过滤，我们需要跟踪该前任：

```
 __block CGPoint priorPoint = { HUGE_VALF, HUGE_VALF }; 
```

我们需要创建`NSMutableData`将保存`CGPoint`s 的：

```
 pathPointsData_ = [[NSMutableData alloc] init]; 
```

最后，我们准备迭代虚线路径的元素：

```
 [dashedPath forEachElement:^(const CGPathElement *element) { 
```

每个路径元素可以是“移动至”、“线至”、“二次曲线至”、“曲线至”（即三次曲线）或“闭合路径”。除了 close-path 之外，所有这些都定义了一个段端点，我们使用前面的辅助函数来获取它：

```
 CGPoint *p = lastPointOfPathElement(element);
        if (!p)
            return; 
```

如果端点太靠近前一点，我们将其丢弃：

```
 if (hypotf(p->x - priorPoint.x, p->y - priorPoint.y) < kMinimumDistance)
            return; 
```

否则，我们将其附加到数据中并将其保存为下一个端点的前身：

```
 [pathPointsData_ appendBytes:p length:sizeof *p];
        priorPoint = *p;
    }]; 
```

现在我们可以初始化我们的`pathPoints_`和`pathPointsCount_`ivars：

```
 pathPoints_ = (CGPoint const *)pathPointsData_.bytes;
    pathPointsCount_ = pathPointsData_.length / sizeof *pathPoints_; 
```

但是我们还有一点需要过滤。沿路径的第一个点可能太靠近最后一个点。如果是这样，我们将通过减少计数来丢弃最后一点：

```
 if (pathPointsCount_ > 1 && hypotf(pathPoints_[0].x - priorPoint.x, pathPoints_[0].y - priorPoint.y) < kMinimumDistance) {
        pathPointsCount_ -= 1;
    }
} 
```

布拉莫。点数组已创建。哦，是的，我们还需要更新路径层。振作起来：

```
- (void)layoutPathLayer {
    pathLayer_.path = path_.CGPath;
    pathLayer_.frame = self.view.bounds;
} 
```

现在我们可以担心拖动手柄并确保它保持在路径上。平移手势识别器发送此操作：

```
- (void)handleWasPanned:(UIPanGestureRecognizer *)recognizer {
    switch (recognizer.state) { 
```

如果这是平移（拖动）的开始，我们只想将手柄的起始位置保存为所需位置：

```
 case UIGestureRecognizerStateBegan: {
            desiredHandleCenter_ = handleView_.center;
            break;
        } 
```

否则，我们需要根据拖动更新所需位置，然后将手柄沿路径滑动到新的所需位置：

```
 case UIGestureRecognizerStateChanged:
        case UIGestureRecognizerStateEnded:
        case UIGestureRecognizerStateCancelled: {
            CGPoint translation = [recognizer translationInView:self.view];
            desiredHandleCenter_.x += translation.x;
            desiredHandleCenter_.y += translation.y;
            [self moveHandleTowardPoint:desiredHandleCenter_];
            break;
        } 
```

我们添加了一个 default 子句，因此 clang 不会警告我们其他我们不关心的状态：

```
 default:
            break;
    } 
```

最后我们重置手势识别器的翻译：

```
 [recognizer setTranslation:CGPointZero inView:self.view];
} 
```

那么我们如何将手柄移向一个点呢？我们想沿着路径滑动它。首先，我们必须弄清楚它向哪个方向滑动：

```
- (void)moveHandleTowardPoint:(CGPoint)point {
    CGFloat earlierDistance = [self distanceToPoint:point ifHandleMovesByOffset:-1];
    CGFloat currentDistance = [self distanceToPoint:point ifHandleMovesByOffset:0];
    CGFloat laterDistance = [self distanceToPoint:point ifHandleMovesByOffset:1]; 
```

两个方向都有可能将手柄从所需点移得更远，所以在这种情况下让我们摆脱困境：

```
 if (currentDistance <= earlierDistance && currentDistance <= laterDistance)
        return; 
```

好的，因此至少有一个方向会使手柄靠近。让我们弄清楚是哪一个：

```
 NSInteger direction;
    CGFloat distance;
    if (earlierDistance < laterDistance) {
        direction = -1;
        distance = earlierDistance;
    } else {
        direction = 1;
        distance = laterDistance;
    } 
```

但是我们只检查了句柄起点的最近邻居。只要手柄越来越接近所需的点，我们就想沿着该方向的路径滑动尽可能远：

```
 NSInteger offset = direction;
    while (true) {
        NSInteger nextOffset = offset + direction;
        CGFloat nextDistance = [self distanceToPoint:point ifHandleMovesByOffset:nextOffset];
        if (nextDistance >= distance)
            break;
        distance = nextDistance;
        offset = nextOffset;
    } 
```

最后，将句柄的位置更新为我们新发现的点：

```
 handlePathPointIndex_ += offset;
    [self layoutHandleView];
} 
```

如果手柄沿着路径移动了一些偏移量，那就只剩下计算手柄到点的距离的小问题了。你的老伙伴`hypotf`计算欧几里得距离，所以你不必：

```
- (CGFloat)distanceToPoint:(CGPoint)point ifHandleMovesByOffset:(NSInteger)offset {
    int index = [self handlePathPointIndexWithOffset:offset];
    CGPoint proposedHandlePoint = pathPoints_[index];
    return hypotf(point.x - proposedHandlePoint.x, point.y - proposedHandlePoint.y);
} 
```

（您可以通过使用平方距离来避免计算平方根来加快速度`hypotf`。）

还有一个小细节：点数组的索引需要在两个方向上环绕。这就是我们一直依靠神秘的`handlePathPointIndexWithOffset:`方法来做的事情：

```
- (NSInteger)handlePathPointIndexWithOffset:(NSInteger)offset {
    NSInteger index = handlePathPointIndex_ + offset;
    while (index < 0) {
        index += pathPointsCount_;
    }
    while (index >= pathPointsCount_) {
        index -= pathPointsCount_;
    }
    return index;
}

@end 
```

鳍。我已将所有代码放在[一个 gist 中以便于下载](https://gist.github.com/4187399)。享受。

# ios - 尽管匹配 x-coredata id，但“CoreData 不支持持久的跨存储关系”

> ID：13664616
> 
> 赞同：7
> 
> 时间：2012-12-01T22:58:41.553
> 
> 标签：ios, sqlite, core-data

在将 iOS 6.0.1 上的 Core Data 托管对象上下文保存到 SQLite 存储时，我遇到了一个奇怪的“CoreData 不支持持久的跨存储关系”异常。它涉及模型中 Quotes 和 AbstractSources 之间的一对一关系。在运行时，它涉及 Quote 和 Book （其中 Book 继承自 AbstractSource。在模型编辑器中一切正常。）

我研究了类似的报告并涵盖了报告的原因：

1.  我正在使用 assignObject:toPersistentStore: 将 Quote 和 Book 分配给同一个持久存储，因此两者都未分配。
2.  错误描述显示所有“绝对”x-coredata id 都以相同的前缀开头（例如“x-coredata://82B3BEB3-60F2-4912-AC80-11AAD29CFF99/”，所以似乎只有一个商店在使用中.

我的问题是：

1.  还有什么我需要检查的吗（也许 sg. 与 AbstractSource 相关，我没有在我的源中触摸/控制它？我正在通过调用 initWithEntity:insertIntoManagedObjectContext 来创建 Quote 和 Book 。）
2.  我注意到错误描述还包括几个“相对”x-coredata id（形式为“x-coredata:///...”）。难道绝对形式总是被认为是“跨数据库”，即使“绝对”前缀（见上面的例子）是一样的？如果是这样，我如何影响“绝对”和“相对”x-coredata id 之间的任何选择？

谢谢（非常）您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:42:44.103

所以这就是（大概）造成麻烦的原因：

1.  我的托管对象上下文的协调器必须管理两个持久存储。现在，我分配 Quote 和 Book 并希望它们保存的那个在启动时被重置。此代码中有一个错误，导致该商店无法使用。由于第二个可用，它默默地接管了，在这种情况下会导致不需要的结果。教训：我现在断言在设置核心数据堆栈后确实有/仍然有两个商店。
2.  在我的 Core Data 模型的早期开发过程中，我在模型编辑器中重命名了它的一些实体。错误地，我只更改了名称，但没有更改实体类属性。因此，实际上，虽然模型编辑器中的一切运行良好，但在运行时使用了当时意外的类，因此意外的类也分配给了意外/错误的存储。教训：我现在确保实体名称和它们的类属性保持完美同步（其他情况允许）。

问题现已解决，我还重构了我的代码/模型以使用（非重叠）[配置](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdMOM.html#//apple_ref/doc/uid/TP40002328-SW3)而不是显式分配，这也应该有助于前进。

再次感谢您的关注

# c# - 确定列表框项目的来源

> ID：13664620
> 
> 赞同：2
> 
> 时间：2012-12-01T22:59:31.837
> 
> 标签：c#, winforms, list, object, .net-4.0

我正在开发一种应用程序，该应用程序需要我有一个列表框来保存数据。

从列表框中删除对象时，我遇到了一个小问题。当我用两个单独列表中的项目填充列表框时，问题就出现了。

通常要删除对象，我会获取它的索引，然后将其从单独类中的列表中删除，然后重新加载列表框以反映更改，但在某些情况下，我需要用来自两个不同列表的对象填充列表框和确定要从两个列表之一中删除的对象的来源，我不完全确定如何执行此操作。

此代码正在填充列表框控件。//清除列表框中的所有项目 ViewListBox.Items.Clear();

```
 //create the lists
        List listOfPickups = visits.listPickups();
        List listOfdeliveries = visits.listDeliveries();
        //populate
        ViewListBox.Items.AddRange(listOfPickups.ToArray());
        ViewListBox.Items.AddRange(listOfdeliveries.ToArray()); 
```

当我只从一个列表中加载列表框时，这就是我删除的方式。

```
 if (ViewListBox.SelectedIndex < 0)
        {
            EditSelectBtn.Enabled = false;
            DeleteSelectBtn.Enabled = false;
        }
        else
        {
            if (MessageBox.Show("are you sure you want to delete the selected item?", "Are You Sure?", MessageBoxButtons.YesNo) == DialogResult.Yes)
            {
                visits.removePickup(this.ViewListBox.SelectedIndex);
                //refresh listbox.
                updateList("pickups");
            }
            else
            {
                //clicked no so do nothing!
                ViewListBox.ClearSelected();
            }
        } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T23:05:02.337

您可以定义所选项目的类型，并以简单的条件将其从列表中删除。此外，按索引删除也对您没有帮助。而是传递整个对象

```
object item = ViewListBox.SelectedItem;

if (item is Pickup)
    visits.removePickup(item);
else
    visits.removeDelivery(item); 
```

如果项目具有相同的类型，则使用其他方式获取项目类型（例如某些属性的值）。

**更新**`SelectedIndex`一个问题 - 您可以通过与长度进行比较来确定物品来源`listOfPickups`，因为您首先添加了拾取物品。如果索引大于取货计数，则您正在删除交货。从选定的索引中减去取件计数，以获得您需要删除的交付项目的索引。

```
List<Pickup> listOfPickups = visits.listPickups();
List<Delivery> listOfdeliveries = visits.listDeliveries();
ViewListBox.Items.AddRange(listOfPickups.ToArray());
ViewListBox.Items.AddRange(listOfdeliveries.ToArray());
//...

if (ViewListBox.SelectedIndex < listOfPickups.Count)
{
   // this is a Pickup
   visits.removePickup(ViewListBox.SelectedIndex);
}
else
{
   // this is a delivery
   int deliveryIndex = ViewListBox.SelectedIndex - listOfPickups.Count;
   visits.removeDelivery(deliveryIndex);
} 
```

# sql - oracle什么时候使用ROUND函数

> ID：13664621
> 
> 赞同：0
> 
> 时间：2012-12-01T22:59:33.153
> 
> 标签：sql, oracle

我想使用 oracle 中的日期日期格式将时间值存储在表中。
我还想使用 round 函数将其存储到最近的时间。eg 1700, 1800
我到底什么时候使用round函数来做这个？定义表类型时？或创建表时？或者在使用 INSERT 命令时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T23:36:55.383

在插入件上执行此操作：

```
INSERT INTO your_table (date_col) VALUES (ROUND(SYSDATE,'HH')); 
```

您可以使用任意日期值，为了简单起见，我使用了 SYSDATE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T23:08:53.270

使用`round(<datetime>, 'HH')`. 例子：

```
select round( to_date('2012-01-01 12:30','yyyy-mm-dd hh24:mi')
            , 'HH')
from dual 
```

# facebook-graph-api - Facebook Graph Api：无法获取关键字的最新帖子

> ID：13664622
> 
> 赞同：2
> 
> 时间：2012-12-01T22:59:33.453
> 
> 标签：facebook-graph-api

任何人都可以帮助我，当我使用链接请求时

[https://graph.facebook.com/search?&limit=2&until=now&q=hi&type=post&access_token=AAAAAAITEghMBAIScEzst3h5VpV8pKZA7di2ZC3czxr5](https://graph.facebook.com/search?&limit=2&until=now&q=hi&type=post&access_token=AAAAAAITEghMBAIScEzst3h5VpV8pKZA7di2ZC3czxr5)

注意：出于安全原因，我没有提供有效的令牌。

当我尝试搜索最新帖子时，我总是得到 2012 年 11 月 27 日的结果。我错过了什么吗？请帮忙。提前致谢。结果我得到：

```
{
   "data": [
      {
         "id": "730221920_10151138508071921",
         "from": {
            "name": "Pinky Saowichit",
            "id": "730221920"
         },
         "message": "\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c\u0e19\u0e35\u0e49\u0e2d\u0e32\u0e08\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e2d\u0e2d\u0e31\u0e19\u0e1a\u0e48\u0e2d\u0e22\u0e46 \u0e19\u0e30\u0e04\u0e30 \u0e41\u0e1f\u0e19\u0e04\u0e25\u0e31\u0e1a \u0e43\u0e2b\u0e49\u0e23\u0e39\u0e49\u0e27\u0e48\u0e48\u0e32\u0e04\u0e34\u0e14\u0e16\u0e36\u0e07\u0e19\u0e30\u0e04\u0e30 \u0e41\u0e15\u0e48\u0e15\u0e2d\u0e19\u0e19\u0e35\u0e49\u0e40\u0e23\u0e32\u0e01\u0e33\u0e25\u0e31\u0e07\u0e04\u0e34\u0e14\u0e16\u0e36\u0e07\u0e04\u0e38\u0e13 \u0e04\u0e32\u0e19\u0e18\u0e35\u0e41\u0e25\u0e30\u0e40\u0e17\u0e40\u0e23\u0e0b\u0e48\u0e32\u0e2d\u0e22\u0e48\u0e32\u0e07\u0e21\u0e32\u0e01\u0e46 \u0e2b\u0e38 \u0e2b\u0e38",
         "privacy": {
            "value": ""
         },
         "type": "status",
         "status_type": "mobile_status_update",
         "created_time": "2012-11-27T03:12:32+0000",
         "updated_time": "2012-11-27T07:44:54+0000",
         "likes": {
            "data": [
               {
                  "name": "Weniefredo Laud",
                  "id": "100004751890183"
               },
               {
                  "name": "\u0e1e\u0e23\u0e15 \u0e1c\u0e25\u0e14\u0e35",
                  "id": "100001056963372"
               },
               {
                  "name": "\u0e08\u0e23\u0e34\u0e0d\u0e32 \u0e25\u0e2d\u0e27",
                  "id": "100000046347271"
               },
               {
                  "name": "Noolek Tikamborn",
                  "id": "100003048464258"
               }
            ],
            "count": 6
         }
      },
      {
         "id": "100003971930240_283727615063091",
         "from": {
            "name": "Mariana Salcedo",
            "id": "100003971930240"
         },
         "story": "Mariana Salcedo shared a link.",
         "picture": "http://external.ak.fbcdn.net/safe_image.php?d=AQASxQms6c0xFkdO&w=90&h=90&url=http\u00253A\u00252F\u00252Fask.fm\u00252Fimages\u00252F50x50.gif",
         "link": "http://ask.fm/marianasalcedo/answer/15735435637",
         "name": "CRUSH hi",
         "caption": "jajajajaja que enfadosa erees!",
         "icon": "http://static.ak.fbcdn.net/rsrc.php/v2/yN/x/aS8ecmYRys0.gif",
         "privacy": {
            "value": ""
         },
         "type": "link",
         "status_type": "shared_story",
         "application": {
            "name": "Ask.fm",
            "id": "129215213762342"
         },
         "created_time": "2012-11-27T03:11:38+0000",
         "updated_time": "2012-11-27T03:11:38+0000"
      }
   ],
   "paging": {
      "previous": "https://graph.facebook.com/search?q=hi&limit=2&type=post&access_token=AAAAAAITEghMBAIScEzst3h5VpV8pKZA7di2ZC3czxr5ANnvKPPc1wqYJJZAANd9PI0NKLX5Xk5ReRX3T01iim8BoJp6r16itU8vPxRP&since=1353985952&__previous=1",
      "next": "https://graph.facebook.com/search?q=hi&limit=2&type=post&access_token=AAAAAAITEghMBAIScEzst3h5VpV8pKZA7di2ZC3czxr5ANnvKPPc1wqYJJZAANd9PI0NKLX5Xk5ReRX3T01iim8Bo&until=1353985897"
   }
} 
```

# uiwebview - iOS 6 旋转与来自 UIWebView 的 MPMoviePlayerViewController

> ID：13664624
> 
> 赞同：0
> 
> 时间：2012-12-01T22:59:39.830
> 
> 标签：uiwebview, ios6, orientation, mpmovieplayercontroller

我继承了一个自 iOS 3 时代以来就没有维护过的 iOS 应用程序。该应用程序依赖于 Web 视图来显示一些数据。其中一项功能是以全屏模式显示视频。客户需要的是对设备旋转做出反应的视频，但所有其他视图都应该是纵向的。

我已经设法弄清楚所有的`window.rootViewController`变化`shouldAutorotate`。我只在需要时才让应用程序旋转。我面临的问题是视频旋转“太多”。

如果我向左旋转设备，视频会旋转 180 度（它会进入倒置方向）。向右旋转会导致视图宽度缩小一半，但方向正确。我不太确定问题出在哪里。

有人有类似的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:45:39.800

通过继承一个项目，我确实遇到了同样的问题。就我而言，该应用程序是基于导航的，问题是 main`UINavigationController`的视图被添加为 an 视图的子`UIViewController`视图。

所以，最初我在我的`application:didFinishLaunchingWithOptions:`：

```
self.viewController = [[MyViewController alloc] init];
self.window.rootViewController = self.viewController; 
```

这在`MyViewController`'s上`viewDidLoad`：

```
UINavigationController *navController = [[UINavigationController alloc] init];
[self.view addSubview:navController.view]; 
```

然后我简单地将我的更改`application:didFinishLaunchingWithOptions:`为：

```
self.viewController = [[MyViewController alloc] init];
self.navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
self.window.rootViewController = self.navigationController; 
```

我希望这可以帮助你！

# c++ - 将具有外部实现的模板编译为静态库

> ID：13664625
> 
> 赞同：1
> 
> 时间：2012-12-01T22:59:41.203
> 
> 标签：c++, templates, makefile, static-libraries

我有一些类要编译为外部静态库。我的linked_list.hpp（我正在尝试编译的linked_list的标题）看起来像：

```
#include "list_base.hpp"

template <typename T>

class Linked_list : public List_base <T> {

    public://
        Linked_list();
        ~Linked_list();

    public://accessor functions
        Linked_list<T> * next();//go to the next element in the list
        Node<T> * get_current_node() const;//return the current node
        T get_current() const;//get the current data
        T get(int index) const;//this will get the specified index and will return the data it holds

    public://worker functions
        Linked_list<T> * push(T value);//push a value into the front of the list
        Linked_list<T> * pop_current();//deletes the current_node--resets the current as the next element in the list!
        Linked_list<T> * reset();//this resets the current to the front of the list
        Linked_list<T> * erase(int index);

    private://variables
        Node<T> * current;//store the current node

};

#include "linked_list.cpp"//grab the template implementation file

#endif 
```

我所有的代码头都放在“header”目录中，实现放在我拥有的实现文件夹中。这些作为 -I 目录传递。

我用于编译的 make 文件命令如下所示：

```
static: $(DEPENDENCIES)
    ar rcs liblist_templates.a node.o list_base.o linked_list.o 
```

运行时它给了我这个错误......

```
/usr/bin/ranlib: warning for library: liblist_templates.a the table of contents is empty (no object file members in the library define global symbols) 
```

我创建了一个包含“linked_list.hpp”和其他一些库的主头文件，但是每当我包含它时，它似乎仍在寻找包含的 cpp 文件。我做错了什么？我想创建一个可移植的库，我可以从此代码中放入现有项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T23:07:48.353

如果您的库仅包含模板代码，则它本身无法编译：例如，编译器不知道`T`在链表中将使用哪种类型。

当你编译`linked_list.cpp`时，编译器只实现了基本的语法检查并生成了一个空的目标文件。`ranlib`然后抱怨，因为您要求他从所有这些空目标文件中创建一个空库。

解决方法很简单：什么都不做！您的客户端代码只需要源文件；它不需要链接到任何库。而且您总是需要发送`.cpp`文件，因为没有它们，编译器将无能为力。

# oop - 模型在项目组件之间保持一致有多重要？

> ID：13664634
> 
> 赞同：2
> 
> 时间：2012-12-01T23:00:14.937
> 
> 标签：oop, model-view-controller, database-design, mobile

我有一个包含两个组件的项目，一个服务器端组件和一个客户端组件。由于各种原因，客户端设备没有携带数据库的完整副本。

我的模型在两侧之间具有 1:1 的相关性有多重要？而且，把这个问题延伸到我更关心的问题上，**如果他们不这样做，我是否会遇到任何定时炸弹**？我不是在谈论在每一方都有不同的信息，而是信息的封装方式会有所不同。（显然，存储机制也会有所不同）服务器端将使用单独的表格存储每个用户、每个评论、每个“项目”，并在它们之间创建链接以在必要时收集数据。然而，客户端不应该有一个完整的用户数据库，所以与其链接用户来收集像“名字”这样的东西，我会把它存储在评论中。换句话说...

- - 服务器端 - -

Item: +id //存储关于item的东西

用户：+id +姓名 -密码

评论：+id +itemId +rating +text +userId

--- 设备端 ---

项目：+id +AverageRating

评论：+id +rating +text +userId +name

用户：+id +Name //东西

* * *

基本思想是将某些“关键”信息“向上”移动一级。用户获得与其查询相关的“项目”列表，其中某些面向评论的信息上移（即平均评分）。如果他们想要更多信息，他们会查询项目的详细视图，然后查询实际评论并将其添加到数据集（并显示）。如果他们查询实际评论，则会查询评论并在此过程中获取一些额外的用户信息（也许；我不确定用户是否会对任何其他用户信息有任何用途）。

我的基本担忧是，我不想让用户的带宽或本地存储充斥着他们根本不需要的大量信息，即使适当的数据库规范化表明信息真的应该存储在“较低的' 等级。

我将其表述为一个相当低级别的概念问题，因为这是我试图思考/担心的级别，但如果重要的话，我正在创建一个为 iOS / CoreData 客户端提供数据的 PHP / MySQL 服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T23:28:37.407

在这样的情况下，您要在这样的网络上移动数据，或者您只在客户端上存储一些而不是全部的数据，那么没有完全相同的结构是可以的。

但是，您将希望尽可能使用*相同的术语*和*相同的命名*，以避免混淆什么是什么。（使用相同的术语也是领域驱动设计书中[提到的）](http://martinfowler.com/bliki/UbiquitousLanguage.html)

这不是一个很大的问题，但是两端具有相同的结构将使事情更容易理解。因此，如果您想追求这一点，您可能需要考虑对正在传输的数据进行一些封装，而不是简化客户端模型本身。

该模式通常称为[数据传输对象](http://martinfowler.com/eaaCatalog/dataTransferObject.html)或 DTO。本质上，您将使用它为您在网络上移动的数据提供一个结构，然后您可以在客户端上将其解构为相同的模型结构。在 PHP 中，您可以只使用关联数组来表示此结构，但使用实际类有助于确保分配给 DTO 的数据符合预期格式。

# c++ - 说白了，我们为什么要使用_stdcall？

> ID：13664638
> 
> 赞同：6
> 
> 时间：2012-12-01T23:01:49.177
> 
> 标签：c++, calling-convention, stdcall

在研究使用 C++ 制作游戏的状态时，我遇到了调用约定。

在上一个问题中，有人说 MSDN 没有很好地解释 _stdcall - 我同意。

调用像 _stdcall 这样的约定的主要目的是什么？参数放在堆栈上的顺序是否重要？它如何减少 X86 中的代码大小（正如其他人所说）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T23:31:06.363

有*一些*调用约定的原因很简单：以便调用者和被调用者就事情的工作方式达成一致。没有它，调用者在调用特定函数时不知道将参数放在哪里。

至于为什么微软决定具体细节`_stdcall`，这在*很大程度上是*历史性的。在 MS-DOS 上，所有调用都是基于寄存器的，因此所有操作系统调用都需要汇编语言，或者对大多数高级语言进行奇怪的扩展。

当他们第一次做 Windows 时，他们使用`cdecl`调用约定，主要是因为这是编译器默认做的。至少根据谣言，在他们准备发布 Windows 1.0 之前不久，他们切换到 Pascal 调用约定，因为它足够高效，（除其他外）它允许 Windows 安装在更少的软盘上。不管*具体*细节如何，Pascal 调用约定确实使代码更小一些，因为被调用函数从堆栈中清除了参数，而不是在调用函数的任何地方都需要清除它们。对于从至少 2 个不同的地方调用的任何函数，这是一个胜利（如果它在其他任何地方打成平手）。

然后他们开始在 OS/2 上工作，并发明了另一种调用约定（syscall）。

然后，当然，出现了 Win32。从技术角度来看，系统调用并没有太大的问题，但是（我猜）与 OS/2 相关的所有东西都被认为是受污染的，所以系统调用必须去。结果是一些不同的东西足以证明一个新名字的合理性。公平地说，这有点夸张：他们确实添加了一个真正有用的添加：他们将参数的字节数编码到每个函数名称中，因此如果（例如）您为函数提供了不正确的原型，代码将'不链接而不是最终导致调用者和被调用者之间的不匹配，这可能导致更严重的问题。

在大多数情况下，它确实回到了最初的点：调用约定的确切细节并不重要，只要你不把它弄得一团糟。最重要的是调用者和被调用者在同一件事上达成一致，因此如果编译器知道函数接受哪些参数，它就知道如何生成代码以正确地将这些参数传递给函数（同样，它们都同意如何处理堆栈清理等）

# recursion - Scheme中的尾递归函数

> ID：13664639
> 
> 赞同：10
> 
> 时间：2012-12-01T23:01:53.417
> 
> 标签：recursion, scheme, tail-recursion

我正在为圣诞节考试而学习并做一些示例考试题，我遇到了这个让我有点难过的题

![问题](../Images/387799b998e2aabd4982734157831c78.png)

我可以很好地进行常规递归，但我无法理解如何使用尾递归编写相同的东西。

**普通版：**

```
 (define (factorial X)
      (cond
            ((eqv? X 1) 1)
            ((number? X)(* X (factorial (- X 1)))))) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-01T23:13:05.370

一个函数是尾递归的，函数返回后除了返回它的值外，必须无事可做。也就是说，递归步骤中发生的最后一件事是调用函数本身。这通常通过使用累加器参数来跟踪答案来实现：

```
(define (factorial x acc)
  (if (zero? x)
      acc
      (factorial (sub1 x) (* x acc)))) 
```

上述过程最初将`1`作为累加器调用，如下所示：

```
(factorial 10 1)
=> 3628800 
```

请注意，当达到基本情况时，会返回累积值，并且`acc`在递归调用中的每个点都会更新参数。我必须在过程中添加一个额外的参数，但这可以通过定义内部过程或命名来避免`let`，例如：

```
(define (factorial x)
  (let loop ((x x)
             (acc 1))
    (if (zero? x)
        acc
        (loop (sub1 x) (* x acc))))) 
```

# algorithm - 将任意数量的多边形组合在一起

> ID：13664642
> 
> 赞同：4
> 
> 时间：2012-12-01T23:02:11.520
> 
> 标签：algorithm, hex, polygon, hexagonal-tiles

我有随机排列的任意数量的多边形（在这种情况下为十六进制），但它们都接触另一个十六进制。

![在此处输入图像描述](../Images/1318340e95975d93645dfde10c598fed.png)

每个单独的十六进制有 6 个 x,y 顶点。顶点以所有六边形而闻名。

谁能指出我将所有六边形组合成一个多边形的算法的方向？本质上，我只是在寻找一个函数，它可以吐出一组顶点位置，这些顶点位置的排序方式是，在从一个到下一个绘制线条时，它会形成多边形。

到目前为止，这是我的方法：

1.  为所有六边形创建所有顶点的数组。
2.  确定顶点在数组中出现的次数
3.  如果顶点在数组中出现 3 次以上，则从数组中删除顶点。
4.  如果顶点在数组中出现 2 次，则删除其中之一。

下一步很棘手。我正在使用画布绘制这些多边形，这实际上涉及从一个顶点到下一个顶点绘制一条线。所以最终数组中顶点的顺序很重要。不能随意排序。

另外，我不是在寻找“凸包”算法，因为它不会正确绘制多边形。

是否有任何功能可以做这样的事情？我是在正确的轨道上还是有更好更有效的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T23:08:22.360

我会做这样的事情：

1.  列出所有方面。边由两对坐标定义。
2.  如果任何一方出现不止一次，则删除该方的所有实例。
3.  选择任意一侧，并从该一侧选择其中一个点。
4.  将该点放在一个数组中。
5.  跟随当前一侧并将另一点放入数组中。
6.  删除你刚刚关注的那一边。
7.  然后找到与数组中最后一个点相同的点的另一边。这样的一方只会有一个。如果没有，你就完成了。
8.  返回第 5 步。

您现在应该有一组点，这些点按顺序组成您想要的形状。

请注意，这不会处理漏洞。形状必须可由单个路径定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T02:28:45.660

对于每个十六进制，您都有一个包含 6 个顶点的列表。如有必要，对列表进行排序，以便顶点按逆时针顺序排序（这是数学约定）。

现在你有一组多边形（最初是六边形）。这个想法是组合多边形直到只有一个（或尽可能少）。

选择多边形的一条边，并在其他多边形中寻找同一条边（即同一对顶点）。如果有两个实例，则在该边合并两个多边形，例如 (a, b, c, d, e, f) + (g, h, d, c, i, j) => (a, b, c , 我, j, g, h, d, e, f)。（如果两个顶点在两个多边形中的顺序相同，或者如果边有三个或更多实例，则报告错误并中止。）遍历所有边。如果六边形真的形成了一个连续的组，那么将只剩下一个多边形。

多边形可能有重复的边。如果一条边出现不止一次，则通过将列表一分为二来消除它，例如 (a, b, c, d, b, a, e, f, g) => (b, c, d) + (a, e, f, g)。或者如果边是相邻的，删除它们：(a, b, c, b, d, e) => (a, b, d, e)。或者，如果该列表只有该边，则删除该列表： (a,b) => 没有。

一旦你消除了重复的边缘，就会有一个多边形逆时针外边缘的列表，可能还有一个或多个孔的顺时针内边缘列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T00:27:17.660

如果不跟踪构成线条的坐标对，就不可能确定形状的外边界

如果你知道组成线条的坐标对，那么

1.  创建2个列表，顶点之一（列表1），行之一（列表2）
2.  从顶点列表中删除所有重复的顶点
3.  为所有附有 3 行的顶点创建一个新列表（列表 3）
4.  使用列表 3，从列表 3 中删除所有具有 2 个顶点的线作为它们的两个坐标对
5.  是时候遍历形状了，剩余的线条列表应该形成您想要的形状，只需从任意坐标开始，然后对于所有线条的每个坐标，如果 (x1,y1) = 当前坐标，然后将 (x2,y2) 添加到堆栈并从列表中断中删除该行 elseif (x2,y2) = 当前坐标，然后将 (x1,y1) 添加到堆栈并从列表中断中删除该行

# iphone - 有谁知道如何通过 URL 架构在 AppleMaps 上放置图钉

> ID：13664652
> 
> 赞同：2
> 
> 时间：2012-12-01T23:03:57.597
> 
> 标签：iphone, objective-c, ios6, apple-maps

有谁知道如何从应用程序内部打开 Apple Maps 并使用 URL 方案在地理位置上放置图钉？看起来我只能将图钉放在地址而不是地理位置。

[这是](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html)我正在使用的文档，它有点简短。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T21:49:32.053

使用[http://maps.apple.com/?q=lat,lng](http://maps.apple.com/?q=lat,lng)。

这将起作用。它对我有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T22:23:59.997

如果您使用的是 iOS 6，那么最好使用[`MKMapItem`](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapItem_class/Reference/Reference.html).

例如：

```
CLLocationCoordinate2D myCoordinate = CLLocationCoordinate2DMake(123, 456);

MKPlacemark *myPlacemark = [[MKPlacemark alloc] initWithCoordinate:myCoordinate addressDictionary:nil];

MKMapItem *mapItem = [[MKMapItem alloc] initWithPlacemark:myPlacemark];
mapItem.name = @"A Cool Place";
[mapItem openInMapsWithLaunchOptions:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-26T09:37:46.423

您可以使用以下格式在该位置放置图钉：

[http://maps.apple.com/?ll=34.2390,108.8887&q=Address%20Name](http://maps.apple.com/?ll=34.2390,108.8887&q=Address%20Name)

或者

地图：ll=34.2390,108.8887&q=地址%20Name

参数：

*q* => 位置名称

*ll* => 位置坐标

参考：[https ://developer.apple.com/library/archive/featuredarticles/iPhoneURLScheme_Reference/MapLinks/MapLinks.html](https://developer.apple.com/library/archive/featuredarticles/iPhoneURLScheme_Reference/MapLinks/MapLinks.html)

# java - 在 java webapp 会话中存储 HashMap

> ID：13664654
> 
> 赞同：4
> 
> 时间：2012-12-01T23:04:29.583
> 
> 标签：java, session, servlets, session-variables

这是我在大学时的 java webapps 课程。用户可以将添加属性作为一对（名称和值）添加到会话中。所以我使用哈希图。用户可以在同一会话中多次添加此类配对。因此，我想将整个哈希图存储在会话中，并且每次按下提交按钮时，都应该将这对添加到 Map 中。但是，使用此代码仅显示最后添加的对。我不知道为什么会这样

```
 Map<String, String> lijst;

protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    HttpSession session = request.getSession();
    if (session.isNew()) {
        lijst = new HashMap<String, String>();
        session.setAttribute("lijst", lijst);
    } else {
        lijst = (HashMap<String, String>) session.getAttribute("lijst");
    }

    String naam = request.getParameter("naam");
    String waarde = request.getParameter("waarde");

    lijst.put(naam, waarde);
    printResultaat(request, response);

}

private void printResultaat(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
        out.println("<html>");
        out.println("<head>");
        out.println("<title>Sessie demo</title>");
        out.println("</head>");
        out.println("<body>");
        out.println("<h1>Sessie demo</h1>");
        out.println("<a href=\"voegtoe.html\">Toevoegen</a>");
        HttpSession session = request.getSession();
        out.println("<h3>Sessie gegevens</h3>");
        out.println("<p>Sessie aangemaakt op: " + new Date(session.getCreationTime()) + "</p>");
        out.println("<p>Sessie timeout: " + ((session.getMaxInactiveInterval()) / 60) + "</p>");
        HashMap<String, String> lijstAttr = (HashMap<String, String>) session.getAttribute("lijst");
        Iterator it = lijstAttr.entrySet().iterator();
        out.println("<h3>Sessie attributen (naam - waarde)</h3>");
        while (it.hasNext()) {
            Map.Entry pairs = (Map.Entry) it.next();
            out.println(pairs.getKey() + " " + pairs.getValue());
            it.remove();
        }
        out.println("</body>");
        out.println("</html>");
    } finally {
        out.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T23:12:31.597

看起来您每次打印时都在明确清除哈希图。

```
 while (it.hasNext()) {
        Map.Entry pairs = (Map.Entry) it.next();
        out.println(pairs.getKey() + " " + pairs.getValue());
        it.remove();   // <-----------
    } 
```

只需删除行`it.remove()`

# php - MySQLi 查询只返回一行

> ID：13664659
> 
> 赞同：5
> 
> 时间：2012-12-01T23:05:29.373
> 
> 标签：php, mysqli, return, row

此代码仅返回一行，但应返回 2 行。我已经在 phpMyAdmin 中尝试过 SQL，它完美地返回了 2 行。我在这里做错了什么？

```
$request_list_result = $mysqli->query("
SELECT buddy_requester_id, buddy_reciepient_id, user_id, user_fullname FROM sb_buddies
JOIN sb_users ON buddy_requester_id=user_id
WHERE buddy_status='0' AND buddy_reciepient_id='". get_uid() ."'");

$request_list_row = $request_list_result->fetch_array();

echo $request_list['user_fullname']; 
```

顺便说一句，上面的代码是通过以下脚本获取 profile.php 的过程：

```
$index = new Template('views/template/one.php', array(
'subtitle' => 'Dashboard',
'stylesheets' => array('/assets/css/profile.css'),
'scripts' => array('/assets/js/dashboard.js'),
'sidebar' => 'sidebar.php',
'content' => 'views/profile.php',
'errors' => $errors,
'successes' => $successes,
'request_list' => $request_list_row //right here
), true); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T23:08:57.133

```
 mysqli_result::fetch_array 
```

仅获取单行作为数组，您正在寻找

```
 mysqli_result::fetch_all 
```

获取所有行。

更多信息在这里

[http://php.net/manual/en/mysqli-result.fetch-all.php](http://php.net/manual/en/mysqli-result.fetch-all.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T03:04:29.723

您需要遍历结果（如 TheSmose 所述）

```
while ($request_list_row = $request_list_result->fetch_array()) {
    echo $request_list['user_fullname'];
} 
```

**并且**您需要将结果数组发送`$request_list`到模板而不是`$request_list_row`.

**改变这个**

```
'request_list' => $request_list_row //right here 
```

**对此**

```
'request_list' => $request_list //right here 
```

如果您想要的不仅仅是`user_fullname`模板（并且您没有 PHP >= 5.3 required for `mysqli_result::fetch_all`），那么您将需要在循环中构建自己的数组。

我不知道您的模板代码期望什么，但您可以尝试

```
while ($request_list_row = $request_list_result->fetch_array()) {
    echo $request_list[] = $request_list_row;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T23:08:26.373

您需要遍历结果。就目前而言，您只获取第一行。

```
$uid = get_uid();
$sql = "SELECT buddy_requester_id, buddy_reciepient_id, user_id, user_fullname 
        FROM sb_buddies
        JOIN sb_users ON buddy_requester_id=user_id
        WHERE buddy_status='0' AND buddy_reciepient_id='{$uid}'";

$request_list_result = $mysqli->query($sql);

while ($request_list_row = $request_list_result->fetch_array()) {
    echo $request_list['user_fullname'];
} 
```

# serial-port - 我究竟做错了什么？我的照片不会互相交流

> ID：13664661
> 
> 赞同：1
> 
> 时间：2012-12-01T23:05:37.113
> 
> 标签：serial-port, pic, serial-communication

我有两张照片：pic16f88 和 pic16f688。f88 正在运行一个循环，每当按下按钮时都会发送一条消息。我还在定时循环中尝试过这个，它每秒发送一次，而不是按下按钮时发送。

```
DEFINE osc 8
osccon.4 = 1:osccon.5 = 1:osccon.6=1
ANSEL = 0

pinout var  PORTB.1
LED    VAR  PORTB.0   ' Assign name "LED" to PORTB.0
btn    var  PORTA.0

TRISA.0 = 1

myloop:
    if (not(btn)) then
    High LED        ' Turn on LED connected to PORTB.0
    Serout2 pinout,396,["PBPSUX"]
    endif
    Low LED         ' Turn off LED connected to PORTB.0

    Goto myloop

    End 
```

我的第二张照片 f688 应该正在等待消息并在收到任何信息时打开 LED。

```
DEFINE osc 8
osccon.4 = 1:osccon.5 = 1:osccon.6=1
ANSEL = 0

pinin  var  PORTA.1
LED    VAR  PORTA.0   ' Assign name "LED" to PORTB.0
test   var  byte[5]

low LED
myloop:

   Pause 500       ' Delay for .5 seconds to allow the other pic to start sending.
   low LED

   Serin2 pinin,396,[wait("P"),str test\5]

   if (test) then
      goto lighton
   endif

   pause 500
   high LED

   Goto myloop

lighton:
    high LED
    goto lighton   
End 
```

如果第二张照片没有收到任何东西，它应该再次开始等待。

出于某种原因，第一张图片可以正常工作，因为它在闪烁，我们可以使用串行示波器看到噪声。然而，第二张照片永远不会打开它的灯。

谁能看到我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:15:28.300

您的 LED 定义错误，因此即使芯片确实接收到它也不会真正点亮。您确定它应该是 PORTA.0 而不是 PORTB.0 像其他设备吗？

# java - 图像查看器中每个图像的不同文本

> ID：13664662
> 
> 赞同：4
> 
> 时间：2012-12-01T23:05:59.913
> 
> 标签：java, android, android-viewpager, layout-inflater

我使用viewpager类来显示图像集而不是gallery类，因为它已弃用并使用以下代码对其进行自定义以显示文本，问题是所有图像都显示相同的文本，我试图得到的是： **不同的文本每张**解释它的图像，假设我们有 5 张图像，它必须有 5 种不同的文字，每个文字都描述它的图像。

任何建议将不胜感激，谢谢

编码：

**图像寻呼机**

```
 public class ImagePager extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ImagePagerAdapter adapter = new ImagePagerAdapter(this, imageArra);
    ViewPager myPager = (ViewPager) findViewById(R.id.myimagepager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(0);}

private int imageArra[] = { R.drawable.a, R.drawable.b, R.drawable.c,
                              R.drawable.d, R.drawable.e};        } 
```

**图像页面适配器**

```
 public class ImagePagerAdapter extends PagerAdapter {

Activity activity;
int imageArray[];

public ImagePagerAdapter(Activity act, int[] imgArra) {
    imageArray = imgArra;
    activity = act;}

public int getCount() {
    return imageArray.length;}

public Object instantiateItem(View collection, int position) {
    LayoutInflater inflater = (LayoutInflater)collection.getContext
                 ().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View layout = inflater.inflate(R.layout.custom_pager, null);   

    ImageView im=(ImageView) layout.findViewById(R.id.myimage);             
    im.setImageResource(imageArray[position]);

    TextView txt=(TextView) layout.findViewById(R.id.image_text);
    ((ViewPager) collection).addView(layout, 0);
       return layout;   }

@Override
public void destroyItem(View arg0, int arg1, Object arg2) {
    ((ViewPager) arg0).removeView((View) arg2);
            }

@Override
public boolean isViewFromObject(View arg0, Object arg1) {
    return arg0 == ((View) arg1);
                      }

@Override
public Parcelable saveState() {
    return null;
              }   } 
```

**activity_main.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
   android:layout_width="fill_parent" 
   android:layout_height="fill_parent" 
   android:orientation="vertical">
 <android.support.v4.view.ViewPager 
   android:id="@+id/myimagepager" 
   android:layout_width="match_parent" 
   android:layout_height="match_parent" /> 
</LinearLayout> 
```

**custom_pager.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
   android:layout_width="match_parent" 
   android:layout_height="match_parent" 
   android:orientation="vertical" 
   android:background="#FFDAB9" 
   android:gravity="center_horizontal">
 <ImageView android:id="@+id/myimage" 
   android:layout_width="match_parent" 
   android:layout_height="0dp" 
   android:layout_margin="5dp" 
   android:layout_weight="2" /> 
 <TextView android:id="@+id/image_text" 
    android:layout_width="fill_parent" 
    android:layout_height="0dp" 
    android:textColor="#B22222" 
    android:layout_weight="1" 
    android:text="text to image" />

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T23:16:36.320

您可以将字符串数组传递到与每个图像相对应的适配器中。例如。

在活动中用您的图像列表声明您的字符串数组。

```
private int imageArra[] = { R.drawable.a, R.drawable.b, R.drawable.c,
                              R.drawable.d, R.drawable.e};  

private String[] stringArray = new String[] { "Image a", "Image b","Image c","Image d","Image e"}; 
```

然后在实例化您的适配器时..

```
ImagePagerAdapter adapter = new ImagePagerAdapter(this, imageArra, stringArray ); 
```

在您的适配器中：

```
int imageArray[];
String[] stringArray;
public ImagePagerAdapter(Activity act, int[] imgArra, String[] stringArra) {
    imageArray = imgArra;
    activity = act;
    stringArray = stringArra;
} 
```

然后从数组中分配文本值

```
TextView txt=(TextView) layout.findViewById(R.id.image_text);
txt.setText(stringArray[position]); 
```

# java - 如何将 Eclipse 项目设置为只读？

> ID：13664667
> 
> 赞同：7
> 
> 时间：2012-12-01T23:06:50.570
> 
> 标签：java, eclipse, readonly

在单个文件中，它可以*在 Attributes 下右键单击 > Properties > 标记“只读”*，我怎样才能对所有项目文件执行相同操作？我从 08 年发现了[同样的问题](https://stackoverflow.com/questions/97013/how-to-open-eclipse-project-as-read-only)，但没有足够的答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-01T23:08:55.980

如果一切都失败了，只需使用操作系统将项目文件夹设置为只读。如果您尝试修改只读文件，Eclipse 会提示您。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-05T21:13:39.927

在 Eclipse 版本 4.5.1（“Mars”；可能还有更早的版本）中，您*可以*通过选择“src”文件夹并转到 Properties>Resource> 来更改多个文件；然后更改“权限”下的“写入”列。

在较新版本的 Eclipse 中，您可以在“属性”下的“属性”>“资源”>; 中找到只读选项。

[![Eclipse src 文件夹属性](../Images/dc7fca8836171657e2025e83769b6e68.png)](https://i.stack.imgur.com/AJ5if.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-01T23:09:16.603

我不认为 Eclipse 具有内置的功能。它只使用文件系统上的文件。

我认为您必须在您使用的特定操作系统的文件系统中执行此操作。

# javascript - 通过 Javascript 通过其 URL 获取文档

> ID：13664670
> 
> 赞同：0
> 
> 时间：2012-12-01T23:07:20.207
> 
> 标签：javascript, html, domdocument

我试图通过 Javascript 获取一个 HTML 文档对象，而不是页面的文本，给定它的 URL。我需要 Document 对象的原因是我可以查找给定的类名并在它存在时采取某种行动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:15:24.820

如果页面在同一个域中（即相对路径），您可以将其加载到隐藏的 iframe 中，并按[此处](http://xkr.us/articles/dom/iframe-document/)所示访问`document`from`window.frames`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T23:12:25.953

```
function saveDataToVariable(data) {
    var html = data;
    // do something
}

$.get('any.html', saveDataToVariable); 
```

这将为您提供给定 html 页面的完整 html 输出...还包括 html 或 div 标记，其他任何内容都将包括在内，您可以在之后根据需要对其进行解析

# c++ - 浮点异常（核心转储

> ID：13664671
> 
> 赞同：20
> 
> 时间：2012-12-01T23:07:31.973
> 
> 标签：c++, c, coredump

程序：所以我做了一个程序，它采用两个数字，N 和 L。N 是二维数组的大小，L 是 3 到 16 之间的数字。程序构建数组并从中心开始，然后在逆时针螺旋。I 是中心的值，当您通过数组（在螺旋中）时，该值将增加一。它是质数，该数字将分配给该位置，如果不是，它***将代替它。

错误：我收到“浮点异常”错误，我该如何解决？

代码：

```
 void Array_Loop( int *Array, int n, int L ) ;

int Is_Prime( int Number ) ;

int main( int argc, char *argv[] ){

  int **Array ;
  int n, L ;

  n = atoi( argv[1] ) ;
  L = atoi( argv[2] ) ;

  Matrix_Build( &Array, n, n ) ;
  Array_Loop( Array, n, L ) ;

  return 0 ;

}

void Array_Loop( int *Array, int n, int L ){

  int i, j, k, h ;
  int lctn, move;

  lctn = n / 2 + 1 ;
  i = lctn ;
  j = lctn ;
  move = 1

  while( i != 0 && j != n ){

    for( j = lctn ; j < lctn + move ; j++ ){

         if( L % 2 == 2) Array[i][j] = -1 ;
         else Array[i][j] = Is_Prime( L ) ;
         L++ ;
    }

    move = move * -1 ;

    for( i = i ; i > lctn - move ; i-- ){

      if( L % 2 == 2) Array[i][j] = -1 ;
      else Array[i][j] = Is_Prime( L ) ;
      L++ ;
    }

    move-- ;

    for( j = j ; j > lctn - move ; j-- ){

      if( L % 2 == 2) Array[i][j] = -1 ;
      else Array[i][j] = Is_Prime( L ) ;
      L++ ;
    }

    move = move * -1 ;

    for( i = i ; i < lctn - move ; i-- ){

      if( L % 2 == 2) Array[i][j] = -1 ;
      else Array[i][j] = Is_Prime( L ) ;
      L++ ;
    }

    move++ ;

  }

}

int Is_Prime( int Number ){

  int i ;

  for( i = 0 ; i < Number / 2 ; i++ ){

    if( Number % i != 0 ) return -1 ;

  }

  return Number ;

} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-01T23:30:29.887

你得到浮点异常`Number % i`，因为什么时候`i`是`0`：

```
int Is_Prime( int Number ){

  int i ;

  for( i = 0 ; i < Number / 2 ; i++ ){

    if( Number % i != 0 ) return -1 ;

  }

  return Number ;

} 
```

只需在`i = 2`. 因为它总是等于零，因为 Number 是一个 int `i = 1`。`Number % i`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-24T07:03:10.290

由于意外的无穷大或 NaN 而发生浮点异常。您可以使用 gdb 跟踪它，它允许您查看 C 程序运行时内部发生的情况。更多详情： [https ://www.cs.swarthmore.edu/~newhall/unixhelp/howto_gdb.php](https://www.cs.swarthmore.edu/~newhall/unixhelp/howto_gdb.php)

简而言之，这些命令可能很有用......

`gcc -g myprog.c`

`gdb a.out`

`gdb core a.out`

`ddd a.out`

# jquery - jQuery .append 和 .prepend 问题

> ID：13664672
> 
> 赞同：0
> 
> 时间：2012-12-01T23:07:47.167
> 
> 标签：jquery, html, append, prepend

我有一些html：

```
<div class="sample">
  <span>
    Text
  </span>
</div> 
```

我想`<a href>`在文本周围加上一个。

所以我有一些javascript：

```
$(".sample span").prepend("<a href='http://www.example.com" target='_blank'>");
$(".sample span").append("</a>"); 
```

但结果是我得到：

```
<div class="sample">
  <span>
    <a href='http://www.example.com' target='_blank'></a>
    Text
  </span>
</div> 
```

有趣的是，如果我只使用 'New Text' 而不是 ，我会得到以下信息：

```
<div class="sample">
  <span>
    New Text
    Text
    New Text
  </span>
</div> 
```

知道为什么要改变这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T23:10:53.767

你可以使用`wrapInner`方法：

```
$(".sample span")
    .wrapInner("<a href='http://www.example.com' target='_blank'></a>"); 
```

[http://jsfiddle.net/Fz3As/](http://jsfiddle.net/Fz3As/)

请注意，您的方法中存在语法错误，您`prepend`无法将 a 传递`</a>`给这些方法以添加结束标记。这不是这些方法的正确用法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T23:10:48.670

你可以使用`wrap()`方法

```
$(".sample span").wrap("<a href='http://www.example.com' target='_blank'></a>"); 
```

API 参考：[http ://api.jquery.com/wrap/](http://api.jquery.com/wrap/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T23:30:08.500

尝试这个

```
var prepend = "<a href='http://www.example.com' target='_blank'>";
var append  = "</a>";
$(".sample span").html(prepend + $(".sample span").html() + append); 
```

# php - 检查 Facebook 是否被阻止然后重定向

> ID：13664678
> 
> 赞同：7
> 
> 时间：2012-12-01T23:08:48.867
> 
> 标签：php, javascript

> **可能重复：**
> [通过 JavaScript 检查网站是否启动的最佳方法是什么](https://stackoverflow.com/questions/4814752/whats-the-best-way-to-check-if-a-website-is-up-or-not-via-javascript)

我们即将通过我们的 Facebook 页面开展一项活动。理想情况下，我们希望我们用于此活动的网址（例如 www.oursite.com/campaign）将所有流量重定向到我们的 Facebook 网址（例如 www.facebook.com/example）。但是，许多工作场所网络会阻止社交媒体网站，因此在自动重定向之前，我想先检查用户的网络是否允许 Facebook：如果是，则重定向到 Facebook；如果没有，请继续访问我们的网址 (www.oursite.com/campaign)。

任何帮助将不胜感激，

Ryan（我对 PHP 没问题，从新到 javascript）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-01T23:34:06.743

**Facebook SDK method**

Since you need to check if the user has access to facebook you could try to initialize the the [Facebook SDK](https://developers.facebook.com/docs/reference/javascript/) and base your logic on that

According to documentation `window.fbAsyncInit` function is called on a successful initialization of the SDK, so you might achieve your effect with something like this:

```
var campaignLink = "http://www.oursite.com/campaign";

window.fbAsyncInit = function() {
    // facebook sdk initialized, change link
    campaignLink = "http://www.facebook.com/example";
} 
```

Please note that this is all theoretical and untested, you might need to read more here

[https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

**Favicon method**

This function tries to load the favicon.ico file of the supplied URL and takes it as an indicator on whether the site is accessible (by the user) or not. It assumes that a site has a favicon, but you could easily change that to another image which you know exists.. (example the facebook logo)

```
function isSiteOnline(url,callback) {
    // try to load favicon
    var timer = setTimeout(function(){
        // timeout after 5 seconds
        callback(false);
    },5000)

    var img = document.createElement("img");
    img.onload = function() {
        clearTimeout(timer);
        callback(true);
    }

    img.onerror = function() {
        clearTimeout(timer);
        callback(false);
    }

    img.src = url+"/favicon.ico";
} 
```

Usage would be,

```
isSiteOnline("http://www.facebook.com",function(found){
    if(found) {
        // site is online
    }
    else {
        // site is offline (or favicon not found, or server is too slow)
    }
}) 
```

# python - 向 sprite、pyGame 添加碰撞检测

> ID：13664688
> 
> 赞同：0
> 
> 时间：2012-12-01T23:09:52.000
> 
> 标签：python, pygame

基本上我试图使用以下内容向下面的精灵添加碰撞检测：

```
self.rect = bounds_rect

                collide = pygame.sprite.spritecollide(self, wall_list, False)

                if collide:
            # yes

                     print("collide") 
```

然而，似乎当碰撞被触发时，它会一遍又一遍地连续打印“碰撞”，而我希望他们根本无法穿过物体，有什么帮助吗？

```
def update(self, time_passed):
        """ Update the creep.

            time_passed:
                The time passed (in ms) since the previous update.
        """
        if self.state == Creep.ALIVE:
            # Maybe it's time to change the direction ?
            #
            self._change_direction(time_passed)

            # Make the creep point in the correct direction.
            # Since our direction vector is in screen coordinates 
            # (i.e. right bottom is 1, 1), and rotate() rotates 
            # counter-clockwise, the angle must be inverted to 
            # work correctly.
            #
            self.image = pygame.transform.rotate(
                self.base_image, -self.direction.angle)

            # Compute and apply the displacement to the position 
            # vector. The displacement is a vector, having the angle
            # of self.direction (which is normalized to not affect
            # the magnitude of the displacement)
            #
            displacement = vec2d(    
                self.direction.x * self.speed * time_passed,
                self.direction.y * self.speed * time_passed)

            self.pos += displacement

            # When the image is rotated, its size is changed.
            # We must take the size into account for detecting 
            # collisions with the walls.
            #
            self.image_w, self.image_h = self.image.get_size()
            global bounds_rect
            bounds_rect = self.field.inflate(
                            -self.image_w, -self.image_h)

            if self.pos.x < bounds_rect.left:
                self.pos.x = bounds_rect.left
                self.direction.x *= -1
            elif self.pos.x > bounds_rect.right:
                self.pos.x = bounds_rect.right
                self.direction.x *= -1
            elif self.pos.y < bounds_rect.top:
                self.pos.y = bounds_rect.top
                self.direction.y *= -1
            elif self.pos.y > bounds_rect.bottom:
                self.pos.y = bounds_rect.bottom
                self.direction.y *= -1

            self.rect = bounds_rect

            collide = pygame.sprite.spritecollide(self, wall_list, False)

            if collide:
        # yes

                 print("collide")

        elif self.state == Creep.EXPLODING:
            if self.explode_animation.active:
                self.explode_animation.update(time_passed)
            else:
                self.state = Creep.DEAD
                self.kill()

        elif self.state == Creep.DEAD:
            pass

        #------------------ PRIVATE PARTS ------------------#

    # States the creep can be in.
    #
    # ALIVE: The creep is roaming around the screen
    # EXPLODING: 
    #   The creep is now exploding, just a moment before dying.
    # DEAD: The creep is dead and inactive
    #
    (ALIVE, EXPLODING, DEAD) = range(3)

    _counter = 0

    def _change_direction(self, time_passed):
        """ Turn by 45 degrees in a random direction once per
            0.4 to 0.5 seconds.
        """
        self._counter += time_passed
        if self._counter > randint(400, 500):
            self.direction.rotate(45 * randint(-1, 1))
            self._counter = 0

    def _point_is_inside(self, point):
        """ Is the point (given as a vec2d) inside our creep's
            body?
        """
        img_point = point - vec2d(  
            int(self.pos.x - self.image_w / 2),
            int(self.pos.y - self.image_h / 2))

        try:
            pix = self.image.get_at(img_point)
            return pix[3] > 0
        except IndexError:
            return False

    def _decrease_health(self, n):
        """ Decrease my health by n (or to 0, if it's currently
            less than n)
        """
        self.health = max(0, self.health - n)
        if self.health == 0:
            self._explode()

    def _explode(self):
        """ Starts the explosion animation that ends the Creep's
            life.
        """
        self.state = Creep.EXPLODING
        pos = ( self.pos.x - self.explosion_images[0].get_width() / 2,
                self.pos.y - self.explosion_images[0].get_height() / 2)
        self.explode_animation = SimpleAnimation(
            self.screen, pos, self.explosion_images,
            100, 300)
        global remainingCreeps

        remainingCreeps-=1

        if remainingCreeps == 0:
                print("all dead") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:15:04.637

碰撞检查只是检查两个矩形精灵是否具有公共区域。没有在碰撞期间无法让玩家输入的内置碰撞。你必须自己写。

您可能希望在发生碰撞时更改玩家坐标。一个例子：

假设我们玩马里奥。当 mario 的状态为 JUMPING 时，检查碰撞。我们将在某个地方存储 mario 的速度在 y 轴上。当碰撞返回 True 时，对于任何块，我们现在将速度设置为 0，将 y 设置为块的顶部/底部。如果它是底部，我们仍然保持跳跃，所以它可以落回地面。

我对爬行者的建议是有一些 oldx 和 oldy 值，以便在碰撞发生时返回。这样爬行者就永远不会进入墙壁。另一种方法是在发生碰撞时简单地改变方向，但这可能并不总是有效。

# c - C字符串连接问题函数

> ID：13664690
> 
> 赞同：0
> 
> 时间：2012-12-01T23:10:17.153
> 
> 标签：c, visual-c++, cstring

我有点需要做一些 C-String 连接的情况，所以我决定自己学习（这只是一个个人项目，所以我有很多时间在世界上，真的）。

到目前为止，我已经提出了这两个功能（下面给出解释）：

```
static inline  // make inline to leave out the stack manipulation
size_t StrLength( const char* string )
{
    return strnlen( string, strlen( string ) );
}

static void concatstr( char** dest, const char** src )
{
    const size_t destlen = StrLength( *dest );
    const size_t srclen  = StrLength( *src );

    const size_t total_len    = destlen + srclen; 

    const size_t totalLenNull = total_len + 1;

    char* tmp = ( char* )malloc( sizeof( char ) * totalLenNull ); //<-- Because of this...

    size_t counter = 0;

    for( size_t iDest = 0; iDest < destlen; ++iDest )
        tmp[ counter++ ] = *dest[ iDest ];

    for ( size_t iSrc = 0; iSrc < srclen; ++iSrc ) 
        tmp[ counter++ ] = *src[ iSrc ];

    *dest = ( char* ) realloc( *dest, totalLenNull ); 

    strncpy( *dest, tmp, total_len ); 

    free( tmp );

    tmp = NULL;
} 
```

内联 StrLength 函数背后的想法是，如果我正确理解内联，它应该像 C++ 中更安全的宏一样工作，所以它不太容易出错（我认为）。我把它做成内联的，因为它只是一行代码，而且对这种进程的堆栈操作似乎有点多。但是，如果我错了，请纠正我。

现在，进入`concatstr()`功能：

这里的问题是，一旦我进入第二个循环，由于内存读取冲突，程序在第二次迭代时崩溃。为什么会发生这种情况我不确定。

调用代码如下所示：

```
const size_t len = StrLength( msg ) + mPrefix.length() + StrLength( "\n\n" );

char* out = ( char* )malloc( sizeof( char ) * ( len + 1 ) );

out[0] = '\0';

const char* tmp_pass = mPrefix.c_str();

concatstr( &out, &tmp_pass );
concatstr( &out, &msg ); 
```

我在这里放置一个visual-C++标签的唯一原因是，即使我像在直接c中那样做这个，我也在使用VC++作为编译器。

有谁知道这里的问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T23:23:15.600

你的优先顺序错了，

```
tmp[ counter++ ] = *dest[ iDest ]; 
```

是（隐式）插入的

```
tmp[ counter++ ] = *(dest[ iDest ]); 
```

但你需要

```
tmp[ counter++ ] = (*dest)[ iDest ]; 
```

带有显式括号。

如果没有括号，则（假定）`char*`在`iDest * sizeof(char*)`字节偏移后被`*dest`取消引用，可能没有`char*`允许您取消引用的有效值。您希望在指向`iDest`后的字节偏移处访问字节。`*dest`

在最后，

```
strncpy( *dest, tmp, total_len ); 
```

不会 0 终止连接的字符串。你需要`totalLenNull`那里。

在旁边：

```
return strnlen( string, strlen( string ) ); 
```

比较谨慎。首先，您遍历`string`找到终止的 0 字节，`char`在此之前计数 s。然后检查`strlen(string)`. `string`除非`string`在这两个调用之间进行了修改（然后您可能会被冲洗掉），否则第二个调用将返回与第一个调用完全相同的结果。

# vb.net - Twitterizer - 如何获取用户名

> ID：13664692
> 
> 赞同：2
> 
> 时间：2012-12-01T23:10:33.203
> 
> 标签：vb.net, twitterizer

我正在尝试获取授权用户的用户名。我已经设法让 OAuth 工作，获得令牌，指示用户检索 PIN，输入并成功发送推文。但我不明白的是何时以及如何获取用户名。

我使用这个 VB.NET 代码来获取 URL：

```
Dim ReqTokens = OAuthUtility.GetRequestToken("XXX", "XXX", "oob")
Dim url = (OAuthUtility.BuildAuthorizationUri(ReqTokens.Token).AbsoluteUri)
TextBox2.Text = url 
```

然后此代码确认授权并允许我使用该应用程序发推文：

```
OAuthUtility.GetAccessToken("XXX", "XXX", "XXX", "1234567") 
```

但是在哪个阶段以及如何检索用户名和用户 ID？

VB.NET 中的任何帮助，以及我显然是傻瓜的简化，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:12:12.737

`OAuthUtility.GetAccesToken()`返回`OAuthTokenResponse`包含 ScreenName 和 Id 属性的 a。[文档在这里](http://www.twitterizer.net/documentation/html/T_Twitterizer_OAuthTokenResponse.htm)

```
Dim accessTokens = OAuthUtility.GetAccessToken("")
Dim screenName as String = accessTokens.ScreenName 
```

# c - Makefile，编译和链接

> ID：13664693
> 
> 赞同：10
> 
> 时间：2012-12-01T23:10:38.817
> 
> 标签：c, compilation, linker, makefile

我有一个关于在 Makefile 中编译和链接的问题（也许一般来说）。

我有一个 server.c 文件，它由具有功能的主程序组成`main()`。`server.c`包括 rio.c。我有一个名为的模块`rio`，它由`rio.c`和组成`rio.h`。它没有任何`main()`功能。

我有两个问题，如何实际编写 Makefile，以及这样做的最佳实践。

**Q1：如何编写 Makefile**

我有以下 Makefile：

```
CC = gcc
CFLAGS = -Wall -Werror -Wmissing-prototypes
OBJS = server.o rio.o

all: $(OBJS)
    $(CC) $(CFLAGS) $(OBJS) -o sysstatd

server.o: server.c
    $(CC) $(CFLAGS) -c server.c

rio.o: rio.c rio.h
    $(CC) $(CFLAGS) -c rio.c

clean:
    rm -f *~ *.o sysstatd 
```

我有与此相关的问题。它说我对 C 中使用的所有函数都有多个定义。我不确定这是怎么可能的，因为 server.c 是用`-c`标志编译的，所以实际上没有任何链接。它应该知道一些函数存在但实际上并没有链接它们，直到`all`规则将两个目标文件编译在一起并生成一个包含所有链接的目标文件。

这里有什么问题？

**Q2：最佳实践** 由于我有一个模块，然后是另一个包含主程序的文件，我应该将主程序编译`server.c`为一个单独的模块，然后将两者一起`all`编译，还是编译 server.c 并添加 rio。 o 模块在那里？请注意，这仍然会产生与我上面相同的链接问题，所以我很确定我的问题出在其他地方。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-02T21:14:08.543

您应该稍微修改一下结构：

```
CC = gcc
CFLAGS = -Wall -Werror -Wmissing-prototypes
OBJS = server.o rio.o

all: sysstatd

sysstatd: $(OBJS)
    $(CC) $(CFLAGS) $(OBJS) -o sysstatd

server.o: server.c
    $(CC) $(CFLAGS) -c server.c

rio.o: rio.c rio.h
    $(CC) $(CFLAGS) -c rio.c

clean:
    rm -f *~ *.o sysstatd 
```

不同之处在于假规则`all`取决于是否`sysstatd`是最新的，并且`sysstatd`当它是最新的目标文件时是最新的。

现在它只是相当冗长，明确地编写编译操作。使用以下内容就足够了：

```
CC = gcc
CFLAGS = -Wall -Werror -Wmissing-prototypes
OBJS = server.o rio.o

all: sysstatd

sysstatd: $(OBJS)
    $(CC) $(CFLAGS) $(OBJS) -o sysstatd

server.o: server.c
rio.o: rio.c rio.h

clean:
    rm -f *~ *.o sysstatd 
```

你也可以辩论：不`server.c`使用`rio.h`？如果是这样，则应列出依赖项。如果不是，为什么`rio.h`存在？ `make`将假设`server.o`取决于`server.c`，因此您不必指定它（但它不会对标题做出假设）。您还可以使用宏来防止程序名称重复：

```
CC = gcc
CFLAGS = -Wall -Werror -Wmissing-prototypes
OBJS = server.o rio.o
PROG = sysstatd

all: $(PROG)

$(PROG): $(OBJS)
    $(CC) $(CFLAGS) $(OBJS) -o $@

server.o: rio.h
rio.o: rio.h

clean:
    rm -f *~ *.o $(PROG) core a.out 
```

如果您需要其他库，那么您可以使用：

```
CC = gcc
CFLAGS = -Wall -Werror -Wmissing-prototypes
OBJS = server.o rio.o
PROG = sysstatd
LOCALLIBDIR = /usr/local/lib
LDFLAGS = -L$(LOCALLIBDIR)
LDLIBS  = -lone -ltwo

all: $(PROG)

$(PROG): $(OBJS)
    $(CC) $(CFLAGS) $(OBJS) -o $@ $(LDFLAGS) $(LDLIBS)

server.o: rio.h
rio.o: rio.h

clean:
    rm -f *~ *.o $(PROG) core a.out 
```

# windows-8 - ScrollViewer 捕捉 PointerPressed + PointerMoved 滚动

> ID：13664694
> 
> 赞同：1
> 
> 时间：2012-12-01T23:10:48.150
> 
> 标签：windows-8, windows-runtime, winrt-xaml, scrollviewer

我目前正在创建一个小绘图程序，并且我`Grid`在`ScrollViewer`.

为了检测用户是否正在绘图，我捕获`PointerPressed`事件以将我的变量设置`isUserDrawing`为 true，然后捕获`PointerMove`事件，如果`isUserDrawing`我确实在鼠标所在的位置写了一行。

它适用于标准鼠标。但是当我使用模拟器通过触摸对其进行测试时，它`ScrollViewer`正在捕获事件并开始滚动，并且`Grid`不再触发事件。有没有办法`ScrollViewer`只用两根手指而不是一根手指做出响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T06:34:14.827

不。您的选择是在 ScrollViewer 顶部放置一些透明的东西并从中获取输入事件，或者根本不使用 ScrollViewer。无论哪种方式 - 您都需要自己处理滚动和缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T14:12:57.750

尝试：

```
subitem.ManipulationMode = ManipulationModes.All; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-05T20:23:19.460

如果您使用子控件，您可以 `Child.ManipulationMode = ManipulationModes.All;` 在这种情况下设置 enents 不会冒泡到滚动查看器。设置 `Child.ManipulationMode = ManipulationModes.System;`为标准操作。

# tomcat - 连接池失败时如何设置重试。

> ID：13664697
> 
> 赞同：1
> 
> 时间：2012-12-01T23:11:10.493
> 
> 标签：tomcat

我想问两个关于连接池的问题 1\. 我收到 java.sql.SQLNonTransientConnectionException 错误原因：org.apache.derby.client.am.DisconnectException: 。有没有办法在 xml 中重试连接？

1.  我使用的是最新的 derby 驱动程序吗？我听说使用最新的 derby 驱动程序可以解决问题，但我想在互联网上使用 derby 驱动程序。

这是我的连接池代码。

```
<?xml version="1.0" encoding="UTF-8"?>
  <Context privileged="true" reloadable="true">
    <WatchedResource>WEB-INF/web.xml</WatchedResource>
    <Manager pathname=""/>
    <Resource name="jdbc/CSE" factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
              type="javax.sql.DataSource"
              driverClassName="org.apache.derby.jdbc.ClientDriver"
              url="jdbc:derby://indigo.cse.yorku.ca:9999/CSE"
              username="student" password="secret"/>    
    <ResourceLink global="jdbc/CSE" name="jdbc/EECS" type="javax.sql.DataSource"/>
  </Context> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-07T06:46:39.027

提到[这个](https://tomcat.apache.org/tomcat-8.0-doc/jdbc-pool.html)。我添加了以下参数：

*   testOnBorrow="真"
*   验证查询 =“选择 1”
*   removeAbandoned="true

```
 <Resource name="jdbc/CSE" factory="org.apache.tomcat.jdbc.pool.DataSourceFactory" type="javax.sql.DataSource"
              driverClassName="org.apache.derby.jdbc.ClientDriver"
              url="jdbc:derby://indigo.cse.yorku.ca:9999/CSE"
              username="student" password="secret" testOnBorrow="true"
            validationQuery="SELECT 1"
            removeAbandoned="true"/>    
    <ResourceLink global="jdbc/CSE" name="jdbc/EECS" type="javax.sql.DataSource"/> 
```

# api - 我应该如何处理 REST 中的子资源？

> ID：13664701
> 
> 赞同：3
> 
> 时间：2012-12-01T23:11:40.813
> 
> 标签：api, rest

我了解（我认为...）REST 的基础知识，但在尝试设计我的 API 时，我对子资源有点困惑，我将尝试用一个例子来解释：

假设我有一个应用程序有两个资源，用户和房间，用户可以创建房间和加入房间，以下 REST URI 是否正确？

1.  GET /users/<用户ID>/joinedRooms
2.  GET /users/<userID>/createdRooms

还是应该类似于 /users/< userId >/rooms/joined 或 /users/< userId >/rooms?query=joined ？

还有“获得类似房间”的 URI 会是什么样子？/rooms/< roomId >/similar 或 /rooms/?query=similar ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T09:41:49.623

URL 设计是一种*艺术形式，*而不是 REST 约束。REST 没有说明您的 URL 应该是什么样子。URL 是不透明的字符串，它们的内容是不相关的。

*   `/users/<userID>/joinedRooms`
*   `/users/<userID>/rooms/joined`
*   `/users/<userID>/rooms?query=joined`

您建议的任何这些选项都同样有效。选择最适合您的，只要它代表一种资源。

> 还有“获得类似房间”的 URI 会是什么样子

再说一次，随心所欲。怎么样`/yaz1-oPhce6~X_`？:-)

在做出决定时，我建议您尝试考虑易于实施、美观等因素。

# mysql - MySQL将错误的值插入表中，感叹号

> ID：13664702
> 
> 赞同：2
> 
> 时间：2012-12-01T23:11:43.533
> 
> 标签：mysql

我正在输入的内容：

```
INSERT INTO reviews VALUES ('', title='dragon ball z', date='2012-12-01 23:06:03', username='testads1412117947', rating=100, synopsis='lots of fighting', review='i liked it', poster='kk') 
```

第一个值是主键 ID，在我所有其他留空的文件上都很好。MySQL 只插入 ID 并将其他所有内容都保留为 0，但仍然表示一切正常。

我不确定发生了什么事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T23:13:29.003

试试这个：

```
INSERT INTO reviews (title, date, username, rating, synopsis, review, poster)
VALUES ('dragon ball z', '2012-12-01 23:06:03', 'testads1412117947', 100, 'lots of fighting', 'i liked it', 'kk') 
```

仅供参考，如果还没有，您的主键 ID 也应该设置为 AUTO_INCREMENT 以便在您插入新行时自动生成 ID 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T23:13:41.927

插入评论（标题、日期、用户名、评级、概要、评论、海报）值（'dragon ball z'、'2012-12-01 23:06:03'、'testads1412117947'、100、'很多战斗' , '我喜欢它', 'kk')

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T23:13:51.993

使用此语法`insert`

```
INSERT INTO reviews (title, date, username, rating, synopsis, review, poster)
VALUES ('dragon ball z', '2012-12-01 23:06:03', 'testads1412117947', 100, 'lots of fighting', 'i liked it', 'kk') 
```

供`update`使用

```
update reviews
set title='dragon ball z', 
    date='2012-12-01 23:06:03',
    username='testads1412117947', 
    rating=100, 
    synopsis='lots of fighting', 
    review='i liked it', 
    poster='kk'
where ... 
```

但不要混淆它们。

# java - Ateji 加速示例返回意外结果

> ID：13664705
> 
> 赞同：1
> 
> 时间：2012-12-01T23:12:06.307
> 
> 标签：java, eclipse, multithreading, parallel-processing

我安装了适用于 Win64 的 Eclipse 3.7 版 JavaEE，然后按照手册 1.2 版中的 Ateji 安装说明进行操作。

我通过运行 I = J = 100000 的加速示例得到的结果：

```
PERFORMANCE COMPARISON BETWEEN SEQUENTIAL AND PARALLEL COMPREHENSIONS

sequential sum:
    `+ for (int i : I, int j : J) (i*j);
parallel sum:
    `+ for || (int i : I, int j : J) (i*j);
data size : I = 100000; J = 100000

Wait for the result...
sequential sum: mean time = 202 ms; standard deviation = 1 ms; ( 8473 8460 203 202 202 204 203 202 205 202 203 202 203 204 203 202 204 202 203 203 )
parallel sum: mean time = 2017 ms; standard deviation = 961.311 ms; ( 1787 1800 1790 1847 1457 1442 1698 1457 1455 1439 1467 4083 3239 1461 1458 1469 1470 1469 3077 4311 )

Speed up = 0.10014873574615767
Available processors = 8 
```

我的处理器活动监视器显示 4 个内核确实用于并行任务。hello world 示例有效（“hello”和“world”以随机顺序打印）。我检查了 Ateji 手册的故障排除部分，一切都是正确的（我使用了 JDK 和 JRE 1.7）

问题可能来自哪里？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T15:07:48.117

告诉我们这个令人惊讶的结果是你不应该依赖微基准。

在我的 4 核笔记本电脑上，我使用 Java6 VM（1.6.0_22-b04 HotSpot(TM) 64 位服务器）获得了预期的加速：

```
sequential sum: mean time = 383 ms; standard deviation = 83,319 ms;
parallel sum: mean time = 114 ms; standard deviation = 22,271 ms;
Speed up = 3.3596491228070176 
```

在同一台机器上，我使用 Java7 VM（1.7.0_03-b05 HotSpot(TM) 64 位服务器）得到了您提到的令人惊讶的结果：

```
sequential sum: mean time = 7 ms; standard deviation = 0 ms;
parallel sum: mean time = 69 ms; standard deviation = 10,863 ms; 
Speed up = 0.10144927536231885 
```

请注意两个 VM 版本之间的连续时间是如何除以 50 的！这绝对是一个强大的优化开始的迹象。

一个聪明的 VM 可以不做任何计算（时间 = 0ms），因为它可以静态地将总和的结果表示为一个简单的代数表达式。代码的并行版本中一定有一些东西会排除相同的优化，因此您会看到令人惊讶的结果。

确实，如果您将求和表达式更改为更现实的

```
 `+ for (int i : I, int j : J) (x[i]*y[j]) 
```

其中 summands 取自输入数组，因此无法优化总和，那么您将获得更符合您期望的加速结果：

JRE6

```
sequential sum: mean time = 436 ms;
parallel sum: mean time = 156 ms; standard deviation = 35,086 ms;
Speed up = 2.7948717948717947 
```

JRE7

```
sequential sum: mean time = 163 ms; standard deviation = 4 ms;
parallel sum: mean time = 78 ms; standard deviation = 15,362 ms;
Speed up = 2.08974358974359 
```

较低的加速数字是由于对数组 x 和 y 的并发访问。为每个核心使用阵列的本地副本可能会提供接近 4 的加速，如在原始示例中。

帕特里克

# iphone - ios 设备播放基于页面浏览控制器的应用程序的问题以及模拟器结果和 ios 设备之间的差异

> ID：13664706
> 
> 赞同：1
> 
> 时间：2012-12-01T23:12:14.683
> 
> 标签：iphone, ios5, ios-simulator, uipageviewcontroller

我有一个应用程序，它以 tableview 作为索引，然后当您单击一个项目时，它会转到该项目，导航栏正确显示项目的名称。从那时起，您可以使用 pageview 控制器翻转页面。并且标题相应更改。

无论您玩多少游戏，都可以在模拟器中正常工作。但是在设备上存在一个奇怪的问题。当我单击第一项时，一切都很好，但是当您翻转页面时，它也会完美更改标题，但是如果您单击页面向下滚动或出于任何原因触摸它，则在页面上翻页，（标题更改这意味着仅在单击第二个配方时，索引才会在触摸时更改。）

注意：这不会在模拟器中发生，也不会在您查看从索引中选择的第一个项目时发生，而只会在您翻页时发生。

1）我该如何解决这个问题，或者 2）任何可以处理 uipageviewcontroller 的翻转事件的处理程序，我参考了[http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/PageViewControllers .html](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/PageViewControllers.html)没有真正的运气。

# matlab - 如何将 3D 空间中的一组点投影到 Matlab 中的 2D 平面上？

> ID：13664707
> 
> 赞同：0
> 
> 时间：2012-12-01T23:12:17.320
> 
> 标签：matlab, 3d, coordinates, projection

我在 Matlab 中制作动画：我有 15 个点在 3D 空间中移动。它们的 XYZ 坐标和运动取自运动捕捉数据。我需要从运动“前面”的观察者的角度展示这些点是如何移动的。我现在正在尝试的是创建一个 2D 平面并将其移向点，以便它们最终“投影”到它上面。但是，它不是标准的 XY 或 YZ 平面，所以我很难弄清楚如何进行这项工作。

我怎样才能让这架飞机做我想做的事——或者我应该尝试另一种方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:09:35.067

您的目标基本上是实现一个理想的针孔相机，其中针孔成为空间中的一个点。您的每个 3D 点加上“针孔”定义了 3D 空间中的一条线，该线在某个点与您的投影平面相交。它看起来有点像这样：![针孔相机](../Images/c273f90c6aabd8ad17e81e5cf339fc19.png "针孔相机")

x_1 和 y_1 应该有相同的长度，即 1，因此 3D 空间中的“x”定义为 x = o_1 + a * x_1 + b * y_1。在您的 2D 投影中，a 和 b 成为您的绘图坐标。

# facebook - 使用 FB.getLoginStatus 验证用户已授予请求的权限

> ID：13664711
> 
> 赞同：0
> 
> 时间：2012-12-01T23:12:36.830
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

在我的应用程序中，我让我的用户与 FB 连接并授予我的应用程序权限。

当他们单击“连接”按钮时，会显示 FB 弹出窗口，他们会获得“使用 facebook 登录”，然后他们需要获得 publish_stream、manage_pages、电子邮件的大权限。

我的代码遇到的问题是，如果他们删除了其中一项权限（如 manage_pages ） checkLoginStatus 仍然允许用户继续。

那么如何验证用户是否已授予请求的权限？

```
<div id="fb-root"></div>
<script src="//connect.facebook.net/en_US/all.js"></script>
<script type="text/javascript">
FB.init({
    appId: '<?=FB_APP_ID?>',
    status: true,
    cookie: true
});

FB.getLoginStatus(checkLoginStatus);

function authUser() {
    FB.login(checkLoginStatus, {scope:'publish_stream, manage_pages, email'});
}

function checkLoginStatus(response) {
    if(response && response.status == 'connected') {
        $('#connbut').hide();
        FB.api('/me', function(user) {
            if (user) {
                  $('#fbuser-name').text(user.name);
                  $('#fbuserpict').attr('src', 'https://graph.facebook.com/' + user.id + '/picture');
                  $('#fbname').val(user.name);
                  $('#fbpict').val('https://graph.facebook.com/' + user.id + '/picture');
            }
        });
    } else {
        // Display the login button
        $('#connbut').show();
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:51:46.173

> 我的代码遇到的问题是，如果他们删除了其中一项权限（如 manage_pages ） checkLoginStatus 仍然允许用户继续。

当然可以，因为`FB.getLoginStatus`没有说明权限——它只告诉你用户是否连接到你的应用程序。

> 那么如何验证用户是否已授予请求的权限？

您可以通过请求`/me/permissions`（甚至只是使用字段扩展请求特定权限）来询问用户当前授予您的应用程序的权限。

但是通过 JS 这样做的客户端似乎以某种方式被缓存 - 请求权限，看到有一个丢失，调用`FB.login`并再次询问，根据我的经验，很可能仍然显示与以前相同的权限，即使用户已经提供了额外的之间的权限。实时获取可靠信息的唯一方法似乎是在服务器端进行。

# c++ - 奇怪的“找不到入口点”错误

> ID：13664712
> 
> 赞同：2
> 
> 时间：2012-12-01T23:12:53.300
> 
> 标签：c++, visual-studio-2008, visual-studio-2012, openal, glew

出于兼容性原因，我一直在使用 Visual Studio 2008 工具集来重建我的项目，虽然它与 2012 工具集 (v110) 完美配合，但在使用 2008 (v90) 构建后，我在运行我的程序时收到了这个奇怪的消息。

“无法在动态链接库 OpenAL32.dll 中找到过程入口点 __GLEW_VERSION_2_1”

您可能知道，GLEW 和 OpenAL 是完全不同的无关库。

我链接的库是：

-OpenAL -ALUT -OpenGL -libvorbisfile -SDL -SDLmain

知道是什么导致了这种奇怪的混淆吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:16:31.047

Just out of interest, does your main executable and library run under the same character set? The amount of times I have developed a static library/DLL and a main application and run into this problem beggars belief. Essentially, all projects must use the same character set (UNICODE, ANSI). Might not be your problem but I thought I would try and help :-)

# php - Android 应用程序在平板电脑上崩溃但在普通手机上不崩溃？

> ID：13664713
> 
> 赞同：0
> 
> 时间：2012-12-01T23:12:55.357
> 
> 标签：php, android, mysql, eclipse

所以我为使用 Eclipse、PHP 和 MySQL 的应用程序创建了一个登录功能......它在多部手机（Xperia Play、Droidx、HTC Thunderbolt）上运行良好，但是，我无法让它在任何平板电脑上运行我试过了。（Nexus 7，华硕变压器）。单击注册新用户时，我不断收到强制关闭错误。

分辨率有问题吗？还是与我的代码有关？

我使用了本教程：

[http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)

谢谢！

编辑：这是我的日志：

```
12-01 18:22:14.896: D/AndroidRuntime(10040): Shutting down VM
12-01 18:22:14.896: W/dalvikvm(10040): threadid=1: thread exiting with uncaught exception (group=0x416f2930)
12-01 18:22:14.946: E/AndroidRuntime(10040): FATAL EXCEPTION: main
12-01 18:22:14.946: E/AndroidRuntime(10040): android.os.NetworkOnMainThreadException
12-01 18:22:14.946: E/AndroidRuntime(10040):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at libcore.io.IoBridge.connect(IoBridge.java:112)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at java.net.Socket.connect(Socket.java:842)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at com.groupone.the.health.effect.library.JSONParser.getJSONFromUrl(JSONParser.java:42)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at com.groupone.the.health.effect.library.UserFunctions.registerUser(UserFunctions.java:61)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at com.groupone.the.health.effect.RegisterActivity$1.onClick(RegisterActivity.java:54)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at android.view.View.performClick(View.java:4202)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at android.view.View$PerformClick.run(View.java:17340)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at android.os.Handler.handleCallback(Handler.java:725)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at android.os.Looper.loop(Looper.java:137)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at java.lang.reflect.Method.invokeNative(Native Method)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at java.lang.reflect.Method.invoke(Method.java:511)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-01 18:22:14.946: E/AndroidRuntime(10040):    at dalvik.system.NativeStart.main(Native Method) 
```

编辑#2：这是“.RegisterActivity”的代码：

```
import org.json.JSONException;
import org.json.JSONObject;

import com.example.androidhive.library.DatabaseHandler;
import com.example.androidhive.library.UserFunctions;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class RegisterActivity extends Activity {
    Button btnRegister;
    Button btnLinkToLogin;
    EditText inputFullName;
    EditText inputEmail;
    EditText inputPassword;
    TextView registerErrorMsg;

    // JSON Response node names
    private static String KEY_SUCCESS = "success";
    private static String KEY_ERROR = "error";
    private static String KEY_ERROR_MSG = "error_msg";
    private static String KEY_UID = "uid";
    private static String KEY_NAME = "name";
    private static String KEY_EMAIL = "email";
    private static String KEY_CREATED_AT = "created_at";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.register);

        // Importing all assets like buttons, text fields
        inputFullName = (EditText) findViewById(R.id.registerName);
        inputEmail = (EditText) findViewById(R.id.registerEmail);
        inputPassword = (EditText) findViewById(R.id.registerPassword);
        btnRegister = (Button) findViewById(R.id.btnRegister);
        btnLinkToLogin = (Button) findViewById(R.id.btnLinkToLoginScreen);
        registerErrorMsg = (TextView) findViewById(R.id.register_error);

        // Register Button Click event
        btnRegister.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                String name = inputFullName.getText().toString();
                String email = inputEmail.getText().toString();
                String password = inputPassword.getText().toString();
                UserFunctions userFunction = new UserFunctions();
                JSONObject json = userFunction.registerUser(name, email, password);

                // check for login response
                try {
                    if (json.getString(KEY_SUCCESS) != null) {
                        registerErrorMsg.setText("");
                        String res = json.getString(KEY_SUCCESS);
                        if(Integer.parseInt(res) == 1){
                            // user successfully registred
                            // Store user details in SQLite Database
                            DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                            JSONObject json_user = json.getJSONObject("user");

                            // Clear all previous data in database
                            userFunction.logoutUser(getApplicationContext());
                            db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));
                            // Launch Dashboard Screen
                            Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class);
                            // Close all views before launching Dashboard
                            dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            startActivity(dashboard);
                            // Close Registration Screen
                            finish();
                        }else{
                            // Error in registration
                            registerErrorMsg.setText("Error occured in registration");
                        }
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        });

        // Link to Login Screen
        btnLinkToLogin.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                Intent i = new Intent(getApplicationContext(),
                        LoginActivity.class);
                startActivity(i);
                // Close Registration View
                finish();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T23:31:13.890

你得到一个`NetworkOnMainThreadException`. 这意味着您正在主 UI 线程中执行繁重的网络操作。在低于 11 的 API 级别中，您可以执行此操作，但在 Android HC+ 上不再允许。您可以通过使用[Asynctask](http://developer.android.com/reference/android/os/AsyncTask.html)来避免这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T23:21:21.527

您是从另一个线程或异步任务发出 http 请求吗？因为平板电脑高于 api 级别 10。您可能面临严格模式问题。尝试在异步任务中发出您的 http 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T23:22:17.490

你能在主线程中产生网络流量吗？早期版本的 android 允许您这样做，但从 Honeycomb 开始，所有网络访问都必须在另一个线程中完成。你提到的平板电脑运行冰淇淋三明治，所以这是可能的。

很难解决你的问题。请留下堆栈跟踪和源代码。你的描述很模糊。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T23:31:34.047

`android.os.NetworkOnMainThreadException`意味着您正在主线程上进行调用，它有一个非常简单的解决方案：在`com.groupone.the.health.effect.RegisterActivity$1.onClick(RegisterActivity.java:54)`

使用 AsynTask (http://developer.android.com/reference/android/os/AsyncTask.html) 进行注册。您必须将 UI 代码与那里的网络代码分开。

# python - 如何让 Python SOAP 客户端正确使用证书？

> ID：13664720
> 
> 赞同：4
> 
> 时间：2012-12-01T23:13:31.233
> 
> 标签：python, soap, client, certificate

我正在尝试使用 Python 通过 SOAP 访问服务器，但遇到了错误，告诉我需要使用正确的证书 - 但我确信我正在这样做。

为了完成这个练习，我需要遵循一些说明——我需要使用 HTTPS 通过 WSDL 链接进行连接，并在服务器上调用一个方法。我使用 OpenSLL 将收到的密钥转换为 key.pm 和 cert.pem；我还尝试了 SUDS 和其他一些解决方法。但是，尽管我尝试了一切，但服务告诉我我需要使用正确的证书。

我知道证书实际上是正确的，因为我为 Firefox 安装了一个 SOAP 客户端，当我使用相同的证书和相同的参数连接到服务器时，我得到的是有效数据而不是错误消息。因此，我认为 SUDS 就证书进行沟通的方式有问题。我尝试了“ [SUDS over HTTPS with cert](https://stackoverflow.com/questions/6277027/suds-over-https-with-cert) ”问题的变通方法，但这些对我不起作用。

有没有办法解决这个问题，或者是否有另一个可以正确使用证书的 Python SOAP 客户端（即使我必须为请求手动创建 XML）？

# ajax - 在 MVC 中，让 Ajax 代码（在视图中）请求查询而不是控制器是否可以

> ID：13664726
> 
> 赞同：2
> 
> 时间：2012-12-01T23:14:05.333
> 
> 标签：ajax

我在[这里](http://www.tizag.com/ajaxTutorial/ajax-mysql-database.php)和[这里](http://www.tizag.com/ajaxTutorial/ajax-javascript.php)使用 Tizag 教程。我稍微修改了代码，如下：

订单.html：

```
<html>
<body>
<script type="text/javascript">
<!-- 
function createRequest() {
    try {
      request = new XMLHttpRequest();
      //alert("Request is XMLHttp");
    } catch (tryMS) {
      try {
        request = new ActiveXObject("Msxml2.XMLHTTP");
        //alert("Request is ActiveX1");
      } catch (otherMS) {
        try {
          request = new ActiveXObject("Microsoft.XMLHTTP");
          //alert("Request is ActiveX2");
        } catch (failed) {
          request = null;
        }
      }
    }
    return request;
  }
function ajax1(){
    ajaxRequest = createRequest();
    ajaxRequest.onreadystatechange = function(){
        if(ajaxRequest.readyState == 4){
            //alert("Request.readyState is 4");
            var ajaxDisplay = document.getElementById('ajaxDiv');
            ajaxDisplay.innerHTML = ajaxRequest.responseText;
        }
    }
    var age = document.getElementById('age').value;
    var wpm = document.getElementById('wpm').value;
    var sex = document.getElementById('sex').value;
    var queryString = "?age=" + age + "&wpm=" + wpm + "&sex=" + sex;
    ajaxRequest.open("GET", "ajaxEx1.php" + queryString, true);
    ajaxRequest.send(null); 
}
//-->
</script>

<form name='myForm'>
Max Age: <input type='text' id='age' /> <br />
Max WPM: <input type='text' id='wpm' />
<br />
Sex: <select id='sex'>
<option>m</option>
<option>f</option>
</select>
<input type='button' onclick='ajax1()' value='Query MySQL' />
</form>
<div id='ajaxDiv'>Your result will display here</div>
</body>
</html> 
```

以及被称为 ajaxEx1.php 的页面：

```
<?php
$dbhost = "localhost";
$dbuser = "admin";
$dbpass = "abcd";
$dbname = "test01";
mysql_connect($dbhost, $dbuser, $dbpass);
mysql_select_db($dbname) or die(mysql_error());
$age = $_GET['age'];
$sex = $_GET['sex'];
$wpm = $_GET['wpm'];
$age = mysql_real_escape_string($age);
$sex = mysql_real_escape_string($sex);
$wpm = mysql_real_escape_string($wpm);
$query = "SELECT * FROM ajax_example WHERE ae_sex = '$sex'";
if(is_numeric($age))
    $query .= " AND ae_age <= $age";
if(is_numeric($wpm))
    $query .= " AND ae_wpm <= $wpm";
    //Execute query
$qry_result = mysql_query($query) or die(mysql_error());
$display_string = "<table>";
$display_string .= "<tr>";
$display_string .= "<th>Name</th>";
$display_string .= "<th>Age</th>";
$display_string .= "<th>Sex</th>";
$display_string .= "<th>WPM</th>";
$display_string .= "</tr>";
while($row = mysql_fetch_array($qry_result)){
    $display_string .= "<tr>";
    $display_string .= "<td>$row[ae_name]</td>";
    $display_string .= "<td>$row[ae_age]</td>";
    $display_string .= "<td>$row[ae_sex]</td>";
    $display_string .= "<td>$row[ae_wpm]</td>";
    $display_string .= "</tr>";
}
echo "Query: " . $query . "<br />";
$display_string .= "</table>";
echo $display_string;
?> 
```

这很好用而且非常简单。但是，我注意到在这个示例中，查询本质上是由 Javascript 请求的，在 MVC 模式中被视为 View 元素。在实际的 MVC 站点中这仍然是一个好习惯吗？视图是否会将一些参数发送到一个文件，该文件将运行查询本身或将其传递给 DAO 并接收响应？

如果不是，如果上面是 MVC 站点的一部分，那么 Ajax 部分将如何重新组织？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:27:58.800

如果是我，并且我在一个足够大的站点上工作，它需要通过 MVC 模式进行模块化，我肯定会将 ajax 内容提取到模型对象而不是视图中。像 Backbone.js 这样的框架在这​​方面工作得非常好，因为模型有内置的 ajax 处理并且会为你来回填充数据。

如果你想自己做，你可以创建一个模型对象，它只将数据（而不是 DOM 元素）作为参数并为你返回数据。

```
function AjaxModel() {

    this.get = function(age, wpm, sex, callback) {

        ajaxRequest = createRequest();
        ajaxRequest.onreadystatechange = callback;

        var queryString = "?age=" + age + "&wpm=" + wpm + "&sex=" + sex;
        ajaxRequest.open("GET", "ajaxEx1.php" + queryString, true);
        ajaxRequest.send(null);
    } 
} 
```

那么你可以这样称呼它：

```
var ajaxM = new AjaxModel();
var age = document.getElementById('age').value;
var wpm = document.getElementById('wpm').value;
var sex = document.getElementById('sex').value;
ajaxM.get(age, wpm, sex, onComplete);

function onComplete(r) {
    /// your ajax complete method
} 
```

如果您的网站足够大，`Backbone.js`那么在我看来，包含一个类似框架是非常值得的。

作为旁注，MVC 模式是如何分离逻辑的模型，但它并不完美。我经常发现自己创建了许多视图和模型，但很少有控制器。视图逻辑与 javascript 中的控制非常相关，所以我经常发现它们并不需要。我会做对您最有意义的事情，同时确保至少您的数据与其他所有数据分开。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T01:58:23.113

只要您知道为什么要这样做以及这样做的结果会怎样，一切都会好起来的；）。但是，这肯定不是最佳实践。

在 MVC 应用程序中，通常有很多事情在“后台”进行。每个请求都有它的生命周期，这个生命周期的外观取决于它所构建的代码库。

如果您选择不使用此链，您也将失去它带来的好处。它可能涉及（由您或其他人）注册的各种钩子和插件，以使系统作为一个整体工作。它还可能涉及提供系统安全性，例如集中式 ACL 逻辑。

我建议你使用控制器，它反过来从模型中请求数据。然后，这些数据可以从控制器直接发送到客户端（作为 JSON 或 XML），或者发送到在客户端处理数据之前格式化数据的视图。但我喜欢使用 JSON。

并且，JavaScript 应该与标记 (HTML) 分开，并放在一个 .js 文件中。

祝你好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T04:17:45.110

在 MVC 中，您通常发布到一个控制器，该控制器构造传递给视图以显示的模型。

You are using AJAX calls to update parts of your view dynamically without reloading the complete view. It is is completely fine to construct your query inside your JavaScript code. If you're concerned about separating model and view code, you may want to look at [KnockoutJS](http://knockoutjs.com/) for client side (JavaScript) MVVM pattern implementation.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T13:12:28.313

I would, never ever, make calls into a database directly with an ajax request.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T15:41:53.790

If you're using MVC, the good approach is to use it in the entire app.

So, when doing an ajax request, build the `query string` or `pretty url` acording to your framework needs, implement everything as you would use a normal view (`View <- Controller <- Model`) and just format the view to return the AJAX stuff (partial HTML, JSON, XML, or whatever).

Usually this may be done by just not using a template with the view.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T16:24:20.753

I think it is ok to put you ajax code (make it generic and reusable depending on your needs) in a separate javascript file that you can include in the view that needs that kind of ajax call.

You should implement an ajax controller, that will process you ajax requests and just send the response? if it is data you just return data using json. this is how I am doing it with Zend framework.

Take a quick look at this [Implementing OOP PHP with AJAX, MVC?](https://stackoverflow.com/questions/7454256/implementing-oop-php-with-ajax-mvc)

# ios - 具有复杂格式的 UITableViewCell 的最佳方法

> ID：13664727
> 
> 赞同：11
> 
> 时间：2012-12-01T23:14:06.723
> 
> 标签：ios, uitableview, uiwebview, nsattributedstring

我是 iOS 开发的新手，正在思考如何最好地解决一个相当简单的设计问题。我想显示一组项目，每个项目都有草图的结构。在给定的集合中，不超过 10 个项目。

![草图](../Images/2574f09392083512bb5cebf8981954df.png)

每个项目都包括一个缩略图、一个标题、一个简介和一组按钮。有两个并发症：

1.  文本的数量和按钮的数量是可变的。
2.  文本需要一些内部格式（斜体和粗体）。

我考虑过这些方法：

1.  使用带有自定义、可调整大小的 UITableViewCell 的表格视图，可能对文本使用 OHAttributedLabel 之类的东西。对于可变数量的按钮，要么以编程方式布置它们，要么可能使用新的集合视图（对于较旧的 iOS，必须使用 3rd 方网格视图）。

2.  使用基于 UIWebView 的带有自定义单元格的表格视图。

3.  将整个集合作为一个 UIWebView。

4.  使用带有部分的表格视图；每个项目都有自己的部分，并将按钮和文本解析为行。

希望获得有关更有经验的 iOS 开发人员如何解决此问题的建议。

编辑：我现在考虑最好的方法可能是：

5）对整个事情使用 UICollectionView。

更新：最后，我将整个事情放在代码中作为自定义表格单元格（即＃1）。这是一个不错的选择，不仅因为答案中给出的原因，而且因为作为 iOS 开发的新手，这是我需要掌握的东西。甚至没有为按钮使用集合视图，因为我担心性能以及支持 iOS5 的麻烦。

我确实认为在整个设计中使用集合视图（#5）将是一个优雅的解决方案，我实际上是沿着这条路开始的。但是，上面的简化图片中未显示的一些复杂情况使其变得笨拙。

第二次更新：#1 原来是一个死胡同。我的最终解决方案使用了 UIWebView (#3) - 请参阅答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:50:13.720

我发现一些资源可能对一些正在做复杂的 tableviewcell 并想要快速滚动的人有用。我仍在开发它，但我想先与大家分享。

1.  Facebook iOS 发布说明：他们提到了技术：核心文本、表格高度的预/异步计算、在后台线程上做很多事情、在核心数据中保存布局属性。[http://www.facebook.com/notes/facebook-engineering/under-the-hood-rebuilding-facebook-for-ios/10151036091753920](http://www.facebook.com/notes/facebook-engineering/under-the-hood-rebuilding-facebook-for-ios/10151036091753920)

2.  快速滚动示例：[https ://github.com/adamalex/fast-scrolling](https://github.com/adamalex/fast-scrolling)

3.  Apple 的示例项目 TableViewSuite。第4个例子。 [https://developer.apple.com/library/ios/#samplecode/TableViewSuite/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/TableViewSuite/Introduction/Intro.html)

非常接近解决方案..是的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-25T04:11:23.457

我知道这是一个旧线程，但我发现它非常有趣，因为我现在作为一名 iPhone 开发人员已经足够解决这些类型的性能问题了。我在 Facebook 的网站上发现了 Facebook Engineering 的一篇非常有趣的文章，描述了他们如何实现 UITableView 并克服动态大小问题，以及快速的内容管理。似乎他们使用更深层次的对象进行了预先计算，并尽可能保持一切异步和预缓存。我将提供该文章的链接，但我将复制恰好解决此问题的部分。希望对你有帮助。这是链接，[https://www.facebook.com/notes/facebook-engineering/under-the-hood-rebuilding-facebook-for-ios/10151036091753920](https://www.facebook.com/notes/facebook-engineering/under-the-hood-rebuilding-facebook-for-ios/10151036091753920)，以及最相关的摘录：

> **（重新）为速度而建**
> 
> 我们在原生 iOS 上构建的最大优势之一就是能够让应用程序快速运行。现在，当您在新的 iOS 版 Facebook 上滚动浏览您的新闻提要时，您会发现感觉比以前快得多。我们实现这一目标的一种方法是重新平衡我们执行某些任务的位置。例如，在 iOS 中，主线程驱动 UI 并处理触摸事件，所以我们在主线程上做的工作越多，应用程序就会感觉越慢。相反，我们注意在后台执行计算量大的任务。这意味着我们所有的网络活动、JSON 解析、NSManagedObject 创建和保存到磁盘都不会触及主线程。
> 
> 再举一个例子，我们使用 Core Text 来布局我们的许多字符串，但是布局计算很快就会成为瓶颈。使用我们的新 iOS 应用程序，当我们下载新内容时，我们会异步计算所有这些字符串的大小，缓存我们的 CTFramesetter（创建起来可能很昂贵），然后当我们将故事呈现到我们的 UITableView 中时使用所有这些计算。
> 
> 最后，当您启动 iOS 版 Facebook 时，您希望看到您的新闻提要，而不是加载微调器。为了尽可能提供最佳体验，我们现在会立即显示以前缓存的内容。但这引入了一个新问题：如果您的新闻提要中有很多故事，UITableView 通过为您的新闻提要中的每个故事调用委托方法 -tableView:heightForRowAtIndexPath: 来在工作中抛出一个小扳手，以便计算出如何高以使其滚动条。这将导致应用程序从磁盘加载所有故事数据并仅计算整个故事布局以返回故事的高度，这意味着随着您积累更多故事，启动将逐渐变慢。
> 
> 这个特定问题的解决方案有两个主要部分。首先，当我们进行初始异步布局计算时，我们还将故事的高度存储在 Core Data 中。这样做，我们完全避免了 -tableView:heightForRowAtIndexPath: 中的布局计算。其次，我们拆分了我们的“故事”模型对象。我们只在启动时从磁盘中获取故事高度（和其他一些东西）。稍后，我们获取其余的故事数据，我们需要做的任何布局计算都是异步执行的。
> 
> 所有这些以及更多导致滚动时的高帧速率和保持响应的应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T01:49:25.180

我最初接受（并实施）@Daij-Djan 的回答，但现在我相信最好的方法是＃3（UIWebView）。它归结为性能。

UITableView 可以很好地处理带有子视图的自定义单元格，尤其是在具有不同高度的单元格的上下文中。一排排的按钮使滚动变得不连贯。正如 Apple 在[Cells and Table View Performance](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW1)中所建议的那样，我确保子视图都是不透明的，但是没有办法遵循“避免重新布局内容”的建议。

添加到动态单元格高度和属性字符串上，这些表格的滚动效果很差。我想下一个优化将是覆盖 drawRect，但那时我决定尝试 UIWebView。

UIWebView 也不是没有性能问题！随着内容的增长，它的滚动性能会迅速下降，但是，我可以通过隐藏内容并让用户根据需要“打开”它来管理它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T00:35:23.167

没有 1 可能是最直接的工作，紧随其后的是＃2，但
正如 ACB 所说，它也是最灵活的，IMO 肯定会提供最好的外观

没有 3 个作品，但不会感觉那么流畅/总是有点“html-ish”

没有 4 听起来像是通往地狱的高速公路（稍后。它将是修改/维护的 PITA）

# date - 如何在 Jekyll 中获取序数日期？

> ID：13664728
> 
> 赞同：5
> 
> 时间：2012-12-01T23:14:16.413
> 
> 标签：date, jekyll, liquid

在 Jekyll 中，我真的希望日期格式为“2012 年 12 月 2 日”——即使用序数，而不仅仅是“2012 年 12 月 2 日”。

我看到`ordinalize`Ruby 中有一个函数可以做到这一点，但我没有运气将它与 Liquid 和 Jekyll 结合起来。

如何按我的意愿格式化日期？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T23:14:16.413

我通过编写以下 Jekyll 插件解决了这个问题，我将其放置在`_plugins`具有任意名称的目录中，例如`date.rb`：

```
require 'date'
require 'facets/integer/ordinal'

module Jekyll
  module DateFilter
    def pretty(date)
      "#{date.strftime('%e').to_i.ordinalize} #{date.strftime('%B')} #{date.strftime('%Y')}"
    end  
  end
end

Liquid::Template.register_filter(Jekyll::DateFilter) 
```

然后——安装了`facets`Ruby gem——我可以`{{ post.date | pretty }}`在我的站点中使用，一切都很好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-04-05T13:30:34.983

在 Jekyll 3.8 或更高版本（例如 GitHub 页面）中，您可以使用新的`date_to_string`过滤器选项并编写：

```
{{ page.date | date: "%I:%M %p on %A" }}
{{ page.date | date_to_string: "ordinal" }} 
```

这将输出：`12:23 PM on Friday 16th Jan 2015`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-23T11:28:52.933

对于使用 GitHub Pages 的人：

如果您在 GitHub 上托管您的网站，您将无法使用模块（我相信 GitHub使用排除模块`jekyll build`的`--safe`选项运行），这意味着如果您要使用 Christopher 的答案，您必须在本地构建您的网站并且然后将 _site 目录的内容推送到 GitHub。

这是一个仅使用 Liquid 获取序数/日期的解决方案，它允许您以通常的方式使用 GitHub Pages + Jekyll：

```
{% capture day %}{{ page.date | date: "%-d" }}{% endcapture %}
{% capture dayLastTwoDigits %}{{ day | modulo: 100 }}{% endcapture %}
{% if dayLastTwoDigits >= "11" and dayLastTwoDigits <= "13" %}
    {% assign ordinal = "th" %}
{% else %}
    {% capture dayLastDigit %}{{ day | modulo: 10 }}{% endcapture %}
    {% case dayLastDigit %}
        {% when "1" %}
            {% assign ordinal = "st" %}
        {% when "2" %}
            {% assign ordinal = "nd" %}
        {% when "3" %}
            {% assign ordinal = "rd" %}
        {% else %}
            {% assign ordinal = "th" %}
    {% endcase %}
{% endif %}
{% capture ordinalDay %}{{ day | append: ordinal }}{% endcapture %}
<p class="post-meta">{{ page.date | date: "%I:%M %p on %A" }} {{ ordinalDay }} {{ page.date | date: "of %b, %Y" }}{% if page.author %} • {{ page.author }}{% endif %}{% if page.meta %} • {{ page.meta }}{% endif %}</p> 
```

这将输出如下内容：

`12:23 PM on Friday 16th of Jan, 2015`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-11T04:39:41.537

如果您想要一个完全流动的答案，您可以执行以下操作：

1.  创建一个包含文件，例如：ordinalsuffix.html

2.  将以下代码放入该文件中：

* * *

```
{% assign numbertoordinal = (numbertoordinal | default: 0) | plus: 0 | modulo: 100 %}
{% assign ordinalresult = "th" %}

{% case numbertoordinal %}
    {% when 1 or 21 or 31 or 41 or 51 or 61 or 71 or 81 or 91 %}
    {% assign ordinalresult = "st" %}
    {% when 2 or 22 or 32 or 42 or 52 or 62 or 72 or 82 or 92 %}
    {% assign ordinalresult = "nd" %}
    {% when 3 or 23 or 33 or 43 or 53 or 63 or 73 or 83 or 93 %}
    {% assign ordinalresult = "rd" %}
{% endcase %} 
```

* * *

3.  然后你基本上可以像函数一样调用它，就像这样：

* * *

```
{% assign numbertoordinal = 101 %}
{% include ordinalsuffix.html %}
{% assign result = numbertoordinal | append: ordinalresult %} 
```

* * *

当然，您需要扩展它以输出完全格式化的日期。但是，如果您想知道任意数字有什么序数后缀，这是一个相当干净的答案。

# c# - 使用 OAuth 2 和服务帐户访问较旧的 GData API（电子表格 API）

> ID：13664731
> 
> 赞同：16
> 
> 时间：2012-12-01T23:14:38.220
> 
> 标签：c#, .net, oauth-2.0, gdata-api, google-spreadsheet-api

简短的问题是这是否可能，如果可能，如何？

### 大纲

我有一个 .NET 应用程序，它当前使用服务帐户通过 Google Drive API 访问 Google Apps 域中的信息。这可以很好地使用[google-api-dotnet-client 库](http://code.google.com/p/google-api-dotnet-client/)和代码，与[此处示例中所示](https://developers.google.com/drive/delegation)的相同行- 这是目前我正在做的一个非常好的基本示例。

我现在想做的是扩展它，以及[使用“新”google-api-dotnet-client 库提供的那些 API](https://code.google.com/p/google-api-dotnet-client/wiki/APIs)，它使用旧的“GData”库，如旧[google-gdata 库](http://code.google.com/p/google-gdata/)提供的那样，特别是电子表格 API（也许还会有更多）。

### 问题

这就是困难出现的地方。正如上面第一段中的第二个链接所证明的那样，以前的图书馆完全符合我的要求 - 以及我自己做的事实。**但是**......虽然第二个库已更新为支持 OAuth 2.0 以及 OAuth 1.0 和其他较旧的身份验证技术，但它不允许 - 据我从广泛的谷歌搜索和跟踪错误中得知 - 允许“代表我所有用户的服务帐户”我需要的操作。

我的问题是我是否遗漏了一些可以让我做我想做的事情的东西（可能是很难找到或没有记录的东西）。如果做不到这一点，有什么办法可以强制这种行为并使这两个库并排运行？

### 理想的解决方案

理想情况下，我希望通过某种方式让`Google.GData.Spreadsheets.SpreadsheetsService`实例能够利用`Google.Apis.Authentication.Auth2Authenticator<AssertionFlowClient>`我已经在使用的实例......不知何故。这样的巫术是可能的吗？我错过了显而易见的事情吗？

如果做不到这一点，我很乐意以旧库可以处理的某种方式再次完成整个 OAuth2“断言流客户端”的舞蹈。

帮助？

### 其他想法

我已经考虑过——并且暂时拒绝了——从头开始并编写自己的库来实现这一点的选择。这有两个原因：

1.  gdata 库已经存在，并且由许多可能比我聪明的人开发。我没有那么自大，我相信我可以做得更好。
2.  我不确定这些旧 API 是否支持/允许使用带有服务帐户的 OAuth2 方法。

我一直希望避免但可能不得不根据这里的答案回退的另一种方法是使用 2-legged OAuth 1.0 作为其中的一部分。我不希望这样做，因为应用程序的某些部分依赖于一种旧的身份验证方法，而其他部分则以一种不错的新方法来做，这对我来说是错误的。还有更多的问题......

* * *

### 更新

我已经考虑了将 GDataRequestFactory 和 GDataRequest 子类化的可能性，这样我就可以创建自己的请求工厂，并使用`Google.Apis.Authentication.Auth2Authenticator<AssertionFlowClient>`（好吧，`Google.Apis.Authentication.IAuthenticator`无论如何的实例）的实例，它可以在请求被调用之前介入以验证请求。但是...... GDataRequest 的构造函数是内部的，这阻止了我。

看起来这不是故意的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-10-08T14:27:50.153

为了其他人遇到这个问题（现在在接受的答案中链接到的解决方案使用了不推荐使用的代码），这是我解决它的方法：

首先，`Google.Apis.Auth`通过设置`ServiceAccountCredential`以下 Google 的[服务帐户示例](https://developers.google.com/api-client-library/dotnet/guide/aaa_oauth#service_account)，在“新 API”领域（使用 nuget 包）开始：

```
//In the old api, this accessed the main api accounts' sheets, not anymore
//** Important ** share spreadsheets with the Service Account by inviting the "serviceAccountEmail" address to the sheet
string serviceAccountEmail = "12345697-abcdefghijklmnop@developer.gserviceaccount.com";

var certificate = new X509Certificate2(@"key.p12", "notasecret", X509KeyStorageFlags.Exportable);

ServiceAccountCredential credential = new ServiceAccountCredential(
   new ServiceAccountCredential.Initializer(serviceAccountEmail)
   {
       Scopes = new[] { "https://spreadsheets.google.com/feeds", "https://docs.google.com/feeds" }
   }.FromCertificate(certificate)); 
```

告诉凭证请求访问令牌：

```
credential.RequestAccessTokenAsync(System.Threading.CancellationToken.None).Wait(); 
```

现在是时候切换回“旧 API”领域了（使用`Google.GData.Spreadsheets`nuget 包）。首先构建`SpreadsheetsService`（类似于 Google 的[示例](https://developers.google.com/google-apps/spreadsheets/#retrieving_a_list_of_spreadsheets)）：

```
SpreadsheetsService service = new SpreadsheetsService("MySpreadsheetIntegration-v1"); 
```

要使用服务帐户身份验证，我们将创建一个实例`GDataRequestFactory`并设置一个自定义`Authorization`标头：

```
var requestFactory = new GDataRequestFactory("My App User Agent");
requestFactory.CustomHeaders.Add(string.Format("Authorization: Bearer {0}", credential.Token.AccessToken)); 
```

最后，将`SpreadsheetsService`'`RequestFactory`属性设置为这个新工厂：

```
service.RequestFactory = requestFactory; 
```

继续使用，`SpreadsheetsService`就像您使用任何其他技术进行身份验证一样。（**提示：**通过邀请`serviceAccountEmail`地址到工作表与服务帐户共享电子表格）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T13:28:39.560

我设法通过继承 GDataRequestFactory 并创建自己的 GDataRequest 实现的接口实现来解决这个问题。这个实现包装了一个通过反射实例化的 GDataRequest 实例，并添加了必要的代码以使用 IAuthenticator 实例（在我的例子中为 Auth2Authenticator）执行身份验证。

我在上面写了一篇博文，并添加了一个示例作为要点：

*   [博客：通过 .NET、OAuth 2.0 和服务帐户使用 Google 的电子表格 API](http://markembling.info/2012/12/google-spreadsheet-dotnet-oauth2-service-account)
*   [要点 4244834](https://gist.github.com/4244834)

如果它对您有帮助，请随意使用它（BSD 许可证）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-15T13:30:11.317

嘿只是偶然发现了同样的问题并产生了不同的解决方案：

有没有人考虑过将凭证对象中的参数直接写入 OAuth2Parameters 对象？

我这样做了，效果很好：

```
public class OAuthTest
{  
    OAuth2Parameters param = new OAuth2Parameters();

    public OAuthTest()
    {
        Debug.WriteLine("Calling: AuthGoogleDataInterface()");
        bool init = AuthGoogleDataInterface();
        if (init)
        {
            GOAuth2RequestFactory requestFactory = new GOAuth2RequestFactory(null, "My App User Agent", this.param);
            //requestFactory.CustomHeaders.Add(string.Format("Authorization: Bearer {0}", credential.Token.AccessToken));
            var service = new SpreadsheetsService("MyService");
            service.RequestFactory = requestFactory;
            SpreadsheetQuery query = new SpreadsheetQuery();

            // Make a request to the API and get all spreadsheets.
            SpreadsheetFeed feed = service.Query(query);

            // Iterate through all of the spreadsheets returned
            foreach (SpreadsheetEntry entry in feed.Entries)
            {
                // Print the title of this spreadsheet to the screen
                Debug.WriteLine(entry.Title.Text);
            }
        }
        Debug.WriteLine(m_Init);
    }

    private bool AuthGoogleDataInterface()
    {
        bool b_success;
        try
        {
            Console.WriteLine("New User Credential");
            // New User Credential
            UserCredential credential;
            using (var stream = new FileStream("client_secrets.json", FileMode.Open, FileAccess.Read))
            {
                GoogleClientSecrets GCSecrets = GoogleClientSecrets.Load(stream);
                string[] ArrScope = new[] { "https://spreadsheets.google.com/feeds", "https://docs.google.com/feeds" };
                credential = GoogleWebAuthorizationBroker.AuthorizeAsync(
                    GCSecrets.Secrets,
                    ArrScope,
                    "user", CancellationToken.None,
                new FileDataStore("My.cal")).Result;
                // put the Information generated for the credentials object into the OAuth2Parameters-Object to access the Spreadsheets
                this.param.ClientId = GCSecrets.Secrets.ClientId; //CLIENT_ID;
                this.param.ClientSecret = GCSecrets.Secrets.ClientSecret; //CLIENT_SECRET;
                this.param.RedirectUri = "urn:ietf:wg:oauth:2.0:oob"; //REDIRECT_URI;
                this.param.Scope = ArrScope.ToString();
                this.param.AccessToken = credential.Token.AccessToken;
                this.param.RefreshToken = credential.Token.RefreshToken;
            }

            Debug.WriteLine("AuthGoogleDataInterface: Success");
            b_success = true;
        }
        catch (Exception e)
        {
            Debug.WriteLine(e.ToString());
            b_success = false;
        }
        return b_success;
    }
} 
```

# jquery - jQuery函数中的`return this`，具有正确的（保留的）可链接性

> ID：13664733
> 
> 赞同：0
> 
> 时间：2012-12-01T23:15:03.463
> 
> 标签：jquery, return, settimeout, chaining

我需要一个等待功能，从以下开始：

```
var delay = (function() {
    return function(callback, ms) {
        setTimeout(callback, ms || 1000);
    };
})();

delay(function() {
    $('#foo').animate({
        height: 180
    }, 1000);
}); 
```

然后移植到jQuery：

```
jQuery.fn.wait = function(callback, seconds) {
    return this.each(function() {
        return setTimeout(callback, seconds || 1000);
    });
};

$('#second').wait(function() {
    $('#second').addClass('foo'); // works well
});​ 
```

最终陷入混乱：

```
$('#second').wait(function() {
    $(this).addClass('foo'); // `this` will not work here
});​ 
```

...我上次实例化的问题在哪里，或者我该如何解决？`this`在这里看的是`window`-object，而不是实际的`#second`-element...

除此之外，如果超时为0，是否可以让“链”走得更远？因此，如果我们有以下场景，则只有在计时器结束时才会添加该类：

```
$('#second').wait().addClass('foo'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T23:17:03.553

这与链接无关。*链接意味着在方法的返回值*
上调用额外的 jQuery 方法。( )。 您的方法已经支持链接，因为它返回（通过本身是可链接的）。*`$(...).wait(...).somethingElse()`
`this``this.each()`*

 *您正在询问如何使用特定`this`值调用回调：

```
var self = this;
callback.call(self); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T23:25:25.683

没有给你你想要的元素的原因`this`是因为你试图在一个你没有设置上下文的函数中使用它，试试

```
jQuery.fn.wait = function(callback, seconds) {
    return this.each(function() {
        var self = this
        return setTimeout(function(){
                   callback.call(self);
               }, seconds || 1000);
    });
}; 
```*

# sencha-touch-2 - Sencha Cmd 3.0.0.250 构建错误

> ID：13664736
> 
> 赞同：1
> 
> 时间：2012-12-01T23:16:03.083
> 
> 标签：sencha-touch-2

操作系统：Win7 HTTP 服务器：Tomcat7

我是 Sencha 的新手。刚刚安装了最新的 sencha-touch-2.1.0-commercial+Sencha Cmd 3.0.0.250。

可以在 SDK 目录下运行“sencha”命令。可以运行“sencha generate app GS ../GS”来生成示例项目。

我没有从新生成的项目 GS 中更改任何内容，并尝试使用命令构建它： sencha app build production

但我得到了以下堆栈跟踪：

```
C:\ZZ\Others\Startup\Tomcat 7.0\webapps\GS>sencha app build production
Sencha Cmd v3.0.0.250
[INF]           init-properties:
[INF]           init-sencha-command:
[INF]           init:
[INF]           -before-app-build:
[INF]           app-build-impl:
[INF]           production:
[INF]           -before-init-local:
[INF]           -init-local:
[INF]           -after-init-local:
[INF]           init-local:
[INF]           find-cmd:
[INF]           -before-init:
[INF]           -init:
[INF]           -after-init:
[INF]           init:
[INF]           -before-build:
[INF]           sass:
[INF]           -before-sass:
[INF]           -sass:
[INF]           [shellscript] '''compass''' is not recognized as an internal or external command,
[INF]           [shellscript]
[INF]           [shellscript] C:\ZZ\Others\Startup\Tomcat 7.0\webapps\GS\resources\sass>compass compile --boring --force
[INF]           [shellscript] operable program or batch file.
[ERR]           BUILD FAILED
[ERR]           com.sencha.exceptions.BasicException: The following error occurred while executing this line:
[ERR]           C:\ZZ\Others\Startup\Tomcat 7.0\webapps\GS\.sencha\app\build-impl.xml:92: The following error occurred while executing this l
ine:
[ERR]           jar:file:/C:/ZZ/Others/Startup/Sencha/Cmd/3.0.0.250/sencha.jar!/com/sencha/ant/antlib.xml:347: shellscript returned: 1
[ERR]                   at com.sencha.exceptions.BasicException.wrap(BasicException.java:43)
[ERR]                   at com.sencha.cli.Command.dispatch(Command.java:104)
[ERR]                   at com.sencha.cli.Commands.dispatch(Commands.java:49)
[ERR]                   at com.sencha.cli.AbstractCommand.dispatch(AbstractCommand.java:182)
[ERR]                   at com.sencha.ant.SenchaCommandTask.doExecute(SenchaCommandTask.java:58)
[ERR]                   at com.sencha.ant.BaseAntTask.execute(BaseAntTask.java:22)
[ERR]                   at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]                   at org.apache.tools.ant.Target.execute(Target.java:392)
[ERR]                   at org.apache.tools.ant.Target.performTasks(Target.java:413)
[ERR]                   at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
[ERR]                   at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
[ERR]                   at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
[ERR]                   at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
[ERR]                   at com.sencha.ant.AntRunner.run(AntRunner.java:156)
[ERR]                   at com.sencha.ant.AntRunner.run(AntRunner.java:72)
[ERR]                   at com.sencha.command.BasePluginCommands$BasePluginCommand.run(BasePluginCommands.java:87)
[ERR]                   at com.sencha.command.BasePluginCommands$BasePluginCommand.run(BasePluginCommands.java:91)
[ERR]                   at com.sencha.command.BasePluginCommands$BaseNamePathCommand.run(BasePluginCommands.java:135)
[ERR]                   at com.sencha.command.app.AppCommands$BuildCommand.execute(AppCommands.java:106)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at com.sencha.cli.Command.dispatch(Command.java:78)
[ERR]                   at com.sencha.cli.Commands.dispatch(Commands.java:49)
[ERR]                   at com.sencha.cli.Commands.dispatch(Commands.java:49)
[ERR]                   at com.sencha.command.Sencha.main(Sencha.java:71)
[ERR]           Caused by: C:\ZZ\Others\Startup\Tomcat 7.0\webapps\GS\.sencha\app\build-impl.xml:100: The following error occurred while exec
uting this line:
[ERR]           C:\ZZ\Others\Startup\Tomcat 7.0\webapps\GS\.sencha\app\build-impl.xml:92: The following error occurred while executing this l
ine:
[ERR]           jar:file:/C:/ZZ/Others/Startup/Sencha/Cmd/3.0.0.250/sencha.jar!/com/sencha/ant/antlib.xml:347: shellscript returned: 1
[ERR]                   at org.apache.tools.ant.ProjectHelper.addLocationToBuildException(ProjectHelper.java:551)
[ERR]                   at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:444)
[ERR]                   at org.apache.tools.ant.taskdefs.CallTarget.execute(CallTarget.java:105)
[ERR]                   at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
[ERR]                   at sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]                   at org.apache.tools.ant.Target.execute(Target.java:392)
[ERR]                   at org.apache.tools.ant.Target.performTasks(Target.java:413)
[ERR]                   at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
[ERR]                   at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
[ERR]                   at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
[ERR]                   at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
[ERR]                   at com.sencha.ant.AntRunner.run(AntRunner.java:156)
[ERR]                   at com.sencha.ant.AntRunner.run(AntRunner.java:80)
[ERR]                   at com.sencha.command.ant.AntCommand.execute(AntCommand.java:75)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at com.sencha.cli.Command.dispatch(Command.java:78)
[ERR]                   ... 31 more
[ERR]           Caused by: C:\ZZ\Others\Startup\Tomcat 7.0\webapps\GS\.sencha\app\build-impl.xml:92: The following error occurred while execu
ting this line:
[ERR]           jar:file:/C:/ZZ/Others/Startup/Sencha/Cmd/3.0.0.250/sencha.jar!/com/sencha/ant/antlib.xml:347: shellscript returned: 1
[ERR]                   at org.apache.tools.ant.ProjectHelper.addLocationToBuildException(ProjectHelper.java:551)
[ERR]                   at org.apache.tools.ant.taskdefs.MacroInstance.execute(MacroInstance.java:401)
[ERR]                   at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
[ERR]                   at sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]                   at org.apache.tools.ant.Target.execute(Target.java:392)
[ERR]                   at org.apache.tools.ant.Target.performTasks(Target.java:413)
[ERR]                   at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
[ERR]                   at org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets(SingleCheckExecutor.java:38)
[ERR]                   at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
[ERR]                   at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:442)
[ERR]                   ... 52 more
[ERR]           Caused by: jar:file:/C:/ZZ/Others/Startup/Sencha/Cmd/3.0.0.250/sencha.jar!/com/sencha/ant/antlib.xml:347: shellscript returne
d: 1
[ERR]                   at org.apache.tools.ant.taskdefs.ExecTask.runExecute(ExecTask.java:646)
[ERR]                   at org.apache.tools.ant.taskdefs.ExecTask.runExec(ExecTask.java:672)
[ERR]                   at org.apache.tools.ant.taskdefs.ExecTask.execute(ExecTask.java:498)
[ERR]                   at net.sf.antcontrib.platform.ShellScriptTask.execute(ShellScriptTask.java:132)
[ERR]                   at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
[ERR]                   at sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]                   at org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)
[ERR]                   at net.sf.antcontrib.logic.IfTask.execute(IfTask.java:197)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.TaskAdapter.execute(TaskAdapter.java:154)
[ERR]                   at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
[ERR]                   at sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]                   at org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)
[ERR]                   at net.sf.antcontrib.logic.IfTask.execute(IfTask.java:197)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.TaskAdapter.execute(TaskAdapter.java:154)
[ERR]                   at org.apache.tools.ant.UnknownElement.execute(UnknownEl
[ERR]           ement.java:291)
[ERR]                   at sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]                   at org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)
[ERR]                   at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
[ERR]                   at sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]                   at org.apache.tools.ant.taskdefs.MacroInstance.execute(MacroInstance.java:398)
[ERR]                   ... 64 more
[ERR]           Total time: 1 second
[ERR]           com.sencha.exceptions.BasicException: The following error occurred while executing this line:
C:\ZZ\Others\Startup\Tomcat 7.0\webapps\GS\.sencha\app\build-impl.xml:92: The following error occurred while executing this line:
jar:file:/C:/ZZ/Others/Startup/Sencha/Cmd/3.0.0.250/sencha.jar!/com/sencha/ant/antlib.xml:347: shellscript returned: 1 
```

有人能告诉我我在这里想念什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T12:05:26.330

只需添加

```
skip.sass=1 
```

在

> PROJECT_FOLDER/.sencha/app/sencha.cfg

和

> PROJECT_FOLDER/.sencha/workspace/sencha.cfg

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T14:29:25.373

错误信息很清楚：

```
'''compass''' is not recognized as an internal or external command 
```

需要安装`compass`，否则 Sencha CMD 无法编译 CSS。

希望这可以帮助

# c - 从文本文件创建链表

> ID：13664738
> 
> 赞同：1
> 
> 时间：2012-12-01T23:16:03.310
> 
> 标签：c, algorithm, text, linked-list

我正在自学链表，并提出了一个要解决的基本问题。我想逐行读取一个具有名称的文本文件并将每个名称添加到我的链接列表中。

文本文件的一个示例是：

```
John
Jacob
Jingleheimer
Smith 
```

我无法弄清楚如何动态添加到我建议的链接列表中。这是我到目前为止所拥有的。

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    struct node {
        char *name;
        struct node* next;
    };

    static const char* fileName = "test.txt";
    FILE *fp = fopen(fileName,"r");
    char *line = NULL;
    size_t len = 0;
    ssize_t read;

    struct node* head = NULL; // first node

    if (fp == NULL)
        exit(EXIT_FAILURE);

    while ((read = getline(&line, &len, fp)) != -1)
    {
        //add line of text to linked list
    }
    if (line)
        free(line);

       exit(EXIT_SUCCESS);

} 
```

任何指向正确方向的指针都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T23:22:46.643

好的，要做到这一点，您需要首先分配一个节点条目，然后将您刚刚读取的行复制到其中。然后将其添加到列表中。（我省略了错误处理，例如 malloc 返回 NULL）。

```
/* This will store the last read line first */
while ((read = getline(&line, &len, fp)) != -1)
{
    struct node *n = malloc(sizeof(*n));
    n->name = strdup(line); /* copy the line since it can get reused by getline */
    n->next = head;
    head = n;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T23:22:40.123

分配内存来保存字符串，将 memory = 设置为字符串。然后

```
node *next = malloc(sizeof(node));
next->name = name;
next->next = NULL;
head->next = next;
head = next; 
```

# jquery - jquery专注于div适用于ie10但不适用于firefox/chrome

> ID：13664741
> 
> 赞同：1
> 
> 时间：2012-12-01T23:16:25.823
> 
> 标签：jquery, focus

我的代码基本上应该显示`updateLogText div`并关注位于`middle div`它下方的。

这是代码：

```
$('#updateLogButton').click(function(event) {

    if ($('#updateLogText').is(':visible')){
        //hide div if content is visible
        $('#updateLogText').fadeOut();

    }else{

        $('#updateLogText').fadeIn();
        $('#middle').focus(); 
    }
        return false;

    }); 
```

添加 div 代码以确保完整性：

```
<?php 
                    if ( $num_of_updates != 0){
       ?>
       <div id="showUpdates">

        <a href="#" id="updateLogButton">View Update Log: <?php echo $num_of_updates ?></a>

            <?php } ?>

            <div id="updateLogText">
                    <?php 

                    while ($row = mysqli_fetch_array($updates_log_result)){
                        echo '<div class="commentbox">';
                        echo $row['comments'];
                        echo '</div>';
                        echo '<div class="commentfooter">Posted by '.$row['user'].' @ '.$row['datestamp'].'</div>';

                        echo'<br>';
                        }   

                    ?>
                </div>
          </div>

 <div id="middle">

     <div id="custExpBox">
       <div class="titleText boxTitle"> Customer Experience </div>  
      <div style="padding:3px;"> <?php echo nl2br("$data[cust_exp]"); ?> </div>
     </div>

    <div id="techSumBox">
      <div class="titleText boxTitle"> Technical Summary </div>
      <div style="padding-top:2px;"> <?php echo nl2br("$data[summary]"); ?> </div>
    </div>

 </div> 
```

有人可以告诉我为什么这在 Firefox/chrome 中失败了吗？

谢谢。

# memory-leaks - 码头延续和无法解释的内存使用模式

> ID：13664743
> 
> 赞同：2
> 
> 时间：2012-12-01T23:16:35.993
> 
> 标签：memory-leaks, jetty, continuations

我一直在努力解决一些看起来非常基本的问题，这个问题与使用 Jetty continuations 进行长轮询有关。

为了简单起见，我删除了所有应用程序特定的代码，只留下简单的延续相关代码。

我在下面粘贴我的 servlet 的 doPost 方法。我需要一些专家指导的关键问题是

*   在下面的代码块中，如果我按原样运行它并触发带有大约 200 字节的 post 正文的 post 请求，那么 500 个长轮询连接的内存量约为 20 MB。
*   好像我将突出显示的块注释为“减少内存占用:: 下面的注释块”，然后内存占用降至 7 MB

在这两种情况下，我都等待系统稳定，多次调用 GC，然后通过 jConsole 读取内存。它并不精确，但差异是如此之大且可以解释，以至于这里或那里的几个 100 字节的精度无关紧要。

我的问题爆发了，考虑到我的服务器需要保持 100K 连接，如果不是更多的话。在这里，这种无法解释的大小增加最终导致使用了接近 GB 的额外堆。

（是什么导致了这种额外的堆使用，即使从流中读取的内容也没有保留在 doPost 方法的范围之外。但它仍然添加到堆中......我错过了什么？）

```
 @Override
   protected void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {

    Continuation cc = ContinuationSupport.getContinuation(req);

    //if continuation is resumed, then send an answer back with 
    //hardcoded answer
    if (cc.isResumed()) {
        String myJson = "{\"1\",\"2\"}";
        res.setContentType("application/json");
        res.setContentLength(myJson.length());
        PrintWriter writer = res.getWriter();
        writer.write(myJson);
        writer.close();
    } 
    // if it is the first call to doPost ( not reentrant call )
    else if (cc.isInitial()) {          

        //START :: decrease memory footprint :: comment this block :: START

        // store the json from the request body in a string
        StringBuffer jsonString = new StringBuffer();
        String line = null;                      
        BufferedReader bufferedReader = req.getReader();
        while ((line = bufferedReader.readLine()) != null) {
            jsonString.append(line);
        }  

        //here jsonString was parsed and some values extracted
        //though that code is removed for the sake of this publish
        // as problem exists irrespective...of any processing

        line = null;            
        bufferedReader.close();
        bufferedReader = null;
        jsonString = null;

        // END :: decrease memory footprint :: comment this block :: END

        cc.setTimeout(150000);        

        cc.suspend();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:30:40.837

> 是什么导致了这种额外的堆使用...

看看这一行：

```
BufferedReader bufferedReader = req.getReader(); 
```

Note that you are not actually creating a new BufferedReader. When you call `getBufferedReader`, Jetty creates a BufferedReader which wraps an InputStreamReader which wraps a custom InputStream implementation which wraps a byte buffer. I am pretty sure that by executing the code which reads the entire message, you create large byte buffer inside the request object which stores the entire contents of the message body. Plus the request object maintains a reference to the readers.

At the beginning of the function you called:

```
Continuation cc = ContinuationSupport.getContinuation(req); 
```

I believe your continuation is holding onto the request which is storing all the data. So the simple act of reading the data is allocating the memory which will be preserved until you `discontinue` your continuation.

One thing you might try just as an experiment. Change your code to:

```
BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(req.getInputStream())); 
```

This way Jetty won't allocate it's own readers. Again - I don't know how much data is really stored in the readers compared to the rest of the request object - but it might help a little.

[update]

Another alternative is to avoid the problem. That's what I did (although I was using servlet 3.0 rather than Continuations). I had a resource - let's call it `/transfer` which would POST some data, then use an `AsyncContext` to wait for a response. I changed it to two requests with different URLS - `/push` and `/pull`. Any time I had some content that needed to be sent from client to server, it would go in the `/push` request which would then immediately return without creating an `AsyncContext`. Thus, any storage in the request is freed up right away. Then to wait for the response, I sent a second GET request with no message body. Sure - the request hangs around for a while - but who cares - it does not have any content.

You may have to rethink your problem and determine if you can perform your task in pieces - multiple requests - or whether you really have to handle everything in a single request.

# android - mediaRecorder 记录最后 X 秒

> ID：13664745
> 
> 赞同：4
> 
> 时间：2012-12-01T23:16:38.597
> 
> 标签：android, video-capture, duration, android-mediarecorder

我已成功使用`mediaRecorder`Android 上的课程录制视频。

但是，我现在需要做的是让它记录，直到我告诉它停止，但只记录最多 X 秒。

例如，如果我在 time=0（秒）开始录制，并且我将其设置为最多录制 10 秒，如果我在 time=20（秒）停止录制，录制的视频将是10..20 秒周期。

与我发现的唯一类似的是[setMaxDuration](http://developer.android.com/reference/android/media/MediaRecorder.html#setMaxDuration%28int%29)，但在设置指定时间后会自动停止，所以在我的情况下，它只会记录前 10 秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:24:02.370

**要让媒体记录器记录 X 秒，您必须将此代码简单地放入您的视频记录代码中**

```
Intent captureVideoIntent = new Intent(android.provider.MediaStore.ACTION_VIDEO_CAPTURE);
captureVideoIntent.putExtra(MediaStore.EXTRA_DURATION_LIMIT, 10);
captureVideoIntent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
startActivityForResult(captureVideoIntent, VIDEO_CAPTURED); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:41:31.980

I'm not aware of any way to accomplish what you need using just the SDKs. You could have it record a video and then when you determine it cut the video down to the last 10 seconds.

I haven't used it, but this guy suggests his library in this [answer](https://stackoverflow.com/a/11551682/1076683)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-16T14:11:31.243

搜索它的正确关键字是“循环缓冲区”。您将看到一些方法，这些方法并不简单。有些使用 NDK 解决方案。

我的想法是：你知道你想记录 X 秒。然后记录到fileX_1，然后结束记录。自动启动并记录 fileX_2 直到结束。当它结束时，然后记录到 fileX_3 并删除 fileX_2 以节省空间。

所以最大存储和视频长度可以是 X * 2。最小可以是 X。

要使用循环录制，我认为它必须将其解码为帧，存储它，对其进行编码，使用大量的处理能力，结果是电池耗尽和设备发热！

# c# - 使用 Linq C# 为给定索引范围选择值

> ID：13664748
> 
> 赞同：0
> 
> 时间：2012-12-01T23:17:15.550
> 
> 标签：c#, linq

我一直在尝试从有索引列表的列表中获取一系列元素。

注意：我可以使用 foreach 循环轻松完成它，但我希望它不使用 foreach 或 for 循环。

我尝试如下使用 linq 的 takeWhile 方法，但它们不起作用。

例子 ：

```
List<int> ListOfindexes ; // this has the list of indexses for which I need the values
List<int> mainList; 
```

尝试过这样的事情。

```
mainList.TakeWhile(value => ListofIndexses.Contains(value));//this is not working. 
```

从 2 天开始，我一直对此感到头疼。帮帮我。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T23:19:49.587

听起来你想要：

```
var results = indexList.Select(index => mainList[index]); 
```

虽然你的问题不是很清楚......

# php - 搜索多个条件mysql

> ID：13664751
> 
> 赞同：0
> 
> 时间：2012-12-01T23:17:38.200
> 
> 标签：php, mysql, search

我收到以下错误请帮助

警告：mysql_num_rows() 期望参数 1 是资源，布尔值在第 16 行的 D:\hosting\10102937\html\search.php 中给出

警告：mysql_num_rows() 期望参数 1 是资源，布尔值在第 23 行的 D:\hosting\10102937\html\search.php 中给出

警告：mysql_num_rows() 期望参数 1 是资源，布尔值在第 25 行的 D:\hosting\10102937\html\search.php 中给出

这是我的 PHP 代码

```
include("connection.php");

$type = $_POST['type'];
$address = $_POST['address'];
$bedrooms = $_POST['bedrooms'];
$min = $_POST['price'];
$max = $_POST['price'];
//$sql ="SELECT * FROM subscribers2 WHERE type  = '%$type%' AND address = '%$address%' AND bedrooms = '%$bedrooms%' AND min as '%$min%' AND max as '%$max%' ";

$rs_result = mysql_query ($sql);
$num_rows = mysql_num_rows($rs_result);
$query = mysql_query("SELECT * FROM subscribers2 WHERE type  = '%$type%' AND address = '%$address%' AND bedrooms = '%$bedrooms%' AND min as '%$price%' AND max as '%$price%' "); 

$rs_result = mysql_query ($sql);
$num_rows = mysql_num_rows($rs_result);
$query = mysql_query("SELECT * FROM subscribers2 WHERE type  LIKE '%$type%' AND address LIKE '%$address%' AND bedrooms LIKE '%$bedrooms%' AND min as '%$price%' AND max as '%$price%' "); 
$number=mysql_num_rows($query); 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T23:29:59.497

`$sql`当您将查询字符串注释掉时，它看起来像您的查询。

但这只是 3 个 mysql 错误中的 1 个。

`mysql_error` [您将使用此处记录](http://php.net/manual/en/function.mysql-error.php)的方法找出错误。

您还应该查看 SQL 注入，您的参数直接通过 POST 传递到数据库级别，这使您的服务器的数据库完全开放。

# c++ - 创建非托管常规 MFC DLL 并从托管 C++ .NET 应用程序调用它时出现问题

> ID：13664753
> 
> 赞同：3
> 
> 时间：2012-12-01T23:18:15.240
> 
> 标签：c++, .net, dll, mfc

我有几个关于 DLL 的问题。我尝试了很多，但我无法获得完整的图片。大多数示例都在 C# 等中。

使用 VS2005 中的向导，我创建了一个非托管 MFC 常规 DLL（由于剩余代码，必须是 MFC）。然后我尝试将它导入到 VS2005 托管的 .NET C++ 应用程序中。请参阅下面的代码。

mfc_main.h：

```
//---------------------------------------------------------
// mfc_main.h : main header file for the mfc_main DLL
//---------------------------------------------------------

#pragma once

#ifndef __AFXWIN_H__
    #error "include 'stdafx.h' before including this file for PCH"
#endif

#include "resource.h"       // main symbols

class __declspec(dllexport) Cmfc_mainApp : public CWinApp
{
public:
    Cmfc_mainApp();

// Overrides
public:
    virtual BOOL InitInstance();

    int SayHello(int j);

    int init;
    DECLARE_MESSAGE_MAP()
}; 
```

mfc_main.cpp：

```
//----------------------------------------------------------------
// mfc_main.cpp : Defines the initialization routines for the DLL.
//----------------------------------------------------------------

#include "stdafx.h"
#include "mfc_main.h"

#ifdef _DEBUG
#define new DEBUG_NEW
#endif

BEGIN_MESSAGE_MAP(Cmfc_mainApp, CWinApp)
END_MESSAGE_MAP()

Cmfc_mainApp::Cmfc_mainApp()
{
}

Cmfc_mainApp theApp;

BOOL Cmfc_mainApp::InitInstance()
{
    CWinApp::InitInstance();

    return TRUE;
}

int Cmfc_mainApp::SayHello(int j)
{
    init = 12;  // Comment this out the application works !!!!

    return j * 6;
}; 
```

在应用中

```
[DllImport("mfc_main.dll",
      EntryPoint    = "?SayHello@Cmfc_mainApp@@QAEHH@Z",
      ExactSpelling = true)]
static int SayHello(int a);

......

private: System::Void button_Click(System::Object^ sender, System::EventArgs^ e) 
     {
         int retval = SayHello(2);
     } 
```

我的问题是：

1 - 为什么在函数 SayHello 中没有 init = 12 并且应用程序崩溃时它可以工作（错误：尝试读取或写入受保护的内存）？

2 - 在这种情况下，尽管我没有调用它，但 InitInstance() 是否已执行（为什么没有 ExitInstance）？

3 - 为什么我在使用 DLLImport 时看到一些给出入口点的示例而有些没有？

4 - 我可以将委托作为参数提供给 MFC C++ DLL 中的函数而不是普通函数指针，以创建回调吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:28:05.053

方法不能被 P/Invoked。如果要从非托管 DLL 中导出一个类以在托管世界中使用，则必须将其展平，例如。

*   创建一个构造函数，如下所示：

    ```
    __declspec(dllexport) void * __stdcall MyClass_Create()
    {
         return new MyClass();
    } 
    ```

*   创建一个析构函数，如下所示：

    ```
    __declspec(dllexport) void * __stdcall MyClass_Destroy(MyClass * instance)
    {
         delete instance;
    } 
    ```

*   展平方法调用。假设您的班级中有以下方法：

    ```
    int MyClass::MyMethod(int i, double j) { ... } 
    ```

    然后您必须创建以下函数：

    ```
    __declspec(dllexport) int __stdcall MyClass_MyMethod(MyClass * instance, int i, double j)
    {
        return instance->MyMethod(i, j);
    } 
    ```

*   在 C# 中准备 P/Invoked 外部方法（你已经知道怎么做，所以我将省略这些）

*   创建类的实例：

    ```
    IntPtr instance = MyClass_Create(); 
    ```

    然后调用它的方法：

    ```
    int i = MyClass_MyMethod(instance, 4, 2.0); 
    ```

    最后，销毁类：

    ```
    MyClass_Destroy(instance); 
    ```

不要忘记添加一些错误检查 - 我省略了它以保持示例清晰。

# java - 使用 Java 进行互联网“实体”验证

> ID：13664754
> 
> 赞同：0
> 
> 时间：2012-12-01T23:18:20.167
> 
> 标签：java

是否有 FOSS 库可以对 Internet 对象执行验证，例如：

*   域名（是否有效？字符集、长度等）
*   电子邮件地址（用户和域组件）
*   互联网端口号？（在 0..2^16-1 等范围内）
*   等等

例子：

```
Domains.isValid(domainName);
IpPorts.isValid(portNumber);
EmailAddresses.isValid(emailAddress);
ImapFolderNames.isValid(imapFolderName);
UnixUsernames.isValid(username); 
```

你明白了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:30:19.683

[Apache Commons 验证器](http://commons.apache.org/validator/)。例如，您可以在那里使用[EmailValidator 类](http://commons.apache.org/validator/api-1.4.0/org/apache/commons/validator/routines/EmailValidator.html)。

# iphone - 根据手势重新排列 UIIviews

> ID：13664757
> 
> 赞同：0
> 
> 时间：2012-12-01T23:18:46.737
> 
> 标签：iphone, objective-c, ios, xcode, uiview

我正在构建一个 iphone 应用程序，该应用程序在一个 UIViewController 内具有 3x3 矩阵中的多个 UIViews（总共 9 个 UIViews）。我试图找到一种方法让用户将一个视图移动到矩阵中的某个位置，然后相应地重新排列其余视图。想想当您将跳板上的应用程序拖到另一个地方时，所有其他图标都会相应地自行排列。

完成这样的事情的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T05:59:24.183

使用[`UIPanGestureRecognizer`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPanGestureRecognizer_Class/Reference/Reference.html), 使用`translationInView`来调整您正在拖动的项目的坐标。有关手势识别器的讨论，请参阅[iOS 事件处理指南](http://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html#//apple_ref/doc/uid/TP40009541-CH6-SW1)。

当您放手时（即手势结束），您可以使用`UIView`类方法`animateWithDuration`动画各种项目移动到它们的最终位置。

因此，在 中`viewDidLoad`，您可能会执行以下操作（假设您在名为 的数组中有九个控件`arrayOfViews`）：

```
for (UIView *subview in self.arrayOfViews)
{
    UIPanGestureRecognizer *gesture = [[UIPanGestureRecognizer alloc] initWithTarget:self  
                                                                              action:@selector(movePiece:)];
    [subview addGestureRecognizer:gesture];
} 
```

然后您的手势识别器处理程序可能如下所示：

```
- (void)movePiece:(UIPanGestureRecognizer *)gesture
{
    static CGPoint originalCenter;

    if (gesture.state == UIGestureRecognizerStateBegan)
    {
        originalCenter = gesture.view.center;
    }
    else if (gesture.state == UIGestureRecognizerStateChanged)
    {
        CGPoint translation = [gesture translationInView:self.view];

        gesture.view.center = CGPointMake(originalCenter.x + translation.x, originalCenter.y + translation.y);
    }
    else if (gesture.state == UIGestureRecognizerStateEnded)
    {
        [UIView animateWithDuration:0.25
                         animations:^{

            // move your views to their final resting places here
        }];
    }
} 
```

这是拖动控件可能看起来的基本结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T04:17:49.713

如果您正在为 iOS 6 进行开发，请务必查看[UICollectionView](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html)类。如果你之前处理过表格视图，学习曲线应该不会太陡峭。您可以免费获得重新排列以及所有动画。

# python - python计算器程序

> ID：13664759
> 
> 赞同：0
> 
> 时间：2012-12-01T23:19:33.847
> 
> 标签：python, python-2.7, calculator, cal

我用函数写了一个简单的计算器程序，我不知道这段代码到底有什么问题，它显示错误。我做了可能的步骤来调试它，但我做不到。

```
#!/usr/bin/python

def add():        
        print "Enter the two numbers to Add"
        A=int(raw_input("Enter A:"))
        B=int(raw_input("ENter B:"))
        c = A + B 

def sub():            
        print "Enter the two numbers to Subtract"
        A=int(raw_input("Enter A:"))
        B=int(raw_input("Enter B:"))
        c = A - B

def Mul():
        print "Enter the two numbers to Multiply"
        A=int(raw_input("Enter A:"))
        B=int(raw_input("Enter B:"))
        c = A * B

def Div():   
        print "Enter the two number to Divide"
        A=float(raw_input("Enter A:"))
        B=float(raw_input("Enter B:"))
        c = A / B

print "1: ADDITION"
print "2: SUBTRACTION"
print "3: MULTIPLICATION"
print "4: DIVITION"
print "0: QUIT"

while true:

    CHOICE = int(raw_input(("ENTER THE CORRESPONDING NUMBER FOR CALCULATION")) 

    if CHOICE == "1": 
        print 'ADDING TWO NUMBERS:'
        add(c):

    elif CHOICE == "2":
        print 'SUBTRACTING TWO NUMBERS:'
        sub(c):

    elif CHOICE == "3":
        print 'MULTIPLYING TWO NUMBERS:'
        Mul(c):

    elif CHOICE == "4":
        print "DIVIDEING TWO NUMBERS"
        Div(c):

    elif CHOICE == "0":
        return 0:

    else
        Print "The value Enter value from 1-4" 
```

错误：

```
 File "cal_fun.py", line 44
    if CHOICE == "1": 
                  ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T23:27:22.773

**我已经尝试涵盖您的代码的所有问题，其中有很多。**

从`syntax`错误开始：

```
# true needed a captial T
while True:   

    # Brackets were mismatched
    CHOICE = int(raw_input("ENTER THE CORRESPONDING NUMBER FOR CALCULATION")) 

    if CHOICE == "1": 
        print 'ADDING TWO NUMBERS:'
        # Calling a function shouldn't have trailing : 
        add(c)

    elif CHOICE == "2":
        print 'SUBTRACTING TWO NUMBERS'
        # Calling a function shouldn't have trailing :
        sub(c)

    elif CHOICE == "3":
        print 'MULTIPLYING TWO NUMBERS'
        # Calling a function shouldn't have trailing :
        Mul(c)

    elif CHOICE == "4":
        print "DIVIDEING TWO NUMBERS"
        # Calling a function shouldn't have trailing :
        Div(c)

    elif CHOICE == "0":
        # can only return from a function use exit here instead
        exit()

    # else needs a trailing :
    else:
        # No capital P for print
        print "The value Enter value from 1-4" 
```

代码现在没有`syntax`错误，但仍然有很多问题。

1.  你传递`c`给你的函数，`c`永远不会初始化，什么是`c`？
2.  您的函数不接受参数`def add():` *（即使传递了神秘的`c`值）*。
3.  您的函数没有`print`或`return`它只是计算的结果。
4.  您将存储`CHOICE`为`int`与字符串进行比较，因此`else`始终执行案例并且无法退出循环*（无限循环）*。

* * *

**固定代码：**

```
#!/usr/bin/python

def add():
        print "Enter the two numbers to Add"
        A=int(raw_input("Enter A: "))
        B=int(raw_input("Enter B: "))
        return A + B 

def sub():
        print "Enter the two numbers to Subtract"
        A=int(raw_input("Enter A: "))
        B=int(raw_input("Enter B: "))
        return A - B

def mul():
        print "Enter the two numbers to Multiply"
        A=int(raw_input("Enter A: "))
        B=int(raw_input("Enter B: "))
    return A * B

def div():
        print "Enter the two number to Divide"
        A=float(raw_input("Enter A: "))
        B=float(raw_input("Enter B: "))
        return A / B

print "1: ADDITION"
print "2: SUBTRACTION"
print "3: MULTIPLICATION"
print "4: DIVITION"
print "0: QUIT"

while True:

    CHOICE = int(raw_input("ENTER THE CORRESPONDING NUMBER FOR CALCULATION ")) 

    if CHOICE == 1: 
        print 'ADDING TWO NUMBERS:'
        print add()

    elif CHOICE == 2:
        print 'SUBTRACTING TWO NUMBERS'
        print sub()

    elif CHOICE == 3:
        print 'MULTIPLYING TWO NUMBERS'
        print mul()

    elif CHOICE == 4:
        print "DIVIDEING TWO NUMBERS"
        print div()

    elif CHOICE == 0:
        exit()
    else:
        print "The value Enter value from 1-4" 
```

* * *

代码现在可以正常工作了。

**输出：**

```
1: ADDITION
2: SUBTRACTION
3: MULTIPLICATION
4: DIVITION
0: QUIT
ENTER THE CORRESPONDING NUMBER FOR CALCULATION 1
ADDING TWO NUMBERS:
Enter the two numbers to Add
Enter A: 2
Enter B: 5
7
ENTER THE CORRESPONDING NUMBER FOR CALCULATION 2
SUBTRACTING TWO NUMBERS
Enter the two numbers to Subtract
Enter A: 2
Enter B: 5
-3
ENTER THE CORRESPONDING NUMBER FOR CALCULATION 3
MULTIPLYING TWO NUMBERS
Enter the two numbers to Multiply
Enter A: 2
Enter B: 5
10
ENTER THE CORRESPONDING NUMBER FOR CALCULATION 4
DIVIDEING TWO NUMBERS
Enter the two number to Divide
Enter A: 2
Enter B: 5
0.4
ENTER THE CORRESPONDING NUMBER FOR CALCULATION 0 
```

功能性但不完美，例如对错误输入没有错误处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T23:22:47.473

您在上一行缺少一个结束括号（神秘语法错误的常见原因），更改：

```
CHOICE = int(raw_input(("ENTER THE CORRESPONDING NUMBER FOR CALCULATION")) 
```

至

```
CHOICE = int(raw_input("ENTER THE CORRESPONDING NUMBER FOR CALCULATION")) 
```

这不是程序中唯一的语法错误——你`:`在不应该的时候结束了很多行，比如：

```
 add(c):
    sub(c):
    Mul(c):
    Div(c): 
```

你也

1.  没有声明（这是必需的`:`）`else`
2.  `Print`应该大写`print`
3.  在任何函数之外都有一个 return 语句

还有一些不是语法错误的错误：

1.  拼写错误`True`为`true`
2.  比较`CHOICE`，一个 int，到一个字符串，如`"1"`or`"2"`
3.  将不存在的变量传递给不`c`带参数的函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T23:28:13.050

您正在将变量传递`c`给您的函数`add()` `sub()`等，但它们被定义为不带参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T23:40:45.553

除了已经提到的语法错误之外，我认为您真正想要的是每个函数将值返回到主程序循环，然后将显示它们：

```
def add():
    A=int(raw_input("Enter A:"))
    B=int(raw_input("ENter B:"))
    return A + B
...

while true:

    CHOICE = int(raw_input(("ENTER THE CORRESPONDING NUMBER FOR CALCULATION")) 

    if CHOICE == "1": 
        print 'ADDING TWO NUMBERS:'
        answer = add()
        print answer
    ... 
```

或者通过在主循环中输入 A 和 B 然后将它们作为参数传递给计算函数来缩短程序：

```
def add():
    return A + B
...

while true:

    CHOICE = int(raw_input(("ENTER THE CORRESPONDING NUMBER FOR CALCULATION")) 
    A=int(raw_input("Enter A:"))
    B=int(raw_input("ENter B:"))
    if CHOICE == "1": 
        print 'ADDING TWO NUMBERS:'
        answer = add(A, B)
        print answer
    ... 
```

# ajax - php可编辑网格 - 不同的组合框单元格

> ID：13664760
> 
> 赞同：0
> 
> 时间：2012-12-01T23:19:46.877
> 
> 标签：ajax, jquery-ui, jquery

我正在使用[php 可编辑网格](http://www.editablegrid.net/)来更新一些数据。作为组合框的单元格是否有可能每行具有不同的值？

谢谢，拉杜

# c++ - 从 .txt 文件读取输入的问题

> ID：13664762
> 
> 赞同：0
> 
> 时间：2012-12-01T23:19:54.950
> 
> 标签：c++, io, fstream

我正在开发一个项目，该项目要求必须从文件中获取输入然后进行处理。我们获得了用于打开文件并检查以确保它已打开的代码框架，但我在打开文件时遇到问题。

**我的代码**

```
int main()

{
    readFile();
}

void readFile()
{
    ifstream fin;
    string fileName;
    int x;

    cout << "Enter the file you wish to read from: ";
    cin >> fileName;

    fin.open(fileName.c_str(), ios::in);

    if(!fin.is_open())
    {
        cerr << "Unable to open file " << fileName << endl;
        exit(10);
    }
} 
```

我的控制台：http: [//i.stack.imgur.com/2derI.jpg](http://i.stack.imgur.com/2derI.jpg)

我们基本上得到了所有这些代码，所以我完全不知道为什么这不起作用。这只是我更大项目的一部分，但在我开始工作之前，我什至无法尝试这部分。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T23:36:47.823

可能您的目录设置不显示文件扩展名。您需要输入`12.txt.txt`而不是`12.txt`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:42:21.473

I believe it may have to do with the file name, I compiled and ran this code fine when choosing a different file, but I made a 12.txt file and it produced the same error. It is some issue with the file name being a number I believe, I would suggest renaming the file, though I don't know what makes this occur

# jquery-mobile - 无法运行 BlackBerry 10 jQuery Mobile 主题厨房水槽

> ID：13664764
> 
> 赞同：0
> 
> 时间：2012-12-01T23:20:29.100
> 
> 标签：jquery-mobile, blackberry-10

我下载了[BlackBerry 10 jQuery Mobile 主题](https://github.com/blackberry/jQueryMobile-BB10-Theme)，并想尝试它在 Dev Alpha 上的工作方式。

我创建了这个 config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<widget xmlns="http://www.w3.org/ns/widgets" 
xmlns:rim="http://www.blackberry.com/ns/widgets" 
version="1.0.0.0" rim:header="JQKS">
<author href="http://www.dandandin.net/"
rim:copyright="Copyright 2012 Dandandin.net">Dandandin.net</author>
<name>JQ Kitchensink</name>
<description>An app to test jquery</description>
<icon src="img/generic_81_81_placeholder.png" />
<content src="index.html"/>

<feature id="blackberry.invoke" version="1.0.0"/>
</widget> 
```

我把它放在 /kitchensink

然后我打包 /kitchensink 并加载到我的 dev alpha 上，但是当我启动它时我得到了这个：

![错误](../Images/fa506f7092990cf143ac4e5c923a2aed.png)

我可以按 OK，但应用程序被冻结。

如果我将它加载到我的本地网络服务器上，并从 dev alpha 浏览它可以工作，有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:35:20.930

为了使其正常工作，您必须更新到最新的 1.0.3.8 SDK。

我有 1.0.2 但它没有用。

# python - 将列表“拆分”为多个数组

> ID：13664768
> 
> 赞同：1
> 
> 时间：2012-12-01T23:20:50.823
> 
> 标签：python, arrays, list

我正在尝试完成一个项目，该项目将显示 .txt 文件中包含的特定列表中的年总销售额。

该列表的格式如下：

```
-lastname, firstname (string)
-45.7 (float)
-456.4 (float)
-345.5 (float)
-lastname2, firstname2 (string)
-3354.7 (float)
-54.6 (float)
-56.2 (float)
-lastname3, firstname3 (string)
-76.6 (float)
-34.2 (float)
-48.2 (float) 
```

等等....实际上，7 个不同的“员工”后跟 12 组“数字”（一年中的月份）....但是这个例子应该足以让我了解我想要做什么。

我需要输出每个“员工”的特定信息 - 员工姓名 - 总和（列表中 12 个数字的总和）

所以我的逻辑是让我得出这个结论，但我不知道从哪里开始：

创建 7 个不同的数组来存储每个“员工”数据。使用这种逻辑，我需要将主列表拆分为独立的数组，以便我可以使用它们。

如何做到这一点？而且，如果我没有预定义的员工人数（但定义的格式 ::“姓名”后跟 12 个月的数字）......我怎样才能做到这一点？

我敢肯定，一旦我知道如何将列表“拆分”为不同的部分——每 13 行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T23:34:38.483

Yes, at every thirteenth line you'd have the information of an employee.

However, instead of using twelve different lists, you can use a dictionary of lists, so that you wouldn't have to worry about the number of employees.

And you can either use a parameter on the number of lines directed to each employee.

You could do the following:

```
infile = open("file.txt", "rt")

employee = dict()
name = infile.readline().strip()
while name:

    employee[name] = list()

    for i in xrange(1, 12):
        val = float(infile.readline().strip())
        employee[name].append(val)

    name = infile.readline().strip() 
```

Some ways to access dictionary entries:

```
for name, months in employee.items():
    print name
    print months

for name in employee.keys():
    print name
    print employee[name]

for months in employee.values():
    print months

for name, months in (employee.keys(), employee.values()):
    print name
    print months 
```

The entire process goes as follows:

```
infile = open("file.txt", "rt")

employee = dict()
name = infile.readline().strip()
while name:

    val = 0.0
    for i in xrange(1, 12):
        val += float(infile.readline().strip())
    employee[name] = val

    print ">>> Employee:", name, " -- salary:", str(employee[name])
    name = infile.readline().strip() 
```

Sorry for being round the bush, somehow (:

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T00:24:00.703

这是选项。不好，但仍然是粗鲁的选择。

```
summed = 0
with open("file.txt", "rt") as f:
    print f.readline() # We print first line (first man) 
    for line in f:
        # then we suppose every line is float.
        try:                             
            # convert to float
            value = float(line.strip())  
            # add to sum
            summed += value              
        # If it does not convert, then it is next person
        except ValueError: 
            # print sum for previous person
            print summed
            # print new name
            print line
            # reset sum
            summed = 0
    # on end of file there is no errors, so we print lst result
    print summed 
```

由于您需要更大的灵活性，因此还有另一种选择：

```
 data = {} # dict: list of all values for person by person name
    with open("file.txt", "rt") as f:
        data_key = f.readline() # We remember first line (first man)
        data[data_key] = [] # empty list of values
        for line in f:
            # then we suppose every line is float.
            try:                             
                # convert to float
                value = float(line.strip())  
                # add to data
                data[data_key].append(value)
            # If it does not convert, then it is next person
            except ValueError: 
                # next person's name
                data_key = line
                # new list
                data[data_key] = [] 
```

* * *

问：假设我想为总销售额超过 7000（12 个月）的员工打印“2% 奖金”

```
for employee, stats in data.iteritems():
    if sum(stats) > 7000:
        print employee + " done 7000 in total sales! need 2% bonus" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T23:29:43.613

我不会创建 7 个不同的数组。我会创建某种数据结构，以一种数据类型保存*一名*员工的所有相关信息（这是 python，但您当然也可以在 python 中创建数据结构）。

然后，当您处理每个员工的数据时，您所要做的就是遍历一组员工数据元素。这样，跟踪数据的索引就容易多了（甚至可能不需要！）。

如果您想以某种方式对数据进行排序，这将特别有用。这样，您只需对一个数组而不是 7 个数组进行排序。

# mysql - 合并查询以返回单个响应

> ID：13664774
> 
> 赞同：1
> 
> 时间：2012-12-01T23:21:36.003
> 
> 标签：mysql, nested, sum

我现在正在写一个复杂的网站，我有点卡住了。我正在编写一个返回项目类别数据的查询。我需要它为每个类别返回一个数组，其中包括类别名称、id 和描述，以及使用该类别的项目数以及该类别下每个项目的值加起来。

换句话说，我想返回：

```
categoryid = 1
name = category name
description = category description
totalavailable = number of items in category
totaldownloads = downloads value from each item in category added together. 
```

到目前为止，这是我的查询（它只返回计数和总和，它们并没有真正起作用）。

```
SELECT
  category, SUM(downloads) as totaldownloads, count(*) as totalavailable
FROM
  downloads
WHERE
   category IN(SELECT categoryid FROM categories) 
```

这是我的架构的图片： ![我的数据库架构](../Images/55a7f82775172a2aa30af8f1ec1296b6.png)

请帮我！我被困住了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T23:39:54.627

你的查询几乎是完美的，你只需要`JOIN`两个表来获取所有值：

```
SELECT
  c.categoryid,
  c.name,
  c.description,
  COUNT(*) AS totalavailable,
  SUM(d.downloads) AS totaldownloads
FROM
  categories c
INNER JOIN
  downloads d
ON
  c.categoryid = d.category
WHERE
  /* whatever */
GROUP BY
  c.categoryid,
  c.name,
  c.description 
```

# html - 拆分颜色超链接

> ID：13664775
> 
> 赞同：1
> 
> 时间：2012-12-01T23:21:52.400
> 
> 标签：html, css

```
<a href='www.stackoverflow.com'>Hello<font color='#c0c0c0'> World</font></a> 
```

“Hello”一词以超链接的颜色显示。“世界”以#c0c0c0 颜色显示。但是“世界”在超链接颜色中带有下划线。用相同的颜色 #c0c0c0 使“世界”一词下划线的最佳方法是什么？并在原始超链接中保留单词“Hello”的下划线颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:43:47.230

尝试将您的最后一句话包装在 a 中`<span>`并为其应用所需的样式 - [**DEMO**](http://jsfiddle.net/AcfcX/14/)

***HTML***

```
<a href='www.stackoverflow.com'>
    Hello <span>World</span>
</a> ​ 
```

***CSS***

```
a span { color: #c0c0c0; text-decoration: underline; } 
```

检查 IE7-9、Chrome 和 FF - 似乎在任何地方都可以使用

# assembly - 在 MASM 中将字符串转换为整数：esi 难度

> ID：13664778
> 
> 赞同：3
> 
> 时间：2012-12-01T23:22:18.907
> 
> 标签：assembly, x86, masm

我用汇编语言 (MASM) 编写了一个程序，让学生练习计算组合。程序随机分配 n 和 r，计算组合，然后提示学生提供答案。**问题已解决 **在大多数情况下，程序运行良好，但我遇到了一些挑战，将学生提供的整数字符串转换为整数，然后可以将其与程序计算的结果进行比较。我以前使用过 esi 没有问题，但是无论出于何种原因，当程序到达要评估 esi 的内容（或字符串的地址）并将其转换为整数的点时，调试器会显示内容esi 不是字符串中的第一个字符。**** 为了清楚起见，我熟悉 ReadInt，但我试图弄清楚如何在不使用 ReadInt 的情况下解析整数。

**更新：** 只要用户输入有效数字，该程序现在运行良好。我已经解决了 esi 没有指向正确位置的问题。我还进行了一些错误检查，以确保输入的值实际上是数字。但是，最初的错误检查意味着在下一次迭代期间输入有效数字时，在输入无效输入之后，程序会不断返回消息“无效输入”。将 tryAgain 标记放在代码的第一行会导致程序继续返回无效输入消息，即使有效输入跟随无效输入也是如此。首先，我尝试将 tryAgain 标记放在其当前位置，但我认为它正在无限循环中运行。其次，如果程序跳转到 invalidInput，我尝试重置变量，但这并没有

编辑：澄清一下，这是针对 x86 处理器的。

这是代码：

```
.data
result  DWORD   ?
temp        BYTE        21 DUP(0)
answer  DWORD   ?

.code
main    PROC 
```

（一些初步程序调用）

```
push OFFSET temp        ;ebp+16
push OFFSET answer      ;ebp+12
push answerSize     ;ebp+8
call    getData 
```

（更多过程调用）

```
exit        ; exit to operating system
main ENDP 
```

**编辑代码：**

```
;*************************************************
; prompts / gets the user’s answer.
; receives: the OFFSET of answer and temp and value of answerSize
; returns: none
; preconditions: none
; registers changed:  eax, ebx, ecx, edx, ebp, esi, esp
;*************************************************
getData PROC
push        ebp
mov     ebp,esp

tryAgain:
mWriteStr   prompt_1
mov     edx, [ebp+16]       ;move OFFSET of temp to receive string of integers
mov     ecx, 12
call        ReadString
cmp     eax, 10
jg      invalidInput

mov     ecx, eax        ;loop for each char in string
mov     esi,[ebp+16]    ;point at char in string

pushad
loopString:             ;loop looks at each char in string
    mov     ebx,[ebp+12]
    mov     eax,[ebx]   ;move address of answer into eax
    mov     ebx,10d     
    mul     ebx         ;multiply answer by 10
    mov     ebx,[ebp+12]    ;move address of answer into ebx
    mov     [ebx],eax       ;add product to answer
    mov     al,[esi]        ;move value of char into al register
    inc     esi         ;point to next char
    sub     al,48d      ;subtract 48 from ASCII value of char to get integer  

    cmp     al,0            ;error checking to ensure values are digits 0-9
    jl      invalidInput
    cmp     al,9
    jg      invalidInput

    mov     ebx,[ebp+12]    ;move address of answer into ebx
    add     [ebx],al        ;add int to value in answer

    loop        loopString  
popad
jmp     moveOn
invalidInput:               ;reset registers and variables to 0
    mov     al,0
    mov     eax,0
    mov     ebx,[ebp+12]
    mov     [ebx],eax
    mov     ebx,[ebp+16]
    mov     [ebx],eax       
    mWriteStr   error
    jmp     tryAgain
moveOn:
    pop     ebp
    ret     12
getData ENDP 
```

只是为了让您了解我的目标，这是我的伪代码：

**伪代码已更新**

1.  从字符串的开头开始

2.  将答案的值乘以 10。

3.  从字符串中拆分每个字符并减去 48d 以获得整数。前任。学生输入 156。49 存储为变量 temp 中的第一个字符。从 49 中减去 48。整数为 1。

4.  将整数添加到答案的值。

5.  Inc esi（向右移动一个字符）。

6.  环形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:30:00.523

> 将字符串中的每个字符拆分并除以 48d。

你想减去，而不是除。

关于`esi`问题，请说明这个函数是如何调用的。可能`[ebp+16]`不是缓冲区的偏移量，或者是缓冲区溢出。您还可以使用调试器在该地址上设置内存写入监视，并查看谁更改了它。

另外，您的`invalidInput`标签不在代码中，但我怀疑`tryAgain`标签在错误的位置。在序幕之后你可能想要它。

顺便说一句，进行这种转换的典型方法是从字符串的开头向前移动，并在每一步中将部分结果乘以 10。这样你就不需要这个`PowerTen`功能了。

**更新**：您正在加载 4 个字节，因此一次从字符串中加载 4 个字符，这就是您看到意外值的原因。而不是`mov eax,[esi]`做`movzx eax, [esi]`或`mov al, [esi]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T01:02:21.283

要从当前字符串索引指针中移动一个字节，`[esi]` 您需要使用以下方法之一：

```
movzx   eax, byte ptr[esi]
; or
mov     al, byte ptr[esi] 
```

`BYTE PTR`告诉 MASM 你想在 esi 的地址上处理一个字节。

我不确定您是否希望这样：

```
tryAgain:
    push    ebp
    mov     ebp, esp
    mWriteStr   prompt_1 
```

因为每次用户输入一个错误的提示，你跳到`tryAgain`，你一直在“设置堆栈”。也许是这样：

```
 push    ebp
    mov     ebp, esp

tryAgain:
    mWriteStr   prompt_1 
```

# c - 从 struct sk_buff 中提取数据

> ID：13664783
> 
> 赞同：1
> 
> 时间：2012-12-01T23:22:51.967
> 
> 标签：c, linux, network-programming, kernel

我正在尝试从 a 中提取数据`struct sk_buff`，但没有收到我期望的输出。有问题的帧是 34 字节；一个 14 字节的以太网报头包裹着一个 8 字节（实验协议）报头：

```
struct monitoring_hdr {
    u8      version;
    u8      type;
    u8      reserved;
    u8      haddr_len;

    u32     clock;
} __packed; 
```

在此标头之后，有两个可变长度的硬件地址（它们的长度由`haddr_len`上面的字段决定）。在此处的示例中，它们都是 6 个字节长。

以下代码正确提取了标头（结构），但没有提取后面的两个 MAC 地址。

**发送方：**

```
 ...
    skb = alloc_skb(mtu, GFP_ATOMIC);
    if (unlikely(!skb))
            return;
    skb_reserve(skb, ll_hlen);
    skb_reset_network_header(skb);
    nwp = (struct monitoring_hdr *)skb_put(skb, hdr_len);
    /* ... Set up fields in struct monitoring_hdr ... */
    memcpy(skb_put(skb, dev->addr_len), src, dev->addr_len);
    memcpy(skb_put(skb, dev->addr_len), dst, dev->addr_len);
    ... 
```

**接收方：**

```
 ...
   skb_reset_network_header(skb);
   nwp = (struct monitoring_hdr *)skb_network_header(skb);

   src = skb_pull(skb, nwp->haddr_len);
   dst = skb_pull(skb, nwp->haddr_len);
   ... 
```

**预期输出：**

我使用 tcpdump 来捕获线路上的相关数据包，并看到了这一点（它实际上被发送者的 NIC 填充到 60 个字节，我已经省略了）：

```
0000 | 00 90 f5 c6 44 5b 00 0e  c6 89 04 2f c0 df 01 03
0010 | 00 06 d0 ba 8c 88 00 0e  c6 89 04 2f 00 90 f5 c6
0020 | 44 5b 
```

前 14 个字节是以太网报头。以下 8 个字节（以 开头`01`和结尾`88`）应该是放入 的字节`struct monitoring_hdr`，它可以正确执行。然后，我期望找到以下 MAC 地址：

```
src = 00 0e c6 89 04 2f
dst = 00 90 f5 c6 44 5b 
```

**实际输出：**

但是，我收到的数据向左移动了两个字节：

```
src = 8c 88 00 0e c6 89
dst = 04 2f 00 90 f5 c6 
```

任何人都可以在上面的代码中看到逻辑缺陷吗？还是有更好的方法来做到这一点？我也尝试`skb_pull`过代替`skb_network_header`接收方，但这导致内核恐慌。

提前感谢您的帮助。

**解决方案**：

指向 中数据的第一个字节的指针没有像它应该`sk_buff`指向的那样被指向。`src`我最终使用了以下内容：

```
 ...
   skb_reset_network_header(skb);
   nwp = (struct monitoring_hdr *)skb_network_header(skb);
   skb_pull(skb, offsetof(struct monitoring_hdr, haddrs_begin));

   src = skb->data;
   dst = skb_pull(skb, nwp->haddr_len);
   ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T20:02:33.543

查看[skbuff.h 标头](http://tomoyo.sourceforge.jp/cgi-bin/lxr/source/include/linux/skbuff.h)，您使用的函数如下所示：

```
static inline void skb_reset_network_header(struct sk_buff *skb)
{
        skb->network_header = skb->data - skb->head;
}

static inline unsigned char *skb_network_header(const struct sk_buff *skb)
{
        return skb->head + skb->network_header;
}

extern unsigned char *skb_pull(struct sk_buff *skb, unsigned int len);
static inline unsigned char *__skb_pull(struct sk_buff *skb, unsigned int len)
{
        skb->len -= len;
        BUG_ON(skb->len < skb->data_len);
        return skb->data += len;
} 
```

因此，首先，我会尝试打印出来`skb->data`并`skb->head`确保它们引用了您期望它们引用的数据包部分。由于您在此处使用自定义协议，因此标头处理代码中可能存在错误，导致`skb->data`设置不正确。

此外，查看`sky_network_header`and的定义`skb_pull`让我觉得您可能错误地使用了它们。第一个 6 字节地址不应该位于指向的返回值的位置`skb_network_header()`吗？看起来该函数将标头块的长度添加到缓冲区的头部，这应该会产生一个指向您的第一个数据值的指针。

同样，它看起来像`skb_pull()`添加了您传入的字段的长度并将指针返回到下一个字节。所以你可能想要更像这样的东西：

```
src = skb_network_header(skb);
dst = skb_pull(skb, nwp->haddr_len); 
```

我希望这会有所帮助。很抱歉，这不是一个确切的答案。

# python - Py2app 密钥标志错误 CFLAGS

> ID：13664784
> 
> 赞同：0
> 
> 时间：2012-12-01T23:22:52.790
> 
> 标签：python, pygame, py2app, setup.py

我正在尝试做的是使用 pygame 将我用 Python 2.7 编写的程序编译成适用于 Mac 计算机的独立应用程序。我在运行 Windows 8 的 PC 上工作，无法访问 Mac，因此调整过程很困难。

当我从命令提示符运行安装文件时，我得到“文本洪水”（类似于 py2exe 在编译 Windows 版本时给我的内容）并且程序似乎可以工作。它创建 build 和 dist 文件夹，但 dist 文件夹没有内容。查看命令提示符输出时，最后两行是 BASE_CFLAGS = cfg['CFLAGS'] Key Error: 'CFLAGS' 这似乎发生在 py2app 尝试创建应用程序包时。

这是我到目前为止得到的 setup.py 文件：

```
 """
Script for building the example.

Usage:
    python setup.py py2app
"""
from setuptools import setup

NAME = 'PetCute Slide Puzzle Test'
VERSION = '0'

plist = dict(
    CFBundleIconFile=NAME,
    CFBundleName=NAME,
    CFBundleShortVersionString=VERSION,
    CFBundleGetInfoString=' '.join([NAME, VERSION]),
    CFBundleExecutable=NAME,
    CFBundleIdentifier='Py2App and PyGam test',
)

setup(
    data_files=['Dog1.jpg', 'Dog2.jpg', 'Dog3.jpg', 'Dog4.jpg', 'Dog5.jp', 'Dog6.jpg', 'Dog7.jpg', 'Dog8.jpg', 'Dog9.jpg', 'Dog10.jpg', 'Dog11.jpg', 'Dog12.jpg', 'Dog13.jpg', 'Dog14.jpg', 'Dog15.jpg', 'Dog16.jpg', 'AYearWithoutRain.ttf'],
    app=[
        dict(script="PetCute_slidepuzzle.py", plist=plist),
    ],
    setup_requires=["py2app"],
) 
```

data_files 列出了需要与代码捆绑的图片和文本文件。我通过改编外星人.py 的例子来做到这一点。如果需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T04:13:54.270

它可能在编译过程中出错。我建议你确保你已经安装了 Numpy，py2app 需要它来编译 Pygame 程序。

# c# - 在 MVC 应用程序上实现 WebSecurity.InitializeDatabaseConnection

> ID：13664785
> 
> 赞同：1
> 
> 时间：2012-12-01T23:22:54.807
> 
> 标签：c#, entity-framework, azure, ef-code-first, azure-web-app-service

我正在使用 WebSecurity.InitializeDatabaseConnection('with parameters...') 然后我还有一个带有一些属性的用户对象。现在，当我在本地计算机上运行程序时，我的用户表似乎与 websecurity 在创建所有成员表时尝试为我自动创建的用户表合并。所以我在那里没有问题，但是当我尝试将我的网站部署到 azure 网站时它不起作用。websecurity 使用 Id、UserName 等创建自己的用户表，它似乎将我的其他用户表重命名为带有“s”的“用户”表。知道为什么会这样吗？只是我还是其他人在使用 azure 时遇到了很多数据库部署问题？它永远不会起作用，非常令人沮丧；工作正常或我的本地机器。

用户对象：

```
[Table("User")]
public class User : IAuditable, IIdentifiable
{
    public User()
    {
        IsActive = true;
        IsDeleted = false;
        Friends = new List<Friends>();
        SharedFeeds = new List<SharedFeed>();
    }

    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }

    public string UserName { get; set; }

    public string Password { get; set; }

    [Required]
    public string FirstName { get; set; }

    [Required]
    public string LastName { get; set; }

    public string State { get; set; }

    public int ZIPCode { get; set; }

    public string UsersTheme { get; set; }

    public Boolean IsActive { get; set; }

    public Boolean IsDeleted { get; set; }

    public virtual List<Friends> Friends { get; set; }

    public virtual List<SharedFeed> SharedFeeds { get; set; }

} 
```

在我的 InitializeSimpleMembershipAttribute.cs 中：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
public sealed class InitializeSimpleMembershipAttribute : ActionFilterAttribute
{
    private static SimpleMembershipInitializer _initializer;
    private static object _initializerLock = new object();
    private static bool _isInitialized;

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        // Ensure ASP.NET Simple Membership is initialized only once per app start
        LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
    }

    private class SimpleMembershipInitializer
    {
        public SimpleMembershipInitializer()
        {
            Database.SetInitializer<DataContext>(null);

            try
            {
                using (var context = new DataContext())
                {
                    if (!context.Database.Exists())
                    {
                        // Create the SimpleMembership database without Entity Framework migration schema
                        ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
                    }
                }

                WebSecurity.InitializeDatabaseConnection("DefaultConnection", "User", "UserId", "UserName", autoCreateTables: true);
            }
            catch (Exception ex)
            {
                throw new InvalidOperationException("The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588", ex);
            }
        }
    } 
```

似乎这给我带来了天蓝色的问题：

```
 WebSecurity.InitializeDatabaseConnection("DefaultConnection", "User", "UserId", "UserName", autoCreateTables: true); 
```

我需要使用网络安全，但也能够向用户添加额外的属性

# javascript - D3: data, enter, append 模式将数据添加到外部块

> ID：13664786
> 
> 赞同：5
> 
> 时间：2012-12-01T23:23:04.117
> 
> 标签：javascript, d3.js, append, enter

我正在使用 D3 javascript 库来呈现一些基本的网络图表。我想将三个`<path>`元素添加到`<svg>`块中，但 D3 将元素添加到块的末尾`<html>`。这是完整的html源代码：

```
<!DOCTYPE html>
<meta charset="utf-8">
<body>
<script src="d3.v2.js"></script>
<script>
var chartData = [ 1, 2, 3 ];
d3.select("html").select("body").append("svg")
  .data(chartData, function(d) { console.log("data d:", d); return d; })
  .enter()
    .append("path")
      .attr("d", function(d) { return d; });
</script>
</body> 
```

Chrome 的开发者控制台显示生成的 html 为：

```
<html><head><meta charset="utf-8">
<style type="text/css"></style></head><body>
<script src="d3.v2.js"></script>
<script>
var chartData = [ 1, 2, 3 ];
d3.select("html").select("body").append("svg")
  .data(chartData, function(d) { console.log("data d:", d); return d; })
  .enter()
    .append("path")
      .attr("d", function(d) { return d; });
</script><svg></svg>
</body><path d="1"></path><path d="2"></path><path d="3"></path></html> 
```

该`<svg>`块已创建，但由于某种原因，这些`<path>`块在它之外。我怎样才能纠正这个错误，并将它们放在`<svg>`它们所属的地方？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T23:47:24.470

首先，您应该有一个仅引用 svg 的高级变量。其次，您应该在创建 SVG 时指定它的高度和宽度。您不需要指定一个 select `html`，所以：

```
var width = 400,
    height = 300;
var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height); 
```

现在您可以使用该`svg`变量来附加路径。建议您将路径组合在一起（因此`"g"`先附加）。而且您还应该`selectAll`为路径做一个，因为您想将要添加的数据绑定到路径元素。所以：

```
svg.append("g").selectAll("path")
    .data(chartData)
  .enter().append("path")
    .attr("d", function(d) { return d; }); 
```

我在这里推荐 D3 教程：http: [//alignedleft.com/tutorials/d3/](http://alignedleft.com/tutorials/d3/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-30T14:05:26.030

对于有类似问题的未来访客：

`select`在这种情况下（和类似的其他情况）之间的行为差​​异似乎`selectAll`取决于`selectAll`创建一个*新组*的事实。

D3 的选择对象是一个具有一些额外特殊属性的数组。每个数组对应一组对象。该组的一个属性是`parentNode`，它是`selectAll`执行初始值的节点。

当最外面的选择是 a`select`时，根隐含地是文档的根节点——在这种情况下，`html`。

由于`selectAll`在每个匹配项（或条目）的选择中创建一个新组，因此每个组都被分配为其派生的节点作为其父节点。使用`select`时，由于没有创建新组，因此`parentNode`保留了每个组的原始组，*即使它不再准确地表示组内节点的父级*。

`parentNode`也似乎（根据经验）是`enter`selections 的`append`节点所附加的节点。

这就是`select`产生观察到的行为并`selectAll`解决问题的原因。

# django - 奇怪的时间戳和 timedelta 格式 - 如何转换它们？

> ID：13664790
> 
> 赞同：0
> 
> 时间：2012-12-01T23:23:33.290
> 
> 标签：django, django-timezone

我正在使用外部 api，它以一种奇怪的格式返回日期（作为字符串）：

```
2012-09-26T15:44:10.376000 #timestamp
0:00:01.714000 #delta (some time duration) 
```

我想将它们转换为这种格式：

```
19 Sep 2012 17:02
0:17:34 
```

有没有简单的方法可以做到这一点？我可以将它们转换为 my`view`或 in`template`

编辑 - - - - - - - - - - - - - - - - - - - - - - - - - ----------

我找到了时间戳的解决方案：

```
date_str = '2012-09-26T15:44:10.376000'
date = datetime.strptime(date_str.split('.')[0],'%Y-%m-%dT%H:%M:%S')
str = date.strftime('%m %b %Y %H:%M') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T05:43:58.317

安装[dateutil](http://pypi.python.org/pypi/python-dateutil/)然后：

```
>>> import dateutil.parser
>>> dt = dateutil.parser.parse('2012-09-26T15:44:10.376000')
>>> dt.strftime('%d %b %Y %H:%M')
'26 Sep 2012 15:44' 
```

对于 django，您可以将`dt`对象传递给您的模板并使用[`date`过滤器](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#date)：

```
{{ dt|date:"d b Y H:M" }} 
```

# javascript - CSS3转换后用JS获取div大小

> ID：13664792
> 
> 赞同：6
> 
> 时间：2012-12-01T23:23:43.727
> 
> 标签：javascript, jquery, html, css

在对其应用一个/几个 CSS3 转换后，我试图在 JavaScript 中获取元素的高度。

```
#transformed{
    transform:scale(.5);
} 
```

不幸的是，JQuery 的 outerHeight 似乎并没有天真地做到这一点。

```
$('#after').outerHeight(); //not affected by the transformation 
```

示例：http: [//jsfiddle.net/mQ2nT/](http://jsfiddle.net/mQ2nT/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T23:50:34.383

您可以使用[getBoundingClientRect](https://developer.mozilla.org/en-US/docs/DOM/element.getBoundingClientRect)来获取转换后的尺寸和位置。

简单地，转换你的元素，并且：

```
$('#after')[0].getBoundingClientRect();
// note the [0], the function is DOM not jQuery's. 
```

最好的是，这也会在您应用的每次转换后返回正确的位置和尺寸。

您可以自由使用CSS 提供的 、 和其他所有`rotate`内容`skew`。`translate`gBCR 将处理它。

# visual-studio-2012 - 在 Visual Studio 2012 中使用 CTRL + 箭头跳过完整符号

> ID：13664793
> 
> 赞同：23
> 
> 时间：2012-12-01T23:23:48.520
> 
> 标签：visual-studio-2012, resharper

在以前的 Visual Studio 版本中，我可以使用`CTRL`+`->`和`CTRL`+`<-`在整个符号之间移动，即在空格之间跳转：

> 当我的光标为`CTRL`：`<-`
> 
> ```
> void int GetMyInteger|(); 
> ```
> 
> 将导致状态：
> 
> ```
> void int |GetMyInteger(); 
> ```

现在，在**Visual Studio 2012**中，行为已修改为如下所示：

> 当我的光标为`CTRL`：`<-`
> 
> ```
> void int GetMyInteger|(); 
> ```
> 
> 将导致状态：
> 
> ```
> void int GetMy|Integer(); 
> ```

我希望恢复旧的行为，因为导航代码更有效。有什么配置可以让我改回来吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-18T16:38:14.820

在我的 Resharper 7 中，可以通过以下方式关闭它。

锐化器/选项

=> 环境/编辑

找到“使用 CamelHumps”复选框。取消选中它

非常烦人的功能默认开启。关闭它真是一种解脱，因为我几乎用键盘完成了所有代码导航。

# vi - 如何在VI中编辑多行

> ID：13664794
> 
> 赞同：0
> 
> 时间：2012-12-01T23:23:55.150
> 
> 标签：vi

我有一个包含 1000 行的文件，我需要将前 500 行替换为任何其他数字 - 例如 0，然后将接下来的 500 行替换为该行中的数字 + 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:36:53.593

在要替换的第一行中，您可以执行以下操作：

```
500dd 
```

接着：

```
500I 
```

在 500 行中输入要放置的文本，然后进入和退出编辑模式。瞧！

如果要增加多行写入的数字，可以使用宏。

尝试：

```
qq<C-A>jq499@q 
```

*   第一个 q 开始录制宏
*   第二个 q 是要存储宏的位置
*   CA 意思是“增加当前行的数字”
*   j - 转到下一行
*   第三个 q - 完成录制宏
*   499 - 重复 499 次
*   @q - 重复存储在 q 中的宏

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T23:35:51.847

您可以通过键入来录制宏`qacc<whatever you want><ESC>jq`，然后通过键入来运行它`500@a`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T23:29:10.573

要选择范围，请使用`begin,end/pattern/s//pattern`/。

例子：

```
1,500s/aaa/bbb/|501,1000s/aaa/ccc/ 
```

将用从直到和从直到`aaa`的行替换（全部在一行中）！！！`bbb``1``500``aaa``ccc``501``1000`

# php - PHP - 从对象获取数组

> ID：13664801
> 
> 赞同：0
> 
> 时间：2012-12-01T23:25:43.493
> 
> 标签：php, odbc

在 PHP 中，我从 MSSQL 数据库得到了这个结果：

```
CI_DB_odbc_result Object ( [num_rows] => 5 [conn_id] => Resource id #34 [result_id] => Resource id #49 [result_array] => Array ( [0] => Array ( [NO1] => 119 [NO2] => 115 [NO3] => 123 [NO4] => 127) 
```

你能告诉我如何访问/提取[result_array] => Array（[0] => Array（[NO1] => 119 [NO2] => 115 [NO3] => 123 [NO4] => 127）变成普通的PHP数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:31:31.927

该数组可以通过对象属性访问。

```
$result = CI_DB_odbc_result->result_array;
print_r($result); 
```

# ruby-on-rails - 没有路线匹配错误。这段代码有什么问题？

> ID：13664803
> 
> 赞同：1
> 
> 时间：2012-12-01T23:26:18.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-routing

我是新手，在尝试在我的控制器上添加新方法时遇到错误:(
我在管理路径下有一个控制器；

```
Admin::MyUsersController < ApplicationController
before_filter :......

def index
  redirect_to :action => :show_my_action
end

def show_my_action
  ...
  ...
end 
```

我的控制器喜欢这样，但不完全是这样。
在我的 routes.rb

```
namespace "admin" do
  resources :my_users do
    get "show_my_action"
  end
end 
```

当我的 routes.rb 是这样时，我得到错误 => 没有路由匹配 {:action=>"show_my_action", :controller=>"admin/my_users"}

```
namespace "admin" do
  resources :my_users do
    get "show_my_action", :on => :collection
  end
end 
```

当我的 routes.rb 像这样然后没有错误：S
为什么我得到这个错误。我可以将第一个声明用于根路径上的其他控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T01:40:18.547

您需要指定操作是针对成员还是集合。如果它在会员上，那么您的 URL 是`admin/my_users/:id/show_my_action`. 如果它在一个集合上，那么它是`admin/my_users/show_my_action`. 在这里阅读：[http ://edgeguides.rubyonrails.org/routing.html](http://edgeguides.rubyonrails.org/routing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T01:48:04.560

您正在向 RESTful 操作添加操作，如果您不指定集合或成员，则路由无法知道您想要什么。如果你这样定义：

```
namespace "admin" do
  resources :my_users do
    get "show_my_action"
  end
end 
```

路线如何知道您想要哪条路线：

```
my_users/show_my_action, or my_users/:id/show_my_action 
```

因此，您需要指定它的成员或集合：

```
namespace "admin" do
  resources :my_users do
    get "show_my_action", :on => :collection
  end
end 
```

将有路线：`my_users/show_my_action`和：

```
namespace "admin" do
  resources :my_users do
    get "show_my_action", :on => :member
  end
en 
```

将有路线：`my_users/:id/show_my_action`

您可以查看[添加更多 RESTful 操作](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)。

# java - 如何在黑莓上制作这样的屏幕

> ID：13664810
> 
> 赞同：3
> 
> 时间：2012-12-01T23:28:01.900
> 
> 标签：java, blackberry

抱歉标题，但我不知道如何总结问题=/

我需要制作这样的屏幕：

![在此处输入图像描述](../Images/6da4ef5660e5f99d87f289372a447886.png)

如您所见，它显示了那些“盒子”，每个盒子里面都有 UI 元素。

每个“盒子”都放置在某种表格的单元格内。

我认为将“框”表示为具有垂直滚动的 TableLayoutManager 内的单个屏幕是个好主意，但我什至不知道这是否可靠。

请有人告诉我如何在黑莓上做类似的事情，因为我不知道从哪里开始。

我正在使用 BlackBerry JRE 4.5.0

提前致谢！

编辑：我编辑这个答案只是为了展示用户 Nate 提供的解决方案有多好：

![在此处输入图像描述](../Images/7eee7b2674dec04817229b0e90f288b8.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T12:49:47.743

这是我的建议。如果您希望将其设为*表格*，并且重复标题/文本/图像/按钮/页脚模式，则应该有一个`Manager`表示*一行*布局的子类。

*正如 Arhimed 所指出的，此解决方案假定行数相对较少（请参阅下面的评论），以表现良好。*

首先，我创建了一个简单的类来保存一行将包含的数据：

```
 /** The data representation of one row in our table */
   private class Data {
      public String title;
      public String footer;
      public String[] text;  // each array element is a line of text
      public Bitmap icon;

      public Data(String title, String footer, String[] text, String iconName) {
         this.title = title;
         this.footer = footer;
         this.text = text;
         this.icon = Bitmap.getBitmapResource(iconName);
      }
   } 
```

然后，这里是`Manager`只布局一行的子类，它是一个`Data`对象的表示：

```
 /** The UI for one row of data */
   private class RowManager extends Manager {

      private LabelField title;
      private LabelField footer;
      private BitmapField iconImage;
      private ButtonField button;
      private TextField text;
      private static final int TITLE_AND_FOOTER_HEIGHT = 32;
      private static final int TEXT_HEIGHT = 80;

      public RowManager(int index, Data content, long style) {
         super(style);

         final Font titleFont = Font.getDefault().derive(Font.PLAIN, 24);
         final Font footerFont = Font.getDefault().derive(Font.PLAIN, 20);
         final Font textFont = Font.getDefault().derive(Font.PLAIN, 16);

         title = new CustomLabelField(content.title, titleFont, 
               Color.BLACK, Field.USE_ALL_WIDTH | DrawStyle.LEFT);
         title.setPadding(6, 0, 0, 10);  // top, right, bottom, left pad
         add(title);

         iconImage = new BitmapField(content.icon);
         add(iconImage);

         button = new ButtonField("Button" + index, ButtonField.CONSUME_CLICK);
         // the cookie helps identify which button this is (which row)
         button.setCookie(new Integer(index));
         button.setFont(textFont);
         add(button);

         text = new TextField(TextField.NON_FOCUSABLE) { 
            public void paint(Graphics g) {
               int c = g.getColor();
               g.setColor(Color.DARKRED);
               super.paint(g);
               g.setColor(c);
            }
         };
         text.setFont(textFont);
         StringBuffer textContent = new StringBuffer();         
         for (int line = 0; line < content.text.length; line++) {
            textContent.append(content.text[line] + "\n\n");   // double line-spacing
         }
         if (content.text.length > 0) {
            text.setText(textContent.toString().substring(0, textContent.toString().length() - 2));  // 2 \n chars
         }
         text.setPadding(10, 10, 10, 10);
         add(text);

         footer = new CustomLabelField(content.footer, footerFont, 
               Color.BLACK, Field.USE_ALL_WIDTH | DrawStyle.RIGHT);
         footer.setPadding(6, 10, 0, 0);  // top, right, bottom, left pad
         add(footer);
      }

      // overridden just to change background color (OS 4.5+!)
      public void paint(Graphics graphics)
      {
         int oldBgColor = graphics.getBackgroundColor();
         graphics.setBackgroundColor(Color.GRAY);
         // make the whole field gray, first, and then fill in the blue
         graphics.clear();

         // paint just the middle section blue
         int oldColor = graphics.getColor();
         graphics.setColor(Color.LIGHTBLUE);         
         graphics.fillRect(0, TITLE_AND_FOOTER_HEIGHT, getWidth(), TEXT_HEIGHT); 

         super.paint(graphics);

         graphics.setColor(oldColor);
         graphics.setBackgroundColor(oldBgColor);
      }

      public void setChangeListener(FieldChangeListener listener) {
         // only the button field supports change listeners
         button.setChangeListener(listener);
      }

      public int getPreferredWidth() {
         return Display.getWidth();
      }

      public int getPreferredHeight() {
         return TITLE_AND_FOOTER_HEIGHT + TEXT_HEIGHT + TITLE_AND_FOOTER_HEIGHT;
      }

      protected void sublayout(int width, int height) {
         int y = 0;

         layoutChild(title, width, TITLE_AND_FOOTER_HEIGHT);
         setPositionChild(title, 0, y);

         layoutChild(iconImage, 
               iconImage.getPreferredWidth(), iconImage.getPreferredHeight());
         setPositionChild(iconImage, 
               width - iconImage.getPreferredWidth() - 10, 5);
         y += TITLE_AND_FOOTER_HEIGHT;

         int buttonWidth = 88;
         layoutChild(text, width - buttonWidth - 20, TEXT_HEIGHT);
         setPositionChild(text, 0, y);

         layoutChild(button, buttonWidth, 40);
         setPositionChild(button, width - buttonWidth - 20, 
               y + (TEXT_HEIGHT - 40) / 2);

         y += TEXT_HEIGHT;

         layoutChild(footer, width, TITLE_AND_FOOTER_HEIGHT);
         setPositionChild(footer, 0, y);

         super.setExtent(width, y + TITLE_AND_FOOTER_HEIGHT);
      }
   } 
```

而且，这是一个`Screen`将创建一些示例`Data`对象的类，并使用`RowManager`：

```
public class StackScreen extends MainScreen implements FieldChangeListener {

   private Vector rowData;

   public StackScreen() {
      super(MainScreen.VERTICAL_SCROLL | MainScreen.VERTICAL_SCROLLBAR);      

      // define the screen title
      Font titleFont = Font.getDefault().derive(Font.PLAIN, 30);
      CustomLabelField title = new CustomLabelField("Screen Title", 
            titleFont, Color.DARKRED, DrawStyle.HCENTER | Field.USE_ALL_WIDTH);        
      title.setPadding(10, 10, 10, 10);
      add(title);

      // populate a dummy set of model data
      rowData = new Vector();      
      Data one = new Data("Title 1", "Some footer info", 
            new String[]{ "First line of text", "Second line of text" }, 
            "image1.png");
      Data two = new Data("Title 2", "Some footer info", 
            new String[]{ "First line of text", "Second line of text" }, 
            "image2.png");
      rowData.addElement(one);
      rowData.addElement(two);

      // create a UI representation of each row's data
      for (int i = 0; i < rowData.size(); i++) {
         RowManager row = new RowManager(i, (Data)rowData.elementAt(i), 0);
         row.setPadding(10, 20, 10, 20);  // top, right, bottom, left pad
         row.setChangeListener(this);
         add(row);
      }
   }

   // invoked when buttons are clicked
   public void fieldChanged(Field field, int context) {
      Object cookie = field.getCookie();
      if (cookie instanceof Integer) {
         Integer rowIndex = (Integer) cookie;
         Dialog.alert("Button " + rowIndex + " clicked!");
      }
   }
} 
```

我使用了最后一个实用程序 UI 类来创建彩色标签：

```
 /** A label field with custom font and color attributes */
   private class CustomLabelField extends LabelField {

      private int fontColor = Color.BLACK;

      public CustomLabelField(String text, Font f, int color, long style) {
         super(text, style);
         setFont(f);
         fontColor = color;
      }      

      public void paint(Graphics g) {
         int oldColor = g.getColor();

         g.setColor(fontColor);
         super.paint(g);

         // reset graphics context
         g.setColor(oldColor);
      }
   } 
```

这就是它在 OS 5.0 9550 上的样子。我相信我远离任何在 OS 4.5 上不可用的 API（`setPadding()`未*记录*，但可用）。显然，布局是高度硬编码的。您需要针对其他设备进行调整，但我必须给您留一些工作 :)

![在此处输入图像描述](../Images/df2d668c30cc41ec443af37af82e31a7.png)

# vb.net - 是否可以在 VB 中为程序创建自定义文件类型

> ID：13664813
> 
> 赞同：1
> 
> 时间：2012-12-01T23:28:20.307
> 
> 标签：vb.net, winforms, file

是否可以在 VB 程序中打开自定义文件类型。

例如：有一个带有一些文本的文本框和一个已选中的复选框...您将保存为自定义文件类型，当您再次打开文件时，将选中该复选框并且文本框将具有文本。它基本上会将程序的状态保存为自定义文件类型。

例如 -> .pro、.lll、.hgy、.xyz、.abc

我只是好奇...这可能吗？如果可以，我将如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T00:42:23.593

You can do what Ichiru states with a [BinaryWriter](http://msdn.microsoft.com/en-us/library/ft83zssf%28v=vs.100%29.aspx) and [BinaryReader](http://msdn.microsoft.com/en-us/library/system.io.binaryreader%28v=vs.100%29.aspx) which I have done with some of my projects before using an in Memory datatable and serializing it.

```
Imports System.IO

Public Class Form1

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click

        Using bs As New BinaryWriter(File.Open("Mydata.xyz", FileMode.Create))
            bs.Write(TextBox1.Text)
            bs.Write(CheckBox1.Checked)
            bs.Close()
        End Using
    End Sub

    Public Sub New()

        ' This call is required by the designer.
        InitializeComponent()
        ' Add any initialization after the InitializeComponent() call.
        If File.Exists("Mydata.xyz") Then
            Using br As New BinaryReader(File.Open("Mydata.xyz", FileMode.Open))
                Try
                    TextBox1.Text = br.ReadString
                    CheckBox1.Checked = br.ReadBoolean
                Catch ex As EndOfStreamException
                    'Catch any errors because file is incomplete
                End Try
            End Using
        End If
    End Sub
End Class 
```

But .Net has a built in [Settings Class](http://msdn.microsoft.com/en-us/library/aa730869%28VS.80%29.aspx) that you can use to persist your Data. It would be used like this

```
Public Class Form1

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        My.MySettings.Default.checkbox1 = CheckBox1.Checked
        My.MySettings.Default.textbox1 = TextBox1.Text
        My.MySettings.Default.Save()
    End Sub

    Public Sub New()

        ' This call is required by the designer.
        InitializeComponent()
        ' Add any initialization after the InitializeComponent() call.

        CheckBox1.Checked = My.MySettings.Default.checkbox1
        TextBox1.Text = My.MySettings.Default.textbox1

    End Sub
End Class 
```

![enter image description here](../Images/7069415b6513c9e78438bb9ce5d95526.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T23:32:59.223

This is not possible unless you have your system's default application setup to open with your executable that will read this custom-extension data file.

Custom extensions can't be executed like a .exe would be, but they can be read by a .exe and used to configure settings for that particular .exe

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T23:30:45.587

是的，可以创建自己的自定义文件类型。解决此类问题的最佳方法是创建**二进制写入**器 在二进制写入器中，您将写入文本框的内容和复选框的状态。

写作：

```
BinaryWriter.Write("string")
BinaryWriter.Write(false) 
```

阅读：

```
String str
Boolean bool
str = BinaryReader.ReadString()
bool = BinaryReader.ReadBoolean() 
```

# java - 一旦触发，AlarmManager 就会不断重复

> ID：13664828
> 
> 赞同：2
> 
> 时间：2012-12-01T23:30:05.103
> 
> 标签：java, android, alarmmanager

我需要我的服务在每晚 02:00 执行任务，如果任务失败，则安排自己在 30 分钟后重新开始，但如果成功，则停止自己并在另一晚的 02:00 重新开始。我设法让它在 02:00 开始，但在它被触发后它只是不断地触发它自己。

我的代码在`Service`，这里是代码本身：

```
@Override
    public void onStart(Intent intent, int startId) {
        super.onStart(intent, startId);

        //doTasks();

        MediaPlayer player = MediaPlayer.create(this,
                Settings.System.DEFAULT_NOTIFICATION_URI);
        player.start();

        AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
        alarmManager.cancel(pendingIntent);
        Calendar calendar = Calendar.getInstance();
        calendar.set(Calendar.HOUR_OF_DAY, 2);
        calendar.set(Calendar.MINUTE, 0);
        calendar.set(Calendar.SECOND, 0);
        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),AlarmManager.INTERVAL_DAY, pendingIntent);
    } 
```

`doTasks()`是我需要运行的任务，但因为它们很慢，我使用通知声音进行测试。而pendingIntent`Service`本身就是这个。

任何想法是什么让我`AlarmManager`不断地触发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T00:14:59.470

如果您`pendingIntent`设置为开始，`Service`那么基本上您每次在该`onStart(...)`方法中都重复创建一个新警报。

`AlarmManager`有一种机制，如果设备在应该触发时处于睡眠状态，它将触发“迟到”的警报。在您的情况下，因为您不断地重新创建警报，`AlarmManager`所以即使时间已经过了 02:00:00，也经常认为应该立即触发它。

在其他地方创建警报，以防止每次`Service`启动时不断重新创建警报。

# arrays - TCL：如何返回一个数组？

> ID：13664833
> 
> 赞同：3
> 
> 时间：2012-12-01T23:30:39.113
> 
> 标签：arrays, return, tcl

请在下面找到传递数组、操作数组的代码片段，但我无法返回新版本的数组。

这是片段：

```
 proc    get_mroute_active { &multicast }   {
        upvar   ${&multicast} MULTICAST ;

                set group   -1 ;
                set src -1 ;
                                set     mcast_group_source_id   -1 ;
                                set     MULTICAST($mcast_group_source_id,id) $mcast_group_source_id ;
                                set     MULTICAST($mcast_group_source_id,mcast_group) $group ;
                                set     MULTICAST($mcast_group_source_id,mcast_source) $src ;

        puts    [array size MULTICAST] ;
    parray  MULTICAST ;
}

array set     multicast { } ;

get_mroute_active [array get multicast] ;
puts    [array size multicast] ;
parray multicast ; 
```

代码的输出是：

```
3
MULTICAST(-1,id)           = -1
MULTICAST(-1,mcast_group)  = -1
MULTICAST(-1,mcast_source) = -1
0 
```

您能帮我看看如何将“MULTICAST”变量分配给“multicast”吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T00:36:26.150

简短的回答是：你不能从一个过程中返回一个数组，因为*数组不是值*——它们是命名值的特殊命名集合。

有几种方法可以解决这个问题：

通常的方法是通过名称传递数组，并使被调用的过程就地修改数组。例如，代码

```
proc foo {arrayName} {
    upvar 1 $arrayName ary
    incr ary(one)
}
set x(one) 1
foo x
puts $x(one) 
```

`foo`当过程修改调用者范围内指定数组中的特定值时，将打印“2” 。

注意调用者如何传递一个数组的名称，“x”，而不是“它的值”（因为你不能从一个数组中提取一个值；但见下文），然后被调用的过程通过它的使用[`upvar`](http://www.tcl.tk/man/tcl8.5/TclCmd/upvar.htm)命令命名。

另一种方法是使用[`array get`和`array set`](http://www.tcl.tk/man/tcl8.5/TclCmd/array.htm)命令从数组中提取键和值，并分别用键和值填充数组。例如：

```
set x(one) 1
set x(two) 2
array set another [array get x]
parray another 
```

会打印

```
another(one) = 1
another(two) = 2 
```

`array get`给定一个数组，该命令返回一个平面列表，其中的键和它们各自的值交错。通过这种方式，您可以从过程返回数组*的内容*`array set`，然后让调用者对这些内容执行任何操作，例如，使用命令在其范围内填充另一个数组（可能与传递给该过程的数组相同）首先）。

请注意，它`array set`具有*合并语义：*在使用源列表插入/替换其值之前，它不会清空目标数组。

第三种（可能是最好的）方法是使用[字典](http://www.tcl.tk/man/tcl8.5/TclCmd/dict.htm)，字典是键/值映射，就像数组一样，但它们本身就是值，因此它们可以作为其他值自由传递。这需要 Tcl 8.5 或更高版本（在 Tcl 8.4 中，您可以以包的形式使用[此代码的反向移植](http://www.flightlab.com/~joe/gutter/packages/dict.html)`dict`。使用s 可以得到它：

```
proc foo d {
    dict set d one 2
    return $d
}
set x [dict create]
dict set x one 1
set y [foo $x]
puts $y 
```

当过程修改原始字典然后返回它然后调用者将它分配给另一个变量时，它将打印“one 2”。

# c++ - 二维静态和动态数组传递

> ID：13664835
> 
> 赞同：3
> 
> 时间：2012-12-01T23:30:43.897
> 
> 标签：c++

假设我们有这些声明：

```
int** a;
int b[x][y]; 
```

我可以实现一个功能

```
foo f(bar c) {} 
```

这让我

```
f(a);
f(b); 
```

不需要超载吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:05:28.157

当然，只需使用`void*`:)

回答你的问题，不。多维数组与指向指针的指针不同。原因是索引方案。`int b [2][2]`是 4 个整数的连续内存块。对其进行索引等效于以下内容：

```
b[i][j] == *(b + 2*i + j) 
```

第二维是类型定义的一部分！由于数组的内存布局，编译器知道它只需要一次取消引用。

同时，`int** a`索引是这样完成的：

```
a[i][j] == *(*(a+i)+j) 
```

# c++ - 如何在 C++ 中编译我的项目，以便它会在我的硬盘上创建我的项目的 .dll 文件，以便以后在另一个程序中使用它？

> ID：13664843
> 
> 赞同：0
> 
> 时间：2012-12-01T23:32:05.133
> 
> 标签：c++, windows, visual-studio, visual-c++

这是主要代码：

```
// DSPlayer.cpp : Defines the entry point for the application.
//

#include "stdafx.h"
#include "DSPlayer.h"
#include "resource.h"
#include "PlayerClass.h"

/********* GLOBAL VARIABLES **********/
HINSTANCE g_hInst;
HWND g_hDialogWindow;

// pointer to my PlayerClass obejct
PlayerClass *g_PlayerObject = NULL;

/******** FUNCTION DECLARATIONS ******/
BOOL CALLBACK DlgDSPlayerProc(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam);

int APIENTRY WinMain(HINSTANCE hInstance,
                     HINSTANCE hPrevInstance,
                     LPSTR     lpCmdLine,
                     int       nCmdShow)
{
    MSG msg;

    HICON iconLarge = NULL;

    InitCommonControls();

    g_hInst = hInstance;

    g_hDialogWindow = CreateDialog(hInstance, MAKEINTRESOURCE(IDD_DLGDSPLAYER), NULL, (DLGPROC)DlgDSPlayerProc);

    // this will set the icon for my player
    iconLarge = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_ICONLARGE));

    if (iconLarge)
    {
        SendMessage(g_hDialogWindow, WM_SETICON, ICON_BIG, (LPARAM)iconLarge);
    }

    // Initialize the COM library
    CoInitialize(NULL);

    if (!g_hDialogWindow)
    {
        MessageBox(NULL, "Dialog creation failed! Aborting..", "Error", MB_OK);
        return -1;
    }

    ShowWindow(g_hDialogWindow, nCmdShow);
    UpdateWindow(g_hDialogWindow);

    if (g_PlayerObject == NULL)
    {
        // create the player object
        g_PlayerObject = new PlayerClass();

        if (g_PlayerObject)
        {
            g_PlayerObject->Initialise(g_hDialogWindow);
        }
        else
        {
            MessageBox(NULL, "Error creating player object", "Error", MB_OK);
            return -1;
        }
    }

    // standard message loop
    while (GetMessage(&msg, NULL, 0, 0))
    {
        if (!IsDialogMessage(g_hDialogWindow, &msg))
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
    }

    return msg.wParam;
}

BOOL CALLBACK DlgDSPlayerProc(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)
{
    bool handled = false;

    switch (message)
    {
        case WM_INITDIALOG:
                return TRUE;

        case WM_COMMAND:
            switch ( LOWORD(wParam))
            {
                case IDC_OPENFILE:
                    handled = true;
                    ///SetWindowText(GetDlgItem(hDlg, IDC_NOWPLAYING), "You selected Play File..");
                    g_PlayerObject->OpenFileDialog();
                    break;

                case IDC_PLAYPAUSE:
                    handled = true;
                    //SetWindowText(GetDlgItem(hDlg, IDC_NOWPLAYING), "You selected Pause");
                    g_PlayerObject->DoPlayPause();
                    break;

                case IDC_STOP:
                    handled = true;
                    //SetWindowText(GetDlgItem(hDlg, IDC_NOWPLAYING), "You selected Stop");
                    g_PlayerObject->DoStop();
                    break;

                case IDC_EXIT:
                    handled = true;
                    free(g_PlayerObject);
                    EndDialog(hDlg, LOWORD(wParam));
                    PostQuitMessage(0);
                    break;
                    //handled = true;
            }

        case WM_TIMER:
            g_PlayerObject->DoTimerStuff();
            break;

        case WM_CLOSE:
            //MessageBox(NULL, "got close", "info", MB_OK);
            PostQuitMessage(0);
            break;

        case WM_GRAPHNOTIFY:
            handled = true;
            g_PlayerObject->EventReceiver();
            break;

/*      case WM_CLOSE:
            CleanUp(hDlg);
            handled = true;
            EndDialog(hDlg, LOWORD(wParam));
            break;
*/
    }

    return handled;

} 
```

这不是我的项目。

现在我转到项目属性，在 General>Target Extension 下它的：.dll 在 General>Configuration Type> 它的：Dynamic Library (.dll)

但是，当我对我的项目 Build>Build Solution 进行操作时，我在 Debug 目录中找不到任何 .dll 文件。

我正在使用 Visual Studio `C++`Express 2010。

我在这里想念什么？

输出结果：

```
>------ Build started: Project: DSPlayer, Configuration: Debug Win32 ------
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppBuild.targets(298,5): warning MSB8004: Intermediate Directory does not end with a trailing slash.  This build instance will add the slash as it is required to allow proper evaluation of the Intermediate Directory.
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppBuild.targets(299,5): warning MSB8004: Output Directory does not end with a trailing slash.  This build instance will add the slash as it is required to allow proper evaluation of the Output Directory.
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppBuild.targets(990,5): warning MSB8012: TargetPath(D:\DSPlayer\DSPlayer\.\Debug\DSPlayer.dll) does not match the Linker's OutputFile property value (D:\DSPlayer\DSPlayer\Debug\DSPlayer.exe). This may cause your project to build incorrectly. To correct this, please make sure that $(OutDir), $(TargetName) and $(TargetExt) property values match the value specified in %(Link.OutputFile).
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppBuild.targets(991,5): warning MSB8012: TargetExt(.dll) does not match the Linker's OutputFile property value (.exe). This may cause your project to build incorrectly. To correct this, please make sure that $(OutDir), $(TargetName) and $(TargetExt) property values match the value specified in %(Link.OutputFile).
1>  DSPlayer.vcxproj -> D:\DSPlayer\DSPlayer\.\Debug\DSPlayer.dll
========== Build: 1 succeeded, 0 failed, 0 up-to-date, 0 skipped ========== 
```

![在此处输入图像描述](../Images/5d3e0b2fca085115ad8b2b235035182f.png)

这是两个警告：

```
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppBuild.targets(990,5): warning MSB8012: TargetPath(D:\DSPlayer\DSPlayer\.\Debug\DSPlayer.dll) does not match the Linker's OutputFile property value (D:\DSPlayer\DSPlayer\Debug\DSPlayer.exe). This may cause your project to build incorrectly. To correct this, please make sure that $(OutDir), $(TargetName) and $(TargetExt) property values match the value specified in %(Link.OutputFile).
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppBuild.targets(991,5): warning MSB8012: TargetExt(.dll) does not match the Linker's OutputFile property value (.exe). This may cause your project to build incorrectly. To correct this, please make sure that $(OutDir), $(TargetName) and $(TargetExt) property values match the value specified in %(Link.OutputFile). 
```

我必须如何以及在哪里解决此警告？有人可以在这里上传一个截图来告诉我如何以及在哪里做吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-05-05T10:53:51.293

在输出目录和中间目录中写入 .\Debug 然后单击 clean and build 然后即使出现此警告也会生成 .exe 文件

# c++ - C ++ AMP迭代具有不同维度的array_views

> ID：13664844
> 
> 赞同：4
> 
> 时间：2012-12-01T23:32:05.517
> 
> 标签：c++, visual-c++, visual-studio-2012, gpgpu, c++-amp

我在 Windows 8 上使用 C++ AMP 和 Visual Studio 2012。我有一个案例，我有 2D array_view`experimentData`和 1D array_view `experimentFactors`，. 我想遍历 2D array_view 的第一个维度和 1D array_view 的第一个维度。这就是我所拥有的，但我经常收到错误消息，说这个没有重载。我想迭代`numberOfTests`第一个维度。我想要这条线：

```
auto test = experimentData[idx]; 
```

返回整行数据。我认为上面的`section`方法`array_view`是做到这一点的方法，但我不知道怎么做。

```
array_view<int_2, 2> experimentData(numberOfTests, numberOfSolutions, initialConditionSet);
array_view<float_2, 1> experimentFactors(numberOfTests, factorData);
extent<1> e_size(numberOfTests);

parallel_for_each(e_size, [=] (index<1> idx) restrict(amp) {
    auto test = experimentData.section(idx);
    auto factors = experimentFactors[idx];

    analysisAlgorithm(test, factors);
}); 
```

该`test`对象应该是`experimentData` `array_view`. 该`factors`对象应该是`experimentFactors` `array_view`.

**澄清**

`experimentData`array_view 有 M 行和 N列

`experimentFactors`array_view 有 M行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T05:55:04.467

如果您是从事 C++ 工作的人，并且您有类似这样的问题或处理将数据投影到不同维度的问题，请停下来阅读这篇文章：

[http://blogs.msdn.com/b/nativeconcurrency/archive/2012/02/17/projections-in-c-amp.aspx](http://blogs.msdn.com/b/nativeconcurrency/archive/2012/02/17/projections-in-c-amp.aspx)

它以一种优美的方式处理了这个确切的问题。这是我的 parallel_for 循环现在的样子：

```
parallel_for_each(e_size, [=] (index<1> idx) restrict(amp) {
    array_view<int_2, 1> test = experimentData[idx[0]];
    auto factors = experimentFactors[idx];

    analysisAlgorithm(test, factors);
}); 
```

注意`test`数组的创建是如何改变的。我声明它将是一个 1D 类型的数组`int_2`。然后我使用文章中讨论的投影技术来选择整行数据`= experimentData[idx[0]];`。当您只为多维数组提供一个索引时，它会选择该维度中保存的所有数据。这篇文章更清楚地说明了这一点。

# javascript - SQLite mass insert using Javascript

> ID：13664853
> 
> 赞同：1
> 
> 时间：2012-12-01T23:33:17.523
> 
> 标签：javascript, sqlite

I'm working on a project that pulls 100,000+ records from a CSV into a SQLite database. I only get ~55 records a second on the device its intended for. It seems using Transactions may speed up this process but my implementations haven't been successful and I haven't found a useful example. Does anyone have a suggestion or a Transaction example that speeds up the following code block?

Thank you.

```
 while (currPos < vFileObj.Pos) {
        currPos = vFileObj.Pos;
        if (readLine.length > 1) {
            readSplit = readLine.split('\",\"');
            readSplit[0] = readSplit[0].replace(/[^a-zA-Z0-9]/g,'');
            readSplit[1] = readSplit[1].replace(/[\[\]|#,+()$~%'":*?<>{}]/g,' ');
            readSplit[2] = readSplit[2].replace(/[\[\]|#,+()$~%'":*?<>{}]/g,' ');
            readSplit[3] = readSplit[3].replace(/[\[\]|#,+()$~%'":*?<>{}]/g,' ');
            readSplit[4] = readSplit[4].replace(/[\[\]|#,+()$~%'":*?<>{}]/g,' ');
            dbOps.Insert('INSERT INTO valid ("col0", "col1", "col2", "col3", "col4") VALUES("' + readSplit[0] + '","' + readSplit[1] + '","' + readSplit[2] + '","' + readSplit[3] + '","' + readSplit[4] + '")');
            readLine = fileOps.Read(vFileObj);
        }
    } 
```

# android - HTML5 固定大小页面

> ID：13664854
> 
> 赞同：0
> 
> 时间：2012-12-01T23:33:27.600
> 
> 标签：android, ios, html

我想制作一个适合任何便携式设备并填充屏幕并动态调整其内容大小的 HTML 页面。它也应该适用于 iPhone 和 Android。并且用户不应该能够调整页面大小。

我试过这些想法：

*   使布局宽度为 100%，但用户仍然可以放大/缩小
*   我使用了 DIV 标签，但它没有填满 iPad 上的屏幕，但在 iPhone 上运行良好。

我希望你有一个好主意来帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:34:57.707

如果您已经尝试过使用百分比并且对结果不满意，我建议您考虑使用[CSS 媒体查询。](http://www.w3.org/TR/css3-mediaqueries/)通过确定正在查看您的网站的分辨率，您可以针对每台设备专门对其进行优化。

如果您想在移动设备中禁用网站缩放，请确保添加以下内容：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

# java - Android License Test Response - Never works

> ID：13664857
> 
> 赞同：8
> 
> 时间：2012-12-01T23:33:51.870
> 
> 标签：java, android, android-lvl

I've been working on an Android App that has already been published to Google Play. For the next update (versionCode = 3) my client wants to include the LVL licensing scheme.

The first thing I did was set up a static test response from the licensing server. I set the test response to **LICENSED**. After reading this in the documentation:

> This License Test Response will be sent to devices using [my email address] or the Test Accounts listed above for applications you have uploaded to Google Play. >Additionally, this account (but not the Test Accounts) will receive this response for >applications that have not yet been uploaded to Google Play.

I thought, not a problem, since my developer account email is the same as my Google Play account email on my testing devices. So I should receive the test response when debugging the App.

After that, I read through all the other licensing documentation and sample code and integrated it into the App. I used a **ServerManagedPolicy** with the correct base64 public key and 20 random generated bytes as the salt.

Once everything looked good I uploaded it to the device to test it, but instead of receiving the **LICENSED** response that I expected, I am *always* receiving a **NOT_LICENSED** response. I went back and made sure that:

1.  I was connected to the internet.
2.  I was signed in to my developer account on Google Play.
3.  The LicenseChecker was using the correct public key.
4.  Clearing my Google Play cache.

At first, I thought maybe it had something to do with the caching, so I tried using a **StrictPolicy** instead. Same response. Since I haven't purchased the App from the store, I'm under the impression that the licensing server is *responding normally instead of sending the static test response*. Here are some other things I have tried:

1.  Waiting 24 hours and trying again.
2.  Tried building the App with the android debug key, as well as the current distribution key.
3.  Setting up and using a different test user account on Google Play. I made sure to add this email account to the 'Test accounts' section in the developer console.
4.  Uploading the APK to Google Play, but not publishing it.
5.  Incrementing the versionCode from 2 to 3\. *This is interesting, because instead of responding **NOT_LICENSED** it returns the 'application error code' **ERROR_NOT_MARKET_MANAGED***.

This leads me to believe that the license server is always responding normally, instead of sending the static test response I set up to my developer account. I have a feeling it may be because the App is already published, but I cannot risk publishing a debug build just to test wether or not it is working.

Has anyone been in this situation before? Any help is greatly appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-11T22:30:06.367

我有同样的问题，但能够解决它。以下是我修复的问题： 1) 在我的设备上，我删除了所有谷歌账户，除了我配置的测试账户。显然，Play商店仍在尝试使用非测试帐户。

2) 即使我是主要开发人员和唯一的测试人员，我也必须为我的开发人员帐户激活测试状态。

版本增量的事情没有帮助，老实说是一种分心.....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T05:21:27.640

我已经花了几个小时甚至几天的时间来解决同样的问题，这里和其他地方都有记录，预发布的许可证测试是命中注定的，而且我发现的命中率比命中率高。

我发现让它工作“更可靠”（但仍然不完全可靠）的唯一方法是拥有一个重置为出厂默认设置的硬件设备，然后将其设置为与您的开发帐户相同的主要谷歌用户已上传应用程序以进行测试。

特殊的 AVD 也不是很可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T23:59:09.347

使用 LVL 库进行测试时，我遇到了同样的问题。无论我在设置页面中将许可证测试响应设置为什么，我总是得到 561 (0x231 NOT_LICENSED) 响应。

我的付费应用用户似乎没有抱怨，所以我假设 LVL 正在为他们工作。

起初我的一个应用程序有这个问题，它在 1 天后消失（2012 年 12 月 30 日发布），现在我在那个应用程序中得到了有效的测试响应。

但是，对于较新的应用程序，我仍然收到 561 (0x231 NOT_LICENSED) 响应（2013 年 1 月 31 日发布）

所以现在我只是在发布 APK 后注释掉（禁用弹出 561 的警报对话框代码）并继续我的下一个版本的开发。

在再次发布之前，我取消注释（启用警报对话框代码）！

我联系了 Google Play，他们将我推荐给他们的开发者论坛。我在那里发布了同样的问题，但后来我找不到我的帖子。

很高兴知道我不是唯一面临这个问题的人。

# python - How can I test if my Tic Tac Toe A.I. is perfect?

> ID：13664861
> 
> 赞同：2
> 
> 时间：2012-12-01T23:34:07.400
> 
> 标签：python, recursion, artificial-intelligence, greedy

I made a tic tac toe A.I. Given each board state, my A.I. will return 1 exact place to move. (Even if moves are equally correct, it chooses same one every time, it does not pick a random one)

I also made a function that loops though all possible plays made with the A.I.

So it's a recursive function that lets the A.I. make a move for a given board, then lets the other play make all possible moves and calls the recursive function in it self with a new board for each possible move.

I do this for when the A.I goes first, and when the other one goes first... and add these together. I end up with 418 possible wins and 115 possible ties, and 0 possible loses.

But now my problem is, how do I maximize the amount of wins? I need to compare this statistic to something, but I can't figure out what to compare it to.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T23:40:55.757

你读过维基百科上的文章吗？[关联](http://en.wikipedia.org/wiki/Tic-tac-toe)

端子位置数

仅考虑板的状态，并考虑板的对称性（即旋转和反射）后，端子板位置只有 138 个。假设 X 每次都先走一步：

*   (X) 赢得了 91 个独特的位置
*   (O) 赢得了 44 个独特的位置
*   绘制了 3 个独特的位置

可能的游戏数量

在不考虑对称性的情况下，可以使用导致 255,168 种可能游戏的精确公式手动确定可能游戏的数量。假设 X 每次都先走一步：

*   (X) 赢得了 131,184 场已完成的比赛
*   (O) 赢得了 77,904 场已完成的比赛
*   抽出 46,080 场完赛

您可以从第一段生成 138 个端子板位置

或者

你可能会在随机字段上运行足够的测试，并将您的结果与此处[链接的统计数据进行比较](http://www.se16.info/hgb/tictactoe.htm)

```
Win in 5 moves    1440     0.6%
Win in 6 moves    5328     2.1%
Win in 7 moves    47952   18.8%
Win in 8 moves    72576   28.4%
Win in 9 moves    81792   32.1%
Draw              46080   18.1%    
Total             255168 100.0% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T23:58:21.390

你实际上可以暴力破解游戏，并证明每次有获胜策略时，你的 AI 都会选择正确的动作。然后，您可以证明，对于每个位置，您的 AI 都会选择能够最大限度地提高获胜策略机会的走法，假设其他玩家随机下棋。没有那么多可能性，所以你应该能够消除所有这些。

您还可以通过假设其他玩家实际上稍微聪明，例如总是试图阻止导致立即获胜的移动来显着减少可能性空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-26T02:29:43.610

akaRem 回答的一个问题是，最佳玩家不应该看起来像整体分布。例如，我刚写的一个玩家在大约 90% 的时间里赢了一个随机玩的玩家，并且有 10% 的时间打成平手。如果您有两名玩家随机比赛，您应该只期望 akaRem 的统计数据匹配。两个最佳玩家总是会打成平手。

# vim - Understanding sil exe in vimscript

> ID：13664862
> 
> 赞同：-1
> 
> 时间：2012-12-01T23:34:10.440
> 
> 标签：vim

Can someone explain to me what `sil exe ":sb " . current_buffer` does in a vimscript. I'm trying to learn how to use it, but finding documentation on vimscript seems nearly impossible.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T23:55:26.700

那是几个命令的组合，所有命令都是缩写的。

那里使用的命令是`:silent`、`:execute`和`:sbuffer`。您可以在 vim 中使用 from 获取有关这些命令的信息，`:help :silent`其他命令也是如此。

该`.`运算符还用于进行字符串连接。

首先，`.`运算符用于连接变量`:sb`的值 `current_buffer`。结果字符串的评估就像您按`:exe`部分键入它一样，这将抑制消息，因为它是 `:sil`命令的一部分。

因此，效果就像您`:sb 4`在正常模式下键入了 （使用 4 作为 的值`current_buffer`）。这将拆分当前窗口并使用新窗口编辑缓冲区号 4。

# java - Reading XML using Java

> ID：13664866
> 
> 赞同：0
> 
> 时间：2012-12-01T23:34:31.193
> 
> 标签：java, xml

I've looked at a few examples, but all of them seem to use simpler XML files than the one I'm trying to read.

Here's an example of the layout I'm trying to read:

```
<map>
    <map_values></map_values>

    <grid>
        <grid_values></grid_values>

        <square>
            <values></values>
        </square>

        <square>
            <values></values>
        </square>

        <square>
            <values></values>
        </square>
    </grid>

    <grid>
        <grid_values></grid_values>

        <square>
            <values></values>
        </square>

        <square>
            <values></values>
        </square>

        <square>
            <values></values>
        </square>
    </grid>
</map> 
```

Currently I'm using DOM to try and read this in, but I'm not sure how to read in one grid's section of squares at a time. Right now I'm using the following:

```
NodeList squares = doc.getElementsByTagName("square"); 
```

but it's returning all the squares in both grids.

I'm OK switching out of DOM, I just need a suggestion for what to switch to and where to find a good tutorial.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T23:39:05.027

您可以为此使用 JAXB。为这些地图创建模型对象非常容易。

参见例如 [http://www.mkyong.com/java/jaxb-hello-world-example/](http://www.mkyong.com/java/jaxb-hello-world-example/) 如何使用这个库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T09:24:35.750

我建议使用**JAXB (Java Architecture for XML Binding)**，因为它易于使用，也可用于针对 XSD 进行验证（如果需要）。

**Java Beans <----> XML**

这是一个示例，可让您感受一下：

资料来源：[JAXB Tutorail Basic](http://www.vogella.com/articles/JAXB/article.html)

```
@XmlRootElement(name = "book")
// If you want you can define the order in which the fields are written
// Optional
@XmlType(propOrder = { "author", "name", "publisher", "isbn" })
public class Book {

  private String name;
  private String author;
  private String publisher;
  private String isbn;

  // If you like the variable name, e.g. "name", you can easily change this
  // name for your XML-Output:
  @XmlElement(name = "title")
  public String getName() {
    return name;
  }

  public void setName(String name) {
    this.name = name;
  }

  public String getAuthor() {
    return author;
  }

  public void setAuthor(String author) {
    this.author = author;
  }

  public String getPublisher() {
    return publisher;
  }

  public void setPublisher(String publisher) {
    this.publisher = publisher;
  }

  public String getIsbn() {
    return isbn;
  }

  public void setIsbn(String isbn) {
    this.isbn = isbn;
  }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T23:37:29.277

你如何做这样的事情：

`NodeList grids = doc.getElementsByTagName("grid");`

然后迭代`grids`，对于每一个，调用`getElementsByTagName("square")`?

那将解决您的问题：

```
NodeList grids = doc.getElementsByTagName("grid");
for (int i=0; i < grids.getLength(); ++i) {
    Element grid = (Element) grids.item(i);
    NodeList squares = grid.getElementsByTagName("square");
    ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T23:46:58.760

1）我个人的偏好是DOM。SAX 通常是我的第二选择（如果性能成为问题）。

2) 有很多（很多，很多！）关于 Java 和 XML 的好教程，包括：

*   [http://www.mkyong.com/tutorials/java-xml-tutorials/](http://www.mkyong.com/tutorials/java-xml-tutorials/)

*   [http://docs.oracle.com/javase/tutorial/jaxp/intro/](http://docs.oracle.com/javase/tutorial/jaxp/intro/)

*   [http://www.oracle.com/technetwork/java/intro-140052.html](http://www.oracle.com/technetwork/java/intro-140052.html)

3) 这是关于如何使用 Java 和 XPath 来获取您正在寻找的节点的一个很好的讨论：

*   [http://www.ibm.com/developerworks/library/x-javaxpathapi/index.html](http://www.ibm.com/developerworks/library/x-javaxpathapi/index.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T00:01:26.567

您可能希望首先找到网格：

```
 NodeList grids = doc.getElementsByTagName("grid"); 
```

然后要获得第`square`一个`grid`节点的第一个，请尝试：

```
 Node gridNode = grids.item(0);
  Node squareNode = gridNode.getChildNodes().item(2); //as it is second child node 
```

* ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* _ *_* __ *_* ____**

但如果您可能想使用一些 XML 框架，例如[**XStream**](http://xstream.codehaus.org/)，它具有非常简单的 API 可以转换`XML`为`JAVA`对象，则更好。使用它，您可能希望在 JAVA 中转换两个 XML 文件并使用 JAVA 比较。

简单的步骤是：

1.  定义简单 Java 对象 (POJO)，例如`MyXMLObj`将 XML 属性映射到 Java 属性中。
2.  将 Java 中的 XML 转换为：

    ```
    XStream xstream = new XStream();
    //or
    XStream xstream = new XStream(new DomDriver());
    //or
    //XStream xstream = new XStream(new StaxDriver());

     MyXMLObj myXMLObj= (MyXMLObj)xstream.fromXML(xml1); 
    ```

3.  只需遍历您的 java 对象并获得所需的属性值：

    ```
    myXMLObj.getGrids().get(0).getSquare();//returns square from first gird node 
    ```

# prolog - Reification of term equality/inequality

> ID：13664870
> 
> 赞同：40
> 
> 时间：2012-12-01T23:34:46.627
> 
> 标签：prolog, prolog-dif

Pure Prolog programs that distinguish between the equality and inequality of terms in a clean manner suffer from execution inefficiencies ; even when all terms of relevance are ground.

A recent example on SO is [this answer](https://stackoverflow.com/a/13663425/772868). All answers and all failures are correct in this definition. Consider:

```
?- Es = [E1,E2], occurrences(E, Es, Fs).
Es = Fs, Fs = [E, E],
E1 = E2, E2 = E ;
Es = [E, E2],
E1 = E,
Fs = [E],
dif(E, E2) ;
Es = [E1, E],
E2 = E,
Fs = [E],
dif(E, E1) ;
Es = [E1, E2],
Fs = [],
dif(E, E1),
dif(E, E2). 
```

While the program is flawless from a declarative viewpoint, its direct execution on current systems like B, SICStus, SWI, YAP is unnecessarily inefficient. For the following goal, a choicepoint is left open **for each** element of the list.

```
?- occurrences(a,[a,a,a,a,a],M).
M = [a, a, a, a, a] ;
false.

```

This can be observed by using a sufficiently large list of `a`s as follows. You might need to adapt the `I` such that the list can still be represented ; in SWI this would mean that

1mo the `I` must be small enough to prevent a resource error for the global stack like the following:

```
?- 24=I,N is 2^I,length(L,N), maplist(=(a),L).
ERROR: Out of global stack
```

2do the `I` must be large enough to provoke a resource error for the local stack:

```
?- 22=I,N is 2^I,length(L,N), maplist(=(a),L), ( Length=ok ; occurrences(a,L,M) ).
I = 22,
N = 4194304,
L = [a, a, a, a, a, a, a, a, a|...],
Length = ok ;
ERROR: Out of local stack
```

To overcome this problem and still retain the nice declarative properties some comparison predicate is needed.

* * *

**How should this comparison predicate be defined?**

* * *

Here is such a possible definition:

```
equality_reified(X, X, true).
equality_reified(X, Y, false) :-
   dif(X, Y).

```

Edit: Maybe the argument order should be reversed similar to the ISO built-in [`compare/3`](http://www.complang.tuwien.ac.at/ulrich/iso-prolog/dtc2#compare) (link links to draft only).

An efficient implementation of it would handle the fast determinate cases first:

```
equality_reified(X, Y, R) :- X == Y, !, R = true.
equality_reified(X, Y, R) :- ?=(X, Y), !, R = false. % syntactically different
equality_reified(X, Y, R) :- X \= Y, !, R = false. % semantically different
equality_reified(X, X, true).
equality_reified(X, Y, false) :-
   dif(X, Y).

```

Edit: it is not clear to me whether or not `X \= Y` is a suitable guard in the presence of constraints. Without constraints, `?=(X, Y)` or `X \= Y` are the same.

* * *

## Example

As suggested by @user1638891, here is an example how one might use such a primitive. The original code by mats was:

```
occurrences_mats(_, [], []).
occurrences_mats(X, [X|Ls], [X|Rest]) :-
   occurrences_mats(X, Ls, Rest).
occurrences_mats(X, [L|Ls], Rest) :-
   dif(X, L),
   occurrences_mats(X, Ls, Rest). 
```

Which can be rewritten to something like:

```
occurrences(_, [], []).
occurrences(E, [X|Xs], Ys0) :-
   reified_equality(Bool, E, X),
   ( Bool == true -> Ys0 = [X|Ys] ; Ys0 = Ys ),
   % ( Bool = true, Ys0 = [X|Ys] ; Bool = true, Ys0 = Ys ),
   occurrences(E, Xs, Ys).

reified_equality(R, X, Y) :- X == Y, !, R = true.
reified_equality(R, X, Y) :- ?=(X, Y), !, R = false.
reified_equality(true, X, X).
reified_equality(false, X, Y) :-
   dif(X, Y). 
```

Please note that SWI's second-argument indexing is only activated, **after** you enter a query like `occurrences(_,[],_)`. Also, SWI need the inherently nonmonotonic if-then-else, since it does not index on `(;)/2` – disjunction. SICStus does so, but has only first argument indexing. So it leaves one (1) choice-point open (at the end with `[]`).

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T01:06:32.287

一方面，名称应该更具声明性，例如`equality_truth/2`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-17T20:22:16.313

以下代码基于`if_/3`and `(=)/3`(aka `equal_truth/3`)，由 @false 在[Prolog union for AUBUC](https://stackoverflow.com/questions/27358456/prolog-union-for-a-u-b-u-c)中实现：

```
=(X, Y, R) :- X == Y,    !, R = true.
=(X, Y, R) :- ?=(X, Y),  !, R = false. % syntactically different
=(X, Y, R) :- X \= Y,    !, R = false. % semantically different
=(X, Y, R) :- R == true, !, X = Y.
=(X, X, true).
=(X, Y, false) :-
   dif(X, Y).

if_(C_1, Then_0, Else_0) :-
   call(C_1, Truth),
   functor(Truth,_,0),  % safety check
   ( Truth == true -> Then_0 ; Truth == false, Else_0 ). 
```

与 相比`occurrences/3`，辅助`occurrences_aux/3`使用不同的参数顺序，将列表`Es`作为第一个参数传递，这可以启用第一个参数索引：

```
occurrences_aux([], _, []).
occurrences_aux([X|Xs], E, Ys0) :-
   if_(E = X, Ys0 = [X|Ys], Ys0 = Ys),
   occurrences_aux(Xs, E, Ys). 
```

正如@migfilg 所指出的，目标`Fs=[1,2], occurrences_aux(Es,E,Fs)` *应该*失败，因为它在逻辑上是错误的： `occurrences_aux(_,E,Fs)`声明中的所有元素`Fs`都等于`E`. 但是，就其本身而言，`occurrences_aux/3`不会在这种情况下终止。

我们可以使用辅助谓词`allEqual_to__lazy/2`来改善终止行为：

```
allEqual_to__lazy(Xs,E) :-
   freeze(Xs, allEqual_to__lazy_aux(Xs,E)).

allEqual_to__lazy_aux([],_).
allEqual_to__lazy_aux([E|Es],E) :-
   allEqual_to__lazy(Es,E). 
```

有了所有辅助谓词，让我们定义`occurrences/3`：

```
occurrences(E,Es,Fs) :-
   allEqual_to__lazy(Fs,E),    % enforce redundant equality constraint lazily
   occurrences_aux(Es,E,Fs).   % flip args to enable first argument indexing 
```

让我们有一些疑问：

```
?- occurrences(E,Es,Fs).       % first, the most general query
Es = Fs, Fs = []        ;
Es = Fs, Fs = [E]       ;
Es = Fs, Fs = [E,E]     ;
Es = Fs, Fs = [E,E,E]   ;
Es = Fs, Fs = [E,E,E,E] ...    % will never terminate universally, but ...
                               % that's ok: solution set size is infinite

?- Fs = [1,2], occurrences(E,Es,Fs).
false.                         % terminates thanks to allEqual_to__lazy/2

?- occurrences(E,[1,2,3,1,2,3,1],Fs).
Fs = [1,1,1],     E=1                     ;
Fs = [2,2],                 E=2           ;
Fs = [3,3],                           E=3 ;
Fs = [],      dif(E,1), dif(E,2), dif(E,3).

?- occurrences(1,[1,2,3,1,2,3,1],Fs).
Fs = [1,1,1].                  % succeeds deterministically

?- Es = [E1,E2], occurrences(E,Es,Fs).
Es = [E,  E], Fs = [E,E],     E1=E ,     E2=E  ;
Es = [E, E2], Fs = [E],       E1=E , dif(E2,E) ;
Es = [E1, E], Fs = [E],   dif(E1,E),     E2=E  ;
Es = [E1,E2], Fs = [],    dif(E1,E), dif(E2,E).

?- occurrences(1,[E1,1,2,1,E2],Fs).
    E1=1 ,     E2=1 , Fs = [1,1,1,1] ;
    E1=1 , dif(E2,1), Fs = [1,1,1]   ;
dif(E1,1),     E2=1 , Fs = [1,1,1]   ;
dif(E1,1), dif(E2,1), Fs = [1,1]. 
```

* * *

### 编辑 2015-04-27

`occurrences/3`如果通用在某些情况下终止，还有一些测试查询：

```
?-           occurrences(1,L,[1,2]).
false. 
?- L = [_|_],occurrences(1,L,[1,2]).
false.
?- L = [X|X],occurrences(1,L,[1,2]).
false.
?- L = [L|L],occurrences(1,L,[1,2]).
false. 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-13T20:45:40.797

似乎最好用相同的参数调用这个谓词`(=)/3`。以这种方式，像`if_/3`现在这样的条件更具可读性。而是使用后缀`_t`代替`_truth`：

```
memberd_t(_X, [], false).
memberd_t(X, [Y|Ys], Truth) :-
   if_( X = Y, Truth=true, memberd_t(X, Ys, Truth) ). 
```

曾经是：

```
memberd_truth(_X, [], false).
memberd_truth(X, [Y|Ys], Truth) :-
   if_( equal_truth(X, Y), Truth=true, memberd_truth(X, Ys, Truth) ). 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-04-15T16:58:23.843

更新：这个答案已被我的 4 月 18 日取代。由于以下评论，我不建议将其删除。

我之前的回答是错误的。以下是针对问题中的测试用例运行的，并且该实现具有避免多余选择点的所需功能。我假设顶级谓词模式是 ?,+,? 尽管可以轻松实现其他模式。

该程序总共有 4 个子句：访问第二个参数中的列表，并且对于每个成员有两种可能性：它要么与顶部谓词的第一个参数统一，要么与它不同，在这种情况下`dif`应用约束：

```
occurrences(X, L, Os) :- occs(L, X, Os).

occs([],_,[]).
occs([X|R], X, [X|ROs]) :- occs(R, X, ROs).
occs([X|R], Y, ROs) :- dif(Y, X), occs(R, Y, ROs). 
```

使用 YAP 运行示例：

```
?- occurrences(1,[E1,1,2,1,E2],Fs).
E1 = E2 = 1,
Fs = [1,1,1,1] ? ;
E1 = 1,
Fs = [1,1,1],
dif(1,E2) ? ;
E2 = 1,
Fs = [1,1,1],
dif(1,E1) ? ;
Fs = [1,1],
dif(1,E1),
dif(1,E2) ? ;
no  

?- occurrences(E,[E1,E2],Fs).
E = E1 = E2,
Fs = [E,E] ? ;
E = E1,
Fs = [E],
dif(E,E2) ? ;
E = E2,
Fs = [E],
dif(E,E1) ? ;
Fs = [],
dif(E,E1),
dif(E,E2) ? ;
no 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-06-16T01:31:53.417

这是一个更短的逻辑纯实现`occurrences/3`.

我们将它建立在[meta-predicate](/questions/tagged/meta-predicate "显示标记为“元谓词”的问题") [`tfilter/3`](https://stackoverflow.com/a/30211229/4609915)、具体化术语相等 predicate[`(=)/3`](https://stackoverflow.com/a/27358600/4609915)和协程`allEqual_to__lazy/2`（在[我之前](https://stackoverflow.com/a/29708684/4609915)对这个问题的回答中定义）的基础上：

```
occurrences(E,Xs,Es) :-
   allEqual_to__lazy(Es,E),
   tfilter(=(E),Xs,Es). 
```

*完毕！*为了便于比较，我们重新运行我在之前的答案中使用的完全相同的查询：

```
?- Fs = [1,2], occurrences(E,Es,Fs).
false.

?- occurrences(E,[1,2,3,1,2,3,1],Fs).
Fs = [1,1,1],     E=1                     ;
Fs = [2,2],                 E=2           ;
Fs = [3,3],                           E=3 ;
Fs = [],      dif(E,1), dif(E,2), dif(E,3).

?- occurrences(1,[1,2,3,1,2,3,1],Fs).
Fs = [1,1,1].

?- Es = [E1,E2], occurrences(E,Es,Fs).
Es = [E, E ], Fs = [E,E],     E1=E ,     E2=E  ;
Es = [E, E2], Fs = [E],       E1=E , dif(E2,E) ;
Es = [E1,E ], Fs = [E],   dif(E1,E),     E2=E  ;
Es = [E1,E2], Fs = [],    dif(E1,E), dif(E2,E).

?- occurrences(1,[E1,1,2,1,E2],Fs).
    E1=1 ,     E2=1 , Fs = [1,1,1,1] ;
    E1=1 , dif(E2,1), Fs = [1,1,1]   ;
dif(E1,1),     E2=1 , Fs = [1,1,1]   ;
dif(E1,1), dif(E2,1), Fs = [1,1].

?- occurrences(1,L,[1,2]).
false.

?- L = [_|_],occurrences(1,L,[1,2]).
false.

?- L = [X|X],occurrences(1,L,[1,2]).
false.

?- L = [L|L],occurrences(1,L,[1,2]).
false. 
```

最后，最一般的查询：

```
?- occurrences(E,Es,Fs).
Es = Fs, Fs = []      ;
Es = Fs, Fs = [E]     ;
Es = Fs, Fs = [E,E]   ;
Es = Fs, Fs = [E,E,E] % ... and so on ad infinitum ... 
```

我们得到相同的答案。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-04-18T14:49:14.733

下面的实现`occurrences/3`是基于我之前的回答，即利用第一个参数的子句索引机制来避免一些选择点，并解决所有提出的问题。

此外，它还解决了迄今为止所有提交的实现中的一个问题，包括问题中提到的一个问题，即当查询有 2 个第一个参数免费且第三个具有不同基本元素的列表时，它们都进入无限循环。当然，正确的行为是失败。

**使用比较谓词**

我认为，为了避免未使用的选择点并保持良好的实现声明性，不需要像问题中提出的那样使用比较谓词，但我同意这可能是一个品味或倾向的问题。

**执行**

按此顺序考虑三种排他情况：如果第二个参数是接地的，则递归访问它；否则，如果第三个参数是接地的，则对其进行检查，然后递归访问；否则会为第二个和第三个参数生成合适的列表。

```
occurrences(X, L, Os) :-
  ( nonvar(L) -> occs(L, X, Os) ;
    ( nonvar(Os) -> check(Os, X), glist(Os, X, L) ; v_occs(L, X, Os) ) ). 
```

当列表不为空时，访问ground 2nd 参数有三种情况：如果它的头部和`X`上面都是ground 并且unifiable`X`是在结果列表的头部并且没有其他选择；否则有两种与`X`头部不同或与头部统一的选择：

```
occs([],_,[]).
occs([X|R], Y, ROs) :-
  ( X==Y -> ROs=[X|Rr] ; foccs(X, Y, ROs, Rr) ), occs(R, Y, Rr).

foccs(X, Y, ROs, ROs) :- dif(X, Y).
foccs(X, X, [X|ROs], ROs). 
```

检查地面第三个参数包括确保其所有成员与`X`. 原则上，这种检查可以通过`glist/3`但以这种方式避免未使用的选择点来执行。

```
check([], _).
check([X|R], X) :- check(R, X). 
```

使用自由的第二个参数访问地面第三个参数必须通过向`X`生成的列表添加不同的变量来终止。在每个递归步骤中，有两种选择：生成列表的当前头是访问列表的当前头，它必须与 可统一`X`或者是不同于 的自由变量`X`。这是仅理论上的描述，因为实际上存在无限数量的解决方案，并且当列表头是变量时，永远不会到达第 3 个子句。因此，下面的第三个子句被注释掉，以避免不可用的选择点。

```
glist([], X, L) :- gdlist(L,X).
glist([X|R], X, [X|Rr]) :- glist(R, X, Rr).
%% glist([X|R], Y, [Y|Rr]) :- dif(X, Y), glist([X|R], Y, Rr).

gdlist([], _).
gdlist([Y|R], X) :- dif(X, Y), gdlist(R, X). 
```

最后，所有参数都是免费的情况以类似于前一种情况的方式处理，并且在实践中没有生成一些解决方案模式的类似问题：

```
v_occs([], _, []).
v_occs([X|R], X, [X|ROs]) :- v_occs(R, X, ROs).
%% v_occs([X|R], Y, ROs) :- dif(Y, X), v_occs(R, Y, ROs). % never used 
```

**样品测试**

```
?- occurrences(1,[E1,1,2,1,E2],Fs).
Fs = [1,1],
dif(E1,1),
dif(E2,1) ? ;
E2 = 1,
Fs = [1,1,1],
dif(E1,1) ? ;
E1 = 1,
Fs = [1,1,1],
dif(E2,1) ? ;
E1 = E2 = 1,
Fs = [1,1,1,1] ? ;
no

?- occurrences(1,L,[1,2]).
no

?- occurrences(1,L,[1,E,1]).
E = 1,
L = [1,1,1] ? ;
E = 1,
L = [1,1,1,_A],
dif(1,_A) ? ;
E = 1,
L = [1,1,1,_A,_B],
dif(1,_A),
dif(1,_B) ? ;
   ... 
```

# ios - 'Could no load image...' error when not referencing image?

> ID：13664872
> 
> 赞同：0
> 
> 时间：2012-12-01T23:34:53.703
> 
> 标签：ios, xcode, nslog

The nslog gives the error "Could not load the "XXX.png" image referenced from a nib in the bundle with identifier "XXX". However, Image.png is never referenced in IB nor in my code. Why do I still get this error (I have also cleaned the product and build folder, no luck).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T04:10:36.320

我想出了这个以供将来参考......这是最奇怪的事情 - 我没有在我的应用程序的任何地方引用该图像，但我制作了一个新图像并将其命名为“XXX.png”（日志声称我正在引用）并将其添加到我的项目中。然后我从项目中删除了它，现在我不再收到这个错误了。好奇怪……

# ruby - dynamically defining instance methods but not class methods

> ID：13664874
> 
> 赞同：1
> 
> 时间：2012-12-01T23:35:02.433
> 
> 标签：ruby, metaprogramming

Ruby 1.9.3: I am trying to implement a method which takes as argument a class, a symbol and a proc and defines (eventually overwriting) a new instance method for that class, but **not** a class method so that this test should pass:

```
require 'test/unit'

include Test::Unit::Assertions

class String
  def my_method
    'my_method'
  end
end

def define_instance_method(klass, method, &block)
  # klass.send :define_method, method, &block
  # ...
end

define_instance_method(Object, :my_method) { 'define_instance_method my_method' }
define_instance_method(String, :my_method) { 'define_instance_method my_method' }

assert Object.new.my_method == 'define_instance_method my_method'
assert_raise(NoMethodError) { Object.my_method }

assert String.new.my_method == 'define_instance_method my_method'
assert_raise(NoMethodError) { String.my_method } 
```

I did many tryings (`define_method`, `define_singleton_method`, `class_eval`, `instance_eval`, `instance_exec`, `module_eval`...) but with no success; do you have any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T23:39:48.100

@ProGNOMmers，回想一下 Ruby 中的对象是类，类是对象。

所以 Ruby 中的一切都是对象，甚至是类 :)

并且当您在其中定义一个方法时，`Object`它也可用于`Class`任何继承自`Object`.

这对所有班级都是如此。

一些证明：

```
define_instance_method(String, :my_method) { 'define_instance_method my_method' }

p String.new.my_method
p String.my_method

# =>  "define_instance_method my_method"
# =>  stackoverflow.rb:11:in `<main>': undefined method `my_method' for String:Class (NoMethodError) 
```

看，你的方法还没有在里面定义`Object`，因此在里面不可用`String`。

现在让我们这样做：

```
define_instance_method(Object, :my_method) { 'define_instance_method my_method' }

p String.my_method
# => "define_instance_method my_method"

p Array.my_method
# => "define_instance_method my_method"

p NilClass.my_method
# => "define_instance_method my_method" 
```

因此，只需`define_instance_method(Object...`在您的测试
和`String`规范中发表评论即可顺利通过。

### [以下是一些碰撞测试](http://cibox.org/slivu/stackoverflow?lang=ruby&file=dynamically-defining-instance-methods-but-not-class-methods.rb&run=true)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T23:51:52.927

class_eval 应该适合你。让我知道为什么它不适合你

```
class A
end

A.class_eval do
  define_method(:foo) {puts 'hello'}
end

A.new.foo #hello
A.foo     #NoMethodError: undefined method `foo' for A:Class 
```

# java - Can this be done with recursion only?

> ID：13664875
> 
> 赞同：1
> 
> 时间：2012-12-01T23:35:02.067
> 
> 标签：java, recursion

I am stuck on [this](http://codingbat.com/prob/p104029) CodingBat recursion problem:

> Given a string, return recursively a "cleaned" string where adjacent chars that are the same have been reduced to a single char. So "yyzzza" yields "yza".

```
stringClean("yyzzza") → "yza"
stringClean("abbbcdd") → "abcd"
stringClean("Hello") → "Helo" 
```

I can solve it using loops, but this is not allowed since the problem is supposed so be solved using recursion. Is there any way to solve this problem without using a loop and using only recursion? No global variables, no loops. I even thought of encoding some information in the parameter but that would be cheating too I think.

My previous program had no while loop, and I could only get half of the answers right. Basically, when I called my function with the string parameter, I checked the first 2 characters. If they were the same, I would return the character and call the function again with a string two characters smaller. A string of 3 or 4 of the same consecutive characters would always defeat my algorithm however.

```
public String stringClean(String str) {

    if (str.length() == 0)
        return "";

    if (str.length() > 1) {

    int counter = 1;

      char a = str.charAt(0);
      char b = str.charAt(1);

       if (a == b)
       {
          while (str.length() > 1)
          {
             a = str.charAt(0);
             b = str.charAt(1);

             if (a != b) break;

             counter++;
             str = str.substring(1);

          }

           return a + stringClean( str.substring(1) ) ;
       }

    }

    return str.charAt(0) + stringClean (str.substring(1) );

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T23:48:34.453

> 我的问题如下，有没有办法在不使用循环且只使用递归的情况下解决这个问题。没有全局变量，没有循环。

**回答：是的。**这很简单。试试下面：

```
 public String stringClean(String str) {
      if (str.length() == 0)
            return "";
      if (str.length() == 1)
            return str;

      if(str.charAt(0) == str.charAt(1)){
         return stringClean(str.substring(1));   
      }else{
        return str.charAt(0)+ stringClean(str.substring(1));
      }    
    } 
```

您的 CodingBat 结果如下：

> stringClean("yyzzza") → "yza" "yza" **OK**
> stringClean("abbbcdd") → "abcd" "abcd" **OK**
> stringClean("Hello") → "Helo" "Helo" **OK**
> stringClean("XXabcYY") → " XabcY" "XabcY" **OK**
> stringClean("112ab445") → "12ab45" "12ab45" **OK**
> stringClean("Hello Bookkeeper") → "Helo Bokeper" "Helo Bokeper" **OK**
> 其他测试 **OK**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T23:40:59.210

> 我的问题如下，有没有办法在不使用循环且只使用递归的情况下解决这个问题。没有全局变量，没有循环。

答案是“是的，这是可能的”。

提示：

*   像大多数“棘手的”递归问题一样，这需要一个额外的参数。
*   将问题视为在每个阶段过滤字符串的第一个字符。
*   输入字符串的第一个字符是特殊情况...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-26T15:46:15.827

```
public String stringClean(String str) {
    if (str == null) {
        return null;
    } else if (str.length() > 1) {
        String k = str.substring(0, 1);
        if (str.charAt(0) == str.charAt(1)) {
            String tmp = stringClean(str.substring(2));
            return k + stringClean(tmp);
        } else {
            return k + stringClean(stringClean(str.substring(1)));
        }
    } else {
        return str;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-12T11:36:21.507

这是我的答案

```
public String stringClean(String str) {
  if(str.isEmpty()) return "";
  if(str.length()==1)return str;

  if(str.length() > 1 && !str.substring(0,1).equals(str.substring(1,2)))
    return str.substring(0,1) + stringClean(str.substring(1));

  return ""+stringClean(str.substring(1));

} 
```

# gwt - Add Multiple Widgets to GWT flextable

> ID：13664876
> 
> 赞同：2
> 
> 时间：2012-12-01T23:35:13.170
> 
> 标签：gwt, flextable

is there a way to do this? I am trying to add a textbox and a button within one cell in a flextable.

Thanks

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T23:40:43.543

只需将它们包装在 FlowPanel 或其他面板中即可。

就像是

```
Widget widget1 = new Label("Hello");
Widget widget2 = new Label("World");
FlowPanel panel = new FlowPanel();
panel.add(widget1);
panel.add(widget2);
// get the table
table.setWidget(x, y, panel); 
```

# python - Python 动态类对象名称

> ID：13664879
> 
> 赞同：1
> 
> 时间：2012-12-01T23:35:18.430
> 
> 标签：python

只是一个快速的问题。我试过用谷歌搜索，但每次你在 Python 搜索中添加“类”时，它都会为你提供 Python 上的类。丁：

我发现了这样的线程：[如何通过 while 循环动态创建变量？](https://stackoverflow.com/questions/5036700/how-can-you-dynamically-create-variables-in-python-via-to-a-while-loop)

但我不认为这正是我正在寻找的，因为连接也是变量的一部分。

这是我的while循环：

```
def main():
    counter = 1
    while counter <= 3:
        print "Name: ",employee[counter].name
        print "ID Number: ",employee[counter].id_number
        print "Department: ",employee[counter].department
        print "Job Title: ",employee[counter].job_title
        print #LB
        counter = counter + 1

main() 
```

我将我的对象设置为：

```
employee1 = Employee("Susan Meyers", 47899, "Accounting", "Vice President")
employee2 = Employee("Mark Jones", 39119, "IT", "Programmer")
employee3 = Employee("Joy Rogers", 81774, "Manufacturing", "Engineer") 
```

这是我收到的错误：

```
print "Name: ",employee[counter].name
NameError: global name 'employee' is not defined 
```

显然我也设置了一个类，但我认为我不需要为此粘贴它。我想要它做的是遍历循环并将计数器从 1 更改为 2 到 3。这样它将遍历所有三个员工。

有可能这样做吗？我只用数组做过这个，所以我不能 100% 确定我在正确的轨道上。

任何提示都会很棒。<3

切尔西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:38:13.380

我认为您正在寻找的是一个列表

```
employees = []
for i in xrange(1,10):
    employees.append(employee("some name %s" % i))

employees[4].name 
```

# php - PHP：从文本文件中获取下一个 n 字节

> ID：13664880
> 
> 赞同：2
> 
> 时间：2012-12-01T23:35:29.070
> 
> 标签：php

我需要遍历一个 64 字节 x 64 字节的文本文件。我希望接下来的 64 个字节仅在前一个起始位置之后的一个字符开始！`fread($handle,64)`从前一个字节的末尾开始下一个字节。

像这样的某事：

文本文件包含：

```
abcdefghi 
```

每 3 个字节获取一次：

```
abc
bcd
cde
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T23:46:12.613

使用[`fseek()`](http://php.net/manual/en/function.fseek.php)前重置文件位置指示器`fread()`。像这样的东西：

```
for($i=0; $i <= ($filelength-64), $i++){
  fseek($handle, $i);
  $data = fread($handle, 64);
  // process data...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:04:55.483

尝试这个

```
for ($line = 0; $line < 64; ++$line)
{
   $str = fread($handle, 64);
   for ($col = 0; $col < 63; col += 3)
   {
      $data = substr($str, $col, 3);
      echo "$data\n";
   }
} 
```

# visual-c++ - 在 VisualC++ 项目中使用 GCC 编译的库（反之亦然）

> ID：13664882
> 
> 赞同：1
> 
> 时间：2012-12-01T23:35:30.147
> 
> 标签：visual-c++, gcc, libraries, soci

是否可以在将 GCC 用作编译器（反之亦然）的项目中使用使用 VisualC++（因此带有 .lib 扩展名）编译的代码（和库）？还是我必须重建它们？
我正在尝试在一个以 GCC 作为编译器的项目中使用我用 VisualC++ 编译的 SOCI 3.1 库，但我遇到了一些错误，我不知道为什么..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:28:54.280

您必须使用 MinGW 工具为 GCC 生成二进制文件：reimp 和 dlltool。这是 MinGW wiki，其中包含完整的程序说明：[MSVC 和 MinGW DLLs](http://www.mingw.org/wiki/MSVC_and_MinGW_DLLs)

简短的例子：

```
reimp -d libmysql.lib
dlltool -k --input-def libmysql.def --dllname libmysql.dll --output-lib libmysql.a
reimp libmysql.lib 
```

顺便说一句，这里是 SOCI 用户邮件列表上的相关线程：[MySQL Build](https://sourceforge.net/mailarchive/message.php?msg_id=30466136) failed 。寻找线程中给出的有用链接。

# javascript - Javascript - 数组弹出并获取数组的第一部分

> ID：13664883
> 
> 赞同：1
> 
> 时间：2012-12-01T23:35:46.083
> 
> 标签：javascript, arrays, split

我有一条路径，我试图在最后一个 / 之后弹出所有内容，因此在这种情况下为“文件夹”，将新路径保留为 C://local/drive/folder/。

我尝试使用 pop() 弹出最后一个 /，但无法使路径的第一部分成为新路径：

```
var path = C://local/drive/folder/folder
var newpath = path.split("/").pop();
var newpath = newpath[0]; //should be C://local/drive/folder/ 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T23:38:09.240

使用`.slice()`代替`pop()`

```
var newpath = path.split("/").slice(0, -1).join("/"); 
```

* * *

如果您还需要最后一部分，则只需使用`.pop()`，但首先将 Array 存储在单独的变量中。

```
var parts = path.split("/");

var last = parts.pop();
var first = parts.join("/"); 
```

现在`last`拥有最后一部分，并且`first`拥有最后一部分之前的所有内容。

* * *

另一种解决方案是`.lastIndexOf()`在字符串上使用。

```
var idx = path.lastIndexOf("/");

var first = path.slice(0, idx);
var last = path.slice(idx + 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T23:45:04.823

只需将最后一条语句替换为：

```
var path = C://local/drive/folder/folder
path.split("/").pop(); // Discard the poped element.
var newpath = path.join("/"); // It will be C://local/drive/folder 
```

**关于`Array.pop`**： 每次调用该`pop`方法时，它都会*返回*最后一个元素，并将*其从数组中删除*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T23:41:03.220

也可以使用正则表达式：

```
function stripLastPiece(path) {
    var matches = path.match(/^(.*\/)[^\/]+$/);
    if (matches) {
        return(matches[1]);
    }
    return(path);
} 
```

工作示例：http: [//jsfiddle.net/jfriend00/av7Mn/](http://jsfiddle.net/jfriend00/av7Mn/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-09T10:53:17.840

如果要获取数组的第一部分。

var firstWord = fullnamesaved.split(" ").shift();

这忽略了空格之后的所有内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T23:40:35.700

```
var foo = "C://local/drive/folder/folder";
foo.match(/(.+\/)[^\/]+$/); 
```

会导致：`["C://local/drive/folder/folder", "C://local/drive/folder/"]`

虽然我更喜欢 user1689607 的回答

# javascript - 移动 safari - 自动标签切换错误？

> ID：13664885
> 
> 赞同：1
> 
> 时间：2012-12-01T23:36:08.167
> 
> 标签：javascript, html, mobile-safari, browser-refresh

似乎 Mobile Safari 有一些奇怪的行为，比如自动标签切换。

请使用 Mobile Safari 查看以下链接，然后创建另一个选项卡。

[http://adhoc.sometwo.net/MobileSafariSucks.html](http://adhoc.sometwo.net/MobileSafariSucks.html)

如您所见，您不能停留在其他选项卡上。移动 Safari 总是在刷新时切换回带有链接的选项卡。

这是我在该页面中编写的简单源代码：

```
<html>
   <head>
      <title>Mobile Safari Sucks</title>
      <meta http-equiv="refresh" content="2">
   </head>
   <body bgcolor="#acacac" onLoad="self.focus();">
      Mobile Safari Sucks
   </body>
</html> 
```

它似乎`http-equiv="refresh"`并`onLoad="self.focus();"`导致了这个问题。

这是否可以被视为一个错误，因为 Chrome 和其他浏览器在刷新时不会切换回此选项卡？

想要惹恼访问者的人可以设置一个非常低的刷新时间并破坏他们的浏览体验。

除了删除部分之外，可以做些什么来让用户摆脱这种不愉快的情况`self.focus();`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-05T12:17:54.183

是的，我可以确认这是一个错误，而不是预期的行为，它已在 iOS7 中修复。

# objective-c - 加入不完整的字符串 Objective-c

> ID：13664886
> 
> 赞同：0
> 
> 时间：2012-12-01T23:36:10.007
> 
> 标签：objective-c, string, serial-port

我不知道如何命名，更不用说解释清楚了，但它就在这里。

我目前有这个方法：

```
- (void) receivedData:(NSString *)data {
} 
```

它在读取串行数据时触发。串行数据输入为：`<DMX>255,23,1,4,6</DMX>`问题是，它不是作为一个统一的字符串输入。它是碎片化的。比如, `<DM`, `X>255`, `,23,1,4,`, 等等。它是随机的，所以我无法追踪它。有时它会发送整个内容，有时它会一次发送几个字符。就是这样。

如何，在我的代码中，我可以等待整个事情进来（从开始到`<DMX>`结束`</DMX>`）然后创建一个 NSString？也许随着数据进来，存储碎片，等待结束`</DMX>`，然后将它们组合在一起？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:39:05.183

1.  如果您正在解析 XML，并且可以选择使用 XML 解析器 - 使用它（iOS/OSX 中有内置的 XML 解析器，以及许多其他选项）。

2.  但是，如果您决定对此进行编码...

创建`NSMutableString` *ivar*并在接收数据时继续向其添加 ( `appendString`)... 然后跟踪您是否已经遇到开始/结束标签...

沿着这些路线的东西..

在`MyClass.h`：

```
@interface Myclass : NSObject
{
    NSMutableString *buffer, *tmpBuffer;
    int status; // 0=waiting for <DMX>, 1=recording, 2=done
} 
```

在`MyClass.m`：

```
-(id) init {
  if(self = [super init]) {
    buffer = [[NSMutableString alloc] init];
    tmpBuffer = [[NSMutableString alloc] init];
    status = 0;
  }
  return self;
}

-(void) receivedData:(NSString *)data {
  if(status == 2) return; // already done

  // status=0 means we are still looking for start tag
  if(status == 0) {
    // add new data to last examined chunk (if any)
    [tmpBuffer appendString:data];

    // try to locate the open tag inside the tmpBuffer
    NSRange range = [tmpBuffer rangeForString:@"<DMX>" options:NSCaseInsensitiveSearch];

    // if found, store the portion after the start tag into buffer
    if(range.location != NSNotFound) {
      range.length = [tmpBuffer length] - range.location + 5; // 5 is length of start tag...
      [buffer setString:[tmpBuffer substringWithRange:range]];
      status = 1; // set status to 1 so we know recording started
    } else {
      // store last examined chunk
      [tmpBuffer setString:data];
    }
  }
  else {
    [buffer appendString:data];
    NSRange range = [buffer rangeForString:@"</DMX>" options:NSCaseInsensitiveSearch];
    if(range.location != NSNotFound) {
      range.length = [buffer length] - range.location;
      [buffer deleteCharactersInRange:range];
      status = 2;
    }
  }
}

-(void) dealloc {
  [buffer release];
  [tmpBuffer release];
  [super dealloc];
} 
```

# javascript - 将本地文件的内容存储在数组中

> ID：13664892
> 
> 赞同：0
> 
> 时间：2012-12-01T23:37:12.357
> 
> 标签：javascript, html, filereader

我正在尝试做这样的事情：

JavaScript：

```
function readMultipleFiles(evt) {
    //Retrieve all the files from the FileList object
    var files = evt.target.files;
    window.array = []
    if (files) {
        for (var i = 0, f; f = files[i]; i++) {
            var r = new FileReader();
            r.onload = (function (f) {
                return function (e) {
                    var contents = e.target.result;
                    window.array.push(contents);
                };
            })(f);
            r.readAsText(f);
        }
        alert(window.array);
    } else {
        alert("Failed to load files");
    }
}
document.getElementById('fileinput').addEventListener('change', readMultipleFiles, false);​ 
```

HTML：

```
<input type="file" id="fileinput" multiple /> 
```

这样我就可以在本地读取本地文件。但是，我想将文件内容存储在这种格式的数组中：

```
[file1Contents, file2Contents, file3Contents... etc] 
```

我该怎么办？我尝试设置一个全局变量（例如 window.fileContents）并在 on.load 中进行更新，但这不起作用

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T00:11:35.363

我不确定你想要做什么，但我会试试看。我看到您已经在将文件作为文本读取..您不能将其推入那里的数组吗？我在下面修改了您的代码：

```
var masterFileArray = [];  // where I will store the contents

function readMultipleFiles(evt) {
    //Retrieve all the files from the FileList object
    var files = evt.target.files;
    window.array = []
    if (files) {
        for (var i = 0, f; f = files[i]; i++) {
            var r = new FileReader();
            r.onload = (function (f) {
                return function (e) {
                    var contents = e.target.result;
                    window.array.push(contents);
                    masterFileArray.append({name:f.name, contents: contents}); // storing as object
                };
            })(f);
            r.readAsText(f);
        }
        console.log(masterFileArray);
    } else {
        alert("Failed to load files");
    }
}
document.getElementById('fileinput').addEventListener('change', readMultipleFiles, false); 
```

# windows-8 - Windows 8 开发中心上的 Windows 8 HTML5 / JavaScript Canvas 教程不起作用

> ID：13664894
> 
> 赞同：1
> 
> 时间：2012-12-01T23:37:44.403
> 
> 标签：windows-8

我正在尝试在 Windows 8 开发中心完成本教程：http: [//msdn.microsoft.com/en-us/library/windows/apps/xaml/hh452750.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh452750.aspx)

但是还没迈出第一步。在我的 HTML5 文件中，我有：

```
<canvas id="can1" width="500" height="500"></canvas> 
```

在我的 JavaScript 文件中，我有：

```
var myCanvas = document.getElementById("can1");
var myContext = myCanvas.getContext("2d"); 
```

我正在使用适用于 Windows 8 的 Visual Studio Express 2012。我收到以下错误：“0x800a138f - JavaScript 运行时错误：无法获取未定义或空引用的属性 'getContext'”

这正是本教程所说的。为什么我会收到错误消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T06:33:02.133

如果您使用的是空白模板（如您的评论中所述），那么将建议的演示代码放在 onactivate 事件中应该可以工作。下面应该显示从黑框的左上角到右下角的白线。

在 default.html 中：

```
<body>
    <p>Content goes here</p>
    <canvas id="can1" width="500" height="500"></canvas>
</body> 
```

在 default.js 中，在 app.onactivated 方法中：

```
app.onactivated = function (args) {
    if (args.detail.kind === activation.ActivationKind.launch) {
        if (args.detail.previousExecutionState !== activation.ApplicationExecutionState.terminated) {
            // TODO: This application has been newly launched. Initialize
            // your application here.
        } else {
            // TODO: This application has been reactivated from suspension.
            // Restore application state here.
        }

        var myCanvas = document.getElementById("can1");
        var myContext = myCanvas.getContext("2d");

        myContext.fillStyle = '#000';
        myContext.strokeStyle = '#fff';
        myContext.fillRect(0, 0, 500, 500);
        myContext.lineWidth = 3;
        myContext.fill();

        myContext.moveTo(0, 0);
        myContext.lineTo(500, 500);
        myContext.stroke();

        args.setPromise(WinJS.UI.processAll());
    }
}; 
```

# javascript - Javascript 和 Ajax 函数不起作用

> ID：13664895
> 
> 赞同：0
> 
> 时间：2012-12-01T23:37:51.457
> 
> 标签：javascript, ajax, forms

当用户单击某个链接时，我正在尝试更新我的数据库（链接具有不同的值，因此当用户单击时，一个链接号增加 1，另一个增加 2，依此类推）。

我需要将表单提交到另一个页面，其中包含来自`#form`其后面的变量的数据，但是此功能似乎不起作用。

**JavaScript**

```
function update_number(x) {

    $.ajax({
        type: "POST",
        url: "update_likes.php",
        data: $("#Form"+x).serialize(),
        dataType: "json",

        return false;
        }; 
```

**HTML**

```
<input type='image' src='...' onclick'update_number(2);' /> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:02:48.950

您的 JavaScript 似乎没有正确关闭。

*试着用这个改变你的 JavaScript：*

```
function update_number(x) {
    $.ajax({
        type: "POST",
        url: "update_likes.php",
        data: $("#Form"+x).serialize(),
        dataType: "json",
        success: function(json) {
            alert( json );
            return false;
        }
    });
 } 
```

# objective-c - Objective-C 谓词元素以 $ 开头

> ID：13664899
> 
> 赞同：0
> 
> 时间：2012-12-01T23:38:20.980
> 
> 标签：objective-c, ios, xcode, ipad

我尝试使用谓词在数组中找到`"title"`子元素的属性`"$t"`。

```
filterPlaces = [[NSMutableArray alloc] initWithArray:youtubeChannelWS.youtubeArrayVideos];
predicate = [NSPredicate predicateWithFormat:@"title.$t contains[cd] %@", placeName];
[filterPlaces filterUsingPredicate:predicate]; 
```

但是我收到一个错误，它没有找到变量 t。

你知道我该如何解决这个问题吗？

# php - PHP 中的这种替代 if/else 语法是什么？

> ID：13664900
> 
> 赞同：8
> 
> 时间：2012-12-01T23:38:24.587
> 
> 标签：php

以下类型的 if/else 语法的名称是什么：

```
print $foo = ($hour < 12) ? "Good morning!" : "Good afternoon!"; 
```

我在 php 手册中找不到任何专用页面。我知道它存在，因为我（去年）用它读过一本书，现在我找到了这篇[文章](http://www.php.net/manual/en/control-structures.alternative-syntax.php#91167)。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-01T23:39:38.163

这称为三元表达式

[http://php.net/manual/en/language.expressions.php](http://php.net/manual/en/language.expressions.php)

您应该注意，这不是“if 的替代语法”，因为它不应该用于控制程序的流程。

在设置变量的简单示例中，它可以帮助您避免冗长的 if 语句，如下所示：（参考：[php docs](http://us1.php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)）

```
// Example usage for: Ternary Operator
$action = (empty($_POST['action'])) ? 'default' : $_POST['action'];

// The above is identical to this if/else statement
if (empty($_POST['action'])) {
    $action = 'default';
} else {
    $action = $_POST['action'];
} 
```

**但是**，它可以用于其他地方，而不仅仅是简单的变量赋值

```
function say($a, $b) {
    echo "{$a} {$b}";
}

$foo = false;

say('hello', $foo ? 'world' : 'planet');

//=> hello planet 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-01T23:40:00.670

它被称为[三元运算符](http://us1.php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)——尽管许多人称它为“`?:`运算符”，因为“三元”是一个很少使用的词。

# maven - maven依赖没有下载

> ID：13664904
> 
> 赞同：4
> 
> 时间：2012-12-01T23:39:03.410
> 
> 标签：maven

我是新手。我收到以下错误，我不明白。你能帮我理解如何解决它吗？

无法解析以下工件：org.springframework:org.springframework.core:jar:3.0.5.RELEASE, org.springframework:org.springframework.asm:jar:3.0.5.RELEASE: 找不到 org.springframework [http://repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2)中的:org.springframework.core:jar:3.0.5.RELEASE被缓存在本地仓库中，直到 central 的更新间隔过去或更新后才会重新尝试解析被迫 -> [帮助 1]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:43:47.663

尝试使用该`-U`选项运行您的命令。这里有更多[信息](https://web.archive.org/web/20120404041452/http://blog.mycila.com/2010/09/maven-3-resolution-will-not-be.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T06:36:58.913

如果您向 pom 文件提供问题会更有帮助，但从堆栈跟踪来看，似乎没有正确声明依赖项。具体来说，Spring 的正确工件名称是“spring-core”而不是“org.springframework.core”，所以在你的 pom.xml 文件中你应该有：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-core</artifactId>
    <version>3.0.5.RELEASE</version>
</dependency> 
```

[您可以在公共 Maven Repo 搜索引擎（如http://mvnrepository.com](http://mvnrepository.com)或[http://search.maven.org](http://search.maven.org)）中找到正确的依赖定义。这是 Spring Core 工件的链接：http: [//mvnrepository.com/artifact/org.springframework/spring-core/3.0.5.RELEASE](http://mvnrepository.com/artifact/org.springframework/spring-core/3.0.5.RELEASE)

顺便说一句，您看到的错误格式如下：

```
<groupId>:<artifactId>:<packaging>:<version> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T05:26:15.803

是的，看起来你的 pom 依赖没有正确标记。谷歌搜索示例 Spring MVC 应用程序和查找示例 pom 将很有帮助。

# c# - 在加载到表单的那一刻，我应该使用什么事件来更改 ToolStrip 控件的属性？

> ID：13664907
> 
> 赞同：0
> 
> 时间：2012-12-01T23:39:16.173
> 
> 标签：c#, .net, vb.net

我在自定义用户控件中有一个工具条控件。自定义用户控件在同一个表单上多次使用。我正在尝试将自定义渐变应用于工具条。我无法在设计时添加自定义渐变，因此我需要在事件周期期间将工具条放置在表单上的某个时间点进行此操作。

我可以使用这样的东西：

```
MyToolstrip.Renderer = New ToolStripProfessionalRenderer(New MyInheretedProColorTable) 
```

问题是，我不知道放在哪里。似乎没有任何事件对此有效。

因为我正在使用多个工具条（我想要不同的颜色），所以我无法在整个表单上更改 ToolstripManager 的渲染器，因为它会将所有工具条的颜色更改为相同的颜色。MS如何处理这些真的很奇怪。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstrip_events.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstrip_events.aspx)

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T23:50:33.420

工具条通过 InitializeComponent() 调用在构造函数中创建。所以这也是该声明所属的地方，就在那个电话之后。锅炉板代码为：

```
Public Class UserControl1
    Public Sub New()
        '' This call is required by the Windows Form Designer.
        InitializeComponent()
        '' Add any initialization after the InitializeComponent() call.
        MyToolstrip.Renderer = New ToolStripProfessionalRenderer(New MyInheretedProColorTable)
    End Sub
End Class 
```

# java - 文件 API 导致 ANR

> ID：13664915
> 
> 赞同：1
> 
> 时间：2012-12-01T23:40:49.273
> 
> 标签：java, android, file, android-asynctask

我的应用程序的一小部分检查用户设备上是否存在文件。文件列表可能很长 - 显然长到足以导致少数用户出现 ANR。一千个文件绝不是不可能的。

代码很简单：

```
new File(fileUrl).exists() 
```

我目前正在主线程上执行此操作，因为我需要阻塞操作。我可以使用一个`AsyncTask`类来完成它，然后在完成后继续其余的工作，但我想知道这是否是一个有效的原因？

所有的工作都是在后台完成的`Service`，如果这有什么改变的话。我也可能会遇到方向变化，这可能会让`AsyncTask`. 会`Handler`更好吗？

所以，总结一下：我是否应该在后台服务中使用 AsyncTask 进行可能长时间运行的操作，其中可能会发生方向变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T00:09:12.070

首先， a`Service`不受方向变化的影响 - 它只是当前正在运行的`Activity`类被销毁/重新创建。

其次，an`AsyncTask`在 a 中没有太大优势，`Service`因为它被设计为能够与 UI 交互。它会带来在单独线程上工作的优势，但其余方法基本上是多余的。

我建议使用`IntentService`管理自己的工作线程来工作。请参阅[IntentService 文档](http://developer.android.com/reference/android/app/IntentService.html)

# java - Eclipse 错误地声称我有旧版本的 Android SDK

> ID：13664923
> 
> 赞同：3
> 
> 时间：2012-12-01T23:41:29.177
> 
> 标签：java, android, eclipse, sdk, adt

只是作为序言，我在互联网上搜索了很多，试图找到这个问题的答案，但还没有找到答案，有人和我有类似的问题，但并不完全相同。

我一直在尝试使用 Android SDK 设置 Eclipse。我首先安装了 Eclipse (Classic) 并编辑了 .ini 文件以找到正确的 javaw.exe 文件。我测试了eclipse，它工作正常。然后我下载了 android sdk 包，将其解压缩并使用 SDK 管理器下载必要的 SDK 工具（Rev. 21）和 Android 2.33 API。完成后，我回到 Eclipse，单击“安装新软件”并在“使用”字段中输入“https://dl-ssl.google.com/android/eclipse/”。从那里我安装了开发工具和 NDK 插件，然后在完成后重新启动 Eclipse。

现在，当我启动 Eclipse 时，我收到以下错误“此版本的 ADT 需要 Android SDK 工具修订版 21.0.0 rc9 或更高版本。当前版本是 11.0.0 请更新您的 SDK 工具到最新版本”

我知道我有 rev 21 的事实，当我下载它时它说，当我尝试进入并更新任何东西时，无论是通过 Eclipse 还是通过管理器，它都说没有可用的更新。我知道我拥有最新的 SDK 和 ADT，我也尝试过使用 sdk 附带的 eclipse 版本，但这给了我同样的问题。对我来说似乎引起危险的唯一其他事情是 1\. 当程序加载时，它在控制台中显示以下消息“[2012-12-01 18:31:48 - Dex Loader] SecurityException: Unable to find field for dex.jar" 2\. 当我尝试通过 eclipse 打开 SDK 管理器时，它永远不会打开，并且控制台显示以下消息“[2012-12-01 18:37:07 - SDK Manager] [SDK Manager] Error: Expected全局参数后的动词，但找到了'sdk'。”

我不知道这两者中的任何一个是否与导致此问题的原因有关，但我希望有人知道发生了什么。如果有人可以帮助我解决这个问题，我将不胜感激，在此先感谢您。

（作为参考，我一直按照本教程 [http://youtu.be/31cxmLN09ss](http://youtu.be/31cxmLN09ss)中的安装说明进行操作）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T09:52:42.873

在 SDK 包管理器中，尝试选择包菜单 -> 重新加载。然后您应该会看到 Android SDK Tools rev21 可用并且可以更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:52:11.517

我有同样的问题。发生这种情况是因为几个月前我尝试安装 adt 插件时，该位置已被保存。我监督了旧文件夹的位置，把它误认为是当前更新的文件夹，然后砰！这就是全部原因。尝试检查指定工具文件夹的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-08T20:05:30.730

按照我之前的建议，更好的解决方案是将 Windows->Preferences->Android 中的 sdk 位置修改为安装 ADT 包的位置。例如，如果您将 ADT Bundle 安装在 C:\Tools\adt-bundle-windows-x86-20130219 下，请输入 C:\Tools\adt-bundle-windows-x86-20130219\sdk。

这样做还解决了“Android SDK Manager”无法从另一个线程中讨论的 Eclipse 中启动的其他问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-29T14:31:39.537

这（上面）是合理的建议： *但是我进入了 Eclipse 并重新定义了 android sdk 位置，无论出于何种原因，它显然位于不同的 android 文件夹中，其中包含过时的文件，我相信现在情况已经解决*，我尝试了它并且它有效对我来说也是。谢谢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-08T19:42:13.467

我通过在“C:\Program Files\Android\android-sdk”下复制正确的 sdk 版本解决了 Eclipse 报告我有旧 sdk 的问题，即使我安装了最新版本。首先将现有的“C:\Program Files\Android\android-sdk\sdk”保存为“C:\Program Files\Android\android-sdk\sdk_old”，以备不时之需。

# php - 在 PHP 中实现长轮询的最佳方法是什么？

> ID：13664924
> 
> 赞同：1
> 
> 时间：2012-12-01T23:41:39.723
> 
> 标签：php, long-polling

我想让服务器知道客户端何时断开连接。因此，我想实现长轮询。问题是：循环的简单解决方案会消耗大量资源，但我不知道更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T03:04:32.900

如果您想远离 WebSocket，这里有一个解决方案：

让客户端每 2 秒左右用一个唯一的 id ping example.php。

example.php 会这样做：

1.  以秒为单位写入当前时间，文件名作为客户端的唯一 id
2.  睡觉(4)
3.  读取上次写入的时间
4.  如果当前时间与上次写入时间的差大于 3 秒，则用户断开连接。否则，用户已连接。

# java - 如何安全地迭代线程内的集合？

> ID：13664926
> 
> 赞同：1
> 
> 时间：2012-12-01T23:42:06.060
> 
> 标签：java, concurrency

我有一个 java / blazeds 应用程序，它保留一个数组“ **_games** ”，这是 2 个订阅相同 blazeds 主题的玩家。我看到的问题是只有不到 40% 的连接尝试成功，到目前为止，我调试问题的努力没有成功——它似乎是无声无息地抛出，而且行为是随机的，除了第一对连接似乎比随后的尝试。我看到了**ConcurrentModificationException**并且我在该主题上阅读的内容表明我的代码存在并发问题。

在这种情况下，我在线程内迭代数组“_games”，我想知道如何安全地执行此操作，因为其他客户端将尝试随机访问此变量。

**更新**#2：

在调试线程内的 for 循环时，似乎当前项目始终相同，因此迭代器不会前进或被后续请求重置，因此 i 始终 = 0 ，或者如果使用 for(Game g : _games) ，那么 g 始终是数组中的第一项。

谢谢！

```
public class GameService {

private static List<Game> _games;
private static GameServiceThread thread;

public GameService(MessageTemplate template) {
    this.template = template;
}

public Game CreateOrJoinGame(GamePlayer player)
{

    Game currentGame = new Game();
    boolean isFull = false;
    for (Game g: _games)
    {

        ArrayCollection myCollection = g.myCollection;
        currentGame = g;
        if(!g.IsFull())
        {
            myCollection.add(player);

            if(g.IsFull())
            {
                isFull = true;
                currentGame.myCollection = myCollection;
                System.out.print("User Count..." + myCollection.size() + "\n");
            }
            break;
        }

    }
    if(isFull)
    {
        return currentGame;
    }
    else
    {
        Game creator = CreateGame(player);
        return creator;
    }
}

public void start() {
     if (thread == null) {
        if(_games == null)
        {
          _games = new ArrayList<Game>();
        }        
            thread = new GameServiceThread(this.template);
            thread.start();
     }
}
public void AddPlayer(GamePlayer player)
{
    _allPlayers.add(player);
} 
```

//嵌套的静态线程类

```
public static class GameServiceThread extends Thread {

        @Override
    public void run() {

        this.running = true;
        while (this.running) 
        {
            for (Game g: _games)
            {
                 //do work
            }

        }
     }

    private void sendGameUpdate(final Game game) {} 
```

该服务在 flex-servlet 中注册仅供参考，尽管我认为这不是我的问题。

```
<bean id="gameFeedService" class="com.acme.services.GameService">
    <constructor-arg ref="defaultMessageTemplate" />
    <flex:remoting-destination />
</bean> 
```

**编辑**：添加了一些关于如何添加新游戏的代码。我在 GameService 类和 GameServiceThread 中迭代了 _games。首先，当新客户端向服务发送远程游戏对象时，我在同一个集合中进行迭代以向每个游戏接收者发送一条消息。每个游戏内部都有一个集合，我用它来确定游戏是否已满 - 如果它是一个新的 Game() 被创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:55:45.550

您可以在列表本身上进行同步。

```
 @Override
public void run() {

    this.running = true;
    while (this.running) 
    {
        synchronized (_games) {
            for (Game g: _games) {
             //do work
            }
        }
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T23:48:36.277

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T23:49:38.353

您可以从使用线程安全列表开始，例如：

```
List list = Collections.synchronizedList(new ArrayList(...)); 
```

检查[ArrayList javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)以获取更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T23:52:09.747

```
synchronized(_games) {            
    for (Game g: _games)
    {
        //do work
    }
} 
```

或者

```
synchronized(getClass()) {            
    for (Game g: _games)
    {
        //do work
    }
} 
```

两者都可以。

根据您在 sendGameUpdate 中所做的事情，您可能还必须在同一对象上同步。

# c# - XNA 4.0 打印到 Visual Studio 2012 控制台

> ID：13664932
> 
> 赞同：2
> 
> 时间：2012-12-01T23:42:46.293
> 
> 标签：c#, .net, visual-studio, xna, visual-studio-2012

在编写 XNA 应用程序（或任何二进制输出类型为 的应用程序）时`Windows Application`，[Visual Studio 不应该将输出发送到 VS 控制台吗？](https://stackoverflow.com/questions/2518509/redirect-console-write-methods-to-visual-studios-output-window-while-debuggi)我没有得到这种行为，我更喜欢使用它而不是仅仅阅读实际的 Windows 命令提示符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:57:24.183

调用`Console.WriteLine()`绝对应该输出到 Visual Studio 输出控制台。输出选项卡上应该有一个标记为“显示输出：”的下拉列表；是否设置为“调试”？

# java - 使用 @ExceptionHandler 在 Spring MVC 中处理“错误 500”

> ID：13664933
> 
> 赞同：1
> 
> 时间：2012-12-01T23:42:50.330
> 
> 标签：java, spring, model-view-controller, error-handling

****（首先，我必须说我一直在寻找关于 stackoverflow 和互联网的答案，但没有找到足够的答案）*** *我刚刚开始使用 Spring MVC 进行冒险，我的第一个任务是使用 @ExceptionHandler 处理内部服务器错误注释（首先，我必须指出我不想在 web.xml 中使用错误页面）。简而言之，无论何时出现“错误 500”，都应该显示一个正确的站点，其中包含指向主站点的链接。所以，我的问题是我不知道如何在`@ExceptionHandler(Exception.class)`每次发生错误 500 时调用下面的方法。**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-01T08:12:14.913

如果您使用 java 配置，您可以尝试如下：

```
@Configuration
public class ExcpConfig {

    @Bean(name = "simpleMappingExceptionResolver")
    public SimpleMappingExceptionResolver simpleMappingExceptionResolver() {
        SimpleMappingExceptionResolver resolver= new SimpleMappingExceptionResolver();

        Properties mappings = new Properties();
        resolver.setExceptionMappings(mappings); // None by default
        resolver.setExceptionAttribute("ErrorOccurred"); // Default is "exception"
        resolver.setDefaultErrorView("500"); // 500.jsp
        return resolver;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:06:38.223

你实际上不能用 @ExceptionHandler 注释做你想做的事。这仅适用于特定控制器中的异常，不适用于更一般的事情，例如错误 500。

您可能希望查看实现 HandlerExceptionResolver 接口，并将其连接到更一般的异常中。

这是 spring 文档中的链接。

[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-exceptionhandlers](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-exceptionhandlers)

如果您需要任何其他帮助，请告诉我。**

# javascript - 使用 Phonegap 捆绑资产

> ID：13664934
> 
> 赞同：1
> 
> 时间：2012-12-01T23:43:01.203
> 
> 标签：javascript, ios, cordova

我们正在使用 Phonegap 创建一个 iOS 应用程序，并且在打包一些预制资源时遇到了问题。该应用程序旨在离线使用，并涉及`leaflet.js`用于显示一些地图图层。

我们这样做的方式是使用`.mbtiles`文件（具有特定格式的 SQLite 文件）和自定义`leaflet.js`TileLayer。目前，基础层是在首次运行时下载的，但理想情况下，基础层将与应用程序捆绑在一起（它是 1-2gb）。据我所知，这在 iOS 上相当容易，因为您可以将文件捆绑为资源，但使用 Phonegap，API 只允许访问 Documents 目录。

如果有人能对捆绑的 Phonegap 的最佳实践有所了解`assets`，那就太好了！

让我知道是否需要更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:18:53.393

文件系统插件不允许访问只读应用程序包，但这不是在浏览器中运行时获取数据的唯一方法 - 文件 url 的 XHR（应用程序包是 www 文件夹的父级) 应该可以正常工作。

也就是说，自定义插件似乎更适合这种情况。由于基本要求是自定义位置的 SQLite 数据库，因此您可以尝试从[https://github.com/brodyspark/PhoneGap-sqlitePlugin-iOS](https://github.com/brodyspark/PhoneGap-sqlitePlugin-iOS)开始并修改 init/openDb 代码以使用应用程序包中的文件。

另一种选择是生成所有图像文件并将其包含在应用程序包中 - 由于 SQLite 和 javascript 并不特别擅长处理二进制数据，因此您将获得更好的性能。

顺便说一句，如果您将文件放入文档中，则首次使用时下载方法可能无法通过应用商店的审核。

# python-3.x - 这是如何在 Python 3 下使用 PyEphem 计算格林威治时角？

> ID：13664935
> 
> 赞同：3
> 
> 时间：2012-12-01T23:43:13.420
> 
> 标签：python-3.x, pyephem

我一直在使用 python3 和 pyephem 来研究天体导航，主要是通过一些无论如何都必须手动完成的计算。
对于视力降低部分，我试图让 pyephem 输出数据与航海历书相当，主要是格林威治小时角和偏角。为了获得白羊座第一个点的小时角，我尝试使用 ephem.readdb 在 0.0 RA 和 0.0 dec 添加一个主体。但是在进一步阅读文档后，我认为这是可行的。

```
#!/bin/python3

import math , ephem
#  zero longitude
gmt_long = '0:0:0'          #  deg, min, sec
myloc_date = ( '2012/12/02 22:00:00' )
# observer for greenwich  gst
utcz = ephem.Observer()
utcz.date = myloc_date
utcz.long = gmt_long
print ( utcz.date )
print (" gst hours", utcz.sidereal_time() )
print (" gst   deg", ephem.degrees( utcz.sidereal_time() ) ) 
```

将输出的最后一行与航海历书中的 aries 列进行比较

航海历书在线版 www.tecepe.com.br

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:29:45.470

是的，这看起来确实是正确的方法；你的每一步都是有意义的，所以你的结果和历书之间的一致性是有意义的。对于想要进行比较的其他人，这里是您引用的年鉴中的特定页面：

[http://www.tecepe.com.br/scripts/AlmanacPagesISAPI.dll/pages?date=12%2F02%2F2012](http://www.tecepe.com.br/scripts/AlmanacPagesISAPI.dll/pages?date=12%2F02%2F2012)

# regex - 匹配非 ascii 字符而不重复外部二进制文件

> ID：13664937
> 
> 赞同：0
> 
> 时间：2012-12-01T23:43:25.090
> 
> 标签：regex, linux, bash, non-ascii-characters

假设我有以下正则表达式`grep`：

```
grep -E 'head \x1E tail' 
```

我可以`grep`使用其个人转义码来识别非 ascii 字符，`\x`.

我可以在不调用任何外部程序的情况下对 Bash 做同样的事情吗？Bash 提供了 3 种匹配正则表达式的模式：

1.  普通路径名扩展
2.  extglob 路径名扩展
3.  [[ 字符串 =~ 正则表达式 ]]

这些似乎都不支持 UTF 转义码，也不支持 Bash 本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:57:37.830

在 bash 中，您可以使用 ANSI 引用的字符串：

```
$ x=éclair
$ [[ $x =~ $'\xc3\xa9' ]] && echo matched
matched 
```

请注意，您必须指定字符的 UTF-8 编码，因为 ANSI 引用的字符串不接受任意 Unicode 代码点。

# php - 将 NSString 解析为 JSON

> ID：13664939
> 
> 赞同：2
> 
> 时间：2012-12-01T23:43:46.617
> 
> 标签：php, iphone, objective-c, json, parsing

我已经阅读了几个论坛，但似乎无法完成这个简单的任务。我在 Xcode 中有一个指向 PHP 脚本的视图，并将结果存储为下面的 NSString：

[{"id":"16","name":"Bob","age":"37"}]

我无法解析这个 NSString。这就是我获取 NSString 内容的方式：

```
NSString *strURL = [NSString stringWithFormat:@"http://www.website.com/json.php?
id=%@",userId];

// to execute php code
NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

// to receive the returend value
NSString *strResult = [[NSString alloc] initWithData:dataURL 
encoding:NSUTF8StringEncoding]; 
```

如何将结果 (strResult) 转换为 JSON 并从中取出对象？我会假设它如下所示，但我知道我错过了一些东西

```
NSString *name = [objectForKey:@"name"];
NSString *age = [objectForKey:@"age"]; 
```

任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-01T23:59:56.273

使用类 NSJSONSerialization 来读取它

```
id jsonData = [string dataUsingEncoding:NSUTF8StringEncoding]; //if input is NSString
id readJsonDictOrArrayDependingOnJson = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:nil]; 
```

* * *

在你的情况下

```
NSArray *readJsonArray = [NSJSONSerialization JSONObjectWithData:dataURL options:0 error:nil];
NSDictionary *element1 = readJsonArray[0]; //old style: [readJsonArray objectAtIndex:0]
NSString *name = element1[@"name"]; //old style [element1 objectForKey:@"name"]
NSString *age = element1[@"age"]; //old style [element1 objectForKey:@"age"] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T07:18:21.037

试试这个....

```
NSString * strResult = [[NSString alloc] initWithData:responseMutableData encoding:NSUTF8StringEncoding];  
SBJSON *jsonParser = [[SBJSON alloc]init];
if([[jsonParser objectWithString:strResult] isKindOfClass:[NSArray class]])
{
    NSArray *jsonArr=[jsonParser objectWithString: strResult];
    NSDictionary *firstDictonary = [jsonArr objectAtIndex:0];
    NSString *name = [firstDictonary valueForKey:@"name"];
    NSString *age = [firstDictonary valueForKey:@"age"];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T23:55:24.710

如果您的目标是 iOS 5 及更高版本，只需使用 NSJSONSerialization

[http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

如果您的目标低于 iOS 5，请使用这样的 JSON 解析器：http: [//stig.github.com/json-framework/](http://stig.github.com/json-framework/)

只需在 JSON 字符串上调用 JSONValue （或等效）方法：

```
NSDictionary *dict= [strResult JSONValue];

NSString *name = [dict objectForKey:@"name"];
NSString *age = [dict objectForKey:@"age"]; 
```

顺便说一句，你的 JSON 字符串看起来像一个数组，你不能用来`objectForKey`从`NSArray`. 您有两个选择，将您的 JSON 字符串响应修改为字典或用于`objectAtIndex`获取对象。

# c++ - c ++全局变量的后期实例化

> ID：13664945
> 
> 赞同：12
> 
> 时间：2012-12-01T23:44:27.310
> 
> 标签：c++, c++11

我有代码必须通过相当多的代码设置全局资源：

```
globalClass foo;  // global variable / object; give it a memory space to live

void doSomething( void )
{
  foo.bar();      // use the global foo object
}

int main( int argc, const char *argv[] )
{
  foo( argc );   // foo can only be instantiated in main as it's using
                 // information that's only available here

  doSomething(); // use the global foo object

  return 0;
} 
```

如您所见，`foo`它具有全局范围 - 但要调用它的构造函数，我需要一些仅在`main`.

**我怎样才能做到这一点？**

我能想到的唯一解决方案是创建`foo`一个指向`globalClass`- 但这会导致每次我使用`foo`. 在紧密循环中使用时，这可能会产生性能问题......

PS：在实际程序中`main`，`doSomething`会存在不同的文件中。当然可以保证`foo`在实例化之前不会被访问。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T23:49:25.810

`foo`在函数内部作为`static`变量怎么样？这样，它只会在调用函数时被实例化：

```
globalClass& getThing()
{
  static globalClass thing;
  return thing;
}

void doSomething(const globalClass& thing);

int main()
{
  const globalClass& x = getThing();
  doSomething(x);  
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-01T23:53:05.907

正如您提到的那样使用指针是最简单和最干净的事情。指针取消引用的开销实际上并没有那么多。我建议使用它，除非你真的证明开销是明显的。

您的第二个选择是将构造和初始化`globalClass`分离为两个单独的方法。构造函数只会做不需要外部信息的最简单的事情，你会调用`init(argc)`或内部`main`的任何东西来合并外部信息。

您还可以使用赋值来初始化 foo，例如：

```
globalClass foo;

int main(int argc, const char *argv[]) {
    globalClass bar(argc);
    foo = bar;
} 
```

这本质上是使用临时变量进行初始化，然后复制结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T00:15:05.320

如果您不想要间接并且不介意自己进行清理，那么这是一个非常可怕的黑客攻击：

```
union ClassHolder
{
    globalClass x;
    char buf[sizeof globalClass];

    constexpr ClassHolder() noexcept : buf() { }
};

ClassHolder h;
globalClass & foo = h.x;

int main()
{
    new (static_cast<void *>(&h.x)) globalClass(arg1, arg2, arg3);

    // main program

    h.x.~globalClass();
} 
```

# android - 在 Android 上的 Sqlite 中执行 LIKE 查询

> ID：13664946
> 
> 赞同：0
> 
> 时间：2012-12-01T23:44:38.903
> 
> 标签：android, sqlite

我正在开发 android 项目，我需要在 SQLITE ie 中执行类似的查询 `SELECT * FROM table WHERE column LIKE %value%`。

下面是我用来尝试构建查询的代码。

```
myDB = context.openOrCreateDatabase("PasswordManager", Context.MODE_PRIVATE, null);
            String[] columns = new String[]{"*"};
            if (searchType == SearchType.App)
            {
                where = "appName like ?";
            }
            else if (searchType == SearchType.Username)
            {
                where = "username like ?";
            }
            else if (searchType == SearchType.Name)
            {
                where = "company like ?";
            }

            String[] args = {"%" + searchTerm + "%"};
            cursor = myDB.query("password", columns, where, args, null, null, null); 
```

出于某种原因，如果我尝试搜索模式，这不会返回任何结果，但是如果我搜索整个字符串，它会找到一些东西。例如，如果我有值 Hello World 并执行对 Hello 的搜索，则没有任何返回，如果我执行对 Hello World 的搜索，那么我会得到一个结果。

我不明白为什么这行不通。我尝试`%`在搜索词周围添加和删除符号，但没有任何区别。

感谢您的任何帮助，您可以提供。

**更新** 我已经尝试过 dymmeh 所说的，但这似乎没有奏效。下面是我尝试过的代码。

```
myDB = context.openOrCreateDatabase("PasswordManager", Context.MODE_PRIVATE, null);
            String[] columns = new String[]{"*"};
            if (searchType == SearchType.App)
            {
                where = "appName like %" + searchTerm + "%";
            }
            else if (searchType == SearchType.Username)
            {
                where = "username like %" + searchTerm + "%";
            }
            else if (searchType == SearchType.Name)
            {
                where = "company like %" + searchTerm + "%";
            }

            //String[] args = {"%" + searchTerm + "%"};
            cursor = myDB.query("password", columns, where, null, null, null, null); 
```

使用上面的代码现在使应用程序崩溃，我尝试将 % searchTerm % 括在单引号中，这会阻止应用程序崩溃，但我遇到的原始问题是，如果我搜索确切的字符串，则会找到结果我搜索字符串的一部分，我没有得到任何结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T23:49:23.090

使用时不要使用选择参数`like`..

相反，只是做

```
where = "appName like '%" + searchTerm + "%'"; 
```

而只是传递`null`给你`args`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T23:50:45.947

我不太了解 sqlite，但我很确定当您以您的方式使用准备好的语句时，它会将 % 解释为查询字符串的一部分。

您可能想尝试类似的东西

```
select * from myTable where myField like concat('%', ?, '%') 
```

但我不知道它是否会起作用。

# php - 如何获取页面的内容，就像在浏览器中访问一样？

> ID：13664947
> 
> 赞同：0
> 
> 时间：2012-12-01T23:44:41.470
> 
> 标签：php, url, curl

我在浏览器中输入了某个 URL，它显示了内容，例如，`Hello.`但是当我对该页面进行 cURL 请求时，它没有显示`Hello.`，而是显示`Goodbye.`了 For example only。

那么，是否可以像在浏览器中一样显示它？

我正在使用 PHP。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T23:46:48.670

这可能有两个原因：

1.  服务器正在检测用户代理字符串，或者正在使用 cookie，尝试将 curl 用户代理设置为您的浏览器正在使用的内容。
2.  内容是用 javascript 设置的。

# github - 将 GitHub for Windows 用于 Bitbucket 和 GitHub

> ID：13664949
> 
> 赞同：61
> 
> 时间：2012-12-01T23:44:57.740
> 
> 标签：github, bitbucket, github-for-windows

是否可以同时将 GitHub for Windows 用于 Bitbucket 和 GitHub？

例如，我可以在程序中显示两个站点上的 repo，并且当我提交/同步 repo 时，它会推送到相应网站上的相应 repo 吗？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-12-02T00:07:32.923

不，如果您的意思是：拥有一个带有*两个*遥控器（一个 GitHub 和一个 Bitbucket）的本地存储库。
您只能使用该客户端定义一个遥控器，它可以是 GitHub 遥控器，也可以是 Bitbucket 遥控器。

* * *

是的，如果您限制为*一个*远程，您可以将 GitHub for Windows 与任何上游存储库一起使用。

[现在，使用（不断）更新的 GitHub for Windows 应用程序可以更轻松](http://www.infragistics.com/community/blogs/david_burela/archive/2013/03/31/using-the-github-for-windows-app-with-bitbucket.aspx)地添加上游存储库：

> 选择 URL，然后将文本从浏览器拖放到 GitHub for Windows 应用程序中。它将自动添加存储库。

![拖放](../Images/98f75e03e0ab09cdb6f71da3634f98ef.png)

* * *

（2013 年 2 月的原始答案）

为了让“GitHub for Windows”**发布**（而不是“推送到 GitHub”），您需要**使用 Bitbucket 存储库的 https 地址**`origin`定义一个远程“ ”（在本地存储库的设置中）：

 **```
https://user@bitbucket.org/user/repo 
```

因此，如果您通过“GitHub for Windows”创建本地存储库，则可以通过其设置添加正确的远程：

![偏僻的](../Images/c04f6796807021f79f325d1af74c6b26.png)

请注意，第一次刷新将触发登录屏幕，以便您输入您在 bitbucket.org 上使用的 http 凭据：它们将在当前会话期间由 GitHub for Windows 缓存（和加密）。

![登录](../Images/916004ed64fe1163ed32461772552343.png)

（有关最近在 Git 1.7.9+ 中引入的凭证缓存机制的更多信息，请参阅“[密码缓存](https://help.github.com/articles/set-up-git#password-caching)”和“ [git: ' `credential-cache`' is not a git command](https://stackoverflow.com/questions/11693074/git-credential-cache-is-not-a-git-command) ”）

您在本地进行的任何修改都将由 GitHub for Windows 客户端获取（您可能需要退出存储库（GitHub for Windows 客户端左上角的左箭头，然后再次单击本地 Bitbucket 存储库：这将触发刷新）：

![犯罪](../Images/8999a8fd994f906512a4e5a1c11b8d17.png)

下一个屏幕截图中的关键是单词“ **`publish`**”（而不是“ `push to GitHub`”）。
那是因为远程“来源”是一个 https 来源。

![在 GitHub 应用中发布](../Images/9cd24a911ffacd9df2734587816ca2c1.png)

单击“发布”，您将看到您的回购状态设置为“ `in sync`”：

![同步中](../Images/d35eaea3069f2ef81e6377f002a6a817.png)

赶紧到 bitbucket.org 来检查一下 GitHub for Windows 是否确实推送到了 Bitbucket：

![发表](../Images/5eadd0f03d34d88701571df41202e0ea.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-03T21:49:52.080

还有一个新的 Windows 客户端可以与 bitbucket 一起使用。我今天试过了，我认为它是一个更好的产品。

[http://www.sourcetreeapp.com/](http://www.sourcetreeapp.com/)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-05-30T20:58:07.033

现在有一种更简单的方法可以让 GitHub for Windows 连接到您的 Bitbucket 帐户。查看下面的链接。

[http://www.infragistics.com/community/blogs/david_burela/archive/2013/03/31/using-the-github-for-windows-app-with-bitbucket.aspx](http://www.infragistics.com/community/blogs/david_burela/archive/2013/03/31/using-the-github-for-windows-app-with-bitbucket.aspx)**

# android - 手机拒绝 HTTP REST，但模拟器不拒绝

> ID：13664953
> 
> 赞同：0
> 
> 时间：2012-12-01T23:46:02.490
> 
> 标签：android, asp.net, rest, asp.net-web-api

我的 android 应用会向在我的公共网站上运行的 ASP NET WEB API 服务发送 POST。在 AVD 模拟器上测试时效果很好。但是当我在我的 Android 手机上测试时，我得到...

“连接到[http://www.deanblakely.com](http://www.deanblakely.com)被拒绝”

我的邮政编码粘贴在下面谢谢，加里

```
private String PostToCloudService(URL url, String entityString)
{
    String retstr = "";
    try
    {
        Log.w(getClass().getName(), "copy this: " + entityString );
        Log.w(getClass().getName(), "URL is: " + url );
        HttpResponse response = null;
        HttpParams myParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(myParams,5000);
        HttpConnectionParams.setSoTimeout(myParams, 5000);
        HttpClient httpclient = new DefaultHttpClient(myParams);

        HttpPost myPost = new HttpPost(url.toString());
        StringEntity se = new StringEntity(entityString);
        myPost.setEntity(se);
        myPost.setHeader("Accept", "application/json");
        myPost.setHeader("Content-type", "application/json");

        response = httpclient.execute(myPost);    

        BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

        String line = "";

        while ((line = rd.readLine()) != null)
        {
            Log.w(getClass().getName(), "response from getentity is " + line);
            retstr = line;
        }        
    }
    catch (Exception e)
    {
        Log.w(getClass().getName(), e.getMessage().toString());
        retstr = "error  " + e.getMessage().toString();
    }

    return retstr;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:25:28.543

> 在 AVD 模拟器上测试时效果很好。但是当我在我的 Android 手机上测试时，我得到...
> 
> “连接到[http://www.deanblakely.com](http://www.deanblakely.com)被拒绝”

过去我也遇到过类似的问题，它们都归结为环境配置。我希望您运行模拟器的计算机连接到内部网络，而设备没有。

如果确实如此，那么它很可能是在您尝试与之通信的服务上设置的。我希望服务当前正在开发中或由于某些其他原因而受到限制，它们只允许内部连接。

# java - 反序列化映射杰克逊

> ID：13664957
> 
> 赞同：1
> 
> 时间：2012-12-01T23:46:19.893
> 
> 标签：java, serialization, jackson

我对杰克逊将 json 文件反序列化为 poco 有误解。这是我的代码：

```
 JsonParser jp = new JsonFactory().createJsonParser(new File(pathFile)); 
        ObjectMapper objectMapper = new ObjectMapper();

        MappingIterator<AnimalBean> animalsss = objectMapper.readValues(jp, AnimalBean.class);
        while (animalsss.hasNext())
        {
            AnimalBean abba = animalsss.next();
            System.out.println(abba.getNom());
        } 
```

我的 POCO 名为 AnimalBean ：

```
public class AnimalBean 
{   
 private String id;
private String nom;
private String nom_scientifique;
private String classe;
private String ordre;
private String famille; 
private String details_zone;    
private String poids;
private String duree_gestation;
private String nb_gestation;
private String longevite;
private String description;
private String images;
   ... + all getter/setter 
```

和我的 JSON 文件：

```
{
"zoo": {
    "animaux": {
        "animal": [{
            "id": 1,
            "nom": "test",
            "nom_scientifique": "test2",
            "classe": 1,
            "ordre": 3,
            "famille": 4,
            "details_zone": "Zones",
            "poids": "80",
            "duree_gestation": "11",
            "nb_gestation": "1",
            "longevite": "25 ans",
            "description": "texte de description"
                }]
            }
    } 
```

}

当我执行我的代码时，出现以下错误：无法识别的字段“zoo”（AnimalBean 类），未标记为可忽略。我知道问题是我的 json 文件不是直接由动物开始的，但我无法更改它，因为它不是我的。我已经尝试将 objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false); 但它改变了一切。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:21:26.890

为什么不只使用几个包装类来匹配 JSON？

喜欢：

```
public class Wrapper {
  public Zoo zoo;
}
public class Zoo {
  public Animals animaux;
}
public class Animals {
  public Animal[] animal;
} 
```

然后绑定：

```
Wrapper w = mapper.readValue(json, Wrapper.class);
for (Animal animal : w.zoo.animaux.animal) {
   // process!
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:13:39.130

This is completely untested code since I cannot accurately replicate your situation/code. Basically it attempts to get the value as String and do some unwrapping, then creates another JsonParser.

```
ObjectMapper objectMapper = new ObjectMapper();
JsonParser jp = new JsonFactory().createJsonParser(new File(pathFile)); 
String json = jp.getText();
JsonNode node = objectMapper.readTree(json).get("Animal");
JsonParser jp2 = new JsonFactory().createJsonParser(node.getTextValue());

MappingIterator<AnimalBean> animalsss = objectMapper.readValues(jp2, AnimalBean.class);
while (animalsss.hasNext())
{
    AnimalBean abba = animalsss.next();
    System.out.println(abba.getNom());
} 
```

# sas - 在 SAS 9.2 中，如何清除 URL 文件引用？

> ID：13664958
> 
> 赞同：0
> 
> 时间：2012-12-01T23:46:29.900
> 
> 标签：sas, filereference, sas-macro

我写了一个类似这样的SAS宏......

```
%macro (myname=,myurl=);
    filename myfile URL "&myurl";
    data &myname;
    infile myfile dlm=',';
    input field1 field2;
    run;
%mend; 
```

它工作一次，但每当我再次运行它时，我都会收到日志消息：

```
ERROR: At least one file associated with fileref MYFILE is still in use.
ERROR: Error in FILENAME statement. 
```

如果我尝试`filename myfile CLEAR`或`filename myfile NULL`

此外，如果我使用多个 URL 运行它，则只会创建第一个数据集，而其他数据集是它的精确副本。

我无权访问 SAS 配置文件。我必须在没有任何管理权限的情况下解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:56:07.777

我想你可以在你的宏末尾添加一个 FILENAME CLEAR ：

```
%macro (myname=,myurl=);
    filename myfile URL "&myurl";
    data &myname;
    infile myfile dlm=',';
    input field1 field2;
    run;

    filename myfile clear;
%mend; 
```

# python - 用于 scikit 学习的 SVM 轻型加载器

> ID：13664959
> 
> 赞同：0
> 
> 时间：2012-12-01T23:46:38.363
> 
> 标签：python, file, machine-learning, svm

我正在运行一堆实验，其中几乎每次迭代的预处理都会发生变化。一旦我获得了某种格式的数据，我需要从 scikits (liblinear) 运行一个分类器。我可以将数据转换为 svm light 格式。我知道有一个模块可以将其转换为 scikits 标准。问题是我不想将文件写入磁盘。我有 48 gigs 的内存，更愿意在内存中进行转换。

下面是一个示例，我采用 svm light 格式，将 ito 写入 stringio 对象，然后在其上使用 svm light loader。不幸的是，装载机拒绝被切碎（它的工作原理是其他的）。有什么建议么？我正在运行超过 1000 个不同的预处理管道，但我无法继续写入磁盘。

样本 svm 光数据位于： [http ://www.csie.ntu.edu.tw/~cjlin/libsvmtools/datasets/binary/a1a](http://www.csie.ntu.edu.tw/~cjlin/libsvmtools/datasets/binary/a1a)

我的代码

```
 import numpy as np
 from sklearn.datasets import svmlight_format

 import cStringIO

 bufFile = cStringIO.StringIO()
 with open('C:/Users/theDesktop/Desktop/sampleData.txt') as a:
        p = a.readlines()
        a.close()

 bufFile.writelines(p)

 X_train, y_train = svmlight_format.load_svmlight_file(bufFile) 
```

我的错误：

```
Traceback (most recent call last):

File "C:\Users\theDesktop\Desktop\module1.py", 
line 25, in <module> X_train, y_train=svmlight_format.load_svmlight_file(bufFile)

File "C:\Python27\lib\site-packages\sklearn\datasets\svmlight_format.py", 
line 97, in load_svmlight_file zero_based))

File "C:\Python27\lib\site-packages\sklearn\datasets\svmlight_format.py", 
line 177, in load_svmlight_files for _, indices, _, _ in r):

File "C:\Python27\lib\site-packages\sklearn\datasets\svmlight_format.py", 
line 177, in <genexpr> for _, indices, _, _ in r):

File "C:\Python27\lib\site-packages\numpy\core\fromnumeric.py", 
line 1895, in amin return amin(axis, out)

ValueError: zero-size array to minimum.reduce without identity 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:19:38.170

再看一遍，我想我在下面回答了一个不同的问题（如果您有兴趣可以查看）=) 您正在寻找一种内存高效的格式转换器和一个新的视角。首先，拥有 48 GB 的内存有什么问题？除非您正在处理包含数百万个文档的语料库，否则它对于文本处理来说已经足够了。其次，如果 sklearn 在不同的实例中将文件作为不同的文件写入磁盘，那么您可以将其调整为覆盖，最后您可以删除最后一次迭代。或者，您可以使用`os`连接终端，然后使用`rm`命令从那里删除您喜欢的任何文件，在每次迭代中或一次全部删除。

如果问题是 python 在每次迭代中创建一个新对象，那么覆盖又是一种内存效率的解决方案。

我正在努力帮助你；如果我误导或误解了您，请发表评论，以免其他阅读本文的人感到困惑。

* * *

表有点晚了，但据我了解，您使用 sklearn 作为 python 和 svm-light 之间的接口。我不知道你想要什么输出；但如果只是对不同预处理方法的精度测量，那么您可以使用`os`python 库作为命令行之间的接口，然后在安装后可以从那里调用 svm-light。然后通过使用`grep`或类似工具，您可以提取准确性或其他所需信息，因为 svm-light 的学习和分类脚本确实将日志信息打印到 std 输出。另请注意，svm-light 在训练和分类后输出模型文件和其他文件，因此您需要`rm`在每次迭代中使用或其他工具删除它们，或者可能只是一次又一次地覆盖它们并最终删除它们。

通过这种方式，您可以按照您所说的那样保存内存，并且也许（？）可以获得比使用 sklearn 更多的信息。最后，我不确定此解决方法的复杂性：它可能更耗时，如果时间对您来说是一个限制，请检查它。

我不知道这是否是一种可能且有效的解决方法，我相信您已经克服了这种情况，因为它已经 3 个月了；但是如果您发表评论，这可能会对其他人有所帮助。

# javascript - 什么是 Javascript 等价于 iOS 的委托功能？

> ID：13664962
> 
> 赞同：0
> 
> 时间：2012-12-01T23:46:47.303
> 
> 标签：javascript, ios

```
- (void)shootMissile {

  //Send missile to delegate for storage
  if ([delegate respondsToSelector:@selector(shootMissile)]) {
     [delegate performSelector:@selector(shootMissile)];
   }
} 
```

委托函数意味着它委托给不同文件中的另一个函数。

我不确定我在javascript中遇到了类似的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T00:08:31.843

根据这个问题的第二个答案，[委托如何在 Objective-C 中工作？](https://stackoverflow.com/questions/1045803/how-does-a-delegate-work-in-objective-c)：

> 代表是一种设计模式；没有特殊的语法或语言支持。

这种模式当然可以在 Javascript 中使用，其中函数是一等对象，因此可以作为参数传递给其他函数。

要在 JS 中重写您的示例：

```
function shootMissile(selector) {
     if (selector.respondsTo(shootMissile)) {
         selector.perform(shootMissile);
     }
   }
} 
```

大概“选择器”是一个具有两个功能属性（即方法）的对象，称为“respondsTo”和“perform”。

上述更自然（或至少更实用）的版本是：

```
function shootMissile(canShootMissile, fireMissile, missile) {
     if (canShootMissile(missile)) {
         fireMissile(missile);
     }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T00:15:46.243

First a correction of the following assumption:

"delegate function means it's delegate to another function in a different file."

1) forget the "file" thing, it's all about context (a class instance for example)

2) It does not delegate to other function : function is delegated to another context (in Javascript, access the context with "this" keyword)

So in javascript, given the following function:

```
var shootMissile = function () {
    this.missiles --;
}; 
```

We may delegate it to a bunch of different contexts (= objects), for example a boat:

```
var Boat = function () {
    this.missiles = 10 ;
},
boatInstance = new Boat () ; 
```

Or a plane:

```
var Plane = function () {
    this.missiles = 5 ;
},
planeInstance = new Plane () ; 
```

Finally the working example:

```
// planeInstance will have 4 missiles after call of delegated function
shootMissile.apply (planeInstance);

// boatInstance will have 9 missiles after call of delegated function
shootMissile.apply (boatInstance); 
```

Hope this short explanation is sufficient for you.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T23:51:52.370

等价物类似于*匿名函数*。我想也可以称为*回调函数*。

[http://en.wikipedia.org/wiki/Anonymous_function#JavaScript](http://en.wikipedia.org/wiki/Anonymous_function#JavaScript)

# svn - 如何验证目录是否为 SVN 存储库

> ID：13664964
> 
> 赞同：1
> 
> 时间：2012-12-01T23:47:11.213
> 
> 标签：svn

*在通过 svnadmin 为我的 SVN 目录（在服务器*上 - 不是我的本地工作目录）设置备份“脚本”的过程中，使用 GUI 或 DND 添加到备份列表中，作为一项安全功能，我想检查一下，每个选定的目录实际上都是一个正确的 SVN 目录。

我查看了我现有的目录结构，发现它有以下子目录：conf、db、hook、locks 以及文件格式和 README.txt

所有 SVN 存储库和目录目前由 TortoiseSVN 的当前版本 1.7.10 创建/处理。

关于如何检查此特定结构的任何想法或评论是仅接受 SVN 目录并拒绝所有其他目录的好方法？

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-03T11:10:36.513

刚刚遇到同样的问题。svnlook info 和 svnlook youngest 命令（可能还有其他命令）给出的退出代码为 0 或 1，具体取决于提供的目录是否为 subversion 存储库。这适用于 SVN 存储库，而不是 user999713 声称的它们的“工作副本”。因此，以下 bash 脚本在*目录*是 SVN 存储库时显示 0，如果不是，则显示 1。

```
svnlook info directory > /dev/null 2>&1
echo $? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T16:24:11.993

为什么不直接使用`svn info %directory%`？如果目录没有被 subversion 修改并且它独立于你的 WC 结构，它返回一个退出代码！= 0。另外，它只在您的本地工作，不需要连接到 repo。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T01:05:09.943

命令行工具`svn`使您能够处理`svn ls`特定文件或目录。如果目录存在，则返回零，如果目录不存在，则返回非零 (a `1`)。你可以在你的程序中使用它。

```
echo -n "What directory?" 
read directory
if svn ls $REPO/$directory > /dev/null 2>&1
then
    echo "Directory $directory exists in $REPO"
else
    echo "ERROR: Directory $directory does not exist in $REPO"
fi 
```

如果这发生在服务器上，您可以使用`svnlook tree`. 这将比使用`svn ls`.

顺便说一句，当您在 Subversion 中备份时，您会意识到存储库目录结构与工作目录的布局非常非常不同。要备份 Subversion，建议您使用`svnadmin dump`或`svnadmin hotcopy`。您可以编写一个脚本来跟踪备份的 Subversion 的最后一个修订，然后只执行一个`svnadmin dump`较新的修订。这样，备份不会花费那么长时间，您仍然可以从所有转储中重建您的存储库。

# javascript - Chrome Countdown Extension

> ID：13664968
> 
> 赞同：0
> 
> 时间：2012-12-01T23:29:34.313
> 
> 标签：javascript, google-chrome

I have modified [this](http://tutorialzine.com/2011/12/countdown-jquery/) countdown script to countdown to 4:20pm everyday. I have attempted to create a Google Chrome app that displays the countdown. The javascript is supposed replace a paragraph tag with id of "note" with the time left. It works when I load the page in chrome, but does not work when I load the extension. Example, if I put:

```
<p id="note">asdf</a> 
```

I get just the text, "asdf", but when I open the html file I get the countdown.

Here is the manifest.json file:

```
{
  "name": "My First Extension",
  "version": "1.0",
  "manifest_version": 2,
  "description": "The first extension that I made.",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  }
} 
```

Here is the popup.html code:

```
<html>
<head>
    <title>4:20PM Countdown</title>

    <!-- Our CSS stylesheet file -->
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans+Condensed:300" />
    <link rel="stylesheet" href="http://treesmoke.com/cd/assets/css/styles.css" />
    <link rel="stylesheet" href="http://treesmoke.com/cd/assets/countdown/jquery.countdown.css" />
</head>

<body>
    <p id="note">asdf</p>
    <!-- JavaScript includes -->
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="http://treesmoke.com/cd/assets/countdown/jquery.countdown.js"></script>
    <script type="text/javascript" src="http://treesmoke.com/cd/assets/js/script.js"></script>
</body>
</html> 
```

[Here's](http://treesmoke.com/cd/popup.html) the popup.html page, showing that the script works.

Thanks guys, it isn't that big of a deal if I can't get it to work. I was just bored and decided to learn a little.

Edit: The main problem with my page was that I tried to load javascript and css from the internet when I had to do it locally. Now it works.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:01:44.350

You should read [this SO article](https://stackoverflow.com/questions/7781851/loading-external-javascript-in-google-chrome-extension) that explains the external js loading in extensions. It should fix your problem.

# c++ - 试图从 ifstream::read() 切换到 std::copy()

> ID：13664970
> 
> 赞同：-1
> 
> 时间：2012-12-01T23:47:24.470
> 
> 标签：c++

这是我到目前为止所尝试的，向量根本没有被填充：

```
#include <iostream>
#include <fstream>
#include <iterator>
#include <vector>

int main()
{
    std::ifstream file("E:\\test3.wav", std::ios::binary );

    if( file.fail() )
    {
        std::cout << "File does not exist or could not open file";
    }
    else
    {
        std::vector<short> buffer;

        //read
        std::copy(
                    std::istream_iterator<short>( file ),
                    std::istream_iterator<short>(),
                    std::back_inserter( buffer )
                    );

        //size outputs to 0
        std::cout << buffer.size();
    }

    return 0;
} 
```

但是，在子句`read()`内部使用以下代码可以正常工作：`else`

```
std::vector<short> buffer( 56 );

    //read
    file.read( (char *) &buffer[0], 56 );

    //outputs the whole file with all expected values showing.
    std::copy( 
                 buffer.begin(), 
                 buffer.end(), 
                 std::ostream_iterator< short >( std::cout, " " )
             ); 
```

`std::copy()`如第一个代码块所示，我是否缺少一些东西来填充向量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T23:51:24.563

`istream_iterator`在;上使用`operator >>`重载读取 `istream`它做格式化输入，而在这个例子中：

```
std::vector<short> buffer( 56 );

//read
file.read( (char *) &buffer[0], 56 ); 
```

您正在读取原始字节。（并且您没有填充 56 `short`s，您正在填充`56/sizeof(short)` `short`s。）

看起来你会更开心`istreambuf_iterator`。

# python - 在python中将不同长度的数组写入csv

> ID：13664976
> 
> 赞同：1
> 
> 时间：2012-12-01T23:48:39.860
> 
> 标签：python, csv

我正在尝试将大量字段从 Class 写入 csv。例如

```
for i in range(0,  len(t)):
    t.writerow([t[i].a,  t[i].b,  t[i].c,...] 
```

但是我有一个子类，我也想在这个列表的末尾写：

```
for i in range(0,  len(t)):
    t.writerow([  t[i].a,  t[i].b,  t[i].c,...  t[i].z[0].s,  t[i].z[1].s ...]) 
```

但是我不确定我是如何实现这一点的，子类的长度不同，那么我将如何确保每一行最后只附加相关数量的子类？[我在文档](http://docs.python.org/2/library/csv.html)中找不到任何关于它的内容。我是否从子类条目中创建一个字符串，然后在末尾粘贴一个条目？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:51:49.297

如果`z`只是一个 python `list`，只需将其附加到来自的字段列表`t`：

```
t.writerow([t[i].a, t[i].b, t[i].c, ...] + t[i].z) 
```

这将与`[one, list] + [another, list]`.

看起来您可以只循环`t`（列表）本身而不是使用`range()`：

```
for item in t:
    t.writerow([item.a, item.b, item.c, ...] + item.z) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T00:23:51.810

我认为这样写会起作用：

```
for i in range(len(t)):
    row = [[ e.a, e.b, e.c, ...] + [e.z[0], e.z[1], e.z[2], ...] for e in t[i]]
    t.writerow(row) 
```

# mysql - 以随机顺序按组随机排序

> ID：13664977
> 
> 赞同：3
> 
> 时间：2012-12-01T23:48:49.567
> 
> 标签：mysql, sql, random

我在 mysql 中有 5 个表，形成 4 个一对多关系。这些表是 last_name、parent、child、grandchild 和 city。姓有很多父母，父母有很多孩子，孩子有很多孙子，城市有很多孙子。

我需要以随机顺序获取孙子（在某个城市），但按 last_name 分组（即，在不同的行上但连续）但 last_name 以随机顺序分组。所以基本上。

```
Last_name     GrandChild
    B            3
    B            56
    B            9
    D            2
    D            67
    C            38
    C            20
    A            14 
```

到目前为止我有这个

```
 SELECT ln.id, gc.id
        FROM parent p
        INNER JOIN child ch
        ON ch.parent_id = p.id
        INNER JOIN grandchild gc
        ON ch.id = gc.child_id
        WHERE gc.city_id = 3 
```

这只是给了我需要的布局和关系，但我不确定从那里去哪里。这可能吗？如果是这样，我需要研究哪些命令/技术？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T00:06:04.330

我假设“分组”是指您希望每个孙子都在单独的行上，但在连续行上都具有相同的姓氏。

```
 SELECT ln.id, gc.id
    FROM parent p INNER JOIN
         child ch
         ON ch.parent_id = p.id INNER JOIN
         grandchild gc
         ON ch.id = gc.child_id inner join
         (select ln.*, rand() as rand
          from lastname ln
         ) ln
         on p.lastname = ln.lastname
    WHERE gc.city_id = 3
    order by ln.rand 
```

换句话说，这会为姓氏分配一个随机数，然后将其用于排序依据。顺便说一句，你的要求是模棱两可的。如果您希望按父级而不是姓氏排序，您可以在父级上执行子查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T23:51:37.733

```
 SELECT gc.lastname, group_concat(p.lastname) as grandchildren
    FROM parent p
    INNER JOIN child ch ON ch.parent_id = p.id
    INNER JOIN grandchild gc ON ch.id = gc.child_id
    WHERE gc.city_id = 3
    group by gc.lastname 
```

# statistics - How to compute word rank in perl

> ID：13664980
> 
> 赞同：1
> 
> 时间：2012-12-01T23:49:11.750
> 
> 标签：statistics, tokenize, ranking

I have a program where I read in a document and then put all the words in a hash delete repeats and add to frequency of that word.

So for example:

KEY: VALUE: dog 2 cat 4 rat 1

Now I was told I need to compute the rank of each word and print those stats. What does this mean exactly? What type of math do I need to be looking at? If someone could point me to a document talking about word rank that could help.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T01:06:39.720

If you delete repeats, you won't have a "frequency" or at least they'll all be at most 1, so don't do that. If you're talking about merging the count of repeats (I think you are) then I'd have to assume the rank you're referring to is the number of occurences for each word in the file.

If you're merging properly you'll have an array with key value pairs, sort on the value descending to rank.

BTW - this sounds like a homework question, if so - look for a quick sort to sort the array on the value. That's all the more I'll say. HTH.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:32:36.333

Ranking is simply ordering so that the most frequent word has rank 1\. Take a look at [Zipf's law](http://en.wikipedia.org/wiki/Zipf%27s_law) for how we expect words to behave with respect to their frequency rank in a suitably large corpus.

# android - Android AsyncTask 崩溃

> ID：13664986
> 
> 赞同：0
> 
> 时间：2012-12-01T23:49:50.393
> 
> 标签：android, multithreading, crash, android-asynctask

我正在扩展 AsyncTask 并在我的 doInBackground() 中使用 findViewById 获得一个按钮视图，当我调用 button.performClick() 时，我的应用程序崩溃了。

知道为什么吗？

这是日志猫：

```
E/AndroidRuntime(604): FATAL EXCEPTION: AsyncTask #2
E/AndroidRuntime(604): java.lang.RuntimeException: An error occured while executing doInBackground()
E/AndroidRuntime(604):  at android.os.AsyncTask$3.done(AsyncTask.java:278)
E/AndroidRuntime(604):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
E/AndroidRuntime(604):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
E/AndroidRuntime(604):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
E/AndroidRuntime(604):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
E/AndroidRuntime(604):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
E/AndroidRuntime(604):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
E/AndroidRuntime(604):  at java.lang.Thread.run(Thread.java:856)
E/AndroidRuntime(604): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
E/AndroidRuntime(604):  at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4039)
E/AndroidRuntime(604):  at android.view.ViewRootImpl.playSoundEffect(ViewRootImpl.java:3610)
E/AndroidRuntime(604):  at android.view.View.playSoundEffect(View.java:13103)
E/AndroidRuntime(604):  at android.view.View.performClick(View.java:3510) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T23:57:15.520

> 我正在扩展 AsyncTask 并在我的 doInBackground() 中使用 findViewById 获得一个按钮视图，当我调用 button.performClick() 时，我的应用程序崩溃了。

在 AsyncTasks 中，您只能使用 UI 元素，例如 Buttons、in`onProgressUpdate()`或`onPostExecute()`其他有权访问 UI 线程的方法。只需将调用的代码移动`button`到可接受的方法中即可。

# c - 一元 & 运算符的结果应用于函数

> ID：13664996
> 
> 赞同：0
> 
> 时间：2012-12-01T23:51:31.767
> 
> 标签：c, gcc, function-pointers, c99, unary-operator

C99 6.3.2.1/4

> 函数指示符是具有函数类型的表达式。除非它是 sizeof 运算符或**一元 & 运算符**的操作数，否则“函数返回类型”类型的函数指示符将转换为“指向函数返回类型的指针”类型的表达式。

据我了解，这表明除非将`sizeof`运算符和一元运算`&`符应用于函数；不会发生函数到指针的转换。但据我所见，

```
int (*p)(int) = &foo; 
```

或者，

```
int (*p)(int) = foo; 
```

两者似乎都有效。这表明两者`&foo`和`foo`是等价的。那么，如果一元运算`&`符具有如上所示的效果，它会在哪里产生影响呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T23:56:57.847

你以某种方式理解了它。相反，*除非*在or下使用函数标识符，否则*函数*类型会自动衰减为*函数指针*类型。*`sizeof``&`*

 *同样，在`sizeof`和`&`函数类型下*不会*衰减为指针。在所有其他情况下，它会衰减为指针类型。（这反过来又导致应用`sizeof`到函数是非法的。）

C 中函数类型的行为反映了数组类型的众所周知的行为：除非您在`sizeof`or下使用它们，否则`&`它们会立即隐式转换为指针类型。

这意味着在您的示例表达式`&foo`中`foo`是等价的。在第一种情况下，指针是由 的显式应用产生的`&`。在第二种情况下，指针是由隐含的“函数类型衰减”特性产生的。在这两种情况下，指针值是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T23:53:59.857

在

```
int (*p)(int) = foo; 
```

自动转换为函数指针，因此它等价于

```
int (*p)(int) = &foo; 
```

其中转换为函数指针不是自动的，而是由`&`操作员完成的。

通常转换到的隐式指针`foo`没有可以获取的地址。如果它的地址可以被取走，它就不会是 的地址`foo`。*