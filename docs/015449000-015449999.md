# StackOverflow 问答 15449000-15449999

# php - CodeIgniter URI 路由和空段

> ID：15449000
> 
> 赞同：3
> 
> 时间：2013-03-16T12:00:02.817
> 
> 标签：php, codeigniter, url-routing

我现在像这样在我的 codeigniter 配置中设置 uri 路由

```
$route['user/:any'] = "users"; 
```

像这样的请求一切正常

```
http://localhost/user/1 
```

但如果我尝试请求

```
http://localhost/user/ 
```

所以uri段是空的，我收到错误

```
404 Page Not Found
The page you requested was not found. 
```

如何避免这种情况？我试过用

```
$user = $this->uri->segment(2);
if (!isset($user)) redirect('/', 'refresh'); 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T12:10:53.553

在你的控制器中构建你的函数而不是这个：

```
public function index()
{
... 
```

尝试这样的事情：

```
public function index($slug = '')
{

if ($slug = '') {
   // redirect code here
}
else {
   // if there is something in $slug then load this code
} 
```

也许你的路线应该是这样的：

```
$route['user'] = 'users';
$route['user/(:any)'] = 'users/index/$1'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T12:06:43.397

您可以添加另一条路线，例如：

```
$route['user'] = "users" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T12:09:45.713

我认为您需要修复语法，请尝试：

```
$route['user/(:any)'] = "users"; 
```

您需要在通配符周围加上括号`(:any)`。

参考：[http](http://ellislab.com/codeigniter/user-guide/general/routing.html) ://ellislab.com/codeigniter/user-guide/general/routing.html 查看示例

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T12:06:13.847

尝试

```
$route['user:any'] = "users"; 
```

# mysql - mysql set filter 选择不过滤

> ID：15449003
> 
> 赞同：1
> 
> 时间：2013-03-16T12:00:09.820
> 
> 标签：mysql, sql, select, group-by

我有一张这样的桌子：

```
id  name  salary  year

1   A     100     2013
2   B      88     2012
3   C      95     2010
4   A      45     2012
5   B      87     2011
6   C      98     2011
7   A      54     2009 
```

我想选择所有记录，但只为每个名字显示过去两年（2013 年、2012 年）的工资总和？但是以下查询将给出所有年份的总和。

```
select name, sum(salary) as total from table group by name; 
```

输出应该是：

```
name  total
A     145
B     88
C     0 
```

注意：我知道使用 where 子句会得到，但我希望显示所有名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:01:29.343

我想知道你为什么不想使用`WHERE`从句。无论如何，MySQL 支持内联`IF`语句。

```
SELECT  Name,
        SUM(IF(year IN (2013,2012), salary, 0)) total
FROM    tableName
GROUP   BY Name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/7e645/2)

输出

```
╔══════╦═══════╗
║ NAME ║ TOTAL ║
╠══════╬═══════╣
║ A    ║   145 ║
║ B    ║    88 ║
║ C    ║     0 ║
╚══════╩═══════╝ 
```

* * *

如果你想对 RDBMS 更友好，你可以使用`CASE`

```
SELECT  Name,
        SUM(CASE WHEN year IN (2013,2012) THEN salary ELSE 0 END) total
FROM    tableName
GROUP   BY Name 
```

# php - 清理 DooPHP 产生的数组

> ID：15449005
> 
> 赞同：1
> 
> 时间：2013-03-16T12:00:20.633
> 
> 标签：php, doophp

我将 DooPHP 用于我的 Json 服务，除了 1 个问题外一切正常： DooPHP 的 Mysql Orm 产生了不干净的结果（我尝试了所有配置）。

我有一个模型：

```
public $id;
public $name;
public $content;
public $image_small;
public $image_large;
public $category_id;
public $orderday;
public $creat_time;
public $_table = 'recipe';
public $_primarykey = 'id';
public $_fields = array('id','name','content','image_small','image_large','category_id','orderday','creat_time'); 
```

我这样写查询：

```
$food = Doo::db()->find('Recipe',array('select' => 'id, name, image_small, image_large,category_id')); 
```

但是数组中的结果：（SELECT id, name, image_small, image_large,category_id FROM recipe）

```
 Array
 (
  [0] => Recipe Object
    (
        [id] => 1
        [name] =>  Chicken
        [content] => 
        [image_small] => image_small/0872c3146bc78b74a006b41353aab13c.jpg
        [image_large] => image_large/0872c3146bc78b74a006b41353aab13c.jpg
        [category_id] => 1
        [orderday] => 
        [creat_time] => 
        [_table] => recipe
        [_primarykey] => id
        [_fields] => Array
            (
                [0] => id
                [1] => name
                [2] => content
                [3] => image_small
                [4] => image_large
                [5] => category_id
                [6] => orderday
                [7] => creat_time
            )

    )

[1] => Recipe Object
    (
        [id] => 3
        [name] => Bak Kut Teh 2  
        [content] => 
        [image_small] => 
        [image_large] => 
        [category_id] => 4
        [orderday] => 
        [creat_time] => 
        [_table] => recipe
        [_primarykey] => id
        [_fields] => Array
            (
                [0] => id
                [1] => name
                [2] => content
                [3] => image_small
                [4] => image_large
                [5] => category_id
                [6] => orderday
                [7] => creat_time
            )

    )

 ) 
```

我想删除所有与速度无关的数据（_fields，_table..），并且不选择：content，creat_time ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:42:24.580

方法`find`返回一个模型对象*或查询结果的关联数组*。尝试这个：

```
$food = Doo::db()->find('Recipe',array(
'select' => 'id, name, image_small, image_large, category_id',
'asArray' => TRUE)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T08:41:13.557

另一种方法是将此函数添加到您的 DooController.php

```
 /**
     * remove unused parameters from query object 
     * @param object $obj models object
     * 
     */
 public function sanitizeQuery($obj){

 foreach($obj as $k){

unset($k->_fields);

unset($k->_primarykey);

unset($k->_table);

}
return $obj;
     } 
```

然后在检索“集合”后在您的控制器操作中执行以下操作：

```
$food = Doo::db()->find();
$this->data['food'] = $this->sanitizeQuery($food); 
```

# libgdx - libgdx 中的启动应用程序异常

> ID：15449006
> 
> 赞同：0
> 
> 时间：2013-03-16T12:00:26.490
> 
> 标签：libgdx

```
 LwjglApplicationConfiguration cfg = new LwjglApplicationConfiguration();
    cfg.title = "my-gdx-game";
    cfg.useGL20 = false;
    cfg.width = 480;
    cfg.height = 320;

    new LwjglApplication(new MyGdxGame(), cfg); 
```

我在桌面启动器类中使用此代码，但我得到 GdxRuntimeException：视频驱动程序不支持 OpenGL。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:36:44.007

可能是因为：

```
 OpenGL is not supported by your video driver 
```

桌面上的 Libgdx 要求桌面显卡至少支持 OpenGL 1.5（以模拟 OpenGL ES 1.x）。OpenGL 应该包含在您的操作系统的显卡驱动程序中（您应该在问题中包含有关您的平台的详细信息）。有关一些提示，请参阅[OpenGL 入门 Wiki](http://www.opengl.org/wiki/Getting_Started#Downloading_OpenGL)。

另请参阅[线程“LWJGL 应用程序”中的 libGDX 异常](https://stackoverflow.com/questions/10972688/libgdx-exception-in-thread-lwjgl-application)

# php - php sql虽然很慢

> ID：15449009
> 
> 赞同：0
> 
> 时间：2013-03-16T12:00:56.177
> 
> 标签：php, performance

我有以下代码，它应该为我工作，除了在查询完成之前需要很长时间之外？我怎样才能让它更快？有 2 条记录似乎需要 1 到 2 分钟。

```
$query2 = "SELECT COUNT(*) FROM preordertablet1"; 
$result = mysql_query($query2) or die(mysql_error()); 
$count = mysql_fetch_row($result); 
//$result=mysql_query($query) or die ("Gegevens niet kunnen ophalen uit preorder tabel. Foutmelding: ".mysql_error());
$c=0;
while ($c<=$count) 
    {
    $query="SELECT * FROM preordertablet1 WHERE ID = '$c'";
    $result=mysql_query($query) or die ("gegevens niet geladen uit de preordertabel, fout: ".mysql_error());
    while ($row=mysql_fetch_array($result)) 
        {
        $ID1=$ID1+1;
        $c++;
        $naam=$row['naam'];
        $Postcodehuisnummer=$row['Postcodehuisnummer'];
        $datum=$row['datum'];
        $dagen=$row['dagen'];
        $productid=$row['productid'];
        $subid=$row['subid'];
        //$ID2=$ID1;
        //gegevens in database plaatsen
        $result=mysql_query("INSERT INTO huur (ID, ID2, status, naam, Postcodehuisnummer, datum, dagen, productid, subid) VALUES ('$ID1', '$ID2', '1', '$naam', '$postcodehuisnummer', '$huurdatum', '$aantaldagen', '$productid', '$subid')") or die ("Fout: ".mysql_error());
        echo 'preorder fiets toegevoegd met ID2: ', $ID2,'<br>';
        //$ID1=$ID1+1;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:09:23.200

该`$result`变量被重新用于插入操作。然后`$result`在 while 循环中测试该值。

```
 $result_insert = mysql_query("INSERT INTO huur etc etc") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:22:28.607

如果我们假设这是您正在运行的所有代码，那么第一个查询几乎没有用，因为您想要解析所有行，无论有多少。所以你可以一起跳过前三行。

然后是 $c 变量，除非您需要知道通过它解析的行数也可以被废弃。

然后是第一个循环内的查询，“WHERE ID = '$c'”部分很可能是导致您只获得一个插入行的原因。如果 ID 列是 auto_increment 主键，则插入的第一行的值至少为 1，但您所做的第一次检查是 ID = 0，它不返回任何内容。因此，具有两行的表的最后一次迭代将用于 ID 1，但不能保证有任何具有该 ID 的行，但在您的情况下，有一个，我猜这是您在其中看到的行你的结果。

如果没有关于 ID1 和 ID2 等列的更多信息，我不会尝试对第二个 while 循环提出更正建议。也许您可以发布表定义（创建表结构）并进一步解释一下？

正如其他人所说，不要使用 mysql_ 函数，这些函数可以随时从 PHP 中消失，因为它们已被弃用。

当然，所有这些都是基于对表格的猜测，因为您尚未发布表格布局或您想要实现的目标。

为了让您上路，这里有一个更简单的代码片段，它不完整，但应该会给您一些想法，[请在此处阅读有关 PDO 的信息](http://www.php.net/manual/en/book.pdo.php)

```
$pdo = new PDO(<insert your connection information here>);
$selectStmt = $pdo->query('SELECT * FROM preordertablet1');
$insertStmt = $pdo->prepare("INSERT INTO huur
    (ID, ID2, status, naam, Postcodehuisnummer, datum, dagen, productid, subid)
  VALUES
    (:ID1, :ID2, '1', :naam, :postcode, :datum, :dagen, :productid, :subid)");
$ID1 = 0; // Or whatever starting value you're working from.

while ($row = $selectStmt->fetch(PDO::FETCH_ASSOC)) {
    $ID1++;
    $values = array("ID1" => $ID1, "ID2" => NULL, "naam" => $row['naam'], etc...
    $insertStmt->execute($values);
} 
```

# java - java中的定时器退出条件

> ID：15449012
> 
> 赞同：3
> 
> 时间：2013-03-16T12:01:28.983
> 
> 标签：java, multithreading, swing

```
 String move=jTextField1.getText();             
                 i=Integer.parseInt(move);
                 timer = new Timer(1000,new ActionListener(){
                    public void actionPerformed(ActionEvent e)
                    {
                        i--;
                        if(i<=0)
                        {
                                if(move.equals("0"))
                                {
                                    Thread th=new Thread(new DetectImage());
                                    th.start();
                                   SwingUtilities.invokeLater(new Runnable(){
                            @Override
                            public void run() {
                                new TrafficMainGUI(storeValue);
                            }
                                   });

                                }

        timer.stop();
                        }
                        }
                        jTextField1.setText(""+i);
                    }
                 });
                    timer.start();

           move=""+i;

//Thread th in DetectImage class
 public void run()
    {
        while(stay<20)
        {
            try {
                stay++;
    //few contions
                Thread.sleep(1000);
            }
       }
  } 
```

//EveryThing 与线程一起工作正常，但是当我使用 SwingUtiities.invokeLater() 调用相同的类时，该代码用于获取无限条件。这不会将其重定向到类TrafficMainGUI。是否有其他方法可以实现这种模型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T12:30:32.083

1.  `jTextField1.setText(""+i)`; 必须`invokeLater`通过从`util.Timer`

2.  改用[摇摆](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)计时器

3.  `if(move.equals("0")) {`是关于动画，然后`Swing Timer`专门使用

# maxima - wxMaxima 比较逻辑表达式

> ID：15449017
> 
> 赞同：1
> 
> 时间：2013-03-16T12:02:10.147
> 
> 标签：maxima

我是 wxMaxima 的新手，不知道如何比较两个逻辑表达式。例如：

```
test1:(A and B) or C;
test2:(A or C) and (B or C);

is(test1=test2); 
```

应该

```
true 
```

但结果是

```
false 
```

我在这里做错了什么？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:42:24.007

您可以使用[逻辑代数包](http://beshenov.ru/maxima/logic/)。

```
load("logic.mac");
test1:(A and B) or C;
test2:(A or C) and (B or C);
logic_equiv(test2, test1 );
(%o20)                               true 
```

# python - BeautifulSoup - 不是预期的输出

> ID：15449019
> 
> 赞同：1
> 
> 时间：2013-03-16T12:02:24.227
> 
> 标签：python, beautifulsoup

我已经这样做了：

```
>>> from bs4 import BeautifulSoup; import urllib2
>>> data = urllib2.urlopen('http://api.stackexchange.com/docs/').read()
>>> soup = BeautifulSoup(data.replace('""','"')) # there are errors on page
>>> soup.prettify()
<!DOCTYPE HTML>
<html lang="en">
............... # cut short
</html> 
```

`data`似乎没问题，正如预期的那样。问题出在`soup`.

`soup.prettify()`没有输出包含数据中所有内容的字符串。似乎`soup`没有解析（或不管它做什么）整个字符串。

如果您检查网页的来源和 的输出`soup.prettify()`，您会发现它们不匹配。
这里发生了什么，为什么？

[感觉这篇文章我不是很清楚，如果有，请发表评论。我会尝试详细说明。否则请随意删除这句话...]

* * *

**更新**
在回复 FakeRainBrigand 的评论时，我想说即使使用浏览器保存 html，问题仍然存在......所以，即使这样也有同样的问题：

```
 data = open('Stack Exchange API.htm').read() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:14:45.507

除了 Python 中的默认解析器之外，您还没有安装任何其他 HTML 解析器（这真的不是很好）。

```
pip install lxml 
```

并重新加载所有内容，BeautifulSoup 将自动获取 lxml 并使用它来解析 HTML。这对我有用，没有引号重写（这是正在进行中的标志）。

（HTML 可能以某种奇怪的方式被破坏，Python 的 HTML 解析器并不擅长理解这类事情，即使有 bs4 的帮助。）

# java - 在关闭 JFrame 之前显示提示

> ID：15449022
> 
> 赞同：6
> 
> 时间：2013-03-16T12:02:47.790
> 
> 标签：java, swing

我`windowClosing`用来在关闭特定的 JFrame 之前进行确认。

在关闭之前，我会收到一个确认对话框，但问题是即使我单击“否”按钮它也会关闭。请问有什么帮助吗？

```
addWindowListener(new WindowAdapter() {

  @Override
  public void windowClosing(WindowEvent we)
  { 
    String ObjButtons[] = {"Yes","No"};
    int PromptResult = JOptionPane.showOptionDialog(null, 
        "Are you sure you want to exit?", "Online Examination System", 
        JOptionPane.DEFAULT_OPTION, JOptionPane.WARNING_MESSAGE, null, 
        ObjButtons,ObjButtons[1]);
    if(PromptResult==0)
    {
      System.exit(0);          
    }
  }
}); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-16T12:06:45.367

您的 JFrame 的默认关闭操作设置为什么？您需要确保将其设置为：`jFrame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-16T12:11:30.883

尝试这个

```
this.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
addWindowListener(new WindowAdapter() {
    @Override
    public void windowClosing(WindowEvent we)
    { 
        String ObjButtons[] = {"Yes","No"};
        int PromptResult = JOptionPane.showOptionDialog(null,"Are you sure you want to exit?","Online Examination System",JOptionPane.DEFAULT_OPTION,JOptionPane.WARNING_MESSAGE,null,ObjButtons,ObjButtons[1]);
        if(PromptResult==JOptionPane.YES_OPTION)
        {
            System.exit(0);
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T12:06:38.657

您可以将 JFrame 的默认关闭选项`DISPOSE_ON_CLOSE`设置为`EXIT_ON_CLOSE`. 在这种情况下，它将解决您的查询，例如：-

```
frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-16T12:07:03.737

把它放在帧初始化上

```
frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE); 
```

# sublimetext2 - Sublime Text 2 水平滚动选择文本

> ID：15449023
> 
> 赞同：0
> 
> 时间：2013-03-16T12:02:50.830
> 
> 标签：sublimetext2

每当我尝试选择更长的文本行并且我需要向右滚动以选择它时，Sublime 文本都会向左滚动。我尝试删除所有插件，但它看起来像是默认的崇高文本行为。这是否发生在其他所有人身上，可以改变吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-18T15:30:09.230

这不会发生在我身上。选择和滚动让我在右边。您也可以将光标放在行首，按住 shift 并按 end 键。您应该在右侧，突出显示该行。

额外：如果您想突出显示一条线并保持在左侧，请三次单击该线。

# javascript - 带有 jquery mobile 的动态列表视图

> ID：15449028
> 
> 赞同：1
> 
> 时间：2013-03-16T12:03:56.087
> 
> 标签：javascript, listview, jquery-mobile

我在刷新 jquery 移动列表视图时遇到问题。

此代码工作正常：

```
$(document).bind( "pagebeforechange", function( e, data ) {

   // Generating a dynamic list
       for(var i=0;i<list.length;i++){
           var link = '<li><a href="#">'+list[i].name+'</a></li>';
           $("#listview").append(link);
       }

   // Listview refresh
   $("#myPage").on('pagebeforeshow', function() {
       try {
           $("#listview").listview('refresh');
       } catch (e) {
           $("#listview").listview();
       }
   });

   $.mobile.changePage($(#myPage), {
        transition:"slide",
        dataUrl:url,
        allowSamePageTransition:true,
        reverse:reverse
    });
    e.preventDefault();

}); 
```

但是，我需要动态添加一个图标来列出用户收藏夹中的视图项目。我使用一个函数，它通过对本地数据库的请求返回一个数组。

```
$(document).bind( "pagebeforechange", function( e, data ) {

  getFavs(function(favsArray){       

     // Generating dynamic list with image
       for(var i=0;i<list.length;i++){
           favImg = "";
           if(favsArray.indexOf(list[i].id) !== -1){
               favImg = '<img src="images/star-36-black.png" class="ui-li-icon" />';
           }               
           var link = '<li><a href="#">'+favImg+list[i].name+'</a></li>';
           $("#listview").append(link);
       }

       // Listview refresh
       $("#myPage").on('pagebeforeshow', function() {
          try {
              $("#listview").listview('refresh');
          } catch (e) {
              $("#listview").listview();
          }
       });

  });

   $.mobile.changePage($(#myPage), {
        transition:"slide",
        dataUrl:url,
        allowSamePageTransition:true,
        reverse:reverse
    });
    e.preventDefault();

}); 
```

在第二种情况下，`Listview()`不适用。我不明白为什么第二个选项如此不同以至于它破坏了`Listview()`......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:53:23.593

[我在这里](https://stackoverflow.com/questions/12574585/jquery-mobile-listviewrefresh-doesnt-complete-enhancement?rq=1)找到了类似的帖子，尽管解决方案有所不同。在第二个选项中，我只需要删除绑定到`pagebeforshow`：

```
 // Listview refresh
      try {
          $("#listview").listview('refresh');
      } catch (e) {
          $("#listview").listview();
      } 
```

但是，我还不明白为什么`pagebeforeshow`在第一个选项中需要绑定到，而它破坏了第二个选项中的代码......

# windows - 检查进程是否存在的批处理程序

> ID：15449034
> 
> 赞同：33
> 
> 时间：2013-03-16T12:04:48.457
> 
> 标签：windows, batch-file, command, cmd

我想要一个批处理程序，它将检查进程是否`notepad.exe`存在。

**如果** `notepad.exe`存在，它将结束该过程，

**否则**批处理程序将自行关闭。

这是我所做的：

```
@echo off
tasklist /fi "imagename eq notepad.exe" > nul
if errorlevel 1 taskkill /f /im "notepad.exe"
exit 
```

但它不起作用。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-03-16T12:38:07.617

`TASKLIST`不设置错误级别。

```
echo off
tasklist /fi "imagename eq notepad.exe" |find ":" > nul
if errorlevel 1 taskkill /f /im "notepad.exe"
exit 
```

应该完成这项工作，因为“：”`TASKLIST`仅在未找到任务时才应出现在输出中，因此`FIND`将错误级别设置为`0`for`not found`和`1`for`found`

尽管如此，

taskkill /f /im "notepad.exe"

如果存在记事本任务，它将杀死它 - 如果不存在记事本任务，它什么也做不了，所以你真的不需要测试 - 除非你想做其他事情......也许

```
echo off
tasklist /fi "imagename eq notepad.exe" |find ":" > nul
if errorlevel 1 taskkill /f /im "notepad.exe"&exit 
```

这似乎按照您的要求进行 - 如果记事本进程存在，则终止它，然后退出 - 否则继续批处理

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-06-27T08:56:54.263

这是**一个单行解决方案**。

只有当进程真正运行时它才会运行 taskkill，否则它只会显示它没有运行。

```
tasklist | find /i "notepad.exe" && taskkill /im notepad.exe /F || echo process "notepad.exe" not running. 
```

这是进程运行时的输出：

```
notepad.exe           1960 Console                   0    112,260 K
SUCCESS: The process "notepad.exe" with PID 1960 has been terminated. 
```

这是未运行时的输出：

```
process "notepad.exe" not running. 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-16T12:38:48.393

`TASKLIST`没有设置您可以在批处理文件中签入的退出代码。检查退出代码的一种解决方法是解析其标准输出（您目前正在重定向到`NUL`）。显然，如果找到该进程，`TASKLIST`将显示其详细信息，其中也包括图像名称。因此，您可以只使用`FIND`or`FINDSTR`来检查`TASKLIST`的输出是否包含您在请求中指定的名称。如果搜索不成功，两者都`FIND`设置`FINDSTR`一个非空退出代码。所以，这会起作用：

```
@echo off
tasklist /fi "imagename eq notepad.exe" **| find /i "notepad.exe"** > nul
if **not** errorlevel 1 (taskkill /f /im "notepad.exe") else (
  *specific commands to perform if the process was not found*
)
exit 
```

还有一个完全不涉及的替代方案`TASKLIST`。与, 不同`TASKLIST`，`TASKKILL`确实设置了退出代码。特别是，如果它无法终止进程，因为它根本不存在，它将设置退出代码 128。您可以检查该代码以执行您可能需要执行的特定操作，以防指定的进程不存在：

```
@echo off
**taskkill /f /im "notepad.exe"** > nul
if errorlevel 128 (
  *specific commands to perform if the process
  was not terminated because it was not found*
)
exit 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-04T10:37:46.593

这就是为什么它不起作用，因为您编写了一些不正确的代码，这就是为什么它总是退出并且脚本执行器会将其读取为不可操作的批处理文件，从而阻止它退出和停止，所以它必须是

```
tasklist /fi "IMAGENAME eq Notepad.exe" 2>NUL | find /I /N "Notepad.exe">NUL
if "%ERRORLEVEL%"=="0" (
msg * Program is running
goto Exit
)
else if "%ERRORLEVEL%"=="1" (
msg * Program is not running
goto Exit
) 
```

而不是

```
@echo off
tasklist /fi "imagename eq notepad.exe" > nul
if errorlevel 1 taskkill /f /im "notepad.exe"
exit 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-08-01T11:50:42.403

试试这个：

```
@echo off
set run=
tasklist /fi "imagename eq notepad.exe" | find ":" > nul
if errorlevel 1 set run=yes
if "%run%"=="yes" echo notepad is running
if "%run%"=="" echo notepad is not running
pause 
```

# python - 找不到我的 Python 3.3 语法错误

> ID：15449035
> 
> 赞同：1
> 
> 时间：2013-03-16T12:04:48.893
> 
> 标签：python, python-3.x

我收到以下错误：

```
 File "foo.py", line 6
    print "This implementation requires the numpy module."
                                                         ^
SyntaxError: invalid syntax 
```

在此 Python 代码中：

```
#!/usr/bin/python

try:
    import numpy
except:
    print "This implementation requires the numpy module."
    exit(0)

###############################################################################

if __name__ == "__main__":
    R = [
         [1,2,3],
         [4,5,6]
        ] 
```

怎么了？

**编辑：**我使用 Python 3.3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T12:12:31.963

这应该是：

```
print("....") 
```

从 python 3 开始，`print`是一个函数，而不是一个特殊的 case 语句。

# php - 从 xml (maps api) 获取数据 (zip code) 并创建 url

> ID：15449038
> 
> 赞同：0
> 
> 时间：2013-03-16T12:05:19.207
> 
> 标签：php, javascript, xml, google-maps

我创建了一个获取 gpslocation 并创建 url 的 android 应用程序： [https ://maps.googleapis.com/maps/api/geocode/xml?latlng=00.00,00.00&sensor=true](https://maps.googleapis.com/maps/api/geocode/xml?latlng=00.00,00.00&sensor=true)

示例： [https ://maps.googleapis.com/maps/api/geocode/xml?latlng=42.120636,-72.568731&sensor=true](https://maps.googleapis.com/maps/api/geocode/xml?latlng=42.120636,-72.568731&sensor=true)

这将返回（仅一部分）：

```
<GeocodeResponse>
    <status>OK</status>
    <result>
        <type>street_address</type>
        <formatted_address>
            17 Dorchester Street, Springfield, Massachusetts 01109, United States
        </formatted_address>
        <address_component>
            <long_name>17</long_name>
            <short_name>17</short_name>
            <type> ... 
```

我对这部分感兴趣：`17 Dorchester Street, Springfield, Massachusetts 01109, United States`。

我想创建一个包含邮政编码“01109”的新网址，例如 [http://mysite.com?process=01109](http://mysite.com?process=01109)并打开此站点。

谁能帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:46:01.593

您可以使用 simplexml 和 xpath 访问 postal_code short_name。这是一个工作示例：

```
$location = simplexml_load_file('https://maps.googleapis.com/maps/api/geocode/xml?latlng=42.120636,-72.568731&sensor=true');

$postal_code_search = 
$location->xpath('//result[type="street_address"]/address_component[type="postal_code"]/short_name');
$postal_code = (string) $postal_code_search[0]; 
```

请注意，您必须将值显式转换为字符串，因为 simplexml 将在打印时将数组或对象返回给变量而不是字符串（这在测试时可能会造成混淆）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:48:43.743

要从 googleapis 地理编码响应中获取特定数据，您不仅需要通过元素的名称来定位元素，还需要通过其内容来定位元素。

这可以通过 Xpath 轻松完成。幸运的是，PHP 中的 SimpleXML 扩展对读取这种常见的格式化 XML 文档有很好的支持。

首先是 Xpath：

```
<GeocodeResponse>
    <result>
            <type>street_address</type> 
```

`<result>`元素是具有`<type>`节点值的子元素的元素`street_address`。在 Xpath 中，这表示为：

```
/*/result/type[. = "street_address"]/.. 
```

它对邮政编码的工作方式类似。它是`<address_component>`前一个`<result>`节点的子节点，它有一个`<type>`节点值`postal_code`和您想要的元素的子节点：

```
address_component/type[. = "postal_code"]/.. 
```

到目前为止，xpaths。运行它所需要做的就是加载 XML 文档、执行路径并读出您感兴趣的值：

```
$xml = simplexml_load_file($xmlFile);

list($result) = $xml->xpath('/*/result/type[. = "street_address"]/..');
list($postal_code) = $result->xpath('address_component/type[. = "postal_code"]/..');

echo $result->formatted_address, "\nZIP: ", $postal_code->long_name, "\n"; 
```

使用您的问题中链接的 XML 文档，这将创建以下输出：

```
17 Dorchester Street, Springfield, MA 01109, USA
ZIP: 01109 
```

我希望这是有帮助的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T12:26:40.547

因此，您链接到的 XML 实际上包含邮政编码。这是一个`address_component`有孩子`type`的价值`postal_code`。恕我直言，最简单的方法是 XPath：

```
$d = <<<HER
<GeocodeResponse>
  <!-- yada... --> 
  <result>
    <!-- yada --> 
    <address_component>
        <long_name>01109</long_name>
        <short_name>01109</short_name>
        <type>postal_code</type>
    </address_component>
    <!-- yada --> 
   </result>
   <!-- yoda --> 
</GeocodeResponse>
HER;

$doc = new DomDocument();
$doc->loadXML($d);
$path = new DomXPath($doc);
/*
the query translates->
   // = all nodes
   address_component = which have the type of 'address_component'
   type = the children of the address_component with the type 'type'   
   [text() = "postal_code"] = but only the type's with the value 'postal_code'
   /preceding-sibling = all nodes before this one in the same parent
   ::*[1] = the one most adjacent of the sibling
*/

$p = $path->query(
  '//address_component/type[text() = "postal_code"]/preceding-sibling::*[1]');
$newUrl = 'http://mysite.com?process='.$p->item(0)->nodeValue;
print($newUrl); 
```

# python - 如何制作动画地理热图？

> ID：15449045
> 
> 赞同：-1
> 
> 时间：2013-03-16T12:05:58.503
> 
> 标签：python, matplotlib, matplotlib-basemap

我有一个分布在 24 小时内的坐标和时间戳列表。我想创建一个动画热图，它将全天显示该地图。

我已经尝试查看[Basemap 的示例库](http://matplotlib.org/basemap/users/examples.html)，但代码似乎有点过于复杂，以至于我无法想出基本的热图。具体我不明白的是函数的`data`参数[`contourf()`](http://matplotlib.org/basemap/api/basemap_api.html#mpl_toolkits.basemap.Basemap.contourf)。

我该如何进行？

PS：样本数据：

```
[{'date': datetime.datetime(2013, 3, 12, 6, 13, 0), 'loc': (46.448269, 16.363296)},
 {'date': datetime.datetime(2013, 3, 12, 6, 13, 1), 'loc': (37.702152, -120.127964)},
 {'date': datetime.datetime(2013, 3, 12, 6, 13, 1), 'loc': (14.484318, 121.037639)},
 ...] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:19:44.180

`data`是您希望轮廓表示的数据。要绘制等高线，您需要将一个值`z`与地图上的每个 (x, y) 点相关联。 `data`是 z。例如，如果你想制作温度的等高线图，`data`那就是温度。

鉴于您的样本数据，我不明白您要绘制什么。您有时间戳和位置，但没有与这些值关联的数据。仅用它来绘制轮廓是没有意义的（除非您每个位置只有一个时间戳，并且您想绘制一张以时间为 z 值的静态地图）。您不能只拥有“全天的动画等高线图”，您需要全天拥有*某物*（即其他数量）的动画等高线图。您希望地图上显示的值代表什么？你的因变量是什么？

如果您希望变量是“这些坐标处的数据点数”，那么您应该首先计算它。也就是说，按坐标/时间对数据进行分组，并计算每个地点/时间的数据点数。您想要类似于以下表格的表格：

```
X    Y   Time   Points
-10  2   10:30  4
-10  2   11:00  10
4    -10 10:30  6
4    -10 11:00  8 
```

然后，您可以生成一系列等高线图，其中您的`data`变量取自“点”列。我建议您查看[pandas](http://pandas.pydata.org/)库，了解切片和聚合数据的便捷方法（例如，按坐标和/或时间分组）。

另一种可能性是使用[这里](https://stackoverflow.com/questions/6387819/generate-a-heatmap-in-matplotlib-using-a-scatter-data-set)描述的技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:24:19.460

正如文档所建议的那样，请尝试阅读`matplotlib.pyplot.contourf`有关数据参数的详细信息的说明。代码看起来很复杂，因为它正在从网络加载地理数据。并画出大陆、海洋和经线。

我对 Basemap 的使用有点生疏，但核心函数调用（给出页面中的示例）是：

```
# create the map, i.e. the plot surface as a map projection given
# the type of projection you need and the point you want as center of the map
map = Basemap(projection='ortho', lat_0=45, lon_0=-100, resolution='l')

# draw the continents lines
map.drawcountries(linewidth=0.25)

# draw the contour plot
cs = map.contour(x, y, data, 15, linewidths=1.5) 
```

猜猜它不会比这更容易。如果您需要更详细的解决方案，请分享您的问题的详细信息、您拥有的数据结构以及您尝试过的一些代码。

# c# - 如何从 json 中排除 xml

> ID：15449046
> 
> 赞同：3
> 
> 时间：2013-03-16T12:06:02.697
> 
> 标签：c#, xml, json.net

我正在使用以下代码使用 Web 服务检索 json 格式的数据，但同时获得 XML 和 json 格式的结果。下面是代码

```
[WebMethod(Description = "Get Employees")]
    public string getEmployees()
    {

        //List<employee> l=new List<employee>();
        //l.Add(new employee{ID=1,name="sreekanth"});
        //l.Add(new employee{ID=2,name="pradeep"});
        //l.Add(new employee{ID=3,name="swaroop"});
        //l.Add(new employee{ID=4,name="nagman"});
        //l.Add(new employee{ID=5,name="chethan"});
        //return l;
        DataTable table = new DataTable();
        table.Columns.Add("userid");
        table.Columns.Add("phone");
        table.Columns.Add("email");

        table.Rows.Add(new[] { "1", "9999999", "test@test.com" });
        table.Rows.Add(new[] { "2", "1234567", "foo@test.com" });
        table.Rows.Add(new[] { "3", "7654321", "bar@test.com" });

        var query = from row in table.AsEnumerable()
                    select new
                    {
                        userid = (string)row["userid"],
                        phone = (string)row["phone"],
                        email = (string)row["email"]
                    };

        JObject o = JObject.FromObject(new
        {
            Table = query
        });
        string result = JsonConvert.SerializeObject(o);
        //Console.WriteLine(o);

        return result  ;

    } 
```

下面是我得到的输出......

```
 <?xml version="1.0" encoding="utf-8" ?> 
<string xmlns="http://tempuri.org/">{"Table":            [{"userid":"1","phone":"9999999","email":"test@test.com"},{"userid":"2","phone":"1234567","email":"foo@test.com"},{"userid":"3","phone":"7654321","email":"bar@test.com"}]}</string> 
```

我只想要 Json 中的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:13:18.427

使用设置为的[`ScriptMethod`](http://msdn.microsoft.com/pl-pl/library/system.web.script.services.scriptmethodattribute.aspx)属性：`ResponseFormat``ResponseFormat.Json`

```
[WebMethod(Description = "Get Employees")]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string getEmployees() 
```

此外，您的课程必须用`[ScriptService]`属性标记。

# c# - 矩形内最大的空矩形

> ID：15449048
> 
> 赞同：3
> 
> 时间：2013-03-16T12:06:17.257
> 
> 标签：c#, .net, algorithm, dynamic-programming

我的数学不是很好，所以我很难将公式转换为代码，而且我找不到任何现成的谷歌搜索。我有一个包含很多小矩形的大矩形......我需要做的就是计算最大的空矩形。任何人都可以帮助我吗？

这是我想出的……没什么好说的，这是一个很大的失败。

```
Rect result = new Rect();

for (Double l = 0; l < bigRect.Width; ++l)
{
    for (Double t = 0; t < bigRect.Height; ++t)
    {
        Double h = 0;
        Double w = 0;

        while ((h <= bigRect.Width) && (w <= bigRect.Height))
        {
            Rect largestEmpty = new Rect(l, t, w, h);

            if (smallRects.TrueForAll(smallRect => !smallRect.IntersectsWith(largestEmpty)) && ((largestEmpty.Height * largestEmpty.Width) > (result.Height * result.Width)))
                result = largestEmpty;
            else
                break;

            ++h;
            ++w;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:23:18.987

来自您的[Perdue 文档链接](http://docs.lib.purdue.edu/cgi/viewcontent.cgi?article=1409&context=cstech)它说在 Big Rect 中有一组点（我们称之为 ASD），你会找到不包含集合 ASD 的点的最大 Rect。查看您的代码，您似乎没有（直接）合并这些要点。我会从较小的 Rects 中提取点并创建集 ASD。由于您使用的是 double 类型，因此您应该可以访问这些点，否则该算法的运行时间会显着增加，因为您需要检查特定范围（整个 Big Rect）中所有可能的 double。使用这些点，我会尝试找到彼此距离最短的点 (sqrt(dx^2+ dy^2)) （最短的不应该包含任何点）然后转到下一个最短的点，看看是否有任何点包含等等。换句话说，创建所有组合的顺序列表（不是排列，（a，b）到（c，d) 应该 == (c, d) 到 (a,b)) 按它们之间的距离排序。可能不是最佳的，但可以完成工作。

EDIT: All order pair besides the diagonals of the smaller Rects should be in the order list, since the smaller Rects should not be conatined, You can also exclude pairs with the same x or y value.

# javascript - 无法显示来自 ember-data 的模型

> ID：15449054
> 
> 赞同：1
> 
> 时间：2013-03-16T12:06:54.450
> 
> 标签：javascript, ember.js, ember-data

我正在使用 Ember.js 1.0.0 RC1 和 ember-data 修订版 12

我有 PHP Slim 框架在后面，Ember.js 作为 UI。我想从 REST 后端加载数据并将其列在模板中。

所以这是我的代码：

```
 window.App = Ember.Application.create();

// Store
App.Store = DS.Store.extend({
    revision: 12,
});

// Adaper
DS.RESTAdapter.reopen({
  url: '/slim'
});

// Router
App.Router = Ember.Router.extend();
App.Router.map(function(){
    this.route('ads', {path: '/ads'});
});

// Ad model
App.Ad = DS.Model.extend({
    title: DS.attr('string')
});

// AdsRoute
App.AdsRoute = Ember.Route.extend({
    model: function(){
        return App.Ad.find();
    }
}); 
```

现在我尝试在我的模板中从商店渲染我的模型：

```
<script type="text/x-handlebars" data-template-name="ads">
<h1>Ads</h1>
{{#each controller}}
    {{title}}
{{/each}}
</script> 
```

来自后端的响应：

```
{ads:[{title:"Title" },{ title:"other title" }]} 
```

但是没有显示来自商店的任何内容。我的问题是我应该如何在我的车把模板中使用来自控制器的数据？

谢谢阅读！

**解决方案**

我必须在 JSON 响应周围添加引号

```
{"ads":[{ "title":"Title" },{ "title":"other title" }]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:09:01.583

看起来好像内容从未在控制器中设置。我怀疑如果您将 setupController 挂钩添加到您的 App.AdsRoute 它会将项目放入控制器中。

```
setupController: (controller, model) ->
        controller.set('content', model) 
```

我正在包含我当前正在使用的修订版 11 应用程序的实际工作代码。所以模型名称不会排列，但代码是有效的。

```
App.ChecksIndexController = Ember.ArrayController.extend
  content: []

App.ChecksIndexRoute = Ember.Route.extend
  enter: ->
    console?.log("Checks Index Route a")
  model: ->
    App.Check.find()
  setupController: (controller, model) ->
    @._super()
    console?.log('route setupController')
    console?.log(model)
    controller.set('content', model)

{{#each item in controller }}
        {{#linkTo checks.show item }}
          <div class="well well-small well-trim-border">
            <h4>{{item.description}}</h5>
          </div>
        {{/linkTo}}
      {{/each}} 
```

我要回来的模型 - 包括一个 ID。

```
{"checks":[{"id":"512e0c6b1769d0805700000b","description":"xyz"}]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:15:59.437

要尝试的一件事是在模板中输出一个小写的“标题”，因为您的模型将属性定义为以小写的“t”开头。

# android - Android 相对布局中的问题

> ID：15449058
> 
> 赞同：0
> 
> 时间：2013-03-16T12:07:07.810
> 
> 标签：android, android-layout

在我之前的问题之后[，如何在 android 中将一组按钮与屏幕底部对齐，我在](https://stackoverflow.com/questions/15446201/how-to-align-a-set-of-button-to-bottom-of-the-screen-in-android)[user1566160](https://stackoverflow.com/users/1566160/user1566160)的帮助下进行了更正。在那之后，我遇到了另一个问题。我将在两张图片的帮助下进行解释。

![好的显示不错的显示](../Images/37d2f8bcffa8e3d435fe192aec3b618c.png)

当我按下edittext更改宏名称时，保存和取消按钮的位置会改变

![在此处输入图像描述](../Images/9eca91f6498aad33817336b7fdc02b51.png)

我的布局如下

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout  xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_alignParentTop="true">

    <!--  heading for basic settings -->
    <TextView
        android:id="@+id/setup_macroheading"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>

    <View
        android:layout_width="fill_parent"
        android:layout_height="20dp"/>

    <!--  macro name -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="20dp"
        android:paddingRight="20dp"
        android:orientation="horizontal">

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="left|center_vertical"
            android:layout_weight="1"
            android:textColor="@color/white"                    
            android:text="Macro Name"/>

        <EditText
            android:id="@+id/setup_macroname"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:layout_weight="1"
            android:maxLength="12"
            android:inputType="text"
            android:singleLine="true"/>                 
    </LinearLayout>

    <View
        android:layout_width="fill_parent"
        android:layout_height="20dp"/>

    <ListView
        android:id="@+id/lvMacroList"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</LinearLayout>

<!-- Save & Cancel button -->
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingLeft="20dp"
    android:paddingRight="20dp"
    android:layout_gravity="bottom"
    android:layout_alignParentBottom="true"
    android:orientation="horizontal">

    <Button
        android:id="@+id/setup_macroSavebtn"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:layout_weight="1"
        android:onClick="onSaveButtonClick"
        android:text="Save"/>

    <Button
        android:id="@+id/setup_macroCancelbtn"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_weight="1"
        android:onClick="onCancelButtonClick"
        android:text="Cancel"/>         
   </LinearLayout>

 </RelativeLayout> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:08:50.903

在活动标签的清单中使用 android:windowSoftInputMode="adjustPan"

# php - 将“获取头像”链接到完全不同的网站

> ID：15449060
> 
> 赞同：1
> 
> 时间：2013-03-16T12:07:25.810
> 
> 标签：php, wordpress, footer, avatar

我正在安装一个 WordPress 多站点，并且我使用了一个显示在所有博客上的固定页脚。我已经将作为页脚名称的“blogfooter.php”放在例如“static.mydomain.com”和“mydomain.com/blog”上，已经使用 iframe 将该 php 文件放入主题并添加了 css 代码为此等

但是现在我想知道如何编写 php 来获取该文件（blogfooter.php）中显示的某个博客（id）的头像，所以它是动态的。当 bloguser 更改博客管理员的头像时（在这种情况下是编辑，但所有者）。所以我不知道如何在一个不在 WordPress 文件夹中的文件中显示头像。宽度和高度应为 35 像素。

我正在使用插件“用户头像”（[http://wordpress.org/extend/plugins/user-avatar/](http://wordpress.org/extend/plugins/user-avatar/)）来更改头像。那么我该怎么做呢？

# asp.net - MVC 4 - 视图“WebForm1.aspx”必须派生自 ViewPage、ViewPage 、 ViewUserControl 或 ViewUserControl

> ID：15449063
> 
> 赞同：6
> 
> 时间：2013-03-16T12:08:00.563
> 
> 标签：asp.net, asp.net-mvc-4, report, reportviewer

我正在使用 rdlc 报告（带有 VS2012 的 ASP.Net MVC 4）。由于视图无法处理报表查看器控件，我将报表查看器放在用户控件文件 .aspx 文件中。不幸的是，当我渲染到视图 (WebForm1.aspx) 时，它会产生错误：“WebForm1.aspx”处的视图必须派生自 ViewPage、ViewPage、ViewUserControl 或 ViewUserControl。

我已经在网上搜索了解决方案，但到目前为止还没有找到解决方案。你有什么主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:51:01.797

我无意中导致这种情况在 MVC 应用程序中发生了多次，通常与以下情况之一有关：

*   在项目中引用了多个版本的 MVC。类似于[这个问题](https://stackoverflow.com/questions/2467808/getting-the-error-the-view-at-views-page-home-aspx-must-derive-from-viewpag)。从 MVC 2 到 MVC 3 时，我已经被它咬了几次，虽然我不能说它在 MVC4 中发生在我身上。

*   MVC 试图使用错误的 ViewEngine 来渲染视图。由于您使用 .aspx 作为视图，您是否确保将项目设置为使用 WebForms 视图引擎而不是 Razor？我想如果 Razor 试图解析 WebForms，它可能会抛出这个错误。

*   配置文件（特别是 web.conf）没有适合您项目的正确数据。类似于[这个问题](https://stackoverflow.com/questions/4159687/aspx-pages-will-not-load-after-upgrading-from-asp-net-mvc-2-to-3-rc)。

# c# - 数据表中的 System.Data.DuplicateNameException

> ID：15449065
> 
> 赞同：6
> 
> 时间：2013-03-16T12:08:04.600
> 
> 标签：c#, asp.net

我正在将列动态添加到！IsPostBack 中的静态数据表中。

```
static DataTable dtflow = new DataTable();

protected void Page_Load(object sender, EventArgs e)
    {

        if (!IsPostBack)
        {
            dtp.Columns.Add("slno");
            dtp.Columns.Add("portname");
            dtp.Columns.Add("type");
            dtp.Columns.Add("portid");
            dtp.Columns.Add("longitude");
            dtp.Columns.Add("latitude");
            dtp.Columns.Add("add1");
            dtp.Columns.Add("add2");
            dtp.Columns.Add("dist");
            dtp.Columns.Add("state");
            dtp.Columns.Add("country");
        }
    } 
```

但是当我第二次运行我的网站时，它会显示这样的异常

> *异常详细信息：System.Data.DuplicateNameException：名为“slno”的列已属于此数据表。*

谁能告诉我如何解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T12:10:30.003

`static`in `ASP.NET`(multi-threaded) 表示**所有请求**，因此即使是另一个访问此页面的用户也使用相同的`DataTable`. 所以这已经是原因了。

解决方案是不要让它成为静态的。

您必须使用不同的方式在回发中维护它（例如，Session、ViewState 等）。

[**在 ASP.NET 应用程序中管理持久用户状态的九个选项**](http://msdn.microsoft.com/en-us/magazine/cc300437.aspx)

注意：我什至不会将它用作字段，而是用作返回它的方法中的局部变量。通过这种方式，您可以在需要该数据的任何地方使用此方法。通常你将它绑定到一个 webdatabound 控件，比如`GridView`通过`ViewState`. 所以你不需要维护表本身。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T12:12:47.657

静态数据表意味着无论您的网页实例如何，它都将始终存在。因此，当您第一次运行网页时，您的 Page_Load 会创建数据表并且一切正常。

但是，当您第二次加载该页面或其他人尝试加载您的页面时，数据表仍然存在，因为它是静态的，因此您尝试在数据表已经存在时将列添加到您的数据表中。

**解决此问题的 3 种方法：**
**1.**删除然后再次添加列。永远不要这样做，它在各个方面都是冗余和糟糕的代码。
**2.**在 dtp.Columns.Adds 周围添加一个 if 语句，以确保它只在第一次加载页面时运行它们。您可以检查列是否存在，您可以创建一个布尔标志，或者您想到的其他方式。
**3.**从变量声明中删除静态，以便每次页面加载时都会创建一个新的数据表。如果您这样做，那么您可能希望基于静态数据源的数据表。

# ajax - ajax页面的无浏览器网页抓取

> ID：15449066
> 
> 赞同：1
> 
> 时间：2013-03-16T12:08:10.127
> 
> 标签：ajax, selenium, web-scraping

在阅读了一些网页抓取教程后尝试使用 Selenium ..

目的是网页/屏幕抓取在 Ajax 调用后加载所需数据的页面（此 ajax 调用在初始页面加载后进行）..

第二个目标是在后台运行 Selenium 代码（不打开任何浏览器）以允许加载页面（包括 Ajax 调用）、检索最终 HTML 并在本地执行所需的处理..

到目前为止的代码如下（来自[http://www.geekonweb.com/net/web-page-scraping-using-selenium-and-net/](http://www.geekonweb.com/net/web-page-scraping-using-selenium-and-net/)的代码教程）

```
public ActionResult Index()
    {
        //--
        //Below path should contain IEDriverServer.exe
        var chrome = new ChromeDriver(@"file path");
        chrome.Url = @"<url>";

        chrome.Navigate();

        //extract the html
        //var retval = ie.ExecuteScript("return document.body.outerHTML");

        string result = chrome.PageSource;

        return View();
    } 
```

目前还没有找到静默运行 Selenium 的方法（没有 GUI）。如果可以的话，请提供帮助。

其次，请告诉 Selenium 如何被告知等待 Ajax 调用完成然后检索数据。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:28:02.460

这是一个关于[如何等待元素出现](https://stackoverflow.com/questions/6992993/selenium-c-sharp-webdriver-wait-until-element-is-present)的问题。这样做是为了等待 AJAX。

这是一个关于天气可以[运行 selenium headless](https://stackoverflow.com/questions/1418082/selenium-can-i-hide-the-browser)的问题。

# javascript - 如何获取不受浏览器缓存影响的页面修改日期？

> ID：15449067
> 
> 赞同：0
> 
> 时间：2013-03-16T12:08:14.197
> 
> 标签：javascript, html

我需要将从 ASP.NET 返回的日期与从 JavaScript 返回的日期同步。因此，我在隐藏字段中从服务器发送日期，然后从 JavaScript 获取 new Date() 并获取时间偏移量。只需要时间差的近似值。

页面首次加载时一切正常——存储在隐藏字段中的服务器日期和 JavaScript“匹配”的值形式。但是，当我从页面导航然后单击“后退”按钮时，该页面现在来自浏览器缓存，因此与 JavaScript 日期相比，服务器值已过时。

有什么方法可以使这两个日期一致——都取自缓存或都没有取自缓存？我想我需要一种客户端页面修改日期，如果页面来自浏览器缓存，它不会改变。我尝试了 document.lastModified，但是当页面来自缓存时，情况会发生变化。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:13:47.563

为什么不将偏移量保存在第二个隐藏输入中？

当页面加载时，让 JavaScript 检查隐藏的“Offfset”输入的值，如果它为空则填充它（使用原始隐藏输入作为参考）。如果用户离开然后单击返回，偏移字段仍将包含计算值，并且 JavaScript 不会尝试更新它。

@user1044169：很好的收获；我认为[你是对的](https://stackoverflow.com/questions/10702254/javascript-changes-to-the-dom-lost-when-back-button-pressed)。最好的建议似乎是将数据保存在 cookie 中。

# svg - 使用 haxe/nme 渲染 svg 的选项

> ID：15449068
> 
> 赞同：1
> 
> 时间：2013-03-16T12:08:26.433
> 
> 标签：svg, haxe, nme

似乎有几个不同的项目以这个目标为目标，完成程度不同。我刚刚做了一个快速搜索，但这是我的第一印象。所以我想我应该问一下，有人测试过一些不同的选择吗？你的经历是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-20T13:25:16.197

我将 SVG 与 Haxe 一起使用，体验很流畅，首先我用 inkscape 创建所有 svg，然后用 jquery extern 操作它，这样你就有了这样的东西

`var width:Int = seatmap.innerWidth(); var vsvg:SVGElement = cast(new JQuery("#seatmap").find("svg")[0], SVGElement); var height:String = vsvg.getAttribute("height"); if (height > 1200) { vsvg.setAttribute('viewBox', "0 0 1200 "+ height); }else if (width <= 1200 && width > 1024) { vsvg.setAttribute('viewBox', "0 0 1500 "+ height); } else if (width <= 1024) { vsvg.setAttribute('viewBox', "0 0 1900 "+ height); }` 您也可以即时更改属性

```
new JQuery("#xxx-" + aaa.bb).attr("fill-opacity","1");
new JQuery("#aax-" + aaa.bb).attr("fill","#ff0"); 
```

您可以使用 Rafael.js 和 D3.js externs 进行 haxe 以即时呈现内容，使用 javascript externs 与 javascript 相同，但您具有强大的类型并避免 javascript 怪异。希望这可以帮助。

# iphone - 数据未保存在服务器中

> ID：15449075
> 
> 赞同：0
> 
> 时间：2013-03-16T12:09:24.557
> 
> 标签：iphone, ios6

感谢您回答我的问题。我有信心我会得到一些有价值的反馈和对我的查询的答复。请找到以下代码。这是将数据保存在服务器中的方法，

```
-(NSMutableString *) saveChanges 
{
    NSMutableString *changes = [[NSMutableString alloc] init];
    NSString *completeXml = [[NSString alloc]init];

    for (NSString *key in objectToModify)
    {
        BaseModel *orig = [savedOriginalObject objectForKey:key];
        BaseModel *new = [objectToModify objectForKey:key];

        BaseModel *nested = Nil;

        // BaseModel was added
        if (orig == nil)
        {
            nested = [ModelReferences referenceNested:new];
            nested.EntityState = [[EntityState alloc] initWithIntValue:Added];
            NSMutableString *newXml = [self createObjectToXML:nested];
            completeXml = [completeXml stringByAppendingString:newXml];
        }

        // BaseModel might be modified
        else {
                BaseModel *newNested = [ModelReferences referenceNested:new];
                BaseModel *origNested = [ModelReferences referenceNested:orig];

                NSMutableString *newXml = [self createObjectToXML:newNested];
                NSMutableString *origXml = [self createObjectToXML:origNested];

                completeXml = [completeXml stringByAppendingString:newXml];

                if (![newXml isEqualToString:origXml]) 
                {
                    nested = newNested;
                    nested.EntityState = [[EntityState alloc] initWithIntValue:Modified];
                }

            }

        if (nested != Nil)
            [changes appendString:[self createObjectToXML:nested]];
    }

    //refreshes both dictionaries (objectToModify and savedOriginalObject) 
    [self refreshSavedOriginalObject:completeXml];

    if ([changes length] > 0)
        return changes;
    else
        return Nil;
} 
```

每当我进行任何更改时，它都会被保存，但是当我想添加新数据或对象时，它不会保存在服务器中。例如，我想在添加对象`NSMutableDictionary`后添加它没有被保存。如果我必须提供有关我的编码的更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:13:35.913

解决方法是.. 通过为给定的基本模型生成 UUID，一旦生成 UUID，基本模型循环会将其视为非原件并将其作为新 UUID 并创建一个位置.. 因此基本模型与新的 UUID 将被发送到服务器并同时保存。

# android - 如何使用xml在每行的多行edittext中创建水平线？

> ID：15449076
> 
> 赞同：0
> 
> 时间：2013-03-16T12:09:29.330
> 
> 标签：android, android-layout, android-edittext, android-styles

![在此处输入图像描述](../Images/782a0cc1ee571141376b5cd46451d276.png)

我有`EditText`xml。我想使用 xml 或样式创建这样的布局。我该怎么做呢。请指导我

# algorithm - 独立随机变量的期望值 - 算法

> ID：15449077
> 
> 赞同：0
> 
> 时间：2013-03-16T12:09:34.180
> 
> 标签：algorithm

有 n 个独立随机变量 X1,X2..Xn。每个随机变量可以取值 0 或 1。变量 Xi 取值为 1 的概率是 1/n。X1..Xn 和的平方的期望值是多少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:47:21.753

这可能是家庭作业，所以我会给出一些提示：

我们想要 E((\sum_i X_i) ^2)。现在证明：

```
E((\sum_i X_i)^2) = E(\sum_i X_i^2 + 2\sum_{1<= i < j <= n} X_i * X_j)
                  = n * E(X_i^2) + 2 * choose(n, 2) * E(X_i * X_j) 
```

现在你需要的是：

```
E(X_i^2), E(X_i * X_j) 
```

对于任何 i 和 j，因为它们是 iid

# c++ - 使用 Uncrustify 不仅在逗号处完全拆分长函数定义

> ID：15449079
> 
> 赞同：4
> 
> 时间：2013-03-16T12:09:40.770
> 
> 标签：c++, code-formatting, uncrustify

我正在使用**Uncrustify v0.60**来格式化我的 C++ 源代码。为了配置 Uncrustify，我使用的是**UniversalIndentGUI v1.2.0 rev.1070**。

在`Line Splitting options`UniversalIndentGUI 部分中，我设置`Code Width`为 120。

假设我有以下示例代码：

```
namespace MyNameSpace
{
    class MyClass
    {
    public:
        std::map< std::string, MyOtherClass* >* ConstructMyOtherClassMap( std::vector< std::string >* allNames, int arg0, double arg1, char arg2 );

    }
} 
```

该方法声明以 > 120 的列结束，因此 Uncrustify 返回以下结果：

```
namespace MyNameSpace
{
    class MyClass
    {
    public:
        std::map< std::string, MyOtherClass* >* ConstructMyOtherClassMap( std::vector< std::string >* allNames,
            int arg0,
            double arg1,
            char arg2 );

    }
} 
```

如您所见，Uncrustify 在逗号处拆分参数列表，现在方法声明以 < 120 的列结束。但是，在这种情况下，我希望 Uncrustify 也将第一个参数放在它自己的行上，如下所示：

```
namespace MyNameSpace
{
    class MyClass
    {
    public:
        std::map< std::string, MyOtherClass* >* ConstructMyOtherClassMap( 
            std::vector< std::string >* allNames,
            int arg0,
            double arg1,
            char arg2 );

    }
} 
```

是否可以使用 Uncrustify v0.60 做到这一点？

我知道部分中的选项，`Newline adding and removing`例如`Nl Func Decl Start`或`Nl Func Def Start`在左括号字符后添加换行符，`(`但这也会影响长度小于 120 个字符的代码。我不想让以下代码分布在多行中：

```
int Sum( int a, int b, int c, int d ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T02:07:21.317

不幸的是，这在 Uncrustify 的当前状态下是不可能的。因此，您可以做的最好的事情是通过以下方式配置您提到的选项：

```
nl_func_decl_start = ignore
nl_func_def_start  = ignore

nl_func_decl_start_single = ignore
nl_func_def_start_single  = ignore

ls_func_split_full = true 
```

并在适当的情况下手动包装第一个参数。但是，就个人而言，我认为这不是一个好主意。让它自动执行惰性/按需包装。例如，我喜欢上面列出的相同设置，并且在任何可能的情况下仍然有非常简洁的代码。示例如下。

没有包装 - 构造函数参数和构造函数初始化列表都适合最大行长度：

```
PluginDialog::
PluginDialog(QString const& path, QStringList const& fileNames, QWidget* parent): QDialog(parent), label(new QLabel), treeWidget(new QTreeWidget), okButton(new QPushButton(tr("OK"))) {
  // ...
} 
```

现在它们不适合了，按照惯例，我们决定首先包装初始化列表：

```
PluginDialog::
PluginDialog(QString const& path, QStringList const& fileNames, QWidget* parent): QDialog(parent), 
                                                                                  label(new QLabel), 
                                                                                  treeWidget(new QTreeWidget), 
                                                                                  okButton(new QPushButton(tr("OK"))) {
  // ...
} 
```

相反的约定也是可能的：

```
PluginDialog::
PluginDialog(QString const&     path,
             QStringList const& fileNames,
             QWidget*           parent): QDialog(parent), label(new QLabel), treeWidget(new QTreeWidget), okButton(new QPushButton(tr("OK"))) {
  // ...
} 
```

现在，前两种情况中的任何一种都不适合，因此它们中的任何一种都合并到下一个也是唯一可能的配置中：

```
PluginDialog::
PluginDialog(QString const&     path,
             QStringList const& fileNames,
             QWidget*           parent): QDialog(parent),
                                         label(new QLabel),
                                         treeWidget(new QTreeWidget),
                                         okButton(new QPushButton(tr("OK"))) {
  // ...
} 
```

现在我们不再适合了，按照惯例，我们决定将构造函数初始化列表列移到构造函数参数列表列下：

```
PluginDialog::
PluginDialog(QString const&     path,
             QStringList const& fileNames,
             QWidget*           parent):
  QDialog(parent),
  label(new QLabel),
  treeWidget(new QTreeWidget),
  okButton(new QPushButton(tr("OK"))) {
  // ...
} 
```

顺便说一句，我们再次分支案例，即这也是可能的：

```
PluginDialog::
PluginDialog(
  QString const&     path,
  QStringList const& fileNames,
  QWidget*           parent): QDialog(parent),
                              label(new QLabel),
                              treeWidget(new QTreeWidget),
                              okButton(new QPushButton(tr("OK"))) {
  // ...
} 
```

最后，前两种情况中的任何一种都不适合，因此它们中的任何一种都合并到最终和唯一可能的配置中：

```
PluginDialog::
PluginDialog(
  QString const&     path,
  QStringList const& fileNames,
  QWidget*           parent):
  QDialog(parent),
  label(new QLabel),
  treeWidget(new QTreeWidget),
  okButton(new QPushButton(tr("OK"))) {
  // ...
} 
```

如果 Uncrustify 提供像 Jindent 那样的“避免混淆缩进”选项，那就太好了。在这种情况下，最后一个片段例如如下所示：

```
PluginDialog::
PluginDialog(
  QString const&     path,
  QStringList const& fileNames,
  QWidget*           parent):
    QDialog(parent),
    label(new QLabel),
    treeWidget(new QTreeWidget),
    okButton(new QPushButton(tr("OK"))) {
  // ...
} 
```

这显然更具可读性和令人愉悦。我为 Uncrustify 提出了这个功能。但是，我怀疑我们能否很快看到它实施，因为这个项目的作者似乎要么忙于其他事情，要么对积极开发这个项目不再感兴趣。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-19T07:31:03.917

对我来说（使用 Uncrustify 0.63），为了实现你想要的，它可以这样组合：

在函数声明中的“（”之后添加或删除换行符

```
nl_func_decl_start                       = add 
```

在函数定义中的“（”之后添加或删除换行符

```
nl_func_def_start                        = add 
```

当只有一个参数时覆盖 nl_func_decl_start。

```
nl_func_decl_start_single                = remove 
```

当只有一个参数时覆盖 nl_func_def_start。

```
nl_func_def_start_single                 = remove 
```

在函数声明中的每个 ',' 之后添加或删除换行符

```
nl_func_decl_args                        = add 
```

在函数定义中的每个“，”之后添加或删除换行符

```
nl_func_def_args                         = add 
```

在函数声明中的 ')' 之前添加或删除换行符

```
nl_func_decl_end                         = add 
```

在函数定义中的 ')' 之前添加或删除换行符

```
nl_func_def_end                          = add 
```

当只有一个参数时覆盖 nl_func_decl_end。

```
nl_func_decl_end_single                  = remove 
```

当只有一个参数时覆盖 nl_func_def_end。

```
nl_func_def_end_single                   = remove 
```

精简版（无解释）：

```
nl_func_decl_start                       = add
nl_func_def_start                        = add
nl_func_decl_start_single                = remove
nl_func_def_start_single                 = remove
nl_func_decl_args                        = add
nl_func_def_args                         = add
nl_func_decl_end                         = add
nl_func_def_end                          = add
nl_func_decl_end_single                  = remove
nl_func_def_end_single                   = remove 
```

# python - Python - 我的套接字代码有什么问题

> ID：15449083
> 
> 赞同：0
> 
> 时间：2013-03-16T12:09:53.260
> 
> 标签：python, sockets, networking

我目前正在开发一个简单的 Python 程序，但由于某种原因，它无法正常工作。
完整程序的工作方式是它有一个包含 20 个端口的列表，然后循环遍历该列表，基本上在所选端口上 ping 主机。这是代码：

```
import socket
import sys

print '  +-====================================================-+'
print ' /                                                        \ '
print '|                       PyPortScanner                      |'
print '|                       by Ag3ntChr0m                      |'
print ' \                                                        /'
print '  +-====================================================-+'
print ''

try:
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
except socket.error, msg:
    print 'Failed to create socket. Error code: ' + str(msg[0]) + 'Error message: ' + msg[1]
    sys.exit()
print 'Socket Created'

host = raw_input('Enter the desired host to scan: ')
port = [80, 443, 21, 22, 4567, 8080, 25, 3389, 23, 53, 1723, 110, 135, 445,
        139, 1863, 143, 8081, 10000, 1025]
portFail = []
print 'Scanning top 20 most often open ports ...'

try:
    remote_ip = socket.gethostbyname( host )

except socket.gaierror:
    #couldn't resolve host at port
    print 'Hostname could not be resolved. Program exiting'
    sys.exit()

print 'IP address of ' + host + ' is ' + remote_ip

print '+-===================================-+'
print '| Ports Scanned:----------------------|'
print '+-===================================-+'
print ''

#Connect to remote server
for i in range(0, 20):
    portScan = int(str(port[i]))    <----
    try:

        s.connect((remote_ip, portScan))
        print "\t" + str(portScan)
        s.close()

    except:

        portFail.append(portScan)
        err = True

raw_input('Press Enter to Continue...')

if err:
    print '+-=============================-+'
    print '| Failed Port Scan:-------------|'
    print '+-=============================-+'
    print ''
    size = len(portFail)
    for i in range(1, size):
        print "\t" + str(portFail[i]) 
```

当您运行程序时，它应该

*   将端口号（在箭头标记的行）加载到 s.socket 可以用来尝试连接的变量中。
*   然后它尝试在主机上打开一个套接字（基本上是 ping 它）然后关闭它。
*   如果它连接，它会在端口扫描下的屏幕上写入。
*   但是，如果它失败（并且最近失败了），它会打印在 Failed Port Scan 下。

当我运行该程序时，它会在 Ports Scanned 下打印列表中的第一个端口 (80)，但其余端口则放置在 Failed Port Scan 下——即使我知道其中至少有一些是打开的。

我如何让这个程序 ping 比第一个成功更多的端口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:15:03.730

您不能只是重复使用相同的套接字并再次连接。尝试每次创建一个新套接字：

```
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((remote_ip, portScan)) 
```

即使您`close`是一个套接字，也不会将其放回可以重新连接的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:42:29.900

正如@cnicutar 的回答中所述，您不能重复使用`socket`. 但是你也应该`close()`在所有情况下使用后的套接字，因为这将释放底层资源。这也可以在[api 文档](http://docs.python.org/2/library/socket.html#socket.socket.shutdown)中的示例中看到。

当您成功连接到端口`shutdown()`后，您应该调用以确保它已关闭。

这是代码的相关部分：

```
for portScan in port:
    try:
        print "scanning: %s" % portScan 
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        s.connect((remote_ip, portScan))
        s.shutdown(socket.SHUT_RDWR)
    except:
        portFail.append(portScan)
        err = True
    finally:
        s.close() 
```

我还冒昧地简化了循环。

注意：我的实验表明`shutdown()`不允许我重复使用`socket`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T12:53:20.010

正如@cnicutar 所指出的，您不能重用套接字，但您始终可以为每个新连接启动一个新套接字。
您应该使用 for 循环来扫描端口，例如：

```
for p2scan in port:
    try:
        print "scanning: %s" % p2scan
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        s.connect((remote_ip, p2scan))
    except:
        portFail.append(p2scan)
        err = True
    finally:
        s.close() 
```

# java - 如何将正则表达式与字符串匹配？

> ID：15449085
> 
> 赞同：-2
> 
> 时间：2013-03-16T12:10:03.373
> 
> 标签：java, regex

在 Java 中，什么正则表达式将匹配以下字符串（请注意，它`|`是字符串的一部分）？

```
|---0-1-2-5-3-||-3-----------|---------1-0-|-0-----------| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:18:50.060

正如 Eyal Schneider 和 Naveed S 在上述评论中所述：

如果您需要匹配该确切的字符串，请使用

```
str.equals("|---0-1-2-5-3-||-3-----------|---------1-0-|-0-----------|") 
```

如果您需要匹配字符串中的某个模式，请使用 RegEx。

[Java 正则表达式](http://www.vogella.com/articles/JavaRegularExpressions/article.html)教程

一个测试器，您可以在其中[测试您的正则表达式](http://www.regexplanet.com/advanced/java/index.html)

# php - Zf2 使用 Zend\Db\Sql\Select

> ID：15449087
> 
> 赞同：0
> 
> 时间：2013-03-16T12:10:18.160
> 
> 标签：php, zend-framework2

在使用 Zend\Db\Sql\Select 时需要帮助。无法弄清楚我做错了什么，它什么也不输出，也没有显示错误。

```
namespace Album\Model;
use Zend\Db\Adapter\Adapter,
    Zend\Db\Sql\Select;

class AlbumTable
{
    public function getAll()
    {
        $select = new Select('album'); 
        return $select->from();
    }
}

namespace Album\Controller;

class AlbumController extends AbstractActionController
{
    public function indexAction()
    {
        return new Viewmodel(array(
            'rows' => $this->albumTable->useSelect()
        ));
    }
}

// index.phtml
foreach ($this->rows as $row) { echo $row->artist . '<br />'; } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:10:57.383

认为我没有查询我构建的字符串。

```
Zend\Db\Sql\Sql; 

class AlbumTable
{
    public function getAll()
    {
        $sql = new Sql($this->adapter);
        $select = new Select('album');

        $selectString = $sql->getSqlStringForSqlObject($select);
        return $this->adapter->query($selectString, Adapter::QUERY_MODE_EXECUTE);
    }
} 
```

# javascript - 如何在 asp.net 应用程序中嵌入推文

> ID：15449093
> 
> 赞同：2
> 
> 时间：2013-03-16T12:10:51.380
> 
> 标签：javascript, asp.net, twitter, embed

我想在 asp.net 应用程序/页面中嵌入推文。类似于 wordpress 功能，只需将推文的 URL 粘贴到编辑器中，WP 就会自动嵌入推文。或者可能是某种短代码，例如 [tweet:numeric_String_here]，然后它就变成了格式良好的推文。经过多次谷歌搜索，我找到了一些潜在的解决方案。一是客户端 - [EmbedTweet](http://embedtweet.com/)我刚刚尝试过但不起作用。我知道 twitter 使用 OAuth，所以这个脚本可能会使用他们的旧版 api。另一个解决方案是根据我在 twitter 的开发部分的内容与 OEmbed 合作。因此，在我开始走向潜在的死胡同之前，我想了解一下我应该看什么以使用 asp.net 嵌入推文，这也可能是一个客户端解决方案。我宁愿使用预先构建的解决方案，但如果我必须自己动手，我可以。Linq to Twitter 或 Twitterizer 是否支持嵌入推文？或者我应该使用 JSON.net 通过 JSON 获取推文信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:24:15.407

Twitter 有一个我在[LINQ to Twitter中实现的](http://linqtotwitter.codeplex.com/)[statuses/oembed.json](https://dev.twitter.com/docs/api/1.1/get/statuses/oembed)端点。这是一个如何使用它的示例：

```
 static void OEmbedStatusDemo(TwitterContext twitterCtx)
    {
        var embeddedStatus =
            (from tweet in twitterCtx.Status
             where tweet.Type == StatusType.Oembed &&
                   tweet.ID == "305050067973312514"
             select tweet.EmbeddedStatus)
            .SingleOrDefault();

        Console.WriteLine("Embedded Status Html: " + embeddedStatus.Html);
    } 
```

# c# - 在 c# 的按钮中设置文本和图像

> ID：15449096
> 
> 赞同：0
> 
> 时间：2013-03-16T12:10:58.813
> 
> 标签：c#, .net, winforms

我有一个 WinForms 应用程序。在主窗体中，我有一些按钮，我想在文本旁边添加一个图像。

我将背景图像属性设置为我想要的图像，并在 FormLoad 事件中设置图像关系，如下所示：

```
button1.TextImageRelation = TextImageRelation.ImageBeforeText; 
```

因此，当左侧有图像而右侧有文本时，我期望得到类似“列表”的东西。

但我现在得到的只是按钮中心的文本以及垂直和水平图像的多样性

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T12:52:19.080

您应该使用[`Image`](http://msdn.microsoft.com/en-us/library/system.windows.forms.buttonbase.image.aspx)按钮的属性，而不是`BackgroundImage`. [`TextImageRelation`](http://msdn.microsoft.com/en-us/library/system.windows.forms.buttonbase.textimagerelation.aspx)与[`Image`](http://msdn.microsoft.com/en-us/library/system.windows.forms.buttonbase.image.aspx)财产的作品。

这是不正确的用法`BackgroundImage`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:19:00.087

对 FormLoad 事件不执行任何操作。只需单击要更改图像和文本的按钮，然后按 F4，就会出现属性窗口。查找文本并将其设置为空，即删除您在文本中找到的任何内容。对于图像，您需要在属性窗口中找到图像，然后选择您想要的图像。就这样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T12:14:00.280

好的，我通过将 BackgroundImageLayout 设置为 None 来解决它

# php - 当 url 路径包含空格时，urlencode 不起作用

> ID：15449098
> 
> 赞同：0
> 
> 时间：2013-03-16T12:11:08.693
> 
> 标签：php, wordpress, url, curl, urlencode

通过 url 获取 json 数据时出现问题。

网址是`http://farmapi.fastway.org/v3/psc/lookup/MEL/Point%20cook/3030?LengthInCm=30&WidthInCm=30&HeightInCm=30&WeightInKg=4&api_key=MY_API_KEY`

我尝试使用 urlencode 对 Point Cook 进行编码。但它不工作。但是，当您直接将其粘贴到浏览器时，此 url 可以工作。

我用来发送网址的代码是：

```
$curl = curl_init( $url );
curl_setopt($curl, CURLOPT_USERAGENT, 'PHP/' . phpversion());
curl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($curl, CURLOPT_HEADER, FALSE);
curl_setopt($curl, CURLOPT_TIMEOUT, 60);
$response = curl_exec( $curl );
echo '<pre>post_request response' . print_r( $response, true) . '</pre>';
if (curl_errno( $curl )) {
    $this->response = curl_error( $curl );
    return $this->response;
    curl_close( $curl );
}

curl_close( $curl ); 
```

或这个：

```
$response = wp_remote_post( $url, array(
    'method'    => 'POST',
    'timeout'   => 70,
    'sslverify' => 0
    ) ); 
```

有谁可以帮助我解决这个问题或给我一些可能的解决方案？我会很感激的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:45:45.420

感谢您的 hakre 和 Colin Morelli。从你们提供的答案中，我发现代码中的真正问题。

首先是使用`rawurlencode`. 这个函数变成`point cook`，`point%20cook`这是正确的格式。`urlencode`功能变成`point cook`在`point+cook`服务器端是不可接受的。

Colin Morelli 提到的第二个问题是我使用了担心方法来发送 url。我应该使用 GET 而不是 POST。

多谢你们！！！

# eclipse - 如何在 Eclipse 中更改自定义透视图的图标？

> ID：15449099
> 
> 赞同：11
> 
> 时间：2013-03-16T12:11:14.107
> 
> 标签：eclipse, icons, perspective

我想在 Eclipse 中更改自定义透视图的图标。我已经搜索了很多，但我没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-09-15T18:08:29.487

可以通过更新文件`iconURI`中透视图定义的属性来更改透视图的图标`workbench.xmi`。该文件位于工作区的 .metadata 目录中。例如`/My-Workspace/.metadata/.plugins/org.eclipse.e4.workbench/workbench.xmi`。

该`iconURI`属性通常有两行。例如：

```
<children xsi:type="advanced:Perspective" ... iconURI="platform:/plugin/com.atlassian.clover.eclipse.core/icons/cview16/clover.gif" tooltip="Clover"> 
```

和

```
<snippets xsi:type="advanced:Perspective" ... iconURI="platform:/plugin/com.atlassian.clover.eclipse.core/icons/cview16/clover.gif" tooltip="Clover"> 
```

图标 URI 是 Eclipse 插件中图像的路径。（插件位于`{ECLIPSE_HOME}/plugins`目录中。）

`workbench.xmi`关闭 Eclipse IDE 后需要编辑该文件，因为退出 Eclipse 时该文件会被覆盖。

在本例中，我通过修改 Eclipse 中可用的 Java 透视图创建了一个名为 Clover 的自定义透视图，并将其保存为“Clover”。最初，我的透视图与 Java 透视图具有相同的图标：

![自定义透视图的初始图标](../Images/56488818cce77c4e3cf06aee3f180cb5.png)

所以我关闭了 Eclipse，更改了 中的图标路径`workbench.xmi`，保存文件，重新打开 IDE，然后显示新图标：

![自定义透视图的新图标](../Images/61e69cf5c643153f3d8273c766ebc315.png)

***注意：****我使用 Eclipse 4.6.0 (Neon)，但这个解决方案适用于所有 Eclipse 4 版本。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T14:31:36.297

如果您将现有透视图存储在与自定义透视图不同的名称下，则无法更改图标。

您必须通过编写一个小的 Eclipse 插件来定义透视图，以便能够更改图标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-30T18:35:17.087

为您的插件打开 plugin.xml；进入扩展页面；并选择您的透视扩展（在 org.eclipse.ui.perspectives 中：您应该在此处输入您的自定义透视）。您可以为自定义透视图设置一个图标属性。（我正在使用 Neon2）

# github - Github 抛出 OmniAuth::Strategies::OAuth2::CallbackError

> ID：15449105
> 
> 赞同：0
> 
> 时间：2013-03-16T12:11:36.370
> 
> 标签：github, ruby-on-rails-3.2, omniauth

我正在尝试使用将 github 身份验证与 rails 应用程序集成

`omniauth-github-1.1.0`和`rails-3.2.12 gems`

每次我尝试使用 Github 对我的应用程序进行身份验证时，都会收到此错误：

`"OmniAuth::Strategies::OAuth2::CallbackError" with URL -` `http://127.0.0.1:3000/auth/github/callback/?error=redirect_uri_mismatch`

应用程序注册到：
URL -`http://127.0.0.1:3000`
回调 URL -`http://127.0.0.1:3000/auth/github/callback/`

Omniauth 初始化程序文件：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :github, ENV['GITHUB_KEY'], ENV['GITHUB_SECRET']
end 
```

我已经仔细检查了 GITHUB_KEY、GITHUB_SECRET。真的看不出身份验证失败的任何原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:33:37.090

我`localhost:3000`用于运行应用程序并期望回调工作。但我应该`http://127.0.0.1:3000/`改用。

# html - 创建具有可变宽度的定义列表 和 （包括 JSFiddle）

> ID：15449114
> 
> 赞同：4
> 
> 时间：2013-03-16T12:12:48.750
> 
> 标签：html, css, layout, css-float

我有一个定义列表，其中术语和定义的宽度都不同。**[编辑：澄清一下，当我说不同的宽度时，我的意思是它们不能是固定的宽度。显然，通过设置 `'] 的宽度很容易实现这种效果]**我需要每对并排放置，如果需要，可以变成多行，而不是在 .

这是一个显示我的问题的 JSFiddle：http: [//jsfiddle.net/2H9YN/](http://jsfiddle.net/2H9YN/)（下面的代码）

**[编辑：请注意，颜色仅供参考。它们对最终设计并不重要]**

我目前有这个：

![在此处输入图像描述](../Images/9882ab258d982840b83095ebc0e59eca.png)

但我想要这个：

![在此处输入图像描述](../Images/74e0dbf2308243a81c54c51e609f2359.png)

HTML：

```
<dl>
    <dt>dt: Lorem Ipsum</dt>
    <dd>dd: Lorem imperdiet </dd>
    <dt>dt: Lorem id libero in Ipsum</dt>
    <dd>dd: Lorem id libero in ipsum dolor </dd>
    <dt>dt: Lorem Ipsum</dt>
    <dd>dd: I should be sitting to the right of the previous dt and not wrapping round below it.</dd>
    <dt>dt: Lorem id libero in Ipsum</dt>
    <dd>dd: Lorem in ipsum dolor </dd>
</dl> 
```

CSS：

```
dl
{
    width:400px;
    background-color: rgba(0, 0, 0, 0.2);
    float: left;
}

dt
{
    clear:both;
    float:left;
    background-color: rgba(255, 0, 0, 0.3);
}

dd
{
    float:left;
    background-color: rgba(0, 255, 0, 0.3);
    margin: 0 0 0 4px;
} 
```

本质上，我正在寻找`<dd>`来填充.`<dt>``<dt>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T12:39:37.983

以下是一些可能有效的 CSS：

```
dl {
    width: 400px;
    background-color: rgba(0, 0, 0, 0.2);
    overflow: auto;
}

dt {
    background-color: rgba(255, 0, 0, 0.3);
    float: left;
    clear: left;
    margin-right: 10px; /* Margin work */
    padding: 5px; /* Padding works */
}
dd {
    background-color: rgba(0, 255, 0, 0.3);
    display: table-cell;
    padding-left: 10px; /* Padding works */
    padding-bottom: 10px;
    margin-left: 100px; /* Margin does not work */
    margin-bottom: 100px;
} 
```

小提琴参考：http: [//jsfiddle.net/audetwebdesign/45jDK/](http://jsfiddle.net/audetwebdesign/45jDK/)

**解释它为什么起作用**

(1) 要查看背景颜色，请设置`overflow: auto`为`dl`。由于所有子元素都是浮动的，因此默认情况下高度折叠为零。

(2) 你想`dt`从一个新的行开始，所以使用`clear: left`这样`dt`就不会尝试在一个短`dd`元素之后流动。

(3) 对于`dd`, using`display: table-cell`似乎可以解决问题。

上`dt`，`padding`并按`margin`预期工作。On `dd`,`padding`工作但`margin`没有效果，可能是因为`table-cell`工作方式。

我在 Firefox 中尝试过，但在其他地方没有。

**PS**
我在其中一个元素上添加了一些额外的内容，`dt`以查看极端情况将如何呈现。我还尝试了`width`of`dl`并且布局保持稳定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T14:29:56.083

您正在使用定义列表这一事实使得这非常棘手。如果没有某种容器来强制 dt 和 dd 之间的关系，您必须在某处设置限制。

由于 Flexbox 实现的差异，我可以在 Opera 中使用您的标记在 Chrome 中获得最接近的结果：

[http://jsfiddle.net/2H9YN/4/](http://jsfiddle.net/2H9YN/4/)

```
dl {
  width: 400px;
  background-color: rgba(0, 0, 0, 0.2);
  float: left;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  -webkit-flex-align: start;
  -ms-flex-align: start;
  -webkit-align-items: flex-start;
  align-items: flex-start;
}

dt {
  background-color: rgba(255, 0, 0, 0.3);
  -webkit-flex: 0 0;
  -ms-flex: 0 0;
  flex: 0 0;
  white-space: pre;
}

dd {
  background-color: rgba(0, 255, 0, 0.3);
  margin: 0 0 0 4px;
  -webkit-flex: 1 1 50%;
  -ms-flex: 1 1 50%;
  flex: 1 1 50%;
} 
```

当然，只有在每个 dt 的 dd 数不超过 1 时才有效。

如果您愿意更改标记以便拥有某种行容器，那么您有更多选择。它不一定是一个表格，它可以是一堆包含一个 h1 (dt) 和一个段落 (dd) 的文章。标签无关紧要，重要的是元素如何组合在一起。

```
<table>
    <tr>
        <th>dt: Lorem Ipsum</th>
        <td>dd: Lorem imperdiet </td>
    </tr>

    <tr>
        <th>dt: Lorem id libero in Ipsum</th>
        <td>dd: Lorem id libero in ipsum dolor </td>
    </tr>

    <tr>
        <th>dt: Lorem Ipsum</th>
        <td>dd: I should be sitting to the right of the previous dt and not wrapping round below it.</td>
    </tr>
</table> 
```

再次使用 Flexbox，当元素没有足够的内容到达结尾时，我们可以完美匹配您的灰色背景。我们还可以为非 Flexbox 浏览器获得合理的回退：

[http://jsfiddle.net/2H9YN/7/](http://jsfiddle.net/2H9YN/7/)

```
table {
  width: 400px;
  background-color: rgba(0, 0, 0, 0.2);
}

table, tbody, th, td {
  display: block;
}

tr {
  display: block;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-align: start;
  -ms-flex-align: start;
  -webkit-align-items: flex-start;
  align-items: flex-start;
}

th, td {
  display: table-cell;
  vertical-align: text-top;
}

th {
  background-color: rgba(255, 0, 0, 0.3);
  white-space: pre;
  font-weight: normal;
}

td {
  background-color: rgba(0, 255, 0, 0.3);
  margin: 0 0 0 4px;
} 
```

# c# - 请求的服务尚未注册！AutoFac 依赖注入

> ID：15449118
> 
> 赞同：33
> 
> 时间：2013-03-16T12:13:02.573
> 
> 标签：c#, .net, dependency-injection, autofac

我只是想使用 AutoFac 来解决依赖关系，但它会引发异常，例如

> *请求的服务“ProductService”尚未注册。为了避免这个异常，要么注册一个组件来提供服务，要么使用 IsRegistered()...*

```
class Program
{
    static void Main(string[] args)
    {
        var builder = new ContainerBuilder();

        builder.RegisterType<ProductService>().As<IProductService>();

        using (var container = builder.Build())
        {
            container.Resolve<ProductService>().DoSomething();
        }
    }
}

public class ProductService : IProductService
{
    public void DoSomething()
    {
        Console.WriteLine("I do lots of things!!!");
    }
}

public interface IProductService
{
    void DoSomething();
} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-16T12:18:09.340

随着声明：

```
builder.RegisterType<ProductService>().As<IProductService>(); 
```

每当有人试图解决时告诉 Autofac`IProductService`给他们一个`ProductService`

所以你需要解决`IProductService`and 到`ProductService`：

```
using (var container = builder.Build())
{
    container.Resolve<IProductService>().DoSomething();
} 
```

或者，如果您想将其`Resolve<ProductService>`注册到 AsSelf：

```
builder.RegisterType<ProductService>().AsSelf(); 
```

# drupal - 在 Drupal 6 的钩子函数中获取用户输入的密码

> ID：15449119
> 
> 赞同：0
> 
> 时间：2013-03-16T12:13:14.100
> 
> 标签：drupal, drupal-6, drupal-modules

我想获取用户在`My account`页面和管理员用户编辑页面中输入的用户名和密码等用户详细信息。在我的自定义模块中，我使用了`mymodule_user($op, &$edit, &$account, $category = NULL)`钩子函数。

用户表单提交时如何获取用户输入的用户名和密码详细信息？如果此函数不正确，那么我可以从哪个钩子函数获取用户详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:19:02.340

实际上，您的价值在于 $op login 和 edit 的 $edit 。您还可以 hook_form_() 更改这些表单，并在您的提交处理程序中，您要查找的值在 $form_state 数组中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:55:23.080

$account->name 具有可靠的帐户名称。密码在用户表中被加密，因此您唯一能看到的地方是用户创建帐户或更改密码时。在这种情况下，您需要从 $edit 中提取它。

# php - 计算图像加载进度不工作

> ID：15449125
> 
> 赞同：1
> 
> 时间：2013-03-16T12:13:36.457
> 
> 标签：php, jquery-ui, jquery, jquery-mobile

我试图在加载大图像时显示进度条，以了解它的加载量，但基于我所有的谷歌搜索和搜索，我没有找到我要找的东西。

我可以添加加载 gif 直到它加载然后改变使用

```
$('img').load(function() {
    // my code here
} 
```

我也用过：

```
 $(function() {
     $( "#progressbar" ).progressbar({
        value: 37
     });
 }) 
```

但我不知道如何计算使用 javascript 或 jquery 加载单个图像的百分比。

感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:39:23.400

您可以执行以下操作，以加载图像以及图像并显示进度：

```
$.each(arrayOfImageUrls, function(index, value) {
    $('<img></img>').attr('src', value)    //load image
        .load(function() {
            percentCounter = (index / arrayOfImageUrls.length) * 100;    //set the percentCounter after this image has loaded
            $('#yourProgressContainer').text(percentCounter + '%');
        });
}); 
```

# android - 底部有孩子的Android Webview

> ID：15449130
> 
> 赞同：0
> 
> 时间：2013-03-16T12:14:11.247
> 
> 标签：android, xml, layout, webview

我一直在搜索 Google 和 stackoverflow 一段时间，但没有找到任何回答我的问题的东西。

我想知道将 a `LinearLayout`（没有特定的像素高度）放在 a 的底部`WebView`。稍后将`LinearLayout`填充一个片段，其中包含对`WebView`.

问题的问题`WebView`是几乎总是比屏幕大，因此用户必须滚动才能阅读全文。在滚动的底部，我希望`CommentsFragment`插入（通过`LinearLayout`，它需要一些参数，因此不能直接从 XML 加载）。

我已经尝试了一堆解决方案，但所有这些解决方案都始终`LinearLayout`坚持在布局的底部，而不是在`WebView`.

我当前的代码如下，当然不起作用：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <WebView
        android:id="@+id/article_webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true" />

    <LinearLayout
        android:id="@+id/comments_container"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" />

</RelativeLayout> 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:10:38.353

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <WebView
        android:id="@+id/article_webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

    <LinearLayout
        android:id="@+id/comments_container"
        android:layout_below="@+id/article_webview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:32:50.230

几轮后让它工作。解决方案是使用 ScrollView，然后在其中一个相对布局镜像 @Karan_rana 的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T12:25:57.270

如果您想将评论片段放在网络视图下方，那么您可以尝试如下并告诉我它是否适合您

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <WebView
        android:id="@+id/article_webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
      android:layout_above="@id/comments_container"/>

    <LinearLayout
        android:id="@+id/comments_container"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" />

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T12:48:30.483

试试这个，确保`layout_height="wrap_content"`在你的 WebView中有

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <WebView
            android:id="@+id/article_webview"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <LinearLayout
            android:id="@+id/comments_container"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
    </LinearLayout>

</ScrollView> 
```

# c# - 通过两个整数键存储和检索值的最快方法

> ID：15449142
> 
> 赞同：0
> 
> 时间：2013-03-16T12:15:47.220
> 
> 标签：c#, performance, hashtable

我需要通过两个整数键来超快速地存储和检索值。

所以我有输入值`uint Id1, uint Id2`并且需要得到`uint Count`.

`Id1`我也知道和的最大值`Id2`（大约是 5 000 000）。

我当前的实现需要大约 70% 的应用程序工作时间，并且可能需要几天时间。

它只使用标准的.net 字典，当然可以改进。但我想这是计算机科学中非常有用的操作，毫无疑问存在更有效的算法。

这是我的实现

```
void Main()
{
    var rep = new Repository();

    var sw = new Stopwatch();

    sw.Start();

    for (uint i = 0; i < 10000; i++)
    {
        for (uint j = 0; j < 1000; j++)
        {
            rep.Add(new DomainEntity(){Id1 = i, Id2 = j, Count = 1});
        }
    }

    for (uint i = 0; i < 10000; i++)
    {
        for (uint j = 0; j < 1000; j++)
        {
            rep.GetDomainEntityByIds(i,j);
        }
    }

    sw.Stop();
    Console.WriteLine ("Elapsed:{0}", sw.Elapsed);
}

public class Repository
{
        private readonly Dictionary<Tuple<UInt32, UInt32>, UInt32> _dictStore;

        public Repository()
        {
            _dictStore = new Dictionary<Tuple<uint, uint>, uint>();
        }

        public uint Add(DomainEntity item)
        {
            var entry = MapToTableEntry(item);
            _dictStore.Add(entry.Key,entry.Value);
            return 0;
        }

        public void Update(DomainEntity item)
        {
            var entry = MapToTableEntry(item);
            _dictStore[entry.Key] = entry.Value;
        }

        public IEnumerable<DomainEntity> GetAllItems()
        {
            return _dictStore.Select(MapToDomainEntity);
        }

        public DomainEntity GetDomainEntityByIds(uint articleId1, uint articleId2)
        {
            var tuple = new Tuple<uint, uint>(articleId1, articleId2);

            if (_dictStore.ContainsKey(tuple))
            {
                return MapToDomainEntity(new KeyValuePair<Tuple<uint, uint>, uint>(tuple, _dictStore[tuple]));
            }

            return null;
        }

        private KeyValuePair<Tuple<uint, uint>, uint> MapToTableEntry(DomainEntity item)
        {
            return new KeyValuePair<Tuple<uint, uint>, uint>(new Tuple<uint, uint>(item.Id1,item.Id2), item.Count);
        }

        private DomainEntity MapToDomainEntity(KeyValuePair<Tuple<uint, uint>, uint> entry)
        {
            return new DomainEntity
            {
                Id1 = entry.Key.Item1,
                Id2 = entry.Key.Item2,
                Count = entry.Value,
            };
        }
}

public class DomainEntity
{
        public uint Id1 { get; set; }
        public uint Id2 { get; set; }
        public uint Count { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T12:24:16.490

一个小的（？）改进，您可以[`TryGetValue`](http://msdn.microsoft.com/en-us/library/bb347013.aspx)用来避免两次查找字典：

```
public DomainEntity GetDomainEntityByIds(uint articleId1, uint articleId2)
{
    var tuple = new Tuple<uint, uint>(articleId1, articleId2);
    uint value;
    if (_dictStore.TryGetValue(tuple, out value))
    {
        return MapToDomainEntity(new KeyValuePair<Tuple<uint, uint>, uint>(tuple, value));
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:50:52.853

您要做的是使用有效的键和哈希创建一个有效的字典。由于字典始终使用 32 位值并且您拥有大约 45 位数据，因此您无法创建唯一的散列，但您应该尽力而为。

*   始终使用 TryGetValue() 而不是双重查找。
*   当使用带有值类型键的字典时，使用作为参数传递给字典构造函数的自定义 IEqualityComparer。
*   使用自定义哈希码尝试将最大数量的信息从子键压缩到 32 位哈希中。

例子：

```
public class Storage 
{
   private Dictionary<Key, DomainObject> dict;

   public Storage()
   {
      dict = new Dictionary<Key, DomainObject>(Key.Comparer.Instance)
   }

   public DomainObject Get(uint a, uint b)
   {
      DomainObject obj;
      dict.TryGetValue(new Key(a,b), out obj);
      return obj;
   }

   internal struct Key 
   {
       internal readonly uint a;
       internal readonly uint b;

       public Key(uint a, uint b)
       {
          this.a = a;
          this.b = b;
       }     

       internal class Comparer : IEqualityComparer<Key>
       {
           internal static readonly Comparer Instance = new Comparer();
           private Comparer(){}

           public bool Equals(Key x, Key y)
           {  
               return x.a == y.a && x.b == y.b;
           }  

           public int GetHashCode(Key x)
           {    
              return (int)((x.a & 0xffff) << 16) | (x.b & 0xffff));
           }
       } 
   }  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T12:52:12.200

你在那里做了很多额外的工作，转换为`KeyValuePair`. 此外， `DomainEntity`它是一种引用类型，因此您可能应该只在字典中存储对那些引用的引用，而不是每次查找时都必须从键和值创建它们。

将您的字典创建为：

```
var _dictStore = new Dictionary<Tuple<uint, uint>, DomainEntity>(); 
```

然后：

```
public uint Add(DomainEntity item)
{
    var key = new Tuple<uint, uint>(item.Id1, item.Id2);
    _dictStore.Add(key, item);
    return 0;
} 
```

并查找：

```
public DomainEntity GetDomainEntityByIds(uint articleId1, uint articleId2)
{
    var key = new Tuple<uint, uint>(articleId1, articleId2);
    DomainEntity value;
    if (!_dictStore.TryGetValue(key, out value))
    {
        value = null;
    }
    return value;
} 
```

# .net - 限制 HttpWebResponse 流的读取速度

> ID：15449147
> 
> 赞同：0
> 
> 时间：2013-03-16T12:16:33.193
> 
> 标签：.net, multithreading, asynchronous

我使用此代码读取 HttpWebResponse 流

```
Stream stm = httpResp.GetResponseStream();
Stream fs = new FileStream(filename, FileMode.Append, FileAccess.Write);
byte[] buff = new byte[1024 * 16];

AsyncCallback callback = null;
callback = ar =>
{
    int bytesRead = stm.EndRead(ar);
    fs.Write(buff, 0, bytesRead);
    if(bytesRead == 0)
        return;

    stm.BeginRead(buff, 0, buff.Length, callback, null);
};
stm.BeginRead(buff, 0, buff.Length, callback, null); 
```

我想限制下载速率。如果我在回调中放置一个 Thread.Sleep() ，它将使线程保持阻塞，但它不能很好地适应许多流。有没有其他方法可以实现下载限制和线程经济？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T05:23:48.070

在循环中设置睡眠*可能会*限制下载速率。它取决于底层协议实现和内部网络流缓冲区的大小。

在我的系统（Windows Server 2008、.NET 4.5）上，在循环中设置睡眠确实会限制下载速度。

它还取决于[`request.AllowReadStreamBuffering`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.allowreadstreambuffering.aspx)属性的设置。文档说默认设置是`true`，但我的测试显示默认设置`false`在我的系统上。事实上，试图将其设置为`true`抛出异常。

但是，似乎默认值是`true`Silverlight。请参阅[该属性的 Silverlight 文档](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.allowreadstreambuffering%28v=vs.95%29.aspx)。当设置为 时`true`，在准备好读取响应之前读取并缓冲整个响应。

假设限制读取请求的速率将限制下载速率（这似乎是合理的，前提是您禁用读取流缓冲），我看不出使用`BeginRead`/的好方法`EndRead`。正如您所指出的，将 a`Thread.Sleep`放入其中并不能很好地扩展。

对于 .NET 4.5 和 C# 5.0，您应该考虑使用`GetResponseAsync`来获取响应，并`ReadAsync`在读取响应流时使用。使用 .NET 4.0，您可以创建一个[任务](http://msdn.microsoft.com/en-us/library/dd235678.aspx)来进行阅读。其中任何一个都可以让您使用[Task.Delay](http://msdn.microsoft.com/en-us/library/hh139096.aspx)来创建延迟。这将具有与控制下载速度相同的效果`Thread.Sleep`，但不会阻塞线程。

不幸的是，我没有你的例子。

# php - 如何使用zend框架组件

> ID：15449148
> 
> 赞同：0
> 
> 时间：2013-03-16T12:16:49.873
> 
> 标签：php, zend-framework

我是 php zend 框架的新手。我想在我的 ERP 项目中实现 php。ERP项目是针对钻戒的。

我尝试使用 Zend.frameword 的用户指南创建简单的项目`http://framework.zend.com/manual/2.1/en/index.html`

我将使用zend framework 2.1

我想从用户注册、用户角色和权限开始。

我检查了 zend_permission 和 zend_session。但我不清楚如何开始。

谁能告诉我如何开始。

另请参阅有关用户权限、会话、数据库适配器和 zend_ajax 的任何教程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:28:38.993

首先，放慢脚步。

您已声明您将使用 Zend Framework 2.1，然后继续询问有关 Zend Framework 1.x 的问题。（带下划线的类名是 ZF1，Zf2 是 PHP5 命名空间）

使用 Zend Framework 1 学习起来并非易事，而 Zend Framework 2 则更糟。

对于 ZF1，从[http://akrabat.com/zend-framework-tutorial/](http://akrabat.com/zend-framework-tutorial/)和[http://framework.zend.com/manual/1.12/en/learning.quickstart.html开始](http://framework.zend.com/manual/1.12/en/learning.quickstart.html)

您可以将相同的站点用于他们的 ZF2 教程，但您可能需要更多内容，例如[使用 Zend Framework 2 进行 Web 开发](https://rads.stackoverflow.com/amzn/click/com/B00A9Y4HLU)。（这是迄今为止我发现的唯一一本 ZF2 书）

通常要使用特定组件，最简单的方法是为您要使用的 Zend 框架库实现自动加载器。理清所有依赖关系并不总是那么容易，尽管 ZF2 比 ZF1 更好。

# cakephp-2.1 - 我们如何在没有数据库的情况下设置 cakephp？

> ID：15449149
> 
> 赞同：7
> 
> 时间：2013-03-16T12:16:59.980
> 
> 标签：cakephp-2.1

在少数项目中我们不需要数据库，那么我们如何在本地机器上设置 cakephp 而无需修改数据库配置？现在我做了什么......我创建了数据库并修改了配置文件。但是我的数据库没有表，它只是浪费数据库......所以请提出更好的方法来做到这一点。

先感谢您..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-08T19:22:26.087

在 CakePHP 2.3.x 中，我只需在数据库配置中使用一个空字符串作为数据源，它就可以正常工作。

数据库配置（*app/Config/database.php*）几乎是空的，它看起来像这样：

```
class DATABASE_CONFIG {
    public $default = array(
        'datasource' => '',
    );
} 
```

你必须告诉你的 AppModel 不要使用数据库表，否则你会得到一个错误：“*找不到数据源类*”。仅在后代模型中设置 $useTables 是不够的。

```
class AppModel extends Model {
    public $useTable = false;
} 
```

我还没有遇到任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-08T23:25:57.000

无论您不使用表，Cakephp 实际上都会尝试连接到数据库，因此使用它

```
class MyModel extends AppModel {
    public $useTable = false;
} 
```

这只是一个错误，在 cakephp 上创建应用程序是小菜一碟。为了在没有数据库的情况下开始开发，您必须执行以下步骤。

1.  创建伪造的 dbo 源

在 app/Model/Datasource/Dbo/ 中创建文件 DboFakeDboSource.php 并将以下代码放入其中

```
class DboFakeDboSource extends DboSource {
  function connect() {
    $this->connected = true;
    return $this->connected;
  }
  function disconnect() {
    $this->connected = false;
    return !$this->connected;
  }
} 
```

1.  设置默认连接

下一步是告诉 cakephp 默认使用 dbo 源。去改变database.php中的默认连接是这样的

```
var $default = array(
  'driver' => 'FakeDboSource'
); 
```

1.  微调模型

第三步是确定 $useTable = false; 包含在每个模型中，因此将其添加到 AppModel.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T13:23:43.813

You can just leave default datasourse settings empty in database.php and for Models you use, specify that it doesn't need corresponding table in DB like following:

```
class MyModel extends AppModel {
    public $useTable = false;
} 
```

# java - 在 JFrame 中布局 JPanel

> ID：15449152
> 
> 赞同：2
> 
> 时间：2013-03-16T12:17:27.903
> 
> 标签：java, swing, layout

我对 Java 上的 GUI 知之甚少，因为我更多的是在后端而不是在视图端，所以我在 Jframe 上正确对齐和布局东西时遇到了问题。基本上我想得到这些结果

![在此处输入图像描述](../Images/18fac84d675296f2e6b92de100be05bd.png)

图像已经说明了一切，但是当我运行我的代码时我所拥有的是这个。

![在此处输入图像描述](../Images/3cd68cf7e3f8fa948262b7693307c508.png)

两端没有填充，面板正好在 Jframe 的边框上，我想纠正，我不想有这种面板与 Jframe 大小相同的布局，在至少两端会有某种填充。

这是我的代码，这是在我的框架的构造函数上

```
 setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    String[] cNames = {"First Name", "Middle Name","Last Name","Status"};
    Object[][] data = {{"John Doe", "John Doe", "John Doe", "Single"},
                       {"Doe John", "Doe John", "Doe John", "Married"}};
    JTable table = new JTable(data, cNames);
    table.setPreferredScrollableViewportSize(new Dimension(500, 70));

    jScrollPane1 = new JScrollPane(table);

    listPahel = new JPanel();
    listPahel.setLayout(new BorderLayout());
    listPahel.add(jScrollPane1, BorderLayout.CENTER);

    add(listPahel); 
```

上面的代码重新进入上面的第二张图片

如果您有任何见解，请赐教

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T12:23:31.797

最简单的方法是在您的`JPanel`:

```
listPahel.setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T12:26:37.223

1.  将 EmptyBorders 添加到 JPanel

    或者

2.  在 JFrame 的 EAST、WEST、NORTH、SOUTH 区域添加空的 JPanel（四个），并将 JScrollPane 放在 CENTER 区域的 JPanel 中，然后在 CENTER 区域周围 10pixels 内创建间隙

    然后到

3.  将 JPanel 的 LayoutManager 包含 JScrollPane 从 FlowLayout（API 中默认实现）更改为 BorderLayout

# database - HTML5 数据库类型表

> ID：15449153
> 
> 赞同：0
> 
> 时间：2013-03-16T12:17:28.857
> 
> 标签：database, html

我知道如何使用 CFML 制作 MySQL 数据库表。然而，我试图为我的工作制作一个应用程序，他们没有 MySQL、PHP、cFML 或任何其他系统。我想知道是否可以在 html5 中制作一个可编辑的表格，以允许其他计算机上的用户查看信息。ie 在您的 1 号隔间的计算机上，您输入您的姓名和地址。在我位于 2 号隔间的电脑上，我从我们的 Intranet 中打开了该页面，可以看到您的姓名和地址。

我可以使用的唯一存储类型是 MS Access。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:55:39.533

抱歉不行。

有本地存储和 IndexeDB，但这些仅针对单个浏览器隔离。

Firefox 和 Chrome 的尖端版本支持 WebRTC，其中包括允许点对点数据交换，所以如果你真的想要，你可以在该实验技术之上构建自己的去中心化 p2p 数据库，……但它是会*很难*的。比仅仅在其中一台机器上安装 LAMP 要困难得多。

# c# - 列表<> .ForEach 未找到

> ID：15449160
> 
> 赞同：3
> 
> 时间：2013-03-16T12:18:19.480
> 
> 标签：c#, windows-8, windows-store-apps, .net-4.5

我正在将 Windows Phone 应用程序移植到 Win 8，我找到了这个绊脚石，但找不到解决方案。

我有一个：

```
 List<items> tempItems = new List<items>(); 
```

和

```
ObservableCollection<items> chemists = new ObservableCollection<items>(); 
```

我已将项目添加到我的 tempItems 等，所以我这样做：

```
 tempItems.OrderBy(i => i.Distance)
                .Take(20)
                .ToList()
                .ForEach(z => chemists.Add(z)); 
```

但我得到这个错误：

```
Error   1   'System.Collections.Generic.List<MyApp.items>' does not contain a definition for 'ForEach' and no extension method 'ForEach' accepting a first argument of type 'System.Collections.Generic.List<MyApp.items>' could be found (are you missing a using directive or an assembly reference?) 
```

为什么会这样，Win8没有这个功能吗？我引用以下内容：

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.IO;
using System.Linq;
using System.Net.Http;
using System.Net.NetworkInformation;
using System.Xml.Linq;
using Windows.Devices.Geolocation;
using Windows.Foundation;
using Windows.Foundation.Collections;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Controls.Primitives;
using Windows.UI.Xaml.Data;
using Windows.UI.Xaml.Input;
using Windows.UI.Xaml.Media;
using Windows.UI.Xaml.Media.Imaging;
using Windows.UI.Xaml.Navigation;
using System.Collections.ObjectModel; 
```

如果 ForEach 不可用，是否有替代方法可以做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-16T12:36:28.950

根据[MSDN 条目](http://msdn.microsoft.com/en-us/library/windows/apps/6sh2ey19.aspx)，Windows 商店应用程序中不提供 ForEach（请注意成员后面的小图标）。

话虽如此，ForEach 方法通常并不比简单地使用 foreach 循环更有帮助。所以你的代码：

```
tempItems.OrderBy(i => i.Distance)
         .Take(20)
         .ToList()
         .ForEach(z => chemists.Add(z)); 
```

会成为：

```
var items = tempItems.OrderBy(i => i.Distance).Take(20);
foreach(var item in items)
{
    chemists.Add(item);
} 
```

我会争辩说，就表现力而言，这并不重要。

# java - JAVA2d设置元素在正确的位置

> ID：15449166
> 
> 赞同：0
> 
> 时间：2013-03-16T12:18:46.483
> 
> 标签：java, awt, java-2d

我正在用 JAVA2D 编写一个简单的游戏。我创建了一个类“地面”。当我像这样创建此类的对象时...

```
Ground g1 = new Ground("WATER", 50, 100, 5, 5) //params: type of surface, margin-left,     margin-top, width, height 
```

...我创建了一个 5x5 像素的正方形（在 JAVA2D fillRect 函数中）。现在我想在我的框架上的任何地方设置这个正方形。这是 HTML 中的一个简单示例：当我们想在 HTML 中移动一个简单的框时，我们使用样式

```
<div style="margin-left: 50px; margin-top: 100px"></div> 
```

瞧。在 JAVA 中，只有布局对我没有帮助。布局不给我设置边距的自由。

setBounds 不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:31:30.707

只要您将布局设置为 null，setBounds() 就应该可以工作我这里有一些代码可以演示这一点

```
 import javax.swing.JButton;
    import javax.swing.JFrame;
    import javax.swing.JPanel;

    public class Test extends JFrame
    {
       private JPanel panel;
       private JButton button;

       public Test()
       {
           panel = new JPanel();
           button = new JButton("I am a Button");
           panel.setLayout(null);
           button.setBounds(80,100,50,50);
           panel.add(button);

           this.setTitle("setBounds() Test");
           this.setSize(480,340);
           this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
           this.setVisible(true);
           this.getContentPane().add(panel);
       }

       public static void main(String[] args) 
       {
           new Test();
       }
 } 
```

# python - Python：如何打印没有空格？

> ID：15449170
> 
> 赞同：-4
> 
> 时间：2013-03-16T12:19:16.930
> 
> 标签：python

我有以下代码：

```
for i in range(1,6):
    print 'Answer',i,':' 
```

输出是：

```
Answer 1 :
Answer 2 :
Answer 3 :
Answer 4 : 
```

我希望它是这样的：

```
Answer 1:
Answer 2:
Answer 3:
Answer 4: 
```

即整数和'：'之间没有空格怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T12:20:09.790

使用字符串格式：

```
for i in range(1, 5):
    print 'Answer {0}:'.format(i) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:21:45.247

尝试使用这个：

```
for i in range(1,5):
    print "Answer %d:" % i 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T12:23:42.200

选择：

```
for i in range(1,6):
    print 'Answer '+str(i)+':' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T12:30:59.107

```
for i in range(1, 5):
    print "Answer", str(i)+':' 
```

当您使用 打印时`','`，会自动添加空格，您可以通过使用`+`或将字符串彼此相邻放置（在 Python 2.x 中）来连接输出，如下所示：

```
for i in range(1, 5):
    print 'Answer'+str(i), ':'
    print 'Answer%d'':'%i 
```

检查差异！

# c++ - 在 C++ 中引发运行时警告

> ID：15449171
> 
> 赞同：3
> 
> 时间：2013-03-16T12:19:17.157
> 
> 标签：c++, exception, warnings, robustness

几周前我开始使用异常，现在我想知道是否有办法只发出警告。如果未捕获此警告，则不应强制应用程序退出。我会给你一个例子，我想在什么情况下使用它。

有一个系统可以将属性附加到唯一 ID。当我以某种方式尝试将属性添加到尚不存在的 id 时，系统应在内部为我创建该 id，然后将属性添加到其中并返回结果。当然，这不能安静地完成。但由于应用程序可以继续运行，我不想抛出异常。

我如何通知某些事情不太正确，但系统仍在运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T12:22:20.210

你想通知谁？最终用户？在这种情况下，只需向`cerr`. 或者更好的是，编写一个包装函数（例如`LOG_WARNING()`）以受控方式执行此操作。或者更好的是，使用[日志框架](https://stackoverflow.com/questions/3084052/c-logging-library-recommendation)。

* * *

> 但由于应用程序可以继续运行，我不想抛出异常。

请注意，异常不一定会导致应用程序终止。您可以捕获堆栈更高的异常，并适当地处理这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:22:54.433

不，那是不可能的。您只能抛出和捕获异常。如果你想*厚脸皮*，你可以这样做

```
class warning : public std::exception
{
public:
     warning(const std::string& msg) {}
     const char* what() { return msg.c_str(); } //message of warning
private:
     std::string msg;
}; 
```

那么你就可以：

```
throw warning("this is a warning"); 
```

如果您愿意，这可能是一个人为制造的警告系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-17T23:20:25.163

虽然没有发出警告。我相信您正在寻找的功能可从[`errno`](http://www.cplusplus.com/reference/cerrno/errno/)

您可以将其设置为任何[标准错误](http://www.cplusplus.com/reference/system_error/errc/)或编写自己的错误代码。（不过，请好好记录它们。）

如果您的库旨在供其他开发人员使用，这可能会很有用。一个可能有用的例子是使用 JSON 解析器。JSON 支持具有任意精度的任意大数字。因此，如果您的解析器在内部使用双精度数来表示数字，如果它遇到一个它无法表示的数字，那么它可以将数字四舍五入到最接近的可表示数字集合`errno=EDOM;`（参数超出范围），它将决定留给开发商关于四舍五入是否重要。如果你想变得超级好，你甚至可以添加一种方法来检索回合的位置，甚至可能使用原始文本。

综上所述，这只应在以下情况下使用：

*   在某些情况下确实可以完全绕过警告
*   警告的根源是您正在编写的库的输入
*   在某些情况下，图书馆的消费者可能会关心警告，但大多数时候不会。
*   没有更合适的方式来返回信息（例如通过引用传递的状态，具有不需要状态的重载）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T12:21:26.667

只需将消息打印到 stderr 或您的日志。

# php - 在foreach cicle中查找数组的最后一个值

> ID：15449172
> 
> 赞同：0
> 
> 时间：2013-03-16T12:19:53.017
> 
> 标签：php

我将数据存储在一个数组（$rows）中。为了读取数组并生成一个动态表，我使用 foreach 函数。

```
<table>

    foreach ($rows as $row) {
        echo "<tr>";
        echo "<td>" . $row['field1'] . "</td>";
        echo "<td>" . $row['field2'] . "</td>";
        echo "<td>" . $row['filed3'] . "</td>";
        echo "</tr>"; 
    }

</table> 
```

我的目标是找到数组的最后一个值（末尾），以便为显示的最后一行更改 TR 元素的类。我怎么能这样做？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:26:52.507

试试这个：

```
foreach ($rows as $key => $row) {
    $end = end($rows) === $row ? 'class="last"' : '';
    echo "<tr $end>";
    echo "<td>" . $row['field1'] . "</td>";
    echo "<td>" . $row['field2'] . "</td>";
    echo "<td>" . $row['filed3'] . "</td>";
    echo "</tr>"; 
} 
```

此方法也适用于多维数组。

[http://codepad.org/HQG9ytBX](http://codepad.org/HQG9ytBX)

**编辑**. 正如评论中所指出的，如果数组中的某些值重复（最后一个），这种方法可能会触发错误的最终结果。正确的防弹版本应该是：

```
foreach ($rows as $key => $row) {
    $end = end($rows) === $row && $key === key($rows) ? 'class="last"' : '';

    // ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:27:45.270

```
foreach ($rows as $row) {
$is_last_row = ++$i == count($rows);
        echo "<tr>";
        echo "<td>" . $row['field1'] . "</td>";
        echo "<td>" . $row['field2'] . "</td>";
        echo "<td>" . $row['filed3'] . "</td>";
        echo "</tr>"; 
    } 
```

这里 $i 应该是一个未使用的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T12:36:50.020

试试这个

```
$numItems = count($rows);
$i = 0;
foreach($rows as $row) {

$trClass = 'firstclass';
if(++$i === $numItems) 
{
$trClass = 'lastclass';
}

echo "<tr class='$trclass'>";
    echo "<td>" . $row['field1'] . "</td>";
    echo "<td>" . $row['field2'] . "</td>";
    echo "<td>" . $row['filed3'] . "</td>";
    echo "</tr>"; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T12:39:07.577

```
// first, let's find out the last key
end($rows);
$last = key($rows);

// then just loop over
foreach ($rows as $key => $row) {
        if ($key == $last) {
            // last leaf of the summer...
        }
        echo "<tr>";
        echo "<td>" . $row['field1'] . "</td>";
        echo "<td>" . $row['field2'] . "</td>";
        echo "<td>" . $row['filed3'] . "</td>";
        echo "</tr>"; 
} 
```

# actionscript-3 - 如何检查变量是否已定义？

> ID：15449173
> 
> 赞同：1
> 
> 时间：2013-03-16T12:19:53.440
> 
> 标签：actionscript-3, haxe

在 AS3 中，我们说 if a!= undefined ，但是如何检查 haxe？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T14:51:48.837

本指南可能对您有用。 [http://www.openfl.org/archive/developer/documentation/actionscript-developers/](http://www.openfl.org/archive/developer/documentation/actionscript-developers/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T15:33:34.567

检查它`null`

[http://haxelearning.wikispaces.com/Data+Types+and+Variables#x-Haxe](http://haxelearning.wikispaces.com/Data+Types+and+Variables#x-Data)中的数据类型——未知

# perl - 试图写一个简单的循环

> ID：15449175
> 
> 赞同：2
> 
> 时间：2013-03-16T12:19:56.360
> 
> 标签：perl

有人可以帮我一个循环吗？我打算编写一个程序，它只是要求您猜测 1 到 10 之间的数字。如果不是正确答案，您将获得另一个机会，等等。

我可以让我的脚本一次打印正确/不正确，但是我如何在这个脚本中添加用户重试的可能性（直到他们猜对了数字）？

这是我的基本脚本，我确信它非常简单并且可能充满错误。有人可以帮我解决这个简单的问题吗？

很抱歉布局不好，但我不明白如何将我的脚本放在这个网站上，对不起！

```
use strict;
use warnings;

print "Hello, I've thought of a number, do you know what number it is?\n";
sleep (1);
print "Try and guess, type in a number between 1 and 10!\n";
my $div = <STDIN>;
my $i = 0;
my $int = int(rand (10)) + 1;
chomp $div;
if  ($div < $int) {
    print ("The number I though of is higher than $div, try again?\n");
}

if ($div > $int) {
    print ("The number I though of is lower that $div, try again?\n");
}

if ($div == $int) {
    print ("Amazing, you've guessed mt number\n");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:27:42.247

使用直到循环

```
my $guessed = 0; 
do {
    print "Try and guess, type in a number between 1 and 10!\n";

    my $div = <STDIN>;

    ...;

    if ($div == $int) {

        print ("Amazing, you've guessed mt number\n");
        $guessed = 1;

    }
} until ($guessed) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T13:35:29.807

更直接的方法是[`while`循环](http://perldoc.perl.org/perlsyn.html#Compound-Statements)。

```
use strict;
use warnings;

print "Hello, I've thought of a number, do you know what number it is?\n";
sleep (1);
my $int = int(rand (10)) + 1;
print "Try and guess, type in a number between 1 and 10!\n";

while (my $div = <STDIN>) {
  chomp $div;
  if  ($div < $int) {
      print "The number I though of is higher than $div, try again?\n";
  } 
  elsif ($div > $int) {
    print "The number I though of is lower that $div, try again?\n";
  }
  else {
    print "Amazing, you've guessed mt number\n";
    last;
  }
} 
```

虽然（双关语）你的代码已经非常好（你正在使用`strict`并且`warnings`没有语法错误，是的！）我改变了一些东西，还有一些我建议改进的地方。

但首先，让我们看一下循环。`while`只要条件为真，程序就会一直停留在循环中。由于 Perl 认为用户可以输入的所有内容（甚至是空行）都是正确的，所以这是永远的。这很好，因为有退出循环的条件。它`else`在`if`. 该`last`语句告诉 Perl 退出循环。如果`else`没有执行，它将回到`while`块的开头，用户必须重试。永远。

我所做的更改：-您不需要`$i`，因为您没有使用它-您使用了三个单独`if`的语句。`()`由于在这种情况下只有三个条件中的一个可以为真，我将它们合并为一个 - 不需要括号`print`

建议： - 您应该为变量命名它们的作用，而不是它们是什么。`$int`不是一个好名字。我会去`$random`，甚至`$random_number`。如果您稍后必须返回您的代码，那么详细程度很重要。- 有一个[名为的功能`say`](http://perldoc.perl.org/functions/say.html)，您可以使用`use feature 'say';`. 它`say "stuff"`相当于`print "stuff\n"`.

* * *

**编辑：**

如果您想添加与用户输入的号码没有直接关系的其他条件，您可以添加另一个`if`.

```
while (my $div = <STDIN>) {
  chomp $div;

  if ($div eq 'quit') {
    print "You're a sissy... the number was $int. Goodbye.\n";
    last;
  }

  if ($div < $int) {
      print "The number I though of is higher than $div, try again?\n";
  } 
  elsif ($div > $int) {
    print "The number I though of is lower that $div, try again?\n";
  }
  else {
    print "Amazing, you've guessed mt number\n";
    last;
  }
} 
```

您还可以添加检查以确保用户输入了一个数字。如果输入了单词或字母，您当前的代码将产生警告。为此，您将需要一个正则表达式。[在perlre](http://perldoc.perl.org/perlre.html)中阅读它们。`m//`是与一起使用的[匹配运算符](http://perldoc.perl.org/functions/m.html)`=~`。`\D`匹配任何不是数字（0 到 9）的字符。[`next`](http://perldoc.perl.org/functions/next.html)跨过块的其余部分`while`并开始检查`while`条件。

```
while (my $div = <STDIN>) {
  chomp $div;

  if ($div =~ m/\D/) {
    print "You may only guess numbers. Please try again.\n";
    next;
  }

  # ...
} 
```

因此，完整的检查意味着“查看用户输入的内容，如果里面除了数字之外还有其他内容，请投诉并让他再试一次”。

# c++ - c ++用变量决定数组大小

> ID：15449180
> 
> 赞同：1
> 
> 时间：2013-03-16T12:20:32.023
> 
> 标签：c++, arrays

我在一个类中有一个数组，它是：

```
private:
    static const int MAX_EQUIPS=100;
    equip a_t[MAX_EQUIPS];
    int a_n; 
```

然后他们主要告诉我 MAX_EQUIPS 大小应该是多少，我怎样才能让它改变？它从 X 开始，然后在输入新的 valor 时增加或减少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:23:50.207

您似乎指的是 C++ 中不允许的[可变长度数组。](http://en.wikipedia.org/wiki/Variable-length_array)存在许多可能的替代方案，例如您可以使用[向量](http://www.cplusplus.com/reference/vector/vector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:25:20.450

C++ 解决方案是：

```
class MyClass
{
public:
  MyClass( size_t n ) :
    a_t( n )
  {
  }

private:
  std::vector< int > a_t;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T12:26:21.107

我建议为此使用 std::vector ，因为它本身会包装大部分内容。

```
private:
    std::vector<int> a_t; 
```

然后，当您获得大小时： a_t.resize(MAX_EQUIPS);

你的 a_n 将是 a_t.size()。

但是，如果你**真的**想自己做，你需要做一些分配（你应该与 ctor/dtor 语义相关联。

# html - 使用 display:inline-table 将第二个内联框向下移动一点

> ID：15449182
> 
> 赞同：0
> 
> 时间：2013-03-16T12:21:03.877
> 
> 标签：html, css

我是 CSS、HTML 和任何其他 UI 相关技术的新手，所以如果这个问题不是一个聪明的问题，请接受我的道歉！

我希望多个带有背景图像的框是可点击的，并且在中间有一个文本（水平和垂直）。

我有如下的HTML代码：

```
<a href="www.mydoamin.com" class="div_a">
    <span class="wrapper">
      <span class="div_txt">Contentdas asd ad adasd asd asdad </span>
    </span>
</a>
<a href="www.mydoamin.com" class="div_a">
    <span class="wrapper">
      <span class="div_txt">Content</span>
    </span>
</a> 
```

使用以下 CSS 代码：

```
a.div_a {
      display:inline-table;
      width:200px;
      height:100px;
      background-color:#CCC;
      background-image:url( http://jsfiddle.net/img/logo.png);
    text-align:center;
    top:0;
    }

.wrapper {
    display: table-cell;
    vertical-align: middle;

} 
```

如您所见，[一切](http://jsfiddle.net/WcCnW/2/)听起来都很好，除了当第一个框的内部文本超过一行时第二个框放错了！

我在这里错过了什么吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:39:39.523

您设置为的元素`inline-table`只需要将其垂直对齐设置为默认值以外的其他值`baseline`：

```
vertical-align: middle; 
```

[http://jsfiddle.net/WcCnW/4/](http://jsfiddle.net/WcCnW/4/)

# css - 如果存在行跨度，Chrome 不支持行高

> ID：15449185
> 
> 赞同：1
> 
> 时间：2013-03-16T12:21:29.620
> 
> 标签：css, google-chrome, html-table

我想用一个跨越两行的单元格制作一个表格。第二行的高度尺寸必须尽可能小。例子：

html:

```
<table>
    <tr id="row-1">
        <td>
            1st row
        </td>
        <td rowspan="2">
            a <br />
            a <br />
            a <br />
            a <br />
            a <br />
            a <br />
            a <br />
            a <br />
        </td>
    </tr>
    <tr id="row-2">
        <td>
            2nd row
        </td>
    </tr>
</table> 
```

CSS：

```
td
{
    border: 1px solid black;
}
#row-2
{
    height: 1px;
} 
```

[http://jsfiddle.net/xp7vz/](http://jsfiddle.net/xp7vz/)

它适用于 Firefox (19.0.2)。在 Chromium (25.0.1364.160) 上，具有最小高度的行是第一个！

编辑：问题是由这个错误引起的：[http ://code.google.com/p/chromium/issues/detail?id=78724](http://code.google.com/p/chromium/issues/detail?id=78724)

我怎样才能用 CSS 破解它？目前我正在使用JS，将第一行高度设置为rowspan单元格的高度减去第二行的高度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T23:27:07.880

发现：诀窍是将另一个表格放在表格的一个单元格中，其中包含非行跨度内容，从另一个单元格中删除行跨度并将外部和内部表格高度设置为 100%。可怕但有效。

HTML：

```
<table id="outer"><tbody><tr>
    <td>
        <table id="inner"><tbody>
            <tr id="row-1">
                <td>1st row</td>
            </tr>
            <tr id="row-2">
                <td>2nd row</td>
            </tr>
        </tbody></table>
    </td>
    <td>
        a<br />
        a<br />
        a<br />
        a<br />
        a<br />
        a<br />
        a<br />
        a<br />
        a<br />
    </td>
</tr></tbody></table> 
```

CSS：

```
#row-2 
{
    height: 1px;
}
#outer, #inner 
{
    height:100%;
} 
```

[http://jsfiddle.net/xp7vz/3/](http://jsfiddle.net/xp7vz/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T19:23:55.297

卢卡斯·马洛尔的回答几乎奏效了。

碰巧**IE**不尊重表格高度= 100％:(对我来说解决方案很简单，我只是以像素为单位设置高度，因为我知道第一列的高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T12:52:56.967

尝试`position:fixed`

它有点工作。[http://jsfiddle.net/43CEX/](http://jsfiddle.net/43CEX/)

我认为总的来说，您希望将 div 用于此类工作，因为表格本身会自行增长

**更新**

这个[http://jsfiddle.net/h4Ycj/](http://jsfiddle.net/h4Ycj/)

或者这个 [http://jsfiddle.net/m7eqm/](http://jsfiddle.net/m7eqm/)

# android - 使用后的最终视图或无效视图？什么更优化？

> ID：15449187
> 
> 赞同：0
> 
> 时间：2013-03-16T12:21:35.080
> 
> 标签：android, performance, optimization

我想让我的应用程序尽可能优化。哪个代码更优化（速度、内存使用等），为什么？你觉得怎么样 ;-）？

1.

```
 final Button testButton = (Button) findViewById(R.id.testButton);
    testButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {
                 (some code here)
        }
    }); 
```

2.

```
 Button testButton = (Button) findViewById(R.id.testButton);
    testButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {
                 (some code here)
        }
    });
    testButton = null; 
```

附言。你有任何Android代码优化技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:37:31.957

我怀疑这是您应用程序的瓶颈。我根本不会担心这个。

此外，如果它`testButton`是一个局部变量，它将在方法返回时超出范围，并将其设置为 null 将无效。在您的应用程序的一行代码中使用或不使用 final 将无法衡量。尝试制作用户实际需要更快等待的部分。

也就是说，我觉得里面有 final 关键字使代码更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:47:31.180

我同意vidstige。

您刚刚添加`static`到您的问题中，这没有任何意义。静态 final 仅用于常量。

方法中的静态最终变量定义也无法编译！所以跳过它。Final 在那里就足够了，基本上是一种保险，如果你不想这样做，你就不会重用变量。

# java - 从maven导入自己的项目时出错

> ID：15449196
> 
> 赞同：2
> 
> 时间：2013-03-16T12:22:56.463
> 
> 标签：java, android, maven, android-maven-plugin

我创建了一个 apklib，如下所示：[https ://code.google.com/p/maven-android-plugin/wiki/ApkLib](https://code.google.com/p/maven-android-plugin/wiki/ApkLib)

所以我用这个命令创建了 zip/apklib

```
zip -r listviewanimations.apklib listviewanimations/ 
```

然后按如下方式部署到本地 maven

```
mvn org.apache.maven.plugins:maven-install-plugin:2.4:install-file -DgroupId=com.jmanzano.animations -Dfile=listviewanimations.apklib -DartifactId=library -Dversion=1 -Dpackaging=apklib 
```

现在，将依赖项添加到我的项目中

```
 <dependency>
        <groupId>com.jmanzano.animations</groupId>
        <artifactId>library</artifactId>
        <version>1</version>
        <type>apklib</type>
    </dependency> 
```

但是当我输入

```
maven clean package 
```

我收到这个错误

```
[ERROR] Failed to execute goal com.jayway.maven.plugins.android.generation2:android-   maven-plugin:3.4.0:generate-sources (default-generate-sources) on project com-parkuik-  android: Execution default-generate-sources of goal   com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.4.0:generate-sources      failed: Cannot read XML from:        file:/Users/javiermanzanomorilla/IdeaProjects/parkuik/app/target/unpack/apklibs/com.jmanzano.animations_library_apklib_1/AndroidManifest.xml; /Users/javiermanzanomorilla/IdeaProjects/parkuik/app/target/unpack/apklibs/com.jmanzano.animations_library_apklib_1/AndroidManifest.xml (No such file or directory) -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <goals> -rf :com-parkuik-android 
```

希望它足够清楚，你可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:21:11.260

解决了，我只是创建了错误的 Zip。它在 src 和 top 之间有一个文件夹

# java - 尝试将破折号更改为带有循环的字母

> ID：15449197
> 
> 赞同：0
> 
> 时间：2013-03-16T12:22:58.513
> 
> 标签：java, string, loops, replace, char

所以我正在为这个全新的、从未听说过的游戏 hangman (ha.) 编写一个程序，而且我很难编写一个循环来给我想要的结果。我被困在一个正确的字母被猜到的地方（通过按钮按下）并在代表隐藏单词的破折号行中显示正确的字母。现在，当我运行这个循环时，我的测试器弹出窗口仍然会弹出“匹配！---”或者当前的秘密单词有多少破折号。从字面上看，就好像 replaceAll 实际上并没有替换它！我已经为此困扰了好几个小时，没有休息，所以如果我错过了一些非常明显的东西，我不会感到惊讶。

```
JButton btnA = new JButton("A\n");
btnA.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent arg0) {
        String letter = "a";
        char ch = 'a';
        if (go.getWordInQuestion().contains(letter)) {
            for(int i = 0; i<go.getWordInQuestion().length(); i++) {
                //Replace dashes with correctly guessed letter              
                if(go.getWordInQuestion().charAt(i)== 0)
                    go.getGuessLength().replaceAll("[^" + letter + "]", "_").charAt(i);
            }
            //check to see what the new value of the "hidden word" getGuessLength looks like                
            JOptionPane.showMessageDialog(null, "Match! " + go.getGuessLength());
            txtGuess.setText("" + go.getGuessLength()); 
        } else
            JOptionPane.showMessageDialog(null,"No Match :(");
    }
}); 
```

*****编辑******* 好的，所以我已经取得了进展（我认为）。我现在写了一个循环，将破折号更改为字母！！唯一的问题？它改变了所有这些。-___- 所以现在当我按下按钮 A 时，如果有匹配项，而不是 ---，它将读取 aaa。我绝对意识到这个问题可能非常初级，但是当涉及到 java 时，我是一个学习缓慢的人！我感谢所有积极和信息丰富的反馈！

```
JButton btnA = new JButton("A\n");
btnA.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent arg0) {
        String letter = "a";
        StringBuilder guessA = new StringBuilder('a');
        for(int i = 0; i<go.getGuessLength().length();i++) {
            if(go.getWordInQuestion().charAt(i)=='a') {
                String partialWord = go.getGuessLength().replace("-", letter);
                txtGuess.setText(partialWord);
                JOptionPane.showMessageDialog(null,"Match! " + partialWord);
            }
        }
    }
}); 
```

*****编辑两个******

好吧！我想我终于解决了这个问题，感谢你们的帮助！当用户按下“A”按钮时，如果隐藏单词中有 A，现在它已成功替换为破折号！呜呼！

```
btnA.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent arg0) {
        String letter = "a";
        StringBuilder guessA = new StringBuilder(go.getGuessLength());
        if(go.getWordInQuestion().contains(letter)) {
            for(int i = 0; i<go.getGuessLength().length();i++) {
                if(go.getWordInQuestion().charAt(i)=='a') {
                    StringBuilder partialWord = guessA.replace(i,i+1, letter);
                    txtGuess.setText(guessA.toString());
                    JOptionPane.showMessageDialog(null,"Match! " + partialWord);
                }
            }
        } else
            JOptionPane.showMessageDialog(null, "Incorrect");
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:09:11.630

这行代码没有做任何事情：

```
go.getGuessLength().replaceAll("[^" + letter + "]", "_").charAt(i); 
```

`replaceAll()`不修改字符串（字符串在 Java 中是不可变的）。它返回一个*新*字符串，其中字符已被替换。您正在调用`charAt(i)`这个新字符串，并且不要对这个字符做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:13:56.303

`replaceAll()`使用正则表达式作为替换目标。您可能只想要`replace()`，它仍然替换所有匹配项，但使用纯字符作为其目标。

也就是说，最简单的解决方案只是一行代码，它使用`replaceAll()`并将猜测的字母转换为匹配所有*其他*字母的正则表达式。

鉴于：

```
String word = "foo"; // the word people are trying to guess
String guesses = "one"; // the characters guessed so far 
```

这是将产生所需输出的一行：

```
String display = word.replaceAll("[^" + guesses + "]", "-"); 
```

使用上述值执行时，`display`将为`-oo`.

# c++ - QtCreator 调试器是否有一些转换 - 比如 ToString()

> ID：15449198
> 
> 赞同：1
> 
> 时间：2013-03-16T12:23:01.437
> 
> 标签：c++, qt, qt-creator

当我使用 QTC (Creator) 调试我自己的 C++ 类时，我只能在调试器中看到地址值。

![唯一地址](../Images/55651dac4366eeb445609e263b319873.png)

我的课程没有`QObjects`（因为它们是轻量级的并且只代表值）。但是有没有可以重载的方法/运算符？我试过（这不起作用）：

```
operator QString() const { return ..getMeMyQStringRepresentation.. ;} 
```

而不是`@0x....`我想看`..getMeMyQStringRepresentation..`。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:33:23.090

我相信 QtCreator 实际使用的调试器与较低级别的表示相关，具体取决于您的配置。但是，我相信标准安装最终会使用 GDB。

也就是说，如果在 GUI 中找不到您想要做的事情，您可以移动到本机调试器并执行类似“print from.operator string()”之类的操作（如果您已经实现了它）。[在此处](http://qt-project.org/doc/qtcreator-2.6/creator-debug-mode.html)检查“与本机调试器交互” 。

另一种简单（但有点烦人）的方法是创建一个包含相同信息的局部变量，即显式为字符串（或 char 数组）或 int 或您想要的任何表示形式。

# android - 谷歌地图显示

> ID：15449202
> 
> 赞同：0
> 
> 时间：2013-03-16T12:23:24.427
> 
> 标签：android, google-maps

我在谷歌地图屏幕中遇到问题，它显示空白谷歌地图屏幕包含整个屏幕地图中的瓷砖没有生成

我已经正确完成了所有设置，根据从网上获取相同问题的解决方案，我仍然无法解决问题，请任何人都可以帮助我吗？

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.gmaptest5"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="17" />    

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name="com.example.gmaptest5.Gmap5MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

  <uses-library android:name="com.google.android.maps"/>
    <meta-data
  android:name="com.google.android.maps.v2.API_KEY"
  android:value="MY API KEY"/>

  </application>

 <uses-permission android:name="android.permission.INTERNET"/>
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
 <uses-permission     android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

  <uses-feature
  android:glEsVersion="0x00020000"
  android:required="true"/>

 <permission
  android:name="com.example.gmaptest5.permission.MAPS_RECEIVE"
  android:protectionLevel="signature"/>
 <uses-permission android:name="com.example.gmaptest5.permission.MAPS_RECEIVE"/> 

 </manifest> 
```

**主.xml**

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
 >
 <com.google.android.maps.MapView
     android:id="@+id/mapview1"
     android:layout_width="fill_parent" 
     android:layout_height="fill_parent" 
     android:enabled="true" 
     android:clickable="true" 
  android:apiKey="MY API KEY" />

 </LinearLayout> 
```

**主.Java**

```
 public class Gmap5MainActivity extends MapActivity {
private MapView myMapView;
LocationManager locationManager;
private Location myLocation;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_gmap5_main);

    myMapView = (MapView)findViewById(R.id.mapview1);
    double lat = 19.7888;
       double longi = 52.535;        

      GeoPoint p = new GeoPoint((int) (lat *1E6),(int) (longi *1E6));
    //GeoPoint p = new GeoPoint((int) (location.getLatitude()* 1000000), (int)  (location.getLatitude()* 1000000));
    MapController mc = myMapView.getController();

    mc.setZoom(18);
    mc.animateTo(p);
    // Enable Sattelite-Mode
    myMapView.setSatellite(true);
    myMapView.getMapCenter();
    myMapView.setBuiltInZoomControls(true);
    myMapView.displayZoomControls(true);
    myMapView.invalidate();   
    myMapView.getOverlays();
    myMapView.getProjection();      
    this.myLocation = new Location("gps");
    this.myLocation.setLongitude(77.52436144125092);
    this.myLocation.setLatitude(13.05096452223662);
    Double lat1 = myLocation.getLatitude();
    Double longi1 = myLocation.getLongitude();
    GeoPoint point = new GeoPoint(lat1.intValue(), longi1.intValue());
    mc.setCenter(point);*/
}
    public boolean onKeyDown(int keyCode, KeyEvent event) 
    {
    if (keyCode == KeyEvent.KEYCODE_I) {
    myMapView.getController().setZoom(myMapView.getZoomLevel() + 1);

    return true;
    } else if (keyCode == KeyEvent.KEYCODE_O) {
    myMapView.getController().setZoom(myMapView.getZoomLevel() - 1);
    return true;
    } else if (keyCode == KeyEvent.KEYCODE_S) {
    myMapView.setSatellite(true);
    return true;
    } else if (keyCode == KeyEvent.KEYCODE_T) {
    myMapView.setSatellite(false);
    myMapView.setTraffic(true);
    return true;
    }
    return false;
    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_gmap5_main, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {
    return false;
}
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:34:19.997

您正在与 混合`Google Map API V1`使用`API V2`，如果您想按照文件`Google Map V2`的外观使用，`Manifest`那么您可以查看我写的关于如何向`Google map API V2`您的应用程序添加的博客文章：

[谷歌地图 API V2 安卓](https://blog-emildesign.rhcloud.com/?p=435)

如果您想使用，`API V1`那么您将不得不更改您的`Manifest`文件，因为它当前设置为使用`API V2`，请点击此链接：

[https://developers.google.com/maps/documentation/android/v1/hello-mapview](https://developers.google.com/maps/documentation/android/v1/hello-mapview)

# c++ - C++ 向量错误：下标超出范围

> ID：15449206
> 
> 赞同：-1
> 
> 时间：2013-03-16T12:23:43.330
> 
> 标签：c++, vector, runtime-error, subscript

我是一个 C++ 菜鸟，目前正在尝试创建一个基于文本的迷宫游戏以获得学位。我正在用一个向量（用于动态大小）替换我当前工作的数组，并向它读取一个 txt 字符文件。

问题：我没有收到 IDE 错误，但收到 RUNTIME ERROR: Debug assertion Failed！表达式：向量下标超出范围！

我用的是pushback而不是RoomFile=data，但不知道是否需要修改其他功能。我在另一个类（播放器）中读​​取数组/向量数据，如果需要，将包含代码。

我到处寻找解决方案，但找不到任何使用类似向量结构的项目。我究竟做错了什么？

## **房间.h**

```
#pragma once
#include <vector>
#include "stdafx.h"

class Room
{
private:        //data acceessed by functions

    char floor;
    char wall;
    char door;
    int width;
    int height;

public: 

    std::vector <char> data;

    Room* North;
    Room* East;
    Room* South;
    Room* West;
    Room* Next;

    int NorthX;
    int NorthY;
    int EastX;
    int EastY;
    int SouthX;
    int SouthY;
    int WestX;
    int WestY;

    char RoomFile;

                //where functions go
    Room(void);
    void CreateRoom(int RoomNo);
    void PrintRoom();
    ~Room(void);

}; 
```

## **房间.cpp**

```
#include <iostream>
#include <fstream>
#include <streambuf>
#include <string>
#include <sstream>
#include "Room.h"
#include <cstdlib>

using namespace std;

Room::Room(void)
{
floor = ' ';
wall = '#';
door = 'X';

width = 11;
height = 11;

North=0;
East=0;
South=0;
West=0;
Next=0;
NorthX=0;
NorthY=0;
EastX = 0;
EastY = 0;
SouthX= 0;
SouthY=0;
WestX=0;
WestY=0;

}

void Room::CreateRoom(int RoomNo)
{
std::vector<char> data;

char RoomFile[255];
ifstream infile;
stringstream ss;

//LOAD CURRENT ROOM FROM FILE

ss << RoomNo;
string str = ss.str();

string fname = ("Room");
fname.append(str);
fname.append(".txt");
infile.open(fname);

infile.clear();
infile.seekg(0);

if(infile.is_open())
{
    while(!infile.eof())        // To get you all the lines.
    {
        int i;
        for(int row = 0; row < width; row++)
        {
            infile.getline(RoomFile, 256);
            i = 0;
            for(int col = 0; col < height; col++)
            {
                data.push_back(RoomFile[i]);
                i++;
            }
        }

    }
}
else
{
    cout << "ERROR: infile not open" << endl; 
}
infile.close();

//ASSIGN DOORS TO ROOMS IF NEEDED

// treating the array as being one-dimensional.
for(int row = 0; row < width; row++)
{
    for(int col = 0; col < height; col++)
    {
        if(North!=NULL)
        {
            if(data[row*height+col]=='X') 
            {
                //data[row*height+col] = door;
                NorthX=row;                     
                NorthY=col;
            }
        }

        if(East!=NULL)
        {
            if(data[row*height+col]=='X') 
            {
                //data[row*height+col] = door;
                EastX = row;
                EastY = col;
            }
        }

        if(South!=NULL)
        {
            if(data[row*height+col]=='X') 
            {
                //data[row*height+col] = door;
                SouthX = row;
                SouthY = col;
            }
        }

        if(West!=NULL)
        {
            if(data[row*height+col]=='X') 
            {
                //data[row*height+col] = door;
                WestX = row;
                WestY = col;
            }
        }

    }
}
}

void Room::PrintRoom()
{

for(int row = 0; row < width; row++)
{

    for(int col = 0; col < height; col++)
    {

        cout << data[col * height + row];
    }
    cout << "\n";                           
}
cout << endl;
}

Room::~Room(void)
{

} 
```

## **堆栈跟踪**

```
// throw -- terminate on thrown exception REPLACEABLE
#define _HAS_EXCEPTIONS 0
#include <cstdio>
#include <cstdlib>
#include <exception>
#include <crtdbg.h>

_STD_BEGIN

#ifdef _DEBUG
_CRTIMP2_PURE void __CLRCALL_PURE_OR_CDECL _Debug_message(const wchar_t *message, const wchar_t *file, unsigned int line)
{   // report error and die
    if(::_CrtDbgReportW(_CRT_ASSERT, file, line, NULL, L"%s", message)==1)
    {
        ::_CrtDbgBreak();
    }
}
_CRTIMP2_PURE void __CLRCALL_PURE_OR_CDECL _Debug_message(const unsigned short *message, const unsigned short *file, unsigned int line)
{   // report error and die
    _Debug_message((wchar_t *) message, (wchar_t *) file, line);
}

#endif

_STD_END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:40:05.457

我认为这是错误：您要打印的`PrintRoom`是`std::vector<char> data`您的班级内部，而`std::vector<char> data`您填写的是`CreateRoom`方法的本地内容。

```
void Room::CreateRoom(int RoomNo)
{
std::vector<char> data; // remove this to solve 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:26:26.937

在您的 PrintRoom() 函数中，您有

```
cout << data[col * height + row]; 
```

代替

```
cout << data[row * height + col]; 
```

# php - jQuery / AJAX / php 编码噩梦

> ID：15449207
> 
> 赞同：0
> 
> 时间：2013-03-16T12:23:43.873
> 
> 标签：php, jquery, ajax, encoding, utf-8

首先，我的数据库编码是utf-8。

我必须通过该方法将字符串发送`Fußball`到。当我使用带有 的 HTML 表单发送它时，它被发送并正确返回，我在 php 文件中使用。它工作得很好。当我尝试使用 jQuery/AJAX 发送它时，问题就开始了。`index.php``POST``action="index.php"``Fu%DFball``htmlentities()`

```
$("#Form").submit(function() {
$.ajax({
    type: "POST",
    dataType : "text",
    url: "index.php", //Does the validation
    data: $("#Form").serialize(),
    success: function(data) {
        alert(data)
    },
});
return false;
}); 
```

它被发送`Fu%C3%9Fball`并返回`FuÃ`，我尝试了一切来解码它或以不同的方式发送它。以下是在各种情况下返回的内容：

正常发送，`htmlentities()`在 php 文件中：

```
FuÃ 
```

正常发送，不带`htmlentities()`或带`htmlspecialchars()`php 文件

```
FuÃŸball 
```

正常发送，`utf8_decode()`在php文件上

```
Fu 
```

在发送字符串之前在 jQuery 脚本上使用`escape()`,`encodeURIComponent()`或`contentType: "utf-8"`会使表单以`.php`文件无法理解的方式提交，但不仅如此，它仍然将字符串发送为`Fu%C3%9Fball`.

我还为每种文件类型使用了正确的命令将我的所有文档编码为`utf-8`，这没有任何区别，所以我认为一切都是`utf-8`从头开始的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:57:46.467

确保您的网页*编码*也是 UTF-8。

如果它默认是 ISO-8859-1，它会错误地解析 UTF-8 字符，正如您所经历的那样。

要检查，请在打开页面时查看浏览器的“编码”菜单：这是关于使用何种编码的最后一句话。

可能是您的服务器配置为输出 HTML 文件的 ISO-8859-1 内容类型标头。请参阅[如何将 Apache 的默认编码更改为 UTF-8？](https://stackoverflow.com/questions/913869/how-to-change-the-default-encoding-to-utf-8-for-server)如何解决这个问题。

# c# - 我可以使用从一种方法到另一种方法的变量吗？

> ID：15449214
> 
> 赞同：0
> 
> 时间：2013-03-16T12:24:20.663
> 
> 标签：c#, excel

我可以使用声明的变量或对象的实例从一种方法到另一种方法吗？

```
private void OnBrowseFileClick(object sender, RoutedEventArgs e)
        {
            string path = null;
            path = OpenFile();
        }

private string OpenFile()
        {
            string path = null;
            OpenFileDialog fileDialog = new OpenFileDialog();
            fileDialog.Title = "Open source file";
            fileDialog.InitialDirectory = "c:\\";
            fileDialog.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*";
            fileDialog.FilterIndex = 2;
            fileDialog.RestoreDirectory = true;

            Nullable<bool> result = fileDialog.ShowDialog();

            if (result == true)
            {
                path = fileDialog.FileName;
            }

            textBox1.Text = path;
            return path;
        } 
```

现在，我想获得那条路径并将其写在excel上。我将如何做到这一点，请帮助，我在使用 C# 一周大。

```
private void btnCreateReport_Click(object sender, RoutedEventArgs e)
        {
            string filename = "sample.xls"; //Dummy Data
            string functionName = "functionName"; //Dummy Data
            string path = null;

            AnalyzerCore.ViewModel.ReportGeneratorVM reportGeneratorVM = new AnalyzerCore.ViewModel.ReportGeneratorVM();
            reportGeneratorVM.ReportGenerator(filename, functionName, path);
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T12:27:04.337

使用实例字段来存储变量的值。

像这样：

```
public class MyClass
{
    // New instance field
    private string _path = null;

    private void OnBrowseFileClick(object sender, RoutedEventArgs e)
    {
        // Notice the use of the instance field
        _path = OpenFile(); 
    }

    // OpenFile implementation here...

    private void btnCreateReport_Click(object sender, RoutedEventArgs e)
    {
        string filename = "st_NodataSet.xls"; //Dummy Data
        string functionName = "functionName"; //Dummy Data

        AnalyzerCore.ViewModel.ReportGeneratorVM reportGeneratorVM = new AnalyzerCore.ViewModel.ReportGeneratorVM();
        // Reuse the instance field here
        reportGeneratorVM.ReportGenerator(filename, functionName, _path); 
    }
} 
```

[这](http://msdn.microsoft.com/en-gb/library/ms173118.aspx)是一个链接，它比我所能描述的更详细地描述了字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:27:42.120

将`string path`作为成员移动到您的类中，并删除方法中的声明。应该这样做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T12:27:53.100

使用字符串路径作为类级别变量。

如果要在页面之间使用静态私有字符串路径，请使用它。

如果您只需要在当前页面上使用它，请使用私有字符串路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T12:28:39.740

您必须将变量定义为类中的字段：

```
Private string path = null; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-16T12:26:16.343

采用`static private string path;`

# drupal - 哪个菜单模块将在子菜单中同时显示图像和链接？

> ID：15449215
> 
> 赞同：0
> 
> 时间：2013-03-16T12:24:25.590
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-navigation

我想在子菜单中显示图像和链接，我尝试了菜单图标模块，但我无法同时显示图像和链接。

谁能知道哪个模块同时支持？

我找到了一个使用相同的drupal网站，sweetdigital.co

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T00:21:44.437

我之前通过覆盖[theme_menu_link](http://api.drupal.org/api/drupal/includes!menu.inc/function/theme_menu_link/7)来添加包装器和唯一 ID 来完成此操作，然后仅使用 css 使用唯一 ID 作为选择器添加图像。

# php - 将选择框选项值传递给 php

> ID：15449216
> 
> 赞同：2
> 
> 时间：2013-03-16T12:24:55.287
> 
> 标签：php, javascript, html, ajax

```
<body>
<form method="post" action="eex4.php">
  <label for="text_2">Select the Scheme:&nbsp;&nbsp;&nbsp;</label>
  <select name="users" id="users">
    <option value="">Select:</option>
    <option value="1">Sem1</option>
    <option value="2">Sem2</option>
    <option value="3">Sem3</option>
    <option value="4">Sem4</option>
    <option value="5">Sem5</option>
    <option value="6">Sem6</option>
  </select>
  &nbsp;&nbsp;&nbsp;
  <input type="submit" value="Submit" name="btn" onClick="ResultPage()"/>
</form>
</body> 
```

上面的代码输出有带有提交按钮的选择框。当我单击提交按钮时，它会调用脚本。

```
<script>
function ResultPage()
{
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
 var select = document.getElementById('users');
 var sem = select.options[select.selectedIndex].value;
 var uurl = "eex4.php?q=" + sem;

xmlhttp.open("GET",uurl,true);
xmlhttp.send();
}
</script> 
```

我需要传递一个选择框的值，我选择了哪个选项并发送到以下 php 文件。

**eex4.php**

```
<?php
$schm = $_GET['sem'];
$txt1 = "Semester";
echo $txt1 ." ". $schm;
?> 
```

我的预期结果是：

“学期[选项值有选择]”但它只是显示“学期”

任何人都可以找到错误..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:28:58.103

利用

```
$schm = $_GET['q']; 
```

因为你路过`q`这里

```
var uurl = "eex4.php?q=" + sem; 
```

问题出在您的表单上，当您单击提交按钮时，它会将数据发布到`eex4.php`并仅显示`Semester`。

改变

```
<input type="submit" 
```

至

```
<input type="button" 
```

因此，当您单击此按钮时，内容将加载到页面中而无需刷新页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:31:05.240

ajax 部分取自 w3schools。你只需要更换`$schm = $_GET['sem']; to $schm = $_GET['q'];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T12:31:37.337

改变

```
var uurl = "eex4.php?q=" + sem; 
```

至

```
var uurl = "eex4.php?sem=" + sem; 
```

因为您在 eex4.php 中获得了 'sem' 但将 'q' 传递给它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T12:33:49.253

改变

```
$schm = $_GET['sem']; 
```

至

```
$schm = $_GET['q']; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T12:34:17.877

你通过 through 传递价值`q`

```
$schm = $_GET['q']; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-16T12:37:52.590

```
 <body>
  <div id="txtHint"></div>
  <form method="post" action="eex4.php">
  <label for="text_2">Select the Scheme:&nbsp;&nbsp;&nbsp;</label>
  <select name="users" id="users">
    <option value="">Select:</option>
    <option value="1">Sem1</option>
    <option value="2">Sem2</option>
    <option value="3">Sem3</option>
    <option value="4">Sem4</option>
    <option value="5">Sem5</option>
    <option value="6">Sem6</option>
  </select>
  &nbsp;&nbsp;&nbsp;
  <input type="submit" value="Submit" name="btn" onClick="return ResultPage()"/>
</form>
</body>

<script>
function ResultPage()
{
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
 var select = document.getElementById('users');
 var sem = select.options[select.selectedIndex].value;
 var uurl = "eex4.php?q=" + sem;

xmlhttp.open("GET",uurl,true);
xmlhttp.send();
return false;
}
</script> 
```

**eex4.php**

```
<?php
$schm = $_GET['sem'];
$txt1 = "Semester";
echo $txt1 ." ". $schm;
?> 
```

# javascript - 通过 JQuery 在 JSF 数据表中查找元素 id

> ID：15449221
> 
> 赞同：-2
> 
> 时间：2013-03-16T12:25:34.960
> 
> 标签：javascript, jquery, jsf

这是我的 jsf 表：

```
<h:dataTable value="myBean.rows" var="b">
    <h:column>
    <div class="slider-range-min">                               
        <h:inputHidden id="buildingId" value="#{b.buildingId}" />
        <h:inputHidden id="amount" value="#{b.amount}" />
    </div>
   </h:column>
</h:dataTable> 
```

现在，可以说，我可以通过 jQuery 在 JavaScript 中访问上面的“div”：

`$(this).`

我可以通过`inputHidden`这种方式访问​​第一个值：`$(this).children[0].innerHTML`，但我的目标是通过 获取此`hiddenInput`字段`id(buildingId)`，因为这些顺序`hiddenInputs`可以更改，因此通过访问`children[0]`可能不再有效。如何做到这一点？

(13:52:12 16.03.2013)

嗯，没有你的解决方案不起作用。这是我的 JavaScript 代码：

```
 $(function() {
            $( ".slider-range-min" ).slider({
              range: "min",
              value: 37,
              min: 0,
              max: 700,
              stop: function( event, ui ) {
                  var buildingId = $(this).find('#buildingId').val();

                  console.log(buildingId); 
```

如您所见，每个 div 都是一个 JQuery UI 滑块。控制台打印“未定义”。在 html 文档中，此表中的这些输入之一显示为 id：“foodTableForm:foodTable:0:buildingId”。因此，如您所见，这些 id 因表而被修改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:35:15.090

根据[这个答案](https://stackoverflow.com/questions/10314797/assign-dynamic-ids-to-hidden-fields-when-iterating-over-a-collection)，如果 a`h:inputHidden`被多次使用，实际的 HTML 将如下所示：

```
<input type="hidden" id="form:0:hidden" name="nameofyourform:uniquenumber:buildingId" value="value" /> 
```

假设`this`是对 div 的引用，您应该能够做以下两件事之一：

```
var buildingId = $(this).find("input[name*='buildingId']").val(); 
```

*= 是“[包含](http://api.jquery.com/attribute-contains-selector/)”选择器。另一种选择是查看源代码并弄清楚命名的工作原理。如果唯一 id 在某种程度上等同于表中的行索引，您可以找到表的行索引并构建您的 id：

```
var rowId = $(this).closest('tr').index(); // add or subtract if the id of the field is off by a certain number...

var buildingId = $("#yourform:" + rowId + ":buildingId").val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:35:34.630

```
$(this).find('#buildingId').val()  // #{b.buildingId} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T13:01:43.860

您可能不知道生成的 id，但您确实知道它以**buildingId**结尾（至少应该如此）。

因此，当您可以通过访问 div 时，`$(this)`您可以使用 获取值`$(this).find("[id$='buildingId']")`，其中的`$`意思是“以”结尾。

也许您必须替换`id`为`name`.

# javascript - Socket.IO 无法通过 https 连接

> ID：15449234
> 
> 赞同：19
> 
> 时间：2013-03-16T12:26:42.403
> 
> 标签：javascript, node.js, https, websocket, socket.io

我有一个使用 socket.IO 的 node.js 应用程序。它在 http 上运行良好，但是当尝试通过 https 连接到套接字时 - 没有任何反应。
这是代码的一部分：

```
var fs = require('fs');  

var ioHttp = require('socket.io').listen(8899, {  
    'flash policy port': -1  
});  

initSocket(ioHttp);  

var ioHttps = require('socket.io').listen(8895, {  
    key: fs.readFileSync('/path/to/file/file.key'),  
    cert: fs.readFileSync('/path/to/file/file.crt'),  
    ca: [  
        fs.readFileSync('/path/to/file/sub.class1.server.ca.pem'),  
        fs.readFileSync('/path/to/file/ca.pem')  
    ],  
    'flash policy port': -1   
});  

initSocket(ioHttps); 
```

和`initSocket`功能：

```
function initSocket(io) {  
    io.enable('browser client minification');  
    io.enable('browser client etag');  
    io.enable('browser client gzip');  

    io.set('transports', [  
        'websocket',  
        'htmlfile',
        'flashsocket',
        'jsonp-polling'  
    ]);  

    io.sockets.on('connection', function (client) {
        //the connnection is handled here
    });
} 
```

客户端连接如下：

```
var secureConnection = false;  
var port = 8899;
if (window.location.protocol === 'https:') {  
    port = 8895;
    secureConnection = true;
}

var socket = io.connect('domain.org', {port: port, secure: secureConnection}); 
```

正如我所说，在 http 上一切正常，但在 https 上连接给了我“连接被中断”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-16T14:53:24.777

您不能像服务器`socket.io`一样初始化`https`服务器。您必须启动一个单独的 https 服务器，然后将 socket.io 服务器附加到它。

```
var https = require('https'),     
    fs =    require('fs');        

var options = {
    key:    fs.readFileSync('ssl/server.key'),
    cert:   fs.readFileSync('ssl/server.crt'),
    ca:     fs.readFileSync('ssl/ca.crt')
};
var app = https.createServer(options);
io = require('socket.io').listen(app);     //socket.io server listens to https connections
app.listen(8895, "0.0.0.0"); 
```

# c++ - 将非托管模板类实例作为参数传递给不同的 dll 编译失败

> ID：15449238
> 
> 赞同：0
> 
> 时间：2013-03-16T12:27:16.563
> 
> 标签：c++, templates, interop, c++-cli

我有线程安全队列的非托管模板类：

```
 template<class T>
    public class TSQueue {...} 
```

和生产者类：

```
 public ref class Producer
    {
        Producer(TSQueue<int>* Q) {...}
    }; 
```

Producer的使用方式如下：

```
 Producer^ p = gcnew Producer(new TSQueue<int>()); 
```

两者都在一个 C++/CLI DLL Producer.DLL 中定义。

当**Producer**被实例化并在这个 DLL 中提供了**TSQueue<int>***时，编译和执行没有问题。

但是，当我尝试在另一个 C++/CLI dll 中使用**TSQueue< int >*实例化****Producer**时，出现以下编译器错误：

 **```
 Error   23  error C2664: 'Producer(TSQueue<int>*)' : cannot convert parameter 1 from 'TSQueue<T> *' to 'TSQueue<int> *' 
```

好像编译器无法确定 QI 提供给 Producer 构造函数的类型。

我添加了对 Producer.DLL 的引用。

有谁知道如何克服这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:34:38.810

IMO，添加对 DLL 的引用是不够的，因为我们在这里处理的是“本机”模板而不是泛型。请确保您的*其他*DLL 具有`#include`指向`TSQueue`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:40:50.253

您需要在两个库中包含 TSQueue 的完整定义。不要让它成为界面的一部分，只在内部使用它。如果它需要成为 API 的一部分，请遵循 Hans Passant 的建议：使其成为通用的，或者更好的是，使用适当的框架实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:00:29.450

正如汉斯·帕桑特悲伤的那样：

> 可以肯定的是，您在这里遇到了类型标识问题，这是由本机 C++ 模板跨越模块边界引起的。这通常是 C++ 中一个臭名昭著的问题，模板没有外部链接。使用泛型在 C++/CLI 中很容易解决，如果需要线程安全，您应该从 .NET Queue<> 类 ConcurrentQueue<> 中直接替换 TSQueue。

但是泛型不能用于非托管类型，所以我使用类型特定的非托管容器类。**

# c++ - C++ 运行时检查

> ID：15449249
> 
> 赞同：0
> 
> 时间：2013-03-16T12:28:22.377
> 
> 标签：c++, visual-studio-2010, debugging

构建发布版本时的一个主要问题是使用未初始化的变量。使用在调试版本中从未初始化但默认值为零的变量，并且在发布版本中获得随机值并且应用程序崩溃。VS2010 会警告未初始化的局部变量，但不会警告未初始化的成员变量。当使用未初始化的成员时，还有另一个选项可以设置基本运行时检查 /RTCSU 并调试到代码中。太好了！。但是当我使用静态库时它不起作用！！我将两个基本运行时检查都设置为 /BOTH。我想知道在大型项目上使用此选项检查未初始化的成员变量是否可行？

# sql - 来自另一个表循环的 SQL 插入语句

> ID：15449252
> 
> 赞同：0
> 
> 时间：2013-03-16T12:28:57.767
> 
> 标签：sql, loops, insert

我正在尝试从表中获取值并将它们插入到另一个表中。但是，有一个数据库列需要每次增加 1 个值。该值虽然不是标识插入列，但该值来自另一个表。还有另一个 db 列用作计数器。我写了一些东西，但它没有帮助：（121 个文件）

```
declare @count int;
set @count=0
while @count<=121
begin
insert into cabinet..DOCUMENT_NAMES_ROBBY (TAG,TAGORDER,ACTIVE,QUEUE,REASON,FORM,DIRECT_VIEW,GLOBAL,FU_SIGN,
SIGN_X,SIGN_Y,SIGN_W,SIGN_H,ANNOTATE,doctype_id,CODE,DOC_TYPE,SET_ID,SUSPEND_DELAY,Text_Editing,Restrict_Viewing,Viewing_Expire,
Viewing_Period,DocHdrLength,DocFtrLength,DocRuleId,Outbound,SigQueue,SigReason) select TAG,TAGORDER,ACTIVE,QUEUE,REASON,FORM,
DIRECT_VIEW,GLOBAL,FU_SIGN,
SIGN_X,SIGN_Y,SIGN_W,SIGN_H,ANNOTATE,(select nextid from cabinet..Wfe_NextValue where Name='documents')+1, CODE,DOC_TYPE,'2',SUSPEND_DELAY,Text_Editing,Restrict_Viewing,Viewing_Expire,
Viewing_Period,DocHdrLength,DocFtrLength,DocRuleId,Outbound,SigQueue,SigReason from cabinet..document_names where SET_ID ='1'
update cabinet..Wfe_NextValue set NextID=NextID+1 where Name='documents'
set @count=@count+1
end 
```

该数据库列是 doctype_id。上面显然是错误的，并在表中放置了 14,000 行。基本上我想从 document_names 中获取每一个条目并将其放入 document_names_robby ......除了 doctype_id 列应该从 wfe_nextvalue +1 中获取值，同时在插入下一个文档名称之前将该表中的该数字增加 1进入 document_Names_Robby。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:48:03.370

```
declare @count int;
set @count=0
declare @nextId int;
select @nextId= nextid from cabinet..Wfe_NextValue where Name='documents'
while @count<=121
begin
insert into cabinet..DOCUMENT_NAMES_ROBBY         (TAG,TAGORDER,ACTIVE,QUEUE,REASON,FORM,DIRECT_VIEW,GLOBAL,FU_SIGN,
        SIGN_X,SIGN_Y,SIGN_W,SIGN_H,ANNOTATE,doctype_id,CODE,DOC_TYPE,SET_ID,SUSPEND_DELAY,Text_Edi    ting,Restrict_Viewing,Viewing_Expire,
Viewing_Period,DocHdrLength,DocFtrLength,DocRuleId,Outbound,SigQueue,SigReason) select     TAG,TAGORDER,ACTIVE,QUEUE,REASON,FORM,
DIRECT_VIEW,GLOBAL,FU_SIGN,
SIGN_X,SIGN_Y,SIGN_W,SIGN_H,ANNOTATE,(select nextid from cabinet..Wfe_NextValue where     Name='documents')+1,     CODE,DOC_TYPE,'2',SUSPEND_DELAY,Text_Editing,Restrict_Viewing,Viewing_Expire,
Viewing_Period,DocHdrLength,DocFtrLength,DocRuleId,Outbound,SigQueue,SigReason from     cabinet..document_names where SET_ID ='1'
set @count=@count+1
end
update cabinet..Wfe_NextValue set NextID=NextID+121 where Name='documents' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:36:18.630

许多流行的数据库都支持[序列](http://www.postgresql.org/docs/9.1/static/functions-sequence.html)。对于序列，有一个函数*nextval*，它返回序列值并递增序列计数器和*currval*，它返回最近一次返回的值，您也可以设置初始值和增量。当在表列中存储计数器不是时，序列是线程安全的。

使用序列重写您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T12:37:11.600

假设您使用的是**SQL Server**数据库。使用`IDENTITY`功能

```
SELECT *, IDENTITY(int, 1,1) AS IDCol FROM Cabinet.DocumentNames INTO #Tab1 WHERE Set_Id = '1';    
insert into cabinet..DOCUMENT_NAMES_ROBBY (TAG,TAGORDER,ACTIVE,QUEUE,REASON,FORM,DIRECT_VIEW,GLOBAL,FU_SIGN,
SIGN_X,SIGN_Y,SIGN_W,SIGN_H,ANNOTATE,doctype_id,CODE,DOC_TYPE,SET_ID,SUSPEND_DELAY,Text_Editing,Restrict_Viewing,Viewing_Expire,
Viewing_Period,DocHdrLength,DocFtrLength,DocRuleId,Outbound,SigQueue,SigReason) 
SELECT * FROM #Tab1;
DROP TABLE #Tab1; 
```

# php - 从 Joomla 中的回调 URL 更新 MySQL 表

> ID：15449256
> 
> 赞同：1
> 
> 时间：2013-03-16T12:29:13.337
> 
> 标签：php, mysql, callback, joomla2.5, payment-gateway

我的网站建立在 joomla 2.5.8 上。该网站正在使用支付网关来处理付款。

如您所知，joomla 具有这种 URL 结构（没有 SEF）：

```
index.php?option=com_componentname&controller=order&task=notify&gateway=paymentgateway 
```

现在，支付网关提供商要求我向他们发送一个回调 URL，以将交易的值传递给它，并让我使用基于此 URL 值的交易信息更新 MySQL 数据库表。

问题是支付网关提供商将在回调 URL 中使用这些值：

```
?Response=1&status=10&code=123456-123456&token=f0021bfa-7ae4-48af-b4a2-d08d7a647b5e&lang=en&ignore=1 
```

我的组件用作回调 URL 的链接应该是这样的：

```
index.php?option=com_componentname&controller=order&task=notify&gateway=paymentgateway 
```

因此，支付提供商拒绝在其系统中设置此回调 URL，因为它包含“？” 在里面。他们必须使用这个“？” 在回调 URL 中传递事务值。

因此，如果他们接受我给他们的回调，回调 URL 将如下所示：

```
index.php?option=com_componentname&controller=order&task=notify&gateway=paymentgateway?Response=1&status=10&code=123456-123456&token=f0021bfa-7ae4-48af-b4a2-d08d7a647b5e&lang=en&ignore=1 
```

正如您在上面注意到的，回调 URL 将包含两个“？” 问号。

到目前为止我所做的：我安装了一个组件，可以在我的 Joomla 网站中 SEF 任何非 SEF URL。所以我将这个链接 (index.php?option=com_componentname&controller=order&task=notify&gateway=paymentgateway) 设置为 (payment-status) 并将其发送回支付提供商。但是，回调 URL 中传递的值不会更新我的数据库表。

所以在付款过程中一切正常。一旦我达到了获取参数值来更新我的数据库的目的，它就不会了。我该如何解决这个问题？

BR,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:35:04.657

您需要向组件添加一个菜单项，以便为回调页面创建一个菜单项。然后您可以使用内置的 Joomla SEF URL 作为回调 URL。由于它是一个菜单项，它将传递所需的正确参数以及您的支付处理器发回的附加值。

如果您不熟悉组件的菜单项，可以查看此处 -[在菜单项类型中显示 joomla 组件](https://stackoverflow.com/questions/3092723/show-joomla-component-in-menu-item-type)

# sorting - 在 SOLR 排序中利用短语搜索

> ID：15449258
> 
> 赞同：2
> 
> 时间：2013-03-16T12:29:25.047
> 
> 标签：sorting, solr, lucene, full-text-search, phrase

我发送给 SOLR 的搜索查询是：

```
?q=iphone 4s&sort=sold desc 
```

默认情况下，搜索效果很好，但是当我想按某些字段对结果进行排序时出现问题，例如。已售 - 已售产品的数量。

SOLR 找到所有具有： (iphone 4s) 或 (iphone) 或 (4s) 的结果因此，当我应用按字段“已售”排序时，第一个结果是：“iPhone 3GS ...”这是问题。

我首先需要短语（“iphone 4s”）的结果，然后是其余的结果 - 全部按已售出排序。

所以，问题是：

是否可以进行这样的查询，以及如何查询？

```
q=iphone 4s&sort={some algoritam for phrase results first} desc, sold desc 
```

或者，我可以通过设置查询分析器来执行此操作吗？如何？

目前，这是通过向 SOLR 发送 2 个请求来解决的，首先使用短语“iphone 4s”，如果返回 0 结果，我会执行第二个不带短语的请求 - 仅：iphone 4s。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T01:12:13.250

如果按分数、id、字段排序还不够，Lucene 允许您通过提供自己的 FieldComparatorSource 抽象基类的子类来实现自定义排序机制。

使用该自定义排序逻辑，您可以实现实现您需求的方式。

示例 Java 代码：

```
If(modelNum1.equals(modelNum2)){
//return based on number of units sold.
}else{
//ALWAYS return a value such that the preferred model beats others.
} 
```

免责声明：这可能会导致维护问题，因为您必须在新手机型号到货时更改逻辑。

**步骤**：

1) Sort 对象在实例化过程中接受 FieldComparatorSource 类型的实例。

2) 扩展 FieldComparatorSource

3) 您必须在 setNextReader() 中的 FieldComparatorSource 中使用 FieldCache 加载参与“排序”的必填字段信息

4) 覆盖 FieldComparatorSource.newComparator() 以返回您的自定义 FieldComparator。

5) 在FieldComparator.compare(slot1DocId, slot2DocId)方法中，你可以通过加载的FieldCache，使用传入的docIds访问相应的字段信息，来包含你的自定义逻辑。

将 Lucene 代码作为插件集成到 Solr 中应该不会给您带来麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T10:08:23.947

## **编辑：**

不能在该功能中使用空间。术语只有没有空格。

* * *

> 从 Solr3.1 开始，也可以对每个文档产生单个值的任意函数查询（如在[FunctionQuery中）进行排序。](http://wiki.apache.org/solr/FunctionQuery)

所以，我将在排序中使用函数**termfreq**

> termfreq(field,term) 返回术语在该文档的字段中出现的次数。

搜索查询将是

```
q=iphone 4s&sort=termfreq(product_name,"iphone 4s") desc, sold desc 
```

***注意：**函数 termfreq 从[Solr 4.0 版本开始有效](http://wiki.apache.org/solr/FunctionQuery#Relevance_Functions)*

# c# - 将图像从图像控件保存到当前目录中的文件

> ID：15449259
> 
> 赞同：0
> 
> 时间：2013-03-16T12:29:28.937
> 
> 标签：c#, wpf, image, controls

我有一个名为 image1 的图像控件 (WPF)，当我单击命令按钮时它会加载图像（这是有关该事件的代码）。现在，如果我想将该图像文件复制到当前目录（即项目目录）上，我必须做什么？

```
private void commandButton1_Click(object sender, System.Windows.RoutedEventArgs e)
    {
        Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();
        dlg.DefaultExt = "*.jpg";
        dlg.Filter = "Image Files|*.jpg";
        Nullable<bool> result = dlg.ShowDialog();
        if (result == true)
        {                
            image1.Source = new BitmapImage(new Uri(dlg.FileName));   
        }
        // to do
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:34:07.927

使用[File.Copy](http://msdn.microsoft.com/en-us/library/c6cfw35a.aspx)方法。您可以从[Path.GetFileName](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)获取没有路径的文件名：

```
// get file name from full source path (for example)
string targetFileName = Path.GetFileName(dlg.FileName);

// copy to relative path, i.e. current directory
File.Copy(dlg.FileName, targetFileName); 
```

* * *

如果您的问题是关于如何保存 BitmapSource，您可以查看[BitmapEncoder](http://msdn.microsoft.com/en-us/library/ms619208.aspx)。

# c# - 如何根据我的小数位置值显示小数位置？

> ID：15449264
> 
> 赞同：1
> 
> 时间：2013-03-16T12:30:02.393
> 
> 标签：c#, formatting

```
decimal value = 10;
int decimalPosition= 3; //this decimalPosition will be dynamically change.
decimal formatted = Math.Round(value, decimalPosition); 
```

如果小数位置 =3；我需要显示格式化值，例如：10.000。

如果小数位置 =5；我需要显示格式化值，例如：10.00000。

注意：我必须使用`Round`函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:40:15.117

`decimal`value 没有指定格式 - 它只是一个数值。您可以指定打印出来的格式，但您必须在打印或创建字符串时这样做：

```
decimal value = 10;
int decimalPosition = 3; //this decimalPosition will be dynamically change.
decimal formatted = Math.Round(value, decimalPosition);

string format = string.Format("{{0:0.{0}}}", string.Concat(Enumerable.Repeat("0", decimalPosition).ToArray()));
string formattedString = string.Format(format, formatted);

Console.WriteLine(formattedString); 
```

打印`10.000`到控制台。

另一种指定格式的方法是：

```
var format = string.Format("{{0:f{0}}}", decimalPosition); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:34:17.063

你可以尝试这样的事情： -

```
decimal.Round(yourValue, decimalPosition, MidpointRounding.AwayFromZero); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T12:55:02.833

你可以试试：--

```
decimal value = 10;
        int decimalPosition = 3; //this decimalPosition will be dynamically change.
        string position = "";

        for (int i = 0; i < decimalPosition; i++)
        {
            position += "0";
        }
        string newValue = value.ToString() + "." + position;
        decimal formatted = Convert.ToDecimal(newValue); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T12:33:21.517

使用 FORMATASNUMBER(Value, decimalPosition) 而不是 math.round

抱歉，我忘了它是 c# 而不是 VB 但你可以在 MSDN 上阅读它

[http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.strings.formatnumber(v=VS.80).aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.strings.formatnumber(v=VS.80).aspx)

命令是 String.FormatNumber(blah blah blah)

实际的声明是......

```
public static string FormatNumber (
  Object Expression,
  [OptionalAttribute] int NumDigitsAfterDecimal,
  [OptionalAttribute] TriState IncludeLeadingDigit,
  [OptionalAttribute] TriState UseParensForNegativeNumbers,
  [OptionalAttribute] TriState GroupDigits
) 
```

# android - 使用 Android 发送 POST/SOAP 操作

> ID：15449268
> 
> 赞同：0
> 
> 时间：2013-03-16T12:30:38.513
> 
> 标签：android, post, soap, ksoap2

我需要一些帮助来理解如何在 android 应用程序中发送这个 XML。我读过使用 ksoap 库是一种方法。我已经尝试过教程，但它们似乎都不适合我；甚至要下载的样本。任何帮助表示赞赏。

```
POST /nrc/control_0 HTTP/1.1
User-Agent: Panasonic iOS VR-CP UPnP/2.0
Host: 10.0.1.155:55000
Content-Type: text/xml; charset="utf-8"
SOAPACTION: "urn:panasonic-com:service:p00NetworkControl:1#X_SendKey"
Content-Length: 331

<?xml version="1.0" encoding="utf-8"?>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" 
s:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
<s:Body>
<u:X_SendKey xmlns:u="urn:panasonic-com:service:p00NetworkControl:1">
<X_KeyEvent>NRC_MUTE-ONOFF</X_KeyEvent>
</u:X_SendKey>
</s:Body>
</s:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:35:47.710

下面给出的是用于进行 SOAP 调用的代码：

```
public String callService(String URL, String METHOD_NAME, String NAMESPACE,
        String SOAP_ACTION, String param) {
    String data = "";

    Log.v(webserviceadpater, " \n METHOD_NAME =  ---> " + METHOD_NAME
            + " <--- \n ");

    try {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("xml", param);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);

        envelope.setOutputSoapObject(request);

        HttpTransportSE transportSE = new HttpTransportSE(URL);
        transportSE.debug = true;

        transportSE.call(SOAP_ACTION, envelope);

        SoapObject result = (SoapObject) envelope.bodyIn;

        for (int i = 0; i < result.getPropertyCount(); i++) {
            data = result.getProperty(i).toString();
            Log.v(webserviceadpater, "result = " + data);
        }

    } catch (Exception e) {
        e.printStackTrace();
    }

    return data;
} 
```

# iphone - AVFoundation 点击 聚焦反馈矩形

> ID：15449271
> 
> 赞同：22
> 
> 时间：2013-03-16T12:31:07.717
> 
> 标签：iphone, ios, ipad, avfoundation

我正在开发一个 iphone 应用程序，我直接使用 AVFoundation 通过相机捕捉视频。

我已经实现了一项功能来`tap to focus`为用户启用该功能。

```
- (void) focus:(CGPoint) aPoint;
{
#if HAS_AVFF
    Class captureDeviceClass = NSClassFromString(@"AVCaptureDevice");
    if (captureDeviceClass != nil) {        
        AVCaptureDevice *device = [captureDeviceClass defaultDeviceWithMediaType:AVMediaTypeVideo];
        if([device isFocusPointOfInterestSupported] &&
           [device isFocusModeSupported:AVCaptureFocusModeAutoFocus]) {
            CGRect screenRect = [[UIScreen mainScreen] bounds];
            double screenWidth = screenRect.size.width;
            double screenHeight = screenRect.size.height;
            double focus_x = aPoint.x/screenWidth;
            double focus_y = aPoint.y/screenHeight;
            if([device lockForConfiguration:nil]) {
                [device setFocusPointOfInterest:CGPointMake(focus_x,focus_y)];
                [device setFocusMode:AVCaptureFocusModeAutoFocus];
                if ([device isExposureModeSupported:AVCaptureExposureModeAutoExpose]){
                    [device setExposureMode:AVCaptureExposureModeAutoExpose];
                }
                [device unlockForConfiguration];
            }
        }
    }
#endif
} 
```

到目前为止一切顺利，但我错过了照片应用程序中的反馈矩形。有没有办法告诉 AVFoundation 框架显示这个反馈矩形或者我必须自己实现这个功能？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-18T10:02:35.997

这是我所做的：这是创建当用户点击相机覆盖时显示的正方形的类。

```
CameraFocusSquare.h

#import <UIKit/UIKit.h>
@interface CameraFocusSquare : UIView
@end

CameraFocusSquare.m

#import "CameraFocusSquare.h"
#import <QuartzCore/QuartzCore.h>

const float squareLength = 80.0f;
@implementation FBKCameraFocusSquare

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code

        [self setBackgroundColor:[UIColor clearColor]];
        [self.layer setBorderWidth:2.0];
        [self.layer setCornerRadius:4.0];
        [self.layer setBorderColor:[UIColor whiteColor].CGColor];

        CABasicAnimation* selectionAnimation = [CABasicAnimation
                                                animationWithKeyPath:@"borderColor"];
        selectionAnimation.toValue = (id)[UIColor blueColor].CGColor;
        selectionAnimation.repeatCount = 8;
        [self.layer addAnimation:selectionAnimation
                          forKey:@"selectionAnimation"];

    }
    return self;
}
@end 
```

在您收到点击的视图中，执行以下操作：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchPoint = [touch locationInView:touch.view];
    [self focus:touchPoint];

    if (camFocus)
    {
        [camFocus removeFromSuperview];
    }
    if ([[touch view] isKindOfClass:[FBKVideoRecorderView class]])
    {
        camFocus = [[CameraFocusSquare alloc]initWithFrame:CGRectMake(touchPoint.x-40, touchPoint.y-40, 80, 80)];
        [camFocus setBackgroundColor:[UIColor clearColor]];
        [self addSubview:camFocus];
        [camFocus setNeedsDisplay];

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:1.5];
        [camFocus setAlpha:0.0];
        [UIView commitAnimations];
    }
}

- (void) focus:(CGPoint) aPoint;
{
    Class captureDeviceClass = NSClassFromString(@"AVCaptureDevice");
    if (captureDeviceClass != nil) {
        AVCaptureDevice *device = [captureDeviceClass defaultDeviceWithMediaType:AVMediaTypeVideo];
        if([device isFocusPointOfInterestSupported] &&
           [device isFocusModeSupported:AVCaptureFocusModeAutoFocus]) {
            CGRect screenRect = [[UIScreen mainScreen] bounds];
            double screenWidth = screenRect.size.width;
            double screenHeight = screenRect.size.height;
            double focus_x = aPoint.x/screenWidth;
            double focus_y = aPoint.y/screenHeight;
            if([device lockForConfiguration:nil]) {
                [device setFocusPointOfInterest:CGPointMake(focus_x,focus_y)];
                [device setFocusMode:AVCaptureFocusModeAutoFocus];
                if ([device isExposureModeSupported:AVCaptureExposureModeAutoExpose]){
                    [device setExposureMode:AVCaptureExposureModeAutoExpose];
                }
                [device unlockForConfiguration];
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-09-28T15:13:06.760

添加到 Anil 的精彩回答：您应该看看*AVCaptureVideoPreviewLayer*的*captureDevicePointOfInterestForPoint* : 而不是自己进行计算。它将为您提供更加一致的焦点（适用于 iOS 6 及更高版本）。

```
- (void) focus:(CGPoint) aPoint;
{
    Class captureDeviceClass = NSClassFromString(@"AVCaptureDevice");
    if (captureDeviceClass != nil) {
        AVCaptureDevice *device = [captureDeviceClass defaultDeviceWithMediaType:AVMediaTypeVideo];
        if([device isFocusPointOfInterestSupported] &&
           [device isFocusModeSupported:AVCaptureFocusModeAutoFocus]) {

            CGPoint focusPoint = [self.captureVideoPreviewLayer captureDevicePointOfInterestForPoint:aPoint];
            if([device lockForConfiguration:nil]) {
                [device setFocusPointOfInterest:CGPointMake(focusPoint.x,focusPoint.y)];
                [device setFocusMode:AVCaptureFocusModeAutoFocus];
                if ([device isExposureModeSupported:AVCaptureExposureModeAutoExpose]){
                    [device setExposureMode:AVCaptureExposureModeAutoExpose];
                }
                [device unlockForConfiguration];
            }
        }
    }
} 
```

该文档可在此处获得： [https](https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVCaptureVideoPreviewLayer_Class/index.html#//apple_ref/occ/instm/AVCaptureVideoPreviewLayer/captureDevicePointOfInterestForPoint) ://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVCaptureVideoPreviewLayer_Class/index.html#//apple_ref/occ/instm/AVCaptureVideoPreviewLayer/captureDevicePointOfInterestForPoint ：

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-03-31T07:45:14.760

**快速实现：**

CameraFocusSquare 视图：

```
 class CameraFocusSquare: UIView,CAAnimationDelegate {

    internal let kSelectionAnimation:String = "selectionAnimation"

    fileprivate var _selectionBlink: CABasicAnimation?

    convenience init(touchPoint: CGPoint) {
        self.init()
        self.updatePoint(touchPoint)
        self.backgroundColor = UIColor.clear
        self.layer.borderWidth = 2.0
        self.layer.borderColor = UIColor.orange.cgColor
        initBlink()
    }

    override init(frame: CGRect) {
        super.init(frame: frame)
    }

    fileprivate func initBlink() {
        // create the blink animation
        self._selectionBlink = CABasicAnimation(keyPath: "borderColor")
        self._selectionBlink!.toValue = (UIColor.white.cgColor as AnyObject)
        self._selectionBlink!.repeatCount = 3
        // number of blinks
        self._selectionBlink!.duration = 0.4
        // this is duration per blink
        self._selectionBlink!.delegate = self
    }

    required init?(coder aDecoder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    /**
     Updates the location of the view based on the incoming touchPoint.
     */

    func updatePoint(_ touchPoint: CGPoint) {
        let squareWidth: CGFloat = 100
        let frame: CGRect = CGRect(x: touchPoint.x - squareWidth / 2, y: touchPoint.y - squareWidth / 2, width: squareWidth, height: squareWidth)
        self.frame = frame
    }
    /**
     This unhides the view and initiates the animation by adding it to the layer.
     */

    func animateFocusingAction() {

        if let blink = _selectionBlink {
            // make the view visible
            self.alpha = 1.0
            self.isHidden = false
            // initiate the animation
            self.layer.add(blink, forKey: kSelectionAnimation)
        }

    }
    /**
     Hides the view after the animation stops. Since the animation is automatically removed, we don't need to do anything else here.
     */

    public func animationDidStop(_ anim: CAAnimation, finished flag: Bool){
        if flag{
            // hide the view
            self.alpha = 0.0
            self.isHidden = true
        }
    }

} 
```

手势动作：

```
 open func tapToFocus(_ gesture : UILongPressGestureRecognizer) {

    if (gesture.state == UIGestureRecognizerState.began) {

        let touchPoint:CGPoint = gesture.location(in: self.previewView)

        if let fsquare = self.focusSquare {
            fsquare.updatePoint(touchPoint)
        }else{
            self.focusSquare = CameraFocusSquare(touchPoint: touchPoint)
            self.previewView.addSubview(self.focusSquare!)
            self.focusSquare?.setNeedsDisplay()
        }

        self.focusSquare?.animateFocusingAction()

        let convertedPoint:CGPoint = self.previewLayer!.captureDevicePointOfInterest(for: touchPoint)

        let currentDevice:AVCaptureDevice = self.videoDeviceInput!.device

        if currentDevice.isFocusPointOfInterestSupported && currentDevice.isFocusModeSupported(AVCaptureFocusMode.autoFocus){

            do {

                try currentDevice.lockForConfiguration()
                currentDevice.focusPointOfInterest = convertedPoint
                currentDevice.focusMode = AVCaptureFocusMode.autoFocus

                if currentDevice.isExposureModeSupported(AVCaptureExposureMode.continuousAutoExposure){
                    currentDevice.exposureMode = AVCaptureExposureMode.continuousAutoExposure
                }
                currentDevice.isSubjectAreaChangeMonitoringEnabled = true
                currentDevice.unlockForConfiguration()

            } catch {

            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-06-16T23:33:20.693

@Anil 的回答是一个很好的开始，但它对我不起作用。我希望能够让用户继续能够选择一个焦点，而不是只选择一次（这是他的解决方案所做的）。感谢@Anil 为我指明了正确的方向。

我的解决方案存在一些差异。

1.  我希望能够重用焦点方块和动画，而不仅仅是一次。
2.  我希望动画在完成后消失（这是我无法得到@Anil 的解决方案的事情。
3.  我没有使用`initWithFrame:`，而是实现了自己的`initWithTouchPoint:`.
4.  我有一种专门为焦点动作设置动画的方法。
5.  我还有一种更新框架位置的方法。
6.  框架的大小在 范围内`CameraFocusSquare`，这意味着更容易根据需要查找和更新大小。

**CameraFocusSquare.h**

```
@import UIKit;

@interface CameraFocusSquare : UIView

- (instancetype)initWithTouchPoint:(CGPoint)touchPoint;
- (void)updatePoint:(CGPoint)touchPoint;
- (void)animateFocusingAction;

@end 
```

**CameraFocusSquare.m**

```
#import "CameraFocusSquare.h"

@implementation CameraFocusSquare {
    CABasicAnimation *_selectionBlink;
}

/**
 This is the init method for the square. It sets the frame for the view and sets border parameters. It also creates the blink animation.
 */
- (instancetype)initWithTouchPoint:(CGPoint)touchPoint {
    self = [self init];
    if (self) {
        [self updatePoint:touchPoint];
        self.backgroundColor = [UIColor clearColor];
        self.layer.borderWidth = 2.0f;
        self.layer.borderColor = [UIColor orangeColor].CGColor;

        // create the blink animation
        _selectionBlink = [CABasicAnimation
                animationWithKeyPath:@"borderColor"];
        _selectionBlink.toValue = (id)[UIColor whiteColor].CGColor;
        _selectionBlink.repeatCount = 3;  // number of blinks
        _selectionBlink.duration = 0.4;  // this is duration per blink
        _selectionBlink.delegate = self;
    }
    return self;
}

/**
 Updates the location of the view based on the incoming touchPoint.
 */
- (void)updatePoint:(CGPoint)touchPoint {
    CGFloat squareWidth = 50;
    CGRect frame = CGRectMake(touchPoint.x - squareWidth/2, touchPoint.y - squareWidth/2, squareWidth, squareWidth);
    self.frame = frame;
}

/**
 This unhides the view and initiates the animation by adding it to the layer.
 */
- (void)animateFocusingAction {
    // make the view visible
    self.alpha = 1.0f;
    self.hidden = NO;
    // initiate the animation
    [self.layer addAnimation:_selectionBlink forKey:@"selectionAnimation"];
}

/**
 Hides the view after the animation stops. Since the animation is automatically removed, we don't need to do anything else here.
 */
- (void)animationDidStop:(CAAnimation *)animation finished:(BOOL)flag {
    // hide the view
    self.alpha = 0.0f;
    self.hidden = YES;
}

@end 
```

我在视图之上启动所有这些。这给了我更大的灵活性，并将我的 UI 代码与我的控制器代码分开（想想 MVC）。

**预览视图.h**

```
@import UIKit;

@interface PreviewView : UIView

- (IBAction)tapToFocus:(UITapGestureRecognizer *)gestureRecognizer;

@end 
```

**预览视图.m**

```
#import "PreviewView.h"
#import "CameraFocusSquare.h"

@implementation PreviewView {
    CameraFocusSquare *_focusSquare;
}

- (IBAction)tapToFocus:(UITapGestureRecognizer *)gestureRecognizer {
    CGPoint touchPoint = [gestureRecognizer locationOfTouch:0 inView:self];
    if (!_focusSquare) {
        _focusSquare = [[CameraFocusSquare alloc] initWithTouchPoint:touchPoint];
        [self addSubview:_focusSquare];
        [_focusSquare setNeedsDisplay];
    }
    else {
        [_focusSquare updatePoint:touchPoint];
    }
    [_focusSquare animateFocusingAction];
}

@end 
```

最后，在我的`UIViewController`子类中，我`UITapGestureRecognizer`创建并附加到视图。我还在这里实现了我的点击聚焦代码。

**CameraViewController.m**

```
- (void)viewDidLoad {
    // do other initialization stuff here

    // create the tap-to-focus gesture
    UITapGestureRecognizer *tapToFocusRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapToFocus:)];
    tapToFocusRecognizer.numberOfTapsRequired = 1;
    tapToFocusRecognizer.numberOfTouchesRequired = 1;
    [self.previewView addGestureRecognizer:tapToFocusRecognizer];
}

- (IBAction)tapToFocus:(UITapGestureRecognizer *)tapGestureRecognizer {
    if (!_captureDevice) {
        return;
    }
    if (![_captureDevice isFocusPointOfInterestSupported]) {
        return;
    }
    if (![_captureDevice isFocusModeSupported:AVCaptureFocusModeAutoFocus]) {
        return;
    }
    [self.previewView tapToFocus:tapGestureRecognizer];
    NSError *error;
    [_captureDevice lockForConfiguration:&error];
    if (error) {
        NSLog(@"Error trying to lock configuration of camera. %@", [error localizedDescription]);
        return;
    }
    CGPoint touchPoint = [tapGestureRecognizer locationOfTouch:0 inView:self.cameraView];
    // range of touch point is from (0,0) to (1,1)
    CGFloat touchX = touchPoint.x / self.previewView.frame.size.width;
    CGFloat touchY = touchPoint.y / self.previewView.frame.size.height;

    _captureDevice.focusMode = AVCaptureFocusModeAutoFocus;
    if ([_captureDevice isExposureModeSupported:AVCaptureExposureModeAutoExpose]) {
        _captureDevice.exposureMode = AVCaptureExposureModeAutoExpose;
    }
    _captureDevice.focusPointOfInterest = CGPointMake(touchX, touchY);
    if ([_captureDevice isExposurePointOfInterestSupported]) {
        _captureDevice.exposurePointOfInterest = CGPointMake(touchX, touchY);
    }
    [_captureDevice unlockForConfiguration];
} 
```

希望这对人们有所帮助，以便他们可以转向更重要的代码！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-10T04:52:15.750

这是一个基本的 Swift 视图，它将显示一个动画焦点方块。只需将其添加到您的相机视图并将其连接到来自轻击手势识别器的焦点回调即可。

```
@objc func didTapToFocus(gesture: UITapGestureRecognizer) {
    let pointInViewCoordinates = gesture.location(in: gesture.view)
    let pointInCameraCoordinates = cameraView.videoPreviewLayer.captureDevicePointConverted(fromLayerPoint: pointInViewCoordinates)
    camera.focusOn(pointInCameraCoordinates: pointInCameraCoordinates)
    cameraView.showFocusBox(at: pointInViewCoordinates)
} 
```

焦点视图：

```
final class CameraFocusBoxView: UIView {

    // MARK: - Instantiation

    init() {
        super.init(frame: .zero)

        backgroundColor = .clear
        layer.addSublayer(focusBoxLayer)
    }

    // MARK: - API

    /// This zooms/fades in a focus square and blinks it a few times, then slowly fades it out
    func showBox(at point: CGPoint) {
        focusBoxLayer.removeAllAnimations()
        let scaleKey = "zoom in focus box"
        let fadeInKey = "fade in focus box"
        let pulseKey = "pulse focus box"
        let fadeOutKey = "fade out focus box"
        guard focusBoxLayer.animation(forKey: scaleKey) == nil,
              focusBoxLayer.animation(forKey: fadeInKey) == nil,
              focusBoxLayer.animation(forKey: pulseKey) == nil,
              focusBoxLayer.animation(forKey: fadeOutKey) == nil
            else { return }

        CATransaction.begin()
        CATransaction.setDisableActions(true)
        focusBoxLayer.position = point
        CATransaction.commit()

        let scale = CABasicAnimation(keyPath: "transform.scale")
        scale.fromValue = 1
        scale.toValue = 0.375
        scale.duration = 0.3
        scale.isRemovedOnCompletion = false
        scale.fillMode = .forwards

        let opacityFadeIn = CABasicAnimation(keyPath: "opacity")
        opacityFadeIn.fromValue = 0
        opacityFadeIn.toValue = 1
        opacityFadeIn.duration = 0.3
        opacityFadeIn.isRemovedOnCompletion = false
        opacityFadeIn.fillMode = .forwards

        let pulsing = CABasicAnimation(keyPath: "borderColor")
        pulsing.toValue = UIColor(white: 1, alpha: 0.5).cgColor
        pulsing.repeatCount = 2
        pulsing.duration = 0.2
        pulsing.beginTime = CACurrentMediaTime() + 0.3 // wait for the fade in to occur

        let opacityFadeOut = CABasicAnimation(keyPath: "opacity")
        opacityFadeOut.fromValue = 1
        opacityFadeOut.toValue = 0
        opacityFadeOut.duration = 0.5
        opacityFadeOut.beginTime = CACurrentMediaTime() + 2 // seconds
        opacityFadeOut.isRemovedOnCompletion = false
        opacityFadeOut.fillMode = .forwards

        focusBoxLayer.add(scale, forKey: scaleKey)
        focusBoxLayer.add(opacityFadeIn, forKey: fadeInKey)
        focusBoxLayer.add(pulsing, forKey: pulseKey)
        focusBoxLayer.add(opacityFadeOut, forKey: fadeOutKey)
    }

    // MARK: - Private Properties

    private lazy var focusBoxLayer: CALayer = {
        let box = CALayer()
        box.bounds = CGRect(x: 0, y: 0, width: 200, height: 200)
        box.borderWidth = 2
        box.borderColor = UIColor.white.cgColor
        box.opacity = 0
        return box
    }()

    // MARK: - Unsupported Initializers

    required init?(coder aDecoder: NSCoder) { fatalError("init(coder:) has not been implemented") }

} 
```

# html - 使文本背景透明但不是文本本身

> ID：15449280
> 
> 赞同：96
> 
> 时间：2013-03-16T12:31:55.677
> 
> 标签：html, css, text, opacity

所以我遇到了问题。我环顾四周，但没有运气。我想让我的身体背景透明，但文字不透明。就像现在一样，我一直在制作相同的不透明度。这是我的代码：

```
@charset "utf-8";
body {
    font: 100%/1.4 Verdana, Arial, Helvetica, sans-serif;
    background-color: #42413C;
    margin: 0;
    padding: 0;
    color: #000;
}

/* ~~ Element/tag selectors ~~ */
ul, ol, dl { 
    padding: 0;
    margin: 0;
}
h1, h2, h3, h4, h5, h6, p {
    margin-top: 0;
    padding-right: 15px;
    padding-left: 15px;
    opacity:1;
}
a img { 
    border: none;
}
a:link {
    color: #42413C;
    text-decoration: underline;
}
a:visited {
    color: #6E6C64;
    text-decoration: underline;
}
a:hover, a:active, a:focus {
    text-decoration: none;
}
.container {
    width: 750px;
    margin: 0 auto;
}
.content {
    padding:20px;
    width:710px;
    position:relative;
    background:#CCC;
    opacity: 0.5;
}
.fltrt {
    float: right;
    margin-left: 8px;
}
.fltlft { 
    float: left;
    margin-right: 8px;
}
.clearfloat { 
    clear:both;
    height:0;
    font-size: 1px;
    line-height: 0px;
}
.header {
    top:0%;
    width: 750px;
    height: 200px;
    background-image: url(images/header.png);
    background-repeat:no-repeat;
    background-position:center;
}
.navbar {
    height: 50px;
    width: 750px;
    position: relative;
    z-index: 2;
}
#bg {
    position: fixed;
    top: 25%;
    left: 15%;
    z-index: -1;
}
div {
display: block;
} 
```

这是我的网站（点击链接不要在你的 url 中输入“tccraft.net”，它会带你到 facebook 页面）：[http](http://tccraft.net/index.php) ://tccraft.net/index.php 谢谢！

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2013-03-16T12:37:06.943

不要`opacity`用于此，将背景设置为 RGBA 值，而不是仅使背景半透明。在你的情况下，它会是这样的。

```
.content {
    padding:20px;
    width:710px;
    position:relative;
    background: rgb(204, 204, 204); /* Fallback for older browsers without RGBA-support */
    background: rgba(204, 204, 204, 0.5);
} 
```

有关 css 中 rgba 值的更多信息和示例，请参阅[http://css-tricks.com/rgba-browser-support/](http://css-tricks.com/rgba-browser-support/)。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-16T12:37:17.367

对于完全透明的背景，请使用：

```
background: transparent; 
```

否则，对于半透明颜色填充，请使用：

```
background: rgba(255,255,255,0.5); // or hsla(0, 0%, 100%, 0.5) 
```

其中值是：

```
background: rgba(red,green,blue,opacity); // or hsla(hue, saturation, lightness, opacity) 
```

您还可以将 rgba 值用于渐变背景。

要在图像背景上获得透明度，只需事先在您选择的图像编辑器中降低图像的不透明度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T12:38:09.667

`opacity`将使文本和背景都透明。改用半透明背景色，`rgba()`例如使用一个值。适用于 IE8+

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-25T21:44:14.920

如果您在现代浏览器中使用 RGBA，则不需要让旧版 IE 仅使用 RGB 给定颜色的非透明版本。

如果您不坚持仅使用 CSS 的解决方案，请尝试[CSS3PIE](http://css3pie.com/)。使用此语法，您可以在旧 IE 中看到与在现代浏览器中看到的完全相同的结果：

```
div {
    -pie-background: rgba(223,231,233,0.8);
    behavior: url(../PIE.htc);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-08T08:03:51.267

要使您的身体背景透明，请尝试这种样式，它对我有用，在您想要的颜色代码末尾添加“广告”

```
background-color: #42413Cad !important; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-18T12:00:38.350

我会为透明度添加十六进制颜色代码

背景色：#42413C+hexcode

[https://gist.github.com/lopspower/03fb1cc0ac9f32ef38f4](https://gist.github.com/lopspower/03fb1cc0ac9f32ef38f4) 会是这样的：

```
background-color: #42413C2E 
```

它等于该颜色 + 18% alpha

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2018-08-27T06:53:43.827

```
box-shadow: inset 1px 2000px rgba(208, 208, 208, 0.54); 
```

# c++ - 解析器以获取 C 代码的完全括号语法

> ID：15449285
> 
> 赞同：2
> 
> 时间：2013-03-16T12:32:32.163
> 
> 标签：c++, c, gnu

作为项目的一部分，我正在尝试开发一个代码来检测`for`以 C/C++ 语法给出的循环区域。但这比它看起来要复杂得多！解析器应该处理给定的`{`、一条语句`for`循环、一条语句`if-else`控制等。

我想知道是否有任何稳定的工具（首选 GNU）来使 C/C++ 代码完全括起来？

提前致谢！

***更多的信息***

通过完全括号，我的意思是用`{`and标记循环的范围`}`。

例子：

输入：

```
 for (i = 0; i < 10; i++)
    if (i % 2)
      j++;
    else
      j--; 
```

输出：

```
 for (i = 0; i < 10; i++){
    if (i % 2){
      j++;
    }else{
      j--;
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:53:37.873

我可以使用[pycparser](https://bitbucket.org/eliben/pycparser)找到解决方案。`visit_for`修改中定义的函数就足够了`pycparser/c_generator.py`。然后通过运行内置的 pycparser 示例 ( `example/c-to-c.py`)，您将从 C 代码中获得完全括号内的 for 循环。

***为了以后的参考，修改如下：***

在 pycparser 中，修改 from 中的`visit_for`声明`pycparser/c_generator.py`：

```
def visit_For(self, n):
    s = 'for ('
    if n.init: s += self.visit(n.init)
    s += ';'
    if n.cond: s += ' ' + self.visit(n.cond)
    s += ';'
    if n.next: s += ' ' + self.visit(n.next)
    s += ')\n'
    s += self._generate_stmt(n.stmt, add_indent=True)
    return s 
```

`{`在它之前`self._generate_...`和`}`之后添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T08:07:50.473

我使用[uncrustify 取得](http://uncrustify.sourceforge.net/)了很好的效果

> 特征
> 
> *   标识代码，对齐括号，分配等
> *   对齐 '=' 和变量定义
> *   对齐结构初始化器
> *   对齐 #define 东西
> *   对齐反斜杠换行符
> *   重新格式化评论（一点点）
> *   修复字符间距
> *   在 return 语句中添加或删除括号
> *   **在单语句 if/do/while/for 语句上添加或删除大括号**
> *   支持嵌入式 SQL 'EXEC SQL' 东西
> *   高度可配置 - 自 0.60 版起有 454 个可配置选项

# javascript - 如何创建 Player 的孩子？

> ID：15449286
> 
> 赞同：0
> 
> 时间：2013-03-16T12:32:34.000
> 
> 标签：javascript, oop

```
var Game = function(){

    var game = this;

    game.Player = {
        pts:[]
    }

   } 
```

例如在 php 中它可能是：

```
game.Computer extends game.Player 
```

但是我怎样才能在同一个班级的 javascript 中从 game.Player 做一个孩子？

`[update]` `[1]`

```
var Game = function(){

    var game = this;

    game.Player = {
        pts:[],
        test: function(){ alert('test'); }
    }

    Player.prototype = new Computer;

    game.Computer = {

    }
}

var game = new Game();

game.Computer.test(); 
```

我不确定@BenM

`[update]` `[2]`

甚至像这样：

```
var Game = function(){

    var game = this;

    game.Player = {
        pts:[],
        test: function(){ alert('test'); }
    }

    game.Player.prototype = game.Computer {

    }

}

var game = new Game();

game.Computer.test(); 
```

那也是错误的，不能按原样扩展它。对不起，如果这里有很多代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:36:06.940

您似乎真的在寻找有关如何在 JavaScript 中进行继承的基本教程。这是一个很好的：[http ://www.klauskomenda.com/code/javascript-inheritance-by-example/](http://www.klauskomenda.com/code/javascript-inheritance-by-example/)

# javascript - 从 Javascript 解析 CDATA

> ID：15449288
> 
> 赞同：2
> 
> 时间：2013-03-16T12:33:12.610
> 
> 标签：javascript, html, parsing, dom, cdata

这是我的第一篇文章，如果我做错了，我很抱歉，但我们开始吧：

我一直在从事一个应该从网站上抓取价值的项目。这些值是 javascript 数组中的变量。我正在使用[PHP Simple HTML DOM](http://simplehtmldom.sourceforge.net/)，它适用于普通脚本，但不适用于存储在 CDATA 块中的脚本。因此，我正在寻找一种在 CDATA 块中抓取数据的方法。不幸的是，我能找到的所有帮助都是针对 XML 文件的，而我正在从 HTML 文件中抓取。

我试图抓取的 javascript 如下：

```
<script type="text/javascript">
//<![CDATA[
var data = [{"value":8.41,"color":"1C5A0D","text":"17/11"},{"value":9.86,"color":"1C5A0D","text":"18/11"},{"value":7.72,"color":"1C5A0D","text":"19/11"},{"value":9.42,"color":"1C5A0D","text":"20/11"}];
//]]>
</script> 
```

我需要抓取的是 var 数据中的“值”变量。

问题是我试图替换对象上的 CDATA 字符串。以下代码完美运行:-)

```
include('simple_html_dom.php');

$lines = file_get_contents('http://www.virtualmanager.com/players/7793477-danijel-pavliuk/training');

$lines = str_replace("//<![CDATA[","",$lines);
$lines = str_replace("//]]>","",$lines);

$html = str_get_html($lines);

foreach($html->find('script') as $element) {
    echo $element->innertext;
} 
```

如果需要，我会为您提供更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:02:18.560

一个体面的 HTML 解析器不应该要求将 Javascript 包装在一个`CDATA`块中。如果他们把它扔掉，只需在解析之前将它们从 HTML 中删除，执行如下操作：

1.  如果您的主机在该函数中禁用了 HTTP 支持，请使用[`file_get_contents()`](http://php.net/manual/en/function.file-get-contents.php)或[cURL](http://php.net/manual/en/book.curl.php)将 HTML 文件下载到字符串中。
2.  摆脱`//<![CDATA[`和`//]]>`位使用[`str_replace()`](http://php.net/manual/en/function.str-replace.php)
3.  使用 Simple DOM 从清理后的字符串中解析 HTML`str_get_html()`
4.  像以前一样处理 DOM 对象。

# java - Java为初始化和方法创建单独的类

> ID：15449289
> 
> 赞同：0
> 
> 时间：2013-03-16T12:33:13.470
> 
> 标签：java, optimization

我在 C# 之后启动 java，所以需要一些建议：

当您在 C# 中创建表单时，它会创建几个文件：

设计器 - 所有项目都被初始化的地方

和“main”——用户在其中编写代码，例如按钮的 actionlistener。

在 Java 中，所有这些都放在同一个文件中。

所以问题是，是否可以划分它？这是合适的方式，还是我应该把所有东西都放在一个类中（我在谈论表单项和事件监听器）？

如果您建议一些更好的更易于阅读的代码，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:48:45.093

基本上你可以做任何你想做的事 8)

在这方面，java 和 C# 之间的主要区别可能是 C# 及其工具集强烈推荐一种工作方式。这在 Java 中是非常不同的。既然你在谈论表格，我假设我们在这里谈论的是摇摆。但类似的东西也适用于其他工具包。

一种方法是让一个 GUIFactory 类（具有一个中心方法）接受一个模型（模型类）作为参数，然后创建和初始化所有 GUI 元素，使用监听器将它们连接到模型。在这种情况下，模型会触发事件，触发监听器，然后更新 UI。

当您有 C# 经验时，这应该足够简单，但可以让您分离您似乎正在寻找的关注点。

我写过关于[Clean Code Swing 和 Scala](http://blog.schauderhaft.de/2011/06/26/clean-code-with-swing-and-scala/)的文章，虽然它是 Scala，Java 也采用了同样的方法，所以它可能对你很有趣。

# cocos2d-iphone - 运动学体的 Cocos2d/Box2d 奇怪行为

> ID：15449296
> 
> 赞同：0
> 
> 时间：2013-03-16T12:33:25.127
> 
> 标签：cocos2d-iphone, box2d-iphone

我正在开发一个非常简单的游戏。这是我的敌人类名为 Machine 的行为代码：

```
#import "Machine.h"

@implementation Machine

+(id)machineWithWorld:(b2World*)world position:(CGPoint)pos
{
    return [[[self alloc] initWithWorld:world position:pos] autorelease];
}

-(id)initWithWorld:(b2World*)world position:(CGPoint)pos
{
    if(self = [super initWithShape:[AppDelegate renameFrameForIpad:@"machine"] inWorld:world])
    {
        size = [CCDirector sharedDirector].winSize;

        self.body->SetTransform([Helper toMeters:pos], 0.0);
        self.body->SetType(b2_staticBody);

        safetyCounter = 5;
        [self schedule:@selector(machineSafetyCounter)];

        movementWidthInMeters = (size.width-self.contentSize.width)/PTM_RATIO;
        linearSpeed = 0.5;
        [self schedule:@selector(startMoving) interval:1.5];
    }

    return self;
}

#pragma mark<Machine Behavior>

-(void)startMoving
{
    [self unschedule:_cmd];

    float distanceFromCenterInMeters = (size.width/2 - self.position.x)/PTM_RATIO;
    float interval = ABS(distanceFromCenterInMeters/linearSpeed);
    if(interval < 0.01f)
        interval = 0.02f;

    b2Vec2 motionDirection = (distanceFromCenterInMeters > 0.0f) ? b2Vec2(1.0, 0.0) : b2Vec2(-1.0, 0.0);
    self.body->SetType(b2_kinematicBody);
    self.body->SetLinearVelocity(linearSpeed*motionDirection);

    [self schedule:@selector(startMotionFromBeginning) interval:interval-0.01];

    CCLOG(@"startMoving distance-->%f, interval-->%f", distanceFromCenterInMeters, interval);
}

-(void)startMotionFromBeginning
{
    [self unschedule:_cmd];

    float interval = (movementWidthInMeters/2)/linearSpeed;

    self.body->SetLinearVelocity(0.5*b2Vec2(1.0, 0.0));
    [self schedule:@selector(moveRTL) interval:interval-0.01];

    [self schedule:@selector(checkIfHelmetIsBelowMachine) interval:0.1];

    CCLOG(@"startMotionFromBeginning interval-->%f", interval);
}

-(void)moveRTL
{
    [self unschedule:_cmd];

    float interval = movementWidthInMeters/linearSpeed;

    self.body->SetLinearVelocity(0.5*b2Vec2(-1.0, 0.0));
    [self schedule:@selector(moveLTR) interval:interval-0.01];

    CCLOG(@"moveRTL interval-->%f", interval);
}

-(void)moveLTR
{
    [self unschedule:_cmd];

    float interval = movementWidthInMeters/linearSpeed;

    self.body->SetLinearVelocity(0.5*b2Vec2(1.0, 0.0));
    [self schedule:@selector(moveRTL) interval:interval-0.01];

    CCLOG(@"moveLTR interval-->%f", interval);
}

-(void)checkIfHelmetIsBelowMachine
{
    [self unschedule:_cmd];

    Helmet* helmet = (Helmet*)[[[[[CCDirector sharedDirector] runningScene] children] objectAtIndex:0] getChildByTag:kTagHelmet];
    float helmetPosX = helmet.position.x;

    if((self.position.x > helmetPosX) && (self.position.x < helmetPosX+helmet.contentSize.width))
    {
        [self unscheduleAllSelectors];
        [self schedule:@selector(machineSafetyCounter) interval:0.1];

        [self schedule:@selector(startMovingDownwards) interval:0.0];

        return;
    }

    [self schedule:_cmd interval:0.1];
}

-(void)startMovingDownwards
{
    [self unschedule:_cmd];

    self.body->SetLinearVelocity(0.25*b2Vec2(0.0, -1.0));
    [self schedule:@selector(stopMovingDownwards) interval:1.0];

    CCLOG(@"startMovingDownwards");
}

-(void)stopMovingDownwards
{
    [self unschedule:_cmd];

    self.body->SetLinearVelocity(b2Vec2(0.0, 0.0));
    [self schedule:@selector(startMoving) interval:0.2];

    CCLOG(@"stopMovingDownwards");
} 
```

我所做的一切如下：

1) body 最初是静态的，定位在 ccp(size.width*0.5, size.height*0.75)。

2) 1.5 秒后，它开始运动并开始以 0.5 m/s 的线速度移动。

3）它检查它的当前距离（从屏幕宽度中心保持高度相同），评估到达该点所需的时间，然后开始沿该方向水平移动。

4）到达那个点后，它开始它的标志性运动，它开始从左到右移动，如果任何时候头盔（另一个游戏对象）从它下面经过，它开始向下移动并在1.0秒后停止，然后整个循环重复。

5）它移动 LTR 和 RTL 直到它在它下面找到头盔时开始向下移动。

现在的问题是，有时行为与预期完全相同。很多次，它开始向上移动，我从来没有为正方向的运动矢量设置 y 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:12:41.567

初始化body后，你不应该改变它`bodyType.`。当你第一次制作body时，将它设置为kinematic，这样你以后尝试改变它时就不会遇到问题。身体是否附着在一个`CCSprite`? 如果是这样，您应该使该类成为其子类，`CCSprite`以便您可以使用
`[super initWithFile:(NSString *) world:(b2World *)]`或您选择的某种方法来促进您的努力。

# sinatra - 使用 G-WAN 运行 sinatra

> ID：15449297
> 
> 赞同：1
> 
> 时间：2013-03-16T12:33:32.140
> 
> 标签：sinatra, g-wan

是否可以使用[G-wan](http://gwan.com) Web 服务器使用[Sinatra ？](http://www.sinatrarb.com)

如果可能怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:04:29.973

您可以通过 运行`Sinatra`在 G-WAN 上`CGI`，如用于执行外部命令的 G-WAN extern.c 或 stream3.c 示例所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:27:59.747

在没有解释（代理模式/负载均衡器）之前，不，不可能在 G-WAN 上运行 sinatra

# android - 在新的活动应用程序中终止尝试将 setText() 设置为 textview

> ID：15449300
> 
> 赞同：0
> 
> 时间：2013-03-16T12:33:40.867
> 
> 标签：android, android-intent, android-activity

我按照链接 [http://developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)

将字符串从一个活动发送到另一个活动。第二个活动中有一个文本视图，我尝试显示第一个活动的字符串。但应用程序在该行终止，

主要活动

```
Intent intent=new Intent(this,DisplayActivity.class);
    intent.putExtra(EXTRA_MESSAGE,Data);

    startActivity(intent); 
```

显示活动

```
TextView listname;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    listname=(TextView) findViewById(R.id.msg);

     Intent intent = getIntent();
    String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
    listname.setText(message);
    setContentView(R.layout.activity_display); 
```

应用程序终止在行`listname.setText(message);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:35:15.393

您需要更改顺序。`setContentView()`必须在开始初始化小部件之前调用。

```
setContentView(R.layout.activity_display);
listname = (TextView) findViewById(R.id.msg); 
```

正是文档所说的：

> setContentView 方法从布局资源中设置活动内容。资源将被膨胀，将所有顶级视图添加到活动中。

换句话说，setContentView() 方法是布局膨胀，它创建包含在布局中的 UI 元素的所有实例，然后将布局附加到 Activity。所以首先必须调用 setContentView 然后初始化 UI 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:50:37.710

以这种方式在 DisplayActivity 中尝试相同的代码..

```
TextView listname;

@Override

protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_display);
listname=(TextView) findViewById(R.id.msg);

Intent intent = getIntent();
String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
listname.setText(message); 
```

# vb6 - 是否可以在 vb6 中编写一个接受括号参数的过程

> ID：15449301
> 
> 赞同：2
> 
> 时间：2013-03-16T12:33:45.907
> 
> 标签：vb6, vb6-migration

我正在尝试在 vb6 中编写循环方法的替代品。它的语法是：

> object.Circle [Step] (x, y), radius, [color, start, end, aspect]

所以对它的调用可能如下所示：

```
Me.Circle (100, 100), 60 
```

我一直无法想出一种编写过程的方法，以便对它的调用将接受以这种方式使用的括号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T14:18:03.793

`Circle`关键字以及`Print`,和其他`PSet`一些关键字不是真正的方法。它们的语法由编译器处理并转换为真正的方法调用。不幸的是，VB6 IDE 无法模拟这些方法。

不寻常的签名用于与 QBasic 的早期版本和日期兼容

# php - Facebook“不支持的发布请求”错误

> ID：15449308
> 
> 赞同：0
> 
> 时间：2013-03-16T12:34:17.510
> 
> 标签：php, facebook

我正在尝试使用 Facebook API 为用户保存分数。我只是从他们的示例中复制并粘贴代码，但我仍然收到以下错误：

{"error":{"message":"不支持的发布请求。","type":"GraphMethodException","code":100}}

这是代码

 `````
<?php
  $app_id = 'YOUR_APP_ID';
  $app_secret = 'YOUR_APP_SECRET';
  $canvas_page_url = 'YOUR_CANVAS_PAGE_URL';

  // The Achievement URL
  $achievement = 'YOUR_ACHIEVEMENT_URL';
  $achievement_display_order = 1;

  // The Score
  $score = 'USER_SCORE';

  // Authenticate the user
  session_start();
  if(isset($_REQUEST["code"])) {
     $code = $_REQUEST["code"];
  }

  if(empty($code) && !isset($_REQUEST['error'])) {
    $_SESSION['state'] = md5(uniqid(rand(), TRUE)); //CSRF protection
    $dialog_url = 'https://www.facebook.com/dialog/oauth?' 
      . 'client_id=' . $app_id
      . '&redirect_uri=' . urlencode($canvas_page_url)
      . '&state=' . $_SESSION['state']
      . '&scope=publish_actions';

    print('<script> top.location.href=\'' . $dialog_url . '\'</script>');
    exit;
  } else if(isset($_REQUEST['error'])) { 
    // The user did not authorize the app
    print($_REQUEST['error_description']);
    exit;
  };

  // Get the User ID
  $signed_request = parse_signed_request($_POST['signed_request'],
    $app_secret);
  $uid = $signed_request['user_id'];

  // Get an App Access Token
  $token_url = 'https://graph.facebook.com/oauth/access_token?'
    . 'client_id=' . $app_id
    . '&client_secret=' . $app_secret
    . '&grant_type=client_credentials';

  $token_response = file_get_contents($token_url);
  $params = null;
  parse_str($token_response, $params);
  $app_access_token = $params['access_token'];

  // POST a user score
  print('Publish a User Score<br/>');
  $score_URL = 'https://graph.facebook.com/' . $uid . '/scores';
  $score_result = https_post($score_URL,
    'score=' . $score
    . '&access_token=' . $app_access_token
  );
  print('<br/><br/>');

  function https_post($uri, $postdata) {
    $ch = curl_init($uri);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $postdata);
    $result = curl_exec($ch);
    curl_close($ch);

    return $result;
  }

  function parse_signed_request($signed_request, $secret) {
    list($encoded_sig, $payload) = explode('.', $signed_request, 2); 

    // decode the data
    $sig = base64_url_decode($encoded_sig);
    $data = json_decode(base64_url_decode($payload), true);

    if (strtoupper($data['algorithm']) !== 'HMAC-SHA256') {
      error_log('Unknown algorithm. Expected HMAC-SHA256');
      return null;
    }

    // check sig
    $expected_sig = hash_hmac('sha256', $payload, $secret, $raw = true);
    if ($sig !== $expected_sig) {
      error_log('Bad Signed JSON signature!');
      return null;
    }

    return $data;
  }

  function base64_url_decode($input) {
    return base64_decode(strtr($input, '-_', '+/'));
  }

?> 
`````

# c# - Windows 应用程序和服务安装程序

> ID：15449313
> 
> 赞同：0
> 
> 时间：2013-03-16T12:35:00.750
> 
> 标签：c#, .net

我有一个包含 2 个项目的解决方案：1-windows 应用程序项目。2-windows服务项目。您能否帮我创建一个使用 VS2010 安装它们的安装程序，因为注册表项也应该在安装过程中在注册表中创建。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:52:15.307

创建安装程序有几个选项：[Wix](http://wixtoolset.org/)、[Inno](http://www.jrsoftware.org/isinfo.php)、[InstallShield](http://www.installshield.com/)。它们都可以帮助您将项目安装为服务并将密钥添加到注册表。

InstallShield 功能更强大，但它不是免费的。我听说过关于 Wix 的好消息，但从来没有机会使用它。Inno 是我选择的工具。有时它可能很繁琐，但是一旦你学会了所有的 cotchas，那就轻而易举了。

# c - 在 C 中的队列中打印错误字符

> ID：15449316
> 
> 赞同：0
> 
> 时间：2013-03-16T12:35:15.193
> 
> 标签：c, printing, queue

我正在尝试在其结构中打印一个带有 char 数组的队列。我只是读了一个带有一些网址的文本文件，推​​入队列并尝试打印。前 4 行没问题，但随后它开始在几乎所有其他行中打印坏字符。我不知道发生了什么事。即使我从 fgets 直接打印 char 数组，它也会正确打印并且队列也正确打印，所以......我很困惑......

任何的想法？

以下是相关代码：

结构：

```
typedef struct n_queue {
    char *web;
    struct n_queue *next;
} QUEUE_NODE, *P_QUEUE_NODE;

typedef struct k_queue {
    P_QUEUE_NODE head;
    P_QUEUE_NODE tail;
} kind_queue; 
```

读取文件：

```
void readFile(kind_queue *q) {
    char data[9][150];
    FILE *f=fopen("list.txt", "r");
    if (f == NULL) perror("Web list couldn't be found.");
    int j =0;
    int i;

    while (fgets(data[j],150, f)!=NULL) {
            //If I uncomment the line below, both char array and char array in queue
            //are printed allright
        //printf("%s", data[j]);

            //Supress the new line char
        for (i=0;i<150;i++) {
            if (data[j][i] == '\n') {
                data[j][i]='\0';
                break;
            }
        }

        push_queue(q, data[j]);
        j++;
    }

    fclose(f);
} 
```

推送代码：

```
void push_queue(kind_queue *q, char *web){
    P_QUEUE_NODE p;
    p = (P_QUEUE_NODE) malloc(sizeof(QUEUE_NODE));
    p->next = NULL;
    p->web = web;
    if (is_empty(q)) q->tail = q->head = p;
    else{
        q->tail->next= p;
        q->tail = p;
    }
} 
```

主功能：

```
int main () {

    kind_queue queue, *pt_queue_struct;
    pt_queue_struct = &queue;
    pt_queue_struct = init_queue(pt_queue_struct);
    readFile(&queue);

    print_queue(&queue);

    return(0);
} 
```

最后是打印功能：

```
void print_queue(kind_queue *q) {
    P_QUEUE_NODE paux;
    int j=1;
    for (paux=q->head; paux != NULL; paux=paux->next) {
        printf("%d: %s\n", j, paux->web);
        j++;
    }
} 
```

真实文本：

```
http://www.google.es
http://stackoverflow.com
http://www.facebook.com
http://akinator.com/cea
http://developer.android.com/map
http://tirsa.es/65/65.htm
http://www.ufo.es/
http://thisty.com/init/
http://damned-c.me/ 
```

输出：

```
1: http://www.google.es
2: http://stackoverflow.com
3: http://www.facebook.com
4: http://akinator.com/cea
5: 
6: 
7: http://www.ufo.es/
8: http:/(dU[~
9: (dU[~ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:42:54.033

读入的数据存储在一个局部变量`data`中，该变量在退出时超出范围`readFile`。如果将数据复制到节点结构中，这将是可以的。目前节点数据指针只是指向局部变量存储。

# php - imagecreatefromjpeg（）函数没有获取文件

> ID：15449318
> 
> 赞同：0
> 
> 时间：2013-03-16T12:35:29.697
> 
> 标签：php

imagecreatefromjpeg() 函数说文件不存在，但是当我使用 file_exists() 函数检查时，它说存在。

PHP代码就像，

```
 $path = "/home/content/html/uploads/test.jpg";

    if(file_exists($path)) {
        echo "Exists!";
    } else {
        echo "File Not Exists!";
    }    

    $resize = new Resize($path, $img['name']);
    $resize->resizeImage($size[0], $size[1]);
    $resize->preview(); 
```

我得到了这样的输出，

```
Exists!
Warning: imagecreatefromjpeg(/home/content/html/uploads/test.jpg) [function.imagecreatefromjpeg]: failed to open stream: No such file or directory in /home/content/html/includes/resize.php on line 20 
```

目录结构，

*   /html
    *   /上传
        *   测试.jpg
    *   索引.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:08:23.960

好的，我得到了解决方案。但首先我要感谢所有帮助我的人。

这是一个非常奇怪的问题。在服务器中，imagecreatefromjpeg() 仅在存在没有“空格”的文件路径时才有效。

如果我使用 rawurlencode() 将空格转换为 %20，那么问题仍然存在，所以我要做的是，在文件上传期间使用 str_replace() 函数将空格转换为其他内容。

```
str_replace(" ", "_", $filename); 
```

在本地主机上，我使用“test.jpg”文件，但在服务器上有许多不同的文件，名称中有空格，所以我在 qustion 中使用“test.jpg”。（对此感到抱歉）

# angularjs - 如何在 AngularJS 部分中保留新行？

> ID：15449325
> 
> 赞同：59
> 
> 时间：2013-03-16T12:35:49.027
> 
> 标签：angularjs

在 AngularJS 部分中，我正在遍历条目列表，如下所示：

```
<ul class="entries">
    <li ng-repeat="entry in entries">
        <strong>{{ entry.title }}</strong>
        <p>{{ entry.content }}</p>
    </li>
</ul> 
```

的内容`{{entry.content}}`有一些被 AngularJS 忽略的换行符。我怎样才能让它保留换行符？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-03-16T12:56:45.357

它只是基本的 HTML。AngularJS 不会对此做出任何改变。您可以改用`pre`标签：

```
<pre>{{ entry.content }}</pre> 
```

或者使用 CSS：

```
p .content {white-space: pre}

...

<p class='content'>{{ entry.content }}</p> 
```

如果`entry.content`包含 HTML 代码，您可以使用`ng-bind-html`：

```
<p ng-bind-html="entry.content"></p> 
```

不要忘记包括[ngSanitize](http://docs.angularjs.org/api/ngSanitize.$sanitize)：

```
var myModule = angular.module('myModule', ['ngSanitize']); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-11-17T17:10:31.333

我做过滤器

```
// filters js
myApp.filter("nl2br", function($filter) {
 return function(data) {
   if (!data) return data;
   return data.replace(/\n\r?/g, '<br />');
 };
}); 
```

然后

```
// view
<div ng-bind-html="article.description | nl2br"></div> 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-02-25T09:36:06.727

我通过添加来修复它`pre-line`：

```
<style>
    pre{
        white-space: pre-line;
    }
</style>
My data:
 <pre>{{feedback.Content}}<pre> 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-06-30T16:46:24.443

```
// AngularJS filter
angular.module('app').filter('newline', function($sce) {
    return function(text) {
        text = text.replace(/\n/g, '<br />');
        return $sce.trustAsHtml(text);
    }
});

// HTML
<span ng-bind-html="someText | newline"></span> 
```

# asp.net-mvc-3 - 仅在启用 javascript 时隐藏标签元素

> ID：15449328
> 
> 赞同：0
> 
> 时间：2013-03-16T12:35:58.870
> 
> 标签：asp.net-mvc-3

## 我有一个显示如下文本框的视图：

```
 $(function() {
        $('[name="CodeGuest"]').hide();
    }); 
```

* * *

```
 @Html.Label("CodeGuest") 
```

我在上面的代码中使用过，但没有隐藏标签。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:45:02.300

当您使用`@Html.Label("CodeGuest")`时，它将呈现以下 HTML

```
<label for="CodeGuest">CodeGuest</label> 
```

因此，您的 jQuery 选择器应该像这样查找具有特定`for`属性值的项目

```
$(function() {
    $('label[for="CodeGuest"]').hide();
}); 
```

我建议您使用另一个[重载](http://msdn.microsoft.com/en-us/library/hh413942%28v=vs.108%29.aspx)的`Html.Label`辅助方法，您可以在其中指定 HTML 属性，从而`ID`为标签定义一个元素。

```
 @Html.Label("CodeGuest", new { @id="codeGuest"}) 
```

这将为您提供带有元素的标记，`ID`以便您可以使用它来隐藏您的元素。

```
<label id="codeGuest" for="CodeGuest">CodeGuest</label> 
```

现在你的javascript代码可以

```
$(function() {
    $("#codeGuest").hide();
}); 
```

始终尝试使用**特定**的 jQuery 选择器（ID 代替类名等）而不是通用的。那更快。

# java - Java：读取控制台时出现 NoSuchElementException

> ID：15449331
> 
> 赞同：0
> 
> 时间：2013-03-16T12:36:03.257
> 
> 标签：java, exception, java.util.scanner

我已经进行了一些研究，但我一无所获。

所以这是我的代码：

```
public void play(){
    System.out.print("Make your choice ( R - P - S) : ");
    Scanner sc = new Scanner(System.in);
    char choice = sc.next().charAt(0);
    setChoice(choice);
    sc.close();
} 
```

我第一次进入这个函数时，一切正常，但下一次，它抛出 `NoSuchElementException`了我函数的第 3 行。另一件事：当我删除`sc.close()`行时，问题消失了，但我想保留该行。

有什么解决办法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T12:38:05.263

如果关闭 a `Scanner`，它也会关闭底层输入流，即`System.in`. 所以你不能关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:38:44.843

不要关闭扫描仪这是这里的问题。它将关闭底层输入流

```
sc.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T12:43:06.690

[`Scanner.close`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#close%28%29)

> 如果这个扫描器还没有关闭，那么如果它的底层可读也实现了 Closeable 接口，那么可读的 close 方法将被调用。如果此扫描仪已关闭，则调用此方法将无效。

`System.in`是一个[`InputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html)实现[`Closeable`](http://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html)。

这意味着调用`close()`on会`sc`调用`close()`的方法`System.in`，该方法会关闭输入流并释放与其关联的任何系统资源。

# asp.net - ASPX 运行时出现服务器错误

> ID：15449332
> 
> 赞同：1
> 
> 时间：2013-03-16T12:36:12.710
> 
> 标签：asp.net, exception

我有简单的`aspx`代码。当我`aspx`使用本地服务器（Visual Studio 开发服务器）运行页面时，一切正常。但是当我在我的域上运行它时，我得到了以下异常。

> 说明：服务器上发生应用程序错误。此应用程序的当前自定义错误设置可防止远程查看应用程序错误的详细信息（出于安全原因）。但是，它可以被本地服务器机器上运行的浏览器查看。
> 
> 详细信息：要在远程计算机上查看此特定错误消息的详细信息，请在位于当前 Web 应用程序根目录的“web.config”配置文件中创建一个标签。然后，此标记应将其“模式”属性设置为“关闭”。
> 
> ```
> <!-- Web.Config Configuration File -->
> 
> <configuration>
>     <system.web>
>         <customErrors mode="Off"/>
>     </system.web>
> </configuration> 
> ```
> 
> 注意：您看到的当前错误页面可以通过修改应用程序配置标记的“defaultRedirect”属性以指向自定义错误页面 URL 来替换为自定义错误页面。
> 
> ```
> <!-- Web.Config Configuration File -->
> 
> <configuration>
>     <system.web>
>         <customErrors mode="RemoteOnly" defaultRedirect="mycustompage.htm"/>
>     </system.web>
> </configuration> 
> ```

asp代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <h1>I am online</h1>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:39:36.840

在 ypur web.config 中更改为这个，你会得到异常。您还可以从与应用程序相同的域浏览网站，然后也会看到异常。

```
<configuration>
    <system.web>
        <customErrors mode="Off"/>
    </system.web>
</configuration> 
```

# asp.net - 从访问公共存储的请求线程产生的任务

> ID：15449334
> 
> 赞同：1
> 
> 时间：2013-03-16T12:36:23.910
> 
> 标签：asp.net, multithreading, task, httpcontext

我正在研究一些可以被认为是消息总线的代码。在我开始玩 Tasks 之前，一切都运行良好。

在我的特定实现中，当我处于 Web 环境中时，我`HttpContext.Current.Items`会在请求的整个生命周期内存储消息，直到在请求结束时将消息取出。正如您可以想象的那样，当我开始使用异步任务时，操作发生在其他线程上，而我所拥有的东西却被打破了。

我理解为什么会发生这种情况，但我想提出一个不需要我将消息总线传递到每个任务的解决方案。

我不介意将实现更改为不使用`HttpContext.Current.Items`，但语义应该相同。具体来说，我有一个存储在请求的生命周期内，并且从主请求线程产生的线程可以访问。

有人对我如何做到这一点有任何想法吗？

附带说明一下，如果一个请求产生一个日志运行任务并且请求在任务完成之前返回，如果该任务试图找到存储，我会想象存储将是空的并抛出异常。

# java - JSoup - 选择多个项目

> ID：15449335
> 
> 赞同：0
> 
> 时间：2013-03-16T12:36:24.313
> 
> 标签：java, web, web-scraping, jsoup

我正在尝试从该文件中提取信息：

```
<tr id="ctl00_Body_mc_cErgebnisListe1_ctl02_InseratInfoTR" class="topangebot"> 
 <td class="BildTD" rowspan="2"> <a href="/anzeiger/immoweb/Detail.aspx?InseratID=6629161&amp;FromTopAngebot=true"><img border="0" src="http://images.derstandard.at/t/22/upload/imagesanzeiger/immoupload/2012/05/73/733de246-b4eb-425a-8705-2e8b50baff12.jpg" alt="" /></a> </td> 
 <td class="TitleTD" rowspan="2"> <span class="neu">TOP!</span> <strong><a href="/anzeiger/immoweb/Detail.aspx?InseratID=6629161&amp;FromTopAngebot=true">Ihr Geld als sichere Anlage - Eigentum vom Feinsten - Jacquingasse 29</a></strong><br /><a href="/anzeiger/immoweb/Detail.aspx?InseratID=6629161&amp;FromTopAngebot=true">Wien 3.,Landstra&szlig;e, Wohnung</a><br /><span style="color: gray">Erstbezug, Parkettboden, Lift, Provisionsfrei, Kabel/Sat-TV</span> </td> 
 <td class="GroessenTD" rowspan="2"> </td> 
 <td class="PreisTD" style="border:none;"> </td> 
</tr>
<tr id="ctl00_Body_mc_cErgebnisListe1_ctl02_InseratInfoTR" class="topangebot"> 
 <td class="BildTD" rowspan="2"> <a href="/anzeiger/immoweb/Detail.aspx?InseratID=6629161&amp;FromTopAngebot=true"><img border="0" src="http://images.derstandard.at/t/22/upload/imagesanzeiger/immoupload/2012/05/73/733de246-b4eb-425a-8705-2e8b50baff12.jpg" alt="" /></a> </td> 
 <td class="TitleTD" rowspan="2"> <span class="neu">TOP!</span> <strong><a href="/anzeiger/immoweb/Detail.aspx?InseratID=6629161&amp;FromTopAngebot=true">Ihr Geld als sichere Anlage - Eigentum vom Feinsten - Jacquingasse 29</a></strong><br /><a href="/anzeiger/immoweb/Detail.aspx?InseratID=6629161&amp;FromTopAngebot=true">Wien 3.,Landstra&szlig;e, Wohnung</a><br /><span style="color: gray">Erstbezug, Parkettboden, Lift, Provisionsfrei, Kabel/Sat-TV</span> </td> 
 <td class="GroessenTD" rowspan="2">12312 </td> 
 <td class="PreisTD" style="border:none;">3123 </td> 
</tr> 
```

我想用我的 css 查询同时从同一个 tr.topangebot 中选择标题和价格。我试过这个查询：

```
Elements topangebotPars = doc.select("tr.topangebot > (td.TitleTD && td.GroesseTD)"); 
```

我有：

> 无法解析查询

如何同时选择多个元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T12:37:26.280

请记住，使用的选择器[`select`](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#select%28java.lang.String%29)是 CSS 选择器。因此，就像您在 CSS 文件中编写以[逗号分隔的选择器列表](http://www.w3.org/TR/CSS2/selector.html#grouping)一样，例如：

```
tr.topangebot > td.TitleTD, tr.topangebot > td.GroesseTD {
    color: blue:
} 
```

...你做同样的事情`select`：

```
Elements topangebotPars = doc.select("tr.topangebot > td.TitleTD, tr.topangebot > td.GroesseTD"); 
```

JSoup 文档有选择器的[快速参考](http://jsoup.org/apidocs/org/jsoup/select/Selector.html)。他们将其列在“组合器”下（尽管 CSS 规范本身并不认为它们是“组合器”，只是一个组）。

# java - 具有多层的图像

> ID：15449337
> 
> 赞同：0
> 
> 时间：2013-03-16T12:36:45.217
> 
> 标签：java, image

在我们的游戏设计中，我们希望通过（希望）能够检查地图图像的背景层来实现碰撞检测。我们目前正在使用.png，但问题是透明度通道（alpha）对于顶层（决定透明度）是有用的信息，我们不能将此层用作位掩码而不使图像透明。由于我们的游戏是基于图块的 RPG，因此检查将很简单（迭代每个块大小的像素，如果 alpha=1，则该块是地图实体，不能通过或踩到）。

替代方案（我们能想到的）需要太多设置。例如，拥有第二张图像没有出错的余地，因为它们必须完全匹配。此外，将图像中的单个块指定为可步行需要我们将此信息存储在图像中或手动设置，这太暴力了。透明层的想法（如果您能提出一种使其工作的方法）是理想的，因为您可以在 Photoshop 中对图像进行阴影处理并创建透明图像，几乎不需要任何工作。

TLDR；你可以在java中使用png的alpha通道作为位掩码的一种形式而不渲染透明度吗？任何可以存储多个图层的swing轻松处理的图像格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:44:05.990

您正在对单个值进行操作，那么为什么不在其他通道的 1 个中保留 1 个数字。保留 1600 万种颜色，但保留 b=0 作为碰撞颜色。人们将无法分辨 0,0,0 和 0,0,1 之间的区别，因此永远不要使用纯黑色，无需奇怪的透明编码即可解决问题。

# c# - 获取网站 SSL 证书的公钥

> ID：15449343
> 
> 赞同：6
> 
> 时间：2013-03-16T12:37:03.810
> 
> 标签：c#, asp.net, oauth, certificate, ssl-certificate

我不确定以下是否可行，因为我绝不是该主题（安全、证书等）的专家。

无论如何，我想做的是使用 C# 代码获取网站 SSL 证书的公钥。有没有办法使用 HTTP 请求或其他方式从站点查询该信息？

为了让你们理解我为什么真的想这样做，我将简要解释一下我想要实现的场景。基本上，我有很多网站使用 OAuth 2.0 来实现彼此之间的信任状态。因此，假设`Site1`向其发出请求并向`Site2`其发送了一个令牌，该令牌应该来自受信任的授权服务器。`Site2`应该能够验证此令牌的真实性。

我希望这已经足够清楚了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T16:38:52.103

我将以下代码块用于类似目的。我希望它有帮助！！！

```
 Uri u = new Uri(url);
        ServicePoint sp = ServicePointManager.FindServicePoint(u);

        string groupName = Guid.NewGuid().ToString();
        HttpWebRequest req = HttpWebRequest.Create(u) as HttpWebRequest;
        req.ConnectionGroupName = groupName;

        using (WebResponse resp = req.GetResponse())
        {

        }
        sp.CloseConnectionGroup(groupName);
        byte[] key = sp.Certificate.GetPublicKey();

        return key; 
```

# sql - 使用 WebMatrix/Razor 从两个表中提取信息时使用 INNER JOIN

> ID：15449347
> 
> 赞同：2
> 
> 时间：2013-03-16T12:37:08.177
> 
> 标签：sql, razor, webmatrix

我编写了以下代码来从我的数据库中提取一些信息

```
@{
var db = Database.Open("StayInFlorida");
var propertyinfo = "SELECT * FROM PropertyInfo WHERE PropertyID='@0'";
var qpropertyinfo = db.QuerySingle(propertyinfo);
var ownerinfo = "SELECT FirstName, LastName FROM OwnerInfo WHERE OwnerID='2'";
var qownerinfo = db.QuerySingle(ownerinfo); 
}
<!DOCTYPE html>

<html>
<head>

</head>
<body>
@qpropertyinfo.PropertyName
@qownerinfo.FirstName
@qownerinfo.LastName
</body>
</html> 
```

在这两个表中，都有一个名为“OwnerID”的列，我希望能够从 PropertyInfo 表中提取 OwnerID，然后从 OwnerID 表中显示该所有者的名字和姓氏。我该怎么做，我需要使用 INNER JOIN 语句吗？

我希望它是动态的，这样当我更改为不同的属性时，所有者信息也会发生变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:48:57.690

以下查询应该满足您的要求：

```
SELECT OwnerInfo.FirstName, OwnerInfo.LastName 
FROM OwnerInfo
INNER JOIN PropertyInfo on PropertyInfo.OwnerID = OwnerInfo.OwnerID
WHERE PropertyInfo.PropertyID='@0' 
```

然后，您可以像在问题中所做的那样将 PropertyId 作为参数传递。

# elasticsearch - Elastic Search 数据丢失/删除/删除

> ID：15449353
> 
> 赞同：1
> 
> 时间：2013-03-16T12:37:36.530
> 
> 标签：elasticsearch

我在弹性搜索中索引了大约 50000 个视频，但是当它达到大约 52000 时，所有数据都被删除了。这对我来说真的很奇怪，我没有为 ES 设置任何堆大小或最小或最大内存大小，所以它们是默认的，即最小 256m 和最大 1g，我的文档总大小是 304mb。我没有从默认更改任何其他内容，因为我仍然喜欢弹性搜索的学习阶段，所以知道可能是什么原因吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:59:42.817

引擎盖下的 Lucene 具有很高的弹性。

恕我直言，此类删除的唯一原因来自用户本人。您网络上的某个人可能会发送删除命令，例如：

```
curl -XDELETE localhost:9200 
```

您应该在此处添加有关您的配置的更多详细信息。

*   你如何发送文档？
*   你的 elasticsearch.yml 是什么样的？
*   您的集群中有多少个节点？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:16:07.327

dadoonet 对删除请求可能是正确的。可能发生的另一件事是，如果您使用默认数据路径，那么 Elasticsearch 数据将存储在 elasticsearch 文件夹本身中。如果有人在现有版本的基础上部署了新版本的 elasticsearch，那么您将丢失数据。

# c++ - 类在定义为全局时停止工作

> ID：15449355
> 
> 赞同：1
> 
> 时间：2013-03-16T12:37:59.370
> 
> 标签：c++, class, global, local, definition

我正在编写一个程序，该程序使用来自 PSEye 相机的相机数据，使用 Code Laboratories 驱动程序 ( [http://www.codelaboratories.com/products/eye](http://www.codelaboratories.com/products/eye) )。所以我创建了一个名为 PSEyeGetter.h 的头文件来直接与驱动程序交互。当我在这样的函数中使用这个类作为局部变量时（注意我使用 OpenCV 来显示图像）：

```
 void Test2()
    {
        cvNamedWindow("Image", CV_WINDOW_AUTOSIZE);
        PSEyeGetter Get = PSEyeGetter(CLEYE_MONO_PROCESSED, CLEYE_VGA, 30);

        IplImage* img_cam =  cvCreateImage(cvSize(Get.W, Get.H), 8, Get.Size);

        while (1)
        {
            if (Get.GetFrame())
            {
                int Length = Get.W * Get.H * Get.Size;
                for (int cnt = 0; cnt < Length; cnt++)
                {
                    img_cam->imageData[cnt] = Get.CurrentColours[cnt];
                }
            }
            cvShowImage("Image", img_cam);

            if (cvWaitKey(10) == 27) break;
        }

        cvReleaseImage(&img_cam);
        cvDestroyAllWindows();
    } 
```

我没有问题，图像显示完美。但是当我尝试定义 PSEyeGetter 一个像这样的全局变量时：

```
 PSEyeGetter Cam;
    IplImage* img_cam;

    void OpenCam()
    {
        Cam = PSEyeGetter(CLEYE_MONO_PROCESSED, CLEYE_VGA, 30);
        img_cam =  cvCreateImage(cvSize(640, 480), 8, 1);
        cvNamedWindow("Image", CV_WINDOW_AUTOSIZE);
    }

    void GetImage()
    {
        while (1)
        {
           if (Cam.GetFrame())
           {
               int Length = Cam.W * Cam.H * Cam.Size;
               for (int cnt = 0; cnt < Length; cnt++)
               {
                   Image->imageData[cnt] = Cam.CurrentColours[cnt];
               }

               cvShowImage("Image", img_cam);

               if (cvWaitKey(10) == 27) break;
           }
        }

        cvReleaseImage(&img_cam);
        cvDestroyAllWindows();
    } 
```

它突然停止正确获取图像。它链接到相机并获取图像，但图像只是蓝色的。任何想法为什么会这样？

`CurrentColours = (PBYTE)malloc(W * H* Size * sizeof(byte));`PBYTE 定义为 (byte*)的其他有用信息位 。它是在创建 PSEyeGetter 时定义的，只有在类被销毁时才释放。

我需要将其定义为全局，因为这是需要在多个线程上操作的更大程序的一部分，因此我需要能够从多个位置访问相机。

感谢您的任何帮助。:)

编辑：PSEyeGetter 的构造函数

```
 PSEyeGetter::PSEyeGetter(CLEyeCameraColorMode ColourMode, CLEyeCameraResolution Resolution, float FrameRate)
    {
        IsReady = false;
        Mode = ColourMode;
        Res = Resolution;
        Rate = FrameRate;
        switch(Mode)
        {
        case CLEYE_MONO_PROCESSED:
            Size = 1;
            break;
        case CLEYE_COLOR_PROCESSED:
            Size = 4;
            break;
        case CLEYE_MONO_RAW:
            Size = 1;
            break;
        case CLEYE_COLOR_RAW:
            Size = 4;
            break;
        case CLEYE_BAYER_RAW:
            Size = 1;
            break;
        }
        if (!FindCam()) return;
        CurrentColours = (PBYTE)malloc(W * H* Size * sizeof(byte));
    }

    bool PSEyeGetter::FindCam()
    {
        if (IsReady)
        {
            CLEyeCameraStop(Cam);
            CLEyeDestroyCamera(Cam);
            IsReady = false;
        }

        if (CLEyeGetCameraCount() == 1)
        {
            guid = CLEyeGetCameraUUID(0);
            Cam = CLEyeCreateCamera(guid, Mode, Res, Rate);
            CLEyeCameraGetFrameDimensions(Cam, W, H);
            IsReady = true;
            CLEyeCameraStart(Cam);
            CLEyeCameraLED(Cam, true);
        }
        else
        {
            IsReady = false;
        }

        return IsReady;
    } 
```

# php - 捕获新请求时如何检查 JSON 对象值是否已更改

> ID：15449364
> 
> 赞同：0
> 
> 时间：2013-03-16T12:38:36.337
> 
> 标签：php, javascript, json, jquery, local-storage

我有一个 php 脚本，它以 JSON 格式获取特定用户的最新推文。JSON 被解析为一个 AJAX 函数，该函数在页面上的一个 ID 中显示最新的推文。每 x 秒设置一个计时器来执行上述操作，检索最新的推文，而无需用户刷新页面。这完美地工作。

我现在正在尝试创建一个通知功能，当有新推文要显示时显示通知。在检索到的 JSON 中，每条推文都有一个名为“id_string”的唯一 ID。我想要做的是以某种方式存储生成的 id_string 的值，然后每次请求检索新推文时，检查新的 'id_string' 与存储的'id_string'，如果不同则显示通知。

关于如何去做这件事的任何想法都会很棒？！我已经研究过本地存储，但我对此不是很熟悉，据我所知，您无法根据本地存储中的其他字符串检查字符串。

这是帮助解释我的问题的必要代码：

PHP 向 twitter 发出请求并生成 JSON 格式的输出 (tweets.php)：

```
require_once('config/FrameFunctions.php');

$output = array();

foreach ($tweeters as $i => $tweeter){
    $theTweeter = new Tweeter($tweeter, $tmhOAuth);
    $allinfo = $theTweeter->getTweets();
    $output[$i] = $allinfo;
}

header("Content-type: application/json");
echo json_encode($output); 
```

每隔 x 秒发出请求并生成客户端输出的 javascript：

```
$(document).ready(function() {

   $('.fancybox').fancybox();
   /*
   *  call ajax function and update latest
   */        

    var refreshTweets = function() {
      console.log("updating..");
      $.ajax({url:"tweets.php",success:function(result){
        tweets = eval(result);

        for(i=0;i<tweets.length;i++){
            $("#latesttweet"+(i+1)).html(
               tweets[i][0].user.name + ": " + tweets[i][0].text
             );  
        }

      }});

    }
    refreshTweets();

    //set the time in milliseconds here for each refresh
    setInterval(refreshTweets , 30000); //Interval

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:06:09.167

这是基于我上面的评论的解决方案

```
/*
NOTE : allTweets will have to be populated with all the tweets ids on the page prior           
to being called in refreshTweets so that it does not trigger fake notifications
*/

    var allTweets = Array();

    $(document).ready(function() {

        $('.fancybox').fancybox();
        /*
         *  call ajax function and update latest
         */        

        var refreshTweets = function() {
            console.log("updating..");
            $.ajax({url:"tweets.php",success:function(result){
                    tweets = result;

                    for(i=0;i<tweets.length;i++) {

                        //check if its a new tweet or not
                        if (allTweets[tweets[i][0].id_string] === undefined) {
                            allTweets[tweets[i][0].id_string] = 1;    
                            //trigger notification here!
                        }

                        $("#latesttweet"+(i+1)).html(
                        tweets[i][0].user.name + ": " + tweets[i][0].text

                    );  
                    }

                }});

        }
        refreshTweets();

        //set the time in milliseconds here for each refresh
        setInterval(refreshTweets , 30000); //Interval

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:08:17.800

我想与其他人一起评论，但我想我太新了。

无论如何，如果您不存储敏感信息，您可以将数据存储在 JSON 中，PHP 可以快速写入和读取较小的文件。如果您要存储大量数据，则可能需要考虑将值保存到 MySQL 数据库或类似的东西。

设置 JSON 存储和 MySQL 数据库似乎在这里有很好的记录。

# python - GAE Python - 如何将 csv.writer 的结果附加到电子邮件中？

> ID：15449371
> 
> 赞同：1
> 
> 时间：2013-03-16T12:38:50.520
> 
> 标签：python, google-app-engine, email, csv

在 GAE Python 上，我正在从我的数据存储中编写一个 CSV，并希望通过电子邮件发送它而不将其存储在 blobstore 中。这旨在作为 CRON 作业每天运行一次。

导出工作正常，但我不知道如何将 CSV 添加到电子邮件的附件中。您的意见将不胜感激。

```
class ShopExport(webapp2.RequestHandler):
  def get(self):
    shops = Shop.all().filter('active =', True).order('name')
    self.response.headers[str('Content-Type')] = str('application/csv')
    self.response.headers[str('Content-Disposition')] = str('attachment; filename="shops.csv"')
    writer = unicodecsv.writer(self.response.out, encoding='utf-8')
    writer.writerow(["id", "name", "domain", "category", "deeplink", "region"])
    writer.writerow([shop.keyname, shop.name, shop.url, shop.category, shop.url_aff, region])

    message = mail.EmailMessage(sender="Me <me@gmail.com>",
            subject="Shop Export",
            attachments=[("shops.csv", self.response.out)])
    message.to="Someone <someone@gmail.com>",
    message.html= 'Please find attached the shop export'
    message.send() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T18:56:35.683

你可以这样做

```
import StringIO
...
data = StringIO.StringIO()
writer = unicodecsv.writer(data, encoding='utf-8')
...
message = mail.EmailMessage(sender="Me <me@gmail.com>",
            subject="Shop Export",
            attachments=[("shops.csv", bytes(data.getvalue()))]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T14:51:33.417

尝试修改这一行。

```
message = mail.EmailMessage(sender="Me <me@gmail.com>",
        subject="Shop Export",
        attachments=[("shops.csv", self.response.body)]) 
```

# web-services - RESTful webservice + Spring 令牌认证

> ID：15449375
> 
> 赞同：4
> 
> 时间：2013-03-16T12:39:29.197
> 
> 标签：web-services, spring, rest, authentication, token

我对 Spring 不太熟悉，但我已经阅读了一些文章和操作方法。

所需业务为：

*   典型的客户端-服务器架构：移动客户端和服务器端的 RESTful 服务
*   客户端登录移动应用程序有不同的选择：应用程序登录和 Facebook 登录
*   必须保护服务器端的所有 RESTful 服务免受未经授权的用户的攻击

我的职责是开发 RESTful 服务。我非常擅长应用服务器、Java EE、JMS、JDBC、分布式事务 (XA)，但我不太擅长安全性 :(

我用 Spring 开发了一些 STATELESS RESTful web 服务。这些服务不受保护，因此每个人都可以使用它们。

例如：

*   `http://...../api/country/{**user_id**}`
*   `http://...../api/country/{**user_id**},{country_id}`
*   ...

我的每个 Web 服务都有一个**user_id**输入参数，因为我需要确定哪个用户进行了服务器调用。网络服务的结果取决于用户。当然，这绝对是正常的。

现在，我必须开发一些新东西，因为我必须保护这些 Web 服务免受未经授权的用户的攻击。

**我的想法是：**

(*) 我将像这样创建两个新的 Web 服务：

*applicationLogin(String username, String password)[/INDENT]* 和 *facebookLogin(String accessToken)*

*   `http://...../api/login/{username}, {password}`
*   `http://...../api/login/{facebook access token}`

(*) 我必须保护我的网络服务免受未经授权的用户的侵害

*用户登录过程可能如下所示：* (1) 用户在他/她的移动设备上填写用户名和密码字段 (2) 单击应用程序登录按钮 (3) 移动应用程序向`http://...../api/login/{username}, {password}`公共服务发出服务器调用 ( 4）如果用户名和密码正确，我将生成一个令牌（一个带有到期日期信息的长字符串），然后我会将用户名和令牌字符串放入 HTTP 标头（5）的答案中，之后所有客户端都必须发回当他们进行 web 服务调用时，将这两个参数（用户名和令牌）发送给服务器。

在服务器端，我可以从 HTTP 请求中读取用户名，这样我就可以从所有 Web 服务的签名中删除**user_id**参数。

我正在尝试在 Spring 中实现这个过程。我想我需要使用 Spring 安全模块中的**PRE_AUTH_FILTER**。但是不知道我的想法好不好？

**我做到了：**

网页xml

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/api/country/*</url-pattern>
</filter-mapping>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext-security.xml, /WEB-INF/applicationContext.xml</param-value>
</context-param> 
```

applicationContext-security.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:p="http://www.springframework.org/schema/p"
            xmlns:security="http://www.springframework.org/schema/security"

       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <security:http use-expressions="true" create-session="stateless" auto-config="false" entry-point-ref="authenticationEntryPoint">
        <security:intercept-url pattern="/api/login/*" access="permitAll"/>
        <security:intercept-url pattern="/api/country/*" access="isAuthenticated()" />
        <security:custom-filter position="PRE_AUTH_FILTER" ref="authenticationTokenProcessingFilter" />
    </security:http>

    <bean id="authenticationEntryPoint" class="com.samples.spring.auth.ForbiddenAuthenticationEntryPoint" />

    <bean id="userDetailsServiceImpl" class="com.samples.spring.auth.UserDetailsServiceImpl" />

    <bean id="preAuthenticationProvider" class="org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider">

        <property name="preAuthenticatedUserDetailsService" ref="userDetailsServiceImpl" />
    </bean>

    <bean id="authenticationTokenProcessingFilter" class="com.samples.spring.auth.AuthenticationFilter">

        <property name="authenticationManager" ref="appControlAuthenticationManager" />
    </bean>

    <security:authentication-manager alias="appControlAuthenticationManager">
        <security:authentication-provider ref="preAuthenticationProvider" />
    </security:authentication-manager>      

</beans> 
```

您如何看待我的登录过程？这是开始实现令牌处理方法的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:50:06.373

除了使用 Spring 安全性之外，Spring 还有另一个名为[Spring Social](http://www.springsource.org/spring-social)的模块。我认为这肯定会帮助您并减少开发工作。它还允许您使用其他社交网络（如 Twitter、linkedin）连接到您的应用程序。还可以查看[Spring Mobile](http://www.springsource.org/spring-mobile)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:48:10.727

如果您接受小的更改，您可以使用开箱即用的安全性。

Spring Security 使用 http 会话来存储用户详细信息。并且 https 通常由包含会话密钥或 jsessionId 参数的会话 cookie 跟踪。

还有一个提示：使用 https 而不是 http。

# android - 通知栏中的广告

> ID：15449380
> 
> 赞同：4
> 
> 时间：2013-03-16T12:39:42.787
> 
> 标签：android, notifications, admob, ads

我想问一下你们是否可以给我一个在通知栏中显示 admob.com 广告的代码示例？我知道用户可能会讨厌我的应用，但我想试一试。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T12:54:13.707

不久前，Google Play 更改了它的[开发者内容政策](https://play.google.com/about/developer-content-policy.html)（阅读**广告政策**部分），其中明确指出：

> 广告不得模拟或冒充系统通知或警告。

因此，如果您必须实施此类功能，您可能会收到警告或从 Google Play 中删除。

来源：[在对上面链接的政策进行更改后发送给开发人员的电子邮件](http://www.androidcentral.com/google-play-developer-policies-have-been-updated-we-where-heading)

话虽如此，我现在知道亚马逊等其他平台的任何此类限制，主要是因为我还没有在它上面分发，也不需要阅读他们的政策。所以，如果你需要有这样的功能，你将不得不使用[AirPush SDK](http://www.airpush.com/android-developers)

自然，由于 Google 制定了政策，AdMod 不具备显示通知广告的功能。

所以，如果回报值得冒险...... ;-)

# php - MySQL 中 PHP 动态下拉列表中的 JavaScript 变量

> ID：15449382
> 
> 赞同：0
> 
> 时间：2013-03-16T12:39:59.627
> 
> 标签：php, javascript, mysql

`var`当我在数据库中存在的 url 中键入实际选择时，我可以让这个弹出窗口返回正确的值。

```
<script type="text/javascript">
var data = $.get("logbookincludes/sqftpoles.php?choice=Front Range", function(data) {
alert("Data Loaded: " + data);
});
</script> 
```

我希望变量由实际的下拉选择器设置`id`。我似乎无法使语法正确。

```
var data = $.get("logbookincludes/sqftpoles.php?choice=" +    $("#item36_select_1").val()); 
```

这是用于填充选择器下拉列表的服务器端 php。

**zone.php**

```
 <?php
  include("dbinfo.php");

$query = "SELECT zonename FROM zone";

$result=mysql_query($query);

while ($row=mysql_fetch_array($result)) {
    echo "<option>" . $row{'zonename'} . "</option>";
}
    ?> 
```

这是下拉代码。

```
Zone
 <select name="zone" id="item36_select_1" required data-hint="">
        <option id="item36_0_option" selected value="Front Range">
          Front Range
        </option>
      <? include('logbookincludes/zones.php');?>
      </select> 
```

这是**sqftpoles.php**

```
 <?php
   include("dbinfo.php");

$choice = mysql_real_escape_string($_GET['choice']);

$query = "SELECT sqftpoles FROM zone WHERE zonename = '$choice'";

$result=mysql_query($query);

    $result2=mysql_query($query2);
while ($row=mysql_fetch_array($result)) {
echo  $row{'sqftpoles'};
}   
   ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:46:21.977

这是正确的示例代码：

```
$.get('http://stackoverflow.com/questions/tagged/' + 'javascript', function(data){
    alert(data);
}) 
```

这是您需要的代码。Javascript 是一种客户端语言

```
$.get('logbookincludes/sqftpoles.php?choice=' + $("#item36_select_1").val(), function(data){
    alert(data);
});

function updatesub(){
  $.get('logbookincludes/sqftpoles.php?choice=' + $("#item36_select_1").val(), function(data){
   var u = $('#item44_number_1').val()-0,
       q = $('#sqftofzone').val()-0,
       n = data-0;
   $('#item49_number_1').val(u*q*n);
   alert(data);
});
} 
```

# delphi - MidasLib.dcu 使应用程序变慢

> ID：15449386
> 
> 赞同：12
> 
> 时间：2013-03-16T12:40:10.140
> 
> 标签：delphi, tclientdataset

我声明 MidasLib 以避免在某些客户端中由 Midas.dll 引起的 dll 地狱。

下面的代码运行大约 2350 毫秒。如果我删除了使用中的 MidaLib 声明，它会在 45 毫秒内开始运行！！

data.xml 文件使用 TClientDataSet.SaveToFile 方法保存，有 5000 条记录，大小约为 600Kb。

有谁知道如何解释这种奇怪的行为？

我可以在 Delphi XE2 upd 3 和 Delphi XE3 upd 2 中确认问题。

谢谢。

```
program Loader;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  MidasLib,
  System.SysUtils,
  Winapi.Windows,
  Data.DB,
  Datasnap.DBClient;

var
  cds : TClientDataSet;
  start, stop : Cardinal;
begin
  cds := TClientDataSet.Create(nil);
  try
    start := GetTickCount;
    cds.LoadFromFile('c:\temp\data.xml');
    stop := GetTickCount;
    Writeln(Format('Time elapsed: %dms', [stop-start]));
  finally
    cds.Free;
  end;
end. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T12:29:08.403

这是一个已知的错误/回归，请参阅 QC 报告

*   [http://qc.embarcadero.com/wc/qcmain.aspx?d=109476](http://qc.embarcadero.com/wc/qcmain.aspx?d=109476)
*   [http://qc.embarcadero.com/wc/qcmain.aspx?d=107346](http://qc.embarcadero.com/wc/qcmain.aspx?d=107346)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-17T16:33:41.237

我们只使用 Midas DLL 的本地副本，而不管系统中安装了什么，如果找不到本地的，则只回退到全局的。

我们使用 XE2 upd4 hf1，后来我们切换到 XE4 的 Midas DLL（主项目仍然是用 xe2 制作的）

```
// based on stock MidasLib unit

unit MidasDLL;

interface

implementation

uses Winapi.Windows, Winapi.ActiveX, Datasnap.DSIntf, SysUtils, Registry;

// function DllGetDataSnapClassObject(const CLSID, IID: TGUID; var Obj): HResult; stdcall; external 'Midas.DLL';
//var DllGetDataSnapClassObject: function(const CLSID, IID: TGUID; var Obj): HResult; stdcall; //external 'Midas.DLL';
var DllGetDataSnapClassObject: pointer; //external 'Midas.DLL';

const dllFN = 'Midas.DLL'; dllSubN = 'DllGetDataSnapClassObject';
var DllHandle: HMODULE = 0;

function RegisteredMidasPath: TFileName;
const rpath = '\SOFTWARE\Classes\CLSID\{9E8D2FA1-591C-11D0-BF52-0020AF32BD64}\InProcServer32';
var rry: TRegistry;
begin
  Result := '';
  rry := TRegistry.Create( KEY_READ );
  try
    rry.RootKey := HKEY_LOCAL_MACHINE;
    if rry.OpenKeyReadOnly( rpath ) then begin
       Result := rry.ReadString('');
       if not FileExists( Result ) then
          Result := '';
    end;
  finally
    rry.Destroy;
  end;
end;

procedure TryFindMidas;
var fPath, msg: string;
  function TryOne(const fName: TFileName): boolean;
  const  ver_16_0 = 1048576; // $00060001
  var    ver: Cardinal;  ver2w: LongRec absolute ver;
  begin
    Result := false;
    ver := GetFileVersion( fName );
    if LongInt(ver)+1 = 0 then exit; // -1 --> not found
    if ver < ver_16_0 then begin
       msg := msg + #13#10 +
              'Obsolete version found: '+IntToStr(ver2w.Hi) + '.' + IntToStr(ver2w.Lo) + ' in library file ' + fName;
       exit;
    end;
    DllHandle := SafeLoadLibrary(fName);
    if DllHandle = 0 then begin
       msg := msg + #13#10 +
              'Failure loading library ' + fName + '. Maybe this was Win64 DLL or some other reason.';
       exit;
    end;
    DllGetDataSnapClassObject := GetProcAddress( DllHandle, dllSubN);
    if nil = DllGetDataSnapClassObject then begin  // не найдена
       msg := msg + #13#10 +
              'Incompatible library loaded ' + fName + '. Missed function ' + dllSubN;
       FreeLibrary( DllHandle );
       DllHandle := 0;
    end;
    Result := true;
  end;
  function TryTwo(const fName: TFileName): boolean; // seek in the given folder and its immediate parent
  begin
    Result := TryOne(fName + dllFN);
    if not Result then
      Result := TryOne(fName + '..\' + dllFN); // 
  end;
begin
  fPath := ExtractFilePath( ParamStr(0) );
  if TryTwo( fPath ) then exit;

  fPath := IncludeTrailingBackslash( GetCurrentDir() );
  if TryTwo( fPath ) then exit;

  fPath := RegisteredMidasPath;
  if fPath > '' then
     if TryOne( fPath ) then exit;

  msg := 'This program needs the library ' + dllFN + ' version 16.0 or above.'#13#10 +
         'It was not found, thus the program can not work.'#13#10 + #13#10 + msg;
  Winapi.Windows.MessageBox(0, PChar(msg), 'Launch failure!',
         MB_ICONSTOP or MB_TASKMODAL or MB_DEFAULT_DESKTOP_ONLY or MB_TOPMOST );
  Halt(1);
end;

initialization
//  RegisterMidasLib(@DllGetDataSnapClassObject); -- static linking does not work for utilities in sub-folders

  TryFindMidas; // immediately terminates the application if not found
  RegisterMidasLib(DllGetDataSnapClassObject);
finalization
  if DllHandle <> 0 then
     if FreeLibrary( DllHandle ) then
        DllHandle := 0;
end. 
```

# php - 在 HttpRequest 中发送文件时发生 php HttpRequestException

> ID：15449389
> 
> 赞同：0
> 
> 时间：2013-03-16T12:40:34.093
> 
> 标签：php, httprequest

我正在尝试使用[HttpRequest](http://www.php.net/manual/en/class.httprequest.php)类执行 HTTP POST 并从本地 php 脚本发送文件。testupload.php 的代码是：

```
<?php
$r = new HttpRequest('http://127.0.0.1:5090/upload.php', HttpRequest::METH_POST);
$r->addPostFile('app', 'abc.txt');//if this line is commented the exception is gone
try {
    echo $r->send()->getBody();
} catch (HttpException $ex) {
    echo $ex;
}
?> 
```

我在以下情况下遇到以下异常：

```
exception 'HttpInvalidParamException' with message 'Empty or too short HTTP message: ''' in
D:\xampp\htdocs\testupload.php:0 inner exception 'HttpRequestException' with
message 'Failed to open/read local data from file/application; failed creating formpost 
data (http://127.0.0.1:5090/upload.php)' in D:\xampp\htdocs\testupload.php:8 
Stack trace: #0 D:\xampp\htdocs\testupload.php(0): HttpRequest->send() #1 {main} 
```

文件 abc.txt 位于同一目录中。问题是什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T15:15:03.087

可能有点晚了，但请尝试在调用“$r->send()->getBody();”之前检查您是否没有意外删除（取消链接）文件 （这是我的经验）。如果您不删除文件，请尝试添加文件的绝对路径和/或检查文件访问权限。

# vb.net - 在 vb.net 中拆分 DATETIME

> ID：15449390
> 
> 赞同：1
> 
> 时间：2013-03-16T12:40:41.023
> 
> 标签：vb.net

我有 datetime ( `5/24/2013`) 我想把它们分成 3 个字符串，比如

我需要来自 VB.NET 的代码

```
String 1 = 5
String 2 = 24 
String 3 = 2013 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:49:35.930

使用适当的[`DateTime`属性](http://msdn.microsoft.com/en-us/library/vstudio/system.datetime_properties.aspx)：

```
Dim value As New DateTime(2013, 5, 24)
Dim dayString As String = value.Day.ToString()
Dim monthString As String = value.Month.ToString()
Dim yearString As String = value.Year.ToString() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:53:55.410

如果你的日期是一个字符串，你必须先解析它：

```
Dim dt As DateTime = DateTime.ParseExact("5/24/2013", "d", Nothing)
Dim day As String = dt.Day.ToString()
Dim month As String = dt.Month.ToString()
Dim year As String = dt.Year.ToString() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T13:26:07.377

你可以试试这个方法

```
dim dbDate1 as Date 
dim string1 as string
dim string2 as string
dim string3 as string
dim number1 as integer
dim number2 as integer
dim number3 as integer

' Strings
string1 = dbDate1.Day().ToString()
string2 = dbDate1.Month().ToString()
string3 = dbDate1.Year().ToString() 
```

如果您想要一个数字而不是字符串，只需从行尾删除“.ToString()”

```
' Numbers
number1 = dbDate1.Day()
number2 = dbDate1.Month()
number3 = dbDate1.Year() 
```

无论您的数据是 DATE 还是 DATETIME 对象，它都应该工作相同

# android - android开发图表图表就像分析应用程序

> ID：15449394
> 
> 赞同：1
> 
> 时间：2013-03-16T12:40:56.937
> 
> 标签：android, graph, charts

我正在开发一个将使用一些图形和图表的应用程序。据说我看到了[谷歌分析应用程序](https://play.google.com/store/apps/details?id=com.google.android.apps.giant&hl=en)，你可以选择按小时、每天、每周和每月查看，还可以设置日期范围等。任何人都可以举一个例子或如何开始这个还有它读取什么样的数据 json xml 它读取什么格式或结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:51:02.977

您可以使用许多不同的 jar 插件，通过快速 Google 搜索：

1.  [鬣蜥](http://www.infragistics.com/products/android/)

2.  [图表](http://www.java4less.com/charts/chart.php?info=android)

3.  [图表引擎](http://www.achartengine.org/)

4.  [图形视图](http://www.jjoe64.com/2011/07/chart-and-graph-library-for-android.html)

看看这篇文章：

[https://stackoverflow.com/questions/424752/any-good-graphing-packages-for-android](https://stackoverflow.com/questions/424752/any-good-graphing-packages-for-android)

# c++ - 构造函数链中应该使用移动语义吗？

> ID：15449397
> 
> 赞同：2
> 
> 时间：2013-03-16T12:41:02.420
> 
> 标签：c++, c++11, move-semantics

假设我有以下两个类：

```
class Person
{
    public:
        Person(string name, string surname)
            : _name(move(name)), _surname(move(surname)) { }
        ...
    private:
        string _name;
        string _surname;
};

class Student : public Person
{
    public:
        Student(string name, string surname, Schedule schedule)
            : Person(move(name), move(surname)), _schedule(move(schedule)) { }
        ...
    private:
        Schedule _schedule;
};

int main()
{
    Student s("Test", "Subject", Schedule(...));
    ...
    return 0;
} 
```

这是移动语义的一个很好的用法吗？如您所见，Student 构造函数中有一层“move-s”。是否可以在不使用引用将参数转发到基本构造函数的情况下避免`move`函数调用开销？`const`

或者也许......每当我需要将参数转发给基本构造函数时，我应该使用 const 引用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T13:30:42.327

不会。只有非常大的类型才能获得性能提升，这种情况*非常*少见。绝对，当处理一些你事先不知道的移动非常昂贵或不可移动的类型时，然后假设便宜的移动。

您现有的代码是惯用的 C++11，在这方面一个完美的转发构造函数是错误的，并且会因为一个参数启动而严重破坏事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T12:44:29.890

**在选择优化**. 您很可能不需要在一次复制/移动操作上保存，在这种情况下，您应该倾向于清晰和简单（例如参考`const`）。

这就是说，如果您担心转发构造函数参数的开销，您可以使构造函数成为构造函数*模板*并使用**完美转发**来产生最小开销，无论您传递的是右值还是左值：

```
class Person
{
    public:
        template<typename T, typename U>
        Person(T&& name, U&& surname)
            : _name(std::forward<T>(name)), _surname(std::forward<U>(surname)) { }
        ...
    private:
        string _name;
        string _surname;
};

class Student : public Person
{
    public:
        template<typename T, typename U, typename V>
        Student(T&& name, U&& surname, V&& schedule)
            : Person(
                std::forward<T>(name), 
                std::forward<U>(surname)), 
                _schedule(std::forward<V>(schedule)) 
        { }
        ...
    private:
        Schedule _schedule;
}; 
```

# r - 乘法 ARIMA 模型

> ID：15449398
> 
> 赞同：3
> 
> 时间：2013-03-16T12:41:23.803
> 
> 标签：r

鉴于此 ARIMA 模型：

```
(1-0.8B)*(1-0.2B^6)*(1-B)Y_t = epsilon_t 
```

乘法模型为 (1,1,0*(1,1,0)_6 (季节性分量 = 6)。有没有工具可以从这个模型中预测新值（例如第 10 个或第 11 个值）给定一些初始值一组值，例如：

```
y <- c(1,4,5,2,0,8,9,4,-3,-3) 
```

我试过

```
arima(y,order=c(1,1,0),seasonal=list(order=c(1,1,0),period=6))

 error: initial value in 'vmmin' is not finite 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:23:29.140

您可以使用以下功能提前预测`predict()`：

```
> y=c(1,4,5,2,0,8,9,4,-3,-3)
> mymodel = arima(c(1,4,5,2,0,8,9,4,-3,-3) ,order=c(1,1,0),seasonal=list(order=c(1,1,0), period=2))
> mymodel

Call:
arima(x = c(1, 4, 5, 2, 0, 8, 9, 4, -3, -3), order = c(1, 1, 0), seasonal = list(order = c(1, 
    1, 0), period = 2))

Coefficients:
         ar1     sar1
      0.7368  -0.9169
s.e.  0.3696   0.1089

sigma^2 estimated as 11.25:  log likelihood = -20.23,  aic = 46.46

> predict(mymodel, n.ahead = 5)
$pred
Time Series:
Start = 11 
End = 15 
Frequency = 1 
[1]  -7.763438 -16.104376 -25.686464 -28.419524 -35.086436

$se
Time Series:
Start = 11 
End = 15 
Frequency = 1 
[1]  3.354151  6.722215 10.392430 14.061929 19.640317 
```

我缩短了周期，以便您的模型具有足够长的数据向量。

# objective-c - 防止双数四舍五入

> ID：15449400
> 
> 赞同：2
> 
> 时间：2013-03-16T12:41:38.227
> 
> 标签：objective-c

在我的代码中，我有一个 double number `2.555`。我`%.2f`通过 NSLog 来显示它，`2.55`但输出是 2.56。它正在四舍五入我不想要的数字！我知道有`ceil(double)`并且`floor(double)`可以使用，但他们在这里没有帮助我。

```
double div = a/b;
NSLog(@"DIV = %.f", div); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:47:04.000

没有看到你的代码是不可能找到错误的。以下代码将根据您的需要工作。

```
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setRoundingMode:NSNumberFormatterRoundDown];
[numberFormatter setMaximumFractionDigits:2];
NSString *numberAsString = [numberFormatter stringFromNumber:[NSNumber numberWithDouble:2.555]];
NSLog(@"%@",numberAsString);
[numberFormatter release]; 
```

您可以参考此链接以获取[NSNumberFormatter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:31:45.710

我认为有一种更简单的方法可以做到这一点。如果我理解正确，你不想使用 floor() 因为你想保持“div”的内容不变。如果这是正确的，那么您可以执行以下操作。

NSLog(@"DIV = %.2f", trunc(div * 100) / 100);
NSLog(@"DIV = %.2f", floor(div * 100) / 100);

以上将在第二个之后删除小数，但仅用于显示。“div”的内容不变。

# c - C中的字符串替换

> ID：15449402
> 
> 赞同：0
> 
> 时间：2013-03-16T12:41:50.457
> 
> 标签：c, string

我正在开发一个C程序，程序语句如下：

> 给定一个字符串 S 和一个正长度的字符串列表 F1,R1,F2,R2,...,FN,RN，继续按顺序查找 Fi 在 S 中的出现（从左到右）并替换他们和里。所有字符串都超过字母 { 0, 1 }。搜索应该只考虑在之前的迭代中没有被替换的 S 的连续片段。算法的迭代不应覆盖该算法的任何先前替换。
> 
> 输入样本：
> 
> 你的程序应该接受一个文件名的路径作为它的第一个参数。该文件中的每一行都是一个测试用例。每个测试用例将包含一个字符串，然后是一个分号，然后是一个逗号分隔的字符串列表。例如。
> 
> 10011011001;0110,1001,1001,0,10,11
> 
> 输出样本：
> 
> 对于每一行输入，在替换完成后打印出字符串。例如。
> 
> 11100110
> 
> 例如：10011011001 => 10100111001 [将 0110 替换为 1001] => 10100110 [将 1001 替换为 0] => 11100110 [将 10 替换为 11] => 11100110

我的代码能够用 Rn 替换每个相应的 Fn，但它已经完成了之前的替换。如何只搜索那些没有被替换的 S 的连续片段。我正在按如下方式进行搜索和替换：

```
 void string_sub(char s1[],char s2[],char s3[])
    {
            char r[200];
            printf("\n%s %s %s\n",s1,s2,s3);
            int i,j,k,x,y;
            char res[100];
            int len1=strlen(s1);
            int len2=strlen(s2);
            int len3=strlen(s3);
            j=0;
            i=0;
            while(i<len1)//searching for string 2 in string 1
            {
                    if(s2[j]==s1[i])
                    {
                            j++;
                            i++;
                            if(j==len2)
                            {
                              y=i;
                              x=i-len2;
                              break;        
                            }
                    }
                    else
                    {
                            if(s2[0]!=s1[i])
                            i++;
                            j=0;
                    }
            }
            k=0;
            for(i=0;i<x;i++)
            {
                    r[k]=s1[i];
                    k++;
            }
            for(i=0;i<len3;i++)
            {
                r[k]=s3[i];
                    k++;
            }
            i=y;
            while(i<len1)
            {
                    r[k]=s1[i];
                    k++;
                    i++;
            }
            r[k]='\0';//resultant string into r
            k=0;
           for(i=0;i<strlen(r);i++)//copying resultant string to s1
           {
            s1[k]=r[i];
            k++;
           }
           s1[k]='\0';
    } 
```

我的整个 C 代码在[这里](http://ideone.com/upsKpO)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:23:38.500

It seems to me, if I understand your code correctly, that you are calling your substitution code for each pair you get, and passing in the converted string each time. What I would do is pass a start offset into that function as well and then have that function return the location in the newly substituted string that you left off with the last substitution. The function would start searching s1 at your offset rather than at 0 each time. (Remember to not change your offset if you do not perform a substitution.) So in you main function, have an offset variable that starts at 0 and pass that in to the function, and also assign the result of the function to that variable so that next time you call it you will start at the last offset instead of the beginning. Does this make sense? If not I can try to break my answer down a bit better.

In your main function you would:

```
int offset = 0; 
```

and then

```
offset = string_sub( offset, s1, s2, s3 ); 
```

your function will look something like this:

```
int string_sub( int offset, char* s1, char* s2, char* s3 )
{
... 
```

and at the point where you have finished replacing the string you would:

```
offset = y; 
```

and at the end you would do this

```
return( offset );
} 
```

Does that help?

As @Mike noticed, my answer is not quite correct. I assumed incorrectly that you would ignore everything before the last point you looked at because I did not read the requirements thoroughly enough. Instead of passing in an offset and then returning a new offset, you need to pass in a structure that contains an array of ranges where each range is a range of characters that have been substituted and are as such, untouchable, and a count of how many ranges there are in that array. Since this is in C we don't have the luxury of easy array management so we will have to do this the hard way. I would make the structure look as follows:

```
#define MAX_RANGES (10)

struct RangeEntry
{
    int first;
    int last;
};

struct RangeData
{
    int numRanges;
    struct RangeEntry ranges[MAX_RANGES];
}; 
```

And then have your substitute function prototype look like this:

```
int string_sub( char* s1, char* s2, char* s3, struct RangeData* rangeData ) 
```

In your main function you would instantiate this structure, and initialize numRanges to 0, and then pass a pointer to this instance into your function. In your function you would have to look at s1 a little differently. Instead of just looking to see if you ran off the end of the string you would have to look to see if you run into any of those ranges. If you are matching then the match will have to end at the start of the next range. If you are not then you would have to continue looking after the end of the next range.

I hope this helps, and sorry for the wrong answer earlier.

# javascript - jquery/javascript 隐藏和显示元素依赖下拉列表

> ID：15449406
> 
> 赞同：2
> 
> 时间：2013-03-16T12:42:19.263
> 
> 标签：javascript, jquery, html

我需要在一个选择下拉菜单上显示/隐藏选项，这取决于另一个下拉菜单的选择选项。

我的意思是，当我选择“其他”时，将显示在花药下拉完整列表中（男性和女性）！当我选择“工程师先生”时，只会显示“男性”，当我选择“工程师小姐”时，只会显示“女性”。

```
<select>
<option value="">Choose</option>
<option value="Mr">Mr. Engineer</option>
<option value="Miss">Miss. Engineer</option>
<option value="other">Other</option>

</select>

<select>
<!--Below shows when 'Other' is selected , and show otherwise-->
<option value="0">choose</option>

<!--Below shows when 'Mr. engineer' is selected jsut , and hidden otherwise-->
<option value="male">Male</option>

<!--Below shows when 'Miss. engineer' is selected just, and hidden otherwise-->
<option value="female">Female</option>

</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:45:15.090

您可以使用`change`并执行以下操作：

```
$("#dropdownlist").change(function() {
   var control = $(this);

   if (control.val() == "Engineer") {
      $("#dropdownlist2").show();
   }
}); 
```

这是基于以下结构：

```
<select id="dropdown1">
   <option value="Mechanic">Mechanic </option>
   <option value="Engineer">Engineer</option>
 </select>

<select id="dropdown2" style="display:none">
   <option value="Item 1">Item 1 </option>
   <option value="Item 2">Item 2 </option>
 </select> 
```

[http://jsfiddle.net/zs3QG/](http://jsfiddle.net/zs3QG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:53:17.910

在这种情况下，我通常求助于 HTML 本身中的选择之间的映射值，并使用来自 JS 的这些映射，而不是在 JS 中硬连接它。

例如：`appliesto`属性映射 select2 中的选项，这些选项适用于 select1 中的每个选项。

```
<select id="one">
  <option>Choose</option>
  <option appliesto="male">Mr. Engineer</option>
  <option appliesto="female">Miss. Engineer</option>
  <option appliesto="other">Other</option>
</select>

<select id="two">
  <option type="other">choose</option>
  <option type="male">Male</option>
  <option type="female">Female</option>
</select> 
```

并使用这些映射通过 JS 根据需要显示/隐藏。

```
$('select#one').change(function() {
    var selType = $(this).find('option:selected').attr('appliesto');
    $('select#two option[type="'+selType+'"]').prop('selected', true);
}); 
```

检查这个演示：http: [//jsfiddle.net/xGJRP/1/](http://jsfiddle.net/xGJRP/1/)

当然，您可能需要进一步微调，但我相信您明白了。

# php - 如何在使用 php 将它们写入页面时为 div 提供唯一的 id

> ID：15449411
> 
> 赞同：0
> 
> 时间：2013-03-16T12:43:06.623
> 
> 标签：php

我使用 php 来创建一个字符串，该字符串使用通过使用 post 的表单在上一页上提交的数据。

**这是php：**

```
if ($carrier== "DL") {   

                $front = '<tr><td><div onclick="selectText(this)">EZE*#$*IET';
                $center =  '/O$'.$FOP.'/RB'.$differencePos.'X0.00P'.$fee.'AT0.00/OIECP'.$orIssue.'111062789#MCRV*/MA'.$MCOamt; 
                $end = '</div></td></tr>';

                               echo $front,$guest1Ticket,'X*A',$guest1Con,$center,'#N1.1',$end;

             if($guest2Ticket) echo $front,$guest2Ticket,'X*A',$guest2Con,$center,'#N2.1',$end;  

             if($guest3Ticket) echo $front,$guest3Ticket,'X*A',$guest3Con,$center,'#N3.1',$end;  

             if($guest4Ticket) echo $front,$guest4Ticket,'X*A',$guest4Con,$center,'#N4.1',$end;  

             if($guest5Ticket) echo $front,$guest5Ticket,'X*A',$guest5Con,$center,'#N5.1',$end;  

             if($guest6Ticket) echo $front,$guest6Ticket,'X*A',$guest6Con,$center,'#N6.1',$end;  

             if($guest7Ticket) echo $front,$guest7Ticket,'X*A',$guest7Con,$center,'#N7.1',$end;  

             if($guest8Ticket) echo $front,$guest8Ticket,'X*A',$guest8Con,$center,'#N8.1',$end;  

             if($guest9Ticket) echo $front,$guest9Ticket,'X*A',$guest9Con,$center,'#N9.1',$end; 
        } //if ($airline == "DL") 
```

**这将创建如下所示的字符串：** `EZE*#$*IET8388623729002X*A/O$CA/RB71.02X0.00P50.00AT0.00/OIECP01AUG111062789#MCRV*/MA21.02#N1.1`

`EZE*#$*IET8388623729003X*A/O$CA/RB71.02X0.00P50.00AT0.00/OIECP01AUG111062789#MCRV*/MA21.02#N2.1`

`EZE*#$*IET8388623729004X*A/O$CA/RB71.02X0.00P50.00AT0.00/OIECP01AUG111062789#MCRV*/MA21.02#N3.1`

`....`

每行之间的唯一区别是 IET **8388623729004**部分和弦本身末端的 N **1.1**部分。

我使用`$front`和`$end`子字符串将实际字符串包装在 div 和 table 元素中以用于布局目的。

**给每个得到回显的 div 一个唯一的 id 以便我的`onclick="selectText(this)"`工作的最佳方法是什么？**

我知道我可以`$front`分成几个子字符串，然后做类似的事情

`if($guest2Ticket) echo $front1,'id="div2"',$front2,$guest2Ticket,'X*A',$guest2Con,$center,'#N2.1',$end;`

但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:37:33.607

这就是我会做的方式。通过`$front`从变量字符串更改为函数，您可以使用静态计数器并在每次调用函数时增加它

```
function front() {
    static $i=1;
    return '<tr><td><div id="div'.$i.'" onclick="selectText(this)">EZE*#$*IET';
    $i++;
} 
```

它看起来像这样

```
if ($carrier== "DL") {   

            function front() {
                  static $i=1;
                  return '<tr><td><div id="div'.$i.'" onclick="selectText(this)">EZE*#$*IET';
                  $i++;
             }
            $center =  '/O$'.$FOP.'/RB'.$differencePos.'X0.00P'.$fee.'AT0.00/OIECP'.$orIssue.'111062789#MCRV*/MA'.$MCOamt; 
            $end = '</div></td></tr>';

                           echo front(),$guest1Ticket,'X*A',$guest1Con,$center,'#N1.1',$end;

         if($guest2Ticket) echo front(),$guest2Ticket,'X*A',$guest2Con,$center,'#N2.1',$end;  

         if($guest3Ticket) echo front(),$guest3Ticket,'X*A',$guest3Con,$center,'#N3.1',$end;  

         if($guest4Ticket) echo front(),$guest4Ticket,'X*A',$guest4Con,$center,'#N4.1',$end;  

         if($guest5Ticket) echo front(),$guest5Ticket,'X*A',$guest5Con,$center,'#N5.1',$end;  

         if($guest6Ticket) echo front(),$guest6Ticket,'X*A',$guest6Con,$center,'#N6.1',$end;  

         if($guest7Ticket) echo front(),$guest7Ticket,'X*A',$guest7Con,$center,'#N7.1',$end;  

         if($guest8Ticket) echo front(),$guest8Ticket,'X*A',$guest8Con,$center,'#N8.1',$end;  

         if($guest9Ticket) echo front(),$guest9Ticket,'X*A',$guest9Con,$center,'#N9.1',$end; 
} //if ($airline == "DL") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T13:54:57.470

我会用 jquery 来做这件事，根本不发出 id。

（不要忘记首先包含 jquery.js）。

```
<script>
  $(function()
  {
    $('div').click(function()
    {
      selectText(this);
    });
  });
</script> 
```

# c++ - 当 operator new 在此代码“new T”中返回地址时会发生什么？

> ID：15449417
> 
> 赞同：-6
> 
> 时间：2013-03-16T12:43:36.140
> 
> 标签：c++, constructor, new-operator

```
class T{
public:
    T(){}
};

int main ()
{
  T *t = new T; //line 8

} 
```

我的意思是代码在进入构造函数之前是什么样子的？例如，在第 8 行 operator new 返回地址，然后代码看起来像`T *t = T 0x0FF00`，因为它像对象定义，不能像`0x0FF00 T`。因此，如果它是真的，这个由 operator new 返回的地址如何位于类型 T 之后，尽管 operator new 之前返回它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T12:53:59.963

```
T *t = new T;
//     ^^^^^ 
```

这是一个`t`类型的声明`T*`。它由 . 之后的表达式初始化`=`。整个`new T`部分是此初始化程序中的*新表达式*。

*new 表达式*导致为类型对象分配内存，然后`T`在该空间中构造该对象。*new 表达式*返回一个指向该对象的指针。也就是说，在对*new-expression*求值后，该行现在看起来像：

```
T *t = returned_pointer; 
```

我假设您正在使用`0x0FF00`作为示例内存地址 - 在这种情况下，您可以想象该行已变为：

```
T *t = 0x0FF00; // Note: this wouldn't actually compile because 0x0FF00 is an integer literal 
```

`t`现在使用该内存地址初始化指针。

*您可能会对new-expression 的*作用感到困惑。它有以下两个步骤：

1.  它调用适当的分配函数（通常是`operator new`），传递存储类型对象所需的内存大小`T`。`operator new`分配该内存并返回指向该位置的地址。

2.  `T`然后它在该空间中初始化一个类型的对象。

# javascript - addEventListener DOMContentLoaded 不起作用

> ID：15449424
> 
> 赞同：5
> 
> 时间：2013-03-16T12:44:34.310
> 
> 标签：javascript, google-chrome-extension

我正在尝试创建一个简单的脚本，该脚本将向按钮添加一个侦听器，以触发一个在页面完全加载时显示警报的函数。

该脚本将在 Chrome 扩展程序中实现

我正在使用以下代码：

```
 document.addEventListener('DOMContentLoaded', function () {
        showalert();
        document.querySelector('button').addEventListener('click', showalert());
    });

    function showalert() {
        alert("you just pressed the button");
    } 
```

还有我的 HTML

```
 <button id="button">button</button> 
```

监听器永远不会添加到按钮上，第一个 showalert(); 没有被解雇。

我可能在这里很愚蠢，但我不明白为什么这不起作用。任何帮助将不胜感激！

JSfiddle：http: [//jsfiddle.net/bunker1/fcrwt/1/](http://jsfiddle.net/bunker1/fcrwt/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T13:35:42.617

发现错误，我确实很愚蠢。

在将 JSfiddle 置于不换行并从第二个 arg 中删除 () 之后，该代码起作用。

正确的代码：

```
 document.addEventListener('DOMContentLoaded', function () {
         document.querySelector('button').addEventListener('click', showalert, false);
    }, false);

    function showalert() {
        alert("you just pressed the button");
    } 
```

# python - 子进程中的`shell = True`中的`shell`是否意味着`bash`？

> ID：15449428
> 
> 赞同：14
> 
> 时间：2013-03-16T12:45:39.943
> 
> 标签：python, shell, subprocess

我想知道是否`subprocess.call("if [ ! -d '{output}' ]; then mkdir -p {output}; fi",shell=True)`会被不同的服务器解释`sh`或`zsh`代替？`bash`

有人对此有想法吗？

我应该怎么做才能确保它被解释`bash`？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-16T12:49:25.360

[http://docs.python.org/2/library/subprocess.html](http://docs.python.org/2/library/subprocess.html)

> ```
> On Unix with shell=True, the shell defaults to /bin/sh 
> ```

请注意，/bin/sh 通常与不同的符号链接，例如在 ubuntu 上：

```
$ ls -la /bin/sh
lrwxrwxrwx 1 root root 4 Mar 29  2012 /bin/sh -> dash 
```

您可以使用`executable`参数替换默认值：

> ... 如果 shell=True，在 Unix 上，可执行参数指定默认 /bin/sh 的替换 shell。

```
subprocess.call("if [ ! -d '{output}' ]; then mkdir -p {output}; fi",
                shell=True,
                executable="/bin/bash") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T12:50:30.607

要指定外壳程序，[请使用可执行参数](http://docs.python.org/2/library/subprocess.html#subprocess.Popen)和`shell=True`：

> 如果 shell=True，在 Unix 上可执行参数指定默认 /bin/sh 的替换 shell。

```
In [26]: subprocess.call("if [ ! -d '{output}' ]; then mkdir -p {output}; fi", shell=True, executable='/bin/bash')
Out[26]: 0 
```

* * *

显然，使用 executable 参数更简洁，但也可以从 sh 调用 bash：

```
In [27]: subprocess.call('''bash -c "if [ ! -d '{output}' ]; then mkdir -p {output}; fi"''', shell=True)
Out[27]: 0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-16T12:49:47.267

您可以显式调用您选择的 shell，但对于您发布的示例代码，这不是最好的方法。相反，只需直接用 Python 编写代码。请参见此处：[Python 中的 mkdir -p 功能](https://stackoverflow.com/questions/600268/mkdir-p-functionality-in-python)

# jquery - 如何选择所有表格行

> ID：15449431
> 
> 赞同：0
> 
> 时间：2013-03-16T12:46:18.803
> 
> 标签：jquery

我有一个包含 700 多行的表，其数据显示在网格和不同的页面中，因此每个页面包含 20 行。我需要在第一页中有一个按钮，以便在单击所有 700 行时选择。每行都有一个复选框，我希望他们在用户单击按钮时检查所有内容。为了处理它，我在页面中放置了一个按钮，以便当用户单击它时检查所有行。

```
$("#selectallboxes").click ( function () {
         $('#userTable input[type=checkbox]').attr('checked', 'checked');
    }) 
```

HTML 代码：

```
<input type='button' value='select all rows' id='selectallboxes' name='selectallboxes' /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:48:08.287

尝试

```
$('#userTable input[type=checkbox]').attr('checked', true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:48:21.777

尝试这个：

```
$("#selectallboxes").click ( function () {
         $('#userTable input[type=checkbox]').attr('checked', true);
    }) 
```

**编辑**

如果你想检查所有页面然后

1.  您将创建一个 cookie，并在单击按钮时将其设置为 true，否则设置为 false。

2.  然后检查 cookie 是真还是假，然后使用 jQuery 检查所有复选框。

这样你就可以做到了..！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T13:04:11.000

只需将一个类应用于所有复选框

```
$('.className').attr('checked','true') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T12:58:31.440

如果您使用的 jQuery 高于 1.6+，那么您需要使用[.prop()](http://api.jquery.com/prop/)

jQuery 区分属性和属性。

1.  .attr() 获取属性，
2.  .prop() 获取您的属性。

如果您使用 .attr() ，无论复选框是否被选中，它都会返回 true，因为它只是告诉您存在选中的属性。所以`checked="false"`如果你使用 .attr() 实际上会返回 true。如果你使用 .prop() 它将返回 false。.attr() 如果您根本没有检查 attr，它将起作用，但它只会在您第一次使用它时起作用！对 .attr("checked") 的所有后续调用都将显示为真。

```
$('input[type=checkbox]').prop('checked', true); 
```

# php - 如何在codeIgniter中设置/和/admin路径创建2个应用程序（front，admin）

> ID：15449432
> 
> 赞同：1
> 
> 时间：2013-03-16T12:46:19.003
> 
> 标签：php, .htaccess, codeigniter

如何在codeIgniter中设置/和/admin路径创建2个应用程序（front，admin）

我的意思是如何在 .htaccess 中编写它，以便从 2 个应用程序的两个路径中工作

```
RewriteEngine on
RewriteBase /
RewriteCond $1 !^(index\.php|uploads|robots\.txt|favicon\.ico)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:12:08.913

是的，我同意 Derfder 的观点。我的 CI 应用程序有前端和后端，没有与之相关的 htaccess 修改。

我只是使用控制器文件夹中的 admin.php 来保存所有与管理相关的任务的页面。我确保通过在方法或构造函数中检查他们是否是管理员来确保这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:55:10.333

如果您不必出于某些奇怪的原因，请不要为此使用 htaccess。

只需在 routes.php 中为 admin创建**额外的路由**，或者如果您使用 HMVC，则创建一个管理控制器**admin.php**或一个名为**admin的模块。**

顺便提一句。你真的有两个不同的应用程序文件夹用于管理员和前端吗？

从一个应用程序访问另一个应用程序的内容必须非常复杂（我的意思是很多额外的代码），还是？

# javascript - 在缩略图悬停时显示更大的图像

> ID：15449437
> 
> 赞同：5
> 
> 时间：2013-03-16T12:46:34.007
> 
> 标签：javascript, html, css

对于图像列表，我有平方缩略图`http://example.com/img1_thumb.jpg` 和原始大小（任何比例）的 url `http://example.com/img1.jpg`。我在网格中显示缩略图，当用户将鼠标放在网格中的图像上时，我想显示原始缩略图。也许使用浮动元素，目标是用户可以更详细地查看图像并查看缩略图中裁剪的部分。

我该怎么做？我是 HTML/css/Javascript 的初学者

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-16T12:49:42.783

有很多 jQuery 插件可以做到这一点。由于您是初学者，我建议您从那里开始。[这是一篇](http://cssglobe.com/easiest-tooltip-and-image-preview-using-jquery/)带有一些不同选项的文章。[这是您正在寻找的示例](http://cssglobe.com/lab/tooltip/02/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T12:51:45.250

你可以在没有缩略图的情况下工作..

**缩略图**

```
<img src="http://example.com/img1.jpg" class="compress"/> 
```

在上面的悬停上显示这个

```
$(".compress").hover(function(){
  $(".image").show();

}); 
```

**全图**

```
 <img src="http://example.com/img1.jpg" class="image"/> 
```

**css**

```
 .compress{
  width:20%;
/*aspect ratio will be maintained*/

}

.image{
display:none;
position:absolute;

 } 
```

它不完整，但我认为它可能会有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T12:50:25.713

使用 JQuery：

```
$(function() {
      $('#thumbnails img').click(function() {
            $('#thumbnails').hide();
            var src = $(this).attr('src').replace('.png', 'Large.png');
            $('#largeImage').attr('src', src).show();
      });
      $('#largeImage').hide().click(function() {
            $(this).hide();
            $('#thumbnails').show();
      });
});

<div id="thumbnails">
<img src="thumbnail1.png">...
</div>
<img id="largeImage" src=""> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T12:51:37.653

基本上你可以创建一个`<div class="some_class"><img src="http://example.com/img1.jpg"></div>`集合`display:none`，然后将一个事件绑定到`thumb div`这样的：

```
$(".thumb_class").hover(function(){
   $(".some_class").show()
},
function(){
   $(".some_class").hide()
} 
```

当然，您可以个性化每个`div`. 第二个`function`让你`hide`在鼠标离开拇指时进入 div。希望我尽可能清楚。

# android - 如何在Android中实现自动同步？

> ID：15449440
> 
> 赞同：2
> 
> 时间：2013-03-16T12:47:14.830
> 
> 标签：android

我的应用程序现在可以将一些数据同步到远程服务器，目前，当我的用户单击按钮时，它会显式发生，应用程序会显示 a`ProgressDialog`并在后台使用`ASyncTask`.

现在我的客户要求在任何数据更改时都应该进行同步。我不能像现在这样在“前台”执行此操作，因为移动数据连接通常需要 5-10 秒，应用程序必须从 sqlite 数据库收集数据，将其序列化为 JSON 并发送到远程 Web 服务。

我是否必须实现一个`Service`将从应用程序接收到该同步的消息的消息？或者我可以把我搬到`ASyncTask`课堂`Application`上然后从那里做手术吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:40:13.060

服务将是做到这一点的最佳方式。

# search - 如何将搜索 SOLR 数据的查询转换为小写？

> ID：15449442
> 
> 赞同：1
> 
> 时间：2013-03-16T12:47:20.523
> 
> 标签：search, solr, lowercase, analyzer

我的 scheme.xlm 看起来像这样：

```
<fieldType name="text" class="solr.TextField" positionIncrementGap="100">
        <analyzer type="index">
            <tokenizer class="solr.WhitespaceTokenizerFactory"/>
            <filter class="solr.LowerCaseFilterFactory"/>
        </analyzer>      
        <analyzer type="query">
            <tokenizer class="solr.WhitespaceTokenizerFactory"/>
            <filter class="solr.LowerCaseFilterFactory"/>
        </analyzer>      
</fieldType>

<!-- The searched field -->
<field name="product_name" type="text" indexed="true" stored="true"/> 
```

这应该以小写形式索引该字段，并将搜索查询转换为小写。

我要查找的数据是：“Nokia Lumia 610”

当我搜索“诺基亚”时，我得到了预期的结果，但仅搜索“诺基亚”（大写 N）时没有任何结果。

上面的“分析器”仅在索引上执行小写，而不在搜索查询上执行。

这是一个错误吗？如何强制 SOLR 索引和搜索查询为小写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T04:37:18.863

搜索查询的转换还取决于查询的类型和您使用的分析器。例如，如果您将请求发送到选择分析器，上述内容不会将您的搜索查询转换为小写。如果您发送请求：-

```
http://url/solr/select?q=Nokia 
```

那么上述内容将不会转换为小写，因为您的字段类型定义中不存在选择分析器。您必须按如下方式修改您的代码：-

```
 <fieldType name="text" class="solr.TextField" positionIncrementGap="100">
            <analyzer type="index">
                <tokenizer class="solr.WhitespaceTokenizerFactory"/>
                <filter class="solr.LowerCaseFilterFactory"/>
            </analyzer>      
            <analyzer type="query">
                <tokenizer class="solr.WhitespaceTokenizerFactory"/>
                <filter class="solr.LowerCaseFilterFactory"/>
            </analyzer>
            <analyzer type="select">
                <tokenizer class="solr.WhitespaceTokenizerFactory"/>
                <filter class="solr.LowerCaseFilterFactory"/>
            </analyzer>
    </fieldType> 
```

如果上述方法不起作用，请发布您发送的请求以及将 debugQuery=true 添加到请求的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-20T13:10:46.423

随着

```
<fieldType name="text" class="solr.TextField" positionIncrementGap="100">
            <analyzer type="index">
                <tokenizer class="solr.WhitespaceTokenizerFactory"/>
                <filter class="solr.LowerCaseFilterFactory"/>
            </analyzer>      
            <analyzer type="query">
                <tokenizer class="solr.WhitespaceTokenizerFactory"/>
                <filter class="solr.LowerCaseFilterFactory"/>
            </analyzer>
            <analyzer type="select">
                <tokenizer class="solr.WhitespaceTokenizerFactory"/>
                <filter class="solr.LowerCaseFilterFactory"/>
            </analyzer>
    </fieldType> 
```

在 schema.xml 中。

在 head.vm 中更改**return $("#q").val();** 返回 **$("#q").val().toLowerCase();** 用于 InCaseSensitive 自动完成功能。这样您就可以在使用大写字母搜索时获得结果。

# javascript - javascript：捕获元素名称和元素的字符串值的语法

> ID：15449444
> 
> 赞同：0
> 
> 时间：2013-03-16T12:47:31.507
> 
> 标签：javascript, syntax

我对如何在元素的 id 的字符串值和元素本身之间来回切换感到困惑。我认为问题涉及语法，但无法正确处理。我想在javascript中传递一个参数（在本例中为“title”并将其用作字符串和如下元素以使标题消失并出现编辑标题框。

html

```
//note this html is actually written to page by another javascript function
<span id="title">Title</span><span id="titleedit"></span><img src="edit.gif" onclick="editTitle('title');"> 
```

如果我在标题周围省略撇号，我可以让它作为以下元素工作，但它不能作为字符串工作。

javascript

```
function editTitle(field) {
//using field as string only works if parameter in above is in apostrophes
var fieldedit = field+"edit"
var editstring = '<input type="text" name="title" onclick="saveTitle();">save';
document.getElementById('fieldedit').innerHTML = "editstring";
//using as element only works if above has no apostrophes
field.style.display="none";
} 
```

感谢您提出如何完成这两项任务的建议...使标题消失，并且 titleedit 出现仅通过单词标题。（我想将标题作为参数传递的原因是因为有一大堆其他字段要编辑，我想每个都作为一个参数传递。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:52:58.950

当您说 时`document.getElementById('fieldedit')`，您是在说“以“fieldedit”为 id 的元素”。你想要的是“以变量 fieldedit 的内容为 id 的元素。

试一试`document.getElementById(fieldedit).innerHTML = editstring;`。

**更新**：

这条线也有问题：

```
var editstring = "<input type="text" name="title" onclick="saveTitle();">save"; 
```

尝试转义引号，或混合使用单引号和双引号。例如：

```
var editstring = '<input type="text" name="title" onclick="saveTitle();">save'; 
```

**更新 2**：

要获得对元素的引用`id="title"`：

```
var field = document.getElementById('title'); 
```

现在该*字段*引用该元素，您可以使用：

```
field.style.display = 'none'; 
```

您也可以在一行中完成所有操作：

```
document.getElementById('title').style.display = 'none'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T14:31:55.100

`document.getElementById('fieldedit').innerHTML = "editstring";`

那不应该是

`document.getElementById(fieldedit).innerHTML = editstring;`?

`editstring`如果我理解您的问题，您想获得 ID 为“titleedit”的跨度并插入存储在 中的输入元素。

# android - 三星 Note 1 正在从 Xhdpi 文件夹加载资源

> ID：15449455
> 
> 赞同：0
> 
> 时间：2013-03-16T12:48:47.777
> 
> 标签：android, resolution, samsung-mobile, android-drawable

我遇到了这个问题，我的 eclipse 项目中的 HDPI 和 XHDPI 文件夹都有不同的图像分辨率，不同文件夹中的两个图像完全相同，但它们的大小不同。

所以我在有显示屏的三星 Galaxy Note 1 上使用了我的应用程序`800 x 1280 pixels, 5.3 inches (~285 ppi pixel density)`，但它正在从 XHDPI 文件夹中加载可绘制对象。

我已经通过修改 HDPI 文件夹中的一个图像并将其保留在 XHDPI 文件夹中进行了测试，结果是注释 1 是从 XHDPI 文件夹加载的，我在这里遗漏了什么，它假设从 HDPI 文件夹加载图像，因为它的屏幕密度小于 320 DPI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:53:59.400

> 我在这里遗漏了什么吗，它假设从 HDPI 文件夹加载图像，因为它的屏幕密度小于 320 DPI

设备制造商选择使用哪个密度桶。由于 ~285 比 240 更接近 320，所以三星选择`-xhdpi`. [其他人报告说它确实是一种`-xhdpi`设备](http://blog.blundell-apps.com/list-of-android-devices-with-pixel-density-buckets/)。

如果您发现`-xhdpi`资源导致某些地方的图像略微过大，您可能需要在这些地方进行控制（例如，将`ImageView`大小设置为您想要的大小，并设置`android:scaleType`为您希望调整图像的方式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:56:29.727

您可以检查您的设备设置的密度

```
Log.v(TAG, "density=" + getResources().getDisplayMetrics().densityDpi); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T14:29:47.850

在 Android 开发者网站上，它说，

“用于高密度 (hdpi) 屏幕 (~240dpi) 的 hdpi 资源。用于超高密度 (xhdpi) 屏幕 (~320dpi) 的 xhdpi 资源。”

任何密度**高于 240dpi**的设备都应从 xhdpi 文件夹加载布局和图像。

因此，您在具有 285dpi 的 Galaxy Note 上的应用会从 xhdpi 文件夹加载图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T14:43:30.047

> 它假设从 HDPI 文件夹加载图像，因为它的屏幕密度小于 320 DPI。

为什么？

**HDPI**为**240** ppi

**XHDPI**为**320** ppi

注 1 的 285 更接近**XHDPI** (|285-320|=35) 而不是**HDPI** (|285-240|=45)

# java - 访问者模式还是多态性？

> ID：15449461
> 
> 赞同：1
> 
> 时间：2013-03-16T12:49:20.140
> 
> 标签：java, oop, design-patterns, visitor-pattern

我的项目中有一个多态结构，并考虑将其重写以使用`Visitor Pattern`.

基本结构是：我有一些绘图对象`(Rectangle, Ellipse, Line`，还有更多）当然有一些共同的行为。行为由接口定义`Drawable`。到目前为止，拖动的行为应该始终相同，但选择的绘制它们应该不同。

因此，我介绍了`abstract Figure`已经实现的类`drag()`，但将实现委托`drawSelected()`给扩展类。

当然，稍后将使用我需要的其他功能扩展该接口，并且还会出现 Figures 的其他实现。

现在我的问题是：您宁愿坚持这种设计，还是切换到`Visitor`. 如果是这样，为什么？特别是我不确定我目前的方法是否适合在对象本身内部绘制选择的逻辑/算法。

```
interface Drawable {
    void drag();
    void drawSelected();
}

abstract class Figure implements Drawable {
    protected int x, y, w, h;

    @Override
    void drag() {
        //implementation always the same for different figures
    }
}

class Rectangle extends Figure {
    @Override
    drawSelected() {
        //draw a dashed rectangle around this object
    }
}

class Ellipse extends Figure {
    @Override
    drawSelected() {
        //draw a dashed ellipse around this object
    }
}

class Line extends Figure {
    @Override
    drawSelected() {
        //draw the line itself dashed
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T14:00:02.443

您遇到的问题需要使用不太可能随时间变化的对象结构；可能会添加新的结构（图形），但给定的对象结构（图形）不太可能改变。尽管结构可能不会改变，但您可以在结构上添加越来越多的操作，并且这些操作可能会或可能不会在结构中通用。我认为这些东西为使用该`Visitor`模式提供了一个用例。

为了进一步详细说明，请考虑添加一个新操作的场景，其中您需要一个实现用于一组图形，另一个实现用于另一组，依此类推。在当前设计中，您可能只能在抽象类中拥有一个通用实现（除非您使用`instanceOf`，但这又不是一种好的做法），并且必须在每个其他类中覆盖该实现。在使用`Visitor`模式的情况下，您将始终调用该`visit`方法（将在运行时绑定），并且您可以在其中决定调用哪个实现。

在当前的设计中，您还可能会遇到一种情况，即在不同的类中有共同的逻辑。但是在`Visitor`模式中，您可以在访问者类中维护各种实现并在访问方法中重用它们，因此没有代码重复。

`Visitor`如果需要，模式还可以让您轻松地将给定图形从一种实现切换到另一种实现。

尽管在添加新类时，您需要向访问者界面添加新的实现，但这不会影响您现有的任何类（图形）或其实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T13:10:55.010

查看`Visitor`来自 GoF 的模式的用法似乎在您的情况下使用该模式是不合适的。

用法

> *   一个对象结构包含许多具有不同接口的对象类，并且您希望对这些对象执行依赖于它们的具体类的操作。
> *   需要对对象结构中的对象执行许多不同且不相关的操作，并且您希望避免这些操作“污染”它们的类。访问者允许您通过在一个类中定义相关操作来将它们保持在一起。当对象结构被许多应用程序共享时，使用访问者将操作放在那些需要它们的应用程序中。
> *   定义对象结构的类很少更改，但您经常希望在该结构上定义新操作。更改对象结构类需要重新定义所有访问者的接口，这可能代价高昂。如果对象结构类经常更改，那么最好在这些类中定义操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T13:33:26.980

> [...] 并且还会出现 Figure 的其他实现

我认为仅出于这个原因，访问者模式不适合您的场景。每当您向层次结构添加新类时，您都必须更改访问者界面及其所有实现。当您的层次结构稳定时，访问者更合适，它允许您轻松添加额外的行为，只需创建新的访问者实现即可。

看看[非循环访问者](http://codecrafter.blogspot.ca/2012/12/the-acyclic-visitor-pattern.html)的替代方案。但是仔细考虑使用这些模式，它们会使设计变得比应有的复杂。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T13:42:50.280

我认为这个问题有点过于宽泛了。我们应该更多地了解您的应用程序架构、功能和要求。我只想为nikpon 的观点添加另一种观点。

考虑最后一点：

> 定义对象结构的类很少更改，但您经常希望在该结构上定义新操作。更改对象结构类需要重新定义所有访问者的接口，这可能代价高昂。如果对象结构类经常更改，那么最好在这些类中定义操作。

因此，答案取决于您的数字数据实际上是什么以及它们必须执行哪些操作。我会给你一个例子，访客模式可能会更好：

*   图形只是代表实际图形的数据集合（例如，圆：半径和中心。方形边和中心）
*   您必须在使用不同 GUI/渲染库的不同系统/架构中绘制图形

在这种情况下，有两个主要后果：

*   一个图形类可能永远不会改变，或者它的改变可以隐藏在一个永远不会改变的界面后面。（例如，圆始终由中心和半径定义。）
*   您无法使用单一方法来绘制此对象，因为它会根据使用的图形库而相应更改。如果您将绘图逻辑放入其中`drawSelected()`，那么对于您使用的每个不同的图形库，您需要修改`drawSelected`每个类的实现（或使用合适的模式来允许）。

在这种情况下，访客的好处可能是：

*   您可以跨不同平台和图形库重用 Figure 类，无需任何更改
*   您可以将绘图操作压缩在每个 [平台|库] 具体的访问者类上。（例如 DrawObjectsOnWindowsVisitor 和 DrawObjectsOnAndroidVisitor）。如果您需要支持不同的平台/库，您可以简单地添加一个访问者，使图形类保持不变。

顺便说一句，情况可能并非如此，最终可以使用其他模式来实现这些目标。

# php - 3个具有相同名称和相同数值的复选框

> ID：15449463
> 
> 赞同：0
> 
> 时间：2013-03-16T12:49:30.953
> 
> 标签：php, checkbox

鉴于此代码：

```
<input type="checkbox" id="Coke" name="Price" value="70" />
<input type="checkbox" id="Fanta" name="Price" value="70" />
<input type="checkbox" id="Sprite" name="Price" value="70" /> 
```

我想知道，如果我的用户选择 Fanta 复选框，我想要我的 php 变量`$type="Fanta"`，但我需要表单复选框 VALUES 来保持 NUMERIC 以进行总价计算。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T12:57:41.410

目前尚不清楚您到底在问什么，但我相信您基本上需要 2 个字段，一个定义价格，一个定义所选类型。

在这种情况下，您最好的选择是将价格存储在服务器端（这样人们也无法修改它们，这很好！）。如果这样做，您的复选框将如下所示：

```
<input type="checkbox" id="Coke" name="type[]" value="Coke" />
<input type="checkbox" id="Fanta" name="type[]" value="Fanta" />
<input type="checkbox" id="Sprite" name="type[]" value="Sprite" /> 
```

您的后端代码如下所示：

```
 $prices = array(
     'Coke' => 70,
     'Fanta' => 70,
     'Sprite' => 70
 );

 $types = $_POST['type'];
 $total = 0;

 foreach($types as $key => $type) {
     if (!isset($prices[$type]))
         continue;

     $total += $prices[$type];
 }

 // Use $total as your total price for whatever calculation
 echo $total; 
```

* * *

根据您的评论，如果您仍然希望这些价格在客户端进行计算，您可以使用[`json_encode`](http://php.net/json_encode)将其输出到脚本标签并直接使用价格。它基本上是将服务器端价格数组转换为客户端价格数组。

```
<script type="text/javascript">
    var prices = <?= json_encode($prices) ?>;

    // Now you can use prices['Coke'] etc, based off the value of the selected checkbox.
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:53:11.233

> 我想知道，如果我的用户选择 Fanta 复选框，

然后命名你的字段`fanta`：

```
<input type="checkbox" id="Fanta" name="fanta" value="70" /> 
```

完成后，您可以使用 the[`$_POST`或`$_GET`superglobal](http://php.net/manual/en/language.variables.superglobals.php)获取值（取决于您的表单方法）：

```
if (isset($_POST['fanta'])) {
    echo $_POST['fanta'];
} 
```

**但是，您永远不应该依赖来自客户端的价格！**

> 但我需要表单复选框 VALUES 保持 NUMERIC 以计算总价。

这不会发生，因为在 HTTP 中值是作为字符串发送的。幸运的是 PHP 会自动为您处理[类型](http://php.net/manual/en/language.types.type-juggling.php)，因此您仍然可以使用字符串值进行计算。

[http://codepad.viper-7.com/GOhHdz](http://codepad.viper-7.com/GOhHdz)

在某些情况下，您希望明确地将其设为整数值。在这种情况下，您可以使用[类型转换](http://php.net/manual/en/language.types.type-juggling.php#language.types.typecasting)：

```
var_dump((int) '18'); 
```

[http://codepad.viper-7.com/kJlGoS](http://codepad.viper-7.com/kJlGoS)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T12:54:19.340

当您发布表格时，无论如何您将获得 70 作为价值。

```
echo $_POST['Price']; 
```

给 70

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T13:08:23.533

```
<input type="checkbox" value="Coke" name="Price" rel=70 />
<input type="checkbox" value="Fanta" name="Price" rel="70" />
<input type="checkbox" value="Sprite" name="Price" rel="70" /> 
```

使用 javascript 获取总价的选定复选框的 rel 属性值

# macos - 在 mac 10.6.8 上安装 scipy

> ID：15449467
> 
> 赞同：0
> 
> 时间：2013-03-16T12:49:45.027
> 
> 标签：macos, scipy, osx-snow-leopard

我尝试在我的 mac 10.6.8 上安装[scipy](http://www.scipy.org)，但总是遇到问题。我已经安装了 ipython ( `sudo /usr/bin/easy_install-2.6 ipython`) 和 numpy ( `python setup.py build/install`)，但是当我以同样的方式安装 scipy 时，我总是收到以下错误消息：

```
RuntimeError: Running cythonize failed! 
```

有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:19:28.330

您是否尝试过使用为 OSX 提供的[二进制文件？](http://sourceforge.net/projects/scipy/files/)这应该确保一切正常。

**编辑**

我发现控制包依赖关系的最简单方法是尽可能多地使用[MacPorts](http://www.macports.org)，因为与 Homebrew 不同，这些包旨在协同工作，并且当您尝试安装某些东西时（几乎总是）自动安装依赖关系。

因此，首先，使用Snow Leopard[的安装程序](https://distfiles.macports.org/MacPorts/MacPorts-2.1.3-10.6-SnowLeopard.pkg)安装 MacPorts 。选择将端口安装在唯一目录（如）中的选项`/opt/local`，这样它们就不会与操作系统所依赖的任何内置版本冲突。此外，请确保将`/opt/local/bin`和`/opt/local/sbin`添加到您`$PATH` **之前**的系统目录中，例如 ,`/usr/bin`等，以便在从命令提示符运行时获得所需的版本。你的最后一行应该有类似的东西。`/bin``/sbin``python``~/.profile``export PATH="/opt/local/bin:/opt/local/sbin:$PATH`

安装 MacPorts 后，您可能想重新启动只是为了好玩，以确保您的所有环境变量都已正确设置。启动 Terminal.app （或您最喜欢的替代品）并输入，如果一切正常`which port`，它应该返回。`/opt/local/bin/port`接下来，运行`sudo port selfupdate`只是为了确保一切都正确同步。完成后，我们可以安装 python 和一些模块。`port`允许您传递要安装的端口列表，因此类似这样的命令`sudo port install foo bar baz`将以正确的顺序安装最新版本的`foo`、`bar`和`baz`端口，以及它们可能需要的任何依赖项。有些端口有二进制分发，有些是根据需要编译的，所以第一次运行时可能会有**很多**要安装的依赖项。MacPorts 的一个不错的功能是您可以同时安装某些软件包的多个版本，如果需要，您可以在它们之间切换。此外，如果`port search`提供的结果过多，在线[搜索引擎](http://www.macports.org/ports.php)可以帮助您找到所需的内容。

要获得一个体面的基于 IPython 的 Python 2 开发环境，您需要以下内容：

*   `python27`
*   `py27-ipython`
*   `py27-numpy`
*   `py27-scipy`
*   `py27-matplotlib`（如果你喜欢画漂亮的图片，但主要是为了你能得到`pylab`）
*   `py27-pandas`（`DataFrame`s是你的朋友！）
*   也许`py27-pyqt4`如果你通过`qtconsole`选项运行 ipython

如果没有 MacPort 版本，我也会安装`py-pip`，因此您可以自行安装模块。`py27-distribute`

最后，如果你是一个有远见的人并且想要使用`numpy`et al. 在 Python 3 上，MacPorts 为您服务！上述所有软件包都有基于 - 和 - 的版本，除了，`py32`这只是现在。但是，我能够很好地安装它，尽管我的机器上有一大堆其他开发工具，而且我运行的是 10.8.2，所以 YMMV。`py33``scipy``py32``pip`

祝你好运！

# c++ - 从 char* 创建 UTF-16 字符串

> ID：15449469
> 
> 赞同：1
> 
> 时间：2013-03-16T12:49:52.603
> 
> 标签：c++, character-encoding, char, utf-16

所以我有标准的 C 字符串：

```
char* name = "Jakub"; 
```

我想将其转换为 UTF-16。我发现，UTF-16 的长度会是原来的**两倍**——一个字符需要**两个**字符。
所以我创建了另一个字符串：

```
char name_utf_16[10];  //"Jakub" is 5 characters 
```

现在，我相信对于 ASCII 字符，我只会使用较低的字节，所以对于所有这些字符，它都会像`74 00`for`J`等等。有了这个信念，我可以编写这样的代码：

```
void charToUtf16(char* input, char* output, int length) {
    /*Todo: how to check if output is long enough?*/
    for(int i=0; i<length; i+=2)  //Step over 2 bytes
    {
        //Lets use little-endian - smallest bytes first
        output[i] = input[i];
        output[i+1] = 0;  //We will never have any data for this field
    }
} 
```

但是，通过这个过程，我以`"Jkb"`. 我不知道如何正确测试 - 我刚刚将字符串发送到 Minecraft Bukkit 服务器。这就是它在断开连接时所说的：

> 13:34:19 [INFO] 断开**jkb** ?? [/127.0.0.1:53215]：过时的服务器！

**注意：**我知道 Minecraft 使用 big-endian。上面的代码只是一个例子，事实上，我已经在课堂上实现了我的转换。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-04T09:08:07.863

在我回答你的问题之前，请考虑一下：

这个编程领域充满了人为陷阱。理解 ASCII、UTF7/8 和 ANSI/'MultiByte Character Strings (MBCS)' 之间的区别很有意义，所有这些对于讲英语的程序员来说看起来和感觉都是一样的，但如果它们是，则需要非常不同的处理介绍给欧洲或亚洲用户。

ASCII：字符在 32-127 范围内。只有一个字节。线索就在名字里，它们对美国人来说很好，但不适合在世界其他地方使用。

ANSI/MBCS：这就是“代码页”的原因。字符 32-127 与 ASCII 相同，但可以有 128-255 范围内的字符以及其他字符，并且 128-255 范围内的某些字符可以用作标志来标记字符是否继续到第二个，第三个甚至第四个字节。要正确处理字符串，您需要字符串字节和正确的代码页。如果您尝试使用错误的代码页处理字符串，您将没有正确的字符，并且会误解一个字符是一字节、二字节还是四字节字符。

UTF7/8：这些是 21 位 unicode 字符点的 8 位宽格式。在 UTF-7 和 UTF-8 中，unicode 字符的长度可以在 1 到 4 个字节之间。UTF 编码相对于 ANSI/MBCS 的优势在于没有由代码页引起的歧义。每个脚本中的每个字形都有一个唯一的 unicode 代码点，这意味着不可能通过在具有不同区域设置的不同计算机上解释数据来破坏字符集。

**所以要开始回答你的问题：**

1.  虽然您假设您的 char* 只会指向一个 ASCII 字符串，但这是一个非常危险的选择，用户控制的是输入的数据，而不是程序员。默认情况下，Windows 程序会将其存储为 MBCS。

2.  第二个假设是 UTF-16 编码将是 8 位编码大小的两倍。这通常不是一个安全的假设。取决于源编码，UTF-16 编码可能是两倍大小，可能小于两倍大小，在一个极端的例子中，长度实际上可能更短。

那么，什么是安全的解决方案？

安全的选择是在内部将您的应用程序实现为 unicode。在 Windows 上，这是一个编译器选项，然后意味着您的 Windows 控件都使用 wchar_t* 字符串作为其数据类型。在 linux 上，我不太确定您是否始终可以使用统一图形和操作系统库。您还必须使用 wcslen() 函数来获取字符串的长度等。当您与外界交互时，请准确使用所使用的字符编码。

**要回答您的问题，然后将问题更改为，当我收到非 UTF-16 数据时该怎么办？**

首先，非常清楚您对其格式所做的假设是什么？其次，接受有时转换为 UTF-16 可能会失败的事实。

如果你对源格式很清楚，那么你可以选择合适的win32或者stl转换器来转换格式，然后你应该在使用结果之前寻找转换失败的证据。例如 Windows 上的 mbstowcs 或 MultiByteToWideChar()。但是，安全地使用这两种方法意味着您需要了解上述所有答案。

所有其他选项都会带来风险。使用 mbcs 字符串，您将使用一个代码页输入并使用不同的代码页处理数据字符串。假设 ASCII 数据，当您遇到非 ascii 字符时，您的代码将中断，您将“责备”用户的缺点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T13:39:36.477

当存在为此的现有 C/C++ 函数时，为什么要创建自己的 Unicode 转换功能，例如`mbstowcs()`包含在`<cstdlib>`.

如果您仍想制作自己的东西，请查看 Unicode Consortium 的开源代码，可在此处找到：

[在 Windows 和 Linux 下，在 C 中将 UTF-16 转换为 UTF-8](https://stackoverflow.com/questions/2867123/convert-utf-16-to-utf-8-under-windows-and-linux-in-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T13:26:03.823

```
output[i] = input[i]; 
```

这将分配输入的每个其他字节，因为您递增`i`2。所以难怪您获得`"Jkb"`. 你可能想写：

```
output[i] = input[i / 2]; 
```

# jquery - 将日期转换为 jQuery Flot 时间

> ID：15449472
> 
> 赞同：3
> 
> 时间：2013-03-16T12:50:13.053
> 
> 标签：jquery, datetime, flot

我从我的 WebAPI 返回了 json。

```
[{"Total":7,"ActivityType":1,"TimeStamp":"2013-03-16T00:16:00.387","Id":1,"State":"Alabama"},{"Total":4,"ActivityType":1,"TimeStamp":"2013-03-16T00:31:00.41","Id":1,"State":"Alabama"}] 
```

Flot 需要这样的数据。

var d1 = [[1262818800,100],[1262732400,100],[1262646000,100]];

我需要将时间戳转换为记号或 javascript 中的任何内容，以便我可以用来绘制我的图表。如果有人可以帮助我，我将不胜感激。一个 jsFiddle 示例会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:52:22.537

尝试这个：

```
+new Date('2013-03-16T00:16:00.387') / 1000 // 1363392960.387 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:00:55.157

```
var arr = [{
    "Total": 7,
    "ActivityType": 1,
    "TimeStamp": "2013-03-16T00:16:00.387",
    "Id": 1,
    "State": "Alabama"
}, {
    "Total": 4,
    "ActivityType": 1,
    "TimeStamp": "2013-03-16T00:31:00.41",
    "Id": 1,
    "State": "Alabama"
}];

var d1 = [];
for (var i = 0, len = arr.length; i < len; i++ ) {
    var t = [new Date(arr[i].TimeStamp).getTime() / 1000,100]
    d1.push(t);
} 
```

# c# - 替换类成员的 XML 序列化

> ID：15449473
> 
> 赞同：1
> 
> 时间：2013-03-16T12:50:21.970
> 
> 标签：c#, xml, winforms, serialization

在我需要序列化的类（相机）中，我有一个成员没有太多序列化手段，我无法修改它的类。但是整个类中只有 2-3 个参数可以序列化，然后基于此反序列化。

```
XmlSerializer SerializerObj = new XmlSerializer(typeof(Camera));
TextWriter WriteFileStream = new StreamWriter(@"C:\test.xml");
SerializerObj.Serialize(WriteFileStream, cc);
WriteFileStream.Close(); 
```

我如何以及在哪里放置自定义序列化代码，从对象中获取这 2-3 个参数并提供给序列化程序，然后在反序列化期间使用这 2-3 个参数再次创建该对象。

更新。示例代码：

```
[Serializable()]
public class Camera
{
    public string name;
    public int index;
    public double distance;
    public List<string> CameraList { get; set; }

    [XmlIgnore()]
    public GMarkerGoogle marker;

    public Camera()
    {
    }

} 
```

`marker`是没有序列化手段的成员。但是有了`marker.position`，`marker.rotation`我可以重新创建该对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:28:01.107

如果您不能或不想对您的 GMarker 进行 Xml 序列化，请确保您确实序列化了重建它所需的属性（就像您已经建议的那样）。这样你就可以创建一个带有支持字段的属性来懒惰地重新创建 GMarker。

```
[Serializable()]
public class Camera
{
    public string name;
    public int index;
    public double distance;
    public List<string> CameraList { get; set; }

    private GMarkerGoogle _marker;
    [XmlIgnore()]
    public GMarkerGoogle Marker
    {
        set
        {
            _marker = value;
            MarkerPosition = _marker.position;
            MarkerRotation = _marker.rotation;
        }
        get
        {
            if (_marker == null)
            {
                _marker = new GMarkerGoogle(MarkerPosition, MarkerRotation);
            }

            return _marker;
        }
    }

    public double MarkerPosition { get; set; }
    public double MarkerRotation { get; set; }

    public Camera()
    {
    }
} 
```

这有帮助吗？我编了一两件事，因为我不知道标记的 API，但我希望你能从这一点开始画图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:56:23.110

通过在你的类中实现`IXmlSerializable`接口。`Camera`

查看[MSDN](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx)了解更多信息。

或者，您可以使用该`[XmlIgnore]`属性来标记您不想序列化为 XML 的属性。

查看[MSDN](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributes.xmlignore.aspx)了解更多信息:)。

PS：如果您发布一些代码，我可以向您展示一个示例，但您可能不需要我。如果你这样做，请告诉我。

# iphone - 图像裁剪问题

> ID：15449474
> 
> 赞同：1
> 
> 时间：2013-03-16T12:50:25.537
> 
> 标签：iphone, objective-c, ios5, uiimage, crop

我想用以下代码裁剪 UIImage：

```
 - (UIImage*)imageByCropping:(UIImage *)imageToCrop toRect:(CGRect)rect
 {
     CGImageRef imageRef = CGImageCreateWithImageInRect([imageToCrop CGImage], rect);
     // or use the UIImage wherever you like
     UIImage * img =  [UIImage imageWithCGImage:imageRef];
     CGImageRelease(imageRef);
     return img;
 } 
```

此代码在模拟器中运行良好，但在设备上给出异常结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:57:35.263

创建一个 UIImage 类别并尝试添加它。

@implementation UIImage（裁剪）

```
- (UIImage *)crop:(CGRect)cropRect {

    cropRect = CGRectMake(cropRect.origin.x*self.scale, 
                      cropRect.origin.y*self.scale, 
                      cropRect.size.width*self.scale, 
                      cropRect.size.height*self.scale);       

    CGImageRef imageRef = CGImageCreateWithImageInRect([self CGImage], cropRect);
    UIImage *result = [UIImage imageWithCGImage:imageRef 
                                          scale:self.scale 
                                    orientation:self.imageOrientation]; 
    CGImageRelease(imageRef);
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:40:21.080

试试这个：

```
 - (UIImage *)cropImage:(UIImage *)oldImage {
            CGSize imageSize = oldImage.size;
            UIGraphicsBeginImageContextWithOptions(CGSizeMake( imageSize.width,imageSize.height - 150),NO,0.);
            [oldImage drawAtPoint:CGPointMake( 0, -80) blendMode:kCGBlendModeCopy alpha:1.];
            UIImage *croppedImage = UIGraphicsGetImageFromCurrentImageContext();
            UIGraphicsEndImageContext();
            return croppedImage;
    } 
```

# android - 布局设置为 Gone 的 Android ListView 问题

> ID：15449478
> 
> 赞同：0
> 
> 时间：2013-03-16T12:50:39.457
> 
> 标签：android, listview, height

嗨，我有一个 listView，在它下面有一个带有数字的布局（它是一个自定义的“键盘”），隐藏在这个布局下面，另一个布局总是可见的。我的问题是，如果我使用 relativeLayout 并尝试将键盘可见性设置为 GONE，然后再设置为 VISIBLE，则键盘将不可见。就像 listView 不知道新布局是可见的并且它不调整大小一样。下面是代码。任何答案将不胜感激。

```
<ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:scrollbars="none"
        android:divider="#000000"
        android:background="@color/white_to_gray"
        >
</ListView>

<LinearLayout android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:orientation="vertical"
              android:id="@+id/keyboard_menu"
              android:layout_alignParentBottom="true">
    <com.example.Keyboard android:layout_width="fill_parent"
                          android:layout_height="50dp"
                          android:id="@+id/keyboard_layout"
                          android:background="@color/dark_grey"
                          android:visibility="gone"/>

    <include layout="@layout/menu"
             android:id="@+id/menu"
            />

    </LinearLayout>
</LinearLayout> 
```

# php - 如何在 Php 中将其他字段推送到数组中？

> ID：15449480
> 
> 赞同：0
> 
> 时间：2013-03-16T12:50:58.827
> 
> 标签：php, arrays, loops, foreach

您好，我正在寻找使用 php 将附加字段推送到数组中的最佳实践。我已经尝试过 array_push 及其等效的 $array[] = $var; 但这不是我想要的。

我有一个像这样的循环：

```
 foreach($lakesNearby as $lakes){
        $dist = $this->getDistance($lat, $lng, $lakes['latitude'], $lakes['longitude'], $unit);
        $lakes['distance'] = $dist;
        $lakesReturned[] = $lakes;
    } 
```

但我确信有更好的方法将最后两行合并并将其推入 $lakesNearby ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:05:13.873

嗯...，也许是：

```
foreach($lakesNearby as &$lakes){
    $lakes['distance'] = $this->getDistance($lat, $lng, $lakes['latitude'], $lakes['longitude'], $unit);
} 
```

所有数据都将在 $lakesNearby 数组中，您不需要另一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:34:17.437

正如亚历克斯在评论中所说：

只是为了完整起见，请参阅 php.net/manual/de/control-structures.foreach.php ：“为了能够直接修改循环中的数组元素，在 $value 之前加上 &。在这种情况下，值将由参考。

```
<?php
$arr = array(1, 2, 3, 4);
foreach ($arr as &$value) {
    $value = $value * 2;
}
// $arr is now array(2, 4, 6, 8)
unset($value); // break the reference with the last element
?> 
```

# python - 只有长度为 1 的数组可以转换为 Python 标量

> ID：15449482
> 
> 赞同：0
> 
> 时间：2013-03-16T12:51:34.990
> 
> 标签：python, arrays

嘿，我正在尝试为以下问题绘制图：U (x) =U0, if |x| ≥ x0 U (x)=U0*|x|/x0 如果 |x| < x0

和程序：

```
from pylab import*
x_0=5
U_0=200
#U_x=zeros(n,1)
#x=zeros(n,1)
x=arange(-20,20,0.01)
if float(abs(x))>=x_0:
    U_x=U_0
elif float(abs(x))<x_0:
    U_x=U_0*(float(abs(x))/x_0)
fig=figure()
suptitle("a)") 
fig.subplots_adjust(hspace=0.5)
plot(x,U_x)
xlabel('x [m]')
ylabel('U_x [J]')
show() 
```

但我总是犯这个错误：

```
if float(abs(x))>=x_0:
TypeError: only length-1 arrays can be converted to Python scalars 
```

请帮忙：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T12:58:36.217

abs(x) 是一个数组，您不能将数组转换为浮点值，这就是错误。您可以编写一个 for 循环来进行计算，但 numpy 可以执行向量化 if condition by `numpy.where`。有关更多信息，请阅读[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html)：

```
import numpy as np
x = np.arange(-20, 20, 0.01)
x0 = 5
U0 = 200
u = np.where(np.abs(x) >= x0, U0, U0*np.abs(x)/x0)
plot(x, u, lw=3) 
```

输出：

![在此处输入图像描述](../Images/51fb7a5b5b654d872ed8442476e91a71.png)

你也可以使用[分段](http://docs.scipy.org/doc/numpy/reference/generated/numpy.piecewise.html)函数，它可以处理更复杂的情况。

# c - 在终端中运行已编译的 GCC 文件时，没有任何反应

> ID：15449489
> 
> 赞同：-1
> 
> 时间：2013-03-16T12:51:55.807
> 
> 标签：c, linux, terminal

我安装了 Ubuntu 64 位，当我使用标志编译 C 文件时：

```
gcc -g -m32 -ansi -Wall -c -o *.o *.c 
```

它编译文件，但是当我尝试在终端中运行它们时，什么也没有发生。

所以我决定尝试编译和运行一个没有makefile的简单文件，代码如下：

```
#include <stdio.h>
int main()
{
    printf("Hello World");
    return 0;
} 
```

编译成功，但是当我尝试运行该文件时，我什么也没得到...

注意：我已经尝试安装 lib32gcc1、libc6-i386 和 g++-multilib。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:13:11.510

将 -o *.o 替换为 -o 程序名。-o 参数接收您正在生成的程序的可执行名称。这是 gcc 手册：

[http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Overall-Options.html#Overall-Options](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Overall-Options.html#Overall-Options)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:56:52.163

对于简单的测试，请忽略所有选项：

```
> cat test.c
#include <stdio.h>
int main()
{
  printf("Hello World\n");
  return 0;
}

> gcc test.c

> ./a.out
Hello World 
```

看看这是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T13:02:04.000

让我们假设您（已经）有两个目标文件`a.o`和`b.o`，它们对应的源文件`a.c`和`b.c`一些公共头文件`ch.h`；然后你的（不正确的）命令行

```
 gcc -g -m32 -ansi -Wall -c -o *.o * 
```

可以扩展为：

```
 gcc -g -m32 -ansi -Wall -c -o a.o b.o a.c b.c ch.h a.o b.o 
```

^(（实际上，这会更糟，例如，如果您有一些`Makefile`或一些来自编辑的备份文件`a.c~`，如 William Pursell 所说）)

这将编译但不链接，文件`b.o a.c b.c ch.h a.o b.o`意义不大。

您应该了解 shell 在执行任何`gcc`程序（在新进程中）之前首先扩展参数。要了解扩展的内容，请考虑替换`gcc`为`echo`（或`gcc -v`显示实际发生的情况）

然后，您应该阅读有关[调用 GCC的 GCC 文档](http://gcc.gnu.org/onlinedocs/gcc/Invoking-GCC.html)

实际上，您需要花几个小时阅读，例如[Advanced Bash Scripting Guide](http://www.tldp.org/LDP/abs/html/)（可能确实有一些错误）和[Advanced Linux Programming](http://advancedlinuxprogramming.com/)。几个维基百科页面也可以用来阅读。

# php - 基于 javascript 变量搜索数据库

> ID：15449497
> 
> 赞同：1
> 
> 时间：2013-03-16T12:52:23.147
> 
> 标签：php, javascript, html, mysql, phpmyadmin

我正在尝试执行一个特定的查询，在其中搜索我使用 javascript 获得的名称。我有这个 HTML：

```
<a onmouseover="showDef(textContent)" href="aLinkHere.com">myWord</a> 
```

该函数`showDef`获取 myWord ，然后我试图执行我的查询。

```
<script type="text/javascript>
function showDef(txt) {
    var myWord = txt;
//Some code here to execute the query?
}
</script> 
```

我想要的查询如下：

```
mysql_query("SELECT * FROM defs WHERE name='myWord'"); 
```

现在我必须用存储在 javascript 变量中的单词替换“myWord”。有什么办法吗？我已经尝试了以下方法，但这没有用..

```
document.write('<?php $data = mysql_query("SELECT * FROM defs WHERE name=\''+ myWord + '\'"); '); 
```

我在 javascript 和 php 方面相对较新，因此非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:00:17.727

Javascript 是客户端语言，您需要 php（服务器端）语言来执行查询。

使用该变量创建 ajax 请求并在查询中使用该变量。从您的远程 php 文件返回该响应并在 javascript 中捕获响应。并享受回应。

如果您只搜索名称（精确），则使用`=`else`LIKE`或`REGEXP`以获得更好的性能

这是一个使用[jQuery](http://jquery.com)库的示例。

```
 var dataString = 'searchVar='+ myWord;
    $.ajax({ 
      type: "POST",
      url: "ajax.php",
      data: dataString,
      cache: false,
      success: function(data){
           alert(data)
      }
}); 
```

在 php 代码中，您只需要获取变量`$_POST['searchVar']`并执行查询

`$qry = "SELECT * FROM defs WHERE name LIKE '%".'$myWord."%'";` 并在 while 循环 jst 中回显您的响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T13:04:31.260

你确实比较新，这是基本的字符串 101。

1）不要使用document.write，它不是供你使用的，它是十年前的一个API，不会做你认为它做的事情。找到要设置内容的元素（使用 document.getElementById 等），然后使用 .innerHTML = ... 设置其内容。

2) 要在 PHP 端的查询中获得您的价值，只需将其放在那里，这是 PHP 的基本功能之一：

```
$myword = sanitize_the_hell_out_of_this($_POST['myword'];
mysql_query("SELECT * FROM defs WHERE name='$myword'"); 
```

您可以选择您喜欢的任何方法进行清理，PHP 中包含了一些方法，但在任何情况下都不要将发布的值直接传递到您的数据库，除非您喜欢人们删除您的数据库，因为他们可以。有人可以只编辑 html，将单个单词更改为“'; drop table words;'lo”，现在您的表格将被删除。欢乐时光 =)

为了让它真正起作用，请记住您的页面在客户端计算机上运行，​​而 PHP 是一种服务器技术。因此，javascript 必须通过字面意义上的询问服务器来向服务器询问数据：您需要一个 AJAX 获取或发布操作，然后处理返回的数据。您不能注入 PHP 代码然后让它在用户的计算机上运行。

# php - PHP OO 数据库连接

> ID：15449499
> 
> 赞同：-2
> 
> 时间：2013-03-16T12:52:23.670
> 
> 标签：php, mysql, database

这条线的作用/目的是什么：

```
$db->next_result(); 
```

如果我删除该行，我会得到相同的输出/结果。

```
<?php
$mysqli = new mysqli("localhost", "user", "pass", "db");

/* check connection */
if ($mysqli->connect_errno) {
    printf("Connect failed: %s\n", $mysqli->connect_error);
    exit();
}

if ($result=$mysqli->query("SELECT * FROM `users`")) {
    printf("Successfully queried.\n");
}

if($result){

    while ($row=$result->fetch_object()){
        print_r($row);
    }

    // Free result set
    $result->close();
    $db->next_result();

}

else echo($db->error);

$mysqli->close();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:54:06.817

来自`php`文档

```
mysqli::next_result -- mysqli_next_result — Prepare next result from multi_query 
```

# coffeescript - 一个简单的 SlickGrid DropDown 选择列表单元编辑器

> ID：15449500
> 
> 赞同：4
> 
> 时间：2013-03-16T12:52:44.690
> 
> 标签：coffeescript, slickgrid

我想要使​​用标准 html 选择列表在 slickgrid 中编辑值的最简单的解决方案。

stackoverflow 上有很多答案，所有这些都告诉您实现自己的`SelectCellEditor`. 这里有些例子：

*   [Slickgrid，带有下拉选择列表的列？](https://stackoverflow.com/q/2623161/776476)
*   [SlickGrid 选择编辑器](https://stackoverflow.com/q/3211956/776476)
*   [slickgrid 自定义下拉编辑器](https://stackoverflow.com/q/12512178/776476)

但是这些示例都是用 javascript 编写的，因此有点冗长。

因此，我将使用精简的 CoffeeScript 版本来回答我自己的问题。它适用于简单的选择列表，并且在您想要花哨时很容易扩展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:52:44.690

**CoffeeScript 中的一个简单的 SlickGrid SelectCellEditor**

```
class SelectCellEditor 
    last=undefined
    constructor:(@args) ->
        options = @args.column.options.split(",")
        @select=$("<select/>")
        .append("<option value=\"#{o}\">#{o}</option>" for o in options)
        .appendTo(@args.container)
        .focus()

    loadValue: (item) -> 
        last = item[@args.column.field]
        @select.val last

    serializeValue  : -> @select.val()
    destroy         : -> @select.remove()
    focus           : -> @select.focus()
    isValueChanged  : -> @select.val() isnt last
    validate        : -> {valid: true, msg: null}
    applyValue      : (item, state) -> item[@args.column.field] = state 
```

**用法**

使用 slickgrid`columns`定义，`SelectCellEditor`通过属性应用使用`editor`属性提供的选择项列表`options`，如下所示：

```
columns = [
    // Other slickgrid columns ...
    { 
        id      : "colour", 
        name    : "Colour", 
        field   : "Colour", 
        options : "Red,Green,Blue", 
        editor  : SelectCellEditor
    }
] 
```

# c# - 如何确定在 TableLayoutPanel 中单击的单元格？

> ID：15449504
> 
> 赞同：5
> 
> 时间：2013-03-16T12:53:10.480
> 
> 标签：c#, winforms, tablelayoutpanel

我有一个`TableLayoutPanel`并且我想向我单击的单元格添加一个控件。

问题是我无法确定在运行时单击的单元格。

如何确定被点击的单元格？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-16T13:41:04.447

您可以使用[`GetColumnWidths`](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.getcolumnwidths.aspx)和[`GetRowHeights`](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.getrowheights.aspx)方法来计算单元格的行和列索引：

```
Point? GetRowColIndex(TableLayoutPanel tlp, Point point)
{
    if (point.X > tlp.Width || point.Y > tlp.Height)
        return null;

    int w = tlp.Width;
    int h = tlp.Height;
    int[] widths = tlp.GetColumnWidths();

    int i;
    for (i = widths.Length - 1; i >= 0 && point.X < w; i--)
        w -= widths[i];
    int col = i + 1;

    int[] heights = tlp.GetRowHeights();
    for (i = heights.Length - 1; i >= 0 && point.Y < h; i--)
        h -= heights[i];

    int row = i + 1;

    return new Point(col, row);
} 
```

用法：

```
private void tableLayoutPanel1_Click(object sender, EventArgs e)
{
    var cellPos = GetRowColIndex(
        tableLayoutPanel1,
        tableLayoutPanel1.PointToClient(Cursor.Position));
} 
```

但请注意，仅当单元格尚未包含控件时才会引发 click 事件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-08T20:35:32.327

这对我有用：

```
public TableLayoutPanel tableLayoutPanel { get; set; }

private void Form_Load(object sender, EventArgs e)
{
    foreach (Panel space in this.tableLayoutPanel.Controls)
    {
        space.MouseClick += new MouseEventHandler(clickOnSpace);
    }
}

public void clickOnSpace(object sender, MouseEventArgs e)
{

    MessageBox.Show("Cell chosen: (" + 
                     tableLayoutPanel.GetRow((Panel)sender) + ", " + 
                     tableLayoutPanel.GetColumn((Panel)sender) + ")");
} 
```

请注意，我的 tableLayoutPanel 是全局声明的，因此我可以直接使用它而无需将其传递给每个函数。此外，tableLayoutPanel 和其中的每个面板都是在其他地方完全以编程方式创建的（我的表单 [设计] 完全空白）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-30T12:03:59.540

我的回答是基于上面[@Mohammad Dehghan](https://stackoverflow.com/users/1174942/mohammad-dehghan)的回答，但有几个优点：

*   它现在考虑到垂直滚动
*   列的顺序正确（从 开始`i=0`而不是`i=length`），这意味着以正确的顺序处理不同宽度或高度的列

这是代码的更新版本：

```
public Point? GetIndex(TableLayoutPanel tlp, Point point)
{
    // Method adapted from: stackoverflow.com/a/15449969
    if (point.X > tlp.Width || point.Y > tlp.Height)
        return null;

    int w = 0, h = 0;
    int[] widths = tlp.GetColumnWidths(), heights = tlp.GetRowHeights();

    int i;
    for (i = 0; i < widths.Length && point.X > w; i++)
    {
        w += widths[i];
    }
    int col = i - 1;

    for (i = 0; i < heights.Length && point.Y + tlp.VerticalScroll.Value > h; i++)
    {
        h += heights[i];
    }
    int row = i - 1;

    return new Point(col, row);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-06T23:35:08.133

尼克的答案是最好的解决方案，除了它可以为在单元格中包含不同类型控件的 TableLayoutPanels 通用。只需将显式“面板”类型更改为“控制”：

```
public TableLayoutPanel tableLayoutPanel { get; set; }

private void Form_Load(object sender, EventArgs e)
{
    foreach (Control c in this.tableLayoutPanel.Controls)
    {
        c.MouseClick += new MouseEventHandler(ClickOnTableLayoutPanel);
    }
}

public void ClickOnTableLayoutPanel(object sender, MouseEventArgs e)
{

    MessageBox.Show("Cell chosen: (" + 
                     tableLayoutPanel.GetRow((Control)sender) + ", " + 
                     tableLayoutPanel.GetColumn((Control)sender) + ")");
} 
```

这很好用，不需要进行坐标数学来查找单击了哪个单元格。

# c++ - std::cout 中的 'operator<<' 不匹配

> ID：15449508
> 
> 赞同：2
> 
> 时间：2013-03-16T12:53:23.177
> 
> 标签：c++, cout

我正在开发 gsoap Web 服务，我在其中检索对象向量以返回查询。我有两种方法可以做到这一点：首先通过简单循环和迭代器。他们都没有工作。

错误是：

> `'operator<<'`错误： in不匹配`'std::cout mPer.MultiplePersons::info.std::vector<_Tp, _Alloc>::at<PersonInfo, std::allocator<PersonInfo> >(((std::vector<PersonInfo>::size_type)i))'`

```
MultiplePersons mPer; // Multiple Person is a class, containing vector<PersonInfo> info
std::vector<PersonInfo>info; // PersonInfo is class having attributes Name, sex, etc.
std::vector<PersonInfo>::iterator it;

cout << "First Name: \t";
cin >> firstname;
if (p.idenGetFirstName(firstname, &mPer) == SOAP_OK) {
    // for (int i = 0; i < mPer.info.size(); i++) {
    //    cout << mPer.info.at(i); //Error
    //}
    for (it = info.begin(); it != info.end(); ++it) {
        cout << *it; // Error
    }

} else p.soap_stream_fault(std::cerr);

} 
```

很明显，运算符重载`operator<<`是`cout`问题所在。我已经查看了与此相关的几个问题，但没有人帮助我。如果有人可以提供有关如何解决它的具体示例，将不胜感激。*（请不要笼统地谈论它，我是 C++ 新手，我花了三天时间寻找解决方案。）*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T12:56:49.837

您需要为`PersonInfo`. 像这样的东西：

```
struct PersonInfo
{
  int age;
  std::string name;
};

#include <iostream>
std::ostream& operator<<(std::ostream& o, const PersonInfo& p)
{
  return o << p.name << " " << p.age;
} 
```

此运算符允许类型为 的表达式`A << B`，其中`A`是一个`std::ostream`实例（其中`std::cout`一个）并且`B`是一个`PersonInfo`实例。

这允许您执行以下操作：

```
#include <iostream>
#include <fstream>
int main()
{
  PersonInfo p = ....;
  std::cout << p << std::endl; // prints name and age to stdout

  // std::ofstream is also an std::ostream, 
  // so we can write PersonInfos to a file
  std::ofstream person_file("persons.txt");
  person_file << p << std::endl;
} 
```

这反过来又允许您打印取消引用的迭代器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:59:31.770

的结果`*it`是类型的 L 值`PersonInfo`。编译器抱怨没有`operator<<`哪个采用右侧参数 type `PersonInfo`。

要使代码正常工作，您需要提供这样的运算符，例如：

```
std::ostream& operator<< (std::ostream &str, const PersonInfo &p)
{
  str << "Name: " << p.name << "\nAge: " << p.age << '\n';
  return str;
} 
```

当然，运算符的确切实现取决于您在输出中表示类的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T13:00:47.880

它告诉你的是没有已知的方法来 cout（控制台输出）*it 的内容。

`it`是一个迭代器——把它想象成列表中的一个指针

该列表是`info`如此 *它是 中的当前项目`info`，这是一个`PersonInfo`项目列表。

所以`cout << *it;`说输出到控制台`PersonInfo`是它当前引用的。

但是错误消息告诉您编译器不知道应该如何将 PersonInfo 呈现到控制台。

您需要做的是创建一个名为的运算符，该运算符`<<`接受一个`cout`为 ( `ostream`) 的对象和一个`PersonInfo`对象，然后将 to 的各个位`PersonInfo`写入`cout`。

# c# - VS2010 数据库项目扩展

> ID：15449509
> 
> 赞同：2
> 
> 时间：2013-03-16T12:53:32.960
> 
> 标签：c#, visual-studio-2010, smo, database-project, vs-extensibility

我正在尝试为 SQL Server 数据库项目创建一个 VS2010 扩展（托管 VSPackage）。

我想做的是从 Transact SQL 编辑器窗口捕获“查询执行”事件：

![在此处输入图像描述](../Images/41a87d99a8621c4c9afb1e5e600ff11f.png)

然后捕获 SQL 文本并在执行之前对其进行修改。到目前为止，我的代码处理打开文档时连接 Transact SQL 编辑器窗口（使用`IVsRunningDocTableEvents`界面）：

```
public int OnBeforeDocumentWindowShow(uint docCookie, int fFirstShow, IVsWindowFrame pFrame)
{
    try
    {
        var marshalingWindowFrame = pFrame as WindowFrame.MarshalingWindowFrame;
        if (marshalingWindowFrame != null)
        {
            var sqlScriptEditorControl =
                marshalingWindowFrame.ViewHelper as
                SqlScriptEditorControl;
            if (sqlScriptEditorControl != null)
            {
                if (!sqlScriptEditorControl.IsConnected)
                {
                    ReadConnectionInfoAndConnectEditor(sqlScriptEditorControl, docCookie);
                }
            }
        }
    }
    catch (Exception exception)
    {
        Debug.WriteLine(exception);
    }

    return VSConstants.S_OK;
}

private void ReadConnectionInfoAndConnectEditor(SqlScriptEditorControl sqlScriptEditorControl, uint docCookie)
{
    string documentName = GetDocumentMoniker(docCookie);

    var document = _dte.Documents.OfType<Document>().FirstOrDefault(x => x != null && x.FullName == documentName);
    if (document != null)
    {
        var p = document.ProjectItem.ContainingProject;
        var hierarchy = ProjectToHierarchy(p);

        var buildPropertyStorage = hierarchy as IVsBuildPropertyStorage;

        if (buildPropertyStorage != null)
        {
            string sandboxTargetConnectionString;
            buildPropertyStorage.GetPropertyValue("SandboxTargetConnectionString", "Debug", (uint)_PersistStorageType.PST_USER_FILE, out sandboxTargetConnectionString);

            string sandboxTargetDatabase;
            buildPropertyStorage.GetPropertyValue("SandboxTargetDatabase", "Debug", (uint)_PersistStorageType.PST_USER_FILE, out sandboxTargetDatabase);

            var connectionStringBuilder = new SqlConnectionStringBuilder
                {
                    ConnectionString = sandboxTargetConnectionString,
                    InitialCatalog = sandboxTargetDatabase,
                    ApplicationName = Assembly.GetExecutingAssembly().GetName().Name
                };

            var uiConnectionInfo = new UIConnectionInfo
                {
                    ServerName = connectionStringBuilder.DataSource,
                    ServerType = Microsoft.SqlServer.Management.UI.ConnectionDlg.SqlServerType.ServerType
                };

            var sqlConnection = new SqlConnection
                {
                    ConnectionString = connectionStringBuilder.ConnectionString
                };
            sqlConnection.Open();

            sqlScriptEditorControl.SetConnection(uiConnectionInfo, sqlConnection);
        }
    }
} 
```

在这种情况下，我如何订阅“查询执行”事件？

# java - 在android中每3秒显示一次通知

> ID：15449511
> 
> 赞同：0
> 
> 时间：2013-03-16T12:53:49.993
> 
> 标签：java, android, notifications

我想在我的应用程序中创建一个服务，每 3 秒创建一个通知。我创建了这段代码，但它只在我启动我的应用程序时工作一次。我希望每 3 秒收到一次通知！即使我关闭我的应用程序，我也会收到通知！（因此我创建了服务）请帮助我。

```
public class notifService extends Service {
ScheduledExecutorService scheduler = Executors.newSingleThreadScheduledExecutor();
private static final int HELLO_ID = 1;

    @Override
        public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public void onStart(Intent intent, int startId) {
        super.onStart(intent, startId);
        final Intent intent1 = new Intent(this, notifService.class);

        scheduler.schedule(new Runnable() {
            @Override
            public void run() {
                // Look up the notification manager server
                NotificationManager nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);

                // Create your notification
                int icon = R.drawable.fifi;
                CharSequence tickerText = "Hello";
                long when = System.currentTimeMillis();
                Notification notification = new Notification(icon, tickerText,when);
                Context context = getApplicationContext();
                CharSequence contentTitle = "My notification";
                CharSequence contentText = "Hello World!";
                PendingIntent pIntent = PendingIntent.getActivity(notifService.this, 0, intent1, 0);
                notification.setLatestEventInfo(context, contentTitle,contentText, pIntent);
                // Send the notification
                nm.notify(HELLO_ID, notification);
            }
        }, 3, SECONDS);
    }

    @Override
        public void onDestroy() {
        super.onDestroy();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:58:28.050

`schedule`您使用的方法*执行一次性操作*。

您需要使用[`ScheduledExecutorService.scheduleWithFixedDelay`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleWithFixedDelay%28java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit%29)：

> 创建并执行一个周期性操作，该操作首先在给定的初始延迟之后启用，随后在一个执行的终止和下一个执行的开始之间具有给定的延迟。

尝试这个：

```
scheduler.scheduleWithFixedDelay(new Runnable() {
        @Override
        public void run() {
          // your code
        }
    }, 3, 3, SECONDS); 
```

请注意方法调用中的额外内容`3`，因为此方法需要四个参数。

# html - CSS3 和 HTML5 中的列

> ID：15449515
> 
> 赞同：0
> 
> 时间：2013-03-16T12:54:01.760
> 
> 标签：html, css

我试图打破我的列对之间的界限并且确实遇到了一些麻烦。我希望第一列在页面的中心，第二个较小的列在它的右边。

这将在这对列下方重复。

```
<html>

<head>
        <title>Choose to Give</title>
        <link rel="stylesheet" type="text/css" href="web.css" />
</head>

<body>

<ul class="nav">
  <li><a href="/home/">Home</a></li>
  <li><a href="/about_us/">About</a></li>
  <li><a href="/foundations/">Foundations</a></li>
  <li><a href="/forums/">Forums</a></li>
  <li><a href="/contact/">Contact</a></li>
</ul>

<div class="column1of2">
<h2>
Do something that matters.
blah blah
</h2>
</div>

<div class="column2of2">
<h2>
Top user contributions.
</h2>
</div>

<br>

<div class="column1of2">
<h2>
Random title here
blah blah
</h2>
</div>

<div class="column2of2">
<h2>
Top company contributions.
</h2>
</div>

</body>

</html> 
```

然后是 CSS。

```
body {
        background-color:#66FF33;
        font-size: 8pt;
        color: black;
        text-align: left;
}

.nav{
        border:10px solid black;
        background-color: white;
        border-width:10px 0;
        list-style:none;
        padding:0;
        margin-top: 10%;
        text-align:center;
        font-size: 12pt;
}
.nav li{
        display:inline;
}
.nav a{
        display:inline-block;
        padding:10px;
}

h1 {
        text-align: left;
        color: black;
        background-color: white;
        padding: 30px;
        border-style: solid;
        border-width: 10px;
        border-left-width: 10px;
        border-right-width: 10px;
        border-color: black;
        border-radius: 5px;

}

h2 {
        text-align: left;
        color: black;
        background-color: white;
        padding: 30px;
        border-style: solid;
        border-width: 10px;
        border-left-width: 10px;
        border-right-width: 10px;
        border-color: black;
        border-radius: 5px;

}

.column1of2 {
float: left;
width: 30%;
left-margin: 10%;
}

.column2of2 {
float: right;
width: 15%;
right-margin: 2%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:06:40.980

使用 clear left

```
 .column1of2 {clear:left} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T14:01:05.990

这可以使用包含 div column1of2 和 column2of2 的 div 来实现，其中我们可以将 margin:0px auto 赋予 column1of2 以及 float:left，对于 column2of2，我们可以赋予 float:right 和 margin-left:5% ; 关闭 column2of2 的 div 后，我们可以添加另一个 div，然后关闭 div“row_holder”并将类的 css 清除为 .clear{clear:both;}。

# c# - 长值字典

> ID：15449518
> 
> 赞同：0
> 
> 时间：2013-03-16T12:54:10.887
> 
> 标签：c#, .net

我有这种类型`Dictionary`：

```
Dictionary<string, object> dict 
```

其中一个价值是`long`，这就是我尝试从以下方面获取它的方式`Dictionary`：

```
long wantedid = (long)dict["wantedid"]; 
```

这是我得到的例外：

> 指定的演员表无效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T12:55:51.337

您尝试读取的值显然不是一个`long`值。由于您定义了`Dictionary`as `Dictionary<string, object>`，因此您可能已将任何类型的对象放入其中。

调试代码，并检查所需元素的值。您可以在 Watch 窗口中查看数据类型。

要在运行时检查类型，您可以尝试：

```
object o = dict["wantedid"];
if (o is long)
{
    long wantedid = (long)o;
    // ...
} 
```

但是，如果您只需要存储`long`值，请将字典定义为`Dictionary<string, long>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:40:12.873

您可以使用 TryParse 来确保该值很长。它可能是这样的：

```
 long wantedid;
    bool isLong = long.TryParse(dict["wantedid"].ToString(), out wantedid);
    if (isLong)
    {
        //do whatever you want to because you know the object can be a long       
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T12:59:12.440

您已经定义了值对，`object`因为它还可能包含字符串值或其他任何内容。

所以假设如果它包含`"Hello"`然后演员表显然是错误的。

# javascript - 设置 jQuery 中显示的 Spotify 响应的数量限制

> ID：15449519
> 
> 赞同：0
> 
> 时间：2013-03-16T12:54:12.863
> 
> 标签：javascript, jquery

我正在使用 Spotify Search API 构建一些东西。我现在拥有的是一个输入字段，每次按下键时都会搜索 Spotify 数据库并显示最接近的 10 个结果。

我正在努力解决的问题是我想将结果的数量限制为 10，我有，但我显然把计数器放在了错误的位置，这意味着每次有一个键，另外 10结果被添加到结果列表中。

```
jQuery(document).ready(function($) {

    var searchResult = null;  

    $('.spotify-input').each(function() { 

        var elem = $(this);

        // Save current value of element
        elem.data('oldVal', elem.val());

        // Look for changes in the value
        elem.bind("propertychange keyup input paste", function(event) {

            // If value has changed...
            if (elem.data('oldVal') != elem.val()) {

                // Updated stored value
                elem.data('oldVal', elem.val());

                // Do action
                query = $(this).val();
                $.ajax({
                    url: 'http://ws.spotify.com/search/1/track.json',
                    dataType: 'json',
                    data: {q: query},
                    timeout: 30000,
                    beforeSend: function (xhr) {
                        self._activeQueryXHR = xhr;
                    },
                    complete: function (xhr, textStatus) {
                        if (self._activeQueryXHR === xhr)
                            self._activeQueryXHR = null;
                    },
                    success: function (data, textStatus, xhr) {
                        console.log(data);
                        var searchResult = data;

                        i = 0;
                        $.each(data.tracks, function(index, track) {

                            //Set the limit for the number of responses
                            if(i < 11) {
                                //Track details
                                console.log(track.name);
                                $('<li class=\"spotify-result\">'+track.name+track.artists[0].name+'</li>').appendTo($('.dropdown-list'));
                            }
                            //For each result, add +1 to the counter
                            i++;
                        })
                        //On-click Stuff
                        $('.spotify-result').click(function() {
                            $(this).clone().appendTo($('.selected-list'));
                        });
                    }
                }) 

            }
        });

    });
}); 
```

我希望我已经解释了我的要求。如果代码很差，我不是一个 Javascript 人，所以很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:06:43.140

在这里，您需要在每个成功方法调用中清空 .dropdown-list 容器

```
$('.dropdown-list').empty();
 $.each(data.tracks, function(index, track) {

                            //Set the limit for the number of responses
                            if(i < 11) {
                                //Track details
                                console.log(track.name);
                                $('<li class=\"spotify-result\">'+track.name+track.artists[0].name+'</li>').appendTo($('.dropdown-list'));
                            }
                            //For each result, add +1 to the counter
                            i++;
                        }) 
```

# javascript - 带有 Knockout 和 RequireJS 的外部模板和“el”？

> ID：15449522
> 
> 赞同：3
> 
> 时间：2013-03-16T12:54:27.340
> 
> 标签：javascript, backbone.js, knockout.js, requirejs

我正在尝试将 Knockout ViewModels 用作独立的“小部件”，可以将其放置到页面上的任何（或多个）DOM 节点中。我在 Backbone 中采用了一种似乎运作良好的方法，我正在尝试将这个概念转换为 Knockout。

在 Backbone 视图中，我会做这样的事情，使用 RequireJS 文本插件来提取模板并将其注入到 el 中：

```
define(['text!templates/myTemplate.html',], function(templateHTML){
    var view = Backbone.View.extend({

        initialize:function() {
            // yes I know the underscore templating stuff doesn't apply in Knockout
            this.template = _.template( templateHTML );
            this.render();
        },

        render:function( ) {
            // the $el is provided by external code. See next snippet
            this.$el.append(this.template(myData));
            return this;
        }

        // other view behavior here

    });

    return view;
}); 
```

然后其他一些外部代码可以将该视图放入现有的 DOM 节点中：

```
new MyBackboneView({el: $('#myExistingDivID')}); 
```

在 Knockout 中，我能找到的最接近这种方法的方法是让**外部代码**使用 Text 插件拉取模板，将其注入 div，然后应用 KO 绑定：

```
var mydiv = $('#myExistingDivID');
mydiv.html(myTemplateHTML);
ko.applyBindings(new MyKOViewModel(), mydiv[0]); 
```

1 - 在 Knockout 中是否有推荐的方法让 ViewModel 本身基于 Backbone 的“el”概念注入外部模板 HTML？关键是外部（路由器式）代码控制内容的**放置**位置，但 ViewModel 控制内容的实际细节以及从何处获取模板。

2 - 如果是，我*应该*采用这种方法，还是在滥用 Knockout 和 MVVM 的使用方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:25:41.730

您可以覆盖默认模板源，然后将其与默认渲染引擎一起使用，例如

```
var stringTemplateEngine = new ko.nativeTemplateEngine();
stringTemplateEngine.makeTemplateSource = function (template) {
    return new StringTemplateSource(template);
};
ko.setTemplateEngine(stringTemplateEngine); 
```

我做的快速示例

[http://jsfiddle.net/3CQGT/](http://jsfiddle.net/3CQGT/)

# virtualbox - 在 Virtualbox 中连接 IOIO Bridge 和 android_x86

> ID：15449525
> 
> 赞同：2
> 
> 时间：2013-03-16T12:54:57.823
> 
> 标签：virtualbox, android-x86, bridge, ioio

**情况：在Virtualbox中连接IOIO Bridge到android_x86**

```
*adb connected to 10.10.10.3:5555 (where 10.10.10.3 is VBox)* 

adb forward tcp:4545 tcp:5555 
java -jar ioiobridge.jar  COM3 
```

输出似乎

```
Connecting to IOIO... Connected!
Connecting to Android application... Connected!
Bridge is running...
Bridge closed.
Connecting to IOIO... Connected!
Connecting to Android application... Connected!
Bridge is running...

Bridge closed.
Connecting to IOIO... Connected!
Connecting to Android application... Connected!
Bridge is running...
Bridge closed.
Connecting to IOIO... Connected!
Connecting to Android application... Connected!
Bridge is running...
Bridge closed.
Connecting to IOIO... Connected!
Connecting to Android application... Connected!
Bridge is running...
Bridge closed. 
```

我怎么了？

谁能猜到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:47:27.120

> **我找到了答案**，

它是因为 Android 程序正在关闭连接
原因：打开 IOIO 实例时出错
（我**没有**使用 AbstactIOIOActivity 或其新版本，我正在使用 IOIO 工厂）

如果将来有人遇到问题，错误在于编程端建立连接，只需使用 IOIO Libs，否则像我一样做一个综合工作来创建自己的。

# visual-c++ - BST 中的节点数

> ID：15449526
> 
> 赞同：0
> 
> 时间：2013-03-16T12:54:57.980
> 
> 标签：visual-c++, binary-search-tree

我正在尝试计算二叉搜索树中的节点数，并且想知道最有效的方法是什么。这些是我发现的选项：

1.  在 BST 类中存储 int 计数

2.  将 int children 存储在树的每个节点中，该节点存储其下的子节点数

3.  编写一个统计 BST 中节点数的方法

如果使用选项 3，我写过：

```
int InOrder {
    Node *cur = root;
    int count = 0;
    Stack *s = null;
    bool done = false;

    while(!done) {
        if(cur != NULL) {
            s.push(cur);
            cur = cur->left;
        }
        else {
            if(!s.IsEmpty()) {
                cur = s.pop();
                count++;
                cur = cur->right;
            }
            else {
                done = true;
            }
        }
    }
    return count; 
```

}

但从外观上看，它似乎会陷入和之间的无限`cur = cur->left;`循环`cur = cur->right;`

那么哪个选项最有效，如果是选项 3，那么这种方法会起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T05:32:33.770

我认为第一个选项是最快的，它只需要 O(1) 空间来实现这一点。但是，每当您插入/删除项目时，您都需要不断更新此值。获取所有节点的数量需要 O(1) 时间。

第二个选项会使这个程序变得过于复杂，因为在某处删除/插入一个节点将不得不更新它的所有祖先。要么添加父指针，以便充分更新每个祖先，要么需要遍历树中的所有节点并再次更新数字。无论如何，我认为这将是所有三个中最糟糕的选择。

如果您不多次调用此选项，则第三个选项很好，因为第一个选项比此选项快得多，O(1)。这将花费 O(n)，因为您需要遍历每个节点来检查计数。

就您的代码而言，我认为以递归方式编写更容易，如下所示：

```
int getCount(Node* n)
{
 if (!n)
  return 0;
 return 1 + getCount(n->left) + getCount(n->right);
} 
```

希望这可以帮助！

# c# - 找不到 WIX 模板项目

> ID：15449529
> 
> 赞同：2
> 
> 时间：2013-03-16T12:55:16.627
> 
> 标签：c#, visual-studio-2012, windows-services, wix

我正在使用`Windows Service`项目进行项目`VS2012`，当我尝试添加`Setup`项目以完成我的解决方案 时![在此处输入图像描述](../Images/691423b7a129ec2545e79b52283c20a5.png)

我发现我无法将此模板添加到解决方案中，我不知道为什么！我只是收到此错误消息，我只是不知道他们为什么突然决定删除安装项目模板`VS2012`

![在此处输入图像描述](../Images/8c604ce54bbeea48afead19579877bd3.png)

这是否取决于当前使用的框架`4.0`？我正在研究 64 位系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T14:25:16.233

这些模板不是来自 WiX 工具集。它们是由使用我们的图标使它们看起来像官方支持的模板的人创建的。我要求作者更清楚地说明它们不是 WiX 工具集的一部分，因此没有混淆谁支持它们。我有报告说这些模板质量很高。

# php - PHP 检查进程是否正在运行（Linux）

> ID：15449531
> 
> 赞同：2
> 
> 时间：2013-03-16T12:55:23.053
> 
> 标签：php, linux, exec

我试图弄清楚游戏服务器是否正在运行。我发现了很多肮脏的方法，所以我想通过调用一个检查进程是否正在运行的 PHP 脚本来简化它。那么我正在尝试的是：

```
<?php
exec("bin_unix/linux_server", $output, $return);
if ($return == 0) {
    echo "Ok, process is running\n";
} else {
    echo "Process is not running\n";
} 
```

但它不起作用（因为我确定进程正在运行）.. 它不是一个“真正的”进程不要怪我，我不是 Linux 专家。

所以我要运行这个服务器是下面的命令：

```
cd /path/to/server/ && nohup bin_unix/linux_server & 
```

我猜`bin_unix/linux_server`in`exec();`是错误的，但它是我得到的唯一静态信息`ps aux`。

process_id 会经常改变，所以我不确定在那里输入什么..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:59:26.497

使用`pidof`命令，看这里：[pidof 命令](http://linux.about.com/library/cmd/blcmdl8_pidof.htm)

# javascript - 带有 iScroll.js 的 iOS 动画锚滚动方法

> ID：15449534
> 
> 赞同：0
> 
> 时间：2013-03-16T12:55:29.633
> 
> 标签：javascript, jquery, ios, iscroll, iscroll4

我使用[iScoll.js](http://cubiq.org/iscroll)来帮助在 iOS 上滚动动画。基本上它使用硬件加速的 CSS 属性来移动内容，而不是传统的滚动。

iScoll 运行良好，但我也在尝试实现平滑滚动锚解决方案。

它在桌面上运行良好，但问题是我无法锻炼如何检索正确的偏移值以传递给 iScoll 实例。我觉得我非常接近解决方案：

```
var ua = navigator.userAgent,
    isMobileWebkit = /WebKit/.test(ua) && /Mobile/.test(ua);

if (isMobileWebkit) {
      iScrollInstance = new iScroll('wrapper');
}

$('a[href*=#]:not([href=#])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') 
            || location.hostname == this.hostname) {
            var target = $(this.hash);
            target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
               if (target.length) {
                   if (isMobileWebkit) {
                       iScrollInstance.refresh();
/* issue here with "target.position.top" = "undefined" */
                       iScrollInstance.scrollTo(0, target.position.top, 1000);
                   }else{
                        $('html,body').animate({
                        scrollTop: target.offset().top
                        }, 1000);
                   }
                return false;
            }
        }
    }); 
```

完整的演示在这里[http://jsfiddle.net/Wccev/3/](http://jsfiddle.net/Wccev/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:16:28.360

不知道为什么，但似乎 iScroll.js 在 scrollTo 函数中不喜欢 jQuery。所以提前设置变量似乎有帮助。由于 iScroll 移动 div 而不是屏幕的方式，我还必须计算出正确的偏移量。

如果有人需要它，这个 jQuery 应该有助于在 IO 设备上平滑滚动锚点，前提是您正确设置了 iScroll：

```
var ua = navigator.userAgent,
    isMobileWebkit = /WebKit/.test(ua) && /Mobile/.test(ua);

if (isMobileWebkit) {
    $('html').addClass('mobile');
}   

$('a[href*=#]:not([href=#])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') 
            || location.hostname == this.hostname) {
            var target = $(this.hash);
            target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
               if (target.length) {
                   if (isMobileWebkit) {
                        scrollOffset = $('#scroller').position().top;
                        targetOffset = target.offset().top;
                        iScrollInstance.refresh();
                        iScrollInstance.scrollTo(0, -(targetOffset-scrollOffset), 1000);
                   }else{
                        $('html,body').animate({
                        scrollTop: target.offset().top
                        }, 1000);
                   }
                return false;
            }
        }
    }); 
```

# android - 在 xml 中设置 mapfragment 参数

> ID：15449535
> 
> 赞同：1
> 
> 时间：2013-03-16T12:55:31.023
> 
> 标签：android, xml, layout

我在 xml 文件中初始化我的 MapFragment 时遇到问题，我不明白为什么它以一种方式工作，而不是另一种工作方式。

在开发过程中，我的主要活动中首先只有一个 MapFragment。这很好用：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:map="http://schemas.android.com/apk/res-auto"
android:id="@+id/map"
android:layout_width="match_parent"
android:layout_height="match_parent"
class="com.google.android.gms.maps.SupportMapFragment"
map:cameraTargetLat="22.320542"
map:cameraTargetLng="114.185715"
map:mapType="normal"
map:cameraZoom="11"
/> 
```

它以适当的缩放级别打开了我的地图，重点关注香港。但是现在我在布局中添加了更多元素，因为我不能再使用`map:`名称空间了。它被 Eclipse 拒绝。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:map="http://schemas.android.com/apk/res-auto"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

<ProgressBar
    android:id="@+id/progressBar1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

<TableLayout
    android:layout_width="wrap_content"
    android:layout_height="match_parent" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/current" />

        <TextView
            android:id="@+id/textCurrent"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/forecast" />

        <TextView
            android:id="@+id/textForecast"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </TableRow>
</TableLayout>

</LinearLayout>
<fragment 
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment"
/>   
</LinearLayout> 
```

现在我已经找到了从代码设置地图选项的方法，比如[这里](https://stackoverflow.com/questions/13733299/initialize-mapfragment-programmatically-with-maps-api-v2)和[这里](https://stackoverflow.com/questions/15138534/tabsfragment-and-mapfragment)——这不是这里真正的问题。这不是我希望解决的方式，但它是可以接受的。我主要是想了解为什么第二种方法不起作用？地图名称空间在开头声明，以及明显存在于整个 xml 中的 android 名称空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T16:26:14.617

这看起来像是工具中的错误。我已经提交[了一个关于它的问题](https://code.google.com/p/android/issues/detail?id=53283)。你可能想给它加星标或以其他方式安排跟踪它，看看它是否真的是一个错误，是否得到修复等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T18:15:57.283

看起来像 Eclipse 中的一个错误 - 通过清理和重建项目来解决。

# android - android libgdx字体未绘制

> ID：15449536
> 
> 赞同：0
> 
> 时间：2013-03-16T12:55:33.380
> 
> 标签：android, fonts, libgdx

我有一张背景图片，想在上面画文字，但它不起作用。屏幕上只有图片。

```
private SpriteBatch spriteBatch;
private Texture splsh;
private BitmapFont font;   

public void render(float arg0) 
{
    Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);
    spriteBatch.begin();
    spriteBatch.draw(splsh, 0, 0);
    font.draw(spriteBatch, "test", 10, 480);
    spriteBatch.end();
}

public void show()
{
    spriteBatch = new SpriteBatch();
    splsh = new Texture(Gdx.files.internal("bg2.png"));
    font = new BitmapFont();                                                                        
    font.setColor(Color.RED);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T11:56:34.107

你应该缩放你的字体

```
font.setScale(0.2f); 
```

根据您的需要更改大小...还有一件事尝试在屏幕中心绘制字体，这样您就可以检查它是否正在绘制

# ios - 特定的 UIImages 和 UIImageView 对理论有帮助吗？

> ID：15449538
> 
> 赞同：0
> 
> 时间：2013-03-16T12:55:48.067
> 
> 标签：ios, objective-c, uiimageview, uiimage, grand-central-dispatch

我一直在尝试找出 UIImage 一段时间。我一直在尝试找出一种方法来查看“主游戏视图”并根据“级别”变量显示 2/3/4 个不同的图像。我只是想确定逻辑。例如，级别 1 会显示 4 张图片，级别 2 可能会显示 3 张不同的图片。我不想妨碍应用程序的性能，但因为游戏是离线玩的，存档不会有太大的不同，所有图像（数百个优化图像）都本地存储在主应用程序包中。

我只是想知道我到目前为止尝试实现这一点的逻辑是否合理。对于级别 1，我将实现所需的 4 个 UIImageViews 并使用图像对其进行初始化，然后将它们显示在屏幕上的设定位置。然后我会使用 GCD 预加载下一个级别的图像。当按下继续按钮时，我会将 UIImages 和 UIImageViews 设置为 nil 并在屏幕上显示级别 2（或下一个级别）。

我对我的方法没有信心，并且想知道是否有一些东西可以使它更简单或者我错过了什么，或者即使在实践中它会根据理论起作用。

提前感谢您的时间和任何帮助。
对不起，如果这不清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:02:31.733

我假设您为所有关卡使用单个视图控制器类，并从某个 .plist 文件或其他格式加载关卡。

不要打扰使用GCD。在加载过程中每个级别加载 4 张图像几乎没有任何成本。

如果您需要做的只是在每个级别的屏幕上显示 2-4 个图像（除了任何其他级别元素），只需创建 4 个`UIImageView`实例并将它们添加到您的视图中。然后，当您加载关卡时，`UIImage`从所需的图像文件创建新对象并将您`UIImageViews`的图像属性设置为它们。在那一刻，旧级别的`UIImage`对象将被释放和释放，因为您（和`UIImageViews`）不再对它们有强引用。

伪实现：

```
- (void)loadLevel:(int)levelNumber {
    // Assuming you have your image views in an array imageViews.
    // Determine the image files required for this level.
    // Put them into an array imageNames.

    for (int i = 0; i < 4; i++) {
        if (imageNames.count < i) {
            UIImage *image = [UIImage imageNamed:imageNames[i]];
            [self.imageViews[i] setImage:image];
        } else {
            [self.imageViews[i] setImage:nil];
    }
} 
```

# python - 尝试包围导入和捕获 KeyboardInterrupt

> ID：15449541
> 
> 赞同：0
> 
> 时间：2013-03-16T12:56:00.210
> 
> 标签：python

我在目前正在检查的代码库中看到了很多以下模式：

```
try:
    import moduleA
    import moduleB
    from custom.module.A import AX
    from custom.module.A import AY
except KeyboardInterrupt:
    sys.exit() 
```

以前没见过。这是在防备什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T13:00:11.470

我能想到的唯一有意义的方法是，如果其中一些`modules`出于某种原因有`input`/`raw_input`在其中运行，或者`raise KeyboardInterrupt`出于某种原因故意。

否则，真的不太清楚它的意思......（除非一些导入需要几个小时才能运行，如果你厌倦了，可以放弃它而不会看到回溯 - 但这也没有多大意义）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T12:59:52.500

每当您从键盘按`ctrl`+`C`时，都会将 KeyboardInterrupt 发送到 python 进程。如果没有被捕获，它将导致代码中的异常，以便代码在当前所在的任何位置退出。在这种情况下，没有采取任何特殊措施，只是调用`sys.exit()`，这再次导致程序退出，但不显示堆栈回溯

从文档中：

[http://docs.python.org/2/library/exceptions.html?highlight=keyboardinterrupt#exceptions.KeyboardInterrupt](http://docs.python.org/2/library/exceptions.html?highlight=keyboardinterrupt#exceptions.KeyboardInterrupt)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T13:00:12.537

它没有防备任何东西，至少不是很明显。它正在捕获一个[KeyboardInterrupt](http://docs.python.org/3/library/exceptions.html?highlight=keyboardinterrupt#KeyboardInterrupt)：

> 当用户按下中断键（通常是 Control-C 或 Delete）时引发。在执行期间，会定期检查中断。异常从 BaseException 继承，以免被捕获 Exception 的代码意外捕获，从而阻止解释器退出。

然后简单地退出，这就是中断无论如何都会做的事情。

# visual-c++ - std::string.c_str() 返回一个奇怪的字符

> ID：15449544
> 
> 赞同：1
> 
> 时间：2013-03-16T12:56:22.533
> 
> 标签：visual-c++, char, stdstring

在我的项目中，我使用通过指定其文件名来加载纹理。现在，我创建了这个函数`const char* app_dir(std::string fileToAppend);`，它返回`main`s`argv[0]`并将应用程序名称更改为`fileToAppend`. 由于无法使用 char* 轻松进行字符串操作，因此我使用`std::string`. 我的纹理加载器使用 const char* 作为文件名，因此需要切换回 c_str()，现在它会生成一系列 ASCII 符号字符（错误）。`app_dir()`我已经通过将返回类型更改为来解决了这个问题`std::string`。但为什么会这样？

**编辑**

示例代码：

```
//in main I did this

extern std::string app_filepath;

int main(int argc, char** arv) {

    app_filepath = argv[0];

    //...

}

//on other file

std::string app_filepath;

void remove_exe_name() {

    //process the app_filepath to remove the exe name

}

const char* app_dir(std::string fileToAppend) {

    string str_app_fp = app_filepath;

    return str_app_fp.append(fileToAppend).c_str();

    //this is the function the generates the bug

} 
```

正如我之前所说，我已经通过将其返回类型更改为 std::string 来实现功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:23:32.853

A big no no :) returning pointer to local objects

```
return str_app_fp.append(fileToAppend).c_str(); 
```

Change your function to

```
std::string app_dir(const std::string& fileToAppend) {

string str_app_fp = app_filepath + fileToAppend;

return str_app_fp; 
```

}

And on the return value use c_str()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T13:08:03.037

当您使用函数**const char* app_dir(std::string fileToAppend);** 您将获得指向堆栈上分配的内存的指针，并且在函数结束时已被删除。

# php - 获取上一个列表项的宽度并计算当前边距

> ID：15449554
> 
> 赞同：0
> 
> 时间：2013-03-16T12:57:07.857
> 
> 标签：php, jquery, list, width, margin

我正在使用 PHP 来下拉主菜单。我的菜单如下所示：

```
<ul class="dropdown_top">
  <li style="width:20px;">  /*main categories, width is an exapmle i don't realy know the exact width */
    <ul style="margin-left:-10px>
      <li></li>    //subcategories
      ...
    </ul>
  </li>

  <li>  //main categories
    /* the code i'm looking for, must do something like this: */
    <?php
      $style = - widthOfThePreviusMainCategoryLi() + marginLeftOfThePrevius_Ul_Li_Ul() = -30px ;
    ?>
    <ul style="margin-left:<?=$style?>;"> /* this ul margin-left is the problem */
      <li ></li>
      ...
    </ul>
  </li>
</ul> 
```

我需要获取上一个列表项的宽度并计算当前边距。

我看到了一个带有 jQ​​uery 函数的示例`outerWidth()`，但我不知道如何在我的情况下使用它。

我在菜单发布后尝试了这个，但我做错了什么？

```
<pre><code>
    <script type=text/javascript>
        $(document).ready(function(){
            var number = $("#topmenu li").size();
            var marginSum = -10;   //the first

            for(i=2;i &lt; number; i++)
            {
                marginSum = marginSum - $("#topmenu li").slice(0,(i-1)).outerWidth(true); //OR
                marginSum = marginSum - $("#topmenu li:eq("+(i-1)+")").outerWidth(true);

                alert("Μargin of "+i+": "+marginSum + " prev width:"+$("#topmenu li:eq("+(i-1)+")").outerWidth(true)+" Margin:"+marginSum);  //OR   
                alert("Μargin of "+i+": "+marginSum + " prev width:"+$("#topmenu li").slice(0,(i-1)).outerWidth(true)+" Margin:"+marginSum);    

                // $("#topmenu li").width(width);
            }
        }); 
    </script>
</code></pre> 
```

我相信该函数`outerWidth(true);`也会计算嵌套`ul`，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:40:34.383

这将需要在服务器端进行大量工作，因为除非您进行大量计算，例如计算字符数，字体大小和粗细可能是边框或边距和填充，否则无法知道元素的宽度，无论如何~~最好使用 Javascript 在客户端执行此操作的方法，或者像您使用 jQuery 所说的那样~~。
最好用纯 CSS 来做，这里有一些关于如何做到这一点的视频教程：

*   [通过 Free Web Tutorials 创建一个 100% CSS 下拉菜单](http://www.youtube.com/playlist?list=PL46837BE17F92FAD9)。
*   [亚当·科里的视频](http://www.youtube.com/watch?v=4PBa5juYwaA)。
*   [PHPAcademy 的视频](http://www.youtube.com/watch?v=2aA8eB6P2sM)。

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T18:51:23.620

我已经解决了这个问题。这是我的代码：

```
<script>
    function setMenuInPlace(){
        //fix ul category menu
        $('.dropdown_top .dir').css({'margin-left' : '0'});
        var totalLis_w = num =0;
        var dtopWidth = $('#topmenu .dropdown_top').width();

        //set nested ul in place
        var mLeft = $('.dropdown_top').offset().left;
        var myLeft = mLeft + 2; //Left per 2 pixels for leaving a small space
        // alert (mLeft);
        $('.dropdown_top li ul').offset({left : myLeft});

        //calculate free space for lis
        $('.dropdown_top .dir').each(function(){
            num ++;
            totalLis_w += $(this).outerWidth(true);
            // alert($(this).outerWidth(true));
        });
        var dtop_free = dtopWidth - totalLis_w;
        var mLeft_Li = (dtop_free/ num) -2 ; //leaving a small space 2 pixels.
        if(mLeft_Li > 0)
             $('.dropdown_top .dir').css({'margin-left' : mLeft_Li});
        // alert(\"lis width\"+totalLis_w+\" free space:\"+dtop_free+\" mLeft\"+mLeft_Li);
    }
    ( function($) {
        $(document).ready(function(){
            setMenuInPlace();
        });
        //$(window).load(function(){
        // setMenuInPlace();
        //});
        $(window).resize(function() {
            setMenuInPlace();
        });
    } ) ( jQuery );
</script> 
```

类“dir”是主要类别列表项：`<li class="dir">`.

# android - 如何通过共享按钮从“EditText”或“文本框”共享文本

> ID：15449562
> 
> 赞同：0
> 
> 时间：2013-03-16T12:58:00.133
> 
> 标签：android

我的应用程序中有一个文本框（EditText）和一个按钮，我想要做的是，当任何人点击按钮时，文本框（EditText）中写入的文本会被复制并且此文本可以共享到任何应用程序，例如作为 - 消息传递、Gmail、Ymail 等。现在我正在做的是从“EditText”中获取文本并将其存储到一个新变量（字符串）中，比如“a”，现在应用 Intent“ACTION_SEND_MULTIPLE”

这是意图的代码

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE);
emailIntent.setType("text/plain");
emailIntent.putExtra(Intent.EXTRA_EMAIL, new String[] {"example@gmail.com"});
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "a");
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, a);
startActivity(Intent.createChooser(emailIntent, "Share it via...")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:11:40.910

您可能需要“createChooser”：

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("text/plain");
intent.putExtra(Intent.EXTRA_TEXT, edittext.getText().toString());
startActivity(Intent.createChooser(intent, "chooser title")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:02:25.930

我不确定您的问题是什么，但这就是您从 editText 获取文本的方式

```
String mString= et.getText().toString(); 
```

然后放到分享意图中

```
Intent shareIntent = new Intent(Intent.ACTION_SEND);
shareIntent.putExtra(Intent.EXTRA_TEXT, mString);
shareIntent.setType("text/plain");
startActivity(shareIntent); 
```

如果您只想将其作为电子邮件发送，并且只允许电子邮件客户端响应意图，则如下所示。

```
Intent send = new Intent(Intent.ACTION_SENDTO);
String uriText = "mailto:" + Uri.encode("mail to address") 
   + "?subject=" + Uri.encode("subject here") 
   + "&body=" + Uri.encode("body here");
Uri uri = Uri.parse(uriText);
send.setData(uri);
startActivity(Intent.createChooser(send, "Send...")); 
```

这允许您输入主题字段和 mailto 字段...等

# python - 使用（尝试）递归来反转列表中的列表

> ID：15449563
> 
> 赞同：2
> 
> 时间：2013-03-16T12:58:00.337
> 
> 标签：python

```
def is_list(p):
    return isinstance(p, list)

def deep_reverse(p):
    initial = []
    for v, e in enumerate(p):
        if is_list(e):
            #print p[v][::-1]
            initial.append(p[v][::-1])
            deep_reverse(e)
    return initial

p = [1, [2, 3, [4, [5, 6, [7, 8]]]]]
print deep_reverse(p) 
```

我得到`[[[4, [5, 6, [7, 8]]], 3, 2]]`了，至少是预期的（我还没有费心弄清楚如何不丢失第一个列表`[1[...]]`）`[[[[6, 5, [8, 7]], 4], 3, 2]]`。

如您所见，代码仅反转`[ [2, 3]]`-> [[3, 2]]。我做错了什么？我没有想过吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T13:05:09.997

我会这样做：

```
def deep_reverse(p):
    return [deep_reverse(x) if isinstance(x, list) else x for x in p[::-1]]

p = [1, [2, 3, [4, [5, 6, [7, 8]]]]]
print deep_reverse(p)   #  [[[[[8, 7], 6, 5], 4], 3, 2], 1] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T13:30:55.703

基于[Pavel Anossov 的](https://stackoverflow.com/a/15449630/722121)更通用的 Pythonic 答案如下：

```
def deep_reversed(seq):
    return [deep_reversed(x) if (isinstance(x, collections.Sequence) and 
                                not isinstance(x, str)) else x 
            for x in reversed(seq)] 
```

请注意，这适用于 Python 3.x，在 Python 2.x 中，您将希望[`isinstance(x, basestring)`](http://docs.python.org/2/library/functions.html#basestring)允许使用 Unicode 字符串。

这个答案很好，因为它可以与任何充当序列的对象一起正常工作——无论是列表、元组还是自定义类。这意味着它更加灵活。

编辑：如果您希望它在内部反转字符串：

```
def deep_reversed(seq):
    for x in reversed(seq):
        if isinstance(x, collections.Sequence):
            if isinstance(x, str):
                yield "".join(reversed(x))
            else:
                yield deep_reversed(x)
        else:
            yield x 
```

同样，在 2.x 中，使用`isinstance(x, basestring)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T13:04:22.073

在对您的递归调用中，`deep_reverse(e)`没有使用返回值。看起来好像您期望它修改输入列表

你可以把它改成这样：

```
def deep_reverse(p):
    initial = []
    for e in p[::-1]:
        if is_list(e):
            initial.append(deep_reverse(e)])
        else:
            initial.append(e)
    return initial 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-16T13:20:39.317

已经有很多不错的解决方案，但也许这是您正在尝试的算法：

```
def is_list(p):
    return isinstance(p, list)

def deep_reverse(p):
    initial = p[::-1] # reverse this level
    for v, e in enumerate(initial): 
        if is_list(e): # for all the sublist in this level
            initial[v] = deep_reverse(e) # recursively call deep_reverse to reverse the sublist
    return initial

p = [1, [2, 3, [4, [5, 6, [7, 8]]]]]
print deep_reverse(p) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-16T13:06:34.663

这将解决您的目的：

```
import collections
def dr(p):
     r=[]
     for i in p:
      if isinstance(i,collections.Iterable):
       r.append(dr(i))
      else:
       r.append(i)
     return r[::-1] 
```

# sql - 在 Sybase 过程中从表中选择 TOP 1 * 失败

> ID：15449565
> 
> 赞同：4
> 
> 时间：2013-03-16T12:58:05.720
> 
> 标签：sql, sybase, sap-ase, sybase-asa

我试图在不使用 RowCount 函数的情况下从 Sybase 表中仅获取一条记录，即使“WHERE 条件”返回多个结果。

```
SELECT TOP 1 EMPLOYEE_NAME FROM EMPLOYEES WHERE EMPLOYEEID > 50 
```

仅使用一条记录成功运行，

然而

```
SELECT TOP 1 EMPLOYEE_NAME FROM EMPLOYEES WHERE EMPLOYEEID > 50 
```

在 Sybase 过程中作为子查询写入时失败

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T13:47:43.093

仅在外部查询中支持顶部，这是[链接](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc00641.1502/html/nfg1502/CHEHFFJJ.htm)

对于我使用的有序数据，我使用的是 Sybase 中的 Top 1，例如：

```
SELECT  EMPLOYEE_NAME FROM EMPLOYEES WHERE EMPLOYEEID > 50 HAVING EMPLOYEEID = MIN(EMPLOYEEID) 
```

我希望它有点帮助。GL！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-09-09T09:59:07.857

我知道这已经很晚了，但是对于其他人来说，子查询中的 TOP 可以在 sybase 最新版本中使用。

# sql-server - 如何使用 SQL Server LocalDb 批量添加多个用户到角色

> ID：15449570
> 
> 赞同：0
> 
> 时间：2013-03-16T12:58:20.647
> 
> 标签：sql-server

我有以下代码：

```
 WebSecurity.CreateUserAndAccount("r12345678", "abcdefgh", false);
    WebSecurity.CreateUserAndAccount("m12345678", "abcdefgh", false);
    System.Web.Security.Roles.CreateRole("Author");
    System.Web.Security.Roles.CreateRole("Admin");
    System.Web.Security.Roles.CreateRole("Super");
    System.Web.Security.Roles.AddUserToRole("r12345678", "Author");
    System.Web.Security.Roles.AddUserToRole("r12345678", "Admin");
    System.Web.Security.Roles.AddUserToRole("r12345678", "Super");
    System.Web.Security.Roles.AddUserToRole("m12345678", "Author");
    System.Web.Security.Roles.AddUserToRole("m12345678", "Admin"); 
```

前 5 行运行良好，但是当涉及到这一行时：

```
 System.Web.Security.Roles.AddUserToRole("r12345678", "Super"); 
```

我得到以下信息：

```
The INSERT statement conflicted with the FOREIGN KEY constraint "webpages_Roles_UserProfiles_Target". The conflict occurred in database "T12345", table "dbo.UserProfile", column 'UserId'.
The statement has been terminated. 
```

我不明白为什么会这样。我有一个 100% 新鲜的数据库。事实上，我删除了数据库并重新创建。这是我的 SQL 定义：

```
CREATE TABLE [dbo].[webpages_UsersInRoles] (
    [RoleId] INT NOT NULL,
    [UserId] INT NOT NULL,
    PRIMARY KEY CLUSTERED ([RoleId] ASC, [UserId] ASC),
    CONSTRAINT [webpages_Roles_UserProfiles_Source] FOREIGN KEY ([RoleId]) REFERENCES [dbo].[webpages_Roles] ([RoleId]) ON DELETE CASCADE,
    CONSTRAINT [webpages_Roles_UserProfiles_Target] FOREIGN KEY ([UserId]) REFERENCES [dbo].[UserProfile] ([UserId]) ON DELETE CASCADE
); 
```

我的 UserProfile 表包含：

```
UserId  UserName
1   r12345678
2   m12345678 
```

我的 UsersInRoles 表包含：

```
RoleId  UserId
1       1
1       2 
```

我的角色表包含​​：

```
1   Author
2   Admin
3   Super 
```

有谁知道为什么会触发外键约束

更新：

请注意，我尝试了以下方法，但这也不起作用。它给出了类似的错误：

```
Roles.AddUsersToRoles(new[] {"r12345678"}, new[] {"Author","Admin","Super"});
Roles.AddUsersToRoles(new[] {"m12345678" }, new[] { "Author", "Admin", "Super" }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:04:34.457

我也遇到过这个问题，似乎 addUserToRole 将 userID 插入到 roleID 列中，将 Role ID 插入到 UserID 列中，这意味着它找不到等于 3 的 userId 并因此给出错误消息.

# java - 线程“主”java.lang.UnsatisfiedLinkError 中的异常：RunnerClass.parsecmdline(ILjava/lang/String;)V

> ID：15449573
> 
> 赞同：4
> 
> 时间：2013-03-16T12:58:34.697
> 
> 标签：java, c, exception, java-native-interface, unsatisfiedlinkerror

我有一个测试用例，我试图使用 JNI 从我的 Java 程序中访问 C 代码。涉及的步骤如下：

**1.调用本地方法的Java程序：**

```
public class RunnerClass{
    public native void win32_svc_install();
    static{
        System.loadLibrary("testDll");
                System.out.println("library loaded successfully");   
    }
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        new RunnerClass().win32_svc_install();
    }

} 
```

**2\. 现在，在`.class`生成文件并从相应的`.h`文件创建之后，我将本地方法实现放在`.c`文件中。**

```
 /* DO NOT EDIT THIS FILE - it is machine generated */
//RunnerClass.h

#include <jni.h>
/* Header for class RunnerClass */

#ifndef _Included_RunnerClass
#define _Included_RunnerClass
#ifdef __cplusplus
extern "C" {
#endif/*
 * Class:     RunnerClass
 * Method:    nx_win32_svc_install
 * Signature: ()V
 */
JNIEXPORT void JNICALL Java_RunnerClass_win32_1svc_1install
  (JNIEnv *, jobject);#ifdef __cplusplus
}
#endif
#endif 
```

该`RunnerClass.c`文件中包含本机方法的实现。该方法的确切作用是调用`ServiceManager`windows 来使用它。我的 Java 程序需要执行这些操作。

现在问题出现在`testDll.dll`创建之后。在解释 Java 代码之前，我`testDll`在`java.library.path`.

现在，当我*运行*我的程序时，我的库被加载，但它抛出`UnsatisfiedLinkError`了本地方法。确切的错误如下：

```
Exception in thread "main" hello ,java.lang.UnsatisfiedLinkError: RunnerClass.win32_svc_install(ILjava/lang/String;)V
    at RunnerClass.win32_svc_install(Native Method)
    at RunnerClass.main(MainWs.java:58) 
```

我做了很多研究并且到目前为止理解抛出异常是因为程序无法在正在加载的库中找到本机方法的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T22:19:49.480

异常与您的代码不匹配。在 Java 中，您将函数声明为

```
public native void win32_svc_install(); 
```

在 c++ 中，您将函数声明为

```
JNIEXPORT void JNICALL Java_RunnerClass_win32_1svc_1install (JNIEnv *, jobject); 
```

我认为它应该被宣布为

```
JNIEXPORT void JNICALL Java_RunnerClass_win32_svc_install (JNIEnv *, jobject); 
```

但是除了c++声明中奇怪的“1”之外，似乎还有另一个问题。这两个函数都被正确地声明为具有零参数的 void 函数。

但是您的异常指出，它正在寻找一个同名的 void 函数，但带有一个整数和一个字符串参数：

```
RunnerClass.win32_svc_install(ILjava/lang/String;)V 
```

在查看您的代码时，我无法想象为什么。我试图通过重命名我的一个 C++ 函数来重现它；以下不满意的链接异常正确地说明了定义的参数。

# c# - 为多个订阅者引发域事件

> ID：15449577
> 
> 赞同：2
> 
> 时间：2013-03-16T12:59:05.060
> 
> 标签：c#, domain-events

我说要研究领域事件模式并阅读了很多关于该主题的资源，但我找不到满足我们要求的好方法。基本上，我们有一个服务/域层，它使用简单的 CQRS 实现包装用于读取/写入的存储库层。我们有一个使用此服务/域层的 ASP.NET Mvc 应用程序。整个应用程序与 Autofac 绑定在一起，我希望发生以下情况：

当通过在服务层上调用say“CreateNews”来创建新闻项目时，将需要引发一个事件，如下所示：

```
public void CreateNews(Domain.Entities.News.NewsBO news)
{
  ValidateBusinessObject(news);

  var entityNews = AutoMapper.Mapper.Map<Repositories.Entities.News.News>(news);
  NewsCommandRepository.Create(entityNews);

  _domainEventManager.Register<NewsCreatedDomainEvent>(x => x.News = news);
} 
```

这一切都发生在事务中，我不想在保存完成之前真正引发事件，所以在我们的保存更改方法中我想这样做：

```
public void SaveChanges()
{
  _repoCommandManager.SaveChanges();

  _domainEventManager.RaiseEvents();
} 
```

然后在我们的 ASP.NET Mvc 应用程序中，我想要一个 IHandler 的实现，如下所示：

```
public class NewsCreatedDomainEventCacheHandler : IHandles<Project.Services.Domain.Events.News.NewsCreatedDomainEvent>
{ 
    public void Handle(Services.Domain.Events.News.NewsCreatedDomainEvent @event)
    {
      // In here we would update the cache or something else particular to the web layer
    }
} 
```

我无法弄清楚如何从 save 方法引发此事件并在 Web.Mvc 应用程序中调用实现。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:33:57.990

我想我有一个如何为您执行此操作的示例，而且我碰巧也在使用 MVC 和 AutoFac！在我的具体示例中，我专注于命令/查询分离，但这样做我必须实现域事件模式。

首先阅读这篇博文，以便您了解事物如何组合在一起以及代码的外观： [http ://www.nootn.com.au/2013/03/command-query-separation-to-better .html](http://www.nootn.com.au/2013/03/command-query-separation-to-better.html)

因此，我建议安装[DotNetAppStarterKit.Web.Mvc NuGet 包](http://nuget.org/packages/DotNetAppStarterKit.Web.Mvc/)，然后查看[Global.asax 文件](https://github.com/nootn/DotNetAppStarterKit/blob/master/DotNetAppStarterKit.SampleMvc/Global.asax.cs)，了解如何注册您需要的所有组件。您可以仔细阅读 SampleMvc 应用程序，了解诸如[Event Subscribers](https://github.com/nootn/DotNetAppStarterKit/tree/master/DotNetAppStarterKit.SampleMvc/DataProject/EventSubscriber)之类的内容。

我希望这对您有所帮助，并让您快速上手。您可以只使用 DotNetAppStarterKit 的事件发布者/订阅者部分，而无需使用命令和查询。

# php - 在文件名中使用变量的 include 语句

> ID：15449578
> 
> 赞同：1
> 
> 时间：2013-03-16T12:59:11.847
> 
> 标签：php, variables, include, filenames

（请耐心等待，这确实与包含有关。）我正在等待域转移并尝试提前在新的托管服务上设置它。我意识到在旧网站上所有的路径名都是绝对的，所以我在新主机上的所有链接都指向旧主机上的页面。我决定让它们都是相对的（也用于未来可能的移动）。我第一次这样做是这样的：

索引.php

```
include ('./header.php'); 
```

头文件.php

```
include "./panel.php"; 
```

面板.php

```
Contents of panel. 
```

这有效，我的页面显示：

面板的内容。

然后我决定为域设置一个变量，因为我想从子目录中的文件中包含这个头文件，并且我可以使用域变量来创建一个绝对路径。现在我有一个临时域名，稍后我可以在转移完成时将其更改为真实域名。所以我将 header.php 更改为：

```
$domain="http://tempdomain.com"; //I can change this after the transfer 
$panel=$domain."/panel.php";
echo $panel;
if ((include $panel) !== 1)
{
  echo "<br>include failed";
} 
```

我得到的是：

[http://tempdomain.com/panel.php](http://tempdomain.com/panel.php)
包含失败

我查看了各种站点的包含语法，但在我的代码中找不到任何错误。所有这些文件都在 / 目录中。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:20:49.947

包含时，您必须提供结构化的目录，而不是 url。

您的托管服务器路径可能是 home/public/www/htdocs/your_directory_name/panel.php 之类的。然后它将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T13:41:56.963

如果 1\. 服务器的 php.ini 应该允许的话，remort include 也是可行的。2\. 将被包含的文件不应在包含之前预先处理。这意味着它必须返回未处理的代码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T13:58:13.217

*   首先，`allow_url_fopen`标志必须设置在`php.ini`. 否则远程 include() 无法完成。跑`var_dump(ini_get("allow_url_fopen"));`看看是不是这样。

    *   其次，“PHP 4.3.0 之前的 Windows 版本的 PHP 不支持通过此函数访问远程文件，即使启用了 allow_url_fopen 也是如此。” - 见[PHP 文档](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)

    *   第三，您的远程 PHP 脚本必须生成*有效的 PHP 代码作为输出*。如果您通过 http 包含（），则*不会*包含脚本本身，而是包含其输出。

# installation - brew install libyaml 错误

> ID：15449581
> 
> 赞同：11
> 
> 时间：2013-03-16T12:59:21.847
> 
> 标签：installation, homebrew, libyaml

```
$ brew install libyaml
==> Downloading http://pyyaml.org/download/libyaml/yaml-0.1.4.tar.gz
Already downloaded: /Library/Caches/Homebrew/libyaml-0.1.4.tar.gz
==> ./configure --prefix=/usr/local/Cellar/libyaml/0.1.4
==> make install
Warning: Could not link libyaml. Unlinking...
Error: The `brew link` step did not complete successfully
The formula built, but is not symlinked into /usr/local
You can try again using `brew link libyaml'
==> Summary
  /usr/local/Cellar/libyaml/0.1.4: 7 files, 336K, built in 9 seconds 
```

OS X 10.8.2 如何解决这个问题？我应该怎么办 ？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-26T02:25:16.040

Start with `brew doctor`which 将向您显示 brew 设置的错误。

您可能会看到如下内容：“警告：/usr/local/lib/pkgconfig 不可写。”

它会给您以下建议：“您可能应该 chown /usr/local/lib/pkgconfig”。

这表示： `sudo chown {your-user-name} /usr/local/lib/pkgconfig`

然后，您需要将文件与此链接：`brew link libyaml`

如果这不起作用，希望输出`brew doctor`将为您提供足够的继续搜索。

# javascript - 如何在jQuery中读取数组的每个元素？

> ID：15449582
> 
> 赞同：-6
> 
> 时间：2013-03-16T12:59:23.570
> 
> 标签：javascript, jquery

我有一个这样的数组

```
var ids = [
  liRightSkills, liRightAchievements, liRightGetRatings, liRightSpecialization, liRightOrgChart, liRightMemberships
]; 
```

如何使用 jQuery 读取其中的每个元素？

我已经尝试过了，但它不起作用

```
jQuery.each(ids, function() {
  $('#' + $(this).val()).show();
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T13:00:51.237

在 JavaScript 中

```
for (i = 0; i < ids.length; ++i) {
    alert(ids[i]);
} 
```

在 jQuery 中

```
$.each(ids, function(index, value) {
  alert(index + ': ' + value);
}); 
```

# c# - 估计进度条的循环时间

> ID：15449586
> 
> 赞同：0
> 
> 时间：2013-03-16T12:59:37.337
> 
> 标签：c#, loops, progress-bar

我目前在 C# 中使用循环来生成文件，但程序需要几秒钟才能真正做到这一点，我觉得程序用户会受益于一个更新的进度条，告诉他们循环有多远，这样他们就可以估计循环何时结束并生成所有文件。

我想知道是否有一种方法可以计算完成循环所需的时间或使用循环更新进度条以显示循环剩余的进度。

这是我的循环。

```
String GeneratedLevelName;
int levelx = 0;
int levely = 0;

for (int i = 0; i < GmapLevelArea; i ++) {
  if (levelx >= (GmapWidth - 1)) {
    levelx = 0;
    levely ++;

    GeneratedLevelName = (GmapPrefix + "_" + levelx + "_" + levely + ".nw");
    File.Copy(ApplicationDirectory + TemplateFileName, GmapDirectory + GeneratedLevelName);
    GmapFile.AppendLine('"' + GeneratedLevelName + '"' + ",");
  } else {
    levelx ++;

    GeneratedLevelName = (GmapPrefix + "_" + levelx + "_" + levely + ".nw");
    File.Copy(ApplicationDirectory + TemplateFileName, GmapDirectory + GeneratedLevelName);
    GmapFile.Append('"' + GeneratedLevelName + '"' + ",");
  }
} 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:13:16.353

由于很难对 File.Copy 进行计时，我认为您应该将进度条建立在已处理的文件总数上。

所以如果你有一个进度条：pb

```
pb.Minimum = 0;
pb.Maximum = GMapLevelArea; 
```

然后将进度条的值设置为你我看重

```
pb.Value = i; 
```

现在，当我通常使用这样的进度条时，我通常不会更新任何迭代。我通常在几次迭代后更新。

因此，我通常会检查迭代次数：

```
if(i % 10 == 0) //only true when i is a multiple of 10
 pb.Value = i; 
```

然后在循环结束时，如果它不是您的更新的倍数，您可以将进度条设置为其最大值或将其重置为零以使其不完成。

```
pb.Value = GMapLevelArea; or pb.Value = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:09:29.287

这取决于您生成的文件的一致性（它们都需要一秒钟，还是比其他文件需要更长的时间？）以及您是否知道要生成多少。在最简单的情况下，您可以通过获取要生成的文件数来估计时间。例如，如果您创建 50 个文件，则可以在生成文件后将进度条增加 2%。

# android - AsyncHttpClient 下载大型 Pdf 文件内存不足错误

> ID：15449589
> 
> 赞同：1
> 
> 时间：2013-03-16T12:59:54.653
> 
> 标签：android

我正在构建我的第一个 Android 应用程序并遇到了一个小问题。使用 AsyncHttpClient 下载我得到的 Pdf 文件

```
 "E/dalvikvm-heap(30871): Out of memory on a 21893326-byte allocation." 
```

任何大于 15 Mb 的错误。最大 15 Mb 的文件下载就好了。有没有可以解决这个问题的设置？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:13:41.427

> 有没有可以解决这个问题的设置？

并不真地。假设您正在使用`BinaryHttpResponseHandler`，它将为您提供内存中的整个文件，这对于较大的文件是不可能的。

您需要`BinaryHttpResponseHandler`使用修改后的`sendResponseMessage()`方法创建自己的版本，将结果直接流式传输到文件中。或者，找到另一个为您执行此操作的 HTTP 客户端库。

# magento - 禁用邮政编码 Magento 1.6.2

> ID：15449590
> 
> 赞同：0
> 
> 时间：2013-03-16T13:00:01.003
> 
> 标签：magento

好了，我的网站快完成了。我已经安装了 IWD One page checkout 并且我将邮政编码条目设置为“隐藏”但我也希望从“我的帐户”中删除此字段。请问有什么提示吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:15:01.157

`My Account`您可以在这些文件的前端部分中找到邮政编码字段的代码：

```
app/design/frontend/PACKAGE/THEME/template/customer/form/register.phtml
app/design/frontend/PACKAGE/THEME/template/customer/form/address.phtml
app/design/frontend/PACKAGE/THEME/template/customer/address/edit.phtml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:49:47.487

echo $this->__('Zip/Postal Code')

this is the code line that you will find in .phtml files. Use Path Hint to get .phtml path.

So delete that line from customer/form/register.phtml and other .phtml files.

# vim - Vim：执行当前文件？

> ID：15449591
> 
> 赞同：92
> 
> 时间：2013-03-16T13:00:07.413
> 
> 标签：vim

如果我有一个在 Vim 中打开的带有 shebang 行的文件（例如`#!/bin/bash`）并且该文件具有执行权限（即`chmod +x`）我知道我可以在不离开编辑器的情况下键入它来执行它：

```
:! %:p 
```

*   `:`用于命令模式
*   `!`运行 shell 命令
*   `%`引用当前缓冲区中的文件
*   `:p`使用当前文件的完整路径

这个频繁的任务有没有更短的捷径？

例如，有一个`ZZ`快捷方式`:wq`，等等。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-03-16T13:09:18.717

```
:!%:p 
```

，没有空格，更短。

如果您想要更短的快捷方式，可以创建自定义映射：

```
nnoremap <F9> :!%:p 
```

或更“助记符”：

```
nnoremap <leader>r :!%:p 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-02-24T17:12:52.317

如果您尚未设置权限，则可以运行：

```
:! sh % 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-09-21T15:39:51.920

如果您的文件名/目录路径中有空格，则前面的答案都不起作用。简单的修复。

```
:!"%:p" 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-03-16T16:05:48.740

在你执行了一次之后，短片`:!!`将重复它。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-02-15T16:32:55.287

启动 vi 时，明确指定文件路径，例如“vi ./blablabla”

```
vi ./yourscript.pl 
```

然后开始`!%`

另一个变体是像这样调用 vi 命令

```
!./% 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-16T13:10:03.140

您可以将键映射添加到 .vimrc

```
map <F5> :!% 
```

# jquery - 如何使用jquery在html中插入

> ID：15449595
> 
> 赞同：-5
> 
> 时间：2013-03-16T13:00:26.557
> 
> 标签：jquery, html, css

我有一个这样的 html 表

```
<table>
   <tr>
       <td>
          1
       </td>
       <td>
           2
       </td>
       <td>
           3
       </td>
       <td>
           4
       </td>
   </tr>
</table> 
```

结果将是

1 2 3 4

我希望结果是

1 2

3 4

但在运行时使用 jquery

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:25:31.963

**使用 jQuery**

*HTML*

```
<table id="table1">
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
    </tr>
</table> 
```

*jQuery*

```
$("#table1 td:first-child").css("float", "left");
$("#table1 td:nth-child(2)").css("display", "block");
$("#table1 td:nth-child(3)").css("float", "left");
$("#table1 td:nth-child(4)").css("float", "left"); 
```

**使用 CSS**

您也可以使用 css 而不使用 jquery 来执行此操作

*HTML*

```
<table id="table2">
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
    </tr>
</table> 
```

*CSS*

```
#table2 td
{
    float: left;
}
#table2 tr > td:first-child + td
{
    display: block;
    float: none;
} 
```

[例子](http://jsfiddle.net/axrwkr/JpCBp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:07:46.293

```
<table>
   <tr>
     <td>1</td>
     <td>2</td>
     <td>3</td>
     <td>4</td>
   </tr>
</table> 
```

它有效，但不太正确））

```
$(document).ready(function(){
    $("td:even").css({"display":"block","float":"left", "clear":"left"});
    $("td:odd").css({"display":"block", "float":"left"});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T13:52:41.267

可以通过将最后 2 个单元格放入新行来重组表格：

```
$('tr').each(function(){
    $(this).after( $('<tr>').append( $(this).find('td:gt(1)')))
}); 
```

演示：http: [//jsfiddle.net/Fyvwd/](http://jsfiddle.net/Fyvwd/)

# coffeescript - CoffeeScript 中的“{createServer} = require 'connect'”是什么意思？

> ID：15449602
> 
> 赞同：0
> 
> 时间：2013-03-16T13:01:55.930
> 
> 标签：coffeescript

在这个文件中：[https ://github.com/josh/nack/blob/master/src/server.coffee](https://github.com/josh/nack/blob/master/src/server.coffee)

代码是：

```
{createServer} = require 'connect'
{createPool}   = require './pool' 
```

我想知道返回值是多少`require 'connect'`

是什么`{}`意思`{createServer}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:37:19.447

{} 是 CoffeeScripts 解构赋值。

```
//file connect.js 
...
module.exports = {
   createServer: function(){...},
   someOtherExport: function() {...},
   somethingDifferentAgain: function() {...}
}; 
```

然后在您的模块中，您可以只导入 createServer

```
{createServer} = require "connect" 
```

或者您可以导入连接模块中定义的所有符号

```
{createServer,
 someOtherExport,
 SomethingDifferentAgain } = require "connect" 
```

如果您想知道从 connect 导出的内容，您应该简单地对其进行迭代

```
theModule = require 'connect'
for key, value of theModule
    console.log "#{key}: - #{value}" 
```

# php - 即将发生的事件列表与自定义字段上的日期

> ID：15449604
> 
> 赞同：0
> 
> 时间：2013-03-16T13:02:19.270
> 
> 标签：php, wordpress, web, custom-post-type

我想显示带有即将到来的订单日期的事件列表（例如：2013 年 3 月 1 日、2013 年 3 月 23 日、2013 年 3 月 2 日）。下面是我用来从我的数据库中过滤掉帖子的查询：

```
query_posts( 'post_type=myevents&meta_key=_datepicker&orderby=meta_value&order=ASC&showposts=20'); 
```

这不起作用，通过此查询，我按以下顺序列出了我的事件：

2013 年 4 月 7 日、2013 年 4 月 18 日、2013 年 6 月 19 日、2013 年 10 月 20 日、2013 年 3 月 23 日、2013 年 3 月 24 日

三月份发生的事件终于被列出来了。一开始也没有订单。

我正在使用自定义字段来存储事件日期，其日期格式为 2013 年 3 月 23 日，但我以 2013 年 3 月 23 日的格式显示前端日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:21:25.357

目前您正在订购

**2013 年 4 月7**日、2013年 4 月**18**日、2013年 6 月**19**日、2013 年10 月**20**日、2013年 3 月**23**日、2013 年 3 月**24**日

由于您的 orderby=meta_value 未设置为考虑实际的“日期”，因此它永远不会正确排序。如果要正确排序，则需要考虑日期、月份和年份。以下参考可能会帮助您完成您想要的。

参考： [http ://codex.wordpress.org/Template_Tags/query_posts#Example_4](http://codex.wordpress.org/Template_Tags/query_posts#Example_4)

# ruby-on-rails - 如何从使用 Capybara 的 Cucumber Step 获取整个页面的响应 HTML？

> ID：15449611
> 
> 赞同：0
> 
> 时间：2013-03-16T13:03:15.740
> 
> 标签：ruby-on-rails, ruby, cucumber, bdd

在运行我的规范时，我收到错误，Capybara 无法根据标签等找到元素。然后我想我想要 HTML，或者以某种方式调试错误。

这是 /features/merge.feature

```
#Just a test!
Scenario: Cannot merge articles when not admin
    Given I am not an admin
    When I am on the edit article page
    Then I should not see the "merge articles" form 
```

这是：/feature/step_definitions/merge.rb - 它只包含“Given”语句！

```
Given /am not an admin$/ do
  visit '/accounts/login'
  puts "TEZT"
  puts page.native
  puts page.native.text
  fill_in 'user_login', :with => 'editor_rico'
  fill_in 'user_password', :with => 'a'
  click_button 'Login'
end

Given /^I am an admin$/ do
  visit '/accounts/login'
  fill_in 'user_login', :with => 'admin_rico'
  fill_in 'user_password', :with => 'a'
  click_button 'Login'
end 
```

然后我得到这个错误：

```
Scenario: Cannot merge articles when not admin    
# features/article_merging.feature:20
Given I am not an admin                 
#features/step_definitions/article_steps.rb:39
cannot fill in, no text field, text area or password field with id, name, or label
'user_login' found (Capybara::ElementNotFound)
(eval):2:in `fill_in'
./features/step_definitions/article_steps.rb:44:in `/am not an admin$/'
features/article_merging.feature:21:in `Given I am not an admin' 
```

在这里和 Cucumber 一起工作很艰难..

1）为什么我得到上述

2）我如何调试它，我想看HTML代码！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T17:26:21.627

当您的页面 HTML 不包含任何具有 name、id 或 label 的元素时，就会出现`input`此`textarea`错误`'user_login'`。如果将`launchy`gem 添加到 Gemfile 中，您将能够看到页面的外观：

在你的`Gemfile`：

```
group :test do
  gem 'launchy'
  gem 'capybara'
  ...
end 
```

然后，在您的`feature/step_definitions/merge.rb`文件中：

```
Given /^I am not an admin$/ do
  visit '/accounts/login'
  save_and_open_page
end 
```

这`save_and_open_page`将在您的浏览器中打开当前页面，因此您可以检查 HTML 并查看它的外观。

希望能帮助到你！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T13:14:02.250

它认为上述代码的问题是“页面”在您结束该部分之后才可用。

尝试将您的“看跌”放入“何时”或“然后”步骤

您可以按如下方式查询页面（假设您使用的是 RSpec）

```
page.should have_content 'foo'
page.should have_selector 'h1', text: => 'Hello dave' 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-25T15:39:22.290

您还可以通过打印`page.body`到标准输出来查看 HTML 响应。

```
Given /^I am not an admin$/ do
  visit '/accounts/login'
  puts page.body
end 
```

# r - 为什么 mapply 多次重复同一个列表？

> ID：15449612
> 
> 赞同：3
> 
> 时间：2013-03-16T13:03:19.373
> 
> 标签：r

请让我首先提供显示问题的合成数据集：

```
Do <- rep(c(0,2,4,6,8,10,15,20,30,40,45,50,55,60,65,70,80,85,90,92,94,96,98,100), each=16,times=16)
Cl <- rep(c("K", "Y","M","C"), each= 384, times=4)
In <- rep(c("A", "S"), each=3072)
Sa <- rep(c(1,2), each=1536)
Data <- rnorm(6144)
DataFrame <- cbind.data.frame(Do,Cl,In,Sa,Data); head(DataFrame)
rm(Do,Cl,In,Sa,Data)
attach(DataFrame) 
```

接下来，我将“DataFrame”对象拆分为多个列表，以避免不可预知的回收。基本上，我将每个数据子集放在一个单独的列表中，这样循环是可预测的，并且在我的模拟器中产生了正确的输出。

```
DFSplit <- split(DataFrame[ , "Data"], list(Do, Cl, In, Sa)) 
```

'DFSplit' 对象有 384 个列表

```
length(names(DFSplit)) 
```

然后我创建了函数“ids”来识别列表名称

```
ids <- function(Do, Cl, In, Sa){
    grep( paste( "^" , Do, "\\.",
                Cl, "\\.",
                In,
                "\\.", Sa,sep=""),
         names(DFSplit), value = TRUE)}

mapply(ids, Do, Cl, In, Sa, SIMPLIFY = FALSE) 
```

我知道每个“ids”参数的长度都是 6144。mapply 产生 384 个列表，每个列表重复 16 次。如何更改 ids 函数，以便 mapply 不会重复相同的名称 16 次。作为一个丑陋且成本高昂的解决方案，我使用了独特的；我需要一个更好的根本解决方案。

```
unique(mapply(ids, Do, Cl, In, Sa, SIMPLIFY = FALSE)) 
```

我还创建了一个对“DFSplit”列表进行操作的函数。它与以前的功能具有相同的问题。问题是，它接受前一个函数作为输入。

```
dG <- function(Do,Cl, In, Sa){
    dg <- 100*
                (1-10^-( DFSplit[[ids(Do,  Cl, In, Sa)]] - DFSplit[[ids(0, Cl, In, Sa)]])) /
                (1-10^-( DFSplit[[ids(100, Cl, In, Sa)]] - DFSplit[[ids(0, Cl, In, Sa)]])) - Do
    dg}

mapply(dG, Do, Cl, In, Sa, SIMPLIFY = FALSE) 
```

如果我可以说，我正在尝试做的是在 384 个列表中的每个列表中应用 dG 函数，但没有成功。我承认 dG 功能也需要修改，我不知道如何。我希望 dG 函数的输入是 384 个列表的名称，每个列表包含 16 个数字。我希望输出是应用了 dG 的 384 列表。

请随时提出不同的解决方案。重要的是我需要将“dG”函数应用于数据集。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T15:19:21.057

请仔细看看你*给* `mapply` 每个对象的长度`6144`。

```
 > length(Do)
  [1] 6144
  > length(Cl)
  [1] 6144
  > length(In)
  [1] 6144
  > length(Sa)
  [1] 6144
  > 
```

您正在提供`mapply` `6144`元组并要求它遍历每个元组。
它给你一个`6144`元素列表。

这正是你告诉它要做的事情

* * *

此外，只需复制和粘贴您的代码就会产生一个`6144`很长的列表，每个元素都包含`16`元素。

```
 .
  .
  [[6141]]
   [1]  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  1.421085e-14
  [12]  0.000000e+00  0.000000e+00  0.000000e+00 -1.421085e-14  0.000000e+00

  [[6142]]
   [1]  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  1.421085e-14
  [12]  0.000000e+00  0.000000e+00  0.000000e+00 -1.421085e-14  0.000000e+00

  [[6143]]
   [1]  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  1.421085e-14
  [12]  0.000000e+00  0.000000e+00  0.000000e+00 -1.421085e-14  0.000000e+00

  [[6144]]
   [1]  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  1.421085e-14
  [12]  0.000000e+00  0.000000e+00  0.000000e+00 -1.421085e-14  0.000000e+00 
```

因此，不是您描述的 1 个元素的 6144 个。

您收到了两条非常好的建议，一条来自@Arun，另一条来自@Paul Hiemstra。

也许您可以尝试描述您正在尝试完成的工作，这里的人们可以更好地帮助您。另外，请不要忘记回顾您之前的问题并投票并感谢那些给您有用的答案的人。

# php - 多用户访问时查询执行顺序

> ID：15449615
> 
> 赞同：0
> 
> 时间：2013-03-16T13:03:43.350
> 
> 标签：php, mysql

当用户执行相同的 PHP 文件时。

MySQL 查询按什么顺序执行？是这样的吗？

```
file-to-file(collect the query/by file)
Q1-Q2-Q3,Q1-Q2-Q3 
```

或者

```
time-to-time(according who executed first/by time)
Q1,Q1,Q2,Q2,Q3,Q3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:14:14.907

它基本上是不时的......就像先到先得一样。

另一个有趣的事情是当系统中有多个用户时，多个 php 实例正在运行。php-mysql 驱动程序负责所有这些并在每个实例中并行执行。当然，对于单个实例，系统根据先到先得的原则维护作业（查询）列表。

:)

# r - R 包 xtsExtra 问题以绘制多个 ts

> ID：15449616
> 
> 赞同：3
> 
> 时间：2013-03-16T13:04:06.160
> 
> 标签：r, time-series, xts

我的目标是获得 1 个情节，其中有多个带有自动图例的时间系列来识别系列。从 1996 年 1 月开始，在我的 CSV 文件中，我有 5 列（农业、食品、燃料、manu、矿石）。

```
library(xts)
library(xtsExtra)
RuChAgri <- read.csv("https://dl.dropbox.com/u/6421260/Forum/RuChAgri.csv", sep=";")
#transform csv data according to R ts 
RuChAgri <- ts(RuChAgri, start = c(1996, 1), frequency = 1)
#try to get 1 plot with multiple ts with an auto legend
plot.xts(RuChAgri, screens = factor(1, 1), auto.legend = TRUE) 
```

当我运行最后一行时，我收到错误：

```
Error in try.xts(x) : 
  Error in xts(x.mat, order.by = order.by, frequency = frequency(x),
 .CLASS = "ts",  :   NROW(x) must match length(order.by) 
```

有人知道我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T13:44:25.453

您的`ts`对象构造不正确。该系列是每月一次，所以频率应该是 12，而不是 1。

```
RuChAgri <- ts(RuChAgri, start=c(1996, 1), frequency=12) 
```

然后您应该将其转换为 xts 对象，然后`plot.xts`通过调用`plot`. 你真的不应该`plot.xts`直接调用，即使它试图将你给它的对象转换为 xts 对象......

```
x <- as.xts(RuChAgri)
plot(x, screens=factor(1, 1), auto.legend=TRUE) 
```

![在此处输入图像描述](../Images/805437fc08f5a5cc6d7132a61884ca4a.png)

# css - 与相邻兄弟选择器相反？

> ID：15449622
> 
> 赞同：14
> 
> 时间：2013-03-16T13:04:31.480
> 
> 标签：css, css-selectors

请检查这个小提琴 - [http://jsfiddle.net/vfMsS/](http://jsfiddle.net/vfMsS/)。我需要编写选择器来选择“活动”元素之后的元素和它之前的元素。“之前”部分似乎不起作用。如何选择之前的元素`a.active`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T13:31:52.787

就像 BoltClock 说的那样，在当今的浏览器中没有办法做到这一点。但是，我相信这在 CSS 中是可能的。

[CSS 选择器第 4 级](http://dev.w3.org/csswg/selectors4/)语法（具体参见[this](http://dev.w3.org/csswg/selectors4/#subject)），语法`E! + F`为“一个元素 E 在元素 F 之前”。

因此，在您的情况下，语法的`a! + a.active`含义是“带有标签 a 的元素在带有标签 a 且类处于活动状态的元素之前”。到今天为止，这还[没有在任何布局引擎中实现](http://en.wikipedia.org/wiki/Comparison_of_layout_engines_%28Cascading_Style_Sheets%29#Selectors)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T13:10:14.267

相邻兄弟选择器只向前看，不向后看。以前的相邻兄弟没有`-`组合子。

如果您只需要选择不在`.active`同一个父项中的任何内容，并且您不介意稍微减少浏览器支持，则可以使用`:not()`。如果您需要为 之后的样式指定不同的样式，则`.active`需要覆盖：

```
a:not(.active) { background:red }
a.active + a { background:yellow } 
```

同样，这假设它们总是共享同一个父级。

[jsFiddle 预览](http://jsfiddle.net/BoltClock/vfMsS/7)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-27T22:47:48.837

我正在寻找相同的解决方案来定位`.active`链接背后的元素

我为之前的任何元素设置了默认样式，`.active`然后使用兄弟选择器选择了该元素之后的所有元素。

`a.active { background: #ccc;} a.active ~ * { background: yellow } a { background: red }`

演示：[https ://codepen.io/ramiro-ruiz/pen/gBOPQL](https://codepen.io/ramiro-ruiz/pen/gBOPQL)

这对我有用，希望它有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-04T17:30:48.540

我不得不说，这是我有一段时间的问题，而我不太喜欢的一件事最终解决了这个问题`float: right`......。

在我的例子中，它是`input[type='radio'] + label`元素，并且由于 CSS 向前流动而不是向后流动，`~ input[type='radio'] + label`因此会在检查的元素之后选择所有兄弟姐妹。

因为，`float: right`负责获取“A、B、C”并将它们定位为“C、B、A”——我将 HTML 中单选元素的顺序从 1-6 更改为 6-1，并`float: right`使用 CSS 制作它们。

这样做是在渲染到浏览器时将它们反转回 1-6 的顺序。

现在，当我使用 时`~ input[type='radio'] + label`，它仍然以相同的方式定义样式（在我的情况下，它是标签的颜色），但是，现在被样式化的兄弟姐妹 - 在视觉上 - 前面的那些。

该线程已有一年多的历史，但如果有人需要示例，如果被问到，我会创建并发布一支笔。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-02T10:47:01.120

你为什么不尝试使用兄弟组合器？

```
a.active ~ a { background:red } 
```

[http://jsfiddle.net/VixedS/6x7d9vm7/](http://jsfiddle.net/VixedS/6x7d9vm7/)

# ssis - 等待 SSIS 中的某个时间戳

> ID：15449625
> 
> 赞同：1
> 
> 时间：2013-03-16T13:04:53.257
> 
> 标签：ssis, sleep

我有一个 MAIN SSIS 包，它在内部调用 2 个子包。

此 MAIN pkg 一起触发 2 个程序包（使用执行流程任务“dtexec /DTS”），并且有一个业务规则来查看某个时间戳的表列并等到该时间戳是今天的日期（此时间戳由第三方更新）。

我目前正在使用 foreach 循环来检查此时间戳，但是我使用 T-SQL 语句在每次重试之间休眠 10 分钟，即：

```
WAITFOR DELAY '00:10:00' 
```

我的问题是，这将等待挂起整个 MAIN SSIS pkg 还是仅挂起这个孩子 pkg？

此外，如果有更好的方式来实现此功能，以便两个子 pkg 可以并行运行而不会相互挂起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T23:12:26.317

它会挂起整个主要的 SSIS 包吗？如果您的主包在此步骤中有先例，那么是的，整个包将等待。您可能希望考虑从 SQL 代理作业调用主程序包，并定期执行 10 分钟。

但触发的想法更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:12:41.490

一些想法： 关于包设计：将两个子包放在父包控制面上的序列容器中。不要将它们“连接”在一起，以便它们并行运行。在序列容器外放置一个执行 sql 任务。此任务将检查第三方更新的时间戳。使用条件来决定是否执行序列容器。

你打算如何安排你的父母包？创建一个 sql 作业来运行包。如果日期正确，我们能否在表上创建一个触发器来调用该作业。相关链接：[http ://www.tek-tips.com/viewthread.cfm?qid=270744](http://www.tek-tips.com/viewthread.cfm?qid=270744)

这是一个有趣的问题。请发布您的发现和解决方案描述。祝你好运！

# playframework-2.0 - 从请求中播放框架绑定数据

> ID：15449627
> 
> 赞同：0
> 
> 时间：2013-03-16T13:05:05.107
> 
> 标签：playframework-2.0

我正在尝试通过调用将请求数据绑定到 pojo `.bindFromRequest()`。我已经为这个数组定义了一个简单的格式化程序，`String[]`并且需要将几个具有不同名称的参数映射到这个数组。因此，如果可能，我需要通过正则表达式或其他方式匹配它，而不是使用 java 字段名称映射表单字段名称的默认映射。所以我有 ：

```
public class ChallengeData {
    @Required
    String[] rivals;
} 
```

并且请求包含表单上的参数`?rival1=abc&rival2=def&rival3=ghi`等。因此，在执行此操作时，`Form.form(ChallengeData.class).bindFromRequest()`我希望将值放入竞争对手数组中。这可能吗？

# curl - 不从 PayPal 上的 curl 请求接收令牌

> ID：15449628
> 
> 赞同：0
> 
> 时间：2013-03-16T13:05:05.003
> 
> 标签：curl, paypal, token, sandbox

**问题**：
我没有收到来自 PayPal Sandbox 的令牌。

**备注**：
我已经注册了。我有一个客户 ID 和密码。
我试图登录我家的 Linux 服务器并通过 Putty 使用 curl。
我尝试通过 Putty 登录我的 Linux 网络托管服务器并使用 curl。
我什至尝试手动添加 -d "response_type=token" 或仅添加 response_type="token" 和各种组合以尝试遵循以下参考 URL 上的说明（即使提供的示例没有 response_type，因为说明要求它）。

**用于请求的代码**：
curl [https://api.sandbox.paypal.com/v1/oauth2/token](https://api.sandbox.paypal.com/v1/oauth2/token) \
-H "Accept: application/json" \
-H "Accept-Language: en_US" \
-u "EOJ2S-Z6OoN_le_KS1d75wsZ6y0SFdVsY9183IvxFyZp :EClusMEUk8e9ihI7ZdVLF5cZ6y0SFdVsY9183IvxFyZp" \
-d "grant_type=client_credentials"

**预期样本响应**：
{
“范围”：“https：//api.paypal.com/v1/payments/。* https：//api.paypal.com/v1/vault/credit-card https：//api.paypal .com/v1/vault/credit-card/.*",
"access_token":"EEwJ6tF9x5WCIZDYzyZGaz6Khbw7raYRIBV_WxVvgmsG",
"token_type":"Bearer",
"app_id":"APP-6XR95014SS315863X",
"expires_in":900
}

**参考网址**：
[https ://developer.paypal.com/webapps/developer/docs/integration/direct/make-your-first-call/](https://developer.paypal.com/webapps/developer/docs/integration/direct/make-your-first-call/)

**问题**：
我如何接收沙盒的令牌，以便我可以开始练习对 PayPal 的调用？提交 curl 请求后，我没有收到任何回复。它只是毫无错误地进入下一行。

我不被允许将其放入评论中。
**详细结果**：
[root@host ~]# curl https://api.sandbox.paypal.com/v1/oauth2/token -v \

> -H "Accept: application/json" \
> -H "Accept-Language: en_US" \
> -u "clientid-removed: secret-removed" \
> -d "grant_type=client_credentials"
> * 即将 connect() 到 api.sandbox。 paypal.com 端口 443 (#0)
> * 正在尝试 173.0.82.78... 已连接
> * 已连接到 api.sandbox.paypal.com (173.0.82.78) 端口 443 (#0)
> * 使用证书路径初始化 NSS：sql:/etc/ pki/nssdb
> * CAfile：/etc/pki/tls/certs/ca-bundle.crt
> CApath：无
> * NSS：未找到客户端证书（未指定昵称）
> * SSL 连接使用 SSL_RSA_WITH_3DES_EDE_CBC_SHA
> * 服务器证书：
> * 主题：CN=api.sandbox.paypal.com,OU=PayPal Production,O="PayPal, Inc.",L=San Jose,ST=California,C=US
> * 开始日期：9 月 11 日 00:00:00 2012 GMT
> * 到期日期：2013 年 9 月 17 日 23:59:59 GMT
> * 通用名称：api.sandbox.paypal.com
> * 发行人：CN=VeriSign Class 3 Secure Server CA - G2,OU=https:// 的使用条款www.verisign.com/rpa (c)09,OU=VeriSign Trust Network,O="VeriSign, Inc.",C=US
> * 服务器身份验证使用 Basic 和用户 'clientid-removed'
> POST /v1/oauth2/token HTTP /1.1
> 授权：基本
> QVVCOHdoQXZyT0pMbWswWjNyd0lYdkFsR0hvWTdBQld5bXluQ1lPRk13TGVMYU1KbTRvSXNDaWZqV3REOiBFTTZkdUJCYmhBUVlTbkliQWhGRTJtU0Zoc0E0R2ZYYWw0c253TEh1Nksp1FloVUDs=
> 用户代理：curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.13.1.0 zlib/1.2.3 libidn/1.18 libssh2/1.2.2
> 主机：api.sandbox.paypal.com
> 接受：应用程序/json
> 接受语言：en_US
> 内容长度：29
> 内容类型：应用程序/x-www-form-urlencoded
> 
> < HTTP/1.1 500 内部服务器错误
> < 服务器：Apache-Coyote/1.1
> < 日期：星期六，16 2013 年 3 月 14:21:09 GMT
> < Content-Length: 0
> < Connection: close
> <
> * 关闭连接 #0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:58:13.777

可能是很多问题。

1）尝试.. -v ..在 curl 之后查看是否会为您打印出响应。

2) 不确定您是否是这个意思，但您在示例代码中显示的用户和密码不是用户和密码，PayPal 可能分配给您，您需要替换它们。

3) 是在您的家用计算机上设置 curl 还是在您的托管服务上启用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:13:24.913

看来它现在正在工作。贝宝一定有一个小故障，代码没有任何问题。

# c++ - 谁能告诉我何时调用终止（）以及何时调用意外（）？

> ID：15449629
> 
> 赞同：2
> 
> 时间：2013-03-16T13:05:05.673
> 
> 标签：c++, exception, terminate

当函数 f() 和 g() 结束时会发生什么？

```
#include<iostream>
using namespace std;

class A
{
     ~A(){}

}
void f()
{
    cout << "terminate" << endl;

}
void g()
{
    cout << "unexpected" << endl;
}

int main()
{
    set_terminate(f);
    set_unexpected(g);
    throw 5;
    cout << "end" << endl;
    return 0;
} 
```

为什么叫 abort() 函数？什么时候被称为破坏者？我找不到逻辑:(((((((((

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T13:11:46.243

> 谁能告诉我何时调用终止（）以及何时调用意外（）？

在您的情况下，将调用您的终止处理程序。[您可以在此处](http://liveworkspace.org/code/4cvdpz%2437)验证这一点。

关于`std::terminate()`，第 15.5.1/1-2 段包含一个注释，其中列出了它被调用的情况的非常详尽的列表（**粗体部分适用于您的情况**）：

> 1 在某些情况下，必须放弃异常处理以使用不太微妙的错误处理技术。[注：这些情况是：
> 
> — 当异常处理机制在完成异常对象的初始化之后但在激活异常处理程序之前（15.1）调用通过异常退出的函数，或
> 
> —**当异常处理机制无法找到抛出异常的处理程序时**（15.3），或
> 
> — 当搜索处理程序 (15.3) 遇到具有不允许异常 (15.4) 的 noexcept 规范的函数的最外层块时，或
> 
> — 当堆栈展开（15.2）期间对象的破坏因抛出异常而终止时，或
> 
> — 当具有静态或线程存储持续时间（3.6.2）的非局部变量的初始化通过异常退出时，或
> 
> — 当通过异常（3.6.3）退出具有静态或线程存储持续时间的对象时，或
> 
> — 当执行注册`std::atexit`或`std::at_quick_exit`通过异常（18.5）退出的函数时，或
> 
> — 当没有操作数的 throw 表达式尝试重新抛出异常并且没有处理异常时 (15.1)，或
> 
> — 当`std::unexpected`抛出先前违反的动态异常规范不允许的异常，并且 std::bad_exception 不包含在该动态异常规范 (15.5.2) 中，或
> 
> — 当调用实现的默认意外异常处理程序时 (D.11.1)，或
> 
> — 当`std::nested_exception::rethrow_nested`为未捕获异常的对象调用函数时（18.8.6），或
> 
> — 当线程的初始函数的执行通过异常（30.3.1.2）退出时，或
> 
> — 当在 std::thread 类型的对象上调用析构函数或复制赋值运算符时，该对象引用可连接线程（30.3.1.3、30.3.1.4）。——尾注]
> 
> 2 在这种情况下，`std::terminate()`称为 (18.8.3)。[...]

关于`std::unexpected()`，根据第 15.4/9 段：

> 每当抛出异常并且搜索处理程序 (15.3) 遇到具有不允许异常的异常规范的函数的最外层块时，然后，
> 
> — 如果异常规范是动态异常规范，`std::unexpected()`则调用该函数（15.5.2），
> 
> — 否则，调用函数 std::terminate() (15.5.1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T13:11:37.543

标准中明确定义了相关规则，有许多规则，但简单地说，适用于您的示例的规则是：

*   `throw`没有`catch`结果调用`terminate`或为其设置的函数。
*   当抛出的异常与异常规范不匹配时，会调用 `unexpected`或为其设置函数。

* * *

**15.1 抛出异常**
**第 8 段：**

> 如果当前没有处理异常，则执行不带操作数的 throw 表达式调用 terminate() (15.5.1)。

**15.4 例外规范**
**第 8 段：**

> 每当抛出异常并且对处理程序 (15.3) 的搜索遇到具有异常规范的函数的最外层块时，如果异常规范不允许异常，则调用函数 unexpected() (15.5.2)

* * *

> **为什么你的程序调用`abort`？**

您的程序具有未定义的行为。它符合您`terminate_handler`适当设置的事实，并且您注意到程序确实会导致调用，`f()`但函数所需的行为`terminate_handler`是：

**C++03 标准 18.6.3.1.2：**

> terminate_handler 将终止程序的执行而不返回给调用者。

您的`terminate_handler`函数`f`不满足此条件，因此会导致未定义的行为，从技术上讲，您可能会获得任何行为，您的实现选择`abort`在这种情况下调用。没有什么能阻止它这样做。

# jquery-selectors - 谷歌浏览器开发者控制台中的 [ ] 是什么？

> ID：15449635
> 
> 赞同：1
> 
> 时间：2013-03-16T13:05:24.650
> 
> 标签：jquery-selectors, google-chrome-devtools

在谷歌浏览器开发者控制台中测试代码时，我得到 []，有时我得到“”。后者出现了，当我认为当前选择器组合没有这样的字符串可用时。但我仍然无法弄清楚前 [] 方括号的含义。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:08:28.413

根据您提供的信息，我们所能做的就是做出假设。但是，当您将内容记录到控制台时，`[]`是一个空数组，而`""`是一个空字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T04:39:10.920

每当您的 jquery 返回空对象时，都会返回 []。即您的选择器表达式无法找到您要搜索的内容。

而“”只是简单的字符串，我查看了您给定的站点..当我尝试时：$（'.four columns alpha'）我得到了object []（这意味着jquery正在返回空对象）但是当您编写正确的表达式时: $('.four.columns') 你会得到可以像对象一样使用的 Div 数组。

希望我能让你明白。如果有任何疑问，请写。

并且 $('.four columns alpha') 这不是选择具有多个 css 类的 div 的正确方法，正确的方法是执行以下操作：

$('.four.columns.alpha')

# java - Java JTextArea 与 JMenuItem 重叠

> ID：15449638
> 
> 赞同：3
> 
> 时间：2013-03-16T13:05:54.943
> 
> 标签：java, swing, awt, mixing, jmenubar

我有一个名为 file 的 jmenu，当您单击它时，它会激活一个名为 quit 的菜单项

> System.exit(0);

一切都很好，直到在 jtextfield 中输入任何内容并单击 enter 如果然后单击 jmenubar 上的文件按钮，则退出按钮隐藏在 jtextarea 下。

它很难解释，所以这里是输入前后的图像： ![在此处输入图像描述](../Images/6e2b791b159594c1c90de07a1cc11d76.png)

我已经调查过了，这可能与聚焦有关，但任何重新聚焦退出按钮的尝试都没有奏效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T13:09:08.920

*   看起来像问题`awt.ScrollPane`，必须`swing.JScrollPane`改用

*   您在[混合轻量级](https://blogs.oracle.com/thejavatutorials/entry/mixing_heavyweight_and_lightweight_components)和[重量级组件时遇到问题](http://www.oracle.com/technetwork/articles/java/mixing-components-433992.html)

# javascript - TypeError：this.functionName 不是函数

> ID：15449648
> 
> 赞同：1
> 
> 时间：2013-03-16T13:06:41.537
> 
> 标签：javascript, oop, typeerror

所以我创建了一个小的 javascript 类，它应该 AJAX 在 PHP 文件中发布一些东西。课程如下：

```
var cms = cms || {};

cms.load_view = (function() {
    return {
        change: function() {
            jQuery("#layout-switch a").on('click', function()
                {
                    jQuery('#layout-switch a').removeClass('current');
                    jQuery(this).addClass('current');
                    var column_number = jQuery(this).attr('data-name');
                    var category = jQuery("#cat_id").val();
                    var data = {mode: column_number, cid: category};
                    this.postChange(data);
                });
        },
        postChange: function(data) {
                jQuery.ajax({
                    type: 'post',
                    url: SITEURL + "/modules/digishop/loadcategory.php",
                    data: data,
                    beforeSend: function () {
                        jQuery('#digishop').animate({
                            opacity: 0
                        }, 250, function () {
                            jQuery(this).addClass(column_number);
                            jQuery(this).animate({
                                opacity: 1
                            }, 250);
                        });
                    },
                    success: function (html) {
                        jQuery("#digishop").html(html);
                    }
                });
            return true;
        }
    }
})(jQuery);
jQuery(document).ready(function() {
    cms.load_view.change();
}); 
```

但是，当我单击选择器时，Firebug 说`postChange`在第一种方法中调用它时它不是一个函数，也就是`this.postChange(data);`

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T13:12:36.570

在 change 函数内部，`this`是对您单击的链接的引用。替换`this.postChange(data);`为`cms.load_view.postChange(data);`。

# excel - Excel VBA 中的计算性能较慢

> ID：15449652
> 
> 赞同：1
> 
> 时间：2013-03-16T13:06:52.670
> 
> 标签：excel, stock, vba

我目前正在计算股票投资回报率。我有大约 10 年的历史数据，而我构建函数的方式需要很长时间才能完成这项工作。例如，我有 11 列和 2872 行来计算每天的回报。

```
my Function
     Public Sub CalcROI(ByVal ColPick As Integer, ByVal ColPrint As Integer)

     Dim irow As Integer
     Dim iCol As Integer

     For irow = 4 To 2873
    'Calculating ROI
      Cells(irow + 1, ColPrint).Value = (Cells(irow + 1, ColPick).Value - Cells(irow, ColPick).Value) / Cells(irow, ColPick).Value
      Next irow

      End Sub 
```

程序的执行是

```
 CalcROI ColPick:=4, ColPrint:=17 
```

ColPick - 需要从哪里选择值进行计算

ColPrint - 在列上它需要打印输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:24:56.630

我不知道这是否可行，只是想测试我昨天在另一个问题上看到的东西。如果您对其进行测试，请在您的工作簿**副本**中运行它，以防出现严重错误！

**更新**

我已经对其进行了测试（仅使用一列> 0 的随机数）并且它确实有效。

```
Public Sub CalcROI(ByVal ColPick As Integer, ByVal ColPrint As Integer)
Dim rgPick As Range
Dim vaPick As Variant
Dim rgPrint As Range
Dim vaPrint As Variant
Dim Row As Integer

    Set rgPick = Range(Cells(4, ColPick), Cells(2873 + 1, ColPick))
    vaPick = rgPick.Value

    Set rgPrint = Range(Cells(4, ColPrint), Cells(2873 + 1, ColPrint))
    vaPrint = rgPrint.Value

    For Row = LBound(vaPick) To UBound(vaPick) - 1
        vaPrint(Row + 1, 1) = (vaPick(Row + 1, 1) - vaPick(Row, 1)) / vaPick(Row, 1)
    Next Row

    rgPrint = vaPrint

End Sub 
```

我引用的[答案。](https://codereview.stackexchange.com/a/23956)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:57:53.467

如果您不想更改当前代码，利用`Application.ScreenUpdating`将有助于实现这一点（以及使几乎所有未来的 Excel VBA 代码运行得更快）。

* * *

```
Public Sub CalcROI(ByVal ColPick As Integer, ByVal ColPrint As Integer)
     'this stops Excel from updating the screen after every single iteration in your loop
     'in the future, this is an EASY way to speed up the majority of Excel macros
     Application.screenupdating = false  
     Dim irow As Integer
     Dim iCol As Integer

     For irow = 4 To 2873
    'Calculating ROI
      Cells(irow + 1, ColPrint).Value = (Cells(irow + 1, ColPick).Value - Cells(irow, ColPick).Value) / Cells(irow, ColPick).Value
      Next irow
      'this isn't strictly speaking necessary, but will help
      application.screenupdating = true
      End Sub 
```

# asp.net - ASPX 的服务器异常

> ID：15449653
> 
> 赞同：2
> 
> 时间：2013-03-16T13:07:02.037
> 
> 标签：asp.net, exception

当我`aspx`通过 Web 服务器运行代码时，出现以下异常。我应该怎么做才能修复它？

> 说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。
> 
> 解析器错误消息：无法识别的属性“targetFramework”。请注意，属性名称区分大小写。
> 
> 源错误：
> 
> 第 9 行：`<system.web>`
> 
> 第 10 行：`<customErrors mode="Off"/>`
> 
> 第 11 行：`<compilation debug="true" targetFramework="4.5" />`
> 
> 第 12 行：`<httpRuntime targetFramework="4.5" />`
> 
> 第 13 行：`</system.web>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T13:15:34.830

这是因为以下情况：

1.  您的应用程序池可能配置为 .net 框架 2.0 版。
2.  或者您的服务器上可能没有安装框架 4.5。

确保框架已向 IIS 注册。

转到IIS中的“网站”->开始选项->构建选项卡->在组合框中选择目标框架（.NET FrameWork 4.5）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T13:09:16.933

节点没有`targetFramework`属性。[`<httpRuntime>`](http://msdn.microsoft.com/en-us/library/e1f13641%28v=vs.100%29.aspx)你应该从你的 web.config 中删除它：

```
<system.web>
    <customErrors mode="Off"/>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime />
</system.web> 
```

还要确保您已将 IIS 应用程序池配置为使用正确版本的 .NET 框架。

# iphone - 获取错误类与键名的键值编码不兼容

> ID：15449654
> 
> 赞同：1
> 
> 时间：2013-03-16T13:07:27.907
> 
> 标签：iphone, ios, uisearchbar

我在我的 TableView 中实现 SearchBar。但是当我尝试在 SearchBar 中输入文本时它会显示错误。

这是我的 NSObject 类代码 .h 文件：

```
#import <Foundation/Foundation.h>

@interface ChannelList : NSObject
{

    NSString *channelLink;
    NSString *channelName;
    NSString *channelType;
    NSString *channelLogo;
}

@property (nonatomic, copy) NSString *channelName;
@property (nonatomic, copy) NSString *channelType;
@property (nonatomic, copy) NSString *channelLogo;

@property (nonatomic, copy) NSString *channelLink;

+ (id)channelLink:(NSString*)channelLink channelName:(NSString*)achannelName channelType:(NSString*)achannelType channelLogo:(NSString*)achannelLogo;

@end 
```

和 .m 文件：

```
#import "ChannelList.h"

@implementation ChannelList

@synthesize channelLogo,channelName,channelType,channelLink;

+ (id)channelLink:(NSString*)channelLink channelName:(NSString*)achannelName channelType:(NSString*)achannelType channelLogo:(NSString*)achannelLogo{

    ChannelList *ChannelList = [[self alloc] init];

    [ChannelList setChannelLink:channelLink];
    [ChannelList setChannelName:achannelName];
    [ChannelList setChannelType:achannelType];
    [ChannelList setChannelLogo:achannelLogo];

    return ChannelList;
}
@end 
```

使用这个数组来填充我的表格视图

```
channelAllData = [NSArray arrayWithObjects:
                      [ChannelList channelLink:@"http://cdn.m.yuppcdn.net/liveorigin/smil:ndtvhindi_iphone.smil/playlist.m3u8" channelName:@"NDTV" channelType:@"NEWS" channelLogo:@"ndtv.png"],[ChannelList channelLink:@"http://cdn.m.yuppcdn.net/liveorigin/smil:aajtak_iphone.smil/playlist.m3u8" channelName:@"Aaj_Tak" channelType:@"NEWS" channelLogo:@"Aaj_Tak"],[ChannelList channelLink:@"http://cdn.m.yupptv.tv/liveorigin/smil:indiatv.smil/playlist.m3u8" channelName:@"India_tv" channelType:@"NEWS" channelLogo:@"India_tv_logo.gif"],[ChannelList channelLink:@"http://cdn.m.yuppcdn.net/liveorigin/smil:headlinetoday_iphone.smil/playlist.m3u8" channelName:@"HeadlinesToday" channelType:@"NEWS" channelLogo:@"HeadlinesToday.png"],nil];

    searchedData = [NSMutableArray arrayWithCapacity:[channelAllData count]]; 
```

这里 searchedData 是我的 SearchBar 的搜索结果。

在这里，我填充了我的 searchedData，并得到了我在标题中提到的错误。

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
    // remove all data that belongs to previous search
    [searchedData removeAllObjects];
    if([searchText isEqualToString:@""]||searchText==nil){
        [self.tableView reloadData];
        return;
    }
    [self filterContentForSearchText:searchText];

   // NSLog(@"%i",searchedData.count);
    [self.tableView reloadData];

}

- (void)filterContentForSearchText:(NSString*)asearchText
{
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF.name contains[c] %@",asearchText];
    NSLog(@"predicate %@",predicate);
    NSArray *tempArray = [channelAllData filteredArrayUsingPredicate:predicate];
    searchedData = [NSMutableArray arrayWithArray:tempArray];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T13:09:15.223

在谓词中，您正在使用`self.name`，而您的类上没有`name`声明任何属性。你的意思是`self.channelName`相反吗？

# xaml - ListViewItem 不拉伸

> ID：15449655
> 
> 赞同：0
> 
> 时间：2013-03-16T13:07:32.600
> 
> 标签：xaml, windows-runtime

我对 ListViewItem 有疑问，我这样定义样式：

```
<ListView.ItemContainerStyle>
     <Style TargetType="ListViewItem">
           <Setter Property="Margin" Value="0" />
           <Setter Property="Padding" Value="0" />
           <Setter Property="HorizontalContentAlignment" Value="Stretch" />
           <Setter Property="Background" Value="Red"></Setter>
     </Style>
</ListView.ItemContainerStyle> 
```

结果是：

[![快照图像](../Images/f2bb190f1756f0b05b3c01d2780bb735.png)](https://i.stack.imgur.com/pDzO1.png)

如何拉伸 ListViewItems ？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:18:14.457

问题不是 ItemContainerStyle，而是我放入 ListView 的控件。

边框不适合 ListViewItem，为了解决问题，我将宽度设置为 280 px (320 - 20 * 2, Snapped ViewState)

# linux - 解释 doit() 函数在 rshd.c 中的工作原理

> ID：15449657
> 
> 赞同：0
> 
> 时间：2013-03-16T10:11:59.853
> 
> 标签：linux, c, system-calls, rsh

我想知道 rsh 如何运行任何命令。我正在使用**netkit-rsh-0.17**包。我的操作系统是**centOS**。

在 rshd 目录中，`rshd.c`执行任务以在服务器上运行任何命令。在这个文件中，`doit()`是执行所有任务的主要功能。

**问题**，

1.  `pwd->pw_dir`, `pwd->pw_uid`,`pwd->pw_shell`在这段代码中是什么意思？
2.  这里面有什么`pv`作用。

用`rsh localhost ulimit -n`命令解释我。

**doit()**

```
static void
doit(struct sockaddr_in *fromp)
{
    char cmdbuf[ARG_MAX+1];
    const char *theshell, *shellname;
    char locuser[16], remuser[16];
    struct passwd *pwd;
    int sock = -1;
    const char *hostname;
    u_short port;
    int pv[2], pid, ifd;

    signal(SIGINT, SIG_DFL);
    signal(SIGQUIT, SIG_DFL);
    signal(SIGTERM, SIG_DFL);

    alarm(60);
    port = getint();
    alarm(0);

    if (port != 0) {
        int lport = IPPORT_RESERVED - 1;
        sock = rresvport(&lport);
        if (sock < 0) {
            syslog(LOG_ERR, "can't get stderr port: %m");
            exit(1);
        }
        if (port >= IPPORT_RESERVED) {
            syslog(LOG_ERR, "2nd port not reserved\n");
            exit(1);
        }
        fromp->sin_port = htons(port);
        if (connect(sock, (struct sockaddr *)fromp,
                sizeof(*fromp)) < 0) {
            syslog(LOG_INFO, "connect second port: %m");
            exit(1);
        }
    }

#if 0
    /* We're running from inetd; socket is already on 0, 1, 2 */
    dup2(f, 0);
    dup2(f, 1);
    dup2(f, 2);
#endif

    getstr(remuser, sizeof(remuser), "remuser");
    getstr(locuser, sizeof(locuser), "locuser");
    getstr(cmdbuf, sizeof(cmdbuf), "command");
    if (!strcmp(locuser, "root")) paranoid = 1;

    hostname = findhostname(fromp, remuser, locuser, cmdbuf);

    setpwent();
    pwd = doauth(remuser, hostname, locuser);
    if (pwd == NULL) {
        fail("Permission denied.\n", 
             remuser, hostname, locuser, cmdbuf);
    }

    if (chdir(pwd->pw_dir) < 0) {
        chdir("/");
        /*
         * error("No remote directory.\n");
         * exit(1);
         */
    }

    if (pwd->pw_uid != 0 && !access(_PATH_NOLOGIN, F_OK)) {
        error("Logins currently disabled.\n");
        exit(1);
    }

    (void) write(2, "\0", 1);
    sent_null = 1;

    if (port) {
        if (pipe(pv) < 0) {
            error("Can't make pipe.\n");
            exit(1);
        }
        pid = fork();
        if (pid == -1)  {
            error("Can't fork; try again.\n");
            exit(1);
        }
        if (pid) {
            close(0); 
            close(1);
            close(2); 
            close(pv[1]);
            stderr_parent(sock, pv[0], pid);
            /* NOTREACHED */
        }
        setpgrp();
        close(sock); 
        close(pv[0]);
        dup2(pv[1], 2);
        close(pv[1]);
    }
    theshell = pwd->pw_shell;
    if (!theshell || !*theshell) {
        /* shouldn't we deny access? */
        theshell = _PATH_BSHELL;
    }

#if BSD > 43
    if (setlogin(pwd->pw_name) < 0) {
        syslog(LOG_ERR, "setlogin() failed: %m");
    }
#endif
#ifndef USE_PAM
    /* if PAM, already done */
    if (setgid(pwd->pw_gid)) {
        syslog(LOG_ERR, "setgid: %m");
        exit(1);
    }
    if (initgroups(pwd->pw_name, pwd->pw_gid)) {
        syslog(LOG_ERR, "initgroups: %m");
        exit(1);
    }
#endif
    if (setuid(pwd->pw_uid)) {
        syslog(LOG_ERR, "setuid: %m");
        exit(1);
    }
    environ = envinit;

    strncat(homedir, pwd->pw_dir, sizeof(homedir)-6);
    homedir[sizeof(homedir)-1] = 0;

    strcat(path, _PATH_DEFPATH);

    strncat(shell, theshell, sizeof(shell)-7);
    shell[sizeof(shell)-1] = 0;

    strncat(username, pwd->pw_name, sizeof(username)-6);
    username[sizeof(username)-1] = 0;

    shellname = strrchr(theshell, '/');
    if (shellname) shellname++;
    else shellname = theshell;

    endpwent();
    if (paranoid) {
        syslog(LOG_INFO|LOG_AUTH, "%s@%s as %s: cmd='%s'",
           remuser, hostname, locuser, cmdbuf);
    }

    /*
     * Close all fds, in case libc has left fun stuff like 
     * /etc/shadow open.
     */
    for (ifd = getdtablesize()-1; ifd > 2; ifd--) close(ifd);

    execl(theshell, shellname, "-c", cmdbuf, 0);
    perror(theshell);
    exit(1);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T11:42:18.750

[`struct passwd`](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/pwd.h.html)记录在 POSIX 中，在`pwd.h`. 它是一种用于存储`/etc/passwd`给定用户的条目的结构。你提到的三个是：

> *   `uid_t pw_uid`
>     数字用户 ID。
> *   `char *pw_dir`
>     初始工作目录。（主目录。）
> *   `char *pw_shell`
>     用作外壳的程序。（用户的默认外壳。）

上面代码中引用的函数`doauth`可能调用`getpwent`或模拟该函数来为远程系统上的用户填写适当的值。

`pv`是一对表示连接管道的文件描述符，由 . 设置[`pipe()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/pipe.html)。`pv[0]`是“读端”，`pv[1]`“写端”。任何写入的内容`pv[1]`都可以从中读取`pv[0]`。

在上面的代码中，父进程执行以下操作：

```
close(pv[1]);
stderr_parent(sock, pv[0], pid); 
```

它关闭了写入端，并且，我猜，将读取端连接到（一个）用于在主机之间进行通信的套接字。

另一方面，子进程执行此操作：

```
close(pv[0]);    // close the read side
dup2(pv[1], 2);  // clone the write side to fd n° 2 (stderr)
close(pv[1]);    // close the original write side (now only
                 // writable through fd n° 2 
```

所以基本上，孩子的`stderr`流现在连接到返回客户端的网络流。

其余代码本质上是清理环境（环境变量和工作目录）、检查权限、设置适当的`uid`/并最终通过 shell`gid`执行用户想要运行的命令。[`execl()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/execl.html)在远程系统上运行的实际命令将类似于`/bin/sh -c <user command string>`.
因此，以您的示例为例，假设您的用户的 shell in `/etc/passwd`is `/bin/bash`，`execl`调用将导致运行：

```
/bin/bash -c 'ulimit -n' 
```

（引号因为用户命令是调用中的单个参数`execl`，所以它没有被标记化。）

# c++ - 是否可以将通用队列从 c++ 传递到 vb.net？如何？

> ID：15449661
> 
> 赞同：0
> 
> 时间：2013-03-16T13:08:07.680
> 
> 标签：c++, vb.net, generics, interop, queue

我收到了一个处理一些 TCP/IP 通信的旧 c++ 代码，我将它转换为一个可以从 vb.net 调用的 CRL 类。所以，我创建了一个入口方法，它接收 Socket IP 和其他参数。这工作正常，所有过程都正常。

现在我需要取回收到的信息并从 vb.net 应用程序处理它。

这就是我尝试过但没有成功的方法：我在 C++ 端创建了一个类（尝试了一个 ref 类和一个值类），并将我的类类型的 Collections::Generic Queue 添加到入口方法签名中。（我的想法是将类排入 c++ 端队列中，并从 vb.net 端出列。

在 vb 端，我对调用进行了编码，但在编译时收到错误：

'my_method_name' 具有不受支持的返回类型或不受支持的参数类型。

obs。：如果我直接返回该类类型的对象（不使用队列），它就可以工作。问题是在通话中我需要接听其中的几个。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:11:01.900

已经找到了我的问题的解决方案，我想分享它，因为可能对其他人有用。我的项目是一个 CLR 项目（CRL 类库），它只是用 C 编写的几个函数的入口点，我在“添加引用”加载的 VB.net 项目中使用 dll。

我的 C++ 部分可以恢复为：

某些类（在这种情况下创建为“值”）

```
public value class MyClass
{
public:
int val1;
... 
}; 
```

一些接收队列作为参数的函数：

```
void FunctionName(System::Collections::Generic::Queue<MyClass>^ MyClassQueue)
{
// create some object of your class
MyClass obj1;
// fill the object
obj1.val1 = 0;

// enqueue the object (you need to use '->')
MyClassQueue->Enqueue(obj1);
}; 
```

现在，从 VB.net 方面来看，如果 C++ 部分是 CLR，您将在添加对 dll 的引用后看到类型和函数。

因此，您将创建一个 MyClass 类型的队列并使用它调用函数

```
Dim myClassObj as new MyClass
Dim myClassQueue as new Queue(of MyClass)

myClassObj.FunctionName(myClassQueue)
myClassObj =  myClassQueue.Dequeue() 
```

现在您可以按预期在 vb 端处理对象了。

此致，

# c# - 插入与数据库表中的行数相关的文本框数

> ID：15449665
> 
> 赞同：-2
> 
> 时间：2013-03-16T13:08:34.127
> 
> 标签：c#, asp.net

我正在 Visual Studio 中创建员工名单系统，并希望使用数据库中的员工姓名填充一些文本框，以确保用户不会错过任何员工名单。显然工作人员会来来去去，因此可能需要更改文本框的数量。

例如，一周可能有 5 名员工进入名单，但如果一名员工离开公司，那么文本框的数量将不得不自动更改，并在员工被删除后填充表格中的姓名数据库。

对于最终结果，我计划使用表格中现有工作人员的姓名填充文本框列表。然后，这将允许用户选择他们的轮班时间和午餐时间等。

任何意见或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:26:40.437

而不是文本框...

如果只能从列表中选择一个，则使用单选按钮

如果可以从列表中选择多个，请使用复选框

如果您希望编辑名称（数据），请仅使用文本框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:18:59.733

@千感谢使用asp.net中继器控件的建议。

我不想编辑我正在提取的信息，所以我创建了一个模板，将数据提取到标签中。谢谢并道歉，因为这个问题是否定的。

# hadoop - 在哪里可以找到安装和运行 cascading.jruby 的教程？

> ID：15449668
> 
> 赞同：1
> 
> 时间：2013-03-16T13:08:47.043
> 
> 标签：hadoop, jruby, cascading

我已经安装了 Hadoop 并且测试正常，但是找不到任何关于 n00b 的说明

如何设置级联和 cascading.jruby。在哪里放置级联罐子以及如何配置 jading 以正确构建 ruby​​ 程序集？

有人使用詹金斯自动构建它吗？

编辑：更多细节我正在尝试从[https://github.com/etsy/cascading.jruby构建示例字数统计作业](https://github.com/etsy/cascading.jruby)

我已经安装

1.  hadoop，并成功运行测试。
2.  安装了jruby
3.  宝石安装级联.jruby
4.  玉 - [https://github.com/etsy/jading](https://github.com/etsy/jading)
5.  安装蚂蚁

6.  创建了 wordcount 样本 wc.rb

7.  运行jade将wc.rb编译成jar

    玉wc.rb

8.  我收到以下编译错误

    构建文件：build.xml 不存在！构建失败 RuntimeError: Ant 检索失败 (root) at /usr/bin/hjade:89

查看翡翠代码是有道理的，但是示例用法中没有涉及到这一点？我在这里想念什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T16:31:39.357

抱歉耽搁了; 这是我的第一个答案，在这里。

您描述的问题，Jading 在从符号链接调用时无法找到其 Ant 构建脚本，确实是一个问题。我建议您将 Jading 克隆添加到您的 PATH 中，而不是创建符号链接（或提交拉取请求来解决[问题](https://github.com/etsy/jading/issues/1)！）。

为了解决您的其他一些问题，我在 Jading wiki 中创建了一个[入门](https://github.com/etsy/jading/wiki/Getting-Started)页面，这可能会有所帮助。它引导您完成本地和远程 cascading.jruby 作业的启动和运行，而无需安装除 preqs（Java、Ant、JRuby 和 Hadoop 客户端+配置）之外的任何东西。现在包括一个完整的示例 wordcount 脚本，它应该在本地和 Hadoop 集群上运行，并且已经在 Etsy 自己的内部集群上进行了测试。

并且进一步备份以解决您关于 Jenkins 的问题，是的，在 Etsy，我们使用 Jenkins 构建和部署 cascading.jruby（和 Scalding）到我们的集群。但是，该构建过程当前不使用 Jading 来生成作业 jar。我们的构建早于 Jading，而 Jading 试图发布我们构建该 jar 过程的更清洁版本。我们的构建可以很容易地使用 Jading（原始示例来自我们代码的实际使用），但是我们对构建生成的工件的要求略有不同。

如果您对 Jading 有任何其他问题，请随时向 github 项目提交问题或拉取请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T07:24:59.447

我现在已经完成了端到端的工作。我在 /usr/local/bin 中创建了指向 hadoop 和 jading 二进制文件的符号链接

脚本需要从它们自己的目录运行才能找到支持文件

即以下工作：（假设 cascading.jruby 示例在 ~/dev/cascading.jruby.demo/wc.rb

```
cd /usr/local/jading
./jade ~/dev/cascading.jruby.demo/wc.rb

# creates a jade.jar locally in jading folder
cd /usr/local/hadoop
./bin/hadoop jar /usr/local/jading/jade.jar ~/dev/cascading.jruby.demo/wc.rb ~/dev/cascading.jruby.demo/sampledata/in.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T13:50:54.290

如果您使用的是 jruby。您也必须使用捆绑程序。在这种情况下，您可以在 gemfile 中添加 cascading.jruby 作为依赖项。

无论如何，您可以尝试从您的项目文件夹安装：

`gem install 'cascading.jruby'`

希望这可以帮助。

# yui - yui中的深度比较数组

> ID：15449672
> 
> 赞同：1
> 
> 时间：2013-03-16T13:09:06.407
> 
> 标签：yui

是否有推荐的方法在 yui3 测试中深度比较 2 个数组（类似于 QUnit 的 deepEqual）？我浏览了源代码，我能想到的最好的方法是从 matrix/matrix.js 中窃取这个函数（稍微重写）它可以很容易地修改为递归任意深度比较，但我现在离题了......

```
function compare(list1, list2)
{
    var i = 0, len = list1.length, len2 = list2.length, isEqual = len === len2;
    if(isEqual) {
        for(; i < len; ++i) {
            if(list1[i] != list2[i]) {
                isEqual = false; break;
            }
        }
    }
    return isEqual;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:06:07.467

是的，YUI 测试有一个`Test.ArrayAssert`命名空间，其中有许多数组断言。特别是你有`itemsAreEqual`哪些测试`==`和`itemsAreEquivalent`哪些使用`===`. 通过包含该`test`模块，您可以免费获得它。

```
YUI().use('test', function (Y) {
  var ArrayAssert = Y.Test.ArrayAssert;

  var testCase = new Y.Test.Case({
    name: "TestCase Name", 

    //traditional test names
    testSomething : function () {
      ArrayAssert.itemsAreEqual([1, 2, 3], foo, 'all items should be 1, 2, 3');
    }
  });
}); 
```

# android - 如何从字符串中获取所有电话号码

> ID：15449682
> 
> 赞同：0
> 
> 时间：2013-03-16T13:09:47.413
> 
> 标签：android, string

这是我的字符串，我在我的 android 应用程序中添加到我的 TextView：

```
mString = "hsfjsdhfjsdv ij,qfdbsxbsddsvsd 76897879 fdsgsfg 67676545, 34343465"; 
```

如何从特定字符串中获取所有电话号码，以便我可以将 onclick 添加到这些电话字符串并呼叫它们。

知道我该怎么做吗？

# dependency-injection - 依赖注入的工作单元

> ID：15449685
> 
> 赞同：0
> 
> 时间：2013-03-16T13:10:21.583
> 
> 标签：dependency-injection, inversion-of-control, ninject, repository-pattern, unit-of-work

我正在 ASP.NET MVC 4 中构建一个相对简单的 webapp，使用实体框架与 MS SQL Server 对话。未来有很多扩展应用程序的空间，所以我的目标是在代码中最大化可重用性和适应性的模式，以节省以后的工作。这个想法是：

*   工作单元模式，通过仅在每组操作结束时提交更改来保存数据库问题。
*   使用通用存储库，`BaseRepository<T>`因为存储库基本相同；奇怪的异常可以扩展和添加它的附加方法。
*   依赖注入将这些存储库绑定到`IRepository<T>`控制器将使用的存储库，这样我就可以毫不费力地切换数据存储方法等（不仅仅是为了最佳实践；这种情况很有可能发生）。我正在为此使用 Ninject。

我以前没有真正从头开始尝试过这样的事情，所以我一直在阅读，我想我在某个地方搞糊涂了。到目前为止，我有一个`IRepository<T>`由 实现的接口`BaseRepository<T>`，它包含一个`DataContext`传递给其构造函数的实例。该接口具有 Add、Update、Delete 和各种类型的 Get 方法（按 ID 单、按谓词单、按谓词分组、全部）。唯一不适合此接口的存储库（到目前为止）是用户存储库，它添加`User Login(string username, string password)`以允许登录（其实现处理所有的加盐、散列、检查等）。

根据我的阅读，我现在需要一个`UnitOfWork`包含所有存储库实例的类。此工作单元将公开存储库以及 SaveChanges() 方法。当我想操作数据时，我会实例化一个工作单元，访问其上的存储库（根据需要进行实例化），然后保存。如果有任何失败，数据库中不会发生任何变化，因为它最终不会到达单个保存。这一切都很好。我的问题是，我能找到的所有示例似乎都在做以下两件事之一：

*   有些将数据上下文传递到工作单元，从中检索各种存储库。`DbContext`这通过在我的工作单元中具有我的实体框架特定（或从它继承的类）来否定 DI 的观点。
*   有些人调用 Get 方法来请求存储库，这是服务定位器模式，如果不是反模式，它至少是不受欢迎的，无论哪种方式，我都想在这里避免它。

我是否需要为我的数据源创建一个接口并将其也注入到工作单元中？我找不到任何足够清晰和/或完整的文档来解释。

**编辑**

我想我已经把它复杂化了。我现在将我的存储库和工作单元合二为一——我的存储库是完全通用的，所以这只给了我一些通用方法（添加、删除、更新和几种 Get）以及 SaveChanges 方法。这给了我一个工人类接口；然后我可以有一个工厂类来提供它的实例（也是接口的）。如果我也有这个 worker 实现`IDisposable`，那么我可以在作用域块中使用它。所以现在我的控制器可以做这样的事情：

```
using (var worker = DataAccess.BeginTransaction())
{
    Product item = worker.Get<Product>(p => p.ID == prodName);
    //stuff...
    worker.SaveChanges();
} 
```

如果在 之前出现问题`SaveChanges()`，那么当它退出范围块并释放工作人员时，所有更改都将被丢弃。我可以使用依赖注入为该字段提供具体实现，该`DataAccess`字段被传递到基本控制器构造函数中。业务逻辑都在控制器中并与`IQueryable`对象一起使用，因此我可以将`DataAccess`提供者对象切换为我喜欢的任何东西，只要它实现了`IRepository`接口；任何地方都没有特定于实体框架的东西。

那么，对这个实现有什么想法吗？这是在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:25:40.080

我更喜欢拥有`UnitOfWork`或`UnitOfWorkFactory`注入存储库，这样每次添加新存储库时我都不需要打扰它。UnitOfWork 的职责是管理事务。

[这](http://msdn.microsoft.com/en-us/magazine/dd882510.aspx)是我的意思的一个例子。

# php - 动态创建类

> ID：15449686
> 
> 赞同：2
> 
> 时间：2013-03-16T13:10:37.040
> 
> 标签：php, class, frameworks, code-generation

使用active Record已经有一段时间了，我想换个环境，一些开发者朋友建议研究ORM，我看过的所有ORM项目都需要一个单独的类来扩展ORM类。

**我的问题是：有没有什么方法可以在没有** 的函数中使用 PHP 动态创建一个类`eval`？

这就是我所拥有的：

```
<?php
    class Constructor
    {
            function new_class($class)
            {
                    $myself = get_called_class();
                    eval("class {$class} extends {$myself} { }");
            }
            function say_hi()
            {
                    $class = get_called_class();
                    echo "Hi, {$class}!";
            }
    }

    $constructor = new Constructor;
    $constructor->new_class("Greeter");

    $greeter = new Greeter;

    $greeter->say_hi(); // Hi, Greeter! 
```

但是，我的客户告诉我，`eval`由于他在共享主机上，他的环境被阻止了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:48:18.587

你可能不想这样做。但作为一种解决方法，您可以使用与 via 相同的方法`eval()`，但是一旦构建了要提供给 eval 的字符串，您只需将其写为文件并再次包含它。

像这样的东西：

```
function my_eval($str)
{
  $filename = uniqid().'.tmp';
  file_put_contents ($filename, $str);
  include $filename;
  unlink ($filename);
} 
```

我是凭记忆写的，没有测试过，但我认为它应该可以解决问题。我现在看到的唯一警告是，您实际上仍然在做与 相同的操作`eval()`，并且此变体不允许您在与调用上下文相同的范围内创建变量（尽管您可以使用 $GLOBALS[] 来解决全局范围变量的问题）。

# mysql - 更新中的案例

> ID：15449699
> 
> 赞同：0
> 
> 时间：2013-03-16T13:12:59.507
> 
> 标签：mysql, sql

我有这个 UPDATE 查询

```
 UPDATE table SET 
 col2 = ( CASE WHEN ( col1 <> 0 AND col2 = 0 ) THEN val1 ELSE col2 END ),  
 col1 = ( CASE WHEN ( col1 = 0 ) THEN val1 ELSE col1 END ) 
```

我的问题是脚本的设置方式是一个用户可以访问它两次，因此`val1`将在`col1 and col2`.

我想在添加之前检查`val1`是否`val1`已添加到其中一个，`col1`或者`col2`如果它存在于任一列中，则不要更新列。val1 = 用户 ID 目前可能会发生这种情况，用户 1 和 2 都可以访问此更新脚本，因此如果他们中的任何一个访问它两次，他们的 ID 将同时放在 col1 和 col2 中，这是我的问题。

```
id  col1  col2  
1   val1  val1     
2   val2  val2 
```

我想要这样的东西

```
id  col1  col2  
 1   val1  val2     
 2   val2  val1 
```

如果 val1 存在于 col1 或 col2 中，则不需要更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:20:26.167

试试这个

```
 UPDATE table SET 
   col2 = ( if ( col1 <> 0 AND col2 = 0 ) ,val2 , if ((col1 = 0 and col2 <> 0) , col2 , if ((col1 = 0 and col2 = 0) , val1 , col2)) ),  
   col1 = ( if ( col1 = 0  and col2 <> 0) , val2 , if ((col1 <> 0 and col2 = 0) , col1 , (if (col1 = 0 and col2 = 0),val1 , col1 )) ) 
```

# visual-studio-2012 - Xamarin Android 编辑 axml。在哪里切换设计/代码？

> ID：15449700
> 
> 赞同：2
> 
> 时间：2013-03-16T13:13:05.667
> 
> 标签：visual-studio-2012, designer, xamarin, xamarin.android

我正在尝试使用 VS2012+Xamarin 制作 Android 应用程序。作为 WPF 程序员，我通常在 XAML 编辑期间使用 F7/Ctrl+F7 切换设计/代码。

但是，我在 axml 编辑中找不到。（我使用“打开方式...”来调用 XML 编辑器）。我发现 Xamarin Studio 在编辑器的左下角有这个按钮。

Xamarin+VS 是否缺少此功能？还是有任何键盘快捷键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T02:17:24.067

由于布局文件（.axml 文件）和 Android Activity 类之间没有正式的链接，因此它没有真正的方法知道您想要切换到/从什么。

一个 Activity 可能使用多个布局文件，或者一个布局文件可能被多个 Activity 使用。

我通常只是安排选项卡，使布局文件和 Activity 类彼此相邻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-25T13:44:45.127

这是一个旧的，但如果你“打开”.axml 文件

*   自动编辑器选择器 (XML)
*   或通过 Resharper CNTL-T

它有可能只是在 XML 视图中打开，而没有明显的方法可以进入设计模式。

如果您“打开方式” -

*   Android Designer（可能然后设置为默认值）

然后从 VS（撰写本文时为 2015 年）打开文件将以设计模式打开，您可以来回切换。

# html - 使用 CSS 设置表格样式

> ID：15449706
> 
> 赞同：0
> 
> 时间：2013-03-16T13:13:38.897
> 
> 标签：html, css

我有一个这样的 HTML 表格

```
<table>
    <tr>
        <td>Content</td>                    
        <td>Content</td>                    
        <td>Content</td>                                        
    </tr>   
    <tr>
        <td>Content</td>                    
        <td>Content</td>                    
        <td>Content</td>                                        
    </tr>   
    <tr>
        <td>Content</td>                    
        <td>Content</td>                    
        <td>Content</td>                                        
    </tr>
</table> 
```

现在我需要像这样设计它......

![在此处输入图像描述](../Images/49cb32bc2c588b3327cc06ad9dee77be.png)

我用这样的 CSS 尝试过：

```
table td {
    padding: 20px 20px;
    width: 33%;
    vertical-align: top;
    border-bottom: 1px dashed #b4b4b4;
    border-right: 1px dashed #b4b4b4;
} 
```

但无法得到我预期的结果。我不能在这个问题上使用内联样式。

希望有人能帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:17:43.080

您可以使用它来实现它，`:last-child`因此请尝试使用它。

```
table td:last-child
{
    border-right:none;
}
table tr:last-child td
{
    border-bottom:none;
} 
```

[JS 小提琴演示](http://jsfiddle.net/hpdKn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T13:17:50.403

[http://jsfiddle.net/pjLFY/](http://jsfiddle.net/pjLFY/)

你几乎做对了。

您需要`td`在 last中将边框设置为 none `tr`，但您只需将该**行**的边框设置为 none。

```
table tr:last-child td {
     border-bottom: none; 
}

table td:last-child {
     border-right: none; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T13:20:26.820

试试这个：

```
table td {
    padding: 20px 20px;
    width: 33%;
    border-bottom: 1px dashed #b4b4b4;
    border-right: 1px dashed #b4b4b4;
    background: #FFFDDC;
}
table td:last-child {
    border-right: 0;
}
table tr:last-child td {
    border-bottom: 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T13:21:35.030

如果您不想使用`:last-child`，并且您知道页面的背景颜色，请尝试添加以下内容：

```
table {
    border-collapse: collapse;
    border: 1px solid white;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-16T13:23:00.693

您可以像这样使用with而不是覆盖`none`or ：`0``:last-child``:not`

```
table td {
    padding: 20px 20px;
    width: 33%;
    vertical-align: top;
}
table tr:not(:last-child) td {
    border-bottom: 1px dashed #b4b4b4;  
}
table td:not(:last-child) {
    border-right: 1px dashed #b4b4b4;    
} 
```

请参阅[jsFiddle](http://jsfiddle.net/dvSXe/)。

# javascript - 谷歌地图无法在 Chrome 上运行

> ID：15449709
> 
> 赞同：2
> 
> 时间：2013-03-16T13:13:45.103
> 
> 标签：javascript, jquery, google-maps, google-chrome, google-maps-api-3

我有一个功能，可以为用户提供从他们的位置到地图上固定位置的方向。它正在作为外部内容加载以填充主 div，该地图在 IE 和 Firefox 上都可以正常显示，但是当我在 Chrome 中查看它时，它不会显示。Chrome 开发控制台显示内容正在加载到 div 中，并且没有出现任何错误。

外部地图.html

```
<script type="text/javascript" src="JS/location.js"></script>
<div id="mapContainer"></div>
<div id="writtenDir"></div> 
```

JS加载内容：

```
 $('#Contact').click(function () {
    $('#centerPane').load('External/map.html');
    $.getScript("JS/location.js");
  }); 
```

位置.js

```
if (navigator.geolocation) { 
  navigator.geolocation.getCurrentPosition(geoInfo, noGeoInfo);
} else {
  noGeoInfo();
}

function geoInfo(position) {
  navigator.geolocation.getCurrentPosition(function (position) { 
    var latitude = position.coords.latitude;                    
    var longitude = position.coords.longitude;                 
    var coords = new google.maps.LatLng(latitude, longitude); 
    var directionsService = new google.maps.DirectionsService();
    var directionsDisplay = new google.maps.DirectionsRenderer();
    var mapOptions = {  
      zoom: 15,        
      center: coords, 
      mapTypeControl: true, 
      navigationControlOptions:
      {
        style: google.maps.NavigationControlStyle.SMALL 
      },
      mapTypeId: google.maps.MapTypeId.ROADMAP 
    };
    map = new google.maps.Map(document.getElementById("mapContainer"), mapOptions); 
    directionsDisplay.setMap(map);
    directionsDisplay.setPanel(document.getElementById(''));
    var request = {
      origin: coords, 
      destination: '54.861283, -6.326805', 
      travelMode: google.maps.DirectionsTravelMode.DRIVING 
    };
    directionsService.route(request, function (response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    });
  });
}

function noGeoInfo() { 
  var location = new google.maps.LatLng(54.861283, -6.326805); 
  var mapOptions = { 
    center: location, 
    zoom: 15, //Sets zoom level (0-21)
    mapTypeId: google.maps.MapTypeId.ROADMAP 
  };
  var map = new google.maps.Map(document.getElementById("mapContainer"), mapOptions);
  marker = new google.maps.Marker({  
    position: location, 
    map: map 
  });
} 
```

要加载到的 div：

```
<div id="centerPane" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'"></div> 
```

为什么 Google Chrome 中没有显示地图？（实时链接，按“联系我们” - [http://scmweb.infj.ulst.ac.uk/~B00518833/DNA/View/index.php](http://scmweb.infj.ulst.ac.uk/~B00518833/DNA/View/index.php)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:44:52.100

问题存在于 Nav.js 文件的第 59 行：

```
google.maps.event.trigger(map, 'resize'); 
```

执行`map`此行时未定义。

确保您的 js 文件以正确的顺序加载，并且始终在触发调整大小事件之前定义地图。

![在此处输入图像描述](../Images/aa1cfe5672f244e44738671ae4444515.png)

我希望这有帮助。

# java - 用java函数转置double [] []矩阵？

> ID：15449711
> 
> 赞同：9
> 
> 时间：2013-03-16T13:13:50.357
> 
> 标签：java, matrix

有没有人有一个函数，我可以用它在 Java 中转置一个具有以下形式的矩阵：

```
double[][] 
```

我有这样的功能：

```
public static double[][] transposeMatrix(double [][] m){
    for (int i = 0; i < m.length; i++) {
        for (int j = i+1; j < m[0].length; j++) {
            double temp = m[i][j];
            m[i][j] = m[j][i];
            m[j][i] = temp;
        }
    }

    return m;
} 
```

但它在某个地方是错误的。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-19T10:46:19.227

```
 public static double[][] transposeMatrix(double [][] m){
        double[][] temp = new double[m[0].length][m.length];
        for (int i = 0; i < m.length; i++)
            for (int j = 0; j < m[0].length; j++)
                temp[j][i] = m[i][j];
        return temp;
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-19T02:36:43.447

如果您想使用外部库，Apache Commons Math 提供了转置矩阵的实用程序。请参考它的[官方网站](http://commons.apache.org/proper/commons-math/userguide/linear.html)。

首先，您必须创建一个双数组`double[][] arr`，就像您已经完成的那样。然后，转置的二维矩阵可以这样实现

```
MatrixUtils.createRealMatrix(arr).transpose().getData() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-20T09:07:29.940

转置矩阵的 Java 类：-

```
import java.util.Scanner;

public class Transpose {

    /**
     * @param args
     */

    static int col;
    static int row;
    static int[][] trans_arr = new int[col][row];

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        Scanner sc = new Scanner(System.in);
        int m = sc.nextInt();
        col = m;
        int n = sc.nextInt();
        row = n;

        int[][] arr = new int[row][col];
        for (int i = 0; i < row; i++) {
            for (int j = 0; j < col; j++) {
                arr[i][j] = sc.nextInt();
                System.out.print(arr[i][j] + " ");
            }
            System.out.println();
        }
        int[][] trans_arr = new int[col][row];
        for (int i = 0; i < row; i++) {
            for (int j = 0; j < col; j++) {
                trans_arr[j][i] = arr[i][j];
            }
        }
        for (int i = 0; i < col; i++) {
            for (int j = 0; j < row; j++) {
                System.out.print(trans_arr[i][j] + " ");

            }
            System.out.println();
        }

    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-25T16:06:09.710

这是方法

```
public static double[][] transpose(double arr[][]){
    int m = arr.length;
    int n = arr[0].length;
    double ret[][] = new double[n][m];

    for (int i = 0; i < m; i++) {
        for (int j = 0; j < n; j++) {
            ret[j][i] = arr[i][j];
        }
    }

    return ret;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-18T09:25:09.237

从 Java 8 开始，您可以这样做：

```
public static double[][] transposeMatrix(final double[][] matrix) {

    return IntStream.range(0, matrix[0].length)
        .mapToObj(i -> Stream.of(matrix).mapToDouble(row -> row[i]).toArray())
        .toArray(double[][]::new);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-17T23:16:34.450

这是**转置**二维矩阵**“就地”**的代码（不使用其他数据结构来保存输出），因此**内存效率更高：**

以下相同的算法也可用于 int 或 char 或 string 数据类型。

```
 public static double[][] transposeDoubleMatrix(double[][] matrix) {
        int n = matrix.length;
        for (int i = 0; i < n; i++) {
            for (int j = i; j < n; j++) {
                double tmp = matrix[j][i];
                matrix[j][i] = matrix[i][j];
                matrix[i][j] = tmp;
            }
        }
        return matrix;
    } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-09-07T20:42:02.013

这里有一个小改变！

```
for (int j = i; j < m[0].length; j++) 
```

# linux - linux socket接受不能被阻止

> ID：15449714
> 
> 赞同：0
> 
> 时间：2013-03-16T13:14:29.180
> 
> 标签：linux, sockets, connection, block

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>
    #include <unistd.h>
    #include <fcntl.h>
    #include <netinet/in.h>
    #include <arpa/inet.h>
    #include <sys/types.h>
    #include <sys/socket.h>

    int main()
    {
    int server_sockfd,client_sockfd;
    int server_len,client_len;
    struct sockaddr_in server_address;
    struct sockaddr_in client_address; 
```

创建一个新的套接字

```
 unlink("server_socket");
    server_sockfd=socket(AF_INET,SOCK_STREAM,0); 
```

给它命名

```
 server_address.sin_family=AF_INET;
    server_address.sin_addr.s_addr=htonl(INADDR_ANY);
    server_address.sin_port=htons(9734);
    server_len=sizeof(server_address);
    bind(server_sockfd,(struct sockaddr *)&server_address,server_len); 
```

设置块

```
 int flags=fcntl(server_sockfd,F_GETFL,0);
    if(flags&O_NONBLOCK==1){
       printf("NONBLOCK");
    }else{
       printf("BLOCK");
    }
    flags=flags&~O_NONBLOCK;
    fcntl(server_sockfd,F_SETFL,flags);
    if(flags&O_NONBLOCK==1){
       printf("NONBLOCK");
    }else{
       printf("BLOCK");
    } 
```

听

```
 listen(server_sockfd,5);
    while(1){
       char ch;
       printf("server waiting\n");
       client_len=sizeof(client_address);
       client_sockfd=
          accept(server_sockfd,(struct sockaddr*)&client_sockfd,&client_len); 
```

它第一次被阻止

```
 read(client_sockfd,&ch,1);
      ch++;
      write(client_sockfd,&ch,1);
      close(client_sockfd);
   }
} 
```

当客户端首先连接时，我工作，但下一个将无法工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:16:34.933

`client_address`和之间可能发生不匹配`client_sockfd`。

[accept()](http://linux.die.net/man/2/accept)的手册页说：

```
int accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen);

The addrlen argument is a value-result argument: the caller must initialize it to
contain the size (in bytes) of the structure pointed to by addr; on return it
will contain the actual size of the peer address. 
```

尝试：

```
client_sockfd=
   accept( server_sockfd, (struct sockaddr*)&client_address, &client_len ); 
```

# asp.net - 禁止按钮多次提交

> ID：15449715
> 
> 赞同：0
> 
> 时间：2013-03-16T13:14:43.707
> 
> 标签：asp.net, sharepoint, submit, web-parts

我创建了一个可视化 webpart，这意味着它没有 form / body 元素。我在 webpart 上有三个提交按钮。一次，只有三个按钮中的一个可见。这些按钮对添加到 Web 部件上的多个控件执行验证，然后调用服务器端方法。

问题是 webpart 提交需要时间，并且在此期间用户可以多次按下提交按钮，结果是应用程序出现故障。

我已经尝试过 jQuery 解决方案，例如向提交按钮添加禁用属性，但它也阻止 webpart 提交。

任何帮助停止多次提交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:26:48.113

您可以考虑使用 Ajax 来发布您的表单。

而且，在服务器上进行一些处理之前，禁用 UI 并显示加载图像。

参考：

[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)

[UpdatePanel 控件概述](http://msdn.microsoft.com/en-US/library/bb386454.aspx)

[更新进度控制概述](http://msdn.microsoft.com/en-US/library/bb398821.aspx)

# mysql - 无法连接到 mysql 数据库 [phpmyadmin]

> ID：15449721
> 
> 赞同：0
> 
> 时间：2013-03-16T13:15:53.977
> 
> 标签：mysql, database, phpmyadmin, xampp, connect

*   创建数据库我正在使用 xampp->phpyadmin，
*   我创建了一个名为“地牢”的数据库，
*   在我的 php 代码中，我使用以下代码连接到 MySQL：

    ```
    if ($_SERVER["SERVER_ADDR"]=="localhost")
    {
      define("SQL_HOST","localhost");
      define("SQL_DBNAME","dungeons");
      define("SQL_USERNAME",xxx);
      define("SQL_PASSWORD",xxx);
    } else {
      define("SQL_HOST","127.0.0.1");
      define("SQL_DBNAME","dungeons");
      define("SQL_USERNAME", xxx);
      define("SQL_PASSWORD",xxx);
    }

    mysql_connect(SQL_HOST, SQL_USERNAME, SQL_PASSWORD) or die("Cannot connect to mySQL: " . mysql_error());
    mysql_select_db(SQL_DBNAME) or die("Cannot connect to the database: ". mysql_error()); 
    ```

错误消息说

> 选择数据库时，未知数据库“地下城”。

我不知道问题出在哪里，因为数据库已创建并且我已使用代码成功连接到 mysql。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:19:43.300

该错误正确地表明数据库不可用或不存在。首先在 phpmyadmin 中创建一个新数据库并将其命名为 dungeons。之后尝试你的脚本。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:17:26.527

错误消息说

> 未知数据库“地牢”

不存在名为“地牢”的数据库。

首先使用创建数据库

```
create database dungeons; 
```

# ios - 在prepareForSegue中的viewControllers之间传递一个动画UIImageView：？

> ID：15449724
> 
> 赞同：0
> 
> 时间：2013-03-16T13:16:04.993
> 
> 标签：ios, uistoryboardsegue

基于一些较早的问题（例如：[ios5 如何通过 prepareForSegue: a UIImageView](https://stackoverflow.com/questions/8950378/ios5-how-to-pass-prepareforsegue-a-uiimageview)）我想知道这种技术有多流畅，比如在使用动画 = NO 进行模态转场时。

我可以拼凑一个测试，但我想有人已经确定了将其用作过渡技术的性能和实际缺陷。我很想听听任何细节——例如，UIImageView 动画是重新启动还是继续快速进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:49:31.470

If you pass an animating image view to another controller, it looks like the animation continues apace. I can't see any "hitch" in the animation. Going forward with a modal presentation worked fine. I couldn't go back to the first controller, by just dismissing, I had to add the image view back to the view to make that work, and even then it only worked if I turned off auto layout (otherwise I get an error saying it can't install a constraint). So, to go back and forth with modals (with no animation) I had this in the first controller:

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.isFirst = YES;
    NSMutableArray *imgArray = [NSMutableArray array];
    for (int i = 1; i< 41; i++) {
        UIImage *img = [UIImage imageNamed:[NSString stringWithFormat:@"New_PICT%04d.jpg",i]];
        if (img) {
            [imgArray addObject:img];
        }
    }
    self.iv.animationImages = imgArray;
    self.iv.animationDuration = 10;
    [self.iv startAnimating];
}

-(void)viewDidAppear:(BOOL)animated {
    if (self.isFirst) {
        self.isFirst = NO;
    }else{
        self.iv.frame = CGRectMake(48, 48, 48, 48);
        [self.view addSubview:self.iv];
    }
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    SecondViewController *sec = segue.destinationViewController;
    sec.iv = self.iv;
} 
```

# javascript - Onload 方法在连续重新加载到应用程序时多次调用自身（var image = new Image()，javascript 问题）

> ID：15449727
> 
> 赞同：0
> 
> 时间：2013-03-16T13:16:37.323
> 
> 标签：javascript, image, internet-explorer-8, internet-explorer-9

我不明白为什么 onload 方法（见下面的代码）在 IE8 和 IE9 浏览器中连续重新加载时不止一次调用自己。

我猜，onload 方法被触发不止一次，这导致该图像在**IE8,IE9**`render(appear)`中不止一次。下面的 js 代码是由我的资深 Front-Ender 编写的（他正在使用自己编写的 js 库来处理所有, , ... 方法）。该代码在 Firefox、Chrome 中按预期工作，但在使用 IE8 或 IE9 浏览器重新加载时呈现不止一次。**`.append()``anim()``image(html code)`**

 **一些快速信息：

*   `waitingFor()`- 定期扫描 dom 以查找匹配元素，
*   `mdiTog`- 出现不止一次的图像..

这个怎么运作：

该`div`属性`Class="suggestions contextSuggesions"`被插入到`body`元素中，并包含一个无序列表 ( `ul`, `li`, )，它在不透明度和单击图像 ( )`ul`之间切换。`0``1``mdiTog`

下面是`Mditog`多次出现的图片，出现随机：

![在此处输入图像描述](../Images/29fe3974df3b0fd905381c80910a6557.png)

```
 waitingFor('.viewport .homePage', function () {
    var mdiTog = new Image();
    mdiTog.onload = function () {
        var $mdi = M$('.mdiTabs ul'),
            $contextMenu = M$($body.append('<div class="suggestions contextSuggesions" style="display:none"></div>')),
            $toggle = M$($mdi.append('<li class="mdiTog" style="display:none"></li>')),
            visible = false,
            active = false;

        var hideCtx = function () {
            if (visible) {
                $contextMenu.anim('', {opacity: 100}, {opacity: 0}, 250, function () {
                    $contextMenu.css({display: 'none'});
                });
                visible = false;
            }
        };              

        $toggle.css({opacity: 0, display: 'inline-block'}).anim('', {opacity: 0}, {opacity: 100}, 1000).on('click', function () {
            var togOS = $toggle.offset(),
                menu = '';

            M$('li', $mdi.get()).each(function (el, idx) {
                if (idx > 1) {
                    menu += '<li rel="' + idx + '">' + $mdi.text(null, el) + '</li>';                   
                }
            });

            $contextMenu.css({opacity: 0, display: 'block', top: togOS.top + 'px', left: (togOS.left - 20) + 'px'}).anim('', {opacity: 0}, {opacity: 100}, 400, function () {
                visible = true;
            }).html('<ul>' + menu + '<li class="uiUtil hr" onclick="ApolloUI.widgets.expose.show()">' + translate('previewAll') + '</li><li class="uiUtil" onclick="ApolloUI.mdi.closeAll()">' + translate('closeAll') + '</li></ul>');
        });

        $contextMenu.on('click', function (e) {
            var target = $contextMenu.eventTarget(e);

            if (target.tagName === 'LI' && target.className.indexOf('uiUtil') === -1) {
                $contextMenu.fire('click', M$('.mdiTabs li').get(parseInt(target.getAttribute('rel'), 10)));
            }
            hideCtx();              
        }).on('mouseleave', function () {
            active = false;
        }).on('mouseenter', function () {
            active = true;
        });

        setInterval(function () {
            if (!active && visible) {
                hideCtx();
            }
        }, 1000);
    };
    mdiTog.src = 'media/img/ico_16_context.png';
}); 
```

我确实必须尽快关闭此问题，因此欢迎在此代码中进行任何建议/修改/添加以强制 onload 仅执行一次，即使在 IE8/IE9 浏览器中连续多次重新加载也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:28:21.557

如果 onload 触发了两次，您应该使用防范措施防止多次执行处理程序：

```
var mdiTog = new Image();
var hasFired = false;
mdiTog.onload = function () {
   if (hasFired)
       return;
   hasFired = true;

   …
}; 
```

或者，如果您使用的是类似 jQuery 的库，您可以尝试`one`事件绑定方法：

```
var mdiTog = new Image();
M$(mdiTog).one("load", function () {
    …
}); 
```**

# c++ - xcode - 没有添加其他 c 标志的选项

> ID：15449728
> 
> 赞同：4
> 
> 时间：2013-03-16T13:16:41.167
> 
> 标签：c++, ios, xcode, openframeworks

我正在使用 openFrameworks (C++) 和 Pure Data 为 iOS 开发一个项目。我需要在 xcode 项目中添加 C 标志才能编译。当我搜索其他 c 标志选项的构建设置时，它不存在。知道我可能做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T13:21:31.203

Click on Project -> Build Settings ->search **Other C Flags**

[![enter image description here](../Images/32c5286a2c2e3a80f41ede07227b3f08.png)](https://i.stack.imgur.com/jmO32.png)

# java - 需要一些帮助来获取文件以通过按下 JButton 在 TextField 中输出它

> ID：15449737
> 
> 赞同：-3
> 
> 时间：2013-03-16T13:17:30.147
> 
> 标签：java, swing, user-interface, button

这是我删除的其他不需要的代码你现在可以运行吗？？？如果您能运行此程序并告诉我我错的部分，我将不胜感激。这是我的决赛项目我不知道我将如何做下一个和上一个按钮。所以我特别咨询了这个网站

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.util.*;
import java.io.*;
import javax.swing.JOptionPane;
public class dadas implements ActionListener {
static String summary,summary2,summary3;
JFrame frame=new JFrame("Generator X");
JPanel p = new JPanel();
JLabel studentno=new JLabel("Student No:"); 
JLabel name= new JLabel("First name:");
JLabel lastname= new JLabel("Last Name:");
JTextField number= new JTextField();
JTextField name2= new JTextField();
JTextField lastname2= new JTextField();
JButton next=new JButton("NEXT---->");
JButton prev=new JButton("<----PREV");
JButton add=new JButton("Add");
JButton save=new JButton("Save");
public static void main(String args[]) {
    new dadas();
}
public dadas(){
    frame.setSize(300,500);//frame
    frame.setLayout(null);
    frame.setVisible(true);
    frame.setResizable(false);

    studentno.setBounds(30,30,80,60);//LABEL
    number.setBounds(100,45,100,25);//TextField
    number.addActionListener(this);
    number.setDocument(new JTextFieldLimit(7));
    number.setEditable(false);
    name.setBounds(30,70,100,65);//LABEL
    name2.setBounds(100,90,100,28);//TextField
    name2.addActionListener(this);
    name2.setEditable(false);
    lastname.setBounds(30,115,100,65);//LABEL
    lastname2.setBounds(100,133,120,28);//TextField
    lastname2.addActionListener(this);
    lastname2.setEditable(false);
    next.setBounds(150,170,100,30);//Next Button
    next.addActionListener(this);
    prev.setBounds(50,170,100,30);//Previous Button
    prev.addActionListener(this);
    add.setBounds(50,210,100,30);
    add.addActionListener(this);
    save.setBounds(100,250,100,30);//Save Button
    save.addActionListener(this);
    frame.add(studentno);
    frame.add(name);
    frame.add(lastname);
    frame.add(number);
    frame.add(name2);
    frame.add(lastname2);
    frame.add(next);
    frame.add(prev);
    frame.add(add);
    frame.add(save);

}
public void actionPerformed(ActionEvent e){
if(e.getSource()==add){

number.setEditable(true);
name2.setEditable(true);
lastname2.setEditable(true); 
next.setEnabled(false);
prev.setEnabled(false);
}
else if( e.getSource()==save ){//save button

summary = (" "+number.getText()) ;
summary2 = ("" +name2.getText()) ; 
summary3 = (" "+lastname2.getText());
String I = dadas.summary;
String Love = dadas.summary2;
String You = dadas.summary3;
try {

BufferedWriter bw = new BufferedWriter(new FileWriter(newFile("C:\\lol.txt"),true));

bw.write(I);
bw.newLine();
bw.close();

JOptionPane.showMessageDialog(frame,"Your File has been Saved");
}
catch(IOException E)
{
}
}
else if(e.getSource()==next){//Next Button 
    try {
        String filePath = "C:\\lol.txt";
        BufferedReader br = new BufferedReader(new FileReader(filePath));//my file Writer
        String file;
        while((file = br.readLine()) != null){
            number.setText(file);
            lastname2.setText(file);
            name2.setText(file);
        }
        br.close();  
    }catch(IOException ex) {
        ex.printStackTrace(); 
     }
  }
}
} 
```

![在此处输入图像描述](../Images/9696d0112c5a8bc5a0ff5401ffc9230f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:36:52.063

关于：

```
try
{
String filePath = "C:\\lol.txt";
BufferedReader br = new BufferedReader(new FileReader(filePath));
String file;
while((file = br.readLine()) != null){
file = br.readLine();
number.setText(file);
lastname2.setText(file);
name2.setText(file);
br.close();

}
}catch(IOException F)
{
} 
```

*   您仍然忽略异常，这是您永远不应该做的事情。同样，至少打印一个堆栈跟踪。
*   您在while 循环中从文件中读取*两次。*在 while 条件下只读取一次。
*   *每次尝试读取一行*时，您都会关闭 BufferedReader 。只有在阅读完整个文件后才应关闭它。
*   您的代码格式仍然很差，因此*很难*阅读。请付出一些努力，以免使您的代码比需要的更难阅读。这对你要求不高，真的。

IE，

```
BufferedReader br = null;
try {
  br = new BufferedReader(new FileReader(filePath));
  String filePath = "C:\\lol.txt";
  // String file; // bad variable name
  String line; // better name
  while((line = br.readLine()) != null){
    // file = br.readLine(); // Don't read twice

    // You'll probably want to split the line in order to extract info from it
    // not sure what your line looks like so I can't suggest a String to split on
    String[] tokens = line.split(...); // this needs to be fixed

    number.setText(tokens[0]);  // ? first token in line? not sure
    lastname2.setText(tokens[1]); // ? 2nd item in tokens array? not sure
    name2.setText(tokens[2]); // ? 3rd item in tokens array? not sure
    // br.close(); // ** no don't close the br here.
  }
}catch(IOException ex) {
  ex.printStackTrace(); // Always catch or throw your exceptions. Don't ignore them.
} finally {
  br.close();  // better to have this in a finally block actually
} 
```

# jquery - IE9 问题 - Jquery-uploadify 不存在所需的 MultipartFile[] 参数

> ID：15449738
> 
> 赞同：0
> 
> 时间：2013-03-16T13:17:35.023
> 
> 标签：jquery, spring-mvc

我有角度 Spring MVC 应用程序，我在其中使用 jquery-uploadify 插件来上传文件。下面是代码

我包含的不同 js 文件

```
<!--  files for image uploader extension  -->
<script type="text/javascript" src="resources/scripts/jqueryUploadify/jquery.Jcrop.min.js"></script>

<script type="text/javascript" src="resources/scripts/jqueryUploadify/jquery.fileupload.js"></script>
<script type="text/javascript" src="resources/scripts/jqueryUploadify/jquery.fileupload-fp.js"></script>
<script type="text/javascript" src="resources/scripts/jqueryUploadify/jquery.fileupload-ui.js"></script>
<script type="text/javascript" src="resources/scripts/jqueryUploadify/uploadHandler.js"></script>
<!-- The XDomainRequest Transport is included for cross-domain file deletion for IE8+ -->
<!--[if gte IE 8]><script type="text/javascript" src="resources/scripts/jqueryUploadify/jquery.xdr-transport.js"></script><![endif]--> 
```

下面是加载文件上传的javascipt。

```
 $(this).fileupload({
            // Uncomment the following to send cross-domain cookies:
            //xhrFields: {withCredentials: true},
            url: uploadSettings.upload_url,
            type: 'POST'
}); 
```

此代码在 IE10+、chrome、firefox 中运行良好

> 但它在 IE9 上失败了

并给出 - 服务器上不存在所需的 MultipartFile[] 参数

请建议对此的可能解决方法是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:45:35.860

我错过了下面的 javascript 文件，它解决了这个问题

```
<script type="text/javascript" src="resources/scripts/jqueryUploadify/jquery.iframe-transport.js"></script> 
```

# django - 使用 django 进行模型表单验证

> ID：15449744
> 
> 赞同：0
> 
> 时间：2013-03-16T13:18:01.417
> 
> 标签：django, validation, django-forms

我正在使用模型形式。我试图做同样的事情，但我没有得到答案。我不确定我写的表单验证方法是否正确。

**表格.py**

```
class BookForm(ModelForm):
    class Meta:
        model = Book
        fields=['book_id', 'book_name', 'author_name','publisher_name']

    def clean_book_name(self):
        book_name = self.cleaned_data['book_name']
        if book_name is None:
            raise ValidationError('field mandatory')
        return book_name

    def clean_author_name(self):
        author_name=self.cleaned_data['author_name']
        num_words = len(author_name.split())
        if num_words < 4:
            raise forms.ValidationError("Not enough words!")
        return author_name 
```

我正在使用模型表单。我没有在 views.py 中写任何东西来进行验证。

**模板**

```
<div align="center">

    <form action="/addbook/" method="POST"> {% csrf_token %}

        <div class="field">
            {{ form.book_name.errors }}
            <label for="id_book_name">Book Name:</label>
            {{ form.book_name }}
        </div>
        <div class="field">
            {{ form.author_name.errors }}
            <label for="id_email">Author name:</label>
            {{ form.author_name }}
        </div>
        <div class="field">
            {{ form.publisher_name.errors }}
            <label for="id_message">Publisher Name:</label>
            {{ form.publisher_name }}
        </div> 
```

谁能帮我解决这个问题？请给我一个想法，或者如果我的代码中有任何错误，请通知。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:25:32.137

```
def clean_book_name(self):
    book_name = self.cleaned_data['book_name']
    if not book_name:
        raise forms.ValidationError('field mandatory')
    return book_name 
```

# javascript - Jquery 验证不起作用

> ID：15449748
> 
> 赞同：0
> 
> 时间：2013-03-16T13:18:10.533
> 
> 标签：javascript, jquery

例如：我这里有两个字段。如果我填写 input type="second" 并发布它，如果我没有填写 input type = first，它不会验证第一个字段，它应该告诉我填写第一个字段，但反之亦然，如果我填写 input type = first 并且如果我没有输入 type = second，它显示错误。

```
<form name="test" onsubmit="return te()" method="post">
    <input type="text" id="first">
    <span id="">
    <input type="text" id="second">
    <span id="">
    <input type="submit" value="submit"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:21:50.577

```
function te() {
var valid = true;

if ($('#first').val() =="")     
        valid = false;         
if ($('#second').val( == "") 
        valid = false;
if(valid == false)
 $("#error").text('Fill all required fields')    
    return valid;
}

<html>
 <head>
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
 </head>

 <body>
 <form name="test" onsubmit="return te()" method="post">
    <input type="text" id="first">
    <span id="">
    <input type="text" id="second">
    <span id="">
    <input type="submit" value="submit">
        </form>
    <script>
    function te() {
         var valid = true;

           if ($('#first').val() =="")     
             valid = false;         
          if ($('#second').val() == "") 
           valid = false;
         if(valid == false)
            $("#error").text('Fill all required fields')    
        return valid;
    }

    </script>
 </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:21:13.483

您的语法错误，可能是错误的原因..

```
$(#first).val()) 
```

将其更改为

```
$("#first").val()) 
```

&

```
$(#second).val() 
```

改成

```
$("#second").val() 
```

如果没有，请检查控制台是否有错误。

# jquery - 通过 AJAX 和 jQuery 清除并重新加载 div

> ID：15449751
> 
> 赞同：8
> 
> 时间：2013-03-16T13:18:24.357
> 
> 标签：jquery, ajax, coldfusion

我有一个 ajax 调用，它从 Coldfusion CFC 方法请求数据并在 div 中显示数据。还有一个删除此数据的链接，该链接使用相同的 CFC 但删除方法不同。两种方法都可以独立工作。我似乎无法弄清楚如何将调用封装在一个函数中，并在删除成功后刷新 div。这是代码：

**ajax 调用**

```
 var caseid = <cfoutput>'#URL.ID#'</cfoutput>;
    var siteurl = <cfoutput>'#APPLICATION.url#'</cfoutput>;
    var html = "";

    function assetsPost() {
    $.ajax({
          cache: false,
          type:'GET',
          url:'cfc/cfc_Asset.cfc?method=qAsset&returnformat=json',
          dataType: "json",
          data: {
              assetgrp_id:  caseid,
            },
          success:function(data) {
            if(data) {   // DO SOMETHING 
            jQuery.each(data, function(i, val) {    
                 $('#picoutputannotation').html(data[i].annotation);
                 var asset_id   = data[i].value;
                 var img        = siteurl + 'assets/images/thumbs_check2/' + data[i].thumb;
                 var removeimg  = siteurl + 'assets/images/remove.png';
                 var annotation = data[i].annotation;
                     html += "<div class='block-pics'>";
                     html += "<img src='" + img + "'>";
                     html += "<div class='note'>";
                     html += annotation;
                     html += "</div>";
                     html += "<div class='block-pics-remove'>";
                     html += "<a class='delete-asset' id='" + asset_id + "'><img src='" + removeimg + "'></a>";
                     html += "</div>";
                     html += "<div class='bot'></div>";
                     html += "</div>";
            });
                 $('#picoutput').html( html );
            } else { // DO SOMETHING 
          }
        }
    });
}  
assetsPost(); 
```

**这是删除脚本：**

```
 $(document).on("click", ".delete-asset", function() {
   var del_id = $(this).attr('id');
   $.ajax({
      type:'GET',
      url:'cfc/cfc_Asset.cfc?method=DeleteAsset&returnformat=json',
      dataType: "json",
      data: {
          delete_id:    del_id,
        },
      success:function(data) {
        if(data) {   // DO SOMETHING
            $('#picoutput').empty();
            {assetsPost()};
            $('#picoutput').fadeIn('fast');

        } else { // DO SOMETHING 
      }
    }
   });
 }); 
```

**这是html：**

```
<div class="grid_6">
                <div id="picoutput"></div>
            </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T13:20:57.120

只需通过分配空字符串将 html 设置为空。

```
success:function(data) 
{
    $('#picoutput').html("");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:49:48.027

以下是我将采取的故障排除步骤：

1.  在您的删除部分替换`$('#picoutput').html("");`为 `$('#picoutput').empty();`
2.  `{//assetsPost()};`在您的删除脚本中注释掉。验证内容是否正确删除
3.  恢复注释掉的行。在这里放置一个警报（或者如果可以的话，一个断点）。

> ```
> function assetsPost() {
>     alert("Assets Post");
>     $.ajax({
>     });
> } 
> ```

验证此函数仅被调用一次。

*   在添加 html 的底部放置一个警报（断点）

> ```
> alert(html)
> $('#picoutput').html( html ); 
> ```

验证从 cfc 调用返回的 html 是否包含您认为的内容。

# android-fragments - Android 导航选项卡：恢复片段视图状态

> ID：15449753
> 
> 赞同：12
> 
> 时间：2013-03-16T13:18:35.573
> 
> 标签：android-fragments, android-tabs

我试图了解在导航选项卡中使用片段时如何保留片段视图状态。在我的努力中，我遇到了两个我找不到任何合适解决方案的问题。

我有两个选项卡，Tab1 和 Tab2。Tab1 的布局由 定义`FragmentA`，Tab2 的布局由 定义`FragmentB`。我遵循了[这里](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)给出的方法（编辑：自从提出这个问题以来，文档已经改变）。

**第一个问题：**即使我的视图有 ID，但在重新附加片段时（在选项卡开关旋转之后），它们的状态并没有完全恢复。特别是：`EditText`带有 ID*的确实会*保存其输入的文本，但*不会*保存其启用状态。此外，即使按钮具有 ID，启用或禁用按钮也不会保存。对于这个问题，我发现了两种可能的解决方法：

1.  在切换标签时使用`hide()/show()`而不是。`attach()/detach()`
2.  在中`onPause()`，将当前片段视图状态保存在片段的`View`实例变量中`getView()`。`onCreateView(Bundle savedInstanceState)`检查该字段是否为非空，如果是，则返回该字段的值。这个解决方案看起来很老套，有人告诉我它还可能在我的应用程序中引入内存泄漏。

**第二个问题：**考虑以下用户交互：用户从 Tab1 开始并进行一些更改，使 Tab1 的视图状态与其默认状态不同（我们希望片段通过 tabswitches 和设备倾斜保存此视图状态） . 用户然后转到 Tab2。然后用户倾斜她/他的设备（仍然在 Tab2）。用户然后切换到 Tab1（在新的屏幕方向）。现在，问题是：当用户最初从 Tab1 切换到 Tab2 时，片段被分离，因此它的视图被丢弃（即使片段实例仍然存在）。当用户然后倾斜设备时，活动 - 以及`FragmentA`与之`FragmentB`相关的活动 - 被破坏。自从`FragmentA`此时不再有视图（请记住：它已分离），我们无法在调用`FragmentA.onSaveInstanceState(Bundle savedInstanceState)`. 在这种情况下如何恢复片段视图状态？将每个视图元素的不同状态标志保存为 SharedPreferences 是唯一可行的解​​决方案吗？对于这样的“日常工作”来说，这似乎太复杂了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T17:50:20.990

**问题1：**

默认情况下，Android 不会保存您的视图启用状态。似乎只保存了直接受用户操作影响的东西（没有额外的代码）。对于普通视图，[不保存任何信息](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/android/view/View.java#View.onSaveInstanceState%28%29)，对于 EditText 是其子类的 TextView，将[保存输入的文本](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/android/widget/TextView.java#TextView.onSaveInstanceState%28%29)（如果设置了[freezesText](http://developer.android.com/reference/android/widget/TextView.html#setFreezesText%28boolean%29)）。

如果你想拯救其他任何事情，你必须自己做。[这](https://stackoverflow.com/questions/3542333/how-to-prevent-custom-views-from-losing-state-across-screen-orientation-changes/)是一个带有一些答案的问题，显示了如何实现自定义视图状态保存。如果您遵循这种方法，您可以坚持使用附加/分离。

**问题2：**

你是对的，在你的视图已经被销毁后可以调用 Fragment.onSaveInstanceState(Bundle) 。但是，这不是您应该保存视图状态的地方。在分离片段时，Android 会在销毁您的视图之前调用 View.onSaveInstanceState()。它会保存此状态并在您再次附加片段时将其返回给您。这正是您在标签之间正常翻转而没有旋转时发生的情况。分离时不调用 Fragment.onSaveInstanceState(Bundle)。即使您旋转设备，由于分离而保存的视图状态也会保留。如果按照上面的说明实现 View.onSaveInstanceState()，即使在 Tab1-Tab2-rotate-Tab1 场景中，您的视图状态也将被正确保存和恢复。

**旁注：**当您尝试旋转时，文档中 的[示例代码似乎存在一些问题。](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)TabListener 的生命周期与 Activity 的生命周期相同——每次旋转时都会创建一个新的。这意味着每次旋转时它也会丢失对片段的内部引用。添加的片段会自动重新创建，因此 TabListener 无需在旋转后尝试创建新实例并添加它。相反，内部引用应该只是尝试在片段管理器中找到具有适当标记的片段。旋转后它仍然存在。

另一个问题是未保存所选选项卡，但这在示例底部有说明。您可以将其保存在 Activity.onSaveInstanceState(Bundle) 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T13:49:05.910

```
private ViewPager viewPager;
viewPager = (ViewPager) findViewById(R.id.pager);
mAdapter = new TabsPagerAdapter(getSupportFragmentManager());
viewPager.setAdapter(mAdapter);
viewPager.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {

        @Override
        public void onPageSelected(int position) {
            // on changing the page
            // make respected tab selected
            actionBar.setSelectedNavigationItem(position);
        }

        @Override
        public void onPageScrolled(int arg0, float arg1, int arg2) {
        }

        @Override
        public void onPageScrollStateChanged(int arg0) {
        }
    });
}

@Override
public void onTabReselected(Tab tab, FragmentTransaction ft) {
}

@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    // on tab selected
    // show respected fragment view
    viewPager.setCurrentItem(tab.getPosition());
}

@Override
public void onTabUnselected(Tab tab, FragmentTransaction ft) {
} 
```

# c++ - 256 位 Rijndael 块大小？

> ID：15449756
> 
> 赞同：3
> 
> 时间：2013-03-16T13:18:51.333
> 
> 标签：c++, encryption, aes, crypto++

我正在尝试使用 cryptopp 将解密例程从 C# 程序移植到 C++，但我遇到了问题。在 C# 程序中，密钥和 IV 都是 256 位。所以我试着做这样的事情：

```
 char *hash1 = "......";
    std::string hash2;

    CryptoPP::StringSource(hash1, true,new CryptoPP::Base64Decoder(new CryptoPP::StringSink(hash2)));
    CryptoPP::Rijndael::Decryption decryptor(key, 32);
    CryptoPP::CBC_Mode_ExternalCipher::Decryption cbcDecryption( decryptor, iv);
    CryptoPP::StreamTransformationFilter stfDecryptor(cbcDecryption, (new CryptoPP::StringSink( decryptedData ) ));
    stfDecryptor.Put( reinterpret_cast<const unsigned char*>( hash2.c_str() ), hash2.size() );
    stfDecryptor.MessageEnd(); 
```

我得到

> StreamTransformationFilter：密文长度不是块大小的倍数。

我试图像这样传递 IV 大小：

```
 CryptoPP::CBC_Mode<CryptoPP::Rijndael >::Decryption decr;
    decr.SetKeyWithIV(key, 32, iv, 32); 
```

但后来我得到：

> IV 长度 32 超过最大值 16。

那么，当数据由长度= 32的IV加密时，如何解密数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T20:05:18.023

从实现来看，crypto++ 的当前迭代只支持块大小为 16 字节的 Rijndael。由于 CBC 模式的 IV 必须精确地是单个块，因此具有 256 位块大小的 Rijndael 似乎是不可能的。

# iphone - iPhone SDK 中的多列表格视图

> ID：15449758
> 
> 赞同：-1
> 
> 时间：2013-03-16T13:18:56.963
> 
> 标签：iphone, ios, objective-c, xcode, uitableview

在我的应用程序中，我想创建一个像 Excel 工作表一样的多列 TableView。

表格视图也可能大于屏幕大小，所以我也想水平滚动它。

**我怎样才能做到这一点？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:26:04.113

## iOS 6 之前

您需要自己实现它。这是不可用的，因为非常大的电子表格难以导航，您可能应该重新考虑数据的呈现方式。

鉴于该警告，您将需要通过`UIScrollView`自己管理将单元格附加到 scrollView 来实现这一点。如果您提前附加所有视图，您将出现不连贯的滚动，因此您希望在它们进入视图时附加和删除它们。

你也可以在 Github 上查看[KKGridView](https://github.com/kolinkrewinkel/KKGridView)项目。这可能正是您想要的。

## iOS 6 UICollectionView

这个类感觉类似，`UITableView`但它支持网格和任何你可以梦想的自定义布局。查看 WWDC 2012 视频中的视频介绍集合视图。这真是太神奇了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:27:07.387

最好选择`UICollectioView`或`UISrollView`代替 `UITableView`

该类`UICollectionView`管理数据项的有序集合并使用可定制的布局呈现它们。

关于使用 `UITableView`，您可以`custom UITableView cells`通过使用 Interface Builder 并加载自定义 nib 来创建。它只能垂直滚动

您可以在[此处查看详细信息](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7)

# r - qqline没有给出我预期的线路

> ID：15449760
> 
> 赞同：3
> 
> 时间：2013-03-16T13:19:01.067
> 
> 标签：r, plot, quantile, multivariate-testing

如果我针对卡方分布绘制我的多元数据的马氏距离的多元 qqplot，我希望随附的 qqline 是一条截距为 0 且斜率为 1 的线。但如果我运行以下代码：

```
scores<-matrix(rnorm(100*3),nc=3)
mah_scores = mahalanobis(scores,center=colMeans(scores),cov=cov(scores))
chi_scores = qchisq(ppoints(nrow(scores)),df=3)
qqplot(x=chi_scores,y=mah_scores,asp=1)
abline(a=0,b=1)
qqline(mah_scores, distribution = function(p) qchisq(p,df = 3),col="red") 
```

我得到下图：

![qqplot 与 abline 和 qqline](../Images/09c9d6716cf4095953064b5912edff7f.png)

我预计 qqline（红色）与截距 0 和斜率 1（黑色）的线相同。谁能向我解释为什么这两条线不匹配？

（我正在运行 R 版本 2.15.3 (2013-03-01)）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T13:31:18.840

默认情况下`qqline`，通过第一和第三四分位数绘制一条线。请参阅帮助文件 ( `?qqline`)。

```
#highlight first and third quartiles
points(quantile(chi_scores,c(.25,.75)),
       quantile(mah_scores,c(.25,.75)),col="blue",cex=2,bg="blue",pch=21) 
```

![在此处输入图像描述](../Images/e19a1e8a3a2cd698fbee5a9fe7d10dfe.png)

# avaudioplayer - 在没有 sleep() 的情况下使用 AVAudioPlayer 播放 2 个声音；

> ID：15449762
> 
> 赞同：0
> 
> 时间：2013-03-16T13:19:17.630
> 
> 标签：avaudioplayer, playback, audio

我在`scrollview`using中播放了这 2 种声音`AVAudioPlayer`。

问题是这`sleep()`会造成延迟，我需要一种替代方法，以便在没有睡眠功能的情况下更轻松地一个接一个地播放两种声音。

PS：文件名由用户所在的scrollView中的页面给出。

```
 if( nextPage!=6 )  {
    [scrMain scrollRectToVisible:CGRectMake(0, nextPage*250, scrMain.frame.size.width, scrMain.frame.size.height) animated:YES];
    pgCtr.currentPage=nextPage;

    NSString *path;
    NSError *error;
    path = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"pas%02i",nextPage+1] ofType:@"m4a"];
    if ([[NSFileManager defaultManager] fileExistsAtPath:path])
    {
        player = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:&error];
        player.volume = 0.5f;
        [player prepareToPlay];
        [player setNumberOfLoops:0];
        [player play];
    }
    sleep(1);

    NSString *path2;
    NSError *error2;
    path2 = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"passun%02i",nextPage+1] ofType:@"m4a"];
    if ([[NSFileManager defaultManager] fileExistsAtPath:path2])
    {
        player = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path2] error:&error2];
        player.volume = 0.5f;
        [player prepareToPlay];
        [player setNumberOfLoops:0];
        [player play];
    } 
```

我怎样才能做到这一点？

# authentication - 以没有密码的用户身份登录（对于管理员用例。）

> ID：15449765
> 
> 赞同：2
> 
> 时间：2013-03-16T13:19:32.083
> 
> 标签：authentication, meteor

要检查用户的视图是否正常工作或改变用户的观点（在开发中），化身某个用户可能非常有用。

我将如何使用 Meteor 做到这一点？最好的解决方案是独立于帐户身份验证的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-01T04:09:58.283

要在生产环境中模拟用户，您可以调用`setUserId`服务器和`Meteor.connection.setUserId`客户端。有关详细信息，请参阅我的[博客文章](https://dweldon.silvrback.com/impersonating-a-user)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T14:35:58.330

如果您正在使用`Meteor.userId()`并`Meteor.user()`在您的 javascript 中识别您的人，您可以使用类似这样的东西在您的客户端 js 的最顶部覆盖它

```
Meteor.userId = function (impersonate_id) {
    return (impersonate_id) ? impersonate_id : Meteor.default_connection.userId();
}

Meteor.user = function (impersonate_id) {
    var userId = Meteor.userId(impersonate_id);
    if (!userId)
        return null;
    return Meteor.users.findOne(userId);
} 
```

现在，当您使用`Meteor.userId`或`Meteor.user`修改代码时，无论您在哪里使用`Meteor.user`&都`Meteor.userId`接受一个参数。因此，当您想模拟用户时，只需将`_id`您要登录的用户的参数传递给它

```
Meteor.user("1"); //Loads the data for user with _id 1
Meteor.user(); //Loads the actual logged in user 
```

此外，这仅在您实际上是管理员并且您的发布功能允许您查看所有用户的数据时才有效

# git - 使用 Jenkins 和 Git 进行身份验证

> ID：15449768
> 
> 赞同：5
> 
> 时间：2013-03-16T13:19:46.977
> 
> 标签：git, jenkins

我想将 Jenkins 与 Bitbucket 上的存储库一起使用。为此，我使用 user`jenkins`和 command创建了一个 ssh 密钥`ssh-keygen -t rsa -C "my_email"`。我在 Bitbucket 上添加了公钥，我可以使用`git clone ...`.

但是当我在 Jenkins 中配置项目时，我把 url`git@bitbucket.org:my_username/my_repository.git`

这是错误：

```
Failed to connect to repository : Command "git ls-remote -h git@bitbucket.org:skurty/ma-carte-augmentee-bo.git HEAD" returned status code 128:

stdout: 

stderr: ssh_askpass: exec(/usr/bin/ssh-askpass): No such file or directory 
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

如果我执行 ssh git@bitbucket.org，我会得到：

```
PTY allocation request failed on channel 0
conq: logged in as my_username.

You can use git or hg to connect to Bitbucket. Shell access is disabled.
Connection to bitbucket.org closed. 
```

我还尝试创建文件`~/.ssh/authorized_keys`并将公钥放入其中，但同样的问题。

我还用`sudo /etc/init.d/jenkins restart`

谢谢您的帮助 ：）

PS：我在 Debian Squeeze 64 位

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-30T22:21:37.707

问题来自您从未在 GIT 上使用用户 JENKINS 登录的事实

因此，您应该执行以下操作：

登录 JENKINS 机器：

```
sudo su jenkins
ssh git@bitbucket.org 
```

验证访问。

现在您应该可以使用 git 执行 jenkins 构建了

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-30T20:54:18.710

我发现让它工作的唯一方法是从我的 ssh 密钥中删除密码。我猜 jenkins 的 git 插件无法提供密码，即使我在 Credentials 插件的高级部分设置它也是如此。

`$ ssh-keygen -p`

提供您的私钥的位置，输入您当前的密码，然后将新密码留空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T17:51:04.323

在用户的主目录`id_rsa`中，您的私钥是否被调用？`jenkins`

如果您使用本机软件包安装，则该文件应位于，`/var/lib/jenkins/.ssh`并且权限`/var/lib/jenkins/.ssh`应为`700`，而权限`/var/lib/jenkins/.ssh/id_rsa`应为`600`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-10T18:58:12.587

您可能还需要在您的 BitBucket 帐户中添加您的 SSH 密钥，以及在 Manage_Account>>SSH_Keys>>添加密钥

但是，如果您仍然遇到任何问题：请尝试以下分步教程：

[http://777chmod.wordpress.com/2013/07/28/jenkins/](http://777chmod.wordpress.com/2013/07/28/jenkins/)

[http://777chmod.wordpress.com/2013/08/01/ssh/](http://777chmod.wordpress.com/2013/08/01/ssh/)

# ios - 来自 FTP 目录的特殊字符

> ID：15449773
> 
> 赞同：0
> 
> 时间：2013-03-16T13:20:06.263
> 
> 标签：ios, xcode, nsstring

我正在使用黑色浣熊类进行 ftp 会话。像这样获取 FTP 目录的内容

```
arrayHelper.FTPFileName = [file objectForKey:(id)kCFFTPResourceName] 
```

并写入 nsmutablearray

我在 ftp 共享上有一些像这样的特殊字符的文件夹：

“Heino - Mit Freundlichen Gr\U00b8ssen (豪华版) (2013) - 320”

我怎样才能转换字符串？

我尝试了以下方法：

```
NSString *uncodedName = [file objectForKey:(id)kCFFTPResourceName];
        NSLog(@"Uncoded Name is %@",uncodedName);
        arrayHelper.FTPFileName = [NSString stringWithCString:[uncodedName cStringUsingEncoding:NSUTF8StringEncoding]
                                                     encoding:NSNonLossyASCIIStringEncoding];
        NSLog(@"Coded Name is %@",arrayHelper.FTPFileName); 
```

但返回零...

NS日志：

[7344:c07] 未编码名称为 Heino - Mit Freundlichen Gr¸ssen（豪华版）（2013 年）- 320 [7344:c07] 编码名称为（空）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:46:55.043

可以在[CFFTPStream.c](http://www.opensource.apple.com/source/CFNetwork/CFNetwork-128/FTP/CFFTPStream.c?txt)的源代码中看到， 它`CFFTPStream`以“Mac OS Roman”编码解释 FTP 服务器上的所有文件名。您的 FTP 服务器似乎使用 Windows 编码的文件名，因此在`CFFTPStream`.

但是你可以用

```
NSString *uncodedName = [file objectForKey:(id)kCFFTPResourceName];
NSData *data = [uncodedName dataUsingEncoding:NSMacOSRomanStringEncoding];
arrayHelper.FTPFileName = [[NSString alloc] initWithData:data encoding:NSWindowsCP1252StringEncoding]; 
```

# heroku - 如何清理 Heroku 依赖缓存（非托管 Maven 依赖）

> ID：15449785
> 
> 赞同：14
> 
> 时间：2013-03-16T13:21:11.287
> 
> 标签：heroku

我必须在我的 java/maven heroku 应用程序中使用非托管 SNAPSHOT 依赖项。我使用本文中描述的项目本地 maven 存储库来执行此操作[。](https://devcenter.heroku.com/articles/local-maven-dependencies)

Heroku 缓存构建之间的依赖关系。不幸的是，如果 SNAPSHOT 版本发生变化，Heroku 不会注意到并继续使用缓存的依赖项。这会导致编译错误，因为我依赖于 SNAPSHOT 版本的更改。

*有没有办法手动或自动清理这个依赖缓存？*

我找到了这个[maven 插件](http://www.jcabi.com/jcabi-heroku-maven-plugin/changes-report.html)（它进行本地构建并将生成的人工制品推送到 heroku），但它并不是我真正想要的方式。

有人可能会争辩说首先使用此快照依赖项是一种不好的做法，但我认为清理现金还有其他或多或少的正当理由，例如泄漏存储，因为如果从本地项目中删除非托管依赖项，甚至不会删除它们存储库。

我很感激你的回答

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-19T01:47:49.683

~~[java buildpack](https://github.com/heroku/heroku-buildpack-java)的一个[分支](https://github.com/heroku/heroku-buildpack-java/tree/cache_clear)可以清除 maven 缓存。要使用它，请将您的应用程序配置为使用分支：`cache_clear`~~

~~`heroku config:set BUILDPACK_URL=https://github.com/heroku/heroku-buildpack-java.git#cache_clear`~~

===更新===

有一个[插件](https://github.com/heroku/heroku-repo)可以清除任何应用程序上的缓存。安装它并运行[purge-cache](https://github.com/heroku/heroku-repo#purge_cache)命令。

`$ heroku plugins:install https://github.com/heroku/heroku-repo.git`

`$ heroku repo:purge_cache -a appname`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-23T16:01:56.763

通过控制台登录heroku，进入你应用的git仓库目录，运行以下命令，再次尝试推送到heroku git仓库

```
$ heroku config:set MAVEN_CUSTOM_GOALS="clean package"
$ heroku config:set MAVEN_CUSTOM_OPTS="--update-snapshots -DskipTests=true" 
```

现在，它将`SNAPSHOT`在构建之前从存储库中下载最新版本。有关更多详细信息，请参阅此[heroku build pack for java](https://github.com/heroku/heroku-buildpack-java)。

您还可`settings.xml`以为您的 Maven 配置自定义，请参阅此[heroku 文档](https://devcenter.heroku.com/articles/using-a-custom-maven-settings-xml)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-15T20:15:03.077

我用另一种方法编写了插件：将容器 + 战争图像捆绑到一个 git 存储库基础图像中（现在，它要么是 winstone 和/或码头），它被推送到 Heroku，因此更容易部署（我认为） :]

[http://cedarhero.ingenieux.com.br/heroku-maven-plugin/](http://cedarhero.ingenieux.com.br/heroku-maven-plugin/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-23T01:20:48.947

这并不能直接回答问题，但如果您在 Clojure 项目中遇到同样的问题（使用 Leiningen），有一个比每次构建都清除缓存更好的方法来处理这个问题：使用`:update :always`您正在使用的存储库的属性. （[https://github.com/technomancy/leiningen/blob/master/sample.project.clj#L91](https://github.com/technomancy/leiningen/blob/master/sample.project.clj#L91)）

```
:repositories [["releases" {:url "http://blueant.com/archiva/internal"
                            ;; How often should this repository be checked for
                            ;; snapshot updates? (:daily, :always, or :never)
                            :update :always}]] 
```

# asp.net - How can I change a single aspx page from hosted published website?

> ID：15449789
> 
> 赞同：1
> 
> 时间：2013-03-16T13:21:34.560
> 
> 标签：asp.net, visual-studio-2010

I have made some edits in my aspx code behind cs file. I can't make the site down since our site will miss our viewers.I want to make the update possible with this single page upload.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:46:57.697

您正在寻找 IIS asp.net 应用程序的无缝部署策略；这可以通过两台机器和它们之前的负载平衡器来实现 - [ASP.NET 中的无缝部署（IIS 在新的工作进程准备好之前杀死工作进程）](https://stackoverflow.com/questions/5358020/seamless-deployment-in-asp-net-iis-kills-worker-process-before-new-worker-proce?lq=1)

另一种令人费解的方法是在同一主机上托管两个相同的网站并在它们之间切换，正如所解释的 -[组件化的 ASP.NET MVC 应用程序是否可以顺利部署？](https://stackoverflow.com/questions/4521208/is-smooth-deployment-possible-with-componentized-asp-net-mvc-apps#4526754)

# qt - How to declare functor parameter in Qt connect?

> ID：15449792
> 
> 赞同：4
> 
> 时间：2013-03-16T13:21:45.300
> 
> 标签：qt

Qt can use lambda function in signal-slot connection by using functor parameter [as shown here](http://qt-project.org/doc/qt-5.0/qtcore/qobject.html#connect-5). But how to declare functor parameter in Qt connect? For example,

```
QAction* CreateAction(QString text, QObject* parent, Functor functor)
{
    QAction* action = new QAction(icon, text, parent);
    QObject::connect(action, &QAction::triggered, functor);
    return action;
} 
```

Question is how to include files to let the compiler know the "Functor" type.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T16:05:47.613

`Functor`不是真正的类型。它是 Qt 文档的占位符。真实类型是模板类型参数。检查`QObject.h`你是否真的感兴趣。在实践中，您可以使用[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)中定义的`<functional>`，来代替它。

对于问题中的函数，最简单的改变是使其成为模板函数：

```
template<Functor>
QAction* CreateAction(QString text, QObject* parent, Functor&& functor)
{
    QAction* action = new QAction(icon, text, parent);
    QObject::connect(action, &QAction::triggered, std::forward<Functor>(functor));
    return action;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-16T16:06:24.337

[http://qt-project.org/doc/qt-5.0/qtcore/qobject.html#connect-5](http://qt-project.org/doc/qt-5.0/qtcore/qobject.html#connect-5)

函子只是一个`void *`或一个空指针。它可能需要是静态的。这似乎类似于常规的回调函数。

这是文档中的一个示例：

```
void someFunction();
QPushButton *button = new QPushButton;
QObject::connect(button, &QPushButton::clicked, someFunction); 
```

# haskell - Condition in do block

> ID：15449795
> 
> 赞同：3
> 
> 时间：2013-03-16T13:22:36.173
> 
> 标签：haskell, io

Why does the following block of code:

```
main = do
    line <- getLine
    if null line
        then runTestTT tests
        else do
            line2 <- getLine
            seq::[Int] <- return $ map read $ words line2
            print $ process seq 
```

throw an error:

```
lgis.hs:28:13:
    Couldn't match type `()' with `Counts'
    Expected type: IO Counts
      Actual type: IO ()
    In a stmt of a 'do' block: print $ process seq
    In the expression:
      do { line2 <- getLine;
           seq :: [Int] <- return $ map read $ words line2;
           print $ process seq }
    In a stmt of a 'do' block:
      if null line then
          runTestTT tests
      else
          do { line2 <- getLine;
               seq :: [Int] <- return $ map read $ words line2;
               print $ process seq } 
```

Even though both:

```
main = do
    runTestTT tests 
```

and

```
main = do
    line <- getLine
    line2 <- getLine
    seq::[Int] <- return $ map read $ words line2
    print $ process seq 
```

work fine?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T13:25:37.237

an 的两个分支`if then else`必须具有相同的类型，但

```
runTestTT tests :: IO Counts 
```

和

```
print $ process seq :: IO () 
```

您可以将 a 添加`return ()`到`then`分支中，现代的方法是使用[`Control.Monad.void`](http://hackage.haskell.org/package/base-4.7.0.0/docs/Control-Monad.html#v%3avoid),

```
main = do
    line <- getLine
    if null line
        then void (runTestTT tests)         -- formerly: runTestTT tests >> return ()
        else do
            line2 <- getLine
            seq::[Int] <- return $ map read $ words line2
            print $ process seq 
```

修复它（或者你可以添加一个`return some_value_of_type_Counts`到`else`分支）。

# html - css footer doesn't remain at the end of the content

> ID：15449796
> 
> 赞同：0
> 
> 时间：2013-03-16T13:22:38.960
> 
> 标签：html, css

I have a website and I want to put a footer at the end of each page.

The page `login` has content, but the footer doesn't remain at the end of it.

### login

```
<div class="login">
    <form id="loginForm" method="POST" action="<?php echo URL; ?>Login/run">
        <li>
            <label>
                Username:
            </label>
            <input type="text" name="username"/>
            <span class="errorMessage"></span>
        </li>
        <li>
            <label>
                Password:
            </label>
            <input type="text" name="password"/>
            <span class="errorMessage"></span>
        </li>
        <li>
            <label>
                Type:
            </label>
            <select name="typeOfUser">
                <option  value="1">Restaurant</option>
                <option value="2">Customer</option>
            </select>
        </li>
        <li>
            <label></label>
            <input type="submit" value="Login"/>
        </li>
    </form>
</div> 
```

### css

```
.login{
    position: relative;top: 100px;
    margin-left: 280px;
}
.login li{
    list-style: none;
    padding-bottom: 10px;
}
.login label{
    color: blue;
    display: inline-block;
    width: 100px;
}
.login input{
    padding: 0.4em;
}
.login select{
    padding: 0.4em;
} 
```

![my rendered HTML page](../Images/8e845ba377f3bcea259d3f3673f815c3.png)

footer

```
#footerContent{
    position: relative;
    bottom: 0px;
    width: 100%;
    height: 48px;
    background-color: #646467;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:32:15.560

将你的`login div`CSS 更改为

```
.login{

position: relative;
margin-top: 100px;
margin-left: 280px;
} 
```

和页脚将在登录 div 之后出现。

[检查这个jsfiddle](http://jsfiddle.net/NIkhar/9Xcrr/)

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T13:27:29.710

尝试这个

```
#footerContent{
position: absolute;
bottom: 0;
width: 100%;
height: 48px;
background-color: #646467;
} 
```

# c++ - choose the function to call at runtime in c++

> ID：15449798
> 
> 赞同：1
> 
> 时间：2013-03-16T13:22:55.007
> 
> 标签：c++, c++11

it is a C++ class with 5 objects and 25 functions . at run time i want to pass the object and name of the function as parameters and make the object passed call the specified method .

it is like

```
void actionToBetaken(object,string method_name)
 {
       object.method_name();
 } 
```

how it is possible in C++ ?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T13:38:35.023

这通常使用函数指针来完成：

```
template <typename T, typename U>
void f(T &object, U (T::*method)())
{
   (object.*method)();
} 
```

这假定该方法不带任何参数。您可以通过以下方式传递带有参数的方法：

```
template <typename T, typename U, typename... Args>
void f(T &object, U (T::*method)(Args...), Args&&... args)
{
   (object.*method)(std::forward<Args>(args)...);
}

int main()
{
    T t;

    f(t, &T::f, 5); // calls t.f(5)
} 
```

您也可以使用[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)or[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)来实现这种功能。

# c# - 创建一个类的对象实例，其名称在字符串变量中

> ID：15449800
> 
> 赞同：19
> 
> 时间：2013-03-16T13:23:09.623
> 
> 标签：c#, .net, reflection, runtime, system.reflection

我不知道我要问的东西是否可用，但我只想知道它是否存在以及它是如何工作的。所以这是我的问题：

> 我有 2-3 个自己的自定义模型类。例如，客户、员工和产品。现在我在字符串中有类名。并且基于字符串中的类名，我必须创建它的对象并返回到一个视图。我怎么能做到这一点？

我知道一种`IF ELSE`陈述方式，但我想尝试一种更好的“**动态**”方式......

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-16T18:17:09.433

字符串中的类名不足以创建它的实例。事实上，您将需要包括类名在内的完整命名空间来创建对象。

假设您有以下内容：

```
string className = "MyClass";
string namespaceName = "MyNamespace.MyInternalNamespace"; 
```

您可以`MyNamespace.MyInternalNamespace.MyClass`使用以下任一技术创建该类的实例，即类的对象：

```
var myObj = Activator.CreateInstance(namespaceName, className); 
```

或这个：

```
var myObj = Activator.CreateInstance(Type.GetType(namespaceName + "." + className)); 
```

希望这会有所帮助，如果没有，请告诉我。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-25T12:58:35.177

```
 string frmName = "frmCustomer";
    //WorldCarUI. is the namespace of the form
    Type CAType = Type.GetType("WorldCarUI." + frmName );
    var myObj = Activator.CreateInstance(CAType);
    Form nextForm2 = (Form)myObj;
    nextForm2.Show(); 
```

这确实有效..

问候阿维

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T13:40:47.707

最简单的方法是使用激活器。将类名传递给 GetType 并创建新实例。

`ClassInstance s1 = (ClassInstance)Activator.CreateInstance(Type.GetType("App.ClassInstance"));`

```
public class ClassInstance
{
    public string StringData { get; set; }
} 
```

问候，尼克

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-06T10:24:16.780

Activator 类在 .net 中完成这项工作，这种技术对于依赖注入类型的场景非常有用。

```
string NameSpace = "ProjectName.YourNameSpace";
string ProbeClass = "CLassName";

ObjectHandle ProberHandle = Activator.CreateInstance(NameSpace, ProbeClass) as ObjectHandle;
ClassName Prober = ProberHandle.Unwrap() as ClassName; 
```

确保在类型转换之前**解包**，否则会出现转换错误。

# macos - Error when installing ige-mac-integration on Mac

> ID：15449801
> 
> 赞同：2
> 
> 时间：2013-03-16T13:23:24.640
> 
> 标签：macos, compiler-errors, gtk

I installed `GTK` for `Mac OS` by followed command:

```
port install gtk2 +quartz +no_x11 
```

but got error: `Error: org.macports.archivefetch for port gtk2 returned: cairo must be installed with +quartz.`

So I installed `cairo` and `pango` with `+quartz` flag:

```
port install cairo +no_x11 +quartz
port install pango +no_x11 +quartz 
```

After I reinstalled `GTK` and it has installed successfully.

But when I try to install `ige-mac-integration` get error:

```
port install ige-mac-integration

--->  Fetching archive for py27-pygtk
Error: org.macports.archivefetch for port py27-pygtk returned: gtk2 must be installed with +x11. 
```

but I need `GTK` without `x11`

What should i do?

Thanks,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:05:56.013

听起来像是`ige-mac-integration`被弃用了，

改用`gtk-osx-application`：

```
port install gtk2 +quartz +no_x11 
```

后

```
port install gtk-osx-application -python27 
```

# iphone - 调整大小的 UILabel 恢复为初始大小

> ID：15449805
> 
> 赞同：1
> 
> 时间：2013-03-16T13:23:35.663
> 
> 标签：iphone, ios, uilabel

在我的应用程序的详细视图（滚动视图）上，我有一个 UILabel，它可以获取大约 1000 个单词的文本。

我想调整它的大小以使标签适合 - 到目前为止工作正常

```
-(void) viewDidAppear:(BOOL)animated {
NSString *message = storycontent.text;
CGSize maximumLabelSize = CGSizeMake(280,5000);
CGSize expectedLabelSize = [message sizeWithFont:storycontent.font constrainedToSize:maximumLabelSize lineBreakMode:NSLineBreakByWordWrapping];
CGRect newFrame = storycontent.frame;
newFrame.size.height = expectedLabelSize.height;
storycontent.frame = newFrame;
} 
```

当导航到该详细视图时，标签按预期调整大小。现在奇怪的是：当我想向下滚动时，UILabel 会恢复到初始大小，因此只有第一个单词是可见的。

我能做些什么来避免这种行为？

更新：当我删除标签并放入新标签时，它工作正常。当我将字体大小更改为 17 以外的值时，奇怪的行为就开始了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:37:04.630

我当前的解决方案（或解决方法）现在是停用“使用自动布局”（感谢 Mark Kryzhanouski），这解决了捕捉问题。

由于没有自动布局，滚动视图不会自动调整大小，所以我添加了

```
@property (retain, nonatomic) IBOutlet UIScrollView *scroller; 
```

并使用我从上面已经知道的内容大小以及将始终显示的静态内容为其计算一个新的 FrameSize。

```
NSString *message = storycontent.text;
CGSize maximumLabelSize = CGSizeMake(280,5000);
CGSize expectedLabelSize = [message sizeWithFont:storycontent.font constrainedToSize:maximumLabelSize lineBreakMode:NSLineBreakByWordWrapping];

[scroller setContentSize:CGSizeMake(280,expectedLabelSize.height + 400)]; 
```

也许有办法在激活“使用自动布局”的情况下做同样的事情？！

# python - django perform logic on fields during aggregation (instead of directly doing aggregate(Sum ('somefield')))

> ID：15449808
> 
> 赞同：1
> 
> 时间：2013-03-16T13:23:45.920
> 
> 标签：python, django

Code:

```
MyModel(models.Model):
    start_date = models.DateTimeField()
    end_date = models.DateTimeField()
    name = models.CharField()
    somenum = models.IntegerField() 
```

If I want to calculate sum of all the 'somenum'(last field in above model), then I can do this:

```
queryset.aggregate(Sum('somenum')) 
```

My Requirement:

sum of (enddate-startdate)(means result is num of days) excluding (saturdays, and sundays).

I can do this using normal logic, but I think aggregate or someother way is preferred.

Ways i know:

1.  Loop every record of queryset, calculate num of days(excluding saturdays, sundays) for each record, and sum it during loop(like sum=0 before loop, inside loop sum += current_value; ).
2.  Write signal that does this calculation(sum) when model is saved, and save calculateed value to UserProfile. When we want value, we can get it from UserProfile, but I think this process is buggy.
3.  Add another field 'num_of_days' for MyModel shown above, and whenever a model is saved, the signal should perform calculation and should save that field. Then we can use queryset.aggregate(Sum('num_of_days')) .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:34:01.550

1.  每次你想要这个数据，你必须`MyModel`在python中查询所有并求和；这既不高效也不可扩展。
2.  为什么你会保存`UserProfile`它似乎属于天数`MyModel`？
3.  我认为这应该是首选方法。它简单、优雅、易于操作。通过这样做，您将聚合放在数据库中

# components - 使用实体组件系统构建业务应用程序有什么优势吗？

> ID：15449811
> 
> 赞同：16
> 
> 时间：2013-03-16T13:24:10.120
> 
> 标签：components, entity

我理解使用数据驱动的实体组件系统进行游戏开发的吸引力。自然，我正在尝试寻找其他领域来应用这种范式。当我即将着手开发一个小型企业应用程序时，我一直想知道 Entity-Component 是否适合它。但是，除了游戏之外，我找不到任何关于在任何东西中使用实体组件的示例或讨论。有原因吗？除了游戏之外，在软件中使用实体组件会有什么优势吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2017-12-21T10:05:09.203

我最终冒险尝试在游戏领域之外使用 ECS（现在作为独立开发者，以前是公司员工），结果令我震惊。我现在不会以任何其他方式做事，并且拥有比以往任何时候都更易于维护的系统（并不完美，但比我们过去在我的行业中使用的 COM 风格的架构要好得多）。我之所以冒险，主要是因为它似乎为我和我的团队过去在使用 COM 架构时遇到的所有问题提供了答案，尽管我想象着这样一个冒险的举动，以至于我最终可能会交换一组问题另一个（现在我一个人愿意冒险）。原来我没有用一罐蠕虫换另一罐。ECS 几乎解决了所有这些问题，同时几乎没有引入任何新问题。

也就是说，我在 VFX 领域，它与游戏没有*什么*不同。我们仍然需要为角色设置动画、发射粒子、与网格、纹理交互、播放声音片段、渲染结果、允许人们编写插件、脚本等。

尝试在业务领域应用 ECS 更加大胆。也就是说，我想*如果*你有相对较少的系统处理大量的实体组合，它真的可以帮助创建一个可维护的系统。

**可维护性**

我发现，与以前的面向对象方法相比，甚至在我的个人项目中，ECS 对我来说更容易维护，因为以前的方法经常将维护开销从使用类的客户端转移到类本身。但是，会有几十个接口，数百个子类，它们都继承了不同的东西并实现了不同的接口来单独维护。由于有如此多的细化类和进行模拟测试的需要，测试也变得困难。

我的大脑只能处理这么多，数百个相互交互的子类远远超出了极限。很快我发现自己不再能够推理发生了什么，更不用说何时何地，被复杂的交互所淹没，导致复杂的副作用，并且从来没有自信我可以在其中的某个地方夹入新代码而不会造成不必要的副作用.

> 计算科学家的主要挑战是不要被自己制造的复杂性所迷惑。——EW迪克斯特拉

这甚至适用于我自己独创的项目。出现了一个突破点，通常在几十万 LOC 左右之后，我什至无法理解自己的创作。我会在这里和那里重构，获得一点动力，只是去度假，回来，然后再次迷失。

ECS 消除了这个挑战，我并不是说我可以休两周假，回到代码库，查看一些代码，并获得我在编写它时所拥有的水晶般清晰的愿景首先。ECS 在这方面并没有太大的改进，我仍然需要一些时间来重新熟悉我很久没有看过的代码。ECS 帮助很大的原因是我*不需要*回忆我为扩展和更改软件而编写的所有内容。这些系统彼此如此分离，以至于如果我忘记了一个系统是如何工作的，这并不是什么大不了的事。我可以只专注于我需要做的事情，而不必担心通过控制流的复杂交互触发复杂的副作用交互。我可以只专注于我需要做的事情，而不必考虑其他任何事情。

即使将全新的核心级功能集成到产品中，这一点也适用。这些天来，当我在产品中引入一个新的核心功能，比如一个全新的产品核心音频系统时，我唯一需要考虑的就是如何将它集成到用户界面中。与我以前工作过的架构相比，将其集成到架构中相对容易。

同时使用 ECS，我只需要维护几十个系统即可提供不亚于上述功能的功能。它们内部确实有一些复杂的逻辑，但我不必维护数百种不同的实体组合，因为它们只存储组件，而且我不必维护组件类型，因为它们只存储原始数据而且我很少曾经发现需要回去改变它们（非常接近永远）。

**可扩展性**

事后能够使用中心概念扩展 ECS 架构是我迄今为止遇到的最简单的事情，并且需要对现有代码库如何工作的最少知识。

作为一个非常新鲜的例子，我最近遇到了一个强烈的愿望，即脚本编写者使用我的软件能够使用简单的全局名称访问场景中的实体。在他们必须指定一个完整的场景路径之前，`Scene.Lights.World.Sunlight`而不是简单地，`Sunlight`.

通常，在我以前工作过的架构中，变化范围从高度侵入到适度侵入。围绕纯接口旋转的 COM 风格系统可能需要引入新接口，或者更糟糕的是，更改现有接口并更新数百个子类型以实现新功能。*如果我们有一个所有东西都*已经继承的中央抽象基类，我们也许可以集中修改它以实现这个新接口（或现有接口的新部分），但如果有一个中央基类，那可能会很可怕类为所有可能需要这样的名称，并需要涉足大量微妙的代码。

使用 ECS，我所要做的就是引入一个新的组件，`GlobalName`它具有一个处理`GlobalName`组件并可以通过指定名称快速找到实体的系统。它还确保没有两个`GlobalName`组件具有匹配的名称。`GlobalName`由于 ECS 的性质，当该组件因实体被破坏或组件被从中删除而被破坏时也很容易拾取，以保留用于加速按名称搜索的数据结构（特里）同步中。

之后，我就可以将此`GlobalName`组件附加到脚本编写者想要通过全局名称引用的任何内容上。他们也可以自己附加它，然后稍后通过该名称引用给定的实体。组件还以在大多数情况下保持向后兼容性的方式对自身进行序列化（例如：以前版本的软件不知道是什么`GlobalName`，在加载引用它的场景数据时会简单地忽略它）。

考虑到这是事后很晚才添加到一个 4 年的旧软件中，而这个软件并没有预料到需要这样做，所以它几乎是我可以改变想象的那样轻松和非侵入性的更改。我设法让它在第一次尝试时工作得很好。作为奖励，新添加的所有重要代码使这项工作隔离在自己的空间中；它不会与其他任何东西混在一起，也不会增加其他任何东西的复杂性，如果我使用抽象接口或基类，就不可避免地会出现这种情况。除了几行简单的脚本和一些简单的 GUI 代码来在可用时显示这些全局名称外，我不需要修改任何核心来使这项工作正常工作。

**《随处继承》**

您是否曾经希望您可以从代码中的任何位置扩展类的功能，而无需实际修改其代码？例如：

```
// In some part of the system exists a complex beast of a class
// which is tricky modify:
class Foo {...};

// In some other part of the system is a simple class that offers
// new behavior we'd like to have in 'Foo', with abstract functionality
// (virtual functions, i.e.) open to substitution:
class Bar {...};

// In some totally different part of the system, maybe even a script,
// make Foo inherit Bar's behavior on the fly, including its default
// constructor, copy constructor, and destructor behavior for Bar's state.
Foo.inherit(Bar); 
```

> *   上面留下了一个问题：抽象功能将在哪里`Bar`实现，因为`Foo`不提供这样的实现？这就是系统类比地为 ECS 发挥作用的地方。

我认为对于我们中的大多数人来说，诱惑将会存在，他们不得不涉足某些现有类的复杂代码以使其做一些新的事情，同时冒着导致不必要的副作用/故障/脚趾踩踏的风险，或者我们甚至可能面临过我们无法控制的第三方库只是提供更多功能的诱惑，如果它只是提供“这件事”，我们会发现在使用该第三方库的整个代码中非常有用，或者我们可能只是讨厌这个想法即使我们的任务是提供新的中心行为，也必须更改我们同事的现有代码（不想踩到脚趾）。

ECS 为您提供了这种灵活性，尽管方式与上述示例非常不同（但为您提供了类比的好处）。它允许您从任何地方扩展任何事物的行为/功能/状态。与上面的可扩展性示例一样，我不必修改任何现有的东西来提供全局名称搜索功能和状态。我可以从外部甚至从脚本扩展这些实体的行为，只需将一种新类型的组件添加到我想要的任何实体，此时我编写的对此类组件感兴趣的任何系统都可以使用鸭子类型方法（“*如果它有一个`GlobalName`组件，可以提供一个全局名称，可以用来快速找到匹配的组件*”）。

**关联数据**

与上述类似，您是否曾经面临过将数据与代码中的现有对象相关联的诱惑？在这种情况下，我们可能必须维护并行数组或关联容器（如字典/地图），并且此类代码可能很难正确编写，因为它必须在添加和删除新对象时保持同步。

ECS 在中央层面解决了这个问题，因为现在您可以非常有效地将组件附加到您想要的任何实体或从任何实体移除组件。这成为您动态关联新数据的方式。您不再需要手动同步关联数据结构。

**测试**

就我个人而言，另一个问题可能是因为我从未掌握过单元测试的艺术（尽管我确实与一位真正研究过该主题的同事一起工作），它从未让我确信系统是相对错误的-自由。集成测试让我在这方面更有信心。我的问题是：即使单元测试通过了，你怎么知道客户端不会滥用接口？如果他们在错误的时间使用它怎么办？如果他们在故意不设计为线程安全的情况下尝试从多个线程中使用它怎么办？

看到单元测试通过，我并没有感到多么宽慰，因为遇到的大多数错误都与正在测试的接口之间发生的事情有关，尽管我们编写了数百个单元测试，但我们还是收到了很多通过。我喜欢测试驱动的开发，我确实在单元测试中发现了价值，它告诉我这个单元正在做它应该做的事情，这让我可以在整个代码库中更自信地使用它，但是单元测试从来没有给我对整个代码库的正确性感到非常宽慰。

ECS 为我解决了这个问题并使单元测试更有价值，即使对于像我这样从未掌握过测试艺术的人来说，因为有少数系统，他们每个人都做了大量的工作（而不是细粒度的小对象），而且他们'是具体的。如果我们必须做任何类似于模拟测试的事情，只需插入运行和测试它们所需的组件/实体。开始感觉测试系统比单元测试更接近集成测试，即使系统是最小的可测试单元。

**均质处理**

要应用 ECS，需要采用一种更循环的逻辑，其中更均匀的循环一次只做一件事。许多 OOP 倾向于鼓励非同质的控制流和复杂的交互，导致在系统的任何给定阶段/状态中发生许多事情。这是我最初发现的最困难的部分，因为我想一次将不同的任务应用于给定的实体/组件集，而我的诱惑不能如此直接地满足，因为解耦系统一次只执行一项任务。所以我必须学习如何延迟处理，存储一些状态以供下一个系统使用，并且我还使用（至少）一个事件队列，以便系统可以触发由其他系统处理的事件。

尽管如此，由于一系列简单的循环一次做一件事，我找到了编写复杂交互等价物的方法。强迫自己以这种方式工作，一次对一组实体应用一个统一的任务，从来没有像我想象的那么困难。在被迫这样做一段时间并保持结果之后——哇！我应该一直这样做。回想起十年来维护架构的过程，在呼吸到 ECS 架构的新鲜空气之后，这些架构比他们需要的维护难度大得多，这实际上有点令人沮丧。

**互动**

这是一个简化的“交互”图（不一定表示直接耦合，因为耦合版本将从具体对象到抽象接口）比较我采用 ECS 前后的差异。这是之前的：

[![在此处输入图像描述](../Images/2b499114eeed50e54d559e462a7164bb.png)](https://i.stack.imgur.com/yHBvD.png)

除了那只是在少数类型之间（我懒得画数百个）。这就是为什么我一直在努力维护这些东西并且感觉在代码中纠缠不清。这是因为代码之间的交互实际上是一团糟，导致您在系统中使用各种远程功能，从而导致副作用。之后（现在组件只是原始数据，它们不包含自己的功能）：

[![在此处输入图像描述](../Images/03b76285b55a83f6295bb6342a28cbd1.png)](https://i.stack.imgur.com/WJoul.png)

第二个版本是如此，更容易理解，更容易扩展，更容易维护，更容易推理正确性，更容易测试等等。如果你的业务架构能够有效地适合第二种类型的模型，我不能夸大它可以简化一切。

**不变量**

当我开始开发 ECS 引擎时，对我来说最可怕的部分之一是缺乏信息隐藏。当组件只是原始数据时，它们会悬空我认为应该是它们的隐私的东西，任何人都可以触摸。在本质上可能对任务更为关键的业务领域中，这可能是双重可怕的。

然而，由于访问任何给定组件的系统数量有限（而且通常如果数据被修改，整个代码库中的一个系统才有意义），所以我发现不变量同样易于维护，甚至更多。 ，极其简单的控制流程，以及由此产生的极其可预测的副作用。当您只需要担心一些系统的功能时，测试代码库的正确性非常容易。

**结论**

因此，如果您愿意冒险，我认为它可能会非常有效地应用于某些业务领域。我认为首先值得考虑的主要事情是，您是否可以将软件的全部需求建模为少数处理存储在组件中的数据的系统，每个系统仍然执行庞大但单一的职责（类似于 a `RenderingSystem`，`GuiSystem`, `PhysicsSystem`,`InputSystem`等）。如果您发现需要数百个不同的系统来捕获业务逻辑，ECS 的好处自然会减少。

如果您有兴趣，我可以在以后的一些迭代中扩展我的答案，并尝试回顾一下我在 ECS 完全湿透时遇到的一些小问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-20T11:33:58.040

（为死灵道歉）

来自企业背景，我最近一直在考虑这个问题。实体组件系统相对较新，代表了与大多数业务开发人员所经历的完全不同的设计范式。

考虑到我自己公司的例子，我已经看到了一些实体组件系统可以提供好处的场景。

例如，在我们的主要应用程序中，地址与联系人和组织相关联。（我们的数据库中有 ContactAddress 和 OrganisationAddress 连接表。）一位客户也希望将项目与地址相关联。有很多方法可以实现这一点，但基于实体组件的方法对我来说似乎很优雅——只需将一个 Addressable 组件添加到 Project 实体，GUI 就会自行解决。

相反，我们可能会添加一个新的连接表和新的数据输入页面（尽管重新使用通用控件）。

我认为，主要的缺点是（最初）开发人员缺乏将这种范式应用于商业软件的最佳方法的意识，正是因为以前似乎没有这样做过。一旦你开始采用这种方法，你就会致力于它——如果一旦你的项目达到一定的复杂性就证明它令人沮丧，那么没有重大的重写就没有出路。

# heroku - Heroku load average alarmingly high

> ID：15449812
> 
> 赞同：2
> 
> 时间：2013-03-16T13:24:15.183
> 
> 标签：heroku, load

I am currently trying to understand why some of my requests in my Python Heroku app take >30 seconds. Even simple requests which do absolutely nothing.

One of the things I've done is look into the load average on my dynos. I did three things:

1) Look at the Heroku logs. Once in a while, it will print the load. Here are examples:

`Mar 16 11:44:50 d.0b1adf0a-0597-4f5c-8901-dfe7cda9bce0 heroku[web.2] Dyno load average (1m): 11.900`

`Mar 16 11:45:11 d.0b1adf0a-0597-4f5c-8901-dfe7cda9bce0 heroku[web.2] Dyno load average (1m): 8.386`

`Mar 16 11:45:32 d.0b1adf0a-0597-4f5c-8901-dfe7cda9bce0 heroku[web.2] Dyno load average (1m): 6.798`

`Mar 16 11:45:53 d.0b1adf0a-0597-4f5c-8901-dfe7cda9bce0 heroku[web.2] Dyno load average (1m): 8.031`

2) Run "heroku run uptime" several times, each time hitting a different machine (verified by running "hostname"). Here is sample output from just now:

`13:22:09 up 3 days, 13:57, 0 users, load average: 15.33, 20.55, 22.51`

3) Measure the load average on the machines on which my dynos live by using psutil to send metrics to graphite. The graphs confirm numbers of anywhere between 5 and 20.

I am not sure whether this explains simple requests taking very long or not, but can anyone say why the load average numbers on Heroku are so high?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-12T17:33:17.887

Heroku 将主机子虚拟化为您通过 LXC 使用的来宾“Dyno”。当您运行“正常运行时间”时，您看到的是整个主机的正常运行时间而不是您的容器，并且正如@jon-mountjoy 所指出的，当您执行此操作时，您将获得一个新的 LXC 容器，而不是您正在运行的 Dynos 之一。

*   [https://devcenter.heroku.com/articles/dynos#isolation-and-security](https://devcenter.heroku.com/articles/dynos#isolation-and-security)

Heroku 的 dyno 负载计算也不同于传统的 UNIX/LINUX 负载计算。

Heroku 平均负载反映了就绪队列（即等待处理）中的 CPU 任务数。dyno 管理器大约每 20 秒对每个 dyno 的可运行任务进行计数。使用前 30 分钟的可运行任务计数计算指数衰减移动平均值，其中周期为 1、5 或 15 分钟（以秒为单位），count_of_runnable_tasks 是队列中任务数的条目在给定的时间点，avg 是上次迭代计算的指数负载平均值

*   [https://devcenter.heroku.com/articles/log-runtime-metrics#understanding-load-averages](https://devcenter.heroku.com/articles/log-runtime-metrics#understanding-load-averages)

Heroku 的平均负载与 Linux 之间的区别在于，Linux 还包括处于不间断睡眠状态的进程（通常等待磁盘活动），如果许多进程由于繁忙或停滞的 I/O 而在 I/O 中保持阻塞，这可能会导致明显不同的结果。 O系统。

在 CPU 绑定的 Dyno 上，我认为这不会有太大的不同。在 IO 绑定的 Dyno 上，Heroku 报告的负载平均值将远低于如果您可以在 LXC 容器上获得 TRUE 正常运行时间所报告的负载平均值。

您还可以通过启用 log-runtime-metrics 来启用发送正在运行的测功机的定期负载消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:25:14.370

也许这是预期的[测功机空转](https://devcenter.heroku.com/articles/dynos#dyno-idling)？

PS。我怀疑运行没有意义`heroku run uptime`- 每次都会在一个新的一次性测功机中运行它。

# java - Naming a new object after a string?

> ID：15449814
> 
> 赞同：6
> 
> 时间：2013-03-16T13:24:24.933
> 
> 标签：java

I want to have a method that will create an object of the class being and automatically name it `"b1"` for the first object, `"b2"` for the second, and so on. Can I use a `String` as the name of a new object? If it's possible, how do I do it?

```
class being {
    static int count = 0;
    String name;

    void createbeing(){
        name = "b" + Integer.toString(count);
        being name = new being(); //Here I want to insert the String name as the name of the object
        count++;
    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T13:26:26.140

不，这在 Java 中是不可能的；您不能在运行时创建变量。但是，您可以维护一个将标识符[`Map`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)映射到其相应sie`String``Being`

```
Map<String, Being> map = new HashMap<String, Being>();
...
name = "b" + Integer.toString(count);
map.put(name, new Being());
count++; 
```

请注意，我假设了一个更传统的名称：`Being`而不是`being`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T13:50:49.127

在您的代码中，您只是在函数“createbeing()”中创建类对象的本地引用，并且上面声明的字符串“name”被您的引用“name”隐藏在“createbeing()”函数范围内声明为类存在对象的引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T13:25:51.183

> 我可以使用字符串作为对象的名称吗？

不。通常的方法是使用其中一种`List`实现并向其中添加对象，例如：

```
class being{
    static List<being> beings = new LinkedList<being>();

    void createbeing(){
        beings.add(new being());
    }
} 
```

（我**不**提倡使用静态的生物列表。几乎可以肯定，对于您要解决的更大问题，有更好的方法。但这是您提供的代码的最小模式。）

或者，您可以使用 a`Map`并实际获得您想要的名称（`"b1"`等等）：

```
class being{
    static int count = 0;
    static Map<String,being> beings = new HashMap<String,being>();

    void createbeing(){
        count++;
        beings.add("b" + count, new being());
    }
} 
```

（与上述相同的警告。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-16T13:28:50.833

将 name 属性添加到您的类（应命名为`Being`、顺便说一句，而不是`being`）及其构造函数：

```
public class Being
    private String name;

    public Being(String name) {
        this.name = name;
    }
} 
```

然后创建你的对象：

```
void createBeing(){
    name = "b" + Integer.toString(count);
    Being being = new Being(name);
    // TODO: do something with the Being object
    count++;
} 
```

这就是对象可以有名称的方式。不要混淆对象和变量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-16T13:28:19.540

这是无法通过这种方式实现的。如果变量的名称对您很重要，请将其存储为`Map<String,being>`

```
Map<String,being> map = new HashMap<String,being>();
map.put("b1", new being()); 
```

# macos - OpenGL GLSL, stuck viewing pyramid from "behind"

> ID：15449815
> 
> 赞同：1
> 
> 时间：2013-03-16T13:24:28.983
> 
> 标签：macos, cocoa, opengl, graphics, glsl

It appears that my pyramid is smaller in the front and bigger in the back.

```
-(void)drawRect:(NSRect)dirtyRect
{
    // get the dimensions of the window
    NSSize dim = [self frame].size;

    // clear the background with color
    glClearColor(0.0, 0.0, 0.0, 0.4);
    glViewport(0, 0, dim.width, dim.height);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    // cube position data
    GLfloat vertices[] = {0.0, 100.0, 0.0, -50.0, 0.0, 50.0, 50.0, 0.0, 50.0, 50.0, 0.0, -50.0, -50.0, 0.0, -50.0};

    // cube indices data
    GLubyte indices[] = {0, 1, 2, 0, 2, 3, 0, 3, 4, 0, 4, 1, 1, 4, 3, 1, 3, 2};

    // cube color data
    GLfloat color[] = {0.0, 1.0, 0.0, 1.0,
    0.0, 0.3, 0.8, 1.0, 
    1.0, 0.0, 0.0, 1.0, 
    0.5, 0.0, 0.8, 1.0, 
    0.5, 0.6, 0.3, 1.0};

    // bind each array of data to separate buffers
    // bind cube position data to the first buffer
    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffers[0]);
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER, 0);
    // bind the cube color data to the second buffer
    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffers[1]);
    glBufferData(GL_ARRAY_BUFFER, sizeof(color), color, GL_STATIC_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    // enable the shader program
    GLuint programID = [self loadShaders];
    glUseProgram(programID);

    // enable vertex attributes
    // enable cube position attributes
    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffers[0]);
    glEnableVertexAttribArray(VERTEX_POS_INDEX);
    glBindBuffer(GL_ARRAY_BUFFER, 0);
    // enable cube color attributes
    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffers[1]);
    glEnableVertexAttribArray(VERTEX_COLOR_INDEX);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    // point to the enabled attribute data
    glVertexAttribPointer(VERTEX_POS_INDEX, VERTEX_POS_SIZE, GL_FLOAT, GL_FALSE, 0, vertices);
    glVertexAttribPointer(VERTEX_COLOR_INDEX, VERTEX_COLOR_SIZE, GL_FLOAT, GL_FALSE, 0, color);

    GLfloat offset[] = {0.0, 0.0, -200.0};
    GLint offsetUnif = glGetUniformLocation(programID, "offset");
    GLint zNearUnif = glGetUniformLocation(programID, "zNear");
    GLint zFarUnif = glGetUniformLocation(programID, "zFar");
    GLint frustumScaleUnif = glGetUniformLocation(programID, "frustumScale");

    glUniform3fv(offsetUnif, 1, offset);
    glUniform1f(frustumScaleUnif, 1.0f);
    glUniform1f(zNearUnif, 0.1);
    glUniform1f(zFarUnif, 1000.0);

    // draw the elements
    glDrawElements(GL_TRIANGLES, sizeof(indices)/sizeof(GLubyte), GL_UNSIGNED_BYTE, indices);

    glDisableVertexAttribArray(VERTEX_POS_INDEX);
    glDisableVertexAttribArray(VERTEX_COLOR_INDEX);
    glUseProgram(0);

    // flush buffer
    glFlush();
    [[self openGLContext] flushBuffer];

} 
```

Here is the vertex shader:

```
#version 120

attribute vec3 position;
attribute vec4 inColor;

uniform vec3 offset;
uniform float zNear;
uniform float zFar;
uniform float frustumScale;

varying vec4 outColor;

void main()
{
    vec4 cameraPos = vec4(position.x, position.y, -position.z, 1.0) + vec4(offset.x, offset.y, offset.z, 0.0);
    vec4 clipPos;

    clipPos.xy = cameraPos.xy * frustumScale;

    clipPos.z = cameraPos.z * (zNear + zFar) / (zNear - zFar);
    clipPos.z += 2 * zNear * zFar / (zNear - zFar);

    clipPos.w = -cameraPos.z;

    gl_Position = clipPos;
    outColor = inColor;
} 
```

When I run the code I get this image, note it looks as though the pyramid with bigger in the back than the front:

![Pyramid](../Images/da6470bc0c46c06631fd6996726d112d.png)

I circled the "front" corners (though I should be seeing this from the other side thus they are actually the rear corners). Any thoughts or suggests as to where the problem may lie?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:44:31.837

看来，您没有在着色器中应用透视投影矩阵，因此缺乏视角/深度，导致某种正交投影。

您要在着色器中应用的矩阵是`gl_ModelViewMatrix`（对象和相机变换）、`gl_ProjectionMatrix`（投影）或`gl_ModelViewProjectionMatrix`（对象和相机变换和投影）。由于这些内置制服已被弃用，您需要自己传递它们。

# ruby-on-rails - Rails iterates through displaying items in a model, but also shows the raw hash at the end

> ID：15449816
> 
> 赞同：0
> 
> 时间：2013-03-16T13:24:29.677
> 
> 标签：ruby-on-rails

**This site is rendering like this:**

# Product Listings

Test

test

$1.00

Test

test

$1.00

Hello!

This is a description.

$125135.13

test.gif

Product #1

Product #1 description.

$100.00

N/a

[#, photo: "", created_at: "2013-03-16 06:17:30", updated_at: "2013-03-16 06:17:30">, #, photo: "", created_at: "2013-03-16 06:17:48", updated_at: "2013-03-16 06:17:48">, #, photo: "test.gif", created_at: "2013-03-16 06:24:13", updated_at: "2013-03-16 06:24:13">, #, photo: "N/a", created_at: "2013-03-16 13:16:35", updated_at: "2013-03-16 13:16:35">]

**index.html.erb**

```
<h1>Product Listings</h1>
        <%= @products.each do |p| %>
            <li><%= p.name %></li>
            <li><%= p.description %></li>
            <li><%= sprintf("$%0.02f", p.price) %></li>
            <li><%= p.photo %></li>
        <% end %> 
```

Any idea on how to make Rails only display the iterations through the model and not the hash at the bottom?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T13:31:05.010

这是你的问题：

```
<%= @products.each do |p| %> 
```

那应该是：

```
<% @products.each do |p| %> 
```

因为等号`<%=`导致它输出返回值，而不仅仅是作为流控制。

# c# - Showing different calendars in Windows Phone 7

> ID：15449817
> 
> 赞同：4
> 
> 时间：2013-03-16T13:24:39.980
> 
> 标签：c#, windows-phone-7, calendar

I'm trying to get a complete list of all calendars. If I list

```
(new Appointments()).Accounts 
```

I get only accounts like "Windows Live" or "Google". Actually I need a way to get the calendars and the appointments to that calendar inside the accounts. But it has to be on any account, not only the Live Account. Read only access is enough though. Is there any possibility?

If there is no chance, is this possible under WP8? Yes, I know, hardware capabilities were to high for this feature under WP7.8\.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:34:59.133

[`Appointments.SearchAsync`](http://msdn.microsoft.com/en-US/library/windowsphone/develop/hh220723%28v=vs.105%29.aspx)您应该使用一种方法。MSDN上有一个很好的例子：

```
 Appointments appts = new Appointments();

        appts.SearchCompleted += new EventHandler<AppointmentsSearchEventArgs>(Appointments_SearchCompleted);

        DateTime start = DateTime.Now;
        DateTime end = start.AddDays(7);

        appts.SearchAsync(start, end, "Appointments Test #1"); 
```

在回调函数中，您可以访问`args.Results`type `IEnumerable<Appointment>`。

这在 WP7.1 和 WP8 上都可用。

# sql - Concatenating fields when BREAK ON command is used

> ID：15449820
> 
> 赞同：2
> 
> 时间：2013-03-16T13:25:03.803
> 
> 标签：sql, oracle, sqlplus, string-aggregation

I have built a command that uses the BREAK ON command to stop the output of duplicate field names. For example:

```
f.name | f.value
f.name | f.value
f.name | f.value 
```

becomes:

```
f.name | f.value
       | f.value
       | f.value 
```

Is there any way to have this output as:

```
f.name | f.value,f.value,f.value 
```

In some instances the f.name field with have over 20 f.values associated with it.

The output will eventually be used to import into other places so I am trying to make the output as friendly as possible.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:28:55.747

您不是在寻找 SQL*Plus 命令，而是在寻找字符串聚合。

假设您当前的查询是：

```
select name, value from my_table 
```

您可以按如下方式更改它以获得您想要的结果。包含 DISTINCT 是为了消除列表中的重复结果。

```
select name, listagg(value, ', ') within group (order by value) as value
  from ( select distinct name, value from my_table )
 group by name 
```

[LISTAGG()](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions089.htm#SQLRF30030)仅在 11.2 中发布，如果您使用的是早期版本的 Oracle，您可以使用未记录的函数 WM_CONCAT() 或用户定义的函数 STRAGG()，如[字符串聚合技术的有用页面](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php)中所述。

# ios - Merge Two ABRecordRef contacts

> ID：15449823
> 
> 赞同：4
> 
> 时间：2013-03-16T13:25:11.680
> 
> 标签：ios, contacts

How can I merge two `ABRecordRef` records?

I mean I want to get all properties from one record and save it to the other record and delete the first one.

# javascript - 如何返回属性名称？

> ID：15449830
> 
> 赞同：1
> 
> 时间：2013-03-16T13:25:53.113
> 
> 标签：javascript

我不太确定该怎么做，或者用谷歌搜索什么来找到答案......

```
for (var c in cfd){
   if (cfd[c] <= cfd[c+1]) {
       nextfunk = ???
   }
} 
```

在 for 循环之后，我希望 nextfunk 具有最低值 cfd 的名称的值。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T13:29:33.437

```
for (var c in cfd){
   if (cfd[c] <= cfd[c+1]) {
       nextfunk = c;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T13:29:58.227

试试这个：-

```
for (var c in cfd){
   if (cfd[c] <= cfd[c+1]) {
       nextfunk = c;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T13:29:08.683

试试这个

```
var value = Math.max.apply(Math, cfd); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T13:29:46.867

它将`c`包含名称：

```
nextfunk = c; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T13:34:32.253

既然你要求退货：

```
var nextfunk;

for (var c in cfd){
   if (cfd[c] <= cfd[c+1]) {
       nextfunk = c;
   }
}

return nextfunk; 
```

# javascript - javascript原型继承-共享属性

> ID：15449838
> 
> 赞同：6
> 
> 时间：2013-03-16T13:26:24.873
> 
> 标签：javascript, inheritance, prototype

我`_data`在原型中保存了一个属性作为所有创建对象的定义。

```
 function A() {}
 A.prototype._data = []; 
```

现在创建的所有对象`A`都具有 property `_data`。

我想要原型继承，`_data`原型将具有`_data`原型链中所有原型的值。

不知道直接的方式，在这个例子中我使用了一个 getter `get()`。

```
 function A() {}

 A.prototype._data = [];

 A.prototype.add = function(rec) {
   this.__proto__._data.push(rec);
 }

 A.prototype.get = function() {
   if(typeof this.__proto__.constructor.prototype.get == 'function')
   {
     return this.__proto__.constructor.prototype.get().concat(this.__proto__._data);
   }
   else
   {
     return this.__proto__._data || [];
   }
 }

 function B() {}
 B.prototype = Object.create(A.prototype, { constructor: { value: B }});
 B.prototype._data = []; 
```

当我创建`a`具有值的对象和具有值的`aa`对象时，返回。稍后如果原型将被扩展，函数返回。`b``bb``b.get()``[aa, bb]``_data``A``aaaa``b.get()``[aa, aaaa, bb]`

```
 var a = new A(), b = new B();

 a.add('aa');
 b.add('bb');
 console.log(b.get()); // [aa, bb]

 a.add('aaaa');
 console.log(b.get()); // [aa, aaaa, bb]

 // EDITED - _data in A prototype shoud be without B
 console.log(a.get()); // [aa, aaaa] 
```

这是实现这一目标的好（标准）方法吗？我的意思是在使用构造函数更正时`Object.create`并使用 ? 引用父原型`constructor.prototype`？

这是一个演示：http: [//jsfiddle.net/j9fKP/](http://jsfiddle.net/j9fKP/)

所有这一切的原因是 ORM 库中方案的字段定义，其中允许方案的继承。子方案必须具有父方案的所有字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:57:08.757

> 我想要原型继承，`_data`原型将具有`_data`原型链中所有原型的值。

那是另一回事。“原型继承”意味着如果`_data`当前对象上有一个属性，它将不会在链中进一步查找。此外，这似乎是[嵌套对象的一种问题](https://stackoverflow.com/questions/10131052/crockfords-prototypal-inheritance-issues-with-nested-objects)，尽管我不确定你真正想要什么。然而，如果你真的想连接它们，让一个数组对象从另一个数组继承几乎没有意义。

所以我认为你的吸气剂真的很好。

> 这是实现这一目标的好（标准）方法吗？我的意思是在 Object.create 和使用 constructor.prototype 引用父原型时使用构造函数更正

构造函数更正很好，但[实际上毫无用处](https://stackoverflow.com/questions/12622137/what-is-the-constructor-property-really-used-for)（特别是如果您期望符合标准`Object.create`）。

However, in `this.__proto__.constructor.prototype` either the `.__proto__` or the `.constructor.prototype` is redundant. Since both are either nonstandard or *require* constructor correction, you should use the standard [`Object.getPrototypeOf()` function](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getPrototypeOf) to get your prototype object.

With the following very generic solution, you can nest the inheritance (A.proto, B-proto, B-instance, …) arbitrarily deep. Everything inheriting from `A.prototype` will have an `add` method which adds `_data` to the current object, and a `get` method that traverses the prototype chain and collects all `_data`:

```
function A() {
    // this._data = []; // why not?
}
A.prototype._data = []; // not even explicitly needed
A.prototype.add = function(rec) {
    if (! this.hasOwnProperty("_data")) // add it to _this_ object
        this._data = [];
    this._data.push(rec);
}
A.prototype.addToAllInstances = function(rec) {
    Object.getPrototypeOf(this).add(rec);
}
A.prototype.get = function() {
    var proto = Object.getPrototypeOf(this);
    var base = typeof proto.get == 'function' ? proto.get() : [];
    // maybe better:
    // var base = typeof proto.get == 'function' && Array.isArray(base = proto.get()) ? base : [];
    if (this.hasOwnProperty("_data"))
        return base.concat(this._data); // always get a copy
    else
        return base;
}

function B() {
    A.call(this);
}
B.prototype = Object.create(A.prototype, { constructor: { value: B }});
B.prototype._data = []; // not even explicitly needed 
```

Example usage:

```
var a = new A();
var b = new B();

a.add('ai');
a.get(); // [ai]

a.addToAllInstances('ap'); // === A.prototype.add('ap');
a.get(); // [ap, ai]
new A().get(); // [ap]
b.get(); // [ap]
b.prototype.get(); // [ap]

b.add('bi');
b.get(); // [ap, bi]

a.addToAllInstances('aap');
b.addToAllInstances('bp');
b.get(); // [ap, aap, bp, bi] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T14:08:00.017

```
 function A() {}
     A.prototype._data = [];

 A.prototype.add = function(rec) {
   this._data.push(rec);
 }

 A.prototype.get = function() {
   return this._data;
 }

 function B() {}
 B.prototype = Object.create(A.prototype, { constructor: { value: B    }});

 B.prototype._data = [];

 B.prototype.get = function() {
   return A.prototype._data.concat(this._data);
 }  

 a.add('aa');
 b.add('bb');
 console.log(b.get()); // [aa, bb]

 a.add('aaaa');
 console.log(b.get()); // [aa, aaaa, bb] 
```

[Fiddle](http://jsfiddle.net/FPcUz/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T14:17:12.870

I think I have a better understanding of what you want to do now, so I've deleted my earlier answer and am posting this one.

Here's how I think I'd do it (with the caveat that I'm not at all sure that with an *even better* understanding, a completely different approach wouldn't be better):

```
function A() {}
A.prototype._Adata = [];

A.prototype.add = function(rec) {
  this._Adata.push(rec);
};

A.prototype.get = function() {
  return this._Adata;
};

function B() {}
B.prototype = Object.create(A.prototype, { constructor: { value: B }});

B.prototype._Bdata = [];

B.prototype.add = function(rec) {
  this._Bdata.push(rec);
};
B.prototype.get = function() {
  return this._Adata.concat(this._Bdata);
  // Or: return A.prototype.get.call(this).concat(this._Bdata);
};

var a = new A();
var b = new B();

a.add('aa');
b.add('bb');
console.log(b.get()); // [aa, bb]

a.add('aaaa');
console.log(b.get()); // [aa, aaaa, bb] 
```

[Fiddle](http://jsfiddle.net/FPcUz/1/)

That way, `B` isn't reaching too deeply into `A`'s internals.

# google-apps-script - 我可以在谷歌应用脚 本上开发 webgl 吗？

> ID：15449846
> 
> 赞同：0
> 
> 时间：2013-03-16T13:26:58.303
> 
> 标签：google-apps-script, webgl

我看到谷歌有 Web 开发 IDE，这对我来说很有吸引力。但是我找不到如何开发 webgl 开发，而且只有 gs 文件的东西。你知道我是否可以在谷歌应用脚​​本上开发 webgl 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:30:34.597

您不能使用 Google 脚本开发 WebGL。

谷歌脚本在谷歌云的服务器端运行。

WebGL 是一种在您的网络浏览器中运行的客户端 Javascripting 技术，而不是在 Google 服务器中。

要开发 WebGL，请使用您最喜欢的程序员的文本编辑器在本地计算机上创建 HTML 和 JS 文件。

# ruby-on-rails - 群组推荐系统

> ID：15449848
> 
> 赞同：1
> 
> 时间：2013-03-16T13:27:24.597
> 
> 标签：ruby-on-rails, recommendation-engine

在我们的应用程序中，我们有可以创建或加入组的用户。目前我们想建立一个推荐系统，在这个系统中，给定一个组和组成员计算可能有兴趣加入该组的非组成员。我们假设我们可以根据组成员的其他组来计算兴趣。

请指出我正确的方向。我们正在使用 Rails 和 mysql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:50:44.867

您可能想研究[基于协作记忆的](http://en.wikipedia.org/wiki/Collaborative_filtering#Memory-Based)算法的实现；您的矩阵将保存用户及其组，以根据其他组查找相似但新的成员。更多信息 -[编写一个基本的推荐引擎](https://stackoverflow.com/questions/4051965/writing-a-basic-recommendation-engine?rq=1)

# erlang - 在 Term 下存储大量 key/Term-Values 的性能最好的 erlang 模块是什么

> ID：15449850
> 
> 赞同：6
> 
> 时间：2013-03-16T13:27:49.897
> 
> 标签：erlang

专注于**读取性能**，我想创建一个 Term，例如 Orddict 或 Proplist，其中包含大量（100,000 个）条目，每个条目都包含一个 ID 和一个 Term 值。这个封装的 Term 应该能够返回存储在其键下的值，就像 Orddict 能够做的那样。

```
example:

 K001 - Term001
 K002 - Term002
 K003 - Term003 
```

包含整个集合的结果 Term 需要在函数之间传递，用于多种计算目的，而不是将其存储在持久存储中以避免磁盘 I/O。我还选择在这个阶段不使用内存缓存来避免此时的架构复杂性，因此我的重点是让所有这些都可以简单地通过键搜索。

**Orddicts**是键排序的，与普通的 Dict 相比，它增强了键的查找。我不知道有任何其他 Erlang 模块可以在其 Term 中嵌入更有效的索引机制。

对于比 Orddict 更好的方法有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T14:00:55.307

实际上，`orddict`它是作为排序列表（[source](https://github.com/erlang/otp/blob/maint/lib/stdlib/src/orddict.erl)）实现的，因此它在插入和查找方面的性能都很差，尤其是在以升序插入键时。远离它；它不适用于您的用例。`dict`是一种基于散列的数据结构，并提供可靠的插入/​​查找性能。如果键的顺序对您很重要，请考虑使用基于树的映射（例如`gb_trees`），因为您可以通过按顺序树遍历来提取有序的键序列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T09:41:39.470

如果你想在 Erlang 进程之间共享一个大数据集，你可以尝试使用[ETS](http://www.erlang.org/doc/man/ets.html)。它是[快速](http://okeuday.livejournal.com/16941.html)的内存键值存储，仅支持破坏性更新。

# logging - Heroku 日志排水性能

> ID：15449853
> 
> 赞同：0
> 
> 时间：2013-03-16T13:28:13.727
> 
> 标签：logging, heroku, rsyslog

我目前正试图弄清楚为什么我在 Heroku 上拥有的一个相对简单的应用程序（有时）需要很长时间才能做出响应。

我正在研究的一件事是日志消耗：应用程序写入标准输出，Heroku 收集它并且您可以查看它（例如，使用“heroku 日志”）。就我而言，我也有 LogEntries 插件，并且还通过 rsyslog 将日志发送到 EC2 实例（同一区域）。

如果写入 stdout 有时会阻塞很长时间（30 秒？），这可以解释为什么我的应用程序可能需要 30 秒才能响应即使是最简单的请求（应用程序级 ping）。例如，如果 Heroku 用于收集进程的标准输出的管道在排放时有“尖峰”并且相对较小，则可能会发生这种情况。

任何人都可以评论 Heroku 的标准输出收集器的性能吗？吞吐量？潜伏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:27:21.297

总是需要很长时间吗？也许这是预期的[测功机空转](https://devcenter.heroku.com/articles/dynos#dyno-idling)？

# css - CSS 选择器，下一个标签

> ID：15449857
> 
> 赞同：0
> 
> 时间：2013-03-16T13:28:55.060
> 
> 标签：css, css-selectors

```
<td>
<div class="m"><span class="a1">1 Puolimas</span></div>
<div class="d">po <span id="timer1">2:25:10</span></div>
</td> 
```

如果我不能使用 (span[id=timer1]) 因为 id 可能不同，如何使用 css 选择器选择“2:25:10”。

我试过了：

```
span.a1 ~ span 
```

但是这个选择器不起作用。

你可以在这里试试：http: [//jsfiddle.net/cSQcT/](http://jsfiddle.net/cSQcT/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:30:46.850

无法使用 CSS 导航`a1`和到达`timer`. 您不能仅使用向下/相邻的 CSS 向后/向上导航。您需要使用 javascript 或像`.d > span`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T13:50:12.120

你可以这样做：

```
 .m + .d > span { color: blue; } 
```

还要检查 + 选择器：[CSS 下一个元素](https://stackoverflow.com/questions/3660046/css-next-element)
但是，您不能上一层（从 span.a1 开始）。您的选择器必须从同一级别或更高级别开始。

# c# - 是否有任何登录设计模式？

> ID：15449859
> 
> 赞同：5
> 
> 时间：2013-03-16T13:29:00.427
> 
> 标签：c#, asp.net, design-patterns

有一个非常简单的 2 页网站。第一个是登录页面，我们可以输入用户名和密码，第二个页面在验证后显示“欢迎”..

有没有我们可以使用的设计模式？

我想不出这样一个简单网站的设计模式，只是想听听你的想法。

我的一位同事问我这个问题！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T13:42:31.620

是的，我想到了拦截[器模式](http://en.wikipedia.org/wiki/Interceptor_pattern)（或[拦截器过滤器）：中央过滤器应该拦截对应用程序受身份验证保护的页面的所有请求，如果用户尚未通过身份验证，则重定向到登录页面。](http://www.oracle.com/technetwork/java/interceptingfilter-142169.html)

如果用户已经通过身份验证，它应该让请求转到其原始目标。

请注意，在身份验证后不重定向到欢迎页面，而是重定向到最初请求的页面，对用户来说更加友好：

*   用户想去 /my-profile
*   过滤器通知用户未通过身份验证，并且 /my-profile 需要身份验证。它重定向到登录页面
*   用户登录
*   服务器重定向到 /my-profile，这是用户最初要求去的地方。

请注意，我对 asp.net 一无所知，因此这种模式可能很容易实现或很难实现：我不知道。Java EE webapps 具有过滤器的概念，通常用于身份验证，如上所述。

# php - 如何正确使用 facebook OAuth2？

> ID：15449860
> 
> 赞同：0
> 
> 时间：2013-03-16T13:29:00.653
> 
> 标签：php, javascript, facebook, oauth-2.0, facebook-oauth

在拼命尝试将 facebook 登录系统集成到我的网站 3 天之后，我得出的结论是我惨败。我只是用 JavaScript SDK API 调用创建了一堆乱七八糟的 PHP SDK，结果正如预期的那样，但无法正常工作。

我在 Google 和 stackoverflow 上搜索了其他人的问题、教程、解释的答案，但我现在承认自己失败了。

你能给我这个工作的好教程吗？或者你能给我深入了解一下他们的图书馆吗？

希望这不会被关闭。

编辑：这是使用 Facebook 登录系统的推荐方法吗？

编辑2：

`FB.init({ appId : '<?php echo $core->appId; ?>', // App ID from the App Dashboard channelUrl : '//romeo.no-ip.org/94seconds/channel.html', // Channel File for x-domain communication status : true, // check the login status upon init? cookie : true, // set sessions cookies to allow your server to access the session? xfbml : true // parse XFBML tags on this page? });`

此代码生成`FB.getLoginStatus() called before calling FB.init().`

我的页面如下所示：

```
<!DOCTYPE html>
<html>
    <head>
        <script src="../node_modules/socket.io/node_modules/socket.io-client/dist/socket.io.js"></script>
    </head>
    <body>
        <div id="fb-root"></div>
        <script>
          window.fbAsyncInit = function() {
                FB.init({
                  appId      : '<?php echo $core->appId; ?>', // App ID from the App Dashboard
                  channelUrl : '//romeo.no-ip.org/94seconds/channel.html', // Channel File for x-domain communication
                  status     : true, // check the login status upon init?
                  cookie     : true, // set sessions cookies to allow your server to access the session?
                  xfbml      : true  // parse XFBML tags on this page?
                });
          };

          // Load the SDK's source Asynchronously
          // Note that the debug version is being actively developed and might 
          // contain some type checks that are overly strict. 
          // Please report such bugs using the bugs tool.
          (function(d, debug){
             var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
             if (d.getElementById(id)) {return;}
             js = d.createElement('script'); js.id = id; js.async = true;
             js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
             ref.parentNode.insertBefore(js, ref);
           }(document, /*debug*/ false));
        </script>
    </body>
</html> 
```

编辑3：没关系，我刚刚意识到我已经花了3-4个小时打墙，因为我放错了一些代码。我已经失去了错误。:D 谢谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:44:43.653

给你哥！

1.  这会将 fb js sdk 添加到您的页面

    ```
    (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=" + APP_ID;
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk')); 
    ```

2.  这将通知您用户是否已登录或他当前的状态是什么

    ```
    window.fbAsyncInit = function() {

        // Additional init code here
        FB.getLoginStatus(function(response) {
            if (response.status === 'connected') {
                // logged in and connected

            } else if (response.status === 'not_authorized') {
            // not_authorized - the user has not authorized ur app

            } else {
            // User is not_logged_in

            }
        });

        FB.Event.subscribe('edge.create',
            function(response) {
                //Not relevant here
                //User has just liked your page
                //likeHandler(response);
            });
    }; 
    ```

3.  这是为了让用户登录

    ```
    function Login() {
        FB.login(function (e) {
            //        console.log(e.authResponse);
            if (e.authResponse) {
                M_access_token = e.authResponse.accessToken;

                //custom function to get user details
                get_details();
            } else {
            //            console.log("Error : Failed to Authorize")
            }
        }, {
            scope: "email,user_likes,publish_stream"
        })
    }

    //Notice the scope param above 
    ```

4.  这是为了注销用户

    ```
    function Logout() {
        FB.logout(function(response) {
            // user is now logged out
            });
    } 
    ```

5.  自定义函数 Get_details

    ```
    function get_details(typeCalled) {
        FB.api("/me?fields=name,id,email,gender,username,picture", function (e) {
            fbUserObject = e;
            //        M_user_id = e.id;
            //        M_user_full_name = e.name;
            //        M_user_email = e.email;
            //        M_user_gender = e.gender;
            //        M_username = e.username;
            //picture = e.picture.data.url;
        });
    } 
    ```

6.  获得用户数据后，您可以将其传递给服务器并设置会话。一旦用户单击注销按钮，您应该清除服务器上的会话。

祝一切顺利！:)

# excel - Excel VBA 中的应用程序定义或对象定义错误

> ID：15449863
> 
> 赞同：0
> 
> 时间：2013-03-16T13:29:11.857
> 
> 标签：excel, vba

在以下代码中，我在 Excel 中使用 VBA 时遇到错误：

```
Private Sub XMLGen(mapRangeA, mapRangeB, ticketSize, mapping)
    Dim fieldOneArr As Variant
    Dim fieldTwoArr As Variant
    Dim row As Long
    Dim column As Long
    Dim infoCol As Long
    Dim endInfo As Long
    Dim objDom As DOMDocument
    Dim objNode As IXMLDOMNode
    Dim objXMLRootelement As IXMLDOMElement
    Dim objXMLelement As IXMLDOMElement
    Dim objXMLattr As IXMLDOMAttribute
    Set ws = Worksheets("StockData")
    Dim wsName As String

    Set objDom = New DOMDocument

    If ticketSize = 8 Then
        wsName = "A7Tickets"
    ElseIf ticketSize = 16 Then
        wsName = "A8Tickets"
    Else
        wsName = "A5Tickets"
    End If

    Set ps = Worksheets(wsName)

   'create processing instruction
   Set objNode = objDom.createProcessingInstruction("xml", "version='1.0' encoding='UTF-8'")
   objDom.appendChild objNode

   'create root element
   Set objXMLRootelement = objDom.createElement("fields")
   objDom.appendChild objXMLRootelement

   'create Attribute to the Field Element and set value
   Set objXMLattr = objDom.createAttribute("xmlns:xfdf")
   objXMLattr.NodeValue = "http://ns.adobe.com/xfdf-transition/"
   objXMLRootelement.setAttributeNode objXMLattr

   infoCol = 1
   fieldOneArr = Worksheets(mapping).range(mapRangeA)
   fieldTwoArr = Worksheets(mapping).range(mapRangeB)
   For row = 1 To UBound(fieldOneArr, 1)
        For column = 1 To UBound(fieldOneArr, 2)
            'create Heading element
            Set objXMLelement = objDom.createElement(fieldOneArr(row, column))
            objXMLRootelement.appendChild objXMLelement

            'create Attribute to the Heading Element and set value
            Set objXMLattr = objDom.createAttribute("xfdf:original")
            objXMLattr.NodeValue = (fieldTwoArr(row, column))
            objXMLelement.setAttributeNode objXMLattr
            objXMLelement.Text = ps.Cells(row, infoCol)
            infoCol = infoCol + 1
            endInfo = endInfo + 1
            If endInfo = 4 Then
                infoCol = 1
            End If
        Next column
    Next row

    'save XML data to a file
    If ticketSize = 2 Then
        objDom.Save ("C:\ExportTestA5.xml")
        MsgBox "A5 XML created"
    ElseIf ticketSize = 8 Then
        objDom.Save ("C:\ExportTestA7.xml")
        MsgBox "A7 XML created"
    Else
        objDom.Save ("C:\ExportTestA8.xml")
        MsgBox "A8 XML created"
    End If

End Sub 
```

当我点击调试时，它指向这一行：

```
fieldOneArr = Worksheets(mapping).range(mapRangeA) 
```

我知道 .Range 应该是大写的，但只要我更正它，它就会自动将其设置为小写。

此代码旨在创建一个 XML 文件，然后将所选工作表中的详细信息（基于 ticketSize 变量）写入正确的 XML 字段。因此，我有一个映射工作表，我从中写入字段和属性名称，然后将正确票证大小工作表中的信息写入元素的文本属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:51:21.390

在这种情况下，您应该定义函数参数的类型`mapRangeA As String`。Office 对象方法和属性通常对它们的错误消息不是很有帮助，因此如果参数有问题，最好出现类型不匹配错误。

# c - wifi网络中其他wifi设备的MAC地址

> ID：15449873
> 
> 赞同：4
> 
> 时间：2013-03-16T13:29:48.747
> 
> 标签：c, visual-c++, ip-address, mac-address

是否可以使用 C 或 C++ 以编程方式在 wifi 网络中找到所有其他启用 wifi 的设备的 MAC 地址，如果可以，请告诉我方法或方向，我该如何在 Visual Studio 2012 中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:41:16.473

如果它们在您设备旁边的同一 LAN 中（中间没有路由器/交换机，ARP 的范围是链路层。）您应该使用向设备发送[ARP](http://en.wikipedia.org/wiki/Address_Resolution_Protocol)数据包。

> 地址解析协议 (ARP) 是一种电信协议，用于将网络层地址解析为链路层地址。

要发送 ARP，您可以使用[Pcap](http://www.winpcap.org/)或[SendARP](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366358%28v=vs.85%29.aspx)。

# jquery - JQMobile pageinit 事件在 JQ document.ready 之前触发

> ID：15449896
> 
> 赞同：-1
> 
> 时间：2013-03-16T13:31:56.173
> 
> 标签：jquery, cordova, jquery-mobile

我正在开发一个使用 Jquery Mobile 的 PhoneGap 应用程序。
我想在 Jquery Mobile Initialize 之前自定义我的 html dom 元素。
所以我正在 document.ready 中编写这段代码。
但是现在 Jquery Mobile 首先初始化和我的 document.ready 代码执行信。
我想不出这怎么会发生。

我已按此顺序添加了 .js 文件。

1.  JQ.js
2.  我的代码.js
3.  JQM.js

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:11:46.453

在 phonegap 中，不要使用 document.ready。始终在 DeviceReady 事件中编写 JQM 初始化代码。[http://docs.phonegap.com/en/2.5.0/cordova_events_events.md.html#deviceready](http://docs.phonegap.com/en/2.5.0/cordova_events_events.md.html#deviceready)。

document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() { //在这里调用你的 JQM 初始化调用 }

# windows - 使用对话框描述创建窗口控件的方法

> ID：15449897
> 
> 赞同：0
> 
> 时间：2013-03-16T13:32:07.790
> 
> 标签：windows, api

我发现我经常创建一个只包含一个对话框的 Windows 应用程序，因为 Visual Studio 提供了一种创建控件的便捷方法。我突然想到，对话框必须在应用程序中的某处（模板）进行描述，并且该描述可能用于在主窗口上创建控件。

所以我的问题是...

是否有任何工具可以使用对话框描述在主窗口上创建控件？

我对基于 NET 或 MFC 的东西不感兴趣。

# actionscript-3 - 类对象数组

> ID：15449901
> 
> 赞同：0
> 
> 时间：2013-03-16T13:32:35.540
> 
> 标签：actionscript-3

有没有办法将对象保存在数组中，然后像这样调用它们：

```
array.push( Object );
var o:Object = new array[0](); 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:09:47.530

```
array.push( Object );
var o:Object = new ( array[0] as Class )(); 
```

# c# - System.Windows.Controls.Canvas 到 System.Windows.Controls.TextBox 的无效转换异常

> ID：15449905
> 
> 赞同：2
> 
> 时间：2013-03-16T13:33:29.430
> 
> 标签：c#, .net, wpf

我在运行时在画布上创建文本框，这就是为什么我不能`KeyDown`在按下的文本框上使用事件。

这是我的代码：

```
private void canvas1_KeyDown(object sender, KeyEventArgs e)
{
    int line = Convert.ToInt32(((TextBox)sender).Name.Substring(4, 1));
    //here pop up exception

    int column = Convert.ToInt32(((TextBox)sender).Name.Substring(3, 1));
} 
```

例外是：

> “无法将‘System.Windows.Controls.Canvas’类型的对象转换为‘System.Windows.Controls.TextBox’。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T13:42:16.970

`sender`是画布对象而不是文本框。您正在尝试将画布转换为不可能的文本框，因此出现异常。为什么不在运行时将公共事件处理程序附加到文本框？

```
myTextBox.KeyDown += new KeyEventHandler(TextBox_KeyDown);

private void TextBox_KeyDown(object sender, KeyEventArgs e)
{
    //the sender will be a TextBox here, but perform a check to avoid null exception
    TextBox tb = sender as TextBox;
    if(tb != null)
    {
       //your textbox code
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T13:51:04.760

您正在尝试将画布转换为文本框，因此出现异常。从您的代码中可以明显看出，keydown 事件与画布相关联，而不是文本框，在这种情况下，发送者对象将始终是画布。

如果文本框是在运行时创建的，则需要在运行时将 keydown 事件附加到文本框。

```
TextBox newTextBox = new TextBox();

newTextBox.KeyDown += new KeyEventHandler(newTextBox_KeyDown);

...

private void newTextBox_KeyDown(object sender, KeyEventArgs e)
{
    // Code to do
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T13:42:52.407

您不能将 Canvas 对象转换为文本框。

当动态创建文本框时，您可以为 keydown 事件设置一个函数。

```
mytextbox.KeyDown += myFunction; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T13:45:12.787

您正在执行演员 (TextBox) 发送者，但是发送者不是 TextBox 类型，事件的“发送者”是您的画布。

尝试将您的发件人投射到 Canvas，然后使用 FindControl() 查找您的文本框。

或者，您可以在创建 TextBox 后为其分配 KeyDown 事件处理程序。

# node.js - mongoose 实例方法在正确排序方法定义和模式命名后未定义

> ID：15449906
> 
> 赞同：1
> 
> 时间：2013-03-16T13:33:29.450
> 
> 标签：node.js, mongoose, instance-methods

我在似乎无法访问的模式上定义了一个实例方法。在我详细介绍之前，我会说我已经阅读了[this question]（[Mongoose instance method is undefined](https://stackoverflow.com/questions/10724876/mongoose-instance-method-is-undefined)），它有同样的问题，但我的根本原因肯定是不同的。在将模型连接到其名称之前，我定义了所有实例方法。

首先我定义了一个模式，然后定义了一个实例方法： AccountSchema.methods.addFunds = function(amountToAd, callback) { // 做一些事情来添加资金 return callback(); }

在该文件的底部，我将名称与架构相关联： var exports = module.exports = Account = mongoose.model('Account', AccountSchema);

作为记录，在关联架构和名称之前，我检查以确保 AccountSchema.methods 具有我的实例方法。

后来，我使用 Account.findOne 来获取一个帐户的实例：

```
AccountSchema.statics.login = function( email, password, callback) { 
Account.findOne({ email:email}, function( err, doc){
        if(err) {
            console.log(err, null);
        } 

        // below is just some stuff to see if the doc is associated to the schema
        if(doc) {
            var keys = Object.keys(doc.schema);
            for(var propertyName in doc.schema) {
            console.log(propertyName + ":  " + doc[propertyName]);
        }
        // blah, do some other stuff
        callback(doc);
    }
} 
```

我包括上面的代码片段，因为它看起来就像我从我的数据库中获取帐户时，它不再有任何实例方法。

最后，当我尝试调用 doc.addFunds 时，我得到：

```
TypeError: Object #<Object> has no method 'addFunds' 
```

我将不胜感激任何帮助或指向使用实例方法的完全完整的猫鼬模式定义的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:59:54.270

它应该是这样的吗？

```
AccountSchema.statics.login = function( email, password, callback) { 
    Account.findOne({ email:email}, function( err, doc){
        if(err) {
            console.log(err, null);
        } 

        if(doc) {
            var keys = Object.keys(doc.schema);
            for(var key in keys) {
                console.log(key + ":  " + doc.schema[key]); // I changed doc[key] to doc.schema[key]
            }
        }
        callback(doc);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-30T10:13:11.987

您对模型使用静态方法，但对实例（文档）不使用：

> 帐户架构。**静态**.login = 函数（电子邮件、密码、回调）{ ...

但正在尝试调用例如（doc）方法：

> **doc** .addFunds

你应该像这样调用模型：

```
AccountSchema.addFunds(...); 
```

# android - Android maven 仪器测试失败

> ID：15449907
> 
> 赞同：0
> 
> 时间：2013-03-16T13:33:36.637
> 
> 标签：android, instrumentation

我最近一直在尝试使用 Android Instrumentation 测试。所以主应用程序有以下结构

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.onestopspot</groupId>
    <artifactId>api_library</artifactId>
    <version>5.0.0-SNAPSHOT</version>
    <packaging>apk</packaging>
    <name>One Stop Spot</name>

    <dependencies>
        <dependency>
            <groupId>org.springframework.android</groupId>
            <artifactId>spring-android-rest-template</artifactId>
            <version>1.0.0.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.9.8</version>
        </dependency>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>4.1.1.4</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>
    <build>
        <finalName>${project.artifactId}</finalName>
        <sourceDirectory>src/main/java</sourceDirectory>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                    <artifactId>android-maven-plugin</artifactId>
                    <version>3.4.0</version>
                    <extensions>true</extensions>
                </plugin>
            </plugins>
        </pluginManagement>
        <plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <configuration>
                    <sdk>
                        <platform>16</platform>
                    </sdk>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

pm.xml 文件具有以下结构

http://maven.apache.org/maven-v4_0_0.xsd"> 4.0.0 onestopspot parent 1.0.0-SNAPSHOT com.onestopspot 仪器 apk 一站式商店-仪器测试

```
<dependencies>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android-test</artifactId>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>com.onestopspot</groupId>
        <artifactId>api_library</artifactId>
        <version>5.0.0-SNAPSHOT</version>
        <scope>provided</scope>
        <type>apk</type>
    </dependency>

    <dependency>
        <groupId>com.onestopspot</groupId>
        <artifactId>api_library</artifactId>
        <version>5.0.0-SNAPSHOT</version>
        <scope>provided</scope>
        <type>jar</type>
    </dependency>
</dependencies>

<profiles>
    <profile>
        <id>emma</id>
        <dependencies>
            <dependency>
                <groupId>emma</groupId>
                <artifactId>emma</artifactId>
                <type>jar</type>
                <scope>compile</scope>
                <version>2.1.5320</version>
            </dependency>
        </dependencies>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>properties-maven-plugin</artifactId>
                    <version>1.0-alpha-1</version>
                    <executions>
                        <execution>
                            <phase>initialize</phase>
                            <goals>
                                <goal>read-project-properties</goal>
                            </goals>
                            <configuration>
                                <files>
                                    <file>project.properties</file>
                                </files>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>

                <plugin>
                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                    <artifactId>android-maven-plugin</artifactId>
                    <configuration>
                        <test>
                            <coverage>true</coverage>
                            <createReport>true</createReport>
                        </test>
                    </configuration>
                    <extensions>true</extensions>
                    <!-- -->
                    <executions>
                        <execution>
                            <id>pull-coverage</id>
                            <phase>post-integration-test</phase>
                            <goals>
                                <goal>pull</goal>
                            </goals>
                            <configuration>
                                <pullSource>/data/data/com.onestopspot.api/files/coverage.ec</pullSource>
                                <pullDestination>${tested.project.dir}/target/emma/coverage.ec</pullDestination>
                            </configuration>
                        </execution>
                    </executions>

                </plugin>
            </plugins>
        </build>
        <reporting>
            <plugins>
                <plugin>
                    <groupId>org.sonatype.maven.plugin</groupId>
                    <artifactId>emma4it-maven-plugin</artifactId>
                    <version>1.3</version>
                    <configuration>
                        <metadatas>${tested.project.dir}/target/emma/coverage.em,${tested.project.dir}/src/
                        </metadatas>
                        <instrumentations>${tested.project.dir}/target/emma/coverage.ec</instrumentations>
                        <reportDirectory>${tested.project.dir}/target/emma/</reportDirectory>
                        <baseDirectory>{tested.project.dir}/target/</baseDirectory>
                        <formats>xml,html</formats>
                    </configuration>
                </plugin>
            </plugins>
        </reporting>
    </profile>
</profiles>

<build>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
    <plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>

                <test>
                    <skip>false</skip>
                    <!--<instrumentationPackage>packageName</instrumentationPackage> -->
                    <!--<instrumentationRunner>className</instrumentationRunner> -->
                    <!--<debug>true|false</debug> -->
                    <!--<coverage>true|false</coverage> -->
                    <!--<logonly>true|false</logonly> avd -->
                    <!--<testsize>small|medium|large</testsize> -->
                    <testSize>small</testSize>
                    <createReport>true</createReport>
                    <!--<classes> -->
                    <!--<class>your.package.name.YourTestClass</class> -->
                    <!--</classes> -->
                    <!--<packages> -->
                    <!--<package>your.package.name</package> -->
                    <!--</packages> -->
                </test>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

现在在我的主项目中，在 com.onestopspot.api 下，我有我的 android 应用程序类。在 onCreate 函数中，我有一条简单的 log.d 消息，告诉我应用程序类已创建。现在在我的测试项目中，我有一个 com.onestopspot.api 我有以下类

```
package com.onestopspot.api;

import junit.framework.Test;
import junit.framework.TestSuite;

import android.test.InstrumentationTestRunner;
import android.test.suitebuilder.TestSuiteBuilder;

public class AllTests extends TestSuite {

    public static Test suite() {
        return new TestSuiteBuilder(AllTests.class)
                .includeAllPackagesUnderHere()
                .build();
    }
} 
```

现在当我说 mvn clean install 我得到以下异常

```
[INFO] SH28HTV04654_HTC_HTCOneV :       java.lang.RuntimeException: Exception during suite construction
at android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests.testSuiteConstructionFailed(TestSuiteBuilder.java:238)
at java.lang.reflect.Method.invokeNative(Native Method)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:537)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1677)
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.test.suitebuilder.TestMethod.instantiateTest(TestMethod.java:87)
at android.test.suitebuilder.TestMethod.createTest(TestMethod.java:73)
at android.test.suitebuilder.TestSuiteBuilder.addTest(TestSuiteBuilder.java:262)
at android.test.suitebuilder.TestSuiteBuilder.build(TestSuiteBuilder.java:184)
at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:371)
at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4456)
at android.app.ActivityThread.access$1300(ActivityThread.java:139)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1306)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:156)
at android.app.ActivityThread.main(ActivityThread.java:4987)
at java.lang.reflect.Method.invokeNative(Native Method)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NoClassDefFoundError: com.onestopspot.api.MyApplication
at com.onestopspot.api.ApplicationTests.<init>(ApplicationTests.java:38)
... 18 more 
```

我究竟做错了什么 ？我已经在这两天了。[我的项目看起来与此处](http://code.google.com/p/maven-android-plugin/wiki/AutomateAndroidTestProject)发现的项目几乎相同，但这行得通吗？如果有人可以帮助我，我可以发送我的代码吗？提前致谢。

```
03-16 19:05:11.068: I/TestRunner(9928): failed: testSuiteConstructionFailed(android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests)
03-16 19:05:11.068: I/TestRunner(9928): ----- begin exception -----
03-16 19:05:11.068: I/TestRunner(9928): java.lang.RuntimeException: Exception during suite construction
03-16 19:05:11.068: I/TestRunner(9928):     at android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests.testSuiteConstructionFailed(TestSuiteBuilder.java:238)
03-16 19:05:11.068: I/TestRunner(9928):     at java.lang.reflect.Method.invokeNative(Native Method)
03-16 19:05:11.068: I/TestRunner(9928):     at java.lang.reflect.Method.invoke(Method.java:511)
03-16 19:05:11.068: I/TestRunner(9928):     at junit.framework.TestCase.runTest(TestCase.java:154)
03-16 19:05:11.068: I/TestRunner(9928):     at junit.framework.TestCase.runBare(TestCase.java:127)
03-16 19:05:11.068: I/TestRunner(9928):     at junit.framework.TestResult$1.protect(TestResult.java:106)
03-16 19:05:11.068: I/TestRunner(9928):     at junit.framework.TestResult.runProtected(TestResult.java:124)
03-16 19:05:11.068: I/TestRunner(9928):     at junit.framework.TestResult.run(TestResult.java:109)
03-16 19:05:11.068: I/TestRunner(9928):     at junit.framework.TestCase.run(TestCase.java:118)
03-16 19:05:11.068: I/TestRunner(9928):     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
03-16 19:05:11.068: I/TestRunner(9928):     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
03-16 19:05:11.068: I/TestRunner(9928):     at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:537)
03-16 19:05:11.068: I/TestRunner(9928):     at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1677)
03-16 19:05:11.068: I/TestRunner(9928): Caused by: java.lang.reflect.InvocationTargetException
03-16 19:05:11.068: I/TestRunner(9928):     at java.lang.reflect.Constructor.constructNative(Native Method)
03-16 19:05:11.068: I/TestRunner(9928):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
03-16 19:05:11.068: I/TestRunner(9928):     at android.test.suitebuilder.TestMethod.instantiateTest(TestMethod.java:87)
03-16 19:05:11.068: I/TestRunner(9928):     at android.test.suitebuilder.TestMethod.createTest(TestMethod.java:73)
03-16 19:05:11.068: I/TestRunner(9928):     at android.test.suitebuilder.TestSuiteBuilder.addTest(TestSuiteBuilder.java:262)
03-16 19:05:11.068: I/TestRunner(9928):     at android.test.suitebuilder.TestSuiteBuilder.build(TestSuiteBuilder.java:184)
03-16 19:05:11.068: I/TestRunner(9928):     at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:371)
03-16 19:05:11.068: I/TestRunner(9928):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4456)
03-16 19:05:11.068: I/TestRunner(9928):     at android.app.ActivityThread.access$1300(ActivityThread.java:139)
03-16 19:05:11.068: I/TestRunner(9928):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1306)
03-16 19:05:11.068: I/TestRunner(9928):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-16 19:05:11.068: I/TestRunner(9928):     at android.os.Looper.loop(Looper.java:156)
03-16 19:05:11.068: I/TestRunner(9928):     at android.app.ActivityThread.main(ActivityThread.java:4987)
03-16 19:05:11.068: I/TestRunner(9928):     at java.lang.reflect.Method.invokeNative(Native Method)
03-16 19:05:11.068: I/TestRunner(9928):     at java.lang.reflect.Method.invoke(Method.java:511)
03-16 19:05:11.068: I/TestRunner(9928):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-16 19:05:11.068: I/TestRunner(9928):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-16 19:05:11.068: I/TestRunner(9928):     at dalvik.system.NativeStart.main(Native Method)
03-16 19:05:11.068: I/TestRunner(9928): Caused by: java.lang.NoClassDefFoundError: **com.onestopspot.api.MyApplication**
03-16 19:05:11.068: I/TestRunner(9928):     at com.onestopspot.api.APITest.<init>(APITest.java:38)
03-16 19:05:11.068: I/TestRunner(9928):     ... 18 more
03-16 19:05:11.068: I/TestRunner(9928): ----- end exception -----
03-16 19:05:11.078: I/TestRunner(9928): finished: testSuiteConstructionFailed(android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests)
03-16 19:05:11.088: I/ActivityManager(1656): Force stopping package com.onestopspot.api uid=10161 
```

com.onestopspot.api.MyApplication 是我在主项目中的应用程序类。我的仪器仪表项目好像找不到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T08:36:21.567

尝试改变这个

```
 <dependency>
    <groupId>com.onestopspot</groupId>
    <artifactId>api_library</artifactId>
    <version>5.0.0-SNAPSHOT</version>
    <scope>provided</scope>
    <type>apk</type>
</dependency>

<dependency>
    <groupId>com.onestopspot</groupId>
    <artifactId>api_library</artifactId>
    <version>5.0.0-SNAPSHOT</version>
    <scope>provided</scope>
    <type>jar</type>
</dependency> 
```

至

```
<dependency>
    <groupId>com.onestopspot</groupId>
    <artifactId>api_library</artifactId>
    <version>5.0.0-SNAPSHOT</version>
    <scope>test</scope>
    <type>apk</type>
</dependency>

<dependency>
    <groupId>com.onestopspot</groupId>
    <artifactId>api_library</artifactId>
    <version>5.0.0-SNAPSHOT</version>
    <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T08:50:55.907

我曾经也有过一样的问题。事实证明，我的应用程序和我的测试项目具有相同的包名（在清单文件中）。adb 通过那里的包名称卸载并安装 apk。这组指令在执行测试之前由 adb 执行：

*   卸载应用程序
*   安装应用程序
*   卸载测试（如果它们与应用程序具有相同的包名称，这将卸载您的应用程序！！）
*   安装测试
*   运行测试

因此，在我的项目中，当我重命名我的仪器测试包时，一切都得到了修复。

# iphone - 在 UITableView 内时 UITextField 中的文本重复

> ID：15449909
> 
> 赞同：1
> 
> 时间：2013-03-16T13:33:45.800
> 
> 标签：iphone, objective-c, uitableview, uitextfield

我`UITextField`在`UITableView`. 我输入数据并关闭键盘。但是，当我向下滚动并隐藏`UITextField`然后再次向上滚动时，“UITextField”数据被复制，如下所示：

视图的原始负载： ![](../Images/398010583548964df900c0d90c45e576.png)

输入数据：![在此处输入图像描述](../Images/ca8fc7053def3fb1a834c8221634cae3.png)

隐藏文本字段后，然后再次开始编辑：![在此处输入图像描述](../Images/71f8bbcc15a722ebd240514b33109c7d.png)

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                   reuseIdentifier:CellIdentifier];
}

if ([indexPath section] == 0) { // Email & Password Section
    cell.textLabel.text = @"Subject";
} else {
    cell.textLabel.text = @"Task";
}

cell.selectionStyle = UITableViewCellSelectionStyleNone;

if ([indexPath section] == 0) {
    UITextField *subject = [[UITextField alloc] initWithFrame:CGRectMake(110, 10, 185, 30)];
    subject.adjustsFontSizeToFitWidth = YES;
    subject.textColor = [UIColor blackColor];
    if ([indexPath row] == 0) {
        subject.placeholder = @"Maths";
        subject.keyboardType = UIKeyboardTypeEmailAddress;
        subject.returnKeyType = UIReturnKeyNext;
    }
    subject.backgroundColor = [UIColor clearColor];
    subject.autocorrectionType = UITextAutocorrectionTypeNo;
    subject.autocapitalizationType = UITextAutocapitalizationTypeWords;
    subject.tag = 0;
    subject.clearButtonMode = UITextFieldViewModeNever;
    [cell.contentView addSubview:subject];
} else {
    UITextView *task = [[UITextView alloc] initWithFrame:CGRectMake(102, 0, 185, 40)];
    task.text = @"fasfashfjasfhasfasdjhasgdgasdhjagshjdgashjdgahjsdghjasgasdashgdgjasd";
    task.editable = NO;
    task.scrollEnabled = NO;
    task.userInteractionEnabled = NO;
    task.textColor = [UIColor colorWithRed: 62.0/255.0 green: 85.0/255.0 blue:132.0/255.0 alpha:1.0];
    task.backgroundColor = [UIColor clearColor];
}

return cell; 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T14:11:54.270

就像理查德说的那样，单元格被重用（这就是标识符的目的），这就是为什么你在你`tableView:cellForRowAtIndexPath:`的`nil`测试中测试`dequeueReusableCellWithIdentifier:`. 如果一个单元格已经存在（即之前分配的）并且不再显示，`dequeueReusableCellWithIdentifier:`将使用这个单元格来显示新出现的单元格的内容。

您正在做的是在`UITextView`每次**显示**而不是**创建**单元格时添加您的。因此，每次将一个单元格滚动出屏幕并弹出一个新单元格时，您都会在单元格中添加一个新`UITextView`单元格。`if (cell == nil)`您应该只在方法的一部分中添加子视图。由于您的单元格的内容非常不同，我建议使用两个不同的标识符。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifierForSection0 = @"Cell0";
    static NSString *CellIdentifierForSection1 = @"Cell1";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: [indexPath section] == 0 ? CellIdentifierForSection0 : CellIdentifierForSection1];
    if (cell == nil) {

        if ([indexPath section] == 0) { // Email & Password Section

            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                       reuseIdentifier:CellIdentifierForSection0];
            cell.textLabel.text = @"Subject";

            UITextField *subject = [[UITextField alloc] initWithFrame:CGRectMake(110, 10, 185, 30)];
            subject.adjustsFontSizeToFitWidth = YES;
            subject.textColor = [UIColor blackColor];
            if ([indexPath row] == 0) {
                subject.placeholder = @"Maths";
                subject.keyboardType = UIKeyboardTypeEmailAddress;
                subject.returnKeyType = UIReturnKeyNext;
            }
            subject.backgroundColor = [UIColor clearColor];
            subject.autocorrectionType = UITextAutocorrectionTypeNo;
            subject.autocapitalizationType = UITextAutocapitalizationTypeWords;
            subject.tag = 0;
            subject.clearButtonMode = UITextFieldViewModeNever;
            [cell.contentView addSubview:subject];
        } else {

            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                       reuseIdentifier:CellIdentifierForSection1];
            cell.textLabel.text = @"Task";

            UITextView *task = [[UITextView alloc] initWithFrame:CGRectMake(102, 0, 185, 40)];
            task.text = @"fasfashfjasfhasfasdjhasgdgasdhjagshjdgashjdgahjsdghjasgasdashgdgjasd";
            task.editable = NO;
            task.scrollEnabled = NO;
            task.userInteractionEnabled = NO;
            task.textColor = [UIColor colorWithRed: 62.0/255.0 green: 85.0/255.0 blue:132.0/255.0 alpha:1.0];
            task.backgroundColor = [UIColor clearColor];
        }

        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    return cell;
} 
```

请注意，此代码主要用于示例目的，可以大大减少。此外，您应该使用`UITableViewCell`Richard 建议的子类，因为它有助于组织您的代码并使其更可重用。

**但**不要`drawRect:`用于添加子视图。这是不必要的，会影响性能。`drawRect:`仅当您打算使用 CoreAnimation 或 CoreGraphics进行*真实绘图时才应使用。*添加子视图应在`initWithFrame:`或`initWithCoder:`取决于您是否使用 Interface Builder 完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:00:17.813

记住单元格会被重用，因此每次重用时都会添加子视图。如果要向单元格添加子视图，最好创建一个子类`UITableViewCell`并在该子类的方法中添加子视图`drawRect:`。这样，修改是单元格的一部分，并且不会在每次重用单元格时添加。

# jquery - 编辑 Nivo 滑块，将 .live 更改为 .on

> ID：15449910
> 
> 赞同：0
> 
> 时间：2013-03-16T13:33:47.280
> 
> 标签：jquery, nivo-slider

我希望让 Nivo 滑块与最新版本的 jQuery 一起工作。我需要将 .live 更改为 .on 以使其正常工作，但直接交换不起作用。如何使它适用于 jQuery 1.9？

```
if(settings.directionNav){
        slider.append('<div class="nivo-directionNav"><a class="nivo-prevNav">'+ settings.prevText +'</a><a class="nivo-nextNav">'+ settings.nextText +'</a></div>');

        $('a.nivo-prevNav', slider).live('click', function(){
            if(vars.running) { return false; }
            clearInterval(timer);
            timer = '';
            vars.currentSlide -= 2;
            nivoRun(slider, kids, settings, 'prev');
        });

        $('a.nivo-nextNav', slider).live('click', function(){
            if(vars.running) { return false; }
            clearInterval(timer);
            timer = '';
            nivoRun(slider, kids, settings, 'next');
        });
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T13:42:14.350

`$('{element_identifier'}).live(fn)`相当于`$(document).on('evt', '{element_identifier}', fn)`，所以这是我要做的交换：

```
if(settings.directionNav){
        slider.append('<div class="nivo-directionNav"><a class="nivo-prevNav">'+ settings.prevText +'</a><a class="nivo-nextNav">'+ settings.nextText +'</a></div>');

        $(document).on('click', 'a.nivo-prevNav, a.nivo-directionNav', function(){
            if(vars.running) { return false; }
            clearInterval(timer);
            timer = '';
            vars.currentSlide -= 2;
            nivoRun(slider, kids, settings, 'prev');
        });

        $(document).on('click', 'a.nivo-nextNav', function(){
            if(vars.running) { return false; }
            clearInterval(timer);
            timer = '';
            nivoRun(slider, kids, settings, 'next');
        });
    } 
```

# c# - 列表视图到数据表

> ID：15449911
> 
> 赞同：2
> 
> 时间：2013-03-16T13:33:54.903
> 
> 标签：c#, database, winforms, listview, datatable

我有一个列表视图，我需要将行和列加载到数据表中。

我试过如下

```
DataTable dt = new DataTable(); 

foreach (ListViewItem item in listView1.Items)
{
    table.Columns.Add(item.ToString()); 
    foreach (var it in item.SubItems) 
        dt.Rows.Add(it.ToString()); 
} 
```

当我检索行数和列数时，我将行数作为列数，将列数作为行数

不知道发生了什么..
请帮我
最好的问候
Bunzitop

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-31T06:41:39.247

它是很久以前的事了，但将来可能有人会为此苦苦挣扎，所以这是我将 ListView 转换为 DataTable 的解决方案：

```
DataTable dtZeitplan = new DataTable();
foreach (ColumnHeader chZeitplan in lvZeitplan.Columns)
{
    dtZeitplan.Columns.Add(chZeitplan.Text);
}
foreach (ListViewItem item in lvZeitplan.Items)
{
    DataRow row = dtZeitplan.NewRow();
    for(int i = 0; i < item.SubItems.Count; i++)
    {
        row[i] = item.SubItems[i].Text;
    }
    dtZeitplan.Rows.Add(row);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:15:39.163

你这样做是错误的。您需要`1 + listView1.Items[0].SubItems.Count`列`DataTable`（1 用于 ListViewItem，其他是子项）和`listView1.Items.Count`行数。因此你的代码应该是这样的：

```
if (listView1.Items.Count > 0)
{
       dt.Columns.Add();
       foreach (ListViewItem.ListViewSubItem lvsi in listView1.Items[0].SubItems)
              dt.Columns.Add();
       //now we have all the columns that we need, let's add rows
       foreach (ListViewItem item in listView1.Items)
       {
              List<string> row = new List<string>();
              row.Add(item.ToString());
              foreach (var it in item.SubItems)
                   row.Add(it.ToString());
              //Add the row into the DataTable
              dt.Rows.Add(row.ToArray());
       }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T01:50:03.290

```
 DataTable table = new DataTable();

            table.Columns.Add("MODUL", typeof(string));
            table.Columns.Add("ACIKLAMA", typeof(string));
            table.Columns.Add("UZUNLUK", typeof(string));
            table.Columns.Add("GENISLIK", typeof(string));
            table.Columns.Add("MIKTAR", typeof(string));

            for (int i = 0; i < listView2.Items.Count; i++)
            {
                table.Rows.Add(listView2.Items[i].SubItems[1].Text, listView2.Items[i].SubItems[2].Text, listView2.Items[i].SubItems[3].Text, listView2.Items[i].SubItems[4].Text, listView2.Items[i].SubItems[5].Text);
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-07T00:35:11.820

您可以使用 ItemsSource 属性和 System.Data 类 (ADO.Net) 将列表视图绑定到数据表和老虎钳（您想要的）。以下代码将为您提供来自现有绑定 ListView 控件的数据表。

```
DataView theDataView = (DataView)theListView.ItemsSource;
DataTable theDataTable = theDataView.Table; 
```

Manish Mishra 询问您的 listview 控件绑定到什么。这个问题问得好。我的回答假设它已经绑定到数据表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-21T14:30:40.850

来自 VB.Net 的工作代码：只需将您的列表视图名称替换为“LVActions”

```
 Dim it As Integer = 0
        Dim dt As New DataTable
        For it = 0 To LVActions.Items(0).SubItems.Count - 1
            Dim DCOL As New DataColumn(LVActions.Columns(it).Text)
            dt.Columns.Add(DCOL)
        Next
        For it = 0 To LVActions.Items.Count - 1
            Dim DROW As DataRow = dt.NewRow
            For j As Integer = 0 To LVActions.Items(it).SubItems.Count - 1
                DROW(LVActions.Columns(j).Text) = LVActions.Items(it).SubItems(j).Text
            Next
            dt.Rows.Add(DROW)
        Next 
```

# c# - newtonsoft json.net 跳过字符串或整数

> ID：15449913
> 
> 赞同：0
> 
> 时间：2013-03-16T13:34:19.527
> 
> 标签：c#, json, serialization, json.net

我在这里遇到了一个小问题，我想序列化一个字典，它包含`string`, `integers`,`object`

现在我正在遍历字典

```
 var data ="";
 foreach (var dict in dictObject)
 {
    var value = JsonConvert.SerializeObject(dict.value, Formatting.Indented,new JsonSerializerSettings()
     {
        ReferenceLoopHandling = ReferenceLoopHandling.Ignore,
        Converters = new List<JsonConverter>
                    {
                      new IsoDateTimeConverter(){DateTimeFormat = "yyyy-MM-dd hh:mm:ss"}    
                    }
      });

    data += dict.key +"="+ value;
 } 
```

现在我不想在那个字典`Json.Net`中序列化`string`, 。`integers`因为很少有字符串包含`\r\n`，并且那里的事情变得一团糟。

所以我希望它跳过`strings`and `integers`，但字典可能包含`DateTime`等等等等的东西。我仅指出字符串和整数作为示例。

字典包含我自己的自定义类、、、、、`entity classes`等等`integers`等等。我只想序列化我自己的自定义类和实体类。`strings``date time``JSON.NET`

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:09:20.220

您可以在序列化之前过滤您的字典，例如通过组装：

```
var customTypesAssembly = typeof(CustomClass).Assembly;
var filteredDictionary = dictionary.Where(x => x.Value.GetType().Assembly == customTypesAssembly)
    .ToDictionary(x => x.Key, x => x.Value);

var json = JsonConvert.SerializeObject(filteredDictionary); 
```

# css - css-only 100% div 高度和动态高度页脚

> ID：15449919
> 
> 赞同：0
> 
> 时间：2013-03-16T13:34:57.250
> 
> 标签：css

我有一个三部分布局：页眉、内容和页脚。我非常熟悉绝对定位技术；当我希望内容 div 扩展到可用高度的 100% 时，我经常使用它。

在这种情况下，我的问题是我事先不知道页脚的高度，它是根据自己的内容动态的，它有未知的行数（通常在 1 到 3 行之间）。
我希望主要内容 div 在考虑页眉的高度（这是固定的，所以很容易）和页脚的高度之后，抓住 100% 的可用高度，因此我不能使用绝对定位技术这里。

我有一个涉及 javascript 的解决方案，但我试图找到一个仅 css 的解决方案。理想情况下，它应该是一个跨浏览器的解决方案（IE8、IE9、chrome、firefox 和 Safari）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:41:51.217

尝试这个

```
<!doctype html>
<html>
<body>
<style>
html,
body {
   margin:0;
   padding:0;
   height:100%;
}
#container {
   min-height:100%;
   position:relative;
}
#header {
   background:#ff0;
   padding:10px;
}
#body {
   padding:10px;

}
#footer {
   position:absolute;
   bottom:0;
   width:100%;

   background:#6cf;
}
</style>
<div id="container">
   <div id="header">header</div>
   <div id="body">body</div>
   <div id="footer">footer</div>
</div>
</body>
</html> 
```

# opengl - 在 QMainWindow 中创建几个 OpenGL 小部件

> ID：15449928
> 
> 赞同：2
> 
> 时间：2013-03-16T13:36:19.510
> 
> 标签：opengl, qt5, qwidget

我使用 Qt5，必须编写简单的 3D 编辑器之类的代码。我需要在我的主窗口中有 4 个投影视图（用于不同的场景投影）。我看到了 OpenGLWindow 示例，但只有一个窗口，我不知道如何为我的目的修改它。

示例中有下一行。

`class OpenGLWindow : public QWindow, protected QOpenGLFunctions { ........ private: QOpenGLContext *m_context; }`

正如 Assistant 所说，QOpenGLContext 只能在 QWindow 的直接基础 QSuface 上绘制。

那么，如何在一个 MainWindow 上放置多个投影视图。

我需要包含在 QOpenGLFunctions 中的工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:45:22.697

你只需要一个QOpenGLContext。绘制多个视图通常是这样完成的：

```
//Top Left
glViewport (0, windowHeight/2, windowWidth/2, windowHeight/2);
draw();

//Top Right
glViewport (windowWidth/2, windowHeight/2, windowWidth/2, windowHeight/2);
draw();

//Bottom Right
glViewport (windowWidth/2, 0, windowWidth/2, windowHeight/2); 
draw();

//Bottom Left
glViewport (0, 0, windowWidth/2, windowHeight/2);
draw(); 
```

# css - 模拟 chrome 选择的输入样式

> ID：15449929
> 
> 赞同：-2
> 
> 时间：2013-03-16T13:36:27.730
> 
> 标签：css, google-chrome, styles, outline

有人可以告诉我在所有浏览器中生成 chrome 使用的选定黄色轮廓样式的 css 吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:06:48.817

查看 Twitter Bootsrap 的[Form](http://twitter.github.com/bootstrap/base-css.html#forms)组件，它们使用的是蓝光。

# c# - 使用 MonoTouch 绘制网格的最简单方法

> ID：15449931
> 
> 赞同：-3
> 
> 时间：2013-03-16T13:36:37.523
> 
> 标签：c#, xamarin.ios, grid

我想画一个这样的网格： ![在此处输入图像描述](../Images/57e9b88e64c7c3b13b2d3790f5b52c89.png)

我希望能够设置每个矩形个体的颜色。我还希望能够将特定的矩形设置为透明的。

在 MonoTouch / C# 中绘制这样的网格的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:53:53.943

该代码在面板上显示了网格的绘制，但您可以使用任何东西作为您的画布控件。检查以下代码：

```
 int numHorisontal = 20;
        int numVertical;
        int squareDim = 10;
        int xOffset = 30;
        int yOffset = 30;
        void panel_Paint(object sender, PaintEventArgs e)
        {
            for (int i = 0; i <= numVertical; i++)
            {
                e.Graphics.DrawLine(Pens.Black, new Point(xOffset, yOffset + i * squareDim), new Point(xOffset + 20 * squareDim, yOffset + i * squareDim));
            }
            for (int i = 0; i < numHorisontal; i++)
            {
                e.Graphics.DrawLine(Pens.Black, new Point(xOffset + i * squareDim, yOffset), new Point(xOffset + i * squareDim, yOffset + 20 * squareDim));
            }
        } 
```

`numHorisontal`是网格中水平方格的数量，`numVertical`是垂直方格的数量。`squareDim`是一个正方形边的大小。如果要在索引 i 和 j 上设置正方形的颜色，则可以使用以下方法。如果你想设置一些正方形透明，那么画布也应该是透明的（将画布的背景颜色设置为透明）。

```
private void SetColor(int i, int j, Color color, Graphics g)
{
    g.FillRectangle(new SolidBrush(color), new Rectangle(i * squareDim, j + squareDim, squareDim, squareDim));
} 
```

**请注意**，这是您想在 WinForms 中使用 C# 绘制的代码，您可以在任何其他技术中使用类似的代码。

# jquery - 使用 Knockout 和 Bootstrap 动态加载每个幻灯片轮播的多项

> ID：15449933
> 
> 赞同：2
> 
> 时间：2013-03-16T13:37:00.463
> 
> 标签：jquery, twitter-bootstrap, knockout.js, carousel

几天来我一直在尝试解决这个问题，但无法使其正常工作。在我们运行的一些电子商务网站上替换旧的 Flash 品牌 - 我们销售类似横幅时，对于 Javascript 和移动友好的解决方案，我试图赶上这个要求：

*   通过 AJAX（完成）获取品牌列表和设置（即每张幻灯片的最大项目数）。
*   使用引导轮播（完成）。
*   动态轮播内容渲染，使用 Knockout

问题在于后者，因为我找不到在每张幻灯片上绘制内容的方法。[在这个 SO question (with jsfiddle partner)](https://stackoverflow.com/questions/12518412/twitter-bootstrap-responsive-carousel-with-multiple-items)中可以看到我想要实现的非动态渲染（基于直接 html ） 。

我在使用 KO foreach 绑定时遇到问题，以便在每张幻灯片上呈现多个项目。

关于以下代码的一些见解...

*   **品牌：**品牌结构列表。一个 observableArray，包含表示品牌的不可观察结构（名称、图像 URL 等）
*   $parent.isFirst()：如果必须绘制新幻灯片，则返回给定每张幻灯片的最大项目数
*   **$parent.defineItemClass：**返回幻灯片的类（它只用'活动项目'标记第一个，其余的只是'项目'
*   **$parent.drawTail:**判断包含的 html 是否必须被绘制

**模板...**

```
<script type="text/html" id="brand-widget-template">
<div class="container-fluid">
    <div class="row-fluid">
        <div class="carousel slide" id="brands-carousel">
            <div class="carousel-inner" data-bind="foreach: brands">
                <!-- ko if: $parent.isFirst() -->
                <div data-bind="css: $parent.defineItemClass($index)">
                    <ul class="thumbnails">
                <!-- /ko -->
                    <li class="span1">
                        <div class="caption">
                            <h5 data-bind="text: Name"></h5>
                        </div>
                        <div class="thumbnail">
                            <img src="#" alt="">
                        </div>
                    </li>
                <!-- ko if: $parent.drawTail() -->
                    </ul>
                </div>
                <!-- /ko -->
            </div>
        </div>
    </div>
</div> 
```

我一定对渲染完成的方式有误解。在调试中，我注意到 $parent.drawTail 永远不会被调用。有任何想法吗？

这是[我从项目中分离出最重要的部分的小提琴](http://jsfiddle.net/luigi/cRTaS/)。

谢谢！路易吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T23:35:56.757

我认为最好有一个计算的 observable 将主列表分解成一个嵌套列表，这样你就可以为每个循环使用嵌套。这会将视图逻辑放回视图模型中，而不是将其放在模板中。

所以对于视图模型来说是这样的：

```
 self.brands_in_fours = ko.computed(function () {
        var outer_array = [];

        _.each(self.brands(), function (item, index) {
            if (index % 4 == 0) {
                outer_array.push(ko.observableArray([item]));
            } else {
                outer_array[outer_array.length - 1]().push(item);
            }
        });
        return outer_array;
    }); 
```

（我使用 underscore.js 循环遍历 self.brands 数组）

模板：

```
<div class="carousel-inner" data-bind="foreach: brands_in_fours">
    <div class="item" data-bind="css: {'active': $index()==0}">
        <ul data-bind="foreach: $data">
            <li class="span3">
                <div class="caption">
                    <h5 data-bind="text: Name"></h5>
                </div>
                <div class="thumbnail">
                    <img src="http://placehold.it/260x180" alt="" />
                </div>
            </li>
        </ul>
    </div>
</div> 
```

此外，我认为您将“活动”类添加到第一个元素过于复杂 - 您只需检查索引并在其等于 0 时添加它。

我附上了一个[jsfiddle](http://jsfiddle.net/teddy777/8Trme/1/ "jsfiddle")

# android - 新意图使应用程序崩溃

> ID：15449938
> 
> 赞同：0
> 
> 时间：2013-03-16T13:37:36.010
> 
> 标签：android, android-layout

我想在单击 ListView 项目后开始新的活动，但应用程序崩溃了。如果我注释掉意图初始化，并且只留下 toast 消息应用程序不会崩溃。Сonsequently 问题在于 Intent。我不知道为什么会这样。任何帮助将不胜感激。

```
 public class MainActivity extends Activity {

        private ArrayList<Cinemas> cinema;
        private CinemasAdapter cinemaAdapter;
        private ListView list;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main); 

            cinema = new Handler().handle(); 
            cinemaAdapter = new CinemasAdapter(this, R.layout.movie_data_row, cinema);
            list = (ListView) findViewById (R.id.listing1);     
            list.setAdapter(cinemaAdapter);
            setContentView(list);

            list.setOnItemClickListener(new OnItemClickListener(){
            public void onItemClick (AdapterView<?> parent, View view, int position, long id) 
            {
                Context context = null;
                Cinemas movie = cinemaAdapter.getItem(position);
                Toast.makeText(getBaseContext(), "Click", Toast.LENGTH_LONG).show();
                Intent intent = new Intent (context,More.class);
                startActivity(intent); 
            }
            });
        }    
    } 
```

这是logcat：

```
03-16 13:33:28.882: E/AndroidRuntime(2536): FATAL EXCEPTION: main
03-16 13:33:28.882: E/AndroidRuntime(2536): java.lang.NullPointerException
03-16 13:33:28.882: E/AndroidRuntime(2536):     at android.content.ComponentName.<init>(ComponentName.java:75)
03-16 13:33:28.882: E/AndroidRuntime(2536):     at android.content.Intent.<init>(Intent.java:3491)
03-16 13:33:28.882: E/AndroidRuntime(2536):     at com.example.bakumovies.MainActivity$1.onItemClick(MainActivity.java:47)
03-16 13:33:28.882: E/AndroidRuntime(2536):     at android.widget.AdapterView.performItemClick(AdapterView.java:298)
03-16 13:33:28.882: E/AndroidRuntime(2536):     at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
03-16 13:33:28.882: E/AndroidRuntime(2536):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
03-16 13:33:28.882: E/AndroidRuntime(2536):     at android.widget.AbsListView$1.run(AbsListView.java:3423)
03-16 13:33:28.882: E/AndroidRuntime(2536):     at android.os.Handler.handleCallback(Handler.java:725)
03-16 13:33:28.882: E/AndroidRuntime(2536):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-16 13:33:28.882: E/AndroidRuntime(2536):     at android.os.Looper.loop(Looper.java:137)
03-16 13:33:28.882: E/AndroidRuntime(2536):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-16 13:33:28.882: E/AndroidRuntime(2536):     at java.lang.reflect.Method.invokeNative(Native Method)
03-16 13:33:28.882: E/AndroidRuntime(2536):     at java.lang.reflect.Method.invoke(Method.java:511)
03-16 13:33:28.882: E/AndroidRuntime(2536):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-16 13:33:28.882: E/AndroidRuntime(2536):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-16 13:33:28.882: E/AndroidRuntime(2536):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:40:07.710

您已使用 null 初始化上下文

```
 Context context = null;

 Intent intent = new Intent (context,More.class); 
```

而且您从上下文开始意图，这导致`NullPointerException`

所以这样做

```
Intent intent = new Intent (MainActivity.this, More.class); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T13:38:43.547

采用：

```
Intent intent = new Intent (MainActivity.this, More.class); 
```

代替

```
Intent intent = new Intent (context,More.class); 
```

你得到了一个`NullPointerException`，因为，好吧，你分配`context`给`null`.

# mysql - mysql_fetch_array 没有第 0 行的结果

> ID：15449940
> 
> 赞同：-1
> 
> 时间：2013-03-16T13:37:48.850
> 
> 标签：mysql, arrays, fetch

我有这个

```
while($row = mysql_fetch_array($result, MYSQL_ASSOC)){
 echo  "<li><a href='".$root_dir
        .strtoupper(utf8_encode($row['country']))
        ."/ci"
        .utf8_encode($row['id'])
        ."/"
        .cleanURLString(strtolower(utf8_encode($row['name'])))
        .".html'>".utf8_encode($row['name'])
        ."</a> ("
        .utf8_encode(round($row['distance'],2)  )
        ." km)</li>";
        } 
```

我怎样才能过滤这个结果，所以我只得到第 1 行直到 XX ...没有第 0 行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:44:24.830

只需在 while 循环之前调用 mysql_fetch_array(...) 一次。或者在你的 SQL 查询中使用 OFFSET ......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:44:40.830

`while`在开始循环之前获取一行。

```
$row = mysql_fetch_array($result, MYSQL_ASSOC);
while($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
 echo  "<li><a href='".$root_dir 
```

# c# - 转换为 ISO 8859-1 时，控制台不显示带有 caron 的小 s

> ID：15449941
> 
> 赞同：1
> 
> 时间：2013-03-16T13:38:01.140
> 
> 标签：c#, encoding, console, iso-8859-1, windows-1252

我的应用程序通过 TCP 接收 ISO 8859-1 字符的整数值，并应显示它以在控制台中进行测试。为了将 Int/Bytes 转换为 ISO 8859-1 字符串，我从[这个问题](https://stackoverflow.com/questions/666385/how-can-i-convert-extended-ascii-to-a-system-string)的接受答案中获取了代码：

```
var e = Encoding.GetEncoding("iso-8859-1");
var s = e.GetString(new byte[] { 189 }); 
```

它工作正常，例如值为*189* ，在 ISO 8859-1中是*½ 。*但是在我的测试中，根据[这个站点](http://www.ascii-code.com/)，我得到了一个值为`154`š *（*带有 caron 的拉丁小写字母 S）的 Byte 。 问题是它没有在控制台上显示它，它只是显示一个这样的问号： 并且调试器只显示一个纯字符串：**可能是什么错误？**任何帮助将不胜感激。

![在此处输入图像描述](../Images/63dc102a6bd416194a2c27f857276fde.png)![在此处输入图像描述](../Images/1534e34a6a19501bab36627f43352759.png)

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T13:57:41.273

我要在这里冒险了；ISO/IEC 8859-1 没有定义 126 到 159 之间的值。请参阅[http://en.wikipedia.org/wiki/ISO/IEC_8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)

这行得通；

```
 var e = Encoding.GetEncoding("Windows-1252");
  var s = e.GetString(new byte[] { 154 });

  Console.OutputEncoding = Encoding.GetEncoding("Windows-1252");

  Console.WriteLine(s); 
```

我相信 Windows-1252 是首选；

> ...但是 HTML 5 规范草案要求宣传为 ISO-8859-1 的文档实际上使用 Windows-1252 编码进行解析。[2]）

[http://en.wikipedia.org/wiki/ISO/IEC_8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)**

# python - 使用模数运算符时，我希望数字不是余数 0

> ID：15449942
> 
> 赞同：2
> 
> 时间：2013-03-16T13:38:16.023
> 
> 标签：python, modulo

首先，我不得不说我的英语太差了。
我找不到更好的这篇文章的标题。
无论如何，我想问你们关于 Python 的问题。

请看下面的代码。

```
for i in range(1,11):
    print(i,'-->',i%4) 
```

结果是

```
1 --> 1
2 --> 2
3 --> 3
4 --> 0
5 --> 1
6 --> 2
7 --> 3
8 --> 0
9 --> 1
10 --> 2 
```

所有结果都可以，除了那些 4 的倍数。我想要 4 是 4，8 是 4，12 是 4 ......而不是 0（零）。像这样的东西。

```
1 --> 1
2 --> 2
3 --> 3
4 --> 4
5 --> 1
6 --> 2
7 --> 3
8 --> 4
9 --> 1
10 --> 2 
```

有什么线索吗？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T13:42:56.203

```
for i in range(1,11):
    print(i,'-->',(i-1)%4+1) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T13:49:39.673

我个人觉得最直观（保持模数的意图更容易阅读）：

```
for i in range(1,11):
    print(i,'-->',i%4 or 4) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T13:47:00.900

您可以使用这个简单的结构：

```
if i % 4 == 0:
    i = 4 
```

可能是我不明白你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T13:48:00.613

你可以尝试这样的事情：

```
for i in range(1,11):
    if i%4 == 0:
        print(i,'-->',4)
    else:
        print(i,'-->',i%4) 
```

或者

```
for i in range(1,11):
    print(i,'-->',4 if i%4 == 0 else i%4) 
```

# c# - 将通过 oracle 11g 和 10g 客户端连接的应用程序

> ID：15449943
> 
> 赞同：1
> 
> 时间：2013-03-16T13:38:24.093
> 
> 标签：c#, oracle, oracle10g, oracle11g

我用 C# 编写了一个连接到 oracle 数据库的示例应用程序。在我的工作站上，我安装了 Oracle Client 10g，并在 C# 项目中添加了对 oracle bin 文件夹中的 oracle.dataaccess.dll 的引用。当我在带有 10g 版本的 oracle 客户端的桌面上运行应用程序时，一切正常，但在带有 11g 版本的 oracle 客户端的桌面上，应用程序无法运行（崩溃）。当我删除一个引用并从 11g 客户端添加对 oracle.dataaccess.dll 的引用时，构建后，应用程序仅适用于 oracle 客户端 11g，并且在使用 oracle 客户端 10g 的工作站上崩溃我如何编写一个适用于 10g 的应用程序和11g oracle客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:55:08.027

我已经这样做了，但为了节省我把它全部写出来，其他人已经在另一个[问题](https://stackoverflow.com/a/4407624/84539)中回答了它。

我发现从 11g 获取所需的 DLL，它将连接到 10g 或 11g 数据库。

# javascript - JavaScript：颜色随机连接线

> ID：15449944
> 
> 赞同：2
> 
> 时间：2013-03-16T13:38:25.403
> 
> 标签：javascript, jquery

我有 js 业余画家，想这样工作： - 点击位置 (x1, y1) - 点击位置 (x2, y2) - 点击位置 (x3, y3)

然后我有按钮连接和程序连接最后一个点和第一个点，我得到一些可以用颜色填充的内容。

```
ctx.beginPath();
ctx.moveTo(50,50);
ctx.lineTo(100,100);
ctx.lineTo(70, 150);
ctx.lineTo(50, 50);
ctx.fillStyle = "000";
ctx.fill(); 
```

这很好用，但我想用我想要的连接线的按钮按我的方式工作：

```
x = event.pageX - $("#myCanvas").offset().left;
y = event.pageY - $("#myCanvas").offset().top;
if (n == 0) {
    a = x;
    b = y;
    zx = x;
    zy = y;
}
ctx.beginPath();
ctx.moveTo(a,b);
if(n != 0)
    ctx.lineTo(x,y);
ctx.stroke();
a = x;
b = y;
n = 1; 
```

Down 我有关闭线路的功能（首先连接和最后连接以获得连接的线路）。

```
 jQuery('#connect').click(function () {
    if ((this.id == 'connect') && (
        //ctx.beginPath();
        ctx.moveTo(a, b);
        ctx.lineTo(zx, zy);
        //ctx.closePath();
        ctx.fillStyle = bpolnila.toString();
        ctx.fill();
        ctx.stroke();
    }
}); 
```

这里有什么问题我尝试了很多，但我的连接线不想填充颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:38:31.927

我曾经创建了一个项目，用于在您的浏览器中在线创建 HTML 图像地图。我还使用画布和鼠标点击在图像上画线：项目：[http ://www.kolchose.org/simon/ajaximagemapcreator/](http://www.kolchose.org/simon/ajaximagemapcreator/)

源代码位于[http://code.google.com/p/imagemap/](http://code.google.com/p/imagemap/)

# android - 来自 URI 解析的通知声音不起作用

> ID：15449945
> 
> 赞同：2
> 
> 时间：2013-03-16T13:38:26.563
> 
> 标签：android, uri, android-notifications

Stackoverflow 上至少有 7 个与此相关的问题，我已经多次尝试了每一个建议和解决方案，但都没有奏效。这是我最近的尝试：

```
private Notification createNotification() {
       Notification notification = new Notification();

       if(notifyImage=="food")
         {
           notification.icon = R.drawable.food;
           notification.sound = Uri.parse(ContentResolver.SCHEME_ANDROID_RESOURCE + "://com.example.memoryGuide/raw/start");
         }
       else
       {
           notification.icon = R.drawable.bar; 
           notification.sound = Uri.parse(ContentResolver.SCHEME_ANDROID_RESOURCE + "://com.example.memoryGuide/raw/start");
       }

       notification.when = System.currentTimeMillis();
       notification.flags |= Notification.FLAG_AUTO_CANCEL;
       notification.flags |= Notification.FLAG_SHOW_LIGHTS;
       notification.defaults |= Notification.DEFAULT_VIBRATE;
       notification.defaults |= Notification.DEFAULT_LIGHTS; 
       notification.ledARGB = Color.WHITE;
       notification.ledOnMS = 1500;
       notification.ledOffMS = 1500;
       return notification;
 } 
```

你可以看到我两次尝试使用的声音都无法正常工作，但图标工作得很好。我不知道我是否遗漏了任何东西以使其正常工作，但我使用的所有代码都在我的帖子中。

我的声音文件在 res/raw/start.mp3 中，按下按钮时我可以让这个声音工作，所以声音很好。

我认为包名是对的，我的应用程序在每个类的顶部都有这个：

```
package com.example.memoryGuide; 
```

任何想法为什么声音从不播放？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T19:46:48.980

采用

```
notification.sound = Uri.parse(ContentResolver.SCHEME_ANDROID_RESOURCE
        + "://" + getPackageName() + "/raw/start"); 
```

注意一件事。

> [字符串 android.content.ContextWrapper.getPackageName()](http://developer.android.com/reference/android/content/ContextWrapper.html#getPackageName%28%29)

返回您的 android 应用程序的包名称。和

> 包 com.example.memoryGuide；

显示你的源包名的包名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-01T12:14:47.767

如果这个对你有用。请投票......

只需将您的声音文件放入 Res\raw\siren.mp3 文件夹::

然后把这个代码..这肯定会为你工作。

对于自定义声音::

```
 notification.sound = Uri.parse("android.resource://"
            + context.getPackageName() + "/" + R.raw.siren); 
```

默认声音::

```
notification.defaults |= Notification.DEFAULT_SOUND; 
```

对于自定义振动 ::

```
 long[] vibrate = { 0, 100, 200, 300 };
     notification.vibrate = vibrate; 
```

默认振动 ::

```
notification.defaults |= Notification.DEFAULT_VIBRATE; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-02T21:23:44.283

我在测试时遇到了类似的问题`API 23`。虽然我不知道问题的原因，但我*确实*设法找到了完成工作的解决方法。

* * *

在[Google 的一个示例](https://github.com/googlesamples/android-play-location/blob/master/Geofencing/app/src/main/java/com/google/android/gms/location/sample/geofencing/GeofenceTransitionsIntentService.java)中，这样构造了一个通知：

```
// Get a notification builder that's compatible with platform versions >= 4
NotificationCompat.Builder builder = new NotificationCompat.Builder(this);

// Define the notification settings.
builder.setSmallIcon(R.drawable.ic_launcher)
        // In a real app, you may want to use a library like Volley
        // to decode the Bitmap.
        .setLargeIcon(BitmapFactory.decodeResource(getResources(),
                R.drawable.ic_launcher))
        .setColor(Color.RED)
        .setContentTitle(notificationDetails)
        .setContentText(getString(R.string.geofence_transition_notification_text))
        .setContentIntent(notificationPendingIntent);

// Dismiss notification once the user touches it.
builder.setAutoCancel(true);

// Get an instance of the Notification manager
NotificationManager mNotificationManager =
        (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

// Issue the notification
mNotificationManager.notify(0, builder.build()); 
```

注意类[**`NotificationCompat.Builder`**](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html)。**由于某种我无法理解的原因，除了默认的**声音之外，它没有播放任何声音。换句话说，只有这样才有效：

```
// Define sound URI
Uri soundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION); // Default
...
builder.setSound(soundUri); //Set the sound to play 
```

但这没有：

```
Uri soundUri = Uri.parse(ContentResolver.SCHEME_ANDROID_RESOURCE + "://" + 
                           getPackageName() + "/" + R.raw.name_of_sound); 
```

[**`Notification.Builder`**](http://developer.android.com/reference/android/app/Notification.Builder.html)在简单地用（可用于`API >= 11`）替换构建器类之后，上面的“*这不是*”部分开始按预期工作。

**结论**：如果您愿意牺牲（或不感兴趣）与`API < 11`.

# c++ - CMake 找不到包含文件

> ID：15449949
> 
> 赞同：28
> 
> 时间：2013-03-16T13:38:56.243
> 
> 标签：c++, makefile, cmake

我有一个具有以下布局的项目：

```
 /build
   /source
        +--- CMakeLists.txt
        |
        +--- /bin
        |      +--CMakefiles.txt
        |      +--main.cpp
        |
        +--- /jsoncpp
        |       +--- /json
        |       |       +--json.h
        |       |       +--json-forwards.h
        |       |
        |       +--jsoncpp.cpp
        |       +--CMakeLists.txt
        |
        +--- /jsonreader
                 +-- jsonreader.cpp
                 +-- jsonreader.h
                 +-- CMakeLists.txt 
```

在 /source/CMakeLists.txt 我有这行代码；

```
include_directories(jsoncpp jsonreader) 
```

但是在构建目录中运行'cmake -G“MSYS Makefiles”../source'会生成Makefile，然后运行'make'会生成以下错误：

```
Scanning dependencies of target updater
[ 33%] Building CXX object bin/CMakeFiles/updater.dir/main.cpp.obj
In file included from k:/own-projects/updater-Project/withJsonCpp/source/bin/main.cpp:2:0:
../source/jsonreader/jsonreader.h:2:18: fatal error: json.h: No such file
or directory
compilation terminated.
make[2]: *** [bin/CMakeFiles/updater.dir/main.cpp.obj] Error 1
make[1]: *** [bin/CMakeFiles/updater.dir/all] Error 2
make: *** [all] Error 2 
```

我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-17T00:58:21.393

有两个问题。首先，您必须将`jsoncpp/json`路径添加到包含的目录。然而，这样做会产生第二个问题。由于您的可执行文件不在您需要为`${CMAKE_SOURCE_DIR}`路径添加前缀的源文件夹中，因此`include_directories()`如下所示：

```
include_directories("${CMAKE_SOURCE_DIR}/jsoncpp"
    "${CMAKE_SOURCE_DIR}/jsoncpp/json"
    "${CMAKE_SOURCE_DIR}/jsonreader") 
```

我只是出于习惯添加了引号。我大部分时间都是用我的`CMakeLists.txt`，所以路径中的空格没有问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-16T21:48:08.720

阿曼尼，

似乎您包含“json.h”而没有其相对路径。您可以像这样包含它：

```
#include "json/json.h" 
```

或者，在您的 CMakeLists.txt 文件中，将 json 目录添加到包含目录：

```
include_directories(jsoncpp jsoncpp/json jsonreader) 
```

# html - 设置 HTML UIWebView 的宽度

> ID：15449953
> 
> 赞同：1
> 
> 时间：2013-03-16T13:39:14.917
> 
> 标签：html, ios, iphone, uiwebview

我可以以编程方式设置我放入的 HTML 文件的宽度`UIWebView`吗？我的问题是`UIWebView`框架设置在 a 中`UITableViewCell`，所以我必须将其设置`CGRectMake`为适合单元格。但是现在内容的大小比框架大。我可以`UIWebView`在 HTML 中设置宽度吗？

**我的 HTML 代码：**

```
<div id="attachment_16505" class="wp-caption alignnone" style="width: 460px"><img src="http://www.floorballmagazin.de/wp-content/uploads/2013/03/20130303_schweiz.jpg" alt="Maßgeblich beteiligt - Mathias Hofbauer sprang von der Strafbank und netzte zum 3:1 ein. / Foto: Hans Ulrich Muelchi, Swiss Unihockey" width="460" height="318" class="size-full wp-image-16505 colorbox-16504" /> <p class="wp-caption-text">Maßgeblich beteiligt &#8211; Mathias Hofbauer sprang von der Strafbank und netzte zum 3:1 ein. / Foto: Hans Ulrich Muelchi, Swiss Unihockey</p> </div> <p><em>In der Schweiz kann Wiler sein historisches Ausscheiden aus den Playoffs mit einem versöhnlichen Cupsieg kurieren. Vor über 3.000 Zuschauern besiegen die Berner Grünenmatt mit 3:1\. Bei den Damen kann Sandra Dirksen ihren Titelreigen nicht fortsetzen, die Red Ants brachten eine versprechende Führung nicht über die Runden.</em></p> <p>Als Wilers Kapitän Mathias Hofbauer in 56\. Spielminute auf die Strafbank wanderte, wurde es nochmal eng für den noch aktuellen Meister. Sein Unterzahlspiel überstand man aber mit Bravour und als Hofbauer wieder zurück aufs Feld durfte, dauerte es gerade mal sechs Sekunden und der WM-Rekordscorer machte mit einem scharfen Schlenzer alles klar.</p> <p>Bei den Damen waren Deutschlands Ex-Nationalspielerin Sandra Dirksen und ihre Red Ants auf dem Weg zum vierten Cupsieg in Folge. Rychenberg führte zu Beginn des Schlussdrittels mit 2:0, brach aber ein und unterlag Chur mit 2:5\. &#8220;Wer den Pokal mit nach Hause nehmen will, muss drei Drittel gut spielen und nicht nur zwei&#8221;, bedauert Dirksen.</p> <p>&#8220;Wir hatten zwar den besseren Start, aber am Ende doch nur Silber. Fünfzehn Sekunden vor der 2\. Drittelspause haben wir ein abgelenktes, unglückliches Tor kassiert, das war der Knackpunkt leider.&#8221; Dafür sei man umso motivierter für die bevorstehenden Play-Offs. &#8220;Die Atmosphäre bei einem Cup-Finale ist und bleibt einzigartig. Unsere Fans waren toll&#8221;, schätzt Dirksen.</p> 
```

这是在单元格中发生的事情：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T14:17:05.930

一种解决方案是拦截您的 HTML 并预先添加：

```
<html>
<head>
<style>div {max-width: 460px;}</style>
</head>
<body>
<div> 
```

并附加：

```
</div>
</body> 
```

不久前看一下这个问题/答案（[HTML Content fit in UIWebview without zooming](https://stackoverflow.com/questions/10666484/html-content-fit-in-uiwebview-without-zooming-out/10702542#10702542)）。我在那里发布了一些代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T14:13:38.903

您可以尝试将代码中`HTML`内容的高度设置为. 否则试试这个命令来设置适合页面的大小`HTML``UIWebView``UIWebView`

```
webView.scalesPageToFit = YES; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T14:24:19.197

一种解决方案可以是：

加载 URL 请求

```
NSString *urlAddress = @"your URL";
NSURLRequest *requestObj = [NSURLRequest requestWithURL:[NSURL URLWithString:urlAddress]];
[self.webView loadRequest:requestObj];  
self.webView.delegate = self; 
```

然后实现 WebViewDidFinishDownload 委托以正确设置比例因子/缩放级别

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
  CGSize contentSize = webView.scrollView.contentSize;
  CGSize viewSize = self.view.bounds.size;

  float sfactor = viewSize.width / contentSize.width;

  webView.scrollView.minimumZoomScale = sfactor;
  webView.scrollView.maximumZoomScale = sfactor;
  webView.scrollView.zoomScale = sfactor;  
} 
```

希望这可以帮助 ！！！

# go - mgo 仅最后一个 JSON 条目

> ID：15449954
> 
> 赞同：1
> 
> 时间：2013-03-16T13:39:35.183
> 
> 标签：go, mgo

我使用下面的代码在 MongoDB 中存储 JSON 条目，但只存储最后一个条目“c2”。我做错了什么？

```
package main

import (
    "encoding/json"
    "fmt"
    "labix.org/v2/mgo"
    "labix.org/v2/mgo/bson"
)

func insertEntry(j *map[string]interface{}, entry string) {
    err := json.Unmarshal([]byte(entry), &j)
    if err != nil {
        panic(err)
    }

}

func main() {
    c1 := `{
    "mw" : 42.0922,
    "ΔfH°gas" : {
      "value" : 372.38,
      "units" : "kJ/mol"
    },
    "S°gas" : {
      "value" : 216.81,
      "units" : "J/mol×K"
    },
    "index" : [
      {"name" : "mw", "value" : 42.0922},
      {"name" : "ΔfH°gas", "value" : 372.38},
      {"name" : "S°gas", "value" : 216.81}
    ]
    }`

    c2 := `{
    "name": "silicon",
    "mw": 32.1173,
    "index": [
      {
    "name": "mw",
    "value": 32.1173
      }
    ]
    }`

    m := make(map[string]interface{})

    insertEntry(&m, c1)
    insertEntry(&m, c2)
    chemical := m["ΔfH°gas"].(map[string]interface{})
    fmt.Println("value: ", chemical["value"].(float64))
    fmt.Println("units: ", chemical["units"].(string))

    session, err := mgo.Dial("localhost")

    if err != nil {
        panic(err)
    }
    defer session.Close()

    // Optional. Switch the session to a monotonic behavior.
    session.SetMode(mgo.Monotonic, true)

    c := session.DB("test").C("chemicals")
    err = c.Insert(&m)
    if err != nil {
        panic(err)
    }

    result := &m
    err = c.Find(bson.M{"name": "silicon"}).One(&m)
    if err != nil {
        panic(err)
    }

    fmt.Println(result)
    fmt.Println("mw:", m["mw"])

    fmt.Println("value: ", chemical["value"].(float64))
    fmt.Println("units: ", chemical["units"].(string))

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:29:25.740

看起来问题在于您构建地图的方式。您对 json.Unmarshall 的调用正在获取 json 中的所有“顶级”条目，并将它们设为地图中的键。在这种情况下，那些将是`mw`, `ΔfH°gas`, `S°gas`, `index`, `name`, `mw`, 和`index`。

请注意`mw`和在和`index`中重复。这意味着当您调用 时，您将覆盖and条目。如果您在每次调用后打印出地图的内容，您可以观察到这种行为。`c1``c2``insertEntry(c2)``mw``index``insertEntry`

根据您的需要，您可以采取一些措施来避免这种情况。您可以重新格式化您的 json 以避免这些冲突，您可以`c.Insert`为每个变量调用一次（每个`c`变量都有一个新的映射），这将导致为每个 json 化学定义创建不同的 mongodb 文档，而不是一个包含两者的大文档。

# c++ - 模板化函数中的参数推导失败

> ID：15449962
> 
> 赞同：0
> 
> 时间：2013-03-16T13:40:19.600
> 
> 标签：c++, templates

当我尝试编译下面的代码时收到以下错误。我期望函数模板会自动推断这些类的参数类型，但这没有发生 当我明确类型时，此代码也不会复制。

在这个过程中我没有考虑/错过什么 C++ 规则，解决方法是什么？

问候

AFG

```
error: no matching function for call to ‘wrap_call(test<ciccio>&, get_value&)

template <typename T>
struct test{    
    typedef T   value_type;
    T m_data;
};

template<typename T,typename F>
typename F::return_type wrap_call( T& obj ,F& f){
    return f.operator()(obj);
}

struct ciccio{
    int m_value;
};

struct get_value
: std::unary_function<test<ciccio>,ciccio*>
{
    ciccio* operator()(test<ciccio>& obj){
        return &obj.m_data;
    }
};

int main(){
    test<ciccio> obj;
    get_value g;
    ciccio* p = (obj,g);
    // same error if I make the types explicit
    //ciccio* p = wrap_call<test<ciccio>,get_value>(obj,g);
    return 0;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:42:27.943

问题在这里：

```
typename F::return_type 
```

应该：

```
typename F::result_type
//          ^^^^^^^^^^^ 
```

例如，请参见[此处](http://en.cppreference.com/w/cpp/utility/functional/unary_function)。

# sql - 加载文件中的值数不等于列数

> ID：15449967
> 
> 赞同：1
> 
> 时间：2013-03-16T13:40:56.753
> 
> 标签：sql, load, informix

我错误地删除了一些数据，我想找回它们

我尝试执行以下命令：

```
LOAD FROM 'C:\db\rqrequesttrans.dat' delimiter '~' insert into rqrequesttrans 
```

但我收到以下错误：

```
-- [Informix][Dynamic Server plus Universal Data Option][arch] SQL Error (-847) : Error in load file line 220.
-- [Informix][Dynamic Server plus Universal Data Option][arch] SQL Error (-846) : Number of values in load file is not equal to number of columns. 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:46:57.263

文件中的数据列数与第 220 行的表架构中的数据列数不同。确保第 220 行具有正确数量的表分隔符。

我不知道您的数据表中有多少行，但请检查以确保文件完整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-31T02:15:35.380

确保您没有前导/尾随空行。Informix 抱怨第 1 行的列数错误，并通过删除最后一个空行来修复它。旧线程，但我仍然找到它，希望这可以帮助下一个人。

# mysql - 我想重用已删除行的间隙

> ID：15449982
> 
> 赞同：-2
> 
> 时间：2013-03-16T13:42:30.330
> 
> 标签：mysql, auto-increment

我的一张表上有一个自动增量主键。如果我有 3 行，例如，删除第三行，我只剩下两行。但是，如果我插入一个新行，它的 ID 自动为 4，并且 ID 为 1、2 和 4。

如何重新使用已删除的 ID 并使新插入的记录的 ID 自动为 3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:48:28.163

真的，你不应该。主键应该是纯技术的、无意义的值。他们的价值，以及一代人的单调，根本不重要。

此外，由于它是行的 PK，因此在其他表中可能有数十（或数千）行引用此 ID（外键），因此在表中更改它是不够的：您必须更改它无处不在。

并且这个 ID 很有可能在其他应用程序中也被引用（例如，它可能是浏览器中带有书签的 URL 的一部分），并且更改它的值会使所有这些引用无效。

您永远不应该更改主键。它应该是不可变的，永远。

编辑：我误读了这个问题。您实际上想重用旧 ID。这也是一个坏主意。现有的引用会引用它们最初引用的东西。当您更改电话号码并且它被其他人重复使用时，就会发生这种情况，他们开始接到许多仍然认为这个电话号码是您的人的电话。很烦人。你想避免这种情况。

# php - 创建从 PHP 数组出现的 Javascript 数组时遇到问题

> ID：15449988
> 
> 赞同：2
> 
> 时间：2013-03-16T13:43:03.087
> 
> 标签：php, javascript, arrays

我无法创建从 php 数组出现的 javascript 数组。这就是我尝试的方式。

我的 PHP 数组名为 $samlet。

这是我的输出：

```
 Array ( [0] => Array ( [m_field_id_8] => ) [1] => Array ( [m_field_id_8] => ) [2] => Array ( [m_field_id_8] => 10102a ) [3] => Array ( [m_field_id_8] => 10180a ) [4] => Array ( [m_field_id_8] => 10210a ) [5] => Array ( [m_field_id_8] => 10212a ) [6] => Array ( [m_field_id_8] => 10242a ) [7] => Array ( [m_field_id_8] => 10248a ) [8] => Array ( [m_field_id_8] => 10258a ) 
```

我希望它转换为 javascript 数组。

但在我这样做之前，我尝试了一个模型 javascript 数组，效果很好。

```
<script>
var availableTags = [
"Test1",
"Test2",
"Test3",
"Test4",
"Test5",
]; 
```

现在我想改用我的 php 数组。这就是我尝试的方式。但这不起作用。为什么会这样？

```
 <?php 
    foreach($samlet as $category => $value) 
    {
    ?>
    var availableTags = [<?php echo $value['m_field_id_8']; ?>]
    <?php
    }
    ?>
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T13:54:23.103

您可以使用 json_encode 创建 JSON 数组

```
echo 'var availableTags = ' . json_encode(array_map(function($value) {
   return $value['m_field_id_8'];
}, $samlet)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T13:46:11.927

它应该是`foreach($samletas as $category => $value)`

和

```
var availableTags = [];
availableTags.push(<?php echo $value['m_field_id_8']; ?>); 
```

如果`$value['m_field_id_8']`是**字符串**类型引用它是这样的：

```
availableTags.push("<?php echo $value['m_field_id_8']; ?>"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T13:48:51.233

**在循环之外**声明一个数组

 **```
var availableTags = []; 
```

然后在您的迭代中：

```
availableTags.push(<?php echo $value['m_field_id_8']; ?>); 
```

并添加`as`您的`foreach`

```
foreach($samletas as $category => value); 
```**

# php - tcpdf中的AddPage不起作用

> ID：15449989
> 
> 赞同：0
> 
> 时间：2013-03-16T13:43:16.800
> 
> 标签：php, pdf, tcpdf

我有 html，当我运行该 html 时，它运行良好。但是，当我想创建那个 html 的 pdf 时，设计发生了变化，我没有得到我所拥有的设计。我也不能添加页面，我的设计有两页，我希望 pdf 分两页。这是我的示例代码：

```
require_once('eng.php');
require_once('tcpdf.php');
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);
    // set document information
$pdf->SetCreator(PDF_CREATOR);
    $pdf->SetAuthor('RoyalHome.ae');
    $pdf->SetTitle('Listing ');
    $pdf->SetSubject('PDF of Listings');
    $pdf->SetKeywords('Royalhome, PDF, listing');

    $pdf->SetFont('Helvetica', 'B', 10);

    // add a page
    $pdf->AddPage(); 
```

我的 html 在这里 [小提琴](http://jsfiddle.net/suzsu/)

```
$pdf->writeHTML($html, true, false, true, false, '');
$pdf->SetFillColor(255,255,0);
$pdf->lastPage();
$sr =  $fileName . '.pdf';
$pdf->Output($sr, 'D'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:16:56.927

刚刚测试了你的代码。遇到以下问题：

1.  您有 img 标签的相对 URL，在我的机器上，这会导致 tcpdf 在尝试获取图像时抛出错误。确保使用绝对 URL 来避免这种情况。

2.  您正在使用`D`输出目标的标志。我收到错误，因为标头已经发送。如果您在页面加载后生成并输出 pdf，或者如果抛出错误并输出到屏幕，则输出将失败。

我删除了所有`<img />`元素并将目标标志更改为，`F`并且在我的桌面上生成的 pdf 很好。

# iphone - 用于不同图像路径的 ui 段控制图像

> ID：15449991
> 
> 赞同：0
> 
> 时间：2013-03-16T13:43:35.387
> 
> 标签：iphone

我想在段控制索引路径中设置图像框架，我已经用谷歌搜索了，但没有得到具体的答案。我正在做

```
[self.segmentedControl setImage:[UIImage imageNamed:@"popularitem-activee.png"] forSegmentAtIndex:0];
    [self.segmentedControl setImage:[UIImage imageNamed:@"popularuserr.png"] forSegmentAtIndex:1]; 
```

我想这样做

```
[self.segmentedControl setImage:[UIImage imageNamed:image1 forSegmentAtIndex:0]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:51:29.903

您不能为每个段提供不同的框架，您可以为整个段控制提供框架。

# wordpress - 如何按分类法和标题分隔 Wordpress 查询结果？

> ID：15449994
> 
> 赞同：0
> 
> 时间：2013-03-16T13:43:51.867
> 
> 标签：wordpress, custom-post-type, custom-taxonomy

我有一个 wordpress 自定义帖子类型为“awards”，它有一个自定义分类法“awardyear”。我正在尝试编写一个查询，将它们全部列出，但按年份分组，并将年份放在标题中。例如，2010 年的所有奖项将组合在一起并以“2010”作为标题。这甚至可能吗？我能够将它们全部列出，但是，它目前每年都将它们全部列出。这是我当前的查询：

```
$taxonomy = 'awardyear';
$queried_term = get_query_var($taxonomy);
$terms = get_terms($taxonomy, 'slug='.$queried_term);

$args = array( 
'post_type' => 'awards',
'posts_per_page' => -1 ,
'awardyear' => $term->name,
'order_by' => 'awardyear',
'order' => 'ASC'    
 );

if ($terms) {
  foreach($terms as $term) {
    echo '<span class="award_year">' . $term->name . '</span> ';
    query_posts( $args );

// The Loop
while ( have_posts() ) : the_post();
    echo '<li style="list-style: none;">';
    echo '<a href="';
    the_permalink();
    echo '">';
    the_title();
    echo '</a>';
    echo '</li>';
endwhile;

// Reset Query
wp_reset_query();

  }
} 
```

示例输出为：

```
2010
Award Example Number 1
Award Example Number 2

2011
Award Example Number 1
Award Example Number 2
Award Example Number 3
Award Example Number 4

2012
Award Example Number 1
Award Example Number 2
Award Example Number 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:50:02.070

您的问题是在定义`$args['awardyear']`之前设置一次，`$term`因此本身将是未定义的。从定义中删除它`$args`并放在循环`$args['awardyear'] = $term->name;`的顶部。`foreach`这样，它将在每个过去都正确设置。

请注意，这种用法`query_posts()`通常是不受欢迎的；请参阅该功能的 Codex 条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T05:54:24.733

您可能需要考虑以不同的方式进行操作，因为发布元数据将是实际有效完成您想要的更好的选择。

尽管无论您是否真的想使用分类法，您都需要根据获取分类法列的查询来执行它，并且您可以从那里显示它。

参考：[http ://scribu.net/wordpress/sortable-taxonomy-columns.html](http://scribu.net/wordpress/sortable-taxonomy-columns.html)

# php - 如果博客文章中有用户图片，我如何让 PHP 显示用户图片？

> ID：15449997
> 
> 赞同：-1
> 
> 时间：2013-03-16T13:44:13.727
> 
> 标签：php

我有一个可以显示用户图片的脚本，但我现在想拥有它，所以如果您没有图片，它会显示默认图片。

**代码**

```
if (file_exists($displayuserimage)) {
    $displayuserimage =  '<img src="upic/'. $posts['userid'].'.jpg" width="50px" height="50px" border="2"  />';
} else {
    $displayuserimage =  '<img src="upic/default.jpg" width="50px" height="50px" border="2"/>'; 
} 
```

这就是我的猜测，但这是工作脚本，如果你有图像，它会显示图像：

```
$displayuserimage = '<img src="upic/'. $posts['userid'].'.jpg" width="50px" height="50px" border="2"/>'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T13:50:03.373

您正在检查一个以前未定义`if`的变量。`$displayuserimage`要检查您的图像是否存在，`if`可能看起来像

```
if (file_exists("upic/". $posts['userid'].".jpg")) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:53:17.817

使用 PHP 的 file_exists() 函数

[http://php.net/manual/en/function.file-exists.php](http://php.net/manual/en/function.file-exists.php)

```
$image="/path/on/local/server/to/image/icon.png";
$http_image="http://whatever.com/url/to/image";

if(file_exists($image))
{
  echo "<img src=\"$http_image\"/>\n";
}
else
{
  echo "<img src=\"uploads/$username/noprofile.png\"/>\n";
} 
```

如果您也从数据库调用用户图像，请使用相同的场景。更换

```
echo "<img src=\"$http_image\"/>\n"; 
```

使用数据库中包含您用户的个人资料图像的行。例子：

> 回声 $rows['user_image'];

# java - 在远程工作人员之间划分流程工作流

> ID：15449998
> 
> 赞同：0
> 
> 时间：2013-03-16T13:44:19.800
> 
> 标签：java, quartz-scheduler, spring-batch, gigaspaces

我需要开发一个 Java 平台来下载和处理来自 Twitter 的信息。基本思想是有一个集中控制器来生成任务（基本上是 id 和关键字）并将这些任务发送给远程工作人员（每台计算机一个）。我需要定期接收状态报告以了解任务和工作人员的状态。我将有至少 60 名工人（在不久的将来会增加十倍）。

我最初的想法是使用 RMI，但我需要双向沟通，而且我对 RMI 感到不舒服。另一种方法是使用 SSLSockets 发送序列化对象，但我必须控制很多错误并添加大量代码来监控任务和工作人员。有人告诉我使用[Spring Batch](http://static.springsource.org/spring-batch/)、[Gigaspaces](http://www.gigaspaces.com)或[Quartz](http://quartz-scheduler.org)之类的框架。

您认为该项目的最佳选择是什么？到目前为止，我已经阅读了很多关于 Gigaspaces 的好东西，但我没有找到关于如何实现它的好教程，而且 Quartz 似乎很有希望。你怎么看？值得使用它们中的任何一个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T20:04:53.697

根据您的问题告诉您选择一项技术并不容易。GigaSpaces 当然可以胜任这项工作，但 Spring Batch 也是如此。Quartz 只是您问题的调度部分，而不是远程处理和工作负载的分配。

GigaSpaces 是一个成熟的应用平台，可以处理并行性、高吞吐量和可扩展性是一个因素的场景。Spring Batch 肯定也可以完成这项工作，但与 GigaSpaces 不同的是，它不是一个应用程序平台。所以你仍然需要在某个地方部署你的应用程序。

然而，GigaSpaces 是一种商业产品（提供免费版本），但也有其他框架可以帮助您，例如 Storm Project ( [http://storm-project.net/](http://storm-project.net/) ) 和 Hazelcast (www.hazelcast.com)。 .

因此，如果不澄清您的用例，就很难给出一个单一的答案。这完全取决于您现在和将来想要什么以及您想如何使用它。