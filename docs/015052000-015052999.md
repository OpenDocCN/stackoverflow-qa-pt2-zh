# StackOverflow 问答 15052000-15052999

# android - KSoap 调用 .NET ASMX 服务传递空参数

> ID：15052001
> 
> 赞同：1
> 
> 时间：2013-02-24T13:05:00.337
> 
> 标签：android, ksoap2, android-ksoap2

我正在尝试使用 Android 应用程序中的 KSoap 调用 ASMX 服务。它接受两个参数，都是字符串类型。当从 .NET 应用程序调用时它成功但是当从 Android 应用程序 web 服务调用时得到空白参数，我不明白为什么..

这是相同的代码

```
 static String NAMESPACE = "http://softco.org";
            static String URL_WS = "http://www.dummy.com/newservice.asmx";

            String GET_USER_DETAILS = "User_Verification";
            SoapObject request = new SoapObject(NAMESPACE, GET_USER_DETAILS);
            HttpTransportSE androidHttpTransport;

            // add parameters and values
            request.addProperty("MobileNo", String.valueOf("01234567899"));
            request.addProperty("Password", String.valueOf("abcdef"));

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

            envelope.dotNet = true;
            envelope.encodingStyle = SoapSerializationEnvelope.XSD;
            envelope.setOutputSoapObject(request);

            // Web method call

            SoapObject result;

            try {
                androidHttpTransport = new HttpTransportSE(URL_WS);
                androidHttpTransport.setXmlVersionTag("<?xml version=\"1.0\" encoding=\"utf-8\"?>");
                androidHttpTransport.call(NAMESPACE + "/" + GET_USER_DETAILS, envelope);
                result = (SoapObject) envelope.getResponse();

                // get the response

                int propCnt = result.getPropertyCount();

                request = null;
                envelope = null;
                androidHttpTransport = null;

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (XmlPullParserException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } finally {

            } 
```

我使用 Fiddler 查看 Visual Studio 和 Eclipse 调用的区别，发现两者都为调用生成不同的 xml，不明白如何让 Ksoap 发送正确的

由 Visual Studio 调用 -

```
 <s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
    <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <User_Verification xmlns="http://softco.org/"><MobileNo xmlns="">01234567899</MobileNo><Password xmlns="">abcdef</Password></User_Verification></s:Body></s:Envelope> 
```

从 Eclipse Android 项目调用

```
 <?xml version="1.0" encoding="utf-8"?>
    <v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/"><v:Header />
    <v:Body><User_Verification xmlns="http://softco.org" id="o0" c:root="1"><MobileNo i:type="d:string">01234567899</MobileNo><Password i:type="d:string">abcdef</Password></User_Verification></v:Body></v:Envelope> 
```

任何指针都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:26:30.357

只是为了确保其他人是否陷入同样的​​境地并需要支持，这就是答案。

1.  使用 PropertyInfo 类初始化要传递的参数，例如

    ```
    PropertyInfo loginProcPI = new PropertyInfo();
    // loginProcPI.setNamespace(NAMESPACE);
    loginProcPI.setName("MobileNo");
    loginProcPI.setValue("0123456789");
    loginProcPI.setType(String.class);

    request.addProperty(loginProcPI); 
    ```

2.  以相同的顺序设置以下两个属性（可能听起来很傻，但我的问题就是这样解决的）

    ```
    envelope.setAddAdornments(false);
    envelope.implicitTypes = true; 
    ```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-24T07:07:06.080

i resolved using:

`envelope.dotNet=true;`

This is the source: [http://articlesforprogramming.blogspot.com/2013/06/consume-net-webservice-in-android-using.html](http://articlesforprogramming.blogspot.com/2013/06/consume-net-webservice-in-android-using.html)

# java - 添加动作监听器

> ID：15052006
> 
> 赞同：-1
> 
> 时间：2013-02-24T13:05:27.800
> 
> 标签：java, eclipse, swing, jcombobox, mixing

我创建了一个`JList`and `JTextField`。在我的`JList`我写了几个选择选项，我希望选择的选项名称出现在`JTextField`.

我需要在`jTextField2`动作侦听器中编写什么代码，例如，如果我选择*计算机*，它将*在*`JTextField`

**列表模型**

```
jList1Model = new DefaultComboBoxModel (new String[] { "Computer","Mouse","HDD"});

jList1 = new JList();
getContentPane().add(jList1);
jList1.setModel(jList1Model);
jList1.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
jTextField2 = new JTextField();

getContentPane().add(jTextField2);
jTextField2.setEditable(false);
jTextField2.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T13:35:32.523

您需要添加`ListSelectionListener`在列表选择中更改时会触发哪个：

```
 jList1.addListSelectionListener(new ListSelectionListener() {
        public void valueChanged(ListSelectionEvent evt) {
            jList1ValueChanged(evt);
        }
    }); 
```

并且在`ListSelectionEvent`

```
 private void jList1ValueChanged(ListSelectionEvent evt) {

    if(!jList1.getValueIsAdjusting())
    { 
    jTextField2.setText((String) jList1.getSelectedValue());
    }
  } 
```

这是一个简短的示例：

```
import javax.swing.AbstractListModel;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.WindowConstants;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

public class JListTest  {
    private JList jList1;
    private JPanel jPanel1;
    private JTextField jTextField2;
    private JFrame frame;

    public JListTest() {
        initComponents();
    }

    private void initComponents() {

        jPanel1 = new JPanel();
         jList1 = new JList();
        jTextField2 = new JTextField();
        frame =new JFrame();
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);

        jList1.setModel(new AbstractListModel() {
            String[] strings = { "Computer", "Mouse", "HDD" };
            public int getSize() { return strings.length; }
            public Object getElementAt(int i) { return strings[i]; }
        });
        jList1.addListSelectionListener(new ListSelectionListener() {
            public void valueChanged(ListSelectionEvent evt) {
                jList1ValueChanged(evt);
            }
        });

        jTextField2.setText("jTextField1");
        jPanel1.add(jList1);
        jPanel1.add(jTextField2);
        frame.add(jPanel1);
        frame.pack();
        frame.setVisible(true);

    }

  private void jList1ValueChanged(ListSelectionEvent evt) {

    if(!jList1.getValueIsAdjusting())
    { 
    jTextField2.setText((String) jList1.getSelectedValue());
    }
}

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new JListTest();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T13:31:13.137

这个怎么样：

```
 jList1t.addListSelectionListener(new ListSelectionListener() {
        public void valueChanged(ListSelectionEvent e) {
            jTextField2.setText((String) jList1.getSelectedValue());
        }
    }); 
```

（并且 jTextField2 必须是`final`！）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-24T13:16:08.103

```
 javax.swing.JComboBox cboSelect = new javax.swing.JComboBox(); 

javax.swing.JTextField tfResult = new javax.swing.JTextField();

cboSelect.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Computer", "Mouse",  "HDD" }));
        cboSelect.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                tfResult.setText(cboSelect.getSelectedItem().toString());
            }
        }); 
```

# c# - 为什么文本框溢出会显着减慢程序速度？

> ID：15052008
> 
> 赞同：1
> 
> 时间：2013-02-24T13:05:41.420
> 
> 标签：c#, winforms, textbox, garbage-collection, overflow

我制作了一个应用程序（类似于 Google 地图）并添加了一个文本框字段，其中写入了调试数据（当然我打算在之后将其删除）。有趣的事实是，在它“满”之后，假设是几千字节 - 整个程序显着减慢并且需要退出，因为无法使用它。

你能解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T13:39:40.667

嗯，它肯定超过几千字节。但是，是的，TextBox 非常不适合作为显示跟踪信息的控件。每次添加新行时，它都必须重新分配其内部缓冲区，将旧文本与新文本合并。这与 .NET 的 String 类**完全相同。**使用 StringBuilder 类作为解决方法，但 TextBox 不存在等效项。

添加大量行时使 TextBox 变得非常慢的另一个选项是 WordWrap 属性。将其设置为 True 需要它在每次绘制自己时做大量工作来计算每条线的长度。

因此，解决方法是将 WordWrap 设置为 False，并通过在长度达到限制时丢弃一半文本来防止文本数量无限增长。或者通过使用不同的控件，TextBox 无论如何都不是很合适，因为编辑跟踪数据没有意义。像列表框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T13:30:33.560

而不是一次附加一点数据，例如：

```
debugTextBox.Text += "Some new debug info" 
```

也许这个策略*可能*更快：

```
StringBuilder debugText = new StringBuilder();
...
debugText.Append("Some new debug info");
debugTextBox.Text = debugText.ToString(); 
```

（虽然`StringBuilder`这可能是矫枉过正，并且可能证明比直接使用字符串连接对 a 慢`string debugText`）

# nservicebus - NServiceBus - 订阅者输入队列与端点名称不同

> ID：15052010
> 
> 赞同：1
> 
> 时间：2013-02-24T13:05:45.150
> 
> 标签：nservicebus, publish-subscribe

我在自己的应用程序中托管 NServiceBus 以充当订阅者。我在解决方案中有 4 个项目： 1\. 合同 - 声明事件接口 2\. 主机 - 带有 API 的类库以启动总线。3\. 处理程序 - 这里实现了事件处理程序。4.控制台应用程序来运行它。

*   我看到根据我想要的控制台应用程序名称正确设置了端点名称，并相应地创建了队列。
*   我成功订阅了发布者事件。

问题：当发布者尝试向订阅者发送消息时 - 它尝试发送到根据事件处理程序命名空间而不是端点名称命名的队列。

我得到的例外是发布者找不到订阅者输入队列。

只是为了进行完整性检查，我手动创建了根据处理程序命名空间命名的输入队列，实际上我开始接收事件。

那么，这是 NServiceBus 中的错误还是我错过了一些非常重要的东西？

谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T22:55:53.883

我有一个类似的问题。我重命名了我的端点，但是在调用 Publish() 时它仍在尝试发送到旧队列。我去了 localhost:8080 (RavenDB) 并删除了所有文档和数据库，但仍然遇到同样的问题。重新启动 RavenDB 服务解决了这个问题，所以它必须将它们缓存在内存中或其他东西中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T13:36:34.307

我发现了问题，这是我的...

发布者在其 Raven DB 中仍有旧订阅者，因此它尝试将事件也发布到这些不再存在的队列中......

为了让我的生活更轻松，我将订阅配置为使用 MSMQ 存储。

# java - Tomcat 7 问题 - 无法启动服务器实例

> ID：15052014
> 
> 赞同：0
> 
> 时间：2013-02-24T13:06:54.090
> 
> 标签：java, eclipse, apache

我创建了一个新的服务器实例，并修改了 server.xml，添加了`<Context>`标签以将其指向我的应用程序。

我启动服务器，我得到了这个：

```
Server Tomcat v7.0 Server at localhost was unable to start within 45 seconds. If the server requires more time, try increasing the timeout in the server editor. 
```

如果我删除`<Context>`我添加的标签，它就会启动。

这是 server.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--><!-- Note:  A "Server" is not itself a "Container", so you may not
     define subcomponents such as "Valves" at this level.
     Documentation at /docs/config/server.html
 --><Server port="8005" shutdown="SHUTDOWN">
  <!-- Security listener. Documentation at /docs/config/listeners.html
  <Listener className="org.apache.catalina.security.SecurityListener" />
  -->
  <!--APR library loader. Documentation at /docs/apr.html -->
  <Listener SSLEngine="on" className="org.apache.catalina.core.AprLifecycleListener"/>
  <!--Initialize Jasper prior to webapps are loaded. Documentation at /docs/jasper-howto.html -->
  <Listener className="org.apache.catalina.core.JasperListener"/>
  <!-- Prevent memory leaks due to use of particular java/javax APIs-->
  <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener"/>
  <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener"/>
  <Listener className="org.apache.catalina.core.ThreadLocalLeakPreventionListener"/>

  <!-- Global JNDI resources
       Documentation at /docs/jndi-resources-howto.html
  -->
  <GlobalNamingResources>
    <!-- Editable user database that can also be used by
         UserDatabaseRealm to authenticate users
    -->
    <Resource auth="Container" description="User database that can be updated and saved" factory="org.apache.catalina.users.MemoryUserDatabaseFactory" name="UserDatabase" pathname="conf/tomcat-users.xml" type="org.apache.catalina.UserDatabase"/>
  </GlobalNamingResources>

  <!-- A "Service" is a collection of one or more "Connectors" that share
       a single "Container" Note:  A "Service" is not itself a "Container",
       so you may not define subcomponents such as "Valves" at this level.
       Documentation at /docs/config/service.html
   -->
  <Service name="Catalina">

    <!--The connectors can use a shared executor, you can define one or more named thread pools-->
    <!--
    <Executor name="tomcatThreadPool" namePrefix="catalina-exec-"
        maxThreads="150" minSpareThreads="4"/>
    -->

    <!-- A "Connector" represents an endpoint by which requests are received
         and responses are returned. Documentation at :
         Java HTTP Connector: /docs/config/http.html (blocking & non-blocking)
         Java AJP  Connector: /docs/config/ajp.html
         APR (HTTP/AJP) Connector: /docs/apr.html
         Define a non-SSL HTTP/1.1 Connector on port 8080
    -->
    <Connector connectionTimeout="20000" port="8080" protocol="HTTP/1.1" redirectPort="8443"/>
    <!-- A "Connector" using the shared thread pool-->
    <!--
    <Connector executor="tomcatThreadPool"
               port="8080" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443" />
    -->
    <!-- Define a SSL HTTP/1.1 Connector on port 8443
         This connector uses the JSSE configuration, when using APR, the
         connector should be using the OpenSSL style configuration
         described in the APR documentation -->
    <!--
    <Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
               maxThreads="150" scheme="https" secure="true"
               clientAuth="false" sslProtocol="TLS" />
    -->

    <!-- Define an AJP 1.3 Connector on port 8009 -->
    <Connector port="8009" protocol="AJP/1.3" redirectPort="8443"/>

    <!-- An Engine represents the entry point (within Catalina) that processes
         every request.  The Engine implementation for Tomcat stand alone
         analyzes the HTTP headers included with the request, and passes them
         on to the appropriate Host (virtual host).
         Documentation at /docs/config/engine.html -->

    <!-- You should set jvmRoute to support load-balancing via AJP ie :
    <Engine name="Catalina" defaultHost="localhost" jvmRoute="jvm1">
    -->
    <Engine defaultHost="localhost" name="Catalina">

      <!--For clustering, please take a look at documentation at:
          /docs/cluster-howto.html  (simple how to)
          /docs/config/cluster.html (reference documentation) -->
      <!--
      <Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"/>
      -->

      <!-- Use the LockOutRealm to prevent attempts to guess user passwords
           via a brute-force attack -->
      <Realm className="org.apache.catalina.realm.LockOutRealm">
        <!-- This Realm uses the UserDatabase configured in the global JNDI
             resources under the key "UserDatabase".  Any edits
             that are performed against this UserDatabase are immediately
             available for use by the Realm.  -->
        <Realm className="org.apache.catalina.realm.UserDatabaseRealm" resourceName="UserDatabase"/>
      </Realm>

      <Host appBase="webapps" autoDeploy="true" name="localhost" unpackWARs="true">

        <!-- SingleSignOn valve, share authentication between web applications
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className="org.apache.catalina.authenticator.SingleSignOn" />
        -->

        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html
             Note: The pattern used is equivalent to using pattern="common" --> 
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs" pattern="%h %l %u %t &quot;%r&quot; %s %b" prefix="localhost_access_log." suffix=".txt"/>

        <Context docBase="C:\Users\I\workspace\j2eeapplication\target\j2eeapplication-0.0.1-SNAPSHOT" path="/jee" reloadable="true"/>

      </Host>
    </Engine>
  </Service>
</Server> 
```

这是控制台消息：

```
Feb 24, 2013 2:57:01 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jdk1.7.0\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program Files (x86)\AMD APP\bin\x86_64;C:\Program Files (x86)\AMD APP\bin\x86;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\WIDCOMM\Bluetooth Software\;C:\Program Files\WIDCOMM\Bluetooth Software\syswow64;;C:\Program Files\Dell\Dell Wireless WLAN Card;C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files\Microsoft\Web Platform Installer\;C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\;C:\Program Files (x86)\Windows Kits\8.0\Windows Performance Toolkit\;C:\Program Files\Microsoft SQL Server\110\Tools\Binn\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\;C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\;C:\apache-maven-3.0.4\bin;C:\Program Files\Java\jdk1.7.0\bin;.
Feb 24, 2013 2:57:01 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Feb 24, 2013 2:57:01 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Feb 24, 2013 2:57:01 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 911 ms
Feb 24, 2013 2:57:01 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Feb 24, 2013 2:57:01 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.35
Feb 24, 2013 2:57:02 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/jee]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/jee]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.NoClassDefFoundError: javax/faces/webapp/FacesServlet
    at com.sun.faces.config.FacesInitializer.<clinit>(FacesInitializer.java:107)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at org.apache.catalina.startup.ContextConfig.getServletContainerInitializer(ContextConfig.java:1659)
    at org.apache.catalina.startup.ContextConfig.processServletContainerInitializers(ContextConfig.java:1569)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1277)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5179)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: java.lang.ClassNotFoundException: javax.faces.webapp.FacesServlet
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    ... 19 more

Feb 24, 2013 2:57:02 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more

Feb 24, 2013 2:57:02 PM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more

Feb 24, 2013 2:57:02 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 730 ms 
```

几个细节：

1.  服务器运行环境JRE设置为jdk1.7.0
2.  我正在使用 Eclipse Juno

我错过了什么？

编辑：

lib 文件夹由 maven 管理。这是 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.example.j2eeapp</groupId>
  <artifactId>j2eeapplication</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>war</packaging>
  <name>J2EE Application Example</name>

  <repositories>
    <repository>
           <id>prime-repo</id>
           <name>PrimeFaces Maven Repository</name>
           <url>http://repository.primefaces.org</url>
    </repository>
  </repositories>

  <dependencies>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.1.9.Final</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.3.1.Final</version>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.2</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.springframework.webflow</groupId>
        <artifactId>spring-webflow</artifactId>
        <version>2.3.0.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.webflow</groupId>
        <artifactId>spring-faces</artifactId>
        <version>2.3.0.RELEASE</version>
    </dependency> 

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency> 

    <dependency>
        <groupId>com.oracle</groupId>
        <artifactId>ojdbc14</artifactId>
        <version>10.2.0.1.0</version>
    </dependency> 

    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency> 

    <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-impl</artifactId>
        <version>2.1.10</version>
    </dependency> 

    <dependency>
        <groupId>com.sun.facelets</groupId>
        <artifactId>jsf-facelets</artifactId>
        <version>1.1.14</version>
    </dependency> 

    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>20030825.184428</version>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.6.4</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>javax.servlet-api</artifactId>
        <version>3.0.1</version>
        <scope>provided</scope>
     </dependency>
     <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>3.0.5.RELEASE</version>
      </dependency>
      <dependency>
           <groupId>xml-apis</groupId>
           <artifactId>xml-apis</artifactId>
           <version>1.3.02</version>
      </dependency>
      <dependency>
           <groupId>org.springframework.security</groupId>
           <artifactId>spring-security-web</artifactId>
           <version>3.1.0.RELEASE</version>
      </dependency>
      <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>3.1.0.RELEASE</version>
      </dependency>
      <dependency>
          <groupId>org.primefaces</groupId>
          <artifactId>primefaces</artifactId>
          <version>3.4</version>
      </dependency>
      <dependency>
          <groupId>cglib</groupId>
          <artifactId>cglib</artifactId>
          <version>2.2.2</version>
          <scope>runtime</scope>
      </dependency>
      <dependency>
          <groupId>org.hibernate</groupId>
          <artifactId>hibernate-entitymanager</artifactId>
          <version>4.1.8.Final</version>
      </dependency>

  </dependencies>
</project> 
```

这是 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         version="2.5">

    <display-name>J2EE Application Example</display-name>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

</web-app> 
```

我必须向 pom.xml 添加什么才能使其工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T13:17:09.533

引起：java.lang.NoClassDefFoundError: **javax/faces/webapp/FacesServlet**

您缺少 face servlet 的 jar 文件，请确保它们位于您的 tomcat lib 文件夹中或至少是 java 路径的一部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T13:38:31.617

You have to add the **javax.faces** dependency to your **pom.xml** for Maven to register FacesServlet.

```
<dependency>
   <groupId>javax.faces</groupId>
   <artifactId>javax.faces-api</artifactId>
   <version>2.1</version>
</dependency> 
```

# javascript - 代码转换器 vb6 到 javascript

> ID：15052017
> 
> 赞同：-1
> 
> 时间：2013-02-24T13:07:03.603
> 
> 标签：javascript, excel, vb6, newline, converter

任何机构都可以帮助将此代码从 VB6 转换为 JavaScript

```
Sub Insert()
Dim j As Long, r As Range
j = InputBox("Enter the number of sizes -1")
Set r = Range("A2")
Do
Range(r.Offset(1, 0), r.Offset(j, 0)).EntireRow.Insert
Set r = Cells(r.Row + j + 1, 1)
If r.Offset(1, 0) = "" Then Exit Do
Loop

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:22:29.793

我不知道*VB*`Range`中的or`Cell`类，但是如果您在 JavaScript 中重新实现它们的行为，您的代码可以转换为以下

 *```
function VBRange(/* args */) {
    // re-implementation
}
function VBCells(/* args */) {
    // re-implementation
}
function Insert() {
    var j, r;
    j = parseInt(prompt(Enter the number of sizes -1), 10);
    r = VBRange("A2");
    do {
        VBRange(r.Offset(1, 0), r.Offset(j, 0)).EntireRow().Insert();
        r = VBCells(r.Row + j + 1, 1);
        if (r.Offset(1, 0) === "") {
            break;
        }
    } while (1);
} 
```*

# matlab - 向量比较和新赋值

> ID：15052018
> 
> 赞同：1
> 
> 时间：2013-02-24T13:07:04.767
> 
> 标签：matlab, classification, labels

我想问你关于我写的一些matlab代码的问题，但首先告诉你我的问题。我有 2 个向量，测试标签和预测标签，出于分类原因，我想比较它们。此外，我想分配一些新的标签。所以我有这样的 111121111 = 1 或 1122222222 =2 我想要实现的东西。我的代码是

```
y = [];
for k = 10:length(predictedLabel)-10
    y = [y; newlabel(predictedLabel, k, 5)];
end 
```

并且函数 newlabel 是

```
function [nl] = newlabel(x, n, L)
   numClasses = 3;
   x1 = x(n-L:n+L);
   c = zeros(numClasses, 1);
   for k=1:length(x1)
     c(x1(k)) = c(x1(k))+1;
   end
  [~,nl]=max(c);
end 
```

我现在的问题是我遵循向量长度

```
 predictedLabel = 4996*1;
 k=4986*1;
 y=4977*1; 
```

我看不到我的错误

任何帮助都会受到赞赏，即使是概率估计的新想法

谢谢

环形

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:17:51.120

1-在标量值上使用长度函数时，它给出 1，然后 for 循环内的值从 10:1-10 变为无意义。（如果您想使用递减步长，您应该提供类似 10:-1:1 的内容）。

2-如果你想制作一个大小为 4996x1 的向量，它会是这样的： zeros(4996,1) or one(4996,1) or sth like this。

3-告诉我们你想要的结果和你的错误....描述对我来说并不明显。

# android - 如何将文本从一个活动发送到另一个活动？

> ID：15052019
> 
> 赞同：2
> 
> 时间：2013-02-24T13:07:13.557
> 
> 标签：android, eclipse

计算的.java：（这必须命令显示计算的.xml布局）

```
public class Calculated extends Activity {

   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.calculated);

   }
} 
```

老：

主类：

```
 package com.barth.appie;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.EditText;

public class MainActivity extends Activity {

Button button1;
String text;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    addListenerOnButton();
}

public void addListenerOnButton() {

    button1 = (Button) findViewById(R.id.buttoncalculate);
    button1.setOnClickListener(new View.OnClickListener() {

    public void onClick(View view) {

        EditText editText = (EditText)findViewById(R.id.editText1);
        String text = editText.getText().toString();

             Intent myIntent = new Intent(view.getContext(),    Calculated.class);
             startActivityForResult(myIntent, 0);

        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

计算的.xml：（这是按下按钮后必须显示的内容）

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="42dp"
    android:text="@string/text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

此外，我有`<string name="text">Value</string>`strings.xml，在另一个名为calculated.class的类中，我有它，以便它输出计算的.xml（工作正常）

**我想要什么：我想在计算的.xml 中显示文本，这是一个在 main.class 中制作的字符串，我希望该字符串是填充在名为“editText1”的文本字段中的文本**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T13:12:52.937

```
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.EditText;

public class MainActivity extends Activity {

Button button1;
String text;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    addListenerOnButton();
}

public void addListenerOnButton() {

    button1 = (Button) findViewById(R.id.buttoncalculate);
    button1.setOnClickListener(new View.OnClickListener() {

    public void onClick(View view) {

        EditText editText = (EditText)findViewById(R.id.editText1);
        String text = editText.getText().toString();

             Intent myIntent = new Intent(view.getContext(),Calculated.class);
             myIntent.putExtra("mytext",text);
             startActivity(myIntent);

        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
  }
} 
```

***计算出来的.java***

```
public class Calculated extends Activity {

TextView mTextview;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.calculated);

       mTextview = (TextView)findViewById(R.id.textView1);

       mTextview.setText(getIntent().getStringExtra("mytext"));
} 
```

**计算的.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="42dp"
    android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T13:10:15.550

> *将数据从一个活动发送到另一个活动*

MainActivity.java 是您要将数据发送到另一个活动的第一个活动。

```
Intent myIntent = new Intent(view.getContext(), Calculated.class);
myIntent.putExtra("text", text);
startActivity(myIntent); 
```

Calculated.java 是第二个活动，它接收您从 MainActivity.java 传递的任何意图数据

```
String text = myIntent.getStringExtra("text");
TextView textView = (TextView)findViewById(R.id.textView1);
textView.setText(text); 
```

# asp.net - 跨域 SignalR 在 IE<=9 中不起作用

> ID：15052024
> 
> 赞同：1
> 
> 时间：2013-02-24T13:07:45.720
> 
> 标签：asp.net, cross-domain, signalr

我正在使用 SignalR-1.0.0-rc2。我正在使用跨域 SignalR，因为移动设备上的某些浏览器仍然只允许每个域有两个连接。所以我有一个 SignalR 域和一个网络域。服务器端，它们都是一样的。

我的实现适用于 Opera、Firefox、Chrome、Safari 和 IE10。它不适用于 IE9、IE8 和 IE7。

```
jQuery.support.cors = true;
var connection = $.connection.globalHub;
$.connection.hub.url = SignalRDomain;
$.connection.hub.logging = true;
$.connection.hub.qs = "UserID="+UserID+"&Login="+UserLogin+"&UserHash="+UserHash;

connection.client.MyLocalFunction = function () {
    // do something
}

$.connection.hub.start(); 
```

我已经打开了日志记录。IE9/8/7 控制台向我显示了两条 SignalR 跟踪消息：[13:54:37 UTC+0100] SignalR：自动检测到的跨域 URL。[13:54:37 UTC+0100] SignalR：正在与“ [http://live.mydomain.de/signalr/negotiate](http://live.mydomain.de/signalr/negotiate) ”协商。

如果我查看调试器的“网络”选项卡，我看不到任何对服务器的调用。所以看起来 SignalR 在调试消息之后就死了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T20:25:39.087

所以这就是请求失败的原因：[带有CORS的IE9 jQuery AJAX返回“访问被拒绝”](https://stackoverflow.com/questions/10232017/ie9-jquery-ajax-with-cors-returns-access-is-denied)

您可以通过删除“jQuery.support.cors = true”行来解决此问题。

对于 SignalR 1.0.0-rc2，它可以正常工作，但是对于 SignalR 1.0.0 及更高版本的所有版本，您需要在地图中心调用中启用跨域：[SignalR 跨域在 IE10 以外的浏览器上不起作用](https://stackoverflow.com/questions/15312077/signalr-cross-domain-not-working-on-browsers-other-than-ie10/15314807#15314807)

# java - 使用 windows builder 创建逻辑 GUI 组件组

> ID：15052029
> 
> 赞同：0
> 
> 时间：2013-02-24T13:08:23.050
> 
> 标签：java, eclipse, swt

我正在 WindowsBuilder eclipse java 中编写一个 GUI 应用程序并且有一些问题：

1.  我有一个检查按钮，如果它被选中，一些控件被启用。有没有一种优雅的方法可以通过一个命令来允许所有这些？我的意思是我不想一个一个地启用它们，只需一次启用它们 - 是否可以定义一个允许我这样做的逻辑组？
2.  是否有任何通用的设计模式来编写 Java GUI 应用程序？

我是 Java 新手，所以会在这些问题中提供任何指导。
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T13:57:25.383

没有内置功能可以用一个命令检查/取消选中它们。

想到的“最简单”的方法是将它们全部存储在 a 中`List`并创建一个迭代该列表并检查/取消选中所有内容的函数。

```
private List<Button> buttons = new ArrayList<Button>();

// ADD YOUR BUTTONS

private void setSelectionForButtons(boolean enabled)
{
    for(Button button : buttons)
        button.setSelection(enabled);
} 
```

然后你可以通过调用来选中/取消选中它们：

```
setSelectionForButtons(true); 
```

或者

```
setSelectionForButtons(false); 
```

* * *

至于“设计模式”：这里有一个编写 SWT 应用程序的优秀[教程](http://www.vogella.com/articles/SWT/article.html)。

# magento - Magento 的注册表没有保存我的价值

> ID：15052032
> 
> 赞同：1
> 
> 时间：2013-02-24T13:08:54.930
> 
> 标签：magento

我的扩展程序为我网站上的每个页面添加了一个块“before_body_end”，并在“checkout_onepage_controller_success_action”上设置了一个观察者，以将参数（order_id）传递给我的块，以防执行结帐。

```
 $block = Mage::app()->getLayout()->getBlock('my_block');
    if ($block) {
        $block->setOrderId($orderId);
    } 
```

这很好用，但是现在我遇到了一些“Rouge”扩展程序，它实现了整个结帐过程而无需触发“checkout_onepage_controller_success_action”，因此我的扩展程序停止工作。我试过挂钩其他事件：'checkout_submit_all_after' 或 'sales_order_place_after'（需要将配置从“前端”移动到“全局”，因为我在某处发现了文档），但无论我尝试了什么，我的块都没有定义. （我想这是一个时间问题）。所以我决定尝试在观察者的注册表上设置 order_id 并在我的块中获取它：

```
Mage::register('my_order_id', $orderId);
// Make sure it is set
Mage::log("Observer");
Mage::log(strftime('%c'));
Mage::log(Mage::registry('my_order_id')); 
```

在我的块中，我还打印：

```
Mage::log("Block");
Mage::log(strftime('%c'));
Mage::log(Mage::registry('my_order_id')); 
```

我的日志给出：

```
2013-02-24T13:01:56+00:00 DEBUG (7): Observer
2013-02-24T13:01:56+00:00 DEBUG (7): Sun Feb 24 13:01:56 2013
2013-02-24T13:01:56+00:00 DEBUG (7): 60
2013-02-24T13:01:57+00:00 DEBUG (7): Block
2013-02-24T13:01:57+00:00 DEBUG (7): Sun Feb 24 13:01:57 2013
2013-02-24T13:01:57+00:00 DEBUG (7): 
```

任何想法如何将 orderId 传递给我的块？

# delphi - 如何在 Delphi 中将 Application.ActiveFormHandle 转换为 TForm 对象？

> ID：15052033
> 
> 赞同：2
> 
> 时间：2013-02-24T13:08:54.807
> 
> 标签：delphi

我们可能会在或何时获得`THandle`主动形式。`Application.ActiveFormHandle``GetForegroundWindow``Application.Active = True`

但是如何获得活动表单对象呢？

或者如何`Application.ActiveFormHandle`在 Delphi 上转换为对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T13:19:01.350

如果您有一个窗口句柄并且想要获取该句柄所属的 VCL 控件，您可以使用[`FindControl`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Controls.FindControl). 如果您只想获得可以使用的活动表单[`Screen.ActiveForm`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Forms.TScreen.ActiveForm)。

# javascript - 使用 JavaScript 和 JSP 重定向到另一个页面

> ID：15052037
> 
> 赞同：2
> 
> 时间：2013-02-24T13:09:24.477
> 
> 标签：javascript, jsp, redirect

我试图在注册完成后立即使用 JSP 或 JavaScript 将用户重定向到我的登录页面。

我应该提到注册表正在调用同一页面，当我说时`window.location`，glassfish 会抛出错误，因为找不到资源。

```
 {
    if(request.getParameter("submit")!=null)
                   {
        String uname=request.getParameter("txtusername");
        String password=request.getParameter("txtpassword");
        String mail=request.getParameter("txtemail");
        String dob=request.getParameter("dob");
        String city=request.getParameter("txtcity");
        String state=request.getParameter("txtstate");
        String country=request.getParameter("txtcountry");
        String address=request.getParameter("txtstreetaddress");
        String scity=request.getParameter("txtscity");
        String sstate=request.getParameter("txtsstate");
        String scountry=request.getParameter("txtscountry");
        String saddress=request.getParameter("txtsaddress");
        String mobile=request.getParameter("txtno");
        String gender=request.getParameter("rdbgender");
             adminClasses.user u= new adminClasses.user(0, uname, password, mail, dob, city, state, country, address, scity, sstate, scountry, saddress, mobile, gender);
              int result=adminClasses.userfunctions.addNewUser(u);
                    %>
                    <script>
                        var res=<%=result%>;
                        if(res==0)
                            {
                               window.alert("Registration Unsuccessful");
                            }
                            else
                                {
                                    window.alert("Resgistration Successful!Click Ok to Sign in");
                                    window.location="signin.jsp";
                                }
                    </script>
                    <%                  
                                           }
                              }
       catch (Exception e)
                                     {
                    out.println(e.getMessage());
                   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:25:20.150

我认为你可以这样做：

```
...
int result = adminClasses.userfunctions.addNewUser(u);

if (result == 0) {
    request.getRequestDispatcher("signupSuccess.jsp").forward(request, response);
}
... 
```

它将`result`在服务器端评估 ，然后根据`result`，将转发到一个`signupSuccess.jsp`页面——即 URL 将保持不变，但响应将包括成功页面的评估内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T13:16:31.337

你可以试试这个

```
response.sendRedirect("signupSuccess.jsp"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:38:12.193

检查当前页面的路径，如下面的代码；因为我认为你可能写错了路径

```
 window.location="signin.jsp" 
```

```
//    Example

//    Return the entire URL (of the current page):

    <script>

    document.write(location.href);

    </script>
//    The output of the code above is:

//    http://www.w3schools.com/js/js_window_location.asp 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-23T11:39:19.770

我已经使用java完成了以下代码。

```
response.getWriter().write("<script> window.location="redirect_url"</script>"); 
```

# data-binding - Rivets.js 中的视图到模型格式化程序

> ID：15052039
> 
> 赞同：2
> 
> 时间：2013-02-24T13:09:34.500
> 
> 标签：data-binding, rivets.js

喜欢 Rivets.js 的强大功能和简单性。但是，如何定义采用视图属性并将其格式化为模型属性的格式化程序？据我了解，格式化程序旨在以相反的方式操作，即：从模型到视图。

是否以某种方式支持 View to Model 格式化程序，或者这是否必须被破解？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T08:04:06.250

这是 Rivets.js **0.4.2**中引入的功能。非常感谢 GitHub 上的 GMFlash 和 mdekmezian 实现它。

基本上，您只需将双向格式化程序定义为一个对象而不是单个函数。当格式化程序被定义为单个函数时，Rivets 假定它仅在读取方向上。当格式化程序被定义为一个对象时，Rivets 使用它`read`和`publish`函数来有效地序列化和反序列化一个值。

```
rivets.formatters.date = {
  read: function(value) {
    return value.format("DD/MM/YYYY")
  },
  publish: function(value) {
    return moment(value, "DD/MM/YYYY")
  }
} 
```

您还可以以任何顺序将双向格式化程序与任何其他格式化程序链接。它们从左到右读取，从右到左发布（在将值发布回模型时跳过任何只读格式化程序）。

对缺少文档表示歉意。主页根本没有反映 Rivets.js 的当前功能集，需要更新以包含诸如此类的附加功能。

# c++ - QWidget - 不知道从哪里开始

> ID：15052040
> 
> 赞同：0
> 
> 时间：2013-02-24T13:09:35.370
> 
> 标签：c++, qt, qwidget

我正在用 C++ 在 QT 中做一个大学项目。我基本上都完成了，但我有点想结束繁荣！在游戏结束时，您到达最后一个房间并按下控制面板并出现一个键盘（这是一个作为 QWidget 创建的 .ui 布局） - 访问代码是较早房间中随机生成的 4 位数字。

无论如何，我想用键盘弹出 QWidget，让用户按下 4 个按钮——每个按钮都会返回一个 QString——然后按下确认按钮。如果匹配，则游戏结束。如果没有，就回房间。

我只是不知道如何调用小部件！API 并没有真正的帮助，因为我看不到将 .ui 表单分配给 QWidget 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:51:46.020

该`.ui`文件是一个资源文件。如果您的设置没有自动为您执行此操作，那么您必须使用该[`uic`工具](http://qt-project.org/doc/qt-4.8/uic.html)将`.ui`文件转换为 c++ 源代码。

```
 foo.ui -> ui_foo.h 
```

此标头包含一个创建小部件的类，并具有成员在创建后访问每个成员。

```
class Ui_Foo {
   setupUi(QWidget *) { ...
   }
}

namespace Ui {
    class Foo: public Ui_Foo {};
} // namespace Ui 
```

的一个实例`Ui::Foo`被放置在您的`FooWidget`

```
// FooWidget.h
//
class FooWidget 
: public QWidget {
    FooWidget(QWidget *);
    Ui::Foo  mUi;
} 
```

它`setupUi`在你的构造函数中被调用`FooWidget`

```
// FooWidget.cpp
// 
FooWidget::FooWidget(QWidget *parent)
: QWidget(parent)
{
    mUi.setupUi(this);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T13:11:57.423

.ui 表单*是*一个小部件。只需调用 show() 就可以了。

# c++ - 使用 RainbowParentheses 进行 Vim 折叠

> ID：15052044
> 
> 赞同：5
> 
> 时间：2013-02-24T13:10:17.317
> 
> 标签：c++, vim

所以，我到处寻找一个好的彩虹括号插件，它将为不同级别的括号提供不同的颜色。我真的很喜欢[我找到的这对夫妇](https://github.com/kien/rainbow_parentheses.vim)，因为他们都在可定制性方面做得很好，同时[突出了正确的东西](https://github.com/vim-scripts/Rainbow-Parentheses-Improved-and2)。它支持的不仅仅是括号；人字形、大括号和方括号都被突出显示，我真的很喜欢。

似乎有[很多插件可以做到这一点！](https://github.com/oblitum/rainbow); 我目前正在使用 oblitum，因为他针对深色背景进行了优化（我经常直接从 shell 工作）。

因此，按照该插件在 github 上的提示，我的`.vimrc`. 但是，当 always on 块高于“语法启用”时，它不会显示`{}`为 cpp 文件突出显示。当 always on 块低于`syntax enable`时，折叠不起作用。我认为是插件的性质使它做到了这一点；它通过文件并添加着色信息。我注意到，如果我`:syntax enable`在加载文件后使用该命令，但它不能识别折叠，那么它*确实可以*识别折叠。但在这一点上，它消除了彩虹括号放在它上面的颜色。

在我的`.vimrc`中，我有以下相关行：

```
syntax enable
set foldmethod=syntax
set foldenable
set foldlevel=100

let g:rainbow_operators=2
au FileType c,cpp,objc,objcpp call rainbow#activate() 
```

我认为，通过查看 vim 附带的语法文件，例如 c.vim，您可以看到某些块被注释为折叠。我敢打赌，如果您可以根据它编写一个正则表达式，您就可以将字符识别为句法组。然后你可以为它定义一个配色方案。其实[rainbow插件](https://github.com/oblitum/rainbow)其实是在调用“syn region”命令，所以我觉得这个路由很可行，只是我对vim脚本不太懂。

任何人都可以帮助我修改插件或提出一个脚本或实现两者的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T22:30:53.647

抱歉迟到了，我已经尝试在[修复禁用折叠（问题 #2）中解决它](https://github.com/oblitum/rainbow/commit/088a1fa5c0995fa77eb8f848b104833cc66c1165)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T13:13:29.517

我依稀记得有过相同或类似的问题。
XML 代码突出显示也被破坏了 IIRC。

我关闭了“始终打开”，仅在需要时才激活彩色括号。
所以我的工作解决方案只是打开和关闭插件的快捷方式。

# mysql - Mysql将记录设置为已删除或存档

> ID：15052049
> 
> 赞同：2
> 
> 时间：2013-02-24T13:11:12.603
> 
> 标签：mysql, record

有什么办法可以省略mysql select语句中的一些记录而不是删除它们？例如，我们可以轻松地添加一列`deleted`并将已删除的列设置为 1 并保留它们，但问题是我们必须放入`where deleted = 1`所有查询。将一些记录保存为档案的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T13:30:15.760

我不知道您有多少表以及要存储多少数据，但一个解决方案可能是这个：

*   您为要保留虚拟删除数据的每个表 (tblName) 创建一个 tblName_HIST 表
*   ***可选***：添加 DELETED_DATE 列以跟踪记录被删除的日期。
*   您在 tblName 表上添加一个触发器，即***AFTER DELETE***语句***INSERT*** tblName_HIST 表中的记录。

这将允许您保留从现在开始创建的查询和数据库表，而无需对其进行太多修改。

# java - 使用 GAE Blobstore API 删除 n' 交换文本块

> ID：15052051
> 
> 赞同：1
> 
> 时间：2013-02-24T13:11:56.183
> 
> 标签：java, google-app-engine, pdf, file-io, blobstore

我正在设计一个允许用户上传 PDF 文件的 GAE 应用程序，我将把它保存到 GAE Blobstore。

我需要能够在这些 blobstored 文件中“删除 n'交换”文本块。也就是说，我需要能够从文件（存储在 Blobstore 中）中挑选出特定的句子，并将其替换为不同的文本。

假设我有一个 PDF 文件，并且我知道从文件中的第 505 个字节/字符开始，有一句话：

> 树林很可爱，又黑又深。

我想用以下内容替换（drop n' swap）那句话：

> 但我有要遵守的承诺。

然后我知道我想用我的新字符串替换字节 505 到 541（*树林很可爱，黑暗而深沉。 ）。*

所以我问：**这可能吗？**我看到 Blobstore API 允许您从存储的 blob 中读取特定的字符段：

```
// Now contains: "The woods are lovely, dark and deep."
String toDropNSwap = blobStoreService.fetchData(blobKey, 505, 541);

toDropNSwap = "But I have promises to keep.";

// This doesn't exist, just an example:
blobstoreService.dropAndSwap(505, 541, toDropNSwap); 
```

但我不明白如何用另一段字节替换一段字节，特别是如果新段的大小不同。还有一件事：我将处理最大 20MB 的文件。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T13:19:45.357

Blob 是[不可变](https://developers.google.com/appengine/docs/java/blobstore/overview#Introducing_the_Blobstore)的：

> Blob 在创建后无法修改，但可以删除。每个 blob 都有一个相应的 blob 信息记录，存储在数据存储中，提供有关 blob 的详细信息，例如其创建时间和内容类型。您可以使用 blob 键来获取 blob 信息记录并查询它们的属性。

所以你正在寻找的东西是不可能的。您将不得不删除并创建一个新的 blob。

# ruby - 如何制作 Gosu Ruby 基本形状

> ID：15052056
> 
> 赞同：1
> 
> 时间：2013-02-24T13:12:07.980
> 
> 标签：ruby, libgosu

我正在尝试在 gosu（红宝石）中制作一些简单的形状。我发现很难在哪里调用这些函数。是更新方法还是绘制方法。

```
 require 'rubygems'
   require 'gosu'

     class DemoWindow < Gosu::Window
        def initialize
          super(640, 400, false)
        end

        def draw
           draw_quad(x-size, y-size, 0xffffffff, x+size, y-size, 0xffffffff, x-size, y+size, 0xffffffff, x+size, y+size, 0xffffffff, 0)
           draw_triangle(x1, y1, c1, x2, y2, c2, x3, y3, c3, z=0, mode=:default)
           draw_line(x1, y1, c1, x2, y2, c2, z=0, mode=:default)

     end
   end 
```

请看一下，让我知道这是否是创建形状的正确方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T04:31:12.840

从我所看到的你所拥有的应该工作。

关于 Gosu，我注意到的一件事是，当它第一次启动时，它会先调用 draw 方法，然后再调用 update 函数。这意味着如果你有（不包括你正在使用的形状函数）任何你要绘制到屏幕上的图像，你只在更新方法中定义了坐标，程序将无法工作。您必须首先在 draw 方法中使用一些初步位置来定义它们的 x 和 y 值。

这可能对你没有帮助，但我想我会在可能的情况下贡献它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-01T01:08:00.693

从我注意到你没有更新方法因此它没有呈现

```
 class DemoWindow < Gosu::Window
    def initialize
      super(640, 400, false)
    end

    def update
    end

    def draw
       draw_quad(x-size, y-size, 0xffffffff, x+size, y-size, 0xffffffff, x-size, y+size, 0xffffffff, x+size, y+size, 0xffffffff, 0)
       draw_triangle(x1, y1, c1, x2, y2, c2, x3, y3, c3, z=0, mode=:default)
       draw_line(x1, y1, c1, x2, y2, c2, z=0, mode=:default)

 end 
```

# html - Firefox中按钮中的图像未对齐

> ID：15052057
> 
> 赞同：2
> 
> 时间：2013-02-24T13:12:22.280
> 
> 标签：html, css, image, firefox, button

我正在尝试将一些 div 转换为按钮。它们在 ie 和 chrome 上运行良好，但在 firefox 上运行良好，即使我将图像和 div 设置为相同大小，图像仍然比 div 大。图像也不会像在其他浏览器中那样触摸 div 的左边框。我尝试设置浏览器特定的 css 规则，但它似乎没有任何影响。有谁知道我该如何解决这个问题？顺便说一句，我现在只将第一个 div 转换为一个按钮。

听到我遇到问题的页面（按钮位于页面底部附近，标题为“恐惧/恐惧症”）： [http ://www.swanleyhypnotherapy.co.uk/](http://www.swanleyhypnotherapist.co.uk/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:21:52.987

```
button.graphic {
    padding: 0,
    margin: 0,
    boder: 0
} 
```

首先，您真的需要发布`code`...

# arrays - 从 JSP 页面中的 Java Bean 检索值数组

> ID：15052058
> 
> 赞同：0
> 
> 时间：2013-02-24T13:12:35.410
> 
> 标签：arrays, jsp, model-view-controller, javabeans

无法从 JSP 页面中的 Bean 调用 getNames()...成功设置名称，但是当我调用 getNames 时它返回 Null

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
  throws ServletException, IOException {
  response.setContentType("text/html;charset=UTF-8");
  PrintWriter out = response.getWriter();

  try {
    List<String> name=new ArrayList<String>();
    name.add("Pushkar");
    name.add("Raj");
    ArrayBean bean=new ArrayBean();
    bean.setNames(name.toArray(new String[name.size()]));       

    // request.getRequestDispatcher("DDL.jsp").forward(request, response);
    response.sendRedirect("DDL.jsp");

  } finally {            
    out.close();
  }

public class ArrayBean {
  public String[] names;

  public String[] getNames() {
    return names;
  }

  public void setNames(String[] names) {
    this.names = names;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:54:14.673

将您的尝试捕获更改为

```
try {
name=new ArrayList<String>();
name.add("Pushkar");
name.add("Raj");
ArrayBean bean=new ArrayBean();
bean.names=new String[name.size()];
        bean.names=name.toArray(bean.names);      

// request.getRequestDispatcher("DDL.jsp").forward(request, response);
response.sendRedirect("DDL.jsp");} finally {            
out.close();  } 
```

希望它会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T06:48:50.363

这东西有效，我在 Bean 中添加了一个 LoadData() 方法来设置值，然后我从 JSP 调用 getNames()，它工作正常，从 Servlet 中删除了所有代码，现在甚至不需要 Servlet

```
public class ArrayBean {
public List<String> names;

public List<String> getNames() {
    if(names==null){loadNames();
    }return names;
}   

private void loadNames()
{
     names=new ArrayList<String>();
        names.add("Pushkar");
        names.add("Raj");        

} 
```

}

# javascript - 动态创建字段时，jQuery 日期选择器和时间选择器不起作用

> ID：15052059
> 
> 赞同：0
> 
> 时间：2013-02-24T13:12:35.000
> 
> 标签：javascript, jquery, html

我正在使用下面的 jQuery 代码生成动态输入字段（多个），它包括时间选择器和日期选择器，但它们不起作用。

```
$('#add_another_event').click(function() 
    {
        var $address = $('#sub_events');
        var num = $('.clonedAddress').length; // there are 5 children inside each address so the prevCloned address * 5 + original
        var newNum = new Number(num + 1);
        var newElem = $address.clone().attr('id', 'address' + newNum).addClass('clonedAddress');

        //set all div id's and the input id's
        newElem.children('div').each (function (i) {
            this.id = 'input' + (newNum*5 + i);
        });

        newElem.find('input').each (function () {
            this.id = this.id + newNum;
            this.name = this.name + newNum;
        });

        if (num > 0) {
            $('.clonedAddress:last').after(newElem);
        } else {
            $address.after(newElem);
        }

        $('#btnDel').removeAttr('disabled');              

    }); 
```

这些是我克隆的字段

```
<p><label>Art Space </label>
<input id="as_name" name="as_name" class="txt-input small" type="text">
<input id="as_id" name="as_id" class="txt-input small" type="hidden"></p>
<p><label>Start Date </label>
<input id="start_date" name="start_date" class="datepicker txt-input small" type="text"></p>
<p><label>End Date </label>
<input id="end_date" name="end_date" class="datepicker txt-input small" type="text"></p>
<p><label>Opening Hours </label>
From : <input style="width: 100px" id="time_from" name="time_from" class="timepicker txt-input small" type="text">
To : <input style="width: 100px" id="time_to" name="time_to" class="timepicker txt-input small" type="text">
</p> 
```

时间选择器和日期选择器

```
 $('.timepicker').timepicker({
        hourGrid: 4,
        minuteGrid: 10,
        timeFormat: 'hh:mm tt'
    });

    $('.datepicker').datepicker(); 
```

我的问题是在克隆字段时未显示选择器。

我尝试使用 jQuery `.live()`，但它不起作用。我不是 jQuery 专家。

这是一个例子[http://jsfiddle.net/MkhZ2/17/](http://jsfiddle.net/MkhZ2/17/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T13:22:43.597

您需要重新初始化新元素上的日期/时间选择器并清除 UI 小部件添加的类：

```
$('.datepicker', newElem).removeClass('hasDatepicker').datepicker() 
```

在这种情况下，提供您的新集合作为上下文，这样您就不会搜索整个文档。

* * *

这显示了克隆与模板化的陷阱之一。如果您使用模板生成新表单，则不会冒复制数据和类的风险，这可能会影响小部件在新表单中的构建方式。在您的情况下，您需要删除`hasDatepicker`UI 应用的类并防止新的日期选择器在输入上被初始化。但是，您也不能使用清理方法`datepicker('destroy')`，因为新节点上实际上没有日期选择器。所以你最终不得不手动进行清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T13:21:40.463

您必须调用

```
$('target_selector').datepicker(); 
```

对于每个动态添加的元素。

# iphone - 测试 iPhone 和 Simulator iOS 的区别

> ID：15052066
> 
> 赞同：-1
> 
> 时间：2013-02-24T13:13:05.753
> 
> 标签：iphone, ios, cocoa, ios-simulator

我有一些问题

我正在编写一个在模拟器中测试的应用程序。一切都好

测试决定在 iPhone 上。我去哪里检查电话，但实际上不是

```
- (BOOL) myChecker
{
/// ....

if .....
{
return YES
} else {
return NO
}

......
- (void) something {

BOOL myVar = [self myChecker];
if (myVar) {
// .....
} else {
//.....
}
} 
```

在模拟器中一切正常 myVar = NO; 和 iPhone 得到 myVar = YES;

如何理解？

**更新（已解决）**

```
 - (BOOL) myChecker
    {
      BOOL CheckSomething;

    /// ....
      if ....something {
         CheckerSomething = YES
        } else {
 if .....
{
}
}

    if (CheckerSomething)
    {
    return YES
    } else {
    return NO
    } 
```

在 xcode 模拟器 CheckerSomething 是 begin = NO; 但在 iPhone **CheckerSomething = YES**在内存中加载变量时

那是错误

强行置NO是决定问题

对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:28:47.840

最好的猜测是有一些变量没有被初始化并且得到一个不同的初始值。ARC 对此有所帮助，因为它默认将方法变量（自动）初始化为 nil (0)。

对您的代码运行分析并修复任何警告。

跟踪 Xcode 调试器中的代码（它在 iPhone 设备上的模拟器中都可用）以逐条查看正在发生的事情。设置一些断点，例如在`myChecker`和`something`方法的顶部。

# javascript - highcharts：第三个 Y 轴在错误的一侧

> ID：15052067
> 
> 赞同：0
> 
> 时间：2013-02-24T13:13:09.507
> 
> 标签：javascript, highcharts

我正在尝试用单独的比例绘制 3 个 Y 轴。

问题是比例尺的气压“文本”在图的“对面”（应该在哪里），而不是“数字”比例尺。

这是小提琴：[链接](http://jsfiddle.net/n3JDQ/)

代码：

```
$(function () {
$(document).ready(function() {
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'spline',
            margin: [50,150,90,60],
            width: 700,
            height: 300
        },
        title: {
            text: 'Weather Today'
        },
        credits: {
            enabled: false
        },
        subtitle: {
            text: 'Åsen, Norway'
        },
        xAxis: {
            type: 'datetime',
            dateTimeLabelFormats: {
                day: '%H:%M'
            },
            tickInterval: 3600 * 1000,
            labels: {
                rotation: -45,
                align: 'right',
                style: {
                    fontSize: '10px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        },
        yAxis: [{
            title: {
                text: 'Temperature C'
            }
            }, {
            title: {
                text: '%'
            },
            opposite: true
            }, {
            title: {
                text: null
            }
            }, {
            title: {
                text: null
            }
            }, {
            title: {
                text: 'hPa'
            },
            opposite: true
        }],
        tooltip: {
            formatter: function() {
                    if(this.series.name === 'Temperature')
                    {
                        return ''+ Highcharts.dateFormat('%H:%M',this.x) +': '+ this.y + ' C';
                    }
                    if(this.series.name === 'Humidity')
                    {
                        return ''+ Highcharts.dateFormat('%H:%M',this.x) +': '+ this.y + ' %';
                    }
                    if(this.series.name === 'Dewpoint')
                    {
                        return ''+ Highcharts.dateFormat('%H:%M',this.x) +': '+ this.y + ' C';
                    }
                    if(this.series.name === 'Wind chill')
                    {
                        return ''+ Highcharts.dateFormat('%H:%M',this.x) +': '+ this.y + ' C';
                    }
                    if(this.series.name === 'Air pressure')
                    {
                        return ''+ Highcharts.dateFormat('%H:%M',this.x) +': '+ this.y + ' hPa';
                    }
            }
        }, 
        plotOptions: {
            spline: {
                lineWidth: 3,
                states: {
                    hover: {
                        lineWidth: 3
                    }
                },
                marker: {
                    enabled: false,
                    states: {
                        hover: {
                            enabled: true,
                            symbol: 'circle',
                            radius: 3,
                            lineWidth: 1
                        }
                    }
                }
            },
            line: {
                marker: {
                    enabled: false,
                    states: {
                        hover: {
                            enabled: true,
                            symbol: 'circle',
                            radius: 4,
                            lineWidth: 1
                        }
                    }
                }
            }
        }, 
        series: [{
                name: 'Temperature',
                data: temp,
                type: 'spline',
                shadow: true,
                showInLegend: true, 
                pointInterval: 60 * 1000, 
                dashStyle: 'solid'
                } , {
                name: 'Humidity',
                data: hum,
                yAxis: 1,
                shadow: false,
                showInLegend: true,
                pointInterval: 60 * 1000,
                type: 'line',
                dashStyle: 'shortdot'
                }, {
                name: 'Dewpoint',
                data: dew,
                shadow: false,
                showInLegend: true,
                pointInterval: 60 * 1000,
                type: 'line',
                dashStyle: 'shortdot'
                }, {
                name: 'Wind chill',
                data: windchill,
                shadow: false,
                showInLegend: true,
                pointInterval: 60 * 1000,
                type: 'line',
                dashStyle: 'shortdot'
                }, {
                name: 'Air pressure',
                data: baro,
                yAxis: 2,
                shadow: false,
                showInLegend: true,
                pointInterval: 60 * 1000,
                type: 'spline',
                dashStyle: 'shortdot'
        }],
        navigation: {
            menuItemStyle: {
                fontSize: '6px'
            }
        } 
    });
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:41:59.690

yAxis：气压系列上的4个固定它。
还添加了linkedTo：0，连接到温度的其他系列。

# ruby-on-rails - Gem 列表包含对某个 gem 的多个依赖项

> ID：15052072
> 
> 赞同：0
> 
> 时间：2013-02-24T13:13:37.010
> 
> 标签：ruby-on-rails, bundler

我有`unicorn 4.5.0`并且在我这样做之后`bundle update`，即使我想使用最新版本，我也会观察到同一个 gem 的不同版本。

```
unicorn (4.6.1, 4.5.0) 
```

如何指示捆绑程序仅保留最新版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T13:16:39.433

您可以通过将一个版本放入 gem 文件中来指示 bundler 只使用一个版本。有时，我会与 rake 发生冲突，即使我的 Gemfile 中没有明确包含 rake，所以我不得不将所有其他 gem 可以使用的 rake 版本放在我的 Gemfile 的顶部。

如果您的问题是您曾经使用 unicorn 4.5.0，而现在它已经在您的本地 gem 源中安装了 unicorn 4.6.1，您可以告诉 gem 卸载您不再需要的版本。

```
gem uninstall unicorn --version 4.5.0 
```

如果你做了一个 bundle --deployment 并填充了 vendor/bundle 目录，那是你要从中删除 gem 的地方，那么我通常只是删除 gem 目录，但是，我认为你可以使用 --path 运行 bundle，如下所示：

```
bundle --deployment --path vendor/bundle
gem uninstall unicorn --version 4.5.0 
```

当你运行 bundler 时，它会记住设置。关于 --without 开关，我痛苦地发现了这一点。--path 设置将告诉 gem 使用本地供应商/捆绑目录作为本地 gem 源。请记住通过再次运行 bundle 来设置路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T13:20:00.673

据我所知，您不能指示捆绑程序在更新时仅保留最新版本。您*可以*一次性删除所有 gem 的所有旧版本：

```
bundle exec gem cleanup 
```

[（参考）](http://docs.rubygems.org/read/chapter/10#page77)

# c# - 从 C# 创建新数据库并从其中的网格视图中复制数据

> ID：15052073
> 
> 赞同：0
> 
> 时间：2013-02-24T13:13:43.090
> 
> 标签：c#, mysql, winforms, datagridview

我有一个数据网格视图，处理后数据存储在其中，我想在数据库中*创建*一个新表并将数据从网格视图*复制*到该表。

```
 command.CommandText = "CREATE TABLE MyTable (" +
            "[Count] INT NOT NULL AUTO_INCREMENT PRIMARY KEY ," +
            "[TimeAndDate] TIMESTAMP NOT NULL ," +
            "[SerialNumber] VARCHAR( 14 ) NOT NULL ," +
            "[Result] BOOL NOT NULL ," +
            "UNIQUE ([TimeAndDate]))"; 
```

command.ExecuteNonQuery(); 这是用于创建表格，但如何从网格视图复制内容，我不知道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:35:19.953

创建表后，您只需遍历 datagridview 行并执行插入语句

# java - 通过java应用程序连接在mongolab中创建的mongodb

> ID：15052074
> 
> 赞同：10
> 
> 时间：2013-02-24T13:13:46.033
> 
> 标签：java, mongodb, mlab

我在 mongolab 中创建了一个 mongodb 实例，它为我提供了一个连接 URI。

```
 mongodb://<dbuser>:<dbpassword>@ds041177.mongolab.com:41177/myclouddb 
```

我使用以下 java 代码连接到我的数据库-

```
 Mongo m = new Mongo();
     com.mongodb.DBAddress dba=new DBAddress("mongodb://admin:password@ds041177.mongolab.com:41177/myclouddb");
        m.connect(dba); 
```

但这会引发 NumberFormatException

```
 java.lang.NumberFormatException: For input string: "" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-24T15:31:34.803

那是一个 MongoDB URI。

与其将其传递给 a ，不如将其`DBAddress`传递给 a`MongoURI`然后将其传递给`Mongo`实例。

```
String textUri = "mongodb://admin:password@ds041177.mongolab.com:41177/myclouddb";
MongoURI uri = new MongoURI(textUri);
Mongo m = new Mongo(uri); 
```

您还应该考虑升级到[最新](https://github.com/mongodb/mongo-java-driver/downloads)的驱动程序并切换到`MongoClient`该类，因为`Mongo`该类现已弃用。

```
String textUri = "mongodb://admin:password@ds041177.mongolab.com:41177/myclouddb";
MongoClientURI uri = new MongoClientURI(textUri);
MongoClient m = new MongoClient(uri); 
```

# actionscript-3 - 将下载的 Actionscript3 插入个人项目

> ID：15052085
> 
> 赞同：0
> 
> 时间：2013-02-24T13:15:50.310
> 
> 标签：actionscript-3, actionscript, action, flash-cs5.5

我是所有这一切的初学者。

我正在尝试在 Flash 动画中制作一个三秒钟的动画（不是游戏或界面——只是一个使用我在 freeactionscript.com 上找到的视差星场的小序列：

[http://www.freeactionscript.com/2010/06/endless-starfield-parallax-scrolling/](http://www.freeactionscript.com/2010/06/endless-starfield-parallax-scrolling/)

我只是想将此代码插入现有项目中。我已经挖掘了几个小时以找到有关插入 AS3 代码的*任何内容*，但我能找到的只是预先假定对 ActionScript 有深入了解的项目，并且与我的启动问题无关。

我不断收到的错误是“1120：未定义属性 parallaxField 的访问”。我相信我已将所有文件放在正确的文件结构中，但它仍然不会呈现。

我什至不确定从哪里开始修复它，如何定义“parallaxField”属性，或者如何将它附加到我正在处理的项目中。

如果可以的话，请让我知道您是否需要帮助的任何其他信息。

非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:36:25.997

在该链接中有一个演示示例可供下载，

您必须拥有带有子文件夹的 com 文件夹并将其归档，

然后在您的主 js 文件中将其导入 com 文件夹中

```
import com.freeactionscript.ParallaxField; 
```

然后在你的主类中定义变量

```
private var parallaxField:ParallaxField; 
```

然后在你的构造函数中

```
// create container for our parallax effect
var mainContainer:MovieClip = new MovieClip();
addChild(mainContainer);

// instantiate parallax class
parallaxField = new ParallaxField();

// createField(container, x, y, width, height, numberOfStars, speedX, speedY);
parallaxField.createField(mainContainer, 10, 10, 530, 380, 100, 1, 1.5); 
```

# java - JNA 如何使用 HWND_BROADCAST

> ID：15052087
> 
> 赞同：1
> 
> 时间：2013-02-24T13:15:57.253
> 
> 标签：java, jna

我需要在 java 中为 SHAppBarMessage 使用 HWND_BROADCAST 值

尽管此[文档](http://jna.java.net/javadoc/platform/com/sun/jna/platform/win32/W32API.html)说它存在于 jna 中，但当我在 netbeans 中编写 W32API 时，我无法访问它。我已经导入了 platformjar 和 jna.jar，但我无法访问它。我怎样才能达到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:28:34.523

您应该能够在[WinUser](http://twall.github.com/jna/3.5.1/javadoc/com/sun/jna/platform/win32/WinUser.html#HWND_BROADCAST)中找到它，至少在 3.5.1 版本中。

# jquery - 回调函数未以 ajax 形式执行

> ID：15052091
> 
> 赞同：1
> 
> 时间：2013-02-24T13:16:10.613
> 
> 标签：jquery, servlets

我正在尝试使用 ajax 向 servlet 提交表单。表单提交成功，数据库条目已更改，但回调函数未执行。请帮助。这是我的具有ajax post方法的jsp页面

```
 $("#passwordchange").submit(function(){
        var oldprofpass = $("#profpass").val();
        var newprofpass = $("#profpassnew").val();      
        $.post("http://localhost:8080/SWMSProject/AdminpassChangeServlet",{profpass:oldprofpass,profpassnew:newprofpass},callbackfunction);
    }); 
```

回调函数是

```
function callbackfunction(data)
{
   alert(data);
} 
```

作为控制器的servlet是

```
response.setContentType("text/html");
PrintWriter out = response.getWriter();
try {
        boolean status = adb.adminChangePassword(e, request.getParameter("profpassnew"));
if(status)
{
out.print("Password changed successfully");
}
else
{
out.print("Please enter the old password correctly");
 } 
```

AdminBean 包含逻辑和数据库连接。我不明白是什么问题当我使用 firebug 进行调试时，警报即将到来，没有错误。但不正常。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:10:30.920

您还需要停止正常的提交处理；当提交后页面刷新时，您的 Ajax 帖子基本上消失了。

# c# - 如何在 C# 的标签中显示基于关系的 SQL Server 表值

> ID：15052093
> 
> 赞同：0
> 
> 时间：2013-02-24T13:16:20.877
> 
> 标签：c#, sql-server

我有两个以上具有关系的 SQL Server 表。但是当我想在标签中显示两列时，它会给我一个错误。我想显示书籍 ID 等于的`Aurthorname`位置：`Catagoryname``textbox.text`

```
SqlConnection con = new SqlConnection("Data Source=SWEETHOME\\SQLEXPRESS;Integrated Security=True");
con.Open();
SqlCommand coo = new SqlCommand("Select Book.BookId , Book.Booktitle, "+ 
                         "Aurthor.Aurthorname, Catagory.Catagoryname, Status.Status, "+
                         "Book.IssuingDate, Book.ReceivingDate, Book.Issuedby " + 
                         "From  Aurthor INNER JOIN Book ON Aurthor.Aurthorid = Book.Aurthorid "+
                         "INNER JOIN Catagory ON Book.Catagoryid = Catagory.Catagoryid INNER " +
                         "JOIN Status ON Book.Statusid = Status.Statusid Where Book.Bookid = '" +
                         textBox2.Text + "'", con);
SqlDataReader koo = coo.ExecuteReader();

while (koo.Read())
{
    label20.Text = koo["Aurthor.Aurthorname"].ToString();
    label21.Text = koo["Catagoryname.Catagory"].ToString();
} 
```

![在此处输入图像描述](../Images/400ad2c1ec6c9821142ba617971b15e0.png)

![在此处输入图像描述](../Images/9945ef448e18c369e573ee9d4fd88c02.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T13:19:33.140

您不需要在列名前加上表名。只需使用

```
label20.Text = koo["Aurthorname"].ToString();
label21.Text = koo["CatagoryName"].ToString(); 
```

顺便说一句，您已将表名与“类别”字段的列名切换

# fortran - 将复杂数组的实部传递给fortran中的子例程

> ID：15052103
> 
> 赞同：2
> 
> 时间：2013-02-24T13:17:19.487
> 
> 标签：fortran, fortran90

是否可以将复杂数组的实部传递给 Fortran 中的子例程，而无需将实部存储在另一个数组中并传递它？例如，而不是

```
Z = complex array;

X = real(Z)

call foo(X) 
```

请执行下列操作

```
Z = complex array

call foo(real(Z)) 
```

这给了我一个编译器错误！我正在使用英特尔编译器 ifort。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T14:34:11.047

当然，它有效：

```
module testmod
  implicit none

  integer, parameter :: dp = kind(1.0d0)

contains

  subroutine realsub(array)
    real(dp), intent(in) :: array(:)
    print *, array
  end subroutine realsub

end module testmod

program testprog
  use testmod
  implicit none

  complex(dp) :: array(3)

  array(:) = [ (1.0_dp, 1.0_dp), (3.0_dp, 2.0_dp), (-1.0_dp, 3.0_dp) ]
  call realsub(real(array))

end program testprog 
```

# css - 设备旋转时的引导响应 css 和/或视口问题/错误

> ID：15052104
> 
> 赞同：2
> 
> 时间：2013-02-24T13:17:22.497
> 
> 标签：css, twitter-bootstrap, rotation, responsive-design, mobile-website

我目前在我的网站[http://www.peterfox.me](http://www.peterfox.me)中遇到问题，当使用移动设备查看它时，（iPhone，Nexus 4）旋转屏幕似乎搞砸了 body/html 的大小，这是 Bootstrap 响应式 CSS 中的错误吗？还是我网站的关键问题？甚至只是移动浏览器的一般问题？

的症状通常是您从纵向转到横向或从横向开始并旋转到纵向使页面被视为仍然是横向比例的宽度，而实际上它是纵向留下了间隙，请参阅[旋转前的屏幕截图](http://i.imgur.com/oz6OEvl)和[旋转后的屏幕截图，](http://i.imgur.com/CjThvW9)以便更好地理解。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T13:19:38.120

您的元视口应该是这样的：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

尝试从您的元标记中删除额外的属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T18:32:34.300

最后用

```
html, body {
    overflow-x: hidden;
} 
```

# asp.net - 如何在 TabContainer ajaxToolkit 上设置 rtl？

> ID：15052108
> 
> 赞同：1
> 
> 时间：2013-02-24T13:17:48.847
> 
> 标签：asp.net, ajaxcontroltoolkit

我在 vs2012 中使用 ajaxToolkit 4.5。我希望 myapp 中的 TabContainer 设置为 rtl。我使用 float="right" 或 dir="rtl" 但不起作用。请帮忙。

```
 <ajaxToolkit:TabContainer runat="server" ID="Tabs" Height="138px" OnClientActiveTabChanged="ActiveTabChanged" 
                ActiveTabIndex="2" Width="402px">
                <ajaxToolkit:TabPanel runat="server" ID="Panel1" HeaderText="Signature and Bio" dir="rt>...... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:41:35.040

在您的页面上添加此样式规则：`.ajax__tab_container { direction: rtl; }`

# c - linux无法读取文件

> ID：15052109
> 
> 赞同：-1
> 
> 时间：2013-02-24T13:18:11.863
> 
> 标签：c, linux

我试图读取 proc/stat 文件，但我不能确定我的代码正在运行，因为我尝试读取另一个文件并且它运行良好.. 这是代码：

```
#include <stdio.h>
#include <stdlib.h>  // for the malloc
int main (int argc,char *argv[])
{
char *file_name = "/proc/stat";
char *contents;
FILE *file;
int filesize = 0;
file = fopen(file_name, "r");
if(file != NULL)
{
    //get the file size
    fseek(file, 0, SEEK_END);
    filesize = ftell(file);
    fseek(file, 0, SEEK_SET);

    printf("the file size is: %d\n", filesize);

    contents = (char *)malloc(filesize+1); // allocate memory
    fread(contents, filesize,1,file);
    contents[filesize]=0;
    fclose(file);
    printf("File has been read: %s \n", contents);

}
else
{
    printf("the file name %s doesn't exits", file_name);
}

return 0; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T13:26:04.337

您无法确定 /proc 中特殊文件的大小，也无法在它们中寻找到最后。它们的内容是即时生成的。使用这些文件，您必须继续阅读，直到遇到 EOF。您无法事先知道将获得多少数据。

因此，请继续读取 512 字节块中的数据，直到您获得短读。然后你就会知道你不能再读取任何数据了。

编辑：我突然想到我已经在过去的问题中回答了这个问题：[/proc/[pid]/cmdline file size](https://stackoverflow.com/questions/13333505/proc-pid-cmdline-file-size)

# gcc - 限制 SSE 指令集

> ID：15052113
> 
> 赞同：0
> 
> 时间：2013-02-24T13:18:51.593
> 
> 标签：gcc, compilation, clang, sse

我希望我的编译器只使用指定版本的 SSE 的指令。

现在，看起来`-msse2 -mno-sse3 -mno-sse4 -mno-sse41 -mno-sse42`可以，但是我正在寻找类似`-monly-sse2`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:00:19.667

除非您指定`-msse3`/`-march=<cpu-with-sse3>`只有 SSE2 将在 x86-64 上使用（甚至在 x86 上使用更低的指令集）。

# wordpress - 在 Joomla 或 WP 等 CMS 中使用哪种菜单和类别分层模型？

> ID：15052117
> 
> 赞同：4
> 
> 时间：2013-02-24T13:19:10.733
> 
> 标签：wordpress, database-design, joomla, hierarchical-data

邻接集或嵌套集模型或其他？

我对 Joomla 或 WordPress 等 CMS 以及它们如何处理存储在 db 中的菜单、类别和其他分层数据感兴趣。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:52:27.693

Joomla 将嵌套集用于多种事物，包括菜单项和类别。

Wordpress 似乎使用了一个相当不常用的系统，将其菜单项与其他内容一起存储在其“术语”表中。我只能在那里找到一个“父”字段，所以我假设它只是简单地存储父项的 id 来建模分层菜单。不过，我还没有使用过 Wordpress。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T08:17:13.790

我正在使用 wordpress。我在 wordpress 中找到模型分层菜单。它以分层方式将菜单存储在数据库中。您还可以通过 wordpress 功能找到父菜单。在 wordpress 中，我可以找到一期 bredcumb。如果以后会解决，那么wordpress菜单比joomla更好。

# android - Ubuntu：Eclipse 看不到 ADT 插件

> ID：15052124
> 
> 赞同：1
> 
> 时间：2013-02-24T13:19:45.153
> 
> 标签：android, eclipse, ubuntu, adt

我尝试在 Linux ubuntu 12.10 上打开我的 android sdk。我安装了最新的 Eclipse Juno

```
sudo tar -zxvf ./eclipse-SDK-4.2.1-linux-gtk-x86_64.tar.gz -C /opt 
```

安装的 android sdk：

```
sudo tar -zxvf ./android-sdk_r21.1-linux.tgz -C /opt 
```

在 Eclipse 中，我安装了最新的 GEF 和 WST 服务器适配器，而不是添加了 ADT 插件

```
https://dl-ssl.google.com/android/eclipse/ 
```

但是在我`Windows > Preferences`或任何地方我都看不到我的 android 插件。Eclipse 仍然没有 ADT。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:41:36.127

嗯，我解决了。蹩脚的方式：只需设置`chmod 777`为`/opt/eclipse`&`/opt/android-sdk-linux`并重新加载 adt 插件。

# mysql - mysql 从多个表中选择，但如果在其他 2 个表中找不到 id，则为该列设置默认值 null

> ID：15052127
> 
> 赞同：-2
> 
> 时间：2013-02-24T13:19:54.977
> 
> 标签：mysql, select

目前我在如何查询这个问题上遇到了问题。我当前的查询如下

```
 SELECT tbl1.col1,
  tbl1.col2,
  tbl1.col3,
  tbl1.col4,
  tbl1.col5,
  tbl2.col1,
  tbl2.col2,
  .
  .
  .
  tbln.col1,
  tbln.col2,

  FROM tbl1,tbl2,...tbln
  WHERE tbl1.col1= tbl2.col1AND
  .
  .
  .
  tbl1.col1= tbln.col1; 
```

但我无法显示/显示其他表中不存在的那些行。

我真正想做的仍然是显示那些在其他表中不存在的数据，但是如果特定数据在其他表中不存在，它只会在列中显示空值。

```
 SELECT tbl1.col1,
  tbl1.col2,
  tbl1.col3,
  tbl1.col4,
  tbl1.col5,
  iff(tbl2.col1 <> null,tbl2.col1,NULL),
  iff(tbl2.col2 <> null,tbl2.col1,NULL),
  .
  .
  .
  iff(tbln.col1 <> null,tbl2.col1,NULL),
  iff(tbln.col2 <> null,tbl2.col1,NULL),

  FROM tbl1,tbl2,...tbln
  WHERE tbl1.col1= tbl2.col1 AND
  .
  .
  .
  tbl1.col1= tbln.col1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:27:05.413

我不知道你为什么使用`iff`

尝试`if`

```
 if(tbl2.col1 <> null,tbl2.col1,NULL), 
```

您可以通过在您的情况下使用来显示空值，`LEFT JOIN`您将执行数百个 if 语句，但`left join`更短更容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T13:27:18.620

只需使用`LEFT JOIN`：

```
SELECT
  tbl1.col1, tbl1.col2, ...
  tlb2.col1, tbl2.col2, ...
  tlb3.col1, tbl3.col2, ...
  ...
  tlbn.col1, tbln.col2, ...
FROM tbl1
  LEFT JOIN tbl2 ON tbl1.col1 = tbl2.col1
  LEFT JOIN tbl3 ON tbl1.col1 = tbl3.col1
  ...
  LEFT JOIN tbln ON tbl1.col1 = tbln.col1 
```

如果该表中不存在对应`tbl2`于. 对于所有其他表格也是如此。`NULL``tbl1`

# windows - http.globalAgent.maxSockets 的合理值

> ID：15052130
> 
> 赞同：0
> 
> 时间：2013-02-24T13:20:18.297
> 
> 标签：windows, node.js

在 Windows Server 2012 上运行时，如何确定 http.globalAgent.maxSockets 的合理值？

我想知道我可以用于测试的一般范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T14:40:29.287

这很难回答，因为它取决于您的应用程序的运行方式。

我已经在我的应用程序上使用以下配置进行了一些测试

```
http.globalAgent.maxSockets = 1;
http.globalAgent.maxSockets = 5:
http.globalAgent.maxSockets = 20;
http.globalAgent.maxSockets = 1000; 
```

最佳值是 20。我的结果的问题在于，它们可能不适合您的应用程序。

我的建议：像我一样做一些测试:)

# objective-c - 如何在 UIView/Subview 响应链中组织类？

> ID：15052134
> 
> 赞同：0
> 
> 时间：2013-02-24T13:20:48.723
> 
> 标签：objective-c, design-patterns, uiview

我经常听说，以每个班级都知道其他班级的方式来组织班级是不好的。所以我试着让作为其他类属性的类不知道他们的父母。但是使用 UIView 我无法实现它。

这个问题来自更通用的背景，因为问题不仅发生在 UIViews 上。如果我有一辆汽车作为对象，有 4 个轮子作为 4 个实例变量，并且当左前轮爆裂时。左后轮应该会收到一条消息。我应该如何以一种好的方式设计系统？

Objective-C 中的 UIView 示例：我有一个自定义 UIView 填充整个屏幕。管理所有布局。假设只有 2 个子视图保持简单。

```
@interface BackgroundView : UIControllerView {

    CustomViewA *buttonA;
    CustomViewB *buttonB;
}
@end

@interface CustomViewA : UIButton

@interface CustomViewB : UIButton 
```

现在如果有人**按下按钮 A，按钮 B 应该做某事（例如变红）**。我看到有几个选项：

1.  将按钮 A 的委托设置为按钮 B，因此 A 的所有事件都转到 B 的实现文件。如果不是所有事件都与按钮 B 有关，则问题。
2.  创建一个单例 BackgroundView 并让按钮 A 获取按钮 B 的属性或调用 BackgroundView 中的方法，该方法确实将我的调用转发到按钮 B。如果我想要多个背景，可以创建一个更高的类来拥有两个 BackgroundView （听起来不太好）。
3.  调用为 UIViews 实现的父对象，然后像 2\. 调用方法或直接更改它。不使用 UIView 时出现问题，将功能复制到其他“父”类？

有没有更好的方法来解决这样的问题？或者我可以大大优化一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T13:25:28.137

可能所有逻辑都属于 ViewController，他知道关于他所控制的视图的一切，但视图对视图控制器或彼此一无所知。

视图应该通过委托（或目标操作）与视图控制器进行通信，并且视图控制器应该做出决策并可能将消息转发给其他视图。

顺便说一下，看看 iTunes 大学的斯坦福课程。我认为这是他们谈论 MVC（模型视图控制器）的第一类或第二类。这会有很大帮助：[https ://itunes.apple.com/us/course/coding-together-developing/id593208016](https://itunes.apple.com/us/course/coding-together-developing/id593208016)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T15:03:21.980

@Odrakir 在这里提到了模型-视图-控制器，他们是对的——那应该是你的第一站。如果它有帮助，您可以通过以下方式将该模式应用于您的示例：

您有一个带有属性的模型类`color`。在基于文档的应用程序中，文档通常*是*模型。在非基于文档的应用程序中，将模型从应用程序委托实例中挂起是很常见的。为简单起见，假设我们处于后一种情况。您可能有以下课程：

```
// "Model"
@interface MyModel : NSObject
@property (nonatomic, readwrite, copy) UIColor* color;
@end

// AppDelegate
@interface MyAppDelegate : UIResponder <UIApplicationDelegate>
@property (nonatomic, readonly, retain) MyModel* model;
@end

// "View"
@interface CustomViewA : UIButton
@end

@interface CustomViewB : UIButton
@end

// "Controller"
@interface MyViewController : UIViewController

@property (nonatomic, readwrite, assign) IBOutlet UIView* buttonA;
@property (nonatomic, readwrite, assign) IBOutlet UIView* buttonB;

- (IBAction)doActionA: (id)sender;
- (IBAction)doActionB: (id)sender;

@end 
```

基本模式是这样的：视图中的动作触发控制器的模型修改动作（目标/动作模式）。为此，您可以通过将按钮 A 的操作连接到`-doActionA:`控制器（IB 中的“文件所有者”）和（对于 B 也是如此）上的操作来连接它们。然后，控制器上的操作方法在触发时应该修改模型，并使由于模型更改而需要重绘的任何视图无效。您可以通过将视图插入控制器上的 IBOutlets 并让控制器调用来做到这一点`[self.buttonA setNeedsDisplay]`。然后，当您的视图绘制时，它应该从模型中读取它需要正确绘制的任何状态。

值得一提的是，在 MacOS 上，您可以通过使用绑定将视图链接到模型来消除手动失效步骤。在这种情况下，对模型的更改将自动使视图无效。iOS/UIKit 没有绑定，因此您必须手动执行此失效操作。

# c# - 将 IEnumerable 转换为数组会导致一个空数组

> ID：15052135
> 
> 赞同：2
> 
> 时间：2013-02-24T13:20:49.607
> 
> 标签：c#, generics, collections

我们`ItemInfo`在**megaItems**中有 4 个：

```
IEnumerable<ItemInfo> megaItems; 
```

在执行以下任一行之后，我们有 0 `ItemInfo`s

```
var array = megaItems.ToArray();
//var array = megaItems.Cast<ItemInfo>().ToArray();
return array; 
```

如何以正确的方式进行这种转换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T13:37:37.850

Cast（与 OfType 不同）不会删除项目 - 所以我们可以假设不是这样。我的猜测是，“大型项目”实际上在后续迭代期间报告了不同的结果（很有可能；从您的链接中，也许迭代它们会导致它们被加载 - 因此不再未加载）。我猜如果我们这样做：

```
var x = megaItems.ToArray();
var y = megaItems.ToArray(); 
```

那么（我的猜测）x 的长度为 4，y 的长度为 0。如果是这种情况，那么只需避免读取两次，或者第一次缓冲输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T13:46:07.457

覆盖`GetHashCode()`和`Equals(object obj)`类 `ItemInfo`可以解决问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T13:27:43.740

该数组很可能不是空的。尝试使用这些项目而不是快速查看。[这是来自MSDN](http://msdn.microsoft.com/en-us/library/bb341406.aspx)的引用

> 该方法是通过使用延迟执行来实现的。立即返回值是一个存储执行操作所需的所有信息的对象。在通过直接调用其 GetEnumerator 方法或使用 Visual C# 中的 foreach 或 Visual Basic 中的 For Each 枚举对象之前，不会执行此方法表示的查询。

# php - PCRE 用多个字符串替换多个值

> ID：15052136
> 
> 赞同：1
> 
> 时间：2013-02-24T13:21:14.233
> 
> 标签：php, regex, pcre

我正在尝试批量替换 csv 文件中的一些关键字，例如，我有一个关键字**cat、mouse、dog**的列表，我想用**一些东西替换，否则，**我目前正在使用这个[http://phpcsv。 sourceforge.net/phpcsv-1.0.php](http://phpcsv.sourceforge.net/phpcsv-1.0.php)它是完美的，它说它使用 PCRE 来替换值，我的问题是我需要在搜索和替换字段中输入什么来实现这个结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T13:48:02.253

你可以使用

**搜索** `(?<=^|,)(cat|mouse|dog)(?=,|$)` **替换** `${1}2`

`${1}`用于引用字段`()`中的捕获的字符串。 通常你可以直接使用，但是因为紧跟在后面，所以需要将 . 括起来。`Search`
`$1``2``1``{}`

如果值可以包含在`"`add `"?`before 和 after`(cat|mouse|dog)`中。

`(?<=^|,)`意味着向后看必须有一行或逗号的开头。
`(?=,|$)`表示向前看必须有逗号或行尾。

如果每个关键字的替换不同，我认为你必须分别做每个，例如

**搜索** `(?<=^|,)cat(?=,|$)` **替换** `hamster`

或者，如果使用您自己的代码，您可以通过将数组作为参数传递给`preg_replace`.

# javascript - Javascript对部分字符串进行排序

> ID：15052141
> 
> 赞同：1
> 
> 时间：2013-02-24T13:22:23.283
> 
> 标签：javascript, sorting

我有一个字符串数组，其中包含一个可选的两个字母的字符串，表示春天或秋天，后跟一个四位数的年份，即作为以下示例之一：

```
var example_data = ["HT2014", "VT2013", "2017"]; 
```

我想对这个数组进行排序，使其主要按年份排序（即四位数字，作为数字），然后（如果年份相等）对其进行排序，使 VT 排在第一位，HT 位于中间并且未指定春季或秋季的条目是最后一个。

如果我`sort()`正确理解了 JavaScript 函数，我应该能够实现一个`sortFunction`告诉我两个对象中的哪一个应该是第一个，然后只需调用`data.sort(sortFunction)`.

我也开始研究这样的一个`sortFunction`，并提出以下内容：

```
function specialSort(a,b) {
  var as = a.split("T");
  var bs = b.split("T");

  if (as[1] != bs[1]) {
    return as[1] - bs[1];
  } else {
    // The year is equal.
    // How do I sort on term?
  }
} 
```

正如评论所表明的那样，我不知道该怎么做才能进行排序和`"HT"`正确（除了可能是一系列荒谬的嵌套s...）。*（另外，我知道上面的代码对于示例数据中的第三项会失败，因为**只有 1 个元素。我会处理的......）*`"VT"``""``if`*`"2017.split("T")`*

这是一个好方法吗？如果是 - 我如何完成功能来做我想做的事？如果没有 - 我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T13:40:03.603

它可能更短，但这种方法首先计算一个排序键，然后使用它对数组进行排序。

生成排序键非常明确且易于理解，这在创建排序算法时总是对我有帮助。

```
// sorting key = <year> + ('A' | 'B' | 'C')
function getitemkey(item)
{
    var parts = item.match(/^(HT|VT)?(\d{4})$/);

    switch (parts[1]) {
        case 'VT': return parts[2] + 'A'; // VT goes first
        case 'HT': return parts[2] + 'B'; // HT is second
    }
    return parts[2] + 'C'; // no prefix goes last
}

function cmp(a, b)
{
    var ka = getitemkey(a),
    kb = getitemkey(b);

    // simple key comparison
    if (ka > kb) {
        return 1;
    } else if (ka < kb) {
        return -1;
    }
    return 0;
}

["HT2014", "VT2013", "2017", 'HT2013', '2013'].sort(cmp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T13:39:46.843

我会使用带有捕获的正则表达式并在零件上进行比较

```
function compare(a, b) {
    var re = /([HV]T)?(\d\d\d\d)/;
    var ma = re.exec(a);
    var mb = re.exec(b);

    // compare the years
    if (ma[2] < mb[2])
        return -1;

    if (ma[2] > mb[2])
        return 1;

    // years are equal, now compare the prefixes
    if (ma[1] == mb[1])
        return 0;

    if (ma[1] == 'VT')
        return -1;

    if (mb[1] == 'VT')
        return 1;

    if (ma[1] == 'HT')
        return -1;

    return 1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T13:50:15.480

> 我会处理那个...

您可以通过从数组中获取最后一项而不是第二项来做到这一点：

```
var lastCmp = as.pop() - bs.pop();
if (lastCmp) // != 0
    return lastCmp;
else
    // compare on as[0] / bs[0], though they might be undefined now 
```

> 我如何完成功能来做我想做的事？

您将需要一个比较索引表。类似于@Jack 的`switch`声明，它允许您声明自定义排序：

```
var orderingTable = {
    "V": 1,
    "H": 2
    // …
},
    def = 3;
var aindex = orderingTable[ as[0] ] || def, // by as[0]
    bindex = orderingTable[ bs[0] ] || def; // by bs[0]
return aindex - bindex; 
```

如果您不想要这样的表格，也可以使用数组：

```
var ordering = ["V", "H" /*…*/];
var *index = ordering.indexOf(*key)+1 || ordering.length+1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T13:59:46.003

我冒昧地使用下划线：

```
var example_data = ["2002","HT2014", "VT2013", "2017", "VT2002", "HT2013"];

var split = _.groupBy(example_data, function(val){ return val.indexOf('T') === -1});

var justYears = split[true].sort();
var yearAndTerm = split[false].sort(function(a,b){
    var regex = /([HV])T(\d\d\d\d)/;
    var left = regex.exec(a);
    var right = regex.exec(b);

    return left[2].localeCompare(right[2]) || right[1].localeCompare(left[1]);

});

var sorted = yearAndTerm.concat(justYears);
console.log(sorted); 
```

这是小提琴：http: [//jsfiddle.net/8KHGu/](http://jsfiddle.net/8KHGu/) :)

# python - 使用 Apache 配置 Django

> ID：15052142
> 
> 赞同：0
> 
> 时间：2013-02-24T13:22:26.313
> 
> 标签：python, django, apache2

我正在尝试使用 mod_python 在 apache 下运行我的 Django 应用程序，但我不知道问题出在哪里。

我的 django 项目在目录下`/srv/APCC`

Apache 虚拟主机配置如下

```
<VirtualHost *:8000>
ServerAdmin my.mail@gmail.com
DocumentRoot /srv/APCC/

    <Location "/srv/APCC/">
        SetHandler python-program
        PythonHandler django.core.handlers.modpython
        SetEnv DJANGO_SETTINGS_MODULE APCC.settings
        PythonDebug Off
        PythonOption django.root /srv/APCC/
        PythonPath "['/srv/APCC/'] + sys.path"
    </Location>

</VirtualHost> 
```

当我点击`myhost.com:8000`时，浏览器会列出我的 django 应用程序文件。这里会有什么问题？

# maven - 从maven中的相对路径获取完整路径

> ID：15052143
> 
> 赞同：0
> 
> 时间：2013-02-24T13:22:28.127
> 
> 标签：maven, path, exec-maven-plugin

我正在使用 exec-maven-plugin 来执行一个非 java 文件并将另一个文件作为参数传递。我需要能够使用位于${basedir} 目录**之上的完整路径。**如何在不使用完整路径的情况下访问这样的目录？

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>exec-maven-plugin</artifactId>
    <configuration>
    <executable>[Path to my .exe file]</executable
        <argument>${basedir}\..\..\somedir\anotherdir</argument>
    <arguments> 
```

使用以下代码不起作用并输出以下 cmd 参数-

```
"c:\dir1\dir2\dir3\mybasedir..\..\somedir\anotherdir" 
```

作为命令行参数，这当然毫无意义。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T13:40:53.060

您忘记了分隔符：`${basedir}\..\..\somedir\anotherdir`

# c# - gridview的分页

> ID：15052147
> 
> 赞同：4
> 
> 时间：2013-02-24T13:22:49.647
> 
> 标签：c#, asp.net, gridview

我有一个允许分页的gridview。但是当我单击第二页时，gridview 消失了，这里是 c# 代码：

```
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        GridView1.PageIndex = e.NewPageIndex;
        OdbcDataAdapter adpState = new OdbcDataAdapter("SELECT CALL_NO,TDATE,
        ID_NO,NAME,CONTACT,DEPARTMENT,ISSUE,STATUS FROM TBL_ITHELPDESK 
        WHERE (STATUS IS NULL OR STATUS <> 'CLOSED') AND  TDATE= TO_DATE('" +
          txtDate.Text.ToString().Trim() + "','MM-DD-YYYY')", con1);
        DataSet ds = new DataSet();
        adpState.Fill(ds);
        GridView1.DataSource = ds;
        GridView1.DataBind();    
    } 
```

谁能帮忙找出我哪里出错了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T13:40:23.407

您必须检查多项内容。

1.  使用正在运行的查询检查查询，是否相同？
2.  检查 con1 变量是在任何其他方法之外定义的。

在类中定义`con1`而不是在方法中，类似的东西

```
 odbcConnection con = new odbcConnection(ConectionString); 
```

# .net - 从字节数组中的任何位置解码以零结尾的 UTF-8 字符串

> ID：15052149
> 
> 赞同：2
> 
> 时间：2013-02-24T13:24:22.693
> 
> 标签：.net, string, utf-8, bytearray, decode

我正在[FCL](https://stackoverflow.com/questions/807880/bcl-base-class-library-vs-fcl-framework-class-library "框架类库")中寻找一种类似于的方法[`Encoding.UTF8.GetString(bytes, index, count)`](http://msdn.microsoft.com/en-us/library/05cts4c3.aspx "MSDN 参考页")，但它不需要`count`参数，而是假定给定索引处的字符串以空值结尾。

我将我当前的解决方案作为答案发布（见下文），但很想知道是否有人知道更优雅或性能更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T13:24:22.693

因为我在 FCL 中没有找到一个，所以我已经编写了自己的方法：

```
using System.Text;

string GetZeroTerminatedUTF8StringAt(byte[] bytes, int index)
{
    int zeroTerminatorIndex = Array.IndexOf<byte>(bytes, value: 0, startIndex: index);
    if (zeroTerminatorIndex >= index)
    {
        return Encoding.UTF8.GetString(bytes, index, count: zeroTerminatorIndex - index);
    }
    else
    {
        throw new ArgumentOutOfRangeException("index", "No zero-terminator found.");
    }
} 
```

虽然这可行，但它有一个小问题：假设除了 UTF-8 编码之外的任何字符都`'\0'`不会包含一个`0`字节。虽然情况确实如此，但如果该假设被完全封装在`Encoding.UTF8`类中会更好。

# android - 为什么只有 10 张图像中的 1 张被加载并保存在 SD 卡中

> ID：15052153
> 
> 赞同：0
> 
> 时间：2013-02-24T13:25:04.633
> 
> 标签：android, android-sdcard, android-image

我正在从存储在数组中的 URL 加载 10 个图像。只有最后一个索引 url 在 SD 卡中加载和保存图像。这是我的代码：

```
 for(int j=0; j<List.size();j++)
        {
             reviewImageLink =List.get(j).get(TAG_Image).toString();
             URL reviewImageURL;
            String name = reviewImageLink;//.substring(reviewImageLink .lastIndexOf("/") + 1,reviewImageLink.length());
                try {
                    reviewImageURL = new URL(reviewImageLink);
                    if (!hasExternalStoragePublicPicture(name)) {
                        isImage = false;
                        new DownloadImageTask().execute(reviewImageURL);
                        Log.v("log_tag", "if");
                        isImage = true;
                        File sdImageMainDirectory = new File(Environment.getExternalStorageDirectory(), getResources().getString(R.string.directory));
                    //if(!sdImageMainDirectory.exists()){
                        sdImageMainDirectory.mkdirs();
                        File file = new File(sdImageMainDirectory, name);
                        Log.v("log_tag", "Directory created");}
            }
                catch (MalformedURLException e) {
                    Log.v(TAG, e.toString());   }
        }

    }//try 
    catch (Exception e) {
            e.printStackTrace();}

DownloaderTask:

class DownloadImageTask extends AsyncTask<URL, Integer, Bitmap> {
    // This class definition states that DownloadImageTask will take String
    // parameters, publish Integer progress updates, and return a Bitmap
    protected Bitmap doInBackground(URL... paths) {
        URL url;
        try {
            url = paths[0];
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            int length = connection.getContentLength();
            InputStream is = (InputStream) url.getContent();
            byte[] imageData = new byte[length];
            int buffersize = (int) Math.ceil(length / (double) 100);
            int downloaded = 0;
            int read;
            while (downloaded < length) {
                if (length < buffersize) {
                    read = is.read(imageData, downloaded, length);
                } else if ((length - downloaded) <= buffersize) {
                    read = is.read(imageData, downloaded, length- downloaded);
                } else {
                    read = is.read(imageData, downloaded, buffersize);
                }
                downloaded += read;
                publishProgress((downloaded * 100) / length);
            }
            Bitmap bitmap = BitmapFactory.decodeByteArray(imageData, 0,length);
            if (bitmap != null) {
                Log.i(TAG, "Bitmap created");
            } else {
                Log.i(TAG, "Bitmap not created");
            }
            is.close();
            return bitmap;
        } catch (MalformedURLException e) {
            Log.e(TAG, "Malformed exception: " + e.toString());
        } catch (IOException e) {
            Log.e(TAG, "IOException: " + e.toString());
        } catch (Exception e) {
            Log.e(TAG, "Exception: " + e.toString());
        }
        return null;

    }

    protected void onPostExecute(Bitmap result) {
        String name = reviewImageLink.substring(reviewImageLink.lastIndexOf("/") + 1,reviewImageLink.length());
        if (result != null) {
            hasExternalStoragePublicPicture(name);
            saveToSDCard(result, name);
            isImage = true;

        } else {
            isImage = false;

        }
    }
}

public void saveToSDCard(Bitmap bitmap, String name) {
    boolean mExternalStorageAvailable = false;
    boolean mExternalStorageWriteable = false;
    String state = Environment.getExternalStorageState();
    if (Environment.MEDIA_MOUNTED.equals(state)) {
        mExternalStorageAvailable = mExternalStorageWriteable = true;
        Log.v(TAG, "SD Card is available for read and write "+ mExternalStorageAvailable + mExternalStorageWriteable);
        saveFile(bitmap, name);
    } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
        mExternalStorageAvailable = true;
        mExternalStorageWriteable = false;
        Log.v(TAG, "SD Card is available for read "+ mExternalStorageAvailable);
    } else {
        mExternalStorageAvailable = mExternalStorageWriteable = false;
        Log.v(TAG, "Please insert a SD Card to save your Video "+ mExternalStorageAvailable + mExternalStorageWriteable);
    }
}

private void saveFile(Bitmap bitmap, String name) 
{
    String filename = name;
    ContentValues values = new ContentValues();
    File sdImageMainDirectory = new File(Environment.getExternalStorageDirectory(), getResources().getString(R.string.directory));
    sdImageMainDirectory.mkdirs();
    File outputFile = new File(sdImageMainDirectory, filename);
    values.put(MediaStore.MediaColumns.DATA, outputFile.toString());
    values.put(MediaStore.MediaColumns.TITLE, filename);
    values.put(MediaStore.MediaColumns.DATE_ADDED, System.currentTimeMillis());
    values.put(MediaStore.MediaColumns.MIME_TYPE, "output.jpeg");
    Uri uri = this.getContentResolver().insert(android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI,values);
    //Uri result = context.getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, image);
    sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"+ Environment.getExternalStorageDirectory())));

    try 
    {
        OutputStream outStream = this.getContentResolver().openOutputStream(uri);
        bitmap.compress(Bitmap.CompressFormat.JPEG, 95, outStream);
        outStream.flush();
        outStream.close();
    }
    catch (FileNotFoundException e) 
    {
        e.printStackTrace();
    } catch (IOException e) 
    {
        e.printStackTrace();
    }
}

private boolean hasExternalStoragePublicPicture(String name) {
    File sdImageMainDirectory = new File(Environment.getExternalStorageDirectory(), getResources().getString(R.string.directory));
    File file = new File(sdImageMainDirectory, name);
    if (file != null) 
    {
        file.delete();
    }
    return file.exists();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T13:44:23.227

将列表传递给`DownloadImageTask`而不是在中`URL`放置一个 for 循环`doInBackground`，

# java - 如何保存桌面应用程序状态？

> ID：15052154
> 
> 赞同：0
> 
> 时间：2013-02-24T13:25:21.910
> 
> 标签：java, swing

我正在用java创建一个编辑器。我想知道如何在java中保存中间状态？例如，当用户想要保存在编辑器上所做的更改时，如何完成并且以后应该重新加载。

例如。PowerPoint 应用程序保存为 .ppt 或 .pptx。稍后可以打开相同的 .ppt 以供其他版本使用。我希望我清楚我的要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T13:32:46.697

带有用户偏好的[Preferences](http://docs.oracle.com/javase/7/docs/api/java/util/prefs/Preferences.html) API；最近编辑的文件，每个文件可能是时间戳 + 光标位置，GUI 设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T14:27:08.387

要使用正确的序列化方式将内容保存在文件`JTextPane`中`serialize`。当您想再次加载内容时，您可以将其显示在. 考虑下面给出的代码：`DefaultStyledDocument``JTextPane``deserialize``JTextPane`

```
import javax.swing.*;
import javax.swing.text.*;
import java.awt.*;
import java.awt.event.*;
import java.io.*;

public class SaveEditor extends JFrame implements ActionListener{
     public static final String text = "As told by Wikipedia\n"
    +"Java is a general-purpose, concurrent, class-based, object-oriented computer programming language."
    + "It is specifically designed to have as few implementation "
    + "dependencies as possible. It is intended to let application developers write once, run anywhere (WORA), "
    + "meaning that code that runs on one platform does not need to be recompiled to run on another. "
    + "Java applications are typically compiled to bytecode (class file) that can run on any Java virtual "
    + "machine (JVM) regardless of computer architecture. Java is, as of 2012, one of the most popular programming "
    + "languages in use, particularly for client-server web applications, with a reported 10 million users.";
    JTextPane pane ;
    DefaultStyledDocument doc ;
    StyleContext sc;
    JButton save;
    JButton load;
    public static void main(String[] args) 
    {
        try 
        {
            UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
            SwingUtilities.invokeLater(new Runnable()
            {
                public void run()
                {
                    SaveEditor se = new SaveEditor();
                    se.createAndShowGUI();
                }
            });
        } catch (Exception evt) {}
    }
    public void createAndShowGUI()
    {
        setTitle("TextPane");
        sc = new StyleContext();
        doc = new DefaultStyledDocument(sc);
        pane = new JTextPane(doc);
        save = new JButton("Save");
        load = new JButton("Load");
        JPanel panel = new JPanel();
        panel.add(save);panel.add(load);
        save.addActionListener(this);load.addActionListener(this);
        final Style heading2Style = sc.addStyle("Heading2", null);
        heading2Style.addAttribute(StyleConstants.Foreground, Color.red);
        heading2Style.addAttribute(StyleConstants.FontSize, new Integer(16));
        heading2Style.addAttribute(StyleConstants.FontFamily, "serif");
        heading2Style.addAttribute(StyleConstants.Bold, new Boolean(true));
        try 
        {
            doc.insertString(0, text, null);
            doc.setParagraphAttributes(0, 1, heading2Style, false);
        } catch (Exception e) 
        {
            System.out.println("Exception when constructing document: " + e);
            System.exit(1);
        }
        getContentPane().add(new JScrollPane(pane));
        getContentPane().add(panel,BorderLayout.SOUTH);
        setSize(400, 300);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }
    public void actionPerformed(ActionEvent evt)
    {
        if (evt.getSource() == save)
        {
            save();
        }
        else if (evt.getSource() == load)
        {
            load();
        }
    }
    private void save()//Saving the contents .
    {
        JFileChooser chooser = new JFileChooser(".");
        chooser.setDialogTitle("Save");
        int returnVal = chooser.showSaveDialog(this);
        if(returnVal == JFileChooser.APPROVE_OPTION) 
        {
            File file = chooser.getSelectedFile();
            if (file != null)
            {
                FileOutputStream fos = null;
                ObjectOutputStream os = null;
                try
                {
                    fos = new FileOutputStream(file);
                    os = new ObjectOutputStream(fos);
                    os.writeObject(doc);
                    JOptionPane.showMessageDialog(this,"Saved successfully!!","Success",JOptionPane.INFORMATION_MESSAGE);
                }
                catch (Exception ex)
                {
                    ex.printStackTrace();
                }
                finally
                {
                    if (fos != null)
                    {
                        try
                        {
                            fos.close();
                        }
                        catch (Exception ex){}

                    }
                    if (os != null)
                    {
                        try
                        {
                            os.close();
                        }
                        catch (Exception ex){}

                    }
                }
            }
            else 
            {
                JOptionPane.showMessageDialog(this,"Please enter a fileName","Error",JOptionPane.ERROR_MESSAGE);
            }
        }
    }
    private void load()//Loading the contents
    {
        JFileChooser chooser = new JFileChooser(".");
        chooser.setDialogTitle("Open");
        chooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
        int returnVal = chooser.showOpenDialog(this);
        if(returnVal == JFileChooser.APPROVE_OPTION) 
        {
            File file = chooser.getSelectedFile();
            if (file!= null)
            {
                FileInputStream fin = null;
                ObjectInputStream ins = null;
                try
                {
                    fin = new FileInputStream(file);
                    ins = new ObjectInputStream(fin);
                    doc = (DefaultStyledDocument)ins.readObject();
                    pane.setStyledDocument(doc);
                    JOptionPane.showMessageDialog(this,"Loaded successfully!!","Success",JOptionPane.INFORMATION_MESSAGE);
                }
                catch (Exception ex)
                {
                    ex.printStackTrace();
                }
                finally
                {
                    if (fin != null)
                    {
                        try
                        {
                            fin.close();
                        }
                        catch (Exception ex){}

                    }
                    if (ins != null)
                    {
                        try
                        {
                            ins.close();
                        }
                        catch (Exception ex){}

                    }
                }
            }
            else 
            {
                JOptionPane.showMessageDialog(this,"Please enter a fileName","Error",JOptionPane.ERROR_MESSAGE);
            }
        }
    }

} 
```

# validation - 如何在实现 ModelDriven 接口的操作中使用 struts2 中的注释来实现验证？

> ID：15052157
> 
> 赞同：2
> 
> 时间：2013-02-24T13:25:56.357
> 
> 标签：validation, struts2, model-driven

我正在尝试使用注释来实现验证，但是这些验证不起作用，并且表单被提交为空值。我不知道缺少什么，如何在实现 ModelDriven 接口的操作中使用 struts2 中的注释来实现验证？这是我的 struts.xml

```
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <package name="default" extends="struts-default">
        <action name="saveOrUpdateUser" method="saveOrUpdate1" class="com.vaannila.web.Userqqqq">
            <result name="success" type="redirect">listUser</result>
            <result name="input">/register.jsp</result>
        </action>
        <action name="listUser" method="list" class="com.vaannila.web.Userqqqq">
            <result name="success">/register.jsp</result>
            <result name="input">/register.jsp</result>
        </action>
        <action name="editUser" method="edit" class="com.vaannila.web.Userqqqq">
            <result name="success">/register.jsp</result>
            <result name="input">/register.jsp</result>
        </action>
        <action name="deleteUser" method="delete" class="com.vaannila.web.Userqqqq">
            <result name="success" type="redirect">listUser</result>
            <result name="input">/register.jsp</result>
        </action>
    </package>
</struts> 
```

这是我的jsp页面

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@taglib uri="/struts-tags" prefix="s"%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Registration Page</title>
<s:head />
<style type="text/css">
@import url(style.css);
</style>
</head>
<body>
<s:actionerror/>
<s:form action="saveOrUpdateUser" validate="true">

    <s:push value="user">
        <s:hidden name="id" />
        <s:textfield name="name" label="User Name"  required="true"/>
        <s:radio name="gender" label="Gender" list="{'Male','Female'}" />
        <s:select name="country" list="{'India','USA','UK'}" headerKey=""
            headerValue="Select" label="Select a country" />
        <s:textarea name="aboutYou" label="About You" />
        <s:checkbox name="mailingList"
            label="Would you like to join our mailing list?" />
        <s:submit />
    </s:push>
</s:form>

<s:if test="userList.size() > 0">
    <div class="content">
    <table class="userTable" cellpadding="5px">
        <tr class="even">
            <th>Name</th>
            <th>Gender</th>
            <th>Country</th>
            <th>About You</th>
            <th>Mailing List</th>
            <th>Edit</th>
            <th>Delete</th>
        </tr>
        <s:iterator value="userList" status="userStatus">
            <tr
                class="<s:if test="#userStatus.odd == true ">odd</s:if><s:else>even</s:else>">
                <td><s:property value="name" /></td>
                <td><s:property value="gender" /></td>
                <td><s:property value="country" /></td>
                <td><s:property value="aboutYou" /></td>
                <td><s:property value="mailingList" /></td>
                <td><s:url id="editURL" action="editUser">
                    <s:param name="id" value="%{id}"></s:param>
                </s:url> <s:a href="%{editURL}">Edit</s:a></td>
                <td><s:url id="deleteURL" action="deleteUser">
                    <s:param name="id" value="%{id}"></s:param>
                </s:url> <s:a href="%{deleteURL}">Delete</s:a></td>
            </tr>
        </s:iterator>
    </table>
    </div>
</s:if>
</body>
</html> 
```

这是我的行动课

```
package com.vaannila.web;

import java.util.ArrayList;
import java.util.List;

import javax.servlet.http.HttpServletRequest;

import org.apache.struts2.ServletActionContext;

import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ActionSupport;
import com.opensymphony.xwork2.ModelDriven;
import com.vaannila.dao.UserDAO;
import com.vaannila.domain.User;

public class UserAction extends ActionSupport implements ModelDriven<User> {

    private static final long serialVersionUID = -6659925652584240539L;

    private User user = new User();
    private List<User> userList = new ArrayList<User>();
    private UserDAO userDAO = new UserDAO();

    @Override
    public User getModel() {
        return user;
    }

    /**
     * To save or update user.
     * @return String
     */
    public String saveOrUpdate()
    {    
        System.out.println(user.getName());
        userDAO.saveOrUpdateUser(user);
        return SUCCESS;
    }

    /**
     * To list all users.
     * @return String
     */
    public String list()
    {
        userList = userDAO.listUser();
        return SUCCESS;
    }

    /**
     * To delete a user.
     * @return String
     */
    public String delete()
    {
        HttpServletRequest request = (HttpServletRequest) ActionContext.getContext().get(ServletActionContext.HTTP_REQUEST);
        userDAO.deleteUser(Long.parseLong(request.getParameter("id")));
        return SUCCESS;
    }

    /**
     * To list a single user by Id.
     * @return String
     */
    public String edit()
    {
        HttpServletRequest request = (HttpServletRequest) ActionContext.getContext().get(ServletActionContext.HTTP_REQUEST);
        user = userDAO.listUserById(Long.parseLong(request.getParameter("id")));
        return SUCCESS;
    }

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    public List<User> getUserList() {
        return userList;
    }

    public void setUserList(List<User> userList) {
        this.userList = userList;
    }

} 
```

这是我的豆

```
package com.vaannila.domain;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

import com.opensymphony.xwork2.validator.annotations.RequiredFieldValidator;
import com.opensymphony.xwork2.validator.annotations.ValidatorType;

@Entity
@Table(name="USER1")
public class User {

    private Long id;
    private String name;
    private String gender;
    private String country;
    private String aboutYou;
    private Boolean mailingList;

    @Id
    @GeneratedValue
    @Column(name="USER_ID") 
    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }

    @RequiredFieldValidator(type = ValidatorType.SIMPLE, fieldName = "name",    message = "User Name field is empty.")
    @Column(name="USER_NAME")
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

    @RequiredFieldValidator(type = ValidatorType.SIMPLE, fieldName = "gender",  message = "gender field is empty.")
    @Column(name="USER_GENDER")
    public String getGender() {
        return gender;
    }
    public void setGender(String gender) {
        this.gender = gender;
    }

    @Column(name="USER_COUNTRY")
    public String getCountry() {
        return country;
    }
    public void setCountry(String country) {
        this.country = country;
    }

    @Column(name="USER_ABOUT_YOU")
    public String getAboutYou() {
        return aboutYou;
    }
    public void setAboutYou(String aboutYou) {
        this.aboutYou = aboutYou;
    }

    @Column(name="USER_MAILING_LIST")
    public Boolean getMailingList() {
        return mailingList;
    }
    public void setMailingList(Boolean mailingList) {
        this.mailingList = mailingList;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:30:21.440

您需要在操作类中添加`@VisitorFieldValidator`注释以获取`user`getter。

```
@VisitorFieldValidator(appendPrefix = false)
public User getUser() {
  return user;
} 
```

请注意，如果您在 JSP 中使用不带前缀的字段名称，则需要设置`appendPrefix`为 false 。`user.`

此外，您可能不想`@RequiredStringValidator`在`@RequiredFieldValidator`您的 bean 中。

```
@RequiredStringValidator(message = "User Name field is empty.")
@Column(name="USER_NAME")
public String getName() {
  return name;
} 
```

# c# - 标签目标扩展器

> ID：15052160
> 
> 赞同：2
> 
> 时间：2013-02-24T13:26:12.363
> 
> 标签：c#, wpf

我有一个包含此内容的标签：（`Fol_Der`带有下划线的文件夹 d 用于 Alt 快捷方式）。

它的目标元素是一个扩展器。

我的目标是当用户按下`Alt`+时`D`，Expander 会展开。

然而，当它被按下时，我得到的只是一个虚线轮廓：

![虚线扩展器](../Images/9ac39aac19420ebf043c2e7036938511.png)

我怎样才能正确定位它以便它扩展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T13:55:39.673

定义一个命令

```
public static RoutedUICommand ExpandFolderCommand{ get; private set; }

 ExpandFolderCommand= new RoutedUICommand("ExpandFolderCommand", "ExpandFolderCommand", typeof(Commands),       new InputGestureCollection { 
                    new KeyGesture(Key.D, ModifierKeys.Alt, "Alt+D") }); 
```

然后在 Window/UserControl 中定义您的命令绑定

```
 <UserControl.CommandBindings>
          <CommandBinding Command="{x:Static ExpandFolderCommand}"
                          Executed="ExpandFolderCommand_Executed" 
                          CanExecute="ExpandFolderCommand_CanExecute"/>
 </UserControl.CommandBindings> 
```

ExpandFolderCommand_Executed 应该扩展您的扩展器

进一步阅读[命令概述](http://msdn.microsoft.com/en-us/library/ms752308.aspx)

# methods - “|”是什么意思 运营商呢？

> ID：15052164
> 
> 赞同：0
> 
> 时间：2013-02-24T13:26:43.630
> 
> 标签：methods, syntax, operators, operator-keyword

我不明白这个运营商。它有什么作用？

这是我在哪里找到它的示例：

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T13:28:07.920

这是按位或。在这种情况下，它对于组合位掩码很有用。这些标志是为设置了一个位的数字定义的，当您将它们组合在一起时，您最终会得到一个同时设置了两个位的数字。

示例：我不知道这些标志的确切值是什么，但让我们假设它们是：

```
#define GL_COLOR_BUFFER_BIT  0x01
#define GL_DEPTH_BUFFER_BIT  0x08 
```

如果你用二进制写出来，你会得到：

```
GL_COLOR_BUFFER_BIT = 00000001
GL_DEPTH_BUFFER_BIT = 00001000 
```

如果您将它们按位或在一起，则将输出中的位设置为 1，如果该位在`GL_COLOR_BUFFER_BIT` **OR** `GL_DEPTH_BUFFER_BIT`中设置，则：

```
GL_COLOR_BUFFER_BIT = 00000001
GL_DEPTH_BUFFER_BIT = 00001000
                    = 00001001 
```

所以你最终得到数字 0x09。

您正在调用的函数将检查您传入的数字，并根据设置的位，它知道您传入的标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T13:33:07.803

它是按位或运算符。按位或以如下所示的方式工作：

假设您有 2 个字节 a，b。

```
a = 0 0 1 1 0 1 0 1

b = 1 0 1 1 0 0 0 0 
```

位运算符适用于`bit level`. 发生的情况是它依次获取每个位并对其执行或操作。如果至少一个（或两个）位为 1，则结果字节中的相应位也将为 1。如果它们都为 0，则结​​果位也将为 0。

所以按位或在 a 和 b 上会这样做：

```
a = 0 0 1 1 0 1 0 1

b = 1 0 1 1 0 0 0 0

c = 1 0 1 1 0 1 0 1 
```

第一位 0 和 1。有一个 1，因此 c 中的位将为 1。第二位 0 和 0，因此下一个结果位将为 0。第三位均为 1。至少存在一个 1，因此 c 中的下一位将是 1...，依此类推。

希望它为你清除它。

PS。我在这里使用了虚拟位，它们绝不与`GL_COLOR_BUFFER_BIT`or使用的实际值相对应`GL_DEPTH_BUFFER_BIT`。

大多数按位运算符用于对值强制使用掩码或将两个值组合在一起。

`|`将两者结合在一起 `&`将强制使用掩码

让我们假设你被赋予了一个值并且你想让它看起来像这样（我们将使用它`&`来强制执行该掩码）。

```
0 0 0 1 1 1 1 0 
```

0 对应于不应有值的位置，1 对应于您感兴趣并想要提取的位。

```
 a = 1 0 1 0 0 1 1 0
mask = 0 0 0 1 1 1 1 0 
```

现在 a 中高于 0 的所有位都将被丢弃，结果在这些位中将有 0，因为 for 和 & 您需要两个位都为 1 才能产生位 1。

如果掩码中有 1，则结果中可能会出现 1。因此，在每一位上使用 & 最终都会得到这个值。

```
result = 0 0 0 0 0 1 1 0 
```

如果您仔细观察，结果中与掩码中的 1 位于相同位置的 4 位只是从 a 中移动。所以它真正做的是删除掩码为 0 的位并保留为 1 的位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T13:41:09.580

这在一定程度上取决于您使用的语言，但在许多情况下，这是[按位或](https://en.wikipedia.org/wiki/Bitwise_operation#OR). 这通常用于将几个编码为位的标志传递给函数。例如，如果您有两个标志

```
const char FLAG_1 = 0x01;
const char FLAG_2 = 0x02; 
```

然后`FLAG_1 | FLAG_2`是`0x03`。对于按位不相交的位，这相当于加法，起初可能会令人困惑。在通话中，位是 or'd

```
func( FLAG_1 | FLAG_2) // set both FLAG_1 and FLAG_2 
```

然后，该函数`func`可以使用[按位和](https://en.wikipedia.org/wiki/Bitwise_operation#AND)分别测试位：

```
void func( char flags ) {
     if( flag & FLAG_1 ) { // test for FLAG_1
     }
     if( flag & FLAG_1 ) { // test for FLAG_2
     }
} 
```

# google-chrome-extension - 如何防止内联 JavaScript 执行？（Chrome 扩展）

> ID：15052165
> 
> 赞同：3
> 
> 时间：2013-02-24T13:26:44.437
> 
> 标签：google-chrome-extension

我正在制作一个 Chrome 扩展程序来阻止来自某些网站的一些脚本。对于外部脚本，我可以使用 beforeload 事件来阻止它们。

但是如何阻止内联脚本？

我需要运行一些内容脚本，所以我想禁用 JavaScript 对我来说不是一个选择。

# openssl - PKCS#11 引擎在 centos 6 上的 openssl 中不起作用

> ID：15052171
> 
> 赞同：5
> 
> 时间：2013-02-24T13:27:04.403
> 
> 标签：openssl, centos, pkcs#11, centos6

我想向 OpenSSL 添加一个 PKCS#11 引擎，并且我使用 CentOS 6.2。我实际上加载引擎没有问题，如下所示：

```
[root@localhost 05:06:18  openssl-1.0.1e]$ openssl engine -t dynamic -pre SO_PATH:/usr/lib/openssl/engines/engine_pkcs11.so -pre ID:pkcs11 -pre LIST_ADD:1 -pre LOAD -pre MODULE_PATH:/usr/local/lib/libsst.so
(dynamic) Dynamic engine loading support
[Success]: SO_PATH:/usr/lib/openssl/engines/engine_pkcs11.so
[Success]: ID:pkcs11
[Success]: LIST_ADD:1
[Success]: LOAD
[Success]: MODULE_PATH:/usr/local/lib/libsst.so
Loaded: (pkcs11) pkcs11 engine
    [ available ] 
```

但是当我使用 OpenSSL 选项查看加载的引擎时，pkcs11 引擎不在列表中：

```
[root@localhost 05:19:58  openssl-1.0.1e]$ openssl engine -v -t 
(aesni) Intel AES-NI engine (no-aesni)
     [ available ]
(dynamic) Dynamic engine loading support
     [ unavailable ]
     SO_PATH, NO_VCHECK, ID, LIST_ADD, DIR_LOAD, DIR_ADD, LOAD 
```

当我想使用引擎时，我看到了这个错误：

```
[root@localhost 05:20:04  openssl-1.0.1e]$ openssl genrsa -engine pkcs11 -out priv.key 1024
invalid engine "pkcs11"
3078776556:error:25066067:DSO support routines:DLFCN_LOAD:could not load the shared library:dso_dlfcn.c:185:filename(/usr/lib/openssl/engines/libpkcs11.so):   /usr/lib/openssl/engines/libpkcs11.so: cannot open shared object file: No such file or   directory
3078776556:error:25070067:DSO support routines:DSO_load:could not load the shared library:dso_lib.c:244:
3078776556:error:260B6084:engine routines:DYNAMIC_LOAD:dso not found:eng_dyn.c:450:
3078776556:error:2606A074:engine routines:ENGINE_by_id:no such engine:eng_list.c:417:id=pkcs11
3078776556:error:25066067:DSO support routines:DLFCN_LOAD:could not load the shared library:dso_dlfcn.c:185:filename(libpkcs11.so): libpkcs11.so: cannot open shared object file: No such file or directory
3078776556:error:25070067:DSO support routines:DSO_load:could not load the shared library:dso_lib.c:244:
3078776556:error:260B6084:engine routines:DYNAMIC_LOAD:dso not found:eng_dyn.c:450:
Generating RSA private key, 1024 bit long modulus
.......++++++
.......++++++
e is 65537 (0x10001) 
```

我无法弄清楚问题可能是什么......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T13:05:12.987

这个问题是因为 OpenSSL 只加载了一次库，之后它就不会保持状态，所以如果我们想保持状态，我们必须使用以下命令：

```
[root@localhost 04:58:25  home]$ openssl
OpenSSL> engine -t dynamic -pre SO_PATH:/usr/lib/openssl/engines/engine_pkcs11.so -pre ID:pkcs11 -pre LIST_ADD:1 -pre LOAD -pre MODULE_PATH:/usr/local/lib/libsst.so
 (dynamic) Dynamic engine loading support
 [Success]: SO_PATH:/usr/lib/openssl/engines/engine_pkcs11.so
 [Success]: ID:pkcs11
 [Success]: LIST_ADD:1
 [Success]: LOAD
 [Success]: MODULE_PATH:/usr/local/lib/libsst.so
 Loaded: (pkcs11) pkcs11 engine
      [ available ]
OpenSSL> engine
 (aesni) Intel AES-NI engine (no-aesni)
 (dynamic) Dynamic engine loading support
 (pkcs11) pkcs11 engine
OpenSSL> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-11T12:52:50.477

事实上，正如上面的评论之一所提到的，为了重复使用，将引擎的参数包含在相应的 OpenSSL 配置文件中会更方便。对于给定的示例，您将添加该行

```
openssl_conf  = openssl_def 
```

在第一部分之前（以“[”字符开头）并在文件末尾添加一个标记为 [openssl_def] 的部分，为简单起见：

```
[openssl_def]
engines = engine_section

[engine_section]
pkcs11 = pkcs11_section

[pkcs11_section] 
engine_id = pkcs11
dynamic_path = /usr/lib/openssl/engines/engine_pkcs11.so
MODULE_PATH = /usr/local/lib/libsst.so
init = 0
# adapt as desired:  PIN = 1234 
```

# rebol - 对于 rebol3：想要开始使用 linux 上的原生扩展。我如何写一个你好世界？

> ID：15052183
> 
> 赞同：2
> 
> 时间：2013-02-24T13:27:54.653
> 
> 标签：rebol, rebol3

我知道如何编写大约 100 行 C，但我不知道如何读取/组织像 Rebol 这样的较大源代码。某处是关于 hostkit 和 dll 的教程，但似乎 R3 现在是静态链接的。所以我不知道在哪里看。

我将如何编写一个获取值并返回另一个值的本机？把它放在源代码的什么地方？要遵守什么，比如告诉 GC 我在 C 中创建了一些东西？

另外，如何将 R3 嵌入到其他程序中，以便从 Python 或 Node 中调用它？我要求稍后提供 Python/Node 部分。但是我的 learning-main 应该以类似的方式访问 R3。表示dll。在这样的 ffi 中是否有一些用于启动/关闭等的典型钩子？

[编辑：忘了提：它适用于 Rebol 3。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:14:21.970

这是两个问题。:-)

* * *

关于第一个（关于添加本机）……最好将其详细说明为 Wiki 上的开发人员文档。[从用户的角度来看， rebol](/questions/tagged/rebol "显示标记为“rebo​​l”的问题")标签中的问题通常应该更多地与语言有关。关于源代码本身的答案通常会很长，而且实际上只有少数人可以回答或关心答案（StackOverflow 称之为“过于本地化”）。如果有的话，到那时它最终将更像是一个[c](/questions/tagged/c "显示标记为“c”的问题")问题。

因此，告诉开发人员齐心协力编写文档并将其放在一个集中组织的地方可能是最好的主意！:-P 但实际上我自己也尝试过。我添加了一个 set-env native 来从解释器中设置环境变量，您可以在 GitHub 中查看执行此操作所需的差异以了解一些想法。

[添加 SET-ENV，调整主机 api 以处理环境字符串](https://github.com/rebol/r3/commit/9f39818a2605867994fd5ab6db089ef669fc8535)

要记住的重要一点是，当您触摸某些文件时，您必须运行**make prep**，它会自动执行大量扫描和代码生成。添加原生是你肯定必须做的事情之一，每次你改变一个基本的界面。

* * *

至于您的第二个问题，这更多是关于解释器嵌入的面向用户的问题，首先要看的地方之一就是简单的[REPL](http://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop)是如何实现的。目前主存储库中有两个版本，一个用于 Posix，一个用于 Windows。

[https://github.com/rebol/r3/blob/master/src/os/host-main.c](https://github.com/rebol/r3/blob/master/src/os/host-main.c)

所以一根绳子进去，一根绳子出来。但是还有更复杂的交互形式，你可以从**reb-host.h获得它们，其中包括来自**[src/include 的](https://github.com/rebol/r3/blob/master/src/include/)这些文件

```
#include "reb-config.h"

#include "reb-c.h"
#include "reb-ext.h"        // includes reb-defs.h
#include "reb-args.h"
#include "reb-device.h"
#include "reb-file.h"
#include "reb-event.h"
#include "reb-evtypes.h"
#include "reb-net.h"
#include "reb-filereq.h"

#include "reb-gob.h"
#include "reb-lib.h" 
```

因此，您可以查看在 12 月 12 日开源时存在的 API 文件。事情将不断发展，并希望得到更好的记录。但就目前而言，这似乎是可用的。您可以将主机套件链接为共享/DLL 或静态库，这取决于您的构建设置和您使用的编译器。

# java - Amazon AWS 的会话仿射负载均衡器如何知道会话 cookie 已过期？

> ID：15052189
> 
> 赞同：4
> 
> 时间：2013-02-24T13:28:26.857
> 
> 标签：java, amazon-ec2, session-cookies, load-balancing

如果我使用具有应用程序控制的会话粘性的 HTTP 负载均衡器（在本例中为 Amazon 的 AWS），负载均衡器显然必须在映射中记住所有会话 cookie 及其目标实例。因此，此全局映射将/必须保持“会话 cookie 到实例”的关系。

如果 Web 应用用户决定关闭浏览器，会话超时后会话将在应用服务器上静默终止。

这反过来意味着负载均衡器在其全局映射中仍然具有“会话cookie 到实例”的关系。由于此映射现在无用并且会话 cookie 没有到期日期，因此它不能但应该被垃圾收集（以释放资源）。

我的问题是：

1.  一般来说，负载均衡器如何在不耗尽资源的情况下处理这种情况？

2.  特别是如何在不耗尽资源的情况下在这种情况下处理 Amazon AWS 负载均衡器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T01:11:57.193

通常，应用程序感知（第 7 层）LB*不会*维护（大）会话映射。它可能：

1.  将自己的 cookie 注入到客户端的第一个响应中（客户端将在后续请求中重新发送该 cookie，因此 LB 可以确定目标 Web 服务器）

2.  重写众所周知的会话 cookie（例如 JSESSIONID），例如，向其附加标识目标 Web 服务器的信息（LB 会在随后的请求中呈现给 Web 服务器之前将其删除）

关键是LB不维护会话到目标映射。该信息位于每个客户端的 cookie 中。

我相信 AWS 会做到 #1（使用名为 AWSELB 的 cookie）。

# java - 如何在 JPA 查询中选择最佳匹配

> ID：15052196
> 
> 赞同：1
> 
> 时间：2013-02-24T13:29:43.190
> 
> 标签：java, sql, jpa, persistence, jpql

以下查询将返回`like`匹配的第一个项目（实际上是任何旧项目）。

```
TypeQuery<Company> query = em.createQuery(
   "select c from Company c where c.name like ?1", Company.class);
query.setMaxResults(1);
query.setParameter(1, "%" + name + "%");
result = query.getSingleResult(); 
```

但是，我希望**最佳**匹配显示为我的单一结果。
这里 best 表示与给定的 差异最小的匹配`name`。我可以对这个查询应用
什么样的方法来实现这一点？`order by`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:56:29.537

如果您需要这样的搜索，也许您可​​以将 lucene 与 hibernate 一起使用？

请参阅文档[http://docs.jboss.org/hibernate/search/3.3/reference/en-US/html_single/#search-query-lucene-api](http://docs.jboss.org/hibernate/search/3.3/reference/en-US/html_single/#search-query-lucene-api)

我想这将是你所需要的。

另请查看[https://groups.google.com/forum/?fromgroups=#!topic/ravendb/-L0LMAScJnA](https://groups.google.com/forum/?fromgroups=#!topic/ravendb/-L0LMAScJnA)

# session - 超链接和地址栏浏览之间的区别？（关于会话的问题）

> ID：15052199
> 
> 赞同：0
> 
> 时间：2013-02-24T13:29:46.847
> 
> 标签：session, redirect, hyperlink, header, destroy

我有一个关于会话的问题。为了简短起见，我有一个登录页面，它将电子邮件的 POST 值存储在会话变量中。我使用这个会话来检查用户是否有进入特定页面的权限。我还有一个注销页面，它会破坏会话并将用户重定向到登录页面。这就是我的问题发生的地方。当我通过在浏览器的地址栏中输入 URL 进入我的注销页面时，会话被破坏并且我被成功重定向回登录页面。但是，当我使用 href 标记创建指向注销页面的链接并单击该链接时，我确实会被重定向，但是会话不会被破坏。这真的让我很困惑。我确定在任何页面上都没有忘记 session_start() 等。有没有人有任何想法？

我想附上一些代码会有所帮助：

基本上，这是我的注销页面：

```
<?php
session_start();
session_unset();
session_destroy();
header("Location: http://www.example.com/login");
?> 
```

这是您可以转到注销页面的页面中的代码的一部分：

```
<a href="http://example.com/logout/index.php">Click here to logout!</a> 
```

如果您需要更多代码或任何内容，请告诉我。

提前感谢。

/C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:46:50.430

这是我使用的代码，我所有的注销应用程序。

```
session_start();
session_destroy();
header("Location: index.php"); 
```

这是销毁会话的最简单的代码。但为什么你的代码不起作用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:14:32.807

您正在从`www`to移动，`non-www`因此您的会话在其中一个中被终止，而不是另一个。只需使用其中一个`www`或`non-www`两者都不要。

# parameters - 在 Jasper 报告中重复数据？

> ID：15052200
> 
> 赞同：0
> 
> 时间：2013-02-24T13:29:55.883
> 
> 标签：parameters, report, barcode

我对 Jasper Reports 有一点问题。我正在使用参数设计此特定报告以生成条形码。当它运行时，将要求用户输入一个单词或其他内容，然后报告将使用该文本或数字生成一个条形码。现在我想做的是尽可能多地在同一页面中复制该条形码。我该怎么做？任何帮助都感激不尽。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T08:31:25.060

1.  首先，你可以这样设计，你的*.jasper文件中有两种元素。一种是一个文件，用户可以写条形码的数量。另一种是*.jasper中的条形码，在用户输入之前所有的条形码都是隐藏的号码。

2.其次。在您的代码中，根据用户输入的号码显示条形码。

3.玩得开心！

# c# - 使用 iTExtsharp 将表格添加到现有 PDF

> ID：15052202
> 
> 赞同：7
> 
> 时间：2013-02-24T13:30:22.730
> 
> 标签：c#, asp.net, pdf, pdf-generation, itextsharp

我有一个 PDF，其中有一个表是动态的，我想在我现有的 PDF 中动态地将另一个表添加到该表中。

有什么方法可以在现有表格（不在文档末尾）完成的特定位置添加现有 PDF 中的表格，然后我想添加我的表格。

我该如何添加？请给我一些好的方法。

如下图所示。

![在此处输入图像描述](../Images/85656368f3cf0b168faab05ec36ecfbb.png)

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T08:19:33.140

到目前为止，最简单的方法是在所需位置创建一个带有所需表格的新 PDF，然后将其印在现有 PDF 上。这可以使用（例如）`PdfStamper`类在代码中完成，但也有诸如`pdftk`和许多其他工具之类的独立工具。不要将其视为“编辑” PDF，将其视为在原始文件之上添加新内容。

```
pdftk original.pdf stamp newtable.pdf output combined.pdf 
```

@mkl 的原始问题解决了真正有趣且可能困难的部分-您如何确定新表的正确位置。如果你能想出一个几何规则，那么你的状态就很好。如果这涉及对原始文件的任何解析，您应该知道，像确定现有表中的行数这样（看似）简单的事情有时可能非常困难。很有可能，在内容流中埋藏着一个 html`<table>`标签之类的注释。拥有一个实际 PDF 的示例将非常有帮助。PDF 的图像不是一回事。

为您提供一些背景信息，解析 PDF 的*布局*很容易，这就是 PDF 阅读器所做的。解析 PDF 的*内容*是完全不同的，而且要困难得多。例如，您发布的 PDF 图像可以从上到下绘制，或者可以先绘制页眉和页脚，然后是所有粗体项目，然后是纯文本。仅仅因为两个事物在物理布局中彼此相邻并不意味着它们在文件结构、对象树或内容流中彼此相邻。它是矢量图形而不是文本文件或位图。除非创建 PDF 的软件专门提供有关如何编辑内容的线索，否则 PDF 并非设计为可编辑的。有很多东西看起来像*应该*很容易，但是一旦您了解了 PDF 的构建方式，就会发现它很困难。我这样说并不是要劝阻你，只是为了让你体会到这项任务的艰巨性。如果您可以追溯创建此 PDF 的源文档，我保证您将获得更大的成功，减少挫败感。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T13:37:23.627

```
using iTextSharp.text;
using iTextSharp.text.pdf;

/// Function which will create pdf document and save in the server folder

private void ExportDataToPDFTable()
    {
      Document doc = new Document(iTextSharp.text.PageSize.LETTER, 10, 10, 42, 35);
         try
          {
           string pdfFilePath = Server.MapPath(".") + "/pdf/myPdf.pdf";
           //Create Document class object and set its size to letter and give space left, right, Top, Bottom Margin
           PdfWriter wri = PdfWriter.GetInstance(doc, new FileStream(pdfFilePath, FileMode.Create));

           doc.Open();//Open Document to write

           Font font8 = FontFactory.GetFont("ARIAL", 7);

           //Write some content
            Paragraph paragraph = new Paragraph("Using ITextsharp I am going to show how to create simple table in PDF document ");

            DataTable dt = GetDataTable();

            if (dt != null)
                {
                 //Craete instance of the pdf table and set the number of column in that table
                 PdfPTable PdfTable = new PdfPTable(dt.Columns.Count);
                 PdfPCell PdfPCell = null;

                 //Add Header of the pdf table
                 PdfPCell = new PdfPCell(new Phrase(new Chunk("ID", font8)));
                 PdfTable.AddCell(PdfPCell);

                 PdfPCell = new PdfPCell(new Phrase(new Chunk("Name", font8)));
                 PdfTable.AddCell(PdfPCell);

                 //How add the data from datatable to pdf table
                 for (int rows = 0; rows < dt.Rows.Count; rows++)
                    {
                     for (int column = 0; column < dt.Columns.Count; column++)
                         {
                           PdfPCell = new PdfPCell(new Phrase(new Chunk(dt.Rows[rows][column].ToString(), font8)));
                            PdfTable.AddCell(PdfPCell);
                            }
                        }

                        PdfTable.SpacingBefore = 15f; // Give some space after the text or it may overlap the table

                        doc.Add(paragraph);// add paragraph to the document
                        doc.Add(PdfTable); // add pdf table to the document

                    }

                }
                catch (DocumentException docEx)
                {
                    //handle pdf document exception if any
                }
                catch (IOException ioEx)
                {
                    // handle IO exception
                }
                catch (Exception ex)
                {
                    // ahndle other exception if occurs
                }
                finally
                {
                    //Close document and writer
                    doc.Close();

       }
 } 
```

样本数据表：

```
private DataTable GetDataTable()
    {
        // Create an object of DataTable class
        DataTable dataTable = new DataTable("MyDataTable");//Create ID DataColumn
        DataColumn dataColumn_ID = new DataColumn("ID", typeof(Int32));
        dataTable.Columns.Add(dataColumn_ID);//Create another DataColumn Name
        DataColumn dataColumn_Name = new DataColumn("Name", typeof(string));
        dataTable.Columns.Add(dataColumn_Name);
        //Now Add some row to newly created dataTable
        DataRow dataRow;for (int i = 0; i < 5; i++)
        {
            dataRow = dataTable.NewRow();
            // Important you have create New row
            dataRow["ID"] = i;dataRow["Name"] = "Some Text " + i.ToString();
            dataTable.Rows.Add(dataRow);
        }
        dataTable.AcceptChanges();
        return dataTable;
    } 
```

# java - 如何更好地测试具有公共队列的多线程程序？

> ID：15052205
> 
> 赞同：4
> 
> 时间：2013-02-24T13:30:44.590
> 
> 标签：java, multithreading, testing, queue

当需要测试这个程序时，应该使用哪种方式更好。
首先`askUserPathAndWord()`要求用户输入`path`和`whatFind`。我们有两个线程：

*   第一个线程扫描文件夹，如果找到可读文件`put()`，则将其放入队列中。
*   `take()`队列中的第二个线程s 并`whatFind`在此文件中查找。如果搜索成功，它将输出到控制台该文件的路径和单词的频率。

这是与多线程工作的集成依赖。哪个变体能够更好地测试这个程序 - EasyMock 的 Junit？我阅读了一些关于 EasyMock 的教程，但我不知道在哪些情况下使用它更好。

**代码：**

```
class FolderScan implements Runnable {

    private String path;
    private BlockingQueue<File> queue;
    private CountDownLatch latch;
    private File endOfWorkFile;

    FolderScan(String path, BlockingQueue<File> queue, CountDownLatch latch,
            File endOfWorkFile) {
        this.path = path;
        this.queue = queue;
        this.latch = latch;
        this.endOfWorkFile = endOfWorkFile;
    }

    public FolderScan() {
    }

    @Override
    public void run() {
        findFiles(path);
        queue.add(endOfWorkFile);
        latch.countDown();
    }

    private void findFiles(String path) {

        try {
            File root = new File(path);
            File[] list = root.listFiles();
            for (File currentFile : list) {
                String s = currentFile.getName().toLowerCase();
                if (currentFile.isDirectory()) {
                    findFiles(currentFile.getAbsolutePath());
                } else {
                    if (s.matches("^.*?\\.(txt|pdf|doc|docx|html|htm|xml|djvu|rar|rtf)$")) {
                        queue.put(currentFile);
                    }
                }
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

    }
}

public class FileScan implements Runnable {

    private String whatFind;
    private BlockingQueue<File> queue;
    private CountDownLatch latch;
    private File endOfWorkFile;

    public FileScan(String whatFind, BlockingQueue<File> queue,
            CountDownLatch latch, File endOfWorkFile) {
        this.whatFind = whatFind;
        this.queue = queue;
        this.latch = latch;
        this.endOfWorkFile = endOfWorkFile;
    }

    public FileScan() {
    }

    @Override
    public void run() {

        while (true) {
            try {
                File file;
                file = queue.take();

                if (file == endOfWorkFile) {
                    break;
                }

                scan(file);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

        latch.countDown();
    }

    private void scan(File file) {
        Scanner scanner = null;
        int matches = 0;

        try {
            scanner = new Scanner(file);
        } catch (FileNotFoundException e) {
            System.out.println("File Not Found.");
            e.printStackTrace();
        }

        while (scanner.hasNext())
            if (scanner.next().equals(whatFind)) {
                matches++;
            }

        if (matches > 0) {
            String myStr = String.format(
                    "File: %s - and the number of matches " + "is: %d",
                    file.getAbsolutePath(), matches);
            System.out.println(myStr);
        }
    }

    public void askUserPathAndWord() {

        BufferedReader bufferedReader = new BufferedReader(
                new InputStreamReader(System.in));
        String path;
        String whatFind;
        BlockingQueue<File> queue = new LinkedBlockingQueue<File>();

        try {
            System.out.println("Please, enter a Path and Word"
                    + "(which you want to find):");
            System.out.println("Please enter a Path:");
            path = bufferedReader.readLine();
            System.out.println("Please enter a Word:");
            whatFind = bufferedReader.readLine();

            if (path != null && whatFind != null) {

                File endOfWorkFile = new File("GameOver.tmp");
                CountDownLatch latch = new CountDownLatch(2);

                FolderScan folderScan = new FolderScan(path, queue, latch,
                        endOfWorkFile);
                FileScan fileScan = new FileScan(whatFind, queue, latch,
                        endOfWorkFile);

                Executor executor = Executors.newCachedThreadPool();
                executor.execute(folderScan);
                executor.execute(fileScan);

                latch.await();
                System.out.println("Thank you!");
            } else {
                System.out.println("You did not enter anything");
            }

        } catch (IOException | RuntimeException e) {
            System.out.println("Wrong input!");
            e.printStackTrace();
        } catch (InterruptedException e) {
            System.out.println("Interrupted.");
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {  
        new FileScan().askUserPathAndWord();
    }
} 
```

**问题：**

*   在这种情况下，哪种测试的覆盖率最好？
*   如何更好地测试两种变体中的合同义务？
*   如果答案是`EasyMock`，我们应该如何正确地做到这一点？
*   如果`Junit`，我们如何测试`void`方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:43:10.760

*JUnit 还是 EasyMock？*- 答案是，两者都有！一个是单元测试框架，另一个允许模拟对象，这使您能够编写更好的测试。因此，使用 JUnit**加上**任何模拟框架（您建议`EasyMock`，我使用`Mockito`或有第三个称为`jMock`）是一个好主意。

*哪种测试的覆盖率最好？*- 模拟使您可以专注于要进行单元测试的代码区域，因此您最终会比以前测试更多的代码。模拟执行繁重操作的代码（如写入数据库或从文件系统读取 - 就像你的那样）特别有用。因此，将 EasyMock 与 JUnit 一起使用应该比单独使用 JUnit 提供更好的覆盖率（和更好的测试）。

*如何更好地测试两种变体中的合同义务？*- 确保您的所有公共方法都经过测试。然后，在每次测试结束时彻底断言并验证您的期望。

*如果答案是 EasyMock，我们应该如何正确地做到这一点？*- 使用该`verify`方法检查您的模拟对象在测试期间是否被正确调用。

*如果是 Junit，我们如何测试 void 方法？*- 您需要以其他方式断言结果符合预期。也许您将一个对象作为参数传递给 void 方法，或者也许还有另一种获取结果的方法（例如 getter）。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T15:55:59.610

当您考虑测试这个程序时，请记住单元测试是什么。来自[Wikipedia](http://en.wikipedia.org/wiki/Unit_testing)，“单元测试是一种方法，通过该方法可以测试各个源代码单元......以确定它们是否适合使用”。

还请记住，您有点跳入深渊，因为测试多线程程序很困难。您应该尽可能地从功能测试中消除线程交互的复杂性。

看看你的程序，你已经有了很好的封装和关注点分离，所以你正在顺利进行。我的策略是`*Scan`独立于线程测试这两个对象。为此，请牢记他们的角色是什么。我会说以下内容：

*   `FolderScan`遍历目录结构，查找特定类型的文件，并将通过过滤器的文件放入队列。当它耗尽目录结构时，它将一个特定的文件放入队列中，倒计时一个锁存器，然后退出。
*   `FileScan`使用一个文件队列，对它们执行操作，并将输出打印到控制台。当它碰到一个特定的文件时，它会倒计时一个锁存器并退出。

由于您可能已经拥有或多或少的工作代码，因此当您对其进行改进测试时（而不是在编写代码时编写它们，这是可取的），您希望尽可能少地更改源代码以通过测试. 之后，您可能希望重构代码，您的测试将使您有信心这样做。

***文件夹扫描测试***

然后，作为第一步，为`FolderScan`. 您可以编写多个测试，但从高层次来看，它们中的每一个都应使用一些文件填充目录结构。我至少会测试这些案例中的每一个：

1.  包含通过过滤器的文件的单个文件夹。
2.  包含未通过过滤器的文件的单个文件夹。
3.  一个嵌套文件夹，每个文件夹中都有一个文件。

测试越精细越好。每个测试都简单地创建一个新的实例`FolderScan`，给它你定义的指向给定文件夹的参数。调用 run()，并确保：

1.  队列包含`File`您期望的对象。
2.  `CountDownLatch`已减少。
3.  队列中的最后一个元素是 'trigger' `File`。

***文件扫描测试***

在高层次上，现在应该明确对此的测试：创建一些文本`File`对象，用它们和标记填充队列，并将它们传递给新的 FileScan 对象。同样，越细越好，所以至少：

1.  具有匹配字符串的文件
2.  没有匹配字符串的文件
3.  多个文件

但是这个类有一个问题，那就是经典的“如何测试单例”问题。这个对象的结果实际上是通过管道传送到的`System.out`，你必须以某种方式连接到它来检查结果。作为第一遍，我建议重构构造函数以传入`PrintStream`. 在生产中你会传递`System.out`，在测试中你会传递一些你可以检查的东西：`new PrintStream(new ByteArrayOutputStream())` 你可以检查内容，或者更好的是，一个模拟。

最后，每个测试都应该检查：

1.  队列被清空。
2.  `CountDownLatch`已减少
3.  指定`PrintStream`的已写入预期内容。

然后，您应该对所宣传`FileScan`的作品和作品充满信心。`FolderScan`

*** 测试 askUserPathAndWord ***

我没有看到任何直接的方法来测试这个函数/类。它违反了[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)，并且干了太多事情。我会将以下职责提取到新方法或类中：

*   询问用户单词和路径
*   给定一个词，`FileScan`用正确的参数创建一个（工厂）
*   给定路径，`FolderScan`使用正确的参数创建一个（工厂）
*   给定两个runnables和一个latch，创建一个`ExecutorService`，将它们排队，然后等待latch

然后你可以独立地测试它们。

*** 下一步 ***

拥有这些测试的好处之一是，一旦你拥有它们，你就可以自由地重构，并且确信你没有破坏任何东西。例如，您可以查看 to`Callable`而不是`Runnable`，它可以让您处理`Future`引用，从 中删除输出参数`FolderScan`，并`CountDownLatch`完全删除。

祝测试愉快！

# python - 找不到 Python pip 安装模块。如何将python链接到pip位置？

> ID：15052206
> 
> 赞同：52
> 
> 时间：2013-02-24T13:30:45.907
> 
> 标签：python, module, path, installation, homebrew

我是新手，我的项目需要 pySerial 和 feedparser 模块。我在跑山狮。

我按照以下教程进行操作，以便升级到 python 2.7.3，然后使用上述模块。

[http://hackercodex.com/guide/python-virtualenv-on-mac-osx-mountain-lion-10.8/](http://hackercodex.com/guide/python-virtualenv-on-mac-osx-mountain-lion-10.8/)

我按照本教程进行操作，直到我安装了 pip。而不是安装 Virtualenv。我使用以下命令安装 pySerial 和 feedparser

```
$ pip install pySerial
Requirement already satisfied (use --upgrade to upgrade): pySerial in /Library/Python/2.7/site-packages
Cleaning up... 
```

我假设这已经存在并检查了它。Python 似乎可以很好地导入它。我的 python 版本已经升级到 2.7.3 顺便说一句，因为我使用自制软件安装它，如教程中所述。

然后我尝试安装 feedparser

```
$ pip install feedparser
Requirement already satisfied (use --upgrade to upgrade): feedparser in /usr/local/lib/python2.7/site-packages
Cleaning up... 
```

注意它在 usr/local/lib 中的 site-packages 目录中的位置。

我所有的 pip 安装都安装在该目录中，但是当我尝试导入它们时，python 似乎没有拾取它们。

如何设置路径，以便 python 也可以在此处以及核心目录中查找？

对你的帮助表示感谢。

我尝试在这里寻找答案： [Pip installs but module is not found](https://stackoverflow.com/questions/10569846/pip-installs-but-module-is-not-found) [为什么我无法在使用 pip 和/或 easy_install 安装后使用 python 2.7 在 mac 上导入 beautifulsoup？](https://stackoverflow.com/questions/13891934/why-i-cant-import-beautifulsoup-on-mac-using-python-2-7-after-installing-it-by)

但他们俩都和我一样。我不明白为什么会这样，因为我用以下内容编辑了我的 bash_profile

```
# Set architecture flags
export ARCHFLAGS="-arch x86_64"
# Ensure user-installed binaries take precedence
export PATH=/usr/local/share/python:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin
# Load .bashrc if it exists
test -f ~/.bashrc && source ~/.bashrc 
```

然后安装 homebrew，然后通过 homebrew 安装 python 2.7.3（2.7.3 现在正在我的机器上运行）

我认为所有 pip 安装都会正确链接？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-24T13:49:25.567

作为一种快速解决方法，并假设您在类似 bash 的终端 (Linux/OSX) 上，您可以尝试导出 PYTHONPATH 环境变量：

```
export PYTHONPATH="${PYTHONPATH}:/usr/local/lib/python2.7/site-packages:/usr/lib/python2.7/site-packages" 
```

对于 Python 2.7

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-05-14T16:48:24.977

这是我在安装了多个版本的 Python 后长时间遇到 pip 问题后学到的东西（尤其适用于可能使用 brew 安装 python blends 的 OS X 用户。）

我假设大多数 python 开发人员在他们的脚本开头确实有：

```
#!/bin/env python 
```

您可能会惊讶地发现，这不一定与您从命令行运行的 python 相同`>python`

为确保您使用正确的 pip 实例为您的 python 解释器安装包，您需要运行以下命令：

```
>/bin/env python -m pip install --upgrade mymodule 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-09-13T22:09:41.940

我也有这个问题。我注意到 /usr/local/lib/python2.7/dist-packages/ 下的所有子目录和文件都没有 group 和 other 的读写权限，它们归 root 所有。这意味着只有 root 用户可以访问它们，因此任何尝试运行使用这些模块的 Python 脚本的用户都会遇到导入错误：

```
$ python
Python 2.7.3 (default, Apr 10 2013, 06:20:15) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import selenium
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named selenium
>>> 
```

我授予了对文件的读取权限以及对组和其他子目录的搜索权限，如下所示：

```
$ sudo chmod -R go+rX /usr/local/lib/python2.7/dist-packages 
```

这为我解决了问题：

```
$ python
Python 2.7.3 (default, Apr 10 2013, 06:20:15) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import selenium
>>> 
```

我使用 pip 安装了这些软件包（使用 sudo 以 root 身份运行）。我不确定为什么在没有授予读取/搜索权限的情况下安装它们。这对我来说似乎是 pip 中的一个错误，或者可能是包配置中的一个错误，但我对 Python 及其模块打包不是很熟悉，所以我不确定。FWIW， dist-packages 下的所有软件包都有这个问题。无论如何，希望这会有所帮助。

问候。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-03-03T20:35:12.713

没有其他解决方案对我有用，所以我尝试了：

```
pip uninstall <module> && pip install <module> 
```

这为我解决了这个问题。你的旅费可能会改变。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-07-30T00:29:25.657

**为了任何人都在 Windows 环境中使用 Visual Studio：**

我意识到当我运行 pip install 时我可以看到我的模块已安装

```
py pip install [moduleName] 
py pip list 
```

然而，在 Visual Studio 中调试时出现“找不到模块”。`import [moduleName]`奇怪的是，当我在 powershell 中运行解释器时，我成功运行了。

原因：

visual studio 在以下位置使用了*错误*的解释器： `C:\Users\[username]\AppData\Local\Programs\Python\Python37\`

我真正想要的是 Visual Studio 使用我为我的项目设置的 virtualenv。为此，请在“解决方案资源管理器”中右键单击 Python 环境，选择添加虚拟环境...，然后选择您创建虚拟环境的文件夹。 [![在此处输入图像描述](../Images/9d157c90a8ebb617d4bc6e0f3712d5aa.png)](https://i.stack.imgur.com/RvWcg.png) 然后，在项目设置下的常规选项卡下，在下拉列表中选择您的虚拟环境。

[![在此处输入图像描述](../Images/f2e565979463849aba301947e0e2b9c6.png)](https://i.stack.imgur.com/k5IEA.png)

现在视觉工作室应该使用相同的解释器，一切都应该很好！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-04-14T08:49:56.237

如果您的`python`和`pip`二进制文件来自不同的版本，则使用 pip 安装的模块将无法用于 python。

解决步骤：

1.  使用默认环境打开一个新终端并找到 和 的二进制`pip`文件`python`。

```
readlink $(which pip)
../Cellar/python@2/2.7.15_1/bin/pip

readlink $(which python)
/usr/local/bin/python3      <-- another symlink

readlink /usr/local/bin/python3
../Cellar/python/3.7.2/bin/python3 
```

`2.7.15_1`在这里，您可以看到版本和`3.7.2`我的情况之间明显不匹配。

2.  将 pip 符号链接替换为与当前 python 版本匹配的 pip 二进制文件。**在以下命令中使用您的 python 版本**。

```
ln -is /usr/local/Cellar/python/3.7.2/bin/pip3 $(which pip) 
```

如果目标存在，该`-i`标志会提示您覆盖。

这应该够了吧。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-07-31T07:14:16.637

以下步骤帮助我解决了这个问题。

*   升级pip版本
*   使用命令删除创建的环境`rm -rf env-name`
*   使用命令创建环境`python3 -m venv env-aide`
*   现在安装软件包并检查

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-03-02T16:49:39.997

我有一个相同的问题，我可以追溯到移动包含我的虚拟环境的目录。我只是在很久以后才注意到它，因为我没有使用存在于环境本身中的库。

似乎在构造时，虚拟环境设置了一个`VIRTUAL_ENV`包含自身路径的变量，该变量显然`PATH`是在激活环境时附加的；这在手动移动时不会更新，这意味着更改环境的位置会破坏指向它包含的库​​的链接。

我只是通过删除和重新创建我的环境来解决问题。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-04-30T11:12:07.447

对我来说，问题是我在文件中有奇怪的配置设置`pydistutils.cfg`

尝试运行 `rm ~/.pydistutils.cfg`

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-03-02T16:31:42.283

确保检查您正在使用的 python 版本，如果它是 2，那么只有 pip install 有效 如果它是 3。那么一定要使用 pip3 install

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-04-12T08:49:03.480

对我有用的（使用 Python 3.8）是：

1.  卸载旧 python 版本的剩余部分（不知何故安装了 3 个不同的，但从未注意到）
2.  将 pip 升级到最新版本
3.  删除并重新安装模块

这可以避免 pip 将包安装到您和您的 IDE 不使用的版本。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2013-02-24T13:58:02.863

你是如何安装easy_install/pip的？确保为升级版的 python 安装了它。这里可能发生的是旧的（默认）python 安装可能链接到您的 pip 安装。您可能想尝试运行默认版本并导入新安装的模块。

# php - 在 PHP 中尝试并捕获 - 我应该在“尝试”块中返回吗？

> ID：15052207
> 
> 赞同：14
> 
> 时间：2013-02-24T13:30:49.410
> 
> 标签：php, try-catch

下面是我`try catch`在函数中的陈述。我没有太多使用 try catch 语句，我想知道如何在 try catch 语句中返回值。我应该在 try 和 catch 语句之后返回一个值还是在 try 块中返回 OK？

```
function createBucket($bucket_name) {
    if ($this->isValidBucketName($bucket_name)) {
        if ($this->doesBucketExist($bucket_name)) {
            return false;
        }
        else {
            try {
                $this->s3Client->createBucket(
                        array(
                            'Bucket' => $bucket_name,
                            'ACL' => CannedAcl::PUBLIC_READ
                        // Add more items if required here
                ));
                return true;
            }
            catch (S3Exception $e) {
                $this->airbrake->notifyOnException($e);
                return false;
            }
        }
    }
    else {
        $this->airbrake->notifyOnError('invalid bucket name');
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-24T13:33:33.803

> 在 try 块中返回好吗？

是的。如果您需要在那里返回值，请执行此操作。

```
try {
  function_that_throws_exception();
  return true;   // <-- This will never happen if an exception is raised

}
catch(Exception $e){

} 
```

# highcharts - highcharts透明系列

> ID：15052208
> 
> 赞同：0
> 
> 时间：2013-02-24T13:30:49.057
> 
> 标签：highcharts, transparent

我正在绘制一个包含两个系列的折线图，其中一个是透明的（但带有彩色点）。

我的问题是透明系列在图例中没有颜色，而且看起来不太好（尤其是通过单击图例中的名称来隐藏它时）。

这是我正在做的一个例子： [JSFiddle Example](http://jsfiddle.net/topatidle/G4NLn/)

创建透明系列的代码是：

```
{type:'spline',name:'Transparent',color:'rgba(255, 255, 255, 0.1)', data:[{x:1361059200000, y:0.0, marker: {symbol: "square", radius: 3, fillColor: "#f2a8a8", states: { hover: {radius: 3, fillColor: "#f2a8a8"}}}},{x:1361088000000, y:0.0, marker: {symbol: "square", radius: 8, fillColor: "#f2a8a8", states: { hover: {radius: 8, fillColor: "#f2a8a8"}}}},{x:1361116800000, y:0.0, marker: {symbol: "square", radius: 6, fillColor: "#f2a8a8", states: { hover: {radius: 6, fillColor: "#f2a8a8"}}}}]} 
```

有没有办法为系列图例设置颜色（在图表创建期间或在图表创建后使用 JavaScript）？

谢谢，齐夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:59:15.453

我建议不要使用透明样条线，而是使用带有自定义标记的分散系列。

[http://jsfiddle.net/G4NLn/3/](http://jsfiddle.net/G4NLn/3/)

```
 {
            type: 'scatter',
            name: 'Transparent',
            marker: {
                    symbol: "square",
                    radius: 3,
                    fillColor: "#f2a8a8",
                    states: {
                        hover: {
                            radius: 3,
                            fillColor: "#f2a8a8"
                        }
                    }
             },
            //color: 'rgba(255, 255, 255, 0.1)',
            data: [{
                x: 1361059200000,
                y: 0.0,
                marker: {
                    symbol: "square",
                    radius: 3,
                    fillColor: "#f2a8a8",
                    states: {
                        hover: {
                            radius: 3,
                            fillColor: "#f2a8a8"
                        }
                    }
                }
            }, {
                x: 1361088000000,
                y: 0.0,
                marker: {
                    symbol: "square",
                    radius: 8,
                    fillColor: "#f2a8a8",
                    states: {
                        hover: {
                            radius: 8,
                            fillColor: "#f2a8a8"
                        }
                    }
                }
            }, {
                x: 1361116800000,
                y: 0.0,
                marker: {
                    symbol: "square",
                    radius: 6,
                    fillColor: "#f2a8a8",
                    states: {
                        hover: {
                            radius: 6,
                            fillColor: "#f2a8a8"
                        }
                    }
                }
            }] 
```

# android - Android 应用程序本机部分中的相对寻址

> ID：15052210
> 
> 赞同：0
> 
> 时间：2013-02-24T13:31:25.283
> 
> 标签：android, android-ndk, relative-addressing

我在 Android 应用程序的本机部分创建了一个对象，如下所示：

```
CascadeClassifier face_cascade;
face_cascade.load( "haarcascades/haarcascade_frontalface_alt2.xml" ); 
```

在纯 c++ 中，您将**haarcascade_frontalface_alt2.xml**放在**haarcascades**文件夹中，除了您的源代码。但是现在我真的很困惑它应该放在哪里？在 jni/haarcascades 目录中？或者别的地方？
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:30:53.663

Android 应用程序以文件系统根目录作为当前目录启动。此外，当您部署 Android 应用程序时，通常将文件放在`res/raw`目录中或`assets`Java 项目的目录中。您可以`assets`直接访问本机代码（请参阅[http://www.costrategix.com/blog/reading-files-from-android-assets-folder-using-c-ndk/](http://www.costrategix.com/blog/reading-files-from-android-assets-folder-using-c-ndk/)和[AssetManager 和本机代码](https://stackoverflow.com/questions/9791109/assetmanager-and-native-code)）。

Android 隔离不同应用程序的文件访问，以便每个应用程序都可以存储其私有文件。Android 应用程序经常使用`/sdcard/`文件存储，因为那里通常有更多空间。此外，本机代码更容易找到**sdcard**上的文件。但请注意：`/sdcard/`在某些情况下，某些设备上可能不存在。通常，Android 系统会有一个*环境变量* `EXTERNAL_STORAGE`来代替它；但官方支持的查找此路径的方法是通过[Java API](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory())。

*从 Java 中操作当前目录*是不可能的，但您可以使用 JNI。

无论如何，本机代码具有与 Java 代码相同的文件访问权限。

# coffeescript - 将值传递给 CoffeeScript 类的构造函数

> ID：15052211
> 
> 赞同：1
> 
> 时间：2013-02-24T13:31:26.650
> 
> 标签：coffeescript

我试图将一个值传递给 CoffeeScript 类的构造函数，但没有成功：

```
class A

  constructor: () ->

    @b = new B('FOO') 
```

```
class B

  constructor: (@value) ->

  printValue: () =>
    console.log @value 
```

当我从 B 的实例调用 printValue 时，控制台中会记录“未定义”。为什么没有记录“FOO”？

**更新**

我应该提到 A 类实例是在第三个 C 类中创建的，如下所示：

```
class C

  constructor: () ->

    @a = new A() 
```

所有三个类都在不同的文件中，并按照 C 在 A 上在 C 上的顺序连接在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T13:39:41.160

当我这样做时，它工作得很好：

```
class B
  constructor: (@value) ->
  printValue: () -> alert @value

b = new B "foo"
b.printValue() 
```

我猜你有一个空格缩进问题发生。由于 CoffeeScript 对空格敏感，因此您的制表符/间距需要在同一块内保持一致。

转到[http://coffeescript.org/](http://coffeescript.org/)并选择“尝试 Coffeescript”。将其粘贴并按“运行”。

或者，考虑创建一个显示此问题的 JSFiddle，因为我没有看到问题。

# seo - 为什么搜索引擎不抓取我的网站？

> ID：15052212
> 
> 赞同：-1
> 
> 时间：2013-02-24T13:31:26.883
> 
> 标签：seo, search-engine

我有一个 robots.txt，现在已经被删除，我尝试向搜索引擎提交 URL，当我在搜索引擎上搜索我的网站时，页面上没有结果。

网站如何出现在搜索引擎上？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:42:04.150

尝试使用谷歌网站管理员工具（[https://www.google.com/webmasters/tools](https://www.google.com/webmasters/tools)）它可以帮助你找出一些问题。另外，我建议您阅读 google [http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en//webmasters/docs/search-engine-optimization-starter-guide 的搜索引擎优化入门指南。 pdf](http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en//webmasters/docs/search-engine-optimization-starter-guide.pdf)

ps SEO 总是需要时间，而且你不能立即得到结果。

# javascript - 从txt文件中将多个链接一一插入到一个iframe中

> ID：15052214
> 
> 赞同：0
> 
> 时间：2013-02-24T13:31:28.090
> 
> 标签：javascript

我正在尝试将多个 src 链接放入 1 个框架中，然后一个接一个地加载它们。这是我目前拥有的代码：

```
<script type="text/javascript">
    $(document).ready(function(){   
    $('#1').on('load', function() {     
            $('#1').attr('src', "http://www.example1.com");             
    }).attr('src', "http://www.example2.lt");

    $('#1').on('load', function() {                 
            $('#1').attr('src', "http://www.example1.com");             
    });

    });
</script>

<iframe id="1"  width="100" height="100" src=""></iframe> 
```

在此代码中，它将首先加载 example1.com url，然后加载 example2.com url。

我有一个存储 url 的 txt 文件。我如何做到这一点，以便 javascript 会从 txt 文件中读取 url，将它们放入 javascript，然后加载 iframe 的次数与 txt 文件中的 url 一样多，一个接一个？也许除了我在这里写的方法之外，还有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:54:30.970

我会将文件格式化为`json`字符串的编码数组并使用`$.ajax`或`$.getJSON`从服务器获取它。

现在您已经设置了阵列，您可以：

```
$.getJSON( ... , function(success) { 
  $('#1').on('load', function() {
    $(this).attr('src', success.pop());
  }).attr('src', 'http://www.google.com');
}); 
```

有点像这样：

[http://jsfiddle.net/FQLce/](http://jsfiddle.net/FQLce/)

# java - 整数缓存有多大？

> ID：15052216
> 
> 赞同：11
> 
> 时间：2013-02-24T13:31:34.700
> 
> 标签：java, integer, boxing

类`Integer`有缓存，缓存`Integer`值。因此，如果我使用方法`valueOf`或收件箱，新值将不会被实例化，而是从缓存中获取。

我知道默认缓存大小是`127`但可以由于 VM 设置而扩展。我的问题是：这些设置中缓存大小的默认值有多大，我可以操纵这个值吗？该值是否取决于我使用的 VM（32 位还是 64 位）？

我现在正在调整遗留代码，可能需要从 int 转换为 Integer。

澄清：我在Java源代码中找到的以下代码

```
private static class IntegerCache {
    static final int low = -128;
    static final int high;
    static final Integer cache[];

    static {
        // high value may be configured by property
        int h = 127;
        String integerCacheHighPropValue =
            sun.misc.VM.getSavedProperty("java.lang.Integer.IntegerCache.high");
        if (integerCacheHighPropValue != null) {
            int i = parseInt(integerCacheHighPropValue);
            i = Math.max(i, 127);
            // Maximum array size is Integer.MAX_VALUE
            h = Math.min(i, Integer.MAX_VALUE - (-low));
        }
        high = h;

        cache = new Integer[(high - low) + 1];
        int j = low;
        for(int k = 0; k < cache.length; k++)
            cache[k] = new Integer(j++);
    }

    private IntegerCache() {}
}

public static Integer valueOf(int i) {
    assert IntegerCache.high >= 127;
    if (i >= IntegerCache.low && i <= IntegerCache.high)
        return IntegerCache.cache[i + (-IntegerCache.low)];
    return new Integer(i);
} 
```

所以我认为缓存是可配置的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-24T13:38:43.917

内部 Java 实现，无法配置，范围是**-128 到 127**。您可以检查`Javadocs`或简单地查看来源：

```
public static Integer valueOf(int i) {
         final int offset = 128;
         if (i >= -128 && i <= 127) { // must cache
             return IntegerCache.cache[i + offset];
         }
         return new Integer(i);
} 
```

**UPD。**我**错了**（感谢 Marco Topolnik）。以上所有内容都与较旧的 Java 实现有关。对于**Java 7**的实现，可以通过系统属性来实现：

```
-Djava.lang.Integer.IntegerCache.high=<size> 
```

或 JVM 设置：

```
-XX:AutoBoxCacheMax=<size> 
```

**UPD。2** `java.math.BigInteger`具有值**-16 <= x <= 16**的硬编码缓存。从来源：

```
 private final static int MAX_CONSTANT = 16;
    private static BigInteger posConst[] = new BigInteger[MAX_CONSTANT+1];
    private static BigInteger negConst[] = new BigInteger[MAX_CONSTANT+1];
    static {
    for (int i = 1; i <= MAX_CONSTANT; i++) {
        int[] magnitude = new int[1];
        magnitude[0] = i;
        posConst[i] = new BigInteger(magnitude,  1);
        negConst[i] = new BigInteger(magnitude, -1);
    }
    }

    public static BigInteger valueOf(long val) {
        // If -MAX_CONSTANT < val < MAX_CONSTANT, return stashed constant
        if (val == 0)
            return ZERO;
        if (val > 0 && val <= MAX_CONSTANT)
            return posConst[(int) val];
        else if (val < 0 && val >= -MAX_CONSTANT)
            return negConst[(int) -val];
        return new BigInteger(val);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T19:56:09.457

对于 Java 7，我无法在 Oracle 的 java 文档中找到关于使用 -XX:+AggressiveOpts 时会发生什么变化的确切描述。因此，我运行了一个流程来确定aggressiveopts 对我们实验室中一个具有java 版本的应用服务器上的jvm 设置的影响：{quote} java 版本“1.7.0_15”Java(TM) SE 运行时环境（构建 1.7.0_15 -b03) {报价}

**该过程是在禁用**aggressiveopts的情况下运行java ：java -d64 -server -XX:-AggressiveOpts -XX:+UnlockDiagnosticVMOptions -XX:+PrintFlagsFinal -version

**该过程是在启用**aggressiveopts的情况下运行java ：java -d64 -server -XX:+AggressiveOpts -XX:+UnlockDiagnosticVMOptions -XX:+PrintFlagsFinal -version

这个过程产生了这些差异：

bool AggressiveOpts false --> true {产品}

**intx AutoBoxCacheMax 128 --> 20000** {C2 产品}

intx BiasedLockingStartupDelay 4000 --> 500 {产品}

bool EliminateAutoBox false --> true {C2 诊断}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T13:33:43.663

从[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html)：

> 公共静态整数 valueOf(int i)
> 
> 返回一个表示指定 int 值的 Integer 实例。如果不需要新的 Integer 实例，则通常应优先使用此方法而不是构造函数 Integer(int)，因为此方法可能会通过缓存频繁请求的值来显着提高空间和时间性能。此方法将始终缓存 **-128 到 127 范围内的值**，包括在内，并且可能缓存此范围之外的其他值。

但是你真的不应该依赖这个或试图改变任何关于这个的东西。这是 JVM 的一个实现细节，它不会影响您的实现。

# java - 发送 Spring 之前的 Camel SEDA 队列消息

> ID：15052220
> 
> 赞同：0
> 
> 时间：2013-02-24T13:32:13.653
> 
> 标签：java, spring, apache-camel, ems

我使用 Camel 通过 EMS 处理后发送消息。我在春天有类似以下的事情：

```
<route>
    <from uri="startMessage"/>
    <to uri="processMessage"/>
    <to uri="sendMessage"/>
</route>
<--! More routes below --> 
```

问题是我有大约 8 条这样的路由，我想在通过 EMS 上的“sendMessage”发送每条消息之前对消息进行排队。

目前我有：

```
<route>
    <from uri="startMessage"/>
    <to uri="processMessage"/>
    <to uri="seda:sendMessage"/>
</route>
<--! More routes below --> 
```

但是“seda”部分没有按预期工作。消息永远不会像以前那样被发送。

对此用例的任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T16:26:22.177

我想你需要在某个地方听那个 seda 队列。以下路线将在您的第一个示例中启用 seda 登台。

```
<route>
    <from uri="startMessage"/>
    <to uri="processMessage"/>
    <to uri="seda:sendMessage"/>
</route>

<route>
    <from uri="seda:sendMessage"/>
    <to uri="sendMessage"/>
</route> 
```

# silverlight - EF ObjectContext 始终返回“关闭”连接状态

> ID：15052221
> 
> 赞同：0
> 
> 时间：2013-02-24T13:32:17.003
> 
> 标签：silverlight, entity-framework

我需要知道数据库连接（通过 WCF RIA + EF）何时打开，何时关闭。但是在我的 DomainService ( 在 web 端) 方法中：

```
return this.ObjectContext.Connection.State.ToString(); 
```

**总是**返回“关闭”。哪怕刚才是成功的反应。连接确实在第一次请求后打开，并在超时后自动关闭（在 web.config 中配置），因为在 WFC RIA 中我不调用“打开-”和“关闭连接”命令。但主要问题 - 如果连接超时，DomainContext 不会告诉客户端这件事。

因此，如果连接超时并且用户尝试向数据库发出请求 - 他将得到一个异常（实际上是**访问**异常），那么，DomainContext**隐藏地**自动恢复连接，并且用户可以在第二次请求后得到答案（所有超时后）。

这就是为什么我需要知道 - 连接状态何时关闭，何时打开。

我只想做一个可以实时显示真实连接状态的指示器。

第二个不太重要的问题 - 我是否需要创建一个静态 DomainContext 对象来隐含任何数据库操作（包括登录、注销、GetQuerriess 等）？可以吗？几乎为每组操作获取新的 DomainContext 实例？希望，你明白我的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:57:59.617

对于 Ado.NET，您可以管理连接，我们说“连接池” [http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)

EntityFramework 也使用 ADO.NET，但 IIS 服务器为我们管理、优化的连接池。

多年来，我从未遇到过这样的连接关闭错误。如果你给我们更多的细节，也许它会很清楚。通常 20 秒后，Web 会话就会死机。它会是一个丢失的会话吗？

我们将 DomainService 类用于 RIA 服务。（正如我在您编写的 RIA 问题中看到的那样）DomainService 类具有 ObjectContext 的 EntityModel（EDMX）。因此，您可以通过**this.ObjectContext**在您的域服务方法中访问它们。如果您有一个 EDMX，您将不需要另一个 ObjectContext 实例。您可能只需要不同的域服务类实例。

# ruby - 如何使用正则表达式从 Ruby 中的字符串中获取值？

> ID：15052222
> 
> 赞同：-2
> 
> 时间：2013-02-24T13:32:18.623
> 
> 标签：ruby, string

如何使用 Ruby 获取字符串的一部分？我想`image/jpeg`从此字符串中获取值：

```
"Content-Disposition: form-data; name='arquivo'; filename='the_last_in_line.jpg' Content-Type: image/jpeg" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T14:12:40.893

你试过什么？您可以对此类任务使用正则表达式：

```
str='Content-Disposition: form-data; name="arquivo"; filename="the_last_in_line.jpg" Content-Type: image/jpeg'
str[/Content-Type:\s*(\S*)/,1] # => "image/jpeg" 
```

# visual-studio-2010 - SQL Server CE 工具箱 - VS 2010 插件不允许连接到 4.0

> ID：15052223
> 
> 赞同：1
> 
> 时间：2013-02-24T13:32:39.317
> 
> 标签：visual-studio-2010, sql-server-ce-4, sql-server-ce-toolbox

我已经安装了 SQL Server Compact Edition 4.0 运行时和 DbFactory 提供程序以及所有内容。

但是在我从 CodePlex 安装 SQL Server CE 工具箱 (v3.2) 之后，我似乎仍然无法建立任何连接。

信息对话框似乎表明一切都很好，花花公子......

![在此处输入图像描述](../Images/ca6f8e9cd1a53236cb91090834f8ce2e.png)

但是当我尝试打开与现有`.sdf`数据库文件的新连接时，我似乎无法从 Visual Studio 2010 (SP1) 中执行此操作：

![在此处输入图像描述](../Images/f3178bcd6c2556ac165d2c41db8697dd.png)

SQL Server CE Toolbox**独立**应用程序在那台机器上运行良好 - 只是 VS 插件似乎无法正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:24:46.763

Toolbox 加载项需要 3.5 DbProvider 来存储自定义连接和其他功能（这是出于历史原因，假设是 3.5 SP2 已安装并在 VS 2010 RTM 中注册）。并且 3.5 DbProvider 未正确安装在您的系统上（如关于对话框所示）。所以修复/重新安装 3.5 SP2 桌面运行时 - 并记住安装 x86 和 x64 MSI 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T14:02:51.800

我通过 NuGet“Microsoft SQL Server Compact Edition”安装，SQL CE Toolbox 也有同样的问题。

我通过直接从 Microsoft SQL CE 下载（不是通过 Nuget）更正了这个问题

此处为 Microsoft 的 Microsoft SQL Server Compact 4.0 或[此处](http://www.microsoft.com/en-us/download/details.aspx?id=17876)
为 Windows Desktop 的 Microsoft SQL Server Compact 3.5 Service Pack [2](http://www.microsoft.com/en-us/download/details.aspx?id=5783)

# java - 什么更好用：Action vs ActionListener？

> ID：15052225
> 
> 赞同：8
> 
> 时间：2013-02-24T13:32:43.773
> 
> 标签：java, swing, user-interface, action, actionlistener

我自己，我总是使用[`ActionListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ActionListener.html)swing 事件处理程序（例如按钮单击），它是我在大多数swing 应用程序中看到的最常见的侦听器。

但是，stackoverflow 中的一些 Swing 专业人士经常建议使用[`Action`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Action.html)而不是[`ActionListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ActionListener.html). 我这样做有什么好处？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-24T13:38:11.657

`Action`如果您需要跨组件共享功能，则首选An 。从[文档](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)

> 如果您有两个或多个执行相同功能的组件，请考虑使用 Action 对象来实现该功能。

但也说

> Action 对象是一个动作侦听器，它不仅提供动作事件处理，还提供对动作事件触发组件（例如工具栏按钮、菜单项、常用按钮和文本字段）状态的集中处理。动作可以处理的状态包括文本、图标、助记符、启用和选中状态。

# compiler-optimization - -O2 编译器开关导致数学错误

> ID：15052226
> 
> 赞同：0
> 
> 时间：2013-02-24T13:32:43.287
> 
> 标签：compiler-optimization, gfortran

我正在评估一个计算电磁建模程序，该程序同时使用 C 和 Fortran 来实现 Longley-Rice 传播模型。在没有优化的情况下编译时，我得到一组数值结果。当使用 -O2 开关启用一些基本的性能改进时，一些结果与未使用优化的结果略有不同。

无论是否显式设置 -fno-unsafe-math-optimizations 开关都是这种情况（尽管它是 GNU 编译器的默认设置）

任何人都知道当他们应该严格遵守 IEEE FP 规则时，什么会导致基本优化导致数学错误？

# javascript - 使用节点配置模块进行配置

> ID：15052229
> 
> 赞同：0
> 
> 时间：2013-02-24T13:33:18.047
> 
> 标签：javascript, node.js

我在节点 js 中使用[配置模块。](https://github.com/lorenwest/node-config)在 config/default.yaml 下，我有以下配置

```
Facebook:
    appKey: ""
    appSecret: ""

Twitter:
    consumerKey: ""
    consumerSecret: "" 
```

当我使用 require('config') 时，返回的对象只包含 Facebook。没有推特。任何的想法？我一无所知

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:20:58.270

经过一番研究，我来到了这里。[https://github.com/lorenwest/node-config/issues/27](https://github.com/lorenwest/node-config/issues/27)

好像如果我们使用 yaml，那么我们应该在依赖列表中声明 js-yaml，这解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T14:37:42.330

尝试像这样使用它

```
var Facebook = require('config').Facebook;
var Twitter = require('config').Twitter; 
```

这会产生任何错误吗？

# c# - 通过绑定使用 Pivot 的 ItemsSource 属性时的内存泄漏（+ 复制代码）

> ID：15052230
> 
> 赞同：2
> 
> 时间：2013-02-24T13:33:20.127
> 
> 标签：c#, windows-phone-7, windows-phone-8

在我的应用程序中，用户使用像书一样的枢轴，他翻转枢轴项目直到他击中最后一个，然后我删除现有的枢轴项目并加载新的。这一切都是通过简单地将`Pivot.ItemsSource`属性指向一个新的项目集合来完成的。

我注意到超时内存消耗会增加并且永远不会降低。Pivot 的 VisualTree 似乎没有被垃圾收集。

我创建了一个示例应用程序来演示该问题（这是一个 WP8 应用程序）：

重现步骤：

*   启动应用程序
*   导航到第 1 页
*   单击加载更多按钮几次。

    （一次它加载 100 个项目，这当然不是我在实际应用程序中所做的，但它清楚地展示了每次内存消耗如何越来越高，即使导航回来也不会被清除）

我将不胜感激任何降低内存的提示或建议，因为如果以这种方式使用足够长的时间，应用程序不可避免地会崩溃。

**MainPage.xaml：**

```
...
<HyperlinkButton NavigateUri="/Page1.xaml">
    Page1
</HyperlinkButton>
... 
```

**MainPage.xaml.cs：**

```
 //...
    public MainPage()
    {
        InitializeComponent();
        var timer = new DispatcherTimer();
        timer.Interval = TimeSpan.FromSeconds(2);
        timer.Tick += delegate
                          {
                              Debug.WriteLine("{0:f} MB, {1:f} MB",
                                              DeviceStatus.ApplicationCurrentMemoryUsage/(1024.0*1024),
                                              DeviceStatus.ApplicationPeakMemoryUsage/(1024.0*1024));
                          };
        timer.Start();
    }
    //... 
```

**Page1.xaml：**

```
<Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--TitlePanel contains the name of the application and page title-->
        <StackPanel Grid.Row="0" Margin="12,17,0,28">
            <TextBlock Text="MY APPLICATION" Style="{StaticResource PhoneTextNormalStyle}" />
            <TextBlock Text="page name" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}" />
        </StackPanel>

        <!--ContentPanel - place additional content here-->
        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">

            <StackPanel>
                  <phone:Pivot x:Name="pivot1" ItemsSource="{Binding Items}">
                    <!--Pivot item one-->
                    <phone:Pivot.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding}" />
                        </DataTemplate>
                    </phone:Pivot.ItemTemplate>
                </phone:Pivot>
                <Button Click="Load_More">Load More</Button>
            </StackPanel>
        </Grid>
    </Grid> 
```

**Page1.xaml.cs：**

```
public partial class Page1 : PhoneApplicationPage, INotifyPropertyChanged
    {
        private List<int> _items;
        public List<int> Items
        {
            get
            {
                if (_items == null)
                {
                    _items = new List<int>();
                }
                return _items;
            }

            set
            {
                _items = value;
                RaisePropertyChanged("Items");
            }
        }
        public Page1()
        {
            InitializeComponent();
            DataContext = this;
        }

        private void Load_More(object sender, RoutedEventArgs e)
        {
            var lst = new List<int>();
            //100 new items just for demonstration, in reality i won't have more than 6 new items
            for (int i = 0; i < 100; i++)
            {
                lst.Add(i);
            }
            pivot1.SelectedIndex = 0;
            Items=lst;
        }

        public event PropertyChangedEventHandler PropertyChanged;

        void RaisePropertyChanged(string property)
        {
            var handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(property));
            }
        }

      ~Page1()
      {
          Debug.WriteLine("Page1 GC");
      }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T05:50:06.110

看起来 Pivot 控件泄漏，如使用 Panorama 控件所证明的那样。用这个替换你的堆栈面板（我没有更改控件的名称）不会泄漏。（内存在 50 兆左右被回收）

```
 <StackPanel>
            <Button Click="Load_More">Load More</Button>
            <phone:Panorama x:Name="pivot1" ItemsSource="{Binding Items}">
                <phone:PanoramaItem></phone:PanoramaItem>
            </phone:Panorama>
        </StackPanel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:53:34.427

一种解决方法是继续重复使用相同的项目集合，而不是创建新集合。当您需要更改它时，请清除该集合，然后重新填充它。该集合可以驻留在 App 全局空间中，例如：

```
public partial class App : Application
    {
        public static List<int> GlobalList;
...
    } 
```

在 MainPage 构造函数中对其进行初始化，然后通过`App.GlobalList`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-18T09:43:39.933

### 解决方案 1

也许你可以试试这个解决方案：[Windows Phone 8: LongListSelector Memory Leak](http://cbailiss.wordpress.com/2014/01/24/windows-phone-8-longlistselector-memory-leak/)

在关闭页面之前尝试清理这些依赖项属性。

### 解决方案 2

尝试使用`OservableCollection<T>`而不是`List<T>`for binding `Itemsource`。由于 WPF 设计，将 a绑定`List<T>`到 a可能会导致内存泄漏。`Itemsource`

[在 Windows Presentation Foundation 中使用数据绑定时可能会发生内存泄漏](http://support.microsoft.com/kb/938416/en-us)

# objective-c - IOS plist 简单问答游戏

> ID：15052231
> 
> 赞同：0
> 
> 时间：2013-02-24T13:33:20.043
> 
> 标签：objective-c, plist

嗨，我一直在尝试创建一个问答游戏，并且到处寻找答案，但没有运气。我正在创建一个测验，它读入一个包含许多问题和答案的 plist 文件，一切正常，除了当我选择答案时，下一个问题不会出现。通过使用 NSLogs，我可以看到 currentQuestion 值的增量有效，实际上似乎正在丢失 plist 文件的 self.question 是我的 plist 代码，因为我还无法发布图像。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN""http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Questions</key>
<array>
    <dict>
        <key>QuestionTitle</key>
        <string>What is 1 + 1?</string>
        <key>A</key>
        <string>4</string>
        <key>B</key>
        <string>3</string>
        <key>C</key>
        <string>7</string>
        <key>D</key>
        <string>2</string>
        <key>QuestionAnswer</key>
        <string>D</string>
    </dict>
    <dict>
        <key>QuestionTitle</key>
        <string>What is 2 + 2?</string>
        <key>A</key>
        <string>4</string>
        <key>B</key>
        <string>3</string>
        <key>C</key>
        <string>7</string>
        <key>D</key>
        <string>2</string>
        <key>QuestionAnswer</key>
        <string>A</string>
    </dict>
    <dict>
        <key>QuestionTitle</key>
        <string>What is 5 + 2?</string>
        <key>A</key>
        <string>4</string>
        <key>B</key>
        <string>3</string>
        <key>C</key>
        <string>7</string>
        <key>D</key>
        <string>2</string>
        <key>QuestionAnswer</key>
        <string>C</string>
    </dict>
    <dict>
        <key>QuestionTitle</key>
        <string>What is 9 - 2?</string>
        <key>A</key>
        <string>4</string>
        <key>B</key>
        <string>3</string>
        <key>C</key>
        <string>7</string>
        <key>D</key>
        <string>2</string>
        <key>QuestionAnswer</key>
        <string>C</string>
    </dict>
    <dict>
        <key>QuestionTitle</key>
        <string>What is 10 - 6?</string>
        <key>A</key>
        <string>4</string>
        <key>B</key>
        <string>3</string>
        <key>C</key>
        <string>7</string>
        <key>D</key>
        <string>2</string>
        <key>QuestionAnswer</key>
        <string>A</string>
    </dict>
    <dict>
        <key>QuestionTitle</key>
        <string>What is 1 + 2?</string>
        <key>A</key>
        <string>4</string>
        <key>B</key>
        <string>3</string>
        <key>C</key>
        <string>7</string>
        <key>D</key>
        <string>2</string>
        <key>QuestionAnswer</key>
        <string>B</string>
    </dict>
</array> 
```

我创建此测验所遵循的教程将**问题**作为主键，其中我将**Root**作为键，但我似乎无法更改 Root 名称我相信如果有人知道如何更改它可能会解决我的问题？我编辑了代码来解决这个问题，这是我的**viewDidLoad**和**showNextQuestion**注意：当按下任何按钮 A、B、C 或 D 时，会调用 showNextQuestion。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view.

    NSString *path = [[NSBundle mainBundle] pathForResource:@"Questions1" ofType:@"plist"];
    NSDictionary *tempDict = [[NSDictionary alloc] initWithContentsOfFile:path];
    self.questions = [tempDict objectForKey:@"Questions"];

    currentQuestion = -1;
    NSLog(@"%d",currentQuestion);
    [self showNextQuestion];
}

-(void)showNextQuestion
{
    currentQuestion++;
    NSLog(@"%d",currentQuestion);
    NSLog(@"%d",[self.questions count]);
    if(currentQuestion < [self.questions count])
    {
        NSLog(@"Inside the loop");
        NSDictionary *nextQuestion = [self.questions objectAtIndex:currentQuestion];
        self.answer = [nextQuestion objectForKey:@"QuestionAnswer"];
        self.lblQuestion.text = [nextQuestion objectForKey:@"QuestionTitle"];
        self.lblQuestionA.text = [nextQuestion objectForKey:@"A"];
        self.lblQuestionB.text = [nextQuestion objectForKey:@"B"];

        if([nextQuestion objectForKey:@"C"]){
            self.lblQuestionC.hidden = NO;
            self.btnC.hidden = NO;

            self.lblQuestionC.text = [nextQuestion objectForKey:@"C"];
        }
        else{
            self.lblQuestionC.hidden =YES;
            self.btnC.hidden = YES;
        }

        if([nextQuestion objectForKey:@"D"]){
            self.lblQuestionD.hidden = NO;
            self.btnD.hidden = NO;

            self.lblQuestionD.text = [nextQuestion objectForKey:@"D"];
        }
        else{
            self.lblQuestionD.hidden =YES;
            self.btnD.hidden = YES;
        }

    }
    else{
        //Game Over
    }
} 
```

对此的任何帮助将不胜感激提前谢谢您

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-13T09:47:04.790

```
self.lblQuestionTitle.text = [nextQuestion objectForKey:@"QuestionTitle"]; 
```

# php - 通过显示所有要更改的输入来编辑 CodeIgniter + AJAX 多部分表单

> ID：15052232
> 
> 赞同：1
> 
> 时间：2013-02-24T13:33:22.183
> 
> 标签：php, javascript, ajax, forms, codeigniter

### 概述

这是我第一次使用 CodeIgniter 创建复杂的多部分表单。

我有一个依赖 AJAX Post 提交的 CodeIgniter 多部分表单（使用[jQuery Form Plugin](http://malsup.com/jquery/form/)）。我在成功验证用户后预览表单，以检查他们的答案是否一切正常。他们可以通过“**提交到数据库**”按钮或“**编辑表单”**按钮将其提交到数据库，然后返回并更改他们想要检查的任何内容，然后循环再次开始！

### 问题

我的多部分表单具有**文件输入和动态添加的 DOM 元素**（例如，用户可以声明多个地址，因此将通过 JavaScript 添加四个文本框），我希望这些在一次编辑时保持不变。

我有几种攻击方法，但到目前为止都没有：

1.  **模拟浏览器后退按钮**- 似乎很有效，但我记得我的控制器`index()`加载了新的表单视图，所以它没用。
2.  **从预览表单中取出所有数据，将它们放入一个数组中，将数组带到`index()`，计算动态添加的元素的出现次数，然后将它们全部显示出来**——这对我来说非常乏味和复杂。另外，我不确定将所有`$_POST`数据传输到数组是否安全，但这是我能想到的最好的。

**你们有什么建议或*更好*的方法来攻击这种过程吗？**

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:20:10.320

您可能需要根据您的第二个选项实施一个解决方案 - 是的，这很乏味，但没有其他方法可以做到这一点。一些要记住的事情：

您需要想出一种简洁的方式来存储您的数据。地址应存储为一个数组元素，如下所示：

```
<input type="text" name="addresses[1][street]">
<input type="text" name="addresses[1][city]">
<input type="text" name="addresses[1][county]"> 
```

这将允许您简洁地迭代您的数据结构以进行前端演示：

```
<? foreach ($data['addresses'] as $number => $address): ?>
   <? foreach ($address as $address_item => $value): ?>
      <input type="text" name="addresses[<?=$number?>][<?=$address_item?>]" value="<?=$value?>">
   <? endforeach; ?>
<? endforeach; ?> 
```

这将提供对您的布局的完全控制，减少您必须用于存储 DOM 的 JavaScript 数量（这不是那么快速或高效）。

# java - 像表格一样格式化 Java 输出

> ID：15052235
> 
> 赞同：2
> 
> 时间：2013-02-24T13:33:47.040
> 
> 标签：java, formatting

我正在尝试以类似表格的格式输出有关我的程序存储的学生的信息，因为 \t 并不总是提供正确的间距。为了做到这一点，我遇到了[这个问题](https://stackoverflow.com/a/2745239/1692226)并试图启用类似的解决方案。但是，当我尝试执行它时，我的代码中的格式行出现错误。

```
public void displayStudents (){
    System.out.println ("\n-----------------------------");
    System.out.println ("Email System - Display Students");
    System.out.println ("-----------------------------");
    System.out.format("%10s%15d%15s%15s%20s", "Grade", "Last Name", "First Name", "Student Number", "Parent Email");

    StudentNode current = top;
    while (current != null){
        Student read = current.getStudentNode();
        System.out.format ("%10s%15d%15s%15s%20s", ""+read.getClass(), read.getLastName(), read.getFirstName(), ""+read.getStudentNum(), read.getParentEmail());
        //This will output with a set number of character spaces per field, giving the list a table-like quality
    }
}//End of displayStudents 
```

代码的目标是以类似于下图的方式输出。 ![在此处输入图像描述](../Images/64a56c7c50fc84e0ae8bf52cb406ac6f.png)

请帮助我找出我的错误。是否有另一种方法来执行此操作？

谢谢。

编辑：我得到的错误是

```
GradeException in thread "main" java.util.IllegalFormatConversionException: d != java.lang.String
at java.util.Formatter$FormatSpecifier.failConversion(Unknown Source)
at java.util.Formatter$FormatSpecifier.printInteger(Unknown Source)
at java.util.Formatter$FormatSpecifier.print(Unknown Source)
at java.util.Formatter.format(Unknown Source)
at java.io.PrintStream.format(Unknown Source)
at StudentList.displayStudents(StudentList.java:184)
at OnlineCommunications.emailOption(OnlineCommunications.java:403)
at OnlineCommunications.main(OnlineCommunications.java:451) 
```

需要注意的是，Grade 是一个整数，Long 是一个 double。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T13:47:25.390

错误是因为`%d`数字非浮点值（`int`,`long`等）。

在打印标题的行中，您必须使用`%XXs`（其中 XX 是数字），因为您将`String`s 作为参数传递：

```
System.out.format("%10s%15s%15s%15s%20s",
    "Grade", "Last Name", "First Name", "Student Number", "Parent Email"); 
```

在 里面的那一行`while-loop`，你需要设置`%d`和`int`变量`long`，比如年级和学号，不需要转换成`String`using `"" + intProperty`：

```
System.out.format ("%10d%15s%15s%15d%20s",
    read.getClass(), read.getLastName(), read.getFirstName(),
    read.getStudentNum(), read.getParentEmail()); 
```

由于看起来您想要将输出格式化为左侧（而不是右侧），因此您应该在 XX 数字之前添加一个连字符 (-) 符号：

```
//similar for title
System.out.format ("%-10d%-15s%-15s%-15d%-20s",
    read.getClass(), read.getLastName(), read.getFirstName(),
    read.getStudentNum(), read.getParentEmail()); 
```

注意：我假设`read.getClass()`并将`read.getStudentNum()`返回`Grade`和`Student number`值作为`int`or `long`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T13:40:33.623

问题是：

> 10s **%15d** %15s%15s%20s

应该：

> 10s **%15s** %15s%15s%20s

这是因为所有的输入参数都是`String`，所以`d`（[仅适用于整型](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax)）是无效的。

# java - 在 Libgdx Stage 中获取图像（或演员）的屏幕位置

> ID：15052238
> 
> 赞同：3
> 
> 时间：2013-02-24T13:34:01.300
> 
> 标签：java, libgdx

我有这段代码：

```
Image myImage = new Image(new Texture("data/file.png")); 
```

如何`myImage`在屏幕上获得位置？我试过了`myImage.getX()`，`myImage.getImageX()`两者总是返回 0.0。怎么了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T20:53:44.787

我相信`getX()`and `getY()`on an`Actor`是相对于它们的父容器的，因此您需要将坐标转换为“舞台”坐标，然后从那里转换为“屏幕”坐标。（我认为有一种更简单的方法可以做到这一点，因此可能会有更好的答案）。

```
Image myImage = ...;
Vector2 coords = new Vector2(myImage.getX(), myImage.getY());
myImage.localToStageCoordinates(/*in/out*/coords);
myImage.getStage().stageToScreenCoordinates(/*in/out*/coords);

System.out.println("Image X " +myImage.get()+ " maps to screen " +coords.x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T11:05:13.080

只是猜测！！！- 移动图像并检查位置但 getX() 返回 0.0 可能是因为它的相机移动并产生了移动效果，图像可能根本没有移动并在 0.0 的初始位置被移动（我认为这可能是你错过的东西）

# delphi - 从任务管理器隐藏和显示进程

> ID：15052247
> 
> 赞同：1
> 
> 时间：2013-02-24T13:36:10.697
> 
> 标签：delphi, delphi-2010

德尔福 2010

我有一个列表框，其中填充了所有进程 ID 的列表。

```
function EnumProcess(hHwnd: HWND;lParam : integer): boolean; stdcall;
var
  pPid : DWORD;
  title, className : string;
begin
  if(hHwnd=NULL) then
  begin
   result := false;
  end
  else
  begin
   GetWindowThreadProcessId(hHwnd,pPid);
   SetLength(className, 255);
   SetLength(className, GetClassName(hHwnd, PChar(className), Length(className)));
   SetLength(title, 255);
   SetLength(title, GetWindowText(hHwnd, PChar(title), Length(title)));
   //form1.ListBox1.Items.Add('Class Name = ' + className + '; Title = ' + title + '; HWND = ' + IntToStr(hHwnd) + '; Pid = ' + IntToStr(pPid));
   form1.ListBox1.Items.Add(IntToStr(pPid));
   result := true;
  end;
end; 
```

有没有办法隐藏和显示 PID？我需要一个隐藏功能和一个显示功能或一个可以同时处理两者的功能

```
function HidePID(Value: DWord): Boolean;

function ShowPID(Value: DWord): Boolean; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T15:23:51.000

没有受支持的方法可以从系统任务管理器中隐藏进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T17:18:52.850

任务管理器向您显示正在运行的*“应用程序” 。*

例如，现在我的桌面只有五个*“应用程序”*，并且只有这 5 个出现在**任务管理器**中：

![在此处输入图像描述](../Images/770a53d432a6d688a310f8a29f440c91.png)

任务管理器不会显示*“后台应用程序”*、*“服务”*或其他人正在运行的应用程序。例如，现在我的登录会话也在运行：

*   uTorrent
*   蒸汽
*   进程浏览器
*   Skype
*   空中驱动器
*   行动纲要

**您在任务管理器**中看不到这些程序的原因是没有与这些应用程序关联的可见**窗口。**这就是你的答案：

> 要从**任务管理器**中隐藏您的应用程序：不要显示任何可见窗口。

**注意**：你不能隐藏你的*进程*；这样做会违反[*“程序和用户之间的军备竞赛”*](http://blogs.msdn.com/b/oldnewthing/archive/2004/02/16/73780.aspx)

# ios - iOS6通过第一个符号获取街道列表

> ID：15052248
> 
> 赞同：0
> 
> 时间：2013-02-24T13:36:21.443
> 
> 标签：ios, mapkit

我只是在玩 MapKit，它进展顺利。如果我们查看 Native App（地图），则可以找到两个地方之间的方向。对我来说有趣的是 - 当你输入名字时他们如何获得街道列表？SDK中有可能通过几个符号获取街道列表吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:20:06.340

MKLocalSearch 是即时搜索谷歌地图的最好和最简单的方法，我已经做到了，它很棒而且非常简单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:54:03.343

我不是 Map Kit 专家，但我建议您查看[Map Kit 框架](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKit_Framework_Reference/_index.html "地图工具包框架")，尤其是[MKLocalSearch 类参考](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKLocalSearch/Reference/Reference.html#//apple_ref/doc/uid/TP40012893 "MKLocalSearch 类")。

该类`MKLocalSearch`允许您搜索区域中的地址，这相当于在地图应用程序中进行搜索。我不知道有任何 API 可以让您检索一个地区的所有街道。

# sql-server - SQL Server 2005 远程连接（通过 Internet）

> ID：15052250
> 
> 赞同：2
> 
> 时间：2013-02-24T13:36:29.023
> 
> 标签：sql-server, sql-server-2005, connection

1.  我已经以混合模式安装了 SQL Server 2005。

2.  我能够使用两种身份验证“本地”连接到数据库，即（服务器名称/实例或内部 IP/实例）。

3.  我已经按照以下步骤为远程连接配置了 SQL Server

    脚步：

    *   在要从远程计算机连接的 SQL Server 实例上启用远程连接。
    *   打开 SQL Server Browser 服务。
    *   配置防火墙以允许与 SQL Server 和 SQL Server Browser 服务相关的网络流量。参考： http: [//support.microsoft.com/kb/914277#method3](http://support.microsoft.com/kb/914277#method3)
4.  另外，我已经关闭了我的防火墙。

5.  我可以通过外部 IP ping 我的计算机。

6.  但是当涉及到连接到 sql server 时，它给出了错误。

    > “标题：连接到服务器
    > 
    > 无法连接到 <ip 地址>\SQLEXPRESS。
    > 
    > 附加信息：
    > 
    > 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）（Microsoft SQL Server，错误：-1）
    > 
    > 如需帮助，请单击： http: [//go.microsoft.com/fwlink ?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=-1&LinkId=20476](http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=-1&LinkId=20476)

请帮助我，我参考了很多文章并测试了所有可能的解决方案，但似乎没有什么对我有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-20T11:06:41.160

原来是从我的调制解调器/路由器到相应机器 IP 的端口转发问题。

为了解决这个问题，我刚刚配置了我的路由器，以便它可以接受某个特定端口**[External IP:port_number]**上的请求，然后将该请求映射到我机器的**[Internal IP:port_number]**，因为多台计算机连接到单个路由器.

此外，请确保您服务器上的防火墙配置正确，以接受该特定端口上的入站网络流量。

# ruby-on-rails - 减少数据库查询

> ID：15052254
> 
> 赞同：0
> 
> 时间：2013-02-24T13:36:38.870
> 
> 标签：ruby-on-rails, postgresql, activerecord

我正在尝试减少我们的数据库的负载，并且已经阅读过使用 :include 方法可以帮助解决这个问题。我目前有以下代码行，它允许我选择我需要的所有信息，但是当我尝试在我的视图中用计数呈现它时，我一遍又一遍地访问数据库

```
@sports = Sport.includes([:teams]).all 
```

在我看来我在做

```
- @sports.each do |sport|
  %tr
    %td= sport.name
    %td= sport.teams.count 
```

我怀疑 sport.teams.count 是导致数据库被一遍又一遍地查询的原因。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T13:50:02.347

您应该[`counter_cache`](http://guides.rubyonrails.org/association_basics.html#belongs_to-counter_cache)为此使用 a 。另请参阅此[截屏视频](http://railscasts.com/episodes/23-counter-cache-column)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T14:28:39.300

正如 mischa 所说，您可以使用 counter_cache 来解决您的问题。但是您也可以查看此 sql 语句以获取计数

```
@sports = Sport.select('sports.*, (SELECT COUNT(*) FROM teams WHERE teams.sport_id = sports.id) AS teams_count') 
```

那么你可以使用`sport.teams_count`

```
- @sports.each do |sport|
  %tr
    %td= sport.name
    %td= sport.teams_count 
```

# output - 将输出定向到 .txt 文件并自动命名文件

> ID：15052255
> 
> 赞同：1
> 
> 时间：2013-02-24T13:37:22.687
> 
> 标签：output, raspberry-pi

我是 python 新手，一般都在编写代码。我想将用户输入的输出定向到 .txt 文件（如果可能）。如果可能的话，在第 3 行的输入之后命名它。感谢您的任何帮助或建议

```
userName = raw_input("login = ")
print "Welcome,", userName
number = raw_input("ID number = ")
weight = raw_input("Weight = ") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:56:36.217

在 Python 中写入文件非常简单：

```
f = open(number + '.txt', 'w') #create a file using the given input
f.write(userName + " " + weight)
f.close() 
```

如需进一步参考：[http ://docs.python.org/2/tutorial/inputoutput.html](http://docs.python.org/2/tutorial/inputoutput.html)

# performance - 在同一个表中插入数据 - IN 还是 INNER JOIN？

> ID：15052257
> 
> 赞同：2
> 
> 时间：2013-02-24T13:37:31.633
> 
> 标签：performance, stored-procedures, sql-server-2008-r2, query-optimization

在一个应用程序中，我有 2000 个帐户。第一个账户包含 10000 个客户，这是一个账户的最大限制。用户可以从第一个账户中选择客户，然后选择一些账户将选定的客户复制到选定的账户。所以可能的最大值是 1999 个帐户和 10000 个客户。

目前，我正在遍历 Account 列表并在客户端应用程序的每次迭代中调用存储过程。在每次迭代中，将一个 Account Id 和一个包含客户端 ID 列表的表值参数传递给 SP。使用 500 个帐户和 10000 个客户端进行测试时，需要 25 分钟、34 秒和 543 毫秒。在 SP 中的某个时刻，我正在使用以下代码 –

```
INSERT INTO Client
SELECT AccountId, CId, Code, Name, Email FROM Client
WHERE Client.Id IN(SELECT Id FROM @clientIdList) 
```

其中`@clientIdList`是包含 10000 个客户 ID 的表类型变量。

问题是，每次迭代后，都会将 10000 个新的客户端数据添加到客户端表中。因此，对于每次迭代，此`INSERT`操作在下一次迭代中将花费更长的时间。谷歌搜索一些 SP 性能提示我开始知道该`IN`子句被认为有些邪恶，大多数人建议使用它`INNER JOIN`。所以我把上面的代码改成了——

```
INSERT INTO Client
SELECT c.AccountId, c.CId, c.Code, c.Name, c.Email FROM Client AS c
INNER JOIN @clientIdList AS cil
ON c.Id = cil.Id 
```

现在需要 25 分 17 秒和 407 毫秒。没有什么令人兴奋的，真的！

我是存储过程领域的新手。那么，有了这么多的数据，它应该需要这么长时间吗？对于给定的场景，我应该考虑哪一个，`IN`或者`INNER JOIN`？欢迎提出建议和性能提示。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:18:26.743

如果不了解您的存储过程的更多信息，就很难准确判断发生了什么。

我建议检查执行计划。为此，请打开 SQL Server Management Studio。在一个新的查询窗口中调用您的存储过程并传入任何相关参数。

在执行此操作之前，请转到 Query 菜单并选择 Client Side Statistics 和 Actual Execution Plan 菜单项。

现在运行您的查询。

25 分钟后回来，底部应该有 3 或 4 个选项卡（取决于它是否返回数据。） 1 个选项卡用于结果，1 个选项卡用于消息，1 个选项卡用于客户端统计信息和 1 个选项卡为执行计划。

客户端统计选项卡可用于查看您所做的更改是否会影响性能（它会保留您上次运行的几次以向您展示它在这些方面的表现如何。）

更有趣的选项卡是执行计划选项卡。看看这个，它应该看起来像这样： ![在此处输入图像描述](../Images/ff7a9b120a7472c2b1062dfb7ab4a69c.png)

在这里它告诉我我的查询能够在我的所有表上使用主键索引。您想查看整个表扫描（因为这意味着它没有使用索引。）另外，如果我的查询不是那么简单并且花费了很长时间，并且没有使用索引，那么在“查询 1”下方将是绿色文本，说明“缺少索引”或类似的内容。它会告诉您需要创建的索引以提高性能。

另请注意，它会以百分比形式告诉您每个查询花费了多少。我有一个查询，所以很明显它花了 100% 的时间。但是，如果您的存储过程中有 5 个查询，其中一个占用了 80% 的时间，您可能需要先检查那个。

它还以百分比形式告诉您查询的每个部分花费了多少时间。这有助于尝试了解您的查询正在做什么。

通过这个，我猜你的存储过程还有其他问题，你可以问后续问题。

# android - 如何在 Android 上正确显示泰语词典？

> ID：15052258
> 
> 赞同：4
> 
> 时间：2013-02-24T13:37:34.870
> 
> 标签：android, thai

简短的序言。泰文有可能出现在辅音上方的元音符号，也有出现在辅音上方的变音符号（DS）；当元音和DS都出现时，它们出现在另一个之上，因此元音设置在辅音之上，DS设置在元音之上。

我正在编写一个以泰语显示文本的应用程序。在模拟器（API 10）中一切看起来都很完美，但在真实设备上却不是（三星 GT-I9001 和 Gingerbread 2.3.6）。

我准备了两张图片来说明问题。我有一个简单的布局，顶部只有一个 TextView；该视图中显示两个词พี่สาว和ไม้。

这就是它的样子（来自模拟器的截图）：

![在此处输入图像描述](../Images/c2da33a7ef0e14db84477e7826b2c85f.png)

第一个字符有元音和元音上方的 DS，最后一个字符只有 DS。

这是我手机的截图：

![在此处输入图像描述](../Images/13aeadcbe0ab506dfa936952e275d04a.png)

两个 DS 都向下滑动，现在元音和 DS 在第一个字符上方相互重叠。请注意，最后一个字符看起来比它应该的低（它应该是整行高，就像您在第一个屏幕截图中看到的那样）。

我发现问题出在系统范围内：我将这些泰语单词复制到一个简单的网页中，然后将其加载到手机的网络浏览器中，但遇到了同样的问题。字体渲染似乎被破坏了。

所以问题是：如何绕过这个？我是否需要安装字体（如何？）或者一些语言包（再次，如何？），或者唯一的方法是升级 Android？

PS：Android 4.0.4 上没问题。也许只有旧版本受到影响。

**更新：** WarrenFaith 给出了关于设置自定义字体的有希望的建议。然而，这似乎并不像看起来那么简单。我尝试了几种不同的字体，包括 Roboto（在 ICS 中引入）、来自 msttf Linux 软件包的 Verdana 以及其他一些字体。为了查看字体是否真正加载和应用，我在文本中添加了一些拉丁文和西里尔文字符。

结果很有趣。只有拉丁文和西里尔文字符发生变化，泰文字符没有变化。看起来字体没有所需的字形，Android 将它们替换为使用某些默认字体呈现的字形。

（我不明白为什么 Roboto 不起作用；它是官方的 Android 字体——它不应该完全支持整个 Unicode 吗？）

所以看来我必须找到有泰语字形的字体。

而且我仍然想知道在 Android 4.0.4 中默认使用什么字体。

**快乐的结局：**感谢 WarrenFaith 的建议、Google 和[这篇博客文章](http://nexusonehacks.net/android-hacks/droid-hack-how-to-install-thai-font-on-droid/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T13:42:01.617

如果默认文本/字体被破坏，您应该提供您知道可以使用的字体。要实现字体，您可以使用以下答案：

1.  [Android - 使用自定义字体](https://stackoverflow.com/questions/3651086/android-using-custom-font)
2.  [在 Android 中使用自定义字体](https://stackoverflow.com/questions/2973270/using-a-custom-typeface-in-android/14558090#14558090)

# salesforce - visualforce 中的重新渲染和渲染属性

> ID：15052261
> 
> 赞同：0
> 
> 时间：2013-02-24T13:37:54.017
> 
> 标签：salesforce, apex-code, visualforce

我用源代码写了一个visualforce页面

```
<apex:page controller="MyController1">
<apex:form>
<apex:pageBlock >
<apex:pageBlockSection  id="search">
<apex:commandLink action="{!commandLinkAction}" value="Advance Search"  reRender="thePanel" id="theCommandLink"/>
<apex:outputPanel id="thePanelWrapper">
<apex:outputPanel id="thePanel" rendered="{! rend}" layout="block">My div</apex:outputPanel>
</apex:outputPanel>
</apex:pageBlockSection>
</apex:pageBlock>
</apex:form>
</apex:page> 
```

MyController1 类是

```
public class MyController1{
public Boolean rend{get;set;}
public PageReference commandLinkAction(){
rend=true;
return null;
}

} 
```

当我点击“高级搜索”链接时没有任何反应，但我期待 ID 为“thePanel”的 outputPanel 应该呈现。为什么它不呈现，请有人解释一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T04:15:16.167

在您单击不在页面上的面板链接的那一刻，SF 没有呈现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-23T22:42:47.327

正如@Shimshon 所说，当从 Visualforce 生成 HTML 代码时，标记为的 Visualforce 组件`rendered="false"`不会显示在生成的 HTML 文档中。

在这种情况下：

```
<apex:outputPanel id="thePanel" rendered="{! rend}" layout="block"> 
```

如果要重新渲染此面板，则必须确保该组件将显示在 HTML 代码中，以便重新渲染操作可以找到它。由于`{! rend}`最初在控制器的构造函数中设置为 false，“thePanel”永远不会在页面中呈现，因此您尝试重新呈现不存在的组件。

@theGreatDanton 的解决方案将起作用，因为`<apex:outputPanel id="thePanelWrapper">`始终呈现容器面板：

```
<apex:commandLink action="{!commandLinkAction}" value="Advance Search"  reRender="thePanelWrapper" id="theCommandLink"/> 
```

如果这个面板被 rerender 属性指向，那么“thePanelWrapper”及其子节点（“thePanel”）将被更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T02:37:26.793

试试下面的代码。

```
<apex:page controller="MyController1">
<apex:form>
<apex:pageBlock >
<apex:pageBlockSection  id="search">
<apex:commandLink action="{!commandLinkAction}" value="Advance Search"  reRender="thePanelWrapper" id="theCommandLink"/>
<apex:outputPanel id="thePanelWrapper">
<apex:outputPanel id="thePanel" rendered="{! rend}" layout="block">My div</apex:outputPanel>
</apex:outputPanel>
</apex:pageBlockSection>
</apex:pageBlock>
</apex:form>
</apex:page>

public class MyController1{
   public Boolean rend{get;set;}
   //setting the boolean to false in the constructor
   public MyController1(){
          rend = false;
   }
   public void commandLinkAction(){
      rend=true;
     // return null;
   }

} 
```

希望这可以帮助！！

# php - 从字符串中删除链接

> ID：15052262
> 
> 赞同：0
> 
> 时间：2013-02-24T13:37:57.073
> 
> 标签：php, string, url

我有一个函数可以从这种格式的字符串中删除所有链接： .... 它只会删除指向不在数组中的域的链接。如果链接的域不在数组中，它将删除链接标签，并且只有链接中的内部 html。

它看起来像这样：

```
if(!function_exists("checkLink")){ 

    function checkLink($link, $text){ 
        $safe_domains[] = "domain1.com"; 
        $safe_domains[] = "domain2.com"; 

        $prefix = ""; 

        if(substr($link, 0, 8) == "mailto:"){ 
            // do nothing - link is fine 
        } 
        else{ 
            $url = @parse_url($link, PHP_URL_HOST); 
            $dolink = false; 
            foreach($safe_domains as $domain){ 
                if(strpos($url, $domain) !== FALSE){ 
                    $dolink = true; 
                    break; 
                } 
            } 

            if(!$dolink){ 
                return preg_replace("/<\\/?a(\\s+.*?>|>)/", "", $text); 
            } 

        } 

        return "<a href=\"$link\" target=\"_blank\">$text</a>"; 

    } 
} 

$post['message'] = preg_replace("/<a href=\\\"(.*?)\\\" target=\\\"_blank\\\">(.*?)<\/a>/ime", 'checkLink("$1", "$2")',$post['message']); 
```

然而，问题是，虽然它可以很好地使用这样的链接：

```
<a href="http://example.com" target="_blank">Link text</a> 
```

如果链接中有换行符，它将不起作用，如下所示：

```
<a href="http://example.com" target="_blank">Link 
text</a> 
```

有人对此有解决方案吗？谢谢！

# java - 当我总共发送 7mb 时，服务器只接收到 16 个 UDP 512 字节数据包

> ID：15052265
> 
> 赞同：0
> 
> 时间：2013-02-24T13:38:19.640
> 
> 标签：java, network-programming, udp, packet

我将一个 7mb 的文件分成 512b 个块，然后使用 udp 将其发送到服务器。客户端发送了大约 14000 个数据包，但在服务器端 socket.receive(packet) 仅收到 16 个数据包后阻塞。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T13:40:07.227

UDP被定义为不可靠的协议。数据包可能会丢失，并且不会通知发送者。它们也可能乱序到达，甚至重复到达。

UDP 适用于不需要错误检查和纠正或由应用程序本身执行的用途。

如果您想要一个可靠的协议，请开始使用 TCP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T13:42:46.107

与 TCP 相比，UDP 既不保证数据包顺序也不保证实际传送（没有 TCP 中的流量控制）。请参阅此问题：[确保 UDP 中的数据包顺序](https://stackoverflow.com/q/3745115/1175253)

# php - 提交后的JqueryUI Datepicker SelectedDate

> ID：15052266
> 
> 赞同：0
> 
> 时间：2013-02-24T13:38:21.290
> 
> 标签：php, javascript, jquery, jquery-ui, datepicker

我有一个内联日期选择器，它填充输入文本框。

```
$("#left-calendar").datepicker({
    altField: "#left-date-text"
}); 
```

left-date-text 是在一个表单中，它带有一个提交按钮提交到一个 php 脚本。日期很好用 $date=$_POST['d'];。

```
<input type="text" id="left-date-text" placeholder="Data" value='<?php echo $date; ?>' name="d" /> 
```

提交后，内联选择今天的日期，它会自动填充#left-date-text。我希望这是选定的日期（$date）。我添加了 echo $date 的值，但它不起作用。似乎 jquery 在呈现时填充了文本框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:02:21.573

您可以尝试添加`defaultDate : '$date'`到 datepicker 定义中，因此如果 $date 中存储了日期，则选择器会将其用作默认日期。

编辑：您可以将 setter 用于 datePicker 的默认日期属性，如[jQueryUI 文档](http://api.jqueryui.com/datepicker/#option-defaultDate)中所示。就像是

```
`echo "<script>$('#left-calendar').
    datepicker('option', 'defaultDate', '$date');</script>"` 
```

在身体里。

# bash - 将 sed 与数组一起使用

> ID：15052268
> 
> 赞同：3
> 
> 时间：2013-02-24T13:38:32.933
> 
> 标签：bash, sed

谁能告诉我为什么这不起作用？

```
Temp=$(sed -n '/"${Arr[$index]}"/,/"${Arr[$((index+1))]}"/p' $Text); 
```

它仍然不起作用。我试图这样做：

```
index=0
while [ "$index" -lt "$((Arr_LEN-1))" ]; do
    Temp=$(sed -n "/${Arr[$index]}/,/${Arr[$((index+1))]}/p" $Text);       
    let "index++"
done 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T13:47:44.737

因为`sed`脚本是单引号，这会阻止所有扩展：

> 将字符括在单引号中会保留引号内每个字符的字面值。

将单引号更改为双引号应该会有所帮助：

> 将字符括在双引号中会保留引号内所有字符的字面值，但 $、`、\ 以及启用历史扩展时的! 除外。字符 $ 和 ` 在双引号中保留其特殊含义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T13:47:52.753

因为您使用的是单引号。尝试：

```
Temp=$(sed -n "/${Arr[$index]}/,/${Arr[$((index+1))]}/p" $Text); 
```

# c# - 如何在域类中表达域逻辑？

> ID：15052276
> 
> 赞同：2
> 
> 时间：2013-02-24T13:39:07.913
> 
> 标签：c#, oop, class-design, business-logic

我正在尝试将带有意大利面条 VBA 代码的旧 MS Access 应用程序移植到 C# 和 OOP，并且我正在努力寻找将域逻辑放入我的域类的最佳方法。

我将使用一个`Country`类作为一个简单的例子。它具有三个具有不同业务规则的属性：

*   `CountryCode`一旦创建了国家，就无法再更改，因为这会导致使用国家/地区的第三方应用程序出现问题
*   `CountryName`可以随时更改，无需任何底层逻辑或业务规则
*   `IsoCode`可以随时更改，但长度必须恰好为 2 个字符
    *（`IsoCode`实际上有更多规则，但在此示例中，为了简单起见，我们假设“必须正好为 2 个字符”是唯一规则）*

我创建了两个略有不同的课程版本。
我在面向对象编程方面非常缺乏经验，所以我需要帮助决定：

*   我使用哪种方法有关系吗？
*   其中之一（或两者）是否有我看不到的问题？
*   有没有更好的方法？

我的两种方法现在对我来说都很好，但我不知道它们以后是否会引起问题（有问题的应用程序已经使用了十年，并且可能会存在很长时间）。

* * *

**版本 1：**

```
public class Country1
{
    public string CountryCode { get; private set; }
    public string CountryName { get; set; }
    public string IsoCode { get; private set; }

    public Country1(string countryCode, string countryName, string isoCode)
    {
        this.CountryCode = countryCode;
        this.CountryName = countryName;
        SetIsoCode(isoCode);
    }

    public void SetIsoCode(string isoCode)
    {
        if (isoCode.Length != 2)
        {
            throw new ArgumentException("must be exactly 2 characters!");
        }

        this.IsoCode = isoCode;
    }
} 
```

* * *

**版本 2：**

```
public class Country2
{
    public Country2(string countryCode, string countryName, string isoCode)
    {
        this.countrycode = countryCode;
        this.CountryName = countryName;
        this.isocode = isoCode;
    }

    private readonly string countrycode;
    private string isocode;

    public string CountryCode
    {
        get { return this.countrycode; }
    }

    public string CountryName { get; set; }

    public string IsoCode
    {
        get { return this.isocode; }
        set
        {
            if (value.Length != 2)
            {
                throw new ArgumentException("must be exactly 2 characters!");
            }

            this.isocode = value;
        }
    }
} 
```

* * *

关于我为什么要问这个以及我想知道什么的更多背景信息：

我已经阅读了很多关于“正确的 OOP 方式”的不同意见。
有人说你根本不应该暴露 getter 和 setter。我理解为什么这对设置器来说是个坏主意，这就是为什么`CountryCode`只能从构造函数中设置。

有人说，你应该使用`GetXXX`和`SetXXX`方法，而不是使用任何 getter 和 setter。我可以看到这在某些情况下是有意义的（例如，`SetXXX`当您有多个需要一起设置的值时，具有多个参数的方法）。
但通常有像`CountryName`我的示例中的简单值，这是一个没有任何逻辑的“愚蠢”值。当我在一个类中有十个这样的东西时，我不想为它们中的每一个创建`GetXXX`和`SetXXX`方法。

然后是类似 的东西`IsoCode`，它也与任何其他属性都没有联系（因此无需使用`SetXXX`方法将其与其他属性一起设置）。但它包含一些验证，所以我可以**创建**一个`SetXXX`方法，或者只是在 setter 中进行验证（并在出现问题时抛出异常）。

抛出异常甚至是通知调用者错误的最佳方式吗？[有人说这很好](https://stackoverflow.com/a/22043/6884)，[有人说你应该只为“异常”情况抛出异常](https://stackoverflow.com/q/4785316/6884)。
IMO 当有人输入无效的 ISO 代码时，这并不是什么特别的情况，但是我应该如何向客户端获取发生错误的信息（包括人类可读的错误消息！！）？使用带有错误代码和`ErrorMessage`字符串属性的响应对象会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T13:50:49.267

我个人认为属性和方法实现之间没有太大区别。当值可以独立设置时，我更喜欢使用属性。当值以某种方式相互依赖时（例如，您正在设置整数 x 和 y 并且 y 不能大于 x），我使用 setter 方法强制同时向您的模型提供多个值。

在您的视图模型中拥有简单的验证逻辑（例如，必填字段、字段长度）非常有意义，因为这允许您将验证更紧密地与用户界面联系起来（例如，您可以突出显示之后无效的字段已填写）。

*   对于 WPF 验证，请参阅： http: [//www.codeproject.com/Articles/97564/Attributes-based-Validation-in-a-WPF-MVVM-Applicat](http://www.codeproject.com/Articles/97564/Attributes-based-Validation-in-a-WPF-MVVM-Applicat)
*   对于 MVC 验证，请参阅： http: [//www.codeproject.com/Articles/249452/ASP-NET-MVC3-Validation-Basic](http://www.codeproject.com/Articles/249452/ASP-NET-MVC3-Validation-Basic)

我强烈推荐 Eric Lippert 的这篇文章，关于什么样的条件适合抛出/捕获异常：

[http://blogs.msdn.com/b/ericlippert/archive/2008/09/10/vexing-exceptions.aspx](http://blogs.msdn.com/b/ericlippert/archive/2008/09/10/vexing-exceptions.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T14:11:31.667

`SetXXX`当我有一些规则涉及多个必须同时设置的值时，我倾向于很少使用属性来更改单个值和方法（就像 Andy Skirrow 所说的那样）。

`SetXXX`一切的方法都是一个常见的“Javaish”约定（尽管它在许多没有像 C# 这样的 setter 和 getter 的语言中使用）。

人们试图将他们为某种语言学到的一些好的实践强加到他们可以使用的每一种语言中，即使它不一定很适合，或者该语言有更好的替代方案。

尽量不要成为“OOP 狂人”。这只会让你头疼。OOP 不是一种宗教（恕我直言，即使是宗教也不应该有狂热分子，但这是另一个故事）。

**回到正题**

这两种方法在功能上没有区别，将来也不会造成任何伤害。采取您填写的方式，使其更具可读性和令人愉悦的代码。这将比“正确的 OOP 方式”重要得多，因为许多人对“更好的方式”做事都有自己的定义。

**验证**

如果您正在使用诸如 MVC 之类的结构或体系结构模式，则可以使用*数据注释属性*来强制验证，并且根据框架，也可以使用它来强制客户端验证。

有关链接，请参阅@Andy Skirows 的答案。

# stata - 如何用各自的平均值替换零值答案？

> ID：15052277
> 
> 赞同：1
> 
> 时间：2013-02-24T13:39:17.210
> 
> 标签：stata

我有一个家庭数据集，其中包括各种食物的支出。我将它们分为主要的食物组，价格是用支出值除以数量得出的。对于一些家庭来说，价格为零，因为他们对相应食品组的消费为零。在这种情况下，我想将价格作为选择该非消费家庭的相应市、区和省的平均价格。

我怎么能用 STATA 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:08:29.360

正值的平均值是

```
egen mean_price = mean(price / (price > 0)), by(province district city) 
```

您可以通过以下方式替换克隆中的零

```
gen price2 = cond(price > 0, price, mean_price) 
```

除法技巧可以这样解释。如果`price > 0`为真，则该表达式的值为 1；如果 false 为 0。除以 1 显然会使值保持不变。除以 0 会产生缺失，它`egen`的`mean()`函数将忽略，这正是我们想要的。

在[http://www.stata-journal.com/article.html?article=dm0055引用的文章中有更多的相关技术讨论](http://www.stata-journal.com/article.html?article=dm0055)

PS Stata 是正确的拼写。这是一个发明词，从来都不是首字母缩略词。

PS您还没有在[How to get the Difference of two variables, when there are missing values? 中确认答案？](https://stackoverflow.com/questions/14795283/how-to-get-the-difference-of-two-variables-when-there-are-missing-values)

之后：

在这种情况下，另一种方法是

```
 egen total = total(price), by(province district city)
  egen number = total(price > 0), by(province district city) 
  gen price2 = cond(price > 0, price, total/number) 
```

因为零价格对总数没有影响。`double`始终使用s。

# c++ - std::chrono：将自定义持续时间添加到 time_point

> ID：15052287
> 
> 赞同：14
> 
> 时间：2013-02-24T13:40:29.953
> 
> 标签：c++, chrono

以下代码确实编译（`g++ 4.7.2`）：

```
#include <chrono>

typedef std::chrono::duration< double > double_prec_seconds;
typedef std::chrono::time_point< std::chrono::system_clock > timepoint_t;

void do_something( const timepoint_t& tm )
{
    // ...
}

int main( int argc, char** argv )
{
    timepoint_t t0 = std::chrono::system_clock::now();
    timepoint_t t1 = t0 + std::chrono::seconds(3);

    // timepoint_t t3 = t0 + double_prec_seconds(3.14);
   auto t3 = t0 + double_prec_seconds(3.14);

    do_something( t1 );
} 
```

我的问题是我不知道有什么类型`t3`。它不是`timepoint_t`，并且取消注释具有明确给出的类型的行将无法编译。函数调用也一样：我不能`do_something`用`t3`.

所以我的问题是：

*   为什么转换失败？
*   获得双精度秒持续时间的最佳方法是什么？

我知道我可以像这样使用额外的演员表

```
// this works
timepoint_t t3 = t0 + std::chrono::duration_cast< std::chrono::milliseconds >(double_prec_seconds(3.14)); 
```

但我想避免这种情况。

先感谢您！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-24T14:04:21.727

转换失败，因为没有从

```
std::chrono::time_point< std::chrono::system_clock,
                         std::chrono::system_clock::duration > 
```

到

```
std::chrono::time_point< std::chrono::system_clock,
                         std::chrono::duration< double > > 
```

最简单的方法是将`double_prec_seconds`作为模板参数提供给`time_point`，请参阅[std::chrono::time_point](http://en.cppreference.com/w/cpp/chrono/time_point)

```
typedef std::chrono::time_point< std::chrono::system_clock,
                                 double_prec_seconds > timepoint_t; 
```

那么你已经有了正确的`t3`and类型`do_something`。

# cuda - CUDA 5 是否支持设备代码中的 STL 或 THRUST？

> ID：15052295
> 
> 赞同：2
> 
> 时间：2013-02-24T13:41:20.763
> 
> 标签：cuda, thrust

它提到CUDA 5允许从内核调用库这是否意味着CUDA 5可以在设备代码中使用推力或STL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-30T08:34:38.947

CUDA 5 首次具有设备代码链接器。这意味着您可以拥有**设备**功能的单独目标文件并链接它们，而不必在编译单元范围内声明它们。它还增加了内核调用其他内核的能力（但仅在计算 3.5 Kepler 设备上）。

这并不意味着 C++ 标准库模板或 Thrust 可以在内核代码中使用。

# c# - MvvmCross 和 MonoTouch：移除顶栏

> ID：15052297
> 
> 赞同：2
> 
> 时间：2013-02-24T13:41:41.497
> 
> 标签：c#, xamarin.ios, mvvmcross

我正在使用 MvvmCross 创建 MonoTouch 应用程序。我遵循了[基本教程](https://github.com/slodge/MvvmCross/wiki/Tutorial-Part-1)，到目前为止一切都很好。唯一的问题是我的（初始且仅到目前为止）视图显示为顶部栏/导航栏，这是我不想要的。我可以通过调用隐藏导航栏

```
this.NavigationController.NavigationBarHidden = true; 
```

在视图控制器的 ViewDidLoad 中。我宁愿不必抑制导航栏，而是根本不存在。它出现的事实表明，也许我做错了什么/继承了错误的基类？

有关我的代码的更多详细信息：

视图控制器继承自`MvxBindingTouchViewController`.

我的 Setup 类继承自`MvxBaseTouchBindingSetup`（我不会在任何地方使用 TouchDialog，所以我不会继承自`MvxTouchDialogBindingSetup`）。

任何帮助将不胜感激！如果我需要提供有关我的代码的更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:08:04.080

导航栏是 UINavigationController 的一部分，在默认 Presenter 中使用。

Presenter 是决定如何显示视图（UIViewController）的东西 - 是否显示在弹出窗口中，显示为模态视图，推送到导航控制器等。

如果您想自定义 Presenter - 例如使其隐藏导航栏 - 然后只需在您的 AppDelegate.cs 中找到代码的地方切换您自己的实现：

```
 // initialize app for single screen iPhone display
        var presenter = new MvxTouchViewPresenter(this, _window);
        var setup = new Setup(this, presenter);
        setup.Initialize(); 
```

您可以在 TwitterSearch 和 Conference 示例中看到一些自定义演示者的示例。TwitterSearch 为手机和平板电脑使用不同的演示者；Conference 使用一个知道多个选项卡的演示者，每个选项卡都包含一个 NavigationController。

还有一些关于自定义演示者的其他问题，例如[MvvmCross 使用选项卡中的模态 ViewController](https://stackoverflow.com/questions/11037119/mvvmcross-using-a-modal-viewcontroller-from-a-tab)以及[为什么 MvvmCross 中的 MvxModalSupportTouchViewPresenter 仅支持一个模态视图](https://stackoverflow.com/questions/11041605/why-does-mvxmodalsupporttouchviewpresenter-in-mvvmcross-only-support-one-modal-v/)

# javascript - 使用java脚本在文本区域中粗体选择文本

> ID：15052298
> 
> 赞同：-2
> 
> 时间：2013-02-24T13:41:42.133
> 
> 标签：javascript, html, textarea, getelementbyid

只需在文本区域内将所选文本加粗

这是我的代码：

```
<script type="text/javascript">
function Bold() {
    document.getElementById('firstTextarea').value = 'bold';
</script> 
```

HTML：

```
<textarea id="firstTextarea" rows="12" cols="40"></textarea>
<button onclick="Bold();">Bold</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T13:44:28.737

您正在设置该`value`Textarea 字段的属性。您要设置的`font-weight`是这样完成的属性：

`document.getElementById('firstTextarea').style.fontWeight = 'bold';`

# visual-studio - VS C++ 6.0 与 sqlite *.dll

> ID：15052305
> 
> 赞同：1
> 
> 时间：2013-02-24T13:42:12.803
> 
> 标签：visual-studio, sqlite, visual-c++

我在 VS 使用方面完全是菜鸟，尤其是在 6.0 版本中。我想在 C++ 中创建第一个使用 sqlite 库的项目。[首先，我从这里](http://www.sqlite.org/download.html)下载了 *.dll 文件。现在我想在项目中使用它的库。这是我的简单代码：

```
#include "stdafx.h"
#include <stdio.h>
#include <sqlite3.h>

int main(int argc, char* argv[])
{
    printf("Hello World!\n");
    return 0;
} 
```

如何添加此 *.dll 文件以使 sqlite3.h 文件可见？

* * *

更新 1

我下载了合并文件并将 *.c 和 *.h 文件添加到这样的项目中：

![在此处输入图像描述](../Images/16419388e800f1720a0698a96588a381.png)

但我收到错误和许多警告：

```
 --------------------Configuration: DBApp - Win32 Debug--------------------
Compiling...
StdAfx.cpp
Compiling...
DBApp.cpp
C:\DOCUMENTS AND SETTINGS\ADMINISTRATOR\MOJE DOKUMENTY\POBIERANIE\DBApp\DBApp.cpp(6) : fatal error C1083: Cannot open include file: 'sqlite3.h': No such file or directory
Generating Code...
Compiling...
sqlite3.c
c:\documents and settings\administrator\moje dokumenty\pobieranie\sqlite-src\sqlite3.c(238) : warning C4005: 'SQLITE_DEFAULT_PAGE_SIZE' : macro redefinition
        c:\documents and settings\administrator\moje dokumenty\pobieranie\sqlite-src\sqlite3.c(234) : see previous definition of 'SQLITE_DEFAULT_PAGE_SIZE'
c:\documents and settings\administrator\moje dokumenty\pobieranie\sqlite-src\sqlite3.c(253) : warning C4005: 'SQLITE_MAX_DEFAULT_PAGE_SIZE' : macro redefinition
        c:\documents and settings\administrator\moje dokumenty\pobieranie\sqlite-src\sqlite3.c(249) : see previous definition of 'SQLITE_MAX_DEFAULT_PAGE_SIZE'
c:\documents and settings\administrator\moje dokumenty\pobieranie\sqlite-src\sqlite3.c(283) : warning C4005: 'SQLITE_MAX_TRIGGER_DEPTH' : macro redefinition
        c:\documents and settings\administrator\moje dokumenty\pobieranie\sqlite-src\sqlite3.c(281) : see previous definition of 'SQLITE_MAX_TRIGGER_DEPTH'

 ...

c:\documents and settings\administrator\moje dokumenty\pobieranie\sqlite-src\sqlite3.c(105419) : warning C4005: 'MIN' : macro redefinition
        c:\documents and settings\administrator\moje dokumenty\pobieranie\sqlite-src\sqlite3.c(45386) : see previous definition of 'MIN'
c:\documents and settings\administrator\moje dokumenty\pobieranie\sqlite-src\sqlite3.c(108807) : fatal error C1010: unexpected end of file while looking for precompiled header directive
Generating Code...
Error executing cl.exe.

DBApp.exe - 2 error(s), 232 warning(s) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:07:20.473

您必须添加一些路径到您的 VisualC6 项目 (DBApp.dsp)

包括，像这样包括 Java 7 包括（这是一个例子，你不需要 Java）： ![在此处输入图像描述](../Images/60811cfda0338df0d4461316bf11014f.png)

还有库，同样是 Java VM (jvm.lib/dll) 的示例 ![在此处输入图像描述](../Images/add1b2561d0e921b4d7fb9d487c2754f.png)

要显示此对话框，请按 Alt-F7

# ios - 侧面的presentViewController动画

> ID：15052308
> 
> 赞同：8
> 
> 时间：2013-02-24T13:42:22.470
> 
> 标签：ios, viewcontroller

我有一个单一的视图应用程序，并希望在按下右侧的导航栏按钮时显示一个新的 ViewController。我用这段代码调用这个 VC：

```
- (IBAction)createEntryButton:(id)sender {
    CreateEntryViewController *vc2 = [[CreateEntryViewController alloc] init];
    [self presentViewController:vc2 animated:TRUE completion:nil];
} 
```

然而，这个动画`vc2`从底部引入，根据我的 UI，这似乎违反直觉。所以我的问题是：

**如何使用 presentViewController 使我的 vc2 从右侧而不是底部显示？**

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T14:10:17.943

最干净的方法是使用 navigationController 来推送和弹出视图。

如果您已经在 NavigationController 中

```
[self.navigationCtroller pushViewController:vc2 animated:TRUE completion:nil] 
```

如果不是，请调整将视图控制器添加到窗口的代码。如果您的 VC 是 rootWindowController 并且您没有使用情节提要，这可能在您的 AppDelegate 中

如果您使用故事板，请调整故事板，以便您在导航控制器中

* * *

否则，如果您出于任何原因不希望这样做：:) 只需使用 [UIView animate:vc2.view ....] 在 2\. VC 的视图中手动设置动画

内联编写——方法名称不匹配，但显示一般方法：

```
UIView *v = vc2.view;
CGRect f = v.frame;
f.origin.x += self.view.frame.size.width; //move to right

v.frame = f;

[UIView animateWithDuration:0.5 animations:^{
    v.frame = self.view.frame;
} completion:^(BOOL finished) {
   [self presentViewController:vc2 animated:NO completion:nil];
}]; 
```

在完成块中呈现视图控制器 vc2 非动画，因为您自己已经这样做了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-29T14:05:48.030

这对我有帮助，

```
- (void)presentNewViewController{
    NewViewController *objNewViewController =[[NewViewController alloc]initWithNibName:@"NewViewController" bundle:nil];

    UIView *tempNewVCView = [UIView new];
    tempNewVCView = objNewViewController.view;
    tempNewVCView.frame = self.view.frame;

    CGRect initialFrame = self.view.frame;
    initialFrame.origin.x = self.view.frame.size.width;

    tempNewVCView.frame = initialFrame;

    [self.view addSubview:tempNewVCView];

    [UIView animateWithDuration:0.3 animations:^{
        tempNewVCView.frame = self.view.frame;
    } completion:^(BOOL finished) {
        [self presentViewController:objNewViewController animated:NO completion:^{
        }];
    }];
} 
```

# windows-phone-8 - 如何以编程方式退出或退出我的 Windows Phone 8 应用程序？

> ID：15052311
> 
> 赞同：9
> 
> 时间：2013-02-24T13:42:43.340
> 
> 标签：windows-phone-8

我正在开发一个 Windows Phone 8 应用程序。

1.  如何以编程方式（通过代码）从我的 Windows Phone 8 应用程序中退出或退出？

2.  我可以通过哪些方式以编程方式（通过代码）退出或退出我的 Windows Phone 8 应用程序？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-24T14:33:13.687

在 WP8 中有一个新的 API 可以让你终止应用程序：

```
Application.Current.Terminate(); 
```

通过调用该方法，您的应用程序将立即终止。但是`Application_Closing`不会调用该事件，并且`IsolatedStorageSettings.ApplicationSettings`不会自动保存字典。

因此，如果您在 IsolatedStorageSettings.ApplicationSettings 中有不想丢失的数据，那么保存它是明智的：

```
IsolatedStorageSettings.ApplicationSettings.Save();
Application.Current.Terminate(); 
```

此外，该方法不应被滥用。有关合法用例的更多信息，请参阅[http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.application.terminate(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.application.terminate(v=vs.105).aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T08:26:13.007

```
while (((PhoneApplicationFrame)App.Current.RootVisual).CanGoBack)
{
    ((PhoneApplicationFrame)App.Current.RootVisual).RemoveBackEntry();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-21T15:23:56.757

在 Windows Phone 8.1 中，该方法已重命名为

```
Application.Current.Exit(); 
```

# c++ - MinGW Windows.h 无法编译

> ID：15052315
> 
> 赞同：1
> 
> 时间：2013-02-24T13:42:56.060
> 
> 标签：c++, windows, compilation, include

我在 64 位 Windows 7 上使用 MinGW g++ 4.6.2。至于 IDE，我使用 Eclipse CDT。

我的项目有问题 - 当我包含“Windows.h”文件时，我遇到了数千个错误。我试图创建一个仅包含 Windows.h 的不同文件，但它给出了相同的错误。

。H：

```
/*
 * WinWrapper.h
 *
 *  Created on: Feb 24, 2013
 *      Author: martin
 */

#ifndef WINWRAPPER_H_
#define WINWRAPPER_H_

char* winGetMainModule();

#endif /* WINWRAPPER_H_ */ 
```

.cpp：

```
#include "WinWrapper.h"

#include <windows.h>

char* winGetMainModule() {

    return nullptr;

} 
```

没有其他文件包括“WinWrapper.h”或 Windows.h。

```
template with C linkage GameProj        line 172, external location: c:\mingw\lib\gcc\mingw32\4.6.2\include\c++\bits\locale_classes.tcc C/C++ Problem
template with C linkage GameProj        line 228, external location: c:\mingw\lib\gcc\mingw32\4.6.2\include\c++\bits\locale_classes.tcc C/C++ Problem
template with C linkage GameProj        line 128, external location: c:\mingw\lib\gcc\mingw32\4.6.2\include\c++\bits\locale_classes.tcc C/C++ Problem
template with C linkage GameProj        line 133, external location: c:\mingw\lib\gcc\mingw32\4.6.2\include\c++\bits\locale_classes.tcc C/C++ Problem
confused by earlier errors, bailing out GameProj        line 118, external location: c:\mingw\lib\gcc\mingw32\4.6.2\include\c++\bits\ios_base.h C/C++ Problem
declaration of C function 'constexpr std::_Ios_Openmode std::operator&(std::_Ios_Openmode, std::_Ios_Openmode)' conflicts with  GameProj        line 117, external location: c:\mingw\lib\gcc\mingw32\4.6.2\include\c++\bits\ios_base.h C/C++ Problem
previous declaration 'constexpr std::_Ios_Fmtflags std::operator&(std::_Ios_Fmtflags, std::_Ios_Fmtflags)' here GameProj        line 77, external location: c:\mingw\lib\gcc\mingw32\4.6.2\include\c++\bits\ios_base.h  C/C++ Problem
template with C linkage GameProj        line 614, external location: c:\mingw\lib\gcc\mingw32\4.6.2\include\c++\type_traits C/C++ Problem
template with C linkage GameProj        line 623, external location: c:\mingw\lib\gcc\mingw32\4.6.2\include\c++\type_traits C/C++ Problem
template with C linkage GameProj        line 629, external location: c:\mingw\lib\gcc\mingw32\4.6.2\include\c++\type_traits C/C++ Problem
template with C linkage GameProj        line 636, external location: c:\mingw\lib\gcc\mingw32\4.6.2\include\c++\type_traits C/C++ Problem
template with C linkage GameProj        line 592, external location: c:\mingw\lib\gcc\mingw32\4.6.2\include\c++\type_traits C/C++ Problem
template with C linkage GameProj        line 598, external location: c:\mingw\lib\gcc\mingw32\4.6.2\include\c++\type_traits C/C++ Problem
template with C linkage GameProj        line 602, external location: c:\mingw\lib\gcc\mingw32\4.6.2\include\c++\type_traits C/C++ Problem 
```

... + 大约 200 KB 的其他错误日志

其他项目信息：

1.  使用库 SDL、SDL_Image
2.  定义了 TARGET_WINX86
3.  编译器标志 -c -fmessage-length=0 -std=c++0x

不知道发生了什么。请帮忙，提前谢谢:)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T15:04:23.823

> 来自 C:\workspace\GameProj\src\Base/string.h

↑ 罪魁祸首。

您有自己的`string.h`文件，由于包含路径，该文件正在被包含来自`winnt.h`.

# java - Executor 和 ExecutorService 有什么区别？

> ID：15052317
> 
> 赞同：52
> 
> 时间：2013-02-24T13:43:14.957
> 
> 标签：java

我想知道Executor和ExecutorService有什么区别？

任何例子都会有所帮助。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-02-24T13:47:37.187

[Executor](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executor.html)只是执行你给它的东西。

[ExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)添加了启动、关闭以及等待和查看您已提交以在 Executor（它扩展）之上执行的作业状态的能力。

# c# - 如何使用 C# 连接/断开宽带连接？

> ID：15052322
> 
> 赞同：1
> 
> 时间：2013-02-24T13:43:43.403
> 
> 标签：c#, connect, disconnect

我想用c#连接/断开宽带连接

```
 string[] lines = System.IO.File.ReadAllLines(Path);
       // System.Windows.Forms.MessageBox.Show(lines[0] + "  " + lines[1] + "  " + lines[2]);
        System.Diagnostics.Process process = new System.Diagnostics.Process();
        System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
        startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
        startInfo.FileName = "cmd.exe";
        startInfo.Arguments = string.Format("/c rasdial {0} {1} {2}",lines[2]  , lines[0]  , lines[1]);        
        process.StartInfo = startInfo;
        process.Start(); 
```

# javascript - 自定义投影的不稳定叠加行为，Google Maps API v3

> ID：15052324
> 
> 赞同：1
> 
> 时间：2013-02-24T13:44:18.663
> 
> 标签：javascript, google-maps, google-maps-api-3

我想使用 Google Maps API 浏览单个图像，为此我定义了自己的投影。我想使用 GroundOverlay 而不是几个图像图块，因为我只有一个小分辨率图像，但我希望它仍然是可缩放的。但是，在尝试使用此投影时，我会遇到一些不稳定的行为：

1.  在缩放级别 0 处根本不显示任何叠加层。
2.  在缩放级别 1 和更高级别时，标记会显示，但 GroundOverlays 仍然没有。
3.  但是，如果我从任何级别缩小，我可以让 GroundOverlays 非常短暂地显示出来。它只会在缩小时显示并立即再次消失。此外，虽然它确实很快出现，但它并没有出现在正确的坐标上，但标记却出现了。

我对 API 比较陌生，所以如果这是我的一个简单疏忽，我不会感到惊讶，但我就是看不出是什么原因造成的。这是我的投影代码，它只是将 lat/lng 线性映射到地图坐标：

```
function EvenMapProjection() {
    var xPerLng = 512/360;
    var yPerLat = 512/180;
    this.fromLatLngToPoint = function(latlng) {
        var x = (latlng.lng()+180)*xPerLng;
        var y = (latlng.lat()+90)*yPerLat;
        console.log('Lng', latlng.lng(), 'Lat', latlng.lat(), '-> Point', x, y);
        return new google.maps.Point(x, y);
    };
    this.fromPointToLatLng = function(point) {
        var lat = point.y/yPerLat-90;
        var lng = point.x/xPerLng-180;
        console.log('Point', point.x, point.y, '-> Lng', lng, lat);
        return new google.maps.LatLng(lat, lng);
    };
} 
```

我在没有投影的情况下尝试做的一个例子（使用默认的墨卡托投影）：

`http://95.156.209.71/tmp/a.html`

与上面定义的投影相同的示例：

`http://95.156.209.71/tmp/b.html`

最后是一个使用投影但没有 GroundOverlay 的示例，而是仅使用平铺图像（总是相同的图像）：

`http://95.156.209.71/tmp/c.html`

最后一个链接还显示 L​​atLng(0, 0) 处的标记出现在缩放级别 1（或更高），但不在级别 0。

有什么我只是缺少的东西，或者一些错误的代码，还是这实际上是 API 中的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T19:47:13.263

我刚刚发现我的错误在于地面覆盖的定义。我处于缩放级别 0，这意味着我将叠加层的边界设置为从 (-90,-180) 到 (90,180)，但是 API 似乎对这些级别有问题，因为它们包含经度，因此我很奇怪错误。我将其调整为 1 级以实现最小缩放，并将叠加层从 (-45,-90) 设置为 (45,90)，现在一切正常。

# google-maps - 谷歌地图 API - 方向没有 A 和 B 标记/带有航路点标记

> ID：15052327
> 
> 赞同：1
> 
> 时间：2013-02-24T13:44:39.263
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

在谷歌地图 API 中，我显示了一个方向。我想删除开始和结束标记（A 和 B）而不删除航点标记。

我知道“suppressMarkers”选项，但它会抑制航路点标记。

我的方向是可拖动的，因此制作自己的航点标记并不容易。

请你帮助我好吗 ？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:48:45.327

抑制标记，然后手动为航点添加标记：

```
var my_renderer = new google.maps.DirectionsRenderer({suppressMarkers: false});

for (waypoint in list_of_waypoints)
{
    var marker = new google.maps.Marker({position: waypoint_location});
    marker.setMap(your_map);
} 
```

# javascript - 手机输入栏：选择时自动推到顶部

> ID：15052328
> 
> 赞同：1
> 
> 时间：2013-02-24T13:44:48.560
> 
> 标签：javascript, mobile, input, autocomplete

在移动设备中，触摸键盘将占据屏幕的下半部分，因此如果输入/文本区域不在顶部，如果您有某种预先输入的建议，当用户输入时它们可能不在视图中。有没有办法在输入字段处于活动状态时自动将输入字段“推”到顶部，从而最大化其下方的可见区域？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T13:52:03.560

您可以在输入事件上绑定一个事件`[focus][1]`，然后滚动（参见[此处](http://api.jquery.com/scrollTop/)）到您想要的位置。使用 jquery，它看起来像这样，未经测试：

```
$('input').focus(function() {
  $('body').scrollTop($(this).position().top);
  }); 
```

我不确定正文选择，我想这取决于您的页面是如何定义的。

# android - 调试服务崩溃

> ID：15052329
> 
> 赞同：6
> 
> 时间：2013-02-24T13:45:09.547
> 
> 标签：android, debugging, service, crash-reports

当然，我有一个音乐服务，它负责在后台播放音乐，还有一些其他的事情，比如通知需要进行 UI 更改的活动、存储和恢复队列、通过光标获取歌曲记录，以及每个当歌曲发生变化时，它会负责更新正在进行的通知中的位图。

**问题是什么？**该服务几乎在用户尝试做任何事情的时候都**崩溃**了……几乎所有其他事情。例如，播放歌曲，然后打开游戏会导致服务崩溃，有时像在 chrome 上浏览网页这样的轻量级操作也会导致服务崩溃。

一些细节：

**1 -**服务是通过`startService(new Intent(this, MyMusicService.class));` 但当用户离开活动时启动的，我打电话`startForeground(mId, mNotification);`来显示一个提供简单控制的持续通知，并且因为`startForeground()`它的目的是为了应该优先考虑的服务，因为 activityManager 杀死这些服务会破坏用户体验（如果服务被终止，音乐将停止）

**2 -**我试图重现崩溃，并且它肯定会发生在不那么繁重的工作时，比如在 chrome 上浏览（这将重现崩溃几乎 50% 的时间），并且**总是**在执行诸如启动 Temple run 2 之类的事情时。仅供参考，如果根本不做任何事情 - 只是在后台播放音乐并处于空闲状态，播放根本**不会**停止，而且它按预期的方式工作。

**3 -**我用作测试设备的手机绝不是慢速或低内存设备，它是 Galaxy Nexus。

**4 -**我试过抓几个多头，有时它只是说：

```
02-24 06:53:32.586: I/ActivityManager(387): Process com.deadpixels.light.player (pid 27720) has died. 
```

没有任何其他消息，有时相同的消息会伴随着 WINDEATH：

```
 02-24 06:53:32.586: W/ActivityManager(387): Scheduling restart of crashed service com.deadpixels.light.player/.service.MyMusicService in 5000ms
 02-24 06:53:32.602: W/InputDispatcher(387): channel '418d09c8    com.deadpixels.light.player/com.deadpixels.light.player.HomeActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x9
 02-24 06:53:32.602: E/InputDispatcher(387): channel '418d09c8 com.deadpixels.light.player/com.deadpixels.light.player.HomeActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
 02-24 06:53:32.602: W/InputDispatcher(387): Attempted to unregister already unregistered input channel '418d09c8 com.deadpixels.light.player/com.deadpixels.light.player.HomeActivity (server)'
 02-24 06:53:32.602: I/WindowState(387): WIN DEATH: Window{418d09c8 u0 com.deadpixels.light.player/com.deadpixels.light.player.HomeActivity} 
```

我还注意到，几乎总是在崩溃发生时，许多其他服务“**死掉**”。我在[这里](http://db.tt/P2BOgBlL)附上完整的日志。

**5 -**我尝试使用[ACRA](https://github.com/ACRA/acra)来获取有关崩溃的更多信息，但即使一切似乎都设置正确，但在崩溃后没有发送日志，或者什么也没发生。我知道 ACRA 检测到崩溃并启动：

```
02-24 06:53:37.719: D/ACRA(28293): ACRA is enabled for com.deadpixels.light.player, intializing...
02-24 06:53:37.742: D/ACRA(28293): Using default Mail Report Fields
02-24 06:53:37.742: D/ACRA(28293): Looking for error files in /data/data/com.deadpixels.light.player/files
02-24 06:53:37.742: W/ACRA(28293): com.deadpixels.light.player reports will be sent by email (if accepted by user). 
```

但没有发送任何内容，既没有发送到我设置的 mailto，也没有发送到 Google 文档中的表单。

不知道还有什么可以尝试的，我希望能得到一些关于寻找什么的好主意。正如我所说，该服务确实做了一些事情，据我所知，这并不是资源丰富，老实说，我什至不确定这是否与崩溃的服务有关。

这是服务中发生的几个代码位的[要点](https://gist.github.com/daniel-c05/308d878b5539933f6541)，以及我设置的 ACRA 代码。还值得注意的是，我试图重现该服务与其他音乐播放器的崩溃，但我根本没有遇到这个问题。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:58:00.020

似乎操作系统认为您的服务在用户离开您的活动后立即处于后台，尽管它是“前台”服务。

不过，我会设计您的`MyMusicService`服务有点不同：

1.  在`onCreate`准备`MediaPlayer`.
2.  在您的服务`onStart`的`onStartCommand`实现中，开始播放选定/适当的声音文件。如果您希望音乐继续在后台播放，即使设备处于睡眠状态，也可以获取部分唤醒锁定。返回`START_STICKY`。
3.  向状态栏添加通知。3 在`onDestroy`，清理一切。

当音乐停止时，无论是通过用户交互还是歌曲结束时，请务必删除通知并释放唤醒锁定。

一个很好的教程可以在这里找到。 [http://www.youtube.com/watch?v=mcb99u8Nlgs&list=PL14AA2548E3C96B50](http://www.youtube.com/watch?v=mcb99u8Nlgs&list=PL14AA2548E3C96B50)

**OP 添加评论/更新“要点”后更新：**

我看到`onReceive`您`BroadcastReceiver` `mReceiver`在您的服务中访问数据库。这可能是问题所在。将此卸载到`IntentService`: 在 中`onReceive`，只需使用收到`IntentService`的相同启动一个。然后可以完成所有实际工作，而不必担心任何可能导致进程终止的缓慢数据库访问。`Intent``onReceive``IntentService`

如果在设备处于睡眠状态时仍然需要播放音乐，请务必获取部分唤醒锁（并确保在必要时释放它！）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T12:43:32.403

我遇到了同样的问题，你能检查一下你的mId是否与你的通知id相同吗？还要检查它是否不同于 0，因为它会将其与活动的 id 相关联并与活动相关联。

编辑：还要检查您的代码是否使用 onHandle 而是 onStartCommand。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T08:48:12.750

如果您提供有关您的架构的更多信息，尤其是您的 Activity 和您的服务如何交互，那肯定会有所帮助。

当然是疯狂的猜测，但对我来说，这听起来好像您的 Service 引用了您的 Activity。一旦您使用不同的应用程序，您的 Activity 很可能会被销毁。

几个问题。

*   您的服务和您的活动是否在同一进程中运行？（这会影响 Activity 和 Service 之间的信息共享方式。）
*   您的 Activity 类是否有服务尝试访问的任何变量？（它们属于 Application 类，如果有的话。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-01T01:06:58.753

请检查您的代码，也许您自己在某个地方破坏了您的流程，例如`System.exit(0);`，如果您这样做，那么就会有日志

```
channel '418d09c8    

com.deadpixels.light.player/com.deadpixels.light.player.HomeActivity(server)'
 ~ Consumer closed input channel or an error occurred.  events=0x902-24 06:53:32.602:
 E/InputDispatcher(387): channel '418d09c8 
 com.deadpixels.light.player/com.deadpixels.light.player.HomeActivity (server)'
  ~ Channel is unrecoverably broken and will be disposed! 
```

# javascript - 如何存储 Ti.UI.createSlider() 的值；和 Ti.UI.createSwitch();?

> ID：15052333
> 
> 赞同：0
> 
> 时间：2013-02-24T13:45:22.393
> 
> 标签：javascript, titanium

我正在使用 appcelerator.com 的 Titanium 来创建 iOS 应用程序。

我同时使用滑块和开关。

两个官方的例子都展示了如何创建这些东西，以及如何改变它们的状态，但让我愤怒的是，他们没有费心解释在哪里以及如何存储这些值。如果您想在某处放置滑块或开关，您还想保存用户选择的值，这似乎是一种合乎逻辑的做法。

什么是最好或最合适的方式来做到这一点。目前我有点困惑，至于我应该把这些数据写到哪里......

我最近需要使用这些数据将其传递给服务器上的 JSON 对象，如果这有助于给出更好的答案。

这些东西有类似数据库的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:39:14.000

以下是如何实现这一目标：

```
var basicSlider = Titanium.UI.createSlider({
        min:1,
        max:7,
        value: Ti.App.Properties.getString('slider'),
        width:100,
        height:'auto',
        top:30,

    });

basicSlider.addEventListener('change',function(e)
    {
        Ti.App.Properties.setString('slider', basicSlider.value);
    }); 
```

当您知道在哪里寻找它时，这很容易！:)

# html-select - 我们可以在带有struts html标签库的jsp中编写javascript代码吗

> ID：15052338
> 
> 赞同：0
> 
> 时间：2013-02-24T13:46:06.723
> 
> 标签：html-select

这是phani kumar，

实际上，我正在写一页来显示产品详细信息。在那我编写了代码来在 jsp 页面中显示 productid 列表，并借助 和 tags 。但主要问题是，根据 productid 的选择，我试图显示产品详细信息（productname、productcost、productstock..like）。但我在工作时遇到了问题。

我正在使用 javascript 进行尝试，但是由于 struts html taglibrary，我在这里遇到了问题，请您给我解决方案来解决这个问题。

任何人都可以告诉如何将下拉选择值输入javascript（如果我们在struts中使用标签库）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T00:39:04.390

您如何使用 javascript 创建视图？你应该可以使用

```
<logic:iterate> 
```

遍历您的产品集合，然后

```
 <bean:write .../> 
```

显示每个产品的信息。

```
<html:select> 
```

将在您的表单中创建一个下拉列表。利用

```
 <html:option>, <html:options>, or <html:optionsCollection> 
```

填充下拉列表中的每个项目。

# java - Phonegap Android 日期选择器

> ID：15052342
> 
> 赞同：0
> 
> 时间：2013-02-24T13:46:32.637
> 
> 标签：java, android, cordova, backbone.js, datepicker

我正在使用 Phonegap 构建一个 Android 应用程序，我发现[了这个插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/DatePicker)，我决定将它用于我的 datepicker 字段。我按照说明进行操作，但运行时遇到问题。

这是我的代码：

HTML：

```
<label for="schedule_start">Start date</label>
<input type="text" class="nativedatepicker" id="schedule_start" name="schedule[start_date]" value="{{start_date}}" required /> 
```

JS（我正在使用 Backbone.js）

```
FormView.prototype.defaultEvents = {
'focus .nativedatepicker': 'focusDatepicker'
};

// call when input focused

FormView.prototype.focusDatepicker = function(e) {
var currentField = $(this);
var myNewDate = Date.parse(currentField.val()) || new Date();

if(typeof myNewDate === "number"){ myNewDate = new Date (myNewDate); }

// Same handling for iPhone and Android
window.plugins.datePicker.show({
  date : myNewDate,
    mode : 'date', // date or time or blank for both
    allowOldDates : true
  }, function(returnDate) {
    var newDate = new Date(returnDate);
    currentField.val(newDate.toString("YYYY-MM-DD"));

    // This fixes the problem you mention at the bottom of this script with it not working a second/third time around, because it is in focus.
    currentField.blur();
  });
}; 
```

创建包后，我添加了`datePickerPlugin.js`to`/assets/www/js/`和`DatePickerPlugin.java`to 。`/src/com/phonegap/plugin/``com.phonegap.plugin`

我想我在调用 datePickerPlugin.js 时可能会遇到一些问题，因为我没有收到我在文件中放入的警报，但我不确定如何解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T22:27:07.150

我有一个类似的问题。我通过在 cordova.js 之后包含 datePickerPlugin.js 文件来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:51:12.007

谢谢你们两个提示看看我的路径。看来我没有正确包含我的 Cordova 库文件。在我这样做之后，这一切都像魅力一样。

# unix - Unix - 在文件中查找模式，复制到另一个文件中

> ID：15052345
> 
> 赞同：1
> 
> 时间：2013-02-24T13:46:47.607
> 
> 标签：unix, awk, grep, find

我花了一些时间考虑如何解决这个问题，但我不确定，到目前为止我对 unix 的使用相当有限。

我有一个文本文件，让我们给它起一个名字“Text.txt”，其中包含很多信息。假设它包含：

```
SomethingA: aValue
SomethingB: bValue
SomethingC: cValue
SomethingD: dValue
SomethingD: anotherDValueThisTime
SomethingA: aValueToIgnore 
```

我想搜索“Text.txt”，找到一些值，然后将这些值放入一个新文件 output.txt 中。

这变得有点棘手，因为我想做的是获取 somethingA 的第一个值，然后是出现的每个 SomethingD 值。

所以“output.txt”中的输出应该是：

```
aValue
dValue
anotherDValue 
```

第二个“SomethingA”值希望被忽略，因为这不是第一个“SomethingA”值。

我想逻辑是这样的： Find SomethingA > output.txt Find ALL SomethingD's >> output.txt

但我就是不太明白。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T13:51:16.353

`awk`是理想的

```
awk '/^SomethingA/ && ! a++ || /^SomethingD/ { print $2 }' FS=: text.txt > output.txt 
```

这有点草率，但您可以更精确地使用：

```
awk '$1 == "SomethingA" && ! a++ || $1 == "SomethingD" { print $2 }' FS=: text.txt > output.txt 
```

不幸的是，这需要一个固定的键字符串。如果你想要一个正则表达式，你可以这样做：

```
awk 'match($1, "pattern") && ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T14:00:19.420

```
grep -m 1 somethingA inputfile.txt >outputfile.txt
grep somethingD inputfile.txt >>outputfile.txt 
```

`grep`选项`-m`设置您想要获得的最大匹配数。

`>>`附加到文件而不是像`>`那样覆盖它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-16T08:02:19.083

我认为您需要的是`grep`带有`-o`选项的命令。它是这样工作的：

```
grep -o -e 'pattern1' -e 'pattern2' /tmp/1 >> /tmp/2 
```

# simplepie - SimplePie 的随机排序

> ID：15052347
> 
> 赞同：0
> 
> 时间：2013-02-24T13:46:55.817
> 
> 标签：simplepie

我正在寻找专门从默认安装中随机排序所有 SimplePie 文章。（没有 WordPress 附件或任何东西）

我不是在寻找任何自定义排序选项，只是完全随机排序的项目，没有别的。

希望为一个简单的页面设置它。到目前为止，我发现的唯一示例是在顶部附近显示 php 编码的示例，但没有显示如何在 html 中调用这些功能。

示例：是否需要创建单独的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:49:44.490

您是否尝试过标准的 PHP`shuffle`函数？ [http://php.net/manual/es/function.shuffle.php](http://php.net/manual/es/function.shuffle.php)

如果您将 SimplePie 获取的所有项目存储在一个数组中，我认为这是让它们随机排序的最短方法。

# image - wordpress 中的图像媒体和自定义帖子类型

> ID：15052352
> 
> 赞同：0
> 
> 时间：2013-02-24T13:47:45.330
> 
> 标签：image, wordpress, posts

我正在寻找一些帮助/想法。我正在为一个客户建立一个旅游网站，该客户将在完成后继续向网站添加内容。目前有 600 多幅图像，仅在一个区域内，当网站启动并运行时，将有 20 多个区域的图像，所以会有很多图像。有没有办法分割图像，这样当客户想要来自美国的图像时，他们在“插入媒体”窗口中看到的就是这些。我正在为这些部分使用自定义帖子类型。有没有人有什么想法和建议。

我希望有一个插件来实现这一点，老实说，我不想在 PHP 中弄乱任何核心文件。

谢谢约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:52:10.223

对于您的问题，您可以在帖子中分隔图像。例如，创建一篇美国帖子并将所有与美国地区相关的图像上传到其中，媒体中有一个选项可以查看帖子中的所有图像。您可以为多个地区创建多个帖子。

甚至您也可以在 wordpress 中从单个帖子中获取所有图像。

希望这可以帮助。

# c# - 从 Dll 导出接口。C# Delphi VB C++ 等

> ID：15052356
> 
> 赞同：2
> 
> 时间：2013-02-24T13:48:15.140
> 
> 标签：c#, delphi, winapi, dll

我在 Delphi 中创建了一个能够从 dll 加载插件的应用程序。dll 导出一个看起来像这样的函数

```
function GetPlugin: IPluginInterface; 
```

IPluginInterface 是一个 ActiveX 类型库。我想是因为我使用的是类型库，然后我可以使用 C# 或任何其他语言从 dll 导出 IPluginInterface，但经过一番谷歌搜索后我发现情况并非如此，因为有很多关于托管和非托管的讨论代码和无法执行此操作的原因。所以我的问题是，我是否仍然能够在 C# 中创建一个可以导出上述函数的插件？如果不是，除了 C++，还有哪些语言能够做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T13:56:29.710

> 所以我的问题是，我是否仍然能够在 C# 中创建一个可以导出上述函数的插件？如果不是，除了 C++，还有哪些语言能够做到这一点？

Windows 上的所有主流编程环境都可以生产和使用 COM 接口。C、C++、C#、VB6、VB.net、Delphi 等。所以，是的，您可以使用 COM 接口来完成您的任务。

作为一个细节点，你不能做的是从 Delphi DLL 中传递一个接口作为函数的返回值。那是因为[Delphi 对函数返回值使用了非标准语义](https://stackoverflow.com/questions/9349530/why-can-a-widestring-not-be-used-as-a-function-return-value-for-interop)。相反，您需要通过 out 参数返回它。

所以你需要这样写`GetPlugin`：

```
procedure GetPlugin(out Plugin: IPluginInterface); stdcall; 
```

# php - 我的 cookie 已设置，但 php 无法读取

> ID：15052357
> 
> 赞同：0
> 
> 时间：2013-02-24T13:48:15.763
> 
> 标签：php, cookies, fixed

我一直在尝试制作一个cookie自动登录，但是虽然设置了cookie，但php无法读取它。我知道它已经设置好了，因为我可以通过 Cookie Monster 看到它，我不知道出了什么问题……需要帮助！这让我疯狂！

设置 cookie 的代码（我在任何 HTML 标记之前执行此操作）

```
setcookie("autologin", $_SESSION['user'], time()+5184000, "/"); 
```

检索它的代码：

```
if (!isset($_SESSION['user']) && isset($_COOKIE['autologin'])) {
     $_SESSION['user']=$_COOKIE['autologin'];
} 
```

更新：我不在同一个脚本中使用上面的代码。我登录，关闭浏览器，重新打开并尝试获取 cookie，cookie 在 Cookie Monster 中但 php 看不到它。

修复：我的问题是我试图在 cookie 中保存一个序列化对象 $_SESSION['user']，它已通过以下方式修复：

```
setcookie("autologin", base64_encode($_SESSION['user']), time()+5184000, "/"); 
```

并检索：

```
if (!isset($_SESSION['user']) && isset($_COOKIE['autologin'])) {
         $_SESSION['user']=base64_decode($_COOKIE['autologin']);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:53:36.043

此 cookie 将[在下一页加载](http://php.net/setcookie)时可用。在此页面中，您可以自己定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T20:00:24.093

我的问题是我试图在 cookie 中保存一个序列化对象 $_SESSION['user']，它已被修复：

```
setcookie("autologin", base64_encode($_SESSION['user']), time()+5184000, "/"); 
```

并检索：

```
if (!isset($_SESSION['user']) && isset($_COOKIE['autologin'])) {
         $_SESSION['user']=base64_decode($_COOKIE['autologin']);
} 
```

# jquery - 如何在没有 href 的情况下将活动类添加到当前？

> ID：15052358
> 
> 赞同：1
> 
> 时间：2013-02-24T13:48:47.233
> 
> 标签：jquery, location-href

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T13:56:22.473

您可以从当前位置确定语言，然后使用它来找到正确的锚点：

```
var lang;

if (lang = location.href.match(/lang=([a-z]{2})/)) {
  $('[data-value=' + lang[1] + ']').addClass('active');
} 
```

# matplotlib - 在 LaTeX 中包含 pdf 图形时未正确建立 BBox

> ID：15052359
> 
> 赞同：1
> 
> 时间：2013-02-24T13:48:50.710
> 
> 标签：matplotlib, latex, bounding-box

我正在尝试在乳胶中包含一个 pdf 图形。我以简单的方式使用matplotlib在python中创建了这个图

```
fig=plt.figure()
ax= fig.add_subplot(111)
plt.plot(random(100))
plt.savefig('figure.pdf',dpi=300,bbox_inches='tight') 
```

但是，当编译乳胶文档时，我收到以下错误：

```
! LaTeX Error: Cannot determine size of graphic in figures/figure.pdf (no B
oundingBox). 
```

问题是matplotlib如何建立边界框，但我就是找不到解决这个问题的方法。谁能帮我一把？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T15:34:51.660

问题不在于 matplotlib bbox，而在于乳胶编译的方式。在这种情况下，需要 pdflatex 来编译文档，而不是 latex。

# javascript - 悬停时加载 Fancybox

> ID：15052362
> 
> 赞同：0
> 
> 时间：2013-02-24T13:49:37.477
> 
> 标签：javascript, jquery, fancybox

我对网站上的一些图像使用了 fancybox 1.3.4，使用以下代码：

```
 $(document).ready(function() {
        $("a.fancybox").fancybox();
    }); 
```

出于某种原因，fancybox 正在通过打扰悬停和单击来加载 - 我不希望它在悬停时触发，有谁知道为什么会这样？我在文档中找不到任何建议如何解决此问题的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:54:36.750

尝试使用这个：

```
$(document).ready(function() {
    $("a.fancybox").fancybox().trigger('click');
}); 
```

希望这可以帮助

# android - 文本在 Zoom 上似乎像素化和拉伸

> ID：15052363
> 
> 赞同：3
> 
> 时间：2013-02-24T13:49:43.240
> 
> 标签：android, android-canvas

嗨，我正在使用带有捏缩放的自定义视图。但是在缩放时，平板电脑上的文字看起来会被拉伸。但在安卓手机上它完全没问题。我正在使用以下代码来绘制文本。

我需要做什么才能使文本在缩放时看起来正常？为什么这个问题只出现在平板电脑上？

```
Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
paint.setColor(0xff000000);
paint.setStyle(Style.FILL);
paint.setTextSize(cellWidth * 0.75f);
paint.setTextScaleX(cellWidth / cellHeight);
paint.setTextAlign(Paint.Align.CENTER);

FontMetrics fm = paint.getFontMetrics();
float x = cellWidth /2 ;
float y = cellHeight/2  - (fm.ascent + fm.descent ) /2;
canvas.drawText(sb.toString(), x , y, paint); 
```

# iphone - 如何在远程 iphone 上读取 cocos2d-x CCLog 跟踪？

> ID：15052365
> 
> 赞同：1
> 
> 时间：2013-02-24T13:49:45.887
> 
> 标签：iphone, debugging, console, cocos2d-x

我正在尝试在 iPhone 上调试 cocos2d-x 应用程序：

当我在模拟器中运行应用程序时，我可以在 Xcode 控制台日志中读取我的 (CCLog/printf) 跟踪。**当我通过 USB 连接设备并在 Xcode 的Organizer**控制台输出中检查它们时，为什么它们不显示？

笔记：

我可以在 Xcode 的 Organizer 控制台输出中读取我的应用程序的 Objective-C NSLog 跟踪。

我可以阅读我的 CCLog 字符串；`strings`在 iPhone 的二进制文件上使用 unix 命令时。

LearnCocos2D 更新：是的，我正在使用 Build/Products/Debug-iphoneos/ 中内置的应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:35:56.237

我发现了这个技巧：你在 CCCommon.mm 中修改了 CCLog 函数，通过放置 NSLog 而不是 printf：

```
void CCLog(const char * pszFormat, ...)
{
    printf("Cocos2d: ");
    char szBuf[kMaxLogLen];

    va_list ap;
    va_start(ap, pszFormat);
    vsnprintf(szBuf, kMaxLogLen, pszFormat, ap);
    va_end(ap);
    printf("%s", szBuf);
   // printf("\n");
    NSLog(@"%s", szBuf);
} 
```

你添加：

```
#import <Foundation/NSObjCRuntime.h> 
```

在文件的顶部。

# cuda - 内核调用示例之前的 CUDA 全局数组声明和初始化

> ID：15052370
> 
> 赞同：3
> 
> 时间：2013-02-24T13:50:29.490
> 
> 标签：cuda, declaration, shared-memory

我需要一些有关 Cuda GLOBAL 内存的帮助。在我的项目中，我必须声明全局数组以避免在每次内核调用时发送这个数组。

编辑：

我的应用程序可以调用内核超过 1,000 次，每次调用时我都会向他发送一个大小超过 [1000 X 1000] 的数组，所以我认为这需要更多时间，这就是我的应用程序运行缓慢的原因。所以我需要为 GPU 声明全局数组，所以我的问题是

**1**如何声明全局数组

**2**如何在内核调用之前从 CPU 初始化全局数组

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T20:53:24.593

您编辑的问题令人困惑，因为您说您正在向内核发送一个大小为 1000 x 1000 的数组，但您想知道如何使用全局数组来执行此操作。我知道将这么多数据发送到内核的唯一方法是*使用*全局数组，因此您可能已经在使用全局内存中的数组执行此操作。

尽管如此，至少有两种方法可以在全局内存中创建和初始化数组：

1.静态地，使用`__device__`and `cudaMemcpyToSymbol`，例如：

```
 #define SIZE 100
 __device__ int A[SIZE];
 ...
 int main(){
   int myA[SIZE];
   for (int i=0; i< SIZE; i++) myA[i] = 5;
   cudaMemcpyToSymbol(A, myA, SIZE*sizeof(int));
   ...
   (kernel calls, etc.)
 } 
```

（[设备变量参考](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#device-variable-qualifier)，[cudaMemcpyToSymbol 参考](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__MEMORY_1g2a229a704ade54887f7784e2e2dbd895)）

2.动态地，使用`cudaMalloc`and `cudaMemcpy`：

```
 #define SIZE 100
 ...
 int main(){
   int myA[SIZE];
   int *A;
   for (int i=0; i< SIZE; i++) myA[i] = 5;
   cudaMalloc((void **)&A, SIZE*sizeof(int));
   cudaMemcpy(A, myA, SIZE*sizeof(int), cudaMemcpyHostToDevice);
   ...
   (kernel calls, etc.)
 } 
```

（[cudaMalloc 参考](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__MEMORY_1g16a37ee003fcd9374ac8e6a5d4dee29e)，[cudaMemcpy 参考](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__MEMORY_1g48efa06b81cc031b2aa6fdc2e9930741)）

为清楚起见，我省略了您应该对所有 cuda 调用和内核调用进行的[错误检查。](https://stackoverflow.com/questions/14038589/what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:55:45.807

如果我很好地理解了这个有点不清楚的问题，那么您想使用全局数组并在每个内核调用中将其发送到设备。这种**不良**做法会导致高延迟，因为在每次内核调用中，您都需要将数据传输到设备。根据我的经验，这种做法会导致**负面**加速。

一种最佳方法是使用我所说**的触发器**技术。你这样做的方式是：

1.  在设备中声明两个数组。`d_arr1`和`d_arr2`
2.  将数据复制`host -> device`到其中一个数组中。
3.  作为内核参数传递指向`d_arr1`和的指针`d_arr2`
4.  将数据处理到内核中。
5.  在随后的内核调用中，您交换作为参数传递的指针

这样可以避免每次内核调用都传输数据。您仅在主机循环的开始和结束时传输。

```
int a, even =0;
for(a=0;a<1000;a++)
{
  if (even % 2 ==0 )
   //call to the kernel(pointer_a, pointer_b)
  else
  //call to the kernel(pointer_b, pointer_a)
} 
```

# r - 按另一列中的因子提取列中的前 50 个

> ID：15052371
> 
> 赞同：1
> 
> 时间：2013-02-24T13:50:47.437
> 
> 标签：r, dataframe, row

我有一个来自英国实践的处方数据数据框。原始数据位于[http://datagov.ic.nhs.uk/T201207.exe](http://datagov.ic.nhs.uk/T201207.exe)。我已经把它整理成一个 PCT 级别的数据框架，按 PCT 和最常见的处方排序（“项目”列中的降序）。

```
 pct sha chem.code items      nic act.cost
32360 5ZW Q39 0212000Y0 12421 17811.40 16888.21
28769 5ZW Q39 0209000A0  8741  7834.43  7554.72
4439  5ZW Q39 0103050P0  7733 21566.51 20210.05
...
82763  5D7 Q30 0603020L0     1 1.08     1.13
152673 5D7 Q30 1502010C0     1 0.92     0.85
5149   5D7 Q30 0104020N0     1 0.70     0.68
149501 5D7 Q30 1311060I0     1 0.50     0.49 
```

有 151 个，每个都有 1000 多个项目。我想为每个 pct 提取前 50 项。我知道我可以编写一个`for`循环并遍历 pct 的级别，但那不是`R`. 我还没有弄清楚如何在关卡上使用`apply`或执行子集。`sapply`这似乎比获取行的子集更好地获取整个列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:06:57.520

不太确定我是否明白，但我最好的猜测是：

```
require(plyr)
ddply(df, .(pct), function(x) x[1:50, ]) 
```

这将为每个选择前 50 个项目`pct`（假设肯定有 50 个项目）。

# javascript - 立即淡出并使用 CSS3 过渡淡入

> ID：15052374
> 
> 赞同：2
> 
> 时间：2013-02-24T13:51:11.097
> 
> 标签：javascript, css, css-transitions

我有问题。

我想立即淡出我的正方形（单击按钮后），然后在延迟的时间内慢慢淡入。

这是我的示例小提琴：

[http://jsfiddle.net/qFYL7/6/](http://jsfiddle.net/qFYL7/6/)

我改变了课程，但恐怕这不是正确的方法：

```
 my_square.className  = 'dim_fast';
 my_square.className = 'square'; 
```

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T16:40:35.980

## 纯 CSS3 解决方案怎么样？

首先，您需要确保按钮位于正方形之前。

```
<button id="bt1"> </button>
<div id="my_square" class="square"> </div> 
```

这是因为 CSS 没有“前一个兄弟”选择器。

现在你必须使用`:active`按钮上的伪元素，直接隐藏正方形。

```
#bt1:active + .square
{

    -webkit-transition:opacity 0s;
       -moz-transition:opacity 0s;
         -o-transition:opacity 0s;    
            transition:opacity 0s;
    opacity:0;
} 
```

当您单击按钮时，正方形将立即被隐藏。

现在在正方形上添加过渡。

```
.square
{

    -webkit-transition:opacity 2s;
       -moz-transition:opacity 2s;
         -o-transition:opacity 2s;
            transition:opacity 2s;
    opacity:1;
} 
```

Square 将在 2 秒内淡入。

**[一探究竟](http://jsfiddle.net/pbvED/4/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T14:03:26.980

好吧，在您的函数中，您将类更改为`dim_fast`，然后立即返回`square`，它没有转换:)

所以，删除：

```
my_square.className = 'square'; 
```

或者至少附加第二类：

```
my_square.className = 'square dim_fast'; 
```

* * *

要淡出正方形，然后在一段时间后淡入，您可以使用`setTimeout`. [例子](http://jsfiddle.net/sGDDL/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T14:14:15.210

I would use animation for this instead of transitions

Altered CSS (*from your jsfiddle*)

```
.square
{
    width:100px;
    height:100px;    
    background-color:blue;
    opacity:1;
}
.fade{
    animation: dim_fast_shine_slow 1s;
}
@keyframes dim_fast_shine_slow{
    99%{opacity:0;}
    100%{opacity:1}
} 
```

Altered script

```
var my_square = document.getElementById('my_square');

function dim_fast_shine_slow()
{
    // remove class
    my_square.className = my_square.className.replace(' fade','');
    setTimeout(function(){
        // add class after 50 millisecons to allow the DOM to register the removal of the class
        my_square.className  += ' fade';
    },50);

  }

 document.getElementById('bt1').onclick = dim_fast_shine_slow; 
```

Demo at [http://jsfiddle.net/gaby/qFYL7/7/](http://jsfiddle.net/gaby/qFYL7/7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T14:20:06.600

它很简单：

```
function dim_fast_shine_slow() {
    my_square.classList.toggle("dim_fast");
} 
```

在您的版本中，您有：

```
function dim_fast_shine_slow() {
    my_square.className  = 'dim_fast'; //changes class to dim_fast
    my_square.className = 'square'; // changes it back to square
} 
```

在每次单击中，元素的类名最终都会变成“正方形”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-06T08:53:55.987

现在是 2018 年，[这个解决方案](https://codepen.io/yaplusplus/pen/EQyrbV)适用于 edge、chrome、opera 和 firefox。虽然 caniuse 说 IE11 具有完整的关键帧支持，但在我的 IE11 中不起作用。

```
const fade = document.querySelector('.fade');
const cont = document.querySelector('.container');

document.body.addEventListener('click', ev => {
  if (ev.target.classList.contains('fade')) {
    cont.classList.add('fade-out-in');
  }
});

cont.addEventListener('animationend', ev => {
  cont.classList.remove('fade-out-in');
});
```

```
@keyframes fadeOutIn {
  0% { opacity: 0; }
  100% { opacity: 1; }
}

.container {
  width: 200px;
  height: 200px;
  margin-top: 10px;
  background: red;
}

.fade-out-in {
  animation: fadeOutIn 1s;
}
```

```
<button class="fade">Fade 1</button>
<button class="fade">Fade 2</button>
<button class="fade">Fade 3</button>

<div class="container"></div>
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-24T14:11:51.387

应该有一种不用 jQuery 的方法（我不知道）.. 但如果你决定使用 jQuery：

```
$(my_square).hide("fast").show("slow"); 
```

# javascript - 使用javascript返回值设置图像src

> ID：15052379
> 
> 赞同：1
> 
> 时间：2013-02-24T13:51:23.657
> 
> 标签：javascript, html

我想通过使用 JavaScript 函数返回的文本来设置图像 src。将 JavaScript 返回值分配给 src 的正确方法是什么？下面的代码：

我在这里想要实现的是在 url 的末尾添加一个虚拟随机数，以摆脱浏览器图像缓存。

```
<body><div class="slideshow" style="position: absolute;">   
<img src="eval(getMyLink())" width="1024" height="768" style="position: absolute; top: 0px; left: 0px; display: none; z-index: 5; opacity: 0; width: 1024px; height: 768px;" title=""> 
<img src="eval(getMyLink())" width="1024" height="768" style="position: absolute; top: 0px; left: 0px; display: none; z-index: 5; opacity: 0; width: 1024px; height: 768px;" title=""> 
</div>

<script language="javascript"><!--
    bmi_SafeAddOnload(bmi_load, "bmi_orig_img", 0);//-->
    function getMyLink() {
        var a = "./Files/1.jpg?a=" + Math.floor(Math.random() * 11);
        return a;
    }
</script></body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T13:55:56.437

使用 jQuery。您需要向 img 标签添加一个 id 属性，但这应该可以。

```
<img id="imgLink1" width="1024" height="768" style="position: absolute; top: 0px; left: 0px; display: none; z-index: 5; opacity: 0; width: 1024px; height: 768px;" title=""> 

$().ready(function(){ $('#imgLink1').att('src', getMyLink()); }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T14:01:42.127

我的建议：避免使用内联 JS，使用 CSS，并使用 JQuery。

我会这样做：

```
<body>
    <div class="slideshow" style="position: absolute;">
        <img id="img1" src="" class="myImages" title="image">
        <img id="img2" src="" class="myImages" title="image">
    </div>
    <script>

        bmi_SafeAddOnload(bmi_load, "bmi_orig_img", 0);

        function getMyLink() {
            var a = "./Files/1.jpg?a=" + Math.floor(Math.random() * 11);
            return a;
        }

        //Assign image source and display it (you have defined display:none attribute)
        $('#img1').attr('src', getMyLink()).fadeIn(300);
        $('#img2').attr('src', getMyLink()).fadeIn(300);
    </script>

    <style>
        .myImages {
            width : 1024px;
            height : 768px;
            position: absolute; 
            top: 0px; 
            left: 0px; 
            display: none; 
            z-index: 5; 
            opacity: 0;
       }
    </style>
</body> 
```

# php - 我只想为每个显示 1 个名称

> ID：15052380
> 
> 赞同：-3
> 
> 时间：2013-02-24T13:51:23.983
> 
> 标签：php, mysql, sql

![在此处输入图像描述](../Images/d2dc5add64108296d42b327efd85a769.png)

我已经启动了这个消息系统。在上图中，你看到 Danny 给我发了 3 条消息，Bibby 给我发了 2 条消息。但是我只希望名字显示一次，所以基本上名字就像一个类别，所以当我点击名字时，我会得到那个人的所有消息？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T13:53:46.920

*我认为*有两种方法可以从数据库中检索唯一记录，

一种是通过使用`DISTINCT`

```
SELECT DISTINCT Name
FROM tableName 
```

另一种方法是使用`GROUP BY`

```
SELECT Name
FROM tableName
GROUP BY Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T14:15:36.510

try this

```
 $sql = mysql_query("SELECT * dm WHERE torn='$session_rand' GROUP BY fromuser ");
  $count = mysql_num_rows($sql); 
  while($row = mysql_fetch_array($sql))
  { $sendername = $row["fromuser"]; 
    echo '<div class="eachuser" style="background-color:#FFF; margin-bottom:1px;  padding:7px; font-size:12px; text-align:center;"> ' .$sendername. ' </div>'; } 
```

*   i wonder why you are using `class="eachuser"` and in the same time you have inner style ?

put those

```
 background-color:#FFF; margin-bottom:1px;  padding:7px; font-size:12px; text-align:center; 
```

in the `eachuser` class and remove them from inside the div

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-24T14:05:00.557

您可能想要做的（如果您不想遵循@JW. 修改数据库查询的示例），是创建一个数组来存储您已经显示过一次的名称，并在每个实例中对其进行检查循环遍历结果集。

```
// the result set coming from the database - all senders
$senders = array('danny', 'danny', 'danny', 'bibby', 'bibby', 'danny', 'bibby');
// the empty array to store the already displayed senders
$displayed = array();

// loop through each sender
foreach($senders as $sender) {
   // if the sender is not in the array (therefore not yet displayed)
   if(!in_array($sender, $displayed) {
      echo $sender . "<br />";
      $displayed[] = $sender;
   }
} 
```

这个循环应该只回显每个名称一次。

# c++ - 模板函数专业化与虚拟输入变量？

> ID：15052385
> 
> 赞同：0
> 
> 时间：2013-02-24T13:52:11.993
> 
> 标签：c++, templates

我有一个用于创建类的工厂方法模式，我想在进行实际创建之前验证输入参数。我在这里处理两个类，A 和 B，它们都有自己的验证。鉴于我已经在创建模板函数中传递了类类型（A 或 B），我想直接使用该类型来告诉我需要使用哪个验证。我正在考虑使用模板函数专业化或虚拟输入参数来做到这一点，每个都有自己的优点/缺点。如果其中任何一个看起来更合理，或者是否还有其他选择，请告诉我。谢谢！

哦，我确实考虑过将验证作为 A 或 B 的静态方法，但这看起来不太好，因为我正在处理遗留代码并且移动这些东西并不是太简单。为了完整起见，我还在下面将其显示为一个选项。

模板功能特化：

优点：可以直接使用传入 FactoryCreateClass 方法的类型来选择验证

缺点：没有利用模板方法，因为只有专业化

```
template <typename T>
void FactoryCreateClass (int, double)
(
    bool bSuccess = ValidateBlock<T>(int, double);

    if (bSuccess)
        T* = T::CreateInstance();           
)

template <typename T>
bool ValidateBlock (int double);    // don't need an implementation here since 
                                    // all specialization require different validation

template <>
bool ValidateBlock<A> (int, double)
{
    //do validation before creating A
}

template <>
bool ValidateBlock<B> (int, double)
{
    //do validation before creating B
} 
```

虚拟变量：

优点：可以直接使用传入 FactoryCreateClass 方法的类型来选择验证

缺点：未使用的虚拟变量

```
template <typename T>
void FactoryCreateClass (int, double)
(
    bool bSuccess = ValidateBlock(T /*dummy*/, int, double);

    if (bSuccess)
        T* = T::CreateInstance();           
)

bool ValidateBlock (A/*dummy*/, int, double)
{
    //do validation before creating A
}

bool ValidateBlock (B/*dummy*/, int, double)
{
    //do validation before creating B
} 
```

静态类方法：

优点：可以直接使用传入 FactoryCreateClass 方法的类型来选择验证

缺点：更难在遗留代码中进行这种类型的更改

```
template <typename T>
void FactoryCreateClass (int, double)
(
    bool bSuccess = T::ValidateBlock(int, double);

    if (bSuccess)
        T* = T::CreateInstance();           
)

static bool A::ValidateBlock (int, double)
{
    //do validation before creating A
}

static bool B::ValidateBlock (int, double)
{
    //do validation before creating B
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T13:58:12.503

您忘记了第三种选择：使用特征。

```
template <typename> struct Trait;

template <>
struct Trait<A> {
    static bool Validate(int, double);
};

template <>
struct Trait<B> {
    static bool Validate(int, double);
}; 
```

接着：

```
template <typename T>
void FactoryCreateClass(int i, double d) {
    bool const success = Trait<T>::Validate(i, d);
    // ...
} 
```

但当然，真正的问题是为什么不`CreateInstance`直接进行验证？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T16:24:40.180

这里最合适的设计是在`CreateInstance`方法内部进行验证，因为任务（args 验证和实例创建）是强耦合的，将这些东西放在一个地方更具可读性。

但是，可能是这种情况，您不能更改`CreateInstance`方法的代码。那么，我发现使用函数模板或虚拟变量之间没有显着差异。然而，后者*更加*明确，因此更具可读性。

顺便说一句，一个未引用的变量真的不是什么大问题，你可以抑制它，见 [Disable single warning error](https://stackoverflow.com/questions/7159348/disable-single-warning-error)`UNREFERENCED_PARAMETER` ，在页面上搜索

# c# - Reading text from Amazon s3 stream

> ID：15052390
> 
> 赞同：4
> 
> 时间：2013-02-24T13:52:37.333
> 
> 标签：c#, amazon-s3, streamreader, readline, readfile

I use the following code to read text file from Amazon S3, and processing it line by line. This code works but the problem is it is slow.

```
 GetObjectRequest getObjRequest = new GetObjectRequest()
    .WithBucketName(amazonSettings.BucketName)
    .WithKey(_fileKey);
using (AmazonS3 client = AWSClientFactory.CreateAmazonS3Client(
    amazonSettings.AccessKey, 
    amazonSettings.SecretAccessKey))
using (GetObjectResponse getObjRespone = client.GetObject(getObjRequest))
using (Stream amazonStream = getObjRespone.ResponseStream)
{                        
    StreamReader amazonStreamReader = new StreamReader(amazonStream);
    tempGsContact = new GSContact();
    while ((_fileLine = amazonStreamReader.ReadLine()) != null)
    {
        if (_fileLine.Equals("END:VCARD"))
        {
            // Make process 1
        }
        else if (!_fileLine.Equals(string.Empty))
        {
            //Make process 2
        }
    }                        
} 
```

The question is: can I get more sufficient way to reduce the time cost?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T15:50:43.860

There is a similar performance bottleneck on HTTPWebResponse in .NET, which is probably what the AmazonS3 class they made is wrapping.

It's caused by the object taking a long time to resolve proxy settings, there are a few potential solutions listed [here](https://stackoverflow.com/a/1950692/808532), but the easiest option might be to add the following to your app.config file:

```
<system.net>
  <defaultProxy enabled="false">
    <proxy/>
    <bypasslist/>
    <module/>
  </defaultProxy>
</system.net> 
```

Alternatively you could replace the call here:

```
AWSClientFactory.CreateAmazonS3Client(amazonSettings.AccessKey, amazonSettings.SecretAccessKey) 
```

with a call to an [overload](http://docs.aws.amazon.com/sdkfornet/latest/apidocs/html/M_Amazon_AWSClientFactory_CreateAmazonS3Client_8.htm) that accepts a third parameter of 'AmazonS3Config', where you can specify a null proxy via 'AmazonS3Config.ProxyHost = null' - which should effectively be the same as the above configuration change for only that request.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-28T10:35:08.957

OR You can use this function also,

```
 private static void ReadS3Object(AmazonS3Client client)
    {
        GetObjectRequest request = new GetObjectRequest();

        request.WithBucketName(BUCKET_NAME);
        request.WithKey(S3_KEY);

        GetObjectResponse response = client.GetObject(request);

        StreamReader reader = new StreamReader(response.ResponseStream);

        String content = reader.ReadToEnd();

        Console.Out.WriteLine("Read S3 object with key " + S3_KEY + " in bucket " + BUCKET_NAME + ". Content is: " + content);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T10:08:56.620

This function is for calculating word count in text file.

```
private int WordCount(string awsBucketName, string awsFilePath, string wordForSearch)
    {
        string line =string.Empty;
        int counter = 0;
        if ((cloudKaseClient != null) & (token == tokenCfg))
        {
            var request = new GetObjectRequest()
            {
                BucketName = awsBucketName,
                Key = awsFilePath
            };
             using (var response = cloudKaseClient.GetObject(request))
            {
                    StreamReader reader = new StreamReader(response.ResponseStream);
                    while ((line = reader.ReadLine()) != null)
                    {
                        counter += line.Split(' ').Where(t => t.ToString().ToLower().Contains(wordForSearch.ToLower())).Count();
                    }
                    reader.Close();             
            }
        }
        return counter;
    } 
```

# windows-phone-7 - windows phone : 抓取音频样本

> ID：15052391
> 
> 赞同：0
> 
> 时间：2013-02-24T13:52:58.960
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone

我知道我可以在 wp7/8 上使用 MediaElement 播放音频。我正在寻找一种获取音频样本的方法。例如，音频样本是指解码样本而不是原始 mp3 流。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:29:28.520

最简洁的答案是不。

更长的答案是，如果您将音频解码器（例如 MP3）作为您的应用程序的一部分实现，那么这当然是可能的。

# c# - 控制对基类中方法的访问，从接口继承

> ID：15052393
> 
> 赞同：2
> 
> 时间：2013-02-24T13:53:15.090
> 
> 标签：c#

我有一个由以下类和接口组成的基本设计：

*   一个`IRepository<TEntity>`界面，
*   一个`Repository<TEntity>`基类，
*   和一个具体的`TenantRepository`类。

## 问题”

由于接口继承的所有内容根据定义都具有公共访问权限，因此我可以调用该`Add`方法（基类）

```
_tenantRepository.Add(new Tenant { Name = "blah" } ); 
```

虽然我应该调用该`Create`方法`TenantRepository`

```
_tenantRepository.Create("blah"); 
```

## 问题

如果我能够将该`Add`方法定义为受保护的，这样客户端代码就无法访问该方法，那就太好了，但这是不允许的，因为它是在接口中定义的一个方法并且必须具有公共访问权限。

或者，我*可以*将这些方法命名为相同的，以便我实际上覆盖具体类中的实现。这将阻止客户端代码`Repository.Add`直接调用。但在某些情况下，我真的想阻止客户端代码调用基类中定义的方法。

另一种选择可能是这样写：

```
 new protected void Add(Tenant tenant)
    {

    } 
```

但这让我不寒而栗（当我开始重构方法名称时它很快就会崩溃）。

**有没有更好的方法来实现这一目标？**

* * *

## 一些代码片段作为参考：

界面：

```
public interface IRepository<TEntity> : IDisposable where TEntity : IEntity
{
    IQueryable<TEntity> GetAll();
    void Delete(TEntity entity);
    void Add(TEntity entity);
} 
```

基类的一小部分：

```
public class Repository<TEntity> : IRepository<TEntity> where TEntity : class, IEntity
{
    protected IDbContext Context;

    public Repository(IDbContext context)
    {
        Context = context;
    }

    public void Add(TEntity entity)
    {
        DbSet.Add(entity);
    }

    // Left out other, for this question irrelevant, method implementations 
} 
```

最后`TenantRepository`

```
public class TenantRepository : Repository<Tenant>
{
    public TenantRepository(IDbContext context)
        : base(context)
    {
    }

    public Tenant Create(string tenantName)
    {
        var tenant = new Tenant
            {
                Name = tenantName,
                Guid = Guid.NewGuid().ToString()
            };

        if (Exists(tenant.Name))
        {
            throw new TenantAlreadyExistsException(tenant.Name);
        }

        Add(tenant);

        return tenant;
    }

    // Left out other, for this question irrelevant, method implementations 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T13:59:12.650

一种解决方案是使 TenantRepository 不从您的存储库继承。毕竟，听起来它们具有不同的功能（您想要创建而不是添加。）

如果你走这条路，Repository 将成为你的 TenenantRepository 类的私有成员，因为只有它知道什么时候应该调用哪些存储库方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T14:00:15.727

[您可以使用显式接口实现](http://msdn.microsoft.com/en-us/library/aa288461%28v=vs.71%29.aspx)隐藏 Add 方法。基本上，在存储库中，执行以下操作：

```
public IRepository<Tenant>.Add(Tenant toAdd)
{
    //do the add
} 
```

这只能通过强制转换到 IRepository 来获得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T15:25:29.740

如果在 a 中`TenantRepository`您需要`Add`检查 的唯一性`Tenant`，则应将该逻辑包含在`Add`方法本身中。您应该`Add`在您的基`Repository`类`virtual`和`override`TenantRepository 中进行创建，以便它执行您现在在`Create`方法中进行的唯一性检查。

```
public interface IRepository<T> 
{
    void Add(T entity);
}

public class Repository<T> : IRepository<T> 
{
    // mocking Add so it works without a DB
    public virtual void Add(T entity) 
    {
        Console.WriteLine("{0} added", entity.ToString());
    }
}

public class Tenant 
{
    public string Name{get; private set;}
    public Tenant(string Name)
    {
        this.Name=Name;
    }

    public override string ToString() {return this.Name;}

}

public class TenantRepository : Repository<Tenant>
{
    // Add is virtual, so it can be overridden by TenantRepository
    public override void Add(Tenant entity)
    {
        // this represents your uniqueness check
        if(entity.Name=="Paolo") throw new Exception();

        base.Add(entity); // calling Add on the base Repository
    }

    //you can now avoid having Create or making it just call Add
    public Tenant Create(Tenant entity) 
    {
        this.Add(entity);
        return entity;
    }
} 
```

# java - DOCX4J：在 JEditorPane 中查看 HTML 导出的文档文件

> ID：15052397
> 
> 赞同：0
> 
> 时间：2013-02-24T13:53:50.143
> 
> 标签：java, html, swing, jinternalframe, docx4j

我试图查看 DOCX4J 生成的 xHTML 文件。我能够成功生成上述文件，所有文本格式都正确显示在浏览器中。但是，我试图在 JEditorPane 上查看它，它只显示 HTML 文件中的文本，而不显示它的格式，就好像整个页面使用默认文本字体一样。这是我的 JInternalFrame 代码

```
package com.docx.ui.tools;

import java.awt.Desktop;
import java.awt.Dimension;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;

import javax.swing.JEditorPane;
import javax.swing.JInternalFrame;
import javax.swing.JScrollPane;

public class Preview extends JInternalFrame 
{
    private static JScrollPane scrollPane;
    private static JEditorPane htmlPane;

    public Preview()
    {
        htmlPane = new JEditorPane();
        htmlPane.setEditable(false);
        htmlPane.setContentType("text/html");
        scrollPane = new JScrollPane(htmlPane);
        scrollPane.setAutoscrolls(true);
        scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        scrollPane.setPreferredSize(new Dimension(250, 145));
        setSize(800, 600);
        scrollPane.setMinimumSize(getSize());
        setVisible(true);
        setResizable(true);
        setMaximizable(true);
        setTitle("Document Preview");
        getContentPane().add(scrollPane);
        loadfile();
    }

    public void loadfile()
    {
        Desktop d;
        URL url = null;
        try {
            url = new URL("File:F:\\out.html");
            //          url = new URL("https://www.youtube.com/");
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            htmlPane.setPage(url);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

我尝试将 URL 更改为有效的网址，并且页面可以正确查看。我尝试在 JFrame 中执行相同的过程，并出现了相同的结果。我想知道我是否在程序中做错了什么，或者问题在于 DOCX4J 库生成的 HTML 文件。

我已经包含了 HTML 文件和 DOCX 文件以防万一需要 HTML [http://www.mediafire.com/?z3t8ksv3c2air27](http://www.mediafire.com/?z3t8ksv3c2air27)

DOCX [http://www.mediafire.com/view/?p5yr4v6isai3452](http://www.mediafire.com/view/?p5yr4v6isai3452)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:21:12.820

实际上 JEditorPane（实际上是 HTMLEditorKit）仅支持 html 3.2 版本。

您可以尝试使用工具包[http://java-sl.com/docx_editor_kit.html](http://java-sl.com/docx_editor_kit.html)直接显示 docx 文件 。虽然它并不完美，因此也可能存在一些问题。

# jquery - 页面刷新后脚本失败

> ID：15052400
> 
> 赞同：0
> 
> 时间：2013-02-24T13:54:19.697
> 
> 标签：jquery, asp.net-mvc, jquery-mobile

在表单上有一个刷新按钮（使用 jquery mobile）。按下该按钮后，页面会刷新，但脚本（在页面上）无法运行（在操作单击提交时）。这是页面的外观：

```
@using (Html.BeginForm())
{
    <input type="submit" id="refresh" name="actionType" value="Refresh" />
    <input type="submit" id="submit" name="actionType" value="Submit" />
}

@Scripts.Render("~/bundles/jquery")    

<script type="text/javascript">
   $('#submit').click(function () {
     alert('Here');
   });
</script> 
```

刷新实现为：

```
 [HttpPost]
    public ActionResult Index(string actionType)
    {
        if (actionType == "Refresh")
        {
            return RedirectToAction("Index");
        }
        ...
    } 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:57:38.750

总是尝试在 document.ready() 中做任何你想做的事情：

```
$(document).ready(function() {
    $('#submit').click(function () {
     alert('Here');
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T13:59:54.647

我不知道 jQuery 移动页面刷新会如何影响您的脚本。也许它对您的提交 ID 有所帮助...

但是您可以尝试使用不同的选择器：例如订阅`input`具有提交类型的元素：

```
<script type="text/javascript">
   $('input[type="submit"]').click(function () {
     alert('Here');
   });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T14:01:47.587

我建议您订阅`.submit()`表单事件而不是`.click()`提交按钮事件：

```
<script type="text/javascript">
   $('form').submit(function () {
     alert('Here');
   });
</script> 
```

# php - 我如何用我的页面标题重写 url

> ID：15052401
> 
> 赞同：2
> 
> 时间：2013-02-24T13:54:29.737
> 
> 标签：php, .htaccess

我有页面 www.mysite.com/more.php?book=1 我想创建像 www.mysite.com/book-title.html 这样的链接我该怎么做？

在我的页面 www.mysite.com/more.php?book=1 我生成这样的网址

```
$res = mysql_query("SELECT * FROM book WHERE id_book={$_GET['book']}");
while ($rw = mysql_fetch_object($res)){ 
    $title = strtolower(str_replace(" ", "-", $rw->title)).'.html';
    } 
```

我有 $title，但我不知道如何在 .htaccess 中的 mod 重写中使用它来获取 url www.mysite.com/book-title.html

我希望我设法解释了我想做什么。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:04:10.210

您需要确保您的帖子标题（即 URL 编码版本）是唯一的。然后，您可以使用 mod_rewrite 设置您的 .htaccess：

```
RewriteEngine On
RewriteRule ^(.*)\.html$ more.php?book=$1 
```

并确保您的 PHP 脚本使用[PDO](http://www.php.net/manual/en/book.pdo.php)来避免 SQL 注入：

```
$db = new PDO('mysql:dbname=my_db;host=127.0.0.1', 'user', 'password');
$statement = $db->prepare("select * from book where BOOK_NAME = :book");
$statement->execute(array(':book' => $_GET['book']));
$row = $statement->fetch(); 
```

# html - 层的奇怪 CSS 行为

> ID：15052402
> 
> 赞同：3
> 
> 时间：2013-02-24T13:54:30.157
> 
> 标签：html, css, image, background

最近我在网站画廊工作，并试图在图片前面制作描述标签。所以，它应该是这样的：

![在此处输入图像描述](../Images/b711ddba42c1483beb6c5a67a93360bf.png)

它的html：

```
<li class="project-item">
  <img src="images/project_example.jpg" alt="">
  <div class="annotation">
    <div class="annotation_head">Head</div>
    <div class="annotation_footer">Footer</div>
  </div>
</li> 
```

带有 .annotation 类的块是绝对的，而 .project-item 是相对的。但在此之前，我使用了另一种对我来说看起来很奇怪的解决方案，我无法解释它的行为。这里是：

![在此处输入图像描述](../Images/8bebe0519be668a157d52b14b2a02a54.png)

为了清楚起见，我将`position: absolute`规则替换为`margin-top: -50px`，并`color`从黑色变为红色。
奇怪的是，背景颜色从图像显示回来，但它应该在它前面，为什么？有没有合理的CSS规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:35:20.083

您看到文本与其背景分离的原因是元素背景和前景是独立的。

我添加了黑色背景`.project-item` `li`，您可以看到红色子 bg 正确定位在黑色父 bg 之上。 `.annotation`出现在 DOM 之后，`img`因此这些前景也被正确分层。如果您希望红色注释背景在`li`前景上方可见，那么您需要在`li.project-item`.

在这种情况下，您的定位`.slider .project-item .annotation{ position: absolute;}`当前覆盖了所需的`static`定位。

![背景分层正确](../Images/219da7c6c90d2fad05c4b9d862ec122a.png)

# asp.net-mvc - asp.net mvc web api项目中的MessageHandlers vs Filters

> ID：15052405
> 
> 赞同：8
> 
> 时间：2013-02-24T13:54:49.577
> 
> 标签：asp.net-mvc, asp.net-web-api

使用 MessageHandler 与 Filter 在 MVC Web api 项目的请求标头中检查 API 密钥有什么区别。

[我看到在http://www.asp.net/web-api/overview/working-with-http/http-message-handlers](http://www.asp.net/web-api/overview/working-with-http/http-message-handlers)中有一个很好的 MessageHandler 示例用于此目的

例如

```
GlobalConfiguration.Configuration.MessageHandlers.Add(new ApiKeyHandler()); 
```

但看起来我也可以使用过滤器做同样的事情。

```
GlobalConfiguration.Configuration.Filters.Add(new ApiKeyFilter()); 
```

假设 ApiKeyFilter 和 ApiKeyHandler 都只是查看请求头并检查 api 密钥，哪种方式更有效？有什么不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T14:55:11.990

MessageHandlers 比过滤器运行得更早。

顺序是：

-MessageHandler

- 授权过滤器

-模型绑定

-其他过滤器

安全相关的东西应该尽早运行。

# c# - Windows Phone 上的滞后动画

> ID：15052406
> 
> 赞同：0
> 
> 时间：2013-02-24T13:54:50.127
> 
> 标签：c#, animation, windows-phone-8, windows-phone

您好，我遇到了无法解决的性能问题。使用 Blend，我创建了一个显示和隐藏网格的动画。当检查切换开关按钮时，它被调用并起作用。问题是，它的工作非常滞后，并在延迟几秒钟后调用。我在诺基亚 Lumia 920 上测试该应用程序。您能帮我找出问题所在吗？

这是使用混合创建的动画代码：

```
<VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="Collapsing">
                <VisualStateGroup.Transitions>
                    <VisualTransition GeneratedDuration="0:0:0.5" />
                </VisualStateGroup.Transitions>
                <VisualState x:Name="Hidden">
                    <Storyboard>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)"
                                                       Storyboard.TargetName="CollapsingGrid">
                            <EasingDoubleKeyFrame KeyTime="0"
                                                  Value="95" />
                            <EasingDoubleKeyFrame KeyTime="0:0:0.5"
                                                  Value="0">
                                <EasingDoubleKeyFrame.EasingFunction>
                                    <CubicEase EasingMode="EaseOut" />
                                </EasingDoubleKeyFrame.EasingFunction>
                            </EasingDoubleKeyFrame>
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)"
                                                       Storyboard.TargetName="anonymousOnLabel">
                            <EasingDoubleKeyFrame KeyTime="0:0:0.5"
                                                  Value="0" />
                            <EasingDoubleKeyFrame KeyTime="0:0:1"
                                                  Value="91" />
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)"
                                                       Storyboard.TargetName="SettingsSharePicTglBtn">
                            <EasingDoubleKeyFrame KeyTime="0"
                                                  Value="95" />
                            <EasingDoubleKeyFrame KeyTime="0:0:0.5"
                                                  Value="0" />
                        </DoubleAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>
                <VisualState x:Name="Unhidden">
                    <Storyboard>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)"
                                                       Storyboard.TargetName="CollapsingGrid">
                            <EasingDoubleKeyFrame KeyTime="0:0:0.5"
                                                  Value="0" />
                            <EasingDoubleKeyFrame KeyTime="0:0:1"
                                                  Value="95">
                                <EasingDoubleKeyFrame.EasingFunction>
                                    <CubicEase EasingMode="EaseOut" />
                                </EasingDoubleKeyFrame.EasingFunction>
                            </EasingDoubleKeyFrame>
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)"
                                                       Storyboard.TargetName="anonymousOnLabel">
                            <EasingDoubleKeyFrame KeyTime="0"
                                                  Value="91" />
                            <EasingDoubleKeyFrame KeyTime="0:0:0.5"
                                                  Value="0" />
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)"
                                                       Storyboard.TargetName="SettingsSharePicTglBtn">
                            <EasingDoubleKeyFrame KeyTime="0"
                                                  Value="0" />
                            <EasingDoubleKeyFrame KeyTime="0:0:0.5"
                                                  Value="95" />
                        </DoubleAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups> 
```

我通过以下方式调用它：

```
private void TglBtn_Tap(object sender, System.Windows.Input.GestureEventArgs e)
        {
            if ((bool)((ToggleSwitchButton)sender).IsChecked)
            {
                VisualStateManager.GoToState(this, "Unhidden", true);
            }
            else
            {
                VisualStateManager.GoToState(this, "Hidden", true);
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T14:17:38.663

我建议不要为**Width**和**Height**属性设置动画。每次这些属性发生变化时，都会在可视化树上执行一次完整的测量/排列过程，这非常昂贵。相反，您应该尝试在网格的 RenderTransform 上设置**Scale**从**1.0 到 0.0**的动画。

现在，您可能正在为高度设置动画，因为您希望堆叠在网格下的东西向上移动以填充网格占用的空间。在这种情况下，您可能需要执行一些视觉技巧，例如对网格下方的事物进行动画**平移**以将它们向上移动，然后在动画的最后，作为最后一个关键帧，您可以重置 RenderTransforms 并折叠网格。然后，您将只经历一次测量/排列，而不是每个动画帧一次。

最后，我建议阅读有关 Windows Phone 性能注意事项的内容。这是一个很好的文档：[http ://bit.ly/15cExFz](http://bit.ly/15cExFz)

这两个演示文稿太棒了。我不能推荐他们。[http://channel9.msdn.com/events/PDC/PDC10/CD03](http://channel9.msdn.com/events/PDC/PDC10/CD03) & [http://channel9.msdn.com/Events/Build/2012/3-048](http://channel9.msdn.com/Events/Build/2012/3-048)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T10:37:20.807

我遇到过类似的问题，但我使用 DoubleAnimation 为 PlaneProjection 的 RotationX、RotationY 属性设置了动画。[从这篇文章](http://www.jeff.wilcox.name/2010/08/performanceprogressbar/)中找到了问题的解决方案。它添加了以 0.1 结尾的“神奇”数字——这告诉系统它是基于控件宽度的比率，它是属性的 hack 过载，但在某些情况下它会带来真正的性能增长。

```
<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="anonymousOnLabel">
    <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0.1" />
    <EasingDoubleKeyFrame KeyTime="0:0:1" Value="91.1" />
</DoubleAnimationUsingKeyFrames> 
```

当然，直接对 Width 和 Height 属性进行动画处理并不是一个好主意，因为这将是 Dependent Animation 并且会对性能产生影响。

# html - 按钮图像排列交叉浏览器顶部的文本？

> ID：15052409
> 
> 赞同：0
> 
> 时间：2013-02-24T13:55:44.313
> 
> 标签：html, css, cross-browser

我已经为手头的问题设置了一个快速的 jsfiddle。

[http://jsfiddle.net/Gdnbe/](http://jsfiddle.net/Gdnbe/)

如果您扩大结果窗格，您会注意到所有内容都是内联的。

当我在 Firefox 中查看它时，一切似乎都正确排列（按钮图像高度比输入长，但应该垂直居中），包括文本“登录”。

然而，在 chrome 中，它会将按钮文本移动到按钮的底部，并且按钮与输入的内联效果不佳，它太高了。

有问题的代码：

```
<input name="submit" value="Log in" style="background: url(' http://www..../images/btn-bg.png') no-repeat scroll 0 0 transparent;
    border: none;
    /*border-radius: 0.4em 0.4em 0.4em 0.4em;*/
    color: #999999;
    padding: 0.7em 0.8em 1.1em;
    margin-left: 20px;
    height: 35px;
    width: 146px;
    cursor:pointer;
    color:#fff;" type="submit"> 
```

使这个跨浏览器兼容的下一步是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:12:36.553

问题是按钮上的填充。删除它，问题就消失了。

[http://jsfiddle.net/Gdnbe/1/](http://jsfiddle.net/Gdnbe/1/)

```
Just look at the fiddle (stupid "Links to jsfiddle must be accompanied by code" rule) 
```

如果您想坚持使用背景图像，这是您可以做的最好的事情。如果您想让所有元素完美排列，请考虑使用 CSS3 中的一些好东西：

*   边界半径
*   线性梯度
*   盒子阴影

# javascript - .getDay() 奇怪的行为

> ID：15052415
> 
> 赞同：3
> 
> 时间：2013-02-24T13:56:34.317
> 
> 标签：javascript

有一个例子

```
console.log((new Date(2013, 02, 24)).getDay(), 24) // => 0 24
console.log((new Date(2013, 02, 25)).getDay(), 25) // => 1 25
console.log((new Date(2013, 02, 26)).getDay(), 26) // => 2 26
console.log((new Date(2013, 02, 27)).getDay(), 27) // => 3 27
console.log((new Date(2013, 02, 28)).getDay(), 28) // => 4 28
console.log((new Date(2013, 03, 01)).getDay(), 01) // => 1 1
console.log((new Date(2013, 03, 02)).getDay(), 02) // => 2 2 
```

根据[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDay](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDay)，方法`getDay()`

> 根据当地时间返回指定日期的星期几。
> 
> getDay 返回的值是一个与星期几对应的整数：0 代表星期日，1 代表星期一，2 代表星期二，以此类推。

最后两个结果似乎不是真的。我希望输出如下所示

```
0 24
1 25
2 26
3 27
4 28
5 1
6 2 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T13:59:19.547

设置日期时，通过 2 表示三月，因为它是从 0 开始的。如果您在 2 月使用 1，它将按预期工作。

引用[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

> **month** 表示月份的整数值，从 0 开始表示 1 月到 11 表示 12 月。

# c#-3.0 - 如何使用 imagebox emgucv 调整图像大小？

> ID：15052419
> 
> 赞同：2
> 
> 时间：2013-02-24T13:57:10.483
> 
> 标签：c#-3.0, face-detection

我在文件夹图像中有图像如何在打开图像时使用 emgucv 中的图像框调整图像大小？谢谢。。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-11T12:31:58.243

```
// To get orginal image from the OpenFileDialog
Image<Bgr, Byte> captureImage = new Image<Bgr, byte>(openImageFileDialog.FileName);

// To resize the image 
Image<Bgr, byte> resizedImage = captureImage.Resize(width, height, Emgu.CV.CvEnum.INTER.CV_INTER_LINEAR); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-04T09:21:13.167

答案很简单。

让我们假设图像的路径是“C:\image.jpg”。

```
Mat frame = new Mat();   //Declaration
string path = @"C:\image.jpg";
int width = 640, height = 480;

frame = CvInvoke.Imread(path , LoadImageType.AnyColor);

CvInvoke.Resize(frame, frame, new Size(imagebox1.Width, imagebox1.Height), 0, 0, Inter.Linear);    //This resizes the image to the size of Imagebox1 
OR
CvInvoke.Resize(frame, frame, new Size(width, height), 0, 0, Inter.Linear);    //This resizes the image into your specified width and height 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-04T05:42:38.757

这就是我如何使用 EmguCV 调整图像大小

```
 Bitmap bitmap = new Bitmap(FileUpload1.PostedFile.InputStream);
            Image<Hsv, Byte> Iimage = new Image<Hsv, byte>(bitmap);
            Image<Hsv, Byte> HsvImage = Iimage.Resize(384, 256,INTER.CV_INTER_LINEAR); 
```

# javascript - 如何组合多边形并消除重叠？

> ID：15052430
> 
> 赞同：4
> 
> 时间：2013-02-24T13:58:18.517
> 
> 标签：javascript, google-maps-api-3

我在谷歌地图中制作了可编辑的多边形，现在我可以改变形状，在其中打孔，将两个以上的多边形组合成多多边形并再次分解它们。

请参阅[http://maps.amsterdam.nl/testshape/beheer](http://maps.amsterdam.nl/testshape/beheer)并阅读 Legenda 中的说明以自己尝试。

我不知道的一个问题是如何将两个重叠的多边形组合成一个没有重叠的多边形。像这样的东西：

```
function(path1, path2) {
  algorithm...
  return newPath;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:46:22.330

非常感谢 lib 的建议。我使用[https://github.com/bjornharrtell/jsts/blob/master/examples/overlay.html](https://github.com/bjornharrtell/jsts/blob/master/examples/overlay.html)与：

```
var union = a.union(b);
var difference = a.difference(b); 
```

组合形状并在形状上打孔或剪裁形状。因此，我不得不将 Google Maps 路径转换为 ​​WKT，并编写了以下 Javascript：

```
function doeWKT(dePaths) {
var deWKTarray = [];    
for (var i = 0; i < dePaths.length; i++) {
    dePath = dePaths.getArray()[i].getArray();
    var deKomma = "";
    var deCoords = "";
    for (var j = 0; j < dePath.length; j++) {
        deLatLng = dePath[j];
        if (j == 0) var deCoords0 = deKomma + deLatLng.lng().toFixed(6) + " " + deLatLng.lat().toFixed(6);
        deCoords +=  deKomma + deLatLng.lng().toFixed(6) + " " + deLatLng.lat().toFixed(6);
        deKomma = ",";
    }
    deWKTarray.push("(" + deCoords + "," + deCoords0 + ")");
}

var deHoles = [];
var deReader = new jsts.io.WKTReader();     
for (var i = 0; i < deWKTarray.length; i++) {
    var deHole = deReader.read("POLYGON("+deWKTarray[i]+")");
    if (!deHoles[i]) deHoles[i] = -1;
    for (var j =0; j < deWKTarray.length; j++) {
        if ( i != j) {
            var deContainer = deReader.read("POLYGON(" + deWKTarray[j] + ")");
            if (deHole.within(deContainer)) deHoles[i] = j;
        }
    }
}

var deKomma = "";
var deWKTstring = "";
var deMulti = false;
for (var i = 0; i < deWKTarray.length; i++) {
    if (deHoles[i] == -1) {
        deWKTstring += deKomma + "(" + deWKTarray[i] + "";
        if (i > 0) var deMulti = true;
    }
    for (var j = 0; j < deHoles.length; j++) {
        if (deHoles[j] == i) deWKTstring += "," + deWKTarray[j] + "";
    }
    if (deHoles[i] == -1) deWKTstring += ")";   
    deKomma = ",";
}

if (deMulti) deWKTstring = "MULTIPOLYGON(" + deWKTstring +")";
else deWKTstring = "POLYGON" + deWKTstring;
return deWKTstring;
} 
```

您可以尝试/查看在[http://maps.amsterdam.nl/testshape/beheer](http://maps.amsterdam.nl/testshape/beheer)中工作的一切（阅读图例中的说明）

# php - 为什么这个锚标记没有加载到外部页面上的适当 div 中？

> ID：15052431
> 
> 赞同：0
> 
> 时间：2013-02-24T13:58:50.840
> 
> 标签：php, html, jquery-mobile, anchor

谁能告诉我为什么我的锚标签不起作用？他们只是加载外部页面，但不会将您带到页面下方的正确 div。

这是我的 .php 页面上的代码

```
</td><td class="shorter"> 
<input name="txt2nd" class="numbersOnly" type="number" id="txt2nd"></td>
<td class="shortest">
<a href="update.html#update_show" rel="external" id="update"><img class="update" alt="update price" src="images/update.png">
</a></td>
</tr> 
```

然后应该在锚点 id 处加载一个外部页面。该页面上的代码如下所示：

```
<div class="text-bg">
  <form method="post" data-ajax="false" id="update_show" action="php/input_shows.php">
      <p><label for="name">Your name</label><input type="text" size="30" name="name" id="name" /></p>
      <p><label for="price">Price of a show</label><input type="number" step="any" min="0" name="price" id="price" cols="5" /></p>
      <p><input type="submit" value="Update" name="commit" id="message_submit"/> or 
      <a  rel="external" href="budget.html">Cancel</a></p>
  </form> 
```

我不确定我哪里出错了，或者这是否是由于我不知道的与 jQuery mobile 的冲突引起的。我希望你们会注意到一些非常简单的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:00:39.487

在外部页面上，您需要一个锚标记来链接，而不是任何具有 id 的元素。 `<a name="update_show"></a>`就在表格上方。

**更新**：正如@Marko D 所建议的，您不需要命名的锚标记。我会假设它由于JS而不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:20:52.250

我很确定我有这个问题的答案，我在这里发布：

[https://stackoverflow.com/a/15553746/1462775](https://stackoverflow.com/a/15553746/1462775)

注意：这可能应该只是作为对上述问题的评论添加，但我还没有足够的积分来做到这一点。:(

# javascript - 选择特定 a href 的第一个实例

> ID：15052440
> 
> 赞同：0
> 
> 时间：2013-02-24T13:59:51.730
> 
> 标签：javascript, jquery, css, jquery-selectors, css-selectors

如何仅选择包含特定链接的第一个实例`href`，解决方案可以是 css 或 javascript，我更喜欢 css，因为一旦我选择了正确的链接，我需要进行样式更改，但我什至不确定 css 是否可以做我需要的。

```
<ul class="digital-downloads">
    <li> <a href="order_5129865a7d832&amp;download_file=936">Link</a></li>
    <li> <a href="order_5129870f01410&amp;download_file=936">Link</a></li>
    <li> <a href="order_512a033229f68&amp;download_file=935">Link</a></li>
    <li> <a href="order_512a048548f68&amp;download_file=935">Link</a></li>
    <li> <a href="order_512a0c31734a6&amp;download_file=932">Link</a></li>
</ul> 
```

正如您在上面的代码中看到的那样，前两个链接并不相同，但它们具有相同的结尾。我需要一种方法来仅选择包含or或等的链接的*第一个*实例。`download_file=936``download_file=935``download_file=932`

li 的数量以及相同链接的数量总是不同的，所以我不能选择第三个 li，例如，第三个链接`href`不会总是 935 `li`，它可能是 936 或 932，具体取决于具体情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T14:06:43.620

您可以对 jQuery 选择应用[过滤器](http://api.jquery.com/filter/)，在与之前的 href 进行比较时循环它们：

```
var last;
var firsts = $(".digital-downloads li a").filter(function(){
    var link = this.href.match(/download_file=\d+$/)[0];
    if (link == last)
        return false; // we had this before, don't select
    else {
       last = link;
       return true; // we've found a new one!
    }
}); 
```

简而言之，处理不匹配的正则表达式：

```
…
    var m = this.href.match(/download_file=\d+$/);
    return m && m[0] != last && (last=m[0],true);
… 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T14:04:09.823

使用 JavaScript：

```
var first = document.querySelector('a[href$="936"]');

first.className = 'first'; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/BzYA8/)。

这种方法添加了一个 CSS 类名以允许 CSS 样式，因此应该结合每种方法的优点，只要浏览器支持`document.querySelector()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T14:08:01.780

```
$('a[href*="download_file=935"]:first') 
```

仅在 CSS 中执行此操作变得非常复杂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T14:08:11.073

使用正则表达式：

```
$(function() {
 var count = 0;
 $('a').each(function() {
  var match = $(this).attr('href').match(/(.*download_file=\d+)/);
    if (match !== null && count == 0) {
        alert(match.pop());
        count++;
    }
 });
}); 
```

[http://jsfiddle.net/vzJVa/](http://jsfiddle.net/vzJVa/)

# opengl - 为什么 OpenGL 会把东西颠倒过来？

> ID：15052446
> 
> 赞同：7
> 
> 时间：2013-02-24T14:00:04.850
> 
> 标签：opengl, drawing, rendering, flip

我还没有看到有人回答这个问题。我所看到的只是人们告诉他们有些事情是颠倒的，然后其他人告诉他们翻转他们的代码。但我想知道的是，为什么 OpenGL 会翻转 Y 坐标？这没有道理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T14:08:37.427

OpenGL 假设 Y 坐标从底部到顶部。如果您的代码假设相反的内容会颠倒显示。

有关**opengl 坐标系的更多信息谷歌**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T14:18:45.713

**It all depends on how you setup your scene**. There are many things that can cause this effect.

For instance, the **camera position/orientation** affects how you see the final scene.

```
gluLookAt(camera[0], camera[1], camera[2],  /* look from camera XYZ */ 
                  0,         0,         0,  /* look at the origin */ 
                  0,         1,         0); /* positive Y up vector */ 
```

When working with textures, specifying **wrong texture coordinates** can flip the drawing.

But the most **common issue** might be people forgetting that OpenGL defines **coordinate (0, 0) to be the lower left corner of the display** (with the Y going upward).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T14:02:57.703

OpenGL 适用于笛卡尔坐标。在笛卡尔坐标系中，0,0 位于中心，正坐标向上和向右延伸。任何坐标都可以映射或转换为程序员希望的任何坐标，但这是默认设置。当您提供纹理坐标时，OpenGL 期望那些是 Catresian 坐标，而不是自上而下的坐标。这些坐标可以由程序转换，但最快的解决方法是翻转纹理。

![在此处输入图像描述](../Images/54502c7b32ebf91b57f321433bfbc726.png)

# vbscript - 每个都有条件的VBscript

> ID：15052452
> 
> 赞同：0
> 
> 时间：2013-02-24T14:01:02.667
> 
> 标签：vbscript, wql

我必须为我的实习做一个作业，我不知道为什么条件不起作用。我正在尝试使用 VBscript 获取除少数几个之外的所有 windowsservices 并将其写入文本文件。虽然我没有编程经验，但我在这里不知所措。你们能弄清楚这段代码有什么问题吗：

```
Const ForAppending = 8
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objTextFile = objFSO.OpenTextFile _
("D:\Beheer\Scripts\Services\Services_For_this_server.txt", ForAppending, True)
Set colServices = GetObject("winmgmts:").ExecQuery _
("Select * from Win32_Service")
For Each objService in colServices 
If objService = "Human Interface Device Access" OR
    "Health Key and Certificate Management" OR
    "IKE and AuthIP IPsec Keying Modules" OR
    "PnP-X IP Bus Enumerator" OR
    "IP Helper" OR
    "CNG Key Isolation" OR
    "KtmRm for Distributed Transaction Coordinator" OR
    "Server" OR
    "Workstation" OR
    "Link-Layer Topology Discovery Mapper" OR
    "TCP/IP NetBIOS Helper" OR
    "Multimedia Class Scheduler" OR
    "Windows Firewall" OR
    "Distributed Transaction Coordinator" OR
    "Microsoft iSCSI Initiator Service" OR
    "Windows Installer" OR
    "Network Access Protection Agent" OR
    "Netlogon" OR
    "Network Connections" OR
    "Network List Service" OR
    "Network Location Awareness" OR
    "Network Store Interface Service" OR
    "Performance Counter DLL Host" OR
    "Performance Logs & Alerts" OR
    "Plug and Play" OR
    "IPsec Policy Agent" OR
    "Power" OR
    "User Profile Service" OR
    "Protected Storage" OR
    "Remote Access Auto Connection Manager" OR
    "Remote Access Connection Manager" OR
    "Routing and Remote Access" OR
    "Remote Registry" OR
    "RPC Endpoint Mapper" OR
    "Remote Procedure Call (RPC) Locator" OR
    "Remote Procedure Call (RPC)" OR
    "Resultant Set of Policy Provider" OR
    "Special Administration Console Helper" OR
    "Security Accounts Manager" OR
    "Smart Card" OR
    "Task Scheduler" OR
    "Smart Card Removal Policy" OR
    "Secondary Logon" OR
    "System Event Notification Service" OR
    "Remote Desktop Configuration" OR
    "Internet Connection Sharing (ICS)" OR
    "Shell Hardware Detection" OR
    "SNMP Trap" OR
    "Print Spooler" OR
    "Software Protection" OR
    "SPP Notification Service" OR
    "SSDP Discovery" OR
    "Secure Socket Tunneling Protocol Service" OR
    "Microsoft Software Shadow Copy Provider" OR
    "Telephony"
THEN ""
ELSE
objTextFile.WriteLine(objService.DisplayName)
Next
objTextFile.Close 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:10:56.667

为了以更有条理的方式处理这些问题：

（1）从最简单的脚本开始（列出所有服务）：

```
 Dim colServices : Set colServices = GetObject("winmgmts:").ExecQuery("Select * from Win32_Service")
  Dim n           : n               = 0
  Dim objService
  For Each objService in colServices
      WScript.Echo n, objService.DisplayName
      n = n + 1
  Next 
```

输出：

```
0 Adobe Flash Player Update Service
1 Alerter
2 Application Layer Gateway Service
3 Application Management
4 ASP.NET State Service
5 Windows Audio
6 Background Intelligent Transfer Service
...

105 Automatic Updates
106 Wireless Zero Configuration
107 Network Provisioning Service 
```

(2) 将输出重定向到一个临时文件中（供进一步参考；参见下面的步骤（5））

(3) 以“自然”的方式处理选择/跳过问题（If ... Else ... End If）：

```
 Dim colServices : Set colServices = GetObject("winmgmts:").ExecQuery("Select * from Win32_Service")
  Dim n           : n               = 0
  Dim objService
  For Each objService in colServices
      Dim sSkipped : sSkipped = Space(7)
      [insertion point]
      WScript.Echo n, sSkipped, objService.DisplayName
      n = n + 1
  Next 
```

如果你把

```
If objService = "Alerter" Then sSkipped = "skipped" 
```

进入插入点，您会收到“对象不支持此属性或方法”运行时错误。使用 .DisplayName 如

```
If objService.DisplayName = "Alerter" Then sSkipped = "skipped" 
```

'作品'：

```
0         Adobe Flash Player Update Service
1 skipped Alerter
2         Application Layer Gateway Service
3         Application Management 
```

然后尝试：

```
 If objService.DisplayName = "Alerter" Or
     objService.DisplayName = "Application Management" Then sSkipped = "skipped" 
```

引发语法错误，并且

```
 If objService.DisplayName = "Alerter" Or _
     objService.DisplayName = "Application Management" Then sSkipped = "skipped" 
```

输出：

```
0         Adobe Flash Player Update Service
1 skipped Alerter
2         Application Layer Gateway Service
3 skipped Application Management
4         ASP.NET State Service
... 
```

让它“工作”。

(4) 原则上解决了问题后，您可以考虑解决方案的缺点以及可能的增强/改进。编辑长 _ 连接的`Or`子句序列很麻烦；一个标准的出路/解决方法是使用字典：

```
 Dim colServices : Set colServices = GetObject("winmgmts:").ExecQuery("Select * from Win32_Service")
  Dim dicSkip     : Set dicSkip     = CreateObject("Scripting.Dictionary")
  dicSkip("Alerter"               ) = Empty
  dicSkip("Application Management") = Empty
  WScript.Echo "planning to skip:", Join(dicSkip.Keys(), ", ")
  Dim n           : n               = 0
  Dim objService
  For Each objService in colServices
      Dim sSkipped : sSkipped = Space(7)
      If dicSkip.Exists(objService.DisplayName) Then sSkipped = "skipped"
      WScript.Echo n, sSkipped, objService.DisplayName
      n = n + 1
  Next 
```

现在一个易于维护的数据结构

```
 dicSkip("Alerter"               ) = Empty
  dicSkip("Application Management") = Empty 
```

取代了更复杂的控制结构。

(5) 您甚至可以使用完整列表的转储（第 2 步）和一些编辑器宏来创建完整的`dicSkip(..) = Empty`行序列，并通过注释输入/输出来启用/禁用当前选择。这也可以避免由拼写错误引起的意外。

**更新：**

```
type servicedump.vbs

Option Explicit

Const sOutFSpec = ".\servicedump.txt"

Dim goFS        : Set goFS        = CreateObject("Scripting.FileSystemObject")
Dim oOutFile    : Set oOutFile    = goFS.CreateTextFile(sOutFSpec, True)
Dim colServices : Set colServices = GetObject("winmgmts:").ExecQuery("Select * from Win32_Service")
Dim dicSkip     : Set dicSkip     = CreateObject("Scripting.Dictionary")
dicSkip("Alerter"               ) = Empty
dicSkip("Application Management") = Empty
Dim objService
For Each objService in colServices
    If Not dicSkip.Exists(objService.DisplayName) Then oOutFile.WriteLine objService.DisplayName
Next
oOutFile.Close

cscript servicedump.vbs

type servicedump.txt
Adobe Flash Player Update Service
Application Layer Gateway Service
ASP.NET State Service
Windows Audio
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:43:16.183

好吧，您在这里有 2 个很好且非常详细的答案，可以解释您错过了什么。在这种情况下，使用`Dictionary`@Ekkehard.Horner 建议应该是最优化的方式，因为您有大量值可供比较。但也请尝试一下`Select Case`，就像其他类似任务的替代方案一样。您可以使用逗号分隔的值列表，`Select Case`例如：

```
'instead of...
For obj In Collection
    If obj.property = "X" Or _
    obj.property = "Y" Or _
    obj.property = "Z" Then
        '...
    Else
        '...
Next

'you can...
For obj In Collection
    Select Case obj.property
        Case "X", "Y", "Z"
            'skip (or whatever)
        Case Else
            'write (or whatever)
    End Select
Next 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T14:10:48.253

首先，字符串本身不是条件。不要重复字符串，而是重复**条件**。该条件由一个`=`两边都有变量的运算符组成。一个示例条件是`answer = 42`。

其次，您将对象与字符串进行比较。正如 Ekkehard Horner 评论的那样，您可能应该比较对象的`DisplayName`属性`objService`。

第三，在 VBScript 中，`if`跨越多行的语句（如 ）`_`在除最后一行之外的所有行的末尾都需要一个下划线 ( )。

所以改变：

```
If objService = "Human Interface Device Access" OR
    "Health Key and Certificate Management" OR 
```

至：

```
If objService.DisplayName = "Human Interface Device Access" OR _
    objService.DisplayName = "Health Key and Certificate Management" OR _ 
```

# actionscript-3 - Flash Pro IDE 找不到 RadioButton

> ID：15052453
> 
> 赞同：1
> 
> 时间：2013-02-24T14:01:04.487
> 
> 标签：actionscript-3, flash

我尝试用 AS3、Flash 和 XML 构建一个小测验。当我创建一个单选按钮时，Flash 会在我的文档顶部自动创建一个导入。美好的！

但是当我测试我的场景时出现错误：1172：未找到定义 fl.controls.RadioButton

```
var rb:RadioButton = new RadioButton();
rb.x = 50;
rb.y = 150;
rb.label = "Testbutton";
rb.value = "100"; 
```

为什么？

因此，对于我在笔记本电脑上损坏某些东西的情况，我在另一台 PC 上安装了新的 30 天试用版……但同样的错误。flash.swc 就像在每个 Flash Pro IDE 中都有自己的目录结构一样。所以这不可能是失败的。自动完成向我显示所有可能的导入语句也“导入 fl.controls.RadioButton”

有人知道这个问题吗？为什么只有 RadioButton？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:04:18.047

您必须从窗口组件导入到库面板。

参考下图

![在此处输入图像描述](../Images/93aec08392e6823a74e6498a1120a709.png) ![在此处输入图像描述](../Images/ec5a40edc90f4e2337ec3e9a05303d60.png)

您应该按如下方式导入 Radiobutton：

```
import fl.controls.RadioButton;

var rb:RadioButton = new RadioButton();
rb.x = 50;
rb.y = 150;
rb.label = "Testbutton";
rb.value = "100"; 
```

# android - 印地语/梵文 tts for android

> ID：15052454
> 
> 赞同：1
> 
> 时间：2013-02-24T14:01:34.550
> 
> 标签：android, text-to-speech, hindi

我打算制作一个android应用程序。我想知道是否有任何 tts 引擎可以阅读印地文/天城文文本。如果没有，另外，是否有任何可以读取语音的tts引擎。如果是这样，有没有可以将印地语转换为英语语音的软件。然后我可以让我的 tts 引擎读取语音。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:05:57.003

Android 上的原生 TTS 不支持印地语。您可能需要做的是创建一个使用印地语文本并将其翻译成音频文件的服务。然后，您将音频文件流式传输到您的 Android 应用程序。

否 - 内置 Pico TTS 仅提供法语、意大利语、德语、西班牙语和英语（美国和英国）。

还要检查： [https ://groups.google.com/forum/?fromgroups=#!topic/tts-for-android/_1-JG149quw](https://groups.google.com/forum/?fromgroups=#!topic/tts-for-android/_1-JG149quw)

# azure - 将 Azure 虚拟机本地文件夹备份到 Blob 存储？

> ID：15052455
> 
> 赞同：0
> 
> 时间：2013-02-24T14:01:35.300
> 
> 标签：azure, backup, virtual-machine, azure-blob-storage

我刚刚在 Windows Azure 中设置了一个额外的小型 VM 实例来为我们公司运行帮助控制台。可以通过简单的 .NET 界面更新和发布帮助文件。显然，平面 html 文件正在部署到 VM 上的本地驱动器，并通过 IIS 公开。我只是想知道这有多稳定？如果虚拟机发生硬件故障，大概没有自动故障转移，我们对帮助系统所做的任何编辑都会丢失？

谁能推荐一种我可以将源文件从 VM 传送到 blob 存储的方法？我可以编写一个应用程序来执行此操作，我只是想知道是否有现成的解决方案？

***附加信息：***

*   VM 实例正在运行 Server 2008 R2 SP1（作为虚拟机而不是 Web 角色）
*   需要每 24 小时创建一次备份
*   需要从 blob 容器中自动清除过期备份（3 天以上）
*   我们使用的帮助系统叫做 HelpConsole 2012
*   每周以 myabe 2-3 的速度添加新页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T14:50:16.890

答案取决于您是在 Windows Azure 虚拟机还是在 Windows Azure Web 角色上运行它。

如果您在 Windows Azure 虚拟机上运行此程序，则 VHD 存储在 BLOB 存储中，如果站点运行的是 C: 驱动器而不是数据磁盘，则系统为两者都打开了一些主机缓存读取和写入。在这种情况下，有可能（取决于您用来写出文件的方法）在发生故障之前数据不会被推回 BLOB 存储中的 VHD。您可以确保您的写入方法执行写入操作，或者关闭写入缓存。更好的是，为您的网站文件附加一个数据磁盘。默认情况下，数据磁盘已关闭读取和写入缓存（您可以打开读取缓存）。由于 VHD 是持久的，因此您不必担心编辑会丢失。您可以编写文件快照并将它们单独移动到 BLOB 存储，或者甚至将它们推送到其他地方。使用此选项要考虑的另一件事是，您必须关心 VM 实例并保持它们的补丁和最新状态。

如果您正在运行 Web 角色，那么是的，如果发生故障并且 VM 进行自我修复，它确实会使用旧文件重新部署。在这种情况下，我建议更改 Web 角色中的代码，以便在将更新写入本地文件时，还会将本地文件的副本放入 BLOB 存储中。此外，在 Web 角色 OnStart 中，您可以访问 BLOB 存储并在本地下载所有新内容。不过要非常小心这种方法，因为它只适用于一个实例，而不是多个实例。如果您计划运行服务器的多个实例（如果您想要 SLA 以保证正常运行，则必须这样做），那么您的代码将需要更健壮一些，并写入 BLOB 存储，然后提醒角色的所有实例有一个新文件要在本地下拉。

Web 角色的另一个选项是还为内容编写一个处理程序，以便请求进入并直接映射到文件 BLOB 存储。然后可以进行更新以将编辑定向到 BLOB 存储中的文件。这会将平面文件的服务从计算节点卸载到 BLOB 存储，您甚至可以实现一些缓存并通过处理程序将内容流回，而不是让它们直接访问 BLOB 存储。

现在，另一种选择是为此使用 Windows Azure 网站。Windows Azure 网站中网站文件的底层存储是一个共享位置，因此更新其中的文件将立即反映在所有实例中。此外，该站点的内容存储在 BLOB 存储中，可以通过 FTP、源代码控制或直接从代码进行更新。这里有很多选择。您最终可能会转向保留实例，以帮助避免网站拥有的某些配额。网站可能不是您当前的选择，具体取决于其他要求（例如，您需要对环境进行多少控制，因为您对网站没有太多控制权）。

# objective-c - 为什么在这种情况下重新分配之前我需要将静态指针设置为 nil

> ID：15052456
> 
> 赞同：-2
> 
> 时间：2013-02-24T14:01:39.907
> 
> 标签：objective-c, static, zombie-process

对于我的一个类，我有一个*“始终在最后创建的对象上保留静态引用”模式*。当我创建它的新实例时，应该将静态指针设置为这个新实例。解决方法如下：

```
static AViewController *actualSelf = nil;

+ (AViewController *) getActualSelf {
    return actualSelf;
}

- (AViewController *) init {
    self = [super init];
    self.title = @"Title";

    actualSelf = nil; // Why do I need this line the second time init gets called?

    actualSelf = self; // this is the only line which sets actualSelf

    return self;
}

- (void)dealloc {
    actualSelf = nil;
}

…SOME IMPORTANT MUST BE MISSING, BUT I DON'T KNOW WHAT 
```

*   创建 AViewController a > Init 被调用 > 静态指针设置为
*   创建 AViewController b > 调用初始化 > 静态指针应设置为 b。但是静态指针没有设置为b！它把自己从*a*设置为 nil！

对象 a 大部分时间在 b 被创建之前被释放。

释放静态变量时是否总是需要将它们重置为零？不，请参阅下面我自己的答案。

**如果没有“actualSelf = nil;”行，则通过 ARC 对象 a 在actualSelf 设置为对象 b 的那一刻被释放。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T14:04:39.290

```
actualSelf = nil; // WHY DO I NEED THIS LINE? 
```

您不需要这条线，它什么也没做，并且可能会在发布版本中被编译器优化器消除。

该类不是单例。

由于问题已被修改，其余答案已被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T19:29:56.063

> *   创建 AViewController a > Init 被调用 > 静态指针设置为
> *   创建 AViewController b > 调用初始化 > 静态指针应设置为 b。但是静态指针没有设置为b！它把自己从*a*设置为 nil！

可能除了`actualSelf`拥有`a`. 因此，`actualSelf = self;`在初始化过程中`b`会导致`a`被完全释放并因此被释放。在 的期间`-dealloc`，`a`它设置`actualSelf`为`nil`。显然，这是在分配`actualSelf`给新的`self`（对象`b`）之后发生的。`-release`（ARC 提供的调用相对于分配的精确操作顺序`actualSelf`是不可预测的。）

您在方法中分配`actualSelf`的事实很糟糕。它表明应该是因为如果它持有对一个对象的强引用，那么该对象就不能被释放。`nil``-dealloc``actualSelf``__weak`

至少，应该在重置之前`-dealloc`测试是否`actualSelf`等于。`self`但只要`actualSelf`是强引用，这永远不会是真的，因为强引用的对象不能被释放。

整个方法存在很大问题。你真正想要完成什么？

# arrays - bash/shell 将数组传递给函数然后循环？

> ID：15052461
> 
> 赞同：1
> 
> 时间：2013-02-24T14:02:03.053
> 
> 标签：arrays, bash, shell, loops

当直接在函数中定义一个数组时，下面的工作按预期工作；

```
function each {
  local array=(1 2 3)
  len=${#array[*]}
  for (( i=0; i<len; i++ )); do
    echo ${array[$i]}
  done
}

each

# outputs;

1
2
3 
```

但我不知道如何将数组作为参数传入并获得相同的输出；

```
function each {
  local array=$1
  len=${#array[*]}
  for (( i=0; i<len; i++ )); do
    echo ${array[$i]}
  done
}

array=(1 2 3)
each array

# outputs;

array 
```

感谢您的帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:07:13.170

我会将数组元素作为不同的位置参数传递给函数：

```
function f() {
    local array = "$@";
    # ...
}

## calling your function
f ("${array[@]}") 
```

# sql - 上个月和总计的总和

> ID：15052462
> 
> 赞同：0
> 
> 时间：2013-02-24T14:02:03.413
> 
> 标签：sql, zend-framework

我试图在上个月和总数中获得用户的积分总和，是否可以在一个查询中获得它？我使用zend，但我可能可以使用提供的sql。

这是我上个月的总数

```
$select = $this->_db
            ->select()
            ->from(array('p' => $this->_name), array(
                'user_login',
                'sum' => new Zend_Db_Expr('SUM(p.value)'),
                )
            )
            ->joinLeft(array('u' => 'user'), 'p.user_login = u.login')
            ->group('p.user_login')
            ->where('DATE(when) >= CURDATE() - INTERVAL 30 DAY')
            ->order('sum DESC')
            ;
    return $this->getAdapter()->fetchAll($select); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:20:00.953

据我了解这个问题，您想显示过去 30 天的总数以及每个用户的所有时间总数；遗憾的是，我无法测试 Zend 语法，而且我不太习惯，但这里是 MySQL 所需 SQL 的一个版本；

```
SELECT p.user_login, 
  SUM(IF(DATE(`when`) >= CURDATE() - INTERVAL 30 DAY,p.value,0)) sum,
  SUM(p.value) total_sum
FROM user_value p
JOIN user u
  ON u.login = p.user_login
GROUP BY p.user_login
ORDER BY sum DESC; 
```

[用于测试的 SQLfiddle](http://sqlfiddle.com/#!2/c85b2/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T14:22:59.070

我相信你的初始查询相当于这个 SQL：

```
SELECT p.user_login, SUM(p.value) as sum_last_month
FROM person p
LEFT JOIN user u ON p.user_login = u.login
WHERE DATE(when) >= CURDATE() - INTERVAL 30 DAY
GROUP BY p.user_login
ORDER BY sum_last_month DESC 
```

我不确定如何使用 Zend 进行这样的嵌套 SELECT，但在 SQL 中我相信这样的事情会起作用：

```
SELECT p.user_login, SUM(p.value) as sum_last_month,
    (SELECT SUM(p2.value) FROM person p2 WHERE p2.id = p.id) as total
FROM person p
LEFT JOIN user u ON p.user_login = u.login
WHERE DATE(when) >= CURDATE() - INTERVAL 30 DAY
GROUP BY p.user_login
ORDER BY sum_last_month DESC, total DESC 
```

# opengl - 给定图像的间距，如何计算 GL_UNPACK_ALIGNMENT？

> ID：15052463
> 
> 赞同：2
> 
> 时间：2013-02-24T14:02:10.403
> 
> 标签：opengl

大多数图像库将图像提供为宽度、高度、间距，然后是数组像素。然而，OpenGL 并不直接接受音调，而是期望：

```
 glPixelStorei(GL_UNPACK_ALIGNMENT, align);
 glPixelStorei(GL_UNPACK_ROW_LENGTH, row_length); 
```

`row_length`是`pitch / bytes_per_pixel`，但是如何计算正确的值`align`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:12:10.510

对于您将看到的绝大多数图像，您不需要`GL_ROW_LENGTH`. 将此设置为非零值会严重降低上传性能；*仅在绝对需要*时才使用它。

对于大多数图像，音高只是（`width`* `bpp`），与某个边界对齐。例如，如果`bpp`是 3（每像素字节数），宽度是 9，则得到 27。对于许多计算机而言，这不是一个好的行号，因此它们通常会将其对齐到最接近的 4 倍数。因此您在大多数图像中看到的音高是 28。

因此，要计算对齐，只需计算除以音高的 2 的最大幂（最多 8 个）。如果图像中的间距为 28，则 2 的最大幂为 4。将其设置为`GL_UNPACK_ALIGNMENT`。通常，您可以在 4 处停止，因为这是大多数图像将使用的最大对齐方式。

您*需要*使用`GL_ROW_LENGTH`的时间是计算出的音高 ( `align(width * bpp, alignment)`) 不等于实际音高的时候。如果发生这种情况，那么您需要同时使用对齐方式和行长。但这种情况非常罕见，您可能应该丢弃任何使用如此严重错误音调的图像。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T14:17:44.340

`GL_UNPACK_ALIGNMENT` is the byte-offset of where the first pixel in a row starts in an image. Setting it to one is almost always the safe bet (i.e., it works with almost every image type [and it's never not worked for me]).

The default value is four, which works fine for RGBA images, but fails miserably for RGB images (you'll know instantly when you see the image - it'll look like a set of diagonal bands).

# asp.net - 我们如何在母版页中同时拥有 ToolkitScriptManager 和 ScriptManager

> ID：15052466
> 
> 赞同：2
> 
> 时间：2013-02-24T14:02:27.337
> 
> 标签：asp.net

在我在母版页中使用 ScriptManager 之前。当我运行主页时，我没有任何问题。

现在我决定将组合框添加到主页，所以我应该将 ToolkitScriptManager 添加到母版页。

由于错误，我删除了母版页的 ScriptManager，但现在我的主页已完全回发并且速度很慢，我如何才能将它们都放在母版页中而不会出错。

```
 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
  <ContentTemplate>
 <asp:DropDownList ID="ddlProjectDocument" runat="server" Height="16px" AppendDataBoundItems="True"
     Width="212px" onselectedindexchanged="ddlProjectDocument_SelectedIndexChanged"
    AutoPostBack="True" onload="ddlProjectDocument_Load"
    style="font-family: 'Courier New', Courier, monospace" >

    <asp:ListItem Selected="True" Value="0">(select a value)</asp:ListItem>
</asp:DropDownList>
<br />

<ajaxtoolkit:ComboBox ID="ComboBox1" runat="server" onload="ComboBox1_Load"
     AutoCompleteMode="Suggest"
     style="font-family: 'Courier New', Courier, monospace" >

</ajaxtoolkit:ComboBox>

</ContentTemplate>
<Triggers>
<asp:PostBackTrigger ControlID="ddlProjectDocument"  />

</Triggers>
</asp:UpdatePanel> 
```

母版页：

```
 <%@ Master Language="C#" AutoEventWireup="true" CodeFile="MasterAdmin.master.cs" Inherits="MasterAdmin" %>

  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

   <html xmlns="http://www.w3.org/1999/xhtml">
  <head runat="server">
<title>Untitled Page</title>
<asp:ContentPlaceHolder id="head" runat="server">
</asp:ContentPlaceHolder>
<style type="text/css">
    .style1
    {
        width: 40%;
        font-size:large;
    }
</style>
<link href="StyleSheet.css" rel="stylesheet" type="text/css" />
   </head>
  <body>
 <form id="form1" runat="server">

    <ajaxtoolkit:toolkitscriptmanager ID="ToolkitScriptManager1" runat="server">
    </ajaxtoolkit:toolkitscriptmanager> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T14:07:19.437

1.`<asp:toolkitscriptmanager>`在母版页中使用，而不是`<scriptmanager>`.

2.`<asp:toolkitscriptmanager>`从您的内容页面中删除，因为只能**`one script manager`**存在于一个实例中。

希望这可以帮助。

# php - PHP会话类不起作用

> ID：15052487
> 
> 赞同：0
> 
> 时间：2013-02-24T14:05:17.623
> 
> 标签：php, class, function, session, pdo

我已经使用这篇[文章](http://www.wikihow.com/Create-a-Secure-Session-Managment-System-in-PHP-and-MySQL)构建了这个会话类。我确信我已经遵守了所有的规则和给出的所有信息，但是我的代码不起作用。

**会话类：session.php**

```
 class Session {

     function __construct() {

         // set our custom session functions
         session_set_save_handler(
             array($this, 'open'),
             array($this, 'close'),
             array($this, 'read'),
             array($this, 'write'),
             array($this, 'destroy'),
             array($this, 'gc')
         );

         // This line prevents unexpected effects when using objects as save handlers
         register_shutdown_function('session_write_close');

     }

     function start_session($session_name, $secure) {

         // Make sure the session cookie is not accessable via javascript
         $httponly = true;

         // Hash algorith to use for the session_id
         $session_hash = 'sha512';

         // Check if hash is available
         if (in_array($session_hash, hash_algos())) {

             // Set the hash function
             ini_set('session.hash_function', $session_hash);

         }

         // How many bits per character of the hash
         ini_set('session.hash_bits_per_character', 5);

         // Force the session to only use cookies, nut URL variables
         ini_set('session.use_only_cookies', 1);

         // Get session cookie parameters
         $cookieParams = session_get_cookie_params();

         // Set the parameters
         session_set_cookie_params(
            $cookieParams['lifetime'],
            $cookieParams['path'],
            $cookieParams['domain'],
            $secure,
            $httponly
         );

         // Change the sesion name
         session_name($session_name);

         // Now we can start the session
         session_start();

         // This line regenerates the session and delete the old one
         // It also generates a new encryption key in the database 
         session_regenerate_id(true);    

     }

     function open() {

         // Define Connection variables
         $host = '';
         $user = '';
         $pass = '';
         $dbnm = '';

         // Connection string based on connection variables
         $PDO = new PDO("mysql:host=$host;dbname=$dbnm", $user, $pass);

         // Connect to DB based on connection string
         $this->db = $PDO;
         return true;

     }

     function close() {

         // Close DB connection
         $this->db->close();
         return true;

     }

     function read($id) {

         // If not the read statement is defined
         if(!isset($this->read_stmt)) {

             // Prepared statement for getting data from DB
             $this->read_stmt = $this->db->prepare("SELECT data FROM sessions WHERE id = ? LIMIT 1");

         }

         $this->read_stmt->bind_param('s', $id);    // Replace ? with $id
         $this->read_stmt->execute();               // Execute the prepared statement
         $this->read_stmt->store_result();          // We store the data returned
         $this->read_stmt->bind_result($data);      // We bind the result to a $data variable
         $this->read_stmt->fetch();                 // And fetch returned data

         // This function is defined later
         // but returns the session key based on the $id
         $key = $this->getkey($id);

         // Both the variabels are decrypted and assigned to $data
         $data = $this->decrypt($data, $key);

         // We return the results
         return $data;

     }

     function write($id, $data) {

         // Get unique session key
         $key = $this->getkey($id);

         //Encrypt the data
         $data = $this->encrypt($data);

         // Assign current time to $time variable
         $time = time();

         // If not the write statement is defined
         if(!isset($this->write_stmt)) {

             // Prepared statement for replacing data in DB
             $this->write_stmt = $this->db->prepare("REPLACE INTO sessions (id, set_time, data, session_key) VALUES (?, ?, ?, ?)");

         }

         $this->write_stmt->bind_param('siss', $id, $time, $data, $key);    // Replace ?, ?, ?, ? with $id, $time, $data, $key
         $this->write_stmt->execute();                                      // Execute the prepared statement

         // Return confirmation
         return true;

     }

     function destroy($id) {

         // If not the delete statement is defined
         if(!isset($this->delete_stmt)) {

             // Prepared statement for deleting session data from DB
             $this->delete_stmt = $this->db->prepare("DELETE FROM sessions WHERE id = ?");

         }

         $this->delete_stmt->bind_param('s', $id);  // Replace ? with $id
         $this->delete_stmt->execute();             // Execute the prepared statement

         // Return confirmation
         return true;

     }

     function gc($max) {

         // This function 'Garbage Collector' is emptying the DB for old sessions
         // this way, the DB takes care of itself.

         // If not the GC statement is defined
         if(!isset($this->gc_stmt)) {

             // Prepared statement for deleting session data from DB
             $this->gc_stmt = $this->db->prepare("DELETE FROM sessions WHERE set_time < ?");

         }

         // Define $old to be an old statement
         $old = time() - $max;

         $this->gc_stmt->bind_param('s', $old); // Replace ? with $old
         $this->gc_stmt->execute();             // Execute the prepared statement

         // Return confirmation
         return true;

     }

     private function getkey($id) {

         // This function is used to get the unique key for encryption from the sessions table.
         // If there is no session it just returns a new random key for encryption.

         // If not the select statement is defined
         if(!isset($this->key_stmt)) {

             // Prepared statement for selecting session key from DB
             $this->key_stmt = $this->db->prepare("SELECT session_key FROM sessions WHERE id = ? LIMIT 1");

         }

         $this->key_stmt->bind_param('s', $id); // Replace ? with $old
         $this->key_stmt->execute();            // Execute the prepared statement
         $this->key_stmt->store_result();       // We store the data returned

         // If the select statement returns a row
         if($this->key_stmt->num_rows == 1) {

             $this->key_stmt->bind_result($key);    // We bind the result to a $data variable
             $this->read_stmt->fetch();             // And fetch returned data

             // Then we return the result
             return $key;

         } else {

             // We generate a random key
             $random_key = hash('sha512', uniqid(mt_rand(1, mt_getrandmax()), true));

             // Then we return the result
             return $random_key;

         }

     }

     private function encrypt($data, $key) {

         // A complete random key for encryption
         $salt = 'cH!swe!retReGu7W6bEDRup7usuDUh9THeD2CHeGE*ewr4n39=E@rAsp7c-Ph@pH';

         // We assign a hash encoded version of the random key and session key to the $key
         $key = substr(hash('sha256', $salt.$key.$salt), 0, 32);

         // Open module, and create IV
         $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
         $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);

         // Do the encryption and assign it to $encrypted
         $encrypted = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $data, MCRYPT_MODE_ECB, $iv));

         // And return the encrypted data
         return $encrypted;

     }

     private function decrypt($data, $key) {

         // The same key for encryption is used for decrytion (obviously)
         $salt = 'cH!swe!retReGu7W6bEDRup7usuDUh9THeD2CHeGE*ewr4n39=E@rAsp7c-Ph@pH';

         // We assign a hash encoded version of the random key and session key to the $key
         $key = substr(hash('sha256', $salt.$key.$salt), 0, 32);

         // Open module, and create IV
         $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
         $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);

         // Do the decryption and assign it to $decrypted
         $decrypted = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, base64_decode($data), MCRYPT_MODE_ECB, $iv);

         // And return the decrypted data
         return $decrypted;

     }

 } 
```

然后我有两页用于测试。我也相信这些页面是正确编写的，所以必须有一些东西阻止类工作。我有一个更大的脚本，我使用同一个类，我可以定义新类`$session = new Session();`，但是当我开始会话`$session->start_session('test', false);`时脚本死了。

**测试页面PHP：tester.php**

```
<?
require_once('session.php');
$session = new Session();

$session->start_session('test', false);

$_SESSION['dims'] = 'This is a session variable';

?>

<a href="tester2.php">click here</a> 
```

**测试页面2 PHP：tester2.php**

```
<?
require_once('session.php');
$session = new Session();

$session->start_session('test', false);

echo $_SESSION['dims'];

?> 
```

我发现出现了错误500 internal server error。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:20:18.333

您的课程已通过 PDO 建立了连接，但您正在遵循的教程使用 MySQLi 准备好的语句。这两个 API 彼此不兼容。PDO 中的等效代码如下所示：

```
 // If not the read statement is defined
     if(!isset($this->read_stmt)) {

         // Prepared statement for getting data from DB
         // Prepare using the named parameter :id instead of ? (though ? can be used in PDO too)
         $this->read_stmt = $this->db->prepare("SELECT data FROM sessions WHERE id = :id LIMIT 1");

     }
     // If the statement was successfully prepared...
     if ($this->read_stmt) {
         // One of 2 param binding methods in PDO...
         $this->read_stmt->bindParam(':id', $id, PDO::PARAM_STR);  
         $this->read_stmt->execute(); 
         // No correlate for store_result() in PDO...

         // Fetch the first row and get the data key from it
         // You don't need to do a bind result in PDO. Instead just fetch() or fetchAll()
         // more like the old mysql_fetch_*() functions.
         $row = $this->read_stmt->fetch(PDO::FETCH_ASSOC);
         $data = $row['data']

         // Do the rest of your stuff with data.
     } 
```

我不会翻译你上面的整个代码块，但这应该让你开始。[PDO 文档上`bindParam()`](http://php.net/manual/en/pdostatement.bindparam.php)有足够的示例，您也应该能够找出其他查询。

最后，我推荐[MySQL 开发人员的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)，它有很好的示例，尽管它没有直接解决将 MySQLi 准备好的语句转换为 PDO 语句的问题。

# c# - 使用 rijndael 加密算法解密的数据长度无效

> ID：15052488
> 
> 赞同：0
> 
> 时间：2013-02-24T14:05:34.087
> 
> 标签：c#

其他链接对我没有用。我在保存到 mysql 数据库之前加密字符串。这工作正常。但是当我想检索时，它给我的数据长度加密是无效错误。在我的加密要求之前，我使用的是 varchar 大小为 500 的数据类型。现在我使用的是大小为 800 的 varbinary。任何人也可以就大小给我建议吗？

加密方式：

```
public static byte[] encryptStringToBytes(string plainText)
    {
        byte[] encrypted;
        //create an Rijndael object
        using (Rijndael rijAlg = Rijndael.Create())
        {
            //create a decrytor to perform the stream transform.
            ICryptoTransform encryptor = rijAlg.CreateEncryptor(rijAlg.Key, rijAlg.IV);

            //create the streams used for encryption.
            using (MemoryStream msEncrypt = new MemoryStream())
            {
                using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
                {
                    using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))
                    {
                        //Write all data to the stream.
                        swEncrypt.Write(plainText);
                    }
                    encrypted = msEncrypt.ToArray();
                }
            }
        }

        return encrypted;
    } 
```

解密方法：

```
 public static string decryptStringFromBytes(byte[] cipherText)
    {
        string plaintext = null;

        //create an Rijndael object
        using (Rijndael rijAlg = Rijndael.Create())
        {
            //create a decrytor to perform the stream transform.
            ICryptoTransform decryptor = rijAlg.CreateDecryptor(rijAlg.Key, rijAlg.IV);

            //create the streams used for decryption.
            using (MemoryStream msDecrypt = new MemoryStream(cipherText))
            {
                using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))
                {
                    using (StreamReader srDecrypt = new StreamReader(csDecrypt))
                    {
                        //read the decrypted bytes from the decrypting stream and place them in a string.
                        plaintext = srDecrypt.ReadToEnd();
                    }
                }
            }
        }
        return plaintext;
    } 
```

从结果集中检索

```
 using (Rijndael myRijndael = Rijndael.Create())
                {
                    temp5 = EncryptDecrypt.decryptStringFromBytes((byte[])reader.GetValue(reader.GetOrdinal("Body")));
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:32:58.740

您没有以任何方式控制密钥和 IV。这是一个问题...... :) 它导致您的加密是数据的随机加扰，因为密钥和 IV 是由框架随机初始化的。

使用与加密相同的密钥和 IV 进行解密。为什么你认为数据库与问题有关？它没有，也没有证据证明这一点。

# html - html5循环问题

> ID：15052490
> 
> 赞同：0
> 
> 时间：2013-02-24T14:05:37.257
> 
> 标签：html, video

当我设置开始和结束时间时，我无法弄清楚如何正确地制作我的 html5 视频循环。我正在尝试这样

src="redsmoke.mp4#t=13,15" 自动播放循环

它在指定时间（13）开始正常并在指定时间（15）停止但不会循环

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:12:44.747

浏览器尚未广泛支持循环属性。你试的是哪一款？

# javascript - 为 svg 元素中的文本标签添加样式

> ID：15052492
> 
> 赞同：1
> 
> 时间：2013-02-24T14:05:50.087
> 
> 标签：javascript, jquery, svg

我有一个动态创建的图表，因此 svg 包含带有以下代码的部分。bt 我无法为此类提供背景颜色.. 我使用 attr() 函数动态尝试了它，但它不起作用.. 无论如何指定 css 像 svg:text??

```
<text id="circleText_Persons-bruno-waterfield" font-size="14" class="circleText" font-family="Tahoma" text-anchor="middle" background-color="#000000" font-weight="900" display="block" x="-1.8714285714285717" y="28.711414285714287" fill-opacity="1" stroke-opacity="1" style="fill: #666666;">Bruno Waterfield</text> 
```

动态创建 svg 文本

```
 nodeEnter.append("svg:text") 
  .attr("id", function(d){  return "circleText_" + d.name})
      .attr("font-size", function(d){return 14;}) //returnNodeSize(d) / 2
      .attr("class",  function(d){return "circleText"}).attr("font-family", "Tahoma")
      .attr("text-anchor","middle")
      .attr("background-color","#000000")
      .attr("font-weight","900")
      //returnNodeSize(d)+returnNodeSize(d)/1.8;
       .text(function(d){ 

         return toTitleCase(d.name)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:17:30.373

Put a `rect` of your chosen color behind the `text` element conforming to the bounding box of the text. SVG text does not have a flow box with which to set the background color; you have to make one.

# android - google play 上的群号

> ID：15052493
> 
> 赞同：-1
> 
> 时间：2013-02-24T14:05:51.267
> 
> 标签：android, google-play, google-play-services

google play 有没有群号？我的意思是：我和朋友一起开发了一些应用程序，我们想在 google play 上发布，但我们俩一起？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:13:28.017

Google Play 上没有针对开发人员的*群组帐户。*

话虽如此，您可以将多个用户添加到现有或新的开发者帐户。

**使用旧界面：**

在旧界面中，您可以使用“*管理用户帐户*”链接（Google Play 徽标的右上方）将更多用户添加到帐户。

**使用新界面：**

在新界面中，同样可以使用左侧边栏中的设置图标，然后在*用户帐户和权限中实现*

有关详细信息，请参阅[支持文档](https://support.google.com/googleplay/android-developer/answer/2528691?hl=en&ref_topic=16285)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T14:10:09.767

是的，您可以将尽可能多的开发者添加到单个 Google Play 帐户

# entity-framework - 尝试使用 EF/Linq to Entities 进行动态查询和 CRUD 操作

> ID：15052494
> 
> 赞同：0
> 
> 时间：2013-02-24T14:05:53.750
> 
> 标签：entity-framework, linq-to-entities

（建议在此处重新发布此问题...最初发布在 msdn 论坛中）

我正在努力使用 EF/Linq to Entities 为一些简单的 CRUD 操作编写一个“通用”例程。我在 ASP.NET（C# 或 VB）中工作。

我看过：

1.  使用“GetObjectByKey”获取对动态选择表的引用（但我不想要缓存中的任何内容。我想要数据库中的数据。似乎不是这个函数的用途）。

2.  CRM 动态实体（在这里您可以传递一个表名字符串进行查询）看起来像我正在寻找的方法，但我不认为这种 CRM 工作必须保持最新（？）和/或对未来有很大的保证??

3.  我查看了通过命名空间/对象进行钻取的各种方法，以到达可以将 TableName 参数传递到常用查询语法的位置 var query = (from c in context.C_Contacts select c); （例如）我可以根据要使用的表以某种方式换出“C_Contacts”TEntity。但没有找到办法做到这一点？

有点过于简单了，我只是希望能够将表名参数以及在某些情况下相关的字段名和值（可能在通用对象中？）传递给我的例程，然后让该例程动态插入 LINQ to Entity 数据上下文/模型并对参数表执行一些标准的“全选”操作，或者根据通用记录 ID 对参数表进行删除。我试图避免基于表名等调用各种不同的自动生成的 L2E 方法......而只是尝试深入研究数据上下文并最终深入了解动态传递的表/字段名称的 L2E 查询语法。

有没有人找到任何成功/有效的方法来做到这一点？任何想法，链接，示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:57:56.197

DbContext 对象有一个通用的 Set() 方法。这会给你

```
from c in context.Set<Contact>() select c 
```

这是从字符串开始时的方法：

```
public void Test()
{
    dynamic entity = null;
    Type type = Type.GetType("Contract");
    entity = Activator.CreateInstance(type);
    ProcessType(entity);
}

public void ProcessType<TEntity>(TEntity instance)
    where TEntity : class
{
    var result = 
        from item in this.Set<TEntity>()
        select item;

    //do stuff with the result
    //passing back to the caller can get more complicated
    //but passing it on will be fine ...
} 
```

# xcode4.6 - XCode 4.6 继续下载 Doc Set

> ID：15052498
> 
> 赞同：12
> 
> 时间：2013-02-24T14:06:37.830
> 
> 标签：xcode4.6

自从我安装了 XCode 4.6，每次打开它时它都会继续下载 Doc Set。我看到很多线程都在谈论这个话题，所以我尝试在 Developper/Shared/Documenation/Docsets 文件夹中手动安装文档集。但即便如此，我今天早上打开了 XCode，然后......它又开始下载东西了。我该怎么做才能让它停止？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-02T15:10:54.810

点击 Xcode->Preferences 下的链接 点击 Xcode 4.6 doc set 你会看到一个安装位置。单击该链接并删除该文件。就我而言，还有另一个 Xcode 4.6 文件，我认为它被称为 Xcode 4.6 文档集，我也将其删除。

我关闭了 XCode 并再次打开并告诉它再次下载它并花了。

您的列表中应该只有一个 Xcode 4.6 文件，我有两个，但我不知道为什么。可能是 4.6 测试版遗留下来的东西。

希望有帮助

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-24T21:50:53.923

转到“Xcode->Preferences->Downoloads”并取消选中“Documlentation”选项卡中“自动检查并安装更新”下的复选标记。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-05T06:57:10.397

# 下载新鲜文档

正如其他答案所暗示的那样，Xcode 只是检测、下载和安装 Apple 服务器上可用文档的新版本。

# 禁用自动下载

正如[pablok 所说](https://stackoverflow.com/a/15057051/642706)，如果您不喜欢这种行为，请通过取消选中来禁用该行为`Xcode > Preferences > Downloads > Documentation > Check for and install updates automatically`。

# 新鲜的文档存储在应用程序之外

一个有趣的转折是旧版本存储*在*Xcode.app 中，而新下载的版本存储在应用程序*外部*。

例如，在从 developer.apple.com *iOS 开发中心获得的 Mountain Lion 上的**Xcode 4.6.3*中，它与 Xcode 应用程序捆绑在一起。根据 Finder 的说法，捆绑的文档集是：*`Xcode 4.6 doc set`*

 **   版本：509.12
*   大小：268.4 MB
*   位置：…/Xcode.app/Contents/Developer/Documentation/DocSets

新下载的文档集是：

*   版本：511.5
*   大小：286.8 MB
*   位置：~/Library/Developer/Shared/Documentation/DocSets

所以，两个谜团：

*   为什么 Apple 在应用程序中捆绑文档，但在其他地方下载新文档？
*   这样做之后，为什么 Apple 会保留旧文档？为什么不删除它？

As an experiment, someday I will delete the original ones inside the app. I'm not suggesting any benefit (other than recovering storage space) nor am I saying there is no adverse effect.*

# collision-detection - 重力物理，避免无限反弹？

> ID：15052500
> 
> 赞同：3
> 
> 时间：2013-02-24T14:06:47.653
> 
> 标签：collision-detection, physics

据我了解，有一种非常标准的方式来实现重力，这几乎是真正的交易；在每个时间步长上添加一个数字（例如 9.8）到对象的向下垂直速度。

[然而，这个简单的数学在我的程序（显然还有其他](https://stackoverflow.com/questions/11044448/2d-physics-engine-bouncing-ball-w-inelastic-collisions-does-not-come-to-a-stop)程序）中导致了“无限反弹”的问题。到目前为止，简单的测试用例有一个球直接落下，并击中“地板”。碰撞时，球的矢量偏转并减少 1/4（占位符恢复系数）。在每个时间步长上，重力值（在我的情况下约为 2）被添加到向量中。结果，球弹了起来，然后弹得越来越低……然后它并没有真正停止，甚至没有*明显地*停止（真正的目标），而是在屏幕底部上下抖动。调试读数表明，它的速度永远不会低于 2 帧超过几帧，因为该常数只是不断地被添加和取消，然后无限期地再次添加。

现在，理解*为什么*不是困难的部分。这正是我从一开始就担心的问题，我只是认为我忽略了一些数学魔法，因为在解释数学时没有人真正提到过这样的问题。但是 - 由于没有人讨论过它 - 这确实让我想知道，修复它的“典型”方法是什么？

**编辑：**经过*大量*工作，我已经确定单独使用单独的加速度值不会解决问题 - 它仍然会始终尝试添加一些恒定的重力分数。恒定时间步长意味着恒定加速度；恒定的加速度意味着恒定的速度增加。反弹时的恢复系数会导致速度减小到一点，并抵消加速度，但加速度将从 0 开始。像这样：

1.  加速度从 0 开始，速度从 y 开始。
2.  加速度增加 (grav * timestep)。
3.  速度随加速度增加。
4.  重复 2-3 直到与地板相撞。
5.  加速度现在回到 0。
6.  相应地反映速度矢量，然后乘以 CoR。
7.  随着速度从负数变为 0，再次变为正数，重复 2-3。
8.  重申 2-7，每次反弹都比上一次保留更少的动力。
9.  反弹现在非常小。
10.  速度现在小于 (grav * timestep)。
11.  与地板的碰撞将加速度设置回 0。
12.  加速度再次增加 (grav * timestep)。
13.  速度因加速度而增加——现在足以同时从负向正向摆动。
14.  无限重复 11-13。

现在，总体问题**不是**速度永远不会等于 0。这是意料之中的。但同样令人期待的是一个无限*递减*的数字。将恢复系数设置为 0.5，产生的弹跳速度应该是上一个的一半，逐渐减小，直到它可以被丢弃为“停止”。通过引入纯常数加法——无论是直接加到速度上，还是将它加到另一个加到速度上的值上——就会出现这个问题。具体来说，我需要知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-26T02:06:52.147

刚刚处理了同样的问题。

**这是为我修复它的代码：**

```
if (cat.y + cat.height >= ground.y)    // if the cat has hit the ground
{
    cat.y = ground.y - cat.height;    // reset to the bottom
    cat.vector.y = Math.round(COR * -cat.vector.y);    // might want to round down
} 
```

这里的重要部分是四舍五入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:05:21.410

要解决这个问题，你唯一需要做的就是当球撞到地面时反转垂直速度并将球**放在障碍物上，**这样球就会锁定在地面上，因为 9.8 / 4 向上的速度是不够的将其“解锁”并将其设置为另一个反弹。

# windows - 我可以使用脚本打开一个word文档并执行查找操作吗？

> ID：15052504
> 
> 赞同：0
> 
> 时间：2013-02-24T14:07:03.423
> 
> 标签：windows, vbscript, ms-word, cmd

我可以在任何命令行或任何脚本语言中执行此操作吗？

我有一个字符串，我想在 word 文档中完全按照用户的方式搜索它。

脚步：

1-我想打开文档。

2-选择与我拥有的字符串匹配的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:43:12.427

您可以使用[AutoHotkey](http://www.autohotkey.com/)或封闭源代码但免费的 AutoIt 来完成此操作。它们都可以模拟用户输入并通过特殊的脚本语言与操作系统交互。

如果您使用 Microsoft Word 的最新版本之一，[此页面](http://diyivorytower.wordpress.com/2011/02/15/use-autohotkey-microsoft-word-and-dopdf-to-grade-papers-electronically/)可以为您提供帮助。它提供了一个简短的示例，说明如何使用 AutoHotkey 控制 Microsoft Word 的主界面。您只需要添加一些代码来按 Ctrl-F，输入您的搜索字符串并按查找按钮。

或者，如果您更喜欢直接使用 Word 的宏功能，Ekkehard 的链接也很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:00:04.813

是的，在autoit中很容易。这将搜索并突出显示单词“三”：

```
#include <Word.au3>

$oWordApp = _WordCreate(@ScriptDir & "\blah.doc")
$oDoc = _WordDocGetCollection($oWordApp, 0)

$FindText = "three"
With $oWordApp.Selection.Find
    .Forward = True
    .ClearFormatting
    .Wrap = 1 ;.Wrap could be $wdFindContinue which is 1
    .Execute($FindText)
EndWith 
```

# javascript - 使用 chrome.extension.getBackgroundPage() 播放音频文件

> ID：15052507
> 
> 赞同：0
> 
> 时间：2013-02-24T14:07:18.910
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在尝试开发一个基于语音输入事件（一切都在后台发生）播放声音的基本 Chrome 扩展。

这是我的清单

```
{
  "manifest_version" : 2,
  "name"             : "Test123",
  "version"          : "1.0",
  "description"      : "My audio extension",

  "icons"            : {
    "128"              : "icon.jpg"
  },

  "permissions"      : [
    "experimental",
    "background"
  ],

  "background"       : {
    "persistent"       : true,
    "scripts"          : [
      "bg.js"
    ]
  },
} 
```

在`bg.js`中，我得到了`window`对象`var chrome.extension.getBackgroundPage();`，但我不知道从那里做什么。

如何播放音频文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:27:03.203

这是解决方案！

首先，在后台页面加载音乐文件是一个很好的解决方案。但是您必须从弹出页面触发音频文件的执行。这是脚本：

```
 // In popup.html 
 <div id="play-it">Play</div>

 // dont forget to use an external script file
 $('#play-it').click(function(){
     chrome.extension.sendMessage({action: "play"})
 }); 
```

然后在 bg.js 中你会听到 Message

```
 // In bg.js
 var audioElement = document.createElement('audio');
 audioElement.setAttribute("preload", "auto");
 audioElement.autobuffer = true;

 var source1 = document.createElement('source');
 source1.type= 'audio/mpeg';
 source1.src= 'http://lezotre.free.fr/Mp3/disco.mp3';
 audioElement.appendChild(source1);

 chrome.extension.onMessage.addListener(
    function(request, sender, sendResponse) {
      if (request.action == "play"){
          audioElement.load;
          audioElement.play();
      }
}); 
```

您将在官方 google chrome 文档中找到有关消息传递的更多信息：http: [//developer.chrome.com/extensions/messaging.html](http://developer.chrome.com/extensions/messaging.html)

# django - ForeignKey 关系的“另一面”

> ID：15052513
> 
> 赞同：0
> 
> 时间：2013-02-24T14:07:36.527
> 
> 标签：django

我读了很多次[这个](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)和[这个](https://docs.djangoproject.com/en/1.4/intro/tutorial03/)教程，但我不明白，如何执行以下操作：

楷模：

```
class Car(models.Model):
    field1
    field2
    field3

class CarOptions(models.Model):
    car = models.OneToOneField(Car, primary_key=True)
    field4
    field5

class CarPictures(models.Model):
    car = models.ForeignKey(Car)
    field6
    field7 
```

所以，我需要在一个 sql 查询中获取有关汽车的所有信息。[它在文档](https://docs.djangoproject.com/en/1.4/intro/tutorial03/#a-shortcut-get-object-or-404)中是如何写的：

```
car = get_object_or_404(Car, pk=car_id) 
```

但这是一个奇怪[的](https://docs.djangoproject.com/en/1.4/intro/tutorial03/#use-the-template-system)（它描述为 ForeignKey 关系的“另一面”）`poll.choice_set.all`，它不适用于我的代码。一些复制过去的代码，对不起，文档中没有链接：

```
# Give the Poll a couple of Choices. The create call constructs a new
# choice object, does the INSERT statement, adds the choice to the set
# of available choices and returns the new Choice object. Django creates
# a set to hold the "other side" of a ForeignKey relation
# (e.g. a poll's choices) which can be accessed via the API.
>>> p = Poll.objects.get(pk=1)

# Display any choices from the related object set -- none so far.
>>> p.choice_set.all()
[]

# Create three choices.
>>> p.choice_set.create(choice='Not much', votes=0)
<Choice: Not much>
>>> p.choice_set.create(choice='The sky', votes=0)
<Choice: The sky>
>>> c = p.choice_set.create(choice='Just hacking again', votes=0)

# Choice objects have API access to their related Poll objects.
>>> c.poll
<Poll: What's up?>

# And vice versa: Poll objects get access to Choice objects.
>>> p.choice_set.all()
[<Choice: Not much>, <Choice: The sky>, <Choice: Just hacking again>] 
```

我没有得到`choice_set.all()`。我从管理界面添加所有信息。使用外键一切正常，但我需要做一些 sql 查询，而不是一个。在他们描述的文档中，就像一个 sql 查询，但他们有`choice_set.all()`. 它怎么可能与我的模型有关？我需要模板（html）中的所有信息，你能给我一些例子，它是如何工作的吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T14:12:20.997

相关管理者的名字是根据模型名自动生成的。你有`car.carpictures_set`and `car.caroptions`（这不是一个“集合”，因为它是一对一的关系）。

您可以定义自己的相关名称：

```
class Car(models.Model):
    ...

class CarOptions(models.Model):
    car = models.OneToOneField(Car, primary_key=True, related_name='options')

class CarPictures(models.Model):
    car = models.ForeignKey(Car, related_name='pictures') 
```

然后你会有`car.options`和`car.pictures`。

[相关对象参考](https://docs.djangoproject.com/en/1.4/ref/models/relations/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:03:16.273

假设这是你的观点

```
 cars = Car.objects.filter()
 car_options = CarOptions.objects.filter()
 car_pictures = CarPictures.objects.filter() 
```

这是它在 html 中的关系

```
{% for car in cars %}
    {% for option in car.car_options %}

    {% endfor %}

    {% for picture in car.car_pictures %}

    {% endfor %}
{% endfor %} 
```

# java - 将文件转换为字节数组并使用 UDP 传输。如何从这个字节数组中获取服务器上的文件名？

> ID：15052518
> 
> 赞同：0
> 
> 时间：2013-02-24T14:07:54.077
> 
> 标签：java, java-io, fileoutputstream

所以我将一个文件读入一个字节数组，然后我将它分解成块并使用 UDP 通过网络发送它。

```
Path path = Paths.get("files_upload/music.mp3");
byte[] objectBytes = Files.readAllBytes(path); 
```

在服务器上，我将所有块读入缓冲区，最终得到与`byte[] objectBytes`客户端相同的结果。现在我想使用原始文件名将文件写入磁盘，在这种情况下是 music.mp3。那么如何从字节数组中获取文件名呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T14:17:45.350

字节数组不包含文件名。您必须单独发送。您可以在路径上调用 getFileName，然后在结果字符串上使用 getBytes() 将其转换为字节数组。

```
String fileName = path.getFileName();
byte[] fileNameBytes = fileName.getBytes(); 
```

然后，您可以先发送它，然后在另一端阅读。请注意，这不会包含整个路径，仅包含文件名（在您的情况下为music.mp3）。

顺便问一下，您确定要使用 UDP 吗？如果在传输数据时丢失一两个数据包怎么办？您如何在服务器上检测到它？

# javascript - 在 js html 库中解析字符串（语言字符串）

> ID：15052521
> 
> 赞同：1
> 
> 时间：2013-02-24T14:08:12.763
> 
> 标签：javascript, jquery

我想将语言变量从我的 html 库中分离出来，但我不确定最好的方法是什么。

目前我得到了这样的东西；

```
function putAlertA() {
    alert('This is alert a');
}

function putAlertB() {
    alert('This is alert b');
}

function setAlerts() {
    putAlertA();
    putAlertB();
} 
```

现在我想将字符串与函数分开：

**解决方案 A**

```
function putAlertA() {
    var strings = getLanguageVars();
    alert(strings[0]);
}

function putAlertB() {
    var strings = getLanguageVars();
    alert(strings[1]);
}

function setAlerts() {
    putAlertA();
    putAlertB();
}

function getLanguageVars() {
    var strings = new Array();
    strings[0] = "This is alert a";
    strings[1] = "This is alert b";
    return strings;
} 
```

**解决方案 B**

```
function putAlertA(strings) {
    alert(strings[0]);
}

function putAlertB(strings) {
    alert(strings[1]);
}

function setAlerts() {
    var strings = getLanguageVars();
    putAlertA(strings);
    putAlertB(strings);
}

function getLanguageVars() {
    var strings = new Array();
    strings[0] = "This is alert a";
    strings[1] = "This is alert b";
    return strings;
} 
```

**解决方案 C**

```
function putAlertA() {
    var strings = window.strings;
    alert(strings[0]);
}

function putAlertB() {
    var strings = window.strings;
    alert(strings[1]);
}

function setAlerts() {
    putAlertA();
    putAlertB();
}

window.strings = new Array();
strings[0] = "This is alert a";
strings[1] = "This is alert b"; 
```

我认为**解决方案 C**将是最好的，因为我认为**解决方案 A 和 B**在内存消耗方面产生了太多开销，而且它看起来不太合乎逻辑，因为语言数组是一个全局变量。不过我在使用时有点犹豫`window.`。不确定如何做到这一点是正确的方法。也许有更好的方法来做到这一点？我正在使用 jQuery

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T14:15:24.837

我的偏好是静态对象，例如：

```
l10n = {
    strings: [
        'alert_a': 'this is alert a',
        'alert_b': 'this is alert b'
    ],
    translate: function(key) {
        return this.strings[key];
    }
} 
```

致电：

```
alert(l10n.translate('alert_a'); 
```

这种方法的好处是它更容易扩展，例如，通过引入参数化的本地化字符串，例如：

```
"Hello :name:" 
```

致电：

```
l10n.translate('key', {
    name: 'world'
})
// "Hello world" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T14:11:24.443

我要做的主要改变是使用字符串作为键而不是整数，因为这更有意义。这实际上只是选择一个好的变量名的一个特例：

```
 window.strings = {
      alertA: 'This is alert A',
      alertB: 'This is alert B'
  };

  alert(strings.alertA); 
```

# c# - 如何从通用编译器基础结构中的流而不是文件中读取程序集

> ID：15052522
> 
> 赞同：3
> 
> 时间：2013-02-24T14:08:15.397
> 
> 标签：c#, .net, cci

在 CCI 中，可以从文件加载 .NET 程序集：

```
var assembly = (IAssembly) new PeReader.DefaultHost().LoadUnitFrom("C:\assembly.dll"); 
```

但我找不到从任何流中加载它的任何方法。我相信这应该是可能的，因为我可以轻松地将程序集写入流：

```
PeWriter.WritePeToStream(assembly , _host, stream); 
```

PeReader 具有采用 BinaryDocument 参数的 OpenModule 方法。但是没有办法从流而不是文件创建 BinaryDocument。

实际上，我对使用 CCI 但不使用慢速文件 I/O 读取程序集的任何方式感兴趣。

# c# - 这种使用通用 List 线程安全吗

> ID：15052523
> 
> 赞同：8
> 
> 时间：2013-02-24T14:08:19.410
> 
> 标签：c#, .net, thread-safety

我有一个`System.Collections.Generic.List<T>`我只在计时器回调中添加项目的项目。只有在操作完成后才会重新启动计时器。

我有一个`System.Collections.Concurrent.ConcurrentQueue<T>`在上面的列表中存储添加项目的索引。此存储操作也始终在上述相同的计时器回调中执行。

迭代队列并访问列表线程中相应项目的读取操作是否安全？

示例代码：

```
private List<Object> items;
private ConcurrentQueue<int> queue;
private Timer timer;
private void callback(object state)
{
    int index = items.Count;
    items.Add(new object());
    if (true)//some condition here
        queue.Enqueue(index);
    timer.Change(TimeSpan.FromMilliseconds(500), TimeSpan.FromMilliseconds(-1));
}

//This can be called from any thread
public IEnumerable<object> AccessItems()
{
    foreach (var index in queue)
    {
        yield return items[index];
    }
} 
```

我的理解：即使列表在被索引时调整大小，我也只是访问一个已经存在的项目，所以无论是从旧数组还是新数组中读取都没有关系。因此这应该是线程安全的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T15:46:36.197

> 迭代队列并访问列表线程中相应项目的读取操作是否安全？

它是否**记录**为线程安全？

如果不是，那么**将其视为线程安全是愚蠢的，即使它在此实现中是偶然的**。线程安全应该是*设计使然*。

首先，跨线程共享内存是个坏主意。如果您不这样做，那么您不必询问该操作是否是线程安全的。

如果必须这样做，请使用专为共享内存访问设计的集合。

如果您不能这样做，请*使用 lock*。如果没有竞争，锁很便宜。

如果你因为你的锁一直在争用而遇到性能问题，那么通过改变你的线程架构来*解决这个问题*，而不是尝试做一些危险和愚蠢的事情，比如低锁代码。除了少数专家之外，没有人能正确编写低锁定代码。（我不是其中之一；我也不写低锁代码。）

> 即使列表在被索引时调整大小，我也只是访问一个已经存在的项目，所以无论是从旧数组还是新数组中读取它都没有关系。

这是错误的思考方式。正确的思考方式是：

> 如果列表被调整大小，那么列表的内部数据结构就会发生变化。内部数据结构可能在突变的中途突变为不一致的形式，在突变完成时将变得一致。因此我的读者可以从另一个线程中看到这种不一致的状态，这使得*我的整个程序的行为变得不可预测*。它可能会崩溃，它可能会进入一个无限循环，它可能会破坏其他数据结构，我不知道，因为*我正在运行的代码在一个状态不一致的世界中假设一个一致的状态*。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-24T14:19:13.490

### 大编辑

ConcurrentQueue 仅对 Enqueue(T) 和 T Dequeue() 操作是安全的。您正在对其进行**foreach**并且未在所需级别同步。在您的特定情况下，最大的问题是枚举队列（它本身就是一个集合）可能会引发众所周知的“集合已被修改”异常。为什么这是最大的问题？因为您在之后将内容添加到队列**中**您已将相应的对象添加到列表中（也非常需要同步列表，但是 + 最大的问题只需一个“子弹”即可解决）。在枚举集合时，很难接受另一个线程正在修改它的事实（即使在微观层面上修改是安全的 - ConcurrentQueue 就是这样做的）。

因此，您绝对需要使用另一种同步方式来同步对队列（以及中央列表）的访问（我的意思是，您也可以忘记 about ConcurrentQueue 并使用简单的队列甚至是列表，因为您永远不要让事情出队）。

所以只需执行以下操作：

```
public void Writer(object toWrite) {
  this.rwLock.EnterWriteLock();
  try {
    int tailIndex = this.list.Count;
    this.list.Add(toWrite);

    if (..condition1..)
      this.queue1.Enqueue(tailIndex);
    if (..condition2..)
      this.queue2.Enqueue(tailIndex);
    if (..condition3..)
      this.queue3.Enqueue(tailIndex);
    ..etc..
  } finally {
    this.rwLock.ExitWriteLock();
  }
} 
```

在 AccessItems 中：

```
public IEnumerable<object> AccessItems(int queueIndex) {
  Queue<object> whichQueue = null;
  switch (queueIndex) {
    case 1: whichQueue = this.queue1; break;
    case 2: whichQueue = this.queue2; break;
    case 3: whichQueue = this.queue3; break;
    ..etc..
    default: throw new NotSupportedException("Invalid queue disambiguating params");    
  }

  List<object> results = new List<object>();
  this.rwLock.EnterReadLock();
  try {
    foreach (var index in whichQueue)
      results.Add(this.list[index]);
  } finally {
    this.rwLock.ExitReadLock();
  }

  return results;
} 
```

而且，根据我对您的应用程序访问列表和各种队列的情况的全部理解，它应该是 100% 安全的。

### 大编辑结束

首先：[你称之为 Thread-Safe 的东西是什么？埃里克·利珀特](http://blogs.msdn.com/b/ericlippert/archive/2009/10/19/what-is-this-thing-you-call-thread-safe.aspx)

在您的特定情况下，我想答案是**否定**的。

在全局上下文（实际列表）中不会出现不一致的情况。

取而代之的是，实际的读者（他们很可能与唯一的作者“冲突”）最终会在自身内部出现不一致（他们自己的堆栈含义：所有方法的局部变量、参数以及它们在堆中的逻辑隔离部分） ））。

这种“每线程”不一致的可能性（第 N 个线程想要了解 List 中元素的数量并发现该值为 39404999，尽管实际上您只添加了 3 个值）足以声明，一般来说，架构不是线程安全的（尽管您实际上并没有更改全局可访问的列表，只是通过以有缺陷的方式读取它）**。**

我建议您使用[ReaderWriterLockSlim](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)类。我想你会发现它适合你的需求：

```
private ReaderWriterLockSlim rwLock = new ReaderWriterLockSlim(LockRecursionPolicy.SupportsRecursion);

private List<Object> items;
private ConcurrentQueue<int> queue;
private Timer timer;
private void callback(object state)
{
  int index = items.Count;

  this.rwLock.EnterWriteLock();
  try {
    // in this place, right here, there can be only ONE writer
    // and while the writer is between EnterWriteLock and ExitWriteLock
    // there can exist no readers in the following method (between EnterReadLock
    // and ExitReadLock)

    // we add the item to the List
    // AND do the enqueue "atomically" (as loose a term as thread-safe)
    items.Add(new object());

    if (true)//some condition here
      queue.Enqueue(index);
  } finally {
    this.rwLock.ExitWriteLock();
  }

  timer.Change(TimeSpan.FromMilliseconds(500), TimeSpan.FromMilliseconds(-1));
}

//This can be called from any thread
public IEnumerable<object> AccessItems()
{
  List<object> results = new List<object>();

  this.rwLock.EnterReadLock();
  try {
    // in this place there can exist a thousand readers 
    // (doing these actions right here, between EnterReadLock and ExitReadLock)
    // all at the same time, but NO writers
    foreach (var index in queue)
    {
      this.results.Add ( this.items[index] );
    }        
  } finally {
    this.rwLock.ExitReadLock();
  }

  return results; // or foreach yield return you like that more :)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T15:15:27.577

不，因为您正在同时读取和写入同一个对象。这没有被证明是安全的，所以你不能确定它是安全的。不要这样做。

顺便说一句，从 .NET 4.0 开始它实际上是不安全的这一事实毫无意义。即使根据反射器它是安全的，它也可能随时改变。**您不能依赖当前版本来预测未来版本。**

不要试图逃避这样的伎俩。为什么不以一种明显安全的方式进行呢？

附带说明：两个计时器回调可以同时执行，因此您的代码被双重破坏（多个编写者）。**不要试图用线程来耍花招。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T16:03:02.007

它是线程安全的。foreach 语句使用 ConcurrentQueue.GetEnumerator() 方法。承诺：

> 枚举表示队列内容的即时快照。它不反映调用 GetEnumerator 后对集合的任何更新。枚举器可以安全地与队列的读取和写入同时使用。

这是另一种说法，即您的程序不会像使用 Queue 类时会得到的那种难以理解的异常消息随机爆炸。但请注意后果，此保证中隐含的是您很可能正在查看队列的陈旧版本。在您的循环开始执行后，您的循环将无法看到其他线程添加的任何元素。这种魔法不存在，也不可能以一致的方式实施。这是否会使您的程序行为不端是您必须考虑的事情，并且无法从问题中猜到。您可以完全忽略它是非常罕见的。

然而，您对 List<> 的使用是完全不安全的。

# asp.net - 在 asp.net 中使用带有框架集的页面作为模式页面

> ID：15052525
> 
> 赞同：2
> 
> 时间：2013-02-24T14:08:33.233
> 
> 标签：asp.net, modal-dialog

我有一个带有框架集的简单 Statistics.aspx 页面，我想将它用作 Web 用户控件中的模式页面。我有一个javascript函数，我在gridview Item模板中使用它，如下所示：

```
<script>
function ViewStatistics(AdId)
 {
     modalDialog('../../../CMSWebParts/Advertise/Tools/View_Statistics.aspx', 'ViewStatistics', 700, 600);
  } 
```

```
 <asp:ImageButton ID="imgbtnStatistics" runat="server" CommandName="statistics" 
     ImageUrl="~/App_Themes/Default/Images/Objects/__REPORTING__/object.png" 
     ToolTip="View Statistics" Width="18px" CommandArgument='<%# Eval("ItemID") %>'        
     alt="ViewStatistics" OnClientClick=" ViewStatistics (10 ); return false;" /> 
```

我的 statistics.aspx 页面代码如下：

```
<asp:Content ID="Content5" ContentPlaceHolderID="plcContent" runat="Server">
<%--    <div>
<iframe src="User_ADs_Analytics_Statistics.aspx" >hi</iframe>
<iframe src="User_ADs_Analytics_Statistics.aspx" >hi2</iframe>
 </div>--%>
<frameset border="0" cols="220,*" id="colsFramesetAnalytics" runat="server">
    <frame name="analtree" src="User_ADs_Analytics_Statistics.aspx" scrolling="no" frameborder="0" />
    <frameset border="0" rows="111, 154, *" runat="server" id="rowsFrameset">
        <frame name="analmonths" src="../../../mjtest.aspx" scrolling="auto" frameborder="0" />
        <!--  <frame name="analdays" src="User_ADs_Analytics_Statistics.aspx" frameborder="0" />
        <frame name="analreport" src="../../../CMSDesk/blank.htm" scrolling="auto" frameborder="0" /> -->
    </frameset>
    <noframes>
        <p id="p1">
            This HTML frameset displays multiple Web pages. To view this frameset, use a Web
            browser that supports HTML 4.0 and later.
        </p>
    </noframes>
</frameset> 
```

当我使用 iframe 时效果很好，但是当我使用 frameset 时它什么也没显示。

# complexity-theory - 三个嵌套for循环的渐近分析

> ID：15052528
> 
> 赞同：6
> 
> 时间：2013-02-24T14:09:00.423
> 
> 标签：complexity-theory, asymptotic-complexity, big-theta

我想计算这个嵌套 for 循环的 theta 复杂度：

```
 for (int i = 0; i < n; i++) {
        for (int j = 0; j < i; j++) {
            for (int k = 0; k < j; k++) {
                // statement 
```

我会说它是 n^3，但我认为这是不正确的，因为每个 for 循环都不会从 1 变为 n。我做了一些测试：

n = 5 -> 10

10 -> 120

30 -> 4060

50 -> 19600

所以它必须在n^2和n^3之间。我尝试了求和公式等，但我的结果太高了。虽然是 n^2 log(n)，但这也是错误的......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-01T16:52:20.403

使用 Sigma 表示法是一种高效的分步方法：

![在此处输入图像描述](../Images/76b324bb6b5f1c9d4827f351f37a3214.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T14:17:56.550

它是`O(N^3)`。确切的公式是[`(N*(N+1)*(N+2))/6`](http://www.wolframalpha.com/input/?i=sum%20of%20%28sum%20of%20k%20from%201%20to%20j%29%20from%201%20to%20N)

# java - 在java中为图像序列制作动画

> ID：15052530
> 
> 赞同：0
> 
> 时间：2013-02-24T14:09:22.310
> 
> 标签：java, image, animation

首先对不起我的英语不好

大家好，我正在使用 java 开发 2d 游戏，当想要为一系列图像设置动画时，只加载最后一个图像并且我不知道为什么我的代码看起来是逻辑的，所以当我按下“Q”按钮时，大多数情况下那里的动画。代码：

哥们班

```
import java.awt.*;
import java.awt.event.KeyEvent;
import javax.swing.*;

public class Dude {
int x, dx, y, dy;
Image still;
Image walking;
Image effet;
ImageIcon i = new ImageIcon("C:/1.gif");
ImageIcon run=new ImageIcon("C:/NeroRun.gif");
ImageIcon down=new ImageIcon("C:/nero_down.gif");
Image[]attack=new Image[15];
ImageIcon saut_effet=new ImageIcon("C:/saut_effet.gif");
ImageIcon saut=new ImageIcon("C:/saut.gif");
ImageIcon effect=new ImageIcon("C:/saut_effet.gif");
//ImageIcon attack;

public Dude() throws {
    still = i.getImage();
    x = 10;
    y = 260;
    for(int j=0;j<15;j++){
        ImageIcon ii=new ImageIcon("C:/Games/frame-"+(j+1)+".gif");
        attack[j] = ii.getImage();
        System.out.println("Nice");

    }

}

public void move(){
    x = x + dx;
    y = y + dy;

}

public int getX(){
    return x;
}

public int getY(){
    return y;
}

public Image getImage(){
    return still;
}

public Image getEffet(){
    return effet;
}

public void keyPressed(KeyEvent e) throws InterruptedException{
    int key = e.getKeyCode();

    if (key == KeyEvent.VK_LEFT) {
        dx = -3;
        still=run.getImage();
        System.out.println("Left");
        if(y==260){y+=55;}
    }

   if (key == KeyEvent.VK_RIGHT) {
         dx = 3;
        still=run.getImage();
        System.out.println("Right");
        if(y==260){y+=55;}
        effet=null;
    }

   if (key == KeyEvent.VK_DOWN) {
        still=down.getImage();
        System.out.println("Down");
        if(y==260){y+=90;} 
        effet=null;
   }

   if (key == KeyEvent.VK_UP){
       if(y==260){y-=130;}
       effet=effect.getImage();
       still=saut.getImage();
   }

  if(key == KeyEvent.VK_Q){
      if(y==260){y-=135;
      for(int j=0;j<15;j++){
          still=attack[j];
      }

      //attack=new ImageIcon("C:/first_attack.gif");
      //still=attack.getImage();}
      effet=null;
    }
  }    
}

    public void keyReleased(KeyEvent e){
    int key = e.getKeyCode();

    if (key == KeyEvent.VK_LEFT){
        dx = 0;
        still=i.getImage();
        y=260;
        effet=null;
    }

    if (key == KeyEvent.VK_RIGHT){
        dx = 0;
        still=i.getImage();
        y=260;
        effet=null;
    }

    if (key == KeyEvent.VK_DOWN){
        dx = 0;
        still=i.getImage();
        y=260;
        effet=null;
    }

    if (key == KeyEvent.VK_UP){
        still=i.getImage();
        y=260;
        effet=null;
    }

    if (key == KeyEvent.VK_Q){
        still=i.getImage();
        y=260;
        effet=null;
    }

}
} 
```

博拉德1类：

包FirstTest；

```
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.ImageIcon;
import javax.swing.JPanel;
import javax.swing.Timer;
import org.newdawn.slick.SlickException;

/**
 *
 * @author SiLeNT J0cK3R
 */
class Board1 extends JPanel implements ActionListener{

Dude p;
Image img;
Timer time;

public Board1() throws SlickException{
    p = new Dude();
    addKeyListener(new AL());
    setFocusable(true);
    ImageIcon i = new ImageIcon("C:/Background.png");
    img = i.getImage();
    time = new Timer(5, this);
    //Music.music();
    time.start();
}
    @Override
    public void actionPerformed(ActionEvent e){
    p.move();
    repaint();
    //System.out.println("Repaint");
}

    @Override
    public void paint(Graphics g){
    super.paint(g);
            Graphics2D g2d = (Graphics2D) g;

            g2d.drawImage(img, 0, 0, null);
            g2d.drawImage(p.getImage(), p.getX(), p.getY(),null);
            //Pour animer les effets loresequ'on effectue un saut
            g2d.drawImage(p.getEffet(),p.getX(),300,null);
            //Pour animer les ennemies

}

private class AL extends KeyAdapter{
    @Override
    public void keyReleased(KeyEvent e){
        p.keyReleased(e);
    }
    @Override
    public void keyPressed (KeyEvent e){
        try {
            p.keyPressed(e);
        } catch (InterruptedException ex) {
            Logger.getLogger(Board1.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:55:44.023

```
 for(int j=0;j<15;j++){
      still=attack[j];
  } 
```

识别 Q 键时，您似乎只是穿过动画帧（图像）。要使动画可见，动画帧的每次更改之间必须经过一段时间。

我建议您看一些示例和教程。就像在这里找到的 Space Invaders 克隆一样：[www.cokeandcode.com](http://www.cokeandcode.com/index.html?page=tutorials)

# erlang - 分解浮点数而不是整数时系统挂起

> ID：15052531
> 
> 赞同：1
> 
> 时间：2013-02-24T14:09:30.580
> 
> 标签：erlang

我正在努力理解这个问题的原因。重点：

1) 将整数 ( 10 ) 传递给以下分解函数立即起作用：

```
test() ->
    X  = 10,
    F  = factorize(X).

factorize(0) -> 1;
factorize(N) -> N * factorize(N-1). 
```

2）传递一个浮点数（**10.0**）将导致梁进程挂起，占用高 CPU 甚至不会终止。**注意这是一个很小的值**。我可以分解一个高整数并获得几乎立即的响应，但是一个小的浮点数 10.0 会导致它挂起。

```
test() ->
    X  = 10.0,          <-- NOTICE THE DOT ZERO 10.0
    F  = factorize(X).

factorize(0) -> 1;
factorize(N) -> N * factorize(N-1). 
```

**问题：**为什么在 Erl Earth 上，这种挂起会发生在浮点数的乘法重复中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T21:41:46.427

[正如文档所说](http://www.erlang.org/doc/reference_manual/expressions.html#id77027)，在 Erlang 中有两种比较术语相等性的操作，它们仅在处理整数和浮点数方面有所不同：

*   `=:=`- 完全相等 - 如果类型相同，则计数相等，并且它们的值也相同`false = (0.0 =:= 0)`
*   `==`- equal - 如果数值相同但类型可能不相等，则计数相等`true = (0.0 == 0)`

模式匹配使用第一个 - 完全相等 - 运算符，这就是您的函数在第二个子句中挂起的原因。

浮点数的另一个问题是它们的近似值。你永远不能确定你有一些精确的值，尤其是在算术运算之后。`epsilon`在浮点相等性测试中使用较小的值是一种常见的做法。

```
is_zero(F) -> (F < 1.0e-10) andalso (F > -1.0e-10). 
```

# python - python类构造函数错误

> ID：15052536
> 
> 赞同：0
> 
> 时间：2013-02-24T14:10:40.127
> 
> 标签：python, oop, class, constructor

我的 main.py 中有这一行：

```
import classes
info = classes.information(a, b, c) 
```

以及 classes.py 中的这个类和构造函数

```
class information:
    #constructor:
    def __init__(self, a, b, c):
        self.a = a
        self.b = b
        self.c = c 
```

它说这个构造函数不带参数（给定3个）

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:08:24.997

`classes.information(a, b, c)` **没有**调用`classes`构造函数`classes.__init__()`。相反，它正在调用看起来像是`classes`类本身的类方法的东西。

这*可能*是您想要的（如果没有更多代码和/或信息，无法确定）：

```
import classes
classes_obj = classes(a, b, c)  # create instance of classes (call constructor)
info = classes_obj.information()  # call method of that instance 
```

# user-interface - AutoIt：如何在浏览器的输入字段中书写？

> ID：15052540
> 
> 赞同：1
> 
> 时间：2013-02-24T14:11:06.267
> 
> 标签：user-interface, scripting, autoit

设想：

我登录了一个网站，并想让 AutoIt 在输入字段中写入。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:53:20.400

尝试这样的事情

```
 #include<IE.au3>
$sUsername = "Username"
$sPassword = "Password"
$sUrl = "https://yoururl.com"
$oIE = _IECreate($sUrl, 0, 1, 0, 1)
Sleep(2000)
$oHWND = _IEPropertyGet($oIE, "hwnd")
WinSetState($oHWND, "", @SW_MAXIMIZE)
$oForm = _IEFormGetCollection($oIE, 0)
$oUsername = _IEFormElementGetObjByName($oForm, 'login') ; change name !
$oPassword = _IEFormElementGetObjByName($oForm, "password") ; change name !
_IEFormElementSetValue($oUsername, $sUsername)
_IEFormElementSetValue($oPassword, $sPassword)
_IEFormSubmit($oForm) 
```

还有一个用于 Firefox 的 UDF FF.au3，但如果您只需要在 PC 上使用该脚本，我会使用greasemonkey。

# android-listview - 动画后更新 ListView

> ID：15052547
> 
> 赞同：1
> 
> 时间：2013-02-24T14:11:52.590
> 
> 标签：android-listview, android-animation, android-adapter

我的应用程序有一个用于通知的滑动抽屉。我已经设法让它像 android 通知一样运行，包括“全部清除”按钮。

单击清除所有按钮时，我的数据库被清除，我的列表适配器被刷新，我的列表适配器被设置为列表。视图更新并且列表被清除。

当我添加滑出动画（就像果冻豆一样）时，我得到了 NullPointerException。当我的适配器设置好后，问题就出现了。如果我注释掉设置适配器，动画运行没有问题。

```
 // Animation
        int count = drawer_list.getCount();
        for (int i = 0; i < count; i++) {
            View view = drawer_list.getChildAt(i);
            if (view != null) {
                // create an Animation for each item
                Animation animation = AnimationUtils.loadAnimation(this, android.R.anim.slide_out_right);
                animation.setDuration(300);

                // ensure animation final state is "persistent"
                animation.setFillAfter(true);

                // calculate offset (bottom ones first, like in notification panel)
                animation.setStartOffset(300 * (count - 1 - i));

                // animation listener to execute action code
                if (i == 0) {
                    animation.setAnimationListener(new AnimationListener() {

                        public void onAnimationStart(Animation animation) {
                            // NOT USED

                        }

                        public void onAnimationRepeat(Animation animation) {
                            // NOT USED

                        }

                        public void onAnimationEnd(Animation animation) {

                            // Clear table
                            notifications.flushNotificationTempTable_ActiveOnly();
                            // Update list adapter
                            refreshNotifications();
                            // Close drawer
                            notification_drawer.close();
                        }
                    });
                }

                view.startAnimation(animation);
            }
        } 
```

`drawer_list.setAdapter(notificationAdapter);`问题出在该行执行时的 refreshNotifications() 方法中。我在整个应用程序中都使用了这种方法和适配器，正如我上面所说，它在没有动画的情况下完美地工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:18:02.953

我能够通过消除动画侦听器并在它之后添加一个延迟的可运行文件来运行我的后期动画代码来解决这个问题。

我无法找到在动画侦听器中设置新适配器（因为我使用了自定义适配器而需要）的方法。如果有人知道如何做到这一点，我想知道。

# javascript - 获取具有多个来源的每个 iframe 的加载时间

> ID：15052549
> 
> 赞同：1
> 
> 时间：2013-02-24T14:11:58.797
> 
> 标签：javascript

我正在尝试获取每个 iframe 的加载时间，然后显示时间。这是我目前拥有的代码（没有加载时间计算）：

```
<iframe id="1"  width="100" height="100" src=""></iframe>

<script type="text/javascript">
$(document).ready(function(){   
    var array = ['http://www.example1.com', 'http://www.example2.com', 'http://www.example3.com'];
    $('#1').on('load', function() {                 
       $('#1').attr('src', array.pop());             
    }).attr('src', array.pop());
});
</script> 
```

它将数组中的链接放入 iframe 中，一个接一个地加载每个 iframe。

这就是我以前获取加载时间的方式：

```
<script type="text/javascript">
beforeload = (new Date()).getTime();
function pageloadingtime(i)
{

    var afterload = (new Date()).getTime();
    var seconds = (afterload-beforeload)/1000;
    document.getElementById("loadingtime"+i).innerHTML = seconds;
}
</script> 
```

这种方法对我不起作用，因为它同时加载了所有 iframe，而不是一一加载。

如何在第一个代码中使用第二个代码方法来计算和显示 iframe 的加载时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:34:10.760

这个怎么样：

```
$(document).ready(function(){   
var array = ['http://www.example1.com', 'http://www.example2.com', 'http://www.example3.com'];
var beforeLoad = (new Date()).getTime();
var loadTimes = [];
$('#1').on('load', function() {
   loadTimes.push((new Date()).getTime());                  
   $('#1').attr('src', array.pop());
    if (array.length === 0) { 
        $.each(loadTimes, function(index, value) {
           alert(value - beforeLoad); 
        });
    }
}).attr('src', array.pop());
}); 
```

*旁注* 您必须确保您可以通过 iframe 访问您正在检查的网站，因为现在大多数网站都不允许 iframe。如果您仍然想在没有 iframe 的情况下测量负载并使用 javascript，您也许可以使用`$.get`requests 来模仿同样的事情。

# sql - 排序时出现多部分标识符错误

> ID：15052550
> 
> 赞同：0
> 
> 时间：2013-02-24T14:11:59.347
> 
> 标签：sql

```
Project nr      Task                  Task deadline    Task Type Production
---------------------------------------------------------------------------
456             packed                1 april 2013      Packed
456             Leave production      3 april 2013      Leave Production
456             Flight date           9 april 2013      Flight Date
123             packed                1 april 2013      Packed
123             Leave production      6 april 2013      Leave Production
123             Flight date           9 april 2013      Flight Date
789             packed                1 april 2013      Packed
789             Leave production      9 april 2013      Leave Production
789             Flight date           9 april 2013      Flight Date 
```

我需要一个像上面这样的列表 我想按“停止生产”的日期排序 项目 nr 必须像上面的列表一样保持在 3 组中。

我已经有了这个 SQL。该列表有效，但排序无效。错误是：

> *无法绑定多部分标识符“任务。[任务期限]”。*

我已经有一个建议，但仍然有错误。我如何得到排序？

这是我得到的清单：

```
Project Nr     Task             TaskDate
0053           Packed           2013-02-05 17:00:00.000
0053           Leave Production 2011-04-26 17:00:00.000
0053           Flight Date      2011-04-22 17:00:00.000
0071           Leave Production 2011-06-24 17:00:00.000
0081           Leave Production 2012-03-09 17:00:00.000
0081-01        Leave Production 2012-03-09 17:00:00.000 
```

这是 SQL 查询：

```
SELECT  
    [Project nr], Task, TaskDate
FROM    
    (SELECT   
        MSP_EpmProject_UserView.[Project nr]
        ,MAX(CASE WHEN [Task Type Production] = 'Packed' 
                  THEN [Task deadline] 
             END) AS Packed
        ,MAX(CASE WHEN [Task Type Production] = 'Leave Production' 
                  THEN [Task deadline]
             END) AS [Leave Production]
        ,MAX(CASE WHEN [Task Type Production] = 'Flight Date' 
                  THEN [Task deadline]
             END) AS [Flight Date]
     FROM 
        MSP_EpmProject_UserView 
     LEFT JOIN 
        MSP_EpmTask_UserView ON MSP_EpmProject_UserView.ProjectUID = MSP_EpmTask_UserView.ProjectUID 
     LEFT JOIN 
        MSP_EpmAssignment_UserView ON MSP_EpmTask_UserView.TaskUID = MSP_EpmAssignment_UserView.TaskUID 
     LEFT JOIN 
        MSP_EpmResource_UserView ON MSP_EpmAssignment_UserView.ResourceUID = MSP_EpmResource_UserView.ResourceUID 
     WHERE 
        (MSP_EpmTask_UserView.TaskIsProjectSummary = 0) 
     GROUP BY 
        MSP_EpmProject_UserView.[Project nr]) data
UNPIVOT
    (TaskDate
       FOR [Task] IN ([Pack], [Leave Production], [Flight Date])
    ) piv 
```

此行应该进行排序：

```
ORDER BY data.[Task deadline] 
```

但我得到一个错误

> *消息 4104，级别 16，状态 1，第 62 行
> 无法绑定多部分标识符“data.Taskdeadline”。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:18:36.630

The subquery that you alias as `data` just simply isn't returning a column called `Taskdeadline`

As you can see from your SQL statement - that subquery contains the columns:

```
[Project nr]
Packed
[Leave Production]
[Flight Date] 
```

but that's all - no `Taskdeadline` anywhere to be seen....

So therefore, quite obviously, you cannot use that non-existing column in the `ORDER BY` clause.

# vb.net - 如何使用 vb.net 中的数据库更新图像

> ID：15052552
> 
> 赞同：2
> 
> 时间：2013-02-24T14:12:17.740
> 
> 标签：vb.net, winforms

这段代码有什么问题？？我遇到了 GDI+ 错误，我不知道如何解决。

```
Private Sub saveEmployee()
   Dim ms As New MemoryStream

   PictureBox1.Image.Save(ms, PictureBox1.Image.RawFormat)--i got error in this line..A generic error occurred in GDI+.

   Dim arrPic() As Byte = ms.GetBuffer()

   Dim cmdEmp As New MySqlCommand
   Dim sqlEmp As String
   sqlEmp = "update tbl_employee set  emPic=@emPic where emID='" & lbl_empID.Text & "'"

   With cmdEmp
      .Parameters.AddWithValue("@emPic", arrPic)
      .ExecuteNonQuery()
   End With
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:34:31.380

尝试用此替换该行：

```
Dim bm as Bitmap = new Bitmap(PictureBox1.Image)
bm.Save(ms, PictureBox1.Image.RawFormat) 
```

原因可能是 Image 正在被`PictureBox`. 改为使用以下内容也是一种好习惯：

```
Using ms As MemoryStream = New MemoryStream()

   Dim bm as Bitmap = new Bitmap(PictureBox1.Image)
   bm.Save(ms, PictureBox1.Image.RawFormat)

   Dim arrPic() As Byte = ms.GetBuffer()

   Dim cmdEmp As New MySqlCommand
   Dim sqlEmp As String
   sqlEmp = "update tbl_employee set  emPic=@emPic where emID=@emID"

   With cmdEmp
     .Parameters.AddWithValue("@emPic", arrPic)
     .Parameters.AddWithValue("@emID", int.Parse(lbl_empID.Text))
     .ExecuteNonQuery()
   End With

End Using 
```

这样使用后`MemoryStream`会得到`Disposed`。并且`@emID`作为参数添加更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-18T00:08:09.217

解决！！！使用 DataBindings 部分中的 Advance 选项卡将图片框绑定到数据源字段。使用 ImageLocation 属性而不是图像。然后将更新模式更改为从不。但是更新怎么样？？？使用文本框并隐藏在图片框后面 [with visible = true]。将文本框绑定到相同的数据源。那是！！！

图像直接显示在图片框中，而文本框 TextChanged 属性处理是否有更新。花了我一段时间，但现在工作正常。祝你好运，你的代码......〜SAM，加纳

# perl - perl excel解析和修改同一个工作表

> ID：15052561
> 
> 赞同：0
> 
> 时间：2013-02-24T14:13:28.050
> 
> 标签：perl, excel

我需要将我的 XLS 文件与另一个文件进行比较，并相应地修改第一个（一些单元格）文件。我需要跨平台，所以我使用 Spreadsheet::ParseExcel::SaveParser

这是我到目前为止的子程序

```
sub find_occurrences
{
my $xlsname   = $_[0];
my $pattern   = $_[1];
my $parser    = Spreadsheet::ParseExcel::SaveParser->new();
my $workbook  = $parser->parse($xlsname);
my $worksheet = $workbook->worksheet(0) || die("$@$!");
my ( $row_min, $row_max ) = $worksheet->row_range();   
for my $row ( 0 .. $row_max ) {         
    $cell = $worksheet->get_cell( $row, 1 );
    next if (!$cell);    
    if($cell->value() =~ m/$pattern/i )
    {
        print "Order found ",$cell->value(),"\n";   
        $worksheet->AddCell( $row, 1, "Shop" );     
    }       

}
} 
```

[http://search.cpan.org/~jmcnamara/Spreadsheet-ParseExcel/lib/Spreadsheet/ParseExcel/SaveParser.pm](http://search.cpan.org/~jmcnamara/Spreadsheet-ParseExcel/lib/Spreadsheet/ParseExcel/SaveParser.pm)

看起来像示例，但我收到此错误：无法在 ./test.pl 第 153 行通过包“Spreadsheet::ParseExcel::Worksheet”定位对象方法“AddCell”。

是这一行

$worksheet->AddCell( $row, 1, "Shop" );

我什至尝试添加

```
use Spreadsheet::ParseExcel::Worksheet;
use Spreadsheet::ParseExcel::Workbook; 
```

我是 perl 的新手，我无法用谷歌搜索一些有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:13:47.963

我猜你混淆了一些`Spreadsheet::ParseExcel`代码`Spreadsheet::ParseExcel::SaveParser`

问题是`parse()`,`Parse()` 方法。不幸的是，界面不是很透明。如果你打电话

`$parser->parse(...)`

你得到一个`Spreadsheet::ParseExcel::Workbook`对象，但如果你使用

`$parser->Parse(...)`

你得到一个`use Spreadsheet::ParseExcel::SaveParser::Workbook`对象。

**这就是你所需要的！**.

这是我的例子：

```
#!/usr/bin/perl
use strict;
use warnings;

use Spreadsheet::ParseExcel::SaveParser;

find_occurrences ('Mappe1.xls', qr/.*/);

sub find_occurrences {
    my ($xlsname, $pattern) = @_;

    my $parser    = Spreadsheet::ParseExcel::SaveParser->new();
    my $workbook  = $parser->Parse($xlsname);
    my $worksheet = $workbook->worksheet(0) || die("$@$!");

    print "Workbook is a :". ref($workbook). "\n"; 

    my ( $row_min, $row_max ) = $worksheet->row_range();   
    for my $row ( 0 .. $row_max ) {         
        my $cell = $worksheet->get_cell( $row, 1 );
        next if (!$cell);    
        if($cell->value() =~ m/$pattern/i )
        {
            print "Order found ",$cell->value(),"\n";   
            $worksheet->AddCell($row, 1, "Shop" );     
        }       

    }
} 
```

# ios - 在 Air for iOS 中是否有任何使用“GPU 模式”作为渲染方法的快速渲染游戏库？

> ID：15052562
> 
> 赞同：0
> 
> 时间：2013-02-24T14:13:30.263
> 
> 标签：ios, performance, flash, air, starling-framework

我一直在玩starling 2D，发现没有它我的游戏运行得更快。原因很简单，因为游戏使用了大量的矢量形状，而“直接”模式在渲染形状方面太慢了。使用 GPU 模式，FPS 从 20 上升到 55 左右。

不过有一个小小的权衡。使用 starling 2d 渲染诸如 BitmapData(Textures) 之类的静态图像更快。此外，我不必担心我的图形资源是否一直在硬件加速。

所以我正在寻找一个适用于 iOS 的游戏（图形）库，它可以在 GPU 渲染模式下工作，并且可以更轻松地管理 BitmapData 缓存。

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:41:13.210

`<renderMode>mode</renderMode>`当您使用application.xml 文件创建 AIR 应用程序时，可以选择 4 种渲染模式。

`<renderMode>cpu</renderMode>`或`<renderMode>auto</renderMode>`（使用自动默认为 CPU）

*   一切都在软件中呈现
*   最容易构建
*   使用位图缓存可以提高性能

`<renderMode>gpu</renderMode>`

*   矢量和缓存表面通过硬件渲染
*   文本和矢量可以使用 cacheAsBitmapMatrix
*   有很多限制（在此处阅读更多信息[http://help.adobe.com/en_US/as3/mobile/WS901d38e593cd1bac-3d719af412b2b394529-8000.html](http://help.adobe.com/en_US/as3/mobile/WS901d38e593cd1bac-3d719af412b2b394529-8000.html)）

`<renderMode>direct</renderMode>`（又名 Stage3D）

*   GPU加速渲染引擎
*   比任何其他渲染技术都快
*   许多有用的框架，例如 Starling 和 Away3D
*   创建接近本机级别性能的应用程序
*   处理 Event.ENTER_FRAME 中的大多数重复脚本

由您决定选择哪个。尽量远离重功能，例如：

*   位图效果（阴影、光泽、浮雕……）
*   掩码（本质上基于矢量）
*   阿尔法通道
*   混合模式（相加、相乘……）
*   嵌入字体（尤其是 Unicode）
*   复杂的矢量图稿

据我所知，没有二维矢量库。我建议将您的矢量导出到精灵表。我知道它不那么容易扩展，但它是在 AIR 中开发游戏的受支持方式。

达斯汀

# string - 如何从流中读取字符串

> ID：15052564
> 
> 赞同：-4
> 
> 时间：2013-02-24T14:13:58.390
> 
> 标签：string, stream

```
 Dim adult = webClient.DownloadString("http://googleads.g.doubleclick.net/apps/domainpark/domainpark.cgi?callback=_google_json_callback&output=js&client=ca-dp-godaddy2_xml&domain_name=" + CurrentBlog.Domain)
        'ias.NavigateTillComplete("https://api.bodis.com/domainclassification?domain=" + CurrentBlog.Domain)
        Dim result = ""
        Dim url = "http://api.bodis.com/domainclassification?domain=" + CurrentBlog.Domain
        Dim webRequest = DirectCast(System.Net.HttpWebRequest.Create(url), System.Net.HttpWebRequest)
        Dim response = DirectCast(webRequest.GetResponse(), HttpWebResponse)
        Dim responseStream = response.GetResponseStream
        Dim responseString = responseStream.readAll? 'MethodAccessException doesn't exist

        Dim responseString = responseStream.readAll? 'MethodAccessException doesn't exist 
```

我应该如何更换 `Dim responseString = responseStream.readAll`？

实际的命令是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:16:11.043

You could pass the response stream to a [`StreamReader`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx) instance and then use the [`ReadToEnd`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readtoend.aspx) method:

```
Dim adult = webClient.DownloadString("http://googleads.g.doubleclick.net/apps/domainpark/domainpark.cgi?callback=_google_json_callback&output=js&client=ca-dp-godaddy2_xml&domain_name=" + CurrentBlog.Domain)
'ias.NavigateTillComplete("https://api.bodis.com/domainclassification?domain=" + CurrentBlog.Domain)
Dim result = ""
Dim url = "http://api.bodis.com/domainclassification?domain=" + CurrentBlog.Domain
Dim webRequest = DirectCast(System.Net.HttpWebRequest.Create(url), System.Net.HttpWebRequest)
Using Dim response = DirectCast(webRequest.GetResponse(), HttpWebResponse)
    Using Dim responseStream = response.GetResponseStream
        Using Dim responseReader = new StreamReader(responseStream)
            Dim responseString = responseReader.ReadToEnd()
        End Using
    End Using
End Using 
```

But why bother with an HttpWebRequest when you could use a WebClient directly:

```
Dim adult = webClient.DownloadString("http://googleads.g.doubleclick.net/apps/domainpark/domainpark.cgi?callback=_google_json_callback&output=js&client=ca-dp-godaddy2_xml&domain_name=" + CurrentBlog.Domain)
'ias.NavigateTillComplete("https://api.bodis.com/domainclassification?domain=" + CurrentBlog.Domain)
Dim result = ""
Dim url = "http://api.bodis.com/domainclassification?domain=" + CurrentBlog.Domain
Dim responseString = webClient.DownloadString(url) 
```

# ruby-on-rails-3.2 - How do I store a list of preferences for a user?

> ID：15052565
> 
> 赞同：0
> 
> 时间：2013-02-24T14:14:08.923
> 
> 标签：ruby-on-rails-3.2

I'm very new to ruby and rails so this is probably quite a simple question but very confusing to me.

I have users (with model, controller, views and everything all set up already). Now I want to introduce something where users can indicate what their preferences are. An example would be for users to indicate what their 5 favourite foods are, and then for me to be able to search for users by favourite food.

This being my first rails project, I'm a little unsure how to approach this. My thoughts so far:

1) Add a boolean array to my User model, render the array as checkboxes and then store it somehow. (I'm just not sure how to generate the migration for that, or how to search by food item if implemented like that).

2) Create a Food model and use the `has_many` relationship in my User model to link users to foods. I imagine I'd then be able to search for users based on a food? I feel like a Food model might be overkill because it's not something that has any information relating to it. It is just something to attach to Users.

Any suggestions, code, hints or tips would be hugely appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:28:52.873

首先，您应该使用[http://railscasts.com/](http://railscasts.com/)作为资源。您在此处描述的所有内容，此站点都有教程。

您需要小心地向您的用户模型添加多个字段（即 fav_food_one、fav_food_two 等），因为搜索和返回列表会很麻烦。

您更有可能想要拥有 has_many 关联的东西

```
User: username, name, email, etc

Food: name, category, fun_facts, etc

UserFavoriteFoods: user_id:integer, food_id:integer 
```

在您的模型中，您将创建这样的关联。

```
User=> 
  has_many :user_favorite_foods, :dependent => :destroy
  has_many :foods, :through => :user_favorite_foods

Food=>
  has_many :user_favorite_foods, :dependent => :destroy
  has_many :users, :through => :user_favorite_foods  

UserFavoriteFoods =>
  belongs_to :user
  belongs_to :food 
```

然后在你的（我假设 User#Show）视图中，你可以做这样的事情

```
<% @user.foods.each do |food| %>
 <li><%= food.name %></li>
<% end %> 
```

编辑=>

您还可以使用 gem like`simple_form`并将其应用于您的用户表单。

在这种列表中使用`f.association :foods`会自动弹出一个选择框，让您的用户轻松选择不同的食物。

# algorithm - Making a multiway tree a heap after a node's key has changed?

> ID：15052567
> 
> 赞同：3
> 
> 时间：2013-02-24T14:14:22.123
> 
> 标签：algorithm, recursion, tree, heap, multiway-tree

![enter image description here](../Images/56a63de9b082054a35751cda0dae07f9.png)

The tree has invariance that the parent node must always be smaller than its child, like the image shown above. Now suppose some of the node's key has changed and breaks the invariance and I want to maintain the invariance. I think it's basically compare-swap every child of a parent node but I can't figure out how to write the recursion to traverse the tree. It seems different from binary tree I learnt before...

Btw each node has no index but only three pointers: parent, leftChild, rightSibling. If the node is root, its parent point to NULL; if the node is the right most node, its rightSibling points to NULL... Can anyone shed some light on this? Thx in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:45:14.053

首先，将这种多路树表示为二叉树称为[左子/右兄弟表示](https://stackoverflow.com/questions/14015525/what-is-the-left-child-right-sibling-representation-of-a-tree-why-would-you-us)，并且与正常的多路树表示有一些折衷。这个较旧的问题/答案可能会提供一些有关如何递归遍历这些树的背景。

至于您的问题：节点的值更改有两种可能的结果：

*   如果节点的值*下降了*，那么您可能需要向上交换它，直到它的值不再小于其父节点。
*   如果节点的值已经*上升*，那么您可能需要将其与其最小的子节点交换，直到该值不再大于其任何子节点。

编写此递归的一种方法是分两遍处理树，在每遍中检查这两种情况之一。没有根本原因不能将这些通道组合在一起，但为了简单起见，我将分别处理每个通道。

在第一种情况下，我们可能需要将一个节点与其父节点交换，因为它的值已经减少。在这种情况下，我们需要模拟某种树遍历，其中我们首先处理所有子节点，然后处理节点本身。这样，如果一个值需要在多个级别上交换到根，我们可以递归地将其提升到可能的最高级别而不越过根，然后再提升一个级别。如果我们有一个标准的多路树，递归将如下所示：

```
void FixTreeUpward(TreeNode curr) {
    /* If the current node is null, we're done. */
    if (curr == null) return;

    /* Process each child. */
    for (TreeNode child that is a child of curr) {
        FixTreeUpwardRec(child);
    }

    /* If we need to swap values with our parent, do so here. */
    if (curr.parent != null && curr.value < curr.parent.value) {
        swap(curr.value, parent.value);
    }
} 
```

由于我们使用的是多路树的左子右兄弟表示，中间的 for 循环看起来有点奇怪。我们首先下降到左边的孩子，然后继续向右，直到我们用完节点。在伪代码中：

```
void FixTreeUpward(TreeNode curr) {
    /* If the current node is null, we're done. */
    if (curr == null) return;

    /* Process each child. */
    for (TreeNode child = curr.left; child != null; child = child.right) {
        FixTreeUpwardRec(child);
    }

    /* If we need to swap values with our parent, do so here. */
    if (curr.parent != null && curr.value < curr.parent.value) {
        swap(curr.value, parent.value);
    }
} 
```

这里的所有都是它的！从概念上讲，递归并不是那么难，唯一奇怪的部分是我们如何访问孩子。

让我们考虑一下算法的第二部分，如果有必要，我们必须冒泡。为此，我们将执行以下操作：对于每个节点，查看其所有子节点并找到具有最小值的子节点。如果该值小于根节点的值，则将树的根与该子节点交换，然后重复。在伪代码中：

```
void FixTreeDownward(TreeNode root) {
    /* If the root is null, we have nothing to do. */
    if (root == null) return;

    /* Find the smallest child. */
    TreeNode smallChild = (root's first child, or null if none exists);

    for (TreeNode child in the children of the root) {
        if (child.value < smallChild.value) {
            smallChild = child.value;
        }
    }

    /* If we have a smallest child and it's smaller than our value,
     * swap values and recursively repeat this.
     */
    if (smallChild != null && smallChild.value < root.value) {
        swap(smallChild.value, root.value);
        FixTreeDownward(smallChild);
    }
} 
```

所以这里唯一的问题是现在迭代所有的孩子，幸运的是，这并不难！和以前一样，我们下降到左子树，然后继续向右，直到我们用完节点。这显示在这里：

```
void FixTreeDownward(TreeNode root) {
    /* If the root is null, we have nothing to do. */
    if (root == null) return;

    /* Find the smallest child. */
    TreeNode smallChild = root.left;

    for (TreeNode child = root.left; child != null; child = child.right) {
        if (child.value < smallChild.value) {
            smallChild = child;
        }
    }

    /* If we have a smallest child and it's smaller than our value,
     * swap values and recursively repeat this.
     */
    if (smallChild != null && smallChild.value < root.value) {
        swap(smallChild.value, root.value);
        FixTreeDownward(smallChild);
    }
} 
```

我们应该都准备好了！

希望这可以帮助！

# mysql - 将数据从数据网格复制到数据库表时出现无效操作异常

> ID：15052572
> 
> 赞同：1
> 
> 时间：2013-02-24T14:15:07.047
> 
> 标签：mysql, c#-4.0, datagridview, invalidoperationexception

我正在将数据从 a 复制`DataGridView`到数据库表名 test1，但引发了*无效操作异常*。我该如何解决？

```
foreach (DataGridViewRow row in dataGridView2.Rows)
{
    string mysqlStatement = "INSERT INTO test1(Paper, Authors, ID, GSCitations)VALUES("+row.Cells[0]+","+row.Cells[1]+","+row.Cells[2]+","+row.Cells[3]+");";
    MySqlCommand mysqlCmd = new MySqlCommand(mysqlStatement, connection);
    mysqlCmd.ExecuteNonQuery();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:18:46.283

首先，你有一个错字，在`VALUES`.

然后，根据所写的列，我认为你有一个`varchar`数据类型，你应该把它们的值放在引号之间。不知何故像这样

```
 string mysqlStatement = "INSERT INTO test1(Paper, Authors, ID, GSCitations) 
    VALUES('" + row.Cells[0].Value + "','" + row.Cells[1].Value + "'," 
    + row.Cells[2].Value + ",'" + row.Cells[3].Value + "');"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T14:21:40.327

您需要在 SQL 和 C# 代码中用引号将任何字符串值括起来。我假设该 ID 是数字，因此没有将单元格 2 括在引号中。

```
 string mysqlStatement = "INSERT INTO test1(Paper, Authors, ID, GSCitations) VALUES ('"+row.Cells[0]+"','"+row.Cells[1]+"',"+row.Cells[2]+",'"+row.Cells[3]+"');"; 
```

# ruby-on-rails - How to maintain older releases of application which capistrano cloned

> ID：15052573
> 
> 赞同：0
> 
> 时间：2013-02-24T14:15:19.493
> 
> 标签：ruby-on-rails, capistrano

I would like to prune older versions of my application under `releases` folder to just maintain the last 5 versions of my application. Currently it contains a lot of releases from the beginning. I don't want do this manually by doing a remote login and remove older folders, but would like it automated as part of `Capfile`, how should I do this.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T14:27:10.503

在`config/deploy.rb`你可以设置`:keep_releases`选项

```
set :keep_releases, 5 
```

# android - Prevent Android orientation change on certain devices

> ID：15052576
> 
> 赞同：5
> 
> 时间：2013-02-24T14:15:57.457
> 
> 标签：android, layout, orientation

I know you can restrict orientation change in manifest file for your Android application, but I was wondering if there is a way of doing that depending on the device type/size.

I would like to prevent it on small/medium phones but allow it on large phones/tablets.

What is the best way to achieve that? Any help would be much appreciated.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T14:21:27.457

为此，我认为您需要将两件事合二为一。

1.  一、获取设备屏幕尺寸
2.  然后，根据结果，启用或禁用方向。

对于第一部分：

```
int screenSize = getResources().getConfiguration().screenLayout &
        Configuration.SCREENLAYOUT_SIZE_MASK;

switch(screenSize) {
    case Configuration.SCREENLAYOUT_SIZE_LARGE:
        Toast.makeText(this, "Large screen",Toast.LENGTH_LONG).show();
        break;
    case Configuration.SCREENLAYOUT_SIZE_NORMAL:
        Toast.makeText(this, "Normal screen",Toast.LENGTH_LONG).show();
        break;
    case Configuration.SCREENLAYOUT_SIZE_SMALL:
        Toast.makeText(this, "Small screen",Toast.LENGTH_LONG).show();
        break;
    default:
        Toast.makeText(this, "Screen size is neither large, normal or small" , Toast.LENGTH_LONG).show();
} 
```

**信用：[https](https://stackoverflow.com/a/11252278/450534)** ://stackoverflow.com/a/11252278/450534 （*解决方案在 SO 上很容易获得*）

最后，根据上述代码的结果，其中之一：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

或者

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T14:20:01.003

好吧，我可能是错的，但据我所知，没有直接的方法可以做到这一点。

您需要以编程方式检查屏幕尺寸，并在此基础上允许或禁止方向更改。

```
if ((getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_LARGE) 
{     
    // screen is large.. allow orientation changes
}

else
{
       //restrict orientation 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T14:21:27.097

您可以在活动期间使用`onCreate`检查您拥有的设备尺寸并调用该方法`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);`（或您想要该尺寸的任何方向）。

请注意，如果活动不在请求的方向上，则该活动将被销毁并创建一个新活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T14:21:27.190

检查代码中的屏幕尺寸并决定

setRequestedOrientation();

或不

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T14:23:58.500

您需要覆盖公共空白`onConfigurationChanged(Configuration newConfig)`并创建自己的逻辑来检查密度和屏幕尺寸。

但请注意.. 这不是一个好习惯。

# r - Lapply slows with increasing loops

> ID：15052578
> 
> 赞同：4
> 
> 时间：2013-02-24T14:16:07.833
> 
> 标签：r

**Introduction**

I've been writing a program that processes some Raw data and then passes it through several statistical processes. All in all it uses several instances of "lapply".

**For example**: in one part of the script I use a function known as Maxstat (note the function only takes data either as data.frame or data.table - will not accept a matrix).

**

*   **REPRODUCIBLE SAMPLE below - just copy all sample data, and two parts of the code**

**

**Sample data:**

The first two columns are neccesary. This is the large data sample seen below --> please read on after the sample

```
Genedata <- structure(list(time = c(120, 120, 28.96, 119.21, 59.53, 68.81, 
82.29, 110.82, 65.88, 84.13, 16.47, 89.75, 76.07, 67.82, 52.24, 
64.1, 55.13, 57.79, 50.1, 43.79, 30.27, 3.64, 36.59, 20.02, 118.58, 
55.33, 120, 120, 120, 106.94, 11.7, 28.79, 26.82, 52.5, 24.03, 
88.99, 102.44, 33.73, 85.28, 26.53, 37.31, 86.43, 55.92, 70.65, 
76.04, 79.13, 83.99, 80.25, 40.6, 95.37, 31.06, 37.31, 22.02, 
63.25, 34.09, 52.14, 66.04, 59.96, 47.86, 58.45, 45.99, 60.42, 
37.67, 15.71, 39.25, 49.87, 25.24, 44.97, 35.9, 26.66, 36.78, 
41.52, 22.22, 33.2, 39.68, 25.61, 83.99, 15.05, 8.38, 18.18, 
27.15, 24.26, 105.17, 11.76, 70.45, 95.07, 112.33, 27.51, 45.92, 
54.04, 103.98, 6.11, 99.51, 20.44, 76.6, 10.02, 41.45, 96.26, 
85.61, 78.87, 22.25, 74.53, 59.07, 47.8, 5.68, 79.39, 74.07, 
50.76, 67.82, 70.84, 50.59, 34.58, 38.72, 54.9, 67.92, 58.45, 
59.34, 54.54, 19.03, 26.26, 52.86, 32.05, 55.95, 56.67, 50.43, 
4.24, 49.11, 49.57, 50.49, 63.05, 49.24, 0.92, 31.36, 40.3, 116.64, 
31.92, 19.98, 24.62, 18.54, 120, 17.62, 5.32, 2.36, 5.72, 15.28, 
95.07, 4.96, 28.89, 3.25, 0.92, 18.77, 57.73, 14.39, 5.12, 4.99, 
33.17, 50.53, 5.72, 8.02, 34.02, 1.44, 36.95, 60.75, 37.44, 23.07, 
19.85, 31.85, 8.61, 42.27, 15.25, 14.56, 9.96, 8.94, 32.67, 2.07, 
22.78, 22.35), cens = c(0L, 0L, NA, 0L, 0L, 1L, 0L, 0L, NA, 0L, 
NA, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 1L, 1L, NA, 1L, 1L, 0L, 0L, 1L, 0L, 0L, 1L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, NA, 1L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, NA, 1L, 0L, 1L, 1L, 0L, 0L, 1L, 1L, 1L, 
0L, 1L, 0L, NA, 1L, 1L, 1L, 0L, 0L, 0L, NA, 0L, NA, NA, 1L, 0L, 
0L, 1L, 1L, 0L, 0L, 1L, NA, NA, 0L, 0L, 0L, 0L, 1L, NA, 0L, 1L, 
0L, 0L, 0L, NA, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
1L, 0L, 1L, 1L, 1L, 1L, 1L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, NA, 1L, 1L, 1L, 1L, NA, 0L, NA, 1L, 1L, 0L, 1L, 0L, 1L, 
1L, NA, 1L, 0L, 1L, 1L, 0L)), .Names = c("time", "cens"), class = "data.frame", row.names = c(NA, 
-177L)) 
```

To generate a larger set -> **First define the sample above as Genedata**

then the additional code (to change variable/column length, just change 1000 to 5000 or 50000 etc.

```
 data <- replicate(1000, abs(rnorm(177)))
    Genedata <- data.frame(Genedata, data)
library(data.table)
    Genedata2 <- data.table(Genedata) 
```

Then to calculate

```
 #Calculating Maxstat
    library(maxstat)
    maxstat.genes <- as.list( names(Genedata) )[-c(1:3)] #generate a list of column numbers
system.time(maxstat.estimate <-lapply( maxstat.genes, function (x)
{maxstat.test(Surv(time, cens) ~ get (x), data=Genedata2, smethod="LogRank",
pmethod="Lau94")})) 
```

I originally planned on using the for statement, as i'm familiar with it having a background in python. However, research has told me that using apply should be faster.

I also originally used data.frame, but switched to data.table as someone suggested this should be better for performance.

However, it seems there is still a significant problem with processing large datasets. Below is an explanation of why.

**Running 25 variables**

```
 user  system elapsed 
   0.04    0.00    0.05 
```

**Running 1000 variables**

```
 user  system elapsed 
   6.54    0.00    6.57 
```

**Running 5000 variables**

```
 user  system elapsed 
 132.89    0.00  133.02 
```

As you can see, the processing speed is not linear but rather begins to fall off at a staggering rate. Given that the dataset is 43000 variables long, I can only guess that it would take on the order of hours. Interestingly, if i manually divided the tables into small sets, and ran them individually, it would be faster.

I think it has something to do with copying increasingly larger data, but I' not sure how this could be fixed. I already tried the data.table and lapply. Any suggestions?

**Update 1:** Added sample data. Note to reproduce a larger dataset. You can copy columns 4 onwards and paste. Rows can also be copied down. Should work as far as i know.

**Update 2: Rprof on 1000 variables**

```
> Rprof(NULL)
> summaryRprof()
$by.self
                        self.time self.pct total.time total.pct
terms.formula                0.50    15.82       0.50     15.82
eval                         0.34    10.76       1.92     60.76
Surv                         0.12     3.80       0.20      6.33
.deparseOpts                 0.12     3.80       0.18      5.70
deparse                      0.08     2.53       0.32     10.13
na.omit.data.frame           0.08     2.53       0.30      9.49
lapply                       0.06     1.90       3.16    100.00
maxstat.test                 0.06     1.90       3.16    100.00
maxstat.test.data.frame      0.06     1.90       3.10     98.10
model.frame.default          0.06     1.90       1.68     53.16
cmaxstat                     0.06     1.90       0.38     12.03
match.arg                    0.06     1.90       0.30      9.49
ifelse                       0.06     1.90       0.06      1.90
is.matrix                    0.06     1.90       0.06      1.90
length                       0.06     1.90       0.06      1.90
match                        0.06     1.90       0.06      1.90
pmatch                       0.06     1.90       0.06      1.90
FUN                          0.04     1.27       3.16    100.00
maxstat                      0.04     1.27       0.90     28.48
terms                        0.04     1.27       0.62     19.62
[.data.frame                 0.04     1.27       0.20      6.33
order                        0.04     1.27       0.08      2.53
[.formula                    0.04     1.27       0.06      1.90
[.Surv                       0.04     1.27       0.06      1.90
attr.all.equal               0.04     1.27       0.06      1.90
makepredictcall              0.04     1.27       0.06      1.90
unique                       0.04     1.27       0.06      1.90
unlist                       0.04     1.27       0.06      1.90
<Anonymous>                  0.04     1.27       0.04      1.27
is.data.frame                0.04     1.27       0.04      1.27
names                        0.04     1.27       0.04      1.27
NextMethod                   0.04     1.27       0.04      1.27
sum                          0.04     1.27       0.04      1.27
model.frame                  0.02     0.63       1.70     53.80
na.omit                      0.02     0.63       0.32     10.13
[                            0.02     0.63       0.30      9.49
cscores                      0.02     0.63       0.28      8.86
cscores.Surv                 0.02     0.63       0.26      8.23
all.equal                    0.02     0.63       0.14      4.43
all.equal.numeric            0.02     0.63       0.12      3.80
paste                        0.02     0.63       0.12      3.80
[[                           0.02     0.63       0.08      2.53
sort                         0.02     0.63       0.08      2.53
[[.data.frame                0.02     0.63       0.06      1.90
sort.int                     0.02     0.63       0.06      1.90
as.list                      0.02     0.63       0.04      1.27
as.vector                    0.02     0.63       0.04      1.27
get                          0.02     0.63       0.04      1.27
-                            0.02     0.63       0.02      0.63
$<-                          0.02     0.63       0.02      0.63
/                            0.02     0.63       0.02      0.63
anyDuplicated                0.02     0.63       0.02      0.63
as.environment               0.02     0.63       0.02      0.63
as.list.data.frame           0.02     0.63       0.02      0.63
attr                         0.02     0.63       0.02      0.63
attr<-                       0.02     0.63       0.02      0.63
c                            0.02     0.63       0.02      0.63
cbind                        0.02     0.63       0.02      0.63
data.class                   0.02     0.63       0.02      0.63
is.array                     0.02     0.63       0.02      0.63
makepredictcall.default      0.02     0.63       0.02      0.63
mode                         0.02     0.63       0.02      0.63
pLausen94                    0.02     0.63       0.02      0.63
sys.function                 0.02     0.63       0.02      0.63

$by.total
                        total.time total.pct self.time self.pct
lapply                        3.16    100.00      0.06     1.90
maxstat.test                  3.16    100.00      0.06     1.90
FUN                           3.16    100.00      0.04     1.27
maxstat.test.data.frame       3.10     98.10      0.06     1.90
eval                          1.92     60.76      0.34    10.76
model.frame                   1.70     53.80      0.02     0.63
model.frame.default           1.68     53.16      0.06     1.90
maxstat                       0.90     28.48      0.04     1.27
do.call                       0.90     28.48      0.00     0.00
terms                         0.62     19.62      0.04     1.27
terms.formula                 0.50     15.82      0.50    15.82
cmaxstat                      0.38     12.03      0.06     1.90
sapply                        0.34     10.76      0.00     0.00
deparse                       0.32     10.13      0.08     2.53
na.omit                       0.32     10.13      0.02     0.63
na.omit.data.frame            0.30      9.49      0.08     2.53
match.arg                     0.30      9.49      0.06     1.90
[                             0.30      9.49      0.02     0.63
cscores                       0.28      8.86      0.02     0.63
cscores.Surv                  0.26      8.23      0.02     0.63
Surv                          0.20      6.33      0.12     3.80
[.data.frame                  0.20      6.33      0.04     1.27
.deparseOpts                  0.18      5.70      0.12     3.80
all.equal                     0.14      4.43      0.02     0.63
all.equal.numeric             0.12      3.80      0.02     0.63
paste                         0.12      3.80      0.02     0.63
order                         0.08      2.53      0.04     1.27
[[                            0.08      2.53      0.02     0.63
sort                          0.08      2.53      0.02     0.63
ifelse                        0.06      1.90      0.06     1.90
is.matrix                     0.06      1.90      0.06     1.90
length                        0.06      1.90      0.06     1.90
match                         0.06      1.90      0.06     1.90
pmatch                        0.06      1.90      0.06     1.90
[.formula                     0.06      1.90      0.04     1.27
[.Surv                        0.06      1.90      0.04     1.27
attr.all.equal                0.06      1.90      0.04     1.27
makepredictcall               0.06      1.90      0.04     1.27
unique                        0.06      1.90      0.04     1.27
unlist                        0.06      1.90      0.04     1.27
[[.data.frame                 0.06      1.90      0.02     0.63
sort.int                      0.06      1.90      0.02     0.63
%in%                          0.06      1.90      0.00     0.00
simplify2array                0.06      1.90      0.00     0.00
sort.default                  0.06      1.90      0.00     0.00
<Anonymous>                   0.04      1.27      0.04     1.27
is.data.frame                 0.04      1.27      0.04     1.27
names                         0.04      1.27      0.04     1.27
NextMethod                    0.04      1.27      0.04     1.27
sum                           0.04      1.27      0.04     1.27
as.list                       0.04      1.27      0.02     0.63
as.vector                     0.04      1.27      0.02     0.63
get                           0.04      1.27      0.02     0.63
-                             0.02      0.63      0.02     0.63
$<-                           0.02      0.63      0.02     0.63
/                             0.02      0.63      0.02     0.63
anyDuplicated                 0.02      0.63      0.02     0.63
as.environment                0.02      0.63      0.02     0.63
as.list.data.frame            0.02      0.63      0.02     0.63
attr                          0.02      0.63      0.02     0.63
attr<-                        0.02      0.63      0.02     0.63
c                             0.02      0.63      0.02     0.63
cbind                         0.02      0.63      0.02     0.63
data.class                    0.02      0.63      0.02     0.63
is.array                      0.02      0.63      0.02     0.63
makepredictcall.default       0.02      0.63      0.02     0.63
mode                          0.02      0.63      0.02     0.63
pLausen94                     0.02      0.63      0.02     0.63
sys.function                  0.02      0.63      0.02     0.63
formals                       0.02      0.63      0.00     0.00
is.na                         0.02      0.63      0.00     0.00
is.na.Surv                    0.02      0.63      0.00     0.00
rowSums                       0.02      0.63      0.00     0.00

$sample.interval
[1] 0.02

$sampling.time
[1] 3.16 
```

**Update 3 - Rprof on 5000 variables - as you can see its not linear increase**

```
> Rprof(NULL)
> summaryRprof()
$by.self
                        self.time self.pct total.time total.pct
eval                        11.28    32.83      23.40     68.10
terms.formula               11.00    32.01      11.08     32.25
model.frame.default          0.68     1.98      22.38     65.13
deparse                      0.68     1.98       1.70      4.95
cmaxstat                     0.46     1.34       2.38      6.93
.deparseOpts                 0.44     1.28       0.74      2.15
na.omit.data.frame           0.40     1.16       1.74      5.06
[.data.frame                 0.36     1.05       1.06      3.08
maxstat.test.data.frame      0.32     0.93      34.16     99.42
pmatch                       0.32     0.93       0.34      0.99
match                        0.28     0.81       0.60      1.75
NextMethod                   0.28     0.81       0.28      0.81
na.omit                      0.26     0.76       2.00      5.82
Surv                         0.26     0.76       0.54      1.57
get                          0.26     0.76       0.28      0.81
unique                       0.24     0.70       0.46      1.34
makepredictcall              0.24     0.70       0.36      1.05
order                        0.24     0.70       0.34      0.99
match.arg                    0.22     0.64       1.26      3.67
[.Surv                       0.22     0.64       0.40      1.16
lapply                       0.20     0.58      34.36    100.00
paste                        0.20     0.58       0.90      2.62
maxstat                      0.18     0.52       4.50     13.10
[                            0.18     0.52       1.54      4.48
cscores                      0.18     0.52       1.26      3.67
$<-                          0.18     0.52       0.18      0.52
terms                        0.16     0.47      11.46     33.35
sort.int                     0.16     0.47       0.46      1.34
cbind                        0.16     0.47       0.16      0.47
is.matrix                    0.16     0.47       0.16      0.47
length                       0.16     0.47       0.16      0.47
[[.data.frame                0.14     0.41       0.34      0.99
FUN                          0.12     0.35      34.26     99.71
all.equal.numeric            0.12     0.35       0.24      0.70
c                            0.12     0.35       0.12      0.35
ifelse                       0.12     0.35       0.12      0.35
is.data.frame                0.12     0.35       0.12      0.35
makepredictcall.default      0.12     0.35       0.12      0.35
names                        0.12     0.35       0.12      0.35
cscores.Surv                 0.10     0.29       1.08      3.14
%in%                         0.10     0.29       0.70      2.04
all.equal                    0.10     0.29       0.40      1.16
mode                         0.10     0.29       0.34      0.99
unlist                       0.10     0.29       0.20      0.58
unique.default               0.10     0.29       0.16      0.47
as.list                      0.10     0.29       0.10      0.29
dim                          0.10     0.29       0.10      0.29
is.factor                    0.10     0.29       0.10      0.29
parent.frame                 0.10     0.29       0.10      0.29
model.frame                  0.08     0.23      22.46     65.37
is.na                        0.08     0.23       0.18      0.52
duplicated                   0.08     0.23       0.12      0.35
maxstat.test                 0.06     0.17      34.22     99.59
sapply                       0.06     0.17       1.72      5.01
sort                         0.06     0.17       0.52      1.51
pLausen94                    0.06     0.17       0.22      0.64
anyDuplicated                0.06     0.17       0.10      0.29
which                        0.06     0.17       0.10      0.29
ncol                         0.06     0.17       0.08      0.23
rowSums                      0.06     0.17       0.08      0.23
*                            0.06     0.17       0.06      0.17
/                            0.06     0.17       0.06      0.17
environment                  0.06     0.17       0.06      0.17
is.ordered                   0.06     0.17       0.06      0.17
list                         0.06     0.17       0.06      0.17
do.call                      0.04     0.12       4.56     13.27
[[                           0.04     0.12       0.38      1.11
attr.all.equal               0.04     0.12       0.10      0.29
formals                      0.04     0.12       0.08      0.23
!                            0.04     0.12       0.04      0.12
.Call                        0.04     0.12       0.04      0.12
<Anonymous>                  0.04     0.12       0.04      0.12
anyDuplicated.default        0.04     0.12       0.04      0.12
duplicated.default           0.04     0.12       0.04      0.12
floor                        0.04     0.12       0.04      0.12
is.array                     0.04     0.12       0.04      0.12
match.fun                    0.04     0.12       0.04      0.12
options                      0.04     0.12       0.04      0.12
pnorm                        0.04     0.12       0.04      0.12
seq.default                  0.04     0.12       0.04      0.12
sys.call                     0.04     0.12       0.04      0.12
simplify2array               0.02     0.06       0.52      1.51
[.formula                    0.02     0.06       0.14      0.41
is.na.Surv                   0.02     0.06       0.10      0.29
sys.function                 0.02     0.06       0.04      0.12
&                            0.02     0.06       0.02      0.06
.row_names_info              0.02     0.06       0.02      0.06
^                            0.02     0.06       0.02      0.06
<                            0.02     0.06       0.02      0.06
<=                           0.02     0.06       0.02      0.06
==                           0.02     0.06       0.02      0.06
as.environment               0.02     0.06       0.02      0.06
attr<-                       0.02     0.06       0.02      0.06
baseenv                      0.02     0.06       0.02      0.06
data.class                   0.02     0.06       0.02      0.06
is.numeric                   0.02     0.06       0.02      0.06
sqrt                         0.02     0.06       0.02      0.06
sum                          0.02     0.06       0.02      0.06
sys.parent                   0.02     0.06       0.02      0.06

$by.total
                        total.time total.pct self.time self.pct
lapply                       34.36    100.00      0.20     0.58
FUN                          34.26     99.71      0.12     0.35
maxstat.test                 34.22     99.59      0.06     0.17
maxstat.test.data.frame      34.16     99.42      0.32     0.93
eval                         23.40     68.10     11.28    32.83
model.frame                  22.46     65.37      0.08     0.23
model.frame.default          22.38     65.13      0.68     1.98
terms                        11.46     33.35      0.16     0.47
terms.formula                11.08     32.25     11.00    32.01
do.call                       4.56     13.27      0.04     0.12
maxstat                       4.50     13.10      0.18     0.52
cmaxstat                      2.38      6.93      0.46     1.34
na.omit                       2.00      5.82      0.26     0.76
na.omit.data.frame            1.74      5.06      0.40     1.16
sapply                        1.72      5.01      0.06     0.17
deparse                       1.70      4.95      0.68     1.98
[                             1.54      4.48      0.18     0.52
match.arg                     1.26      3.67      0.22     0.64
cscores                       1.26      3.67      0.18     0.52
cscores.Surv                  1.08      3.14      0.10     0.29
[.data.frame                  1.06      3.08      0.36     1.05
paste                         0.90      2.62      0.20     0.58
.deparseOpts                  0.74      2.15      0.44     1.28
%in%                          0.70      2.04      0.10     0.29
match                         0.60      1.75      0.28     0.81
Surv                          0.54      1.57      0.26     0.76
sort                          0.52      1.51      0.06     0.17
simplify2array                0.52      1.51      0.02     0.06
unique                        0.46      1.34      0.24     0.70
sort.int                      0.46      1.34      0.16     0.47
sort.default                  0.46      1.34      0.00     0.00
[.Surv                        0.40      1.16      0.22     0.64
all.equal                     0.40      1.16      0.10     0.29
[[                            0.38      1.11      0.04     0.12
makepredictcall               0.36      1.05      0.24     0.70
pmatch                        0.34      0.99      0.32     0.93
order                         0.34      0.99      0.24     0.70
[[.data.frame                 0.34      0.99      0.14     0.41
mode                          0.34      0.99      0.10     0.29
NextMethod                    0.28      0.81      0.28     0.81
get                           0.28      0.81      0.26     0.76
all.equal.numeric             0.24      0.70      0.12     0.35
pLausen94                     0.22      0.64      0.06     0.17
unlist                        0.20      0.58      0.10     0.29
$<-                           0.18      0.52      0.18     0.52
is.na                         0.18      0.52      0.08     0.23
cbind                         0.16      0.47      0.16     0.47
is.matrix                     0.16      0.47      0.16     0.47
length                        0.16      0.47      0.16     0.47
unique.default                0.16      0.47      0.10     0.29
[.formula                     0.14      0.41      0.02     0.06
c                             0.12      0.35      0.12     0.35
ifelse                        0.12      0.35      0.12     0.35
is.data.frame                 0.12      0.35      0.12     0.35
makepredictcall.default       0.12      0.35      0.12     0.35
names                         0.12      0.35      0.12     0.35
duplicated                    0.12      0.35      0.08     0.23
as.list                       0.10      0.29      0.10     0.29
dim                           0.10      0.29      0.10     0.29
is.factor                     0.10      0.29      0.10     0.29
parent.frame                  0.10      0.29      0.10     0.29
anyDuplicated                 0.10      0.29      0.06     0.17
which                         0.10      0.29      0.06     0.17
attr.all.equal                0.10      0.29      0.04     0.12
is.na.Surv                    0.10      0.29      0.02     0.06
ncol                          0.08      0.23      0.06     0.17
rowSums                       0.08      0.23      0.06     0.17
formals                       0.08      0.23      0.04     0.12
as.vector                     0.08      0.23      0.00     0.00
*                             0.06      0.17      0.06     0.17
/                             0.06      0.17      0.06     0.17
environment                   0.06      0.17      0.06     0.17
is.ordered                    0.06      0.17      0.06     0.17
list                          0.06      0.17      0.06     0.17
nrow                          0.06      0.17      0.00     0.00
!                             0.04      0.12      0.04     0.12
.Call                         0.04      0.12      0.04     0.12
<Anonymous>                   0.04      0.12      0.04     0.12
anyDuplicated.default         0.04      0.12      0.04     0.12
duplicated.default            0.04      0.12      0.04     0.12
floor                         0.04      0.12      0.04     0.12
is.array                      0.04      0.12      0.04     0.12
match.fun                     0.04      0.12      0.04     0.12
options                       0.04      0.12      0.04     0.12
pnorm                         0.04      0.12      0.04     0.12
seq.default                   0.04      0.12      0.04     0.12
sys.call                      0.04      0.12      0.04     0.12
sys.function                  0.04      0.12      0.02     0.06
getOption                     0.04      0.12      0.00     0.00
irank                         0.04      0.12      0.00     0.00
seq                           0.04      0.12      0.00     0.00
&                             0.02      0.06      0.02     0.06
.row_names_info               0.02      0.06      0.02     0.06
^                             0.02      0.06      0.02     0.06
<                             0.02      0.06      0.02     0.06
<=                            0.02      0.06      0.02     0.06
==                            0.02      0.06      0.02     0.06
as.environment                0.02      0.06      0.02     0.06
attr<-                        0.02      0.06      0.02     0.06
baseenv                       0.02      0.06      0.02     0.06
data.class                    0.02      0.06      0.02     0.06
is.numeric                    0.02      0.06      0.02     0.06
sqrt                          0.02      0.06      0.02     0.06
sum                           0.02      0.06      0.02     0.06
sys.parent                    0.02      0.06      0.02     0.06
match.call                    0.02      0.06      0.00     0.00

$sample.interval
[1] 0.02

$sampling.time
[1] 34.36 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T16:17:12.140

对于为什么 lapply 的时间不是线性的，我没有完整的答案，但请注意，您通过应用变量名称列表（然后使用这些名称来索引实际值）将 lapply 用作美化循环而不是而不是应用一个值列表。我不确定如何使用 lapply 来解决这个问题，但我可以提供一个替代方案，即（大致）变量数量的线性函数。

首先创建示例数据：

```
Genedata <- structure(list(time = c(120, 120, 28.96, 119.21, 59.53, 68.81, 
82.29, 110.82, 65.88, 84.13, 16.47, 89.75, 76.07, 67.82, 52.24, 
64.1, 55.13, 57.79, 50.1, 43.79, 30.27, 3.64, 36.59, 20.02, 118.58, 
55.33, 120, 120, 120, 106.94, 11.7, 28.79, 26.82, 52.5, 24.03, 
88.99, 102.44, 33.73, 85.28, 26.53, 37.31, 86.43, 55.92, 70.65, 
76.04, 79.13, 83.99, 80.25, 40.6, 95.37, 31.06, 37.31, 22.02, 
63.25, 34.09, 52.14, 66.04, 59.96, 47.86, 58.45, 45.99, 60.42, 
37.67, 15.71, 39.25, 49.87, 25.24, 44.97, 35.9, 26.66, 36.78, 
41.52, 22.22, 33.2, 39.68, 25.61, 83.99, 15.05, 8.38, 18.18, 
27.15, 24.26, 105.17, 11.76, 70.45, 95.07, 112.33, 27.51, 45.92, 
54.04, 103.98, 6.11, 99.51, 20.44, 76.6, 10.02, 41.45, 96.26, 
85.61, 78.87, 22.25, 74.53, 59.07, 47.8, 5.68, 79.39, 74.07, 
50.76, 67.82, 70.84, 50.59, 34.58, 38.72, 54.9, 67.92, 58.45, 
59.34, 54.54, 19.03, 26.26, 52.86, 32.05, 55.95, 56.67, 50.43, 
4.24, 49.11, 49.57, 50.49, 63.05, 49.24, 0.92, 31.36, 40.3, 116.64, 
31.92, 19.98, 24.62, 18.54, 120, 17.62, 5.32, 2.36, 5.72, 15.28, 
95.07, 4.96, 28.89, 3.25, 0.92, 18.77, 57.73, 14.39, 5.12, 4.99, 
33.17, 50.53, 5.72, 8.02, 34.02, 1.44, 36.95, 60.75, 37.44, 23.07, 
19.85, 31.85, 8.61, 42.27, 15.25, 14.56, 9.96, 8.94, 32.67, 2.07, 
22.78, 22.35), cens = c(0L, 0L, NA, 0L, 0L, 1L, 0L, 0L, NA, 0L, 
NA, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 1L, 1L, NA, 1L, 1L, 0L, 0L, 1L, 0L, 0L, 1L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, NA, 1L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, NA, 1L, 0L, 1L, 1L, 0L, 0L, 1L, 1L, 1L, 
0L, 1L, 0L, NA, 1L, 1L, 1L, 0L, 0L, 0L, NA, 0L, NA, NA, 1L, 0L, 
0L, 1L, 1L, 0L, 0L, 1L, NA, NA, 0L, 0L, 0L, 0L, 1L, NA, 0L, 1L, 
0L, 0L, 0L, NA, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
1L, 0L, 1L, 1L, 1L, 1L, 1L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, NA, 1L, 1L, 1L, 1L, NA, 0L, NA, 1L, 1L, 0L, 1L, 0L, 1L, 
1L, NA, 1L, 0L, 1L, 1L, 0L)), .Names = c("time", "cens"), class = "data.frame", row.names = c(NA, 
-177L))

data <- replicate(10000, abs(rnorm(177)))
Genedata <- data.frame(Genedata, data) 
```

我的方法是使用`melt`reshape2 包中的函数重塑数据，然后使用`dlply`plyr 包在每个子集上运行模型。

```
ibrary(maxstat)
library(plyr)
library(reshape2)

system.time({
  dat.m <- melt(Genedata, id.vars=1:3)
  maxstat.estimate <- dlply(dat.m, .(variable), function(DF) {
  maxstat.test(Surv(time, cens) ~ value, smethod="LogRank", pmethod="Lau94", data=DF)})}) 
```

这种方法的一些时间安排如下：

```
## 1000 variables
##    user  system elapsed 
##  11.613   0.090  11.780 

## 2000 variables
##   user  system elapsed
## 23.847   0.060  24.043

## 3000 variables
##    user  system elapsed 
##  35.316   0.093  35.905

## 10000 variables
##    user  system elapsed 
## 120.654   0.594 122.140 
```

表明系统时间大致是变量数量的线性函数。

完整的 43000 个变量只需要 10 多分钟，刚好够喝一杯咖啡的时间：

```
## 43000
##    user  system elapsed 
## 612.587   3.134 630.464 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:37:30.377

我在我的机器上看不到任何非线性行为：

```
library(maxstat)
genes <- names(Genedata)[-(1:3)]

time_it <- function(f, vars = c(25, 100, 500, 999)) {
  names(vars) <- vars
  sapply(vars, function(x) system.time(lapply(genes[1:x], f))[3]) / vars
}

fit_model <- function(var) {
  maxstat.test(Surv(time, cens) ~ get(var), data = Genedata, 
    smethod = "LogRank", pmethod = "Lau94")
}
time_it(fit_model)
#  25.elapsed 100.elapsed 500.elapsed 999.elapsed 
#    1.800000    1.790000    1.812000    1.857858 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T05:05:49.783

您提到了切换到`data.table`，但看起来您并没有充分利用它。这里的关键是将表格重塑为“长”格式，然后用于对变量`data.table`进行分组。`by`从你的例子中挑选`Genedata`......

```
library(data.table)
library(maxstat)
system.time({

## Convert to a "long" data.table format: 
Genedata2 <- data.table(time=rep(Genedata[[1]],ncol(Genedata)-2),
                        cens=rep(Genedata[[2]],ncol(Genedata)-2),
                        variable=rep(1:(ncol(Genedata)-2), each=nrow(Genedata)),
                        value=as.vector(as.matrix(Genedata[3:ncol(Genedata)])))

## Calculate the maxstat.test by each variable:
maxstat.estimate2 <- Genedata2[,list(ans=list(maxstat.test(Surv(time, cens) ~ value,
                     data=.SD, smethod="LogRank", pmethod="Lau94"))), by="variable"]
})

## 1,000 variables:
##  user  system elapsed 
##  2.01    0.00    2.01

## 5,000 variables:
##  user  system elapsed 
## 12.17    0.00   12.17

## 10,000 variables:
##  user  system elapsed 
## 21.19    0.07   21.25

## 43,000 variables:
##  user  system elapsed 
## 96.91    0.21   97.22 
```

如果您正在对相同数据进行其他计算，您可以将它们作为新列添加到创建 maxstat.estimate2 表 ( `list(ans=..., calc2=..., calc3=..., etc.)`) 的代码行中。

# javascript - How to tell if new location is forcing file download?

> ID：15052581
> 
> 赞同：2
> 
> 时间：2013-02-24T14:16:21.233
> 
> 标签：javascript

I am redirecting user using `window.location.href` to a page that forces a file download using the following headers:

```
Content-Description: File Transfer
Content-Disposition: attachment; filename="foo" 
```

As a result, user is not taken to the page, though asked if he wishes to proceed downloading the file.

How do I tell when the response from the server is received?

The user flow that I am trying to achieve:

1.  Display loader.
2.  "redirect" the user (with `window.location.href`).
3.  Hide loader when response is received.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T14:22:57.880

*   从您的客户端代码中，还将生成的 ID 传递给服务器，要求它为您设置一个 cookie 为该值。
*   您的服务器端代码应将 cookie 与下载的文件（在 HTTP 标头中）一起传回。
*   然后，您可以在重定向后轮询 javascript 中的 cookie，以查看服务器何时响应成功连接。

# objective-c - Cropping out a face using CoreImage

> ID：15052583
> 
> 赞同：1
> 
> 时间：2013-02-24T14:16:27.880
> 
> 标签：objective-c, crop, face-detection, core-image

I need to crop out a face/multiple faces from a given image and use the cropped face image for other use. I am using CIDetectorTypeFace from CoreImage. The problem is the new UIImage that contains just the detected face needs to be bigger in size as the hair is cut-off or the lower jaw is cut-off. How do i increase the size of the `initWithFrame:faceFeature.bounds` ?? Sample code i am using:

```
 CIImage* image = [CIImage imageWithCGImage:staticBG.image.CGImage];
    CIDetector* detector = [CIDetector detectorOfType:CIDetectorTypeFace
                                          context:nil options:[NSDictionary dictionaryWithObject:CIDetectorAccuracyHigh forKey:CIDetectorAccuracy]];
    NSArray* features = [detector featuresInImage:image];

    for(CIFaceFeature* faceFeature in features)
    {
       UIView* faceView = [[UIView alloc] initWithFrame:faceFeature.bounds];
       faceView.layer.borderWidth = 1;
       faceView.layer.borderColor = [[UIColor redColor] CGColor];
       [staticBG addSubview:faceView];

       // cropping the face
       CGImageRef imageRef = CGImageCreateWithImageInRect([staticBG.image CGImage], faceFeature.bounds);
       [resultView setImage:[UIImage imageWithCGImage:imageRef]];
       CGImageRelease(imageRef);
    } 
```

Note: The red frame that i made to show the detected face region does-not at all match with the cropped out image. Maybe i am not displaying the frame right but since i do not need to show the frame, i really need the cropped out face, i am not worrying about it much.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T15:12:33.533

不确定，但你可以试试

```
CGRect biggerRectangle = CGRectInset(faceFeature.bounds, someNegativeCGFloatToIncreaseSizeForXAxis, someNegativeCGFloatToIncreaseSizeForYAxis);
CGImageRef imageRef = CGImageCreateWithImageInRect([staticBG.image CGImage], biggerRectangle); 
```

[https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html#//apple_ref/c/func/CGRectInset](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html#//apple_ref/c/func/CGRectInset)

# php - garbled xml output

> ID：15052585
> 
> 赞同：1
> 
> 时间：2013-02-24T14:16:35.513
> 
> 标签：php, xml

I'm trying to parse an xml feed using PHP: [http://trustbox.trustpilot.com/r/travelnation.co.uk.xml](http://trustbox.trustpilot.com/r/travelnation.co.uk.xml)

Visiting this, it looks perfectly OK, but when I try

```
<?php
$file = file_get_contents("http://trustbox.trustpilot.com/r/netamity.com.xml");
print_r($file);
?> 
```

I get

```
‹•SÁŽÓ0=/ÿ`ŒÄmœ-  ë¸ŠàèJV«••L«ŽmÙN²ý{Æi·M
... 
```

How is it getting garbled? Using simplexml it wont parse it (unsurprisingly). I've tried setting headers UTF-8 headers but I think the issue is in the get_file_contents. Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:09:00.503

内容看起来很“奇怪”，仅仅是因为编码被压缩（参见 HTTP 标头`Content-Encoding: gzip`）。

```
HTTP/1.1 200 OK
x-amz-id-2: 8wYarFnod0jtLJ3U8ZDN38102fjtG+EbwJjy0tY4YTZncrz9auEcQbzt1vyiSEhq
x-amz-request-id: A60F1E6CA5437776
Date: Sun, 24 Feb 2013 18:00:45 GMT
Content-Encoding: gzip
Last-Modified: Sun, 24 Feb 2013 05:19:11 GMT
ETag: "64eaa6f87768aeb3ae6741ba06318cb6"
Accept-Ranges: bytes
Content-Type: application/xhtml+xml
Content-Length: 52366
Server: AmazonS3 
```

我想您需要知道如何通过 HTTP 读取文件；你可以在 SO 上试试[这个](https://stackoverflow.com/questions/11529583/how-to-download-a-file-over-https-using-php)。

# c++ - std::list::sort 和指向元素的指针

> ID：15052586
> 
> 赞同：0
> 
> 时间：2013-02-24T14:16:43.963
> 
> 标签：c++, list, sorting, pointers, reference

如果我在列表上调用 sort() 方法，指向 std::list 元素的指针是否仍然有效？这个（标准）有保证吗？它似乎在 Visual Studio 2012 下工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T14:22:43.973

来自“C++ 工作草案，2012-11-02”

> **23.3.5.5 列表操作[list.ops]**
> `void sort();`
> `template <class Compare> void sort(Compare comp);`
> 28 要求：（`operator<`对于第一个版本）或comp（对于第二个版本）应定义严格的弱排序（25.4）。
> **29 效果：根据`operator<`或`Compare`函数对象对列表进行排序。不影响迭代器和引用的有效性。**
> 30 备注：稳定。
> 31 复杂性：大约 N log(N ) 比较，其中`N == size()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T14:19:15.873

排序不会移动内存中列表的元素，只会更改下一个和上一个链接指针。应该没问题。

# php - Laravel Eloquent: Name attributes and db rows differently

> ID：15052588
> 
> 赞同：0
> 
> 时间：2013-02-24T14:17:17.027
> 
> 标签：php, laravel, eloquent, laravel-3

I've just started to create an application using the Laravel framework for the first time.

Eloquent seems to be a very powerful and code-saving tool, but I can't figure out how to use different attribute names in the model than in the database table.

Here my conflict:

**Database**: iddog, dtname, dtbirth, dtfoo, fimom, fidad
**Attributes**: id, name, birth, foo, mom, dad

Is there a possibility to do that in a model that extends from Eloquent in the Laravel framework? Naming attributes differently than the associated database fields?

Or isn't it cool anymore to call fields in a database table like I do here?

Thank's in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-02T22:52:03.607

现在，在 laravel 5.1 中，我们将其称为**Accessor**而不是 Getters & Setters。

所以这些天我们有访问器来创建像这样的新属性

```
public function getPlusFiveAttribute()
{
    return $this->plus_five + 5;
} 
```

不幸的是，如果您已经有一个名为“plus_five”的表字段 - 此访问器将不起作用。

你需要这样，它**有效**：

```
public function getPlusFiveAttribute()
{
    return $this->attributes['plus_five'] + 5;
} 
```

这是另一种**有效**的方法：

```
public function getPlusFiveAttribute($value)
{
    return $value + 5;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T14:25:07.013

为什么数据库的名称与您的模型不同？

虽然你可以做到——你只是为自己创造工作，并引入可能的新错误。只需使用数据库名称。

如果您必须检查[Getters & Setters](http://laravel.com/docs/database/eloquent#getter-and-setter-methods)。

# templates - Does anybody know how to add meta box template select to custom post type in Wordpress?

> ID：15052599
> 
> 赞同：1
> 
> 时间：2013-02-24T14:18:14.263
> 
> 标签：templates, wordpress-theming, custom-post-type, wordpress

does anybody know how I can achieve the following:

*   I have a custom post type called 'projects' I have 5 different page layouts (each with a different number of images at different sizes that are arranged differently). I think that if I can ID the images I can position them using CSS. If each layout has it's own template page with containers for the required images and each also has CSS to position the images.
*   I am wondering if it's possible to add a template select on right hand side of post editor view, like you have available for pages this way it's possible to assign a template (from 1-5) for each post.
*   I am adding custom meta boxes for the image upload fields and the other data in the main post editor, but ideally this should change for the other pages to only display the required upload fields.

Any ideas anybody? I did consider setting up a custom post type for each layout (the 5 templates) allowing you to post a new project under the layout type you require, then on the page query the loop with all 5 custom-post-types (layouts). I worry this might be messy though, because to find projects to edit later you will need to know which template page (custom-post-type) they belong to but more importantly the url to projects wouldn't be www.sitename.co.uk/projects but instead be www.sitename.co.uk/custom-post-type1, www.sitename.co.uk/custom-post-type2 ??? Wouldn't it?

Any help really appreciated as always. Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:37:26.687

这是我到目前为止确定的代码，有什么想法可以定制吗？

这应该放在functions.php中吗？

```
// Check if the post has a special template
$template = get_post_meta($post->ID, '_wp_mf_page_template', true);

if (!$template || $template == 'default') {
return;
}

$template = TEMPLATEPATH.'/'.$template;

if ( $template = apply_filters( 'template_include', $template ) ) {
include($template);
die();
}
return; 
```

第二个代码：

```
// Check if the post_type has page attributes
// if is the case is necessary need save the page_template
if ($_POST['post_type'] != 'page' && isset($_POST['page_template'])) {
  add_post_meta($post_id, '_wp_mf_page_template', $_POST['page_template'], true) or update_post_meta($post_id, '_wp_mf_page_template', $_POST['page_template']);
} 
```

第三个代码：

```
//MF Meta box for select template
function mf_metabox_template () {
global $post;

if ( 0 != count( get_page_templates() ) ) {

  $template = get_post_meta($post->ID, '_wp_mf_page_template', TRUE);
  $template =  ($template != '') ? $template : false;
?>
  <label class="screen-reader-text" for="page_template"><?php _e('Page Template') ?></label><select name="page_template" id="page_template">
  <option value='default'><?php _e('Default Template'); ?></option>
  <?php page_template_dropdown($template); ?>
  </select>
<?php  
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-28T13:22:28.717

您可以使用此代码创建元框。请将此代码粘贴到您的 function.php 中。

```
/*********************custom meta box********************************/
add_action( 'add_meta_boxes', 'add_events_metaboxes' );
function add_events_metaboxes() {
  add_meta_box('wpt_school_location', 'Business Listing Data:','wpt_school_location', 'businesses', 'side', 'default');
}
//add_meta_box( $id, $title, $callback, $page, $context, $priority, $callback_args ); 

// Add the Events Meta Boxes
// The Event Location Metabox

function wpt_school_location() {
  global $post;

  // Noncename needed to verify where the data originated
  echo '<input type="hidden" name="eventmeta_noncename" id="eventmeta_noncename" value="' . 
  wp_create_nonce( plugin_basename(__FILE__) ) . '" />';

  // Get the location data if its already been entered
  $email = get_post_meta($post->ID, '_location', true);
  $tel = get_post_meta($post->ID, '_location1', true);
  $web = get_post_meta($post->ID, '_location2', true);
  $city = get_post_meta($post->ID, '_location3', true);

  // Echo out the field
  echo '<div class="heading">Address</div>';
  echo '<input type="text" name="_location" value="' . $email  . '" class="widefat" />';
  echo '<div class="heading">Telephone</div>';
  echo '<input type="text" name="_location1" value="' . $tel  . '" class="widefat" />';
  echo '<div class="heading">E-mail</div>';
  echo '<input type="text" name="_location2" value="' . $web  . '" class="widefat" />';
  echo '<div class="heading">Web</div>';
  echo '<input type="text" name="_location3" value="' . $city  . '" class="widefat" />';
}

// Save the Metabox Data
function wpt_save_events_meta($post_id, $post) {
  // verify this came from the our screen and with proper authorization,
  // because save_post can be triggered at other times
  if ( !wp_verify_nonce( $_POST['eventmeta_noncename'], plugin_basename(__FILE__) )) {
    return $post->ID;
  }

  // Is the user allowed to edit the post or page?
  if ( !current_user_can( 'edit_post', $post->ID ))
    return $post->ID;

  // OK, we're authenticated: we need to find and save the data
  // We'll put it into an array to make it easier to loop though.

  $events_meta['_location'] = $_POST['_location'];
  $events_meta['_location1'] = $_POST['_location1'];
  $events_meta['_location2'] = $_POST['_location2'];
  $events_meta['_location3'] = $_POST['_location3'];

  // Add values of $events_meta as custom fields

  foreach ($events_meta as $key => $value) { // Cycle through the $events_meta array!
    if( $post->post_type == 'revision' ) return; // Don't store custom data twice
    $value = implode(',', (array)$value); // If $value is an array, make it a CSV (unlikely)
    if(get_post_meta($post->ID, $key, FALSE)) { // If the custom field already has a value
        update_post_meta($post->ID, $key, $value);
    } else { // If the custom field doesn't have a value
        add_post_meta($post->ID, $key, $value);
    }
    if(!$value) delete_post_meta($post->ID, $key); // Delete if blank
  }
}
add_action('save_post', 'wpt_save_events_meta', 1, 2); // save the custom fields
// Add the Events Meta Boxes 
```

# java - Java: error code 53 when creating user in Active Directory by Ldap

> ID：15052601
> 
> 赞同：1
> 
> 时间：2013-02-24T14:18:20.777
> 
> 标签：java, active-directory

i am trying to create an active User in Windows Active Directory by ldap in java.

my creation method is:

```
private Attributes createUserAttributes(String userName, String firstName, String lastName, String password) {
    Attributes container = new BasicAttributes();
    Attribute objClasses = new BasicAttribute("objectClass");
    Attribute userPassword = new BasicAttribute("userPassword", password);
    Attribute sAMAccountName = new BasicAttribute("SAMAccountName", userName);
    Attribute userPrincipialAttribute = new BasicAttribute("userPrincipalName", userName + "@" + DOMAIN_NAME);
    Attribute firstNameAttribute = new BasicAttribute("givenName", firstName);
    Attribute secondNameAttribute = new BasicAttribute("sn", lastName);
    Attribute activatedAccount = new BasicAttribute("userAccountControl", "512");

    objClasses.add("user");

    // Add these to the container
    container.put(objClasses);
    container.put(userPassword);
    container.put(sAMAccountName);
    container.put(userPrincipialAttribute);
    container.put(firstNameAttribute);
    container.put(secondNameAttribute);
    container.put(activatedAccount);

    return container;
} 
```

Unfornutately i get the following error:

```
Exception in thread "main" javax.naming.OperationNotSupportedException: [LDAP: error code 53 - 0000052D: SvcErr: DSID-031A120C, problem 5003 (WILL_NOT_PERFORM), data 0 
```

Has anyone ideas ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:25:52.360

这将有助于回答您的问题[Thread: Operation Not Supported Exception in JNDI/Active Directory](https://forums.oracle.com/forums/thread.jspa?threadID=1157956)以及[How to add an active user account to Active Directory](http://www.forumeasy.com/forums/thread.jsp?tid=134931028635&fid=ldapprof9&highlight=How%20add%20active%20user%20account%20Active%20Directory)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-01T14:48:49.140

对我来说，问题是密码相关性。使用弱密码时，会显示相同的消息。验证 AD 上定义的规则是什么。

# sql-server - 获取select语句的AVG()

> ID：15052603
> 
> 赞同：0
> 
> 时间：2013-02-24T14:18:34.160
> 
> 标签：sql-server, tsql, average

如何获得`select`查询结果的平均值

例子：

```
select x from dbo.table1 as a
where MONTH(a.mymonth) = 1 AND YEAR(a.myyear) = 2013 
```

可以使用`AVG()`功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T14:22:43.830

这就是你要找的全部吗？

```
select AVG(x)
from dbo.table1
where MONTH(mymonth) = 1 AND YEAR(myyear) = 2013 
```

[小提琴演示示例](http://sqlfiddle.com/#!3/b55ed/2)

根据您的 x 数据类型，您可能希望将其转换为小数：

```
SELECT AVG(CAST(x as decimal)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T14:25:28.600

是否可以使用 AVG() 函数？

是的，将它包裹在 x 周围，所以：

```
 select AVG(x) from dbo.table1 as a
    where MONTH(a.mymonth) = 1 AND YEAR(a.myyear) = 2013 
```

在这里了解更多信息。

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_avg](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_avg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T14:25:35.067

如果你想平均`x`你的`select`查询应该是这样的：

```
Select AVG(x)
from dbo.table1 as a
where MONTH(a.mymonth) = 1 AND YEAR(a.myyear) = 2013 
```

# css - 脚本更新后 MVC 4 移动样式停止工作

> ID：15052624
> 
> 赞同：1
> 
> 时间：2013-02-24T14:21:12.867
> 
> 标签：css, asp.net-mvc, jquery-mobile

我正在尝试学习 ASP.NET MVC 编程。我一直在为我的实验使用默认的 MVC 4 移动应用程序模板。在某些时候，我决定将脚本更新到最新版本（对于 jquery-mobile，从 1.1.1 到 1.2.0）。由于某种原因，页面的样式现在消失了。我知道这与我的更改无关，因为我几乎什么都没做，所以它必须完全是由于更新。我想知道是否有人可以向我指出我应该看什么才能弄清楚这个问题，因为老实说，现在我完全迷失了，甚至不知道从哪里开始寻找或如何“调试”这类问题。这个模板中有太多的“魔法字符串”让我无法理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:24:36.537

哦，只使用较低的 jQuery 版本。

jQuery Mobile 1.2 不适用于 jQuery 1.9.1 及更高版本。他们已锁定 1.2 以使用从 1.6.4 到 1.8.2 的 jQuery 版本。

**证明 ：**

看看这个 jsFiddle 示例： http: [//jsfiddle.net/Gajotres/yWTG2/](http://jsfiddle.net/Gajotres/yWTG2/)，更改左上角的 jQuery 版本，看看有什么不同。更改后不要伪造运行它。

使用版本 1.9.1。你会得到这样的东西：

```
First Page
Next
Second Page
Back 
```

# php - 它显示空白页而不是某些显示

> ID：15052631
> 
> 赞同：0
> 
> 时间：2013-02-24T14:21:47.560
> 
> 标签：php

我写了这个 php 代码，但我没有发现任何错误，如果你可以的话，请告诉我！

**我的PHP代码： -**

在此处插入标题

```
<body>

<?php

echo displayForm();

function displayForm(){

        $r=' ';

        $r.='<form method="post" action="processOrderTicketes.php">';

    //table
    $r.='<table>';

    $r.=displayRow('First Name:', '<input type="text" name="firstName"/>');
    $r.=displayRow('Last Name:', '<input type="text" name="lastName"/>');
    $r.=displayRow('Number of Ticketes:', '<input type="text" name="numberofticketes"/>');

    $r.='</table>';

    $r.='</form>';

    return $r;
}

function displayRow($left,$right){

    $r=' ';

//build it
$r='<tr>';
$r='<td>'.$left.'</td>';
$r='<td>'.$right.'</td>';
$r='</tr>';

return $r;
}
?>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T14:24:37.153

您不是在 中`displayRow`附加值，而是不断地为 重新分配一个新值`$r`。

确认一下，您的代码应该是这样的：

```
 $r=' ';

        //build it
        $r.='<tr>';
        $r.='<td>'.$left.'</td>';
        $r.='<td>'.$right.'</td>';
        $r.='</tr>';

        return $r;
    }
?>
</body> 
```

**编辑：**

这适用于我的网络空间。

```
<body>
    <?php   

        echo displayForm();

        function displayForm() {
            $r=' ';

            $r.='<form method="post" action="processOrderTicketes.php">';

            //table
            $r.='<table>';

            $r.=displayRow('First Name:', '<input type="text" name="firstName"/>');
            $r.=displayRow('Last Name:', '<input type="text" name="lastName"/>');
            $r.=displayRow('Number of Ticketes:', '<input type="text" name="numberofticketes"/>');

            $r.='</table>';

            $r.='</form>';

            return $r;
        }

        function displayRow($left, $right) {
            $r=' ';

            //build it
            $r.='<tr>';
            $r.='<td>'.$left.'</td>';
            $r.='<td>'.$right.'</td>';
            $r.='</tr>';

            return $r;
        }

    ?>
</body> 
```

# android - 如何让按钮的左上角在相对布局中位于屏幕的中心？

> ID：15052632
> 
> 赞同：-1
> 
> 时间：2013-02-24T14:21:52.037
> 
> 标签：android, android-relativelayout

所以基本上我有一个按钮，而不是将它放在屏幕的中心（水平）我希望它有点偏离，它的左角从中心开始。从一侧硬编码边距不是一种选择。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:26:39.490

将 a`View`和 a`Button`放在水平线性布局中，并赋予`layout_weight`两者相等`View`和`Button`，按钮左角将从中心开始

# python - 捕获远程 linux 服务器的性能？

> ID：15052634
> 
> 赞同：0
> 
> 时间：2013-02-24T14:22:06.577
> 
> 标签：python, linux, performance, automation

我想不时捕获远程 linux 服务器的性能（CPU 和内存使用情况），例如终端中 TOP 命令的输出，并将其导入本地 Windows 机器上的 excel 文件。我正在考虑使用 python 连接到服务器并执行命令并记录其输出。我对python完全陌生，请提出一些解决这个问题的方法，比如我应该从哪里开始等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T14:49:55.723

使用 Python 模块“fabric”，然后使用 fabric`run`函数来捕获远程主机上命令的输出。

它看起来像这样：

```
import csv
from fabric.api import *

env.hosts = ['user@remotehost:22']
FILENAME = '/tmp/info.csv'

def get_info():
    output = run('top -bn 1')
    lines = output.splitlines()

    with open(FILENAME, 'wb') as csvfile:
        info = csv.writer(csvfile)
        for l in lines:
             info.writerow(l.split()) 
```

然后使用：`fab get_info`从脚本目录运行它。

它将从远程机器的“top”输出中写入一个本地 csv 文件。然后可以从 Excel 打开 csv 文件。csv 文件看起来有点难看。但这一切都是为了将​​最后一行更改为更智能的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T14:27:43.043

看一下[`os.times`](http://docs.python.org/2/library/os.html#os.times)

```
>>> import os
>>> os.times()
(0.01, 0.0, 0.0, 0.0, 1361716040.0)
>>> help(os.times)
times() -> (utime, stime, cutime, cstime, elapsed_time)

Return a tuple of floating point numbers indicating process times. 
```

`os.times`.. 并在给定的时间段内以给定的频率重复调用mimi `top`。

将其导入 Excel 文档并不那么简单，但 Excel 可以理解`csv`，逗号分隔的变量文件，所以可能类似于

```
import time
from datetime import datetime
import os

with open('output.csv', 'w') as co:    
    for i in range(100):
        co.write('%s, %f,\n' % (datetime.now(), os.times()[0]))

    time.sleep(5) 
```

这将打开一个文件“ `output.csv`”，写入当前时间和 cpu 使用情况，等待 5 秒然后重复 100 次。`csv`然后可以在 Excel 中打开该文件。

示例输出：

```
2013-02-24 14:40:12.254806, 0.01,
2013-02-24 14:40:12.304922, 0.05,
2013-02-24 14:40:12.357945, 0.06,
2013-02-24 14:40:12.404362, 0.04, 
```

要连接到远程服务器，请查看 Python`ssh2`模块[`paramiko`](http://www.lag.net/paramiko/)。

*正如[@Christian Groleau所提到的那样](https://stackoverflow.com/users/1157411/christian-groleau)*编辑*，如果您要对文件进行繁重的工作`csv`，请查看[`csv`](http://docs.python.org/2/library/csv.html)python 模块。[甚至有人](http://www.python-excel.org/)写了一些直接读/写excel文件的模块（python不是很好吗？！）*

# c# - SystemEvents.TimeChanged 触发两次

> ID：15052635
> 
> 赞同：4
> 
> 时间：2013-02-24T14:22:20.493
> 
> 标签：c#

我在我的 Windows 应用程序中使用了 SystemEvents.TimeChanged 事件，它触发了两次。我使用的代码：

```
using System;
using Microsoft.Win32;

namespace DateTimeTests
{
    class Program
    {
        static void Main(string[] args)
        {
            SystemEvents.TimeChanged += new EventHandler(SystemEvents_TimeChanged);
            Console.WriteLine("Press any key to exit");
            Console.ReadKey();
        }

        static void SystemEvents_TimeChanged(object sender, EventArgs e)
        {
            Console.WriteLine("Time changed: {0}", DateTime.Now);
        }
    }
} 
```

我试图更改 Windows 中的时间，并且事件发生了两次。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-07T05:14:20.750

这是无法修复的 MS 错误

[http://connect.microsoft.com/VisualStudio/feedback/details/776003/systemevent-timechanged-is-fired-twice](http://connect.microsoft.com/VisualStudio/feedback/details/776003/systemevent-timechanged-is-fired-twice)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-12-18T19:33:56.900

`SystemEvents.TimeChanged`手动设置时钟时确实会发生令人讨厌的双重触发。当您将日期和时间设置从手动 -> 自动切换时也会发生这种情况（假设因此调整了时钟）：

[![在此处输入图像描述](../Images/79585738431c7903f0d5fc4435cfae0d.png)](https://i.stack.imgur.com/i359O.png)

所以是的，这似乎是一个 Windows 问题。有一个简单的方法：使用响应式扩展来包装`SystemEvents.TimeChanged`事件并忽略无关事件的发生。

1)`System.Reactive`从 Nuget 安装 2) 使用类似于以下的代码：

```
using Microsoft.Win32;
using System;
using System.Linq;
using System.Reactive;
using System.Reactive.Linq;

namespace ConsoleApp
{
    class Program
    {
        static void Main(string[] args)
        {
            IDisposable subscriptionToken = 
                Observable.FromEventPattern(e => SystemEvents.TimeChanged += e, e => SystemEvents.TimeChanged -= e)
                .Select(x => new Unit())
                .Throttle(TimeSpan.FromMilliseconds(250))
                .Subscribe(x => Console.WriteLine("The system clock just changed"));

            Console.WriteLine("Press any key to exit");
            Console.ReadKey();

            subscriptionToken.Dispose();
        }
    }
} 
```

即使在 250 毫秒的时间范围内触发了两个以上的事件，这也将起作用；只有最后一个会被执行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-02T13:46:44.333

只需在第一次触发此事件时取消链接即可解决问题：

```
static void SystemEvents_TimeChanged(object sender, EventArgs e)
{
    SystemEvents.TimeChanged -= new EventHandler(SystemEvents_TimeChanged);

    Console.WriteLine("Time changed: {0}", DateTime.Now);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T14:40:14.547

它只是在收到[WM_TIMECHANGE 消息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms725498%28v=vs.85%29.aspx)时触发事件。因此，您需要寻找另一个程序两次更改时间的原因，或者可能过于热心地更改系统时间*并*广播此消息。很难推测，因为你没有描述你做了什么来改变时间。

当然，这**绝不**应该是一个真正的问题。

# java - Glassfish 服务器缓存在使用@XmlAdapter 时没有得到更新？

> ID：15052636
> 
> 赞同：0
> 
> 时间：2013-02-24T14:22:26.070
> 
> 标签：java, jpa, jaxb, glassfish, jersey

我偶然发现了一个使用@XmlAdapter 的奇怪问题。让我试着勾勒一下情况：

在服务器端，我有一个类 Cows：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement
public class Cows implements Serializable {
    ...a bunch of cow properties like ID, name, ...

    @XmlElementWrapper(name = "sampless")
    @XmlElement(name = "samples") 
    @OneToMany(mappedBy = "cowId")
    private List<Samples> samplesList;

    ...a bunch of getters & setters...
} 
```

我有一个班级样本：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement
public class Samples implements Serializable {
    ...a bunch of samples properties like ID, cellcount, ...

    @JoinColumn(name = "cow_id", referencedColumnName = "id")
    @ManyToOne
    @XmlJavaTypeAdapter(CowsAdapter.class)
    private Cows cowId;
} 
```

牛适配器类：

```
public class CowsAdapter extends XmlAdapter<Cows, Cows> {
    @Override
    public Cows unmarshal(Cows v) throws Exception {
        return v;
    }
    @Override
    public Cows marshal(Cows v) throws Exception {
        return null;
    }
} 
```

当客户端请求 Cow 对象时，我会包含一个示例列表，如上所示。

现在，在客户端，当我尝试为 Cow 添加新样本时，它会正确编组为发送到 Web 服务的 xml 字符串（包括 Cow 对象）。新条目已正确添加到数据库中。

但是，当我再次请求相同的 Cow 时（包括 samplesList），新的 Sample 没有添加，尽管它在数据库中？当我重新启动 glassfish 实例时，它显示.. 为什么会这样，我应该使用另一种方法来避免这种情况吗？

编辑：删除样本时会发生相同的行为。它从数据库中删除，但仍包含在 Cow 请求的响应中。这与 glassfish 的缓存有关吗？

Edit2：我为此找到了某种解决方案。我将 findById 方法更改如下：

```
@GET
@Path("cow/{id}")
@Produces({"application/xml"})
public Cows findById(@PathParam("id") Integer id) {
    //Cows cow = super.find(id);
    final Query qry = getEntityManager().createNamedQuery("Cows.findById", Cows.class);
    qry.setParameter("id", id);
    qry.setHint("javax.persistence.cache.storeMode", "REFRESH");

    Cows cow = (Cows) qry.getSingleResult();
    return cow;
} 
```

但是，有人可以让我知道这是否是最好的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T11:51:19.320

通过向 persistence.xml 添加属性暂时禁用 Glassfish 缓存

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T14:22:52.263

你需要维护双方的关系。如果您创建一个新样本，则需要将其添加到其 Cow's 样本中。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Relationships#Object_corruption.2C_one_side_of_the_relationship_is_not_updated_after_updating_the_other_side](http://en.wikibooks.org/wiki/Java_Persistence/Relationships#Object_corruption.2C_one_side_of_the_relationship_is_not_updated_after_updating_the_other_side)

# android - 多个活动 = 安装了多个应用程序？

> ID：15052640
> 
> 赞同：0
> 
> 时间：2013-02-24T14:22:57.577
> 
> 标签：android, android-activity, android-actionbar

我刚刚开始使用 Android SDK，并且在我了解了如何使用 MenuItem 打开另一个视图之后。我现在面临一个问题，它显示我的两个活动作为单独的应用程序安装？

我创建了一个新活动和一个新的 xml 文件（布局），当我在第一个视图中触摸 ActionBar 中的 menuItem 时，它会打开第二个视图。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:28:28.510

最有可能的是，您在两个活动中都包含了以下意图过滤器：

```
 <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

这意味着只放入您希望在应用程序列表中显示的那些活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T14:29:07.713

听起来您的`<intent-filter>`设置为

```
<action android:name="android.intent.action.MAIN" />    
<category android:name="android.intent.category.LAUNCHER" /> 
```

对于这两项活动。这将为每个创建一个启动器图标，并使每个成为您的应用程序的入口点

[文档](http://developer.android.com/guide/topics/manifest/category-element.html)

# php - 创建表 PHP 时间戳列

> ID：15052644
> 
> 赞同：0
> 
> 时间：2013-02-24T14:23:08.670
> 
> 标签：php, mysql

再会，

我正在尝试创建一个 php 查询来创建一个名为 timestamp 的列。

```
$query="CREATE TABLE contacts (id int(6) NOT NULL auto_increment,entryCount varchar(15) NOT NULL,web varchar(30) NOT NULL,PRIMARY KEY (id),UNIQUE id (id),KEY id_2 (id))"; 
```

我想在其中添加时间戳。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:17:22.767

```
alter table `contacts` add `timestamp` timestamp not null 
```

在要添加的列之后使用 after 关键字，例如：- 在 id 之后

在要添加的列之前使用 before 关键字，例如：- 在 entryCount 之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T14:26:18.857

```
ALTER TABLE `contacts` ADD `timestamp` TIMESTAMP NOT NULL; 
```

在运行第一个查询（创建表）后运行此查询将添加时间戳列。

# twitter-bootstrap - Twitter 引导程序和 iPad

> ID：15052645
> 
> 赞同：3
> 
> 时间：2013-02-24T14:23:10.853
> 
> 标签：twitter-bootstrap

我正在尝试学习使用 Twitter 引导程序。它适用于桌面和响应式工作。假设我正在使用 span8 和 span4。我不知道如何强制 iPad 纵向视图将 span4 堆叠在 span8 下。

我在头部、视口和响应式 CSS 文件中有正确的标签。

有任何想法吗？

更新：

这就是我所拥有的。当我缩小 webbrowser 窗口时，我可以看到它是如何响应的（最终 span4 在 span8 下移动）。如果我在 iPad 上处于纵向模式，不希望 span8 和 span4 堆叠在一起，而是希望 span8 然后 span4 堆叠在 span8 下方。

在标题中

```
<link rel="stylesheet" href="./css/bootstrap.css">
<link rel="stylesheet" href="./css/bootstrap-responsive.css"> 
```

在体内

```
<div class="container">
<div class="row">
<div class="span8">
<?php while ( have_posts() ) : the_post() ?>
<h4><a href="<?php the_permalink(); ?>" title="<?php the_title_attribute(); ?>" ><?php    the_title( ); ?></a></h4>
<?php the_content(); ?>
<?php endwhile; ?>
</div>
<div class="span4">
hello this is a test to see if columns are fluid.
</div>
</div>
</div> 
```

在页脚

```
<script src="./js/bootstrap.js"></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T15:27:46.907

按以下方式排列： [Jsfiddle with example](http://jsfiddle.net/shail/FB8rP/4/show)

在新的问题解释之后，请在您的样式表中使用以下内容或编写您自己的媒体查询，如下所示：

```
@media (min-width: 768px) and (max-width: 979px) {
[class*="span"], .uneditable-input[class*="span"], .row-fluid [class*="span"] {
-moz-box-sizing: border-box;
display: block;
float: none;
margin-left: 0;
width: 100%;
 }
} 
```

在标题部分引导 css（云托管版本）

```
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css" rel="stylesheet"> /*bootstrap css with responsive css as well */

<link href="/css/style.css" rel="stylesheet"> /*your custom stylesheet*/ 
```

在身体使用以下：

```
 <div class="row">
<div class="span4">Content</div>
<div class="span8">content</div>
</div> 
```

在页脚：

```
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/js/bootstrap.min.js"></script> 
```

# css - 悬停链接css时更改图像链接

> ID：15052648
> 
> 赞同：0
> 
> 时间：2013-02-24T14:24:06.627
> 
> 标签：css, image, hyperlink

我有这个链接：

```
<a href = "" ><img src="images_cartographie/cartographie3_05.gif" width="207" height="47" alt=""></a></td> 
```

当用户通过我测试的链接时，我想更改图像：

```
#planification:hover{
background-image:"images_cartographie/cartographie3_03.gif";
} 
```

但图像没有改变，它被忽略了，（我测试了它的背景颜色（然后问题不在url或......））

当我像这样使用没有悬停的背景图像时：它不会出现：

```
#planification{
background-image:"images_cartographie/cartographie3_03.gif";
} 
```

注意：我用 Photoshop 生成了页面

你有什么主意吗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T14:38:41.603

您可以完全删除 ，`img`因为您通过**CSS**在`a`标签上添加了效果。

**HTML**

```
<a href="" class="image_link"></a> 
```

**CSS**

```
.image_link{
    display:block;
    width:800px;
    height:600px;
    background:url('http://ferringtonpost.com/wp-content/uploads/2012/07/Responsibilities-of-Owning-a-New-Puppy-Photo-by-bestdogsforkids.jpg');
}

.image_link:hover {
    display:block;
    width:800px;
    height:600px;
    background:url('http://25.media.tumblr.com/tumblr_m4frqhdW0k1rwpusuo1_1280.jpg');
} 
```

[JSF](http://jsfiddle.net/tKMpb/55/)中。

请注意，您必须添加`dispay:block/inline-block`到`a`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T14:49:52.510

我对你的问题有点困惑，但听起来你需要放入两个不同的图像。因此，当您将鼠标悬停时会显示一个图像，而当您没有悬停时会显示另一个图像。您只需在悬停时为 background-url 输入不同的路径。此外，您应该在 img 标签中放入一个木板 gif 以实现向后兼容性。

您还应该为您的图像使用自结束标记 />。标签以您发布的方式打开。

```
#planification
{
    background: url(images_cartographie/cartographie3_03.gif) 
}

#planification:hover
{
    background: url(images_cartographie/new_image_goes_here.gif) 
}

<a id="planification" href = "" ><img src="images_cartographie/blank.gif" width="207" height="47" alt=""/></a> 
```

# java - Spring 3 @Autowired 注解问题

> ID：15052651
> 
> 赞同：5
> 
> 时间：2013-02-24T14:24:16.440
> 
> 标签：java, spring, junit, autowired

我一直在看一些关于 Spring Framework 入门的教程，并遇到了[这个](http://pookey.co.uk/wordpress/archives/50-getting-started-with-maven-and-spring)。完成后，我遇到了以下错误。（我已经更新为使用 Spring 框架的第 3 版，但我仍然遇到相同的错误。

简而言之，我得到了一个 NullPointerException，我在其中调用 AutoWired 类的方法。

我的课是 SayHello：

```
public class SayHello {

private String name;

public void setName(String name) {
    this.name = name;
}

public String getName() {
    return name;
}

public void greet() {
    System.out.println("Hello " + getName());
}

} 
```

然后我在 /src/test/resources/applicationContext.xml 中设置以下内容。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans
  http://www.springframework.org/schema/beans/spring-beans.xsd
  http://www.springframework.org/schema/context
  http://www.springframework.org/schema/context/spring-context.xsd">

 <context:annotation-config/>

  <bean id="hello" class="package.SayHello">
    <property name="name" value="John Smith" />
  </bean 
```

最后，我有 AppTest 类，我尝试在其中自动连接 SayHello 对象进行测试。

```
public class AppTest {

@Autowired
private SayHello hello;

@Test
public void testApp()
{
    hello.greet();
    Assert.assertTrue( true );
}
} 
```

当我尝试运行 AppTest 时，出现以下错误：

```
java.lang.NullPointerException
at package.AppTest.testApp(AppTest.java:19)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我已经查看了有关 stackoverflow 的各种文章和问题，但是在尝试了一些但没有得到任何结果之后，我想我会创建一个新帖子。

干杯。

如果有帮助，这是我正在使用的依赖项（Spring v3.2.1）：

```
<dependencies>

<!-- JUnit -->
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.11</version>
    <scope>test</scope>
</dependency>

<!-- Spring -->
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-beans</artifactId>
  <version>${org.springframework.version}</version>
</dependency>

<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-core</artifactId>
  <version>${org.springframework.version}</version>
</dependency>

<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-webmvc</artifactId>
  <version>${org.springframework.version}</version>
</dependency>

<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-context-support</artifactId>
  <version>${org.springframework.version}</version>
</dependency>

<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-aop</artifactId>
  <version>${org.springframework.version}</version>
</dependency>

<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-jms</artifactId>
  <version>${org.springframework.version}</version>
</dependency>

<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-context</artifactId>
  <version>${org.springframework.version}</version>
</dependency> 
```

**更新**

我还尝试在主应用程序中使用 @Autowired 注释，如下所示。并且仍然得到 NullPointerException 错误。

```
public class App 
{   
    @Autowired
    private static SayHello hello;

    public static void main( String[] args )
    {
       hello.greet();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T14:29:19.237

您将需要一些注释`AppTest`：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:/applicationContext.xml") 
```

这些注解是在 spring-test 中定义的，所以也要添加这个依赖：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-test</artifactId>
    <version>${org.springframework.version}</version>
    <scope>test</scope>
</dependency> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T14:27:55.880

只有当注解本身由 Spring 管理时`@Autowired`，注解才会起作用。`AppTest`看起来您正在一个简单的单元测试中测试您的设置。这行不通。如果您想在 JUnit 测试中自动装配，您将不得不查看 Spring 的测试支持。但这是一个完全不同的话题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T14:32:27.910

在本教程中，您已链接此代码实例化 bean：

```
BeanFactory factory = new XmlBeanFactory(
   new ClassPathResource("application-context.xml"));

SayHello hello = (SayHello) factory.getBean("hello"); 
```

你的`SayHello`bean 是空的。

# php - 将 phonegap 应用程序中的数据作为电子邮件附件导出到 XLS 到电子邮件撰写中

> ID：15052658
> 
> 赞同：1
> 
> 时间：2013-02-24T14:24:42.480
> 
> 标签：php, ajax, cordova, phpexcel

是否有任何示例或有人可以提供一个示例，我可以在 phonegap 中执行以下操作？

我的应用通过 AJAX 从我们的服务器引入查询数据。然后，我希望用户将结果导出到 Excel 电子表格，该电子表格附加到电子邮件（XLS 附件）以供撰写。

我可以使用 PHPExcel 库（[http://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)）在 PHP 中做到这一点，但是看到 Phonegap 不能用 PHP 编译我想知道是否有任何方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:20:15.373

PhoneGap 只能运行 JavaScript。因此，一种简单的方法是使用您的数据创建一个 CSV 文件并创建一个扩展名为 .xls 的文件。它将很容易地打开为 excel 文件。

# php - PHP 致命错误：未捕获的异常 'ImagickException' 带有消息 'no decode delegate for this image format

> ID：15052661
> 
> 赞同：2
> 
> 时间：2013-02-24T14:24:52.900
> 
> 标签：php, amazon-web-services, amazon-ec2, imagick, bitnami

**我正在使用 AWS EC2 Bitnami AMI**：bitnami-lampstack-5.4.11-1-linux-ubuntu-12.04.1-x86_64-ebs (ami-aadf4cc3)

**我有一个 php 文件：**

```
<?php 
    $im = new imagick();
    $im->readImageBlob(file_get_contents("http://s3.amazonaws.com/bucket/file.jpg"));
?> 
```

**这给了我以下错误：**

```
PHP Fatal error:  Uncaught exception 'ImagickException' with message 'no decode delegate for this image format `' @ error/blob.c/BlobToImage/361' in /opt/bitnami/apache2/htdocs/index.php:3
Stack trace:
#0 /opt/bitnami/apache2/htdocs/index.php(3): Imagick->readimageblob('??????JFIF?????...')
#1 {main}
  thrown in /opt/bitnami/apache2/htdocs/index.php on line 3 
```

**我使用以下步骤安装了 imagick：**

```
1) wget http://pecl.php.net/get/imagick-3.1.0RC2.tgz
    2) tar -zxvf imagick-3.1.0RC2.tgz
    3) cd imagick-3.1.0RC2
    4) phpize
    5) ./configure
    6) make
    7) make install 
```

**到目前为止，我已经尝试过：**

```
1) file_get_contents is returning the image file and it is a confirmed jpeg
2) using convert directly from the command line --> it works
3) imagick-3.0.1 on this AMI and it won't install because of compiler errors
4) imagick-3.0.1 on the previous bitnami AMI (bitnami-lampstack-5.3.10-2-linux-ubuntu-12.04-x86_64-ebs (ami-8c4c96e5)) and it gives the same ImagickException error (no decode delegate)
5) Using a PNG file which gives me the same error 
```

**Convert -list configure 给我 DELEGATES bzlib freetype jpeg jng png tiff zlib**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:22:12.963

解决方案：

更新`/opt/bitnami/scripts/setenv.sh`如下

`MAGICKCODERMODULE_PATH="/usr/lib/ImageMagick-6.6.9/modules-Q16/coders"`

**然后**

```
`/opt/bitnami/ctlscript.sh restart apache` 
```

# android - 单击时android更改按钮图标

> ID：15052669
> 
> 赞同：5
> 
> 时间：2013-02-24T14:25:53.083
> 
> 标签：android, imagebutton, android-button

我想知道是否有一种方法可以在单击时更改按钮图像。最初，该按钮有一个暂停图标。单击它时，我希望显示播放图标。每次单击按钮时，图标应在播放和暂停之间变化。

有没有办法做到这一点？

XML 布局文件：

```
<ImageButton
    android:id="@+id/play"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="109dp"
    android:src="@drawable/play_btn"
    android:background="@null" /> 
```

play_btn.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/pause" android:state_selected="true" />
    <item android:drawable="@drawable/play" />
</selector> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-24T14:32:59.123

[带有自定义选择器的 Android 切换按钮](http://developer.android.com/reference/android/widget/ToggleButton.html)听起来像您想要的。

您可以对按钮的选择器使用类似的东西：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/play_icon" android:state_checked="true" />
    <item android:drawable="@drawable/pause_icon" android:state_checked="false" />
</selector> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-24T14:32:27.110

```
Button mPlayButton;

boolean isPlay = false;
@Override
public void onCreate(){
    mPlayButton = (Button) findViewById(R.id.play);
    // Default button, if need set it in xml via background="@drawable/default"
    mPlayButton.setBackgroundResource(R.drawable.default);
    mPlayButton.setOnClickListener(mTogglePlayButton);
}

View.OnClickListener mTogglePlayButton = new View.OnClickListener(){

    @Override
    public void onClick(View v){
        // change your button background

        if(isPlay){ 
            v.setBackgroundResource(R.drawable.default);
        }else{
            v.setBackgroundResource(R.drawable.playing);
        }

        isPlay = !isPlay; // reverse
    }

}; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-03T10:24:01.210

让我们在布局中向按钮的 xml 添加一个`onClick`字段（需要 API 级别 4 及更高级别）

```
<ImageButton
    android:id="@+id/play"
    ...
    android:onClick="buttonPressed" /> 
```

您的图标是可绘制的`pause`，并且`play`.

跟踪您的按钮具有哪个图标。

```
private boolean paused = true;

public void buttonPressed(View view) {

    ImageButton button = (ImageButton) view;
    int icon;

    if (paused) {
        paused = false;
        icon = R.drawable.pause;
    else {
        paused = true;
        icon = R.drawable.play;
    }

    button.setImageDrawable(
        ContextCompat.getDrawable(getApplicationContext(), icon));

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T14:33:58.470

查看此文档[http://developer.android.com/reference/android/widget/ImageButton.html](http://developer.android.com/reference/android/widget/ImageButton.html)特别是从 android.widget.imageview 继承的方法。您需要使用 setImageBitmap 或 setImageDrawable。将其更新为您的点击代码的一部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-09T15:52:45.217

您可以使用 MaterialButton 而不是 Button，然后为您的按钮使用 setIcon 方法：

```
import com.google.android.material.button.MaterialButton;

MaterialButton mPlayButton;

boolean isPlay = false;
@Override
public void onCreate(){
    mPlayButton = (MaterialButton) findViewById(R.id.play);
}

View.OnClickListener mTogglePlayButton = new View.OnClickListener(){

    @Override
    public void onClick(View v){
        // change your button background

        if(isPlay){ 
            v.setIcon(ContextCompat.getDrawable(this, R.drawable.your_drawable_resource));
        }else{
            v.setIcon(ContextCompat.getDrawable(this, R.drawable.your_drawable_resource2));
        }

        isPlay = !isPlay; // reverse
    }

}; 
```

# java - 在 log4j 中创建多个日志会导致奇怪的效果

> ID：15052670
> 
> 赞同：0
> 
> 时间：2013-02-24T14:25:55.800
> 
> 标签：java, logging, log4j

我正在尝试在 Log4j 中创建多个日志，但我遇到了一个奇怪的问题。这是 log4j.properties 和实现它的代码。

```
# Define the root logger with appender file
log4j.rootLogger = DEBUG, FILEALL

# Define the file appender
log4j.appender.FILEALL=org.apache.log4j.FileAppender
log4j.appender.FILEALL.File=${logfile.name}
# Define the layout for file appender
log4j.appender.FILEALL.layout=org.apache.log4j.HTMLLayout

#log4j.appender.FILEMAIN=org.apache.log4j.FileAppender
#log4j.appender.FILEMAIN.File=${logfilemain.name}
#log4j.appender.FILEMAIN.layout=org.apache.log4j.HTMLLayout 
```

我在运行两者时添加了语句并删除了原始语句

```
log4j.rootLogger = DEBUG, FILEALL , FILEMAIN 
```

这是java代码：

```
System.setProperty("logfile.name", savePath1);
// System.setProperty("logfilemain.name", savePath1);
logger = Logger.getLogger(HarishLog.class.getName());
PropertyConfigurator.configure("log4j.properties"); 
```

在我创建一个日志之前，代码工作得非常好，但是一旦我在属性或 javafile 中启用了第二个日志的设置，就什么也没有发生。

此外，我无法在

```
log4j.appender.FILEALL.File=${logfile.name} 
```

它仅适用于`logfile.name`and `logfilea.name`，如果我在 javacode 和属性文件夹中都更改它，它不适用于任何其他名称。为什么是这样？？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:43:44.353

这对我有用：

```
log4j.rootLogger = DEBUG, FILEALL, FILEMAIN

log4j.appender.FILEALL=org.apache.log4j.FileAppender
log4j.appender.FILEALL.File=${logfile.name}
log4j.appender.FILEALL.layout=org.apache.log4j.HTMLLayout

log4j.appender.FILEMAIN=org.apache.log4j.FileAppender
log4j.appender.FILEMAIN.File=${logfilemain.name}
log4j.appender.FILEMAIN.layout=org.apache.log4j.HTMLLayout 
```

* * *

```
import org.apache.log4j.Logger;

public class LogTest {
    public static void main(final String... args) {
        System.setProperty("logfile.name", "logall.txt");
        System.setProperty("logfilemain.name", "logmain.txt");
        Logger logger = Logger.getLogger(LogTest.class.getName());
        logger.info("hello");
    }
} 
```

如果您仍然遇到问题，请尝试添加：

```
log4j.debug = true 
```

到 log4j.properties 的开头，并检查输出消息。

# ssas - SSAS - 维度和事实表历史数据 - 将事实表与维度表映射

> ID：15052671
> 
> 赞同：2
> 
> 时间：2013-02-24T14:25:55.937
> 
> 标签：ssas, data-warehouse, dimension, fact

我设计了与场所相关的仓库表 - DimPlaces、FactPlaces、DimGeography。如果您看到，这是简单的设计。所有位置都在 DimPlaces 中（Addrline1、Addrline2、地名等），地理层次结构在 DimGeography 中（城市、州、国家、邮政编码）。FactPlaces 是具有 DimPlaces 和 DimGeography 的外键的表。

我想保留历史数据，因为地点名称或其属性可能会发生变化，同时如果地点的位置发生变化，那么地理层次结构键也会发生变化。

我找到了设计模式 -

另一个有用的设计模式是除了维度的代理键之外，还向事实表添加持久帐户键。这将连接回维度中的当前行，以便更轻松地按当前维度属性报告所有历史记录。

您能否建议遵循此解决方案可以吗？如果是，我是否需要使用 UNIQUEIDENTIFIER 类型的 KEY 作为唯一值？

关于此的另一个问题 - 我有员工数据（DimEmployee 和 FactEmployee）。每个员工都与他工作的地方相关联。如何将这些员工表与地点表连接起来。我需要将 FACTEMPLOYEE 与 FACTPLACES 联系起来吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:07:21.357

我认为首先，他们指的是业务密钥？因此，如果您的维度表有两行，代理键 1 和 2，但它们都引用同一事物，因此 AccountId/ProductId/WhateverId 均为 1，那么您将拥有一些具有代理键 1 和业务键的事实表行1，以及后来的代理键 2 和业务键 1。

唯一标识符非常广泛，尽量避免在事实表和连接中使用它们（如果可能）。

对于你的最后一个问题 - 这真的更像是一个报告的事情。你需要这样做吗？那是人们需要看到的吗，他们需要削减吗？您可以考虑引用维度 - 地点表通过员工维度上的 placeId 链接到事实表的位置。或者，您可以有一个包含开始日期和结束日期的 factemployees 表。这取决于您需要实现的目标。

# android - SQLite：程序没有在第一个模拟器上运行

> ID：15052675
> 
> 赞同：0
> 
> 时间：2013-02-24T14:26:37.733
> 
> 标签：android, eclipse, sqlite

我打开了一个模拟器，但是当我启动我的应用程序时，它会启动第二个模拟器，而不是在已经打开的模拟器上运行。

控制台输出：

```
[2013-02-24 14:30:40 - AdatBpro] Android Launch!
[2013-02-24 14:30:40 - AdatBpro] adb is running normally.
[2013-02-24 14:30:40 - AdatBpro] Performing hu.AB.example.adatbpro.MainActivity activity launch
[2013-02-24 14:30:40 - AdatBpro] Automatic Target Mode: Unable to detect device compatibility. Please select a target device.
[2013-02-24 14:30:47 - AdatBpro] Launch canceled!
[2013-02-24 14:31:04 - AdatBpro] emulator-5554 disconnected! Cancelling 'hu.AB.example.adatbpro.MainActivity activity launch'!
[2013-02-24 14:42:15 - AdatBpro] ------------------------------
[2013-02-24 14:42:15 - AdatBpro] Android Launch!
[2013-02-24 14:42:15 - AdatBpro] adb is running normally.
[2013-02-24 14:42:15 - AdatBpro] Performing hu.AB.example.adatbpro.MainActivity activity launch
[2013-02-24 14:42:16 - AdatBpro] Automatic Target Mode: launching new emulator with compatible AVD 'AVD412'
[2013-02-24 14:42:16 - AdatBpro] Launching a new emulator with Virtual Device 'AVD412'
[2013-02-24 14:42:16 - Emulator] WARNING: Data partition already in use. Changes will not persist!
[2013-02-24 14:42:16 - Emulator] WARNING: SD Card image already in use: C:\Users\Edit\.android\avd\AVD412.avd/sdcard.img
[2013-02-24 14:42:16 - Emulator] WARNING: Cache partition already in use. Changes will not persist!
[2013-02-24 14:42:16 - AdatBpro] New emulator found: emulator-5556
[2013-02-24 14:42:16 - AdatBpro] Waiting for HOME ('android.process.acore') to be launched...
[2013-02-24 14:43:32 - AdatBpro] HOME is up on device 'emulator-5556'
[2013-02-24 14:43:32 - AdatBpro] Uploading AdatBpro.apk onto device 'emulator-5556'
[2013-02-24 14:43:33 - AdatBpro] Installing AdatBpro.apk...
[2013-02-24 14:44:30 - AdatBpro] Success! 
```

程序正在运行并且数据库打开，但是当第一个模拟器什么也没写时。我再次尝试运行。第一个模拟器在那里打开并打开第二个模拟器并在第二个模拟器上写入所有内容。

它只在模拟器上制作。

它不在电话上运行。

测试了 kill-server 和 start-servert。没有解决问题。我运行任何发生的事情

为什么要做这个？我做错了什么？

我找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:33:50.000

打开控制台窗口（终端窗口、命令提示符等）并运行：

```
adb kill-server
adb start-server 
```

这将解决您的决斗模拟器问题。我们很多人都会遇到这种情况；）注意：可以在 SDKs 文件夹下的 platform-tools 文件夹中找到 adb。

# objective-c - NSString stringWithFormat 中的`size_t`

> ID：15052676
> 
> 赞同：0
> 
> 时间：2013-02-24T14:26:38.890
> 
> 标签：objective-c, cocoa, nsstring, stringwithformat

我有一个`size_t`变量，我会在`NSLog`. 此变量包含发送的字节数。

如果我使用这个：`NSLog(@"%zu",myvariable);`我没有错误消息，但数字溢出并且 NSLog 输出一直显示低于 32.768 的数字。这是为什么？Long 不应该显示从 -9,223,372,036,854,775,808 到 9,223,372,036,854,775,807 的值吗？

这是一些代码。我想在 NSlog self.bufferOffset 中显示，这应该是发送的大约字节数。

```
 // If we don't have any data buffered, go read the next chunk of data.

        if (self.bufferOffset == self.bufferLimit) {
            NSInteger   bytesRead;

            bytesRead = [self.fileStream read:self.buffer maxLength:kSendBufferSize];

            if (bytesRead == -1) {
                [self stopSendWithStatus:@"File read error"];
            } else if (bytesRead == 0) {
                [self stopSendWithStatus:nil];
            } else {
                self.bufferOffset = 0;
                self.bufferLimit  = bytesRead;
            }
        }

        // If we're not out of data completely, send the next chunk.

        if (self.bufferOffset != self.bufferLimit) {
            NSInteger   bytesWritten;
            bytesWritten = [self.networkStream write:&self.buffer[self.bufferOffset] maxLength:self.bufferLimit - self.bufferOffset];
            assert(bytesWritten != 0);
            if (bytesWritten == -1) {
                [self stopSendWithStatus:@"Network write error"];
            } else {
                self.bufferOffset += bytesWritten;
            }

        }

             NSLog (@"%lu",self.bufferOffset); 
```

这是一些输出：

```
 2013-02-24 15:54:39.674 prog[298:303] 32768
  2013-02-24 15:54:39.728 prog[298:303] 4820
  2013-02-24 15:54:39.791 prog[298:303] 10820
  2013-02-24 15:54:39.853 prog[298:303] 16580
  2013-02-24 15:54:39.911 prog[298:303] 23780
  2013-02-24 15:54:39.965 prog[298:303] 28100
  2013-02-24 15:54:40.024 prog[298:303] 32768
  2013-02-24 15:54:40.080 prog[298:303] 6852
  2013-02-24 15:54:40.139 prog[298:303] 14052
  2013-02-24 15:54:40.197 prog[298:303] 18372 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T15:06:19.160

`self.bufferOffset`在您的代码中是缓冲区中第一个读取但尚未写入的字节的偏移量，因此您将始终拥有

```
 self.bufferOffset <= kSendBufferSize 
```

这（希望）解释了为什么 NSLog() 输出受限于 32768。

`self.bufferOffset`不是写入的字节总数。

*备注：*正如其他人已经评论过的那样，该`%zu`格式适用于`size_t`变量。在 64 位平台上，`size_t`是 64 位无符号整数。例子：

```
size_t s = 18446744073709551615ULL; // 2^64-1
NSLog(@"%zu", s);
// Output: 18446744073709551615 
```

# javascript - 如何以编程方式获取 ie10 的 REAL 用户代理

> ID：15052678
> 
> 赞同：0
> 
> 时间：2013-02-24T14:26:57.013
> 
> 标签：javascript, silverlight, user-agent, internet-explorer-10

我需要以编程方式获取浏览器的用户代理：Windows 7 上的 IE10。

那应该是一件容易的事。我在 javascript 中尝试了 navigator.userAgent，在 Silverlight 中尝试了 HtmlPage.BrowserInformation.UserAgent，它们都返回：

*Mozilla/5.0（兼容；MSIE 10.0；Windows NT 6.1；WOW64；Trident/6.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0；.NET4。 0E；InfoPath.3；.NET4.0C)*

，看起来不错。但是，正如 Fiddler 注意到的那样，浏览网站时真正的 UA IE10 发送的是：

*Mozilla/5.0（兼容；MSIE 10.0；Windows NT 6.1；WOW64；Trident/6.0）*

，这是一个较短的版本。如何获得 IE10 正在使用的这个较短的字符串？

（我安装了 Firefox 19 并且 Firefox 没有这个问题，两种方法的用户代理是一样的。）

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:33:18.967

其他应用程序有机会修改用户代理以添加您在上面看到的信息，例如 .NET CLR、媒体中心等的版本... [http://msdn.microsoft.com/en-us/library/ms537503 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms537503(v=vs.85).aspx)

Scott Hanselman 前段时间有一个帖子，其中一些信息来自 Windows 注册表[http://www.hanselman.com/blog/TheNETFrameworkAndTheBrowsersUserAgentString.aspx](http://www.hanselman.com/blog/TheNETFrameworkAndTheBrowsersUserAgentString.aspx)

当您使用浏览器时，用户代理将已更新以包含任何必要的信息，因此很遗憾您将无法获得原始的干净版本。

通常，您希望在浏览器嗅探上使用特征检测，但正如您所提到的，它有适当的用例。我知道这并没有像您希望的那样回答问题，但希望它可以解释正在发生的事情。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-12-05T01:46:04.307

据我所知，不可能通过“功能检测”方法在客户端上获取已安装的 .NET Framework 版本。userAgent 字符串是唯一的方法，它被破坏了。

# c# - 将处理程序的结果转换为数组格式

> ID：15052683
> 
> 赞同：1
> 
> 时间：2013-02-24T14:27:21.833
> 
> 标签：c#, javascript, jquery, asp.net

作为开发中的新蜜蜂，我有一个问题，我如何根据我对最佳实践的要求获取数据

我的设计是这样的。

Java 脚本（Ajax 调用）>> ashx 处理程序（命中数据库并返回数据）>> 数据库（我的值）

我需要这样的数据才能在 HTML 中呈现

```
 var events_array = new Array();
            events_array[0] = {
                startDate: new Date(2013, 01, 25),
                endDate: new Date(2013, 01, 25),
                title: "Event 2013, 01, 25",
                description: "Description 2013, 01, 25",
                priority: 1, // 1 = Low, 2 = Medium, 3 = Urgent
                frecuency: 1 // 1 = Daily, 2 = Weekly, 3 = Monthly, 4 = Yearly
            };

            events_array[1] = {
                startDate: new Date(2013, 01, 24),
                endDate: new Date(2013, 01, 24),
                title: "Event 2013, 01, 24",
                description: "Description 2013, 01, 24",
                priority: 2, // 1 = Low, 2 = Medium, 3 = Urgent
                frecuency: 1 // 1 = Daily, 2 = Weekly, 3 = Monthly, 4 = Yearly
            }

            events_array[2] = {
                startDate: new Date(2013, 01, 07),
                endDate: new Date(2013, 01, 07),
                title: "Event 2013, 01, 07",
                description: "2013, 01, 07",
                priority: 3, // 1 = Low, 2 = Medium, 3 = Urgent
                frecuency: 1 // 1 = Daily, 2 = Weekly, 3 = Monthly, 4 = Yearly
            } 
```

我想知道如何从我的 ashx 处理程序发送这样的数据。

我有一堂 EventEnfo 课。我可以从处理程序传递 EventInfo 列表并在上面的数组中格式化/转换它吗？? 请问有什么例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T14:31:29.203

events_array 不是一个数组，它是一个对象，所以做 new Array 是错误的。做新对象或更好的{}：

```
var events_array = {};
events_array[0] = {... 
```

如果您的后端可以将内容转换为 JSON 对象，您可以通过 ajax 将其发送到客户端并解析它

```
JSON.parse(obj); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T14:31:39.290

你可以使用一个[`JavaScriptSerializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx). 因此，您可以从设计一个匹配所需 JSON 结构的模型开始：

```
public class EventInfo
{
    public DateTime startDate { get; set; }
    public DateTime endDate { get; set; }
    public string title { get; set; }
    ...
} 
```

然后在您的处理程序中：

```
public void ProcessRequest(HttpContext context)
{ 
    IEnumerable<EventInfo> result = ... fetch from db
    var serializer = new JavaScriptSerializer();
    context.Response.ContentType = "application/json";
    context.Response.Write(serializer.Serialize(result));
} 
```

* * *

更新：

以下是您可以使用结果的方式：

```
$.ajax({
    url: '/myhandler.ashx',
    success: function(events) {
        $.each(events, function() {
            alert('Title of the event: ' + this.title);
        })
    }
}); 
```

# c# - 图片上传需要每次都将图片包含在解决方案中

> ID：15052684
> 
> 赞同：1
> 
> 时间：2013-02-24T14:27:38.277
> 
> 标签：c#, asp.net, image-upload

我需要上传图片。我编码如下：

```
string filename = "";
            string FilePath = "";
            filename = Path.GetFileName(FileImage.FileName);
            FilePath = Server.MapPath("./JQueryImages");
            string destPath = Path.Combine(FilePath, filename);
            FileImage.PostedFile.SaveAs(destPath);
            ViewState["ImagePath"] = destPath.ToString();
            ImgUploaded.ImageUrl = destPath;
            LblUploadMsg.Text = "Image uploaded successfully";
            LblUploadMsg.ForeColor = Color.Green; 
```

图像进入一个文件夹`JQueryImages`，但我有一个图像控件`ImgUploaded`在加载时不显示图像。当我检查我的解决方案文件夹图像时没有加载。我需要`to include each image`上传后。我不想包含每个图像。什么可以解决这个问题。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:58:31.677

```
 string filename = "";
            string FilePath = "";
            filename = Path.GetFileName(FileUpload1.FileName);
            FilePath = Server.MapPath("./JQueryImages");
            string destPath = Path.Combine(FilePath, filename);
            FileUpload1.PostedFile.SaveAs(destPath);
            ViewState["ImagePath"] = destPath.ToString();
            Image1.ImageUrl = "~/JQueryImages/" + filename;
            Label1.Text = "Image uploaded successfully";
            Label1.ForeColor = Color.Green; 
```

这是我使用的最终代码。现在可以了。

# c# - 尝试从列表框中删除/删除项目时，为什么我收到错误：无法修改项目集合？

> ID：15052686
> 
> 赞同：0
> 
> 时间：2013-02-24T14:27:42.913
> 
> 标签：c#

我有这段代码，我单击 Delete 键，它应该从 listBox 中删除一个项目：

```
private void listBox1_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.KeyCode == Keys.Delete)
            {
                if (this.listBox1.SelectedIndex >= 0)
                    this.listBox1.Items.RemoveAt(this.listBox1.SelectedIndex);
            }
        } 
```

但是，只要我按下删除键，我就会在 RemoveAt 行出现错误：

设置 DataSource 属性时无法修改项目集合。

现在我在 Form1 的其他两个地方使用了 DataSource： 首先：

```
private void ListBoxLoadKeys(Dictionary<string, List<string>> dictionary, string FileName)
        {
            using (StreamReader sr = new StreamReader(FileName))
            {
                while ((line = sr.ReadLine()) != null)
                {
                    int i = line.Count();
                    tokens = line.Split(',');
                    dictionary.Add(tokens[0], tokens.Skip(1).ToList());
                    data.Add("Url: " + tokens[0] + " --- " + "Localy KeyWord: " + tokens[1]);
                }
            }
            listBox1.DataSource = data;
        } 
```

第二个地方：

```
private void ClearListBox()
        {
            data.Clear();
            listBox1.DataSource = null;
            string sb;
            foreach (KeyValuePair<string, List<string>> kvp in LocalyKeyWords)
            {
                for (int i = 0; i < kvp.Value.Count(); i++)
                {
                    sb = "Url: " + kvp.Key + " --- " + "Local KeyWord: " + kvp.Value[i] + Environment.NewLine;
                    data.Add(sb.ToString());
                }
            }
            listBox1.DataSource = data;
            listBox1.Select();
        } 
```

那么我可以使用什么来代替 DataSource 或保留它？

编辑：

试过这个：

```
private void listBox1_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.KeyCode == Keys.Delete)
            {
                if (this.listBox1.SelectedIndex >= 0)
                {
                    string obj = this.listBox1.SelectedValue.ToString();
                    data.Remove(obj);
                    listBox1.DataSource = null;
                    listBox1.DataSource = data;
                }
            }

        } 
```

但是当单击 Delete 键时，我在这里遇到错误：

```
private void listBox1_DrawItem(object sender, DrawItemEventArgs e)
        {
            string url = data[e.Index].Substring(0, 5);

            using (Font f = new Font(FontFamily.GenericSansSerif, 8, FontStyle.Regular))
            {
                ColorText.ColorListBox(data, e);
            }

        } 
```

在字符串 url 行：索引超出范围。必须是非负数且小于集合的大小

编辑：

我尝试使用标志：

```
private void listBox1_DrawItem(object sender, DrawItemEventArgs e)
        {
            if (deletedKey != true)
            {
                string url = data[e.Index].Substring(0, 5);

                using (Font f = new Font(FontFamily.GenericSansSerif, 8, FontStyle.Regular))
                {
                    ColorText.ColorListBox(data, e);
                }
            }
        } 
```

和：

```
private void listBox1_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.KeyCode == Keys.Delete)
            {
                if (this.listBox1.SelectedIndex >= 0)
                {
                    deletedKey = true;
                    string obj = this.listBox1.SelectedValue.ToString();
                    data.Remove(obj);
                    listBox1.DataSource = null;
                    listBox1.DataSource = data;
                }
            }

        } 
```

所以现在我没有收到错误，但它正在删除列表框中的所有项目我需要它来只删除现在/选定的一个即时消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T14:40:55.373

使用数据绑定时，您从数据源而不是 ListBox 中删除。

```
private void listBox1_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.KeyCode == Keys.Delete)
            {
                if (this.listBox1.SelectedIndex >= 0)
                {
                   string obj = this.listBox1.SelectedValue.ToString();
                   data.Remove(obj);
                   listBox1.DataSource = null;
                   listBox1.DataSource = data;
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T14:43:57.730

您可以直接添加到列表框中，如下所示：

```
 listbox1.BeginUpdate();
   for (int i = 0; i < kvp.Value.Count(); i++)
                {
                    sb = "Url: " + kvp.Key + " --- " + "Local KeyWord: " + kvp.Value[i] + Environment.NewLine;
                    listbox1.Add(sb.ToString());
                }
   listbox1.EndUpdate(); 
```

# java - 将 html 文件加载到 JEditorPane

> ID：15052690
> 
> 赞同：1
> 
> 时间：2013-02-24T14:27:56.120
> 
> 标签：java, html, swing

谁能告诉我如何将 html 文档加载到 JEditorPane 中。我尝试了以下似乎不起作用的方法：

```
try{
    URL h = new URL("file://test.html");
    pane.setPage(h); 
} catch (Exception e) {} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T07:25:30.457

**Open html file in jeditor pane in java**

```
 JeditorPane editorpane= new JEditorPane();
       editorScrollPane = new JScrollPane(editorpane);
       editorScrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
       File file = new File("F://test.htm");
       editorpane.setPage(file.toURI().toURL());
       editorpane.setEditable(true); 
```

Hope this will help you, Here this is working

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:04:06.333

[如何使用 .jar 文件之外的本地文件设置 JEditorPane 的 setPage()？](https://stackoverflow.com/questions/4534881/how-to-setpage-a-jeditorpane-with-a-localfile-which-is-outside-of-the-jar-fil)

```
// get location of the code source
URL url = yourpackage.Main.class.getProtectionDomain().getCodeSource().getLocation();

    try {
        // extract directory from code source url
        String root = (new File(url.toURI())).getParentFile().getPath();
        File doc = new File(root, "test.htm");
        // create htm file contents for testing
        FileWriter writer = new FileWriter(doc);
        writer.write("<h1>Test</h1>");
        writer.close();
        // open it in the editor
        editor.setPage(doc.toURI().toURL());
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T15:17:20.740

你可以按照sun关于swing的webview教程的教程... :) [http://docs.oracle.com/javafx/2/swing/SimpleSwingBrowser.java.htm](http://docs.oracle.com/javafx/2/swing/SimpleSwingBrowser.java.htm)

我正在粘贴他们演示的源代码。

```
import javafx.application.Platform;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.embed.swing.JFXPanel;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.web.WebEngine;
import javafx.scene.web.WebEvent;
import javafx.scene.web.WebView;

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.net.MalformedURLException;
import java.net.URL;

import static javafx.concurrent.Worker.State.FAILED;

public class SimpleSwingBrowser implements Runnable {
    private JFXPanel jfxPanel;
    private WebEngine engine;

    private JFrame frame = new JFrame();
    private JPanel panel = new JPanel(new BorderLayout());
    private JLabel lblStatus = new JLabel();

    private JButton btnGo = new JButton("Go");
    private JTextField txtURL = new JTextField();
    private JProgressBar progressBar = new JProgressBar();

    private void initComponents() {
        jfxPanel = new JFXPanel();

        createScene();

        ActionListener al = new ActionListener() {
            @Override public void actionPerformed(ActionEvent e) {
                loadURL(txtURL.getText());
            }
        };

        btnGo.addActionListener(al);
        txtURL.addActionListener(al);

        progressBar.setPreferredSize(new Dimension(150, 18));
        progressBar.setStringPainted(true);

        JPanel topBar = new JPanel(new BorderLayout(5, 0));
        topBar.setBorder(BorderFactory.createEmptyBorder(3, 5, 3, 5));
        topBar.add(txtURL, BorderLayout.CENTER);
        topBar.add(btnGo, BorderLayout.EAST);

        JPanel statusBar = new JPanel(new BorderLayout(5, 0));
        statusBar.setBorder(BorderFactory.createEmptyBorder(3, 5, 3, 5));
        statusBar.add(lblStatus, BorderLayout.CENTER);
        statusBar.add(progressBar, BorderLayout.EAST);

        panel.add(topBar, BorderLayout.NORTH);
        panel.add(jfxPanel, BorderLayout.CENTER);
        panel.add(statusBar, BorderLayout.SOUTH);

        frame.getContentPane().add(panel);
    }

    private void createScene() {

        Platform.runLater(new Runnable() {
            @Override public void run() {

                WebView view = new WebView();
                engine = view.getEngine();

                engine.titleProperty().addListener(new ChangeListener<String>() {
                    @Override
                    public void changed(ObservableValue<? extends String> observable, String oldValue, final String newValue) {
                        SwingUtilities.invokeLater(new Runnable() {
                            @Override public void run() {
                                frame.setTitle(newValue);
                            }
                        });
                    }
                });

                engine.setOnStatusChanged(new EventHandler<WebEvent<String>>() {
                    @Override public void handle(final WebEvent<String> event) {
                        SwingUtilities.invokeLater(new Runnable() {
                            @Override public void run() {
                                lblStatus.setText(event.getData());
                            }
                        });
                    }
                });

                engine.locationProperty().addListener(new ChangeListener<String>() {
                    @Override
                    public void changed(ObservableValue<? extends String> ov, String oldValue, final String newValue) {
                        SwingUtilities.invokeLater(new Runnable() {
                            @Override public void run() {
                                txtURL.setText(newValue);
                            }
                        });
                    }
                });

                engine.getLoadWorker().workDoneProperty().addListener(new ChangeListener<Number>() {
                    @Override
                    public void changed(ObservableValue<? extends Number> observableValue, Number oldValue, final Number newValue) {
                        SwingUtilities.invokeLater(new Runnable() {
                            @Override public void run() {
                                progressBar.setValue(newValue.intValue());
                            }
                        });
                    }
                });

                engine.getLoadWorker()
                        .exceptionProperty()
                        .addListener(new ChangeListener<Throwable>() {

                            public void changed(ObservableValue<? extends Throwable> o, Throwable old, final Throwable value) {
                                if (engine.getLoadWorker().getState() == FAILED) {
                                    SwingUtilities.invokeLater(new Runnable() {
                                        @Override public void run() {
                                            JOptionPane.showMessageDialog(
                                                    panel,
                                                    (value != null) ?
                                                    engine.getLocation() + "\n" + value.getMessage() :
                                                    engine.getLocation() + "\nUnexpected error.",
                                                    "Loading error...",
                                                    JOptionPane.ERROR_MESSAGE);
                                        }
                                    });
                                }
                            }
                        });

                jfxPanel.setScene(new Scene(view));
            }
        });
    }

    public void loadURL(final String url) {
        Platform.runLater(new Runnable() {
            @Override public void run() {
                String tmp = toURL(url);

                if (tmp == null) {
                    tmp = toURL("http://" + url);
                }

                engine.load(tmp);
            }
        });
    }

    private static String toURL(String str) {
        try {
            return new URL(str).toExternalForm();
        } catch (MalformedURLException exception) {
                return null;
        }
    }

    @Override public void run() {

        frame.setPreferredSize(new Dimension(1024, 600));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        initComponents();

        loadURL("http://oracle.com");

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new SimpleSwingBrowser());
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T15:02:53.757

使用绝对路径怎么样？查看[java.lang.System.getProperties](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#getProperties%28%29)并使用“user.dir”即获得一些绝对路径来增强您的文件 url。

# ibm-mq - 如何保证订单保存？

> ID：15052691
> 
> 赞同：0
> 
> 时间：2013-02-24T14:28:20.450
> 
> 标签：ibm-mq

我们有一个将消息发布到单个主题的应用程序。消息预计将被多个订阅者应用程序以与它们发布时完全相同的顺序使用。

复杂之处在于，每个订阅者将使用不同的消息选择器根据其属性过滤消息。过滤器将使得订阅者读取的消息之间没有重叠。例如

时间消息属性

t1 m1 红色

t2 m2 蓝色

t3 m3 红色

假设订阅者 S1 订阅读取 color=red 而 S2 订阅读取 color=blue，我们需要 S1 读取 m1 并被阻塞，直到 S2 读取 m2。只有在 S2 读取 m2 后，S1 才会读取 m3。

这在 Websphere MQ 7.0 中是否可行？如果可以，我们应该为队列管理器使用什么配置以及我们应该在 MQGET 操作中使用什么选项？

谢谢， 亚什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:48:37.270

在发布/订阅消息中，发布者不知道订阅者，订阅者也不知道另一个订阅者的存在。我认为任何消息传递提供商都不会拥有您正在寻找的功能。

实现 S1 通知 S2 接收消息的事件机制对您来说可能很简单。

# iphone - UITableView 推送时移到顶部

> ID：15052693
> 
> 赞同：0
> 
> 时间：2013-02-24T14:28:26.010
> 
> 标签：iphone, ipad, uitableview

我`UITableViewController`用来显示嵌入到自定义容器中的数据，但问题是当我尝试推送另一个视图控制器并再次弹出它时，我注意到它`UITableView`被移到了顶部。有什么解决方案可以让我解决吗？

你可以在这里看到错误：

**推前**

![](../Images/ab8aaa51e65f304b81b52e3469e3df02.png)

**推送和弹出后**

![](../Images/fde61056072683d2d9239e39823f06c6.png)

# android - 我正在尝试从 Json 输出中获取位置名称到字符串并将其传递给变量

> ID：15052695
> 
> 赞同：1
> 
> 时间：2013-02-24T14:28:34.817
> 
> 标签：android, api, geocoding, reverse, using

我正在尝试从以下 json 中获取位置名称

[http://maps.googleapis.com/maps/api/geocode/json?latlng=18.486096,73.802027&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?latlng=18.486096,73.802027&sensor=false)返回 JSON 的特定地址。我正在开发一个 android 应用程序来使用 api 反向地理编码。

这是下面的代码..

```
public class MyGeocoder 
{
public static String getUserLocation(Location loc) {

    String userlocation = null;
    String readUserFeed = readUserLocationFeed((Double.toString(loc.getLatitude())) +
    ","+( Double.toString(loc.getLongitude())));
    try {
        //JSONObject Strjson = new JSONObject(readUserFeed);
        JSONArray jsonArray = new JSONArray(readUserFeed);
        JSONObject jsonObject=jsonArray.getJSONObject(0);
        userlocation = jsonObject.getString("locality").toString();

    } catch (Exception e) {
        e.printStackTrace();
    }
    Log.i("User Location ", userlocation);
    return userlocation;
}

  public static String readUserLocationFeed(String address) {
    StringBuilder builder = new StringBuilder();
    HttpClient client = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet("http://maps.google.com/maps/api/geocode/json?
    latlng="+ address + "&sensor=false");
    try {
        HttpResponse response = client.execute(httpGet);
        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        if (statusCode == 200) {
            HttpEntity entity = response.getEntity();
            InputStream content = entity.getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(content));
            String line;
            while ((line = reader.readLine()) != null) {
                builder.append(line);
            }
        } else {
            //Log.e(ReverseGeocode.class.toString(), "Failed to download file");
        }
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return builder.toString();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T05:47:48.940

对于解析 json，你做错了。首先 url 返回一个`JSONObject`包含一个`JSONArray`“**结果**”和一个字段“**状态**”。因此，您应该取消注释以下行：

```
JSONObject Strjson = new JSONObject(readUserFeed); 
```

我建议您检查**状态**字段的值以查看它是否正常，并且它具有如下数据：

```
if(Strjson.getString("status").equals("OK")) { ... } 
```

然后得到`JSONArray`使用：

```
JSONArray result = Strjson.getJSONArray("result"); 
```

并遍历每个`JSONObject`以获取您需要的字段值，**但是**您得到的 json 不包含名称为“locality”的字段，而是包含它作为类型字段的值之一。

# javascript - 计算数组中的唯一元素而不进行排序

> ID：15052702
> 
> 赞同：35
> 
> 时间：2013-02-24T14:29:36.430
> 
> 标签：javascript, sorting

在 JavaScript 中，以下将找到数组中元素的数量。假设数组中至少有一个元素

```
arr = ["jam", "beef", "cream", "jam"]
arr.sort();
var count = 1;
var results = "";
for (var i = 0; i < arr.length; i++)
{
    if (arr[i] == arr[i+1])
    {
      count +=1;
    }
    else
    {
        results += arr[i] + " --> " + count + " times\n" ;
        count=1;
    }
} 
```

是否可以在不使用 sort() 或不以任何方式改变数组的情况下做到这一点？我想必须重新创建数组，然后可以对新创建的数组进行排序，但我想知道不排序的最佳方法是什么。是的，我是艺术家，不是程序员，你的荣誉。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2017-06-07T06:50:48.660

最快的方法是使用[`new Set()`object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)。

> 套装很棒，我们应该更频繁地使用它们。它们速度很快，并且受到 Chrome、Firefox、Microsoft Edge 和 node.js 的支持。
> —*[什么是更快的 Set 或 Object？](https://github.com/anvaka/set-vs-object#benchmark-faster-way-to-count-unique-objects)*安德烈·卡什查

a 中的项目`Set`将始终是唯一的，因为它只保留您输入的每个值的一个副本。这是一个使用此属性的函数：

```
function countUnique(iterable) {
  return new Set(iterable).size;
}

console.log(countUnique('banana')); //=> 3
console.log(countUnique([5,6,5,6])); //=> 2
console.log(countUnique([window, document, window])); //=> 2
```

这可用于计算任何[可迭代](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of)对象（包括 Array、String、TypedArray 和 arguments 对象）中的项目。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2013-02-24T14:34:09.403

一种快速的方法是将唯一元素复制到对象中。

```
var counts = {};
for (var i = 0; i < arr.length; i++) {
    counts[arr[i]] = 1 + (counts[arr[i]] || 0);
} 
```

当这个循环完成时，`counts`对象将拥有数组中每个不同元素的计数。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2018-03-07T16:09:33.987

为什么不这样：

```
var arr = ["jam", "beef", "cream", "jam"]
var uniqs = arr.reduce((acc, val) => {
  acc[val] = acc[val] === undefined ? 1 : acc[val] += 1;
  return acc;
}, {});
console.log(uniqs)
```

纯 Javascript，在*O(n)*中运行。除非您的唯一值数量等于元素数量（所有元素都是唯一的），否则也不会占用太多空间。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-08-20T23:54:56.777

与[此解决方案](https://stackoverflow.com/a/15052738/7311767)相同，但代码更少。

```
let counts = {};
arr.forEach(el => counts[el] = 1  + (counts[el] || 0)) 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-02-24T14:32:21.500

此表达式为您提供数组中的所有唯一元素，而不会对其进行变异：

```
arr.filter(function(v,i) { return i==arr.lastIndexOf(v); }) 
```

你可以用这个表达式链接它来构建你的结果字符串而不用排序：

```
.forEach(function(v) {
     results+=v+" --> " + arr.filter(function(w){return w==v;}).length + " times\n";
}); 
```

在第一种情况下，过滤器只包含每个特定元素的最后一个；在第二种情况下，过滤器包括该类型的所有元素，并`.length`给出计数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-22T15:09:02.103

```
function reomveDuplicates(array){
        var newarray = array.filter( (value, key)=>{
            return array.indexOf(value) == key
        });
        console.log("newarray", newarray);
    }
reomveDuplicates([1,2,5,2,1,8]); 
```

使用时间复杂度 O(n) 的哈希映射

```
function reomveDuplicates(array){

    var obj ={};
    let res=[];

    for( arg of array){
        obj[arg] = true;
    }

    console.log(Object.keys(obj));

    for(key in obj){
        res.push(Number(key));  // Only if you want in Number 
    }

    console.log(res);
}
reomveDuplicates([1,2,5,2,1,8]); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-16T18:37:10.683

在一种现代、可扩展且易于阅读的方法中，这里有一个使用[iter-ops](https://github.com/vitaly-t/iter-ops)库的方法：

```
import {pipe, distinct, count} from 'iter-ops';

const arr = ['jam', 'beef', 'cream', 'jam'];

const count = pipe(arr, distinct(), count()).first;

console.log(count); //=> 3 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-08T09:03:56.827

```
function check(arr) {
    var count = 0;

 for (var ele of arr) {

    if (typeof arr[ele] !== typeof (arr[ele+1])) {
      count++;
    } else {
      ("I don't know");
    }
  }
  return count;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-03T16:28:40.467

此答案适用于**初学者**。试试这个方法，你可以轻松解决这个问题。您可以从此链接找到有关 reduce、filter、map 函数[的](https://www.youtube.com/watch?v=zdp0zrpKzIE)完整课程。

```
const user = [1, 2, 2, 4, 8, 3, 3, 6, 5, 4, 8, 8];

const output = user.reduce(function (acc, curr) {
    if (acc[curr]) {
        acc[curr] = ++acc[curr];
    } else {
        acc[curr] = 1;
    }
    return acc;
}, {});

console.log(output);
```

# python - 如何在递归函数中创建计数器

> ID：15052704
> 
> 赞同：2
> 
> 时间：2013-02-24T14:29:40.390
> 
> 标签：python, recursion

```
def printMove(source, destination): 
    print('move From ' + str(source) + ' to destination ' + str(destination))
    count +=1
    print count

def Towers(n, source, destination, spare):
    if not count in  locals():
        count = 0
    if n == 1:
        printMove(source, destination)
        count +=1   
    else:
        Towers(n-1, source, spare, destination)
        Towers(1, source, destination, spare)
        Towers(n-1, spare, destination, source) 
```

我写了这个脚本来解决“河内塔”。该脚本运行良好，但我还想打印解决问题所需的移动次数。我只是无法弄清楚如何放置一种可以计数的计数器：

1.  解决所需的移动次数。
2.  “Towers”函数执行的次数。

`if not count in locals():`条件是计算将要解决的移动次数的失败尝试之一。反正我是在正确的轨道上吗？

另外，这个算法有效吗？或者有没有更好的方法来解决这个问题？

此外，有人能告诉我河内塔的一些有用应用和递归的优势吗？我唯一能想到的是它的简单性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T14:45:54.017

一种方法是让计数器通过所有这样的调用：

```
def towers(n, source, destination, spare, count=0):
    if n == 1:
        count += 1
        print('move From', source, ' to destination ', destination, count)
    else:
        count = towers(n-1, source, spare, destination, count)
        count = towers(1, source, destination, spare, count)
        count = towers(n-1, spare, destination, source, count)
    return count

towers(3, 1, 2, 3) 
```

产量

```
move From 1  to destination  2 1
move From 1  to destination  3 2
move From 2  to destination  3 3
move From 1  to destination  2 4
move From 3  to destination  1 5
move From 3  to destination  2 6
move From 1  to destination  2 7 
```

关于效率，[http](http://en.wikipedia.org/wiki/Tower_of_Hanoi#Recursive_solution) ://en.wikipedia.org/wiki/Tower_of_Hanoi#Recursive_solution说：“通过数学归纳法，很容易证明上述过程需要尽可能少的移动，并且产生的解决方案是只有一个动作最少的人。”。

递归的主要优点是这些解决方案往往是优雅的。对于某些类型的问题，迭代解决方案比递归解决方案更复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T14:37:57.370

最简单的方法是使用全局变量：

```
count = 0

def runTowers(...):
    global count
    count = 0
    Towers(...)

def Towers(...):
    global count
    count += 1
    ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T14:49:00.980

您可以创建一个函数对象而不是函数：

```
class Towers:

    def __init__(self):
        self.count = 0

    def __call__(self, n, source, destination, spare):
        if n == 1:
            self.printMove(source, destination)
            self.count +=1   
        else:
            self(n-1, source, spare, destination)
            self(1, source, destination, spare)
            self(n-1, spare, destination, source)

    def printMove(self, source, destination):
        print('move From ' + str(source) + ' to destination ' 
              + str(destination))
        print(self.count)

towers = Towers()
towers(3, 1, 2, 2) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T17:10:18.040

我更喜欢这个版本，没有额外的参数“count”：

```
def towers(n, source, destination, spare):
    count = 0
    if n == 1:
        print('move From', source, ' to destination ', destination)
        return 1
    else:
        count += towers(n-1, source, spare, destination)
        count += towers(1, source, destination, spare)
        count += towers(n-1, spare, destination, source)
        return count

print(towers(3, 1, 2, 3)) 
```

产量

```
move From 1  to destination  2
move From 1  to destination  3
move From 2  to destination  3
move From 1  to destination  2
move From 3  to destination  1
move From 3  to destination  2
move From 1  to destination  2
7 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T14:39:40.947

上面的答案应该会给你答案:)

就效率而言，您的解决方案似乎适用于 n 个塔。如果您希望更有效地解决经典问题，请查看此链接：

[http://www.vogella.com/articles/JavaAlgorithmsTowersOfHanoi/article.html](http://www.vogella.com/articles/JavaAlgorithmsTowersOfHanoi/article.html)

最后，递归的设计目的是制作非常简单的算法，可以使用基本代码执行复杂的计算。缺点是它是内存密集型的（每次调用都会在最后一次调用的堆栈上放置一个新的内存地址）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-18T15:46:55.350

没有时间暂停它，它会很快达到递归限制

```
import time
def loop_forever(count):
    if count == 0:
        print(count)
        time.sleep(1)
        loop_forever(1)
    if count > 0:
        print(count)
        time.sleep(1)
        loop_forever(count + 1)

loop_forever(0) 
```

# html - 居中对齐时如何使单选按钮齐平？

> ID：15052707
> 
> 赞同：0
> 
> 时间：2013-02-24T14:30:13.803
> 
> 标签：html, css, input, radio-button

我有一些需要居中对齐的单选按钮，它们就是。唯一的问题是左侧的按钮现在不统一。见下图：

![在此处输入图像描述](../Images/c9cccae0ccbcc0e3a43af6f289821429.png)

我将如何保持这些居中但使它们对齐？

我习惯于`text-align: center;`把所有东西都放在中心。

这是我的 HTML：

```
<div class="select clearfix">
  <div id="product-select" name="id">
    <input type="radio" value="273138236" name="product">
    black + walnut - $190.00
    <br>
    <input type="radio" value="277905554" name="product">
    brown + walnut - $190.00
    <br>
    <input type="radio" value="277905654" name="product">
    black + cherry - $190.00
    <br>
    <input type="radio" value="277905752" name="product">
    brown + cherry - $190.00
    <br>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T14:33:09.753

将它们包装在具有`text-align: left`. 您可以将`#product-select`div 用于此目的。但是，您很可能需要切换到另一种技术来使 div 居中，因为`text-align`它不会影响块级元素。

并且为了可用性，使用`<label>`元素，这样人们就不必单击微小的单选按钮本身。

# jquery - 有限制的 jQuery 滑块

> ID：15052711
> 
> 赞同：0
> 
> 时间：2013-02-24T14:30:54.420
> 
> 标签：jquery, slider

我正在使用 jQuery Slider 让用户选择升级服务器所需的费用。我希望显示整个滑块，但我希望限制滑块，以便用户无法将滑块向后滑动超过他们已经支付的金额。

滑块本身不受限制地工作：

```
 $("#slider").slider({

        value: current_donation,
        min: 0,
        max: 120,
        step: 1,
        slide: function(event, ui) {
            $("#price").val(t[ui.value]);
            $("#amount").val(p[ui.value]);
            var aaa = $("#price").val();
            $("#total").val(+aaa - current_donation); 
         });

    $("#price").val('$' + $("#slider").slider("value"));

    $("#price").val(current_donation);

    } 
```

但是，当我尝试添加限制时

```
 $("#slider").slider({

        value: current_donation,
        min: 0,
        max: 120,
        step: 1,
        slide: function(event, ui) {
            if(ui.value < 40) {
            return false;
          }
            $("#price").val(t[ui.value]);
            $("#amount").val(p[ui.value]);
            var aaa = $("#price").val();
            $("#total").val(+aaa - current_donation); 
         });

    $("#price").val('$' + $("#slider").slider("value"));

    $("#price").val(current_donation);

    } 
```

整个事情都被禁用了，滑块甚至没有出现。有谁知道我要去哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:42:00.130

为什么不使用滑块 api 添加此限制。

```
var min = $("#slider").slider( "option", "min" );

$("#slider").slider("option", "min", 40); 
```

# c# - keyDown 事件在文本框上不起作用

> ID：15052713
> 
> 赞同：1
> 
> 时间：2013-02-24T14:31:25.350
> 
> 标签：c#, winforms

我有一个简单的登录表单，我已将其接受按钮属性设置为“确定”按钮，并且我有一个文本框“用户名”，我将其设置为 KeyDown 事件以进行一些处理。Ok 已启用设置为 false。

```
btnOk.Enbled = false;  
this.AcceptButton = btnOk;
txtUsername.KeyDown += new KeyEventHandler(KeyDownHandle); 
```

当我在用户名文本框中按 Enter 键时，我会进行一些处理，然后将启用的接受按钮设置为 true。

```
private void KeyDownHandle(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Enter)
    {
        // some processing
        btnOk.Enabled = true;
        txtPassword.Focus();
    }
} 
```

然后我在密码文本框中输入密码并按回车键，因此触发“OK.Click”。

但问题是 keyDown 不起作用，因为“接受按钮”。
我能做些什么来解决这个问题？

编辑：只想说如果我将acceptButton设置为“none”，问题就解决了，但这不是我想要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T14:48:17.733

为什么不`this.AcceptButton = btnOk`从构造函数中删除（我想）并将其放入 `KeyDownHandler`，这样`btnOk`只有在启用并插入用户名之后才会接受 Enter 键。所以代码应该是这样的：

```
btnOk.Enabled = false;
txtUsername.KeyDown += new KeyEventHandler(textBox1_KeyDown);
btnOk.Click += new EventHandler(button1_Click);

private void KeyDownHandle(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Enter)
    {
        // some processing
        btnOk.Enabled = true;
        this.AcceptButton = btnOk;
        txtPassword.Focus();
    }
} 
```

# asp.net-mvc-4 - 添加新组合值

> ID：15052715
> 
> 赞同：1
> 
> 时间：2013-02-24T14:31:38.483
> 
> 标签：asp.net-mvc-4

我正在构建级联国家、州和城市列表级联组合。我需要以下功能

1.  需要提供带有下拉菜单的搜索功能，我将[其](http://harvesthq.github.com/chosen/)用于该功能。

2.  接下来，我需要让用户从现有的下拉值中进行选择或输入新的值。进入新城市时，国家和州都可以这样做。

所以我的实际问题是，是否有任何免费插件可用于此功能。

如果没有，我有这个实现想法。我将添加一个名为`NEW`下拉的选项，当用户选择它时，将显示文本框供用户输入。`dropdown`并且在提交时，如果文本框值为空，我可以从中获取值。

对此实施的任何想法`MVC4`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:47:10.050

你可以用这个。这提供了搜索和添加新选项功能

[性感组合](http://code.google.com/p/sexy-combo/)

# php - 如何将 wordpress 包含和登录管理添加到自定义模块？

> ID：15052718
> 
> 赞同：0
> 
> 时间：2013-02-24T14:32:05.147
> 
> 标签：php, wordpress, constructor, include

我正在构建一个以 Constructor 为主题的 Wordpress 网站。我必须添加自定义编码来解决我的目标。有一个模块，让用户将子元素添加到他的个人资料中，这将被保存到数据库中。（创建、更新、删除）此功能通过以下文件完成：

```
wp-content\themes\constructor\crud\
 destroy_user.php,
 get_users.php,
 save_user.php,
 show_form.php,
 update_user.php 
```

目前这些文件没有包含，它们只能从自定义编码页面模板中调用。到目前为止，他们工作。

现在我想开发这个模块来处理多个用户。为此，我需要知道谁在使用该模块。我在自定义页面模板中知道这一点，但在 ex 中的代码中却不知道。get_users.php 。例如我想使用

```
$user_id = get_current_user_id(); 
```

在 get_users.php 中控制 sql 并在用户未登录时重定向用户。**我必须包含哪些文件以及如何包含才能使用 get_current_user_id()？** （简单地包含'../../../../wp-includes/user.php'并不能解决它。）

感谢您的帮助，西罗

编辑：这是 wp-content\themes\constructor\crud\get_users.php

```
<?php

    $page = isset($_POST['page']) ? intval($_POST['page']) : 1;
    $rows = isset($_POST['rows']) ? intval($_POST['rows']) : 10;
    $offset = ($page-1)*$rows;
    $result = array();

    include 'conn.php';
    require('../../../../wp-blog-header.php');
    $user_id = get_current_user_id(); //This does not work. If it would be set to = 1, it would work.

    $rs = mysql_query("select count(*) from user_partner where user_id=$user_id");
    $row = mysql_fetch_row($rs);
    $result["total"] = $row[0];
    $rs = mysql_query("select * from user_partner where user_id=$user_id limit $offset,$rows");

    $items = array();
    while($row = mysql_fetch_object($rs)){
        array_push($items, $row);
    }
    $result["rows"] = $items;

    echo json_encode($result);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:40:16.923

因此，目前 Wordpress 主题包含并使用此文件。并且您想创建另一个/使用相同的 php 文件来包含 Wordpress 的功能？

您可以通过以下方式包含 Wordpress 功能：

```
<?php
    require('/root_of_wp_installation/wp-blog-header.php');
    //or     require('../../../../wp-blog-header.php');
    get_categories();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:13:28.363

最后用iframe解决了。不是很安全，但至少还可以。

# algorithm - 使用传送器寻路

> ID：15052720
> 
> 赞同：5
> 
> 时间：2013-02-24T14:32:06.720
> 
> 标签：algorithm, path-finding, robotics, cartesian

我正在使用虚拟机器人（Minecraft 的 ComputerCraft mod 中的海龟）开展一个项目，机器人将在迷宫般的隧道中，并且必须在其中导航。世界已经很方便地划分为瓦片（它们的二维笛卡尔图，每个都有一个可通过/不可通过的布尔值），建造隧道的机器人将在他前进时映射它们。

此外，在机器人需要快速通过的区域周围散布着传送器“捷径”。

问题是：让机器人寻路到目的地的最佳方式是什么？系统将如何识别需要传送器的区域？A* 是最著名的算法，但还有其他更适合该应用程序的算法吗？请记住，我对寻路算法的经验很少，因此您可能需要将事情分解为基本术语以便我理解。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T21:57:25.970

使用 A* 的唯一问题是为您的问题找到一个[可接受的启发式](http://en.wikipedia.org/wiki/Admissible_heuristic)方法。[幸运的是，这里](https://stackoverflow.com/a/14428389/238419)已经回答了这个问题。

> 系统将如何识别需要传送器的区域？

这取决于乌龟实际移动到/离开的位置。如果他总是往返于相同的起点/终点，答案很简单：在起点和终点添加传送。对于更复杂的设置，我猜这是 NP 难的；如果属实，您将不得不研究[全局优化策略](http://en.wikipedia.org/wiki/Global_optimization) *（或者只是尝试一堆随机位置并选择最好的一个）*。

# python - Google App Engine 处理程序不显示内容

> ID：15052721
> 
> 赞同：1
> 
> 时间：2013-02-24T14:32:10.747
> 
> 标签：python, google-app-engine, web-applications

您好我正在尝试让我的 Google App Engine 应用程序在本地主机上运行，​​但是当我尝试运行它时遇到了问题。

这是我试图运行的代码：

```
# helloworld.py    

import webapp2

class MainHandler(webapp2.RequestHandler):
    def get(self):
        #"Test" text is not displayed
        self.response.write("Test")

app = webapp2.WSGIApplication([('/', MainHandler)],
debug=True)

#This line prints the content
print "This works fine" 
```

当我在本地主机上运行开发服务器时，我得到 Code 200 作为响应，但处理程序似乎没有正确执行。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:14:33.947

我解决了这个问题。使用 webapp2 库，我必须将以下代码添加到 *.yaml 文件中：

```
libraries:
- name: webapp2
  version: "2.5.2" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T14:35:09.463

您的代码看起来不错，只需确保您`app.yaml`的处理程序正确。它应该看起来像这样：

```
application: helloworld
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: .*
  script: helloworld.app

libraries:
- name: webapp2
  version: "2.5.2" 
```

如果您还没有完成，您还应该完成[入门教程](https://developers.google.com/appengine/docs/python/gettingstartedpython27/)。

# java - Jar 库的 NoClassDefFoundError

> ID：15052726
> 
> 赞同：0
> 
> 时间：2013-02-24T14:32:32.400
> 
> 标签：java, rdf, sesame

我正在使用 Sesame 访问示例 RDF 存储库，

```
String sesameServer = "http://asimov.ludat.lth.se/openrdf-sesame/";
String repositoryID = "KnowRob";
// Cannot create HTTPRepository
Repository myRepository = new HTTPRepository(sesameServer,repositoryID);
myRepository.initialize();
RepositoryConnection con = myRepository.getConnection(); 
```

但是，在尝试运行上面的代码时，我得到了 NoClassDefFoundError。

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/httpclient/Credentials
    at org.openrdf.repository.http.HTTPRepository.<init>(HTTPRepository.java:54)
    at org.openrdf.repository.http.HTTPRepository.<init>(HTTPRepository.java:59)
    at RDF.Start.main(Start.java:30)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.httpclient.Credentials
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 3 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-13T03:41:16.203

当在用户定义的类和定义的类路径外部 jar 中找不到使用的类时，会发生 NoClassDefFoundError 异常。

因此，请在您的类路径中[下载并配置类路径 commons-httpclient-3.0.1.jar](http://www.java2s.com/Code/Jar/c/Downloadcommonshttpclient301jar.htm)库。

# ruby-on-rails - 生产环境中忽略的自定义设计视图

> ID：15052727
> 
> 赞同：0
> 
> 时间：2013-02-24T14:32:43.657
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise, railsapps

我正在使用由 rails-prelaunch 模板创建的自定义设计视图 - [https://github.com/RailsApps/rails-prelaunch-signup](https://github.com/RailsApps/rails-prelaunch-signup)

在开发中，一切正常。我看到了我期待的设计视图（来自 views/devise 文件夹）。

但是，一旦我切换到生产环境，该应用程序就会开始使用默认的设计 gem 视图。

关于可能发生什么的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:18:56.490

我重新创建了应用程序，一切正常。事实证明，访问模板时出现问题。

我仍然不知道为什么常见的解决方案不起作用，因为事情似乎设置正确。

# java - JScrollPane 不添加组件

> ID：15052731
> 
> 赞同：2
> 
> 时间：2013-02-24T14:33:16.097
> 
> 标签：java, swing

我扩展了 JScrollPane 并向其添加了几个组件。当我将滚动窗格添加到 JFrame 时，不会显示任何组件。如果我的类扩展，例如 JPanel，然后我将它添加到独立的 JScrollPane，一切正常。我无法理解这种行为。谁能解释一下，为什么会这样？

以下是两种变体（一种有效，一种无效）：

此变体不起作用：

```
public class MainScrollPanel extends JScrollPane {

    private JPanel verticalPanel;

    public MainScrollPanel() throws IOException, ParseException {
        initGUI();
        readData();
    }

    private void initGUI() {
        verticalPanel = new JPanel();
        verticalPanel.setLayout(new BoxLayout(verticalPanel, BoxLayout.Y_AXIS));

        add(verticalPanel);
        setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
        setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
    }

    private void readData() throws IOException, ParseException {
        //read data
        //...
        for(NewData message : messages) {
            verticalPanel.add(new JLabel(message.getMessage()));
        }
    }
}

public class MainGUI extends JFrame {
    private MainScrollPanel mainPanel;

    public MainGUI() throws IOException, ParseException {
        super("Scroll app");
        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);

        mainPanel = new MainScrollPanel();
        getContentPane().add(mainPanel);

        setSize(200, 200);
        setVisible(true);
    }

    public static void main(String[] args) throws IOException, ParseException {
        new MainGUI();
    }
} 
```

这个工作正常：

```
public class MainScrollPanel extends JPanel {

    public MainScrollPanel() throws IOException, ParseException {
        initGUI();
        readData();
    }

    private void initGUI() {
        setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));
    }

    private void readData() throws IOException, ParseException {
        //The same as in previous example
    }
}

public class MainGUI extends JFrame {
    private MainScrollPanel mainPanel;

    public MainGUI() throws IOException, ParseException {
        //...
        JScrollPane scrollPane = new JScrollPane(mainPanel, JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED, JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
        getContentPane().add(scrollPane);
        //...
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T14:38:01.110

您可能不需要或不想扩展 JScrollPane，但无论如何，您几乎从不将组件直接添加到 JScrollPane，而是添加到其 Viewport。否则，您将失去视口及其功能。

这可以通过 JScrollPane 方法完成：`setViewportView(Component comp)` 另一种方法是将组件传递到 JScrollPane 的构造函数（或这里是它的*超级*构造函数），因为这会自动将组件传递到视口。这只是一点语法糖。

例如，

```
private void initGUI() {
    verticalPanel = new JPanel();
    verticalPanel.setLayout(new BoxLayout(verticalPanel, BoxLayout.Y_AXIS));

    setViewportView(verticalPanel); // ********** changed *******

    setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
    setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
} 
```

# html - 添加锚标记后，图标在悬停时不会改变颜色。

> ID：15052732
> 
> 赞同：-1
> 
> 时间：2013-02-24T14:33:17.143
> 
> 标签：html, css

我有一个社交媒体小部件，我想将其包含在我的网站中。我有每个小部件的灰度和彩色图像。诀窍是在鼠标悬停时将小部件的颜色更改为灰度颜色。在我插入代码之前，一切似乎都正常工作。悬停不再起作用。有人可以知道如何解决这个问题。提前致谢。

这是html代码。

```
<html>
<header>
<title>image hover</title>
<link rel="stylesheet" type = "text/css" href= "style.css"/>
</header>
<body>
<div id = "wrapper">
<div id = "facebook"><a href = "https://www.facebook.com/pages/CIT-Care/138858432940938/"><img src = "images/facebook.fw.png"/></a></div>
<div id = "twitter"></div>
<div id = "googleplus"></div>
<div id = "whatsapp"></div>
<div id = "skype"></div>
</div>
</body>
</html> 
```

和CSS：

```
body{margin: 0; border:0; padding: 0;}
#wrapper{width: 960px; margin: 50px auto; height: 500px; border: 1px solid #dedede;}
#facebook{background-image: url('images/facebook.fw.png'); background-repeat: no-repeat; float: left; height: 52px; width: 52px;}
#facebook:hover{background-image:url('images/facebook1.fw.png');}
#twitter{background-image: url('images/twitter.fw.png'); background-repeat: no-repeat; float: left; height: 52px; width: 52px; margin-left: 10px;}
#twitter:hover{background-image:url('images/twitter1.fw.png');}
#googleplus{background-image: url('images/googlep.fw.png'); background-repeat: no-repeat; float: left; height: 52px; width: 52px; margin-left: 10px;}
#googleplus:hover{background-image:url('images/googlep1.fw.png');}
#whatsapp{background-image: url('images/whatsapp.fw.png'); background-repeat: no-repeat; float: left; height: 52px; width: 52px; margin-left: 10px;}
#whatsapp:hover{background-image:url('images/whatsapp1.fw.png');}
#skype{background-image: url('images/skype.fw.png'); background-repeat: no-repeat; float: left; height: 52px; width: 52px; margin-left: 10px;}
#skype:hover{background-image:url('images/skype1.fw.png');} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T14:37:10.093

`:hover`可能工作正常，只是你在它前面添加了标签`img`，你看不到变化......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:07:03.297

您不能使用 CSS :hover 更改悬停时的 HTML 元素。你可以改变的是 CSS 样式。在这种情况下，您要做的是将背景图像从 B&G 更改为彩色图像。因此，在您的 html 中，您将其定义为链接，在您的 css 中，您定义其大小、常规背景图像，然后（例如）#facebook a:hover {code stuff}

换句话说，去掉 HTML 中的 ，而是使用 CSS 来定义原始图像和使用背景图像属性的悬停状态图像。另外，不要忘记定义该区域的尺寸。

# php - 使用 Web 服务在 PHP 中自定义文本电子邮件

> ID：15052733
> 
> 赞同：0
> 
> 时间：2013-02-24T14:33:22.523
> 
> 标签：php, iphone, web-services

我想向使用我的应用程序注册的用户发送电子邮件。

我正在使用以下代码使用 Web 服务向我的用户发送电子邮件。

我的消息包含：

```
PARA 1
PARA 2 
PARA 3

$message = "WWOW THIS IS PARA 1\. THIS IS PARA 2\. THIS IS PARA 3"
$this->Mail($email, "Register Success", $message);

    function Mail($to, $subject, $message) 
    {
        $headers  = 'MIME-Version: 1.0' . "\r\n";
        $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
        $headers .= 'From: xxxx! <registration@xxxx.com>' . "\r\n";

        // Mail it
        if(!mail($to, $subject, $message, $headers)) {
            throw new Exception('There was a problem trying to send an email.');
        }
    } 
```

但是我想自定义文本，比如 Verdana 11px 深灰色字体。我怎样才能做到这一点并在 PARA 中形成它们。我的 para 确实包含引号、冒号和逗号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T14:39:05.440

电子邮件可以是 html。把它全部变成html。

```
$message = "<html><body><p style=\"ffont: verdanna 11px\">".$PARA1."<br/>".$PARA2."<br/>".$PARA3."<br/></p></body></html>"; 
```

内联类型——不保证拼写错误和/或有效的 CSS！

# python - Windows 7 + Django 上的 MySQLdb 导入错误

> ID：15052734
> 
> 赞同：0
> 
> 时间：2013-02-24T14:33:36.383
> 
> 标签：python, django, mysql-python

我使用命令**django-admin.py startproject mysite**`python 2.6`安装 并 `MySQL-python-1.2.2.win32-py2.6` 创建了一个新项目 ，它成功创建了项目，我可以运行它。但是当我编辑**mysite/settings.py** 文件以使用 MySQLdb 并再次运行它时，它说

 ****```
Validating models...

Unhandled exception in thread started by bound method Command.inner_run of dja
ngo.contrib.staticfiles.management.commands.runserver.Command object at 0x02BFCB
raise ImproperlyConfigured(Error loading MySQLdb module:)

django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module: DLL l
oad failed: The specified module could not be found. 
```

我尝试搜索所有网络并无法确定问题。是否与设置一些环境变量有关？谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:48:23.120

如果您启动常规 python 并尝试

```
>>> import MySQLdb 
```

然后启动 django shell

```
> python manage.py shell
>>> import MySQLdb 
```

并得到相同的错误，我认为您的系统有错误的 SQL 包 - 这通常是 32 位与 64 位的问题。

挖出实际的 SQL dll（调用`_mysql.pyd`并查看是否可以将其直接导入 pyton（转到包含 dll 的目录，启动 python 和`import _mysql`）。这应该有助于加快诊断速度。

或者，我一直发现[Bitnami 的 django 堆栈](http://bitnami.org/stack/django)是安装和管理我的 Windows django 堆栈最不痛苦的方式。它将一次性设置和管理 Apache HTTP Server、MySQL、Python、SQLite、PostgreSQL、Django。****

# c++ - 变量 x 等于 a 或 b

> ID：15052737
> 
> 赞同：-5
> 
> 时间：2013-02-24T14:34:03.490
> 
> 标签：c++, lazy-evaluation

这是：

```
if(x == a || b){//do something} 
```

如同：

```
if(x == a || x == b){//do something} 
```

?

我认为不是，因为在第一种情况下，我们评估 x 是否等于 a 以及 b 是真还是假。

在第二种情况下，我们评估 x 是否等于 a 以及 x 是否等于 b。而且我明白，在[惰性评估](https://en.wikipedia.org/wiki/Lazy_evaluation)中，如果 x 等于 a，我们就不会进一步评估。

但有人认为，在第一种情况下，我们会问 x 是等于 a 还是 b，所以我想确定一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T14:36:44.733

**没有**。

在 C++ 中，这是：

```
x == a || b  // Same as (x == a) || b 
```

相当于这个：

```
(x == a) || (bool)b 
```

其计算结果为`true`if`x`且`a`等于 OR if`b`计算结果为`true`时转换为`bool`. 另一方面，在 C 中，它等价于：

```
(x == a) || (b != 0) 
```

哪个评估为`true`if`x`并且`a`等于 OR if`b`与 0 不同（这里我们必须做出整数类型的隐式假设`b`，否则将无法编译）。

另一方面，这是：

```
(x == a || x == b) // Same as ((x == a) || (x == b)) 
```

在 C++ 和 C 中计算两者中的`true`一个`x`和`a`相等或`x`和`b`相等（即，如果`x`等于`a`或等于）。`b`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T14:35:37.853

这两个表达式不等价。这个

```
if(x == a || b) 
```

相当于

```
if( (x == a) || (b)) 
```

即 和 的`x==a`或`b`。在 C++ 中，如果计算结果为or`b`以外的任何值，则将其视为.`0``false``true`

第二个测试是否`x==b`而不是简单地测试`b`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T14:35:46.793

不。在 C 中，这相当于：

```
if(x == a || b != 0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T14:36:17.853

第一个读作“如果 x 等于 a，或者如果 b 为真”

第二个读作“如果 x 等于 a，或者如果 x 等于 b”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T14:43:27.230

**不。**

```
if (x == a || b) 
```

等于

```
if ((x == a) || (bool)b) 
```

因为 operator`==`的*优先级*高于 operator `||`。请参阅[运算符优先级表](http://www.difranco.net/compsci/C_Operator_Precedence_Table.htm)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-24T14:45:59.740

你几乎是对的，第一种情况意味着*x 等于 a OR b 是 true*。

惰性求值意味着仅在结果明显之前对表达式进行求值。例如`(x || y)`，在 OR 表达式中，结果将是已知`x==true`的 - 那么整个表达式也必须为真。在 AND 的情况下，如`(x && y)`，结果将在 时显而易见`x==false`。所以你是对的，如果`x==a`，我们已经知道答案并且不需要更多的工作。

# windows-phone-8 - 隐私政策 Windows Phone 8

> ID：15052749
> 
> 赞同：0
> 
> 时间：2013-02-24T14:35:10.537
> 
> 标签：windows-phone-8

我正在开发一个 Windows Phone 8 应用程序，它可以访问联系人和照片，但不会通过网络发送联系人或照片，只需访问联系人并允许用户在我的应用程序中查看他的联系人。我需要在我的应用程序中提供隐私政策吗？Windows App Store 需要这个吗？

谢谢

# jquery - 如何在外部页面上禁用 jQuery 功能

> ID：15052750
> 
> 赞同：0
> 
> 时间：2013-02-24T14:35:11.260
> 
> 标签：jquery, html, hyperlink, anchor, autoscroll

我正在尝试在外部页面上加载锚标记。我正在使用这种方法：

```
<a href="page.html#div> 
```

链接到另一个页面的特定 div。

```
<div name="div">
stuff
</> 
```

到目前为止的问题是该链接仅将我链接到外部页面而不是该页面上的特定 div。我刚刚发现问题在于我包含 jquery。当我按下链接时，正确的 div 会出现一瞬间，然后页面很快变回页面顶部。

有没有办法通过这样的方法在外部页面上禁用 jQuery 的自动滚动：

```
 $(document).ready(function(e) {
 e.preventDefault();  
 }); 
```

我尝试在我的链接中包含这个：

```
onclick="return false; 
```

但这意味着它们不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T14:59:24.057

锚点与`<a>`标签中的 name 属性一起使用，而不是与`<div>`.

链接：

```
<a href="page.html#here>
to link to another page's specific div.
</a> 
```

目标目的地：

```
<a name="here">
stuff
</a> 
```

如果您尝试使用 jQuery 来处理这种行为（例如，通过目标页面中的 javascript 阻止它），那么就会出现问题，因为浏览器首先加载页面，然后在页面中运行 javascript，除非您的默认条件目标页面被隐藏，内容可能会在 jQuery 修改之前以一种方式显示。除非您最初可以使用静态 CSS 样式规则（而不是 javascript）隐藏目标页面，否则您对此无能为力，因为该页面可能会在您的 javascript 运行之前显示。

如果您可以将 javascript 放在第一页中，则可以`#here`从链接中删除 ，以便在单击它们时，它们中没有额外的目标。

如果您可以修改第二页的 HTML，则可以删除`name`目标，这样`#here`就不会执行任何操作。

# c# - InitializeComponent 在 x64 中需要很长时间

> ID：15052751
> 
> 赞同：2
> 
> 时间：2013-02-24T14:35:17.120
> 
> 标签：c#, visual-studio-2008, 64-bit

我用 C# (winforms) 开发了一个应用程序。它非常大，并且在其表单上有很多控件，包括用户控件。如果我将它作为 Win32 代码运行（在 32 位或 64 位 Windows 7 下），它会启动得非常快。但是，如果我将其编译为本机 x64，则在启动之前需要 15-20 秒（执行 InitializeComponent()）。在这两种情况下，应用程序都会运行，所以除了这个长时间的延迟之外，我对 x64 版本没有任何问题。

什么会导致这种情况，有什么我可以做的吗？

谢谢。

# php - 来自数据库的样式图像作为背景图像

> ID：15052752
> 
> 赞同：0
> 
> 时间：2013-02-24T14:35:31.427
> 
> 标签：php

我想使用我在数据库中制作的图像参考作为背景：url。我已经设计好了 => [IMG]http://i49.tinypic.com/30ihudz.png[/IMG]。在我当前的代码中，我使用 div 样式来检索图像，但这并没有显示任何图像。有人可以指导我吗？提前致谢。

```
public function displayProduct()
{

if($product = $this->db->query("SELECT id, title, description, price, filename FROM trips ORDER BY id"))
            {
                while ($row = $product->fetch_assoc())
                            {
                        $output .= '<div class="reisbox">';
                                $output .= '<div id="reis_insidebox1" style=" background: url("C:/xampp/htdocs/webshop/public/img/content/"'.$row['filename'].' ") width="1000" height="500">';
                                $output .= '<div class="reis_textbox">';
                                $output .= '<h2>'.ucfirst($row['title']).'</h2>';
                                    $output .= '<article>';
                                    $output .=  ucfirst($row['description']);
                                    $output .= '</article>';
                                    $output .= '</div>';
                                $output .= '<div class="rightboxx">';
                                $output .= '<div class="reis_price_box">';
                                $output .= '<div class="reis_price_box_text">';
                                $output .= '&euro;'.$row['price'];
                                $output .= '</div>';
                                $output .= '<div class="more_box">';
                                $output .= '<a href="index.php?page=reis.php&pid='.$row['id'].'"><p>Lees meer..</p></a>';
                                $output .= '</div>';
                                $output .= '</div>';
                                $output .= '</div>';
                                $output .='<br />';
                                $output .= '<div id="add">';
                                $output .='<a href="index.php?page=cart.php&action=add&id='.$row['id'].'"><p>Add to cart</p></a>';
                                $output .= '</div>';
                        $output .= '</div>';
                                $output .= '</div>';
                    }
                    return $output;

                }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:03:04.113

如果你真的想从“C:/xampp/.../”中获取文件，你应该在前面添加一个 file:/// 但我猜你只是想使用一个相对路径，比如“img/content/andthefilenamefromdatabase” .png"

要继续，您实际上`style`是在 CSS 背景中关闭 -tag `"`，您可能希望在`'`此处使用或完全跳过字符串文字

考虑到这一切，它可能看起来像这样：

```
$output .= '<div id="reis_insidebox1" style="background: url(\'img/content/'.$row['filename'].'\')" width="1000" height="500">'; 
```

请注意，我`'`在这里使用反斜杠转义了 CSS 中的 。

# android - 在 RelativeLayout 上放置一个按钮

> ID：15052754
> 
> 赞同：0
> 
> 时间：2013-02-24T14:35:39.117
> 
> 标签：android, android-layout, android-relativelayout

我是 Android 开发的新手，我正在尝试在屏幕上移动一个按钮，但它不允许我将它放在我想要的位置，除此之外，当我移动此按钮时，我的所有文本框都会移动..有人能帮我吗？

顺便说一句，我正在使用RelativeLayout。

这是我所做的：

```
 <?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

   <TextView
       android:id="@+id/TextView01"
       android:layout_width="150dp"
       android:layout_height="15dp"
       android:layout_alignParentLeft="true"
       android:layout_alignParentTop="true"
       android:layout_weight="0.09"
       android:text="Name"
       android:textAppearance="?android:attr/textAppearanceSmall" />

   <EditText
       android:id="@+id/etSQLHotness"
       android:layout_width="150dp"
       android:layout_height="30dp"
       android:layout_above="@+id/bSQLView"
       android:layout_alignParentLeft="true"
       android:ems="10" />

   <TextView
       android:id="@+id/TextView02"
       android:layout_width="100dp"
       android:layout_height="wrap_content"
       android:layout_alignParentLeft="true"
       android:layout_below="@+id/TextView01"
       android:layout_marginTop="54dp"
       android:text="Age" />

   <EditText
       android:id="@+id/etSQLName"
       android:layout_width="150dp"
       android:layout_height="30dp"
       android:layout_above="@+id/etSQLHotness"
       android:layout_alignParentLeft="true"
       android:layout_marginBottom="38dp"
       android:ems="10" >

       <requestFocus />
   </EditText>

   <TextView
       android:id="@+id/textView2"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_alignParentLeft="true"
       android:layout_below="@+id/TextView02"
       android:layout_marginTop="24dp"
       android:text="Hotness scale 1 - 10" />

   <Button
       android:id="@+id/bSQLUpdate"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_alignParentBottom="true"
       android:layout_marginBottom="44dp"
       android:layout_marginLeft="30dp"
       android:layout_toRightOf="@+id/etSQLHotness"
       android:text="Update SQlite Database" />

   <Button
       android:id="@+id/bSQLView"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_alignTop="@+id/bSQLUpdate"
       android:layout_toLeftOf="@+id/bSQLUpdate"
       android:text="View" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:42:35.753

在相对布局中，所有视图的位置都是相对于彼此的，因此在放置它们之后，如果您尝试移动其中一个视图，则依赖于该视图的所有其他视图都会更改它们的位置，因此不要在图形布局中使用鼠标，而是更改相应地，您的 Xml，

# c# - 带类的 WriteLine

> ID：15052761
> 
> 赞同：3
> 
> 时间：2013-02-24T14:36:52.857
> 
> 标签：c#, .net, list, class

我正在制作一个 SchoolApp 程序来了解 C#，并且我正在尝试实现这个主要功能：

```
namespace SchoolApp
{
    class Program
    {
        public static void Main(string[] args)
        {
            School sch = new School("Local School");
            sch.AddStudent(new Student { Name = "James", Age = 22 }); // this function
            sch.AddStudent(new Student { Name = "Jane", Age = 23 });
            Console.WriteLine(sch); // this implementation
        }
    }
} 
```

学校班级：

```
namespace SchoolApp
{
    class School
    {
        public string name;

        public School()
        {
        }

        public School(string the_name)
        {
            name = the_name;
        }

        public void AddStudent(Student student)
        {

        }
    }
} 
```

学生类：命名空间 SchoolApp

```
{
    class Student
    {
        public int Age;
        public string Name;
        public Student()
        {
            Age = 0;
            Name = "NONAME";
        }

        public string _name 
        {
            get
            {
                return this.Name;
            }
            set
            {
                Name = value;
            }
        }
        public int _age
        {
            get
            {
                return this.Age;
            }
            set
            {
                Age = value;
            }
        }

    }
} 
```

我是 C# 的新手，对于如何制作 AddStudent 以及如何使用 WriteLine 来编写课程我很迷茫。输出应遵循以下几行：

学校：当地学校 James，22 岁，23 岁

有人建议使用 List<> 我遇到了同样的问题，即对此知之甚少。

编辑：谢谢大家非常快速的回答。我得到了它的工作，现在将深入阅读答案，这样我就不必再问相关问题了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T14:42:42.567

`Console.WriteLine(t)`执行 t 到字符串的隐式转换。因此，您需要覆盖`ToString()`所有类或显式地从您的类中创建字符串。

例子：

```
class School
    {
        public string name;
        List<Student> Students = new List<Student>();

        ...
        public override string ToString()
        {
           var stringValue = name;
           foreach(var student in Students)
           {
              stringValue += student.ToString();
           }
           return stringValue;
        }
    }

class Student
{
    public int Age;
    public string Name;
   ...
    public override string ToString()
    {
        return string.Format("{0} {1}", Name, Age);
    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T14:40:43.767

在您的`School`班级中，您似乎想要一个私人学生名单。List 很简单，它采用泛型类型，在您的情况下`Student`，您可以在其中添加和删除项目。

在你的`School`课堂上使用：

```
 private List<Student> students; 
```

在您的 AddStudent 代码中，您可以简单地使用：

```
students.Add(student);  // student is the variable being passed in and students is the list.  NOTE: You will have to make sure students is intalized to a new List of Student.  students = new List<Student>(); 
```

看看下面的链接。MSDN 是正确的文档，但 dotnetperls 适合这样的简单内容。

[http://msdn.microsoft.com/en-gb/library/3wcytfd1.aspx](http://msdn.microsoft.com/en-gb/library/3wcytfd1.aspx)

[http://www.dotnetperls.com/list-add](http://www.dotnetperls.com/list-add)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T14:44:34.090

```
class School
{
    public string name;
    private List<Student> students = new List<Student>();

    public School()
    {
    }

    public School(string the_name)
    {
        name = the_name;
    }

    public void AddStudent(Student student)
    {
        students.Add(student);
    }

    public override string ToString()
    {
        var sb = new StringBuilder();
        sb.AppendLine(name);
        foreach (var student in students)
        {
            sb.AppendLine(student.ToString());
        }
        return sb.ToString();
    }

}

class Student
{
    ...
    public override string ToString()
    {
        return "Student : " + Name + ", " + Age;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T14:40:52.687

> 有人建议使用`List<>`我遇到了同样的问题，即对此知之甚少。

是的，该[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)课程适合这种情况。它有一个 .Add 方法，允许您向其中添加对象。然后你可以遍历这个列表的元素（使用`foreach`语句），然后使用 Console.WriteLine 方法将每个元素的详细信息打印到控制台。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-24T14:50:38.230

除了`List<Student>`which 需要是 的成员`School`，在您的 main 方法中添加循环（`foreach`）以将它们打印出来之外，您还应该查看以下内容：

*   你的课程应该公开吗？主程序可能不在同一个命名空间中。
*   您是否考虑过将自动属性与 getter 和 setter 一起使用？ [http://msdn.microsoft.com/en-us/library/bb384054.aspx](http://msdn.microsoft.com/en-us/library/bb384054.aspx)

    ```
    public int Age { get; set; }
    public String Name { get; set; } 
    ```

*   您的命名约定， http: [//msdn.microsoft.com/en-us/library/vstudio/618ayhy6 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/618ayhy6(v=vs.100).aspx)

以上都是因为你说你是新人，所以我觉得还不如给你指点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-24T14:40:35.330

听起来你想添加`School`一个对应的`Students`

```
public class Student
{
    public string StudentName { get; set; }
    public int Age { get; set; }
}

public class School : Student
{
    public string SchoolName { get; set; }
} 
```

* * *

```
List<School> school = new List<School>();
school.Add(new School() { SchoolName = "USA", StudentName = "har", Age = 25 });
school.Add(new School() { SchoolName = "USM", StudentName = "japz", Age = 25 });
foreach (var item in school)
{
    Console.WriteLine("School Name: {0} Name: {1} Age: {2} ", item.SchoolName, item.StudentName, item.Age);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-24T14:42:00.413

您可以将扩展方法“WriteStudent”写入控制台类并接受学生作为参数。在你可以使用的方法里面`Console.Write("School: " +objParameter.Name)`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-24T14:45:18.943

您有 2 个基本选项：

1.  为每个学生添加一个“学校”属性（变量）
2.  为每所学校添加“学生列表”属性。

如果您更喜欢第二种方法：

您需要向学校班级添加一个新变量：

```
 List<Student> student_list = new List<Student>(); 
```

为了添加学生，定义：

```
 public void AddStudent(Student student)
 {
 student_list.Add(student);
 } 
```

另请注意，如果您希望按特定顺序打印，则必须在学生和学校课程中添加 ToString() 方法。

希望它有帮助，祝你好运。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-24T14:47:06.947

`Student`首先，你需要一个容器来存储类中类的实例`School`。然后，在您的`AddStudent`方法中，您只需使用 List 类本身公开的方法将学生添加到您的集合中：

```
class School
{
    public string name;
    private List<Student> students = new List<Student>();

    // ...

    public void AddStudent(Student student)
    { 
        students.Add(student);
    }
} 
```

[这](http://www.dotnetperls.com/list)是对该`List`类的引用。

至于输出，您可以在`School`类本身中编写一个函数来输出学生：

```
public void Print()
{
    Console.WriteLine(name);
    foreach (Student s in students)
        Console.WriteLine(s.Name + ", " + s.Age);
} 
```

并`Main`简单地使用它：

```
sch.Print(); 
```

# jquery - 根据文本输入更改下拉值

> ID：15052763
> 
> 赞同：-1
> 
> 时间：2013-02-24T14:37:03.750
> 
> 标签：jquery, forms, drop-down-menu, input

我想根据文本输入值更改选择选项。

例如，当键入 mydomain.com 时，应该会发生这种情况：

*   我输入“我的域”
*   我输入“。” （点）
*   它停止向文本输入添加值
*   它使用“.com”搜索选择选项并选择它

我已经编辑了我的这个老问题以使其更清楚。这是我当时的截图，它可能有助于说明问题：

![错误 x 工作版](../Images/91ee4fa251b3c87ec448af5b8383221f.png)

代码示例：

```
<input type="text" autocomplete="off" id="domain" name="domain">

<select id="extension" name="extension">
    <option value=".com">.com</option>
    <option value=".com.br">.com.br</option>
    <option value=".net">.net</option>
    <option value=".org">.org</option>
    <option value=".info">.info</option>
    <option value=".biz">.biz</option>
    <option value=".tv">.tv</option>
    <option value=".name">.name</option>
    <option value=".ws">.ws</option>
    <option value=".cc">.cc</option>
    <option value=".blog.br">.blog.br</option>
    <option value=".flog.br">.flog.br</option>
    <option value=".vlog.br">.vlog.br</option>
    <option value=".wiki.br">.wiki.br</option>
    <option value=".adm.br">.adm.br</option>
    <option value=".adv.br">.adv.br</option>
    <option value=".agr.br">.agr.br</option>
    <option value=".am.br">.am.br</option>
    <option value=".arq.br">.arq.br</option>
    <option value=".art.br">.art.br</option>
    <option value=".ato.br">.ato.br</option>
    <option value=".bio.br">.bio.br</option>
    <option value=".bmd.br">.bmd.br</option>
    <option value=".cim.br">.cim.br</option>
    <option value=".cng.br">.cng.br</option>
    <option value=".cnt.br">.cnt.br</option>
    <option value=".coop.br">.coop.br</option>
    <option value=".ecn.br">.ecn.br</option>
    <option value=".edu.br">.edu.br</option>
    <option value=".eng.br">.eng.br</option>
    <option value=".esp.br">.esp.br</option>
    <option value=".etc.br">.etc.br</option>
    <option value=".eti.br">.eti.br</option>
    <option value=".far.br">.far.br</option>
    <option value=".fm.br">.fm.br</option>
    <option value=".fnd.br">.fnd.br</option>
    <option value=".fot.br">.fot.br</option>
    <option value=".fst.br">.fst.br</option>
    <option value=".g12.br">.g12.br</option>
    <option value=".ggf.br">.ggf.br</option>
    <option value=".gov.br">.gov.br</option>
    <option value=".imb.br">.imb.br</option>
    <option value=".ind.br">.ind.br</option>
    <option value=".inf.br">.inf.br</option>
    <option value=".jor.br">.jor.br</option>
    <option value=".lel.br">.lel.br</option>
    <option value=".mat.br">.mat.br</option>
    <option value=".med.br">.med.br</option>
    <option value=".mil.br">.mil.br</option>
    <option value=".mus.br">.mus.br</option>
    <option value=".net.br">.net.br</option>
    <option value=".nom.br">.nom.br</option>
    <option value=".not.br">.not.br</option>
    <option value=".ntr.br">.ntr.br</option>
    <option value=".odo.br">.odo.br</option>
    <option value=".org.br">.org.br</option>
    <option value=".ppg.br">.ppg.br</option>
    <option value=".pro.br">.pro.br</option>
    <option value=".psc.br">.psc.br</option>
    <option value=".psi.br">.psi.br</option>
    <option value=".qsl.br">.qsl.br</option>
    <option value=".rec.br">.rec.br</option>
    <option value=".slg.br">.slg.br</option>
    <option value=".srv.br">.srv.br</option>
    <option value=".tmp.br">.tmp.br</option>
    <option value=".trd.br">.trd.br</option>
    <option value=".tur.br">.tur.br</option>
    <option value=".tv.br">.tv.br</option>
    <option value=".vet.br">.vet.br</option>
    <option value=".zlg.br">.zlg.br</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:53:08.010

您可以使用 jQuery 来执行此操作作为用户类型...

```
$(document).ready(function() {
    $('#search').keyup(function() {
        //The user has typed something. See what they typed and split it.
        var value = $(this).val();
        var components = value.split(".");
        if(components.length == 2) {
            //They have typed a TLD like .com
            if($("#extensao option[value='."+ components[1] + "']").length > 0) {
                //They have typed an available TLD. Select the dropdown and update the box.
                $("#search").val(components[0]);
                $("#extensao").val("." + components[1]);
            }
        } else if (components.length > 2) {
            //They have typed a Second level domain like .blog.br
            if($("#extensao option[value='."+ components[components.length - 2] + "." + components[components.length - 1] + "']").length > 0) {
                //They have typed an available second level domain.
                $("#search").val(components[0]);
                $("#extensao").val("." + components[components.length - 2] + "." + components[components.length - 1]);
            }
        }
    });
}); 
```

不确定这是否是您正在寻找的解决方案（或服务器端的解决方案）。无论哪种方式，您都需要额外的服务器端验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:24:08.797

我有两个想法怎么做

*   通过解析字符串剪切结尾的“.tld”。
*   在输入字段中禁止“ **. ”。**按钮“搜索”将触发检测不允许字符的功能。如果找到任何内容，则会出错。如果一切顺利，第二张图片上的结果将显示给您。有关此问题的更多信息[http://www.regular-expressions.info/](http://www.regular-expressions.info/)或类似的堆栈问题[检查 php 字符串中的无效字符](https://stackoverflow.com/questions/3655362/check-for-invalid-characters-in-a-php-string)

# sql-server - 存储过程选择最大值并插入

> ID：15052766
> 
> 赞同：0
> 
> 时间：2013-02-24T14:37:22.333
> 
> 标签：sql-server, tsql, stored-procedures

我正在尝试从表中选择 max: value 并将值插入到同一个表中。

代码是：

```
CREATE PROCEDURE [dbo].[InsertLogin]
    @LOG_ID INT OUTPUT,
    @LOG_NAME VARCHAR(100),
    @LOG_EMAIL VARCHAR(100)
AS
    INSERT INTO login(LOG_NAME, LOG_EMAIL) 
    VALUES(@LOG_NAME, @LOG_EMAIL)

    SET @LOG_ID = @@IDENTITY 
```

其他值正在插入，除了 LOG_ID 它变得空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:44:51.547

我的猜测是您的登录表中的 Log_Id 列未设置为身份。

通过 T-SQL，您必须删除并读取列：

```
alter table login
drop column log_id

alter table login
alter column log_id int not null Identity(1,1) 
```

或者，您可以在 SSMS 中轻松完成此操作。这是一篇关于这个主题的不错的文章：

[http://blog.sqlauthority.com/2009/05/03/sql-server-add-or-remove-identity-property-on-column/](http://blog.sqlauthority.com/2009/05/03/sql-server-add-or-remove-identity-property-on-column/)

我也建议使用`SCOPE_IDENTITY()`over`@@Identity`

# jquery - 在悬停时创建子菜单并使其位于最顶层

> ID：15052771
> 
> 赞同：0
> 
> 时间：2013-02-24T14:37:51.423
> 
> 标签：jquery, html, css

我正在使用 jquery 在悬停时创建子菜单。

这是它的样子：

```
<div id="menucontainer">
  <ul id = "topmenu">
    <li><a onmouseover="javascript:show('div_1');">menu_1</a></li>
    <li><a onmouseover="javascript:show('div_2');">menu_2</a></li>
    <li><a onmouseover="javascript:show('div_3');">menu_3</a></li> # fine with onmouseover since code is generated from templates

  </ul>
  <div id="div_1" class="submenu">
    <ul>
      <li> submenu_1 </li>
      <li> submenu_2 </li>
      <li> submenu_3 </li>
    </ul>
  </div>
  <div id="div_3" class="submenu">
    <ul>
      <li> submenu_1 </li>
      <li> submenu_2 </li>
      <li> submenu_3 </li>
    </ul>
  </div>
  <div id="div_3" class="submenu">
    <ul>
      <li> submenu_1 </li>
      <li> submenu_2 </li>
      <li> submenu_3 </li>
    </ul>
  </div>
</div>
<style>
#topmenu {
  list-style: none;
}
#topmenu > li {
  display: inline-block;
}
.submenu {
  display: none;
}

<script>
function show(divid) {
  $('.submenu').css('display', 'none');
  $('#'+divid).css('display', 'block');
}
</script> 
```

问题是当`show(div)`被调用并显示子菜单 div 时，我在“menucontainer”之后有另一个 div，并且该 div 阻止点击显示的 div。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:39:42.950

我已经对您的 HTML 进行了一些重组，以使事情变得更简单。此外，最好使用事件侦听器而不是内联函数调用。让我知道这是否不适用于您的情况。

[http://jsfiddle.net/Dn2mv/5](http://jsfiddle.net/Dn2mv/5)

```
<div id="menucontainer">
    <ul id="topmenu">
        <li><a href="#">menu_1</a></li>
        <li><a href="#">menu_2</a></li>
        <li><a href="#">menu_3</a></li>
    </ul>
    <div id="div_1" class="submenu">
        <ul>
            <li>submenu_1</li>
            <li>submenu_1</li>
            <li>submenu_1</li>
        </ul>
    </div>
    <div id="div_2" class="submenu">
        <ul>
            <li>submenu_2</li>
            <li>submenu_2</li>
            <li>submenu_2</li>
        </ul>
    </div>
    <div id="div_3" class="submenu">
        <ul>
            <li>submenu_3</li>
            <li>submenu_3</li>
            <li>submenu_3</li>
        </ul>
    </div>
</div>

$('#topmenu li a').hover(function () {
    var myItem = $(this).parents('li').index() + 1;
    $('#div_' + myItem).slideDown();
}, function () {
    $('.submenu').hide();
}); 
```

# scala - IntelliJ 在 scala 源文件中显示错误，但项目编译成功

> ID：15052772
> 
> 赞同：7
> 
> 时间：2013-02-24T14:37:52.270
> 
> 标签：scala, maven, intellij-idea

我正在使用基于 maven 的 intellij IDEA IDE 中的项目。我可以执行所有 maven 目标，但 IntelliJ 在源代码中显示了很多错误，如下所示：

![在此处输入图像描述](../Images/c83c1f4f0449b1f6a27c877c09860fd0.png)

几个小时前一切正常。我不明白为什么 IDE 继续显示错误。当我重建或编译整个项目（CTRL + F9）或单个 scala 类时，我总是收到这样的成功消息：

![在此处输入图像描述](../Images/7fdc325174447b99cfd147f4b6fe6d92.png)

我之前已经配置了scala插件，所以我不知道会发生什么。

感谢您的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-03-30T07:03:46.007

有时 IntelliJ 缓存会损坏。您可以通过以下方式解决此问题：

**文件>“使缓存无效/重新启动”**

在出现提示时选择**“Invalidate and Restart”**后，IntelliJ 将重新启动并重建其缓存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T15:35:38.990

如果 IDEA 丢失了明显正确的类型，例如，`Database`或者`DateTime`这可能意味着项目的配置错误或损坏。最常见的是它没有所需的第三部分依赖项，例如 Joda Time。

如果您还没有这样做，请仅在 SBT 中定义您的项目并使用[sbt-idea](https://github.com/mpeltonen/sbt-idea)插件来生成您的 IDEA 项目定义。然后每当您更改项目依赖项时，重新运行`gen-idea`以重新生成您的 IDEA 项目文件。没有混乱，没有大惊小怪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T14:55:19.130

对此，jetbrains 的错误跟踪器中提出了许多错误。我建议您提出一些错误或为现有错误投票。

看起来你遇到的问题是类型感知突出显示比无用更糟糕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T17:26:41.610

感谢您的回复。

我解决了这个问题，再次导入项目。

# ssrs-2008 - 如何格式化组下单元格的背景颜色？- SSRS 2008 R2

> ID：15052776
> 
> 赞同：0
> 
> 时间：2013-02-24T14:38:13.943
> 
> 标签：ssrs-2008, reporting-services, ssrs-grouping

我有以下矩阵：

*   设计视图

```
--------------------------
|  OfficeSID  | [Type]   |
--------------------------
| [OfficeSid] | [Value]  |
-------------------------- 
```

*   预习

```
----------------------------
| OfficeSID |   A  |   B   |
----------------------------
|    1      | 1029 |  982  |
----------------------------
|    2      |   98 |  782  |
----------------------------
|    3      |  786 |   82  |
----------------------------
|    4      |   29 |    2  |
---------------------------- 
```

我想格式化单元格的背景颜色，即第二行第二列，这是一个值字段。它被分组在类型字段下。背景颜色应如下所示：

*   如果值 < 0 红色
*   如果值 < 100 且 > 0 橙色
*   如果值 >= 100 绿色

我尝试使用表达式，但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T15:05:04.427

这是一个非常常见的要求......听起来您正在尝试`BackgroundColor`在单元级别设置属性，这是正确的，所以没有理由它不应该工作。

你用什么表达方式？我会使用类似的东西：

```
=Switch(Fields!Value.Value < 0, "Red"
  , Fields!Value.Value > 0 and Fields!Value.Value < 100, "Orange"
  , Fields!Value.Value >= 100, "Green") 
```

**评论后编辑：**

嗯，不知道你的报告是怎么回事。我整理了一个基本示例来匹配您的结果，并且它按预期工作。

将样本数据集放在一起：

![在此处输入图像描述](../Images/ca2b981e6adc1f4be0b62a8978b65fa0.png)

创建矩阵：

![在此处输入图像描述](../Images/ddecf563671a6417dfdd41a04f7ad9ea.png)

*值*文本框属性的表达式`BackgroundColor`，从上面的答案中复制并粘贴：

![在此处输入图像描述](../Images/ded7f7a72655ab6405be046a81a062ac.png)

最终结果，看起来像预期的那样工作：

![在此处输入图像描述](../Images/93f79976dc0c57d13e89fc2bf8cfa3c6.png)

所以我不确定在这里建议什么...关于我唯一能想到的是每个 OfficeSID/Type 组合是否有多个值，在这种情况下，您需要在表达式中使用聚合，即喜欢：

```
=Switch(Sum(Fields!Value.Value) < 0, "Red"
  , Sum(Fields!Value.Value) > 0 and Fields!Value.Value < 100, "Orange"
  , Sum(Fields!Value.Value) >= 100, "Green") 
```

但除此之外，我猜您可以添加您正在使用的数据的确切详细信息，或者以最简单的方式从头开始创建新报告。这将显示您是否可以在没有其他逻辑的情况下让背景在新报告中工作。

# php - 按特定 ID 排序，而不是按列总数排序

> ID：15052778
> 
> 赞同：0
> 
> 时间：2013-02-24T14:38:51.363
> 
> 标签：php, html, mysql

我在 PHP 文件中有这个查询：

```
SELECT COUNT(pilotid) as total, depicao FROM db_pireps
GROUP BY depicao ORDER BY total DESC
LIMIT 5 
```

在我的 HTML 中，然后我从数据库中获取结果并使用`foreach($fav_deps as $departure)`

```
$fav_deps = DB::get_results($dep_query); 
```

在 foreach 中，为每条记录生成一行。一栏应计算飞行员离开指定机场的次数。但是，`$departure->total`假设从机场的实际总起飞次数，我想让它计算`pilotid`从指定机场的总起飞次数，在这种情况下是`depicao`. 我怎样才能做到这一点？

```
<td width="20%"><?php echo $departure->total; ?></td> 
```

此外，我附上了一个截图来说明 db_pireps 的结构。

![桌子](../Images/17724be1f19c45303dee8c53fcbac534.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:52:37.943

您也应该按 Pilotid 分组，然后选择该列，这样您就可以获得所需的结果。

```
SELECT COUNT(pilotid) as total, depicao, pilotid FROM db_pireps GROUP
BY depicao, pilotid ORDER BY total DESC LIMIT 5 
```

如果您查看此结果，`$departure->total`将仅包含给定飞行员的值。

# javascript - 打开/关闭javascript

> ID：15052779
> 
> 赞同：0
> 
> 时间：2013-02-24T14:38:56.967
> 
> 标签：javascript, ajax, jquery

我正在尝试打开/关闭javascript，但我有一个问题：尽管我的班级发生了变化，但我总是点击我的第一堂课。

我总是得到相同的结果：on->on 或 off->off。我在 Firebug 中检查我的 html 已正确更改...

这是我的简化代码：

```
$('.off').on('click', function(e) {
    e.stopPropagation();
    e.preventDefault();

    alert('off');

    $(this).removeClass('off');
    $(this).addClass('on');
});

$('.on').on('click', function(e) {
    e.stopPropagation();
    e.preventDefault();

    alert('on');

    $(this).removeClass('on');
    $(this).addClass('off');
}); 
```

如果有人有建议，我将非常感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T14:44:33.403

事件处理程序在页面加载时绑定，因此更改类不会更改事件处理程序，因为它们附加到绑定时存在的任何元素。要将它们附加到未来的元素，即当您更改类时，您需要委托事件处理程序，但我认为更简单的解决方案是切换类或使用标志：

```
$('.off').on('click', function(e) {
    e.preventDefault();
    var state = $(this).is('.off') ? 'on' : 'off';

    alert(state);

    $(this).toggleClass('off on');
}); 
```

[**小提琴**](http://jsfiddle.net/ePGgY/1/)

这可能会令人困惑，但即使您删除了`.off`该类，事件处理程序仍会绑定到同一个元素，因为它在`.off`绑定时具有该类！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T14:47:29.493

当您第一次与 绑定时，要么不存在，`.off`要么不存在。您需要使用事件委托，或者您可以重写它，使其绑定到另一个类并保持开/关状态。我将向您展示这两种方法。`.on``.on`

## 代表团

```
$(document).on('click', '.off', function(e) {
    $(this).removeClass('off').addClass('on');
}).on('click', '.on', function(e) {
    $(this).removeClass('on').addClass('off');
}); 
```

[http://jsfiddle.net/ExplosionPIlls/2PHJg/](http://jsfiddle.net/ExplosionPIlls/2PHJg/)

## 内部状态

```
$(".switch").on('click', function () {
    if ($(this).is('.off')) {
        $(this).removeClass('off').addClass('on');
    }
    else {
        $(this).removeClass('on').addClass('off');
    }
}); 
```

[http://jsfiddle.net/ExplosionPIlls/2PHJg/1/](http://jsfiddle.net/ExplosionPIlls/2PHJg/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T14:46:23.177

这个问题是因为 $('.on') 和 $('.off') 只被评估一次，当你的 javascript 代码运行时。

您必须使用事件委托来解决问题。按照以下方式修改代码。我在下面描述它的含义。

```
$('#container').on('click', '.off', function(e) {
    e.stopPropagation();
    e.preventDefault();

    alert('off');

    $(this).removeClass('off');
    $(this).addClass('on');
});

$('#container').on('click', '.on', function(e) {
    e.stopPropagation();
    e.preventDefault();

    alert('on');

    $(this).removeClass('on');
    $(this).addClass('off');
}); 
```

在 #container 的位置使用选择器来选择您的 .on / .off 元素的父级。在 on() 调用的第二个参数中，您必须指定要侦听事件的元素。

这样，即使元素的类发生变化，事件处理程序也会正常运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T14:49:27.553

问题是事件处理程序在代码第一次运行时被绑定，所以当类发生变化时，事件处理程序不会被重新绑定。解决此问题的一种方法是为元素分配一个不会更改的类，并将其用于事件处理程序。

例子：

```
$('.button').on('click', function(e) {
    e.stopPropagation();
    e.preventDefault();

    $(this).toggleClass('off on');
}); 
```

[您可以在http://codepen.io/skimberk1/pen/GJhna](http://codepen.io/skimberk1/pen/GJhna)看到一个工作示例。

# actionscript-3 - Splice 比 Shift + Pop 快吗？为什么？

> ID：15052782
> 
> 赞同：3
> 
> 时间：2013-02-24T14:39:11.750
> 
> 标签：actionscript-3

我从一些非特定来源听说，使用`shift()`和的组合`pop()`比使用`splice()`. 我还没有运行基准测试，并且很可能不会因为我不在城里而有一段时间，但这是真的吗？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T08:21:51.457

如果您不需要保留 Array 的顺序，则 using`.pop()`比`.splice()`.

`.splice()`将删除给定索引处的元素。然后发生的情况是，数组中的所有其他元素在此之后都需要将其在数组中的位置减少 1。如果您的数组很大并且删除元素的索引很小，这可能会很慢。

使用`.pop()`，您可以完全删除重新索引所有内容的过程。您可以使用`.pop()`从数组中删除最后一项，而不是删除给定索引处的元素。从这里，您需要做的就是将您想要删除的项目替换为您从使用中获得的项目`.pop()`。如前所述，这当然意味着元素的顺序不会得到维护。

代码示例：

`.splice()`：

```
var list:Array = [0,1,2,3,4,5];
list.splice(2, 1);

trace(list); // 0,1,3,4,5 
```

然后`.pop()`：

```
var last:* = list.pop();
list[2] = last;

trace(list); // 0,1,5,4 - Notice we move 5 to the index 2 and lose the order. 
```

在这里，我们进行了最重要的实际性能测试：

```
var list:Array = [];
function fillList():void
{
    for(var i = 0; i < 200000; i++) list.push(i);
}

function emptyViaSplice():void
{
    fillList();
    var t:Number = getTimer();

    while(list.length > 0)
    {
        list.splice(0, 1);
    }

    trace("emptyViaSplice: " + (getTimer() - t));
}

function emptyViaPop():void
{
    fillList();
    var t:Number = getTimer();

    while(list.length > 0)
    {
        if(list.length == 1) list.pop();
        else
        {
            var l:* = list.pop();
            list[0] = l;
        }
    }

    trace("emptyViaPop: " + (getTimer() - t));
} 
```

结果：

```
emptyViaSplice(); // 12153 ms
emptyViaPop(); // 37 ms 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-20T03:05:57.563

我尝试了另一个代码，结果如下所示：

```
var length = 200000;
function fillList() {
    var list = [];
    for(var i = 0; i < length; i++)
        list.push(i);
    return list;
}

function halfViaSplice() {
  var list = fillList();
  var startTime = new Date();
  list.splice(length/2, length/2);
  var endTime = new Date();

  console.log("halfViaSplice: " + (endTime - startTime));
}

function halfViaPop() {
  var list = fillList();
  var startTime = new Date();

  while(list.length > length/2) {
    list.pop();
  }
  var endTime = new Date();

  console.log("halfViaPop: " + (endTime - startTime));
}

halfViaSplice();
halfViaPop(); 
```

结果：

```
halfViaSplice: 0
halfViaPop: 4 
```

我同意 Marty 的回答，但是如果您从一个索引中删除所有最后的数据，而不是仅删除孔位置，我会建议拼接而不是弹出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-24T00:24:25.647

经典算法有时更快。不更改数组大小是实现非常快速性能的另一种方法。在使用 performance.now() 进行了几次测试后，我发现在下面的案例中，这个经典算法比任何改变数组大小的方法都快，并且像所有 javascript 代码一样，使用本地变量变得更快。

```
var ArrayLength = Array.length; // always prefer the simplest references.
for (i=1; i < ArrayLength; i++) {Array[(i-1)] = Array[i];}  
Array [ArrayLength-1] = [[newdata1],[newdata2]]; 
```

在同等情况下比较，上面的代码已经证明比

```
Array.shift(); Array.push([[newdata1],[ newdata2]]); 
```

对于周期性变化的小数组（20 到 60 个索引），您绝对应该考虑经典算法。

# javascript - 如何在纯 HTML 中附加外部 JSON？

> ID：15052784
> 
> 赞同：0
> 
> 时间：2013-02-24T14:39:30.880
> 
> 标签：javascript, jquery, html, json, api

我正在尝试输出一些取自 API（JSON 格式）的值。并且找不到关于如何获取 JSON 标签并将它们转换为 HTML 的解决方案。JSON 示例[在这里](http://pastebin.com/sKz8MW4z)。如何让 JSON 变成 DIV 标记、段落和标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:42:46.447

你需要编码。已经有可以帮助你的图书馆：http: [//json2html.com/](http://json2html.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T14:42:56.117

JSON 和 HTML 之间没有一对一的映射。您必须根据 JSON 结构手动执行此操作。因此，例如，您可以像这样访问对象的个别元素：

```
result.glossary.GlossDiv.GlossList.GlossEntry.ID 
```

# ruby - 如何在 Sinatra 显示块中更正

> ID：15052786
> 
> 赞同：1
> 
> 时间：2013-02-24T14:39:51.790
> 
> 标签：ruby, sinatra, erb

对不起，我不会用英文的具体表达。

`index.erb`

```
<h1>Hello World.</h1>
<ul>
  <li>item1</li>
  <li>item2</li>
</ul>
<% capture_content :key do %>
 I'm Here.
<% end %> 
```

`helpers`

```
def capture_content(key, &block)
  @content_hash = {}
  @content_hash[key] = block.call # this block contains erb all 
end 
```

我只想要`capture_content`内容

希望表达正确T_T

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:29:04.070

如果您希望自己编写与 Reails [content_for](http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-content_for)助手等效的 Sinatra，那么您不需要这样做。

因为有一个名为[Sinatra::ContentFor](http://www.sinatrarb.com/contrib/content_for.html)的扩展，它是[Sinatra::Contrib](http://www.sinatrarb.com/contrib/)项目的一部分，可以满足您的需求。

从[文档](http://www.sinatrarb.com/contrib/content_for.html)中：

> Sinatra::ContentFor 是一组帮助程序，允许您捕获视图中的块，以便稍后在请求期间呈现。最常见的用途是从视图中填充布局的不同部分。

# python - Python - 对第二个参数进行排序

> ID：15052790
> 
> 赞同：1
> 
> 时间：2013-02-24T14:40:17.767
> 
> 标签：python, arrays, list, sorting

我有一个列表，我想对其进行排序。列表由每个具有两个元素的项目组成。我希望只对第二个元素进行排序。因此，我几乎可以肯定

```
L = [[4,2],[5,2]]
sorted(L) 
```

不会做这项工作。

如何进行？我得到了答案，但不明白什么可以适用于问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:43:10.517

```
from operator import itemgetter
sorted(L, key=itemgetter(1)) 
```

返回按的每个元素中的第二项`L`排序的排序列表。`key``L`

# algorithm - 是否可以编写一个验证程序来检查给定程序是否实现给定算法？

> ID：15052791
> 
> 赞同：5
> 
> 时间：2013-02-24T14:40:23.203
> 
> 标签：algorithm, automation

给定一个用 C++ 编写的程序 P，我是否可以编写一个算法来确定程序 P 是否实现了特定算法？有没有解决这个问题的算法。这个问题可以解决吗？

例如，我要求一个人实现快速排序算法，现在如果我想确保这个人实际实现了快速排序算法。该人实际上可以实现一些其他排序算法，它将产生正确的输出并通过所有测试用例（黑盒测试）。我可以做到这一点的一种方法是查看源代码。我想避免这种手动工作，并想编写一个可以完成这项工作的程序。问题是“这可能吗？”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T15:08:49.733

根据[赖斯定理](http://en.wikipedia.org/wiki/Rice%27s_theorem)，您甚至无法通过检查代码来确定一段代码是否是排序函数。当然，您可以通过使用这些输入运行它并检查结果来确定它是否具有对某些有限输入集进行排序的效果。

您可以针对给定目标排序算法的特定情况做一些事情，方法是检查排序期间正在排序的数组，检查目标算法特征的不变量。例如，递归快速排序实现中的每次调用都会导致子数组被排序。

==================================================== ================

根据评论，我建议查看[Ahmad Taherkhani 的主页](http://www.cs.hut.fi/~ahmad/)。他继续在该领域进行研究，包括 2012 年有关该主题的论文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:14:21.770

我在想，并且仍在考虑堆栈/堆检查（假设您也针对优化的解决方案进行了测试）。
您可以检查将缩小结果的时间复杂度和整体内存复杂度。即使对于时间：O(n lg n) 用于合并和快速排序。您可以通过内存分配来区分它们，因为它们按顺序是 N ,Lg(n) 。
您还可以检查原始阵列干扰..等，但这不是决定性的。

# haskell - 将表达式转换为在haskell脚本中描述其类型的字符串？

> ID：15052793
> 
> 赞同：2
> 
> 时间：2013-02-24T14:40:37.310
> 
> 标签：haskell, ghc, ghci

我们都知道`:t`in`ghci`给出了表达式的类型：

```
Prelude> :t [1..]
[1..] :: (Enum t, Num t) => [t] 
```

我需要的是等效`:t`于haskell脚本（我称之为`typeStr`）：

```
main = putStrLn $ typeStr [1..] 
```

可以`(Enum t, Num t) => [t]`在屏幕上打印类似的东西。

那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T15:21:11.883

是的，有几种方法。

**1.使用动态类型**

对于单态类型的简单情况，您可以使用 Typeable 实例：

```
Data.Dynamic> typeOf [1..]
[Integer] 
```

**2.使用运行时评估**

但是，要正确执行此操作 - 获取多态值的类型 - 您将需要完整的 GHC 类型检查器。例如，通过 ghc-api 库及其漂亮的包装器[提示](http://hackage.haskell.org/packages/archive/hint/latest/doc/html/Language-Haskell-Interpreter.html#v:typeOf)：

```
Language.Haskell.Interpreter> runInterpreter $ typeOf "[1..]"
Right "(P.Enum t, P.Num t) => [t]" 
```

哪个是使用完整 GHC 类型检查器正确推断的类型，动态调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T15:13:26.373

是的，您可以，只要类型是以下实例`Data.Typeable`：

```
import Data.Typeable
typeStr :: Typeable a => a -> String
typeStr a = show $ typeOf a 
```

但是，我认为您不会获得最通用的类​​型，因为参数将是特定类型。例如， ghci 中的`typeStr [1..]`产量`[Integer]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T14:54:25.330

简短的回答：没有。

Haskell 通常不允许您编写直到运行时才知道类型的表达式，因此首先不需要运行时类型查找。

话虽如此，有*一些*方法可以进行动态类型，并且可能支持打印类型签名......但这可能根本不是你想要做的。

另一种可能性是使用 Template Haskell 在编译时查找类型签名。我不知道是否有人已经为此编写了代码...

# c++ - 我应该如何纠正“对‘p’的引用不明确”的错误？

> ID：15052795
> 
> 赞同：-3
> 
> 时间：2013-02-24T14:40:42.257
> 
> 标签：c++

使用以下代码，我得到错误：

```
对“p”的引用不明确
```

为什么会这样？我怎样才能摆脱它？我想得到“79”作为输出。有人可以请一些光。谢谢你的时间！

```
int p=3;
namespace {int p=7;}
namespace {int q=9;}

main()
{    
    cout << p << q;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T14:42:08.223

删除这个

```
int p=3; 
```

或这个

```
namespace {int p=7;} 
```

或者，您可以将第一个声明放在命名空间内：

```
namespace foo
{
  int p=3;
} 
```

*或者*给匿名命名空间一个名字：

```
namespace bar {int p=7;} 
```

接着

```
main(){
    std::cout <<bar::p << q;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T14:44:50.773

@juanchopanza 提出了一个很好的解决方案。这是另一个：使用限定名称来引用在全局命名空间中声明的变量：

```
#include <iostream>

int p=3;
namespace {int p=7;}
namespace {int q=9;}

int main()
{
    std::cout << ::p << q;
    //           ^^^
} 
```

# sencha-touch-2 - chrome OS 上的 Sencha touch

> ID：15052800
> 
> 赞同：0
> 
> 时间：2013-02-24T14:41:00.107
> 
> 标签：sencha-touch-2, google-chrome-os, chromebook

我已经通过 Sencha touch 开发了一个应用程序，它可以正常工作，但是在 Chrome OS 中它加载的是手机视图而不是表一，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:24:03.470

我遇到了同样的事情。不幸的是，Sencha Touch 无法将 Chrome OS 的用户代理识别为平板电脑。但是您可以更改`isActive`Tablet.js 配置文件中的功能，以通过它的 UserAgent 识别 Chrome。

希望这段代码有帮助：

Tablet.js：

```
isActive : function() {
    return Ext.os.is.Tablet || Ext.browser.userAgent.indexOf('CrOS') != -1;
} 
```

如果 sencha 识别出浏览器来自平板电脑，或者如果 UserAgent 包含文本“CrOS”（Chrome OS 就是这样），则返回 true。

# php - 只允许来自 WYSIWYG BBCode 编辑器的 html 标签

> ID：15052805
> 
> 赞同：1
> 
> 时间：2013-02-24T14:41:41.660
> 
> 标签：php, javascript, html, bbcode

我想要一些基本的东西，比如粗体、斜体、下划线、链接、图像、列表和颜色。我正在使用[bbcode 编辑器](http://wysiwygbbcode.codeplex.com/)。我也在我的 php 中使用 strip_tags，我想绕过它，所以它只允许上面的内容，而不是诸如 mysql 查询、javascript 标签、标题标签之类的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:47:30.397

如果我是你，我可能会在之前做一些 As `str_replace`well `strip_tags` as `<Tag` or （一些不会被错误输入的字符），然后在之后替换它们`</tag``[[{{Tag``[[{{/tag``strip_tags`

笔记。仅在您希望允许的标签上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:28:47.140

工作。strip_tags($post,'此处允许的标签');

# ajax - Phonegap 403 禁止

> ID：15052807
> 
> 赞同：1
> 
> 时间：2013-02-24T14:41:47.660
> 
> 标签：ajax, cordova, cross-domain, http-status-code-403

我必须为 Android 和 iOs 开发一个应用程序。为此，我需要使用跨域 ajax 请求，因为我使用 Phonegap 进行开发。问题如下：当我从浏览器使用 html / css / js 代码时，即使是智能手机浏览器，我也能从我的服务器正确地得到答案。但是，当我在编译的 Phonegap 应用程序上使用相同的代码执行相同的请求时，我会收到 403 Forbidden 响应，尽管我在服务器端有标题“Access-Control-Allow-Origin: *”。

我一直在互联网上寻找解决方案，但我发现没有线程谈论这种问题。有人有想法吗？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:11:35.073

I suspect u are using PhoneGap version 2.3.0 or lower . In this case you need to white list All external domain access must be white listed in PhoneGap in 2.3.0 or lower versions. Otherwise PhoneGap blocks them by default. See full details here: [http://docs.phonegap.com/en/2.3.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide](http://docs.phonegap.com/en/2.3.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide) . In 2.4.0 version of PhoneGap, all domains are whitelisted by default.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-12T10:50:47.863

我知道它已经很久了，但我对 403 禁止响应有类似的问题。但在我这边是文件权限，将其更改为 755，现在一切正常。

# android - Google Places API 自动完成错误 Android

> ID：15052810
> 
> 赞同：0
> 
> 时间：2013-02-24T14:42:03.137
> 
> 标签：android, google-places-api

我按照谷歌教程[here](https://developers.google.com/places/training/autocomplete-android)在Android中实现自动完成搜索。一旦我构建了应用程序并运行它，我就会收到这个错误

```
 returned from sslSelect() with result 0, error code 2
 returned from sslSelect() with result 1, error code 2 
```

有什么线索吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:25:02.467

当我交换 API 密钥时，它为我解决了。我使用的是 Android 设备下的那个，我将其更改为“浏览器应用程序的密钥（带引用者）”，尽管我使用的是 Android 设备，但它对我有用。

# php - 在 Wordpress 页面上显示特定帖子

> ID：15052812
> 
> 赞同：2
> 
> 时间：2013-02-24T14:42:10.847
> 
> 标签：php, wordpress, post, wordpress-theming

我试图让特定的帖子显示在 single.php 页面中，但是由于某种原因，我显示了所有帖子。我不确定我是否正确获得了帖子 ID，但这是我目前的做法：

```
 <?php
    $post_id = (int) $_GET['p'];
    query_posts('p=' . $post_id);
    while(have_posts()) 
    { 
        $this_page = the_post();
        echo the_content();
    } 
    ?> 
```

它应该只显示存储在 $post_id 变量中的具有一个 id 的帖子，但由于某种原因它正在获取所有这些；/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:54:10.877

不确定这是否是您要查找的内容，但我知道您想在 single.php 上显示特定页面

为什么不使用这个：

```
<?php 
  $page_id = get_ID_by_slug('my_page_slug');
  $page_data = get_page( $page_id );
?> 

<h2><?php echo $page_data->post_title; ?></h2>
<p><?php echo $page_data->post_content; ?></p> 
```

并将其添加到您的**functions.php**

/* 通过 slug 获取页面 */

```
function get_ID_by_slug($page_slug) {
  $page = get_page_by_path($page_slug);
  if ($page) {
    return $page->ID;
  } else {
    return null;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T14:46:48.060

您是否尝试过从 URL 中获取帖子 ID？

```
<?php
   $post_id = (int) $_GET['p'];
   query_posts('p=' . $post_id);
?> 
```

或者，这也可能有效：

```
<?php get_post($post_id); ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T14:46:33.823

丑陋的方式：

```
query_posts('p=11'); 
```

（`query_posts`改变主查询）

不那么丑陋的方式：

```
$my_query = new WP_Query('p=11');
while($my_query->have_posts()){
  $my_query->the_post();
  the_content();
} 
```

# django - 我可以在 Django 中调用 werkzeug 调试器而不需要引发异常或使用断言吗？

> ID：15052818
> 
> 赞同：2
> 
> 时间：2013-02-24T14:42:45.450
> 
> 标签：django, debugging, werkzeug

我目前正在`Werkzeug`与一起使用，并且可以通过引发异常或做出错误断言`django-extensions`来调用调试器。`werkzeug`是否可以为`werkzeug`类似设置一个断点`import pdb; pdb.set_trace()`？

# python - 如何在 2 个 2d 列表中添加第 2 列？

> ID：15052820
> 
> 赞同：1
> 
> 时间：2013-02-24T14:42:49.907
> 
> 标签：python, list, set, tuples

我在python中有2个数字列表，如下所示：

```
a = [ [1000,1], [2000,2], [3000,3] ]
b = [ [1000,5], [2000,6], [3000,7] ] 
```

第一列将始终相同。我想将第二列添加在一起以形成第三个列表 c 其中：

```
c  =[ [1000,6], [2000,8], [3000,10] ] 
```

我曾尝试使用列表推导来执行此操作，但我无法正确使用 2d 列表的语法。

谢谢

**编辑：** 好的，这是我最好的尝试。我忘记了 zip 功能：

```
c = [[x[0],x[1] + y[1]] for x,y in (a,b)] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T14:44:13.173

列表推导与`zip()`函数相结合可以解决问题：

```
c = [[aa[0], aa[1] + bb[1]] for aa, bb in zip(a, b)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T14:56:48.613

您的数据结构看起来可以更好地用作字典，因为子列表中的第一个元素似乎用作键。因此，首先，我建议您的数据如下所示：

```
a = {1000: 1, 2000: 2, 3000: 3}
b = {1000: 5, 2000: 6, 3000: 7} 
```

更恰当地考虑数据结构的优点之一是，python 通常会有一个很好的内置函数来做你想做的事情。在这种情况下，该`collections`模块非常有用：

```
from collections import Counter
c = dict(Counter(a) + Counter(b)) 
```

这让你 ac 看起来像这样：

```
{1000: 6, 2000: 8, 3000: 10} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T14:56:51.027

如果项目是整数（或浮点数），您可以使用 Numpy 数组：

```
import numpy as np

aa = np.array([[ 1000, 1 ],  [ 2000, 2 ], [ 3000, 3 ]])
bb = np.array([[ 1000, 5 ],  [ 2000, 6 ], [ 3000, 7 ]])
cc = np.array(aa)
cc[:,1] += bb[:,1] 
```

# git - 如何恢复特定的 git 分支

> ID：15052822
> 
> 赞同：1
> 
> 时间：2013-02-24T14:42:59.393
> 
> 标签：git

这里的场景，首先在主树中有两个文件夹

```
├── foo1
│   └── index.php
└── foo2
    └── index.php 
```

然后我创建一个分支***b1***并添加到另外两个文件夹中。

```
├── foo1
│   └── index.php
├── foo2
│   └── index.php
├── foo3
│   └── index.php
└── foo4
    └── index.php 
```

之后，我在没有命令的情况下命令`git add .`并强制切换回主控。当前的树现在已经离开 foo3 和 foo4 文件夹，但仍然是分支***b1***`git co -f master``commit`

 *```
├── foo1
│   └── index.php
└── foo2
    └── index.php 
```

我的问题是如何从分支***b1***恢复文件夹 3 和 4 ？我试过`git co b1`了，但文件夹 3,4 仍然消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:22:26.303

使用 'git fsck' 查找悬空的 blob。这是一个例子：

```
$ git fsck --lost-found
Checking object directories: 100% (256/256), done.
dangling blob 54578ea3b3fb8d790bc5e19e36b52e601ec5433a
dangling blob f719efd430d52bcfc8566a43b2eb655688d38871 
```

您可以直接列出它们：

```
$ ls .git/lost-found/other/
54578ea3b3fb8d790bc5e19e36b52e601ec5433a
f719efd430d52bcfc8566a43b2eb655688d38871 
```

然后一一恢复。

```
$ cat .git/lost-found/other/54578ea3b3fb8d790bc5e19e36b52e601ec5433a 
<contents of file>
$ mv .git/lost-found/other/54578ea3b3fb8d790bc5e19e36b52e601ec5433a <my-file-one> 
```

我认为您需要重建目录结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T15:36:07.670

正如 GoZoner 所说，您可以将它们取回，但是当您这样做时，`checkout -f`您告诉 git 吹走任何妨碍结帐的东西——这就是索引中的所有内容，以及工作树中在索引状态和新分支之间发生变化的任何内容.

特别是，将`git add`您标记`foo{3,4}/index.php`为跟踪的文件；在结帐期间，如果文件在当前索引中被跟踪并且在新索引中未被跟踪，那么它存在于跟踪状态而现在不存在，因此切换到匹配新的跟踪状态必然意味着从工作树中删除文件。

通常，git 将拒绝删除跟踪文件的未提交内容，并带有或多或少的解释性消息，但您指定了`--force`. 不要那样做。*

# c# - 从 Main() 调用

> ID：15052827
> 
> 赞同：0
> 
> 时间：2013-02-24T14:43:28.603
> 
> 标签：c#, class, main

我有一个问题，我要声明一个公共类和结构，然后必须从我的 main 运行一个函数，并且不能从 main 声明类和结构内的变量。因此，由于“方法没有重载”错误，该函数将无法工作。我将如何解决这个问题？我觉得好像我错过了一些非常简单但看不到的东西。

提前致谢。如果您需要任何进一步的信息来帮助我，请不要犹豫。

```
 public struct CellReference
    {
        private int CNorth, CEast;

        public int CellsNorth
        {
            get
            {
                return CellsNorth;
            }
            set
            {
                CNorth = value;
            }
        }

        public int CellsEast
        {
            get
            {
                return CellsEast;
            }
            set
            {
                CEast = value;
            }
        }

    }

    static void Main(string[] args)
    {
        Piece black1, black2, black3, black4, black5, black6, black7, black8, black9, black10, black11, black12, white1, white2, white3, white4, white5, white6, white7, white8, white9, white10, white11, white12;

        StartGame();
        Console.ReadKey();

    }

    public class Piece
    {
        public CellReference Location;
        public bool isBlack;
        public bool isKing;

    } 
```

基本上我无法初始化 StartGame() 需要的一些变量。

那么 StartGames 是这样的：

```
static void StartGame(ref int CNorth, ref int CEast, ref bool isKing, ref bool isBlack, ref int CellsEast, ref int CellsNorth, ref Piece black1, ref Piece black2, ref Piece black3, ref Piece black4, ref Piece black5, ref Piece black6, ref Piece black7, ref Piece black8, ref Piece black9, ref Piece black10, ref Piece black11, ref Piece black12, ref Piece white1, ref Piece white2, ref Piece white3, ref Piece white4, ref Piece white5, ref Piece white6, ref Piece white7, ref Piece white8, ref Piece white9, ref Piece white10, ref Piece white11, ref Piece white12) 
```

但是，如果我在 main 中调用 StartGame()，如果我将所有引用都放入它不起作用，因为它们不在 Main 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:49:07.860

我认为人们没有回答的原因是因为您证明缺乏基本的编程概念，人们很难清楚地向您解释您的问题。@jibedoubleve 突出了其中许多。我建议你拿起一本 C# 初学者的书来阅读以获得更多的理解。

恕我直言，我认为您遇到的基本问题是理解 C# 程序入口点和 OOP 概念。所以这是我尝试用代码解释的：

```
public static class Program
{
    [STAThread]
    static void Main()
    {
        var game = new Game();
        game.StartGame();
    }
}

public class Game
{
    Piece black1, black2, black3,
    black4, black5, black6, black7, 
    black8, black9, black10, black11,
    black12, white1, white2, white3,
    white4, white5, white6, white7,
    white8, white9, white10, white11, white12;

    public struct CellReference
    {
        public int CellsNorth;

        public int CellsEast;
    }

    public class Piece
    {
        public CellReference Location
        public bool isBlack;
        public bool isKing;
    }

    public StartGame()
    {
        // play game logic here
    }
} 
```

自动生成的 Program 类处理应用程序级别的问题，例如创建窗口和检查应用程序运行权限。

Main() 函数是程序入口点。您创建一个 Game 对象来操作片段和逻辑。请注意，Program 类不应该有 StartGame() 方法，而是知道如何开始游戏的是 Game 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:32:13.003

一些备注：

**错误：**

> 方法'Main'没有重载需要0个参数

发生此错误是因为您正在调用`StartGame`不带参数的方法，而正在期待一个巨大的参数列表。要解决此问题，请为您的方法指定参数；）

**访问者：**

第一次尝试获取`CellReference.CellsEast`or的值时`CellReference.CellsNorth`，您将得到 a`StackOverflowException`因为访问器正在调用自身。要解决这个问题，你可以`struct`这样重写：

```
public struct CellReference
{
    public int CellsNorth
    {
        get; set;
    }

    public int CellsEast
    {
        get; set;
    }
} 
```

**`StartGame`签名：**

**19个**论点，太过分了！！！请使用一块`Array`。我写了这样的代码：

```
void Main()
{
    var pieces= new Piece[] 
    { 
        new Piece(1), 
        new Piece(2) 
    };
    StartGame(array);
}

private void StartGame(Piece[] pieces)
{
    /* Do your work*/
}

class Piece
{
    public Piece(int i)
    {
        this.Value = i;
    }
    private int Value { get; set; }
} 
```

**`ref`关键词：**

你为什么使用关键字`ref`？你想要`StartGame`修改你将在`Main`方法中使用的参数吗？

我创建了一个类，其中包含一组片段以及修改它们的方法。如果您需要获取碎片的值，我会创建吸气剂。

**您的领域的 Pascal 案例：**

`_`通常，我们对字段使用 Camel 大小写（或者我们以“ ”或“ ”为前缀`m_`），对属性、类和方法使用 Pascal 大小写。如果一切都在 Pascal Case 中，你真的不知道你在使用什么。这不是强制性的，但它是一个良好的实践规则。

# qt - 什么样的小部件在这方面有用？

> ID：15052828
> 
> 赞同：0
> 
> 时间：2013-02-24T14:43:44.343
> 
> 标签：qt

我需要一个像这样的项目列表..

![使用 qt 设计器创建的示例 designa](../Images/7ccc31e4d3a711f7461748a3038eb9d3.png)

在此单击 deletePushButton 时，应删除整行。

由于此列表是动态创建的，因此我正在创建多个水平布局并添加到代码中的垂直布局，我的问题是如何映射水平布局中的 3 个项目。而且我不确定这种设计的更好方法是什么。

我在 Win 7 中使用 Qt 4.8.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:52:34.497

创建一个新的小部件并将您的三个控件放在上面。

```
class MyWidget : public QWidget
{
    Q_OBJECT
public:
    MyWidget(QWidget *parent = 0);
private:
    QLabel *label;
    QLineEdit *edit;
    QPushButton *deleteButton;
};

MyWidget(QWidget *parent) :
   QWidget(parent)
{
    label = new QLabel("text");
    edit = new QLineEdit;
    deleteButton = new QPushButton;

    QHBoxLayout *mainLayout = new QHBoxLayout;
    mainLayout->addWidget(label);
    mainLayout->addWidget(edit);
    mainLayout->addWidget(deleteButton);

    setLayout(mainLayout);

    connect(deleteButton, SIGNAL(clicked()), this, SLOT(deleteLater()));
} 
```

# python - python: lower() 德语变音符号

> ID：15052830
> 
> 赞同：8
> 
> 时间：2013-02-24T14:43:44.790
> 
> 标签：python, unicode, diacritics, lowercase, case-folding

我在将带有变音符号的大写字母转换为小写字母时遇到问题。

```
print("ÄÖÜAOU".lower()) 
```

A、O 和 U 被正确转换，但 Ä、Ö 和 Ü 保持大写。有任何想法吗？

.decode('utf-8') 解决了第一个问题，但我还有第二个问题：

```
# -*- coding: utf-8 -*-
original_message="ÄÜ".decode('utf-8')
original_message=original_message.lower()
original_message=original_message.replace("ä", "x")
print(original_message) 
```

回溯（最后一次调用）：文件“Untitled.py”，第 4 行，在 original_message=original_message.replace("ä", "x") UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 0: ordinal不在范围内(128)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T14:47:48.520

除非您使用纯 ASCII，否则您需要将其标记为 unicode 字符串；

```
> print(u"ÄÖÜAOU".lower())

äöüaou 
```

使用变量时它的工作原理相同，这完全取决于分配给变量的类型。

```
> olle = "ÅÄÖABC"
> print(olle.lower())
ÅÄÖabc

> olle = u"ÅÄÖABC"
> print(olle.lower())
åäöabc 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T14:48:02.567

您正在处理编码字符串，而不是 unicode 文本。

字节串的`.lower()`方法只能处理ASCII值。将您的字符串解码为 Unicode 或使用`unicode`文字 ( `u''`)，然后小写：

```
>>> print u"\xc4AOU".lower()
äaou 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T16:00:14.553

如果您使用的是 Python 2，但不想在所有字符串上添加前缀 u""，请将其放在程序的开头：

```
from __future__ import unicode_literals
olle = "ÅÄÖABC"
print(olle.lower()) 
```

现在将返回：

```
åäöabc 
```

编码指定如何将从磁盘读入的字符解释到程序中，但 from __future __ import 语句告诉如何在程序本身中解释这些字符串。你可能需要两者。

# perl - 命令行查找和替换

> ID：15052845
> 
> 赞同：0
> 
> 时间：2013-02-24T14:45:24.110
> 
> 标签：perl, shell, command-line, ssh, command

我正在尝试替换

```
</url></loc> 
```

和

```
</loc></url> 
```

在我所有的文件中，但似乎没有任何效果。有没有办法通过命令行、perl 等来做到这一点？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T15:05:28.193

请注意，许多版本`sed`无法识别`-i`. 但是你可以用 perl 做同样的事情：

```
find . -exec perl -i -pe 's|(</url>)(</loc>)|$2$1|g' {} \; 
```

Perl 比 sed 有一个很大的优势，因为它可以更容易地扩展它以包含分布在多行上的两个标签的出现。

```
perl -0777 -i -pe 's|(</url>)(\s*)(</loc>)|$3$2$1|g' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T14:48:49.017

签出`sed`：

```
sed -i 's|</url></loc>|</loc></url>|g' <filenames> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T14:48:55.603

使用 sed：

```
sed -i 's/<\/url><\/loc>/<\/loc><\/url>/g' yourfiles.* 
```

要替换其他标签：

```
sed -E -i 's/<\/(url|what|ever)><\/(loc|any|other)>/<\/\2><\/\1>/g' yourfiles.* 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T17:53:01.170

```
find . -type f -name "yourname*" -exec sed -i 's/<\/url><\/loc>/<\/loc><\/url>/g' '{}' ';' 
```

# integration-testing - 使用 Java EE 6 (JBoss 7.x) 测试钝化

> ID：15052848
> 
> 赞同：4
> 
> 时间：2013-02-24T14:45:45.407
> 
> 标签：integration-testing, java-ee-6, jboss7.x, cdi, jboss-arquillian

我有一些我想测试的 SessionScoped bean，我突然想到我没有测试它们被钝化时会发生什么。

我非常想在集成测试中解决这个差距。但是，似乎并不容易找到这方面的文档。

我发现了一个关于[如何使用 OpenEJB](https://stackoverflow.com/questions/12297364/howto-test-passivation-of-stateful-session-beans-in-integration-test-openejb)的问题，但我认为这对我不起作用。

理想情况下，我想要一种与 Arquillian 一起工作的平台独立方式，但我会接受与 JBoss 7.x 一起工作的方式。

# python - GAE Python - 将数据库查询保存到 cookie

> ID：15052852
> 
> 赞同：1
> 
> 时间：2013-02-24T14:46:18.933
> 
> 标签：python, google-app-engine, cookies

我正在尝试将数据库查询保存到 cookie 中，因为我需要每个页面上的结果。当将到期日期硬编码到代码中时，一切正常，但是当我用动态“第二天”到期替换硬编码日期时，它给了我以下错误：

```
self.response.headers.add_header(str('Set-Cookie'), str('shops=%s; path=/; expires=%s') % shoplist expire_string)
                                                                                                               ^
SyntaxError: invalid syntax 
```

我也尝试使用 response.set_cookie 方法，但这根本不起作用，这就是我决定使用以下代码的原因：

```
class CookieHandler(webapp2.RequestHandler):
    def get(self):
        shoplist = Shop.all().filter('active = ', True).order('abbrev')
        expire_date = datetime.datetime.now() + datetime.timedelta(days=1)
        expire_string = expire_date.strftime('%a, %d %b %Y %H:%M:%S GMT')
        self.response.headers.add_header(str('Set-Cookie'), str('shops=%s; path=/; expires=%s') % shoplist expire_string) 
```

**更新** 为了提供有关内容的更多信息 - 它是对数据库中所有商店名称的查询。该查询用于在每个页面上可见的搜索框上的自动完成功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:10:03.993

您的语法错误正在发生，因为“%”运算符需要一个元组在其右侧，因此您的代码行应该是：

```
self.response.headers.add_header(str('Set-Cookie'), str('shops=%s; path=/; expires=%s') % (shoplist, expire_string)) 
```

注意额外的括号和逗号。

# css - Chrome Inspector：实时 CSS 编辑 - 不会保存

> ID：15052857
> 
> 赞同：0
> 
> 时间：2013-02-24T14:46:55.880
> 
> 标签：css, google-chrome, google-chrome-devtools

在 Chrome Inspector 中 - 任何人都知道为什么有时当您右键单击“源”中的 CSS 文件并单击“保存”时什么都没有发生？“*”仍然存在，并且我的 CSS 文件没有在其他任何地方被读取。

如果我尝试“另存为”，它会写入一个新的 CSS 文件，但不包括我最近的更改。

我正在使用版本 25.0.1364.97。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:49:01.323

我在 Mac OSX 版本 10.8.2 上使用 google chrome**版本****25.0.1364.99**

 **我打开了一个我最近编写的应用程序，并通过右键单击->“检查元素”进行了更改，右侧交互式 CSS 框带有一些 h1 和颜色。然后我单击“另存为”并打开那个新的 css 文件。所有更改均被采纳。

所以对我来说它工作正常！也许你更新你的谷歌浏览器版本。- 你觉得这有帮助吗？不错，给个赞**

# c# - 有效地等待一个或多个资源可用

> ID：15052859
> 
> 赞同：1
> 
> 时间：2013-02-24T14:47:04.623
> 
> 标签：c#, multithreading, task-parallel-library, multitasking

在我花太长时间重新发明轮子之前，我想检查一下 .Net 中是否已经有一个类可以满足我的需求。

我想要的是有点像信号量（甚至可能像 CountdownEvent），但略有不同。

我有一个要求，我有不同数量的可用“资源”，并且我希望线程在可用资源为零时有效地等待。同时，另一个线程可以释放资源，这应该立即释放另一个等待线程。

这听起来很像信号量，但这并不是因为信号量（据我所知）在计算每个线程时将它们视为“资源”。

无论如何，这是我想要的第一个简单实现。它还没有处置、代码合同、错误处理、超时支持或取消支持，但它应该展示我想要的：

```
public sealed class ResourceCounter
{
    /// <summary>Create with the specified number of resources initially available.</summary>

    public ResourceCounter(int resourceCount)
    {
        _resourceCount = resourceCount;

        if (_resourceCount > 0)
        {
            _resourceAvailable.Set();
        }
    }

    /// <summary>Acquires a resource. Waits forever if necessary.</summary>

    public void Acquire()
    {
        while (true)
        {
            _resourceAvailable.Wait();

            lock (_lock)
            {
                if (_resourceCount > 0)
                {
                    if (--_resourceCount == 0)
                    {
                        _resourceAvailable.Reset();
                    }

                    return;
                }
            }
        }
    }

    /// <summary>Releases a resource.</summary>

    public void Release()
    {
        lock (_lock)
        {
            ++_resourceCount;
            _resourceAvailable.Set();
        }
    }

    private int _resourceCount;
    private readonly object _lock = new object(); 
    private readonly ManualResetEventSlim _resourceAvailable = new ManualResetEventSlim();
} 
```

使用模式非常简单：

1.  使用所需的初始资源计数（可以为零或更多）构造一个 ResourceCounter。

2.  想要获取资源的线程调用 ResourceCounter.Acquire()，在资源可用且已获取之前不会返回。

3.  想要释放资源的线程调用 ResourceCounter.Release()，它将释放资源并立即返回。

请注意，任何线程都可以释放资源；它不一定是获得资源的人。

我将它用作一些多线程管道代码的一部分，其中一个线程负责将工作项排队，几个线程正在处理工作项，另一个线程正在输出处理后的工作项。输出已处理工作项的线程必须对它们进行多路复用（因为处理线程可以以任何顺序输出已完成的项），并且我需要一种机制来阻止工作项在多路复用器等待延迟项时无休止地排队。

（有关这方面的一些背景信息，请参阅[管道、多路复用和无界缓冲](https://stackoverflow.com/questions/15021469/pipelines-multiplexing-and-unbounded-buffering)。）

无论如何，是否有任何可用的方法来做到这一点，还是我应该继续为此开发自己的课程？

* * *

[编辑]

如下所述，SemaphoreSlim 完全正确。我拒绝了它，因为我认为调用 Wait() 的线程必须是调用 Release() 的线程，但事实并非如此。这就是我在星期天编码所得到的……；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T15:54:40.243

使用队列进行通信更容易构建多级管道架构。生产者线程将项目放入工作队列，一个或多个工作线程出列并处理项目，并将它们添加到输出队列。最后一个线程读取输出队列并输出数据。

在 .NET 中，这很容易通过[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)完成。

有关两阶段管道的示例，请参阅[https://stackoverflow.com/a/5108487/56778 。](https://stackoverflow.com/a/5108487/56778)添加另一个阶段很简单。

为了处理输出线程乱序的问题，我使用最小堆将输出队列设置为优先级队列。我的项目由一个连续的记录号标识，因此输出线程知道接下来要输出哪个记录​​号。它将等待`AutoResetEvent`一个项目被放置在队列中（工作进程将在项目入队时设置事件）。然后，输出线程将查看顶部项目以查看它是否与预期项目匹配。如果没有，它将再次等待事件。

这非常有效，因为它消除了第二个队列。该块在它所属的输出队列中。性能非常适合我的目的。将项目入队是一个 O(log n) 操作，但实际上`n`非常小。即使队列中有 100,000 个项目，与处理记录所需的时间相比，将项目排入队列所需的时间也微不足道。

您仍然可以使用`BlockingCollection`它。你只需要让一个二进制堆类实现这个`IProducerConsumerCollection`接口。我通过向我在[A Generic BinaryHeap 类](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=789)中发布的简单二进制堆类添加锁来做到这一点。然后，您可以将其中之一提供给`BlockingCollection`构造函数，如下所示：

```
BlockingCollection<MyRecord> = 
    new BlockingCollection<ConcurrentBinaryHeap<MyRecord>>(
    new ConcurrentBinaryHeap<MyRecord>, MaxQueueSize); 
```

不过，这里有一个潜在的僵局。如果队列已满（即超过了您在初始化 时设置的最大值`BlockingCollection`），那么迟到的线程无法将项目入队并且所有工作都将完全停止。这在实践中从未发生在我身上，因为尽管我每条记录的处理时间各不相同，但它们并没有*太大*的变化。

如果这是一个问题，您可以增加队列大小（仅当您可以肯定地说您永远不会填满队列时才有效），或者如果队列已满，则为下一个预期要发布的项目提供备用渠道. 我完成了这项工作，但为了我的目的，增加队列大小更容易。

如果您有兴趣，我可以翻阅我的档案以找到该`ConcurrentBinaryHeap`课程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T15:58:01.230

线程相互通信的方式与资源或其锁定机制无关。没有什么能阻止您在同一个*进程*中使用临时消息系统（消息队列、事件或任何适合您需要的东西）传递信号量和资源。

# spring - Spring 安全认证：获取没有 SPRING_SECURITY_LAST_USERNAME 的用户名

> ID：15052860
> 
> 赞同：11
> 
> 时间：2013-02-24T14:47:05.000
> 
> 标签：spring, security, jsp, authentication, login

我是spring框架的新手。我正在为我的 web 应用程序创建一个登录页面，并且我希望用户在对应用程序进行任何操作之前登录。如果用户输入了良好的凭据，一切都可以正常工作，但如果输入错误的凭据，我想显示一条消息并将用户名保留在输入元素上。显示消息不是问题，但如果不使用已弃用的变量 SPRING_SECURITY_LAST_USERNAME，我无法将用户名保留在我的 jps 文件中。

希望有人可以帮助我，我正在使用 Spring 3。

更新：要求说我不想在 url 上显示用户名。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-24T15:58:12.013

不推荐使用的常量的文档准确地说明了您应该做什么：

```
/**
 * @deprecated If you want to retain the username, cache it in a customized {@code AuthenticationFailureHandler}
 */
@Deprecated
public static final String SPRING_SECURITY_LAST_USERNAME_KEY =
           "SPRING_SECURITY_LAST_USERNAME"; 
```

像这样的东西：

```
public class UserNameCachingAuthenticationFailureHandler
    extends SimpleUrlAuthenticationFailureHandler {

    public static final String LAST_USERNAME_KEY = "LAST_USERNAME";

    @Autowired
    private UsernamePasswordAuthenticationFilter usernamePasswordAuthenticationFilter;

    @Override
    public void onAuthenticationFailure(
            HttpServletRequest request, HttpServletResponse response,
            AuthenticationException exception)
            throws IOException, ServletException {

        super.onAuthenticationFailure(request, response, exception);

        String usernameParameter =
            usernamePasswordAuthenticationFilter.getUsernameParameter();
        String lastUserName = request.getParameter(usernameParameter);

        HttpSession session = request.getSession(false);
        if (session != null || isAllowSessionCreation()) {
            request.getSession().setAttribute(LAST_USERNAME_KEY, lastUserName);
        }
    }
} 
```

在您的安全配置中：

```
<security:http ...>
    ...
    <security:form-login
        authentication-failure-handler-ref="userNameCachingAuthenticationFailureHandler"
    ...
    />
</security:http>

<bean 
    id="userNameCachingAuthenticationFailureHandler"
    class="so.UserNameCachingAuthenticationFailureHandler">
    <property name="defaultFailureUrl" value="/url/to/login?error=true"/>
</bean> 
```

在您的 login.jsp 中：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page session="true" %>

...

<%--in the login form definition--%>
<input id="j_username" name="j_username" type="text" 
    value="<c:out value="${sessionScope.LAST_USERNAME}"/>"/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-11T11:46:56.350

如果有人来到这里在 Grails Spring 安全中遇到这个问题。您现在可以使用以下内容 -

```
import grails.plugin.springsecurity.SpringSecurityUtils; 
```

现在使用`SpringSecurityUtils.SPRING_SECURITY_LAST_USERNAME_KEY`它会起作用并且不会被弃用。

# delphi - Delphi 到 Windows 传真

> ID：15052862
> 
> 赞同：4
> 
> 时间：2013-02-24T14:47:09.383
> 
> 标签：delphi, delphi-xe2

任何人都知道如何使用 Windows 8 Fax true Delphi 发送传真。我的意思是我需要启动带有数字和 pdf 附件的 Windows 传真。任何关于那个的教程？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T00:01:49.687

例如，您可以使用[`Fax Service COM Interfaces`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684567%28v=vs.85%29.aspx)。对于简单的操作，您可以导入库的类型`fxscomex.dll`库并使用这样的代码（基于[`this example`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms693482%28v=vs.85%29.aspx)）：

```
uses
  ComObj, ActiveX, FAXCOMEXLib_TLB;

procedure TForm1.Button1Click(Sender: TObject);
var
  I: Integer;
  JobIDs: OleVariant;
  FaxServer: IFaxServer2;
  FaxDocument: IFaxDocument2;
begin
  try
    FaxServer := CoFaxServer.Create;
    FaxServer.Connect('');
    FaxDocument := CoFaxDocument.Create;
    FaxDocument.Body := 'd:\Document.pdf';
    FaxDocument.DocumentName := 'Document name';
    FaxDocument.Recipients.Add('+1 (425) 555-4567', 'Bill');
    FaxDocument.Sender.Name := 'Bob';
    FaxDocument.Sender.BillingCode := '23A54';
    FaxDocument.Sender.Department := 'Accts Payable';
    FaxDocument.Sender.FaxNumber := '+972 (4) 555-9070';
    JobIDs := FaxDocument.ConnectedSubmit(FaxServer);

    for I := VarArrayLowBound(JobIDs, 1) to VarArrayHighBound(JobIDs, 1) do
      ShowMessage('Job ID: ' + VarArrayGet(JobIDs, [I]));
  except
    on E: EOleSysError do
      ShowMessage(
        Format('Sending of the fax failed! %s [%d]', [E.Message, E.ErrorCode])
      );
  end;
end; 
```

或者没有类型库也一样：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  I: Integer;
  JobIDs: OleVariant;
  FaxServer: OleVariant;
  FaxDocument: OleVariant;
begin
  try
    FaxServer := CreateOleObject('FaxComEx.FaxServer');
    FaxServer.Connect('');
    FaxDocument := CreateOleObject('FaxComEx.FaxDocument');
    FaxDocument.Body := 'd:\Document.pdf';
    FaxDocument.DocumentName := 'Document name';
    FaxDocument.Recipients.Add('+1 (425) 555-4567', 'Bill');
    FaxDocument.Sender.Name := 'Bob';
    FaxDocument.Sender.BillingCode := '23A54';
    FaxDocument.Sender.Department := 'Accts Payable';
    FaxDocument.Sender.FaxNumber := '+972 (4) 555-9070';
    JobIDs := FaxDocument.ConnectedSubmit(FaxServer);

    for I := VarArrayLowBound(JobIDs, 1) to VarArrayHighBound(JobIDs, 1) do
      ShowMessage('Job ID: ' + VarArrayGet(JobIDs, [I]));
  except
    on E: EOleSysError do
      ShowMessage(
        Format('Sending of the fax failed! %s [%d]', [E.Message, E.ErrorCode])
      );
  end;
end; 
```

# magento - Magento：为什么观察者中的公共功能不起作用？

> ID：15052866
> 
> 赞同：0
> 
> 时间：2013-02-24T14:47:17.113
> 
> 标签：magento

我的模块有 2 个文件：etc/config.xml 和 Model/Observer.php

**配置.xml：**

```
<config>
    <global>
        <cache>
            <types>
                <DN_js_module module="COMP_dn_js" translate="DN Cache">
                    <label>DN Cache (JS CSS)</label>
                    <description>Refresh Javascript and CSS (DN)</description>
                    <tags>COMP_DN_JSCSS</tags>
                </DN_js_module>
            </types>
        </cache>
        <events>             
            <DN_trigger>
                <observers>
                    <comp_dncache>
                        <type>singleton</type>
                        <class>dncache/observer</class>
                        <method>setCache</method>
                    </comp_dncache>
                </observers>
            </DN_trigger>
        </events>
    </global>
</config> 
```

**观察者.php：**

```
class COMP_DNCache_Model_Observer extends Mage_Adminhtml_CacheController
{
    public function __construct(){
    }

    public function setCache($observer){
         die('test');
    }
} 
```

因此，config.xml 在 Magento 的缓存列表中添加了一个额外的选项。刷新后，我希望公共函数 setCache() 运行并（在这种情况下）向我显示输出：'test'

现在的问题是，setCache 没有被触发，我无法让“测试”显示:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:22:55.747

假设在您的代码中您正在调度事件`dn_trigger`

例如

```
 Mage::dispatchEvent(
     'dn_trigger',
     array('xyz' => $xyz, )
 ); 
```

在**Observer.php 中：**

```
class COMP_DNCache_Model_Observer
{
    public function __construct(){
    }

    public function setCache($observer){
         die('test');
    }
} 
```

# android - Android 新应用创建

> ID：15052870
> 
> 赞同：-2
> 
> 时间：2013-02-24T14:47:42.277
> 
> 标签：android

在新建 Android 应用程序向导中，

编译为空，该组合框中没有填充任何内容。有什么问题？请帮帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:52:17.547

在 SDK 管理器中，您需要下载一个或多个“SDK 平台”项，对应您想要的 Android 版本/API 级别：

![Android SDK 管理器](../Images/a3d14c8f2b3ce5ca9697e294fd92fe63.png)

上图中，需要勾选“Android 4.2”下的“SDK Platform”等项目，然后点击右下角的“Install”按钮。

您可能还希望阅读文档中的以下页面：

*   [http://developer.android.com/tools/help/sdk-manager.html](http://developer.android.com/tools/help/sdk-manager.html)
*   [http://developer.android.com/sdk/installing/adding-packages.html](http://developer.android.com/sdk/installing/adding-packages.html)
*   [http://developer.android.com/sdk/exploring.html](http://developer.android.com/sdk/exploring.html)

# java - BufferedWriter 如何不覆盖已保存的文本？

> ID：15052875
> 
> 赞同：0
> 
> 时间：2013-02-24T14:48:20.307
> 
> 标签：java, file

大家好，想知道您是否可以帮助我，我正在尝试创建一个日志文件，其中保存了用户选择的所有变量，到目前为止我得到了：

```
try{
         String content = (" User : " + username + "\n Print job to be printed at : " + (dateFormat.format(cal.getTime())) +"\n Copies selected : " + p +"\n Papersize selected : " + paperSize + "\n Duplex selected : " +duplex + "\n Oreination Selected : " +orienation + "\n Printer Selected : " +printer);

         //File file = new File(log);

         FileWriter fw = new FileWriter(log);
         BufferedWriter bw = new BufferedWriter(fw);
         bw.write(content);
         bw.close();

         System.out.println("Logged the print job");

         } catch (IOException e) {
         e.printStackTrace();
         } 
```

这工作得很好，但是我希望下次调用它来将数据添加到文件中已有的数据下方，而不是覆盖它，这可能吗？因为这比每次创建一个新文件要好得多，

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T14:49:30.983

更改构造函数以使用`boolean append`和发送`true`。

```
FileWriter fw = new FileWriter(log, true); 
```

来自[`FileWriter(File file, boolean append)`](http://docs.oracle.com/javase/6/docs/api/java/io/FileWriter.html#FileWriter%28java.io.File,%20boolean%29)：）

# c# - mysql异常将数据从网格视图复制到数据库表

> ID：15052877
> 
> 赞同：0
> 
> 时间：2013-02-24T14:48:31.797
> 
> 标签：c#, mysql, sql, winforms, datagridview

我有一个数据网格视图我想将数据从数据网格视图复制到数据库表，它会引发 mysql 异常，请帮助这是我的代码

```
 foreach (DataGridViewRow row in dataGridView2.Rows)
        {
            if (row.Cells[0].Value != null) //if id is not null
            {
                string mysqlStatement = "INSERT INTO test1(Paper, Authors, ID, GSCitations) VALUES('" + row.Cells[0].Value + "','" + row.Cells[1].Value + "','" + row.Cells[2].Value + "','" + row.Cells[3].Value + "');";
                MySqlCommand mysqlCmd = new MySqlCommand(mysqlStatement, connection);
                mysqlCmd.ExecuteNonQuery();
            }
        } 
```

不正确的整数值：第 1 行的“ID”列的“分组可验证内容选择性披露”是错误的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:55:46.627

记录很有可能包含`single quote`. 并且您的查询很容易受到`SQL Injection`.

请参数化查询：

*   避免`SQL Injection`
*   避免`SQL Injection` `:D`

代码片段：

```
string mysqlStatement = @"INSERT INTO test1(Paper, Authors, ID, GSCitations) 
                            VALUES(@paper, @Authors, @ID, @GSCitations)";

MySqlCommand mysqlCmd = new MySqlCommand(mysqlStatement, connection);
mysqlCmd.ExecuteNonQuery();

string connStr = "connection string here";
using (MySqlConnection conn = new MySqlConnection(connStr))
{
    using (MySqlCommand comm = new MySqlCommand())
    {
        comm.Connection = conn;
        comm.CommandText = mysqlStatement;
        comm.Parameters.AddWithValue("@paper", row.Cells[0].Value);
        comm.Parameters.AddWithValue("@Authors", row.Cells[1].Value);
        comm.Parameters.AddWithValue("@ID", row.Cells[2].Value);
        comm.Parameters.AddWithValue("@GSCitations", row.Cells[3].Value);
        try
        {
            conn.Open();
            comm.ExcuteNonQuery();
        }
        catch(MySqlException e)
        {
            // do something with
            // e.ToString()  // this is the exception
        }
    }
} 
```

如你看到的：

*   代码使用`Try-Catch`块来正确处理异常
*   使用`using`语句进行正确的对象处理

# c# - HTMLAgility Pack 可以留下未封闭的标签吗？

> ID：15052878
> 
> 赞同：2
> 
> 时间：2013-02-24T14:48:36.583
> 
> 标签：c#, html-agility-pack

我需要解析这样的 HTML 字符串：

```
<widget attribute="1">
  <header>
    <table>
  </header>
  <item>
    <tr><td>content</td></tr>
  </item>
  <footer>
    </table>
  </footer>
</widget> 
```

我正在使用 Html Agility Pack，并且能够找到所有“小部件”：

```
HtmlDocument doc = new HtmlDocument();
doc.OptionAutoCloseOnEnd = false;
doc.OptionOutputAsXml = false;
doc.LoadHtml(htmlString); 
HtmlNodeCollection widgets = doc.DocumentNode.SelectNodes("//widget"); 
```

我的问题是当我尝试获取 Widget 节点的所有子节点时。HTMLAgility 会自动关闭我的所有标签，因此我无法正确检索 Header、Item 和 Footer 节点。Agility 生成的输出为：

```
<header>
    <table>
</table></header>
<item>
    <tr>
        <td><p>Riga n.1</p></td>
    </tr>
</item>
<footer>

</footer> 
```

它关闭 Header 中的 Table 标签，并隐藏 Footer 中的 Table 标签。有没有办法让这些标签保持打开状态？我试图搜索有关 LoadHtml 方法逻辑的文档，但没有找到任何东西。我想我需要玩Options。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T06:57:43.027

Html Agility Pack 通常在设计上不支持重叠标签。但是，您可以像这样调整它：

```
HtmlDocument doc = new HtmlDocument();
HtmlNode.ElementsFlags.Add("table", HtmlElementFlag.CanOverlap | HtmlElementFlag.Empty);
doc.LoadHtml(htmlString); 
```

在这种情况下，您指示库将 TABLE 视为重叠标记。作为旁注，FORM 是唯一默认定义为重叠标签的标签（请参阅此处的原因：[HtmlAgilityPack -- <form> 是否出于某种原因关闭自身？](https://stackoverflow.com/questions/4218847/htmlagilitypack-does-form-close-itself-for-some-reason)）。

然而，这并不是免费的午餐……

这意味着，库现在将看到表内的内容和结束表标记作为纯文本元素。所以解析表中的所有标签都不能通过编程方式访问，你不会在 DOM 中看到它，你不会使用 XPATH 看到它等等......但这可能足以满足你的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T14:57:01.723

HtmlAgilityPack 解析 HTML。这是完全损坏的 HTML，因此需要最好的猜测。浏览器也不会好过。例如，Firefox 将其翻译为：

```
<header>
<item> </item>
<footer> </footer>
<table>
<tbody>
<tr>
<td>content</td>
</tr>
</tbody>
</table>
</header> 
```

通过使用损坏的 HTML，您将自己开放给特定于实现的未定义行为。修复您的 HTML 并恢复对世界的感知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:58:09.037

您需要`<>`从您的值中删除这些符号，然后您可以`XDocument.Parse()`：

```
<widget attribute="1">
    <header>[table]</header>
    <item>[tr][td]content[/td][/tr]</item>
    <footer>[/table]</footer>
</widget> 
```

正是`.Replace('[','<').Replace(']', '>')`您阅读的内容，您应该一切顺利。

[关于 System.Xml.Linq.XDocument 类的意大利语 MSDN 页面在这里](http://msdn.microsoft.com/it-it/library/system.xml.linq.xdocument.aspx)

# java - String 键的 HashMap.put 通常是瓶颈吗？我该如何加快速度？

> ID：15052883
> 
> 赞同：3
> 
> 时间：2013-02-24T14:48:58.763
> 
> 标签：java, hashmap

我正在用 Java 编写一个[随机索引](http://en.wikipedia.org/wiki/Random_indexing)实现，它需要处理大型语料库并以某种方式存储单个标记的上下文和索引向量。HashMap 看起来很自然（String -> Token 对象），但是在运行 Xprof 时，似乎有不成比例的大部分处理将令牌添加到 HashMap。

我是否正确读取输出？为什么会这样，有什么方法可以让我加快速度吗？

```
Flat profile of 16.18 secs (606 total ticks): main
  Interpreted + native   Method                        
  6.9%     0  +    42    java.io.FileInputStream.readBytes
  5.0%     0  +    30    java.lang.Object.getClass
  1.8%    11  +     0    java.lang.String.toLowerCase
  1.5%     9  +     0    java.util.HashMap.resize
  1.3%     8  +     0    opennlp.tools.tokenize.AbstractTokenizer.tokenize
  1.3%     0  +     8    java.util.zip.ZipFile.read
  1.2%     0  +     7    java.util.zip.ZipFile.open
  0.8%     5  +     0    java.util.Arrays.copyOfRange
  0.5%     0  +     3    java.io.FileInputStream.available
  0.3%     2  +     0    java.util.HashMap.put
  0.3%     0  +     2    sun.misc.Unsafe.compareAndSwapLong
  0.3%     2  +     0    java.lang.CharacterDataLatin1.toLowerCase
  0.3%     2  +     0    java.util.ArrayList.grow
  0.3%     2  +     0    semanticspace.SparseVector.get
  0.3%     2  +     0    java.lang.CharacterData.of
  0.2%     1  +     0    java.util.HashMap.createEntry
  0.2%     1  +     0    java.util.Arrays.copyOf
  0.2%     1  +     0    java.lang.Integer.valueOf
  0.2%     1  +     0    java.lang.Integer.toString
  0.2%     1  +     0    sun.misc.JarIndex.addToList
  0.2%     1  +     0    java.util.ArrayList.toArray
  0.2%     1  +     0    java.net.URL.toString
  0.2%     1  +     0    semanticspace.SparseVector.add
  0.2%     1  +     0    sun.reflect.NativeMethodAccessorImpl.invoke0
  0.2%     1  +     0    java.io.BufferedInputStream.read1
 26.2%    65  +    94    Total interpreted (including elided)

     Compiled + native   Method                        
 36.5%   217  +     4    java.util.HashMap.put
 24.3%   133  +    14    semanticspace.SparseVector.add
  2.6%    15  +     1    semanticspace.RandomIndexing.getToken
  1.3%     8  +     0    java.lang.String.toLowerCase
  1.3%     8  +     0    semanticspace.RandomIndexing.read
  0.5%     0  +     3    java.util.HashMap.newKeyIterator
  0.2%     0  +     1    semanticspace.SparseVector.get
  0.2%     1  +     0    java.util.HashMap.containsKey
 66.8%   382  +    23    Total compiled

         Stub + native   Method                        
  6.9%     0  +    42    java.lang.System.arraycopy
  6.9%     0  +    42    Total stub

Flat profile of 0.00 secs (1 total ticks): DestroyJavaVM

  Thread-local ticks:
100.0%     1             Blocked (of total)

Flat profile of 16.17 secs (608 total ticks): Monitor Ctrl-Break

  Interpreted + native   Method                        
 98.2%     0  +   597    java.net.PlainSocketImpl.socketAccept
  1.0%     0  +     6    java.net.PlainSocketImpl.initProto
  0.7%     0  +     4    java.net.NetworkInterface.getAll
  0.2%     0  +     1    java.lang.ClassLoader$NativeLibrary.load
100.0%     0  +   608    Total interpreted

Global summary of 16.33 seconds:
100.0%  1326             Received ticks
 53.2%   706             Received GC ticks
  6.8%    90             Compilation
  0.1%     1             Other VM operations 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T14:57:30.883

我不了解 Xprof，但是您可以尝试使用 visualvm 进行分析，并查看它调用 HashMap.put 的次数，每次需要多长时间以及总共需要多长时间。而且它可能对瓶颈在哪里有不同的看法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T14:55:55.880

您的问题中没有太多信息可以进行适当的分析，但是根据我所看到的，您只是在读取文件并将单词放入 HashMap 中。

鉴于这是该程序唯一要做的事情，人们不应该对它花费大部分时间读取文件和更新 HashMap 感到惊讶。

# java - 访问 icefaces 富文本编辑器的内部 HTML

> ID：15052885
> 
> 赞同：0
> 
> 时间：2013-02-24T14:49:10.257
> 
> 标签：java, icefaces

我的问题与 Icefaces 及其富文本编辑器有关。是否可以使用 JavaScript 访问富文本编辑器文本的 html 源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:04:21.917

你可以试试这样的`CKEDITOR.instances.editor1.document.getBody().getText();`。editor1 将是 inputRichText 的 id

# c# - 这个关键字的使用

> ID：15052886
> 
> 赞同：2
> 
> 时间：2013-02-24T14:49:10.503
> 
> 标签：c#, .net, this

我正在制作一个窗口表单应用程序。当我查看文件时，`Form1.Designer.cs`然后在我看到的自动生成的代码中

```
 this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(284, 262);
        this.Controls.Add(this.button2);
        this.Controls.Add(this.button1);
        this.Name = "Form1";
        this.Text = "Form1";
        this.ResumeLayout(false); 
```

**这**说明了什么以及可以在 c# 中以多少种方式使用它

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T14:50:29.153

它指的是类的当前实例。如果您使用 ReSharper 之类的工具，有时可能会被认为是多余的。

```
public class Test
{
        private string testVariable;

        public Test(string testVariable) 
        {
            this.testVariable = testVariable;
        }
} 
```

在这种情况下`this.testVariable`，指的是类中的私有字符串，而不是`testVariable`通过构造函数传入的字符串。

[http://msdn.microsoft.com/en-gb/library/dk1507sz(v=vs.71).aspx](http://msdn.microsoft.com/en-gb/library/dk1507sz(v=vs.71).aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T14:52:27.203

***this***关键字指的是一个类的当前实例——所以在这种情况下是正在加载的 Form1 的实例 。

至于为什么要使用它，它可以帮助区分变量 - 例如

```
 private string bar;

 private void Foo(string bar)
 {
   this.bar = bar;
 } 
```

（尽管对于上面的代码，许多人会认为私人酒吧应该是 _bar）

有关[此的更多信息](http://msdn.microsoft.com/en-gb/library/dk1507sz%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-24T14:52:18.583

[`this`](http://msdn.microsoft.com/cs-cz/library/dk1507sz%28v=vs.100%29.aspx)关键字指的是当前实例并且`class`也用作扩展方法的第一个参数的修饰符。

```
public Employee(string name, string alias)
{
// Use this to qualify the fields, name and alias:
this.name = name;
this.alias = alias;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-24T14:53:15.043

> this 关键字引用类的当前实例，也用作扩展方法的第一个参数的修饰符。

*   `this`关键字是指类的当前实例。它可用于从构造函数、实例方法和实例访问器中访问成员。
*   `this`消除命名冲突。
*   `this`不能引用静态字段或方法。它不能发生在静态类中。
*   关键字由`this`编译器推断。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-24T16:13:16.793

```
 class program
{
   public int x = 10;
    public void fun1()
    {

        Console.WriteLine("as you wish");
    }
}
class program2:program
{
    public void fun2()
    {
        Console.WriteLine("no");

        this.fun2(); //base class function call

        this.fun1(); // same class function call

    }
}
class program3:program2
{
   public int x = 20;
    public void fun3()
    {

        Console.WriteLine(this.x); //same class x variable call
        Console.WriteLine(base.x); // base class x variable call
       // this.fun3(); // same class function call
        Console.WriteLine("Program3 class call");
        base.fun1(); //base class function call
    }

    static void Main(string[] args)
    {
        program3 pr = new program3();
        pr.fun3();
    } 
```

this 关键字调用当前引用。如果要调用同一类的当前对象，则使用此关键字。我们如何需要 this 关键字？？？1.消除基类和当前类对象。

# jquery - 如何使用 JQuery 从字符串中删除特定元素及其子元素

> ID：15052888
> 
> 赞同：-2
> 
> 时间：2013-02-24T14:49:24.610
> 
> 标签：jquery

我有一个包含 HTML 元素的字符串，如下所示

```
var div_elements = "<div id=\"pst_body\"><span class=\"quote\">This is the Quoted 
Text</span>This is the Original Text Within the Div</div>"; 
```

我想删除 class="quote" 的范围及其所有子元素以及此范围内的文本。而且我想将结果作为字符串而不是对象返回。

其实我想要以下输出

```
var new_div_elements = "<div id=\"pst_body\">This is the Original Text Within the Div</div>"; 
```

我只想得到一个字符串，不包括类引用的跨度及其所有子项，文本蚀刻。如何使用 JQuery 执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:21:52.000

只需将其转换为 jQuery 对象并使用正常的 DOM 操作技术即可。

```
alert($("<div><span class='quote'>This is the Quoted Text</span><span class='original'>This is the Original Text</span></div>").find(".quote").remove().html()); 
```

[http://jsfiddle.net/ZyMjD/](http://jsfiddle.net/ZyMjD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:08:51.137

这样的事情怎么样？

```
var div_elements =  "<span class=\"quote\">This is the Quoted Text</span><span class=\"original\">This is the Original Text</span>";
var tempHTMLElement = document.createElement('div');
tempHTMLElement.innerHTML = div_elements;

var new_div_elements = $(".original", $(tempHTMLElement)).html(); 
```

# assembly - 与 0 (x86) 比较后的 JNB

> ID：15052894
> 
> 赞同：2
> 
> 时间：2013-02-24T14:50:05.813
> 
> 标签：assembly, x86

我有这个 x86 汇编代码：

```
mov     [ebp+var_8], 0

mov     eax, Str_len

cmp     [ebp+var_8], eax

jnb     short loc_4018C4 
```

如果 Str_len 总是不为 0，那么这个 JNB 执行什么？我的理由是，如果 Str_len 变量永远不会低于 0，则永远不会执行跳转，对吗？

顺便说一句，在 x86 的二进制表示中，寄存器的值如何低于零？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T15:11:22.393

`jnb`当进位标志为零时指令跳转。该指令根据从操作数中减去操作数`cmp`的结果更新标志。操作数是 Intel 表示法中的第一个操作数，因此，标志将根据. 当等于零时，进位标志将在零时清除，否则设置。总而言之，分支将在等于 0 时发生。`src``dst``dst``[ebp+var_8]-eax``[ebp+var_8]``eax``eax`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T15:11:15.167

`jnb`（实际上是 的别名`jnc`）使用“无符号谓词”之一，因此对于`jnb`，值永远不会低于零。

但是零是比较的第一个参数，所以它实际上是在计算 `0 - eax`（然后它只保留标志，而不是结果），然后如果没有进位，它就会跳转。所以归结为：如果`Str_len`为零则跳转。

# ruby-on-rails - 小马抛出 NoMethodError

> ID：15052897
> 
> 赞同：1
> 
> 时间：2013-02-24T14:50:32.923
> 
> 标签：ruby-on-rails, ruby, pony

我有这个规格：

```
describe EmailerHelper do
  describe "send email" do
    include EmailerHelper
    include Pony::TestHelpers
    before { sendUBEmail('nobody@nowhere.net','Test Subject','Test Body') }
    it "Pony has received the email" do
      current_email.address.should == "noobody@nowhere.net"
    end
  end
end 
```

这是当前的 sendUBEmail：

```
module EmailerHelper
  def sendUBEmail(receiver,subject,body)
    if Rails.env != 'production'
      #TODO - make test email an environment variable
      Pony.mail(:to => 'p***@p***.net', :subject => subject, :body => body)
    else
      Pony.mail(:to => receiver, :subject => subject, :html_body => body)
    end
  end
end 
```

当我运行此规范时，我收到此错误

```
 1) EmailerHelper send email Pony has received the email
     Failure/Error: before { sendUBEmail('nobody@nowhere.net','Test Subject','Test Body') }
     NoMethodError:
       undefined method `build_tmail' for Pony:Module
     # ./app/helpers/emailer_helper.rb:5:in `sendUBEmail'
     # ./spec/helpers/emailer_helper_spec.rb:17:in `block (3 levels) in <top (required)>' 
```

这个“build_tmail”在哪里？它不在 Pony 模块中，为什么找不到该方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:25:19.950

我有一个旧版本的 Pony-Test 搞砸了工作，修改了 Gemfile 以指向最新的，固定的。

# c# - 如何查看发送的实际原始请求

> ID：15052899
> 
> 赞同：5
> 
> 时间：2013-02-24T14:50:50.560
> 
> 标签：c#, rest, restsharp

为了查看原始响应，我使用了 OnBeforeDeserialization 事件，但我想查看原始请求，因为我遇到了错误并且我想确切地知道正在发送什么。
有没有办法在不使用 restsharp 源代码和调试的情况下做到这一点？
谢谢

编辑 1：
设法用提琴手捕捉流量：这是请求的 TextView：

```
assignee=test&milestone=0&state=open&title=test%20issue&body=test%20issue 
```

这是回应：

```
{"message":"Problems parsing JSON"} 
```

这就是我配置我的请求的方式：

var request = new RestRequest();

```
 request.Resource = "repos/" + repo_slug + "/issues";
    request.Method = Method.POST;
    request.OnBeforeDeserialization = resp => { cnt = resp.Content; };
    // Convert Issue:
    GitModels.IssuePost toPostIssue = Git2Bit.GitModels.Bit2GitTranslator.translate(bitIssue);

    request.AddParameter("assignee", toPostIssue.assignee, ParameterType.GetOrPost);
    request.AddParameter("milestone", toPostIssue.milestone, ParameterType.GetOrPost);

    request.AddParameter("state", toPostIssue.state, ParameterType.GetOrPost);

    request.AddParameter("body", toPostIssue.body, ParameterType.GetOrPost); 
```

获取问题而不是发布作品。：|

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:15:48.323

好吧，提琴手做了这个伎俩，不知道为什么它第一次不起作用。
至于在 github 上发布问题，我必须以 JSON 格式发送请求，如下所示：

```
request.RequestFormat = DataFormat.Json;
request.AddHeader("Accept", "application/json");
request.OnBeforeDeserialization = resp => { cnt = resp.Content; };

GitModels.IssuePost toPostIssue = Git2Bit.GitModels.Bit2GitTranslator.translate(bitIssue);

request.AddBody(toPostIssue); 
```

基本上我必须设置正确的请求格式并添加到请求的正文中，而不必添加参数

# browser-history - usatoday 如何在不重新加载页面的情况下更改 URL？

> ID：15052902
> 
> 赞同：1
> 
> 时间：2013-02-24T14:51:24.600
> 
> 标签：browser-history, history.js

转到任何 [usatoday][1] 页面并单击任何主菜单，URL 更改，但只有部分页面更新。没有整个页面重新加载。

如何使用 jQuery 或任何库做类似的事情？我知道有诸如历史 API 之类的库，但这仅适用于 HTML5 浏览器，但像 IE9 和更低版本的 HTML4 使用哈希更改 **但**美国今天适用于没有哈希的 IE 和 HTML 浏览器？有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T13:40:24.030

jQuery 插件[Ajaxify](https://github.com/browserstate/ajaxify/)可以用 history.js 做到这一点

有关历史 API 的更多信息[http://diveintohtml5.info/history.html](http://diveintohtml5.info/history.html)

# performance - 在大文件中四处寻找的最有效方法

> ID：15052905
> 
> 赞同：15
> 
> 时间：2013-02-24T14:51:43.770
> 
> 标签：performance, haskell, io

在 Haskell 中处理非常大的二进制文件的最有效方法是什么？

标准答案是将整个文件作为惰性 ByteString 读取，然后使用二进制数据包之类的东西在其上编写解析器。有几个问题...

首先，像 Binary 这样的库并不能真正处理解析失败，我明确地*期望*解析有时会失败。

其次，我没有解析整个文件内容。我将跳过其中的大部分内容。并且将千兆字节的数据从磁盘读取到 RAM 只是让垃圾收集器再次将其丢弃似乎相当低效。

与此相关的是，我需要能够判断我想要执行的跳过是否会使我脱离文件末尾（如果确实如此，则会出错）。

我可能还需要*向后*查找，或者可能需要查找文件中的特定字节偏移量，这似乎不受惰性 ByteString 方法的良好支持。（最终将整个文件保存在 RAM 中是非常危险的。）

当然，另一种方法是逐个读取单个字节，并与`hSeek`命令交错。但现在的问题是，一次读取一个字节的文件效率如何？听起来它*也*可能很慢。我不确定是否`hSetBuffering`对此有影响。（？）

然后当然有`mmap`。但如果用于大文件，这似乎会吓坏虚拟内存系统。（这很奇怪，考虑到这是它存在的全部目的......）

伙计们，我们怎么看？就 I/O 性能和代码可维护性而言，解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:09:12.527

我在使用 pdf 解析器时遇到了类似的问题。最初我使用`iteratee`包（它[支持随机访问](http://hackage.haskell.org/packages/archive/iteratee/0.8.9.4/doc/html/Data-Iteratee-Iteratee.html#v%3aseek)）。AFAIK 它是唯一支持随机 IO 的 IO 库。

我[目前的方法](https://github.com/Yuras/pdf-toolbox/blob/master/core/lib/Pdf/Toolbox/Core/IO/RIS.hs)是基于`io-streams`包。我发现它更方便。性能足够好，`attoparsec`集成开箱即用，包括很多组合器。

这是一个如何`iteratee`用于随机 IO 的基本示例：

```
shum@shum-laptop:/tmp/shum$ cat test.hs 

import qualified  Data.Iteratee as I
import qualified Data.Attoparsec.Iteratee as I
import qualified Data.Attoparsec.Char8 as P
import Control.Monad.IO.Class
import System.Environment

main :: IO ()
main = do
  [file] <- getArgs
  flip I.fileDriverRandom file $ do
    I.seek 20
    num1 <- I.parserToIteratee P.number
    liftIO $ print num1
    I.seek 10
    num2 <- I.parserToIteratee P.number
    liftIO $ print num2
shum@shum-laptop:/tmp/shum$ cat in.data 
111111111
222222222
333333333
shum@shum-laptop:/tmp/shum$ runhaskell test.hs in.data 
333333333
222222222
shum@shum-laptop:/tmp/shum$ 
```

# php - 世界上有人知道为什么这个 PHP 对象调用不起作用吗？

> ID：15052908
> 
> 赞同：1
> 
> 时间：2013-02-24T14:52:01.603
> 
> 标签：php, class

我对 PHP 编程很陌生。我正在尝试做一些不是很困难的事情，但是遵循非常基本的代码既不会返回错误，也不会显示任何输出。玩弄我猜它与 $this->... 行有关，我无法弄清楚为什么在对象内部调用函数不起作用。请帮忙 ！！！

```
class TargetBuy {

    public $ClientCode;
    public $Service;
    public $ServiceType; // Emissione, Cambio, Riemissione, Rimborso, NoShow... 
    public $RateType; // tipo tariffa
    public $Segment; // tratta
    public $CityHotel;
    public $TicketType; // one way or round trip
    public $AdvancePurchase;
    public $Penalty;
    public $Taxes; // 0=NotIncluded; 1=Included
    public $FinalPrice;

    function CalculateTB_Price() {  
        $this->ClientCode='Hello';
        echo $ClientCode;
    }

}

$TB = new TargetBuy;

$TB->CalculateTB_Price(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T14:55:05.330

因为在函数的最后一行，你打印的是 var`$ClientCode`而不是 var`$this->ClientCode`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T14:55:26.360

`$ClientCode`未定义，请启用适当的[错误报告](http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)，这会警告您。相反，您必须使用`echo $this->ClientCode;`.

您应该阅读有关面向对象编程的基础知识。

# css - Chrome Inspector：编辑实时 CSS 的更简单方法？

> ID：15052910
> 
> 赞同：1
> 
> 时间：2013-02-24T14:52:17.230
> 
> 标签：css, google-chrome, google-chrome-devtools

在 Chrome Inspector 中，有没有比以下方法更好的编辑实时 CSS 的方法：

1.  必须在“元素”和“源”选项卡之间来回切换
2.  将检查器样式表中的内容复制/粘贴到您的真实样式表中
3.  在文件和文件夹窗口中找到您的真实样式表，右键单击然后选择“保存”？

后者[也并不总是有效](https://stackoverflow.com/questions/15052857/chrome-inspector-live-css-editing-wont-save)。

如果 Chrome 开发人员看到这一点 - 也许我们可以在方便的地方设置一个大的“保存”按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T11:24:35.083

新版本的 Chrome 具有一项称为工作区的功能，可以解决此问题。您可以定义网络服务器上的哪些路径对应于系统上的哪些路径，然后只需使用 ctrl-s 进行编辑和保存。

见：[http ://www.html5rocks.com/en/tutorials/developertools/revolutions2013/](http://www.html5rocks.com/en/tutorials/developertools/revolutions2013/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T15:15:38.050

您无法使用 Chrome Inspector 编辑任何文件。您所做的是编辑 Chrome 在访问请求页面时下载的临时文件。如果任何人都可以通过检查 html/css 代码来处理服务器的文件，那将是相当大的安全风险！就个人而言，我使用 Chrome Inspector 是因为它可以很容易地实时编辑 CSS，然后再将其复制到我的真实 css 文件并上传。

# jquery - url根据访问者ip重定向

> ID：15052915
> 
> 赞同：0
> 
> 时间：2013-02-24T14:52:32.663
> 
> 标签：jquery

我希望根据访问者的 ip 重定向 url，我有以下代码，经过测试，但它总是去 AU，如果条件不起作用，请帮助，非常感谢...

```
<script language="JavaScript" src="http://www.geoplugin.net/javascript.gp" type="text/javascript"></script>
<script language="Javascript"> 
    var mylocation=geoplugin_countryCode();
    if (mylocation=="AU") {
    window.location.href='http://www.propertyhere.com/Country/AU/search-to-buy'},
    else if (mylocation=="CA") {
    window.location.href='http://www.propertyhere.com/Country/CA/search-to-buy'},
    else if (mylocation=="CN") {
    window.location.href='http://www.propertyhere.com/Country/CN/search-to-buy'},
    else if (mylocation=="NZ") {
    window.location.href='http://www.propertyhere.com/Country/NZ/search-to-buy'},
    else if (mylocation=="RU") {
    window.location.href='http://www.propertyhere.com/Country/RU/search-to-buy'},
    else if (mylocation=="US") {
    window.location.href='http://www.propertyhere.com/Country/US/search-to-buy'},
    else if {
    window.location.href='http://www.propertyhere.com/network'},
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:57:15.760

检查您的 if 语句 - 看起来您需要将逗号从 else-if 中取出并替换为分号：

```
if (mylocation=="AU") {
window.location.href='http://www.propertyhere.com/Country/AU/search-to-buy';
} else if (mylocation=="CA") { ... 
```

# php - 根据选中的复选框删除表条目

> ID：15052917
> 
> 赞同：0
> 
> 时间：2013-02-24T14:52:50.297
> 
> 标签：php, database

我有一个项目列表，每一行都有一个复选框。每个复选框都有一个唯一的名称，例如“65”或“77”，对应于数据库中的 item_ID。我希望能够

```
DELETE FROM $table WHERE "name of checkbox"=item_ID AND "checkbox is checked" 
```

基本上删除与该表行中勾选的复选框相对应的任何数据条目。复选框是这样构造的，并出现在每一行的末尾：

```
$field=mysql_fetch_assoc($result);
$ID=$field['item_ID'];

<input name='".$ID."' type='checkbox' value='yes'> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:58:43.720

将它们的名称设置为 $ID[]，并在服务器端对 $_REQUEST[$ID] 执行 foreach 循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T14:59:40.423

因为在表单中只有复选框通过 POST 发布，您需要通过一个小技巧来解决这个问题。对于每个条目，在您的 html 代码中添加一个隐藏字段，例如

```
<input type='hidden' name='ids[]' value='".$ID."'>
<input name='checkbox_".$ID."' type='checkbox' value='yes'> 
```

将这些内容发布到您的服务器后，您应该拥有包含已显示给您的用户的所有行的数组 $_POST['ids'] 。所以迭代它并检查是否存在相应的复选框索引：

```
foreach($_POST['ids'] as $checkId) {
    if(array_key_exists('checkbox_'.$id, $_POST) {
         // delete the entry
         $sql = 'delete from your_table where id = "'.$id.';"';
         // execute sql
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T15:07:41.293

另一个技巧：

```
<form>
<input type="checkbox" name="checkbox_$iID">
...
</form>

foreach ($_POST as $post) {
$temp=explode('_',$post);
if ($temp[0]=="checkbox") {delete $temp[1]....}
} 
```

# c++ - 在同一连接或拆分连接上流式传输视频和命令？

> ID：15052919
> 
> 赞同：1
> 
> 时间：2013-02-24T14:52:55.597
> 
> 标签：c++, tcp, remote-access, libx264

**背景**

我正在编写一个客户端/服务器应用程序，我将安装在我办公室的每台机器上（大约 30 - 35 台机器）。我目前有客户端连接到服务器，它能够发送鼠标移动、鼠标点击、击键和执行某些命令。下一步是流回屏幕的视频输出，我使用[最快的屏幕捕获方法中](https://stackoverflow.com/questions/5069104/fastest-method-of-screen-capturing)的 GDI 方法来捕获整个屏幕，并将使用 x264 编码器压缩帧并将它们传输回客户端然后将解码并显示流。

**问题**

最好（通过减少延迟，确保所有命令尽可能快地交付并且流尽可能实时）我沿着我为命令建立的相同连接传输回来，或者，我应该建立一个单独的连接吗？在同一个端口上连接，还是在不同的端口上流回视频？

**附言**

我知道 VNC、RD 和其他东西（例如 TeamViewer）已经存在并且已经在做这类事情，但是这些都不支持我们在这个系统中需要的所有要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T14:47:26.690

对 a/v 和命令使用拆分连接，其他人这样做是为了减少发送/接收命令时的延迟，以确保及时处理所有命令。

# javascript - KineticJS Uncaught TypeError：更新后无法读取未定义的属性“x”

> ID：15052920
> 
> 赞同：2
> 
> 时间：2013-02-24T14:53:07.357
> 
> 标签：javascript, html5-canvas, kineticjs

我正在使用本教程来构建可拖动的多边形。[教程](http://tech.joshuacummings.com/2012/07/scalable-draggable-anchored-triangle-in.html)

现在我想在其中添加 Text 并尝试从 kinetic-v3.10.0.js 更新到较新的。但更新后我总是收到提到的错误消息。

有人可以看看我的代码并帮助我找出我需要改变的地方，它可能会再次起作用吗？

以下是我的部分代码：

建立锚

```
function buildAnchor(layer, x, y, name) {
var anchor = new Kinetic.Circle({
    x: x,
    y: y,
    radius: 12,
    stroke: 'red',
    fill: '#ddd',
    strokeWidth: 4,
    draggable: true,
    name : name
});

// add hover styling
anchor.on('mouseover', function() {
    document.body.style.cursor = 'pointer';
    this.setStrokeWidth(6);
    layer.draw();
});
anchor.on('mouseout', function() {
    document.body.style.cursor = 'default';
    this.setStrokeWidth(4);
    layer.draw();
});

layer.add(anchor);
return anchor;} 
```

构建线：

```
function buildLine(layer, x1, y1, x2, y2, name) {
var line = new Kinetic.Line({
    points: [x1, y1, x2, y2],
    stroke : '#000',
    strokeWidth : 2,
    name : name
});

var xDiff = x1 - x2;
var yDiff = y1 - y2;

var text = new Kinetic.Text({
    x: 0,
    y: 0,
    text: 'Test',
    fontSize: 20,
    fontFamily: 'Calibri',
    fill: 'green'
});

if (xDiff < 0 && yDiff == 0) {
    line.move(0,-30); //Point a -> b
}
else if (xDiff == 0 && yDiff < 0) {
    line.move(30,0); //Point b -> c
}
else if (xDiff > 0 && yDiff == 0) {
    line.move(0,30); //Point c -> d
}
else if (xDiff == 0 && yDiff > 0) {
    line.move(-30,0); //Point d -> a
}
else if (xDiff < 0 && yDiff < 0) {
    line.move(0,-30);       
}
else if (xDiff < 0 && yDiff > 0) {
    line.move(0,-30);
}
else if (xDiff > 0 && yDiff > 0) {
    line.move(-5,30);
}

layer.add(text);
layer.add(line);
return line;
return text;} 
```

构建三角形：

```
function buildTriangle(layer, points, name) {
var triangle = new Kinetic.Polygon({
    stroke : '#666',
    strokeWidth : 8,
    name : name
});

triangle.scaleAnchor = function(anchor, factor) {
    anchor.attrs.x = ( anchor.attrs.x - this.center.x ) * factor + this.center.x;
    anchor.attrs.y = ( anchor.attrs.y - this.center.y ) * factor + this.center.y;
};
triangle.calculateCenter = function() {
    this.center.x = ( this.a.attrs.x + this.b.attrs.x + this.c.attrs.x ) / 3;
    this.center.y = ( this.a.attrs.y + this.b.attrs.y + this.c.attrs.y ) / 3;
};

triangle.a = buildAnchor(layer, points[0], points[1], 'anchor');
triangle.b = buildAnchor(layer, points[2], points[3], 'anchor');
triangle.c = buildAnchor(layer, points[4], points[5], 'anchor');
line1 = buildLine(layer, points[0], points[1], points[2], points[3], 'line');
line2 = buildLine(layer, points[2], points[3], points[4], points[5], 'line');
line3 = buildLine(layer, points[4], points[5], points[0], points[1], 'line');
triangle.was = { x : 0, y : 0 };
triangle.center = { x : 0, y : 0 };

layer.add(triangle);
return triangle;} 
```

画三角形：

```
function drawtriangle() {
var triangle = this.get('.triangle')[0];

triangle.setPoints([    triangle.a.attrs.x - triangle.was.x, 
                        triangle.a.attrs.y - triangle.was.y,
                        triangle.b.attrs.x - triangle.was.x,
                        triangle.b.attrs.y - triangle.was.y,
                        triangle.c.attrs.x - triangle.was.x,
                        triangle.c.attrs.y - triangle.was.y ]);
line1.setPoints([triangle.a.attrs.x - triangle.was.x, triangle.a.attrs.y - triangle.was.y, triangle.b.attrs.x - triangle.was.x, triangle.b.attrs.y - triangle.was.y]);
line2.setPoints([triangle.b.attrs.x - triangle.was.x, triangle.b.attrs.y - triangle.was.y, triangle.c.attrs.x - triangle.was.x, triangle.c.attrs.y - triangle.was.y]);
line3.setPoints([triangle.c.attrs.x - triangle.was.x, triangle.c.attrs.y - triangle.was.y, triangle.a.attrs.x - triangle.was.x, triangle.a.attrs.y - triangle.was.y]);

triangle.calculateCenter.apply(triangle);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:13:15.330

没有阅读和测试您的所有代码，但我发现的一个错误是。

```
function buildLine(layer, x1, y1, x2, y2, name) {
  .... 
  ....
  return line;
  return text;
} 
```

一个函数中只能返回一个。您的 buildLine 函数永远不会发短信，而只会发短信。并且所有与文本相关的操作都将失败。

# download - 如何使用 JSCH 从服务器下载目录？

> ID：15052925
> 
> 赞同：-1
> 
> 时间：2013-02-24T14:54:07.057
> 
> 标签：download, directory, jsch

我已经从列表文件中使用 JSCH，上传/下载文件，创建目录等。但是当我想从服务器下载目录并将其保存到目标目录时我遇到了一些问题。我使用 JFileChooser 来保存它。

流程如何？因为如果我使用文件下载之类的过程，它会给出 IOException 和 null 值：

```
Feb 24, 2013 9:22:05 PM com.ikbiz.filemanager.controller.ServerDataController download
SEVERE: null
java.io.IOException: error
    at com.jcraft.jsch.ChannelSftp$2.read(ChannelSftp.java:1361)
...
... 
```

请帮助我:) 感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-26T01:05:02.400

看看 [https://github.com/xiaoerge/File-UI/blob/master/src/fileui/GUI.java#L364](https://github.com/xiaoerge/File-UI/blob/master/src/fileui/GUI.java#L364)

私人无效获取（）...

逻辑是，
-1 如果条目是文件，则下载它。

-2 如果它是一个目录， `mkdir`本地系统上的对应目录， `cd`本地和远程进入该目录，现在`ls`是当前远程目录，（不需要`ls`本地，因为它是空的）

`ls`-3 对从远程端获得的每个条目重复步骤 1 和 2 。

-4 最终，您将`mkdir`在本地拥有（ed）所有匹配的目录并下载所有非目录。

-5 请记住`cd`在每个子目录中完成后备份到父目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T12:19:15.987

您可以使用该[`Vector ls(String path)`](http://epaul.github.com/jsch-documentation/javadoc/com/jcraft/jsch/ChannelSftp.html#ls%28java.lang.String%29)方法列出远程目录中的文件。然后，您创建一个同名的本地目录，[`mkdirs()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#mkdirs%28%29)并遍历所有远程文件以下载它们。

我会那样做。

# c - SMC 调用的 Svc 处理程序

> ID：15052926
> 
> 赞同：5
> 
> 时间：2013-02-24T14:54:07.637
> 
> 标签：c, arm, handler, trust-zone

如何在 C 中编写一个 svc 处理程序来调用 SMC（监控模式）指令以切换到 arm cortex a9 的监控模式？即从主管模式到监控模式，所有需要在 svc 处理程序中完成，如何在 C 中编写相同的内容。感谢详细答案...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T15:02:24.843

示例可以在**OMAP2**平台的 Linux 源代码树中找到。

*   [omap-smc.S](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/arch/arm/mach-omap2/omap-smc.S)
*   [omap-secure.h](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/arch/arm/mach-omap2/omap-secure.h)
*   [omap-secure.c](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/arch/arm/mach-omap2/omap-secure.c)

另请参阅：[LWN 的 KS2012：ARM：安全监视器 API](http://lwn.net/Articles/513756/)内核峰会 2012 年关于 ARM SMC 模式的说明。

基本上，人们所梦想的接口`SWI`或`SVC`接口都可以被`SMC`接口使用。否则，这个问题无法具体回答。

* * *

[SMC 调用约定](http://infocenter.arm.com/help/topic/com.arm.doc.den0028b/ARM_DEN0028B_SMC_Calling_Convention.pdf)是 ARM 的一项建议，允许安全的世界软件供应商制作兼容/可互操作的东西。**注意：**没有人必须遵循此建议。

这是在提出原始问题后发布的。某些软件确实遵循此建议，例如[ARM Trusted Firmware](https://github.com/ARM-software/arm-trusted-firmware)。

# android - 在 Titanium Android 模块中实现的 Aspect J

> ID：15052929
> 
> 赞同：1
> 
> 时间：2013-02-24T14:54:30.660
> 
> 标签：android, aspectj, titanium-mobile, appcelerator-mobile, titanium-modules

我试图通过在 Titanium Studio 中创建钛 android 模块项目来包含 Aspect J 运行时库，并且它成功了。对于 Titanium 移动项目（android），通过在模块项目中添加这些切入点，在 .aj 文件中使用方面 j 切入点是否有运气？因为据我所知，方面 j（运行时方面而不是编译时）在这种情况下不起作用。有什么答案吗？ - 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:46:08.347

运行时 aspectj 无法工作的原因有很多——其中最重要的是 Android 使用与 JVM 完全不同的虚拟机来运行——并且它使用完全不同的字节码格式。

compile-time-weaving 可以用于 AspectJ 的原因是因为 android 有一个构建步骤，它可以将 java 字节码转换为 dex 字节码。

# image - 如何使图像覆盖父宽度并拉伸到浏览器宽度？

> ID：15052932
> 
> 赞同：2
> 
> 时间：2013-02-24T14:54:46.293
> 
> 标签：image, html, css

我想插入一个特定的图像，该图像将覆盖它所包含的父宽度并拉伸到浏览器的宽度。图像也应该是响应式的。我不知道该怎么做。这甚至可能吗？预先感谢您的帮助！

html代码：

`<div id="wrapper"> <img id="pic" src="http://static.stuff.co.nz/1357440924/872/8147872.jpg" /> <p>This is a test</p> </div>`

CSS代码：

`#wrapper { width: 300px; margin: 0 auto; } #pic { width: 100%; }`

Jsfiddle 链接在这里：http: [//jsfiddle.net/9Ttyh/](http://jsfiddle.net/9Ttyh/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:15:28.770

`img`如果不从包含的父级中删除，您将无法可靠地实现您想要的。

您的 HTML 将如下所示：

```
<img id="pic" src="http://static.stuff.co.nz/1357440924/872/8147872.jpg" />
<div id="wrapper">
   <p>This is a test</p>
</div> 
```

[http://jsfiddle.net/cGLeY/](http://jsfiddle.net/cGLeY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:59:45.033

你可以做它设置：`min-width: 100%`图像，我希望我得到你的权利。jsFiddle：http: [//jsfiddle.net/Usuz4/](http://jsfiddle.net/Usuz4/)

```
#wrapper {
    width: 300px;
    margin: 0 auto;
}
img {
    min-width: 100%;
} 
```

如果您放置`min-width`您强制元素至少获得提供的大小，并且如果您放置`100%`它必须采用`100%`父宽度。

# java - 手动将图像像素从彩色 ARGB 转换为灰度 ARGB

> ID：15052933
> 
> 赞同：0
> 
> 时间：2013-02-24T14:54:48.947
> 
> 标签：java, algorithm, grayscale, argb

因此，我有一个项目可以通过使用算法更改 argb 值来手动将图像转换为黑白。我试过平均 RGB 值，我得到了一个几乎完全灰度的图像，但它仍然有颜色的暗示。有人有任何算法示例可以手动将 aRGB 中的像素转换为灰度吗？

这是我到目前为止一直在做的事情：

```
 //Apply the filter
            reds = ((reds+greens+blues)/3);
            greens = ((reds+greens+blues)/3);
            blues = ((reds+greens+blues)/3); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T15:00:26.333

看起来您正在更改右侧的输入，同时期望其值保持不变。为什么不使用这个？

```
reds = (reds + greens + blues) / 3;
greens = reds;
blues = reds; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T20:20:45.377

我一直认为，由于我们的眼睛对红色、绿色和蓝色波长的敏感度不同，因此应该使用以下方法计算灰度：

```
(int) (0.299 * red + 0.587 * green + 0.114 * blue) 
```

几年前，这曾经是很容易找到的信息，但现在我找不到太多的来源。 [维基百科关于灰度的条目](http://en.wikipedia.org/wiki/Grayscale)就是其中之一。

# java - Android上的捏合界面

> ID：15052934
> 
> 赞同：1
> 
> 时间：2013-02-24T14:54:57.167
> 
> 标签：java, android

我想问那些比我有更多经验的开发人员。我只是一名初级程序员，曾使用过 Java、C 和 VB.net。有人问我是否可以创建类似于 iOS Pinch 界面的东西，但适用于 Android。我很确定这是可能的，但没有起点可以使用。一些帮助将不胜感激。

[http://www.diginfo.tv/v/12-0202-r-en.php](http://www.diginfo.tv/v/12-0202-r-en.php)

我看到的可能方法是使用高端设备，例如多核平板电脑托管原始视频或渲染，然后通过 Wifi 将部分流式传输到其他设备，或者从 PC 执行此操作。

# javascript - 如何汇总jquery星级？

> ID：15052941
> 
> 赞同：-1
> 
> 时间：2013-02-24T14:55:29.887
> 
> 标签：javascript, jquery, rating-system

我刚刚安装了这个插件并将其添加到我的一个页面中：

[http://www.fyneworks.com/jquery/star-rating/#tab-API](http://www.fyneworks.com/jquery/star-rating/#tab-API)

表单控件完美运行，我的单选按钮现在是星星。但是，我不知道如何让它与表单一起提交。每个单选按钮都具有相同的名称，以便将它们分组到同一组星中。

如果可能的话，我想避免在这里使用 ajax。我还有其他数据我也希望表单提交，所以我想只使用普通的 HTML 表单提交并处理来自 POST 的数据。

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:41:09.577

好吧，我这样做了，它奏效了：

```
<form action="/testurl" method="get" accept-charset="utf-8">    
  <input type="radio" name="rating" value="1">
  <input type="radio" name="rating" value="2">
  <input type="radio" name="rating" value="3">
  <input type="radio" name="rating" value="4">
  <input type="radio" name="rating" value="5">

  <p><input type="submit" id="submit" value="Continue &rarr;"></p>
</form>

<script type="text/javascript" charset="utf-8">
  $(document).ready(function(){
    $(":radio").rating();
    $('form').on('submit', function(e) {
      e.preventDefault();
      $(this).ajaxSubmit();
    });
  });
</script> 
```

当我提交表单时，正确传递了 rating 的值：/testurl?rating=2

# asynchronous - 访问者将如何体验异步处理程序

> ID：15052942
> 
> 赞同：1
> 
> 时间：2013-02-24T14:55:33.303
> 
> 标签：asynchronous, httphandler

我一直在学习异步 Http 处理程序的实现。

我想确认我的理解。

从访问者的角度来看，他们无法判断页面是由同步处理程序还是异步处理程序处理的。他们仍然必须等到 IsCompleted 返回 true，即等待所有进程完成，才能开始查看页面。

同步和异步 http 处理程序之间的唯一区别在于服务器端。异步处理程序将释放处理其他页面的主线程。我对么？

假设我有一个过程是编写访问者日志，使用 SQL 记录他们的信息，例如 IP 和系统信息。我希望在用户获得页面后执行此过程。是否可以使用同步处理程序来实现这一点？或者甚至不可能使用异步处理程序来实现？如果有人能提供一些关于服务器状态和访问者状态的图形参考，我将不胜感激，以便我将图片放在一起。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T08:33:16.547

是的，你是对的。特别是对最终用户没有区别。但请记住，可伸缩性提高了很多，想想当您的网站同时点击 1000 次以上时，IIS 可用于请求处理的线程数量有限。

[http://msdn.microsoft.com/en-us/library/ms227433(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms227433(v=vs.100).aspx) [http://msdn.microsoft.com/en-us/library/ms227433(v=vs.100) .aspx](http://msdn.microsoft.com/en-us/library/ms227433(v=vs.100).aspx)

# java - 在 Java servlet 中实现基于会话的安全性

> ID：15052944
> 
> 赞同：0
> 
> 时间：2013-02-24T14:55:40.243
> 
> 标签：java, jsp, session, servlets

我正在使用 Tomcat、Servlets 和 JSP 开发一个本地项目。这个项目将是一个简单的单登录博客，有一个后台管理员可以登录并创建帖子和页面。我陷入了一种情况，我需要对将出现在管理部分的每个 servlet 强制执行会话检查。管理员登录成功后，我创建了一个会话标志，作为安全措施，将在每个管理页面上进行检查。

现在，由于在这种情况下将用于 servlet 的仅有两种方法是 doGet 或 doPost，我是否应该创建一个方法来检查每个 servlet 中的管理会话，然后在每个 doGet/doPost 之前调用该方法，或者有没有更好的实现可能？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:01:43.433

使用`Filters`可以解决您的问题。在您的`web.xml`添加过滤器中并根据需要实现它。

```
<filter>
    <filter-name>Sample Filter</filter-name>
    <filter-class>
        com.example.SampleFilter
    </filter-class>

</filter>
<filter-mapping>
    <filter-name>Sample Filter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T15:05:54.820

如果您想避免重新发明轮子，我建议您使用[Spring Security 。](http://www.springsource.org/spring-security)它有一点学习曲线，但基本用例可以通过非常[简单的配置](http://static.springsource.org/spring-security/site/docs/current/reference/ns-config.html)来覆盖。有[高质量的文档](http://static.springsource.org/spring-security/site/docs/current/reference/springsecurity.html)和大量可用的教程/文章。

# java - 使用 java 程序连接到 java DB

> ID：15052950
> 
> 赞同：1
> 
> 时间：2013-02-24T14:56:18.560
> 
> 标签：java, netbeans

我正在实施一个简单的教程

使用 NetBeans 7 IDE 将 java 程序连接到 java DB。这是教程的链接。

```
http://www.homeandlearn.co.uk/java/connect_to_a_database_using_java_code.html 
```

但是当我运行该项目时，NetBeans 给了我以下错误：

```
run:
java.lang.VerifyError: Constructor must call super() or this() before return in method   database_console.DBConnect.<init>()V at offset 0
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2442)
    at java.lang.Class.getMethod0(Class.java:2685)
    at java.lang.Class.getMethod(Class.java:1620)
    at sun.launcher.LauncherHelper.getMainMethod(LauncherHelper.java:492)
    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:484)
Exception in thread "main" Java Result: 1
BUILD SUCCESSFUL (total time: 12 seconds) 
```

下面是项目的代码

```
 package database_console;

    import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.SQLException;

  public static void main(String[] args) {           
            try {
          String host = "jdbc:derby://localhost:1527/Employees";
          String uName="faisal";
          String uPass="password";
          Connection con=DriverManager.getConnection(host, uName, uPass);        
            }
           catch ( SQLException err ) {
    System.out.println( err.getMessage( ) );
    }
        }
    } 
```

解决此问题的任何可用建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T14:59:28.520

如果您使用的是上面的代码，那么您需要将整个代码放在类中。

```
//Package declarations (if any)
//Import packages
public class className {

    public static void main(String[] args) {
        //Other code
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T15:09:31.043

请将类添加到您的 main() 中。喜欢以下

```
package database_console;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class DBConnect 
{

    public static void main(String[] args) 
    {
        try 
        {
            String host = "jdbc:derby://localhost:1527/Employees";
            String uName = "faisal";
            String uPass = "password";
            Connection con = DriverManager.getConnection(host, uName, uPass);
        } 
        catch (SQLException err) 
        {
            System.out.println(err.getMessage());
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T15:07:58.533

您没有按照正确链接的[教程进行操作。](http://www.homeandlearn.co.uk/java/connect_to_a_database_using_java_code.html)

您的代码应如下所示：

```
package database_console;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class DBConnect {  // <--- This is missing from your code

    public static void main(String[] args) {
        try {
            String host = "jdbc:derby://localhost:1527/Employees";
            String uName = "faisal";
            String uPass = "password";
            Connection con = DriverManager.getConnection(host, uName, uPass);
        } catch (SQLException err) {
            System.out.println(err.getMessage());
        }
    }  // <--- This is also missing from your code
} 
```

它应该在一个名为`DBConnect.java`的包中的文件中`database_console`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T15:13:21.430

此类用于创建数据库连接

```
import java.sql.Connection;
import java.sql.*;

public class GetDBConnection 
{
    public static Connection getConnection(String[] args) 
    {
        String host = "jdbc:derby://localhost:1527/Employees";
        String uName="faisal";
        String uPass="password";
        Connection con=null;
        try 
        {
              con=DriverManager.getConnection(host, uName, uPass);        
        }
        catch ( SQLException err ) 
        {
        System.out.println( err.getMessage( ) );
        }
        return con;
    }

} 
```

此类用于获取连接并使用它

```
public class UseDBConnection 
{
    public static void main(String[] args) 
    {
        GetDBConnection object = new GetDBConnection();
        System.out.println("now you can use this DB like you want it and can create as many connection as you want");
    }
} 
```

# iphone - UIWebView 未加载

> ID：15052951
> 
> 赞同：1
> 
> 时间：2013-02-24T14:56:38.280
> 
> 标签：iphone, ios, objective-c, xcode

我有一个带有四个视图控制器（四个选项卡）的应用程序，我正在尝试第四个使用 UIWebView 加载 url .. 请检查下面的代码

这个FourthViewController.h

```
 #import <UIKit/UIKit.h>

@interface FourthViewController : UIViewController {

    IBOutlet UIWebView *webView;
}

@property(nonatomic,retain)IBOutlet UIWebView *webView;
@end 
```

第四视图控制器.m

```
#import "FourthViewController.h"

@interface FourthViewController ()

@end

@implementation FourthViewController
@synthesize webView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    //self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.navigationItem.title = @"Instagram";
        self.view.backgroundColor = [UIColor colorWithWhite:0.9 alpha:1.0];

    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    UIBarButtonItem *refreshButton = [[[UIBarButtonItem alloc]
                                       initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh
                                       target:self action:@selector(refreshClicked:)] init];
    self.navigationItem.rightBarButtonItem = refreshButton;

    NSURL *url = [NSURL URLWithString:@"http://www.google.com"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [webView loadRequest:request];
}

-(IBAction)refreshClicked:(id)sender {
    NSLog(@"Clicked");

}

- (NSString *)tabImageName
{
    return @"instagram";
}

@end 
```

但是当我运行 iPhone 模拟器并进入第四个选项卡时，它不会加载网络，这是什么问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:19:59.630

如果你不使用 xib，那么你需要 alloc-init 并将其添加到视图层次结构中。

因此，在您的`viewDidLoad`方法中，例如：

```
UIWebView *webView = [[UIWebView alloc] initWithFrame:self.view.bounds];
[webView loadRequest:request];
[self.view addSubview:webView];
[webView release]; // if you don't use ARC 
```

然后，如果你不使用 xib，你就不需要使用`IBOutlet`. 这只是允许使用 Interface Builder（即连接插座）的占位符。

**编辑**

您应该更改我提供的代码，如下所示（例如）。我的只是一个例子。该警告只是说明局部变量隐藏了您在 .h 中创建的变量的声明。

```
UIWebView *web = [[UIWebView alloc] initWithFrame:self.view.bounds];
self.webView = web;
[self.webView loadRequest:request];
[self.view addSubview:self.webView];
[web release]; // if you don't use ARC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:56:59.680

```
NSURL *url = [NSURL URLWithString:@"http://www.google.com"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
self.webView = [[UIWebView alloc] initWithFrame:self.view.bounds];
[self.webView loadRequest:request];
[self.webView addSubview:self.webview]; 
```

用于条形按钮目标方法中的刷新`refreshClicked:`

```
- (IBAction)refreshClicked:(id)sender {
    [self.webView loadRequest:request];    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T15:03:50.617

可能是因为你没有调用你的超级初始化。你为什么注释掉这一行：

```
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]; 
```

编辑 - 你也应该使用“自我”。在该 webView var 前面通过您设置的属性来引用它。不是你的错误，只是好的做法。

```
[self.webView loadRequest:request]; 
```

另一个响应者是正确的——如果你没有将你的 webview IBOutlet 连接到这个类；那么 webView 的东西就不起作用了，所以一定要检查一下。

编辑2：如果您不使用界面生成器，那么您需要创建对象并将它们添加到您的视图中。

```
self.webview = [[UIWebView alloc] initWithFrame:self.view.bounds];
[self.view addSubview:self.webview] 
```

此屏幕上的任何其他视图/控件同上。注意： IBOUTLET 只是一个 #define ，它什么都没有。它在那里，以便界面构建器知道您可能希望将哪些属性用作出口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T15:04:18.757

您是否将代码中的 IBOutlet 连接到您的 Interface .xib 文档？

不明白的可以看看[这个教程。](http://www.icodeblog.com/2008/07/30/iphone-programming-tutorial-connecting-code-to-an-interface-builder-view/)

# ios - 同一应用程序中的 Google Maps SDK 和 Mapkit 导致崩溃

> ID：15052952
> 
> 赞同：3
> 
> 时间：2013-02-24T14:56:38.840
> 
> 标签：ios, mapkit, google-maps-sdk-ios

试图让用户在我的应用程序中选择谷歌地图（sdk）和苹果地图（mapkit）。该应用程序未使用 ARC。崩溃场景（ios 6.0 / 6.1）： 1\. 进入谷歌地图（模态控制器）。2.退出谷歌地图（关闭模式）。3.在我的应用程序中更改为苹果地图（mapkit）。4.进入苹果地图（模态控制器）。

应用程序崩溃，我得到：[EAGLContext setCurrentContext:]

如果我不在 dealloc 中发布谷歌地图，则不会发生该错误，但它可能会导致内存泄漏。我在 viewDidLoad 中保留地图并在 dealloc 中释放地图。

谁能帮忙？谢谢，托默

## 更详细的堆栈跟踪：

```
1   0x0a041324 in -[VGLGPU init] ()
2   0x0a041032 in __24+[VGLGPU sharedInstance]_block_invoke_0 ()
3   0x03b52014 in _dispatch_client_callout ()
4   0x03b4409f in dispatch_once_f ()
5   0x03b44061 in dispatch_once ()
6   0x0a040fef in +[VGLGPU sharedInstance] ()
7   0x09fab26b in -[VKMainLoop updateLinkState] ()
8   0x09fabb02 in -[VKMainLoop removeCanvas:] ()
9   0x09f9f2aa in -[VKScreenCanvas _updateDisplayStatus:] ()
10  0x09f9f3fb in -[VKScreenCanvas setNeedsDisplay] ()
11  0x027bc03d in -[UIView initWithFrame:] ()
12  0x09f75658 in -[VGLScreenCanvas initWithFrame:context:] ()
15  0x09f907e7 in -[VKMapCanvas initWithFrame:shouldRasterize:] ()
16  0x09f8982e in -[VKMapView initWithFrame:andGlobe:shouldRasterize:] ()
17  0x0267d1a1 in -[MKMapView _commonInitAndEnableLoading:fromIB:] ()
18  0x0267da9c in -[MKMapView initWithCoder:] ()
19  0x02aa8a02 in UINibDecoderDecodeObjectForValue ()
47  0x028671a7 in -[UIViewController presentModalViewController:animated:] () 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T16:16:49.233

适用于 iOS 的 Google Maps SDK 和使用 Apple Maps 的 MapKit 都使用 OpenGL。

Google Maps SDK for iOS 存在一些问题，如果意外的 OpenGL 上下文处于活动状态，可能会导致其崩溃：

[http://code.google.com/p/gmaps-api-issues/issues/detail?id=4752](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4752)

似乎 MapKit 在 OpenGL 上下文方面也存在一些问题：

[显示地图时，iOS 6 应用程序在 EAGLContext 中崩溃](https://stackoverflow.com/questions/12670528/ios-6-app-crashes-in-eaglcontext-when-displaying-maps)

您可能需要进行一些反复试验，看看是否可以找到解决问题的方法。尝试在对地图执行操作之前和/或之后清除当前上下文（例如在发布 Google 地图时）：

```
[EAGLContext setCurrentContext:nil] 
```

您也可以尝试在执行操作之前保存之前的上下文，然后再恢复它，例如：

```
EAGLContext* previousContext = [EAGLContext currentContext];

// Perform map operation here.

[EAGLContext setCurrentContext: previousContext]; 
```

当我调查适用于 iOS 的 Google Maps SDK 的问题时，我基本上尝试了这些组合的各种组合，直到找到可行的方法。祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T23:26:49.217

我在尝试在 Apple 和 Google 地图之间切换时遇到了同样的问题。经过大量的实验，我也追踪到了发布谷歌地图和在 MapKit 中崩溃的交互。围绕其他调用或在按照建议发布 Google 地图后不使用 [EAGLContext setCurrentContext:nil] 调用会有所帮助。但是，在我的例子中，它总是用注释和覆盖重新绘制完整的 Apple 地图，然后在同一个 [EAGLContext setCurrentContext:] 调用中崩溃。

基于这些知识，我能够通过在 MapKit 协议方法 mapViewDidFinishLoadingMap 中添加 [EAGLContext setCurrentContext:nil] 调用来解决我的问题（或者看起来如此）。

```
- (void)mapViewDidFinishLoadingMap:(MKMapView *)mapView
{
    [EAGLContext setCurrentContext:nil];
} 
```

我现在可以愉快地来回切换。

哦，我没有在这个项目上使用 ARC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T23:59:17.160

这可能与不使用 ARC 有关。在入门部分，他们总是提到确保使用 ARC 已打开。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-06T21:39:19.267

这似乎已在 Google Maps iOS API 1.3.0 中得到修复，因此无需将 EAGLContext 设置为 nil。

# mysql - 如何为每一天选择一个日期范围

> ID：15052957
> 
> 赞同：3
> 
> 时间：2013-02-24T14:57:02.663
> 
> 标签：mysql, sql

我当然可以在服务器端语言中做到这一点，但我想知道是否可以在 SQL 中做到这一点。

我有一张像这样的桌子：

```
CREATE TABLE `dates` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `date_from` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `date_to` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  PRIMARY KEY (`id`)
); 
```

有一些数据，比如

```
+----+---------------------+---------------------+
| id |      date_from      |       date_to       |
+----+---------------------+---------------------+
|  1 | 2013-02-27 00:00:00 | 2013-03-01 00:00:00 |
|  2 | 2013-02-18 00:00:00 | 2013-02-20 00:00:00 |
+----+---------------------+---------------------+ 
```

（所有日期都在午夜）

我想以某种方式选择这些来取回：

```
2013-02-27 00:00:00
2013-02-28 00:00:00
2013-03-01 00:00:00
2013-02-18 00:00:00
2013-02-19 00:00:00
2013-02-20 00:00:00 
```

也就是说，指定范围内的所有日期。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:45:23.783

您可以尝试使用此单个查询（它应该可以完成工作）：

```
SELECT * FROM (
SELECT dates.date_from + INTERVAL a + b DAY dte
FROM
 (SELECT 0 a UNION SELECT 1 a UNION SELECT 2 UNION SELECT 3
    UNION SELECT 4 UNION SELECT 5 UNION SELECT 6 UNION SELECT 7
    UNION SELECT 8 UNION SELECT 9 ) d,
 (SELECT 0 b UNION SELECT 10 UNION SELECT 20 
    UNION SELECT 30 UNION SELECT 40) m, dates
WHERE dates.date_from + INTERVAL a + b DAY  <=  dates.date_to
ORDER BY a + b ) e ORDER BY dte; 
```

看看[SQL Fiddle](http://sqlfiddle.com/#!2/92d1ee/24)。

[参考帖](https://stackoverflow.com/questions/5081642/mysql-select-dates-without-tables)。

# html - 无法使用 less.js 编译引导较少的文件

> ID：15052959
> 
> 赞同：1
> 
> 时间：2013-02-24T14:57:30.863
> 
> 标签：html, twitter-bootstrap, less

```
<html lang="en">
<head>
    <title>Scipy Central</title>
    <link href="./less/bootstrap.less" rel="stylesheet/less" type="text/css">
    <script src="./js/less-1.3.3.min.js" type="text/javascript"></script>
</head> 
```

这就是我的 HTML 页面开始的方式。但是，我没有看到引导程序正在页面中加载！

以下是我在控制台中发现的错误。

```
XMLHttpRequest cannot load file:///D:/proj/less/bootstrap.less. Cross origin requests are only supported for HTTP. less-1.3.3.min.js:8 Uncaught Error: NETWORK_ERR: XMLHttpRequest Exception 101 
```

如何解决这些问题？

**更新**

它在 Firefox 上工作（非常慢）。我用 file:/// 不是 Http 打开它

# php - QCubed/QCodo LoadAll 未定义

> ID：15052963
> 
> 赞同：0
> 
> 时间：2013-02-24T14:57:56.727
> 
> 标签：php, qcodo, qcubed

我正在为我的应用程序使用 Qcubed 框架，但出现此错误：

```
Fatal error: Call to undefined method Users::LoadAll() in C:\xampp\htdocs\andret\admin\users.php on line 183 
```

这个问题的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:53:30.317

如果没有更多信息或代码示例，我只能猜测，但您可以尝试这些东西，看看它们是否有帮助。检查 users.php 是否加载了 QCubed 框架，检查您是否已运行 codegen 并且 Users.class.php 是否存在于您的 includes/models 目录中。admin/users.php 是一个类文件吗？如果是这样，您是否将类命名为用户？如果是这种情况，您可能希望将该类重命名为 AdminUsers，以便它不会与您的模型中的 Users 类冲突，因为 QCubed 不使用 PHP 的名称间距。

# iphone - 切换 UITextField 时调整键盘视图？

> ID：15052964
> 
> 赞同：0
> 
> 时间：2013-02-24T14:58:10.993
> 
> 标签：iphone, objective-c, ipad, uitextfield, uikeyboard

当键盘出现在我的应用程序中时，我的视图可以向上滑动，因此可以看到文本字段并且效果很好。但是，因为它基于键盘通知，所以它仅在键盘出现时才起作用。

意思是，我选择了一个文本字段，键盘出现并且视图相应地向上滑动，但是如果我直接点击另一个文本字段，则视图不会调整，因为键盘已经存在。

这是我正在使用的代码，任何帮助使其适应上述情况的帮助将不胜感激。

```
-(void)registerForKeyboardNotifications
{
    NSNotificationCenter *center = [NSNotificationCenter defaultCenter];
    [center addObserver:self selector:@selector(keyboardDidShow:) name:UIKeyboardDidShowNotification object:nil];
    [center addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil];

    // add a tap gesture to drop first responder
    UITapGestureRecognizer *tapGR = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapToHideKeyboard:)];
    [self.view addGestureRecognizer:tapGR];
}

-(void)keyboardDidShow:(NSNotification *)notification
{
    CGRect keyboardFrameW = [[notification.userInfo objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];
    UIWindow *window = [[UIApplication sharedApplication] keyWindow];
    CGRect keyboardFrame = [window convertRect:keyboardFrameW toView:self.view];

    //Have a minimum space between the keyboard and textfield
    CGFloat textFieldBuffer = 40;
    CGFloat textFieldKeyboardDifference = 0;

    if (activeTextField.frame.origin.y + activeTextField.frame.size.height > keyboardFrame.origin.y) textFieldKeyboardDifference = (activeTextField.frame.origin.y + activeTextField.frame.size.height + textFieldBuffer) - keyboardFrame.origin.y;
    else if (activeTextField.frame.origin.y + activeTextField.frame.size.height < keyboardFrame.origin.y) textFieldKeyboardDifference = 0;

    [self translateView:self.view toRect:CGRectMake(self.view.frame.origin.x, self.view.frame.origin.y - textFieldKeyboardDifference, self.view.frame.size.width, self.view.frame.size.height) withDuration:0.3];
}

-(void)keyboardWillHide:(NSNotification *)notification
{
    //Revert to y origin 0
    [self translateView:self.view toRect:CGRectMake(self.view.frame.origin.x, 0, self.view.frame.size.width, self.view.frame.size.height) withDuration:0.3];
} 
```

编辑：

当这样调用时，我尝试手动调用键盘通知`textFieldDidBeginEditing`：

`[self keyboardDidShow:[NSNotification notificationWithName:UIKeyboardDidShowNotification object:nil]];`没有运气。该方法被调用，但由于我无法解决的原因没有进行任何调整。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:12:35.943

您可能想要在这里做的是为您的所有`UITextField`s 提供一个委托并`- (void)textFieldDidBeginEditing:(UITextField *)textField`在委托上实现以触发您的滚动操作。任何时候有人开始编辑文本字段时都会调用此方法，并且文本字段作为参数传递给该方法。

编辑：以您的代码为起点，这就是我想出的。每次更改文本字段时都会调用它：

```
@interface SOViewController () <UITextFieldDelegate>
@property (nonatomic, readwrite, assign) UITextField* activeTextField;
@property (nonatomic, readwrite, assign) CGRect keyboardFrame;
@end

@implementation SOViewController

@synthesize activeTextField;
@synthesize keyboardFrame;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [self registerForKeyboardNotifications];
    self.keyboardFrame = CGRectNull;
}

- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    self.activeTextField = textField;
    [self updatePosition];
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    self.activeTextField = nil;
}

-(void)registerForKeyboardNotifications
{
    NSNotificationCenter *center = [NSNotificationCenter defaultCenter];
    [center addObserver:self selector:@selector(keyboardDidShow:) name:UIKeyboardDidShowNotification object:nil];
    [center addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil];

    //    // add a tap gesture to drop first responder
    //    UITapGestureRecognizer *tapGR = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapToHideKeyboard:)];
    //    [self.view addGestureRecognizer:tapGR];
}

- (void)translateView: (UIView*)view toRect: (CGRect)rect withDuration: (NSTimeInterval)duration
{
    NSLog(@"Translating view to rect: %@ overDuration: %g", NSStringFromCGRect(rect), duration);
}

- (void)updatePosition
{
    if (self.activeTextField && !CGRectIsNull(self.keyboardFrame))
    {
        UIWindow *window = [[UIApplication sharedApplication] keyWindow];
        CGRect localKeyboardFrame = [window convertRect: self.keyboardFrame toView:self.view];

        //Have a minimum space between the keyboard and textfield
        CGFloat textFieldBuffer = 40;

        CGRect textFieldFrame = self.activeTextField.frame;

        CGRect viewFrame = self.view.frame;
        viewFrame.origin.y = 0;

        if (CGRectGetMaxY(textFieldFrame) + textFieldBuffer > CGRectGetMinY(localKeyboardFrame))
        {
            viewFrame.origin.y = -1.0 * (CGRectGetMaxY(textFieldFrame) + textFieldBuffer - CGRectGetMinY(localKeyboardFrame));
        }

        [self translateView: self.view toRect: viewFrame withDuration: 0.3];

    }
    else
    {
        CGRect viewFrame = self.view.frame;
        viewFrame.origin.y = 0;
        [self translateView: self.view toRect: viewFrame withDuration: 0.3];
    }
}

-(void)keyboardDidShow:(NSNotification *)notification
{
    self.keyboardFrame = [[notification.userInfo objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];
    [self updatePosition];
}

-(void)keyboardWillHide:(NSNotification *)notification
{
    self.keyboardFrame = CGRectNull;
    [self updatePosition];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:27:52.527

`UITableViewController`我喜欢在像你这样的情况下使用子类。`UITableView`只需使用页眉页脚和单元格构建您的视图。当您需要在内部进行文本编辑时`UITextView`，Field`UITableViewController`将自动布局所有内容。

即使您将`scrollEnabled`属性设置为 NO，它也会起作用；

# java - 如何在调整 JColorChooser 的同时不断更新场景颜色？

> ID：15052971
> 
> 赞同：1
> 
> 时间：2013-02-24T14:58:33.457
> 
> 标签：java, swing, user-interface, color-picker

我正在将 python/Qt GUI 应用程序翻译成 Java/Swing。当用户在 QColorDialog 中拖动滑块时，原始应用程序会不断地漂亮地更新场景颜色。如何在 JColorChooser 中获得类似的效果？我发现的所有示例仅在用户单击“应用”或“确定”按钮时才会更新颜色。当我的用户拖动“红色”滑块时，是否有一种机制可以监听 JColorChooser 中的连续颜色变化？

```
// How can I listen to every color adjustment?
// (i.e. not just when the user presses "Apply" or "OK"?)
ActionListener actionListener = new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent arg0) {
        System.out.println("color changed");
    }
};
Dialog colorDialog = JColorChooser.createDialog(ColorChannelWidget.this,
        "Select color for channel 3",
        false, // not modal
        new JColorChooser(Color.pink),
        actionListener, actionListener);
colorDialog.setVisible(true); 
```

编辑：

我将要更改的颜色在动态生成的 OpenGL 场景中。不是，比如说，静态图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T15:07:37.370

您将需要创建自己的 and 实例，以便`JColorChooser`您`JDialog`可以将 a 附加`ChangeListener`到`ColorSelectionModel`.`JColorChooser`

这是一个小演示代码，展示了如何执行此类操作：

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Window;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JColorChooser;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class TestColorChooser {

    protected void initUI() {
        JFrame frame = new JFrame(TestColorChooser.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JPanel panel = new JPanel() {
            @Override
            public java.awt.Dimension getPreferredSize() {
                return new Dimension(400, 400);
            };
        };
        final JButton button = new JButton("Click me to change color");
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                Window parentWindow = SwingUtilities.windowForComponent(button);
                final JColorChooser chooser = new JColorChooser(panel.getBackground());
                chooser.getSelectionModel().addChangeListener(new ChangeListener() {

                    @Override
                    public void stateChanged(ChangeEvent e) {
                        panel.setBackground(chooser.getColor());
                    }
                });
                JDialog dialog = new JDialog(parentWindow);
                dialog.add(chooser);
                dialog.pack();
                dialog.setLocation(panel.getLocationOnScreen().x + panel.getWidth(), panel.getLocationOnScreen().y);
                dialog.setVisible(true);
            }
        });
        frame.add(panel);
        frame.add(button, BorderLayout.SOUTH);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestColorChooser().initUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T15:13:56.670

使用@Guillaume 的[方法](https://stackoverflow.com/a/15053059/230513)，[`java.awt.image.RescaleOp`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/RescaleOp.html)可用于动态更改图像的颜色。可以在[此处](https://stackoverflow.com/a/5864503/230513)、[此处](https://stackoverflow.com/a/10208380/230513)和[此处](https://stackoverflow.com/a/5839425/230513)找到示例。

![图片](../Images/da4583339af090934165c179cb103f70.png)

# httpwebrequest - 无法从 CookieContainer WP8 应用程序中的 HTTP cookie 获取会话 ID

> ID：15052974
> 
> 赞同：0
> 
> 时间：2013-02-24T14:59:23.067
> 
> 标签：httpwebrequest, windows-phone-8, httpwebresponse, sessionid, cookie-httponly

前言：

我正在编写一个 windows phone 8 应用程序，我的一个模块负责通过远程服务器进行通信。

我正在使用 HttpWebRequest 和 HttpWebRequest 使用 GET 和 POST 方法。

我还惊讶地发现，仅 HTTP cookie 无法通过 WP8 应用程序访问，这意味着您无法获取、设置甚至查看它们。

您可能知道，当您从服务器获得响应时，CookieCollection 类型的 Cookies 属性看似为空，但是，当您在控制台应用程序中使用相同的代码时，您可以看到 cookie 及其内容这是会话ID。

我在论坛上浪费了很多时间和几天来解决这个问题，而我发现相关的解决方案只是创建一个新的 CookieContainer 并将其附加到我正在执行的每个请求中。

这个解决方案有效，但现在我到了必须实际获取会话 ID 以用于其他目的的阶段。例如使用 WebBrowser 控件，我需要将来自服务器的资源附加到它，但这是唯一的方法将工作是通过附加会话ID也......所以我真的必须得到cookie的价值......

目前，除了 WebBrowser 问题，一切都运行良好，但与我一起工作的人告诉我，在下一步中，我必须拥有会话 ID 用于其他目的。

我尝试了各种解决方案，通过反射和添加 C++ 非托管代码，但没有任何效果。

这对我来说听起来不合理，这是不可能的......

有没有人解决了这个问题，并且实际上有一个工作代码？

我真的很绝望，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:37:55.353

好吧，我想对于为什么没有人回答这个问题有一个很好的解释..

我从微软的一个人那里得到了一个内幕消息，这是目前根本不可能的。

他们期待在下半年进行更新以解决该问题。如果您不想从头开始重新实现 HTTP 层。

# windows-store-apps - 在 Windows 8 商店中为菜单构建自定义动画是否会影响应用程序通过验收测试的机会？

> ID：15052977
> 
> 赞同：0
> 
> 时间：2013-02-24T14:59:33.947
> 
> 标签：windows-store-apps, expression-blend

例如，我添加了类似于 windows phone 8 和 windows phone 7 中的菜单，其中有一个箭头，如果点击它会向右滑动以显示菜单。请注意，我在“通常位于左上角的那个”应用程序中使用了表示后退按钮的相同箭头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:56:12.337

它不应该。验收标准中没有提及自定义菜单动画。您应该在本地运行 Windows 应用认证工具包工具 ( [http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=27414 )。](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=27414)如果它通过了这个，那么至少因为这个原因它不会通过认证是极不可能的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:59:51.403

实现这种功能并不是失败的原因——那里有很多自定义菜单实现。只需看看 Netflix 应用程序。

可能使您的应用程序失败的是您使用的是相同的箭头。与导航关联的箭头。如果他们的认证团队发现您的 UI 令人困惑，他们可以选择不让您的应用通过认证。

我建议您选择另一个图标或符号。查看 Segoe UI Symbol 字体。那里有很多符号。要查找**Segoe UI Symbol**字体中的符号，请使用Windows 中包含的*字符映射应用程序。*（在 Windows 8 中使用可以为此使用搜索功能）。选择字体：Segoe UI Symbol。一直滚动到底部，您就会看到字体中包含的所有图标。

作为替代方案，您可以查看**Sync fusions Metro studio** - 您也可以使用许多免费图标。链接：[http ://www.syncfusion.com/downloads/metrostudio](http://www.syncfusion.com/downloads/metrostudio)

# sql - sqlite3 外键

> ID：15052982
> 
> 赞同：0
> 
> 时间：2013-02-24T15:00:01.273
> 
> 标签：sql, sqlite, composite-primary-key

我有一个在 sqlite3 中创建的数据库，并将外键设置为 student 表和 book 表以停止重复贷款：

使用**创建表**：

```
CREATE TABLE loan(
  SudentID INTEGER,
  ISBN INTEGER,
  out INTEGER,
  FOREIGN KEY(SudentID)
      REFERENCES student(SudentID)
      ON DELETE CASCADE
  FOREIGN KEY(ISBN)
      REFERENCES book(ISBN)
      ON DELETE CASCADE
)

CREATE TABLE student(
  SudentID INTEGER PRIMARY KEY,
  First TEXT,
  Last,
  Contact Text,
  Year INTEGER)

CREATE TABLE book(
  ISBN INTEGER PRIMARY KEY,
  Title TEXT,
  Price INTEGER,
  Qty INTEGER,
  Subject TEXT) 
```

如果我尝试将重复记录插入到**贷款表中**，则外键**不会**阻止它。

**Pragma**在代码和 Firefox 数据库设置中都打开了。

版本是 2.6.0

我的解决方法是使用 Distinct 过滤掉重复项，但是当我将此数据库用作教学工具时，有什么方法可以激活它们。但是`cascade delete`不起作用！为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:30:28.090

您需要在贷款表上使用复合主键。

```
CREATE TABLE loan(
  StudentID INTEGER,
  ISBN INTEGER,
  out INTEGER,
  FOREIGN KEY(SudentID)
      REFERENCES student(SudentID)
      ON DELETE CASCADE
  FOREIGN KEY(ISBN)
      REFERENCES book(ISBN)
      ON DELETE CASCADE
  PRIMARY KEY(StudentID, ISBN)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-05T18:18:21.510

外键支持仅在 Sqlite 3.6.19 及更高版本中可用。所以问题可能是以下之一：

1.  Sqlite 版本 < 3.6.19。要确定您的版本是否支持外键，请尝试以下操作：

> sqlite> PRAGMA 外键；

如果没有返回数据而不是*0*或*1*，那么您的版本不支持外键。

2.  您的 sqlite3 版本是使用这些定义的任何一个编译的

> SQLITE_OMIT_FOREIGN_KEY
> 
> SQLITE_OMIT_TRIGGER

不过有一件事，在 sqlite3 中没有强制执行外键。[从这里](https://www.sqlite.org/foreignkeys.html)找到所有这些信息

# maven - 如何修复 Maven 中损坏的（球衣）链接

> ID：15052983
> 
> 赞同：1
> 
> 时间：2013-02-24T15:00:05.593
> 
> 标签：maven, jersey

每当我尝试在球衣上运行教程/示例时，我似乎都被卡住了。比如下面两个：

*   //github.com/jesperfj/jax-rs-upload-file.git
*   //github.com/jamesward/jaxrsbars.git

更糟糕的是，错误似乎取决于我的存储库，即运行其他（类似）项目的历史，例如以下 Maven Archetype：

*   com.sun.jersey.archetypes:jersey-quickstart-grizzly2

我试图在下面详细描述我的发现。我的问题：

*   我（Maven 和 Jersey 的新手）能否希望修复我不理解的项目中的断开链接，如果可以，典型的策略是什么？
*   是什么导致这些“CHECKSUM FAILED”错误？
*   [这是球衣的典型问题和/或与此处](http://maven.apache.org/guides/mini/guide-coping-with-sun-jars.html)描述的 SUN 问题有关吗？

非常感谢您在使示例正常工作或更好地理解出了什么问题方面的任何帮助？

我做了什么：

我首先删除我的本地 .m2/repository 并`mvn package`在 jax-rs-upload-example 上运行：

```
(...)
Downloading: http://maven.glassfish.org/content/groups/glassfish/net/java/jvnet-parent/1/jvnet-parent-1.pom
185b downloaded  (jvnet-parent-1.pom)
[WARNING] *** CHECKSUM FAILED 
(...)
[INFO] Error building POM (may not be this project's POM).
(...)
Reason: Cannot find parent: net.java:jvnet-parent for project: com.sun.jersey:jersey-project:pom:1.9.1 for project com.sun.jersey:jersey-project:pom:1.9.1 
```

然后，当我`mvn package`对另一个示例或 quickstart-archetype 执行操作时，我会看到类似的`net.java.jvnet-parent`错误。但是，如果我随后删除我的存储库并重新构建快速入门原型，它现在可以构建并运行。如果我现在构建这两个示例，我会再次看到许多 CHECKSUM FAILED 消息，最终导致以下错误：

**jax-rs-上传**

```
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Compilation failure

error: error reading /home/rafel/.m2/repository/com/sun/jersey/jersey-server/1.9.1/jersey-server-1.9.1.jar; error in opening zip file
error: error reading /home/rafel/.m2/repository/com/sun/jersey/jersey-core/1.9.1/jersey-core-1.9.1.jar; error in opening zip file 
```

**贾克斯酒吧**

```
[INFO] Compilation failure

error: error reading /home/rafel/.m2/repository/org/glassfish/hk2/osgi-resource-locator/1.0.1/osgi-resource-locator-1.0.1.jar; error in opening zip file
error: error reading /home/rafel/.m2/repository/org/glassfish/hk2/external/javax.inject/1.6.32/javax.inject-1.6.32.jar; error in opening zip file
error: error reading /home/rafel/.m2/repository/org/glassfish/hk2/external/asm-all-repackaged/1.6.32/asm-all-repackaged-1.6.32.jar; error in opening zip file 
```

# java - 使用 Mockito 时，模拟和间谍有什么区别？

> ID：15052984
> 
> 赞同：162
> 
> 时间：2013-02-24T15:00:20.210
> 
> 标签：java, testing, mocking, mockito

使用 Mockito 间谍的用例是什么？

在我看来，每个间谍用例都可以使用 callRealMethod 模拟处理。

我可以看到的一个区别是，如果您希望大多数方法调用是真实的，它可以节省一些代码行来使用模拟与间谍。是这样还是我错过了更大的图景？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2016-08-29T00:27:19.750

**间谍和模拟之间的区别**

当 Mockito 创建一个模拟时——它是从一个类型的类中创建的，而不是从一个实际的实例中创建的。mock 只是创建了 Class 的一个基本的 shell 实例，完全用于跟踪与它的交互。另一方面，间谍将包装现有实例。它仍然会以与普通实例相同的方式运行——唯一的区别是它还将被检测为跟踪与它的所有交互。

在下面的例子中——我们创建了一个 ArrayList 类的模拟：

```
@Test
public void whenCreateMock_thenCreated() {
    List mockedList = Mockito.mock(ArrayList.class);

    mockedList.add("one");
    Mockito.verify(mockedList).add("one");

    assertEquals(0, mockedList.size());
} 
```

正如你所看到的——在模拟列表中添加一个元素实际上并没有添加任何东西——它只是调用了没有其他副作用的方法。另一方面，间谍的行为会有所不同——它实际上会调用 add 方法的真正实现并将元素添加到底层列表中：

```
@Test
public void whenCreateSpy_thenCreate() {
    List spyList = Mockito.spy(new ArrayList());
    spyList.add("one");
    Mockito.verify(spyList).add("one");

    assertEquals(1, spyList.size());
} 
```

在这里我们可以肯定地说，对象真正的内部方法被调用了，因为当你调用 size() 方法时，你得到的 size 为 1，但是这个 size() 方法并没有被模拟！**那么 1 是从哪里来的呢？**内部实际 size() 方法被称为 size() 未被模拟（或存根），因此我们可以说该条目已添加到真实对象中。

资料来源：[http](http://www.baeldung.com/mockito-spy) ://www.baeldung.com/mockito-spy + 自我笔记。

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2013-02-24T16:09:38.370

答案在[文档](http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#16)中：

> 真正的部分模拟（自 1.8.0 起）
> 
> 最后，在邮件列表上进行了多次内部辩论和讨论后，部分模拟支持被添加到 Mockito。以前我们将部分模拟视为代码异味。但是，我们发现了部分模拟的合法用例。
> 
> 在 1.8 版本之前，spy() 没有产生真正的部分模拟，这让一些用户感到困惑。阅读有关间谍的更多信息：[此处](https://static.javadoc.io/org.mockito/mockito-core/3.0.0/org/mockito/Mockito.html#13)或在 javadoc 中用于 spy(Object) 方法。

`callRealMethod()`在 之后引入`spy()`，但 spy() 当然被留在那里，以确保向后兼容。

否则，你是对的：间谍的所有方法都是真实的，除非被存根。`callRealMethod()`除非被调用，否则模拟的所有方法都会被存根。一般来说，我更喜欢使用`callRealMethod()`，因为它不会强迫我使用`doXxx().when()`成语而不是传统的`when().thenXxx()`

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2014-05-28T13:35:28.607

如果有一个具有 8 个方法的对象，并且您有一个要调用 7 个真实方法和 stub 一个方法的测试，那么您有两个选择：

1.  使用模拟，您必须通过调用 7 callRealMethod 和存根一个方法来设置它
2.  使用`spy`你必须通过存根一种方法来设置它

[官方文档](http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#doCallRealMethod())建议`doCallRealMethod`使用 spy 进行部分模拟。

> 另请参阅 javadoc spy(Object) 以了解有关部分模拟的更多信息。Mockito.spy() 是创建部分模拟的推荐方法。原因是它保证对正确构造的对象调用真正的方法，因为您负责构造传递给 spy() 方法的对象。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-12-09T15:22:24.017

当您想为**遗留代码**创建单元测试时，Spy 会很有用。

我在这里创建了一个可运行的示例[https://www.surasint.com/mockito-with-spy/](https://www.surasint.com/mockito-with-spy/)，我在这里复制了一些。

如果你有类似这样的代码：

```
public void transfer(  DepositMoneyService depositMoneyService, WithdrawMoneyService withdrawMoneyService, 
             double amount, String fromAccount, String toAccount){
    withdrawMoneyService.withdraw(fromAccount,amount);
    depositMoneyService.deposit(toAccount,amount);
} 
```

您可能不需要间谍，因为您可以模拟 DepositMoneyService 和 WithdrawMoneyService。

但是对于一些遗留代码，依赖关系在这样的代码中：

```
 public void transfer(String fromAccount, String toAccount, double amount){

        this.depositeMoneyService = new DepositMoneyService();
        this.withdrawMoneyService = new WithdrawMoneyService();

        withdrawMoneyService.withdraw(fromAccount,amount);
        depositeMoneyService.deposit(toAccount,amount);
    } 
```

是的，您可以更改为第一个代码，但随后 API 会更改。如果很多地方都在使用这种方法，则必须全部更改。

另一种方法是您可以像这样提取依赖项：

```
 public void transfer(String fromAccount, String toAccount, double amount){
        this.depositeMoneyService = proxyDepositMoneyServiceCreator();
        this.withdrawMoneyService = proxyWithdrawMoneyServiceCreator();

        withdrawMoneyService.withdraw(fromAccount,amount);
        depositeMoneyService.deposit(toAccount,amount);
    }
    DepositMoneyService proxyDepositMoneyServiceCreator() {
        return new DepositMoneyService();
    }

    WithdrawMoneyService proxyWithdrawMoneyServiceCreator() {
        return new WithdrawMoneyService();
    } 
```

然后你可以使用间谍像这样注入依赖项：

```
DepositMoneyService mockDepositMoneyService = mock(DepositMoneyService.class);
        WithdrawMoneyService mockWithdrawMoneyService = mock(WithdrawMoneyService.class);

    TransferMoneyService target = spy(new TransferMoneyService());

    doReturn(mockDepositMoneyService)
            .when(target).proxyDepositMoneyServiceCreator();

    doReturn(mockWithdrawMoneyService)
            .when(target).proxyWithdrawMoneyServiceCreator(); 
```

上面的链接中有更多详细信息。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-06-24T12:35:46.470

[[测试双重类型]](https://stackoverflow.com/a/61209739/4770877)

`Mock`对比`Spy`

`Mock`是一个光秃秃的双重对象。此对象具有相同的方法签名，但实现为空并返回默认值 - 0 和 null

`Spy`是一个克隆的双重对象。新对象是基于**真实**对象克隆的，但您可以模拟它

```
class A {
    String foo1() {
        foo2();
        return "RealString_1";
    }

    String foo2() {
        return "RealString_2";
    }

    void foo3() { foo4(); }

    void foo4() { }
} 
```

```
@Test
public void testMockA() {
    //given
    A mockA = Mockito.mock(A.class);
    Mockito.when(mockA.foo1()).thenReturn("MockedString");

    //when
    String result1 = mockA.foo1();
    String result2 = mockA.foo2();

    //then
    assertEquals("MockedString", result1);
    assertEquals(null, result2);

    //Case 2
    //when
    mockA.foo3();

    //then
    verify(mockA).foo3();
    verify(mockA, never()).foo4();
}

@Test
public void testSpyA() {
    //given
    A spyA = Mockito.spy(new A());

    Mockito.when(spyA.foo1()).thenReturn("MockedString");

    //when
    String result1 = spyA.foo1();
    String result2 = spyA.foo2();

    //then
    assertEquals("MockedString", result1);
    assertEquals("RealString_2", result2);

    //Case 2
    //when
    spyA.foo3();

    //then
    verify(spyA).foo3();
    verify(spyA).foo4();
} 
```

# string - 将字符代码附加到字符串

> ID：15052987
> 
> 赞同：1
> 
> 时间：2013-02-24T15:00:33.677
> 
> 标签：string, append, go, character

我正在尝试向字符串添加空字符，但找不到正确的语法。

我试过了：

```
s += "\0" 
```

和：

```
s += "\x00" 
```

但这两个都给我一个错误。一般来说，如何通过字符代码将字符添加到字符串中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T15:11:26.373

`s += "\000"`添加空字符。Go 在允许字符串中的转义方面非常严格。\0 表示您正在开始一个八进制字符代码，并且 go 期望斜杠后正好有 3 个八进制数字。空字符需要三个 0。\x 表示您正在开始一个十六进制字符代码，之后您又需要两个十六进制数字。\u 或 \U 后面需要 4 和 8 个十六进制数字。有关规范的完整详细信息，请参见：[http ://golang.org/ref/spec#Rune_literals。](http://golang.org/ref/spec#Rune_literals)

# xml - 在没有适当的 IDL（WSDL 或 WADL）的情况下使用 RESTful Web 服务是什么感觉？

> ID：15052991
> 
> 赞同：1
> 
> 时间：2013-02-24T15:01:01.930
> 
> 标签：xml, web-services, wsdl, qa, wadl

至少，不应该有一种标准的方式来记录 Web 服务的 API，就像我们使用 Javadoc 来记录 Java API 一样？WSDL 允许 XMLSpy 等工具创建服务请求模板，QA 和 Web 服务客户端可以使用该模板轻松使用服务并了解有关其行为和属性的更多信息。对于大多数不使用 WADL 的 RESTful Web 服务来说，这不是差距吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:22:11.910

和你一样，我对此很好奇，发现以下工具有助于测试 RESTful Web 服务[REST Console](https://chrome.google.com/webstore/detail/rest-console/cokgbflfommojglbmbpenpphppikmonn?hl=en-US&utm_source=chrome-ntp-launcher)和[Advanced REST Client](https://chrome.google.com/webstore/detail/advanced-rest-client/hgmloofddffdnphfgcellkdfbfbjeloo?hl=en-US&utm_source=chrome-ntp-launcher)。我的大部分经验是测试 .NET 堆栈，其中`WSDL's`/`WADLs`几乎总是标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T19:43:33.213

根据维基百科，WADL 尚未标准化。

[WADL](http://en.wikipedia.org/wiki/Web_Application_Description_Language)

另一方面，Swagger 似乎是另一个值得考虑的有趣选择。

[昂首阔步](http://swagger.io/)

# php - 在 PHP 类之外的索引中使用 var

> ID：15052992
> 
> 赞同：-4
> 
> 时间：2013-02-24T15:01:12.540
> 
> 标签：php, class, include, var

我如何在课堂外访问 $pos var？所以我可以在我的索引中使用它，例如： echo $pos 我也在我的索引中包含了这个类。

```
public function CheckProfile(){

    $get = $this->db->query("SELECT positive, posts FROM users WHERE user='". $_SESSION['user'] ."'");

    while($row = $get->fetch(PDO::FETCH_ASSOC))
        {
            return $pos = $row['post'];
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:27:40.753

正如每个人都告诉你的那样，你的代码中有很多错误的地方。您应该学习如何更好地使用类和对象。无论如何，这是开始的：

假设你有一个类，让我们定义一个公共方法：

```
public function CheckProfile($user) {

    $ret = false;

    $stmt = $this->db->prepare("SELECT positive, posts FROM users WHERE user = :user");
    $stmt->bindParam(':user', $user, PDO::PARAM_STR);

    if ($stmt->execute())   {
        $ret = $stmt->fetchAll(PDO::FETCH_ASSOC);
    }

    return $ret;
} 
```

然后，从您的 php 文件中，像这样使用它：

```
$UserData = $YourClassInstance->CheckProfile($_SESSION['user']);
if ($UserData === false) {
    echo 'Something went wrong...';
} else {
    print_r($UserData);
} 
```

从这个开始，尝试完成你真正需要的。

# rdf - 获取我的披萨名称的 SPARQL 查询

> ID：15052994
> 
> 赞同：4
> 
> 时间：2013-02-24T15:01:19.280
> 
> 标签：rdf, sparql, owl, protege, topbraid-composer

我只是 SPARQL 的初学者，可以编写一些基本的查询。我有一个披萨本体，其中有一个披萨，其属性如下：

```
rdf:subClassOf NamedPizza

hasTopping only (MozzarellaTopping
              or PeperoniSausageTopping
              or TomatoTopping)

hasTopping some MozzarellaTopping

hasTopping some PeperoniSausageTopping

hasTopping some TomatoTopping 
```

我写了以下查询，但没有给出任何结果。

```
SELECT * WHERE
{
  ?pizza rdfs:subClassof [
    owl:onProperty :hasTopping;
    owl:someValuesFrom :MozzarellaTopping ] .
  ?pizza rdfs:subClassof [
    owl:onProperty :hasTopping;
    owl:someValuesFrom :PeperonSausageTopping ] .
  ?pizza rdfs:subClassof [
    owl:onProperty :hasTopping;
    owl:someValuesFrom :TomatoTopping ] .
} 
```

获取此披萨名称的 SPARQL 查询是什么？

我正在使用 Protege 4.2 以及 TopBraid 来运行 SPARQL 查询

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T22:02:29.833

In your SPARQL query you write `rdfs:subClassof` instead of `rdfs:subClassOf` ('o' instead of 'O'). Capitalisation matters, because the prefix notation is just shorthand for URIs and in URIs different characters (like lowercase instead of uppercase) make a different URI.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T17:48:46.713

减少查询直到它产生一些东西，然后查看为什么您删除的部分与数据不匹配。

# android - android - 试图为 vk.com 授权用户

> ID：15052995
> 
> 赞同：2
> 
> 时间：2013-02-24T15:01:30.993
> 
> 标签：android, oauth-2.0, android-webview

我正在尝试按照[此处](http://vk.com/developers.php?id=-1_37230422&s=1)和[此处](http://vk.com/developers.php?oid=-17680044&p=OAuth_Authorization_Dialog)的描述授权 vk.com 用户（OAuth 2.0） 。问题：每次我只看到一个空白屏幕时，除了对 GC 的一次调用似乎什么都没有发生。*我测试了我的 WebView，它显示任何以https*开头的地址，没有任何问题。我猜我的 URL 无效，但我也没有看到任何错误消息，看起来 WebView 只是不显示授权对话框。我不熟悉 OAuth 系统，非常感谢任何帮助。代码如下

PS 我使用位掩码 8，因为我只需要访问用户的音频。

```
 private static final String ACCESS = "https://oauth.vk.com/authorize?client_id=123456&redirect_uri= https://oauth.vk.com/blank.html/&display=touch&response_type=token&scope=8";

         private WebViewClient mWebClient = new WebViewClient() {

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
    return false;
}
 @Override
 public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) {
     handler.proceed(); 
 }

     };
     web = (WebView)findViewById(R.id.webView1);
     web.setWebViewClient(mWebClient);
        web.getSettings().setJavaScriptEnabled(true);
        web.loadUrl(ACCESS); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:58:59.700

刚刚想通了。发布作为答案，因为可能有开发人员对访问 vk.com 感兴趣。来自 android 设备的正确授权请求如下所示：

```
 private final String VK_AUTH = "https://oauth.vk.com/authorize?client_id=123456&redirect_uri=https://oauth.vk.com/blank.html&scope=8&display=touch&response_type=token "; 
```

# c++ - 什么可以代替移植到 Windows 上的 glob_t 和 glob()？

> ID：15052998
> 
> 赞同：6
> 
> 时间：2013-02-24T15:02:01.773
> 
> 标签：c++, windows, porting, glob

我有一些像这样的代码片段：

```
#include <glob.h>

glob_t globBuf;
const int result = glob(remoteFileName.c_str(), 0, 0, &globBuf);

if (result == GLOB_NOSPACE) {
  ...
} else if (result == GLOB_NOMATCH) {
  ...
} else {
  ...
} 
```

但我`glob.h`在 Windows 上找不到。

我将在 Microsoft Windows 上使用什么来提供等效的功能来从 Linux 移植此代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:04:27.510

`glob`是 POSIX 特定的东西，在 Windows 上不存在。在 Windows 上查看[`FindFirstFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx)及其配套功能。

# android - 如何在 Android 中以编程方式安装特定的 TTS 引擎？

> ID：15052999
> 
> 赞同：6
> 
> 时间：2013-02-24T15:02:25.910
> 
> 标签：android, text-to-speech, google-text-to-speech

我正在尝试将特定于应用程序的 TTS 引擎添加到我的应用程序中 - 不是基于系统的，所以每个人都会有另一个，但所有人都有一个。

在文档中有方法：[setEngineByPackageName()](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#setEngineByPackageName%28java.lang.String%29)，看起来它可以满足我的需求。但是，在前面查看其他类似问题时，我发现使用这种方法的一些东西：[https](https://stackoverflow.com/questions/12549086/selecting-required-tts-programmatically-in-android) ://stackoverflow.com/questions/12549086/selecting-required-tts-programmatically-in-android 。

它看起来还不错，但是在系统检查是否安装了 TTS 引擎后使用它，如果没有安装它（没有定义哪个）。

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Fire off an intent to check if a TTS engine is installed
    Intent checkIntent = new Intent();
    checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
    startActivityForResult(checkIntent, MY_DATA_CHECK_CODE);
}

public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (requestCode == MY_DATA_CHECK_CODE)
    {
        if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS)
        {
            // success, create the TTS instance
            mTts = new TextToSpeech(this, this);
        }
        else
        {
            // missing data, install it
            Intent installIntent = new Intent();
            installIntent.setAction(
                    TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
            startActivity(installIntent);
        }
    }
} 
```

所以，我想问一下在检查时是否有任何方法可以安装特定的tts引擎，因为现在这些方法是在创建TTS之前调用的，所以你不能调用setEngineByPackageName()，或者带有引擎设置的构造函数（取决于Android版本）。

我正在考虑作为一个关于**Text-To-Speech Extended**的引擎，所以据我所知，我应该使用包名称： com.google.tts 我假设它来自 Play 商店链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-11-19T09:43:12.823

在 onCreate() 中尝试检查是否安装了特定的 TTS 引擎：

```
 if ((isPackageInstalled(getPackageManager(), SPECIFIC_TTS_PACKAGE_NAME))) {
        Log.e(TTS_TAG, "Intended TTS engine installed");
        mTTS = new TextToSpeech(this, new TextToSpeech.OnInitListener() {
            @Override
            public void onInit(int status) {
                if (status == TextToSpeech.ERROR) {
                    Log.e(TTS_TAG, "TTS initialize failed");
                } else {
                    int result = mTTS.setLanguage(Locale.US);

                    if (result == TextToSpeech.LANG_NOT_SUPPORTED
                            || result == TextToSpeech.LANG_MISSING_DATA) {
                        Log.e(TTS_TAG, "Language not supported");
                    } else {
                        mButtonSpeak.setEnabled(true);
                    }
                }
            }
        }, SPECIFIC_TTS_PACKAGE_NAME);
    } else {
        Log.e(TTS_TAG, "Intended TTS engine is not installed");
        installSpecificTTSEngine();
    } 
```

这种安装 TTS 引擎的方法：

```
 private void installSpecificTTSEngine() {
    if (internetIsConnected()) {
        Intent installIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id="+SPECIFIC_TTS_PACKAGE_NAME));
        installIntent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET|Intent.FLAG_ACTIVITY_MULTIPLE_TASK|Intent.FLAG_ACTIVITY_NEW_TASK);

        try {
            Log.e(TTS_TAG, "Installing TTS engine: " + installIntent.toUri(0));
            startActivity(installIntent);
        } catch (ActivityNotFoundException ex) {
            Log.e(TTS_TAG, "Failed to install TTS engine, no activity found for " + installIntent + ")");
        }
    } else {
        Log.e(TTS_TAG, "Internet is not connected for download tts engine");
    }
} 
```

其他方法：

```
public static boolean isPackageInstalled(PackageManager pm, String packageName) {
    try {
        pm.getPackageInfo(packageName, 0);
    } catch (PackageManager.NameNotFoundException e) {
        return false;
    }
    return true;
}

/* Check is there a NetworkConnection */
protected boolean internetIsConnected() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm != null ? cm.getActiveNetworkInfo() : null;
    if (netInfo != null && netInfo.isConnected()) {
        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-20T14:35:55.123

为什么你在 onCreate 调用意图？

将安装检查程序移到说话之前的位置