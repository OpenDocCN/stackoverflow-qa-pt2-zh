# StackOverflow 问答 15096000-15096999

# java - 将 Richfaces 添加到基于 Maven 的项目中

> ID：15096008
> 
> 赞同：1
> 
> 时间：2013-02-26T17:58:30.037
> 
> 标签：java, eclipse, jsf, maven, richfaces

晚上好，

目前我正在尝试将 Richfaces 添加到 Eclipse 中基于 Maven 的项目中。但是，当我部署我的应用程序 (Glassfish) 时，我在浏览器中收到以下警告：

警告：此页面调用 XML 命名空间 h++p://richfaces.org/rich 声明，前缀为rich，但该命名空间不存在标记库。

此外，我的控制台中没有收到任何错误消息。

在 Netbeans 中，我第一次尝试 Richfaces 时遇到了同样的问题。但是，我可以通过右键单击我的 Web 项目中的 Dependencies 文件夹，然后选择 Download Declared Dependencies 来解决这个问题。但是，我在 Eclipse 中没有这个选项。

Eclipse 中的项目使用 JSF 2.1 (Apache MyFaces 2.1.5)。添加的依赖项如下：

```
 <dependency>
        <groupId>org.richfaces.ui</groupId>
        <artifactId>richfaces-components-api</artifactId>
        <version>4.2.2.Final</version>
    </dependency>
    <dependency>
        <groupId>org.richfaces.ui</groupId>
        <artifactId>richfaces-components-ui</artifactId>
        <version>4.2.2.Final</version>
    </dependency>
    <dependency>
        <groupId>org.richfaces.core</groupId>
        <artifactId>richfaces-core-api</artifactId>
        <version>4.2.2.Final</version>
    </dependency>
    <dependency>
        <groupId>org.richfaces.core</groupId>
        <artifactId>richfaces-core-impl</artifactId>
        <version>4.2.2.Final</version>
    </dependency> 
```

尽管这段代码在 Netbeans 中运行良好，但我也尝试遵循以下建议：

[https://community.jboss.org/wiki/HowToAddRichFaces4xToMavenBasedProject](https://community.jboss.org/wiki/HowToAddRichFaces4xToMavenBasedProject) [https://community.jboss.org/wiki/MavenGettingStarted-Users](https://community.jboss.org/wiki/MavenGettingStarted-Users)

但是，问题仍然存在。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:03:43.310

这看起来好像 Maven 没有将依赖项下载到其本地存储库中。在 eclipse 中最简单的方法是使用 m2e 插件。安装后，右键单击您的项目并选择；

> 运行方式 > Maven 清理

它试图清理我们在构建时生成的文件的项目工作目录。你可以在这里阅读：[http ://maven.apache.org/plugins/maven-clean-plugin/](http://maven.apache.org/plugins/maven-clean-plugin/)

再次右键单击您的项目并选择：

> 运行方式 > Maven 安装

用于将工件添加到本地存储库。你可以在这里阅读：[http ://maven.apache.org/plugins/maven-install-plugin/](http://maven.apache.org/plugins/maven-install-plugin/)

尝试将其部署到您的服务器，它不应该抱怨缺少依赖项。此外，我建议一旦您对 maven 的概念感到满意，就可以从命令行熟悉使用它。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T14:12:53.270

这是我在十几个*承诺*的简单 JSF Get Started 之后发现的一个简短的食谱方法。我有一个项目的其他领域规定的目标。 *Netbeans*并没有大型服务器（例如）Glassfish、JBOSS。我想从 Tomcat 开始并迁移到嵌入式服务器。我预计迁移会出现问题。花了大约 4 天的时间才找到一个有效的例子。从这里开始：

*   [RichFaces 4 入门](http://karimdjaafar.wordpress.com/2013/01/30/getting-started-with-richfaces-4/)

这真的很令人失望，因为完全相同的演示花了 30 分钟 AngularJS。第一个问题是没有现成的示例可以运行。编写这些项目的人只想要不解释基础知识的 Flash 示例。其次，当您使用 Netbeans 8 执行此操作时，没有多少（实际上）没有任何用处。因此，请准备好一开始就破解，直到找到适合您的方法。

到目前为止，我得到了 Netbeans 8 和 Tomcat 8 来运行这个示例。我很高兴，但启动时仍然出现错误。index.xhtml 工作正常，所以我在算一个“*赢*”。如果您在 Windows 上，您可能希望在一行上进行编辑。

```
 mvn archetype:generate \
        -DarchetypeGroupId=org.richfaces.archetypes \
        -DarchetypeArtifactId=richfaces-archetype-simpleapp \
        -DarchetypeVersion=4.0.0.Final \
        -DgroupId=com.jasmineconseil.samples.richfaces4  \
        -DartifactId=richfaces4-start 
```

这个生成并不完全有效。它在丢失的资源/文件夹上挣扎。奇怪，因为它负责生成资源文件夹恕我直言。我制作了资源文件夹并重新生成了。这至少给了我一个 POM 文件。哦，是的，如果这对人们有帮助，我正在使用 maven 3。

我移到项目目录下，下一步安装POM：

```
mvn install 
```

那也做了一些事情并且失败了。与编译有关。在这一点上，我转向了 Netbeans。POM 文件不会作为项目加载，我必须单击“已解决的问题”菜单选项。

当我单击解决时，大多数问题都消失了。

接下来，项目属性。主要是设置Java版本（这个项目是1.8）。设置选择的 Tomcat 服务器。检查组件库并确保 RichFaces 被勾选。

单击构建——它构建。单击运行/调试...如果您的 Tomcat 安装已全部设置好，它就可以工作了！来自 Catalina 的运行时错误。仍然会出现网页，之后不会显示错误（到目前为止，很好....）

```
 13-Aug-2014 00:04:11.058 SEVERE [localhost-startStop-1] org.apache.catalina.core.ContainerBase.addChildInternal ContainerBase.addChild: start: 
  org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/hellojsf]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:702)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:697)
      .... 
```

我还没看过。[JavaHotChocolate](http://www.javahotchocolate.com/tutorials/richfaces.html)上有关于 Jars 和错误的不同类型问题的注释。我希望我会遇到一些事情，或者我会回到这里并提出关于错误的问题。

您可能还会发现这些有助于解开羊毛球。

*   [用于 JSF 的 RichFaces](http://www.javahotchocolate.com/tutorials/richfaces.html) ...这个网站非常好，作者正在花时间解释什么是有效的（对他来说）
*   [RichFaces 开发人员指南](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html_single/index.html#d0e422)
*   [JSF 2、Maven 和 Tomcat 7](http://www.brucephillips.name/blog/index.cfm/2011/3/12/JSF-2-Maven-and-Tomcat-7) ... 这是我要构建的下一个示例。
*   [Netbeans 警告 pom.xml 中“http://download.java.net/maven/2”的黑名单存储库声明。如何解决？](https://stackoverflow.com/questions/22655230/netbeans-warns-blacklisted-repository-declarations-for-http-download-java-net)[*更新*]

**明白**了...

我在 Netbeans(?) 中发现了一些东西，尤其是在清理或关闭 Netbeans 并重新打开项目之后。

*   想要更改我的服务器/Tomcat 设置
*   想要更改 RichFaces（取消选中）
*   标准 maven 插件缺少它们的版本号（现在这是一个警告，很快就会出错）
*   还请查看您的 Maven setting.xml 文件（请参阅 JBOSS 手册）。
*   更改 java-net 存储库的 URL，如下所示：[Netbeans 警告 pom.xml 中“http://download.java.net/maven/2”的黑名单存储库声明。如何解决？](https://stackoverflow.com/questions/22655230/netbeans-warns-blacklisted-repository-declarations-for-http-download-java-net) [*更新*]
*   确保 Tomcat Catalina 部署文件夹是“*干净*的”：$ tomcat\conf\Catalina\localhost [*更新*]

希望一些关注此主题的人可以通过这些示例向前迈出一步。 *好的机会！*

# php - php上传文件多个

> ID：15096009
> 
> 赞同：0
> 
> 时间：2013-02-26T17:58:35.317
> 
> 标签：php, mysql

我有一个根据数据库中的问题生成的多个上传文本框。现在我的问题是，在输入时，我已经写了`<input type="file" name="file[<?php echo $id;?>]"/>`，当我想保存它时，我将程序编写为我声明的与问题编号匹配的数字`$_FILES['file']['name'][$start];`在哪里。`$start`例如，如果`file[123]`是在文本框中，则保存信息时的帖子字段也是`$_FILES['file']['name'][123]`。

但是当我尝试查找文本框是否`file[123]`发送了类似`$_FILES['file']['name'][$start]<>""`的内容时，它什么也没有发布。

这是保存信息时的代码：

```
 <input multiple name="file[<?php echo id;?>]" type="file" size="50" maxlength="100"> 

    if ($_FILES['file']['name'][$start]<>""){
        $fname=$_FILES['file']['name'][$start];
         $tandatangan=$fname;
         mysql_query("UPDATE answer SET document='$tandatangan' WHERE user_id='$id_user' and id_question='$id_soalan' ");
         move_uploaded_file($_FILES["file"]["tmp_name"],"../files/$tandatangan");
        } 
```

# html - 包含 div 边距或填充的 CSS 流体布局导致溢出

> ID：15096012
> 
> 赞同：2
> 
> 时间：2013-02-26T17:58:47.233
> 
> 标签：html, css, boxlayout

我有一个[jsfiddle](http://jsfiddle.net/samarjit/nepC3/)，其中最外面的包装 div 有 100% 的宽度。我想创建内部 div（tb_margin 或 tb_padding），其内容应从左侧 40px 开始。我尝试了边距和填充来创建这个 40px 的左间距，但在这两种情况下，由于宽度为 100%，实际 div 从右侧延伸出来。

我希望标签包含在一个 div（tb_margin 或 tb_padding）中，它从左侧偏移 40px，但应该延伸到整个宽度直到右边框。

我不想将溢出：隐藏在（tb_margin 或 tb_padding）中，因为这样做如果选项卡太多，选项卡将被隐藏。理想情况下，选项卡应该换行到 (tb_margin 或 tb_padding) 包含的下一行。

```
<h1>hello</h1>
<div style="width:100%;height:100px;border: 1px solid red">
    <div style="width:100%;height:50%; border: 1px solid blue">
        <div style="height:100%;width:150px;float:left; border:1px solid yellow"> logo</div>
        <div style="float:right;border:1px solid green;"> User| 13-Nov-13| Logout </div>
    </div>
    <div id="tb_margin" style="width:100%;margin-left:40px;border:1px solid green">tabbbs with margin here </div>
    <div id="tb_padding" style="width:100%;padding-left:40px;border:1px solid grey">tabbbs with padding here </div>
</div> 
```

**我真的希望 CSS 框布局更直观，或者我错过了什么**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T18:05:03.110

`box-sizing`救援！

```
#tb_padding {
  width:100%;
  padding-left:40px;
  border:1px solid grey;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
} 
```

这是演示： http: [//jsfiddle.net/pavloschris/nepC3/25/](http://jsfiddle.net/pavloschris/nepC3/25/) 还有一些信息：[https ://developer.mozilla.org/en-US/docs/CSS/box-sizing](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T18:13:12.113

您尝试实现的最简单的方法就是不在`width: 100%`边距或填充的 div 上指定。默认情况下，所有 div 都显示为`block`这意味着它们将拉伸以填充剩余的水平空间。

正如您所发现的，实际指定的问题`width: 100%`在于，在宽度计算之上添加了水平填充和边距 - 如果您未指定宽度，浏览器会自动计算出填充空间所需的宽度，这可能不是`100%`它的父母。

将来最好只`width: 100%`在您真正需要它时应用（例如在使用浮点数时），如果可以避免指定尺寸，请避免指定尺寸。

```
<h1>hello</h1>
<div style="width:100%;height:100px;border: 1px solid red">
  <div style="width:100%;height:50%; border: 1px solid blue">
    <div style="height:100%;width:150px;float:left; border:1px solid yellow">
      logo
    </div>
    <div style="float:right;border:1px solid green;">
      User| 13-Nov-13| Logout
    </div>
  </div>
  <div id="tb_margin" style="margin-left:40px;border:1px solid green">
    tabbbs with margin here
  </div>
  <div id="tb_padding" style="padding-left:40px;border:1px solid grey">
    tabbbs with padding here
  </div>
</div> 
```

# shell - 从 switch-case 转换为 if-then 语句

> ID：15096013
> 
> 赞同：0
> 
> 时间：2013-02-26T17:58:51.057
> 
> 标签：shell, csh

我正在尝试使用 cshell 验证输入，但在使用确切的语法时遇到了问题。我知道你可以像这样使用 switch case 结构：

```
switch ( $input )
  case [0-9]:
     echo Input is good 
```

但是有没有办法用 if-then 语句来做到这一点？我知道最简单的解决方案是停止使用糟糕的脚本语言，但如果有人能用 csh 给我答案，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:41:10.993

我的 csh 技能有点过时，但我相信您正在寻找的语法是：

```
if ($input =~ [0-9]) then
    echo "Input is good"
endif 
```

我在脚本中使用 csh，比如 bash，甚至 sh 的唯一原因是因为我必须维护一个现有的脚本并且不允许重写它，或者它必须来自 ac shell 环境。（如果你有决心，有办法解决最后一个问题。）

# c# - 从 C# 中的 Google 地球插件中删除功能

> ID：15096014
> 
> 赞同：0
> 
> 时间：2013-02-26T17:58:53.253
> 
> 标签：c#, google-earth-plugin

使用 Visual Studio C# Winforms Google Earth 插件，已将 4 个地标添加到地球，如下图所示：

![在此处输入图像描述](../Images/a915f85d00efe6b7e25da7db63d484e9.png)

我的目标是能够删除线串地标。这些步骤似乎是获取所有地标，找到线串并将其删除。

这是用于创建线串地标的代码（或多或少来自 API 网站）

```
 var lineStringPlacemark = ge2.createPlacemark("Line_" + name);
    // create the line string geometry
    var lineString = ge2.createLineString("");
    lineStringPlacemark.setGeometry(lineString);
    // add the the points to the line string geometry
    double dlat1 = Convert.ToDouble(lat1) / 100000;
    double dlon1 = Convert.ToDouble(lon1) / 100000;
    double dlat2 = Convert.ToDouble(lat2) / 100000;
    double dlon2 = Convert.ToDouble(lon2) / 100000;
    lineString.getCoordinates().pushLatLngAlt(dlat1, dlon1, 0);
    lineString.getCoordinates().pushLatLngAlt(dlat2, dlon2, 0);

    // Create a style and set width and color of line
    lineStringPlacemark.setStyleSelector(ge2.createStyle(""));
    var lineStyle = lineStringPlacemark.getStyleSelector().getLineStyle();
    lineStyle.setWidth(5);
    lineStyle.getColor().set("9900ffff");  // aabbggrr format
    // Add the feature to Earth
    ge2.getFeatures().appendChild(lineStringPlacemark); 
```

这是我最终用来删除该行的代码。请注意 GEHelpers.RemoveFeatureById(ge2, s); 由于某种原因它对我不起作用，因此被注释掉了。

```
for (int i = 0; i < ge2.getFeatures().getChildNodes().getLength(); i++)
{
   var kmlobject = ge2.getFeatures().getChildNodes().item[i];
   string s = kmlobject.getId();

   if (s.Contains("Line_"))
   {                
      ge2.getFeatures().removeChild(kmlobject);
      kmlobject.release();
      //GEHelpers.RemoveFeatureById(ge2, s);
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:48:21.570

您拥有的行应该可以工作并删除所有当前加载的内容。

```
GEHelpers.RemoveAllFeatures(ge); // removes all loaded features from 'ge' 
```

如果您希望删除特定地标或任何其他功能，只需将其 ID 指定为`RemoveFeatureById`方法的参数即可。

```
GEHelpers.RemoveFeatureById(ge, 'foo'); // remove the feature with the id 'foo' 
```

可以在通过 api 创建特征或在 kml 中定义特征时设置 ID。例如

```
// api
ge.createPlacemark('foo');

//kml id
<Document id="foo">
</Document> 
```

编辑：

你不应该做任何事情，除了...

```
for (int i = 0; i < ge2.getFeatures().getChildNodes().getLength(); i++)
{
   var kmlobject = ge2.getFeatures().getChildNodes().item[i];
   if (kmlobject.getId().Contains("Line_"))
   {                
      ge2.getFeatures().removeChild(kmlobject);
   }
} 
```

我认为您的设置可能还有其他问题，可能与同时运行插件的多个实例有关。

# r - R中带有时间数据的频率时间序列

> ID：15096015
> 
> 赞同：-2
> 
> 时间：2013-02-26T17:59:05.383
> 
> 标签：r, graph, time-series

```
 [9982] "2012-10-22 12:10:21 EDT" "2012-10-22 02:48:09 EDT" "2012-10-22 13:13:51 EDT"
 [9985] "2012-10-22 14:24:23 EDT" "2012-10-22 10:49:54 EDT" "2012-10-22 09:49:32 EDT" 
```

给出的是我正在使用的数据的 R 打印输出。本质上，我有一大列数据，其中包含上述格式的日期和时间。

我无法弄清楚如何获取这些数据并在 R 中创建时间序列图。我有兴趣按任意时间范围（例如 10 分钟、30 分钟或 60 分钟）对数据进行分箱，并绘制结果图随着时间的推移。

非常感谢您对此问题的任何帮助！谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:11:10.343

您根本没有提供太多示例数据来真正让我们了解您想要实现的目标，但这里有一些可能会让您入门。最终，建议归结为将您的数据转换为“xts”，并用于`period.apply`在“任意”时间范围内聚合和绘制数据。

这是一些示例数据，首先作为`data.frame`从 2012-10-22 12:10:21 EDT 开始每 11 分钟收集一次的随机值，然后转换为`xts`：

```
set.seed(1)
temp <- data.frame(date = seq(as.POSIXct("2012-10-22 12:10:21 EDT", tz="EDT"), 
                              length.out = 100, by = "11 min"),
                   values = rnorm(100))
library(xts)
x.temp <- xts(temp[-1], temp[, 1])
head(x.temp)
#                         values
# 2012-10-22 12:10:21 -0.6264538
# 2012-10-22 12:21:21  0.1836433
# 2012-10-22 12:32:21 -0.8356286
# 2012-10-22 12:43:21  1.5952808
# 2012-10-22 12:54:21  0.3295078
# 2012-10-22 13:05:21 -0.8204684 
```

在这里，我们将任意汇总过去每 93 分钟的总和。

```
my93minAgg <- period.apply(x.temp, 
                           INDEX = endpoints(x.temp, on = "mins", k = 93), 
                           FUN = sum)
my93minAgg
#                         values
# 2012-10-22 13:16:21  0.3133101
# 2012-10-22 14:55:21  1.1543989
# 2012-10-22 16:23:21  2.1290954
# 2012-10-22 18:02:21  0.5205041
# 2012-10-22 19:30:21 -0.6007850
# 2012-10-22 21:09:21  1.5058904
# 2012-10-22 22:37:21  0.9999036
# 2012-10-23 00:16:21  1.1553448
# 2012-10-23 01:44:21  1.9799783
# 2012-10-23 03:23:21 -1.7152471
# 2012-10-23 04:51:21  2.9882778
# 2012-10-23 06:19:21  0.4580653 
```

这是您绘制它的方式：

```
plot(my93minAgg, main = "My 93 Minute Aggregation") 
```

# ruby - `self` 如何在 ruby 的嵌套方法中工作？

> ID：15096016
> 
> 赞同：2
> 
> 时间：2013-02-26T17:59:09.380
> 
> 标签：ruby

要查看谁在扮演`self`in的角色`nested methods`，我尝试了以下代码：

```
def test
  p "#{self}"
  def show
    p "#{self}"
  end
end
# => nil 
```

作为效果，我得到了以下两个对象：

```
Object.new.test
"#<Object:0x00000002212d78>"
# => nil
Object.new.test.show
"#<Object:0x00000002205330>" #<~~~ this is self understood
"" #<~~~ how this one came?
# => "" 
```

但是从编码的数字来看，我无法理解这些对象属于哪个类。我尝试了下面的代码并获得了各自的`class`名称。

```
Object.new.test.class
"#<Object:0x000000021ff3b8>"
# => NilClass
Object.new.test.show.class
"#<Object:0x000000020660b0>"
""
# => String 
```

那么任何人都可以帮助我理解上述代码如何产生这些`class`名称的概念吗？

***编辑***

在这里，我试图以更具体的方式提出我的问题：

```
def test
p "First level # => #{self}"
def show
p "Second level # => #{self}"
end
end
# => nil
Object.new.test.show
"First level # => #<Object:0x000000014a77b0>"
"Second level # => "
# => "Second level # => "
Object.new.test.show.class
"First level # => #<Object:0x0000000130ef70>"
"Second level # => "
# => String 
```

***为什么`p "Second level # => #{self}"`声明`self`有价值`""`？***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T19:42:51.353

Object.new.test.show 调用 Object.new.test 对象中的 show 方法。

Object.new.test 返回 nil（因为 p 返回 nil），但同时它在 Object 类中添加了 show 方法的定义。

由于 nil 属于 NilClass 类，它是 Object 的子类，所以 nil 现在已将 show 作为方法，因此您实际上可以在 nil 中调用 show。

当你做 Object.new.test.show 相当于然后做

```
nil.show 
```

当在 show 中执行 p "#{self}" 时，实际上是在打印 nil.to_s

```
nil.to_s is "" 
```

这就解释了你看到的那个神秘的“”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:05:53.483

这很简单：

```
def show
  p "#{self}"
end 
```

`nil`return ，即`def`部分，这就是为什么该`test`方法返回一个对象`nil`，一个`NilClass`. 在该`show`方法中，您正在执行`p "#{self}"`的操作将返回一个字符串对象，该对象是`String`该类的一个实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T18:07:45.543

试试这个 ：

```
class FooBar
  def foo
    puts self.class
    puts self
    def bar
      puts self.class
      puts self
    end
    bar
  end
end

FooBar.new.foo 
```

我有 ：

```
FooBar
#<FooBar:0x007fc413849818>
FooBar
#<FooBar:0x007fc413849818> 
```

由于分配了不同的对象，因此得到了不同的结果。

`self`返回定义方法的对象，即使它是嵌套方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T18:06:16.693

尝试使用：`self.class.to_s`。所以要我输入额外的字符，所以 [:

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T20:06:55.747

我们都知道—— ***`self inside a method is always the object on which the method was called`***。所以让我们试着检查一下它的真实性。

`self`让我们首先从下面的代码中看看谁是默认的：

```
m=self
# => main
m.class
# => Object 
```

好的，默认`self`是`Object`类的对象。

只是从提到的代码描述中以更简化的方式编写了以下代码，以突出概念。

```
def test
p self.class
def show
p self.class
end
end
# => nil 
```

请记住，仅按以下方式`self inside a method is always the object on which the method was called`调用。`test`

```
test
Object
# => nil 
```

是的，`Object`已经返回，在其上`test`调用了，这意味着上面的陈述是正确的。

```
test.show
Object
NilClass
# => NilClass 
```

由于阻塞，调用 to`test`也会返回.Now是 .Now 的对象。因此方法已在对象上调用。结果是。上述说法再次成立。`nil``def show;p self.class;end``nil``NilClass``show``NilClass``self``NilClass`

上面的概念试图通过微小的步骤达到实际目标：

```
def test
p "1\. # => #{self}"
def show
p "2\. # => #{self}"
end
end
# => nil

test
"1\. # => main" #<~~ main is an object of class Object,on which test was called from IRB.
# => nil

test.show
"1\. # => main"
"2\. # => "    #<~~ nil("" means nil.to_s) is an object of Nilclass,on which show was called from IRB.
# => "2\. # => " 
```

# java - 使用 JQuery 难以解析 JSON

> ID：15096017
> 
> 赞同：1
> 
> 时间：2013-02-26T17:59:12.987
> 
> 标签：java, javascript, jquery, json, dom

我开发了一个应用程序来将 twitter 搜索结果作为 JSON 对象写入结果页面，如下所示：

```
for (Status tweet : tweets) {
    Map<String, String> tweetResult = new LinkedHashMap<String, String>();
    tweetResult.put("username", tweet.getUser().getScreenName());
    tweetResult.put("status", tweet.getText());
    tweetResult.put("date", tweet.getCreatedAt().toString());
    tweetResult.put("retweets", String.valueOf(tweet.getRetweetCount()));
    String resultJson = new Gson().toJson(tweetResult);
    response.getWriter().write(resultJson);
} 
```

这在下面使用 AJAX/JQuery 调用：

```
$(document).ready(function() {                                                                      
    $.getJSON('SearchServlet', function(list) {
        var table = $('#resultsTable');
        $.each(list, function(index, tweet) {
        $('<tr>').appendTo(table)
                .append($('<td>').text(tweet.username))
                .append($('<td>').text(tweet.status))
                .append($('<td>').text(tweet.date))
                .append($('<td>').text(tweet.retweets));
        });
    });
}); 
```

为了用结果填充表：

```
<body>
    <div id="wrapper">      
        <div id="contentArea">
            <div id="content">
                <h2>Results:</h2>
                <table id="resultsTable"></table>
            </div>
        </div>
    </div>
</body> 
```

GET 调用运行良好，结果显示在 firebug 控制台中没有问题，但是它们并没有按预期出现在实际文档本身上。我已经尝试了许多不同的方法（包括[这里](https://stackoverflow.com/questions/2758873/need-json-results-in-a-table-format)和[这里](https://stackoverflow.com/questions/1900711/handling-servlet-output-in-ajax/1900796#1900796)的答案）。

JSON 输出示例：

```
{"username":"Dineen_","status":"RT @TwitterAds: Learn how to put Twitter to work for your small business! Download our small biz guide now: https://t.co/gdnMMYLI","date":"Tue Feb 26 08:37:11 GMT 2013","retweets":"22"} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T18:07:03.837

看来你的序列化是错误的。由于您正在生成一系列未正确包含在数组中的连接 JSON 对象。

当前无效的 JSON 响应：

```
{ ... } { ... } { ... } { ... } 
```

而预期的 JSON 响应应该是：

```
[ { ... }, { ... }, { ... }, { ... } ] 
```

无需手动执行此操作。如果您构造正确的对象，Gson 可能会自动为您完成。例如，使用如下内容（未经测试）：

```
List<Map<String, String>> tweetList = new LinkedList<Map<String, String>>();
for (Status tweet : tweets) {
    Map<String, String> tweetResult = new LinkedHashMap<String, String>();
    tweetResult.put("username", tweet.getUser().getScreenName());
    tweetResult.put("status", tweet.getText());
    tweetResult.put("date", tweet.getCreatedAt().toString());
    tweetResult.put("retweets", String.valueOf(tweet.getRetweetCount()));
    tweetList.add(tweetResult);
}
String resultJson = new Gson().toJson(tweetList);
response.getWriter().write(resultJson); 
```

在此修复之后，您应该能够使用您的原始代码。

* * *

根据您的示例 JSON 输出，返回的输出是一个对象，而不是一个数组。你不需要在`$.each`这里使用。

```
$(document).ready(function () {
    $.getJSON('SearchServlet', function(tweet) {
        var table = $('#resultsTable');
        $('<tr>').appendTo(table)
                 .append($('<td>').text(tweet.username))
                 .append($('<td>').text(tweet.status))
                 .append($('<td>').text(tweet.date))
                 .append($('<td>').text(tweet.retweets));
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T18:07:33.840

我认为问题在于您使用`$.each`. 由于您正在传递一个对象，`each`因此正在迭代对象的键值对。（见[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)）

您可能希望返回一个用方括号括起来的 JSON 对象，以便它遍历数组。

```
[{"username":"Dineen_","status":"RT @TwitterAds: Learn how to put Twitter to work for your small business! Download our small biz guide now: https://t.co/gdnMMYLI","date":"Tue Feb 26 08:37:11 GMT 2013","retweets":"22"}] 
```

编辑：正如亚历山大指出的那样，您可以只返回与您已经做的相同的对象，但根本不使用`$.each`。我的回答假设您希望能够传回几个对象并将每个对象插入表格行中。

# objective-c - 实例变量 NSImage 未绘制

> ID：15096019
> 
> 赞同：0
> 
> 时间：2013-02-26T17:59:15.887
> 
> 标签：objective-c, nsview, nsimage

他，因为我以这种方式（在我的 NSView 中）使用我的图像作为实例变量（因为我需要经常绘制它们）：

```
@implementation BeatView
- (id)initWithFrame:(NSRect)frame{
self = [super initWithFrame:frame];
if (self) {
    bpm=160;
    mbpm=0;
    NSImage *bz_BG = [NSImage imageNamed:@"mw_bg01.png"];
    NSImage *bz_PaAc = [NSImage imageNamed:@"pattactive.png"];
    NSImage *bz_PaIa = [NSImage imageNamed:@"pattinactive.png"];
}
return self;
} 
```

然后绘制：

```
- (void)drawRect:(NSRect)dirtyRect{
     NSPoint imagePos = NSMakePoint(0, 0);
    [bz_BG dissolveToPoint:imagePos fraction:1.0];
} 
```

没有错误（只有未使用图像变量的警告）。运行时，不会绘制任何图像。我在这里做错了什么？谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:16:50.327

您没有初始化实例变量。您正在`init`方法期间创建新变量，因此会发出警告。

将您的代码更改为以下内容

```
_bz_BG = [NSImage imageNamed:@"mw_bg01.png"];
_bz_PaAc = [NSImage imageNamed:@"pattactive.png"];
_bz_PaIa = [NSImage imageNamed:@"pattinactive.png"]; 
```

在你的头文件中，将这些变量声明为

```
@property (nonatomic, retain) NSImage *bz_BG;
@property (nonatomic, retain) NSImage *bz_PaAc;
@property (nonatomic, retain) NSImage *bz_PaIa; 
```

默认情况下，XCode（我相信在第 4 版及更高版本中）在开头使用下划线合成您的属性（相当于`@synthesize bz_BG = _bz_BG;`在您的实现文件的开头放置）。因此，将您的引用`_bz_BG`改为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:01:13.100

使用方法`drawToPoint:`代替`dissolveToPoint`呢？

# python - Python 元组列表到 int 列表

> ID：15096021
> 
> 赞同：11
> 
> 时间：2013-02-26T17:59:23.763
> 
> 标签：python, list, tuples

那么，我有`x=[(12,), (1,), (3,)]`（元组列表）并且我想要`x=[12, 1, 3]`（整数列表）以最好的方式？你能帮忙吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T18:22:27.757

你没有说“最好”是什么意思，但大概你的意思是“最pythonic”或“最易读”或类似的东西。

F3AR3DLEGEND 给出的列表理解可能是最简单的。任何知道如何阅读列表理解的人都会立即知道它的含义。

```
y = [i[0] for i in x] 
```

然而，通常你并不真正需要一个列表，只需要可以迭代一次的东西。如果你有十亿个元素`x`，构建一个十亿个元素`y`只是为了一次迭代一个元素可能是个坏主意。因此，您可以使用生成器表达式：

```
y = (i[0] for i in x) 
```

如果您更喜欢函数式编程，您可能更喜欢使用`map`. 缺点`map`是你必须向它传递一个函数，而不仅仅是一个表达式，这意味着你要么需要使用一个`lambda`函数，要么`itemgetter`：

```
y = map(operator.itemgetter(0), x) 
```

在 Python 3 中，这相当于生成器表达式；如果你想要一个`list`，把它传递给`list`. 在 Python 2 中，它返回一个`list`; 如果您想要一个迭代器，请使用`itertools.imap`而不是`map`.

如果你想要一个更通用的扁平化解决方案，你可以自己写一个，但是这种通用的解决方案总是值得一看的[`itertools`](http://docs.python.org/2/library/itertools.html#recipes)，事实上有一个叫做`flatten`“扁平化嵌套级别”的配方。因此，将其复制并粘贴到您的代码（或`pip install more-itertools`）中，您就可以这样做：

```
y = flatten(x) 
```

如果你看看是如何`flatten`实现的，然后是如何`chain.from_iterable`实现的，然后是如何`chain`实现的，你会注意到你可以用内置函数编写同样的东西。但是为什么要麻烦，什么时候`flatten`会更易读和更明显呢？

最后，如果您想将通用版本简化为嵌套列表推导式（当然是生成器表达式）：

```
y = [j for i in x for j in i] 
```

但是，嵌套列表推导式很容易出错，无论是在写作还是阅读中。（注意F3AR3DLEGEND，也是最先给出最简单答案的人，也给出了嵌套推导，弄错了。如果他拉不开，你确定要试试吗？）对于非常简单的情况，他们'还不错，但我认为`flatten`它更容易阅读。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T18:01:47.063

```
y = [i[0] for i in x] 
```

不过，这只适用于每个元组的一个元素。

但是，如果每个元组有多个元素，则可以使用稍微复杂的列表推导：

```
y = [i[j] for i in x for j in range(len(i))] 
```

参考：[列表理解](http://docs.python.org/2/tutorial/datastructures.html?highlight=list%20comprehension#list-comprehensions)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T18:02:42.130

只需这样做：

```
x = [i[0] for i in x] 
```

解释：

```
>>> x=[(12,), (1,), (3,)]

>>> x
[(12,), (1,), (3,)]

>>> [i for i in x]
[(12,), (1,), (3,)]

>>> [i[0] for i in x]
[12, 1, 3] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T18:04:38.523

这是最有效的方法：

```
x = [i for i, in x] 
```

或者，等效地

```
x = [i for (i,) in x] 
```

这有点慢：

```
x = [i[0] for i in x] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T18:07:22.437

你可以使用地图功能......

```
map(lambda y: y[0], x) 
```

# java - 无法使用resty lib从android中删除资源

> ID：15096028
> 
> 赞同：0
> 
> 时间：2013-02-26T17:59:46.347
> 
> 标签：java, rest, resty

我在 android 上使用[Resty](https://github.com/beders/Resty/) 0.3.2 我已经成功使用了所有方法，但由于以下错误我不能使用 delete bequese

一开始我认为这是对清单的许可，但所有其他方法（post、put get）都工作正常。

删除代码

```
request.json("http://example.com:port/customer/4", delete()); 
```

logcat 的输出：

```
02-26 00:10:56.736: W/System.err(1116): java.io.IOException: BufferedInputStream is closed
02-26 00:10:56.747: W/System.err(1116): at java.io.BufferedInputStream.streamClosed(BufferedInputStream.java:118)
02-26 00:10:56.747: W/System.err(1116): at java.io.BufferedInputStream.read(BufferedInputStream.java:279)
02-26 00:10:56.747: W/System.err(1116): at java.io.InputStream.read(InputStream.java:163)
02-26 00:10:56.747: W/System.err(1116): at us.monoid.web.AbstractResource.fill(AbstractResource.java:44)
02-26 00:10:56.757: W/System.err(1116): at us.monoid.web.Resty.fillResourceFromURL(Resty.java:432)
02-26 00:10:56.757: W/System.err(1116): at us.monoid.web.Resty.doPOSTOrPUT(Resty.java:394)
02-26 00:10:56.757: W/System.err(1116): at us.monoid.web.Resty.json(Resty.java:223)
02-26 00:10:56.757: W/System.err(1116): at us.monoid.web.Resty.json(Resty.java:228)
02-26 00:10:56.757: W/System.err(1116): at com.example.resttest.RestTasks.doRequest(RestTasks.java:57)
02-26 00:10:56.757: W/System.err(1116): at com.example.resttest.RestTasks.doInBackground(RestTasks.java:29)
02-26 00:10:56.757: W/System.err(1116): at com.example.resttest.RestTasks.doInBackground(RestTasks.java:1)
02-26 00:10:56.767: W/System.err(1116): at android.os.AsyncTask$2.call(AsyncTask.java:287)

02-26 00:10:56.767: W/System.err(1116): at java.util.concurrent.FutureTask.run(FutureTask.java:234)
02-26 00:10:56.767: W/System.err(1116): at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
02-26 00:10:56.777: W/System.err(1116): at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
02-26 00:10:56.777: W/System.err(1116): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
02-26 00:10:56.793: W/System.err(1116): at java.lang.Thread.run(Thread.java:856) 
```

# javascript - 如何从 jQuery 移动脚本中删除基本标签？

> ID：15096031
> 
> 赞同：4
> 
> 时间：2013-02-26T17:59:51.653
> 
> 标签：javascript, jquery, html

在 jQuery Mobile 中：

*   如何`<base href="">`从页面中删除标签
*   如何禁用基本href？

相关代码：

```
 // Test for dynamic-updating base tag support ( allows us to avoid href,src attr rewriting )
 function baseTagTest() {
     var fauxBase = location.protocol + "//" + location.host + location.pathname + "ui-dir/",
         base = $("head base"),
         fauxEle = null,
         href = "",
         link, rebase;

     if (!base.length) {
         base = fauxEle = $("<base>", { "href": fauxBase }).appendTo("head");
     } else {
         href = base.attr("href");
     }

     link = $("<a href='testurl' />").prependTo(fakeBody);
     rebase = link[0].href;
     base[0].href = href || location.pathname;

     if (fauxEle) {
         fauxEle.remove();
     }
     return rebase.indexOf(fauxBase) === 0;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:49:25.233

基本元素是 jQuery mobile 导航模型的关键组成部分，以至于当 jQuery mobile 网站加载到无法动态更新基本元素的浏览器中时，它会在 url 前面加上基本元素。

满足您需求的两个建议：

1.  使用绝对文件路径而不是相对路径

2.  使用[jQuery Mobile 下载构建器](http://jquerymobile.com/download-builder/)并自定义 jQuery Mobile 应用程序所需的模块。我最初的猜测是您可能希望排除导航模块以删除基本元素功能。

# ios - 从 ios 中的现有数据库中读取数据

> ID：15096032
> 
> 赞同：1
> 
> 时间：2013-02-26T17:59:52.280
> 
> 标签：ios, sqlite

我在 ios 中做一个项目，我遇到了下一个问题：我正在使用现有的数据库，第一步（打开数据库）工作正常，但是当我尝试读取数据时出现错误。

控制台只显示：2013-02-26 14:46:59.999 MyApp[66537:c07] 读取数据问题

```
-(void) openDB
{
    @try {
        NSFileManager *fileMgr = [NSFileManager defaultManager];
        NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"data.db"];
        BOOL success = [fileMgr fileExistsAtPath:dbPath];
        if(!success)
        {
            NSLog(@"Cannot locate database file '%@'.", dbPath);
        }
        if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
        {
            NSLog(@"An error has occured.");
        }
    }
    @catch (NSException *exception) {
        NSLog(@"An exception occured: %@", [exception reason]);
    }
}

-(void) getData{
    NSString  *sql = @"SELECT * FROM frases";
    sqlite3_stmt * stmt;

    if (sqlite3_prepare_v2(db, [sql UTF8String], -1, &stmt, nil) != SQLITE_OK) {
        NSLog(@"problem reading data");
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self openDB];
    [self getData];
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-26T18:09:36.057

-(void) getData{ NSString *sql = @"SELECT * FROM frases"; sqlite3_stmt * stmt;

```
if (sqlite3_prepare_v2(db, [sql UTF8String], -1, &stmt, nil) != SQLITE_OK) {
    NSLog(@"problem reading data");
}else{
    sqlite3_stmt *compiledstatement;
    const char *selectStatement = [sql UTF8String];
    sqlite3_prepare_v2(sqlDatabase, selectStatement, -1, &compiledstatement, NULL);

    if (sqlite3_step(compiledstatement) == SQLITE_DONE) {}
    else NSLog(@"Failed!");
    sqlite3_finalize(compiledstatement);
} 
```

}

我就是这样做的。有一个通用函数，只需传入变量。

```
-(void)readDB:(NSString *)queryString {
    NSString    *docsDir;
    NSArray     *dirPaths;
    dirPaths    = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    docsDir     = [dirPaths objectAtIndex:0];

    strDatabasePath         = [NSString stringWithString:[docsDir stringByAppendingPathComponent:@"database.db"]];
    NSFileManager *filemgr  = [NSFileManager defaultManager];

    if ([filemgr fileExistsAtPath: strDatabasePath] == YES)
    {
        const char *dbpath = [strDatabasePath UTF8String];
        if (sqlite3_open(dbpath, &sqlDatabase) == SQLITE_OK)
        {
            const char* beginString = "BEGIN;";
            sqlite3_stmt *compiledstatement;
            sqlite3_prepare_v2(sqlDatabase, beginString, -1, &compiledstatement, NULL);
            if (sqlite3_step(compiledstatement) == SQLITE_DONE) {}
            else DLog(@"Failed!");
            sqlite3_finalize(compiledstatement);

            DLog(@"QUERY : %@",queryString);

            const char *selectStatement = [queryString UTF8String];

            sqlite3_prepare_v2(sqlDatabase, selectStatement, -1, &compiledstatement, NULL);
            //sqlite3_bind_text(compiledstatement,1,[statusString UTF8String],-1,SQLITE_TRANSIENT);

            if (sqlite3_step(compiledstatement) == SQLITE_DONE) {}
            else DLog(@"Failed!");
            sqlite3_finalize(compiledstatement);

            const char* endString="END;";
            sqlite3_prepare_v2(sqlDatabase, endString, -1, &compiledstatement, NULL);
            if (sqlite3_step(compiledstatement) == SQLITE_DONE) {}
            else DLog(@"Failed!");
            sqlite3_finalize(compiledstatement);

            sqlite3_close(sqlDatabase);
        }
        else DLog(@"Failed to open table");
    }
}

NSString *queryString;
queryString = @"SELECT * FROM frases";
[self readDB:queryString]; 
```

希望这会有所帮助......记得关闭数据库（sqlite3_close（sqlDatabase）;）..

# sockets - 如何在tcp socket api程序中一个接一个地立即连接客户端

> ID：15096033
> 
> 赞同：1
> 
> 时间：2013-02-26T17:59:56.380
> 
> 标签：sockets, tcp, client-server

```
server.c
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<sys/types.h>
#include<sys/socket.h>
#include<netinet/in.h>
#include<poll.h>
#include<unistd.h>
#include<arpa/inet.h>

int main()
{
struct pollfd fdarray[5];
int sfd,port,nsfd,n,clen,ret,i;
char str[100];
struct sockaddr_in sadd,cadd;
memset(str,0,sizeof(str));
sfd=socket(AF_INET,SOCK_STREAM,0);
if(sfd<0)
{
printf("sorry unable to open the file");
exit(1);
}
memset(&sadd,0,sizeof(sadd));
sadd.sin_port=htons(9796);
sadd.sin_family=AF_INET;
sadd.sin_addr.s_addr=INADDR_ANY;
if(bind(sfd,(struct sockaddr*) &sadd,sizeof(sadd))<0)
{
printf("earror");
exit(0);
}
listen(sfd,5);
 clen=sizeof(cadd);
for(i=0;i<5;i++)
{
nsfd=accept(sfd,(struct sockaddr*)&cadd,&clen);
 if(nsfd<0)
{
 printf("error accepting client");
 exit(1);
 }
 fdarray[i].fd=nsfd;
 fdarray[i].events=POLLIN;
 fdarray[i].revents=0;
 }
 while(1)
 {
 ret=poll(fdarray,5,-1);
 for(i=0;i<5;i++)
 {
  if(fdarray[i].revents==POLLIN)
   {
   n=read(fdarray[i].fd,str,100);
  if(n<0)
  printf("arreo");
  printf("message is:%s \n",str);
  char *buff="message received";
  int j;
  for( j=0;j<5;j++)
   {
   if(j!=i)
   n=write(fdarray[j].fd,buff,sizeof(buff));
   }
   }
   }
   }
   return 0;
    } 
```

我为聊天服务器编写了一个程序，例如，如果连接了四个客户端，如果其中一个客户端发送消息，那么所有其他客户端都应该收到消息，除了发送这个过程应该由服务器完成，即客户端应该发送到服务器和服务器现在应该在我的代码中对所有其他人服务器等待直到所有五个客户端都连接我应该怎么做才能立即一个接一个地连接所有客户端而不是等到所有客户端都连接

```
 client.c
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<sys/types.h>
#include<sys/socket.h>
#include<netinet/in.h>
#include<poll.h>
#include<unistd.h>
int main(int argc,char* argv[])
{
int sfd,i;
char msg[1024];
char blanmsg[1024];
struct sockaddr_in saddr;
memset(&saddr,0,sizeof(saddr));
sfd=socket(AF_INET,SOCK_STREAM,0);
saddr.sin_family=AF_INET;
inet_pton(AF_INET,"127,0.0.1",&saddr.sin_addr);
saddr.sin_port=htons(9796);
connect(sfd,(struct sockaddr*)&saddr,sizeof(saddr));
for(i=0;i<5;i++)
{
fgets(msg,1024,stdin);
send(sfd,msg,strlen(msg),0);
recv(sfd,blanmsg,sizeof(blanmsg),0);
printf("%s",blanmsg);
fflush(stdout);
}
exit(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:19:30.270

如果我正确理解了这个问题：您想在某些客户端尚未连接时为已连接的客户端提供服务。

您可以通过将客户端 accept()ing 移动到`while(1)`循环中来做到这一点。为此，您必须将服务器套接字添加到`fdarray`，并将客户端套接字添加到`fdarray`接受新客户端时。

这是一个非常相似的例子：[使用 poll() 实现的单线程回显服务器](http://publib.boulder.ibm.com/infocenter/iseries/v6r1m0/index.jsp?topic=/rzab6/poll.htm)

# actionscript-3 - 使用 ExternalInterface 发送 HTTP 请求

> ID：15096035
> 
> 赞同：1
> 
> 时间：2013-02-26T18:00:00.263
> 
> 标签：actionscript-3, flash

您可能知道，从 Flash 应用程序发送自定义 HTTP 请求一直很困难。例如，如果您有一个基本身份验证保护的网络服务，您将无法使用 GET 请求从 Flash 请求它，因为只有 POST 请求可以具有自定义标头。这真的很麻烦。

我想知道是否有人尝试过使用 ExternalInterface 使用 Javascript 发送 HTTP 请求？这个想法是让 JS 方法发送请求并将数据传回 Flash。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T19:50:14.780

是的，有可能，我已经做了几次使用 Facebook JS sdk 并将数据传回我的 swf。

通常你从你的 SWF 调用一个 JS 函数：

```
ExternalInterface.call("getFriends",params); 
```

在 JS 方面：

```
function getFriends(params)
{
    FB.api('me/friends',function(response){
         mySwf.onGetFriendsComplete(response);
    });
} 
```

在 SWF 端接收来自 JS 的调用：

```
ExternalInterface.addCallback("onGetFriendsComplete",onGetFriendsComplete);

private function onGetFriendsComplete(data)
{
   trace(data);
} 
```

如果您在本地运行 SWF，您可能需要在 ExternalInterface 调用之前进行检查以确保它可用：

```
if(ExternalInterface.available)
    ExternalInterface.call(...); 
```

# titanium - SD卡上的媒体加密？

> ID：15096038
> 
> 赞同：0
> 
> 时间：2013-02-26T18:00:12.753
> 
> 标签：titanium, appcelerator, titanium-mobile, encryption

我想知道是否可以加密 SD 卡上的媒体文件？例如，我们有一些视频可以保存在 SD 卡上，我们不希望它们直接从 SD 卡中读取。但是，我们的应用程序（android）可以解密和播放视频。或者，是否可以在 microsd 上加密或加扰我们媒体目录的内容，并在运行时通过我们的应用程序解密/解扰？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:43:28.817

Titan API 本身似乎不支持加密。但是钛论坛确实包含一些使用 crypto-js 的 JavaScript 示例代码，所以我认为您可以使用任何 JavaScript 库并分别加密/解密每个文件。

# xcode - 使用仪器定位后需要帮助解决内存泄漏

> ID：15096039
> 
> 赞同：0
> 
> 时间：2013-02-26T18:00:13.540
> 
> 标签：xcode, memory-leaks, xcode-instruments

我在 Xcode 4.6 中有一个与 Facebook 连接的应用程序。我注意到，当应用程序进入后台并返回前台时，应用程序的不同点偶尔会发生崩溃。由于不一致，崩溃很难分析，所以我尝试使用工具来识别内存泄漏。我对 iOS 很陌生，虽然我能够成功确定我确实存在内存泄漏，甚至可以看到哪些方法触发了它们，但我发现自己在想，“现在怎么办？” 换句话说，我知道问题出在哪里，但我无法确定它。我希望如果我强调一个例子，有人可以阐明一些观点。

**这是我在仪器中看到的：

![仪器屏幕截图](../Images/a04022c9cb0e628eb884a396038b56b0.png)

只需查看列表中的第一个泄漏对象：

泄漏对象 =“FB 会话”

负责框架 =

```
+[FBSession openActiveSessionWithPermissions:allowLoginUI:allowSystemAccount:isRead:defaultAudience:completionHandler:] 
```

我将此解释为意味着此方法内部存在一些泄漏的对象。那是对的吗？实现的方法存在于我的 App Delegate 中，如下所示：

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
  NSArray *permissions = [[NSArray alloc] initWithObjects:
                        @"user_about_me",
                        @"read_friendlists",
                        nil];
  //IMPLEMENTED METHOD
  return [FBSession openActiveSessionWithReadPermissions:permissions
                                          allowLoginUI:allowLoginUI
                                     completionHandler:^(FBSession *session,
                                                         FBSessionState state,
                                                         NSError *error) {
                                         [self sessionStateChanged:session
                                                             state:state
                                                             error:error];
                                     }];
} 
```

在这一点上，我不确定我需要做什么，或者这种方法甚至可能导致泄漏。我看过内存泄漏教程，但它们只是让我找到了问题所在，但没有帮助我弄清楚如何解决它。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:04:46.137

通常，您不应将其传递`self`给 block，因为 block 会保留它。似乎 FBSession 也保留了`completionHandler`，所以它变成了一个保留循环。

为了打破它，请使用以下结构之一：

```
__weak FBSession *zelf = self; // OK for iOS 5 only
__unsafe_unretained FBSession *zelf = self; // OK for iOS 4.x and up
__block FBSession *zelf = self; // OK if you aren't using ARC 
```

进而

```
return [FBSession openActiveSessionWithReadPermissions:permissions
                                      allowLoginUI:allowLoginUI
                                 completionHandler:^(FBSession *session,
                                                     FBSessionState state,
                                                     NSError *error) {
                                     [**zelf** sessionStateChanged:session
                                                         state:state
                                                         error:error];
                                 }]; 
```

有关保留周期的更完整说明，请参阅[这篇文章。](https://stackoverflow.com/questions/7853915/how-do-i-avoid-capturing-self-in-blocks-when-implementing-an-api)

# android - super.dispatchTouchEvent(ev) 返回动作取消

> ID：15096049
> 
> 赞同：1
> 
> 时间：2013-02-26T18:00:48.940
> 
> 标签：android, touch

我想将客户签名添加到我的应用程序中，我使用了[https://github.com/CoatedMoose/CustomViews/blob/master/library/src/com/coatmoose/customviews/SignatureView.java](https://github.com/CoatedMoose/CustomViews/blob/master/library/src/com/coatedmoose/customviews/SignatureView.java)并将其放入我的应用程序中，我使用了此方法使用此方法将事件传递给签名视图

```
public boolean dispatchTouchEvent(MotionEvent ev) {
        super.dispatchTouchEvent(ev);
            return agreement_control.SignatureView.onTouchEvent(ev);
    } 
```

但 `super.dispatchTouchEvent(ev);`在 ev 中返回 Action cancel

我怎样才能避免这种情况？

注意：当我从左上角触摸签名视图并将手慢慢向下移动时，我得到了以下事件

MotionEvent { action=ACTION_DOWN, id[0]=0, x[0]=15.0, y[0]=34.0, toolType[0]=TOOL_TYPE_FINGER, buttonState=0, metaState=0, flags=0x0, edgeFlags=0x0, pointerCount=1，historySize=0，eventTime=253599066，downTime=253599066，deviceId=2，source=0x1002 }

MotionEvent { action=ACTION_CANCEL, id[0]=0, x[0]=56.0, y[0]=834.0, toolType[0]=TOOL_TYPE_FINGER, buttonState=0, metaState=0, flags=0x0, edgeFlags=0x0, pointerCount=1，historySize=0，eventTime=253609229，downTime=253599066，deviceId=2，source=0x1002 }

我很惊讶为什么我的 y 值非常大

# ajax - ajax表单输入文件上传在codeigniter中加载单独的页面

> ID：15096055
> 
> 赞同：3
> 
> 时间：2013-02-26T18:01:12.453
> 
> 标签：ajax, codeigniter, file-upload, form-submit

我在用

```
<script src="http://malsup.github.com/jquery.form.js"></script> 
```

用于我的 ajax 表单上传。

当我在没有 Codeigniter 框架的情况下上传文件时，效果很好。但是当我在框架中使用它时，它会显示以下错误：-

```
HTTP wrapper does not support writeable connections 
```

加上它实际上正在加载一个单独的页面

这是我的代码：-

```
<html>
<head>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 
    <script src="http://malsup.github.com/jquery.form.js"></script> 

    <script type="text/javascript">
        $(document).ready(function() {
            var options = { 
                clearForm: true,
                resetForm: true
            };
            // bind 'myForm' and provide a simple callback function 
            $('#myForm').ajaxForm(function() { 
                //alert("Thank you for your comment!"); 

            }); 
            $('#myForm').ajaxForm(options);

        }); 
    </script> 

</head>

<body>
    <form id="myForm" name="myForm" action="comment.php" method="post" enctype="multipart/form-data"> 
        <input type="text" name="name" />
        <br /> 
        <textarea name="comment"></textarea> 
        <br />
        <input type="file" value="Share a Pic" name="file" id="file" />
        <br />
        <input type="submit" value="Submit Comment" /> 
    </form>
</body> 
```

对于 Codeigniter，我将操作更改为

```
site/submit_myform 
```

所以它会加载 site/submit_myform。站点是我的控制器。其他值正在存储在数据库中

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:17:46.193

如果页面正在重定向，则 ajax 部分不起作用。您需要`return false;`在此期间`on submit`防止页面重定向。

我建议按照[`ajaxSubmit()`表单插件中提供的示例进行操作。](http://www.malsup.com/jquery/form/#ajaxSubmit)

# ios - 在 UIImageView IOS 中绘制形状

> ID：15096063
> 
> 赞同：6
> 
> 时间：2013-02-26T18:01:26.993
> 
> 标签：ios, xcode

我正在尝试使用特定图像在 UIImageView 内绘制一些圆圈。这就是我想要做的：

```
UIGraphicsBeginImageContext(self.view.bounds.size);
CGContextRef contextRef = UIGraphicsGetCurrentContext();
CGContextSetLineWidth(contextRef, 2.0);
CGContextSetStrokeColorWithColor(contextRef, [color CGColor]);
CGRect circlePoint = (CGRectMake(coordsFinal.x, coordsFinal.y, 50.0, 50.0));

CGContextStrokeEllipseInRect(contextRef, circlePoint);

UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

[photoView addSubview:image]; 
```

圆圈画得很好，但我希望 PhotoView 充当它的面具。因此，例如，如果我使用动画将 UIImageView 移出 UIView，我希望圆圈随之移动。重要的是坐标是相对于整个屏幕的事实。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T18:24:49.327

改用 Core Animation 的形状层。

```
CAShapeLayer *circleLayer = [CAShapeLayer layer];
// Give the layer the same bounds as your image view
[circleLayer setBounds:CGRectMake(0.0f, 0.0f, [photoView bounds].size.width, 
                                              [photoView bounds].size.height)];
// Position the circle anywhere you like, but this will center it
// In the parent layer, which will be your image view's root layer
[circleLayer setPosition:CGPointMake([photoView bounds].size.width/2.0f, 
                                    [photoView bounds].size.height/2.0f)];
// Create a circle path.
UIBezierPath *path = [UIBezierPath bezierPathWithOvalInRect:
                                    CGRectMake(0.0f, 0.0f, 50.0f, 50.0f)];
// Set the path on the layer
[circleLayer setPath:[path CGPath]];
// Set the stroke color
[circleLayer setStrokeColor:[[UIColor redColor] CGColor]];
// Set the stroke line width
[circleLayer setLineWidth:2.0f];

// Add the sublayer to the image view's layer tree
[[photoView layer] addSublayer:circleLayer]; 
```

现在，如果您为包含此图层的 UIImageView 设置动画，该图层将随之移动，因为它是一个子图层。现在不需要覆盖`drawRect:`.

# java - 连接迷宫/网格的墙壁，使所有墙壁相互连接

> ID：15096066
> 
> 赞同：3
> 
> 时间：2013-02-26T18:01:39.427
> 
> 标签：java, algorithm, game-physics

我有一个 2d 网格，我正在尝试在所有墙壁之间创建链接。

网格的构造如下：

```
 grid = new State[8][8];
    for (int i = 0; i < 8; i++) {
        for (int j = 0; j < 8; j++) {
            grid[i][j] = State.blank;
        }
    } 
```

我有一个机器人，它应该能够像玩蛇游戏一样穿过墙壁到对面。

因此，例如，如果机器人面向北方并且位于 x[0]y[1] 位置，那么它应该连接到 x[7]y[1]。

机器人还应该能够读取它前面三个街区中的内容，一个在左边，一个在右边，一个在前面。

```
# x = empty space
# R = robot
# S = spaces robots sensors pick up 
```

如果它面向北方，这就是机器人会拾取的东西：

```
[S][S][S][x][x][x][x][x]
[x][R][x][x][x][x][x][x]
[x][x][x][x][x][x][x][x]
[x][x][x][x][x][x][x][x]
[x][x][x][x][x][x][x][x]
[x][x][x][x][x][x][x][x]
[x][x][x][x][x][x][x][x]
[x][x][x][x][x][x][x][x] 
```

同样明智的是，如果机器人面向东方，它会拾取：

```
[x][x][S][x][x][x][x][x]
[x][R][S][x][x][x][x][x]
[x][x][S][x][x][x][x][x]
[x][x][x][x][x][x][x][x]
[x][x][x][x][x][x][x][x]
[x][x][x][x][x][x][x][x]
[x][x][x][x][x][x][x][x]
[x][x][x][x][x][x][x][x] 
```

我遇到的问题是找到正确的算法来确保机器人不仅可以穿过墙壁，还可以通过墙壁读取传感器。

如果机器人位于左上角并面向 NORTH，那么它会像这样读取墙壁：

```
[R][x][x][x][x][x][x][x]
[x][x][x][x][x][x][x][x]
[x][x][x][x][x][x][x][x]
[x][x][x][x][x][x][x][x]
[x][x][x][x][x][x][x][x]
[x][x][x][x][x][x][x][x]
[x][x][x][x][x][x][x][x]
[S][S][x][x][x][x][x][S] 
```

正如你可以想象的那样，我已经尝试过长段的 IF 语句，但是有太多的可能性来覆盖它们而不发疯！

在某些情况下，我还在纸上写下了对 X 和 Y 的更改，但我真的看不到任何暗示算法的模式。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:06:36.800

使用迭代器`x = (x + 1) % array.length`

（或`x = (x - 1) % array.length`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:45:20.453

我将尝试将其分解为不同的部分，希望对您有所帮助。所以，你有一个 8x8 的网格，用 X 和 Y 坐标表示，(0,0) 是左上角，(7,7) 是右下角。您的算法将如下所示：

```
walking through walls:
N -> x = x, y = (y==0)?7:y-1
S -> x = x, y = (y==7)?0:y+1
E -> x = (x==7)?0:x+1, y = y
W -> x = (x==0)?7:x-1, y = y

Look ahead
N -> LH1 = x=x, y=y-1
     LH2 = x=x-1, y=y-1
     LH3 = x=x+1, y=y-1
S -> LH1 = x=x, y=y+1
     LH2 = x=x-1, y=y+1
     LH3 = x=x+1, y=y+1
E -> LH1 = x=x+1, y=y
     LH2 = x=x+1, y=y-1
     LH3 = x=x+1, y=y+1
W -> LH1 = x=x-1, y=y
     LH2 = x=x-1, y=y-1
     LH3 = x=x-1, y=y+1 
```

现在，如果我将此算法转换为 java 方法，它们将如下所示：

```
public int getNextX (int currentX, String direction)
{
    if ("N".equals (direction) || "S".equals (direction))
    {
        return currentX;
    }
    else if ("E".equals (direction))
    {
        return ((currentX==7) ? 0 : currentX + 1);
    }
    else if ("W".equals (direction))
    {
        return ((currentX==0) ? 7 : currentX - 1);
    }
}

public int getNextY (int currentY, String direction)
{
    if ("E".equals (direction) || "W".equals (direction))
    {
        return currentY;
    }
    else if ("S".equals (direction))
    {
        return ((currentY==7) ? 0 : currentY + 1);
    }
    else if ("N".equals (direction))
    {
        return ((currentY==0) ? 7 : currentY - 1);
    }
}

public ArrayList getLookAheads (int currentX, int currentY, String direction)
{
    ArrayList lookAheads = new ArrayList ();
    int x[3];
    int y[3];
    if ("N".equals (direction))
    {
        // LH1
        x[0] = currentX;
        y[0] = currentY - 1;

        // LH2
        x[1] = currentX - 1;
        y[1] = currentY - 1;

        // LH3
        x[2] = currentX + 1;
        y[2] = currentY - 1;
    } 
    else if ("S".equals (direction))
    {
        // LH1
        x[0] = currentX;
        y[0] = currentY + 1;

        // LH2
        x[1] = currentX - 1;
        y[1] = currentY + 1;

        // LH3
        x[2] = currentX + 1;
        y[2] = currentY + 1;
    } 
    else if ("E".equals (direction))
    {
        // LH1
        x[0] = currentX + 1;
        y[0] = currentY;

        // LH2
        x[1] = currentX + 1;
        y[1] = currentY - 1;

        // LH3
        x[2] = currentX + 1;
        y[2] = currentY + 1;
    } 
    else if ("E".equals (direction))
    {
        // LH1
        x[0] = currentX - 1;
        y[0] = currentY;

        // LH2
        x[1] = currentX - 1;
        y[1] = currentY - 1;

        // LH3
        x[2] = currentX - 1;
        y[2] = currentY + 1;
    }

    for (int i=0;i < 3;i++)
    {
        HashMap h = new HashMap ();
        h.put ("X", new Integer (getNextX (x[i], direction)));
        h.put ("Y", new Integer (getNextY (y[i], direction)));

        lookAheads.add (h);
    }

    return lookAheads;
} 
```

我没有测试方法的语法（我只是将它们写在记事本中），所以如果有一些编译错误请见谅，但你应该能够弄清楚。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T19:07:45.420

```
public class Robot {
    public int x;
    public int y;
    public Robot(int x,int y) {
        this.x = x;
        this.y = y;
    }
    public void move(int direction, int steps) {
        switch(direction) {
            case 1: //north
                int temp1 = (x-steps)%8;
                x = temp1<0?(temp1+8):temp1;
                break;
            case 2: //south
                x = (x+steps)%8;
                break;
            case 3: //west
                int temp3 = (y-steps)%8;
                y = temp3<0?(temp3+8):temp3;
                break;
            case 4: //east
                y = (y+steps)%8;
                break;
            default:
                System.out.println("I'm not smart enough to handle the direciton provided!");
        }
    }

    public static void main(String[] args) {
        int[][] grid = new int[8][8];
        Robot robot = new Robot(0,0);
        System.out.println("I'm starting at (0,0).");
        robot.move(3, 9);
        System.out.println("I'm moving west by 9 steps.");
        System.out.println("I've arrived at ("+robot.x+","+robot.y+").");
    }
} 
```

希望上面的代码给出一个想法。我已经测试过了。随意尝试。机器人前面的三个块的计算是相似的。你可以自己想办法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T18:05:42.583

这可以通过使用模数运算符 (%) 非常简单地解决。[模](http://en.wikipedia.org/wiki/Modulus)在某个上限下循环值。所以如果机器人的x值越过最大边界，它就会简单地跳回0。这样机器人就可以穿过右边的一堵墙，x坐标重置回0，它们会出现在左边舞台一侧。

# mysql - 尝试创建带有字段的表时出现mysql错误

> ID：15096072
> 
> 赞同：-2
> 
> 时间：2013-02-26T18:02:06.350
> 
> 标签：mysql

尝试在数据库中创建表时出现此错误..

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'NOT NULL, `call_code_id` INT(11) UNSIGNED NOT NULL, `result_code` ENUM NOT NULL,' at line 1 
```

我做错了什么给我一个错误？这是我的mysql代码。

```
CREATE TABLE  `phone_calls` (

`phone_call_id` INT( 11 ) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY ,
`account_id` INT( 11 ) UNSIGNED NOT NULL ,
`team_id` INT( 11 ) UNSIGNED NOT NULL ,
`campaign_id` INT( 11 ) UNSIGNED NOT NULL ,
`call_code` ENUM NOT NULL ,
`call_code_id` INT( 11 ) UNSIGNED NOT NULL ,
`result_code` ENUM NOT NULL ,
`result_code_id` INT( 11 ) UNSIGNED NOT NULL ,
`time_zone_id` INT( 11 ) UNSIGNED NOT NULL ,
`trigger_on` DATETIME NOT NULL ,
`created_on` DATETIME NOT NULL ,
`first_attempt_on` DATETIME NOT NULL ,
`first_attempt_by` INT( 11 ) UNSIGNED NOT NULL ,
`first_attempt_by_name` CHAR( 30 ) NOT NULL ,
`call_subject` CHAR( 50 ) NOT NULL ,
`status` TINYINT( 2 ) NOT NULL COMMENT  '0= purge, 1=active, 2 = in progress, 3 = completed',
`last_attempt_on` DATETIME NOT NULL ,
`last_attempt_by` INT( 11 ) UNSIGNED NOT NULL ,
`last_attempt_by_name` CHAR( 30 ) NOT NULL ,
`total_attempts` TINYINT( 3 ) NOT NULL DEFAULT  '0',
`modified_by` INT( 11 ) UNSIGNED NOT NULL ,
`modified_by_name` CHAR( 30 ) NOT NULL ,
`client_id` INT( 11 ) UNSIGNED NOT NULL ,
`last_call_id` INT( 11 ) UNSIGNED NOT NULL ,
`call_direction` ENUM NOT NULL COMMENT  'INBOUND or OUTBOUND',
`call_notes` TEXT NOT NULL ,
INDEX (  `account_id` ,  `team_id` ,  `campaign_id` ,  `call_code` ,  `call_code_id` ,  `result_code` ,  `result_code_id` ,  `time_zone_id` ,  `first_attempt_by` ,  `last_attempt_by` ,  `modified_by` ,  `client_id` ,  `last_call_id` )
) ENGINE = MYISAM 
```

非常感谢您的时间:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:06:32.457

您对 ENUM 的定义不正确，请检查：

[文件](http://dev.mysql.com/doc/refman/5.0/en/enum.html)

我相信你可以在那里找到你的答案:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:09:40.830

您需要为每一`enum`列定义可能的值，如下所示：

```
CREATE TABLE  `phone_calls` (
`phone_call_id` INT( 11 ) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY ,
`account_id` INT( 11 ) UNSIGNED NOT NULL ,
`team_id` INT( 11 ) UNSIGNED NOT NULL ,
`campaign_id` INT( 11 ) UNSIGNED NOT NULL ,
`call_code` ENUM('foo','bar') NOT NULL ,
`call_code_id` INT( 11 ) UNSIGNED NOT NULL ,
`result_code` ENUM('foo','bar') NOT NULL ,
`result_code_id` INT( 11 ) UNSIGNED NOT NULL ,
`time_zone_id` INT( 11 ) UNSIGNED NOT NULL ,
`trigger_on` DATETIME NOT NULL ,
`created_on` DATETIME NOT NULL ,
`first_attempt_on` DATETIME NOT NULL ,
`first_attempt_by` INT( 11 ) UNSIGNED NOT NULL ,
`first_attempt_by_name` CHAR( 30 ) NOT NULL ,
`call_subject` CHAR( 50 ) NOT NULL ,
`status` TINYINT( 2 ) NOT NULL COMMENT  '0= purge, 1=active, 2 = in progress, 3 = completed',
`last_attempt_on` DATETIME NOT NULL ,
`last_attempt_by` INT( 11 ) UNSIGNED NOT NULL ,
`last_attempt_by_name` CHAR( 30 ) NOT NULL ,
`total_attempts` TINYINT( 3 ) NOT NULL DEFAULT  '0',
`modified_by` INT( 11 ) UNSIGNED NOT NULL ,
`modified_by_name` CHAR( 30 ) NOT NULL ,
`client_id` INT( 11 ) UNSIGNED NOT NULL ,
`last_call_id` INT( 11 ) UNSIGNED NOT NULL ,
`call_direction` ENUM('foo','bar') NOT NULL COMMENT  'INBOUND or OUTBOUND',
`call_notes` TEXT NOT NULL ,
INDEX (`account_id` ,  `team_id` ,  `campaign_id` ,  `call_code` ,  `call_code_id` , `result_code` ,  `result_code_id` ,  `time_zone_id` ,  `first_attempt_by` ,  `last_attempt_by` ,  `modified_by` ,  `client_id` ,  `last_call_id` )
) ENGINE = MYISAM 
```

另见：[http ://dev.mysql.com/doc/refman/5.0/en/enum.html](http://dev.mysql.com/doc/refman/5.0/en/enum.html)

# c++ - 使用 const 的 C++ 模板特化

> ID：15096084
> 
> 赞同：1
> 
> 时间：2013-02-26T18:02:58.637
> 
> 标签：c++, templates, template-specialization

我显然误解了模板专业化的一些重要内容，因为：

```
template<typename type> const type getInfo(int i) { return 0; }
template<> const char* getInfo<char*>(int i) { return nullptr; } 
```

无法编译：

```
src/main.cpp:19:24: error: no function template matches function
        template specialization 'getInfo' 
```

尽管

```
template<typename type> type getInfo(int i) { return 0; }
template<> char* getInfo<char*>(int i) { return nullptr; } 
```

工作正常。如何使用`const`模板专业化？我的菜鸟错误是什么？

我在 clang++ 上使用 c++11。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T18:05:17.650

请注意，在第一个示例中，返回类型为`const type`，因此`const`适用于整个类型。如果`type`是`char*`（如在您的专业中），则返回类型为 a `char * const`。这编译得很好：

```
template<typename type> const type getInfo(int i) { return 0; }
template<> char* const getInfo<char*>(int i) { return nullptr; } 
```

这是有道理的——如果将类型专门化为指针。为什么模板应该对指针指向的内容有任何发言权？

但是，在这种情况下，我认为没有太多理由让返回类型 be `const`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:13:01.310

如果您需要能够返回字符串常量，只需使用以下命令：

```
template<typename type> type getInfo(int i) { return 0; }
template<> const char* getInfo<const char*>(int i) { return nullptr; } 
```

你试图做的是这样的：

```
const int getInfo( int i ) { return 0; } 
```

这没有多大意义。

# java - EntityManager entityManager.persist(employee) 不在数据库表中保存记录

> ID：15096088
> 
> 赞同：0
> 
> 时间：2013-02-26T18:03:10.960
> 
> 标签：java, spring, hibernate, jpa-2.0

我正在使用 Spring 3 和 Hibernate 4

我在 DAO 类中有以下内容

```
public void create(PersistEmployeee employee){      
        entityManager.persist(employee);

    } 
```

但是没有任何东西保存在数据库中。

我尝试添加`@Transactional`到 method `create`，没有用，添加`@Transactional`到我的 DAO 类中，也没有用。我有`@Transactional(readOnly = false)`EmployeeServiceImpl 类，但这没有帮助。

我在 applicationContext.xml 中有以下内容

```
<tx:annotation-driven transaction-manager="txManager" />
    <tx:annotation-driven transaction-manager="transactionManager" />

<bean id="txManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="SessionFactory" />
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:25:48.937

为什么有两个事务管理器？我不确定复制`annotation-driven`元素的效果，但我想它是在自找麻烦。

# python - Python：单独的进程记录到同一个文件？

> ID：15096090
> 
> 赞同：20
> 
> 时间：2013-02-26T18:03:13.517
> 
> 标签：python, multithreading, logging, nfs

Python 的`logging`库是否为*两个（或更多）单独的 python 进程*记录到同一个文件提供序列化日志记录？从文档（我已阅读）中似乎不清楚。

如果是这样，那么在完全不同的机器上呢（共享日志文件将存在于两者都可以访问的 NFS 导出上）。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-26T18:07:58.377

不，不支持。从 python[日志记录食谱](http://docs.python.org/2/howto/logging-cookbook.html#logging-to-a-single-file-from-multiple-processes)：

> 虽然日志记录是线程安全的，并且支持在单个进程中从多个线程**记录到单个文件，但不支持从多个进程记录到单个文件**，因为没有标准方法可以跨多个进程序列化对单个文件的访问Python 中的进程。

之后，食谱建议使用单个套接字服务器进程来处理日志和向其发送日志消息的其他进程。[在通过网络发送和接收日志事件](http://docs.python.org/2/howto/logging-cookbook.html#sending-and-receiving-logging-events-across-a-network)部分中有一个这种方法的工作示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-20T16:41:01.480

解决这个问题的一个糟糕的解决方案是创建一个日志进程，它在单个线程上侦听套接字，它只输出它接收到的任何内容

关键是劫持套接字队列作为仲裁机制。

```
#! /usr/bin/env python

import sys
import socket
import argparse

p = argparse.ArgumentParser()
p.add_argument("-p", "--port", help="which port to listen on", type=int)
p.add_argument("-b", "--backlog", help="accept backlog size", type=int)
p.add_argument("-s", "--buffersize", help="recv buffer size", type=int)
args = p.parse_args()

port = args.port if args.port else 1339
backlog = args.backlog if args.backlog else 5
size = args.buffersize if args.buffersize else 1024
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
s.bind(('', port))
s.listen(backlog)
print "Listening on port ", port, 'backlog size', backlog, 'buffer size', size, '\n'
while 1:
    try:
        (client, address) = s.accept()
        data = client.recv(size)
        print data
    except:
        client.close() 
```

并对其进行测试：

```
#! /usr/bin/env python

import sys
import socket
import argparse

p = argparse.ArgumentParser()
p.add_argument("-p", "--port", help="send port", action='store', default=1339, type=int)
p.add_argument("text", help="text to send")
args = p.parse_args()

if not args.quit and not args.text:
    p.print_help()
else:
    try:
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        s.connect(('', args.port))
        s.send(args.text)
    except:
        s.close() 
```

然后像这样使用它：

```
stdbuf -o L ./logger.py -b 10 -s 4096 >>logger.log 2>&1 & 
```

并通过以下方式监控最近的活动：

```
tail -f logger.log 
```

任何给定进程的每个日志条目都将自动发出。将其添加到标准日志记录系统中应该不会太难。使用套接字意味着多台机器也可以针对单个日志，托管在专用机器上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-07T10:28:00.483

最简单的方法是使用自定义处理程序进行日志记录，它将所有带有队列的日志从子进程传递到主进程，并在那里记录它。以这种方式，例如在您拥有主 UI 线程和工作线程的客户端应用程序上工作日志记录。

同样在 POSIX 系统上，您可以在附加模式下使用日志记录。最多 4kb 它将是原子的。

# html - doctype 在浏览器中究竟是如何工作的？以及 xml 命名空间究竟是如何工作的？

> ID：15096095
> 
> 赞同：-1
> 
> 时间：2013-02-26T18:03:31.460
> 
> 标签：html, xml, jsf, primefaces, namespaces

考虑简单：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

这基本上告诉浏览器根据一些规则来操作标签。那么这些规则真的是从[http://www.w3.org/TR/html4/strict.dtd](http://www.w3.org/TR/html4/strict.dtd)读取的吗？如果这个网站宕机了怎么办？

此外，例如，在使用 Primefaces 的简单 JSF 页面中，您将从：

```
xmlns:p="http://primefaces.org/ui" 
```

这样您就可以使用 p: 标签和 Primefaces 组件..

[这里的“ http://primefaces.org/ui](http://primefaces.org/ui) ”到底是什么？它是否引用 primefaces.jar ？如果是这样，怎么做？它真的连接到：“ [http://primefaces.org/ui](http://primefaces.org/ui) ”吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:05:04.493

不。

这些是 URI——统一资源**标识符**。

它们用作文档类型或命名空间的唯一标识符，但它们不与 HTTP 一起使用。

# hibernate - 管理数据库实体管理器的好方法

> ID：15096099
> 
> 赞同：0
> 
> 时间：2013-02-26T18:03:43.767
> 
> 标签：hibernate, ejb, persistence, ejb-3.1

[遵循此线程](https://stackoverflow.com/questions/15076178/selectonemenu-selected-value)中给我的建议

我正在制作我的 DAO 访问器 @Singleton、@Startup、@LocalBean

我的问题是关于实现应该执行各种查询的 entityManager 的好方法。

知道有几个 Dao，但它们都指向同一个 entityManager（也是从单个 entityManagerFactory 创建的），最佳实践是什么？

到目前为止，这是我的实现，但我觉得它很糟糕:)

道氏

```
@Singleton
@LocalBean
@Startup
public class AircraftTypeDaoImpl extends DatabaseAccessor implements
        AircraftTypeDao {

    /** JPQL query to find a {@link AircraftType} given its OACI name */
    private static final String JPQL_FIND_BY_TYPE = "SELECT a FROM AircraftType a WHERE a.typeOACI=:typeOACI";

    /** JPQL query to find all {@link AircraftType} */
    private static final String JPQL_FIND_ALL = "SELECT a FROM AircraftType a";

    @Override
    public AircraftType find(String typeOACI) throws DAOException {
        AircraftType aircraftType = null;
        try {
            begin();
            Query findQuery = em.createQuery(JPQL_FIND_BY_TYPE).setParameter(
                    "typeOACI", typeOACI);
            aircraftType = (AircraftType) findQuery.getSingleResult();
        } catch (NoResultException e) {
            aircraftType = null;
            rollback();
        } catch (Exception e) {
            rollback();
            throw new DAOException(e);
        } finally {
            commit();
        }
        return aircraftType;
    }

    @Override
    public List<AircraftType> findAll() throws DAOException {
        List<AircraftType> types = null;
        try {
            begin();
            TypedQuery<AircraftType> findQuery = em.createQuery(JPQL_FIND_ALL,
                    AircraftType.class);
            types = findQuery.getResultList();
        } catch (NoResultException e) {
            types = new ArrayList<AircraftType>();
            rollback();
        } catch (Exception e) {
            rollback();
            throw new DAOException(e);
        } finally {
            commit();
        }
        return types;
    }

}

@Singleton
@LocalBean
@Startup
public class VariantDaoImpl extends DatabaseAccessor implements VariantDao {

    /** JPQL query to find a {@link Variant} given its variant name */
    private static final String JPQL_FIND_BY_NAME = "SELECT v FROM Variant v WHERE v.variantName=:variantName";

    /**
     * JPQL query to find all {@link Variant} given their associated
     * {@link AircraftType}
     */
    private static final String JPQL_FIND_BY_AC_TYPE = "SELECT v FROM Variant v WHERE v.type.typeOACI=:typeOACI";

    @Override
    public Variant find(String variantName) throws DAOException {
        Variant variant = null;
        try {
            begin();
            Query findQuery = em.createQuery(JPQL_FIND_BY_NAME).setParameter(
                    "variantName", variantName);
            variant = (Variant) findQuery.getSingleResult();
        } catch (NoResultException e) {
            variant = null;
            rollback();
        } catch (Exception e) {
            rollback();
            throw new DAOException(e);
        } finally {
            commit();
        }
        return variant;
    }

    @Override
    public List<Variant> find(AircraftType aircraftType) throws DAOException {
        List<Variant> variants = null;
        try {
            begin();
            TypedQuery<Variant> findQuery = em.createQuery(
                    JPQL_FIND_BY_AC_TYPE, Variant.class).setParameter(
                    "typeOACI", aircraftType.getTypeOACI());
            variants = findQuery.getResultList();
        } catch (NoResultException e) {
            variants = new ArrayList<Variant>();
            rollback();
        } catch (Exception e) {
            rollback();
            throw new DAOException(e);
        } finally {
            commit();
        }
        return variants;
    }

} 
```

“妈妈班”

```
public abstract class DatabaseAccessor {

    protected EntityManager em;

    private EntityTransaction tx;

    public DatabaseAccessor() {
        em = Persistence.createEntityManagerFactory("database")
                .createEntityManager();
    }

    public void begin() {
        tx = em.getTransaction();
        tx.begin();
    }

    public void commit() {
        tx.commit();
    }

    public void rollback() {
        tx.rollback();
    }

} 
```

编辑

好的，我简化了混乱

我所有的 DAO 现在都是这样

```
@Singleton
@LocalBean
@Startup
public class AircraftTypeDaoImpl implements AircraftTypeDao {

    @PersistenceContext
    protected EntityManager em;

    /** JPQL query to find a {@link AircraftType} given its OACI name */
    private static final String JPQL_FIND_BY_TYPE = "SELECT a FROM AircraftType a WHERE a.typeOACI=:typeOACI";

    /** JPQL query to find all {@link AircraftType} */
    private static final String JPQL_FIND_ALL = "SELECT a FROM AircraftType a";

    @Override
    public AircraftType find(String typeOACI) throws DAOException {
        AircraftType aircraftType = null;
        try {
            Query findQuery = em.createQuery(JPQL_FIND_BY_TYPE).setParameter(
                    "typeOACI", typeOACI);
            aircraftType = (AircraftType) findQuery.getSingleResult();
        } catch (NoResultException e) {
            aircraftType = null;
        } catch (Exception e) {
            throw new DAOException(e);
        }
        return aircraftType;
    }

    @Override
    public List<AircraftType> findAll() throws DAOException {
        List<AircraftType> types = null;
        try {
            TypedQuery<AircraftType> findQuery = em.createQuery(JPQL_FIND_ALL,
                    AircraftType.class);
            types = findQuery.getResultList();
        } catch (NoResultException e) {
            types = new ArrayList<AircraftType>();
        } catch (Exception e) {
            throw new DAOException(e);
        }
        return types;
    }

} 
```

我的persistence.xml是这样的

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="flightfaq">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="hibernate.archive.autodetection" value="class, hbm"/>
            <property name="hibernate.connection.username" value="root"/>
            <property name="hibernate.connection.password" value="password"/>
            <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/flightfaq"/>
            <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
            <property name="hibernate.hbm2ddl.auto" value="update"/>
            <property name="hibernate.c3p0.min_size" value="5"/>
            <property name="hibernate.c3p0.max_size" value="20"/>
            <property name="hibernate.c3p0.timeout" value="300"/>
            <property name="hibernate.c3p0.max_statements" value="50"/>
            <property name="hibernate.c3p0.idle_test_period" value="3000"/>
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.format_sql" value="true"/>
            <property name="use_sql_comments" value="true"/>
            <property name="jadira.usertype.autoRegisterUserTypes" value="true"/>
        </properties>
    </persistence-unit>
</persistence> 
```

在 TomEE 上部署应用程序时，我得到

```
26 févr. 2013 21:01:41 org.apache.openejb.config.ConfigurationFactory configureApplication
INFO: Configuring enterprise application: /Users/valentine/jbossworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/FlightFAQ
26 févr. 2013 21:01:43 org.apache.openejb.config.InitEjbDeployments deploy
INFO: Auto-deploying ejb CustomerDaoImpl: EjbDeployment(deployment-id=CustomerDaoImpl)
26 févr. 2013 21:01:43 org.apache.openejb.config.InitEjbDeployments deploy
INFO: Auto-deploying ejb AircraftTypeDaoImpl: EjbDeployment(deployment-id=AircraftTypeDaoImpl)
26 févr. 2013 21:01:43 org.apache.openejb.config.InitEjbDeployments deploy
INFO: Auto-deploying ejb VariantDaoImpl: EjbDeployment(deployment-id=VariantDaoImpl)
26 févr. 2013 21:01:43 org.apache.openejb.config.InitEjbDeployments deploy
INFO: Auto-deploying ejb FlightFaqUserDaoImpl: EjbDeployment(deployment-id=FlightFaqUserDaoImpl)
26 févr. 2013 21:01:43 org.apache.openejb.config.InitEjbDeployments deploy
INFO: Auto-deploying ejb AirportDaoImpl: EjbDeployment(deployment-id=AirportDaoImpl)
26 févr. 2013 21:01:43 org.apache.openejb.config.InitEjbDeployments deploy
INFO: Auto-deploying ejb LegDaoImpl: EjbDeployment(deployment-id=LegDaoImpl)
26 févr. 2013 21:01:43 org.apache.openejb.config.InitEjbDeployments deploy
INFO: Auto-deploying ejb MissionDaoImpl: EjbDeployment(deployment-id=MissionDaoImpl)
26 févr. 2013 21:01:43 org.apache.openejb.config.AutoConfig deploy
INFO: Configuring PersistenceUnit(name=flightfaq, provider=org.hibernate.ejb.HibernatePersistence)
26 févr. 2013 21:01:43 org.apache.openejb.config.AutoConfig setJtaDataSource
INFO: Adjusting PersistenceUnit flightfaq <jta-data-source> to Resource ID 'My DataSource' from 'null'
26 févr. 2013 21:01:43 org.apache.openejb.config.AutoConfig setNonJtaDataSource
INFO: Adjusting PersistenceUnit flightfaq <non-jta-data-source> to Resource ID 'My Unmanaged DataSource' from 'null'
26 févr. 2013 21:01:43 org.apache.openejb.config.AppInfoBuilder build
INFO: Enterprise application "/Users/valentine/jbossworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/FlightFAQ" loaded.
26 févr. 2013 21:01:43 org.apache.openejb.assembler.classic.Assembler createApplication
INFO: Assembling app: /Users/valentine/jbossworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/FlightFAQ
26 févr. 2013 21:01:44 org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
26 févr. 2013 21:01:44 org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.1.9.Final}
26 févr. 2013 21:01:44 org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
26 févr. 2013 21:01:44 org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
26 févr. 2013 21:01:44 org.hibernate.ejb.Ejb3Configuration configure
INFO: HHH000204: Processing PersistenceUnitInfo [
    name: flightfaq
    ...]
26 févr. 2013 21:01:44 org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator instantiateExplicitConnectionProvider
INFO: HHH000130: Instantiating explicit connection provider: org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider
26 févr. 2013 21:02:05 com.sun.faces.mgbean.BeanManager addBean
ATTENTION: JSF1074 : Le bean géré nommé «startup» a déjà été enregistré.  Remplacement du type de classe du bean géré existant java.util.Date par java.util.Date.
26 févr. 2013 21:02:05 com.sun.faces.mgbean.BeanManager addBean
ATTENTION: JSF1074 : Le bean géré nommé «now» a déjà été enregistré.  Remplacement du type de classe du bean géré existant java.util.Date par java.util.Date.
26 févr. 2013 21:02:07 org.richfaces.application.InitializationListener logWarningWhenConnectionFactoryPresent
ATTENTION: JMS API was found on the classpath; if you want to enable RichFaces Push JMS integration, set context-param 'org.richfaces.push.jms.enabled' in web.xml
26 févr. 2013 21:02:07 org.apache.catalina.session.StandardManager doLoad
GRAVE: "ClassNotFoundException" lors du chargement de sessions persistantes: java.lang.ClassNotFoundException: com.flightfaq.dao.impl.AircraftTypeDaoImpl$LocalBeanProxy
java.lang.ClassNotFoundException: com.flightfaq.dao.impl.AircraftTypeDaoImpl$LocalBeanProxy
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at org.apache.tomee.catalina.LazyStopWebappClassLoader.loadClass(LazyStopWebappClassLoader.java:98)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:249)
    at org.apache.catalina.util.CustomObjectInputStream.resolveClass(CustomObjectInputStream.java:76)
    at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1572)
    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1493)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1729)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1326)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1950)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1874)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1756)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1326)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)
    at java.util.HashMap.readObject(HashMap.java:1030)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:969)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1852)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1756)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1326)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1950)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1874)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1756)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1326)
    at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1664)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1320)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)
    at java.util.HashMap.readObject(HashMap.java:1030)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:969)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1852)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1756)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1326)
    at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1664)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1320)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)
    at java.util.HashMap.readObject(HashMap.java:1030)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:969)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1852)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1756)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1326)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)
    at java.util.HashMap.readObject(HashMap.java:1030)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:969)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1852)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1756)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1326)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)
    at org.apache.catalina.session.StandardSession.readObject(StandardSession.java:1595)
    at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:1060)
    at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:284)
    at org.apache.catalina.session.StandardManager.load(StandardManager.java:204)
    at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:491)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680)
26 févr. 2013 21:02:07 org.apache.catalina.session.StandardManager startInternal
GRAVE: Exception au chargement des sessions depuis le stockage persistant (persistent storage)
java.lang.ClassNotFoundException: com.flightfaq.dao.impl.AircraftTypeDaoImpl$LocalBeanProxy
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at org.apache.tomee.catalina.LazyStopWebappClassLoader.loadClass(LazyStopWebappClassLoader.java:98)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:249)
    at org.apache.catalina.util.CustomObjectInputStream.resolveClass(CustomObjectInputStream.java:76)
    at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1572)
    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1493)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1729)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1326)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1950)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1874)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1756)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1326)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)
    at java.util.HashMap.readObject(HashMap.java:1030)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:969)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1852)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1756)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1326)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1950)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1874)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1756)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1326)
    at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1664)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1320)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)
    at java.util.HashMap.readObject(HashMap.java:1030)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:969)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1852)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1756)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1326)
    at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1664)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1320)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)
    at java.util.HashMap.readObject(HashMap.java:1030)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:969)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1852)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1756)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1326)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)
    at java.util.HashMap.readObject(HashMap.java:1030)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:969)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1852)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1756)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1326)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)
    at org.apache.catalina.session.StandardSession.readObject(StandardSession.java:1595)
    at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:1060)
    at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:284)
    at org.apache.catalina.session.StandardManager.load(StandardManager.java:204)
    at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:491)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680) 
```

似乎各种 DAO 的部署正确，但是在我的 DAO 的 LocalProxy 版本上没有找到类异常？你能解释一下吗？网络服务器有问题吗？如何检查它是否与那种操作兼容（@PersistenceContext 等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:08:46.640

它看起来有点像使用 JTA 事务和容器管理的持久性上下文开箱即用的东西的自我滚动部分实现。

此外，在这种情况下使用具有默认并发（容器管理，WRITE）的[Singleton](http://docs.oracle.com/javaee/6/api/javax/ejb/Singleton.html)也会导致严重的性能下降，因为它会限制方法的并发执行。数据库查询可能需要相对较长的时间，并且可能没有理由一次只执行其中一个。正如 EJB 3.1 规范中所说：

> 默认情况下，如果未指定并发管理类型，则单例 bean 具有容器管理的并发划分。
> ...
> 如果未指定并发锁定属性，则假定为 Lock(WRITE)。bean 类上没有并发属性规范等价于 bean 类上的 Lock(WRITE) 规范。
> ...
> 如果容器调用与写入锁关联的方法，则在初始写入方法的处理完成之前，不允许进行其他并发调用。

如果没有特定的理由不使用容器管理的 EntityManager，下面的[Java EE 6 教程](http://docs.oracle.com/cd/E19798-01/821-1841/bnbqy/index.html)摘录解释了为什么不需要使用容器管理的 EntityManager 传递 EntityManager 的单个实例：

> JTA 事务通常涉及跨应用程序组件的调用。要完成 JTA 事务，这些组件通常需要访问单个持久性上下文。当通过 javax.persistence.PersistenceContext 注解将 EntityManager 注入应用程序组件时，就会发生这种情况。持久性上下文会随着当前 JTA 事务自动传播，映射到同一持久性单元的 EntityManager 引用提供对该事务内持久性上下文的访问。通过自动传播持久性上下文，应用程序组件不需要将 EntityManager 实例的引用传递给彼此，以便在单个事务中进行更改。Java EE 容器管理容器管理的实体管理器的生命周期。

# reporting-services - 报告中缺少 SSRS 2008 R2 订阅选项卡

> ID：15096100
> 
> 赞同：0
> 
> 时间：2013-02-26T18:03:47.417
> 
> 标签：reporting-services, ssrs-2008

我公司的一些报告有一个**“我的订阅”**选项卡，还有一个**“新订阅”**按钮：

![在此处输入图像描述](../Images/85917bf5c99b3791d7231a79b2bb115d.png)

我正在使用 Reporting Services 处理不同的 SQL Server 2008 R2。我的 PC 上有 Visual Studio 2008。我写的报告没有任何这些，或任何其他“用户友好”的方式来订阅报告。

根据[this 2010年9月的帖子](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/52aab8fb-9f57-45df-9ae7-c3d8dd218a22/)，就是这样。

有没有更多关于这方面的最新信息？还是有其他出路？

谢谢！

补充：但根据[这篇](http://msdn.microsoft.com/en-us/library/ms157386%28v=sql.105%29.aspx)关于 2008 R2 的 MSDN 文章，它似乎暗示应该有一个订阅选项卡......

这是我 PC 上的 SQL 服务器：

![SQL Server 在我的 PC 上安装了软件](../Images/2ff92db0e2063749fea76abc720a0b14.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:42:50.073

MSDN 文章指的是打开报告并单击 SQL Server 2008 R2 的订阅选项卡 - 这是不正确的。

在 2008 R2 中，要订阅报告，您首先要在报告管理器中找到报告，然后将光标*悬停*在报告链接上。这会突出显示一个下拉箭头，单击它并从菜单中选择“订阅”。

![报告管理器订阅链接](../Images/e8eff39ec80c08537f3cf037a7954222.png)

或者，如果您有权“管理”报告，则可以单击“管理”，然后左侧列出“订阅”选项卡。

![订阅标签](../Images/dec2f3a51c154a52f08b043d333d4ed7.png)

“我的订阅”应该可以从报告管理器屏幕右上角的链接访问。

# scheme - 递归函数

> ID：15096103
> 
> 赞同：0
> 
> 时间：2013-02-26T18:04:09.593
> 
> 标签：scheme, racket

我做了函数搜索，它接受一个 los，一个数字，并返回列表的第 num 个符号。简单的

```
(define (search los num)
  (cond
    [(empty? los) empty]
    [(zero? num) (first los)]
    [else (lookup (rest los) (- num 1))]))

(check-expect (lookup (list 'a 'b 'c 'd) 0) 'a) 
```

但我无法弄清楚如何设计一个函数，该函数接受一个 los（符号列表）、一个符号（s）和一个数字（numth），并返回 los，并将第 numth 个符号替换为 s。

像这样的东西-

```
(change (list 'a 'b 'c 'd) 'hello 2) ;==> (list 'a 'b 'hello 'd)
(change (list 'a 'b 'c 'd) 'hi 0) ;==> (list 'hi 'b 'c 'd) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:18:16.750

首先，考虑如何复制列表。这不会涉及`num`参数。

然后，如果列表元素为 0，则使用相同的`num`递减方法`search`来替换（而不是复制）列表元素`num`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T18:18:42.083

这是一个解决方案：

```
(define (change los s num)
  (cond ((null? los) '())
        ((< num 0) los)
        ((= num 0) (cons s (cdr los)))
        (else (cons (car los) (change (cdr los) s (- num 1)))))) 
```

基本上，这个想法是递归地重新创建列表，但有一个转折（用 s 替换第 n 个符号）。

因此，要递归地“重新创建”列表，我可以：

```
(define (lst los)
  (if (null? los)
    '()
    (cons (car los) (lst (cdr los))))) 
```

我们的参数为`change`我们提供了要替换的符号和要替换的位置。所以我们倒计时，重新创建列表直到那个点。然后，当我们倒计时到 0 时，我们可以将列表中的当前符号替换为新符号，只需将其替换为当前符号即可。我添加`< 0`支票只是因为。

# php - php mysql + 会话错误

> ID：15096105
> 
> 赞同：0
> 
> 时间：2013-02-26T18:04:16.273
> 
> 标签：php, mysql, session, cookies

我正在创建一个包含登录页面、个人资料页面和注销页面的网站。我正在使用会话，但我在处理会话时遇到问题，我无法理解错误是什么或在哪里修复它。

我得到的错误是在 profile.php`**(("you need to be loged in to view profiles"))line 8**` 任何人有想法或解决方案请给我打电话

# 登录.php

```
<?php 

 require_once('for members/scripts/global.php'); 

$message = "";
if(isset($_POST['email'])){

  $email = $_POST['email'];
  $pass = $_POST['pass'];

  //error handeling
  if((!$email)||(!$pass)){
  $message = "please insert both fields";

  }else{
   // secure data
   $email = mysql_real_escape_string($email);
   $pass = sha1($pass);
   $query = mysql_query("SELECT * FROM members WHERE email='$email'AND password='$pass'LIMIT 1")or die(mysql_error());
   $count_query = mysql_num_rows($query);
   if($count_query == 0){
   $message = "the information was incorrect!";
   }else{
   //start the sessions
   $_SESSION['pass']=$pass;
   while($row = mysql_fetch_array($query)){
       $username = $row['username'];
       $id = $row['id'];

    }
    $_SESSION['username'] = $username;
    $_SESSION['id'] = $id;

    /* to create a cookie on the HDD OF THE user 
    if($remember == "yes"){
    //create the cookies
    setcookie("id_cookie", $id, time()+60*60*24*100,"/");
    setcookie("pass_cookie", $pass, time()+60*60*24*100,"/");
    }
    */

     header("Location:profile.php");
   }
  }

}

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<link href="style/stylesheet.css"rel="stylesheet" type="text/css"/>
</head>

<body>

<div class="container center"> 

<p><?php print("$message") ?></p>
<form action="login.php" method="post">
<input type="text" name="email" placeholder="Email Adress" /><br />

<input type="password" name="pass" placeholder="Password" /><br />

<input type="submit" name="login" value="Login" />

 <a href="register.php"><strong> Register</strong></a>

</form>
</div>

</body>
</html> 
```

# 配置文件.php

```
<?php  
ob_start();
session_start();

require_once('for members/scripts/global.php'); 

if($logged == 0){
 echo("you need to be loged in to view profiles");
 exit();
}
if(isset($_GET['id'])){
 $id=$_GET['id'];
 $id= preg_replace("#[^0-9]#","",$id);

}else{
$id=$_SESSION['id'];
}
//collect member information
$query = mysql_query("SELECT * FROM members WHERE id='$id'LIMIT 1") or die("could not collect user information ");
$count_mem = mysql_num_rows($query);
if($count_mem == 0){
 echo("the user does not exit");
 exit();

}
while($row = mysql_fetch_array($query)){
  $username = $row['username'];
  $fname = $row['firstname'];
  $lname = $row['lastname'];
  $profile_id= $row['id'];

  if($session_id == $profile_id){
  $owner = true;
  }else{
   $owner = false;

  }

}

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title><?php print("$fname"); ?> <?php print("$lname"); ?>'s profile</title>
<link href="style/stylesheet.css" type="text/css"/>
</head>

<body>
<div class="container center"> 
<h1><?php print("$username"); ?></h1>
<?php
if($owner == true ){
    header("Location: profile.php");
?>
<!--
<a href="#">edit profile</a><br />
<a href="#">account settings</a><br />
-->
<?php
}else{
    header("Location: index.php");
?>
<!--
<a href="#">private message</a><br />
<a href="#">add as friend</a><br />
--> 
<?php
}
?>
</div>
</body>
</html>
<?php flush(); ?> 
```

# 注销.php

```
<?php
session_start();

session_destroy();
/*
if(isset($_COOKIE['id_cookie'])){

setcookie("id_cookie", "", time()-50000,"/");

setcookie("pass_cookie", "", time()-50000,"/");

}
*/
if(isset($_SESSION['username'])){ 
echo("we could not log out try again!");
exit();
}else{
 header("Location: home.php");

}

?> 
```

# 全局.php

```
<?php
if(!isset($_SESSION))
{
session_start();
} 

require_once('connect.php'); 

//checking if sessions are set

if(isset($_SESSION['username'])){
 $session_username = $_SESSION['username'];
 $session_pass = $_SESSION['pass'];
 $session_id = $_SESSION['id'];

 //check if the member exist
 $query = mysql_query("SELECT * FROM members WHERE id='$session_id' AND password='$session_pass'LIMIT 1")or die("could not ");
$count_count = mysql_num_rows($query);
if($count_count == 0){
//loged in stuff here
$logged = 1;

 while($row = mysql_fetch_array($query)){
     $session_username = $row['username'];
  }
  //create sessions
$_SESSION['username'] = $session_username;
$_SESSION['id'] = $session_id;
$_SESSION['pass'] = $session_pass;

}else{
 header("Location: logout.php");
exit();
}

}
$logged = 0;
/*
elseif(isset($_COOKIE['id_cookie'])){
    $session_id = $_COOKIE['id_cookie'];
    $session_pass = $_COOKIE['pass_cookie'];

 $query = mysql_query("SELECT * FROM members WHERE id='$session_id' AND password='$session_pass'LIMIT 1")or die("could not ");
$count_count = mysql_num_rows($query);
if($count_count > 0){

//loged in stuff here
$logged = 1;
}else{
 header("Location: logout.php");
exit();
 }
 //if user is not log in

}
*/

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:48:09.187

您所写的内容可能有一些问题。`$logged == 0`我想是在 global.php 中定义的。它是否也在其中启动会话（即，您`session_start()`在 global.php 中是否有）？

据我所知，`$logged`可能是任何东西，因此您会收到错误消息。如果不在 global.php 中，也应该在 logging.php 中启动会话。

好的。从 global.php 中取出所有内容。如果您只想保留 session_start()，但将其从 login.php 和 profile.php 中删除。

然后，您必须将针对数据库检查密码和用户名的 sql 查询移动到 login.php 而不是 global.php 并像这样。

```
 //check if the member exist
 $query = mysql_query("SELECT * FROM members WHERE id='$session_id' AND   password='$session_pass'LIMIT 1")or die("could not ");
$count_count = mysql_num_rows($query);
if($count_count == 0){
//loged in stuff here
$logged = 1;
header("Location: profile.php");

 while($row = mysql_fetch_array($query)){
     $session_username = $row['username'];
  }
  //create sessions
$_SESSION['username'] = $session_username;
$_SESSION['id'] = $session_id;
$_SESSION['pass'] = $session_pass;

}else{
 $logged = 0;
 header("Location: logout.php");
exit();
} 
```

你在 login.php 中不需要这些（用上面的代码替换它们）

```
$message = "";
if(isset($_POST['email'])){

  $email = $_POST['email'];
  $pass = $_POST['pass'];

  //error handeling
  if((!$email)||(!$pass)){
  $message = "please insert both fields";

  }else{
   // secure data
   $email = mysql_real_escape_string($email);
   $pass = sha1($pass);
   $query = mysql_query("SELECT * FROM members WHERE email='$email'AND password='$pass'LIMIT 1")or die(mysql_error());
   $count_query = mysql_num_rows($query);
   if($count_query == 0){
   $message = "the information was incorrect!";
   }else{
   //start the sessions
   $_SESSION['pass']=$pass;
   while($row = mysql_fetch_array($query)){
       $username = $row['username'];
       $id = $row['id'];

    }
    $_SESSION['username'] = $username;
    $_SESSION['id'] = $id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:14:11.060

您在使用login.php 页面中`$_SESSION`没有正确启动会话的情况下使用。`session_start()`

# cakephp - CakePHP 1.3 和 TCPDF：打印 PDF 后如何返回控制器

> ID：15096109
> 
> 赞同：0
> 
> 时间：2013-02-26T18:04:32.007
> 
> 标签：cakephp, tcpdf

我正在使用 CakePHP 1.3 和 TCPDF 打印 PDF 文件，使用`print_pdf.ctp`. 打印后，我无法将页面重定向到引荐来源网址。未达到控制器操作的注释部分。我该如何管理？

请注意，`print_pdf()`它链接到一个按钮。因此，用户加载一个页面，按下链接到`print_pdf`操作的“打印”按钮，并在单击此按钮时打印一个 PDF 文件。我想重定向的原因是该`print_pdf`操作更新了一些数据，并且需要刷新按钮所在的页面以反映此更新。

控制器：

```
// This action is linked to a button
function print_pdf() {
    ...    
    $this->layout = 'pdf'; //this will use the pdf.ctp layout
    $this->render();   

    // Line below are not executed
    ...
    $this->redirect($this->referer());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:35:31.353

我仍然不完全确定我理解你想要做什么。您正在尝试重定向到另一个页面以保存一些信息，然后立即向该人显示 PDF？

为什么不从 PDF 函数中运行保存您所做的任何操作：

```
// This action is linked to a button
function print_pdf() {
    ...
    //$this->redirect($this->referer());
    //Put whatever you were going to redirect to before the render.  Instead of  redirecting just run the thing as part of this function.
    ...    
    $this->layout = 'pdf'; //this will use the pdf.ctp layout
    // Line below are not executed
    $this->render();     
} 
```

$this->render(); 应该逃离控制器并直接进入视图。你不能在它后面放任何东西。如果您想使用按钮对页面进行更改，您可以在渲染之前执行此操作。

# oauth - Tridion UGC 服务和 oAuth 身份验证

> ID：15096111
> 
> 赞同：5
> 
> 时间：2013-02-26T18:04:33.987
> 
> 标签：oauth, tridion, odata, tridion-2011, tridion-content-delivery

我在尝试向 UGC 发出网络请求并使用 oAuth 进行身份验证时遇到问题。我正在发出一个网络请求，例如：-

```
WebRequest wr = WebRequest.Create("http://ugc.service/odata.svc/Ratings(Id=200)");
wr.Headers["authorization"] = "OAuth " + auth; 
```

其中 auth 是我从 access_token.svc 返回的令牌。根据文档，从服务返回的令牌应该类似于：-

HufXeuUt%2FYYElA8SYjJOkUkrXxV9dyXRirmKhjW%2Fb%2FU%3D

但是，我从 access_token.svc 返回的更像是：-

{"access_token":"client_id%3dtestuser%26expiresOn%3d1361898714646%26digest%3d%2fW%2fvyhQneZHrm1aGhwOlgLtA9xGWd77hkxWbjmindtM%3d","expires_in":300}

我已经解析了 JSON 以提取各种字符串并尝试将这些字符串传递给授权，但无论我尝试什么，我都会在日志中得到一个错误 - “ERROR OAuth2AccessToken - Digest is wrong”。我应该通过令牌的哪一部分以及以什么格式进行授权？

非常感谢

约翰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T14:58:46.240

就像你提到的，协议是这样的：

1.  您向访问令牌端点发出 post 请求以获取令牌（您需要在此处提供您的 client_id 和您的 client_secret 作为标头或查询参数）；

2.  你会得到类似这样的答案：`{"access_token":"sometoken","expires_in":300}`; 2.1 值得知道的是，令牌是 url 编码的，并且是 UTF-8 格式，所以在 Java 端你需要做`URLDecoder.decode("sometoken", "UTF-8");`，而在 .NET 端你需要做`HttpUtility.UrlDecode("sometoken", System.Text.Encoding.UTF8);`；

3.  您的下一个请求需要包含授权标头。在 Java 方面，您`builder.header("authorization", "OAuth " + decodedTokenString);`可以在 .NET 方面使用`Client.Headers["authorization"] = "OAuth " + DecodedTokenString;`

值得一提的是，`/Configuration/AuthenticationServer/SharedSecret/`TokenAccessPoint的cd_webservice_conf.xml()中定义的SharedSecret需要与`/Configuration/Security/SharedSecret/`(WebService)EndPoint的cd_ambient_conf.xml()中定义的SharedSecret相同。

您确定您正确解码了从服务器获取的令牌吗？您确定在两个配置文件中配置了正确的 SharedSecret 吗？

希望这可以帮助。

# c# - 如何在 csproj 文件中设置 LIB 环境变量？

> ID：15096112
> 
> 赞同：0
> 
> 时间：2013-02-26T18:04:34.607
> 
> 标签：c#, visual-studio, msbuild

我在环境变量`LIB`设置为“--must-override--”的系统上运行。我无法更改系统本身的变量值。

在 Visual Studio 中，编译期间会检查 LIB 变量。因为它设置为垃圾值，所以我在构建中收到警告：

> 'LIB 环境变量'中指定的无效搜索路径'--must-override--' - '系统找不到指定的路径。

我想摆脱这个警告。为此，我需要将`LIB`VS 使用的环境变量的值覆盖为 NULL 或指向真实路径的某个值。

由于我无法更改环境中变量的值，因此我需要在 csproj 文件本身中进行更改。我尝试将其设置在属性组中无济于事：

```
<PropertyGroup>
    <Lib></Lib>
</PropertyGroup> 
```

关于如何设置这个变量的任何想法？或者如果它甚至可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:18:06.213

您可以使用`Exec`任务来破坏它，或者您可以编写自己的`Task`来设置它们 - 这是“让我们用 Exec 破坏”路线：

```
<PropertyGroup>
    <!-- 
      need the CData since this blob is just going to
      be embedded in a mini batch file by studio/msbuild
    -->
    <LibSetter><![CDATA[
set Lib=C:\Foo\Bar\Baz
set AnyOtherEnvVariable=Hello!
]]></LibSetter>
</PropertyGroup>

<Exec Command="$(LibSetter)" /> 
```

编辑：所以我只是把这个 csproj 和基础知识一起扔了——我已经确认它们在我运行它们时设置正确——我也添加了 inline-Task 方法。

```
<?xml version="1.0" encoding="utf-8" ?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

    <UsingTask 
        TaskName="EnvVarSet" 
        TaskFactory="CodeTaskFactory" 
        AssemblyFile="$(MSBuildToolsPath)\Microsoft.Build.Tasks.v4.0.dll">
        <ParameterGroup>
          <VarName ParameterType="System.String" Required="true"/>
          <VarValue ParameterType="System.String" Required="true" />
        </ParameterGroup>
        <Task>
            <Code Type="Fragment" Language="cs">
                <![CDATA[
                    Console.WriteLine("Setting var name {0} to {1}...", VarName, VarValue);
                    System.Environment.SetEnvironmentVariable(VarName, VarValue);
                    Console.WriteLine("{0}={1}", VarName, VarValue);
                ]]>
            </Code>
        </Task>
    </UsingTask>

    <Target Name="ThingThatNeedsEnvironmentVars">
        <CallTarget Targets="FiddleWithEnvironmentVars"/>
        <Message Text="LIB environment var is now: $([System.Environment]::GetEnvironmentVariable('LIB'))"/>
    </Target>

    <Target Name="FiddleWithEnvironmentVars">
        <Message Text="LIB environment var is now: $([System.Environment]::GetEnvironmentVariable('LIB'))"/>
        <EnvVarSet VarName="LIB" VarValue="C:\temp"/>
        <Message Text="LIB environment var is now: $([System.Environment]::GetEnvironmentVariable('LIB'))"/>
    </Target>
</Project> 
```

# php - 在 PHP（oracle 数据库）中使用 OCI 强制不区分大小写

> ID：15096118
> 
> 赞同：0
> 
> 时间：2013-02-26T18:04:54.547
> 
> 标签：php, oracle

嗯，标题解释的很好……

我正在使用[OCI](http://php.net/manual/es/book.oci8.php)在 PHP 中探索 Oracle 数据库。

问题是数据库区分大小写，所以......当我执行类似的句子时

```
SELECT COUNT(username) count, username FROM transactions WHERE username IS NOT NULL GROUP BY username 
```

返回一个这样的数组

```
COUNT USERNAME
213   EMG_COTORA
31    EMG_cotora
123   emg_cotora 
```

这是因为数据库区分大小写，所以...如何在不修改数据库的情况下强制不区分大小写？（我没有写权限）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T18:08:33.390

我假设在您的实际查询中您有一个`GROUP BY`子句。您只需要按`UPPER(username)`

```
SELECT upper(username), count(*) cnt
  FROM transactions
 WHERE username IS NOT NULL
 GROUP BY upper(username) 
```

当然，您也可以使用`SELECT`和`GROUP BY` `lower(username)`/`initcap(username)`或任何其他将不同用户名值转换为单个值的函数。

# matlab - 如何找到函数的临界点 - matlab

> ID：15096125
> 
> 赞同：1
> 
> 时间：2013-02-26T18:05:15.530
> 
> 标签：matlab, minimization

我知道这个问题已经由 user1003131 发布并由 Rody Oldenhuis 回答

[如何在matlab中用exp找到函数的临界点](https://stackoverflow.com/questions/13300399/how-to-find-critical-points-of-function-with-exp-in-matlab)

问题是最终 EitanT 能够找到几个关键点，而 user1003131 只找到一个。

讨论的结尾对于为什么会发生这种情况尚无定论。有什么见解吗？

另外我的代码如下：

```
%% symbolic variables
syms w a l E I x;

%% equations
FIA=0;
THETAA=0;
MA=-((w*a)/(l^2))*((l-a)^2);
RA=(w/(l^3))*((l-a)^2)*(l+2*a);

%slope
HEAVISIDE_theta=(heaviside(x-a))*((x-a)^2);
theta=THETAA+((MA*x)/(E*I))+((RA*(x^2))/(2*E*I))-((w/(2*E*I))*HEAVISIDE_theta);

%deflection
HEAVISIDE_d=(heaviside(x-a))*((x-a)^3);
d=FIA+(THETAA*x)+((MA*(x^2))/(2*E*I))+((RA*(x^3))/(6*E*I))-((w/(6*E*I))*HEAVISIDE_d)

%% Partial differential equations
%slope
der_theta_x_2=(w*heaviside(x - a)*(2*a - 2*x))/(2*E*I) - (w*0*(a - x)^2)/(2*E*I) - (a*w*(a - l)^2)/(E*I*l^2) + (w*x*(a - l)^2*(2*a + l))/(E*I*l^3);
der_theta_a_2=(w*0*(a - x)^2)/(2*E*I) - (w*heaviside(x - a)*(2*a - 2*x))/(2*E*I) - (w*x*(a - l)^2)/(E*I*l^2) + (w*x^2*(a - l)^2)/(E*I*l^3) + (w*x^2*(2*a + l)*(2*a - 2*l))/(2*E*I*l^3) - (a*w*x*(2*a - 2*l))/(E*I*l^2);

%deflection
der_d_x_2=(w*0*(a - x)^3)/(6*E*I) - (w*heaviside(x - a)*(a - x)^2)/(2*E*I) + (w*x^2*(a - l)^2*(2*a + l))/(2*E*I*l^3) - (a*w*x*(a - l)^2)/(E*I*l^2);
der_d_a_2=(w*heaviside(x - a)*(a - x)^2)/(2*E*I) - (w*0*(a - x)^3)/(6*E*I) - (w*x^2*(a - l)^2)/(2*E*I*l^2) + (w*x^3*(a - l)^2)/(3*E*I*l^3) - (a*w*x^2*(2*a - 2*l))/(2*E*I*l^2) + (w*x^3*(2*a + l)*(2*a - 2*l))/(6*E*I*l^3);

%% define values
l=2;
I=4;
E=90000;
w=90;

%% replace symbols
theta=subs(theta);
d=subs(d);

der_theta_x_2=subs(der_theta_x_2);
der_theta_a_2=subs(der_theta_a_2);

der_d_x_2=subs(der_d_x_2);
der_d_a_2=subs(der_d_a_2);

%%   calculate critical points

[acr_theta, xcr_theta]=solve(der_theta_x_2, der_theta_a_2)
pcr_theta=double([acr_theta(:) xcr_theta(:)])

[acr_d, xcr_d]=solve(der_d_x_2==0,der_d_a_2==0, a, x)
pcr_d=double([acr_theta(:) xcr_theta(:)]) 
```

我会考虑通过使用最小化来找到极值点，但由于存在重质函数，我无法做到。

有什么建议么？

谢谢

# python - 如何将元组列表转换为元组？

> ID：15096128
> 
> 赞同：0
> 
> 时间：2013-02-26T18:05:22.030
> 
> 标签：python

我怎样才能转变

```
[(212, u'comment', 0L), (205, u'main', 0L)] 
```

进入这个？

```
(0L, 0L) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T18:06:18.383

```
>>> data = [(212, u'comment', 0L), (205, u'main', 0L)]
>>> tuple(x[2] for x in data)
(0L, 0L) 
```

或者其他方法...

```
>>> zip(*data)   # just showing what zip(*data) does
[(212, 205), (u'comment', u'main'), (0L, 0L)]
>>> zip(*data)[2]
(0L, 0L) 
```

使用`itertools.imap()`和`operator.itemgetter()`...

```
>>> from itertools import imap
>>> from operator import itemgetter
>>> tuple(imap(itemgetter(2), data))
(0L, 0L) 
```

# java - UDP 地址已在使用中？

> ID：15096143
> 
> 赞同：4
> 
> 时间：2013-02-26T18:06:13.040
> 
> 标签：java, networking, udp

我正在关注[http://docs.oracle.com/javase/tutorial/networking/datagrams/broadcasting.html](http://docs.oracle.com/javase/tutorial/networking/datagrams/broadcasting.html)上的 UDP 教程，我已经复制了所有代码并编译了它，现在如果我先编译客户端然后编译服务器，服务器在控制台中打印出来

```
Exception in thread "main" java.net.BindException: Address already in use: Cannot bind
at java.net.PlainDatagramSocketImpl.bind0(Native Method)
at java.net.PlainDatagramSocketImpl.bind(Unknown Source)
at java.net.DatagramSocket.bind(Unknown Source)
at java.net.DatagramSocket.<init>(Unknown Source)
at java.net.DatagramSocket.<init>(Unknown Source)
at java.net.DatagramSocket.<init>(Unknown Source)
at QuoteServerThread.<init>(QuoteServerThread.java:19)
at MulticastServerThread.<init>(MulticastServerThread.java:10)
at MulticastServer.main(MulticastServer.java:3) 
```

QuoteServerThread 第 19 行是

```
socket = new DatagramSocket(12345); 
```

MulticastServerThread 第 10 行是

```
public MulticastServerThread() throws IOException {
    super("MulticastServerThread"); // line 10
} 
```

MulticastServer 第 3 行是

```
public class MulticastServer {
    public static void main(String[] args) throws java.io.IOException {
        new MulticastServerThread().start(); // line 3
    }
} 
```

如果我先启动服务器，然后是客户端，客户端在控制台中打印出来

```
Exception in thread "main" java.net.BindException: Address already in use: Cannot bind
at java.net.PlainDatagramSocketImpl.bind0(Native Method)
at java.net.PlainDatagramSocketImpl.bind(Unknown Source)
at java.net.DatagramSocket.bind(Unknown Source)
at java.net.MulticastSocket.<init>(Unknown Source)
at java.net.MulticastSocket.<init>(Unknown Source)
at MulticastClient.main(MulticastClient.java:9) 
```

MulticastClient 第 9 行是

```
MulticastSocket socket = new MulticastSocket(12345); 
```

查看错误，在我看来这与监听端口有关，我该如何解决这个问题？

帆布

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T18:12:29.223

这可能是因为您已经在运行服务器实例。一次只有一台服务器可以侦听给定端口。检查您是否已经在运行一个实例（如果您正在使用 Eclipse，您应该在命令窗口中看到它）并在运行另一个实例之前终止它。

尽管也有可能没有正确关闭流。如果您正在运行 IDE，重新启动 IDE 应该可以解决问题，尽管有时我不得不重新启动计算机。可能是解决此问题的更好解决方案，但这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:28:25.740

您可以执行以下操作：

使用 netstat coomand 查看哪个应用程序正在使用该端口。然后使用 tasklist 和 taskkill 杀死该端口的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-19T07:33:30.987

可能发生的情况是您在客户端有两条连接到同一端口的电线。当您从服务器收到消息时，客户端机器不知道要重定向消息的线程，因为它们有两个不同的 DatagramSocket 提示指向同一个端口

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-25T20:21:48.797

1.  打开任务管理器
2.  搜索以 OpenJDK 开头的进程名称。
3.  结束/终止进程。
4.  现在再次运行您的程序。

您无需重新启动 IDE。

# c - 类型转换和指针

> ID：15096145
> 
> 赞同：1
> 
> 时间：2013-02-26T18:06:15.827
> 
> 标签：c, types, casting

我有一段代码我不确定是否会非常感谢它的工作原理。

第一点是关于类型转换。有人可以告诉我我是否正确阅读了以下代码：

```
#define A_TIME          0xC0500000
#define B_TIME           *(UINT_8 *)(A_TIME + 0x00002909) 
```

这个 B_TIME 的输出是一个指向 8 位 = 0x09 的无符号整数的指针吗？我不确定类型转换是如何工作的？它是否将 8 LSB 分配给 B_TIME？另外，我对 *(UINT_8 *)? 这到底是什么意思/说什么？它是一个指向 8 位无符号整数的指针？

一旦我知道了上述内容，第二部分可能对我来说很清楚，但无论如何我都会发布它：

```
UINT_8  Timer = 0;
Input_Time (&Timer);

#define C_TIME                 *(UINT_16 *)0xC0C0B000
#define MASK                        0x003F

void Input_Time (UINT_8 *Time)
{
    *Time = 0xC0;  
    *Time |= (UINT_8)((C_TIME >> 4) & MASK);

    return;
} 
```

Input_Time 函数后 *Time 的值是多少？有人可以逐步完成代码并为我解释每个步骤吗？

为问题的新手道歉（这是一个词吗？！）。

非常感激。詹姆士

编辑：

好的，我对以上内容很满意。谢谢。在调用 Input_Time() 之后，我现在对代码中发生的以下情况感到困惑：

```
#define OUT_TIME *(UINT_8 *)0xC0411297
OUT_TIME = Timer; 
```

这怎么可能？`OUT_TIME`地址0XC0411297内的8位值不是吗？这是如何运作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:13:22.200

您正在查看的代码看起来像是在访问[内存映射寄存器](http://en.wikipedia.org/wiki/Memory-mapped_I/O)。

1.  B_TIME 将访问位于地址`A_TIME`加上指定偏移量的 8 位寄存器 - 在这种情况下，这意味着`0xC0502909`. 实际读取的内容取决于您使用的硬件。让我们分解发生的事情。 `B_TIME`，无论在何处使用，都将替换为以下文本：

    ```
    *(UINT_8 *)(A_TIME + 0x00002909) 
    ```

    反过来，`A_TIME`替换为`0xC0500000`，产生：

    ```
    *(UINT_8 *)(0xC0500000 + 0x00002909) 
    ```

    算术的一点工作给出：

    ```
    *(UINT_8 *)(0xC0502909) 
    ```

    这意味着“将`0xC0502909`其视为指向 8 位值的指针，然后取消引用它”。

2.  您的第二个问题遵循相同的行为。调用`0xC0C0B000`时正在读取映射的寄存器。`Input_Time()`从该地址读取一个 16 位值，将其下移 4，然后进行屏蔽。假设此示例为 16 位值，使用字母来唯一表示位：

    ```
    abcdefghijklmnop 
    ```

    降档 4：

    ```
    0000abcdefghijkl 
    ```

    然后应用掩码（`3f`十六进制是`00111111`二进制）：

    ```
    0000000000ghijkl 
    ```

    然后，将该结果与`0xc0`（`11000000`二进制）进行或运算，得到：

    ```
    0000000011ghijkl 
    ```

    该值被存储回 8 位传入字节中，返回：

    ```
    11ghijkl 
    ```

    给来电者。

3.  您的新示例：

    ```
    #define OUT_TIME *(UINT_8 *)0xC0411297
    OUT_TIME = Timer; 
    ```

    正在向该内存地址*写入一个值。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:07:16.150

的值`B_TIME`是类型的值`UINT8`。

```
#define B_TIME *(UINT_8 *)(A_TIME + 0x00002909) 
```

运算符取消引用以下表达式中的`*`指针：`UINT8`

`(UINT_8 *)(A_TIME + 0x00002909)`

在上面的表达式中，整数常量表达式通过强制转换`A_TIME + 0x00002909`转换为指向的指针。`UINT8``(UINT8 *)`

# c++ - 如何打乱数组以使所有元素更改其位置

> ID：15096157
> 
> 赞同：8
> 
> 时间：2013-02-26T18:06:39.240
> 
> 标签：c++, random, shuffle

我需要打乱一个数组，以便所有数组元素都应该改变它们的位置。给定一个数组`[0,1,2,3]`，可以获取`[1,0,3,2]`或`[3,2,0,1]`不获取`[3,1,2,0]`（因为`2`保持不变）。`std::random_shuffle`我想算法不是特定于语言的，但以防万一，我在 C++ 程序中需要它（由于额外的要求，我不能使用）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T18:18:12.910

那这个呢？

1.  分配一个包含从 0 到 arrayLength-1 的数字的数组
2.  随机排列数组
3.  如果数组中没有索引等于其值的元素，则继续执行步骤4；否则从第 2 步开始重复。
4.  使用洗牌后的数组值作为数组的索引。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T18:17:16.723

```
For each element e
    If there is an element to the left of e
        Select a random element r to the left of e
           swap r and e 
```

这保证了每个值都不在它开始的位置，但不保证如果有重复，每个值都会改变。

[BeeOnRope](https://stackoverflow.com/users/149138/beeonrope)指出，虽然简单，但这是有缺陷的。给定列表 [0,1,2,3]，此算法无法生成输出 [1,0,3,2]。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T18:14:54.337

它不会很随机，但您可以将所有元素旋转至少一个位置：

```
std::rotate(v.begin(), v.begin() + (rand() % v.size() - 1) + 1, v.end()); 
```

如果`v`在`{1,2,3,4,5,6,7,8,9}`开始时是，那么在旋转之后它将是，例如：`{2,3,4,5,6,7,8,9,1}`， 或`{3,4,5,6,7,8,9,1,2}`，等等。

数组的所有元素都会改变位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T18:38:51.797

我有一个想法，希望它适合您的应用程序。再拥有一个容器，这个容器将是一个 "map(int,vector(int))" 。关键元素将显示索引，向量的第二个元素将保存已使用的值。

例如，对于第一个元素，您将使用 rand 函数来查找应该使用数组的哪个元素。然后，如果数组的该元素已用于该索引，您将检查映射结构。

# objective-c - iOS，orientationchanges，在 iOS 5 中触发，但在 iOS 6 中没有

> ID：15096158
> 
> 赞同：0
> 
> 时间：2013-02-26T18:06:55.277
> 
> 标签：objective-c, ios5, ios6

我有一个应用程序使用 presentViewController 以模态方式呈现 UIWebview。现在根视图支持方向更改并相应地旋转。我听事件 UIApplicationWillChangeStatusBarOrientationNotification。

现在我使用“

```
 presentViewController:navController
                  animated:YES
                completion:nil]; 
```

我解雇使用

```
 dismissModalViewControllerAnimated:YES]; 
```

现在问题来了：在 iOS 6 中，这可以正常工作，并且模式窗口会以它的父级所在的任何方向显示。

在 iOS 5 中， presentViewController 或 dismissModalViewControllerAnimated 强行抛出

UIApplicationWillChangeStatusBarOrientationNotification！！

任何想法为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:09:00.617

尝试改用此方向通知：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:)
 name:UIDeviceOrientationDidChangeNotification object:[UIDevice currentDevice]]; 
```

# c++ - 来自多维向量/矩阵的 C++ 子矩阵

> ID：15096160
> 
> 赞同：-1
> 
> 时间：2013-02-26T18:07:11.420
> 
> 标签：c++, visual-studio, vector, matrix, submatrix

在 MSVS C++ 中，我有一个多维向量（矩阵）。我没有使用数组。

例如：

```
vector< vector<float> > image(1056, vector<float>(366)); 
```

在将数据包含在来自另一个来源的向量中之后，如何从这个矩阵创建一个子矩阵，给定一个像素坐标和所需的列数和行数？

例如，我有：

```
1  2  3  4
5  6  7  8
9  10 11 12 
```

我想：

```
6  7
10 11 
```

看起来很基本，但我对这个概念很陌生。有一些示例，但它们使用数组，我无法根据自己的需要更改示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:27:09.907

没有简单的方法可以做到这一点。您应该创建所需大小的新二维数组并将数据片段复制到其中。

您可能希望通过某些视图访问矩阵，这将是代理类、映射视图索引到底层数据索引

# javascript - Switch 语句和类

> ID：15096166
> 
> 赞同：0
> 
> 时间：2013-02-26T18:07:29.287
> 
> 标签：javascript, jquery, switch-statement

```
var item = $(this).attr('class');

switch (item) {
    case 'menu-visie active':
        soundManager.play('soundLaag1');
        break; 
```

有没有办法，我可以删除案例中的活动。变量的类是菜单可见的。但有时课程是菜单可见的。但是当课程是菜单可见时。脚本不工作。

如何设置 switch 语句。那个语句只看menu-visie 类。现在类必须完全相同

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T18:11:04.380

您应该使用 jQuery 来处理这些类，而不是手动。例如：

```
if ($(this).hasClass('menu-visie')) {
  soundManager.play('soundLaag1');
} 
```

**更新** 如果你有很多类，我会创建一个对象来存储它们。例如：

```
var self = this,
    sounds = {
      'menu-visie':'soundLaag1',
      'menu-visie2':'soundLaag2'
    };

$.each(sounds, function(i,n) {
  if (self.hasClass(i)) {
    soundManager.play(n);
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:11:47.007

你可以这样做：

```
if($(this).hasClass('menu-visie')) {
    soundManager.play('soundLaag1');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T18:12:07.817

我会这样做：

```
if( $(this).hasClass('menu-visie') ) {
    soundManager.play('soundLaag1');
} else {
    //something else.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T18:15:21.040

正如大多数人所提到的，您应该使用 Jquery 方法“hasClass”。如果您仍然想保留您的开关（如果您有很多语句），您可以这样编写代码：

```
switch (true) {
    case $(this).hasClass('menu-visie'):
        soundManager.play('soundLaag1');
        break; 
```

# c# - 如何从 ascx.cs 文件中的 ascx 文件中的 FormView 中的文本框中获取文本值

> ID：15096169
> 
> 赞同：2
> 
> 时间：2013-02-26T18:07:39.467
> 
> 标签：c#, asp.net, .net, textbox

我在 ascx 文件中的 FormView 中有一个 asp: 文本框，如下所示>

```
<asp:FormView runat="server" ID="myFrmView">

    <asp:TextBox runat="server" ID="txtBox1" size="20" MaxLength="150" >

</FormView> 
```

但在代码隐藏 ascx.cs 文件中，我无法从文本框中检索值

```
string name2 = Request.Form["txtBox1"]; 
```

如何获得价值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:08:50.900

不需要使用`Request`，应该可以直接在后面的代码中访问控件，试试：

```
var value = txtBox1.Text; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T13:19:40.023

好的，我找到了。

```
string value = (myFrmView.FindControl("txtBox1") as TextBox).Text; 
```

什么是 FormView 控件内部并且没有 id。myFrmView 的 ID

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T18:09:22.593

直接访问控制：

```
string text = txtBox1.Text; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T18:10:03.733

它是 txtBox1.Text。ASP.NET 不会生成与您在标记文件 ID 中指定的名称相同的 HTML 元素，并且引用 Request.Form 是绕过支持服务器端控件的健壮对象模型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T18:20:13.723

如果您无法使用 txtBox1.text 直接访问控件，那么我会检查以确保您的 ascx 文件指向顶部 <% @Page %> 部分中的正确代码隐藏文件。应该有一个指向您的 [file].ascx.cs 的 CodeBehind 属性。

您可能还需要检查以确保 ascx.cs 中声明的类与 Designer.cs 文件中的类匹配。如果不匹配，designer.cs 中的部分类声明将不匹配，您将没有控件的属性。

如果我手动重命名某些文件并忘记更新代码隐藏属性，我会收到此错误。

# python - 如何在python中将一个范围的值映射到另一个范围

> ID：15096175
> 
> 赞同：0
> 
> 时间：2013-02-26T18:07:55.363
> 
> 标签：python, map, int, byte

想要在python中做这个等价的（和逆toByte），你如何在python中映射？

```
int toInt(byte b) {
  return map(b, 0, 255, -128, 127);
} 
```

我会尝试

```
int([representation],base)-128 
```

但我不知道什么是表示和基础

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:34:23.407

`int([representation],base)-128`如果我理解你的问题。如果您出于某种原因对函数不满意，请尝试使用 python 字典结构

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:49:20.073

那不就是：

```
def toInt(b):
    return b-128

def toByte(i):
    return i+128 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:30:31.440

有不止一种方法可以做到这一点。您可以使用显式映射：

```
INT_MAP = {x: x - 128 for x in range(256)}
def to_int(val):
    """Maps an unsigned integer to a signed one (for values up to 256)"""
    try:
        return INT_MAP[val]
    except KeyError:
        raise ValueError("val must be a value between 0 and 255") 
```

或者，您可以使用数学：

```
def to_int(val, max_signed_val=128):
    max_val = max_signed_val * 2
    assert val < max_val, "val must be less than {:d}".format(max_val)
    return val - max_signed_val 
```

# php - PHP：将匿名函数的结果直接用作字符串？

> ID：15096177
> 
> 赞同：1
> 
> 时间：2013-02-26T18:08:08.010
> 
> 标签：php, lambda, closures

有没有可能做这样的事情。假设我们有一个接受字符串作为参数的函数。但是要提供这个字符串，我们必须对数据进行一些处理。所以我决定使用闭包，就像在 JS 中一样：

```
function i_accept_str($str) {
   // do something with str
}

$someOutsideScopeVar = array(1,2,3);
i_accept_str((function() {
    // do stuff with the $someOutsideScopeVar
    $result = implode(',', $someOutsideScopeVar); // this is silly example
    return $result;
})()); 
```

这个想法是在调用`i_accept_str()`时能够直接提供字符串结果......我可能可以做到这一点，`call_user_func`已知它是无效的，但有其他选择吗？

PHP 5.3 和 PHP 5.4 解决方案都被接受（上述想要的行为已经过测试并且不适用于 PHP 5.3，但可能适用于 PHP 5.4...）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:17:09.517

在 PHP（>=5.3.0，使用 5.4.6 测试）中，您必须使用`call_user_func`并从外部 Scope 导入变量`use`。

```
<?php

function i_accept_str($str) {
   // do something with str
   echo $str;
}

$someOutsideScopeVar = array(1,2,3);
i_accept_str(call_user_func(function() use ($someOutsideScopeVar) {
    // do stuff with the $someOutsideScopeVar
    $result = implode(',', $someOutsideScopeVar); // this is silly example
    return $result;
})); 
```

# node.js - Node JS：socket.io - 处理多个连接

> ID：15096178
> 
> 赞同：0
> 
> 时间：2013-02-26T18:08:13.200
> 
> 标签：node.js

我是在 Node JS 中使用 socket.io 的新手——但是我编写了一个客户端（网页）/服务器程序来在客户端呈现一些统计数据。要求就像 - 呈现一个盒子统计信息（很多）。由于用户可以打开多个浏览器窗口 - 我们有一个场景可以多次请求一个框数据：

[http://www.tool.com?boxname=box1](http://www.tool.com?boxname=box1)

因此，我想为同一个盒子的多个请求生成一项工作。以下是我为满足要求而实施的逻辑：

客户端：

1.  建立与创建数据通道的服务器的连接：

    socket.on(boxname.toLowerCase(), 函数（数据）{ }

因此，每当我收到 boxname 事件中的数据时，解析数据并呈现它。

服务器端

1.  首先调用一个期望脚本来复制一个脚本以在一个盒子上的无限循环中运行。

2.  成功复制框中的脚本后 - 调用另一个期望脚本开始执行：

    export.ServiceMonitor = 函数（boxName，res）{

第1步。

我需要多次复制脚本，否则我将无法进入这个生成的进程的“退出”事件，在该事件中我开始执行脚本，如下所述：

```
var child = spawn('./scripts/copyscriptonbox.sh' , [boxName.toLowerCase(), getURL(boxName)]); 
```

在代码的后面部分，我不断将框名称添加到声明为全局的 boxnames 变量中。因此，在新的 boxname 请求中 - 我在 boxnames 变量中搜索 boxname 的出现次数。如果计数为 1 或更多，这对我来说意味着脚本已经在该框上运行：

```
 var noofbox = boxnames.split(boxName.toLowerCase()).length - 1;

        child.on('exit', function (code) {
                logger.info('child stream exit: ' + code);
                if(code == 0)
                {
                        boxNames +=  boxName.toLowerCase();
                        logger.info('Box name added: ' + boxNames);
                        res.render('boxpage', {}); //render a web page
                        io.sockets.on('connection', function (socket) {
            logger.info('Connected to box :' + boxName);
            if(noofbox <= 0)            
                           schild = spawn('./scripts/boxmon.sh', [boxName.toLowerCase(), getURL(boxName)]);
                        schild.on('exit', function (code) {
                                logger.info('schild stream exit.');
                         });
                        schild.stderr.on('data', function (data) {
                                logger.info('stderr: ' + data);
                        });
                        schild.stdout.on('data', function (data) {
                              //generate response
                        });
                        socket.on('disconnect',function(){logger.info('Disconnect Killed');ServiceMonitorEnd(boxName.toLowerCase());});
                        });
                }
        });
} 
```

问题是，如果在两个浏览器窗口中我访问 URL：www.tool.com?boxname=box1 - 第一次我只获得一次日志（连接到框：box1）但第二次我获得相同的日志 2 次我期待它是一次 - 我的意思是在第一个请求之后进来的许多请求，日志被打印了很多次 - 如果 5 则日志被打印 1（第一次）+2（第二次）+3（第三次时间）+4（第四次）+5（第五次）？我知道当“连接”事件被调用 x 次时，它会为每个连接输入那么多次。如何仅针对每个请求在 socket.io 上进行一次“连接”事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:26:03.717

使用`socket.once`而不是`socket.on`，它是另一个类似 .on 的 EventEmitter，它只发出一次，第一次。检查[文档](http://nodejs.org/api/events.html#events_emitter_once_event_listener)。但请记住，客户端不会收到任何此类事件。

# algorithm - 将事件插入日历，一周内不能发生两个事件 logn

> ID：15096180
> 
> 赞同：-1
> 
> 时间：2013-02-26T18:08:19.543
> 
> 标签：algorithm, data-structures, tree

将事件插入日历，一周内不能发生两次事件，`N`是事件的数量：

1.  插入`log N`考虑周规则在 7 天内没有两个事件。
2.  给定两天（`x`， ），返回一天和一天之间`y`的事件（`k`：事件） 。`O(k + log N)``x``y`
3.  给定`x`不可能插入事件的一天（周规则）`y`，`y > x`在`log N`.

我认为是 RB-tree，但如果我有一天无法插入，那么找到下一个可能的日子需要`n*logn`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:20:05.960

似乎基于 RB-tree 的解决方案会很好，重点是使用一周的第一天作为放入树中的事件的关键。当然，您还需要存储事件的实际日期。

# ruby-on-rails - rails 多态，包含基于类的类型

> ID：15096184
> 
> 赞同：10
> 
> 时间：2013-02-26T18:08:43.530
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, polymorphic-associations, eager-loading

假设我们有这些模型

```
class Message
  belongs_to :messageable, polymorphic: true
end

class Ticket
  has_many :messages, as: :messageable
  has_many :comments
end

class User
  has_many :messages, as: :messageable
  has_many :ratings
end

class Rating
  belongs_to :user
end

class Comment
  belongs_to :ticket
end 
```

现在我想加载所有消息（关联`tickets`or `users`），并根据类的类型进行急切加载，无论是`comments`for`tickets`还是`ratings`for`users`

当然`Message.includes(:messageable).order("created_at desc")`只会包含直接关联的对象，但问题是如何包含从每个模型类型派生的不同关联类型（即在本例中，如何预先加载`comments for tickets`和`ratings for users`）？

这只是一个简单的例子，但是更复杂的情况呢，我想为`user`, 另一个关联包含其他内容，如果该关联需要更多包含怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:31:09.697

我能想到的唯一方法是使用通用名称复制每个模型上的关联：

```
class Ticket
  has_many :messages, as: :messageable
  has_many :comments
  has_many :messageable_includes, class_name: "Comment"
end

class User
  has_many :messages, as: :messageable
  has_many :ratings
  has_many :messageable_includes, class_name: "Rating"
end

Message.includes(:messageable => :messageable_includes) ... 
```

我不确定我是否会将此策略用作广泛的解决方案，但如果您的情况如此复杂，它可能对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T12:16:01.043

我在自己的项目中使用了以下辅助方法：

```
def polymorphic_association_includes(association, includes_association_name, includes_by_type)
  includes_by_type.each_pair do |includes_association_type, includes|
    polymorphic_association_includes_for_type(association, includes_association_name, includes_association_type, includes)
  end
end

def polymorphic_association_includes_for_type(association, includes_association_name, includes_association_type, includes)
  id_attr = "#{includes_association_name}_id"
  type_attr = "#{includes_association_name}_type"

  items = association.select {|item| item[type_attr] == includes_association_type.to_s }
  item_ids = items.map {|item| item[id_attr] }
  items_with_includes = includes_association_type.where(id: item_ids).includes(includes).index_by(&:id)

  items.each do |parent|
    parent.send("#{includes_association_name}=", items_with_includes[parent[id_attr]])
  end
end 
```

这些可以让你说：

```
messages = Message.all
polymorhpic_association_includes messages, :messageable, {
  Ticket => :comments,
  User => :ratings
} 
```

不是一个特别流畅的界面，但它通常可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-30T10:07:48.120

将包含放在每个模型的默认范围内：

```
class Ticket
  has_many :messages, as: :messageable
  has_many :comments
  default_scope -> { includes(:comments).order('id DESC') }
end

class User
  has_many :messages, as: :messageable
  has_many :ratings
  default_scope -> { includes(:ratings).order('id DESC') }
end 
```

然后，每当您调用`Message.all`每个多态关联时，都会包含它自己的资源。

此外，如果您需要在没有范围的情况下调用类，只需使用`unscoped`或创建不同的范围：

```
class Ticket
  has_many :messages, as: :messageable
  has_many :comments
  has_many :watchers
  default_scope -> { includes(:comments).order('id DESC') }
  scope :watched -> {includes(:watchers)}
end

Ticket.unscoped.all # without comments or watchers (or order)
Ticket.watched.all  # includes watchers only 
```

# gcc - GCC 编译器生成的文件有哪些不同类型？

> ID：15096192
> 
> 赞同：0
> 
> 时间：2013-02-26T18:09:15.677
> 
> 标签：gcc

在我正在玩的一个 C 项目上运行 make 时，我注意到 gcc 分阶段生成不同的文件类型。我很好奇这些是什么，因为我对 gcc 不太熟悉。

我注意到的扩展是：

*   .o（我知道这些是编译库）
*   .o.lst
*   .d
*   。一种

我希望这不是一个愚蠢的问题，但我只是想了解这些文件，以及它们的用途。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:39:28.420

.o 是目标文件，即机器相关的输出代码

> 使用 gcc -c

.a 是静态库...几个 o 文件的集合

> ar -r

.d 文件是包含依赖项的依赖项文件

.lst - 如果您想查看 C 代码及其转换为的程序集，请使用命令 l

> gcc -c -g -Wa,-a,-ad [其他 GCC 选项] foo.c > foo.lst

# ios - 屏蔽已移动/缩放的 UIImage

> ID：15096193
> 
> 赞同：1
> 
> 时间：2013-02-26T18:09:18.147
> 
> 标签：ios, uiimage, transform, masking

我可以像这样完成掩蔽：

```
CGAffineTransform t = self.imageForEditing.transform;

    NSLog(@"x offset: %f, y offset: %f", self.imageForEditing.frame.origin.x, self.imageForEditing.frame.origin.y);
    NSLog(@"scale: %f", sqrt(t.a * t.a + t.c * t.c));

    UIImage *maskImage = [UIImage imageNamed:@"faceMask"];
    UIImage *colorsImage = [self.imageForEditing.image imageRotatedByDegrees:180];

    CGImageRef maskRef = maskImage.CGImage;
    CGImageRef imageMask = CGImageMaskCreate(CGImageGetWidth(maskRef),
                                             CGImageGetHeight(maskRef),
                                             CGImageGetBitsPerComponent(maskRef),
                                             CGImageGetBitsPerPixel(maskRef),
                                             CGImageGetBytesPerRow(maskRef),
                                             CGImageGetDataProvider(maskRef), NULL, false);

    CGImageRef maskedRef = CGImageCreateWithMask(colorsImage.CGImage, imageMask);
    UIImage *maskedImage = [UIImage imageWithCGImage:maskedRef]; 
```

您可以在日志语句中看到我可以访问原始图像已移动和/或缩放的程度。如何应用此信息以便新的蒙版图像将其考虑在内？想象一下，面具只是屏幕中间的一个圆形切口。self.imageForEditing (a UIImageView) 可以移动。创建新图像时，它应该只是通过切口可见的部分。上面的代码有效，但没有考虑底层图像的移动/缩放。

编辑：我认为根据图像视图的当前状态（self.imageForEditing）创建一个新图像可能更容易。它位于一个容器 self.editContainer 中。那么如何才能根据 self.editContainer 中包含的当前像素创建一个新图像呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:55:11.863

最后通过将容器视图渲染为图像来解决这个问题，然后使用我发现的 UIImage 类别来修剪透明像素。如果它对某人有帮助：

在容器 uiview 上：

```
 UIGraphicsBeginImageContextWithOptions(self.frame.size, NO, 0.0);

    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return image; 
```

# java - 计算代码的平均时间复杂度 (Big-O)

> ID：15096197
> 
> 赞同：-2
> 
> 时间：2013-02-26T18:09:29.553
> 
> 标签：java, big-o

你能帮我找到以下代码的Big-O吗：

```
 /**
 * This will: 
 * 1) Remove duplicates from the give List and sort.
 * 2) find N-th largest element in the modified list and return the element.
 * @param listWithDup
 * @param index index of the largest element
 * @return
 */
public static int findElementbyIndex(List<Integer> listWithDup, int index){

  int toRet = 0, num = 0;
  TreeSet<Integer> sortedSet = new TreeSet<Integer>(listWithDup); // remove duplicates    and   sorts

  //        System.out.println("printing the sorted List:");
  //        for(int i: sortedSet){
  //            System.out.println(i);
  //        }
  Iterator<Integer> it = sortedSet.descendingIterator();

while(it.hasNext()){
  toRet = it.next();
  num++;
  if(num == index)
    break;
  }
  return toRet;     
}
/**
 * @param args
 */
public static void main(String[] args) {

    ArrayList<Integer> a = new ArrayList<Integer>();
    a.add(1);
    a.add(9);
    a.add(5);
    a.add(7);
    a.add(2);
    a.add(5);

    System.out.println("Expecting 7, because 7 is 2nd largest element in the modified list="+findElementbyIndex(a, 2));

} 
```

我从这段代码中得到的输出如下：

```
printing the sorted List:
1
2
5
7
9
Expecting 7, because 7 is 2nd largest element in the modified list=7 
```

我需要计算 findElementbyIndex() 方法的平均复杂度。任何人都可以帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:13:36.157

最好的情况是，所需的项目位于第一个索引中。最坏的情况是所需的项目位于最后一个位置。这意味着在最坏的情况下，搜索将遍历每个项目一次。因此，对于 N 个输入，算法是 O(N)。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:16:25.473

TreeSet 在创建时会进行基于比较的排序，因此将是 O(n log n)。算法的其余部分是顺序搜索，因此是 O(n)，但由于 O(n log n) 的复杂度更高，所以你的算法是 O(n log n)。

# php - 使用 PHP 和 WordPress 将 zip 文件下载到本地驱动器

> ID：15096203
> 
> 赞同：0
> 
> 时间：2013-02-26T18:09:45.577
> 
> 标签：php, wordpress, download

我正在将 WordPress 用于网站，并希望包含一个菜单项以将 zip 文件从网站下载到本地驱动器。我尝试使用以下功能：

```
function download_binary_file($file) {
    if (file_exists($file)) {
        $base_name = basename($file);
        header('Content-Description: File Transfer');
        header('Content-Type: application/octet-stream');
        header('Content-Disposition: attachment; filename="'.$base_name.'"');
        header('Content-Transfer-Encoding: binary');
        header('Expires: 0');
        header('Cache-Control: must-revalidate');
        header('Pragma: public');
        header('Content-Length: ' . filesize($file));
        ob_clean();
        flush();
        readfile($file);
        exit;
    }
} 
```

但是当这个函数被执行时，不是得到一个对话框来保存文件，而是在我的浏览器中显示 zip 文件的内容。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:14:21.963

上传您的 zip 文件，然后创建菜单项，然后添加从菜单项到 zip 文件 url 的 htaccess 重定向。Zip 文件通常会自动下载。我知道还有一些用于 wordpress 的下载管理器插件，这使得该过程非常简单。

# xml - 用于手势识别的 Haar 训练数据集 - 计数

> ID：15096211
> 
> 赞同：1
> 
> 时间：2013-02-26T18:10:07.537
> 
> 标签：xml, opencv, dataset, haar-wavelet

我一直在尝试找到一个经过 HAAR 训练的数据集（OpenCV/C++），用于使用手指进行计数。我确实找到了很多用于手部识别的训练数据集，但到目前为止还没有找到手指计数。有没有众所周知的资源？

任何链接都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:55:10.083

haar 或任何其他级联是二进制的，是 - 否分类器。

你可以问他们：“这是一只有 2 个手指的手吗？”，但不是：“有多少？”。

要滥用它们进行手指计数，您必须为每个姿势训练一个级联，然后分别针对每个姿势测试您的候选图像。

所以，我会说，这不是一个好主意。

（它可以解释为什么你在网上找不到任何东西）

# vba - vba：PowerPoint 宏：“未设置变量”

> ID：15096214
> 
> 赞同：1
> 
> 时间：2013-02-26T18:10:22.203
> 
> 标签：vba, powerpoint, powerpoint-2010

我的 `"Object variable or With block variable not set"`代码出现错误。这是我第一次写宏。我确实有编程知识，但这对我来说是新的。

无论如何，我想通过演示文稿，并且对于在注释部分中有任何文本的每一页，我想添加一张包含该文本的新幻灯片（在它之后）。

这是我尝试过的：

```
Sub SlideSort()
Dim curSlide As Slide
Dim newSld As Slide
Dim curPres As Presentation
Dim curShape As Shape
Dim i As Integer

    For i = 1 To ActivePresentation.Slides.Count
        curSlide = ActivePresentation.Slides(i)

        For Each curShape In curSlide.NotesPage.Shapes
            If curShape.Type = msoPlaceholder Then
                If curShape.PlaceholderFormat.Type = ppPlaceholderBody Then
                    If curShape.TextFrame.TextRange <> "" Then
                        Set newSld = ActivePresentation.Slides.Add(Index:=i + 1, Layout:=ppLayoutText)
                        newSld.Shapes(2).TextFrame.TextRange = curShape.TextFrame.TextRange
                        i = i + 1

                    End If
                End If
            End If
        Next curShape
    Next i

End Sub 
```

给出错误的行是 curSlide = ActivePresentation.Slides(i)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:35:44.177

使用`Set curSlide = ActivePresentation.Slides(i)`- 它是一个**对象**，应该通过`Set`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:35:14.623

您需要在此处使用 Set ，就像使用其他对象一样：

```
Set curSlide = ActivePresentation.Slides(i) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:47:44.630

答对了。这是 PowerPoint 的 Mac 版本中的一个错误。我可以在 Mac 上重现该问题。

Mac PowerPoint 不支持 .PlaceholderFormat.Type，但应该支持。

它不是 100% 可靠的，但您可以在笔记页面上选择第二个形状作为正文占位符：

```
Sub SlideSort()
Dim curSlide As Slide
Dim newSld As Slide
Dim curPres As Presentation
Dim curShape As Shape
Dim i As Integer

    For i = 1 To ActivePresentation.Slides.Count
        curSlide = ActivePresentation.Slides(i)
        curShape = curSlide.NotesPage.Shapes(2)
           If curShape.TextFrame.TextRange <> "" Then
              Set newSld = ActivePresentation.Slides.Add(Index:=i + 1, Layout:=ppLayoutText)
              newSld.Shapes(2).TextFrame.TextRange = curShape.TextFrame.TextRange
              i = i + 1
           End If
    Next i

End Sub 
```

我怀疑您也可能遇到问题，因为您正在循环中查看 Slide.Count，但是通过添加幻灯片，您正在修改 Slide.Count。

# android - 我的安卓模拟器是韩语的

> ID：15096216
> 
> 赞同：1
> 
> 时间：2013-02-26T18:10:23.640
> 
> 标签：android

我的 Android SDK 模拟器似乎是韩语的。AVD 的实际 Android 操作系统中的语言设置是美国英语，但屏幕键盘仍然是韩语。我创建了新的 AVD，它们仍然是韩语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:58:40.247

我通过销毁该 AVD 并创建一个新的来解决问题。旧 AVD 的目标是“Android 2.2”（API 级别 8）。我创建了一个针对“Google API（Google Inc.）”（API 级别 8）的副本，现在所有内容都是英文的。

我猜我已经安装了来自三星的*韩国*AVD 图像，其通用英文名称为“Android 2.2”。

此外，键盘输入已通过根据[此 stackoverflow 问题升级到 SDK 版本 21 来解决](https://stackoverflow.com/questions/11235370/android-emulator-doesnt-take-keyboard-input-sdk-tools-rev-20)

# jquery - 用jQuery替换字符？

> ID：15096218
> 
> 赞同：0
> 
> 时间：2013-02-26T18:10:26.030
> 
> 标签：jquery

我有以下 HTML：

```
<div class="rate-number-up-down-rating positive">+1</div> 
```

我正在尝试删除该`+`标志。搜索后，我来到以下代码：

```
v = $("div.rate-number-up-down-rating").html().replace(/[+]/g, ""));
$("div.rate-number-up-down-rating").html(v); 
```

但它不起作用。我在这里想念什么？也许是因为它是一个加号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:11:30.693

你有一个杂散的右括号。那是语法错误。

```
v = $("div.rate-number-up-down-rating").html().replace(/[+]/g, ""));
                                                               ---^--- 
```

这应该出现在您的 JavaScript 控制台中。检查错误总是一件好事。

# ruby-on-rails - 如何使用 Logger.new 创建一个文件夹（如果不存在）？

> ID：15096219
> 
> 赞同：27
> 
> 时间：2013-02-26T18:10:25.743
> 
> 标签：ruby-on-rails, ruby, logging

我正在尝试注册新日志

```
@@my_logger ||= Logger.new("#{Rails.root}/log/my.log") 
```

但是当我尝试生成新文件夹时，将其放入

```
@@my_logger ||= Logger.new("#{Rails.root}/log/today.to_s/my.log") 
```

它返回`Errno::ENOENT: No such file or directory`

可能是权限问题？如何使用 Logger.new 创建一个文件夹（如果不存在）？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-02-26T18:17:00.557

尝试这样的事情。

```
 dir = File.dirname("#{Rails.root}/log/#{today}/my.log")

  FileUtils.mkdir_p(dir) unless File.directory?(dir)

  @@my_logger ||= Logger.new("#{Rails.root}/log/#{today}/my.log") 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-04-24T07:42:13.233

你也可以这样做

```
directory_name = "name"
Dir.mkdir(directory_name) unless File.exists?(directory_name) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-26T18:24:27.503

在 rails 中自动创建日志目录已被弃用。这是 Logger.new 代码中的代码片段：

```
ActiveSupport::Deprecation.warn("Automatic directory creation for '#{log}' is deprecated. Please make sure the directory for your log file exists before creating the logger. ") 
```

现在公认的做法是在创建记录器之前确保日志文件（和目录）存在。

确保目录提前存在的一种方法可能是使用与此类似的代码：

```
log_file_name = '/path/to/my.log'
unless File.exist?(File.dirname(log_file_name))
  FileUtils.mkdir_p(File.dirname(log_file_name))
end 
```

# image - CSS3 背景图像滑块：动画和背景大小

> ID：15096226
> 
> 赞同：0
> 
> 时间：2013-02-26T18:11:02.900
> 
> 标签：image, google-chrome, css, slider

我仅使用 CSS 创建图像滑块。我几乎完成了编码，但我不知道我必须做什么才能使图像在滑动时不会不成比例地缩放。我仍然希望它们填充 div 而不是 100% 拉伸，我也不想剪切图像，因为我想（你）想办法做到这一点:)

这是我的代码的一部分：

```
div#transition3 {
  width:480px; 
  height:360px; 
  -webkit-animation:trans2 12s; 
  -webkit-animation-iteration-count: infinite; 
  -webkit-box-sizing:border-box; 
  -webkit-background-origin:border-box; 
  background-scale:fill; 
}

@-webkit-keyframes trans2 /* Safari and Chrome */
{
  0%   {background:url('../img/1.jpg') no-repeat top left;}
  10%  {background:url('../img/1.jpg') no-repeat top left;}
  20%  {background:url('../img/2.jpg') no-repeat top left;}
  30%  {background:url('../img/2.jpg') no-repeat top left;}
  40%  {background:url('../img/3.jpg') no-repeat top left;}
  50%  {background:url('../img/3.jpg') no-repeat top left;}
  60%  {background:url('../img/4.jpg') no-repeat top left;}
  70%  {background:url('../img/4.jpg') no-repeat top left;}
  80%  {background:url('../img/5.jpg') no-repeat top left;}
  90%  {background:url('../img/5.jpg') no-repeat top left;}
  100% {background:url('../img/1.jpg') no-repeat top left;}
} 
```

这是一个小提琴：http: [//jsfiddle.net/qDmS8/3/](http://jsfiddle.net/qDmS8/3/)。我希望你知道我的意思并能够帮助我。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:08:57.867

不可能按照我想要的方式去做。最好的方法是为每个图像创建容器，然后为它们分配 CSS 过渡，如[http://tympanus.net/Tutorials/CSS3FullscreenSlideshow/index.html所示](http://tympanus.net/Tutorials/CSS3FullscreenSlideshow/index.html)

# macos - Shell：如何创建带有斜线和括号的目录？

> ID：15096230
> 
> 赞同：1
> 
> 时间：2013-02-26T18:11:19.003
> 
> 标签：macos, bash, shell, sh

我想使用以下命令一次性在“test”文件夹中创建目录“Dir (A/B)”：

```
$ mkdir -vp "test/dir (A/B)"
test
test/dir (A
test/dir (A/B) 
```

不幸的是，它在'test'中创建'dir（A'。

我试图逃避它，但没有成功，例如`mkdir -vp "test/dir (A\/B)"`.

在 Finder 中手动创建时，它可以工作。

我应该如何逃避争论？谢谢。

我正在使用 bash shell。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T18:18:56.097

做：

```
$ mkdir -vp "test/dir (A:B)" 
```

该目录将出现`dir (A/B)`在 Finder 和文件打开对话框中，但`dir (A:B)`在 shell 和其他 Unix 应用程序中。

请注意，这是非常特定于 Mac 的，它不适用于其他风格的 Unix。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T18:22:29.743

虽然我不建议这样做，但您可以创建一个像这样的文件名：

```
mkdir 'test:dir (A:B)'

# when creating missing folders
mkdir -pv 'test/dir (A:B)' 
```

在查找器中，它将显示为：“test/dir (A/B)”

**但是**如果你查看 bash shell (ls -al)，你会看到“test:dir (A:B)”

# c# - 图像构建操作：无资源和嵌入式资源之间的区别？

> ID：15096236
> 
> 赞同：7
> 
> 时间：2013-02-26T18:11:47.047
> 
> 标签：c#, visual-studio-2010, .net-4.0

我在我的一些按钮上使用图片，我不希望这些图片包含在输出中。

这些图像是通过按钮属性设置的，因此它们是在 Resource.resx 文件中定义的。

有人告诉我将构建操作设置为嵌入式资源，但我很好奇为什么这会有所作为。我现在将构建操作设置为“无”，并且没有任何文件设置为复制。我可以将构建的应用程序移动到任何地方并启动它，所有图像都显示得很好。（为了澄清一点，图像在启动时肯定不在程序的目录中，它们仍然看起来很好）。

我在 MSDN 上查了一下，得到了这个：

> 无 - 文件不包含在项目输出组中，并且不在构建过程中编译。一个示例是包含文档的文本文件，例如自述文件。
> 
> 嵌入式资源 - 此文件作为 DLL 或可执行文件嵌入到主项目构建输出中。它通常用于资源文件。

但从这听起来像是将它们全部设置为 None 甚至不应该工作（但确实如此）。

所以我很好奇将它设置为嵌入式资源有什么好处。我确实测试了它，并没有什么区别。希望有人能解释发生了什么。

我唯一的假设是，当通过按钮设置图像属性并将条目添加到资源文件时，它绝不会连接到添加到项目中的文件（即使它们相同）。因此，如果您以这种方式设置图像属性，则图像甚至不需要包含在项目中（即在解决方案资源管理器中）。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T19:46:10.793

您似乎偶然发现了两种不同的显示图像的方式。

1.  如果您使用资源文件，则资源文件本身将包含图像，并且该文件将被复制到输出目录中。然后，您将从该资源文件中引用图像，一切都会好起来的。none/embedded/content 的实际图像设置无关紧要。这允许您为各种语言和位置创建资源文件，并根据您的应用程序文化更改使用的图像。

2.  引用图像的另一种方法是将其嵌入或将其设置为项目中的内容。如果您将其设置为内容，它将复制到输出目录，并且可以根据位置进行物理引用，或者如果您嵌入它，该文件将位于创建的 dll 内，您可以使用其中拉取包含该文件的资源流内置函数。

您正在使用方法＃1，因此一旦将其放入资源文件中，您就不必将其放入项目中，因为资源文件已经在项目中，这就是文件的来源。

# vba - 遍历工作表

> ID：15096240
> 
> 赞同：0
> 
> 时间：2013-02-26T18:12:09.277
> 
> 标签：vba, excel

感谢@Tim WIlliams，我有以下代码可以生成插入语句。但是，当我添加以下子程序来调用它来遍历工作簿时，它仍然只拾取活动工作表。我究竟做错了什么？

```
 Sub WorksheetLoop()

   Dim WS_Count As Integer
   Dim I As Integer
   Dim current As Worksheet
   ' Set WS_Count equal to the number of worksheets in the active
   ' workbook.
   WS_Count = ActiveWorkbook.Worksheets.Count

   ' Begin the loop.
   For Each current In ActiveWorkbook.Worksheets

      Call DoSQL

      'MsgBox ActiveWorkbook.Worksheets(I).Name

   Next

   End Sub

   Sub DoSQL()
   myfile = "test.txt"
   fnum = FreeFile()
   Open myfile For Output As fnum

    Const SQL = "insert into <tbl>(<cols>) values (<vals>)"
    Dim dictSQL As Object, rw1 As Range, r As Long, rowSQL
    Dim sht As Worksheet, k, c As Range
    Dim cols, vals

    'Set sht = ActiveSheet
    Set rw1 = sht.Range(sht.Cells(1, 1), sht.Cells(1, Columns.Count).End(xlToLeft))

    Set dictSQL = tableDict(rw1)

    r = 2

    Do While sht.Cells(r, 1).Value <> ""

        For Each k In dictSQL
            rowSQL = Replace(SQL, "<tbl>", k)
            cols = ""
            vals = ""

            For Each c In dictSQL(k).Cells
               cols = cols & IIf(Len(cols) > 0, ",", "") & Split(c.Value, ".")(1)
               vals = vals & IIf(Len(vals) > 0, ",", "") & _
                             "'" & Trim(sht.Cells(r, c.Column).Value) & "'"
            Next c

            rowSQL = Replace(rowSQL, "<cols>", cols)
            rowSQL = Replace(rowSQL, "<vals>", vals)
            Debug.Print rowSQL
            Print #fnum, rowSQL
        Next k

        r = r + 1
    Loop
    Close #fnum

   End Sub

   Function tableDict(rw As Range)
    Dim rv As Object, tbl
    Set rv = CreateObject("scripting.dictionary")
    Dim c As Range
    For Each c In rw.Cells
        If Len(c.Value) > 0 And InStr(c.Value, ".") > 0 Then
            tbl = Split(c.Value, ".")(0) 'table name
            If rv.exists(tbl) Then
                Set rv(tbl) = Application.Union(c, rv(tbl))
            Else
                rv.Add tbl, c
            End If
        End If
    Next c
    Set tableDict = rv
    End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:27:17.750

作为[Ripster 答案](https://stackoverflow.com/a/15096459/698590)的替代方案，您可以将工作`current`表传递给`DoSQL`Sub ...

```
For Each current In ActiveWorkbook.Worksheets
    DoSQL(current)
Next 
```

并更改您的 Sub 以匹配...

```
Sub DoSQL(sht As Worksheet)
    myfile = "test.txt"
    fnum = FreeFile()
    Open myfile For Output As fnum

    Const SQL = "insert into <tbl>(<cols>) values (<vals>)"
    Dim dictSQL As Object, rw1 As Range, r As Long, rowSQL
    Dim k, c As Range
    Dim cols, vals

    'Your code continues... 
```

**附带说明：**一般来说，使用`ActiveSheet`/不是一个好主意`ActiveWorkbook`，因为如果您的代码在执行过程中激活了不同的对象，这可能会被搞砸。为避免此问题，您应将每个工作表显式设置为对象（不使用`ActiveSheet`！）。“ThisWorkbook”将确保代码仅在调用代码的工作簿上运行，这是朝着正确方向迈出的一步`ActiveWorkbook`。

**另一个注意事项：**您还应该养成明确声明变量的习惯。如果未指定数据类型，`Variant`则使用默认类型，这将比您的简单类型（`Integer`等）占用更多内存。此外，允许在一行上调暗多个变量，但每个变量都必须在类型规范中。

换句话说，以下（来自您的代码）将产生 2 个变量，一个 (c) 类型`Range`，另一个 (k) 一个 Variant。

```
Dim k, c As Range 
```

**最后（然后我会离开我的肥皂盒）：**使用`Option Explicit`（只需将其添加到所有模块的顶部）来强制声明变量是一个非常好的主意。如果不这样做，可能会导致更难追踪某些直到运行时才会被发现的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:22:42.510

您永远不会更改 for 语句中的工作表，因此 DoSQL 子始终从同一个工作表中提取数据。您要么需要在循环中选择当前工作表，要么将当前工作表传递给 DoSQL 子程序以供使用。

这应该可以解决问题：

```
 For Each current In ActiveWorkbook.Worksheets
      Current.Select
      Call DoSQL
      'MsgBox ActiveWorkbook.Worksheets(I).Name
   Next 
```

# laravel - Laravel：如何只渲染模板的一部分？

> ID：15096241
> 
> 赞同：19
> 
> 时间：2013-02-26T18:12:10.150
> 
> 标签：laravel, laravel-4

我正在尝试在我的网站上使用 pjax，这意味着对于整页请求，我会渲染整个模板（这是正常行为），但在 pjax 请求上我只想渲染一个部分。我的模板都扩展了主模板。

我怎样才能最优雅地做到这一点？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-06-08T03:58:27.373

这是一个老问题，但我想提出另一个解决方案。

假设您有一个名为 main.blade.php 的视图布局***和***另一个扩展名为***page.blade.php的视图***

***主刀片.php***

```
<!DOCTYPE html>
<html lang="en-GB">
<head>
    <title>My Title</title>

    @section('head')
        <link rel="stylesheet" href="{{ URL::asset('css/style.css') }}">
    @show
</head>
<body>

    @yield('content')

    @section('footer')
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script type="text/javascript" src="{{ URL::asset('js/main.js') }}"></script>
    @show
</body>
</html> 
```

***page.blade.php***

```
@extends('main')

@section('content')
    <div class="container">
        This is a rendered page
    </div>
@stop 
```

只是一个简单的基本模板即可开始。在您的控制器中，如果您返回 a `View::make('page')`，您将获得完整的 HTML，但 Laravel 提供了一种返回特定部分的方法。下面是一个示例，说明如何根据是否来自控制器内部的 ajax 调用来显示您想要的内容：

***my_controller.php***

```
function get_index() {
    $view = View::make('page');

    if(Request::ajax()) {
        $sections = $view->renderSections(); // returns an associative array of 'content', 'head' and 'footer'

        return $sections['content']; // this will only return whats in the content section

    }

    // just a regular request so return the whole view

    return $view;
} 
```

现在，当您对页面进行 ajax 调用时，它只会返回内容部分而不是整个 HTML。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-18T18:15:19.897

为什么不使用 div 或 html 元素替换渲染页面中的实际内容？

我一直用 jQuery 来做这件事。我只是构建我的初始页面并将内容发送到我的视图，这些视图在我的主布局中呈现部分。

假设我有一个左侧导航栏，然后在右侧栏有一篇文章。用户单击一个按钮以显示下一篇文章，这就是我要替换的内容。

首先从您的控制器构建初始视图

```
public function index()
{  
  $article = Article::first();
  Return View::make('homepage', compact('article'));
} 
```

现在在您的主页视图中

```
@extends('layouts.master')

@section('leftNavigation')
     @include('homepageLeftNavigation')
@stop

@section('article')
   <div id="articleContent">
     @include('article') <!-- see below, you'll update this include with the js below -->
   </div>
@stop

@section('script')
@parent
{{-- <script> --}}
//in JQuery I would do something like this
$('a.nextArticle').click(function(){
   var next = $('.nextArticle').attr("id");
   var next = next + 1;
   $('#articleContent').load({{ URL::to('articles/' + next ) }};
});
@stop 
```

假设您正在使用一个资源丰富的控制器，您可以使用您的 show() 函数，但如果您只是想要主页上的预告片，您也可以轻松地为此创建一个新函数。

在您的 show() 或 newFunctionWhateverYouCallIt() 中，您可以通过 id 获取文章

```
Article::find($id); 
```

然后将其发送到要渲染的视图。

```
return View::make('article'); 
```

最后，您调用的文章视图包括您第一次构建页面时以及通过 Jquery 或 pjax 更新后再次

```
 {{ $article->title }}
     {{ $article->body  }}
     {{ $article->date }}
     <a href="#" class="nextArticle" id="{{ $article->id }}">Next Article ></a> 
```

请注意，我没有测试过这段代码，所以我确信有一些错误，但您对更新页面单个部分的逻辑有了大致的了解。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-27T16:58:35.673

My best answer right now would be to state in your view that it must only extend the master template (layout) if the request is not being called via AJAX:

```
@if(!Request::ajax())
    @extends('master.template')
@endif 
```

Note, however, that this solution may not be best for your specific templates (I can only guess that). You'd need to make sure that each template/view only contains things that do not repeat, like side bars, etc. For example, if you have a content area that needs to be updated with pjax, then your view should only contain whatever should be changed.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T02:45:19.597

在控制器的操作中，显式返回要渲染的局部视图：

```
public function action_someajax()
{
    ...
    return View::make('mypartial', $data);
} 
```

这将呈现部分而不是控制器的布局。

# c# - 错误 msb3325 无法导入密钥文件

> ID：15096242
> 
> 赞同：1
> 
> 时间：2013-02-26T18:12:16.030
> 
> 标签：c#, visual-studio-2010, build, cruisecontrol.net

我最近克隆了一台构建机器，在域上重命名了机器，并将机器从 SATA 驱动器移到了 SSD 驱动器。

我正在尝试为 SVN 中的新分支设置新版本。该应用程序是 Visual Studio 2010 C# 和 VB.NET 代码和 VB6 代码的组合

当第一个项目尝试从命令行编译时，它无法编译并出现错误：“错误 MSB3325：无法导入以下密钥文件：“MyFile1.pfx”。密钥文件可能受密码保护。要更正此问题，请尝试再次导入证书或手动将证书安装到具有以下密钥容器名称的强名称 CSP：VS_KEY_##########"

现在我可以打开 Visual Studio 2012 IDE 并成功构建项目，包括发布和调试模式。以任何顺序。

我试图解决的事情：

1.  我已经打开了 proj 文件并选择了属性、签名，并尝试再次选择“MyFile1.pfx”文件。
2.  我已尝试再次签署 MyFile1.pfx 文件。
3.  我已将 Visual Studio 2012 项目保持打开状态，并打开了一个命令窗口。我试过'sn -i xxxxx.pfx VS_xxxxxxx"，提示时输入密码
4.  我尝试手动编辑 .*proj 文件并删除对 MyFile1.pfx 文件的引用并重建项目，然后再次添加“MyFile1.pfx”文件。

在上述每种情况下，命令行构建都会失败，而 Visual Studio 构建会成功。

我的命令行构建是我们使用构建的解决方案文件并调用 devenv.com 来构建解决方案。

我对为什么 IDE 构建有效而命令行无效感到困惑，我猜这与从 .com 和 exe 构建有关。

除了从头开始为这个分支构建构建一个新的构建机器之外，我还能做些什么吗？

谢谢你。

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:00:11.567

好的，我找到了解决方案。

这很奇怪，但却是真实的。它处理所有事情的巡航控制服务。如果其他人遇到类似问题，请检查 Cruise Control 的服务属性。

1.  打开服务.msc
2.  单击登录选项卡
3.  检查“此帐户”设置（如果已设置）。确保第一次运行的设置至少是当前用户。

我的设置是为本地管理员帐户设置的，在设置机器时我没有以本地管理员身份登录。希望这可以帮助任何其他试图追查流氓文件签名问题的人。

丹——</p>

# vba - Excel VBA - 创建新工作表的宏会导致奇怪的故障

> ID：15096244
> 
> 赞同：4
> 
> 时间：2013-02-26T18:12:20.690
> 
> 标签：vba, excel

我创建了一个宏，应该将（比如 100 个）新工作表添加到我的 excel 工作簿中。这些新工作表应该这样命名：`1%`, `1.1%`, `1.2%`, `1.3%`,..., `9.9%`, `10%`.

```
Sub AddWorkSheets()
Dim i As Double
For i = 0 To 10 Step 0.1
   Sheets.Add(after:=Worksheets(Worksheets.Count)).Name = i & "%"
Next i
End Sub 
```

当我运行此代码时，起初一切正常 - 它添加了如上所述命名的新工作表。但它只适用于 worksheet `5.9%`。在该工作表之后，所有其他人都会得到类似`5.99999999`、`6.09999999`等`7.2999999`的名称。有没有人解释为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T18:17:53.883

发生这种情况是因为您正在使用带有浮点数学的 for-next 循环，其中无法精确表示小数。

[这里有大量关于SO](https://www.google.com/#hl=es-419&safe=off&sclient=psy-ab&q=floating+point+math+site%3astackoverflow.com&oq=floating+point+math+site%3astackoverflow.com&gs_l=hp.3...8170.17173.3.17395.23.23.0.0.0.0.258.4715.0j2j20.22.0...0.0...1c.1.4.psy-ab.k_YYOsWwU9o&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.42965579,d.eWU&fp=5696055428e451b2&biw=1440&bih=752)的解释，为什么会发生这种情况。下面，一种更正代码的方法。

```
Sub AddWorkSheets()
Dim i As Double
For i = 0 To 100 Step 1
  Sheets.Add(after:=Worksheets(Worksheets.Count)).Name = round(i/10,1) & "%"
Next i
End Sub 
```

# ios - iOS UIButtons 没有响应

> ID：15096250
> 
> 赞同：0
> 
> 时间：2013-02-26T18:12:36.497
> 
> 标签：ios, objective-c, uibutton, nsarray

我遇到了一个问题，我将图像添加到具有父级（scrollView）的视图中。问题是，虽然我为每个按钮设置了一个选择器，但只有视图中最近生成的按钮才会响应选择器并调用该方法。

```
for (int i = 0; i < [_wordsArray count]; i++) {

    buttonFrame = CGRectMake(WORDSLEFTBOUNDARY, heightPlacement, [_detailSlider value], [_detailSlider value]);
    UIButton *button = [[UIButton alloc] initWithFrame: buttonFrame];

    // set the image for the button
    [button setImage:[UIImage imageNamed:@"wordicon.png"] forState:UIControlStateNormal];
    [button setTag:i]; // set tag identifier for the button

    // add selector method 'buttonClickedAction' so that the method is called when a user
    // clicks one of the buttons.
    [button addTarget:self
               action:@selector(buttonClickedAction:)
     forControlEvents:UIControlEventTouchUpInside];

    [_buttonsView addSubview: button]; // add newly created button as a subview to the buttonView

    [_wordButtonArray addObject:button]; // insert newly created button into the wordButtonArray

    if (i < [_dateDifferences count]) {
        heightPlacement -= 60 + (60 * [[_dateDifferences objectAtIndex:i] intValue]);
    }
} 
```

因此，在上面的代码中，我创建了每个按钮并在将其添加到按钮数组之前添加了选择器。但是由于某种原因没有调用我的响应者方法（buttonClickedAction）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:15:23.540

对于您设置相同框架的所有按钮`buttonFrame`。因此按钮添加一个在另一个上方，最新添加在顶部。因此该按钮的操作仅响应

解决方案

*   记录按钮框架。

> NSLog(@"%@",NSStringFromCGRect(buttonFrame));

*   放置背景图像以使按钮可见
*   使用迭代值给出一个单独的框架以使按钮单独可见
*   检查 _buttonsView 的框架并检查它在视图中是否可见，并确保buttonsframe 是 _buttonsView 中的可见框架

使用它来初始化按钮

```
 UIButton *button=[UIButton buttonWithType:UIButtonTypeCustom];
    [button setFrame:buttonFrame]; 
```

最后但并非最不重要的一点是，该操作可能被 2 个原因阻止

1.  该按钮不在superview的可见框架中
2.  其他一些视图位于按钮的顶部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:28:26.527

我不确定，但可能是因为您的 initWithFrame 引用了一个不断更新的 CGRect 变量。不要使用变量，而是直接在 initWithFrame 中使用 CGRectMake

例如

```
UIButton *button = [[UIButton alloc] initWithFrame: CGRectMake(WORDSLEFTBOUNDARY, heightPlacement, [_detailSlider value], [_detailSlider value])]; 
```

# iphone - 了解坐标、视图、子视图和方向变化

> ID：15096253
> 
> 赞同：3
> 
> 时间：2013-02-26T18:12:47.857
> 
> 标签：iphone, ios, objective-c, ipad, uistoryboard

所以，我正在为 iPad 构建一个 iOS 应用程序。该应用程序中嵌入了视频聊天。我已经得到了视频聊天、通知等所有工作。我的问题是界面。顺便说一句，我是 iOS 编程的菜鸟；我两周前才开始这样做。抱歉，如果这篇文章有点长，我只是想强调一下这里可能发生的一切以及我的思考过程。欢迎任何批评。

我有一个显示大部分信息的 UIWebView（称为 webView）。单击按钮时，我希望调整其大小并显示一个小的新视图，其中包含三个项目：与您聊天的人（称为 imageOne）、您的视频聊天（称为 imageTwo）和挂起向上按钮（称为 buttonHangUp）。如果设备处于横向，我希望新视图出现在右侧，imageOne、imageTwo 和 buttonHangUp 处于垂直位置。如果设备是纵向的，我希望新视图出现在底部，imageOne、image Two 和 buttonHangUp 处于水平位置。

以下是我的思考过程：

*   我阅读了文章[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html#//apple_ref/doc/uid/TP40007457-CH7-SW14](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html#//apple_ref/doc/uid/TP40007457-CH7-SW14)并考虑创建一个替代横向视图在方向改变时调用的情节提要中。然后我意识到这行不通，因为每个中的 webView 将是一个单独的实体，因此当用户来回切换时，webView 上的导航将不同步
*   我意识到我应该放入一个包含 imageOne、imageTwo 和 buttonHangUp 的不同视图。称它为 viewTwo。viewTwo 应该开始隐藏并仅在从 webView 调用它时出现，并且应该在方向更改时与其中的所有项目一起重新定位和调整大小。

我继续使用第二个选项（如果有更简单的方法或者我应该做其他事情，请告诉我；我很想学习交易的技巧和窍门）。

这是我的代码的运行方式：

*   我在那里做了一个全局变量isLandscape a la apple tutorial
*   我制作了 6 个其他全局变量 CGRects，每个变量用于保存纵向和横向中不同项目的位置（imageOnePortrait、imageOneLandscape 等）
*   我实现了 awakeFromNib，将肖像变量设置为项目的初始位置和大小

    ```
    (void) awakeFromNib
    {
    isLandscape = NO;

    imageOnePortrait = self.imageOne.frame;
    imageTwoPortrait = self.imageTwo.frame;
    buttonHangUpPortrait = self.buttonHangUp.frame;

    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:) name:UIDeviceOrientationDidChangeNotification object:nil];
    } 
    ```

*   我按照苹果文档中的描述实现了orientationChanged 方法。但是，我将 UIDeviceOrientation 替换为 UIInterfaceOrientation 因为 UIDeviceOrientation 没有发送我正在寻找的横向/纵向方向，而是发送面朝上和面朝下消息

    ```
    - (void) orientationChanged:(NSNotification *)notification
    {
    UIInterfaceOrientation interfaceOrientation = [UIApplication sharedApplication].statusBarOrientation;
    if(UIInterfaceOrientationIsLandscape(interfaceOrientation) && !isLandscape)
    {
        CGRect temp = self.videoView.frame;
        temp.size.width = 360;
        temp.size.height = 748;
        temp.origin.x = 664;
        temp.origin.y = 0;
        self.videoView.frame = temp;
        self.imageOne.frame = imageOneLandscape;
        self.imageTwo.frame = imageTwoLandscape;
        self.buttonHangUp.frame = buttonHangUpLandscape;
        isLandscape = YES;
    }
    else if (UIInterfaceOrientationIsPortrait(interfaceOrientation) && isLandscape)
    {
        CGRect temp = self.videoView.frame;
        temp.size.width = 768;
        temp.size.height = 300;
        temp.origin.x = 0;
        temp.origin.y = 703;
        self.videoView.frame = temp;
        self.imageTwo.frame = imageTwoPortrait;
        self.imageOne.frame = imageOnePortrait;
        self.buttonHangUp.frame = buttonHangUpPortrait;
        isLandscape = NO;
    }
    } 
    ```

*   在 viewDidLoad 下，我设置了 Landscape 坐标的坐标（我假设这些坐标是在调用orientationMade 函数之前加载的，并且它们是相对于videoView 的——如果我需要将它们设置为相对于某些东西，请纠正我否则；我看到它们在情节提要中相对于 videoView 设置）：

    ```
    imageOneLandscape.origin.x = 20;
    imageOneLandscape.origin.y = 20;
    imageTwoLandscape.origin.x = 20;
    imageTwoLandscape.origin.y = 288;
    buttonHangUpLandscape.origin.x = 20;
    buttonHangUpLandscape.origin.y = 556; 
    ```

*   在发起视频通话的函数下，我调整了 webView 的大小，并显示了 videoView：

    ```
    CGRect temp = self.webView.frame;

    if(isLandscape)
    {
        temp.size.width -= self.videoView.frame.size.width;
        temp.origin.x = 0;
        temp.origin.y = 0;
        self.webView.frame = temp;
    } else {
        temp.size.height -= self.videoView.frame.size.height;
        temp.origin.x = 0;
        temp.origin.y = 0;
        self.webView.frame = temp;
    }

    self.videoView.hidden = FALSE; 
    ```

*   然后我在 buttonHangUp 函数中做相反的事情

发生了几件错误的事情：

*   当我切换方向时，videoView 并不总是移动或调整大小，并且当它移动时，移动通常会延迟（在其余项目旋转后一秒钟发生）
*   当我切换到横向时，imageOne 和 imageTwo 被水平挤压，并且不在对齐中，我已将它们设置为
*   当我切换到肖像时，事情似乎一直都很好。videoView 总是会出现在正确的位置，它的子视图（imageOne、imageTwo 和 buttonHangUp）也是如此。
*   当我将 ipad 平放时，imageOne 和 imageTwo 从纵向视图中消失，而没有改变方向
*   即使我将视图设置为在 viewDidLoad 中以不同的布局显示，它们也会重置为它们在情节提要中的布局

谁能向我解释这里发生了什么以及为什么会发生？这让我很困惑。我认为这与在 webView 和应用程序本身的坐标之间切换的坐标系、执行的不同函数的优先顺序（awakeFromNib、第一次从情节提要设置的视图坐标、viewDidLoad 等）以及重新绘制子视图，或者结合所有这些问题，可能还有更多。接下来我将调查这些问题。

我也很感激有人提到实现我想要的最佳实践是什么；正如我所说，我对此并不陌生，不幸的是，苹果文档并未涵盖就我的案例而言被认为是最佳实践的内容。文章链接也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:36:36.020

好吧，你有一个非常长的问题，但我会给你一部分，告诉你为什么你的设备方向不能正常工作。

您没有指定要为其生成通知的对象。

改变这个：

```
 [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:) 
name:UIDeviceOrientationDidChangeNotification object:nil] 
```

对此：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
        [[NSNotificationCenter defaultCenter]
         addObserver:self selector:@selector(orientationChanged:)
         name:UIDeviceOrientationDidChangeNotification
         object:[UIDevice currentDevice]]; 
```

另外需要注意的是，您没有利用通知中心的强大功能。你做了额外的工作，而不是抓住通知内发送的实际方向。您不需要每次都检查 UIInterfaceOrientation，您可以像这样从注释中获取设备方向：

```
- (void) orientationChanged:(NSNotification *)note
{
    UIDevice *device = note.object;
    switch(device.orientation)//do whatever you want in each orientation
    {
        case UIDeviceOrientationPortrait:
            break;
        case UIDeviceOrientationPortraitUpsideDown:
            break;
        case UIDeviceOrientationLandscapeLeft:
            break;
        case UIDeviceOrientationLandscapeRight:
            break;
        default:
            break;
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:21:50.640

昨天经过几个小时的调试后，我修复了我的代码。以下是所有出错的地方，希望对如何以编程方式处理切换方向有帮助：

*   首先，在 awakeFromNib 中，不要放置任何处理坐标和位置的代码。awakeFromNib 在视图开始加载之前被调用，因此它对位置一无所知。在 viewDidLoad 中进行所有坐标初始化。
*   其次，确保将自动布局设置为关闭，并将任何容器视图的自动调整大小子视图设置为关闭。这让我绊倒了一段时间。
*   三、使用这里描述的调用设备方向的apple方法：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html#//apple_ref/doc/uid/TP40007457-CH7- SW14](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html#//apple_ref/doc/uid/TP40007457-CH7-SW14)。我发现这比上面描述的状态栏方向要可靠得多。
*   第四，这在上面的代码中是错误的，并且是我的错误，请确保初始化您需要移动的所有组件的大小。上面用于在横向和纵向之间移动的 CGRect 定义了原点，但没有大小，这导致我的视​​图在设置为它们时消失。
*   第五，最后，确保在滑块出现/消失时对横向和纵向全局变量进行大小调整，因为如果设备用滑块向后翻转，那么滑块上方的代码将遮盖部分网络视图。

我仍然欢迎任何关于人们如何处理横向和纵向布局的评论！

# asp.net-mvc - 为什么调用webapi和Odata时ajax调用的数据返回有差异？

> ID：15096254
> 
> 赞同：1
> 
> 时间：2013-02-26T18:12:48.673
> 
> 标签：asp.net-mvc, jquery, odata

大家好，为什么data normall webapi在ajax调用中返回数据，而odata在ajax调用中返回data.d.results..它们之间有什么区别

```
 normall webapi call using ajax

   $.ajax({
        url: url,
        jsonp: '$callback',
        dataType: 'jsonp',
        success: function (data) { 
       //data is returned as data when an webapi is called               
                PreReqisites.varResult = data;
                  }                    
             }); 
```

但是当调用 odata 服务时

```
 $.ajax({
        url: url,
        jsonp: '$callback',
        dataType: 'jsonp',
        success: function (data) { 
       //data is returned as data.d.results when an webapi is called               
                PreReqisites.varResult = data.d.results;
                  }                    
             }); 
```

为什么在 webapi 的 odata 中以这些方式返回的数据有谁能告诉我它的优缺点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:14:31.090

> 为什么在 webapi 的 odata 中以这些方式返回的数据有谁能告诉我它的优缺点

每个 Web 服务通常都定义了自己的数据结构。由您决定结构是什么以便正确处理它。

使用像 firebug 这样的控制台，检查每种类型的返回数据，并亲自查看差异。

一旦你知道期望什么数据结构，相应地编码你的命名空间（即`some.data.key`）

# c# - HTTPWebRequest，如何防止主机/标头值更改大小写

> ID：15096265
> 
> 赞同：1
> 
> 时间：2013-02-26T18:13:36.317
> 
> 标签：c#, asp.net, .net, httpwebrequest

我正在使用 HttpWebrequest (.Net 4.0) 通过此代码与我的服务器通信。我的问题是，客户端对象将请求的“主机”部分转换为小写（在我的情况下为“TETRA_20”），然后再将其写入线路。因此我的服务器拒绝了这个 HTTP 请求。

有人遇到过类似的问题并解决了吗？这是 .Net 框架的问题吗？

```
HttpWebRequest client = (HttpWebRequest)WebRequest.Create(uri);
WebHeaderCollection myWebHeaderCollection = client.Headers;
client.SendChunked = false;

if (hostAlias != null)
   client.Host = "TETRA_20";
client.UserAgent ="Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20100101 Firefox/11.0";                
client.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
client.KeepAlive = true;

myWebHeaderCollection.Set("Cache-Control", "max-age=0");
myWebHeaderCollection.Set("Accept-Encoding", "gzip,deflate");
myWebHeaderCollection.Set("Accept-Language", "en-US,en;q=0.5");

WebResponse responseData = client.GetResponse(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:20:27.623

通过谷歌找到这个。RFC2616（第 3.2.3 节）规定**主机头评估必须不区分大小写**。因此，在...之前将 Host 标头值设置为小写是一个好习惯。

**3.2.3 URI比较**

在比较两个 URI 以确定它们是否匹配时，客户端应该使用区分大小写的字节对整个 URI 进行逐个字节比较，但以下情况除外：

> *   空端口或未指定端口等效于该 URI 引用的默认端口；
>     *   主机名的比较必须不区分大小写；
>     *   方案名称的比较必须不区分大小写；
>     *   空的 abs_path 等效于 "/" 的 abs_path。

# fortran90 - Fortran 90 格式化输出

> ID：15096266
> 
> 赞同：1
> 
> 时间：2013-02-26T18:13:42.043
> 
> 标签：fortran90, gfortran

我有三个数组，x，y，z。我想将这些打印到前面带有字符“C”的文件中：

```
write(88,FMT1) 'C',(x(i),y(i),z(i),i=1,187) 
```

其中 FMT1 定义为：character(len=10) :: FMT1='(A,3f12.6)'

当我运行程序时，我得到以下输出：

```
C   -1.084900    0.336400    1.074500
I���    0.365700   -3.548800    0.591000
�Ty@   -0.383200    1.417100    3.416700 
```

等等

我在 ubuntu 12.04 中使用 gfortran。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:56:04.260

```
write(88,'(a,3f12.6)') (('C',x(i),y(i),z(i)),i=1,187) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:56:16.517

您还必须重复字符“C”：

```
write(88, FMT1) ('C', x(i), y(i), z(i), i = 1, 187) 
```

# objective-c - 将滚动视图添加到另一个滚动视图不起作用

> ID：15096267
> 
> 赞同：0
> 
> 时间：2013-02-26T18:13:48.467
> 
> 标签：objective-c, uiscrollview

我有一个在界面生成器中设置的视图，我在 IB 中添加了一个滚动视图，现在我正在尝试添加另一个滚动视图，它只是父滚动视图的一部分。在子滚动视图上，我正在尝试使用一个动态大小的标签，该标签将驻留在另一个固定标签下。

```
UIScrollView *ingredientsScrollView = [[UIScrollView alloc]
                                       initWithFrame:CGRectMake(20, 287, 280, 300)];
ingredientsScrollView.scrollEnabled = YES;
UILabel *ingredientsLabel = [[UILabel alloc] initWithFrame:CGRectMake(230, 310, 70, 21)];
ingredientsLabel.text = @"מצרכים";

UILabel *baseLabel = [[UILabel alloc] initWithFrame:CGRectMake(230, 325, 70, 21)];
baseLabel.text = @"חומרים לבסיס";

UILabel *baseIngredientsLabel = [[UILabel alloc] init];

    CGSize maximumLabelSize = CGSizeMake(296,9999);

CGSize expectedLabelSize = [baseIngredientsString sizeWithFont:baseIngredientsLabel.font
                                  constrainedToSize:maximumLabelSize
                                      lineBreakMode:baseIngredientsLabel.lineBreakMode];

//adjust the label the new height.
CGRect newFrame = baseIngredientsLabel.frame;
newFrame.size.height = expectedLabelSize.height;
baseIngredientsLabel.frame = newFrame;

//i added text to the string in some way
baseIngredientsLabel.text = baseIngredientsString;

[ingredientsScrollView addSubview:ingredientsLabel];
[ingredientsScrollView addSubview:baseIngredientsLabel];

[scrollView addSubview:ingredientsScrollView]; 
```

当我运行应用程序时，没有添加子滚动视图，也没有添加标签？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:45:55.537

子滚动视图正在添加，只是您没有注意到它，因为它具有白色背景，而父滚动视图也具有白色背景。此外，您还没有为任何一个滚动视图设置 contentSize 属性，因此它们不会滚动。您的标签偏离当前视图，您无法滚动查看它们。

尝试一些这样的事情来分析你的观点：

```
self.scrollView.contentSize = CGSizeMake(400,9999);
ingredientsScrollView.contentSize = CGSizeMake(400,9999);
self.scrollView.backgroundColor = [UIColor redColor];
ingredientsScrollView.backgroundColor = [UIColor blueColor]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:48:48.203

先尝试几件事。

尝试将您的`ingredientsScrollView`直接添加到视图中。如果它没有出现，您可能遇到了未调用该方法的问题。这还将测试您的标签是否被添加到`ingrediantsScrollView`.

此外，关于您的动态大小的 UILabel。你为什么不只是使用`[baseIngredientsLabel sizeToFit]`？它比您当前尝试对框架执行的操作要简单得多。

# python - 在 Python 中读取输入的最快方法

> ID：15096269
> 
> 赞同：11
> 
> 时间：2013-02-26T18:13:52.973
> 
> 标签：python, input, python-3.x, readfile

我想阅读一个包含整数列表列表的巨大文本文件。现在我正在执行以下操作：

```
G = []
with open("test.txt", 'r') as f:
    for line in f:
        G.append(list(map(int,line.split()))) 
```

但是，大约需要 17 秒（通过 timeit）。有什么办法可以减少这个时间吗？也许，有一种方法不使用地图。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-26T19:26:07.700

numpy 具有 和 的功能`loadtxt`，`genfromtxt`但都不是特别快。广泛分布的库中最快的文本阅读器之一是( [http://pandas.pydata.org/](http://pandas.pydata.org/) )中的`read_csv`函数。在我的电脑上，读取每行包含两个整数的 500 万行大约需要 46 秒，使用 26 秒，使用 1 秒多一点。`pandas``numpy.loadtxt``numpy.genfromtxt``pandas.read_csv`

这是显示结果的会话。（这是在 Linux 上，Ubuntu 12.04 64 位。你在这里看不到它，但是在每次读取文件后，通过`sync; echo 3 > /proc/sys/vm/drop_caches`在单独的 shell 中运行来清除磁盘缓存。）

```
In [1]: import pandas as pd

In [2]: %timeit -n1 -r1 loadtxt('junk.dat')
1 loops, best of 1: 46.4 s per loop

In [3]: %timeit -n1 -r1 genfromtxt('junk.dat')
1 loops, best of 1: 26 s per loop

In [4]: %timeit -n1 -r1 pd.read_csv('junk.dat', sep=' ', header=None)
1 loops, best of 1: 1.12 s per loop 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T19:46:51.490

[`pandas`](http://pandas.pydata.org/)它基于`numpy`有一个非常快的`C`基于[文件解析器：](http://wesmckinney.com/blog/?p=543)

```
# generate some integer data (5 M rows, two cols) and write it to file
In [24]: data = np.random.randint(1000, size=(5 * 10**6, 2))

In [25]: np.savetxt('testfile.txt', data, delimiter=' ', fmt='%d')

# your way
In [26]: def your_way(filename):
   ...:     G = []
   ...:     with open(filename, 'r') as f:
   ...:         for line in f:
   ...:             G.append(list(map(int, line.split(','))))
   ...:     return G        
   ...: 

In [26]: %timeit your_way('testfile.txt', ' ')
1 loops, best of 3: 16.2 s per loop

In [27]: %timeit pd.read_csv('testfile.txt', delimiter=' ', dtype=int)
1 loops, best of 3: 1.57 s per loop 
```

因此`pandas.read_csv`，读取您的数据大约需要 1.5 秒，并且比您的方法快 10 倍左右。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T18:28:49.573

作为一般经验法则（几乎适用于任何语言），使用`read()`读取整个文件将比一次读取一行更快。如果您不受内存限制，请立即读取整个文件，然后在换行符上拆分数据，然后遍历行列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T18:26:31.500

您也可以尝试通过批量插入将数据导入数据库，然后使用集合操作处理您的记录。根据您必须执行的操作，这可能会更快，因为批量插入软件已针对此类任务进行了优化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T18:19:17.053

最简单的加速是使用 PyPy [http://pypy.org/](http://pypy.org/)

下一个根本不读取文件的问题（如果可能的话）。而是像流一样处理它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T18:20:01.910

列表推导通常更快。

```
G = [[int(item) item in line.split()] for line in f] 
```

除此之外，试试 PyPy 和 Cython 和 numpy

# google-app-engine - Objectify - 将自动生成的密钥发送到 GWT 客户端

> ID：15096276
> 
> 赞同：1
> 
> 时间：2013-02-26T18:14:18.223
> 
> 标签：google-app-engine, gwt, objectify

如何将服务器端自动生成的密钥反映到 GWT 应用程序客户端的实体中？

假设我有带有关键字段的新对象化实体`@Id Long id;`

保存前，id 的值为空。保存键值自动生成并更新 pojo 后，但仅在服务器端，而不是客户端。因此，当我第二次按下“保存按钮”时，我在数据库中得到了重复的对象，因为生成了新的键值。

如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:09:18.827

您是否使用异步接口，而不是调用 now()？Objectify 确实将自动生成的密钥填充到您的 POJO 中，但仅在异步结果完成时。

# ruby-on-rails - Ruby on Rails 3 + Devise + Redis 的 Rspec 速度非常慢

> ID：15096286
> 
> 赞同：1
> 
> 时间：2013-02-26T18:14:37.597
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rspec2, rspec-rails

我正在使用 Rspec 来测试我们的 cancan ability.rb 文件。虽然应用程序在开发模式下运行得非常快，但 rpsec 非常慢，并且日志不显示长 db 或查看渲染时间。您如何诊断 Rspec 运行速度如此缓慢的原因？

更新 - 在 gemfile 中：

```
group :test do
  gem 'debugger'
  gem "rspec-rails"
  gem 'email_spec'
  gem 'factory_girl_rails'
end

gem 'rails', '3.2.11'
gem 'rack', '1.4.1' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:55:02.180

对我来说最喜欢的方法是设置[guard](https://github.com/guard/guard)和[spork](https://github.com/sporkrb/spork)，因为当 guard 只运行影响更改文件的测试时，spork 预加载以获得更好的性能。

以下截屏视频将让您立即启动并运行：

[叉烧](http://railscasts.com/episodes/285-spork)

[警卫](http://railscasts.com/episodes/264-guard)

# android - 加载时将主屏幕置于后台？

> ID：15096288
> 
> 赞同：0
> 
> 时间：2013-02-26T18:14:43.923
> 
> 标签：android

我正在使用一个`AsynTask`，当我进入处理时，它正在从网络服务器获取一些信息，我想显示一个加载对话框。目前我有一个进度微调器，我可以看到它，`onPreExecute`但我想在它执行此操作时让 UI 的其余部分失焦。

这样做的正确方法是什么，我应该使用弹出式对话而不是仅使用进度条吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:19:12.133

```
...but I wanted to put the rest of the UI out of focus whilst it does this. 
```

我有一个好主意为什么不模糊你的应用程序的窗口以获得你需要的效果

```
 WindowManager.LayoutParams lp = dialog.getWindow().getAttributes();  
      lp.dimAmount = 0.0f;  
      dialog.getWindow().setAttributes(lp);  
      dialog.getWindow().addFlags(WindowManager.LayoutParams.FLAG_BLUR_BEHIND) 
```

[如何使活动模糊/变暗](https://stackoverflow.com/a/8386471/488434)

* * *

或使用[ProgressDialog](http://developer.android.com/reference/android/app/ProgressDialog.html)的使用示例`ProgressDialog`：

```
 ProgressDialog pd = new ProgressDialog(MyApp.this);
      pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
      pd.setMessage("Working...");
      pd.setIndeterminate(true);
      pd.setCancelable(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:19:28.083

您可以在那里起诉[对话框](http://developer.android.com/guide/topics/ui/dialogs.html)，您可以使用微调器和文本制作您的自定义对话框并设置它，`MY_DIALOG.setCancelable(false)`直到它完成加载数据。

# ember.js - EmberJS：如何发布，然后立即编辑

> ID：15096289
> 
> 赞同：1
> 
> 时间：2013-02-26T18:14:45.730
> 
> 标签：ember.js, ember-data

我正在尝试执行以下操作：

*   “创建”一个对象（通过 POST 到服务器）
*   然后立即在客户端上编辑它。

所以基本上这意味着 UI 可以保持不变 - 除了下次单击“提交”时，表单是 PUT 而不是 POST。

1- 现在，只要我提交表单，它就会用新数据刷新。

为什么这样做？

```
 App.FooNewRoute = Ember.Route.extend({
      ...
      events: {
        submit: function(){ 
            this.store.commit(); // The form content changes
        }
      }

    }); 
```

2-我的第一个直言不讳的方法是做 POST 然后编辑是打电话

```
 this.transitionTo('foo.edit', this.get('controller').get('model')); 
```

紧接着

```
 this.store.commit(); 
```

但它不起作用，当我尝试编辑它时，我理解为什么（对象仍然“被保存” - 或 inFlight - ）。

但是怎么做呢？

谢谢！PJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:28:10.583

基本上，您需要等待交易完成，然后再进行转换。

```
App.FooNewRoute = Ember.Route.extend({
  ...

  events: {
    submit: function(){
      var foo,
        _this = this;
      foo = this.get('controller').get('model'); 

      // Register a one-time callback for the 'didCreate' event
      foo.one('didCreate', function() {
        // At this point the model's id has not been set, so wait till next run loop
        Ember.run.next(_this, function() {
          // Now foo is ready, transition to edit
          this.transitionTo("foo.edit", foo);
        });
      });
      this.store.commit();
    }
  }
}) 
```

# php - 函数 date_default_timezone_set() 不可用

> ID：15096297
> 
> 赞同：11
> 
> 时间：2013-02-26T18:15:13.353
> 
> 标签：php, date, timezone

正如标题所说，任何人都可以解释为什么代码

```
ini_set( 'date.timezone', 'Europe/Athens' ); 
```

有效，但

```
date_default_timezone_set( 'Europe/Athens' ); 
```

才不是？它给了我这个错误：

> 致命错误：调用未定义的函数 date_default_timezone_set()

我正在寻找一种转换时间戳的解决方案，而我在网上能找到的只是使用`date_default_timezone_set`. 但转换总是有 1 小时的差异。

然后我发现这个主题“[`strftime()`函数显示不正确的时间](https://stackoverflow.com/a/10503708/972773 "strftime() 函数显示不正确的时间")”正在使用 init_set 代码（后来我有 RTM 并发现它已经在文档中提到）。我试过了，它奏效了。

但我还没有找到为什么`date_default_timezone_set`不起作用的答案。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-15T05:52:40.703

您必须使用旧版本的 PHP。

```
date_default_timezone_set is for PHP 5.1.2 and above. 
```

尝试`php -v`检查您的 PHP 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-26T18:58:01.720

您可以使用：

```
putenv("TZ=Europe/Berlin"); // PHP 4 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-08-22T02:50:32.217

[本地主机](http://i.stack.imgur.com/fL72H.png)

[服务器](http://i.stack.imgur.com/tbITj.png)

已经很晚了，我遇到了同样的问题，我看到了不同之处，我从我的本地主机和我的个人服务器 phpinfo 发布了时区的屏幕截图。

在我的本地主机上， date_default_timezone_set('[timezone]') 工作正常，但是，在服务器上，它总是返回 UTC。根据 php 文档，看起来我的服务器的 php ini 中没有设置时区，所以我可能忽略了时区设置，因为之前没有定义任何值。

使用 init_set，它使时区可用。我认为时区未在 php ini 上预定义是原因。

# c# - 带有每个刻度标签的自定义 TrackBar

> ID：15096298
> 
> 赞同：1
> 
> 时间：2013-02-26T18:15:14.960
> 
> 标签：c#, winforms, trackbar

我需要制作一个自定义轨迹栏，它需要看起来像 VMWare 中的这个：[Image1](http://s21.postimage.org/k0vdl5plj/Capture.png)，这是我能得到的最好的：[Image2](http://s3.postimage.org/uej2f969v/Capture2.png)

我该怎么做？我试图在它旁边放置标签，但这似乎不起作用（我无法让它们与刻度线（- 标志）对齐。有谁知道如何创建这样的控件或如何对齐标签？谢谢！

编辑：是的，我已经搜索了网络和这个网站，但我找不到任何对我有用的东西。

# ruby - 提高大 attr_accessor 的可读性

> ID：15096300
> 
> 赞同：2
> 
> 时间：2013-02-26T18:15:19.000
> 
> 标签：ruby, coding-style, readability, human-readable

`attr_accessor`定义非常大的常量或符号时应该怎么做？例如，像这样：

```
ATTRIBUTES = %w(id name full_name owner private html_url description fork url forks_url keys_url collaborators_url teams_url hooks_url issue_events_url events_url assignees_url branches_url tags_url blobs_url git_tags_url git_refs_url trees_url statuses_url languages_url stargazers_url contributors_url subscribers_url subscription_url commits_url git_commits_url comments_url issue_comment_url contents_url compare_url merges_url archive_url downloads_url issues_url pulls_url milestones_url)

attr_accessor :name, :login, :full_name, :owner, :private, :html_url, :description, :fork, :url 
```

在课堂上是可怕的。这是最好的方法吗？我想知道是否还有其他方法可以提高可读性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T18:49:38.420

改变一定宽度的线条：

```
ATTRIBUTES = %w[
  id name full_name owner private html_url description fork url forks_url
  keys_url collaborators_url teams_url hooks_url issue_events_url events_url
  ...
] 
```

或者如果您不需要保存行，则将每个项目放在单独的行上可能很容易：

```
ATTRIBUTES = %w[
  id name
  full_name
  owner
  private
  html_url
  ...
] 
```

或者如果你有时间格式化，那么你可能想要制作几列并对齐它们：

```
ATTRIBUTES = %w[
  id                 name                full_name          owner             
  private html_url   description fork    url                forks_url
  keys_url           collaborators_url   teams_url          hooks_url
  issue_events_url   events_url          ...
] 
```

`%i[...]`在 Ruby 2.0 中，为符号数组引入了一个新的文字表达式：

```
attr_accessor *%i[
  name
  login
  full_name
  owner
  private
  ...
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:25:51.340

您可以使用`YAML`文件或设置配置文件。然后在初始化的时候，就可以赋值了。

示例 YAML：

```
#configuration file 
config: 

  FIRST_NAME: "Bob"
  USER_ID: "abc13324"
  LAST_NAME: "Smith"
  Etc.... 
```

示例红宝石：

```
class NewClass
     def initialize
         configFile = YAML.load_file("pathToYourYamlFile.yaml")
         @firstName = configFile['config']['FIRST_NAME']
         @lasttName = configFile['config']['LAST_NAME']
         @user_id = configFile['config']['USER_ID']
         etc....
     end
 end 
```

这最适合在程序中设置常量。然后，您可以从任何文件访问它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:56:05.380

多年来，通过反弹各种语言，我开始使用这种布局：

```
ATTRIBUTES = %w(
  archive_url assignees_url
  blobs_url branches_url

  collaborators_url comments_url commits_url compare_url 
  contents_url contributors_url

  description downloads_url
  events_url
  fork forks_url full_name
  git_commits_url git_refs_url git_tags_url
  hooks_url html_url
  id issue_comment_url issue_events_url issues_url
  keys_url
  languages_url
  merges_url milestones_url
  name
  owner
  private pulls_url

  stargazers_url statuses_url subscribers_url
  subscription_url

  tags_url teams_url trees_url
  url
)

%w(
  description
  fork full_name
  html_url
  login
  name
  owner
  private
  url
).each { |a| attr_accessor a.to_sym } 
```

行按字母顺序排序，行上的每个单词都按字母顺序排序。

如果某一行变得太长，我会将其换行并在它们之前和之后添加空行以在视觉上分隔它们，保持行的类型和行中的单词。

大多数编辑器使排序变得容易，这是清理混乱列表的第一步，这很痛苦，之后保持它的维护也没什么大不了的。我使用具有`sort`命令的 vim，但我将其视为“记事本”替代品的 Sublime Text 2 也可以。

我这样做是为了维护。我发现扫描已排序的行要容易得多，即使它与其他行在列中的间距不均匀，也比我试图找到显示在漂亮的'n整洁列中的排序顺序不同的东西要容易得多。整洁很重要，但秩序使我的头免受伤害。试图编辑列中的表格并让它全部搞砸，因为我添加了一个单词很快就会变老，所以列被扔掉了，我只是排序。我敢肯定，当我告诉他们这样做时，一开始会惹恼我的同事，但他们很快就看到了好处，这让我闭嘴了。:-)

随着 Ruby v2.0 的添加`%i`，第二个示例可以更改为：

```
%i(
  description
  fork full_name
  html_url
  login
  name
  owner
  private
  url
).each { |s| attr_accessor s } 
```

这不是一个很大的变化，但它有点清洁。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-26T18:55:26.247

在我看来，所有这些都是表列名。

如果是，则不需要 attr_accessor ，rails 会自动提供对它们的访问。

你可以打电话`object.name, object.html_url`等等。

你能确认是否是这种情况

# nosql - 使用 Cassandra 的查询范围日期

> ID：15096301
> 
> 赞同：0
> 
> 时间：2013-02-26T18:15:20.553
> 
> 标签：nosql, cassandra

我尝试使用此架构进行查询范围日期：

```
create column family fact_ingreso with comparator = UTF8Type and
key_validation_class=UTF8Type and 
column_metadata =
[{column_name: ing_fecing, validation_class: DateType,index_type:KEYS}]; 
```

我以这种方式插入数据

```
// Date format: "2010-04-01 00:00:00"
// The datos[20] has a date as a String in the above format
SimpleDateFormat formatoFecha = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
Date fecha = formatoFecha.parse(datos[20]);
System.out.println(fecha);
Column ing_fecing = new Column(toByteBuffer("ing_fecing"));
ing_fecing.setValue(ByteBufferUtil.bytes(fecha.getTime()));
ing_fecing.setTimestamp(timestamp);
client.insert(toByteBuffer(id_row), parent, ing_fecing, ConsistencyLevel.ONE); 
```

到目前为止一切顺利，但是当我尝试使用以下代码进行查询范围日期时：

```
get fact_ingreso where ing_fecing>2011-01-12; 
```

我收到错误“使用运算符 EQ 的索引子句中不存在索引列”

但是，如果我将运算符“>”替换为“=”，它会起作用：

```
get fact_ingreso where ing_fecing=2011-01-12; 
```

输出

```
RowKey: 645
=> (column=ing_fecing, value=2011-01-12 00:00:00-0300, timestamp=1361899176638) 
```

我是 Cassandra 数据库的新手，我真的需要为我的论文工作部署这个功能。如果有人可以帮助我，我真的很感激。

编辑：Cassandra 版本是 1.2 问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:11:22.803

使用 Cassandra，您必须使用 equals 子句指定至少一个值；即你不能只指定一个范围。一个简单的方法是编写一个表示已知值的哨兵列。例如，您可以编写一个代表当前月份或年份的列，然后将其用作等值。您在查询时可以知道的任何值都可以解决问题。

# c# - 通用函数无法在数组值和标准值之间进行比较

> ID：15096303
> 
> 赞同：4
> 
> 时间：2013-02-26T18:15:21.043
> 
> 标签：c#, generics

本质上，我正在尝试为矩阵编写一个通用的蛮力 getMax() 方法。这是我所拥有的：

```
 private T getMax <T>(T[,] matrix, uint rows, uint cols) where T : IComparable<T>
    {
        T max_val = matrix[0, 0];
        for (int row = 0; row < rows; ++row)
        {
            for (int col = 0; col < cols; ++col)
            {
                if (matrix[row, col] > max_val)
                {
                    max_val = matrix[row, col];
                }
            }
        }
        return max_val;
    } 
```

这将无法编译，并出现错误`Operator '>' cannot be applied to operands of type 'T' and 'T'`。我给出了 IComparable 指令，所以我不确定这里发生了什么。为什么这不起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T18:16:39.433

您必须使用 CompareTo() 而不是 > 操作。

见这里：http: [//msdn.microsoft.com/en-gb/library/system.icomparable.aspx](http://msdn.microsoft.com/en-gb/library/system.icomparable.aspx)

在你的情况下，你会说：

```
if (matrix[row, col].CompareTo(max_val) > 0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T18:18:01.443

实现`IComparable`意味着它定义了`CompareTo`方法，而不是定义了`>`运算符。你需要使用：

```
if (matrix[row, col].CompareTo(max_val) > 0) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T18:18:26.037

```
if (matrix[row, col] > max_val) 
```

应该

```
if (matrix[row, col].CompareTo(max_val) > 0) 
```

由于[IComparable](http://msdn.microsoft.com/en-us/library/4d7sx9hd.aspx)只提供`CompareTo`not `>`。

# python - 在 pythonbrew 中使用 pip

> ID：15096306
> 
> 赞同：2
> 
> 时间：2013-02-26T18:15:39.707
> 
> 标签：python, pip, pythonbrew

我已经开始使用 pythonbrew 来管理不同的 Python 安装。我想这样做的主要原因是在不影响我系统的 Python 安装的情况下安装第三方模块。

例如，我想我会`requests`使用以下方法安装库：

`pip install requests`

但是，这会导致错误提示：

`error: could not create '/usr/local/lib/python2.7/dist-packages/requests': Permission denied`

显然我不想将它安装到系统的 Python 中，即 Python 2.7.3。我确实必须使用我的包管理器安装 pip，结果路径是`/usr/bin/pip`.

如何使用 pip 安装到我的 pythonbrew 安装？（我当前的 pythonbrew Python 版本是 3.3.0）我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:59:33.703

我找到了解决方案。我通过发出`pythonbrew uninstall 3.3.0`. 然后我再次安装它`pythonbrew install --configure="--with-zlib" 3.3.0`。这允许`pip`安装，因此现在我可以使用它来安装到这个 Python 版本。

也许其他人会发现这很有帮助，干杯！

# android - 隐藏菜单项而不膨胀菜单布局

> ID：15096307
> 
> 赞同：0
> 
> 时间：2013-02-26T18:15:40.607
> 
> 标签：android, android-contextmenu

我曾经这样做：

```
menu.setHeaderTitle("Available Actions");

            android.view.MenuItem Edit = menu.findItem(R.id.edit);
            android.view.MenuItem Delete = menu.findItem(R.id.delete);

            AdapterContextMenuInfo info = (AdapterContextMenuInfo) menuInfo;

            int position = info.position;
            ListView lv = (ListView) v;
            int firstVisible = lv.getFirstVisiblePosition();
            View rowView = lv.getChildAt(position - firstVisible);

            if (Rateit.isUserLoggedIn == true) {
                 {

                    Edit.setVisible(true);
                    Delete.setVisible(true);

                } else {
                    Edit.setVisible(false);
                    Delete.setVisible(false);
                }
            } else {
                Edit.setVisible(false);
                Delete.setVisible(false);
            } 
```

现在菜单是通过不膨胀布局设置的，但是：

```
menu.add(2, 1, 0, "Edit");
menu.add(2, 2, 0, "Delete"); 
```

但是，我找不到需要将`itemId`（方法中的第二个参数）分配给/的`add`方法，所以我可以将它们设置为可见或不可见？有人知道怎么做吗？`Edit``Delete`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:21:04.070

`menu.add`如果您将其保存到变量中，则返回 a`MenuItem`然后您可以更改它们菜单的可见性，例如

```
MenuItem edit = menu.add(2, 1, 0, "Edit");
MenuItem delete = menu.add(2, 2, 0, "Delete");
edit.setVisible(Rateit.isUserLoggedIn);
delete.setVisible(Rateit.isUserLoggedIn); 
```

如果您以后不需要访问菜单项，您也可以将调用链接在一起

```
menu.add(2, 1, 0, "Edit").setVisible(Rateit.isUserLoggedIn);
menu.add(2, 2, 0, "Delete").setVisible(Rateit.isUserLoggedIn); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T18:21:10.803

[`add()`](https://developer.android.com/reference/android/view/Menu.html#add%28java.lang.CharSequence%29)返回一个 MenuItem，只需保存此值即可随时显示/隐藏它。

```
MenuItem edit = menu.add(2, 1, 0, "Edit");
// Do with "edit" as you please 
```

另请阅读[Java 命名约定](http://java.about.com/od/javasyntax/a/nameconventions.htm)，其中指出变量（如`edit`）应以小写字母开头。

# ruby - Ruby：在“何时”条件下带有 =~ && !~ 的 case 语句

> ID：15096308
> 
> 赞同：0
> 
> 时间：2013-02-26T18:15:40.000
> 
> 标签：ruby, switch-statement, match

有一个代码

```
file_paths = {nature:[], nature_thumb:[]} 
```

运行良好的 Elsif 版本：

```
 Find.find('public/uploads') do |path|
   if path =~ /.*nature.*\.(jpg|png|gif)$/ and  path !~  /.*nature\/thumb.*\.(jpg|png|gif)$/
     file_paths[:nature] << path
   elsif
     path =~ /.*nature\/thumb.*\.(jpg|png|gif)$/
     file_paths[:nature_thumb] << path
     #etc
   end 
 end 
```

案例版本导致问题

```
 Find.find('public/uploads') do |path|
   case 
   when path =~ /.*nature.*\.(jpg|png|gif)$/, path !~ /.*nature\/thumb.*\.(jpg|png|gif)$/ 
     file_paths[:nature] << path
   when path =~ /.*nature\/thumb.*\.(jpg|png|gif)$/
     file_paths[:nature_thumb] << path
     # etc
   end
 end 
```

用 '&&' 代替逗号会导致错误。逗号工作错误。如何避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:21:10.360

您的案例陈述应如下所示：

```
Find.find('public/uploads') do |path|

   case 
       #Surround your statement with parenthesis
       when ((path =~ /.*nature.*\.(jpg|png|gif)$/) && (path !~ /.*nature\/thumb.*\.(jpg|png|gif)$/)) 
         file_paths[:nature] << path
       when path =~ /.*nature\/thumb.*\.(jpg|png|gif)$/
         file_paths[:nature_thumb] << path
         # etc
       end
    end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T19:21:17.017

更改案例的顺序：

```
Find.find('public/uploads') do |path|
  case path
  when /.*nature\/thumb.*\.(jpg|png|gif)$/
    file_paths[:nature_thumb] << path
  when /.*nature.*\.(jpg|png|gif)$/
    file_paths[:nature] << path
  end
end 
```

或在您的情况下更好：

```
Find.find('public/uploads') do |path|
  file_paths[
    case path
    when /.*nature\/thumb.*\.(jpg|png|gif)$/ then :nature_thumb
    when /.*nature.*\.(jpg|png|gif)$/        then :nature
    end
  ] << path
end 
```

# asp.net - 从应用程序中的所有程序集执行安装程序

> ID：15096311
> 
> 赞同：0
> 
> 时间：2013-02-26T18:15:53.430
> 
> 标签：asp.net, castle-windsor, integration-testing

我正在尝试创建一个`IWindsorContainer`工厂来执行与应用程序一起打包的所有安装程序（即`bin`文件夹中的所有内容）

它需要为：

1.  Windows 客户端应用程序（可能与 Clickonce 一起安装也可能不安装）
2.  Windows 服务
3.  基于 NUnit 的集成测试套件（可以在开发时使用 R# 运行）
4.  一个 ASP.NET MVC 应用程序

`FromAssembly.InThisApplication()`不起作用，因为这不是“根”程序集（甚至可能没有*根*程序集）

我的第一个天真的实现是：

```
return new WindsorContainer()
           .Install(
               FromAssembly.InDirectory(
                    new AssemblyFilter(
                        Path.GetDirectoryName(
                            Assembly.GetExecutingAssembly()
                                    .Location)))); 
```

这适用于 1 和 2，但不适用于其余部分。

然后我尝试了：

```
return new WindsorContainer()
           .Install(
               FromAssembly.InDirectory(
                    new AssemblyFilter(
                        Path.GetDirectoryName(
                            new Uri(
                                Assembly.GetExecutingAssembly()
                                        .CodeBase)
                                .LocalPath)))); 
```

这至少适用于 ASP.NET，但可能会破坏卷影复制。

我有更好的替代方案来支持卷影复制方案吗？

或者我应该忘记整个想法并`Install(FromAssembly.InThisApplication())`从入口点程序集运行，确保所有引用都是明确的？

* * *

附加信息：

此代码是`MyCompany.DI`由不同项目类型共享的库的一部分，其中包含...嗯，DI 相关的东西，随处使用的东西的安装程序（`GenericFactoryInstaller`例如）等。

其他安装程序包含在特定的根项目或库中（例如，`MyCompany.Data`包含`NHInstaller`找到返回 NH 配置的方法的方法，因为它使用它来创建会话工厂）

换句话说，这个“元安装程序”应该找到*当前应用程序中的*所有安装程序并运行它们。我只是想找到一种避免复制和粘贴的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:29:19.443

我最终删除了自动安装程序，而是创建了以下扩展方法：

```
public static IWindsorContainer InstallFromAssemblies(
    this IWindsorContainer container, params string[] assemblyNames)
{
    return container.Install(assemblyNames.Select(
        x => (IWindsorInstaller)new AssemblyInstaller(Assembly.Load(x),
                                                      new InstallerFactory()))
                                          .ToArray());
} 
```

所以我的应用程序类型特定代码现在类似于：

```
... = new WindsorContainer().InstallFromAssemblies("A.Reusable.Lib",
                                                   "My.Foo.Services",
                                                   "The.ViewModels",
                                                   "Whatever"); 
```

# c# - WCF如何返回包装在cdata中的字符串？

> ID：15096313
> 
> 赞同：1
> 
> 时间：2013-02-26T18:15:54.123
> 
> 标签：c#, xml, wcf, cdata

我有一个返回 Type 实例的 wcf 服务。说我的对象。MyObject 有一个字符串属性（比如 CDataString），我希望 wcf 将其包装在 cdata 部分中（因为我在字符串属性中返回了一个 html 片段）。我到底是如何注释 MyObject.CDataString 以便当 WCF 将它放在电线上时，它会被包裹在 cdata 部分中？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:23:12.740

在字符串 CDataString 属性中发送 XML 应该不会产生任何问题，WCF 能够处理它，您是否尝试在字符串属性中通过 WCF 发送 XML？，如果您遇到错误，请在此处发布。

# javascript - 如何中断点击功能并添加我自己的

> ID：15096316
> 
> 赞同：1
> 
> 时间：2013-02-26T18:16:03.900
> 
> 标签：javascript, jquery, html, jplayer

我正在使用一个名为 jPlayer 的 jQuery/JavaScript 包为我的音乐博客制作播放列表。播放器位于屏幕顶部，我希望能够让用户单击顶部的歌曲名称并将他们重定向到它对应的帖子。

我包含的 jPlayer 是简写的，所以查看 js 文件没有帮助。我需要的元素是 class 的链接`.jp-playlist-item.jp-playlist-current`。我之前问过这个，那个人说试试这个，但是没有用...

```
$("a.jp-playlist-item").each(function() {
    $(this).replaceWith($(this).clone()) 
}) 
$("a.jp-playlist-item").click(function(){
    alert(1);
}) 
```

我正在处理的网站是[http://www.startingtofeelit.com](http://www.startingtofeelit.com)，因此您可以更好地理解我的意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:20:12.600

您可以使用该`event.preventDefault()`功能覆盖默认点击行为，如下所示。

```
function clickCallback( event ) {
    event.preventDefault();
    //do more stuff here.
}

$('a.jp-playlist-item').on('click', clickCallback ); 
```

此外，在您的功能之后，您可以`return false`立即阻止按钮上出现任何进一步的功能。

在此处查看有关如何覆盖/暂停事件的更详细说明：[event.stopPropagation 和 event.preventDefault 之间有什么区别？](https://stackoverflow.com/questions/5963669/whats-the-difference-between-event-stoppropagation-and-event-preventdefault)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:19:22.320

快速而肮脏的可能解决方案：

```
$("a.jp-playlist-item").click(function(){
    alert(1);
    return false;
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:30:44.940

您正在寻找的 jquery 中的方法是[stopPropagation](http://api.jquery.com/event.stopPropagation/)。

摘抄：

> 描述：防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。

`false`在回调结束时使用**不等于** `stopPropagation`. 阅读[这个 SO 答案](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)（false 是 == preventDefault() + stopPropagation()）。你不想这样吧？

jquery api页面的一些附加说明：

*   stopPropagation 不能用于与`live`和`delegate`调用相关的事件。
*   stopPropagation 也适用于`trigger()`调用触发的自定义方法。

# linux - 从网站下载后在文件模式下保留 x 标志

> ID：15096320
> 
> 赞同：1
> 
> 时间：2013-02-26T18:16:23.267
> 
> 标签：linux, unix, permissions, executable, chmod

我在我的网站上放了一个 Linux 可执行文件，我希望当有人在 Linux 机器上下载它时，它仍然是可执行的。

但是，当文件被下载时，它会丢失 x 标志。有解决办法吗？尽管我看了很多地方，但我没有找到解决这个问题的方法。

这对我来说特别重要，因为我希望整个过程对每个人来说都非常简单：我的想法是允许用户右键单击文件并选择“在终端中运行”，而无需单击之前的“权限”并制作文件可执行且没有`chmod +x filename`或`sh filename`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T18:38:09.143

您可以将此文件（和其他文件）分组到一个`tar`文件中。在下载和去皮时，将保留权限。

# php - 查询到下拉菜单的结果

> ID：15096322
> 
> 赞同：0
> 
> 时间：2013-02-26T18:16:26.317
> 
> 标签：php, mysql, drop-down-menu

我正在使用以下内容从数据库中提取具有值的列表。

```
$result = mysql_query("

SELECT 
ID_SOCIEDADADM as Fund_Manager_Company_Code,
DES_SOCIEDAD_CORTO as Fund_Manager_Company_Name

FROM dr_lista_rentabilidad_diaria

GROUP BY ID_SOCIEDADADM
")
or die(mysql_error());

while($row = mysql_fetch_array($result))
      {

  echo "<form name='country_list' method='POST' action='http://opben.com/colombia/familias-de-carteras' >
            <select name='Country' tabindex='1'>

 <option value='". $row['Fund_Manager_Company_Code'] ."'>". $row['Fund_Manager_Company_Name'] ."</option>

            </select>
        <input type='submit' value='Filter' />
    </form>"; } 
```

截至目前，它在自己的下拉菜单中显示结果。我希望他们所有人都在一起。另外，当页面首次加载时，如何将其中一个值设置为默认选择？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:19:38.423

您必须`<select>`从`while {}`

```
 echo "<form name='country_list' method='POST' action='http://opben.com/colombia/familias-de-carteras' >";

echo "<select name='Country' tabindex='1'>";
    while($row = mysql_fetch_array($result))
          {
 echo "<option value='". $row['Fund_Manager_Company_Code']."'>".$row['Fund_Manager_Company_Name'] ."</option>";
    }

 echo "</select>
            <input type='submit' value='Filter' />";

    echo    "</form>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:20:16.930

```
echo "<form name='country_list' method='POST' action='http://opben.com/colombia/familias-de-carteras' >
    <select name='Country' tabindex='1'>";

while($row = mysql_fetch_array($result)) {
    echo "<option value='". $row['Fund_Manager_Company_Code'] ."'>". $row['Fund_Manager_Company_Name'] ."</option>";
}
echo "</select>
        <input type='submit' value='Filter' />
    </form>"; 
```

对于默认选择，请检查数组，如果需要，将属性“selected”添加到选项中，这会使该选项成为默认选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:22:28.383

对于“另外，当页面首次加载时，如何将其中一个值设置为默认选择？”

```
$defaultValue = "defaultValue";

...
echo "<option value='{$row['Fund_Manager_Company_Code']}'" . ($row['Fund_Manager_Company_Code'] === $defaultValue ? "selected" : "") . " >";
... 
```

# events - 确定 Legend 何时准备就绪

> ID：15096323
> 
> 赞同：0
> 
> 时间：2013-02-26T18:16:26.293
> 
> 标签：events, svg, highcharts, legend, ready

我希望在图例下方放置一个（或两个）文本元素，与它的右侧对齐，但我无法获得一致的坐标。

警告：我是 SVG 的相对菜鸟。

我有一系列要显示图表的数据集。当我从一个移动到另一个时，我正在添加新系列并删除旧系列。每次更新后，我都会尝试在图例下方放置一个字符串，其中包括数据集的平均值。我遇到的问题是，**每隔**一次我查询 x & y 属性时，字符串就会出现在图表之外。另一半时间，我得到了完美的结果。

我用来放置这个字符串的代码是：

```
var tbl=table[3];
$('.usData').remove();

//get legend x & y
startX =  chart.legend.group.translateX;
endX = startX + chart.legend.legendWidth;
startY = chart.legend.group.translateY;
endY = startY + chart.legend.legendHeight;
$(tbl.usAvg).each(function(i){
chart.renderer.text("National Avg: " + formatData(this,tbl.format), endX, endY+(i*15)+15).attr({'text-anchor':'end',zIndex:12, class:'usData'}).add(); 
```

我认为正在发生的是传说开始于情节之外并被翻译成它的位置。因此，在完成渲染之前，我无法可靠地“获取”准确的坐标。

**所以，我的问题：** 有没有办法确定（事件）图例何时完成移动，还是我只需要包含超时并等待？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:06:50.560

我建议更简单的解决方案，将 useHTML 设置为图例。[http://jsfiddle.net/aWFYr/1/](http://jsfiddle.net/aWFYr/1/)

```
$('#btn').click(function(){

        $('.highcharts-legend').append('<div style="position:absolute;top:'+(chart.legend.legendHeight)+'px">aaa</div>');

    }); 
```

# pointers - Golang 指针

> ID：15096329
> 
> 赞同：21
> 
> 时间：2013-02-26T14:31:54.847
> 
> 标签：pointers, go

我目前正在学习使用 Go 语言进行编程。我在理解 Go 指针时遇到了一些困难（而且我的 C/C++ 现在还很远......）。例如，在 Tour of Go #52 ( [http://tour.golang.org/#52](http://tour.golang.org/#52) ) 中，我读到：

```
type Vertex struct {
    X, Y float64
}

func (v *Vertex) Abs() float64 {
    return math.Sqrt(v.X*v.X + v.Y*v.Y)
}

func main() {
    v := &Vertex{3, 4}
    fmt.Println(v.Abs())
} 
```

但如果不是

```
func (v *Vertex) Abs() float64 {
[...]
v := &Vertex{3, 4} 
```

我写：

```
func (v Vertex) Abs() float64 {
[...]
v := Vertex{3, 4} 
```

甚至：

```
func (v Vertex) Abs() float64 {
[...]
v := &Vertex{3, 4} 
```

反之亦然：

```
func (v *Vertex) Abs() float64 {
[...]
v := Vertex{3, 4} 
```

我得到了完全相同的结果。有区别（内存方面等）吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-26T20:44:17.507

您的示例使用的 Go 语言有两种不同的规则：

1.  可以从具有值接收器的方法派生具有指针接收器的方法。因此`func (v Vertex) Abs() float64`会自动生成一个额外的方法实现：

    ```
    func (v Vertex) Abs() float64 { return math.Sqrt(v.X*v.X+v.Y*v.Y) }
    func (v *Vertex) Abs() float64 { return Vertex.Abs(*v) }  // GENERATED METHOD 
    ```

    编译器会自动找到生成的方法：

    ```
    v := &Vertex{3, 4}
    v.Abs()  // calls the generated method 
    ```

2.  Go 可以自动获取变量的地址。在以下示例中：

    ```
    func (v *Vertex) Abs() float64 { return math.Sqrt(v.X*v.X+v.Y*v.Y) }
    func main() {
        v := Vertex{3, 4}
        v.Abs()
    } 
    ```

    该表达式`v.Abs()`等价于以下代码：

    ```
    vp := &v
    vp.Abs() 
    ```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-26T18:27:46.537

有区别。例如，非指针接收器形式强制该方法在副本上工作。这样，该方法就不能改变它被调用的实例——它只能访问副本。这在时间/内存性能/消耗等方面可能无效。

OTOH，指向实例的指针和带有指针接收器的方法允许在需要时轻松共享（和变异）实例。

更多细节[在这里](http://golang.org/ref/spec#Method_expressions)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T18:27:35.547

区别在于传递引用与传递值。

在`func f(v Vertex)`参数中被*复制*到参数`v`中。在`func f(v *Vertex)`一个指向现有`Vertex`实例的指针中传递。

使用方法时，可以为您完成一些取消引用，因此您可以拥有一个方法`func (v *Vertex) f()`并调用它而无需先获取指针：`v := Vertex{...}; v.f()`. 这只是语法糖的一小部分，AFAIK。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-05T15:06:19.953

这些示例有两个主要区别：

```
func (v *Vertex) Abs().... 
```

接收器将*通过引用传递*v 并且您只能在指针上调用此方法：

```
v := Vertex{1,3}
v.Abs() // This will result in compile time error
&v.Abs() // But this will work 
```

另一方面

```
func (v Vertex) Abs() .... 
```

您可以在指针和结构上调用此方法。即使您在指针上调用此方法，接收器也将按值*传递。*

```
v := Vertex{1,3}
v.Abs() // This will work, v will be copied.
&v.Abs() // This will also work, v will also be copied. 
```

您可以同时声明`func (v *Vertex)`和`func (v Vertex)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-27T19:10:32.933

正如规范所说

> 如果 x 的（类型）的方法集包含 m 并且参数列表可以分配给 m 的参数列表，则方法调用 xm() 是有效的。如果 x 是可寻址的并且 &x 的方法集包含 m，则 xm() 是 (&x).m() 的简写：

在您的情况下，如果方法是可寻址的，则 v.Abs() 是 &v.Abs() 的简写。

# github - Github API：如何找到拉取请求的分支？

> ID：15096331
> 
> 赞同：22
> 
> 时间：2013-02-26T18:16:52.357
> 
> 标签：github, github-api

Github API (v3) 允许您获取拉取请求列表，并获取有关单个拉取请求的更多详细信息。我似乎找不到的是拉取请求来自的分支的名称以及拉取请求建议将代码合并到的分支。

使用 Github API 如何确定拉取请求中涉及的分支？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-26T18:30:22.927

1.  **访问拉取请求 URL。** 我们以[https://api.github.com/repos/github/gitignore/pulls/566](https://api.github.com/repos/github/gitignore/pulls/566)为例。

2.  **解析 JSON 对象。**

* * *

拉取请求引用两个分支。`base`分支是合并目标。通常这是`master`存储库的分支。

> *   `base.label`是`github:master`，意味着它是`master`> 的分支`github/gitignore`。
> *   `base.ref`是分支名称“master”。
> *   `base.sha`是该分支的当前**SHA**。

`head`分支是您要合并到`base`.

> *   `head.label`是`fidelski:add-obvious-autotools-files`，意味着它是 的`add-obvious-autotools-files`分支`fidelski/gitignore`。
> *   `head.ref`是分支名称`add-obvious-autotools-files`。
> *   `head.sha`是该分支的当前**SHA**。

# responsive-design - 响应式居中图像滑块

> ID：15096332
> 
> 赞同：0
> 
> 时间：2013-02-26T18:16:53.953
> 
> 标签：responsive-design

我试图在我的网站上实现一个触摸滑块。但是，我没有成功在滑块容器中放置响应式图像。我需要图像获得容器的全尺寸。调整 Web 浏览器大小时，图像和滑块容器的大小需要响应。

目前，我的图像比滑块容器大，并且在调整浏览器大小时不会调整大小。

在这里你可以找到我的问题示例： http: [//fiddle.jshell.net/WLRYW/](http://fiddle.jshell.net/WLRYW/)

我的网站： http: [//freakyshape.com/#/portfolio/dock.html](http://freakyshape.com/#/portfolio/dock.html)

对不起我的英语，我是法国人...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:16:18.300

我检查了你的代码。只需以百分比（% ex- 70%）而不是像素为单位给出父元素的特定宽度。如果元素的父元素可以按百分比缩放，则子元素会自动尝试响应。不要尝试`width:auto;`浏览器将其宽度假定为 0。您可以使用`height:auto;`但不能使用宽度。`height: auto;`因此，对滑块中的图像使用 min-height 并使用and `width: 90%;`（例如）保持它们的大小。我没有你的网站网址，否则我可以更具体地告诉你。

# asp.net-mvc-4 - 部署 MVC 4 Code First 应用程序时出现 500 错误

> ID：15096340
> 
> 赞同：1
> 
> 时间：2013-02-26T18:17:07.780
> 
> 标签：asp.net-mvc-4, msdeploy

我有一个 MVC4 Code First Web 应用程序，我正在尝试使用 VS Ultimate 64 位的 Web 部署包将其部署到舞台服务器（Win Svr 8、64 位）。

此错误似乎表明在 IIS 中配置的 asp.net 有问题。许多其他帖子似乎表明使用以下文件夹中的 aspnet_regiis -ir 命令来确保正确安装所有内容已经解决了他们的问题。

C:\Windows\Microsoft.NET\Framework\v4.0.30319 aspnet_regiis -ir C:\Windows\Microsoft.NET\Framework64\v4.0.30319 aspnet_regiis -ir

其他帖子说将它添加到 web.config 中的模块已经解决了他们的问题。我已经做了这两件事，但仍然没有什么对我有用。

```
runAllManagedModulesForAllRequests="true" 
```

为了测试 MVC 在我的舞台服务器上运行，我部署了一个新的（未更改 Internet 模板）MVC 4 Web 应用程序，它确实有效。

错误消息：

```
HTTP Error 500.0 - Internal Server Error
The page cannot be displayed because an internal server error has occurred.
Module ManagedPipelineHandler 
Notification ExecuteRequestHandler 
Handler System.Web.Mvc.MvcHandler 
Error Code 0x00000000 
Requested URL http://mytweb:80/ 
Physical Path C:\inetpub\wwwroot\MyWeb 
Logon Method Anonymous 
Logon User Anonymous 
```

我可以看到代码首先为会员提供者正常运行，因为这些表似乎是在数据库中设置的。但是，我的应用程序通过代码优先创建的其他表不存在。

请原谅类似（未答复）[的帖子](https://stackoverflow.com/questions/15073802/specifiy-connection-string-when-publishing-web#comment21198480_15073802)，但这个问题正在扼杀我们并且在这一点上非常绝望。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T21:21:06.737

我一直在努力处理同样的错误消息，并且无法进行任何跟踪或记录。经过几天的研究，我意识到这是 Global.asax.cs 中未处理的异常。我建议审核您的 Global.asax 代码，看看是否有机会发生异常。

无论如何，您可能希望遵循最佳实践来处理此类应用程序级错误，以将最后一条错误消息输出到自定义页面：

[http://msdn.microsoft.com/en-us/library/vstudio/24395wz3(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/24395wz3%28v=vs.100%29.aspx)

在数据库方面，当数据库未向登录到网站的用户授予权限（匿名身份验证的情况下为 IUSR）时，我遇到了问题。由于您是在代码中创建表，它们是否授予用户必要的权限？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:22:38.777

打开 IIS >> 转到应用程序池 >> 找到相关的应用程序 >> 右键单击​​ >> 高级设置 >> 设置`Load User Profile`为**TRUE**。这可能有效。

# ios - skstoreproductviewcontroller：如何在启动时打开“评级和评论”

> ID：15096345
> 
> 赞同：15
> 
> 时间：2013-02-26T18:17:33.970
> 
> 标签：ios, rating, storekit, review

我看到一些关于 的教程`SKStoreProductViewController`，例如： [Open a list of my apps in the App Store inside my App](https://stackoverflow.com/questions/12739703/open-a-list-of-my-apps-in-the-app-store-within-my-app)

但是，它总是`SKStoreProductViewController`在启动时以“详细信息”打开，我如何以编程方式打开“评分和评论”

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-06-06T15:53:28.110

下面的代码片段将打开本地 AppStore 应用程序的评论和评分部分

```
struct AppStoreURLs {
    static let templateReviewURLiOS8 = "itms-apps://itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?id=%@&onlyLatestVersion=true&pageNumber=0&sortOrdering=1&type=Purple+Software"
}

func showAppReivewScreen(_ appId: String?)  {

        guard let applicaitonIdentifier = appId, (applicaitonIdentifier.isEmpty == false) else { return }

                let reivewURL = String(format: AppStoreURLs.templateReviewURLiOS8, applicaitonIdentifier)

        if let url = URL(string: reivewURL), UIApplication.shared.canOpenURL(url) {

            if #available(iOS 10.0, *) {
                UIApplication.shared.open(url, options: [UIApplicationOpenURLOptionUniversalLinksOnly : false], completionHandler: nil)
            } else {
                UIApplication.shared.openURL(url)
            }
        }

    } 
```

使用应用程序标识符调用此函数

```
self.showAppReivewScreen("951627022") 
```

# javascript - 获取 Google Visualization Image Chart 的 URL

> ID：15096346
> 
> 赞同：1
> 
> 时间：2013-02-26T18:17:35.783
> 
> 标签：javascript, google-visualization

所以我想要做的是获取谷歌可视化图像图表（不是 SVG 版本）的 URL。

要创建图表，我使用以下代码：

```
 <script type='text/javascript'>
  google.load('visualization', '1', {packages:['imagelinechart']});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
    ['Time', 'Value'], 

 ['5:00', 13535],['5:30', 13549]
 ]);
  var chart = new google.visualization.ImageLineChart(document.getElementById('chart_div'));
  chart.draw(data, {width: 750, height: 240, legend: 'none', title: 'TITLE'});

  }

  </script> 
```

这会在 a 中创建图像，但我无法在变量中获取 URL。（是的，我显然可以在页面加载后复制图像并获取 URL）

我努力了：

```
 chart.getImageURL() 
```

..但没有任何运气。

任何帮助是极大的赞赏。这对我来说是个大问题。

谢谢，菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:28:20.267

Google 可视化图表不呈现为图像，并且不能作为默认行为保存为图像。可以创建一个函数，将 SVG 图表保存为 PNG 图像，如此[处](https://stackoverflow.com/questions/11546192)所述。

这可以通过遵循[此页面](http://www.battlehorse.net/page/topics/charts/save_google_charts_as_image.html)上的步骤来完成。请注意，本文中的代码基于使用 iframe 的旧版 Google 可视化，并且不会像发布的那样工作。但是，您可以使用以下代码（在注释中找到）执行相同操作：

```
var svg = $(chartContainer).find('svg').parent().html();
var doc = chartContainer.ownerDocument;
var canvas = doc.createElement('canvas');
canvas.setAttribute('style', 'position: absolute; ' + '');
doc.body.appendChild(canvas);
canvg(canvas, svg);
var imgData = canvas.toDataURL("image/png");
canvas.parentNode.removeChild(canvas);
return imgData; 
```

注意：我没有创建此代码，它最初由上述网站的作者（Riccardo Govoni）创建，并由用户 Thomas 在评论部分更新。

# jquery - 如果回调可能需要拒绝它，我可以手动解析延迟对象吗？

> ID：15096350
> 
> 赞同：1
> 
> 时间：2013-02-26T18:17:58.517
> 
> 标签：jquery, jquery-deferred

我正在尝试使用自定义延迟对象来管理一些回调。我想出了一个简单的案例：

```
var deferred = $.Deferred();

deferred.done(function() {
    console.log( 'done' );
});

var json = $.getJSON('/foo');

json.then(
    function() {
        deferred.resolveWith(this, arguments);
    }  
); 
```

但我需要在解决/拒绝之前检查响应。我想添加这样的内容：

```
deferred.pipe(
    function(response) {
        if (response.message === 'error') {
            return $.Deferred.reject(response);
        }
        return response;
    }
); 
```

但是当我这样做时，`done()`无论如何都会调用我的原始回调。我很确定这是因为一旦我打电话`deferred.resolveWith()`“回滚”并将其标记为稍后被拒绝就太晚了。我知道我可以将条件向上移动到 的第一个参数中`json.then()`，但这似乎错过了延迟对象的要点——我认为它们是为了将所有这些行为封装到一个地方。

是否可以将条件和回调都放入`deferred`，同时在其他地方解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T18:09:15.050

看起来您的目标实际上只是将功能分为两个步骤：验证 ajax 请求的结果，然后处理结果。为此，请先将外部延迟替换为内部延迟，该内部延迟根据 ajax 请求返回的参数解析或拒绝。

```
var deferred = $.Deferred();

deferred.then(function(data){
    // new deferred that we will be returning
    var deferred = $.Deferred();
    if (data.success == true) {
        deferred.resolveWith(data.result);
    }
    else {
        deferred.rejectWith(data.error);
    }
    // any following chained methods will affect this returned deferred object
    return deferred;
}).then(
    // done callback
    function(result){
        console.log("Resolved!");
        console.dir(result);
    },
    // fail callback
    function(error){
        console.log("Rejected!");
        console.dir(error)
    }
);

var json = $.getJSON("/foo");
json.done(deferred.resolveWith); 
```

# java - Java 中的 Oracle 存储过程调用。所需的设计建议

> ID：15096351
> 
> 赞同：1
> 
> 时间：2013-02-26T18:17:58.303
> 
> 标签：java, stored-procedures

我正在寻找有关客户特定要求的设计建议。要求是从外部数据仓库系统获取所需数据并基于它生成报告。

我的系统是用 Java 构建的，外部 DW 系统无法为我们提供任何 Web 服务，因此我们想出了一个想法，并要求 DW 系统提供存储过程。这是我对这个设计的看法。

*   从我的系统中获取所需的数据并将信息传递给 DW 存储过程。例如，选择在特定日期之间创建的所有客户并传递 customer_no 数组（两个系统中唯一且相同）。*   DW SP 将返回数据块，例如客户编号、客户名称、设备名称、成本等*   从 DW SP 返回的内容构建和 XML 数据，并从中生成报告。

现在我的担忧是：

*   有一个更好的方法吗 ？由于数据输入和输出量未知，是否存在任何挑战或限制？*   DW SP (StoredProcedure) 在数组中取值，数组中传递给 SP 的数据量是否有限制？是否有任何性能问题？*   由于 DW SP 正在从不同数组中的多个列返回数据，因此很难映射每条记录，因为在这种情况下，其中一个列数据可能为空，可能不会插入空，并且提取的行数据也不会是一致，解决这个问题有更好的方法吗？例如表？

    感谢您的想法和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:25:10.377

如果数据仓库系统也使用 Oracle 数据库，您可以将其链接到 Java 系统数据库并使用简单的 SQL 查询对其进行查询，这将使您的架构更容易。

[检查oracle数据库链接](http://docs.oracle.com/cd/B28359_01/server.111/b28310/ds_concepts002.htm)

# c# - 删除文本框末尾的“X”按钮

> ID：15096352
> 
> 赞同：15
> 
> 时间：2013-02-26T18:17:59.930
> 
> 标签：c#, xaml, windows-8, windows-runtime, windows-store-apps

![在此处输入图像描述](../Images/44e9310fd3bc5ddf77920b405c3aa852.png)

我正在使用 C# + XAML 开发 Windows 应用商店应用程序。当我添加一个属性`TextWrapping`设置为`NoWrap`的 TextBox 时，当它获得焦点时，TextBox 的末尾会出现一个“X”。

所以，我需要删除这个“X”并且 TextBox 不能换行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T01:48:06.233

正如每个人所说，除非您有充分的理由这样做，否则您真的不应该删除“X”。

要删除 X，而不是将 TextWrapping 设置为“NoWrap”，您必须将其设置为 TextWrapping="Wrap"

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-26T18:49:24.903

X 是一种辅助功能。它使清除触摸设备上的框变得更容易，因为选择所有文本并点击删除是艰巨的并且需要多个步骤。

所以，除非你有非常非常重要的理由，否则请不要禁用它。没有禁用“X”的属性，产品团队也不打算禁用它。但是，出于教育目的，我将展示您*可以*通过更改*Style*来禁用它。

在 Expression Blend 中，右键单击文本框并选择*Edit Template -> Edit a Copy*。为您的模板命名，如“NoXTextBox”，并确保将其保存在应用程序级别（否则您将只能在当前页面上使用它）。

然后，Blend 将切换到您正在编辑 TextBox 而不是页面的视觉外观的模式。在*Objects and Timeline*面板中，您应该会看到一个名为**DeleteButton**的元素。您可以从模板中删除该按钮并保存您的工作。*单击“对象和时间轴*”面板顶部的按钮，该按钮看起来像一条带有向上箭头的水平线（当您将鼠标悬停在此按钮上时，它将显示“将范围返回到 [页面]”）。现在您回到编辑页面而不是编辑文本框。

要制作更多这样的文本框，您可以复制并粘贴它，或者在*样式*分支下的混合工具箱中，您将看到您的自定义“NoXTextBox”。

同样，请不要禁用此功能，除非您有充分的理由这样做。老实说，我想不出这样做的充分理由，因为您正在破坏用户在 Windows 应用商店应用程序中所期望的功能。我主要想回答您的问题，以便您了解如何修改内置控件。

开发支持、设计支持和更多的好处：http: [//bit.ly/winappsupport](http://bit.ly/winappsupport)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-26T19:05:09.427

正如您从本文档中看到的那样，它[很好地](http://msdn.microsoft.com/en-us/library/windows/apps/hh465498.aspx)解释了该功能。正如您在使用 Javascript、Html 或 Css 时所看到的，您可以通过非常简洁的方式删除该字段。因为您可以简单地使用级联样式表禁用它。

![它显示的图像。](../Images/eb9bb17daef2f5791d660b8e864508fb.png) ![编辑。](../Images/bb4cebbcd6c825181b1717beffaf09e1.png)

现在在样式表中，您实际上可以很容易地改变它：

```
input[type=text]::-ms-clear
{
            border: 2px solid orange
} 
```

大多数按钮都非常易于使用，可在您的应用程序中实现一致的设计。但这并不能回答您的问题，您如何使用 C#/XAML 禁用它？

在文本框组件内部，您会注意到指示视觉状态和可见性的代码。如果您注释掉那段代码，它将禁用 X。[这里](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/0ee7c65f-92d2-411e-80e2-d207217decde/)有一个示例：

如上所述，它是一个非常漂亮和有用的工具。尤其是在触摸屏设备上；它不仅符合微软的统一，而且还使 UI 更干净，因为您可以通过简单的方法删除该字段中的项目。

我敦促您不要删除它，希望这可以为您解释一下这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-03T09:48:42.170

编辑控件模板并删除模板中的 DeleteButton 及其引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-30T19:21:09.587

这使得 X 消失并且在输入过程中也停止了文本的偏移。

```
input[type=text]::-ms-clear
{
  visibility: collapse;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-19T20:16:36.413

对我来说，解决方案是设置 IsReadOnly="True" 的属性

# c++ - std::make_pair : 无法将 'ch' (type 'char') 转换为 type 'char&&'

> ID：15096358
> 
> 赞同：6
> 
> 时间：2013-02-26T18:18:22.833
> 
> 标签：c++, c++11

以下代码有什么问题：

```
#include <ctime>
#include <vector>
#include <utility>
#include <algorithm>
#include <iostream>

int main()
{
    std::vector< std::pair< char, unsigned > > vec;

    for( unsigned i = 0; i < 100; ++i )
    {
        char ch = 0;
        unsigned number = 0;

        do {
            ch = i;
            number = i;

        } while( std::find( vec.begin(), vec.end(), std::make_pair< char, unsigned >( ch, number ) ) != vec.end() );

        std::cout << ch << number << '\n';

        vec.push_back( std::make_pair< char, unsigned >( ch, number ) );
    }
} 
```

它确实可以很好地编译：

```
g++ test.cxx 
```

但失败：

```
$ g++ -std=c++11 test.cxx                                                                                                              /tmp
test.cxx: In function 'int main()':
test.cxx:21:98: error: no matching function for call to 'make_pair(char&, unsigned int&)'
test.cxx:21:98: note: candidate is:
In file included from /usr/include/c++/4.7/bits/stl_algobase.h:65:0,
                 from /usr/include/c++/4.7/vector:61,
                 from test.cxx:3:
/usr/include/c++/4.7/bits/stl_pair.h:268:5: note: template<class _T1, class _T2> constexpr std::pair<typename std::__decay_and_strip<_Tp>::__type, typename std::__decay_and_strip<_T2>::__type> std::make_pair(_T1&&, _T2&&)
/usr/include/c++/4.7/bits/stl_pair.h:268:5: note:   template argument deduction/substitution failed:
test.cxx:21:98: note:   cannot convert 'ch' (type 'char') to type 'char&&'
test.cxx:25:69: error: no matching function for call to 'make_pair(char&, unsigned int&)'
test.cxx:25:69: note: candidate is:
In file included from /usr/include/c++/4.7/bits/stl_algobase.h:65:0,
                 from /usr/include/c++/4.7/vector:61,
                 from test.cxx:3:
/usr/include/c++/4.7/bits/stl_pair.h:268:5: note: template<class _T1, class _T2> constexpr std::pair<typename std::__decay_and_strip<_Tp>::__type, typename std::__decay_and_strip<_T2>::__type> std::make_pair(_T1&&, _T2&&)
/usr/include/c++/4.7/bits/stl_pair.h:268:5: note:   template argument deduction/substitution failed:
test.cxx:25:69: note:   cannot convert 'ch' (type 'char') to type 'char&&' 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-26T18:21:41.743

**解决方案：**

而不是以`make_pair<>()`这种方式显式指定模板参数：

```
std::make_pair< char, unsigned >( ch, number ) 
```

让它们被推断出来：

```
std::make_pair( ch, number ) 
```

* * *

**解释：**

该指南背后的基本原理`std::make_pair<>()`在于定义的方式，以及模板参数推导适用于通用引用的方式。来自 C++11 标准的第 20.3.3/8-9 段：

> `template <class T1, class T2>` `pair<V1, V2> make_pair(T1&& x, T2&& y);`
> 
> *返回*：其中 V1 和 V2确定`pair<V1, V2>(std::forward<T1>(x), std::forward<T2>(y));` 如下： 让每个. 那么每个都是如果等于，否则是。[*示例*：代替：`Ui``decay<Ti>::type``Ti``Vi``X&``Ui``reference_wrapper<X>``Vi``Ui`
> 
>  *`return pair<int, double>(5, 3.1415926); // explicit types`
> 
> C++ 程序可能包含：
> 
> `return make_pair(5, 3.1415926); // types are deduced`
> 
> —<em>结束示例]*

 *在这里，`T1`并且`T2`是*要*被推断出来的。通过自己显式指定模板参数，您正在使用`make_pair<>()`' 的类型推导机制来生成正确的返回类型，从而强制实例化一个接受对 和 的右值引用`char`和对的右值引用的函数`unsigned`：

```
... make_pair(char&&, unsigned&&) 
```

但是，您没有在输入中提供右值，因为`ch`和`number`是左值。这就是编译器所抱怨的。

* * *

**选择：**

另请注意，您可以*隐式构造*一个`std::pair`对象，从而完全避免调用`make_pair<>()`：

```
vec.push_back( { ch, number } ); 
```*

# javascript - 在直接父级滚动时固定容器，但在正文滚动时不固定

> ID：15096363
> 
> 赞同：1
> 
> 时间：2013-02-26T18:18:29.930
> 
> 标签：javascript, html, css

我有一个固定的 div 并希望将其保持固定，以便在滚动其父级时保持原样，但是当父级的滚动完成并且正文滚动开始时，“有问题的容器”应该开始滚动。

就像是

```
<div id="fixedContainer">container in question</div>

#fixedContainer
{
background-color:#ddd;
position: fixed;
width: 200px;
height: 100px;
left: 50%;
top: 0%;
margin-left: -100px; /*half the width*/
} 
```

接着

```
<div style="height:300px;background-color:#bbb;overflow:scroll;">soeme div</div> 
```

我在这里做了一个样本 [http://jsfiddle.net/tDpJB/](http://jsfiddle.net/tDpJB/)

在此先感谢您的帮助。-拉维。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:23:44.573

*将元素绝对定位在滚动容器上方*而不是尝试将其固定在内部不是更好的主意吗？这会模仿您正在寻找的效果吗？

# c# - 快速网格来处理特定操作（选择和着色单元格）

> ID：15096368
> 
> 赞同：1
> 
> 时间：2013-02-26T18:18:41.990
> 
> 标签：c#, datagrid

我有一个任务是用 c# 重写一个用 delphi 制作的程序（丢失的源代码）。用户创建一个包含许多列和行（每列 10-200 个）的网格，并将网格单元格涂成红色（通过双击）。

网格示例：![在此处输入图像描述](../Images/40ed1aaadea5324c7d2f02895a0c7286.png)

与delphi程序相比，基本的datagridview（windows窗体）和datagrid（wpf）滞后于如此数量的元素和选择非常慢。在 delphi 程序中，选择是即时的。

请您为这个问题提出一个解决方案吗？

# css - 垂直渐变

> ID：15096374
> 
> 赞同：0
> 
> 时间：2013-02-26T18:18:50.577
> 
> 标签：css

我无法让这个渐变从左到右。目前它从上到下。

```
background-image: -webkit-gradient(linear, left top, left bottom, from(rgb(166, 230, 230)), color-stop(0.33, rgb(231, 231, 231)), color-stop(0.15, rgb(255, 255, 255))); 
```

我尝试将左上角、左下角、左下角、右下角转换，但随后什么也没有出现。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:42:07.800

只需使用以下`-webkit-linear-gradient`表格：

```
background-image: -webkit-linear-gradient(left, rgb(166,230,230) 0, rgb(255,255,255) 15%, rgb(231,231,231) 33%); 
```

[http://jsfiddle.net/45PQd/1](http://jsfiddle.net/45PQd/1)

或者，如果您真的想使用更详细的格式，请使用`left top, right top`：

```
background-image: -webkit-gradient(linear, left top, right top, from(rgb(166, 230, 230)), color-stop(0.33, rgb(231, 231, 231)), color-stop(0.15, rgb(255, 255, 255))); 
```

# unit-testing - 在大量静态助手下单元测试数据库存储库类

> ID：15096378
> 
> 赞同：1
> 
> 时间：2013-02-26T18:19:00.913
> 
> 标签：unit-testing, static, microsoft-fakes

我开始处理部分完成的 MVC 网络项目和我现在的任务——通过单元测试来覆盖代码。项目具有数据库存储和包含 CRUD 操作的非静态存储库类。为了测试这些 CRUD 操作，我需要使用 FakeRepository 模拟真实的 Repository 类，所以我创建了 IRepository 并使用 IoC 注入它......

但问题是该项目还有很多静态类，其中包含很多静态方法（Helper），它们扩展了基本的 CRUD 操作，并且应用程序中的所有控制器都与这些静态助手一起工作，这些静态助手在内部创建了 Repository 类......

试图修改所有静态方法以从控制器传递 IRepository，但是基于其他静态助手的助手太多等等......它不起作用！我没有时间重写所有这些混乱......

所以我需要并建议我如何测试所有这些助手，但是使用假的 IRepository 实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:00:17.630

[您可以创建 s Shim（来自 Microsoft Fakes）来覆盖静态方法的行为](http://msdn.microsoft.com/en-us/library/hh549175.aspx#shims)。

代码将如下所示：

```
[TestClass]
public class TestClass1
{ 
        [TestMethod]
        public void TestCurrentYear()
        {
            int fixedYear = 2000;

            // Shims can be used only in a ShimsContext:
            using (ShimsContext.Create())
            {
              // Arrange:
                // Shim DateTime.Now to return a fixed date:
                System.Fakes.ShimDateTime.NowGet = 
                () =>
                { return new DateTime(fixedYear, 1, 1); };

                // Instantiate the component under test:
                var componentUnderTest = new MyComponent();

              // Act:
                int year = componentUnderTest.GetTheCurrentYear();

              // Assert: 
                // This will always be true if the component is working:
                Assert.AreEqual(fixedYear, year);
            }
        }
} 
```

# apache-flex - 当一些子项不可见时，如何在 actionscript 中自动调整 VGroup 的大小？

> ID：15096380
> 
> 赞同：0
> 
> 时间：2013-02-26T18:19:09.823
> 
> 标签：apache-flex

我在 VGroup 中有一些 HGroup。根据用户选择，某些 HGroups 可能不可见。我想根据其子项的可见性重新调整 VGroup 的高度。任何建议将不胜感激以下是我在 Flex 中的代码：

```
<s:VGroup id="vgroup01" visible.stateDefault="false" includeInLayout.stateDefault="false" width="100%" autoLayout="true" >
    <s:HGroup id="hgrp01" gap="3" width="100%" horizontalAlign="left" verticalAlign="middle">...</s:HGroup>
    <s:HGroup id="hgrp02" gap="3" width="100%" horizontalAlign="left" verticalAlign="middle">...</s:HGroup>
    <s:HGroup id="hgrp03" gap="3" width="100%" horizontalAlign="left" verticalAlign="middle">...</s:HGroup>
</s:VGroup> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:41:08.163

请务必将 includeInLayout 属性设置为与您的可见属性相同的值。

# javascript - Chrome 和 IE 中的 Ctrl F/Find 功能修改布局

> ID：15096395
> 
> 赞同：1
> 
> 时间：2013-02-26T18:19:42.507
> 
> 标签：javascript, html, internet-explorer, google-chrome

在当前的最小示例（[http://jsfiddle.net/twPHW/](http://jsfiddle.net/twPHW/)）中：

```
<div style="overflow: hidden; height: 24px;">

<table>
<thead>
<tr>
<td style="background-color: rgb(109,173,157);">foo</td>
</tr>
</thead>
<tbody>
<tr>
<td style="background-color: rgb(236,222,117);">bar</td>
</tr>
</tbody></table>

</div> 
```

“foo”单元格是唯一可见的单元格。然后，如果我按 Ctrl-F（在浏览器中查找功能）并开始输入“bar”，则 div 内的表格将上升（其顶部更改）以向用户显示匹配的元素。

我知道这可能是一个功能，但对我来说它似乎是一个错误，因为它修改了网页的布局（清除搜索不会回滚上一个顶部元素）。

此错误发生在 Chrome 和 IE9 中，但不在 Firefox 中。

任何可以解决问题的解决方法？

PS：这似乎是相关[的 Browser ctrl+f find on the page shows result behind the static header](https://stackoverflow.com/questions/14317087/browser-ctrlf-find-on-the-page-shows-result-behind-the-static-header)但没有回答我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:27:00.467

溢出的内容仍然可以搜索。如果您不想显示它，请使用`display:none`

# asp.net - 创建和监听事件

> ID：15096396
> 
> 赞同：1
> 
> 时间：2013-02-26T18:19:50.560
> 
> 标签：asp.net, .net, vb.net

好的，在摆弄了 2 天之后，我终于得出结论，我根本不了解事件。

这是我正在尝试做的事情，然后是我的代码：

我的用户控件中有一个按钮，单击后，我想更新 .aspx 页面中的标签。所以我在我的用户控件中创建了一个事件处理程序，我试图在我的页面中监听它。但它根本不起作用，我希望有人能启发我。

用户控制：

```
Public Custom Event handleButtonEvent As EventHandler

    AddHandler(ByVal value As EventHandler)
        AddHandler btnEventCall.Click, AddressOf Me.doStuff
    End AddHandler

    RemoveHandler(ByVal value As EventHandler)
        RemoveHandler btnEventCall.Click, AddressOf Me.doStuff
    End RemoveHandler

    RaiseEvent (ByVal sender As Object, ByVal e As System.EventArgs)
    End RaiseEvent

End Event

Protected Sub btnEventCall_Click(sender As Object, e As EventArgs) Handles btnEventCall.Click

End Sub

Protected Sub doStuff()
    Response.Write("do stuff")   'dont really need this
End Sub 
```

.aspx 页面：

```
Protected Sub control_event(ByVal sender As Object, ByVal e As EventArgs) Handles test1a.handleButtonEvent
updateLabel()
End Sub

private sub updateLabel()
    lblUpdate.Text="works!"
end sub 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:17:11.203

我实际上只是在用户控件中实现了这一点，所以也许这会有所帮助。在您的用户控件中，您必须首先注册事件，如下所示：

```
Public Event DataChange As EventHandler 
```

您可以像这样触发该事件：

```
RaiseEvent DataChange(Me, New EventArgs) 
```

您将在用户控件中的按钮单击中触发此事件。该事件有两个您要传递的参数。发送者对象（在本例中为它本身）和事件参数。在此示例中，eventArgs 什么都不是，但您可以创建自己的并为其添加值。

现在，在您的 aspx 页面中，您需要附加该事件。构建应用程序时，您应该看到现在有一​​个名为 OnDataChange 的事件。这可以在客户端访问，如下所示：

```
<mc:myControlrunat="server" ID="myControl1" OnDataChange="myControl_dataChange"  /> 
```

您可以将其附加在后面的代码中。无论哪种方式，您都需要这样的事件：

```
 Protected Sub relatedOrders_dataChange(ByVal sender As Object, ByVal e As EventArgs)
   'do something
 end sub 
```

或者

```
 Protected Sub myControl_dataChange(ByVal sender As Object, ByVal e As EventArgs) handles myControl1.DataChange
   'do something
 end sub 
```

只是不要在服务器端和客户端都附加事件，否则您将看到事件触发两次。

那应该这样做。如果您想让它在没有完整回发的情况下工作，您可能还需要添加一些更新面板，否则，应该很好。概括：

用户控制：

```
Partial Class myControl
    Inherits System.Web.UI.UserControl
    Public Event DataChange As EventHandler

    'your button click event
    Protected Sub bnt_click(ByVal sender As Object, ByVal e As EventArgs)
      'do stuff
      'now raise the event
       RaiseEvent DataChange(Me, New EventArgs)
    end sub
end class 
```

主页：

```
<mc:myControlrunat="server" ID="myControl1" OnDataChange="myControl_dataChange"  /> 

Partial Class MyPainPage
    Protected Sub myControl_dataChange(ByVal sender As Object, ByVal e As EventArgs)
 'do stuff 
end sub

end Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:38:43.513

为了让您开始`Events`，请参阅下面的这个基本示例。至于在用户控件中执行此操作，[请参阅此链接](http://www.codeproject.com/Articles/8797/Mastering-Page-UserControl-Communication#4.3)

```
<%@ Page Language="VB" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<script runat="server">

Sub GreetingBtn_Click(ByVal sender As Object, ByVal e As EventArgs)

    GreetingLabel.Text = "Works!"

End Sub

</script>

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Button Example</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
      <h3>Simple Button Example</h3>

      <asp:Button id="GreetingBtn"
           Text="Click here for greeting..."
           OnClick="GreetingBtn_Click" 
           runat="server"/>
      <br />
      <br />
      <asp:Label ID="GreetingLabel" runat="server" 
                 Visible="true" Text="Hello World!" />
    </div>
    </form>
</body>
</html> 
```

如果要使用代码隐藏，请删除标签之间的所有内容，`<script>`包括标签并将其放入代码隐藏中：

```
Protected Sub GreetingBtn_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles GreetingBtn.Click

    GreetingLabel.Text = "Works!"

End Sub 
```

# c# - 在 C# 中创建表示文件夹结构（包括子文件夹）的 XML 文件

> ID：15096397
> 
> 赞同：1
> 
> 时间：2013-02-26T18:19:56.470
> 
> 标签：c#, xml, directory

如何生成一个构造给定文件夹的 XML 文件以递归地表示其中的所有文件和子文件夹？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T18:37:21.977

这是一个很好的问题示例，可以使用递归算法轻松解决！

伪代码：

```
function GetDirectoryXml(path)
    xml := "<dir name='" + path + "'>"

    dirInfo := GetDirectoryInfo(path)
    for each file in dirInfo.Files
        xml += "<file name='" + file.Name + "' />"
    end for

    for each subDir in dirInfo.Directories
        xml += GetDirectoryXml(subDir.Path)
    end for

    xml += "</dir>"

    return xml
end function 
```

它可以用 C# 和//[`DirectoryInfo`](http://msdn.microsoft.com/en-us/library/8s2fzb02.aspx)类来完成：`XDocument``XElement`

```
public static XElement GetDirectoryXml(DirectoryInfo dir)
{
    var info = new XElement("dir",
                   new XAttribute("name", dir.Name));

    foreach (var file in dir.GetFiles())
        info.Add(new XElement("file",
                     new XAttribute("name", file.Name)));

    foreach (var subDir in dir.GetDirectories())
        info.Add(GetDirectoryXml(subDir));

    return info;
} 
```

以及使用示例：

```
static void Main(string[] args)
{
    string rootPath = Console.ReadLine();
    var dir = new DirectoryInfo(rootPath);

    var doc = new XDocument(GetDirectoryXml(dir));

    Console.WriteLine(doc.ToString());

    Console.Read();
} 
```

我的笔记本电脑上的一个目录的输出：

```
<dir name="eBooks">
  <file name="Edulinq.pdf" />
  <file name="MCTS 70-516 Accessing Data with Microsoft NET Framework 4.pdf" />
  <dir name="Silverlight">
    <file name="Sams - Silverlight 4 Unleashed.pdf" />
    <file name="Silverlight 2 Unleashed.pdf" />
    <file name="WhatsNewInSilverlight4.pdf" />
  </dir>
  <dir name="Windows Phone">
    <file name="11180349_Building_Windows_Phone_Apps_-_A_Developers_Guide_v7_NoCover (1).pdf" />
    <file name="Programming Windows Phone 7.pdf" />
  </dir>
  <dir name="WPF">
    <file name="Building Enterprise Applications with WPF and the MVVM Pattern (pdf).pdf" />
    <file name="Prism4.pdf" />
    <file name="WPF Binding CheatSheet.pdf" />
  </dir>
</dir> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:25:09.703

很难知道您遇到了什么问题。

您需要使用[DirectoryInfo.GetFiles](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.getfiles.aspx)和[DirectoryInfo.GetDirectories](http://msdn.microsoft.com/en-us/library/s7xk2b58.aspx)来获取文件和文件夹的列表，并使用递归循环。然后使用 Xml.XmlDocument 编写[xml 文档](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)。

# winforms - 需要 dpiAware 可执行文件才能在 Windows XP/2003 中工作

> ID：15096400
> 
> 赞同：3
> 
> 时间：2013-02-26T18:20:07.253
> 
> 标签：winforms, manifest, windows-server-2003, dpi

我有一些 Windows 窗体应用程序需要在 XP/2003/Vista/7/2008/8/2012 上运行，并且当用户选择大字体或更高 DPI 时应该仍然看起来不错。在 app.manifest 中启用 DPI 感知适用于 Vista 及更高版本，但在 XP/2003 上，由于清单条目不受支持，应用程序会报告错误。

```
<?xml version="1.0" encoding="utf-8"?>
<asmv1:assembly manifestVersion="1.0" xmlns="urn:schemas-microsoft-com:asm.v1" xmlns:asmv1="urn:schemas-microsoft-com:asm.v1" xmlns:asmv2="urn:schemas-microsoft-com:asm.v2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <asmv1:application>
    <asmv1:windowsSettings xmlns="http://schemas.microsoft.com/SMI/2005/WindowsSettings">
      <dpiAware>true</dpiAware>
    </asmv1:windowsSettings>
  </asmv1:application>
</asmv1:assembly> 
```

在 Windows 2003 上使用该清单运行应用程序会导致以下错误消息：

```
This application has failed to start because the application
configuration is incorrect. 
```

并记录此 Windows 事件消息：

```
The element asmv1:application appears as a child of element
urn:schemas-microsoft-com:asm.v1^assembly which is not supported
by this version of Windows. 
```

是否可以以允许 XP/2003 忽略它们不支持的这部分清单的方式声明清单？或者我必须删除清单并对 SetProcessDPIAware 进行有条件的调用（即使我读过的所有内容都建议不要使用该 API 函数）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-20T10:41:54.090

我最终得到了这个清单

```
<?xml version='1.0' encoding='UTF-8' standalone='yes'?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
<dependency>
    <dependentAssembly>
        <assemblyIdentity
            type="win32"
            name="Microsoft.Windows.Common-Controls"
            version="6.0.0.0"
            processorArchitecture="x86"
            publicKeyToken="6595b64144ccf1df"
            language="*"
        />
    </dependentAssembly>
</dependency>
  <asmv3:application xmlns:asmv3="urn:schemas-microsoft-com:asm.v3">
    <asmv3:windowsSettings
         xmlns="http://schemas.microsoft.com/SMI/2005/WindowsSettings">
      <dpiAware>True/PM</dpiAware>     
    </asmv3:windowsSettings>
  </asmv3:application>
</assembly> 
```

Delphi 特定条件：使用运行时主题已关闭且 xpman.pas 未在任何地方使用

# php - Facebook og：图像显示错误

> ID：15096404
> 
> 赞同：1
> 
> 时间：2013-02-26T18:20:13.317
> 
> 标签：php, facebook, facebook-opengraph

您好，我在 facebook 上分享我的文章和请愿书的图像时遇到问题，它没有显示好的图像，但在 facebook 调试工具中是可以的。问题是当我在 facebook 上发布链接时，它会在正确的图像旁边插入 2 个缩略图，而正确的图像不是第一个。这是一个示例的链接：http: [//www.jednej.cz/petition.php?id=1897](http://www.jednej.cz/petition.php?id=1897)

这是我的php代码：

```
<?php

            $id=(isset($_GET['id']))? $_GET['id'] : '';
            $id = PREG_REPLACE("/[^0-9a-zA-Z.-@_]/i", '', $id);

            if($cat>0)
            {
                if($cat==1)
                {
                    $query = "select * from petition where id_petition='$id'";
                    $result = mysql_query($query)
                        or die("query failed: " . mysql_error());
                    while ($row = mysql_fetch_array($result))
                    {
                        $idz= $row['id_petition'];
                        $name=$row['name'];
                        $name1='Petice: '.$name.'';
                        $description=$row['description'];
                        $description=strip_tags($description);
                        $filename=$row['picture'];
                        if($filename!='')
                          $pic='petitions/'.$idz.'/'.$filename.'';
                        else
                            $pic='nopicture.jpg';
                        $description = substr($description, 0, 153);

                    }

                    echo'
                <meta property="og:title" content="',$name1,'" >
                <meta property="og:image" content="http://www.jednej.cz/images/'.$pic.'">

            <meta property="og:description" content="',$description,'">

                    <title>Jednej.cz - Petice: '.$name.'</title>
                    <meta name="description" CONTENT="Petice: '.$name.'-'.$description.'">
            ';
                }

            }
            ?> 
```

# javascript - Asp.NET 没有获取由 javascript 设置的自定义属性的更新值

> ID：15096411
> 
> 赞同：0
> 
> 时间：2013-02-26T18:20:34.453
> 
> 标签：javascript, jquery, .net, vb.net

这个问题一直困扰着我，任何解释为什么会有所帮助。

给定以下 DOM：

```
<body>
<form id="form1" runat="server">

    <div id="myDiv" runat="server" data-type="Monkey">
        Choose your inner animal!
        <ul>
            <li class="selected">Monkey</li>
            <li>Tiger</li>
            <li>Dog</li>
            <li>Bunny</li>
        </ul>
    </div>

    <asp:Button runat="server" ID="btnSubmit" Text="Submit" />

</form>
</body>
<script src="Assets/js/jquery-1.9.0.min.js" type="text/javascript"></script>
<script>
$(document).ready(function () {

    $('li').bind('click', function () {
        $('li.selected').removeClass('selected');
        var animal = $(this).addClass('selected').text();

        //$('#myDiv').data('type', animal);
        $('#myDiv').attr('data-type', animal);
    });

});
</script> 
```

代码背后：

```
Partial Class _Default
Inherits System.Web.UI.Page

Protected Sub btnSubmit_Click(sender As Object, e As System.EventArgs) Handles btnSubmit.Click
    Dim type As String = myDiv.Attributes("data-type")

    MsgBox(type)
End Sub
End Class 
```

MsgBox**总是**返回默认值“Monkey”。现在我确实实现了一个解决方法，我将值存储在一个隐藏字段中，然后在按钮单击时调用该值并且它有效。我确实尝试了更新面板，但没有运气，但这并不重要，因为我讨厌更新面板并且从不使用它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:30:03.627

这是一个限制——如果你想这样称呼它的话——HTML 和回发的方式。据我所知，它甚至不是 ASP.NET 的限制：它超出了这个范围。

只有某些标签的值才会回传到服务器。我认为这只是 INPUT 和 SELECT 标签，尽管可能有一个我没有想到。

标签中的属性甚至不会被回发：只是值。

因此，服务器对您在客户端上所做的更改一无所知，除非它是在 SELECT 中选择的内容或 INPUT 的值。ASP.NET 中的所有内容，从 ViewState 和回发数据重建的所有内容，都基于这些标记。

所以你的隐藏领域是你想要的事情发生的唯一途径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:04:53.257

在 SELECT 的情况下，如果在 JQuery 中将“禁用”属性设置为 true，然后在 ASP .Net 代码隐藏中，您将不会获得正确的值，而是会获得列表中的第一项作为 selecteditem 并且它是对应的值作为选定值。INPUT 也是如此。

我认为最简单的选择是使用隐藏字段，在 JQuery 中填充它们并在代码隐藏中使用它们的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T07:59:18.957

另一个常见原因是，如果您在 page_load 函数后面的代码中重建下拉列表，而没有检查它是否不是`IsPostBack`第一个。这将导致您每次将值重置为默认/第一项。

# c# - 使用 SqlDataSource 和 C# 准备语句检索 Oracle 数据

> ID：15096412
> 
> 赞同：1
> 
> 时间：2013-02-26T18:20:34.007
> 
> 标签：c#, oracle, prepared-statement, sqldatasource

我正在尝试编写用于使用 SqlDataSource 检索数据的准备好的语句，但似乎无法编写一个好的 SelectCommand 语句（下面的第 7 行）来执行此操作。有人可以说明如何做到这一点吗？

```
OracleCommand cm = new OracleCommand();
cm.CommandText = "SELECT FTPOSCODE FROM PPTBL WHERE DESC LIKE '%" + "@parm1" + "%";
cm.Parameters.Add("@parm1", "ACCOUNT");
OracleConnection cn = new OracleConnection();
cn.ConnectionString = ConfigurationManager.ConnectionStrings["ORCLConnectionString"].ConnectionString;
cn.Open();
SqlDataSource1.SelectCommand = cm.ToString();  // "ORA-00900: invalid SQL statement"
cn.Close(); 
```

* * *

以上是简化的。Slawomir 和我继续聊天并想出了以下工作代码。谢谢斯拉沃米尔！

```
using (OracleConnection cn = new OracleConnection(ConfigurationManager.ConnectionStrings["ORCLConnectionString"].ConnectionString)) {
    SqlDataSource1.SelectCommand = "SELECT FTPOSCODE, PTPOSCODE, POSCLASSTITLE, FKSA, JOBCAT, PAYGRADE, HRPAYRANGE, MONTHPAYRANGE FROM HR_PAY_PLAN WHERE UPPER(POSDESC) LIKE :1 OR UPPER(POSCLASSTITLE) LIKE :2 ORDER BY POSCLASSTITLE";
    SqlDataSource1.SelectParameters.Add(":1", "%" + key1 + "%");
    SqlDataSource1.SelectParameters.Add(":2", "%" + key1 + "%");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T18:42:52.680

在 Oracle 中，您应该使用`:parm1`而不是`@parm1`. 此外，您应该在参数值中添加百分号。此外，您不需要创建命令和连接，因为它将由 SqlDataSource1 创建。

```
SqlDataSource1.SelectCommand = "SELECT FTPOSCODE FROM PPTBL WHERE DESC LIKE :parm1";
SqlDataSource1.SelectParameters.Add(":parm1", "%ACCOUNT%"); 
```

# regex - 使用 SSIS RegEx 清洁转换来提取值

> ID：15096415
> 
> 赞同：1
> 
> 时间：2013-02-26T18:20:38.560
> 
> 标签：regex, ssis, sql-server-2008-r2

我有一个转换，我想从字符串中获取一个值并将其放在另一列中。

该值可以是：

*   从 -99 到 99 的负整数或正整数
*   在给定字符串中的单词“for”和“yards”之间找到

字符串值的一些示例（每行将单独解析）：

*   “（8:27）T.Barber 右后卫到 SF 21 没有收获（J.Winborn B.Young）。”
*   “（8:06）T.Barber 左铲球到 SF 24 为 -3 码（J.Winborn）。”
*   “(8:02) G.Hearst 右端到 SF 26 2 码 (M.Barrow B.Short)。”
*   “（7:22）J.Garcia 将 E.Johnson 传给 SF 27 1 码（D.Jones O.Stoutmire）。”
*   “（6:43）J.Garcia 左端在 SF 40 处跑了 13 码（J.Sehorn）。回来传球。”
*   “在 SF 27 处强制执行 SF-S.Gragg 进攻性控制 10 码的处罚 - 禁止比赛。”

我正在使用 Konesans RegEx Clean Tranformation ( [http://www.konesans.com/products/regexclean-transformation.aspx](http://www.konesans.com/products/regexclean-transformation.aspx) )，但我对正则表达式的使用有限。我能够使用在线工具来构建这种模式：

```
for (?<numval>(-?\d[\d|\s]))\s?yard. 
```

（链接到工作区 - [http://regexr.com?33u0f](http://regexr.com?33u0f)）

![SSIS 转换配置](../Images/42bfd5eb1d4bb7b4f7252c9b54495c4b.png)

转换仅在派生列中返回 NULL 值。任何有关此转换的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:42:42.900

我没有使用该工具的经验，也无法进行测试，但请尝试

*匹配* `(?<yards>-?\d\d?)\syard`

*代替* `${yards}`

# android - small、normal、large 和 xlarge 分别有多大？

> ID：15096417
> 
> 赞同：19
> 
> 时间：2013-02-26T18:20:41.027
> 
> 标签：android

我知道[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)中有一个关于物理屏幕尺寸类别的部分，但图表非常粗糙。当屏幕停止正常并属于大类别时？等等。我的意思是物理尺寸，而不是 dpi。类别中屏幕尺寸的具体限制是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-26T18:39:37.083

详细说明约翰博克的答案......

```
xlarge screens are at least 960dp x 720dp
large screens are at least 640dp x 480dp
normal screens are at least 470dp x 320dp
small screens are at least 426dp x 320dp 
```

并且由于在每个设备上`160dp` **大约**等于：`1in`

> 与密度无关的像素 - 基于屏幕物理密度的抽象单位。这些单位是相对于 160 dpi（每英寸点数）的屏幕而言的，在该屏幕上 1dp 大致等于 1px。

[http://developer.android.com/guide/topics/resources/more-resources.html#Dimension](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)

物理尺寸可以**大致**计算如下：

```
xlarge screens are at least 6in x 4.5in
large screens are at least 4in x 3in
normal screens are at least 2.9375in x 2in
small screens are at least 2.6625in x 2in 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-26T18:26:04.993

根据我的经验，使用 small、normal、large、x-large 符号对屏幕尺寸没有“特定限制”。它们更通用，在大多数情况下都能让你顺利通过。这些值是设备上 rom 的一部分，因此是否符合 API 文档中的标准取决于制造商。

如果您的目标是 API 13+，您可以使用 sw-dp 表示法来获得更具体的信息（请参阅[http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:42:17.107

[Android 兼容性定义](http://source.android.com/compatibility/index.html)仅规定设备必须大于 2.5"。但它确实也需要遵守多[屏幕支持文档](http://developer.android.com/guide/practices/screens_support.html)，因此虽然这些尺寸很粗略（正如您所指出的），但这是您可以依赖的全部，并且可能是您将获得的最佳信息。我相信 Google 故意在这里含糊其辞。您（作为开发人员）不应该担心确切的物理屏幕尺寸。

# php - PHP路径问题

> ID：15096419
> 
> 赞同：1
> 
> 时间：2013-02-26T18:20:51.587
> 
> 标签：php, path, pathing

我有一个文件，functions.php。该文件中有一些指向特定位置的函数，例如：

```
function returnFolders() {
    $folders = array_filter(glob("images/*"), 'is_dir');
    return $folders;
} 
```

此函数返回 images/ 文件夹中的目录，其中 functions.php 文件所在的位置。

问题是，如果我从另一个文件夹中的脚本中包含这个 function.php，而不是 function.php 所在的文件夹，这个函数将不会给出正确的结果。

如何解决这个问题，所以它总是会返回functions.php所在的文件夹？

路径如下所示：

```
common/functions.php
common/images/1
common/images/2
common/crons/im_including_functions.php
dir1/im_also_including_functions.php
d3/me_too.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:22:57.877

检查[魔术常数](http://php.net/manual/en/language.constants.predefined.php)。

例如，您可以使用`__DIR__`获取当前脚本目录。

在不了解您的目录结构的情况下，我真的不能更具体。

* * *

再想一想，在我看来，对于您的情况，更好的解决方案是使用`images`文件夹的绝对路径。这样，无论这个函数在哪里运行，它都会`images`在同一个地方寻找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:28:44.380

当您使用相对路径时，它与相对路径和绝对路径有关，它从运行代码的文件开始

所以首先你应该了解这两种类型的路径

[http://webdesign.about.com/od/beginningtutorials/a/aa040502a.htm](http://webdesign.about.com/od/beginningtutorials/a/aa040502a.htm)

稍后您可以找到解决此问题的最佳方法

有关路径 [http://php.net/manual/en/function.realpath.php的 php 函数的一些帮助](http://php.net/manual/en/function.realpath.php)

希望这有帮助；）

# python - 没有递归的Python递归错误？

> ID：15096421
> 
> 赞同：-1
> 
> 时间：2013-02-26T18:20:53.050
> 
> 标签：python, recursion

我是 python 新手，我正在构建一个用于娱乐/教育目的的网络爬虫。我没有使用任何递归函数，但我仍然收到“RuntimeError：超出最大递归深度”错误。我真的很困惑，有点觉得我错过了一些明显的东西或者只是误解了一些东西。我是否以某种方式递归，或者它可能与我的大循环有关？这个想法是爬取网络，直到你爬取了 10k 个页面。

更新：

最新代码在这里： http: [//pastebin.com/4v5GT7ft](http://pastebin.com/4v5GT7ft)

堆栈跟踪在这里： http: [//pastebin.com/9GzAxZM9](http://pastebin.com/9GzAxZM9)

看起来我的问题是尝试在未正确编码的 URL 上调用 str()。我尝试解码 URL，然后将它们编码为 un​​icode，但我从来没有成功地做到这一点。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:33:41.497

你给我们的代码实际上并没有运行（它缺少所有的`import`语句，它有缩进错误等等），它需要一个我们没有的 JET 数据库和一个第三方模块来读取它，并且使用主目录中预先存在的目录是硬编码的。

我试图在[http://pastebin.com/rCJriEu5](http://pastebin.com/rCJriEu5)上解决所有这些问题（这需要`lxml`并且`bs4`——如果您使用的是不同的解析库或 BS3，我可以这样尝试）。

当我运行它时，它似乎工作。它已完成 31.73%，还没有错误。即使我`sys.setrecusionlimit(50)`在文件的开头做了 a，它似乎仍然有效（到目前为止完成了 3.67%）。

因此，您的代码中的任何错误显然都在您没有向我们展示的代码中。

# vb.net - 如何引用位于不同选项卡上的控件 VB.NET

> ID：15096426
> 
> 赞同：0
> 
> 时间：2013-02-26T18:21:05.300
> 
> 标签：vb.net, datagridview, tabcontrol

希望在由代码创建的另一个选项卡上引用数据网格视图。

我想用当前选定选项卡中的数据网格视图的列填充组合框。现在我只能让组合框填充用户加载的最后一个文件，而不是选择 w/e 选项卡。

```
Dim mstrFirstFile As String = ""
Dim mstrFileName As String = ""
Dim mdstTableInput As New DataSet
Dim mintCounter As Integer
Dim mdgvTab As DataGridView

Public Function CreateNewDGVInsideNewPageTab() As DataGridView
    Dim tbpNewTab As New TabPage()
    tbpNewTab.Text = mstrFileName

    Dim mdgvTabControl As New DataGridView
    mdgvTabControl.Dock = DockStyle.Fill
    mdgvTabControl.Name = ("Grid" + ToString(mintCounter))

    tbpNewTab.Controls.Add(mdgvTabControl)
    tbcsource.TabPages.Add(tbpNewTab)
    tbcsource.SelectedTab = tbpNewTab
    Return mdgvTabControl
End Function

Private Sub generate()

    Dim objCLSConverter As New DataTier.clsCSVConverter
    Dim strNewXMLPath As String = ""
    Dim xmlFile As XmlReader

    If mstrFirstFile.Length > 1 Then

        strNewXMLPath = objCLSConverter.writeXML(mstrFirstFile)

        xmlFile = XmlReader.Create(strNewXMLPath, New XmlReaderSettings())

        Dim dsTemp As DataSet = New DataSet
        Dim dtTable As DataTable = Nothing

        dsTemp.ReadXml(xmlFile)
        dtTable = dsTemp.Tables(0).Copy
        dtTable.TableName = mintCounter
        mdstTableInput.Tables.Add(dtTable)

        mdgvTab = CreateNewDGVInsideNewPageTab()

        mdgvTab.DataSource = mdstTableInput.Tables(mintCounter)

        mintCounter = (mintCounter + 1)

        cbxColumnsUpdate()

        xmlFile.Close()

    End If
End Sub 
```

任何帮助，或者如果您需要更多我的代码，请告诉我。

* * *

该程序获取用户添加的任何 .csv 或 .xls 文件并将其放入数据集中。它将这些文件添加到一个新的代码生成选项卡上，其中包含一个数据网格视图，其中加载了文件。

选择选项卡时，组合框将填充该选项卡数据网格视图的所有列名，您可以选择任何选项卡，它将重新填充该选项卡的组合框。然后，您可以从组合框中选择列名，然后在文本框中输入您在该列中搜索的 w/e，它只是一个 select where 子句。

然后，这些数据将被扔到下面的数据网格视图中，供用户查看并导出到 Excel 或继续更改。这都是为了一般报告目的和数据按摩。

现在的问题是组合框不会根据选择的选项卡重新填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:52:08.860

只是一个选项 - 转换这个：

```
Dim mdgvTab As DataGridView 
```

到字典：

```
Dim mdgvTabDictionary As Dictionary(Of Integer, DataGridView) 
```

然后，在`Sub generate()`你里面替换这个：

```
mdgvTab = CreateNewDGVInsideNewPageTab() 
```

对此：

```
Dim mdgvTab As DataGridView = CreateNewDGVInsideNewPageTab()
mdgvTabDictionary.Add(mintCounter, mdgvTab) 
```

现在您不需要处理控件层次结构并按名称查找控件。相反，您可以`DataGridView`通过 index: 找到您需要的`mdgvTabDictionary(index)`。

不要忘记`mdgvTabDictionary`在`Sub New`, `Form_Load`（或适用于您的情况的任何其他地方）初始化：

```
mdgvTabDictionary = New Dictionary(Of Integer, DataGridView) 
```

# php - 关于在php脚本中为多个mysql查询组织代码的思考

> ID：15096428
> 
> 赞同：2
> 
> 时间：2013-02-26T18:21:10.027
> 
> 标签：php, mysql, pdo, code-formatting

我认为这是一个随机的问题，它更多地与风格和组织有关。我有一个 Web 应用程序，我在其中使用 PDO 与 MySQL 数据库连接，并且在某些脚本中，有很多查询一个接一个，不一定涉及相同的表。即，我将在一个语句中执行一个 SELECT 语句，然后根据某些值，我将更新另一个语句，最后从另一个语句中删除。

问题是我最近才学习 PHP 和 MySQL，因为我不确定并且想要小心并轻松发现任何问题（还有一点是因为我对统一性和编码风格等愚蠢的事情有点强迫症和肛门）我使用以下格式的每个查询

```
try {
    $statement = "
        UPDATE/SELECT   ...
        FROM/SET    ...
        WHERE   ...";
    $query = $dbcnx->prepare($statement);
    $flag = $query->execute();
}
catch (PDOException $e) {
    $errorMsg = "...";
    error_log($errorMsg,3,'../../xxx.log');
    $response = ...;
    $dbcnx->null;
    return $response;
}
$result = $query->fetch/fetchAll/fetcColumn... 
```

所以我可以找到任何问题会发生的地方（尝试/捕获）并防止注入和无效字符（准备）（我进行了一些个人检查，但我很确定专门为之设计的功能会更好）。

当我有一个或两个查询时，它很好，但是在代码增长之后，对于小动作/物质来说它变得有点太多了（比如一个查询需要 16 行......）

所以我想要一些建议。如何使我的代码更易于管理？我的结构逻辑（我写它的方式）是否存在一些基本错误？使用 try/catch 有什么规则吗？是否更多用于开发和调试，然后您可以删除其中的一些块？

我正在考虑制作一个仅包含这段代码的函数，并将语句作为参数调用它。所以我只需在主体中“键入”查询，然后调用准备、执行并返回结果的函数。当然，我总是会使用 fetchAll 并返回一个关联数组，但我认为只要数据集很小，内存使用量就可以了（无论如何，在当今的系统中，我认为应该花很多时间才能注意到差异）。 ..

欢迎任何想法。

我意识到这实际上不是代码和设置以及软件和程序的问题，就像这里的其他问题一样，但我确实希望它仍然遵循这种精神。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:23:22.093

首先，感谢您提出的精彩问题。
令我惊讶的是，这里很少有问题要求更好的代码实践。
没有人关心他们的代码质量，但每个人都要求复制/粘贴代码，而不管他们有什么。

接下来，您需要了解两件重要的事情：

1.  Try..catch 是一个特殊的（不是双关语）运算符。它必须很少使用，因为您可以从错误中恢复，按照代码处理。用它来记录错误是一种致命的罪恶，也是对宝贵而强大的机制的浪费。
2.  您真正需要的是一个**数据库抽象层**来完成所有繁琐的工作并处理复杂的情况。

您需要阅读异常。
这是自语法高亮以来编程语言的最大改进。
他们不打算立即被抓住。这一点恰恰相反——以集中的方式捕获异常，只有一个异常处理程序。

但即使没有处理程序例外也足够好。错误的查询将停止您的脚本，将显示 503 错误，并将记录错误消息或根据 PHP 设置将其显示在屏幕上 - 无需更多！

因此，只需摆脱所有处理代码并告诉 PHP 使用哪个文件来记录错误

```
ini_set('log_errors',1);
ini_set('error_log','/path/to/log'); 
```

并且您将使用更少的代码获得相同的结果。

至于抽象库，看你的代码：

```
$statement = "UPDATE/SELECT  FROM/SET    ...         WHERE   ...";
$query = $dbcnx->prepare($statement);
$flag = $query->execute();
$result = $query->fetch/fetchAll/fetcColumn... 
```

**四行**，只有**其中一行**有意义。

为什么不让它成为一条线 -

```
$result = $db->getRes( $statement); //okay, leaving query separate for readability 
```

只是为了让您了解它是如何实现的-我自己的[数据库抽象类](https://github.com/colshrapnel/safemysql)
基于 mysqli，但可以在包括 PDO 在内的任何其他驱动程序上轻松重写

# android - 可以在 AlertDialog 的不同行上显示不同的消息吗？

> ID：15096435
> 
> 赞同：0
> 
> 时间：2013-02-26T18:21:23.023
> 
> 标签：android

我想设置我的 AlertDialog 以便我可以在不同的时间在不同的行上显示不同的信息。因此，第一行可能有一条一般消息，例如“登录失败”，然后第二行会泄露有关第一行的额外信息，例如“无法连接到服务器”。

我需要能够根据自己的选择设置这些消息（通过程序的说明）。

我不是在问如何编程……而是，这可能吗？对我来说，AlertDialog 似乎只知道一行文本，并且是通过 setMessage 控制的。

即使我用两个 TextView 构建了一个布局，我仍然无法访问第二个文本视图。对此问题的任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:36:44.110

我认为实际上不可能做我想做的事，但 Rotary Heart 的解决方案同样有效。谢谢你。

# ruby-on-rails-3 - 当数据未存储在模型中时，Rails 搜索栏。使用外部 API

> ID：15096438
> 
> 赞同：1
> 
> 时间：2013-02-26T18:21:36.927
> 
> 标签：ruby-on-rails-3, search, rotten-tomatoes

我正在尝试创建一个搜索栏，当有人搜索时，它将在同一页面上显示所有结果。我被卡住了，因为当数据本身没有存储在模型中时，我不知道该怎么做。我正在使用[BadFruit rails gem](https://github.com/brianmichel/BadFruit)来查询烂番茄电影列表。

```
def search(movie_title)
   bf = BadFruit.new("YOUR_API_KEY_HERE")
   bf.movies.search_by_name(movie_title)
 end 
```

#search 方法返回一个索引为 0 的搜索结果数组。我希望搜索结果显示在与搜索栏相同的视图中。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:50:16.633

数据来自您自己的数据库还是来自外部 API 应该没有区别。控制器根本不应该关心。它只是使用任何搜索参数获取数据，并以前端可以使用的形式呈现数据。这就是 MVC 设计的全部意义所在，将这些层分开。

听起来您想将搜索转换为 AJAX 请求。页面上的 javascript 将调用搜索请求，并从控制器的搜索方法中取回一段 HTML 或一段 JSON。然后，它将使用 HTML 片段替换页面的一部分，或者使用 JSON 块中的数据更新页面。

使用类似[KnockoutJS](http://knockoutjs.com/)的东西可以使使用 JSON 响应更新页面变得更加简单和直接。

# mysql - 使用临时表的字段进行插入

> ID：15096439
> 
> 赞同：0
> 
> 时间：2013-02-26T18:21:39.850
> 
> 标签：mysql, temp-tables

我想将临时表中的所有字段移动到另一个表中，但我的语句似乎不起作用。在生成要在插入语句中使用的临时表后，如何选择某些字段。

这是我生成临时表的代码，它可以工作：

```
> CREATE TEMPORARY TABLE table2 AS(SELECT ca.catref AS cx_ref, c.name AS code_name, ca.title, ca.keywords, ca.cat1, ca.cat2, ca.cat3, ca.active, ca.moderated,
FROM table ca
JOIN anothertable c ON c.prefix = LEFT( ca.catref, 3 )) 
```

这是我之后直接调用的代码，它引用了临时表，但似乎不起作用......

```
> INSERT INTO mytable (catref, cartoonist, title, keywords, cat1, cat2, cat3, active, moderated, source_db)
SELECT catref, code_name, title, keywords, cat1, cat2, cat3, active, moderated, source_db from table2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:33:30.757

您在第一个查询（创建临时）中有错误，之后`ca.moderate`，删除昏迷... `ca.moderated,`：

```
CREATE TEMPORARY TABLE table2 AS(
SELECT ca.catref AS cx_ref, c.name AS code_name, 
ca.title, ca.keywords, ca.cat1, ca.cat2, ca.cat3,
ca.active, ca.moderated
FROM table ca
JOIN anothertable c ON c.prefix = LEFT( ca.catref, 3 )) 
```

插入试试这个：

```
INSERT INTO `mytable` 
(catref, cartoonist, title, keywords, cat1, cat2, cat3, active, moderated, source_db) 
SELECT * 
from `table2` 
```

# intuit-partner-platform - 从 IntuitBatchResponse 获取状态

> ID：15096440
> 
> 赞同：1
> 
> 时间：2013-02-26T18:21:40.583
> 
> 标签：intuit-partner-platform

我正在使用 IntuitBatchRequest 将多张发票插入 Quickbooks Online。我试图了解响应属性以了解哪些发票是成功的，以及那些不成功的发票的具体问题是什么。我正在尝试两种不同的方法来查看结果。一旦程序循环通过它们进行记录。代码的简化版本如下所示：

```
Dim invcResponse as BatchItemResponse
For each invcResponse in lclBatchResponse.BatchItemResp
    batchID=invcResponse.bId 
    faultType=invcResponse.Fault.type
Next invcResponse 
```

另一个代码将响应绑定到网格以供我查看。网格代码片段如下所示：

```
<asp:GridView id="gv_BatchStatus" runat="server">
<Columns>
<asp:TemplateField>
    <ItemTemplate>
    Item<asp:Label id="lbl_item" runat="server" text='<%# Bind("Item.Id.value") %>'></asp:Label>
    Fault<asp:Label id="lbl_flt" runat="server" text='<%# Bind("Fault.type") %>'></asp:Label> 
```

上述属性有效。但是，当我尝试绑定到 Fault.Error.Code 时，它​​告诉我 Intuit.Ipp.Data.Error[] 不包含名为“code”的属性。但是，Error 的类列表显示它具有属性，包括代码、详细信息、元素和消息。这些属性还在 Visual Studio 的对象浏览器中显示为 Error 的字符串属性。所以，这是我的问题... 1\. 成功的最终决定因素是什么属性和价值？2\. 我如何获得有关错误的更多信息？我能找出的唯一错误属性（Fault.type）只是告诉我我得到了一个 ID 异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:09:24.613

我刚刚完成了一个成功的批处理请求。在上面提到的遍历响应项的迭代代码中，我使用以下代码来确定每张发票是否成功。

```
`If invcResponse.Fault is Nothing then 
    sStatus="OK"
else 
    For each error in invcResponse.Fault.Error 
        sStatus=sStatus & oError.Message &", " 
    Next oError 
End If` 
```

这似乎与文档和我得到的响应一致。

# java - java.lang.IllegalArgumentException: 非正数 maxBytesPerChar

> ID：15096442
> 
> 赞同：5
> 
> 时间：2013-02-26T18:21:49.947
> 
> 标签：java, character-encoding

我们有多线程 java 应用程序，它正在执行文件操作并初始化字符集编码，如下所示。

```
Charset charset;
CharsetDecoder decoder;
CharsetEncoder encoder;
String charsetCoding = CharsetUtil.getJVMCharset();                        
charset = Charset.forName(charsetCoding);
decoder = charset.newDecoder();
encoder = charset.newEncoder();  // Exception is thrown from this line 
```

我们最近开始在执行过程中随机看到下面的异常，当我们尝试重新处理同一个文件时，它被处理而没有任何错误，谷歌没有帮助，因为我们找不到任何有类似错误的东西，

```
Caused by: java.lang.IllegalArgumentException: Non-positive maxBytesPerChar
    at java.nio.charset.CharsetEncoder.<init>(CharsetEncoder.java:175)
    at java.nio.charset.CharsetEncoder.<init>(CharsetEncoder.java:209)
    at sun.nio.cs.ISO_8859_1$Encoder.<init>(ISO_8859_1.java:116)
    at sun.nio.cs.ISO_8859_1$Encoder.<init>(ISO_8859_1.java:113)
    at sun.nio.cs.ISO_8859_1.newEncoder(ISO_8859_1.java:46)
    at myClass.readFile 
```

感谢有人可以提供任何帮助，方向。

我似乎找不到 jdk 5 的完整源代码（我的源代码不包含 sun.* 包的代码）我反编译了 Encoder 类，我看不出这怎么可能，因为代码正在传递硬编码值“1.0”在这里。

```
class ISO_8859_1$Encoder extends CharsetEncoder
{
  private final Surrogate.Parser sgp = new Surrogate.Parser();

  private ISO_8859_1$Encoder(Charset paramCharset)
  {
    super(paramCharset, 1.0F, 1.0F);
  } 
```

我有以下 CharsetEncoder 的来源，即使编码器通过了 1.0，它的值也小于 0

```
protected CharsetEncoder(Charset cs,
             float averageBytesPerChar,
             float maxBytesPerChar)
{
this(cs,
     averageBytesPerChar, maxBytesPerChar,
     new byte[] { (byte)'?' });
} 
```

“这个”调用下面的函数

```
 protected
CharsetEncoder(Charset cs,
       float averageBytesPerChar,
       float maxBytesPerChar,
       byte[] replacement)
{
this.charset = cs;
if (averageBytesPerChar <= 0.0f)
    throw new IllegalArgumentException("Non-positive "
                       + "averageBytesPerChar");
if (maxBytesPerChar <= 0.0f)
    throw new IllegalArgumentException("Non-positive "
                       + "maxBytesPerChar");***
if (!Charset.atBugLevel("1.4")) {
    if (averageBytesPerChar > maxBytesPerChar)
    throw new IllegalArgumentException("averageBytesPerChar"
                       + " exceeds "
                       + "maxBytesPerChar"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T14:31:41.137

看看：[http ://docs.oracle.com/javase/7/docs/api/java/nio/charset/CharsetEncoder.html](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/CharsetEncoder.html)

在 API 开头的文本末尾，它说：“此类的实例对于多个并发线程的使用是不安全的。”

您是否在多个线程中使用单个 CharsetEncoder 对象？

# sorting - 如何在更改另一个列排序顺序时保持 rownum 排序顺序？

> ID：15096443
> 
> 赞同：0
> 
> 时间：2013-02-26T18:21:51.250
> 
> 标签：sorting, oracle11g, rownum

**Oracle11g**

无论列的排序顺序如何，我都希望 rownum 按顺序出现（从最小到最大）。我可以通过通过子选择发送查询来实现这一点，如本**Query**所示。

**问题**：有没有其他方法可以让 rownum 排序独立于**“order by”**子句？

```
with alphabet as
( select 'A' as letters from dual union all
  select 'B' as letters from dual union all 
  select 'C' as letters from dual)
  select rownum, letters from
  (select letters from alphabet
  --    order by  letters -- I can change the sort order here w/o changing rownum sort order.
     order by  letters desc) 
```

如果我不进行子选择，那么我的 rownum 将按列排序，如下所示：

```
with alphabet as
( select 'A' as letters from dual union all
  select 'B' as letters  from dual union all 
  select 'C' as letters from dual)
  select rownum, letters  from alphabet  
  order by letters desc      -- sorting here alters the rownum sort. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:28:43.737

使用内联视图有什么缺点？

您始终可以使用`row_number`分析函数而不是`rownum`伪列。但这需要你把你的`ORDER BY`放在两个不同的地方

```
with alphabet as
( select 'A' as letters from dual union all
  select 'B' as letters  from dual union all
  select 'C' as letters from dual)
select row_number() over (order by letters desc) rn,
       letters
  from alphabet
 order by letters desc 
```

只要您的分析函数`ORDER BY`与`ORDER BY`外部查询中的匹配，无论排序顺序如何，它都有效

```
SQL> ed
Wrote file afiedt.buf

  1  with alphabet as
  2  ( select 'A' as letters from dual union all
  3    select 'B' as letters  from dual union all
  4    select 'C' as letters from dual)
  5  select row_number() over (order by letters desc) rn,
  6         letters
  7    from alphabet
  8*  order by letters desc
SQL> /

        RN L
---------- -
         1 C
         2 B
         3 A

SQL> ed
Wrote file afiedt.buf

  1  with alphabet as
  2  ( select 'A' as letters from dual union all
  3    select 'B' as letters  from dual union all
  4    select 'C' as letters from dual)
  5  select row_number() over (order by letters asc) rn,
  6         letters
  7    from alphabet
  8*  order by letters asc
SQL> /

        RN L
---------- -
         1 A
         2 B
         3 C 
```

# android - preferences.getBoolean 导致崩溃

> ID：15096444
> 
> 赞同：0
> 
> 时间：2013-02-26T18:21:53.017
> 
> 标签：android, sharedpreferences

我已经盯着这段代码看了一段时间了，我看不出哪里出错了。我正在尝试实现仅在首次运行的应用程序上运行的覆盖活动。

我得到一个空指针异常。

任何帮助将不胜感激。

我的 onCreate():

公共类 MainActivity 扩展 Activity { SharedPreferences 首选项；查看顶层布局；

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    topLevelLayout= findViewById(R.layout.activity_instructions);
    preferences = PreferenceManager.getDefaultSharedPreferences(this);

    if (isFirstTime()) {
        topLevelLayout.setVisibility(View.INVISIBLE);
    } 
```

而 isFirstTime 方法：

```
private boolean isFirstTime()
{
    boolean ranBefore = preferences.getBoolean("RanBefore", false); // The program crashes here
    if (!ranBefore) {
        SharedPreferences.Editor editor = preferences.edit();
        editor.putBoolean("RanBefore", true);
        editor.commit();
        topLevelLayout.setVisibility(View.VISIBLE);
        topLevelLayout.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            topLevelLayout.setVisibility(View.INVISIBLE);
            return false;
            }
        });
    }
    return ranBefore;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:28:56.123

尝试获取这样的偏好

```
 preferences =getSharedPreferences("yourpreferencename", 0); 
```

你的`PreferenceManager.getDefaultSharedPreferences(this);`回报为空

# ios - 如果 uiview 包含子视图，如何在 uiview 中更改容器视图的位置

> ID：15096452
> 
> 赞同：0
> 
> 时间：2013-02-26T18:22:25.793
> 
> 标签：ios, objective-c, cocoa-touch, uistoryboardsegue

我有一个 UIview，里面有一个容器视图。现在 UIview 可能在给定的条件下包含子视图。容器视图从另一个 tableview 获取数据。
当 uiview 有子视图时，它与容器视图中的数据重叠，因为后者的位置正好在故事板中 uiview 的底部。我需要重新定位这个容器视图的框架，以便子视图中的子视图`UIView`不'不要重叠它们。每当`UIView`有子视图使用但它没有显示任何更改时，我都尝试重绘容器视图的框架原点`CGRectMake()`。我是 ios 新手，所以很难继续。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:56:09.647

好的，现在我知道是什么导致了问题。setFrame:CGRectMake() 无法正常工作，因为在我的主情节提要的文件检查器框中为特定视图选中了使用 autoLayout。因此没有发生视图和容器视图的大小调整。但是不取消选中它可以调整它们的大小，但它改变了与该特定视图关联的所有其他视图的布局。我仍在研究如何防止这种情况发生。非常感谢任何帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:15:34.087

更改容器视图的框架

```
[containerView setFrame:CGRectMake(10, 10, 20, 20)]; 
```

# javascript - 调整 Google 地图标记图标图像的大小

> ID：15096461
> 
> 赞同：167
> 
> 时间：2013-02-26T18:22:47.947
> 
> 标签：javascript, google-maps, google-maps-markers, image-resizing

当我将图像加载到标记的图标属性中时，它会以其原始大小显示，这比它应该的要大得多。

我想将标准尺寸调整为更小的尺寸。做这个的最好方式是什么？

代码：

```
function addMyPos(latitude,longitude){
  position = new google.maps.LatLng(latitude,longitude)
  marker = new google.maps.Marker({
    position: position,
    map: map,
    icon: "../res/sit_marron.png"
  });
} 
```

* * *

## 回答 #1

> 赞同：367
> 
> 时间：2014-07-17T04:27:36.407

如果原始尺寸是 100 x 100，并且您想将其缩放到 50 x 50，请使用 scaledSize 而不是 Size。

```
var icon = {
    url: "../res/sit_marron.png", // url
    scaledSize: new google.maps.Size(50, 50), // scaled size
    origin: new google.maps.Point(0,0), // origin
    anchor: new google.maps.Point(0, 0) // anchor
};

var marker = new google.maps.Marker({
    position: new google.maps.LatLng(lat, lng),
    map: map,
    icon: icon
}); 
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2013-02-26T18:29:55.267

**正如评论中提到的，这是支持带有文档的 Icon 对象的更新解决方案。**

使用[图标对象](https://developers.google.com/maps/documentation/javascript/markers#complex_icons)

```
var icon = {
    url: "../res/sit_marron.png", // url
    scaledSize: new google.maps.Size(50, 50), // scaled size
    origin: new google.maps.Point(0,0), // origin
    anchor: new google.maps.Point(0, 0) // anchor
};

 posicion = new google.maps.LatLng(latitud,longitud)
 marker = new google.maps.Marker({
  position: posicion,
  map: map,
  icon: icon
 }); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-08-14T12:46:27.963

[MarkerImage 已被 Icon 弃用](https://developers.google.com/maps/documentation/javascript/overlays#convertingToIcon)

> 在 Google Maps JavaScript API 3.10 版之前，复杂图标被定义为 MarkerImage 对象。Icon 对象文字是在 3.10 中添加的，并从 3.11 版本开始替换 MarkerImage。Icon 对象文字支持与 MarkerImage 相同的参数，允许您通过删除构造函数、将先前的参数包装在 {} 中并添加每个参数的名称来轻松地将 MarkerImage 转换为 Icon。

Phillippe 的代码现在是：

```
 var icon = {
     url: "../res/sit_marron.png", // url
     scaledSize: new google.maps.Size(width, height), // size
     origin: new google.maps.Point(0,0), // origin
     anchor: new google.maps.Point(anchor_left, anchor_top) // anchor 
 };

 position = new google.maps.LatLng(latitud,longitud)
 marker = new google.maps.Marker({
  position: position,
  map: map,
  icon: icon
 }); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2018-01-24T11:46:09.023

删除origin和anchor图片会更规则

```
 var icon = {
        url: "image path", // url
        scaledSize: new google.maps.Size(50, 50), // size
    };

 marker = new google.maps.Marker({
  position: new google.maps.LatLng(lat, long),
  map: map,
  icon: icon
 }); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-06-30T07:40:48.237

如果您像我一样使用 vue2-google-maps，设置大小的代码如下所示：

```
<gmap-marker
  ..
  :icon="{
    ..
    anchor: { x: iconSize, y: iconSize },
    scaledSize: { height: iconSize, width: iconSize },
  }"
> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-19T19:53:19.003

像我这样对该主题的完全初学者可能会发现，如果在您的控制范围内，使用在线编辑器或像 Photoshop 之类的照片编辑器**自己调整图像大小**，实现这些答案之一更难。

500x500 的图像在地图上会比 50x50 的图像更大。

无需编程。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-11T04:30:20.143

所以我只是遇到了同样的问题，但有点不同。**正如Philippe Boissonneault**建议的那样，我已经将图标作为对象，但我使用的是 SVG 图像。

为我解决的问题是：
从 SVG 图像切换到 PNG 并跟随**Catherine Nyo**获得一个两倍于您将使用的图像大小的图像。

# php - PHP表链接

> ID：15096471
> 
> 赞同：-1
> 
> 时间：2013-02-26T18:23:18.120
> 
> 标签：php

我在 MySQL 中有两个表，假设表 A 和 B。在表 AI 中有我的客户的详细信息，在表 BI 中有旨在通过 member_id 链接到表 A 的其他详细信息。

我有一个 PHP 页面，我在其中使用以下代码调用表 A 中的信息并将其回显以显示。这工作正常：

```
$result = mysql_query("SELECT * FROM members
WHERE member_msisdn='$slusername'"); 
```

在同一页面上，我有另一个查询应该从表 B 中提取信息，但它应该使用表 A member_id 来显示正确的信息

```
$result = mysql_query("SELECT * FROM recipients
WHERE member_id='NOT SURE WHAT TO PLACE HERE'"); 
```

如果我在第一部分调用 member_id，是否可以在第二部分告诉它链接表 B 中的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:36:08.460

您可能需要这样的查询：

```
SELECT * FROM members a  
INNER JOIN recipients b
ON id.members = id.recipients
WHERE member_msisdn=$slusername 
```

其中`ON`语句指示两个表共享的字段。

# mysql - 基于其他行的 MySQL 子查询

> ID：15096472
> 
> 赞同：1
> 
> 时间：2013-02-26T18:23:18.620
> 
> 标签：mysql, subquery, elgg

我有一个看起来像这样的表：

```
entity_guid    | name           | value
---------------|----------------|--------
189501         | context        | groups
189501         | column         | 3
189509         | context        | profile
189509         | column         | 3
189521         | context        | profile
189521         | column         | 2
189551         | context        | groups
189551         | column         | 1
189552         | context        | groups
189552         | column         | 3
189554         | context        | groups
189554         | column         | 2
189559         | context        | profile
189559         | column         | 1
189591         | context        | profile
189591         | column         | 3 
```

我想更新 where`name = column`和`value = 3`so that的行`value = 2`。但我只想用相同的`entity_guid`和用`name = context`和更新存在另一行的行`value = groups`。

因此，例如，如果我要选择要更改的行，它们将是：

```
entity_guid    | name           | value
---------------|----------------|--------
189501         | column         | 3
189552         | column         | 3 
```

我努力了：

```
SELECT * FROM (
    SELECT * FROM `elggprivate_settings` WHERE `name` = 'context' AND `value` = 'groups'
) AS subquery
WHERE `name` = 'column' AND `value` = 3 
```

但这当然行不通，因为桌子不是那样设置的；有多个相同的行`entity_guid`。顺便说一下，这是社交网络引擎 elgg 数据库中的一个表。我对 MySQL 不是很好，在网上找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:37:59.667

xQbert 很接近，但他忘记了用于检查子记录存在的上下文/组子句。

```
UPDATE 
  elggprivate_settings
SET
   value = '2'
WHERE
   name = 'column' AND value = '3'
   AND entity_guid IN (
     SELECT 
       entity_guid 
     FROM 
       elggprivate_settings 
     WHERE 
       name = 'context'  
       AND value = 'groups') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:37:58.127

最快的方法是将表连接到自身（连接通常比子查询快）：

```
UPDATE elggprivate_settings es
 JOIN elggprivate_settings es2
   ON es2.entity_guid = es.entity_guid
SET es.value = '2'
WHERE es.value = '3'
AND es.name = 'column'
AND es2.name = 'context'
and es2.value = 'groups'; 
```

# forms - 通过 Jquery-Ajax 提交复选框表单

> ID：15096474
> 
> 赞同：-6
> 
> 时间：2013-02-26T18:23:24.603
> 
> 标签：forms, jquery, checkbox

当通过 jQuery ajax 检查复选框时，我正在尝试提交表单。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:35:55.603

这不是用户友好的，但你可以这样做

```
$('#checkbox').change(function() {
    // Is checkbox checked?
    if ($(this).is(':checked')) {
        // Send parent form data via post
        $.post('submission-url.html', $(this).closest('form').serialize(), function(data) {
            // process response
        });
    }
}); 
```

您可以通过而不是“submission-url.html”从元素中获取`action`属性`form``$(this).closest('form').attr('action')`

# html - Netbeans 7.3 显示警告 CSS 类未找到，即使它存在并在 JSP 中工作

> ID：15096475
> 
> 赞同：2
> 
> 时间：2013-02-26T18:23:27.127
> 
> 标签：html, css, jsp, netbeans-7.3

我最近升级到netbeans 7.3，现在我遇到了一个问题。当我浏览我之前的代码时，对于 jsp 文件中的某些 css 类，它显示未找到 css 类并添加引用。

即使我正在编写新代码，对于某些类，它也不会显示警告，但对于某些类会。下面我附上了一张图片，我在其中附上了一个 global.css 文件，在 jsp 中`id="content-container"`它运行良好，但`class="table-form"`它显示警告说找不到此类，并且在提示中，它显示添加对 css 文件的引用的选项。单击此链接后，什么也没有发生。

任何想法？

![我包含的 css 文件仍然显示警告](../Images/e92e04903afba6a78bca1b2f60e57dcc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-15T06:31:47.690

当我创建一个 html 文件的副本时，我遇到了同样的问题。

正如上面的答案所建议的，我只是更改了外部 CSS 文件的路径（添加了一个字符），保存了一次，将其更改回原始/正确的文件，CSS 类警告消失了。

在 Netbeans 7.4 补丁 3（内部版本 201310111528）上为我工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T16:49:03.307

使用 NetBeans 8.0.2，我必须关闭项目并使用选项“使用现有源的新项目”再次创建它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T10:42:08.310

我没有解决此问题的方法，但找到了可以尝试的解决方法。在 href 中包含上下文路径似乎可以解决此问题：

```
<head>
    <link type="text/css" rel="stylesheet" href="#{request.contextPath}/resources/css/stylesheet.css" />
</head> 
```

这有时只对我有用......但编辑href值并保存似乎让Netbeans重新解析页面。

# c# - 使用 LINQ 提取特定类型的列表元素

> ID：15096478
> 
> 赞同：3
> 
> 时间：2013-02-26T18:23:33.020
> 
> 标签：c#, linq, list, extract

我有一个对象列表，我必须编写一个方法来根据输入参数提取一些元素，该输入参数是一个类型的数组。该函数必须从列表中返回一个元素数组，每个元素都是类型数组中一个元素的实例。同时，必须从容器列表中删除这些元素，但前提是它们都确实存在于列表中。类型比较是通过`Type.IsInstanceOfType(o)`方法实现的。

```
class A {}
class B : A {}
class C : A {}
class D : A {}

public static A[] ExtractElements (List<A> list, Type[] specifiers) {...}

Type[] specifiers1 = new Type[2] {typeof(D), typeof(B)};
Type[] specifiers2 = new Type[3] {typeof(C), typeof(A), typeof(D)};
Type[] specifiers3 = new Type[2] {typeof(A), typeof(A)};
Type[] specifiers4 = new Type[2] {typeof(C), typeof(C)};

List<A> list = new List<A> {new B(), new A(), new D(), new C(), new A()};
A[] result1 = ExtractElements (list, specifiers1);

list  = new List<A> {new B(), new A(), new D(), new C(), new A()};
A[] result2 = ExtractElements (list, specifiers2);

list  = new List<A> {new B(), new A(), new D(), new C(), new A()};
A[] result3 = ExtractElements (list, specifiers3);

list  = new List<A> {new B(), new A(), new D(), new C(), new A()};
A[] result4 = ExtractElements (list, specifiers4); 
```

此代码片段的结果将是：

```
 result1 is {D, B}, list is {A, C, A}  
  result2 is {C, B, D}, list is {A, A}  
  result3 is {B, A}, list is {D, C, A}  
  result4 is empty array, list is {B, A, D, C, A} 
```

作为一项单独的工作，是否可以编写一个类似的 ExtractElements 方法，如果列表包含请求类型的项目，其列表中的顺序对应于类型输入数组中元素的顺序，则该方法仅返回非空数组，如下所示

```
Type[] specifiers5 = new Type[2] {typeof(B), typeof(D)};
Type[] specifiers6 = new Type[2] {typeof(C), typeof(B)};

List<A> list = new List<A> {new B(), new A(), new D(), new C(), new A()};
A[] result5 = ExtractElements (list, specifiers5);

list  = new List<A> {new B(), new A(), new D(), new C(), new A()};
A[] result6 = ExtractElements (list, specifiers6); 
```

此代码片段的结果将是：

```
result5 is {B, D}, list is {A, C, A}  
result6 is empty array, list is {B, A, D, C, A} 
```

我知道这`LINQ`是实现这一点的方法，但不幸的是我没有这方面的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:51:39.847

这听起来非常适合[`Enumerable.OfType<T>()`](http://msdn.microsoft.com/en-us/library/bb360913.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:30:40.953

怎么样：

```
public IEnumerable<TType> ExtractElements<TType>(IEnumerable<TType> list, IEnumerable<Type> specifiers) {
   var specifiersList = specifiers.ToList();

   return list.Where(t => specifiersList.Any(s => s.IsAssignableFrom(t.GetType())));
}

var specifiers5 = new[] {typeof(B), typeof(D)};
var list = new List<A> {new B(), new A(), new D(), new C(), new A()};

// you can call ToArray() if you want but ForEach won't be available on that
// and you'll need a standard foreach() loop
var result5 = ExtractElements(list, specifiers5).ToList();

result5.ForEach(Console.WriteLine); 
```

有关[更多](http://msdn.microsoft.com/en-us/library/system.type.isassignablefrom.aspx)信息`Type.IsAssignableFrom()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:04:27.180

这应该可以得到你想要的一切。我在该方法中添加了一个可选参数`ExtractElements`，可让您启用/禁用订单匹配。

```
public static A[] ExtractElements (List<A> list, Type[] specifiers, bool orderMatters = false)
{
    var allFound = true;
    var listBackup = list.ToList(); // Make a backup copy   
    var returnList = new List<A>();
    var earliestMatch = 0;

    foreach (var spec in specifiers)
    {
        var item = list.FirstOrDefault (i => spec.IsAssignableFrom(i.GetType()));
        if (item != null)
        {
            var matchPosition = list.IndexOf(item);
            if (orderMatters && matchPosition < earliestMatch)  // we have an out of order match
            {
                allFound = false;
                break;
            }
            earliestMatch = matchPosition;
            list.Remove(item);
            returnList.Add(item);
        }
        else
        {
            allFound = false;
            break;
        }
    }

    if(!allFound)
    {
        // Can't just assign list to listBackup because we have to update the 
        // underlying values not the reference that was passed to the function.
        list.Clear();
        listBackup.ForEach(i => list.Add(i));
        returnList.Clear();
    }

    return returnList.ToArray();
} 
```

我建议获取一份[LinqPad](http://www.linqpad.net/)的副本，以帮助您测试任何`LINQ`语句并进行`LINQ`总体学习。

希望这可以帮助。

# c# - 我想找到一个 xpath 元素并通过检查它之前和之后的元素来确认它是正确的

> ID：15096482
> 
> 赞同：-1
> 
> 时间：2013-02-26T18:23:56.643
> 
> 标签：c#, vb.net, xpath

我正在使用 xpaths 运行使用 VB 在 C# 中开发的自动化。我无法找到一个元素，然后通过检查前一个元素和后一个元素来确认该元素是否正确。

示例：
我想选择第二个“日期”，然后通过检查“test2”之前的元素和“time2”之后的元素是否是正确的元素来确认它是正确的“日期”。这能把事情弄清楚吗？

或者：我一直在 firefox 上使用 Firepath 来查找元素。我一直在使用的命令是 //preceding:: *[contains(text(),'time2')]//* [contains(text(),'date')]//following::*[contains(text( ),'test2')]

我还添加了我的html：

```
<html>
<head>
</head>
<body>
<div> this is a test 
   <div> <h1> test1 </h1> </div>
   <div> <h1> date </h1> </div>
   <div> <h1> time1 </h1> </div>
   <div> <h1> test2 </h1> </div>
   <div> <h1> date </h1> </div>
   <div> <h1> time2 </h1> </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:17:36.090

那么这有什么关系吗？

```
/html/body/div/div[h1/text()=' date ' and preceding-sibling::div/h1/text()=' test2 ' and following-sibling::div/h1/text()=' time2 '] 
```

或启动 root 并检查所有内容，就像您的那样：

```
//div/div[h1/text()=' date ' and preceding-sibling::div/h1/text()=' test2 ' and following-sibling::div/h1/text()=' time2 '] 
```

# install4j - 运行可执行文件或批处理文件任务不会在 Windows 上应用参数

> ID：15096484
> 
> 赞同：0
> 
> 时间：2013-02-26T18:23:59.357
> 
> 标签：install4j

我发现自己处于令人羡慕的位置，试图将第 3 方安装程序添加到现有的 install4j 项目中。我们正在尝试验证第 3 方安装程序在启动时不会在 Windows Vista/7 上生成单独的 UAC 请求。我可以使用几个参数来使安装静默，它们可以通过命令提示符或 PowerShell 工作。

我目前正在使用 install4j 5.0 和 5.1 对此进行测试，因为我们还没有安排构建服务器升级到 5.1。我的测试机器是 Windows 7 虚拟机，我已经测试了 Java 1.6 和 1.7 捆绑并预装了 1.7。

在安装过程中，参数似乎没有成功传递给进程。使用 Process Explorer，我可以看到 CMD.EXE 是使用命令启动的

```
C:\Windows\system32\cmd.exe /D /C "C:\Users\KRACHY~1\AppData\Local\Temp\i4j1544166103144462629.bat" 
```

批处理文件正在调用

```
"C:\Users\KRACHY~1\AppData\Local\Temp\E4JF73~1.TMP\user\VCREDI~1.EXE"  /q /norestart 
```

然后将 setup.exe 提取到一个临时文件夹中并使用

```
c:\a87fe1446d33379e58\Setup.exe 
```

我可以跟踪所有这些，因为最终设置缺少 /q /norestart 参数，并且它从一个许可协议页面开始，我们在安装的早期就获得了许可。

现在，由于该过程已停止，我可以保存从安装程序中提取的所有文件。如果我直接从命令提示符运行该批处理文件命令行，安装程序确实会按预期安静地安装。因此，当作为完整 install4j 进程的一部分运行时，有些东西会阻止参数一直进入最终设置过程。可能会饿死环境空间？我怎样才能确切地知道这些过程发生了什么和/或修复它？

如果我们不需要仅仅因为我们现在依赖这个库就需要更新我们的安装文档，我会更喜欢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:13:32.250

您可以在“运行脚本”操作中尝试 new ProcessBuilder("path to executable", "/q", "/norestart").redirectErrorStream(true).start().waitFor() 。中间批处理文件将在 install4j 6 中消失。

# google-apps-script - 如何在冻结行上方的 Google 电子表格中调用脚本？

> ID：15096485
> 
> 赞同：0
> 
> 时间：2013-02-26T18:24:00.363
> 
> 标签：google-apps-script, google-sheets

在冻结的行上方，我想放置一个链接到脚本的图像；例如，单击图像并运行脚本。

*   我可以插入图像并向其添加脚本，问题：只能在冻结行下完成。
*   我可以使用 =image("imageurl";2) 插入图像，我什至可以为此 =hyperlink("url"; image("imageurl";2)) 放置一个超链接，这很好用，但我不能调用一个脚本。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T21:40:04.420

[如何使用应用脚本在谷歌电子表格的单元格内添加 UI？](https://stackoverflow.com/questions/6876819/how-do-you-add-ui-inside-cells-in-a-google-spreadsheet-using-app-script)... 显示如何插入绘图并将其链接到脚本。不幸的是，正如您所发现的，在冻结的行或列中不允许浮动图像，因此如果您必须冻结行，该技术就会失效。在互联网上快速搜索会发现这是对 Google 表格的长期投诉。（[例如](http://productforums.google.com/forum/#!topic/docs/t8IyqODh058)。）

有很多选择，但都不理想：

*   请改用自定义菜单功能。这意味着用户需要寻找一些菜单选项来踢你的脚本，但无论他们身在何处，它都会保持在视野中。

*   使用您描述的超链接和图像解决方法，但使用已发布的脚本 url 作为目标。这将允许您间接运行谷歌应用程序脚本。

*   使用侧边栏。好的，Sheets 实际上还不支持此功能 - 请访问[问题 3162](https://code.google.com/p/google-apps-script-issues/issues/detail?id=3162)并为它加注星标以获取更新。

# java - 谷歌分析导入无法解决

> ID：15096486
> 
> 赞同：1
> 
> 时间：2013-02-26T18:24:01.430
> 
> 标签：java, android, import, google-analytics

我正在尝试跟踪`pageviews`，`Google Analytics`但我在导入时不断收到错误消息。我在下面的代码中列出了错误所在的位置。

我还将 jar 文件放在 java 构建路径中，并在`Android Manifest`.

我的问题是如何让下面的代码正确编译。

```
import com.google.android.apps.analytics.GoogleAnalyticsTracker;  //Error:  "The import com.google.android.apps cannot be resolved"

public class MainMenu extends Activity {

    GoogleAnalyticsTracker tracker;  //Error:  "The import com.google.android.apps cannot be resolved to a type"

    final Context context = this;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.mainmenumain);

        tracker = GoogleAnalytics.getInstance();
        tracker.startSession("UA-38788135-1", this);

        btn1.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                tracker.trackPageView("/Categories");  //Error:  "The import com.google.android.apps cannot be resolved to a type"
                Intent intent = new Intent(MainMenu.this, Categories.class);
                startActivity(intent);
            }
        });

        btn2.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                tracker.trackPageView("/Highscores");  //Error:  "The import com.google.android.apps cannot be resolved to a type"
                Intent intent = new Intent(MainMenu.this, Highscores.class);
                startActivity(intent);
            }
        });

        btn3.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                tracker.trackPageView("/About");  //Error:  "The import com.google.android.apps cannot be resolved to a type"
                Intent intent = new Intent(MainMenu.this, About.class);
                startActivity(intent);
            }
        });

        btn4.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                tracker.trackPageView("/ComingSoon");  //Error:  "The import com.google.android.apps cannot be resolved to a type"
                Intent intent = new Intent(MainMenu.this, ComingSoon.class);
                startActivity(intent);
            }
        });
    } 
```

![在此处输入图像描述](../Images/6e4664fd757f32f843603fa7aa070719.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T13:32:40.223

您正在尝试在谷歌分析中跟踪按钮点击，但不要在 onClick() 中使用 trackPageView 来跟踪按钮事件

```
btn1.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                tracker.trackPageView("/Categories");  //Error:  "The import com.google.android.apps cannot be resolved to a type"
                Intent intent = new Intent(MainMenu.this, Categories.class);
                startActivity(intent);
            }
        }); 
```

将此代码用于 onClick() 内部的按钮事件跟踪，而不是上面的 onClick() 代码

```
GaTracker.trackEvent("Your Buttons Category", "Your event name", "", 0L);
GAServiceManager.getInstance().dispatch(); 
```

宣布

```
private Tracker GaTracker;
private GoogleAnalytics GaInstance; 
```

内部 onCreate() 方法使用

```
GaInstance = GoogleAnalytics.getInstance(this);
GaTracker  = GaInstance.getTracker("YOUR UA-Here");
GaTracker.sendView("/YourActivity"); // Include this line if you want to track page view 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T13:08:59.367

GoogleAnalyticsTracker 在 libGoogleAnalyticsV1.jar 中使用，但您使用的是最新版本的 libGoogleAnalyticsV2.jar。要在 libGoogleAnalyticsV2 中跟踪页面视图，请使用以下代码声明

```
private Tracker GaTracker;
private GoogleAnalytics GaInstance; 
```

onCreate() 方法内部

```
GaInstance = GoogleAnalytics.getInstance(this);
GaTracker  = GaInstance.getTracker("YOUR UA-Here");
GaTracker.sendView("/YourActivity"); 
```

# c# - WebMethod 返回 JSON 对象问题

> ID：15096488
> 
> 赞同：0
> 
> 时间：2013-02-26T18:24:14.233
> 
> 标签：c#, javascript, json, webmethod

从 WebMethod 返回时，我正在努力正确处理对象。条件（我之后的研究）：

保存属性的简单类：

```
 public class memberLogin
    {
    public string Username {get; set;}
    public string Password {get; set;}
    } 
```

序列化方法：

```
 public static string JsonSerializer<T>(T t)
        {
            DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(T));
            MemoryStream ms = new MemoryStream();
            ser.WriteObject(ms, t);
            string jsonString = Encoding.UTF8.GetString(ms.ToArray());
            ms.Close();
            return jsonString;
        } 
```

（为清楚起见进行了简化）Webmethod

```
 [WebMethod(EnableSession = true)]
    public static string getCredentials()
        {
            memberLogin ml = new memberLogin();
            ml.Username = "user";
            ml.Password = "pass";
            string json = JsonHelper.JsonSerializer<memberLogin>(ml);
            return json;
        }
        return null;
    } 
```

和 JavaScript

```
$("#element").live("click", function (e) { 

$.ajax({
    type: "POST",
    url: "Default.aspx/getCredentials",
    data: "{}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    async: false,
    cache: false,
    success: post_to_url
});
});
function post_to_url(params) {
method = "post";
path = "http://example";

var form = document.createElement("form");
form.setAttribute("method", method);
form.setAttribute("action", path);

for(var key in params) {
    if(params.hasOwnProperty(key)) {
        var hiddenField = document.createElement("input");
        hiddenField.setAttribute("type", "hidden");
        hiddenField.setAttribute("name", key);
        hiddenField.setAttribute("value", params[key]);

        form.appendChild(hiddenField);
     }
}
document.body.appendChild(form);
form.submit();
} 
```

调试时，WebMethod 返回`"{\"Password\":\"pass\",\"Username\":\"user\"}"`，所以它似乎是我想要的（键，值 par），`\`但它是如何序列化的。但是，当使用 ajax 检索时，我无法从中获取任何值。`alert(params)`给`object Object`, 调用 params.Username 给`undefined`. 有什么我想念的吗？某种演员？我认为如果对象被序列化，那么就没有这样的需要。很抱歉发了很长的帖子，但我试图提供尽可能多的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T18:30:54.050

您必须将 JSON 字符串解析为 JSON 对象。在 Javascript 中：

```
var user = JSON.parse(params.responseText);
var username = user.Username;
var password = user.Password; 
```

# asp.net - asp.net 将部分 aspx 页面发送到电子邮件

> ID：15096489
> 
> 赞同：0
> 
> 时间：2013-02-26T18:24:16.940
> 
> 标签：asp.net, html, viewstate, code-behind

我有一个 ASPX 页面

```
<h1 class="TitleClass" >Title</h1>

<p> some stuff </p>
<p> some stuff </p>

<div class="ContentClass" > Content </div> 
```

我想发送一封包含此 ASPX 文件某些部分的电子邮件：我只想将 h1 和 div 作为 html 作为电子邮件发送，我如何从后面的代码中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:26:57.647

您需要为您的电子邮件制作一个模板（这将是最简单的），例如获取您要发送的部分：

```
string message=@"<h1 class='TitleClass' >Title</h1>
                 <div class='ContentClass' > Content </div>"; 
```

尝试这个：

```
MailMessage mail = new MailMessage(from, to, subject, message);
mail.IsBodyHtml = true;
SmtpClient client = new SmtpClient("localhost");
client.Send(mail); 
```

请注意，我将邮件消息 html 设置为 true：**mail.IsBodyHtml = true;** 并将您的 html 发送到`message`.

# vb.net - 从模块 [VB.NET] 访问表单控件

> ID：15096493
> 
> 赞同：0
> 
> 时间：2013-02-26T18:24:34.077
> 
> 标签：vb.net, forms

我可以从 VB.NET 中的模块访问/访问表单控件对象吗？我在 Form 中有一个网络浏览器，所以我的问题是我可以从模块访问它（例如更改设置）。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:30:00.813

控件必须作为参数传入。由于 Module 表现为静态（共享）类，因此它本身没有状态或访问实例成员。

```
Module MyModule

    Public Shared Sub MyMethod(ByVal myControl as WebUserControl)

        ' do your mojo

    End Sub

End Module 
```

如果您只想从页面级别获得全局访问权限，您可以发送页面，但您需要对各种控件执行递归搜索，并且您将无法访问呈现的输出，因此数据绑定控件（如 GridViews）或 FormViews 将不会以相同的方式工作，并将受到事件生命周期的影响。

```
Public Shared Sub MyMethod(ByVal myPage as Page)

End Sub 
```

# c++ - 不能将 BTreeNode * 转换为 BTreeP &(typedef BTreeNode* BTreeP;)

> ID：15096494
> 
> 赞同：0
> 
> 时间：2013-02-26T18:24:42.333
> 
> 标签：c++, pointers, types, reference

我写了一个关于 BTree 的程序，代码如下：

```
class BTreeNode 
{
public:
...
    BTreeNode* getChild(const int i);    
private:
...
};
typedef BTreeNode* BTreeP;

void _insert_key_to_unfull_tree(BTreeP &tree, int key);

// the problematic implementaion
_insert_key_to_unfull_tree(tree->getChild(i), key); 
```

编译器说不能将 BTreeNode * 转换为 BTreeP &，我应该如何解决这个问题？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:26:42.410

`_insert_key_to_unfull_tree(*(tree->getChild(i)), key);`

当然，您可能想要验证 getChild 不返回 null！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:14:44.793

该函数`_insert_key_to_unfull_tree`需要一个指针的引用：

```
void _insert_key_to_unfull_tree(BTreeNode*& tree, int key); 
```

尝试更改`getChild`，使其返回对指针的引用：

```
BTreeNode*& getChild(const int i); 
```

顺便说一句，您可能希望删除`typedef BTreeNode* BTreeP`以减少混淆。

# windows-phone-7 - 从市场下载 WP8 应用程序图标

> ID：15096500
> 
> 赞同：1
> 
> 时间：2013-02-26T18:24:54.747
> 
> 标签：windows-phone-7, windows-phone-8

我需要从 windows phone 市场下载应用程序的图标。我有应用程序的 ID，对于 WP7 应用程序，我这样做是从[http://catalog.zune.net/v3.2/en-US/apps/{0}/primaryImage?width=200](http://catalog.zune.net/v3.2/en-US/apps/)，其中 { 0} 是应用程序 ID。这似乎不适用于 WP8 应用程序，我找不到任何方法。有可能吗，如果是的话 - 怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:35:10.063

WP8 稍微复杂一些。给定app id，你需要先获取icon id，然后才能获取icon。例如 - 愤怒的小鸟有 app id `e4571a02-0b87-e011-986b-78e7d1fa76f8`，因此您可以在 URL [http://marketplaceedgeservice.windowsphone.com/v8/catalog/apps/e4571a02-0b87-e011-986b-78e7d1fa76f8?os=8.0&cc=US&lang=上获得应用详情zh-CN](http://marketplaceedgeservice.windowsphone.com/v8/catalog/apps/e4571a02-0b87-e011-986b-78e7d1fa76f8?os=8.0&cc=US&lang=en-US) .

您会返回一个 XML 响应（Atom 提要格式），查找`<image><id>`元素，它会为您提供图像的 id - `urn:uuid:3b32ef92-dba1-4e4f-867a-ee439349f698`。

[有了它，您可以在http://cdn.marketplaceimages.windowsphone.com/v8/images/3b32ef92-dba1-4e4f-867a-ee439349f698](http://cdn.marketplaceimages.windowsphone.com/v8/images/3b32ef92-dba1-4e4f-867a-ee439349f698)上获得高质量的图标（大尺寸 PNG）。有一些额外的参数可以在 JPG 高压缩中获得更小的图像尺寸。例如[http://cdn.marketplaceimages.windowsphone.com/v8/images/3b32ef92-dba1-4e4f-867a-ee439349f698?hw=469838851&imagetype=icon_small](http://cdn.marketplaceimages.windowsphone.com/v8/images/3b32ef92-dba1-4e4f-867a-ee439349f698?hw=469838851&imagetype=icon_small)。

# .net - 以win形式跨多个组框的一键

> ID：15096505
> 
> 赞同：0
> 
> 时间：2013-02-26T18:25:18.633
> 
> 标签：.net, winforms

我的winform中有多个组框，将根据树视图选择显示，我只想在所有组中使用一个按钮，我必须根据树视图选择调用唯一方法，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:37:04.303

要根据您选择的 treeView 节点执行某些操作，您可以在 TreeView 控件的 AfterSelect 事件上执行此操作（假设您有 1 个 TreeView、4 个 GroupBox 和一个名为*button1*的按钮）：

```
private void treeView1_AfterSelect(object sender, TreeViewEventArgs e)
        {
            //Get current selected node
            TreeNode treenode = treeView1.SelectedNode;

            //Position the button so it will be visible, change according needs
            button1.Location = new Point(20, 20);

            //I'm making the selection using "Text" property
            switch (treenode.Text)
            {
                case "1":
                    changeVisible(groupBox1); //Hide all GroupBoxes excep groupBox1
                    groupBox1.Controls.Add(button1);//Add the button1 to GroupBox1 Controls property

                    //You can execute a specific ethod for this case here.
                    //DoSomethingForTreeNode1();

                    break;
                case "2":
                    changeVisible(groupBox2);
                    groupBox2.Controls.Add(button1);
                    break;
                case "3":
                    changeVisible(groupBox3);
                    groupBox3.Controls.Add(button1);
                    break;
                case "4":
                    changeVisible(groupBox4);
                    groupBox4.Controls.Add(button1);
                    break;
            }
        }

        //The only purpouse of this method is to hide all but the desired GroupBox control
        private void changeVisible(GroupBox groupBox)
        {
            //Loop across all Controls in the current Form
            foreach (Control c in this.Controls)
            {
                if(c.GetType() == typeof(GroupBox))
                {
                    if(c.Equals(groupBox))
                    {
                        c.Visible = true;

                    }
                    else
                    {
                        c.Visible = false;
                    }

                }

            }
        } 
```

希望有帮助，

# linux - 使用远程 gdbserver 启动 ddd

> ID：15096506
> 
> 赞同：8
> 
> 时间：2013-02-26T18:25:21.130
> 
> 标签：linux, debugging, gdb, gdbserver, ddd-debugger

我正在使用 ddd 调试在远程目标上运行的程序（例如，远程 gdbserver 在 localhost 上通过端口 1234 运行，但仍充当远程）。

我知道你可以通过打开 ddd 连接到 gdbserver，然后调用 ddd`target remote localhost:1234`的 gdb 命令行，如：
[http ://www.gnu.org/software/ddd/manual/html_mono/ddd.html#Remote% 20程序](http://www.gnu.org/software/ddd/manual/html_mono/ddd.html#Remote%20Program)

`target remote localhost:1234`但是，我讨厌每次打开 ddd 时都必须调用该命令，并且我想将其设置为使用别名自动连接到 gdbserver。我尝试运行`ddd --rhost localhost:1234 program`，但是一旦 ddd 启动一个窗口，提示“GDB 无法启动”，并在 shell 中写道：

> sh: 1: exec: localhost:1234: 未找到

任何人都知道如何在启动时附加到远程 gdbserver？

天呐！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T02:56:38.667

选择以下之一：

1.  `ddd --eval-command="target remote localhost:1234"`
2.  放入`target remote localhost:1234`文件并用于`--command` 执行它
3.  放入`target remote localhost:1234`你的`.gdbinit`

# wpf - 在 ComboBox 的 ItemsPanel 上方添加其他控件

> ID：15096507
> 
> 赞同：4
> 
> 时间：2013-02-26T18:25:30.300
> 
> 标签：wpf, combobox, textbox, itemspaneltemplate

我想制作一个 searchable `ComboBox`，搜索框是在下拉展开时`TextBox`出现在上方的a 。我想我需要制作一个自定义控件来实现搜索功能，但首先我只是想让. 这是我当前的尝试，当我尝试展开下拉列表时会产生异常：`ItemsPanel``ComboBox``TextBox``ComboBox`

```
<Style x:Key="FilteredComboBox" TargetType="ComboBox">
    <Setter Property="ItemsPanel">
        <Setter.Value>
            <ItemsPanelTemplate>
                <StackPanel>
                    <TextBox/>
                    <StackPanel IsItemsHost="True"
                                Orientation="Horizontal"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Center"/>
                    </StackPanel>

            </ItemsPanelTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

这产生的异常是：

> 无法显式修改用作 ItemsControl 的 ItemsPanel 的 Panel 的 Children 集合。ItemsControl 为 Panel 生成子元素。

我很确定有办法让它做我想做的事，但经过几个小时的谷歌搜索和反复试验，我现在头晕目眩。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T17:29:27.893

虽然我对此的回答都是正确的，但我认为他们中的任何一个都没有真正回答我的问题，足以被标记为解决方案。我最终做的是从 ComboBox 派生一个自定义控件（右键单击设计器中的 ComboBox 并选择 Edit Template -> Edit a Copy，这会为我复制的 ComboBox 模板生成一大堆 XAML 代码到我制作的自定义控件项目的 Generic.xaml 文件）。然后，我编辑了生成的 XAML 代码的 Popup 部分，在 ItemsPresenter 上方添加了一个 WatermarkTextBox（来自 Extended WPF Toolkit），如下所示：

```
<Popup x:Name="PART_Popup" AllowsTransparency="true" Grid.ColumnSpan="2" IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}" Margin="1" PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}" Placement="Bottom">
    <Themes:SystemDropShadowChrome x:Name="Shdw" Color="Transparent" MaxHeight="{TemplateBinding MaxDropDownHeight}" MinWidth="{Binding ActualWidth, ElementName=MainGrid}">
    <Border x:Name="DropDownBorder" BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}" BorderThickness="1" Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}">
        <ScrollViewer x:Name="DropDownScrollViewer">
        <Grid RenderOptions.ClearTypeHint="Enabled">
            <Canvas HorizontalAlignment="Left" Height="0" VerticalAlignment="Top" Width="0">
            <Rectangle x:Name="OpaqueRect" Fill="{Binding Background, ElementName=DropDownBorder}" Height="{Binding ActualHeight, ElementName=DropDownBorder}" Width="{Binding ActualWidth, ElementName=DropDownBorder}"/>
            </Canvas>
            <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <xtk:WatermarkTextBox Grid.Row="0"
                          Visibility="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource booleanToVisibilityConverter}}"
                          Watermark="Type here to filter..."
                          Text="{Binding SearchFilter, RelativeSource={RelativeSource TemplatedParent}, UpdateSourceTrigger=PropertyChanged}">
            </xtk:WatermarkTextBox>
            <ItemsPresenter x:Name="ItemsPresenter" Grid.Row="1" KeyboardNavigation.DirectionalNavigation="Contained" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
            </Grid>
        </Grid>
        </ScrollViewer>
    </Border>
    </Themes:SystemDropShadowChrome>
</Popup> 
```

我将 Text 绑定到的 SearchFilter 属性是我的自定义控件代码隐藏中的一个属性，然后它执行 ComboBox 中值的实际过滤。这有点超出了我原来的问题的范围，但如果有人好奇，这就是我如何进行过滤：

```
public class SearchableComboBox : ComboBox
{
    public const string SearchFilterPropertyName = "SearchFilter";
    public readonly static DependencyProperty SearchFilterProperty;
    public string SearchFilter
    {
        get { return (string)GetValue(SearchFilterProperty); }
        set { SetValue(SearchFilterProperty, value); }
    }

    static SearchableComboBox()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(SearchableComboBox), new FrameworkPropertyMetadata(typeof(SearchableComboBox)));

        SearchFilterProperty = DependencyProperty.Register(SearchFilterPropertyName, typeof(string), typeof(SearchableComboBox),
            new PropertyMetadata(string.Empty, new PropertyChangedCallback(SearchFilter_PropertyChanged)));

    }

    private static void SearchFilter_PropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        ((SearchableComboBox)d).RefreshFilter();
    }

    private void RefreshFilter()
    {
        if (this.ItemsSource != null)
        {
            ICollectionView view = CollectionViewSource.GetDefaultView(this.ItemsSource);
            view.Refresh();
        }
    }

    private bool FilterPredicate(object value)
    {
        if (value == null)
            return false;

        if (string.IsNullOrEmpty(SearchFilter))
            return true;

        return value.ToString().Contains(SearchFilter, StringComparison.CurrentCultureIgnoreCase);
    }

    protected override void OnItemsSourceChanged(IEnumerable oldValue, IEnumerable newValue)
    {
        if (newValue != null)
        {
            ICollectionView view = CollectionViewSource.GetDefaultView(newValue);
            view.Filter += this.FilterPredicate;
        }

        if (oldValue != null)
        {
            ICollectionView view = CollectionViewSource.GetDefaultView(oldValue);
            view.Filter -= this.FilterPredicate;
        }

        base.OnItemsSourceChanged(oldValue, newValue);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:12:47.513

您可以使用[msdn](http://msdn.microsoft.com/en-us/library/ms752094%28v=vs.85%29.aspx)中的“ComboBox ControlTemplate” 。

您必须 `Popup`从此样式编辑。我在那里添加`Grid`了两行控件。在我添加的第一行`TextBox`中，我认为`WatermarkTextBox`扩展 WPF 工具包 ( [WatermarkTextBox](http://wpftoolkit.codeplex.com/wikipage?title=WatermarkTextBox&referringTitle=Home) ) 将提供更好的选择。在第二行，你有`ScrollViewer`你的物品。

从`TextBox`第一行总是可见的，当`ComboBox`有很多项目时，只有这些元素会在滚动内容中。

下面是完整的例子：

```
<!-- Fill Brushes -->

<LinearGradientBrush x:Key="NormalBrush" StartPoint="0,0" EndPoint="0,1">
    <GradientBrush.GradientStops>
        <GradientStopCollection>
            <GradientStop Color="#FFF" Offset="0.0"/>
            <GradientStop Color="#CCC" Offset="1.0"/>
        </GradientStopCollection>
    </GradientBrush.GradientStops>
</LinearGradientBrush>

<LinearGradientBrush x:Key="HorizontalNormalBrush" StartPoint="0,0" EndPoint="1,0">
    <GradientBrush.GradientStops>
        <GradientStopCollection>
            <GradientStop Color="#FFF" Offset="0.0"/>
            <GradientStop Color="#CCC" Offset="1.0"/>
        </GradientStopCollection>
    </GradientBrush.GradientStops>
</LinearGradientBrush>

<LinearGradientBrush x:Key="LightBrush" StartPoint="0,0" EndPoint="0,1">
    <GradientBrush.GradientStops>
        <GradientStopCollection>
            <GradientStop Color="#FFF" Offset="0.0"/>
            <GradientStop Color="#EEE" Offset="1.0"/>
        </GradientStopCollection>
    </GradientBrush.GradientStops>
</LinearGradientBrush>

<LinearGradientBrush x:Key="HorizontalLightBrush" StartPoint="0,0" EndPoint="1,0">
    <GradientBrush.GradientStops>
        <GradientStopCollection>
            <GradientStop Color="#FFF" Offset="0.0"/>
            <GradientStop Color="#EEE" Offset="1.0"/>
        </GradientStopCollection>
    </GradientBrush.GradientStops>
</LinearGradientBrush>

<LinearGradientBrush x:Key="DarkBrush" StartPoint="0,0" EndPoint="0,1">
    <GradientBrush.GradientStops>
        <GradientStopCollection>
            <GradientStop Color="#FFF" Offset="0.0"/>
            <GradientStop Color="#AAA" Offset="1.0"/>
        </GradientStopCollection>
    </GradientBrush.GradientStops>
</LinearGradientBrush>

<LinearGradientBrush x:Key="PressedBrush" StartPoint="0,0" EndPoint="0,1">
    <GradientBrush.GradientStops>
        <GradientStopCollection>
            <GradientStop Color="#BBB" Offset="0.0"/>
            <GradientStop Color="#EEE" Offset="0.1"/>
            <GradientStop Color="#EEE" Offset="0.9"/>
            <GradientStop Color="#FFF" Offset="1.0"/>
        </GradientStopCollection>
    </GradientBrush.GradientStops>
</LinearGradientBrush>

<SolidColorBrush x:Key="DisabledForegroundBrush" Color="#888" />

<SolidColorBrush x:Key="DisabledBackgroundBrush" Color="#EEE" />

<SolidColorBrush x:Key="WindowBackgroundBrush" Color="#FFF" />

<SolidColorBrush x:Key="SelectedBackgroundBrush" Color="#DDD" />

<!-- Border Brushes -->

<LinearGradientBrush x:Key="NormalBorderBrush" StartPoint="0,0" EndPoint="0,1">
    <GradientBrush.GradientStops>
        <GradientStopCollection>
            <GradientStop Color="#CCC" Offset="0.0"/>
            <GradientStop Color="#444" Offset="1.0"/>
        </GradientStopCollection>
    </GradientBrush.GradientStops>
</LinearGradientBrush>

<LinearGradientBrush x:Key="HorizontalNormalBorderBrush" StartPoint="0,0" EndPoint="1,0">
    <GradientBrush.GradientStops>
        <GradientStopCollection>
            <GradientStop Color="#CCC" Offset="0.0"/>
            <GradientStop Color="#444" Offset="1.0"/>
        </GradientStopCollection>
    </GradientBrush.GradientStops>
</LinearGradientBrush>

<LinearGradientBrush x:Key="DefaultedBorderBrush" StartPoint="0,0" EndPoint="0,1">
    <GradientBrush.GradientStops>
        <GradientStopCollection>
            <GradientStop Color="#777" Offset="0.0"/>
            <GradientStop Color="#000" Offset="1.0"/>
        </GradientStopCollection>
    </GradientBrush.GradientStops>
</LinearGradientBrush>

<LinearGradientBrush x:Key="PressedBorderBrush" StartPoint="0,0" EndPoint="0,1">
    <GradientBrush.GradientStops>
        <GradientStopCollection>
            <GradientStop Color="#444" Offset="0.0"/>
            <GradientStop Color="#888" Offset="1.0"/>
        </GradientStopCollection>
    </GradientBrush.GradientStops>
</LinearGradientBrush>

<SolidColorBrush x:Key="DisabledBorderBrush" Color="#AAA" />

<SolidColorBrush x:Key="SolidBorderBrush" Color="#888" />

<SolidColorBrush x:Key="LightBorderBrush" Color="#AAA" />

<!-- Miscellaneous Brushes -->
<SolidColorBrush x:Key="GlyphBrush" Color="#444" />

<SolidColorBrush x:Key="LightColorBrush" Color="#DDD" />

<ControlTemplate x:Key="ComboBoxToggleButton" TargetType="ToggleButton">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition Width="20" />
        </Grid.ColumnDefinitions>
        <Border
            x:Name="Border" 
            Grid.ColumnSpan="2"
            CornerRadius="2"
            Background="{StaticResource NormalBrush}"
            BorderBrush="{StaticResource NormalBorderBrush}"
            BorderThickness="1" />
        <Border 
            Grid.Column="0"
            CornerRadius="2,0,0,2" 
            Margin="1" 
            Background="{StaticResource WindowBackgroundBrush}" 
            BorderBrush="{StaticResource NormalBorderBrush}"
            BorderThickness="0,0,1,0" />
        <Path 
            x:Name="Arrow"
            Grid.Column="1"     
            Fill="{StaticResource GlyphBrush}"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Data="M 0 0 L 4 4 L 8 0 Z"/>
    </Grid>
    <ControlTemplate.Triggers>
        <Trigger Property="ToggleButton.IsMouseOver" Value="true">
            <Setter TargetName="Border" Property="Background" Value="{StaticResource DarkBrush}" />
        </Trigger>
        <Trigger Property="ToggleButton.IsChecked" Value="true">
            <Setter TargetName="Border" Property="Background" Value="{StaticResource PressedBrush}" />
        </Trigger>
        <Trigger Property="IsEnabled" Value="False">
            <Setter TargetName="Border" Property="Background" Value="{StaticResource DisabledBackgroundBrush}" />
            <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource DisabledBorderBrush}" />
            <Setter Property="Foreground" Value="{StaticResource DisabledForegroundBrush}"/>
            <Setter TargetName="Arrow" Property="Fill" Value="{StaticResource DisabledForegroundBrush}" />
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate>

<ControlTemplate x:Key="ComboBoxTextBox" TargetType="TextBox">
    <Border x:Name="PART_ContentHost" Focusable="False" Background="{TemplateBinding Background}" />
</ControlTemplate>

<Style x:Key="{x:Type ComboBox}" TargetType="ComboBox">
    <Setter Property="SnapsToDevicePixels" Value="true"/>
    <Setter Property="OverridesDefaultStyle" Value="true"/>
    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
    <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
    <Setter Property="MinWidth" Value="120"/>
    <Setter Property="MinHeight" Value="20"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ComboBox">
                <Grid>
                    <ToggleButton 
                        Name="ToggleButton" 
                        Template="{StaticResource ComboBoxToggleButton}" 
                        Grid.Column="2" 
                        Focusable="false"
                        IsChecked="{Binding Path=IsDropDownOpen,Mode=TwoWay,RelativeSource={RelativeSource TemplatedParent}}"
                        ClickMode="Press">
                    </ToggleButton>
                    <ContentPresenter
                        Name="ContentSite"
                        IsHitTestVisible="False" 
                        Content="{TemplateBinding SelectionBoxItem}"
                        ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                        ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                        Margin="3,3,23,3"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Left" />
                    <TextBox x:Name="PART_EditableTextBox"
                             Style="{x:Null}" 
                             Template="{StaticResource ComboBoxTextBox}" 
                             HorizontalAlignment="Left" 
                             VerticalAlignment="Center" 
                             Margin="3,3,23,3"
                             Focusable="True" 
                             Background="Transparent"
                             Visibility="Hidden"
                             IsReadOnly="{TemplateBinding IsReadOnly}"/>
                    <Popup 
                        Name="Popup"
                        Placement="Bottom"
                        IsOpen="{TemplateBinding IsDropDownOpen}"
                        AllowsTransparency="True" 
                        Focusable="False"
                        PopupAnimation="Slide">
                        <Grid 
                            Name="DropDown"
                            SnapsToDevicePixels="True"                
                            MinWidth="{TemplateBinding ActualWidth}"
                            MaxHeight="{TemplateBinding MaxDropDownHeight}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="30" />
                                <RowDefinition Height="{TemplateBinding MaxDropDownHeight}" />
                            </Grid.RowDefinitions>

                            <Border 
                                x:Name="DropDownBorder"
                                Background="{StaticResource WindowBackgroundBrush}"
                                BorderThickness="1"
                                BorderBrush="{StaticResource SolidBorderBrush}"
                                Grid.RowSpan="2"/>

                            <TextBox Margin="2" VerticalAlignment="Center" />

                            <ScrollViewer Grid.Row="1" Margin="4,6,4,6" SnapsToDevicePixels="True">
                                <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained" />
                            </ScrollViewer>
                        </Grid>
                    </Popup>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="HasItems" Value="false">
                        <Setter TargetName="DropDownBorder" Property="MinHeight" Value="95"/>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter Property="Foreground" Value="{StaticResource DisabledForegroundBrush}"/>
                    </Trigger>
                    <Trigger Property="IsGrouping" Value="true">
                        <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                    </Trigger>
                    <Trigger SourceName="Popup" Property="Popup.AllowsTransparency" Value="true">
                        <Setter TargetName="DropDownBorder" Property="CornerRadius" Value="4"/>
                        <Setter TargetName="DropDownBorder" Property="Margin" Value="0,2,0,0"/>
                    </Trigger>
                    <Trigger Property="IsEditable"
                             Value="true">
                        <Setter Property="IsTabStop" Value="false"/>
                        <Setter TargetName="PART_EditableTextBox" Property="Visibility"    Value="Visible"/>
                        <Setter TargetName="ContentSite" Property="Visibility" Value="Hidden"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:54:01.603

我想你会有几个问题。

1.  如果您依靠一种样式来显示文本框，那么您将把该文本框的逻辑放在哪里？您需要扩展组合框以添加该逻辑或进行某种复合控件。

2.  第二个问题是组合框在失去焦点时会关闭。所以，你必须编写一些逻辑来改变这种行为。

这不是不可能的，我只是认为你需要做的不仅仅是创造一种风格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T19:21:15.547

是的，它有很多代码，但这是您应该开始考虑使用资源字典的时候。我确实同意其他发帖者的观点，即这种控制可能会让您头疼，因为如果用户不小心并失去焦点，组合框会收缩。

```
 <Style x:Key="MyCombo" TargetType="{x:Type ComboBox}">
        <Setter Property="Template">
            <Setter.Value>
            <ControlTemplate TargetType="{x:Type ComboBox}">
                <Grid x:Name="MainGrid" SnapsToDevicePixels="true">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition MinWidth="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}" Width="0"/>
                    </Grid.ColumnDefinitions>
                    <Popup x:Name="PART_Popup" AllowsTransparency="true" Grid.ColumnSpan="2" IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}" Margin="1" PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}" Placement="Bottom">
                        <Microsoft_Windows_Themes:SystemDropShadowChrome x:Name="Shdw" Color="Transparent" MaxHeight="{TemplateBinding MaxDropDownHeight}" MinWidth="{Binding ActualWidth, ElementName=MainGrid}">
                            <Border x:Name="DropDownBorder" BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}" BorderThickness="1" Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}">
                                <ScrollViewer x:Name="DropDownScrollViewer">
                                    <Grid RenderOptions.ClearTypeHint="Enabled">
                                        <StackPanel>
                                            <TextBox>blah blah</TextBox>

                                            <Canvas HorizontalAlignment="Left" Height="0" VerticalAlignment="Top" Width="0">
                                                <Rectangle x:Name="OpaqueRect" Fill="{Binding Background, ElementName=DropDownBorder}" Height="{Binding ActualHeight, ElementName=DropDownBorder}" Width="{Binding ActualWidth, ElementName=DropDownBorder}"/>
                                            </Canvas>
                                            <ItemsPresenter x:Name="ItemsPresenter" KeyboardNavigation.DirectionalNavigation="Contained" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                        </StackPanel>
                                    </Grid>
                                </ScrollViewer>
                            </Border>
                        </Microsoft_Windows_Themes:SystemDropShadowChrome>
                    </Popup>
                    <ToggleButton BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}" Grid.ColumnSpan="2" IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" Style="{StaticResource ComboBoxReadonlyToggleButton}"/>
                    <ContentPresenter ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}" Content="{TemplateBinding SelectionBoxItem}" ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" IsHitTestVisible="false" Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="HasDropShadow" SourceName="PART_Popup" Value="true">
                        <Setter Property="Margin" TargetName="Shdw" Value="0,0,5,5"/>
                        <Setter Property="Color" TargetName="Shdw" Value="#71000000"/>
                    </Trigger>
                    <Trigger Property="HasItems" Value="false">
                        <Setter Property="Height" TargetName="DropDownBorder" Value="95"/>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        <Setter Property="Background" Value="#FFF4F4F4"/>
                    </Trigger>
                    <Trigger Property="IsGrouping" Value="true">
                        <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                    </Trigger>
                    <Trigger Property="ScrollViewer.CanContentScroll" SourceName="DropDownScrollViewer" Value="false">
                        <Setter Property="Canvas.Top" TargetName="OpaqueRect" Value="{Binding VerticalOffset, ElementName=DropDownScrollViewer}"/>
                        <Setter Property="Canvas.Left" TargetName="OpaqueRect" Value="{Binding HorizontalOffset, ElementName=DropDownScrollViewer}"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

# c# - 检查文件名并在文件路径中使用它？

> ID：15096508
> 
> 赞同：1
> 
> 时间：2013-02-26T18:25:31.783
> 
> 标签：c#, asp.net, file

CustomerName 是从数据库值填充的字符串。

我想检查目录中是否存在具有该特定名称的文件，如果存在，则将其用作文件路径。例如：

```
CustomerName = "James Doe" 
```

假设它存在于`images`文件夹中，我想将它存储在一个变量中：

```
string filepath = HttpContext.Current.Server.MapPath("~\\images\\James Doe.png); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:31:01.550

您可以使用 File.Exists 方法来检查它。

```
string filePath = httpContext.Current.Server.MapPath(string.Format(@"~\images\{0}.png", CustomerName);
if (File.Exists(filePath)
{
    do.something()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:13:52.990

如果您希望能够使用通配符（例如，如果文件扩展名未知），则需要使用`System.IO.Directory.GetFiles`.

```
string path = HttpContext.Current.Server.MapPath("~\\images");
string filePattern = String.Format("{0}.*", CustomerName);
string[] files = System.IO.Directory.GetFiles(path, filePattern);
if (files.Length > 0)
{
    //here you can check which file(s) was returned and the corresponding extension.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:35:43.513

尝试这个：

```
string filepath = Server.MapPath("~\\images\\" + CustomerName +".png");
if (File.Exists(filePath))
{
//do sth
} 
```

# c++ - 未使用的函数返回值会怎样？

> ID：15096509
> 
> 赞同：7
> 
> 时间：2013-02-26T18:25:32.563
> 
> 标签：c++, windows, function, return

如果我有一个程序：

```
#include <iostream>

using namespace std;

int TestIntReturn(int &x, int &y)
{
    x = 1000;
    y = 1000;
    return x+y;
}

int main()
{
    int a = 1;
    int b = 2;
    cout << a << " " << b << endl;
    TestIntReturn(a,b);
    cout << a << " " << b << endl;
} 
```

的返回值会发生什么，`TestInReturn(a,b)`因为它未使用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T18:33:06.293

由于您在谈论 Windows，我们将假设 x86 处理器。

在这种情况下，返回值通常在寄存器 EAX 中。由于您没有使用它，因此该值将被忽略，并在下一次碰巧将某些内容写入 EAX 的代码执行时被覆盖。

在相当多的情况下，如果一个函数没有其他副作用（只接受输入并返回一些结果），编译器将能够找出您何时不使用结果，并且根本不调用该函数。

在您的情况下，该函数有一些副作用，因此它必须执行这些副作用，但可能会省略代码来计算总和。即使它没有被忽略，它也可能会发现添加的实际上是两个常量，所以它不会在任何情况下在运行时对结果进行实际计算，只是做一些类似`mov EAX, 2000`产生返回的事情价值。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-26T18:30:02.857

它被*丢弃*；该表达式`TestInReturn(a,b)`是*丢弃值表达式*。丢弃`int`a 没有任何效果，但丢弃 a `volatile int`（或任何其他具有 volatile 限定的类型）可能具有从内存读取的效果。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-26T18:28:56.900

返回值只是被丢弃。如果没有可观察到的副作用（在您的示例中不是这种情况），优化器可能会根据具体情况决定优化整个函数调用。

因此，在从 中返回时`TestIntReturn`，函数会将返回值压入堆栈，然后调用者将相应地调整堆栈帧，但不会将返回值从堆栈复制到任何变量中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T18:54:14.440

大家都答对了——这种情况下的返回值被简单地丢弃了，在这个具体的例子中，你可以忽略它。

*但是*，如果返回值是指向函数内部分配的内存的指针，而您忽略它，则会发生[内存泄漏。](http://en.wikipedia.org/wiki/Memory_leak)

所以一些函数值你不能忽略，但在这种情况下——你可以。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T19:34:14.770

在原始类型的情况下，它不会发生任何事情。它只是被忽略了。在类类型的情况下，返回的对象将被破坏，而不会发生任何其他事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T18:29:19.803

什么都没有 - 它进入以太，并且不被存储/使用。返回值本身是右值或临时值；我相信编译器甚至会优化临时创建，因为它实际上并没有被使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-26T18:30:25.997

返回值存储在堆栈中，并在函数返回时弹出。由于调用者没有将它分配给变量，因此它只是在弹出堆栈时被丢弃。

# jquery - jQuery：使用 .text() 显示数组值

> ID：15096510
> 
> 赞同：0
> 
> 时间：2013-02-26T18:25:40.690
> 
> 标签：jquery

我正在尝试根据使用 jQuery 的单选按钮选择来更改一些文本，但我似乎无法让它工作。这是我的代码：

**HTML**

```
<input type="radio" name="finish_id" id="1" value="1" checked />
<label for="1" id="veteran"></label>

<input type="radio" name="finish_id" id="2" value="2" />
<label for="2" id="elite"></label>

<input type="radio" name="finish_id" id="3" value="3" />
<label for="3" id="legendary"></label> 
```

`<span id="finish_name"></span>`

**JS**

```
// Set variables
    var finish[] = "something";
    var finish[] = "something else";
    var finish[] = "another thing";

// Change finish name based on radio selection
    $(document).ready(function() {
        $("input[name='finish_id']").change(function() {
            $('#finish_name').text( finish[$(this).val()] );
        }).change();
    }); 
```

我可能与数组编号相差甚远`$(this).val()`，我不知道您是否可以那样选择它，但即使我将其设置为`$('#finish_name').text( finish[1] );`我也会收到`unexpected token [`错误消息。如何将数组值用于 .text()？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:30:11.633

那不是你在javascript中声明数组的方式

尝试

```
var finish = ["something",
              "something else",
              "another thing"];   

// Change finish name based on radio selection
$(document).ready(function() {
    $("input[name='finish_id']").change(function() {
        $('#finish_name').text( finish[$(this).val()] );
    }).change();
}); 
```

或者让它更具可扩展性/html5-esque....

```
<input type="radio" name="finish_id" value="1" data-message='something' onchange="javasript:$('#finish_name').text( finish[$(this).val()] )">
<input type="radio" name="finish_id" value="2" data-message='something else' onchange="javasript:$('#finish_name').text( finish[$(this).val()] )">
<input type="radio" name="finish_id" value="3" data-message='another thing' onchange="javasript:$('#finish_name').text( finish[$(this).val()] )">
<span id="finish_name"></span> 
```

[http://jsfiddle.net/erPQA/3/](http://jsfiddle.net/erPQA/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:32:45.607

你有几个问题：

1.  您不会在 JavaScript 中声明这样的数组。声明一个名为 的变量`finish`。[在MDN 的文章](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)中阅读有关数组的更多信息。
2.  你有一个错误。在 JavaScript 中，数组索引是从 0 开始的，这意味着第一个索引是 0。您可以通过从更改事件中的单选按钮值中减去一个来解决此问题。
3.  您手动触发更改事件的方式导致事件为最后一个单选按钮触发。您可以使用该[`.first`](http://api.jquery.com/first)方法选择第一个单选按钮并*仅*在该元素上触发更改事件。

    **更新：**更好的是，您可以使用并且仅在[选中](http://api.jquery.com/checked-selector)的单选按钮[`.filter`](http://api.jquery.com/filter)上调用更改（更新如下）

* * *

```
// Set variables
var finish = ['something', 'something else', 'another thing'];

// Change finish name based on radio selection
$(document).ready(function () {
    $("input[name='finish_id']").change(function () {
        $('#finish_name').text(finish[$(this).val()-1]);
    }).filter(":checked").change();
}); 
```

**示例：http:** [//jsfiddle.net/YnBa3/1/](http://jsfiddle.net/YnBa3/1/)

# php - JavaScript 中的加密和 PHP 中的解密

> ID：15096511
> 
> 赞同：2
> 
> 时间：2013-02-26T18:25:48.413
> 
> 标签：php, javascript, encryption, cryptojs

我想在javascript中加密。在 PHP 中解密。
JavaScript AES 加密库是 CryptoJS。
PHP AES 加密库是 mcrypt。

我得到了不正确的结果。
得到类似'I4��L$�"�"E̹_��zHe����V���:�'的结果。

*   加密 (JavaScript)

> `encrypt = CryptoJS.AES.encrypt('HelloWorld', 'test', {mode: CryptoJS.mode.CBC, padding: CryptoJS.pad.ZeroPadding });`

*   解密 (PHP)

> $ivSize = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_CBC);
> $iv = mcrypt_create_iv($ivSize, MCRYPT_RAND);
> mcrypt_decrypt(MCRYPT_RIJNDAEL_256, 'test', $encrypt, MCRYPT_MODE_CBC, $iv);

哪里错了？
谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:22:24.250

如上面评论中所述，SSL 是您真正保护任何数据的唯一方法，因为

1.  如果没有 SSL，任何人都可以更改或嗅探您的 Javascript 或网页，因此无法信任它。
2.  Javascript 确实不能很好地允许基于非字符的数据。（即散列、编码视频等），因为所有数据通常在内部静默转换为 utf-16 或 utf-8。

最后一点很可能是导致您的问题的原因。每一端的 AES 库都像可以访问二进制数据一样进行加密，但是，Javascript 告诉传输加密数据在特定字符集中。您可能想尝试 utf8decode 或使用 iconv() 将其转换为真正的二进制数据。

# php - HighCharts：局部变量在“数据：”中不起作用

> ID：15096519
> 
> 赞同：1
> 
> 时间：2013-02-26T18:26:02.650
> 
> 标签：php, javascript, highcharts

当我将 javascript 内联到我的 php 文件中时，我有一个 highcharts 温度计工作。但是，我想将 highcharts 代码放在“包含”的 js 文件中。之前，当我用 php 文件编写 javascript 内联代码时，它看起来像这样：

```
// html and php above
// this inline code below works
<script>
  $(document).ready(function(){
    // here i simply accessed a php variable from 
    var $temperature_F = <?php echo round((($temp["Temperature"] * 9) / 5) + 32, 1); ?>;
    var chart1 = new Highcharts.Chart({

      // code initializing everything else in the highchart

      series: [{
          data: [{
            id: 'temperature',
            y: $temperature_F, // value taken from php variable
            tooltip: {
              valueSuffix: ' \xB0F'
            }
          }]
      }]
    });
  })
</script>
// html and php below 
```

现在，我所做的只是将这段代码放入一个 .js 文件中并“包含”它。我现在只需从 .js 文件中定义的 php 文件调用 Print 函数，并将我需要的 php 变量传递给它。像这样：

```
<script type="text/javascript">
  PrintTemperatureChart(1, '<?php echo $temperatureToDisplay; ?>', '<?php echo $dewPointToDisplay; ?>', '<?php echo $relativeHumidityToDisplay; ?>');
</script> 
```

在这个函数中，我能够“警告”出我传入的预期 php 变量，但是，当我尝试将“数据：”设置为这些变量之一时，它会破坏图表。当我用虚拟硬编码值替换变量时，它可以工作。所以我知道其他一切都设置正确。这是 .js 文件中的函数：

```
function PrintTemperatureChart(unitsMode, temperature, dewPoint, relativeHumidity){

alert(unitsMode + ", " + temperature + ", " + dewPoint + ", " + relativeHumidity);

$(function () {
alert("The passed temperature = " + temperature);
var $theTemp = temperature;

var chart1 = new Highcharts.Chart({
    chart: {
    renderTo: 'Temperature_Chart',
    type: 'gauge',
    margin: 0
    },
    title: {
    text: 'Temperature'
    },

    pane: {
    startAngle: -150,
    endAngle: 150,
    background: [{
        backgroundColor: {
        linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
        stops: [
            [0, '#FFF'],
            [1, '#333']
        ]
        },
        borderWidth: 0,
        outerRadius: '109%'
    }, {
        backgroundColor: {
        linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
        stops: [
            [0, '#333'],
            [1, '#FFF']
        ]
        },
        borderWidth: 1,
        outerRadius: '107%'
    }, {
        // default background
    }, {
        backgroundColor: '#DDD',
        borderWidth: 0,
        outerRadius: '105%',
        innerRadius: '103%'
    }]
    },

    yAxis: {
    title: {
        text: '\xB0F'
    },

    min: 0,
    max: 120,

    minorTickInterval: 1,
    minorTickWidth: 1,
    minorTickLength: 5,
    minorTickPosition: 'inside',
    minorGridLineWidth: 0,
    minorTickColor: 'black',

    tickInterval: 10,
    tickWidth: 2,
    tickPosition: 'inside',
    tickLength: 10,
    tickColor: 'black',

    },

    series: [{
    name: 'Temperature',
    data: [$theTemp], // this doesn't work
                              // this is the js var set to the passed in temperature
                              // I've also just tried using the param directly
                              // only a hard coded value will work
                              // i.e. data: [56],
    tooltip: {
      valueSuffix: ' \xB0F'
    }
    }]
});
}); 
```

}

我只需要在我的图表中使用这些作为数据传入的变量。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:20:24.170

通过在 PHP 代码周围放置单引号，如下所示：

```
PrintTemperatureChart(1, '<?php echo $temperatureToDisplay; ?>'); 
```

这些变量作为字符串传递，这与 HighCharts 中“数据”字段期望的整数类型不兼容。解决方案：

```
PrintTemperatureChart(1, <?php echo $temperatureToDisplay; ?>); 
```

# netbeans - 有没有办法使 NetBeans 输出窗格不透明？

> ID：15096520
> 
> 赞同：0
> 
> 时间：2013-02-26T18:26:03.017
> 
> 标签：netbeans, preferences

有没有办法使 NetBeans 输出窗格不透明？我将输出窗格放在单独的监视器上，但是当它失去焦点时它变得透明，我无法阅读它。我一直在寻找配置设置，但我没有找到它。有这个设置吗？我怎样才能让它不变得透明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:31:55.373

在 Netbeans 7.2 上，尝试单击`Tools -> Options -> Miscellaneous Tab -> Windows sub-tab`，然后取消选中该 `Transparent floating windows`框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T15:50:41.043

在 netbeans 8.0 中：

*   `Options`
*   `Appearance`
*   `Windows`
*   取消勾选`Transparent floating windows`

# perl - perl 中的异常处理使用 Exception::Class

> ID：15096528
> 
> 赞同：0
> 
> 时间：2013-02-26T18:26:22.093
> 
> 标签：perl, perl-module

我[`Exception::Class`](http://search.cpan.org/perldoc?Exception%3a%3aClass)用于处理异常

在上面的链接中，概要中显示，为了检查发生了哪个异常，我们需要将 与`$_->isa`它的值进行比较。因此，如果我有 4 个不同类型的异常，那么我是否需要为每个异常创建一个单独的基类并将其作为 isa 属性提及。如果我没有提到异常类的 isa 怎么办？我将如何确定它是哪个异常？捕获特定异常的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:07:50.173

不，你没有，你只是测试 isa（你的异常名称）。

如果您想将异常分组并能够测试任何类别，则只能使用 isa。只需创建没有 isa 属性的 4 种不同类型，您就可以单独测试它们。

# jquery - 从 jQuery Validation 插件定位消息

> ID：15096529
> 
> 赞同：2
> 
> 时间：2013-02-26T18:26:25.057
> 
> 标签：jquery, html, jquery-validate, positioning

我正在为前端可见的 wordpress 插件创建一个表单。使用 JQuery 验证方法，我在将每个错误准确定位在每个字段下时遇到问题。

所以这是我的脚本：

```
function validate_init() { ?>
<script type="text/javascript">
    jQuery(document).ready(function($) {
        $('#form_register').validate({
            rules: {
                ragsoc: {
                    required: true,
                    minlength: 2
                },

                piva: {
                    required: true,
                    digits: true,
                },

                gruppo: {
                    required: true,
                },
            },

            messages: {
                ragsoc: "Inserire la ragione sociale.",
                piva: "Solo numeri accettati.",
                gruppo: "inserire un valore.",
            },
            errorElement: "div",
            errorPlacement: function(error, element) {
                error.insertAfter(element);
            },
        });
    });
</script>
    <?php }
    add_action('wp_footer', 'validate_init', 999); 
```

这是我的表格：

```
<?php echo '<form id="form_register" method="post" action="'.$pluginfolder.'/submit.php">'; ?>
  <table width="100%" border="0" cellspacing="0" cellpadding="5">
    <tr>
      <td colspan="3"><label for="ragsoc">Ragione sociale *</label>
      <input type="text" name="ragsoc" id="long" /></td>
    </tr>
    <tr>
      <td><label for="piva">Partita Iva *</label>
      <input type="text" name="piva" id="tris" /></td>
      <td><label for="codfisc">Codice Fiscale</label>
      <input type="text" name="codfisc" id="tris" /></td>
      <td><label for="gruppo">Gruppo</label>
      <input type="text" name="gruppo" id="tris" /></td>
    </tr>
    <tr>
        <td>
            <label for="codice">Codice</label>
            <input type="text" name="codice" id="tris" />
        </td>
        <td>
            <label for="insegna">Insegna *</label>
            <select id="tris" name="insegna">
                <option value=""><em>Scegli...</em></option>
                <option value="option_1">option_1</option>
                <option value="option_2">option_2</option>
            </select>
        </td>
        <td>
            <label for="rapporto">Rapporto *</label>
            <select id="tris" name="rapporto">
                <option value=""><em>Scegli...</em></option>
                <option value="option_1">option_1</option>
                <option value="option_2">option_2</option>
                <option value="option_3">option_3</option>                
            </select>
        </td>
    </tr>
    <tr>
      <td colspan="2"><input type="submit" name="button" id="button" value="Invia" />
      <input type="reset" name="button2" id="button2" value="Cancella" />
    </tr>
  </table>
  </form> 
```

最后这是我的CSS：

```
div.error{
color: #f33;
padding: 0;
margin: 2px 0 0 0;
font-size: 0.7em;
padding-left: 18px;
background-image: url('error.png');
background-position: 0 0;
background-repeat: no-repeat; } 
```

一切正常，但错误消息的位置对于错误重叠的三列字段是错误的，如下图所示：

![http://i.stack.imgur.com/HzshN.jpg](../Images/2b13cbd2c7bf9a811b03534142ccb00e.png)

我怎样才能获得这种效果（用photoshop修改）：

![http://i.stack.imgur.com/Q3MiU.jpg](../Images/ae6e4ce14e3c592e36832c837280ea1f.png)

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T22:25:23.610

您的错误放置代码没有任何问题。您的大部分问题是由无效的 HTML 和缺少规则引起的。（*我不会将 a`table`用于`form`布局......有更好、更现代的方式来做这样的布局。*）

* * *

**根本原因：**

**1)** 您重复`id="tris"`了多个无效 HTML 元素并破坏了代码。带有重复`id`'s 的元素将被忽略。改为使用`class`。

**2)** 您未能为这四个附加字段定义任何规则。因此，当然，任何地方都不会显示任何错误。

* * *

**修复的好主意：**

**3）** 删除所有尾随逗号。尽管这只会破坏旧版本 Internet Explorer 中的代码，但留下逗号是一种草率的编码习惯。

**4）** 您在`</td>`最后`<tr></tr>`一个`table`.

**5)**如果是其中唯一的代码，则 不需要指定自定义`errorPlacement`回调函数。`error.insertAfter(element)`由于这只是插件的默认代码，因此可以`errorPlacement`从插件选项中删除。

* * *

**工作演示：http: [//jsfiddle.net/9bRXd/](http://jsfiddle.net/9bRXd/)**

```
jQuery(document).ready(function ($) {

    $('#form_register').validate({
        rules: {
            ragsoc: {
                required: true,
                minlength: 2
            },
            piva: {
                required: true,
                digits: true
            },
            codfisc: {
                required: true
            },
            gruppo: {
                required: true
            },
            insegna: {
                required: true
            },
            rapporto: {
                required: true
            }
        },
        errorElement: "div",
        messages: {
            ragsoc: "Inserire la ragione sociale.",
            piva: "Solo numeri accettati.",
            gruppo: "inserire un valore."
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:07:39.223

如果您在 jsFiddle 上发布一个示例，但只需查看我建议的代码，就会更容易弄清楚。

```
errorPlacement: function(error, element) 
                {
                  error.insertAfter(element);

                  // Use jQuery UI's position function to get placement correct
                  error.position ( {
                                     my: 'left top',
                                     at: 'left bottom',
                                     of: element
                                   } );
                } 
```

这假设您有 jQuery UI 以及 jQuery Validation 插件。您可能必须使用错误的 CSS 才能使其看起来完全符合您的要求。

这是位置的api：http: [//api.jqueryui.com/position/](http://api.jqueryui.com/position/)

# .net - 部分和显示

> ID：15096530
> 
> 赞同：1
> 
> 时间：2013-02-26T18:26:30.233
> 
> 标签：.net, asp.net-mvc, templates

**首先我的模型：**

```
public class Order
{
  public DateTime Date {get;set;}
} 
```

**我的观点：**

```
@model Order
@Html.Partial("Display", Model.Date) 
```

**显示部分：**

```
@Html.LabelFor(x => x): <strong>@Html.DisplayFor(x => x)</strong> 
```

标签未呈现。DisplayFor 可以很好地呈现日期。也可能相关，如果我向 Order.Date 添加一个属性，`[DisplayName("Order Date")]`它不会被兑现。有什么我做错了吗？我只是想将 html 约定应用于我的*所有*模型属性以进行显示。我要解决这个问题了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:37:39.403

这是因为您的 partial 本质上是强类型的`DateTime`，而不是`Order`。这仍然有效，`DisplayFor`因为 a`DateTime`只会调用`ToString()`自身。但是，它没有名字或固有的标签，所以`LabelFor`它不会为你做任何事情。

您应该这样做的方式实际上是将`Order`实例作为`Model`. 然后：

```
@Html.LabelFor(m => m.Date): <strong>@Html.DisplayFor(m => m.Date)</strong> 
```

会给你你想要的。

# jquery - 在第二次点击时禁用所有点击两秒钟？

> ID：15096533
> 
> 赞同：1
> 
> 时间：2013-02-26T18:26:37.350
> 
> 标签：jquery

我有一个 div 网格，其中类是“框”，并且希望用户能够单击其中两个，然后必须等待两秒钟才能单击另一个。

这是我所得到的...

```
var clickNumber = 0;

$(".box").click(function () {
    $(this).removeClass('red').addClass('blue');
    switch (clickNumber){
        case 0:
            clickNumber++;
            break;
        case 1:
            setTimeout(function() {
                //disable click for class "box"
        }, 2000);
            clickNumber = 0;
            break;
    }
}); 
```

一个更完整的例子......

[http://jsfiddle.net/wZP6J/](http://jsfiddle.net/wZP6J/)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:32:58.847

使用变量来跟踪是否应允许点击，如下所示：

```
var clickNumber = 0,
    clicksAllowed = true;

$(".box").click(function () {
    if(clicksAllowed){
        $(this).removeClass('red').addClass('blue');
        switch (clickNumber){
            case 0:
                clickNumber++;
                break;
            case 1:
                clicksAllowed = false;
                setTimeout(function() {
                    //disable click for class "box"
                    clicksAllowed = true;
                }, 2000);
                clickNumber = 0;
                break;
        }
    }
}); 
```

[这是更新的小提琴](http://jsfiddle.net/4zfta/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T18:35:00.927

[**看到这个小提琴**](http://jsfiddle.net/wZP6J/3/)。

只需存储 unix 纪元时间戳，然后将其与最后一个进行比较。如果已经超过 2 秒，那么做任何你需要做的事情。无需设置超时。

```
;(function() {
    var clickNumber = 0;
    var lastClickTime = 0;

    $(".box").click(function () {
        var seconds = new Date().getTime() / 1000;

        if ((seconds - lastClickTime) > 2) {
            $(this).removeClass('red').addClass('blue');
            clickNumber++;
            lastClickTime = seconds;
        }
    });
})(); 
```

另外，请注意我使用了一个闭包将我的相关变量保持在全局范围之外，以防止它们被污染。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:50:01.147

在这里！好吧，我根据你给我的代码为你找到了一个解决方案（这样你就不需要改变太多）。

看看它：http: [//jsfiddle.net/NAGKk/](http://jsfiddle.net/NAGKk/)

```
var clickNumber = 0;
$(".box").click(function () {
if(clickNumber<2)
    $(this).removeClass('red').addClass('blue');
    switch (clickNumber){
        case 0:
            clickNumber++;
            break;
        case 1:
            clickNumber++;
            setTimeout(function() {
                clickNumber = 0;
            }, 2000);
            break;
    }
}); 
```

setTimeout 的主要思想是，一段时间后它会触发您放入的内容（您已经知道这一点），但您必须记住的是 javascript 会继续运行（否则某些网站会因超时而冻结）。此解决方案仅使用您的 var clickNumber 并在该人单击两次以上时阻止单击效果。setTimeout 将在 2 秒后触发 clickNumber 上的重置。

希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T18:40:22.107

试试这个：[**现场演示**](http://jsfiddle.net/JQRMS/)

```
var clickNumber = 0;

function disableClick() {
    // Disable click event for now
    $(".box").unbind('click');

    // Turn on click after timeout
    setTimeout(enableClick, 2000);
}

function enableClick() {
    $(".box").click(function () {
        $(this).removeClass('red').addClass('blue');
        switch (clickNumber) {
            case 0:
                clickNumber++;
                break;
            case 1:
                disableClick();
                clickNumber = 0;
                break;
        }
    });
}

enableClick(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T18:45:59.550

即使您不需要 clickNumber Count

```
var f1 = function(){
  $(this).removeClass('red').addClass('blue');
   $(".box").unbind('click');
            setTimeout(function() {
                 $(".box").click(f1);
            }, 2000);
}
$(".box").click(f1); 
```

[http://jsfiddle.net/wZP6J/6/](http://jsfiddle.net/wZP6J/6/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T18:42:54.953

`**[LIVE DEMO](http://jsfiddle.net/wZP6J/5/)**`

```
function clicking(){
     $(this).removeClass('red').addClass('blue');
     $(".box").off('click', clicking);
     setTimeout(function(){
        $(".box").on('click',clicking);
     },2000);
}

$(".box").on('click', clicking); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-26T18:37:20.927

保留对“框”集合的引用并在 switch 语句中启用/禁用它们：

```
var clickNumber = 0;
var boxes = $('.box');

boxes.click(function () {

    if (clickNumber == 1)
    {
        return; // just in case ;)
    }

    $(this).removeClass('red').addClass('blue');

    switch (clickNumber){
        case 0:
            clickNumber++;
            break;
        case 1:
            // disable boxes
            boxes.prop('disabled', 'disabled');

            setTimeout(function() {
                //enabled boxes after 2 seconds
                boxes.prop('disabled', '');
                clickNumber = 0;
            }, 2000);

            break;
    }
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-26T18:37:48.597

将您的代码更新为[工作 JsFiddle](http://jsfiddle.net/wZP6J/1/)：

```
var clickNumber = 0;    
$(".box").click(function () {    
    switch (clickNumber) {
        case 0:
            $(this).removeClass('red').addClass('blue');
            clickNumber++;
            break;
        case 1:
            setTimeout(function () {
                clickNumber = 0;
            }, 2000);
            clickNumber++;
            break;

    }
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-26T18:37:59.083

给你...

```
var clickNumber = 0;

$(".box").on('click', boxClick);

function boxClick() {
    clickNumber += 1;
    $(this).removeClass('red').addClass('blue');
    if(clickNumber == 2) {
        $(".box").off();
        setTimeout(function() {
            $('.box').on('click', boxClick);
            clickNumber = 0;
        },2000);
    }
} 
```

小提琴：http: [//jsfiddle.net/wZP6J/2/](http://jsfiddle.net/wZP6J/2/)

# apache - varnish 和 apache 的问题（试图改进 OpenCart）

> ID：15096547
> 
> 赞同：0
> 
> 时间：2013-02-26T18:27:26.820
> 
> 标签：apache, caching, varnish

我正在尝试通过警告来提升我的网上商店。设置清漆端口 80，后端是 127.0.0.1 apache2。

Apache Benchmark 给出了令人敬畏的结果，比如 1-2 request/sec ！

在第一个显示的文件上；header.tpl 我有：

```
<?php
  cache_control( "public, s-max-age=6000");
  expires( to_gmt( time() + 6000 ) );
?> 
```

下面是响应头：

```
HTTP/1.1 200 OK
Content-Length: 151613
Expires: Tue, 26 Feb 2013 20:04:07
Cache-Control: public, s-max-age=6000
Pragma: no-cache
Set-Cookie: PHPSESSID=i9h5ldj8k4fking69d03jr5244; path=/, language=en; expires=Thu, 28-Mar-2013 18:24:06 GMT; path=/; domain=www.domain.com, currency=CHF; expires=Thu, 28-Mar-2013 18:24:06 GMT; path=/; domain=www.domain.com
Content-Type: text/html; charset=utf-8
Accept-Ranges: bytes
Date: Tue, 26 Feb 2013 18:24:07 GMT
X-Varnish: 186646239
Age: 0
Via: 1.1 varnish
Connection: close
X-Cache: MISS 
```

必须遗漏一些明显的东西，但对我来说清漆只是不缓存；我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:38:08.453

PHP 很可能已[`session.cache-limiter`](http://www.php.net/manual/en/session.configuration.php#ini.session.cache-limiter)设置为`nocache`（默认）。

这将向`Pragma: no-cache`Varnish 发送一个（据我所知，Expire 标头设置为当前时间），从而禁用缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-18T15:52:05.390

Varnish 默认会忽略 « Pragma : no-cache »，除非它是处理指令的指令（[https://varnish-cache.org/docs/4.0/users-guide/increasing-your-hitrate.html](https://varnish-cache.org/docs/4.0/users-guide/increasing-your-hitrate.html)）。

您的缓存控制似乎配置正确，应该缓存 6000 秒。接下来需要考虑的是 cookie。查看您的标题，您有一个 PHP 会话 Cookie：

```
Set-Cookie: PHPSESSID=i9h5ldj8k4fking69d03jr5244; 
```

Varnish 不会缓存 cookie，除非您在 vcl 文件中将其删除。前任 ：

```
sub vcl_recv {
  set req.http.Cookie = regsuball(req.http.Cookie, "PHPSESSID =[^;]+(; )?", "");
} 
```

# c# - 单击按钮时插入 Access 数据库（没有错误但不起作用）

> ID：15096548
> 
> 赞同：1
> 
> 时间：2013-02-26T18:27:28.740
> 
> 标签：c#, asp.net, ms-access

我正在尝试将用户输入的数据从 Web 表单插入到 Access 数据库中。我使用以下字段（FName、LName、State、Address、Zip、Telephone）创建了 Access 数据库，并将其放在我的代码文件中名为 App_Data\Registrationinfo.mbd 的文件夹中。

当用户访问该网站并注册今年夏天即将举行的会议时，他们会在文本框中看到提到的字段，一旦他们单击“继续”，就会出现一个带有标签的跨页面发布，该标签向用户验证信息是否正确。然后点击网络表单上的“提交”按钮，他们输入的信息将被放入 Access 数据库。任何帮助，将不胜感激。

我完全收到任何错误，并且当他们单击提交时正确的页面重定向正在工作，但信息没有被放入数据库中。

注意：这是用 C# 编写的，带有母版页。Access 中的表称为 UserInfo，只有字段 FName 和 LName 以保持简单。

> ```
> protected void submitButton_Click(object sender, EventArgs e)
>     {
>         string constr = @"Provider=Microsoft.Jet.OLEDB.4.0; Data Source=U:\App_Data\Registrationinfo.mbd";
>         string cmdstr = "insert into UserInfo(FName, LName)values(?, ?)";
> 
>         OleDbConnection con = new OleDbConnection(constr);
>         OleDbCommand com = new OleDbCommand(cmdstr, con);
>         con.Open();
>         com.Parameters.AddWithValue("?", labelFirstName.Text);
>         com.Parameters.AddWithValue("?", labelLastName.Text);
>         com.ExecuteNonQuery();
>         con.Close();
>     } 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:36:42.980

我想你想要

```
protected void submitButton_Click(object sender, EventArgs e)
    {
        string constr = @"Provider=Microsoft.Jet.OLEDB.4.0; Data Source=U:\App_Data\Registrationinfo.mbd";
        string cmdstr = "insert into UserInfo(FName, LName) values(@First, @Last)";

        OleDbConnection con = new OleDbConnection(constr);
        OleDbCommand com = new OleDbCommand(cmdstr, con);
        con.Open();
        com.Parameters.AddWithValue("@First", labelFirstName.Text);
        com.Parameters.AddWithValue("@Last", labelLastName.Text);
        com.ExecuteNonQuery();
        con.Close();
    } 
```

在此行命名您的参数：

```
string cmdstr = "insert into UserInfo(FName, LName) values(@First, @Last)"; 
```

并使用以下名称使用 Parameters.AddWithValues：

```
 com.Parameters.AddWithValue("@First", labelFirstName.Text);
    com.Parameters.AddWithValue("@Last", labelLastName.Text); 
```

# javascript - 发送推送通知以从应用程序内部更改磁贴

> ID：15096551
> 
> 赞同：0
> 
> 时间：2013-02-26T18:27:39.060
> 
> 标签：javascript, windows-store-apps

我有一个应用程序，它是很多引文和格言的“存储库”；例如，我想通过从我的应用程序中随机发送一些格言来更改我的应用程序的磁贴，例如每 5 秒！

是否可以？或者我必须支付一些像 Azure 这样的服务器服务？在这种情况下确实存在免费的东西吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:01:42.493

您可以直接从您的应用程序更改磁贴：

```
var template = notifications.TileTemplateType.TileWideText01;                      
var xml = notifications.TileUpdateManager.getTemplateContent(template);
xml.getElementsByTagName("text")[0].appendChild(xml.createTextNode("My tile text"));
var myNotification = new notifications.TileNotification(xml);
notifications.TileUpdateManager.createTileUpdaterForApplication().update(myNotification); 
```

您可以从[许多不同的模板](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tiletemplatetype%28v=win.10%29.aspx)中进行选择，并且您可能应该同时更新宽磁贴和方形磁贴，因为您不知道用户在他的开始屏幕上有什么。[这](http://msdn.microsoft.com/en-us/library/windows/apps/Hh465439%28v=win.10%29.aspx)是有关如何执行此操作的更多详细信息。

不过，我不确定你能否让它每 5 秒更新一次。您只能在您的应用程序运行时或从[BackgroundTask](http://msdn.microsoft.com/en-us/library/windows/apps/hh977045.aspx)调用上述代码。如果您的应用程序处于锁定屏幕状态，您可以使用[TimeTrigger](http://msdn.microsoft.com/en-us/library/windows/apps/jj160504.aspx)并让它以 15 分钟或更短的时间间隔运行。如果不是，那么唯一的选择是具有相同间隔的[MaintenanceTrigger](http://msdn.microsoft.com/en-us/library/windows/apps/hh977060.aspx)，它仅在您的设备插入时运行。

要更频繁地更新磁贴，即使设备未插入，您也可以提前[安排磁贴通知](http://msdn.microsoft.com/en-us/library/windows/apps/hh761473.aspx)。当您的应用程序正在运行时，您可以从 BackgroundTask 添加多达 4096 个特定时间的磁贴更改，并在您的应用程序或 BackgroundTask 再次运行时添加新的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:01:52.387

最好的方法是从后台任务安排通知。您的后台任务每 15 分钟运行一次（而不是更早），因此您必须在那时安排它们。

MS 的一位同事不得不做类似的事情，因为他每秒都需要更新（实际上与下面的链接不同，但概念非常相似），并且以相同的方式完成。我有一个 tile helper 类，另一个同事我开发了它，如果你愿意的话——给我发一封电子邮件给 Microsoft，我会发过去的。我很快就会开始写一篇博客文章，但在那之前:)

一些代码应该可以帮助您了解大部分情况：

[每分钟更新一次磁贴](http://code.msdn.microsoft.com/windowsapps/Tile-Update-every-minute-68dbbbff)

从后台任务链接到关闭 [磁贴更新](http://code.msdn.microsoft.com/windowsapps/Tile-updates-from-2f6a854c/view/Discussions)

# c# - 从选择的存储过程中获取返回值

> ID：15096554
> 
> 赞同：0
> 
> 时间：2013-02-26T18:27:51.353
> 
> 标签：c#, sql-server, c#-4.0

如何从选择的存储过程中获取返回值，即返回的记录数。

我追求的价值是 RETURN ( SELECT COUNT( * ) FROM #Eligible_Ids );

我能够这样做的唯一方法如下：

```
DECLARE @NumberOfResults INT 
```

SET @NumberOfResults = (SELECT COUNT( * ) FROM #Eligible_Ids)

然后在 select 语句中我有 NumberResults = @NumberOfResults 但这会为重新调整的数据添加额外的行。

我在课堂上的代码是

```
 using (SqlCommand cmd = new SqlCommand(spName, cn))
                {
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.Parameters.Add(new SqlParameter("@strSearchPhrase", SqlDbType.VarChar, 100));
                cmd.Parameters.Add(new SqlParameter("@SearchMode", SqlDbType.Int, 4));
                cmd.Parameters.Add(new SqlParameter("@intPageNumber", SqlDbType.Int));
                cmd.Parameters.Add(new SqlParameter("@intRecordsPerPage", SqlDbType.Int));
                cmd.Parameters.Add(new SqlParameter("@intTotalRecordsReturned", SqlDbType.Int));
                cmd.Parameters.Add(new SqlParameter("@RETURN_VALUE", SqlDbType.Int));
                cmd.Parameters["@RETURN_VALUE"].Direction = ParameterDirection.ReturnValue;
                cmd.Parameters["@strSearchPhrase"].Value = q;
                cmd.Parameters["@SearchMode"].Value = 1;
                cmd.Parameters["@intPageNumber"].Value = pagenumber;
                cmd.Parameters["@intRecordsPerPage"].Value = 10;
                cmd.Parameters["@intTotalRecordsReturned"].Value = 10;

                cn.Open();
                using (SqlDataReader rdr = cmd.ExecuteReader(CommandBehavior.Default))
                    {
                    if (rdr.HasRows)
                        {
                        while (rdr.Read())
                            {
                            Data.Add(new DisplaySearchResults
                            {
                                Title           = (string)rdr["PageTitle"],
                                Description     = (string)rdr["PageParagraph"],
                                URL             = (string)rdr["PageURL"],
                                returnvalue     = (int)rdr["NumberResults"]
                            });
                            }
                        }

                    return Data; 
```

任何有关以正确方式执行此操作的帮助将不胜感激

乔治

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:58:52.190

看到[这个](https://stackoverflow.com/questions/10265757/how-to-read-the-parameters-defined-in-declare-statement-in-c-sharp/10266248#10266248)

在您的特定情况下，在 c# Coding 中更改它

```
cmd.Parameters.Add(new SqlParameter("@RETURN_VALUE", SqlDbType.Int));
cmd.Parameters["@RETURN_VALUE"].Direction = ParameterDirection.ReturnValue; 
```

对此

```
cmd.Parameters.Add(new SqlParameter("@NumberOfResults", SqlDbType.Int));
cmd.Parameters["@NumberOfResults"].Direction = ParameterDirection.Output; 
```

并在 SotoredProcedure 而不是声明

```
DECLARE @NumberOfResults INT 
```

添加输出参数

```
@NumberOfResults INT output 
```

然后你可以像这样读取@NumberofResults 参数中的值

```
TextBox1.Text = cmd.Parameters["@NumberOfResults"].Value.ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T19:11:50.127

要获取返回值，请添加带有方向 ReturnValue 的参数。既然你已经这样做了，那就是：

```
var val = cmd.Parameters["@RETURN_VALUE"].Value; 
```

重要提示：您只能在从阅读器读取所有结果行**后**才能阅读此内容：参数值和返回值位于 TDS 流的末尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:09:10.627

试试[@@ROWCOUNT](http://technet.microsoft.com/en-us/library/ms187316.aspx)

```
--Simple T-Sql Proc

CREATE PROCEDURE usp_OutputRowExample
    @Count INT OUTPUT
AS
BEGIN
    SELECT * FROM <table>; --Get your entities

    SELECT @Count = @@ROWCOUNT; --@@ROWCOUNT returns the amount of
                                --affected rows from the last query
END

//From C#

public Tuple<IEnumerable<object>, int>> GetObjects()
{
    using(var connection = new SqlConnection(_connectionString))
    {
        connection.Open();

        using(var command = sqlConnection.CreateCommand())
        {
            command.CommandText = "usp_OutputRowExample";
            command.CommandType = CommandType.StoredProcedure;

            var outputParameter = new SqlParameter("@Output", SqlDbType.Int)
                { Direction = ParameterDirection.Output };

            command.Parameters.Add(outputParameter);

            using(var reader = command.ExecuteReader())
            {
                var entities = new List<entities>();
                while(reader.Read())
                {
                    //Fill entities
                }
            }

            var outputCount = outputParameter.Value as int? ?? default(int);

            return new Tuple<IEnumerable<object>, int>(entities, outputCount);
        }
    }
} 
```

# java - 在 Java 中更新 LDAP 目录

> ID：15096558
> 
> 赞同：1
> 
> 时间：2013-02-26T18:28:17.197
> 
> 标签：java, ldap, upsert

我正在尝试使用 Novell JLDAP 库执行 Upsert，不幸的是，我无法找到这样的示例。目前，我必须：

```
 public EObject put(EObject eObject){
Subject s = (Subject) eObject;
//Query and grab attributes from subject
LDAPAttributes attr = resultsToAttributes(getLDAPConnection().get(s)); 

//No modification needed - return
if(s.getAttributes().equals(attr)){
  return eObject;
} else {
  //Keys:
  //REPLACE,ADD,DELETE, depending on which attributes are present in the maps, I choose the operation which will be used
 Map<String,LDAPAttribute> operationalMap = figureOutWhichAttributesArePresent(c.getAttributes(),attr);

 //Add the Modifcations to a modification array
 ArrayList<LDAPModification> modList = new ArrayList<LDAPModification>();
 for(Entry entry: operationalMap.getEntrySet()){
   //Specify whether it is an update, delete, or insert here. (entry.getKey());
   modList.add(new LDAPModification(entry.getKey(),entry.getValue());
 }
 //commit
 connection.modify("directorypathhere",modList.toArray(new LDAPModification[modList.size()]));
} 
```

我宁愿不必先查询客户，这也会导致主题属性的循环。有谁知道 JNDI 或其他库是否能够在不针对 LDAP 运行多个语句的情况下执行更新/插入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:37:53.070

Petesh 是正确的——抽象是在 Novell 库（以及 UnboundId 库）中实现的。我能够使用 Modify.REPLACE 参数为每​​个传入的属性“更新”值，为空值传入 null。这有效地创建、更新和删除了属性，而无需先解析它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:43:42.983

在 LDAP 中，通过 LDIF 文件，一个不高兴将是一个包含两个步骤的事件。删除和添加值。这由一行上的单个破折号表示，介于删除和添加之间。

我不确定你会如何在这个库中做到这一点。我会尝试 modList.remove 然后 modList.add 一个接一个，看看是否有效。

# javascript - google.maps.MapOptions + JSON：避免 eval()？

> ID：15096560
> 
> 赞同：3
> 
> 时间：2013-02-26T18:28:26.957
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在寻找一个 eval() 替代品..

我生成了一个常用的谷歌地图，API v3。：

```
 // define options
    var mapOptions = {
      zoom: 18,
      center: new google.maps.LatLng(-33.890542, 151.274856),
      mapTypeId: eval(maptype["map"]),
      panControl: true,
      zoomControl: true,
      mapTypeControl: true,
      scaleControl: true
    };

    // create map
    map = new google.maps.Map(document.getElementById('map_test),mapOptions); 
```

这可以正常工作，但我想避免 eval()。maptype 是通过 php 定义的，使用 JSON：

```
echo 'maptype = '.json_encode($options).';'; 
```

评估有替代方案吗？

更新：完整的源代码：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Unbenanntes Dokument</title>
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'></script>
<script src="https://maps.googleapis.com/maps/api/js?v=3.7&sensor=false&language=de"></script>
</head>

<body>

<script>
maptype = {"map":"google.maps.MapTypeId.SATELLITE"};</script>

<script>
function Map()
{
var mapOptions = {zoom: 18, center: new google.maps.LatLng(-33.890542, 151.274856), mapTypeId: eval(maptype["map"])};

// create map
map = new google.maps.Map(document.getElementById('map'),mapOptions);
}
</script>

<div id="map" style="width:1200px; height:800px"></div>
<script> jQuery(document).ready(function ($) {Map();});</script>

</body>
</html> 
```

结果：没有错误，没有地图，只有灰色背景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:31:04.947

你应该能够删除`eval()`它周围的调用，它应该可以工作，假设`ngggOptions`是一个对象并且有一个`map`.

# autocomplete - 您可以使用按钮弹出 Wicket 自动完成字段吗？

> ID：15096564
> 
> 赞同：0
> 
> 时间：2013-02-26T18:28:41.950
> 
> 标签：autocomplete, wicket-1.5

是否可以从按钮显示 AutoCompleteTextField 的选项列表。（Javascript 或 AutoCompleteTextField 代码中的内容？）

# javascript - 从fancybox图像弹出窗口发送推文时，网站URL未附加到推文消息

> ID：15096567
> 
> 赞同：1
> 
> 时间：2013-02-26T18:28:46.577
> 
> 标签：javascript, html, twitter

我在我的[网站](http://www.teganwhitesel.com/#painting)上设置了一个 Fancybox 图片库，并在每个图片弹出框上集成了社交分享。我遇到的问题是，当有人转到 Tweet 时，网站的 URL 没有附加到预先填充的 Twitter 消息中。

我不确定自己做错了什么，因为我遵循了有关如何将社交按钮与 Fancybox 集成的[JSFiddle教程，并且代码似乎与我的几乎相同...](http://jsfiddle.net/G5TC3/)

这是我的社交按钮 JS：

```
$('.fancybox-buttons')
    .attr('rel', 'gallery')
    .fancybox({
        openEffect  : 'none',
        closeEffect : 'none',

        prevEffect : 'none',
        nextEffect : 'none',

    beforeShow: function () {
        if (this.title) {
            // New line
            this.title += '<br />';

            // Add tweet button
            this.title += '<a href="https://twitter.com/share" class="twitter-share-button" data-text="Amazing work by artist Tegan Whitesel!" data-count="none" data-url="' + this.href + '">Tweet</a>';

            // Add FaceBook like button
            this.title += '<iframe src="//www.facebook.com/plugins/like.php?href=' + this.href + '&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:110px; height:23px;" allowTransparency="true"></iframe>';

            // Add Pinterest "Pin It" button
            this.title += '<a href="http://pinterest.com/pin/create/button/?url=http://www.teganwhitesel.com/#painting&media=http%3A%2F%2Fwww.teganwhitesel.com%2Fpainting%2Fbeginnings-3_b.jpg&description=Tegan%20Whitesel%20-%20Beginnings%20III" class="pin-it-button" count-layout="none"><img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" /></a>';

        }
    },
    afterShow: function () {
        // Render tweet button
        twttr.widgets.load();
    },
    helpers: {
        title: {
            type: 'inside'
        }, //<-- add a comma to separate the following option
        buttons: {} //<-- add this for buttons
    },
    closeBtn: true, // you will use the buttons now
    arrows: true
}); 
```

`index.html` `<header>`这是我网站部分中的附加脚本标签：

```
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="http://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

# macos - 应用购买中的沙盒“App Store 暂时不可用”

> ID：15096571
> 
> 赞同：2
> 
> 时间：2013-02-26T18:28:56.433
> 
> 标签：macos, cocoa, app-store, in-app-purchase, storekit

我正在尝试在我的 Mac 应用程序中为 App Store 测试应用程序购买，但无论我做什么，我都会不断收到此错误：

![在此处输入图像描述](../Images/40917f91cb65b5062ac1bb722b1a19a7.png)

当我查看`Console`应用程序日志时，我看到：

```
2/26/13 3:08:05.452 PM App Store[1798]: FRWebDelegate: Received http status code 500 on response.
2/26/13 3:08:06.686 PM App Store[1798]: FRWebDelegate: Received http status code 500 on response.
2/26/13 3:08:07.929 PM App Store[1798]: FRWebDelegate: Received http status code 500 on response.
2/26/13 3:08:09.162 PM App Store[1798]: FRWebDelegate: Received http status code 500 on response.
2/26/13 3:08:10.401 PM App Store[1798]: FRWebDelegate: Received http status code 500 on response.
2/26/13 3:25:19.819 PM App Store[1798]: FRWebDelegate: Received http status code 500 on response. 
```

我的产品列出正确，看起来所有购买的东西都很好，但我仍然无法让它工作。

有没有其他人见过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:35:23.120

可能不是这样，但是一旦我开始使用与我当前的应用商店帐户（即巴西）具有相同国家/地区的测试用户，错误就停止了。

我正在尝试与美国应用商店的用户合作，当应用程序启动时，商店必须切换到美国商店，看起来这可能会使 App Store 应用程序向 Apple 服务器发送错误数据。

因此，为与您自己的应用商店帐户相同的国家/地区创建测试用户。这对我有用。

# c# - 什么是 CSharp 对所有内置编译器变量类型的类型的约束？

> ID：15096573
> 
> 赞同：-1
> 
> 时间：2013-02-26T18:29:08.943
> 
> 标签：c#, generics

内置编译器变量类型：int，float，double，short，...
我需要这个来实现 IsBetween

```
public bool IsBetween<T>(this T input) where T : [built-in compiler variable types] {
    return false;
} 
```

如果没有直接的方法，任何替代方法都可以。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T18:36:02.233

因为`IsBetween`您不需要内置类型，也不需要数字类型。您需要带有顺序的类型，这意味着实现`IComparable<T>`：

```
public bool IsBetweenInclusive<T>(this T input, T lower, T upper)
    where T : IComparable<T>
{
    return IsBetweenInclusive(input, lower, upper, Comparer<T>.Default);
}

public bool IsBetweenInclusive<T>(this T input, T lower, T upper, IComparer<T> comparer)
{
    return (comparer.Compare(lower,input) <= 0)&&
           (comparer.Compare(upper,input) >= 0);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T18:35:47.040

如果“编译器变量类型”是指原始类型，则没有这样的限制：

[MSDN - 类型参数的约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

您可以使用 struct 来*允许*大多数内置类型，但您也可以定义自己的 struct 并且它是允许的。

我假设您正在构建`IsBetween`通用化数字比较`a <= x <= b`。如果这是您的意图，那么通常的方法是使用`IComparable<T>`.

```
public static bool IsBetween<T>(this T input, T lower, T upper) where T : IComparable<T> {
    return lower.CompareTo(input) < 0 && input.CompareTo(upper) < 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T18:31:57.000

用于`where T : struct`覆盖所有值类型

[http://msdn.microsoft.com/en-us/library/d5x73970.aspx](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T18:36:59.207

在 C# 中，没有关于什么是“原始类型”的正式定义；规格中没有提到这样的术语。

没有可以添加的通用约束将输入限制为仅原始类型，因为无法知道这些类型可能是什么。

您可以做的最好的事情是对您想要的每种类型的方法进行重载：

```
public bool IsBetween(this int input)
{
    return false;
}

public bool IsBetween(this double input)
{
    return false;
}

public bool IsBetween(this float input)
{
    return false;
}

//... 
```

请注意，由于运算符之间的隐式转换，例如 from `int`to `long`、 from `single`to`double`等，您可以选择省略其中的一些并让转换处理它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T18:33:03.323

*目前尚不清楚“内置编译器变量类型”*是什么意思，可能类似于

```
public bool IsBetween<T>(this T input) where T : struct {
    return false;
} 
```

可能是合适的。

# ios - 核心情节：CPTConstraintsFixed 中的 NSAssert 异常：`LowerBound 必须小于或等于 upperBound`

> ID：15096575
> 
> 赞同：0
> 
> 时间：2013-02-26T18:29:22.077
> 
> 标签：ios, objective-c, cocoa-touch, core-plot

我在类中的 Core Plot 方法中遇到`NSAssert`异常：`positionForLowerBound:lowerBound upperBound:``CPTConstraintsFixed.m`

> [_CPTConstraintsFixed positionForLowerBound:upperBound:]，/Users/AR/Downloads/core-plot/framework/Source/_CPTConstraintsFixed.m:79

崩溃发生在带有断言的代码行中：`lowerBound must be less than or equal to upperBound`。

这是我的堆栈跟踪：

![在此处输入图像描述](../Images/b5244bcafa6cc82ebc3093e168f1c3dc.png)

我正在使用具有以下设置的条形图：

```
x.axisConstraints = [CPTConstraints constraintWithLowerOffset:0.0];
relativePlotSpace.xRange = [CPTPlotRange
    plotRangeWithLocation:CPTDecimalFromDouble(xAxisStart)
    length:CPTDecimalFromDouble(xAxisLength)]; 
```

我为`xAxisLength = 6`和提供的值`xAxisStart = -0.5`。

您对导致此错误的原因有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:40:20.807

这个问题似乎与一些 y 值有关：其中一些是`infinite`浮点除法的结果。我现在检查无穷大并用值替换这些`[NSNull null]`值。

# openstreetmap - 通过 osm2wkt 从 openstreetmap dat 生成街道地图

> ID：15096579
> 
> 赞同：0
> 
> 时间：2013-02-26T18:29:36.233
> 
> 标签：openstreetmap, wkt

我正在尝试从 openstreetmap 数据生成城市的街道地图。我使用过 osm2wkt 工具，但它会将其转换为 wkt 文件。有什么方法可以在地图中而不是在 wkt 文件中进行转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:51:40.257

如 osm2wkt 网站所述，您可以使用[OpenJump](http://www.openjump.org/)来可视化 WKT 数据。[您可以在此处](http://www.boutique-geomarketing.fr/webContent/telechargements/openjump/OpenJUMP1.0.1_Tutorial_englishBeta.pdf)找到教程 (PDF) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:26:50.927

打印的地图？在线“滑”地图？

如果您不想要 wkt，显然 osm2wkt 不是您想要的工具。

要自定义设计您自己的在线滑动地图，您可以使用[TileMill](http://mapbox.com/tilemill/)。

如果您只想获得一个地方的 PNG、SVG 或 PDF，您可以访问[http://www.openstreetmap.org/](http://www.openstreetmap.org/)，浏览到您想要的地方，然后使用“导出”选项卡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-07T10:33:51.537

首先，访问[http://www.openstreetmap.org/](http://www.openstreetmap.org/)并选择所需区域的坐标。然后，选择导出。它将提供一些 .osm 格式的文件，例如 map.osm。现在我们必须将 map.osm 文件转换为 map.wkt 文件。为此目的使用 osm2wkt jar。[从http://www.tm.kit.edu/~mayer/osm2wkt/](http://www.tm.kit.edu/~mayer/osm2wkt/)下载该 jar 文件。

现在，使用以下命令。

```
java -jar osm2wkt.jar map.osm 
```

现在，使用 OpenJump 打开文件。并通过根据需要选择地图中的点将其保存为 .wkt 格式。

# mysql - php-mysql for MySQL-server (case sensitive)

> ID：15096586
> 
> 赞同：0
> 
> 时间：2013-02-26T18:30:03.153
> 
> 标签：mysql

I don't know how but it seems there are two different versions of mysql probably from different yum repositories :

```
yum list | grep  mysql
MySQL-server.x86_64                        5.5.9-1.linux2.6            installed
mysql-server.x86_64                        5.1.47-1.2.amzn1            amzn 
```

I need to install php-mysql which is available only for the version that is not installed (5.1.47-1.2.amzn1), if I run yum install php-mysql there is a conflict with the other MySQL-server (5.5.9-1.linux2.6)..

```
yum install php-mysql
.
.
.
Transaction Check Error:
  file /usr/share/mysql/charsets/cp1251.xml from install of mysql-libs-5.1.47-1.2.amzn1.x86_64 conflicts with file from package MySQL-server-5.5.9-1.linux2.6.x86_64 
```

As the current MySQL-server with uppercase letters is currently installed and used in production I can't uninstall it and install the other version wehre the php-mysql package is compatible.

How can I install php-mysql for the MySQL-server (5.5.9-1.linux2.6) ? why there are two versions of mysql-servers ?

Any help will be appreciated..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T17:16:20.873

I just had a similar problem when trying to install geoip-devel (GeoIP-devel version 1.4.5 in repo extras, geoip-devel version 1.4.6 in repo rpmforge). Mine was solved by excluding the rpmforge:

```
yum install --disablerepo=rpmforge GeoIP-devel 
```

I guess your problem is with several repos supplying different versions, maybe you can use yum downgrade (possibly with the --disablerepo option)?

# java - 用 Java 模拟 SFTP、FTP、FTPS、本地文件系统服务器

> ID：15096589
> 
> 赞同：12
> 
> 时间：2013-02-26T18:30:11.453
> 
> 标签：java, ftp, sftp

我需要用 Java 测试 FTP/FTPS/SFTP/本地文件系统协议。

我需要一个可以在任何这些方法中使用的模拟服务器。

我可以找到一个 MockFTPServer。据我了解，它只能用于简单的FTP协议，不能用于FTPS/SFTP/Local File System。

任何人都可以建议是否有任何模拟实现可用于支持 Java 中的 FTP/FTPS/SFTP/本地文件系统的服务器？

谢谢，

维杰·博尔

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-03-27T19:10:32.773

有[假 SFTP 服务器规则](https://github.com/stefanbirkner/fake-sftp-server-rule)。它是 JUnit 4 的规则/库，在测试期间运行 SFTP 服务器。它提供了方便的方法来帮助您将文件放到服务器上并从中获取文件。

完全披露：我是 Fake SFTP 服务器规则的作者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-04-30T10:50:09.780

这些问题有点老，但无论如何我都会发布我的答案，因为它也可能对其他人有所帮助。

我写了[一篇](https://overflowed.dev/blog/sftp-testing-junit-testcontainers-atmoz-sftp/)关于如何使用 Testcontainers 和 atmoz/sftp Docker 映像创建模拟 sftp 服务器的文章，它也适用于您的其他要求。

**完整的例子可以在[这里看到](https://overflowed.dev/blog/sftp-testing-junit-testcontainers-atmoz-sftp/)**

你会像这样用 SFTP 定义你的 TestContainer

```
 private static final GenericContainer sftp = new GenericContainer(
            new ImageFromDockerfile()
                    .withDockerfileFromBuilder(builder ->
                            builder
                                    .from("atmoz/sftp:latest")
                                    .run("mkdir -p /home/" + USER + "/upload; chmod -R 007 /home/" + USER)
                                    .build()))
            //.withFileSystemBind(sftpHomeDirectory.getAbsolutePath(), "/home/" + USER + REMOTE_PATH, BindMode.READ_WRITE) //uncomment to mount host directory - not required / recommended
            .withExposedPorts(PORT)
            .withCommand(USER + ":" + PASSWORD + ":1001:::upload"); 
```

当您需要 FTPS 服务器或任何其他协议时，您可以选择另一个像这样的图像并调整容器配置。[https://hub.docker.com/r/bozorgiyan/ftps-server](https://hub.docker.com/r/bozorgiyan/ftps-server)

至于本地文件系统，我不确定是否有什么特殊要求。使用 JUnit 5，您可以像这样轻松地创建一个临时目录

```
@TempDir
File mockFileSystemDirectory; 
```

你可以创建一个 util 类来重写你到那个目录的路径，如下所示：

```
public static File convertToFakeFileSystem(File yourFile, File fakeFileSystem) {
    return new File(fakeFileSystem.getAbsolutePath() + yourFile
            .getAbsolutePath()
            .replaceAll("C://", "/"));
} 
```

# java-ee-6 - “记住我”和 Servlet 3.0 request.login()

> ID：15096591
> 
> 赞同：1
> 
> 时间：2013-02-26T18:30:12.053
> 
> 标签：java-ee-6, servlet-3.0

我在 Java EE 容器（jdbc-realm）中使用 servlet 3.0 提供的 HttpServletRequest.login() 方法，一切正常。

根据这个 [Java EE 6: How to implement "Stay Logged In" when user login to the web application，我实现了一个记住我的方法。

但是我在过滤器类中坚持以下内容：

```
if (user != null) {
request.login(user.getUsername(), user.getPassword());
request.getSession().setAttribute("user", user); // Login.
addCookie(response, COOKIE_NAME, uuid, COOKIE_AGE); // Extends age.
}. 
```

我有一个带有加密 pw 的 jdbc-realm，如何通过 rememberMe 进行容器管理身份验证？user.getPassword() 需要我不知道的清晰（未散列）密码！我不想在数据库中存储明确的密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:07:41.537

如果您使用的现成登录模块只接受明确的（未散列的）密码，那么您可能需要修改它，然后安装修改后的版本。

您现有的 JDBC 领域很可能有一个供应商特定的登录模块，但 Java EE 6 确实有一个用于构建登录模块（auth 模块）的标准化专用 API，称为 JASPIC。有关一些背景信息，请参阅[本文](http://arjan-tijms.blogspot.com/2012/11/implementing-container-authentication.html)。

顺便说一下，对于一个名为[OmniSecurity](http://omnisecurity.omnifaces.org/)的 OmniFaces 子项目，我们一直在设计一个 JASPIC auth 模块的原型，它也支持记住我。它是开源的，因此您可以使用它来获得灵感。

# c# - 如何从 Windows 服务总线订阅中获取未处理的消息计数？

> ID：15096592
> 
> 赞同：5
> 
> 时间：2013-02-26T18:30:13.457
> 
> 标签：c#, asynchronous, azure, servicebus, autoscaling

我正在开发一个需要自动扩展工作进程的系统，这些工作进程从服务总线主题中提取消息进行处理。

为此，**我需要知道给定订阅的未处理消息的数量。我怎么做？**

我查看了[SubscriptionClient](http://msdn.microsoft.com/en-us/library/hh144031.aspx)类，但似乎没有办法找到等待处理的消息数量。

![在此处输入图像描述](../Images/1c59644b8ee84e3753a70d3f79f167d7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-01T12:02:29.427

您可以使用or`NamespaceManager`来获取您的or 。这些描述将值公开为。`QueueDescription``TopicDescription``GetMessage(_name_)``GetTopic(_name_)``MessageCount`

希望这可以帮助！

# r - 如何自动防止 Sweave 中的 R 输入超出右边距？

> ID：15096594
> 
> 赞同：3
> 
> 时间：2013-02-26T18:30:17.870
> 
> 标签：r, sweave

是否可以让 Sweave 在多行上自动打印 R 输入？例如，

```
\documentclass{article}

\begin{document}
\SweaveOpts{concordance=TRUE}
\setkeys{Gin}{width=\textwidth}

<<fig=TRUE>>=
plot(LakeHuron, ylab="Level in feet", xlab="Year", main="Level of Lake Huron 1875–1972", lwd=2, las=1) 
@

\end{document} 
```

将打印 R 代码以运行到（和超出）右手边距。据我所知，

```
<<>>=
options(width=60)
@ 
```

仅控制 R 输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:08:41.563

使用[sweave](/questions/tagged/sweave "显示标记为“编织”的问题")，您可以尝试将参数添加`keep.source = FALSE`到您的代码块中，但这仍然不能在默认情况下始终解决您的问题（在此特定示例中没有）。

这是您当前拥有的输出的一部分：

```
<<fig=TRUE>>=
plot(LakeHuron, ylab="Level in feet", xlab="Year", main="Level of Lake Huron 1875–1972", lwd=2, las=1) 
@ 
```

![在此处输入图像描述](../Images/06954f9651a718eb6bd29f5efea4f7e6.png)

如果我们添加，这是输出的一部分`keep.source = FALSE`

```
<<fig=TRUE, keep.source=FALSE>>=
plot(LakeHuron, ylab="Level in feet", xlab="Year", main="Level of Lake Huron 1875–1972", lwd=2, las=1) 
@ 
```

![在此处输入图像描述](../Images/b9c8bcbaa9c6b5603abab1adce656013.png)

而且，如果我们稍微作弊并手动重新排序参数，这是输出的一部分。请注意，我已将有问题的标题作为最后一项：

```
<<fig=TRUE, keep.source=FALSE>>=
plot(LakeHuron, ylab="Level in feet", xlab="Year", lwd=2, las=1, main="Level of Lake Huron 1875-1972") 
@ 
```

![在此处输入图像描述](../Images/3a2f9955eab1dabf3d4a97e75dd05cf5.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T17:00:18.420

我确实使用 knitr 来编译 .Rnw 文件，它提供了对一些非常方便的代码块选项（如 tidy.opts）的访问。我认为使用下面的代码可能会解决您的数字上方的文本溢出问题。

```
\documentclass{article}

\begin{document}
\setkeys{Gin}{width=\textwidth}

<<fig=TRUE, tidy.opts=list(keep.blank.line=FALSE, width.cutoff=50)>>=
plot(LakeHuron, ylab="Level in feet", xlab="Year", main="Level of Lake Huron 1875–1972", lwd=2, las=1) 
@

\end{document} 
```

# clickonce - 如何在 Clickonce 中执行此操作？

> ID：15096595
> 
> 赞同：0
> 
> 时间：2013-02-26T18:30:18.993
> 
> 标签：clickonce

由于我没有网络服务器，我必须将我的应用程序托管在 Dropbox 上。我希望能够推出更新，但我不确定 Dropbox 会给我的链接。发布应用程序后，有什么方法可以更改链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:37:45.793

找到了一种方法：

发布它，并为 URL 字段放置`https://dl.dropbox.com/u/(user ID HERE)/(The Folder You Want To Put It In)/`. 然后，当它完成发布时，将文件复制到 Dropbox。这将映射到与`(The Folder You Want To Put It In)`您的 Dropbox 公共文件夹中的名称相同的文件夹。

# java - 从 GridFS 读取时不显示非 ASCII 字符

> ID：15096598
> 
> 赞同：1
> 
> 时间：2013-02-26T18:30:24.673
> 
> 标签：java, http, mongodb, character-encoding, gridfs

我正在使用 Apache fileupload API 上传文件（不同内容类型），如下所示：

```
FileItemFactory factory = getFileItemFactory(request.getContentLength());
ServletFileUpload uploader = new ServletFileUpload(factory);
uploader.setSizeMax(maxSize);
uploader.setProgressListener(listener);

List<FileItem> uploadedItems = uploader.parseRequest(request); 
```

... 使用以下方法将文件保存到 GridFS：

```
public String saveFile(InputStream is, String contentType) throws UnknownHostException, MongoException {
    GridFSInputFile in = getFileService().createFile(is);
    in.setContentType(contentType);
    in.save();
    ObjectId key = (ObjectId) in.getId();
    return key.toStringMongod();
} 
```

...调用 saveFile() 如下：

```
saveFile(fileItem.getInputStream(), fileItem.getContentType()) 
```

并使用以下方法从 GridFS 读取：

```
public void writeFileTo(String key, HttpServletResponse resp) throws IOException {
    GridFSDBFile out = getFileService().findOne(new ObjectId(key));
    if (out == null) {
        throw new FileNotFoundException(key);
    }
    resp.setContentType(out.getContentType());
    out.writeTo(resp.getOutputStream());
} 
```

我下载文件的 servlet 代码：

```
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    String uri = req.getRequestURI();

    String[] uriParts = uri.split("/");  // expecting "/content/[key]"

    // third part should be the key
    if (uriParts.length == 3) {
        try {
            resp.setDateHeader("Expires", System.currentTimeMillis() + (CACHE_AGE * 1000L));
            resp.setHeader("Cache-Control", "max-age=" + CACHE_AGE);
            resp.setCharacterEncoding("UTF-8");

            fileStorageService.writeFileTo(uriParts[2], resp);
        }
        catch (FileNotFoundException fnfe) {
            resp.sendError(HttpServletResponse.SC_NOT_FOUND);
        }
        catch (IOException ioe) {
            resp.sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);
        }
    }
    else {
        resp.sendError(HttpServletResponse.SC_BAD_REQUEST);
    }
} 
```

然而; **所有非 ASCII 字符都显示为 '?'** 在编码设置为 UTF-8 的网页上使用：

```
<meta http-equiv="content-type" content="text/html; charset=UTF-8"> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:23:12.690

抱歉耽误您的时间！这是我的错误。代码或 GridFS 没有任何问题。我的测试文件的编码错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:56:41.740

```
resp.setContentType("text/html; charset=UTF-8"); 
```

原因：只有内容类型和二进制 InputStream 一起被传递。

```
public void writeFileTo(String key, HttpServletResponse resp) throws IOException {
    GridFSDBFile out = getFileService().findOne(new ObjectId(key));
    if (out == null) {
        throw new FileNotFoundException(key);
    }
    resp.setContentType(out.getContentType()); // This might be a conflict
    out.writeTo(resp.getOutputStream()); 
```

}

# javascript - HTML5画布，另存为图片，toDataURL()，创建ID

> ID：15096599
> 
> 赞同：0
> 
> 时间：2013-02-26T18:30:24.997
> 
> 标签：javascript, html, canvas

我有这个小的 JavaScript 画布片段：

```
(function() {
    // Creates a new canvas element and appends it as a child
    // to the parent element, and returns the reference to
    // the newly created canvas element

    function createCanvas(parent, width, height) {
        var canvas = {};
        canvas.node = document.createElement('canvas');
        canvas.context = canvas.node.getContext('2d');
        canvas.node.width = width || 100;
        canvas.node.height = height || 100;
        parent.appendChild(canvas.node);
        return canvas;
    }

    function init(container, width, height, fillColor) {
        var canvas = createCanvas(container, width, height);
        var ctx = canvas.context;
        // define a custom fillCircle method
        ctx.fillCircle = function(x, y, radius, fillColor) {
            this.fillStyle = fillColor;
            this.beginPath();
            this.moveTo(x, y);
            this.arc(x, y, radius, 0, Math.PI * 2, false);
            this.fill();
        };
        ctx.clearTo = function(fillColor) {
            ctx.fillStyle = fillColor;
            ctx.fillRect(0, 0, width, height);
        };
        ctx.clearTo(fillColor || "#ddd");

        // bind mouse events
        canvas.node.onmousemove = function(e) {
            if (!canvas.isDrawing) {
               return;
            }
            var x = e.pageX - this.offsetLeft;
            var y = e.pageY - this.offsetTop;
            var radius = 10; // or whatever
            var fillColor = '#ff0000';
            ctx.fillCircle(x, y, radius, fillColor);
        };
        canvas.node.onmousedown = function(e) {
            canvas.isDrawing = true;
        };
        canvas.node.onmouseup = function(e) {
            canvas.isDrawing = false;
        };
    }

    var container = document.getElementById('canvas');
    init(container, 200, 200, '#ddd');

})(); 
```

现在它需要 div 和`id`of `canvas`，并在其中创建一个小的 HTML5 `canvas`，用户基本上可以用鼠标在其中绘制。现在这很好......但是如果我必须用 保存画布内的内容`canvas.toDataURL()`怎么办？据我所知，我必须拿起画布，然后将`canvas.toDataURL()`其保存到图像中。但是 - 这需要一个身份证，对吧？当我在函数中创建画布时，我将`createCanvas`如何制作一个`id`伴随它的东西，所以我可以做类似的事情`document.getElementById("idofcanvas").toDataURL()`？

预先感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:33:13.140

> 但是 - 这需要一个身份证，对吧？

它*不需要*ID，但 ID 不会受到伤害（只要它实际上是唯一的`;-)`）。任何选择 DOM 元素的方法都可以在这里使用。如果页面上只有一个画布，这就足够了，例如：

```
var canvas = document.getElementsByTagName('canvas')[0];
var imageData = canvas.toDataURL(); 
```

> 当我在 createCanvas 函数中创建画布时，我将如何制作一个伴随它的 id？

您只需在返回之前设置 canvas 元素的 ID 属性。请记住，您需要确保此值是唯一的！

```
function createCanvas(parent, width, height) {
    var canvas = {};
    canvas.node = document.createElement('canvas');
    canvas.node.id = /* some unique value here */;
    canvas.context = canvas.node.getContext('2d');
    canvas.node.width = width || 100;
    canvas.node.height = height || 100;
    parent.appendChild(canvas.node);
    return canvas;
} 
```

# jquery - jquery mobile dialog close 也可以追溯到历史

> ID：15096604
> 
> 赞同：2
> 
> 时间：2013-02-26T18:30:31.507
> 
> 标签：jquery, jquery-mobile, mobile

我有 javascript 在有人登陆我网站的任何/每个页面上打开一个对话框（只是一些文本，没有别的）（是的，我知道它是 javascript 风格的混合体 - 仍在处理这个问题）：

```
$(document).bind("pageinit", function(){
    if( getCookieValue('instructionseen') == false)
        {
        $.mobile.changePage("/php/instructions_alert.php");
        document.cookie ="instructionseen=yes; path=/;";
        }
    }); 
```

该脚本设置了一个 cookie，以便用户只看到一次对话框。所以这个想法是你来到这个网站，得到一个包含一些指令的对话，关闭它并继续。

Chrome v24 中的问题（我担心它可能会发生在我无法测试的移动浏览器中）是关闭对话框会使我回到历史记录中的 2 页，所以我返回到带有我单击的链接的页面去我的网站。

例如，假设我的网站是 MS，它是否通过 RS（推荐网站）链接到

```
Desired: RS > click to MS > Dialog opens > close it > MS in view

On Chrome: RS > click to MS > Dialog opens > close it > back to RS 
```

使用 JQM 提供的 X 或我提供的关闭按钮会发生这种情况：

```
<a href='#' onclick='$(".ui-dialog").dialog("close");' data-role='button' data-theme='c'>Close</a> 
```

对话源：

```
<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<title>title..</title>
<link rel='stylesheet' href='/design/mobile_style.css'>
<link rel='stylesheet' href='http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css' />
<script src='//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'></script>
<script src='/js/main_and_JQM_init.min.js'></script> 
<script src='http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js'></script>
</head>
<body>

<div data-role='dialog'  id='instructions_alert_div' data-overlay-theme='b'>
        <div data-role='header' data-theme='d'>
            <h1>Important!</h1>
        </div>

        <div data-role='content' data-theme='c'>
        content, just text...
        <a href='#' onclick='$(".ui-dialog").dialog("close");' data-role='button' data-theme='c'>Close</a>

        </div>
</div>

</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:29:39.067

你去吧。

**标记：**

```
 <!-- Start of first page -->

 <div data-role="page" id="page1">

    <div data-role="header">
    <h1>page1 header</h1>
</div><!-- /header -->

<div data-role="content">   
    <p>page 1</p>

    <a href="#page2" data-role="button">Page 2</a>

</div><!-- /content -->

<div data-role="footer">
    <h4>Page1 Footer</h4>
</div><!-- /footer -->
</div><!-- /page -->

 <!-- Start of second page -->

 <div data-role="page" id="page2">

<div data-role="header">
    <h1>Bar</h1>
</div><!-- /header -->

<div data-role="content">   
    <p>password accepted</p>        
    <p><a href="#test" data-rel="dialog">dialog</a></p>

</div><!-- /content -->

<div data-role="footer">
    <h4>Page2 Footer</h4>
</div><!-- /footer -->
 </div><!-- /page --> 
```

**对话：**

```
 <div data-role='dialog'  id='test' data-overlay-theme='b'>
    <div data-role='header' data-theme='d'>
        <h1>Important!</h1>
    </div>

    <div data-role='content' data-theme='c'>
    content, just text...
      <a href='#' onclick='$(".ui-dialog").dialog("close");' data-role='button' data-theme='c'>Close</a>

    </div>
</div> 
```

**JQM:**

```
$("#page2").on('pageinit', function(event) {
$.mobile.changePage($("#test"), {
    transition : 'pop',
    reverse    : true,
    changeHash : true
});
 }); 
```

JSfiddle：[对话框](http://jsfiddle.net/C7E3E/1/)

# c - MS-DOS 的 C 编译器

> ID：15096609
> 
> 赞同：14
> 
> 时间：2013-02-26T18:30:42.287
> 
> 标签：c, virtualbox, dos

我已经在 VirtualBox 虚拟机上安装了 MS-DOS 6.22，一切运行良好，这样做的目的是编译一个用 C 语言编写的程序，该程序显示和编辑（虚拟）RAM 中的位。但是，我需要一种在虚拟 MS-DOS 操作系统上安装 C 编译器的方法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-01-06T17:20:51.253

以下是其他人遗漏的一些细节：

1.  根本没有人提到[DJGPP](http://www.delorie.com/djgpp/)。

    它是 GCC 的保护模式 DOS 端口，并且可能拥有所有开源选项中可用的库和指南最多的选择。（包括带有[安装 HOWTO的](http://www.delorie.com/howto/djgpp/turbo-vision-howto.html)[Turbo Vision 端口](http://tvision.sourceforge.net/)）

2.  无论您尝试做什么，[OpenWatcom](https://sourceforge.net/projects/openwatcom/files/current-build/) ( [source](https://github.com/open-watcom/open-watcom-v2) ) 都可能满足您的需求。

    1.  OpenWatcom 仍然包含使用 DOS/4GW 的免费许可，这使得它在当时如此受欢迎。（当你看到像 DOOM 这样的游戏在启动时显示“DOS/4GW Protected Mode Runtime”时，这意味着它是使用 Watcom C/C++ 构建的，因为 DOS/4GW 是 DOS/4G 的特殊 Watcom 捆绑版本。）

        事实上，DOS/4GW 的创建者在他[去世](https://github.com/open-watcom/open-watcom-v2/issues/193#issuecomment-422038428)时正试图挖掘更新版本的 DOS/4GW 的源代码，以便为 Open Watcom 做出贡献。

    2.  如果您不想怀旧，OpenWatcom 捆绑了更新、更好的 DOS/4GW 替代品，例如 DOS/32 和 PMODE/W。

    3.  如果您想使用 Windows 3.1 编程，OpenWatcom 包括 Win386，这是一个 32 位的 Window 3.x 扩展程序，在 Microsoft 生产自己的“Win32s”32 位 API 插件之前，Sierra 等公司将其用于他们的 Windows 3.1 游戏.

    4.  OpenWatcom 可以通过一次安装针对所有受支持的平台。（我用它从 Linux 构建各种 DOS 和 Windows 测试 EXE。）

    5.  OpenWatcom 可以针对**许多**复古平台：

        *   COM 文件
        *   实模式 EXE（有一组单独的选项来选择最低 CPU 要求）
        *   保护模式 EXE（您可以选择多个扩展器）
        *   Windows 3.1 EXE（带或不带 Win386 扩展程序）
        *   许多您可能不关心的其他格式
3.  如果您的项目必须在实模式下运行（即没有 DJGPP）并且您想要具有比 Open Watcom C/C++ 中的优化器更现代的优化器，那么您可以尝试一个名为[GCC IA16的 GCC 分支。](https://github.com/tkchia/gcc-ia16)（虽然我不知道它对 16 位 x86 生态系统中使用的各种内存模型和调用约定的支持有多完善。）

4.  如果你想要一些能让你在古老的硬件上运行 IDE 和编译器的东西，[Pacific C](http://www.ibiblio.org/pub/micro/pc-stuff/freedos/files/distributions/1.1/repos/devel/pacificc.zip)编译器和 IDE 将 286 CPU 列为最低要求，但也可以在[DOSEMU](https://en.wikipedia.org/wiki/DOSEMU)中运行，以便轻松集成到基于 Linux 的构建自动化中。

5.  这里有一些其他免费的 DOS C 编译器，尽管它们缺乏 DJGPP 和 OpenWatcom 所拥有的庞大生态系统：

    *   [CC386](http://www.ibiblio.org/pub/micro/pc-stuff/freedos/files/devel/c/cc386/420/)
    *   [DeSmet C](http://www.desmet-c.com/)
    *   [开发86](http://v3.sk/~lkundrak/dev86/)
    *   [橙色 C/C++ 编译器](http://ladsoft.tripod.com/orange_c_compiler.html)

您可能还想在您构建的 EXE 文件上运行[UPX](https://upx.github.io/)压缩器，这样您就可以在您制作的任何软盘映像上拥有更多可用空间。`--8086`（如果您的目标是 386 之前的东西，请不要忘记运行它。 ）

它[能够](https://en.wikipedia.org/wiki/UPX#Supported_formats)压缩 EXE、COM 和 SYS 文件，并且使用这种可执行压缩在当时很常见。

（然而，UPX 不压缩的三种主要格式中的两种是 OS/2 和 Windows 3.1 可执行文件。鉴于[LxLite](http://www.edm2.com/index.php/LxLite)无法与 OpenWatcom 生成的 EXE 兼容，我仍在寻找最好的选择。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-26T18:37:20.877

用于 DOS 的 Turbo C 编译器非常棒，而且是免费软件。

官网链接 [http://edn.embarcadero.com//article/20841](http://edn.embarcadero.com//article/20841)

还有Microsoft QuickC，但我不知道找到它有多难。

或者 Watcom C，但我不知道他们的 OpenWatcom 版本是否适用于 DOS

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-10T10:49:22.130

我已经安装了编译器并且它工作成功，如果你想要这里的 ova 是链接 [MS-DOS ova 和 C 编译器](http://www.mediafire.com/download/c4ehj0n48mido81/MS-Dos_6.22_WITH_C_COMPILER.ova)

打开编译器：

```
cd TC

TC 
```

就是这样！您可以编写C并编译。最好的部分是您可以不受任何限制地处理寄存器和内存。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-26T18:39:26.000

您可能想尝试[Open Watcom](http://www.openwatcom.org/index.php/Download)或[Borland Turbo 系列](http://edn.embarcadero.com/article/20841)。还有其他选择，但最好的是那两个恕我直言。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-26T18:38:42.897

Open Watcom 有一个可以在 DOS 上运行的 C 编译器：[Open Watcom](http://www.openwatcom.org/index.php/Main_Page)

您可以保存它，然后用它创建一个虚拟软盘：[virtual floppy how to](http://www.petri.co.il/virtual-floppy-disks-vmware.htm)

这应该让您将其安装在您的虚拟机上。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-10-09T11:16:55.640

Borland C++ 4.53 是最有能力的，因为它可以从几个 IDE（一个 DOS 或 Windows IDE）输出 DOS（在所有内存模型中）和 Windows 3.1 和 95 可执行文件。它包括命令行工具，但同样，它必须托管在 PC 平台或类似 DOSBox 的平台上。

这个 Borland C 4 的原始包相当庞大，但并不像 Borland C++ 3.1 附带的文字书架那么疯狂。Borland C++ 3.1 很可能是历史上最重*和*最大的零售商业软件产品盒。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-26T18:37:12.373

这里有许多编译器：

[http://www.compilers.net/dir/free/compilers/ccpp.htm](http://www.compilers.net/dir/free/compilers/ccpp.htm)

非常具体地说，我已经将“Pacific C”用于几个不同的有趣项目，我对易用性和整体兼容性感到满意。

我能够找到一个新的下载 URL：

[http://www.ibiblio.org/pub/micro/pc-stuff/freedos/files/devel/c/pacific/](http://www.ibiblio.org/pub/micro/pc-stuff/freedos/files/devel/c/pacific/)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-02-26T18:42:38.953

您可能想看看[FreeDOS](http://www.freedos.org)，它包含一套开发工具。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2013-02-26T18:44:33.733

Embarcadero Technologies 不久前发布了免费的 Borland C++ 编译器。遗憾的是没有 IDE，只有命令行工具。

# c++ - 从“int”类型的表达式中获取“std::istream&”类型引用的无效初始化

> ID：15096612
> 
> 赞同：-1
> 
> 时间：2013-02-26T18:30:53.543
> 
> 标签：c++, compiler-errors, istream

我正在尝试创建一个使用有理数并对它们执行运算符重载的类。我在程序的一部分上遇到问题，即输入流。

例如，我应该以“12/8”格式输入，它应该将 12 存储到变量 a 中，然后将 8 存储到变量 b 中。

这是我的代码：

```
istream& operator>>( istream& In, Rational& Item )
{
    char division_sign;
    int a,b;

    In >> a >> division_sign;
    if (division_sign != '/' || !In.good())
    {
        In.setstate( ios::failbit );
    }
    else
    {
        In >> b;
        if (b != 0 || !In.good())
        {
        return Item.numerator_ = a, Item.denominator_ = b;
        }
    }
} 
```

这是我收到的错误：

```
In function 'std::istream& operator>>(std::istream&, Rational&)':
131: error: invalid initialization of reference of type 'std::istream&' from expression of type 'int' 
```

`Line 131`是`return`声明

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T18:33:47.527

您观察到的编译错误是由于您尝试返回已放入声明中的另一种类型的值。您需要返回`In`而不是`b`：

```
return In; 
```

因此，您应该`istream`在函数执行路径的任何可能分支中返回对象引用。也就是说，只将一个这样的 return 语句放在函数的末尾。

另请查看有关运算符重载的[常见问题解答。](https://stackoverflow.com/q/4421706/1025391)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T19:19:48.853

您的代码有几处问题。首先，您必须 return `In`，并且仅`In`作为您在函数中做的最后一件事；`return In;`应该是函数的最后一行，并且函数中不应该有*其他*返回。其次，您在没有验证输入是否成功的情况下访问（如果输入已经失败，则`division_sign`不应设置）。`failbit`

粗略地说，像下面这样的东西应该可以解决问题：

```
char separator;
int nominator;
int divisor;
in >> nominator >> separator >> divisor;
if ( in && separator != '/' ) {
    in.setstate( std::ios_base::failbit );
}
if ( in ) {
    item  = Rational( nominator, divisor );
}
return in; 
```

您可能需要在读取除数之前检查分隔符，这样如果错误就不会再提取任何字符。（另一方面，您已经提取了一个完整 `int`的 ，因此无论如何客户端都将很难继续。）

# networking - 无法连接到 SQL Azure

> ID：15096614
> 
> 赞同：0
> 
> 时间：2013-02-26T18:30:59.227
> 
> 标签：networking, azure-sql-database

我正在尝试从我的工作网络连接到 sql azure db。我的工作网络允许我连接到我家用机器上的 sql server：1443。但是对于 sql azure 连接，我有这个。

```
===================================

Cannot connect to vx9jyb8***.database.windows.net.

===================================

A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) (.Net SqlClient Data Provider)

------------------------------
For help, click: http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=53&LinkId=20476

------------------------------
Error Number: 53
Severity: 20
State: 0

------------------------------
Program Location:

   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, SqlConnection owningObject)
   at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnection owningObject)
   at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(String host, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, Int64 timerStart)
   at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.SqlServer.Management.SqlStudio.Explorer.ObjectExplorerService.ValidateConnection(UIConnectionInfo ci, IServerType server)
   at Microsoft.SqlServer.Management.UI.ConnectionDlg.Connector.ConnectionThreadUser() 
```

我的 IP 添加到 Azure 门户中允许的 IP 地址。我还创建了规则 1.1.1.1-255.255.255.255

平是：

```
C:\Users\UName>ping vx9jyb8***.database.windows.net

Pinging data.bl2-1.database.windows.net [168.62.47.---] with 32 bytes of data:
Reply from 168.62.47.---: bytes=32 time=61ms TTL=108
Reply from 168.62.47.---: bytes=32 time=51ms TTL=108
Reply from 168.62.47.---: bytes=32 time=49ms TTL=108
Reply from 168.62.47.---: bytes=32 time=49ms TTL=108

Ping statistics for 168.62.47.---:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 49ms, Maximum = 61ms, Average = 52ms 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:42:24.293

嗯，这是一个非常简单的事情，但不确定你是否尝试过。创建门户 Azure 规则以释放您的 IP 或网络。

如果问题仍然存在并报告更多数据，我们可以为您提供帮助。

问候， 马孔德斯·亚历山大

# c# - 获取命名空间内属性的值

> ID：15096621
> 
> 赞同：1
> 
> 时间：2013-02-26T18:31:26.963
> 
> 标签：c#, xml, linq, linq-to-xml, xml-namespaces

我正在尝试处理以下 XML：

```
<rif:Rif xmlns:rif="rif" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" rif:numeroRif="XYZXYZXYZ">
    <rif:Nombre>Nombre</rif:Nombre>
    <rif:AgenteRetencionIVA>SI</rif:AgenteRetencionIVA>
    <rif:ContribuyenteIVA>SI</rif:ContribuyenteIVA>
    <rif:Tasa />
</rif:Rif> 
```

我正在使用下一个代码：

```
XDocument doc = XDocument.Parse(result);
var q = from item in doc.Descendants()
        let attributeType = item.Attribute("AgenteRetencionIVA").Value
        select item; 
```

我在获取属性时遇到问题`rif:AgenteRetencionIVA`。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:34:15.700

看起来你需要指定自定义命名空间：

```
string xml = @"...";

XName nameRif = "rif";
XDocument doc = XDocument.Parse(xml);

var q = from item in doc.Descendants()
        let attributeType = item.Attribute(nameRif + "AgenteRetencionIVA")
        select item.Value;
var a = q.ToArray(); 
```

# smartgwt - SmartGWT 选项卡集在窗口中的高度

> ID：15096622
> 
> 赞同：0
> 
> 时间：2013-02-26T18:31:27.883
> 
> 标签：smartgwt

我正在尝试`TabSet`在`Window`. 我希望窗口适合内容，所以我打开`autoSize`了就像我对许多其他窗口所做的那样。窗口具有我想要的最小宽度和高度。我的问题是`TabSet`in`Window`没有完全填满高度。

这是我的设置：

```
public MyWindow()
{

  setHeight(MIN_HEIGHT);
  setWidth(MIN_WIDTH);

  setAutoSize(true);

  theTabSet = new TabSet();
  theTabSet.setTabBarPosition(Side.TOP);
  theTabSet.setWidth100();
  theTabSet.setHeight100();

  // I need to set this for it to at least display the contents
  theTabSet.setPaneContainerOverflow(Overflow.VISIBL E);
  theTabSet.setOverflow(Overflow.VISIBLE);

  //This seems to solve my issue buy I think I shouldn't be doing this.
  theTabSet.setMinHeight(WINDOW_HEIGHT);

  Tab tab1 = new Tab("first");
  tab1.setPane(getFirstTab());

  Tab tab2 = new Tab("second");
  tab2.setTab(getSecondTab());

  addItem(theTabSet);

 }

  private Layout getFirstTab(){
   if(theFirstTab == null){
     theFirstTab = new VLayout();
     theFirstTab.setWidth100();
     theFirstTab().setHeight100();
   }
     return theFirstTab;
 } 
```

如果我遗漏了什么，请告诉我。根据[布局](http://www.smartclient.com/smartgwt/javadoc/index.html)API：

> 与其他 Canvas 子类一样，Layout 和 Stack 组件可能具有 % 宽度和高度值。要创建占据整个页面（或整个父组件）的动态调整大小的布局，请将宽度和高度设置为“100%

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:25:07.847

```
theTabSet.setMinHeight(WINDOW_HEIGHT); 
```

似乎是要走的路。窗口设置为适合其内容，布局设置为填充画布。窗口知道最小高度和宽度，但最初布局不知道。所以我们需要手动设置。

# iphone - 将 iphone 应用程序转换为 iPad、iOS？

> ID：15096624
> 
> 赞同：1
> 
> 时间：2013-02-26T18:31:36.760
> 
> 标签：iphone, ios, xcode, ipad, universal

我目前有一个 iOS iPhone 应用程序。

我想做的是让它通用，这样我也可以瞄准 iPad。

我所做的是转到目标并将 iOS 应用程序目标从 iPhone 更改为通用。

现在，当我在 iPad 上运行应用程序时，它会自动调整 iPad 的所有视图的大小。

但是有一些观点，背景图片看起来不太好，因为我需要使用更高分辨率的图片，或者一般我应该在 iPad 版本中更改一些东西。

iPad .nib 文件在哪里？？？我的意思是，我只看到 iPhone 的。当我在我的 iphone 上运行它时，会使用这些文件。当我在我的 iPad 上运行它时，一切都正确调整了大小，但是这些 .nib 文件到底在哪里？

我阅读的教程（相当旧）建议，当您也以 iPad 为目标时，应该为 ipad 创建新的 .nib 文件。为什么我看不到这些文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:41:44.627

您可以让 iOS 根据扩展自动加载正确的 xib，类似于 Retina 图形的工作方式。如果您的 xib 命名为`Awesome`，并且您想将其转换为具有 iPhone*和*iPad 版本（而不是共享，重命名它：

iPhone版本：

```
Awesome~iphone 
```

iPad版：

```
Awesome~ipad 
```

然后，当你告诉 iOS 加载时`Awesome`，它会根据当前平台自动选择加载哪一个。您的代码中不需要`if`语句！如果你*愿意*，你仍然可以，但这不是必需的。

*注意*：您可能需要在重命名后执行清理！有时某些文件在重命名时会保留在构建中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:36:26.540

您只需要创建新的 .xib 文件并将它们设置为同一个类，您就可以使用以下条件初始化该 viewController：

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
     yourVC = [[YourViewController alloc] initWithNibName:"YourViewController_ipad" andBundle:nil];
}
else
{
    yourVC = [[YourViewController alloc] initWithNibName:"YourViewController" andBundle:nil];
} 
```

只要有可能，您应该尝试使用相同的 .xib，但在很多情况下，这样做是不可能的并且看起来不错，所以您只需再做一次。Xcode 不会自动为您执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T18:38:23.107

假设你有一堂课。我们会调用它`Two`。

以下是构成`Two`该类的当前文件。

```
Two.h
Two.m
Two.xib 
```

`Two.xib`包含`UIView`适用于 iPhone 的尺寸。为了制作适合 iPad 大小的视图，您应该创建一个新的 XIB 文件（将其命名`Two_iPad.xib`），将 XIB 连接到`Two`，调整iPad 的大小，并进行相应的设计`UIView`。`Two_iPad.xib`

创建 的新实例时`Two`，请执行以下操作。

```
Two *two;

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    //they are using an iPad

    two = [[Two alloc] initWithNibName:@"Two_iPad" bundle:nil];

} else {
    //they are using an iPhone/iPod Touch

    two = [[Two alloc] initWithNibName:@"Two" bundle:nil];

} 
```

您正在创建`Two`;的新实例 但是，您正在检查用户拥有的设备，并使用相应的 XIB 文件。

# wcf - 从同一解决方案中引用 Wcf Tcp 服务

> ID：15096626
> 
> 赞同：1
> 
> 时间：2013-02-26T18:31:45.513
> 
> 标签：wcf, nettcpbinding, service-reference

我正在完成演练“如何：在从 Windows 窗体调用 WCF 中将 netTcpBinding 与 Windows 身份验证和传输安全性结合使用”

[http://msdn.microsoft.com/en-us/library/ff647180.aspx](http://msdn.microsoft.com/en-us/library/ff647180.aspx)

当我进入“步骤 7：创建测试客户端应用程序”和子步骤 5：“5.在添加服务引用对话框中，将服务 URI：设置为 net.tcp://localhost:8523/WCFTestService，然后单击执行"

我得到“无法识别 URI 前缀。元数据包含无法解析的引用”。

就好像“添加服务引用”无法识别“net.tcp”绑定一样。

我在使用 Visual Studio 2012 的 Windows 7 x64 上，我的项目针对 x86 和 Framework 4.5。

我找到了这个线程

[MSDN 演练中的错误-“如何：使用 TCP 在 Windows 服务中托管 WCF”](https://stackoverflow.com/questions/12761107/an-error-in-the-msdn-walk-through-how-to-host-wcf-in-a-windows-service-using)

但是当客户在同一个解决方案中时，他们没有问题。我是。

服务配置：

```
 <system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior name="Publisher.MyServiceBehavior">
                <serviceMetadata httpGetEnabled="false" httpsGetEnabled="false" />
                <serviceDebug includeExceptionDetailInFaults="false" />
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <services>
        <service name="POC_WcfTcpSubscribePublishService.Publisher">
            <endpoint address="" binding="netTcpBinding" bindingConfiguration=""
                name="NetTcpBindingEndpoint" contract="POC_WcfTcpSubscribePublishService.IPublisher">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
            <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration=""
                name="MexTcpBindingEndpoint" contract="IMetadataExchange" />
            <host>
                <baseAddresses>
                    <add baseAddress="net.tcp://localhost:8523/WcfTcpSubscribePublish" />
                </baseAddresses>
            </host>
        </service>
    </services>
</system.serviceModel> 
```

欢迎任何指点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:18:54.873

你有一个服务行为：Publisher.MyServiceBehavior

但是您不会将该服务行为应用于您的服务。在 service name="..." 之后执行此操作：

行为配置="Publisher.MyServiceBehavior"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T17:27:56.550

必须先运行该服务，然后才能添加对其的引用。

您可以从解决方案资源管理器中的上下文菜单单独运行服务项目。

# java - 使用 Java Semaphore 类的漏桶式速率限制

> ID：15096630
> 
> 赞同：2
> 
> 时间：2013-02-26T18:31:59.090
> 
> 标签：java, semaphore, throttling

我正在考虑使用 Java类实现与[漏桶算法](http://en.wikipedia.org/wiki/Leaky_bucket)`Semaphore`非常相似的东西，并且想知道它是否适合。目标是限制对共享资源的写入速率，我将有一个线程定期向信号量释放一些许可，并且一组工作线程试图获取与他们想要的项目大小一样多的许可来写。

我担心的是是否在幕后`Semaphore`使用单个实现`int`，或者它的空间使用是否与活动许可的数量成线性关系（使用某种许可队列等实现）。如果空间（因此时间）是线性的，那么我显然想避免谈论以字节为单位的速率。如果它只是一个`int`，除了非常高的费率溢出之外，我应该没有这样的担忧（在这种情况下，我想要一个`long`-backed `Semaphore`）

有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:43:14.220

从[http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html)：

> 没有使用实际的许可对象；Semaphore 只是对可用数量进行计数并采取相应措施。

我检查了源代码，它确实由`int`（不是 a `long`）支持。

# sql-server - 如何从两个表中创建视图或表，以便它们的行不合并？

> ID：15096632
> 
> 赞同：0
> 
> 时间：2013-02-26T18:32:07.510
> 
> 标签：sql-server

我有两个视图，我想将它们合并到一个视图中，这样它们的记录就不会合并到一个记录中！我的意思是假设我有这些表：

表一（假设这是一张卖表，我们的客户卖了东西！）

```
 Date           Description           Fee       Number        Money           
12/2/2012        something             10$        20          200$
10/3/2012      somethingelse           20$        30          600$ 
```

表二（假设这是我们的客户赚钱的表！）

```
 Date           Description           Money           
02/8/2012        someinfo              5000$
12/1/2012         stuff                3100$ 
```

结果表或视图将是（基于日期的降序）：

```
 Date           Description           Fee       Number        Money  
02/8/2012        someinfo               0          0           5000$    
10/3/2012      somethingelse           20$        30           600$
12/2/2012        something             10$        20           200$
12/1/2012         stuff                 0          0           3100$ 
```

我怎样才能实现这种形式？这两个表是分开的，但每个表都有一个唯一的个人 ID，代表销售员帐户。（所以基本上这意味着这些信息只属于一个人。我们的客户想要一份只给他这个特定视图的报告！）我尝试在这两个表上使用 UNION，但是合并的行！如果我使用联接，则只有一行将两个表行合并在一起。所以我被困在这里，不知道现在该怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:36:05.557

我认为应该这样做。

```
CREATE VIEW new_view AS

SELECT * FROM table_one

UNION ALL

SELECT *, 0 as Fee, 0 as Number FROM table_two; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T18:36:13.443

我认为你需要 UNION ALL 而不仅仅是 UNION。

```
select Date, Description, Fee, Number, Money
from table1
    UNION ALL
select Date, Description, 0 Fee, 0 Number, Money
from table2
order by Date 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T18:36:42.353

尝试类似的东西

```
CREATE VIEW vMyView
AS
SELECT [Date], [Description], [Fee], [Number], [Money]
FROM v1
UNION ALL
SELECT [Date], [Description], 0 AS [Fee], 0 AS [Number], [Money]
FROM v2 
```

# assembly - 汇编如何在操作系统上工作？

> ID：15096635
> 
> 赞同：7
> 
> 时间：2013-02-26T18:32:16.887
> 
> 标签：assembly, operating-system

如果内核控制了系统，汇编语言如何工作？

汇编语言被引入作为计算机“理解”的助记符和各种宏的集合，以使某些任务更容易。

如果汇编程序不向操作系统发出请求就无法控制 CPU 和内存，它如何控制 CPU 和内存？

例如，如果我想做指令`mov ax, #4`，我是否需要我的程序向操作系统发送请求才能这样做？

我真的很好奇...

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T18:45:29.377

CPU 具有协助操作系统保护资源的机制。让我们使用您的 x86 芯片示例。“通用”寄存器，例如`eax`，不受保护。但是调试寄存器，例如`DR0`，是。

当操作系统运行时，CPU 在“ring 0”或人们称之为“系统模式”的通用术语中执行。这些程序在 x86 上运行“ring 3”，也就是人们所说的“用户模式”。

当执行从 ring 3 变为 ring 0 时（稍后将详细介绍如何完成），CPU 将放弃用户模式的保护。这就是允许操作系统更改调试寄存器的原因。

但是，操作系统保护的主要内容是内存位置和设备输入/输出。出于这个原因，`in`and`out`指令是特权的，并且可能不会在 ring 3 处执行。

内存通过 TLB 保护，TLB 还用于定义对用户模式进程可见的虚拟内存 (VM) 地址范围。正是这张表控制了每个进程可见的内存空间。TLB 本身存储在内存中，只有 ring 0 操作系统可以修改。类似地，中断向量和任何内存映射设备都分配给只有操作系统可以访问的内存范围。

例如，当您执行时，`mov [eax], 3`将在 TLB 中查找 eax 引用的地址。CPU 根据 TLB 中的访问位（例如 NOEXEC 位）确定指令是否合法地访问内存。

当操作系统调度程序交换进程时，通用寄存器`eax`将保存在操作系统维护的每个线程内存区域中。切换到的线程从其先前寄存器值的内存映像中恢复。

如果操作系统干扰每条机器指令，计算机会非常慢。特别是，应尽可能快地保持对通用寄存器的访问。内存访问的 TLB 查找被缓存并且不比内存访问本身慢。

To switch from ring 3 to ring 0, a software interrupt is generated. This is the "system call" interrupt. Interrupts run at ring 0, and are configured before the first process begins, by the OS. The system call interrupt transfers control to the OS code. When execution returns from the interrupt service routine, the CPU is returned to ring 3.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T18:35:31.847

您的程序可以运行它想要的任何指令，只要它不访问其[ring](http://en.wikipedia.org/wiki/Ring_%28computer_security%29)之外的资源/内存。如果是这样，它将产生一个错误（分段违反或一般保护）并被内核杀死。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T18:43:41.003

汇编语言只是一种编程语言，如 C 或 Pascal 之类的。为了让程序无论是什么语言都能执行，在计算机上运行的程序必须是该计算机的机器代码。许多/大多数语言要么像汇编语言那样被汇编，要么像高级语言那样被编译成目标系统的机器代码。一些语言（Java、Python 和 Pascal）被编译为中间语言，这也是一种机器代码，但随后在运行时由以某种语言编写的程序解释，该程序编译为机器代码。所以这里再次机器代码在机器上运行。

无论您在谈论什么语言，系统调用都是系统调用和内存限制以及其他操作系统施加的限制。因此，无论是 C 语言还是汇编语言，您都可以进行系统调用以打开文件或将一些内容打印到终端或其他任何东西。

# java - JAX-RS Cookie 响应未显示在浏览器中

> ID：15096641
> 
> 赞同：8
> 
> 时间：2013-02-26T18:32:58.533
> 
> 标签：java, javascript, rest, jakarta-ee, cookies

我正在使用 Rest 响应在客户端设置 cookie。但是当我在 Chrome 中打开“资源”时，我看不到设置的 cookie。但有趣的是，当我转到 chrome 设置并检查所有 cookie 时，我找到了我正在设置的 cookie。同样，w3schools 的 getCookie() javascript 函数（或处理所有可能性的更好版本）什么也没给我。我试过firefox，同样的事情发生了。当我看到所有 cookie 时，我看到了我的 cookie，但是 JS 函数 getCookie() 没有返回任何东西。我认为 cookie 设置不正确。

这是我的 JAX-RS 响应：

```
    Cookie c1 = 新 Cookie(Constants.SESSION_TOKEN, 响应
                .getSessionToken().getValue());

        Cookie c2 = 新 Cookie(Constants.USER_IDENTIFIER,
                response.getUserIdentifier());

        NewCookie cookie1 = 新的NewCookie(c1);
        NewCookie cookie2 = 新的 NewCookie(c2);

        返回 Response.ok(jsonResponse, MediaType.APPLICATION_JSON)
                .cookie(cookie1,cookie2).build();

```

这是我的 JS getCookie() 函数

```
    函数 getCookies() {
        var c = document.cookie, v = 0, cookies = {};
        if (document.cookie.match(/^\s*\$Version=(?:"1"|1);\s*(.*)/)) {
            c = 正则表达式.$1;
            v = 1;
        }
        如果（v === 0）{
            C
                    。分裂（/[，;]/）
                    。地图（
                            功能（饼干）{
                                var parts = cookie.split(/=/, 2), name = decodeURIComponent(parts[0]
                                        .trimLeft()), value = parts.length > 1 ？decodeURIComponent(部分[1]
                                        .trimRight())
                                        ： 无效的;
                                饼干[名称] = 价值；
                            });
        } 别的 {
            C
                    。匹配（
                            /(?:^|\s+)([!#$%&'*+\-.0-9A-Z^`az|~]+)=([!#$%&'*+\-.0 -9A-Z^`az|~]*|"(?:[\x20-\x7E\x80\xFF]|\\[\x00-\x7F])*")(?=\s*[,; ]|$)/g)
                    。地图（
                            函数（$0，$1）{
                                var name = $0, value = $1.charAt(0) === '"' ? $1
                                        .substr(1, -1).replace(/\\(.)/g, "$1")
                                        : $1;
                                饼干[名称] = 价值；
                            });
        }
        返回 cookie；
    }
    函数getCookie（名称）{
        返回 getCookies()[名称]；
    }

```

![在此处输入图像描述](../Images/50c9129280608f65938db4f645bb1bfc.png) ![在此处输入图像描述](../Images/f879110b88abdb1bd4a7ed9acbe7d1dd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-19T13:54:54.550

那很奇怪。我试图重现您的问题，但一切正常：

```
import javax.ws.rs.core.Cookie;
import javax.ws.rs.core.NewCookie;
import javax.ws.rs.core.Response;

@GET
@Path(value = "/test")
public Response test() {
    NewCookie c = new NewCookie("name1", "value1");
    Cookie cookie = new Cookie("name2", "value2");
    NewCookie c2 = new NewCookie(cookie);
    return Response.ok("response1").cookie(c, c2).build();
} 
```

`curl -i $URL`给我：

```
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Server: Apache-Coyote/1.1
Set-Cookie: name1=value1; Version=1
Set-Cookie: name2=value2; Version=1
Date: Thu, 19 Sep 2013 13:52:43 GMT
Content-Type: application/json
Content-Length: 13

["a","b","c"] 
```

cookie 也出现在 Chrome 的资源中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-24T19:21:50.583

不知道为什么你的函数没有得到你的 cookie 信息，但我可能知道为什么它没有出现在你的浏览器中。

它帮助我记住，您需要访问为浏览器设置 cookie 的特定路径才能在控制台中显示 cookie。

在上面的示例中，请确保访问“路径：”部分中显示的 url。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-24T11:45:25.670

对于有人登陆这个问题。

当域或路径值设置不正确时会出现此问题

使用以下代码段设置路径和域

```
NewCookie cookie = new NewCookie("cookie-name", "cookie-value,"/", "", "cookie description", 1000000, false); 
```

例如，在您的浏览器中，您应该在设置后看到这些值

```
Set-Cookie:x-auth-cookie=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJtbTMiLCJhdWRpZW5jZSI6IkJST1dTRVIiLCJjcmVhdGVkIjoxNDg1MjU4MDcwMzQ2LCJyb2xlcyI6WyJBRE1JTiIsIlRFQUNIRVIiXSwiZXhwIjoxNDg2MjU4MDcwfQ.TM6oiCsOXh2zNou00H-5tkafAj40AngkbrCA62Vdyi5si_5hZFdmZFfitmK_bgRJexmFC49KlpAaRzGJF8bvMQ;Version=1;Comment="cookie description";Domain=;Path=/;Max-Age=1000000 
```

# google-apps-script - 如何为 decoratedPopupPanel 添加样式？

> ID：15096657
> 
> 赞同：4
> 
> 时间：2013-02-26T18:33:49.207
> 
> 标签：google-apps-script

我有这个创建装饰弹出面板的代码：

```
 ...
  var x = 600;
  var y = 150+row*23;
  var popPanel = app.createDecoratedPopupPanel().setStyleAttributes({background:'#FFFFDD',padding:'15px'}); 
  var message = app.createHTML("Opération non reversible !!<BR>Il faudra 'rafraichir' votre navigateur<BR>"+
  "après vous être effacé du planning (case ✖)<BR>pour voir les données à jour").setPixelSize(300,60).setStyleAttributes({background:'#FFFFDD',padding:'15px'}); 
  popPanel.add(message); 
  popPanel.setAnimationEnabled(true);
  popPanel.setPopupPosition(x, y);
  popPanel.setAutoHideEnabled(true);
  popPanel.show();// I didn't chain the commands to make it easier to test by commenting one or another...
return app;
} 
```

它给出了这个结果：

![在此处输入图像描述](../Images/20d5de072ae660eb250e4bccf2683e05.png)

**我的问题是：** 知道背景属性决定了周围区域（弹出面板填充 15px）并且内部小部件也有它的背景颜色（以及它自己的填充），**我怎样才能改变这个蓝色框架的颜色？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:39:34.490

看来装饰**不能在 GAS 中重新装饰。我也想知道这一点（在使用装饰标签面板时）。我得出结论，这是不可能的。我使用了 Chrome 检查器，发现蓝色部分实际上是一组图像。所以这不是一个简单的 CSS 修复。

[这个线程](http://productforums.google.com/forum/#!topic/apps-script/pGMGc7rC6QA)似乎有最终判决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:48:36.447

感谢其他答案的链接（指向[James Ferreira 的网站](https://sites.google.com/site/scriptsexamples/learn-by-example/other-examples/gs-interactive)），我能够构建这个更容易定制的新代码......

结果如下：

```
 ...
  var x = 600;
  var y = 150+row*23;
  var popPanel = app.createPopupPanel().setStyleAttributes({background:'#ccccaa',padding:'5px', borderRadius:'15px 15px 15px 15px',borderColor:'#ffffdd',borderWidth:'5px'}); 
  var message = app.createHTML("Opération non reversible !!<BR>Il faudra 'rafraichir' votre navigateur<BR>"+
  "après vous être effacé du planning (case ✖)<BR>pour voir les données à jour").setPixelSize(300,60).setStyleAttributes({padding:'5px'});  
  popPanel.add(message); popPanel.setAnimationEnabled(true).setPopupPosition(x, y).setAutoHideEnabled(true).show();
return app;
} 
```

![在此处输入图像描述](../Images/371a6f125679a2cc29aeb5f0b46c7369.png)

`borderRadius:'px px px px'`可以在任何小部件上使用，也可以使用漂亮的按钮;-)

![在此处输入图像描述](../Images/4f525335fbbab6037cb96db1f8e7f260.png)

# javascript - 如何使用 jQuery Mobile 制作简单的文本字段验证和按钮以转到下一页？

> ID：15096658
> 
> 赞同：2
> 
> 时间：2013-02-26T18:34:03.283
> 
> 标签：javascript, jquery-mobile

这就是我得到的，但如果在文本框中添加了正确的文本，我无法获得加载另一个页面的正确方法。有人可以帮我获得正确的语法吗？

```
<script type='text/javascript'>//<![CDATA[ 
$(document).delegate('[data-role="page"]', 'pageinit', function () {

    var $submit = $(this).find('input[type="submit"]'),
    $text   = $(this).find('input[type="text"]');
    $text.bind('keyup', function () {
        if (this.value == 'llab') {
            $submit.button('enable');
        } else {
            $submit.button('disable');
        }
    }).trigger('keyup');
});
//]]> 

</script>
    </head>
    <body>
        <!-- Home -->
        <div data-role="page" id="page1">
            <div data-theme="a" data-role="header">
                <h3>
                    Uppgift 1
                </h3>
            </div>
            <div data-role="content">
                <p>
                    Uppgift nummer ett blir att ... 
                </p>
                <img src="https://maps.googleapis.com/maps/api/staticmap?center=Centralstationen, Göteborg&amp;zoom=14&amp;size=288x200&amp;markers=Centralstationen, Göteborg&amp;sensor=false" width="288" height="200" />
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <label for="pwtext">
                        </label>
                        <input name="passwordtext" id="pwtext" placeholder="" value="" type="text" />
                    </fieldset>
                </div>
                <input type="submit" data-theme="b" data-icon="check" data-iconpos="left" value="Ta dig vidare" id="sendbtn" name="sendbtn"/>
                <a data-role="button" data-theme="a" href="start.html" data-icon="home" data-iconpos="left">
                    Tillbaka till startsidan
                </a>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:21:04.000

**更新的答案：**

这是您的问题/问题的完整解决方案。

**标记：**

由成功登录后的登录页面（page1）和（page2）两个页面组成。

```
<!-- Start of first page -->
<div data-role="page" id="page1">

<div data-role="header">
<h1>page1 header</h1>
</div><!-- /header -->

<div data-role="content">   
<p>enter password</p>
<form id="login" action="" method="">
<input name="pwtext" id="pwtext" placeholder="" value="" type="text" class="required" />
<input type="submit" data-theme="b" data-icon="check" data-iconpos="left" value="Ta dig vidare" id="sendbtn" name="sendbtn" />
    </form>

</div><!-- /content -->

<div data-role="footer">
<h4>Page1 Footer</h4>
</div><!-- /footer -->
</div><!-- /page -->

<!-- Start of second page -->
<div data-role="page" id="page2">

<div data-role="header">
<h1>Bar</h1>
</div><!-- /header -->

<div data-role="content">   
<p>password accepted</p>        
<p><a href="#page1">Back to page1</a></p>

</div><!-- /content -->

<div data-role="footer">
<h4>Page2 Footer</h4>
</div><!-- /footer -->
</div><!-- /page --> 
```

**如果密码正确，则验证密码并重定向到下一页。**

```
$("#login").submit(function() {

var emptyFields = $(":input.required").filter(function() {

    return !$.trim(this.value).length;
});

if(emptyFields.length) {

            $("#pwtext").css("background-color", "#ffff76");
            $("#pwtext").attr("placeholder", "Passeword required!");
    return false;
}
if ($('#pwtext').val() != 'omar') {
    $("#pwtext").css("background-color", "#ffff76");
    $("#pwtext").attr("placeholder", "Passeword required!");
    return false;
}
if ($('#pwtext').val() == 'omar') {
    $.mobile.changePage("#page2", "slideup");
    return false;
 }
}); 
```

JSFiddle：[测试](http://jsfiddle.net/T9gtn/2/)

# objective-c - assetsLibrary 一个简单的错误？

> ID：15096662
> 
> 赞同：3
> 
> 时间：2013-02-26T18:34:24.497
> 
> 标签：objective-c

我真的迷路了。为什么我每次都得到 NSLog 两次`UIImage`？

```
 //------ get the images from the camera roll ----------
    assets=[[NSMutableArray alloc]init];
    NSMutableArray *cameraRollPictures=[[NSMutableArray alloc]init];
    ALAssetsLibrary *assetsLibrary = [[ALAssetsLibrary alloc] init];
    [assetsLibrary enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:^(ALAssetsGroup *group, BOOL *stop)
    {

        NSInteger numberOfAssets = [group numberOfAssets];
        NSLog(@"NUM OF IMAGES:%d",numberOfAssets);
        if (numberOfAssets > 0)
        {

            for (int i = 0; i <= numberOfAssets-1; i++)
            {

                [group enumerateAssetsAtIndexes:[NSIndexSet indexSetWithIndex:i] options:0 usingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop)
                 {
                    UIImage *thumbnail = [UIImage imageWithCGImage:[result thumbnail]];
                    [assets addObject:thumbnail];
                     NSLog(@"theObject!!!! -- (%d) %@",i,thumbnail);

            //******* for each i its here twice !!   ********

                }];
            }
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T19:08:09.160

出于某种原因，`enumerateAssetsAtIndexes`(and )在枚举结束时`enumerateAssetsUsingBlock`对块进行了额外的调用。如果您将 NSLog() 更改为`result == nil``index == NSNotFound`

```
NSLog(@"i=%d, index=%ld, result=%@", i, (unsigned long)index, result); 
```

然后你会得到输出

```
NUM OF IMAGES:2
i=0, index=0, result=ALAsset - Type:Photo, URLs:assets-library://asset/asset.PNG?id=...
i=0, index=2147483647, result=(null)
i=1, index=1, result=ALAsset - Type:Photo, URLs:assets-library://asset/asset.PNG?id=...
i=1, index=2147483647, result=(null) 
```

因此，您必须检查`result`并忽略一个`nil`值：

```
for (int i = 0; i <= numberOfAssets-1; i++) {
     [group enumerateAssetsAtIndexes:[NSIndexSet indexSetWithIndex:i] options:0 usingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop)
      {
          if (result != nil) {
              UIImage *thumbnail = [UIImage imageWithCGImage:[result thumbnail]];
              [assets addObject:thumbnail];
          }
      }];
} 
```

请注意，您可以将枚举简化为

```
[group enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) {
     if (result != nil) {
         UIImage *thumbnail = [UIImage imageWithCGImage:[result thumbnail]];
         [assets addObject:thumbnail];
     }
}]; 
```

# c# - 如何让用户输入 Value1 然后说 Value1 = Value2

> ID：15096663
> 
> 赞同：3
> 
> 时间：2013-02-26T18:34:27.430
> 
> 标签：c#, winforms, performance, linq

我知道这可以通过几乎无穷无尽的解决方案来完成。但我正在寻找最实用的方法。

我有很多次需要这种东西：

允许用户输入邮政编码，然后将邮政编码与预定义的状态相匹配。允许用户从 ComboBox 中选择国家名称，然后将国家名称与国家代码匹配。带有颜色的名称，带有价格的物品，带有时间的位置，我可以继续。

到目前为止，我有几种方法是

1 如果是：

```
if (input = Value1) { Something = Value1_OtherValue; }
else if (input = Value2) { Something = Value2_OtherValue; }
else if (input = Value2) { Something = Value3_OtherValue; }
else { Messagebox.Show("Error - No Match");} 
```

2、使用数据库：

```
@"Select Value_OtherValue FROM Table Where ValueList = '"+ Input +'";
DataSet DS = new DataSet();
SQLiteDataAdapter DA = new SQLiteDataAdapter(cmd);
DA.Fill(DS);
con.Close();
DataTable DT= DS.Tables[0];
if (DT.Rows.Count > 0)
{
    Something = DT.Rows[Dt.Rows.Count - 1][0].ToString());
}
else { Messagebox.Show("Error - No Match Found"); } 
```

并使用字符串或拆分连接或许多其他字符串操作来提取值现在这些列表永远不会是数千或数百万可能在绝对最大一千个值对时，我可以想象一个带有分隔符的列表，一个数组，使用LINQ 一些方法将是最实用的方法，但我就是想不通如何启动这种代码。

我知道我几乎需要一个数据库，但如果我要使用任何类型的数据库类型对象，这将是将它添加到应用程序的唯一原因，我将没有其他用途的数据库，它只会是最多每 4 或 5 个月更换一次。因此，在这种情况下，添加数据库似乎是矫枉过正。

基本上我有值对，当给出相反的值时我想使用匹配值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:40:39.220

SQLite 通常是人们用于小型数据库解决方案的工具。每当我有一些我不想在解决方案中硬编码的值（或者太多以至于在配置文件中不实用）时，我都会将它们放在一个小数据库中。通常只有几张桌子，没什么大不了的。如果你愿意，你甚至可以使用实体框架（有一个 SQLite EF 提供程序）。

这不是矫枉过正。拥有 MSDE 或需要 SQL Server 将是矫枉过正。SQLite 就是为此而生的。

# mysql - 未知的内部查询错误

> ID：15096664
> 
> 赞同：0
> 
> 时间：2013-02-26T18:34:27.587
> 
> 标签：mysql, sql, database

我有下面的脚本在内部查询中引发错误。我使用 Sequel Pro 并且只收到此错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的“SELECT Savings FROM OfferSuggestionHeader osh LEFT JOIN Projects p ON osh.OfferI”附近使用正确的语法

所以我不确定实际问题是什么。我尝试在内部查询中进行显式内部联接，以防`p`别名没有被正确引用/解释或类似的东西，但这没有积极影响。

```
SELECT SUM(osh.Savings) as YTD, 
   SUM (SELECT Savings
FROM OfferSuggestionHeader osh
LEFT JOIN Projects p
ON osh.OfferID = p.offer_id
WHERE p.uid = 1 AND p.current_status < 3) 
   AS "Open Savings"
FROM OfferSuggestionHeader osh
LEFT JOIN Projects p
    ON p.offer_id = osh.OfferID
WHERE p.uid = '1' 
```

任何帮助表示赞赏。最好的，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:41:39.650

我认为您可以更简单地将查询编写为：

```
SELECT SUM(osh.Savings) as YTD,
       SUM(case when p.current_status < 3 then Savings end) AS "Open Savings"
FROM OfferSuggestionHeader osh LEFT JOIN
     Projects p
     ON p.offer_id = osh.OfferID
WHERE p.uid = '1' 
```

也就是说，您可以用条件求和完全替换子查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:37:24.310

你不能求和（选择....）。

尝试这个

```
 SELECT SUM(osh.Savings) as YTD, 
       (SELECT SUM(Savings)
       FROM OfferSuggestionHeader osh
       LEFT JOIN Projects p
       ON osh.OfferID = p.offer_id
       WHERE p.uid = 1 AND p.current_status < 3) 
 AS "Open Savings"
 FROM OfferSuggestionHeader osh
 LEFT JOIN Projects p
 ON p.offer_id = osh.OfferID
 WHERE p.uid = '1' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T18:38:20.767

似乎可以通过以下方式简化`CASE`：

```
SELECT SUM(osh.Savings) as YTD, 
   SUM (CASE WHEN p.current_status < 3 THEN Savings ELSE 0 END) AS "Open Savings"
FROM OfferSuggestionHeader osh
    INNER JOIN Projects p
        ON osh.OfferID = p.offer_id
WHERE p.uid = 1 
```

此外，由于您将结果限制为 p.uid=1，因此不需要 `LEFT JOIN。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T18:39:11.573

问题是您正在对 SELECT 进行 SUM 而不是反之亦然。这应该有效：

```
SELECT SUM(osh.Savings) as YTD, 
    (SELECT SUM(Savings)
FROM OfferSuggestionHeader osh
LEFT JOIN Projects p
ON osh.OfferID = p.offer_id
WHERE p.uid = 1 AND p.current_status < 3) 
   AS "Open Savings"
FROM OfferSuggestionHeader osh
LEFT JOIN Projects p
    ON p.offer_id = osh.OfferID
WHERE p.uid = '1' 
```

# python - SSH 并在 Tkinter 中发送命令？

> ID：15096667
> 
> 赞同：0
> 
> 时间：2013-02-26T18:34:55.467
> 
> 标签：python, ssh, tkinter, tcl, expect

我正在尝试使用 Tkinter 将代码从 TCL 转换为 python。我想知道 Tkinter 中“spawn ssh”、“expect”和“send”的等效代码是什么？例如，我的简单 tcl 程序将类似于：

```
spawn ssh root@138.120.###.###
expect "(yes/no)?" {send -- "yes\r"}
expect "password" {send -- "thepassword\r"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:50:34.073

您可以尝试使用[pexpect](http://www.noah.org/wiki/pexpect)。

Expect 用于自动化其他命令行工具。

编辑：当然，您可以尝试`package require Expect`通过 Tkinter 执行，但是与纯 Tcl 脚本相比有什么好处呢？毕竟你写了 Tcl 代码，然后用 python 包装。

另一个编辑：Tkinter 用于从 python 访问 Tk（很酷的 GUI 工具包：P），它通过在某处调用 Tcl 命令来工作。因此，您可以将每个 tcl 程序转换为 python（当然，如果您安装了正确的 tcl 库）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T07:42:12.797

[pxpect](http://pexpect.sourceforge.net)有一个名为 pxssh 的模块，它可以完成操作简单 ssh 会话的大量工作。我发现这对于高度自动化来说是不够的，因此我将[远程](http://gethub.com/Telenav/python-remote)编写为一个附加组件来增加错误处理。

使用 pxssh

```
from pxssh import pxssh
p = pxssh()
p.login('host', 'user', 'password')
p.send('command') 
```

使用遥控器

```
from remote import remote
r = remote('host', 'user', 'password')
if r.login():
  r.send('command') 
```

我不确定 Tkinter 用例，我唯一的假设是您正在使用它来制作 gui，并且有很多教程。我之前使用过[http://sebsauvage.net/python/gui/](http://sebsauvage.net/python/gui/)，它比较了 Tkinter 和 wxPython。

# javascript - dijit 表单选择的行为不像 HTML SELECT

> ID：15096668
> 
> 赞同：3
> 
> 时间：2013-02-26T18:34:57.807
> 
> 标签：javascript, dojo

我正在使用 dijit.form.Select 作为 HTML SELECT 的替代品。我无法让它允许我像使用 HTML 版本那样纯粹通过键入来选择一个项目。即，如果您有美国各州的列表，您可以多次点击 C 来选择康涅狄格州。我错过了什么？TIA

然而，它可以在下面的网页上运行...... [http://archive.dojotoolkit.org/nightly/dojotoolkit/dijit/tests/form/test%5FSelect.html](http://archive.dojotoolkit.org/nightly/dojotoolkit/dijit/tests/form/test%5FSelect.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:41:04.317

在设计`select`与 UI 主题视觉一致的元素时，CSS 通常不足以完全控制`select`元素的外观，因为某些浏览器会以不同的方式处理选定元素上的 CSS 样式。因此，对许多人来说，下一个最好的事情是使用 javascript 开发一个虚假选择，这样你就有一个更好看的`select`元素。

你剩下的东西看起来像一个`select`元素，但实际上不是，真正的选择通常隐藏在附近。

这意味着很有可能当开发人员制作该`select`元素的 javascript 版本时，他们没有尽职尽责地至少编写 HTML 版本自带的最低功能。（毕竟，对`keyup`事件进行字符串搜索和排序需要大量工作......我并不惊讶他们没有这样做）

雪上加霜的是，有时该插件实际上允许本地选择上的更改事件仍然集中在表面之下，这就是您的打字有时有效的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T18:32:54.937

一个叫 Bob Tarling 的小伙子解决了我的问题。非常感谢鲍勃！有关他的解决方案，请参阅此链接[http://dojo-toolkit.33424.n3.nabble.com/Sharing-a-solution-for-type-ahead-in-Select-and-help-request-to-adapt-tt3995899。 html#无](http://dojo-toolkit.33424.n3.nabble.com/Sharing-a-solution-for-type-ahead-in-Select-and-help-request-to-adapt-tt3995899.html#none)

# clearcase - Clearcase 恢复 lost+found 文件夹元素

> ID：15096670
> 
> 赞同：3
> 
> 时间：2013-02-26T18:35:08.313
> 
> 标签：clearcase

在 Windows 服务器上运行 Clearcase 7.1.1.09。使用 CCRC 从 VOB 中删除了 Lost+found 目录元素。我仍然可以在 main/0 中看到 lost+found 目录。如何恢复 VOB 的 lost+found 目录元素？根据这篇文章[http://www-01.ibm.com/support/docview.wss?uid=swg21135672](http://www-01.ibm.com/support/docview.wss?uid=swg21135672)，无论这意味着什么，都无法删除 lost+found 目录元素。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:49:26.173

这意味着`/Vobs/MyVob/main/0`将始终包含`lost+found`.

您可能已经`ln`、重命名或移动`lost+found`了该 Vob 的更新版本（例如 /Vobs/MyVob/main/4），您始终可以：

```
cleartool co -nc /Vobs/MyVob
cleartool ln /Vobs/MyVob/main/0/lost+found /Vobs/MyVob/lost+found
cleartool ci -c "restore lost+found" /vobs/MyVob 
```

在 Windows 中：

```
cleartool startview aDynamicView
cleartool mount \MyVob
cd m:\aDynamicView\MyVob
cleartool co -nc .
cleartool ln .@@/main/0/lost+found ./lost+found
cleartool ci -c "restore lost+found" . 
```

在本例中，这将创建 Vob 根目录的第 5 个版本，其中再次引用该`lost+found`目录，从而有效地恢复它。

（如[this thread](http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14602551)所示，另见[`cleartool man ls`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_ln.htm)）

由于**`ln`sa CCRC 命令不可用**，因此您需要联系有权访问 CCRC 服务器（以及完整的 ClearCase vob 服务器）的 ClearCase 管理员以恢复该`lost+found`目录。

# primefaces - 如何使用 Primefaces 富文本编辑器添加代码标签？

> ID：15096674
> 
> 赞同：2
> 
> 时间：2013-02-26T18:35:18.110
> 
> 标签：primefaces, fckeditor

我正在使用 primefaces RichTextEditor 是否可以`<p></p>`与这个 Primefaces 的文本编辑器一起使用，例如 Stackoverflow，在这个论坛中使用这个 {} 符号表示。

# cuda - CUDA：命令在 nvcc 之后不起作用

> ID：15096677
> 
> 赞同：2
> 
> 时间：2013-02-26T18:35:21.563
> 
> 标签：cuda, nvcc

我正在尝试使用 nvcc 编译 .cu 程序，每次尝试在 Unix 中编译后，我的命令都不再起作用。我收到一个错误：

“命令”：未找到命令。

这是为什么？每次编译后我都必须注销/退出。

[编辑] 我实际上发现设置路径： setenv PATH /usr/local/cuda/bin 会导致问题。ls、pico、cd 等命令不起作用。我可以退出并注销

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T18:44:14.740

您正在删除路径，您需要附加到 PATH 而不是覆盖它。

```
setenv PATH ${PATH}:/usr/local/cuda/bin 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T18:47:25.613

你不想做`setenv PATH /usr/local/cuda/bin` 你想做的事情`setenv PATH $PATH:/usr/local/cuda/bin` 或类似的变体`setenv PATH $PATH":/usr/local/cuda/bin"` 当你按照自己的方式做时，你正在*替换*现有的 PATH 定义，因此你丢失了所有其他命令的命令路径。在更改之前尝试`echo $PATH`查看它的外观。你想*添加它*，而不是替换它。

# android - 如何在 Android Eclipse 的 ScrollView 中控制 LinearLayout？

> ID：15096678
> 
> 赞同：2
> 
> 时间：2013-02-26T18:35:24.647
> 
> 标签：android, eclipse, scrollview, android-linearlayout

嗨，我正在开发我的应用程序，我只是想知道这是否可能。好的，所以我的布局中有大量文本，我想务实地控制滚动视图中的线性布局被按下的位置。例如，我想将我的应用程序编程到我的文本中间，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:38:27.923

使用“scrollTo”功能怎么样。以编程方式，您将能够指定要滚动到的 x 和 y。

[http://developer.android.com/reference/android/widget/ScrollView.html#scrollTo(int](http://developer.android.com/reference/android/widget/ScrollView.html#scrollTo(int) , int)

这是一个如何使用 scrollBy 和 scrollTo 方法的示例。本质上，您为要滚动的量给它一个像素偏移量。您可以使用 getScrollX 和 getScrollY 来获取位置，尽管在您的情况下听起来您可能希望使用“scrollBy”来根据滚动视图的顶部和用户按下的位置滚动偏移量。

[http://android-er.blogspot.com/2011/09/scroll-view-scrollby-and-scrollto.html](http://android-er.blogspot.com/2011/09/scroll-view-scrollby-and-scrollto.html)

# java - 如何使用java更新Oracle数据库中的BLOB列

> ID：15096680
> 
> 赞同：0
> 
> 时间：2013-02-26T18:35:39.600
> 
> 标签：java, sql

我正在尝试更新我插入数据库的图片。我尝试了`update`声明。但它会产生错误`ORA-00933: SQL command not properly ended`。

我尝试的是：

```
 StringBuilder sb=new StringBuilder(1024);
 sb.append("update ").append(uname).append("PROFILEPICTURE set PROFILEPICT=? where ID=1 for update");
 String query = sb.toString();
 PreparedStatement ps = con.prepareStatement(query);
 ps.setBinaryStream(1, is); 
```

我不知道如何更新 BLOB 内容请任何人告诉我如何更新 BLOB 列...谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:43:11.987

您不能发出 SQL 语句“update ... for update”。只需删除尾随的“for update”，您的声明可能会起作用。

由于您没有告诉我们 的内容`uname`，您的陈述当然也可能存在其他问题。

# java - 为什么 Composite 没有实际价值？

> ID：15096681
> 
> 赞同：0
> 
> 时间：2013-02-26T18:35:41.733
> 
> 标签：java, swt, eclipse-rcp, composite, e4

我有一个 Eclipse RCP 应用程序，其中包含 2 个`Parts`（主菜单和新宏）`Part Stack`。

[![](../Images/d77304ed159432ce1b63d5529d169fa2.png "由 imgur.com 主办")](https://imgur.com/3IP1O4V)

当应用程序启动时，它会调用`CreateMainUI`下面的贡献类，该类构建 UI 并填充一些内容。

```
public class CreateMainUI {

//Text area for the variables
static Text variableArea;

//Create a tree to populate with variables when executing the file walk
static Tree variableTree;
//Create TreeItems; One to act as the parent (the class name) and one to act as sub items (the variables)
static TreeItem classNameForVariables;
static TreeItem variableOfClass;

//Create a tree to populate with methods when executing the file walk
static Tree methodTree;
//Create TreeItems; One to act as the parent (the class name) and one to act as sub items (the methods)
static TreeItem classNameForMethods;
static TreeItem methodOfClass;

@PostConstruct
public void createInterface(Composite parent){
    ...(lots of code)
  }

  ...(lots more code)
} 
```

正如您在图片中看到的那样，它做得很好，但是当我`Parts`通过单击“新建宏”选项卡进行更改时，它会执行下面的代码，这给了我一个错误，说“没有为参数“复合”找到实际值。”

```
public class CreateNewMacroUI {

  @PostConstruct
  public void createInterface(Composite parent){
      System.out.println("Macro UI");

  }
} 
```

谁能向我解释为什么`Composite`这没有价值，`Part`但在主菜单中`Part`？

以下是错误的控制台输出：

```
!SESSION 2013-02-26 18:18:00.052 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.7.0_13
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_GB
Framework arguments:  -product ste.wootten.honoursproject.product -clearPersistedState
Command-line arguments:  -product ste.wootten.honoursproject.product -data D:\Users\Ste\Documents\Uni Year 3\Project\Implementation/../runtime-honoursproject.product -dev file:D:/Users/Ste/Documents/Uni Year 3/Project/Implementation/.metadata/.plugins/org.eclipse.pde.core/honoursproject.product/dev.properties -os win32 -ws win32 -arch x86_64 -consoleLog -clearPersistedState

!ENTRY org.eclipse.e4.ui.workbench 4 0 2013-02-26 18:18:21.205
!MESSAGE Unable to create class 'ste.wootten.honoursproject.macropart.CreateNewMacroUI' from bundle '65'
!STACK 0
org.eclipse.e4.core.di.InjectionException: Unable to process "CreateNewMacroUI#createInterface()": no actual value was found for the argument "Composite".
    at org.eclipse.e4.core.internal.di.InjectorImpl.reportUnresolvedArgument(InjectorImpl.java:394)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:856)
    at org.eclipse.e4.core.internal.di.InjectorImpl.inject(InjectorImpl.java:111)
    at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:319)
    at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:240)
    at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:161)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:102)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate(ReflectionContributionFactory.java:71)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:53)
    at org.eclipse.e4.ui.workbench.renderers.swt.ContributedPartRenderer.createWidget(ContributedPartRenderer.java:141)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:896)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:630)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:732)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:703)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:697)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:682)
    at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer.showTab(StackRenderer.java:1114)
    at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer$1.handleEvent(LazyStackRenderer.java:67)
    at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:41)
    at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
    at org.eclipse.swt.widgets.Display.syncExec(Display.java:4687)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:187)
    at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:38)
    at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:197)
    at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)
    at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
    at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)
    at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)
    at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)
    at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:81)
    at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:58)
    at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374)
    at org.eclipse.e4.ui.model.application.ui.impl.ElementContainerImpl.setSelectedElement(ElementContainerImpl.java:171)
    at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer$8.widgetSelected(StackRenderer.java:910)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1062)
    at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:774)
    at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:3023)
    at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1730)
    at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:270)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1029)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application.start(E4Application.java:150)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

# cocoa - addObject 到 NSMutableDictionary 的越界错误

> ID：15096684
> 
> 赞同：0
> 
> 时间：2013-02-26T18:35:45.807
> 
> 标签：cocoa, nsmutabledictionary, indexoutofboundsexception

所以我正在用可可构建一个应用程序并且遇到了一些麻烦。我想使用数组控制器将许多不同文件夹中的文本文件名提供给 tableview，但它不断抛出越界错误。这是一大段代码给我带来了麻烦。

```
[self clear:nil]; // method that clears the NSTableView

NSString *chooserSelection = chooserItems.titleOfSelectedItem; // gets the selected folder from an NSPopUpButton

if (chooserSelection == @"All") {
    path = @"/Library/Application Support/File Folder/Files/";
    NSArray *folders = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:path error:nil];
    NSLog(@"\nfolders = %@", folders);

    for (int i = 0; i < [folders count]; i++) {

            path = @"/Library/Application Support/File Folder/Files/";
            NSMutableString *folderNames = [[NSMutableString stringWithString:path] init];
            [folderNames insertString:folders[i] atIndex:folderNames.length];
            [folderNames insertString:@"/" atIndex:folderNames.length];

            NSArray *text = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:folderNames error:nil];

        [myArrayController addObject: [NSMutableDictionary dictionaryWithObjectsAndKeys:text[i], @"File Name", nil]]; 
        //This line gives the error

    }
} 
```

如果我将 [folders count] 更改为 1，它会显示在 NSTableView 中。然而，在任何过去的事情上（额外的通过 for 循环）我得到一个越界错误。

```
2013-02-26 13:17:49.679 AppName[3489:403] *** -[__NSArrayI objectAtIndex:]: index 1 beyond bounds [0 .. 0]
2013-02-26 13:17:49.683 AppName[3489:403] (
    0   CoreFoundation                      0x00007fff829b5f56 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff84fe6d5e objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff8295f370 -[__NSArrayI objectAtIndex:] + 208
    3   AppName                             0x000000010000159a -[AppDelegate tableView:objectValueForTableColumn:row:] + 106
    4   AppKit                              0x00007fff840a16e7 -[NSTableView _dataSourceValueForColumn:row:] + 73
    5   AppKit                              0x00007fff840a1167 -[NSTableView preparedCellAtColumn:row:] + 437
    6   AppKit                              0x00007fff840b2171 -[NSTableView _drawContentsAtRow:column:withCellFrame:] + 42
    7   AppKit                              0x00007fff840b05d8 -[NSTableView drawRow:clipRect:] + 1647
    8   AppKit                              0x00007fff840afdb5 -[NSTableView drawRowIndexes:clipRect:] + 565
    9   AppKit                              0x00007fff840aded7 -[NSTableView drawRect:] + 1390
    10  AppKit                              0x00007fff84197382 -[NSView(NSInternal) _recursive:displayRectIgnoringOpacity:inContext:topView:] + 1435
    11  AppKit                              0x00007fff841b564f __-[NSView(NSLayerKitGlue) drawLayer:inContext:]_block_invoke_1 + 94
    12  AppKit                              0x00007fff841b52fb -[NSView(NSLayerKitGlue) _drawViewBackingLayer:inContext:drawingHandler:] + 2001
    13  QuartzCore                          0x00007fff82c4a0dc -[CALayer drawInContext:] + 145
    14  QuartzCore                          0x00007fff82c49225 CABackingStoreUpdate_ + 3221
    15  QuartzCore                          0x00007fff82c4813a _ZN2CA5Layer8display_Ev + 1086
    16  AppKit                              0x00007fff841504e6 -[NSView(NSInternal) _recursiveDisplayViewsIntoLayersIfNeeded] + 163
    17  AppKit                              0x00007fff841505fc -[NSView(NSInternal) _recursiveDisplayViewsIntoLayersIfNeeded] + 441
    18  AppKit                              0x00007fff841505fc -[NSView(NSInternal) _recursiveDisplayViewsIntoLayersIfNeeded] + 441
    19  AppKit                              0x00007fff841505fc -[NSView(NSInternal) _recursiveDisplayViewsIntoLayersIfNeeded] + 441
    20  AppKit                              0x00007fff84150168 -[NSView(NSLayerKitGlue) _drawRectAsLayerTree:] + 128
    21  AppKit                              0x00007fff8401653e -[NSView _drawRect:clip:] + 4382
    22  AppKit                              0x00007fff8401406d -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 3020
    23  AppKit                              0x00007fff84014b5e -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 5821
    24  AppKit                              0x00007fff84012da3 -[NSThemeFrame _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 270
    25  AppKit                              0x00007fff8400e1bb -[NSView _displayRectIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:] + 4755
    26  AppKit                              0x00007fff84006c35 -[NSView displayIfNeeded] + 1676
    27  AppKit                              0x00007fff84006375 _handleWindowNeedsDisplayOrLayoutOrUpdateConstraints + 648
    28  CoreFoundation                      0x00007fff829758e7 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 23
    29  CoreFoundation                      0x00007fff82975846 __CFRunLoopDoObservers + 374
    30  CoreFoundation                      0x00007fff8294aaf9 __CFRunLoopRun + 825
    31  CoreFoundation                      0x00007fff8294a486 CFRunLoopRunSpecific + 230
    32  AppKit                              0x00007fff84459b08 -[NSMenu _internalPerformActionForItemAtIndex:] + 38
    33  AppKit                              0x00007fff842e86f9 -[NSCarbonMenuImpl _carbonCommandProcessEvent:handlerCallRef:] + 138
    34  AppKit                              0x00007fff841349bb NSSLMMenuEventHandler + 339
    35  HIToolbox                           0x00007fff89d08234 _ZL23DispatchEventToHandlersP14EventTargetRecP14OpaqueEventRefP14HandlerCallRec + 1263
    36  HIToolbox                           0x00007fff89d07840 _ZL30SendEventToEventTargetInternalP14OpaqueEventRefP20OpaqueEventTargetRefP14HandlerCallRec + 446
    37  HIToolbox                           0x00007fff89d1e6db SendEventToEventTarget + 76
    38  HIToolbox                           0x00007fff89d647b5 _ZL18SendHICommandEventjPK9HICommandjjhPKvP20OpaqueEventTargetRefS5_PP14OpaqueEventRef + 398
    39  HIToolbox                           0x00007fff89e4be2d SendMenuCommandWithContextAndModifiers + 56
    40  HIToolbox                           0x00007fff89e935b5 SendMenuItemSelectedEvent + 253
    41  HIToolbox                           0x00007fff89d5d883 _ZL19FinishMenuSelectionP13SelectionDataP10MenuResultS2_ + 101
    42  HIToolbox                           0x00007fff89e8bfed _ZL19PopUpMenuSelectCoreP8MenuData5PointdS1_tjPK4RecttjS4_S4_PK10__CFStringPP13OpaqueMenuRefPt + 1660
    43  HIToolbox                           0x00007fff89e8c2ac _HandlePopUpMenuSelection7 + 621
    44  AppKit                              0x00007fff842eb3c5 _NSSLMPopUpCarbonMenu3 + 3860
    45  AppKit                              0x00007fff846990fa _NSPopUpCarbonMenu3 + 39
    46  AppKit                              0x00007fff842e952a -[NSCarbonMenuImpl popUpMenu:atLocation:width:forView:withSelectedItem:withFont:withFlags:withOptions:] + 322
    47  AppKit                              0x00007fff844ca1f1 -[NSPopUpButtonCell trackMouse:inRect:ofView:untilMouseUp:] + 564
    48  AppKit                              0x00007fff840cb7f6 -[NSControl mouseDown:] + 786
    49  AppKit                              0x00007fff84096c98 -[NSWindow sendEvent:] + 6306
    50  AppKit                              0x00007fff840303a5 -[NSApplication sendEvent:] + 5593
    51  AppKit                              0x00007fff83fc6a0e -[NSApplication run] + 555
    52  AppKit                              0x00007fff84242eac NSApplicationMain + 867
    53  AppName                             0x0000000100001152 main + 34
    54  AppName                             0x0000000100001124 start + 52
) 
```

我还可以将 addObject 行添加到 for 循环下面的行，这将显示最后一个文件的文件名。但我无法弄清楚越界错误来自哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:17:12.313

您首先使用索引 i 来计算路径中的文件夹数，然后使用索引来计算相应文件夹中的文件数。因此，您取决于文件夹*N中的文件至少与**N*的数量一样多。

例如，如果您有三个文件夹

文件夹0 文件夹1 文件夹2

那么当您遍历文件夹 2（i=2）时，文件夹中最好至少有 3 个项目，因为您正在访问项目 3（文本 [2]）。当项目较少时，您将收到越界错误。

你可能打算做这样的事情：

```
 NSMutableDictionary* dict = 
     [NSMutableDictionary dictionaryWithObjectsAndKeys:text, folders[i], nil]; 
```

这将为您提供一系列字典。每个字典都有一个键（文件夹的名称）和一个值（文件名数组）。

您可以通过将其展平为单个字典（不在数组内）来进一步简化数据结构。每个键是一个文件夹名称，每个值是文件名数组。

# javascript - 高图表显示图表下方的系列最大值

> ID：15096687
> 
> 赞同：0
> 
> 时间：2013-02-26T18:35:53.060
> 
> 标签：javascript, jsf-2, highcharts

如何在柱形图下方显示 HTML 表格中的系列最大值？HighCharts 有这个选项还是我应该只使用我的模型？

支持 bean 是返回 JSON

**编辑** 虽然不是 jsf“问题”，但 jsf 可能是一个解决方案。我正在使用 JSF2 并将 JSON 数据模型传递给 .xhtml。Highhchart 以列的形式显示数据，但我也想在下表中显示系列数据，如下所示：http: [//jsfiddle.net/highcharts/z9zXM/](http://jsfiddle.net/highcharts/z9zXM/)

```
Highcharts.drawTable = function() { 
```

但是，我需要将 html 表倒置，以便月份位于表的顶部。并且表格列应该与图表对齐（jan 数据在下方并与 1 月 highchart 列对齐）我是否应该是多余的并传递 JSON 模型和非 JSON 模型，然后使用 JSF 数据表来显示值？还是jsfiddle中的highchart方法更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:52:12.600

你的意思是这样的吗？[http://www.highcharts.com/demo/column-parsed](http://www.highcharts.com/demo/column-parsed) 您可以获得每个系列的最大值（以 JS 计算）并将其显示在 HTML 表格中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:58:45.210

如果您想显示系列的最小值/最大值，可以使用 getExtremes() 函数

[http://jsfiddle.net/LeZtV/1/](http://jsfiddle.net/LeZtV/1/)

```
chart.yAxis[0].getExtremes().dataMin
chart.yAxis[0].getExtremes().dataMax 
```

# java - 如何将一些对象数组复制到另一个对象数组

> ID：15096688
> 
> 赞同：0
> 
> 时间：2013-02-26T18:35:55.010
> 
> 标签：java, arrays, eclipse

如何将一些对象数组复制到另一个对象数组

我有这样的课

```
class sd{
    String a="";
    String b="";
    String c="";
    String d="";
    int lenph=12;
    boolean s=false; 
} 
```

和两个这样的数组

```
sd[] stexp=new sd[12];
sd[] st=new sd[3]; 
```

我想将 3 个 stexp 复制到 st 我该怎么做？

我这样做，但它不工作

```
 sd[] stexp=new sd[12];
   for(int c=0;c<stexp[0].lenph;c++){
        stexp[c]=new sd();
}

   sd[] st=new sd[3];
   for(int c=0;c<3;c++){
        st[c]=new sd();
}

   for(int i=0;i<12;i++){
       stexp[i].a="f"+i;
       stexp[i].b="f"+i;
       stexp[i].c="f"+i;
       stexp[i].d="f"+i;
   }

   for(int i=0;i<3;i++){
       st[i].a=stexp[i].a;
       st[i].b=stexp[i].b;
       st[i].c=stexp[i].c;
       st[i].d=stexp[i].d;

   }
       b+=st[0].a+"\n";
       b+=st[0].b+"\n";
       b+=st[0].c+"\n";
       b+=st[0].d+"\n";
sho.setText("b="+b); 
```

谢谢你的帮助。:)

哎呀，我改错了代码。

我想将一个对象数组复制到另一个对象数组，我用

```
 System.arraycopy(stexp, 0,st , 0, 1); 
```

但是当我在eclipse中运行代码时它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:38:36.487

```
check this example.use arraycopy
class ArrayCopyDemo {
    public static void main(String[] args) {
        char[] copyFrom = { 'd', 'e', 'c', 'a', 'f', 'f', 'e',
                'i', 'n', 'a', 't', 'e', 'd' };
        char[] copyTo = new char[7];

        System.arraycopy(copyFrom, 2, copyTo, 0, 7);
        System.out.println(new String(copyTo));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:53:00.943

我会仔细检查字段名称（如果这实际上是您尝试运行的代码）。您的类 sd 不包括您尝试写入/读取的成员变量：deg、var、mult、power。它有 a、b、c 和 d。

您也可能在第一个 for 循环条件（“lengph”）中有错字。

最后，请记住，这只是复制这 3 个 stexp 对象的成员变量的值。这与复制对象不同，这可能是您想要的。

# ios - 整体加入UIBezierPath笔画

> ID：15096692
> 
> 赞同：5
> 
> 时间：2013-02-26T18:36:03.810
> 
> 标签：ios, objective-c, cocoa, uibezierpath, cgpath

作为 iOS 绘图的初学者，我想绘制一个小工具提示容器，它由一个带有指示箭头的矩形组成。我创建了 2 个 UIBezierPaths 并使用“appendPath”将它们加入。我认为这是解决此问题的正确方法，但在挣扎了 1 天后，我不得不寻求帮助。这是我现在所在位置的屏幕截图：

![UIBezierPath 截图](../Images/e0531e82d317b7b4dda7814c030a9c2f.png)

正如您所看到的，问题很简单，当我尝试描边连接的路径时，它不会作为一个整体被描边，而是作为单独的部分进行描边。也许有人可以指出我解决这个问题的正确方向？

这是代码：

```
 // Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // create indicator path
    UIBezierPath *indicator = [[UIBezierPath alloc] init];
    // corner radius
    CGFloat radius = self.cornerRadius;
    // main path
    UIBezierPath *path;
    // format frame
    rect = CGRectMake(rect.origin.x, rect.origin.y, rect.size.width, rect.size.height - self.indicatorSize.height);
    // assign path
    path = [UIBezierPath bezierPathWithRoundedRect: rect
                                 byRoundingCorners:UIRectCornerAllCorners
                                       cornerRadii:CGSizeMake(radius, radius)];
    // x point
    CGFloat x = (rect.size.width - self.indicatorSize.width) / 2;

    [indicator moveToPoint:CGPointMake(x, rect.size.height)];
    [indicator addLineToPoint:CGPointMake(x + self.indicatorSize.width / 2, rect.size.height + self.indicatorSize.height)];
    [indicator addLineToPoint:CGPointMake(x + self.indicatorSize.width, rect.size.height)];
    // close path
    [indicator closePath];
    // append indicator to main path
    [path appendPath:indicator];

    [[UIColor redColor] setStroke];
    [path setLineWidth:2.0];
    [path stroke];
    [self.fillColor setFill];
    [path fill];
    // release indicator
    [indicator release];
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T18:39:55.273

您需要将其全部绘制为一条路径，因为此时您告诉它您要绘制整个矩形，然后绘制一个三角形，这就是它正在做的事情。

来自 Apple UIBezierPath 文档：

> [appendPath:] 将用于在 bezierPath 中创建路径的命令添加到接收器路径的末尾。此方法不会显式尝试连接两个对象中的子路径，尽管 bezierPath 中的操作可能仍会导致该效果。

所以首先它会绘制你的矩形，然后它会绘制你的三角形而不试图加入它们

# css - text-align:center 在绝对定位的跨度上无法正常工作

> ID：15096695
> 
> 赞同：7
> 
> 时间：2013-02-26T18:36:07.493
> 
> 标签：css, css-position, html, text-alignment

我需要将 2`<span>`放在 a`<div>`中，第一个跨度必须放在顶部，第二个跨度必须放在底部，就像南北一样。

![在此处输入图像描述](../Images/8cef827f80b0d93ab7dec9ee36576c52.png)

```
<div>
    <span class="north">N</span>
    <span class="south">S</span>
</div> 
```

为此，我考虑过`position:absolute;`在 2 上使用`<span>`。

```
div
{
    display:inline-block;
    width: 20px;
    position:relative;
    height:100px;
}
.north
{
    position:absolute;
    top:0;
}
.south
{
    position:absolute;
    bottom:0;
} 
```

现在，跨度应该位于左侧（默认），为了使它们居中，我使用了：

```
div
{
    text-align:center;
} 
```

但我得到了这个：

![在此处输入图像描述](../Images/6c3ef79fa1938aaf9672d6fd1f634345.png)

看看：http: [//jsfiddle.net/Zn4vB/](http://jsfiddle.net/Zn4vB/)

为什么会这样？

注意：我不能使用边距，左，右，因为这些跨度的内容不同，我只需要在中心正确对齐它们。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T18:40:17.410

[http://jsfiddle.net/Zn4vB/1/](http://jsfiddle.net/Zn4vB/1/)

问题是一旦绝对定位，它就不再遵循文档流。因此文本居中，但仅在粉红色范围内。而且由于它是绝对定位的，即使它是一个div，宽度也会崩溃。

解决方案是给定位的跨度一个 100% 的宽度，然后居中工作。

```
span
{
    background-color:pink;
    left: 0;
    width: 100%;
} 
```

如果您不希望粉红色扩展整个宽度，则必须在定位的跨度内嵌套一个元素（例如跨度）并为该元素提供背景色，如下所示：http: [//jsfiddle.net/Zn4vB/ 6/](http://jsfiddle.net/Zn4vB/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T03:45:59.853

请检查这是否是您想要的想法..

```
div
{
    display:inline-block;
    width: 20px;
    position:relative;
    height:100px;
    border-style:solid;
}
span
{
    background-color:pink;
    width:100%;
    text-align:center;
}
.north
{
    position:absolute;
    top:0;
}
.south
{
    position:absolute;
    bottom:0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:51:07.927

你的定位是对的。但是`<span>`标签是*内联*元素，所以你需要让它们显示为块级元素，`display: block;`然后用`width: 100%;`.

`text-align`它们将从您的样式规则继承属性，`<div>`因此文本将位于中心。

我在这里更新了你的代码：http: [//jsfiddle.net/robknight/Zn4vB/5/](http://jsfiddle.net/robknight/Zn4vB/5/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-08-11T02:56:12.370

你可以使用变换来解决这个问题

```
 div
{
    display:inline-block;
    width: 20px;
    position:relative;
    height:100px;
    border-style:solid;
    text-align:center;
}
span
{
    background-color:pink;
}
.north
{
    position:absolute;
    top:0;
  transform: translateX(-50%);
  -webkit-transform: translateX(-50%);
}
.south
{
    position:absolute;
    bottom:0;
  transform: translateX(-50%);
  -webkit-transform: translateX(-50%);
} 
```

# java - 有没有像 ASP.NET MVC 的 Glimpse 这样的 Java 的 Spring MVC 工具？

> ID：15096697
> 
> 赞同：2
> 
> 时间：2013-02-26T18:36:12.607
> 
> 标签：java, asp.net, spring-mvc, glimpse

来自 .NET 世界，我想知道在 Java Spring MVC 项目中是否有类似[http://getglimpse.com/的东西。](http://getglimpse.com/)

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:46:29.327

Spring Insight 允许您查看 Spring Web 应用程序的性能和内部结构：[http ://www.springsource.org/insight](http://www.springsource.org/insight)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:40:28.740

您可以使用[JavaMelody](https://code.google.com/p/javamelody/)。这是一个很好的 Java EE 应用程序分析框架。您可以注释 Spring bean 并收集有关执行时间、性能和错误的统计信息。JM 还提供了监控 HTTP 请求/响应和数据库加载的可能性。

# php - 从另一个域读取文件以更新 mysql

> ID：15096699
> 
> 赞同：-2
> 
> 时间：2013-02-26T18:36:14.030
> 
> 标签：php, mysql, database

我即将开始一个构建 wp 插件的项目，在开始之前我需要一些指导。该插件将需要读取不同域上的文本文件并在其自己的域上更新 MySQL。这可能吗？我知道有一种方法可以使用文本文件更新 MySQL，但是否可以跨域进行更新？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:41:24.103

Curl 是一个 PHP 函数/扩展，可以为您获取远程文件的内容

[http://www.php.net/manual/en/book.curl.php](http://www.php.net/manual/en/book.curl.php)

或更简单：

[http://www.php.net/manual/en/function.file-get-contents.php](http://www.php.net/manual/en/function.file-get-contents.php)

但是，您的问题非常笼统，真正的“工作”在于解析文件，即以可用格式提取其内容，并安全地插入到您的数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:45:32.627

您需要将任务拆分为以下内容：

1.  格式化源域上的数据，以便在目标域上轻松读取。我建议使用 JSON 或 XML。考虑使用某种关键字，这样每个人都无法获取该数据，只有你自己
2.  使用 CURL 或 file_get_contents() 通过脚本获取数据。脚本很可能会定期运行，所以放在cron上
3.  将数据（HTTP 传输后数据为字符串）解码成数组，用于 SQL 查询

简单的谷歌搜索将帮助您了解任何细节或随时在评论中提出更多问题

# json - TRttiField SetValue on Record 不起作用的通用递归函数

> ID：15096701
> 
> 赞同：0
> 
> 时间：2013-02-26T18:36:20.917
> 
> 标签：json, delphi, class, record, rtti

我有一个“父”类，它具有一个通用函数，可以将 JSON 字符串加载到名为**loadVals**的实例属性中。我有两个孩子，有自己的财产，其中一个道具就是唱片。该函数成功设置了主实例的所有道具，但在设置记录道具的值时失败，没有错误，我可以看到它成功循环通过记录的道具但没有设置值。编写了一个小型测试控制台应用程序，您可以在其中查看行为。

```
uses
  System.SysUtils, System.TypInfo, RTTI, Data.DBXJSON;

type
  TFieldValLoader = reference to procedure (const new_val: TValue);

  tRec1 = record
    x: integer;
    y: String;
  end;

  tRec2 = record
    a: integer;
    b: String;
    c: integer;
  end;

  TMyParent = class(TObject)
    procedure loadVals(json_obj: TJSONObject);
  end;

  TMyChild1 = class(TMyParent)
    h: integer;
    my_rec: tRec1;
  end;

  TMyChild2 = class(TMyParent)
    j: string;
    my_rec: tRec2;
  end;

{ TMyParent }
procedure TMyParent.loadVals(json_obj: TJSONObject);
   procedure loadObj(Obj : TObject; my_json_obj: TJSONObject); forward;
  procedure loadRecord(Obj : TValue; my_json_obj: TJSONObject);forward;

  Procedure loadField( my_json_val: TJSONPair; _val: TValue; _loader: TFieldValLoader );
  Begin
    case _val.TypeInfo.Kind of
      tkInteger:
        _loader( TValue.From<integer>(StrToInt(my_json_val.JsonValue.Value)));
      tkWChar, tkUString, tkVariant:
        _loader( TValue.From(my_json_val.JsonValue.Value));
      tkRecord:
        loadRecord(_val, my_json_val.JsonValue as TJSONObject);
    end;
  End;

  procedure loadRecord(obj : TValue; my_json_obj: TJSONObject);
  var
    i: Integer;
    json_pair: TJSONPair;

    ctx: TRttiContext;
    obj_type: TRttiType;
    my_field: TRttiField;
  begin
    ctx := TRttiContext.Create;
    obj_type := ctx.GetType(obj.TypeInfo);
    for I := 0 to my_json_obj.Size - 1 do
    Begin
      json_pair := my_json_obj.get(i);
      my_field := obj_type.GetField(json_pair.JsonString.value);
      WriteLn('    - '+ my_field.Name);
      loadField(json_pair, my_field.GetValue(obj.GetReferenceToRawData),
        procedure( const new_val: TValue )
        Begin
        // This does not work. (no feedback)!!!!
          my_field.SetValue(obj.GetReferenceToRawData, new_val);
        End
      );
    End;
  End;

  procedure loadObj(Obj : TObject; my_json_obj: TJSONObject);
  var
    i: Integer;
    json_pair: TJSONPair;

    ctx: TRttiContext;
    obj_type: TRttiType;
    my_field: TRttiField;
  begin
    ctx := TRttiContext.Create;
    obj_type := ctx.GetType(obj.ClassInfo);
    for I := 0 to my_json_obj.Size - 1 do
    Begin
      json_pair := my_json_obj.get(i);
      my_field := obj_type.GetField(json_pair.JsonString.value);
      WriteLn('* '+ my_field.Name);
      loadField(json_pair, my_field.GetValue(obj),
        procedure( const new_val: TValue )
        Begin
        // This does work
          my_field.SetValue(obj, new_val);
        End
      );
    End;
  End;
begin
  WriteLn('Loading  '+ self.ClassName);
  loadObj(self, json_obj);
end;

{ main Test Procedure }
var
  my_child1: TMyChild1;
  my_child2: TMyChild2;
begin
  try
    my_child1:= TMyChild1.Create;
    my_child2:= TMyChild2.Create;
    try
    // load the json objs
      my_child1.loadVals(TJSONObject.ParseJSONValue('{"h": 2, "my_rec": {"x": 4, "y": "test"}}') as TJSONObject);
      my_child2.loadVals(TJSONObject.ParseJSONValue('{"j": "some", "my_rec": {"a": 8, "b": "any", "c": 9}}') as TJSONObject);

    // print the loaded values
      WriteLn('child 1 vals are: h: '+ intToStr(my_child1.h) +'  my_rec.y= "'+ my_child1.my_rec.y +'" should equal to "test"');
      WriteLn('child 2 vals are: j: '+ my_child2.j +'  my_rec.b= "'+ my_child2.my_rec.b +'" should equal to "any"');

    finally
      my_child1.Free;
      my_child2.Free;
    end;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  // don't close the window, wait for [Enter]
  Readln;
end. 
```

我知道记录与类不同，我找不到让这个函数工作的方法；我真的很感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:32:16.887

您的问题是记录是一种值类型。

这条线

```
loadField(json_pair, my_field.GetValue(obj), 
```

获取记录字段的值。请记住，它是一个值类型，所以我们得到它的**副本**。现在，您正在该副本上设置有效的属性/字段。但是，您永远不会将其分配回对象的字段。

所以你在这里做的基本上是这样的：

```
my_child1:= TMyChild1.Create;
my_rec1 := my_child1.my_rec;
my_rec1.x := 4;
my_rec1.y := 'test'; 
```

因此，您可以看到`my_child1.my_rec`永远不会将值设置为`my_rec1`.

您需要修复`loadField`如下：

```
procedure loadField( my_json_val: TJSONPair; _val: TValue; _loader: TFieldValLoader );
begin
  case _val.TypeInfo.Kind of
    tkInteger:
      _loader( TValue.From<integer>(StrToInt(my_json_val.JsonValue.Value)));
    tkWChar, tkUString, tkVariant:
      _loader( TValue.From(my_json_val.JsonValue.Value));
    tkRecord:
    begin
      loadRecord(_val, my_json_val.JsonValue as TJSONObject);
      _loader( _val); // <- set the record back to the field
    end;
  end;
end; 
```

# windows - 无法正确运行统一 3d 应用程序

> ID：15096704
> 
> 赞同：0
> 
> 时间：2013-02-26T18:36:31.137
> 
> 标签：windows, unity3d

我刚刚开始学习`Unity 3D`。我用[这个](http://active.tutsplus.com/tutorials/unity/getting-started-with-unity/)作为第一课。我创建了一个地形，添加了纹理、植物和草，添加了第一人称控制器和定向照明。当我按下播放时，场景自动开始沿 Y 方向移动。我希望场景仅在我使用键盘或鼠标输入时移动。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:42:27.393

第一人称控制器必须完全放置在地形之上。这样做后，我得到了预期的效果。

# puppet - 检查一个类是否存在

> ID：15096706
> 
> 赞同：14
> 
> 时间：2013-02-26T18:36:38.007
> 
> 标签：puppet

如果给定的类存在，有没有办法检查清单文件？

我想做这样的事情：

```
class foo {
    if exists( Class["foo::${lsbdistcodename}"] ) {
        include foo::${lsbdistcodename}
    }
} 
```

所以我可以很容易地添加分发/版本特定的类，然后自动包含这些类。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-27T18:08:39.587

您应该使用定义而不是存在语句。以下代码段对我有用：

```
class foo {
    if defined( "foo::${lsbdistcodename}") {
            notify {'defined':}             
            include "foo::${lsbdistcodename}"
    }
}

class foo::precise {
    notify{'precise':}
} 
```

[假设您正在运行 puppet 版本 > 2.6.0]

# unix - make sort - 内置函数

> ID：15096709
> 
> 赞同：0
> 
> 时间：2013-02-26T18:36:45.777
> 
> 标签：unix, compiler-construction, makefile

我想从makefile中对txt文件中的行进行排序。我发现这个排序函数是一个 make 函数（内置函数）。

```
$(sort list) 
```

我的想法：

```
$(UNSORT) = $(cat input.txt)
$(SORTED) = $(sort $(UNSORT))
@echo $(SORTED) >output.txt 
```

..但这项工作不是：S

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:47:30.587

以这种方式调用排序命令

```
sort text.txt > output.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:07:12.813

`$()`在赋值过程中，您不应将变量名括起来。所以前两个赋值语句的形式应该是`VARIABLE = some_value`

第二个问题是调用`cat`. 要运行任何 shell 命令，我们必须使用 make 的内置函数`$(shell ...)`。简单的`$(cat ...)`不行。

进行这些更正后，脚本运行良好：

```
UNSORT = $(shell cat input.txt)
SORTED = $(sort $(UNSORT))

all:
    @echo $(SORTED) > output.txt 
```

# django - Django按可能在多对多字段中的值进行过滤

> ID：15096711
> 
> 赞同：1
> 
> 时间：2013-02-26T18:36:49.940
> 
> 标签：django, django-models

假设我们有一个 Driver 模型，一个 Driver 可能拥有许多汽车。我希望能够过滤 a`QuerySet`以便我可以看到所有驾驶特定汽车的司机。IE：

```
class Driver(models.Model):
    primary_car = models.ForeignKey(Car, related_name='primary')
    cars = models.ManyToMany(Car, related_name = 'all')

    def save(self, force_insert=False, force_update=False, using=None, *args, **kwargs):
        if self.primary_car not in self.cars.all():
            self.cars.add(self.primary_car)
        super(Car, self).save(force_insert=False, force_update=False, using=None, *args, **kwargs)

class Car(models.Models):
    name = models.CharField(max_length=30) 
```

所以假设我有 50 名司机，我知道 7 名有 Yugos，2 名有 Yugos 作为他们的主要汽车。如何搜索这些驱动程序？我认为用谷歌搜索不到 2 分钟就能找到这个答案，所以我可能遗漏了一些基本的东西。

更新：我修复了损坏的`save()`方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:45:56.007

```
from django.db.models import Q

# drivers who have either have a "Yugo" as their primary car,
# or have a relation to one
yugo_drivers = Driver.objects.filter(Q(primary_car__name__iexact="Yugo") | 
                                     Q(cars__name__iexact="Yugo")) 
```

有两件事可以帮助您：

*   [跨越关系的查找](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)
*   [Q 对象](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:45:57.103

```
qs = Driver.objects.filter(Car_name=your_car.name) 
```

# java - java数据结构异常

> ID：15096713
> 
> 赞同：0
> 
> 时间：2013-02-26T18:37:02.997
> 
> 标签：java, linked-list

我正在编写一个通用数据结构，它可以从我测试代码的第一个或最后一个节点中添加和删除，但是我在某些特定的输入方式中遇到了异常。

现在如果我 addlast 然后 addfirst 然后 removelast 我得到了异常

当我 addfirst 很多次而不添加 last 然后尝试通过 removelast() 函数删除它们我得到了异常但是当我 addlast 很多次而不首先添加然后通过 removefirst() 删除它们它可以工作

我试图避免while循环这里是代码

```
 import java.util.Iterator;
 public class Deque <Item> implements Iterable <Item> {

private Node first,last;

private class Node
{
    Item item;
    Node next;
    Node prev;
}

public Deque()
{
    first = null;
    last = null;
}

public boolean IsEmpty()
{
    return first == null;
}

public void addFirst(Item item)
{
    Node oldfirst = first;
    first = new Node();
    first.item = item;
    first.next = oldfirst;
    first.prev = null;
    if (last == null)
    {
        last = first;

    }

}

public void addlast(Item item)
{
    Node oldlast = last;
    last = new Node();
    last.item = item;
    last.next = null;
    if (first == null)
    {
        first = last;
    }
    else
    {
        last.prev = oldlast;
        oldlast.next = last;
    }
}

public Item removeFirst()
{
    Item x = first.item;
    first = first.next;
    if (IsEmpty())
        last = null;
    return x;
}

public Item removeLast()
{
    if (first == last)
        return removeFirst();
    Item x = last.item;
    last = last.prev;
    last.next = null;
    if (IsEmpty())
        first = null;
    return x;
}

public Iterator<Item> iterator ()
{
    return new ListIterator();
}

private class ListIterator implements Iterator<Item>
{
    private Node current = first;

    public boolean hasNext ()
    {
        return current != null;
    }

    public void remove()
    {
        //NOt Supported
    }

    public Item next()
    {
        Item x = current.item;
        current = current.next;
        return x;
    } 
```

} }

我相信我在 removelast() 中的 last.prev 有问题，因为它已经为空，然后在 remove() 中引用了 last = last.perv 但我想不出一种方法将 last 链接到 first 的最后一个节点

谁能帮我这个

如果你想尝试，这里是主要的......

```
public class Main {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    Deque<Integer> o = new Deque<Integer>();
    int num = 0;
    while (true)
    {
        StdOut.println("enter 1 to addfirst, 2 addlast, 3 removefirst, 4 removelast, " +
                "5 to exit");
        num = StdIn.readInt();
        if (num == 5)
            break;
        switch (num)
        {
        case 1:
            StdOut.println("enter number to add first");
            int x = StdIn.readInt();
            o.addFirst(x);
            break;
        case 2:
            StdOut.println("enter number to add last");
            int y = StdIn.readInt();
            o.addlast(y);
            break;
        case 3:
            int w=o.removeFirst();
            StdOut.print("the deleted number is: ");
            StdOut.print(w);
            StdOut.println();
            break;
        case 4:
            int z=o.removeLast();
            StdOut.print("the deleted number is: ");
            StdOut.print(z);
            StdOut.println();
            break;
        default:
            StdOut.println("Stick with the range!");
            break;
        }

        for (Iterator<Integer> i=o.iterator(); i.hasNext();)
        {
            StdOut.print(i.next());
            StdOut.print("  ");
        }
        StdOut.println();
    }

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:51:20.307

您错过了几次手术。在`addFirst`你没有设置的情况下`oldFirst.prev = first;`，所以如果你用它添加节点，你将不会`prev`定义任何引用。这就是 removeLast 失败的原因。它尝试清除遍历到`last.prev`，但由于所有内容都添加了`addFirst`，`last.prev`因此为空。

此外，在 中`removeFirst`，您有一个类似的问题，即您没有删除到前一个`prev`节点的链接，例如`first.prev = null;` 如果不这样做，如果您使用`prev`引用进行遍历，您将能够在调用后移动到第一个节点之外`removeFirst`.

`addLast`并且`addFirst`应该在本质上做完全相同的事情，只是在列表的不同末端。 `addFirst`在您的实现中看起来更简单，这意味着您错过了 中的某些内容`addFirst`，或者`addLast`过于复杂。在这种情况下，您错过了`addFirst`. 与删除方法相同。

# internet-explorer - VLC 网络插件最初不会在 IE8 或 IE9 中显示

> ID：15096716
> 
> 赞同：0
> 
> 时间：2013-02-26T18:37:15.770
> 
> 标签：internet-explorer, plugins, activex, vlc

这已经是 VLC 的 Trac 的一个已[注册错误](http://trac.videolan.org/vlc/ticket/6918#comment:2)，但似乎没有提出建议的解决方案。我也无法在此处发表评论（出现内部 Trac 错误），因此我将在此处粘贴解决方案（或者，对我有用的方法）。请注意，票证报告它在 IE8 中工作，但对我来说并非如此。我安装了 VLC 1.1.9。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:37:15.770

假设您有以下嵌入标签：

```
<object id="playerId" classid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921" width="752" height="578"> 
```

我的工作示例如下，假设 JQuery：

```
$(function() {
    var player = document.getElementById("playerId");
    var playlist = player.playlist;
    playlist.clear();
    var id = playlist.add("rtsp://yoururl", "", new Array());
    playlist.playItem(id);

    setTimeout(function() {
        $("#playerId").hide().show();
    }, 100);
}); 
```

我现在正在使用 IE8，不要问为什么......我不经常使用这个可怕的浏览器，但我被困在一个对 windows 和旧 IE 浏览器和需求的需求中-vlc 插件地狱。当我解决它时，我实际上以为我在背景中听到了[Guile 主题](http://www.youtube.com/watch?v=jLJLyneZGKc)，但我想那只是我的想象。无论如何，我希望其他人可以从中受益。

# android - Android 日期差返回以分钟为单位

> ID：15096717
> 
> 赞同：0
> 
> 时间：2013-02-26T18:37:16.273
> 
> 标签：android

我从 db 获取 UTC 日期。并从当前的 UTC 日期时间中减去它。我想有差异。在几分钟内。有些东西不太对劲。

```
 Date currenttimedate = DateTime.UTCNow();
            String lastsynctime = c.getString(c.getColumnIndex(columnname)).toString();
            Date lastruntimedate = DateTime.StringDateToDate(lastsynctime, "MM/dd/yyyy HH:mm:ss");
            long diffInMs = (currenttimedate. getTime() - lastruntimedate.getTime());

            // convert it to Minutes
            long diffInMins = TimeUnit.MILLISECONDS.toMinutes(diffInMs);

            // return time in minutes
            response = (int)(diffInMins); 
```

它返回大约 720 分钟。预期答案不能超过 5。因为数据每 5 分钟同步一次。

# objectify - Objectify Ofy() 没有找到“查询”方法

> ID：15096725
> 
> 赞同：1
> 
> 时间：2013-02-26T18:37:30.003
> 
> 标签：objectify

我是对象化的新手，并且正在阅读有关如何查询的教程。出于某种原因，当我键入以下代码时：

```
Query q = ofy().query(UserChoice.class).filter("email", email); 
```

我的 Eclipse 给了我一个错误，说“方法查询（类）对于 Objectify 类型是未定义的”

我不确定这意味着什么？我使用以下方法正确导入了 Objectify：

```
import com.googlecode.objectify.Objectify;
import com.googlecode.objectify.ObjectifyService;

ObjectifyService.register(UserChoice.class); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:41:57.043

目标没有实际的查询方法。在他们的[API](http://objectify-appengine.googlecode.com/svn/trunk/javadoc/com/googlecode/objectify/Objectify.html)中，您可以看到您可以对`Objectify`对象进行的所有调用，`query()`而不是其中之一。

看起来可能有一个旧版本`Objectify`有一个`query`方法。最新版本（[Build version: 4.0a3](http://objectify-appengine.googlecode.com/svn/trunk/javadoc/com/googlecode/objectify/Objectify.html)）没有，但旧版本（[Build version: 2.2.1](http://objectify-appengine.googlecode.com/svn-history/r543/trunk/javadoc/com/googlecode/objectify/Objectify.html)）有。看起来类路径是相同的，`com.googlecode.objectify.Objectify`. 确保加载正确的版本，或者您正在使用带有 `query() 调用的正确版本。

您使用的[ObjectifyService看起来是旧版本 (2.2.1)。](http://objectify-appengine.googlecode.com/svn-history/r543/trunk/javadoc/com/googlecode/objectify/ObjectifyService.html)

# objective-c - CALayer：单像素线看起来像2像素

> ID：15096728
> 
> 赞同：7
> 
> 时间：2013-02-26T18:37:41.187
> 
> 标签：objective-c, cocoa, core-animation, core-graphics

这是我的代码：

```
int columns 3;
int columnWidth = self.layer.bounds.size.width / 3;

for (int c = 1; c < columns; c++) {
    CALayer *layer  = [CALayer layer];
    layer.frame = (CGRectMake(columnWidth * c + 0.5, 0.5, 1, self.layer.bounds.size.height));
    layer.backgroundColor = myColor;
    [grid addSublayer:layer];
} 
```

我知道我必须将 x 和 y 移动 0.5 像素，这就是我所做的，但它仍然显示为 2 像素线而不是 1。

![在此处输入图像描述](../Images/2e508e4f4b0b96a81473cc6b109852d0.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-26T19:41:30.867

我继续做了一张解释性的图片，以防它对任何人有帮助

![在此处输入图像描述](../Images/9342790a0cce45abafc058e67bbfd058.png)

精确像素坐标上的下线看起来很模糊......线条宽度的每一半都位于不同的像素行中......

上面的线被偏移`line_width/2.0`并且看起来很清晰......它完全位于一行像素内。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T19:00:51.047

将图层框架设置为

```
layer.frame = (CGRectMake(columnWidth * c + 0.5, 0.5, 0.5, self.layer.bounds.size.height)); 
```

是的，它也适用于视网膜

检查这篇[文章](http://www.raywenderlich.com/2033/core-graphics-101-lines-rectangles-and-gradients)第**1 节点线和像素边界**。那里有很好的解释

# javascript - 谷歌网页字体备份？

> ID：15096733
> 
> 赞同：4
> 
> 时间：2013-02-26T18:37:49.720
> 
> 标签：javascript, html, css, webfonts

我想知道是否有办法走好，谷歌网络字体已关闭，而是使用它作为字体源？类似于我们如何执行 window.jquery 检查以查看 google jquery cdn 是否已关闭并提供替代文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T19:13:15.017

您可以简单地指定安装在您自己的服务器上的网络字体版本作为第二个选项，例如

```
<link href='https://fonts.googleapisx.com/css?family=Cantarell' rel='stylesheet'>
<style>
@font-face {
    font-family: 'cantarellregular';
    src: url('cantarell-regular-webfont.eot');
    src: url('cantarell-regular-webfont.eot?#iefix') format('embedded-opentype'),
         url('cantarell-regular-webfont.woff') format('woff'),
         url('cantarell-regular-webfont.ttf') format('truetype'),
         url('cantarell-regular-webfont.svg#cantarellregular') format('svg');
    font-weight: normal;
    font-style: normal;
}
body { font-family: Cantarell, cantarellregular; }
</style> 
```

您将需要为服务器中的字体系列使用不同的名称；在示例中，我使用了由[FontSquirrel @font-face generator 生成](http://www.fontsquirrel.com/tools/webfont-generator)的名称。

这样，浏览器将首先尝试从 Google 站点获取字体文件，如果由于某种原因失败，它将从您的服务器获取字体文件。

如果您担心 Google 网站出现故障，我想知道为什么您不简单地使用自己服务器上的字体。（这种情况很少见；但从用户设备到 Google 网站的连接可能已断开，即使与您的网站的连接正常。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:42:29.733

您可以列出多个字体系列，它们将按该顺序显示。例如

```
font-family: 'Skranji', cursive, Verdana, Geneva, sans-serif; 
```

这将使用 Google webfont Skranji，如果它不可用，它将撞到 Verdana，等等。

# image - 用于 MIPS 的 WinCE 映像

> ID：15096734
> 
> 赞同：-1
> 
> 时间：2013-02-26T18:37:52.040
> 
> 标签：image, windows-ce, mips

有没有人有 MIPS 处理器的 Win CE（5.0 或 6.0）的图像？

我目前正在使用 Microsoft Device Emulator v 3.0 我有 ARM 处理器的映像，但我的目标设备有 MIPS。因此，无法在 PC 上执行某些测试。

为了简化任务：我需要一个图像来测试为 STANDARD SDK 5.0 MIPSII 构建的应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:42:52.583

没那么简单。这不是一个桌面操作系统，其中外围设备使用一组通用的总线和地址，以及一个知道如何集成所有这些的单一操作系统构建。没有针对任何给定处理器的“Windows CE 映像”，必须为您的确切硬件构建操作系统映像。即使使用相同的处理器，内存映射、外围设备、驱动程序和大量其他内容也会因板而异。

这些“差异”被封装在所谓的 BSP 或板级支持包中。您通常必须为您的目标硬件拥有它，然后您可以生成一个新的操作系统映像，其中包含您想要用于该硬件的操作系统功能。

简而言之，没有人可以在不知道您拥有的确切硬件的情况下告诉您他们是否有兼容的操作系统映像。即使有了这些信息，除了设备 OEM 之外的任何人都极不可能拥有它的图像。

**编辑**

你注意到你需要这个设备模拟器。设备仿真器实际上是一个 ARM 设备，因此它根本无法运行 MIPS 操作系统。如果您想针对模拟器测试您的应用程序，您需要针对 ARM SDK 对其进行编译。

# entity-framework-5 - 实体框架模型优先

> ID：15096739
> 
> 赞同：0
> 
> 时间：2013-02-26T18:38:04.683
> 
> 标签：entity-framework-5

我们正在权衡 Model First 和 DB first 开发之间的利弊。我发现了以下 Model First Pros 1\. C# dev 不需要了解 SQL stmts。2\. C# dev 可以为他的业务需求创建一个更具体的实体。缺点 1\. 无法使用供应商数据库中可用的更精细功能（即 SQL 服务器中的列约束）

对于 DB，优缺点是相反的。这里有什么大不了的吗。我正在慢慢地向 DB 先倾斜。建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:58:12.007

根据您的项目，目前您可以使用三种可用的方法：DB First、Model First 和 Code First。

显然，在使用它们之前应该考虑一些权衡。

在开发业务对象及其关系时，您已经生成了大部分数据模型，并且禁止这种冗余是新方法和技术背后的理念。考虑到这一点，如果数据模型要经常更改，DB First 不是一个好的选择。

尽管整个想法很棒，但新方法还不够成熟（见证`Entity Framework`频繁发布和重大变化）。他们无法完全消除提到的冗余，也无法涵盖其框架中的所有 DB First 功能。此外，这项工作是通过中间层完成的，与 DB First 方法相比，这会降低性能。不幸的是，除非您正在进行项目，否则您不会通知未发现的功能。因此，如果您需要复杂的功能或拥有复杂的数据模型，并且业务模型不会经常更改，和/或性能是高优先级，那么 DB First 是您的选择。

在我看来，这场斗争中正在发生的事情是澄清应该回答的正确问题。由于数据库技术的优先级是稳定性，它们不受频繁或重大变化的影响（见证关系数据库）。从开发的角度来看，我们定义了我们的对象及其关系，并将它们存储在集合中，并在需要时轻松检索它们，所以为什么要麻烦这些易失性对象（它们在运行时在 RAM 中）将被存储在哪里以及如何存储. 虽然提到的技术是开发人员方面的努力，但数据库技术方面也有努力，例如内存数据库、面向对象的数据库......

# bash - OSX bash 和期望

> ID：15096740
> 
> 赞同：6
> 
> 时间：2013-02-26T18:38:05.417
> 
> 标签：bash

我有一个脚本，必须在多个主机上执行“sudo”操作。我试图让期望工作，所以我只需要输入一次，并且遇到了几个问题。

首先，几个例子建议使用：

```
/usr/bin/expect <<EOD
spawn ssh -t $host /usr/bin/sudo -v
expect "Password:"
send "$SUDOPASS\n"
EOD 
```

但是，一旦我输入第二个“<”，所有的引用都会被搞砸，我的脚本将以文件意外结束而终止。这真的很奇怪，因为我使用与 cat 相同的机制在其他脚本中写出文件。

其他例子表明：

```
/usr/bin/expect -c "
spawn ssh -t $host /usr/bin/sudo -v
expect "Password:"
send "$SUDOPASS\n"
" 
```

这样做（并添加 -d 以期望），我得到关于 no tty 的错误和重复我的密码，并在末尾附加一个 'n'，所以它没有发送换行符（我试过 '\ r' 也是如此），但似乎正在转义 'n'

由于我找到的大多数示例都来自 Linux，我希望（哈哈，双关语不是故意的！）他们使用的是 GNU 预期，而我使用的是 BSD 预期。我正在阅读手册页，但是“spawn”这个词出现了很多次，我可能需要很长时间才能偶然发现正确的实例。

这是一个似乎最接近工作的结果：

```
flamingo:~ jnojr$ Scripts/getinfo_expect.sh 
Assuming you have one 'sudo' password for all of your hosts, enter it now: 
expect version 5.45
spawn /usr/bin/ssh -t macbook /usr/bin/sudo -v
parent: waiting for sync byte
parent: telling child to go ahead
parent: now unsynchronized from child
spawn: returns {67358}

expect: does "" (spawn_id exp7) match glob pattern "Password:"? no
Password:
expect: does "Password:" (spawn_id exp7) match glob pattern "Password:"? yes
expect: set expect_out(0,string) "Password:"
expect: set expect_out(spawn_id) "exp7"
expect: set expect_out(buffer) "Password:"
send: sending "password\n" to { exp7 }
argv[0] = /usr/bin/expect  argv[1] = -d  argv[2] = -c  argv[3] = 
    spawn /usr/bin/ssh -t macbook /usr/bin/sudo -v
    expect Password: { send password\n }  
set argc 0
set argv0 "/usr/bin/expect"
set argv ""
sudo: no tty present and no askpass program specified[/CODE] 
```

那就是将 '\n' 留在引号之外，如

```
send "$SUDOPASS"\n 
```

它似乎大部分都在工作，除了跳过 ssh 的“-t”选项

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T20:12:03.500

我赞同@BrianCain 的评论，即无密码`ssh`w/`sudo`将是一个更好的解决方案。也就是说，让我们尝试帮助您的`expect`脚本，您可以决定它是否仍然令人头疼。

我相信您在`expect -f -`使用`bash`“此处字符串”( `<<`) 将脚本输入到`expect`. 所以：

```
/usr/bin/expect -f - <<EOD
spawn ssh -t $host /usr/bin/sudo -v
expect "Password:"
send "$SUDOPASS\n"
EOD 
```

# android - android中的if else语句

> ID：15096752
> 
> 赞同：3
> 
> 时间：2013-02-26T18:38:52.437
> 
> 标签：android

我是 Android 新手，在网上找到了一些不错的教程，所以我尝试了一个简单的活动，带有一个`if-else`声明。我正在尝试“正确和错误”提示/ `Toast`：

```
Button page1 = (Button) findViewById(R.id.button2);
       page1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                final ImageView iv1 = (ImageView) findViewById(R.id.imageView1);
                if (iv1.equals(R.drawable.airplane1)) {
                    Toast.makeText(getApplicationContext(), "Correct",
                            Toast.LENGTH_SHORT).show();
                } else if (iv1.equals(R.drawable.airplane2)) {
                    Toast.makeText(getApplicationContext(), "Please put an answer",
                            Toast.LENGTH_SHORT).show();
                } else if (iv1.equals(R.drawable.airplane3)){
                    Toast.makeText(getApplicationContext(), "Wrong",
                            Toast.LENGTH_SHORT).show();
                }
            }

       }); 
```

我不确定我的`if-else`陈述有什么问题，但从不提示。我尝试删除`(iv1.equals(R.drawable.airplane3))`，`(iv1.equals(R.drawable.airplane2))`然后它只显示错误的 Toast。我似乎无法正确提示我。

这是我班级的完整代码：

```
public class MainActivity extends Activity {
private static final Random imagerandom = new Random();

private static final Integer[] Imagesnumber = 
    { R.drawable.airplane1, R.drawable.airplane2, R.drawable.airplane3, };
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Integer a = Imagesnumber[imagerandom.nextInt(Imagesnumber.length)];
    final ImageView iv = (ImageView) findViewById(R.id.imageView1);

    View nextButton = findViewById(R.id.button1);
    nextButton.setOnClickListener(new Button.OnClickListener() {
         public void onClick(View V) {
              int resource = Imagesnumber[imagerandom.nextInt(Imagesnumber.length)];
              iv.setImageResource(resource);
         }
    });
    Button page1 = (Button) findViewById(R.id.button2);
       page1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                final ImageView iv1 = (ImageView) findViewById(R.id.imageView1);
                if (iv1.equals(R.drawable.airplane1)) {
                    Toast.makeText(getApplicationContext(), "Correct",
                            Toast.LENGTH_SHORT).show();
                } else if (iv1.equals(R.drawable.airplane2)) {
                    Toast.makeText(getApplicationContext(), "Please put an answer",
                            Toast.LENGTH_SHORT).show();
                } else if (iv1.equals(R.drawable.airplane3)){
                    Toast.makeText(getApplicationContext(), "Wrong",
                            Toast.LENGTH_SHORT).show();
                }
            }

       });

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:44:58.877

`R.drawable.airplane*`是一个 int，这意味着您将 ImageView 对象与一个 int 进行比较，这绝不是真的。用于`iv.getDrawable().equals(getResources().getDrawable(R.drawable.airplane1));`与 Drawable 对象进行比较。

这可能不是性能方面的最佳选择，您可能希望将显示图像的索引作为类变量来跟踪，并在此基础上做一个条件（或类似的东西）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T19:19:51.263

```
iv1.getDrawable().getConstantState().equals(getResources().getDrawable(R.drawable.airplane1).getConstantState()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T18:45:20.130

您无法将 ImageView 的类型与 int 的类型进行比较

```
iv1.equals(R.drawable.airplane1) 
```

这是错误的

试试这个

```
iv.getDrawable()==getResources().getDrawable(R.drawable.airplane1) 
```

反而

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T18:45:22.950

您正在比较`ImageView`实例和`int`s，检查单击了哪个视图的正确方法是：

```
if (iv1.getId() == R.id......) { ... 
```

这样您就可以将一个`int`与另一个进行比较`int`

# wpf - WPF MediaElement 和 WinMM

> ID：15096754
> 
> 赞同：1
> 
> 时间：2013-02-26T18:38:57.887
> 
> 标签：wpf, winapi, mediaelement, winmm

我已经了解了有关 WinMM 的所有知识（打开/关闭混音器、枚举控件等）。让我感到困惑的是，似乎 WPF 的 MediaElement 通过 WinMM 忽略了我的设置，但 Window 的音量混合器显示我正在正确更改设置.

所以我基本上可以用我的控制来静音音量，看到它在音量混合器中静音，播放声音并听到它，然后双击音量混合器中的静音按钮，播放声音而不听到它。

通过 Window 的 Volume Mixer 完成的操作不仅仅是 WinMM api 调用，而是显示使用 WinMM 设置。

有什么我想念的吗？

我用过每一行，只有 Speaker/WaveOut 工作。我从线路中获得了音量和静音控件，两者具有相同的效果。

这只是导致此问题的 MediaElement。如果我通过 WinMM 播放声音，或者如果我嵌入了本机控件或资源管理器，我可以使用音量控制将其静音。

我的第一个理论是，因为我在 Windows7 中进行测试，所以 MediaElement 被分配给一个单独的会话，而不是应用程序的默认会话，并且不知何故，音量混合器会影响应用程序中的所有会话。在这一点上，我必须根据操作系统选择是使用 WinMM 还是 WASAPI。如果这是真的，那么 WinMM 确实不像 Windows 声称的那样不受支持（为了向后兼容），但也许它们适用于较旧的技术（如 Winforms 和 AFX/MFC）。

编辑：我在这个答案中使用代码： [https ://stackoverflow.com/a/294525/491837](https://stackoverflow.com/a/294525/491837)

# .net - 检查用户是否是外部机器上的本地管理员

> ID：15096756
> 
> 赞同：1
> 
> 时间：2013-02-26T18:39:02.180
> 
> 标签：.net, windows, vb.net, security

我正在编写一个应用程序来聚合几个不同服务器中的每一个上的所有事件日志条目。`MachineName`我可以通过传入to来获取事件日志`EventLog.GetEventLogs`。如果用户不是该机器上的本地管理员，这通常会在某个阶段失败，所以我想提前检查一下，如果是这种情况，请跳到下一组服务器

```
For Each svr As String In Servers

    'TODO: check to see if they are a local administrator, else continue for

    Dim logs As List(Of EventLog) = EventLog.GetEventLogs(svr).ToList
    For Each log As EventLog In logs
        LoadEachOSLogEntry(log)
    Next
Next 
```

大多数解决方案，比如[这里](https://stackoverflow.com/questions/1089046/in-net-c-test-if-user-is-an-administrative-user)的解决方案，只检查用户是否是当前执行机器上的管理员。

```
Dim user As WindowsIdentity = WindowsIdentity.GetCurrent()
Dim principal As New WindowsPrincipal(user)
Dim isAdmin As Boolean = principal.IsInRole(WindowsBuiltInRole.Administrator) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:17:25.027

这是一个尝试。

以下函数将返回用户是否属于`"Administrators"`任何机器上的特定用户组（在我的情况下）。

```
Imports System.DirectoryServices.AccountManagement

Public Shared Function IsMemberOfGroup(userName As String, machineName As String, memberGroup as String) As Boolean
    Dim isMember As Boolean = False
    Using rootContext As New PrincipalContext(ContextType.Machine, machineName), _
          grp As GroupPrincipal = GroupPrincipal.FindByIdentity(rootContext, memberGroup), _
          usr As UserPrincipal = UserPrincipal.FindByIdentity(rootContext, IdentityType.SamAccountName, userName)
        If grp IsNot Nothing AndAlso usr IsNot Nothing Then
            ' Check if the user is a member of the group.
            isMember = grp.GetMembers(True).Contains(usr)
        Else
            isMember = False
        End If
    End Using
    Return isMember
End Function 
```

需要注意的是，运行该方法的用户必须是管理员才能拥有对`PrincipalContext`. 我希望该应用程序能够确定运行该应用程序的用户是否是管理员。

让这个超级有用的唯一方法是调用它，看看它是否提出了“拒绝访问”，类似于已经建议的[hometoast](https://stackoverflow.com/users/2009/hometoast)，但这仍然感觉不是超级“干净”

# java - 使用 Java 客户端实现 Spring Security

> ID：15096764
> 
> 赞同：2
> 
> 时间：2013-02-26T18:39:47.750
> 
> 标签：java, spring, session, spring-security, session-cookies

**客户端**

我有一个使用基本 POST 或 GET 方法连接到远程服务器的 java 应用程序：

```
URL url = new URL(urlStr);
HttpURLConnection conn = (HttpURLConnection) url.openConnection();
conn.setRequestMethod("POST");
conn.setDoOutput(true);
conn.setDoInput(true);
conn.setAllowUserInteraction(false);
conn.setRequestProperty("Content-type", "text/xml; charset=" + ENCODING);

conn.connect();
conn.getOutputStream().write(data.getBytes(ENCODING));
conn.getOutputStream().close(); 
```

（我无法更改此代码，我唯一可以更改的是调用该方法`urlStr`时`data`发送到服务器的内容）。

**[编辑]**：客户端可以是 java 客户端或任何其他客户端（c++、objective-c、..）。这里的重点是我只能访问我的帖子正文中的内容以及 URL。

**服务器端**

在我的服务器端，我想实现 Spring Security（SecurityContext 和会话持久性）。

我了解 Spring Security 是基于浏览器的 cookie`WebApp`来保存有关`session id`. 但就我而言，没有浏览器。

*   我是否需要模拟存储`JSESSIONID`并将其发送回服务器？我不确定这是可能的，因为我需要打电话`conn.addRequestProperty(key, value)`这是不可能的。

*   还有其他方法吗？

谢谢你。

[编辑]

正如@zagyi 所指出的，我可以使用 URL 将会话令牌传递给 Spring，但我仍然不知道如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:12:59.913

在 url 中传递 jsessionid 只需将其附加到 url 的末尾，如下所示：

```
http://localhost:8080/example/auth/login;jsessionid=A06F00609BBA8A4C2B005FB25F90C4C9 
```

如果您将浏览器配置为不接受任何 cookie，您可以看到这一点，在这种情况下，服务器会自动在 url 中包含会话 ID（假设默认的 tomcat 配置）。这个话题也在[这个问题](https://stackoverflow.com/q/436752/1276804)中讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T00:09:36.663

可能有一个客户端解决方案。

我们可以互动的行动点在这里：

```
HttpURLConnection conn = (HttpURLConnection) url.openConnection(); 
```

我们将提供一个自己的（包装的）`HttpURLConnection`，它将处理`JSESSIONID`. 但不幸的是，我们必须更进一步。

诀窍是我们注册了一个新协议，例如“xhttp”，我们用它来包装一个真正的“http”协议连接。因此，您的 URL 将如下所示：

```
xhttp://www.example.com/... 
```

首先，定义一个`URLStreamHandlerFactory`类

```
public class MyURLStreamHandlerFactory implements URLStreamHandlerFactory {
    public URLStreamHandler createURLStreamHandler(String protocol) {
        if ("xhttp".equals(protocol)) {
            return new MyURLStreamHandler();
        }
        return null;
    }
} 
```

在 Java（或应用程序）初始化时，我们可以设置它。每个 JVM 只能执行一次。

```
URLStreamHandlerFactory fac = new MyURLStreamHandlerFactory();
URL.setURLStreamHandlerFactory(fac); 
```

所以，让我们继续吧`MyURLStreamHandler`。

```
public class MyURLStreamHandler extends URLStreamHandler {
    @Override
    protected URLConnection openConnection(URL url) throws IOException {
        return new MyHttpURLConnection(url);
    }
} 
```

这很简单，我们创建自己的连接。让我们做一些肮脏的事情：

```
public final class MyHttpURLConnection extends HttpURLConnection {
    private HttpURLConnection conn;
    public MyHttpURLConnection(URL url) throws MalformedURLException, IOException {
        super(url);
        String newUrlString = url.toExternalForm().substring(1);
        conn = (HttpURLConnection) new URL(newUrlString).openConnection();
    }
    @Override
    public void disconnect() {
        conn.disconnect();
    }
    @Override
    public boolean usingProxy() {
        return false;
    }
    @Override
    public void connect() throws IOException {
        conn.connect();
        conn.setRequestProperty("JSESSIONID", "X");
    }
} 
```

瞧，我们设法访问了我们的连接，并设置了`JSESSIONID`标题。

您只需要编译您的类，将类文件添加到客户端 jar 中，并使 init 代码在运行上述代码的同一 JVM 中以某种方式运行。

如果做不到，还有另一种可能：将以下系统参数设置为客户端 Java 应用程序：

```
-Djava.protocol.handler.pkgs=com.example.myprotocol 
```

在这种情况下，创建一个`com.example.myprotocol.xhttp`（*xhttp*就像您的协议名称一样），并将我们的`MyURLStreamHandler`类重命名为`com.example.myprotocol.xhttp.Handler`. 这是协议解析器将在其中查找它的固定名称。请注意，此`java.protocol.handler.pkgs`属性由安全管理器检查。

# ruby - Youtube Analytics API 7DayTotals 给出奇怪的结果

> ID：15096767
> 
> 赞同：0
> 
> 时间：2013-02-26T18:39:53.137
> 
> 标签：ruby, youtube-api

当我点击 youtubeAnalytics API 时，`{"dimensions": "day"}`我得到了结果行：

`[["2013-02-24", 0.0], ["2013-02-22", 8.0], ["2013-02-23", 0.0]]`

但是，当我更改为时，`{"dimensions": "7DayTotals"}`我得到了结果行：

`[["2013-02-24", 8.0], ["2013-02-22", 8.0], ["2013-02-23", 8.0]]`

我在这里做错了吗？文档说结果应该是一周最后一天返回的视图总和。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:30:15.940

当指定维度 7DayTotals 时，YouTube 分析 API 返回具有滚动 7 天总计的行。

因此，为 2013-02-24 返回的值是从 2013-02-18 到 2013-02-24（含）期间各个天的观看次数的总和。2013-02-25 的值是 2013-02-19 到 2013-02-25 的总和。

这有点奇怪，但这就是正在发生的事情。

# javascript - Jquery 函数不适用于两个或多个表单

> ID：15096774
> 
> 赞同：0
> 
> 时间：2013-02-26T18:40:24.863
> 
> 标签：javascript, jquery, html

大家好，我有以下 jquery 函数，仅当输入有 1 个或多个值时才启用提交，但我的页面上有相同的许多输入和提交按钮 jquery 函数对于第一种形式很好，但它不适用于其他形式。

脚本：

```
$(function () 
{
    $("#textbox").bind("change keyup", function () 
    {      
        if ($("#textbox").val() != "")
            $(this).closest("form").find(":submit").removeAttr("disabled");
        else
            $(this).closest("form").find(":submit").attr("disabled", "disabled");      
    });
}); 
```

HTML：

```
<form action="http://localhost/" method="post" accept-charset="utf-8">
    <input type="text" id="textbox" name="textbox" />
    <input type="submit" id="submit" name="submit" value="textbox" disabled="disabled" />
</form>

<form action="http://localhost/" method="post" accept-charset="utf-8">
    <input type="text" id="textbox" name="textbox" />
    <input type="submit" id="submit" name="submit" value="textbox" disabled="disabled" />
</form>

<form action="http://localhost/" method="post" accept-charset="utf-8">
    <input type="text" id="textbox" name="textbox" />
    <input type="submit" id="submit" name="submit" value="textbox" disabled="disabled" />
</form> 
```

当我在第一个文本框中输入任何内容时，提交按钮会被激活并且工作正常，但是如果我在第二个或第三个文本框中添加任何值，则提交按钮不会被激活。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:43:16.863

因为您只能在同一页面上添加一个 id="textbox" 的元素。

在输入中添加一些类名（例如“textbox”），并在事件绑定上将选择器“#textbox”更改为“.textbox”：

```
$(function () 
{
    $(".textbox").bind("change keyup", function () 
    {      
        if ($(this).val() != "")
            $(this).closest("form").find(":submit").removeAttr("disabled");
        else
            $(this).closest("form").find(":submit").attr("disabled", "disabled");      
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:44:53.543

只需使用`class`代替，`id`因为您不能有多个相同的元素`id`。

此外，您需要`$(this)`在事件处理程序内部使用来访问更改的元素。

试试这个：

```
<script type="text/javascript">
    $(function () {
        $(".textbox").bind("change keyup", function () {      
                if ($(this).val() != "")
                    $(this).closest("form").find(":submit").removeAttr("disabled");
                else
                    $(this).closest("form").find(":submit").attr("disabled", "disabled");      
            });
        });
</script>

<form action="http://localhost/" method="post" accept-charset="utf-8">
    <input type="text" class="textbox" name="textbox" />
    <input type="submit" class="submit" name="submit" value="textbox" disabled="disabled" />
</form>

<form action="http://localhost/" method="post" accept-charset="utf-8">
    <input type="text" class="textbox" name="textbox" />
    <input type="submit" class="submit" name="submit" value="textbox" disabled="disabled" />
</form>

<form action="http://localhost/" method="post" accept-charset="utf-8">
    <input type="text" class="textbox" name="textbox" />
    <input type="submit" class="submit" name="submit" value="textbox" disabled="disabled" />
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:46:00.980

首先，您在`ID's`更多内容`div`中使用相同的内容`html`，这并不好。ID 是唯一的。改用 a `class`。否则`classes`两者都不起作用，您应该尝试使用 3 个不同的 div 或`$.each()`函数或识别`keyup()`

# jquery - jquery调整滚动条的大小以适应覆盖div的高度

> ID：15096778
> 
> 赞同：0
> 
> 时间：2013-02-26T18:40:41.850
> 
> 标签：jquery, html, css

我想创建类似的东西：http: [//tapiture.com/popular](http://tapiture.com/popular)

不是网站，而是 onClick 图像事件。单击图像时，滚动条会调整为覆盖图像的高度。

我怎样才能使用 jquery 做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:48:20.860

当他们打开一个模式时，他们将以下类添加到正文中

```
 .modal-open {
        overflow: hidden;
        position: relative;
    } 
```

因此，在隐藏溢出的情况下，模态后面的所有图像都被隐藏了。所以滚动条适应模态的内容。

在模态层上，他们添加了这个类

```
.modal-scrollable {
    bottom: 0;
    left: 0;
    overflow: auto;
    position: fixed;
    right: 0;
    top: 0;
} 
```

注意溢出是如何自动的，这意味着滚动条会在需要时显示在该层上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:52:59.400

正如所承诺的，这是我所做的代码。

查询：

```
 $('.item').on('click','img', function(){
        $this = $(this);
        $('body').addClass('modal_open');
        $('#overlay').fadeIn();
        $('#img_zoom').html('new and bigger image tag').fadeIn();
    }); 
```

CSS：

```
#overlay{z-index: 1; position: fixed; height: 100%; width:100%; background: rgba(255,255,255,0.3); display:none;}
#img_zoom{position: fixed; z-index: 2; box-shadow: 0 0 5px #000; display:none; bottom: 0; left: 0; overflow: auto; right: 0; top: 0;}

.modal_open {overflow: hidden; position: relative; }
.modal_scrollable {bottom: 0; left: 0; overflow: auto; position: fixed; right: 0; top: 0; } 
```

感谢**ComputerArts**

# ios - 无法从核心数据中删除实体，使用 RestKit 0.20

> ID：15096781
> 
> 赞同：7
> 
> 时间：2013-02-26T18:40:55.040
> 
> 标签：ios, core-data, restkit, restkit-0.20

下面的代码不会删除实体。控制台上会显示“删除成功”消息，以便找到实体。我使用的所有其他操作都成功。

我正在使用 RestKit 0.20。

```
NSManagedObjectContext *context = [RKManagedObjectStore defaultStore].mainQueueManagedObjectContext;
NSError *error = nil;

NSFetchRequest * fetchRequest = [[NSFetchRequest alloc] init];
[fetchRequest setEntity: [NSEntityDescription entityForName:@"Auction" inManagedObjectContext:context]];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"AuctionID = %d", auctionID];
[fetchRequest setPredicate:predicate];

NSArray *result = [context executeFetchRequest:fetchRequest error:&error];
if(result.count) {
    Auction *block = result[0];
    [context deleteObject:block];
    BOOL status = [context save:&error];
    if (status == NO) {
        NSLog(@"delete falied for AuctionID:%d, error: %@", auctionID, error);
    }
    else {
        [context processPendingChanges];
        NSLog(@"delete was successful for AuctionID:%d", auctionID);

    }
} 
```

为什么此删除操作可能不成功，以及使它工作的解决方案是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T08:42:12.713

我找到了这个解决方案：

实际上，您必须从持久存储中获取数据，而不是从当前创建的托管上下文中获取数据：

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"MyModel"];
NSSortDescriptor *descriptor = [NSSortDescriptor sortDescriptorWithKey:@"id" ascending:NO];
fetchRequest.sortDescriptors = @[descriptor];

// Setup fetched results
NSFetchedResultsController *fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                                                        managedObjectContext:[RKManagedObjectStore defaultStore].persistentStoreManagedObjectContext
                                                                          sectionNameKeyPath:nil
                                                                                   cacheName:nil];

// AND TO DELETE A MODEL :

[[RKManagedObjectStore defaultStore].persistentStoreManagedObjectContext deleteObject:myobject]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T11:36:00.780

我正在做同样的事情并且有几乎相同的代码。在我的代码中，我也完成了删除并保存了......

但是，当我检查数据库时它没有被删除。

问题不在于模拟器......当然，我在设备上也遇到了同样的问题。有一种叫做子上下文的东西，这可能是原因...检查这些链接[http://restkit.org/api/0.20.0-dev/Classes/RKManagedObjectRequestOperation.html#//api/name/managedObjectContext](http://restkit.org/api/0.20.0-dev/Classes/RKManagedObjectRequestOperation.html#//api/name/managedObjectContext) [RestKit 0.20 —  创建新的 NSManagedObject 的首选方法是什么？](https://stackoverflow.com/questions/13752369/restkit-0-20-what-is-the-preferred-way-to-create-a-new-nsmanagedobject) . 如果您找到解决方案，请在此处分享

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-03T19:40:47.220

@Sumitiscreative 我今天遇到了同样的问题。如果发现通常使用 Core Data 你必须使用

```
[NSManagedObject save:] 
```

让它存储更改。我通过 Restkit 挖掘了一下，发现了这个

```
[[RKManagedObjectStore defaultStore].persistentStoreManagedObjectContext deleteObject:(NSManagedObject *)];
[[RKManagedObjectStore defaultStore].persistentStoreManagedObjectContext saveToPersistantStore:(NSError *)]; 
```

在上述删除方法之后调用它可以将对象从数据库中删除。

**编辑 - 我也会对此发表评论，但我没有选择

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-08T08:07:20.623

@Lance 嘿，请用最新版本更新你的 restkit。现在，如果您的服务器相关配置正确，这适用于最新版本。如果您从服务器获得删除请求的成功代码。然后，restkit 会自动删除数据。

如果您需要从外部删除任何数据，您可以使用 persistentStoreManagedObjectContext 并在删除后保存。

此外，如果您想最后检查它是否通过 restkit 正确删除。你能做的是……

如果项目存在，则在成功检查相同的 id 后发出删除请求。（只是为了帮助）

# ios - 检查路径/文件是否存在 dropbox api IOS

> ID：15096785
> 
> 赞同：3
> 
> 时间：2013-02-26T18:41:07.193
> 
> 标签：ios, xcode

有没有办法通过搜索文件的名称/路径来检查 Dropbox 中是否存在文件？我似乎没有在网上找到任何信息，我唯一的想法是尝试使用这种方法下载它：

```
[self.restClient loadFile:filename3 intoPath:CommentPath]; 
```

然后看看结果，不过这种方法不靠谱。有合适的吗？

# asp.net - 下拉 AutoPostBack 不适用于 Win 7 的 IE10

> ID：15096787
> 
> 赞同：1
> 
> 时间：2013-02-26T18:41:10.623
> 
> 标签：asp.net, drop-down-menu, postback, internet-explorer-10

我刚刚下载了适用于 Windows 7 64bit 的 IE10 [今天发布] 并立即发现我网站的 Dropdown AutoPost Back 无法正常工作。我没有收到任何错误，但在 IE10 的开发控制台中有几个警告。它们都是在 ASP.NET Ajax 工具包元素上生成的。

我想将它作为错误发布到 IE 10 团队，但我发现我的开发服务器没有这个问题，只有生产服务器有这个问题。更不用说两台服务器上的代码完全相同了。但是，开发服务器位于带有 Windows 2012 的 Azure VM 上，而生产服务器与 Windows 2008 共享 Web 托管 [版本未知]

这对浏览器有什么影响吗？

编辑：如果重要，请不要跟踪器关闭...

EDIT2：我发现问题仅出现在基于 IIS 7 的共享主机上，在 Windows 2012 上，该站点运行良好。所以可能 IIS 7 不知道 IE 10，因此它不能正确呈现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T11:57:53.733

Scott Hanselman 在他的博客上解释了这一点。

[http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

# excel - excel VBA 从excel替换Outlook OFT文件中的文本

> ID：15096790
> 
> 赞同：1
> 
> 时间：2013-02-26T18:41:24.380
> 
> 标签：excel, vba, outlook, outlook-2010

在excel中，我有三列：

```
A:        B:               C:
UserName  UsermailAddress  RecordToBeDeleted 
```

我在 excel 中使用下面的代码从 Outlook（使用 OFT 文件）向 Excel 电子表格 B 列中的每个电子邮件地址发送和发送电子邮件。

我的代码可以发送到 B 列中的每个电子邮件地址

我遇到的问题是，在电子邮件（OFT 文件）中，我有两个关键字（`UserName`和`RecordToBeDeleted`），我需要在与该邮件地址一起发送的每封电子邮件中替换它们。

该代码在 OFT 文件中找到这两个关键字，但只是将它们删除或用空条目替换它们。

我做错了什么，以便我可以替换 OFT 邮件消息中 excel 文件中的单词。

我在 excel 表中的 VBA 是：

```
Sub RunEmails()
    Dim i As Integer
    Dim rngCell As Range

    For Each rngCell In Range("A2", "A" & CStr(Cells(Rows.Count, "A").End(xlUp).Row))
        Call DoTest(rngCell.Offset(0, 1).Value, "JDoe@abc.com", rngCell.Offset(0, 2).Value, rngCell.Value)
    Next rngCell

End Sub

Sub DoTest(EmailAddress As String, CCAddress As String, RecordToBeDeleted As String, UserName As String)
    Dim oApp As New Outlook.Application

    Dim olNewMail As Outlook.MailItem
    Const Template As String = "D:\Documents\list\list-mail.oft"

    Set olNewMail = oApp.CreateItemFromTemplate(Template)

    olNewMail.Recipients.Add EmailAddress
    olNewMail.HTMLBody = Replace(olNewMail.HTMLBody, ">UserName<", UserName)
    olNewMail.HTMLBody = Replace(olNewMail.HTMLBody, ">RecordToBeDeleted<", RecordToBeDeleted)
    olNewMail.VotingOptions = "Can distribution list be Deleted YES;Can distribution list be Deleted NO"

    olNewMail.Send
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:00:57.767

似乎`UserName`and `RecordToBeDeleted`in `DoTest`（和其他变量）的值是空的，因为您从主过程调用 sub ，但是参数是通过`ByRef`- 或**通过引用**传递的，这是默认情况下的。在你的情况下，这意味着你得到你所拥有的 - 因为它们没有在 中声明/分配`RunEmails`，所以`ByRef`value 也是空的。在您的情况下使用`ByVal`参数：

```
Sub DoTest(ByVal EmailAddress As String, ByVal CCAddress As String, ByVal RecordToBeDeleted As String, ByVal UserName As String) 
```

阅读更多：[通过值或引用传递参数](http://msdn.microsoft.com/en-us/library/office/aa164263%28v=office.10%29.aspx)。

希望这会有所帮助。

# django - Django 中的静态资产未找到 STATICFILES_DIRS

> ID：15096792
> 
> 赞同：1
> 
> 时间：2013-02-26T18:41:27.380
> 
> 标签：django, django-staticfiles

这是我在尝试加载 {{STATIC_URL}}img/memestatlogo2.jpg 时收到的错误。为什么 django 不在 STATICFILES_DIRS 中查找 img/memestatlogo2.jpg？

```
Page not found (404)
Request Method: GET
Request URL:    http://127.0.0.1:8000/static/img/memestatlogo2.jpg

Using the URLconf defined in memestat.urls, Django tried these URL patterns, in this order:
^$
The current URL, static/img/memestatlogo2.jpg, didn't match any of these. 
```

以下是我的 settings.py 中的相关配置

```
STATIC_ROOT = ''

STATIC_URL = '/static/'

STATICFILES_DIRS = ('/home/ryan/Programming/OpenCV-2.4.2/msheroku/memestat/stats/') 
```

然后图像位于

'/home/ryan/Programming/OpenCV-2.4.2/msheroku/memestat/stats/img/memestatlogo2.jpg'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:16:04.367

`STATICFILES_DIRS`仅在执行`collectstatic`命令时使用。然后将文件复制到`STATIC_ROOT`上面的示例中未设置的文件。

您需要设置`STATIC_ROOT`为要复制静态文件的目录。此目录还包含您的项目范围的静态文件，这些文件不属于任何应用程序，例如 robots.txt、favicon.ico、您的徽标和背景图像。

# scheme - 方案更换问题

> ID：15096796
> 
> 赞同：1
> 
> 时间：2013-02-26T18:41:38.263
> 
> 标签：scheme, racket

此代码用第二人称词替换第一人称词，反之亦然。但是，对于短语中的每个单词，它都会遍历每一对，所以有时它会变回来。

这是代码：

```
(define (replace pattern replacement lst replacement-pairs)
  (cond ((null? lst) '())
    ((equal? (car lst) pattern)
       (cons replacement
             (many-replace (cdr replacement-pairs) (cdr lst))))
    (else (cons (car lst)
          (many-replace (cdr replacement-pairs) (cdr lst))))))

(define (many-replace replacement-pairs lst)
  (cond ((null? replacement-pairs) lst)
     (else (let ((pat-rep (car replacement-pairs)))
        (replace (car pat-rep)
                 (cadr pat-rep)
                 (many-replace (cdr replacement-pairs)
                 lst) replacement-pairs)))))

(define (change-person phrase)
  (many-replace '((i you) (me you) (am are) (my your) (are am) (you i) (your my))
            phrase)) 
```

例如，如果我输入

```
(change-person '(you are not being very helpful to me)) 
```

它会把你变成我，然后又变成你。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T19:16:49.390

程序`replace`又 `many-replace`过于复杂，而且相互递归也不是你想的那样。如果我们简化这些过程并确保只对输入列表执行一次传递，我们可以获得正确的答案：

```
(define (replace replacement-pairs pattern)
  (cond ((null? replacement-pairs)
         pattern)
        ((equal? (caar replacement-pairs) pattern)
         (cadar replacement-pairs))
        (else
         (replace (cdr replacement-pairs) pattern))))

(define (many-replace replacement-pairs lst)
  (if (null? lst)
      '()
      (cons (replace replacement-pairs (car lst))
            (many-replace replacement-pairs (cdr lst))))) 
```

敏锐的眼睛会注意到，前面的过程可以通过使用一些高阶过程来简洁地表达出来。更惯用的解决方案可能如下所示：

```
(define (replace replacement-pairs pattern)
  (cond ((assoc pattern replacement-pairs) => cadr)
        (else pattern)))

(define (many-replace replacement-pairs lst)
  (map (curry replace replacement-pairs) lst)) 
```

无论哪种方式，它都按预期工作：

```
(change-person '(you are not being very helpful to me))
=> '(i am not being very helpful to you) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:16:29.683

我写了一个稍微简单的解决方案：

```
(define (many-replace pattern phrase)
  (let loop ((phrase phrase) (result '()))
    (if (empty? phrase) (reverse result)
        (let* ((c (car phrase)) (a (assoc c pattern)))
          (if a
              (loop (cdr phrase) (cons (cadr a) result))
              (loop (cdr phrase) (cons c result)))))))

(change-person '(you are not being very helpful to me))
=> '(i am not being very helpful to you) 
```

# ruby-on-rails - 如何使用设计重定向

> ID：15096799
> 
> 赞同：2
> 
> 时间：2013-02-26T18:41:40.603
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

所以我使用 Devise 构建了我的第一个应用程序！我很兴奋，但我想知道登录后如何让应用程序重新定向到特定页面？

换句话说，

例如，我如何让 rails 重定向到 microposts 页面，而不是登录并留在主页？

在我的情况下，它有时只重定向到帖子页面，而其他时候它只停留在初始主页。

这是我的帖子控制器：

```
class PostsController < ApplicationController
 before_filter :authenticate_user!, :except => [:show, :index]

  def posts
  @title = "Posts"
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:47:17.327

默认情况下，设计会将您重定向到根目录，您可以随意自定义`after_sign_in_path_for`方法。您还`after_sign_out_path_for`可以使用自定义方法。

```
ApplicationController < ActionController::Base
  # extra stuff

  def after_sign_in_path_for(user)
    if something
      posts_path
    else
      root_path
    end
  end

  def after_sign_out_path_for(user)
    new_some_other_path
  end
end 
```

# bash - 使用 bash 脚本从变量中获取最大值

> ID：15096800
> 
> 赞同：-1
> 
> 时间：2013-02-26T18:41:43.487
> 
> 标签：bash, variables, highest

我正在尝试从 $countip 中提取最高数字并将其复制到 $totalip，问题是 $totalip 总是返回 0。任何人都可以帮助我，我是 bash 脚本的新手。

```
for srcip in `cat /var/log/messages | grep "WACSLAW1 CRITICAL INCOMING" | awk '{ print $14 }'|grep -v 192.168.1\. |grep -v IN=eth1 |grep -v MAC`;do
        if (! grep "$srcip" /var/wacstemp/ids.tmp > /dev/null) ; then
                countip=0
                echo $srcip >> /var/wacstemp/ids.tmp
        else
                countip=`expr $countip + 1`

                        if [ $countip -gt $totalip ];
                        then 
                        #       echo $countip
                                countip=$totalip
                        #       echo $totalip
                        fi
        fi
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:52:37.130

你必须切换

```
countip=$totalip 
```

至

```
totalip=$countip 
```

否则`totalip`永远不会更新。

*OT*：您可以将初始过滤器简化为

```
awk '/WACSLAW1 CRITICAL INCOMING/ && $14 !~ /192.168.1./ && $14 !~ /IN=eth1/ && $14 !~ /MAC/ { print $14 }' /var/log/messages 
```

# xcode - XCode 4.6 语法颜色仅显示蓝色

> ID：15096804
> 
> 赞同：0
> 
> 时间：2013-02-26T18:41:56.347
> 
> 标签：xcode, syntax-highlighting

现在我在我的 Mac Mountain Lion 中重新安装了 XCodes 4.6。

之后，所有语法颜色都只显示蓝色，如下图所示。

并且不显示行号。

![在此处输入图像描述](../Images/eae53c7638bc7503f38205a31de99bb0.png)

我该怎么做请帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:47:28.747

您可以在 Xcode 的首选项中设置字体和颜色。它甚至包括一组带有预设字体/颜色组合的“主题”。从 Apple 的开发者网站查看此链接：

[字体和颜色首选项帮助：设置字体和颜色首选项](http://developer.apple.com/library/ios/#recipes/xcode_help-fonts_and_colors_preferences_help/Recipe.html)

至于行号，在stackoverflow上进行搜索会有所帮助：

[iphone - Xcode 4 -- 查看我所在的代码行号](https://stackoverflow.com/questions/5901758/xcode-4-see-the-number-of-the-line-of-code-i-am-on)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:48:05.743

不知道为什么会这样，但是您的设置可以在首选项中找到

首选项 -> 文本编辑 -> 编辑 -> 显示：行号

# java - 我的代码有什么问题？Zeller 的同余算法代码

> ID：15096806
> 
> 赞同：0
> 
> 时间：2013-02-26T18:41:57.980
> 
> 标签：java

我的代码有什么问题？出于某种原因，我一直在休息一天？例如，今天是 2013 年 26 日，是星期二，但程序告诉我是星期三。我正在使用 Zeller 的一致性算法。

```
import javax.swing.JOptionPane;
public class zeller {
    public static void main(String[] args) {
        String yearString = JOptionPane.showInputDialog("Enter the year:");

        int year = Integer.parseInt(yearString);

        String monthString = JOptionPane.showInputDialog("Enter the month (3-12)(January and Feburary are 13 and 14):");
        int month = Integer.parseInt(monthString);

        String dayString = JOptionPane.showInputDialog("Enter the day 1-31: ");  
        int day = Integer.parseInt(dayString);

        switch (month) {
            case 13:  monthString = "January";
                break;
            case 14:  monthString = "February";
                break;
            case 3:  monthString = "March";
                break;
            case 4:  monthString = "April";
                break;
            case 5:  monthString = "May";
                break;
            case 6:  monthString = "June";
                break;
            case 7:  monthString = "July";
                break;
            case 8:  monthString = "August";
                break;
            case 9:  monthString = "September";
                break;
            case 10: monthString = "October";
                break;
            case 11: monthString = "November";
                break;
            case 12: monthString = "December";
                break;
            default: monthString = "Invalid month";
                break;
        }

        int j = year / 100;
        int k = year % 100 ;
        double h = (day + ((26*(month + 1)) / 10) + k + (k / 4) +(j / 4) + (5 * j)) % 7;
        int h1 = (int)h;

        switch (h1) {
            case 0:  dayString = "Saturday";
                break;
            case 1:  dayString = "Sunday";
                break;
            case 2:  dayString = "Monday";
                break;
            case 3:  dayString = "Tuesday";
                break;
            case 4:  dayString = "Wednesday";
                break;
            case 5:  dayString = "Thursday";
                break;
            case 6:  dayString = "Friday";
                break;

            default: monthString = "Invalid month";
                break;
        }

        System.out.println("Day of the week is: " + dayString);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-29T01:09:53.780

1.  1 月和 2 月算作上一年的第 13 和第 14 个月，因此如果您希望用户为 1 月或 2 月输入 1 或 2 的实际月份，您可以添加如下代码：

```
if (month == 1 ){
    month = 13;
     year -=1;
 }
else if (month == 2) {
     month = 14;
     year -=1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:03:16.620

如果是一月或二月，则需要修改年份。维基百科上的解释：

> 可以很容易地看出，在给定的一年中，3 月 1 日（如果那是星期六，则为 3 月 2 日）是一个很好的考试日期；并且，在给定的世纪中，最好的测试年份是 100 的倍数。Zeller 使用十进制算术，发现使用 J 和 K 来表示年份很方便。但是在使用计算机时，处理修改后的 Y 年会更简单，即1月和 2 月期间的**Y - 1 ：**

我修改了您的代码如下，它可以工作：

```
import javax.swing.JOptionPane;

public class zeller {
    public static void main(final String[] args) {

        String yearString = JOptionPane.showInputDialog("Enter the year:");

        int year = Integer.parseInt(yearString);

        String monthString =
            JOptionPane.showInputDialog("Enter the month (3-12)(January and Feburary are 13 and 14):");
        int month = Integer.parseInt(monthString);

        String dayString = JOptionPane.showInputDialog("Enter the day 1-31: ");
        int day = Integer.parseInt(dayString);

        switch (month) {
        case 14:
            year--;
            monthString = "January";
            break;
        case 13:
            year--;
            monthString = "February";
            break;
        case 3:
            monthString = "March";
            break;
        case 4:
            monthString = "April";
            break;
        case 5:
            monthString = "May";
            break;
        case 6:
            monthString = "June";
            break;
        case 7:
            monthString = "July";
            break;
        case 8:
            monthString = "August";
            break;
        case 9:
            monthString = "September";
            break;
        case 10:
            monthString = "October";
            break;
        case 11:
            monthString = "November";
            break;
        case 12:
            monthString = "December";
            break;
        default:
            monthString = "Invalid month";
            break;
        }
        int j = year / 100;
        int k = year % 100;
        double h = (day + ((13 * (month + 1) / 5)) + k + (k / 4) + (j / 4) + (5 * j)) % 7;
        int h1 = (int) h;
        switch (h1) {
        case 0:
            dayString = "Saturday";
            break;
        case 1:
            dayString = "Sunday";
            break;
        case 2:
            dayString = "Monday";
            break;
        case 3:
            dayString = "Tuesday";
            break;
        case 4:
            dayString = "Wednesday";
            break;
        case 5:
            dayString = "Thursday";
            break;
        case 6:
            dayString = "Friday";
            break;

        default:
            monthString = "Invalid month";
            break;
        }

        System.out.println("Day of the week is: " + dayString);

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:13:11.253

来自维基百科，

> 在这个算法中，1 月和 2 月被算作上一年的第 13 个月和第 14 个月。例如，如果是 2010 年 2 月 2 日，则算法将日期计算为 2009 年第 14 个月的第二天（DD/MM/YYYY 格式的 02/14/2009）。

因此，您的代码在技术上没有问题；输入 02/26/2013（今天）作为 2013 年第 14 个月的第 26 天实际上是计算 02/26/ **2014**的星期几。

# java - 在库方法中更改全局变量时，我无法更改它的值

> ID：15096809
> 
> 赞同：0
> 
> 时间：2013-02-26T18:42:17.773
> 
> 标签：java, android, processing, osc

我正在尝试在处理中更改 Android 应用程序中的布局，布局只是在 void draw() 中运行的两种不同方法，但程序似乎无法识别我试图在 void 中更改的 currentLayout 值的变化振荡器事件。

当我在 OscEvent 中打印 currentLayout 时，该值会更改并设置为 2，但如果我在 draw() 中打印它，它永远不会改变。所以这就是正在发生的事情：

*   我可以打印“更改！”
*   如果我在 OscEvent() 中检查它，currentLayout 的值会发生变化并注意到
*   如果我在 draw() 中检查它，currentLayout 的值不会改变也不会注意到
*   当我使用不是来自 OscP5 库的方法时，我还能够成功地更改值和布局，但我不确定这会如何影响任何事情。

代码的重要部分：

```
public int currentLayout;

void setup() {
  currentLayout=1;//vilken scen man börjar på, kolla switchen i draw()
} 

void draw() {
  switch(currentLayout) {
  case 1:
    defaultLayout();
    break;
  case 2:
    task1();
    break;
  }
 println(currentLayout);
}
void oscEvent(OscMessage theOscMessage) {
  /* get and print the address pattern and the typetag of the received OscMessage */
 String[] list =split(theOscMessage.addrPattern(), '/');
  println(list[1]);
  if (list[1].equals("layout")) {
    println("change!");
    currentLayout=2;
  }
} 
```

感谢所有帮助和建议！谢谢。

# r - 为什么在分组 data.table 中的 lm 上使用更新会丢失其模型数据？

> ID：15096811
> 
> 赞同：12
> 
> 时间：2013-02-26T18:42:26.103
> 
> 标签：r, data.table, lm

好吧，这很奇怪。我怀疑这是内部的一个错误`data.table`，但如果有人能解释为什么会发生这种情况，那将会很有用 - 究竟在`update`做什么？

我正在使用`list(list())`里面的技巧`data.table`来存储拟合的模型。当您为不同的分组创建一系列`lm`对象，然后创建`update`这些模型时，所有模型的模型数据将成为最后一个分组的模型数据。这似乎是一个参考挂在某个应该制作副本的地方，但我找不到在哪里，也无法在 and 之外复制`lm`它`update`。

**具体例子：**

从 iris 数据开始，首先使三个物种的样本量不同，然后`lm`为每个物种拟合一个模型，更新这些模型：

```
set.seed(3)
DT = data.table(iris)
DT = DT[rnorm(150) < 0.9]
fit = DT[, list(list(lm(Sepal.Length ~ Sepal.Width + Petal.Length))),
          by = Species]
fit2 = fit[, list(list(update(V1[[1]], ~.-Sepal.Length))), by = Species] 
```

原始数据表中每个物种的数量不同

```
DT[,.N, by = Species]
#       Species  N
# 1:     setosa 41
# 2: versicolor 39
# 3:  virginica 42 
```

第一次拟合证实了这一点：

```
fit[, nobs(V1[[1]]), by = Species]
#       Species V1
# 1:     setosa 41
# 2: versicolor 39
# 3:  virginica 42 
```

但更新后的第二次拟合显示所有模型的 42

```
fit2[, nobs(V1[[1]]), by = Species]
#       Species V1
# 1:     setosa 42
# 2: versicolor 42
# 3:  virginica 42 
```

我们还可以查看包含用于拟合的数据的模型属性，并看到所有模型确实都在使用最终组数据。问题是这是怎么发生的？

```
head(fit$V1[[1]]$model)
#   Sepal.Length Sepal.Width Petal.Length
# 1          5.1         3.5          1.4
# 2          4.9         3.0          1.4
# 3          4.7         3.2          1.3
# 4          4.6         3.1          1.5
# 5          5.0         3.6          1.4
# 6          5.4         3.9          1.7
head(fit$V1[[3]]$model)
#   Sepal.Length Sepal.Width Petal.Length
# 1          6.3         3.3          6.0
# 2          5.8         2.7          5.1
# 3          6.3         2.9          5.6
# 4          7.6         3.0          6.6
# 5          4.9         2.5          4.5
# 6          7.3         2.9          6.3
head(fit2$V1[[1]]$model)
#   Sepal.Length Sepal.Width Petal.Length
# 1          6.3         3.3          6.0
# 2          5.8         2.7          5.1
# 3          6.3         2.9          5.6
# 4          7.6         3.0          6.6
# 5          4.9         2.5          4.5
# 6          7.3         2.9          6.3
head(fit2$V1[[3]]$model)
#   Sepal.Length Sepal.Width Petal.Length
# 1          6.3         3.3          6.0
# 2          5.8         2.7          5.1
# 3          6.3         2.9          5.6
# 4          7.6         3.0          6.6
# 5          4.9         2.5          4.5
# 6          7.3         2.9          6.3 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T04:07:53.380

这不是答案，但评论太长了

对于`.Environment`每个生成的模型，术语组件都是相同的

```
e1 <- attr(fit[['V1']][[1]]$terms, '.Environment')
e2 <- attr(fit[['V1']][[2]]$terms, '.Environment')
e3 <- attr(fit[['V1']][[3]]$terms, '.Environment')
identical(e1,e2)
## TRUE
identical(e2, e3)
## TRUE 
```

似乎对于按组进行的每次评估（这是有效的）`data.table`都使用相同*的内存位*（我的非技术术语）。`j`但是，当`update`被调用时，它正在使用它来重新调整模型。这将包含最后一组的值。

所以，如果你捏造这个，它会起作用的

```
fit = DT[, { xx <-list2env(copy(.SD))

             mymodel <-lm(Sepal.Length ~ Sepal.Width + Petal.Length)
             attr(mymodel$terms, '.Environment') <- xx
             list(list(mymodel))}, by= 'Species']

lfit2 <- fit[, list(list(update(V1[[1]], ~.-Sepal.Width))), by = Species]
lfit2[,lapply(V1,nobs)]
V1 V2 V3
1: 41 39 42
# using your exact diagnostic coding.
lfit2[,nobs(V1[[1]]),by = Species]
      Species V1
1:     setosa 41
2: versicolor 39
3:  virginica 42 
```

不是一个长期的解决方案，但至少是一种解决方法。

# java - java单机应用程序属性文件密码保护查询

> ID：15096814
> 
> 赞同：-1
> 
> 时间：2013-02-26T18:42:36.670
> 
> 标签：java

我们有一个托管在实时服务器上的网站，我们开发了一个摆动应用程序，通过它我们连接我们网站的远程数据库。这个应用程序还提供从系统上传文件到我们网站的功能，比如 picassa 软件。现在我们是计划将此应用程序放在我们的网站上，以便其他人可以下载和使用它。

如果我喜欢，其他人可能会将我的 .exe 文件提取到 jar 文件中。可能会看到属性文件并可以获得数据库和 ftp 客户端密码。那么我应该如何为我的属性文件提供安全性。

像 picassa 这样的软件如何保护他们的密码不被我们发现。请对这些问题提出一个想法，以便我们进一步进行。

提前致谢 ，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:19:00.460

您的带有远程数据库的网站是否有提供 Web 内容的应用程序服务器？如果不是，数据库是干什么用的？

如果是这样，您应该编写一个与 Swing 应用程序通信的[REST 服务](http://docs.oracle.com/javaee/6/tutorial/doc/giepu.html)或[Web 服务](http://docs.oracle.com/javaee/6/tutorial/doc/bnayl.html)，以便所有数据库连接都是从应用程序服务器到数据库，而不是从您的 Swing 应用程序直接到数据库。这有很多好处：除了您已经概述的安全性之外，应用程序服务器和数据库之间的延迟比 Swing 应用程序和数据库之间的延迟要少得多。此外，它使您有机会在服务器上封装业务逻辑并重用 Web 应用程序中的代码，从而将其从 Swing 应用程序中提取出来。

当然，您随后需要保护服务本身。为此，您可以使用像[Spring Security](http://static.springsource.org/spring-security/site/)这样的用户身份验证系统来确保只有某些用户可以访问您的服务。这通常采用登录 API 的形式，该 API 建立一个临时会话令牌，然后对服务的所有后续请求在标头（SOAP 标头、HTTP 标头等）中将该令牌提供给服务。

对于 FTP 要求，您也可以在服务端执行此操作，尽管您将潜在的大文件传输到您的服务器只是为了将它们上传到 FTP 站点。或者，如果可行，您可以为不同的用户设置不同的用户名和密码，然后输入他们的凭据，然后才能通过 FTP 访问他们的内容。这样就没有共享的 FTP 密码，您不必担心暴露它。

# intuit-partner-platform - 如何识别账户类型

> ID：15096822
> 
> 赞同：0
> 
> 时间：2013-02-26T18:42:47.683
> 
> 标签：intuit-partner-platform

我使用`getAccount()`and获取帐户列表`discoverAndAddAccounts()`。对于每种帐户类型（CREDIT、LOAN 等），我需要访问一组特定的字段。例如，我想访问 CreditAccount 的 creditMaxAmount 字段。但是，我似乎没有找到一种方法来识别给定帐户对象的“类型”。

总之，给定上述函数的输出，我如何识别帐户类型以访问特定于该帐户类型的字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:51:44.237

帐户类型由 Account 标头标识。

有关响应 XML，请参阅[https://ipp.developer.intuit.com/index.php?title=0010_Intuit_Partner_Platform/0020_Aggregation_%26_Categorization_Apps/AggCat_API/0020_API_Documentation/0050getLoginAccounts](https://ipp.developer.intuit.com/index.php?title=0010_Intuit_Partner_Platform/0020_Aggregation_%26_Categorization_Apps/AggCat_API/0020_API_Documentation/0050getLoginAccounts)。

如您所见，有 InvestmentAccount、CreditAccount、BankingAccount、LoanAccount、... 和 OtherAccount。

如果某个帐户显示为 OtherAccount，则表示它尚未设置为特定帐户。您可以使用 updateAccountType 来设置它应该是的帐户类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T19:03:38.997

```
<ns8:AccountList xmlns="http://schema.intuit.com/platform/fdatafeed/account/v1" 
    xmlns:ns2="http://schema.intuit.com/platform/fdatafeed/creditaccount/v1" 
    xmlns:ns3="http://schema.intuit.com/platform/fdatafeed/rewardsaccount/v1" 
    xmlns:ns4="http://schema.intuit.com/platform/fdatafeed/bankingaccount/v1" 
    xmlns:ns5="http://schema.intuit.com/platform/fdatafeed/investmentaccount/v1" 
    xmlns:ns6="http://schema.intuit.com/platform/fdatafeed/otheraccount/v1" 
    xmlns:ns7="http://schema.intuit.com/aggregation/loanaccount/v1" 
    xmlns:ns8="http://schema.intuit.com/platform/fdatafeed/accountlist/v1">
   <ns7:**LoanAccount**>
      <accountId>75000033014</accountId>
      <accountNumber>9900009994</accountNumber>
      <accountNickname>My Military Loan</accountNickname>
      <displayPosition>5</displayPosition>
      <institutionId>0</institutionId>
      <description>Description</description>
      <balanceAmount>90227.2</balanceAmount>
      <aggrSuccessDate>2012-02-27T23:20:13.651-08:00</aggrSuccessDate>
      <aggrAttemptDate>2012-02-27T23:20:13.651-08:00</aggrAttemptDate>
      <aggrStatusCode>0</aggrStatusCode>
      <currencyCode>USD</currencyCode>
      <ns7:loanType>**MILITARY**</ns7:loanType> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T16:14:17.153

没有直接的方法来识别 Account 类型，getBankingAccountsAndCreditAccountsAndLoanAccounts() 方法将返回 Accounts，您需要检查 Object 类型以确定 Account 类型。

# struts2 - 选择框中的错误

> ID：15096823
> 
> 赞同：0
> 
> 时间：2013-02-26T18:42:48.620
> 
> 标签：struts2

这是我的 Assignemployee.jsp 文件代码

```
<s:form action="AssignEmployee" name="myForm">
<s:select name="pname" list="projectlist"  headerKey="0" label="Select a country" />
 <s:submit/>
 </s:form> 
```

这是我的 projectlist.java 操作文件

```
package myPack;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import javax.servlet.http.HttpServletRequest;
import org.apache.struts2.interceptor.ApplicationAware;
import org.apache.struts2.interceptor.ServletRequestAware;
import com.opensymphony.xwork2.ActionSupport;
import com.opensymphony.xwork2.Preparable;
public class projectlist extends ActionSupport implements ServletRequestAware { 
private static final long serialVersionUID = 1L;
HttpServletRequest request;
private List<String> projectlist;
public List<String> getProjectlist() {
return projectlist;
}
public void setProjectlist(List<String> projectlist) {
this.projectlist = projectlist;
}
public void setServletRequest(HttpServletRequest request)
{
this.request = request;
} 
public HttpServletRequest getServletRequest(){
return request;
}
public String getDefaultSearchEngine() {
return "yahoo.com";
}
public projectlist()
{       
try
{
Class.forName("com.mysql.jdbc.Driver"); 
java.sql.Connection con=DriverManager.getConnection("jdbc:mysql:///pmt","root","shree");    
ps=con.prepareStatement("select * from addproject");
ResultSet res = ps.executeQuery();      
while(res.next()) 
{   
projectlist = new ArrayList<String>();
projectlist.add(res.getString("pname"));
}
ps.close();         
con.close();
} 
catch(Exception e)
{ 
e.printStackTrace(); 
}
}
public String execute()throws Exception
{
return SUCCESS;
}
public String display() {
return NONE;
}
} 
```

这是struts.xml

```
<action name="AssignEmployee" class="myPack.projectlist" method="display">
    <result name="success">assignemployee.jsp</result>
</action> 
```

当我运行应用程序时，我收到一个错误，例如

> 严重：servlet [jsp] 的 Servlet.service() 在路径 [/PTMS] 的上下文中抛出异常 [tag 'select', field 'list', name 'pname': 请求的列表键 'projectlist' 无法解析为集合/数组/映射/枚举/迭代器类型。示例：people 或 people.{name} - [unknown location]] 带有根本原因标签“select”、字段“list”、名称“pname”：请求的列表键“projectlist”无法解析为集合/数组/映射/枚举/迭代器类型。示例：人或人。{name} - [未知位置]

如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:07:28.873

有两个问题：

1.  项目列表创建被破坏，并且
2.  对表单的第一次访问被破坏。

**1）**您正在为结果集中的每一行创建一个新列表：

```
while (res.next()) {   
    projectlist = new ArrayList<String>();
    projectlist.add(res.getString("pname"));
} 
```

这应该看起来更接近：

```
projectlist = new ArrayList<String>();
while (res.next()) {   
    projectlist.add(res.getString("pname"));
} 
```

您似乎也从未真正*调用*过此方法，尽管很难说，因为如果没有缩进或任何有价值的空格，代码基本上难以辨认。*在*你所说的地方可以进行一些辩论；它可能在 getter 本身、`prepare()`方法（和操作会`implement Prepareable`）、`execute()`方法等中。

然而，这些类型的东西应该作为可测试性辅助工具进入服务中。

**2)**我不相信您对 JSP 的初次访问得到了正确处理。它应该：

a) 执行 Struts 2 操作，
b) 调用`projectlist`初始化程序，以及
c) 使用表单转发到 JSP。

如果满足所有这些条件，您将不会收到该错误。

# codeigniter - 在另一个视图中加载视图

> ID：15096828
> 
> 赞同：6
> 
> 时间：2013-02-26T18:42:57.600
> 
> 标签：codeigniter, codeigniter-2

我使用 django 已经有一段时间了，我决定开始一个新项目，但这次在 Codeigniter 中，我曾经在我的视图中扩展模板文件并将内容放在 {% block content %} 块中，但它看起来是在 CodeIgniter 中有所不同。

在 CodeIgniter 我有类似的东西：

```
<?php
     $this->load->view('header');
     $this->load->view('form_add_customer');
     $this->load->view('footer');
?> 
```

但是有没有办法拥有一个像这样具有页眉、内容和页脚的独特文件？

```
<html>
    <head><title>Test</title></head>
    <body>
        <div id="header">Welcome</div>
        <div id="content">
        </div>
        <div id="footer"> 2013 - Tectcom Telecom</div>
    </body>
</html> 
```

并在内容 div 中放置一个带有表单的视图文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T19:06:42.517

像这样更新您的 html（布局）文件：

```
<div id="content"><?php $this->load->view($content) ?></div> 
```

在您的控制器中，像这样调用视图：

```
$view_data = array();
$view_data['content'] = 'form_add_customer';
$this->load->view('path/to/layout', $view_data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:41:14.193

我过去曾使用过“ [CodeIgniter 最简单的模板库](http://maestric.com/doc/php/codeigniter_template)”，并在较小的项目中取得了成功。我相信它将提供您需要的功能，允许您在“模板”中使用占位符，您可以在控制器逻辑中进行更新。

# php - Symfony2 集合坚持唯一的对象

> ID：15096830
> 
> 赞同：2
> 
> 时间：2013-02-26T18:43:09.253
> 
> 标签：php, symfony, doctrine-orm

我正在尝试通过多对多关系中的集合保存表单，问题是持久化对象！

```
class Anagrafica
{
/**
 * @ORM\ManyToMany(targetEntity="SubCategories", inversedBy="anagrafiche", cascade={"persist", "remove"})
 * @ORM\JoinTable(name="AnCat")
 **/
private $subCategories;

//..
public function __construct()
{
$this->subCategories = new \Doctrine\Common\Collections\ArrayCollection();
//..
}

/**
 * Add subCategories
 *
 * @param \My\BusinessBundle\Entity\SubCategories $subCategories
 * @return Anagrafica
 */
public function addSubCategory(\My\BusinessBundle\Entity\SubCategories $subCategories)
{
    $subCategories->addAnagrafiche($this);
    $this->subCategories[] = $subCategories;
}

*******
class SubCategories
{
/**
 * @ORM\ManyToMany(targetEntity="Anagrafica", mappedBy="subCategories")
 */
private $anagrafiche;

public function __construct()
{
    $this->anagrafiche = new \Doctrine\Common\Collections\ArrayCollection();
}

/**
 * Add anagrafiche
 *
 * @param \My\BusinessBundle\Entity\Anagrafica $anagrafiche
 * @return SubCategories
 */
public function addAnagrafiche(\My\BusinessBundle\Entity\Anagrafica $anagrafiche)
{
    $this->anagrafiche[] = $anagrafiche;
} 
```

Anagrafica 类型：

```
//..
->add('subCategories', 'collection', array('type' => new SubCategoriesType(), 
                'allow_add' => true,
                'allow_delete' => true,
                'prototype' => true,
                'prototype_name' => '__categ__',
                'by_reference' => false
            )) 
```

当我去保存时，即使我选择了数据库中已经存在的子类别，他也会执行查询插入：

```
INSERT INTO SubCategories (subCategory, category_id) VALUES (?, ?)
Parameters: { 1: Object(Doctrine\Common\Collections\ArrayCollection), 2: 12 } 
```

我在哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:07:23.373

发生这种情况是因为您**必须**在持久化时手动检查子类别是否存在。您可以使用`datatransformer`或将检查代码放在`addSubCategory`实体的方法中，甚至可以使用`prePresist`生命周期回调。逻辑如下：您获取所有现有的子类别，然后遍历输入的子类别。如果在现有子类别中找到子类别，则将现有实体添加到结果 ArrayCollection 中，而不是传递输入的*新*子类别。这是我在项目中使用的带有标签的相同任务的示例代码：

```
$existingSubcategories = $repository->findAll();

if (count($existingSubcategories) < 1)
    return $enteredSubcategories;

$resultCollection = new \Doctrine\Common\Collections\ArrayCollection();

foreach ($enteredSubcategories as $enteredSubcategory)
{
    $exists = false;
    foreach ($existingSubcategories as $existingSubcategory)
    {
        // compare them by any unique param
        if ($existingSubcategory->getName() == $enteredSubcategory->getName())
        {
            $exists = true;
            break;
        }
    }

    $resultCollection[] = ($exists === true) ? $existingSubcategory : $enteredSubcategory;
}

return $resultCollection; 
```

# c# - Linux VPS 上的 Mono 垃圾收集

> ID：15096833
> 
> 赞同：2
> 
> 时间：2013-02-26T18:43:14.767
> 
> 标签：c#, mono

我一直在尝试让我的 C# 游戏的服务器在 Linux 上运行，它运行良好，除了一个问题：垃圾收集器似乎没有将任何内存还给操作系统，所以它最终达到了限制并且崩溃。

我注意到在释放大量内存（更改地图或玩家离开）的操作之后使用 System.GC.Collect 可以防止 OutOfMemoryError，但它仍然使用除了大约 30MB 的可用内存（1GB）之外的所有可用内存，这仍然使它可能尝试分配少量内存时崩溃。

我不认为这是内存泄漏，因为在 Windows 上，当有一个玩家在线时，它最多使用 60MB，但是让一个人反复连接和断开连接足以耗尽 Linux 服务器上的所有内存。

**单--版本：**

```
Mono JIT compiler version 2.10.8 (tarball Mon Feb 25 19:25:00 MSK 2013)
Copyright (C) 2002-2011 Novell, Inc, Xamarin, Inc and Contributors. www.mono-project.com
        TLS:           __thread
        SIGSEGV:       altstack
        Notifications: epoll
        Architecture:  x86
        Disabled:      none
        Misc:          softdebug
        LLVM:          supported, not enabled.
        GC:            Included Boehm (with typed GC and Parallel Mark) 
```

操作系统是CentOS，VPS平台是OpenVZ。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:55:21.370

这可能是垃圾收集器问题。尝试使用`mono --gc=sgen`参数开始游戏。我知道它在某些情况下有效。

# php - 按包含数字和字母的两个值对多维数组进行排序

> ID：15096840
> 
> 赞同：0
> 
> 时间：2013-02-26T18:43:40.123
> 
> 标签：php

我有一个看起来像的数组

```
[0] => Array
    (
        [typeName] => Element
        [quantity] => 35
        [flag] => 4
    ) 
```

我已经找到了一种通过`usort()`子元素对数组进行排序的方法。这对数值很有用。

```
public static function _sortByAmount($a, $b) {
        return $b['quantity'] - $a['quantity'];
} 
```

有时，我可能有多个相同数量的数组元素。这些条目也应该按名称排序。最后，数组应该是这样的。

```
[0] => Array
    (
        [typeName] => Element
        [quantity] => 567
        [flag] => 4
    )
[1] => Array
    (
        [typeName] => aaa-element
        [quantity] => 35
        [flag] => 4
    )
[2] => Array
    (
        [typeName] => bbb-element
        [quantity] => 35
        [flag] => 4
     )
[3] => Array
    (
        [typeName] => Element
        [quantity] => 10
        [flag] => 4
    ) 
```

是否可以以某种方式扩展我的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:47:22.683

您可以在比较功能中检查您想要的任何内容。例如，如果数量 == 数量，则返回[strcmp](http://www.php.net/strcmp)。

```
public static function _sortByAmount($a, $b) {
    if($b['quantity'] == $a['quantity']){
        return strcmp($a['typeName'], $b['typeName']);
    } else {
        return $b['quantity'] - $a['quantity'];
    }
} 
```

如果您希望检查不区分大小写，也可以使用[strcasecmp 。](http://www.php.net/strcasecmp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:48:44.857

不确定，但是

```
public static function _sortByAmount($a, $b) {
        $byQuantity = $a['quantity'] - $b['quantity'];
        return $byQuantity ?: strcmp($a['typeName'], $b['typeName']);
} 
```

# php - 自动插入 mysql_real_escape_string

> ID：15096844
> 
> 赞同：-1
> 
> 时间：2013-02-26T18:43:46.793
> 
> 标签：php, mysql, mysql-real-escape-string

**免责声明：**我了解这些功能位于待办事项弃用列表的顶部。所有的警告都只是在向合唱团宣讲。

反正。我发现自己在一家使用 mysql_* 函数的公司工作。这显然还不够糟糕，因为整个事情都没有`mysql_real_escape_string()`“伟大”。所有的用户输入都是未经处理的，所以自然而然地成为新的代码猴子，我的工作是将它合并到所有 4.93g 的 php 脚本中。FML“所以”，我心想，“如果我只是`$_REQUEST`在每一页上取消设置数组（不知道为什么，但他们从未使用过，`$_POST`或者`$_GET`在整个程序中使用过一次，他们确实`$_REQUEST`在任何地方都使用过。）然后用`mysql_real_escape_string`? 重置它。”。对我来说，这肯定胜过 1000000000 行代码。**所以**我坐下来写了函数来做这件事。这是我所在的位置：

```
/*lets say input is dirty and input2 is boy*/

    echo "<br><pre>";print_r($_REQUEST);echo "</pre><br>";

$tempString = implode(',', $_REQUEST);
$tempString2 = implode(',', array_keys($_REQUEST));
$tempArray = explode(',', $tempString);
$tempArray2 = explode(',', $tempString2);
$count = count($_REQUEST);
    echo "<br><pre>";print_r($tempArray);echo "</pre><br>";

    echo "<br>";
    echo "<br><pre>";print_r($tempArray2);echo "</pre><br>";

unset($_REQUEST);
   $_REQUEST = array();
   for($i = 0; $i < $count; $i++){
       $_REQUEST[$tempArray2[$i]] = "mysql_real_escape_string(".$tempArray[$i].")";
   }

    echo "<br><pre>";print_r($_REQUEST);echo "</pre><br>"; 
```

据我所知，它正在工作！：

```
Array
(
    [input] => dirty
    [input2] => boy
)

Array
(
    [0] => dirty
    [1] => boy
)

Array
(
    [0] => input
    [1] => input2
)

Array
(
    [input] => mysql_real_escape_string(dirty)
    [input2] => mysql_real_escape_string(boy)
) 
```

但坦率地说，这似乎太容易了。我看到的直接问题是

1.  它只适用于`$_REQUEST[]`
2.  您必须在每个页面的顶部对其进行硬编码，即使您将其设置为全局函数并包含它
3.  如果一件事出了差错...
4.  mysql_* 函数很糟糕，即[`mysql_real_escape_string`](https://stackoverflow.com/questions/5741187/sql-injection-that-gets-around-mysql-real-escape-string)

作为旁注，我什至无法告诉您我为从 PDO 转换所有内容而奋斗了多少次，因为您可以想象他们不喜欢所需的时间。

**所以**

我想我把这个带到你们这里是为了，第二双眼睛。您对此有什么直接的问题吗？我错过的任何其他*直接问题？*如果你们喜欢这个，无论如何，我确信还有其他人可以使用这样的东西（如果你构建它，他们会来的），我会继续在 github 上通过它并将它的工作到我的 shcedule 中，谢谢： )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:03:06.917

首先，您当前所做的事情毫无意义。您实际上是在将单词包装`mysql_real_escape_string(...)`在用户输入周围，这完全没有意义。它不能防止 SQL 注入，这意味着该词`mysql_real_escape_string`将出现在您的输入中。

如果您改为*调用* `mysql_real_escape_string()`所有用户输入，那么您将拥有的将是一个不完美的复制品`magic_quotes`，并且会带来所有问题。特别是，这意味着任何不将用户输入直接传递给 SQL（或`mysql_real_escape_string`适当地使用自身！）的代码最终都会显示 SQL 转义文本（例如，`\'`到处都是）。

除了实际检查您的代码并对其进行修改以适当地转义用户输入之外，没有其他真正的选择。但是，如果您确实有 4.93 GB 的 PHP 可以使用，那么其他事情就大错特错了——任何应用程序都不应该*有*那么大。这种规模的代码库是完全不可能维护的，你最好完全重新开始（或找到一份新工作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:30:44.133

## 不应自动插入 mysql_real_escape_string。时期。

仅仅因为“使用 mysql_real_escape_string 重置数据”**不是“保护数据免受 SQL 注入”的同义词。**以任何方式。

您实际上想要做的只是重新体现长期以来被鄙视、弃用和已删除的[魔术引号](http://www.php.net/manual/en/security.magicquotes.php)功能。
试着想想原因。
原因之一 - 串行转义是 SQL 注入的可靠方法

只有一个注释。

> mysql_* 函数很烂，即 mysql_real_escape_string

这种说法是不正确的。
这个诚实的功能是可以的。*程序员*使用不当，对任何错误负责
。

# mysql - 查询以使用空值或不等于提取结果

> ID：15096846
> 
> 赞同：0
> 
> 时间：2013-02-26T18:43:49.833
> 
> 标签：mysql

我有一个这样的mysql查询

```
SELECT s.admission_number, s.student_name, c.class, m.month, 
       f.fee, fr23.amount_received
FROM students s
LEFT JOIN fee_receipts fr ON s.id = fr.admission_number
LEFT JOIN fee_receipts_23_repeat fr23 ON fr.id = fr23.parent_id
JOIN class c ON s.class = c.id
LEFT JOIN fee f ON f.id = fr23.fee
LEFT JOIN months m ON m.id = fr23.month 
```

哪个显示这样的结果？

```
ad_num  student_name class   month    fee   amount_received 
779     A Jain      Nur     January Tuition   Fee   575.00
808     A Gupta     Nur     January Tuition   Fee   0.00
821     A Mohanty   Nur     NULL    NULL            NULL
818     ATiwari     Nur     FebruaryTuition   Fee   575.00
826     D Mishra    Nur     NULL    NULL      NULL
813     G Kaur      Nur     NULL    NULL      NULL  NULL
809     P Palai     Nur     NULL    NULL      NULL
822     S Agrawal   KG1     December Tuition  Fee   575.00
773     S Garg      KG1     NULL    NULL            NULL 
```

现在我试图通过排除那些已经支付但没有得到正确结果的学生来按班级获取未支付费用的学生名单。我添加到上述查询的条件是这样的

```
where fr23.amount_received is NULL and c.class = 'Nur' and m.month != 'January' 
```

我希望它会列出所有尚未支付一月份费用的学生的结果，但它给了我一个空的结果集。

实际上，我正在尝试查找没有付款条目的学生，这意味着月份、费用和金额列将具有空值。

我不太确定我是否采取了正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:52:36.650

将您的条件移动到`JOIN ON`条件中：

```
SELECT s.admission_number, s.student_name, c.class, m.month, 
       f.fee, fr23.amount_received
FROM students s
LEFT JOIN fee_receipts fr ON s.id = fr.admission_number
LEFT JOIN fee_receipts_23_repeat fr23 ON fr.id = fr23.parent_id
    AND fr23.amount_received is NULL   -- Moved to here
JOIN class c ON s.class = c.id
LEFT JOIN fee f ON f.id = fr23.fee
LEFT JOIN months m ON m.id = fr23.month
    AND (m.month != 'January' OR m.month IS NULL) -- Added IS NULL check 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:53:04.280

经典的空陷阱！

空比较并不像你想象的那样......

```
change m.month != 'January'

to

coalesce(m.month,'') != 'January' 
```

# java - 如何在服务中更改 wsdl 位置文件

> ID：15096847
> 
> 赞同：0
> 
> 时间：2013-02-26T18:43:50.663
> 
> 标签：java, wsdl

我使用 wsimport gradle 任务生成了一个初步的 MyService，并提供了 wsdl 位置路径文件：/D:/someLocationWherePlacedMyWSDl.interface.v2.wsdl

```
public class MyService
    extends Service
{

    private final static URL MyService_WSDL_LOCATION;
    private final static Logger logger = Logger.getLogger(com.google.services.MyService.class.getName());

    static {
        URL url = null;
        try {
            URL baseUrl;
            baseUrl = com.google.services.MyService.class.getResource(".");
            url = new URL(baseUrl, "file:/D:/someLocationWherePlacedMyWSDl.interface.v2.wsdl");
        } catch (MalformedURLException e) {
            logger.warning("Failed to create URL for the wsdl Location: 'file:/D:/someLocationWherePlacedMyWSDl.interface.v2.wsdl', retrying as a local file");
            logger.warning(e.getMessage());
        }
        MyService_WSDL_LOCATION = url;
    }
} 
```

我怎样才能改变它？发生这种情况是因为文件是在一个环境中生成的，然后工件（战争）被移动到另一台服务器。

有什么想法吗？

* * *

是的我明白了。本地一切正常。但是这个文件位于 war 文件中，当 Jenkins 试图获取这个文件 /var/distributives/myservice/tomcat-base/wsdl/someLocationWherePlacedMyWSDl.interface.v2.wsdl 我得到异常（没有这样的文件或目录）。看起来它看不到战争文件中的文件。有什么想法我该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:12:37.220

使用服务类的构造函数`MyService`, 来传递`wsdlLocation`.

```
String WSDL_LOCATION = "http://server:port/localtionWSDL.interface.v2.wsdl";

try {
    final URL url = new URL(WSDL_LOCATION);
    final QName serviceName = new QName("http://mynamespace/", "MyService");
    final MyService service = new MyService(url, serviceName);
    port = service.getMyServicePort();

    // Call some operation of WebService

} catch (final Exception e) {
    // Handle the exception
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:37:23.827

我用相对路径解决了这个问题。这是解决方案
`@Value("classpath:com//google//resources//wsdl//myservice.interface.v2.wsdl") public void setWsdlLocation(final Resource wsdlLocation) { m_wsdlLocation = wsdlLocation; }`

# php - 计算 ASP 的颜色对比度

> ID：15096848
> 
> 赞同：0
> 
> 时间：2013-02-26T18:43:52.170
> 
> 标签：php, asp-classic, colors

我找到了这个 PHP 和 Javascript 的代码片段，但我想知道它是否可以在经典的 asp 中工作？这是有关该主题的整篇文章以供参考。

[http://24ways.org/2010/calculating-color-contrast/](http://24ways.org/2010/calculating-color-contrast/)

**PHP 代码**

```
function getContrast50($hexcolor){
    return (hexdec($hexcolor) > 0xffffff/2) ? 'black':'white';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:26:24.817

好吧，语言中没有任何内容。将十六进制转换为十进制很简单，`CLng("&H" & hexValue)`但是从 PHP 手册的快速查看中我看到该`hexdec()`方法忽略任何无效字符，而 VBScript`CLng()`只会崩溃。

所以这是一个工作功能，据我所知，做同样的事情：

```
Function GetContrast50(hexColor)
    Const strValidChars = "1234567890abcdef"
    Dim maxValue, decValue, sanitizedColor
    Dim x, curChar
    sanitizedColor = ""
    For x=1 To Len(hexColor)
        curChar = LCase(Mid(hexColor, x, 1))
        If InStr(strValidChars, curChar)>0 Then
            sanitizedColor = sanitizedColor & curChar
        End If
    Next
    If Len(sanitizedColor)=0 Then
        GetContrast50 = "invalid color string"
        Exit Function
    End If
    maxValue = CLng("&H" & "ffffff") 
    decValue = CLng("&H" & sanitizedColor)
    If decValue > (maxValue / 2) Then
        GetContrast50 = "black"
    Else  
        GetContrast50 = "white"
    End If
End Function 
```

扩展验证以检查给定字符串是否在有效范围内非常容易。

# android - 在 Eclipse 上显示屏幕软按钮

> ID：15096849
> 
> 赞同：0
> 
> 时间：2013-02-26T18:44:00.613
> 
> 标签：android, eclipse

如何在 Eclipse 上调整 xml 文件的图形布局以使其显示这一点？另外，这个的正式名称是什么？）

![在此处输入图像描述](../Images/f0f6e46aa772c29fc277acecd862e82a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:00:47.107

这个名字是`System Bar`aka `Navigation Bar`aka `On Screen Buttons`aka `Software Buttons`。

至于在图形编辑器中显示它们，只需从布局 XML 编辑器选项卡中的屏幕大小下拉菜单中选择`Galaxy Nexus`、或。`Nexus 7``10." WXGA``7.0" WSVGA``Graphical Layout`

![在此处输入图像描述](../Images/d9ee4eefdd66f8a8d47f5a068f3eeddf.png)

# java - 为什么我收到“已在包未命名包中定义”错误？

> ID：15096850
> 
> 赞同：0
> 
> 时间：2013-02-26T18:44:06.137
> 
> 标签：java

我收到两条错误消息：一条说`class GameState is already defined in package unnamed package`
，另一条说：在这一行找不到符号 `this.gameStatus = gameStatus.continues;`

这是我的代码：

```
public class GameState 
{
    private enum GameState {win, lose, continues};
    private GameState gameStatus;

    public GameState() {    
        initializeGameState();
    }

    public void initializeGameState() {
        this.gameStatus = gameStatus.continues;
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:46:13.713

使用其名称引用特定枚举：

```
this.gameStatus = GameState.continues; 
```

代替

```
this.gameStatus = gameStatus.continues; 
```

此外，将您的枚举命名为与您的类名不同的名称。

# php - 正则表达式不起作用

> ID：15096855
> 
> 赞同：0
> 
> 时间：2013-02-26T18:44:32.233
> 
> 标签：php, regex, preg-match

当正文如下所示时，我正在尝试从转发的电子邮件中获取电子邮件并抄送：

```
$body = '-------
Begin forwarded message:

From: Sarah Johnson <blabla@gmail.com>

Subject: email subject

Date: February 22, 2013 3:48:12 AM

To: Email Recipient <thatwouldbe@yayyy.com>

Cc: Ralph Johnson <johnson@gmail.com>

Hi,

hello, thank you and goodbye!

 blabla@gmail.com' 
```

现在，当我执行以下操作时：

```
$body = strtolower($body);
$pattern = '#from: \D*\S([\w-\.]+)@((?:[\w]+\.)+)([a-zA-Z]{2,4})\S#';
if (preg_match($pattern, $body, $arr_matches)) {
     echo htmlentities($arr_matches[0]);
     die();
} 
```

我正确地得到：

```
from: sarah johnson <blabla@gmail.com> 
```

现在，为什么cc不起作用？我做了一些非常相似的事情，只是从更改为 cc：

```
$body = strtolower($body);
$pattern = '#cc: \D*\S([\w-\.]+)@((?:[\w]+\.)+)([a-zA-Z]{2,4})\S#';
if (preg_match($pattern, $body, $arr_matches)) {
     echo htmlentities($arr_matches[0]);
     die();
} 
```

我得到：

```
cc: ralph johnson <johnson@gmail.com> hi, hello, thank you and goodbye! blabla@gmail.com 
```

如果我从原始正文页脚中删除电子邮件（删除 blabla@gmail.com），那么我正确地得到：

```
cc: ralph johnson <johnson@gmail.com> 
```

看起来该电子邮件正在影响正则表达式。但是如何，为什么它不影响它？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:58:47.513

问题是，`\D*`匹配太多，即它也匹配换行符。我会在这里限制更多。为什么你完全使用`\D`（不是数字）？

例如`[^@]*`，它正在工作

```
cc: [^@]*\S([\w-\.]+)@((?:[\w]+\.)+)([a-zA-Z]{2,4})\S 
```

[在 Regexr 上](http://regexr.com?33u11)查看。

这样，您可以确定第一部分与电子邮件地址之外的内容不匹配。

这`\D`也是原因，它适用于第一个“From”案例。“日期”行中有数字，因此与该行不匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:21:25.187

像这样试试

```
$body = '-------
Begin forwarded message:

From: Sarah Johnson <blabla@gmail.com>

Subject: email subject

Date: February 22, 2013 3:48:12 AM

To: Email Recipient <thatwouldbe@yayyy.com>

Cc: Ralph Johnson <johnson@gmail.com>

Hi,

hello, thank you and goodbye!

 blabla@gmail.com';

$pattern = '#(?:from|Cc):\s+[^<>]+<([^@]+@[^>\s]+)>#is';
preg_match_all($pattern, $body, $arr_matches);
echo '<pre>' . htmlspecialchars(print_r($arr_matches, 1)) . '</pre>'; 
```

输出

```
Array
(
    [0] => Array
        (
            [0] => From: Sarah Johnson <blabla@gmail.com>
            [1] => Cc: Ralph Johnson <johnson@gmail.com>
        )

    [1] => Array
        (
            [0] => blabla@gmail.com
            [1] => johnson@gmail.com
        )

)

$arr_matches[1][0] - "From" email
$arr_matches[1][1] - "Cc" email 
```

# java - 如何强制 Java 重新加载环境变量

> ID：15096863
> 
> 赞同：4
> 
> 时间：2013-02-26T18:45:09.467
> 
> 标签：java, exec, environment-variables

我有一个通过 Runtime.getRuntime().exec(command) 启动 C 编译程序的 java 程序。此“命令”使用环境变量。

如果 java 程序仍在运行，但在调用 exec(command) 之前（由另一个外部进程）更改了 env 变量，则 C 程序仍将具有旧的 env 值。

似乎 C 程序正在从主 Java 进程获取它的环境，因为当 java 进程重新启动时 env 值是正确的。有没有办法强制在 Java 进程中刷新 env 变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T19:14:01.173

不要使用环境变量。

您所描述的行为是[环境变量的工作方式](http://en.wikipedia.org/wiki/Environment_variable#Synopsis)。您对进程环境所做的更改会传播到其子进程。但是，子进程所做的更改不会传播回父进程，任意进程也不会相互更新。

最简单的替代方法是存储在众所周知的位置的配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:59:23.660

您的 Java 应用程序可以在您启动 C 应用程序后立即存储环境变量的值，然后您使用将始终运行的线程类。这个线程类会一直检查环境变量是否已经改变，这就是为什么我们保存了环境变量之前的值，所以如果它改变了，那么你别无选择，只能通过运行时再次执行你的 C 程序。

例如：

```
//inside your thread
if (!envVar.equals(envVarPReviousValue)) { 
//execute again
Runtime.getRumtime().exec("C-app");
} 
```

# css - DIV 继承内部所有元素的高度

> ID：15096864
> 
> 赞同：0
> 
> 时间：2013-02-26T18:45:13.213
> 
> 标签：css, html, height

我有一个包含产品信息的 DIV。此 DIV 在 PHP for 参数中，因此对于每个产品，将创建包含其信息的此 DIV。

我遇到的问题是DIV显示非常小。但是，div 内的所有项目都显示出来，但 DIV 的高度很小。

我必须如何强制 DIV 继承其中所有产品的总高度？

这是我的DIV：

```
.cartItem {
border-top: 1px solid #dddddd;
display: block;
padding-bottom: 0.5em;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:47:20.887

我认为

```
Overflow: hidden; 
```

诀窍...

# python - 如何保持 web.py 应用程序始终运行？

> ID：15096874
> 
> 赞同：0
> 
> 时间：2013-02-26T18:45:30.910
> 
> 标签：python, bash, shell

我正在从终端运行如下 web py。

```
$ python app.py 8080 
```

现在，即使我关闭终端，我如何保持它运行？有什么办法可以让这个服务器保持运行。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:12:32.323

您可以为此使用**nohup**。

```
$ nohup python app.py 8080 & 
```

即使您关闭终端，它也会保持打开状态。您需要使用 kill 并向其发送一些信号以将其关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T18:55:30.290

我认为这是属于另一个 stackexchange 站点（服务器故障？）的问题。

无论如何，答案是：在屏幕中运行它：

`screen python app.py 8080`

使用组合键从屏幕上分离：

`Ctrl+a+d`

再次附加到屏幕（查看您的流程的输出）

`screen -r`

退出画面：

`Ctrl+c`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T19:20:52.757

您可以使用[supervisord](http://supervisord.org/)。它旨在执行此类任务（以及更多）。文档很清楚，所以设置它应该不是问题。看看[如何运行 supervisord](http://supervisord.org/running.html)。

也不要使用`nohup`，因为它不会在失败或重新启动后执行任何操作，例如自动重新启动服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T18:56:20.273

在 Bourne-shell 兼容的 shell（Bash、Bourne、Korn）中：

```
python app.py 8080 & 
```

我刚刚看到你写了你想关闭终端。显然我的回答不会奏效。

# java - 充气后 setOnClickListener() 崩溃/NPE

> ID：15096877
> 
> 赞同：0
> 
> 时间：2013-02-26T18:45:40.817
> 
> 标签：java, android

当我调用 setOnClickListener() 时，我的 Android 应用程序崩溃了。基本上，我正在进行的活动是在一个 XML 文件中使用 ListView，并在另一个由三个 ImageButtons 组成的 XML 文件中使用充气器。我的图像显示正常，但是当我调用 setOnClickListener 时，我收到 NullPointerException 并且应用程序崩溃。我也想不通为什么。

以下是活动的要点：

```
// Create an inflater to use another xml layout (the Facebook/Twitter/Instagram buttons)
LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View footerView = inflater.inflate(R.layout.contacts_footer, null);

facebookButton = (ImageButton) findViewById(R.id.facebookButton);

// Commenting this chunk out has the images display perfectly fine
facebookButton.setOnClickListener(new OnClickListener() { // Crashes here
    public void onClick(View v) {
        // Open up the Facebook page when clicked
        facebookPage = new Intent(android.content.Intent.ACTION_VIEW);
        facebookPage.setData(Uri.parse(facebookURL));
        startActivity(facebookPage);
    }
});

listview.addFooterView(footerView);
listview.setAdapter(adapter); 
```

这是主要活动的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:background="@color/blackBackground" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="40dp"
        android:background="@drawable/button_gradient" >

        <!-- Header -->
        <Button
            android:id="@+id/aboutButton"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerInParent="true"
            android:text="About"
            android:textColor="@color/whiteText" />

        <TextView
            android:id="@+id/contactHeader"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:text="Contact"
            android:textColor="@color/whiteText" />
    </RelativeLayout>

    <!-- Listing -->s
    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <ListView
            android:id="@+id/contactItem"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:divider="@color/blackBackground"
            android:dividerHeight="15dp"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:layout_marginTop="10dp"
            android:layout_marginBottom="10dp">
        </ListView>

    </RelativeLayout>

 </LinearLayout> 
```

这是页脚的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:background="@color/blackBackground"
  android:id="@+id/buttonIcons"
  android:gravity="center_horizontal">

    <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/buttonIcons"
        android:gravity="center_horizontal">

        <ImageButton
            android:id="@+id/facebookButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@null"
            android:paddingLeft="5dp"
            android:src="@drawable/facebook_icon" />

        <ImageButton
            android:id="@+id/twitterButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@null"
            android:paddingLeft="5dp"
            android:src="@drawable/twitter_icon" />

        <ImageButton
            android:id="@+id/instagramButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@null"
            android:paddingLeft="5dp"
            android:src="@drawable/instagram_icon" />

    </LinearLayout>

</LinearLayout> 
```

这是堆栈跟踪：

```
02-26 11:27:14.073: E/AndroidRuntime(875): FATAL EXCEPTION: main
02-26 11:27:14.073: E/AndroidRuntime(875): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.radio.app/org.radio.app.Contacts}: java.lang.NullPointerException
02-26 11:27:14.073: E/AndroidRuntime(875):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
02-26 11:27:14.073: E/AndroidRuntime(875):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
02-26 11:27:14.073: E/AndroidRuntime(875):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
02-26 11:27:14.073: E/AndroidRuntime(875):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
02-26 11:27:14.073: E/AndroidRuntime(875):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-26 11:27:14.073: E/AndroidRuntime(875):  at android.os.Looper.loop(Looper.java:137)
02-26 11:27:14.073: E/AndroidRuntime(875):  at android.app.ActivityThread.main(ActivityThread.java:4745)
02-26 11:27:14.073: E/AndroidRuntime(875):  at java.lang.reflect.Method.invokeNative(Native Method)
02-26 11:27:14.073: E/AndroidRuntime(875):  at java.lang.reflect.Method.invoke(Method.java:511)
02-26 11:27:14.073: E/AndroidRuntime(875):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-26 11:27:14.073: E/AndroidRuntime(875):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-26 11:27:14.073: E/AndroidRuntime(875):  at dalvik.system.NativeStart.main(Native Method)
02-26 11:27:14.073: E/AndroidRuntime(875): Caused by: java.lang.NullPointerException
02-26 11:27:14.073: E/AndroidRuntime(875):  at org.radio.app.Contacts.onCreate(Contacts.java:127)
02-26 11:27:14.073: E/AndroidRuntime(875):  at android.app.Activity.performCreate(Activity.java:5008)
02-26 11:27:14.073: E/AndroidRuntime(875):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
02-26 11:27:14.073: E/AndroidRuntime(875):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
02-26 11:27:14.073: E/AndroidRuntime(875):  ... 11 more 
```

执行项目 -> 清理会导致相同的问题，并且 R.java 定义了 facebookButton。

我假设如果我可以让第一个按钮工作，我可以让我的其他两个按钮工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:48:13.373

您需要`findViewById()`从包含视图中调用。尝试类似：

```
facebookButton = (ImageButton) footerView.findViewById(R.id.facebookButton); 
```

如果您按照您的方式调用它，它会改为查看 Activity 的视图层次结构。

# jquery - 计算图像或“rel”属性

> ID：15096879
> 
> 赞同：0
> 
> 时间：2013-02-26T18:45:50.800
> 
> 标签：jquery, image, count, each, rel

我想`<div class="thumbnail">`单独计算所有图像。

## 我的代码：

```
 <div class="thumbnail">     

    <a rel="first" href="#">
        <div>
        <div></div>
        <img src="...">
        </div>
    </a>

    <div class="hidden-fb"> <!-- // CSS display: none -->                                                                                                 
        <a rel="first" href="#">
            <div>
            <div></div>
            <img src="...">
            </div>
        </a>                                               
    </div><!-- .hidden-fb -->

</div><!-- .thumbnail -->

<h2>Contains 2* images </h2> 
```

## 我试试这个

```
var featureImageCount = $('div.thumbnail img').length;    
$('div.thumbnail').after('<div><h1>' + featureImageCount + ' Images</h1></div>'); 
```

但我只得到所有 div “(6)”
我可以用 jquery 做到这一点，图像的数量*会自动填写吗？
或者 jquery 可以按不同的`rel`属性计算项目吗？

[jsFiddle](http://jsfiddle.net/yCazz/7/)

谢谢奥尼
_

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:46:53.973

您需要单独查看每个`.thumbnail`元素，使用`.each`. 然后，您可以`$(this)`在回调中使用来访问实际元素。从那里，您可以找到所有特定的后代`<img>`元素。从那里，您可以`.after`像尝试那样使用`$(this)`.

```
$(document).ready(function () {
    $("div.thumbnail").each(function () {
        var $this = $(this),
            count = $this.children("a").children("img").length;
        $this.after("<div><h1>" + count + " Images</h1></div>");
    });
}); 
```

[http://jsfiddle.net/yCazz/8/](http://jsfiddle.net/yCazz/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:48:06.547

```
$('div.thumbnail').each(function () {

    var $this = $(this),
        count = $this.find('img').length;

    $this.after('<h2>', {
        text: 'Contains (' + count  + '*) image' + (count == 1 ? '' : 's')
    });

}); 
```

# javascript - 卸载与 java 脚本 - onbeforeunload

> ID：15096881
> 
> 赞同：0
> 
> 时间：2013-02-26T18:45:53.730
> 
> 标签：javascript, jquery, html, onbeforeunload

当用户退出我的网站时，正在努力识别。

我在网站上阅读了一些关于使用 ajax 调用模拟 ping 的方法执行此操作的线程

我找到了在浏览器窗口关闭/重定向之前发生的卸载事件的文档

问题哪种方法更好？

Java 脚本本机 -[链接](http://chrismckee.co.uk/good-sir-before-you-unload-crossbrowser-javascript-headaches/)

```
window.onbeforeunload 
```

或 jQuery - [http://api.jquery.com/unload/](http://api.jquery.com/unload/)

```
$(window).unload 
```

redarding 哪个在浏览器兼容性方面会更好并捕获更多事件？

它可靠还是我应该使用 Ping to server 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:56:55.057

根据此处 jQuery 的 API 中的文档：http: [//api.jquery.com/unload/](http://api.jquery.com/unload/)（如您所列出的），我可能会建议使用 jQuery 的版本以获得最佳的浏览器兼容性，他们拥有如此活跃的用户社区如果某些更改会破坏功能，我认为他们会在更新的版本中修复它。

# mysql - 使用 2 个连接获得比预期更高的结果

> ID：15096891
> 
> 赞同：1
> 
> 时间：2013-02-26T18:46:19.477
> 
> 标签：mysql, sql

这是我的查询：

```
SELECT  p.id, COUNT(c.id) AS comments, COUNT(a.id) AS answers
FROM posts_tbl AS p
LEFT JOIN post_reply_tbl AS c ON c.post_id = p.id AND c.type IN (1,3)
LEFT JOIN post_reply_tbl AS a ON a.post_id = p.id AND a.type = 2
GROUP BY p.id 
```

我应该得到的结果是：

```
ID  Answers Comments
1   3       4
2   1       1
3   0       1 
```

但相反，我得到：

```
ID  Answers Comments
1   12      12
2   1       1
3   0       1 
```

当我只使用 1 个 LEFT JOIN 时，无论哪一个，它都会给我正确的答案/评论数量（取决于我使用的 LEFT JOIN）。但是当我同时使用它们时，它给了我第二个结果。

使用 * 时的示例结果数据：

```
id  username    date                subject                     year    brand   model   type    bodywork                    text                                                    image       chassis         id  post_id answer_id   username        text    date                type    id  post_id answer_id   username        text            date                type
1   Sinan Samet 2013-02-18 20:18:19 Dit is een test onderwerp   2006    Audi    A4  TFSI 2.0    TFSI 2.0 QUATTRO - 200pk    Lorem ipsum dolor sit amet consectetur adipiscing ...   test.jpg    345215453213425 5   1       NULL        Sinan Samet     Test    2013-02-26 09:19:22 1       1   1       NULL        Jan Willem      Bla             2013-02-26 14:14:17 2
1   Sinan Samet 2013-02-18 20:18:19 Dit is een test onderwerp   2006    Audi    A4  TFSI 2.0    TFSI 2.0 QUATTRO - 200pk    Lorem ipsum dolor sit amet consectetur adipiscing ...   test.jpg    345215453213425 5   1       NULL        Sinan Samet     Test    2013-02-26 09:19:22 1       2   1       NULL        Peter           Nee toch niet   2013-02-26 15:12:26 2
1   Sinan Samet 2013-02-18 20:18:19 Dit is een test onderwerp   2006    Audi    A4  TFSI 2.0    TFSI 2.0 QUATTRO - 200pk    Lorem ipsum dolor sit amet consectetur adipiscing ...   test.jpg    345215453213425 5   1       NULL        Sinan Samet     Test    2013-02-26 09:19:22 1       3   1       NULL        Homer Simpson   Doh!            2013-02-26 14:33:18 2
1   Sinan Samet 2013-02-18 20:18:19 Dit is een test onderwerp   2006    Audi    A4  TFSI 2.0    TFSI 2.0 QUATTRO - 200pk    Lorem ipsum dolor sit amet consectetur adipiscing ...   test.jpg    345215453213425 6   1       NULL        Bart Simpson    Yo      2013-02-26 08:38:37 1       1   1       NULL        Jan Willem      Bla             2013-02-26 14:14:17 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:14:28.847

```
select
    p.id,
    COALESCE(c.comments,0) AS comments,
    COALESCE(a.answers, 0) AS answers
from
    posts_tbl as p
    left join (
        select post_id, count(*) as comments
        from post_reply_tbl
        where type in (1,3)
        group by post_id
    ) as c on p.id = c.post_id
    left join (
        select post_id, count(*) as answers
        from post_reply_tbl
        where type = 2
        group by post_id
    ) as a on p.id = a.post_id
order by id ; 
```

# c# - 在 ClassLibrary 中使用资源 (resx)，无需重新编译即可更改

> ID：15096893
> 
> 赞同：5
> 
> 时间：2013-02-26T18:46:34.307
> 
> 标签：c#, .net, resources, resx

我需要创建一个 ClassLibrary，以包含不同的资源文件 (resx)。这需要完成，因此我可以在多个项目中重用这些资源。

在阅读了很长一段时间关于如何实现这一点之后，我仍然离答案很远。

**请注意，如果我想更改一个值，我需要以一种不需要重新编译项目的方式来实现这一点**

有没有一种我想念的简单方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:25:40.680

讨厌成为坏消息的承担者，但我担心您正在尝试将 RESX 文件用于其他目的，而不是它们的设计用途。RESX 文件被编译成 .resources 文件，然后在构建过程中嵌入到程序集中。换句话说，如果您*不*重新编译，您将看不到对模块中反映的 resx 文件所做的任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T04:20:01.980

RESX 文件的好处远远超出了提供与已部署解决方案紧密耦合的已编译文化/语言文本。它们有可能提供在软件开发过程之外管理的一组简单而灵活的内容。这里的一些观点：

[资源（.resx）文件有什么好处？](https://stackoverflow.com/questions/1134018/what-are-the-benefits-of-resource-resx-files)

是的，您可以使用您的 RESX 文件而无需编译它们。看这里：

[在部署服务器中编辑 ASP.NET MVC 3 resx 文件，无需重新编译](https://stackoverflow.com/questions/11544027/edit-asp-net-mvc-3-resx-files-in-deployment-server-without-recompiling)

是的，您可以在不同项目之间共享 RESX 文件，甚至可以滚动您自己的资源管理器。您可以维护备用资源集，根据例如用户上下文提供备用内容。我参与了一个项目，我们按照这些思路实施了一些影响很大的项目，在我的案例中，该解决方案用于提供白色标签。一些细节可以帮助您从这里开始：

[http://msdn.microsoft.com/en-us/library/aa905797.aspx](http://msdn.microsoft.com/en-us/library/aa905797.aspx)

# ruby-on-rails - 如何在 Rails 中提交表单之前构建预览功能？

> ID：15096894
> 
> 赞同：2
> 
> 时间：2013-02-26T18:46:52.537
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个简单的脚手架，我希望用户在提交表单数据之前查看（预览）表单数据。这看起来是一个相当直接的问题，但令人惊讶的**是我无法弄清楚如何去做**。我发现[了这个](https://stackoverflow.com/questions/2892017/best-way-to-create-preview-functionality-in-rails)，但它看起来有点过时（2010 年问题）

是否有任何可以简化此预览功能的 gem 或 jquery 插件？关于如何在 rails 3.2.x 中执行此操作的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:42:43.680

这实际上取决于您要包含哪种“预览” - “预览页面”或“渲染片段”：

预览页面是某些服务所显示的内容：所有输入的摘要以带有“确认”按钮的单独页面的形式显示。它不需要 javascript 或任何花哨的东西 - 只需单击表单页面上的“下一步”，查看刚刚输入的数据，然后单击“确认”或“返回编辑”。如果这是您需要的，那么您可以简单地通过创建新的控制器操作（预览？）来完成它，它将使用传递的参数初始化模型（就像“创建”操作一样，但不保存）并生成显示“预览”的模板和单击“确认”后将传递给“创建”操作的隐藏表单。或者，您可以简单地修改“新”表单，以便根据调用的操作隐藏表单并显示预览。

第二个选项是“渲染片段”——它将通过 javascript 实时更新您当前页面的一部分。根据此视图的复杂程度以及在显示模板之前需要执行的操作类型，使用一些 javascript 插件或向服务器发送请求并获取渲染部分可能会更好。在前一种情况下，您可以从非常简单的实现（像[这样](http://inimino.org/~inimino/blog/javascript_live_text_input)）中选择专用于它的完整解决方案。另一方面，如果您选择在服务器上呈现它，那么带有所有表单参数的简单 ajax 请求应该足以为您提供可以直接放入 DOM 元素的 HTML 输出。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T18:51:45.977

我不知道有什么宝石可以做到这一点。

我认为使用 jquery 显示模式并从数据元素中获取数据是一种简单的方法。

# java - 如何从单独的类中的对话框返回值

> ID：15096896
> 
> 赞同：0
> 
> 时间：2013-02-26T18:46:56.463
> 
> 标签：java, android, class, android-alertdialog

我想创建一个函数，在屏幕上显示一个带有 2 个按钮的对话框，如果用户按下确定则返回 1，如果用户按下取消则返回 0。

```
public class CDlg {

static int ShowConfirm(String caption, String msg, Context context) {
    int rez;
    AlertDialog.Builder delAllDialog = new AlertDialog.Builder(context);
    delAllDialog.setTitle(caption);

    TextView dialogTxt_id = new TextView(context);
    LayoutParams dialogTxt_idLayoutParams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    dialogTxt_id.setLayoutParams(dialogTxt_idLayoutParams);
    dialogTxt_id.setText(msg);
    LinearLayout layout = new LinearLayout(context);
    layout.setOrientation(LinearLayout.VERTICAL);
    layout.addView(dialogTxt_id);
    delAllDialog.setView(layout);

    delAllDialog.setPositiveButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface arg0, int arg1) {
            rez = 1;
        }
    });

    delAllDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface arg0, int arg1) {
            rez = 0;
        }
    });

    delAllDialog.show();
    return rez;
} 
```

}

我现在确信我做得对，因为我不知道如何将结果从更底层的类传递给外部类。有错误信息

```
Cannot refer to a non-final variable rez inside an inner class defined in a different method 
```

因此，我想使用这样的功能：

```
if (CDlg.ShowConfirm("User confirmation","Delete?",this)==1){
        ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:53:52.357

你不能那样做。`ShowConfirm`只能显示对话框。当用户单击“确定”或“取消”按钮时，您才可以执行您想要的操作：

```
public class CDlg {
    void ShowConfirm(String caption, String msg) {
        AlertDialog.Builder delAllDialog = new AlertDialog.Builder(this);
        delAllDialog.setTitle(caption);

        TextView dialogTxt_id = new TextView(this);
        LayoutParams dialogTxt_idLayoutParams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        dialogTxt_id.setLayoutParams(dialogTxt_idLayoutParams);
        dialogTxt_id.setText(msg);
        LinearLayout layout = new LinearLayout(this);
        layout.setOrientation(LinearLayout.VERTICAL);
        layout.addView(dialogTxt_id);
        delAllDialog.setView(layout);

        delAllDialog.setPositiveButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1) {
                handleButtonClick(1);
            }
        });

        delAllDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1) {
                handleButtonClick(2);
            }
        });

        delAllDialog.show();
    }

    void handleButtonClick(int rez) {
        switch(rez) {
            case 1: ..... break;
            case 2: ..... break;
            .....
        }
    }
} 
```

该`if (CDlg.ShowConfirm("User confirmation","Delete?",this)==1)`语句在 Android 中没有用，因为 ShowConfirm 不会等到用户按下按钮。

取而代之的是，只需`ShowConfirm("User confirmation","Delete?");`在 s 中调用一个实现适当的代码`onClick`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:04:42.407

如果您想本着 Android 的精神编写代码，您实际上应该使用 startActivityForResult。查看链接的答案，了解它应该如何工作的详细信息。（[这里是文档](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:53:27.357

在你想要的类中定义一个静态变量，比如我会在MyAuxiliaryClass.java中定义：

```
public static USER_DECISION = -1; 
```

每当您选择一个选项时，请执行以下操作：

```
if (//Desicion == OK) {
MyAuxiliaryClass.USER_DECISION = 1;
} else (//Decision == NOT OK){
MyAuxiliaryClass.USER_DECISION = 2;
} 
```

由于您正在更改此静态变量，因此您可以在另一个类中获取值 1 或 2。希望能帮助到你。此致。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-26T18:53:40.293

创建`rez`属性而不是局部变量。正如你的方法一样`static`，属性也应该是。这意味着将定义移到方法之外。

公共类 CDlg {

```
 static int rez;

   static int ShowConfirm(String caption, String msg, Context context) {
   ... 
```

在内部类中，需要参考 CDlg 类

```
 public void onClick(DialogInterface arg0, int arg1) {
        CDlg.rez = 1;
   } 
```

作为旁注，您`static`为此使用一种方法很奇怪。Java/OOP 新手的错误之一是滥用`static`代码，感觉更像`C`是。也许您想重新考虑您的代码。

# codeigniter - 使用 codeigniter 和 IonAuth 保护视图

> ID：15096909
> 
> 赞同：1
> 
> 时间：2013-02-26T18:47:39.553
> 
> 标签：codeigniter, restrict, ion-auth

我已经为 codeigniter 2.1.3 设置了 Ion Auth。

一切运作良好。

在我的控制器 auth.php 中，我有以下函数 index() 的代码：

```
function index()
{
    // if not logged in - go to home page
    if (!$this->ion_auth->logged_in())
    {
        //redirect them to the login page
        redirect('auth/login', 'refresh');
    }
    // if user is an admin go to this page
    elseif ($this->ion_auth->is_admin())
    {
        echo "Admin User";
        // if an admin, go to admin area

        //set the flash data error message if there is one
        $this->data['message'] = (validation_errors()) ? validation_errors() : $this->session->flashdata('message');

        //list the users
        $this->data['users'] = $this->ion_auth->users()->result();
        foreach ($this->data['users'] as $k => $user)
        {
            $this->data['users'][$k]->groups = $this->ion_auth->get_users_groups($user->id)->result();
        }

        $this->_render_page('auth/view_users', $this->data);                
    }
    //if user is part of the master data team
    elseif ($this->ion_auth->in_group("master_data"))
    {
        echo "master data group";
        //redirect them to the master_data page 
        $data['title']="Master Data Home Page";
        $this->load->view("site_header",$data);
        $this->load->view("site_nav");
        $this->load->view("content_master_data");
        $this->load->view("site_footer");

    }
    elseif ($this->ion_auth->in_group("planning"))
    {
        echo "Planning";
        //redirect them to the master_data page 
        $data['title']="IMS Planning";
        $this->load->view("site_header",$data);
        $this->load->view("site_nav");
        $this->load->view("content_planning");
        $this->load->view("site_footer");

    }
    else
    {
        echo "Generic user";
        //redirect them to the default home page 
        $data['title']="IMS Home Page";
        $this->load->view("site_header",$data);
        $this->load->view("site_nav");
        $this->load->view("content_home");
        $this->load->view("site_footer");
    }
} 
```

我的想法是，只有当他们的用户在正确的组中时，控制器才会被加载。这可以正常工作，并为每个用户加载正确的视图。我的问题是我仍然可以直接浏览到任何视图，例如`http://localhost/logico/application/views/content_master_data.php`

如何限制对视图/控制器的访问，以使未登录的人和不在正确组中的人无法访问该页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:26:53.173

您必须将每个用户组重定向到不同的控制器，而不是加载不同的视图。

授权索引

```
function index()
{
    // if not logged in - go to home page
    if (!$this->ion_auth->logged_in())
    {
        //redirect them to the login page
        redirect('auth/login', 'refresh');
    }
    // if user is an admin go to this page
    elseif ($this->ion_auth->is_admin())
    {
        echo "Admin User";
        // if an admin, go to admin area

        //set the flash data error message if there is one
        $this->data['message'] = (validation_errors()) ? validation_errors() : $this->session->flashdata('message');

        //list the users
        $this->data['users'] = $this->ion_auth->users()->result();
        foreach ($this->data['users'] as $k => $user)
        {
            $this->data['users'][$k]->groups = $this->ion_auth->get_users_groups($user->id)->result();
        }

        $this->_render_page('auth/view_users', $this->data);                
    }
    //if user is part of the master data team
    elseif ($this->ion_auth->in_group("master_data"))
    {        
        //redirect them to the master controller
      redirect('master','refresh');        

    }
    elseif ($this->ion_auth->in_group("planning"))
    {
 //redirect them to the planning controller 
       redirect('planning',refresh);          
    }
    else
    {
//redirect them to the generic controller
redirect('generic','refresh');

    }
} 
```

主控制器

```
class Master extends CI_Controller {

  function __construct()
  {
    parent::__construct();
    if (!$this->ion_auth->in_group('master_data'))
    {
              redirect('auth/login', 'refresh');
            }
      }
function index()
{
          $data['title']="Master Data Home Page";
            $this->load->view("site_header",$data);
            $this->load->view("site_nav");
            $this->load->view("content_master_data");
            $this->load->view("site_footer");
}
} 
```

同样，规划和通用控制器的构造函数必须包含相应的身份验证检查。这将防止通过 url 执行不需要的方法。

# javascript - 使用 onmouseover 事件更改 backgroundPosition

> ID：15096910
> 
> 赞同：0
> 
> 时间：2013-02-26T18:47:41.667
> 
> 标签：javascript, css, html

我需要一点帮助。当列表中的一个链接（您猜对了）鼠标悬停时，我遇到了尝试调用块元素的 backgroundPosition 更改的问题。这是踢球者：它需要在外部 .js 文件中可行（内联 JS 看起来真的很混乱且不专业恕我直言）。到目前为止，我看到的所有解决方案要么太简单（仅 CSS 的解决方案无法工作，因为元素分开），要么使用了我还不习惯的东西（这意味着没有 jQuery，谢谢）。

我想要的是类似于 if-else 语句的东西（如果可能的话。如果没有，下一个最接近的东西会做），它看起来/执行如下：

```
var block = document.getElementById('block');
if (onmouseover *link1*) {
    block.style.backgroundPosition='-200px 0px';
} else if (onmouseover *link2*) {
    block.style.backgroundPosition='-400px 0px';
} else if (onmouseover *link3*) {
    block.style.backgroundPosition='0px -200px';
} 
```

如果需要任何其他代码部分，我会尽可能提供。提前致谢！

编辑：要清楚，我不是要求整个 JS 程序（我不是那么愚蠢......），我将如何让 if 语句识别一个元素已被鼠标悬停并修改另一个相应的，因为到目前为止我所有的尝试都失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:00:17.770

我认为您正在将一些非常简单的事情变得过于复杂。

这是你想要得到的吗？根本不需要javascript。

查看 JSFiddle：http: [//jsfiddle.net/ionko22/fjTUA/](http://jsfiddle.net/ionko22/fjTUA/)

基本 HTML

```
<a id="hover-me1">Link 1</a>
<a id="hover-me2">Link 2</a>
<a id="hover-me3">Link 3</a>

<div id="change-my-background"></div> 
```

和基本的 CSS

```
#hover-me1:hover ~ #change-my-background{
    background:#aa3233 url(http://i.imgur.com/DMv02cc.jpg) repeat-x -200px -200px;
}

#hover-me2:hover ~ #change-my-background{
    background:#aa3233 url(http://i.imgur.com/DMv02cc.jpg) repeat-x -400px -200px;
}

#hover-me3:hover ~ #change-my-background{
    background:#aa3233 url(http://i.imgur.com/DMv02cc.jpg) repeat-x -600px -200px;
}

#change-my-background {
    width:300px;
    height:300px;
} 
```

# google-app-engine - 在 GAE 上部署和读取静态文件

> ID：15096911
> 
> 赞同：0
> 
> 时间：2013-02-26T18:47:52.790
> 
> 标签：google-app-engine, lucene

由于实验性搜索 API 的限制，我决定使用 Apache Lucene 来满足我的全文搜索需求。我查看了 Lucene 的 AppEngine 端口，但它们不适合我的需要（使用 RAMIndex 的端口不支持我的索引大小，而使用数据存储的端口在性能方面太慢了），所以我使用我的测试了 Lucene本地文件系统，发现它非常适合我。

现在我的问题是如何让它在 AppEngine 上工作。我们不允许写入文件系统，但这很好，因为他的索引是在我的开发机器上创建的，并且在服务器上是只读的（我会定期更新索引并需要向上推送新索引）。允许从文件系统读取，所以我认为我可以将我的索引与我的其他静态文件捆绑在一起并可以访问它。

我遇到的问题是 AppEngine 静态文件配额（页面底部的[https://developers.google.com/appengine/docs/java/runtime ）。](https://developers.google.com/appengine/docs/java/runtime)我的索引只有大约 750MB，所以我在“总文件 < 1GB”前面很好，但是我的一些索引文件是几百 MB，因此由于每个文件最大 32 MB，AppEngine 上不允许使用。

有什么方法可以在 AppEngine 上部署和读取大于 32 MB 的静态文件？或者我是否会为了读取我的 Lucene 索引而不得不设置其他一些服务器（例如 Amazon）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:13:37.780

对于 750MB 的文件，您必须使用 BlobStore 或 Google Cloud Storage。

如果您可以在 Lucene 中更改访问静态文件的代码，则可以使用对 BlobStore 或 Cloud Storage 的请求来读取文件。但如果静态文件是唯一的选项，则必须将索引拆分为 32MB 块。

如果您更改 Lucene 文件访问的代码，则每个读取请求的限制为 32MB。因此，必须分段读取文件。

# bash - 简单的 bash 脚本问题

> ID：15096913
> 
> 赞同：1
> 
> 时间：2013-02-26T18:47:59.243
> 
> 标签：bash, shell

我正在使用 mineos（minecraft os），它有一些可用的命令来获取一些信息。

1.  拉取一组服务器的pid
2.  计算游戏日志中字符串的实例
3.  当计数达到 X 时触发事件

这适用于提取所需的信息：

```
#!/bin/bash

cd /usr/games/minecraft
count=`grep -c "\[SEVERE\]" /home/mc/servers/testingmode/server.log`
pid=`./mineos_console.py -s testingmode get pid`

./mineos_console.py -s testingmode console say "$count"
./mineos_console.py -s testingmode console say "$pid" 
```

但是只要我添加一个 if 它就会抛出“pid：command not found”：

```
#!/bin/bash

cd /usr/games/minecraft
count=`grep -c "\[SEVERE\]" /home/mc/servers/testingmode/server.log`
pid =`./mineos_console.py -s testingmode get pid`

if [ "$count" -gt 400 ];then
./mineos_console.py -s testingmode console say "$count"
./mineos_console.py -s testingmode console say "$pid"
fi 
```

任何人都知道为什么或一个不错的解决方案？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T18:52:23.033

在行

```
pid =`./mineos_console.py -s testingmode get pid` 
```

`pid`和之间有一个空格`=`。删除它应该可以解决问题。

# java - jetty 8 多部分/表单数据请求

> ID：15096917
> 
> 赞同：0
> 
> 时间：2013-02-26T18:48:06.030
> 
> 标签：java, jetty, embed, multipartform-data, jetty-8

我在项目中使用 Jetty 8 作为嵌入式服务器。一切都按预期工作，除了多部分/表单数据请求。

我必须处理 multipart/form-data 请求的 servlet 工作正常， - 我已经使用 eclipse 的 RunJettyRun 插件对其进行了测试。这就是为什么嵌入式服务器代码必须是有罪的部分。

我的代码遵循这样的码头[示例](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty)。我从 2 天开始搜索互联网，但没有找到如何配置码头。

欢迎每一个提示，亲切的问候，海

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:34:12.077

事情可以这么简单。您只需将 MultipartConfig 设置为您的 ServletHolder。例如：

```
ServletHolder sh = new ServletHolder(YourServlet.class);
sh.getRegistration().setMultipartConfig(new MultipartConfigElement("yourTempLocation", 1048576, 1048576, 262144)); 
```

只需使用*@MultipartConfig*注释 YourServlet ，您就可以完全访问 multipart/form-data。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-17T08:46:18.210

您可以通过直接将所需的类添加到服务器来设置多部分支持，

```
org.eclipse.jetty.webapp.Configuration.ClassList classlist = org.eclipse.jetty.webapp.Configuration.ClassList.setServerDefault(server);
    classlist.addAfter("org.eclipse.jetty.webapp.FragmentConfiguration", "org.eclipse.jetty.plus.webapp.EnvConfiguration", "org.eclipse.jetty.plus.webapp.PlusConfiguration");
    classlist.addBefore("org.eclipse.jetty.webapp.JettyWebXmlConfiguration", "org.eclipse.jetty.annotations.AnnotationConfiguration"); 
```

或将所需的配置添加到您的 Web 应用程序上下文中，如下所示：

```
WebAppContext myWebAppContext= new WebAppContext();     
myWebAppContext.setConfigurations(new Configuration[] { new AnnotationConfiguration(), new WebInfConfiguration(),
            new WebXmlConfiguration(), new FragmentConfiguration(), new EnvConfiguration(), new PlusConfiguration(),
            new JettyWebXmlConfiguration() }); 
```

# php - 组织数据库

> ID：15096920
> 
> 赞同：0
> 
> 时间：2013-02-26T18:48:08.100
> 
> 标签：php, mysql, database, cakephp

在我的应用程序中，我在数据库（MySQL）中有 2 个表： `Companies`和`News`. `Company`有很多`News`。

`Company`可以有一组图片，这些图片将`company`与该公司的所有相关信息一起显示在“查看页面”上。

我添加了一个`Photos`包含下一个字段的表：`id` `company_id` `filename`

我的问题是：现在我还需要拥有属于`News`. 我应该添加另一个表，例如将调用该表，或者我应该向我的表中`Media`添加附加字段 ( `type`) ，重命名为然后过滤 PHP 中的结果，并构建更复杂的查询，例如获取与 Company 和 'type = 相关的照片2' 获取与.`Photos``company_id``foreign_id``AND 'type' = 1``news`

什么是更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:56:46.440

您应该将该`company_id`字段从`Photos`表中取出并创建两个新表，其中一个`CompanyPhotos`带有`id`, `photo_id`,`company_id`字段，另一个`NewsPhotos`带有`id`, `photo_id`, `news_id`。

然后，如果您想获取公司的照片，您可以这样做：`select * from Photos p inner join CompanyPhoto cp on p.id = cp.photo_id where cp.company_id = ?`。

与`NewsPhoto`:类似`select * from Photos p inner join NewsPhoto np on p.id = np.photo_id where np.news_id = ?`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:56:36.493

[规范化数据库](http://en.wikipedia.org/wiki/Database_normalization)总是好的。一开始它只是包含所有数据的表，它已经演变为具有公共字段的链接表。

因此，我强烈建议您使用桌子`Photos`。

毕竟，您必须提出基本问题：一张照片可以属于不同的新闻吗？一条新闻可以有不同的图片吗？如果两个问题的答案都是“是”，则您有一个 N:M 关系，它通过一个包含每个表的 id 的中间表来解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:47:48.313

您可以用`UUIDs`作主键。因为它们在应用程序范围内是唯一的（如果您使用 CakePHP 创建它们），您可以只使用`parent_id`Photos 表中的一列并去掉该`type`列。

另一种方法是 MySQL 视图。您可以在照片表的顶部设置 2 个视图（例如 NewsPhotos、CompanyPhotos）。CakePHP 像表格一样处理（简单）视图，因此您可以轻松地为此创建模型和控制器。

# mysql - 如何在 My SQL 中以 MM/dd/yyyy hh:mm:ss.S edt/est 格式获取日期

> ID：15096924
> 
> 赞同：-3
> 
> 时间：2013-02-26T18:48:17.187
> 
> 标签：mysql

有没有办法让日期以以下示例中显示的格式显示在 My sql 中？

```
 "02/23/2012 13:46:20.5 EST" 
```

或者

```
"03/23/2012 13:46:20.5 EDT" 
```

基本上我正在寻找可以在格式化字符串中包含时区的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:17:30.437

以 UTC（祖鲁时间，又名 GMT）存储所有时间，然后`CONVERT_TZ`在 MySQL 中使用以转换为您想要的任何时区。

# javascript - Soundcloud https 身份验证与 Chrome

> ID：15096925
> 
> 赞同：0
> 
> 时间：2013-02-26T18:48:20.237
> 
> 标签：javascript, authentication, https, soundcloud

我的应用程序的身份验证页面使用 https，我有 soundcloud connect js 使用 https：

```
<script src="https://connect.soundcloud.com/sdk.js"></script> 
```

但是，当用户通过弹出窗口登录时，谷歌浏览器将阻止关闭窗口的回调并抱怨：

```
The page at ... ran insecure content from http://connect.soundcloud.com/sdk.js. 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:52:22.043

试试也许： `<script src="//connect.soundcloud.com/sdk.js"></script>`

然而，根据这篇文章，这在 IE7、IE8 中出现了一些性能问题： [http ://robertnyman.com/2010/02/18/css-files-downloaded-twice-in-internet-explorer-with-protocol-relative-urls /](http://robertnyman.com/2010/02/18/css-files-downloaded-twice-in-internet-explorer-with-protocol-relative-urls/)

**评论**
后更新查看您的链接后：

```
 <div ng-controller="LoginCtrl" ng-init="init('numbers', 
   'http://distinctive-kreek.rhcloud.com/authenticated')">
 <h1> Login ...</h1>
 </div> 
```

这不就是这里使用http的问题吗？

# vb.net - 用于 VB.NET (apple) 的示例 PushSharp 代码

> ID：15096936
> 
> 赞同：2
> 
> 时间：2013-02-26T18:48:51.697
> 
> 标签：vb.net, apple-push-notifications, pushsharp

我正在寻找从 VB.NET 应用程序中使用 PushSharp 的答案，并且能够将来自各种来源的一些代码拼凑在一起。没有一个完整的例子来连接回调并使用库发送通知。为了节省时间，我认为发布我的代码会帮助下线的人

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T18:48:51.697

```
 Imports PushSharp.PushService
    Imports PushSharp.Apple
    Imports PushSharp.Android
    Imports PushSharp.WindowsPhone
    Imports PushSharp.Windows

    Protected _push As New PushSharp.PushService

    Private Sub doSend()
      initializePush()
      SendMobileNotifications()
      deinitializePush()
    End Sub

          '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''  
          ''
          '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
          Private Shared Sub Events_OnDeviceSubscriptionIdChanged(platform As PushSharp.Common.PlatformType, oldDeviceInfo As String, newDeviceInfo As String, notification As PushSharp.Common.Notification)
            'Currently this event will only ever happen for Android GCM
            Debug.Print("Device Registration Changed:  Old-> " & oldDeviceInfo & "  New-> " & newDeviceInfo)
          End Sub

          Private Shared Sub Events_OnNotificationSent(notification As PushSharp.Common.Notification)
            debug.print("Sent: " & notification.Platform.ToString() & " -> " & notification.ToString())
          End Sub

          Private Shared Sub Events_OnNotificationSendFailure(notification As PushSharp.Common.Notification, notificationFailureException As Exception)
            debug.print("Failure: " & notification.Platform.ToString() & " -> " & Convert.ToString(notificationFailureException.Message) & " -> " & notification.ToString())
          End Sub

          Private Shared Sub Events_OnChannelException(exception As Exception, platformType As PushSharp.Common.PlatformType, notification As PushSharp.Common.Notification)
            debug.print("Channel Exception: " & platformType.ToString() & " -> " & exception.ToString())
          End Sub

          Private Shared Sub Events_OnDeviceSubscriptionExpired(platform As PushSharp.Common.PlatformType, deviceInfo As String, notification As PushSharp.Common.Notification)
            debug.print("Device Subscription Expired: " & platform.ToString() & " -> " & deviceInfo)
          End Sub

          Private Shared Sub Events_OnChannelDestroyed(platformType As PushSharp.Common.PlatformType, newChannelCount As Integer)
            debug.print("Channel Destroyed for: " & platformType.ToString() & " Channel Count: " & newChannelCount)
          End Sub

          Private Shared Sub Events_OnChannelCreated(platformType As PushSharp.Common.PlatformType, newChannelCount As Integer)
            debug.print("Channel Created for: " & platformType.ToString() & " Channel Count: " & newChannelCount)
          End Sub
          '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''  
          ''
          '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
          Private Sub initializePush()
            ' Wire up the events
            _push = New PushSharp.PushService
            AddHandler _push.Events.OnDeviceSubscriptionExpired, AddressOf Events_OnDeviceSubscriptionExpired
            AddHandler _push.Events.OnDeviceSubscriptionIdChanged, AddressOf Events_OnDeviceSubscriptionIdChanged
            AddHandler _push.Events.OnChannelException, AddressOf Events_OnChannelException
            AddHandler _push.Events.OnNotificationSendFailure, AddressOf Events_OnNotificationSendFailure
            AddHandler _push.Events.OnNotificationSent, AddressOf Events_OnNotificationSent
            AddHandler _push.Events.OnChannelCreated, AddressOf Events_OnChannelCreated
            AddHandler _push.Events.OnChannelDestroyed, AddressOf Events_OnChannelDestroyed

            '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
            ''Configure and start Apple APNS
            '' IMPORTANT: Make sure you use the right Push certificate.  Apple allows you to generate one for connecting to Sandbox,
            ''   and one for connecting to Production.  You must use the right one, to match the provisioning profile you build your
            ''   app with!
            Dim appleCert() As Byte = File.ReadAllBytes(Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "../../../PushSharp/Resources/DocketTrak_Development.p12"))
            '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
            ''IMPORTANT: If you are using a Development provisioning Profile, you must use the Sandbox push notification server 
            ''  (so you would leave the first arg in the ctor of ApplePushChannelSettings as 'false')
            ''  If you are using an AdHoc or AppStore provisioning profile, you must use the Production push notification server
            ''  (so you would change the first arg in the ctor of ApplePushChannelSettings to 'true')
            _push.StartApplePushService(New ApplePushChannelSettings(False, appleCert, "trakDock3%", False))
          End Sub
          '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''  
          ''
          '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
          Private Sub deinitializePush()
            _push.StopAllServices(True)
            _push = Nothing
          End Sub
          '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''  
          ''
          '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
          Private Sub SendMobileNotifications()
            Dim rst As SqlClient.SqlDataReader
            rst = local_sql.cnExecute(strSql)
            Do While rst.Read()
              Dim apple As AppleNotification = PushSharp.NotificationFactory.Apple()
              PushSharp.FluentNotification.ForDeviceToken(apple, rst("device_id"))
              PushSharp.FluentNotification.WithAlert(apple, "alert Test!")
              PushSharp.FluentNotification.WithSound(apple, "default")
              PushSharp.FluentNotification.WithBadge(apple, 5)
              _push.QueueNotification(apple)
            Loop
          End Sub 
```

# c++ - 说明：将 32 位移植到 64 位

> ID：15096939
> 
> 赞同：3
> 
> 时间：2013-02-26T18:48:57.767
> 
> 标签：c++, windows, visual-c++, porting, dword

引用自[http://msdn.microsoft.com/en-us/library/windows/desktop/aa384242%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384242%28v=vs.85%29.aspx)

> 在适当的情况下使用 UINT_PTR 和 INT_PTR（如果您不确定是否需要它们，使用它们以防万一）。不要将指针转换为 ULONG、LONG、INT、UINT 或 DWORD 类型。

我可以安全地假设在现有的 32 位代码行中将所有引用的 DWORD 转换为 UNIT_PTR 是安全的，没有任何副作用吗？

是否有其他推荐的指南来移植在代码行中引用 DWORD 的 32 位代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T19:50:02.937

这太粗暴了。只需让编译器为您完成工作，启用警告 4302，以便它会在指针值被截断时告诉您。将#pragma 放在一个好位置，预编译的头文件将是理想的。或者指定`/we4302`编译器选项。

```
#pragma warning(default:4302)

int main()
{
    int* p = 0;
    long bad = (long)p;    // C4302: 'type cast' : truncation from int* to long
    return 0;
} 
```

/Wp64 编译选项也很有用，无论如何用于嗅探，但它[有问题](https://stackoverflow.com/a/7171446/17034)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T19:01:18.383

您只需要使用`INT_PTR`or`UINT_PTR`如果您打算在变量中存储一个指针（包括各种形式的`HANDLE`）。如果它只是一个常规的整数值，那就没关系了。

如果你盲目地将 all 翻译`DWORD`为`UINT_PTR`. [也就是说，当您编译 64 位代码时，与 32 位代码一样，类型`UINT_PTR`相同，`DWORD`因此在这种情况下您可能不会收到任何警告]。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T19:17:44.943

要添加@MatsPetersson 答案 -

广泛用于保存地址的原因`DWORD`是它与 32 位架构上的指针大小相匹配。

最佳实践是对保存地址的变量使用专用类型。这就是`UINT_PTR`&`INT_PTR`的用途——它们对于 32 位和 64 位目标都是正确的，因为它们的定义是根据编译目标正确设置的。实际上，您可以浏览 MS 标头并亲自查看这些类型对应的实际原始类型。

每当变量用于地址以外的数据时，实际类型应根据存储的数据定义，通常不依赖于底层计算机体系结构 -`DWORD`将保留`DWORD`，`WORD`将保留`WORD`等。

# python - 了解全局名称和 Python2 和 3

> ID：15096941
> 
> 赞同：2
> 
> 时间：2013-02-26T18:49:13.797
> 
> 标签：python, python-2.7, python-3.x

作为 Python 的新手，我正在学习 Python2 和 3 之间的一些区别。在完成 Python 课程时，似乎需要在代码中进行一些更改才能使其在 3 中工作。这是代码；

```
def clinic():
    print "In this space goes the greeting"
    print "Choose left or right"
    answer = raw_input("Type left or right and hit 'Enter'.")
    if answer == "LEFT" or answer == "Left" or answer == "left":
        print "Here is test answer if you chose Left."
    elif answer == "RIGHT" or answer == "Right" or answer == "right":
        print "Here is the test answer if you chose Right!"
    else:
        print "You didn't make a valid choice, please try again."
        clinic()

clinic() 
```

为了在 Python 3 中实现这一点，需要更改打印语法（添加括号），但出现的另一个问题是错误“NameError: global name 'raw_input' is not defined”。我在学习中经常看到这个问题。当我在 Python2 中运行它时似乎没有出现，但在 3 中似乎需要将它声明为全局。但是，当我将“global raw_input”添加到函数中时，它似乎不起作用（在其他情况下，每次我这样做时它都起作用。）有人能告诉我我做错了什么吗？另外，我听说声明全局变量是在不必要时养成的坏习惯，那么处理它们的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T18:50:39.650

`raw_input()`已在 Python 3 中重命名，[`input()`](http://docs.python.org/3/library/functions.html#input)请改用（旧的 Python 2`input()`已被删除）。参见[PEP 3111](http://www.python.org/dev/peps/pep-3111/)。

有关详尽的概述，请参阅[Python 3.0 中的新增功能。](http://docs.python.org/3/whatsnew/3.0.html)还有[Dive into Python 3 概述](http://getpython3.com/diveintopython3/porting-code-to-python-3-with-2to3.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:20:27.397

修改[Martijn 的回答](https://stackoverflow.com/a/15096986/923794)，对于这些小的不兼容性，您可以使用以下一般技巧：

```
try:
    input_func = raw_input
except NameError:
    raw_input = input 
```

之后，您可以`raw_input`在脚本中同时使用 Py2 和 Py3。`unicode`, 和`byte`类型可能需要类似的东西。

由于您表示您有兴趣从 >=Py2.7 迁移到 Py3，因此您应该知道 Python 2.7 主要是 Python 2.6，其中向后移植了很多 Py3 的东西。

因此，虽然 print 函数在技术上仍然是 Py2.7 中的一个语句，并且在 Py3 中是一个函数，但 Py2.7`print`确实接受元组。这使得一些 Py3 语法在 Py2.7 中工作。简而言之，您可以只使用括号：

```
print("Here is the test answer if you chose Right!") 
```

要打印空行，在两个版本中工作的最佳方法是

```
print("") 
```

默认情况下，要在不添加换行符的情况下打印，我会求助于`write()`，例如：

```
import sys
sys.stdout.write("no newline here")
sys.stdout.write(" -- line continued here, and ends now.\n") 
```

另一方面，对于很多 Py3 的东西，你实际上可以通过从[future](http://docs.python.org/2/library/__future__.html)导入东西来在 Py2.7 中启用完整的 Py3 语法：

```
from __future__ import print_function 
```

然后你不需要在`write()`和之间切换`print()`。

在实际应用程序中，这完全取决于您是否以及如何与其他人的代码（包、团队中的其他开发人员、代码发布要求）进行交互，以及 Python 版本更改的路线图是什么。

# c++ - 如何将 cpp 源代码编译为完整的静态二进制文件，但以下内容除外：libc、libpthread、libdl、libstdc++ 和 libm

> ID：15096943
> 
> 赞同：2
> 
> 时间：2013-02-26T18:49:14.957
> 
> 标签：c++, compilation, cross-compiling

我想将二进制 linux 编译为完全静态的，但我总是以这种配置失败：

```
CFLAGS="--static" CPPFLAGS="-I/home/alan/arm/arm-none-linux-gnueabi/libc/usr/include" LDFLAGS="-L/home/alan/arm/arm-none-linux-gnueabi/libc//usr/lib" LIBS="-lcrypt -ldl -lpthread -lm -lc -lstdc++" CC=arm-none-linux-gnueabi-gcc AR=arm-none-linux-gnueabi-ar CXX=arm-none-linux-gnueabi-g++ ./configure --host=arm-none-linux-gnueabi target=arm-none-linux-gnueabi --prefix=/home/alan/armbin/test --without-pcre --without-zlib --without-bzip2 --without-openssl --disable-ipv6 --enable-static 
```

但我总是收到警告 dlopen、gethostbyname 等。如果我不共享 libc、libm 等。我收到大约如下警告：

```
warning: Using 'gethostbyname' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:53:50.473

使用`-pthread`而不是`-lpthread`.

[来源](http://www.linuxquestions.org/questions/debian-26/statical-linking-943505/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T00:20:55.617

您的链接命令应如下所示：
g++ objectFiles $(CFLAGS) -o executable -Wl,-Bstatic -L/path/to/static/lib1/ -ls1 -L/path/to/static/lib2 -ls2 -Wl, -B动态

您只需显式调用静态库 libs1.a、libs2.a 即可。您引用的共享系统库（libc.so、libpthreads.so、libm.so、libdl.so、libstdc++.so 等）应该由链接器隐式找到，并受 -Wl、-Bdynamic 的影响。您不必明确地传递它们。尝试执行“ldd 可执行文件”以查看动态依赖项。

# javascript - 使用 if 语句检查是否为 NaN

> ID：15096951
> 
> 赞同：8
> 
> 时间：2013-02-26T18:49:27.137
> 
> 标签：javascript, if-statement

我从表单中获取数值。然后我检查它是否是NaN。如果它是一个数字，我想将该值设置为一个变量。问题是当我输入一个有效数字时，我仍然会收到警报，并且该数字没有传递给变量“日期”。我应该如何修改我的声明，以便当它是一个有效数字时，我可以将它分配给可变日期？

```
var adate = document.getElementById("dueDate").value;    

    if ( adate == NaN || " ") {
    alert("Please enter a due date");
    return;
    }

    else {
    var date = (new Date()).setDate(adate);
    }

    processDate(date); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-26T18:51:44.127

使用 Javascript 的[isNaN()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/isNaN)函数。

根据 IEEE 的标准，用 NaN 检查相等性总是错误的。决定这一点的 IEEE-754 委员会成员斯蒂芬·佳能 (Stephen Canon) 有[一个很好的答案来解释这一点](https://stackoverflow.com/a/1573715/1253844)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-26T18:51:12.197

尽管看起来很奇怪，`NaN !== NaN`.

```
if (adate !== adate || adate !== " ") {
  //...
} 
```

该`isNaN`功能在很多情况下都可以使用。[不过，有一个很好的理由证明它已经坏了](https://gist.github.com/kitcambridge/1086528)。

解决此问题的一种好方法是：

```
MyNamespace.isNaN = function (x) {
  return x !== x;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-22T07:15:12.633

你可以使用`if( isNaN(adate))`

祝你好运

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-26T18:57:04.347

你这里有两个问题。结果是条件总是通过。这就是它的作用：

```
adate == NaN // first, test if adate == NaN (this always returns false)
||           // if the first test fails (i.e. always), carry on checking
" "          // test if the string " " is truthy (this always returns true) 
```

做两个单独的`||`检查。它不会*测试*是否`adate`是“要么`NaN`或`" "`”，这似乎是您所期望的。

您的代码不妨说

```
if ( true ) { 
```

但是，如果您尝试了两个比较，您将能够解决这个问题：

```
if ( (adate == NaN) || (adate === " ")) { 
```

然而，正如其他人所说，这不起作用，因为`NaN !== NaN`. 所以解决方案是使用`isNaN`：

```
if (isNaN(adate) || (adate === " ")) { 
```

# asp.net - 将类对象添加到通用列表时数据被覆盖

> ID：15096952
> 
> 赞同：1
> 
> 时间：2013-02-26T18:49:28.807
> 
> 标签：asp.net, vb.net

我正在尝试将一个类对象（我认为这就是它的名称）添加到我的类的通用列表中。在以下代码中，每当我更改 TempQuoteReturnFromExecuteEstimate 中的值时，它都会更改通用列表的所有行中的这些值。我猜它只是引用对象。如何将值复制到通用列表？谢谢

```
Dim AllEstimatesReturn As New List(Of QuoteReturnData)
Dim TempQuoteReturnFromExecuteEstimate As New QuoteReturnData
...
AllEstimatesReturn.Add(TempQuoteReturnFromExecuteEstimate) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:00:37.963

你的假设是正确的。当您创建一个类类型（引用类型）变量时，它只是*引用*一个对象。您可以有许多不同的变量同时引用同一个对象。

在这种情况下，`AllEstimatesReturn`列表中的每个项目就像一个单独的`QuoteReturnData`变量。每个项目只是对对象的引用，而不是副本。因此，理论上，列表中的每个项目都可以引用同一个对象，尽管这通常不是您想要的。

如果要为列表中的每个项目创建单独的对象，则每次都需要使用`New`关键字创建它们：

```
'Add the first item
Dim TempQuoteReturnFromExecuteEstimate As New QuoteReturnData
...
AllEstimatesReturn.Add(TempQuoteReturnFromExecuteEstimate)

'Add the second item
TempQuoteReturnFromExecuteEstimate = New QuoteReturnData  ' Use New to create another object
...
AllEstimatesReturn.Add(TempQuoteReturnFromExecuteEstimate) 
```

请注意，在上面的示例中，我重用了相同的变量，只是更改了它的值，以便它引用一个新对象。旧对象仍然存在，因为它被列表对象引用。或者，您可以每次都声明一个新变量，但是，除非您为了清楚起见而这样做，否则没有技术原因需要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:10:27.230

类类型是引用类型。因此，这会将 3 个对同一对象的引用添加到列表中：

```
Dim AllEstimatesReturn As New List(Of QuoteReturnData)
Dim TempQuoteReturnFromExecuteEstimate As New QuoteReturnData

AllEstimatesReturn.Add(TempQuoteReturnFromExecuteEstimate)
AllEstimatesReturn.Add(TempQuoteReturnFromExecuteEstimate)
AllEstimatesReturn.Add(TempQuoteReturnFromExecuteEstimate) 
```

每次都创建新对象

```
Dim AllEstimatesReturn As New List(Of QuoteReturnData)

AllEstimatesReturn.Add(New QuoteReturnData())
AllEstimatesReturn.Add(New QuoteReturnData())
AllEstimatesReturn.Add(New QuoteReturnData()) 
```

或者实现一个克隆的方法`QuoteReturnData`：

```
Class QuoteReturnData

    ' Creates an exact copy of the current QuoteReturnData object.
    Public Function SwallowCopy() As QuoteReturnData
        Return DirectCast(Me.MemberwiseClone(), QuoteReturnData)
    End Function

End Class 
```

`MemberwiseClone`继承自我们需要的东西，`Object`并且做我们需要的东西；但是，此方法是受保护的，只能从类中调用。因此，我们将它包装到一个公共函数中。

现在你可以这样做

```
Dim AllEstimatesReturn As New List(Of QuoteReturnData)
Dim TempQuoteReturnFromExecuteEstimate As New QuoteReturnData

AllEstimatesReturn.Add(TempQuoteReturnFromExecuteEstimate.SwallowCopy())
AllEstimatesReturn.Add(TempQuoteReturnFromExecuteEstimate.SwallowCopy())
AllEstimatesReturn.Add(TempQuoteReturnFromExecuteEstimate.SwallowCopy()) 
```

* * *

请注意，这只会创建一个浅克隆。如果对象包含对其他对象的引用，则不会自动克隆这些其他对象。由您决定这是否可行，或者您是否需要深度克隆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:55:58.333

对象存储在引用中。仅复制值类型（即*structs*）。

为了拥有对象的*副本*，您需要*克隆*它。除非您这样做，否则您将始终创建对同一对象的许多引用。你的名单也不例外。

我将开始实现[`ICloneable`](http://msdn.microsoft.com/en-us/library/system.icloneable.aspx).NET Framework 中的接口。

### 更新

如果您不喜欢该`ICloneable`接口，因为`Clone()`返回类型为 的对象`object`，您可以实现这样的接口：

```
Public Interface ICloneable(Of T)
{
      Function Clone() As T;
} 
```

您将项目添加到列表中的代码将如下所示（如果`QuoteReturnData`implements `ICloneable(Of T)`，当然）：

```
AllEstimatesReturn.Add(TempQuoteReturnFromExecuteEstimate.Clone()); 
```

# ruby-on-rails - 使用设计为每个用户设置不同的 facebook oauth 范围

> ID：15096953
> 
> 赞同：3
> 
> 时间：2013-02-26T18:49:30.500
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, devise, omniauth

我有一个带有两种不同类型用户（称为 A 和 B）的 Rails 应用程序。现在他们都可以使用 facebook 登录。但是，我需要 B 能够使用一些扩展权限进行 oauth，并且我不希望 A 给我扩展权限。

在 config/initializers/devise.rb 里面

```
config.omniauth :facebook, "API_KEY", "API_SECRET", :client_options => {:ssl => {:ca_path => '  /path/to/my/ssl/stuff'}} 
```

我知道我可以添加

```
:scope => "extended_permissions" 
```

但我只希望在 B 用户注册时发生扩展权限。

由于这是在初始化程序中，这甚至可能吗？或者我可以在应用程序的其他地方以某种方式配置.omniauth 并保持设计满意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-29T12:13:53.933

文档中清楚地解释了

> 如果您想根据每个请求设置显示格式、auth_type 或范围，您可以将其传递给 OmniAuth 请求阶段 URL，例如：/auth/facebook?display=popup 或 /auth/facebook?scope =电子邮件。

来源：[https ://github.com/mkdynamic/omniauth-facebook#per-request-options](https://github.com/mkdynamic/omniauth-facebook#per-request-options)

# c# - 拒绝 FullCalendar 中的更改？

> ID：15096958
> 
> 赞同：0
> 
> 时间：2013-02-26T18:49:43.280
> 
> 标签：c#, javascript, asp.net, fullcalendar

FullCalendar 有没有办法拒绝更改？例如，当我移动一个事件然后调用服务器函数来更新数据库时，如果返回 false（数据库更新失败），我可以拒绝更改以使视图保持同步到数据库吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:43:34.603

如果您使用拖放来移动事件，请查看`eventDrop`回调，`revertFunc`如果您的 Ajax 调用失败，您可以使用该选项恢复状态。

[arshaw.com/fullcalendar/docs/event_ui/eventDrop](http://arshaw.com/fullcalendar/docs/event_ui/eventDrop)

# jaxb - Jersey POST xml 和 javax.xml.bind.UnmarshalException 与 ServletFilter

> ID：15096959
> 
> 赞同：0
> 
> 时间：2013-02-26T18:49:46.197
> 
> 标签：jaxb, jersey, servlet-filters

我有一个 Jersey POST REST 服务，它既生产又消费 MediaType.APPLICATION_XML。我还有一个 ServletFilter 进行一些身份验证：

```
 if (request instanceof HttpServletRequest) {

//read headers

//authenticate

filterChain.doFilter(request, response);

... 
```

如果没有图片中的过滤器，我的 REST api 可以完美运行。使用过滤器，我确实在 Firebug 中看到了响应 XML，但状态代码为 400：javax.xml.bind.UnmarshalException - 带有链接异常：[org.xml.sax.SAXParseException: Premature end of file。]

我读到的帖子暗示过滤器会改变响应，但我真的不知道该怎么做才能解决这个问题。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:16:40.390

我使用了 ContainerRequestFilter 而不是 javax.servlet.Filter 并且一切正常。

# java - 能用于双值？

> ID：15096963
> 
> 赞同：1
> 
> 时间：2013-02-26T18:49:57.763
> 
> 标签：java, liferay, liferay-6

我一直在疯狂地尝试使用 AUI 标签库为服务构建器对象输入字段。我正在使用 Liferay MVC 环境。该字段`downPayment`定义为`double`in `service.xml`。这是我在 JSP 中尝试的内容：

```
<aui:form action="<%=submitApplicationURL%>" inlineLabels="true">
<aui:model-context model="<%=CreditApp.class%>" bean="creditApp"></aui:model-context>

    <aui:fieldset>
            ...
        <aui:input name="downPayment" format="${currencyFormat}" value="${creditApp.downPayment}" ></aui:input> 
            ...
        <aui:button type="submit" />
    </aui:fieldset>
</aui:form> 
```

另外，有谁知道liferay AUI taglib 的更多文档在哪里？在这一点上，我正在考虑切换到更熟悉的东西，例如 portlet JSF，并完全放弃整个“liferay way”的东西。一些专家的指导将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:13:10.493

由于您熟悉 JSF，因此您可以使用 Primefaces，它更加成熟、可扩展、用户采用、直接且文档化。

根据我的经验，AUI taglib 的文档记录相当差。当您尝试使用“概念验证”式教程中未解释的功能时，您的开发将是一种不断试错的体验，而您唯一的希望是找到其他人的帖子论坛。具有讽刺意味的是，作为一个不太直接的库，AUI 比其他组件库更需要完整的文档。

# c# - 如何在 C# 中将自定义 propertyGrid 与标准控件连接起来？

> ID：15096971
> 
> 赞同：3
> 
> 时间：2013-02-26T18:50:14.067
> 
> 标签：c#, .net, winforms, propertygrid

我正在创建一个图形程序，我希望用户能够更改他们创建的图形的外观。为他们提供更改系列颜色、数据点大小等的机会。我允许他们通过使用 propertyGrid 来做到这一点。然而，通过使用堆栈溢出的优秀人员的帮助，我能够将图表的所有属性导入我的属性网格；现在我不知道如何将我的图表连接到 propertyGrid，所以当我更改网格中的某些内容时，图表会发生变化。

到目前为止我有

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        magRadioBox.Checked = true;
        PropertyGrid propertyGrid1 = new PropertyGrid();
        propertyGrid1.CommandsVisibleIfAvailable = true;
        propertyGrid1.Text = "Graph and Plotting Options";
        propertyGrid1.PropertyValueChanged += propertyGrid1_PropertyValueChanged;

        this.Controls.Add(propertyGrid1);
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        this.Text = "MY Plot Program";
        propertyGrid1.SelectedObject = chart1; 
    }

    private void button1_Click(object sender, EventArgs e)
    {
        //some code that is populating my chart(chart1) with data 
        //....chart1 being filled with data 
    }

    private void propertyGrid1_PropertyValueChanged(object s , PropertyValueChangedEventArgs e)
    {
        //Getting the MyChart instance from propertyGrid 
        MyChart myChart = (MyChart)(((PropertyGrid)s.SelectedObject);
        //Calling the method that will refresh my chart1 
        myChart.Invalidate(); 
    } 
```

上面的代码是我的表格。我的“MyChart”类代码是

```
namespace FFT_Plotter
{ 
    [DefaultPropertyAttribute("Text")]
    public class MyChart : Chart 
    {
        public event EventHandler PropertyChanged;

        private void OnPropertyChanged(object sender, EventArgs e)
        {
            EventHandler eh = propertyChanged;
            if(eh !=null)
            {
                eh(sender, e);
            }

            [BrowsableAttribute(false)]
            public new System.Drawing.Color BackColor
            {
                get { return BackColor; }//Here back color is just an example of a property, not necessarily one that I would make non-Browsable
                set 
                { 
                    base.BackColor = value; 
                    OnPropertyChanged(this,EventArgs.Empty);
                }
            }
        }
    } 
```

上面的类让我有一个属性网格，它具有图表的所有属性，并允许我在我认为合适的时候隐藏这些属性。但是现在我一直在理解如何将我的 chart1 连接到我创建的网格。如果有人对如何做到这一点有任何建议，那将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:11:13.837

您必须添加`propertyGrid1.SelectedObject = myChartInstance;`，然后您必须添加`PropertyValueChanged`将在用户每次更改`myChartInstance`属性时触发的事件侦听器`PropertyGrid`。因此，假设您希望在每次更改完成后重新绘制图表，代码应如下所示：

```
 private void propertyGrid1_PropertyValueChanged(object sender, PropertyValueChangedEventArgs e)
        {
           // Redraw the chart.
           chart1.Invalidate();
        }

        public Form1()
        {
            InitializeComponent();
            magRadioBox.Checked = true;
            PropertyGrid propertyGrid1 = new PropertyGrid();
            propertyGrid1.CommandsVisibleIfAvailable = true;
            propertyGrid1.Text = "Graph and Plotting Options";

            // Create your chart.
            chart1 = new MyChart();

            // Attach your chart to Property Grid.
            propertyGrid1.SelectedObject = (MyChart) chart1;
            propertyGrid1.PropertyValueChanged += propertyGrid1_PropertyValueChanged;

            this.Controls.Add(propertyGrid1);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T18:39:50.973

通过 StackOverflow 上伟大社区的帮助，这是我能够拼凑的答案，（站在巨人的肩膀上）

```
 public partial class Form1 : Form {
            public Form1()
            {
                InitializeComponent();
                magRadioBox.Checked = true;
                PropertyGrid propertyGrid1 = new PropertyGrid();
                propertyGrid1.CommandsVisibleIfAvailable = true;
                propertyGrid1.Text = "Graph and Plotting Options";
                propertyGrid1.PropertyValueChanged += propertyGrid1_PropertyValueChanged;

                this.Controls.Add(propertyGrid1);
            } private void Form1_Load(object sender, EventArgs e) { this.Text = "MY Plot Program"; propertyGrid1.SelectedObject = chart1;  }

        private void button1_Click(object sender, EventArgs e)  {//some code that is populating my chart(chart1) with data   .... //chart1 being filled with data   }

        private void propertyGrid1_PropertyValueChanged(object s , PropertyValueChangedEventArgs e) { 
myChart.Invalidate();  
} 
```

这是`MyChart`类的代码

```
namespace FFT_Plotter
{ 
    [DefaultPropertyAttribute("Text")]// This is where the initial position of the grid is set 
    public class MyChart : Chart 
    {
        public event EventHandler PropertyChanged;
private void OnPropertyChanged(object sender, EventArgs e)
{
EventHandler eh = propertyChanged;
if(eh !=null)
{
eh(sender, e);
}
        [BrowsableAttribute(false)]
        public new System.Drawing.Color BackColor
        {
            get { return BackColor; }//Here back color is just an example of a property, not necessarily one that I would make non-Browsable
            set { 
base.BackColor = value; 
OnPropertyChanged(this,EventArgs.Empty);
}
        }
    }
} 
```

这在 Form1.Designer.CS 中声明`chart1`为 a`MyChart`而不是`System.Windows...Chart`

```
...this.chart1  = new FFT_Ploter.MyChart(); ... private FFT_Plotter.MyChart chart1; 
```

# javascript - 确定最后选中的单选按钮

> ID：15096977
> 
> 赞同：1
> 
> 时间：2013-02-26T18:50:26.257
> 
> 标签：javascript, html

假设一组 4 个单选框选中了第一个。然后用户点击第三个单选框。有没有办法知道第一个收音机是最后一个检查的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:56:57.610

如果您绑定到`mousedown`事件而不是`click`，则当事件侦听器运行时，选中的收音机不会更改：

```
<fieldset id="radios">
    <input type="radio" name="rad" value="1"> option 1<br>
    <input type="radio" name="rad" value="2"> option 2<br>
    <input type="radio" name="rad" value="3"> option 3<br>
</fieldset> 
```

```
var radios = document.getElementById('radios');
radios.addEventListener('mousedown', function(e) {
    var clicked = e.target;
    var current = document.querySelector('input[name=rad]:checked');
}); 
```

[http://jsfiddle.net/ej6WD/](http://jsfiddle.net/ej6WD/)

[注意：这个解决方案是 IE8+，见[http://caniuse.com/#search=queryselector](http://caniuse.com/#search=queryselector)]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T18:58:27.677

1) 声明一个全局变量

```
var currentlySelected = null; 
```

2) 将处理程序附加到所有单选按钮的单击事件。

```
function radioButtonOnClickEvent() {
    if (currentlySelected === null) { 
        // nothing has been selected yet
        currentlySelected = radioBoxThatWasJustClicked;
    } else if (currentlySelected === theThirdRadioButton) {
         //your logic here
         currentlySelected = radioBoxThatWasJustClicked;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T19:21:32.727

是的，有办法做到这一点。我已经添加了您的代码和完成的脚本以获得最后一个选择单选按钮。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Test webservices</title>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script> 

    <script>
        $(document).ready(function () {

            $('input[name="rad"]').click(function (e) {
                if($(this).siblings('input[name="rad"]').hasClass('lastSelected'))
                {
                    var lastSelectedButton = $('.lastSelected').val();
                    $(this).siblings('input[name="rad"]').removeClass('lastSelected');
                    $(this).addClass('lastSelected');
                }
                else
                    $(this).addClass('lastSelected');
            });
        });

    </script>
</head>
<body>
    <form action='xyz.php' method='get'>
        <input type="radio" name="rad" value="1"> option 1<br>
        <input type="radio" name="rad" value="2"> option 2<br>
        <input type="radio" name="rad" value="3"> option 3<br>
        <input type='submit' value='Go' id='submit' >
    </form>

</body>
</html> 
```

这是您问题的完美答案。您可以尝试通过复制粘贴此脚本来实现它。

# php - Phalcon PHP 分页器错误

> ID：15096983
> 
> 赞同：2
> 
> 时间：2013-02-26T18:50:36.553
> 
> 标签：php, pagination, phalcon

我认为 \Phalcon\Paginator\Adapter\NativeArray 存在错误。

->next 属性包含错误的值。

这是一个测试用例：

```
$a = array_fill(0, 25, 'banana');
echo count($a);
$paginator = new \Phalcon\Paginator\Adapter\NativeArray(
    array(
        "data" =>$a,
        "limit"=> 25,
        "page" => 1,      
    )
);  
$test = $paginator->getPaginate();

echo '<pre>';
var_dump($test);
echo '</pre>'; 
```

运行此测试后，应具有以下值：

*   $test->first = 1
*   $test->下一个 = 1
*   $test->之前 = 1
*   $test->当前 = 1
*   $test->last = 2
*   $test->total_pages = 2

将 array_fill 值从 25 更改为 30 保存并刷新页面。$test->next 应该是 2。但它不是。它保持在1。

这是一个错误还是我做错了什么，我使用的是 Phalcon 0.9.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:48:09.283

这是一个错误，我在 [https://github.com/phalcon/cphalcon/issues/445上发布了这个错误](https://github.com/phalcon/cphalcon/issues/445)

# cuda - 如何将 COO 矩阵中的 row_indices 复制到 CUSP 中的推力向量

> ID：15096985
> 
> 赞同：0
> 
> 时间：2013-02-26T18:50:38.090
> 
> 标签：cuda, sparse-matrix, thrust, cusp-library

我一直在尝试将 COO 矩阵的行索引、列索引和值复制到单独的推力向量中，但我发现我无法这样做。

下面是代码

```
 cusp::coo_matrix <unsigned int, float, cusp::device_memory> *sim_mat;
    sim_mat = new cusp::coo_matrix <unsigned int, float, cusp::device_memory>; 
    /* Code to fill up sim_mat: runs fine
    ...
    */
    {
         thrust::device_ptr <unsigned int> d_rows = &((sim_mat->row_indices));
         thrust::device_ptr <unsigned int> d_cols = &((sim_mat->column_indices)[0]);
         thrust::device_ptr <float>        d_vals = &((sim_mat->values)[0]);
         unsigned int size_nn = (sim_mat->row_indices).size();
         thrust::device_vector <unsigned int> d_Rows;
         thrust::device_vector <float>        d_Vals;
         thrust::device_vector <unsigned int> reduced_Rows;

         // Code fails below this point
         thrust::copy_n (d_rows, size_nn, d_Rows.begin());
         thrust::copy_n (d_vals, size_nn, d_Vals.begin());
         cout << size_nn << std::endl;

         if (!(sim_mat->is_sorted_by_row()))
             thrust::sort_by_key(d_Rows.begin(), d_Rows.end(), d_Vals.begin());
         thrust::reduce_by_key(d_Rows.begin(), d_Rows.end(), d_Vals.begin(), reduced_Rows.begin(), sim_row->begin());

    } 
```

Ithe sim_row 是一个推力向量指针，已在之前的一些代码中分配了内存，此处不相关。

代码编译，但在运行时失败并出现错误：

> 在抛出“thrust::system::system_error”实例后调用终止 what(): invalid argument Aborted (core dumped)

有人可以告诉我我做错了什么吗？

谢谢阿克谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:08:31.860

您的编码中有几个错误。正如已经指出的那样，您访问 coo 矩阵的行索引、列索引和值的方法将不起作用。此外，您不能创建大小为零的推力向量`d_Rows`，`d_Vals`然后将其他向量复制到它们。

以下代码对我有用，并说明了将行索引、列索引和值提取到单独的推力向量中的一种方法：

```
 #include <stdio.h>
 #include <cusp/verify.h>
 #include <cusp/array2d.h>
 #include <cusp/coo_matrix.h>
 #include <thrust/host_vector.h>
 #include <thrust/device_vector.h>

 int main()
 {
  typedef cusp::device_memory MemorySpace;
  // initial matrix

   cusp::array2d<float, MemorySpace> E(4, 3);
   E(0,0) =  1.000e+00; E(0,1) =  0.000e+00; E(0,2) =  0.000e+00;
   E(1,0) =  0.000e+00; E(1,1) =  1.050e+01; E(1,2) =  0.000e+00;
   E(2,0) =  0.000e+00; E(2,1) =  0.000e+00; E(2,2) =  2.500e-01;
   E(3,0) =  0.000e+00; E(3,1) =  2.505e+02; E(3,2) =  0.000e+00;

   cusp::coo_matrix<int, float, MemorySpace> coo(E);

   if (!cusp::is_valid_matrix(coo)) {printf("Invalid COO\n"); return 1;}

   thrust::device_vector<int> row_ind(coo.row_indices.size());
   thrust::device_vector<int> col_ind(coo.column_indices.size());
   thrust::device_vector<float> values(coo.values.size());

   thrust::copy(coo.row_indices.begin(), coo.row_indices.end(), row_ind.begin());
   thrust::copy(coo.column_indices.begin(), coo.column_indices.end(), col_ind.begin());
   thrust::copy(coo.values.begin(), coo.values.end(), values.begin());

   thrust::host_vector<int> h_row_ind = row_ind;
   thrust::host_vector<int> h_col_ind = col_ind;
   thrust::host_vector<float> h_values = values;

   printf("COO row indices: \n");
   for (int i = 0; i < h_row_ind.size(); i++)
     printf("%d \n", h_row_ind[i]);

   printf("COO column indices: \n");
   for (int i = 0; i < h_col_ind.size(); i++)
     printf("%d \n", h_col_ind[i]);

   printf("COO values: \n");
   for (int i = 0; i < h_values.size(); i++)
     printf("%f \n", h_values[i]);

   return 0;
 } 
```

# r - IBrokers reqMktData，如何在回调函数中添加超时？

> ID：15096987
> 
> 赞同：5
> 
> 时间：2013-02-26T18:50:39.770
> 
> 标签：r, ibrokers

我一直在使用伟大的 IBrokers 软件包中的修改后的 snapShot 函数来从 IB 获取“最新”价格，它对流动性股票非常有效。我打的电话是例如。

```
reqMktData(tws, twsSTK("AAPL"), eventWrapper=eWrapper.data.Last(1),CALLBACK=snapShot) 
```

当试图检索流动性非常低的股票或期权时，就会出现问题。因此，我需要为 snapShot 函数添加超时。如何以及在何处添加超时？

带有 snapShot 功能的代码：

```
library(IBrokers)
tws <- twsConnect()

eWrapper.data.Last <- function(n) {
  eW <- eWrapper(NULL)  # use basic template
  eW$assign.Data("data", rep(list(structure(.xts(matrix(rep(NA_real_,2),nc=2),0),
                                      .Dimnames=list(NULL,c("LastSize","Last")))),n))

  eW$tickPrice <- function(curMsg, msg, timestamp, file, ...) 
  {
    tickType = msg[3]
    msg <- as.numeric(msg)
    id <- msg[2] #as.numeric(msg[2])
    data <- eW$get.Data("data") #[[1]]  # list position of symbol (by id == msg[2])
    attr(data[[id]],"index") <- as.numeric(Sys.time())
    nr.data <- NROW(data[[id]])
    if(tickType == .twsTickType$LAST) {
      data[[id]][nr.data,2] <- msg[4]
    }
    eW$assign.Data("data", data)
    c(curMsg, msg)
  }
  eW$tickSize  <- function(curMsg, msg, timestamp, file, ...) 
  { 
    data <- eW$get.Data("data")
    tickType = msg[3]
    msg <- as.numeric(msg)
    id <- as.numeric(msg[2])
    attr(data[[id]],"index") <- as.numeric(Sys.time())
    nr.data <- NROW(data[[id]])
    if(tickType == .twsTickType$LAST_SIZE) {
      data[[id]][nr.data,1] <- msg[4]
    } 
    eW$assign.Data("data", data)
    c(curMsg, msg)
  }
  return(eW)
}

snapShot <- function (twsCon, eWrapper, timestamp, file, playback = 1, ...)
{
   if (missing(eWrapper))
       eWrapper <- eWrapper()
   names(eWrapper$.Data$data) <- eWrapper$.Data$symbols
   con <- twsCon[[1]]
   if (inherits(twsCon, "twsPlayback")) {
       sys.time <- NULL
       while (TRUE) {
           if (!is.null(timestamp)) {
               last.time <- sys.time
               sys.time <- as.POSIXct(strptime(paste(readBin(con,
                 character(), 2), collapse = " "), timestamp))
               if (!is.null(last.time)) {
                 Sys.sleep((sys.time - last.time) * playback)
               }
               curMsg <- .Internal(readBin(con, "character",
                 1L, NA_integer_, TRUE, FALSE))
               if (length(curMsg) < 1)
                 next
               processMsg(curMsg, con, eWrapper, format(sys.time,
                 timestamp), file, ...)
           }
           else {
               curMsg <- readBin(con, character(), 1)
               if (length(curMsg) < 1)
                 next
               processMsg(curMsg, con, eWrapper, timestamp,
                 file, ...)
               if (curMsg == .twsIncomingMSG$REAL_TIME_BARS)
                 Sys.sleep(5 * playback)
           }
       }
   }
   else {
       while (TRUE) {
           socketSelect(list(con), FALSE, NULL)
           curMsg <- .Internal(readBin(con, "character", 1L,
               NA_integer_, TRUE, FALSE))
           if (!is.null(timestamp)) {
               processMsg(curMsg, con, eWrapper, format(Sys.time(),
                 timestamp), file, ...)
           }
           else {
               processMsg(curMsg, con, eWrapper, timestamp,
                 file, ...)
           }
           if (!any(sapply(eWrapper$.Data$data, is.na)))
               return(do.call(rbind, lapply(eWrapper$.Data$data,
                 as.data.frame)))
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:05:47.000

您可以`evalWithTimeout`从[R.utils](http://cran.r-project.org/package=R.utils)使用。我没有测试它，但我很确定环绕`evalWithTimeout`while 循环会实现你所追求的。

```
library(R.utils)

evalWithTimeout(
   while (TRUE) {
       socketSelect(list(con), FALSE, NULL)
       curMsg <- .Internal(readBin(con, "character", 1L,
           NA_integer_, TRUE, FALSE))
       if (!is.null(timestamp)) {
           processMsg(curMsg, con, eWrapper, format(Sys.time(),
             timestamp), file, ...)
       }
       else {
           processMsg(curMsg, con, eWrapper, timestamp,
             file, ...)
       }
       if (!any(sapply(eWrapper$.Data$data, is.na)))
           return(do.call(rbind, lapply(eWrapper$.Data$data,
             as.data.frame)))
   }, timeout=5, onTimeout="warning") 
```

# polymorphism - mongoid 中多态 habtm 的解决方法？

> ID：15096997
> 
> 赞同：2
> 
> 时间：2013-02-26T18:51:22.147
> 
> 标签：polymorphism, mongoid, has-and-belongs-to-many

我想知道是否有人可以帮助我为以下场景建模。我在 Mongoid 中有一个 User 类、一个 Event 类和一个 Venue 类。我希望用户成为 Event 或 Venue 或两者兼而有之的管理员。这些不同的角色最终可能会失控，我想知道这是否是多态性的一个好例子。

# 场地

```
has_and_belongs_to_many :admins,    :class_name=> 'User', :inverse_of=>:venue_adminships
has_and_belongs_to_many :managers,  :class_name=> 'User', :inverse_of=>:venue_managementships 
```

# 事件

```
has_and_belongs_to_many :admins,   :class_name=> 'User', :inverse_of=>:event_adminships
has_and_belongs_to_many :managers,  :class_name=> 'User', :inverse_of=>:event_managementships 
```

# 用户

```
has_and_belongs_to_many :venue_adminships,  :class_name=>"Venue",  inverse_of: :admins
has_and_belongs_to_many :venue_managementships, :class_name=>"Venue",  inverse_of: :managers

has_and_belongs_to_many :event_adminships,  :class_name=>"Event",  inverse_of: :admins
has_and_belongs_to_many :event_managementships, :class_name=>"Event",  inverse_of: :managers 
```

我需要能够调出用户的“管理员”（当我在它的时候，任何人都有比“管理员”更好的名字......？）以及调出所有管理员的事件。如果没有这么多重复的关系，有什么更简洁的方式来表示这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T09:03:08.757

Mongoid 文档：

```
Polymorphic behavior is allowed on all relations with the exception of has_and_belongs_to_many. 
```

[http://mongoid.org/en/mongoid/docs/relations.html](http://mongoid.org/en/mongoid/docs/relations.html)

所以，你不能使用多态来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-04T11:49:40.887

使用继承，所以场地和事件都将存储在同一个集合中。

创建一个类`Administrable`或类似的东西，然后`Venue`继承`Event`这个类。

文档将全部存储在集合中`Administrable.collection_name`，该集合应该是“可管理的”。

用户拥有并属于许多管理员，您只需检查类型即可显示正确的视图。

# javascript - 使用实用创建的小部件动态设置 dijit/form 操作

> ID：15096998
> 
> 赞同：1
> 
> 时间：2013-02-26T18:51:22.840
> 
> 标签：javascript, dojo

我在用着

```
<form id="${id}myForm">

</form> 
```

我想在我的 .js 文件中添加类似于：

```
registry.byId(this.id + "myForm").set("action", "myscript.php"); 
```

但是，当我签入 chrome 开发工具时，这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:39:28.787

在您的情况下，而不是尝试通过注册表获取对象 - 您可以使用 dom.byId() 其中 dom 代表“dojo/dom”，即：

```
require([ 'dojo/dom' ], function(dom) {
    dom.byId("yourFormId").action = 'myscript.php';
}); 
```