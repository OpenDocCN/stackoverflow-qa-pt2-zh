# StackOverflow 问答 13645000-13645999

# php - 如何在 php 中组织可下载的 csv 文件

> ID：13645001
> 
> 赞同：1
> 
> 时间：2012-11-30T12:10:47.593
> 
> 标签：php, mysql, csv

我正在做的是允许我的客户在数据库中下载他们所有订单的 CSV 文件。我可以做到，但我似乎无法弄清楚如何组织该文件，以便文件本身的信息清晰易懂。

这是我创建下载文件的**工作代码：**

```
$today = date("d-m-Y");
// output headers so that the file is downloaded rather than displayed
header('Content-Type: text/csv; charset=utf-8');
header('Content-Disposition: attachment; filename=orders_' . $today . '.csv');

// create a file pointer connected to the output stream
$output = fopen('php://output', 'w');

// output the column headings
fputcsv($output, array('Product ID & Qty','First Name', 'Last Name', 'Total Spent', 'Payment Date'));

// fetch the data
include('../storescripts/connect_to_mysql.php');
$rows = mysql_query('SELECT product_id_array, first_name, last_name, mc_gross, payment_date FROM transactions ');

// loop over the rows, outputting them
while ($row = mysql_fetch_assoc($rows)) fputcsv($output, $row); 
```

列是使用上面列出的标题创建的，但几乎所有信息都被压缩到第一列，其余的只是散布在其他列上。它看起来一团糟，对任何人都没有多大意义。

我想知道是否有一种方法可以强制将哪一行数据放入每一列。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:26:37.403

默认情况下，当 Excel 读取 CSV 时，它不会自动展开所有列，因此数据看起来好像 CSV 内容本身有问题，而实际上您只需要配置 Excel 或手动展开它们。

# blackberry-eclipse-plugin - 黑莓 - 如何使用 wcf 休息服务

> ID：13645003
> 
> 赞同：1
> 
> 时间：2012-11-30T12:10:59.097
> 
> 标签：blackberry-eclipse-plugin

最近我开始研究在黑莓中使用 wcf rest webservices。

我使用了以下两个代码：

1\. URLEncodedPostData postData = new URLEncodedPostData(URLEncodedPostData.DEFAULT_CHARSET, false); // 传递 q 的值和 ie 的值

```
postData.append("UserName", "hsharma@seasiaconsulting.com");
postData.append("Password", "mind@123");
HttpPosst hh=new HttpPosst();
add(new LabelField("1"));
String res=hh.GetResponse("http://dotnetstg.seasiaconsulting.com/profire/ProfireService.svc/UserRegistration",postData);
add(new LabelField("2"));
add(new LabelField(res)); 
```

公共字符串 GetResponse（字符串 url，URLEncodedPostData 数据）{

```
 this._postData = data;
    this._url = url;

    ConnectionFactory conFactory = new ConnectionFactory();
    ConnectionDescriptor conDesc = null;

    try 
    {
        if (WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED)
        {

            connectionString = ";interface=wifi";

        }

        // Is the carrier network the only way to connect?
        else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_DIRECT) == CoverageInfo.COVERAGE_DIRECT) {
            // logMessage("Carrier coverage.");

            // String carrierUid = getCarrierBIBSUid();

            // Has carrier coverage, but not BIBS. So use the carrier's TCP
            // network
            // logMessage("No Uid");
            connectionString = ";deviceside=true";

        }

        // Check for an MDS connection instead (BlackBerry Enterprise
        // Server)
        else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_MDS) == CoverageInfo.COVERAGE_MDS) {
            // logMessage("MDS coverage found");

            connectionString = ";deviceside=false";

        }

        // If there is no connection available abort to avoid bugging the
        // user
        // unnecssarily.
        else if (CoverageInfo.getCoverageStatus() == CoverageInfo.COVERAGE_NONE)
        {
            // logMessage("There is no available connection.");

        }

        // In theory, all bases are covered so this shouldn't be reachable.
        else {
            // logMessage("no other options found, assuming device.");
            // connectionString = ";deviceside=true";
        }
        conDesc = conFactory.getConnection(url + connectionString);
    } 
    catch (Exception e) 
    {
        System.out.println(e.toString() + ":" + e.getMessage());
    }

    String response = ""; // this variable used for the server response
    // if we can get the connection descriptor from ConnectionFactory
    if (null != conDesc) 
    {
        try 
        {

            HttpConnection connection = (HttpConnection) conDesc.getConnection();
            // set the header property
            connection.setRequestMethod(HttpConnection.POST);

            connection.setRequestProperty("Content-Length",Integer.toString(data.size()));
            // body content of
            // post data
            connection.setRequestProperty("Connection", "close");
            // close
            // the
            // connection
            // after
            // success
            // sending
            // request
            // and
            // receiving
            // response
            // from
            // the
            // server
            connection.setRequestProperty("Content-Type","application/json");
            // we set the
            // content of
            // this request
            // as
            // application/x-www-form-urlencoded,
            // because the
            // post data is
            // encoded as
            // form-urlencoded(if
            // you print the
            // post data
            // string, it
            // will be like
            // this ->
            // q=remoQte&ie=UTF-8).

            // now it is time to write the post data into OutputStream
            OutputStream out = connection.openOutputStream();
            out.write(data.getBytes());
            out.flush();
            out.close();

            int responseCode = connection.getResponseCode();
            // when this
            // code is
            // called,
            // the post
            // data
            // request
            // will be
            // send to
            // server,
            // and after
            // that we
            // can read
            // the
            // response
            // from the
            // server if
            // the
            // response
            // code is
            // 200 (HTTP
            // OK).
            if (responseCode == HttpConnection.HTTP_OK) 
            {
                // read the response from the server, if the response is
                // ascii character, you can use this following code,
                // otherwise, you must use array of byte instead of String
                InputStream in = connection.openInputStream();
                StringBuffer buf = new StringBuffer();
                int read = -1;
                while ((read = in.read()) != -1)
                buf.append((char) read);
                response = buf.toString();

            }

            // don’t forget to close the connection
            connection.close();

        }
        catch (Exception e) 
        {
            System.out.println(e.toString() + ":" + e.getMessage());
        }

    }
    return response;
}

public boolean checkResponse(String res)
{
     if(!res.equals(""))
     {

    if(res.charAt(0)=='{')
    {
        return true;
    }
    else
    {
        return false;

    }
     }
     else
     {
         return false;
     }

} 
```

但是使用此代码，我无法获得上述 wcf Web 服务返回的响应，即 ({"UserRegistrationResult":[{"OutputCode":"2","OutputDescription":"UserName Already Exists."}]})

任何人都可以帮我解决它在黑莓客户端中的解析。

2.我使用的另一个代码是：

公共类 KSoapDemo 扩展 MainScreen {

```
private EditField userNametxt;
private PasswordEditField passwordTxt;
private ButtonField loginBtn;
String Username;
String Password;

public KSoapDemo() 
{

    userNametxt = new EditField("User Name : ", "hsharma@seasiaconsulting.com");
    passwordTxt = new PasswordEditField("Password : ", "mind@123");
    loginBtn = new ButtonField("Login");

    add(userNametxt);
    add(passwordTxt);
    add(loginBtn);

    loginBtn.setChangeListener(new FieldChangeListener() 
    {

        public void fieldChanged(Field field, int context)
        {
            //Dialog.alert("Hi Satyaseshu..!");
            login();
        }
    });
}

private void login() 
{
    if (userNametxt.getTextLength() == 0 || passwordTxt.getTextLength() == 0)
    {
        //Dialog.alert("You must enter a username and password", );
    } 
    else 
    {
        String username = userNametxt.getText();
        String password = passwordTxt.getText();
        System.out.println("UserName... " + username);
        System.out.println("Password... " + password);
        boolean value = loginPArse1(username, password);
        add(new LabelField("value... " + value));
    }
}

public boolean onClose()
{
    Dialog.alert("ADIOOO!!");
    System.exit(0);
    return true;
}

public boolean loginPArse1(String username, String password) 
{

    username=this.Username;
    password=this.Password;
    boolean ans = false;
    String result = null;
    SoapObject request = new SoapObject("http://dotnetstg.seasiaconsulting.com/","UserRegistration"); 
    //request.addProperty("PowerValue","1000"); 
    //request.addProperty("fromPowerUnit","kilowatts"); 
    //request.addProperty("toPowerUnit","megawatts"); 
    request.addProperty("userName",Username);
    request.addProperty("Password", Password);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); 
    envelope.bodyOut = request; 
    envelope.dotNet = true;
    add(new LabelField("value... " + "1"));
    HttpTransport ht = new HttpTransport("http://dotnetstg.seasiaconsulting.com/profire/ProfireService.svc/UserRegistration"+ConnectionInfo.getInstance().getConnectionParameters()); 
    ht.debug = true;
    add(new LabelField("value... " + "2"));
    //System.out.println("connectionType is: " + connectionType);
    try { 
    ht.call("http://dotnetstg.seasiaconsulting.com/profire/ProfireService.svc/UserRegistration", envelope); 
    SoapObject body = (SoapObject) envelope.bodyIn;
    add(new LabelField("soap....="+body.toString()));

     add(new LabelField("property count....="+body.getPropertyCount()));

    // add(new LabelField("Result....="+body.getProperty("HelloWorldResult")));
    //result = body.getProperty("Params").toString();
//  add(new LabelField("value... " + "4"));
     ans=true;
    } 
    catch (XmlPullParserException ex) { 
        add(new LabelField("ex1 "+ex.toString()) ); 
    ex.printStackTrace(); 
    } catch (IOException ex) { 
        add(new LabelField("ex1 "+ex.toString()) ); 
    ex.printStackTrace(); 
    } catch (Exception ex) { 
        add(new LabelField("ex1 "+ex.toString()) ); 
    ex.printStackTrace(); 
    }
    return ans; 
    } 
```

作为回报，我得到响应为 net.rim.device.cldc.io.dns.DNS Exception:DNS Error

请在这方面帮助我

感谢和问候平克什·古普塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:53:35.593

```
Please have the answer for my own question helps in parsing wcf rest services developed in .net and parsed at blackberry end.

This 2 classess definitely helps in achieving the above code parsing.

import java.io.IOException;
import java.io.OutputStream;
import java.io.InputStream;
import javax.microedition.io.Connector;
import javax.microedition.io.HttpConnection;

public class ConnectionThread extends Thread 
{

    private boolean start = false;
    private boolean stop = false;
    private String url;
    private String data;
    public boolean sendResult = false;
    public boolean sending = false;
    private String requestMode = HttpConnection.POST;
    public String responseContent;
    int ch;

    public void run()
    {
        while (true)
        {
            if (start == false && stop == false)
            {
                try 
                {
                    sleep(200);
                }
                catch (InterruptedException e)
                {
                    e.printStackTrace();
                }
            }
            else if (stop)
            {
                return;
            } 
            else if (start)
            {
                http();
            }
        }
    }

    private void getResponseContent( HttpConnection conn ) throws IOException 
    {
        InputStream is = null;
        is = conn.openInputStream();

            // Get the length and process the data
            int len = (int) conn.getLength();
            if ( len > 0 )
            {
                int actual = 0;
                int bytesread = 0;
                byte[] data = new byte[len];
                while ( ( bytesread != len ) && ( actual != -1 ) )
                {
                    actual = is.read( data, bytesread, len - bytesread );
                    bytesread += actual;
                }
                responseContent = new String (data);
            } 
            else 
            {
             //   int ch;
                while ( ( ch = is.read() ) != -1 ) 
                {

                }
            }

    }

    private void http()
    {
        System.out.println( url );
        HttpConnection conn = null;
        OutputStream out = null;

        int responseCode;

        try 
        {
            conn = (HttpConnection) Connector.open(url);
            conn.setRequestMethod(requestMode);
            conn.setRequestMethod(HttpConnection.POST);
            conn.setRequestProperty("Content-Length",Integer.toString(data.length()));
            conn.setRequestProperty("Connection", "close");
            conn.setRequestProperty("Content-Type", "application/json");
            conn.setRequestProperty("SOAPAction","http://dotnetstg.seasiaconsulting.com/");
            out = conn.openOutputStream();

            out.write(data.getBytes());
            out.flush();
            responseCode = conn.getResponseCode();

            if (responseCode != HttpConnection.HTTP_OK)
            {
                sendResult = false;
                responseContent = null;
            } 
            else 
            {
                sendResult = true;
                getResponseContent( conn );
            }
            start = false;
            sending = false;

        }
        catch (IOException e) 
        {
            start = false;
            sendResult = false;
            sending = false;
        } 

    }

    public void get(String url) 
    {
        this.url = url;
        this.data = "";
        requestMode = HttpConnection.GET;
        sendResult = false;
        sending = true;
        start = true;
    }

    public void post(String url, String data) 
    {
        this.url = url;
        this.data = data;
        requestMode = HttpConnection.POST;
        sendResult = false;
        sending = true;
        start = true;
    }

    public void stop()
    {
        stop = true;
    }

}

import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.FieldChangeListener;
import net.rim.device.api.ui.component.AutoTextEditField;
import net.rim.device.api.ui.component.BasicEditField;
import net.rim.device.api.ui.component.ButtonField;
import net.rim.device.api.ui.component.DateField;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.component.ObjectChoiceField;
import net.rim.device.api.ui.component.SeparatorField;
import net.rim.device.api.ui.component.Status;
import net.rim.device.api.ui.container.MainScreen;
import org.json.me.JSONArray;
import org.json.me.JSONException;
import org.json.me.JSONObject;
import org.xml.sax.SAXException;
import net.rim.device.api.xml.parsers.SAXParser;
import net.rim.device.api.xml.jaxp.SAXParserImpl;
import org.xml.sax.helpers.DefaultHandler;
import java.io.ByteArrayInputStream;
import com.sts.example.ConnectionThread;
import com.sts.example.ResponseHandler;

public class DemoScreen extends MainScreen 
{

    private ConnectionThread connThread;
    private BasicEditField response = new BasicEditField("Response:  ", "");
    private BasicEditField xmlResponse = new BasicEditField("xml:  ", "");
    private ButtonField sendButton = new ButtonField("Response");

    public DemoScreen(ConnectionThread connThread) 

    {

        this.connThread = connThread;

        FieldListener sendListener = new FieldListener();
        sendButton.setChangeListener(sendListener);
        response.setEditable( false );
        xmlResponse.setEditable( false );
        add(sendButton);
        add(response);
        add(new SeparatorField());
        add(xmlResponse);

    }

    public boolean onClose() 
    {
        connThread.stop();
        close();
        return true;
    }

    private String getFieldData()
    {
        //{"UserName":"hsharma@seasiaconsulting.com","Password":"mind@123"}
      StringBuffer sb = new StringBuffer();
       sb.append("{\"UserNamepinkesh.g@cisinlabs.com\",\"Password\":\"pinkesh1985\"}");
       return sb.toString();
    }

    class FieldListener implements FieldChangeListener
    {
        public void fieldChanged(Field field, int context)
        {

            StringBuffer sb = new StringBuffer("Sending...");
            connThread.post("http://dotnetstg.seasiaconsulting.com/profire/ProfireService.svc/UserRegistration"+ConnectionInfo.getInstance().getConnectionParameters(), getFieldData());

            while (connThread.sending) 
            {
                try 
                {
                    Status.show( sb.append(".").toString() );
                    Thread.sleep(100);
                } 
                catch (InterruptedException e) 
                {
                    e.printStackTrace();
                }
            }

            if (connThread.sendResult)
            {

                Status.show("Transmission Successfull");
                xmlResponse.setText( connThread.responseContent );
                try {

                    JSONObject jsonResponse = new JSONObject(connThread.responseContent);
                    JSONArray jsonArray = jsonResponse.getJSONArray("UserRegistrationResult");

                    for (int i = 0; i < jsonArray.length(); i++)
                    {

                        JSONObject result = (JSONObject)jsonArray.get(i);
                        add(new LabelField("OutputCode"+result.getString("OutputCode")));
                        add(new LabelField("OutputDescription"+result.getString("OutputDescription")));

                    }
                } 
                catch (JSONException e) 
                {
                    add(new LabelField(e.getMessage().toString()));
                    e.printStackTrace();
                }

            }
            else
            {
                Status.show("Transmission Failed");
            }

        }
    }
} 
```

# java - Json Jersey 反序列化：抽象类

> ID：13645005
> 
> 赞同：4
> 
> 时间：2012-11-30T12:11:01.640
> 
> 标签：java, json, jersey, deserialization

我正在尝试用 Java 中的 Jersey/Jackson 反序列化一些 JSON。

这是我的 JSON 示例

```
 {
        "text":"toto",
        "link":"titi",
        "items":[{
            "text":"toutou",
            "link":"tata",
            "items":[{
                "text":"toto2",
                "link":"toutou2",
                "data":"tonti",
            ]}
        ]}
    } 
```

所以我的 Java 模型部分看起来像这样

```
public IItem {
    ...
}

public Item implements IItem {
    List<IItem> items;
    String text;
    String link;
    ...
}

public ItemData extends Item {
    String data;
    ...
} 
```

现在，当我尝试反序列化我的 JSON 时，对象映射器不知道要使用什么具体类。我怎么告诉他这个？问题是我想要一个 Item（带有 Item 列表（带有 ItemData 列表））。

虽然我只使用一个包含所有字段（文本、链接、数据）的对象，但我更喜欢这种看起来更好的设计。你觉得值得吗？

实际上，我有不止一个字段可以复制，因为 JSON 结构有点复杂，为了清楚起见，我对其进行了简化。

**问题**2：之后我需要在 JSON 中再次序列化我的对象（第一部分仅用于临时开发，稍后我将从 JDBC 驱动程序填充对象），我如何告诉 jersey 当时只显示一个级别？

即我要求`/`我只想要第一级，答案应该是：

```
 {
        "text":"toto",
        "link":"titi",
        "items":[{
            "text":"toutou",
            "link":"tata",
        ]}
    } 
```

如果我要求`/tata`答案应该是：

```
 {
        "text":"toutou",
        "link":"tata",
        "items":[{
            "text":"toto2",
            "link":"toutou2",
            "data":"tonti"
        ]}
    } 
```

（问题更多是关于如何在我的第一个请求中隐藏第二个级别，我确实了解如何处理第二个请求）。

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T13:00:40.877

如果您使用 Jackson，它具有允许在此类情况下进行适当反序列化的功能（项目的多态列表）。您可以使用 @JsonTypeInfo 注释来指示您希望将对象类型包含在 JSON 中，然后将用于反序列化正确的实例。这是一个例子：

```
@JsonTypeInfo(use=JsonTypeInfo.Id.CLASS, include=JsonTypeInfo.As.PROPERTY, property="@class")
public IItem {
    // ...
} 
```

这将为 IItem 的每个序列化表示添加一个属性，称为 @class，Jackson 稍后将检测并使用它来反序列化正确的对象实例。

# spring - Spring webFlow 用复选框绑定对象列表

> ID：13645007
> 
> 赞同：0
> 
> 时间：2012-11-30T12:11:11.370
> 
> 标签：spring, type-conversion, spring-webflow, type-mismatch

我正在尝试为对象列表创建复选框列表。在我的表单支持 bean 中，我有 2 个列表。一份包含我所有组织的参考数据列表。将包含所选组织的另一个列表。

我的页面加载正常，但是当我尝试提交时，出现以下异常：

```
 Caused by: javax.servlet.ServletException: javax.servlet.jsp.JspTagException: No message found under code 'typeMismatch on selectedOrganizations' for locale 'nl'.
    at org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:852)
    at org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:781)
    at org.apache.jsp.WEB_002dINF.views.flows.validation_jsp._jspService(validation_jsp.java:177)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:322)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:638)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:543)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:480)
    at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:968)
    at org.apache.jsp.tag.web.wizard_tag._jspx_meth_form_005fform_005f0(wizard_tag.java:198)
    at org.apache.jsp.tag.web.wizard_tag.doTag(wizard_tag.java:146)
    at org.apache.jsp.WEB_002dINF.views.management.roleinvitation.create.selectOrganizations_jsp._jspx_meth_iam_005fwizard_005f0(selectOrganizations_jsp.java:375)
    at org.apache.jsp.WEB_002dINF.views.management.roleinvitation.create.selectOrganizations_jsp._jspService(selectOrganizations_jsp.java:141)
    ... 126 more 
```

在这里找到我的代码片段：

**JSP**

```
<c:forEach items="${organizations}" var="${organization}">
  <form:checkbox cssClass="organizationCheckbox" path="selectedOrganizations" value="${organization}"/>
</c:forEach> 
```

**查看模型**

```
public class CreateRoleInvitationViewModel implements Serializable {
  private List<OrganizationViewModel> selectedOrganizations;
  private List<OrganizationViewModel> organizations;
...
} 
```

**转换器**

```
public class StringToOrganizationViewModel extends StringToObject {

  public StringToOrganizationViewModel() {
    super(OrganizationViewModel.class);
  }

  @Override
  protected Object toObject(String code, Class targetClass) throws Exception {
    OrganizationViewModel orgViewModel = new OrganizationViewModel();
    orgViewModel.setCode(code);
    return orgViewModel;
  }

  @Override
  protected String toString(Object object) throws Exception {
    return ((OrganizationViewModel)object).getCode();
  }

} 
```

我检查了转换器是否已使用并且已使用。当我的页面被加载时，我传递了 toString(Object object) 方法。当我尝试提交时，我没有传递 toObject(String code, Object objectClass) 因为异常发生在它之前。

**注意**：当我只选择一个复选框时..一切正常。我可以看到我的支持 bean 包含一个 selectedOrganisations 列表和一个条目。当我选择多个复选框时，它会崩溃....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:12:29.943

在你的jsp中，在你犯了一个小错误的forEach标签中，它应该是`var="organization"`而不是`var="${organization}"`

# git - git checkout --ours 会影响不冲突的文件吗？

> ID：13645009
> 
> 赞同：0
> 
> 时间：2012-11-30T12:11:18.060
> 
> 标签：git, git-rebase, merge-conflict-resolution

我现在正在重新提交很多提交，以前一个导致两个文件发生冲突。我检查了这些并决定我可以安全地使用“我们的（主人）”。

所以我运行了`git checkout --ours .`，冲突文件成功使用了主版本。

但是我只记得提交还包含一些其他文件（不冲突）。我的命令是否还检查了这些文件的主版本（我的错误）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T13:14:39.993

快速测试表明 a`git checkout --ours .`不会更改索引中的文件（即干净合并并准备提交的文件）。

# iphone - GPUImage 问题 iPhone

> ID：13645018
> 
> 赞同：2
> 
> 时间：2012-11-30T12:11:55.410
> 
> 标签：iphone, objective-c, ios, video, gpuimage

我在 iphone 中使用 GPUImage 框架在视频文件中添加一些过滤器。过滤器已成功应用。但我面临的问题是 setCompletionBlock 被连续调用两次。有人可以建议我这段代码有什么问题吗？

```
- (IBAction)applyFilter:(id)sender {

NSString *path = [[NSBundle mainBundle] pathForResource:@"OriginalVideo" ofType:@"mp4"];
NSURL *url = [NSURL fileURLWithPath:path];
GPUImageMovie *movieFile = [[GPUImageMovie alloc] initWithURL:url];
GPUImageSepiaFilter *filter = [[GPUImageSepiaFilter alloc] init];

[movieFile addTarget:filter];

NSString *pathToMovie = [Utilities getPathForFileName:@"finalvideo.mp4"];
if ([[NSFileManager defaultManager] fileExistsAtPath:pathToMovie]) {
    [[NSFileManager defaultManager] removeItemAtPath:pathToMovie error:nil];
}

unlink([pathToMovie UTF8String]);
NSURL *movieURL = [NSURL fileURLWithPath:pathToMovie];

GPUImageMovieWriter *movieWriter = [[GPUImageMovieWriter alloc] initWithMovieURL:movieURL size:CGSizeMake(480.0, 320.0)];
[filter addTarget:movieWriter];

movieWriter.shouldPassthroughAudio = YES;
movieFile.audioEncodingTarget = movieWriter;
[movieFile enableSynchronizedEncodingUsingMovieWriter:movieWriter];

[movieWriter setCompletionBlock:^{
    NSLog(@"finished..............................");

    [filter removeTarget:movieWriter];
    [movieWriter finishRecording];
}];

[movieWriter startRecording];
[movieFile startProcessing];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T10:45:42.767

```
movieFile.runBenchmark = YES;
movieFile.playAtActualSpeed = YES;
[movieFile prepareForImageCapture]; 
```

> 在应用过滤器时调用这些方法

# javascript - 使用滑块显示/隐藏表格

> ID：13645021
> 
> 赞同：0
> 
> 时间：2012-11-30T12:12:11.700
> 
> 标签：javascript, html-table, slider, show-hide

我正在尝试使用滑块显示/隐藏表格并同时更改屏幕上的数字，如下所示：

```
<input id="scaleSlider" type="range" value="1" min="1"  max="9" step="1" onchange="showValue(this.value), showOrHide(this.value)"/>

<script type="text/javascript">
    function showValue(newValue) {
        document.getElementById("range").innerHTML = newValue;
    }
</script>
<script type="text/javascript">
    function showOrHide(newValue) {
        if (("newValue").value = 1) {
            document.getElementById(guest2).style.display="none";
            document.getElementById(guest3).style.display="none";
            document.getElementById(guest4).style.display="none";
            document.getElementById(guest5).style.display="none";
            document.getElementById(guest6).style.display="none";
            document.getElementById(guest7).style.display="none";
            document.getElementById(guest8).style.display="none";
            document.getElementById(guest9).style.display="none";
        }
        if (("newValue").value = 2) {
            document.getElementById(guest2).style.display="block";
            document.getElementById(guest3).style.display="none";
            document.getElementById(guest4).style.display="none";
            document.getElementById(guest5).style.display="none";
            document.getElementById(guest6).style.display="none";
            document.getElementById(guest7).style.display="none";
            document.getElementById(guest8).style.display="none";
            document.getElementById(guest9).style.display="none";
        }
}

</script> 
```

“范围”设置得很好并显示数字，但我无法让表格切换”

* * *

我现在拥有的

```
<script type="text/javascript">
function showValue(newValue)
{
    document.getElementById("range").innerHTML=newValue;
}
</script>
</td>
</table>

<script type="text/javascript">
function showOrHide(newValue){

    if(newValue == 1) {
document.getElementById(guest2).style.display="none";
document.getElementById(guest3).style.display="none";
document.getElementById(guest4).style.display="none";
document.getElementById(guest5).style.display="none";
document.getElementById(guest6).style.display="none";
document.getElementById(guest7).style.display="none";
document.getElementById(guest8).style.display="none";
document.getElementById(guest9).style.display="none";
}
    if(newValue == 2) {
document.getElementById(guest2).style.display="block";
document.getElementById(guest3).style.display="none";
document.getElementById(guest4).style.display="none";
document.getElementById(guest5).style.display="none";
document.getElementById(guest6).style.display="none";
document.getElementById(guest7).style.display="none";
document.getElementById(guest8).style.display="none";
document.getElementById(guest9).style.display="none";
}
}   

</script> 
```

仍然没有隐藏或显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:54:47.220

尝试这个

```
<input id="scaleSlider" type="range" value="1" min="1"  max="9" step="1" onchange="showOrHide(this.value)"/>

<script type="text/javascript">
    function showOrHide(newValue) {
        var newValue = document.getElementById("range").value;
        if (newValue == 1) {
            document.getElementById(guest2).style.display="none";
            document.getElementById(guest3).style.display="none";
            document.getElementById(guest4).style.display="none";
            document.getElementById(guest5).style.display="none";
            document.getElementById(guest6).style.display="none";
            document.getElementById(guest7).style.display="none";
            document.getElementById(guest8).style.display="none";
            document.getElementById(guest9).style.display="none";
        }
        if (newValue == 2) {
            document.getElementById(guest2).style.display="block";
            document.getElementById(guest3).style.display="none";
            document.getElementById(guest4).style.display="none";
            document.getElementById(guest5).style.display="none";
            document.getElementById(guest6).style.display="none";
            document.getElementById(guest7).style.display="none";
            document.getElementById(guest8).style.display="none";
            document.getElementById(guest9).style.display="none";
        }
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:19:19.200

如果你正确地格式化你的代码，你会看到你缺少一个`}`to close `function showOrHide(newValue)`。

此外，`("newValue").value`将无法正常工作。只需使用`newValue`：

```
if(newValue == 1) 
```

**编辑** 另外，您似乎正在使用`.value = 2`您`if`的 's，这应该是`.value == 2`（相同的`==1`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:26:21.703

您的 onchange 需要一个分号：`onchange="showValue(this.value); showOrHide(this.value);"`而不是逗号。您还需要 Cerbrus 提到的支架。也`("newValue").value`只需要与它`newValue`进行比较。您将滑块的实际值作为 传递`newValue`，因此您不需要做任何特殊的事情来引用它。`=`再一次，Cerbrus 关于需要`==`测试相等性而不是做作业也是正确的。

所以你最终得到了`if (newValue == 1) { ... }`你的 if 语句的形式。

此外，`document.getElementById(guest2)`其余部分需要在表单中，`document.getElementById("guest2")`因为 guest2 不是您的 javascript 中的变量，而是您的表的 id。这意味着您需要将其作为字符串而不是引用传递。

还`document.getElementById("range")`需要是`document.getElementById("scaleSlider")`哪个是id而不是类型。

# php - 从其他类调用类方法（PHP）

> ID：13645022
> 
> 赞同：-2
> 
> 时间：2012-11-30T12:12:20.860
> 
> 标签：php, oop, class, methods

我意识到这是一个常见问题，我已经尝试自己解决它，但是在按照其他答案的说明进行操作后，我无法让它发挥作用。所以，这就是问题所在——我需要从 ClassTwo 中的 ClassOne 类中调用一个方法。所以我这样做了：

```
class ClassOne{
    public function methOne($par1,$par2){
        mysql_query("insert into ps_loyalty_events (customer_id,event_id) values ('$par1','$par2') ") or die(mysql_error());
    }
}

class ClassTwo{
    private $customer;    //initialize $customer in the constructor, to be defined as an instance of ClassOne() class and used as $this->customer

    function __construct() {
        $this->customer = new ClassOne();
    }

    public function methTwo(){
        //some stuff here
        $this->customer->methOne(6,10);    //6,10 - randomly chosen parameters, irrelevant
        //some more stuff here, this doesn't get executed at all
    }
} 
```

问题不在 ClassOne 或方法 methOne() 中，因为以下列方式直接从常规 PHP 文件调用它们有效：

```
$customer = new ClassOne();
$customer->methOne(6,10); 
```

但是，当我从 ClassTwo 方法调用它时，它什么也不做 - 它只是停止执行该函数。使用 try-catch 似乎没有输出任何东西。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:19:05.447

这是因为你`methTwo`是静态的。当您调用类的静态方法时，该类不会实例化为对象，因此它没有该`$this->customer`属性。

除非静态方法有原因，否则您可以更改`methoTwo`：

```
public function methTwo(){ 
```

编辑：既然您已经解决了这个问题：是什么让您认为它不起作用？你什么都不做`methOne`。

给出的代码很好，请参阅此[Codepad 演示](http://codepad.org/AEF80xeJ)它的工作原理。这意味着还有一些我们看不到的其他代码导致了问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-30T12:28:05.293

对于简单的解决方案，尝试在classtwo中使用extend classone，这样所有的方法都可以在classtwo中默认使用

```
class class_two extends class_one 
```

最重要的是，第一类的方法将被访问到第二类，并且也可以很容易地使用它。试试看

# github - 一个 github 存储库中的多个“上游”文件

> ID：13645027
> 
> 赞同：1
> 
> 时间：2012-11-30T12:12:47.890
> 
> 标签：github, repository

我有各种配置文件的回购，比如`.vimrc`，`_vimrc`（对于 Windows），或`.bashrc`. 我想创建一个包含所有这些的存储库，这样我就可以轻松地在干净的机器上设置我的环境。我希望 linux / windows 特定文件位于不同的分支（？）中，以便在 linux 上克隆不会下载 windows 文件。

假设所有现有的 repo 都在 github 上，并且生成的 repo 也应该在 github 上，我该怎么做？

有没有办法强制 git 只从分支下载文件并将它们保存在目录中，而不创建本地存储库？因为只下载并保存到，而不是克隆然后将该文件复制到主目录`.bashrc`会更快。`~`

也许像 dropbox 这样的东西会更好？

# gwt - 如何在 gwt 中通过其名称获取文本框

> ID：13645031
> 
> 赞同：0
> 
> 时间：2012-11-30T12:13:02.850
> 
> 标签：gwt

假设我有一个包含多个文本框的布局面板。

现在我想通过它的名字在那个面板中获取一个特定的文本框。我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:24:45.650

一种方法是在创建它们时将文本框的引用保留在 hashMap 中。不过，您需要小心内存泄漏。另一种方法是使用[GWtQuery](http://code.google.com/p/gwtquery/)。然后，您可以通过名称访问 DOM 中的任何元素。

要在没有 GWTQuery 的情况下获得它，您可以这样做：

```
Element element = Document.get().getElementById("myTextboxID");
TextBox box = new TextBox();
box.wrap(element); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:40:56.823

由于 gwt 没有 css-selector 实现，我会使用 gwtquery aka gquery，它的选择器实现执行得非常好。

除了许多其他功能外，它还能够返回与任何元素关联的小部件：

```
import static com.google.gwt.query.client.GQuery.*;

[...]

// if the textbox is already a widget 
TextBox b = $("input[name=first_name]").widget();

//Or it its an element
TextBox b = TextBox.wrap($("input[name=search]").get(0));   

b.setValue("Foo"); 
```

# php - CodeIgniter 更改 $db['xxx']['database']

> ID：13645033
> 
> 赞同：1
> 
> 时间：2012-11-30T12:13:06.803
> 
> 标签：php, codeigniter

有 1 个 mysql 数据库和 5 个 sql 数据库。

我可以在 config/database.php 中有这个吗

```
$db['one']['hostname'] = 'localhost';
$db['one']['username'] = 'myuser';
$db['one']['password'] = 'mypass';
$db['one']['database'] = 'dbONE';
$db['one']['dbdriver'] = 'mssql';
$db['one']['dbprefix'] = '';
$db['one']['pconnect'] = FALSE;
$db['one']['db_debug'] = TRUE;
$db['one']['cache_on'] = FALSE;
$db['one']['cachedir'] = 'application/cache/';
$db['one']['char_set'] = 'utf8';
$db['one']['dbcollat'] = 'utf8_general_ci';
$db['one']['swap_pre'] = '';
$db['one']['autoinit'] = TRUE;
$db['one']['stricton'] = FALSE;

$active_group = 'default';
$active_record = TRUE;
$db['default']['hostname'] = 'localhost7';
$db['default']['username'] = 'root';
$db['default']['password'] = '';
$db['default']['database'] = 'dbMySql';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = FALSE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = 'application/cache/';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

并且想要将 $db['one']['database'] 的值从 dbONE 更改为 dbTWO 是否有可能，或者我必须在 config/database.php 上编写所有数据库配置

提前致谢

我试试这个：

```
Case "dbONE":
    $db['one']['database'] = 'dbONE';
    $this->db_one = $this->load->database('one',TRUE);                
    $d=$this->invoice_model->invo('001');
    break;

  case "dbTWO":
    $db['one']['database'] = 'dbTWO';
    $this->db_one = $this->load->database('one',TRUE);   
    $d=$this->invoice_model->invo('001');
    break; 
```

并且总是从定义在 databases.php 的 db 中返回值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:21:37.287

你有没有尝试：

```
$db['one']['database'] = 'dbTWO';
$this->load->database($db); 
```

# perl - Perl 中有一个 inf 常量吗？

> ID：13645034
> 
> 赞同：19
> 
> 时间：2012-11-30T12:13:10.690
> 
> 标签：perl, infinity

我正在为算法初始化一个无穷大的列表。写作`$x = 9**9**9`感觉不直观，而且，我将来可能想使用 BigInt。`1/0`引发错误。

获得的规范方法是什么`inf`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-30T12:29:00.143

您可以使用特殊字符串`"inf"`：

```
perl -E'say "inf" + 1'
inf
perl -E'say 1 / "inf"'
0 
```

等等。

其他特殊字符串包括`+inf`, `-inf`, `nan`. 当然，这也适用于`bignum`or `bigint`pragma。但是，这些 pragma 导出等效函数`inf`，`NaN`因此您可以使用裸字。

### 编辑

正如@ikegami 指出的那样，似乎没有一种*可移植*的方式来实现没有模块的真正无穷大。我刚刚浏览了这个[有趣的 perlmonks 线程](http://www.perlmonks.org/?node_id=858188)，但它并没有变得不那么令人困惑。也许最好的解决方案是从一开始就接受性能损失`use big{num,int,rat}`，但`no big{num,int,rat}`在不需要它们的范围内使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T14:25:05.373

我用[bigrat](http://perldoc.perl.org/5.12.5/bigrat.html)来做到这一点。很难说-E 启用了哪些*功能。*

```
use bigrat;
use feature qw(say);

say inf + inf;
say 9**99 / -inf();  #Perl doesn't always like "-inf" by itself 
```

`use bigrat;`已经存在很长时间了，所以它应该非常便携。

# c# - c#中的自定义日期时间格式

> ID：13645035
> 
> 赞同：2
> 
> 时间：2012-11-30T12:13:12.710
> 
> 标签：c#, string, datetime, string-formatting, datetime-format

我有一个使用以下字符串格式打印出来的变量：

```
var printThis = String.Format("{0:d}, {0:T}", dateAndTimeVar); 
```

现在我有一个问题；当我没有为“dateAndTimeVar”设置任何时间时，我需要“{0:T}”来显示类似“--.--.--”的内容。这似乎不支持使用常规的 DateTime 类型（如果没有设置时间，则默认显示“00.00.00”）。

我可以将“dateAndTimeVar”变量更改为任何值（包括其他类型），但字符串格式必须保持不变。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T12:21:59.700

您需要创建自己的 IFormatProvider 并将其传递给 String.Format 方法，如下所示

```
String.Format(new MyFormatProvider(), "{0:d}, {0:T}", dateAndTimeVar); 
```

然后，FormatProvider 将对除 T 之外的所有格式进行传递，您将有逻辑输出 DateTime 的本机 T 格式或 --.--.-- 如果 DateTime 的时间部分是 00:00 :00。

[在此处](http://msdn.microsoft.com/en-us/library/system.iformatprovider.aspx)阅读 MSDN 上的 IFormatProvider

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:18:04.083

这是您可以使用的日期时间模式列表

[DateTime.ToString() 模式 | GeekZilla](http://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm)

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:24:46.047

你可以简单地这样做：

```
var printThis = String.Format("{0:d}, {0:T}", dateAndTimeVar)
                      .Replace("00:00:00", "--.--.--"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T12:29:06.723

您可以简单地检查是否`DateTime`包含时间：

```
String printThis = dateAndTimeVar.Date == dateAndTimeVar ?  
    String.Format("{0:d}, --.--.--", dateAndTimeVar) : 
    String.Format("{0:d}, {0:T}", dateAndTimeVar); 
```

# sql - SQL查询优化——消除子查询

> ID：13645036
> 
> 赞同：1
> 
> 时间：2012-11-30T12:13:13.713
> 
> 标签：sql

我有这个查询，我想优化它。我使用一个 SELECT 和一个子查询，如果可能的话，我只想使用一个 SELECT。

有人对此有任何想法吗？

先感谢您

```
SELECT c.*
FROM course AS c
JOIN student_course AS sc ON c.id = uc.course_id
WHERE sc.student_id = '5' AND c.level = (SELECT MAX(level) 
                                         FROM course  
                                         JOIN student_course ON c.id = sc.course_id)
GROUP BY c.category_id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:15:05.217

```
SELECT c.*
FROM course AS c
JOIN student_course AS sc
ON c.id = sc.course_id
WHERE sc.student_id = '5' 
GROUP BY c.category_id 
having c.level = MAX(sc.level) 
```

# php - 从 smarty 中的数组中获取密钥

> ID：13645046
> 
> 赞同：0
> 
> 时间：2012-11-30T12:13:51.157
> 
> 标签：php, smarty

如果我有一个看起来像这样的数组：

```
$my_array = array(2) { ["mykey"]=> int(2) ["mysecondkey"]=> int(3) } 
```

如何获得第一个元素的键值？

到目前为止，我知道我可以做到`$my_array[0]`，但我如何获得第一把钥匙？我想避免做foreach。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:16:22.360

这是关联数组（字符串键）。直接使用键名：

```
$my_array["mykey"]; 
```

在这里阅读[更多](http://php.net/manual/en/language.types.array.php)
要提取密钥，请使用[array_keys](http://php.net/manual/en/function.array-keys.php)：

```
$my_array = array(2) { ["mykey"]=> int(2) ["mysecondkey"]=> int(3) }
$keys = array_keys($my_array); //0 => "mykey", 1 => "mysecondkey" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:18:06.123

您可以使用[`array_keys()`](http://php.net/manual/en/function.array-keys.php)来获取数组键的列表：

```
$keys = array_keys($my_array);
echo $keys[0]; // outputs "mykey" 
```

如果您想在 Smarty 中执行此操作，可以使用以下代码输出数组的第一个键：

```
{foreach from=$my_array key=my_key item=i name=my_array}
  {if $smarty.foreach.my_array.first}{$my_key}{/if}
{/foreach} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:20:18.867

```
foreach($my_array as $key=>$_val){
    echo $key;
    break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T12:21:30.250

array_keys() 将获取数组中的所有键，而这将获取第一个键而不迭代所有其他键并忽略数组的其余部分。

这是一个假循环，因为 break 将在第一次迭代时退出，因此您实际上并没有对所有值进行真正的 foreach。

```
foreach($my_array as $firstKey=>$unused) {
    break;
}
echo($firstKey); 
```

如果你需要一个函数，你可以使用这个：

```
function first_key($arr) {
    foreach($my_array as $firstKey=>$unused) {
        return $firstKey;
    }
} 
```

该函数再次在第一次迭代时返回，因此您没有对所有元素进行“真正的” foreach。

# javascript - 从通过 JS 添加的 textarea 获取值

> ID：13645048
> 
> 赞同：0
> 
> 时间：2012-11-30T12:13:56.877
> 
> 标签：javascript, html

我不确定我这样做是否正确：

```
 <div>
    <form id="formPost" method="post">

    <div id="testdiv">
    </div>

    </form>
 </div>
 <div class="actions-left">
    <div id="textarea">
      <a href="javascript:ShowReplyTextArea();" class="button">Reply</a>
    </div>  
    <div id="postButton">
      <a href="javascript:ReplyPost(<%: Model.News.NewsId %>);" class="button">Post</a>
    </div>
    <div class="clear"></div>
  </div>

 <script type="text/javascript">

 $(document).ready(function() {
   $("#postButton").hide();
 });

 function ShowReplyTextArea() {
   div = document.getElementById("testdiv")
   var textArea = document.createElement("textarea");
   textArea.rows = 10;
   textArea.cols = 10;
   textArea.id = "post_textarea";

   div.appendChild(textArea);

   if ($("#post_textarea").val() != null)
     $("#postButton").show();
 }

 function ReplyPost(newsId)
 {
   div = document.getElementById("testdiv")
   var textArea = document.createElement("textarea");
   div.appendChild(textArea);
   textArea.id = "reply_textarea";
   textArea.value = this.valueOf();;
   **var message = textArea.value.toString(); //problem here dont know how???
   alert(message);
   var jqxhr = $.getJSON("<%= Url.Action("ReplyPost", "Home", new { area = "News" }) %>?newsId=" + newsId + "&message=" + message, function (data) {**
   });
 }
</script> 
```

然后在我的控制器中：

```
[HttpGet]
[NoCache]
public JsonResult ReplyPost(int newsId, string message)
{
  ZincService.NewsService.ReplyPost(newsId, message);
  return Json(new { success = true }, JsonRequestBehavior.AllowGet);
} 
```

特此出处：

```
 <div>
    <form id="formPost" method="post">

    <div id="testdiv">
    </div>

    </form>
  </div>
  <div class="actions-left">
    <div id="textarea">
      <a href="javascript:ShowReplyTextArea();" class="button">Reply</a>
    </div>  
    <div id="postButton">
      <a href="javascript:ReplyPost(116);" class="button">Post</a>
    </div>
    <div class="clear"></div>
  </div> 
```

我如何获得文本区域的值以便我可以传递它，我现在拥有的代码不正确，我做的所有这些都正确吗？我没有看到我输入“sdfgsdfg”的文本的文本区域

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:42:05.957

只需使用：

```
var message = textArea.innerHTML; 
```

或者

```
var message = textArea.innerText; 
```

或者

```
var message = $(textArea).html(); 
```

或者

```
var message = $(textArea).text(); 
```

# android - 找不到选定的向导

> ID：13645055
> 
> 赞同：1
> 
> 时间：2012-11-30T12:14:33.333
> 
> 标签：android, google-app-engine

嗨，我为我的 Eclipse 添加了一个 Android SdK 和 Google 应用程序引擎插件，但是当我使用“App engine connected AndroidProject”创建一个新项目时，我得到了以下异常

```
The selected wizard could not be started.
Plug-in com.google.gdt.eclipse.mobile.android was unable to load class com.google.gdt.eclipse.mobile.android.wizards.NewAndroidCloudProjectWizard.
com.google.gdt.eclipse.mobile.android.wizards.NewAndroidCloudProjectWizard 
```

如何解决上述问题..请帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:48:29.117

谷歌的那个功能还没有准备好。在他们给我们更新插件之前它不会起作用。见这里[https://groups.google.com/forum/?fromgroups=#!topic/google-plugin-eclipse/nz940DaWrKY](https://groups.google.com/forum/?fromgroups=#!topic/google-plugin-eclipse/nz940DaWrKY)

# iphone - 如何在 vfr 阅读器中制作适合屏幕大小的 pdf

> ID：13645065
> 
> 赞同：0
> 
> 时间：2012-11-30T12:15:48.947
> 
> 标签：iphone, objective-c, ios5, pdf, ios6

我正在使用这个 vfr 阅读器来显示 pdf 页面。我需要使 pdf 页面适合整个屏幕。我怎样才能做到这一点。我尝试了一切，但无法得到它。有人可以引导我走向正确的方向。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T01:54:57.670

我找到了一种方法：将状态栏设置为 hidden in `viewWillAppear`of `ReaderViewController`，然后设置`READER_SHOW_SHADOWS`为`FALSE`and `CONTENT_INSET`to `0`in `ReaderContentView`。此外，请确保您的 PDF 的纵横比为 4:3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:34:20.617

在`initWithURL:page:password`方法中`ReaderContentPage.m`，您需要设置`viewRect.size`为全屏大小。

# jquery-ui - 如何向 jQuery 点击函数发送多个参数？

> ID：13645068
> 
> 赞同：2
> 
> 时间：2012-11-30T12:15:58.230
> 
> 标签：jquery-ui, jquery, jquery-plugins, jquery-forms-plugin

> **可能重复：**
> [如何向 jQuery click 函数发送多个参数？](https://stackoverflow.com/questions/1541127/how-to-send-multiple-arguments-to-jquery-click-function)

我想将多个参数传递给 Jquery 函数。下面是 Javascript 示例代码。我想将此 javascript 函数转换为 jquery 函数。如何将该参数传递给 jquery onclick 事件？

```
<a onclick="showState('state_name','state_id')">ADD STATE </a>

function showState(state_name,state_id){
openbox_state(state_name,state_id);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T12:19:35.117

也许我会在这里使用数据集：

HTML：

```
<a data-state_name="state_name" data-state_id="state_id" >ADD STATE</a> 
```

JS：

```
$(function() {
...
  $('a[data-state_id]').click(function() {
    var $this = $(this);
    showState($this.data('state_name'), $this.data('state_id'));
    return false;
  });
...
}); 
```

您实际上不必对单击的对象进行 jwrap，因为您可以使用[**数据集**](https://developer.mozilla.org/en-US/docs/DOM/element.dataset)API（如果您有幸不支持 IE9）或简单的`getAttribute`方法来获取属性值。然而，我发现这种语法更简洁易读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T12:21:47.083

正确的方法是：

```
<a href="#" id="myanchor" data-nm="state_name" data-id="state_id">ADD STATE </a>

<script type="text/javascript">
$(document).ready(function(event) {
   event.preventDefault();
   $('#myanchor').on('click', function() {
      openbox_state( $(this).data('nm') , $(this).data('id'));
   });
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T12:29:13.200

你的jQuery代码：

```
<script language="javascript" type="text/javascript">
 var state_name=$('#txtName').val();
 var state_id=$('#txtid').val();
$(document).ready(function () {
     $('a').click(function(){
        showState(state_name,state_id);
         });
});

function showState(state_name,state_id){
   openbox_state(state_name,state_id);
  }

</script> 
```

您的 HTML：

```
<a href="javaScript:void(0);">ADD STATE </a>
<input type="text" id="txtName" value="Tom Cruse" />
<input type="text" id="txtid" value="1" /> 
```

这个 jquery 从输入中获取值，通过使用它们的 id 并将它们用作调用方法的参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T12:31:23.747

如果您需要传递要在事件处理程序中使用的其他数据，jQuery click 事件绑定器已经支持这一点。但是为了使用它，您必须通过代码而不是内联绑定来绑定事件处理程序。

$(function(){ $('#id').click({additional : "data"},function(){ // 处理程序代码}); });

检查文档：[http ://api.jquery.com/click/](http://api.jquery.com/click/)

# python - 尝试在 SQLite Python 上搜索列，以便它只返回搜索到的信息

> ID：13645076
> 
> 赞同：0
> 
> 时间：2012-11-30T12:16:37.620
> 
> 标签：python, database, sqlite

Python 和数据库新手

我有一个数据库表，其中包含一列用户名。我希望用户能够通过 raw_input 搜索表，并且只返回与该用户名关联的值。

例如，用户搜索 Bill，它只显示 Bill 按指定列排序的记录

这是我到目前为止所拥有的，但显然非常错误，希望有人能提供帮助：

```
def find_me(db, column_name):
    db = sqlite3.connect(db)
    cursor = db.cursor()
    name = raw_input("Please enter your username: ")
    cursor.execute("SELECT name FROM username WHERE name=?", (name,))
    cursor.execute("SELECT * FROM username ORDER BY "+column_name+" ASC")
    name = cursor.fetchone()
    next = cursor.fetchone() 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:19:22.187

您希望使查询类似于以下内容：

```
cursor.execute("SELECT name FROM username WHERE name=?", (name,)) 
```

这使用查询参数，因此对于提供的数据正确转义。然后将其调整为 SELECT * 以及您想要从结果中获得的任何其他内容。

* * *

尝试使用这个：

```
name = raw_input("Please enter your username: ")
query = "SELECT * FROM username WHERE name=? ORDER BY {0}".format(column_name)
cursor.execute(query, (name,))
for row in cursor:
    print row 
```

# javascript - 将当前类添加到自动图像更换器

> ID：13645080
> 
> 赞同：0
> 
> 时间：2012-11-30T12:16:49.447
> 
> 标签：javascript, jquery, html, css, image

我有一种图像旋转器，它可以在一定间隔内通过 javascript 滚动图像数组，现在我为每个当前图像添加了一些样式。但这仅在我自己将鼠标悬停在项目上/单击项目时才有效，每当脚本自动交换图像时，图像的风格都不会发生任何变化。所以我想知道的是如何在自动脚本上使用相同的效果。

这是代码

* *HTML **

```
<div class="container-thumbs">
<div><a><img src=".jpg" /></a></div>
<div><a class="active"><img src=".jpg" /></a></div> 
<div><a><img src=".jpg" /></a></div>
</div> 
```

CSS

```
.container-thumbs{
width: 300px; height: 25; font-size: 18px;
}
.container-thumbs a{
list-style: none; float: left; margin-right: 4px; padding: 5px;
}
.container-thumbs div a:hover, .container-thumbs div a.active {
background-color: #f90;
} 
```

**Javascript**

```
(function(){
var rotator = document.getElementById('bigImage');
var imageDir = '../images/headers/';
var delayInSeconds = 5;     
var images = ['.jpg', '.jpg', '.jpg', '.jpg', '.jpg',     
'.jpg', '.jpg'];
var num = 0;
var changeImage = function() {
var len = images.length;
bigImage.src = imageDir + images[num++];
if (num == len)
{num = 0;} 
};
setInterval(changeImage, delayInSeconds * 1000);
})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:28:55.293

我认为你必须用旋转器替换 bigImage 因为你 getTheImage

```
var rotator = document.getElementById('bigImage');
// then u dont use it
bigImage.src = imageDir + images[num++];
// so try to change to
rotator.src=imageDir + images[num++]; 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:32:10.763

从您的 html 中，没有 ID 为 bigImage 的元素，所以我根本看不到它是如何工作的。

我在中间图片中添加了 ID，如下所示：

```
<div class="container-thumbs">
    <div><a><img src=".jpg" /></a></div>
    <div><a class="active"><img src=".jpg" id="bigImage" /></a></div> 
    <div><a><img src=".jpg" /></a></div>
</div> 
```

那应该行得通。

另一件事是，这里有充分的理由不使用 jQuery 吗？如果没有别的，我强烈推荐它以实现跨浏览器兼容性。

# javascript - 在每个循环中访问 Handlebars.js 范围之外的变量

> ID：13645084
> 
> 赞同：213
> 
> 时间：2012-11-30T12:17:04.133
> 
> 标签：javascript, templates, scope, each, handlebars.js

我有一个 handlebars.js 模板，就像这样：

```
{{externalValue}}

<select name="test">
    {{#each myCollection}}
       <option value="{{id}}">{{title}} {{externalValue}}</option>
    {{/each}}
</select> 
```

这是生成的输出：

```
myExternalValue

<select name="test">
       <option value="1">First element </option>
       <option value="2">Second element </option>
       <option value="3">Third element </option>
</select> 
```

正如预期的那样，我可以访问每个元素的`id`和字段来生成我的选择。在选择之外，我的变量被正确打印（“myExternalValue”）。`title``myCollection``externalValue`

不幸的是，在期权的文本中，`externalValue`价值永远不会被打印出来。

我的问题是：如何从循环内访问每个 handlebars.js 范围之外的变量？

* * *

## 回答 #1

> 赞同：513
> 
> 时间：2012-11-30T12:30:40.783

尝试

```
<option value="{{id}}">{{title}} {{../externalValue}}</option> 
```

`../`路径段引用应该是您想要的父模板范围。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2018-11-16T06:19:54.103

或者你可以像这样使用绝对路径：

```
<option value="{{id}}">{{title}} {{@root.user.path.to.externalValue}}</option> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-01T12:28:21.000

我看到了许多与 404 相关的链接，以获取有关此主题的文档。

我用这个更新它，它在*2020 年 4 月 1 日*工作：

[https://handlebarsjs.com/guide/expressions.html#path-expressions](https://handlebarsjs.com/guide/expressions.html#path-expressions)

一些像#with 和#each 这样的助手允许你深入嵌套对象。当您在路径中包含 ../ 段时，Handlebars 将变回父上下文。

```
 {{#each people}}
    {{../prefix}} {{firstname}} 
    {{/each}} 
```

即使在注释上下文中打印名称，它仍然可以返回主上下文（根对象）以检索前缀。

警告

../ 将解析为的确切值因调用块的帮助程序而异。仅在上下文发生变化时才需要使用 ../。{{#each}} 等助手的子级需要使用 ../ 而 {{#if}} 等助手的子级则不需要。

```
{{permalink}}
{{#each comments}}
  {{../permalink}}

  {{#if title}}
    {{../permalink}}
  {{/if}}
{{/each}} 
```

在此示例中，所有上述内容都引用相同的前缀值，即使它们位于不同的块中。此行为是 Handlebars 4 的新行为，[发行说明](https://github.com/wycats/handlebars.js/blob/master/release-notes.md)讨论了先前的行为以及迁移计划。

# php - Woocommerce - 在循环内显示变化

> ID：13645085
> 
> 赞同：2
> 
> 时间：2012-11-30T12:17:14.690
> 
> 标签：php, wordpress, variables, loops, woocommerce

```
<?php

    switch ( $product->product_type ) {
        case "variable" :
            $link   = apply_filters( 'variable_add_to_cart_url', get_permalink( $product->id ) );
            $label  = apply_filters( 'variable_add_to_cart_text', __('Select options', 'woocommerce') );
        break;
        case "grouped" :
            $link   = apply_filters( 'grouped_add_to_cart_url', get_permalink( $product->id ) );
            $label  = apply_filters( 'grouped_add_to_cart_text', __('View options', 'woocommerce') );
        break;
        case "external" :
            $link   = apply_filters( 'external_add_to_cart_url', get_permalink( $product->id ) );
            $label  = apply_filters( 'external_add_to_cart_text', __('Read More', 'woocommerce') );
        break;
        default :
            $link   = apply_filters( 'add_to_cart_url', esc_url( $product->add_to_cart_url() ) );
            $label  = apply_filters( 'add_to_cart_text', __('Add to cart', 'woocommerce') );
        break;
    }

    printf('<a href="%s" rel="nofollow" data-product_id="%s" class="add_to_cart_button button product_type_%s">%s</a>', $link, $product->id, $product->product_type, $label);

?> 
```

我正在尝试在循环内显示变体，以便客户可以从商店页面将可变产品添加到他们的购物车（请参见下面的屏幕截图）......

[http://cl.ly/image/42401k0X0X2I](http://cl.ly/image/42401k0X0X2I)

我知道我需要包含功能-

```
get_available_variations(); 
```

而且我很确定这已经返回了一个数组，它只是将该数组放入一个选择下拉列表中+列出变体（S，M，L，XL）并具有将该变体添加到篮子的链接。

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:56:55.803

我在尝试解决相同问题时发现了您的帖子。我终于找到了...

```
function woocommerce_variable_add_to_cart() {
    global $product;

    // Enqueue variation scripts
    wp_enqueue_script( 'wc-add-to-cart-variation' );

    // Load the template
    woocommerce_get_template( 'single-product/add-to-cart/variable.php', array(
            'available_variations'  => $product->get_available_variations(),
            'attributes'            => $product->get_variation_attributes(),
            'selected_attributes'   => $product->get_variation_default_attributes()
        ) );
}
} 
```

在

[woocommerce-template.php](https://github.com/woothemes/woocommerce/blob/master/woocommerce-template.php)

这在 loop/add-to-cart.php 中对我有用

```
switch ( $product->product_type ) {
        case "variable" :
            $link   = apply_filters( 'variable_add_to_cart_url', get_permalink( $product->id ) );
            $label  = woocommerce_variable_add_to_cart();
        break; 
```

让我知道这是否有帮助:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T18:20:04.687

单个帖子页面的变体下拉模板文件位于此处：woocommerce\templates\single-product\add-to-cart\variable.php

这需要以下脚本来传递产品变量信息：

```
<script type="text/javascript">
var product_variations_<?php echo $post->ID; ?> = <?php echo json_encode( $available_variations ) ?>;
</script> 
```

以及以下隐藏字段：

```
<input type="hidden" name="variation_id" value="" /> - where the value is the variation ID 
```

我希望这是其他人可以帮助建立的一个开始。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-17T20:43:42.150

我在[Remi Corson 的博客](http://www.remicorson.com/add-woocommerce-variable-product-with-variations-to-cart/)上发现了一个简单的方法来做到这一点。
使用以下内容更改`href`购物车按钮的值：

```
http://example.com/cart/?add-to-cart=[PRODUCT_ID]&variation_id=[VARIATION_ID]&attribute_pa_[ATTRIBUTE_SLUG]=[ATTRIBUTE_SLUG_VALUE] 
```

例子：

```
http://example.com/cart/?add-to-cart=123&variation_id=456&attribute_pa_colour=black 
```

使用该`get_available_variations();`函数很容易得到变化值。对于产品 ID，您可以使用`get_the_ID();`函数。

# c# - 在运行时访问和设置 Winforms 控件

> ID：13645086
> 
> 赞同：0
> 
> 时间：2012-11-30T12:17:20.613
> 
> 标签：c#, winforms, tablelayoutpanel

我构建了一个 Winforms 表格布局，每个单元格中有许多元素。我要做的是枚举我关心的特定类型的所有控件，并删除它们相应的 Click 值。这是在运行时完成的，这就是为什么我不只是设置控件的初始属性。

我尝试过使用 Control.ControlCollection 属性，尽管我运气不佳，因为它不是 IEnumerable。替代方案我有以下代码，但问题是在控件中永远找不到控件，并且抛出空引用异常，因为我试图设置*.Click*一个空对象，但这个对象肯定应该存在！帮助！？

```
for (int row = 1; row < tblLayoutPanel.RowCount; row++)
{
    for (int column = 0; column < tblLayoutPanel.ColumnCount; column++)
    {
        Type controlType = tblLayoutPanel.GetControlFromPosition(column, row).GetType();
        if (controlType == typeof(CTLLabel) ||
            controlType == typeof(OutputLabel))
        {
            Controls[tblLayoutPanel.GetControlFromPosition(column, row).Name].Click += null;
            // Control is never found! *why?*
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:30:56.990

原因是您使用`GetControlFromPosition`方法获得的控件的父控件是`tblLayoutPanel`. 您试图在控件`tblLayoutPanel`的父级中获取子控件`tblLayoutPanel`而不是`tblLayoutPanel.Controls`集合。

而不是像这样访问控件，为什么你不只是使用你通过使用`GetControlFromPosition`方法获得的控件。试试这个：tblLayoutPanel.GetControlFromPosition(column, row).Click

# xamarin.ios - Monotouch：如何在等待下一个 UIViewController 加载时显示加载动画？

> ID：13645087
> 
> 赞同：0
> 
> 时间：2012-11-30T12:17:22.330
> 
> 标签：xamarin.ios, loading, pushviewcontroller

我有一个 UITableView 并且在 RowSelected 上我想显示一个加载动画，然后加载另一个 ViewController：

```
public override void RowSelected (UITableView tableView, NSIndexPath indexPath)
{
   LoadingView LV = new LoadingView();

   LV.Show("Loading...");

   specScreen = new SpecScreen();

   controller.NavigationController.PushViewController(specScreen, true);

   LV.Hide();
} 
```

然而，加载动画仅在下一个视图控制器加载后出现一瞬间。

如何显示加载动画，然后等待下一个视图控制器加载并再次隐藏它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:01:36.693

Tanis，制作`LoadingView`单例并放置`LoadingView.Instance.Hide();`在视图控制器`ViewDidAppear`中`SpecScreen` 。

# wordpress - 将缩略图添加到二级 wordpress 导航菜单

> ID：13645093
> 
> 赞同：3
> 
> 时间：2012-11-30T12:17:41.723
> 
> 标签：wordpress, menu, thumbnails

我正在使用 wordpress 网站。我想知道有没有办法在 wordpress 导航菜单 2 级子页面中添加缩略图。下面是 wordpress 导航菜单的结构

一级菜单 >>> 标题

二级菜单 >>> 带有标题的缩略图

三级菜单 >>> 标题

请检查屏幕截图。 ![在此处输入图像描述](../Images/d0461dc506928af4b494c55a13d5f33d.png)

简而言之，我想制作可以通过 wp 菜单选项控制的相同功能。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T19:55:56.900

它很容易。我刚刚找到了解决方案，它对我有用

```
class Menu_With_Description extends Walker_Nav_Menu {
function start_el(&$output, $item, $depth, $args) {
    global $wp_query;

    $indent = ( $depth ) ? str_repeat( "", $depth ) : '';

    $class_names = $value = '';

    $classes = empty( $item->classes ) ? array() : (array) $item->classes;

    $class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item ) );
    $class_names = ' class="' . esc_attr( $class_names ) . '"';

    $output .= $indent . '<li id="menu-item-'. $item->ID . '"' . $value . $class_names .'>';

    $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
    $attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) .'"' : '';
    $attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';
    $attributes .= ! empty( $item->url )        ? ' href="'   . esc_attr( $item->url        ) .'"' : '';

    // get user defined attributes for thumbnail images
    $attr_defaults = array( 'class' => 'nav_thumb' , 'alt' => esc_attr( $item->attr_title ) , 'title' => esc_attr( $item->attr_title ) );
    $attr = isset( $args->thumbnail_attr ) ? $args->thumbnail_attr : '';
    $attr = wp_parse_args( $attr , $attr_defaults );

    $item_output = $args->before;
     $item_output .= '<a'. $attributes .'>';
    if($depth == 1){
    // thumbnail image output
    $item_output .= ( isset( $args->thumbnail_link ) && $args->thumbnail_link ) ? '<a' . $attributes . '>' : '';
    $item_output .= apply_filters( 'menu_item_thumbnail' , ( isset( $args->thumbnail ) && $args->thumbnail ) ? get_the_post_thumbnail( $item->object_id , ( isset( $args->thumbnail_size ) ) ? $args->thumbnail_size : 'thumbnail' , $attr ) : '' , $item , $args , $depth );       
    $item_output .= ( isset( $args->thumbnail_link ) && $args->thumbnail_link ) ? '</a>' : '';
    }
    // menu link output

    $item_output .= $args->link_before . apply_filters( 'the_title', $item->title, $item->ID ) . $args->link_after;

    // menu description output based on depth
    //$item_output .= ( $args->desc_depth >= $depth ) ? '<br /><span class="sub">' . $item->description . '</span>' : '';

    // close menu link anchor
    $item_output .= '</a>';
    $item_output .= $args->after;

    $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
}
}
add_filter( 'wp_nav_menu_args' , 'my_add_menu_descriptions' );
function my_add_menu_descriptions( $args ) {
    $args['walker'] = new Menu_With_Description;
    $args['desc_depth'] = 1;
    $args['thumbnail'] = true;
    $args['thumbnail_link'] = false;
    $args['thumbnail_size'] = 'nav-thumb';
    $args['thumbnail_attr'] = array( 'class' => 'nav_thumb my_thumb' , 'alt' => 'test' , 'title' => 'test' );

    return $args;
} 
```

只需粘贴在functions.php中，您就可以在菜单项中添加缩略图。

# objective-c - 如何安装和使用 iOS 6 中包含的其他亚洲字体？

> ID：13645094
> 
> 赞同：17
> 
> 时间：2012-11-30T12:17:45.307
> 
> 标签：objective-c, ios6, uifont

我正在编写一个需要显示中文字符的 iOS 6 iPhone/iPad 应用程序。iOS 6 中默认安装的亚洲字体还有很多不足之处。[但是，在Apple 的 iOS 6：字体列表页面](http://support.apple.com/kb/HT5484)的底部，Apple 声明：

> “应用程序还可以根据需要安装以下 [主要是亚洲] 字体。”

亚洲字体系列不出现在`[UIFont familyNames]`. 我在 UIFont 类文档或 Apple 开发者论坛上没有找到任何关于如何安装可能已经包含在 iOS 6 中但尚未“安装”的字体的信息。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T12:50:27.463

*   您**无法**更改 iOS 中的全局字体。
*   此列表中的一些**已经“安装”**并出现在`[UIFont familyNames]`（例如 Apple SD Gothic Neo）
*   每个 iOS 应用程序都可以添加尚不支持的自定义字体（例如 BiauKai）
*   没有从 5.1 到 6.0**的**API 差异`UIFont.h`
*   自 4.0 以来没有API 差异（添加 lineHeight，不推荐使用前导）**。**`UIFont.h`

* * *

> “应用程序还可以根据需要安装以下 [主要是亚洲] 字体。”

由于我们知道每个开发人员都可以使用自定义字体，因此为您的应用添加或“安装”它们绝对没有问题。

我很确定这些是一些要求的字体，Apple 的某个人在此页面上写了这些字体，以表明即使 iOS 不特别支持这些字体，也可以使用这些字体。

* * *

*我知道这不是完全正确或完全错误的答案——它基于我知道的信息，我在网上找到并明确表示，我们可能永远不知道答案。*

* * *

要支持自定义字体，请将您的字体`.ttf`格式添加到您的项目（**以及您的目标**- 我不止一次忘记这个！）并将其添加到您的**Info.plist**。现在可以将它与`someLabel.font = [UIFont fontWithName:@"MySuperFont" size:100];`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-03T13:12:49.670

> “应用程序还可以根据需要安装以下 [主要是亚洲] 字体。”

它涉及法律和运营*问题*。这些字体在 Apple 下 (co?-) 获得许可，并在 Mac OSX 中可用。如果您想使用它们，您可以使用 iOS 包中 OSX /Library/Fonts 文件夹中的副本将它们包含在您的项目中，**而不会侵犯**相应字体所有者的版权。

此外：它们与 iOS 6 兼容（例如，通过 Font Book 应用程序中的字体验证），您可能知道有很多免费的亚洲字体在野外，但在 iOS 6 上不能 100% 工作，这令人沮丧全部尝试；专业亚洲字体的许可证非常昂贵。

要安装所需的字体，请使用“Font book”，确定您喜欢的字体，在查找器中打开（它可能是带有表意文字的字体名称，请继续），将字体复制到您的项目中，并将字体名称用作字体的参考而不是文件名。请务必更新`UIAppFonts`信息中的（应用程序提供的字体）项目。

示例：Mac OSx 上的 Kaiti 字体是 `楷体.ttc`并且按照说明准备项目将使您能够创建带有 name 的 UIFont `@"Kaiti SC"`。

最后一点：您不应该在 github 或类似的公共项目上发布包含这些字体的公共项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T11:54:38.920

iOS 支持在 iOS 应用程序中添加自定义字体。这是一个示例，说明如何做到这一点。

[http://www.mobilefontfonts.com/use/ios](http://www.mobilefontfonts.com/use/ios)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T05:45:14.313

我还想一次在我的项目中添加额外的字体......所以......

看一下这个

[http://www.youtube.com/watch?v=NSuSDuoyfh4](http://www.youtube.com/watch?v=NSuSDuoyfh4)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T13:12:46.833

如果您将任何您喜欢的字体下载到您的 Mac 并安装它。它将出现在 Xcode 中，如下所示：

![在此处输入图像描述](../Images/4576e137ea104377b96f74d737340f5b.png) ![在此处输入图像描述](../Images/42f0f66de4f76670d5ecc36ce568f0ed.png) ![在此处输入图像描述](../Images/fab044bf2f96026c3d2fd3d680979e01.png)

# c++ - ifstream getline 问题

> ID：13645095
> 
> 赞同：1
> 
> 时间：2012-11-30T12:17:46.733
> 
> 标签：c++, ifstream, getline

我的代码打开一个文本文件，计算行数，分配一个数组来存储所有行，然后调用一个函数来用每一行填充这个数组。此函数 file.getline 调用返回空字符串：

这是代码：

```
typedef char* line; 
```

...

```
char* filename=new char[256];
cout << "Type a file name: " << endl;
cin.ignore();
cin.getline(filename,255);

ifstream iFile(filename);

int nLines=CountLines(iFile);

line* LineArray = new line[nLines];
ReadLines(LineArray,iFile); 
```

计数线函数：

```
int CountLines(ifstream &file)
{
line templine=new char[64];
int nLines=0;

while (!file.eof())
{
    file.getline(templine,64);

    if (*templine != '\n')
        nLines++;

}
delete [] templine;

return nLines;
} 
```

这工作正常。然而，ReadLines 不会：

```
void ReadLines(line* LineArray, ifstream &file)
{
    line templine=new char[64];

file.seekg(0,ios::beg);

int i = 0;
while (!file.eof())
{

    if (*templine != '\n')
    {
        LineArray[i]=templine;
        i++;
    }

}
delete [] templine;
} 
```

我感觉它与 getline 的 '\n' 问题有关，但是当我将 get 指针设置为 0 并且文件以普通文本而不是行开头时，我不明白为什么它会用空字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T12:44:09.977

您无需先计算行数，然后再读取行数。你可以做

```
#include <istream>
#include <vector>
#include <string>

std::vector<std::string> ReadLines(std::istream& is) {
    std::vector<std::string> lines;
    std::string line;

    while (std::getline(is, line)) {
        lines.push_back(line);
    }

    return lines;
} 
```

它将返回一个包含所有行的 std::vector，无需任何大惊小怪或手动内存管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T13:23:48.770

您的代码中有太多错误。

*   参数[`istream::getline()`](http://www.cplusplus.com/reference/istream/istream/getline/)错误
*   之后你需要清除 eof 标志`CountLines()`
*   错误的内存释放操作。
*   呸呸呸……

指针不是玩具，您最好采用 Tino Didriksen 的解决方案。

如果你真的喜欢 char 和指针，它应该是这样的：

```
#include <iostream>
#include <fstream>
#include <cassert>

using namespace std;

int CountLines(ifstream &fin) {
  char templine[1024];      // no need for dynamic allocation.
  int count = 0;
  while (fin.getline(templine, 1024))
    count++;
  return count;
}

void ReadLines(char** lines, int count, ifstream &fin) {
  fin.seekg(0, ios::beg);
  for (int i = 0; i < count; i++) {
    lines[i] = new char[1024];      // you need dynamic allocation here.
    fin.getline(lines[i], 1024);
    assert(fin.gcount() < 1024);    // assure the line is shorter than 1023 chars
  }
}

int main() {

  char filename[256];         // no need for dynamic allocation.
  cin.getline(filename, 256); // second parameter should be the same size of your buffer.

  ifstream fin(filename);

  int count = CountLines(fin);
  char** lines = new char*[count];

  // After CountLines() called, fin.eof is set, you need to clear it.
  // Otherwise fin.getline() won't do a thing.
  fin.clear();
  ReadLines(lines, count, fin);

  // When every thing is done, you need to free all the memory.
  for (int i = 0; i < count; i++)
    delete[] lines[i];
  delete[] lines;

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-30T12:36:33.320

您的错误在此代码中：

```
if (*templine != '\n') 
```

因为您正在检查行中的第一个符号。

您应该像这样更改代码：

```
int CountLines(ifstream &file)
{
    string line;
    int nLines=0;
    while(getline(file,line))
        nLines++;

    return nLines;
}

void ReadLines(string LineArray, ifstream &file)
{
    file.seekg(0,ios::beg);

    string line;
    while(getline(file,line))
    {
        LineArray += line;
    }
} 
```

# java - 将对象添加到 ArrayList

> ID：13645101
> 
> 赞同：1
> 
> 时间：2012-11-30T12:18:17.027
> 
> 标签：java, generics, arraylist

我已经声明了一个 Arraylist，我希望它是一个泛型类型。

```
ArrayList<T> locker = new ArrayList<T>(); 
```

然后我有一个方法 add 也需要是通用的。

```
public <T extends Gear> boolean add(Gear item)
{

    locker.add(item);// this is giving me compile error => no suitable method found for add(Gear)
    return true;
} 
```

我该如何解决它，我也是泛型类型的新手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T12:22:13.157

如果泛型类型已经在类声明中，则无需在方法中重新声明泛型类型：

```
public class Locker<T extends Gear> {
    private List<T> locker = new ArrayList<T>();

    public boolean add(T item) {
        locker.add(item);
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:23:44.433

您实际上定义了两种通用参数类型。你陷入了相信它们是相同的经典陷阱，因为它们具有相同的名称。您的第一个泛型参数 (T) 在类级别，并且可以在外面使用，您的第二个（T 扩展 Gear）仅适用于您的 add 方法的上下文。

正如其他人所指出的，您可能应该将您的类级别参数更改为 T extends Gear，并删除方法级别声明。

# php - 如果没有删除数据库行，则返回 false？

> ID：13645103
> 
> 赞同：1
> 
> 时间：2012-11-30T12:18:20.693
> 
> 标签：php, mysql

我对 PHP 有点陌生，但目前我正在学习基于它的课程。

我有一个表单，用户将在其中输入他们的电子邮件地址，以便将其从电子邮件列表中删除。

我试图`if else`声明，当他们的电子邮件不在数据库中时，它会出现“列表中不存在”的错误。

正如您可能看到的那样，该脚本不起作用。

如何查看查询是否成功，然后向用户返回适当的消息？

```
 $email = $_POST['email'];

    $dbc = mysqli_connect(censored)
            or die('error connecting to the database');
    $query = "DELETE FROM email_list WHERE email='$email'";
    $result = mysqli_query($dbc, $query)
            or die('Error Querying the database');

    if ($result == 0) {

        echo $email . ' do not exist in the list';
    }
    else {
        echo $email . ' is deleted form the list';
    }

    mysqli_close($dbc); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:27:53.283

[mysqli_affected_rows()](http://php.net/mysqli_affected_rows)

```
<?php
$email = $_POST['email'];

$dbc = mysqli_connect(censored)
        or die('error connecting to the database');
$query = "DELETE FROM email_list WHERE email='$email'";
$result = mysqli_query($dbc, $query)
        or die('Error Querying the database');

if (mysqli_affected_rows($dbc) === 0) {

    echo $email . ' do not exist in the list';
}
else {
    echo $email . ' is deleted form the list';
}

mysqli_close($dbc);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:37:00.120

HTML 代码

```
<html>
<form method="post" action="somepage">
<input type="text" name="email" />
<br/>
<input type="Submit" name="submit" value="Delete" />
</form>
</html> 
```

php代码

```
<?php
// on submit button 
if (isset($_POST["submit"]))
{
$dbhost = 'localhost';
$dbuser = 'databaseuser';
$dbpass = 'databasepassword';
$dbname = 'databasename';
//connection to mysql
$conn = mysql_connect($dbhost, $dbuser, $dbpass);
if (!$conn)
{
die('Could not connect: ' . mysql_error());
}
//use database
$usedb = mysql_select_db($dbname , $conn);
if (!$usedb)
{
die ("could not select $dbname...<br/>");
}
//to delete record
$del="DELETE FROM tablename WHERE columnName = '$email'";
if(mysql_query($del))
{
echo '<script type="text/javascript">alert("Record Deleted Successfully....!")</script>';
}
else
{
echo mysql_error();
}
}
?> 
```

希望这对你有帮助。

# iphone - 为ios视网膜应用程序添加两次图像？

> ID：13645104
> 
> 赞同：1
> 
> 时间：2012-11-30T12:18:22.113
> 
> 标签：iphone, ios, xcode, ios6, retina-display

美好的一天，我的问题是，在为 ios Retina 应用程序开发时，我们是否必须将每张图像添加两次？

例如，如果我的应用中有两个图像 a.png 和 b.png 都是 20x20px。所以我需要添加四个图像：

```
 -a.png (20x2x)
    -a@2x.png(40x40)
    -b.png (20x20)
    -b@2x.png (40x40) 
```

无论如何我可以继续添加一个大图像并在两个屏幕上调整大小吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:28:27.603

是的，您需要同时添加图像 a.png 和 a@2x.png。ios 本身将寻找@2x 标识符并将该图像用于视网膜分辨率设备。如果您不添加a.@2x.png，则图像看起来会模糊和扭曲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:21:02.073

是的，你必须这样做，如果你不添加视网膜图像，图像看起来会失真

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:21:53.503

您将需要添加两组图像。如果这些图像可用，系统会查看“@2x”标识符并在视网膜设备上适当地显示它们。现在，如果愿意通过仅使用正常（非 2x）图像来补偿失真，则可以解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T13:43:06.620

您可以简单地添加一个更大的图像，如 @2x，但命名为正常。主要问题是当您在正常显示上打开此图像时，您将消耗两倍所需的内存（调整大小也会产生成本）。一个解决方案可以是创建您自己的图像视图，从大图像开始正确调整它们的大小并重新绘制它们。我对从 Internet 下载的图像使用类似的方法。当然，这在性能上是有代价的。
总结一下：

*   -打开图像内存增加（1）
*   -以一半大小的内存增加重绘图像（1 + 0.5 = 1.5）
*   -您不再需要旧图像，只需释放它（1.5-1 = 0.5）
*   -用它

    这种方法需要更多的代码，更多的设备资源，但你可以在包中添加一种图像
    希望这会有所帮助。

# r - 当前源文件的完整文件名

> ID：13645106
> 
> 赞同：4
> 
> 时间：2012-11-30T12:18:42.477
> 
> 标签：r

在许多（解释的）编程语言中，在获取文件时会设置一个变量，以便某些代码可以确定加载文件的文件名。例如，在 ruby​​ 中，该变量`__FILE__`是在加载文件时设置的。

R中有这样的功能吗？R代码有没有办法确定它从哪里加载？

例子：

主.R：

```
source("foo.R") 
```

/home/bar/foo.R:

```
print(FULL_FILENAME) 
```

我必须用什么替换 FULL_FILENAME 才能打印：

```
[1] "/home/bar/foo.R" 
```

没有硬编码源中的任何文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:26:33.207

您可以通过将其放在文件顶部来使用[Gabor 提供](https://stat.ethz.ch/pipermail/r-help/2009-January/184745.html)的 hack ：

```
this.file <- parent.frame(2)$ofile 
```

如果要提取目录的名称，可以执行以下操作：

```
this.dir <- dirname(this.file) 
```

根据我对事物的理解，采购文件会创建两个父环境。外层（向上两步）包含有关代码来源文件的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-19T18:22:20.987

这是一种更可靠的方法，它不依赖于`source`：

```
(function() {
    print(getSrcFilename(sys.call(sys.nframe())))
})() 
```

# python - python - 如何在没有代码重复的情况下迭代数据文件？

> ID：13645110
> 
> 赞同：0
> 
> 时间：2012-11-30T12:18:53.150
> 
> 标签：python, code-duplication

我想写一个脚本来处理一些数据文件。数据文件只是带有数据列的 ascii 文本，这里是一个简单的例子......

第一列是 ID 号，在本例中为 1 到 3。第二列是感兴趣的值。（我使用的实际文件有更多的 ID 和值，但让我们在这里保持简单）。

data.txt 内容：

```
1 5
1 4
1 10
1 19
2 15
2 18
2 20
2 21
3 50
3 52
3 55
3 70 
```

我想遍历数据并提取每个 ID 的值，然后处理它们，即获取 ID 1 的所有值并对它们进行处理，然后获取 ID 2 的所有值等。

所以我可以用python写这个。

```
#!/usr/bin/env python

def processValues(values):
  print "Will do something with data here: ", values

f = open('data.txt', 'r')
datalines = f.readlines()
f.close()

currentID = 0
first = True

for line in datalines:
    fields = line.split()

    # if we've moved onto a new ID,
    # then process the values we've collected so far
    if (fields[0] != currentID):

        # but if this is our first iteration, then
        # we just need to initialise our ID variable
        if (not first):
            processValues(values) # do something useful

        currentID = fields[0]
        values = []
        first = False

    values.append(fields[1])

processValues(values) # do something with the last values 
```

我遇到的问题是`processValues()`最后必须再次调用。所以这需要重复代码，这意味着有一天我可能会写一个这样的脚本而忘记把多余`processValues()`的放在最后，因此会错过最后一个 ID。它还需要存储它是否是我们的“第一次”迭代，这很烦人。

无论如何都可以在没有两个函数调用的情况下执行此操作`processValues()`（一个在每个新 ID 的循环内，一个在最后一个 ID 的循环之后）？

我能想到的唯一方法是存储行号并在最后一行检查循环。但似乎删除了我们存储行本身的“foreach”样式处理的点，而不是索引或总行数。这也适用于 perl 等其他脚本语言，在这种语言中，迭代行很常见，但`while(<FILE>)`不知道剩余的行数。是否总是需要在最后再次编写函数调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:25:11.443

如果所有出现的键都是连续的，您想查看[itertools.groupby - 一个基本示例......](http://docs.python.org/2/library/itertools.html#itertools.groupby)

```
from itertools import groupby
from operator import itemgetter

with open('somefile.txt') as fin:
    lines = ( line.split() for line in fin )
    for key, values in groupby(lines, itemgetter(0)):
        print 'Key', key, 'has values'
        for value in values:
            print value 
```

或者 - 您也可以查看使用[collections.defaultdict](http://docs.python.org/2/library/collections.html#collections.defaultdict)和 a`list`作为默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:36:54.457

它`loadtxt()`可能是这样的：

```
from numpy import loadtxt

data = loadtxt("data.txt")
ids = unique(data[:,0]).astype(int)

for id in ids:
    d = data[ data[:,0] == id ] 
    # d is a reduced (matrix) containing data for <id>
    # ....... 
    # do some stuff with d 
```

对于您的示例`print d`将给出：

```
id= 1 
d=
[[  1\.   5.]
 [  1\.   4.]
 [  1\.  10.]
 [  1\.  19.]]
id= 2 
d=
[[  2\.  15.]
 [  2\.  18.]
 [  2\.  20.]
 [  2\.  21.]]
id= 3 
d=
[[  3\.  50.]
 [  3\.  52.]
 [  3\.  55.]
 [  3\.  70.]] 
```

# java - 使用 Notepad++ 清理文本

> ID：13645111
> 
> 赞同：1
> 
> 时间：2012-11-30T12:18:55.243
> 
> 标签：java, regex, text, notepad++

我有一个推文文档，它包含这样的行：

```
RichardJ0nes -- Should I upgrade to an iPhone 5? Decisions, decisions!
AnthonyMOliva -- @AnthonyMOliva AT&T offering iPhone 5 refurbished starting at $99: Two months after making its debut, refur... http://t.co/IsPDzIrD #BBC
mittrashi -- RT @timesofindia: Apple iPhone 5S, iPad 5 already in the works? - The Times of India http://t.co/s782BHp5 
```

我想清理这个文件。首先我想清理用户名（例如：RichardJ0nes - 或@AnthonyMOliva），其次我想清理链接（例如[http://t.co/s782BHp5](http://t.co/s782BHp5)）。

应该是这样的：

```
Should I upgrade to an iPhone 5? Decisions, decisions!
AT&T offering iPhone 5 refurbished starting at $99: Two months after making its debut, refur... 
Apple iPhone 5S, iPad 5 already in the works? - The Times of India 
```

我尝试在记事本++上使用正则表达式做一些事情，但我无法清理文本

我尝试使用
查找`.*\(--\)` 替换删除第一个用户名：`\1`

但它不适用于记事本++。我该怎么办，请给我一个想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T13:10:06.597

搜索`(^\S+\s--|\bhttps?://\S+|(?:^|(?<=\s))[@#]\S+)\s?`并用空字符串替换它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T13:16:18.200

在记事本++中按`ctrl+f`，转到替换选项卡，然后在底部的**搜索模式中选择****正则表达式**，然后执行以下操作

 **1.  搜索：`.* -- (.*)$`并全部替换为`\1`
2.  搜索：`@[^ ]*` 并全部替换为空（将替换输入留空）
3.  搜索：`http[^ ]*`并全部替换为空（将替换输入留空）**

# python - 在生成器中捕获错误并在之后继续

> ID：13645112
> 
> 赞同：2
> 
> 时间：2012-11-30T12:18:55.053
> 
> 标签：python, exception-handling, try-catch, iteration

我有一个应该运行几天的迭代器。我希望捕获并报告错误，然后我希望迭代器继续。或者整个过程可以重新开始。

这是功能：

```
def get_units(self, scraper):
    units = scraper.get_units()
    i = 0
    while True:
        try:
            unit = units.next()
        except StopIteration:
            if i == 0:
                log.error("Scraper returned 0 units", {'scraper': scraper})
            break
        except:
            traceback.print_exc()
            log.warning("Exception occurred in get_units", extra={'scraper': scraper, 'iteration': i})
        else:
            yield unit
        i += 1 
```

因为`scraper`可能是许多代码变体之一，所以它不可信，我不想处理那里的错误。

但是当 中发生错误时`units.next()`，整个事情就停止了。`StopIteration`我怀疑是因为迭代器在其中一个迭代失败时抛出 a 。

这是输出（只有最后几行）

```
[2012-11-29 14:11:12 /home/amcat/amcat/scraping/scraper.py:135 DEBUG] Scraping unit <Element div at 0x4258c710>
[2012-11-29 14:11:13 /home/amcat/amcat/scraping/scraper.py:138 DEBUG] .. yields article
[2012-11-29 14:11:13 /home/amcat/amcat/scraping/scraper.py:138 DEBUG] .. yields article
[2012-11-29 14:11:13 /home/amcat/amcat/scraping/scraper.py:138 DEBUG] .. yields article
[2012-11-29 14:11:13 /home/amcat/amcat/scraping/scraper.py:138 DEBUG] .. yields article
[2012-11-29 14:11:13 /home/amcat/amcat/scraping/scraper.py:138 DEBUG] .. yields article
[2012-11-29 14:11:13 /home/amcat/amcat/scraping/scraper.py:138 DEBUG] .. yields article
[2012-11-29 14:11:13 /home/amcat/amcat/scraping/scraper.py:138 DEBUG] .. yields article
[2012-11-29 14:11:13 /home/amcat/amcat/scraping/scraper.py:138 DEBUG] .. yields article
[2012-11-29 14:11:13 /home/amcat/amcat/scraping/scraper.py:138 DEBUG] .. yields article
[2012-11-29 14:11:13 /home/amcat/amcat/scraping/scraper.py:138 DEBUG] .. yields article
[2012-11-29 14:11:13 /home/amcat/amcat/scraping/scraper.py:138 DEBUG] .. yields article Counter-Strike: Global Offensive Update Released
Traceback (most recent call last):
  File "/home/amcat/amcat/scraping/controller.py", line 101, in get_units
    unit = units.next()
  File "/home/amcat/amcat/scraping/scraper.py", line 114, in get_units
    for unit in self._get_units():
  File "/home/amcat/scraping/games/steamcommunity.py", line 90, in _get_units
    app_doc = self.getdoc(url,urlencode(form))
  File "/home/amcat/amcat/scraping/scraper.py", line 231, in getdoc
    return self.opener.getdoc(url, encoding)
  File "/home/amcat/amcat/scraping/htmltools.py", line 54, in getdoc
    response = self.opener.open(url, encoding)
  File "/usr/lib/python2.7/urllib2.py", line 406, in open
    response = meth(req, response)
  File "/usr/lib/python2.7/urllib2.py", line 519, in http_response
    'http', request, response, code, msg, hdrs)
  File "/usr/lib/python2.7/urllib2.py", line 444, in error
    return self._call_chain(*args)
  File "/usr/lib/python2.7/urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.7/urllib2.py", line 527, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
HTTPError: HTTP Error 500: Internal Server Error
[2012-11-29 14:11:14 /home/amcat/amcat/scraping/controller.py:110 WARNING] Exception occurred in get_units

...code ends... 
```

那么，当错误发生时，如何防止迭代停止呢？

编辑：这是 get_units() 中的代码

```
def get_units(self):
    """                                                                                                                                                                                                                                  
    Split the scraping job into a number of 'units' that can be processed independently                                                                                                                                                  
    of each other.                                                                                                                                                                                                                       

    @return: a sequence of arbitrary objects to be passed to scrape_unit                                                                                                                                                                 
    """
    self._initialize()
    for unit in self._get_units():
        yield unit 
```

这是一个简化的 _get_units()：

```
INDEX_URL = "http://www.steamcommunity.com"

def _get_units(self):
  doc = self.getdoc(INDEX_URL)  #returns a lxml.etree document

  for a in doc.cssselect("div.discussion a"):
    link = a.get('href')
    yield link 
```

编辑：问题跟进：[更改函数中的每个 for 循环以在每次失败迭代后自动执行错误处理](https://stackoverflow.com/questions/13648200/alter-for-loops-to-have-continue-and-error-handling-executed-automatically-after)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:29:42.797

`StopIteration``next()`当不再有下一项时，由生成器的方法引发。它与生成器/迭代器内部的错误无关。

需要注意的另一件事是，根据迭代器的类型，它可能无法在异常后恢复。如果迭代器是一个带有`next`方法的对象，它将起作用。但是，如果它实际上是生成器，则不会。

据我所知，这是您的迭代在`units.next()`. ie`units.next()`失败了，下次你调用它时，它无法恢复，它说它是通过抛出`StopIteration`异常来完成的。

基本上，您必须向我们展示其中的代码，`scraper.get_units()`以便我们了解为什么在单次迭代中出现错误后循环无法继续。如果`get_units()`实现为生成器函数，那就很清楚了。如果不是，则可能是其他原因阻止它恢复。

**更新：**解释生成器函数是什么：

```
class Scraper(object):
    def get_units(self):
        for i in some_stuff:
            bla = do_some_processing()
            bla *= 2  # random stuff
            yield bla 
```

现在，当您调用 时`Scraper().get_units()`，它不会运行整个函数，而是返回一个生成器对象。调用`next()`它，将执行到第一个`yield`。等等。现在，如果 ANYWHERE 内部发生错误`get_units`，它就会被污染，可以这么说，并且下次你调用 时`next()`，它会 raise `StopIteration`，就好像它已经用完了给你的东西一样。

强烈推荐阅读[http://www.dabeaz.com/generators/](http://www.dabeaz.com/generators/)（和[http://www.dabeaz.com/coroutines/ ）。](http://www.dabeaz.com/coroutines/)

**UPDATE2：**一个可能的解决方案[https://gist.github.com/4175802](https://gist.github.com/4175802)

# javascript - 调用 Jquery 函数以在单击 href 时启动悬停效果

> ID：13645114
> 
> 赞同：0
> 
> 时间：2012-11-30T12:18:57.890
> 
> 标签：javascript, jquery, hover

好的，对不起，如果我误解或误解了任何东西，但我对 jQuery 和 javascript 还很陌生。

我在 php 中建立了一个商店，其中一个元素是一个 jQuery 购物车，它在所有页面中都是“必需的”，因此它始终在页面上。我在页面上包含以使其工作的 jQuery 如下：

```
$(document).ready(function(){
    $("#cbox").hover(function(){ 

         $(this).stop(true,false)
         .animate({right:  0}, 500); },
         function(){               

            $("#cbox").stop(true,false).animate({right: -120}, 500); });
    }); 
```

基本上，购物车位于页面的右侧，悬停时会弹出/滑出。

我想在用户将项目添加到购物篮时以编程方式弹出/滑出，作为一种事件通知。理想情况下使用`onclick`.

我曾尝试调用各个部分，但由于它是一个文档就绪的整体功能，我正在为我`onclick`应该说什么而苦苦挣扎。我什至不确定它是否会起作用。

任何人都可以给我一个正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:43:32.940

```
$(document).ready(function(){
    $("#cbox").hover(function()
    { 

         $(this).stop(true,false)
                //.animate({right:  0}, 500); },function()<-- invalid syntax: leave out parentheses and semi-colon:
                .animate({right:  0}, 500,function()
                {//no need for the selecot here
                    $(this).stop(true,false).animate({right: -120}, 500);
                });
    });
    $('.storeItems').on('click',function()
    {//best use on for AJAX content, for example
        $('#cbox').trigger('hover');/
    });
 });//you were missing this closing 
```

There's one suggestion I'd like to make: the `.on('click'` handler has a jQuery selector in it. This means that you'll scan the DOM on each click event for that `#cbox` element. You can make your code more efficient by using a closure here:

```
 $('.storeItems').on('click',(function(cbox)
    {
        return function()
        {//cbox is a reference to the cart element, in memory so no need to scan the dom over and over
            cbox.trigger('hover');
        };
    }($('#cbox'))));//pass the reference here 
```

I know, there's a lot of `function`'s and even more parentheses and brackets. You don't have to use this approach, but just keep this in the back of your mind as you go about learning more JS: you'll start using closures sooner or later, I promise :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:22:05.217

单击另一个项目时调用悬停功能是众多解决方案之一

```
$(document).ready(function(){
     $("#cbox").hover(function(){ 

         $(this).stop(true,false)
         .animate({right:  0}, 500); },
          function(){               

              $("#cbox").stop(true,false).animate({right: -120}, 500); });
     });

     $('.itemClicked').click(function(e){

           $('#cbox').trigger('hover');

     }); 
```

});

# php - 将少量代码应用于域上的每个页面

> ID：13645116
> 
> 赞同：0
> 
> 时间：2012-11-30T12:19:02.210
> 
> 标签：php, html, css

我在我的公司网站上设置了一个子域。我希望在所有页面上显示少量代码（如绝对定位的 DIV），而不是每个页面实际包含代码本身。我似乎记得过去地理城市曾经做过这样的事情。

因为我想在子域的背景中放一个小图像和一个标题或其他东西，这将在每个页面上出现。它看起来真的很专业。

任何人都知道这是否可能，或者我是否在做一个做不到的梦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:24:34.997

您可以使用[auto_prepend_file](http://php.net/manual/en/ini.core.php#ini.auto-prepend-file "auto_prepend_file")或[auto_append_file](http://php.net/manual/en/ini.core.php#ini.auto-append-file "auto_append_file") php.ini 指令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:24:05.247

如果我正确理解您的要求...

您可以将此 div 的标记写在一个文件中...将此文件包含在每个 php 文件中，该文件为浏览器输出标记以显示某些页面...

谢谢

# ios - Ios 中的图像处理

> ID：13645119
> 
> 赞同：2
> 
> 时间：2012-11-30T12:19:07.490
> 
> 标签：ios, image-processing

我是 iOS 新手，我正在视图上尝试图像。有问题的图像很大，并且是从 URL 获取的，因此加载视图需要相当长的时间（几乎 5-10 秒）。我不想显示占位符并进行一些异步调用来更新图像；相反，我希望图像处理类似于它在 Facebook iOS 应用程序中的实现方式：大图像起初显示模糊，在加载时慢慢变成原始图像。有谁知道如何在 iOS 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:29:42.673

您所说的“朦胧”图像是“渐进式” jpeg。您可以将任意图像重新格式化为渐进式 jpeg（在服务器端），然后使用 Image I/O 方法显示部分版本。您可以使用多种技术 - 请参阅[此之前的帖子](https://stackoverflow.com/q/4741486/1633251)以获取更多指示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:27:18.313

您可以先下载并显示缩略图视图，或者在下载大图像时仅显示临时加载图像。看看用于异步图像下载的[ASIHTTP 。](http://allseeing-i.com/ASIHTTPRequest/)如果你花时间去谷歌，还有其他几个可用的框架和大量的示例代码。

# python - 烧杯会话中的 last_accessed 时间始终无，但 _accessed_time 正在改变

> ID：13645120
> 
> 赞同：1
> 
> 时间：2012-11-30T12:19:07.860
> 
> 标签：python, mod-wsgi, wsgi, beaker

我`beakers WSGI SessionMiddleware`用来管理浏览器和应用程序之间的会话。我试图区分何时首次访问会话以针对任何进一步的请求。

从文档看来，WSGI 环境中提供了两个有用的值， `["beaker.session"].last_accessed` 并且`["beaker.session"]["_accessed_time"]`

但是，在重复请求`["beaker.session"].last_accessed`上总是返回`None`，而时间戳值`["beaker.session"]["_accessed_time"]`可以看出随着每个请求而增加。

每个请求都执行一个`["beaker.session"].save()`-我尝试`auto=True`了会话中设置的各种组合，并使用了`.save() / .persist()`，但没有乐趣： `.last_accessed`总是`None`.

我没有使用会话来实际保存任何数据，只是为了管理`session.id`. （我正在使用“cookie”的会话类型）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:49:50.553

事实证明，这种行为归结为通过 apache 进行的多处理。

它是通过使用外部存储来管理首次看到会话 ID 时的跟踪，并维护我自己的“last_accessed_time”等来解决的。

# c# - 如何在 C# 中加载带密码的 Excel 文件

> ID：13645122
> 
> 赞同：2
> 
> 时间：2012-11-30T12:19:14.610
> 
> 标签：c#, excel, passwords, xls

我在 C# 项目上工作

我使用以下代码在数据集上导入 XLS 或 XLSX 文件。

```
public static DataSet ImportExcelXLS(string FileName, bool hasHeaders)
{
    string HDR = hasHeaders ? "Yes" : "No";
    string strConn;
    if (FileName.Substring(FileName.LastIndexOf('.')).ToLower() == ".xlsx")
    {
            strConn = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + FileName + ";Extended Properties=\"Excel 12.0;HDR=" + HDR + ";IMEX=0\"";
    }
    else
    {
            strConn = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + FileName + ";Extended Properties=\"Excel 8.0;HDR=" + HDR + ";IMEX=0\"";
    }

    DataSet output = new DataSet();

    using (OleDbConnection conn = new OleDbConnection(strConn))
    {
        conn.Open();

        DataTable schemaTable = conn.GetOleDbSchemaTable(
            OleDbSchemaGuid.Tables, new object[] { null, null, null, "TABLE" });

        foreach (DataRow schemaRow in schemaTable.Rows)
        {
            string sheet = schemaRow["TABLE_NAME"].ToString();

            if (!sheet.EndsWith("_"))
            {
                try
                {
                    OleDbCommand cmd = new OleDbCommand("SELECT * FROM [" + sheet + "]", conn);
                    cmd.CommandType = CommandType.Text;

                    sheet = sheet.Replace("$", "");
                    DataTable outputTable = new DataTable(sheet);
                    output.Tables.Add(outputTable);
                    new OleDbDataAdapter(cmd).Fill(outputTable);
                }
                catch (Exception ex)
                {
                    throw new Exception(ex.Message + string.Format("Sheet:{0}.File:F{1}", sheet, FileName), ex);
                }
            }
        }
    }
    return output;
} 
```

此代码可以正确加载没有密码的 Excel 文件。但是当 Run For Load a File With password Show 时出现错误：

> 无法启动您的应用程序。工作组信息文件丢失或被其他用户以独占方式打开。

现在如何更改加载加密文件的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:25:27.477

请：使用这个库：

```
using Microsoft.Office.Interop.Excel 
```

请提供密码：

```
WorkbookObject.Password = password; 
```

请更改 ConnString：

```
string conn = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + s + ";Password=password;Extended Properties='Excel 8.0;HDR=YES'"; 
```

在这里，你的答案是：

```
 if (FileName.Substring(FileName.LastIndexOf('.')).ToLower() == ".xlsx")
 {
     strConn = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + FileName + ";Password=password;Extended Properties=\"Excel 12.0;HDR=" + HDR + ";IMEX=0\"";
 }
 else
 {
     strConn = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + FileName + ";Password=password;Extended Properties=\"Excel 8.0;HDR=" + HDR + ";IMEX=0\"";
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-15T07:21:03.887

试试这个代码：

```
strConn = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + FileName + ";Password=password;Extended Properties=\"Excel 8.0;HDR=" + HDR + ";IMEX=0\""; 
```

但仍然出现异常：

> 无法启动您的应用程序。工作组信息文件丢失或被其他用户以独占方式打开。

# cordova - Phonegap App检测语言和国家

> ID：13645126
> 
> 赞同：2
> 
> 时间：2012-11-30T12:19:29.390
> 
> 标签：cordova

我想编写一个多语言/多国家应用程序，我想知道检测设备系统语言和国家的最佳解决方案是什么，用户在 Phonegap 中打开应用程序的位置是什么？

该应用程序将是一个搜索引擎，并且信息是针对特定国家/地区的。这意味着，如果有人在西班牙打开应用程序，则应用程序需要选择国家 ES，如果设备已选择 ES 作为语言，则应加载 ES GUI。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T12:26:28.930

你看过文档吗？有一个关于这个的部分 - 全球化：[http ://docs.phonegap.com/en/2.2.0/cordova_globalization_globalization.md.html#Globalization](http://docs.phonegap.com/en/2.2.0/cordova_globalization_globalization.md.html#Globalization)

您还可以找到与 SIM 卡相关的有用的cordova [-plugin-sim 。](https://github.com/pbakondy/cordova-plugin-sim)`countryCode`

全球化插件提供由手机用户修改的值（用户偏好），而 cordova-plugin-sim 提供由 SIM 卡运营商设置的值（用户无法更改它们）。

# iphone - SDWebImage 损坏的图像

> ID：13645128
> 
> 赞同：5
> 
> 时间：2012-11-30T12:19:31.663
> 
> 标签：iphone, objective-c, ios, ipad, sdwebimage

我正在使用[SDWebImage](https://github.com/rs/SDWebImage)（2.7.3 框架）并且收到损坏的图像，我无法完全理解问题所在。如果是代码（内存...）

（注意：我使用项目而不是框架得到了同样的错误`SDWebImage`。我正在实现“自动释放”和其他类型的内存管理。这个问题出现在设备（iPad）上，但不在模拟器中）

![在此处输入图像描述](../Images/addbea1289c001fc4c6115b2a4c171e0.png)![在此处输入图像描述](../Images/6ea1ce24832e3dc4a33a2dc258dc75a2.png)

```
 __block CALayer *layerCover = [[CALayer alloc] init];
    layerCover.frame = CGRectMake(3, 3, COVER_WIDTH_IPAD_SMALL, COVER_HEIGHT_IPAD_SMALL);
    [btn.layer addSublayer:layerCover];

    [_scroll addSubview:btn];
    [btn release];

    //request or load Vods Images
    [[SDWebImageManager sharedManager] downloadWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@M", vod.cover]]
                                              delegate:self options:SDWebImageProgressiveDownload success:^(UIImage *image, BOOL cached) {
                                                  if (image) {
                                                      layerCover.contents = (id)image.CGImage;
                                                  }
                                                  [layerCover release];
                                              } failure:^(NSError *error) {
                                                  [layerCover release];
                                              }]; 
```

//另一种

![在此处输入图像描述](../Images/42010ecd337f07c656c4d6023cf19d9d.png)

```
UIImage * imageTv = [UIImage imageNamed:@"bgDefaultTvImage.png"];
UIImageView * bgTvImage = [[UIImageView alloc] initWithFrame:CGRectMake(startX, 20, imageTv.size.width, imageTv.size.height)];
[bgTvImage setImage:imageTv];

CGFloat sizeWithIcon = imageTv.size.width;
CGFloat sizeHeightIcon = imageTv.size.height;
__block UIImageView * bgImageicon = [[UIImageView alloc] initWithFrame:CGRectMake((bgTvImage.frame.size.width-sizeWithIcon)/2,
                                                                          (bgTvImage.frame.size.height-sizeHeightIcon)/2,
                                                                          sizeWithIcon,
                                                                          sizeHeightIcon)];
bgImageicon.contentMode = UIViewContentModeScaleAspectFit;
[bgTvImage addSubview:bgImageicon];
[tvTopView addSubview:bgTvImage];

/*
 * Request ProgramImage
 */
[[SDWebImageManager sharedManager] downloadWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@&width=300",program.ProgramImage.imageURL]]
                                              delegate:self options:SDWebImageProgressiveDownload success:^(UIImage *image, BOOL cached) {
                                                  if (image) {
                                                      iconCanal = image;
                                                      [bgImageicon setImage:iconCanal];
                                                  }
                                                  [bgImageicon release];
                                              }failure:^(NSError *error) {
                                                  [bgImageicon release];
                                              }]; 
```

Xcode 日志：

```
<Error>: ImageIO: JPEG Corrupt JPEG data: bad Huffman code
<Error>: ImageIO: JPEG Corrupt JPEG data: premature end of data segment 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T18:38:41.817

好像是`SDWebImageProgressiveDownload`flag的问题。尝试禁用它，例如这样：

```
[[SDWebImageManager sharedManager] downloadWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@&width=300",program.ProgramImage.imageURL]]
                                          delegate:self options:0 success:^(UIImage *image, BOOL cached) {
                                              if (image) {
                                                  iconCanal = image;
                                                  [bgImageicon setImage:iconCanal];
                                              }
                                              [bgImageicon release];
                                          }failure:^(NSError *error) {
                                              [bgImageicon release];
                                          }]; 
```

# javascript - 在两个页面html之间传递参数

> ID：13645131
> 
> 赞同：2
> 
> 时间：2012-11-30T12:19:37.840
> 
> 标签：javascript

我想将值传递到第 2 页（对话框页面）。但它告诉我错误

> 错误：无法识别的表达式

如果我删除 `id_travail="+Id+"'` 一切正常。

```
$('#header-left-container').prepend(results.rows.item(i).LibelleTypeTravail +"" +
"<br>" +
"<a href='#page_dialog?id_travail="+Id+"'  data-rel='dialog'>" +
"<img src='../js/images/add.png' id='img_go' class='upvote' name="+results.rows.item(i).IdTypeTravail+" ></a>" +
"<textarea rows='6'  cols='60' id='"+Id+"'   name='"+results.rows.item(i).LibelleTypeTravail+"'>" +
"</textarea><br><br>" ).trigger("create"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:50:54.667

```
"<a href='#page_dialog?id_travail='"+Id+"'  data-rel='dialog'>" + 
```

这会导致无效的 url 散列：（`"#page_dialog?id_travail=123"`
实际上，任何散列都可以是“有效的”，但在这种情况下，您可能不希望`?id_travail=123`将其添加到散列中，而是将其作为参数添加到 url。）
您需要传递url 的哈希 ( `#`) 之前的 url 参数：

```
"<a href='?id_travail='"+Id+"#page_dialog'  data-rel='dialog'>" + 
```

# mysql - ORDER BY 导致 MySQL 查询变得非常慢

> ID：13645132
> 
> 赞同：3
> 
> 时间：2012-11-30T12:19:52.503
> 
> 标签：mysql, sql, optimization, sql-order-by

我有以下查询：

```
SELECT * 
FROM   products 
   INNER JOIN product_meta 
           ON products.id = product_meta.product_id 
   JOIN sales_rights 
     ON product_meta.product_id = sales_rights.product_id 
WHERE  ( products.categories REGEXP '[[:<:]]5[[:>:]]' ) 
   AND ( active = '1' ) 
   AND ( products.show_browse = 1 ) 
   AND ( product_meta.software_platform_mac IS NOT NULL ) 
   AND ( sales_rights.country_id = '240' 
          OR sales_rights.country_id = '223' ) 
GROUP  BY products.id 
ORDER  BY products.avg_rating DESC
LIMIT  0, 18; 
```

在省略`ORDER BY`部分的情况下运行查询，查询运行时间约为 90 毫秒，`ORDER BY`部分和查询需要约 8 秒。

我浏览了 SO 并发现其原因可能是在返回所有数据之前执行排序，而不是我们应该`ORDER BY`在结果集上运行？（参见这篇文章：[使用 ORDER BY 时的慢查询](https://stackoverflow.com/questions/884661/slow-query-when-using-order-by)）

但我无法弄清楚我如何做到这一点的明确方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:34:34.953

> 我浏览了 SO 并发现其原因可能是在返回所有数据之前执行排序，而不是我们应该在结果集上运行 ORDER BY 吗？

我觉得这很难相信，但如果这确实是问题所在，我*认为*你需要做这样的事情。（注意我把括号放在哪里。）

```
select * from
(
  SELECT products.id, products.avg_rating 
  FROM   products 
  INNER JOIN product_meta 
          ON products.id = product_meta.product_id 
  JOIN sales_rights 
    ON product_meta.product_id = sales_rights.product_id 
  WHERE  ( products.categories REGEXP '[[:<:]]5[[:>:]]' ) 
   AND ( active = '1' ) 
   AND ( products.show_browse = 1 ) 
   AND ( product_meta.software_platform_mac IS NOT NULL ) 
   AND ( sales_rights.country_id = '240' 
          OR sales_rights.country_id = '223' ) 
  GROUP  BY products.id 
) as X
ORDER  BY avg_rating DESC
LIMIT  0, 18; 
```

此外，编辑您的问题并包含指向该建议的链接。我想我们中的许多人都会从阅读中受益。

* * *

**额外的，可能不相关的问题**

WHERE 子句中使用的每一列都应该以某种方式建立索引。*对于这个特定的查询，*多列索引可能会执行得更好。

products.categories 列似乎存储了您使用正则表达式过滤的多个值。在单个列中存储多个值通常是一个坏主意。

[MySQL`GROUP BY`是不确定](http://dev.mysql.com/doc/refman/5.6/en/group-by-extensions.html)的。使用 a 的标准 SQL 语句`GROUP BY`可能会返回更少的行，并且可能会更快地返回它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T23:44:23.213

此查询实例中的问题是，通过在查询中使用`GROUP BY`and ，如果and表达式不同`ORDER BY`，MySQL 将无法使用索引。`GROUP BY``ORDER BY`

**相关阅读：**

*   [http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)
*   [http://mysqldba.blogspot.co.uk/2008/06/how-to-pick-indexes-for-order-by-and.html](http://mysqldba.blogspot.co.uk/2008/06/how-to-pick-indexes-for-order-by-and.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T13:56:00.530

如果可以，您可能希望索引您的 ID 列，以便查询运行得更快。这是 DBA 级别的解决方案，而不是 SQL 解决方案 - 调整数据库将有助于整体性能。

# php - 当用户未登录时，如何在 PHP 上计算每小时的数字？

> ID：13645134
> 
> 赞同：0
> 
> 时间：2012-11-30T12:19:55.140
> 
> 标签：php, javascript, html, mysql

我想创建一个应用程序，为用户提供“虚拟硬币”，大约每小时 100 个，如果用户注销，我如何继续以每个用户大约 100 个每小时添加虚拟硬币？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:23:26.213

您可以使用每小时执行一次的 cronjob 并调用一个脚本来为每个用户添加 100 个硬币。

编辑：如果您不能或不想使用 cj，您可以使用每个用户的下一次登录来计算它。只需存储上次登录的时间戳并计算它。

这是一个带有脚本的示例：

假设上次登录：11-29-2012 00:00:00 时间戳：1354143600

假设新登录：11-30-2012 05:10:00 时间戳：1354248600

php代码：

```
<?php
  $t1 = 1354143600;
  $t2 = 1354248600;
  $diff = $t2-$t1;

  // calculate hours
  $hours = $diff/60/60;
  // coins
  $coins = $hours*100;

  print $hours . ' hours, ' . $coins . ' coins'; 
```

输出：

29.166666666667 小时，2916.6666666667 个硬币

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:27:08.237

您可以存储用户注销的时间。然后计算经过的时间并在用户再次登录时添加硬币。如果您需要为所有用户同时添加硬币，无论他们是否登录，那么我猜 cron 工作可能会更好。

# jquery - 从 ajax 请求中获取“0”

> ID：13645135
> 
> 赞同：0
> 
> 时间：2012-11-30T12:19:57.590
> 
> 标签：jquery, wordpress

I have a drop down menu with taxonomy terms (thrid level terms), and when a term is selected I want to show its parent term through an ajax request. 但由于某种原因，我得到了“0”的值而不是父项值。有人可以帮助检查我的代码，看看我在这里缺少什么：

```
$("select#districts").change(function() {
        $.ajax({
            url: '/metrics/wp-admin/admin-ajax.php',
            type: 'GET',
            data: {action: 'county_request', term_id : $(this).children(":selected").prop("value")},
            dataType: 'html',
            success: function(data){
                $('#district-county').html(data);
            }
        });
}); 
```

// 获取父项

```
function ajax_handle_request(){
    $output = ajax_get_parent_term_by_id($_REQUEST['term_id']);
    return $output;
}
add_action('wp_ajax_nopriv_county_request', 'ajax_handle_request');
add_action('wp_ajax_county_request', 'ajax_handle_request');

function ajax_get_parent_term_by_id($term_id){
    $parent_term  = get_term_by( 'id', $term_id->parent, 'state');
    return $parent_term;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:14:25.100

事实证明 ajax_get_parent_term_by_id 函数没有返回值，我将其更改为以下内容，现在它可以工作了：

```
function ajax_get_parent_term_by_id($term_id){
    $term = get_term_by( 'id', $term_id, 'taxonomy' );
    $parent_term = get_term($term->parent, 'taxonomy' );
    return $parent_term;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:32:36.727

您应该输出结果，然后执行`die()`or`exit()`以终止脚本执行。考虑到这一点，您的代码应如下所示：

```
// get parent terms

function ajax_handle_request(){
    $output = ajax_get_parent_term_by_id($_REQUEST['term_id']);
    echo $output && ! is_wp_error( $output ) ? $output->name : '';
    exit();
}
add_action('wp_ajax_nopriv_county_request', 'ajax_handle_request');
add_action('wp_ajax_county_request', 'ajax_handle_request');

function ajax_get_parent_term_by_id($term_id){
    $parent_term  = get_term_by( 'id', $term_id->parent, 'state');
    return $parent_term;
} 
```

这将返回所请求术语的名称。如果您想在 中显示其他内容`#district-county`，只需将 更改`echo $output && ! is_wp_error( $output ) ? $output->name : '';`为您想要显示的任何内容。

# drupal - Drupal 7 站点。奇怪的错误

> ID：13645137
> 
> 赞同：0
> 
> 时间：2012-11-30T12:20:00.460
> 
> 标签：drupal

我正在在线开发一个drupal站点。托管商在他们的服务器上发生了“小型 ddos​​ 攻击”，并要求我恢复我最近的备份。我这样做了，但正面的 ddblock 视频不起作用，我的所有视图继续显示“所有更改都暂时存储......”。即使我保存它们，我也会收到“您的视图已保存”的消息，但另一条消息继续显示。我现在已经恢复了之前的备份并且没有任何变化。谁能解释一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:52:38.397

可能有很多东西：

*   你清除缓存了吗？
*   您是否在创建备份的日期之后更新了模块？
*   备份实际上是否完整，是否正确导入？
*   您是否尝试在本地开发机器上设置 Drupal 网站以排除“小型 ddos​​ 攻击”主机的问题？:) 实际上这将是我清除缓存后的第二个建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-05T07:43:12.537

按照 chrizzler 的回答 *您是否尝试在本地开发机器上设置您的 Drupal 网站...？*本来是我的第一个答案。

您可以使用[GIT](http://git-scm.com/)来保存您网站的状态，具体取决于您网站的大小，您可以使用[备份和迁移](http://drupal.org/project/backup_migrate)模块来备份/恢复您的数据库。

检查错误没有出现在您的本地开发站点上，然后您可以使用 GIT 和您可能拥有的任何数据库备份安全地更新您的在线版本。

如果在线出现问题，可能不是 Drupal 问题[

# php - Pear/Quickform2：Quickform2 中是否有类似“setRequiredNote”的方法？

> ID：13645142
> 
> 赞同：0
> 
> 时间：2012-11-30T12:20:36.480
> 
> 标签：php, forms, pear, quickform

我使用了`setRequiredNote`HTML_QuickForm 的方法，但在 QuickForm2 中找不到类似的方法。
有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:19:59.173

它现在在渲染器中，选项“required_note”：

```
$renderer->setOption('required_note', '* This fields are required'); 
```

见[http://pear.php.net/manual/en/package.html.html-quickform2.renderers.php](http://pear.php.net/manual/en/package.html.html-quickform2.renderers.php)

# r - R - 使用 grep 和 gsub 在同一（字符）向量元素中返回多个匹配项

> ID：13645143
> 
> 赞同：0
> 
> 时间：2012-11-30T12:20:36.810
> 
> 标签：r, regex

想象一下，我们想在下面的字符串中找到所有的 FOO 和后续数字，并将它们作为向量返回（抱歉不可读，我想指出 FOO 之前和之后没有规则模式）：

```
xx <- "xasdrFOO1921ddjadFOO1234dakaFOO12345ndlslsFOO1643xasdf" 
```

我们可以使用它来找到其中一个（取自[1](https://stackoverflow.com/questions/2969315/rhow-to-get-grep-to-return-the-match-rather-than-the-whole-string)）

```
gsub(".*(FOO[0-9]+).*", "\\1", xx)
[1] "FOO1643" 
```

但是，我想将它们全部作为向量返回。

我想到了一种使用 strplit() 和 gregexpr() 的复杂方法——但我觉得有更好（更简单）的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T12:27:26.447

您可能对以下内容感兴趣`regmatches`：

```
> regmatches(xx, gregexpr("FOO[0-9]+", xx))[[1]]
[1] "FOO1921"  "FOO1234"  "FOO12345" "FOO1643" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T13:00:58.850

```
xx <- "xasdrFOO1921ddjadFOO1234dakaFOO12345ndlslsFOO1643xasdf"
library(stringr)
str_extract_all(xx, "(FOO[0-9]+)")[[1]]
#[1] "FOO1921"  "FOO1234"  "FOO12345" "FOO1643" 
```

这也可以采用字符串向量，并且数学将在列表元素中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T13:47:32.987

略短的版本。

```
library(gsubfn)
strapplyc(xx,"FOO[0-9]*")[[1]] 
```

# c# - 为未处理的枚举值抛出的正确异常是什么？

> ID：13645149
> 
> 赞同：43
> 
> 时间：2012-11-30T12:21:10.450
> 
> 标签：c#, .net, exception

这是我[关于未处理的枚举案例的另一个问题](https://stackoverflow.com/questions/13644737/what-is-the-correct-exception-to-throw-for-an-unhandled-switch-case)的另一个案例，建议我将其作为一个单独的问题提出。

假设我们有`SomeEnum`一个 switch 语句来处理它，如下所示：

```
enum SomeEnum
{
  One,
  Two
}

void someFunc()
{
  SomeEnum value = someOtherFunc();
  switch(value)
  {
     case One:
       ... break;
     case Two:
       ... break;
     default:
         throw new ??????Exception("Unhandled value: " + value.ToString());    
  }
} 
```

如您所见，我们处理所有可能的枚举值，但仍保留默认值，以防添加新成员时抛出异常，并且我们希望确保我们知道丢失的处理。

我的问题是：在您想要通知给定代码路径未处理/实现或不应该访问的情况下，正确的例外是什么？我们曾经使用过，`NotImplementedException`但它似乎不合适。我们的下一个候选人是`InvalidOperationException`，但这个词听起来不对。什么是正确的，为什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-07-15T15:54:37.633

就个人而言，我为我的项目添加了一个自定义异常：

```
public class UnexpectedEnumValueException<T> : Exception
{
    public UnexpectedEnumValueException( T value )
        : base( "Value " + value + " of enum " + typeof( T ).Name + " is not supported" )
    {
    }
} 
```

然后我可以根据需要使用它：

```
enum SomeEnum
{
  One,
  Two
}

void someFunc()
{
  SomeEnum value = someOtherFunc();
  switch(value)
  {
   case SomeEnum.One:
    ... break;
   case SomeEnum.Two:
    ... break;
   default:
      throw new UnexpectedEnumValueException<SomeEnum>(value);    
  }
} 
```

这样，我可以搜索“UnexpectedEnumValueException<SomeEnum>”，例如，当我向 SomeEnum 添加新值并且我想找到所有可能受更改影响的地方时。错误消息比一般异常要清楚得多。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-11-30T12:30:45.417

因为它是一个失败的内部操作（产生无效的东西），[`InvalidOperationException`](http://msdn.microsoft.com/en-us/library/system.invalidoperationexception.aspx)所以是要走的路。

文档只是说：

> 当方法调用对于对象的当前状态无效时引发的异常。

这大致合适，因为对象的当前状态导致 的返回值无效`someOtherFunc`，因此`someFunc`应该首先避免调用 。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-11-30T12:25:34.263

尝试使用[InvalidEnumArgumentException 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.invalidenumargumentexception.aspx)

```
void someFunc()
{
  SomeEnum value = someOtherFunc();
  switch(value)
  {
     case One:
       ... break;
     case Two:
       ... break;
     default:
          throw new InvalidEnumArgumentException(); 
  }
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-11-30T12:30:12.050

我认为这取决于枚举所代表的语义。

[如果InvalidOperationException](http://msdn.microsoft.com/en-us/library/system.invalidoperationexception.aspx)表示对象状态，则它是合适的。

[如果NotSupportedException](http://msdn.microsoft.com/en-us/library/system.notsupportedexception.aspx)表示不受支持的应用程序功能，则它是合适的。

[NotImplementedException](http://msdn.microsoft.com/en-us/library/system.notimplementedexception.aspx)适用于当前未实现但可能在未来版本中的应用程序功能。

...

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-11-30T12:30:35.790

开关盒的 ReSharper 命题：

```
switch(parameter)
{
   default:
      throw new ArgumentOutOfRangeException("parameter");
} 
```

但它可能不适合您的需求，在这种情况下，您可以定义一个自定义异常类型，了解在此函数中执行的操作：SomeEnumOutOfRangeException...

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-30T12:37:39.420

如果添加了一个新值而您忘记在某处处理它，则这是一个编程错误，或者是Eric Lippert 所说的[Boneheaded Exception 。](http://blogs.msdn.com/b/ericlippert/archive/2008/09/10/vexing-exceptions.aspx)我创建自己的`BoneheadedException`类，每当我检测到没有 FCL 异常类型更适合的编程错误时，我都会抛出该类。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-12T21:06:03.910

在这种情况下，我尝试做的是使用字典而不是`switch`语句。（一般来说，像这样的映射由字典更好地定义；我几乎认为`switch`语句是自动的代码气味，因为总是或几乎总是有更好的方法来组织这样的映射。）

如果您使用字典，那么如果您尝试使用尚未考虑的值来索引您的字典，您将得到一个`KeyNotFoundException`，并且不再有理由问“在默认情况下我该怎么做？” .

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-30T12:33:58.450

这种情况实际上是合同失败，不一定特定于枚举。如果你不能使用代码契约，你可以创建自己的异常类型并抛出它。

```
case One:
   ... break;
 case Two:
   ... break;
 default:
    throw new ContractViolationException("Invalid enum"); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-09-27T18:01:02.383

这些天我写了两个自定义异常：`UnexpectedValueException`和`UnexpectedTypeException`. 在我看来，这些似乎是非常有价值的例外，因为一旦您发现意外（即假定不存在）值或类型的发生，您应该尽可能地抛出有意义的消息。

```
class UnexpectedValueException : Exception {
   public UnexpectedValueException(object pValue)
   : base($"The value '{pValue}' of type '{pValue?.GetType().ToString() ?? "<null>"}' was not expected to exist.") {
   }
}

enum SomeEnum {
   One,
   Two,
   Three
}

void someFunc() {
   SomeEnum value = someOtherFunc();

   switch (value) {
      case One: ... break;
      case Two: ... break;
      default: throw new UnexpectedValueException(value);    
   }
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-11-10T15:21:36.143

我决定使用的是`ArgumentOutOfRangeException`受默认消息启发的自定义错误消息`InvalidEnumArgumentException`（我不喜欢使用它，因为它在 System.ComponentModel 内部）：

> 参数 '{nameof(theArgument)}' ({theArgument}) 的值对于枚举类型 '{nameof(TheEnumType)}' 无效。

这是它的样子：

```
return level switch
{
    LogEventLevel.Verbose => "VERBOSE",
    LogEventLevel.Debug => "DEBUG",
    LogEventLevel.Information => "INFO",
    LogEventLevel.Warning => "WARN",
    LogEventLevel.Error => "ERROR",
    LogEventLevel.Fatal => "FATAL",
    _ => throw new ArgumentOutOfRangeException(nameof(level), level,
        $"The value of argument '{nameof(level)}' ({level}) is invalid for enum type '{nameof(LogEventLevel)}'.")
}; 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2012-11-30T13:03:20.127

我会说 NotImplementedException 因为您正在为未实现的枚举值抛出异常。

# python - 使用 Python 3 ElementTree 更改特定的 xml 元素

> ID：13645153
> 
> 赞同：1
> 
> 时间：2012-11-30T12:21:35.653
> 
> 标签：python, xml, python-3.x, elementtree

我在 xml 中有一组元数据文件，这些文件会定期更新，我正在尝试自动化。我已经研究出如何迭代地查找并替换所需 xml 元素中的文本，但认为必须有一种直接的方法来访问和更改元素。我就是搞不定。

元数据 xml 的格式为：

```
<?xml version="1.0" ?>
    <metadata xml:lang="en">
       <Esri>
          <CreaDate>20120405</CreaDate>
          <CreaTime>13113000</CreaTime>
          <ArcGISFormat>1.0</ArcGISFormat>
          <SyncOnce>TRUE</SyncOnce>
          <ModDate>20121129</ModDate>
          <ModTime>11433300</ModTime>
          <ArcGISProfile>ItemDescription</ArcGISProfile>
       </Esri>
       <dataIdInfo>
          <idPurp>Updated :: 121129_114038</idPurp>     
       </dataIdInfo>
    </metadata> 
```

我的迭代方法是：

```
for child in root:
    for xel in child.iter('idPurp'):
        download_new_datetime = strftime('%y%m%d_%H%M%S')
        download_new_text = 'Downloaded :: '
        xel.text = download_new_text + download_new_datetime
        tree.write(xmlfile) 
```

想法以更好的方式受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:53:38.543

只有在完成循环后，我才会写入文件：

```
import xml.etree.ElementTree as ET
from time import strftime

xmlfile = '/tmp/file'
tree = ET.parse(xmlfile)
root = tree.getroot()

for child in root:
    for xel in child.iter('idPurp'):
        download_new_datetime = strftime('%y%m%d_%H%M%S')
        download_new_text = 'Downloaded :: '
        xel.text = download_new_text + download_new_datetime

tree.write(xmlfile) 
```

我什至会将该循环进一步简化为：

```
for child in root:
    for xel in child.iter('idPurp'):
        xel.text = 'Downloaded :: ' + time.strftime('%y%m%d_%H%M%S') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-01T14:44:40.617

Two simpler ways, both work, tested.

**First:**

```
import xml.etree.ElementTree as ET
from time import strftime

xmlfile = 'metadata.xml'
tree = ET.parse(xmlfile)
root = tree.getroot()

xel = root.find('./dataIdInfo/idPurp')
xel.text = 'Downloaded :: ' + strftime('%y%m%d_%H%M%S')

tree.write(xmlfile) 
```

**Second:**

```
import xml.etree.ElementTree as ET
from time import strftime

xmlfile = 'metadata.xml'
tree = ET.parse(xmlfile)
root = tree.getroot()

xel = root[1][0]
xel.text = 'Downloaded :: ' + strftime('%y%m%d_%H%M%S')

tree.write(xmlfile) 
```

I prefer the first one, it's more readable in my opinion.

# asp.net-mvc-4 - 在 ASP.NET Web API 中，如果抛出异常，如何使 HTTP 响应语法保持一致？

> ID：13645158
> 
> 赞同：2
> 
> 时间：2012-11-30T12:21:46.230
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我正在使用 ASP.NET Web API 创建一个 HTTP API。我注意到，如果发生我未处理的异常，则该行为与我故意抛出 HttpResponseException 时的行为非常不同。这将使客户端难以可靠地处理错误并显示“原因”消息。

例如考虑这个代码：

```
[HttpPost]
public void ThisWillThrowAnError()
{
    try
    {
        var i = 0;
        var b = 1 / i; // cause divide by zero exception for testing
    }
    catch (Exception ex)
    {
        HttpResponseMessage message = new HttpResponseMessage();
        message.ReasonPhrase = "Error: " + ex.Message;
        throw new HttpResponseException(message);
    }
} 
```

这将创建一个响应，该响应在 HTTP 标头中有错误，并且响应代码设置为 500： *错误：无法处理此请求。试图除以零。*

实际的响应正文是空的。

但是，如果我删除 try/catch 块，或者如果发生我没有手动抛出 HttpResponseException 的异常，我会得到完全不同的行为。虽然状态码仍然是 500，但标头消息只是显示“内部服务器错误”，并且消息以 JSON 格式编码，如下所示：

```
{
  "Message": "An error has occurred.",
  "ExceptionMessage": "Attempted to divide by zero.",
  "ExceptionType": "System.DivideByZeroException",
  "StackTrace": " at ProjectName.Controllers (etc....)"
} 
```

我认为我更喜欢后者，因为它为您提供了更多调试信息，但它消除了自定义消息或为问题提供用户可读消息的能力。

为什么 WebAPI 与它处理异常的方式不一致？我是否自己在做一些事情来导致这种不一致？它看起来相当混乱且难以使用，并且可能意味着必须对调用应用程序进行编码以处理两种不同类型的错误响应:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T01:53:39.593

创建错误响应时，请考虑使用 HttpRequestMessage.CreateErrorResponse 创建与 WebAPI 发送的错误响应一致的错误响应。

这篇博文应该会有所帮助：http: [//blogs.msdn.com/b/youssefm/archive/2012/06/28/error-handling-in-asp-net-webapi.aspx](http://blogs.msdn.com/b/youssefm/archive/2012/06/28/error-handling-in-asp-net-webapi.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-12T10:58:24.657

我会使用[消息处理程序](https://docs.microsoft.com/en-us/aspnet/web-api/overview/advanced/http-message-handlers)。消息处理程序是一个接收 HTTP 请求并返回 HTTP 响应的类。因此，您基本上可以在一个地方更改响应结构，并且对成功和失败以及 Web Api 中的所有请求都有相同的响应。您可以在我的博客文章中了解它：[https ://www.vladopandzic.com/asp-net-web-api/building-consistent-responses-asp-net-web-api/](https://www.vladopandzic.com/asp-net-web-api/building-consistent-responses-asp-net-web-api/)

# optimization - 循环和递归展开

> ID：13645159
> 
> 赞同：4
> 
> 时间：2012-11-30T12:21:47.197
> 
> 标签：optimization, haskell, ghc, template-haskell

```
W_t = M_t[i] if 0 <= t <= 15
W_t = ROTL_1(W_(t-3) XOR W_(t-8) XOR W_(t-14) XOR W_(t-16)) if 16 <= t <= 79 
```

这是来自 SHA-1 标准。在 haskell 中，您要做的就是编写一个递归函数来执行此操作，但为了提高效率，我想展开整个递归。内联不起作用，因为这可能导致代码呈指数级增长。我的想法是编写 TH 来生成常量行`W_0`，`W_1`等等`W_2`。`W_79`

另一个例子是for循环展开的情况

```
For t=0 to 79:
{
    T = ROTL_5(a) + f_t(b, c, d ) + e + K_t + W_t
    e = d
    d = c
    c = ROTL_30(b)
    b = a
    a = T
} 
```

我也想展开这个循环以避免递归函数调用（而且我认为 ghc 不会执行这种优化）。

所以在我为此写 TH 之前，我想问一下是否有更好的方法来做这件事。只是说优化在这里非常关键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:03:37.837

[TH 是执行用户控制的循环展开](http://www.haskell.org/pipermail/haskell-cafe/2009-February/056248.html)的“标准”方式。

# c - 仅使用 rand() 具有任意概率分布的随机数

> ID：13645160
> 
> 赞同：5
> 
> 时间：2012-11-30T12:21:48.123
> 
> 标签：c, algorithm, math, random, probability

我正在寻找一种简单的算法，如何仅使用 ANSI rand() 函数但具有任意概率分布来生成伪随机浮点数。对于简单的均匀分布，我使用以下代码：

```
x = (float)rand() / (float)RAND_MAX; 
```

当然它不是很准确，但足以满足我的需求。我还需要其他分布，如逻辑和高斯分布。理想情况下，我必须使用有限长度的简单向量定义任意 pdf，例如，对于逻辑 pdf，此向量可能如下所示：

```
logistic_pdf = {0., 0.26894, 0.33924, 0.41742, 0.5, 0.58257, 0.66075, 1.}; 
```

对于统一（使用相同的维度 8）：

```
uniform_pdf = {0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125}; 
```

这只是一个想法。但我不确定如何`rand()->{0...RAND_MAX}`仅使用有效地实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:56:41.177

没有简单的算法可以做任意复杂的事情。您必须为每个“任意”分布找到[逆概率积分变换。](http://en.wikipedia.org/wiki/Inverse_transform_sampling)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T12:18:21.167

对于任意离散分布，有一个线性时间初始化常数时间采样算法：

[http://web.eecs.utk.edu/~vose/Publications/random.pdf](http://web.eecs.utk.edu/~vose/Publications/random.pdf)

看看这个！它非常聪明，实现起来也不难。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-01T17:02:31.720

你的问题没有一个简单的答案。Luc Devroye 用 800 多页的篇幅在他的文章“[非均匀随机变量生成](http://luc.devroye.org/rnbookindex.html)”中非常全面地解决了这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T12:26:30.893

看看这个[链接](http://www.emunix.emich.edu/~haynes/Papers/ProbabilityDistributions/probabilityDistributions.html)。这是泊松分布的示例：

```
#include < stdlib.h > 
#include < math.h >

int Poisson ( double ev ) {
      int         n = 0;      // counter of iterations 
      double      em;         // e^(-ev), where v is the expected value
      double      x;          // pseudorandom number

      em = exp (-ev);
      x = rand() / (double) RAND_MAX;     // check your C compiler docs
                                          // for the correct constant name
      while (x > em) { 
            n++;
            x *=  rand() / (double) RAND_MAX;
            }
      return n;
      } 

main () {
  int i;
  for (i = 0; i< 1000; i++) {
    printf("new Poisson value: %d\n", Poisson(.133333) );
    }
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T15:29:44.070

您将不得不做一些研究，因为从每个分布中绘制伪随机值的方法会有所不同。一个合理的起点是维基百科。[他们有从正态/高斯分布](http://en.wikipedia.org/wiki/Normal_distribution#Generating_values_from_normal_distribution)和[逻辑分布](http://en.wikipedia.org/wiki/Logistic_distribution#Related_distributions)生成值的方法。其他可能感兴趣的是[指数分布](http://en.wikipedia.org/wiki/Exponential_distribution#Generating_exponential_variates)、[beta 分布](http://en.wikipedia.org/wiki/Beta_distribution#Generating_beta-distributed_random_variates)和[gamma 分布](http://en.wikipedia.org/wiki/Gamma_distribution#Generating_gamma-distributed_random_variables)。

或者，如果您有一些您有兴趣复制的源数据，您可以创建您拥有的数据的直方图并从该数据生成 CDF。然后简单地生成 X~U(0,1)，并确定直方图中的哪个 bin 对应，在 bin 的上限和下限之间线性缩放。这是 stafan 提到的逆概率积分变换方法的本质。

# jquery - 用于十进制评分的 Jquery 星级评分插件

> ID：13645161
> 
> 赞同：-1
> 
> 时间：2012-11-30T12:21:48.577
> 
> 标签：jquery, rating

[我正在使用来自http://www.fyneworks.com/jquery/star-rating/#tab-Testing](http://www.fyneworks.com/jquery/star-rating/#tab-Testing)的 jquery 星级插件。我想为我的应用程序使用十进制星级。所以我正在使用

> Test4 半星和分裂星

html代码如下。

```
<input class="star {split:2}" type="radio" value="0.5" name="test-4-rating-3" />
<input class="star {split:2}" type="radio" value="1.0" name="test-4-rating-3" />
<input class="star {split:2}" type="radio" value="1.5" name="test-4-rating-3" />
<input class="star {split:2}" type="radio" value="2.0" name="test-4-rating-3" />
<input class="star {split:2}" type="radio" value="2.5" name="test-4-rating-3" />
<input class="star {split:2}" type="radio" value="3.0" name="test-4-rating-3" />
<input class="star {split:2}" type="radio" value="3.5" name="test-4-rating-3" />
<input class="star {split:2}" type="radio" value="4.0" name="test-4-rating-3" />
<input class="star {split:2}" type="radio" value="4.5" name="test-4-rating-3" />
<input class="star {split:2}" type="radio" value="5.0" name="test-4-rating-3" /> 
```

脚本如下。

```
$('.star').rating({
       split: 2, 
       callback: function(value, link){
           alert(value);          
       }
   }); 
```

请建议我如何使用 {split:2} 以及如何在点击星星时获得额定值。工作会更受重视。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:12:45.577

So I'm taking a shot in the dark here, because the website you linked isn't very clear, but here's what I got.

1.  According to that website you need to use the special [metadata plugin](http://archive.plugins.jquery.com/project/metadata) to get the splits to work. Presumably include this file in your HTML before the stars plugin.
2.  As far as I can tell they're just updating the value attribute of the form element, so you can probably access the value like this `$(".star").val()`, however as you said you want to see the value when you click on the thing, you'll have to follow their instructions.
3.  Are you making sure to wrap your JS in `$(function() { });` or putting your JS at the end of the page?
4.  This plugin seems very outdated. I know the website mentions a recent update, but the code quality and links imply it's several years old. I highly recommend using a more modern jquery plugin for your stars, such as any of the several that are on github. Check out [Raty](http://www.wbotelhos.com/raty/) which seems to have decent documentation.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T00:35:56.820

@Jamund 的链接不再有效。似乎它现在就在这里。

[https://github.com/jquery-orphans/jquery-metadata](https://github.com/jquery-orphans/jquery-metadata)

我用过它，它对我有用。

# asp.net - 在 LoginView 控件中访问 Login 控件

> ID：13645162
> 
> 赞同：0
> 
> 时间：2012-11-30T12:21:50.843
> 
> 标签：asp.net, asp.net-membership, loginview

HTML：

```
<body>
<form id="form1" runat="server">
<div>
    <asp:LoginView ID="LoginView1" runat="server">
        <AnonymousTemplate>
            <asp:Login ID="Login1" runat="server" OnLoginError="LoginError">
            </asp:Login>
        </AnonymousTemplate>          
        <LoggedInTemplate>
            Username:
            <asp:LoginName ID="LoginName1" runat="server" />
        </LoggedInTemplate>
    </asp:LoginView>
</div>
</form> 
```

代码隐藏：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.Security;
using System.Web.UI.WebControls;

public partial class _Default : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{

}

protected void LoginError(object sender, EventArgs e)
{
    Login Login1 = (Login)LoginView1.FindControl("Login1");
    string userName= Login1.UserName;
    MembershipUser user = Membership.GetUser(userName);
    if (user == null)
    {
        Login1.FailureText = "Username Invalid";
    }
    else
    {
        if (!user.IsApproved)
        {
            Login1.FailureText = "User Not Yet Approved";
        }
        else if (user.IsLockedOut)
        {
            Login1.FailureText = "User Locked Out";
        }
    }
}
} 
```

上面显示了我的代码。当我尝试运行它时，它给了我以下错误：

“登录”不包含“用户名”的定义，并且找不到接受“登录”类型的第一个参数的扩展方法“用户名”（您是否缺少 using 指令或程序集引用？）

“Login”不包含“FailureText”的定义，并且找不到接受“Login”类型的第一个参数的扩展方法“FailureText”（您是否缺少 using 指令或程序集引用？）

注意我已经包含了 System.Web.UI.WebControls 参考。

但是，如果我明确地对 Login 控件进行类型转换，则代码开始工作：

```
System.Web.UI.WebControls.Login Login1 = (System.Web.UI.WebControls.Login)LoginView1.FindControl("Login1"); 
```

谁能解释为什么会这样？在第一种情况下，如果我将鼠标悬停在 Login 关键字上，它会显示“class System.Web.UI.WebControls.Login”，因此它不会被错误地引用。

提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:56:48.343

最可能的原因是另一个页面或名为`Login`. 如果没有命名空间前缀，编译器将解析`Login`为该页面/控件，而不是`System.Web.UI.WebControls.Login`控件。

# objective-c - 对象必须扩展 NSObject 以成为块内的强引用吗？

> ID：13645164
> 
> 赞同：1
> 
> 时间：2012-11-30T12:21:54.917
> 
> 标签：objective-c, objective-c-blocks

来自 Apple 的[Blocks 编程主题：块和变量](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW1)

> **Objective-C 对象**
> 当一个块被复制时，它会创建对块内使用的对象变量的强引用。

如果对象没有从 NSObject 扩展怎么办？这有关系吗？

例如，给定一个属性

```
@property(nonatomic, copy) FooBlock fooBlock; 
```

以下是

```
-(void)foo:(NSObject<Foo>*)foo
{
    self.fooBlock = ^(){
        [foo bar];
    };
} 
```

任何不同的

```
-(void)foo:(id<Foo>)foo
{
    self.fooBlock = ^(){
        [foo bar];
    };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T15:06:33.937

请注意，文档说的是*对象*变量，而不是*NSOjbect*变量。在此上下文中，所有 Objective-C 对象都被同等对待，无论它们的基类如何。

正如其他人指出的那样，您只需要确保您的对象响应通常的内存管理选择器 - 特别是保留和释放。

切线，请记住，从 NSObject 以外的基类派生通常是不明智的。这是可能的（例如 NSProxy），但它会很快变得非常复杂。确保您有充分的理由这样做。

# php - 使用多个表PHP MYSQL为登录用户选择用户特定记录

> ID：13645167
> 
> 赞同：0
> 
> 时间：2012-11-30T12:21:57.037
> 
> 标签：php, mysql

我有两张桌子，一张叫用户，一张叫电视节目。我通过这样做将用户的名称存储在一个名为 username 的变量中。users 表保存 user_id PK、用户名、密码，tv shws 表存储 tv_id PK、user_id FK、电视节目名称

```
$username=$_SESSION['username']; 
```

我希望能够为已登录的特定用户显示所有电视节目，我猜我需要显示分配给已登录用户的用户 ID 的所有结果，因为电视节目表中的 user_id是users表中主键用户id的外键。

代码：

```
$user = "SELECT user_id FROM users where username='$username'";

if(!$rs = mysql_query("SELECT * FROM tv shows WHERE user_id='$user'")) { 
```

当我运行此代码时，我得到“无法选择表”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:42:33.407

Try this

```
$query = 'SELECT * FROM tv_shows where user_id=(SELECT user_id FROM users where username="'.$username.'")'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T06:47:15.123

好吧，试试这个：

```
<?php
$user = musql_query("SELECT * FROM users where username='$username'");
$result = mysql_fetch_array($user);
$userid = $result['user_id'];

$sql = "SELECT * FROM tv shows WHERE user_id=".$userid;
$get_tv = mysql_query($sql);
$make_array = mysql_fetch_assoc($get_tv);
 print_r($make_array);
?> 
```

编码快乐！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T15:29:43.410

在 Tornado 的帮助下自己设法弄清楚了

```
if(!$rs = mysql_query("$query2")) {
$query2 = 'SELECT * FROM tv_shows where user_id=(SELECT user_id FROM users where username="'.$username.'")'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T12:53:24.953

```
SELECT username,user_id 
FROM users as a 
JOIN tv shows as b ON b.user_id_id=a.user_id 
WHERE a.username='{$username}' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T12:29:17.787

首先，作为一个更好的设计，您可以在 $_SESSION.. 中包含 user_id，这样您就可以避免不必要的查询...

这里的问题可能是由于单引号...所以请转义您的单引号..

谢谢

# android - 在listView android中设置Strikethough文本

> ID：13645169
> 
> 赞同：0
> 
> 时间：2012-11-30T12:22:00.687
> 
> 标签：android, listview

当用户单击 listView 中的复选框时，我想在文本中设置删除线。假设我在 listView 中有三个项目，但是当我单击第一项中的复选框时，它仅在最后一项的文本中删除。

```
 public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
        listView = (ListView) findViewById(R.id.productList);
        model = helper.getAllProduct(list);
        startManagingCursor(model);

        listView.setAdapter(new ShoppingListAdapter(this,model));
        class ShoppingListAdapter extends ResourceCursorAdapter {

        public ShoppingListAdapter(Context context ,Cursor c) {
            super(context,R.layout.productrow,c);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void bindView(View row, Context context, Cursor c) {
            // TODO Auto-generated method stub
            listName = (TextView) row.findViewById(R.id.produtName);
            final CheckBox listCheck=(CheckBox)row.findViewById(R.id.check);
            listCheck.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                    @Override
                    public void onCheckedChanged(CompoundButton view, boolean isChecked) {
                        // TODO Auto-generated method stub
                        if(listCheck.isChecked()){
                              listName.setPaintFlags(listName.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);
                            //listName.setTextColor(_context.getResources().getColor(R.color.red));
                        //  listName.setText("go");
                        }
                    }

                  }); 
```

有人知道这是我的错吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:45:44.427

尝试

```
listName.setPaintFlags(Paint.STRIKE_THRU_TEXT_FLAG); 
```

它在我的情况下有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:27:28.250

Lalit Poptani 是正确的，这是因为 listview 的回收机制。在滚动列表时，已经创建的视图将被重用。滚动时会调用 getview() 方法。所以你必须检查复选框是否被选中。如果选中，您必须设置油漆标志，而不是意味着您必须删除油漆标志。

```
if(isChecked){
    txtview.setPaintFlags(Paint.STRIKE_THRU_TEXT_FLAG);
 }else{
    txtview.setPaintFlags( task_text.getPaintFlags() & (~ Paint.STRIKE_THRU_TEXT_FLAG));
 } 
```

# android - 检查是否存在具有相同 id 的通知？

> ID：13645179
> 
> 赞同：2
> 
> 时间：2012-11-30T12:22:45.280
> 
> 标签：android, notifications

> 我想确定通知栏中是否已经存在 id 为 1 的通知？如果不是，那么做一些活动，否则会显示错误！可能吗 ？如何 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:16:20.293

没有办法完全按照您的要求做（基于 id）。发布通知后，您将失去对用户是否已将其关闭或仍然存在的参考。您可以做几件事，但它们是不可靠或不具有弹性的技巧。也许如果您可以详细说明原因或您想要完成的具体目标（总体而言），则可以提供更多帮助。

# google-app-engine - ndb 独立事务和重试

> ID：13645182
> 
> 赞同：0
> 
> 时间：2012-11-30T12:23:10.600
> 
> 标签：google-app-engine, app-engine-ndb

在以下场景中查找数据存储行为的详细说明时遇到问题。

1.  开始交易
2.  进行了一些更改
3.  另一个独立的事务是使用 ndb.TransactionOptions.INDEPENDENT 传播级别启动的。它的目的是增加一个分片计数器。我需要它作为嵌套事务，因为我将有很多计数器，并且只能在一个事务中使用 5 个实体组
4.  嵌套事务提交成功
5.  主事务正在尝试提交，但失败
6.  重试后主要事务正在提交

我想嵌套事务只运行一次，但我无法验证这个假设。有人知道它是如何工作的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:38:11.057

放入一些日志语句以查看行为。如果步骤 3-4 由主事务的代码发起，则每次重试主事务时都会启动独立事务。这就是为什么它被称为独立的，而不是嵌套的。

# gitolite - bash：gitolite：找不到命令

> ID：13645190
> 
> 赞同：3
> 
> 时间：2012-11-30T12:23:43.983
> 
> 标签：gitolite, gitlab

我正在尝试使用 Gitolite 在 Gitlab 中创建一个新分支。我完成了安装步骤。当我遇到“设置 gitolite”部分时，我遇到了麻烦。我跟着这个[链接](http://sitaramc.github.com/gitolite/setup.html)。

当我跑步时

> ```
>  gitolite setup -pk alice.pub 
> ```

命令我收到“bash：gitolite：找不到命令”错误消息。我不知道是什么问题..任何人请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:47:06.917

这一步是在[Gitolite 安装](http://sitaramc.github.com/gitolite/install.html)之后进行的，假设您选择了以下三种可能性之一：

1.  将源保存在任何地方并使用完整路径来运行`gitolite`命令。
2.  将源代码保存在任何地方，并将 gitolite 程序符号链接到您的`$PATH`.
3.  将源代码复制到某处并使用该路径运行 gitolite 命令。

因此，请确保 gitolite 在您的 中`PATH`，并且该命令将起作用。

我更喜欢 gitolite 的本地安装（在本地目录中，而不是`/usr/local`需要 root 权限。）。
参见，以作说明，“ [`install_or_update_gitolite.sh`](https://github.com/VonC/compileEverything/blob/master/gitolite/install_or_update_gitolite.sh)”

```
"${github}/install" -to "${gtl}/bin" # Note: "${gtl}/bin" is in my $PATH
GITOLITE_HTTP_HOME= gitolite setup -pk "${H}/.ssh/gitoliteadm.pub" 
```

请注意，`gitolite setup`为了正常工作，您可能需要先设置`GITOLITE_HTTP_HOME`为空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T08:51:22.633

在 debian 上，没有 /usr/bin/gitolite

```
Linux debian-srv 3.2.0-4-amd64 #1 SMP Debian 3.2.60-1+deb7u3 x86_64 GNU/Linux ls: cannot access /home/gitolite/bin: No such file or directory 
ls: cannot access /usr/bin/gito*: No such file or directory 
```

在这里安装 gitolite3 有帮助：

```
apt-get install gitolite3
root@debian-srv:# which gitolite
/usr/bin/gitolite 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-20T04:02:55.493

由于我也面临同样的问题，我找到了以下解决方案。

## 第一种方法是...，

打开您的终端并输入以下代码

```
$ PATH=$PATH:~/bin 
```

这是因为`$PATH`变量的值指向不正确的路径。
所以我只是修改这个变量。

要了解更多详情，请单击[此处](https://unix.stackexchange.com/questions/26047/how-to-correctly-add-a-path-to-path/26059#26059)。

## 第二种方式是...，

编辑`.bashrc`文件到最后并插入下面的行。

```
PATH=/home/git/bin:$PATH 
```

要了解更多详情，请单击[此处](http://therightstuff.de/2010/03/28/How-To-Set-Up-A-Git-Server-On-Windows-Using-Cygwin-And-Gitolite.aspx)。

# linux - 保存大量文件的最佳目录结构

> ID：13645197
> 
> 赞同：1
> 
> 时间：2012-11-30T12:24:07.617
> 
> 标签：linux, filesystems, file-handling, ext3

我们开发的一款软件会生成越来越多的文件，目前每天大约 70000 个文件，每个文件 3-5 MB。我们将这些文件存储在具有 ext3 文件系统的 Linux 服务器上。*软件每天*新建一个目录，将当天生成的文件写入该目录。写入和读取如此大量的文件越来越慢（我的意思是，每个文件），所以我的一位同事建议*每小时*打开子目录。我们将测试这是否使系统更快，但这个问题可以概括为：

**有没有人根据目标目录中的文件数测量写入和读取文件的速度？是否有一个最佳文件数，高于该数将文件放入子目录会更快？可能影响优化的重要参数是什么？**

先感谢您。

# php - 设置 MySQL 和 Oracle 数据库 Mac OS X

> ID：13645199
> 
> 赞同：4
> 
> 时间：2012-11-30T12:24:22.047
> 
> 标签：php, mysql, oracle, localhost

我熟悉使用 MAMP，但我现在需要在本地设置一个 MySQL 和 Oracle 数据库，我需要从同一个 PHP 文件连接到这两个数据库。

谁能指出我正确的方向来开始这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T13:45:54.817

不要在您的系统上本地安装 Oracle。获取[VirtualBox](https://www.virtualbox.org)并[从此处安装其中一个预构建的 VM 设备，](http://www.oracle.com/technetwork/community/developer-vm/index.html)然后您可以将 MySQL 安装到此 VM 中。

这会更好，因为系统更新不会影响您的安装，您可以将其移动到另一台机器上。而且您无需担心启动、关闭等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:44:44.510

## MySQL

[从这里](http://dev.mysql.com/downloads/mysql/)获取 MySQL 。下载 DMG 文件后，安装它。

有关分步说明，请参阅[**此**](http://blog.mclaughlinsoftware.com/2011/02/10/mac-os-x-mysql-install/)。

* * *

## 甲骨文

从[这里](http://www.oracle.com/technetwork/topics/macos/downloads/index.html)下载，关于分步安装，请参考[**这个**](http://blog.rayapps.com/2009/04/12/how-to-install-oracle-database-10g-on-mac-os-x-intel/)、[**这个**](http://blog.rayapps.com/2009/09/14/how-to-install-oracle-database-10g-on-mac-os-x-snow-leopard/)和[**这个**](http://www.oracle.com/technetwork/topics/macos/articles/index.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:31:33.433

对于旧版本的 Mac OS X (10.5)，有一个旧版本的 Oracle (10g R2)。我不会去那里，因为自 2005 年以来没有任何变化。

我安装了一个运行 Oracle 数据库应用程序开发 VM 的 VirtualBox： [http ://www.oracle.com/technetwork/community/developer-vm/index.html](http://www.oracle.com/technetwork/community/developer-vm/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-17T14:35:40.377

设置 Oracle 数据库 Mac OS X

1.  让您的虚拟机使用桥接模式而不是 NAT 进行网络连接。
2.  在您的虚拟机操作系统上下载“Oracle 数据库 11g 快捷版”。
3.  找到你的虚拟机的IP地址。
4.  下载适用于 Mac 的最新 JDK
5.  在您的 Mac 上下载 Oracle SQL Developer 下载。
6.  输入这样的信息：

**连接名称**：YourConnectionName **密码**：安装 Oracle DB Express 时所做的 **主机名**：虚拟机 ip 地址 **端口**：1521 **SID**：xe

[![在此处输入图像描述](../Images/703682d18f08e62aab09b4a5e77f9121.png)](https://i.stack.imgur.com/iMtjg.png)

# javascript - 将参数应用到参数数组中的函数中

> ID：13645202
> 
> 赞同：0
> 
> 时间：2012-11-30T12:24:27.883
> 
> 标签：javascript, callback

[http://jsbin.com/ukizof/1/](http://jsbin.com/ukizof/1/) 如何调用作为数组一部分的函数并为其设置参数，如下例所示，我希望脚本返回一个函数以便调用一个函数如下示例中的参数设置如下。

```
 var bQuery = {
        one: function(elem, options) {
            options = this.extend({
                method: 'html',
                event: 'test2',
              func:null
            }, options || {});
            var element = elem;

            if (options.method == 'html') {
                element.innerHTML = options.event;
            } else if (options.method == 'append') {
                element.innerHTML = element.innerHTML + options.event;
            } else if (options.method == 'prepend') {
                element.innerHTML = options.event + element.innerHTML;

            }
          return // return method to apply string to func: parameter function as below is "e"

        },
        extend: function(a, b) {
            for (var prop in b) {
                a[prop] = b[prop];
            }
            return a;
        }
    };
    $ = bQuery;
    $.one(document.getElementById("log"), {
        method: 'append',
        event: 'rjfjfjjffj',
        func: function(e){
          alert(e);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:36:53.583

如果我理解正确，你想要

```
var options, element;
…
return function() {
    if (typeof options.func == 'function')
        return options.func(element.innerHTML);
}; 
```

# android - 我应该选择哪个 Android 版本来开发仅针对 Android 手机的新应用程序？

> ID：13645204
> 
> 赞同：0
> 
> 时间：2012-11-30T12:24:32.707
> 
> 标签：android, android-sdk-2.3

我想构建一个仅针对 Android 手机的应用程序。我想知道我应该为开发选择哪个 Android SDK 和 API 级别。

该应用程序将在2013 年9 月发布。我认为到那时仍然会有很多手机运行Android 2.3。

我的问题是，4.0 SDK 是否为开发人员带来了任何重大改进，我应该能够更快地构建应用程序？或者，我应该坚持使用 2.3 来让应用程序在几乎每部手机上运行吗？

谢谢， 迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:34:35.193

我会选择 Android 2.2 并且不要忘记以下库：

*   [支持库](http://developer.android.com/tools/extras/support-library.html)
*   [动作条夏洛克](http://actionbarsherlock.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:27:55.187

上次我查看版本分布图表时，2.3.3 正在下降，相当多的设备在 4.0 时上升，但对我来说 2.3.3 仍然有足够大的基础将其设置为您的基线。我现在仍然以此为基准进行开发。

# android - 将图像沿文本发送到android中的服务器

> ID：13645206
> 
> 赞同：1
> 
> 时间：2012-11-30T12:24:38.023
> 
> 标签：android, image

```
HttpURLConnection conn = null;
DataOutputStream dos = null;
String lineEnd = "\r\n";
String twoHyphens = "--";
String boundary = "*****";
int bytesRead, bytesAvailable, bufferSize;
byte[] buffer;
int maxBufferSize = 1 * 1024 * 1024;
File sourceFile = new File(sourceFileUri);
if (!sourceFile.isFile()) {
    Log.e("uploadFile", "Source File Does not exist");
    return 0;
}
try { // open a URL connection to the Servlet
    FileInputStream fileInputStream = new FileInputStream(sourceFile);
    URL url = new URL(upLoadServerUri);
    conn = (HttpURLConnection) url.openConnection(); // Open a HTTP  connection to  the URL
    conn.setDoInput(true); // Allow Inputs
    conn.setDoOutput(true); // Allow Outputs
    conn.setUseCaches(false); // Don't use a Cached Copy
    conn.setRequestMethod("POST");
    conn.setRequestProperty("Connection", "Keep-Alive");
    conn.setRequestProperty("ENCTYPE", "multipart/form-data");
    conn.setRequestProperty("Content-Type", "multipart/form-data;boundary=" + boundary);

    // text to send

    conn.setRequestProperty("uploaded_file", fileName);

    String stringFieldName = "user_id";

    conn.setRequestProperty("user_id", "999");

    conn.setRequestProperty("sb_name", "testinggg");

    Log.e("fileName", "fileName     ======="+fileName);
    dos = new DataOutputStream(conn.getOutputStream());
    Log.e("uploadFile_uploadFile", "twoHyphens ="+twoHyphens +", boundary ="+boundary+", lineEnd ="+lineEnd);
    dos.writeBytes(twoHyphens + boundary + lineEnd);

    Random r = new Random();
    int rnd_filename = r.nextInt(999) + 1;
    String strFileName="";
    strFileName =rnd_filename +".png";

    Log.e("strFileName", "strFileName     ======="+strFileName);
    // dos.writeBytes("Content-Disposition: form-data; name=\"uploaded_file\";filename=\""+ fileName + "\"" + lineEnd);
    dos.writeBytes("Content-Disposition: form-data; name=\"uploaded_file\";filename=\""+ strFileName + "\"" + lineEnd);

    dos.writeBytes("Content-Disposition: form-data; name=\"" + stringFieldName + "\""+ lineEnd);

    dos.writeBytes(lineEnd);               

    bytesAvailable = fileInputStream.available(); // create a buffer of  maximum size

    bufferSize = Math.min(bytesAvailable, maxBufferSize);
    buffer = new byte[bufferSize];

    // read file and write it into form...
    bytesRead = fileInputStream.read(buffer, 0, bufferSize); 

    while (bytesRead > 0) {
        dos.write(buffer, 0, bufferSize);
        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);
    }

    // send multipart form data necesssary after file data...
    dos.writeBytes(lineEnd);
    dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

    // Responses from the server (code and message)
    serverResponseCode = conn.getResponseCode();
    String serverResponseMessage = conn.getResponseMessage();

    Log.i("uploadFile", "HTTP Response is : " + serverResponseMessage + ": " + serverResponseCode);
    if(serverResponseCode == 200){
        runOnUiThread(new Runnable() {
            public void run() {
                tv.setText("File Upload Completed.");
                Toast.makeText(UploadImageDemo.this, "File Upload Complete.", Toast.LENGTH_SHORT).show();
            }
        });
    }   

    //close the streams //
    fileInputStream.close();
    dos.flush();
    dos.close();

} catch (MalformedURLException ex) {
    System.out.println("catch MalformedURLException ");
    System.out.println("catch MalformedURLException ex ="+ex);
    dialog.dismiss();
    ex.printStackTrace();
    Toast.makeText(UploadImageDemo.this, "MalformedURLException", Toast.LENGTH_SHORT).show();
    Log.e("Upload file to server", "error: " + ex.getMessage(), ex);
} catch (Exception e) {
    System.out.println("catch Exception ");
    System.out.println("catch Exception ex ="+e);
    dialog.dismiss();
    e.printStackTrace();
    Toast.makeText(UploadImageDemo.this, "Exception : " + e.getMessage(), Toast.LENGTH_SHORT).show();
    Log.e("Upload file to server Exception", "Exception : " + e.getMessage(), e);
}

try {
    BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
    String line;
    while ((line = rd.readLine()) != null) {
        System.out.println("RESULT Message: " + line);
    }
    rd.close();
} catch (IOException ioex) {
    Log.e("Huzza", "error: " + ioex.getMessage(), ioex);
}

dialog.dismiss();
System.out.println("uploadFile END");
return serverResponseCode;
} 
```

我想将图像和文本上传到服务器。我可以将图像发送到服务器，但无法在服务器上发送文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-13T01:22:19.707

这样我就做到了并且工作

```
 //text with the image
                   dos.writeBytes(twoHyphens + boundary + lineEnd);
                   dos.writeBytes("Content-Disposition: form-data; name=text" + lineEnd); // GET text in PHP side
                   dos.writeBytes(lineEnd);
                   dos.writeBytes(UserPost); // mobile_no is String variable
                   dos.writeBytes(lineEnd);

                   //Username with image
                   dos.writeBytes(twoHyphens + boundary + lineEnd);
                   dos.writeBytes("Content-Disposition: form-data; name=usr" + lineEnd); // GET usr in PHP side
                   dos.writeBytes(lineEnd);
                   dos.writeBytes(name); 
                   dos.writeBytes(lineEnd); 
```

# c# - 将字符串的值转换为 KeyValuePair 的变量

> ID：13645207
> 
> 赞同：0
> 
> 时间：2012-11-30T12:24:44.777
> 
> 标签：c#, typeconverter, keyvaluepair

我正在做这样的事情：

```
foreach( KeyValuePair<int,SOME_CLASS> reader in _readerDict )
{
  var selectedReader = reader;

  var antenna1 = selectedReader.Value.Antenna1IsEnabled;
  var antenna2 = selectedReader.Value.Antenna2IsEnabled;
  var antenna3 = selectedReader.Value.Antenna3IsEnabled;
  var antenna4 = selectedReader.Value.Antenna4IsEnabled;
} 
```

但话又说回来，我想做以下事情：

```
foreach( KeyValuePair<int,SOME_CLASS> reader in _readerDict )
{
  var selectedReader = reader;

  for( var idx = 1; idx <= 4; idx++ )
  {
    var antennaIsEnabled = string.Format( "selectedReader.Value.Antenna{0}IsEnabled", idx );

    // cast the value of antennaIsEnabled as a KeyValuePair<int,SOME_CLASS> variable datatype here
    ....
  }
} 
```

无论如何，我是否可以将天线IsEnabled 的值转换为 KeyValuePair 变量数据类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:28:39.103

我想你想提取`selectReader`as 键和`AntennaIsEnabled`值

```
string[] parts = strA.Split('.');
var list = new List<KeyValuePair<string, string>>();
list.Add(new KeyValuePair<string, string>(part[0], part[2])); 
```

需要添加一些错误检查...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:56:31.510

听起来您想要一个如下所示的结果：

```
Dictionary<int, bool> AntennaIsEnabled = new Dictionary<int, bool>();
foreach( KeyValuePair<int,SOME_CLASS> reader in _readerDict )
{
  var selectedReader = reader;

  //From your example
  AntennaIsEnabled.Add(1, selectedReader.Value.Antenna1IsEnabled);
  AntennaIsEnabled.Add(2, selectedReader.Value.Antenna2IsEnabled);
  AntennaIsEnabled.Add(3, selectedReader.Value.Antenna3IsEnabled);
  AntennaIsEnabled.Add(4, selectedReader.Value.Antenna4IsEnabled);
} 
```

然后，您可以使用 AntennaIsEnabled[2] 之类的语法访问每个天线的状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:05:41.290

尝试使用**[FastMember](http://nuget.org/packages/FastMember)**库以字符串形式访问您的属性。

# web-services - 将数据从 Windows 8 应用程序安全地传递到 Web 服务

> ID：13645212
> 
> 赞同：0
> 
> 时间：2012-11-30T12:24:57.060
> 
> 标签：web-services, encryption, windows-8, password-encryption

我正在构建一个 Windows 8 应用程序，它将用作我正在运行的 Web 服务的接口。

我需要找到一种安全的方法来加密敏感数据以传递，然后在另一端解密。

我需要做两件事（因为它们可能需要单独的方法）；

1) 用户将输入需要验证的用户名和密码

2) 用户将输入要保存的个人信息。

现在我查看了许多加密/解密方法，但我找不到两者之间的共同点。例如 System.Security.Cryptography 在 Windows 8 应用程序中不可用，并且我的网站无法使用 CryptographicEngine。

我基本上是在尝试找到做我需要做的事情的最佳方法。以及在代码中实际执行此操作的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:17:20.440

如果您只需要保护通道，请使用 HTTPS Web 服务，这就是 HTTPS 的设计目的。客户端 HttpWebRequest 类应该为您完成其余的工作。

您需要 Web 服务器上的证书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T13:32:24.367

正如您所认识到的，您将无法使用相同的命名空间。您需要做的是在两端确定标准加密算法。

这里讨论了在 Win8 端使用 AES256 的一种方法。 [http://social.msdn.microsoft.com/Forums/en/winappswithcsharp/thread/8f9ecac4-80d2-47c8-8c41-9d7877565bf5](http://social.msdn.microsoft.com/Forums/en/winappswithcsharp/thread/8f9ecac4-80d2-47c8-8c41-9d7877565bf5)

这是使用常规 .NET [http://msdn.microsoft.com/en-us/magazine/cc164055.aspx进行 AES256 的解决方案](http://msdn.microsoft.com/en-us/magazine/cc164055.aspx)

# ios - 我在哪里发布 fb:explicitly_shared for iOS sdk

> ID：13645213
> 
> 赞同：4
> 
> 时间：2012-11-30T12:24:57.320
> 
> 标签：ios, facebook, sdk

这可能是一个愚蠢的问题，但我不知道在哪里添加 fb:explicitly_shared bool。

我可以在使用 Graph API Explorer 时完成这项工作，只需添加字段并将其设置为“true”即可。奇迹般有效。

但是当我尝试从我的 iOS 应用程序中执行此操作时，它根本不起作用。

```
- (id<OGObject>)myObjectForObject:(NSDictionary*)object
{

    NSString *format =
    @"http://www.myurl.com/fbobjects/object.php?"
    @"fb:app_id=<my_app_id>&og:type=%@"
    @"&fb:explicitly_shared=true"
    @"&og:title=%@"
    @"&og:description=%@"
    @"&og:image=http://www.myimageurl.com/image.png"
    @"&body=%@";

    id<OGObject> result = (id<OGObject>)[FBGraphObject graphObject];

    // Give it a URL that will echo back the name of the wod as its title,
    // description, and body.
    result.url = [NSString stringWithFormat:format,
                  @"myapp_namespace:object",
                  [object objectForKey:@"title"],
                  [object objectForKey:@"description"],
                  [object objectForKey:@"title"]];

    NSLog(@"%@", result.url);

    return result;
} 
```

除了我添加了 fb:explicitly_shared 位之外，这大部分都直接取自[开放图形教程。](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/publish-open-graph-story/#step7)

从 iOS 设备发帖时，我需要在哪里添加此内容？任何帮助深表感谢 ：）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-01T11:37:45.400

您需要将参数添加到**action**，我可以从您的代码中看出，您似乎正在尝试将其添加到*object*，这显然是行不通的。这是我的做法：

```
id<GSOGTrackActivityAction> action = (id<GSOGTrackActivityAction>)[FBGraphObject graphObject];
action.activity = activityObject;

[(NSMutableDictionary *)action setValue:@"true" forKey:@"fb:explicitly_shared"]; 
```

（请注意，GSOGTrackActivityAction 是我的自定义协议，用于对操作对象进行类型化访问。“track”是我的操作，“activity”是我的对象（在 Open Graph 中）。）

# php - 动态列表不起作用

> ID：13645214
> 
> 赞同：2
> 
> 时间：2012-11-30T12:25:01.080
> 
> 标签：php

你好，我是 php 新手，但我不能让这个动态列表在这里工作是代码..

```
<?php 
if (isset($_GET['id'])) {
    include "DocumentSystem/scripts/connect_to_mysql.php";
$id = preg_replace('#[^0-9]#i', '', $_GET['id']);
$dynamicList = "";
$sql = mysql_query("SELECT * FROM documents WHERE id='$id' LIMIT 1");
$documentCount = mysql_num_rows($sql); // count the output amount
if ($documentCount > 0) {
    while($row = mysql_fetch_array($sql)){ 
             $id = $row["id"];
             $document_name = $row["document_name"];
             $full_document = $row["full_document"];
             $dynamicList .= '<div id="slidepic">
    <img src="images/document_images/'.$id.'.jpg" width="550" height="350" />
    <div id="slideshow">
    <h1> <a href="document.php?id='.$id.'">'.$document_name.'</a></h1>
    <br />
    <p1><a href="document.php?id='.$id.'">'.$full_document.'</a></p1>
    </div>
</div>';
    }
} else {
    $dynamicList = "We have no documents listed in the database";
}
mysql_close();
?> 
```

它正在从 url 获取正确的 id，但查询对我不起作用，谢谢任何答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:50:49.233

Please use you have get the query result

```
<?php
$con = mysql_connect("localhost","username","password");
mysql_select_db("your_database_name", $con);
$result = mysql_query("SELECT * FROM documents WHERE id = '$id' LIMIT 1");
while($row = mysql_fetch_array($result))
{
  echo = $row["id"];
  echo = $row["document_name"];
  echo = $row["full_document"];
}

mysql_close($con);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:39:50.713

尝试使用 usr`mysql_fetch_array($sql,MYSQL_ASSOC)`或`mysql_fetch_assoc($sql)`代替`mysql_fetch_array($sql)` 默认情况下 mysql_fetch_array 返回非关联数组。

**注意：**

1.  不要`SELECT * FROM table_name`。使用性能更好`SELECT column1, colum2 FROM table_name`

2.  不推荐使用 Mysql 模块。最好使用[PDO](http://www.php.net/manual/en/intro.pdo.php) [mysql模块页面](http://www.php.net/manual/en/intro.mysql.php) [MySQL API对比](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)

# jquery - 使用 jQuery，我如何从函数返回一个对象以在当前函数范围内使用？

> ID：13645217
> 
> 赞同：0
> 
> 时间：2012-11-30T12:25:03.327
> 
> 标签：jquery, function, return

这是我拥有的代码（到目前为止）。我已经成功地直接提醒来自大图像 url 的值。我希望能够将值作为对象返回给另一个变量，但没有成功。我究竟做错了什么？

```
$.fn.extend({
        getBgImage: function(callback){
            var path = $(this).css('background-image').replace('url', '').replace('(', '').replace(')', '').replace('"', '').replace('"', '');
            var tempImg = $('<img />');
            tempImg.hide(); //hide image
            tempImg.bind('load', callback());
            $('body').append(tempImg); // add to DOM before </body>
            tempImg.attr('src', path);
            $('#tempImg').remove(); //remove from DOM
        },
        jZoom: function(){
            var swide = $(this).children('.zimg').outerWidth(),
                shigh = $(this).children('.zimg').outerHeight(),
                large = $(this).attr('href');
            $(this).after('<div class="mousearea" style="width:'+swide+'px;height:'+shigh+'px;cursor:move;z-index:99;opacity:0;position:absolute;top:0;left:0;"></div>').parent('.zoom').after('<div class="large" style="background-image:url('+large+');"></div>');
            var limg = $(this).parent('.zoom').next('.large').getBgImage(function(){
                var y = $(this).height(), x = $(this).width();
                alert(x+' '+y); // this alerts the values as expected
                //return {x: x, x: y}; This is what I attempted to return the values
            });
//alert(limg.x); and this is where i check to see if the object are available but get undefined
        }
    });
    $(function(){
        $('.zoomme').each(function(){
            $(this).jZoom();
        });
    }); 
```

这只是一项正在进行的工作，主要是为了这样做，但想知道到目前为止我哪里出错了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:29:36.933

您正在分配`bgImage`函数的返回值，而不是作为参数传递给的函数的返回值`bgImage`。

由于回调在传递时实际上并没有被执行，而是被绑定为负载处理程序，因此此时无法获取其返回值。

# javascript - 比较给定格式的两个日期

> ID：13645218
> 
> 赞同：1
> 
> 时间：2012-11-30T12:25:06.087
> 
> 标签：javascript, extjs, extjs4, extjs4.1

我正在尝试使用 javascript 和 ExtJS 4 比较两个日期。

```
var d= Ext.Date.parse("03/21/2012", "m/d/Y");
var comp= new Date();

if (d< comp) {
    console.log("date value provided is larger" );
} else {
    console.log("date value provided is less" );
} 
```

运行上述示例时，我得到的结果是“提供的日期值较小”。但是，当我将 的值更改为`d`未来日期`12/21/2012`时，我仍然会收到“提供的日期值较小”的消息。

我认为这是因为我需要格式化`var comp= new Date();`值以便它可以进行计算。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:31:16.257

变量`d`和`comp`都是对象。它们是`Date`.

编辑：日期对象可以使用`<`JavaScript 中的运算符进行比较。您的代码看起来不错，它适用于[jsfiddle](http://jsfiddle.net/davidpfahler/F6wuX/)。

```
var d = Ext.Date.parse("03/21/2012", "m/d/Y");
var comp = new Date();

if (d < comp) {
    console.log("date value provided is larger" );
} else {
    console.log("date value provided is less" );
} 
```

感谢您在评论中澄清日期比较。

# typescript - 在 Backbone.js 中使用 Collection.model 属性

> ID：13645219
> 
> 赞同：2
> 
> 时间：2012-11-30T12:25:07.790
> 
> 标签：typescript

我有以下代码：

```
 class Student extends Backbone.Model { 
        // id, lastname, firstname, birthdate 
    }

    class StudentList extends Backbone.Collection { 
        model = Student;  
        ... 
    } 
```

我总是遇到这样的错误。

```
 Type of overridden member 'model' is not subtype of original member defined by type 'Collection'    ... 
```

在官方示例中几乎是相同的代码。它在那里工作（Todo->TodoList）。我的backbone.d.ts 中的Collection 声明是这样的。

```
...
model:Model;
... 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:15:12.903

您正在将 var 的值设置`model`为*类型* `Student``model = Student;`

要覆盖您需要的变量`model:Student;`并设置您需要`model:Student = nameOfSomeInstanceOfClassStudent;`（或只是`model = nameOfSomeInstanceOfClassStudent;`）的值，或者，如果您使用新学生初始化它，`model:Student = new Student();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-29T19:01:23.773

我通过在构造函数中分配模型类型解决了这个问题。

```
 export class Users extends Backbone.Collection<Models.User> {
     constructor(models?: Models.User[], options?: any) {
      super(models, options);

      this.model = Models.User;
     }
    } 
```

# javascript - jqm listview onclick 仍然关注href

> ID：13645221
> 
> 赞同：0
> 
> 时间：2012-11-30T12:25:13.377
> 
> 标签：javascript, jquery, listview, cordova, jquery-mobile

我有一个 Jquery Mobile 列表视图，每个列表项中的链接旁边都有一个删除按钮。当我单击删除按钮时，会触发 onclick 事件，删除函数会运行，但随后也会跟随 href，即使该按钮未嵌套在 href 中。我已将 return false 添加到按钮以查看是否有帮助，但没有！帮助！

这是我用来动态填充我的列表的代码....

```
$('#roomsList').append('<li><img src="img/delete-2x.png" class="delete" onClick="deleteRoom(\'' + currentRow.roomtype + '\',\'' + propertyID + '\'); return false;" /><a href="inventory.html?roomtype='+currentRow.roomtype+'&id='+propertyID+'" id="'+currentRow.roomtype+'">' + currentRow.roomtype + '</a></li>'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:00:39.407

应该没有任何问题。看这个例子：http: [//jsfiddle.net/Gajotres/WEmNG/](http://jsfiddle.net/Gajotres/WEmNG/)。我两天前为其他人创建了它，但它与您的问题相似。我在列表视图上显示自定义复选框，而不是删除按钮。如果您单击列表视图，它会将您转发到另一个页面，但如果您单击自定义复选框，它只会激活 chechbox 上的事件。

使用我的示例在列表视图上创建一个有效的删除按钮。

这是我在自定义复选框上使用的事件示例：

```
$('.checkBoxLeft').bind('click', function(e) {
   if($(this).find('input[type="checkbox"]').is(':checked')){
       $(this).removeClass('checked').addClass('not-checked');
       $(this).find('input[type="checkbox"]').attr('checked' , false);
   } else {
       $(this).removeClass('not-checked').addClass('checked');             
       $(this).find('input[type="checkbox"]').attr('checked' , true);
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:30:52.100

> 将 a 和 li 都附加到父级[将它们放在同一级别]。通过这种方式，它们应该很容易工作。

# java - HTML5 使用 src 使用原始二进制数据

> ID：13645223
> 
> 赞同：4
> 
> 时间：2012-11-30T12:25:19.533
> 
> 标签：java, html, audio, binary, jstl

假设我在数据库中存储了一个音频文件，稍后我想在我的应用程序中使用该 BLOB 或二进制文件。

```
<audio src ="${sessionScope.user.music}"> 
```

Where`${sessionScope.user.music}`返回已从数据库中检索到的二进制数据。

是否可以使用二进制数据而不是 uri 在音频标签中加载音频文件？或路径？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T12:41:43.650

A bit like inline images:

```
<img src="data:image/gif;base64,R0lGODlhEAAOALMAAOazToeHh0tLS/7LZv/0jvb29t/
f3//Ub//ge8WSLf/rhf/3kdbW1mxsbP//mf///yH5BAAAAAAALAAAAAAQAA4AAARe8L1Ekyky67
QZ1hLnjM5UUde0ECwLJoExKcppV0aCcGCmTIHEIUEqjgaORCMxIC6e0CcguWw6aFjsVMkkIr7g7
7ZKPJjPZqIyd7sJAgVGoEGv2xsBxqNgYPj/gAwXEQA7"
    width="16" height="14" alt="embedded folder icon"> 
```

Where this works for `<img>`, I am far from sure that `data:audio/mp3;base64, ...` (or `audio/ogg`) would work. It is not in my HTML5 reference.

For the encoding, see [JEditorPane with inline Image](https://stackoverflow.com/questions/9388264/jeditorpane-with-inline-image).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-06T08:46:55.123

我需要为threejs 3D显示内联大量（一些MB）二进制数据。

这就是我想出的：

1.  将 8bit 二进制数据写入 png 文件
2.  base64 编码生成的游程压缩 png 文件
3.  用于`<img src="data:image/png;base64,....">`将其包含到 html5 文件中
4.  创建适当尺寸的隐藏画布并使用 context.drawImage 和 context.getImageData 提取最终存储在 Uint8ClampedArray 中的二进制数据
5.  从该 Uint8ClampedArray 计算threejs 所需的 Float32Array(s)

我不知道这是否也适用于提供二进制音乐数据，但问题没有提到音乐数据，它可能对像我这样滞留在这里寻找将二进制数据包含到 HTML5 中的通用解决方案的其他人有所帮助:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:29:51.670

您需要使用 javascript 将二进制数据转换为字符串。请参阅[帖子](https://stackoverflow.com/questions/3195865/javascript-html-converting-byte-array-to-string)

# c - 越界数组和分段错误

> ID：13645225
> 
> 赞同：1
> 
> 时间：2012-11-30T12:25:25.403
> 
> 标签：c, posix

在像 GNU/Linux 这样可靠的真正 POSIX 系统上，超出数组大小的数组索引是否总是会导致分段错误？

我认为不，如果访问的位置仍然位于同一页面中，但要确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T12:31:30.983

不，不一定。Segmentation Violations`SIGSEGV`由内核处理，并且只会在无效的内存访问时调用。

与 POSIX 一样，数组是编译时构造。另一方面，Segmentation Violation 是一个运行时错误，表明您尝试使用一块您不允许（读/写/执行）或尚未映射（内存控制器不知道）的虚拟内存做某事应该有什么物理资源来支持它）。此时内核将向您的进程发送一个信号`SiGSEGV`，并且默认行为是退出，尽管可以覆盖它。

你甚至会经常看到这样的 C 代码，它指示编译器以可变大小数组的形式访问结构后面的内存：

```
struct s {
    // some other elements
    int id; // whatever other elements

    char appended_array[0];
};

// ....

struct s* mystruct = malloc(sizeof(struct s) + length_of_array_i_need);

// work with mystruct->appended_array[i]
// at this point mystruct->appended_array[3] is valid C and the compiler will not even issue a warning,
// though if it lies outside of your allowed VM then the kernel will issue a SIGSEGV 
```

只是因为数组没有定义超出某个索引，并不一定意味着它后面没有有效的内存。

# .net - 如何克服这个 xaml 解析异常错误？

> ID：13645227
> 
> 赞同：0
> 
> 时间：2012-11-30T12:25:28.020
> 
> 标签：.net, windows-phone-7, xaml, windows-phone-7.1, panorama-control

我正在做这个 Windows Phone 应用程序示例，在堆栈面板中创建一个列表框后一切正常。但过了一段时间我得到这个错误：

![在此处输入图像描述](../Images/cf61b3a97d7755af02e15e7af7bf48d6.png)

下面是我在 stackpanel 中创建的列表框的代码：

```
<ListBox Margin="0,0,-12,0"
         Name="listBox1">
  <StackPanel Orientation="Horizontal"
              Margin="0,0,17,0">
    <Image Source="icons/star.png"
           Height="100"
           Width="100"
           Margin="12,0,9,0">
    </Image>
    <StackPanel Width="311">
      <TextBlock Text="Folders"
                 TextWrapping="Wrap"
                 Style="{StaticResource PhoneTextExtraLargeStyle}" />
      <TextBlock Text="my personal images"
                 TextWrapping="Wrap"
                 Margin="12,-6,12,0,"
                 Style="{StaticResource PhoneTextSubtleStyle}" />
    </StackPanel>
</ListBox> 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:41:52.323

According to the error message, you're trying to set `12,-6,12,0,` as a thickness (probably a margin or a padding). Remove the trailing comma and it should work: `12,-6,12,0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:05:57.120

你似乎有标签

`<StackPanel>`

打开了两次，你只关闭了其中一个

# layout - Zend Framework 2 基于域更改布局

> ID：13645228
> 
> 赞同：1
> 
> 时间：2012-11-30T12:25:32.627
> 
> 标签：layout, twitter-bootstrap, view, rendering, zend-framework2

对于具有 4 个类似网站（相同代码，但布局不同）的网络的一部分，我想使用“Zend Framework 2”创建一个应用程序，以在一个应用程序中控制这 4 个网站。此应用程序应查看请求的域并为请求的网站呈现正确的主布局和视图布局。

我对此的想法是编写一个插件，在执行引导程序时为布局/视图设置一个变量。

这是正确的还是以其他方式更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T09:35:39.663

我建议监听调度或引导事件的插件或小模块将为您提供最好的服务。[Rob Allen在这篇文章](http://akrabat.com/zend-framework-2/a-list-of-zf2-events/)中提供了 ZF2 事件的完整列表 。如果您选择采用这种方式，Empirio Lab[会在其网站上发布包含相关模块配置的简明帖子。](http://lab.empirio.no/how-to-attach-mvc-events-in-zf2.html)

# javascript - 在 JQGrid 中更改 Tabindex

> ID：13645229
> 
> 赞同：1
> 
> 时间：2012-11-30T12:25:34.203
> 
> 标签：javascript, jquery, html, jqgrid

我的 jQGrid 保留一个值为 1 的 tabindex！我想将其更改为 -1 或删除它。我该怎么做？谢谢朋友。

这是我的网格的来源，当 jQGrid 呈现它时：

![源代码](../Images/bc7322cf670166360e93bcb2a0612175.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:28:17.760

尝试这个：

```
$('#list_allprices').attr('tabindex','-1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T23:19:51.163

Late but sure, here is my answer:

I couldn't find an option to specifically set the tabIndex through the jqgrid element but I was able to iterate over all the elements I was interested about to set them to ignore the tab (by setting the tabindex = -1).

I did the following:

```
function ignoreTabs(){
        $('.HeaderButton').each(function(i, obj) {
            obj.tabIndex = -1;
        });
} 
```

In the example above I look for all the elments with class HeaderButton and set the value tabIndex = -1\. For your example Amin Sh, you should replace '.HeaderButton' by '#list_allprices'.

Of course call the function ignoreTabs when your page is loading.

Hope it helps.

# c++ - 特定方法的模板

> ID：13645232
> 
> 赞同：1
> 
> 时间：2012-11-30T12:25:37.523
> 
> 标签：c++, templates, friend

我正在为矩阵创建一个类。这是一个带有模板的作业，所以我创建了两种乘法方法，一种是矩阵相等，另一种是当我只有 [x][y] [y][z] 时。然后我创建了第一个

```
#define TEMPLATEMATRIX template<class T, int C, int R>
TEMPLATEMATRIX Matrix<T, C, R> operator* (Matrix<T, C, R> a, Matrix<T, C, R> b);
TEMPLATEMATRIX class Matrix{
....
friend Matrix<T, C, R> operator* <>(Matrix<T, C, R> a, Matrix<T, C, R> b);
...
}; 
```

它就像一个魅力，

但是当我尝试实施第二个时，我遇到了一些问题，我用以下方法解决了它：

```
#define TEMPLATEMATRIXT template<class T, int C, int R, int R1>
TEMPLATEMATRIXT Matrix<T, R1, R> operator* (Matrix<T, R1, C> a, Matrix<T, C, R> b);

TEMPLATEMATRIX class Matrix{
....
template<int R1> friend Matrix<T, R1, R> operator* (Matrix<T, R1, C> a, Matrix<T, C, R> b);
...
};

//Multiplication
TEMPLATEMATRIXT Matrix<T, R1, R> operator* (Matrix<T, R1, C> a, Matrix<T, C, R> b){
  Matrix<T, R1, R> t;
  ...
  return t;
} 
```

它可以编译，但是当我编译时。

```
Undefined symbols for architecture x86_64:
  "Matrix<int, 100, 19> operator*<100>(Matrix<int, 100, 123>, Matrix<int, 123, 19>)", referenced from:
      _main in cciAzuMs.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

就像方法没有实现一样。

我在 main() 中的表现如何

```
 Matrix<int, 123, 19> ta2;

  Matrix<int, 100, 123> ta;
  Matrix<int, 100, 19> rr=ta*ta2; 
```

我不知道我是否正确实施了这个模板。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:15:47.150

解决了。

问题是

```
#define TEMPLATEMATRIX template<class T, int C, int R>
#define TEMPLATEMATRIXT template<class T, int C, int R, int R1> 
```

我不能使用具有相同“vars”的 2 个模板（在我的情况下不是）

```
#define TEMPLATEMATRIX template<class T, int C, int R>
#define TEMPLATEMATRIXT template<class T2, int C2, int R2, int R1> 
```

它解决了我的问题

# haskell - 地图haskell中的最小值

> ID：13645234
> 
> 赞同：3
> 
> 时间：2012-11-30T12:25:49.463
> 
> 标签：haskell, map

我有一个关于如何检索 a 的最小值的问题`Map`。

我有一个`Map k (Maybe a,Maybe b)`，我需要在元组的第一个元素（最小）上检索具有最小值的键`a`，但我找不到任何预定义的函数。有没有我可以使用的功能，或者我应该自己实现？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T12:46:26.470

您将需要约束`Ord a`。此外，您需要决定如何比较`Just x`and `Nothing`（因为您必须与 比较`(Just x, y)`）`(Nothing, z)`。我假设你想要`Just x`比`Nothing`all更小`x`。如果您使用`toList`将地图转换为列表，则可以`minimumBy`在列表上使用自定义比较功能。此外，元组 ( ) 的第二部分`Maybe b`是无关紧要的，所以我们只需调用 think`Map k (Maybe a, b)`并获得更通用的函数。

我建议像

```
import qualified Data.Map as M
import Data.List

minimum' :: (Ord a) => M.Map k (Maybe a, b) -> k
minimum' = fst . (minimumBy comp) . M.toList
    where
      comp (_, (Nothing, _)) (_, (Just _, _)) = GT
      comp (_, (Just _, _)) (_, (Nothing, _)) = LT
      comp (_, (Nothing, _)) (_, (Nothing, _)) = EQ
      comp (_, (Just x, _)) (_, (Just y, _)) = compare x y 
```

很难说出您对`Nothing`s 真正想要什么样的行为，但另一个更合理（*）的替代方法是让 minimum 函数具有 return type `Maybe k`，并`Nothing`在找到最小元素的情况下返回（如上）是`(Nothing, _)`。实现此目的的一种方法是首先`filter`从返回的列表`toList`中消除所有值为 的元素`(Nothing, _)`。

(*) 让`Just x`小于`Nothing`有点不好。在寻找最大元素时，你会想要*相反的行为，所以这一切都变得相当不一致和丑陋。*换句话说，当类型`a`被排序时，类型`Maybe a`只是*部分*排序（以一种自然的方式——当然你可以强制一个全序，如上所述）。

# sql - 如何在分页 SQL Server 查询时获取结果计数

> ID：13645235
> 
> 赞同：1
> 
> 时间：2012-11-30T12:25:58.490
> 
> 标签：sql, pagination, sql-server-2008-r2, rowcount

为了显示总页码计数，我还需要在以下查询中检索结果总数。我怎样才能做到这一点 ？

谢谢

```
select 
    AvgLevel, TotalCount, PokemonId, Type1, Speed, MonsterTotalStats 
from 
   (select 
       row_number() over (order by tblPokedex.PokemonId asc) rowNumber,
       AvgLevel, TotalCount, tblPokedex.PokemonId, 
       Type1, tblPokedex.Speed, MonsterTotalStats
    from 
       tblPokemonStats, tblAvailablePokemons, tblPokedex 
    left join 
       tblUsersPokemons on tblPokedex.PokemonId = tblUsersPokemons.PokemonId  
    where 
       tblPokemonStats.PokemonId = tblPokedex.PokemonId 
       and tblPokedex.Class = 'emissary' 
    group by 
       tblPokedex.PokemonId, tblPokedex.Type1, tblPokedex.Speed, 
       tblPokemonStats.AvgLevel, tblPokemonStats.TotalCount, MonsterTotalStats 
   ) result 
where 
    result.rowNumber > 0 and result.rowNumber < 101 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:36:41.337

只需添加列`Count(*) over()`：

```
..... 
select row_number() 
over (order by tblPokedex.PokemonId asc) rowNumber,
AvgLevel,
Count(*) over() as TotalCount,
....... 
```

看例子

```
select 
AvgLevel,TotalCount,PokemonId,Type1,Speed,MonsterTotalStats, TOTALRECORDCOUNT
from (
select row_number() 
over (order by tblPokedex.PokemonId asc) rowNumber,AvgLevel,TotalCount,tblPokedex.PokemonId,Type1,tblPokedex.Speed,MonsterTotalStats,
count(*) over() as TOTALRECORDCOUNT
from tblPokemonStats,tblAvailablePokemons,tblPokedex left join tblUsersPokemons on tblPokedex.PokemonId=tblUsersPokemons.PokemonId  
where tblPokemonStats.PokemonId=tblPokedex.PokemonId and tblPokedex.Class='emissary' 
group by tblPokedex.PokemonId,tblPokedex.Type1,tblPokedex.Speed,tblPokemonStats.AvgLevel,tblPokemonStats.TotalCount,MonsterTotalStats 
)  
result where result.rowNumber>0 and result.rowNumber<101 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:37:57.990

你可以使用：

```
SELECT @@ROWCOUNT 
```

在[这里查看](http://technet.microsoft.com/en-us/library/ms187316.aspx)。

# php - .htacces 显示名称而不是 id

> ID：13645237
> 
> 赞同：2
> 
> 时间：2012-11-30T12:26:07.020
> 
> 标签：php, .htaccess

我有一个包含 catname(catename) 和 catid(23) 的表。现在在 url 中我显示 catid=23。我为此定义了一个重写规则，它在 url 中显示 example.com/13：example.com?catid=13 是否可以实现以下目标

在 url 中：example.com/catename 显示的实际页面：example.com?catid=13

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T12:30:18.957

首先，您还想在 URL 中发送类别名称。

然后使用，在`.htaccess`：

```
RewriteRule ^(.*)-c-(.*).html$ product_info.php?catid=$2%1 
```

它对我有用。

**另一种解决方案**

如果您只想显示`catname`，而不是`catid`，那么您想在表中创建一个具有唯一键的新字段。然后在此处保存要在 URL 中显示的类别的别名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:30:44.667

如果您的类别名称不是唯一的，最好的办法是使用诸如 example.com/13-catname 之类的 URL。更改重写规则以提取 ID 并将其传递给 PHP 脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T12:29:46.307

这个有可能。您需要确保它`catname`是唯一的，如果不是，则需要添加一个附加字段 permalink/uniqid 以包含唯一且友好的 URL 别名。

```
RewriteRule ^/(\s+)$ ./index.php?catname=$1 
```

然后您需要检查`catname`您的 PHP 文件并进行相应处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T12:41:10.127

谢谢你的建议。现在我知道了。由于 catname 不是唯一的，因此两个页面可以具有相同的 url，为此我必须确保它应该是唯一的。我可以在前面添加 Id 以使其独一无二。从这样的名字我可以实现这一点。多谢。

# .net - WPF 中的图像编辑器

> ID：13645242
> 
> 赞同：3
> 
> 时间：2012-11-30T12:26:32.003
> 
> 标签：.net, wpf, image

我正在寻找一个允许编辑图像的.net 控件。以下功能将是可取的：

*   庄稼
*   飞涨
*   笔
*   线
*   刷子
*   圆圈
*   多边形
*   完全撤消/重做
*   测量工具
*   层（非关键）

此控件可以是 WPF，但需要是可扩展的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-03T12:53:11.017

我得到了答案参考这个

[http://web.archive.org/web/20150302041833/http://www.codeproject.com/Articles/22776/WPF-DrawTools](http://web.archive.org/web/20150302041833/http://www.codeproject.com/Articles/22776/WPF-DrawTools)

本文介绍了允许使用鼠标和某些绘图工具在 WPF 窗口上绘制图形对象的程序。该程序支持以下工具：矩形、椭圆、线条、铅笔和文本。我的第一篇 DrawTools 文章展示了如何使用 Windows 窗体执行此操作。在 WPF 版本中，我实现了一些以前文章读者要求的附加功能：

文本工具 XML 序列化 在背景图像上绘制覆盖 打印缩放

大部分的需求都是通过这个引用完成的。

# sql - ORA-00918: 查询时列定义不明确错误。

> ID：13645244
> 
> 赞同：1
> 
> 时间：2012-11-30T12:26:32.657
> 
> 标签：sql, oracle, sqlplus

这是查询：

```
select STOCKS.STOCKNO, STOCKS.DESCRIPTION, ORDERITEMS.QTYORD
from STOCKS
left join ORDERITEMS
on STOCKS.STOCKNO = ORDERITEMS.STOCKNO 
WHERE STOCKNO !=(Select STOCKNO from ORDERITEMS where ORDERNO='1' or ORDERNO='2')
ORDER BY STOCKNO
/ 
```

这是错误：

```
ORA-00918: column ambiguously defined for every stock item.. 
```

我已经完成了连接，但是对于第一个查询但是对于第二个查询是

```
WHERE STOCKNO !=(Select STOCKNO from ORDERITEMS where ORDERNO='1' or ORDERNO='2') 
```

问题是显示 STOCKS、DESCRIPTION 和 Quantity Ordered，包括到目前为止尚未下订单的库存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:28:31.143

哪个股票编号？

```
WHERE STOCKNO 
```

要么`STOCKS.STOCKNO`或`ORDERITEMS.STOCKNO`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T12:30:28.817

尝试使用如下别名并替换`!=`为`not in`：

```
select S.STOCKNO, S.DESCRIPTION, O.QTYORD
from STOCKS S
left join ORDERITEMS O on S.STOCKNO = O.STOCKNO 
WHERE S.STOCKNO not in (select O2.STOCKNO  
                        from ORDERITEMS O2 
                        where O2.ORDERNO='1' or O2\. ORDERNO='2')
ORDER BY S.STOCKNO
/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T13:50:21.707

确保使用别名。

```
select 
    s.stockno, 
    s.description, 
    o.qtyord
from stocks s
left join orderitems o
    on s.stockno = o.stockno 
where s.stockno not in ( select stockno from orderitems where orderno in ( '1', '2' ) )
order by s.stockno
; 
```

特别是，您需要使用`where s.stockno not in <subquery>`.

# cocoa - 隐藏菜单时，NSMenuItem Key Equivalent 不起作用

> ID：13645257
> 
> 赞同：7
> 
> 时间：2012-11-30T12:27:31.050
> 
> 标签：cocoa, interface-builder, keyboard-shortcuts, nsmenuitem

我有一个`NSMenu`连接到`NSTableView`的`menu`插座的 in Interface Builder。

我想为此菜单中的项目分配关键等效项，这样用户就不必右键单击，但除非菜单可见（失败），否则它们不起作用。

当菜单不可见时，有什么方法可以让等效键起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T20:51:24.257

您可以将菜单项放在应用程序的菜单栏和上下文菜单中。即使上下文菜单不可见，等效键也将起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-11T09:56:25.420

看起来 macOS 10.13 SDK (High Sierra)[`allowsKeyEquivalentWhenHidden`](https://developer.apple.com/documentation/appkit/nsmenuitem/2880316-allowskeyequivalentwhenhidden?language=objc)在 NSMenuItem 上有一个新属性。

# cocos2d-iphone - 具有合成和 CCSpriteBatchNode 的游戏对象（续）

> ID：13645258
> 
> 赞同：3
> 
> 时间：2012-11-30T12:27:32.687
> 
> 标签：cocos2d-iphone, code-organization

有人会考虑以下场景并给我一个建议：我正在使用一个具有一个 CCSpriteBatchNode 的 GameplayLayer 实现一个基本的 cocos2d 游戏。我有一个 GameObject:CCNode，它有 3 个 CCSprite，如下所示：

```
CCSprite *bodySprite;    
CCSprite *hairSprite;   
CCSprite *eyesSprite; 
```

初始化`GameObject`时，我将精灵添加`GameObject`为其子对象，如下所示：

```
[self addChild:bodySprite];
[self addChild:hairSprite];
[self addChild:eyesSprite]; 
```

这样[我](https://stackoverflow.com/questions/10861550/how-do-i-properly-use-ccspriteframecache-and-ccspritebatchnode)可以`GameObject`改变 **节点**`GameObject`（[这意味着每个精灵有一个额外的绘图调用”](https://stackoverflow.com/questions/10861550/how-do-i-properly-use-ccspriteframecache-and-ccspritebatchnode)。

为了解决性能问题，在阅读[了这篇文章之后](https://stackoverflow.com/questions/10422081/game-object-with-composition-and-ccspritebatchnode)，我决定在初始化时将`GameObject`'s sprites 添加到`GameplayLayer`'s中，如下所示：`CCSpriteBatchNode`

```
 [[GameplayLayer sharedGameplayLayer].sceneSpriteBatchNode addChild:bodySprite];
 [[GameplayLayer sharedGameplayLayer].sceneSpriteBatchNode addChild:hairSprite];
 [[GameplayLayer sharedGameplayLayer].sceneSpriteBatchNode addChild:eyesSprite]; 
```

只是现在，我必须`GameObject`一一设置精灵的位置，而不是

```
self.position = ... 
```

我必须使用

```
bodySprite.position = ...
hairSprite.position = ...
eyesSprite.postion =... 
```

这是一个乏味的变化，我失去了将我的设计`GameObject`为精灵组合的最大好处之一。

**问题：**有没有办法使用节点的位置来影响组成精灵的位置，我可以将它们作为子级添加到`GameObject`和`sceneSpriteBatchNode`吗？如果不是正确的方法，是不是一一设置精灵的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:25:43.953

首先，“主要表现”是相对的。如果这是您唯一的精灵，您将看不到精灵对它们进行批处理的任何效果。如果您同时在屏幕上显示数十个，那就另当别论了。

您不能同时向两个父节点添加节点。

您可以做的是创建一个“容器”精灵。创建一个带有纹理的 CCSprite（与精灵批处理节点纹理相同）和一个 CGRectEmpty 作为纹理矩形。这使得精灵不绘制任何东西，您可以将它当作添加到 CCSpriteBatchNode 的 CCNode 来使用。

然后你可以将你的精灵添加到那个不可见的精灵中，并像以前一样使用容器精灵来影响其子精灵的位置、旋转等。

# ajax - 如何在视图页面上显示服务器端验证错误

> ID：13645259
> 
> 赞同：5
> 
> 时间：2012-11-30T12:27:32.933
> 
> 标签：ajax, grails, sammy.js

因为我正在研究 grails 框架但不使用控制器。我的应用程序是“单页应用程序”。我不想重新加载我的页面，所以我已经编写了服务，即带有 Ajax 调用的 RegistrationService。所以我使用淘汰赛进行数据绑定。数据库使用的是 postgresql 。我有一个查看页面，其中有一个电子邮件字段。当我输入重复的电子邮件 ID 并单击保存按钮时，我会看到一个验证错误，即“电子邮件已被占用”但即使我正在编写一个唯一的 ID，我也会收到相同的验证错误。这是因为它在 modalModal.js 页面中处于错误状态，所以我不知道如何解决这个问题。我只想要当我输入唯一 ID 并单击保存按钮时，它不应该给出验证错误。

```
_newCostingpage.gsp  (my view page)

    <div id="light" class="white_content" style="color: black;">
    <form action="#/cart" method="post">
    <input type="hidden" name="url" value="${grailsApplication.config.serverURL}"/>
    <p><label>first name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input name="firstName"
             class="formElement" data-bind='value: firstName'/></label></p>
    <p><label>last name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input name="lastName" 
              class="formElement" data-bind='value: lastName' /></label></p>
    <p><label>organisation: <input name="organisation" class="formElement" data-
              bind='value: organisation' /></label></p>
<p><label>email:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <input name="email" class="formElement" data-bind='value: email' /></label><label 
         id="errorDiv"></label></p>
<p><label>password:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="password" name="password"
         class="formElement" data-bind='value: password' /></label></p>
 <p><label style="margin-left: -37px;">confirm password:</label> <input
        type="password" name="confirmPassword" class="formElement" data-bind='value:
        confirmPassword' /></p>
 <p><input type="submit" value="register"/></p>
</form>
 <a href="javascript:void(0)"onclick="document.getElementById('light').style.display='none';document.getElementById('fade').style.display='none';clearBox();">Close</a>
        </div>
        <div id="fade" class="black_overlay"></div>
    </div>

Domain class :-\

  class Registration {
String firstName
String lastName
String organization
String email
String password
String confirmPassword

static constraints = {
    firstName(nullable:false)
    lastName(nullable:true)
    organization(blank:false)
    email(nullable:false,email:true,unique:true)
    password(blank:false)
    confirmPassword(blank:false)
               }
            } 
```

modalModal.js

```
var ratPack = $.sammy(function() {
this.post('#/cart', function() {
    var firstname = this.params['firstName'];
    var lastName = this.params['lastName'];
    var organisation = this.params['organisation'];
    var email = this.params['email'];
    var password = this.params['password'];
    var confirmPassword = this.params['confirmPassword'];
    var baseurl = this.params['url'];
    $.ajax({
        type : 'POST',
        url :'http://localhost:9191/guido-rest-
                          resource/api/registration/'+firstname+'/'+lastName+'/'+email,
        success : function() {
            alert("success:");
        },
        error:function(){
           $('#errorDiv').text("Email has already been taken");
        }
    });
    });
      });
        $(function() {
       ratPack.run();
        });
        function clearBox(){
       $('.formElement').val("");
       }

   RegistrationResource.groovy

         package common.rest.resourcepl
         import static org.grails.jaxrs.response.Responses.*
         import javax.ws.rs.Consumes
         import javax.ws.rs.GET
         import javax.ws.rs.Produces
         import javax.ws.rs.Path
       import javax.ws.rs.PathParam
       import javax.ws.rs.POST
      import javax.ws.rs.core.Response
      import common.servicepl.RegistrationService
     @Path('/api/registration')
       class RegistrationResource {
   @GET
   @Produces('text/plain')
   String getRegistrationRepresentation() {
    'Registration'
    }
   def registrationService;
    @POST
    @Path('/{firstname}/{lastName}/{email}')
    Response create(@PathParam('firstname') String firstname,
                @PathParam('lastName') String lastName,
                @PathParam('email') String email) {
                return  
        RegistrationService().createRegistration(firstname,lastName,email);
  }
     }

     RegistrationService.groovy

         package common.servicepl
         import common.persistencepl.Registration
         class RegistrationService {
              def createRegistration(String firstName,String lastName,String email) {
        println "Inside Registration Service"
        def reg = new Registration();
        reg.firstName = firstName;
        reg.lastName = lastName;
        reg.password = "asdf";
        reg.confirmPassword = "asdf";
        reg.email = email;
        reg.organization = "fasdf";
        if(reg.save([flush:true])){
           return true
        }
        else
        {
          return false
        }
          }
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:36:28.230

服务器应在响应中包含服务器端错误。

使这些错误消息成为 viewmodal 的属性，并将其绑定到样式正确的 html 段。

此外，当您从同一个应用程序调用服务时，不要指定完整路径，例如`http://localhost...`，指定相对于您当前页面的路径`/api/registration...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T19:50:49.757

In grails controller you should write:

```
if (!beanName.hasErrors() && beanName.validate()) {
        // TODO 
   } else {
         render status: Constants.SC_VALIDATION_FAILED, view: "viewName", model: [beanName: beanName]
} 
```

and in view:

```
<div>
 <g:hasErrors bean="${beanName}">
   <div class="errors">
     <g:renderErrors bean="${beanName}" as="list"/>
   </div>
 </g:hasErrors>
</div> 
```

# android - 带有片段的 chartengine - Android

> ID：13645262
> 
> 赞同：2
> 
> 时间：2012-11-30T12:27:44.430
> 
> 标签：android

所以我正在做的是，我有一个仪表板，它由视图寻呼机中的四个片段组成。第 4 个片段是我使用 achartsengine 制作的表盘图。我设法设置了从图表中获得的视图。但是发生的情况是图表移动到屏幕的最左侧。经过多次试验，我观察到图表根据我轻弹视图寻呼机的速度移动。阅读后我发现如果我将视图转换为位图，它将解决我的问题，但不幸的是，它只显示了一个空白布局。对此的任何见解都会非常有帮助。

[我的代码](http://pastebin.com/FLv0Ykz1)

# c++ - O2 中导致未定义符号的 gcc 优化标志

> ID：13645268
> 
> 赞同：2
> 
> 时间：2012-11-30T12:28:08.283
> 
> 标签：c++, optimization, gcc

我对 gcc 4.5.2 中的 -O2 有疑问。说我有这个代码：

```
//file.cpp
void test::f() {}
//file.h
struct test
{
    inline void f();
}; 
```

此代码在共享库中。现在，当我在没有 -O2 的情况下编译时，它工作正常。使用 -O2 表示 test::f() 是未定义的符号。显然 gcc 只是把它扔掉，因为它是“内联的”（尽管它实际上不是）。

我的问题是什么特定的优化标志会导致这种情况？这个想法是我想启用 -O2 但禁用该确切标志，以便我可以保持内联不受影响（这不是我的代码）。

我可能只是迭代所有这些，但是，这也可以是链接器标志，对吗？这工作太多了，我只希望有人能提供线索。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T12:35:00.727

该标准要求`inline`函数的定义存在于使用它的每个 TU 中。

删除`inline`或将函数的定义移动到头文件。即使您想要做的事情被允许，标记该功能也没有任何好处`inline`。

碰巧的是，在您的实施中，您遇到了问题，`-O2`但没有它显然没有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T12:40:55.083

最好的解决方案是修复或拒绝损坏的代码。内联函数必须在任何使用它们的翻译单元中定义，而这段代码打破了这个规则。

如果这不是一个选项，那么`-fkeep-inline-functions`可能会很好地修补问题以允许代码编译和链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:31:09.380

您可以使用 flag强制`gcc`忽略。`inline``-fno-inline`

# django - Django admin 查询集通过外键向后关系过滤

> ID：13645273
> 
> 赞同：7
> 
> 时间：2012-11-30T12:28:30.257
> 
> 标签：django, django-admin, django-admin-filters

我有模型 A 和 B，其中 B 对 A 有 FK。

我使用 django 1.3，我需要两个 django 管理过滤器：

```
1) a.b_set.exists() # (True/False)

2) not a.b_set.filter(some_condition=False).exists() # (True/False) 
```

我怎样才能做到这一点？可悲的是，我无法通过谷歌搜索找到任何解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T15:27:02.213

您需要阅读以下内容：[Django 1.3 或更低版本的 Django Admin 中的自定义过滤器](https://stackoverflow.com/questions/991926/custom-filter-in-django-admin-on-django-1-3-or-below)

这是我没有进行任何测试的第一次尝试，但是您应该或多或少地看到它是如何完成的-

```
from django.db import models
from django.contrib.admin.filterspecs import FilterSpec, ChoicesFilterSpec
from django.utils.encoding import smart_unicode
from django.utils.translation import ugettext as _

class BNullSetFilterSpec(FilterSpec):

    def __init__(self, f, request, params, model, model_admin):
        super(BSetFilterSpec, self).__init__(f, request, params, model, model_admin)

        self.links = (
            ('Yes', {'b__isnull': False}),
            ('No', {}))

    def title(self):
        return _('B Set')

# registering the filter
FilterSpec.filter_specs.insert(0, (lambda f: getattr(f, 'empty_bset', False), BNullSetFilterSpec)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:10:06.447

@ptrck 提到的是正确的。你不能切换到 1.4 吗？

在这种情况下，如所描述[的文档](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_filter)中所述，无需更改查找，请执行以下操作（对于第一个，然后是相应的第二个）：

```
from django.contrib.admin import BooleanFieldListFilter

class BInA(BooleanFieldListFilter):
    def queryset(self, request, queryset):
        if self.value() is True:
            return queryset.filter(a.b_set.exists())
        else:
            return queryset.filter(a.b_set.exists() is False) 
```

# php - 这是有效的 JSON 吗？如果是这样，那么我如何访问节点

> ID：13645280
> 
> 赞同：0
> 
> 时间：2012-11-30T12:28:52.673
> 
> 标签：php, json, parsing

阅读了我能找到的所有文章后，我想知道 json 数据是否有效。

我正在使用 php 发出此请求：

```
$myjson= file_get_contents('http://slhassall.rightboatexpert.com/api/boats');
 var_dump(json_decode($myjson)); 
```

这会将以下内容转储到页面，它是有效的 json 吗？

```
object(stdClass)[1]

  public 'pagination' =>

    object(stdClass)[2]

      public 'total' => int 32

      public 'num_per_page' => int 25

      public 'page' => int 1

  public 'results' => 

    array (size=25)

      0 => 

        object(stdClass)[3]

          public 'id' => int 54

          public 'manufacturer' => string 'Utrecht' (length=7)

          public 'condition' => string 'used' (length=4)

          public 'model' => string 'Iron Sailing Barge' (length=18)

          public 'marketing_status' => string 'For Sale' (length=8)

          public 'year' => null

          public 'stock_number' => null

          public 'location' => string 'Suffolk' (length=7)

          public 'description' => string 'Clipper design. Built in Utrecht 1988, 25m in

length, an elegantly converted Dutch sailing barge with fantastic internal and external

 social entertainment /display spaces. Suitable for corporate or pri' (length=201)

          public 'sale_status' => string 'For Sale' (length=8)

          public 'price' => int 149000

          public 'currency' => string 'GBP' (length=3)

          public 'thumbnail' => string '/api/images/262' (length=15)

          public 'boat_image_id' => int 262

      1 => 

        object(stdClass)[4]

          public 'id' => int 51

          public 'manufacturer' => string ' Wood' (length=5)

          public 'condition' => string 'used' (length=4)

          public 'model' => string 'MFV/Guard vessel ' (length=17)

          public 'marketing_status' => string 'For Sale' (length=8)

          public 'year' => int 1959

          public 'stock_number' => null

          public 'location' => string 'Great Yarmouth, Norfolk UK' (length=26)

          public 'description' => string '' (length=0)

          public 'sale_status' => string 'For Sale' (length=8)

          public 'price' => int 35000

          public 'currency' => string 'GBP' (length=3)

          public 'thumbnail' => string '/api/images/219' (length=15)

          public 'boat_image_id' => int 219

      2 => 
```

我问是因为当我尝试连接到节点时：

```
 $array = (json_decode($myjson));
    echo $array->boat->manufacturer; 
```

我收到此错误：

注意：未定义的属性：第 6 行 C:\wamp\www\json\index.php 中的 stdClass::$boat

注意：尝试在第 6 行的 C:\wamp\www\json\index.php 中获取非对象的属性

第 6 行是 echo 语句。我用谷歌搜索了这些错误代码，但无法弄清楚。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:33:36.077

您的 JSON 是有效的，因为无效的 JSON 会导致返回`NULL`： http: [//php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)
虽然我建议您在调用后进行检查，`json_decode`以便您知道发生了什么当您稍后访问对象并发现您正在访问非对象的属性时（即`NULL`）

您收到错误是因为您的对象的结构不是这样 - 正如您`var_dump`告诉您的那样，结果对象中没有属性`boat`。

从您的`var_dump`，这意味着该对象有两个属性`pagination`和`results`。其中 `results`有一个包含 25 个项目的数组。在每个项目中都有一个具有属性`id`、`manufacturer`等的对象`condition`。

而且，确实你的问题不包含 JSON，php`var_dump`没有给你一个 JSON ......

我不确定你想做什么。我猜你想打印每艘船的所有制造商，所以......（未经测试）

```
$object = json_decode($myjson);
if ($object == null) {
    // json is invalid, or $myjson actually contains NULL
} else {
    $array = $object->results;

    foreach ($array as $item) {
        echo $item->manufacturer;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:35:00.967

此 JSON 有效，但您正尝试访问不在根目录中的项目。返回的对象在根中有“facets”、“pagination”和“results”，但没有“boat”

这是我用 safari 解析的结果：

![safari下解析的json截图](../Images/8a0fa76f3cb74ac14818c01ce6e09cc5.png)

# delphi - selectcliprgn 对上下文菜单的影响

> ID：13645281
> 
> 赞同：0
> 
> 时间：2012-11-30T12:28:53.497
> 
> 标签：delphi, windows-7, delphi-2007

我基于 TcustomControl 创建了自己的图形组件。

该控件首先绘制一个边框区域以绘制文本信息，然后在控件的全宽和高度中设置一个矩形剪辑区域，然后在其中绘制图形。

定义剪辑区域，以便绘制的图形不会侵占边界区域并破坏文本信息。

在绘制过程结束时，使用删除剪辑区域

```
selectcliprgn(handle,0);
DeleteObject(HClip); 
```

这一切都很有效，问题是，当我为控件分配上下文菜单（按下鼠标右键时选择）时，菜单仅在光标位于被剪切的区域内时出现。当我右键单击边框区域时，将显示组件父控件上下文菜单。

任何想法为什么剪辑区域会影响显示哪个上下文菜单以及如何阻止它发生？

# python - 有没有办法在 Python 中访问模块的私有函数？

> ID：13645283
> 
> 赞同：-1
> 
> 时间：2012-11-30T12:28:59.347
> 
> 标签：python

我正在尝试访问子模块中的一些带下划线的函数`pandas`（特别是我想重用它们的日期转换代码），但它们带有下划线前缀，因此对我不可用。有没有办法规避这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:30:48.287

方法在 python 中并不是真正私有的。

您仍然可以访问带有下划线前缀的方法，但您不应该这样做。

> 在 Python 中不存在只能从对象内部访问的“私有”实例变量。但是，大多数 Python 代码都遵循一个约定：前缀为下划线的名称（例如 _spam）应被视为 API 的非公共部分（无论是函数、方法还是数据成员） . 它应被视为实施细节，如有更改，恕不另行通知。

来自[Python.org：私有变量和类本地引用](http://docs.python.org/2/tutorial/classes.html#tut-private)

# cakephp - 连接表上的 CakePHP 分页条件

> ID：13645296
> 
> 赞同：4
> 
> 时间：2012-11-30T12:29:37.007
> 
> 标签：cakephp

我的 cakephp 应用程序（2.2）应用程序具有以下内容：

```
NewsArticle HMBTM NewsCategory
NewsCategory HMBTM NewsArticle 
```

在我的新闻文章控制器函数 index() 中，我试图获取新闻类别 id 为 2 的新闻文章的分页列表。

这是我的代码（这是错误的）：

```
$this->paginate = array(
        'conditions' => array('newsArticle.news_category_id = 2'),
        'limit' => 10,
        'order' => array(
            'newsArticle.modified' => 'asc'
        )
    );
    $this->set('newsArticles', $this->paginate()); 
```

有人能告诉我哪里出错了吗？我猜这与连接表有关。

这是我得到的错误：

```
Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'newsArticle.news_category_id' in 'where clause' 
```

这是其产生的SQL：

SQL查询：

```
SELECT
    `NewsArticle`.`id`,
    `NewsArticle`.`title`,
    `NewsArticle`.`brief`,
    `NewsArticle`.`body`,
    `NewsArticle`.`filename`,
    `NewsArticle`.`dir`,
    `NewsArticle`.`mimetype`,
    `NewsArticle`.`filesize`,
    `NewsArticle`.`live`,
    `NewsArticle`.`user_id`,
    `NewsArticle`.`created`,
    `NewsArticle`.`modified`,
    `User`.`id`,
    `User`.`username`,
    `User`.`password`,
    `User`.`forename`,
    `User`.`surname`,
    `User`.`company`,
    `User`.`position`,
    `User`.`role`,
    `User`.`version_numbers_id`,
    `User`.`support_case_reference`,
    `User`.`support_web_password`,
    `User`.`webforms_email`,
    `User`.`tech_email`,
    `User`.`group_id`,
    `User`.`user_status_id`,
    `User`.`view_uat`,
    `User`.`manuals`,
    `User`.`filename`,
    `User`.`dir`,
    `User`.`mimetype`,
    `User`.`filesize`,
    `User`.`created`,
    `User`.`modified`,
    `User`.`live`,
    `User`.`tokenhash`
FROM `cakeclientarea`.`news_articles` AS `NewsArticle`
LEFT JOIN `cakeclientarea`.`users` AS `User`
    ON (`NewsArticle`.`user_id` = `User`.`id`)
WHERE
    `newsArticle`.`news_category_id` = 2
ORDER BY
    `newsArticle`.`modified` asc
LIMIT 10 
```

我可以从中看出它甚至没有触及连接表 news_articles_news_categories。

任何人都可以帮忙，这肯定很简单吗？我错过了什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T10:32:11.450

适用于 CakePHP 2.3.4（2013 年 6 月）

问题出在 Controller/Component/PaginatorComponent.php

函数 validateSort() 返回错误的订单行，因为它被设置为仅返回同一模型中属性的订单。正如文档在 validateSort 上所说

> 只能对字段或虚拟字段进行排序。

要解决此问题：

在控制器代码中（以用户控制器为例）：

```
public $components = array(
    'Paginator' => array(
        'className' => 'JoinedPaginator'),
    ); 
```

在函数中：

```
$this->paginate = array(
    'recursive'=>-1, // should be used with joins
    'joins'=>array(
        array(
            'table'=>'groups',
            'type'=>'inner',
            'alias'=>'Group',
            'conditions'=>array('User.group_id = Group.id')
        )
    )
)

$fields = array('User.name', 'User.id', 'Group.name');

$users = $this->paginate('User', array(), $fields); 
```

paginate 函数中的第三个参数是一个白名单，通常只有当前对象中的项目，但我们添加了所有白名单对象。

覆盖 Paginator，制作 Component/JoinedPaginator.php

```
<?php
App::uses('PaginatorComponent', 'Controller/Component');
class JoinedPaginatorComponent extends PaginatorComponent {

    public $Controller;

    function startup(Controller $controller) {
        $this->Controller = $controller;
    }

    public function validateSort(Model $object, array $options, array $whitelist = array()) {
        if (isset($options['sort'])) {
            $direction = null;
            if (isset($options['direction'])) {
                $direction = strtolower($options['direction']);
            }
            if (!in_array($direction, array('asc', 'desc'))) {
                $direction = 'asc';
            }
            $options['order'] = array($options['sort'] => $direction);
        }

        if (!empty($whitelist) && isset($options['order']) && is_array($options['order'])) {
            $field = key($options['order']);
            if (!in_array($field, $whitelist)) {
                $options['order'] = null;
                return $options;
            }
        }

        if (!empty($options['order']) && is_array($options['order'])) {
            $order = array();
            foreach ($options['order'] as $key => $value) {
                $field = $key;
                $alias = $object->alias;
                if (strpos($key, '.') !== false) {
                    list($alias, $field) = explode('.', $key);
                }
                // Changed the order field list, to include items in join tables
                if (isset($object->{$alias}) && $object->{$alias}->hasField($field, true)) {
                    $order[$alias . '.' . $field] = $value;
                } else if(in_array($alias.'.'.$field, $whitelist)){
                    // Adding a white list order, to include items in the white list
                    $order[$alias . '.' . $field] = $value;
                } else if ($object->hasField($field)) {
                    $order[$object->alias . '.' . $field] = $value;
                } elseif ($object->hasField($key, true)) {
                    $order[$field] = $value;
                }
            }
            $options['order'] = $order;
        }

        return $options;
    }

    public function paginate($object = null, $scope = array(), $whitelist = array()) {
        $this->settings = am ($this->Controller->paginate, $this->settings);
        return parent::paginate($object, $scope, $whitelist );
    }
} 
```

如您所见，设置没有发送到新的分页对象，所以我也覆盖了分页函数，只是为了收集设置。

这使您可以在 JOINED 表上进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:42:11.930

```
'conditions' => array('newsArticle.news_category_id = 2') 
```

shoule be:

```
'conditions' => array('newsArticle.news_category_id'=>'2') 
```

That doesn't really match the error but nothing else really sticks out.

You could try approaching it a different way to make sure it's not your model relationships causing the error.

```
$this->paginate('NewsArticle');
$this->paginate['NewsArticle']['conditions'] = array('newsArticle.news_category_id'=>'2');
pr($this->paginate); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T16:01:34.943

您还可以将您的功能切换到 NewsCategory 控制器，使用可包含并以这种方式对结果进行分页。这个链接提供了一个很好的例子来说明如何让它工作[http://www.24100.net/2012/07/cakephp-hasandbelongstomany-relationship-queries-demystified/](http://www.24100.net/2012/07/cakephp-hasandbelongstomany-relationship-queries-demystified/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-10T00:33:10.157

我花了 2 天的时间寻找带有分页的 cakephp 多连接条件的解决方案。找不到任何解决方案，因此想到将我的解决方案发布到具有多个连接和条件的分页。希望这对某人有用。

```
 public function index(){

        $data = $this->request->data;
        $searchText ='';

        if($this->request->is("post")) {
        $url = array('action'=>'index');
        $filters = array();
        echo("hello hello helloa");

        echo ($this->request->data);
                if(isset($data['Skinauditreport']['searchText']) && $data['Skinauditreport']['searchText']){
                        echo ($data['Skinauditreport']['searchText']);
                        //maybe clean up user input here??? or urlencode??
                        $filters['searchText'] = $data['Skinauditreport']['searchText'];
                }
                //redirect user to the index page including the selected filters
                $this->redirect(array_merge($url,$filters));
        }

        $this->Skinauditreport->recursive = 1;

        //Joining 2 tables, skinauditreports_users and users table
        $options['joins'] = array(
                array('table' =>'skinauditreports_users',
                'alias' => 'SkaUser',
                'type' => 'inner',
                'conditions' => array(
                        'Skinauditreport.id = SkaUser.ska_id'
                        )
                ),
                array('table' => 'users',
                'alias'=> 'User',
                'type' => 'inner',
                'conditions' => array(
                        'SkaUser.user_id = User.id'
                        )
                )
        );
        // Check user is admin user if then dont filter the report.
        if($this->Session->read('Auth.User.group_id') != '3'){
                $options['conditions'] = array(
                        'User.id' => $this->Auth->user('id')
                );
        }
        //Add this condition if there is a search text.
        if(isset($this->passedArgs["searchText"])) {
                 $options['conditions'] =array( array('OR' => array(
                                array('Skinauditreport.name LIKE' => "%".strtoupper($this->passedArgs["searchText"])."%"),
                                array('Skinauditreport.name LIKE' => "%".$this->passedArgs["searchText"]."%")
                        ))
                );

                $searchText = $this->passedArgs["searchText"];
        }

        $this->set('searchText',$searchText);
        //$skaReports = $this->Skinauditreport->find('all',$options);
        //$this->set('skaReports', $skaReports);

        $this->Paginator->settings = $options;
        $this->set('skaReports', $this->paginate('Skinauditreport'));

} 
```

# c# - Request.ClientCertificate.Subject 不是一直请求数据吗？

> ID：13645299
> 
> 赞同：1
> 
> 时间：2012-11-30T12:29:44.900
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, digital-certificate

我对我的应用程序进行了测试，以允许用户使用其数字证书登录。这并不复杂，因为它只需要一条线即可从磁卡中实际检索数据。

这就是我请求数据的方式：

```
@{
    string certDados = Request.ClientCertificate.Subject;
    string[] dataArray = certDados.Split(',');
    string data = dataArray.Last();
    string[] numberArr = data.Split(':');
    string number = numberArr.Last();   
}

<td>Utilizar Cert. Digital</td>
<td>@Html.CheckBox("hasDigital")
    @number
</td> 
```

问题是...我一直都无法获得电话号码。有时数字在那里，有时没有。如果我刷新页面几次，它会出现，下次我刷新它就不存在了..

我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:57:35.090

找到了解决办法。。

```
string certDados = "";
do
{
certDados = Request.ClientCertificate.Subject;
} while (certDados == ""); 
```

现在它正在工作......;O）

# macos - 通过 AVFoundation 获取视频中的帧数

> ID：13645306
> 
> 赞同：7
> 
> 时间：2012-11-30T12:30:11.563
> 
> 标签：macos, avfoundation

我正在尝试查找刚刚打开的视频中的帧数，而不是解码所有帧。

我打开`AVAsset`然后得到一个`AVAssetTrack`视频。接下来是什么 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-15T12:23:44.947

你可以这样做：

```
float durationInSeconds = CMTimeGetSeconds(asset.duration);
float framesPerSecond = assetTrack.nominalFrameRate;
float numberOfFrames = durationInSeconds * framesPerSecond; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-15T03:12:03.050

一种相对昂贵的方法是使用 AVAssetReader 读取所有帧并在执行过程中对其进行计数。

```
let asset = AVAsset(url: url)
let assetTrack = asset.tracksWithMediaType(AVMediaTypeVideo).first!
let assetReader = try! AVAssetReader(asset: self)
let assetReaderOutputSettings = [
    kCVPixelBufferPixelFormatTypeKey as String: NSNumber(unsignedInt: kCVPixelFormatType_32BGRA)
]
let assetReaderOutput = AVAssetReaderTrackOutput(track: assetTrack, outputSettings: assetReaderOutputSettings)
assetReaderOutput.alwaysCopiesSampleData = false
assetReader.addOutput(assetReaderOutput)
assetReader.startReading()

var frameCount = 0
var sample: CMSampleBufferRef? = assetReaderOutput.copyNextSampleBuffer()

while (sample != nil) {
    frameCount++
    sample = assetReaderOutput.copyNextSampleBuffer()
}

// now you have frame count
print(frameCount) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-03-10T03:03:16.267

这已更新到**Swift 4.2**并转换为`URL`.

```
import AVFoundation

extension URL {
    var videoFrameCount: Int? {
        let asset = AVAsset(url: self)
        guard let assetTrack = asset.tracks(withMediaType: .video).first else {
            return nil
        }

        var assetReader: AVAssetReader?
        do {
            assetReader = try AVAssetReader(asset: asset)
        } catch {
            print(error.localizedDescription)
            return nil
        }

        let assetReaderOutputSettings = [
            kCVPixelBufferPixelFormatTypeKey as String: NSNumber(value: kCVPixelFormatType_32BGRA)
        ]
        let assetReaderOutput = AVAssetReaderTrackOutput(track: assetTrack,
                                                         outputSettings: assetReaderOutputSettings)
        assetReaderOutput.alwaysCopiesSampleData = false
        assetReader?.add(assetReaderOutput)
        assetReader?.startReading()

        var frameCount = 0
        var sample: CMSampleBuffer? = assetReaderOutput.copyNextSampleBuffer()

        while (sample != nil) {
            frameCount += 1
            sample = assetReaderOutput.copyNextSampleBuffer()
        }

        return frameCount
    }
} 
```

如果它能够将 转换`URL`为`AVAsset`type `video`，它将继续。否则，`nil`返回一个值。

接下来，`AVAssetReader`创建一个。如果此步骤失败，它将再次返回`nil`。

由于一切都已正确设置，它现在将继续解析输出并计算帧数。只要`sample`产生 a ，循环就会继续，帧计数会增加。一旦不再产生样本，它将终止循环并返回 的值`frameCount`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-02-27T04:30:18.870

尽管使用`AVAssetReader`+的解决方案`AVAssetReaderTrackOutput`是正确的，但我建议`AVAssetReaderTrackOutput`使用`nil`输出设置进行创建。这样`AVAssetReader`就不会解压缩帧，并且您可以更快地获得结果。

这是一个示例实现：

```
int getNumberOfFrames(NSURL *url)
{
    AVURLAsset *asset = [AVURLAsset URLAssetWithURL:url options:nil];

    AVAssetTrack *videoTrack = [[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];

    AVAssetReaderTrackOutput *readerVideoTrackOutput = [AVAssetReaderTrackOutput assetReaderTrackOutputWithTrack:videoTrack outputSettings:nil];

    AVAssetReader *assetReader = [AVAssetReader assetReaderWithAsset:asset error:nil];
    [assetReader addOutput:readerVideoTrackOutput];

    [assetReader startReading];

    int nframes = 0;
    for (;;)
    {
        CMSampleBufferRef buffer = [readerVideoTrackOutput copyNextSampleBuffer];
        if (buffer == NULL)
        {
            break;
        }

        CMFormatDescriptionRef formatDescription = CMSampleBufferGetFormatDescription(buffer);
        CMMediaType mediaType = CMFormatDescriptionGetMediaType(formatDescription);
        if (mediaType == kCMMediaType_Video)
        {
            nframes++;
        }

        CFRelease(buffer);
    }

    return nframes;
} 
```

# firefox - webdriver 会改变 Firefox 中弹出窗口的外观吗？

> ID：13645316
> 
> 赞同：0
> 
> 时间：2012-11-30T12:30:43.200
> 
> 标签：firefox, selenium, popup, webdriver, selenium-firefoxdriver

我目前正在为[Selenium Builder](http://www.sebuilder.com/ "硒生成器")添加弹出窗口支持。这样做时，我注意到在正常使用 Firefox 和使用 Webdriver（通过 Selenium 服务器）驱动的 Firefox 之间，alert() 弹出窗口的工作方式存在差异。在正常使用中，alert() 弹出窗口显示为一个小的居中窗口，文档窗口的其余部分部分淡出：（[全尺寸](http://www.zarkonnen.com/alert_discrepancy/normal.png "全尺寸正常弹出图片")）

![Mac Firefox 正常显示弹出窗口](../Images/f9372702df09605afca5df651446339b.png)

当我使用 Webdriver/Selenium 导航到[同一页面](http://zarkonnen.com/alert.html "警报弹出示例")时，我得到一个标准的 Mac OS 窗口工具包弹出窗口：（[全尺寸](http://www.zarkonnen.com/alert_discrepancy/webdriver.png "全尺寸 webdriver 弹出图片")）

![Mac Firefox 在网络驱动时显示弹出窗口](../Images/cd1f8cf45c38064f1e76947799901894.png)

Webdriver 是否会告诉 Firefox 使用更标准的弹出式样式而不是通常使用的“漂亮淡出”样式？如果是，是否可以正确捕获弹出窗口的存在以进行警报处理？

我试图让警报处理在由 Builder 运行的 webdriver 的嵌入式副本中工作，但 fxdriver.modals 函数都不起作用。他们没有找到弹出窗口，而是只找到父文档窗口，我认为这种差异可能是造成这种情况的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:46:50.317

我建议在使用的配置文件中，显示警报的属性是不同的。 [Firefox 4：改变了警报行为？](https://stackoverflow.com/questions/5543427/firefox-4-changed-alert-behaviour)

当 webdriver-instance 打开时，请查看：about:config --> prompts.tab_modal.enabled。

通过从外部加载/设置配置文件，您可以将行为更改为您的首选设置。

# sql - 在 Visual Basic 2010 中使用 SQL 将项目添加到 Access 数据库

> ID：13645325
> 
> 赞同：1
> 
> 时间：2012-11-30T12:30:59.053
> 
> 标签：sql, visual-studio-2010

需要一点帮助。

我目前正在使用此代码将项目添加到 Visual Basic 2010 中的 Access 数据库

```
Imports System
Imports System.Data
Imports System.Collections
Imports System.Windows.Forms
Imports System.Resources
Imports System.Data.OleDb
Public Class Form2
Dim myConnection = New System.Data.OleDb.OleDbConnection()
Dim SqlCommand As OleDb.OleDbCommand = New OleDb.OleDbCommand
Private Sub Form2_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    'connects to the database when the form loads
    myConnection = New System.Data.OleDb.OleDbConnection()
    myConnection.ConnectionString = "Provider =Microsoft.ACE.OLEDB.12.0; Data Source =project.accdb; Persist Security Info =False;"
    Try
        myConnection.Open()

    Catch ex As Exception
        MsgBox("Error Please Go Back And Try Again")
        Console.WriteLine(ex.Message)

    End Try
    'adds items to the dropdown menu

    Dim result As OleDb.OleDbDataReader
    Dim sqlText As String
    Dim add1 As Integer = 0

    If myConnection.State <> ConnectionState.Open Then
        MsgBox("Connection is not open")
        Exit Sub
    End If

    sqlText = "select * from groups"
    SqlCommand = New OleDbCommand(sqlText, myConnection)
    result = SqlCommand.ExecuteReader()

    Do While result.Read()
        ComboBox1.Items.Insert(add1, result.GetValue(0))
        add1 = add1 + 1
    Loop

    result = Nothing
    SqlCommand = Nothing
End Sub
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    'Insert button
    Dim item As String = ""
    Dim price As String = ""
    Dim group As String = ""
    Dim dateandtime As Double
    Dim dateandtime2 As String = ""
    Dim sqlInsert As String = ""
    Dim result As Integer = -1
    Dim SqlCommand As OleDb.OleDbCommand = New OleDb.OleDbCommand

    If TextBox1.Text = "" Or TextBox2.Text = "" Then
        MsgBox("Item and Price Required!")
        Exit Sub
    End If

    item = TextBox1.Text
    price = TextBox2.Text.Trim
    group = ComboBox1.Text.Trim
    dateandtime = DateTimePicker1.Value.ToOADate()
    dateandtime2 = dateandtime.ToString
    sqlInsert = "INSERT INTO purchases (item, price, groupName, datetime) VALUES ('" + item + "', '" + price + "', '" + group + "', '" + dateandtime2 + "')"

    Try

        SqlCommand.Connection = myConnection
        SqlCommand.CommandText = sqlInsert
        result = SqlCommand.ExecuteNonQuery()

        If result = 0 Then
            MsgBox("No records inserted!")
        Else
            MsgBox(CStr(result) & " record inserted!")
        End If

        TextBox1.Clear()
        TextBox2.Clear()
        ComboBox1.Text = ""

    Catch ex As Exception
        MsgBox(ex.ToString)

    End Try

    result = -1
    SqlCommand = Nothing
End Sub 
```

但是每次我尝试添加任何东西时都会出现这个异常查看这里：http: [//i.stack.imgur.com/itd39.jpg](http://i.stack.imgur.com/itd39.jpg)有什么 想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-02T14:27:05.260

MystPhysX,

我意识到这个答案对于你的问题来说已经晚了几年，但是，对于任何在互联网上搜索类似问题的人（这就是我找到这个线程的方式），我想提供适用于的解决方案我的问题。

您正在使用“+”运算符连接 Visual Basic 中的 sqlInsert 字符串。我相信使用“&”运算符将解决抛出的错误。下面的链接将提供更多信息。

[http://msdn.microsoft.com/en-us/library/te2585xw.aspx](http://msdn.microsoft.com/en-us/library/te2585xw.aspx)

这是编辑后的代码行：

```
sqlInsert = "INSERT INTO purchases (item, price, groupName, datetime) VALUES ('" & item & "', '" & price & "', '" & group & "', '" & dateandtime2 & "')" 
```

# .net - 如何在桌面应用程序中使用 Deezer API 的 oAuth 身份验证？

> ID：13645328
> 
> 赞同：3
> 
> 时间：2012-11-30T12:31:12.607
> 
> 标签：.net, winforms, oauth, deezer

我开始编写一个使用[Deezer Api](http://developers.deezer.com/api/oauth)的 Winforms 应用程序。

现在，我坚持使用他们的**OAuth 身份验证**过程。

Deezer 的 OAuth 认证过程接受两种不同的流程来获得用户的认证和授权：**服务器端**流程和**客户端**流程。

*   Web 应用程序使用服务器端流程
*   客户端流程与 javascript 和移动应用程序中的浏览器客户端应用程序一起使用。

我假设（可能是错误的）我可以使用客户端流程来让用户在 Winforms 应用程序中进行身份验证：

然后我编写了一个表单，在 WebBrowser 控件中启动 Deezer 登录网页，认为我可以解析响应后获取访问令牌。通常，如果我将`response_type=token`参数添加到登录页面 URL，页面会允许它。

不幸的是，还`redirect_uri`必须提供一个参数。但是，我不打算使用网站，因为它不适用于我的场景。

显然，没有办法欺骗这一点，登录页面显示一条错误消息，指出它丢失并拒绝启动身份验证过程。

在询问 Deezer 如何针对 Winform 应用程序使用他们的 API 之前，我想知道是否有人已经遇到过这个问题，以及他是如何解决这个问题的。

因为我是 OAuth 新手，所以我想知道我是否遗漏了一些要点，或者 Deezer API 是否不适用于我的场景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:24:17.473

我试图为您的问题找到解决方法。这就是我所拥有的：

1.  使用您的 Web 浏览器控件，导航到 OAuth 连接 URI，
2.  使用您控制的域/子域作为重定向 URI。我们不需要真正的网络服务。例如`http://deezerauth.maneu.net`
3.  将事件处理程序添加到`Navigating`WebBrowser 控件的事件。

在此事件处理程序中，执行类似于以下代码的操作。

```
if(e.Uri.AbsoluteUri.Contains("http://deezerauth.maneu.net"))
{
    e.Cancel = true;
    MessageBox.Show("Welcome on Deezer.");
} 
```

*免责声明：我为 Deezer 移动团队工作，而不是 API 团队。我已将此问题转发给他们，看看他们是否有更好的解决方案。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:32:08.103

我终于找到了 redirect_uri 的破解方法：

“http://blank.org”正在工作！在这种情况下，我在相应的 Deezer MyApp 屏幕中将“blank.org”作为我的应用程序的域名。

```
https://connect.deezer.com/fr/oauth/auth.php?
      app_id=******&redirect_uri=http://blank.org&perms=basic_access
      &response_type=token 
```

然后访问令牌出现在 url 中，我只需要从 WebBrowser 控件中获取它！

在找到其他更优雅的东西之前，我会将此作为临时解决方案。

**编辑：忘记[http://blank.org](http://blank.org)！**

将我们不拥有的网站作为虚拟域名似乎是一个非常糟糕的主意。如果该站点确实存在，包含我们的 access_token 的重定向 URL 将被他们的 Web 服务器记录，这是非常糟糕的。最好是*定义一个不存在的虚拟域名*，然后在`redirect_uri`参数中把http://放在前面。我会被抛出一个“找不到站点”，但至少我会得到我的 access_token。

# javascript - 使用脚本动画单击功能

> ID：13645331
> 
> 赞同：1
> 
> 时间：2012-11-30T12:31:19.127
> 
> 标签：javascript, jquery, html

除了动画点击功能外，一切正常。

我希望在单击时具有动画背景。
我知道我可以在 html 中做 div 标签并调用它，但这不是我想要的。

谁能告诉我如何在脚本中完成它？

```
if (numbers[i] == 1){
    $('<div>1</div>').css({
            background: "url(img/1.png)", 
            'background-size': '100% 100%', 
            'background-repeat': 'no-repeat'
        })
        .data( 'number', numbers[i] )
        .attr( 'id', 'card'+numbers[i] )
        .appendTo( '#cardPile' + pile[i] ).draggable({
            containment: '#content',
            stack: '#cardPile1 div',
            cursor: 'move',
        })
        .click(function(){
            $('<div>1</div>').animate({
                height:'181px', 
                width:'169px', 
                top: '-30', 
                left: '-20', opacity: '0.4'
            }, 1000)
        });
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:36:08.323

当您单击第一个 div 时，您会创建第二个：

```
$('<div>1</div>').animate({.... 
```

也许你想在动画中使用相同的？

```
$(this).animate({... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:33:22.453

你需要这样`append`的div

```
$('<div>1</div>').animate({
      height:'181px',
      width:'169px',
      top: '-30', 
      left: '-20', 
      opacity: '0.4'}
   , 1000).appendTo('body'); 
```

# android - 在 Android 中使用 Apache POI

> ID：13645334
> 
> 赞同：3
> 
> 时间：2012-11-30T12:31:26.760
> 
> 标签：android, apache-poi

我有一个久经考验的代码来从 Excel 文件中获取信息。它在java中创造了奇迹。但是，当我尝试在 Android 中使用它时，我得到了这个：

```
11-30 13:26:24.339: I/dalvikvm(9762): Could not find method org.apache.commons.codec.digest.DigestUtils.md5, referenced from method org.apache.poi.hssf.usermodel.HSSFWorkbook.addPicture 
```

因此，当我尝试读取一行时，它总是返回 null。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T12:47:55.707

将评论推广到答案... Apache POI 有少量[依赖项，这些依赖项已在网站的“](http://poi.apache.org/overview.html#components)[组件”页面](http://poi.apache.org/overview.html#components)上完整列出。您需要包含您正在使用的任何 POI 模块的依赖项。在您的情况下，您得到的异常表明缺少 Commons Codec 库，添加它可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T19:27:55.350

要解决这个问题，您可以从“ [http://www.java2s.com/Code/Jar/c/Downloadcommonscodec18jar.htm](http://www.java2s.com/Code/Jar/c/Downloadcommonscodec18jar.htm) ”或“ [http://commons.apache”下载 Commons Codec 库（或 Jar 文件）。 org/proper/commons-codec/download_codec.cgi](http://commons.apache.org/proper/commons-codec/download_codec.cgi) ”链接..然后将该jar文件复制到项目的“libs”文件夹中。运行您的项目，完成..

# python - 将字典键连接到字符串

> ID：13645339
> 
> 赞同：3
> 
> 时间：2012-11-30T12:31:37.150
> 
> 标签：python, dictionary

我有 14 个字典，它们都包含相同的信息键（即时间、日期等），但值不同。我正在尝试构建一个函数，当字典被列为函数中的参数时，它将组合一个句子。

如果我有字典：

```
dic1 = {'Name': 'John', 'Time': 'morning'} 
```

我想将它们连接到一个字符串：

```
print 'Hello ' + dic1['Name']+', good ' + dic1['Time']+ '.' 
```

我该怎么办？

*注意，对不起，这会返回错误：

```
TypeError: can only concatenate list (not "str") to list 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T12:34:31.130

我认为您的意思是*interpolate*，而不是*concatenate*。

```
print "Hello %(Name)s, good %(Time)s" % dic1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T12:49:02.637

使用新样式的字符串格式（python2.6 或更高版本）：

```
print("Hello {Name}, good {Time}.".format(**dic1)) 
```

至于你的错误，我无法用你上面提供的代码来解释它。如果您尝试将`__add__`字符串添加到列表中，则会收到该错误：

```
>>> [45,3] + "foo"
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: can only concatenate list (not "str") to list 
```

但是将列表添加到字符串（如果您的字典将列表作为值，您将使用示例代码执行此操作）会产生稍微不同的错误：

```
>>> "foo" + [45,3]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: cannot concatenate 'str' and 'list' objects 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-05T10:03:57.957

```
web_response = {2L: 67.0, 3L: 13.67, 4L: 10.25, 5L: 11.8, 6L: 11.83} 
```

我有一个名为“web_response”的字典，对于**字典与字符串**的连接，我使用了**逗号**“，”

```
print "web_response=", web_response 
```

**输出：**

```
web_response= {2L: 67.0, 3L: 13.67, 4L: 10.25, 5L: 11.8, 6L: 11.83} 
```

# asp.net - 使用 facebook 登录并获取数据

> ID：13645347
> 
> 赞同：0
> 
> 时间：2012-11-30T12:32:31.873
> 
> 标签：asp.net, vb.net, facebook, facebook-graph-api, facebook-javascript-sdk

我正在使用 facebook api 登录用户，它工作正常，但我在检索数据和使用后面的代码时遇到了一些麻烦。我尝试了一些解决方案，但没有任何效果。

到目前为止的代码

```
<script type="text/javascript">
        // Load the SDK Asynchronously
        (function (d) {
            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
            if (d.getElementById(id)) { return; }
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/en_US/all.js";
            ref.parentNode.insertBefore(js, ref);
        } (document));

        // Init the SDK upon load
        window.fbAsyncInit = function () {
            FB.init({
                appId: 'MY_APP_ID',
                channelUrl: 'MY_URL',
                status: true,
                cookie: true,
                xfbml: true
            });

            FB.getLoginStatus(function (response) {
                if (response.status === 'connected') {
                    // connected
                } else if (response.status === 'not_authorized') {
                    // not_authorized
                } else {
                    // not_logged_in
                }
            });
        }
        function login() {
            FB.login(function (response) {
                if (response.authResponse) {
                    retrieveInfo();
                    window.location.reload();

                } else {
                    // cancelled
                }
            });

        }

        function retrieveInfo() {
            FB.api('/me', function (response) {

                var name = document.getElementById('name');
                name.innerHTML = response.name;

                var email = document.getElementById('email');
                email.innerHTML = response.email;

            });
        }
</script>

<fb:login-button onlogin="login()" perms="email,user_about_me,user_birthday">Login com Facebook</fb:login-button>

<div align="center">
    <div id="name"></div>
    <div id="email"></div>
</div> 
```

正如我所说，数据已被检索到，但我如何在后面的代码中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:41:19.157

Once you established a user is logged in, you can use the [Graph API](https://developers.facebook.com/docs/reference/api/). On the server, you can make an HTTP REST request to one of the URL's defined in that document, and receive the results.

You could create using [HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx), or the new .NET 4.5 [HttpClient](http://blogs.msdn.com/b/henrikn/archive/2012/02/16/httpclient-is-here.aspx) class.

# php - xscreensaver-settings 没有立即生效，为什么？

> ID：13645351
> 
> 赞同：1
> 
> 时间：2012-11-30T12:33:00.067
> 
> 标签：php, linux, x11

根据 xscreensaver 手册，为了使 .xscreensaver 文件中更改的设置立即生效，我们必须运行以下命令：

```
xrdb < ~/.Xdefaults 
xscreensaver-command -restart 
```

但即使当我执行上述语句时，xscreensaver 也会以先前的设置运行，并且新设置仅在 xscreensaver 在更改后运行一次后才会生效。有什么解决办法吗？

问候， Shreyas

PS：我正在通过一个 php 文件更改这些设置，并在更改设置后使用 exec 运行上述命令。

# java - 如何从 UI 控制触发作业

> ID：13645352
> 
> 赞同：0
> 
> 时间：2012-11-30T12:33:01.357
> 
> 标签：java, jsf, triggers, richfaces, seam

我正在使用与 JSF、JPA 和 RichFaces 集成的 Seam 2.1.2。

在我正在使用的应用程序中`QuartzTriggerHandle`，我需要`Trigger`从 UI 进行控制。我应该如何从用户界面执行此操作？

示例代码：

```
@Override
public String triggerCustomerMigration() {
    Calendar cal = Calendar.getInstance();
    cal.set(2040, Calendar.MAY, 10);
    QuartzTriggerHandle customerHandler = asyncCustomerScheduler
        .scheduleCustomerMigration(new Date(), "0 0/6 * * * ?", cal.getTime());
    return customerHandler.getTrigger().getName();
} 

@Asynchronous
@Transactional
@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
public QuartzTriggerHandle scheduleCustomerMigration(@Expiration Date when,
    @IntervalCron String cron, @FinalExpiration Date endDate) 
{
    QuartzTriggerHandle handle = new QuartzTriggerHandle(
    SystemJobs.MIGRATE_CUSTOMER.getJobName());
    PersistenceProvider.instance().setFlushModeManual(getEntityManager());
} 
```

# arrays - SQL Server 2005：将字符串拆分为数组并获取数组（x）？

> ID：13645354
> 
> 赞同：3
> 
> 时间：2012-11-30T12:33:12.267
> 
> 标签：arrays, sql-server-2005, split

我在这样的数据库表中有字符串：

```
Peter/Parker/Spiderman/Marvel
Bruce/Wayne/Batman/DC 
```

SQL中有没有办法从字符串中提取特定值，例如

```
Name = MyColumn(0)
SurName = MyColumn(1)
Character = MyColumn(3)
Company = MyColumn(4) 
```

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-30T12:39:35.863

我在这里假设总是正好有 4 个部分。

如果是这样，您可以替换`/`并`.`使用内置的[ParseName](http://msdn.microsoft.com/en-us/library/ms188006%28v=sql.90%29.aspx)函数。您的示例中唯一的问题是它从最后开始计算，因此您需要注意您想要的部分：

```
DECLARE @test VARCHAR(max);
SET @test = 'Peter/Parker/Spiderman/Marvel';
SET @test = Replace(@test, '/', '.');

SELECT Parsename(@test, 4),--returns Peter
       Parsename(@test, 3),--returns Parker
       Parsename(@test, 2),--returns Spiderman
       Parsename(@test, 1) --returns Marvel 
```

如果有可变数量的部分，您需要找到一个字符串拆分功能来为您执行此操作，没有一个好的内置功能。可以通过搜索找到许多选项：[https ://stackoverflow.com /search?q=[sql+server]+string+split](https://stackoverflow.com/search?q=%5Bsql%20server%5D%20string%20split)

警告 - 如果您尝试使用`PARSENAME`1-4 以外的数字，结果将始终为 NULL。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T13:03:54.903

如果你知道你将有 4 列，那么你也可以使用这个嵌套的 CTE 版本：

```
;with s1 (name, extra) as
(
  select left(data, charindex('/', data)-1), 
    substring(data, charindex('/', data) +1, len(data))
  from yourtable
),
s2 (name, surname, extra) as
(
  select name, 
    left(extra, charindex('/', extra)-1), 
    substring(extra, charindex('/', extra)+1, len(extra))
  from s1
),
s3 (name, surname, [character], company) as
(
  select name, 
    surname, 
    left(extra, charindex('/', extra)-1), 
    substring(extra, charindex('/', extra)+1, len(extra))
  from s2
)
select *
from s3; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/b2305c/14)

结果是：

```
|  NAME | SURNAME | CHARACTER | COMPANY |
-----------------------------------------
| Peter |  Parker | Spiderman |  Marvel |
| Bruce |   Wayne |    Batman |      DC | 
```

或者，您可以同时实现拆分数据的 CTE，然后实现`PIVOT`：

```
;with cte (item, data, colNum, rn) as
(
  select cast(left(data, charindex('/',data+'/')-1) as varchar(50)) item,
    stuff(data, 1, charindex('/',data+'/'), '') data,
    1 colNum,
    row_number() over(order by data) rn
  from yourtable
  union all
  select cast(left(data, charindex('/',data+'/')-1) as varchar(50)) ,
    stuff(data, 1, charindex('/',data+'/'), '') data,
    colNum+1, 
    rn
  from cte
  where data > ''
) 
select [1] as Name, 
  [2] as Surname, 
  [3] as [character], 
  [4] as company
from
(
  select item, colnum, rn
  from cte
) src
pivot
(
  max(item)
  for colnum in ([1], [2], [3], [4])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/9370f/13)

# java - 带有所有格量词的Java正则表达式不起作用？

> ID：13645359
> 
> 赞同：-3
> 
> 时间：2012-11-30T12:33:34.717
> 
> 标签：java, regex, expression

似乎我完全被阻止了，因为我不知道为什么这段代码总是打印“true”：

```
public class Main {

    public static void main(String[] args)  {   
    Pattern p = Pattern.compile("[1-9]{1,2}");
    Matcher m = p.matcher("1234567");
    System.out.println(m.find());   
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:36:33.940

`Matcher.find`将对 执行部分匹配，`String`因此将始终找到要匹配的数字。您需要使用`Matcher.matches()`来匹配完整的`String`：

```
System.out.println(m.matches()); 
```

# maven - 如何使 Maven 部署插件只上传特定文件？

> ID：13645362
> 
> 赞同：5
> 
> 时间：2012-11-30T12:33:54.437
> 
> 标签：maven, deployment, maven-deploy-plugin

我想向Nexus 中[已发布的版本添加两个 zip 。](https://stackoverflow.com/questions/13621415/how-to-control-the-group-artifact-version-coordinates-of-a-maven-artifact)
从本质上讲，它们是应用程序的压缩演示和同一应用程序的扩展版本，也是压缩的。

使用 Deploy 插件，我在我的 pom 中定义了两个执行，每个文件一个，并将它们绑定到部署阶段。这是演示的一个：

```
<execution>
   <id>deploy-essential</id>
      <phase>deploy</phase>
      <goals>
         <goal>deploy-file</goal>
      </goals>
      <configuration>
         <file>${project.build.directory}/${project.artifactId}-${project.version}-demo.zip</file>
         <groupId>${project.groupId}</groupId>
         <artifactId>myproject</artifactId>
         <version>${project.version}</version>
         <classifier>demo</classifier>
         <repositoryId>nexus</repositoryId>
         <url>${targetrepository}</url>
         <generatePom>false</generatePom>
      </configuration>
   </execution> 
```

我希望 Maven 在执行此操作时上传文件并将元数据更新到给定的 G/A/V 坐标。但是，它会将给定文件和包含完整版本的姊妹文件上传到给定坐标，然后将它们再次上传到原始坐标。

然后它继续为第二次执行再次执行所有这些操作。这是我的日志的摘录：

```
[INFO] --- maven-deploy-plugin:2.7:deploy-file (deploy-demo) @ bundle ---
Downloading: http://nexus/repositories/snapshots/mygroup/myproject/1.2.6-SNAPSHOT/maven-metadata.xml
2 KB   

Downloaded: http://nexus/repositories/snapshots/mygroup/myproject/1.2.6-SNAPSHOT/maven-metadata.xml (2 KB at 4.8 KB/sec)
Uploading: http://nexus/repositories/snapshots/mygroup/myproject/1.2.6-SNAPSHOT/myproject-1.2.6-20121130.102624-5-demo.zip
...           
Uploaded: http://nexus/repositories/snapshots/mygroup/myproject/1.2.6-SNAPSHOT/myproject-1.2.6-20121130.102624-5-demo.zip (13032 KB at 23105.2 KB/sec)
Downloading: http://nexus/repositories/snapshots/mygroup/myproject/maven-metadata.xml
533 B      

Downloaded: http://nexus/repositories/snapshots/mygroup/myproject/maven-metadata.xml (533 B at 34.7 KB/sec)
Uploading: http://nexus/repositories/snapshots/mygroup/myproject/1.2.6-SNAPSHOT/maven-metadata.xml
2 KB    

Uploaded: http://nexus/repositories/snapshots/mygroup/myproject/1.2.6-SNAPSHOT/maven-metadata.xml (2 KB at 89.4 KB/sec)
Uploading: http://nexus/repositories/snapshots/mygroup/myproject/maven-metadata.xml
533 B   

Uploaded: http://nexus/repositories/snapshots/mygroup/myproject/maven-metadata.xml (533 B at 32.5 KB/sec)
Downloading: http://nexus/repositories/snapshots/mygroup/bundle/1.2.6-SNAPSHOT/maven-metadata.xml
861 B   

Downloaded: http://nexus/repositories/snapshots/mygroup/bundle/1.2.6-SNAPSHOT/maven-metadata.xml (861 B at 3.8 KB/sec)
Uploading: http://nexus/repositories/snapshots/mygroup/bundle/1.2.6-SNAPSHOT/bundle-1.2.6-20121130.102625-3-full.zip
...           
Uploaded: http://nexus/repositories/snapshots/mygroup/bundle/1.2.6-SNAPSHOT/bundle-1.2.6-20121130.102625-3-full.zip (13065 KB at 18531.7 KB/sec)
Downloading: http://nexus/repositories/snapshots/mygroup/bundle/maven-metadata.xml
410 B      

Downloaded: http://nexus/repositories/snapshots/mygroup/bundle/maven-metadata.xml (410 B at 8.5 KB/sec)
Uploading: http://nexus/repositories/snapshots/mygroup/bundle/1.2.6-SNAPSHOT/maven-metadata.xml
861 B   

Uploaded: http://nexus/repositories/snapshots/mygroup/bundle/1.2.6-SNAPSHOT/maven-metadata.xml (861 B at 27.1 KB/sec)
Uploading: http://nexus/repositories/snapshots/mygroup/bundle/maven-metadata.xml
410 B   

Uploaded: http://nexus/repositories/snapshots/mygroup/bundle/maven-metadata.xml (410 B at 5.1 KB/sec)
Uploading: http://nexus/repositories/snapshots/mygroup/bundle/1.2.6-SNAPSHOT/bundle-1.2.6-20121130.102625-3-demo.zip
...           
Uploaded: http://nexus/repositories/snapshots/mygroup/bundle/1.2.6-SNAPSHOT/bundle-1.2.6-20121130.102625-3-demo.zip (13032 KB at 13631.1 KB/sec)
Uploading: http://nexus/repositories/snapshots/mygroup/bundle/1.2.6-SNAPSHOT/maven-metadata.xml
861 B      

Uploaded: http://nexus/repositories/snapshots/mygroup/bundle/1.2.6-SNAPSHOT/maven-metadata.xml (861 B at 56.1 KB/sec) 
```

这对于 SNAPSHOT 来说不是什么大事，但它完全阻止了发布，因为 Nexus 被配置为拒绝重新部署。

我不认为这种行为是有意的，而且我确信我遗漏了一些东西。我能以某种方式让 Maven 只上传我实际配置的文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-03T14:24:25.017

因为您没有禁用默认部署机制，所以它仍在执行中。你需要这样的东西：

```
 <plugin>
            <artifactId>maven-deploy-plugin</artifactId>
            <executions>
                <!-- disable standard deploy -->
                <execution>
                    <id>default-deploy</id>
                    <phase>none</phase>
                </execution>
                <execution>
                    <id>deployEssential</id>
                    <phase>deploy</phase>
                    ...
                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-31T18:08:58.180

使用内置部署插件的替代方法（用于部署 Maven 工件）：

*   禁用内置部署机制
*   `wagon-maven-plugin`为部署阶段启用
*   将 FTP 凭据添加到`HOME/.m2/settings.xml`
*   执行`mvn deploy`以复制 FTP 文件

* * *

```
<!-- disable standard deploy -->
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-deploy-plugin</artifactId>
  <version>3.0.0-M1</version>
  <executions>
    <execution>
      <id>default-deploy</id>
      <phase>none</phase>
    </execution>
  </executions>
</plugin>
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>wagon-maven-plugin</artifactId>
  <version>1.0</version>
  <executions>
    <execution>
      <id>deploy-release</id>
      <phase>deploy</phase>
      <goals>
        <goal>upload</goal>
      </goals>
      <configuration>
        <serverId>nexus</serverId>
        <url>${targetrepository}</url>
        <fromDir>${project.build.directory}</fromDir>
        <toDir>${project.version}</toDir>
        <includes>${project.artifactId}-${project.version}-demo.zip</includes>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T13:04:48.790

为什么不使用可以将工件附加到当前部署的程序集插件，或者使用可以简单地将其他工件附加到您的构建的 build-helper-maven-plugin。在通常的构建过程中使用部署插件是错误的方式。

# sql - SQL Server 按位处理，如 C# 枚举标志

> ID：13645363
> 
> 赞同：31
> 
> 时间：2012-11-30T12:33:57.027
> 
> 标签：sql, sql-server, bitwise-operators

如何在 SQL Server 中使用 C# 中的枚举等标志的处理？

* * *

例如，如何返回属于列表或条件一部分的用户列表，如下所示：

```
ConditionAlpha = 2
ConditionBeta  = 4
ConditionGamma = 8 
```

...

然后会有一些用户对他们有这些条件，如下所示：

```
User1: 6 (conditions Alpha and Beta)
User2: 4 (condition Beta)
User3: 14 (conditions Alpha, Beta and Gamma) 
```

...

我们希望能够进行查询，我们说让所有用户都具有第一个条件 Alpha，在这种情况下，即使他们还有其他条件，它也会返回用户 1 和 3。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-30T12:52:58.497

用于检查 SQL 中是否设置标志的位运算符是`&`. 该`WHERE`子句需要计算为一个`BOOLEAN`表达式，如下所示：

```
create table #temp (id int, username varchar(20), flags int)

insert into #temp values
(1, 'User1', 6 /* (2 | 4) */),
(2, 'User2', 4),
(3, 'User3', 14 /* (2 | 4 | 8) */)

declare @ConditionOne int = 2

select *
from   #temp
where  flags & @ConditionOne <> 0

declare @ConditionTwo int = 4

select *
from   #temp
where  flags & @ConditionTwo <> 0

declare @ConditionThree int = 8

select *
from   #temp
where  flags & @ConditionThree <> 0

drop table #temp 
```

这些查询返回以下结果集：

```
id          username             flags
----------- -------------------- -----------
1           User1                6
3           User3                14

id          username             flags
----------- -------------------- -----------
1           User1                6
2           User2                4
3           User3                14

id          username             flags
----------- -------------------- -----------
3           User3                14 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-30T15:46:03.903

虽然 James 建议的按位运算符会起作用，但它在关系数据库中的性能并不高，尤其是当您尝试扩展到数百万条记录时。原因是 where 子句中的函数是不可[搜索](https://stackoverflow.com/a/799616/285795)的（它们阻止了索引查找）。

我要做的是创建一个包含所有可能的标志和条件组合的表，这将启用条件上的索引查找。

填充标志条件。我用了一个（tinyint）。如果您需要更多标志，您应该能够扩展这种方法：

```
CREATE TABLE FlagConditions (
      Flag TINYINT
    , Condition TINYINT
    , CONSTRAINT Flag_Condition PRIMARY KEY CLUSTERED (Condition,Flag)
);

CREATE TABLE #Flags (
      Flag TINYINT IDENTITY(0,1) PRIMARY KEY CLUSTERED
    , DummyColumn BIT NULL);
GO

INSERT #Flags
        ( DummyColumn )
SELECT NULL;
GO 256

CREATE TABLE #Conditions(Condition TINYINT PRIMARY KEY CLUSTERED);

INSERT #Conditions ( Condition )
    VALUES  (1),(2),(4),(8),(16),(32),(64),(128);

INSERT FlagConditions ( Flag, Condition )        
    SELECT
    Flag, Flag & Condition
    FROM #Flags f
    CROSS JOIN #Conditions c
    WHERE Flag & Condition <> 0;

DROP TABLE #Flags;
DROP TABLE #Conditions; 
```

现在，您可以在需要有效查找枚举按位条件的任何时候使用 FlagConditions 表：

```
DECLARE @UserFlags TABLE (Username varchar(10), Flag tinyint);

INSERT @UserFlags(Username, Flag)
    VALUES ('User1',6),('User2',4),('User3',14);

DECLARE @Condition TINYINT = 2;

SELECT u.*
FROM @UserFlags u
INNER JOIN FlagConditions fc ON u.Flag = fc.Flag
WHERE fc.Condition = @Condition; 
```

这将返回：

```
Username   Flag
---------- ----
User1      6
User3      14 
```

您的 DBA 会感谢您走这条面向设置的路线。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-11-16T14:47:30.277

我有几乎同样的问题，可以想出这样的解决方案：

```
SELECT  t.value
    , ISNULL(t.C1 + ', ', '') + ISNULL(t.C2, '') + ISNULL(', ' + t.C3, '') AS [type]
FROM
(
    SELECT value,
        CASE WHEN (type & 2) <> 0  THEN 'Type1' END AS C1,
         CASE WHEN (type & 4) <> 0  THEN 'Type2' END AS C2,
         CASE WHEN (type & 8) <> 0  THEN 'Type3' END AS C3
    FROM db.Agent
) t 
```

结果如下：

```
value       type
----------  ------------------------------------
14          Type1, Type2, Type3
12          Type2, Type3
14          Type1, Type2, Type3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-02T14:36:22.773

C# 枚举：`CopEntry = 1 << 17`

SQL 服务器：`case when (Features & power(2, 17)) = 0 then 0 else 1 end as COPEntry`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-16T13:39:27.040

与纯 T-SQL相同[，](https://stackoverflow.com/a/13648449/1507124)因此它不仅适用于 SSMS 或其他地方

```
DROP TABLE IF EXISTS flag_conditions
CREATE TABLE flag_conditions
(
    flag      TINYINT,
    condition TINYINT,
    CONSTRAINT Flag_Condition PRIMARY KEY CLUSTERED (condition, flag)
);

CREATE TABLE #Flags
(
    Flag        TINYINT IDENTITY (0,1) PRIMARY KEY CLUSTERED,
    DummyColumn BIT NULL
);
GO

WITH x AS (SELECT n FROM (VALUES (0), (1), (2), (3), (4), (5), (6), (7), (8), (9)) v(n))
INSERT #Flags
    (DummyColumn)
SELECT NULL
FROM (
         SELECT ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) AS n
         FROM x ones,
              x tens,
              x hundreds,
              x thousands
     ) t
WHERE n <= 256;

SELECT *
FROM #Flags;

CREATE TABLE #Conditions
(
    Condition TINYINT PRIMARY KEY CLUSTERED
);

INSERT #Conditions (Condition)
VALUES (1),
       (2),
       (4),
       (8),
       (16),
       (32),
       (64),
       (128);

INSERT flag_conditions (flag, condition)
SELECT Flag,
       Flag & Condition
FROM #Flags f
         CROSS JOIN #Conditions c
WHERE Flag & Condition <> 0;

DROP TABLE #Flags;
DROP TABLE #Conditions;

SELECT *
FROM flag_conditions; 
```

# c++ - 检测函数参数类型

> ID：13645366
> 
> 赞同：2
> 
> 时间：2012-11-30T12:34:07.807
> 
> 标签：c++, c++11, decltype, result-of

我使用以下代码来检测给定函数的长参数。

所以，给定：

```
int f(int *) { return 0; } 
```

我想提取`int *`.

这是我的尝试：

```
template<class T, class U> struct SingleArg {
    typedef U MyArg;
};

template<class T, class U> SingleArg<T, U> fT(T (*p)(U));

int main() {
    std::result_of<decltype(fT(f))>::type::MyArg t;
} 
```

然而，这不起作用并且 gcc 4.6 给出了错误

```
> error: std::result_of<SingleArg<int, int*> >::type has not been
> declared 
```

所以，我有两个问题：

a) 上面的代码有什么问题？

b）是否有可能以任何其他方式/方式做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T14:26:01.410

```
#include <type_traits>

template <typename Function>
struct arg_type;

template <class Ret, class Arg>
struct arg_type<Ret(Arg)> {
  typedef Arg type;
};

int f(int *) {
  return 0;
};

int main(int, char**) {
  static_assert(std::is_same<int*, arg_type<decltype(f)>::type>::value, "different types");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:15:49.103

这对我有用：

```
// if you want the type
typedef decltype(fT(f))::MyArg theType;

// if you want the name (may need demangling depending on your compiler)
std::cout << typeid(decltype(fT(f))::MyArg).name() << std::endl; 
```

对于解构，请参见例如`abi::__cxa_demangle`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T13:35:24.277

```
int f(int *) { return 0; }

template<class T, class U> struct SingleArg {
    typedef U MyArg;
};

template<typename T> 
struct the_same_type
{
 typedef T type;   
};

template<class T, class U> SingleArg<T, U> fT(T (*p)(U));

int main() {

    int k;
    the_same_type<decltype(fT(f))>::type::MyArg t= &k;
    return 0;
} 
```

# php - 如果 POST 值不为空，则 PHP foreach 循环

> ID：13645367
> 
> 赞同：0
> 
> 时间：2012-11-30T12:34:09.247
> 
> 标签：php, post, foreach, null

我有这个`PHP` `loop`：

```
foreach($_POST['af_break_date'] as $id=>$value) {
    $update_break_date_query = "UPDATE studentdates SET student_break_date = '$value' WHERE student_date_id = '$id';";
    $update_break_date_sql = mysql_query($update_break_date_query) or die(mysql_error());
} 
```

我只想在`$update_break_date_sql`每个`$_POST['af_break_date']` **不为**空的情况下运行。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:36:15.950

```
foreach($_POST['af_break_date'] as $id=>$value)
{
    if($value != '')
    {
        $update_break_date_query = "UPDATE studentdates SET student_break_date = '$value' WHERE student_date_id = '$id';";
        $update_break_date_sql = mysql_query($update_break_date_query) or die(mysql_error());
    }
 } 
```

不要忘记保护 SQL 注入，因为您将原始用户输入添加到查询中。查看 PDO 或 MySQLi 和参数化查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:35:34.960

**采用`isset`**

```
if(isset($_POST['af_break_date'] && 
strlen(implode("",$_POST['af_break_date']))>0)
{
....
...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:38:38.907

```
if( isset( $_POST['af_break_date'] ) && is_array(  $_POST['af_break_date'] )) {
    foreach($_POST['af_break_date'] as $id=>$value) {
        $update_break_date_query = "UPDATE studentdates SET student_break_date = '$value' WHERE student_date_id = '$id';";
        $update_break_date_sql = mysql_query($update_break_date_query) or die(mysql_error());
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T12:40:28.093

使用 !empty();

例如

$价值=假；

```
isset($value); //return true
!empty($value); //return false 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T12:40:40.823

只需添加一个条件来检查并避免空值

```
if($_POST['af_break_date']){
    foreach($_POST['af_break_date'] as $id=>$value) {
      if(!$value) continue;
      $update_break_date_query = "UPDATE studentdates SET student_break_date = '$value' WHERE student_date_id = '$id';";
      $update_break_date_sql = mysql_query($update_break_date_query) or die(mysql_error());
    }
} 
```

不要使用`mysql_*`函数，它们很快就会被弃用。而是使用 mysqli 或 PDO 来连接数据库。使用准备好的语句来避免 SQL 注入，并在此之前在将数据更新到数据库之前进行验证。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-30T12:42:19.530

isset 的替代方法是空的，它将检查数组是否为空，因此由于它总是被发布，我们在运行 foreach 循环之前检查它是否为空。

```
if (!empty($_POST['af_break_date']) && is_array($_POST['af_break_date'])) {
    foreach($_POST['af_break_date'] as $id=>$value) {
        $update_break_date_sql = mysql_query("UPDATE studentdates SET student_break_date = '$value' WHERE student_date_id = '$id'") or die(mysql_error());
    }
} 
```

# silverlight - 公共语言运行时异常捕获

> ID：13645378
> 
> 赞同：1
> 
> 时间：2012-11-30T12:34:50.827
> 
> 标签：silverlight, visual-studio-2012, windows-phone-7.1, invalidoperationexception

我希望 StackOverflow 上的人能帮助我解决以下问题：

我有一个使用 VS2012 打开的 WP7.1 项目。另外，我启用了公共语言运行时异常。通过这样做，我想捕捉并修复代码中可能存在的大多数错误。

在模拟器中运行项目时，出现以下异常：

```
System.Reflection.TargetInvocationException occurred
  Message=TargetInvocationException
  StackTrace:
       at System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark& stackMark)
       at System.Reflection.RuntimePropertyInfo.InternalGetValue(PropertyInfo thisProperty, Object obj, Object[] index, StackCrawlMark& stackMark)
       at System.Reflection.RuntimePropertyInfo.GetValue(Object obj, Object[] index)
       at System.Windows.CLRPropertyListener.get_Value()
       at System.Windows.PropertyAccessPathStep.ConnectToPropertyInSource(Boolean isSourceCollectionViewCurrentItem)
       at System.Windows.PropertyAccessPathStep.ConnectToProperty()
       at System.Windows.PropertyAccessPathStep.ReConnect(Object newSource)
       at System.Windows.PropertyPathListener.ReConnect(Object source)
       at System.Windows.Data.BindingExpression.SourceAcquired()
       at System.Windows.Data.BindingExpression.TargetLoaded(Object o, RoutedEventArgs e)
       at MS.Internal.CoreInvokeHandler.InvokeEventHandler(Int32 typeIndex, Delegate handlerDelegate, Object sender, Object args)
       at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName)
  InnerException: System.InvalidOperationException
       Message=InvalidOperationException
       StackTrace:
            at System.Windows.Duration.get_TimeSpan()
            at System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark& stackMark)
            at System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark& stackMark)
            at System.Reflection.RuntimePropertyInfo.InternalGetValue(PropertyInfo thisProperty, Object obj, Object[] index, StackCrawlMark& stackMark)
            at System.Reflection.RuntimePropertyInfo.GetValue(Object obj, Object[] index)
            at System.Windows.CLRPropertyListener.get_Value()
            at System.Windows.PropertyAccessPathStep.ConnectToPropertyInSource(Boolean isSourceCollectionViewCurrentItem)
            at System.Windows.PropertyAccessPathStep.ConnectToProperty()
            at System.Windows.PropertyAccessPathStep.ReConnect(Object newSource)
            at System.Windows.PropertyPathListener.ReConnect(Object source)
            at System.Windows.Data.BindingExpression.SourceAcquired()
            at System.Windows.Data.BindingExpression.TargetLoaded(Object o, RoutedEventArgs e)
            at MS.Internal.CoreInvokeHandler.InvokeEventHandler(Int32 typeIndex, Delegate handlerDelegate, Object sender, Object args)
            at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName) 
```

和

```
System.InvalidOperationException occurred
  Message=InvalidOperationException
  StackTrace:
       at System.Windows.Duration.get_TimeSpan()
       at System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark& stackMark)
       at System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark& stackMark)
       at System.Reflection.RuntimePropertyInfo.InternalGetValue(PropertyInfo thisProperty, Object obj, Object[] index, StackCrawlMark& stackMark)
       at System.Reflection.RuntimePropertyInfo.GetValue(Object obj, Object[] index)
       at System.Windows.CLRPropertyListener.get_Value()
       at System.Windows.PropertyAccessPathStep.ConnectToPropertyInSource(Boolean isSourceCollectionViewCurrentItem)
       at System.Windows.PropertyAccessPathStep.ConnectToProperty()
       at System.Windows.PropertyAccessPathStep.ReConnect(Object newSource)
       at System.Windows.PropertyPathListener.ReConnect(Object source)
       at System.Windows.Data.BindingExpression.SourceAcquired()
       at System.Windows.Data.BindingExpression.TargetLoaded(Object o, RoutedEventArgs e)
       at MS.Internal.CoreInvokeHandler.InvokeEventHandler(Int32 typeIndex, Delegate handlerDelegate, Object sender, Object args)
       at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName)
       at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex,
 String eventName) 
```

显然这两个异常是相互关联的，因为它们一个接一个地抛出并且包含相同的内部异常。

在抛出这些异常的页面上，我使用了 WPToolkit 和一些自定义控件。只是 LoopingSelector 使用了 Duration 结构。但我认为 LoopingSelector 的代码没有错。

有人可以指出寻找错误的方向吗？XAML 绑定？铸件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:43:55.737

似乎我能够找到解决此问题的方法。

在某些情况下，**SSME.NaturalDuration.TimeSpan**可以为空。对于这些情况，**NaturalDuration**属性有一个标志**HasTimeSpan**，当无法检索 TimeSpan 值时它返回 false。

因此，我将绑定逻辑移至代码后面。我总是在设置绑定之前检查**SSME.NaturalDuration.HasTimeSpan 。**

# struts2 - Struts2：从会话对象中获取值

> ID：13645381
> 
> 赞同：1
> 
> 时间：2012-11-30T12:35:01.473
> 
> 标签：struts2

我有一个与 Struts2 会话有关的问题。我的数据库代码是：

```
public LinkedList<AddNewPatientBean> listOfCheckinPat(AddNewPatientBean patientBean) {

    LinkedList<AddNewPatientBean> listOfCheckin = new LinkedList<AddNewPatientBean>();
    int checkinVal = 1;
    int checkinVal1 = 1;
    String selectQuery = " select * from pat_checkin where dispName=? AND ownerId=? AND checkIn=? ";
    //   lockValue.add(new AddNewPatientBean("1"));
       System.out.println("dispname1  "+patientBean.getDispName());
       System.out.println("dispname2  "+patientBean.getOwnerId());
       System.out.println("dispname3  "+checkinVal);

    try {
        con = DBConnection.dbConn();
        pStatement = con.prepareStatement(selectQuery);
        pStatement.setString(1, patientBean.getDispName());
        pStatement.setString(2, patientBean.getOwnerId());
        pStatement.setInt(3, checkinVal);
        rs = pStatement.executeQuery();
        while (rs.next()) {
            checkinVal1++;
            listOfCheckin.add(new AddNewPatientBean(rs.getInt("checkIn_id"),rs.getInt("pat_id"),rs.getString("patName"),rs.getString("dispName"),rs.getString("ownerId"),rs.getInt("checkIn")));
        }

    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try {
            System.out.println("checked detail dao size "+listOfCheckin.size()+"     RS VAL "+rs+"  "+checkinVal1);
            con.close();
            pStatement.close();
            rs.close();

        } catch (Exception e1) {
            e1.printStackTrace();
        }

    }

    return listOfCheckin;
} 
```

Bean Class 代码构造函数：

```
public AddNewPatientBean(int checkin_id, int id, String patName, String dispName, String usermail, int chkinOrchkoutVal) {
    super();
    this.checkin_id = checkin_id;
    this.id = id;
    this.patName = patName;
    this.dispName = dispName;
    this.useremail = usermail;
    this.chkinOrchkoutVal = chkinOrchkoutVal;
} 
```

这是动作类：

```
//list
System.out.println("Owner ID is ------->>>  "+ownerId);
AddNewPatientBean bean = new AddNewPatientBean(r3, ownerId,subOwnerId);
listCheckinPat = addNewPatServInter.listOfCheckinPatServ(bean);
for( AddNewPatientBean nsns : listCheckinPat) {
      System.out.println("heoollmmmmm*****************   "+nsns.getPatName());
      System.out.println("heoollmmmmm*****************   "+nsns.getId());
      System.out.println("heoollmmmmm*****************   "+nsns.getChkinOrchkoutVal());

      session.put("waitList", listCheckinPat);
} 
```

到这里一切都运行良好。现在我想从 JSP 页面中的会话中获取值。我怎样才能获得价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:31:50.593

你可以这样写：

```
<s:iterator value='%{session.test}' > 
```

其他属性：

```
<s:property value="#application.anAppAttribute" /> 
<s:property value="#session.aSessionAttribute" /> 
<s:property value="#request.aRequestAttribute" /> 
<s:property value="#parameters.aRequestParameter" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:09:17.107

您可以作为`<s:property value='#session.waitList'/>`（OGNL 表达式）访问它

# audio-recording - 如何使用 VLC 设置将 mp4 和 flv 视频转换为 mp3 的比特率

> ID：13645386
> 
> 赞同：1
> 
> 时间：2012-11-30T12:35:14.223
> 
> 标签：audio-recording, video-processing, vlc, libvlc

我运行以下命令以便在命令行模式下使用转换`flv video`为：`mp3``VLC`

```
/Applications/VLC.app/Contents/MacOS/VLC -I dummy \
"myFile.flv" \
--sout='#transcode{acodec=mp3,vcodec=dummy}:standard{access=file,mux=raw,dst="myFile.flv.mp3"}' \
vlc://quit 
```

mp3 文件的比特率通常太高，文件占用磁盘空间太大。
我的问题是：如何通过命令行使用 VLC 设置比特率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:17:53.710

不仅如此，对于任何 VLC 命令，最简单的方法是对 GUI 执行相同操作，（在您的情况下设置转码，选择输入文件，选择转码选项，选择输出到文件）它将为您提供命令行它本身在最终屏幕上的 GUI 底部使用，然后在命令行上复制并使用它。

# jquery - 使用 FancyBox 2 处理 Facebook 个人资料图像的重定向

> ID：13645393
> 
> 赞同：0
> 
> 时间：2012-11-30T12:35:35.053
> 
> 标签：jquery, facebook, fancybox, fancybox-2

好的，所以我们使用了很棒的[FancyBox 2](http://fancyapps.com/fancybox)来组合用户图像的轮播。

除了 Facebook 个人资料图片外，我们服务器和其他服务器上的所有图片都运行良好。

*   我们从[Janrain](http://janrain.com)得到以下链接到这个：`https://graph.facebook.com/648845765/picture?type=large`
*   您会看到，如果您在浏览器中点击它，您最终会进入 Akamai：`https://fbcdn-profile-a.akamaihd.net/hprofile-ak-ash4/371305_648845765_1960948885_n.jpg`
*   问题是 FancyBox 似乎不能很好地处理这个问题，只是不显示图像。

[我在这里](http://codepen.io/robcthegeek/pen/kstpK)整理了一个演示。请注意以下事项：

1.  我正在使用托管在 Internet 上的普通图像作为图像 #1。
2.  我正在为#2 使用有问题的 URL。
3.  我已将已解析的 Akamai URL 用于#3。
4.  **只有图像 1 和 3 显示在轮播中**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:06:34.027

我已经想通了——在 GitHub 问题中遇到了[这个问题。](https://github.com/fancyapps/fancyBox/issues/304)

> 你只需要指定内容类型，因为脚本无法猜测

将类添加`fancybox.image`到`A`标签对其进行排序。

我已经更新了 Pen，一切都很好。

# gradle - Geb 功能测试如何用于性能/容量测试？

> ID：13645395
> 
> 赞同：7
> 
> 时间：2012-11-30T12:35:42.070
> 
> 标签：gradle, functional-testing, performance-testing, geb

是否有人知道任何允许将 Geb 功能测试用于性能测试的工具？

在“持续交付”一书中，建议可以将功能测试用于性能测试，只是想知道是否有人知道如何使用 Gradle、Spock 和 Geb 来实现这一点。

为了提供上下文，目前，我们正在使用一个 JMeter 脚本来模拟一些用户在我们的网站上爬行，跟随页面上的随机链接。这提供了相对较好的链接到内容的覆盖范围，但网站的某些区域，例如搜索和登录功能没有被触及。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-23T13:10:36.407

您可以使用 HtmlUnit 或 PhantomJS 等无头驱动程序，在多台机器上多次启动套件中的相关 Geb 测试，甚至在一台机器上多次启动。这为您提供了容量测试的负载。

当然，您也可以将其与`where:`块中的数据表结合起来，使用不同的参数重复相同的测试。为参数化测试生成数据的一个非常好的工具是[Spock Genesis](https://github.com/Bijnagte/spock-genesis)，我认为它会在您的场景中派上用场。

* * *

**更新：**即使您的测试没有参数化，您也可以通过使用注释功能方法`@Unroll`并添加`where:`如下块来轻松重复它：

```
@Unroll
def "test"() {
  expect:
  println n

  where:
  n << (1..100)
} 
```

等等 - 测试运行 100 次。

# c# - 如果响应重定向 = true

> ID：13645399
> 
> 赞同：1
> 
> 时间：2012-11-30T12:35:56.130
> 
> 标签：c#, winforms

我将 POST 发送到一个 url，如果响应使用 url 重定向（其中包含 jsessionid），那将是真的吗？否则为假。

怎么写？

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public bool od_auth(string login, string pass)
        {
            string HTML = PostData("");

            return true;
        }

        private void Auth_Click(object sender, EventArgs e)
        {
            string login = textBox1.Text;
            string pass = textBox2.Text;
            bool avt = od_auth(login, pass);
        }
        public static string PostData(string file, string data)
        {
            var cookies = new CookieContainer();
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(file);
            request.Method = "POST";
            request.CookieContainer = cookies;
            request.AllowAutoRedirect = true;
            request.ContentType = "application/x-www-form-urlencoded";
            byte[] EncodedPostParams = Encoding.UTF8.GetBytes(data);
            request.ContentLength = EncodedPostParams.Length;
            request.GetRequestStream().Write(EncodedPostParams,
                                             0,
                                             EncodedPostParams.Length);
            request.GetRequestStream().Close();
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            string html = new StreamReader(response.GetResponseStream(),
                                           Encoding.UTF8).ReadToEnd();
            return html;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:43:59.700

您应该检查 response.StatusCode ：

[http://msdn.microsoft.com/en-us/library/system.web.httpresponse.statuscode.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.statuscode.aspx)）

并测试重定向状态代码（301、302、303）：

[http://msdn.microsoft.com/fr-fr/library/aa383887%28en-us,VS.85%29.aspx](http://msdn.microsoft.com/fr-fr/library/aa383887%28en-us,VS.85%29.aspx)

正如@hvd 所指出的，这不应该因为`request.AllowAutoRedirect = true;`.

你应该 ：

*   放`request.AllowAutoRedirect = false;`
*   检查 response.StatusCode
*   设置您的布尔值，具体取决于它是否是重定向状态代码
*   基于“位置”构建新请求并检索其响应

顺便说一句，如果您没有要添加到第二个请求的内容，也许您可​​以将 response.ResponseUri 与之进行比较，`file`以查看响应是否已被重定向

# jquery - 认证服务期间的 AJAX 调用

> ID：13645401
> 
> 赞同：0
> 
> 时间：2012-11-30T12:36:06.127
> 
> 标签：jquery, ajax, http-headers, authorization

```
function getschoolDetail() {

    var installationId = $('#school_installationId').val();
    var header = make_base_auth ('rmspeint', '12345678');
    $.ajax({
        url:'http://xyx.com/nnn/ex?param=' + abc,
        type: "GET",
        cache: false,
        async: false,
        dataType: "json",

        beforeSend: function(req) {
            req.setRequestHeader('Authorization', 
                       make_base_auth ('user', 'pass'));
        },
        success: function(data) {
        alert("pass")
        },
        error: function() {
            alert(fail);
        }
    });
}

function make_base_auth(user, password) {

      var tok = user + ':' + password;
      var hash = Base64.encode(tok);
      return "Basic " + hash;
} 
```

我正在以上述方式进行 AJAX 调用，但每次都失败。

但是，当我通过浏览器进行相同的调用时，它是成功的。

我收到以下错误：

> 请求标头中缺少“授权基本 cm1zcGVpbnQ6MTIzNDU2Nzg=”

make_base_auth 返回正确的值我匹配的值。

# exception - Webdefault jax-ws 的自定义异常

> ID：13645403
> 
> 赞同：-2
> 
> 时间：2012-11-30T12:36:08.187
> 
> 标签：exception, soap, jax-ws

我有一个 grails (TEST) 项目，可以通过肥皂访问，您可以添加一本书等。我想知道，是否可以在添加书籍时抛出所有错误的列表。

下面的代码是现在可以使用的代码，但我无法存储所有错误。我已经尝试在@webFault 中创建 bookExceptions 列表，但这不起作用。或者我是否必须在@webresult 中返回所有错误。

```
@XmlRootElement(name="Book")
@XmlAccessorType(XmlAccessType.NONE)
class Book {

  @XmlElement
  String name;

  @XmlElement
  String author;

  @XmlElement
  String publisher;

  @XmlElement
  String isbn;

  @XmlElement
  Date release;

  static constraints = {
    name(nullable: false, blank: true, maxSize: 30);
    author(nullable: false, blank: true, maxSize: 3);
    publisher(nullable: true);
    isbn(nullable: true);
    release(nullable: true);
  }
}

@WebService(serviceName="Service", endpointInterface="webservices.SimpleWebService", targetNamespace="http://pc158:7070/grailsSoap")
class SimpleWebServiceImpl implements SimpleWebService {

  public List<Book> getBooks() {
    return Book.list();
  }

  public void addBook(Book book) throws BookException {
    if (book == null)
      throw new BookException("Book is required.", new BookExceptionBean());

    // TODO : 
    /*
     * if (! book.save(flush: true))
     *   // get errors and throw the bookException that contains all errors.
     */
  }
}

@XmlRootElement(name="BookException")
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name="BookError")
public class BookExceptionBean extends Error {

  public BookExceptionBean() {
    super();
  }

}

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name="Error", propOrder= {
    "field",
    "value",
    "i18Code",
    "i18Message"
  })
public class Error {

  protected String field;
  protected String value;
  protected String i18Code;
  protected String i18Message;

  public Error() {
  }

  public void setField(String field) {
    this.field = field;
  }

  public String getField() {
    return this.field;
  }

  public void setValue(String value) {
    this.value = value;
  }

  public String getValue() {
    return this.value;
  }

  public void setI18Code(String code) {
    this.i18Code = code;
  }

  public String getI18Code() {
    return this.i18Code;
  }

  public void setI18Message(String message) {
    this.i18Message = message;
  }

  public String getI18Message() {
    return this.i18Message;
  }

} 
```

问候肯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:18:13.360

问题解决了：

```
@XmlRootElement(name="BookException")
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name="BookError")
public class BookExceptionBean {

  @XmlElementWrapper(name="errors")
  @XmlElement(name="error")
  private List<Error> errors = new ArrayList<Error>();

  public void setError(Error error) {
    this.errors.add(error);
  }

  public List<Error> getErrors() {
    return this.errors;
  }

} 
```

# .net - 在 Visual Studio 2010 中使用企业库进行单元测试

> ID：13645406
> 
> 赞同：1
> 
> 时间：2012-11-30T12:36:16.407
> 
> 标签：.net, visual-studio-2010, unit-testing, enterprise-library

我需要通过在“dataconfiguration.config”文件上配置的连接并使用企业库来创建我的代码的一些单元测试，这些代码现在正在使用 SQL Server 2005。我无法更改这种连接代码，因此我需要配置我的测试项目才能使用它。

消息错误如下：

> 无效的部分名称。请求的配置文件“C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\QTAgent32.exe.Config”或文件“C:\Windows\Microsoft.NET”中不存在“dataConfiguration”部分\Framework\v4.0.30319\Config\machine.config'。确保“enterpriseLibrary.configurationSections”配置部分存在于其中一个文件中，并且“dataConfiguration”部分已定义。

对此的任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:02:57.217

当您运行测试项目时，正在运行的代码从测试项目的 app.config 中获取其配置，而不是来自被测项目自己的配置文件。您需要将配置复制到测试项目的配置文件中，或者抽象出被测项目获取其配置的方式并在您的测试中存根。

**编辑**

要创建 app.config 文件，请在 Visual Studio 中右键单击该项目，然后选择“添加”>“新项目”。在已安装的模板下选择“常规”，然后选择“应用程序配置文件”。您需要将相应的部分复制到那里，以便被测项目找到它们。

# asp.net - 获取在 ASP.NET 中运行时生成的控件的值

> ID：13645407
> 
> 赞同：0
> 
> 时间：2012-11-30T12:36:16.303
> 
> 标签：asp.net, datalist

我在运行时创建了一个 DATALIST 并在 dalalist itemtemplate 中加载了 Webuser 控件。如何在回发后获取运行时生成的 datalist.datalist 下所有控件的值，使其为空并重新创建。如何获取价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:57:24.460

在`databound`事件中，我们在运行时`datalist`获得任何字段的值。`datalist`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:37:40.870

DataList 有一个 Items 属性；您可以遍历它，这是绑定到列表的项目的集合，并获取您需要的值。要获取各个控件，请使用：

```
item.FindControl("ID") 
```

将它们提取出来。

# c - char 字符串数组元素的大小是多少？

> ID：13645411
> 
> 赞同：2
> 
> 时间：2012-11-30T12:36:28.107
> 
> 标签：c, sizeof

我现在正在学习 c，我对 char 字符串数组元素的 size 元素有点困惑。

举个例子：

```
char *states[] = {
    "California", "Oregon",
    NULL, "Texas"
}; 
```

我想看看如何获​​得数组的大小，所以我可以在 for 循环中计算它。我从某个站点找到了这个计算来获取数组的大小：

```
int size = sizeof(states) / sizeof(states[0]); 
```

我有点困惑，为什么是`sizeof(states[0])`8 个字节？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:37:40.437

你有一个指向字符的指针数组。数组的总大小为

```
<number of elements> * <number of bytes for a char pointer> 
```

其中一个成员的大小是 char 指针的大小（系统上为 8 个字节）。所以这给了你：`4*sizeof(char *)/sizeof(char *)`因此数组中的元素数量。

要查看位置 0 处的字符串*长度，您需要：*

```
strlen(states[0]); 
```

这将为您提供您期望的 10 个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:40:45.440

`char *states[]`是一个字符指针数组。所以 sizeof 数组的任何元素都会给出一个指针的大小，在你的情况下恰好是 8 个字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T12:42:13.150

这是依赖于架构的行为。`sizeof(states[0])`是字符指针的大小，就像`states[0]`字符指针一样。在您的机器上，`char`指针的大小恰好是`8`. 因此输出。

如果你真的想要字符串的大小，那么最好使用类似`strnlen()`on 的东西`states[0]`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T12:54:35.577

```
I'm a little confused, why is sizeof(states[0]) 8 bytes? 
```

因为 states 是一个 char 指针数组。

所以，`states[0]`是数组的第一个元素，在你的机器上我认为地址是 8 个字节。

这就是为什么你得到`8`

# iphone - 如果带有文本框的语句不起作用

> ID：13645412
> 
> 赞同：0
> 
> 时间：2012-11-30T12:36:32.787
> 
> 标签：iphone, ios, objective-c, xcode, if-statement

我有五个文本框，它们是子类视图，当被触摸时，它们会循环数组中的值。他们一开始都是空白的。

如果该框收到值`@"\u2714"`我想用 N/A 自动填充其他框。

到目前为止，我尝试过的内容会在`@"\u2714"`收到时更改文本框的值。不知道我在这里做错了什么？

这是我的nsarray： `//self.valuesArray = [NSArray arrayWithObjects:@"\u2714", @"X", @"LIM", @"N/A", nil];`

如果我将字符串设置为数组中的任何值，则文本框不会填充 N/A。如果我设置`isEqualToString:sting`为`@""`我可以让我的文本框值全部默认为 N/A，但不是基于循环遍历数组时的任何输入

```
 self.tncsTapView.textValue = ([self attributeWithName:@"systemTypeTncs"]).value;
    if ([self.tncsTapView.textValue isEqualToString:@"X"]){
    self.tncTapView.textValue = @"N/A";
    self.tnsTapView.textValue = @"N/A";
    self.itTapView.textValue = @"N/A";
    self.ttTapView.textValue = @"N/A";
    }
    self.tnsTapView.textValue = ([self attributeWithName:@"systemTypeTns"]).value;
    if ([self.tnsTapView.textValue isEqualToString:@""]){
    self.tncsTapView.textValue = @"N/A";
    self.tncTapView.textValue = @"N/A";
    self.itTapView.textValue = @"N/A";
    self.ttTapView.textValue = @"N/A";
    }
    self.tncTapView.textValue = ([self attributeWithName:@"systemTypeTnc"]).value;
    if ([self.tncTapView.textValue isEqualToString:@""]){
    self.tncsTapView.textValue = @"N/A";
    self.tnsTapView.textValue = @"N/A";
    self.itTapView.textValue = @"N/A";
    self.ttTapView.textValue = @"N/A";
    }

    self.itTapView.textValue = ([self attributeWithName:@"systemTypeIt"]).value;
    if ([self.itTapView.textValue isEqualToString:@""]){
    self.tncTapView.textValue = @"N/A";
    self.tnsTapView.textValue = @"N/A";
    self.tncsTapView.textValue = @"N/A";
    self.ttTapView.textValue = @"N/A";
    }

    self.ttTapView.textValue = ([self attributeWithName:@"systemTypeTt"]).value;
    if ([self.ttTapView.textValue isEqualToString:@""]){
    self.ttTapView.textValue = @"N/A";
    self.tnsTapView.textValue = @"N/A";
    self.itTapView.textValue = @"N/A";
    self.tncsTapView.textValue = @"N/A";
    }

    self.tncsTapView.textValue = ([self attributeWithName:@"systemTypeTncs"]).value;
    if ([self.tncsTapView.textValue isEqualToString:@"\u2714"]){
    self.tncTapView.textValue = @"N/A";
    self.tnsTapView.textValue = @"N/A";
    self.itTapView.textValue = @"N/A";
    self.ttTapView.textValue = @"N/A";
    }
    self.tnsTapView.textValue = ([self attributeWithName:@"systemTypeTns"]).value;
    if ([self.tnsTapView.textValue isEqualToString:@"\u2714"]){
    self.tncsTapView.textValue = @"N/A";
    self.tncTapView.textValue = @"N/A";
    self.itTapView.textValue = @"N/A";
    self.ttTapView.textValue = @"N/A";
    }
    self.tncTapView.textValue = ([self attributeWithName:@"systemTypeTnc"]).value;
    if ([self.tncTapView.textValue isEqualToString:@"\u2714"]){
    self.tncsTapView.textValue = @"N/A";
    self.tnsTapView.textValue = @"N/A";
    self.itTapView.textValue = @"N/A";
    self.ttTapView.textValue = @"N/A";
    }

    self.itTapView.textValue = ([self attributeWithName:@"systemTypeIt"]).value;
    if ([self.itTapView.textValue isEqualToString:@"\u2714"]){
    self.tncTapView.textValue = @"N/A";
    self.tnsTapView.textValue = @"N/A";
    self.tncsTapView.textValue = @"N/A";
    self.ttTapView.textValue = @"N/A";
    }

    self.ttTapView.textValue = ([self attributeWithName:@"systemTypeTt"]).value;
    if ([self.ttTapView.textValue isEqualToString:@"\u2714"]){
    self.ttTapView.textValue = @"N/A";
    self.tnsTapView.textValue = @"N/A";
    self.itTapView.textValue = @"N/A";
    self.tncsTapView.textValue = @"N/A";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:57:30.940

你试一试

```
self.tncsTapView.text = [self attributeWithName:@"systemTypeTncs"];

    if ([self.tncsTapView.text hasPrefix:@"\u2714"])
    {
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:50:27.040

我猜你必须在任何地方删除 Value ......当你分配时，你将它分配为文本，并且在检查时你也检查它作为文本。

```
self.tncsTapView.text = [self attributeWithName:@"systemTypeTncs"];
if ([self.tncsTapView.text isEqualToString:@"\u2714"]){
self.tncTapView.text = @"N/A";
self.tnsTapView.text = @"N/A";
self.itTapView.text = @"N/A";
self.ttTapView.text = @"N/A";
}
self.tnsTapView.text = [self attributeWithName:@"systemTypeTns"];
if ([self.tnsTapView.text isEqualToString:@"\u2714"]){
self.tncsTapView.text = @"N/A";
self.tncTapView.text = @"N/A";
self.itTapView.text = @"N/A";
self.ttTapView.text = @"N/A";
}
self.tncTapView.text = [self attributeWithName:@"systemTypeTnc"];
if ([self.tncTapView.text isEqualToString:@"\u2714"]){
self.tncsTapView.text = @"N/A";
self.tnsTapView.text = @"N/A";
self.itTapView.text = @"N/A";
self.ttTapView.text = @"N/A";
}

self.itTapView.text = [self attributeWithName:@"systemTypeIt"];
if ([self.itTapView.text isEqualToString:@"\u2714"]){
self.tncTapView.text = @"N/A";
self.tnsTapView.text = @"N/A";
self.tncsTapView.text = @"N/A";
self.ttTapView.text = @"N/A";
}

self.ttTapView.text = [self attributeWithName:@"systemTypeTt"];
if ([self.ttTapView.text isEqualToString:@"\u2714"]){
self.ttTapView.text = @"N/A";
self.tnsTapView.text = @"N/A";
self.itTapView.text = @"N/A";
self.tncsTapView.text = @"N/A";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:53:35.623

NSString 中的反斜杠由两个连续的反斜杠表示。在所有 if 语句中，尝试以下操作：

```
if ([self.tncsTapView.textValue isEqualToString:@"\\u2714"]) 
```

# javascript - 使用 jQuery 获取文本

> ID：13645416
> 
> 赞同：2
> 
> 时间：2012-11-30T12:36:35.700
> 
> 标签：javascript, jquery

我想从 jQuery 中的以下段落中分别获取文本和图像。

```
<item>
    <title>Brazil 2014: Same old story, different ending</title>
    <category>England</category>
    <category>Euro 2012</category>
    <category>Germany</category>  
    <category>Italy</category>   
    <category>Mario Balotelli</category>
    <category>North End Galactico</category>
    <category>Roy Hodgson</category>   
    <category>Spain</category>
    <dc:creator>Tony Davies</dc:creator>
    <pubDate>Fri, 30 Nov 2012 09:00:48 +0000</pubDate>
    <link>http: 
  //www.footballfriendsonline.com/blogs/2012/11/30/brazil-2014-same-old-story-different- 
  ending.html</link>
    <guid isPermaLink="false">565562:8695411:31453180</guid>
    <description>
        <![CDATA[
            <p>
                <span class="full-image-float-left ssNonEditable">
                    <span>
                        <img src="http://www.footballfriendsonline.com/storage/pictures/premiership/wba/hODGSON.JPG?__SQUARESPACE_CACHEVERSION=1354201352468" alt="" />
                    </span>
                </span>
            </p>
            <p>This summer saw England head to Euro 2012 carrying the hopes of a nation that expected little from their team.</p>
        ]]>
    </description>
    <wfw:commentRss>http://www.footballfriendsonline.com/blogs/rss-comments-entry- 
 31453180.xml</wfw:commentRss></item> 
```

我正在使用它显示空白值。

```
var container = $(this).find('description').text();
var ctext=$('p',container).text();
var container=container.substr(0,300).replace(/\s+?(\S+)?$/g, '')+suffix; 
```

正是这个容器同时显示了图像和文本。我想在`<p>`标签中获取文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:41:25.223

The container should be jQuery element/selector, not a text. Try this:

```
var ctext=$('p',"description").text(); 
```

working link [http://codepen.io/yardenst/pen/pEtiA](http://codepen.io/yardenst/pen/pEtiA)

# java - 为什么单线程执行器服务使用 4 个核心？

> ID：13645428
> 
> 赞同：2
> 
> 时间：2012-11-30T12:37:17.157
> 
> 标签：java, parallel-processing, multicore, executorservice

我有以下代码使用单线程执行器服务，但运行它使用我机器上的所有 4 个内核（每个内核平均使用率约为 80%）。

问题是为什么会这样？而且我真的对找到斐波那契不感兴趣！

```
public class MainSimpler {
    static int N=35;
    static AtomicInteger result = new AtomicInteger(0), pendingTasks = new AtomicInteger(1);
    static ExecutorService executor;

    public static void main(String[] args) {
        executor = Executors.newSingleThreadExecutor(); 
        long before = System.currentTimeMillis();
        System.out.println("Fibonacci "+N+" is ... ");
        executor.submit(new FibSimpler(N));
        waitToFinish();
        System.out.println(result.get());
        long after = System.currentTimeMillis();        
        System.out.println("Duration: " + (after - before) + " milliseconds\n");
    }

    private static void waitToFinish() {
        while (0 < pendingTasks.get()){
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        executor.shutdown();
    }
}

class FibSimpler implements Runnable {
    int N;
    FibSimpler (int n) { N=n; }

    @Override
    public void run() {
        compute();
        MainSimpler.pendingTasks.decrementAndGet();
    }

    void compute() {
        int n = N;
        if (n <= 1) {
            MainSimpler.result.addAndGet(n);
            return;
        }
        MainSimpler.executor.submit(new FibSimpler(n-1));
        MainSimpler.pendingTasks.incrementAndGet();
        N = n-2;
        compute();  // similar to the F/J counterpart
    }
} 
```

这与我的另一个问题[有关](https://stackoverflow.com/questions/13644222/fibonacci-on-java-executorservice-runs-faster-sequentially-than-in-parallel)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T12:51:44.860

刚刚在我的机器上试过，我得到了 35% 的总 CPU 使用率（4 核）。请注意，您的程序中至少有 2 个线程（主线程和执行线程）。

但是，如果我增加到`N`100，CPU 使用率会上升到 90+%，因为大量时间都花在了 Full GC 上（而且我运行的是 2GB 堆）。

所以看起来你的单线程太忙了，任务开始累积，等待被执行。

您可以尝试使用以下 JVM 参数运行代码：`-XX:+PrintGC`

我机器上的输出如下所示：

> [GC 511999K-> 465632K（1962688K），1.0286778秒]
> [GC 977632K-> 922984K（1962688K），1.1999209秒]
> [GC 1434984K-> 1407984K（1962688K），1.2421900秒]
> [全GC 1407984K-> 1373358K（1962688K）， 9.8320408秒]
> [全GC 1885358K-> 1822040K（1962688K），7.5170472秒]
> [全GC 1877375K-> 1870974K（1962688K），7.6635945秒]
> [全GC 1877374K-> 1876550K（1962688K），7.6705722秒]
> [全GC 1877374K- >1877272K(1962688K), 7.8381579 秒]
> [完整 GC 1877372K->1877357K(1962688K), 8.6095022 秒]

# java - Java：试图拆分 " ，但 string.split(""") 不被接受......这怎么办？

> ID：13645429
> 
> 赞同：0
> 
> 时间：2012-11-30T12:37:19.717
> 
> 标签：java, string, split

我在java中有一些字符串，它们来自一个本体文件，它们具有以下格式： `<owl:onProperty rdf:resource="http://www.co-ode.org/ontologies/pizza/pizza.owl#WHAT_WE_WANT"/>`

我需要创建一个函数来查找特定字符串值是否包含在 WHAT_WE_WANT 中，然后返回字符串 WHAT_WE_WANT。

因此，我在“#”处拆分了 ArrayList 的每一行，然后在拆分行的第二部分中搜索字符串值。现在我所要做的就是摆脱“/>。我试图拆分”符号，但我做不到，因为当我写“””时，编译器无法识别“是我需要的字符串符号. 有任何想法吗？

如果我的单词解释不是很好，这是我的代码：

```
 if (nextLine.matches(".*" + lookUp + ".*"  ))
    {String lala[]=nextLine.split("#");
    for(int i=0;i<lala.length;i++){
        if(lala[i].matches(".*"+lookUp+".*")){
            String[] temp=lala[i].split( """ ); //<--- doesn't work :/
            System.out.println(temp[0]);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T12:38:16.610

您需要转义双引号：

```
String[] temp = lala[i].split("\""); 
```

我没有检查你的其余代码是否真的有效——特别是，除非你*试图*使用模式，否则我不会使用正则表达式来查找子字符串——但这应该可以解决你的直接问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T12:39:29.297

这将给出一个编译错误：

```
String[] temp=lala[i].split( """ ); 
```

因为字符串文字格式错误。如果要拆分有双引号字符的位置，则需要转义双引号。

```
String[] temp=lala[i].split( "\"" ); 
```

在字符串文字中，未转义的双引号表示“这是字符串的结尾”。所以编译器会认为你写了一个空字符串 ( `""`) 后跟一个未终止的字符串文字 ( `" );`。当它到达行尾时，编译器会抱怨字符串没有终止......因为 Java 字符串文字不能跨越多行。

* * *

The stuff that you are trying to decode is OWL ... which means you could (and maybe should) parse it using an OWL parser, and RDF parser or an XML parser ... rather than bashing it with regexes, etcetera.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T12:40:08.577

You need to write down `String[] temp=lala[i].split( "\"" );`

the backslash is a snignifier for a special character in your String, as a " or a \ itself.

# java - 使用 java 为 Jtable 的每一行添加列表框

> ID：13645431
> 
> 赞同：1
> 
> 时间：2012-11-30T12:37:25.690
> 
> 标签：java, swing, jtable

我想为 Jtable 的每一行添加列表框。并且每个列表框都应该填充从文件或数据库中检索到的不同值。这是相同的代码。

```
combo=new JComboBox(model1);
FileInputStream fstream= new FileInputStream("scbdata.txt");
DataInputStream in=new DataInputStream(fstream);
BufferedReader br=new BufferedReader(new InputStreamReader(in));
str=br.readLine();
s = str.split(",");
for(int i=0;i<15;i++)   
model1.addElement(s[i]);
TableColumn col=m_table.getColumnModel().getColumn(3);
col.setCellEditor(new DefaultCellEditor(combo));` 
```

当我使用上面的代码时，相同的组合框被添加到一列的整行中，但我想在特定列的每一行中添加具有不同内容的组合框。有没有办法在单个单元格中添加 ComboBox 或其他内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:42:40.440

检查这个

```
public class JTableWithComboBox {

    private static class ComboBoxCellRenderer extends JComboBox implements TableCellRenderer {

        public ComboBoxCellRenderer(Object[] items) {
            super(items);
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            setSelectedItem(value);
            return this;
        }
    }

    protected void initUI() {
        JFrame frame = new JFrame("test");
        frame.add(getTable());
        frame.pack();
        frame.setVisible(true);
    }

    private Component getTable() {
        Vector<Vector<String>> data = new Vector<Vector<String>>();
        for (int i = 0; i < 1; i++) {
            Vector<String> row = new Vector<String>();
            for (int j = 0; j < 1; j++) {
                row.add("some value");
            }
            data.add(row);
        }
        Vector<String> columns = new Vector<String>();
        columns.add("Column 1");
        DefaultTableModel model = new DefaultTableModel(data, columns);
        JTable table = new JTable(model);
        table.setRowHeight(20);
        int i = 0;
        Enumeration<TableColumn> c = table.getColumnModel().getColumns();
        String[] items = {"Item1", "Item2", "Item3"};
        JComboBox combo = new JComboBox(items);
        while (c.hasMoreElements()) {
            TableColumn column = c.nextElement();
            column.setCellRenderer(new ComboBoxCellRenderer(items));
            column.setCellEditor(new DefaultCellEditor(combo));
            combo.addItemListener(new ItemListener() {
                @Override
                public void itemStateChanged(ItemEvent e) {
                    if (e.getStateChange() == ItemEvent.SELECTED) {
                        System.out.println(e.getItem() + " selected");
                    }
                }
            });
            i++;
        }
        JScrollPane scroll = new JScrollPane(table);
        scroll.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        scroll.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
        return scroll;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new JTableWithComboBox().initUI();
            }
        });
    }
} 
```

# opengl - 全向阴影映射聚光灯

> ID：13645432
> 
> 赞同：3
> 
> 时间：2012-11-30T12:37:28.563
> 
> 标签：opengl, graphics, directx, hlsl, shadow-mapping

我在延迟渲染器中实现全向阴影映射，但无法解决这个问题：

这是一张图片：![阴影问题示例](../Images/5767491b5f641a2a41e2d2b951e26e29.png)

这就是当我将六个聚光灯沿正负方向指向每个轴时发生的。我知道这个问题是由聚光灯计算引起的，将灯光保持在锥体中，这就是为什么它是圆形的。

我的第一个想法是禁用锥体计算，但显然因为如果你通过一个灯看到另一个灯会混合在一起，就会有重叠。如果我将要为灯光渲染的几何形状从锥形更改为基于方形的金字塔（我认为我无论如何都需要这样做？）然后我将能够使用灯光的平截头体（我已经拥有）锥体计算来测试当前像素是否落在截锥体内，对吗？

如果是这样，有人知道在像素着色器中执行此操作的最佳方法是什么吗？我只想检查该点是否位于平截头体的每个平面的前面，但这在像素着色器中似乎很昂贵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:42:53.637

你有 6 个平截头体，但请注意

1.  你不需要检查背面或正面，只需检查它是否在无限金字塔中
2.  每个面由两个相邻的平截头体共享
3.  每张脸都由朝后的平截头体镜像

这意味着您只需对照 6 个平面检查像素，即可查看需要访问的阴影贴图。

# python - 计算原子坐标之间的距离

> ID：13645439
> 
> 赞同：3
> 
> 时间：2012-11-30T12:37:47.893
> 
> 标签：python, perl, biopython, bioperl

我有一个如下所示的文本文件

```
ATOM    920  CA  GLN A 203      39.292 -13.354  17.416  1.00 55.76           C 
ATOM    929  CA  HIS A 204      38.546 -15.963  14.792  1.00 29.53           C
ATOM    939  CA  ASN A 205      39.443 -17.018  11.206  1.00 54.49           C  
ATOM    947  CA  GLU A 206      41.454 -13.901  10.155  1.00 26.32           C
ATOM    956  CA  VAL A 207      43.664 -14.041  13.279  1.00 40.65           C 
.
.
.

ATOM    963  CA  GLU A 208      45.403 -17.443  13.188  1.00 40.25           C 
```

我想计算两个α碳原子之间的距离，即计算第一个和第二个原子之间的距离，然后计算第二个和第三个原子之间的距离，依此类推......两个原子之间的距离可以表示为：`distance = sqrt((x1-x2)^2+(y1-y2)^2+(z1-z2)^2) .`

第 7,8 和 9 列分别代表 x,y 和 z 坐标。我需要打印距离和相应的残差对（第 4 列），如下所示。（距离的值不是真实的）

```
GLN-HIS   4.5
HIS-ASN   3.2
ASN-GLU   2.5 
```

如何使用 perl 或 python 进行此计算？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T17:07:57.153

# 不要在空格上拆分

这里给出的其他答案做出了一个有缺陷的假设——坐标将以空格分隔。根据 的[PDB 规范`ATOM`](http://deposit.rcsb.org/adit/docs/pdb_atom_format.html#ATOM)，情况*并非*必须如此：PDB 记录值由列索引指定，并且可以相互流入。例如，您的第一`ATOM`条记录是：

```
ATOM    920  CA  GLN A 203      39.292 -13.354  17.416  1.00 55.76           C 
```

但这也是完全有效的：

```
ATOM    920  CA  GLN A 203      39.292-13.3540  17.416  1.00 55.76           C 
```

## 更好的方法

由于列指定的索引以及 PDB 文件中可能出现的其他问题的数量，您**不应该**编写自己的解析器。PDB 格式很乱，有很多特殊情况和格式错误的文件需要处理。相反，请使用已经为您编写的解析器。

我喜欢[Biopython](http://biopython.org)的`PDB.PDBParser`. 它将为您将结构解析为 Python 对象，并具有方便的功能。如果您更喜欢 Perl，请查看[BioPerl](http://www.bioperl.org)。

`PDB.Residue`对象允许通过名称对 Atom 进行键控访问，并且`PDB.Atom`对象使`-`运算符重载以返回两个 Atom 之间的距离。我们可以使用它来编写干净、简洁的代码：

## 代码

```
from Bio import PDB
parser = PDB.PDBParser()

# Parse the structure into a PDB.Structure object
pdb_code = "1exm"
pdb_path = "pdb1exm.ent"
struct = parser.get_structure(pdb_code, pdb_path)

# Grab the first two residues from the structure
residues = struct.get_residues()
res_one = residues.next()
res_two = residues.next()

try:
    alpha_dist = res_one['CA'] - res_two['CA']
except KeyError:
    print "Alpha carbon missing, computing distance impossible!" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T13:50:58.007

如果您的数据由空格分隔，一个简单的`split`就可以完成这项工作。缓冲行以按顺序将它们相互比较。

```
use strict;
use warnings;

my @line;
while (<>) {
    push @line, $_;            # add line to buffer
    next if @line < 2;         # skip unless buffer is full
    print proc(@line), "\n";   # process and print 
    shift @line;               # remove used line 
}

sub proc {
    my @a = split ' ', shift;   # line 1
    my @b = split ' ', shift;   # line 2
    my $x = ($a[6]-$b[6]);      # calculate the diffs
    my $y = ($a[7]-$b[7]);
    my $z = ($a[8]-$b[8]);
    my $dist = sprintf "%.1f",                # format the number
                   sqrt($x**2+$y**2+$z**2);   # do the calculation
    return "$a[3]-$b[3]\t$dist"; # return the string for printing
} 
```

**输出（带有样本数据）：**

```
GLN-HIS 3.8
HIS-ASN 3.8
ASN-GLU 3.9
GLU-VAL 3.8 
```

如果您的数据是制表符分隔的，您可以拆分`/\t/`而不是`' '`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-30T12:44:17.230

假设您的数据在“atoms.txt”中，这将逐行读取并将条目拆分为列表：

```
import csv

with open("atoms.txt") as f:
  reader = csv.reader(f)
  for line, in reader:
      entries = line.split()
      print entries 
```

现在为每个列表提取您需要的列，并计算距离等（请记住，python 中的列表是从零开始的）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-02T07:26:17.893

理想情况下，您应该使用[MDAnalysis 包](http://www.mdanalysis.org/)来“切片”原子和段并计算它们之间的距离度量。事实上，MDAnalysis 支持多种 MD 模拟和化学结构格式。

有关更详细的示例，另请参见[Biostars.org 上的以下条目](http://www.biostars.org/p/96724/#96770)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-03T00:52:35.847

如果您只对一对感兴趣，那么 bash 就可以了。这是我使用的脚本，我将它设置为在最后重新启动（如果你愿意，可以关闭它）。它会提示您选择哪个原子。PDB 文件可以设置不同的列，因此对于 awk 行，请确保列匹配。在使用新的 pdb 文件之前手动执行测试用例。这是微不足道的，但是将脚本中的我的 pdb 文件更改为您的。

```
#!/usr/bin/env bash

echo " "
echo "Use one letter abbreviations. Case doesn't matter." 
echo "Example: A 17 CA or n 162 cg"

echo " - - - - - - - - - - - - - - - - - -"
#------------First Selection------------

read -e -p "What first atom? " sel1

# echo $sel1
sel1caps=${sel1^^}
# echo "sel1caps="$sel1caps

arr1=($sel1caps)
# echo "arr1[0]= "${arr1[0]}
# echo "arr1[1]= "${arr1[1]}
# echo "arr1[2]= "${arr1[2]}

#To convert one to three letters

if [ ${arr1[0]} = A ] ; then
    SF1=ALA
elif [ ${arr1[0]} = H ] ; then
    SF1=HIS
elif [ ${arr1[0]} = R ] ; then
    SF1=ARG
elif [ ${arr1[0]} = K ] ; then
    SF1=LYS
elif [ ${arr1[0]} = I ] ; then
    SF1=ILE
elif [ ${arr1[0]} = F ] ; then
    SF1=PHE 
elif [ ${arr1[0]} = L ] ; then
    SF1=LEU
elif [ ${arr1[0]} = W ] ; then
    SF1=TRP
elif [ ${arr1[0]} = M ] ; then
    SF1=MET
elif [ ${arr1[0]} = P ] ; then
    SF1=PRO 
elif [ ${arr1[0]} = C ] ; then
    SF1=CYS 
elif [ ${arr1[0]} = N ] ; then
    SF1=ASN
elif [ ${arr1[0]} = V ] ; then
    SF1=VAL
elif [ ${arr1[0]} = G ] ; then
    SF1=GLY 
elif [ ${arr1[0]} = S ] ; then
    SF1=SER 
elif [ ${arr1[0]} = Q ] ; then
    SF1=GLN 
elif [ ${arr1[0]} = Y ] ; then
    SF1=TYR 
elif [ ${arr1[0]} = D ] ; then
    SF1=ASP
elif [ ${arr1[0]} = E ] ; then
    SF1=GLU 
elif [ ${arr1[0]} = T ] ; then
    SF1=THR 
else
    echo "use one letter codes"
    echo "exiting"
    exit
fi

# echo "SF1 ="$SF1

#If there is nothing printing for line 1, check the expression for your pdb file. The spaces may need adjustment at the end.
line1=$(grep -E "${arr1[2]} *?${SF1}(.*?) ${arr1[1]}     " 1A23.pdb)
# echo $line1

ar_l1=($line1)
# echo "ar_l1[1]="${ar_l1[1]}

echo " - - - - - - - - - - - - - - - - - -"
#------------Second Selection------------

read -e -p "What second atom? " sel2

# echo $sel2

sel2caps=${sel2^^}
# echo "sel2caps="$sel2caps

arr2=($sel2caps)
# echo "arr2[0]= "${arr2[0]}
# echo "arr2[1]= "${arr2[1]}
# echo "arr2[2]= "${arr2[2]}

#To convert one to three letters

if [ ${arr2[0]} = A ] ; then
    SF2=ALA
elif [ ${arr2[0]} = H ] ; then
    SF2=HIS
elif [ ${arr2[0]} = R ] ; then
    SF2=ARG
elif [ ${arr2[0]} = K ] ; then
    SF2=LYS
elif [ ${arr2[0]} = I ] ; then
    SF2=ILE
elif [ ${arr2[0]} = F ] ; then
    SF2=PHE 
elif [ ${arr2[0]} = L ] ; then
    SF2=LEU
elif [ ${arr2[0]} = W ] ; then
    SF2=TRP
elif [ ${arr2[0]} = M ] ; then
    SF2=MET
elif [ ${arr2[0]} = P ] ; then
    SF2=PRO 
elif [ ${arr2[0]} = C ] ; then
    SF2=CYS 
elif [ ${arr2[0]} = N ] ; then
    SF2=ASN
elif [ ${arr2[0]} = V ] ; then
    SF2=VAL
elif [ ${arr2[0]} = G ] ; then
    SF2=GLY 
elif [ ${arr2[0]} = S ] ; then
    SF2=SER 
elif [ ${arr2[0]} = Q ] ; then
    SF2=GLN 
elif [ ${arr2[0]} = Y ] ; then
    SF2=TYR 
elif [ ${arr2[0]} = D ] ; then
    SF2=ASP
elif [ ${arr2[0]} = E ] ; then
    SF2=GLU 
elif [ ${arr2[0]} = T ] ; then
    SF2=THR 
else
    echo "use one letter codes"
    echo "exiting"
    exit
fi

# echo "SF2 ="$SF2

line2=$(grep -E "${arr2[2]} *?${SF2}(.*?) ${arr2[1]}     " 1A23.pdb)
# echo $line2

ar_l2=($line2)
# echo "ar_l2[1]="${ar_l2[1]}
# echo "ar_l2[1]="${ar_l2[1]}

atom1=${ar_l1[1]}
atom2=${ar_l2[1]}
echo "==========================="
echo ${arr1[0]}${arr1[1]}${arr1[2]}" to "${arr2[0]}${arr2[1]}${arr2[2]}":"
# 6, 7, 8 are column numbers in the pdb file. 
# If there are multiple molecules it should be 7, 8, 9.
awk '$2=='$atom1'{x1=$7;y1=$8;z1=$9}                                 # get the ATOM 1
     $2=='$atom2'{x2=$7;y2=$8;z2=$9}                               # get the ATOM 2
     END{print sqrt((x1-x2)*(x1-x2) + (y1-y2)*(y1-y2) + (z1-z2)*(z1-z2))}' 1A23.pdb    # calculate the distance.

echo "Angstroms"
echo "==========================="
echo " "
echo "-_-_-_-_Running Script Again_-_-_-_-"
./distance_soln.sh 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-14T18:55:03.823

一个简单的 Python 代码就可以完成这项工作。我假设您的所有内容都在文件“input.txt”中。

```
def process(line1, line2):
    content1 = line1.split()
    content2 = line2.split()
    x1, y1, z1 = float(content1[6]), float(content1[7]), float(content1[8])
    x2, y2, z2 = float(content2[6]), float(content2[7]), float(content2[8])
    distance = math.sqrt(math.pow(x1-x2, 2) + math.pow(y1-y2, 2) + math.pow(z1-z2, 2))
    return content1[3]+"-"+content2[3]+" "+ "{0:.2f}".format(distance)

with open("input.txt") as f:
    line1 = f.readline()
    for line in f:
        line2 = line
        print(process(line1, line2))
        line1 = line2 
```

如果您在使用此脚本时发现任何差异或问题，请告诉我。

# linux - 有关 Debian 上附加显示的信息

> ID：13645440
> 
> 赞同：0
> 
> 时间：2012-11-30T12:37:50.957
> 
> 标签：linux, debian, raspberry-pi

我有一个运行 Debian 的 RPI 变体的树莓派。我需要从命令行获取有关连接到 HDMI 端口的显示器的信息。我需要显示器的名称（供应商和型号）以及可选的其他相关信息。

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:06:49.080

您正在寻找的命令是

> /opt/vc/bin/tvservice

如果您只是将其输入终端，它将显示您应该传递哪些选项。

我不确定它会给你供应商和型号信息。但它会为您提供有关已插入显示器的更多信息。

希望这对您有所帮助。

**更新**：是的，现在看了一下，真的不认为该命令会给您供应商和型号。但这与您从监视器获得的信息一样多（来自 Raspberry Pi）

# asp.net - ASP.NET 应用程序不反映区域设置

> ID：13645441
> 
> 赞同：4
> 
> 时间：2012-11-30T12:37:51.340
> 
> 标签：asp.net, .net, globalization, regional-settings

我已经在我的区域设置（对于捷克语，文化 cs-CZ）中设置了短时间/长时间模式以遵循：

*   短时间：H.mm
*   长时间：H.mm.ss

![设置](../Images/1d45b0b248dafca20e3449395ee0cbef.png)

我正在尝试在 C# 应用程序中使用这些设置。在以下控制台应用程序中，一切正常：

使用系统；使用 System.Globalization；

```
class Program
{
    static void Main()
    {

        Console.WriteLine(CultureInfo.CurrentCulture.Name);
        Console.WriteLine(CultureInfo.CurrentCulture.DateTimeFormat.LongTimePattern);

        Console.ReadLine();
    }
} 
```

正如我所想，输出如下：

```
cs-CZ
H.mm.ss 
```

我创建了 ASP.NET 应用程序，令我非常惊讶的是，它并没有反映这一点。

最小的例子：

```
<%@ Page Language="C#" %>

<%= System.Globalization.CultureInfo.CurrentCulture.Name %><br />
<%= System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.LongTimePattern %> 
```

输出：

```
cs-CZ
H:mm:ss 
```

我试过重启，.NET2.0，.NET4.0，还是没有效果。

注意 - 这个问题是作为错误的一部分提出的，我们忘记为 DateTime.ToString() 包含 InvariantCulture，然后应该由 JSON 反序列化器对其进行解析。（有这个问题的人有一些不同的时间格式分隔符）。

解决重新创建 CultureInfo 的问题不是我正在寻找的东西，我只是想看看原因，因为我无法以任何方式重现该问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T12:43:11.667

The problem is that the Regional Settings are user specific. You changed them for *you*, but the site runs as a different user (see the app-pool in IIS)

# iphone - 如何以编程方式在 iPhone 上发送语音邮件？

> ID：13645442
> 
> 赞同：0
> 
> 时间：2012-11-30T12:37:53.040
> 
> 标签：iphone, voicemail

有没有办法从 iphone 应用程序发送语音邮件消息，我从 MessageUI 框架知道这是不可能的。我在谷歌搜索但找不到如何做到这一点，我只知道如何发送短信，所以非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:48:32.887

使用当前 sdk 无法从消息中发送音频文件....您可以通过将该声音文件上传到服务器然后从消息中发送该 url 来达到此要求。

# special-characters - CDATA 代码块中的特殊字符

> ID：13645445
> 
> 赞同：3
> 
> 时间：2012-11-30T12:38:11.337
> 
> 标签：special-characters, cdata

我正在尝试在其他人创建的 XML 文件中呈现商标（™）字符。代码如下：

```
<head><![CDATA[Product Name&#153;]]></head> 
```

它目前无法正确呈现特殊字符。

我正在使用 UTF-8 编码：

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T13:02:25.190

根据定义，CDATA 部分内容被视为这样，即使对于字符引用（如`&#153;`. 请参阅[XML 中的 <![CDATA[]]> 是什么意思？](https://stackoverflow.com/questions/2784183/what-does-cdata-in-xml-mean)

与此`&#153;`无关，它是未定义的，尽管浏览器通常将其解释为表示商标字符。[商标](http://www.fileformat.info/info/unicode/char/2122/index.htm)字符的正确引用是`&#8482;`和`&#x2122;`。

如果文档编码为 UTF-8，则应输入字符“™”。在 CDATA 部分中，这确实是唯一的方法。

# svg - 对 d3.js 路径的数据进行排序

> ID：13645446
> 
> 赞同：5
> 
> 时间：2012-11-30T12:38:15.323
> 
> 标签：svg, path, d3.js

我想用 d3.js 创建一条路径，其中包含 x 轴的日期。这工作得很好，但我的问题是，我的 json-object 没有排序，所以路径不正确： ![在此处输入图像描述](../Images/fd1b6fab824d7e7c4a36da188c463300.png)

我找不到对我的数据进行排序的函数 - 还是我必须自己写一个？如果是的话，我会尝试，但如果有另一种可能性.. ;)

```
 var line = d3.svg.line()
                .interpolate("linear")
                .x(function(d) { return x(d.finished_at); })
                .y(function(d) { return y(d.result); });

            svg.selectAll("path")
                .data(data)
            .enter().append("path")
                .attr("class", "line")
                .attr("d", line(data)); 
```

有人有想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T12:55:12.923

你看过 d3.ascending 吗？ [https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_ascending](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_ascending)

或者你可以这样做......

[在 d3.js 中对选择进行排序会干扰数据连接](https://stackoverflow.com/questions/11496393/sorting-a-selection-in-d3-js-disturbs-the-data-join)

# python - 如何在python中将机架空间云文件读入字符串？

> ID：13645447
> 
> 赞同：0
> 
> 时间：2012-11-30T12:38:13.960
> 
> 标签：python, gzip, rackspace

我想从机架空间解析日志文件。我正在使用[官方的 python sdk](https://github.com/rackspace/python-cloudfiles/blob/master/cloudfiles/storage_object.py)。我之前已将文件保存到磁盘，然后使用`gzip.open`.

现在我在 heroku 上，不能/不想将文件保存到磁盘，而是在内存中解压缩。

但是，我无法将对象下载为字符串或伪文件对象来处理它。

有人有想法吗？

```
logString = ''
buffer = logfile.stream()

while True:
    try:
        logString += buffer.next()
    except StopIteration:
        break

# logString is always empty here

# I'd like to have something that enables me to do this:
for line in zlib.decompress(logString):
    # having each line of the log here 
```

**更新**

我注意到，空字符串并不完全正确。这是一个循环，只有第一次出现是空的。下一次我确实有数据（看起来像是压缩过的），但我得到了这个 zlib 错误：

```
zlib.error: Error -3 while decompressing data: incorrect header check 
```

**更新二**

按照建议，我实现了 cStringIO，结果相同：

```
 buffer = logfile.stream()
     output = cStringIO.StringIO()

         while True:
             try:
                  output.write(buffer.next())
             except StopIteration:
             break

         print(output.getvalue()) 
```

**更新三** 现在确实有效：

```
output = cStringIO.StringIO()

try:
    for buffer in logfile.stream():
        output.write(buffer)
except StopIteration:
    break 
```

至少这里没有崩溃，但似乎没有得到实际的线路：

```
for line in gzip.GzipFile(fileobj=output).readlines():
    # this is never reached 
```

如何在这里进行？是否有一些简单的方法可以将传入的数据视为普通字符串，以了解我是否走对了路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:56:05.053

我发现，这`read()`也是一种选择，它导致了一个简单的解决方案，如下所示：

```
 io = cStringIO.StringIO(logfile.read())
     for line in GzipFile(fileobj=io).readlines():
         impression = LogParser._parseLine(line)
         if impression is not None:
             impressions.append(impression) 
```

# spring - 采用 Spring Roo 和 JBoss Forge

> ID：13645450
> 
> 赞同：1
> 
> 时间：2012-11-30T12:38:20.607
> 
> 标签：spring, maven, jboss, spring-roo

`Roo`被绑定`Spring framework`并且`Maven`是固有的，而与Maven`Forge`密切相关并且成为可选的。`Java EE/JBoss-AS`

*   我们可以使用它们中的任何一个来搭建独立于 的东西`programming models`吗？`Spring framework``Java EE/CDI`

*   关于的任何指针`Forge and Maven integration`？快速谷歌导致没有有用的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-15T16:22:24.727

自从 2 年以来，我使用 Telosys 工具（而不是 ROO）来构建 Java 应用程序脚手架，因为这个代码生成器很简单并且独立于任何类型的环境（可以生成任何东西：Java、HTML、Python 等......）

GitHub 上提供了一些预定义模板，如果它们不符合您的需求，您可以为您的特定目标创建自己的模板

cf 教程：[https ://sites.google.com/site/telosystutorial/](https://sites.google.com/site/telosystutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-14T18:32:33.550

Telosys ( [http://www.telosys.org/](http://www.telosys.org/) ) 是引导项目的好工具。脚手架可以来自数据库或轻量级文本模型。

代码生成基于 Velocity 模板，因此您可以自定义现有模板或创建自己的模板。

一切都是免费和开源的（生成器和模板）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T22:04:35.300

就此而言，没有任何东西将 Forge 与 JBoss AS 或真正的 Java EE 联系起来。Forge 的核心是用于生成资源的外壳。可用的插件往往以 Java EE 为重点，但并非必须如此。

看看[Forge 网站](http://forge.jboss.org/)。那里有很多关于它的信息。如果你也使用 eclipse，JBoss Tools 也可以很好地集成。

# c - 关于 free() 如何在 C 中工作的说明 -

> ID：13645452
> 
> 赞同：1
> 
> 时间：2012-11-30T12:38:22.277
> 
> 标签：c

我的问题是关于何时在 C 中使用 free() 是合适的。我使用的是 gcc 4.3.2。

假设，如果必须在链表中释放一堆内存，理想的解决方法是（我猜）：

```
int freeLL(node *a)
{
    if(a->next != NULL)
         freeLL(a->next);
    free(a);
    return 0;
} 
```

现在，假设我要在以下 ADT 上做类似的事情：

一个指针“VertexNode”，它还有两个指针：“Vertex”和“Edge”（比如说）。相当于说：

```
struct vertexnode
{
     vertex *v;
     edge *e;
}
typedef struct vertexnode* VertexNode; 
```

稍后，在初始化实例时，我将执行以下操作 -

```
VertexNode V = malloc(sizeof(struct vertexnode));
V->v = malloc(sizeof(vertex)); 
```

因此，最终在释放时：我使用了与链表相同的类比。

```
free(V->v);
free(V); 
```

这给出了运行时错误，当我注释掉“free(V->v)”时，程序运行良好。我的问题是：

a) 简单地做 free(V) 就足够了吗？我的意思是，free() 是否对给定指针内的所有指针递归工作？

b）如果没有，在这种情况下是否存在内存泄漏？我如何在理想情况下防止这种情况发生？

c) 最后，有没有一种方法可以跟踪 malloc() 分配了多少字节以及 free() 释放了多少字节？

对于这个冗长的问题，我感到非常抱歉。提前感谢您的时间和耐心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:43:28.763

不，free 不能递归工作，因此您确实会有内存泄漏。您发生的运行时错误可能与逻辑错误有关（可能`V->v`是`NULL`或者您在释放之前没有分配它）。

如果您使用的是 linux，则使用 valgrind 可以帮助您分析程序并提及泄漏错误。使用编译`cc *.c -ggdb`然后运行`valgrind --leakcheck=full ./a.out`会输出泄漏错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T12:47:17.863

要回答您的问题：

a) 不，free() 不会递归地释放结构的成员指针。

b）是的，在这种情况下存在内存泄漏。您必须使用您的代码释放所有分配的内存。

c) 您可以使用检查内存泄漏的工具，例如 valgrind，这很容易。而且我知道有些项目实现了自己的内存管理，他们将 malloc 和 free 包装在自己的 API 中，这样您就可以在他们的 API 中跟踪内存使用情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T13:00:01.623

对于完整的内存管理，我将拥有一个内存池。这将消除必须为每个调用的 malloc 调用多个 free 的所有痛苦。我使用 Apache Portable 运行时 (APR) 进行内存池。只需在开始时分配一块内存进行初始化。尽可能多地为每个指针分配。然后最后只需拨打一个电话即可释放所有内存。这比执行大量导致内存泄漏的 malloc 和释放要高效得多。

作为旁注。如果您不使用内存池，我建议您使用 valgrind 来测试您的应用程序。事实上，你应该总是使用 valgrind。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T12:43:38.420

问题是：您需要确保您尝试释放的指针实际上已初始化。

我还会在调用它之前检查是否`V->v`不是（请参阅我对您的问题的评论）。`NULL``free`

`free`不是“递归的”。如果您不释放`e`并且`v`（在您的示例中），那么您正在泄漏内存。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T12:52:16.647

A：`free()`不能递归工作。- 如果你是 ADT 概念，那么我建议你通过创建一个函数来执行类型内部的分配，并在一个函数`createVertexNode()`内部进行检查和释放`freeVertexNode()`

B：如果您无法释放它，那么这将是内存泄漏 - 您可以通过确保您的 ADT 函数检查并释放它分配的内存来避免它，或者...

C：使用内存泄漏检查器。Visual Studio 有一个内置的，或者使用其他的，例如 valgrind 或 Rational Purify。我确信有更多免费的开源库，最简单的，覆盖 malloc() 和 free() 调用

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-30T13:15:37.097

基本上要记住的是调用`malloc()`/`free()`应该是`1:1`. 如果我调用`malloc()`以获得一些内存，我需要在`free()`完成后调用以返回它。

这回答了问题 a)，不，它不是递归的。（否则一个电话`free()`就足够了）。

b）你打赌会有内存泄漏！想想一些简单的代码：

```
typedef struct pointless {
    struct pointless * next;
}pl;

pl * head = malloc(sizeof(pl)); // head gets 4 bytes
pl->next = malloc(sizeof(pl));  // head->next gets 4 bytes
free(head);  // head's allocated 4 bytes are deleted 
```

显然这是一个没有意义的列表，因为它只是指向下一个空元素，但它说明了这一点。我的总列表分配了 8 个字节（4 个用于`head`，4 个用于`head`'s `next`）。当我调用`free()`它时，它适用于`head`4 个字节，但仅此而已。

这是一件好事，它以这种方式工作！考虑从链表中间删除单个项目，您想释放该节点的内存，但不是全部！然而，鉴于我上面的例子，你会有一个内存泄漏，因为`head->next`它没有被释放；一旦你打电话`free(head)`，就不能保证你可以再访问`head->next`了。这当然是可能的......但在这一点上是UB。

c) 该级别的内存管理由操作系统完成。如果您想跟踪您分配/释放的数量，您必须执行以下操作：

```
int total_mem = 0;

head = malloc((total_mem += sizeof(pl)));

free(head);
total_mem -= sizeof(head); 
```

当然，您可以在`malloc()`and周围放置包装器`free()`来为您做数学运算，这将更易于管理，但您明白了。

# google-chrome - 一个 MP3 文件无法在 Chrome 中播放（其他文件有）

> ID：13645455
> 
> 赞同：2
> 
> 时间：2012-11-30T12:38:33.757
> 
> 标签：google-chrome, mp3, embed, html5-audio

我正在开发一个 Joomla 站点 (2.5) 并使用 html5-tags 在 K2 文章中嵌入了一个音频文件 (mp3)（参见下面的代码）。mp3 在 Firefox (vs 16.02) 和 IE (vs 8.0.6) 中可以完美播放，但在 Google Chrome (vs. 23.0) 中却不行。奇怪的是，问题似乎只与这个特定的 mp3 文件有关，其他 mp3 在 Chrome、Firefox 和 IE 中都做得很好。

```
<audio autoplay="autoplay" width="200" src="images/tonesound/mp3/01funkybeats.mp3" type="audio/mp3" controls="controls" preload="none"></audio> 
```

该文件相当大（11.4 MB），大约 15 秒后开始播放音乐（在 Firefox 和 IE 中，而不是在 Chrome 中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:51:55.197

您[不应该在网络上使用 MP3](https://www.scirra.com/blog/64/why-you-shouldnt-use-mp3-in-your-html5-games)。最好的解决方案是将所有音频编码为 AAC 和 Ogg，因为这两种格式涵盖了所有浏览器，而 MP3 肯定不会在任何地方都可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:18:20.367

您的 MP3 文件的前几帧已损坏。尝试重新编码媒体。

您可以通过 VLC 中的调试输出看到这一点。

# wix - 快捷方式目标设置为 keyPath 而不是父文件？（WIX 文档是错误的）

> ID：13645461
> 
> 赞同：1
> 
> 时间：2012-11-30T12:38:56.583
> 
> 标签：wix, shortcut

[Shortcut 元素上的](http://wix.sourceforge.net/manual-wix2/wix_xsd_shortcut.htm)WIX文档说明了 Target 属性：

```
The value will be defaulted to the parent File when nested under a File element. 
```

但是代码

```
<Component Guid="MY_GUID" Id="MyAppComponent">
  <File Source="SomeDll.dll" Name="SomeDll.dll" Id="SomeDll.dll" KeyPath="yes" />
  <File Source="MyDll.exe" Name="MyDll.exe" Id="MyDll.exe" />
    <Shortcut Id="MyApp.Shortcut" Directory="ApplicationProgramMenuDir" WorkingDirectory="INSTALLDIR" Name="MyApp" Icon="ProgramIcon.ico" Advertise="yes" />
  </File>
</Component> 
```

无法按预期工作 - 指向 dll 文件的快捷方式并运行它会显示 Windwos 错误消息，即它无法启动具有 dll 扩展名的文件。

为了解决这个问题，我们需要做出唯一的改变：为 exe 文件而不是 dll 设置 KeyPath="yes" 属性：

```
<Component Guid="MY_GUID" Id="MyAppComponent">
  <File Source="SomeDll.dll" Name="SomeDll.dll" Id="SomeDll.dll"/>
  <File Source="MyDll.exe" Name="MyDll.exe" Id="MyDll.exe" KeyPath="yes" />
    <Shortcut Id="MyApp.Shortcut" Directory="ApplicationProgramMenuDir" WorkingDirectory="INSTALLDIR" Name="MyApp" Icon="ProgramIcon.ico" Advertise="yes" />
  </File>
</Component> 
```

那么 WIX 文档包含错误吗？Target 不是设置为父 File 元素，而是设置为祖先的 Component 的 KeyPath？

还是我的错误和我的代码有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:16:55.720

尝试添加这样的`<RegistryValue>`标签：

```
<Component Guid="MY_GUID" Id="MyAppComponent">
    <File Source="SomeDll.dll" Name="SomeDll.dll" Id="SomeDll.dll"/>
    <File Source="MyDll.exe" Name="MyDll.exe" Id="MyDll.exe" KeyPath="yes" />
        <Shortcut Id="MyApp.Shortcut" Directory="ApplicationProgramMenuDir" WorkingDirectory="INSTALLDIR" Name="MyApp" Icon="ProgramIcon.ico" Advertise="yes" />
    </File>
    <RegistryValue Root="HKCU" Key="Software\[Manufacturer]\[ProductName]\setup" Name="Shortcut" Type="integer" Value="1" KeyPath="yes" />
</Component> 
```

如果你`InstallScope`是`perUser`，使用`HKCU`

如果你`InstallScope`是`perMachine`，使用`HKLM`

# php - php sha2() 用法

> ID：13645463
> 
> 赞同：-2
> 
> 时间：2012-11-30T12:39:14.430
> 
> 标签：php, sha2

有没有办法比较在 sha2() 中加密后存储在数据库中的密码和用户在登录期间输入的密码而不加密登录时间密码？实际上，我想逐个字符地匹配密码并以大写或小写形式传递匹配项，换句话说，是否有一种函数或方法可以在比较之前对保存的密码进行解密？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:41:48.703

What you want to do sounds fishy.
Anyway no you can't recover a hashed string

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-05T15:22:05.420

您不能“解密” SHA 哈希。相反，将输入密码的 SHA 版本与数据库中存储的密码（也经过哈希处理）进行比较。

```
$enteredpass = $_POST['password'];
$enteredpass = sha2($enteredpass);
$realpass = sha2('password123'); //Yup, best password EVAR!! xD
if ($enteredpass == $realpass) {
     echo "THE PASSWORD IS CORRECT!! :D";
}
else {
     echo "THE PASSWORD IS INCORRECT!!";
} 
```

您可能想使用数据库，但这只是一个简单的示例... ;)

# java - Java 1.6 和 Oracle JDBC 14 setQueryTimeout 不起作用

> ID：13645464
> 
> 赞同：1
> 
> 时间：2012-11-30T12:39:23.430
> 
> 标签：java, sql, database, oracle, jdbc

我们运行 Java 1.6 并使用最新的 ojdbc14.jar。我们连接到远程 Oracle 数据库。我们要设置查询超时，因为查询的完成时间不得超过 2 分钟。

我已经这样做了：

```
 statement = conn.prepareCall(call);
  statement.setQueryTimeout(120);
  statement.executeQuery(); 
```

大约 8 分钟后，它最终超时！对此有任何想法或解决方法吗？一如既往，非常感谢您的帮助！

编辑：我们使用瘦驱动程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T13:29:58.800

在此处查看查询超时在 Oracle JDBC 驱动程序中的工作原理：[https ://forums.oracle.com/forums/thread.jspa?threadID=550257](https://forums.oracle.com/forums/thread.jspa?threadID=550257)

长话短说：

1.  当超时到期时，需要对数据库进行一次完整的往返才能取消 SQL 执行。数据库将在需要时处理取消请求。
2.  驱动程序超时机制不是高精度机制。由于实际取消执行需要通过网络与数据库通信，因此让驱动程序变得超级精确是没有意义的。即使驱动程序是精确的，数据库响应取消请求所需的网络延迟和时间也会否定驱动程序的精度。因此，超时是驱动程序在向服务器发送取消之前让 SQL 执行的最短时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-30T00:09:54.533

尝试在客户端 JVM 系统属性中传递 -Doracle.net.disableOob=true。根据[财产文件](http://download.oracle.com/otn_hosted_doc/jdeveloper/905/jdbc-javadoc/oracle/jdbc/OracleConnection.html#CONNECTION_PROPERTY_THIN_NET_DISABLE_OUT_OF_BAND_BREAK)，

> 从 11g 开始，Thin 默认使用带外中断。如果用户更喜欢使用带内中断而不是带外中断，则可以将此属性设置为 true。

在某些情况下，底层协议不支持带外中断，或者数据库未配置为侦听带外中断。

# shell - 在 Unix shell 脚本中运行总计

> ID：13645467
> 
> 赞同：1
> 
> 时间：2012-11-30T12:39:26.363
> 
> 标签：shell, unix

我在尝试编写的 unix shell 脚本中遇到了一些问题，该脚本从命令行保持多个文件中的总行数。我可以单独计算行数并在每次循环中显示它们，但我的行变量总是在最后读取 0。

```
#! /bin/sh
lines=0

line_count(){
    #count the lines
    l= blablabla.....
    lines=`lines + l`
}

for f in "$@"
do
echo "total lines:"
( line_count "$f" )
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T13:39:24.023

如果您在子shell 中运行某些东西，您所做的任何变量更改（例如增加`$lines`）仅在该子shell 内有效，并且在子shell 退出时丢失。但是由于您使用的是函数，因此根本不需要子shell，只需调用该函数即可。

`lines=`lines + l``还将尝试`lines`使用参数`+`和执行命令，我认为这`l`不是您想要的。要评估表达式的结果，请使用`$(( ... ))`语法，并在变量前面加上`$`它们的值。

最后，您永远不会使用 的值`$lines`，您可能希望在调用该函数后打印它。

```
#! /bin/sh
lines=0

line_count(){
    #count the lines
    l= blablabla.....
    lines=$(( $lines + $l ))
}

for f in "$@"
do
    line_count "$f"
    echo "total lines: $lines"
done 
```

# java - org.hibernate.MappingException：复合主键作为另一个表中的外键

> ID：13645476
> 
> 赞同：1
> 
> 时间：2012-11-30T12:39:50.060
> 
> 标签：java, hibernate, jpa, hibernate-mapping

`@OneToMany`我在使用注释从一个类中引用另一个类中的复合主键时遇到问题。

我的复合主键类如下：

```
@Entity
@Table(name = "name_entry")
public class NameEntry {,

    @EmbeddedId
    private NameEntryPK id;

    //getters, setters
} 
```

Composite Id 类是这样的：

```
@Embeddable
public class NameEntryPK implements Serializable {

    @Column(name = "entry")
    protected String entry;

    @Column(name = "name")
    protected String name;

    //getters, setters
} 
```

这对我来说很清楚，它的工作很完美。问题发生在另一个地方。我想有另一个具有`NameEntry`主键外键的类。我写过这样的东西：

```
@Entity    
@Table(name = "content_entry")
public class ContentEntry {

    //id, other columns

    @OneToOne
    @JoinColumns ({
        @JoinColumn(name = "entry_content", referencedColumnName = "entry", insertable = false, updatable = false),
        @JoinColumn(name="title_name", referencedColumnName = "name", insertable = false, updatable = false)
    })
    protected NameEntry nameEntry;

    //getters, setters   
} 
```

据此，我的例外是：

```
Invocation of init method failed; nested exception is org.hibernate.MappingException:
Unable to find column with logical name: `entry` in
org.hibernate.mapping.Table(name_entry) and its related supertables and 
secondary tables 
```

据此：[https](https://hibernate.onjira.com/browse/HHH-7713?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel) ://hibernate.onjira.com/browse/HHH-7713?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel我试图用给定的重音包围列名称。但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:50:14.323

我不知道这个问题与列名的情况有什么关系，因为看起来你的映射不正确。您指定的连接列表明存在引用“entry”字段的“entry_content”字段，但您设置了引用，使其从“name_entry”变为“content_entry”。因此，它正在为 ContentEntry 类中的“条目”字段寻找映射，但找不到。我认为你的意思是“条目”有一个“条目内容”的引用列名。尝试切换它们，看看是否有帮助。

映射本身对我来说没有多大意义。如果使用的外键是 NameEntry 的主键，我看不出 ContentEntry 怎么会有很多 NameEntry - 这将是唯一的。如果不是相反，NameEntry 可以有许多 ContentEntry，而 ContentEntry 与单个 NameEntry 有 ManyToOne 关系？如果没有，您可能想要描述您想要的表格或对象图应该是什么样子并从那里开始工作。

# facebook - 个性化视频/Facebook 应用程序 - 最好的方法是什么？

> ID：13645478
> 
> 赞同：3
> 
> 时间：2012-11-30T12:39:51.323
> 
> 标签：facebook, html, flash, facebook-graph-api, html5-video

我想构建一个具有个性化视频的 facebook 应用程序，该应用程序从用户的 facebook 个人资料及其扩展的社交图谱中导入内容资产，并将这些资产集成到时间线中。我正在考虑使用 Flash，但是一个关键规定是该应用程序可以在移动设备上运行 - 所以我需要使用 HTML5。我的问题是：我是否可以使用 Flash 构建应用程序，然后将应用程序编译为 HTML5 - 或者是否有其他解决方案，即带有编程层的 HTML5 视频工具包，允许我构建 Web 应用程序/访问脸书API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:50:54.453

这些年来我已经做过几次了，是的，flash 是最简单的，但是我知道有一些选项可供你使用，我知道它们将完全基于 HTML5，我个人会远离 flash，因为它最终只会进入他的方式：

1- 最简洁的方法是使用服务器端的视频合成工具，可以对其进行编程以接受变量。就我个人而言，我只使用 ffmpeg 做过这个，但是有几个替代品。基本过程是从 FB 获取媒体，然后使用 shell 脚本在服务器上的基础视频的顶部/下方/周围的某个点合成它们，然后将媒体资产作为变量传递给该脚本。您可能希望如何完成此操作有很多选择，可能最好查看其中一些示例：

[http://broadcasterproject.wordpress.com/2010/05/18/how-to-layerremix-videos-with-free-command-line-tools/](http://broadcasterproject.wordpress.com/2010/05/18/how-to-layerremix-videos-with-free-command-line-tools/)

[http://graphcomp.com/ffmpeg/](http://graphcomp.com/ffmpeg/)

[没有vhook的ffmpeg水印？](https://stackoverflow.com/questions/1559691/ffmpeg-watermark-without-vhook)

*请注意，上次我这样做时我使用了 vhooks 和自定义过滤器，现在不推荐使用 vhooks*

如果您的应用程序很受欢迎，这种方法将意味着相当重的服务器负载，但它可能是跨设备等最强大的。

2- 使用[Popcorn.js](http://popcornjs.org/demos)，让处理在客户端完成。您可以使用 css/js/html 对其进行硬编码，但 popcorn 非常稳定，尽管我还没有看到它是如何在设备上运行的，但理论上它应该可以工作（所有标准化技术）。基本上，该过程将使用 javascript 在预设提示点处触发覆盖在视频基础文件上的图像显示。爆米花已经为您提供了所有方法和手段。

希望这个对你有帮助。祝你好运，听起来很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T15:14:34.793

我们意识到一些交互式视频应用程序，最近的一个项目与您的问题描述的非常相似。

我们使用 adobe flash 来跟踪运动 - 并通过 create.js 发布项目。您可以从 create.js 中获得图像序列，或者将视频放在后面的层中。然后，该视频将通过 jquery 控制 create.js 运动跟踪序列的播放器头部时间。

工作正常 - 这里是一个带有图像序列的测试设置的链接。视频集成将是下一步。

[http://www.jungeroemer.net/projekte/testpersvid/elftest01.html](http://www.jungeroemer.net/projekte/testpersvid/elftest01.html)

（德语文本，抱歉，在那里阅读并不重要。只需单击图像即可）

您可以从链接下载源代码，如果您需要，我还可以上传 Flash 文件向您展示运动跟踪。

# asp.net - 在 asp.net 中实现重写 url 逻辑后，锚标记不起作用

> ID：13645480
> 
> 赞同：1
> 
> 时间：2012-11-30T12:39:53.290
> 
> 标签：asp.net, url-rewriting, anchor

我们已经使用 Intelligencia.UrlRewriter 成功实现了重写逻辑。但是锚标签不起作用。该怎么办？

url重写之前

```
www.mysite.com/productdetail.aspx?pid=10&catid=20

www.mysite.com/productdetail.aspx?pid=10&catid=20#contact 
```

重写后以下工作

```
www.mysite.com/product/10/20/apple-iphone-4-black 
```

但这不起作用

```
www.mysite.com/product/10/20/apple-iphone-4-black#contact 
```

当我们在我的实际 aspx 页面上点击锚标记链接时，它会转到我们的索引页面，然后

url变成了这样

```
www.mysite.com/#contact 
```

# c# - 通过 IEnumerable to MVC view and casting to strongly typed object I have a requirement to pass an IEnumerable to an MVC view and have the view cast this to a strongly typed object and display it according 问问题 问问题 2012-11-30T12:41:04.617 2730 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have a requirement to pass an IEnumerable to an MVC view and have the view cast this to a strongly typed object and display it accordingly. This appears to be having a performance impact vs. passing it down as a IEnumerable of MyCustomObject. foreach (var item in Model.Items) { var current = (MyCustomObject) item;

@current.Submitted

} My questions are Should I cast the entire IEnumerable of Objects to IEnumerable of MyCustomObject? How can I improve the performance of this operation? If this is not good practice, what's the best way to pass a "variable" type for my Items collection, which could be a collection of any type of custom object? Use a List pass this to the model, then it is strongly defined Controller public ActionResult Index(){ MyModel model = new MyModel(); model.list = //get list from source return View(model); } Model public List <mycustomobject>list {get; set;} c#asp.net-mvcasp.net-mvc-3 4 2 回答 2 This answer is useful 2 Initially, you could use Cast on the entire collection: foreach (var item in Model.Items.Cast<mycustomobject>()){} If your types will all inherit from a base type, say MyCustomObject, then your model should specify this, e.g. public class MyViewModel <t>where T : MyCustomObject, new() { public IEnumerable <t>Items { get; set; } } You would need to ensure that any types you wished to add to your items collection inherited from the base MyCustomObject type 于 2012-11-30T12:52:24.337 回答 This answer is useful 2 使用 List 将其传递给模型，然后对其进行强定义 控制器 public ActionResult Index(){ MyModel model = new MyModel(); model.list = //get list from source return View(model); } 模型 public List <mycustomobject>list {get; set;} 于 2012-11-30T12:45:27.060 回答 Related 1 javascript - jQuery position().left 在动画 marginLeft '-=300px' 后总是 === 0 1 ejb-3.0 - EJB 3.0 从单个会话 bean EJB 3.0 访问两个数据库 1 javascript - 修复溢出中的定位元素：滚动 1 primefaces - 如何为 primefaces menuitem 使用转换器 2 image - Three.js 没有显示我的纹理 1 javascript - 序列化淘汰视图模型，想法？ 2 android - ImageView 上的 setPadding 崩溃活动 0 iphone - 允许输入文本，除了 UITextview 中图像占用的空间 1 java - 在另一个 JFrame 中使用 JButton 刷新 JTable？ 1 iphone - UIMenuController 在 ios6 中不起作用 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13645498
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

I have a requirement to pass an `IEnumerable<Object>` to an MVC view and have the view cast this to a strongly typed object and display it accordingly.

This appears to be having a performance impact vs. passing it down as a IEnumerable of MyCustomObject.

```
foreach (var item in Model.Items)
{
    var current = (MyCustomObject) item;
    <p>@current.Submitted</p>
} 
```

My questions are

1.  Should I cast the entire IEnumerable of Objects to IEnumerable of MyCustomObject?
2.  How can I improve the performance of this operation?
3.  If this is not good practice, what's the best way to pass a "variable" type for my Items collection, which could be a collection of any type of custom object?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:52:24.337

Initially, you could use Cast on the entire collection:

```
foreach (var item in Model.Items.Cast<MyCustomObject>()){} 
```

If your types will all inherit from a base type, say MyCustomObject, then your model should specify this, e.g.

```
public class MyViewModel<T> where T : MyCustomObject, new() 
{
    public IEnumerable<T> Items { get; set; }
} 
```

You would need to ensure that any types you wished to add to your items collection inherited from the base `MyCustomObject` type

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T12:45:27.060

使用 List 将其传递给模型，然后对其进行强定义

**控制器**

```
public ActionResult Index(){

MyModel model = new MyModel();
model.list = //get list from source

return View(model);

} 
```

**模型**

```
public List<MyCustomObject> list {get; set;} 
```</mycustomobject></t></t></mycustomobject></mycustomobject>

# java - 使用 gradle 自定义 JUnit 测试检测

> ID：13645500
> 
> 赞同：3
> 
> 时间：2012-11-30T12:41:14.730
> 
> 标签：java, junit, gradle

我们的测试套件正在快速增长，我们已经达到了我们更多功能测试依赖于其他系统的地步。

我们使用 gradle 测试任务使用包含和排除过滤器运行这些测试，但这变得很麻烦，因为我们必须以特定方式命名我们的测试。

我们目前的方法是按以下方式命名我们的测试：

```
class AppleSingleServiceTest {}
class BananaMultiServiceTest {}
class KiwiIntegrationTest {} 
```

然后使用在相关任务中包含测试

```
include '**/*SingleServiceTest.class'
include '**/*MultiServiceTest.class'
include '**/*IntegrationTest.class' 
```

**是否可以通过查看注释在 gradle 中找到测试类？**

```
@SingleServiceTest
public class AppleTest {} 
```

我认为任何未注释的测试都将作为正常的单元测试运行，因此如果您忘记注释更多功能测试，它将失败

单个服务测试的一个示例是 selenium 测试，其中 SUT 的任何外部依赖项都被存根

多服务测试的一个例子是一些但可能不是所有的外部依赖没有被存根

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-07T08:04:22.510

从[Gradle 1.6](http://www.gradle.org/docs/1.6/release-notes#support-for-junit-@category)开始，Gradle 支持使用 JUnit 选择测试`@Category`，如下所示：

```
test {
    useJUnit {
        includeCategories 'org.gradle.junit.CategoryA'
        excludeCategories 'org.gradle.junit.CategoryB'
    }
} 
```

更多细节可以在[docs](http://www.gradle.org/docs/current/userguide/java_plugin.html#junitcategories)中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:57:20.077

您要求的功能目前不存在，但您可以在[http://forums.gradle.org](http://forums.gradle.org)提出功能请求。或者您可以使用（繁琐的） JUnit `@Category`，这需要您定义测试套件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T18:19:18.263

我也有类似的需求来过滤带有注释的测试。我最终设法创建了一个解决方案。它张贴[在这里](https://stackoverflow.com/questions/22736699/gradle-guidance-needed-to-filter-tests-using-annotation/22819722#22819722)。

# php - CakePHP：让用户选择语言

> ID：13645509
> 
> 赞同：1
> 
> 时间：2012-11-30T12:41:41.933
> 
> 标签：php, cakephp

我希望用户在 cakePHP 应用程序中选择他们的语言。我有德语和英语的 default.po 文件。但是当我调用`$this->Session->write('Config.language', 'ger');`Controller 函数时，什么也没有发生。

我必须做些什么才能让它发挥作用？

控制器功能：

```
public function changeLang() { 
    $this->autoRender = false; 
    $this->Session->write('Config.language','ger'); 
    Configure::write('Config.language','ger'); 
    $this->Session->setFlash(__('Language changed succefully.')); 
    $this->redirect($this->referer()); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:05:05.097

[此处](http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html%20here)的文档指出您需要写入配置类以及设置会话变量。

```
class AppController extends Controller {
    public function beforeFilter() {
        Configure::write('Config.language', $this->Session->read('Config.language'));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:36:40.553

我找到了解决方案，我为我的文件夹使用了错误的语言代码。我有“ger”，但应该是“deu”。

# html - Parsing an HTML file through Emacs Lisp

> ID：13645512
> 
> 赞同：1
> 
> 时间：2012-11-30T12:41:48.423
> 
> 标签：html, parsing, elisp

I need to parse an HTML file in order to store all the fields of a table in a list through Emacs Lisp.
Although a function like libxml-parse-html-region could do that work for me, Emacs should have been compiled with libxml2 support in advance and as I do not have admin privileges on this machine I cannot use that function.
Therefore, can you share some other options with me in order to get the job accomplished taking into account the referred constraints ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:34:41.850

你可以为你的用户构建你自己的 Emacs 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:36:35.007

你可以在 EmacsWiki 上找到各种[XML Parser](http://emacswiki.org/emacs/XmlParser)

# matlab - Matlab仿真：关于生成随机数的查询

> ID：13645515
> 
> 赞同：0
> 
> 时间：2012-11-30T12:41:52.230
> 
> 标签：matlab, simulation, octave

我正在做一些模拟研究，对于最初的研究，我试图模拟 100 个气体粒子，然后将这些气体粒子随机分组为 5 组 10 或 100 次（任何组中的非零值）。之后，我必须找到具有最高粒子和数量的组。

例如

```
 100 gas particles

  1  2  3  4  5(groups)  Total particle  group/Highest number
 20|20|20|20|20           100             1-2-3-4-5/20
 70|16|04|01|09           100             1/70
 18|28|29|10|15           100             3/29
 .
 .
 etc 
```

我用它一次生成了 5 个随机数

```
for i=1:1
randi([1,100],1,5)
end    
ans =

    50    41     9    60    88 
```

但是我如何找到最高的数字和组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:49:07.417

使用最大功能：

```
a = [50    41     9    60    88];
[C,I] = max(a) 
```

C 应等于 88，I 应等于 4。

对于相等的特殊情况（代码中的第一行），您必须阅读[文档](http://www.mathworks.fr/fr/help/matlab/ref/max.html)以查看 max. 我认为返回的索引将是第一个最大值。

# java - 碰撞检测返回从图像文件名派生的值

> ID：13645524
> 
> 赞同：2
> 
> 时间：2012-11-30T12:42:27.790
> 
> 标签：java, collision-detection, filenames

我目前正在构建一个小型 Asteroids 风格的游戏，供当地小学的孩子们使用。目的是帮助他们制定时间表。

一个随机生成的问题显示在屏幕上，（例如：6 * ? = 12），周围漂浮着许多带有数字的星星图像，等待被拍摄！你控制一艘船飞来飞去寻找正确的答案。

子弹与星星相撞，需要进行测试以查看用户是否射击了正确答案。

星星的文件名只是“1.png”、“2.png”等，我有一个小函数可以返回文件名的第一个字符，并将其转换为 int：

```
public rightAnswer() {

    String filename = "12.png";     //would be passed as parameters 
    int coefficient = 2;            //
    int answer = 24;                //

    char first = filename.charAt(0);
    char second = filename.charAt(1);       
    int target;

    if (second != '.') {    //dealing only with 1 or 2-digit numbers        

        String both = String.valueOf(first) + String.valueOf(second);           
        target = Integer.parseInt(both);
    }
    else {
        target = Character.digit(first, 10);
    }

    if (target * coefficient == answer) {
        System.out.println("Answer is correct! (target = " + target + ")");
    }
    else {
        System.out.println("Wrong! (target = " + target + ")");
    }
} 
```

写的时候遇到一个问题。我不知道如何检索碰撞星的文件名以将其传递给上述测试函数。

编辑：

拍摄Enno Shioji的解决方案，我得出了这个结论：

```
//star map
Map<ImageEntity, Integer> star_number = new HashMap<ImageEntity, Integer>();

//later, while loading the images into the game...
for (int n = 0; n < 10; n++) {          // 10 loops

        stars[n] = new ImageEntity(this);
        String filename = (n+2) + ".png";   // 2- 12 range
        stars[n].load(filename);

        star_number.put(stars[n], n+2);
    }

//then later again, run when collision is detected between a bullet and a star...
public boolean correctAnswer(ImageEntity star, int expectedAnswer) {

    if (star_number.get(star) == expectedAnswer) 
        return true;

    else return false;
} 
```

这看起来对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:15:31.670

我不会尝试获取文件名。相反，您应该在地图中跟踪哪个星对应哪个数字。

```
// Do this wherever you have easy access to the file name
Map<Star,Integer> star_number = new HashMap<Star,Integer>();
star_number.put(star1,1);
star_number.put(star2,2);
etc...

//Then later...
boolean collided(Star star, Integer expectedAnswer){
    Integer answerGiven = star_number.get(star);
    return expectedAnswer.equals(answerGiven);
} 
```

或者，您也可以通过这样定义 Star 对象来跟踪：

```
class Star{
    Integer number;
    StarImage image;
    Star(StarImage image, Integer number){
        this.number = number;
        this.image = image;
}
// then later...
boolean collided(Star star, Integer expectedAnswer){
    return star.number.equals(expectedAnswer);
} 
```

希望这可以帮助。祝你的项目好运:)

# sql - Selecting same value from two columns in a lookup table

> ID：13645528
> 
> 赞同：4
> 
> 时间：2012-11-30T12:42:34.833
> 
> 标签：sql, join

I have a table as follows

```
UserID  CONSUMERID
1          2
1          3
1          4
5          1 
```

this is a lookup column, user can be consumer here.
I need to query the table and get a single column output so that for example if ID = 1 I should be able to query userid and get all consumnerid data where userid = 1 and at the same time query get all userid data where consumerid = 1.. all the results should come in one column. So in other words query both columns for 1 and return opposite column value.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:45:10.353

使用`UNION`(implicit DISTINCT) or `UNION ALL`，像这样：

```
SELECT UserId FROM table WHERE ConsumerId = 1
UNION ALL
SELECT ConsumerId FROM table WHERE UserID = 1; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/b41e4/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:21:22.980

您可以在没有联合的情况下执行此操作，只需使用逻辑：

```
select (case when UserId = 1 then Consumerid else UserId end) as id
from t
where UserId = 1 or ConsumerId = 1 
```

# android - Android 4.2 cache error

> ID：13645529
> 
> 赞同：2
> 
> 时间：2012-11-30T12:42:36.630
> 
> 标签：android, android-4.2-jelly-bean, android-file

I have this error when i try to :

```
File file = new File(cacheDir, fileName);
Bitmap bmp = BitmapFactory.decodeFile(file.getAbsolutePath()); 
```

cache dir is from :

```
context.getCacheDir(); 
```

And the error is:

> 11-30 12:38:34.029: E/BitmapFactory(18814): Unable to decode stream: java.io.FileNotFoundException: /data/data/com.android.test/cache/file_name: open failed: ENOENT (No such file or directory)

This is my void to write the file:

```
public static void writeFile(Bitmap bmp, File f) {
        if (bmp == null)
            return;

        FileOutputStream out = null;

        try {
            out = new FileOutputStream(f);
            bmp.compress(Bitmap.CompressFormat.PNG, 80, out);
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            try {
                if (out != null)
                    out.close();
            } catch (Exception ex) {
            }
        }
        Log.i("app", "path: "+f.getAbsolutePath());
    } 
```

In this void, the Log.i in the end print the same file path as the error one.

I have this error ONLY on device with android 4.2\. till android 4.1.x all works fine.

# java - RMI over SSL，如何将信任库和密钥库集成到应用程序中？

> ID：13645530
> 
> 赞同：0
> 
> 时间：2012-11-30T12:42:37.240
> 
> 标签：java, authentication, ssl, rmi

我遵循了[基于 SSL/TLS 的 RMI Socket Factories的教程](https://blogs.oracle.com/lmalventosa/entry/using_the_ssl_tls_based)

而且我已经能够生成密钥库和信任库。目前只有服务器对自己进行身份验证。

当我将 keystore 和 trustore 文件放在 Eclipse 项目的根文件夹中并在 Windows 控制台中手动启动（或在 Eclipse 中添加 VM 参数）时：

```
$ java -Djavax.net.ssl.trustStore=truststore -Djavax.net.ssl.trustStorePassword=trustword RmiRegistry &

$ java -Djavax.net.ssl.keyStore=keystore -Djavax.net.ssl.keyStorePassword=password HelloImpl &

$ java -Djavax.net.ssl.trustStore=truststore -Djavax.net.ssl.trustStorePassword=trustword HelloClient 
```

一切正常。现在，如果我想发送我的申请（这是为了分配）。我可以将信任库和密钥库放在哪里以及如何允许更正器启动

```
$ java RmiRegistry & 
```

而不是

```
 $ java -Djavax.net.ssl.trustStore=truststore -Djavax.net.ssl.trustStorePassword=trustword RmiRegistry & 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:16:42.777

您将需要向 Java 运行时环境的`cacerts`文件添加一个新的受信任机构。找到这个文件`$JRE_HOME/lib/security/`。默认密码是`changeit`.

或者，您可以在代码中配置启动时的属性：

```
System.setProperty("javax.net.ssl.trustStore", "path to truststore");
System.setProperty("javax.net.ssl.trustStorePassword", "trustStorePassword");

System.setProperty("javax.net.ssl.keyStore", "path to keystore");
System.setProperty("javax.net.ssl.keyStorePassword", "keyStorePassword)"; 
```

# android - 什么opengl es 2没有设置矩阵模式方法？

> ID：13645535
> 
> 赞同：1
> 
> 时间：2012-11-30T12:42:53.570
> 
> 标签：android, opengl-es

我正在尝试`opengles2`在android平台上进行开发。但我在头文件中找不到`glMatrixMode`方法`GLES2/gl2.h`，但我可以在`GLES/gl.h`. 我应该在包含`gl.h`的同时包含`gl2.h`吗？opengles2中是否需要矩阵模式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T12:52:19.110

OpenGL-ES-2 中没有矩阵堆栈。它已被完全删除。现代 OpenGL（OpenGL-3 核心及更高版本）也是如此。

您应该自己管理矩阵，就像每个严肃的 3D 图形应用程序多年来所做的那样。<=OpenGL-2.1 和 OpenGL-ES-1 的矩阵堆栈从来没有完整的功能并且使用起来很麻烦。甩掉包袱。

有许多实现 3D 图形矩阵数学的库。谷歌搜索“GLM”、“Eigen”或“linmath.h”

# c# - ASP.NET button event not firing when using modelpopupextender

> ID：13645540
> 
> 赞同：0
> 
> 时间：2012-11-30T12:43:10.387
> 
> 标签：c#, asp.net, .net, modalpopupextender

I have one Panel that is linked to a ModelPopupExtenderand there is a button inside the first panel. When I click the first panel's button I want it to execute the event and inside this event I want to pop up the second Panel which is also linked to a ModelPopupExtender, but when I click the first Panel's button the event does not trigger.

Asp Code :

```
<input type="hidden" runat="server" id="hdnEditBank1" />
<asp:Panel runat="server" ID="pnl1" CssClass="Modal450h450w" Height="300px">
    <table id="tblEditBank1" runat="server">
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td align="right" colspan="2"><img runat="server" id="imgExitEdit1"  src="../images/Exit_cross.png" /></td>
        </tr>
        <tr>
            <td colspan="3">Name : </td>
            <td colspan="2"><telerik:RadTextBox ID="txt1" runat="server" CssClass="largebox"></telerik:RadTextBox></td>
        </tr>

        <tr>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
        </tr>
        <tr>                            
            <td colspan="4">
                <asp:Button runat="server" ID="btnClose" Text="Close" OnClick="btnAdd_Close_Click" />                    
            </td>
            <td align="right">
                <asp:Button runat="server" ID="btnNext" Text="Next" OnClick="btnEdit_Next_Click" />
            </td>
        </tr>
    </table>
</asp:Panel>

<!-- second panel -->
<asp:ModalPopupExtender ID="ModalPopupExtender6" runat="server" TargetControlID="btnNext" OkControlID="imgExitEdit1"
    PopupControlID="pnl2" BackgroundCssClass="LoadingBackground" >
</asp:ModalPopupExtender>

<input type="hidden" runat="server" id="Hidden1" />
<asp:Panel runat="server" ID="pnl2" CssClass="Modal450h450w" Height="300px">
    <table id="Table1" runat="server">
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td align="right" colspan="2"><img runat="server" id="img1"  src="../images/Exit_cross.png" /></td>
        </tr>
        <tr>
            <td colspan="3">Some Label : </td>
            <td colspan="3"><telerik:RadTextBox ID="txtSomeText" runat="server" CssClass="largebox"></telerik:RadTextBox></td>
        </tr>        
        <tr>                            
            <td colspan="4">
                <asp:Button runat="server" ID="btnIbanClose" Text="Close" OnClick="btnAdd_Close_Click" />                    
            </td>
            <td align="right">
                <asp:Button runat="server" ID="btnIbanReview" Text="Next" OnClick="btnEdit_Next_Click" />
            </td>
        </tr>
    </table>
</asp:Panel> 
```

The code behind :

```
protected void btnEdit_Next_Click(object sender, EventArgs e)
{          
        ModalPopupExtender6.Show();
} 
```

I am thinking it's about the AutoPostBack but I am not sure how to resolve this

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:31:49.087

如果有人感兴趣，我已经找到了解决方案。

您需要做的是创建一个隐藏输入字段并将 TargetControlID 设置为隐藏控件，然后您就可以触发按钮事件。

```
<input type="hidden" runat="server" id="hdnNext" />

<asp:ModalPopupExtender ID="ModalPopupExtender6" runat="server" TargetControlID="hdnNext" OkControlID="imgExitEdit1"
    PopupControlID="pnlIban" BackgroundCssClass="LoadingBackground" >
</asp:ModalPopupExtender> 
```

在这种情况下，输入字段用作虚拟控件，其中 ModalPopupExtender 指向和指向按钮事件，您可以控制要控制的其他 ModalPopupExtender。

# oauth - Google API - OAuth2 - invalid_request

> ID：13645542
> 
> 赞同：2
> 
> 时间：2012-11-30T12:43:18.640
> 
> 标签：oauth, google-api, oauth-2.0

I am stuck with this error. I just successfully received an authorization code and I am trying to exchange it for an access token, but I get the error message "invalid_request".

I am using Apache HttpComponents library (current version) for the request, and there the UrlEncodedFormEntity as I am making a post request.

Here is my request information:

```
Request body: scope=&client_secret=[my_secret]&grant_type=authorization_code&redirect_uri=http%3A%2F%2Fmydomain.org%3A8080%2F[some parameters etc...]%3FplatformID%3D3&client_id=23[...]-rg[...].apps.googleusercontent.com&code=[my_encoded_authorizationCode]

Request-URL: https://accounts.google.com/o/oauth2/token

Request-Method: POST

Request headers -- 

    User-Agent = MAC: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/536.25 (KHTML, like Gecko) Version/6.0 Safari/536.25     // this is a fake user agent I have set by the header manipulation

    Content-Type = application/x-www-form-urlencoded

Response headers -- 

    Cache-Control = no-cache, no-store, max-age=0, must-revalidate

    Pragma = no-cache

    Expires = Fri, 01 Jan 1990 00:00:00 GMT

    Date = Sun, 02 Dec 2012 11:44:34 GMT

    Content-Type = application/json

    X-Content-Type-Options = nosniff

    X-Frame-Options = SAMEORIGIN

    X-XSS-Protection = 1; mode=block

    Server = GSE

    Transfer-Encoding = chunked

Response:

{

  "error" : "invalid_request"

} 
```

Any help? I am stuck for days, researching and implementing other OAuth2-protocols, but Google's one does not work...

Best greetings and thanks, Martin Bories

# javascript - Knockout.js 更新数组中的数组

> ID：13645547
> 
> 赞同：3
> 
> 时间：2012-11-30T12:43:35.270
> 
> 标签：javascript, model-view-controller, mvvm, knockout.js

我在 Knockout 视图模型中有一个数组，如下所示：

```
this.Activities = ko.observableArray([
{ "date": "28/11/2012 00:00:00",
  "activities": [
     { "company": "BOW",
       "description": "Backup Checks",
       "length": "60"
     },
     { "company": "AMS",
       "description": "Data Request",
       "length": "135"
     },
  ]},
{ "date": "30/11/2012 00:00:00",
  "activities": [
     { "company": "BOW",
       "description": "Backup Checks",
       "length": "60"
     },
     { "company": "SLGT",
       "description": "Software Development",
       "length": "240"
     },
     { "company": "BOW",
       "description": "Data Request",
       "length": "30"
     },
  ]},
]); 
```

我使用此代码向其中添加一个新元素：

```
this.Activities.push(new NewActivity(company, description, length, fullDate)); 
```

其中使用 NewActivity 功能：

```
function NewActivity(company, description, length, date) {
    this.date = date;
    this.activities = [{ "company": company, "description": description, "length": length }];
} 
```

它工作正常。但是，它每次被释放时都会创建一个全新的对象。当代码检查已创建对象的日期时，我需要实现一个条件。如果新创建的对象具有相同的日期，则应将活动详细信息添加到该日期的活动数组中的活动数组中。

**我该怎么做？**

活动数组的所有数据都来自 MVC 应用程序中强类型视图中的模型：

```
this.Activities = ko.observableArray([
        @foreach (ActivitySet aSet in Model)
        {
            @:{ "date": "@aSet.Date",
            @:"activities": [
                 foreach(Activity a in aSet.Activities)
                 {
                     @:{ "company": "@a.Companies.Select(c => c.Title).Single()",
                       @:"description": "@a.Descriptions.Select(c => c.Title).Single()",
                       @:"length": "@a.LengthInMinutes"
                     @:},
                 }
            @:]},
        }
]); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T12:57:21.587

我建议您创建一些实体来描述您的活动：

```
// Details
function ActivityDetails(company, description, length) {
    this.company = ko.observable(company);
    this.description = ko.observable(description);
    this.length = ko.observable(length);
}

// Activity
function Activity(date, activityDetails) {
    this.date = ko.observable(date);
    this.details = ko.observableArray(activityDetails);
} 
```

您可以通过以下方式控制活动：

```
function ViewModel () {
    var self = this;

    this.Activities = ko.observableArray([
        // Activities here
    ]);

    this.addActivity = function (activity) {
        var flag = false;
        ko.utils.arrayMap(self.Activities(), function (item) {
            // Flag is here so it doesn't keep checking further in iterations
            if (!flag) {
                if (item.date() === activity.date()) {
                    item.details.push(activity.details);
                    flag = true;
                }
            }
        });
        // Case where activity date was not found in existing records
        if (!flag) {
            self.Activities.push(activity);
        }
    }
} 
```

这要求您的视图模型具有我提供的示例的自定义添加方法。请注意，我在任何地方都在解析可观察值，因此如果您使用不可观察值，请删除函数调用。

# php - 我制作的每个插件都有添加菜单和子菜单页面的问题

> ID：13645549
> 
> 赞同：0
> 
> 时间：2012-11-30T12:43:37.970
> 
> 标签：php, wordpress

所以我上面的意思是。到目前为止，我已经制作了很多插件，但我一直遇到这个问题，我不知道如何描述，这就是为什么我无法在谷歌上搜索它。

发生的情况是，在许多插件中需要一个主菜单，并且在它下面有几个子菜单，这些子菜单导致与插件相关的不同页面。您可以单击主菜单让我们说“汽车”，这将带您进入添加汽车页面。并且还会有一个名为添加汽车的子菜单。

喜欢：帖子 - 例如，当您单击帖子时，它会将您带到所有帖子，但还有一个称为所有帖子的子菜单。

我遇到的问题是主菜单被命名为一个东西，当悬停它时，第一个子菜单也被称为相同的。

我的问题是：

我怎样才能做到这一点，以便在创建主菜单时它不会自动添加子菜单，或者如果它会。名称将与主菜单不同。

我希望解释清楚——我真的试过了。

这是我定义菜单的方式：

```
 function my_plugin_menu() {
add_menu_page( 'add_deal', 'Add Deal', 'manage_options', 'add_deal', 'menuload_add_deal', '', '28');
add_submenu_page( 'add_deal', 'deals', 'Deals', 'manage_options', 'deals', 'menuload_deals');
add_submenu_page( 'add_deal', 'orders', 'Order', 'manage_options', 'orders', 'menuload_orders');
add_submenu_page( 'add_deal', 'gc_options', 'Options', 'manage_options', 'gc_options', 'menuload_gc_options');
}
add_action( 'admin_menu', 'my_plugin_menu' ); 
```

上面现在为我显示：

*   添加交易 - //打开添加交易页面
    *   交易
    *   订单
    *   选项

我想将其更改为：

*   购物车 - //打开添加交易页面
    *   添加交易 - //打开添加交易页面
    *   交易
    *   订单
    *   选项

再次我希望这是有道理的..不要试图浪费任何人的时间，但这就是为什么我很难在谷歌上找到关于这个问题的信息。（我不知道如何很好地描述这个问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:37:15.493

如果有人感兴趣，我找到了一个解决方案：

```
function my_plugin_menu() {
add_menu_page( 'add_product', 'Bass Nation', 'manage_options', 'bass-nation-real-shopping-cart', 'menu_load_add_product', '', '28');
add_submenu_page( 'bass-nation-real-shopping-cart', 'add_product', 'Add Product', 'manage_options', 'bass-nation-real-shopping-cart', 'menu_load_add_product');
add_submenu_page( 'bass-nation-real-shopping-cart', 'products', 'Products', 'manage_options', 'products', 'menu_load_products');
add_submenu_page( 'bass-nation-real-shopping-cart', 'orders', 'Orders', 'manage_options', 'orders', 'menu_load_orders');
add_submenu_page( 'bass-nation-real-shopping-cart', 'bnrsc_options', 'Options', 'manage_options', 'bnrsc_options', 'menu_load_options');
}
add_action( 'admin_menu', 'my_plugin_menu' ); 
```

您只需将第一个子菜单的 slugen 命名为与主菜单相同。

希望这可以帮助那里的人。

# ruby-on-rails - 无法安装导轨 2.3.8

> ID：13645550
> 
> 赞同：1
> 
> 时间：2012-11-30T12:43:43.153
> 
> 标签：ruby-on-rails, rubygems, rvm

我已经在 ubuntu linux 上安装了 ruby​​ ruby​​ 1.8.7 (2011-02-18 patchlevel 334) [x86_64-linux]，我正在尝试安装 rails 2.3.8 gem，但我面临以下错误。

**gem install rails --debug**

```
 gem install rails --debug
Exception `NameError' at /usr/local/rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/command_manager.rb:177 - uninitialized constant Gem::Commands::InstallCommand
Exception `Errno::ETIMEDOUT' at /usr/local/rvm/rubies/ruby-1.8.7-p334/lib/ruby/1.8/net/http.rb:560 - Connection timed out - connect(2)
Exception `Gem::RemoteFetcher::FetchError' at /usr/local/rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/remote_fetcher.rb:246 - Errno::ETIMEDOUT: Connection timed out - connect(2) (http://gems.rubyforge.org/latest_specs.4.8.gz)
Exception `Gem::GemNotFoundException' at /usr/local/rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/dependency_installer.rb:237 - Could not find a valid gem 'rails' (>= 0) locally or in a repository
ERROR:  Could not find a valid gem 'rails' (>= 0) in any repository
Exception `Errno::ETIMEDOUT' at /usr/local/rvm/rubies/ruby-1.8.7-p334/lib/ruby/1.8/net/http.rb:560 - Connection timed out - connect(2)
Exception `Gem::RemoteFetcher::FetchError' at /usr/local/rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/remote_fetcher.rb:246 - Errno::ETIMEDOUT: Connection timed out - connect(2) (http://gems.rubyforge.org/latest_specs.4.8.gz)
ERROR:  While executing gem ... (Gem::RemoteFetcher::FetchError)
    Errno::ETIMEDOUT: Connection timed out - connect(2) (http://gems.rubyforge.org/latest_specs.4.8.gz)
    /usr/local/rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/remote_fetcher.rb:246:in `fetch_path'
    /usr/local/rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/spec_fetcher.rb:269:in `load_specs'
    /usr/local/rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/spec_fetcher.rb:231:in `list'
    /usr/local/rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/spec_fetcher.rb:227:in `each'
    /usr/local/rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/spec_fetcher.rb:227:in `list'
    /usr/local/rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/spec_fetcher.rb:189:in `suggest_gems_from_name'
    /usr/local/rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/command.rb:160:in `show_lookup_failure'
    /usr/local/rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/commands/install_command.rb:132:in `execute'
    /usr/local/rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/commands/install_command.rb:115:in `each'
    /usr/local/rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/commands/install_command.rb:115:in `execute'
    /usr/local/rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/command.rb:278:in `invoke'
    /usr/local/rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/command_manager.rb:147:in `process_args'
    /usr/local/rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/command_manager.rb:117:in `run'
    /usr/local/rvm/rubies/ruby-1.8.7-p334/lib/ruby/site_ruby/1.8/rubygems/gem_runner.rb:65:in `run'
    /usr/local/rvm/rubies/ruby-1.8.7-p334/bin/gem:34

    RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.8.7 (2011-02-18 patchlevel 334) [x86_64-linux]
  - INSTALLATION DIRECTORY: /usr/local/rvm/gems/ruby-1.8.7-p334
  - RUBY EXECUTABLE: /usr/local/rvm/rubies/ruby-1.8.7-p334/bin/ruby
  - EXECUTABLE DIRECTORY: /usr/local/rvm/gems/ruby-1.8.7-p334/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /usr/local/rvm/gems/ruby-1.8.7-p334
     - /usr/local/rvm/gems/ruby-1.8.7-p334@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
     - :sources => ["http://gems.rubyforge.org/", "http://rubygems.org"]
  - REMOTE SOURCES:
     - http://gems.rubyforge.org/
     - http://rubygems.org 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:14:57.017

我已经使用 gem install 的代理命令选项解决了这个问题。它具有以下格式：

```
$ gem install --http-proxy http://201.187.107.19:8080 rails 
```

注意，IP 地址和端口号是指代理。您应该搜索代理列表并使用其中的一个代理。

这是带有代理的网站：[http ://www.cybersyndrome.net/pla5.html](http://www.cybersyndrome.net/pla5.html)

此外，我必须尝试 7 或 8 个不同的代理才能成功。不要放弃。

请注意，您也可能会看到以下错误：

```
ERROR:  While executing gem ... (Gem::DependencyError)
    Unable to resolve dependencies: rails requires activesupport (= 3.2.8), actionpack (= 3.2.8), activerecord (= 3.2.8), activeresource (= 3.2.8), actionmailer (= 3.2.8), railties (= 3.2.8), bundler (~> 1.0) 
```

不要放弃并继续使用列表中的下一个代理。祝你好运。

# c++ - const 数组类成员初始化

> ID：13645551
> 
> 赞同：7
> 
> 时间：2012-11-30T12:43:43.743
> 
> 标签：c++, arrays, initialization

如何初始化常量整数数组类成员？我认为在同样的情况下，经典数组不是最佳选择，我应该使用什么来代替它？

```
class GameInstance{
    enum Signs{
        NUM_SIGNS = 3;
    };
    const int gameRulesTable[NUM_SIGNS][NUM_SIGNS]; //  how to init it?
public:
    explicit GameInstance():gameRulesTable(){};
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T13:15:50.337

在 C++11 中，您可以在初始化列表中初始化 const 数组成员

```
class Widget {
public:
  Widget(): data {1, 2, 3, 4, 5} {}
private:
  const int data[5];
}; 
```

或者

```
class Widget {
    public:
      Widget(): data ({1, 2, 3, 4, 5}) {}
    private:
      const int data[5];
    }; 
```

有用的链接：[http ://www.informit.com/articles/article.aspx?p=1852519](http://www.informit.com/articles/article.aspx?p=1852519)

[http://allanmcrae.com/2012/06/c11-part-5-initialization/](http://allanmcrae.com/2012/06/c11-part-5-initialization/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-30T12:55:59.013

让它静态？

```
class GameInstance{
    enum Signs{
        NUM_SIGNS = 3};
    static const int gameRulesTable[2][2];
public:
    explicit GameInstance(){};
};

...in your cpp file you would add:
const int GameInstance::gameRulesTable[2][2] = {{1,2},{3,4}}; 
```

# bash - 按字符最后一次出现后的数字对文件名进行排序

> ID：13645552
> 
> 赞同：1
> 
> 时间：2012-11-30T12:43:44.647
> 
> 标签：bash, shell

我想按最后一次出现后的数字对文件名进行排序`s`，怎么做？

例如：

```
01002M00T1relaxouspios1001a001.nii
01002M00T1relaxos301a001.nii
01002M00T1relaxos201a001.nii
01002M00T1relaxouspios901a001.nii 
```

排序后的文件名应该是：

```
01002M00T1relaxos201a001.nii
01002M00T1relaxos301a001.nii
01002M00T1relaxouspios901a001.nii
01002M00T1relaxouspios1001a001.nii 
```

我试着用

```
$sort -ts -nk2,4 
```

但它只适用于前 2 个文件名。

示例 2：

```
01002M00T1relaxos201a001.nii 
01002M00T1relaxouspios1001a001.nii 
01002M00T130relaxos301a001.nii 
01002M00T130relaxouspios901a001.ni 
```

预期输出：

```
01002M00T1relaxos201a001.nii 
01002M00T130relaxos301a001.nii 
01002M00T130relaxouspios901a001.ni
01002M00T1relaxouspios1001a001.nii 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:47:25.943

很简单，使用以下`-V`选项进行版本排序：

```
$ sort -V file

01002M00T1relaxos201a001.nii
01002M00T1relaxos301a001.nii
01002M00T1relaxouspios901a001.nii
01002M00T1relaxouspios1001a001.nii 
```

*在发布第二个示例后进行编辑。*

**一般情况：**

```
$ ls | awk -Fs '{print $NF, $0}' | sort -n | awk '{print $2}'

01002M00T1relaxos201a001.nii
01002M00T130relaxos301a001.nii
01002M00T130relaxouspios901a001.ni
01002M00T1relaxouspios1001a001.nii 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T14:52:36.363

您可以使用像 Perl 或 Python 这样的编程语言，它们可以让您更有能力指定要排序的内容，但是如果您坚持使用 BASH，则必须使用一个小技巧：

您可以使用创建排序键`sed`，根据您创建的排序键进行排序，然后使用 `sed 删除该键：

```
ls | sed 's/\(.*s\)\(.*\)/\1\2 ^ \2) 
```

以上使用正则表达式的贪婪力量来得到你想要的。`\(.*s\)`会将所有内容与最终的小写字母匹配`s`。将`\(.*\)`匹配一切`s`。`\1`和匹配组中捕获的`\2`各个部分`\(...\)`。因此，我有两个字符串；第一个是文件名，第二个是排序字符串。输出将如下所示：

```
$ ls | sed 's/\(.*s\)\(.*\)/\1\2 ^ \2/'
01002M00T1relaxouspios1001a001.nii ^ 1001a001.nii
01002M00T1relaxos301a001.nii ^ 301a001.nii
01002M00T1relaxos201a001.nii ^ 201a001.nii
01002M00T1relaxouspios901a001.nii ^ 901a001.nii 
```

现在，我可以对后面的部分进行排序`^`：

```
$ ls | sed 's/\(.*s\)\(.*\)/\1\2 ^ \2/' | sort -t^ -k2.2
01002M00T1relaxouspios1001a001.nii ^ 1001a001.nii
01002M00T1relaxos201a001.nii ^ 201a001.nii
01002M00T1relaxos301a001.nii ^ 301a001.nii
01002M00T1relaxouspios901a001.nii ^ 901a001.nii 
```

现在，我所要做的就是删除该排序键：

```
$ ls | sed 's/\(.*s\)\(.*\)/\1\2 ^ \2/' | sort -t^ -k2.2| sed 's/ ^ .*//'
01002M00T1relaxouspios1001a001.nii
01002M00T1relaxos201a001.nii
01002M00T1relaxos301a001.nii
01002M00T1relaxouspios901a001.nii 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T15:32:48.630

如果数字**是**唯一的并且足以成为索引，则有一个优雅的**bash only解决方案。**这个想法是使用但不是：**`bash array``associative`**

 **```
unset sortedlist
declare -a sortedlist
while read filename;do
    [[ $filename =~ s([0-9]+)[a-rt-z][^s]*$ ]] &&
       sortedlist[${BASH_REMATCH[1]}]=$filename
  done < <(ls)
printf "%s\n" "${sortedlist[@]}"
01002M00T1relaxos201a001.nii
01002M00T1relaxos301a001.nii
01002M00T1relaxouspios901a001.nii
01002M00T1relaxouspios1001a001.nii 
```

注意：在*数组*中，字段按数字顺序排序，因此`1001`大于`901`。

注意2：作为`[[ ... =~ ... ]]`一个条件，与*正则表达式*不匹配的文件名将被忽略。**

# iphone - iTunes 应用程序链接无法在模拟器和 iDevices 的 safari 中打开页面

> ID：13645554
> 
> 赞同：20
> 
> 时间：2012-11-30T12:43:52.540
> 
> 标签：iphone, ios, safari, itunes-store, openurl

我希望这可能是重复的问题。**但是没有一个答案对我没有帮助。**我正在尝试从我的 iOS 应用程序打开一个链接。当我按下按钮时，**它会打开 safari 应用程序，并且总是显示警告“Safari 无法打开页面，因为地址无效”。**这是一个看起来像相同的链接[https://itunes.apple.com/gb/app/app_name/id(appId)](https://itunes.apple.com/gb/app/app_name/id(appId))。

我不认为这是发布确切应用程序链接的好地方。所以上面的链接是虚拟链接，和我的一模一样。**为什么我尝试打开链接时总是出现错误**。我在模拟器和 iPod 中尝试过。发生同样的错误。**如果我在 MAC OS 中尝试与 Safari 相同的链接，那么它可以工作。** 这是我用来通过链接从我的应用程序中打开 safari 的代码。

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"https://itunes.apple.com/gb/app/app_name/id(appId)"]]; 
```

我来自印度。上面的链接包含**gb**。那个链接只能从**英国**打开吗？？

**更新：**

我有良好的工作网络。我又尝试了一件事。**我在模拟器中打开了我的 Safari 应用程序并在谷歌中搜索我的应用程序并单击该链接显示相同的错误。这是苹果端本身的链接有问题吗？**

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-01T11:44:20.790

Kjuly 的回答是 90% 正确（并且 +1 给 Kjuly！）。

如果您查看[Appirater 代码](https://github.com/arashpayan/appirater)， [并且在具有打开应用商店的功能的 .m 文件](https://github.com/arashpayan/appirater/blob/master/Appirater.m)中（它是“rateApp：”方法），我会看到以下代码：

```
+ (void)rateApp {
#if TARGET_IPHONE_SIMULATOR
    NSLog(@"APPIRATER NOTE: iTunes App Store is not supported on the iOS simulator. Unable to open App Store page.");
#else 
```

因此，无论您尝试什么，都无法在模拟器中打开 App Store 应用程序。App Store 应用程序在模拟器中不存在，因此当您的 Web 视图尝试重定向到它时，您会收到“未找到”错误。这在安装了 App Store 应用程序的实际设备上应该可以正常工作。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-30T12:53:32.620

试试这个网址：

```
http://itunes.apple.com/app/<appId> 
```

**注意**：替换`<appId>`为您想要的应用程序 ID，例如`id543028543`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:55:05.420

这是一种可能性，因为您正在指定应用程序所属的区域或托管在应用程序商店下的区域。尝试加载不带“gb”区域的 url。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-02T12:58:24.573

我遇到了同样的问题。电子邮件中的链接未打开，指向 App Store 的链接不起作用，App Store 未搜索或加载应用程序。我打电话给 Appke 支持。重置成功！转到设置，找到一般下的重置方式。它也不会删除任何东西。

# java - 使用 JRadioButtons 切换类似界面

> ID：13645555
> 
> 赞同：3
> 
> 时间：2012-11-30T12:43:52.930
> 
> 标签：java, swing, jradiobutton

谁能告诉我如何制作如下所示的界面。现在我正在使用两个 JRadioButton 来实现该任务。我完成的代码如下所示

```
JRadioButton but1 = new JRadioButton("Option 1");
JRadioButton but2 = new JRadioButton("Option 2");

ButtonGroup db=new ButtonGroup();
db.add(but1);
db.add(but2); 
```

但是我们如何才能使图片中显示的界面与我通过 JRadioButtons 完成的任务相同。

![在此处输入图像描述](../Images/fac542f07b3b704eae4c29b55d71bff8.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T12:49:23.923

*   需要自定义`Icons`和两个`JToggleButton`链接`ItemListener`

*   使用两个范围创建`JSlider`（需要自定义绘画）

*   [@oliholz 的好主意](https://stackoverflow.com/a/7308818/714968)

# iphone - 如何识别消息已在 ios 中使用 Graph API 成功发布？

> ID：13645569
> 
> 赞同：0
> 
> 时间：2012-11-30T12:45:27.700
> 
> 标签：iphone, objective-c, ios, facebook-graph-api, ios5

我*`Facebook Graph API`*用于 Facebook 墙上的帖子提要。

我为此使用了以下代码

```
 [[delegate facebook] dialog:@"feed"
                  andParams:dictionary
                andDelegate:self]; 
```

现在，当我们点击发布按钮时，打开*`Facebook Dialog`*共享和取消按钮。

现在，我点击*`cancel`*或*`share`*按钮，它将遵循*`FBDialogDelegate`*.

```
-(void)dialogDidComplete:(FBDialog *)dialog {

NSLog(@"Dialog Did Complete"); 

} 
```

那么，如何识别我的消息是否成功分享？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:59:38.780

实现 dialogCompleteWithUrl 回调，解析返回的 URL。如果您将 post_id 作为查询参数之一，则它已成功发布。

另请参阅：[使用 ios sdk 的提要对话框。](https://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/)

# java - 如何模拟私有 dao 变量？

> ID：13645571
> 
> 赞同：9
> 
> 时间：2012-11-30T12:45:47.653
> 
> 标签：java, junit, mockito, powermock

`dao.create()`在测试方法时，我想模拟一个调用。但是我遗漏了一些东西，因为我仍在获得 NPE。这里有什么问题？

```
class MyService {
    @Inject
    private Dao dao;

    public void myMethod() {
        //..
        dao.create(object);
        //
    }
} 
```

如何模拟 dao.create() 调用？

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(DAO.class)
public void MyServiceTest {

    @Test
    public void testMyMethod() {
        PowerMockito.mock(DAO.class);

        MyService service = new MyService();
        service.myMethod(); //NPE for dao.create()
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T18:23:02.403

您没有注入 DAO。使用 mockito，您可以将测试类更改为使用 @InjectMocks 并使用 mockito runner。

```
@RunWith(MockitoJUnitRunner.class)
public void MyServiceTest {
    @Mock
    private Dao dao;
    @InjectMocks
    private MyService myService;
    ...
} 
```

[您可以在Inject Mocks API](http://docs.mockito.googlecode.com/hg/latest/org/mockito/InjectMocks.html)中阅读有关 InjectMocks 的更多信息

更简单的方法是通过构造函数将注入更改为注入。例如，您可以将 MyService 更改为

```
class MyService {
    ...
    private final Dao dao;

    @Inject
    public MyService(Dao dao) {
        this.dao = dao;
    } 
    ...
} 
```

然后你的测试你可以简单地通过设置中的模拟 DAO。

```
...
@Mock
private Dao dao;

@Before
public void setUp() {
    this.dao = mock(Dao.class);
    this.service = new MyService(dao);
}
... 
```

现在您可以使用`verify`来检查是否`create`被调用，例如：

```
...
   verify(dao).create(argThat(isExpectedObjectBeingCreated(object)));
}

private Matcher<?> isExpectedObjectBeingCreated(Object object) { ... } 
```

通过构造函数使用注入将使您的依赖关系对其他开发人员更清楚，并且在创建测试时会有所帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:49:45.387

您仍然需要使用您的模拟设置 dao 字段。您可以对此使用反射。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T12:50:49.380

您需要在服务类中注入/设置模拟对象 DAO。

如果是基于spring的项目，可以看看@Spring Junit Testrunner

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T12:51:31.407

如果你使用`new MyService()`Dao是永远不会注入的。要注入 Dao，您需要通过`ApplicationContext`(Spring) 或`Injector`(Guice) 加载 MyService。就像你在正常的应用程序中一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T17:57:46.113

正如其他人已经说过的那样，您需要以某种方式`dao`在您的班级中设置该字段。`MyService`我不确定允许您的测试中的复合运行程序同时使用 Powermock 和 DI 框架运行程序的机制（假设需要 Powermock），但只要您已经在使用 PowerMock（原因在给定示例中不清楚） ，您可以利用[Whitebox](http://powermock.googlecode.com/svn/docs/powermock-1.3.7/apidocs/org/powermock/reflect/Whitebox.html)类更手动地设置 dao。

```
public void testMyMethod() {
    Dao dao = mock(Dao.class)
    doNothing().when(dao).create(anyObject())); //assuming no return val for dao.create()

    MyService service = new MyService();
    Whitebox.setInternalState(service, "dao", dao);

    service.myMethod(); 
} 
```

# qt - 我必须学习 X11 编程来创建锁定屏幕的程序吗？

> ID：13645572
> 
> 赞同：0
> 
> 时间：2012-11-30T12:45:52.740
> 
> 标签：qt, qt4, gtk, x11

我想创建一个程序，在类似于 xlock 的现代 Linux 发行版上锁定屏幕。我应该学习 x11 还是在之前完成的项目上进行构建。如果有的话。我正在寻找关键字来帮助我进行研究。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:07:45.563

您应该下载并查看 GNOME 和 KDE 的屏幕锁定应用程序的源代码。如果他们直接使用 Xlib，那么很可能无法避免。

您可以使用以下方式下载 KDE 的屏幕锁定应用程序

```
sudo apt-get source kscreenlocker 
```

# php - 使用 PHP 作为 HTML 打印所见即所得的内容

> ID：13645578
> 
> 赞同：3
> 
> 时间：2012-11-30T12:46:30.243
> 
> 标签：php, html, wysiwyg

如何使用 PHP 打印由 WYSIWYG 编辑器创建的 html 代码？当我用“echo”打印它时，它只在网站上显示 html 代码，而不是将其解释为 html 标签。

感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:49:00.960

你需要的是[htmlspecialchars_decode](http://www.php.net/manual/en/function.htmlspecialchars-decode.php)

> htmlspecialchars_decode — 将特殊的 HTML 实体转换回字符

# wpf - Animate fading visibility of app bar icons in WinRT apps

> ID：13645584
> 
> 赞同：3
> 
> 时间：2012-11-30T12:46:49.573
> 
> 标签：wpf, xaml, windows-8, winrt-xaml, appbar

All of the default Windows 8 apps use the same fade animations for their app bar icons when showing and hiding them (based on context changes). [This page](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj662742.aspx) talks about setting the visibility of app bar icons, but makes no mention of animating them.

I'd like my app bar icons to use the same animation. When an icon becomes hidden, it should fade to transparent and then collapse, and the reverse should happen when becoming visible. What is the best way to achieve this animation?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T20:23:27.250

您正在寻找与此类似的东西，您只需根据鼠标按下事件或某个值触发情节提要。只是一个警告，下面提供的这些值是一个粗略的例子，你需要调整它们以获得你想要的。无论如何，您可以根据当前组织代码的方式将故事板作为资源放在许多地方。希望能帮助到你。

```
<!-- IN -->
<Storyboard x:Name="FadeButtonIn">
  <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)"
                                 Storyboard.TargetName="YourButtonObject">
    <EasingDoubleKeyFrame KeyTime="0:0:0.6"
                          Value="0" />
    <EasingDoubleKeyFrame KeyTime="0:0:1.6"
                          Value="1" />
  </DoubleAnimationUsingKeyFrames>
  <ObjectAnimationUsingKeyFrames Storyboard.TargetName="YourButtonObject"
                                 Storyboard.TargetProperty="(UIElement.Visibility)">
    <DiscreteObjectKeyFrame KeyTime="0">
      <DiscreteObjectKeyFrame.Value>
        <Visibility>Visible</Visibility>
      </DiscreteObjectKeyFrame.Value>
    </DiscreteObjectKeyFrame>
  </ObjectAnimationUsingKeyFrames>
</Storyboard>
<!-- OUT -->
<Storyboard x:Name="FadeButtonOut">
  <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)"
                                 Storyboard.TargetName="YourButtonObject">
    <EasingDoubleKeyFrame KeyTime="0:0:0.6"
                          Value="1" />
    <EasingDoubleKeyFrame KeyTime="0:0:1.6"
                          Value="0" />
  </DoubleAnimationUsingKeyFrames>
  <ObjectAnimationUsingKeyFrames Storyboard.TargetName="YourButtonObject"
                                 Storyboard.TargetProperty="(UIElement.Visibility)">
    <DiscreteObjectKeyFrame KeyTime="0">
      <DiscreteObjectKeyFrame.Value>
        <Visibility>Collapsed</Visibility>
      </DiscreteObjectKeyFrame.Value>
    </DiscreteObjectKeyFrame>
  </ObjectAnimationUsingKeyFrames>
</Storyboard> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-15T16:13:31.213

如果您使用的是 MVVM 模式，这里是我编写的一个辅助类：

```
public class FadeAnimatedVisibility
{
    public static readonly DependencyProperty IsVisibleProperty = DependencyProperty.RegisterAttached(
        "IsVisible", typeof(bool), typeof(FadeAnimatedVisibility), new PropertyMetadata(true, IsVisiblePropertyChanged));

    private static void IsVisiblePropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var uiElement = d as UIElement;
        if (uiElement == null) return;

        var visibility = e.NewValue as bool?;

        if (visibility == true)
        {
            Storyboard storyboard = new Storyboard();
            var fadeIn = new FadeInThemeAnimation();

            Storyboard.SetTarget(fadeIn, uiElement);

            storyboard.Children.Add(fadeIn);
            storyboard.Begin();
            uiElement.Visibility = Visibility.Visible;
        }
        else
        {
            Storyboard storyboard = new Storyboard();
            var fadeOut = new FadeOutThemeAnimation();

            Storyboard.SetTarget(fadeOut, uiElement);

            storyboard.Children.Add(fadeOut);
            storyboard.Begin();
            uiElement.Visibility = Visibility.Collapsed;
        }
    }

    public static void SetIsVisible(DependencyObject element, bool value)
    {
        element.SetValue(IsVisibleProperty, value);
    }

    public static bool GetIsVisible(DependencyObject element)
    {
        return (bool)element.GetValue(IsVisibleProperty);
    }
} 
```

和 XAML 使用：

```
<StackPanel helpers:FadeAnimatedVisibility.IsVisible="{Binding YourProperty}"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:58:17.527

您可以修改情节提要为按钮的 opacity 属性添加动画，然后将可见性设置为折叠。您可以使用 Blend 来简化它。

# c# - Overriding Stop in a Windows Service

> ID：13645587
> 
> 赞同：1
> 
> 时间：2012-11-30T12:46:54.283
> 
> 标签：c#, .net

I have this windows service class here written in C#. It has a member function called Stop but apparently its base class ServiceBase also has a Stop function.

`ServiceBase.Stop()` calls `OnStop` which is overriden in the service again which calls `this.Stop()` in its own object again.

Now VS gives the warning: `Server.Stop()` hides inherited member `System.ServiceProcess.ServiceBase.Stop()`. Use the new keyword if hiding was intended

Can I just use new without changing the behaviour of the service?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:10:45.547

如果您不打算覆盖基本`Stop()`方法，为什么不直接重命名它以避免任何歧义？

如果您想在`Stop()`调用服务控制器之前或之后执行某些操作，请覆盖它 - 然后`base.Stop()`根据需要在您自己的代码之前或之后调用。

# c++ - 静态多态性和方法名称 c++

> ID：13645593
> 
> 赞同：2
> 
> 时间：2012-11-30T12:47:35.030
> 
> 标签：c++, static-polymorphism

当我使用静态多态性 (CRTP) 时，是否有一种很好的方法可以为多态方法命名？

```
template <class Derived> 
struct Base
{
    void interface()
    {
        // ...
        static_cast<Derived*>(this)->implementation();
        // ...
    }

    static void static_func()
    {
        // ...
        Derived::static_sub_func();
        // ...
    }
};

struct Derived : Base<Derived>
{
    void implementation();
    static void static_sub_func();
}; 
```

因为，据我所知，接口和实现不能有相同的名称（如果它们是虚拟的，它们就会有相同的名称）。如果类层次结构很深，那就有点尴尬了。

也许有一些很好的方法来处理它？或者也许我错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:18:00.703

我的方法是避免继承（不管 CRTP 感觉多么可爱），而是使用聚合。类模板提供接口，并反过来提供具有实现的委托类。它看起来像这样：

```
template <class Delegate>
struct Interface
{
    void do_something()
    {
        // ...
        delegate.do_something();
        // ...
    }

    Delegate delegate;
}; 
```

这样做的缺点是向委托对象提供构造函数参数更加尴尬，但这并不太难管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T01:00:39.013

当父类没有任何特殊功能时（如在典型的抽象接口中），我看不出您不能在子类中重用函数名称的原因。它会隐藏父方法，但这并不重要，因为您静态地告诉编译器您希望使用哪个版本。

但是，在您的情况下，您*似乎*希望父级在调用虚拟方法之前和之后做一些工作（闻起来像模板方法模式）。在这种情况下，无论您是使用运行时（虚拟）还是编译时（CRTP）多态，您都需要通过备用名称调用您的接口和实现方法。

如果`foo`是基础中的接口/模板方法，那么无论运行时`do_foo`或`foo_impl`编译时多态如何，实现函数的名称似乎都是完全合理的。

# ubuntu - ubuntu快速换包安装文件夹

> ID：13645597
> 
> 赞同：0
> 
> 时间：2012-11-30T12:47:47.043
> 
> 标签：ubuntu, package, canonical-quickly

我使用“快速包”来创建 deb 包。我不知道如何使用此资源将我的应用程序的安装位置从 /usr 更改为 /opt。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:11:43.083

解决方案是：

```
$quickly package --extra 
```

# c# - 时间：2019-04-10 标签：c#java eid reader peripheral not detected

> ID：13645599
> 
> 赞同：1
> 
> 时间：2012-11-30T12:48:12.533
> 
> 标签：c#, java, peripherals

我正在尝试运行用 C# 编写的使用 Java 类的测试。在 Java 类中，我尝试检测插入计算机的 EID 卡。Java 代码已经过测试并且运行良好，但是一旦我尝试从 C# 执行它，似乎没有检测到 EID 卡......

有谁知道这可能是什么原因？可能是安全问题？但我想在这种情况下我应该收到一个明确的安全异常......

我使用 IKVM 生成包含 Java 类的 dll 文件……知道吗？

# android - 对话框没有显示

> ID：13645605
> 
> 赞同：0
> 
> 时间：2012-11-30T12:48:27.473
> 
> 标签：android

当用户覆盖备份数据库时，我试图弹出一个对话框，所以我编写了这段代码，但它没有用：

```
$if(backupDB.exists()){
    AlertDialog.Builder builder = new AlertDialog.Builder(getBaseContext());
    builder.setTitle("Backup database...");
    builder.setMessage("You have already backup the database, do you want to overwrite?");

    builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) {
           Intent i=new Intent(getBaseContext(),FinancialSecretary.class);
           finish();
           startActivity(i);
        }
    });
    AlertDialog dialog = builder.create();
} 
```

什么是错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:50:31.467

只需在您的代码后添加：

```
dialog.show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T12:54:17.903

用于此代码只需尝试一下：

```
AlertDialog.Builder builder = new AlertDialog.Builder(ActivityName.this); 
```

你需要什么方法实现和最后一个设置来显示对话框，

```
builder.show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:55:48.673

是的，你忘了把 show :) 。

这是我喜欢使用的代码，只需填写您需要的内容，然后添加标题和您需要的其他内容：

new AlertDialog.Builder(this).setView(pozadina).setPositiveButton("Ok", new OnClickListener () {

```
 public void onClick(DialogInterface dialog, int which) {

        }

    }).setNegativeButton("Cancel", new OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {

        }
    }).show(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T13:09:02.173

有两个问题：

1) 创建对话框时，不能使用baseContext()，应该使用activity：

```
AlertDialog.Builder builder = new AlertDialog.Builder(CurrentActivity.this); 
```

2) 你忘了调用 dialog.show()。

# xcode - NSMutableData setLength:NSUInteger 使应用程序崩溃

> ID：13645609
> 
> 赞同：0
> 
> 时间：2012-11-30T12:48:33.627
> 
> 标签：xcode, cocoa, nsurlconnection, nsmutabledata

尝试使用 URL 创建请求的连接。NSMutableData 实例 (responseData) 也会被调用。当连接开始接收响应时，在 NSMutableData 实例上调用 setLength:NSUInteger 方法。

```
-(void)startDataDownloading
{
    NSURLRequest *_request = [NSURLRequest requestWithURL:self.url];
    if (_request) {
        if (!connecton) {
            connecton = [NSURLConnection connectionWithRequest:_request delegate:self];
            if (connecton) {
                responseData = [NSMutableData data];
                [connecton start];
            }
        }
    }
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [responseData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [responseData appendData:data];
} 
```

但不知何故，它会导致崩溃，并在 setLength 调用上发出警告。该错误指出

**" -[__NSCFDictionary setLength:]: 无法识别的选择器发送到实例 0x6a8cf70 2012-11-30 18:00:38.948 RSSReader[8997:f803] ***由于未捕获的异常 'NSInvalidArgumentException' 而终止应用程序，原因：'-[__NSCFDictionary setLength:] : 无法识别的选择器发送到实例 0x6a8cf70'"**

对此的任何提示将不胜感激。

```
#import <Foundation/Foundation.h>
#import "DataParser.h"

@protocol DataConnectionDelegate <NSObject>
//protocol methods
@end
@interface UCDataConnection : NSObject <ModelParser>
@property (nonatomic, strong) NSURL *url;
@property (nonatomic, strong) NSURLConnection *connecton;
@property (strong, nonatomic) NSMutableData *responseData;
@property (nonatomic, assign) id<DataConnectionDelegate> delegate;
-(void)startDataDownloading;
- (id)initWithUrl:(NSURL *)_url andDelegate:(id<DataConnectionDelegate>)_delegate; 
```

这是头文件的一部分。抱歉，回复晚了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:02:36.533

很可能您没有正确保留 responseData，因此它被释放了，在上面的示例中，您碰巧最终在同一个地方分配了一个 NSDictionary。

如果您使用的是 ARC，那么您发布的代码就可以了（除了“responseData”应该有一个下划线前缀，假设它是一个实例变量）。

如果您使用的是retain-release，那么您需要在分配responseData 时添加一个retain 调用。

更新：根据您的头文件，您似乎直接引用了实例变量，并使用了retain-release。您最好的选择是仅通过属性机制引用 responseData - 即在其所有使用前加上`self.`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:37:21.453

我不知道这是否是答案，但我在这里看到的可疑之处是你有一个财产

```
@property (strong, nonatomic) NSMutableData *responseData; 
```

默认情况下，它应该使用**self 访问。**响应数据；

如果您打算访问私有 ivar，则默认情况下应使用 _responseData。

除非你在我也想看到的 .m 文件中说不同，所以要确定发生了什么（以防这个答案没有帮助）。

# macos - 在打开文件之前运行 bash 脚本

> ID：13645610
> 
> 赞同：1
> 
> 时间：2012-11-30T12:48:43.993
> 
> 标签：macos, bash

每当我`.indd`在 OS X 中双击一个文件时，我都想运行一个 bash 脚本。具体来说，当用户双击该文件时，它会在终端中运行这个脚本：

```
open -a 'InDesign 5.5' myfile.indd 
```

当然，`myfile.indd`将是文件名。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:51:25.483

您只是想在`indd`双击它们时让所有文件都被 InDesign 打开吗？您可以通过选择文件将给定类型的文件与特定应用程序关联，从“文件”菜单中选择“获取信息”，然后展开“打开方式”窗格。从那里，从应用程序列表中选择 InDesign，单击“全部更改...”按钮，然后单击确定。

# vba - 使用 VBA 代码/宏更改 word 文档中的页脚

> ID：13645611
> 
> 赞同：4
> 
> 时间：2012-11-30T12:48:43.447
> 
> 标签：vba, footer, word-2010

如何使用 VBA 更改 word 文档中的页脚信息？

加载文档后，VBA 代码将从数据库中获取必要的信息，我想将该信息附加到页脚。

我从数据库中获取信息，但将其附加到页脚是另一回事。

任何简单的相关示例都值得赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T14:26:16.480

这将在每个页面上创建页眉和页脚。

```
With ActiveDocument.Sections(1)
    .Headers(wdHeaderFooterPrimary).Range.Text = "Header goes here"
    .Footers(wdHeaderFooterPrimary).Range.Text = "Footer goes here"
End With 
```

您可以在此处找到有关如何在 vba 中使用页眉和页脚的更多信息：http: [//msdn.microsoft.com/en-us/library/office/aa221968%28v=office.11 ​​%29.aspx](http://msdn.microsoft.com/en-us/library/office/aa221968%28v=office.11%29.aspx)

# android - 发布包含下划线 (_) 的 url

> ID：13645616
> 
> 赞同：5
> 
> 时间：2012-11-30T12:49:06.590
> 
> 标签：android

我发布了一个带有下划线 (_) 的参数的 url。

样本：`http://sdsdsds_asasasahjhd.com/dsdsdsd/login.json?`

我是这样发布的：

```
 HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://sdsdsds_asasasahjhd.com/dsdsdsd/login.json?");
    try {
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("key1", "value1"));
        nameValuePairs.add(new BasicNameValuePair("key2", "value2"));
        nameValuePairs
                .add(new BasicNameValuePair("key3", "value3"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

当我检查`httpclient.execute(httppost)`时，我正在获取`IllegalArgumentException`并捕获异常详细信息`Host name cannot be null`。请指定任何解决方案。

我在这里解决了一些其他问题：

*   [java.lang.IllegalStateException：目标主机不能为空，或在参数中设置](https://stackoverflow.com/questions/13007329/java-lang-illegalstateexception-target-host-must-not-be-null-or-set-in-paramet)
*   [在 HttpResponse 中执行 android 时主机名可能不为空](https://stackoverflow.com/questions/12537522/host-name-may-not-be-null-in-httpresponse-execute-for-android)

但没有用，因为我没有对整个 url 进行编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:00:30.290

我有一个具有网络实现机制的开源库。它刚刚接收了一个解决方法实现。在遇到麻烦时，您只需通过反射设置主机：

```
 final URI uriObj = new URI("https", host, path, null, null);
        if (uriObj.getHost() == null) {
            final Field hostField = URI.class.getDeclaredField("host");
            hostField.setAccessible(true);
            hostField.set(uriObj, host);
        }
        return uriObj; 
```

提交在[这里](https://bitbucket.org/dzigoro/lid-commons/commits/22275d33e3d26b12f0a1d0563f058632d4baa938)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T13:58:34.270

请参阅此链接。Apache 不支持下划线。你应该改变网址

[https://issues.apache.org/jira/browse/HTTPCLIENT-911](https://issues.apache.org/jira/browse/HTTPCLIENT-911)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:51:24.823

好吧，它清楚地表明主机名不能为空..您的网址没有指定一个..

网址应采用以下格式

```
http://hostName.com/example..../example.json 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T12:53:14.180

`HttpPost httppost = new HttpPost(String);`

此构造函数将尝试从提供的字符串形成[URL实例。](http://developer.android.com/reference/java/net/URL.html)如果失败，您将处理一个`null`值。

如果您希望我们能够进一步帮助您，请发布您正在使用的实际 URL，而不是示例。

# arduino - Arduino 温度和 LED

> ID：13645620
> 
> 赞同：1
> 
> 时间：2012-11-30T12:49:26.760
> 
> 标签：arduino, led, temperature

我有 arduino uno r3、温度传感器 lm335z 和 2 个 LED。我在互联网上找到了这段代码

```
float celsius = 0, kelvin=0;

void setup()
{
  Serial.begin(9600); 
}

void loop()
{
  kelvin = analogRead(0) * 0.004882812 * 100;
  celsius = kelvin - 273.15; 
  Serial.print("Celsius: ");
  Serial.println(celsius);                  
  //Serial.print("Kelvin: ");
  //Serial.println(kelvin);
  Serial.println();
  delay(10000); 
} 
```

并且适用于此架构

[仅温度](http://www.giusybb.it/varie/sensoretemp.png)

我用这段代码添加了两个led：

```
float celsius = 0, kelvin=0;
int led_green = 13;
int led_red = 12;

void setup()
{
  Serial.begin(9600);
  pinMode(led_green, OUTPUT);
  pinMode(led_red, OUTPUT); 
}

void loop()
{
  kelvin = analogRead(0) * 0.004882812 * 100;
  celsius = kelvin - 273.15; 
  Serial.print("Celsius: ");
  Serial.println(celsius);                  
  //Serial.print("Kelvin: ");
  //Serial.println(kelvin);
  Serial.println();
  if (celsius <= 25.00)
  {
    digitalWrite(led_green, HIGH); 
    digitalWrite(led_red, LOW); 
  }
  else
  {
    digitalWrite(led_green, LOW); 
    digitalWrite(led_red, HIGH); 
  }
  delay(10000); 
} 
```

这个架构：

[led和温度](http://www.giusybb.it/varie/ledtemp.png)

温度比正常温度高 1,2 或 3 度，我想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T14:50:53.627

因为

```
kelvin = analogRead(0) * 0.004882812 * 100; 
```

因此，ADC 的每一步都将暗示 ~0.5 度的温差。由于您没有在草图中指定任何内容，因此电压参考是电源电压。仅用一个 LED 加载 Arduino 的输出（如您所做的那样）可能会影响 50-100 mV 数量级的电源电压。这反过来会影响您的温度读数几度。

[你可以在我的博客](http://blog.blinkenlight.net/experiments/measurements/supply-voltage-measurement/)中找到对此效果的详细分析

所以这个问题可以通过在电路中添加 LED 来解释。

# c# - C# Dictionary Clear() 清除字典中的字典

> ID：13645622
> 
> 赞同：-1
> 
> 时间：2012-11-30T12:49:28.213
> 
> 标签：c#, dictionary

所以我得到了像这样的 C# foreach 循环

```
foreach(Type s in source)
{    
    dic1.Clear();
    dic1.Add(Key1, s.Attr1);
    dic1.Add(Key2, s.Attr2);
    ...
    dic1.Add(KeyN, s.AttrN);
    dic2.Add(ind, dic1);
    ind++;
} 
```

它获取值并正确设置它们，这没有问题。但是，当`dic1.Clear()`调用它时，它会清除`dic1`其中添加`dic2` 的内容，并使用正在处理的新数据重写它的内容，从而导致 N 数量的字典与上次处理的数据/对象中的相同数据。`dic1.Clear()`真的会影响添加到 中的那个吗`dic2`？如果确实如此，我应该复制`dic1`并将`dicTemp`其添加到`dic2`吗？

谢谢你的提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:51:40.410

我想我现在明白你的问题了。

当您将引用对象添加到集合时，您存储的是对该对象的引用，而不是值。

您应该做的是使`dic1`循环体本地化。

```
foreach(Type s in source)
{    
    var dic1 = new Dictionary<T1, T2>();
    dic1.Add(Key1, s.Attr1);
    dic1.Add(Key2, s.Attr2);
    ...
    dic1.Add(KeyN, s.AttrN);
    dic2.Add(ind, dic1);
    ind++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:52:11.973

由于您只在一个实例上进行操作，`dic1`这将导致：

*   `dic2`引用同一个字典实例的所有值
*   该实例在每次迭代开始时被清除。

您可能希望将行更改`dic1.Clear()`为`dic1 = new Dictionary<X, Y>()`.

# jquery - 如何在窗口中加载图像，仍然保留以前的页面背景

> ID：13645629
> 
> 赞同：2
> 
> 时间：2012-11-30T12:50:06.280
> 
> 标签：jquery, web, modal-dialog

如果有人注意到当您在 Facebook 中打开图片时会发生以下情况：-

假设您在 Facebook 的主页上：- [https://www.facebook.com/](https://www.facebook.com/)

现在，如果您打开图像，它将以新模式（如窗口）打开，并且 URL 更改为：- [https://www.facebook.com/photo.php?fbid=10151125374887397&set=a.338008237396.161268.36922302396&type=1&theater](https://www.facebook.com/photo.php?fbid=10151125374887397&set=a.338008237396.161268.36922302396&type=1&theater)

现在据我所知，如果他们使用模态叠加来显示图像，那么 URL 将保持不变，如果已加载新页面，则不应有显示前一页的背景。这是什么显示图像的方法。是否有为此的任何 jquery 或 java 脚本插件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:53:40.763

实际上，Facebook 所做的是利用 HTML5 History API。您可以在此处阅读更多信息：http: [//diveintohtml5.info/history.html](http://diveintohtml5.info/history.html)

因此，他们正在做的是在您查看图像时加载一个模式，然后他们使用 HTML5 History API将地址栏中的 URL 更改为*物理资源。*这允许他们更改 URL 而无需实际重定向到另一个页面。但是如果您复制并粘贴 url，它会直接链接到资源（*查看图像*页面）

# ruby - Lua _ 变量名的 Ruby 对应项

> ID：13645631
> 
> 赞同：0
> 
> 时间：2012-11-30T12:50:09.193
> 
> 标签：ruby, variables, idioms

在摆弄`redis`gem 时，我发现了允许分组操作`#multi`的`#pipelined`方法，其结果稍后会作为数组返回。

```
getresult, delresult = redis.multi do
  redis.get key
  redis.del key
end 
```

我想存储`getresult`，并省略`delresult`。在 Lua 中，典型的做法是`_`用作删除值的变量名。ruby 中是否有类似的成语？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:51:54.633

完全一样。您`_`用于忽略的变量。

```
getresult, _ = redis.multi do
  redis.get key
  redis.del key
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:09:25.827

您可以使用`_`忽略一个参数或`*`任意数量的参数

```
 def test(_);end
 test(1,2) #=> wrong number of arguments (2 for 1)
 def test(*);end 
 test(1,2,3,4) #=> works fine 
```

同样适用于分配。

# java - Show Google play by android code

> ID：13645636
> 
> 赞同：-1
> 
> 时间：2012-11-30T12:50:47.770
> 
> 标签：java, android

Is there any way to intent google play for particular application in android programmatically

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:53:48.190

试试这个代码：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(Uri.parse("market://details?id=app_package_name"));
startActivity(intent); 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:58:35.370

尝试使用以下代码直接打开play store

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=<package_name>"))); 
```

请记住，只有在目标设备上安装了 Play 商店应用程序时，此解决方案才有效。在未安装的情况下，`android.content.ActivityNotFoundException`将被解雇。所以处理这个异常并打开 http:// url 而不是 market:// 一个。

```
try {
    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=<package_name>")));
} catch (android.content.ActivityNotFoundException anfe) {
    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://play.google.com/store/apps/details?id="<package_name>")));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T12:59:26.070

这段代码应该可以工作（如果您希望用户通过“返回”按钮而不是浏览 Play 商店返回您的应用程序，那么这些标志是一个很好的补充）：

```
Intent marketIntent = new Intent(Intent.ACTION_VIEW,
                   Uri.parse("market://details?id=your.package.name"));
                   marketIntent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
                   startActivity(marketIntent ); 
```

# java - 管理多个版本的 JDK：无效的源代码发布错误

> ID：13645643
> 
> 赞同：3
> 
> 时间：2012-11-30T12:50:59.307
> 
> 标签：java

我安装了 jdk 1.6 和 1.7。

我已将我的 JAVA_HOME 变量更新为

```
C:\Program Files\Java\jdk1.6.0_24;C:\Program Files\Java\jdk1.7.0 
```

但是当我尝试运行java代码时。

```
>javac -version
javac 1.6.0_24

>java -version
java version "1.7.0_09"

>javac -source 1.7.0 -target 1.7.0 Test.java
javac: invalid source release: 1.7.0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T12:56:31.473

您的 jdk 仍然指向 JDK 1.6。javac 与 jdk 捆绑在一起，而 java -version 理想地运行，即使 jre 安装正确。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-23T07:01:41.903

最简单的解决方案是使用 java_home 工具。

```
/usr/libexec/java_home -v 1.7.0_51 --exec javac -version 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T14:13:36.407

您的“javac -version”测试表明您使用的是 javac 1.6。然后您尝试为 1.7 构建，这是 1.6 编译器未知的未来版本。我会按照一些评论的建议去做，并且只为给定的项目定义一个 JDK。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T13:00:00.827

怎么样`javac -source 1.7 -target 1.7 Test.java`？

# xcode - iTunesConnect (OSX) 无法识别 CFBundleLocalizations 中的本地化

> ID：13645645
> 
> 赞同：6
> 
> 时间：2012-11-30T12:51:14.723
> 
> 标签：xcode, macos, localization

我在 Mac App Store 的 OSX 项目中添加了几个本地化，提交了应用程序，但只有英语被识别（本地化：（“英语”），取自 ITC 二进制详细信息）。该产品在 iTunes 上发布，英语也是唯一显示的语言。

本地化字符串使用自定义系统处理，因此我们不需要像 English.lproj 这样的额外文件夹。为了本地化应用程序，我刚刚在项目的 Info.plist 中添加了所有语言标识符，在关键 CFBundleLocalizations 下，正如 Apple 在[https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual建议的那样/BPInternational/Articles/ChoosingLocalizations.html](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPInternational/Articles/ChoosingLocalizations.html)

> 应用程序可以通过其信息属性列表 (Info.plist) 文件通知系统它支持其他本地化。要指定未包含在包的 .lproj 目录中的本地化，请将 CFBundleLocalizations 键添加到此文件。键的值是一个字符串数组，每个字符串都包含一个 ISO 语言指示符，如“语言和区域设置指定”中所述。</p>

plist 文件中指定本地化的部分是：

```
<key>CFBundleLocalizations</key>
<array>
    <string>en</string>
    <string>de</string>
    <string>fr</string>
    <string>it</string>
    <string>es</string>
    <string>pt</string>
    <string>nl</string>
    <string>se</string>
</array> 
```

过去，我在 2 个 iOS 应用程序上使用了完全相同的方法，并且它们都运行良好。我不明白为什么这次我们会得到不同的行为。有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T15:10:07.427

我终于明白了。

在我的问题中，我曾说过：

> 本地化字符串使用自定义系统处理，因此我们不需要像 English.lproj 这样的额外文件夹。

事实证明，这正是我解决这个问题的方法。我转到本地化下的项目>信息选项卡，并为应用程序支持的每种语言添加了一个条目。这为每个文件夹创建了一个文件夹，例如 es.lproj、fr.lproj 等。我提交了应用程序，在 iTunesConnect 中我看到本地化已被识别：

> 本地化：（“de”、“English”、“es”、“fr”、“it”、“nl”、“pt”、“sv”）

更新还没有出来，但我相信它会好的。

我仔细检查了我拥有的一个较旧的 iOS 应用程序，其中包含 3 个被正确识别的本地化。在该应用程序中，我没有使用上述过程创建任何额外的 .lproj 文件夹。我所做的只是在 CFBundleLocalizations 下的 plist 文件中包含本地化标识符。我不知道 iOS 和 OSX 应用程序在这方面是否存在本质上的不同。如果有人对此有任何意见，我很高兴知道为什么我在这里所做的实际上解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T11:05:57.073

我也遇到过，但由于 appirater 拥有所有 lproj 文件夹，我不明白为什么所有语言都没有出现在 iTunes 描述中。

事实证明，即使您在项目导航器中看到所有 lproj 文件夹，它们也不包含在您的包中，除非您在 Project -> Info 中添加您实际支持的语言。

# security - SOAP 网络服务中的移动客户端身份验证/推荐程序

> ID：13645647
> 
> 赞同：1
> 
> 时间：2012-11-30T12:51:21.030
> 
> 标签：security, mobile, soap

我正在开发一个客户端-服务器系统，其中客户端是一个通过 SOAP 消息与后端通信的 iphone 应用程序。现在，客户端在每次请求时都会在 SOAP 正文中发送用户名和密码，这当然不好。

对此的解决方案不必（实际上：不能）太复杂，我只是不想过多地发送用户名和密码。

一个“好的”解决方案是让客户端使用用户名/密码进行一次身份验证，然后接收一个有效期为 1 小时且必须随每个请求一起发送的令牌吗？

这种情况下的“最佳实践”是什么？WS-安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:13:40.943

使用在一段时间内有效的安全令牌是很常见的做法。当然不建议在每个请求中发送凭据。

您可以参考以下链接了解更多详情： [https ://softwareengineering.stackexchange.com/questions/83037/best-practices-for-expiration-of-tokens-in-a-security-token-service-sts](https://softwareengineering.stackexchange.com/questions/83037/best-practices-for-expiration-of-tokens-in-a-security-token-service-sts)

[https://developers.google.com/accounts/docs/MobileApps](https://developers.google.com/accounts/docs/MobileApps)

# c# - 在 C# 中将额外的参数传递给 string.Format() 函数

> ID：13645657
> 
> 赞同：5
> 
> 时间：2012-11-30T12:51:52.030
> 
> 标签：c#

`string.Format`在 C# 中向函数传递和额外参数是否有任何副作用？我正在查看`string.Format`MSDN ( [http://msdn.microsoft.com/en-us/library/b1csw23d.aspx](http://msdn.microsoft.com/en-us/library/b1csw23d.aspx) ) 上的函数文档，但找不到答案。

例如：-

```
string str = string.Format("Hello_{0}", 255, 555); 
```

现在，正如您所看到的，根据格式字符串，我们假设在它之后只传递一个参数，但我已经传递了两个。

**编辑：** 我已经尝试过了，对我来说一切都很好。由于我是 C# 和 C 背景的新手，我只想确保它不会在以后的运行中造成任何问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T12:54:07.970

查看反射器，它会为构建字符串分配更多内存，但传入额外的对象不会产生巨大的影响。

还有一个“副作用”，如果您不小心`{n}`在格式字符串中包含了`n`太大的 a ，然后添加了一些备用参数，您将不再得到异常，而是得到一个包含意外项目的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T13:00:15.740

如果您查看为[string.Format提供的链接的异常部分](http://msdn.microsoft.com/en-us/library/b1csw23d.aspx)

“格式项的索引小于零，或大于或等于 args 数组的长度。”

微软没有表示如果你有太多参数它可以抛出，所以它不会。效果是由于一个无用的参数而造成的少量记忆损失

# python - 将值连接到字符串 - 错误

> ID：13645662
> 
> 赞同：1
> 
> 时间：2012-11-30T12:52:11.757
> 
> 标签：python, string, dictionary

我有 14 个字典，它们都包含相同的信息键，但值不同。我正在尝试构建一个函数，当字典被列为函数中的参数时，它将组合一个句子。

错误是：

```
TypeError: can only concatenate list (not "str") to list 
```

这是代码：

```
def createhouses(x): 
    count = 0
    for i in [f1, f2, f3, f4, f5, f6, f7, f8, f9, f10, f11, f12, f13, f14]:
                    i["sn"] = legendary[count]
                    i["fn"] = [legendaryfn[count]]
                    i["family"] = [hProfession[random.randint(0, len(hProfession)-1)]]
                    i["house"] = [houseGen()]
                    i["fortune"] = [prosperity[random.randint(0, len(prosperity)-1)]]
                    i["tort"] = random.randint(0, 1)
                    count+=1
createhouses(1) 
```

以及引发错误的代码：

```
def houseHistory(x):
        print x['fn']+" "+x['sn'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:54:37.857

在`createHouses`中，您已经为一些字典键放置了列表，例如：-

```
i["fn"] = [legendaryfn[count]]
i["house"] = [houseGen()] 
```

因此，您不能将a`list`与. 既然给了你一个对象。`str``x['fn']+" "+x['sn']``x['fn']``list`

因此，将它们更改为： -

```
i["fn"] = legendaryfn[count]
i["house"] = houseGen() 
```

等等。

# objective-c - 运行时的Objective-C动态属性？

> ID：13645666
> 
> 赞同：12
> 
> 时间：2012-11-30T12:52:23.767
> 
> 标签：objective-c

是否可以创建一个在运行时可以具有任意数量的动态属性的 Objective-C 类？

我希望能够`mySpecialClass.anyProperty`在我的类中调用和拦截它，以便能够提供我自己的自定义实现，然后可以`NSString`在运行时返回一个（例如）并引发异常。显然，这一切都必须编译。

理想的情况是我可以使用类似于新文字语法的东西来引用我的属性，例如`mySpecialClass["anyProperty"]`.

我想在某种程度上我想创建一个没有 CFDictionary 后备存储的动态 NSDictionary 之类的东西，它分别在属性获取和设置上执行 2 个自定义方法，并将属性名称传递给这些访问器方法，以便他们可以决定做什么。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-30T13:56:21.543

至少有两种方法可以做到这一点。

# 下标

使用`objectForKeyedSubscript:`和`setObject:forKeyedSubscript:`

```
 @property (nonatomic,strong) NSMutableDictionary *properties;

 - (id)objectForKeyedSubscript:(id)key {
      return [[self properties] valueForKey:[NSString stringWithFormat:@"%@",key]];
 }

 - (void)setObject:(id)object forKeyedSubscript:(id <NSCopying>)key {
      [[self properties] setValue:object forKey:[NSString stringWithFormat:@"%@",key]];
 }

 Person *p = [Person new];
 p[@"name"] = @"Jon";
 NSLog(@"%@",p[@"name"]); 
```

# 解决实例方法：

这是运行时为所有方法执行的 objc_sendMsg：

![objc_sendMsg](../Images/17d99b991c7374c96ffd272decb4cd4e.png)

如果您查看底部，您有机会看到`resolveInstanceMethod:`，这使您可以将方法调用重定向到您选择的一个。要回答您的问题，您需要编写一个通用的 getter 和 setter 来查找字典 ivar 上的值：

```
// generic getter
static id propertyIMP(id self, SEL _cmd) {
    return [[self properties] valueForKey:NSStringFromSelector(_cmd)];
}

// generic setter
static void setPropertyIMP(id self, SEL _cmd, id aValue) {

    id value = [aValue copy];
    NSMutableString *key = [NSStringFromSelector(_cmd) mutableCopy];

    // delete "set" and ":" and lowercase first letter
    [key deleteCharactersInRange:NSMakeRange(0, 3)];
    [key deleteCharactersInRange:NSMakeRange([key length] - 1, 1)];
    NSString *firstChar = [key substringToIndex:1];
    [key replaceCharactersInRange:NSMakeRange(0, 1) withString:[firstChar lowercaseString]];

    [[self properties] setValue:value forKey:key];
} 
```

然后实现`resolveInstanceMethod:`将请求的方法添加到类中。

```
+ (BOOL)resolveInstanceMethod:(SEL)aSEL {
    if ([NSStringFromSelector(aSEL) hasPrefix:@"set"]) {
        class_addMethod([self class], aSEL, (IMP)setPropertyIMP, "v@:@");
    } else {
        class_addMethod([self class], aSEL,(IMP)propertyIMP, "@@:");
    }
    return YES;
} 
```

您也可以为该方法返回一个 NSMethodSignature ，然后将其包装在 NSInvocation 中并传递给`forwardInvocation:`，但添加该方法更快。

[这是](https://gist.github.com/4175830)在 CodeRunner 中运行的要点。它不处理`myClass["anyProperty"]`呼叫。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T13:09:04.407

你问的是不同的事情。如果您希望能够在`mySpecialClass[@"anyProperty"]`您的类的实例上使用方括号语法，这非常容易。只需实现以下方法：

```
 - (id)objectForKeyedSubscript:(id)key
 {
      return ###something based on the key argument###
 }

 - (void)setObject:(id)object forKeyedSubscript:(id <NSCopying>)key
 {
      ###set something with object based on key####
 } 
```

每次在源代码中使用括号语法时都会调用它。

否则，如果您想在运行时创建属性，有不同的方法可以继续，查看`NSObject`'s`forwardInvocation:`方法，或查看[Objective-C 运行时参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)以获取动态更改类的函数...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T13:14:59.943

纪尧姆是对的。`forwardInvocation:`是要走的路。这个答案提供了更多细节：[objective-c中的method_missing-like功能（即运行时的动态委托）](https://stackoverflow.com/questions/4630797/method-missing-like-functionality-in-objective-c-i-e-dynamic-delegation-at-run)

这有更多细节：[Objective C / iOS 中 Ruby method_missing 的等价物](https://stackoverflow.com/questions/9800293/equivalent-of-ruby-method-missing-in-objective-c-ios)

这些是其他一些鲜为人知的 Obj-C 特性，它们可能会对您有所帮助：[Objective-C 的隐藏特性](https://stackoverflow.com/questions/211616/hidden-features-of-objective-c)

享受！

# jquery - jquery datatables：单击按钮后更新表格单元格

> ID：13645668
> 
> 赞同：8
> 
> 时间：2012-11-30T12:52:23.987
> 
> 标签：jquery, sorting, datatables

我们的页面中有一个表格，最后有几行和一个自定义切换按钮。表格是通过页面中的 html 加载的，而不是通过 json 加载的。

现在，最后的切换按钮发布到服务并设置数据库中该记录的关注状态。

但是，它还应该更新该行中的另一个单元格。但是我确定我不应该通过 jquery 手动执行此操作，而是通过数据表执行此操作？

```
$('#tblFollow').dataTable({
    sDom: "t",
    aoColumns: [
      null,
      null,
      null,
      { bSortable: false }
    ]
});

$('#tblFollow').on('click', 'a.follow', function(e){
    $(this).toggleClass('active');

    // updating column 'following' here... 
    // but this only changes visually, and not the inner datatables data used for sorting
    var followingCell = $(this).parents('td').prev();
    var txt = followingCell.text() == "1" ? "0" : "1";
    followingCell.text(txt);

    return false;
}); 
```

[手动示例：](http://jsfiddle.net/saelfaer/gWpes/2/) 现在我有一个示例，我手动更改字段，但这只是可视的，数据表仍然使用其内部数据进行排序。所以我正在寻找一种更好的方法

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-03T12:00:36.327

这是一个可能的解决方案：

除了您的代码之外，您还应该更新数据表数据，如下所示

```
var rowIndex = table.fnGetPosition( $(this).closest('tr')[0] );
var aData = table.fnGetData( rowIndex  );
aData[2] = txt; //third column 
```

这里是[jsfiddle](http://jsfiddle.net/vedmack/8jGB6/)

**更好的解决方案**是同时`fnUpdate`更新数据和显示

这里是[jsfiddle](http://jsfiddle.net/vedmack/8jGB6/2/)

```
// update column following here... 
var followingCell = $(this).parents('td').prev();
var txt = followingCell.text() == "1" ? "0" : "1";

var rowIndex = table.fnGetPosition( $(this).closest('tr')[0] );
table.fnUpdate( txt, rowIndex , 2); 
```

* * *

也代替我们

```
var followingCell = $(this).parents('td').prev();
var txt = followingCell.text() == "1" ? "0" : "1"; 
```

利用

```
var aData = table.fnGetData( rowIndex  );
aData[2] //use it to check if the value is 0 or 1 
```

# java - 如果启用，则无法修改 h:inputText

> ID：13645670
> 
> 赞同：1
> 
> 时间：2012-11-30T12:52:36.533
> 
> 标签：java, jsf, icefaces

我在这里有一个简单的问题。如果我问这是因为我在这里和谷歌都找不到任何答案。

我正在使用 IceFaces 3.1。

我正在从 java bean 填充输入文本。它仅在具有*disabled="true"*属性时才有效。

这是xhtml代码：

```
<h:inputText value="#{PageCode.quantity}" disabled="false"/> 
```

还有java代码（在某处称为form）：

```
this.setQuantity(1); 
```

它不包含该值。它不是 CSS，因为我已经调试过了，并且有一个 null 值。

但是，如果我将其更改为：

```
 <h:inputText value="#{PageCode.quantity}" disabled="true"/> 
```

有用。但我需要启用它以便编辑它等等......

怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:59:56.757

看来你`setQuantity(1)`打错时间了。

未禁用时，`<h:inputText>`将在更新模型值阶段设置其提交的值。因此，如果您在更新模型值阶段*之前*手动设置了它（例如，在验证器或值更改侦听器内部的验证阶段），那么稍后它会被提交的值覆盖。如果该组件被禁用，则它不会设置其提交的值。这解释了您所看到的症状。

您需要确保在更新模型值阶段*之后*`setQuantity(1)`的调用操作阶段调用。

 *基于最常见的初学者错误，我猜你实际上是在一种`valueChangeListener`方法中完成了这项工作，而你对旧值不感兴趣。你不应该那样做。你应该`<f:ajax listener>`改用。

### 也可以看看：

*   [何时使用 valueChangeListener 或 f:ajax 监听器？](https://stackoverflow.com/questions/11879138/when-to-use-valuechangelistener-or-fajax-listener/11883021#11883021)*

# apache-flex - 将 textarea 的宽度设置为在 Flex 2 中输入的文本

> ID：13645674
> 
> 赞同：1
> 
> 时间：2012-11-30T12:52:46.000
> 
> 标签：apache-flex, flex2

如何将文本区域宽度设置为 Flex 中输入的文本长度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-02T10:20:34.043

这里我们可以根据文本的字体大小动态计算文本区域的宽度，如下所示

```
protected function onChange(event:TextOperationEvent):void
{

if(textBox.width <textBox.text.length*5)
textBox.width = textBox.text.length*5;
}
<s:TextArea id="textBox" height="200" width="200" fontSize="25" change="onChange(event)" /> 
```

# python - Python：在while循环中调用函数会导致递归失控

> ID：13645675
> 
> 赞同：0
> 
> 时间：2012-11-30T12:52:46.317
> 
> 标签：python, while-loop, function-calls

我编写了一个 Python 函数`randomizer()`，该函数将文件中的行随机化，然后将它们写入 std 输出。就其本身而言，它可以毫无问题地工作。现在我希望能够以用户定义的次数迭代这个过程，所以我写：

```
def iterator():
    print("Number of iterations: ")
    total_iterations = raw_input()
    current_iteration = 1
    while current_iteration <= total_iterations:
        randomizer()
        current_iteration = current_iteration + 1 
```

如果我这样做，`randomizer()`只会不断重复，直到我手动终止它。但是，如果 while 循环是

```
while current_iteration <= total_iterations:
    random.shuffle(listname)
    current_iteration = current_iteration + 1 
```

然后`iterator()`在指定的运行次数后停止。如果我`randomizer()`在`iterator()`. 这告诉我从 while 循环内部调用函数存在问题，但我不知道是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:00:05.733

问题是`raw_input()`返回一个字符串，所以比较`while current_iteration <= total_iterations`总是返回 true。

通过强制转换为 int 来修复

```
total_iterations = int(raw_input()) 
```

# asp.net-mvc-3 - 如何在 ASP.NET MVC3 中的服务器调用之间保留 DropDownList 值

> ID：13645676
> 
> 赞同：0
> 
> 时间：2012-11-30T12:52:47.870
> 
> 标签：asp.net-mvc-3, viewstate, html.dropdownlistfor

我有一个**ASP.NET MVC3**应用程序。我有以下内容`ViewModel`：

```
public class MyViewModel
{
    public string Year { get; set; }
    public string Month {get; set; }

    public IEnumerable<SelectListItem> Years
    {
       get
       {
           return Enumerable.Range(2000, DateTime.Now.Year - 2000).Select(x => new SelectListItem
           {
               Value = x.ToString(),
               Text = x.ToString()
           });
       }
    } 
} 
```

以及以下内容`View`：

```
@model MyNamespace.MyViewModel

@Html.DropDownListFor(
        x => x.Year, 
    new SelectList(Model.Years, "Value", "Text"),
    "-- select year --"
)

@Html.DropDownListFor(
        x => x.Month, 
    Enumerable.Empty<SelectListItem>(),
    "-- select month --"
) 
```

我用一个从for触发的函数填充`DropDownList`for ，该函数运行良好。当表单发布到服务器然后返回视图时，我想将值保留在“月份”DropDownList 中，因为它正确地发生在. 因此我尝试了（除了 jQuery 脚本）：`Month``jQuery``onchange``DropDownList``Year``Year`

```
public class MyViewModel
 {
    public string Year { get; set; }
    public string Month {get; set; }

    public IEnumerable<SelectListItem> Months
    {
        get
        {
            if(Year != null)
            {
               return Enumerable.Range(1, 12).Select(x => new SelectListItem
               {
                  Value = x.ToString(),
                  Text = x.ToString()
               });
            }
        }
    } 
```

并且在`View`：

```
 @Html.DropDownListFor(
            x => x.Month, 
       new SelectList(Model.Months, "Value", "Text"),
        "-- select month --"
    ) 
```

我在代码中留下了 Years 以使事情更短。此代码在第一次运行时抛出 a`NullReferenceException`因为`IEnumerable`是空的。我怎样才能实现我的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T13:20:13.360

您必须在操作中重新填充月份列表。POST 是无状态的，不像 asp.net webforms。只需在您的代码中执行以下操作：

```
public ViewResult MyAction(MyViewModel model)
{
   if (ModelState.IsValid)
   {
       //.. do your stuff ...
       //return redirect to index if everything went ok
   }

   //something went wrong return the model
   model.Years = new SelectList(/* code to populate years */, "Value", "Text", Model.Year);
   model.Months = new SelectList(/* code to populate months */, "Value", "Text",  Model.Month);
} 
```

作为旁注，我更喜欢使用`SelectList`而不是`IEnumerable<SelectListItem>`因为我可以在控制器中设置默认值（我认为更适合控制器职责）而不是在视图中。

# c# - 如何修复 .NET dll 引用冲突？

> ID：13645687
> 
> 赞同：0
> 
> 时间：2012-11-30T12:53:35.833
> 
> 标签：c#, .net, c1-cms

我可以在 Webmatrix 上运行 Composite C1 v4.0 Beta1。我试图在 VS2012 上运行它，但我得到一个编译器错误，有人说这些是**System.Web.WebPages.HelperResult的 2 个 dll 文件**

代码是：

```
 @helper NavigationTree(IEnumerable<PageNode> pages, int endRenderLevel) 
```

我有两个版本的 System.Web.WebPages.dll：

*   v4.0_1.0.0.0__31bf3856ad364e35\System.Web.WebPages.dll
*   v4.0_2.0.0.0__31bf3856ad364e35\System.Web.WebPages.dll

Composite v4.0 /Bin 文件夹还包含更新的版本。但是我不知道如何指向正确的dll，项目中没有参考设置，我只是在VS2012中打开文件夹作为网站。

我怎样才能指向正确的dll？我试图添加正确的 dll 引用，但 VS 说已经添加了引用。

![dll冲突.png](../Images/74ced462c8e8985cc7043195a452417e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:17:11.930

程序集重定向（绑定），如此处所述：http: [//msdn.microsoft.com/en-us/library/7wd6ex19](http://msdn.microsoft.com/en-us/library/7wd6ex19%28v=vs.110%29.aspx) (v=vs.110).aspx可能是一个不错的起点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:50:47.043

刚刚从 web.config 中删除了旧的程序集引用

```
 <!-- <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" /> --> 
```

# asp.net - 未填充 GridView 时如何显示消息

> ID：13645689
> 
> 赞同：1
> 
> 时间：2012-11-30T12:53:43.220
> 
> 标签：asp.net

我正在根据上一页查询字符串上传递的内容构建一个 GridView。

如果未填充 GridView，是否有办法显示“未找到记录”的消息？即查询不产生任何记录来填充GridView。

代码：

```
<div class="centergrid">
    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataSourceID="SqlDataSource1" CssClass="bookgridview">
        <Columns>
            <asp:TemplateField HeaderText="Choose">
            <ItemTemplate>
                 <asp:HyperLink ID="lnkSelect" runat='server' NavigateUrl='<%# String.Format("~/bookingform.aspx?ID={0}", Eval("ScheduleId")) %>'>Book</asp:HyperLink>
            </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="TName" HeaderText="Name" SortExpression="TName" />
            <asp:BoundField DataField="SDate" HeaderText="Date" SortExpression="SDate" DataFormatString="{0:d}" />
            <asp:BoundField DataField="STime" HeaderText="Time" SortExpression="STime" />
            <asp:BoundField DataField="TPriceadult" HeaderText="Price (Adult)" 
                SortExpression="TPriceadult" DataFormatString="{0:C}"  /> 
            <asp:BoundField DataField="TPricesenior" HeaderText="Price (Student/Senior)" 
                SortExpression="TPricesenior" DataFormatString="{0:C}"  /> 
            <asp:BoundField DataField="TPricechild" HeaderText="Price (Child)" 
                SortExpression="Tpricechild" DataFormatString="{0:C}"   /> 
            <asp:BoundField DataField="TDuration" HeaderText="Duration"
                SortExpression="TDuration" />
            <asp:BoundField DataField="ScheduleId" HeaderText="ScheduleId" 
                SortExpression="ScheduleId"  Visible="False" />
        </Columns>
    </asp:GridView>

    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ChinatowndbConnString %>" 
        SelectCommand="SELECT * FROM [vwSchedule] Where TourId=@tid">

        <SelectParameters>
            <asp:QueryStringParameter DbType="Int32" Name="tid" QueryStringField="tourid" />
        </SelectParameters>
    </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:55:43.890

> 如果未填充 GridView，是否有办法显示“未找到记录”的消息？

是的，使用[**EmptyDataTemplate**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.emptydatatemplate.aspx)。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
    DataSourceID="SqlDataSource1" CssClass="bookgridview">

    <emptydatarowstyle backcolor="LightBlue"
      forecolor="Red"/>

    <emptydatatemplate>

      <asp:image id="NoDataImage"
        imageurl="~/images/Image.jpg"
        alternatetext="No Image" 
        runat="server"/>

        No records found.  

    </emptydatatemplate> 

    <Columns>
        <asp:TemplateField HeaderText="Choose">
        <ItemTemplate>
             <asp:HyperLink ID="lnkSelect" runat='server' NavigateUrl='<%# String.Format("~/bookingform.aspx?ID={0}", Eval("ScheduleId")) %>'>Book</asp:HyperLink>
        </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="TName" HeaderText="Name" SortExpression="TName" />
        <asp:BoundField DataField="SDate" HeaderText="Date" SortExpression="SDate" DataFormatString="{0:d}" />
        <asp:BoundField DataField="STime" HeaderText="Time" SortExpression="STime" />
        <asp:BoundField DataField="TPriceadult" HeaderText="Price (Adult)" 
            SortExpression="TPriceadult" DataFormatString="{0:C}"  /> 
        <asp:BoundField DataField="TPricesenior" HeaderText="Price (Student/Senior)" 
            SortExpression="TPricesenior" DataFormatString="{0:C}"  /> 
        <asp:BoundField DataField="TPricechild" HeaderText="Price (Child)" 
            SortExpression="Tpricechild" DataFormatString="{0:C}"   /> 
        <asp:BoundField DataField="TDuration" HeaderText="Duration"
            SortExpression="TDuration" />
        <asp:BoundField DataField="ScheduleId" HeaderText="ScheduleId" 
            SortExpression="ScheduleId"  Visible="False" />
    </Columns>
</asp:GridView> 
```

[**或者，您可以通过设置EmptyDataText**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.emptydatatext.aspx)属性而不是此属性来为空数据行使用内置 UI 。

# android - 创建应用程序特定的键盘

> ID：13645693
> 
> 赞同：0
> 
> 时间：2012-11-30T12:53:55.563
> 
> 标签：android, android-input-method

我想创建一个仅在我的应用程序中可用的自定义键盘（它仅用于单`EditText`合一活动），我想知道这样做的最佳方法是什么。以下是我对键盘的规格：

*   它应该始终显示在它使用的活动中（无论是否`EditText`聚焦）。
*   它将有 2 个或更多键布局（类似于具有字母布局和一些数字/符号布局的常规键盘）。
*   某些键可能需要一些特殊操作（而不是简单地将它们的`android:codes`键值添加到`EditText`）。
*   它不提供完成/更正的候选人。
*   它不提供一种以上的输入类型（例如具有 的常规键盘`TYPE_CLASS_NUMBER`，`TYPE_CLASS_DATETIME`等等...）。

我应该如何开发它？我应该为它创建一个完整的输入法服务吗？或者我应该只创建一个`KeyboardView`并将其添加到活动的布局中？（我想`KeyboardView`使用方便键创建和点击事件处理）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:00:19.427

也许你可以看看[这个](https://stackoverflow.com/questions/9577304/how-to-make-a-android-custom-keyboard)。我认为最好的方法是制作自定义布局并对其进行充气。[这里](http://tutorials-android.blogspot.in/2011/06/create-your-own-custom-keyboard-for.html)也给出了一个教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T13:01:04.980

由于它是一次性的，并不意味着作为一个单独的应用程序，您可以简单地使用任何对您来说最简单的方法（`KeyboardView`方法）。

试一试，确保它反应灵敏且活泼。如果它有效，那么简单易行的方法将是我的建议。

# c# - 在运行时设置属性错误 - 无法评估表达式，因为当前线程处于堆栈溢出状态

> ID：13645694
> 
> 赞同：-1
> 
> 时间：2012-11-30T12:53:56.487
> 
> 标签：c#, object, properties

假设我有一个名为 MyObjects 的对象集合。

现在我正在循环上面的集合并将它添加到另一个名为 MyObject2 的对象中。MyObjects 有一个名为“文件”的属性。

当我循环我的第一个集合时，我想操纵 files 属性的值。首先，我可以按照如下所示的代码进行操作。如果是，我收到如下错误：

```
{Cannot evaluate expression because the current thread is in a stack overflow state.} 

List<objects> MyObjects = Populate(); 
List<objects> MyObject2 = new List<objects>();
foreach(var item in MyObjects)
{
   item.files = "test file" + item.files;
   MyObject2.add(item);
} 
```

编辑 ：：

文件属性：

```
 [Transient]
        protected string _files;
        public string files
        {
            get
            {
               return _files;
            }
            set
            {
                _files= value;
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:02:04.167

心理调试 - 我怀疑你的`files`财产看起来像这样：

```
public string files
{
    get { return files; }
    set { files = value; }
} 
```

这将永远递归，直到堆栈爆炸。不过，这只是猜测，因为您没有向我们展示关键的代码。

# php - PHP 代码显示为纯文本并且 isset($_POST) 不起作用

> ID：13645696
> 
> 赞同：1
> 
> 时间：2012-11-30T12:54:03.460
> 
> 标签：php, isset

我一直在尝试使用 PHP 连接到 MySQL 并显示一些数据。我对此完全陌生。我主要从 w3schools 和其他一些在 Google 上找到的网站阅读了这个主题。但是我有 2 个问题 1st，PHP 代码之后开始

```
$result = mysql_query("SELECT * FROM Passengers_On_Flight"); 
```

正在显示为纯文本。

另一个问题是，即使没有提交表单，它也总是会发生，这让我相信表单由于某种原因`if(isset($_POST['submit']))`没有被正确评估。我发现了其他问题，人们遇到的问题是它从不评估真实，但并不总是评估真实。

我在我的服务器上做了一个 PHP -v 以确保安装了 php5，我也这样做了： http: [//www.gilesorr.com/papers/PHP/x37.html](http://www.gilesorr.com/papers/PHP/x37.html)

两者都表明 PHP 实际上已安装并正在运行。我已经搜索过，但似乎无法找出问题所在。

这是我使用 PHP 编写的 HTML：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
    <link rel="stylesheet" type="text/css" href="cobraStyle.css">
    <HEAD>
    <TITLE>Cobra</TITLE>
    </HEAD>
    <BODY>
    <div id="container">
        <div id="header">
            <h1>
            Cobra Airlines
            </h1>
        </div>
        <div id="navigation">
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="viewFlights.html">Check Flights</a></li>
                <li><a href="#">Administration</a></li>
                <li><a href="#">Contact us</a></li>
            </ul>
        </div>
        <div id="content">
        <h2>
        Flights heading
        </h2>
        <?php
        if($_POST['submit'])
        {
            $con = mysql_connect("localhost","root","qwerty");
        if (!$con)
        {
            die('Could not connect: ' . mysql_error());
        }
        mysql_select_db("Cobra_Airlines", $con);

        $result = mysql_query("SELECT * FROM Passengers_On_Flight");

        echo "<table border='1'>
            <tr>
            <th>Fligh Number</th>
            <th>Departure Date</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Passenger Number</th>
            </tr>";

        while($row = mysql_fetch_array($result)){
            echo "<tr>";
            echo "<td>" . $row['FlightNum'] . "</td>";
            echo "<td>" . $row['Departure_Date'] . "</td>";
            echo "<td>" . $row['First_Name'] . "</td>";
            echo "<td>" . $row['Last_Name'] . "</td>";
            echo "<td>" . $row['PassengerNum'] . "</td>";
            echo "</tr>";
        }
        echo "</table>";

        mysql_close($con);
    }
?>
<p>
<form name="input" action="viewFlights.html" method="post">
    Flight Number: <input type="text" name="flight">
    <input type="submit" value="submit" name="submit">
</form>
</p>
</div>
<div id="footer">
    Copyright © Cobra Air, 2012
</div>
</div>
</BODY>
</HTML> 
```

这是更新的PHP：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
<link rel="stylesheet" type="text/css" href="cobraStyle.css">
   <HEAD>
      <TITLE>Cobra</TITLE>
   </HEAD>

   <BODY>

    <div id="container">
        <div id="header">
                <h1>
                    Cobra Airlines
                </h1>
            </div>

        <div id="navigation">
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="viewFlights.html">Check Flights</a></li>
                <li><a href="#">Administration</a></li>
                <li><a href="#">Contact us</a></li>
            </ul>
        </div>

        <div id="content">
            <h2>
                Flights heading
            </h2>

            <?php

                    $con = mysql_connect("localhost","root","qwerty");
                    if (!$con)
                    {
                        die('Could not connect: ' . mysql_error());
                    }
                    mysql_select_db("Cobra_Airlines", $con);

                    $result = mysql_query("SELECT * FROM Passengers_On_Flight");

                    echo 
                    "<table border='1'>
                    <tr>
                        <th>Fligh Number</th>
                        <th>Departure Date</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Passenger Number</th>
                    </tr>";

                    while($row = mysql_fetch_array($result))

                        echo "<tr>";
                        echo "<td>" . $row['FlightNum'] . "</td>";
                        echo "<td>" . $row['Departure_Date'] . "</td>";
                        echo "<td>" . $row['First_Name'] . "</td>";
                        echo "<td>" . $row['Last_Name'] . "</td>";
                        echo "<td>" . $row['PassengerNum'] . "</td>";
                        echo "</tr>";

                    endwhile;
                    echo "</table>";

                    mysql_close($con);

            ?>

            <p>
                <form name="input" action="viewFlights.php" method="post">
                    Flight Number: <input type="text" name="flight">
                    <input type="submit" value="submit" name="submit">
                </form>
            </p>

        </div>

        <div id="footer">
            Copyright © Cobra Air, 2012
        </div>
</div>

   </BODY>

</HTML> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:58:45.667

问题是它们是 html 文件而不是 php `viewFlights.html`，`x37.html`除非您的服务器被告知 .html 应该解析，否则它们不会解析为 PHP。

将它们的文件名更改为`.php`，即`viewFlights.php`和`x37.php`（并将您的表单操作更新为 viewFlights.php）。

您应该更改`if ($_POST['submit'])`为`if (isset($_POST['submit']))`以避免和未定义的索引错误。

**在旁边...**

当你处理完这个问题后，我永远无法理解为什么人们会在空白不重要的情况下这样做。

```
echo "<tr>";
echo "<td>" . $row['FlightNum'] . "</td>";
echo "<td>" . $row['Departure_Date'] . "</td>";
echo "<td>" . $row['First_Name'] . "</td>";
echo "<td>" . $row['Last_Name'] . "</td>";
echo "<td>" . $row['PassengerNum'] . "</td>";
echo "</tr>"; 
```

只是

```
echo "<tr>
    <td>" . $row['FlightNum'] . "</td>
    <td>" . $row['Departure_Date'] . "</td>
    <td>" . $row['First_Name'] . "</td>
    <td>" . $row['Last_Name'] . "</td>
    <td>" . $row['PassengerNum'] . "</td>
    </tr>
"; 
```

**编辑**

回答第二个问题，while(){} 已更改为 while():endwhile 但冒号丢失。需要是

```
while($row = mysql_fetch_array($result)): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:16:03.380

纯文本是什么意思？如果您试图提取记录，除非它是密码等...不应该没问题吗？

通过你`$_POST`提交的价值，你只是把它推到哪里。

您应该`$_POST`输入航班号，例如： `if($_POST['flight'])`

您也缺少大量编程来提取记录。

我建议您在编码之前计划该过程。

另外，你的mysql连接的结构很差，在外部目录中保持一个持久连接，直到你准备好关闭它，它使用更少的资源。

(../Connections/config.php)

`$pcon = mysql_pconnect('','','')`

`mysql_select_db('', $pcon)`

不要忘记将页面更改为 .php 扩展名而不是 .html！

# macos - Mac OS X 终端上的 Grep 进程崩溃信号

> ID：13645700
> 
> 赞同：1
> 
> 时间：2012-11-30T12:54:11.137
> 
> 标签：macos, terminal, grep

我正在尝试使用 bash 脚本在 Mac OS X Mountain Lion 上调试我的应用程序，该脚本用于使用多种输入法打开应用程序。虽然我希望脚本退出运行并简短描述发生了什么，但如果它遇到任何错误信号（没有 set -e）。

脚本按以下方式构建：

```
#!/bin/bash
#
...

while true
do
  for input in $INPUTS 
  do
    /path/to/app $input 2> mylog.log &
    sleep 2

    tail -2 /private/var/log/system.log | grep $ERROR &&
     echo $input &&
     exit 1;

    test $? -gt 127 &&
     echo $input &&
     exit 2;

    # nothing happened, kill the app and continue with a new test
    pkill -9 app
  done
done 
```

我试图通过手动发送来调试脚本

```
pkill -SIGSEGV app 
```

在终端。我正在尝试让脚本将输出打印到命令行（因此在 app 命令中使用“&”）以及日志文件（2>），但看起来如果发生崩溃，它不会t 将应用程序日志正确打印​​到文件或终端，并且脚本只是继续运行。此外，不知何故，来自 system.log 的 grep 并没有捕捉到崩溃。

在 Mac 上的 shell 脚本中监视和捕获应用程序崩溃的更好选择是什么？我在 Linux 上做过类似的测试，它们运行良好。

编辑：除了 shell 脚本之外，我也愿意就其他监控崩溃的方法提出建议。:-)

# c# - 如何在 StreamReader 或 String 中搜索 HTML 元素

> ID：13645703
> 
> 赞同：3
> 
> 时间：2012-11-30T12:54:26.687
> 
> 标签：c#, .net, web-crawler

我一直在搜索一个简单的网络爬虫，我需要在我的 StreamBuilder 或字符串中搜索一个元素。例如，我需要获取 id 为“bodyDiv”的 div 中的所有内容。哪个工具可以帮我解决这个问题？

```
private static string GetPage(string url)

        {

            HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
            request.UserAgent = "Simple crawler";    
            WebResponse response = request.GetResponse();

            Stream stream = response.GetResponseStream();

            StreamReader reader = new StreamReader(stream);

            string htmlText = reader.ReadToEnd();
            return htmlText;

        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T13:01:01.450

我会使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(htmlText);

var div = doc.DocumentNode.SelectSingleNode("//div[@id='bodyDiv']");
if(div!=null)
{
    var yourtext = div.InnerText;
} 
```

# python - 将一个列表复制到另一个集合

> ID：13645719
> 
> 赞同：1
> 
> 时间：2012-11-30T12:55:21.480
> 
> 标签：python, mongodb, pymongo

我在**coll1**集合中有一个文件，格式如下：

```
{_id: 1, "value" : {"listOfNumbers" : [1,2,3]}} 
```

我想知道，如何使用 pymongo 将此列表复制到现有的集合**coll2**列表中。

我发现这个查询将用列表 [3,2,1] 替换现有的 coll2 列表：

```
db.coll2.update({_id:1}, {$set: {'value.listOfNumbers' : [3,2,1]}}) 
```

问题是，我不知道如何获取 coll1 的列表。

另外，检查两个列表是否相同的最简单方法是什么？

我提前感谢您的回复和您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:17:31.247

coll1 对我来说似乎是一个简单的字典，它应该很容易通过以下方式获取关键字“value”的值

```
coll1['value'] 
```

由于条目是另一个字典，您应该能够通过

```
coll1['value']['list of numbers'] 
```

为了比较，这取决于一个事实，即列表仅在 python 中相等，如果元素的顺序和值相等。这应该很容易用 isequal (==) 来检查。

# jquery - jQuery text property and IE

> ID：13645720
> 
> 赞同：0
> 
> 时间：2012-11-30T12:55:24.890
> 
> 标签：jquery, internet-explorer

> **Possible Duplicate:**
> [$(‘&lt;style></style>’).text(‘css’).appendTo(‘head’) does not work in IE?](https://stackoverflow.com/questions/2692770/style-style-textcss-appendtohead-does-not-work-in-ie)

I have this code:

```
$("head").append($("<style></style>")
  .attr("type", "text/css")
  .text("some text")
); 
```

It works well with Firefox.

But with IE8, there is an error in the jQuery library:

> access to the method or properties unexpected

The problem happens when I add the text function (whatever the text is).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:20:04.120

`innerHTML` is read-only for certain tags in IE - style is one of them. Here is a [well written answer](https://stackoverflow.com/a/2692861/44816) to a similar question with sources.

Create your entire style block and append it to the head in one shot

```
$('head').append('<style type="text/css">some text</style>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:07:29.530

### Why don't you try this:

```
$("head").append($("<style></style>")
  .attr("type", "text/css")
  .html("some text")
); 
```

* * *

### Try this may be:

```
$( "<style>body { background: black; }</style>" ).appendTo( "head" ); 
```

# wordpress - WordPress 分类法导致页面数达到 404

> ID：13645721
> 
> 赞同：1
> 
> 时间：2012-11-30T12:55:30.463
> 
> 标签：wordpress

我有以下代码来创建自定义帖子类型和与该帖子类型关联的自定义分类法：

```
register_post_type('deals', array(  
'label' => 'Deals',
'description' => '',
'public' => true,
'show_ui' => true,
'show_in_menu' => true,
'capability_type' => 'post',
'hierarchical' => true,
'rewrite' => array('slug' => "%make%", 'with_front' => false),
'query_var' => true,
'has_archive' => 'deals',
'exclude_from_search' => false,
'menu_position' => 4,
'supports' => array('title','editor','excerpt','trackbacks','custom-fields','comments','revisions','thumbnail','author','page-attributes','sticky'),
'labels' => array (
    'name' => 'Deals',
      'singular_name' => 'Deal',
      'menu_name' => 'Deals',
      'all_items' => 'All Deals',
      'add_new' => 'Add Deal',
      'add_new_item' => 'Add New Deal',
      'edit' => 'Edit',
      'edit_item' => 'Edit Deal',
      'new_item' => 'New Deal',
      'view' => 'View Deal',
      'view_item' => 'View Deal',
      'search_items' => 'Search Deals',
      'not_found' => 'No Deals Found',
      'not_found_in_trash' => 'No Deals Found in Trash',
      'parent' => 'Parent Deal',
),) );

$labels = array(
'name' => _x( 'Makes', 'taxonomy general name' ),
'singular_name' => _x( 'Make', 'taxonomy singular name' ),
'search_items' =>  __( 'Search Makes' ),
'all_items' => __( 'All Makes' ),
'parent_item' => __( 'Parent Make' ),
'parent_item_colon' => __( 'Parent Make:' ),
'edit_item' => __( 'Edit Make' ), 
'update_item' => __( 'Update Make' ),
'add_new_item' => __( 'Add New Make' ),
'new_item_name' => __( 'New Make Name' ),
'menu_name' => __( 'Make' ),
);  

register_taxonomy('make',array('deals'), array(
'hierarchical' => true,
'labels' => $labels,
'show_ui' => true,
'query_var' => true,
'rewrite' => array( 'slug' => 'make' ),
'has_archive' => 'make'
 )); 
```

正如您从运行良好的现场网站中看到的那样：[http ://www.yourcardeals.co.uk/nissan-deals/](http://www.yourcardeals.co.uk/nissan-deals/)

我遇到的问题是它导致常规页面 404 即[http://www.yourcardeals.co.uk/manufacturers/](http://www.yourcardeals.co.uk/manufacturers/)

我已经刷新了永久链接，并且没有任何页面或类别与任何分类法或自定义帖子类型具有相同的名称或 slug。

关于可能导致这种情况的任何想法？

# php - 强制 https 协议

> ID：13645730
> 
> 赞同：3
> 
> 时间：2012-11-30T12:56:11.840
> 
> 标签：php, apache, codeigniter, https, centos

如何强制我的网站`https://`在整个网站中使用？我的网站是在 CentOS 上使用 CodeIgniter、MySQL 和 Apache 构建的，谁能赐教。

**编辑**：

我正在使用 CodeIgniter，它有这个 .htaccess。正如我在下面的评论中提到的，我想做相反的事情（强制`https`网站的某些部分）：

在`.htaccess`我的系统上：

```
Options -Indexes
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

如果我添加@Dale 建议的内容：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteCond ^(login|register|userportal)
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

我得到响应**500**。有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T13:01:07.220

我过去在 .htaccess 文件中使用过它

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

可能有更好的实现，但它总是对我有用

如果你想删除我用过的 www 部分

```
RewriteCond %{HTTP_HOST} ^www\.(.+)
RewriteCond %{HTTPS}s/%1 ^(on(s)|offs)/(.+)
RewriteRule ^ http%2://%3%{REQUEST_URI} [L,R=301] 
```

这是组合规则

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}

RewriteCond %{HTTP_HOST} ^www\.(.+)
RewriteCond %{HTTPS}s/%1 ^(on(s)|offs)/(.+)
RewriteRule ^ http%2://%3%{REQUEST_URI} [L,R=301] 
```

这首先处理协议，然后删除 w

更新：

要对特定目录强制执行 https 协议，您可以使用类似

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteCond ^(login|register|userportal)
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

如果您使用上述内容，您当然会删除此（下）

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

# javascript - 验证多个下拉菜单

> ID：13645731
> 
> 赞同：1
> 
> 时间：2012-11-30T12:56:21.613
> 
> 标签：javascript, validation

这我的网络电子邮件表单上有四个下拉菜单，如下所示

```
<select  name="newstaff"  class="formStyle" style="width:335px;" >
<option value="N/A">Please Select</option>
---- other options ---
<select name="allstaff"  class="formStyle" style="width:335px;" >
<option value="N/A">Please Select</option>
 ---- other options ---
<select  name="learning"  class="formStyle" style="width:400px;" >
<option value="N/A">Please Select</option>
---- other options ---
<select  name="leaders"  class="formStyle" style="width:335px;" >
<option value="N/A">Please Select</option>
---- other options --- 
```

如果用户尝试提交此表单而不从至少一个下拉菜单中选择至少一个其他选项，我将如何编写一个会发出警报的验证函数“N/A

谢谢

**编辑：**

用于验证表单的代码：

```
function validateForm(objForm)
{
    var returnStatus = 1;

    if (objForm.newstaff.selectedIndex == 0) {
        alert("please make a selection!");
        returnStatus = 0;
    };
    if (returnStatus) {
        objForm.submit();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:15:51.917

你很亲密。这里的区别是获取标签名称为 的元素数组`select`。

```
validateForm = function(objForm) {
    var i = 0,
        valid = false,
        elements = objForm.getElementsByTagName("select");

    for ( ; i < elements.length; i++) {
        if (elements[i].selectedIndex) {
            valid = true;
            break;
        }
    }

    if (valid === true) {
        objForm.submit();
    } else {
        alert ("Please make a selection!");
    }
} 
```

# tfs - TFS 2010 错误：TF42004：Team Build 无法打开文件夹

> ID：13645734
> 
> 赞同：0
> 
> 时间：2012-11-30T12:56:35.637
> 
> 标签：tfs, tfs-2010

我试图建立这个项目。我按照以下视频中提到的步骤进行操作，直到两分钟。 [http://www.youtube.com/watch?v=FriDustfTBc](http://www.youtube.com/watch?v=FriDustfTBc)

选择“Queue New Build”后，出现以下错误。无法创建目录`'\\localhost\Drops\ServerBuild1\ServerBuild1_20121130.1'`。详细信息：找不到网络名称。

我以管理员身份使用 Visual Studio 2010。在 inetpub\wwwroot 文件夹中，我创建了一个名为“Drops”的文件夹。我的项目是简单的 Hello world 项目。如何让Build成功？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:10:44.600

您是否在 localhost 上创建了一个名为“Drops”的共享？

# ios - 单例变化整数

> ID：13645740
> 
> 赞同：0
> 
> 时间：2012-11-30T12:57:23.883
> 
> 标签：ios, xcode

我有一个以这种方式实现的单例：

```
PhotoViewController* sharedSingleton = [PhotoViewController sharedManager]; 
```

我知道要启动一个方法，我必须做 [sharedSingleton 方法]；

但是如果我想将 PhotoViewController.h 文件中声明的整数更改为 NSInteger* tagNumber，我可以这样做吗？我试过这个：

```
[sharedSingleton.tagNumber = 1]; 
```

但它不起作用！

编辑：

错误：在 photoViewController 类型的对象上找不到属性 tagNUMber

```
@interface PhotoViewController : UIViewController{

BOOL newMedia;
UIPopoverController *popoverController;
DBRestClient *restClient;
NSInteger* tagNumber;
}

+ (PhotoViewController *) sharedManager;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:01:59.597

单例是常规对象。唯一的区别是只会从类中创建一个实例。

如果您无法设置 tagNumber，则很可能正在发生其他类型的编码错误......也许 tagNumber 属性是在类扩展中声明的，从而使访问器/突变器方法成为私有？

如果您使用 tagNumber 的声明方式编辑您的问题，并且还包括您收到的错误消息，我将能够编辑此答案并为您提供更具体的建议。

**编辑：** ...是的，绝对要仔细检查以确保您没有将 NSInteger 声明为指针... NSInteger 是标量类型（因此它采用直接值，并且不使用取消引用' *' 操作员）。

我建议使用属性而不是直接访问实例变量：

```
@interface PhotoViewController : UIViewController

@property (nonatomic, assign) BOOL newMedia;
@property (nonatomic, strong) UIPopoverController *popoverController;
@property (nonatomic, strong) DBRestClient *restClient;
@property (nonatomic, assign) NSInteger tagNumber;

+ (PhotoViewController *) sharedManager;

@end 
```

然后将不带括号的变量设置为：

```
sharedSingleton.tagNumber = 1; 
```

# .net - 如何发送预定的电子邮件

> ID：13645742
> 
> 赞同：-3
> 
> 时间：2012-11-30T12:57:25.053
> 
> 标签：.net, vb.net, email, scheduled-tasks

我正在用 vb.net 构建一个桌面应用程序，我想发送预定的电子邮件。例如，我想在一天中的特定时间发送邮件。有没有办法做到这一点？此外，即使我的应用程序已关闭，是否有任何方法可以发送这些消息？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:11:49.453

您可以将控制台应用程序或任何可执行文件放在 Windows 任务计划程序中，您可以将其设置为唤醒计算机，甚至更好地将其发布到持续运行的服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:05:41.950

请。创建一个 Windows 服务作为后台服务运行，它不断读取存储电子邮件信息的数据库电子邮件表，并且可以按计划时间发送待处理的电子邮件。

请从以下链接获取更多详细信息：http: [//www.codeguru.com/vb/gen/vb_system/services/article.php/c4825/Creating-a-Windows-Service-in-VBNET.htm](http://www.codeguru.com/vb/gen/vb_system/services/article.php/c4825/Creating-a-Windows-Service-in-VBNET.htm)

# c# - 如何使用 c# 在我的 Windows 窗体应用程序中嵌入 vlc

> ID：13645743
> 
> 赞同：3
> 
> 时间：2012-11-30T12:57:27.400
> 
> 标签：c#, windows

我正在尝试制作一个可以控制我的 IP 摄像机的应用程序。VLC 媒体播放器可以做到这一点，但我不知道如何将它嵌入到我的应用程序中以添加功能，例如捕获图片。我该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T13:02:59.937

VideoLAN Wiki 有关于[VLC 的 .Net 接口](http://wiki.videolan.org/.Net_Interface_to_VLC)以及libvlc 的[C# 绑定](http://wiki.videolan.org/C_Sharp)的链接，libvlc 是 VLC 的底层库。

您会发现有几个项目，例如[VLCdotNet](http://vlcdotnet.codeplex.com/)，这似乎是您可以使用的东西。

[您还可以通过查看CodePlex 上的 DMediaPlayer](http://dmediaplayer.codeplex.com/)的源来进入 VLC 的 .Net 接口。

# javascript - 使用变量作为函数内部的参数

> ID：13645745
> 
> 赞同：0
> 
> 时间：2012-11-30T12:57:31.690
> 
> 标签：javascript, jquery

我编程很差...

我有一个 javascript 变量

```
var a = 'S_QEEFCEAPU'; 
```

然后还有另一个像这样的html

```
<a href="#" onClick='jQuery("#youtube-player-container").tubeplayer("play","S_QEEFCEAPU")'>Video 1</a> 
```

我想在 tubeplayer 函数调用中使用变量名而不是字符串 S_QEEFCEAPU。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:00:01.597

如果变量在全局范围内，只需执行此操作 -

```
<a href="#" onClick='jQuery("#youtube-player-container").tubeplayer("play", a)'>Video 1</a> 
```

不过，我建议您给变量起更好的名称。并使用不显眼的 JavaScript 来摆脱 onClick 的问题。并且不将 jQuery 语句放在 onClick 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:59:22.527

您可以在单击链接时调用 javascript 函数并在那里使用 javascript 变量。

**在 html 中**

```
<a href="#" onClick='yourFunction()'>Video 1</a> 
```

**在 JavaScript 中**

```
function yourFunction(){
     var a = 'S_QEEFCEAPU';
    jQuery("#youtube-player-container").tubeplayer("play",a)
} 
```

如果`a`定义在侧函数之外并且`global scope`

```
 var a = 'S_QEEFCEAPU';
function yourFunction(){      
    jQuery("#youtube-player-container").tubeplayer("play",a)
} 
```

# c# - 验证字段

> ID：13645751
> 
> 赞同：-3
> 
> 时间：2012-11-30T12:57:59.863
> 
> 标签：c#, visual-studio-2010, c#-4.0

我的窗户上有这样的东西

```
 field1                field 2                        mandatory             showfield

   textbox1               textbox2                      checkbox1          checkbox 2

   textbox3              textbox4                       checkbox3          checkbox4 
```

.... 总共 5 个这样的字段

我想要的是首先遍历文本框，如果它们被填充我想检查复选框是否被选中

我有以下数据

```
string[] textdata = { textBox1.Text, textBox2.Text, textBox3.Text, textBox4.Text, textBox5.Text, textBox6.Text, textBox7.Text, textBox8.Text, textBox9.Text, textBox10.Text, textBox11.Text };
bool[] chk = { checkBox1.Checked, checkBox2.Checked, checkBox3.Checked, checkBox4.Checked, checkBox5.Checked, checkBox6.Checked, checkBox7.Checked, checkBox8.Checked, checkBox9.Checked, checkBox10.Checked, checkBox11.Checked, checkBox12.Checked }; 
```

这是我试过的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:04:07.913

您可以获取列表中的所有文本框，然后在每个框中迭代以检查数据..

```
List<TextBox> textBoxes = formObject.Controls.OfType<TextBox>();

   foreach(TextBox txtBox in textBoxes)
   {
       if(txtBox.Text == "")
         //Do some work
   } 
```

同样，您可以对其他控件执行操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T13:08:32.460

```
foreach (Textbox g in this.Controls.OfType<Textbox>())
{
if(g.text == "")
{
this.Controls[checkbox[gettextbox name and parse it to getnumber]].checked = true;    }  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T13:07:40.383

由于没有真正的问题/问题，我猜测问题可能是什么。

> 我想要的是首先遍历文本框，如果它们被填充我想检查复选框是否被选中
> 
> 我有以下数据

```
string[] textdata = { textBox1.Text, textBox2.Text, textBox3.Text, textBox4.Text, textBox5.Text, textBox6.Text, textBox7.Text, textBox8.Text, textBox9.Text, textBox10.Text, textBox11.Text };
bool[] chk = { checkBox1.Checked, checkBox2.Checked, checkBox3.Checked, checkBox4.Checked, checkBox5.Checked, checkBox6.Checked, checkBox7.Checked, checkBox8.Checked, checkBox9.Checked, checkBox10.Checked, checkBox11.Checked, checkBox12.Checked }; 
```

所以你可以[`Enumerable.All`](http://msdn.microsoft.com/en-us/library/bb548541.aspx)用来检查是否所有的文本框都被填满了：

```
bool allTextEntered = textdata.All(s => !string.IsNullOrWhiteSpace(s)); 
```

然后您可以显示`MessageBox`是否缺少某些内容，否则您可以检查是否所有内容`CheckBoxes`都已检查：

```
bool allCheckBoxChecked = chk.All(chk => chk); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T13:34:31.653

应该起作用的简单方法是在文本框的`Tag`属性 IE 中设置文本框/复选框的关系：

```
this.textbox1.Tag = this.checkbox1
//continue per textbox in this pattern 
```

然后只需在集合中查询与“文本框是否有值？是的，复选框是否选中？”谓词匹配的项目。

最后的答案是前面的查询是否返回了任何项目。

```
var isValid = this.Controls.OfType<Textbox>()
                  .Where(textbox => 
                          !string.IsNullOfWhitespace(textbox.Text) && 
                          (textbox.Tag as Checkbox).Checked)).Any(); 
```

这当然是假设 textbox(n)/checkbox(n) 验证是正确的，这个问题非常不清楚。

# java - 如何使用进程 ID 获取有关 linux 进程的更多详细信息？

> ID：13645754
> 
> 赞同：1
> 
> 时间：2012-11-30T12:58:03.640
> 
> 标签：java, ubuntu, process, grep, kill

我想了解有关在 ubuntu 系统上运行的进程的更多详细信息。

例如，我想杀死一个**java**进程，但是我的机器上正在运行多个 java 进程，那么如何识别我想要的正确的一个？

我试过**ps -ae | grep java**它为我提供了所有正在运行的 java 进程，其中包含 tomcat、eclipse 和我想要杀死的进程，但我不明白要杀死哪个进程？

有什么方法可以获取有关特定进程的更多详细信息，即进程名称、它的开始时间等。

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T13:01:20.020

使用该`ps`实用程序，您可以使用例如`ps auxwww`获取很多详细信息，或者您可以使用该`jps`实用程序列出正在运行的 java 进程，例如：

```
localhost:~# jps -v
2734 Bootstrap -Djava.util.logging.config.file=/opt/tomcat-6/....
2933 Launcher -Dsun.net.inetaddr.ttl=3600 -DbundleBasedir=....
10255 Jps -Dapplication.home=/usr/lib/jvm/java-6-sun-1.6.0.26 -Xms8m 
```

干杯，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T13:07:08.410

我通常使用

`ps -ax|grep somethingIKnowAboutTCPOrTheArguments`

通常，进程在不同的目录中启动或具有不同的起始参数。我用它来选择我的 tomcats/java/....-process

# qt - 为 Visual Studio 2012 (x86) 编译 Qt 4.8.x

> ID：13645755
> 
> 赞同：5
> 
> 时间：2012-11-30T12:58:04.963
> 
> 标签：qt, visual-studio-2012

我已经使用[此处](https://stackoverflow.com/questions/12113400/compiling-qt-4-8-x-for-visual-studio-2012/13085842#13085842)提出的相关指南成功编译了 Visual Studio 2012 (x64) 的 Qt 4.8.3，但问题是，此解决方案仅适用于 64 位编译，尽管编译 32 位 (x86) 完成时没有错误，webkit 不断崩溃（访问冲突），例如，qt 设计器在启动时会立即崩溃，有人运气好吗？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:45:02.680

看起来 Qt 4.8.4 正式获得了 msvc2012 支持。也许您会向 Digia 或 qt-project 询问您的问题。只是一个线索。

[https://www.qt.io/blog/2012/11/29/qt-4-8-4-released](https://www.qt.io/blog/2012/11/29/qt-4-8-4-released)

[https://web.archive.org/web/20121203035216/http://qt.digia.com/Release-Notes/Release-Notes-Qt-484/](https://web.archive.org/web/20121203035216/http://qt.digia.com/Release-Notes/Release-Notes-Qt-484/)

# c++ - boost::TIME_UTC(_) 具有不同的 boost 版本

> ID：13645756
> 
> 赞同：7
> 
> 时间：2012-11-30T12:58:08.360
> 
> 标签：c++, boost

我刚刚将我在 Windows 上的项目从 boost 1.46 升级到了当前的 boost 1.52。我们根据 [https://svn.boost.org/trac/boost/ticket/6940](https://svn.boost.org/trac/boost/ticket/6940)`boost::TIME_UTC`更改了一些用法。`boost::TIME_UTC_`

然而，我们也在一些不知道`boost::TIME_UTC_`. 是否有任何建议的方法可以将 boost 1.49 和 1.52 与 TIME_UTC 并行使用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T13:05:52.207

将所有内容更改为`TIME_UTC_`. 然后使用这个：

```
#include <boost/version.hpp>
#if BOOST_VERSION < 105000
#define TIME_UTC_ TIME_UTC
#endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-03T18:37:15.250

我们用：

```
#include <boost/version.hpp>
#if BOOST_VERSION < 105000
#include <boost/thread/xtime.hpp>
namespace boost {
  enum xtime_compat {
    TIME_UTC_=TIME_UTC
  };
}
#endif 
```

这样你就可以使用`boost::TIME_UTC_`1.50 以后的版本。

但不适用于 openSuse，因为他们决定将此更改合并回 1.49。

# javascript - Mouseenter 事件在悬停时触发两次并触发 mouseleave 代码？

> ID：13645765
> 
> 赞同：0
> 
> 时间：2012-11-30T12:58:38.317
> 
> 标签：javascript, jquery

我正在尝试使用淡入和淡出一些图标`mouseenter`，`mouseleave`但我注意到我的代码运行得不太好。我在代码中添加了一些控制台日志，并在 mouseenter 上注意到我的 mouseleave 日志也被调用。谁能解释我做错了什么？

问题的 JSFiddle：http: [//jsfiddle.net/BndxN/1](http://jsfiddle.net/BndxN/1) 当我快速将鼠标悬停在菜单上时，图标出现在按钮下方？

JS

```
/* On sharePage hover hide label and display social icons */
$sharePage.mouseenter(function(){
    $sharePageLabel.fadeOut(function(){
        $socialIconItems.each(function(i){
            $(this).delay(i*45).stop(true,true).fadeIn();
            //console.log($(this));
        });
    });
});
$sharePage.mouseleave(function() {
    $($socialIconItems.get().reverse()).each(function(i){
        $(this).delay(i*305).fadeOut();
        if(i==3){$sharePageLabel.fadeIn()}
    });
}); 
```

HTML

```
<div id="sharePage">
      <h3>Pass The Party On</h3>
      <ul id="socialIcons" class="cf">
        <li><a href="" class="fb ir" data-network="facebook" data-shareurl="">Facebook</a></li>
        <li><a href="" class="twitter ir" data-network="twitter" data-shareurl="">Twitter</a></li>
        <li><a href="" class="googlePlus ir" data-network="google" data-shareurl="">Google+</a></li>
        <li><a href="" class="email ir" data-network="email" data-shareurl="">Email</a></li>
      </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:06:20.110

您的图标淡出没有被触发，因为它从 mouseenter 事件中淡入尚未完成。在淡出动画上添加超时（在时间持续时间内）似乎可以解决它。

见 jsfiddle.net/BndxN/26/

编辑 - 您可能需要稍微调整超时持续时间。

# octave - 如何获取安装在 octave 中的软件包的功能列表？

> ID：13645767
> 
> 赞同：4
> 
> 时间：2012-11-30T12:58:50.187
> 
> 标签：octave

安装软件包后，查找该软件包中的功能的命令是什么？

例如，我安装了`control`软件包。但是如何找到这个包的帮助，比如它包含什么功能等等，比如 Matlab？

是否每次都必须访问[http://octave.sourceforge.net/](http://octave.sourceforge.net/)网站才能找到？可以从八度音程中找到此信息吗？

我发现 Matlab 的帮助比 octave 更好、更容易使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T22:55:32.820

用于`pkg describe -verbose control`从控制包中获取所有信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-18T13:17:46.863

## 显示包帮助的八度函数

我写了一个简短的 octave 函数，可以解决你的问题：它创建一个对话框来显示包中的所有函数。选择一个功能后，它将在消息框中显示它的帮助文本。只需将以下 octave 函数保存到一个名为的文件`pkghelp.m`中，然后键入
`pkghelp packagename`.

### 例子

以下将显示包“io”的功能概述：
`pkghelp io`

### 源代码

```
% Script to display functions and help on functions for a package
function pkghelp(pkgname)

  % Get functions for this package
   des = pkg('describe','-verbose',pkgname);
   % Get first element
   des = des{1};

   if isempty(des)
     error('pkghelp:unknownPackage','Package "%s" was not found!',pkgname);
   endif

   % Create a dialog with functions
   pname = des.name;
   pvers = des.version;
   pdesc = des.description;

   % Number of categories
   ncat = numel(des.provides);
   list = cell(1,1);
   cnt=1;
   for i=1:ncat
     % Store category name
     list(cnt) = ['--(* ',des.provides{i}.category,' *)--'];
     % Number of functions
     nfunc = numel(des.provides{i}.functions);
     % Append functions in category
     list(cnt+1:cnt+nfunc) = des.provides{i}.functions(:);
     % Update counter
     cnt = cnt+1+nfunc;
   endfor

  ok=1;
  while ok==1  
    % Create dialog
    [sel, ok] = listdlg ('ListString', list,...
                     'SelectionMode', 'Single', ...
                     'ListSize',[300,600],...
                     'Name',pname,...
                     'PromptString','List of available functions');

    if (ok==1)
     % Selected function name
     selfun = list{sel};
     % Not a category?
     if selfun(1) ~= '-'
       % assure that package is loaded for help
       pkg('load',pkgname);
       % Get help text for selected function
       doc = help(selfun);
       % Open dialog with help text display
       msgbox(doc,[pname,'/',selfun],'help');
     endif
    endif
  endwhile

endfunction 
```

[八度](/questions/tagged/octave "显示标记为“八度”的问题")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T15:29:50.560

在 Linux 下，从 Octave 或 Bash（同样工作）中，检查包文件夹：

```
me@computer:/usr/share/octave/packages> ls -la
drwxr-xr-x 3 root root 4096 22\. Okt 2011  .
drwxr-xr-x 5 root root 4096 22\. Okt 2011  ..
drwxr-xr-x 4 root root 4096 22\. Okt 2011  openmpi_ext-1.0.1 
```

你的“控制”包应该出现在这里，作为一个文件夹。输入文件夹并查看详细信息...

```
me@computer:/usr/share/octave/packages> cd openmpi_ext-1.0.1/
me@computer:/usr/share/octave/packages/openmpi_ext-1.0.1> ls -la
drwxr-xr-x 4 root root 4096 22\. Okt 2011  .                                                                                                                                                  
drwxr-xr-x 3 root root 4096 22\. Okt 2011  ..                                                                                                                                                 
-rwxr-xr-x 1 root root  346 24\. Nov 2010  allnodes                                                                                                                                           
drwxr-xr-x 2 root root 4096 22\. Okt 2011  doc                                                                                                                                                
-rw-r--r-- 1 root root 3694 24\. Nov 2010  doc-cache                                                                                                                                          
-rw-r--r-- 1 root root  967 24\. Nov 2010  hello2dimmat.m                                                                                                                                     
-rw-r--r-- 1 root root 1706 24\. Nov 2010  hellocell.m                                                                                                                                        
-rw-r--r-- 1 root root 1359 24\. Nov 2010  hellosparsemat.m                                                                                                                                   
-rw-r--r-- 1 root root 1711 24\. Nov 2010  hellostruct.m                                                                                                                                      
-rw-r--r-- 1 root root 1726 24\. Nov 2010  helloworld.m                                                                                                                                       
-rw-r--r-- 1 root root 1506 24\. Nov 2010  mc_example.m                                                                                                                                       
-rw-r--r-- 1 root root 4721 24\. Nov 2010  montecarlo.m                                                                                                                                       
drwxr-xr-x 2 root root 4096 22\. Okt 2011  packinfo                                                                                                                                           
-rw-r--r-- 1 root root 3535 24\. Nov 2010  Pi.m 
```

# javascript - 新的授权更改会影响 FB JS SDK？

> ID：13645768
> 
> 赞同：0
> 
> 时间：2012-11-30T12:58:53.417
> 
> 标签：javascript, facebook, facebook-javascript-sdk

在路线图上，Facebook 声明他们将改变我们获取访问令牌的方式。这会影响我们使用 Javascript SDK 登录的方式吗？

> **OAuth 授权代码的新安全限制**
> 我们只允许将授权代码交换为访问令牌一次，并要求在创建后 10 分钟内将它们交换为访问令牌。这符合 OAuth 2.0 规范，该规范从一开始就声明“授权码必须是短暂的且一次性使用”。有关更多信息，请查看我们的身份验证文档。

链接：http: [//developers.facebook.com/roadmap/](http://developers.facebook.com/roadmap/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:00:35.590

> 在路线图上，Facebook 声明他们将改变我们获取访问令牌的方式。这会影响我们使用 Javascript SDK 登录的方式吗？

当然**不是**：

> “我们将只允许将授权代码交换为访问令牌一次，[...]”</p>

使用 JS SDK 登录时，您是否必须自己用授权码交换令牌？

不，因为 FB.login 直接返回访问令牌。

# java - 使用类名从 Java Vector 中检索对象

> ID：13645775
> 
> 赞同：0
> 
> 时间：2012-11-30T12:59:26.380
> 
> 标签：java, string, object, vector

我将从解释场景开始。我必须创建一个向量来保存一个圆圈列表。然后我创建一个圆形对象，并将其添加到 Vector。最后，我必须打印列表中每个圆圈的状态（状态并不重要，只需定义颜色和位置等）。

基本上我的问题是，我如何握住圆圈，以便我可以传入其中一个的名称，它会打印正确的圆圈状态。向您展示我的代码可能会更清楚。

我有 3 个类，主要的一个叫做 Lab83Test，Vector 一个叫做 CircleList，Circle 一个叫做 Circle。（格式变得很奇怪，我无法修复它，所以很抱歉！）

**Lab83测试：**

```
public class Lab83Test {

    public static void main(String[] args) {
        makeNewCircle();
    }
    public static void makeNewCircle() {
        CircleList newList = new CircleList();
        Circle newCircle = new Circle();
        newList.addCircle(newCircle);
        newCircle.makeVisible();
        newList.printDetails();
    }
} 
```

**圈子列表：**

```
import java.util.Vector;

public class CircleList {
    private Vector circleVector;

    public CircleList() {
        circleVector = new Vector();
    }
    public void addCircle(Circle circleName) {
            circleVector.add(circleName);
            printDetails();
    }
    public void addCircleToPlace(Circle circleName, int pos) {
        circleVector.add(pos, circleName);
        printDetails();
    }
    public void removeCircleFromPos(int pos) {
        circleVector.remove(pos);
        printDetails();
    }
    public void removeAllCircles(int pos) {
        circleVector.clear();
        printDetails();
    }
    public void printDetails() {

    }
} 
```

circle 类不是很重要，它有很多移动圆的方法和东西。主要的是它必须返回它的状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:07:08.670

如果您只想遍历`Circel`列表中的所有内容并打印他们的名字，您可以这样做：

```
public void printDetails() {
  for (Circle c: circleVector) {
    System.out.println(String.format("%s: center=(%.1f/%.1f) radius=%.1f", c.getName(), c.getCenterX(), c.getCenterY(), c.getRadius()));
  }
} 
```

我不知道您的`Circle`课程看起来如何，所以我只是假设了一些方法名称。

如果您想按名称查找特定圈子：

```
for (Circle c: circleVector) {
  if (c.getName().equals(nameToFind)) return c;
} 
```

或者您可以使用 a`Map<String, Circle>`而不是您的向量，然后执行`return circleMap.get(name);`. 你`addCircle()`会看起来像这样：

```
public void addCircle(Circle circle) {
  circleMap.add(circle.getName(), circle);
  printDetails();
} 
```

**Edit1：**关于您的评论：您的向量没有定义的类型。改变这个：

```
...
public class CircleList {
  private Vector<Circle> circleVector;

  public CircleList() {
    circleVector = new Vector<Circle>();
  }
  ... 
```

# linux - 完全缺少 FSTAB

> ID：13645778
> 
> 赞同：2
> 
> 时间：2012-11-30T12:59:44.057
> 
> 标签：linux, filesystems, fedora

我最近发现我们的一台服务器丢失了（可能有人删除了它）/etc/fstab 文件，它是一个 Fedora Core 6。
我们有什么办法可以在没有副本的情况下重建 fstab？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T13:04:18.940

如果系统仍在运行，您可以从文件 /proc/mounts 中获取 fstab 的副本。

# opencart - Dib(s) 错误没有支付类型！缺少测试参数？- 打开购物车

> ID：13645780
> 
> 赞同：1
> 
> 时间：2012-11-30T12:59:44.993
> 
> 标签：opencart, dibs

我面临在 Open Cart 中安装 Dibs 付款方式的问题。它显示错误 No paytype(s)！缺少测试参数？

请指导我如何解决这个问题。

谢谢帕万

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:35:23.080

顶一下我之前的回答...

根据 DIBS 的说法，如果您在商店关闭测试模式后 DIBS 帐户仍处于测试模式，则会发生这种情况，反之亦然。

# windows-mobile - Windows Mobile 的 MSMQ 资源管理器

> ID：13645786
> 
> 赞同：0
> 
> 时间：2012-11-30T12:59:57.087
> 
> 标签：windows-mobile, msmq

是否有适用于 Windows Mobile 的 msmq 资源管理器（如果 WM 6.5 更好）？请给我任何链接。

提前致谢。

# java - Python telnetlib 性能

> ID：13645788
> 
> 赞同：0
> 
> 时间：2012-11-30T13:00:00.923
> 
> 标签：java, python, memcached, telnetlib

我的任务是转储 memcached 中的所有键，我在 stackoverflow 上找到了执行此操作的脚本：[如何使用 python-memcache 从 memcached 导出所有键和值？](https://stackoverflow.com/questions/5730276/dump-all-keys-and-values-from-memcached-with-python-memcache) 我对其进行了一些修改以满足我的需要，它花费了“真正的 5m57.396s”，而具有相同算法的 Java 版本花费了“真正的 0m5.190s”。我想了解我的 Python 版本的性能瓶颈在哪里。Bellow 是 Java 和 Python 版本的代码

```
import java.io.*;
import java.io.OutputStreamWriter;
import java.util.Scanner;
import java.net.Socket;
import java.util.ArrayList;
import java.util.List;
import java.util.HashSet;
import java.util.Iterator;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class DumpMemcache {
    public static void main(String[] args) throws IOException {
        try {
            Socket socket = new Socket(args[0], Integer.parseInt(args[1]));
            socket.setKeepAlive(true);
            StringBuilder mBuf = new StringBuilder();
            PrintWriter pw = new PrintWriter(new OutputStreamWriter(socket.getOutputStream()), true);
            //OutputStreamWriter w = new OutputStreamWriter(socket.getOutputStream());
            BufferedReader br = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            Scanner scan = new Scanner(br);
            HashSet<String> hs = new HashSet<String>();
            ArrayList<String> slabs = new ArrayList<String>();
            //String ss = new String("stats items STAT items:0:number 0 END\n");
            pw.println("stats items STAT items:0:number 0 END");
            int c=0;
            while (scan.hasNext()) {
                String s = new String();
                s = scan.nextLine();
                if (s.matches("^STAT.*")) {
                    slabs.add(s.split(":")[1]);
                    //System.out.println(slabs.get(slabs.size() - 1));
                }
                else if (s.matches("^END.*$")) break;
            }

            hs.addAll(slabs); // insert all in hashtable
            slabs.clear(); //clear arraylist
            slabs.addAll(hs); //add unique
            for(String slab: slabs) {
                pw.println(String.format("stats cachedump %s 200000 ITEM", slab));
                int cnt = new Integer(0);
                System.err.print(slab + " ");
                while (scan.hasNext()) {
                    cnt++;
                    String s1 = new String();
                    s1 = scan.nextLine();
                    if (! s1.equals("END") && s1.split(" ").length >= 3)
                        System.out.println(s1.split(" ")[1]);
                        else if (s1.equals("END")) break;
                    }
                    System.err.println(cnt);
                }
        } catch (NumberFormatException nfe) {
            System.err.println("Second argument must be port number, thuse Integer value");
            System.exit(1);
        }
    }
} 
```

Python：

```
import sys
import telnetlib

def get_all_memcached_keys(host='127.0.0.1', port=11211):
    t = telnetlib.Telnet(host, port)
    t.write('stats items STAT items:0:number 0 END\n')
    items = t.read_until('END').split('\r\n')
    k = set()
    for item in items:
        parts = item.split(':')
        if not len(parts) >= 3:
            continue
        k.add(parts[1])
    for slab in k:
        sys.stderr.write(slab + " ")
        t.write('stats cachedump {0} 200000 ITEM\n'.format(slab))
        cachelines = t.read_until('END').split('\r\n')
        sys.stderr.write(str(len(cachelines)) + "\r\n")
        for line in cachelines:
            parts = line.split(' ')
            if not len(parts) >= 3:
                continue
            print parts[1]
    t.close()

get_all_memcached_keys(sys.argv[1],sys.argv[2]) 
```

顺便说一句，我根本不是程序员。所以不要怪我代码不好:)

# java - 匹配的通配符是严格的，但找不到元素“资源”的声明

> ID：13645792
> 
> 赞同：4
> 
> 时间：2012-11-30T13:00:05.570
> 
> 标签：java, spring, spring-mvc, spring-security

我知道这是重复的，你们会为此责备我的，但是在阅读了所有帖子后我没有得到正确的解决方案。
我正在尝试在 Spring Source Tool Suite 中构建一个 Spring Template 应用程序。我收到以下错误。

> org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException：来自 ServletContext 资源 [/WEB-INF/spring/appServlet/servlet-context.xml] 的 XML 文档中的第 16 行无效；嵌套异常是 org.xml.sax.SAXParseException：cvc-complex-type.2.4.c：匹配的通配符是严格的，但找不到元素“资源”的声明。

我的 root-context.xml 是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:cache="http://www.springframework.org/schema/cache"
    xmlns:ehcache="http://www.springmodules.org/schema/ehcache"
    xsi:schemaLocation="http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
        http://www.springmodules.org/schema/ehcache http://www.springmodules.org/schema/cache/springmodules-ehcache.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.0.xsd">

    <!-- Root Context: defines shared resources visible to all other web components -->

</beans> 
```

如果我的应用程序中缺少 jar 文件，请告诉我。
这些是我的应用程序中仅有的 jar 文件：
displaytag-1.0-b3.jar、spring-2.0.6.jar、spring-asm-3.0.3.RELEASE.jar、spring-beans-3.0.3.RELEASE。 jar，spring-context-3.0.3.RELEASE.jar，spring-core-3.0.3.RELEASE.jar，spring-expression-3.0.3.RELEASE.jar，spring-hibernate3-2.0.8.jar，spring- web-3.0.3.RELEASE.jar & spring-webmvc-3.0.3.RELEASE.jar

这是我的 servlet-context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <context:component-scan base-package="com.foo.controller" />

</beans:beans> 
```

请帮忙……真的很烦人。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T13:47:23.553

您的 XML 很好，但根据[有关 Spring MVC 3 的 SpringSource 博客文章的评论](http://blog.springsource.org/2010/07/22/spring-mvc-3-showcase/#comment-174486)

> `<mvc:resources/>`标签是 Spring Framework 3.0.4 中的一个新特性

您的应用程序使用 Spring 3.0.3，因此您需要升级到 3.0.4 或更高版本才能使用资源标签。

# php - 使用 mysql_real_escape_string 后在 textarea 中显示多行

> ID：13645797
> 
> 赞同：0
> 
> 时间：2012-11-30T13:00:22.020
> 
> 标签：php, html, mysql, mysql-real-escape-string

我试图通过在将数据插入数据库之前使用 mysql_real_escape_string 来防止 sql 注入：

```
$data=mysql_real_escape_string($_POST['data']); 
```

现在，数据是这样存储的：

```
That\\\'s an apostrophe.\r\n\r\nThis new line isn\\\'t displaying properly! 
```

所以，我试图让它在将它从 mysql 中拉出后在 textarea 内正确显示：

```
$data = nl2br($data); 
```

无论出于何种原因，这都不起作用。我什至尝试`str_replace`将`\r\n'`s 替换为 a `<br>`，但随后`<br>`仅显示在 textarea 中。

如何让我的 mysql 中的内容显示为：

```
That's an apostrophe.

This new line isn't displaying properly! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-03T22:56:20.873

最佳解决方案..

`$data= mysql_real_escape_string($_POST['data']);`（如果需要，可以将其插入数据库）

`echo stripslashes(str_replace('\r\n',PHP_EOL,$data));`（输出与您的输入完全相同）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T13:02:55.213

实际上使用`mysql_real_escape_string`并不能完全保护您免受`SQL Injection`攻击。

*   *请参阅此处的* [SQL 注入，它绕过 mysql_real_escape_string()](https://stackoverflow.com/questions/5741187/sql-injection-that-gets-around-mysql-real-escape-string/5741264#5741264)

最好的方法是使用`PDO`or `MySQLi`。

*   *请参阅此处* [防止 SQL 注入的最佳方法？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T13:13:45.517

你可能打开了magic_quotes，用
echo get_magic_quotes_gpc() 检查它，否则你会加双引号

"为 GPC (Get/Post/Cookie) 操作设置 magic_quotes 状态。当 magic_quotes 开启时，所有 '（单引号）、"（双引号）、\（反斜杠）和 NUL 都会自动用反斜杠转义。"

顺便说一句，使用magic_quotes 不是一个好主意，请尝试使用其中一个类。

PDO [http://br2.php.net/manual/en/book.pdo.php](http://br2.php.net/manual/en/book.pdo.php) 或 mysqli [http://br2.php.net/manual/en/book.mysqli.php](http://br2.php.net/manual/en/book.mysqli.php)

# jquery - 如何记住 jqrid 高级搜索对话框的大小和在本地存储中的位置

> ID：13645798
> 
> 赞同：1
> 
> 时间：2012-11-30T13:00:26.833
> 
> 标签：jquery, jquery-ui, jqgrid

jqgrid 高级搜索对话框窗口的大小和位置可以通过鼠标更改。

这些更改不会被记住。下次打开，显示默认大小和位置。

如何保存和恢复它，可能使用本地存储。在重新搜索之前，还应检查如果屏幕分辨率或大小发生变化，搜索对话框的一部分是否可见。

**更新**

我也尝试使用下面的代码扩展 Oleg 答案以保存/恢复窗口位置。搜索窗口恢复到与最初不同的位置。看起来使用下面的代码检索的 left 和 top 值是错误的。如何恢复位置呢？

```
var oldJqDnRstop, searchParams = { width: 550, left: 5, top: 5 };
if ($.jqDnR) {
    oldJqDnRstop = $.jqDnR.stop; // save original function
    $.jqDnR.stop = function (e) {
        var $dialog = $(e.target).parent(), dialogId = $dialog.attr("id");
        oldJqDnRstop.call(this, e); // call original function
        if (typeof dialogId === "string" && dialogId.substr(0, 14) === "searchmodfbox_") {
            // save the dialog position here
            // we save "width" option as the property of searchParams object
            // used as parameter of navGrid
            searchParams.width = $dialog.width();
            searchParams.left  = $dialog.offset().left;
            searchParams.top  = $dialog.offset().top;
            saveWindowState();
        }
    };
} 
```

**更新2**

在 Oleg 演示中，对话框标题可以移动到浏览器窗口之外。之后对话框不再可移动。如何解决这个问题？

![在此处输入图像描述](../Images/30f601cfdcdc82f238b3cdd7c28334d2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:52:05.210

我觉得你的问题很有趣。因此，您将在下面找到一个可能的实现。

可以将您的问题分为两部分：1）在多次打开期间保存搜索对话框的宽度以防使用`recreateFilter: true`2）保存`localStorage`.

如果您已经使用，第二部分相对容易`localStorage`。您只需使用一个附加参数扩展已保存的状态。确切的实现在某种程度上取决于如何`localStorage`实现储蓄。在[答案](https://stackoverflow.com/a/8436273/315935)中，我展示了如何使用`getItem`和`setItem`方法`window.localStorage`来实现保存在`localStorage`. 或者，如果您需要另外支持 IE6/IE7 等旧 Web 浏览器，则可以使用非常实用的[jStorage 。](http://www.jstorage.info/)

所以我在下面解释如何在多次打开的情况下保存搜索对话框的宽度以备不时之需`recreateFilter: true`。

我建议“子类化”该方法`$.jqDnR.stop`，因为没有回调将在对话框调整大小结束时使用。相应的代码可能如下所示

```
var oldJqDnRstop, searchParams = { width: 450 };

if ($.jqDnR) {
    oldJqDnRstop = $.jqDnR.stop; // save original function
    $.jqDnR.stop = function (e) {
        var $dialog = $(e.target).parent(), dialogId = $dialog.attr("id");
        oldJqDnRstop.call(this, e); // call original function
        if (typeof dialogId === "string" && dialogId.substr(0,14) === "searchmodfbox_") {
            // save the dialog position here
            // we save "width" option as the property of searchParams object
            // used as parameter of navGrid
            searchParams.width = $dialog.width();
        }
    };
}

// create the grid
$grid.jqGrid({
    ....
});

// create navigator with "Search" button where searchParams object
// will be used as parameter
$grid.jqGrid("navGrid", "#pager", {add: false, edit: false, del: false},
    {}, {}, {}, searchParams); 
```

[您可以在此处](http://www.ok-soft-gmbh.com/jqGrid/SaveDialogPosition.htm)查看相应的演示。

**更新**：要保存搜索对话框的位置和宽度，需要将新实现的代码扩展`$.jqDnR.stop`到以下

```
$.jqDnR.stop = function (e) {
    var $dialog = $(e.target).parent(), dialogId = $dialog.attr("id"), position;
    oldJqDnRstop.call(this, e); // call original function
    if (typeof dialogId === "string" && dialogId.substr(0,14) === "searchmodfbox_") {
        // save the dialog position here
        searchParams.width = $dialog.width();
        position = $dialog.position();
        searchParams.left = position.left;
        searchParams.top = position.top;
    }
}; 
```

在上面的代码中，`left`和`top`选项将被额外保存。修改后的演示在[这里](http://www.ok-soft-gmbh.com/jqGrid/SaveDialogWidthWithPosition.htm)。

# javascript - 如何构建 Ember Web 应用程序

> ID：13645804
> 
> 赞同：0
> 
> 时间：2012-11-30T13:00:40.517
> 
> 标签：javascript, web, ember.js

我正在使用 Ember 开发我的第一个应用程序，并且很想知道构建我的应用程序的最佳方式。

目前我只有一个页面包含我页面的所有不同部分。有没有办法拆分索引页面并从其他地方异步加载内容？我会更喜欢这个，因为我的索引页面太长了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:20:13.400

我会问你的应用程序有多复杂

如果您可以从包含视图/控制器/路由器的单个文件开始，它可以帮助您在最初的几天/几周内了解框架。如果您发现您的单个 js 文件增长 > 100 多行（或任何数字让您觉得是时候分解它），您可以创建一个文件夹

> ```
> /templates => handlebars templates here (pre compiled if possible)
> /views => just the view javascript objects
> /controllers => array controllers or object controllers
> /models => ember-data or regular JS objects that do the heavy lifting
> /routers => in the future you may have > 1 router per ember.js app 
> ```

一旦达到这种复杂程度，您可能会查看 require.js 来管理您的依赖项/等

# java - SOAPMessage countAttachments API 内存不足

> ID：13645811
> 
> 赞同：0
> 
> 时间：2012-11-30T13:01:06.617
> 
> 标签：java, web-services, soap, out-of-memory

SOAP 消息由 HttpServletRequest 的输入流和 API 构建而成

```
SOAPMessage message = messageFactory.createMessage(soapHeader, 
                           request.getInputStream()); 
```

当分配给进程的最大内存为 -Xmx1024m 并且当进程的内存快照显示为 100m 时，以下调用

```
message.countAttachments() 
```

抛出内存异常

平台：Windows 7 64bit，Java JDK1.6 update 25

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:46:41.793

消息对象是 instanceof

```
com.sun.xml.internal.messaging.saaj.soap.ver1_1.Message1_1Impl 
```

该对象由

```
com.sun.xml.internal.messaging.saaj.soap.ver1_1.SOAPMessageFactory1_1Impl 
```

将消息工厂转移到

```
org.apache.axis.soap.MessageFactoryImpl 
```

解决了它。

# jsf - Richfaces / JSF 中基于 AspectJ 的日志记录和分析

> ID：13645816
> 
> 赞同：0
> 
> 时间：2012-11-30T13:01:28.987
> 
> 标签：jsf, richfaces, aop, aspectj

我正在尝试使用 AOP 和 Aspect J 为基于 Richfaces 的 JSF 应用程序创建一个记录器/分析器。
我对此几乎没有任何疑问。
1.有可能吗？
2\. 我会遇到 AOP 代理问题还是必须创建自定义代理？
3\. 有人用过 JBoss - AOP 吗？它会是 JSF 的更好选择吗？

谢谢！SKR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-18T17:12:31.733

您正在寻找单个用例，而我正在处理多个案例，特别是为了减少我最新项目的源代码库......我在 Java 世界中以面向方面编程 -> AspectJ 的形式发现了闪亮的东西。

你可以在这里找到非常好的文章：[http ://www.yegor256.com/2014/06/01/aop-aspectj-java-method-logging.html](http://www.yegor256.com/2014/06/01/aop-aspectj-java-method-logging.html)

您可以使用自定义注释来实现该行为，或者只是将其硬链接到您的应用程序中，因此您无需在代码中指定任何内容，并且每个事件都将使用特定行为自动记录（记录有/没有数据等）。

另一个很好的例子是：[http ://www.baeldung.com/spring-performance-logging](http://www.baeldung.com/spring-performance-logging)

只需添加，就像您记录事件一样，您可以在错误处理程序的情况下创建 AspectJ 自动记录。

不仅如此，您还可以在整个应用程序中以完全通用的方式处理所有错误，而不是在错误/事件处理程序中编写简单的代码行......

注意：不要重新发明轮子，所以请看这里，因为其他人收集了有用的 AOP，以便在您的项目中重用 :-)) 开源是一个很棒的社区：[https ://github.com/jcabi/jcabi-aspects](https://github.com/jcabi/jcabi-aspects)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:54:33.410

对的，这是可能的！[您可以在此处](http://jsf-tying-it-all-together.blogspot.com/2012/02/aop-aspect-oriented-programming.html)找到详细信息。

感谢和快乐编码！

# java - 试图让我的 ListView 多选，但我无法让它工作

> ID：13645817
> 
> 赞同：2
> 
> 时间：2012-11-30T13:01:36.103
> 
> 标签：java, android, android-layout, android-listview

我已经坚持了一段时间。我希望用户能够从列表中选择一个项目（只需点击该项目，没有复选框）并让它亮起或其他东西，因此很明显它已被选中。用户可以随心所欲地选择，最后他们可以点击“完成”来完成他们的选择。

我该怎么做呢？我有一个自定义适配器和行布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:08:21.097

创建一个哈希图或其他东西来帮助您计算列表中选择的项目：

```
HashMap<Integer, Boolean> selectedItems = new HashMap<Integer, Boolean>(); 
```

在您的适配器的 getView 方法中

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater inflater = (LayoutInflater) ctx
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = inflater.inflate(R.layout.your_custom_item, null);
        }

        if(selectedItems.get(position))
            v.setBackgroundColor("YOURSELECTEDCOLOR");
        else v.setBackgroundColor("YOURUNSELECTEDCOLOR");

        return v;
    } 
```

你当然应该在ItemClickListener上设置你的hashmap项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:24:33.107

在这里，您需要一个布尔类型的数组，其大小等于 **ListView**适配器列表的大小，然后只需添加**ListView的****onItemClick**侦听器，并在选择项目时只需切换列表中的布尔变量，现在当用户完成选择时只需遍历所选项目的列表即可：)

 **当用户单击它们时，还切换列表项的背景（选择或未选择状态）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T13:29:56.767

将 ListView 的 setChoiceMode 方法设置为 MULTI_SELECT。**

# c# - 调试非托管 dll

> ID：13645818
> 
> 赞同：0
> 
> 时间：2012-11-30T13:01:43.757
> 
> 标签：c#, dll, windows-ce, debug-symbols

我有两个项目的解决方案：

项目 A：是一个用 C++ 编写的 dll

项目B：是一个调用项目A的dll的C#应用程序

我的问题：我无法在 DLL 代码中设置任何断点。断点附有一条消息，说“没有为此文档加载任何符号”。

笔记：

*   我的问题是针对 Windows CE 6.0

*   我正在将带有构建后事件的 dll 及其 .pdb 文件复制到 C# 应用程序的调试执行目录到设备中。

请提供任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:59:06.470

在我提出这个问题后，我发现这篇文章回答了我的问题。

[在 Windows CE 的托管 C# 代码中将本机 DLL 作为调试模块加载](https://stackoverflow.com/questions/1112827/loading-native-dll-as-debug-module-in-managed-c-sharp-code-for-windows-ce?rq=1)

# jquery - 在jquery中隐藏父母的同行

> ID：13645819
> 
> 赞同：1
> 
> 时间：2012-11-30T13:01:44.903
> 
> 标签：jquery

我正在尝试在我的页面上显示/隐藏内容功能：

```
<div>
    <div class="t">             
        <h2><a href="#" class="sh" id="t1">-</a> Title 1</h2>
    </div>

    <section class="title1 title">
        <div class="cat">
            <p>Category 1<span>This is the first category</p>
        </div>

        <div class="cat">
            <p>Category 2<span>This is the second category</p>
        </div>

        <div class="cat">
            <p>Category 3<span>This is the third category</p>
        </div>
    </section>
</div> 
```

我想我一直很简单。基本上，对于每个部分，都会重复此标记。当您单击链接时，jquery 应该显示/隐藏`section`与链接的容器 div 处于对等级别的链接。

这就是我所拥有的。它不会产生任何错误，但也不会隐藏这些部分。但是，它确实会更改链接的文本：

```
$(".sh").click(function() {
    var show = ($(this).text() === "+");

    if (show) {
        $(this).parent("div").each("section", function() {$(this).fadeIn(500)});
    }
    else
    {
        $(this).parent("div").each("section", function() {$(this).fadeOut(500)});
    }
    $(this).text(show ? "-" : "+");
}); 
```

我想我可能在这里遗漏了一些基本重要的东西，所以如果有人能帮我找出我做错了什么，我们将不胜感激。

蒂亚:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T13:08:14.427

不知道你为什么要使用`.each()`，这样的东西应该可以工作：

```
$(".sh").click(function() {
    var show = ($(this).text() === "+");

    if (show) {
        $(this).parents("div").siblings("section").fadeIn(500);
    }
    else
    {
        $(this).parents("div").siblings("section").fadeOut(500);
    }
    $(this).text(show ? "-" : "+");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:19:31.780

如果您想隐藏对等点，您可以使用`siblings()`它们来识别它们：

```
$('.sh').click(function() {
    var show = ($(this).text() === "+");
     if (show) {
        $(this).parents("div").siblings("section").fadeIn(500);
    } else {
        $(this).parents("div").siblings("section").fadeOut(500);
    }
    $(this).text(show ? "-" : "+");
}); 
```

[http://jsfiddle.net/RvHhd/](http://jsfiddle.net/RvHhd/)

# node.js - 我可以在 CoffeeScript 中编写 npm 包吗？

> ID：13645824
> 
> 赞同：68
> 
> 时间：2012-11-30T13:01:59.607
> 
> 标签：node.js, coffeescript, npm

我使用 CoffeeScript 已经有一段时间了。现在我需要写一个npm包，我可以用CoffeeScript写，还是应该把CoffeeScript编译成JavaScript？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-11-30T13:35:59.570

我将建议你用 coffeescript 编写你的包，但只用 javascript 发布它。我这样做：

*   咖啡脚本代码进入`src`
*   代码编译为`lib`
*   `src`致力于我的 git repo，`lib`在我的`.gitignore`
*   `lib`发布到 npm，`src`在我的`.npmignore`
*   `coffee-script`包裹在我的`devDependencies`

你可以看看我的一个简单的包[refix](https://github.com/linus/refix)，以获得灵感：

*   [https://github.com/linus/refix](https://github.com/linus/refix)
*   `npm install refix`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-30T22:35:40.913

您可以在 coffeescript 中编写 NPM 模块，但为了让 JS 用户可以使用它们，必须在发布到 NPM 之前将它们编译为 JS。

`package.json``prepublish`他们的脚本挂钩使这很容易，该挂钩在您发布之前运行指定的脚本。下面是`prepublish`zombie.js 中 NPM 钩子的示例

[https://github.com/assaf/zombie/blob/master/package.json#L16](https://github.com/assaf/zombie/blob/master/package.json#L16)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-11T17:25:02.373

如果您的很多模块都`coffee-script`在它们`devDependencies`的`coffee-script`.

[coffee-build](https://github.com/aleclarson/coffee-build)是一个全球版本管理器`coffee-script`。

只需将这两个脚本添加到您的`package.json`：

```
{
  "name": "my-coffee-module",
  "scripts": {
    "build": "coffee-build -v 1.11.x -b -o js src",
    "postinstall": "npm run build"
  }
} 
```

注意 how`-v 1.11.x`不是一个精确的版本，它允许隐式升级。

唯一的缺点是用户必须`npm install -g coffee-build`在安装您的模块之前。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T13:07:03.043

我从头开始用 CoffeeScript 编写 npm 包。我鼓励您将 CoffeScript 用于节点和浏览器。但是，在您可以使用或发布您的模块之前，您必须将源 CoffeeScript 编译为 JavaScript。不过，这不应该阻止您使用 CoffeeScript。

提示：在开发过程中，使用`coffee -cw yourfile.coffee`（命令行）查看文件的更改并在保存时编译。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-07T06:39:21.537

虽然我不确定这是否是最好的方法，但从技术上讲，*您*可以主要使用 CoffeeScript 编写您的包。

`coffee`基本上，您可以编写一个简单地包装命令的 JS 文件，如下所示：

**bin/howl.coffee**

```
console.log 'Awwwooooo!' 
```

**bin/howl.js**

```
#!/usr/bin/env node

var path    = require('path');
var exec    = require('child_process').exec;
var coffee  = path.resolve(__dirname, '../node_modules/coffee-script/bin/coffee');
var howl    = path.resolve(__dirname, './howl.coffee');
var command = coffee + ' ' + howl;

exec(command, function(error, stdout) {
  if (error) { throw error };
  console.log(stdout);
}); 
```

运行`node howl.js`（或仅`howl`在全局安装时）现在将输出`Awwooooo!`. 您可以像`require`其他 CoffeeScript 文件一样执行操作，并通过将它们从 JavaScript“包装器”传递给 CoffeeScript 来访问参数。

无论如何，可能有理由不这样做，但到目前为止它对我有用，所以我想我会提交这个以获得额外的视角。

有关使用此技术的简单示例项目，请查看[https://www.github.com/joshuabc/packdown](https://www.github.com/joshuabc/packdown)。

# rangeslider - Rickshaw.Graph.RangeSlider TypeError: $(element).slider 不是函数

> ID：13645833
> 
> 赞同：2
> 
> 时间：2012-11-30T13:02:46.090
> 
> 标签：rangeslider, rickshaw

我有这个错误： *TypeError: $(element).slider is not a function*

使用以下脚本：

```
Rickshaw.namespace('Rickshaw.Graph.RangeSlider');

Rickshaw.Graph.RangeSlider = function(args) {

var element = this.element = args.element;
var graph = this.graph = args.graph;

$( function() {
    $(element).slider( {

        range: true,
        min: graph.dataDomain()[0],
        max: graph.dataDomain()[1],
        values: [ 
            graph.dataDomain()[0],
            graph.dataDomain()[1]
        ],
        slide: function( event, ui ) {

            graph.window.xMin = ui.values[0];
            graph.window.xMax = ui.values[1];
            graph.update();

            // if we're at an extreme, stick there
            if (graph.dataDomain()[0] == ui.values[0]) {
                graph.window.xMin = undefined;
            }
            if (graph.dataDomain()[1] == ui.values[1]) {
                graph.window.xMax = undefined;
            }
        }
    } );
} );

$(element)[0].style.width = graph.width + 'px';

graph.onUpdate( function() {

    var values = $(element).slider('option', 'values');

    $(element).slider('option', 'min', graph.dataDomain()[0]);
    $(element).slider('option', 'max', graph.dataDomain()[1]);

    if (graph.window.xMin == undefined) {
        values[0] = graph.dataDomain()[0];
    }
    if (graph.window.xMax == undefined) {
        values[1] = graph.dataDomain()[1];
    }

    $(element).slider('option', 'values', values);

} );
}; 
```

从以下页面： [https ://github.com/shutterstock/rickshaw/blob/master/src/js/Rickshaw.Graph.RangeSlider.js](https://github.com/shutterstock/rickshaw/blob/master/src/js/Rickshaw.Graph.RangeSlider.js)

javascript 调试器向我展示了这一行：*slide: function( event, ui) {*

你能告诉我一个解决我的问题的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T14:52:47.210

您应该在使用滑块之前导入 jqueryui。

```
http://jqueryui.com/slider/ 
```

# asp.net - Umbraco 富文本升级到 4.11 后不保存

> ID：13645835
> 
> 赞同：2
> 
> 时间：2012-11-30T13:02:54.557
> 
> 标签：asp.net, tinymce, umbraco, uriencoding

我从 Umbraco 4.10 升级到 4.11，现在当我保存文档时，除了删除所有内容的富文本字段外，所有字段都被保存。我在富文本编辑器中输入的任何内容在保存后都会丢失。
我之前在使用其他编辑器时也遇到过类似的问题，这些问题是由 html 元素引起的，可以通过 uri 编码解决，但我在使用 Umbraco 和 TinyMce 时从未遇到过这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:41:21.290

Umbraco 发布了一个名为 4.11.1 的 4.11 补丁，可以在[此处](http://umbraco.codeplex.com/releases/view/98167)下载。所以我会升级到这个，尽管根据文档他们没有修复任何可能影响你问题的东西。我还会检查您是否复制了 4.10 所需的所有升级文件，包括 config/tinyMceConfig.config 文件。有关所需文件/文件夹的列表，请参见[此处](http://umbraco.codeplex.com/releases/view/91737)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:48:47.327

这是我在 TinyMce 中进行的一些自定义的问题，这些自定义在 4.10 之前运行良好，但在 4.11 中无法运行。我不知道他们为什么选择使用 TinyMce，CKEditor 更好。

# ruby-on-rails - 为什么在 Rails3.2.9 中不调用 validate 函数？

> ID：13645839
> 
> 赞同：1
> 
> 时间：2012-11-30T13:03:01.840
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

代码如下：

```
class Seat < ActiveRecord::Base
  attr_accessible :baggage, :flight_id, :name
  def validate(record)
    errors.add_to_base("You have too much baggage")
  end
end 
```

我希望每当将新记录写入数据库时​​它都会引发错误。

但是，当新记录写入`seats`数据库时​​，什么也没发生`@seat.save`

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T13:19:54.183

`validate(record)`看起来很奇怪。你应该试试

```
class Seat < ActiveRecord::Base
  attr_accessible :baggage, :flight_id, :name
  validate :valid_baggage

  def valid_baggage
    errors.add_to_base("You have too much baggage")
  end
end 
```

另请注意，您需要调用`@seat.save!`（而不是`@seat.save`）才能获得异常。 `@seat.save`只会返回 true 或 false ...但这通常是您想要的，因此请考虑您是否真的要引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:18:21.653

[只有在实现自定义验证器](http://guides.rubyonrails.org/active_record_validations_callbacks.html#validates_with)时才需要记录参数，否则该方法已经知道它正在验证哪个记录（自身）。

# ios6 - 字典查询？

> ID：13645840
> 
> 赞同：0
> 
> 时间：2012-11-30T13:03:02.070
> 
> 标签：ios6, xcode4.5

我正在使用以下代码检查存储在名为“myDict”的字典文件中的值 1 或 0。在“block003stored”位置的值为 1，在所有其他位置为 0。如果我使用以下代码，我总是会为所有位置返回 0：

```
for (int i = 1 ; i < 100 ; i++) {
    if(myDict)
    {
    UIImageView *imageV = (UIImageView *)[self.view viewWithTag:i];
    int myInt = [[myDict objectForKey:@"block%.3istored"] intValue];
        NSLog (@"value of i %d", i);
        NSLog (@"myInt %d", myInt);
    if (myInt == 1) imageV.hidden = FALSE;
    }
} 
```

}

但是，如果我将 objectForKey 更改为专门的 @"block003stored"：

```
 int myInt = [[myDict objectForKey:@"block003stored"] intValue]; 
```

我得到了 1 返回的正确值。当我使用 %.3i 而不是 001、002、003 等时，我看不出为什么代码不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:07:30.877

循环中的代码使用 @"block%.3istored" 作为文字字符串。您编写的内容中没有任何内容可以使用`i`变量格式化字符串。将 NSString`stringWithFormat:`视为动态构建密钥的一种方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T21:04:27.010

在单独的行中尝试：

```
NSString *indexStr = [NSString stringWithFormat:@"block%.3dstored", i]; Then use the objectForKey:indexStr]; 
```

您要求字典使用“block%.3istored”键获取对象，该键不存在。您需要应用格式才能让 i 进入。

# netty - channel.write（对象消息）中的 NPE

> ID：13645844
> 
> 赞同：1
> 
> 时间：2012-11-30T13:03:38.447
> 
> 标签：netty

我正在运行一个基于netty（3.2.5.Final.jar）的（自制）中间件“服务连接器（SC）”，它基本上是http流量的代理。任何传入的请求都被转发到一个远程节点，最后是一个 apache。

```
public void messageReceived(ChannelHandlerContext ctx, MessageEvent event) throws Exception {
        ChannelBuffer msg = (ChannelBuffer) event.getMessage();
        outboundChannel.write(msg);
} 
```

我通过浏览器向 SC 发送请求，例如：“http://localhost:9104/testHtml.htm”

它通常完美无缺！有时浏览器会永远循环。不同的模式（不同的文件、大小、时间）

查看 netty 日志：

```
2012-11-28 17:54:12.326+0100 [New I/O server boss #9 ([id: 0x015bdc50, /10.43.18.160:9104])] DEBUG (org.jboss.netty.handler.logging.LoggingHandler:39) - [id: 0x00f6fd54, /10.43.18.160:52499 => /10.43.18.160:9104] OPEN
2012-11-28 17:54:12.342+0100 [New I/O server boss #9 ([id: 0x015bdc50, /10.43.18.160:9104])] DEBUG (org.jboss.netty.handler.logging.LoggingHandler:39) - [id: 0x00f6fd54, /10.43.18.160:52499 => /10.43.18.160:9104] BOUND: /10.43.18.160:9104
2012-11-28 17:54:12.357+0100 [New I/O server boss #9 ([id: 0x015bdc50, /10.43.18.160:9104])] DEBUG (org.jboss.netty.handler.logging.LoggingHandler:39) - [id: 0x00f6fd54, /10.43.18.160:52499 => /10.43.18.160:9104] CONNECTED: /10.43.18.160:52499
2012-11-28 17:54:12.342+0100 [SC_WORKER thread-13] DEBUG (org.jboss.netty.handler.logging.LoggingHandler:39) - [id: 0x00f6fd54, /10.43.18.160:52499 => /10.43.18.160:9104] CHANGE_INTEREST: 0
2012-11-28 17:54:12.420+0100 [New I/O server worker #9-20] DEBUG (org.jboss.netty.handler.logging.LoggingHandler:39) - [id: 0x00f6fd54, /10.43.18.160:52499 => /10.43.18.160:9104] RECEIVED: BigEndianHeapChannelBuffer(ridx=0, widx=501, cap=501) - (HEXDUMP: ....)
2012-11-28 17:54:12.435+0100 [SC_WORKER thread-13] DEBUG (org.jboss.netty.handler.logging.LoggingHandler:39) - [id: 0x00f6fd54, /10.43.18.160:52499 => /10.43.18.160:9104] INTEREST_CHANGED
2012-11-28 17:54:12.451+0100 [SC_WORKER thread-11] DEBUG (org.jboss.netty.handler.logging.LoggingHandler:43) - [id: 0x00f6fd54, /10.43.18.160:52499 => /10.43.18.160:9104] EXCEPTION: java.lang.NullPointerException
java.lang.NullPointerException
    at org.serviceconnector.net.res.netty.tcp.proxy.NettyTcpProxyResponderRequestHandler.messageReceived(NettyTcpProxyResponderRequestHandler.java:127)
    at org.jboss.netty.handler.execution.ChannelEventRunnable.run(ChannelEventRunnable.java:69)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

在调试模式下，我可以看到 msg 和 outboundChannel 都为空：/ 如果我将代码更改为以下代码，它可以工作。

万一出现错误，只需再次写入消息

```
try{
  outboundChannel.write(msg);
} catch(Throwable t) {
  outboundChannel.write(msg);
} 
```

或减慢线程

```
Thread.sleep(200);
outboundChannel.write(msg); 
```

猜我正面临着比赛条件。它只发生在慢速机器上，当然它很难重现，unfor。我无法提供一个例子。

我以相同的行为尝试了 netty 3.5.10.Final。有人观察到类似的行为吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T05:39:48.273

`outboundChannel`只能是`null`if`messageReceived`之前调用过`channelOpen`。通常，它永远不会发生，但如果您的管道有一个`ExecutionHandler`before 您的处理程序并且您使用的是无序的执行程序服务，它可能会发生。如果是这样，请使用`ExecutorService`诸如`OrderedMemoryAwareThreadPoolExecutor`。

# javascript - 将 KineticJS 形状保留在画布内

> ID：13645845
> 
> 赞同：0
> 
> 时间：2012-11-30T13:03:52.170
> 
> 标签：javascript, canvas, draggable, kineticjs, shapes

使用 KineticJS 的拖放功能时，是否有一种简单的方法可以确保您的形状留在画布内？

标准，形状离开画布一点，直到你的鼠标碰到画布边框。我希望它是形状边框，而不是鼠标。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T07:28:00.493

[KineticJS 教程](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-bounds-tutorial-with-kineticjs/)`dragBoundFunc`中解释的使用

这是一个[JS 小提琴](http://jsfiddle.net/jjR55/3/)

和代码：

```
dragBoundFunc: function(pos) {
    console.log(bbox.getWidth());
    var xBound = stage.getWidth() - bbox.getWidth();
    var yBound = stage.getHeight() - bbox.getHeight();

    // Check X boundries
    if (pos.x > xBound) {
        var newX = xBound;
    } else if (pos.x <= 0) {
        var newX = 0;
    } else {
        var newX = pos.x;
    }

    // Check Y boundries
    if (pos.y > yBound) {
        var newY = yBound;
    } else if (pos.y <= 0) {
        var newY = 0;
    } else {
        var newY = pos.y;
    }

    return {
        x: newX,
        y: newY
    };
} 
```

# qt - Qt 使用线程池，无法在 readyRead() 中一次接收所有数据

> ID：13645848
> 
> 赞同：0
> 
> 时间：2012-11-30T13:04:11.307
> 
> 标签：qt, sockets, qtcpserver

我是 QT 和 C++ 的新手，我正在尝试使用 QThreadpools 创建一个 QTcpserver，以便它可以处理多个客户端。多个客户端可以毫无问题地连接。但我正在尝试从安卓手机发送一张带有页脚“IMGPNG”的图像，表示图像数据的结束。现在发出readyRead信号时的问题我正在尝试读取所有可用数据，然后稍后执行一些字符串操作并重建图像。我不确定如何接收每个客户的完整图像，然后进行相应的处理。

```
 void VireClients::readyRead()//read ready
{

 int nsize = socket->bytesAvailable();//trying to check the available bytes

 qDebug()<< "Bytes Available" << nsize;

 while(socket->bytesAvailable() < nsize){

     QByteArray data = socket->readAll();//how to receive all the data and then process it

 }

   /*!These lines call the threadpool instance and reimplement run*/
   imageAnalysis = new VireImageAnalysis(); //creating a new instance of the QRunnable
   imageAnalysis->setAutoDelete(true);
      connect(imageAnalysis,SIGNAL(ImageAnalysisResult(int)),this,SLOT(TaskResult(int)),Qt::QueuedConnection);
   QThreadPool::globalInstance()->start(imageAnalysis);

} 
```

现在我不确定如何完全获取数据或将接收到的数据保存为图像格式。我想知道如何完全接收图像数据。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T13:32:37.427

调用`readAll()`不会总是读取完整的图像，因为它显然无法知道图像的大小。它只会读取所有当前可用的字节，这些字节可能小于您的整个文件，或者如果发件人速度非常快并且您无法赶上阅读，则更多。同样的方式`readyRead()`只会通知您有可用的字节，但不会通知您已收到整个文件。它可能是一个字节或数百个字节。

要么您首先知道图像的大小，因为它始终是固定的，要么发送者必须告诉接收者他想要发送的字节数。

然后，您可以忽略所有`readyRead()`信号，直到`bytesAvailable()`与您的图像大小匹配，然后调用`readAll()`一次读取整个图像。或者，只要有可用字节，您就读取并填充缓冲区，直到读取的字节数与接收器告诉您他将发送的字节数相匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:04:40.270

通过收集临时变量中的字符串解决了保存图像问题，最后使用 opencv imwrite 保存图像，这解决了这个问题：

```
 while(iBytesAvailable > 0 )
     {
      if(socket->isValid())
      {
       char* pzBuff = new char[iBytesAvailable];
       int iReadBytes = socket->read(pzBuff, iBytesAvailable);
       if( iReadBytes > 0 )
       {
           result1 += iReadBytes;

            str += std::string(reinterpret_cast<char const *>(pzBuff), iReadBytes);

            if(str.size() > 0){
                search = str.find("IMGPNG");

                if(search == result1-6){

                    finalID = QString::fromStdString(str);

                    Singleton_Global *strPtr = Singleton_Global::instance();
                    strPtr->setResult(finalID);

                    /*!Process the received image here*/
                    SaveImage= new VSaveImage();
                    SaveImage->setAutoDelete(false);
                    connect(SaveImage,SIGNAL(SaveImageResult(QString)),this,SLOT(TaskResult(QString)),Qt::QueuedConnection);
                    threadPool->start(SaveImage);

                }
            }

       } 
```

终于在运行方法上保存了图像-> SaveImage，@DavidSchwartz，你帮了大忙，谢谢。感谢你的帮助。

# objective-c - 删除 applicationDidEnterBackground 中的 uialertview

> ID：13645850
> 
> 赞同：0
> 
> 时间：2012-11-30T13:04:18.673
> 
> 标签：objective-c, ios, uialertview

在我的应用程序中，当我按下主页按钮时，我将应用程序弹出到 rootviewcontroller 登录类。现在，在上一节课中，如果出现任何警报视图并且没有关闭它，我按下主页按钮，就会出现问题。下次我点击应用程序图标将其置于前台时，登录屏幕就在那里，但最重要的是，以前的课程警报视图也在那里。如何删除 applicationDidEnterBackground 上的警报视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T13:09:20.387

有一个全局（AppDelegate 属性或单例），您只需将指针存储到显示的最后一个警报视图（并在完成后清除它）。如果指针不为零，则在 DidEnterBackground 或任何地方将其关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T13:22:24.927

你也可以使用 UIApplicationWillResignActiveNotification,UIApplicationWillEnterForegroundNotification 来解决这个问题

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(resignActive)
                                             name:UIApplicationWillResignActiveNotification
                                           object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(enterForeground)
                                             name:UIApplicationWillEnterForegroundNotification
                                           object:nil]; 
```

在 resignActive 方法中，您可以删除警报视图...

# css - IPad safari 浏览器中的输入文本框显示时间新罗马作为字体

> ID：13645851
> 
> 赞同：0
> 
> 时间：2012-11-30T13:04:44.733
> 
> 标签：css, ipad, textinput

我正在做一个网站。在 iPad 中查看该网站总是显示字体 Times New Roman，我猜字体大小为 6 或 7。虽然我从未在我的 css 中提到过这种字体。其余所有标签都按预期以“Segoe UI”字体显示。该网站在桌面浏览器中运行良好，即使我在我的桌面上进行 safari。但对于 iPad，它显示的是 Times New Roman。

我已经尝试过[这个](https://stackoverflow.com/questions/1004475/jquery-css-plugin-that-returns-computed-style-of-element-to-pseudo-clone-that-el)链接的插件，并在警报中看到了输出，它只将 fontFamily 显示为“Segoe UI”，但字体不是那样的。

也试过[这个](https://stackoverflow.com/questions/7391159/safari-is-displaying-times-new-roman-for-all-fonts-in-safari-5-0-x)但不工作。

还尝试在 css 中使用 !important 属性设置内联样式，但相同。

有人可以帮我解决我做错了什么或者我可能会添加/删除什么来纠正行为吗？

[编辑：我在这里](http://jsfiddle.net/rFrpu/)单独尝试的代码至少在我的 iPad 上也没有表现出预期的行为，它肯定不会将 Segoe UI 显示为字体。但在我的桌面浏览器中，它显示 Segoe UI。

```
<input type="text" value="imjgnsdnbf" style="font-family:Segoe UI; font-size:20px;" />​​​​​​​​​​​​​​ 
```

这可能是我的 iPad 特定设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:28:01.133

Segoe UI是windows字体，ipad是苹果产品！

所以你必须在字体中包含类似[font-face的东西](http://www.font-face.com/)

***编辑** 在css中选择一个输入字段

输入[类型=文本]

# spring - Spring + Hibernate + JPA + 2 个数据库。以静默方式坚持无法使用 @Transactional 注释提交

> ID：13645852
> 
> 赞同：1
> 
> 时间：2012-11-30T13:04:47.417
> 
> 标签：spring, hibernate, jpa, spring-mvc, spring-transactions

我的设置是带有两个数据库的 Spring MVC 3.1、Hibernate 4.1。

**我的服务方法似乎适用于读取（对于两个数据库）。但是持久化无法将数据插入到数据库中 - 并且日志中没有任何异常**。查看 hibernate 的 sql 输出，它看起来确实检索了新生成的 id，但从未进行过插入 - 如果这样做，它不会显示在 db 中，也不会在日志文件中记录插入。在数据库中，我可以看到序列号增加了，但没有插入数据。我无法弄清楚我的配置有什么问题。希望有人有想法。

以下是配置文件中的相关部分

```
 <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
    </bean>

    <bean id="mgrFactory"
          class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
          p:dataSource-ref="dataSource">
        <property name="packagesToScan" value="xxx.yyy" />
        <property name="persistenceUnitName" value="puOne"/>
        <property name="persistenceProviderClass" value="org.hibernate.ejb.HibernatePersistence"/>
        </property>
    </bean>

    <tx:annotation-driven mode="aspectj" transaction-manager="txMgr"/>
    <bean id="txMgr"
          class="org.springframework.orm.jpa.JpaTransactionManager"
          p:entityManagerFactory-ref="mgrFactory">
    </bean> 
```

这工作正常。我现在要做的是添加使用另一个数据库的能力。所以我添加了另一个数据源，实体管理器工厂和事务管理器

```
 <bean id="dataSourceTwo" class="org.apache.commons.dbcp.BasicDataSource">
    </bean>

    <bean id="mgrFactoryTwo"
          class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
          p:dataSource-ref="dataSourceTwo">
        <property name="packagesToScan" value="xxx.zzz" />
        <property name="persistenceUnitName" value="puTwo"/>
        <property name="persistenceProviderClass" value="org.hibernate.ejb.HibernatePersistence"/>
        </property>
    </bean>

    <tx:annotation-driven mode="aspectj" transaction-manager="txMgrTwo"/>
    <bean id="txMgrTwo"
          class="org.springframework.orm.jpa.JpaTransactionManager"
          p:entityManagerFactory-ref="mgrFactoryTwo">
    </bean> 
```

我还确保两个各自的基础 DAO 用单元名称注释他们的实体管理器，例如

```
@PersistenceContext(unitName = "puOne")
protected EntityManager entityManager; 
```

我做的最后一件事是在我的服务中的@Transactional 注释中添加事务管理器名称，例如

```
@Override
@Transactional(value="txMgrTwo"  propagation = Propagation.REQUIRED)
public boolean create(User user) {
    userDao.persist(user);
} 
```

# php - 连接到 MySQL DB 时不返回错误消息

> ID：13645857
> 
> 赞同：0
> 
> 时间：2012-11-30T13:05:08.600
> 
> 标签：php, mysql, sql, localhost

我刚刚学会了如何连接到数据库。但是我故意让错误的用户返回错误。但事实并非如此，它一直在向我表明我是有联系的。

```
<?php

$mysql_host = 'localhost';
$mysql_user = 'root';
$mysql_pass = '';

@mysql_connect($mysql_host,$mysql_user,$mysql_pass) or die('Sorry');

echo 'Connected';
?> 
```

在这种情况下，它显示已连接，因为我的数据库中有一个名为 root 的用户，但如果我用其他任何东西替换，它仍然显示已连接而不是抱歉。

由于显然声誉较低，我不允许回答我自己的问题，我被要求等待大约 8 个小时或编辑我的问题并修复它。（我希望你们给我打勾，这样我也可以回答：P开玩笑）

**所以这里是修复：**

当我转到本地主机链接下的用户概述选项卡时，它显示“用户：任何”、“主机：本地主机”、“特权：使用”。我刚刚删除了那个东西。并且单独保留 pma、linux 和 root 的东西。删除了那个额外的用户（不知道它是怎么来的）并解决了问题。

所以基本上对于任何用户来说，它都是连接和授予访问权限。

我不知道我是否可以回答我自己的问题，但既然我想通了，我将其发布，以便在有人需要时帮助他们并且在类似的船上。

对不起，谢谢大家:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:08:38.163

首先，正如其他人所说，您应该不再使用 mysql 库

但就你的问题而言：

```
mysql_connect($mysql_host,$mysql_user,$mysql_pass) or die('Error'.mysql_error()); 
```

此外，“或死”语句不应该真正用于任何会杀死脚本的东西，并且通常你想优雅地“死”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:07:00.593

错误消息被`@`标志抑制。删除它，你会看到消息`die()`

[请不要在新代码中使用 mysql_* 函数。](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-function-in-php)它们不再被维护，并且已经开始[弃用过程。](http://news.php.net/php.internals/53799)看到[红框](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://uk3.php.net/pdo)或[MySQLi](http://uk1.php.net/mysqli) -[本文](http://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。

# java - 仅选择案例对 JDBC 连接的多线程访问

> ID：13645862
> 
> 赞同：0
> 
> 时间：2012-11-30T13:05:29.553
> 
> 标签：java, multithreading, oracle, jdbc, prepared-statement

如果我将相同的连接分配给仅执行 select 语句（无 CRUD）的多个线程，这种情况下线程安全吗？每个线程从同一个连接创建自己的preparedstatement 并执行它。尽管每个线程都运行自己的结果集实例和准备好的语句对象，因此它看起来是线程安全的，但它们仍然使用与数据库的相同连接。我对 Oracle JDBC 驱动程序行为特别感兴趣。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T14:59:25.467

Oracle 文档不禁止多线程访问。相反，他们通过声明“如果多个线程必须共享一个连接，请使用有纪律的开始使用/结束使用协议”来允许它。

我认为这种谨慎可能是由于一个线程插入/更新和提交/回滚而另一个线程也插入/更新自己的数据并发出提交或回滚时出现问题的情况

但是，在原始发布者的情况下，所有线程只发出选择语句......仍然 resultset.next() 将前往数据库以使用相同的 tcp/ip 流检索行到数据库......这是混乱开始的地方...

对于“仅选择”情况，行为未定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T13:25:17.163

我用谷歌搜索了一下，发现了这个：

> “Oracle® 数据库 JDBC 开发人员指南和参考” JDBC 和多线程
> 
> “Oracle JDBC 驱动程序为使用 Java 多线程的应用程序提供全面支持并对其进行了高度优化。对连接的受控串行访问（例如由连接缓存提供的访问）既是必要的，也是值得鼓励的。但是，Oracle 强烈反对共享多个线程之间的数据库连接。避免允许多个线程同时访问一个连接。如果多个线程必须共享一个连接，请使用规范的开始使用/结束使用协议。

还要记住，当您更新数据库时，您需要从更新连接中读取数据以使事务隔离正常工作。

据我所知，从池中获取连接是一个相对便宜的过程。

- 编辑

如果您担心与服务器的连接数，请查看“Oracle 连接管理器”

“Oracle Connection Manager 通过充当连接集中器以跨单个网络连接“汇集”多个客户端数据库会话，使大量用户能够连接到单个服务器。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T13:28:16.953

我相当确定 jdbc 规范要求连接是线程安全的（但不是语句/结果集），所以这将起作用。但是，某些 jdbc 驱动程序实现对于共享连接的效率较低，因此您绝对应该测试您是否获得了不错的性能。如果没有，您可能需要切换到多个连接。

# web-services - 骆驼示例-cxf 未在 ServiceMix 4.4.2 中部署

> ID：13645864
> 
> 赞同：0
> 
> 时间：2012-11-30T13:05:33.857
> 
> 标签：web-services, apache-camel, tomcat6, apache-servicemix

我试图运行从 Camel 网站下载的 camel-example-cxf 示例项目。（下载 apache-camel-2.10.2）

我使用 pom.xml 构建了项目，构建成功。但是，当我尝试在 servicemix (apache-servicemix-4.4.2) 中部署它时，我收到以下错误。

```
karaf@root> ERROR: Bundle org.apache.camel.camel-example-cxf [43] Error starting file:/C:/apache-servicemix-4.4.2/deploy
/camel-example-cxf-2.10.2.jar (org.osgi.framework.BundleException: Unresolved constraint in bundle org.apache.camel.camel-example-cxf [43]: Unable to resolve 43.0: missing requirement [43.0] package; (&(package=org.apache.activemq.broker)(version>=5.7.0)(!(version>=6.0.0))))
org.osgi.framework.BundleException: Unresolved constraint in bundle org.apache.camel.camel-example-cxf [43]: Unable to resolve 43.0: missing requirement [43.0] package; (&(package=org.apache.activemq.broker)(version>=5.7.0)(!(version>=6.0.0)))
        at org.apache.felix.framework.Felix.resolveBundle(Felix.java:3446)
        at org.apache.felix.framework.Felix.startBundle(Felix.java:1734)
        at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1163)
        at org.apache.felix.framework.StartLevelImpl.run(StartLevelImpl.java:264)
        at java.lang.Thread.run(Thread.java:619) 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:43:54.600

Apache ServiceMix 4.4.2 不**支持**Camel 2.10。您需要使用它附带的 Camel 版本，即 Camel 2.8。

Apache ServiceMix 4.5.0 将随 Camel 2.10 和 ActiveMQ 5.7 一起提供。此版本目前正在制作中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:24:57.193

我遇到了同样的问题（但使用了 activemq jar），发现在运行 maven build 时，我使用的版本与 servicemix 不同。您可以使用“exports”命令（在 servicemix 命令行上键入 export）找到 servicemix 使用的 jar 文件的版本，然后您就会知道版本。如果这与您用于 Maven 构建的内容不同，那么您将收到该错误。您有两个选择 1\. 在 servicemix 中安装不同的包（与用于 maven 构建的版本相同） 2\. 更改 pom.xml 以构建 maven 构建。

# hibernate - 休眠 Blob.getBinaryStream

> ID：13645865
> 
> 赞同：3
> 
> 时间：2012-11-30T13:05:34.967
> 
> 标签：hibernate, blob

我正在尝试使用休眠模式获取 blob 流

```
public InputStream getMediaData(MediaEntity media) throws SQLException{
    media = load(media.getID());
    DataBlob blob = media.getData();
    Blob blobData = blob.getData();
    return blobData.getBinaryStream();
} 
```

但是当调用“getBinaryStream”时它会抛出

```
 org.postgresql.util.PSQLException: This connection has been closed.
    at org.postgresql.jdbc2.AbstractJdbc2Connection.checkClosed(AbstractJdbc2Connection.java:714)
    at org.postgresql.jdbc2.AbstractJdbc2Connection.getAutoCommit(AbstractJdbc2Connection.java:680)
    at org.postgresql.fastpath.Fastpath.fastpath(Fastpath.java:74)
    at org.postgresql.fastpath.Fastpath.fastpath(Fastpath.java:114)
    at org.postgresql.fastpath.Fastpath.getInteger(Fastpath.java:126)
    at org.postgresql.largeobject.LargeObject.<init>(LargeObject.java:93)
    at org.postgresql.largeobject.LargeObject.copy(LargeObject.java:98)
    at org.postgresql.jdbc2.AbstractJdbc2BlobClob.getBinaryStream(AbstractJdbc2BlobClob.java:106)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.hibernate.engine.jdbc.SerializableBlobProxy.invoke(SerializableBlobProxy.java:73) 
```

但这不可能是交易问题，它是相同的功能

有任何想法吗？

还是他尝试使用在执行此操作时处于活动状态的连接

```
LobCreator lobCreator = Hibernate.getLobCreator(session);
Blob blob = lobCreator.createBlob(input, media.getLength()); 
```

?

媒体：

```
@Entity
public class MediaEntity {

@Id
@NotNull
@GeneratedValue(strategy = GenerationType.AUTO)
private Long mediaID;

@ManyToOne(cascade = CascadeType.ALL)
DataBlob data;

long length;

public Long getMediaID() {
    return mediaID;
}

public void setMediaID(Long mediaID) {
    this.mediaID = mediaID;
}

public DataBlob getData() {
    return data;
}

public void setData(DataBlob data) {
    this.data = data;
}

public long getLength() {
    return length;
}

public void setLength(long length) {
    this.length = length;
}

 } 
```

数据块：

```
@Entity
public class DataBlob {
@Id
@NotNull
@GeneratedValue(strategy = GenerationType.AUTO)
private Long id;

@Lob
private Blob data;

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

public Blob getData() {
    return data;
}

public void setData(Blob data) {
    this.data = data;
}

} 
```

# html - 浮动：左上的 div 不能正常工作

> ID：13645867
> 
> 赞同：0
> 
> 时间：2012-11-30T13:05:42.843
> 
> 标签：html, css

我正在尝试让一系列 DIV 元素并排放置。但是我遇到了问题

HTML：

```
<div id="comic" class="comic">

        <div class="comic_panel">1</div>
        <div class="comic_panel">2</div>
        <div class="comic_panel">3</div>
        <div class="comic_panel">4</div>
        <div class="comic_panel">5</div>
        <div class="comic_panel">6</div>
        <div class="comic_panel">7</div>
        <div class="comic_panel">8</div>
        <div class="comic_panel">9</div>
        <div class="comic_panel">10</div>
        <div class="comic_panel">11</div>
        <div class="comic_panel">12</div>
        <div class="comic_panel">13</div>
        <div class="comic_panel">14</div>

        </div> 
```

CSS：

```
#comic{
  height: 563px;
  width: 1000px;
  background: black;
  margin: auto;
  color:white;
    position:relative;
  overflow:auto;
}

.comic_panel{

    width:1000px;
    height:563px;
    position:relative;
    float:left;
    background:orange;

} 
```

然而，我得到的结果只是 DIVS 显示在另一个之下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:09:53.953

您的 div 太宽，无法在容器中并排放置。尝试给他们一个宽度`200px`：

```
.comic_panel{

    width:200px;
    height:563px;
    position:relative;
    float:left;
    background:orange;

} 
```

如果要显示滚动条，请`white-space:nowrap;`在容器和`display:inline-block`子项上使用。

这是一个演示：http: [//jsfiddle.net/h2StP/show](http://jsfiddle.net/h2StP/show)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:12:10.163

将CSS更改为以下，

```
.comic_panel{

    width:6%;
    height:563px;
    position:relative;
    float:left;
    background:orange;
border:1px solid red;
} 
```

他们应该并排倒下。

基本上子 div 与 parent 具有相同的宽度，因此它们没有空间并排坐着。

[**演示**](http://jsfiddle.net/refhat/k6RKy/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T13:20:10.633

原因是每个内部 div (.comic_panel) 都使用了父容器 (#comic) 的所有宽度。然后，下一个 div 只能放在前一个的正下方。

如果你调整宽度，你可以得到你的结果。例如，如果您让容器 div 具有任何宽度，您将拥有所有内部 div 并排：http: [//jsfiddle.net/](http://jsfiddle.net/)

```
body {
    width: auto;
    overflow: auto;
    width: 10000px;
}

#comic{
  height: 563px;
  background: black;
  margin: auto;
  color:white;
  overflow: visible;
}

.comic_panel{
    border: 1px solid black;
    width:100px;
    height:63px;
    float:left;
    background:orange;

}​ 
```

要使内部 div 不换行，您需要通过硬编码的宽度 css 属性（如小提琴中所示，但不是最佳方法）或通过 javascript（更好的方法）。

这篇文章使用表格解释了其他方法：[http](http://css-tricks.com/how-to-create-a-horizontally-scrolling-site/) ://css-tricks.com/how-to-create-a-horizo​​ntally-scrolling-site/ 。

顺便说一句，您可能不需要`position: relative`放在那里的东西来达到这种效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T13:24:09.990

将整个内容放入容器 div 中，如下所示：

```
 <div id="container">
        <div id="comic" class="comic">
            <div class="comic_panel">1</div>
            <div class="comic_panel">2</div>
            <div class="comic_panel">3</div>
            <div class="comic_panel">4</div>
            <div class="comic_panel">5</div>
            <div class="comic_panel">6</div>
            <div class="comic_panel">7</div>
            <div class="comic_panel">8</div>
            <div class="comic_panel">9</div>
            <div class="comic_panel">10</div>
            <div class="comic_panel">11</div>
            <div class="comic_panel">12</div>
            <div class="comic_panel">13</div>
            <div class="comic_panel">14</div>
        </div>
    </div> 
```

容器 div 的大小应该与之前的“comic”div 大小相同：

```
#container {
    height: 563px;
    width: 1000px;
    overflow: auto;
} 
```

你的“漫画”div 的宽度应该是 14000。

```
#comic{
  height: 563px;
  width: 14000px;
  background: black;
  margin: auto;
  color:white;
  position:relative;
  overflow:auto;
} 
```

# javascript - 从两个表中选择/排序数据

> ID：13645868
> 
> 赞同：1
> 
> 时间：2012-11-30T13:05:44.513
> 
> 标签：javascript, mysql, sqlite

我有两张表，其中包含两个不同游戏的游戏数据。为了简单起见，假设它们只共享一个名为的列`Timestamp`（特别是它们具有不同数量的列）。我想呈现一个包含两个表中信息的列表，同时按`Timestamp`.

我目前正在做的工作，但我几乎可以打赌有更好的方法来做到这一点。我最关心的是某个时候的性能（移动应用程序）。这是一个代表结构的存根——相信我，我知道这看起来有多可怕。我只是想先让它工作，现在我正在寻找改进。;)

```
var readyA,
    readyB = false;

var dataA, 
    dataB;

function doLoop () {
    setTimeout(renderData, 100);
}

function renderData () {
    if (!readyA || !readyB) {
        doLoop();
        return;
    }

    var dataAll = dataA.concat(dataB);
    dataAll.sort(function (a,b) {
        return a['Timestamp'] <= b['Timestamp'];
    });

    // pass data into a template depending on from which game it is and render it
    // ...
}

// wait for both queries to finish
doLoop();

// select data from game A
myDatabaseClass.query('SELECT ... FROM GameA', function (results) {
    dataA = new Array(results.rows.length);
    for (var i=0; i<results.rows.length; i++) { 
        dataA[i] = results.rows.item(i); 
    }

    readyA = true;
});

// select data from game B
myDatabaseClass.query('SELECT ... FROM GameB', function (results) {
    dataB = new Array(results.rows.length);
    for (var i=0; i<results.rows.length; i++) { 
        dataB[i] = results.rows.item(i); 
    }

    readyB = true;
}); 
```

现在的问题是我是否可以通过某种方式`UNION`或`JOIN`在查询中以某种方式简化这一点。显然，这个`Timeout`结构很糟糕，但是如果查询可以在一个查询中完成（或至少一个事务——数据库类可以处理），它会自动折叠为一个简单的回调函数。

*编辑*：我确实找到了这个（[从两个不同的表和订单中拉出](https://stackoverflow.com/questions/11252621/pull-from-two-different-tables-and-order?rq=1)），但这整个`NULL AS some_column`感觉很脏。真的没有更好的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:28:52.760

查询的结果始终是具有固定列数的单个表，因此所有`SELECT`s 必须具有相同的列数：

```
SELECT a1, a2, a3,   Timestamp FROM GameA
UNION ALL
SELECT b1, b2, NULL, Timestamp FROM GameB
ORDER BY Timestamp 
```

（`UNION ALL`比它更快，`UNION`因为它不会尝试删除重复项。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:33:06.643

你的代码很不错。从像我这样的 SQL 黑客的角度来看，您正在客户端执行 UNION 和 ORDER BY。这没什么不好。你似乎做的几乎是对的。您的“concat”是 UNION 的客户端等价物，而您的“排序”是 ORDER BY 的等价物。

你说`NULL as missing-column`如果你使用服务器端`UNION`操作，构造感觉有点脏。但是，显然要将两个不同的结果集视为相同，以便您可以对它们进行排序，以便您必须以某种方式使它们彼此一致。您`a['Timestamp'] <= b['Timestamp']`在排序函数中的排序标准也是使两个结果集相互一致的方案。它的性能可能比使用 UNION 低。

不要害怕使用`NULL as missing-column`使 UNION 中的两个结果集相互一致。它不脏，也不贵。

请考虑以某种方式限制您的 SELECT 操作，也许是通过一系列时间戳。这将允许您的系统扩展，特别是如果您在用于限制 SELECT 的列上放置索引。

（顺便说一句，你的排序函数有一个错误。排序函数需要返回-1、0或+1，具体取决于第一项小于、等于还是大于第二项。你是返回一个真/假值。这不能正常工作。）

（您将两个查询并行化到同一个 MySQL 实例。这很聪明，但实际上可能是随着游戏规模扩大而重载 MySQL 的公式。请记住，游戏的每个用户都有自己的运行 Javascript 的机器，但它们都分享你的 MySQL。）

# php - 如何在邮件主题中设置变音符号ü

> ID：13645869
> 
> 赞同：11
> 
> 时间：2012-11-30T13:05:50.770
> 
> 标签：php, email, phpmailer, diacritics, subject

我需要生成包含变音符号的德语电子邮件。在电子邮件本身中，这非常有效，但在电子邮件的主题中却不行。我尝试了许多不同的变音字母，它们似乎都可以工作，除了 ü。我还尝试了不同的邮件库（HTMLMimeMail 和 PHPMailer），但它们都失败了：

```
$mail = new htmlMimeMail();
$mail->setTextEncoding("base64");
$mail->setHTMLEncoding("base64");
$mail->setTextCharset("UTF-8");
$mail->setHTMLCharset("UTF-8");
$mail->setHeadCharset("UTF-8");
$mail->setSMTPParams(mailinglist_smtp_host,mailinglist_smtp_port);
$mail->setHtml("test");
$mail->setFrom("test@test.nl");    

$mail->setSubject("The ï, ö, ë, ä, and é work, but when adding the ü it doesn't");

$recipients[] = "me@myhost.nl";    
$mail->send($recipients); 
```

&

```
$mail = new PHPMailer();
$mail->IsMail();
$mail->FromName = 'test';
$mail->From = 'test@test.nl';
$mail->AddAddress("me@myhost.nl");
$mail->Subject = "The ï, ö, ë, ä, and é work, but when adding the ü it doesn't";
$mail->Body = "test";    
$mail->Send(); 
```

谁能帮我找到这个问题的根源和解决方案？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T13:14:44.440

您应该对主题标头进行[quoted-printable](http://en.wikipedia.org/wiki/Quoted-printable)编码。

像这样：

```
$mail->Subject = "=?UTF-8?Q?" . quoted_printable_encode("The ï, ö, ë, ä, and é work, but when adding the ü it doesn't") . "?="; 
```

引用 PHP 中的可打印编码：[http ://www.php.net/manual/en/function.quoted-printable-encode.php](http://www.php.net/manual/en/function.quoted-printable-encode.php)

编辑：`$mail->CharSet = "UTF-8";`完成了工作。

# php - Symfony2：单个控制器的两个表单（如何用提交按钮的名称来区分）

> ID：13645872
> 
> 赞同：2
> 
> 时间：2012-11-30T13:05:57.417
> 
> 标签：php, post, button, symfony

我有两种形式：作者编辑和作者创建。这两种形式在单个控制器中进行管理。每个表单都有一个提交按钮，并且这些按钮的名称不一样。

我如何在我的控制器中检查我正在使用哪个表单来提交按钮名称？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T13:19:43.473

您可以使用 2 个不同的操作，然后调用一个共享方法。

```
/**
 * ...
 */
public function createAction()
{
    return $this->processForm('create');
}

/**
 * ...
 */
public function editAction()
{
    return $this->processForm('edit');
}

private function processForm($action)
{
    // ...
    return array(/* ... */);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T15:04:44.167

如果您只想使用一条路线，还有一个解决方案：

如果您使用的表单具有不同的名称（因此您已经覆盖了 getName() 函数），您可以检查

```
$this->getRequest()->get('yourFormName')) 
```

如果发送了一份表格。

所以在你的情况下，它看起来像：

```
if($this->getRequest()->get('authorEdit')) {
    //
} elseif($this->getRequest()->get('authorCreate')) {
    //
} 
```

# haskell - Haskell 实现余弦定律

> ID：13645874
> 
> 赞同：4
> 
> 时间：2012-11-30T13:06:14.543
> 
> 标签：haskell, trigonometry

我正在尝试实现[余弦](http://en.wikipedia.org/wiki/Law_of_cosines)函数，这是我的代码：

```
cosC :: [a] -> a
cosC sides
   | length sides < 3          = 0
   | otherwise                 = (x ^ 2 + y ^ 2 - z ^ 2) / (2 * x * y)
   where x = head(tail(tail(sides)))
         y = head(tail(sides))
         z = head(sides) 
```

但我得到两个错误：

```
No instance for (Fractional a)
arising from a use of `/'
In the expression: (x ^ 2 + y ^ 2 - z ^ 2) / (2 * x * y)
In an equation for `cosC':
    cosC sides
      | length sides < 3 = 0
      | otherwise = (x ^ 2 + y ^ 2 - z ^ 2) / (2 * x * y)
      where
          x = head (tail (tail (sides)))
          y = head (tail (sides))
          z = head (sides) 
```

和

```
No instance for (Num a)
arising from the literal `2'
In the first argument of `(*)', namely `2'
In the first argument of `(*)', namely `2 * x'
In the second argument of `(/)', namely `(2 * x * y)' 
```

编辑：我已经修复了上面余弦定律中的符号错字。感谢 Daniel Fischer 指出这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T13:20:31.717

您正在尝试从*一般类型* `a`中计算数值结果，这可能行不通。（这就像试图为一般的公路车辆建造一座桥，也为一般的*东西*建造一座桥，例如宇宙飞船、摩天大楼、回形针和中子星）。只需将`Floating`约束添加到：

```
cosC :: Floating a => [a] -> a 
```

您可以执行此类计算所需的任何算术运算。（`Fractional`对于这个函数实际上已经足够了，但是你将无法计算`arccos`结果）。

* * *

与您的问题无关，请注意在 Haskell 中分解列表有更好的方法：

```
cosC (x:y:z:_) = (x^2 + y^2 - z^2) / (2*x*y)
cosC _ = 0 
```

相当于你的定义。你为什么要把这些论点当作一个清单呢？在 Haskell 中，我更喜欢用 Lisp 做的事情

```
cosC :: Floating a => a -> a -> a -> a
cosC x y z = (x^2 + y^2 - z^2) / (2*x*y) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T13:20:17.537

`cosC :: Fractional a => [a] -> a`

这就是你可以找到的方法（in `ghci`）：

```
*Main> let fun [x, y, z] = (x * x + y * y + z * z) / (2 * x * y)
*Main> :type fun
fun :: Fractional a => [a] -> a 
```

# php - str_replace 不会替换阿拉伯字符

> ID：13645876
> 
> 赞同：3
> 
> 时间：2012-11-30T13:06:16.277
> 
> 标签：php

```
<?php 
$utf8_string = 'مع السلامة مع السلامة مع السلامة مع السلامة مع السلامة مع السلامة مع السلامة السلامة الرائعة على الطويلة ';
echo $utf8_string;
echo'<br/><br/>';

$patterns = array("على", "مع");
$replacements   = array("", "");

$r_string = str_replace($patterns, $replacements, $utf8_string);

//echo $r_string;
print_r ($r_string);
echo'<br/>';
//$words = preg_split( "/ ( |مع|على) /",$r_string);
$words = explode(" ",$r_string);

$num = count($words);
echo 'There are <strong>'.$num.'</strong> words.';
?> 
```

我有这段代码来计算阿拉伯语句子中的单词数。但是我想删除一些单词并计算其余的单词。我尝试使用 str_replace，但这种方式是计算原始句子的单词数。谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T13:11:58.440

你可以使用：

```
$num = count(
    explode(
        " ", 
        str_replace(
            $word, //Word you want to remove from your text.
            "",
            $string //String you want the word to be removed from.
        )
    )
); 
```

甚至：

```
$num = count(
    explode(
        " ", 
        str_replace(
            array("word1", "word2", [...]), //Words you want to remove from your text.
            "",
            $string //String you want the word to be removed from.
        )
    )
); 
```

* * *

编辑：正如所指出的，上述方法不起作用。我试图查明错误在哪里，但显然**`str_replace`无法处理阿拉伯字符**，即使`explode`可以。[PHP 对于非 ascii 字符不可靠。](http://me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design/#text-1)

或者，您可以做的是：

```
$num = Count(explode(" ", $utf8_string)) - Count(array_intersect(explode(" ", $utf8_string), $patterns)) 
```

它应该返回你想要的值。

您也可以尝试编写自己的字符串替换函数，但我建议您不要这样做，因为您必须手动循环遍历数组并比较每个单词。这样做应该需要更长的时间才能运行，并使其更加冗长。

* * *

来这里警告你们，处理这个问题的正确方法是使用`mbstring`扩展名（[http://php.net/manual/en/book.mbstring.php](http://php.net/manual/en/book.mbstring.php)）。请使用此扩展程序，不要使用上面的丑陋黑客/解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T13:15:19.790

您需要在删除一些单词之后和使用爆炸计算空格之前“删除重复的空格”。字符串前后的空格需要修剪（或类似的正则表达式）

```
 $r_string = trim(preg_replace('/\s+/u',' ',$r_string)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T13:21:52.110

利用`$num = str_word_count($r_string);`

代替`$num = count($words);`

# mysql - Doctrine 2 QueryBuilder 添加多个选择元素/参数？

> ID：13645880
> 
> 赞同：6
> 
> 时间：2012-11-30T13:06:22.177
> 
> 标签：mysql, doctrine-orm

我仍在为学说 QueryBuilder 苦苦挣扎，因为当我想将另一个元素添加到选择表达式中时，我认为它无法正常工作。

在这两种情况下，学说 $queryBuilder->getQuery()->getResults() 返回一个数组，其中实体表示为字符串而不是对象：

情况1：

```
$queryBuilder = $this->em->createQueryBuilder();
$queryBuilder->select("e, 99 as number"); 
```

它返回

```
array(4) {
  [0]=>
     array(2) {
        [0]=> string(30) "Profile_Entity" //notice this is a string but it should be  an object instance 
        ["number"]=> string(2) "99"
     }
  ...
... 
```

如果我会写

```
$queryBuilder = $this->em->createQueryBuilder();
$queryBuilder->select("e");
$queryBuilder->select("99 as number"); 
```

它将返回与情况 1 相同的内容

下面是它通常应该的样子（这里只是选择表达式中的一个元素）

```
array(4) {
  [0]=> object(stdClass)#935 (39) {
    ["__CLASS__"]=> string(30) "Profile_Entity"
    ["id"]=> int(46)
    ["headline"]=> string(7) "asdasd
    ...
  ...
... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-22T05:41:07.340

我正在努力解决类似的问题。

我找到的答案相对简单..

```
$queryBuilder -> select('table.column1 alias1, table.column2 alias2'); 
```

您使用逗号分隔，并在列后使用空格来放置列的别名。

编辑：

您不能将对象与值混合。您只能执行以下操作之一：

```
$qb -> select('tableAlias1', 'tableAlias2')
$qb -> from('table1','tableAlias1')
$qb -> leftJoin('table2','tableAlias2'); 
```

或者

```
$qb -> select('tableAlias1.column1', 'tableAlias2.column1')
$qb -> from('table1','tableAlias1')
$qb -> leftJoin('table2','tableAlias2'); 
```

如果您决定需要在表顶部提取某些列，则必须指定要从每个表中检索的每一列。

# extjs - 修改 initComponent() 中的项目

> ID：13645884
> 
> 赞同：5
> 
> 时间：2012-11-30T13:06:39.770
> 
> 标签：extjs, extjs4.1

`initComponent()` 我在问题中创建的一些项目是，`this.items`以某种方式引用类变量，而不是实例变量。

所以当我创建两个实例时，我最终得到了两个按钮。

```
items: [],
initComponent: function() {
  this.items.push( { xtype: 'button', ... }) ;
  this.callParent( arguments );
} 
```

由于我必须使用推送，因此每次推送新元素时。

是否有一些实例相当于`this.items`我可以在创建按钮之前修改定义，还是我必须手动检查重复项？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T13:35:40.967

你不应该`return this.callParent( arguments );`

就这样就足够了：

```
initComponent: function() {
    var me = this;
    me.items = { xtype: 'button', ... }; //Are you sure items is filled up here?
    me.callParent();
} 
```

此外，如果您正在编写自己的“组件”并且想要在其中传递参数，`Ext.create`我总是执行以下操作：

```
constructor: function (config) {
    var me = this;
    Ext.apply(me, config); 
    me.callParent();
} 
```

这将用您提交的项目声明覆盖您班级中的项目声明`Ext.create()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T13:19:39.607

您可以重载构造函数并在那里调整配置：

```
constructor: function(config)
{
  config.items.someButton = { xtype: 'button', ... };
  this.callParent([config]);
} 
```

# javascript - Javascript for..in 与 for 循环性能

> ID：13645890
> 
> 赞同：22
> 
> 时间：2012-11-30T13:07:17.727
> 
> 标签：javascript

我使用 kmean 算法聚集了大约 40000 个点。在程序的第一个版本中，我这样写了欧几里得距离函数

```
var euclideanDistance = function( p1, p2 ) { // p1.length === p2.length == 3
    var sum = 0;
    for( var i in p1 ){
        sum += Math.pow( p1[i] - p2[i], 2 );
    }
    return Math.sqrt( sum );
}; 
```

整个程序执行速度很慢，平均需要 7 秒。经过一些分析后，我像这样重写了上面的函数

```
var euclideanDistance = function( p1, p2 ) { // p1.length === p2.length == 3
    var sum = 0;
    for( var i = 0; i < p1.length; i++ ) {
        sum += Math.pow( p1[i] - p2[i], 2 );
    }
    return Math.sqrt( sum );
}; 
```

现在这些程序平均需要大约 400 毫秒。这是一个巨大的时间差异，只是因为我编写 for 循环的方式。我通常不对`for..in`数组使用循环，但出于某种原因，我在编写此函数时使用了它。

有人能解释一下为什么这两种风格在性能上有这么大的差异吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-30T13:26:10.437

查看每次迭代中发生的不同情况：

```
for( var i = 0; i < p1.length; i++ ) 
```

1.  检查是否`i < p1.length`
2.  加`i`一

非常简单和快速。

现在看看每次迭代中发生了什么：

[`for( var i in p1 )`](http://www.ecma-international.org/ecma-262/5.1/#sec-12.6.4)

> 重复
> 
> 1.  令 P 为 obj 的 [[Enumerable]] 属性为 true 的下一个属性的名称。如果没有这样的属性，返回（正常，V，空）。

它必须在可枚举的对象中找到下一个属性。使用您的数组，您知道这可以通过简单的整数增量来实现，其中查找下一个可枚举的算法很可能不是那么简单，因为它必须处理任意对象及其原型链键。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-30T13:46:53.580

附带说明一下，如果您缓存 p1 的长度：

```
var plen = p1.length;
for( var i = 0; i < plen; i++ ) 
```

你会得到轻微的速度增加。

...如果你记住这个函数，它会缓存结果，所以如果用户尝试相同的数字，你会看到速度大幅提升。

```
var eDistance = memoize(euclideanDistance);  

function memoize( fn ) {  
    return function () {  
        var args = Array.prototype.slice.call(arguments),  
            hash = "",  
            i = args.length;  
        currentArg = null;  
        while (i--) {  
            currentArg = args[i];  
            hash += (currentArg === Object(currentArg)) ?  
            JSON.stringify(currentArg) : currentArg;  
            fn.memoize || (fn.memoize = {});  
        }  
        return (hash in fn.memoize) ? fn.memoize[hash] :  
        fn.memoize[hash] = fn.apply(this, args);  
    };  
}

eDistance([1,2,3],[1,2,3]);
eDistance([1,2,3],[1,2,3]); //Returns cached value 
```

信用：[http ://addyosmani.com/blog/faster-javascript-memoization/](http://addyosmani.com/blog/faster-javascript-memoization/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-30T13:34:12.010

首先，对于 for/in 和数组，您应该意识到[这一点。](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays?lq=1)如果你知道你在做什么，没什么大不了的。

我运行了一些非常简单的测试来显示不同循环之间的性能差异：http: [//jsben.ch/#/BQhED](http://jsben.ch/#/BQhED)

这就是为什么更喜欢对数组使用经典的 for 循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T13:13:28.570

For/In 循环简单地遍历对象中的所有属性。由于您没有指定循环需要进行的迭代次数，因此它只是“猜测”它，并继续下去，直到没有更多对象为止。

在第二个循环中，您指定了所有可能的变量... a)a 起点，b) 循环在停止之前应该进行的迭代次数，c) 增加起点的计数。

你可以这样想... For/In = 猜测迭代次数，你指定的 For(a,b,c)

# postgresql - 共享主键与外键

> ID：13645900
> 
> 赞同：3
> 
> 时间：2012-11-30T13:07:50.947
> 
> 标签：postgresql, database-design, shared-primary-key

我有一个实验室分析数据库，我正在研究 bas 数据布局。我已经看到了一些基于使用“共享主键”的类似要求的建议，但我没有看到仅外键的优势。我正在使用 PostgreSQL：下面列出的表

```
Sample
___________
sample_id (PK)
sample_type (where in the process the sample came from)
sample_timestamp (when was the sample taken)

Analysis
___________
analysis_id (PK)
sample_id (FK references sample)
method (what analytical method was performed)
analysis_timestamp (when did the analysis take place)
analysis_notes

gc
____________
analysis_id (shared Primary key)
gc_concentration_meoh (methanol concentration)
gc_concentration_benzene (benzene concentration)

spectrophotometer
_____________
analysis_id
spectro_nm (wavelength used)
spectro_abs (absorbance measured) 
```

我可以使用这种设计，或者我可以将分析表中的字段移动到 gc 和分光光度计表中，并在样品、gc 和分光光度计表之间使用外键。我看到的这种设计的唯一优势是，我只需要有关执行了多少或哪些类型的分析的信息，而不必加入实际结果。但是，确保共享主键之间的引用完整性以及管理额外连接和触发器（删除级联等）的附加规则似乎比次要优势更令人头疼。我不是 DBA，而是科学家，所以请让我知道我缺少什么。

更新：共享主键（据我所知）就像一对一的外键，具有附加约束，即父表（分析）中的每个值必须出现在其中一个子表中一次，并且不超过一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:38:44.253

> 我已经看到了一些基于使用“共享主键”的类似要求的建议，但我没有看到仅外键的优势。

如果我已经理解了您上面的评论，那么优点是只有第一个实现了父中的每一行与一个子中的一行匹配的要求，并且*仅*在一个子中。这是一种方法。

```
create table analytical_methods (
  method_id integer primary key,
  method_name varchar(25) not null unique
);
insert into analytical_methods values
(1, 'gc'),(2, 'spec'), (3, 'Atomic Absorption'), (4, 'pH probe');

create table analysis (
  analysis_id integer primary key,
  sample_id integer not null, --references samples, not shown
  method_id integer not null references analytical_methods (method_id),
  analysis_timestamp timestamp not null,
  analysis_notes varchar(255),
  -- This unique constraint lets the pair of columns be the target of
  -- foreign key constraints from other tables.
  unique (analysis_id, method_id)
);

-- The combination of a) the default value and the check() constraint on 
-- method_id, and b) the foreign key constraint on the paired columns 
-- analysis_id and method_id guarantee that rows in this table match a 
-- gc row in the analysis table. 
--
-- If all the child tables have similar constraints, a row in analysis 
-- can match a row in one and only one child table.
create table gc (
  analysis_id integer primary key,
  method_id integer not null 
    default 1 
    check (method_id = 1),
  foreign key (analysis_id, method_id) 
    references analysis (analysis_id, method_id),
  gc_concentration_meoh integer not null,
  gc_concentration_benzene integer not null
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T01:06:55.247

就我而言，这种超类型/子类型模型看起来不是最佳选择。相反，我应该将分析表中的字段移动到所有子表中，并建立一系列简单的外键关系。超类型/子类型模型的优点是当使用超类型的主键作为另一个表中的外键时。由于我不这样做，额外的复杂层不会增加任何东西。

# phonegap-plugins - Childbrowser 插件位置栏

> ID：13645903
> 
> 赞同：1
> 
> 时间：2012-11-30T13:08:03.043
> 
> 标签：phonegap-plugins

我正在使用 childbroser 来显示外部页面。在android上（不了解IOS）顶部栏很难看到（箭头（左）和十字（右）在浅灰色背景上亮起）有人知道如何改变吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:48:09.677

您可以将箭头的图像替换为更清晰的图像

# android - Android Inflating Views of Tab View

> ID：13645911
> 
> 赞同：0
> 
> 时间：2012-11-30T13:08:48.657
> 
> 标签：android, android-fragments, android-tabhost, actionbarsherlock

![在此处输入图像描述](../Images/a3174eb13268f8bfa325ed015584116e.png)

我想在我的应用程序中实现此功能，如下所示。

1.  带有操作栏和操作项的活动
2.  操作栏下方的选项卡
3.  每个选项卡都会有内容。

我使用 Tab 片段和 TabListeners 进行编码。现在，当我运行该应用程序时，我得到了选项卡视图，但缺少视图寻呼机和指示器。我得到了如下所示的活动。 ![在此处输入图像描述](../Images/ef8063a47393ddb74792b8ae52ea1a66.png)

我的代码如下所示。

选项卡视图活动.java

```
public class TabViewActivity extends SherlockFragmentActivity {
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            copyPrivateRawResuorceToPubliclyAccessibleFile();

            ActionBar actionBar = getSupportActionBar();
            actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
            // add tabs
            Tab tab1 = actionBar
                    .newTab()
                    .setText("Details")
                    .setTabListener(
                            new TabListener<TabFragment>(this, "tab1",
                                    TabFragment.class));
            actionBar.addTab(tab1);

            Tab tab2 = actionBar
                    .newTab()
                    .setText("Maps")
                    .setTabListener(
                            new TabListener<TabFragment>(this, "tab2",
                                    TabFragment.class));
            actionBar.addTab(tab2);

            // check if there is a saved state to select active tab
            if (savedInstanceState != null) {
                getSupportActionBar().setSelectedNavigationItem(
                        savedInstanceState.getInt(ACTIVE_TAB));
            }
        } 
```

TabListener.java

```
public class TabListener<T extends SherlockFragment> implements
        ActionBar.TabListener {
    private SherlockFragment mFragment;
    private final SherlockFragmentActivity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    public TabListener(Activity activity, String tag, Class<T> clz) {
        mActivity = (SherlockFragmentActivity) activity;
        mTag = tag;
        mClass = clz;
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // Check if the fragment has already been initialised
        SherlockFragment preInitializedFragment = (SherlockFragment) mActivity
                .getSupportFragmentManager().findFragmentByTag(mTag);
        if (mFragment != null) {
            // If it exists, simply attach it in order to show it
            ft.attach(mFragment);
        } else if (preInitializedFragment != null) {
            mFragment = preInitializedFragment;
            ft.attach(mFragment);
        } else {
            // Not found, so instantiate and add it to the activity
            mFragment = (SherlockFragment) SherlockFragment.instantiate(
                    mActivity, mClass.getName());
            ft.add(android.R.id.content, mFragment, mTag);
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        if (mFragment != null) {
            // Detach the fragment, because another one is being attached
            ft.detach(mFragment);
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // User selected the already selected tab. Usually do nothing.
    } 
```

TabFragment.java

```
public class TabFragment extends SherlockFragment {
      // your member variables here
      @Override
      public View onCreateView(LayoutInflater inflater, 
                     ViewGroup container, Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        View view = inflater.inflate(R.layout.main, container, false);
        // do your view initialization here
        return view;
      }

    } 
```

对于每个选项卡单击，我有两个不同的类，名为 details.java 和 maps.java。请帮我把这段代码放在哪里。我还实现了视图寻呼机。这是我查看详细信息选项卡的寻呼机代码。

详细信息Activity.java

```
public class DetailsActivity extends BaseSampleActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.place_details_layout);

        mAdapter = new TestFragmentAdapter(getSupportFragmentManager());

        mPager = (ViewPager)findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        mIndicator = (CirclePageIndicator)findViewById(R.id.indicator);
        mIndicator.setViewPager(mPager);

    }
} 
```

BaseSampleActivity.java

```
public abstract class BaseSampleActivity extends FragmentActivity {
    private static final Random RANDOM = new Random();

    TestFragmentAdapter mAdapter;
    ViewPager mPager;
    PageIndicator mIndicator;
    //FragmentTabHost mTabHost;

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.random:
                final int page = RANDOM.nextInt(mAdapter.getCount());
                Toast.makeText(this, "Changing to page " + page, Toast.LENGTH_SHORT);
                mPager.setCurrentItem(page);
                return true;

            case R.id.add_page:
                if (mAdapter.getCount() < 10) {
                    mAdapter.setCount(mAdapter.getCount() + 1);
                    mIndicator.notifyDataSetChanged();
                }
                return true;

            case R.id.remove_page:
                if (mAdapter.getCount() > 1) {
                    mAdapter.setCount(mAdapter.getCount() - 1);
                    mIndicator.notifyDataSetChanged();
                }
                return true;
        }
        return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:40:02.420

我没有看到任何代码`ViewPager`，请查看 Jake Wharton 的[FragmentTabsPager中的示例代码](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabsPager.java)

# java - 在 html 样式的 jTextPane 中插入 java 变量

> ID：13645912
> 
> 赞同：2
> 
> 时间：2012-11-30T13:08:53.580
> 
> 标签：java, html, swing, jtextpane

我正在构建一个 Java Swing 界面，其中有一个 HTML 样式的 jTextPane，用于显示当前系统状态。我希望能够显示一些字符串（可能会随着时间而改变），同时使用 HTML 来设置文本的外观和位置。我使用下面的代码行在 jTextPane 中显示它们的两个字符串。

```
jTextPane1.setText("<html><font size=\"4\" ><b><center> String A here! </center></b></font><br><br><font size=\"3\" ><center> String B here</center></font>"); 
```

我想要的是插入两个字符串（A 和 B），以便我可以随着时间的推移更改它们。但不幸的是，我找不到在任何地方插入字符串的语法。有没有一种简单的方法可以做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T13:24:35.327

将您的 HTML 代码定义为并使用和`template`的占位`%s`符。然后用来插入你的字符串。最后将其设置在您的 TextPane 中。`stringA``stringB``String.format()`

```
String template = "<html><font size=\"4\" ><b><center>%s</center></b></font><br><br><font size=\"3\" ><center>%s</center></font>"
String text = String.format(template, stringA, stringB);
jTextPane1.setText(text); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T13:23:14.373

```
jTextPane1.getDocument().insertString(offset, stringToInsert, attributes); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T13:28:43.293

您可以使用一些常量字符串，例如：

```
 final String PRE_HTML = "<html><font size=\"4\" ><b><center> ";
    final String MID_HTML = " </center></b></font><br><br><font size=\"3\" ><center> ";
    final String POST_HTML = "</center></font></html>"; 
```

你可以设置如下：

```
 String strA = "String A";
    String strB = "String B";
    jTextPane1.setText(PRE_HTML + strA + MID_HTML + strB + POST_HTML); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T13:24:56.013

你可以使用`String.format`：

```
jTextPane1.setText(String.format("<html><font size=\"4\" ><b><center> %s </center></b></font><br><br><font size=\"3\" ><center> %s </center></font>", a, b)); 
```

# asp.net-mvc - 由于 PRG 模式中的验证错误，如何在返回视图时将 url 更改为主视图

> ID：13645913
> 
> 赞同：1
> 
> 时间：2012-11-30T13:08:58.697
> 
> 标签：asp.net-mvc, asp.net-mvc-3, modelstate, post-redirect-get

我**注意到**，当由于`view`被**返回**时`validation errors`，**url**仍然指向`action`已经**完成**的`validation`：

例如，`Edit View`有一种`Update`行动形式：

```
@Html.BeginForm("Update","MyController",FormMethod.Post,new{})
{
...
} 
```

更新操作：

```
public ActionResult Update(Entity myEntity)
{
    is(ModelState.IsValid)
    {
        ...
        return RedirectToAction("List");
    }

    return View("Edit",myEntity);
} 
```

当`validation` **失败**时，这`Edit view`再次显示错误，但地址是

```
 .../Update 
```

我做错什么**了**吗？如何**解决**这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T13:47:45.677

`am I doing something wrong ? how to fix this ?`

这就是它的工作原理，您可以尝试`RedirectToAction`使用`TempData`模型。

像这儿：

[ASP.NET MVC ActionResult View() 不改变 url](https://stackoverflow.com/questions/4916468/asp-net-mvc-actionresult-view-not-changing-url)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:17:52.950

您想要做的不是将其发布到“更新”，而是发布到您正在执行的相同操作，但使用 [HttpPost] 进行标记，如下所示

```
[HttpPost]
public ActionResult Edit(SomeViewModel someViewModel) {
   is(ModelState.IsValid)
    {
        ...
        return RedirectToAction("List");
    }
     return View(myEntity);
} 
```

只有当浏览器检测到“发布”请求时，才会调用带有 HttpPost 的方法。当用户通过浏览器输入 url 时，这是一个“获取”请求，因此将调用另一个“编辑”操作。

# php - 执行时自动关闭 php 页面

> ID：13645924
> 
> 赞同：0
> 
> 时间：2012-11-30T13:09:26.170
> 
> 标签：php

当我单击一个链接时，它会将我重定向到一个`php`页面，该页面的主要目标是保存数据，`MySQL`但仅此而已。所以我希望这个页面在完成将数据保存到数据库后自行关闭。我怎样才能做到这一点 ？任何指针都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T13:17:13.510

将此代码放在页面的末尾。执行此脚本时，您的选项卡将关闭。

```
<script type="text/javascript">
window.close();
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T13:19:35.243

首先，请记住 PHP 是一种服务器端语言，与浏览器完全无关。它只会向浏览器输出由浏览器解释的代码。Javascript是与浏览器交互的东西。

但是，让您知道，使用 Javascript，由于各种原因，您无法保证该功能会实际执行，即浏览器通常会与用户确认用户是否可以关闭窗口。

这是代码：

```
<script type="text/javascript">
    window.close();
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T13:17:12.943

你可以使用 Javascript window.close 方法来做到这一点，这不是 PHP 的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T13:27:55.763

除非您谈论的是真正的弹出窗口（并且如今使用选项卡式浏览和移动设备，谁知道该页面的查看方式），否则我认为最好的方法是在执行后使用`header("Location:http://www.mysite.com/done.php");`. 最好是告诉用户执行是否成功的东西。

# mysql - MySQL：从表中查找缺失值

> ID：13645925
> 
> 赞同：0
> 
> 时间：2012-11-30T13:09:30.663
> 
> 标签：mysql

我有两个不同的表：

1.  **checkin_out**由两个字段组成：**emp_code**，**checked_date**
2.  **temp_days**由两个字段组成：**id**，**date_value**

表**checkin_out**有以下数据：

```
emp_code | checked_date
-----------------------
001        2012-11-01
001        2012-11-02
001        2012-11-03
002        2012-11-01
003        2012-11-01
003        2012-11-02 
```

虽然表**temp_days**具有以下数据：

```
id  | date_value
-----------------
1     2012-11-01
2     2012-11-02
3     2012-11-03
4     2012-11-04
5     2012-11-05 
```

从上面的表格中，我需要在表格**temp_days**中显示缺失的日期；我需要查询以获得如下结果：

```
emp_code  |  date_value
-----------------------
001          2012-11-04
001          2012-11-05
002          2012-11-02
002          2012-11-03
002          2012-11-04
002          2012-11-05
003          2012-11-03
003          2012-11-04
003          2012-11-05 
```

如果有人可以帮忙，请！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:39:04.803

以下适用于具有多个 emp_code 的更复杂的数据集。

```
SELECT  alldays.emp_code, alldays.date_value
FROM    (
          SELECT date_value, emp_code
          FROM temp_days
          CROSS JOIN checkin_out
          GROUP BY date_value, emp_code
        ) alldays
        LEFT JOIN checkin_out C
            ON alldays.date_value = C.checked_date
            AND alldays.emp_code = C.emp_code
WHERE   C.emp_code IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:12:47.303

```
SELECT  c.emp_code, a.date_value
FROM    temp_days a
        LEFT JOIN checkin_out b
            ON a.date_value = b.checked_date
        CROSS JOIN 
        (
            SELECT emp_code
            FROM checkin_out
            GROUP BY emp_code
        ) c
WHERE   b.emp_code IS NULL 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/61c06/4)

# iphone - 你如何在 iOS 上的一个类中使用字符串？

> ID：13645926
> 
> 赞同：0
> 
> 时间：2012-11-30T13:09:34.827
> 
> 标签：iphone, xcode, nsstring

我需要帮助。我有一个带有 a 的视图`tableView`，当我单击一个单元格时，它会向我显示带有 a 的另一个视图`mapView`。你如何在另一个类中使用一个类的字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:39:18.073

你有两种方式来完成这项任务

**1.通过使用getter和setter属性（制作@property（））。**
**2.使用`NSUserDefault`**

只需按照我的回答获得更好的结果

[将值从一个类传递到另一类](https://stackoverflow.com/questions/13602840/passing-the-value-from-one-class-to-other-class/13606108#13606108)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:21:17.120

`@Property (nonatomaic,retain) NSString *stringToshow;`在下一个视图中创建 a并将其值`didSelectRowAtIndexPath`分配给`UITableView`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T13:34:09.020

**请写在地图视图控制器中**

**在地图视图控制器的 .h 文件中**

```
@property(nonatomic,retain)NSString* strToSend; 
```

**在地图视图控制器的 .m 文件中**

```
@synthesis strToSend; 
```

**在编写 TableView 的基础 viewController 中**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
     MapView* mapObj = [[MapView alloc]initWithNibName:@"MapView" bundle:nil];
     mapObj.strToSend = @"Text To Send"; // you can send  string to MapView controller via this string object 
     [self.navigationController pushViewController:mapObj animated:YES];
     [mapObj release];
} 
```

# android - 用于浮点数的 android numberpicker

> ID：13645927
> 
> 赞同：9
> 
> 时间：2012-11-30T13:09:36.267
> 
> 标签：android, spinner, numberpicker

我们应用程序的用户应该能够调整浮点数。目前，我用所有可能的值填充了一个 ArrayAdapter 并将它附加到一个微调器上。

这个解决方案并没有真正满足我们的期望，因为微调框下拉框太高了。有没有更好的办法？我在看 Numberpicker - 但这似乎只适用于整数值。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-12T09:41:29.917

`NumberPicker`不只是整数..甚至你可以使用`Floats` `String`等。

看到[这个](http://developer.android.com/reference/android/widget/NumberPicker.html)并阅读它。

对于教程：

*   [http://gafurbabu.wordpress.com/2012/03/29/android-number-picker-dialog/](http://gafurbabu.wordpress.com/2012/03/29/android-number-picker-dialog/)

我`NumberPicker`很久以前就这样用过，在这里发帖可能会有一些用处：

```
 NumberPicker np;
    String nums[]= {"Select Fraction","1/64","1/32","3/64","1/16","5/64","3/32","7/64","1/8","9/64","5/32","11/64","3/16","13/64","7/32","15/64","1/4","17/64","9/32","19/64","5/16","21/64","11/32","23/64","3/8","25/64","13/32","27/64","7/16","29/64"};

            np = (NumberPicker) findViewById(R.id.np);

            np.setMaxValue(nums.length-1);
            np.setMinValue(0);
            np.setWrapSelectorWheel(false);
            np.setDisplayedValues(nums);
            np.setDescendantFocusability(NumberPicker.FOCUS_BLOCK_DESCENDANTS); 
```

您可以制作`ArrayList`任何数据类型并分配它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-06T06:42:15.533

另一种解决方案是**将两个数字字段组合**成一个组件。请参阅[货币选择器示例](http://pestohacks.blogspot.ru/2015/04/number-money-picker-dialog-in-android.html)。它的优点是您不必为微调器初始化所有可能的双精度值。

您可能还需要使用函数附加**特殊数字格式**，如*“00”*、*“0123”*或其他。`java.lang.String.format()`例子在[这里](https://stackoverflow.com/a/27030765/1112963)。

1.  添加双选择器 xml 布局：

    ```
    <LinearLayout
      xmlns:android = "http://schemas.android.com/apk/res/android"
      android:layout_width = "fill_parent"
      android:layout_height = "wrap_content"
      android:gravity = "center">

      <NumberPicker
        android:id = "@+id/integer_picker"
        android:layout_width = "wrap_content"
        android:layout_height = "wrap_content"
        android:layout_gravity = "center"/>

      <TextView
        android:layout_width = "wrap_content"
        android:layout_height = "wrap_content"
        android:layout_gravity = "center"
        android:padding = "5dp"
        android:text = "@string/local_separator"
        android:textSize = "20sp"/>

      <NumberPicker
        android:id = "@+id/fraction_picker"
        android:layout_width = "wrap_content"
        android:layout_height = "wrap_content"
        android:layout_gravity = "center"/>

      <TextView
        android:layout_width = "wrap_content"
        android:layout_height = "wrap_content"
        android:layout_gravity = "center"
        android:padding = "5dp"
        android:text = "@string/measure_unit_sign"
        android:textSize = "20sp"/>

    </LinearLayout> 
    ```

2.  添加自定义 Double Picker 类：

    ```
    import android.content.Context;
    import android.view.LayoutInflater;
    import android.widget.NumberPicker;

    /**
     * UI component for double (floating point) values. Can be used
     * for money and other measures.
     */
    public class DoublePicker
      extends NumberPicker {

      private int decimals;
      private NumberPicker integerPicker;
      private NumberPicker fractionPicker;

      public DoublePicker(
        Context context) {

        super(
          context);

          LayoutInflater
            .from(
              context)
            .inflate(
              R.layout.double_picker,
              this);

          integerPicker =
            (NumberPicker) findViewById(
              R.id.integer_picker);

          fractionPicker =
            (NumberPicker) findViewById(
              R.id.fraction_picker);
      }

      public int getDecimals() {

        return decimals;
      }

      /**
       * Sets the amount of digits after separator.
       *
       * @param decimals Anount of decimals.
       */
      public void setDecimals(final int decimals) {

        this.decimals = decimals;

        this.setFormatter(new DoublePicker.Formatter() {

          @Override
          public String format(int i) {

            return String.format(
              "%." + decimals + "f",
              i);
          }
        });
      }

      public void setValue(double value) {

        integerPicker.setValue((int) value);

        fractionPicker.setValue(
          Integer.valueOf(
            String
              .valueOf(value)
              .split(".")
              [1]));
      }
    } 
    ```

3.  在活动 xml 中使用新的 Double Picker 组件：

    ```
    <com.example.DoublePicker
      android:id ="@+id/double_picker"
      android:layout_width ="match_parent"
      android:layout_height ="wrap_content" /> 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-12T12:38:38.410

在**Kotlin**中，您可以使用这个方便`NumberPicker`的扩展对话框，它将您的`Double`值缩放到合适的`Int`范围内，并在调用任何回调之前将`Int`值转换回s。所以它基本上隐藏了只支持`Double`的事实。感觉真的会支持，试试看！`NumberPicker``Int``NumberPicker``Double`

这是您需要**复制和粘贴的****片段扩展**：

 **```
fun Fragment.showNumberPickerDialog(
    title: String,
    value: Double,
    range: ClosedRange<Double>,
    stepSize: Double,
    formatToString: (Double) -> String,
    valueChooseAction: (Double) -> Unit
) {
    val numberPicker = NumberPicker(context).apply {
        setFormatter { formatToString(it.toDouble() * stepSize) }
        wrapSelectorWheel = false

        minValue = (range.start / stepSize).toInt()
        maxValue = (range.endInclusive / stepSize).toInt()
        this.value = (value.toDouble() / stepSize).toInt()

        // NOTE: workaround for a bug that rendered the selected value wrong until user scrolled, see also: https://stackoverflow.com/q/27343772/3451975
        (NumberPicker::class.java.getDeclaredField("mInputText").apply { isAccessible = true }.get(this) as EditText).filters = emptyArray()
    }

    MaterialAlertDialogBuilder(context)
        .setTitle(title)
        .setView(numberPicker)
        .setPositiveButton("OK") { _, _ -> valueChooseAction(numberPicker.value.toDouble() * stepSize) }
        .setNeutralButton("Cancel") { _, _ -> /* do nothing, closes dialog automatically */ }
        .show()
} 
```

现在您可以像这样**使用它**（在 a 中`Fragment`）：

```
showNumberPickerDialog(
    title = "Your Weight",
    value = 75.0, // in kilograms
    range = 10.0 .. 300.0,
    stepSize = 0.1,
    formatToString = { "$it kg" },
    valueChooseAction = { saveNewWeight(it) }
) 
```**

# backbone.js - BackboneJS model.fetch() 不成功

> ID：13645932
> 
> 赞同：1
> 
> 时间：2012-11-30T13:09:55.387
> 
> 标签：backbone.js, model, fetch

**嗨，我有这个模型：**

```
window.shop = Backbone.Model.extend({
  initialize: function () {
    console.log('initializing shop');
  },
  urlRoot: "shopData.json",
}); 
```

**然后我去：**

```
var myShop = new shop();
myShop.fetch({
    success: function (model, resp){
        console.log(resp);
    },
    error: function (model, resp){
        console.log("error retrieving model");
}}, {wait: true}); 
```

**现在我总是收到错误消息-从未成功:-(**

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:34:39.797

**编辑1：**

根据您的评论，服务器正在发送正确的响应，但 Backbone 仍在调用错误函数。在错误回调的开头添加以下行：

```
error: function (model, resp){
    console.log('error arguments: ', arguments);
    console.log("error retrieving model");
} 
```

第一行应该打印一个对象数组。数组中的第一个元素应该是 jqXhr 对象，第二个应该是错误的字符串表示形式。如果您单击第一个对象，开发工具将允许您检查其属性。在此处阅读对象的属性[http://api.jquery.com/jQuery.ajax/#jqXHR](http://api.jquery.com/jQuery.ajax/#jqXHR)。

使用该信息，您可以验证 jQuery 是否从服务器接收到错误。

如果没有服务器端错误，则检查`responseText`属性的值。它保存了从服务器返回的字符串数据。`$.ajax`将尝试将该数据解析为 JSON。解析很可能会引发错误，而会引发错误处理程序。

复制响应文本并将其粘贴到[http://jsonlint.com/](http://jsonlint.com/)中。验证从服务器发送的响应是有效的 JSON。`console.log`请使用语句的输出和对象的`responseText`属性更新您的问题`jqxhr`。

-xxx-

您似乎正在独立使用该模型。根据文档[http://backbonejs.org/#Model-url](http://backbonejs.org/#Model-url)，

> 生成以下形式的 URL：“/[urlRoot]/id”

这意味着，您正在向`shopData.json/id`. 此外，您还没有指定 id。

在. `console.log(myShop.url())`_ `myShop.fetch()`让我们知道输出是什么。此外，可能会分享在 Firebug 或 Chrome 开发工具中看到的 ajax 请求的详细信息。我对两件事感兴趣，请求 url 和服务器返回的响应。（[http://getfirebug.com/network](http://getfirebug.com/network)）

# php - Wordpress：如何将 get_the_post_thumbnail 与 $wpdb->get_results 一起使用

> ID：13645933
> 
> 赞同：2
> 
> 时间：2012-11-30T13:09:54.310
> 
> 标签：php, wordpress-theming, wordpress

我正在使用 get_results 来获取包含数据的数组。在此数据中具有帖子 ID。当我尝试使用帖子 ID 检索图像时，我没有检索图像。任何的想法 ？

这是我的代码。

首先我在functions.php中添加下一个代码

```
/** 
 * Check to see if the function exists  
 * It is always a good practice to avoid any version conflict
 */

if(function_exists('add_theme_support'))
{
  /** Exists! So add the post-thumbnail */
  add_theme_support('post-thumbnails');

  /** Now Set some image sizes */

  /** #1 for our featured content slider */
  add_image_size( $name = 'itg_featured', $width = 500, $height = 300, $crop = true );

  /** #2 for post thumbnail */
  add_image_size( 'itg_post', 250, 250, true );

  /** #3 for widget thumbnail */
  add_image_size( 'itg_widget', 40, 40, true );

  add_image_size('projects_single',160,160, true);
  add_image_size('post',592,auto,true);
  add_image_size('post-mini',152,auto,true);
} 
```

在显示图像的文件中，我有下一个代码。

```
<?php   
  global $post,$wpdb;   
  $table = $wpdb->prefix.'posts';   
  $query = "SELECT * FROM $table WHERE post_type='startups' and post_status='publish' order by post_date desc limit 0,1; ";   
  $result = $wpdb->get_results($query);
?> 
```

（这完美地检索数据）。

现在，我为逐行检索数据做了一个 foreach。

```
foreach ($result as $key) {

 //retrieve post ID
 $idpost = $key->ID;

 //this line retrieve information to post_type
 $infostartup = get_post_meta($key->ID,array());

 //retrieve Image ID
 $imageid = get_post($infostartup['startup_photo'][0]);

 //Now I'm trying display image of post

 echo get_the_post_thumbnail($idpost);
 //this not display the image

 also I try using image ID but not display image.
 echo get_the_post_thumbnail($imageid);

} 
```

任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T14:21:20.960

如果您有图像 ID，则需要使用 wp_get_attachment_image_src( $imageid, 'itg_post' ) 或您想要的任何图像大小。

我也不知道您为什么在可以执行 WordPress 查询时使用 SQL 查询。以下是使用 WP_Query 的方法：

```
$args = array(
    'post_type' => 'startups',
    'posts_per_page' => -1
);
$loop = new WP_Query( $args );
if( $loop->have_posts() ): while( $loop->have_posts() ): $loop->the_post(); 
    global $post;
    echo get_the_post_thumbnail( $post->ID, 'image_size' );
endwhile; endif;
wp_reset_postdata(); 
```

# ruby - 如何使用 rspec 测试委托另一个类启动的方法？

> ID：13645934
> 
> 赞同：0
> 
> 时间：2012-11-30T13:09:54.833
> 
> 标签：ruby, rspec

您将如何使用 rspec 进行测试？

```
class SomeClass
  def map_url(size)
    GoogleMap.new(point: model.location.point, size: size).map_url
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:35:04.607

您的测试似乎“非常耦合且难以模拟”这一事实表明代码本身一次做了太多事情。

为了突出这个问题，看看这个`map_url`没有意义的实现（对于任何大小的输入返回“foo”）并且通过了你的测试：

```
class SomeClass
  def map_url(size)
    GoogleMap.new.map_url
    GoogleMap.new(point: model.location.point, size: size)
    return "foo"
  end
end 
```

请注意：

1.  正在使用正确的参数启动新映射，但对返回值没有贡献。
2.  `map_url`在新启动的地图上被调用，但不是以正确参数启动的地图。
3.  的结果`map_url`没有被返回。

我认为问题在于您构建代码的方式使其看起来比实际更简单。结果，您的测试过于简单，因此无法完全覆盖该方法的行为。

[David Chelimsky 的评论](http://www.ruby-forum.com/topic/526227#964075)似乎与此相关：

> TDD 中有一条旧指南建议您应该倾听您的测试，因为当它们受到伤害时，通常会出现设计问题。测试是被测代码的客户端，如果测试有问题，那么代码库中的所有其他客户端也会如此。像这样的捷径很快成为糟糕设计的借口。我希望它保持痛苦，因为这样 *做*会很痛苦。

按照这个建议，我建议首先将代码分成两个单独的方法，以隔离问题：

```
class SomeClass
  def new_map(size)
    GoogleMap.new(point: model.location.point, size: size)
  end

  def map_url(size)
    new_map(size).map_url
  end
end 
```

然后你可以单独测试它们：

```
describe SomeClass do
  let(:some_class) { SomeClass.new }
  let(:mock_map) { double('map') }

  describe "#new_map" do
    it "returns a GoogleMap with the correct point and size" do
      map = some_class.new_map('300x600')
      map.point.should == [1,2]
      map.size.should == '300x600'
    end
  end

  describe "#map_url" do
    before do
      some_class.should_receive(:new_map).with('300x600').and_return(mock_map)
    end          

    it "initiates a new map of the right size and call map_url on it" do
      mock_map.should_receive(:map_url)
      some_class.map_url('300x600')
    end

    it "returns the url" do
      mock_map.stub(map_url: "http://www.example.com")
      some_class.map_url('300x600').should == "http://www.example.com"
    end
  end
end 
```

生成的测试代码更长，有 3 个规范而不是两个，但我认为它更清晰、更清晰地分离了代码中涉及的步骤，并完全涵盖了方法行为。让我知道这是否有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:30:52.777

所以我就是这样做的，像这样模拟它感觉非常耦合和脆弱。建议？

```
describe SomeClass do
  let(:some_class) { SomeClass.new }

  describe "#map_url" do
    it "should instantiate a GoogleMap with the correct args" do
      GoogleMap.should_receive(:new).with(point: [1,2], size: '300x600') { stub(map_url: nil) }
      some_class.map_url('300x600')
    end

    it "should call map_url on GoogleMap instance" do
      GoogleMap.any_instance.should_receive(:map_url)
      some_class.map_url('300x600')
    end
  end
end 
```

# c - C中文件范围内的可变修改数组

> ID：13645936
> 
> 赞同：53
> 
> 时间：2012-11-30T13:10:01.210
> 
> 标签：c, arrays, static

我有一些这样的代码：

```
static int a = 6;
static int b = 3;

static int Hello[a][b] =
{
    { 1,2,3},
    { 1,2,3},
    { 1,2,3},
    { 1,2,3},
    { 1,2,3},
    { 1,2,3}
}; 
```

但是当我编译它时，它说错误：

> 在文件范围内可变地修改“你好”

怎么会这样？我该如何解决？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-11-30T13:14:26.547

您不能拥有大小作为变量给出的静态数组

这就是为什么常量应该是`#define`d：

```
#define a 6 
```

这样预处理器将替换`a`为`6`，使其成为有效声明。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-30T13:17:40.080

简单的回答`variable modified array at file scope is not possible`。

详细的 ：

使它成为 compile time `integral constant expression`，因为数组长度必须在编译时指定。

像这样 ：

```
#define a 6
#define b 3 
```

或者，遵循 c99 标准。并像 gcc 一样编译。

`gcc -Wall -std=c99 test.c -o test.out`

这里的问题是提供长度的可变长度数组可能未初始化，因此您会收到此错误。

简单地

```
static int a =6;
static int b =3;

void any_func()
{
int Hello [a][b]; // no need of initialization no static array means no file scope.
} 
```

现在使用 for 循环或任何循环来填充数组。

更多信息只是一个演示：

```
#include <stdio.h>
static int a = 6; 
int main()
{
int Hello[a]={1,2,3,4,5,6}; // see here initialization of array Hello it's in function
                            //scope but still error
return 0;
}

root@Omkant:~/c# clang -std=c99 vararr.c -o vararr
vararr.c:8:11: error: variable-sized object may not be initialized
int Hello[a]={1,2,3,4,5,6};
          ^
1 error generated. 
```

如果您删除静态并提供初始化，那么它将产生如上所述的错误。

但是如果你保持静态以及初始化，仍然会出错。

但是如果你删除初始化并保持`static`下面的错误就会出现。

```
error: variable length array declaration not allowed at file scope
static int Hello[a];
           ^     ~
1 error generated. 
```

因此，在文件范围内不允许可变长度数组声明，因此使其成为任何函数内的函数或块范围（但请记住使其成为函数范围必须删除初始化）

注意：因为它`C`被标记了，所以制作`a`和`b`as`const`不会帮助你，但`C++` `const`可以正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-02T04:48:28.990

使用 CLANG/LLVM 时，以下工作：

```
static const int a = 6;
static const int b = 3;

static int Hello[a][b] =
{
    { 1,2,3},
    { 1,2,3},
    { 1,2,3},
    { 1,2,3},
    { 1,2,3},
    { 1,2,3}
}; 
```

（要在生成的程序集中看到它，需要使用 Hello 所以它不会被优化出来）

但是，如果选择了 C99 模式（-std=c99），这将产生一个错误，如果选择了 -pedantic，它只会产生一个警告（Wgnu-folding-constant）。

GCC 似乎不允许这样做（const 被解释为只读）

请参阅此线程中的说明：

[Linux GCC中无缘无故的“初始化元素不是常量”错误，编译C](https://stackoverflow.com/questions/21592494/initializer-element-is-not-constant-error-for-no-reason-in-linux-gcc-compilin)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-04T06:25:15.220

是的，这很烦人：

```
const int len = 10;

int stuff[len]; 
```

给出错误。我试图避免使用#define x，因为 const int 是一种更好的声明常量的方法，但是在这些情况下 const int 不是真正的常量，即使编译器完全知道它是。

# activex - 如何在客户端机器上自动更新 ActiveX

> ID：13645939
> 
> 赞同：5
> 
> 时间：2012-11-30T13:10:05.250
> 
> 标签：activex, setup-deployment

我创建了一个安装在客户端机器上的 ActiveX 控件。现在我对 ActiveX 控件进行了一些更改，现在希望更改的 ActiveX 应该在客户端计算机中自动更新。

我已将安装文件的版本从 1.0.0 更改为 1.0.1，并将“removePreviousVersion”更改为“True”，但它仍然没有要求更新。

我是否应该更改 assmeblyinfo.cs 文件的 AssemblyVersion 和 AssemblyFileVersion。

我是否缺少更改产品代码或更新代码或版本的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-07T13:07:30.703

“要求更新”必须是您的实施。ActiveX/COM-s 不会自动更新。您可以运行安装程序来预安装新版本。

但是，您可以实施一些通过互联网检查新版本的服务/后台进程。必须有网络/文件服务器连接到互联网，共享一些小文件（例如文本或 XML 说明这是最新的可用版本）。

# android - 如何以编程方式更改壁纸？

> ID：13645942
> 
> 赞同：4
> 
> 时间：2012-11-30T13:10:20.417
> 
> 标签：android, wallpaper

我可以通过软件包名称更改已安装的壁纸吗？

例如：

```
String packageName = "com.wallpaper.livewallpaper";

start(packageName); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:00:21.410

在 Android 中以编程方式更改动态壁纸不是系统安全问题的可能原因。

# java - 关闭客户端套接字时如何防止“连接重置”错误？

> ID：13645945
> 
> 赞同：1
> 
> 时间：2012-11-30T13:10:33.083
> 
> 标签：java, sockets, stream

如果这很简单，请原谅我，因为我对服务器/客户端编码还很陌生，并且正在尝试自学。

我制作了一个服务器和客户端，它们在运行时都可以正常工作并完美交互。我遇到的问题是当我退出包含客户端的应用程序时。一旦我这样做，我就会收到一个无休止的错误说：

```
null -- Connection reset
java.net.SocketInputStream.read(SocketInputStream.java:113)
java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
java.io.BufferedInputStream.read(BufferedInputStream.java:317)
sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
sun.nio.cs.StreamDecoder.read0(StreamDecoder.java:107)
sun.nio.cs.StreamDecoder.read(StreamDecoder.java:93)
java.io.InputStreamReader.read(InputStreamReader.java:151) 
```

在客户端对套接字的引用上调用该`close()`方法似乎对此没有任何影响。我尝试从服务器调用`if(socket.isClosed())`，但它说即使在客户端关闭它之后它仍然打开。

当我的应用程序退出时，如何优雅地处理关闭流和套接字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:13:50.073

如果可能的话，您可以发送一些命令来告诉您的服务器应用程序关闭连接。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-30T19:00:56.947

显然，您正在阅读过去的 EOS，并且可能仍在服务器中发送数据。与 Alexander Pavlov 的回答相反，您不需要发送特殊消息，因为您在阅读时已经收到 EOS 指示，但您需要注意客户端关闭时发送的 EOS 指示。

# java - 确定对象的大小：在 scala/sbt 中使用仪器的最佳方法

> ID：13645950
> 
> 赞同：9
> 
> 时间：2012-11-30T13:11:03.603
> 
> 标签：java, scala, memory, sbt, instrumentation

根据[这个问题](https://stackoverflow.com/questions/52353/in-java-what-is-the-best-way-to-determine-the-size-of-an-object)，在 Java 中确定对象内存大小的标准方法是使用 java.lang.instrumentation。经过一些研究，似乎没有 Scala 特定的方法来实现这一点，所以 Java 方法也应该适用于此。

不幸的是，对于没有 Java 背景的 Scala 程序员来说，在 Scala 中采用这种技术并不完全简单。我的问题是：

**问题 1**

这里到底发生了什么？我猜我们必须将类`ObjectSizeFetcher`放在单独的 JAR 中的原因是为了确保它在我们想要使用它的实际程序之前以某种方式加载。`Premain-Class`我认为没有条目和参数就不可能使用仪器`-javaagent:TheJarContainingObjectFetcher.jar`？

**问题2**

有没有一种简单的方法可以在 SBT 中实现完整的工作流程？目前我只看到一个有点麻烦的解决方案：我首先必须建立一个辅助 SBT 项目，在其中定义`ObjectSizeFetcher`并打包到 JAR 中。到目前为止，我还没有弄清楚如何`Premain-Class`在打包过程中自动将条目添加到 JAR 中，所以我必须手动解决这个问题。我可以将生成的 JAR 添加到我想要使用的项目的本地库中`getObjectSize`。对于这个项目，我现在必须启用`fork in run`和使用`javaOptions in run += "-javaagent:TheJarContainingObjectFetcher.jar"`. 是否有更简单（且侵入性更小）的工作流程可以在现有 SBT 项目中快速使用仪器？也许我可以直接告诉 SBT`Premain-Class`以使这个辅助 JAR 变得不必要？

**问题 3**

你会推荐一种完全不同的方法来评估 Scala 中对象的内存使用情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:04:33.590

答案1：是的，如果你想要iinstrumentation，你需要获取一个实例。如果没有 Premain-Class 和 -javaagent，您可能无法获得它。

答案 2：您可以（并且可能需要）使用类加载器并创建一个非常简单的引导项目（在 Java 中或在带有 Proguard 的 Scala 中）。有两个原因：

第一个原因：方便。您可以使用 java.net.URLClassLoader 来包含标准 Scala 库和项目的 classes 目录。测试时不再需要在 JAR 中重新打包它。

第二个原因：防止 JAR 地狱。您可能知道 Scala 不是二进制兼容的。您还应该知道 Java 代理是在同一个类加载器中与应用程序一起加载的。如果类加载器包含 Scala 库，则应用程序不能简单地使用另一个 Scala 版本。

但是，如果 Java 代理不直接使用 Scala 库（例如，它是一个引导应用程序并在另一个类加载器中加载真正的代理及其库），则被检测的应用程序可以自由使用任何 Scala 库。

答案 3：我可能也会使用仪器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-16T08:36:17.140

答案3：你可以看一下[JOL（Java Object Layout）](http://openjdk.java.net/projects/code-tools/jol/)[`ktoso/sbt-jol`](https://github.com/ktoso/sbt-jol)的显示，即JVMs中对象布局方案的分析

```
// project/plugins.sbt
 addSbtPlugin("pl.project13.sbt" % "sbt-jol" % pluginVersionHere)

It does include the size:

> jol:internals example.Entry

...
[info] example.Entry object internals:
[info]  OFFSET  SIZE   TYPE DESCRIPTION                    VALUE
[info]       0    12        (object header)                N/A
[info]      12     4    int Entry.value                    N/A
[info]      16     4 String Entry.key                      N/A
[info]      20     4        (loss due to the next object alignment)
[info] Instance size: 24 bytes
[info] Space losses: 0 bytes internal + 4 bytes external = 4 bytes total 
```

# php - 为什么你可以在命名空间中覆盖 true 但不能覆盖 false？

> ID：13645954
> 
> 赞同：2
> 
> 时间：2012-11-30T13:11:07.560
> 
> 标签：php, constants

根据我对[http://3v4l.org/ZCJWA](http://3v4l.org/ZCJWA)以下示例的测试（对于 PHP 5.3.10 - 5.4.6）：

```
<?php
namespace Foo;
define('Foo\\true', false);
define('Foo\\false', true);

var_dump(
    true,
    false,
    1 === 1,
    1 === 0
); 
```

将返回：

```
bool(false)
bool(false)
bool(true)
bool(false) 
```

为什么你可以`true`用`false`而不用`false`覆盖`true`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T13:14:25.097

在您的 1st 之后`define`，`true`现在定义为`false`，因此`Foo\\false`设置为 `false`。

要使其按预期工作，您应该分别设置`Foo\\true`和`Foo\\false`的[全局空间](http://php.net/manual/language.namespaces.global.php)值：`true``false`

```
define('Foo\\true', \false);
define('Foo\\false', \true); 
```

# visual-studio - 切换结果窗格 SQL 编辑器 Visual Studio 2012 的快捷键

> ID：13645955
> 
> 赞同：4
> 
> 时间：2012-11-30T13:11:08.027
> 
> 标签：visual-studio, visual-studio-2012, keyboard-shortcuts

在 Visual Studio 2012 中，我尝试使用 Ctrl+R 并且它没有在 SQL 编辑器窗口中隐藏结果窗格。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T13:11:08.027

`Ctrl+D, R`.

请注意它**不是** `Ctrl+D, Ctrl+R`，即当您按下时您必须将手指从`Ctrl`键上抬起`R`

![工具 > 环境 > 键盘](../Images/b0a23dd6353830d128a72617d6fc7b97.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-20T06:52:48.937

转到工具 > 选项 > 环境 > 键盘/常规。

[![在此处输入图像描述](../Images/f4af3b8d36735995df1f50cc6bfdd0f9.png)](https://i.stack.imgur.com/cUhwF.png)

# c# - OLEDB 读取 CSV 文件仅返回第一列

> ID：13645958
> 
> 赞同：2
> 
> 时间：2012-11-30T13:11:27.520
> 
> 标签：c#, sql, csv, oledb

我正在尝试读取管道分隔的文本文件。第一行是

```
"BewerberID"|"Druck"|"Druckdatum"|"HistorieID"|"Bearbeiter"|"BewZuBewGruppeID"|"Bemerkung"
"12586"|"EinladungOFD.dot                                  "|"03.02.2003 00:00:00"|"162"|"Petersen  "|"20295"|"ungültig"
"12807"|"EinladungOFD.dot                                  "|"27.02.2003 00:00:00"|"258"|"Petersen  "|"20617"|""
"12807"|"EinladungOFD.dot                                  "|"28.02.2003 00:00:00"|"270"|"Petersen  "|"20617"|"" 
```

下面是我正在使用的 LINQpad 脚本。它运行完美，但仅从第一列返回值。

```
string mySelectQuery = "SELECT * FROM Historie.CSV";
OleDbConnection connection = new OleDbConnection
("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\\;" + 
   "Extended Properties=\"text;HDR=YES;IMEX=1;FMT=Delimited(|)\"");
connection.Open();
OleDbCommand cmd = connection.CreateCommand();
cmd.CommandText = mySelectQuery;
OleDbDataReader rdr = cmd.ExecuteReader();
rdr.Dump();
rdr.Close();
connection.Close(); 
```

这仅返回第一列。

```
BewerberID 
12586 
12807 
12807 
```

我尝试切换到列名`SELECT BewerberID, Druck FROM Historie.CSV`，但收到一条错误消息，指出“至少一个参数没有值”。（顺便说一句：`SELECT BewerberID FROM Historie.CSV`确实有效并且返回与 * 相同）

我该怎么做才能恢复所有列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T10:16:03.673

在与（在本例中）`schema.ini`相同的文件夹中创建一个文件。该文件应具有以下内容：`Historie.CSV``C:\`

```
[Historie.csv]
Format=Delimited(|)
ColNameHeader=True 
```

然后尝试重新运行代码。

一些链接：

*   [使用 DataReader 和 OLEDB Jet 数据提供程序读取 CSV 文件时，如何控制列数据类型？](https://stackoverflow.com/a/116111/111794)
*   [Schema.ini 文件（文本文件驱动程序）](https://docs.microsoft.com/en-us/sql/odbc/microsoft/schema-ini-file-text-file-driver)

# java - 如何在 android 2.3 中设置菜单背景

> ID：13645959
> 
> 赞同：0
> 
> 时间：2012-11-30T13:11:29.913
> 
> 标签：java, android, xml

我正在尝试为我的欢迎菜单设置颜色背景。我寻找解决方案，但没有找到适合我的解决方案。我正在使用 android 2.3 API

我的welcome_menu 代码：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/menu_preferiti"
    android:orderInCategory="100"
    android:title="@string/menu_preferiti"
    android:icon="@drawable/menu_preferiti_pressed"/>
<item
    android:id="@+id/menu_sicuro_bici"
    android:orderInCategory="100"
    android:title="@string/menu_navigazionesicura"
    android:icon="@drawable/menu_sicuro_bici_pressed"/>
<item
    android:id="@+id/menu_credits"
    android:orderInCategory="100"
    android:title="@string/menu_credits"
    android:icon="@drawable/menu_credits_pressed"/> 
```

WelcomeActivity 代码创建菜单

```
 @Override
public boolean onOptionsItemSelected(MenuItem item)
{
    Intent intent = null;
    switch (item.getItemId())
    {
    case R.id.menu_preferiti:
        // CAMBIARE LA QUERY!!! METTERE QUELLA DEL RECUPERO DEI PREFERITI CON JOIN!!!
        daos = new DAOService(this);
        ArrayList<Itinerario> listafav = daos.doRetriveAllItinerari();
        intent = new Intent(WelcomeActivity.this, FavoriteActivity.class);
        intent.putExtra("lista_favoriti", listafav);
        startActivity(intent);
        return true;

    case R.id.menu_sicuro_bici:
        intent = new Intent(WelcomeActivity.this, NavigazioneSicuraActivity.class);
        startActivity(intent);
        return true;

    case R.id.menu_credits:
       intent = new Intent(WelcomeActivity.this, CreditsActivity.class);
        startActivity(intent);
        return true;

    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

也许解决方案是为菜单创建样式，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:36:47.193

那是不可能的。但是，您可以显示自己的自定义菜单并使用`onKeyDown()`

# c# - 将字符串拆分为数组，删除空格

> ID：13645960
> 
> 赞同：6
> 
> 时间：2012-11-30T13:11:30.763
> 
> 标签：c#, .net, arrays, string, split

我有一个关于拆分字符串的问题。我想拆分字符串，但是当在字符串中看到字符“”时，不要拆分并删除空格。

我的字符串：

```
String tmp = "abc 123 \"Edk k3\" String;"; 
```

结果：

```
1: abc
2: 123
3: Edkk3  // don't split after "" and remove empty spaces
4: String 
```

我的结果代码，但我不知道如何删除“”中的空格

```
var tmpList = tmp.Split(new[] { '"' }).SelectMany((s, i) =>
                {
                    if (i % 2 == 1) return new[] { s };
                    return s.Split(new[] { ' ', ';' }, StringSplitOptions.RemoveEmptyEntries);
                }).ToList(); 
```

或者，但这没有看到“”，所以它分裂了一切

```
string[] tmpList = tmp.Split(new Char[] { ' ', ';', '\"', ',' }, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T13:16:00.257

添加 .Replace(" ","")

```
String tmp = @"abc 123 ""Edk k3"" String;";
var tmpList = tmp.Split(new[] { '"' }).SelectMany((s, i) =>
{
    if (i % 2 == 1) return new[] { s.Replace(" ", "") };
    return s.Split(new[] { ' ', ';' }, StringSplitOptions.RemoveEmptyEntries);
}).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:16:36.157

`string.Split`不适合你想做的事情，因为你不能告诉它忽略`"`.

我也不会去`Regex`，因为这会变得复杂且占用大量内存（对于长字符串）。

实现您自己的解析器 - 使用状态机来跟踪您是否在引用的部分内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T13:24:01.233

您可以使用正则表达式。不要拆分，而是指定要保留的内容。

例子：

```
string tmp = "abc 123 \"Edk k3\" String;";

MatchCollection m = Regex.Matches(tmp, @"""(.*?)""|([^ ]+)");

foreach (Match s in m) {
  Console.WriteLine(s.Groups[1].Value.Replace(" ", "") + s.Groups[2].Value);
} 
```

输出：

```
abc
123
Edkk3
String; 
```

# tdd - 如果没有 TDD 经验，是否可以学习 BDD？

> ID：13645961
> 
> 赞同：3
> 
> 时间：2012-11-30T13:11:48.800
> 
> 标签：tdd, bdd, testng, jbehave

我在 TDD 和 BDD 方面都没有经验。是的，我已经为现有代码创建了很多单元测试，但这与这里无关。此外，我不能在工作中使用 TDD/BDD，但想尝试一些爱好项目。

我不确定我目前是否正确掌握了 TDD 和 BDD 之间的区别。目前，我只将 BDD 视为演变的 TDD，其最具决定性的特性是能够在更高级别的抽象（用户故事）上工作，然后是 TDD。在 TDD 中，您基本上可以获得相同的用户故事，但它们不像在 BDD 中那样明确。这是对的吗？

在工具方面，假设上述陈述是正确的，对于 TDD，我应该使用 TestNG 或 JUnit 之类的东西，而对于 BDD，我将受益于 JBehave 之类的工具。

现在的问题是我是否应该首先从 TestNG 和 TDD 开始，并且只有在使用它获得一些成功经验之后才迁移到 JBehave 和 BDD？或者这只是浪费时间，没有任何理由阻止我从一开始就尝试使用 Jbehave 和 BDD？

**更新：**

在收到关于我的问题的两个很好的答案，并花了一些时间对该主题进行额外阅读后，我忍不住不添加指向我发现的一篇很棒的[文章的链接。](http://neelnarayan.blogspot.com/2010/07/bdd-is-more-than-tdd-done-right.html)它只是重复了与下面这个问题的两个答案相同的想法，但可能有更多细节。文章中我最喜欢的部分：

> ```
> The best way to do that is to leverage BDD and TDD. Here is an approach:
> 
>  1\. Write requirements as user stories using the BDD grammar/structure.
>     Do this collaboratively with the key stakeholders. 
> 
>  2\. Enter the User
>         Stories (feature + scenarios) in a BDD tool. 
>  3\. Write code to map the
>             User Stories to tests.
>  4\. Write production code using TDD to make the
>             tests pass. 
> ```
> 
> > 如您所见，BDD 不仅仅是正确的 TDD。您可以只使用 BDD 的词汇来改进 TDD，但这就像只使用 BDD 必须为我们提供的一些好处一样。当我们利用这两种技术的优势时，我们将拥有“重要的软件”和“有效的软件”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T13:41:13.317

BDD 专注于测试应用程序的功能，并确保它符合用户故事中所述的应用程序接受标准。

TDD 倾向于专注于较低级别的代码，在每个类的基础上进行测试，而不是在每个功能单元的基础上进行测试。

如果您对想要在用户故事中实现的目标有一个很好的了解——足以列举该功能应该和不应该做的事情的列表——那么您就可以开始 BDD。您可以从该列表中编写一个 BDD 功能文件，在编写一段代码之前执行此操作将使您能够考虑该功能并具体化您的想法。这将帮助您编写更简洁正确的代码。

我建议将 Cucumber-JVM 作为实现 BDD 测试的工具，但有人告诉我 JBehave 在功能上是相似的。

最后，对我来说，BDD 和 TDD 是相互补充而不是竞争的技术——事先进行 BDD 可以更容易地考虑需要什么，从而更容易考虑需要什么低级功能，这反过来又使更容易预先编写单元测试。编写代码后，您将拥有一套测试，可让您证明应用程序符合验收标准。

我做BDD的方式是这样的：

1) 检查用户故事的用户接受标准
2) 编写一个包含测试场景的特征文件（英文）来测试这些条件中的每一个。
3) 实现功能
4) 使用 Cucumber/JBehave 以编程方式实现功能文件中
的测试 5) 确保所有测试通过

然后我们维护一个包含这些测试的库，并将它们作为我们持续集成的一部分运行

功能文件包含特定措辞的说明，例如：

*给定一个用户访问我们的应用
当用户点击搜索链接
然后搜索窗口打开并且用户在搜索框中输入XXX
并且用户按下回车
显示搜索结果*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T13:34:41.980

尽管大多数文献都将 TDD 作为单元测试，将 BDD 作为验收测试，但这并不是它们的区别。

在实现层面上，BDD 基本上是 TDD，特别关注语言。BDD 的学习难度并不大，但是您会错过 BDD 的大部分价值，因为它面向团队沟通。

如果您还没有学习 JUnit，我的建议是学习 JUnit，因为它是最普遍的框架。开始 TDD/BDD 最困难的部分是弄清楚如何首先编写测试并设计可测试性。

如果你想学习纯 TDD/BDD，那么首先编写验收测试（可执行规范），让它们驱动你的单元测试和代码。对于一个小项目来说，这可能是矫枉过正，但却是一个很好的练习。

# jquery - JQuery Mobile + ASP.NET - 按钮不触发

> ID：13645965
> 
> 赞同：2
> 
> 时间：2012-11-30T13:12:06.950
> 
> 标签：jquery, asp.net, vb.net, jquery-mobile

我一直在通过这个网站寻找答案，但我被困住了。

有人可以帮我解决以下问题。我有一个用 VB 编写的 ASP.NET 项目并使用 jQuery Mobile 1.2.0 版本。

我有一个默认页面，其中有 2 个按钮（登录/关于），这些按钮可以工作并重定向到登录页面。但是在登录页面上，登录按钮事件不会触发 - 它只是重新定向回默认页面。在带有简单重定向按钮的 about 页面上也是如此。

但是，如果我刷新登录页面，那么按钮是否有效？

下面是代码：

```
<%@ Page Title="Login" Language="vb" EnableEventValidation="false" AutoEventWireup="false" MasterPageFile="~/Site.Master" CodeBehind="login.aspx.vb" Inherits="Sequencing.login" %>
<asp:Content ID="Content1" ContentPlaceHolderID="page_title" runat="server">
Login
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="head" runat="server">
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="pageheader" runat="server">
<h1>Login</h1>
</asp:Content>

<asp:Content ID="Content4" ContentPlaceHolderID="body" runat="server">

<asp:LinkButton ID="LinkButton1" data-role="button" data-rel="dialog" 
    data-transition="pop" runat="server" 
    Visible="False">LinkButton</asp:LinkButton>

<div align=center class="ui-bar ui-bar-c">

<asp:Image ID="Image1" runat="server" ImageUrl="~/images/McD_logoimage.png" /><br />

<h3>Planning the Future</h3>

<asp:UpdatePanel ID="UpdatePanel1" runat="server">
   <ContentTemplate>

<asp:Login ID="Login1" DestinationPageUrl="~/user/Main.aspx" runat="server" Width="100%">
<LayoutTemplate>
<asp:TextBox ID="UserName" runat="server" value placeholder="Username"></asp:TextBox>
<asp:RequiredFieldValidator ID="cvUserName" runat="server" ControlToValidate="UserName" ToolTip="User Name is required." ValidationGroup="Login1" Display="Dynamic">    </asp:RequiredFieldValidator>
<asp:TextBox ID="Password" runat="server" type="password" runat="server" value placeholder="Password"></asp:TextBox>
<asp:RequiredFieldValidator ID="cvPassword" runat="server" ControlToValidate="Password"     ToolTip="Password is required." ValidationGroup="Login1" Display="Dynamic">            </asp:RequiredFieldValidator>
<asp:CheckBox ID="RememberMe" runat="server" Text="Remember me!" />
<asp:Literal ID="FailureText" runat="server" EnableViewState="False"></asp:Literal>
<asp:Button ID="LoginButton" runat="server" data-role="button" data-theme="b"     CommandName="Login" Text="Log In" ValidationGroup="Login1" onclick="LoginButton_Click" />
    </LayoutTemplate>
</asp:Login>
    </ContentTemplate> 
</asp:UpdatePanel>
</div>
</asp:Content> 
```

提前感谢您的帮助。

除此之外 - 我已经查看了如何禁用 jQuery Mobile 并将代码添加到引用 jQuery 的站点主控器中 - 但是仍然没有乐趣！

```
<script>
    $(document).bind("mobileinit", function () {
        //apply overrides here
        $.mobile.ajaxEnabled = false;
    });
</script>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js">    </script>
<script type="text/javascript"     src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

其他人有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:13:25.513

打开`jQuery-mobile.js`并搜索“提交”，提交行为在移动版中的实现方式有所不同`.js`。

所以请评论一下手机中的提交功能`js`，然后您的asp.net表单将根据其行为提交。

在 mobile 中评论该提交行为`js`，您不会失去任何功能，因此只需将其评论出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T13:43:22.183

刷新登录页面后，您将看到表单如下所示：

```
<form method="post" action="Login.aspx" onsubmit="javascript:return WebForm_OnSubmit();" id="form1" class="ui-mobile-viewport ui-overlay-c"> 
```

但是，如果您注意到，当您第一次导航到[http://seq-dev.rs-mcd.co.uk/](http://seq-dev.rs-mcd.co.uk/)，然后单击“登录”时，`<form>`登录页面上的元素如下所示：

```
<form method="post" action="" id="form1" class="ui-mobile-viewport ui-overlay-c"> 
```

请注意，该表单没有正确的`action`或`onsubmit`ASP .NET 正常工作所需的值。

我对 jQuery Mobile 没有太多经验，但我确实看到它正在发挥其“AJAX 导航”的魔力，这与 ASP .NET 很矛盾。一般来说，ASP .NET 不能很好地与 jQuery mobile 配合使用（或者相反？）。也许您可以以某种方式禁用 AJAX 导航 - 这可能会奏效。如果您不能禁用 AJAX 导航，您将继续在 ASP .NET 中遇到服务器端事件的问题。

希望这会为您指明正确的方向。

**编辑**

经过一番搜索，我发现[这篇博客文章](http://www.webdesignerdepot.com/2011/05/10-handy-jquery-mobile-tips-and-snippets-to-get-you-started/)解释了如何禁用 jQuery Mobile AJAX 导航。这是相关的片段：

```
<script type="text/javascript">
  $(function() {
    // disable ajax nav
    $.mobile.ajaxLinksEnabled = false;
  });
</script> 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-18T07:09:05.043

您需要将提交行为设置为 false，然后添加如下所示的 OnClick 事件。

.aspx 页面 - asp:Button runat="server" ID="btnSubmit" Text="Submit" CssClass="Button" UseSubmitBehavior="false" OnClick="btnSubmit_Click">

.aspx.vb 页面 -

# 区域“按钮点击提交”

```
Protected Sub btnSubmit_Click(sender As Object, e As EventArgs)

    Response.Redirect("CanegateMidShiftTempB6TY.aspx")

End Sub 
```

# 结束区域

# html - 这样使用CSS有错吗？

> ID：13645969
> 
> 赞同：5
> 
> 时间：2012-11-30T13:12:12.690
> 
> 标签：html, css, coding-style

最近我正在使用一种 CSS 结构，它使 HTML 更清晰，但我不知道这是否有问题。

而不是使用：

```
.top { //properties }

.top-wrapper { //properties }

.top-logo { //properties } 
```

对于 HTML：

```
<div class="top">
    <div class="top-wrapper">
        <a href="" class="top-logo">Logo</a>
    </div>
</div> 
```

我实际上是这样编码的：

```
.top { //properties }

.top .wrapper { //properties }

.top .wrapper .logo { //properties } 
```

对于 HTML：

```
<div class="top">
    <div class="wrapper">
        <a href="" class="logo">Logo</a>
    </div>
</div> 
```

这样做有错吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T13:16:11.200

这没有错，但是您拥有的选择器越多，您的样式的最终**特异性就越高。**有关特异性的更多信息，请参见[http://www.w3.org/TR/CSS21/cascade.html#specificity](http://www.w3.org/TR/CSS21/cascade.html#specificity)。

想象一下你的例子

```
.top .wrapper .logo { font-size: 10px; } 
```

其次是：

```
.logo { font-size: 20px; } 
```

`<a class="logo">`即使您在第二个声明中将其指定为 20 像素，它的字体大小也会为10像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T13:15:39.470

**没有。**

您的第二个代码正在执行的操作是“针对具有 class 的元素内的所有元素，这些元素具有`top`class`wrapper`并应用此类和此类属性”

另一方面，您的第一个代码仅针对具有类`top-wrapper`（或其他）的元素，而不管其父类如何。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T13:16:30.063

这样做不一定是“错误的”，它有效，如果你发现它易于使用，我会说去吧！

但是 - 这种方法有一些缺点，例如您的 CSS 文件最终会变大，这意味着任何查看网站的人的下载时间都会更长（当然这种影响可以忽略不计）

还有一个问题是，如果你想重用`top-wrapper`另一个元素的样式，你必须将该元素放在一个带有`top`类的 div 中，这最终会使你的 HTML 变得混乱。

（有关上述要点的更多信息，请参阅[OOCSS](http://coding.smashingmagazine.com/2011/12/12/an-introduction-to-object-oriented-css-oocss/)）

归根结底，任何方法都有优点和缺点，如果您对这种方法感到非常满意，并且它对您有用 - 那就坚持下去！

**编辑：** 还应该注意的是，您的第二种方法比第一种方法需要更长的时间来渲染浏览器（浏览器必须检查多个条件而不仅仅是一个）有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/5797014/why-do-browsers-match-css-selectors-from-right-to-left)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T13:17:28.147

取决于您将如何使用该指定的类

```
.logo { //general properties  }

.top .wrapper .logo { //specific propery to top wrapper properties that overrides .logo }

.bottom .wrapper .logo { //specific property to bottom  wrapper that overrides .logo } 
```

HTML

```
<div class="top">
    <div class="wrapper>
        <a href="" class="logo">Logo</a>
    </div>
</div>

 <div class="bottom">
    <div class="wrapper>
        <a href="" class="logo">Logo</a>
    </div>
</div> 
```

一般情况下比较好

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T13:18:32.660

这没有错，但是如果您有 10 层嵌套，它可能会变得冗长且速度稍慢。`.logo`如果同时设置和`.wrapper .logo`样式，结果也可能更难调试。

另一方面，在 in或 in 中有一个`.button`不同的外观可能会很好。一般来说，使用在特定用例中有意义的东西。`.content``.menu`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-30T13:27:25.383

这里没有对错：一切都取决于您正在构建的网站，如果您在一个团队中，以及什么对您有意义。

就我个人而言，我不认为现在的 html 比以前更干净（在这个小例子中），但是你的 CSS 特异性已经增加，**这**可能会产生有害的连锁反应。

我现在问自己“为什么我要以这种方式设计这个元素？”。有时是因为继承，有时是因为碰巧发生在某个领域的特定情况。您使用的示例似乎是继承的良好候选者，但查看站点的其余部分可能会得出不同的结论。

据我所知，添加更长的类名不会*大大*降低性能。我怀疑唯一的影响是微不足道的，不太可能引起注意。真正依赖于实现

此外，如果您正在“阅读” html，那么阅读具有类似 的类名可能更有意义，否则`top-logo`您需要寻找合适的祖先（请记住，可能适用的祖先可能不止一个）。

我自己正忙于转向 OOCSS / BEM 方法（谷歌这些以获得更多信息，那里有很多资源......），因为我相信它会使将来的维护更容易，而且我发现它在团队环境中更有意义. 这些方法可能导致“classitis”或“混乱”html。不过我不介意，并认为网站越大，这就越有意义。如果您正在制作一个 4 页的网站，也许不必费心。

但这对我有用，可能不适合你。所以我回到我原来的说法，这里没有对错:)

# html - 下拉菜单显示菜单和子菜单之间的差距？

> ID：13645975
> 
> 赞同：0
> 
> 时间：2012-11-30T13:13:05.653
> 
> 标签：html, css, wordpress, wordpress-theming

我正在定制 wordpress 211 主题。这是参考[链接](http://tinkerbin.com/8eZz24PN)。在这里您可以看到，当您将鼠标悬停在菜单上时，它会显示下拉菜单。但是您可以看到父菜单（公司）和子菜单之间存在差距。那么如何清除呢？任何帮助和建议都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:21:52.593

这是因为下拉菜单上有 4px 的边距。

您需要更改`margin: 4px;`on `#access a {`，这将设置标签周围的边距`<a>`，包括标签下方。将其更改为`margin: 4px 4px 0 4px;`在除底部之外的所有边上放置边距

[在这里](http://tinkerbin.com/pda4PPlh)更新了演示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:24:22.253

更改一些CSS：

```
#access li:hover > a,
#access a:focus {
  background: #FFF; /* Show a solid color for older browsers */
  color: #373737;
  -webkit-border-radius: 5px 5px 0 0;
  -moz-border-radius: 5px 5px 0 0;
  border-radius: 5px 5px 0 0;
  margin-bottom: -4px;
  padding-bottom: 9px;
} 
```

必须添加边距底部。

其他答案更改了原始布局。

更新：添加了 padding-bottom。当我们上升 4 时它是 9px，我们需要下降 8 加 1 用于填充`#access a`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-30T13:20:48.973

只需更改以下 CSS 声明：

```
#access ul ul {
  -moz-box-shadow: 0 2px 3px rgba(0,0,0,0.2);
  -webkit-box-shadow: 0 3px 3px rgba(0,0,0,0.2);
  box-shadow: 0 3px 3px rgba(0,0,0,0.2);
  display: none;
  float: left;
  margin: 0;
  position: absolute;
  top: 33px;
  left: 4px;
  width: 193px;
  z-index: 99999;
  padding: 14px 0 5px 0;
  -webkit-border-radius: 0 0 2px 2px;
  -moz-border-radius: 0 0 2px 2px;
  border-radius: 0 0 2px 2px;
} 
```

到：

```
#access ul ul {
  -moz-box-shadow: 0 2px 3px rgba(0,0,0,0.2);
  -webkit-box-shadow: 0 3px 3px rgba(0,0,0,0.2);
  box-shadow: 0 3px 3px rgba(0,0,0,0.2);
  display: none;
  float: left;
  margin: 0;
  position: absolute;
  top: 41px;
  left: 4px;
  width: 193px;
  z-index: 99999;
  padding: 0 0 5px 0;
  -webkit-border-radius: 0 0 2px 2px;
  -moz-border-radius: 0 0 2px 2px;
  border-radius: 0 0 2px 2px;
  background-color: #FFF;
} 
```

`padding`注意和`top`属性的变化以及`background-color`.

# coq - 如何在当前目标的子表达式上使用重写

> ID：13645979
> 
> 赞同：7
> 
> 时间：2012-11-30T13:13:29.213
> 
> 标签：coq

在 coq 中，是否有可能以某种方式将引理或假设应用于当前目标的子表达式？例如，我想应用加号是可交换的事实，以便在此示例中交换 3 和 4。

```
Require Import Coq.Arith.Plus.

Inductive foobar : nat -> Prop :=
 | foob : forall n:nat, foobar n.

Goal foob (3 + 4) = foob (4 + 3).
Proof.
apply plus_comm. (* or maybe rewrite plus_comm *) 
```

给出：

```
Error: Impossible to unify "?199 + ?200 = ?200 + ?199" with
"foob (3 + 4) = foob (4 + 3)". 
```

我如何告诉 coq 在这个目标中应用 plus_comm 的确切位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T13:57:18.173

使用该策略`simpl`有效，但不要问我为什么`rewrite plus_comm`或`rewrite (plus_comm 3 4)`不起作用。`apply`是为了暗示，而不是方程式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-11T21:06:28.017

在这种特殊情况下，`rewrite`如果您使用构造函数参数而不是索引定义归纳类型，则将起作用：

```
Inductive foobar : Type :=
    | foob (n : nat). 
```

由于这种类型只有一个构造函数，我的理解（[来自这个答案](https://stackoverflow.com/questions/24600256/difference-between-type-parameters-and-indices)）是使用索引不会提供任何好处，但会使 Coq 更难进行模式匹配。

一般来说，以下两种技术都可以达到针对性的效果`rewrite`：

**断言**

```
assert (H: 3 + 4 = 4 + 3). { rewrite <- plus_comm. reflexivity. } 
```

**改写**

```
(* introduce a new sub-goal where you can prove that the replacement is OK *)
replace (3 + 4) with (4 + 3).
(* Coq orders the new goal last. I think it's clearer to tackle it first *)
Focus 2.
(* do the rewrite *)
rewrite <- plus_comm. reflexivity. 
```

# algorithm - 如何计算facebook中两个用户的相似度？

> ID：13645982
> 
> 赞同：4
> 
> 时间：2012-11-30T13:13:37.807
> 
> 标签：algorithm, similarity

我正在做一个关于数据挖掘的项目。我的公司给了我 600 万个 Facebook 的虚拟客户信息。我被指派找出任何两个用户之间的相似性。谁能给我一些如何处理大型社区数据的想法？提前致谢 ：）

问题：我使用状态信息和主题标签信息（主题标签是用户突出显示的那些词）作为衡量两个不同用户之间相似度的两个标准。由于用户数量众多，尤其是每个用户可能有数百万个标签和状态。谁能告诉我快速计算两个用户之间相似度的好方法？我曾尝试使用 TF-IDF 来计算两个不同用户之间的相似度，但似乎不可行。谁能有一个非常超级的算法或好主意，可以让我快速找到用户之间的所有相似之处？

例如：

```
user A's hashtag = `{cat, bull, cow, chicken, duck}`
user B's hashtag =`{cat, chicken, cloth}` 
user C's hashtag = `{lenovo, Hp, Sony}` 
```

显然，C 和 A 没有关系，所以不必计算相似度来浪费时间，我们可以先过滤掉所有不相关的用户，然后再计算相似度。事实上，超过 90% 的总用户与特定用户无关。如何以hashtag为标准，快速找到A的潜在相似用户群？这是一个好主意吗？还是我们直接计算 A 和所有其他用户的相对相似度？哪种算法将是解决该问题的最快和定制算法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T22:37:07.440

## 用户向量表示

使用您定义的内容是可以的。您还可以包括 facebook `likes`，这是用户兴趣的良好代表。

## 相似函数

余弦[距离](https://stackoverflow.com/questions/1746501/can-someone-give-an-example-of-cosine-similarity-in-very-simple-graphical-way)或[Jaccard](http://en.wikipedia.org/wiki/Jaccard_index)相似度都适合您的情况。

## 为给予用户寻找相似用户

### [Kd 树](http://en.wikipedia.org/wiki/K-d_tree)方法

您首先构建 kd 树，然后对于任何给定用户，您可以为该用户启动查询，kd-tree 能够根据相似度函数返回您的 k-最近邻。c++ 中的一个很好的实现是[here](http://people.cs.ubc.ca/%7Emariusm/index.php/FLANN/FLANN)。

### `locality-sensitive-hashing`方法

您将用户散列到不同的存储桶。相似的用户有更高的概率被散列在一起。因此，对于相似用户搜索，您只需比较同一存储桶中的用户。检查此示例：[如何理解局部敏感散列？](https://stackoverflow.com/questions/12952729/how-to-understand-locality-sensitive-hashing/12967538#12967538)

### `clustering`方法

尝试像[k-means](http://en.wikipedia.org/wiki/K-means_clustering)这样的聚类算法。这可能是您将用户分组到少量集群中的第一步，然后您可以`O(n^2)`在组中的所有用户对之间进行比较。

### `collaborative-filtering`方法。

将这些喜欢或主题标签视为用户喜欢的项目。然后，您可以尝试协同过滤方法。对于数百万用户，您可能希望使用一些基于 map-reduce 的实现，例如[mahout](http://mahout.apache.org/)。

# java - org.java.bluetooth.sprime.SimpleSPPClient 中的异常

> ID：13645987
> 
> 赞同：1
> 
> 时间：2012-11-30T13:13:52.630
> 
> 标签：java, bluetooth, bluecove

我一直在尝试操作在[http://sprime.googlecode.com/svn/trunk/sprime-bt/src/org/java/bluetooth/sprime/](http://sprime.googlecode.com/svn/trunk/sprime-bt/src/org/java/bluetooth/sprime/)`Sprime Bluetooth`上找到的服务器和客户端应用程序， 但问题是当我操作时客户端应用程序，并尝试连接到发现的设备之一，我得到以下异常：

正在搜索服务...

```
java.lang.ClassCastException: com.intel.bluetooth.obex.OBEXClientSessionImpl cannot be cast to javax.microedition.io.StreamConnection
BlueCove stack shutdown completed
    at org.java.bluetooth.sprime.SimpleSPPClient.runClient(SimpleSPPClient.java:109)
    at org.java.bluetooth.sprime.SprimeClient.main(SprimeClient.java:13) 
```

请帮我解决这个问题。

问候。

# inheritance - 如何在 Qt Creator 中使用超类构造函数？

> ID：13645996
> 
> 赞同：3
> 
> 时间：2012-11-30T13:14:33.550
> 
> 标签：inheritance, constructor, qt-creator, qt5

您可能知道，**Qt Creator**中的类是作为**class.h**和**class.cpp**文件的项目的一部分。假设我们有两个类A(ah,a.cpp)和B(bh,b.cpp)，并且B继承了A。在使用B的构造函数时如何使用A的构造函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T04:26:23.900

构造 B 时会自动调用 A 的构造函数。

如果您需要将参数传递给 A 的构造函数以使其正常工作，请在 B 的构造函数中显式调用它：

```
B::B()
 :A(Blah)
{
} 
```

当 A 是 QObject 并且您希望所有权正确发生时，这很常见，您将在 B 的构造函数中传递父指针并将其传递给 A：

```
B::B(QObject* parent_)
 :A(parent_)
{
} 
```

这与 Qt 无关，是一个纯 C++ 概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:27:54.687

您将拥有以下文件：

**啊**：

```
#ifndef A_H
#define A_H

class A
{
public:
    A();
};

#endif // A_H 
```

**a.cpp**：

```
#include "a.h"
#include <QDebug>

A::A()
{
    qDebug() << "A()";
} 
```

**:** _

```
#ifndef B_H
#define B_H

#include "a.h"

class B : public A
{
public:
    B();
};

#endif // B_H 
```

**b.cpp**：

```
#include "b.h"
#include <QDebug>

B::B() : A()
{
    qDebug() << "B()";
} 
```

**主.cpp**：

```
#include <QCoreApplication>
#include <QDebug>

#include "a.h"
#include "b.h"

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    B ob;

    return a.exec();
} 
```

它会打印出来：

```
A()
B() 
```