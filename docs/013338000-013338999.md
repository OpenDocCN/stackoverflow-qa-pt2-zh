# StackOverflow 问答 13338000-13338999

# ruby-on-rails - 未定义的方法“列”mongoid 和引导程序

> ID：13338004
> 
> 赞同：2
> 
> 时间：2012-11-12T03:26:48.830
> 
> 标签：ruby-on-rails, twitter-bootstrap, mongoid

我有一个带有 mongoid 的脚手架应用程序并做了：rails g bootstrap:install

但是当我说：

```
rails g bootstrap:themed Contratos 
```

我有这个错误：

```
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/twitter-bootstrap-rails-2.1.6/lib/generators/bootstrap/themed/themed_generator.rb:59:in block in columns': undefined method 'columns' for Contrato:Class (NoMethodError) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:17:46.653

查看主题生成器的源代码：

```
 def columns
    excluded_column_names = %w[id created_at updated_at]
    if defined?(ActiveRecord)
      rescue_block ActiveRecord::StatementInvalid do
        @model_name.constantize.columns.reject{|c| excluded_column_names.include?(c.name) }.collect{|c| ::Rails::Generators::GeneratedAttribute.new(c.name, c.type)}
      end
    else
      rescue_block do
        @model_name.constantize.fields.collect{|c| c[1]}.reject{|c| excluded_column_names.include?(c.name) }.collect{|c| ::Rails::Generators::GeneratedAttribute.new(c.name, c.type.to_s)}
      end
    end
  end 
```

您面临的问题是您的应用程序定义了 ActiveRecord 但您的 ar 使用 Mongoid。

您应该将文件中的行替换`require 'rails/all'`为`application.rb`以下行：

```
require "action_controller/railtie"
require "action_mailer/railtie"
require "active_resource/railtie"
require "rails/test_unit/railtie" 
```

有关 Mongoid 安装的更多信息，请参见：http: [//mongoid.org/en/mongoid/docs/installation.html](http://mongoid.org/en/mongoid/docs/installation.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T22:04:59.873

您所要做的就是为您的 Mongoid 模型添加一个“列”类方法，以便生成器仍然正确响应：

```
def self.columns
  self.fields.collect{|c| c[1]}
end 
```

这种方法基于 Nicolas Garnil 的回应并为我工作。

# jquery - jQuery HTML 过渡

> ID：13338007
> 
> 赞同：1
> 
> 时间：2012-11-12T03:27:24.297
> 
> 标签：jquery

我有一个搜索结果列表，其中包含 100 个项目。显示时会出现浏览器滚动条。到目前为止没有问题。

但是，当用户现在再次搜索时，这次只获得了 8 个结果，结果适合页面并且滚动条消失了。再次，没问题。

但是我现在想做的是让这个看起来很花哨。所以我想淡出结果，然后淡入新的。

问题是当你淡出时，整个窗口会按照设计的方式调整大小，滚动条会移动，然后显示新的结果。如果新结果需要滚动条，那么这看起来有点奇怪，因为它首先消失然后重新出现。

是否有一种纯粹的 jQuery 方法来推迟窗口调整大小，从而保持滚动条可见，直到下一次加载的结果完全显示？

我正在寻找的效果是，如果两个结果都需要滚动条，那么您淡出第一个结果，滚动条保持不变，淡入下一个，滚动条保持不变。而不是让它消失然后重新出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:46:08.840

垂直滚动条的显示基于文档中内容的高度与窗口高度的比较。因此，当您将内容添加到高于窗口的文档时，滚动条会出现，或者当内容不再高于窗口时，滚动条就会消失。

如果您想在过渡期间控制滚动条并使其独立于内容高度，那么您必须根据您要执行的操作使用 CSS 手动强制打开或关闭滚动条。这可以通过设置对象的`overflow-y`样式属性来完成`body`。例如：

```
$(document.body).css("overflow-y", "scroll"); 
```

将强制滚动条保持打开状态。您可以在`overflow-y` [此处](https://developer.mozilla.org/en-US/docs/CSS/overflow-y)查看选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T04:49:45.880

**[演示](http://jsfiddle.net/ZbnNP/2/)**——如何进行复杂的概念验证？

基本思想是它保持现有的垂直滚动条，直到替换进来。

```
// Specify the height of the container, for example, height:120px;
$('.container').height($('.container').height());
// Hide currently visible content.
// Load in new content.
// Reset the height of the container i.e. height:auto;
$('.container').height(''); 
```

# java - PHP 在大型迭代中运行缓慢

> ID：13338009
> 
> 赞同：0
> 
> 时间：2012-11-12T03:27:35.957
> 
> 标签：java, php, eaccelerator

为了通过迭代对 PHP 进行基准测试，我考虑了一个大的 for 循环

```
for($j=0;$j<20000000;$j++)
    ; 
```

在启用 eAccelerator 的 PHP 5.4 中执行相同的操作大约需要**2.5 秒**

.jsp 文件中的相同循环大约需要**15 毫秒**

```
for(int j=0;j<20000000;j++)
    ; 
```

为什么两者之间有如此巨大的差异？有没有办法让它在 PHP 中运行得更快

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T03:33:01.583

在 15ms 时，循环可能已由[JIT](http://java.dzone.com/articles/just-time-compiler-jit-hotspot)优化。除非您使用[HipHop VM](https://www.facebook.com/note.php?note_id=10150415177928920)， 否则您的[PHP 循环真的没有机会](https://stackoverflow.com/questions/1514676/is-php-compiled-or-interpreted)。

请记住，紧密循环的性能很难代表现实世界中实际工作负载的相对性能。改为查看 [计算机语言基准游戏](http://benchmarksgame.alioth.debian.org/)——甚至*他们*更有意义的测量也需要谨慎对待。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:34:26.190

这些类型的微基准测试应该是无关紧要的。

无论如何，这个循环稍微快一点：

```
$i = 20000000;
while($i--); 
```

[http://benchmarksgame.alioth.debian.org/u32/compare.php?lang=java&lang2=php](http://benchmarksgame.alioth.debian.org/u32/compare.php?lang=java&lang2=php)

# c - 无法将 C 结构传递给函数

> ID：13338011
> 
> 赞同：2
> 
> 时间：2012-11-12T03:28:15.690
> 
> 标签：c, struct

我在将结构传递给函数时遇到问题，并且遇到了错误：

> 'PWM_PINS' 未声明（在此函数中首次使用）

我通常能够在 C++ 编译器中毫无问题地做到这一点。对于我在这里可能做错的事情，我将不胜感激。

我在下面的头文件和 c 文件中包含了相关部分。

**pwm.h 文件：**

```
typedef struct PWM_tag{
    int PWM_1;
    int PWM_2;
    int PWM_3;
    int PWM_4;
    int PWM_5;
    int PWM_6;
} PWM;

void PWM_Set( uint32_t channelNum, uint32_t cycle, PWM PWN_PINS ); 
```

**pwm.c 文件：**

```
#include "pwm.h"
 void PWM_Set( uint32_t ChannelNum, uint32_t cycle, PWM PWN_PINS)
    {
        if ( ChannelNum == 1 )
        {
            LPC_PWM1->MR0 = cycle;
            LPC_PWM1->MR1 = PWM_PINS.PWM_1;
            LPC_PWM1->MR2 = PWM_PINS.PWM_2;
            LPC_PWM1->MR3 = PWN_PINS.PWM_3;
            LPC_PWM1->MR4 = PWM_PINS.PWM_4;
            LPC_PWM1->MR5 = PWM_PINS.PWM_5;
            LPC_PWM1->MR6 = PWM_PINS.PWM_6;

        }
        return;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T03:29:37.963

您声明了一个名为`PWN_PINS`(with an `N`) 的参数，但您指的是`PWM_PINS`(with an `M`)。

修复此错字将解决此特定错误。不过，可能还有更多错误 - 很难说，因为片段没有显示重要部分，例如`LPC_PWM1`变量的声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T03:45:29.903

代码中有拼写错误吗？

函数参数为**PWN_PINS**。但代码有 5 个**PWM_PINS**和 1 个**PWN_PINS**。

我认为您应该做的是将所有**PWN_PINS**更改为**PWM_PINS**。

# javascript - JWplayer - 一页上的多个播放器

> ID：13338013
> 
> 赞同：0
> 
> 时间：2012-11-12T03:28:21.370
> 
> 标签：javascript, jquery, video, flash, jwplayer

我在一页上有 3 个视频，但只有第一个加载。

我知道我必须为每个循环创建一个，但不确定如何去做。谁能指出我正确的方向？谢谢

我的页面看起来像：

```
<script type="text/javascript" src="jwplayer.js"></script>

<div class="container">Loading the player ...</div>
<script type="text/javascript">
jwplayer("container").setup({
flashplayer: "/jwplayer/player.swf",
file: "vid1.flv",
height: 270,
width: 480
});
</script>

<div class="container">Loading the player ...</div>
<script type="text/javascript">
jwplayer("container").setup({
flashplayer: "/jwplayer/player.swf",
file: "vid2.flv",
height: 270,
width: 480
});
</script>

<div class="container">Loading the player ...</div>
<script type="text/javascript">
jwplayer("container").setup({
flashplayer: "/jwplayer/player.swf",
file: "vid3.flv",
height: 270,
width: 480
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:57:15.747

好的，答案很简单......我只是给了 div 的个人名称：

例如：

```
<div id="container1">Loading the player ...</div>
<script type="text/javascript">
jwplayer("container1").setup({
flashplayer: "/jwplayer/player.swf",
file: "vid1.flv",
height: 270,
width: 480
});
</script>

<div id="container2">Loading the player ...</div>
<script type="text/javascript">
jwplayer("container2").setup({
flashplayer: "/jwplayer/player.swf",
file: "vid2.flv",
height: 270,
width: 480
});
</script> 
```

# facebook - 使用应用程序 access_token 读取公共事件

> ID：13338014
> 
> 赞同：0
> 
> 时间：2012-11-12T03:28:21.963
> 
> 标签：facebook, facebook-graph-api, access-token

我正在尝试使用带有我的应用程序 access_token 的 graphAPI 读取公共事件。

该令牌工作正常，如果我在调试控制台中调试它，它会返回它是我的应用程序的有效访问令牌。

调用此[https://graph.facebook.com/wikipedia/posts?access_token=MY_ACCESS_TOKEN](https://graph.facebook.com/wikipedia/posts?access_token=MY_ACCESS_TOKEN)它会返回正确的数据。

当我尝试调用以下内容时：

[https://graph.facebook.com/search?type=event&q=concert&access_token=MY_ACCESS_TOKEN](https://graph.facebook.com/search?type=event&q=concert&access_token=MY_ACCESS_TOKEN)，数据始终为空。

当我尝试使用调试工具提供的临时 access_token 调用该搜索时，我会返回大量数据。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:50:27.027

我在 FB API 文档中找到：

用户的基本个人资料信息（ID、姓名、用户名、性别）

用户的朋友和他们的 ID

用户授予您的应用程序的权限

我想唯一的方法是为此目的使用我的用户访问令牌

# apache - GWT-RPC、Apache、Tomcat 服务器数据大小检查

> ID：13338016
> 
> 赞同：0
> 
> 时间：2012-11-12T03:28:33.307
> 
> 标签：apache, security, gwt, tomcat, rpc

跟进[这个 GWT-RPC 问题（和答案#1）。字段大小检查](https://stackoverflow.com/questions/13327085/gwt-rpc-server-side-safe-deserialization-to-check-field-size)，我想知道检查**预反序列化**以获取发送到服务器的最大数据大小的正确方法，例如*如果请求数据大小 > X 然后中止请求*。重视简单性并基于上述问题/答案的答案，我倾向于相信检查最大整体请求大小就足够了，更细粒度的检查（即字段级别检查）可以推迟到反序列化后，但我愿意接受任何最佳实践建议。

感兴趣的技术栈：与 Apache-Tomcat 前端 Web 服务器的 GWT-RPC 客户端-服务器通信。

我想第一步是全局限制任何请求的大小（httpd.conf 中的*LimitRequestBody或/和其他？）。*
是否有更细粒度的检查，比如可以为每个 RPC 请求设置的东西？如果有，在哪里，怎么做？更细粒度的检查能为一个全局设置带来多少安全价值？

为了用一个例子更具体地描述这个问题，假设我们在同一个 servlet 上有以下两个 RPC 请求签名：

```
public void rpc1(A a, B b) throws MyException;
public void rpc2(C c, D d) throws MyException; 
```

假设我大约知道以下最大尺寸：

*   一个：10 KB
*   b: 40 KB
*   c: 1**兆**字节
*   d: 1 KB

然后我期望以下最大尺寸：

*   RPC1：50 KB
*   RPC2：1 MB

在这个例子的上下文中，我的问题是：

1.  在哪里/如何配置任何请求的最大大小 - 即在我上面的示例中为 1 MB？我相信它是httpd.conf 中的*LimitRequestBody*但不能 100% 确定它是否是用于此目的的唯一参数。
2.  如果可能，在哪里/如何配置每个 servlet 的最大大小——即，我的 servlet 中任何*rpc*的最大大小是 1 MB？
3.  如果可能，在哪里/如何配置/检查每个 rpc 请求的最大大小——即最大*rpc1*大小为 50 kB，最大*rpc2*大小为 1 MB？
4.  如果可能，在哪里/如何配置/检查每个 rpc 请求参数的最大大小——即，*a*是 10 kB，*b*是 40 kB，*c*是 1 MB，*d*是 1 kB。我怀疑进行后反序列化具有实际意义，不是吗？
5.  出于基于成本/收益的实际目的，通常建议进行什么级别的预反序列化检查——1\. 全局、2\. servlet、3\. rpc、4\. 对象参数？换句话说，上述每个反序列化前级别检查一方面的成本复杂性和另一方面的附加值大致是多少？

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T03:01:02.580

根据我自提出问题以来所学到的知识，在有人可以更好地向我展示之前，我自己的答案和策略是：

1.  第一道防线和检查是 Apache 在 httpd.conf 中设置的 LimitRequestBody。它是所有 servlet 中所有 rpc 调用的总体最大值。
2.  第二道防线是通过覆盖 GWT AbstractRemoteServiceServlet.readContent 对 servlet 进行预反序列化。例如，我想可以按照下面进一步显示的方式进行操作。这是我在这个问题中所追求的核心。
3.  然后可以在反序列化后进一步检查每个 rpc 调用参数。可以方便地在服务器端和客户端使用 JSR 303 验证——参见参考[StackOverflow](https://stackoverflow.com/questions/4247045/gwt-jsr-303-client-validation)和[gwt](http://code.google.com/p/google-web-toolkit/wiki/BeanValidation) re 客户端。

关于如何覆盖 AbstractRemoteServiceServlet.readContent 的示例：

```
@Override 
protected String readContent(HttpServletRequest request) throws ServletException, IOException
{
  final int contentLength = request.getContentLength();
  // _maxRequestSize should be large enough to be applicable to all rpc calls within this servlet.
  if (contentLength > _maxRequestSize)
    throw new IOException("Request too large");
  final String requestPayload = super.readContent(request);
  return requestPayload;
} 
```

如果最大请求大小 > 2GB，请参阅[此问题。](https://stackoverflow.com/questions/7423285/javax-servlet-httpservletrequest-getcontentlength-returns-int-only)

从安全的角度来看，这个策略对我来说似乎很合理，可以控制用户发送到服务器的数据大小。

# java - 2个OBB的接触点？

> ID：13338017
> 
> 赞同：2
> 
> 时间：2012-11-12T03:28:40.013
> 
> 标签：java, math, geometry

我正在为类似 GTA2 的游戏研究物理，以便了解更多关于游戏物理的信息。

碰撞检测和解决效果很好。

我现在只是不确定如何计算撞墙时的接触点。

这是我的 OBB 课程：

```
public class OBB2D
{
   private Vector2D projVec = new Vector2D();
   private static Vector2D projAVec = new Vector2D();
   private static Vector2D projBVec = new Vector2D();
   private static Vector2D tempNormal = new Vector2D();
   private Vector2D deltaVec = new Vector2D();

// Corners of the box, where 0 is the lower left.
   private  Vector2D corner[] = new Vector2D[4];

   private Vector2D center = new Vector2D();
   private Vector2D extents = new Vector2D();

   private RectF boundingRect = new RectF();
   private float angle;

    //Two edges of the box extended away from corner[0]. 
   private  Vector2D axis[] = new Vector2D[2];

   private double origin[] = new double[2];

   public OBB2D(float centerx, float centery, float w, float h, float angle)
    {
       for(int i = 0; i < corner.length; ++i)
       {
           corner[i] = new Vector2D();
       }
       for(int i = 0; i < axis.length; ++i)
       {
           axis[i] = new Vector2D();
       }
       set(centerx,centery,w,h,angle);
    }

   public OBB2D(float left, float top, float width, float height)
  {
       for(int i = 0; i < corner.length; ++i)
       {
           corner[i] = new Vector2D();
       }
       for(int i = 0; i < axis.length; ++i)
       {
           axis[i] = new Vector2D();
       }
       set(left + (width / 2), top + (height / 2),width,height,0.0f);
   }

   public void set(float centerx,float centery,float w, float h,float angle)
   {
       float vxx = (float)Math.cos(angle);
       float vxy = (float)Math.sin(angle);
       float vyx = (float)-Math.sin(angle);
       float vyy = (float)Math.cos(angle);

           vxx *= w / 2;
           vxy *= (w / 2);
           vyx *= (h / 2);
           vyy *= (h / 2);

           corner[0].x = centerx - vxx - vyx;
           corner[0].y = centery - vxy - vyy;
           corner[1].x = centerx + vxx - vyx;
           corner[1].y = centery + vxy - vyy;
           corner[2].x = centerx + vxx + vyx;
           corner[2].y = centery + vxy + vyy;
           corner[3].x = centerx - vxx + vyx;
           corner[3].y = centery - vxy + vyy;

           this.center.x = centerx;
           this.center.y = centery;
           this.angle = angle;
           computeAxes();
           extents.x = w / 2;
           extents.y = h / 2;

           computeBoundingRect();
   }

   //Updates the axes after the corners move.  Assumes the
   //corners actually form a rectangle.
   private void computeAxes()
   {
       axis[0].x = corner[1].x - corner[0].x;
       axis[0].y = corner[1].y - corner[0].y;
       axis[1].x = corner[3].x - corner[0].x;
       axis[1].y = corner[3].y - corner[0].y;

       // Make the length of each axis 1/edge length so we know any
       // dot product must be less than 1 to fall within the edge.

       for (int a = 0; a < axis.length; ++a) 
       {
        float l = axis[a].length();
        float ll = l * l;
        axis[a].x = axis[a].x / ll;
        axis[a].y = axis[a].y / ll;
           origin[a] = corner[0].dot(axis[a]);
       }
   }

   public void computeBoundingRect()
   {
       boundingRect.left = JMath.min(JMath.min(corner[0].x, corner[3].x), JMath.min(corner[1].x, corner[2].x));
       boundingRect.top = JMath.min(JMath.min(corner[0].y, corner[1].y),JMath.min(corner[2].y, corner[3].y));
       boundingRect.right = JMath.max(JMath.max(corner[1].x, corner[2].x), JMath.max(corner[0].x, corner[3].x));
       boundingRect.bottom = JMath.max(JMath.max(corner[2].y, corner[3].y),JMath.max(corner[0].y, corner[1].y)); 
   }

   public void set(RectF rect)
   {
       set(rect.centerX(),rect.centerY(),rect.width(),rect.height(),0.0f);
   }

    // Returns true if other overlaps one dimension of this.
    private boolean overlaps1Way(OBB2D other)
    {
        for (int a = 0; a < axis.length; ++a) {

            double t = other.corner[0].dot(axis[a]);

            // Find the extent of box 2 on axis a
            double tMin = t;
            double tMax = t;

            for (int c = 1; c < corner.length; ++c) {
                t = other.corner[c].dot(axis[a]);

                if (t < tMin) {
                    tMin = t;
                } else if (t > tMax) {
                    tMax = t;
                }
            }

            // We have to subtract off the origin

            // See if [tMin, tMax] intersects [0, 1]
            if ((tMin > 1 + origin[a]) || (tMax < origin[a])) {
                // There was no intersection along this dimension;
                // the boxes cannot possibly overlap.
                return false;
            }
        }

        // There was no dimension along which there is no intersection.
        // Therefore the boxes overlap.
        return true;
    }

    public void moveTo(float centerx, float centery) 
    {
        float cx,cy;

        cx = center.x;
        cy = center.y;

        deltaVec.x = centerx - cx;
        deltaVec.y  = centery - cy;

        for (int c = 0; c < 4; ++c)
        {
            corner[c].x += deltaVec.x;
            corner[c].y += deltaVec.y;
        }

        boundingRect.left += deltaVec.x;
        boundingRect.top += deltaVec.y;
        boundingRect.right += deltaVec.x;
        boundingRect.bottom += deltaVec.y;

        this.center.x = centerx;
        this.center.y = centery;
        computeAxes();
    }

    // Returns true if the intersection of the boxes is non-empty.
    public boolean overlaps(OBB2D other)
    {
        if(right() < other.left())
        {
            return false;
        }

        if(bottom() < other.top())
        {
            return false;
        }

        if(left() > other.right())
        {
            return false;
        }

        if(top() > other.bottom())
        {
            return false;
        }

        if(other.getAngle() == 0.0f && getAngle() == 0.0f)
        {
            return true;
        }

        return overlaps1Way(other) && other.overlaps1Way(this);
    }

    public Vector2D getCenter()
    {
        return center;
    }

    public float getWidth()
    {
        return extents.x * 2;
    }

    public float getHeight() 
    {
        return extents.y * 2;
    }

    public void setAngle(float angle)
    {
        set(center.x,center.y,getWidth(),getHeight(),angle);
    }

    public float getAngle()
    {
        return angle;
    }

    public void setSize(float w,float h)
    {
        set(center.x,center.y,w,h,angle);
    }

    public float left()
    {
        return boundingRect.left;
    }

    public float right()
    {
        return boundingRect.right;
    }

    public float bottom()
    {
        return boundingRect.bottom;
    }

    public float top()
    {
        return boundingRect.top;
    }

    public RectF getBoundingRect()
    {
        return boundingRect;
    }

    public boolean overlaps(float left, float top, float right, float bottom)
    {
        if(right() < left)
        {
            return false;
        }

        if(bottom() < top)
        {
            return false;
        }

        if(left() > right)
        {
            return false;
        }

        if(top() > bottom)
        {
            return false;
        }

        return true;
    }

    public static float distance(float ax, float ay,float bx, float by)
    {
      if (ax < bx)
        return bx - ay;
      else
        return ax - by;
    }

    public Vector2D project(float ax, float ay)
    {
        projVec.x = Float.MAX_VALUE;
        projVec.y = Float.MIN_VALUE;

      for (int i = 0; i < corner.length; ++i)
      {
        float dot = Vector2D.dot(corner[i].x,corner[i].y,ax,ay);

        projVec.x = JMath.min(dot, projVec.x);
        projVec.y = JMath.max(dot, projVec.y);
      }

      return projVec;
    }

    public Vector2D getCorner(int c)
    {
        return corner[c];
    }

    public int getNumCorners()
    {
        return corner.length;
    }

    public static float collisionResponse(OBB2D a, OBB2D b,  Vector2D outNormal) 
    {

        float depth = Float.MAX_VALUE;

        for (int i = 0; i < a.getNumCorners() + b.getNumCorners(); ++i)
        {
            Vector2D edgeA;
            Vector2D edgeB;
            if(i >= a.getNumCorners())
            {
                edgeA = b.getCorner((i + b.getNumCorners() - 1) % b.getNumCorners());
                edgeB = b.getCorner(i % b.getNumCorners());
            }
            else
            {
                edgeA = a.getCorner((i + a.getNumCorners() - 1) % a.getNumCorners());
                edgeB = a.getCorner(i % a.getNumCorners());
            }

             tempNormal.x = edgeB.x -edgeA.x;
             tempNormal.y = edgeB.y - edgeA.y; 

          tempNormal.normalize();

          projAVec.equals(a.project(tempNormal.x,tempNormal.y));
          projBVec.equals(b.project(tempNormal.x,tempNormal.y));

          float distance = OBB2D.distance(projAVec.x, projAVec.y,projBVec.x,projBVec.y);

          if (distance > 0.0f)
          {
            return 0.0f;
          }
          else
          {
            float d = Math.abs(distance);

            if (d < depth)
            {
              depth = d;
              outNormal.equals(tempNormal);
            }
          }
        }

        float dx,dy;
        dx = b.getCenter().x - a.getCenter().x;
        dy = b.getCenter().y - a.getCenter().y;
        float dot = Vector2D.dot(dx,dy,outNormal.x,outNormal.y);
        if(dot > 0)
        {
            outNormal.x = -outNormal.x;
            outNormal.y = -outNormal.y;
        }

        return depth;
    }

    public Vector2D getMoveDeltaVec()
    {
    return deltaVec;
}
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T08:39:59.450

> 我现在只是不确定如何计算撞墙时的接触点。

你可以用一个简单的平面来表示一堵墙。

**OBB-vs-plane 相交**测试是所有测试中最简单[`separating axis test`](http://www.codezealot.org/archives/55)的：

> 如果两个凸面物体不相交，那么就有一个平面，这两个物体的投影不会相交。

仅当平面法线形成分离轴时，框才会与平面相交。计算盒子中心的投影和投影半径（4个点积和一些加法），你就可以开始了（你也得到了穿透深度`for free`）。

**条件如下：**

|d| <= a1|n*A1| + a2|n*A2| + a3|n*A3|

这里：

`d`盒子中心到平面的距离。

`a1...a3`从中心到盒子的范围。

`n`飞机正常

`A1...A3`盒子的 x,y,z 轴

**一些伪代码：**

```
//Test if OBB b intersects plane p
int TestOBBPlane(OBB b, Plane p)
{
   // Compute the projection interval radius of b onto L(t) = b.c + t * p.n
   float r = b.e[0]*Abs(Dot(p.n, b.u[0])) +
      b.e[1]*Abs(Dot(p.n, b.u[1])) +
      b.e[2]*Abs(Dot(p.n, b.u[2]));

   // Compute distance of box center from plane
   float s = Dot(p.n, b.c) – p.d;

   // Intersection occurs when distance s falls within [-r,+r] interval
   return Abs(s) <= r;
} 
```

**OBB-vs-OBB 相交**测试更复杂。

让我们参考[这个很棒的教程](http://www.jkh.me/files/tutorials/Separating%20Axis%20Theorem%20for%20Oriented%20Bounding%20Boxes.pdf)：

> 在这种情况下，我们不再有垂直于分离轴的相应分离线。相反，我们有分离平面来分离包围体（并且它们垂直于它们相应的分离轴）。
> 
> 在 3D 空间中，每个 OBB 只有 3 个由其面延伸的唯一平面，并且分离平面与这些面平行。我们对平行于面的分离平面感兴趣，但在 3D 空间中，面并不是唯一的关注点。我们也对边缘感兴趣。感兴趣的分离平面平行于盒子的面，感兴趣的分离轴垂直于分离平面。因此，感兴趣的分离轴垂直于每个盒子的 3 个独特面。请注意，这 6 个感兴趣的分离轴对应于两个框的 6 个局部 (XYZ) 轴。
> 
> 因此，除了我们已经为面碰撞找到的 6 个分离轴之外，还有 9 个分离轴需要考虑用于边缘碰撞。这使得要考虑的可能分离轴的总数为 15。

以下是您需要测试的 15 个可能的分离轴 (L)：

```
CASE 1:  L = Ax
CASE 2:  L = Ay
CASE 3:  L = Az
CASE 4:  L = Bx
CASE 5:  L = By
CASE 6:  L = Bz
CASE 7:  L = Ax x Bx
CASE 8:  L = Ax x By
CASE 9:  L = Ax x Bz
CASE 10: L = Ay x Bx
CASE 11: L = Ay x By
CASE 12: L = Ay x Bz
CASE 13: L = Az x Bx
CASE 14: L = Az x By
CASE 15: L = Az x Bz 
```

这里：

`Ax`表示 A 的 x 轴的单位向量

`Ay`表示 A 的 y 轴的单位向量

`Az`表示 A 的 z 轴的单位向量

`Bx`表示 B 的 x 轴的单位向量

`By`表示 B 的 y 轴的单位向量

`Bz`表示 B 的 z 轴的单位向量

现在您可以看到 OBB-OBB 相交测试背后的算法。

**让我们跳转到源代码：**

2D OBB-OBB：[http ://www.flipcode.com/archives/2D_OBB_Intersection.shtml](http://www.flipcode.com/archives/2D_OBB_Intersection.shtml)

3D OBB-OBB：[http ://www.geometrictools.com/LibMathematics/Intersection/Intersection.html](http://www.geometrictools.com/LibMathematics/Intersection/Intersection.html)

**PS：**这个链接[http://www.realtimerendering.com/intersections.html](http://www.realtimerendering.com/intersections.html)对那些希望超越飞机和盒子的人很有用。

# c# - 网格视图。我需要推送“编辑”链接 2 次才能开始更新

> ID：13338022
> 
> 赞同：1
> 
> 时间：2012-11-12T03:29:27.540
> 
> 标签：c#, asp.net, gridview

如何解决？

我在 Page_Load、Page_PreRender 和标记中声明了处理程序。它不能正常工作。

代码：

```
<asp:GridView ID="tableResults" runat="server" DataMember="Table" EnableModelValidation="True"
    CssClass="GridViewStyle" OnRowDeleting="dataViewRowDeleting" AutoGenerateDeleteButton="True">
    <HeaderStyle CssClass="GridViewHeaderStyle" />
    <RowStyle CssClass="GridViewRowStyle" />
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:HyperLink ID="HyperLink1" runat="server" Text="Скачать объект" NavigateUrl='<%#"objects/" + Eval("Идентификатор") %>'></asp:HyperLink>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

处理程序：

```
tableResults.AutoGenerateEditButton = true;
tableResults.RowEditing += new GridViewEditEventHandler(tableResults_RowEditing);
tableResults.RowUpdating += new GridViewUpdateEventHandler(tableResults_RowUpdating);
tableResults.RowCancelingEdit += new GridViewCancelEditEventHandler(tableResults_RowCancelingEdit); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:40:11.430

好的，我尝试了您的代码并遇到了与您相同的问题。原因是您在 Page_Load 中手动调用 Databind，但没有重新附加数据源。您需要在编辑事件处理程序（以及其他事件处理程序）中重新附加数据源。

```
protected void tableResults_RowEditing(object sender, GridViewEditEventArgs e)
{
    tableResults.EditIndex = e.NewEditIndex;
    PopulateTableResults();   // In this method I attach the datasource and bind
} 
```

如果您不想手动执行此操作，则需要使用数据源控件。

# c# - 避免在另一个类中使用公共方法？

> ID：13338027
> 
> 赞同：2
> 
> 时间：2012-11-12T03:29:46.213
> 
> 标签：c#, class, access-modifiers

我有 2 个表格和 1 个班级。我把这个类变成了一个静态类。它有两种带有公共修饰符的方法。例如：公共字符串 PrintHello()、公共 void Task1()

我希望可以从 Form1 和 Form2 访问这些方法。我知道使用“公共”修饰符不好，所以我查看了“内部”修饰符，它似乎可以完成这项工作。

基本上，我想创建一种安全的方式来访问我的班级。这样做的最佳方法是什么，您能否举例说明如何这样做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T03:56:18.253

取决于您认为调用此方法的代码可能存在的位置。如果它只会被定义此方法的类调用，那么它应该是私有的。如果您只想从同一个程序集 (dll) 中调用它，但不想从其他 dll 中调用方法，那么您应该将其设为内部。通过这种方式，您可以将您的 dll 发送到其他项目，而不必担心支持您的方法（因为他们无法访问您的方法）。

但是如果你正在做一个通用的库/dll等，那么这些方法应该是公开的。

这完全取决于你认为谁或什么会调用你的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:58:41.123

访问修饰符不会为您的代码提供安全性。是否有人真的想使用您的 privet 方法，他可以使用 ILDASM 反编译您的代码并使用它们，这只是众多示例中的一个。

访问修饰符允许您使用面向对象的代码设计进行编程。一般来说：私有修饰符在您的类实现内部，并且您的代码的其他类或层不需要**也不想**知道那里的存在。

内部修饰符用于提供整个程序集所需的附加功能，但同样，它们对于任何其他（程序集之外）都不需要，因为它们是特定于实现的。

最后，公共修饰符用于定义您的类与外部世界的接口，这些方法和属性应该并且将被任何需要您代码中的某种功能的人使用。

# html - 单击时将音频和超链接添加到图像

> ID：13338035
> 
> 赞同：1
> 
> 时间：2012-11-12T03:31:24.820
> 
> 标签：html, image, audio, hyperlink, onclick

我正在为一个客户开发一个网站，他特别要求我们将这个角色的音频剪辑与该角色的图像联系起来，这样当您单击该角色的图像时，它就会播放他的商标短语之一。

除此之外，一些图像还需要包含超链接，因此当您单击图像时，它会播放音频并将您链接到另一个页面。

我已经成功地将音频链接到图像，并且为图像添加超链接并不是什么新鲜事，但我无法让它们同时工作！

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:09:57.763

其他人问了这个问题并被定向到[http://jplayer.org/](http://jplayer.org/)这是一个开源播放器，有各种关于如何实现它的指南，包括各种集成的 Javascript 函数，我想这些函数可以在“onclick”函数中使用..

-- 问题：[用javascript onClick播放mp3文件](https://stackoverflow.com/questions/10766538/play-mp3-file-with-javascript-onclick)

# java - Apache POI - 在数据库中读取和存储富文本内容

> ID：13338037
> 
> 赞同：1
> 
> 时间：2012-11-12T03:31:52.540
> 
> 标签：java, apache-poi

我们的 Java 应用程序有一个新要求，用户需要上传一个 Excel 文件。excel 文件中的一列将被格式化为粗体、斜体、项目符号、彩色文本等。

我们需要读取这个 excel 文件并将这些值存储在 Oracle DB 表中。随后，我们需要提取这些数据并下载到保留格式的 Excel 工作表中。

我们计划使用**Apache-poi**，但现在卡在了我们需要将`HSSFRichTextString`对象转换为格式以存储到 Oracle 表中的点上。

的`tostring()`方法`HSSFRichTextString`给出了字符串，但格式丢失了。有人可以建议我如何将此`HSSFRichTextString`对象转换为 Oracle 数据类型（最好是 clob）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T23:11:02.517

你是对的，该`toString()`方法只会`String`返回`HSSFRichTextString`.

这是一种从 中提取所有其他重要数据`HSSFRichTextString`以与字符串值一起存储的方法。

[与我对这个问题的回答](https://stackoverflow.com/questions/9699151/is-it-possible-to-append-2-rich-text-strings/18369404#18369404)非常相似，从 中提取富文本格式信息`HSSFRichTextString`，并将该数据存储在您将创建的类中，`FormattingRun`.

```
public class FormattingRun {
    private int beginIdx;
    private int length;
    private short fontIdx;
    public FormattingRun(int beginIdx, int length, short fontIdx) {
        this.beginIdx = beginIdx;
        this.length = length;
        this.fontIdx = fontIdx;
    }
    public int getBegin() { return beginIdx; }
    public int getLength() { return length; }
    public short getFontIndex { return fontIdx; }
} 
```

然后，调用 Apache POI 方法来提取该数据。

*   [numFormattingRuns()](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFRichTextString.html#numFormattingRuns()) - 返回`HSFFRichTextString`.
*   [getFontOfFormattingRun(int)](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFRichTextString.html#getFontOfFormattingRun(int)) - 返回`short`字符串中指定位置的字体索引

现在，实际提取数据：

```
List<FormattingRun> formattingRuns = new ArrayList<FormattingRun>();
int numFormattingRuns = richTextString.numFormattingRuns();
for (int fmtIdx = 0; fmtIdx < numFormattingRuns; fmtIdx)
{
    int begin = richTextString.getIndexOfFormattingRun(fmtIdx);
    short fontIndex = richTextString.getFontOfFormattingRun(fmtIdx);

    // Walk the string to determine the length of the formatting run.
    int length = 0;
    for (int j = begin; j < richTextString.length(); j++)
    {
        short currFontIndex = richTextString.getFontAtIndex(j);
        if (currFontIndex == fontIndex)
            length++;
        else
            break;
    }
    formattingRuns.add(new FormattingRun(begin, length, fontIndex));
} 
```

`HSSFRichTextString`要将这些数据存储在数据库中，首先要认识到 a和之间存在一对多的关系`FormattingRun`。因此，在您计划存储富文本字符串数据的任何 Oracle 表中，您都需要创建与另一个存储格式化运行数据的新表的外键关系。像这样的东西：

```
Table: rich_text_string
rts_id     NUMBER
contents   VARCHAR2(4000) 
```

`rts_id`作为主键，并且：

```
Table: rts_formatting_runs
rts_id     NUMBER
run_id     NUMBER
run_pos    NUMBER
run_len    NUMBER
font_index NUMBER 
```

`(rts_id, run_id)`作为主键，并返回`rts_id`表`rich_text_string`。

使用您最喜欢的 Java 到数据库框架（JDBC、Hibernate 等），将`String`值存储到`contents`in 中`rich_text_string`，并将关联的`FormattingRun`对象数据存储到`rt_formatting_runs`.

请注意 - 字体索引仅在工作簿中有效。您还需要存储字体信息`HSSFWorkbook`，以赋予`font_index`含义。

它不存储为`CLOB`，但可以说以这种方式存储数据更有意义。

# c# - 将来自不同来源的两个 LINQ 查询合并到单个对象中

> ID：13338040
> 
> 赞同：5
> 
> 时间：2012-11-12T03:32:24.980
> 
> 标签：c#, linq

我正在从两个不同的来源收集数据，目的是填充单个对象。我的课是

```
public class SampleClient
{
    public string ClientId { get; set; }
    public string JobName { get; set; }
    public string JobUrl { get; set; }
    public string Version { get; set; }
} 
```

第一个 LINQ 查询填充`SampleClient`对象集合，获取除 Version 之外的所有值。然后我需要遍历第二个查询中的值的集合`SampleClient`并利用它。`ClientId`第二个查询的结果是版本值。这是我的第一个 LINQ 查询：

```
 private void btnProjects_Click(object sender, EventArgs e)
    {
        string[] stringArray = { "demo", "sample", "test", "training" };
        List<SampleClient> jobList =
        (
            from x in XDocument.Load(XML URL VALUE HERE).Root.Elements("job")
            where x.Element("name").Value.Contains("-config") && x.Element("name").Value.StartsWith("oba-")
            && (!stringArray.Any(s => x.Element("name").Value.Contains(s)))
            select new SampleClient
            {
                ClientId = getClientId((string)x.Element("name")),
                JobName = (string)x.Element("name"),
                JobUrl = (string)x.Element("url"),
            }).ToList();

        foreach (SampleClient job in jobList)
        {
            //Display the results in a textbox
            txtResults.Text += "Job Name = " + job.JobName + " | Job URL = " + job.JobUrl + " | ";
        }
    } 
```

在获取版本的查询中，我目前有：

```
var version = from item in doc.Descendants(ns + "properties")
select new SampleClient
{
    ClientId = strClientId,
    Version = (string)item.Element(ns + "product.version").Value
}; 
```

需要注意的是，第二个查询中使用的 URL 源是使用`ClientId`从第一个查询中获得的。我可以有一个例行的循环和清理/合并对象，但这感觉就像一个黑客。有没有更清洁的方法来处理这个？

这是第一个查询中的 XML 示例：

```
<?xml version="1.0"?>
<allView>
    <description>PROD</description>
    <job>
        <name>abc</name>
        <url>http://ci-client.company.net/job/abc/</url>
        <color>blue</color>
    </job>
    <job>
        <name>acme</name>
        <url>http://ci-client.company.net/job/acme/</url>
        <color>blue</color>
    </job>
</allView> 
```

第二个查询 URL 是使用第一个查询结果中的 clientID 动态创建的。我正在使用它来加载 Maven POM 文件并获取版本信息。这是来自 POM 文件的 XML 片段。

```
<?xml version="1.0" encoding="UTF-8" ?> 
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion> 
    <groupId>com.company.xyz</groupId> 
    <artifactId>io</artifactId> 
    <version>6.11.7-ACME-SNAPSHOT</version> 
    <packaging>pom</packaging> 
    <properties>
        <product.version>6.11.7</product.version> 
        <db.version>1.4</db.version> 
    </properties>
    <modules>
        <module>policies</module> 
        <module>templates</module> 
        <module>assemble</module> 
    </modules>
</project> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T04:07:58.017

我希望我能理解你的问题..

这会将它们合并在一起（尽管我的测试数据只有 ClientId、JobName 和 Version..）。Query 1 包含 ClientId 和 JobName，Query2 包含 ClientId 和 Version。

```
IList<SampleClient> mergedList = firstQuery.Concat(secondQuery)
    .ToLookup(x => x.ClientId)
    .Select(x => x.Aggregate((query1, query2) => 
            new SampleClient() { 
                    ClientId = query1.ClientId, 
                    JobName = query1.JobName,
                    Version = query2.Version 
                }
            )
    ).ToList(); 
```

..可能不如您的手动方法高效..但是我没有什么可作为基准的..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T04:19:20.703

尝试这个：

```
var jobList = from x in XDocument.Load(...
              where ...
              let clientId = getClientId((string)x.Element("name"))
              select new SampleClient
              {
                  ClientId = clientId,
                  JobName = (string)x.Element("name"),
                  JobUrl = (string)x.Element("url"),
                  Version = (string)XDocument
                      .Load(GetSecondQueryUrl(clientId))
                      .Root
                      .Element(pom4 + "properties")
                      .Element(pom4 + "product.version")
              }; 
```

# java - VB .NET 的计算方式与 Java 不同

> ID：13338043
> 
> 赞同：6
> 
> 时间：2012-11-12T03:32:37.823
> 
> 标签：java, .net, vb.net, math, encryption

有人可以向我解释为什么.net 计算这些与 Java 不同

方程

```
(-1646490243 << 4) + 3333 ^ -1646490243 + -957401312 ^ (-1646490243 >> 5) + 4 
```

Java将其计算为

```
1173210151 
```

.Net 计算为

```
-574040108 
```

我的问题是我需要 .Net 来计算与 Java 相同的值，因为我正在跨解密函数进行移植，如果它的计算方式不同，那么解密就不会正确。

任何帮助，将不胜感激。

**- 更新 -**

谢谢大家，Xor 是我应该使用的。另外，当整数太大时，需要解决 Java 不抛出异常的问题。

Xor 的结果为 -3121757145

```
(-1646490243 << 4) + 3333 Xor -1646490243 + -957401312 Xor (-1646490243 >> 5) + 4 
```

将此与我发现的此链接的答案结合起来 - [Java sum 2negative numbers](https://stackoverflow.com/questions/5121698/java-sum-2-negative-numbers)。给出与 Java 相同的结果

```
-3121757145 + 2 ^ 32 = 1173210151 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T03:39:51.833

我检查了[Java](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)和[Visual Basic](http://msdn.microsoft.com/en-us/library/fw84t893%28v=vs.80%29.aspx)的运算符优先级表，它们对于表达式中的运算符是相同的。所以优先级不是问题。

但请注意，在 Visual Basic`^`中，[求幂运算](http://msdn.microsoft.com/en-us/library/zh100ckf%28v=vs.80%29.aspx)是运算符，而[异或](http://msdn.microsoft.com/en-us/library/csw1x2a6%28v=vs.80%29.aspx)`Xor`运算是运算符。这与 Java 不同，Java 使用运算符作为异或并且没有求幂运算符。表达式中的所有其他运算符在两种语言中都是相同的`^`

我无法从代码中判断该片段是 Java 中的片段还是 Visual Basic 中的片段 - 我猜是 Java 中的片段。如果是这种情况，您很可能混淆了独占或；尝试在 Visual Basic 代码中替换`^`为`Xor`，看看是否能解决问题：

```
(-1646490243 << 4) + 3333 Xor -1646490243 + -957401312 Xor (-1646490243 >> 5) + 4 
```

# c++ - 如何将此 LDAP 代码从 VBS 转换为 C++

> ID：13338045
> 
> 赞同：4
> 
> 时间：2012-11-12T03:32:38.523
> 
> 标签：c++, winapi, vbscript, active-directory, ldap

我正在尝试编写一个 C++ 代码来枚举当前工作站在 Active Directory 设置中所属的组。我能够想出以下 Visual Basic 脚本，它完全符合我的需要：

```
'DN for the workstation
cCN = "CN=WorkstationName,CN=Computers,DC=mydomain,DC=local"
Set objComputer=GetObject("LDAP://" & cCN)

Dim strAll
Dim colGroups, objGroup

strAll = ""
Set colGroups = objComputer.Groups
For Each objGroup In colGroups
    strAll = strAll & objGroup.distinguishedName & vbLf
Next

Wscript.Echo strAll 
```

我收到这样的输出：

```
CN=Group1,OU=SomeOU,DC=mydomain,DC=local
CN=Group2,OU=SomeOU,DC=mydomain,DC=local 
```

问题是我似乎无法将 LDAP 内容转换为 C++。

如果有人可以帮助我，我真的很感激？

**编辑：** *以下是我从我的 C++ 知识和 COM 中收集到的尽可能多的内容：*

```
// Initialize COM.
CoInitialize(NULL);

LPCTSTR pwszContainerDN = L"CN=WorkstationName,CN=Computers,DC=mydomain,DC=local";

CComBSTR strADsPath = L"LDAP://";
strADsPath += pwszContainerDN;

IADs *objComputer;
HRESULT hr;

hr = ADsGetObject(strADsPath,
    IID_IADs,
    (void**) &objComputer);

if(SUCCEEDED(hr))
{
    //Now how do you do "objComputer.Groups"?
    //Then later "For Each" enumeration, etc.?
}

// Uninitialize COM.
CoUninitialize(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:35:38.867

您还可以使用 WinLDAP 库。请参阅此[LDAP Search with winldap.h on AD Server](https://stackoverflow.com/questions/11133752/ldap-search-with-winldap-h-on-ad-server)。

# ruby-on-rails-3 - 没有猴子补丁的自定义错误消息处理器

> ID：13338049
> 
> 赞同：1
> 
> 时间：2012-11-12T03:33:07.627
> 
> 标签：ruby-on-rails-3, internationalization, rubygems

我已经为韩语实现了一个自定义错误消息处理器。在韩语中，根据前面的名词或代词的发音，后置词采用不同的形式。

例如，在标记主语时，**ka (가)**用在元音后面，**i (이)**用在辅音后面。

示例（连字符表示语素边界）：

```
Romanization: sakwa-ka ppalkah-ta.
Gloss:        Apple-SUBJECT red-PRESENT.
Translation:  Apple is red.

Romanization: phainayphul-i tal-ta.
Gloss:        Pineapple-SUBJECT sweet-PRESENT.
Translation:  Pineapple is sweet. 
```

因此，在 ActiveModel::Errors 中实现的标准错误消息系统对于韩语来说是不够的。您应该在消息中包含大量重复的属性（“A 为空白”，“B 为空白”，“C 为空白”，...），或者避免在通常很难或使尴尬的句子。

我猴子修补了 ActiveModel::Errors 并进行了修改`generate_message`以解决此问题。以下是目前在我的 Rails 应用程序中的代码 ( [Gist )。](https://gist.github.com/3988479)`config/initializers`

```
# encoding: UTF-8
# Original article: http://dailyupgrade.me/post/6806676778/rubyonrails-full-messages-for-korean
# Modified to support more postpositions and client_side_validations gem.
#
# Add Korean translations like this:
#   ko:
#     errors:
#       format: "%{message}"
#       messages:
#         blank: "%{attribute}((이)) 입력되지 않았습니다"
#         taken: "이미 사용 중인 %{attribute}입니다"
#         invalid: "잘못된 %{attribute}입니다"
#         too_short: "%{attribute}((이)) 너무 짧습니다"
#

class Korean

  POSTPOSITIONS = {"은" => "는", "이" => "가", "을" => "를", "과" => "와", "으로" => "로"}

  def self.select_postposition(last_letter, postposition)
    return postposition unless last_letter >= "가" && last_letter <= "힣"
    final = last_letter.mb_chars.last.decompose[2]
    if final.nil?
      # 받침 없음
      POSTPOSITIONS[postposition] || postposition
    elsif final == "ㄹ" && (postposition == "으로" || postposition == "로")
      # 'ㄹ 받침 + (으)로'를 위한 특별 규칙
      "로"
    else
      # 받침 있음
      POSTPOSITIONS.invert[postposition] || postposition
    end
  end
end

module ActiveModel

  class Errors

    old_generate_message = instance_method("generate_message")

    define_method("generate_message") do |attribute, type = :invalid, options = {}|
      msg = old_generate_message.bind(self).(attribute, type, options)
      return msg unless I18n.locale == :ko
      msg.gsub(/(?<=(.{1}))\(\((은|는|이|가|을|를|과|와|으로|로)\)\)/) do
        Korean.select_postposition $1, $2
      end
    end
  end
end 
```

我的第一个问题是是否有可能在没有猴子补丁的情况下实现相同的目标。我是 Rails 的新手（也是 Ruby），所以想不出更好的解决方案。

第二个问题是关于从我的 Rails 应用程序中提取此代码并将其制成单独的 gem。我正在努力开发宝石，最近制作了[我的第一颗宝石](https://github.com/clee704/virtual_attributes)。我应该把这段代码放在 gem 的什么地方？`config/initializers`似乎不对。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T07:46:50.183

我不擅长 ruby​​，但下面的 javascript 代码做同样的事情。我希望它会有所帮助。

```
var hasJongsung = function(word) {
  return !!(word && word[word.length -1].charCodeAt()>=0xAC00 && word[word.length-1].charCodeAt()<=0xD7A3 && (word[word.length -1].charCodeAt()-0xAC00)%28);
}; 
```

来源：[http ://spectrumdig.blogspot.kr/2012/11/unicode-20.html](http://spectrumdig.blogspot.kr/2012/11/unicode-20.html)

# c++ - 在 NetBeans 7.2 中找不到 io.h

> ID：13338056
> 
> 赞同：0
> 
> 时间：2012-11-12T03:33:52.137
> 
> 标签：c++

我对 C++ 编程很陌生，所以请耐心等待。我目前正在开发一个 C++ 项目，使用 NetBeans 7.2 for Mac Lion。对于这个项目，我的教授给了我们他 main.cpp 的代码（根据教授的说法，它是用 C 语言编写的）。

当我将他的代码复制/粘贴到我的项目中时，我收到一条错误`#include <io.h>`消息，指出“找不到包含文件 io.h”，随后出现其他依赖错误。我已经搜索了整个网络，但似乎无法找到问题所在。我正在使用 GCC/G++ 编译器，这让我更加困惑。我的教授说“io.h”一直存在，所以他不明白为什么找不到它。我尝试从终端使用“locate io.h”命令。然而，它产生了太多的结果，我无法理解哪些是重要的，如果有的话。

我什至尝试将代码复制并粘贴到 XCODE 中，只是发现仍然找不到“io.h”。

对此问题的任何帮助将不胜感激。

生成文件...

```
#
#  There exist several targets which are by default empty and which can be 
#  used for execution of your targets. These targets are usually executed 
#  before and after some main targets. They are: 
#
#     .build-pre:              called before 'build' target
#     .build-post:             called after 'build' target
#     .clean-pre:              called before 'clean' target
#     .clean-post:             called after 'clean' target
#     .clobber-pre:            called before 'clobber' target
#     .clobber-post:           called after 'clobber' target
#     .all-pre:                called before 'all' target
#     .all-post:               called after 'all' target
#     .help-pre:               called before 'help' target
#     .help-post:              called after 'help' target
#
#  Targets beginning with '.' are not intended to be called on their own.
#
#  Main targets can be executed directly, and they are:
#  
#     build                    build a specific configuration
#     clean                    remove built files from a configuration
#     clobber                  remove all built files
#     all                      build all configurations
#     help                     print help mesage
#  
#  Targets .build-impl, .clean-impl, .clobber-impl, .all-impl, and
#  .help-impl are implemented in nbproject/makefile-impl.mk.
#
#  Available make variables:
#
#     CND_BASEDIR                base directory for relative paths
#     CND_DISTDIR                default top distribution directory (build artifacts)
#     CND_BUILDDIR               default top build directory (object files, ...)
#     CONF                       name of current configuration
#     CND_PLATFORM_${CONF}       platform name (current configuration)
#     CND_ARTIFACT_DIR_${CONF}   directory of build artifact (current configuration)
#     CND_ARTIFACT_NAME_${CONF}  name of build artifact (current configuration)
#     CND_ARTIFACT_PATH_${CONF}  path to build artifact (current configuration)
#     CND_PACKAGE_DIR_${CONF}    directory of package (current configuration)
#     CND_PACKAGE_NAME_${CONF}   name of package (current configuration)
#     CND_PACKAGE_PATH_${CONF}   path to package (current configuration)
#
# NOCDDL

# Environment 
MKDIR=mkdir
CP=cp
CCADMIN=CCadmin

# build
build: .build-post

.build-pre:
# Add your pre 'build' code here...

.build-post: .build-impl
# Add your post 'build' code here...

# clean
clean: .clean-post

.clean-pre:
# Add your pre 'clean' code here...

.clean-post: .clean-impl
# Add your post 'clean' code here...

# clobber
clobber: .clobber-post

.clobber-pre:
# Add your pre 'clobber' code here...

.clobber-post: .clobber-impl
# Add your post 'clobber' code here...

# all
all: .all-post

.all-pre:
# Add your pre 'all' code here...

.all-post: .all-impl
# Add your post 'all' code here...

# build tests
build-tests: .build-tests-post

.build-tests-pre:
# Add your pre 'build-tests' code here...

.build-tests-post: .build-tests-impl
# Add your post 'build-tests' code here...

# run tests
test: .test-post

.test-pre:
# Add your pre 'test' code here...

.test-post: .test-impl
# Add your post 'test' code here...

# help
help: .help-post

.help-pre:
# Add your pre 'help' code here...

.help-post: .help-impl
# Add your post 'help' code here...

# include project implementation makefile
include nbproject/Makefile-impl.mk

# include project make variables
include nbproject/Makefile-variables.mk 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:12:03.070

就像在另一个问题中所说的那样，“事实上，io.h 标头从未成为 ISO C 或 C++ 标准的一部分。” （[未能编译项目，缺少 io.h 文件](https://stackoverflow.com/questions/2211030/failing-to-compile-a-project-missing-io-h-file)）在这个问题中，最佳答案给出了一个带有一点 io.h 的小库。我相信它会解决你的问题。:-)

# c++ - 指向容器上的对象

> ID：13338059
> 
> 赞同：2
> 
> 时间：2012-11-12T03:34:01.540
> 
> 标签：c++, pointers, stl, containers

这是一个有效的好习惯吗？（假设这`ARENAPLAYER`是一个结构）

```
ARENAPLAYER* CArena::GetPlayer( u_long idPlayer )
{
    map<u_long, ARENAPLAYER>::iterator it = m_mArenaMap.find( idPlayer );
    if( it != m_mArenaMap.end() )
        return &it->second;
    return NULL;
} 
```

如果是，指针会直接指向地图内的对象吗？指针所做的任何更改都会更改地图中的对象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T03:46:52.553

您可以像这样获得指向内部对象的指针`std::map<u_long, AREANPLAYER>`。只要地图存在并且该对象没有从地图中删除，地图中的对象就会保持原样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T03:47:24.750

绝对没有理由这样做。`operator[]`返回对存储值的引用，允许您更改值而无需使用指针。

# css - Chrome 未正确显示媒体查询内容

> ID：13338068
> 
> 赞同：0
> 
> 时间：2012-11-12T03:35:10.740
> 
> 标签：css, wordpress, media-queries

我在这里有一个页面，我想拥有它，以便主页滑块至少暂时隐藏在主页上。它在移动 safari 浏览器上看起来很棒，但它并没有像在 chrome 中那样隐藏我的 div“primary_home”，我假设是用于 droid 的本机移动浏览器。

这是页面：forloveofallthings.com/home

```
this is the css used that makes it look the way it should in safari:
#primary_home {
margin-left: 0px;
margin-top: 0 !important;
float: right;
width: 320px;
margin-right: 0px;
display: none;
} 
```

有人可以看看吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:17:41.627

假设你在谈论这个媒体查询，

```
@media only screen and (min-device-width: 320px) and (max-device-width: 480px) { 
```

提供的样式表没有

```
display: none; 
```

线。

检查您是否已正确上传样式表，并清除所有服务器端缓存。

# javascript - 使用 jquery click 事件触发 .js 文件

> ID：13338071
> 
> 赞同：0
> 
> 时间：2012-11-12T03:35:27.227
> 
> 标签：javascript, jquery

我正在尝试在 jquery 点击事件后加载在线托管的 .js 文件。首先，我这样做对吗？只有在单击链接后才会应用所有 javascript 吗？

```
$(document).ready(function() {
            var clickHandler ="file.js";
    $('a').click(function() {
        $.getScript(clickHandler, function(data, textStatus, jqxhr) {
        console.log(data);
        console.log(textStatus);
        console.log(jqxhr.status);
    });
}); 
```

编辑：我刚刚检查了控制台，它正在加载文件，但给了我一个 403 Forbidden 消息。为什么会这样？我是否需要在标题中包含一些文本以供参考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T03:39:26.193

**编辑1：**

误读了 jQuery 代码——这部分答案不适用：

~~有多种方法可以将 Javascript 文件添加到现有文档中，但这并不像您尝试做的那么简单。~~

~~这个讨论可以解释：[如何在页面加载后通过 jQuery 动态插入 <script> 标签？](https://stackoverflow.com/questions/3857874/how-to-dynamically-insert-a-script-tag-via-jquery-after-page-load)~~

另一种解决方案是将 Javascript 的内容放入其自己的函数中，将其正常包含在页面上，然后在您的`click`处理程序中运行该函数。

**编辑：扩展答案**

假设您有一些相当简单的代码，`file.js`如下所示：

```
var el = document.getElementById("fooz");
if (el) {
  el.className += " example";
} 
```

由于它没有被封装在一个函数中，因此该代码将在加载后立即运行（或尝试运行）。每次加载时它只会运行一次。

但是，如果将其包装在一个函数中，如下所示：

```
function colorFooz() {
  var el = document.getElementById("fooz");
  if (el) {
    el.className += " example";
  }
} 
```

然后代码在调用函数之前**不会运行。**它将加载并准备好稍后调用。

**错误 403**

首先要做的是弄清楚为什么要获取`error 403`.

`Javascript`在这个阶段，这与`jQuery`或无关`AJAX`。通过尝试直接在浏览器中加载该 Javascript 文件来解决问题，方法是在您的 URL 中输入类似这样的内容：

```
http://example.com/file.js 
```

当然，将 URL 更改为您的网站和路径。此时，您应该仍然收到`403`错误消息，但您现在可以检查服务器日志以查看其中写入的错误。

我在这里找到了一个页面，该页面提供了跟踪 403 错误的指南：http: [//www.checkupdown.com/status/E403.html](http://www.checkupdown.com/status/E403.html)

（（PS：如果我不得不随机猜测您收到 403 错误的原因，我会说您的路径文件不`file.js`正确。根据您的结构和各种包含，它可能正在计算相对路径不正确。））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:38:08.890

您传递给*click()*的函数是一个回调，并且仅在单击元素时执行。所以，是的，你说得对。

# objective-c - 静态 UITableView 中的自定义 UITableViewCell

> ID：13338074
> 
> 赞同：1
> 
> 时间：2012-11-12T03:35:58.617
> 
> 标签：objective-c, ios, uitableview

我已经定义了一个`UITableViewCell`我在我的 static 中使用的自定义`UITableView`。我想访问我定义的变量（`myTableViewImageCell`等），但这样做`tableView:willDisplayCell`似乎是在说“重新定义单元格类型”。

这就是我正在做的事情：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath{
    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];

    [cell.myTableViewLabel setShadowColor:[UIColor whiteColor]];
    [cell.myTableViewLabel setShadowOffset:CGSizeMake(0.0f, 1.0f)];   

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:00:19.043

如果您的所有单元格都是同一个自定义类，您只需更改方法的定义以表明这一点并删除您的第一行（无论如何这都是错误的）：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(ANMyTableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];

    [cell.myTableViewLabel setShadowColor:[UIColor whiteColor]];
    [cell.myTableViewLabel setShadowOffset:CGSizeMake(0.0f, 1.0f)];
    [cell.myTableViewLabel setTextColor:[UIColor hex666Color]];      
} 
```

但是请注意，如果您对**所有**单元格执行相同的操作（如您在此处显示的那样），您应该在`cellForRowAtIndexPath:`而不是`willDisplayCell:`. 这样，代码仅在创建单元格时运行一次，而不是每次显示时运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:03:00.843

仅供参考，问题在于无关的 ;cell; 你在第二行的末尾。将其更改为

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath{
    ANMyTableViewCell *cell = (ANMyTableViewCell*)[tableView cellForRowAtIndexPath:indexPath];
    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];

    [cell.myTableViewLabel setShadowColor:[UIColor whiteColor]];
    [cell.myTableViewLabel setShadowOffset:CGSizeMake(0.0f, 1.0f)];
    [cell.myTableViewLabel setTextColor:[UIColor hex666Color]];      
} 
```

# ruby-on-rails - 自定义 Rails 环境日志被写入 nginx error.log

> ID：13338077
> 
> 赞同：2
> 
> 时间：2012-11-12T03:37:08.007
> 
> 标签：ruby-on-rails, logging, nginx, passenger

我的应用程序有一个名为 staging 的自定义环境。出于某种原因，从未创建过 staging.log 文件，并且我假设要写在那里的所有内容都显示在 nginx error.log 文件中。是否有我缺少的配置选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-17T18:42:03.997

这是一个老问题，但我刚刚遇到了同样的问题，并想分享为我解决的问题，以防它帮助其他遇到此问题的人。

就我而言，我使用的是**rails_12factor** gem（因为我曾经在 Heroku 上部署过我的应用程序），这会导致所有日志记录都转到标准输出。这导致它全部被转储到 nginx_error.log 中。我能够完全删除 gem 来修复它，因为我不再将 Heroku 用于应用程序，但如果您需要支持 Heroku 部署，您可以添加某种配置，以便仅在该上下文中需要 rails_12factor。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:03:23.700

尝试添加类似

```
c = ActiveSupport::BufferedLogger.new("log/staging.log")
c.auto_flushing = true
config.logger = c 
```

对于您的`config/environments/staging.rb` 另外，您也许应该使用 auto_flushing 选项，rails guide about [configuration](http://guides.rubyonrails.org/configuring.html)，说它在生产环境中已关闭，我不知道为什么。[请参阅此处](http://api.rubyonrails.org/classes/ActiveSupport/BufferedLogger.html)的BufferedLogger 文档。在我看来，它不是完美的解决方案，但看起来很有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T18:01:12.173

登录 nginx 你有：

*   该`error_log`指令，请参阅[http://nginx.org/en/docs/ngx_core_module.html#error_log](http://nginx.org/en/docs/ngx_core_module.html#error_log)
*   该`acces_log`指令，请参阅[http://nginx.org/en/docs/http/ngx_http_log_module.html#access_log](http://nginx.org/en/docs/http/ngx_http_log_module.html#access_log)

有一个问题`error_log`：

如果您将其设置为`debug`，而您的 nginx 未使用该`--with-debug`标志编译，它将落入默认的 error.log 位置。

检查您的 nginx 的标志是否是使用`nginx -V`命令编译的

# google-apps-script - 电子表格脚本和脚本库之间的变量范围

> ID：13338086
> 
> 赞同：2
> 
> 时间：2012-11-12T03:38:43.053
> 
> 标签：google-apps-script, global-variables

我有一个脚本用作库，将其加载到我需要的电子表格中。

当我将它添加到电子表格时，我定义了一个 onEdit 和 onLoad 函数，它们调用了库的相应方法。

我需要使用该库的个人工作表来定义一个应该可用于库的全局变量，该变量可能未在工作表的单元格中设置。

我试过设置

```
var previd = "myid"; 
```

在电子表格脚本的开头，但这似乎不起作用。

我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T04:50:59.253

脚本之间不共享“全局范围”，它实际上是一个“脚本范围”。

库函数所需的所有变量都必须作为参数传递给这些函数。如果您使用相同的参数调用许多函数，则应考虑将它们包装在`object`. [像](https://developers.google.com/apps-script/class_mailapp#sendEmail)一些[Apps Script](https://developers.google.com/apps-script/class_urlfetchapp#fetch)内置[函数](https://developers.google.com/apps-script/class_calendarapp#createCalendar)一样，有`optArguments`.

您的库上可能还有一个`setParameters`函数可以将这些变量传递一次（每个运行时），并让它们可用于下一次库调用。像这样的东西：

```
//on the library script
var clientParams = null;
function setParameters(parameters) { clientParams = parameters; }
function exampleFunc() { return clientParams.previd; }

//on your client script
library.setParameters({previd:'myid', otherParam:'example'});

//then you can call
library.exampleFunc(); 
```

# android - 日历提供程序 URI Android 4.0.4

> ID：13338087
> 
> 赞同：1
> 
> 时间：2012-11-12T03:39:10.627
> 
> 标签：android, android-calendar

我尝试在日历提供程序中获取日历。实际上它在三星 Nexus S (4.1.2) 上运行良好。这是代码：

```
cur = cr.query(Uri.parse("content://com.android.calendar/events"), null, "((calendar_id  = ?) AND (_id = ?))",  new String[]{String.valueOf(CalendarId), eventId}, null); 
```

但在三星 Galaxy Note (4.0.4) (SHV-E160S) 中，光标计数始终为 0。有人有这个问题吗？

感谢您的阅读！

# git - 替代 rebase 推送的提交

> ID：13338089
> 
> 赞同：2
> 
> 时间：2012-11-12T03:39:27.530
> 
> 标签：git, dvcs, rebase

[GitHub 文档](http://learn.github.com/p/rebasing.html)建议不要对已公开推送的提交进行变基。

我们有两个分支`master`和`dev`. 我已经对一个`master`我想要接受的修补程序进行了更改`dev`，`dev`它本身是相当领先的`master`。

在这种情况下，修补程序是针对 2 个文件，并且每个文件只有 1 行更改。

什么是最简单的方法可以将它带到`dev`分支而不会使事情变得非常混乱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:49:53.740

如果修补程序是唯一`master`不在其中的东西，`dev`您可以简单地合并`master`到您的`dev`分支中。

否则，您可能只想将修补程序提交到您的`dev`分支中。假设修补程序是`master`您可以执行的最新提交：

```
git checkout dev
git cherry-pick master 
```

# php - 连续Ajax GET时jscrollPane消失

> ID：13338093
> 
> 赞同：3
> 
> 时间：2012-11-12T03:39:47.487
> 
> 标签：php, jquery, ajax, jscrollpane

# 问题解决了

将 jscrollpane 更新到支持 jquery 1.8 的最新版本！ [https://github.com/vitch/jScrollPane/blob/master/script/jquery.jscrollpane.min.js](https://github.com/vitch/jScrollPane/blob/master/script/jquery.jscrollpane.min.js)

我正在尝试在一段时间内用内容刷新 div。它将触发对呈现内容的 php 脚本的 Ajax GET 调用。第一次调用 ajax GET，ScrollPane 在那里，但第二次 Ajax GET(refresh) JScrollPane 消失了。任何如何重新初始化jscrollpane？

```
function getActivity(callback)
{
  $.ajax({
  url: '../../views/main/activity.php',
  type: 'GET',
  complete: function(){
         $('#activityLineHolder').jScrollPane({
            verticalDragMinHeight: 12,
            verticalDragMaxHeight: 12
            //autoReinitialize = true
         });
  },
  success: function(data) {

        var api = $('#activityLineHolder').jScrollPane(
             {
                 verticalDragMinHeight: 12,
                  verticalDragMaxHeight: 12
             }
        ).data('jsp');

        api.getContentPane().html(data);
        api.reinitialise();

   }
 });

setTimeout(callback,10000);
}

$(document).ready(function(){ 

(function getActivitysTimeoutFunction(){

  getActivity(getActivitysTimeoutFunction);
})();

}); 
```

现在，我的滚动窗格在每次 Ajax 调用后都在那里，但它显示有问题，jscrollpane 会在每次 Ajax 调用后继续向左移动，慢慢地，它会隐藏内容。这是怎么回事？

```
 foreach ($list as $notification) {
    echo "<div class='feeds' id='$notification->notification_id'>";
    $userObj = $user->show($notification->added_by);
    echo $userObj->first_name.":<span class='text'>".$notification->activity."</span>";
    echo " <span class='time'>".$notification_obj->nicetime($notification->created_at)."</span>";
    echo "</div>";
} 
```

像这样的东西，那是我的activity.php

这是我的截图，请任何人帮助我@_@ [http://img31.imageshack.us/img31/6871/jscrollpane.png](http://img31.imageshack.us/img31/6871/jscrollpane.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T03:53:48.830

我的理解是，当您的方法中的代码完成时，应该执行回调。如果您想`getActivity()`再次运行该方法，不应该在`setTimeout()`. 像这样的东西：

```
function getActivity(callback)
{
  $.ajax({
  url: '../../views/main/activity.php',
  type: 'GET',
  complete: function(){
         $('#activityLineHolder').jScrollPane({
            verticalDragMinHeight: 12,
            verticalDragMaxHeight: 12
            //autoReinitialize = true
         });
  },
  success: function(data) {

        $('#activityLineHolder').html(data);

   }
 });

 setTimeout(function(){getActivity(callback);},10000);
 if($.isFunction(callback)) {
     callback();
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:17:31.847

我只是看看 我尝试过的[http://jscrollpane.kelvinluck.com/ajax.html 。](http://jscrollpane.kelvinluck.com/ajax.html)我将 setTimeout 更改为 setInterval（来自滚动窗格的函数）。你可以试试这个（我测试过）

```
$(document).ready(function(){ 
var api = $('#activityLineHolder').jScrollPane(
    {
        showArrows:true,
        maintainPosition: false,
        verticalDragMinHeight: 12,
                verticalDragMaxHeight: 12,
        autoReinitialise: true
    }
).data('jsp');

setInterval(
    function()
    {
        $.ajax({
        url: '../../views/main/activity.php',
        success: function(data) {
        api.getContentPane().html(data);
      }
    });
    },
    10000
);

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:02:29.893

我以前遇到过这个问题，这里有一个片段，所以你可以理解。祝你好运！

```
attachScroll = function(){

    return $('.scroll-pane').jScrollPane({
        verticalDragMinHeight: 17,
        verticalDragMaxHeight: 17,
        showArrows: true,
        maintainPosition: false
    });

}; // in this var I store all settings related to jScrollPane

var api = attachScroll().data('jsp');

$ajaxObj = $.ajax({
    type: "GET", //set get or post
    url: YOUR_URL,
    data: null,
    cache: false, //make sure you get fresh data
    async: false, //very important!
    beforeSend: function(){
    },
    success: function(){
    },
    complete: function(){
    }
}).responseText; //$ajaxObj get the data from Ajax and store it

api.getContentPane().html($ajaxObj); //insert $ajaxObj data into "api" pane previously defined.
api.reinitialise(); //redraw jScrollPane 
```

您可以将 ajax 调用定义为函数并将其放入 setInterval。

官方文档的一个例子可以在[这里找到](http://www.kelvinluck.com/assets/jquery/jScrollPane/ajax_example.html)

希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T06:09:31.767

好吧，我想您来自 AJAX 的 HTML 内容很长，并且您在减小区域大小时遇到​​问题，因为通过 .html() 呈现内容需要一些时间：

```
api.getContentPane().html(data); 
```

当它进入下一行时`api.reinitialise()`- HTML 渲染尚未完成，但 jScrollPane 已经捕获当前 DIV 宽度/高度，通过这些宽度/高度进行初始化，然后插入剩余的 html 内容 - 它出现在 jScrollPane 边界之外.

阅读类似问题：[等待 jquery .html 方法完成渲染](https://stackoverflow.com/questions/10673603/wait-for-jquery-html-method-to-finish-rendering)

所以我的建议：

1) 在 PHP 代码的末尾添加一个 DIV，它将标记来自 Ajax 的 HTML 的结尾：

```
foreach ($list as $notification) {
   ...
}
echo '<div id="end-of-ajax"></div>'; 
```

2) 在您的 JS 代码中添加定期（200 毫秒）检查“end-of-ajax” - 当它发现结束时，它会调用 api.reinitialise()：

```
var timer = setInterval(function(){
   if ($("#activityLineHolder").find('#end-of-ajax').length) {
       api.reinitialise(); 
       clearInterval(timer);
   }
}, 200); 
```

**编辑**

这是完整的 JavaScript 代码：

```
function getActivity()
{
  $.ajax({
  url: '../../views/main/activity.php',
  type: 'GET',
  complete: function(){
         $('#activityLineHolder').jScrollPane({
            verticalDragMinHeight: 12,
            verticalDragMaxHeight: 12
            //autoReinitialize = true
         });
  },
  success: function(data) {

        var api = $('#activityLineHolder').jScrollPane(
             {verticalDragMinHeight: 12,verticalDragMaxHeight: 12}
        ).data('jsp');

        api.getContentPane().html(data);

        var timer = setInterval(function(){
          if ($("#activityLineHolder").find('#end-of-ajax').length) {
            api.reinitialise(); 
            clearInterval(timer);
          }
       }, 200);
   }
 });
}

$(document).ready(function(){ 
  setInterval(getActivity,10000);    
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T07:50:49.403

我不确定您的内容是什么，但只需确保在重新初始化之前相应地重置宽度和高度。因为我有同样的问题，这就是问题所在

```
var origHeight =$('#GnattChartContainerClip').height();
var GanttChart = $('#EntireGnattWrapper').get(0).GanttChart;
$('#GnattChartContainerClip').find('#PaddingGnatt').remove();
$('#HeadersCol').find('#PaddingHeaders').remove();
var pane = $('#GnattChartContainerClip');
$('#GnattChartContainerClip').height(origHeight+height);
$('#GnattChartContainerClip').append('<div id="PaddingGnatt" style="width:'+GanttChart.TotalWidth+'px;height:25px"></div>');
$('#HeadersCol').append('<div id="PaddingHeaders" class="header" style="height:25px"></div>');
var paned = pane.data('jsp');
paned.reinitialise(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-21T02:56:21.150

更改命令的顺序。创建一个缓存 ID 的全局变量，如下所示：

```
var $activity, $activity_pane; // outside the dom ready

function getActivity(callback){
  $.ajax({
    url: '../../views/main/activity.php',
    type: 'GET',
    success: function(data) {
      $activity_pane.html(data);
    }
  });

  setTimeout(callback,10000);
}

$(function(){
  $activity = $('#activityLineHolder');
  $activity.jScrollPane({
    verticalDragMinHeight: 12,
    verticalDragMaxHeight: 12
    autoReinitialise: true
  });

  $activity_pane = $activity.data('jsp').getContentPane();

  (function getActivitysTimeoutFunction(){
    getActivity(getActivitysTimeoutFunction);
  })();
}); 
```

# html - wget、curl、html 解析器无法获取正确的 html

> ID：13338095
> 
> 赞同：0
> 
> 时间：2012-11-12T03:40:09.807
> 
> 标签：html, parsing, curl, html-parsing, wget

我正在尝试解析此链接

```
http://www.sears.com/search=play%20station?pageNum=1&viewType=list 
```

如果我在浏览器中打开该网站，它会完美运行。但是，似乎没有一个解析器可以工作（尝试 jsoup）。另外，我尝试对url进行curl和wget，但输出也不正确。

我试图检查网站是否真的重定向（301、302），但显然它没有。

有谁知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:54:00.490

它正在做一个 JavaScript 重定向到[http://www.sears.com/search=play%20station?storeId=10153&catalogId=12605&vName=Movies+Music+%26+Gaming&viewItems=25&viewType=list&autoRedirect=true&redirectType=CAT_REC_PRED&intShip=3&intlDelivery=3](http://www.sears.com/search=play%20station?storeId=10153&catalogId=12605&vName=Movies+Music+%26+Gaming&viewItems=25&viewType=list&autoRedirect=true&redirectType=CAT_REC_PRED&intShip=3&intlDelivery=3)你可以用 cURL 抓取就好了:)

# python - 意外返回列表列表而不是列表

> ID：13338100
> 
> 赞同：0
> 
> 时间：2012-11-12T03:41:03.550
> 
> 标签：python

此应用程序将下载一个网页并在页面文本中查找所有电子邮件地址并返回它们的列表。

这是我当前的代码：

```
def emails(content):
'return list of email addresses contained in string content'
    email = []
    content = urlopen(url).read().decode()
    pattern='[A-Za-z0-9_.]+\@[A-Za-z0-9_.]+\....'
    email.append(re.findall(pattern,content))
    print(email) 
```

但由于某种原因，我得到：

```
[['somePERSON@university.ca"']] 
```

代替 ：

```
['somePERSON@university.ca'] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T03:43:00.537

`re.findall`实际上返回一个列表，因此您将一个列表附加到列表中。`email.extend(re.findall(pattern,content))`如果您不想要这种行为，您可以执行类似的操作（尽管我通常会在他们自己的行上检查匹配项以确保找到匹配项并正确处理非匹配项）。

# java - 删除查询失败后的 JPA 合并

> ID：13338103
> 
> 赞同：0
> 
> 时间：2012-11-12T03:41:24.780
> 
> 标签：java, sql, jpa, h2

请分析以下两个代码，并告诉我为什么第一个在提交时因违反主键而失败，而第二个则没有。

提交失败的代码：

```
try{

        Query q = em.createQuery("DELETE FROM Puntaje");
        q.executeUpdate();
        //em.getTransaction().commit();

        //em.getTransaction().begin();
        Iterator it = l.iterator();
        while(it.hasNext()){
            DataPuntaje dp = (DataPuntaje)it.next();
            Cliente c = new Cliente(dp.getCliente());
            Puntaje p = new Puntaje(dp.getPuntaje(),c);
            c.agregarPuntaje(p);

            em.merge(c);

        }

   System.out.println("test1");
        em.getTransaction().commit();
   System.out.println("test2");
    } 
```

工作正常的代码：

```
try{

        Query q = em.createQuery("DELETE FROM Puntaje");
        q.executeUpdate();
        em.getTransaction().commit();

        em.getTransaction().begin();
        Iterator it = l.iterator();
        while(it.hasNext()){
            DataPuntaje dp = (DataPuntaje)it.next();
            Cliente c = new Cliente(dp.getCliente());
            Puntaje p = new Puntaje(dp.getPuntaje(),c);
            c.agregarPuntaje(p);

            em.merge(c);

        }

   System.out.println("test1");
        em.getTransaction().commit();
   System.out.println("test2");
    } 
```

唯一的区别是第一个不提交删除查询，而是在最后一起提交。Cliente 和 Puntaje 是 1:N 双向关系，cascade = ALL。并且所有插入的 Cliente 实例都具有相同的 ID，但是合并应该足够聪明，可以在第一个持久化后更新而不是插入，但这在第一个示例中似乎失败了，我找不到任何解释。我也使用 H2 嵌入式数据库。

我还想补充一点，如果已经插入了 Cliente 值，则第一个代码可以正常工作，当表实际上为空时，这将失败，因此 delete 实际上什么也不做。

这是我得到的错误：

```
Internal Exception: org.h2.jdbc.JdbcSQLException: Unique index or primary key violation: "PRIMARY_KEY_5 ON PUBLIC.CLIENTE(NICK)"; SQL statement:
INSERT INTO CLIENTE (NICK) VALUES (?) [23505-169]
Error Code: 23505
Call: INSERT INTO CLIENTE (NICK) VALUES (?)
        bind => [cbaldes]
Query: InsertObjectQuery(Clases.Cliente@21cd5b08)
javax.persistence.RollbackException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.0.2.v20100323-r6872): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.h2.jdbc.JdbcSQLException: Unique index or primary key violation: "PRIMARY_KEY_5 ON PUBLIC.CLIENTE(NICK)"; SQL statement:
INSERT INTO CLIENTE (NICK) VALUES (?) [23505-169]
Error Code: 23505
Call: INSERT INTO CLIENTE (NICK) VALUES (?)
        bind => [cbaldes]
Query: InsertObjectQuery(Clases.Cliente@21cd5b08 
```

)

这些是表格：

```
@Entity
public class Puntaje implements Comparable, Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    private int total;

    @ManyToOne(cascade=CascadeType.ALL, optional = false)
    @JoinColumn(name="NICK")
    private Cliente cliente;

@Entity
public class Cliente implements Serializable {

    @Id
    private String nick;

    @OneToMany(cascade=CascadeType.ALL, mappedBy="cliente")
    private List<Puntaje> puntajes; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:12:47.130

当您对对象执行操作时，所有操作仅记录在缓存中。**JPA 将准备要插入、更新和删除的所有对象的内部列表。**`flush`调用或时将一起刷新`commit`。

现在举第一个例子。您删除了 all `Puntaje`，这会将所有内容添加`Puntaje`到`deleted`列表中。现在，当您调用 时`merge`，我* *ts 确实足够聪明** 并且它发现它应该被插入而不是更新和添加到`insert`列表中。当您调用 commit 时，它首先尝试从插入列表中插入对象，正如您所料，**它会失败，因为旧对象尚未删除。**

第二个示例的唯一区别在于，强制您在插入之前先删除对象，因此它不会失败。

我敢肯定，即使您使用`flush`.`commit`

希望这可以帮助您了解失败背后的原因。

# git - git pull 不拉最新版本

> ID：13338107
> 
> 赞同：9
> 
> 时间：2012-11-12T03:42:15.793
> 
> 标签：git, github

我们在组织中使用 Github 进行源代码控制。多个开发人员不断地将他们的更改合并到远程源存储库。就我而言，我在两周前克隆了存储库，之后进行了多次合并。现在我正在尝试使用最新版本的代码。

```
git pull origin master 
```

我肯定知道自上次克隆以来已经进行了多次合并，但 pull 命令告诉我它已经是最新的。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-11-03T19:19:16.130

```
git reset --hard HEAD~20 # some large number
git pull origin master 
```

这解决了我无法拉出更新的问题。这个想法是将 HEAD 推后足够远，以消除 git 的任何困惑。然后进行所需的拉力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:21:20.177

一种解释是最新的提交是在另一个分支上完成的，正如“ [Git pull from my public repository not working](https://stackoverflow.com/questions/12086897/git-pull-from-my-public-repository-not-working) ”中所解释的那样。

另一种可能性是您处于[分离的 HEAD](https://stackoverflow.com/questions/3965676/why-did-git-detach-my-head/3965714#3965714)模式。
这将使任何`git pull`“最新”，因为你在任何分支。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-08T00:54:29.147

我从我的 Visual Studio 应用程序中使用了 Team Explorer，并且能够同步、获取和拉取。这终于奏效了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-01T16:41:13.073

对我来说，似乎没有任何效果，我不得不再次从 GitHub 克隆存储库。作为最后的手段，这可能是一种选择。

# python - 通过一列进行 Python 矩阵排序

> ID：13338110
> 
> 赞同：2
> 
> 时间：2012-11-12T03:42:49.087
> 
> 标签：python, sorting, matrix, numpy

我有一个*n* x *2*整数矩阵。第一列是一个系列 0,1,-1,2,-2，但是这些是按照它们从其组成矩阵中编译的顺序排列的。第二列是另一个列表中的索引列表。

我想通过第二列对矩阵进行排序。这相当于在 Excel 中选择两列数据，然后通过 B 列（其中数据位于 A 列和 B 列中）进行排序。请记住，每行第一列中的相邻数据应与其对应的第二列对应。我已经使用以下方法查看了解决方案：

```
data[np.argsort(data[:, 0])] 
```

但这似乎不起作用。有问题的矩阵如下所示：

```
matrix([[1, 1],
        [1, 3],
        [1, 7],
        ..., 
        [2, 1021],
        [2, 1040],
        [2, 1052]]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T04:01:31.767

您可以使用[np.lexsort](http://docs.scipy.org/doc/numpy/reference/generated/numpy.lexsort.html#numpy.lexsort)：

> numpy.lexsort（键，轴=-1）
> 
> 使用一系列键执行间接排序。
> 
> 给定多个排序键（可以解释为电子表格中的列），lexsort 返回一个整数索引数组，该数组描述了多列的排序顺序。

* * *

```
In [13]: data = np.matrix(np.arange(10)[::-1].reshape(-1,2))

In [14]: data
Out[14]: 
matrix([[9, 8],
        [7, 6],
        [5, 4],
        [3, 2],
        [1, 0]])

In [15]: temp = data.view(np.ndarray)

In [16]: np.lexsort((temp[:, 1], ))
Out[16]: array([4, 3, 2, 1, 0])

In [17]: temp[np.lexsort((temp[:, 1], ))]
Out[17]: 
array([[1, 0],
       [3, 2],
       [5, 4],
       [7, 6],
       [9, 8]]) 
```

请注意，如果您将多个键传递给`np.lexsort`，则*最后一个*键是主键。倒数第二个键是第二个键，依此类推。

* * *

`np.lexsort`如上所示使用需要使用临时数组，因为它`np.lexsort`不适用于 numpy 矩阵。由于 `temp = data.view(np.ndarray)`创建的是视图，而不是 的副本`data`，因此它不需要太多额外的内存。然而，

```
temp[np.lexsort((temp[:, 1], ))] 
```

是一个新数组，它确实需要更多内存。

还有一种方法可以*就地*按列排序。这个想法是将数组视为具有两列的结构化数组。与普通的 ndarray 不同，结构化数组有一个`sort`方法允许您将列指定为键：

```
In [65]: data.dtype
Out[65]: dtype('int32')

In [66]: temp2 = data.ravel().view('int32, int32')

In [67]: temp2.sort(order = ['f1', 'f0']) 
```

请注意，由于`temp2`是 的*视图*，`data`因此不需要分配新内存和复制数组。此外，排序同时`temp2`修改`data`：

```
In [69]: data
Out[69]: 
matrix([[1, 0],
        [3, 2],
        [5, 4],
        [7, 6],
        [9, 8]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:22:13.390

你的想法是对的，就在几个字符之间：

```
>>> import numpy as np
>>> data = np.matrix([[9, 8],
...                   [7, 6],
...                   [5, 4],
...                   [3, 2],
...                   [1, 0]])
>>> data[np.argsort(data.A[:, 1])]
matrix([[1, 0],
        [3, 2],
        [5, 4],
        [7, 6],
        [9, 8]]) 
```

# android - 从 DialogFragment 管理活动

> ID：13338113
> 
> 赞同：15
> 
> 时间：2012-11-12T03:43:08.963
> 
> 标签：android, android-dialogfragment

如何在创建它的活动中从 DialogFragment 调用 finish() 和其他非静态方法？我尝试从 DialogFragment 中的 OnClickLisener 传递消息，但无济于事。

我有一个非常简单的应用程序，由 MainActivity 和 DialogFragment 组成：

```
 public class MainActivity extends Activity {
@Override
protected void onCreate(Bundle arg0) {
    super.onCreate(arg0);
    setContentView(R.layout.activity);
    showDialog();
}
public void showDialog() {
    DialogFragment newFragment = new ConfirmDialog();
    newFragment.show(getFragmentManager(), "dialog");
} 
```

并且对话框再次非常简单：

```
public class ConfirmDialog extends DialogFragment {
@Override
public AlertDialog onCreateDialog(Bundle savedInstanceState) {
    // Use the Builder class for convenient dialog construction
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder.setMessage("Confirm you want to continue?")
           .setPositiveButton("Yes.", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   //finish() MainActvity
                  }
               })
           .setNegativeButton("No.", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                 //Do nothing in MainActity
               }
           });
    // Create the AlertDialog object and return it
    return builder.create();
} 
```

}

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-12T03:51:18.390

有很多选择。其中之一是定义一个内部带有单个方法的接口。

1.  让对话框调用者实现该接口。
2.  保持一个指向调用者的全局变量。
3.  `onAttach(Activity activity)`在方法中设置变量。
4.  `onDetach()`在方法中将该变量设为空。
5.  调用中的变量（接口成员）方法`onClick`。

例子：

```
public class MainActivity extends Activity implements MyInterface { 
    // ...

    @Override
    public void onChoose() { finish(); }

} 
```

在里面`ConfirmDialog`：

```
public static interface MyInterface {
    public void onChoose();
}

private MyInterface mListener;

@Override
public void onAttach(Activity activity) {
    mListener = (MyInterface) activity;
    super.onAttach(activity);
}

@Override
public void onDetach() {
    mListener = null;
    super.onDetach();
} 
```

然后`mListener.onChoose()`在课堂上的任何地方打电话。

* * *

我知道这已被标记为已接受，但我想我可以为讨论提供更多反馈。

**关于使用或*不*使用接口的说明。安迪的回答和我的一样*有效***，因此我说*“有很多选择。其中之一是......”*。

然而，我更喜欢这个特定问题的接口的原因是因为大多数时候你要扩展和重用这样的简单/常见确认对话框。嘿太通用了，不能“浪费”（或更糟糕的是：如果出现不同的事件动作，则会重复）。

除非你非常确定你将只使用一次，为了一个目的（完成），你通常应该避免`Activity`在你的对话框类中硬连线（和简化）实现细节。**灵活性、抽象性和效率。**需要维护的代码更少。

是的，有一个你可能需要它的迹象：你正在使用的**关键字**`public`，特别是如果它在一个独立的类文件中，它也需要重用。否则，您应该将该类隐藏在 main`Activity`中，因为实现细节（将）仅与该类相关。此外，您将删除`public`关键字。

是的，您可以使用多个`Activity`，但您只能使用`finish()`ing。该界面将使您可以灵活地在每个`Activity`. 换句话说，**由实现者来定义它本身应该如何针对该事件表现。**您自包含实现细节。

作为旁注，我所做的是创建一个包含我的应用程序可能需要的所有对话框的包。对于这样的确认对话框，我会重复使用不同的消息和按钮。我提供默认值，但也允许使用`setArguments`. 而且我保持接口相关，因此我不需要为每个对话框创建一个接口。实现者根据哪个对话框触发了“对话框回调”做出响应。灵活性、抽象性和效率，同时避免被幽默地称为[Hydra 和 Royal Family](https://softwareengineering.stackexchange.com/q/117667/72452)的东西。所以。最后，就像我说的，有很多选择。不要过度设计，但不要过早地简化太多（为优雅的扩展留出空间）。

了解优势和缺陷比选择这个或其他答案更重要。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-12T04:07:31.807

尽管制作界面所涉及的工作量很小，但我不明白为什么需要`finish()`从创建它的 Activity 中调用。`finish()`从 DialogFragment 本身调用就足够了。如果出于某种原因您还需要将信息发送回，您始终可以调用`getActivity()`并链接 Activity 中存在的方法。最终无论你在哪里调用完成，它都会分离碎片并摧毁它。

只是为了阐明如何从片段中的 Activity 调用方法

```
((YourActivity)getActivity()).someMethod(param); 
```

你必须强制转换它，因为 Java 不知道 Activity 有你想调用的任何方法。无论您决定采用哪种方式，祝您好运:)

干杯

**编辑**

感谢您的澄清，大卫。一般来说，你是对的。但老实说，在这种情况下，由于 Fragments 的性质及其与 Activity 的关系，您是不正确的。同样，您实际上将创建一个侦听器，以便被已经与其所持有的 Activity 类具有极其密切关系的 Fragment 调用。**在这种情况下，不通过侦听器硬连线所提供的任何好处都将丢失**。您仍然需要为每个 Dialog 重写自定义代码。在我的方法中，您可以在 Activity 类中编写一个方法，这样您只需编写一次即可。

我认为需要使用监听器的原因只有两个：

**1.**如果您正在编写其他人将使用的代码。因此，您提供了一种简单的方法来提供信息，同时保持一定的结构（如 Androids DatePickerDialog）。

**2.**如果您试图保持连接的两个部分之间没有连接（如 Java 中的 GUI）。

因此，我并不是要说 David 的说法是错误的，我很感激他提出这个问题，因为人们了解何时使用它们很重要。但同样，在这种情况下，由于 Fragments 和 Activity 类之间的连接，他提到的好处是不存在的。只是想澄清为什么我认为这里不需要听众。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-03T16:24:00.507

代替：

```
.setPositiveButton("Yes.", new DialogInterface.OnClickListener() { 
    public void onClick(DialogInterface dialog, int id) { 
        //finish() MainActvity
    }
}) 
```

采用：

```
.setPositiveButton("Yes.", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int id) { 
        // this gets the current activity.              
        Activity currentActivity = getActivity();
        // this finish() method ends the current activity.
        currentActivity.finish(); 
    }
}) 
```

# vaadin - vaadin : 表格的一个字段中的多个链接

> ID：13338116
> 
> 赞同：3
> 
> 时间：2012-11-12T03:44:09.377
> 
> 标签：vaadin

我想问一下vaadin的UI，也就是Table。如果我使用了这个组件，那么我必须使用这个命令创建一个字段：

```
userTable.addContainerProperty("Status", String.class, "Active"); 
```

如果我想在这个字段中创建链接，那么我必须这样做：

```
userTable.addContainerProperty("Action", Link.class, new Link("Remove", new ExternalResource("#"))); 
```

我的问题是，上面的示例仅在一个字段中显示单个链接，即 REMOVE Link。我想在该表的一个字段中创建两个链接。例如，“操作”字段下方的 EDIT 和 DELETE 链接，我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T05:50:50.950

使用生成的列将组件添加到每一行。创建一个水平布局和两个按钮作为内容。

```
class ValueColumnGenerator implements Table.ColumnGenerator {
String format; /* Format string for the Double values. */

/**
 * Creates double value column formatter with the given
 * format string.
 */
public ValueColumnGenerator(String format) {
    this.format = format;
}

/**
 * Generates the cell containing the Double value.
 * The column is irrelevant in this use case.
 */
public Component generateCell(Table source, Object itemId,
                              Object columnId) {
    // Get the object stored in the cell as a property
    Property prop =
        source.getItem(itemId).getItemProperty(columnId);
    if (prop.getType().equals(Double.class)) {
        HorizontalLayout hbox = new HorizontalLayout()
        hbox.addComponent(new Button("Status"))
        hbox.addComponent(new Button("Remove"))
        return hbox;
    }
    return null;
}
} 
```

有关更多信息，请参阅《瓦丁之书》第 5.14.5 节：

[https://vaadin.com/book/-/page/components.table.html](https://vaadin.com/book/-/page/components.table.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:32:45.907

您可以将此按钮添加到 Horizo​​ntalLayout 或任何其他容器组件。然后将此布局添加到表中的容器属性中。

# c - 用不同于函数本身使用的命名参数声明函数的目的是什么？

> ID：13338118
> 
> 赞同：2
> 
> 时间：2012-11-12T03:44:45.190
> 
> 标签：c, kernighan-and-ritchie

也许这只是为了展示。在阅读 K&R 时，**1.7 Functions**的开头显示了幂函数的示例。第二行代码声明`int power(int m, int n);`

为什么函数源中`n`第一个参数 的命名与第一个参数的命名不同`base`：

```
int power(int base, int n)
{
   ...
} 
```

这仅仅是为了表明名称不需要相同吗？应该避免这种做法吗？为什么或者为什么不？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T03:50:03.573

在原型声明中重要的是类型，而不是名称。有些人在声明中省略了参数名称；有些在声明中使用了比在函数定义中更具描述性的名称（因为人们可能需要在标题中阅读它们）。这里的情况似乎正好相反；定义中的名称比声明中的名称更有意义。

它纯粹是风格。我通常认为在声明和定义中使用相同的名称，但有时定义所需的名称（用于解释参数）过于冗长，无法在函数定义中舒适地使用。

请参阅 Stroustrup 的“C++ 的设计和演变”，了解为什么命名参数不是 C++ 的一部分。是的，那是 C++，但那里的论点（主要是声明和定义之间不必要的耦合）也适用于 C。

# iframe - 从现有 iframe 中打开厚框的问题

> ID：13338120
> 
> 赞同：2
> 
> 时间：2012-11-12T03:45:24.067
> 
> 标签：iframe, parent, target, thickbox

所以我似乎发现自己陷入了困境。为了防止每次有人转到不同页面时重新加载标题 flash 元素，我将我网站的所有内容封装在 iframe 中。不幸的是，一些 iframe 包含了thickbox，它打开了它自己的 iframe。厚盒打开的 iframe 要求它在最顶部的页面上打开，以便固定属性允许 iframe 在视口中保持静态。因为我们已经嵌套在 iframe 中，所以这是不可能的。

这是迄今为止我最有希望的线索：http: [//blog.codepyro.com/2010/01/thickbox-inside-of-thickbox-iframe.html](http://blog.codepyro.com/2010/01/thickbox-inside-of-thickbox-iframe.html)

不幸的是，这只替换了打开厚盒的 iframe 和厚盒的内容。

我也刚遇到这个，但我不确定如何重新调整它以满足我的需要： [从 iframe 中打开 iframe fancybox，以便它在父级中打开](https://stackoverflow.com/questions/10406642/open-iframe-fancybox-from-within-an-iframe-so-that-it-opens-in-the-parent)

这是我正在处理的链接： [http ://www.lalalandmusicfestival.com/site/](http://www.lalalandmusicfestival.com/site/)

问题区域在人才页面上。

我认为如果有一种方法可以强制链接使用 javascript 定位到“顶部”或“父”页面，这可能是可能的，但我还没有发现任何对我有用的东西。

在此先感谢您的帮助！

# excel - 如何将数据过滤器仅应用于表格范围而不是整行？

> ID：13338122
> 
> 赞同：1
> 
> 时间：2012-11-12T03:46:04.313
> 
> 标签：excel

我有两张相邻的桌子。当我在第一个表上应用数据过滤器时，它也会过滤掉第二个表中隐藏行的整行。如何将过滤器限制为仅第一个表格范围？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T07:21:04.953

回答您的直接问题*如何将过滤器限制为仅第一个表范围？*答案是——你不能。

阅读评论，您似乎需要在图表和另一个表格旁边显示过滤后的表格数据。Excel中有一个鲜为人知的工具，您可以使用它来实现这一点——*相机*工具。有了这个，您可以创建范围的动态图像并将其放置在您想要的位置。当过滤器应用于源范围时，图像会更新，而不会影响仪表板工作表上的行。

要演示的屏幕截图：在单独的表格上设置表格，在仪表板表格上的图表旁边设置相机图像 ![设置](../Images/3343f125aa4411175be6f6fab6e0c30f.png)

将过滤器应用于表 A ![过滤](../Images/ccf1b317915b99f87cc18e510619829a.png)

相机工具不在功能区 (Excel 2010) 或标准工具栏 (Excel 2003) 上。您需要使用自定义添加它。（2010 年添加到 Qucik Access 工具栏或 2003 年添加到工具/自定义菜单）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T03:52:28.873

不幸的是，您将无法做到这一点。当您过滤时，它会过滤整个行（如果不是这种情况，需要考虑的是行号将如何显示）。如果您希望防止这种情况发生，您将需要重新构建您的设置（不确定您的特定用例，很抱歉我无法给出更具体的建议）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-15T09:16:26.410

我有一个类似的问题，我有一个表我想保持静态 - 就像一个键，但想过滤主表。

为了解决这个问题，我复制了静态表，并将其粘贴为图像。这样，当您在主表上过滤时，图像将保留在您放置的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-04T06:41:44.103

其他人可能提到的这个一般问题的简单解决方法（但我在这里看不到）：

您不能只*过滤*一个范围（例如电子表格中的几列），但您可以只对一个范围进行*排序。*通过对范围进行排序，然后删除范围中一些不需要的单元格块，然后将范围排序回原始顺序，您可以伪造过滤器。

有点笨重，但如果你小心的话，对一些工作来说很容易。

# php - 如何在 php 中将 youtube 视频发布日期转换为 DD/MM/YY？

> ID：13338124
> 
> 赞同：7
> 
> 时间：2012-11-12T03:46:32.393
> 
> 标签：php, datetime, youtube-api

我正在使用以下内容获取 youtube 视频的发布日期：

```
$url = "http://gdata.youtube.com/feeds/api/videos/{$random_text}?v=2&alt=json";
$json = file_get_contents($url);
$json = str_replace('$', '_', $json);
$obj = json_decode($json);
$video_date = $obj->entry->published->_t; 
```

它以这种格式输出日期：

2012-10-18t13:04:42.000z

如何将其转换为 php 中的 DD/MM/YY 格式？

我已经在以下位置尝试了解决方案：

[这是什么时间格式，如何将其转换为标准化的 dd/mm/yyyy 日期？](https://stackoverflow.com/questions/10623492/what-time-format-is-this-and-how-do-i-convert-it-to-a-standardized-dd-mm-yyyy-da)

```
$video_date_pre = $obj->entry->published->_t;
// format the video date
$video_date = date_format($video_date_pre, 'd/m/Y'); 
```

但我收到错误：

警告：date_format() 期望参数 1 为 DateTime..

谢谢你。

**更新**

可能需要注意原始来源看起来像这样（您可以在其中搜索“已发布”）：

[http://gdata.youtube.com/feeds/api/videos/eiAx2kqmUpQ?v=2&alt=json](http://gdata.youtube.com/feeds/api/videos/eiAx2kqmUpQ?v=2&alt=json)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T03:49:35.257

试试这个：

```
$video_date = date('d/m/y', strtotime($video_date_pre)); 
```

在这个解决方案中，您需要先将字符串转换为 Unixtime，然后才能使用 date() 函数。

[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

[http://www.php.net/manual/en/function.date.php](http://www.php.net/manual/en/function.date.php)

或者您可以使用 DateTime 对象：

```
$dateObject = new DateTime($video_date_pre);
$video_date = date_format($dateObject , 'd/m/y'); 
```

# html - 无法为菜单选项正确放置箭头

> ID：13338125
> 
> 赞同：0
> 
> 时间：2012-11-12T03:46:43.073
> 
> 标签：html, css

这是[小提琴](http://jsfiddle.net/mitchbregs/TVK4U/2/)。

我想让箭头指向名称的右侧，无论名称有多大。

箭头没有正确放置，我一直在努力弄清楚。

我知道这是超级简单的 CSS，但我只是遇到了这个问题。

感谢您的所有回答！

```
#menu #container #right_menu_options #user span.arrow{
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-top: 4px solid white;
        float: right;
        position: absolute;
        margin-top: 8px;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:52:36.827

像这样做

[**演示**](http://jsfiddle.net/TVK4U/3/)

CSS

```
#menu #container #right_menu_options #user span.arrow{
    border-left: 4px solid transparent;
    border-right: 4px solid transparent;
    border-top: 4px solid white;
    position: absolute;
    right: 3px;
    top: 17px;
}
#menu #container #right_menu_options #user p{
    margin-top: 9px;
    position: relative;
    padding-right: 10px;       
} 
```

# pentaho - 如何在 CDE 仪表板中插入 xaction

> ID：13338129
> 
> 赞同：0
> 
> 时间：2012-11-12T03:47:21.427
> 
> 标签：pentaho, cdf, xaction

我在 pentaho 中使用 CDE 插件我正在创建一个仪表板，其中包含 CDE 仪表板中的 xaction 的结果，谁能告诉我如何在 CDE 仪表板中得出 xaction 我将 xaction 作为组件包括在内，但在预览中没有结果，因为 xaction 产生

组件要求名称路径操作解决方案

我应该在这里输入什么

这是我的 xaction

```
<?xml version="1.0" encoding="UTF-8"?>
<action-sequence> 
  <title>nov12xaction</title>
  <version>1</version>
  <logging-level>ERROR</logging-level>
  <documentation> 
    <author>hussain</author>  
    <description>Empty blank action sequence document</description>  
    <help/>  
    <result-type>text</result-type>  
    <icon/> 
  </documentation>

  <inputs/>

  <outputs>
    <query_result type="result-set"/>
  </outputs>

  <resources/>

  <actions> 
    <action-definition>
      <component-name>SQLLookupRule</component-name>
      <action-type>Relational</action-type>
      <action-outputs>
        <query-result type="result-set" mapping="query_result"/>
      </action-outputs>
      <component-definition>
        <query><![CDATA[select * from student where pointer > 30;]]></query>
        <live><![CDATA[true]]></live>
        <driver><![CDATA[com.jdbc.odbc.Driver]]></driver>
        <connection><![CDATA[jdbc:mysql://localhost:3306/xactionstudy]]></connection>
        <user-id><![CDATA[root]]></user-id>
        <password><![CDATA[root]]></password>
      </component-definition>
    </action-definition>

  </actions> 
</action-sequence> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T04:27:24.700

我想我得到了正确的解决方案我试图为浏览器创建 URl，所以我设置了 solution=steel-wheels& path=dashboards& action=nov12xaction.xaction // 或任何操作名称

它很有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T08:59:22.617

将您的 xaction 放入 CDE 仪表板文件夹并使用执行 xaction 组件

# wordpress - Wordpress 当前餐厅的旧帖子和新帖子？

> ID：13338132
> 
> 赞同：1
> 
> 时间：2012-11-12T03:48:20.953
> 
> 标签：wordpress, post

我如何显示当前类别的**5 个旧帖子**和**5 个新帖子**（不包括当前帖子）。按邮寄时间订购。

例子：

* * *

**>> 当前帖子（发布于 2012 年 2 月 11 日 - 上午 7:10）**

* * *

## 5 个最新帖子

*   今日新闻阅读 3 (12/11/2012 - 8:10 PM)
*   今日新闻阅读 2 (12/11/2012 - 6:07 AM)
*   今日新闻阅读 1 (12/11/2012 - 6:05 AM)
*   昨天新闻阅读 2 (11/11/2012 - 9:10 PM)
*   昨天新闻阅读 1 (11/11/2012 - 7:12 AM)

## **5 个较新的帖子**

*   较新的阅读文章 5 (04/11/2012 - 8:20 PM)
*   较新的阅读文章 4 (03/11/2012 - 7:12 PM)
*   较新的阅读文章 3 (03/11/2012 - 6:10 AM)
*   较新的阅读文章 2 ( **02/11/2012 - 8:10 AM** )
*   较新的阅读文章 1 ( **02/11/2012 - 7:30 AM** )

## **5 个较早的帖子**

*   旧帖阅读 5 ( **02/11/2012 - 6:20 AM** )
*   阅读 4 的较早帖子（**2012 年 2 月 11 日 - 上午 6 点 12 分**）
*   阅读 3 的较早帖子（2012 年 1 月 11 日 - 下午 6:50）
*   阅读 2 的较早帖子（2012 年 1 月 11 日 - 上午 5:10）
*   较早的帖子阅读 1（2012 年 10 月 31 日 - 上午 7:30）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:54:52.600

使用 query_posts 并根据当前日期距离提取帖子，此链接（[query_post](http://codex.wordpress.org/Function_Reference/query_posts)）可能会对您有所帮助。

# java - Eclipse代码补全窗口突然占满整个屏幕

> ID：13338133
> 
> 赞同：4
> 
> 时间：2012-11-12T03:48:30.227
> 
> 标签：java, eclipse, actionscript-3, flash, ide

我在 Eclipse 中工作，代码完成窗口突然开始占据整个屏幕宽度。我试过重置我所有的观点/退出重新打开窗口，但它顽固地保持这种状态。任何人都知道我应该调整什么设置以使其恢复正常。

![巨大的代码完成](../Images/b7d0fbb9d184f41320d87657b2f619fc.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T04:31:19.683

您可以通过*Window* » *Reset Perspective...将您的透视图重置为默认设置*

![重置视角](../Images/10070d5b18c55de1ff2d674cca860457.png)

否则，您可以通过抓住右下角来调整内容辅助窗口的大小。

# c - 使用指向另一个函数的指针传递数组

> ID：13338135
> 
> 赞同：0
> 
> 时间：2012-11-12T03:48:43.370
> 
> 标签：c, arrays, function, pointers

```
#include <stdio.h>
#include <string.h>

/* Function prototypes */
void wordLength ( char *word );
void wordConcat ( char *wordC1, char *wordC2);
void capitalizeString ( char *sentence);
void birthFormat ( char *birthday, char *bArray);

int main (void)
{

    int choice;
    char word [20];
    char wordC1 [20];
    char wordC2 [20];
    char sentence [200];
    char birthday [10];

    char *ptr1 = "January";
    char *ptr2 = "February";
    char *ptr3 = "March";
    char *ptr4 = "April";
    char *ptr5 = "May";
    char *ptr6 = "June";
    char *ptr7 = "July";
    char *ptr8 = "August";
    char *ptr9 = "September";
    char *ptr10 = "October";
    char *ptr11 = "November";
    char *ptr12 = "December";

    char* bArray[12];

    bArray[0] = ptr1;
    bArray[1] = ptr2;
    bArray[2] = ptr3;
    bArray[3] = ptr4;
    bArray[4] = ptr5;
    bArray[5] = ptr6;
    bArray[6] = ptr7;
    bArray[7] = ptr8;
    bArray[8] = ptr9;
    bArray[9] = ptr10;
    bArray[10] = ptr11;
    bArray[11] = ptr12;

    printf( "Choose a function by enterting the corresponding number: \n"
        "1) Determine the length of a string\n"
        "2) Concatonate 2 different words with a % between them\n"
        "3) Convert a sentence to all capital letters\n"
        "4) Convert birthday from MM/DD/YYYY format to Month, DD, YYYY\n"
        "5) End Program\n");

    scanf( "%d", &choice );
    flushall();

    while (choice >= 1 && choice < 5) 

{

        /* if statements for appropriate user prompt and calls function */
        if (choice == 1) 
        {
            /* gather user input */
        printf( "\nYou have chosen to determine word length.\n"
                "Please enter the word:\t");
            gets( word );

            /* call function to output string as well as the string length */
            wordLength( word );

        }

        else if (choice == 2)
        {
            printf( "\nYou have chosen to concatenate 2 words with a % symbol in between them.\n"
                "Please enter word 1:\t");

            gets( wordC1 );

            printf("Please enter word 2:\t");

            gets( wordC2 );                     

            /* call function to output string as well as the string length */
            wordConcat( wordC1, wordC2 );
    }
        else if (choice == 3)
        {
            printf( "\nYou have chosen to convert a sentence to all capital letters.\n"
                "Please enter the sentence:\t");

            gets( sentence );

            /* call function to output string as well as the string length */
            capitalizeString ( sentence );
    }
        else if (choice == 4)
        {
            printf( "\nYou have chosen to convert your birthday from the format MM/DD/YYYY to Month, DD, YYYY\n"
                "Please enter your birthday:\t");

            gets( birthday );

            /* call function to output string as well as the string length */
            birthFormat ( birthday, bArray );
    }

}
}
void wordLength( char *word )

{
    int length;

    printf( "\nThe string entered is:  %s\n\n", word);

    length = strlen (word);

    printf("The string length is: %d\n", length);

}

void wordConcat(char *wordC1, char *wordC2)

{
    char symbol = "%";
    char result [30];
    printf( "\nThe first word entered is:  %s\n", wordC1);
    printf( "\nThe second word entered is:  %s\n", wordC2);

        strcpy(result, wordC1);
        strcat(result, "%");
        strcat(result, wordC2);

    printf("Output of both strings is: %s\n", result);

}

void capitalizeString(char *sentence)

{

    int i = 0;
    char letter;
    printf("\nThe sentence that you have entered is: %s\n\n", sentence);

    printf("The converted sentence is: \n");
    while (sentence[i])
    {
        letter = sentence[i];
        putchar (toupper(letter));
        i++;
    }
}

void birthFormat(char birthday, char* bArray)
{
printf("\n [%s]\n", bArray[1]);
} 
```

我一直在尝试编写这个程序超过 8 个小时，并且在最后一部分，只是无法弄清楚最后一点！

出于某种原因，每当我将数组从主函数传递到函数birthFormat 时，它都不会通过。数组通过后为空！（我认为）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:53:34.940

当你传入它时， bArray 不是一个 char* barray （一个字符数组），它是一个 char 指针数组。所以你可以做 char**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:55:58.053

问题（或一个问题）是`bArray`函数的参数与您传入的变量的类型不同：

```
char* bArray[12];    // Here's your variable, which can be treated as char ** type.

void birthFormat(char birthday, char** bArray)    // So change the function signature here.
{
    printf("\n [%s]\n", bArray[1]);   // This line will use bArray[1], which is of type char * -- basically the C "string" type.
} 
```

**Edit**，唯一的变化是通过添加一个`*`字符来编辑函数的签名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T04:01:23.810

将“birthFormat”函数的声明和实现更改为

```
void birthFormat ( char *birthday, char **bArray); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T04:41:48.643

这应该工作

```
void birthFormat(char birthday, char* bArray[12])  // The change is to be made here, make bArray an array of char pointers.
{
    printf("\n [%s]\n", bArray[1]);  
} 
```

# mysql - 未创建 Wordpress 数据库表

> ID：13338142
> 
> 赞同：0
> 
> 时间：2012-11-12T03:50:22.173
> 
> 标签：mysql, database, wordpress

有人可以帮我弄清楚为什么当我激活我的插件时 wordpress 没有创建“wp_locations”表。

```
global $wp_locations_version;
$wp_locations_version = "1.1";

define( 'LOCATIONURL', plugins_url().'/wp_locations' );

function locations_install() {
    global $wpdb;
    global $wp_locations_version;

    $sql = "CREATE TABLE IF NOT EXISTS wp_locations (
    ID BIGINT NOT NULL AUTO_INCREMENT,
    location VARCHAR(100) NOT NULL,
    address VARCHAR(255) NOT NULL,
    lattitude INT,
    longitude INT,
    description MEDIUMTEXT NULL,
    person VARCHAR(50) NOT NULL,
    personimg VARCHAR(255) NOT NULL,
    email VARCHAR(255) NULL,
    phone INT,
    sort INT
    );";

    require_once(ABSPATH . 'wp-admin/includes/upgrade.php');
    dbDelta($sql);

    add_option("wp_locations_version", $wp_locations_version);
}
register_activation_hook( __FILE__ , 'locations_install' ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:55:49.160

您需要在 SQL 中至少包含一个 KEY 字段。

来自[http://codex.wordpress.org/Creating_Tables_with_Plugins#Creating_or_Updating_the_Table](http://codex.wordpress.org/Creating_Tables_with_Plugins#Creating_or_Updating_the_Table)

*   您必须在 SQL 语句中将每个字段放在自己的行中。

*   PRIMARY KEY 和主键定义之间必须有两个空格。

*   您必须使用关键字 KEY 而不是其同义词 INDEX，并且**您必须至少包含一个 KEY。**

*   不得在字段名称周围使用任何撇号或反引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:07:36.663

您的代码中没有与数据库的连接。添加一个像这样的函数：

```
 function MySQLConnect( ) {
          $MySQLink = mysql_connect( DB_HOST, DB_USER, DB_PASSWORD ) ;// These parameters are defined in 'wp-config.php'
          if ( !$MySQLink ) :
            return FALSE ;
          else :
            return $MySQLink ;
          endif ;
        } 
```

然后，在函数**locations_install()**中，在开头添加以下行以建立连接：

```
 $Link = MySQLConnect( ) ;
        if ( !$Link ) return FALSE ;
        ... 
```

希望这可以帮助。

**更新**：

立场纠正苏达尔。

在 Wordpress 中执行此操作的方法应该是使用 wpdb 类，它不需要新的连接。在这种情况下，存在以下问题：

```
require_once(ABSPATH . 'wp-admin/includes/upgrade.php'); 
```

从 wp-admin 调用插件脚本。它应该是：

```
require_once('/includes/upgrade.php'); 
```

抱歉误导。

# python - 如何在 python Scrapy 的文本文件中写入数据

> ID：13338145
> 
> 赞同：1
> 
> 时间：2012-11-12T03:50:45.850
> 
> 标签：python, scrapy

这是我的蜘蛛代码

```
 class DmozSpider(BaseSpider):
  5     name = "dmoz"
  6     allowed_domains = ["dmoz.org"]
  7     start_urls = [
  8             "file:///home/ubuntu/xxx/test.html",
  9             ]
 10     def parse(self, response):
 11         hxs = HtmlXPathSelector(response)
 12         sites = hxs.select("//li")
 13         items = []
 14         for site in sites:
 15
 16             item = DmozItem()

 17             item['title'] = site.select('a/text()').extract()
 18             item['link'] = site.select('a/@href').extract()
 19             item['desc'] = site.select('text()').extract()
 20             items.append(item)
 21         return items 
```

现在我想在日志文件中写入数据，例如 name: {{name}} ， link={{link }} 用于 tetsing ，因为它会实时抓取网站。

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T07:37:35.163

这是答案，但我假设您只是复制了已有的代码，否则您将知道如何使用文件 IO，或者至少有能力研究仅在此站点上就已涵盖一百万次的主题。

```
...
item['title'] = site.select('a/text()').extract()
item['link'] = site.select('a/@href').extract()
item['desc'] = site.select('text()').extract()
items.append(item)
with open('log.txt', 'a') as f:
  f.write('name: {0}, link: {1}\n'.format(item['title'], item['link'])) 
```

# c# - 在面板上移动高质量的线条 c#

> ID：13338146
> 
> 赞同：3
> 
> 时间：2012-11-12T03:50:51.177
> 
> 标签：c#, system.drawing, windows-applications

我想在面板上画一条线，然后在鼠标移动时移动它。为此，我画了一条线，当鼠标移动时，我将这条线重新绘制到新位置，并通过在其上绘制一条带有背景颜色的线来删除前一条线。如果我不使用高质量平滑模式，它可以正常工作。但是如果使用高质量的平滑模式，它会在面板上留下痕迹。有人知道如何解决这个问题吗？谢谢你。这是代码

```
 int x_previous = 0;
        int y_previous = 0;

        private void panel1_MouseMove(object sender, MouseEventArgs e)
        {
            Pen pen1 = new System.Drawing.Pen(Color.Black, 3);
            Pen pen2 = new System.Drawing.Pen(panel1.BackColor, 3);
            Graphics g = panel1.CreateGraphics();
            g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;
            g.DrawLine(pen2, new Point(0, 0), new Point(x_previous, y_previous));
            g.DrawLine(pen1, new Point(0, 0), new Point(e.Location.X, e.Location.Y));
            x_previous = e.Location.X;
            y_previous = e.Location.Y;
        } 
```

这是 SmoothingMode 的快照

![结果快照](../Images/3c26ae7c146f7efcbd5ef6b4a0dbd371.png)

这是没有 SmoothingMode 的快照

![结果快照](../Images/fe3dc30882f0a1ee323101a5f86609bd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:57:28.857

而不是在事件处理程序中为鼠标移动绘制线条，您应该使用它来使面板[无效](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invalidate%28v=vs.90%29.aspx)并在其[Paint](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.paint%28v=vs.90%29.aspx)事件的处理程序中执行线条绘制。无需删除旧行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T04:40:21.380

最安全的选择是使用清除图形，而不是在一条线上画一条线`g.Clear(panel1.BackColor)`。这将擦除已绘制的所有内容，以便您可以安全地绘制一条新线：

```
private void panel1_MouseMove(object sender, MouseEventArgs e)
{
    Pen pen1 = new System.Drawing.Pen(Color.Black, 3);
    Pen pen2 = new System.Drawing.Pen(panel1.BackColor, 3);
    Graphics g = panel1.CreateGraphics();
    g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;
    // Clear the graphics, creating a blank area to draw on
    g.Clear(panel1.BackColor);
    g.DrawLine(pen1, new Point(0, 0), new Point(e.Location.X, e.Location.Y));
    x_previous = e.Location.X;
    y_previous = e.Location.Y;
} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T03:59:35.140

我有一段时间没有使用 WinForms，所以如果这不起作用，您将不得不原谅我。

我假设抗锯齿稍微模糊了线条的边缘，因此初始线条比笔的宽度稍微延伸得更远。这也意味着在黑线上绘图时，白笔的边缘不会完全不透明。

尝试增加白笔的宽度，直到它完全覆盖黑色，也许看看您是否可以为白笔保留较低质量的图形对象渲染，并仅对黑笔使用平滑。

# ruby - Ruby 系统方法参数

> ID：13338147
> 
> 赞同：7
> 
> 时间：2012-11-12T03:51:09.937
> 
> 标签：ruby

我很困惑在[这里](http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-system)`system`阅读 Ruby方法的文档。我不确定什么是命令，什么是选项。如果我想执行以下操作，我该怎么办？

```
wget -pk -nd -P /public/google www.google.com 
```

出于安全原因，我想使用一个不使用 shell 的版本（我给出的 URL 中的第二种和第三种形式，而不是第一种）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-12T04:18:19.283

考虑以下示例：

```
system("echo *")
system("echo", "*") 
```

第一个将字符串传递`'echo *'`给shell进行解析和执行；这就是为什么`system('echo *')`会产生与 shell 提示符相同的输出`echo *`：您将获得当前目录中的文件列表。对应的参数形式为：

```
commandline : command line string which is passed to the standard shell 
```

第二个完全绕过外壳。它将在 中查找`echo`，`PATH`然后以字符串`'*'`作为参数执行它。由于 shell 扩展了通配符（至少在 unixy 系统上），`*`它将保持简单`*`，您将看到`*`输出。这里对应的参数形式是：

```
cmdname, arg1, ... : command name and one or more arguments (no shell) 
```

第三种形式：

```
[cmdname, argv0], arg1, ... : command name, argv[0] and zero or more arguments (no shell) 
```

当您想要执行`cmdname`但让它在`ps`列表等中以不同的名称显示时使用。您可以通过打开两个终端来看到这一点。打开`irb`其中一个并说：

```
system('sleep', '10') 
```

然后快速切换到另一个并查看`ps`列表。你应该`sleep 10`在那里看到。但是，如果你把这个给`irb`：

```
system(['sleep', 'pancakes'], '10') 
```

并检查`ps`清单，你会看到`pancakes 10`。如果你`shell -c sleep 10`说`system('sleep 10')`.

如果您提供 Hash 作为第一个参数，则该 Hash 将用作衍生进程的环境变量。如果您提供一个 Hash 作为最后一个参数，那么该 Hash 将用作选项；如文档中所述，有关参数的更多`system`文档可在[`Kernel#spawn`](http://ruby-doc.org/core/Kernel.html#method-i-spawn).

# macos - 我去哪里下载 Mac OSX 10.5 SDK

> ID：13338150
> 
> 赞同：1
> 
> 时间：2012-11-12T03:52:19.730
> 
> 标签：macos, sdk

全部，是否有下载 Mac OSX 10.5 SDK 的链接？我有一个带有 XCode 3.2.6 的原始雪豹磁盘。但是当我检查它有 10.6 SDK 而不是 10.5。

我需要将我的程序与 10.5 SDK 链接起来。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:58:36.633

在 Apple 注册为开发人员后，单击 iOS，如下所示。从那里，单击“下载”。滚动浏览版本，直到找到您想要的版本，然后在您想要的版本上单击“下载”！

如[How to add base SDK for 10.5 in xCode 4](https://stackoverflow.com/questions/5378518/how-to-add-base-sdk-for-10-5-in-xcode-4)中所示，您必须打开安装程序，解压缩包，然后运行安装程序。安装包后，它应该与更高版本的 xcode 兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-02T17:50:09.117

该站点有多个较旧的 Mac OS SDK，包括 10.5/Leopard（最后访问时间为 2017 年 1 月 2 日）：

[发布 * phracker/MacOSX-SDK（在 Github 上）](https://github.com/phracker/MacOSX-SDKs/releases)

# python - 使用 python 脚本 streamripper for win32 获取外部元数据

> ID：13338152
> 
> 赞同：1
> 
> 时间：2012-11-12T03:52:28.060
> 
> 标签：python

嘿我正在使用streamripper for win32。我已经设置了一个示例 python 脚本来显示虚拟元数据。Streamripper 只是简单地没有捡起它。我把它放在与示例相同的格式中： [http ://streamripper.sourceforge.net/history.php](http://streamripper.sourceforge.net/history.php)

它对我不起作用。有谁知道如何解决？

```
import time
while 1:
    print 'TITLE=thisname\nARTIST=thisartist\n.\n'
    time.sleep(10) 
```

我把脚本放在streamripper的根目录下。尝试使用以下链接进行链接：

```
script.py
c:/program files/streamripper/script.py
c:\\program files\\streamripper\\script.py 
```

例子：

```
CMD-->
cd c:/program files/streamripper
streamripper http://stream-114.shoutcast.com:80/smoothjazz_skyfm_mp3_96kbps -E script.py 
```

没有任何工作...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:19:21.463

正确的用法是：

```
streamrippper URL -E python "path to script" 
```

必须将python添加到windows perl的环境变量中已经在win32安装上方便了，但是python没有

```
streamripper URL -E perl "path to script" 
```

同样在python中，您必须立即刷新输出这有效：

```
import time
import sys

while 1:
    print 'TITLE=thetitle\nARTIST=theartistname\n.'
    sys.stdout.flush()
    time.sleep(10) 
```

# sql - 即使使用空间索引，STcontains() 查询也会运行缓慢

> ID：13338154
> 
> 赞同：1
> 
> 时间：2012-11-12T03:52:30.737
> 
> 标签：sql, sql-server, sql-server-2008-r2, geospatial, spatial

我有一张名为“Region”的表，它有 2000 条记录。在区域表中，我有 1 个称为点的几何列。现在我有另一个名为 Bus_Route 的表，其几何列名为“geometry”，包含 1000 万条记录。现在我想要位于该区域的点。我正在使用以下查询来查看天气，我的观点是否在该地区，是否使用 STcontains。但是这个查询需要很长时间（大约 3 天）。我在我的 Bus_Route 表上创建了空间索引，该表有 1000 万条记录，但这也没有帮助。

```
 Select
              Region.BlockID,
              Bus_Route.geometry
              from 
              Bus_Route,                         
              Region
           where 

              Region.points.STContains(Bus_Route.geometry) = 1 
```

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:45:17.327

几点观察：

1.  因为您的巴士可能不会穿过平地，所以请使用地理而不是几何。
2.  如果您要进行交叉连接（如所述的查询正在执行该操作），请通过执行以下操作来明确说明：

    选择 Region.BlockID, Bus_Route.geometry from Bus_Route
    cross join Region

3.  您是否考虑过使用 STIntersects 而不是 STContains？如果我正确解释了您的问题，那么您正在寻找给定路线经过的区域，这意味着两个地理实例之间的交集将是非空的。您编写的查询将显示完全封闭在区域内的路线。

# sorting - 将两个数字映射为一个以实现特定排序？

> ID：13338157
> 
> 赞同：0
> 
> 时间：2012-11-12T03:53:09.493
> 
> 标签：sorting

我有一个列表，其中每个项目都有 2 个整数属性，n 和 m。我想将这两个整数属性映射到一个新属性，这样当列表按新属性排序时，它首先按 n 排序，然后用 m 打破关系。

我想出了 n - 1/m。所以这两个整数映射到一个实数。我认为这行得通。有更好的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:27:23.173

这很聪明，所以我不想把它告诉你，但它不会起作用。使用 n=1,000,000,000 和 m 的值在 999,999,990 和 1,000,000,010 之间尝试（使用计算机）。您会发现`n-1/m`所有这些情况的值都相同。

如果浮点数具有无限精度，或者即使它们的精度是 int 的两倍（尽管即使在那里你可能会遇到一些问题），它也会起作用，但它们不会：双精度浮点数有 53 位的精度。一个整数（可能）是 32 位，因此您至少需要 64 位来编码其中的两个。但是，您可以只使用一个 64 位（long long）整数，将该对编码为`n*2^32 + m`.

# api - Leaflet - 将关键字搜索调用更新为 restful api 并刷新地图

> ID：13338158
> 
> 赞同：0
> 
> 时间：2012-11-12T03:53:31.100
> 
> 标签：api, jquery, submit, leaflet

**我的问题（已更新）：** *如何根据 AJAX 调用在 API URL 搜索查询中更改关键字（此处存在范围问题）？*

我将传单地图连接到[API](http://www.infochimps.com/datasets/wikipedia-articles)以绘制带有地理坐标的维基百科文章。示例 URL 如下所示：`http://api.infochimps.com/encyclopedic/wikipedia/dbpedia/wikipedia_articles/search?g.radius=10000&g.latitude=30.3&g.longitude=-97.75&f.q=park&apikey=api_test-W1cipwpcdu9Cbd9pmm8D4Cjc469`

到目前为止，一切都很好。但我被困在如何实现允许用户搜索新查询词并重新加载地图的 AJAX 调用上。当我单击搜索框时，关键字会提示该关键字是搜索框中的文本。但是地图不会根据新关键字进行更新。

所以我有一个 JS 脚本：

```
var map;
var pointsLayer;
var markerMap = {};
var keyword; //instantiating keyword for global scope

    $(document).ready(function(){
        map = new L.Map('mapContainer');
        var url = 'http://{s}.tiles.mapbox.com/v3/mapbox.mapbox-streets/{z}/{x}/{y}.png';

        var copyright = 'Map data &copy; 2011 OpenStreetMap contributors, Imagery &copy; 2011 CloudMade';
        var tileLayer = new L.TileLayer(url, {attribution:copyright});

        //var startPosition = new L.LatLng(42.33143, -83.04575);//detroit
        var startPosition = new L.LatLng(41.883333, -87.633333);//chicago
        //var startPosition = new L.LatLng(40.7143528, -74.0059731);//new york

        map.on('load', function(){
            keyword = 'history'; //setting keyword to history on first load
            requestUpdatedPoints();
            keyword = ''; //clearing keyword after first load

        });

        map.setView(startPosition, 13).addLayer(tileLayer);

        map.on('moveend', function(){
            requestUpdatedPoints();
        });

        //////////////
        /// WRONG ADDITION OF ADDING KEYWORD SEARCH?
        //////////////
        $('a#submitSearch').on('click', function(e, keyword){
            e.preventDefault();
            //keyword = '';
            keyword = $('input#keyword').val(); //setting keyword to whatever is in the search box
            alert(keyword); //did it set it? 
            requestUpdatedPoints(keyword); //send in new AJAX call with new keyword
            location.reload();

        });
    });

    function requestUpdatedPoints(keyword){
        $.ajax({
            type: 'GET',
            url: 'http://api.infochimps.com/encyclopedic/wikipedia/dbpedia/wikipedia_articles/search?g.radius=100000&g.latitude=41.883333&g.longitude=-87.633333&f.q='+this.keyword+'&apikey=api_test-W1cipwpcdu9Cbd9pmm8D4Cjc469',
            dataType: 'jsonp',
            //data: JSON.stringify(data),
            contentType: 'application/json; charset=utf-8',
            success: function(result){

                for( var i=0; i<result.results.length - 1; i++ ){

                    console.log("adding " + result.results[i].wikipedia_id + " to the map")
                    var marker = L.marker([result.results[i].coordinates[1], result.results[i].coordinates[0]]).addTo(map);
                    marker.bindPopup('<a href="'+result.results[i].url+'" target="_blank">'+result.results[i].wikipedia_id+'</a>');
                }
            },
            error: function(){
                alert('check your error log.');
            }
        });
    } 
```

HTML是：

```
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="./style.css">
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4/leaflet.css">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://cdn.leafletjs.com/leaflet-0.4/leaflet.js"></script>
<script type="text/javascript" src="./map.js"></script>
</head>
<body>
<h1>WikiMap</h1>
<div id="mapContainer"></div>
<div id="infoContainer">
    <div id="search">
        <form id="searchForm">
            <label>Keyword:</label>
            <input type="text" id="keyword" name="keyword" placeholder="search by keyword"/>
            <a id="submitSearch" href="#">search</a> 
        </form>
    </div>

</div>
</body>
</html> 
```

**我的问题（已更新）：** *如何根据 AJAX 调用在 API URL 搜索查询中更改关键字（此处存在范围问题）？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T07:40:49.227

我终于发现我的布局对于完成我想要完成的事情很糟糕。即使关键字正在更新，map.on() 加载函数也会将所有内容恢复到开头。我决定使用 Backbone.js 来帮助我组织数据流。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-08-11T15:03:40.363

```
 var searchControl = L.esri.Geocoding.Controls.geosearch({
 providers: [
 new L.esri.Geocoding.Controls.Geosearch.Providers.MapService({
    label: 'States and Counties',
    url: 'http://sampleserver6.arcgisonline.com/arcgis/rest/services/Census/MapServer',
    layers: [2, 3],
    searchFields: ['NAME', 'STATE_NAME']
  })
  ]
  }).addTo(map); 
```

我正在按地址使用传单地图搜索 api，但我找到了一个自动建议搜索 api 的东西。

# google-app-engine - 使用 AppEngine 存储 JSON 文档

> ID：13338161
> 
> 赞同：1
> 
> 时间：2012-11-12T03:53:45.787
> 
> 标签：google-app-engine, objectify, json-simple

我正在尝试使用 Objectify 作为持久层将 JSON 文档存储到 AppEngine 数据存储中。为了能够查询文档值，而不是仅仅将整个文档作为`String`字段插入，我创建了一个`MapEntity`如下所示的：

```
@Entity(name="Map") 
public class MapEntity {
    @Id
    private Long id;
    private Map<String,String> field;
        // Code omitted 
} 
```

因为最终当“展开”时 JSON 文档中的每个键值都可以用 Map 表示

例子：

```
 String           subText          = "{\"first\": 111, \"second\": [2, 2, 2], \"third\": 333}";
    String           jsonText         = "{\"first\": 123, \"second\": [4, 5, 6], \"third\": 789, \"fourth\":"
                                        + subText + "}"; 
```

我将地图字段存储在数据存储中：

```
KEY              VALUE
field.first  => 123
field.second => [4,5,6]
field.third  => 789
field.fourth-first => 111
field.fourth-second => [2,2,2]
field.fourth-third => 333 
```

如果我使用我的`parse()`方法：

使用 JSON.Simple 库解析 JSON 文档，然后进行递归解析：

```
private MapEntity parse(String root, MapEntity entity, Map json) {
    Iterator iter = json.entrySet().iterator();
    while (iter.hasNext()) {
         Map.Entry entry = (Map.Entry) iter.next();
         if (entry.getValue() instanceof Map){
             entity = parse((String)entry.getKey()+"-", entity, (Map) entry.getValue());
             System.out.println("Map instance");
         } else {
             entity.setField(root + String.valueOf(entry.getKey()), String.valueOf(entry.getValue()));  
         }
    }
    return entity;
} 
```

我的应用程序是这样工作的：

```
 MapEntity jsonEntity = new MapEntity();
 Map json = null;
 json = (Map) parser.parse(jsonText, containerFactory); // JSON.Simple parser
 jsonEntity = parse("", jsonEntity, json); 
```

我遇到的问题是：

*   我不能使用“。” Map 键字段中的点，所以我必须使用“-”
*   我存储 JSON 文档的方法也不是很有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T23:40:57.027

如果您的 JSON 遵循严格的格式，您最好构建一个类来表示您的数据格式，并使用[Jackson](http://jackson.codehaus.org/)之类的库直接与该类进行序列化。您*可以*将该类直接用作 Objectify 中的实体类，但是否要这样做取决于您是否要：

*   存储和公开完全相同的数据集
*   紧密耦合存储和 JSON 表示

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T00:14:26.840

您可以使用[JSONObject](http://stleary.github.io/JSON-java/org/json/JSONObject.html)作为 MapEntity 的替代品，并使用 toString() 方法将 json 作为字符串存储到谷歌应用引擎。检索后，您可以使用适当的构造函数简单地恢复 JSONObject。当然，这会限制您在应用引擎中索引属性并针对它们进行查询的能力。

如果您希望 Objectify 为您执行此操作，您可以注册一个[Translator](http://objectify-appengine.googlecode.com/git/javadoc/com/googlecode/objectify/impl/translate/Translator.html)来负责调用 toString() 和重建。

# ruby-on-rails - 有没有办法在 Ruby on Rails 中将小时字符串转换为时间类型？

> ID：13338167
> 
> 赞同：0
> 
> 时间：2012-11-12T03:54:01.043
> 
> 标签：ruby-on-rails, ruby

我正在创建一个 24 小时下拉列表，在设定的时间内以 30 分钟为增量，当有人想要到达目的地并且想知道是否有一个好的格式可以使用以及如何将它转换为类型时间（因为我将它存储在数据库作为时间类型）。

这些是我正在使用的选项：

```
 def options_for_hours_select
    [
      ['4 AM','4'],
      ['4:30 AM','430'],
      #etc
    ]
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T04:08:08.677

如果您使用 30 分钟增量，您可以更改使用数字选项值，如下所示：

```
def options_for_hours_select
  [
    ["4 AM", 4],
    ["4:30 AM", 4.5]
  ]
end 
```

然后，当您想将其转换为时间时，您可以在一天的开始时添加那么多小时，（ActiveSupport 使这变得特别容易）例如：

```
Date.today + 4.5.hours # gives 4:30AM today 
```

如果你有两个参数`:date`and `:arrival_time`，你可以像这样组合它们：

```
time = params[:date].to_date + params[:arrival_time].hours 
```

# objective-c - 通过解析 xml Web 服务将额外记录插入 coredata

> ID：13338168
> 
> 赞同：0
> 
> 时间：2012-11-12T03:54:37.640
> 
> 标签：objective-c, ios, insert, xml-parsing, duplicates

我在解析 XML Web 服务后将记录插入 CoreData 时遇到问题。我解析 Web 服务并将记录存储在一个数组中，我得到的数组计数是 239。在我插入数据之前，我看到现有核心数据的数组计数。它的 0 条记录。所以现在我将数据推送到核心数据中。一切顺利。但是，我最终得到了 1 个额外的记录。现有记录的副本。我得到的计数是 240。它是怎么发生的？我用另一个表完成了这个过程。这次我从这个新表的 web 服务中得到了 113 条记录。插入数据后，表有 114 条记录和 1 条额外记录（再次重复）。我检查使用 sqlite 管理器上的 firefox 添加。需要特别注意的是，有一个字段（不是我设计的那个）叫做 Z_OPT，其值为 239（其余字段相同），对于具有 113 条记录的表，第 114 条记录的 z_OPT= 113（其余字段相同）。这发生在任何人身上吗？任何信息都会有很大帮助。如果您需要更多信息，请询问。谢谢...

# key - GNU/Linux gpg 如何使用私钥加密

> ID：13338170
> 
> 赞同：0
> 
> 时间：2012-11-12T03:54:42.290
> 
> 标签：key, private, gnupg

编辑：很抱歉造成混乱。其实我想知道是否可以使用私钥进行加密。（这也自动意味着签名。）我希望通过运行脚本在 C 程序中执行此操作。

顺便说一句，用私钥加密是向观众发送签名消息的好主意，观众将用我的公钥对其进行解密？

老问题：如何在 GNU/Linux 中使用我自己的私钥使用 gpg 对文件“签名”？我看到了手册页，但它没有提供任何有关此的信息。另外，对方如何验证我以这种方式创建的签名？

如果可能，请提供命令行选项来完成此操作。

我在 SO 上看到了其他问题，但他们谈论的是 Android、JAVA 等。我只想要命令行选项。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:00:01.700

手册页实际上*确实*提供了有关签名的信息。

有3个主要选择：

1.  **`-s`直接用/签署文件`--sign`**
    *   完全修改文件，在其中嵌入签名——可以使用或不使用`-a`ASCII 盔甲选项
2.  **`-s`直接使用/ `--sign`AND 对文件进行签名`--clearsign`**
    *   用纯文本 ASCII 签名包装文件
3.  **`-b`使用/创建分离签名`--detach-sign`**
    *   将签名保存到单独的文件 - 可以使用或不使用`-a`

这是我依次进行每个操作然后进行验证的示例。

1.  嵌入签名，修改原始文件（需要使用`gpg -d`获取文件的原始内容）。

    ```
    $ cp /etc/issue .
    $ gpg -sa <issue>issue.asc

    You need a passphrase to unlock the secret key for
    user: "Rsaw Rsaw <rsaw@devnull>"
    2048-bit RSA key, ID 211A2D3E, created 2012-08-24

    $ cat issue.asc   
    -----BEGIN PGP MESSAGE-----
    Version: GnuPG v1.4.12 (GNU/Linux)

    owEBcQGO/pANAwACASZpDtshGi0+ActBYgBQoI3pRmVkb3JhIHJlbGVhc2UgMTcg
    KEJlZWZ5IE1pcmFjbGUpCktlcm5lbCBcciBvbiBhbiBcbSAoXGwpCgqJARwEAAEC
    AAYFAlCgjekACgkQJmkO2yEaLT5C3Af/fGDDoCA+6ddDUqbOZa96RNZrQPvvuT2m
    ZnPEnXonqkTEf0OLOJFHWPTsMK5SKdSWx14gvaiSbQTGTKdqUiaSBfBs+tenJ39S
    zQrZPctqKYvBbk848qiBO6tHgf8npNmg2yeY2YKjR6+02bHadg9wiujjazutuSKY
    xEDvaIoDpCl1bsbOF7ZI8zxcpFx366PZybC/fEvA+R4sDFP4QiYDPg0MKmrUlsJa
    1l9gE8e1LEZC2wXDuSCffL6dODFbCvHgU4IyUze1lX5CZHFPs5Y9kI+yBb9f9sYH
    UzOHJDISHMephS1WPqP5JXlkwiiUNTEk4qnTQRalud+yAHBeEZtrtA==
    =fYHs
    -----END PGP MESSAGE-----
    $ gpg --verify issue.asc 
    gpg: Signature made Mon 12 Nov 2012 12:49:29 AM EST using RSA key ID 211A2D3E
    gpg: Good signature from "Rsaw Rsaw <rsaw@devnull>"
    $ gpg -d issue.asc 
    Fedora release 17 (Beefy Miracle)
    Kernel \r on an \m (\l)

    gpg: Signature made Mon 12 Nov 2012 12:49:29 AM EST using RSA key ID 211A2D3E
    gpg: Good signature from "Rsaw Rsaw <rsaw@devnull>" 
    ```

2.  包装 clearsign 签名。

    ```
    $ gpg -s --clearsign <issue>issue.asc

    You need a passphrase to unlock the secret key for
    user: "Rsaw Rsaw <rsaw@devnull>"
    2048-bit RSA key, ID 211A2D3E, created 2012-08-24

    $ cat issue.asc   
    -----BEGIN PGP SIGNED MESSAGE-----
    Hash: SHA1

    Fedora release 17 (Beefy Miracle)
    Kernel \r on an \m (\l)

    -----BEGIN PGP SIGNATURE-----
    Version: GnuPG v1.4.12 (GNU/Linux)

    iQEcBAEBAgAGBQJQoI65AAoJECZpDtshGi0+XLwH/0q7M+6aVvM2XMwy36R+zbYv
    IjF/GBUgEFRO53a0xCi6lhw10Wp4tpmZLeJJwFb2xNGu7/1SaB4pk/PhSk4xU5Bx
    3FepXaHvbwoB+Km2jqCnB1BNowJa4UecPk7pBoBPbBFv6GomecMYv1a3tORStmwe
    3UIF99HgCilivjbJoGI6h7en7yq2LwwQLpHNs8dY8rlurQfHM5CMv5RpF9jCDEJS
    MHKN52Urcx1/ROam/YjyP+Pa+PZF4x19q+obdHOsNCyqAIlYcfsUjCoiCGF8FjPM
    00ha0aaw9dHezmqyAE9nWE5SYB571iVcO1xIoGk+jl78HSwpxpf5hssavDwT2go=
    =o6WZ
    -----END PGP SIGNATURE-----
    $ gpg -v issue.asc
    gpg: armor header: Hash: SHA1
    gpg: armor header: Version: GnuPG v1.4.12 (GNU/Linux)
    gpg: original file name=''
    File `issue' exists. Overwrite? (y/N) 
    gpg: Interrupt caught ... exiting

    $ gpg --verify issue.asc
    gpg: Signature made Mon 12 Nov 2012 12:52:57 AM EST using RSA key ID 211A2D3E
    gpg: Good signature from "Rsaw Rsaw <rsaw@devnull>"
    $ gpg -d issue.asc
    Fedora release 17 (Beefy Miracle)
    Kernel \r on an \m (\l)

    gpg: Signature made Mon 12 Nov 2012 12:52:57 AM EST using RSA key ID 211A2D3E
    gpg: Good signature from "Rsaw Rsaw <rsaw@devnull>" 
    ```

3.  分离签名（要求与签名文件同名，加上扩展名`.sig`或`.asc`或要求用户明确指定分离签名文件和签名文件）。

    ```
    $ gpg -ba <issue>issue.sig

    You need a passphrase to unlock the secret key for
    user: "Rsaw Rsaw <rsaw@devnull>"
    2048-bit RSA key, ID 211A2D3E, created 2012-08-24

    $ cat issue.sig   
    -----BEGIN PGP SIGNATURE-----
    Version: GnuPG v1.4.12 (GNU/Linux)

    iQEcBAABAgAGBQJQoI8zAAoJECZpDtshGi0+x2cH/RsM2LAeXTZkL792jJTVyoyg
    Iz/RT3aBZqnqXu2H4O2YB897Qr4vbnoCc5uaTxm4z4jujkRs5l5vfL184Yui+o9g
    eJW/Q+RegiMdgZMGY48xqz0sJMM1q2nJGy1c5qqX59IuUzslVkw+HxzPnChQHDBV
    B7EraKoIvJS8KzHdXF/sQtUnJAlg4ItKW/uc/gNRz7G2O9tCdyTuddlTA6b3dV0I
    gYCeF3TMgBMpkrDyYmVc9BkheIZDwy9ce1sRDYFmGpbD/Smae4mXeTgurEbe2bFJ
    TqRkB4tMMl4xRd1s+Wtbj3f3hxsLTZn3Wq1n9UlL5Ga/+Tx3gZQAIUYLPwwyD7k=
    =G2Qp
    -----END PGP SIGNATURE-----
    $ gpg --verify issue.sig
    gpg: Signature made Mon 12 Nov 2012 12:54:59 AM EST using RSA key ID 211A2D3E
    gpg: Good signature from "Rsaw Rsaw <rsaw@devnull>"
    $ mv issue.sig my-issue.sig
    $ gpg --verify -v my-issue.sig
    gpg: armor header: Version: GnuPG v1.4.12 (GNU/Linux)
    gpg: no signed data
    gpg: can't hash datafile: file open error
    $ gpg --verify my-issue.sig issue
    gpg: Signature made Mon 12 Nov 2012 12:54:59 AM EST using RSA key ID 211A2D3E
    gpg: Good signature from "Rsaw Rsaw <rsaw@devnull>"
    $ mv my-issue.sig issue.asc
    $ gpg -v --verify issue.asc
    gpg: armor header: Version: GnuPG v1.4.12 (GNU/Linux)
    gpg: assuming signed data in `issue'
    gpg: Signature made Mon 12 Nov 2012 12:54:59 AM EST using RSA key ID 211A2D3E
    gpg: using PGP trust model
    gpg: Good signature from "Rsaw Rsaw <rsaw@devnull>"
    gpg: binary signature, digest algorithm SHA1 
    ```

所以这应该涵盖这一点。

为了将来参考，这个问题不应该发布在 Stackoverflow 上，并且可能会被移动或关闭。它属于[Unix 和 Linux](https://unix.stackexchange.com/)或[Superuser](https://superuser.com/)。

# java - Java：用于存储点的字符串与自定义类

> ID：13338171
> 
> 赞同：2
> 
> 时间：2012-11-12T03:54:59.863
> 
> 标签：java, memory, ram

我正在处理一大组 X、Y、Z 点。如果我需要保持较低的 RAM 使用率，那么存储所有点的最佳方法是什么？一个字符串“X,Y,Z”，一个自定义类，或者它不会有任何区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T03:57:36.053

字符串几乎绝对是一个错误的选择：它们浪费了大约一半的空间，如果不是更多的话，它们会让你浪费 CPU 周期来将数据恢复为适合处理的数字格式。

具有三个原始字段的自定义类是更好的选择。根据点的范围和类型，使用`byte`、`short`、`int`、`long`、`float`或`double`。这可以帮助您避免每次要使用点时解析坐标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T04:04:59.823

如果你想实现低内存使用，你可以制作一个数组来存储 X、Y、Z。

对于索引为 i 的点，您可以将 X、Y、Z 存储在具有以下索引的数组元素中：

*   0 + 3*i 对于 X
*   1 + 3*i 代表 Y
*   2 + 3*i 代表 Z

**编辑：**这种方法还具有以下重要优点，在某些情况下可能非常方便：

*   将几何算法的所有数据放在内存中的一个连续位置，使 CPU 缓存效率更高。
*   它不会因为大量的小对象而使内存管理混乱。

你当然可以用一个类来包装这个大表，该类具有一些方法，例如`getX(int index)`以少量 CPU 成本使其更具可读性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T03:58:12.417

为什么不是一个包含 3 个元素的数组？

# jsf - 错误呈现视图 [.xhtml]

> ID：13338172
> 
> 赞同：0
> 
> 时间：2012-11-12T03:55:02.070
> 
> 标签：jsf, jboss, illegalargumentexception

我在使用 JBoss 服务器时遇到了这个问题。该应用程序部署在 JBoss 服务器 4.3 上。我可以启动服务器并访问应用程序，但是当我单击下拉菜单中的任何链接时，它会给我以下错误：

```
11:34:56,229 INFO  [STDOUT] 11:34:56,229 INFO  [PrettyFilter] Forwarding mapped request [/enq/mail/new] to JSF viewId [/idms/enquiry-mail-new.jsf]
11:34:56,744 ERROR [viewhandler] Error Rendering View[/idms/enquiry-mail-new.xhtml]
java.lang.IllegalArgumentException: can't parse argument number 0''
at java.text.MessageFormat.makeFormat(MessageFormat.java:1339)
at java.text.MessageFormat.applyPattern(MessageFormat.java:458)
at java.text.MessageFormat.<init>(MessageFormat.java:350)
at java.text.MessageFormat.format(MessageFormat.java:811)
at com.sun.faces.application.ApplicationImpl.createValidator(ApplicationImpl.java:904)
at com.sun.facelets.tag.jsf.core.ValidateDelegateHandler.createValidator(ValidateDelegateHandler.java:51)
at com.sun.facelets.tag.jsf.ValidateHandler.apply(ValidateHandler.java:90)
at com.sun.facelets.tag.jsf.ComponentHandler.applyNextHandler(ComponentHandler.java:314)
at com.sun.facelets.tag.jsf.ComponentHandler.apply(ComponentHandler.java:169)
at com.sun.facelets.tag.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)
at com.sun.facelets.tag.jsf.ComponentHandler.applyNextHandler(ComponentHandler.java:314)
at com.sun.facelets.tag.jsf.ComponentHandler.apply(ComponentHandler.java:169)
at com.sun.facelets.tag.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)
at com.sun.facelets.tag.ui.DefineHandler.applyDefinition(DefineHandler.java:64)
at com.sun.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:131)
at com.sun.facelets.impl.DefaultFaceletContext$TemplateManager.apply(DefaultFaceletContext.java:337)
at com.sun.facelets.impl.DefaultFaceletContext.includeDefinition(DefaultFaceletContext.java:307)
at com.sun.facelets.tag.ui.InsertHandler.apply(InsertHandler.java:68)
at com.sun.facelets.tag.jsf.ComponentHandler.applyNextHandler(ComponentHandler.java:314)
at com.sun.facelets.tag.jsf.ComponentHandler.apply(ComponentHandler.java:169)
at com.sun.facelets.tag.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)
at com.sun.facelets.tag.jsf.ComponentHandler.applyNextHandler(ComponentHandler.java:314)
at com.sun.facelets.tag.jsf.ComponentHandler.apply(ComponentHandler.java:169)
at com.sun.facelets.tag.jsf.ComponentHandler.applyNextHandler(ComponentHandler.java:314)
at com.sun.facelets.tag.jsf.ComponentHandler.apply(ComponentHandler.java:169)
at com.sun.facelets.tag.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)
at com.sun.facelets.tag.ui.DefineHandler.applyDefinition(DefineHandler.java:64)
at com.sun.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:131)
at com.sun.facelets.impl.DefaultFaceletContext$TemplateManager.apply(DefaultFaceletContext.java:337)
at com.sun.facelets.impl.DefaultFaceletContext.includeDefinition(DefaultFaceletContext.java:307)
at com.sun.facelets.tag.ui.InsertHandler.apply(InsertHandler.java:68)
at com.sun.facelets.tag.jsf.ComponentHandler.applyNextHandler(ComponentHandler.java:314)
at com.sun.facelets.tag.jsf.ComponentHandler.apply(ComponentHandler.java:169)
at com.sun.facelets.tag.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)
at com.sun.facelets.tag.jsf.ComponentHandler.applyNextHandler(ComponentHandler.java:314)
at com.sun.facelets.tag.jsf.ComponentHandler.apply(ComponentHandler.java:169)
at com.sun.facelets.tag.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)
at com.sun.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:49)
at com.sun.facelets.tag.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)
at com.sun.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:25)
at com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:248)
at com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:294)
at com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:273)
at com.sun.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:140)
at com.sun.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:113)
at com.sun.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:49)
at com.sun.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:25)
at com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:248)
at com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:294)
at com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:273)
at com.sun.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:140)
at com.sun.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:113)
at com.sun.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:49)
at com.sun.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:25)
at com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:248)
at com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:294)
at com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:273)
at com.sun.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:140)
at com.sun.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:113)
at com.sun.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:49)
at com.sun.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:25)
at com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:248)
at com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:294)
at com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:273)
at com.sun.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:140)
at com.sun.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:113)
at com.sun.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:49)
at com.sun.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:25)
at com.sun.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:95)
at com.sun.facelets.FaceletViewHandler.buildView(FaceletViewHandler.java:524)
at com.sun.facelets.FaceletViewHandler.renderView(FaceletViewHandler.java:567)
at org.ajax4jsf.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:100)
at org.ajax4jsf.application.AjaxViewHandler.renderView(AjaxViewHandler.java:176)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:106)
at com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:251)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:144)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:266)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:206)
at org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290)
at org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388)
at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
at org.springframework.security.intercept.web.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
at org.springframework.security.intercept.web.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
at org.springframework.security.ui.SessionFixationProtectionFilter.doFilterHttp(SessionFixationProtectionFilter.java:67)
at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
at org.springframework.security.ui.ExceptionTranslationFilter.doFilterHttp(ExceptionTranslationFilter.java:101)
at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
at org.springframework.security.providers.anonymous.AnonymousProcessingFilter.doFilterHttp(AnonymousProcessingFilter.java:105)
at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
at org.springframework.security.wrapper.SecurityContextHolderAwareRequestFilter.doFilterHttp(SecurityContextHolderAwareRequestFilter.java:91)
at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
at org.springframework.security.ui.AbstractProcessingFilter.doFilterHttp(AbstractProcessingFilter.java:277)
at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
at org.springframework.security.ui.logout.LogoutFilter.doFilterHttp(LogoutFilter.java:89)
at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
at org.springframework.security.context.HttpSessionContextIntegrationFilter.doFilterHttp(HttpSessionContextIntegrationFilter.java:235)
at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
at org.springframework.security.util.FilterChainProxy.doFilter(FilterChainProxy.java:175)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:236)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:687)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:469)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:403)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:301)
at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:64)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:173)
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:433)
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:241)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
at java.lang.Thread.run(Thread.java:619) 
```

这是我的源文件：

```
<ui:param name="pageTitle" value="#{idmsBundle.PageTitle_enquiryMailNewSearch}" />
<ui:param name="breadcrumbsNodeId" value="idmsEnquiryMailNewSearch" />
<ui:param name="breadcrumbsNodeLabel" value="#{idmsBundle.BreadCrumb_enquiryMailNewSearch}" />
<ui:param name="workflowBean" value="#{idmsEnquiryMailNewSearch_backing}" />
<ui:param name="idxLink" value="#{idmsBundle.Link_index}" />

<ui:define name="style">
    <style type="text/css">
        .criteria-height                        { height: 130px }
        label#criteriaForm\3a workqueueLabel    { width: 95px; }
        label#criteriaForm\3a branchLabel   { width: 85px;  }
        label#criteriaForm\3a ariesLabel    { width: 100px;  }
        label#criteriaForm\3a claimsLabel   { width: 85px;  }
        label#criteriaForm\3a chequeLabel   { width: 95px; }
        label#criteriaForm\3a paymentLabel  { width: 85px; }
        label#criteriaForm\3a currencyLabel { width: 85px; }
        label#criteriaForm\3a docIdLabel        { width: 75px; }
        label#criteriaForm\3a indateLabel       { width: 155px; }
        label#criteriaForm\3a valuedateLabel    { width: 85px; }

        #criteriaForm\3a branchInputHolder      { width: 100px; }
        #criteriaForm\3a branchInput            { width: 50px; }
        #criteriaForm\3a ariesInput             { width: 150px; text-transform: uppercase;}
        #criteriaForm\3a claimsInput            { width: 100px; text-transform: uppercase; }
        #criteriaForm\3a chequeInput            { width: 100px; text-transform: uppercase;}
        #criteriaForm\3a paymentInput           { width: 120px; }
        #criteriaForm\3a currencyInput          { width: 40px; text-transform: uppercase;}
        #criteriaForm\3a docIdInput         { width: 100px; }
        #criteriaForm\3a valuedateInput         { width: 110px; }
    </style>
</ui:define>
<ui:define name="searchCriteria">
    <h:outputLabel id="branchLabel" for="branchInput" value="* #{appBundle.FormLabel_branchCode}"/>
    <h:panelGroup id="branchInputHolder" styleClass="form-input">
        <h:inputText id="branchInput" label="#{appBundle.Label_branchCode}"
                value="#{workflowBean.message.branch}"
                maxlength="4" required="true" converter="aoc2kBranchConverter">
        </h:inputText>
        <kl:suggestionboxTrigger id="branchSbTrigger" for="criteriaForm:branchSuggestion"/>
        <kl:message for="branchInput"/>
    </h:panelGroup>

    <h:panelGroup id="ariesLabelId">
        <h:outputLabel id="ariesLabel" for="ariesInput" value="#{idmsBundle.FormLabel_ariesref}"/>
        <h:inputText id="ariesInput" label="#{idmsBundle.FormLabel_ariesref}" value="#{workflowBean.message.ariesRef}" maxlength="20" styleClass="form-input" />
    </h:panelGroup>
    <br/>
    <h:panelGroup id="claimsLabelId">
        <h:outputLabel id="claimsLabel" for="claimsInput" value="#{idmsBundle.FormLabel_claimsref}"  />
        <h:inputText id="claimsInput" label="#{idmsBundle.FormLabel_claimsref}" value="#{workflowBean.message.claimsRef}" maxlength="12" styleClass="form-input" />
    </h:panelGroup>

    <h:panelGroup id="chequeLabelId">
        <h:outputLabel id="chequeLabel" for="chequeInput" value="#{idmsBundle.FormLabel_chequeno}"/>
        <h:inputText id="chequeInput" label="#{idmsBundle.FormLabel_chequeno}" value="#{workflowBean.message.chequeNo}" maxlength="12" styleClass="form-input" />
    </h:panelGroup>
    <br/>

    <h:panelGroup id="paymentLabelId">
        <h:outputLabel id="paymentLabel" for="paymentInput" value="#{idmsBundle.FormLabel_paymentamt}"/>
        <h:inputText id="paymentInput" label="#{idmsBundle.FormLabel_paymentamt}" value="#{workflowBean.message.paymentAmount}" maxlength="19" styleClass="form-input"/>
    </h:panelGroup>

    <h:outputLabel id="docIdLabel" for="docIdInput" value="#{idmsBundle.FormLabel_docid}"/>
    <h:inputText id="docIdInput" label="#{idmsBundle.Label_docid}" value="#{workflowBean.message.docId}" 
        maxlength="9" styleClass="form-input"/>

    <br/>

    <h:panelGroup id="currencyLabelId">
        <h:outputLabel id="currencyLabel" for="currencyInput" value="#{idmsBundle.FormLabel_currency}"/>
        <h:inputText id="currencyInput"  label="#{idmsBundle.FormLabel_currency}" value="#{workflowBean.message.currency}" maxlength="3" styleClass="form-input" />
    </h:panelGroup>

    <h:outputLabel id="indateLabel" for="indateInput" value="#{idmsBundle.FormLabel_indatetime}" />
    <h:panelGroup styleClass="form-input">
        <rich:calendar id="indateInput" inputSize="10" enableManualInput="true" showWeeksBar="false"
            value="#{workflowBean.message.auditTrail.createdTime}"
            datePattern="#{idmsBundle.DateInputFormat}" label="#{idmsBundle.Label_indatetime}"
            converterMessage="#{idmsMsgBundle['idms.converter.INVALID_INDATE_DATEFORMAT']}">
                <f:validator validatorId="validateDate" />
        </rich:calendar>
        <kl:message for="indateInput"/>
    </h:panelGroup>

    <br/>

    <h:outputLabel id="valuedateLabel" for="valuedateInput" value="#{idmsBundle.FormLabel_valuedate}" />
        <h:panelGroup styleClass="form-input" >
                <rich:calendar id="valuedateInput" inputSize="10" enableManualInput="true" showWeeksBar="false"
                    value="#{workflowBean.message.valueDate}"
                    required="false" datePattern="#{idmsBundle.DateFormat}" label="#{idmsBundle.FormLabel_valuedate}"
                    converterMessage="#{idmsBundle.converterMessage_valuedate}">
                        <f:validator validatorId="validateDate" />
                </rich:calendar>
                <kl:message for="valuedateInput" />

    </h:panelGroup>

     <!-- Autocomplete, make sure resetCmd reRender this component or will result JS error -->
    <kl:branchAutocomplete id="branchSuggestion" for="branchInput">
        <a4j:actionparam name="funcd" value="#{applicationContextBean.currentUserFunctionCode}"/>
    </kl:branchAutocomplete>

    <a4j:keepAlive beanName="idmsEnquiryMailNewSearch_backing" />

</ui:define>

<ui:param name="resultColumnsWidth" value="90px,100px,50px,70px,140px,90px,50px,50px,70px,70px" />
<ui:define name="resultColumns">

    <rich:column  sortBy="#{item.row.claimsRef}" >
        <f:facet name="header">
                <h:outputText value="#{idmsBundle.Label_claimsref}" />
        </f:facet>
        <h:outputText value="#{item.row.claimsRef}"/>
    </rich:column>

    <rich:column  sortBy="#{item.row.paymentAmount}" >
        <f:facet name="header">
                <h:outputText value="#{idmsBundle.Label_paymentamt}" />
        </f:facet>
                <h:outputText value="#{item.row.paymentAmount}" style="float : right;" >
                    <f:convertNumber pattern="#,##0.00" />
                </h:outputText>
    </rich:column>

    <rich:column  sortBy="#{item.row.currency}" >
                <f:facet name="header">
                    <h:outputText value="#{idmsBundle.Label_ccy}" />
                </f:facet>
                <h:outputText value="#{item.row.currency}"/>
    </rich:column>

    <rich:column sortBy="#{item.row.valuedate}">
        <f:facet name="header">
            <h:outputText value="#{idmsBundle.Label_valuedate}" />
        </f:facet>
        <h:outputText value="#{item.row.valueDate}">
            <kl:convertDateTime pattern="#{idmsBundle.DateFormat}"/>
        </h:outputText>
    </rich:column>
    <rich:column sortBy="#{item.row.ariesRef}" >
                    <f:facet name="header">
                        <h:outputText value="#{idmsBundle.Label_ariesref}" />
                    </f:facet>
                    <h:outputText value="#{item.row.ariesRef}"/>
    </rich:column>

    <rich:column  sortBy="#{item.row.chequeNo}" >
                    <f:facet name="header">
                        <h:outputText value="#{idmsBundle.Label_chequeno}" />
                    </f:facet>
                    <h:outputText value="#{item.row.chequeNo}"/>
    </rich:column>

    <rich:column sortBy="#{item.row.fileOnly}" style="text-align: center;">
                    <f:facet name="header">
                        <h:outputText value="#{idmsBundle.Label_filing}" />
                    </f:facet>
                    <h:graphicImage value="/images/tick.png" rendered="#{item.row.fileOnly}" />
    </rich:column>
    <rich:column sortBy="#{item.row.priority}" style="text-align: center;">
                    <f:facet name="header">
                        <h:outputText value="#{idmsBundle.Label_urgent}" />
                    </f:facet>
                    <h:graphicImage value="/images/tick.png" rendered="#{item.row.priority}" />
    </rich:column>
    <rich:column sortBy="#{item.row.auditTrail.createdBy}" >
                    <f:facet name="header">
                        <h:outputText value="#{idmsBundle.Label_inuserid}" />
                    </f:facet>
                    <h:outputText value="#{item.row.auditTrail.createdBy}"/>
    </rich:column>
    <rich:column sortBy="#{item.row.docId}">
                    <f:facet name="header">
                        <h:outputText value="#{idmsBundle.Label_docid}"  />
                    </f:facet>
                    <h:outputText value="#{item.row.docId}"/>
    </rich:column>
</ui:define> 
```

我觉得这是 JSF 的一个问题，但不太确定它是什么。如果有人可以提供帮助，我将不胜感激。谢谢！

好的，我已经隔离了问题，但我仍然不知道如何解决它。问题出在这部分代码中：

```
 <h:outputLabel id="indateLabel" for="indateInput" value="#{idmsBundle.FormLabel_indatetime}" />
<h:panelGroup styleClass="form-input">
    <rich:calendar id="indateInput" inputSize="10" enableManualInput="true" showWeeksBar="false"
        value="#{workflowBean.message.auditTrail.createdTime}"
        datePattern="#{idmsBundle.DateInputFormat}" label="#{idmsBundle.Label_indatetime}"
        converterMessage="#{idmsMsgBundle['idms.converter.INVALID_INDATE_DATEFORMAT']}">
            <f:validator validatorId="validateDate" />
    </rich:calendar>
    <kl:message for="indateInput"/>
</h:panelGroup>

<br/>

<h:outputLabel id="valuedateLabel" for="valuedateInput" value="#{idmsBundle.FormLabel_valuedate}" />
    <h:panelGroup styleClass="form-input" >
            <rich:calendar id="valuedateInput" inputSize="10" enableManualInput="true" showWeeksBar="false"
                value="#{workflowBean.message.valueDate}"
                required="false" datePattern="#{idmsBundle.DateFormat}" label="#{idmsBundle.FormLabel_valuedate}"
                converterMessage="#{idmsBundle.converterMessage_valuedate}">
                    <f:validator validatorId="validateDate" />
            </rich:calendar>
            <kl:message for="valuedateInput" />

</h:panelGroup> 
```

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T07:17:00.577

好的，我在朋友的帮助下设法解决了这个问题。显然我有一个 jsf-impl.jar 在我`server\default\lib`这给了我错误。感谢大家的帮助。

# grails - 使用 xml-apis 的 Grails 编译错误 - SAXParserException

> ID：13338175
> 
> 赞同：0
> 
> 时间：2012-11-12T03:55:38.273
> 
> 标签：grails, compilation

我的 lib 目录只有 1 个 jar。xml-apis 2.8.1。当我删除它时，一切都会编译。这是我得到的错误：

```
java.lang.LinkageError: Class org/xml/sax/SAXParseException violates loader constraints 
```

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:31:52.870

这些`xml-apis`类包含在 JRE 中。这个问题也被称为[“jar hell”](http://tech-read.com/2009/01/13/what-is-jar-hell/)问题的一部分，并且 - 在 JVM 空间中 - 通常发生在 XML 库被多次包含在类路径中时，即来自 JRE `rt.jar`，由应用程序服务器或作为第三方库。这会导致`LinkageError`上面提供的异常。

这是一个描述如何[在 Grails 1.3.7 中解决此问题的](http://blogs.bytecode.com.au/glen/2011/08/27/grails-1-3-7-and-the-dreaded-saxparseexception.html)示例。

# c# - 字符串未被识别为使用 C# 的有效日期时间

> ID：13338185
> 
> 赞同：2
> 
> 时间：2012-11-12T03:57:12.377
> 
> 标签：c#, asp.net, .net

我正在比较 2 个日期字段以查看第一个日期字段是否小于第二个日期字段，但我收到此错误“字符串未被识别为有效日期时间”并且在此行失败

```
DateTime Field2 = DateTime.Parse(gr.Cells[10].Text); 
```

这是这个日期字段在我的表中的样子：2012-11-08

```
DateTime Field1 = DateTime.Parse(gr.Cells[3].Text);
DateTime Field2 = DateTime.Parse(gr.Cells[10].Text);
DateTime strDate = System.DateTime.Now;
if (Field2 == null && Field1 < strDate) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T04:02:20.530

使用[ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)并指定格式“yyyy-MM-dd”或“yyyy-dd-MM”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T04:02:04.750

使用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)：

```
var res = 
    DateTime.ParseExact("2012-11-08", "yyyy-MM-dd", 
        CultureInfo.InvariantCulture); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T04:06:55.237

根据[DateTime.Parse 上的 MSDN 条目](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)：

> 字符串 s 使用当前 DateTimeFormatInfo 对象中的格式信息进行解析，该对象由当前线程区域性隐式提供。

您很可能会收到错误消息，因为您当前的线程文化的日期格式与您提供的字符串的日期格式大不相同。

What you can do is to specify the format that you will be using for the date:

```
 DateTime.ParseExact(gr.Cells[10].Text, "yyyy-MM-dd", System.Globalization.CultureInfo.InvariantCulture); 
```

# iphone - 数据持久化tableView问题iPhone（读写plist）

> ID：13338192
> 
> 赞同：1
> 
> 时间：2012-11-12T03:58:21.547
> 
> 标签：iphone, ios, core-data, plist, tableview

在我的应用程序中，我想实现一个简单的警报功能。我知道如何使用 UILocalNotifications，但我遇到了这个源代码，它具有与 iPhone 的本地时钟应用程序警报区域类似的 UI，并且它具有一种类型的数据持久性。这个源代码有两件事我不擅长界面设计和数据持久性。但是我下载了它并开始使用它，发现警报不是持久的。

[下载](https://github.com/brousalis/neversnooze/archive/master.zip)

有谁知道如何调整源代码以使其持久化并且可以保存和读取plist？我也乐于学习，这个领域对我来说也有些陌生。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:39:28.270

尝试此代码...将 plist 从捆绑包保存到文档目录请注意，您将在第一次应用启动时出现“无法读取...”

```
- (NSMutableArray *)displayedObjects
    {
        if (_displayedObjects == nil)
        {
            NSString *path = [[self class] pathForDocumentWithName:@"Alarms.plist"];
            NSArray *alarmDicts = [NSMutableArray arrayWithContentsOfFile:path];

            if (alarmDicts == nil)
            {
                NSLog(@"Unable to read plist file: %@", path);
                NSLog(@"copy Alarms.plist to: %@", path);
                NSString *pathToSetingbundle = [[NSBundle mainBundle] pathForResource:@"Alarms" ofType:@"plist"];

                [[NSFileManager defaultManager]copyItemAtPath:pathToSetingbundle toPath:path error:nil];            
            }

            _displayedObjects = [[NSMutableArray alloc]
                                 initWithCapacity:[alarmDicts count]];

            for (NSDictionary *currDict in alarmDicts)
            {
                Alarm *alarm = [[Alarm alloc] initWithDictionary:currDict];
                [_displayedObjects addObject:alarm];
                 NSLog(@"@disply obj %@", alarm);
            }
        }

        return _displayedObjects;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:03:15.170

我查看了您的代码并发现您没有将“Alarms.plist”文件表单资源移动到文档目录的问题。我们无法编辑资源文件夹中的文件。所以在应用程序委托文件中编写以下代码。

```
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

NSString *theFileName = @"Alarms.plist"; //Change this appropriately

NSString *oldPath = [[NSBundle mainBundle] pathForResource:@"Alarms" ofType:@"plist"];//[NSString stringWithFormat:@"%@/Inbox/%@", documentsDirectory, theFileName];

NSString *newPath = [NSString stringWithFormat:@"%@/%@", documentsDirectory, theFileName];

if (![[NSFileManager defaultManager] fileExistsAtPath:newPath])

    [[NSFileManager defaultManager] moveItemAtPath:oldPath toPath:newPath error:nil]; 
```

对 Document 目录文件夹中的文件执行保存操作。

# fluent-nhibernate - Fluent NIBerate Automapping - 每个表的继承不写鉴别器列

> ID：13338195
> 
> 赞同：1
> 
> 时间：2012-11-12T03:58:48.720
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping

使用 NHibernate：3.3.2 流畅的 NHibernate：1.3.0 .NET 4.0

大家好，我正在尝试使用自动映射为 Fluent NHibernate 组合一个（非常）简单的参考项目，特别是设置每个层次结构的表继承。我已经尝试从现有（工作）项目中复制配置，并且我已经浏览了 Fluent Wiki 页面上关于 AutoMapping 和继承的示例，并且都给了我相同的结果；我用每层级表设置的基类被视为普通类。

域模型如下所示：

```
namespace Tests
{
    public abstract class Animal
    {
        public virtual int Id { get; set; }
        public virtual string Name { get; set; }
        public virtual int Legs { get; set; }
    }

    public class Cat : Animal {}

    public class Budgie : Animal {}
} 
```

就像我说的，简单，只是为了说明继承。我知道“腿”可能应该在基类上被覆盖:)

AutoMapping 配置如下所示：

```
public class AutoMappingConfig : DefaultAutomappingConfiguration
{
    public override bool ShouldMap(Type type)
    {
        var include = type.IsSubclassOf(typeof(Animal));
        Debug.WriteLineIf(include, string.Format("Included {0} in NHibernate mapping.", type));
        return include;
    }

    public override bool IsDiscriminated(Type type)
    {
        var result = type.In(
            (typeof(Cat)),
            (typeof(Budgie))
            );

        return result;
    }
} 
```

最后，配置/会话创建如下所示：

```
public static ISession NewSession()
{
    var cfg = new AutoMappingConfig();

    var map = AutoMap.AssemblyOf<Animal>(cfg)
        .IgnoreBase<Animal>();

    var dbConfiguration = MsSqlConfiguration.MsSql2008
        .ConnectionString(ConfigurationManager.ConnectionStrings["testdb"].ConnectionString);

    return Fluently.Configure()
        .Mappings(m =>m.AutoMappings.Add(map))
        .Database(dbConfiguration)
        .BuildSessionFactory()
        .OpenSession();
} 
```

综上所述，我尝试创建一些新记录：

```
[Test]
public void CreateData()
{
    var tiddles = new Cat {Name = "Tiddles", Legs = 4};
    var kylie = new Budgie {Name = "Kylie", Legs = 2};

    using (var transaction = _session.BeginTransaction())
    {
        _session.Save(tiddles); // exception!
        _session.Save(kylie);

        transaction.Commit();
        }
    }
} 
```

错误是：

> NHibernate.Exceptions.GenericADOException ：无法插入：[Tests.Cat] [SQL：INSERT INTO [Cat]（名称，腿）值（？，？）; 选择 SCOPE_IDENTITY()] ----> System.Data.SqlClient.SqlException：无效的对象名称“猫”。

需要注意的几点：

*   这 '？' 如果我使用 SQL Profiler 检查，则正在填写。
*   当我在 IsDiscriminated(Type type) 方法中放置断点时，我可以看到它被两种预期类型（Cat & Budgie）调用并且每次都返回 true。但是，SQL 正在写入错误的表，并且它没有写入鉴别器列。即，即使它被告知这些班级受到歧视，他们也没有被这样对待。
*   在表中，Id 列是一个自增标识列。
*   我尝试将其他属性添加到两个子类中，以防它们需要除基本属性之外的其他东西来触发正确的行为（没有区别）。

任何帮助将不胜感激。我现在确信它是显而易见的，但这里没有人对 NHibernate 了解很多（LightSpeed 是另一回事）所以我不知道是什么。

* * *

好的，所以最终的工作代码如下所示：

```
public class AutoMappingConfig : DefaultAutomappingConfiguration
{
    public override bool ShouldMap(Type type)
    {
        var include = type.IsSubclassOf(typeof(Animal)) || type == typeof (Animal);
        Debug.WriteLineIf(include, string.Format("Included {0} in NHibernate mapping.", type));
        return include;
    }

    public override bool IsDiscriminated(Type type)
    {
        return typeof(Animal).IsAssignableFrom(type);
    }
}

public static ISession NewSession()
{
    var cfg = new AutoMappingConfig();

    var map = AutoMap.AssemblyOf<Animal>(cfg)
        .IncludeBase<Animal>();

    var dbConfiguration = MsSqlConfiguration.MsSql2008
        .ConnectionString(ConfigurationManager.ConnectionStrings["testdb"].ConnectionString);

    return Fluently.Configure()
        .Mappings(m =>m.AutoMappings.Add(map))
        .Database(dbConfiguration)
        .BuildSessionFactory()
        .OpenSession();
} 
```

世界一切都很好:)

（即有三个错误）

[这里](https://github.com/jagregory/fluent-nhibernate/wiki/Automapping-inheritance)的说明有点令人困惑，因为它首先谈到使用 .IgnoreBase<> 所以 NHibernate 不会将基础本身视为实体，然后在使用抽象层超类型时提到使用 .Includebase<>。我都试过了，但没有 Firo 的回答就没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:49:57.253

你忘了动物

```
public override bool IsDiscriminated(Type type)
{
    return typeof(Animal).IsAssigneableFrom(type);
} 
```

# java - Java：没有“同步”的内存同步何时发生？

> ID：13338197
> 
> 赞同：0
> 
> 时间：2012-11-12T03:58:48.907
> 
> 标签：java, synchronization

对于一个有`synchronized`方法的类，我们知道当一个线程进入这些方法时，它会用主存中的对象状态更新其缓存，当它离开这些方法时，它会将其更改写入主存中的对象状态。

但是，在没有`synchronized`方法的情况下，线程是否会去主内存获取该对象的状态（当然第一次除外），或者将更改的状态写回内存？如果是，在什么条件下？

一个明显的想法是，当缓存“满”且脏时，线程必须在读取更多数据之前将其刷新到主内存，或者如果缓存无效，它将不得不丢弃它并获取最新的来自主存储器的数据。这个对吗？是否还有其他条件会发生这种“自动”内存同步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:20:45.413

在传统的O/S（linux、windows）中，线程经常被中断并推迟处理器，让其他线程运行。当这样的线程切换发生时，处理器缓存也被清除。

另一种情况是 volatile 变量，它们根本没有被缓存。

# mysql - MySQL索引名和外键名对于不同的表必须不同？

> ID：13338198
> 
> 赞同：12
> 
> 时间：2012-11-12T03:58:53.740
> 
> 标签：mysql, indexing, foreign-keys

MySQL索引名和外键名对于不同的表必须不同？

例如，

两个表都有相同的字段（profile_id），属于第三个表（profiles）。所以我想让 profile_id 被索引并将其约束为外键。

两个表中的索引名称可以命名为“profile_id_idx”吗？

并且“profile_id_fk”也是两者的外键名称？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-12T04:47:54.900

外键名称在所有数据库中的所有表中必须是唯一的。索引名称可以在不同的表中重复使用。

# android - 在android中以纵向模式显示对话框

> ID：13338204
> 
> 赞同：1
> 
> 时间：2012-11-12T03:59:46.123
> 
> 标签：android, android-layout, android-dialog, android-orientation

我在横向模式下进行活动（在清单文件中声明）。现在在该活动中，如果出现任何对话框，它将以横向模式显示。

即使我的活动处于横向模式，是否有任何方法可以根据设备的方向显示对话框方向？

# java - Java 小程序/机器人键码不匹配

> ID：13338206
> 
> 赞同：0
> 
> 时间：2012-11-12T03:59:54.287
> 
> 标签：java, applet, keycode, awtrobot

我通过 UDP 将来自小程序中的 KeyUp()/KeyDown() 的密钥提供给机器人的 KeyPress()/keyRelease() 以“同步”两个用户的输入。但是，密钥代码似乎不匹配 - 客户端上的“k”在服务器端产生“+”。有没有办法在这两种类型之间进行转换？

已解决 - 我没有使用 KeyListener，只是使用原生小程序方法，所以它没有使用 VK 常量。

# c# - 从 C# 以共享不受保护的只读模式保存 excel 工作表

> ID：13338207
> 
> 赞同：5
> 
> 时间：2012-11-12T04:00:01.410
> 
> 标签：c#, excel

我正在使用 Workbook.SaveAs 方法保存在 C# 中创建的工作表。XlSaveAsAccessMode 参数给我带来了问题。

xlShared 以保护模式保存工作表，因此用户无法玩转图表并仔细检查它们。它基本上显示为无法引用数据的死图。

xlExclusive 允许用户保存图书不受保护的访问权限，但不允许其他人保存。其他用户仍然看到死图表。

我需要以允许每个人查看和检查它的模式保存工作表，并能够使用图表、将系列与数据点连接等。但同时，他们应该无法保存他们的更改覆盖文件。如何使用 C# COM Excel API 实现这一点？

参考 -

[http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.workbook.saveas(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.workbook.saveas(v=vs.80).aspx)

[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.xlsaveasaccessmode.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.xlsaveasaccessmode.aspx)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T04:11:06.190

首先使用密码保存文件以防止修改 - 您可以在保存文件时在“*另存为*”对话框（在对话框底部的“*工具”下拉菜单下）执行此操作。*还要选中*只读推荐*复选框以强制文件处于只读模式。

当用户打开文件时，Excel 将要求输入密码，但没有该密码的用户将被迫进入只读模式。在只读 mdoe 中，用户可以对文件进行任何更改，但他们不能保存原始文件（无论文件系统中的只读属性如何） - 他们只能将文件的新副本保存在新名称（或不同文件夹中的相同名称）。

要使用这些属性以编程方式保存您的工作簿，您可以执行以下操作：

```
oWorkbook.SaveAs ( oWorkbook.Path + @"\Workbook.xls",
    Excel.XlFileFormat.xlWorkbookDefault,
    missing,
    "WritePassword",  // password against modification
    true,             // read-only recommended
    false,
    Excel.XlSaveAsAccessMode.xlNoChange,
    missing,
    missing,
    missing,
    missing,
    missing ); 
```

您还可以处理该[`WorkBookBeforeSave`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.appevents_event.workbookbeforesave%28v=office.14%29.aspx)事件并使用跟踪信息更新工作簿，以识别原始工作簿的副本。这将有助于以原始文件名保存在不同文件夹中的副本。（我不熟悉这个特定事件，但您甚至可以在处理它时取消保存操作。）

除非您完全控制文件（仅使用 Excel 几乎不可能），否则用户将能够复制您的文件，但上述设置至少会强制他们在原件完好无损的情况下保存新副本。这能解决你的问题吗？

# cmake - ArrayFire 与 VTK，...使用 CMake 编译它们？

> ID：13338208
> 
> 赞同：0
> 
> 时间：2012-11-12T04:00:04.760
> 
> 标签：cmake, vtk, arrayfire

我目前正在用 C++ 编写代码，该代码从目录中读取一组 3D .vtk 文件，并将 3D 点存储到 ArrayFire 数组中，以便我可以实现 PCA。

问题是我需要用cmake编译VTK。但是当我这样做时，arrayFire 会给出错误 LNK2019 和错误 LNK2001。

我在 MSDN 中检查了这个错误，但我仍然不清楚如何解决它。

有谁知道如何将 ArrayFire 添加到我的 CMakefile 中，以便我可以和平地构建 VTK 和 arrayFire？

谢谢。

# xml - Xpath 从兄弟节点的父节点获取值

> ID：13338214
> 
> 赞同：3
> 
> 时间：2012-11-12T04:00:49.500
> 
> 标签：xml, xslt, xpath, parent-child, siblings

目前我有一些这样的xml结构：

```
<element type="Input" name="nationality">
   <property i18n="true" text="Nationality" prefix="person.nationality."
    name="caption">caption</property>
   <property i18n="true" text="Nationality" prefix="person.nationality."
    name="desc">desc</property>
   <property name="visible">1</property>
   <property name="mandatory">0</property>
   <property name="value">AUS</property>
   <restriction prefix="country." base="String">
    <enumeration text="Albania" value="ALB" />
    <enumeration text="Algeria" value="DZA" />
    <enumeration text="Argentina" value="ARG" />
    <enumeration text="Australia" value="AUS" />
    <enumeration text="Austria" value="AUT" />
    <enumeration text="Bahrain" value="BHR" />
   </restriction>
</element> 
```

我想问有没有办法使用xpath来提取枚举[@text]标签的值，其值等于属性[@name='value']中的文本。在这种情况下，期望文本“澳大利亚”。

这只是我第一次使用 xpath，任何想法都会受到赞赏。谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T04:12:03.677

利用：

```
/*/*/enumeration[@value = ../../*[@name = 'value']]/@text 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T04:44:37.823

**使用**：

```
/*/restriction/*[@value = /*/property[@name='value']]/@text 
```

这将选择`text`的任何子元素的任何属性`/*/restriction`，其`value`属性等于`property`顶部元素的子元素的字符串值，该（`property`子）具有`name`属性，其字符串值为字符串`"value"`。

**如果您不想选择属性，而只想选择其字符串值，请使用：**

```
string(/*/restriction/*[@value = /*/property[@name='value']]/@text) 
```

**基于 XSLT 的验证**：

```
 <xsl:template match="/">
  <xsl:value-of select=
  "/*/restriction/*[@value = /*/property[@name='value']]/@text"/>
==========
  <xsl:value-of select=
  "string(/*/restriction/*[@value = /*/property[@name='value']]/@text)"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<element type="Input" name="nationality">
   <property i18n="true" text="Nationality" prefix="person.nationality."
    name="caption">caption</property>
   <property i18n="true" text="Nationality" prefix="person.nationality."
    name="desc">desc</property>
   <property name="visible">1</property>
   <property name="mandatory">0</property>
   <property name="value">AUS</property>
   <restriction prefix="country." base="String">
    <enumeration text="Albania" value="ALB" />
    <enumeration text="Algeria" value="DZA" />
    <enumeration text="Argentina" value="ARG" />
    <enumeration text="Australia" value="AUS" />
    <enumeration text="Austria" value="AUT" />
    <enumeration text="Bahrain" value="BHR" />
   </restriction>
</element> 
```

**两个 xpath 表达式针对上述文档进行评估，并将这些评估结果的字符串值（正确分隔）复制到输出**：

```
Australia
==========
  Australia 
```

# python - 文本文件中“日期”的格式应该是什么格式，以 Json 格式读取，然后使用 Python 插入 MongoDB？

> ID：13338215
> 
> 赞同：3
> 
> 时间：2012-11-12T04:00:56.240
> 
> 标签：python, json, mongodb, bson

我需要在我的代码中执行以下操作：

*   从文本文件中读取数据
*   将数据转换为 Json
*   将数据插入到 MongoDB

以下是文本文件内容的外观示例：

```
{
   "S": "someString" <- Type String when inerted in mongodb
   "N": 123          <- Type Int32
   "F": 12.3         <- Type Double
   "D": ?            <- Need to be Type DateTime when inerted in mongodb
} 
```

我不知道我应该用什么来代替“？” 因此，当我在 python 中使用 bson.json_util.loads 函数时，它可以正确地将文本文件转换为 Json，以后可以将其插入到 mongoDB 中。

这是执行加载和插入的代码：

```
with open('data.txt') as f:
    data = json_util.loads(f.read())
    db[dbName][colName].update({'_id': id}, data, upsert=True,safe=True) 
```

如果有人可以举例说明文件应该如何格式化，我将不胜感激。（如果您的示例可以包含更复杂的 Bson 类型，例如类型“二进制”或“代码”，那也很好:)）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T04:53:42.377

Mongo 对日期时间的表示是`{"$date": number-of-milliseconds-since-epoch}`. 在您的示例中：

```
{
   "S": "someString",
   "N": 123,
   "F": 12.3,
   "D": {"$date": 1352540684243}
} 
```

`D`写入 mongo 时将生成一个日期时间字段。

请参阅[mongo json 扩展的文档](http://www.mongodb.org/display/DOCS/Mongo+Extended+JSON)。

您还可以轻松地扩展`json_util`以编写您自己的扩展程序，例如，对于 ISO 格式的日期时间：

```
import json, dateutil.parser, bson.json_util

a = """{
    "mydate": {"$isodate": "2012-11-01T20:19:55.782Z"}
}"""

def my_hook(dct):
    if '$isodate' in dct:
        return dateutil.parser.parse(dct['$isodate'])
    return bson.json_util.object_hook(dct)

obj = json.loads(a, object_hook=my_hook) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:10:33.817

JSON 对日期一无所知，因此由您决定序列化和反序列化的标准格式。它将作为字符串存储在 MongoDB 中，因此请确保在 Python 代码中调用 strftime 和 strptime 时使用相同的格式字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T04:21:28.443

为什么不使用时间戳。除了在您的实际程序代码中之外，它们非常易于使用并且不需要真正的特殊处理，或者可以很容易地将它们作为整数单独存在。我已经处理了格式字符串，并且确实没有一种很好的方法可以确保它们在任何地方都相同，因此我尽可能地使用时间戳。

# cordova - 升级到 cordova 2.2.0 后 deviceready 事件中断

> ID：13338216
> 
> 赞同：1
> 
> 时间：2012-11-12T04:01:12.907
> 
> 标签：cordova, cordova-2.0.0

在从 cordova 2.1.0 升级到 2.2.0 后的 IOS 中，不再触发 deviceready 事件。还有其他人有这个问题吗？

```
var onDeviceReady = function() {
    device_ready = true;
    alert('dev ready');
    initApp();
};

document.addEventListener("deviceready", onDeviceReady, false); 
```

其他人有这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:27:18.253

尝试更改代码的位置。我有类似的问题并更改代码的位置并调用 .addEventListener, body onLoad 事件解决了这个问题。

```
function onLoad() {
      document.addEventListener("deviceready", onDeviceReady, false);
}

var onDeviceReady = function() {
    device_ready = true;
    alert('dev ready');
    initApp();
};

....

<body onload="onLoad()"> 
```

还要尝试检查您的 plugins.xml 和 config.xml，新版本中可能存在一些已弃用的属性。

您也可以发布日志吗？

# java - 一个 InvocationHandler 的多个接口

> ID：13338217
> 
> 赞同：0
> 
> 时间：2012-11-12T04:01:22.437
> 
> 标签：java, distributed, invocation, method-invocation

是否可以为具有不同接口的几个对象定义一个调用处理程序（代理）？

因为这个代理对对象所做的（所有检查等）是相同的（并且它们共享一个锁管理表，我更喜欢将它放在代理上的一个地方），

有没有办法做到这一点？

谢谢，阿里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:10:37.033

好吧，这样做的方法是拥有一个表示您的公共 IH 代码的基类，然后为每个特定调用将其子类化。

否则，您可以检查进来的对象，并确定适当的操作：

```
public Object invoke(Object proxy, Method method, Object[] args) {
    if (proxy instanceof InterfaceA) {
        handleInterfaceA(proxy, method, args);
    } else if (proxy instanceof InterfaceB) {
        handleInterfaceB(proxy, method, args);
    }
} 
```

但是由于 Java 已经有一个类调度机制，使用它比使用一堆 IF 或一个 switch 语句更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T16:42:55.643

`Proxy.newProxyInstance`专门接受一个接口数组，返回的代理实现了所有接口：

```
Proxy.newProxyInstance(this.getClass().getClassLoader(), new Class[]{Foo.class, Bar.class} , new Handler()) 
```

我想您必须将代理转换为每个不同的接口，然后才能调用它的相关方法，但无论如何您总是必须转换它，即使您只实现一个接口。

我不确定问题是什么；如果这不是你的意思，那么也许你可以澄清一下？

# wpf - 如果项目不在网格中，WPF Datagrid 将忽略 SelectedItem 更改

> ID：13338225
> 
> 赞同：1
> 
> 时间：2012-11-12T04:02:26.633
> 
> 标签：wpf, datagrid, selecteditem

我的视图模型中有一个“事物”的 ObservableCollection，并且在附加的 ObservableCollections 中有几个过滤后的列表子集。我在屏幕上有两个 DataGrid，我将它们分别绑定到 ObservableCollections 子集之一。

两个 DataGrid 都将其 SelectedItem 属性绑定到视图模型中的 SelectedThing 属性。

当我以编程方式或通过在两个网格之一中选择一行来更改 SelectedThing 时，它将按预期更改。如果现在由 SelectedThing 指向的项目存在于网格中，则网格将更新它的选定项目。

所以这是我的问题......如果网格的 ItemSource 中不存在 SelectedThing，则选择就像什么都没发生一样，并且保持在 SelectedThing 更改之前的任何状态。理想情况下，如果基础视图模型属性不再设置为网格的 ItemsSource 中的某些内容，我希望选择清除...有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:26:16.653

好的。得到它的工作。万一它在将来对其他人有所帮助，这就是使它起作用的原因...在您的代码中，为视图模型的 PropertyChanged 事件注册一个事件处理程序，然后使用它来检查每个网格以查看它是否包含正在被选择。如果不是，则清除该网格中的选定项。我还修改了我的 SelectedThing 属性以忽略传入的 NULL 值以避免死锁（在我的应用程序中，初始化后它永远不会为 NULL）

_vm 是一个返回我的视图模型的属性。

```
 _vm.PropertyChanged += new System.ComponentModel.PropertyChangedEventHandler(_vm_PropertyChanged);

   void _vm_PropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
   {
      if (e.PropertyName == "SelectedThing")
      {
          CheckSelection(grid1, _vm.SelectedThing);
          CheckSelection(grid2, _vm.SelectedThing);
      }
   }

   void CheckSelection(DataGrid grid, object selectedItem)
   {
      if (grid.ItemsSource != null)
      {
          bool itemInGrid = false;
          foreach (var item in grid.ItemsSource)
          {
              if (item == selectedItem)
              {
                  itemInGrid = true;
                  break;
              }
          }

          if (!itemInGrid) // clear selection
          {
              grid.SelectedItem = null;

              // not sure why, but this causes the highlight to clear.  Doesn't work otherwise
              grid.IsEnabled = false;
              grid.IsEnabled = true;
          }
      }
   } 
```

# php - 在 localhost 上使用 cURL 下载应用程序/msword

> ID：13338230
> 
> 赞同：0
> 
> 时间：2012-11-12T04:03:21.560
> 
> 标签：php, curl, download, localhost

我在这里研究过：http: [//php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)并启用了 cURL，验证它工作正常。

在 localhost 上使用 cURL 执行文件下载（应用程序/msword）的最佳方法是什么（在迁移到托管计划之前）？

这里存在一个有点类似的问题：[Download file Curl with url var](https://stackoverflow.com/questions/11370138/download-file-curl-with-url-var)

文件的路径称为 $path，但是 URL 是动态的，并且填充了文件的 id。

路径填充如下：

```
$path = "./uploads/{$_SESSION['email']}/"; 

$path = $path . basename( $_FILES['userfile']['name']); 
```

以下是下载链接本身：

```
<a href='ppage.php?id={$row['uid']}'>Download</a> 
```

我目前有以下内容，并且无法获得任何输出或错误消息：

```
 $fp = fopen ($path, 'w');
                $ch = curl_init();
                curl_setopt($ch, CURLOPT_FILE, $fp);
                curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
                curl_exec($ch);
                curl_close($ch);
                fclose($fp); 
```

该文件是一个 .doc，我可以从其位置手动打开它。dir、subdir 和文件本身的权限暂时为 777。如果您能指出正确的方向，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:48:54.080

如果这是您的全部代码，那么您缺少设置要下载的 URL 的部分：

```
curl_setopt($ch, CURLOPT_URL, 'http://www.something.com/somefile.doc'); 
```

# javascript - Javascript函数交换图像

> ID：13338235
> 
> 赞同：1
> 
> 时间：2012-11-12T04:04:42.377
> 
> 标签：javascript

我应该编写并使用 JavaScript 函数将内容插入 HTML 元素： • 创建一个名为 swapOut 的函数，其中包含以下语句：document.imageFlip.src="name of the first image"。• 创建一个名为swapBack 的函数，其中包含以下语句：document.imageFlip.src="name of the second image"。• 插入一个id 和名称为myImage 的div 标签。
• 在 div 容器内，插入一个 ID 和名称为 imageFlip 的图像标签。初始化图像标签以显示第一张图像。设置高度和宽度属性。将 alt 和 title 属性设置为“Swappable image”。alt="可交换图像" title="可交换图像" height="" width=""

• 在图像标签内，添加onmouseover="swapOut()" 和onmouseout="swapBack()"。这些定义了图像元素识别的事件。当您将鼠标移到图像上时，第一个调用您的 swapOut 函数；当您将鼠标移出图像时，第二个调用您的 swapBack 函数。

到目前为止，我已经做到了。在我的 .js 表单中，我有

```
function swapOut() {
    document.imageFlip.src = "firstImage"
}

function swapBack() {
    document.imageFlip.src = "secondImage"
} 
```

在我的 .htm 形式中，我有

```
<div id="myImage" name="myImage">

<img src="firstImage.png" alt="Swappable image" title="Swappable image" id="imageFlip" 
name="imageFlip" onmouseout="swapBack()" onmouseover="swapOut()" height="200" width="200"/>

</div> 
```

我需要交换图像，但我得到了第一张图像，但是当我将鼠标悬停在它上面时，我只得到一个没有图片的框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T04:19:30.943

确保您分配给“src”属性的内容具有完整的图像路径和扩展名。

对于您的情况，它将是

```
document.imageFlip.src = "firstImage.png"
// or
document.imageFlip.src = "secondImage.png" 
```

你也可以使用

```
document.getElementById('imageFlip').src = "firstImage.png" 
```

如果您不想在任何地方使用 name 属性，这是做这种事情的常用方法，并且（我可能错了）但我认为 name 属性在 HTML5 中已被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:25:45.590

您错过了图像的扩展名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T04:40:30.657

```
<img src="firstImage.png" alt="Swappable image" title="Swappable image" onMouseOver="this.src='secondImage.png'" onMouseOut="this.src='firstImage.png'" height="200" width="200"/> 
```

# android - SOTI 的wipeapplication 命令字在Android 上如何？

> ID：13338238
> 
> 赞同：4
> 
> 时间：2012-11-12T04:05:14.987
> 
> 标签：android, administrator, soti

SOTI 是一个远程设备管理系统，提供了许多功能。

其中之一是能够在 Android 手机上远程执行脚本，前提是预先安装和配置了 SOTI 客户端软件。客户端程序不需要根设备，但它确实充当设备管理。

SOTI 脚本语言中允许的命令之一是

```
wipeapplication com.example.notepad 
```

这会导致删除所有应用程序（在本例中为记事本）数据，但不会删除实际的 APK 文件。因此，它为您指定的任何应用程序提供了一个干净的状态。我知道这可以通过以下方式使用 root 完成：

```
rm -rf /data/data/com.example.notepad 
```

但不知何故，SOTI 是在没有 root 的情况下这样做的。就像 Android 设备管理员一样。现在 Android DeviceManagerPolicy 类确实有一个擦除方法，但它不是特定于应用程序的。据推测，如果有一种方法可以在某个权限级别擦除整个设备，那么应该有一种方法可以擦除一个应用程序的数据。但是我一直无法找出正在使用哪个命令？SOTI 如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-02T02:41:35.437

要卸载捆绑 ID 为 com.example.notepad 的 Android 应用程序，请在 Soti Mobicontrol 中使用以下脚本：

```
uninstall  com.example.notepad 
```

# iphone - 使用 Core Data 和外部存储的图像备份和恢复 .sqlite 文件

> ID：13338245
> 
> 赞同：4
> 
> 时间：2012-11-12T04:06:23.677
> 
> 标签：iphone, objective-c, ios, core-data

我想不出更好的方式来表达这个问题，所以让我澄清一下：

我在 Core Data 中存储了很多东西，其中一些是存储为二进制数据的图像。这些图像已设置为允许外部存储，这意味着，据我所知，Core Data 负责将这些图片存储在磁盘上的其他位置，而不是存储在数据库本身中（如果它们太大（> 1MB？））。我还尝试使用文件共享为此数据库构建一个简单的备份/恢复系统 - 单击“备份”将我的 .sqlite 文件从我的 Library 文件夹复制到我的 Documents 文件夹（使用不同的名称），允许用户通过 iTunes 访问（存储在任何地方），然后单击“恢复”在 Documents 文件夹中查找备份文件，删除 Library 文件夹中的活动 .sqlite 文件并将其替换为备份。

当从 Core Data 中删除图像时会出现问题，但是我想将我的数据库恢复到该图像仍然存在的时间。当我使用 Core Data 删除该图像时，我假设存储在数据库中的图像的路径和存储在其他地方的图像本身都被删除了。但是，当我通过带回 .sqlite 文件恢复旧数据库时，只存在图像的路径 - 图像本身存储在外部，因此无处可寻。

首先，这是在 Core Data 下备份和恢复数据库的合理方法，还是有明确的理由不应该通过来回复制底层 .sqlite 文件来解决这个问题？其次，任何人都可以就我如何允许 Core Data 处理外部存储同时仍然有办法备份这些图像提供建议吗？我意识到我可能可以手动存储图像，从而允许我将图像文件夹与我的 .sqlite 文件一起备份，但我确实喜欢让 Core Data 为我管理它的简单性，所以我只是想知道是否有任何更好的方法来做这个备份/恢复的事情。

# jquery - Jquery专注于类的下一个元素

> ID：13338246
> 
> 赞同：2
> 
> 时间：2012-11-12T04:06:24.173
> 
> 标签：jquery, html, next

我正在尝试创建一个函数，当按下 Enter 键时，会选择下一个带有类的输入。

我已经设法 .focus() 同一行中的下一个元素。但是，如果我需要在下一行选择下一个输入，则无法继续。

需要关注下一行中的第一个 .quantity 文本框。

控制台没有错误。

[http://jsfiddle.net/FP6qa/](http://jsfiddle.net/FP6qa/)

**HTML**

```
<table>
   <tr>
       <td>
         <input class='quantity' value=''/>
         <input class='100' value=''/>
       </td>
       <td>
         <input class='quantity' value=''/>
         <input class='50' value=''/>
       </td>
       <td>
         <input class='quantity' value=''/>
         <input class='20' value=''/>
       </td>
   </tr>
   <tr>
       <td>
         <input class='quantity' value=''/>
         <input class='100' value=''/>
       </td>
       <td>
         <input class='quantity' value=''/>
         <input class='50' value=''/>
       </td>
       <td>
         <input class='quantity' value=''/>
         <input class='20' value=''/>
       </td>
   </tr>
</table> 
```

**jQuery**

```
 $(".quantity").on('keypress', function (e) {
        if (e.keyCode === 13) {
           $(this).parent().next('td').find('input.quantity').focus();
        }  
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T04:12:30.210

您可以使用`index`方法：

```
var $quan = $('.quantity');
$quan.on('keyup', function(e) {
    if (e.which === 13) {
        var ind = $quan.index(this);
        $quan.eq(ind + 1).focus()
    }
}); 
```

[http://jsfiddle.net/cwgZP/](http://jsfiddle.net/cwgZP/)

或者，如果您想选择所有输入，您可以尝试：

```
var $input = $('input[type=text]');
$input.on('keyup', function(e) {
    if (e.which === 13) {
        var ind = $input.index(this);
        $input.eq(ind + 1).focus()
    }
}); 
```

# android - 在android中将数组数据发送到服务器

> ID：13338249
> 
> 赞同：0
> 
> 时间：2012-11-12T04:06:50.713
> 
> 标签：android

我有代码从android中的联系人发送数据电话。正如我们所知，android 中电话联系人中的许多数据。我有代码可以从电话联系人中获取数据并显示为这样的列表视图

```
 Cursor cursor = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null,null, ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME + " ASC");

                int row = cursor.getCount();
                friend_item = new MenuItem [row];
                int i=0;
                while(cursor.moveToNext()){
                    nama = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                    phone = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                    friend_item[i] = new MenuItem(nama,phone);
                    i++;
                }

List<NameValuePair> params = new ArrayList<NameValuePair>();
                params.add(new BasicNameValuePair("phone", mPhoneNumber));
                params.add(new BasicNameValuePair("friend", phone));

                // getting JSON string from URL
                JSONObject json = jParser.makeHttpRequest(Constants.url_phone_contact, "POST", params);
                 // Check your log cat for JSON reponse
                Log.d("All Friend: ", json.toString());

                try {                    
                    friend = json.getJSONArray("friend");
                    friend_item = new MenuItem[friend.length()]; 
                     // looping through All Products
                    for (int a = 0; a < friend.length(); a++) {
                    JSONObject c = friend.getJSONObject(i); 

                    //Storing each json item in variable
                    String phone_friend= c.getString(TAG_PHONE);

                    friend_item[i] = new MenuItem(nama, phone_friend);

                     // creating new HashMap
                     HashMap<String, String> map = new HashMap<String, String>();

                     // adding each child node to HashMap key => value
                   map.put("nama", nama);
                   map.put("phone", phone_friend);

                   // adding HashList to ArrayList
                      friendList.add(map);
                   }

              } catch (JSONException e) {

                e.printStackTrace();

              }             

        return null;

        } 
```

在`params.add(new BasicNameValuePair("friend", phone));`

朋友是数据数组，来自 [phone_contact] 的数组。那么我如何将数据数组和字符串“mPhoneNumber”发送到android中的服务器？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T04:11:29.683

您可以像这样将数据发送到服务器。

```
for(int i=0;i<unique_id.length;i++)
{
     params.add(new BasicNameValuePair("unique_id[]",unique_id[i]));
} 
```

您需要使用 for 循环来获取数组值并将数据分配给名称值对。

# javascript - 即时创建具有单独音轨的视频播放列表，今天这可能吗？

> ID：13338251
> 
> 赞同：0
> 
> 时间：2012-11-12T04:07:00.583
> 
> 标签：javascript, html, audio, video, audiotrack

我一直在整个网络上进行研究，但还没有找到任何确凿的答案，所以我想问问 stackoverflow 社区。

我有一个 HTML(5) 页面，它应该具有以下功能：

*   视频“时间轴”（无需编辑，但用户可以一个接一个地添加视频并在此时间轴内重新排序视频）
*   可以将单独的音轨（音乐/效果，非同步语音）添加到此空间，并应与视频的排列一起播放。

视频的整个“时间线”可被视为一个长剪辑，音频应与时间线的整个长度一起播放，而不是按轨道播放。

由 3 个 1 分钟剪辑组成的 3 分钟时间线需要匹配的 3 分钟音频剪辑，或者如果音频剪辑较短，则应在完成后开始循环。

根据我的研究，我收集到的任何使用 HTML5/JS 的东西都需要支持`@mediagroup`or `audioTracks`（尽管后者并没有真正解决围绕作为一个时间线播放的多个视频的问题）。

该项目的浏览器要求是：IE9 及以上、Chrome、Firefox、iPad。

这东西今天甚至可能吗？

如果是的话，任何关于如何实现这一点的想法都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:24:42.060

使用带有少量新插件和模块的 Popcorn.js，这一切都是可能的。

要开始，您需要：

*   Popcorn.js 最新版本（1.4，尚未发布，但在 master 分支上）
*   [popcorn._MediaElementProto.js](https://github.com/mozilla/popcorn-js/blob/master/wrappers/common/popcorn._MediaElementProto.js)
*   爆米花“[空](https://github.com/mozilla/popcorn-js/blob/master/wrappers/null/popcorn.HTMLNullVideoElement.js)”包装
*   [Popcorn Inception](https://github.com/brianchirls/popcorn-inception)插件

按顺序包含上述脚本文件，并创建一个容器元素来放置所有内容。然后，像这样：

```
var player = Popcorn.HTMLNullVideoElement('#container');
player.src = '#t=0,180'; // Makes a fake video 180 seconds long. Nothing but a timer.

var popcorn = Popcorn(player);

// first clip
popcorn.inception({
    start: 0,
    end: 60,
    source: ['video1.mp4', 'video1.webm', video1.ogv'],
    top: 0,
    left: 0,
    width: '100%'
    target: '#container',
    volume: 0 // mute this video, if you want
});

// second clip
popcorn.inception({
    start: 60,
    end: 120,
    source: ['video2.mp4', 'video2.webm', video2.ogv'],
    top: 0,
    left: 0,
    width: '100%'
    target: '#container',
    volume: 0
});

// third clip
popcorn.inception({
    start: 120,
    end: 180,
    source: ['video3.mp4', 'video3.webm', video3.ogv'],
    top: 0,
    left: 0,
    width: '100%'
    target: '#container',
    volume: 0
});

// audio file
popcorn.inception({
    start: 0,
    end: 180,
    source: ['audio.mp3', 'audio.ogg'],
    visibility: 'hidden'
}); 
```

您可以以编程方式添加或删除任何或所有这些剪辑，包括音频文件的其他副本（如果需要循环播放）。HTMLNullVideoElement 模仿原生视频元素，因此您可以使用该对象上的方法和属性来创建播放器界面。

这里唯一的问题是这些都不能在 iPad 上运行。不幸的是，Mobile Safari 只播放网页中的媒体元素。您可以采取一些技巧将它们作为播放交换出来，但它可能不会无缝播放并且音轨将无法正常工作。

# c# - 以编程方式添加 XmlIncludeAttribute

> ID：13338252
> 
> 赞同：2
> 
> 时间：2012-11-12T04:07:07.137
> 
> 标签：c#, .net, xml-serialization

我正在尝试向 XmlSerializor 添加一些提示，以便它可以序列化/反序列化接口。我不能将[XmlIncludeAttribute](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlincludeattribute.aspx)添加为类的装饰，而是想将序列化覆盖传递给 XmlSerializor：

```
var _xs = new XmlSerializer(typeof(Model.ISession), SerializationOverrides()); 
```

`SerializationOverrides()`看起来像这样：

```
private static XmlAttributeOverrides SerializationOverrides()
{
    var overrides = new XmlAttributeOverrides();

    overrides.Add(typeof(Model.ISession), XmlInclude(typeof(Model.Session)));

    return overrides;
} 
```

到目前为止，一切都很好。该`XmlInclude(...)`方法创建了一个新的[XmlAttributes](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributes.aspx)对象，但我不知道如何添加[XmlIncludeAttribute](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlincludeattribute.aspx)属性。

```
private static XmlAttributes XmlInclude(Type type)
{
    var attrs = new XmlAttributes();

    attrs....Add(new XmlIncludeAttribute(type)); // Add how?????

    return attrs;
} 
```

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T06:49:08.960

XmlSerializer 构造函数可以接受“额外类型”的数组，如下所示：

```
var _xs = new XmlSerializer(typeof(Model.ISession), 
    SerializationOverrides(), new Type[] { typeof(Model.Session), 
    new XmlRootAttribute("Session"), ""); 
```

这样做以及向覆盖添加额外的 XmlElements 似乎可以解决问题：

```
private static XmlAttributeOverrides SerializationOverrides()
{
    var overrides = new XmlAttributeOverrides();

    overrides.Add(typeof(Model.ISession), XmlInclude("Session", typeof(Model.Session)));

    return overrides;
}

private static XmlAttributes XmlInclude(string name, Type type)
{
    var attrs = new XmlAttributes();
    attrs.XmlElements.Add(new XmlElementAttribute(name, type));
    return attrs;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:19:37.467

据我所知，**你不能**
在编译时提供属性。
属性是静态数据，您最好的选择可能是使用[TypeDescriptor](http://msdn.microsoft.com/en-us/library/system.componentmodel.typedescriptor.aspx)。（看`TypeDescriptor.CreateProperty`）也许你可以尝试创建一个具有必要属性的派生类？

**编辑。看起来你可以！**

在此处查看[Marc Gravell 的回答](https://stackoverflow.com/a/2689660/1792936)

例子：

```
 var aor = new XmlAttributeOverrides();
        var Attribs = new XmlAttributes();
        Attribs.XmlElements.Add(new XmlElementAttribute("Session", typeof(Model.Session)));
        aor.Add(typeof(type), "Models", listAttribs);

        XmlSerializer ser = new XmlSerializer(typeof(type), aor); 
```

# database - 如何在 Orders 表中存储“N of the same Product”的购买

> ID：13338253
> 
> 赞同：4
> 
> 时间：2012-11-12T04:07:18.053
> 
> 标签：database, database-design

所以我们有关于产品类别、产品和变体的基本表格

**类别**
`id | name | active | parent_id`

**产品**
`id | name | price | active`

**c_p_link**
`category_id | product_id`

**变种**
`id | product_id | price | price_override | active | stock`

效果很好。

但我有两个疑问。

首先是如何构建订单。

我们有一个**订单**表
`id | customer_id | ordered | status`

我们还有一个**order_products**表
`id | order_id ..?`

这是我很好奇的一个。假设客户订购了 30 件产品。我们要不要

*   添加 30 行，并在每行添加每个单独项目的价格。
*   添加一行，将合并的总数添加到该行
*   添加一行，将单个价格添加到该行

下一部分是，稍后我们希望将凭证支持添加到购物车。例如 10% 的折扣，买两个，送一个等等。我现在不太在意这个的整体设计（这至少是几个月的折扣）。但我想知道这是否会影响我应该选择哪个版本的**order_products表？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:32:42.167

免责声明：*我从未编写过处理“购物车”或“订单”的数据库*模型

* * *

我认为*购买时的*价格应该编码到购买数据中：就像商店的纸质收据一样。我们称它为`total_price`代表收据上每个逐项列出的“行”，不应与`total_purchase_price`.

也就是说，*收取的金额是固定的*。以后产品价格是否发生变化并不重要，价格的变化*不应*反映在[要]支付的金额上。

因此，我将拥有这些字段：`product`, `unit_price`, `quantity`, `total_price`. 如果需要，可以轻松添加一个计算列，例如`base_total_price`( )。`unit_price * quantity`

现在，这`total_price`可能是基于 say`base_total_price * precent_discount`字段的计算值：但是，无论它最终是什么，我认为它`total_price`应该存在并且*应该在购买时修复*。（这意味着，如果它是计算列，则所有输入在购买时也是固定的。）

附录：如上所述，我以前从未设计过这样的模型，但我在商店观察到的一件事是折扣被用作*负成本*逐项项目。也就是说，商品是“以全价”购买的，然后收银机添加一个条目以抵消发生的任何促销活动的成本。我不知道这种方法的优点/原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:11:00.733

只需将产品数量添加到您的 order_products 表中即可：)

我更喜欢第三种解决方案，我认为它最适合您的数据库性能..

# matlab - 为什么像 combnk(1:3,2) 这样的命令在 Matlab 2011a 中不起作用？

> ID：13338258
> 
> 赞同：1
> 
> 时间：2012-11-12T04:07:51.783
> 
> 标签：matlab

有谁知道为什么不能使用命令

```
combnk(1:3,2) 
```

在 Matlab 2011a 中，或者有什么方法可以使这个内置函数工作？我得到的错误信息是

```
???Undefined function or method 'combnk' for input arguments of type 'double'. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T05:13:20.640

-errors的两个最常见原因`Undefined function or method`是 (1) 拼写错误，以及 (2) 缺少适当的工具箱。

如果您确定您没有犯任何拼写错误，请尝试`ver`在命令行上检查您安装了哪些工具箱。如果缺少统计工具箱，则路径上不会有`combnk`。

*Colin T Bowers 的额外提示*

如果`ver`表明您确实有统计工具箱，请尝试`which combnk`. 如果返回`combnk not found`，那么你可能需要刷新你的路径，比如`restoredefaultpath`then`savepath`

# c# - AutoMapper 和展平嵌套数组

> ID：13338262
> 
> 赞同：8
> 
> 时间：2012-11-12T04:08:30.460
> 
> 标签：c#, flatten, automapper-2

我正在尝试使用 AutoMapper 来展平多个级别的数组。

考虑以下源类：

```
class X {
    public string A { get; set; }
    public Y[] B { get; set; }
}

class Y {
    public string C { get; set; }
    public Z[] D { get; set; }
}

class Z {
    public string E { get; set; }
    public string F { get; set; }
} 
```

以及以下目的地：

```
class Destination {
    public string A { get; set; }
    public string C { get; set; }
    public string E { get; set; }
    public string F { get; set; }
} 
```

我想做的是从一个或多个 X 中获取一个列表，例如：

```
Mapper.Map<IEnumerable<X>, IEnumerable<Destination>>(arrayOfX); 
```

我无法弄清楚要使用哪种映射配置来实现这一点。MapFrom 似乎是 1:1 组合的方式，但似乎无法处理数组（或其他可枚举），除非我使用 AutoMapper 的目标命名约定。

关于如何实现这一目标的任何见解？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T04:50:02.843

试试这个映射器，

```
Mapper.CreateMap<Z, Destination>();
Mapper.CreateMap<Y, Destination>();
Mapper.CreateMap<X, Destination>()
    .ForMember(destination => destination.A, options => options.MapFrom(source => source.A)).IgnoreAllNonExisting()
    .ForMember(destination => destination.C, options => options.MapFrom(source => Mapper.Map<IEnumerable<Y>, IEnumerable<Destination>>(source.B).FirstOrDefault().C))
    .ForMember(destination => destination.E, options => options.MapFrom(source => Mapper.Map<IEnumerable<Z>, IEnumerable<Destination>>(source.B.SelectMany(d => d.D)).FirstOrDefault().E))
    .ForMember(destination => destination.F, options => options.MapFrom(source => Mapper.Map<IEnumerable<Z>, IEnumerable<Destination>>(source.B.SelectMany(d => d.D)).FirstOrDefault().F));

var result = Mapper.Map<IEnumerable<X>, IEnumerable<Destination>>(arrayOfX); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T05:21:24.513

不久前我有一个非常相似的问题。我有一组位置，每个位置都有一组街道。我想将它们映射到一组视图模型，其中每个视图模型代表一条街道（包括位置详细信息）。

这是我的解决方案：[https ://groups.google.com/forum/#!topic/automapper-users/b66c1M8eS8E](https://groups.google.com/forum/#!topic/automapper-users/b66c1M8eS8E)

对于这个特定问题，这可能是您的映射配置：

```
public static class AutoMapperConfig
{
     public static void Configure()
     {
         Mapper.CreateMap<Z, Destination>()
             .ForMember(dest => dest.A, opt => opt.Ignore())
             .ForMember(dest => dest.C, opt => opt.Ignore());

         Mapper.CreateMap<Y, Destination>()
             .ForMember(dest => dest.A, opt => opt.Ignore())
             .ForMember(dest => dest.E, opt => opt.Ignore())
             .ForMember(dest => dest.F, opt => opt.Ignore());

         Mapper.CreateMap<X, Destination>()
             .ForMember(dest => dest.C, opt => opt.Ignore())
             .ForMember(dest => dest.E, opt => opt.Ignore())
             .ForMember(dest => dest.F, opt => opt.Ignore());
     }
} 
```

因为 AutoMapper 主要是 1:1 映射，所以您需要实现一点魔法来映射到多个对象。这是一个如何调用该映射来填充对象的示例：

```
var rc = data.SelectMany(
    x => x.B.SelectMany(
        y => y.D
            .Select(Mapper.Map<Z, Destination>)
            .Select(z => Mapper.Map(y, z))
        )
        .Select(y => Mapper.Map(x, y))
    ); 
```

这里有几个单元测试来验证映射并在实际中展示它：

```
[TestFixture]
public class MapperTests
{
    [Test]
    public void Mapping_Configuration_IsValid()
    {
        AutoMapperConfig.Configure();
        Mapper.AssertConfigurationIsValid();
    }

    [Test]
    public void Mapping_TestItems_MappedOK()
    {
        AutoMapperConfig.Configure();
        Mapper.AssertConfigurationIsValid();

        var data = new[]
            {
                new X
                    {
                        A = "A1",
                        B = new[]
                            {
                                new Y
                                    {
                                        C = "A1C1",
                                        D = new[]
                                            {
                                                new Z
                                                    {
                                                        E = "A1C1E1",
                                                        F = "A1C1F1"
                                                    },
                                                new Z
                                                    {
                                                        E = "A1C1E2",
                                                        F = "A1C1F2"
                                                    },
                                            }
                                    },
                                new Y
                                    {
                                        C = "A1C2",
                                        D = new[]
                                            {
                                                new Z
                                                    {
                                                        E = "A1C2E1",
                                                        F = "A1C2F1"
                                                    },
                                                new Z
                                                    {
                                                        E = "A1C2E2",
                                                        F = "A1C2F2"
                                                    },
                                            }
                                    }
                            }
                    }
            };

        var rc = data.SelectMany(
            x => x.B.SelectMany(
                y => y.D
                    .Select(Mapper.Map<Z, Destination>)
                    .Select(z => Mapper.Map(y, z))
                )
                .Select(y => Mapper.Map(x, y))
            );

        Assert.That(rc, Is.Not.Null);
        Assert.That(rc.Count(), Is.EqualTo(4));
        var item = rc.FirstOrDefault(x => x.F == "A1C2F2");
        Assert.That(item, Is.Not.Null);
        Assert.That(item.A, Is.EqualTo("A1"));
        Assert.That(item.C, Is.EqualTo("A1C2"));
        Assert.That(item.E, Is.EqualTo("A1C2E2"));
        Assert.That(item.F, Is.EqualTo("A1C2F2"));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-24T13:50:22.330

对于通过搜索如何使用 AutoMapper 展平对象结构而遇到这篇文章的其他人 - 新的 AutoMapper 支持使用 IncludeMembers() 语法展平。

来源：[http ://docs.automapper.org/en/stable/Flattening.html](http://docs.automapper.org/en/stable/Flattening.html)

所以原来的问题可以这样解决：

```
Mapper.CreateMap<Z, Destination>();
Mapper.CreateMap<Y, Destination>().IncludeMembers(src => src.D);
Mapper.CreateMap<X, Destination>().IncludeMembers(src => src.B); 
```

# android - 已发布的 android 应用程序崩溃

> ID：13338265
> 
> 赞同：1
> 
> 时间：2012-11-12T04:09:01.313
> 
> 标签：android

在模拟器和我用来测试应用程序的设备中，它运行顺利。今天我把它发布到市场上，当我尝试点击一个按钮移动到另一个页面后，它崩溃了。

我已经尝试卸载并重新安装，但没有帮助。我再次尝试了模拟器，看看我是否对应用程序做了什么，但模拟器仍然可以正常工作。

有谁知道这可能是什么问题？如果我需要发布更多信息，请告诉我。提前致谢。

编辑1：崩溃类型：它说“不幸的是，[应用程序名称]已停止。”

编辑 2：Logcat

```
11-11 23:30:16.487: I/InputReader(2118): dispatchTouch::touch event's action is 1 (deviceType=0) [pCnt=1, pending(waiting finished signal)=0]
11-11 23:30:16.487: I/InputDispatcher(2118): Delivering touch to current input target: action: 1, channel 'xxxx'
11-11 23:30:16.487: I/InputDispatcher(2118): Delivering touch to current input target: action: 1, channel 'xxxx'
11-11 23:30:16.492: I/AudioService(2118): playSoundEffect() type:0 volume:-1
11-11 23:30:16.492: I/AudioPolicyManagerBase(2088): getSituationVolume: isBTConnected:0 isHeadConnected:0
11-11 23:30:16.492: I/AudioPolicyManager(2088): getParamFromPolicy  deviceInt = 0, situationInt = 1, situationVolume = 0.300000
11-11 23:30:16.497: I/AudioPolicyManager(2088): startOutput() output 1, stream 1, session 2857
11-11 23:30:16.497: I/AudioFlinger(2088): start output streamType (0, 1) for 1
11-11 23:30:16.497: V/yamaha::media::VolumeCtrl(2088): VolumeCtrl::createVolume()
11-11 23:30:16.497: V/yamaha::media::UserDep(2088): UserDep::getRouteInfo(output: audioengine=0, devices=00000002h
11-11 23:30:16.497: V/yamaha::media::UserDep(2088):                       incall: onoff=0, devices=00000000h
11-11 23:30:16.497: V/yamaha::media::UserDep(2088):                       capture: onoff=0, devices=00000000h, audioSource=0
11-11 23:30:16.497: V/yamaha::media::UserDep(2088):                       playback: audio_onoff=0, line_onoff=0)
11-11 23:30:16.497: V/yamaha::media::UserDep(2088): ALL Off
11-11 23:30:16.497: V/yamaha::media::VolumeCtrl(2088): VolumeCtrl::setVolume()
11-11 23:30:16.497: D/yamaha::media::VolumeCtrl(2088): VolumeCtrl::setVolume() FM Playback: Ready
11-11 23:30:16.497: D/yamaha::media::VolumeCtrl(2088): VolumeCtrl::setVolume() VoiceCall: Ready
11-11 23:30:16.507: D/CLIPBOARD(2118): Hide Clipboard dialog inside hideSoftInput() !
11-11 23:30:16.507: D/LightsService(2118): setLight_native: 4
11-11 23:30:16.507: D/lights(2118): set_light_notifications -1 0xff00ff00
11-11 23:30:16.507: D/lights(2118): handle_speaker_battery_locked: 0xffff0000, 0xff00ff00
11-11 23:30:16.507: D/lights(2118): set_led_state 0xFFFF0000, onMS=0, offMS=0
11-11 23:30:16.507: E/lights(2118): ***** Charging : RED Solid *****
11-11 23:30:16.507: E/lights(2118): led_type= 1,interval= 0
11-11 23:30:16.507: E/lights(2118): reverse= 0,blink_cnt= 0
11-11 23:30:16.507: E/lights(2118): RilD >> InvokeOemRequestHookRaw ret= 0
11-11 23:30:16.507: V/InputManagerService(2118): Client requesting input be hidden
11-11 23:30:16.507: V/LightsService(2118): setLight #4 #ff00ff00
11-11 23:30:16.527: D/PowerManagerService(2118): mIsSipVisible : false
11-11 23:30:16.752: D/dalvikvm(2118): GC_EXPLICIT freed 6236K, 40% free 20627K/34119K, paused 4ms+6ms
11-11 23:30:16.762: I/SurfaceFlinger(1754): id=1495 Removed idx=1 Map Size=4
11-11 23:30:16.762: I/SurfaceFlinger(1754): id=1495 Removed idx=-2 Map Size=4
11-11 23:30:16.797: E/AndroidRuntime(14075): FATAL EXCEPTION: main
11-11 23:30:16.797: E/AndroidRuntime(14075): java.lang.IllegalStateException: Could not execute method of the activity
11-11 23:30:16.797: E/AndroidRuntime(14075):    at android.view.View$1.onClick(View.java:3098)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at android.view.View.performClick(View.java:3620)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at android.view.View$PerformClick.run(View.java:14292)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at android.os.Handler.handleCallback(Handler.java:605)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at android.os.Looper.loop(Looper.java:137)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at android.app.ActivityThread.main(ActivityThread.java:4507)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at java.lang.reflect.Method.invokeNative(Native Method)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at java.lang.reflect.Method.invoke(Method.java:511)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at dalvik.system.NativeStart.main(Native Method)
11-11 23:30:16.797: E/AndroidRuntime(14075): Caused by: java.lang.reflect.InvocationTargetException
11-11 23:30:16.797: E/AndroidRuntime(14075):    at java.lang.reflect.Method.invokeNative(Native Method)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at java.lang.reflect.Method.invoke(Method.java:511)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at android.view.View$1.onClick(View.java:3093)
11-11 23:30:16.797: E/AndroidRuntime(14075):    ... 11 more
11-11 23:30:16.797: E/AndroidRuntime(14075): Caused by: android.os.NetworkOnMainThreadException
11-11 23:30:16.797: E/AndroidRuntime(14075):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at java.net.InetAddress.getAllByName(InetAddress.java:220)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at java.net.URLConnection.getContent(URLConnection.java:194)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at java.net.URL.getContent(URL.java:447)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at com.phil.avatarview.AvatarViewActivity.fetch(AvatarViewActivity.java:82)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at com.phil.avatarview.AvatarViewActivity.ImageOperations(AvatarViewActivity.java:68)
11-11 23:30:16.797: E/AndroidRuntime(14075):    at com.phil.avatarview.AvatarViewActivity.firstbutton(AvatarViewActivity.java:59)
11-11 23:30:16.797: E/AndroidRuntime(14075):    ... 14 more
11-11 23:30:16.827: E/android.os.Debug(2118): !@Dumpstate > dumpstate -k -t -n -z -d -o /data/log/dumpstate_app_error
11-11 23:30:16.832: I/ALSAModule(2088): Initialized ALSA PLAYBACK device hifi
11-11 23:30:16.842: I/dumpstate(14132): Check if stand-alone
11-11 23:30:16.847: I/dumpstate(14132): begin
11-11 23:30:16.997: I/AudioPolicyManager(2088): stopOutput() output 1, stream 1, session 2857
11-11 23:30:17.022: I/AudioFlinger(2088): stop output streamType (0, 1) for 1
11-11 23:30:17.072: D/BatteryService(2118): update start
11-11 23:30:17.077: D/BatteryService(2118): level:18 scale:100 status:2 health:2 present:true voltage: 3749 temperature: 320 technology: Li-ion AC powered:false USB powered:true icon:17302822 invalid charger:0
11-11 23:30:17.327: W/ActivityManager(2118): Activity pause timeout for r
11-11 23:30:17.522: V/yamaha::media::VolumeCtrl(2088): VolumeCtrl::createVolume()
11-11 23:30:17.522: D/yamaha::media::VolumeCtrl(2088): Dir0      : AP Playback Music SP (0001h)

11-11 23:30:17.522: V/yamaha::media::UserDep(2088): UserDep::getRouteInfo(output: audioengine=0, devices=00000002h
11-11 23:30:17.522: V/yamaha::media::UserDep(2088):                       incall: onoff=0, devices=00000000h
11-11 23:30:17.522: V/yamaha::media::UserDep(2088):                       capture: onoff=0, devices=00000000h, audioSource=0
11-11 23:30:17.522: V/yamaha::media::UserDep(2088):                       playback: audio_onoff=1, line_onoff=0)
11-11 23:30:17.847: W/PowerManagerService(2118): Timer 0x3->0x3|0x0
11-11 23:30:18.532: W/InputConnectionWrapper.ICC(2438): Timed out waiting on IInputContextCallback
11-11 23:30:20.087: I/ALSAModule(2088): Terminated ALSA PLAYBACK device hifi
11-11 23:30:20.507: V/yamaha::media::VolumeCtrl(2088): VolumeCtrl::createVolume()
11-11 23:30:20.507: V/yamaha::media::UserDep(2088): UserDep::getRouteInfo(output: audioengine=0, devices=00000002h
11-11 23:30:20.507: V/yamaha::media::UserDep(2088):                       incall: onoff=0, devices=00000000h
11-11 23:30:20.507: V/yamaha::media::UserDep(2088):                       capture: onoff=0, devices=00000000h, audioSource=0
11-11 23:30:20.507: V/yamaha::media::UserDep(2088):                       playback: audio_onoff=0, line_onoff=0)
11-11 23:30:20.507: V/yamaha::media::UserDep(2088): ALL Off
11-11 23:30:20.507: V/yamaha::media::VolumeCtrl(2088): VolumeCtrl::setVolume()
11-11 23:30:20.507: D/yamaha::media::VolumeCtrl(2088): VolumeCtrl::setVolume() FM Playback: Ready
11-11 23:30:20.507: D/yamaha::media::VolumeCtrl(2088): VolumeCtrl::setVolume() VoiceCall: Ready
11-11 23:30:20.557: W/InputConnectionWrapper.ICC(2438): Timed out waiting on IInputContextCallback
11-11 23:30:22.587: W/InputConnectionWrapper.ICC(2438): Timed out waiting on IInputContextCallback
11-11 23:30:23.337: D/VoldCmdListener(1746): asec list
11-11 23:30:23.342: D/VoldCmdListener(1746): CommandListener::AsecCmd::runCommand -> -- 
11-11 23:30:24.612: W/InputConnectionWrapper.ICC(2438): Timed out waiting on IInputContextCallback
11-11 23:30:26.397: D/PowerManagerService(2118): mIsLockZone =  false
11-11 23:30:36.507: E/AlarmManagerService(2118): android_server_AlarmManagerService_set to type=1, 1352696400.000000000
11-11 23:30:39.347: W/PowerManagerService(2118): Timer 0x3->0x1|0x0
11-11 23:30:39.347: D/LightsService(2118): setLight_native: 0
11-11 23:30:39.347: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 30
11-11 23:30:39.347: I/PowerManagerService(2118): Ulight 3->1|0
11-11 23:30:39.347: V/LightsService(2118): setLight #0 #ff1e1e1e
11-11 23:30:39.367: D/LightsService(2118): setLight_native: 0
11-11 23:30:39.367: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 29
11-11 23:30:39.367: V/LightsService(2118): setLight #0 #ff1d1d1d
11-11 23:30:39.382: D/LightsService(2118): setLight_native: 0
11-11 23:30:39.382: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 28
11-11 23:30:39.382: V/LightsService(2118): setLight #0 #ff1c1c1c
11-11 23:30:39.397: D/LightsService(2118): setLight_native: 0
11-11 23:30:39.397: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 27
11-11 23:30:39.397: V/LightsService(2118): setLight #0 #ff1b1b1b
11-11 23:30:39.412: D/LightsService(2118): setLight_native: 0
11-11 23:30:39.412: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 26
11-11 23:30:39.412: V/LightsService(2118): setLight #0 #ff1a1a1a
11-11 23:30:39.432: D/LightsService(2118): setLight_native: 0
11-11 23:30:39.432: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 25
11-11 23:30:39.432: V/LightsService(2118): setLight #0 #ff191919
11-11 23:30:39.447: D/LightsService(2118): setLight_native: 0
11-11 23:30:39.447: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 24
11-11 23:30:39.447: V/LightsService(2118): setLight #0 #ff181818
11-11 23:30:39.462: D/LightsService(2118): setLight_native: 0
11-11 23:30:39.462: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 23
11-11 23:30:39.462: V/LightsService(2118): setLight #0 #ff171717
11-11 23:30:39.477: D/LightsService(2118): setLight_native: 0
11-11 23:30:39.477: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 22
11-11 23:30:39.477: V/LightsService(2118): setLight #0 #ff161616
11-11 23:30:39.492: D/LightsService(2118): setLight_native: 0
11-11 23:30:39.492: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 21
11-11 23:30:39.492: V/LightsService(2118): setLight #0 #ff151515
11-11 23:30:39.512: D/LightsService(2118): setLight_native: 0
11-11 23:30:39.512: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 20
11-11 23:30:39.512: V/LightsService(2118): setLight #0 #ff141414
11-11 23:30:39.512: I/PowerManagerService(2118): Light Animator Finished curIntValue=20
11-11 23:30:40.467: I/dumpstate(14132): done
11-11 23:30:40.562: D/BatteryService(2118): update start
11-11 23:30:40.562: D/PowerManagerService(2118): acquireDVFSLockLocked : type : DVFS_MIN_LIMIT  frequency : 1000000  uid : 1000  pid : 2118  tag : ActivityManager
11-11 23:30:40.567: I/power(2118): *** acquire_dvfs_lock : lockType : 1  freq : 1000000 
11-11 23:30:40.572: W/ActivityManager(2118): mDVFSLock.acquire()
11-11 23:30:40.582: D/BatteryService(2118): level:18 scale:100 status:2 health:2 present:true voltage: 3751 temperature: 320 technology: Li-ion AC powered:false USB powered:true icon:17302822 invalid charger:0
11-11 23:30:40.587: D/WimaxStateTracker(2118): getNetworkInfo : NetworkInfo: type: WIMAX[], state: UNKNOWN/IDLE, reason: (unspecified), extra: (none), roaming: false, failover: true, isAvailable: false
11-11 23:30:40.587: W/WifiStateTracker(2118): getNetworkInfo : NetworkInfo: type: WIFI[], state: CONNECTED/CONNECTED, reason: (unspecified), extra: (none), roaming: false, failover: false, isAvailable: true
11-11 23:30:40.587: E/WifiP2pStateTracker(2118): getNetworkInfo : NetworkInfo: type: wifi_p2p[], state: UNKNOWN/IDLE, reason: (unspecified), extra: (none), roaming: false, failover: false, isAvailable: false
11-11 23:30:40.612: D/BatteryService(2118): update start
11-11 23:30:40.617: D/STATUSBAR-BatteryController(2344): onReceive() - ACTION_BATTERY_CHANGED
11-11 23:30:40.617: D/STATUSBAR-BatteryController(2344): onReceive() - level:18
11-11 23:30:40.617: D/STATUSBAR-BatteryController(2344): onReceive() - plugged:2
11-11 23:30:40.617: D/STATUSBAR-BatteryController(2344): onReceive() - BATTERY_STATUS_CHARGING:
11-11 23:30:40.622: V/WindowOrientationListener(2118): nearestRotation : 0   Angle: 10   tilt: 49
11-11 23:30:40.622: W/ActivityManager(2118): Launch timeout has expired, giving up wake lock!
11-11 23:30:40.627: D/KeyguardUpdateMonitor(2118): received broadcast android.intent.action.BATTERY_CHANGED
11-11 23:30:40.627: D/KeyguardUpdateMonitor(2118): handleBatteryUpdate
11-11 23:30:40.627: D/UiModeManager(2118): mLastBroadcastState = 0mCarModeEnabled = falseisDeskDockState(mDockState) = false
11-11 23:30:40.627: V/UiModeManager(2118): updateLocked: null action, mDockState=0, firing homeIntent: null
11-11 23:30:40.627: D/UiModeManager(2118): updateConfigurationLocked: mDockState=0; mCarMode=false; mNightMode=0; uiMode=17
11-11 23:30:40.632: I/SurfaceFlinger(1754): id=1496(217) createSurface 0x47704 (1x1),1 flag=0
11-11 23:30:40.637: D/KeyguardUpdateMonitor(2118): received broadcast android.intent.action.BATTERY_CHANGED
11-11 23:30:40.637: D/KeyguardUpdateMonitor(2118): handleBatteryUpdate
11-11 23:30:40.637: D/UiModeManager(2118): mLastBroadcastState = 0mCarModeEnabled = falseisDeskDockState(mDockState) = false
11-11 23:30:40.637: V/UiModeManager(2118): updateLocked: null action, mDockState=0, firing homeIntent: null
11-11 23:30:40.637: D/UiModeManager(2118): updateConfigurationLocked: mDockState=0; mCarMode=false; mNightMode=0; uiMode=17
11-11 23:30:40.642: D/STATUSBAR-BatteryController(2344): onReceive() - ACTION_BATTERY_CHANGED
11-11 23:30:40.642: D/STATUSBAR-BatteryController(2344): onReceive() - level:18
11-11 23:30:40.642: D/STATUSBAR-BatteryController(2344): onReceive() - plugged:2
11-11 23:30:40.642: D/STATUSBAR-BatteryController(2344): onReceive() - BATTERY_STATUS_CHARGING:
11-11 23:30:40.707: D/Finsky(8292): [1] DetailsDataBasedFragment.rebindViews: Page [class=DetailsFragment] loaded in [585430 ms] (partial? false)
11-11 23:30:40.727: I/SurfaceFlinger(1754): id=1497(26) createSurface 0x44624 (480x800),1 flag=400
11-11 23:30:40.767: D/dalvikvm(8292): GC_CONCURRENT freed 1270K, 23% free 12763K/16519K, paused 2ms+7ms
11-11 23:30:40.852: W/Finsky(8292): [1] HistogramView.bind: No histogram data received from server
11-11 23:30:40.862: D/Finsky(8292): [1] DetailsDataBasedFragment.rebindViews: Page [class=DetailsFragment] loaded in [585585 ms] (partial? true)
11-11 23:30:40.977: D/dalvikvm(2542): GC_CONCURRENT freed 396K, 7% free 9432K/10055K, paused 1ms+2ms
11-11 23:30:41.422: I/power(2118): *** release_dvfs_lock : lockType : 1 
11-11 23:30:41.422: D/PowerManagerService(2118): releaseDVFSLockLocked : all DVFS_MIN_LIMIT are released 
11-11 23:30:41.422: W/ActivityManager(2118): mDVFSLock.release()
11-11 23:30:46.347: W/PowerManagerService(2118): Timer 0x1->0x0|0x0
11-11 23:30:46.347: D/PowerManagerService(2118): Screen__Off : Timeout
11-11 23:30:46.347: I/PowerManagerService(2118): Ulight 1->0|0
11-11 23:30:46.352: D/LightsService(2118): setLight_native: 0
11-11 23:30:46.352: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 18
11-11 23:30:46.352: V/LightsService(2118): setLight #0 #ff121212
11-11 23:30:46.367: D/LightsService(2118): setLight_native: 0
11-11 23:30:46.367: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 17
11-11 23:30:46.367: V/LightsService(2118): setLight #0 #ff111111
11-11 23:30:46.382: D/LightsService(2118): setLight_native: 0
11-11 23:30:46.382: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 16
11-11 23:30:46.382: V/LightsService(2118): setLight #0 #ff101010
11-11 23:30:46.402: D/LightsService(2118): setLight_native: 0
11-11 23:30:46.402: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 15
11-11 23:30:46.402: V/LightsService(2118): setLight #0 #ff0f0f0f
11-11 23:30:46.417: D/LightsService(2118): setLight_native: 0
11-11 23:30:46.417: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 14
11-11 23:30:46.417: V/LightsService(2118): setLight #0 #ff0e0e0e
11-11 23:30:46.432: D/LightsService(2118): setLight_native: 0
11-11 23:30:46.432: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 13
11-11 23:30:46.432: D/PowerManagerService(2118): Tilt onSensorChanged : return, isScreenTurningOffLocked : true
11-11 23:30:46.432: V/LightsService(2118): setLight #0 #ff0d0d0d
11-11 23:30:46.447: D/LightsService(2118): setLight_native: 0
11-11 23:30:46.447: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 12
11-11 23:30:46.447: V/LightsService(2118): setLight #0 #ff0c0c0c
11-11 23:30:46.462: D/LightsService(2118): setLight_native: 0
11-11 23:30:46.462: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 11
11-11 23:30:46.462: V/LightsService(2118): setLight #0 #ff0b0b0b
11-11 23:30:46.482: D/LightsService(2118): setLight_native: 0
11-11 23:30:46.482: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 10
11-11 23:30:46.482: V/LightsService(2118): setLight #0 #ff0a0a0a
11-11 23:30:46.497: D/LightsService(2118): setLight_native: 0
11-11 23:30:46.497: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 8
11-11 23:30:46.497: V/LightsService(2118): setLight #0 #ff080808
11-11 23:30:46.512: D/LightsService(2118): setLight_native: 0
11-11 23:30:46.512: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 7
11-11 23:30:46.512: V/LightsService(2118): setLight #0 #ff070707
11-11 23:30:46.527: D/LightsService(2118): setLight_native: 0
11-11 23:30:46.527: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 6
11-11 23:30:46.527: V/LightsService(2118): setLight #0 #ff060606
11-11 23:30:46.547: D/LightsService(2118): setLight_native: 0
11-11 23:30:46.547: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 5
11-11 23:30:46.547: V/LightsService(2118): setLight #0 #ff050505
11-11 23:30:46.562: D/LightsService(2118): setLight_native: 0
11-11 23:30:46.562: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 4
11-11 23:30:46.562: V/LightsService(2118): setLight #0 #ff040404
11-11 23:30:46.577: D/LightsService(2118): setLight_native: 0
11-11 23:30:46.577: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 3
11-11 23:30:46.577: V/LightsService(2118): setLight #0 #ff030303
11-11 23:30:46.592: D/LightsService(2118): setLight_native: 0
11-11 23:30:46.592: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 2
11-11 23:30:46.592: V/LightsService(2118): setLight #0 #ff020202
11-11 23:30:46.612: D/LightsService(2118): setLight_native: 0
11-11 23:30:46.612: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 1
11-11 23:30:46.612: V/LightsService(2118): setLight #0 #ff010101
11-11 23:30:46.627: D/LightsService(2118): setLight_native: 0
11-11 23:30:46.627: E/lights(2118): write_int: path /sys/class/backlight/panel/brightness, value 0
11-11 23:30:46.627: V/LightsService(2118): setLight #0 #ff000000
11-11 23:30:46.632: I/power(2118): *** set_screen_state 0
11-11 23:30:46.632: D/SensorManager(2118): unregisterListener:: disable all sensors for this listener,  name = CM3663 Light Sensor listener = com.android.server.PowerManagerService$15@41714560
11-11 23:30:46.632: D/PowerManagerService(2118): Tilt onSensorChanged : return, isScreenTurningOffLocked : true
11-11 23:30:46.632: I/PowerManagerService(2118): Light Animator Finished curIntValue=0
11-11 23:30:46.632: D/PowerManagerService(2118): enableLightSensorLocked enable=false mAutoBrightessEnabled=true
11-11 23:30:46.637: I/SensorManager(2118): Set min delay = 200000
11-11 23:30:46.637: I/SensorManager(2118): Before sending... delay = 200000
11-11 23:30:46.637: D/Sensors(2118): Remain listener = android.view.WindowOrientationListener$SensorEventListenerImpl@418a4620
11-11 23:30:46.637: I/Sensors(2118): sendDelay --- 200000000
11-11 23:30:46.637: D/SensorManager(2118): JNI - sendDelay
11-11 23:30:46.642: D/SensorManager(2118): unregisterListener:: disable all sensors for this listener,  name = K3DH Acceleration Sensor listener = com.android.server.PowerManagerService$16@4173e160
11-11 23:30:46.642: D/LightsService(2118): setLight_native: 2
11-11 23:30:46.642: E/lights(2118): write_int: path /sys/devices/virtual/sec/sec_touchkey/brightness, value 2
11-11 23:30:46.642: D/LightsService(2118): setLight_native: 1
11-11 23:30:46.642: E/lights(2118): write_int: path /sys/class/leds/keyboard-backlight/brightness, value 0
11-11 23:30:46.642: V/LightsService(2118): setLight #2 #0
11-11 23:30:46.642: V/LightsService(2118): setLight #1 #0
11-11 23:30:46.642: W/PowerManagerService(2118): CurLockF mPS:0 mUS=0
11-11 23:30:46.642: W/PowerManagerService(2118): mPokeLocks.size=0:
11-11 23:30:46.642: D/PowerManagerService(2118): sendNotificationLocked on=false
11-11 23:30:46.657: D/SurfaceFlinger(1754): About to give-up screen, flinger = 0xfa68
11-11 23:30:46.667: D/KeyguardViewMediator(2118): onScreenTurnedOff(3)
11-11 23:30:46.667: D/PowerManagerService(2118): mNotificationTask : off
11-11 23:30:46.672: E/AlarmManagerService(2118): android_server_AlarmManagerService_set to type=2, 318374.438000000
11-11 23:30:46.672: D/KeyguardViewMediator(2118): setting alarm to turn off keyguard, seq = 253
11-11 23:30:46.677: D/Sensors(2118): Remain listener = Sending .. normal delay 200ms
11-11 23:30:46.677: I/Sensors(2118): sendDelay --- 200000000
11-11 23:30:46.677: D/SensorManager(2118): JNI - sendDelay
11-11 23:30:46.677: I/SensorManager(2118): Set normal delay = true
11-11 23:30:46.677: D/SensorManager(2118): unregisterListener:: disable all sensors for this listener,  name = K3DH Acceleration Sensor listener = android.view.WindowOrientationListener$SensorEventListenerImpl@418a4620
11-11 23:30:46.772: I/AudioHardwareYamaha(2088): AudioHardware::setParameters(keyValuePairs="screen_state=off")
11-11 23:30:46.872: W/AudioPolicyManager(2088): FM radio recording off
11-11 23:30:46.877: W/AudioPolicyManager(2088): FM radio recording off
11-11 23:30:46.877: W/AudioPolicyManager(2088): FM radio recording off
11-11 23:30:46.887: D/VolumePanel(2118): onVolumeChanged(streamType: 3, flags: 64)
11-11 23:30:46.887: D/AudioService(2118): getStreamVolume(3)
11-11 23:30:46.887: D/AudioService(2118): getStreamVolume(3)
11-11 23:30:46.922: W/Settings(2399): Setting lock_pattern_autolock has moved from android.provider.Settings.System to android.provider.Settings.Secure, returning read-only value.
11-11 23:30:46.952: D/weatherclock(22802): [MSC_Accu]>>> WS:55 [0:0] action : android.intent.action.SCREEN_OFF
11-11 23:30:46.952: D/weatherclock(22802): [MSC_Accu]>>> WWP:2326 [0:0] mHandler is null!!
11-11 23:30:46.952: D/weatherclock(22802): [MSC_Accu]>>> WWP:373 [0:0] refreshhandler is null!!
11-11 23:30:47.232: D/BatteryService(2118): update start
11-11 23:30:47.237: D/BatteryService(2118): level:18 scale:100 status:2 health:2 present:true voltage: 3754 temperature: 320 technology: Li-ion AC powered:false USB powered:true icon:17302822 invalid charger:0
11-11 23:30:47.252: D/KeyguardUpdateMonitor(2118): received broadcast android.intent.action.BATTERY_CHANGED
11-11 23:30:47.252: D/KeyguardUpdateMonitor(2118): handleBatteryUpdate
11-11 23:30:47.252: D/UiModeManager(2118): mLastBroadcastState = 0mCarModeEnabled = falseisDeskDockState(mDockState) = false
11-11 23:30:47.252: V/UiModeManager(2118): updateLocked: null action, mDockState=0, firing homeIntent: null
11-11 23:30:47.252: D/UiModeManager(2118): updateConfigurationLocked: mDockState=0; mCarMode=false; mNightMode=0; uiMode=17
11-11 23:30:47.257: D/STATUSBAR-BatteryController(2344): onReceive() - ACTION_BATTERY_CHANGED
11-11 23:30:47.257: D/STATUSBAR-BatteryController(2344): onReceive() - level:18
11-11 23:30:47.257: D/STATUSBAR-BatteryController(2344): onReceive() - plugged:2
11-11 23:30:47.257: D/STATUSBAR-BatteryController(2344): onReceive() - BATTERY_STATUS_CHARGING:
11-11 23:30:48.932: W/InputConnectionWrapper.ICC(2438): Timed out waiting on IInputContextCallback
11-11 23:30:50.956: W/InputConnectionWrapper.ICC(2438): Timed out waiting on IInputContextCallback
11-11 23:30:51.436: W/ActivityManager(2118): Activity destroy timeout for r 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T05:05:16.030

```
android.os.NetworkOnMainThreadException 
```

这个错误来自 HoneyComb（3.0 或更高版本）。如文档所述，您无法在其主线程上执行网络操作。要解决这个问题，您必须使用**handler**或**asynctask**。AFAIK 没有其他方法可以做到这一点。

您可以查看此内容以了解更多详细信息[为什么 ICS 会导致您的应用程序崩溃](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T05:11:26.587

LogCat 中的这一行：

```
11-11 23:30:16.797: E/AndroidRuntime(14075): Caused by: android.os.NetworkOnMainThreadException 
```

是你的错误所在。NetworkOnMainThread，意思是你在应用程序的唯一线程上调用网络请求，如果网络挂了，你的应用程序将停止响应操作系统，并崩溃。尝试使用异步任务，或使用线程。

```
new Thread(){
    public void run(){
        //do your networking here    
    }
}.start(); 
```

# oracle - 编写程序以强制执行约束 + 测试

> ID：13338266
> 
> 赞同：0
> 
> 时间：2012-11-12T04:09:13.650
> 
> 标签：oracle, plsql, triggers

我需要设置用户在一个月内输入 5 条记录后无法输入任何记录的约束。是否建议我为此编写触发器或过程？否则我可以设置约束的任何其他方式吗？

我没有编写触发器，而是选择为约束编写一个过程，但我如何检查该过程是否有效？

以下是程序：

```
CREATE OR REPLACE PROCEDURE InsertReadingCheck
        (
         newReadNo          In Int,
         newReadValue       In Int,
         newReaderID        In Int,
         newMeterID         In Int  
        )
AS 
  varRowCount               Int;

BEGIN

Select Count(*) INTO varRowCount
From Reading 
WHERE ReaderID = newReaderID
AND Trunc(ReadDate,'mm') = Trunc(Sysdate,'mm');     

IF (varRowCount >= 5) THEN
    BEGIN
        DBMS_OUTPUT.PUT_LINE('*************************************************');
        DBMS_OUTPUT.PUT_LINE('');
        DBMS_OUTPUT.PUT_LINE(' You attempting to enter more than 5 Records ');
        DBMS_OUTPUT.PUT_LINE('');
        DBMS_OUTPUT.PUT_LINE('*************************************************');
        ROLLBACK;
  RETURN;
    END;

ELSIF (varRowCount < 5) THEN
    BEGIN
        INSERT INTO Reading
            VALUES(seqReadNo.NextVal, sysdate, newReadValue,
            newReaderID, newMeterID);
  COMMIT;
END;
END IF;
END; 
```

谁能帮我看看

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:53:21.740

*这是您应该避免*触发的事情。尤其是 ROLLBACK 和 COMMIT。这似乎非常危险（我什至不确定这是否可能）。您可能有其他希望提交的事务回滚，反之亦然。

此外，通过将其放入触发器中，您*将*收到以下错误：

> ORA-04091: 表 XXXX 正在变异，触发器/函数可能看不到它

[有一些方法可以解决这个问题](http://asktom.oracle.com/pls/asktom/ASKTOM.download_file?p_file=6551198119097816936)，但它们太过分了，并且涉及到做一些时髦的事情来绕过 Oracle 坚持你做正确的事情。

这是使用存储过程将数据插入表中的绝佳机会。*您可以在执行插入之前*检查当前记录的数量，这意味着不需要执行回滚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:15:22.983

这是一种行为约束。这是一个见仁见智的问题，但我宁愿将这种业务逻辑保留在您的数据库之外。相反，我会跟踪谁在记录表中添加了哪些记录，以及在什么日期/时间。您可以有一个 SP 来获取此信息，但是您的代码应该根据返回的数据处理用户是否可以看到某些链接（或函数）。这是否意味着阻止用户访问他们插入记录的页面，或者给他们只读视图取决于您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T04:21:34.993

这取决于您的应用程序，如果您的应用程序中已经多次插入，那么触发器是更好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T10:34:38.060

解决此问题的一种声明性方法将遵守所有并发规则，即使用单独的表来跟踪每个用户每月的插入次数：

```
create table inserts_check (
  ReaderID integer not null,
  month date not null,
  number_of_inserts integer constraint max_number_of_inserts check (number_of_inserts <= 5),
  primary key (ReaderID, month)
); 
```

然后在表（或所有表）上创建一个触发器，为其插入上限为 5：

```
create trigger after insert on <table>
for each row
begin
  MERGE INTO inserts_check t
  USING (select 5 as ReaderID, trunc(sysdate, 'MM') as month, 1 as number_of_inserts from dual) s
  ON (t.ReaderID = s.ReaderID and t.month = s.month)
  WHEN MATCHED THEN UPDATE SET t.number_of_inserts = t.number_of_inserts + 1
  WHEN NOT MATCHED THEN INSERT (ReaderID, month, number_of_inserts)
  VALUES (s.ReaderID, s.month, s.number_of_inserts);
end; 
```

一旦用户进行了 5 次插入，约束`max_number_of_inserts`将失败。

# scheme - 以列表为参数的方案过程

> ID：13338273
> 
> 赞同：1
> 
> 时间：2012-11-12T04:10:53.993
> 
> 标签：scheme

我必须编写一个名为'proc3'的Scheme过程，它接受2个数字作为参数（x，y）并返回一个以列表作为参数的过程并返回一个与输入列表相同但添加了x的新列表作为第一个元素， y 作为第二个元素添加。

我到目前为止（定义proc3（lambda（xy）（lambda（list abc）（list xyc））））

解释器编译得很好，但是当我给出参数时，即 proc3(1 2)，它说：不能在定义之前引用标识符。这意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:16:20.450

问题中的代码不起作用。将其用作解决方案的模板，注意*列表*只是另一个参数（我称之为它`lst`），例如，您不必像以前那样编写`list`和枚举其元素：

```
(define proc3
  (lambda (x y)
    (lambda (lst)
      <add x y at head of lst>))) 
```

我会让你弄清楚如何添加`x`和`y`开头的细节`lst`。为了测试它，尝试这样的事情：

```
((proc3 1 2) '(3 4 5))
=> '(1 2 3 4 5) 
```

# ruby-on-rails - 有没有办法将时间存储在 Ruby on Rails 中？

> ID：13338275
> 
> 赞同：1
> 
> 时间：2012-11-12T04:11:03.470
> 
> 标签：ruby-on-rails, ruby

我认为 Ruby on Rails 中的 Time 对象存储时间，但是当我运行`Time.now.beginning_of_day`它时，它也会给我日期。我只是想捕捉时间而不是日期。有没有办法做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:16:13.923

是的，你必须做 Rails 日期格式 - strftime

请看这个扭结[http://www.wetware.co.nz/2009/07/rails-date-formats-strftime/](http://www.wetware.co.nz/2009/07/rails-date-formats-strftime/)

这个链接[http://apidock.com/ruby/DateTime/strftime](http://apidock.com/ruby/DateTime/strftime)

示例：//在您的情况下，应该这样做 Time.now.beginning_of_day.strftime("%I:%M")

```
With preceding zero (capital I)

Time.now.strftime("%I:%M") # => 05:21
Without preceding zero (lowercase L)

Time.now.strftime("%l:%M") # => 5:21 
```

希望它有所帮助。

`UPDATE`: // 很适合你对下面评论的提问`Why is Time storing date information? Shouldn't it just be time?`

您的问题很好，`vladr`如上所述（`I am sure that the group of people who create rails will think very similar to vladr mention above when they gonna design Time object in rail`），当您谈论时间时，它也与时区相关是无济于事的。在您的情况下，您想使用 Time.now.beginning_of_day 对吗？我现在在泰国，假设你在美国，美国的时间比泰国慢 12 小时，所以现在在泰国是周二上午 10:00，那么在美国应该是周一晚上 10:00，所以你使用Time.now.beginning_of_day （让使用 Time.now 以获得更清晰的画面），那么答案应该是什么？所以这就是为什么我认为创建 rails 的那群人使用 UTC+0 作为标准，在你的情况下我推荐使用 Time.zone.now，最近我发现了一些有趣的博客，请参阅[http://www .elabs.se/blog/36-working-with-time-zones-in-ruby-on-rails](http://www.elabs.se/blog/36-working-with-time-zones-in-ruby-on-rails)，希望对您有所帮助。如果您觉得缺少某些内容，请阅读本文的任何人，请随时编辑我的答案，非常感谢你们:)。

# sharepoint - 用于生产的 SharePoint Designer 和 BDC 问题

> ID：13338278
> 
> 赞同：0
> 
> 时间：2012-11-12T04:11:18.513
> 
> 标签：sharepoint, sharepoint-designer

我创建了一个 BDC 来连接 SharePoint Designer 中的外部数据库。一切都很好，并且在 SIT 中运行良好。

但是一旦我们去UAT，我在UAT服务器中导入了这个，但不知道如何更改BDC模型中SQL服务器的用户名和密码。

所以我请求我的客户在 UAT 服务器中安装 SharePoint Designer 并从头开始做所有事情。

我被告知他们不允许我在生产服务器中安装 SharePoint Designer。

如何更改 SQL 的用户名密码？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:28:00.713

我不确定您如何更改凭据，但在 SPD 中您只需指定要连接的站点的 URL。

您可以在开发环境中从 SPD 进行更改，只需指定实时站点的 URL。

希望这可以帮助。

# android - SMS BroadcastReceiver 用于android中的多条短信

> ID：13338279
> 
> 赞同：0
> 
> 时间：2012-11-12T04:11:24.553
> 
> 标签：android

我是 Android 开发的新手，我正在做一个接收多个 SMS 的 SMS 应用程序，即捕获到 ListView 中的通知 SMS 和另一个包含发件人位置的 SMS，用于在谷歌地图上显示发件人的位置。我已经管理第一部分，我如何使用 BroadcastReceiver 再次收听第二个 SMS...换句话说，当需要多个不同的 SMS 时如何收听传入的 SMS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-21T10:04:28.827

欢迎来到安卓开发！为了接收传入的 SMS，您需要使用 BroadcastReceiver 机制来监听传入的 SMS 的意图。但是，如果您想确保消息在进入系统数据库之前将其抛出您的应用程序，则必须在清单上为 BroadcastReceiver 的类提供高优先级。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:24:39.967

如果您正确实现了 BroadCastReceiver，您不必担心第二次，它将自动触发。您应该发布代码以获取更多信息。

# go - go语言中的递归函数

> ID：13338281
> 
> 赞同：12
> 
> 时间：2012-11-12T04:11:44.647
> 
> 标签：go

几天前我开始学习 Go 语言。当我试图开始编写一些有趣的代码时，我被一种奇怪的行为所困扰。

```
package main

import "fmt"

func recv(value int) {
    if value < 0 {
        return
    }

    fmt.Println(value)
    go recv(value-1)
}

func main() {
    recv(10)
} 
```

当我运行上面的代码时，只`10`打印出来。当我`go`在调用 to 之前删除to`recv`时，会打印出来。我相信我在这里滥用了 goroutine，但我不明白为什么它无法以这种方式启动 goroutine。`10``0`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-12T04:19:27.413

当 main 函数返回时，Go 不会等待任何仍然存在的 goroutine 完成，而是直接退出。

`recv`将在第一次“迭代”后返回 main 并且因为 main 没有更多事情要做，程序将终止。

解决此问题的一种方法是使用一个通道来指示所有工作已完成，如下所示：

```
package main

import "fmt"

func recv(value int, ch chan bool) {
    if value < 0 {
        ch <- true
        return
    }

    fmt.Println(value)
    go recv(value - 1, ch)
}

func main() {
    ch := make(chan bool)
    recv(10, ch)

    <-ch
} 
```

在这里，`recv`将在返回之前发送一个布尔值，并`main`在通道上等待该消息。

对于程序的逻辑，你使用什么类型或具体值并不重要。`bool`并且`true`只是一个简单的例子。如果您想提高效率，使用 a`chan struct{}`而不是 a`chan bool`将为您节省一个额外的字节，因为空结构不使用任何内存。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-13T11:21:12.357

A`sync.Waitgroup`是另一种解决方案，专门用于等待任意数量的 goroutine 运行它们的过程。

```
package main

import (
    "fmt"
    "sync"
)

func recv(value int, wg *sync.WaitGroup) {
    if value < 0 {
        return
    }

    fmt.Println(value)

    wg.Add(1) // Add 1 goroutine to the waitgroup.

    go func() {
        recv(value-1, wg)
        wg.Done() // This goroutine is finished.
    }()
}

func main() {
    var wg sync.WaitGroup
    recv(10, &wg)

    // Block until the waitgroup signals
    // all goroutines to be finished.
    wg.Wait()
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-12-23T17:33:37.770

我这样做了，也工作了。怎么会？

```
package main

import "fmt"

func recv(value int) {
    if value < 0 {
      return
    }

    fmt.Println(value)
    recv(value - 1)
}

func main() {
  recv(10)
} 
```

# mysql - 如何将多个值添加到日期范围

> ID：13338283
> 
> 赞同：0
> 
> 时间：2012-11-12T04:11:54.813
> 
> 标签：mysql, add, record

我有一个酒店价格系统，我需要每天根据其房间类型记录多个值（成本）。此外，每组成本取决于其代理。每个机构都有自己的价格率。例如，

> 机构 A 的房间类型 A=1000，类型 B=2000，类型 C=3000，从 2012 年 12 月 1 日 - 2012 年 12 月 20 日2012 年 12 月

未来房间类型可能会增加或减少。

> 机构 A 的房间类型 A=1000, 类型 B=2000, 类型 C=3000 从 2012 年 12 月 1 日 - 2012 年 12 月 20 日 机构 C 的房间类型 A=1200, 类型 B=2200, 类型 C=3200, 类型 D=3500,类型 E=3700 从 2012 年 12 月 1 日 - 2012 年 12 月 20 日

所以我有一个 HTML 表单：

```
<form method="post" action="submit.php">
Agency : 
<select name="agency">
<option value="a">Agency A</option>
<option value="b">Agency B</option>
<option value="c">Agency C</option>
</select>

From : <input type="text" name="date1" />
To : <input type="text" name="date2" />
<?
$sql_roomType="select * from roomtype_db order by id asc";
...
while($rec_roomType=mysql_fetch_array($result_roomType)){
$_roomTypeID=$rec_roomType['id'];
$_roomTypeCost=$rec_roomType['cost'];
$_roomTypeName=$rec_roomType['name'];
echo "$_roomTypeName : <input type=\text\" name=\"cost\" /><br />";//display stack of input
}
?>
<input type="submit" value="submit" />    
</form> 
```

**提交.php**

```
<?
$_agency=$_POST['agency'];
$_date1=$_POST['date1'];
$_date2=$_POST['date2'];
$_cost=$_POST['cost'];
$sql_addRate="insert into rate_db values('','$_agency','$_cost','$_date1','$_date2'";
$result_addRate=mysql_query($sql_addRate);    
?> 
```

现在的问题是我不确定根据这些有点mysql的方法将来是否会发生任何问题。例如，费率可以在未来日期更改。房间类型可以添加或删除。等等。所以请你们给我看一个使用规范化表向 mySQL 插入记录的工作脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T05:06:25.023

尽管您可以在一个表中实现它（列字段应该是`id`、`agency`、`room_type`、和） `rate`，但是对于一个很好的规范化结构，您应该有三个表，一个用于，另一个用于，最后一个用于。通过将s 移动到新表，可以更轻松地处理更多房间类型的添加。`start_date``end_date``agency``room_type``rates``room_type`

`agency`表可以有字段`id`等`name`。`room_type`将有`id`，`name`等等。并且`rates`将有字段`id`, `agency_id`, `room_type_id`, `rate`,`start_date`和`end_date`。

您可以`SELECT`使用两个内部连接来填写所有必填字段。问题是当您尝试`INSERT`进入这些表格时，您需要合并一个新的 room_type 和机构。在这种情况下，您将不得不进行三个单独的插入，但总体上仍然是一个更好的设计。

注意：我认为您在插入中缺少 room_type （id 或名称）。

# java - arrayList for(int data:) 检出迭代次数

> ID：13338287
> 
> 赞同：0
> 
> 时间：2012-11-12T04:12:07.783
> 
> 标签：java, for-loop, foreach

也许这是一个愚蠢的问题，但我仍然想知道

如果我使用

```
ArrayList<Integer> Data=new ArrayList<Integer>();
for(int data:Data)
 //some code here
 //print out the iteration times 
```

我想在
*不使用的情况下打印出迭代时间（不是执行时间）*

```
for int i;i<blahblahblah;i++) output i 
```

例如输出

```
output:
This is iteration times: 1   the data is : blahblahblah
This is iteration times: 2   the data is : blahblahblah
This is iteration times: 3   the data is : blahblahblah 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T04:13:34.250

一种方法是：在循环外定义一个计数器变量并增加计数器。

```
ArrayList<Integer> Data = new ArrayList<Integer>();
int iterCnt = 0;
for (int data : Data) {
    iterCnt++;
    System.out.println(iterCnt);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T04:21:45.807

好吧，这在美学上可能不正确

```
ArrayList<Integer> Data=new ArrayList<Integer>();
for(int data:Data)
{
   System.out.println( Data.indexOf(data)+1 );
   Data.remove(Data.indexOf(data));//to ensure the index is correct even if there are duplicates
} 
```

因为对于每个循环都按顺序访问元素，它会给你迭代次数 = (index + 1)

**编辑：** 如果您可以删除元素，则可以确保不会发生重复问题。否则传统的 for 循环最适合

# php - 使用 PHP Mysql 显示更多按钮

> ID：13338288
> 
> 赞同：-1
> 
> 时间：2012-11-12T04:12:15.457
> 
> 标签：php, mysql

我有一个“显示更多”按钮来显示数据库中最后的 5 个条目，初始显示 1 条记录，例如将初始变量更改为显示的 3 个结果，这是我的代码：$latest_entry_qry="SELECT * FROM `cityres` ORDER BY `id`DESC LIMIT 0 , 5";

```
 $latest_entry=mysql_query($latest_entry_qry); 
   ?>
    <div id="just-head"> <b>Recently Added:</b></div>
    <div id="just-added">
      <?
 $modu = 1;
   while($latest_entry_row=mysql_fetch_array($latest_entry))
 {
       if($modu%5 == 1)
        $clsText = "";
      else
        $clsText = " class='show_more' style='display:none' "; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T04:44:12.643

这是一个猜测，因为您的`while`循环不完整。我假设最后有一个 -

```
$modu++; 
```

因为您`$modu%5 == 1`每次都在`while`循环中检查。如果是这样，那么您可以将其更改为

```
if($modu%5 == 1) 
```

至

```
if($modu <=3) 
```

另外，请注意@Daedalus 关于不再使用`mysql_*`函数的评论

# ruby-on-rails - 从 Paypal 重定向时，Rails / Devise 会话被破坏

> ID：13338291
> 
> 赞同：2
> 
> 时间：2012-11-12T04:12:24.830
> 
> 标签：ruby-on-rails, devise, paypal

使用 Paypal 支付标准。当用户在 paypal.com 上付款后重定向回应用程序时，已登录的用户将退出。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:14:42.993

**如果您在没有提供正确的CSRF 参数**的情况下发布到 rails 应用程序，您的**会话将被删除**。这听起来像是正在发生的事情。解决此问题的一种方法是禁用贝宝发布操作的 CSRF 元保护
在 Rails3 中，您可以在控制器中为特定方法禁用 csrf 令牌：

* * *

**在您的控制器中：**
1.`protect_from_forgery :except => :create`
或
2.`skip_before_filter :verify_authenticity_token`
或
禁用除少数方法之外的所有内容：
3.`skip_before_filter :verify_authenticity_token, :except => [:update, :create]`

# macos - 在 Mac 上建立新的本地 Web 开发目录的最佳实践

> ID：13338294
> 
> 赞同：1
> 
> 时间：2012-11-12T04:13:45.533
> 
> 标签：macos, web

这困扰了我很长时间，我想就最佳实践达成共识。

*   假设您要开发一个网站。
*   假设您使用 Mac 作为开发平台。
*   假设您想在发布完成的文件之前在 Mac 上私下/本地开发新网页。

您是否在 /Library/WebServer/Documents 中创建开发文件夹，然后修改权限以便您可以在该目录中实际工作？换句话说：

```
 sudo mkdir -p /Library/WebServer/Documents/MyNewSite
    sudo chmod 775 /Library/WebServer/Documents/MyNewSite 
```

这对我来说似乎很尴尬。我希望新的本地 Web 文件有一些首选位置，不需要调整操作系统自然安装预设的权限。

如果有一些描述官方最佳实践的文档，我肯定会很感激指向它的指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T05:08:34.370

您通常在您的主目录中进行开发。默认配置应该允许您使用`~/Sites`，您可以在`http://localhost/~yourusername`

# magento - 如何在 magento 可下载产品中下订单没有账单和送货地址？

> ID：13338295
> 
> 赞同：1
> 
> 时间：2012-11-12T04:13:49.180
> 
> 标签：magento

在我的商店里，我有一个问题。现在，我只有**可下载的产品**。如何在 Magento 中没有**账单**和**送货**地址的情况下下订单。

**因为我们的许多客户对填写可下载产品的****帐单**和**送货**地址感到不安。帮我解决这个问题。

 **非常感谢**

# sql - 将日期范围转换为多个期间

> ID：13338296
> 
> 赞同：1
> 
> 时间：2012-11-12T04:13:57.650
> 
> 标签：sql, oracle, informatica-powercenter

我有如下表

```
ID StartDate    EndDate
1  15-MAR-2009  8-DEC-2011
2  14-JAN-2010  18-FEB-2013 
```

我需要这样的输出 -

```
ID  StartDate    EndDate
1   15-MAR-2009  31-DEC-2009
1   1-JAN-2010   31-DEC-2010
1   1-JAN-2011   8-Dec-2011
2   14-JAN-2010  31-DEC-2010
2   1-JAN-2011   31-DEC-2011
2   1-JAN-2012   31-DEC-2012
2   1-JAN-2013   18-FEB-2013 
```

我有 9i oracle 作为数据库，我更喜欢用 informatica 来做这件事，但似乎很难在那里找到解决方案，无法创建一个过程，所以需要 sql 查询。如果有人可以在 informatica 8.6 中提供，那就太好了。

编辑：-

```
Create table test_range
(Sr_No number,
start_date date,
end_date date)

create table yr_range
(years date); 
```

插入语句：-

```
insert into test_range values (1,'15-MAR-2009','8-DEC-2011');
insert into test_range values (2,'14-JAN-2010','18-FEB-2013');

insert into yr_range values ('31-Dec-2005');
insert into yr_range values ('31-Dec-2006');
insert into yr_range values ('31-Dec-2007');
insert into yr_range values ('31-Dec-2008');
insert into yr_range values ('31-Dec-2009');
insert into yr_range values ('31-Dec-2010');
insert into yr_range values ('31-Dec-2011');
insert into yr_range values ('31-Dec-2012');
insert into yr_range values ('31-Dec-2013'); 
```

正如其中一个答案所建议的那样，我创建了另一个表来获得所需的输出，是否可以仅使用一个表（即 test_range）？我想在最终确定之前探索所有选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:41:36.613

如果您有类似年份的维度，其中每一行代表一年，那么您将根据年份是否在该范围内加入它。这将为您提供所需的行数，然后为每一行有条件地输出开始/结束范围。这也应该处理您的范围小于一年的情况，因此不会被拆分。

y.Year 假定为整数。

请参阅此处的工作示例：[http ://sqlfiddle.com/#!4/d4589/13/11](http://sqlfiddle.com/#!4/d4589/13/11)

```
Create table test_range
(Sr_No number,
StartDate date,
EndDate date);

create table yr_range
(years number);

insert into test_range values (1,'15-MAR-2009','8-DEC-2011');
insert into test_range values (2,'14-JAN-2010','18-FEB-2013');

insert into yr_range values ('2005');
insert into yr_range values ('2006');
insert into yr_range values ('2007');
insert into yr_range values ('2008');
insert into yr_range values ('2009');
insert into yr_range values ('2010');
insert into yr_range values ('2011');
insert into yr_range values ('2012');
insert into yr_range values ('2013');

select
r.Sr_No,
CASE
  When to_char( r.StartDate, 'yyyy') = y.years Then r.StartDate
  Else to_date( y.years || '/01/01', 'yyyy/mm/dd')  
END as StartDate,
CASE
  When to_char( r.EndDate , 'yyyy') = y.years Then r.EndDate
  Else to_date( y.years || '/12/31', 'yyyy/mm/dd')  
END as EndDate 
from test_range r, yr_range y 
where
      to_char( r.StartDate, 'yyyy') <= y.years  
  AND to_char( r.EndDate, 'yyyy')  >= y.years; 
```

您还可以使用以下一些技术生成年份序列： [ORACLE SQL:Get all integers between two numbers](https://stackoverflow.com/questions/1453747/oracle-sqlget-all-integers-between-two-numbers)

# mysql - 从今天开始按顺序从数据库中提取事件

> ID：13338304
> 
> 赞同：2
> 
> 时间：2012-11-12T04:15:22.630
> 
> 标签：mysql, database, events, format

我正在为我的消防部门建立一个社区网站，他们想展示即将发生的事件，但我不想展示已经过去的事件，所以这就是我所拥有的（我正在使用 dreamweaver 顺便说一句）。

带表的数据库（表 = events1532）：

```
-id (int)
-event_start (datetime) YEAR-MO-DA HR:MI:SE
-event_end (datetime) YEAR-MO-DA HR:MI:SE
-event_location (text)
-event_desc (varchar) 
```

* * *

我需要从首页尚未通过的最早事件中获取事件开始日期，但我需要这种格式 = 03/05/2013 上午 12:00。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:25:23.673

您可以使用 CONCAT 和 DATE_FORMAT 函数来根据需要操作结果。

```
SELECT CONCAT(DATE_FORMAT(event_start, '%d/%m/%Y'), " at ", DATE_FORMAT(event_start, '%h:%m %p')), event_location, event_desc
FROM events1532
WHERE event_start > NOW()
ORDER BY event_start ASC
LIMIT 1; 
```

[MySQL 日期格式选项](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

NOW() 函数返回当前时间的日期时间。您可以通过简单地执行以下操作在 MySQL 查询中对此进行测试：

```
SELECT NOW(); 
```

其余的基本上是按升序对结果进行排序（意味着大于 NOW() 的最快日期将位于结果的顶部），并将结果限制为 1。您当然可以将其限制为更多，具体取决于如何许多你想退货。

# java - Android 视图需要 API 级别 14

> ID：13338305
> 
> 赞同：1
> 
> 时间：2012-11-12T04:15:35.997
> 
> 标签：java, android, eclipse

我收到旧的“视图需要 API 级别 14（当前最低为 8）：”错误。所以我读过其他类似的问题，这个错误最常见的答案是进入清单文件并执行我所做的“uses-sdk android:minSdkVersion="14" />”。

几天前我下载了eclipse android插件，我很确定我有冰淇淋三明治，所以它应该能够做一个minSdk = 14。还有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:17:06.967

有趣的是，在我重新启动 eclipse 并获得建议的目标 sdk 版本 + minSdkVersion 后，错误就消失了。不知道为什么在我重新启动 Eclipse 之前错误没有消失，并且目前对 Eclipse 不太满意......

# perl - perl DBI 内存泄漏

> ID：13338308
> 
> 赞同：8
> 
> 时间：2012-11-12T04:16:11.120
> 
> 标签：perl, memory-leaks, dbi

我在长时间运行的 perl 脚本中遇到了一些内存泄漏问题，其中 perl 占用的内存量继续增长。因此，我正在尝试使用[Devel::Leak](http://search.cpan.org/~ni-s/Devel-Leak-0.03/Leak.pm)来追踪泄漏。我发现每当我调用[DBI](https://metacpan.org/module/DBI)的`prepare`方法时，返回的标量值的数量`Devel::Leak`都会增加 1。下面是我整理的测试脚本，可以满足我的描述：

```
#!/usr/bin/perl
use strict;
use Devel::Leak;
use DBI;

START:
my $handle; # apparently this doesn't need to be anything at all
my $leaveCount = 0;
my $enterCount = Devel::Leak::NoteSV($handle);
print "ENTER: $enterCount SVs\n";
{
    # CONFIG VARIABLES
    my $platform = "mysql";
    my $database = "db";
    my $host = "localhost";
    my $port = "3306";
    my $user = "user";
    my $pw = "pass";

    #DATA SOURCE NAME
    my $dsn = "dbi:mysql:$database:$host:3306";

    # PERL DBI CONNECT
    my $dbh = DBI->connect($dsn, $user, $pw);
    $dbh->prepare("SELECT * FROM table"); # The script seems to gain one SV without this
                                          # line here, but since this is my issue in my
                                          # main script I decided to leave it in
    # undef $dbh; I tried undef-ing this, but it made no difference
}
$leaveCount = Devel::Leak::CheckSV($handle);
print "\nLEAVE: $leaveCount SVs\n";
sleep(1);
goto START; 
```

那么我在这里做错了什么，或者这是 DBI 模块中的内存泄漏？另外，我知道每次在循环中添加一个 SV 并不是什么大问题，而且我很可能在其他地方有更大的内存泄漏，这导致 perl 占用了服务器的大量内存。但是，如果可以的话，我仍然想解决这个问题。编码员的好奇心:)

**更新：**

第一次似乎增加了大约 3,000 个 SV，然后每次增加 1 个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T04:54:48.070

有一个 DBI::dr 实例（一个有福的哈希）存在于 $DBI::lasth。查看 ChildHandles 键。

```
#!/usr/bin/perl

use strict;
use warnings;
use Devel::Leak;
use Data::Dumper;
use Symbol::Table;
use DBI;

START:
{
    my $handle;
    my $enterCount = Devel::Leak::NoteSV($handle);

    DB:
    {
        my $platform = "mysql";
        my $database = "db";
        my $host     = "localhost";
        my $port     = "3306";
        my $user     = "user";
        my $pw       = "pass";

        my $dsn = "dbi:mysql:$database:$host:3306";

        my $dbh = DBI->connect( $dsn, $user, $pw );

        $dbh->prepare("SELECT * FROM table");

        $dbh->disconnect();
    }

    my $st = Symbol::Table->New( 'SCALAR', 'DBI' );

    for my $subpkg ( keys %{ $st } ) {

        my $val;
        {
            my $var = "DBI::${subpkg}";
            no strict 'refs';
            $val = ${$var};
        }

        print "scalar '$subpkg' => '$val'\n";
    }

    print Dumper( $DBI::lasth );

    $DBI::lasth->{ChildHandles} = []; # <-- reset leaking data structure

    my $leaveCount = Devel::Leak::CheckSV($handle);

    print "\nCOUNT: $enterCount to $leaveCount SVs\n";

    sleep(1);

    redo START;
} 
```

# graph-theory - 如果我搞砸了 Floyd-Warshall 算法中的循环顺序会怎样？

> ID：13338312
> 
> 赞同：1
> 
> 时间：2012-11-12T04:16:48.953
> 
> 标签：graph-theory, floyd-warshall

对于 Floyd-Warshall 算法，循环的顺序是 k、i 和 j。如果我把循环的顺序搞砸了，不小心把它写成 i、k 和 j，会发生什么？该程序以何种方式不起作用？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:43:04.910

没有什么。如果您在运行时没有篡改该 3 级迭代，它会为您提供结果。Floyd-Warshall 总是返回最短的路径。

# gcc - gcc arm - 确保在使用内联 asm 语句内联函数时保留 args

> ID：13338314
> 
> 赞同：3
> 
> 时间：2012-11-12T04:17:38.577
> 
> 标签：gcc, arm, inline

我有一系列最终通过 SVC 调用实现的功能。例如：

```
void func(int arg) {
    asm volatile ("svc #123");
} 
```

正如您可能想象的那样，SVC 对可能在寄存器中的“arg”进行操作。如果我明确地在定义中添加一个“noinline”属性，一切都会如你所愿。

但是，如果函数在更高的优化级别内联，将“arg”加载到寄存器中的代码将被省略——因为显然没有对“arg”的引用。

我尝试在 'arg' 本身的声明中添加一个 'used' 属性——但 gcc 在这种情况下显然会产生警告。

我还尝试添加“虚拟”asm 语句，例如

```
asm ("" : "=r"(arg)); 
```

但这似乎并不普遍。（也许我也需要在这里说 volatile ？？？）

无论如何，对于一个其主体基本上由一个 asm 语句组成的例程有一个显式的函数调用似乎是不幸的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T19:18:25.827

相关配方在 GCC 手册中，在[带有 C 表达式操作数的汇编器指令](http://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html)部分中，它`sysint`与`svc`指令的作用相同。想法是用指定的寄存器定义一个局部寄存器变量，然后使用扩展`asm`语法将输入和输出添加到内联汇编块。

我试图编译以下代码：

```
#include <stdint.h>

__attribute__((always_inline))
uint32_t func(uint32_t arg) {
    register uint32_t r0 asm("r0") = arg;
    register uint32_t result asm("r0");
    asm volatile ("svc #123":"=r" (result) : "0" (r0));
    return result;
}

uint32_t foo(void) {
    return func(2);
} 
```

这是已编译（带有 -O2 标志）目标文件的反汇编：

```
00000000 <func>:
   0:   ef00007b        svc     0x0000007b
   4:   e12fff1e        bx      lr

00000008 <foo>:
   8:   e3a00002        mov     r0, #2
   c:   ef00007b        svc     0x0000007b
  10:   e12fff1e        bx      lr 
```

`func``r0`被内联扩展并且参数被正确地放入。我认为这`volatile`是必要的，因为如果您不使用服务调用的返回值，那么编译器可能会认为汇编代码是不必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:41:38.350

您应该有一个 asm 块，编译器仍然可以自由地单独处理两个 asm 块，除非另有说明。这意味着放在第二个 asm 块上的要求不会对第一个产生任何影响。

由于调用约定，您假设寄存器将位于正确的位置。

这样的事情呢？（没有测试）

```
void func(int arg) {
    asm volatile (
        "mov r0, %[code]\n\t"
        "svc #123"
        :
        : [code]"r" (code)
    );
} 
```

有关详细信息，请参阅[ARM GCC Inline Assembler Cookbook](http://www.ethernut.de/en/documents/arm-inline-asm.html)。

# php - 比较 XML 元素相等性的 PHP 函数

> ID：13338315
> 
> 赞同：0
> 
> 时间：2012-11-12T04:17:57.673
> 
> 标签：php, xml

我有一个 XML 文件，它应该是我的手机联系人备份，我正在尝试创建一个 php 文件来仅检索分配了电话号码的联系人。该文件包含来自不同应用程序的联系人。

XML 具有以下元素：

```
<Contact>
    <Id>5238</Id>
    <GivenName>friend1</GivenName>
    <FullName>friendA</FullName>
    <CreateTime>0001-01-01T00:00:00+00:00</CreateTime>
    <ModifyTime>0001-01-01T00:00:00+00:00</ModifyTime>
    <Starred>false</Starred>
    <AccountName>SIM</AccountName>
    <AccountType>com.anddroid.contacts.sim</AccountType>
  </Contact>

<PhoneNumbers>
    <Id>53</Id>
    <ContactId>1380</ContactId>
    <Name>2</Name>
    <Value>07123456789</Value>
    <Primary>2</Primary>
  </PhoneNumbers>

<Contact>
    <Id>328</Id>
    <FamilyName>tee</FamilyName>
    <GivenName>friend2</GivenName>
    <FullName>friend2 tee</FullName>
    <CreateTime>0001-01-01T00:00:00+00:00</CreateTime>
    <ModifyTime>0001-01-01T00:00:00+00:00</ModifyTime>
    <Picture>18948</Picture>
    <Starred>false</Starred>
    <AccountName>xxxxxxx@hotmail.com</AccountName>
    <AccountType>com.htc.socialnetwork.facebook</AccountType>
  </Contact> 
```

我想制作一个 php 文件，该文件将从联系人中检索 FullName，并从联系人/Id 与 PhoneNumbers/ContactId 匹配的 PhoneNumbers 中检索值。

我创建了这段代码：

```
<?php
$xml = simplexml_load_file("Contact.xml");

$i=0;
$k=0;
foreach ($xml->Contact as $contact) {
    if ($contact->AccountName == "SIM"){

   echo "Contact:   " . $k . "<br />   "; echo $contact->nodeValue[$k] . "<br />   " . $contact->FullName . "<br />   ";
   $k++;
   }
   }
   foreach ($xml->PhoneNumbers as $number) {

    echo "Contact:   " . $i . "<br />   "; echo  $number->Value . "<br />   ";
   $i++;
    }

?> 
```

它输出 53 个联系人和 173 个号码。如果我不输入，`if ($contact->AccountName == "SIM")`它会输出相同的数字，但会输出 700++ 个联系人。我只是想要一些帮助来生成一个函数或一些东西来只输出我已经有他们的电话号码的联系人。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:48:25.653

我建议使用 XSL 样式表：

```
<xsl:stylesheet version="1.0"
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >

<xsl:template match="/">
  <ul><xsl:apply-templates/></ul>
</xsl:template>

<xsl:template match="Contact"> 
  <!-- select phonenumbers with the matching ContactId -->
  <xsl:variable name="numbers" select="//PhoneNumbers[ContactId=current()/Id]"/>

  <!-- when any matching  PhoneNumber has been found, continue -->
  <xsl:if test="count($numbers) &gt; 0">
  <li>
    <xsl:value-of select="FullName"/>
    <ul>
      <!-- call a named template with the matching PhoneNumbers as param -->
      <xsl:call-template name="printNumbers">
        <xsl:with-param name="numbers" select="$numbers" />
      </xsl:call-template>
    </ul>
  </li>
  </xsl:if>
</xsl:template>

<xsl:template name="printNumbers">
  <xsl:param name="numbers" />
  <!-- loop through PhoneNumbers and print the Value -->
  <xsl:for-each select="$numbers">
    <li><xsl:value-of select="Value" /></li>
  </xsl:for-each>
</xsl:template>

<xsl:template match="PhoneNumbers"/>
</xsl:stylesheet> 
```

**如何使用样式表：**

```
<?php

$doc = new DOMDocument();
$xsl = new XSLTProcessor();

$doc->load('path/to/stylesheet.xsl');
$xsl->importStyleSheet($doc);

$doc->load('Contact.xml');
echo $xsl->transformToXML($doc);

?> 
```

# android - 以编程方式创建相对布局

> ID：13338317
> 
> 赞同：1
> 
> 时间：2012-11-12T04:18:32.280
> 
> 标签：android, android-layout, android-relativelayout, dynamic-data

我是android新手，我正在尝试以编程方式创建RelativeLayouts（至少我认为如果我的值是动态的，这是唯一可行的方法）。本质上，我构建了一个 Web 服务来返回一个值列表，并且我想显示这些值。它可以是一个值，也可以是 500。

在我的 layout.xml 中，我能够构建一个相对接近我想要的相对布局，但我只能填充一次。下面是我的 XML：

注意：这是整个 XML，但有问题的节点是 RelativeLayout。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000"
    android:orientation="vertical" 
    android:id="@+id/linear">

    <Spinner
        android:id="@+id/band"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#000000"
        android:dropDownSelector="#000000"
        android:textColor="#F0F0F0" />

    <Spinner
        android:id="@+id/yearSpinner"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textColor="#F0F0F0" />

      <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="?android:attr/listPreferredItemHeight"
        android:padding="6dip"
        android:id="@+id/showRelativeLayout">

        <ImageView
            android:id="@+id/icon"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_alignParentBottom="true"
            android:layout_alignParentTop="true"
            android:layout_marginRight="6dip"
            android:src="@drawable/ic_launcher" />

        <TextView
            android:id="@+id/secondLine"
            android:layout_width="fill_parent"
            android:layout_height="26dip"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_toRightOf="@id/icon"
            android:ellipsize="marquee"
            android:singleLine="true"
            android:text="Simple application that shows how to use RelativeLayout" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_above="@id/secondLine"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_alignWithParentIfMissing="true"
            android:layout_toRightOf="@id/icon"
            android:gravity="center_vertical"
            android:text="My Application"
            android:id="@+id/thirdLine" />
    </RelativeLayout>

</LinearLayout> 
```

所以我然后尝试在我的活动中构建相同的内容，以便我可以遍历我的网络服务结果。下面是被多次调用的方法（对于返回的每个 json 数组）。不幸的是，行为是只有一个 relativeLayout 并且它试图占据屏幕的其余部分（大约 90% 为一行）。我绝对没有理解一些基本的东西。

```
private void processRelativeLayout(int count) {
    RelativeLayout rl = new RelativeLayout(this);
    RelativeLayout.LayoutParams lay = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    rl.setLayoutParams(lay);

    //Set the Image
    //TODO:  pull from webservice to get the artist image
    RelativeLayout.LayoutParams imlay = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.MATCH_PARENT);
    imlay.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
    imlay.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    imlay.setMargins(0, 0, 6, 0);

    ImageView iv = new ImageView(this);
    iv.setImageDrawable(getResources().getDrawable(R.drawable.ic_launcher));
    iv.setId(1+count);
    iv.setLayoutParams(imlay);
    rl.addView(iv);

    RelativeLayout.LayoutParams tv1lay = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, 26);
    tv1lay.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
    tv1lay.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
    tv1lay.addRule(RelativeLayout.RIGHT_OF, 1+count);
    TextView tv = new TextView(this);
    tv.setSingleLine();
    tv.setEllipsize(TruncateAt.MARQUEE);
    tv.setTextColor(Color.YELLOW);
    tv.setText("Simple application that shows how to use RelativeLayout");
    tv.setId(2+count);
    tv.setLayoutParams(tv1lay);
    rl.addView(tv);

    RelativeLayout.LayoutParams tv2lay = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    tv2lay.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    tv2lay.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
    tv2lay.addRule(RelativeLayout.ABOVE, 2+count);
    tv2lay.addRule(RelativeLayout.RIGHT_OF,1+count);
    TextView tv2 = new TextView(this);
    tv2.setTextColor(Color.YELLOW);
    tv2.setGravity(Gravity.CENTER_VERTICAL);
    tv2.setText("My Application");
    tv2.setId(count+3);
    tv2.setLayoutParams(tv2lay);
    rl.addView(tv2);

    rootLinear.addView(rl);

    //add the relative layoutll.addView(tv, lay);
} 
```

我还附上了我的模拟器的屏幕截图，以向您展示输出。我本来希望看到结果 5 次（因为我调用了 processRelativeLayout 5 次）。

为长篇道歉，但我想提供足够的信息。

更新：我试图发布一张图片，但网站说我不够老练 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:47:11.737

猜测一下，`RelativeLayout`无法处理`WRAP_CONTENT`您尝试为其提供的高度设置，因为它具有与其底部对齐的子元素。正因为如此，它改为匹配它的父母身高，因此它几乎占据了整个屏幕。尝试在布局参数中指定一个明确的高度`rl`，或者重组它的孩子以避免任何`ALIGN_PARENT_BOTTOM`使用——据我所见，它应该很简单，可以设置`imlay`为只对齐到顶部（使用它自己的默认高度或明确指定你的一个own)，并`tv1lay`使用`ALIGN_BOTTOM`id 的规则`iv`。

# javascript - javascript异步问题

> ID：13338319
> 
> 赞同：2
> 
> 时间：2012-11-12T04:18:53.207
> 
> 标签：javascript, jquery

这是一个新手 JavaScript 问题，但我不太确定如何在谷歌上寻求帮助，因为我不确定如何以简单的方式描述问题。

我有一个大的、有些复杂的 JSON，我需要对其进行操作，以便我可以通过一种方式重塑 JSON，从而获得仅包含国家、城市和销售的列表。

JSON 本身对我来说不是问题，这是我收到它后想要做的事情。基本上，我想从收到的大型 JSON 中创建 3 个单独的对象/数组，并让这 3 个单独的对象/数组可以在`$.ajax`调用之外使用。是的，我认为我可以在`$.ajax`成功回调中完成所有这些工作，但我宁愿在其他地方完成所有 JSON 处理。我的伪 JavaScript 看起来像这样：

```
var model = {
  countries: [],
  cities: [],
  sales: [],
  set: function(data) {
    //manipulate data here so that model.countries, model.cities, model.sales are populated
  }      
};

$.ajax({
  url: 'example.com/sample.json',
  success: function(data) {
    model.set(data);    //is this the right way to do this?
  }
});

$('#countries').html(model.countries);
$('#cities').html(model.cities);
$('#sales').html(model.sales);​ 
```

但是因为 JavaScript 是异步执行的，所以最后 3 行总是空白，因为 JSON 还没有收到。

所以我想我的问题是，如何将收到的 JSON 的结果绑定到`$.ajax`范围之外的变量，以便我可以在页面上的任何位置使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:25:06.963

简单的解决方案是这样的：

```
$.ajax({
  url: 'example.com/sample.json',
  success: function(data) {
    model.set(data);
    $('#countries').html(model.countries);
    $('#cities').html(model.cities);
    $('#sales').html(model.sales);​
  }
}); 
```

如果你想要更框架化的东西，那么你可以看看[Backbone.js 之](http://backbonejs.org/)类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T04:26:47.720

在 AJAX 成功回调中填充您的 HTML（即更新您的视图）。IE

```
function updateView() {
  $('#countries').html(model.countries);
  $('#cities').html(model.cities);
  $('#sales').html(model.sales);​
}

$.ajax({
  url: 'example.com/sample.json',
  success: function(data) {
    model.set(data);    //is this the right way to do this?
    updateView();
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T04:22:04.760

只需将这 3 行放在`success`回调中（您也可以将其分成一个函数）并跳过`model`填充。

有一些框架允许您将 DOM 元素绑定到 JS 对象及其数据，但在这种情况下，这可能是矫枉过正。

# android - 如何在android中访问Serializable对象

> ID：13338321
> 
> 赞同：0
> 
> 时间：2012-11-12T04:19:11.770
> 
> 标签：android, android-intent

我正在使用 Serializable 接口将用户定义的数据从一个活动发送到另一个活动。

这是我的代码：

```
TasksheetData[] alltasks = new TasksheetData();
Intent in=new Intent(TaskSheetList.this, TaskDetails.class);
in.putExtra("TaskSheetData", alltasks); 
```

在其他活动中，我正在访问此对象，例如：

```
TasksheetData tData =  (TasksheetData) getIntent().getSerializableExtra("TaskSheetData"); 
```

这是我的 TasksheetData 类

```
@SuppressWarnings("serial")
public class TasksheetData implements Serializable {

    private int TaskID;

    private int AttendantID;
    private String  AttendentName;

    private String  ReservationID;
    private String  ResStatusCode;

    private int InspectionStartedById;
    private String  HKStatusCode;

    private int FOStatusID;
    private String  FOStatusCode;

    private int JobStatusID;
    private String  JobStatusCode;

    private int LocationID;
    private String  LocationName;

    private int RoomTypeID;
    private String  RoomType;

    private int SectionID;

    private String  GuestID;
    private String  GuestName;
    private String  VIPCode;
    private String  Pax;
    private String  ArrivalTime;
    private String  CheckInTime;
    private String  CheckOutTime;

    private String  QueueSince;

    private Trace[] arrTraces;
    private String  Specials;

    private String  ReservationComments;
    private String SupervisorComments;

    private String  HKNotes;
    private String  TaskSheetName;

    private int StandardCleaningTime;

    private int AttendantPriority;
    private String   SupervisorPriority;

    private String  TaskStartTime;
    private String  TaskEndTime;

    private String  TasksheetInstruction;

    private String localJobStatusCode;
    private Boolean isSynch;
    private String   credit;
    private String   RemainingTimeSec;

    private String   TaskTypeId;
    private String   AttendantCLTypeId, SupervisorCLTypeId;
    private String TritonLocationID;

    private String   PendingTritonJob;
    private Boolean         isDiscrepancy, InspectionStatus, IsTaskInspected;

    public int getTaskID() {
        return TaskID;
    }
    public void setTaskID(int taskID) {
        TaskID = taskID;
    }
    public int getAttendantID() {
        return AttendantID;
    }
    public void setAttendantID(int attendantID) {
        AttendantID = attendantID;
    }
    public String getAttendentName() {
        return AttendentName;
    }
    public void setAttendentName(String attendentName) {
        AttendentName = attendentName;
    }
    public String getReservationID() {
        return ReservationID;
    }
    public void setReservationID(String reservationID) {
        ReservationID = reservationID;
    }
    public String getResStatusCode() {
        return ResStatusCode;
    }
    public void setResStatusCode(String resStatusCode) {
        ResStatusCode = resStatusCode;
    }
    public int getInspectionStartedById() {
        return InspectionStartedById;
    }
    public void setInspectionStartedById(int inspectionStartedById) {
        InspectionStartedById = inspectionStartedById;
    }
    public String getHKStatusCode() {
        return HKStatusCode;
    }
    public void setHKStatusCode(String hKStatusCode) {
        HKStatusCode = hKStatusCode;
    }
    public int getFOStatusID() {
        return FOStatusID;
    }
    public void setFOStatusID(int fOStatusID) {
        FOStatusID = fOStatusID;
    }
    public String getFOStatusCode() {
        return FOStatusCode;
    }
    public void setFOStatusCode(String fOStatusCode) {
        FOStatusCode = fOStatusCode;
    }
    public int getJobStatusID() {
        return JobStatusID;
    }
    public void setJobStatusID(int jobStatusID) {
        JobStatusID = jobStatusID;
    }
    public String getJobStatusCode() {
        return JobStatusCode;
    }
    public void setJobStatusCode(String jobStatusCode) {
        JobStatusCode = jobStatusCode;
    }
    public int getLocationID() {
        return LocationID;
    }
    public void setLocationID(int locationID) {
        LocationID = locationID;
    }
    public String getLocationName() {
        return LocationName;
    }
    public void setLocationName(String locationName) {
        LocationName = locationName;
    }
    public int getRoomTypeID() {
        return RoomTypeID;
    }
    public void setRoomTypeID(int roomTypeID) {
        RoomTypeID = roomTypeID;
    }
    public String getRoomType() {
        return RoomType;
    }
    public void setRoomType(String roomType) {
        RoomType = roomType;
    }
    public int getSectionID() {
        return SectionID;
    }
    public void setSectionID(int sectionID) {
        SectionID = sectionID;
    }
    public String getGuestID() {
        return GuestID;
    }
    public void setGuestID(String guestID) {
        GuestID = guestID;
    }
    public String getGuestName() {
        return GuestName;
    }
    public void setGuestName(String guestName) {
        GuestName = guestName;
    }
    public String getVIPCode() {
        return VIPCode;
    }
    public void setVIPCode(String vIPCode) {
        VIPCode = vIPCode;
    }
    public String getPax() {
        return Pax;
    }
    public void setPax(String pax) {
        Pax = pax;
    }
    public String getArrivalTime() {
        return ArrivalTime;
    }
    public void setArrivalTime(String arrivalTime) {
        ArrivalTime = arrivalTime;
    }
    public String getCheckInTime() {
        return CheckInTime;
    }
    public void setCheckInTime(String checkInTime) {
        CheckInTime = checkInTime;
    }
    public String getCheckOutTime() {
        return CheckOutTime;
    }
    public void setCheckOutTime(String checkOutTime) {
        CheckOutTime = checkOutTime;
    }
    public String getQueueSince() {
        return QueueSince;
    }
    public void setQueueSince(String queueSince) {
        QueueSince = queueSince;
    }
    public Trace[] getArrTraces() {
        return arrTraces;
    }
    public void setArrTraces(Trace[] arrTraces) {
        this.arrTraces = arrTraces;
    }
    public String getSpecials() {
        return Specials;
    }
    public void setSpecials(String specials) {
        Specials = specials;
    }
    public String getReservationComments() {
        return ReservationComments;
    }
    public void setReservationComments(String reservationComments) {
        ReservationComments = reservationComments;
    }
    public String getSupervisorComments() {
        return SupervisorComments;
    }
    public void setSupervisorComments(String supervisorComments) {
        SupervisorComments = supervisorComments;
    }
    public String getHKNotes() {
        return HKNotes;
    }
    public void setHKNotes(String hKNotes) {
        HKNotes = hKNotes;
    }
    public String getTaskSheetName() {
        return TaskSheetName;
    }
    public void setTaskSheetName(String taskSheetName) {
        TaskSheetName = taskSheetName;
    }
    public int getStandardCleaningTime() {
        return StandardCleaningTime;
    }
    public void setStandardCleaningTime(int standardCleaningTime) {
        StandardCleaningTime = standardCleaningTime;
    }
    public int getAttendantPriority() {
        return AttendantPriority;
    }
    public void setAttendantPriority(int attendantPriority) {
        AttendantPriority = attendantPriority;
    }
    public String getSupervisorPriority() {
        return SupervisorPriority;
    }
    public void setSupervisorPriority(String supervisorPriority) {
        SupervisorPriority = supervisorPriority;
    }
    public String getTaskStartTime() {
        return TaskStartTime;
    }
    public void setTaskStartTime(String taskStartTime) {
        TaskStartTime = taskStartTime;
    }
    public String getTaskEndTime() {
        return TaskEndTime;
    }
    public void setTaskEndTime(String taskEndTime) {
        TaskEndTime = taskEndTime;
    }
    public String getTasksheetInstruction() {
        return TasksheetInstruction;
    }
    public void setTasksheetInstruction(String tasksheetInstruction) {
        TasksheetInstruction = tasksheetInstruction;
    }
    public String getLocalJobStatusCode() {
        return localJobStatusCode;
    }
    public void setLocalJobStatusCode(String localJobStatusCode) {
        this.localJobStatusCode = localJobStatusCode;
    }
    public Boolean getIsSynch() {
        return isSynch;
    }
    public void setIsSynch(Boolean isSynch) {
        this.isSynch = isSynch;
    }
    public String getCredit() {
        return credit;
    }
    public void setCredit(String credit) {
        this.credit = credit;
    }
    public String getRemainingTimeSec() {
        return RemainingTimeSec;
    }
    public void setRemainingTimeSec(String remainingTimeSec) {
        RemainingTimeSec = remainingTimeSec;
    }
    public String getTaskTypeId() {
        return TaskTypeId;
    }
    public void setTaskTypeId(String taskTypeId) {
        TaskTypeId = taskTypeId;
    }
    public String getAttendantCLTypeId() {
        return AttendantCLTypeId;
    }
    public void setAttendantCLTypeId(String attendantCLTypeId) {
        AttendantCLTypeId = attendantCLTypeId;
    }
    public String getSupervisorCLTypeId() {
        return SupervisorCLTypeId;
    }
    public void setSupervisorCLTypeId(String supervisorCLTypeId) {
        SupervisorCLTypeId = supervisorCLTypeId;
    }
    public String getTritonLocationID() {
        return TritonLocationID;
    }
    public void setTritonLocationID(String tritonLocationID) {
        TritonLocationID = tritonLocationID;
    }
    public String getPendingTritonJob() {
        return PendingTritonJob;
    }
    public void setPendingTritonJob(String pendingTritonJob) {
        PendingTritonJob = pendingTritonJob;
    }
    public Boolean getIsDiscrepancy() {
        return isDiscrepancy;
    }
    public void setIsDiscrepancy(Boolean isDiscrepancy) {
        this.isDiscrepancy = isDiscrepancy;
    }
    public Boolean getInspectionStatus() {
        return InspectionStatus;
    }
    public void setInspectionStatus(Boolean inspectionStatus) {
        InspectionStatus = inspectionStatus;
    }
    public Boolean getIsTaskInspected() {
        return IsTaskInspected;
    }
    public void setIsTaskInspected(Boolean isTaskInspected) {
        IsTaskInspected = isTaskInspected;
    }
} 
```

但是当我尝试将它转换为我的数据对象时，它会给出类转换异常。

请帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:26:16.070

您正在放入一个数组并期望输出一个对象。另外，使用`ArrayList`which is `serializable`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:24:13.793

不确定您的`TasksheetData`课程是什么，但也许您应该改用您`alltasks`的课程`ParcelableArray`。

签出[这个](http://developer.android.com/reference/android/content/Intent.html#getParcelableArrayExtra%28java.lang.String%29)

您的 TasksheetData 数组绝对不是一个 Serializable 类的实例...

# vb.net - 在 vb.net 的 webbrowser 控件中重新加载文档

> ID：13338326
> 
> 赞同：0
> 
> 时间：2012-11-12T04:19:33.877
> 
> 标签：vb.net, winforms, navigation, webbrowser-control

我有一个带有多个 webbrowser 控件的 vb.net 表单。在一个 webbrowser4 上，我需要使用这个宏来午餐，它每分钟使用一个计时器从报告中提取一些数据 Webbrowser4.navigate("c:\macr.r2w")

webbrowser.refresh 没有重新加载宏，dispose 时出现错误，我无法打开多个 IE 实例（内存过载），我尝试先导航到`about:blank`webbrowser，但没有帮助。如何每分钟在同一个网络浏览器上重新加载同一个宏？

我感谢您的帮助。

* * *

我试过这个

```
 WebBrowser4.Navigate("C:\marco.r2w" + "?refreshToken=" + Guid.NewGuid().ToString()) 
```

但它再次打开了我的宏的许多瞬间

# c++ - std::polar 线程安全吗？

> ID：13338329
> 
> 赞同：3
> 
> 时间：2012-11-12T04:19:49.430
> 
> 标签：c++, pragma

函数`std::polar()`线程安全吗？

我想调用在`#pragma`内部使用它的 for 指令。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T04:41:01.637

是的，`std::polar`是线程安全的（对于线程安全的某些定义）。见`[res.on.data.races]/3`：

> C++ 标准库函数不得直接或间接修改可由当前线程以外的线程访问的对象 (1.10)，除非通过函数的非 const 参数直接或间接访问对象，包括 this。

由于`std::polar`只接受 const 参数，因此它不会修改调用它的线程之外的任何对象。

# c# - Response.Filter 随机中断编码

> ID：13338332
> 
> 赞同：1
> 
> 时间：2012-11-12T04:20:11.503
> 
> 标签：c#, .net, iis, filtering, httpresponse

我有一个使用 WCF 的简单 html 和 javascript 客户端应用程序（不是 asp.net 应用程序）。我需要更改静态页面中的一些变量，所以我认为 Response.Filter 是最适合我的选择。我写了几行代码，它工作了，但是在我的浏览器上刷新了几次之后，我注意到有一个错误。某些东西破坏了页面的编码。我究竟做错了什么？

Global.asax：（我也尝试了其他事件，但没有任何变化）

```
private void Application_PostReleaseRequestState(object sender, System.EventArgs e)
{
    if (Request.CurrentExecutionFilePathExtension.EndsWith(".html") || Request.CurrentExecutionFilePathExtension.EndsWith(".js"))
    {
        Response.Filter = new ContentFilter(Response.Filter);
    }
} 
```

内容过滤器.cs

```
public class ContentFilter : MemoryStream
{
    private Stream outputStream = null;

    private Regex version = new Regex("%version%", RegexOptions.Compiled | RegexOptions.Multiline);

    public ContentFilter(Stream output)
    {
        outputStream = output;
    }

    public override void Write(byte[] buffer, int offset, int count)
    {
        // Convert the content in buffer to a string
        string contentInBuffer = UTF8Encoding.UTF8.GetString(buffer);

        contentInBuffer = version.Replace(contentInBuffer, "2");

        outputStream.Write(UTF8Encoding.UTF8.GetBytes(contentInBuffer), offset, UTF8Encoding.UTF8.GetByteCount(contentInBuffer));
    }
} 
```

![选择失败](../Images/5ffd398c58856fcf4252549dc711208d.png)

注意：我在 Windows 8 上使用 IIS 7.5。

当我在 Write 方法中调试 ContentFilter.cs 作为 contentInBuffer 变量的值时，我看到了这些。我在 IIS 设置中默认有 GZIP 压缩，也许就是这样。

`�\b\0\0\0\0\0\0�Z�n�����w3\b(�\"�VD�I���8A���a���r��� ��,m�\t��>@�����t�\n(P�/��+��]����$���B�3s�|���_�n� ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:59:40.823

我也遇到了这个问题，这是由于 IIS 中静态内容的 GZip 压缩。为了防止损坏，我通过以下 Web.Config 条目禁用了静态压缩：

```
<system.webServer>
  <urlCompression doStaticCompression="false" />
</system.webServer> 
```

事实证明，小于 2700 字节的文件默认不会被压缩（请参阅 IIS 压缩设置），因此您只会看到大于该值的静态内容。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T12:58:21.267

您忽略了传递给您的实现的`offset`and 。使用也需要索引和计数的覆盖可能会有所帮助。`count``Write``GetString`

但是，恐怕还有其他一些问题。您在`Write`函数中收到的数据将分块到达。如果第一个块以“%vers”结尾，而第二个块以“ion%”开头，会发生什么？

此外，由于非 ASCII 字符在 UTF-8 中表示为多个字节，因此单个 Unicode 字符可能会“传播”到两个后续调用`Write`，这将导致`UTF8Encoding.UTF8.GetString`失败。

# ruby-on-rails - 显示表单错误

> ID：13338333
> 
> 赞同：2
> 
> 时间：2012-11-12T04:20:26.200
> 
> 标签：ruby-on-rails

我的 Rails 视图中有一个 HTML 表单

```
<form id="download_form" action="download">
  Username: <input type="text" name="username"> <br/>
  <input type="submit" id="submit_download_form" value="Submit">
</form> 
```

在 Rails 控制器中，如果 的长度`username`大于 10，我希望控制器返回同一页面，并通过`<p id="notice"><%= notice %></p>`该长度通知用户长度不能超过 10。我该怎么做？

顺便说一句，`username`不是**任何**模型中的属性。它只是这种形式的一个字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:40:45.743

`username`您可以通过方法获得长度`length`：

```
if params[:username].length > 10
  @notice = "the length can't be more than 10"
  render 'download'
end 
```

然后在您看来，您可以使用`@notice`：

```
<p id="notice"><%= @notice %></p> 
```

# sql - 未启动服务器服务的 SQL Server 2000 备份

> ID：13338334
> 
> 赞同：0
> 
> 时间：2012-11-12T04:20:36.263
> 
> 标签：sql, database, service, sql-server-2000

由于 HP-server 中的阵列磁盘故障之一，sql server 2000 无法启动，出现错误 WMI provider error 。但是，为了避免任何风险，我只想在不启动服务器的情况下进行备份，方法是保存主数据文件 MDF、事务文件 LDF 等。如果有任何可能，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:24:49.773

应该能够复制这些文件并将它们附加到不同服务器上的新实例。确保在附加到新服务器时引用事务。附加对话框中将有一个位置指定 mdf 和 ldf 文件的位置。当服务器关闭时任何不完整的事务都将被回滚，这通常是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:26:45.040

您通常可以使用 sp_attach_db 来附加 MDF/LDF 文件。这些不是备份，但如果这就是你所拥有的，它们是下一个最好的东西。所以将 MDF 和 LDF 文件复制到某个地方，然后解决 WMI 问题。

WMI 故障并没有那么严重。它是一个允许外部进程检查和更改 SQL Server（以及其他方面）的层。如果 WMI 失败是发生过的最糟糕的事情，那么您的数据库将不会受到影响。

# android - 使用 SpannableString 突出显示字符串中的多个单词

> ID：13338335
> 
> 赞同：2
> 
> 时间：2012-11-12T04:20:41.500
> 
> 标签：android, underline, spannablestring

我使用 a`SpannableString`来强调某些单词，但是，我意识到如果有多个单词，我的代码只会突出显示第一个单词。不完全确定如何完成突出显示多个单词：

```
String keyword = "test";
String text = "This is a test to underline the three test words in this test";

SpannableString output = new SpannableString(text);

if (text.indexOf(keyword) > -1)
{
    int keywordIndex = text.indexOf(keyword);
    int keywordLength = keyword.length();

    int start = keywordIndex;
    int end = keywordIndex + (keywordLength);                   

    output.setSpan(new UnderlineSpan(), start, end, 0);
} 
```

我在想我可以`split`在每个空间输入文本并循环遍历它，但不确定是否有更好的方法。

我确实有这段代码可以使用正则表达式突出显示多个单词，但是，我尽量避免使用正则表达式，因为它在 Android 应用程序中，并且我在 a 中使用它，`ListView`而且我被告知它们非常昂贵。此外，这段代码我只突出显示了整个单词，因此使用上面的示例文本，如果句子中包含“抗议”一词，则使用此代码不会突出显示：

```
 Matcher matcher = Pattern.compile("\\b(?:test")\\b").matcher(text);

while (matcher.find())
{
  output.setSpan(new UnderlineSpan(), matcher.start(), matcher.end(), 0);
} 
```

# php - imagecreatefromjpeg 和类似的函数在 PHP 中不起作用

> ID：13338339
> 
> 赞同：86
> 
> 时间：2012-11-12T04:21:38.630
> 
> 标签：php, gd

我已经对此进行了搜索，过去问题中提供的解决方案对我来说完全无法理解。每当我运行类似的函数`imagecreatefromjpeg`时，我都会得到：

> 致命错误：调用未定义的函数 imagecreatefromjpeg() ...

我正在安装新的 PHP；我上次安装从来没有这个问题。我不明白发生了什么事。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-11-12T04:27:20.963

安装 GD 库

您使用的是哪个操作系统？

[http://php.net/manual/en/image.installation.php](http://php.net/manual/en/image.installation.php)

视窗 [http://www.dmxzone.com/go/5001/how-do-i-install-gd-in-windows/](http://www.dmxzone.com/go/5001/how-do-i-install-gd-in-windows/)

Linux [http://www.cyberciti.biz/faq/ubuntu-linux-install-or-add-php-gd-support-to-apache/](http://www.cyberciti.biz/faq/ubuntu-linux-install-or-add-php-gd-support-to-apache/)

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2014-02-04T14:36:46.727

在 Ubuntu/Mint（基于 Debian）中

```
$ sudo apt-get install php5-gd 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2018-01-08T08:06:24.363

`Fatal error: Call to undefined function imagecreatefromjpeg()`即使安装了GD，您仍然可以获得。

解决方案是安装/启用 jped lib：

在**Ubuntu**上：

```
 apt-get install libjpeg-dev
    apt-get install libfreetype6-dev 
```

在 **CentOS**上：

```
 yum install libjpeg-devel
    yum install freetype-devel 
```

如果从源代码编译添加`--with-jpeg-dir --with-freetype-dir`或`--with-jpeg-dir=/usr --with-freetype-dir=/usr`.

有关更多详细信息，请查看[https://www.tectut.com/2015/10/solved-call-to-undefined-function-imagecreatefromjpeg/](https://www.tectut.com/2015/10/solved-call-to-undefined-function-imagecreatefromjpeg/)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-11-12T04:27:25.463

您必须启用库 GD2。

找到你的（正确的）php.ini 文件

找到这一行： ;extension=php_gd2.dll 并删除前面的分号。

该行应如下所示：

```
extension=php_gd2.dll 
```

然后重新启动apache，你应该很高兴。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2020-06-18T11:51:38.230

如果您像我一样使用[PHP Docker 映像](https://hub.docker.com/_/php)之一作为基础，则需要使用与上面讨论的不同的指令添加 gd 扩展。

对于`php:7.4.1-apache`您需要添加的图像`Dockerfile`：

```
RUN apt-get update && \
    apt-get install -y zlib1g-dev libpng-dev libjpeg-dev

RUN docker-php-ext-configure gd --with-jpeg && \
    docker-php-ext-install gd 
```

GD php 扩展的编译需要这些开发包。对我来说，这导致在 PHP 中使用 PNG 和 JPEG 支持激活 GD。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2016-09-21T09:39:30.660

```
sudo apt-get install phpx.x-gd 
sudo service apache2 restart 
```

xx 是 php 版本。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2017-05-25T14:17:07.980

对于 Ubuntu 上的 php 7：

> sudo apt-get install php7.0-gd

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2014-05-31T07:16:40.913

安装`php5-gd` **apache 后需要重启**。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2014-08-12T19:15:31.297

在 CentOS、RedHat 等中使用以下命令。不要忘记重新启动 Apache。因为必须加载 PHP 模块。

```
yum -y install php-gd
service httpd restart 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-09-28T05:14:18.437

安装后我花了很多时间试图在 Windows 上解决这个问题`PHP Version 8.0.11`。

我创建了这个`phpinfo.php`文件来检查是否加载了 GD：

```
<?php
if (extension_loaded('gd')) {
  print 'gd loaded';
} else {
  print 'gd NOT loaded';
}

phpinfo(); ?> 
```

如果它返回`gd NOT loaded`，请确保在您的`php.ini`文件中未选中以下内容：

```
; - Many DLL files are located in the extensions/ (PHP 4) or ext/ (PHP 5+)
;   extension folders as well as the separate PECL DLL download (PHP 5+).
;   Be sure to appropriately set the extension_dir directive.
;
extension=gd 
```

再往下，它们将成为`extension_dir`Windows 上的一个部分，您需要取消选中以下内容：

```
; Directory in which the loadable extensions (modules) reside.
; http://php.net/extension-dir
;extension_dir = "./"
; On windows:
extension_dir = "ext" 
```

您现在应该看到`gd loaded`运行`phpinfo.php`文件的时间，并且任何函数调用（如`imagecreatefromjpeg()`）现在都应该按预期工作。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-04-18T18:51:44.177

如前所述，您可能需要安装 GD 库。

在 shell 上，首先检查您的 php 版本：
`php -v`

然后相应地安装。在我的系统（Linux-Ubuntu）中，它是 php 7.0 版：
`sudo apt-get install php7.0-gd`

重新启动您的网络服务器：
`systemctl restart apache2`

您现在应该已经安装并启用了 GD 库。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-02-26T23:11:11.177

在
``systemctl restart php-fpm``
Gd 库工作之后。

# java - C++ vs Java：创建对象的无限循环只会使 C++ 崩溃

> ID：13338340
> 
> 赞同：17
> 
> 时间：2012-11-12T04:21:38.370
> 
> 标签：java, c++, pointers, memory-management

这是我的一本书中的一个问题（没有附加答案），我已经思考了几天了。答案仅仅是因为 C++ 代码最终会崩溃，因为它在每次迭代后都会创建一个垃圾内存单元吗？

> 考虑以下 Java 和 C++ 代码片段，它们是基于 GUI 的应用程序的两个版本的一部分，它收集用户偏好并使用它们来组装命令及其参数。方法/函数 getUserCommandSpecification() 返回一个表示命令代码及其参数的字符串。返回的字符串用于构建所需的命令，然后执行该命令。
> 
> 假设如下：
> 
> (i) 在 Command 对象的 while 循环中创建后（在 Java 情况下由 cmd 引用或在 C++ 情况下由 cmd 指向），不再引用或使用指向生成对象的引用/指针 cmd。
> 
> (ii) 应用程序还定义了一个类 Command 及其方法/函数 execute()。
> 
> 一种。下面详述的两个代码版本中的哪一个最终会崩溃。
> 湾。解释为什么一个程序版本崩溃而另一个没有崩溃。

Java 代码

```
...
while (true) {
   String commandSpecification = getUserCommandSpecification();
   Command cmd = new Command(commandSpecification);
   cmd.execute();
}
... 
```

C++ 代码

```
...
while (true) {
   string commandSpecification = getUserCommandSpecification();
   Command* cmd = new Command(commandSpecification);
   cmd -> execute();
}
... 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-12T04:24:32.490

是的，C++ 版本由于`new Command(...)`没有`delete`. 当然，它可以很容易地进行不同的编码以避免这种情况：

```
...
while (true) {
   string commandSpecification = getUserCommandSpecification();
   Command cmd(commandSpecification);
   cmd.execute();
}
... 
```

...所以我不确定这个例子是否像他们想象的那样具有启发性。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-12T04:24:28.543

C++ 代码创建了无数个`Command`永远不会被删除的对象。在 C++ 中没有垃圾收集。必须调用`delete`由`new`.

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-11-12T05:45:31.167

使用原始指针已经过时了。正如已经指出的那样，这里是不必要的。如果实际需要指针，请使用 std::unique_ptr。

```
while (true) {
   string commandSpecification = getUserCommandSpecification();
   std::unique_ptr<Command> cmd(new Command(commandSpecification));
   cmd -> execute();
} 
```

这里没有内存泄漏。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-12T04:25:14.987

C++ 示例将由于内存泄漏而崩溃。

```
Command* cmd = new Command(commandSpecification); 
```

被连续调用，没有对应的`delete`.

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-11-12T04:26:31.480

在 C++ 中，没有垃圾收集（范围内的本地人除外）。因此，C++ 不断地`Command`在堆上分配对象，而无需通过调用`delete`. 因此，C++ 程序最终会耗尽内存。

在 Java 中，垃圾收集器将看到堆上的对象不再被引用并释放它们，从而避免内存不足错误。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-12T04:25:01.417

AFAIK，在 C++ 中，您需要显式销毁您创建的对象（使用`new`关键字），而在 Java 中，垃圾收集器（帮助回收不再可访问的对象占用的内存）为您处理它。

在 Java 中，以这种方式创建的对象会增加次要 GC 的频率，因此这些对象甚至可能不会到达堆中的老年代区域（取决于`execute`运行的时间）。

[使用 Java 实现极致性能](http://www.infoq.com/presentations/Extreme-Performance-Java)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-13T20:56:43.800

由于尚未明确说明（搜索页面中的单词没有匹配项），我觉得最好补充一下：C++ 代码中有一个明显的内存泄漏**错误**。

这是另一种可行的替代方法，使用`std::auto_ptr`（Boost`boost::scoped_ptr`或 Qt`QScopedPointer`是替代智能指针）：

```
while (true) {
   string commandSpecification = getUserCommandSpecification();
   std::auto_ptr<Command> cmd(new Command(commandSpecification));
   cmd->execute();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-12T12:15:26.290

阅读 Java 中的垃圾收集。在 java 中，您不需要手动删除对象，因为 jvm 会自动为您执行此操作，但在 c++ 中，您需要删除您不需要的对象。垃圾收集器也是 java 中的一个功能强大的工具，如果您需要帮助，您可以在工作完成后将对象引用为 null。

```
Object x=new Object()
///
.
.
.
you did your works
x=null; 
```

# ruby - 用于下载文件的 Ruby Sinatra 应用程序（作为流式传输）

> ID：13338342
> 
> 赞同：3
> 
> 时间：2012-11-12T04:21:49.557
> 
> 标签：ruby, sinatra

我有一个 sinatra 应用程序，我想在其中创建下载功能。此下载从表中获取数据并制作 excel 以供用户下载。

```
require 'csv'
get '/download' do 
     data = [{:name => "john", :age => 12, :state => 'ca'}, {:name => "tony", :age => 22, :state => 'va'}]

     # I want to download this data as excel file and the content of file should be as follows:
     # name,age,state
     # john,12,ca
     # tony,22,va
     # I don't want to save data as a temp file on the server and then throw to user for download 
     # rather I want to stream data for download on the browser. So I used this, 
     # but it is not working

     send_data (data, :type => 'application/csv', :disposition => 'attachment')
end 
```

我究竟做错了什么？或者如何实现，我想要做什么？我试图关注[http://sinatra.rubyforge.org/api/classes/Sinatra/Streaming.html](http://sinatra.rubyforge.org/api/classes/Sinatra/Streaming.html)

更新：我没有嫁给 sinatra 的 send_data 方法。如果流媒体在这段时间内阻塞了我的服务器，那么我愿意接受替代方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T05:01:16.720

```
get '/download' do 
    data = [{:name => "john", :age => 12, :state => 'ca'}, {:name => "tony", :age => 22, :state => 'va'}]

    content_type 'application/csv'
    attachment "myfilename.csv"
    data.each{|k, v|
       p v
    }
end 
```

这对我有用。我知道这是不完整的，因为我必须将标题和逗号放在带有换行符的 excel 文件中。但这有效。

# android - 想要捕捉蓝牙耳机按钮按下

> ID：13338346
> 
> 赞同：6
> 
> 时间：2012-11-12T04:23:01.677
> 
> 标签：android, bluetooth

现在，我只想显示一个“按下按钮！” 当我按下配对的蓝牙耳机 (LG HBM-770) 上的任何按钮（音量或通话按钮）时的消息。我在这里尝试了确切的方法（这是我正在使用的代码）：[Android - 使用 BroadcastReceiver 注册耳机按钮点击](https://stackoverflow.com/questions/6287116/android-registering-a-headset-button-click-with-broadcastreceiver)没有运气，包括建议的修复。数小时的谷歌搜索仅指向该类型的代码。清单中启用了蓝牙权限。

如果我现在按下通话按钮，它似乎永远不会进入我的应用程序，而是会弹出一个菜单，要求您选择处理它的应用程序（语音搜索、谷歌语音等）。如果我按住蓝牙通话按钮，我的手机会拨打最后拨打的号码。如果我尝试用 ACTION_POWER_DISCONNECTED 替换 Intent 过滤器类型，它会在我断开电源时完美运行，因此从那时起的代码似乎可以正常工作。

如果我根本不使用过滤器就好了，只弹出一个 Toast 显示收到的任何操作的 ID，这样我就知道按钮在电话中的确切外观。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T08:42:23.827

按下蓝牙耳机上的通话按钮将触发某些 AT 命令（检查免提规格）到电话哪个电话会照顾，例如：当长时间按下通话按钮时，耳机将发送一个 AT 命令进行呼叫重拨，其他电话也是如此用例。

链接中提供的意图和方法适用于手机上按下的按钮。

# javascript - Android 2.3 WebView Javascript 打破页面

> ID：13338347
> 
> 赞同：2
> 
> 时间：2012-11-12T04:23:21.440
> 
> 标签：javascript, android, webview

我有以下问题。我的页面包含一些自定义 javascript，它添加了标签、图像等。我拥有的一个最简单的例子是：

```
function handleIMGDown(index, source)
{
  var filename = source.substring(source.lastIndexOf('/')+1);
  var source_input = document.getElementById("imageLoader" + index);
  var image = new Image();
  image.src=source;

  source_input.parentNode.insertBefore(image, source_input);
  source_input.parentNode.removeChild(source_input);
  return true;
} 
```

所以当我用这个加载图像时，我得到：

[http://img141.imageshack.us/img141/9141/screenshot1352718777001.png](http://img141.imageshack.us/img141/9141/screenshot1352718777001.png)

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T05:17:50.030

哇...似乎我发现了问题所在。

我让我的 WebView 透明，这似乎是问题所在。将 WebView 的背景颜色设置为 0x00000000 以外的任何值时，问题就会消失。

我仍然不清楚，如果背景是透明的，为什么内容不会更新。似乎一些懒惰的开发人员忘记了这个 xD

# java - Java找不到符号错误

> ID：13338348
> 
> 赞同：0
> 
> 时间：2012-11-12T04:23:30.793
> 
> 标签：java, find, syntax-error, scope, symbols

我知道当拼写错误或变量不在它使用的范围内或类似的东西时会出现“找不到符号”。但是我仍然无法弄清楚在我的情况下是什么导致了这个问题。我有两个类：Driver.java 和 DisplayPanel.java

Driver.java 代码：

```
package csHW9;

import javax.swing.JFrame;
import csHW9.DisplayPanel;

public class Driver {

    public static void main(String[] args){
        JFrame frame = new JFrame("Dungeon Diver");
        DisplayPanel panel = new DisplayPanel();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

} 
```

DisplayPanel.java 代码：

```
package csHW9;

import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Point;

import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.*;

import javax.swing.JPanel;
public class DisplayPanel extends JPanel{   
private Dungeon dungeon;

public DisplayPanel(){
    setPreferredSize(new Dimension(600, 600));
    this.dungeon = new Dungeon();
    addKeyListener(new KListener());
    setFocusable(true); 
} 
```

Dungeon 只是另一个类，我在 DisplayPanel 类中创建它的实例。

我得到的错误是这样的：

```
 Driver.java:12: cannot find symbol
symbol  : class DisplayPanel
location: class csHW9.Driver
        DisplayPanel panel = new DisplayPanel(); 
```

我不明白我做错了什么。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T04:24:39.883

您需要`import`在顶部的 Driver 类中添加语句。

例子：

```
import yourpackage.Driver 
```

# node.js - NodeJS writeStream 空文件

> ID：13338350
> 
> 赞同：10
> 
> 时间：2012-11-12T04:24:05.647
> 
> 标签：node.js, filesystems, png

我正在尝试使用 nodeJS 来保存存储在 base64 字符串中的已处理图像。

```
var buff = new Buffer(base64data,'base64');
console.log(base64data);

var stream = fs.createWriteStream('/path/to/thefile.png');
stream.write(buff)
stream.end() 
```

但是，生成的文件是空的。

当我在`console.log(base64data);`本地获取输出并对其进行解码时，它会生成一个有效的 png 二进制文件，那么为什么文件是空的呢？

该文件是一个 3600x4800 像素的 png 文件（即它很大），这可能是一个因素吗？

另外，我也试过`writeFile`了，没有运气。

是的，`fs`是`require('fs')`

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T05:53:34.573

你的 stream.end() 太快了，什么都没有写。记住它是异步函数。

```
var buff = new Buffer(base64data,'base64');
console.log(base64data);

var stream = fs.createWriteStream('/path/to/thefile.png');
stream.write(buff);
stream.on("end", function() {
  stream.end();
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-30T12:49:27.177

更好的：

```
var buff = new Buffer(base64data,'base64');
console.log(base64data);

var stream = fs.createWriteStream('/path/to/thefile.png');
stream.write(buff);
stream.end();
stream.on('finish', () => {
     //'All writes are now complete.'
});
stream.on('error', (error) => {...}); 
```

# ruby-on-rails - 时间和日期时间之间的Rails时区差异

> ID：13338354
> 
> 赞同：3
> 
> 时间：2012-11-12T04:24:28.183
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, datetime, time

我设置了时区。

```
config.time_zone = 'Mountain Time (US & Canada)' 
```

从控制台创建圣诞节活动...

```
c = Event.new(:title => "Christmas") 
```

使用时间：

```
c.start = Time.new(2012,12,25)  
=> 2012-12-25 00:00:00 -0700 #has correct offset  
c.end = Time.new(2012,12,25).end_of_day  
=> 2012-12-25 23:59:59 -0700 #same deal 
```

使用日期时间：

```
c.start = DateTime.new(2012,12,25)  
=> Tue, 25 Dec 2012 00:00:00 +0000 # no offset  
c.end = DateTime.new(2012,12,25).end_of_day  
=> Tue, 25 Dec 2012 23:59:59 +0000 # same 
```

我一直在粗心地使用 DateTime 认为输入被假定在 config.time_zone 但是当它被保存到数据库时没有转换。它的存储方式与返回值相同（为 db 格式化）。

使用 Time 真的没什么大不了的，但我是否需要在使用 DateTime 的任何时候手动偏移并希望它位于正确的区域？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T04:40:33.560

是的。[`Time.new`](http://www.ruby-doc.org/core-1.9.3/Time.html#method-c-new)在没有特定时区的情况下将参数解释为本地时间，在没有特定时区的情况下[`DateTime.new`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-c-new)将参数解释为 UTC。如文件所述。为了清楚起见，您可能希望在整个代码中替换为`Time.new`。`Time.local`

你可以做的是使用`DateTime`'s [mixins`Time`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Time.html#method-i-to_datetime)来调用`Time.local(2012,12,25).to_datetime`。但是，如果年/月/日来自用户/浏览器，那么也许您应该获取用户/浏览器的时区，而不是使用服务器的时区。

如果您需要创建迁移以修复数据库中的现有数据，`new_date_time = Time.local(old_date_time.year, old_date_time.mon, old_date_time.mday, old_date_time.hour, old_date_time.min, old_date_time.sec).to_datetime`

# android - 如何将 JSObject 设为数组？

> ID：13338358
> 
> 赞同：1
> 
> 时间：2012-11-12T04:24:46.387
> 
> 标签：android, arrays, json, nullpointerexception

我有很多从 Web 获取数据的链接，因此我想使用循环来检索每个 URL 的数据，但是我在将 JSObject 作为数组时遇到了麻烦。

```
JSONObject[] jsObjectallnewstype;
JSONArray[] jsonArrayallnewstype = null;

for(int i = 0; i < categories.length(); i++)
     {
        JSONObject c = categories.getJSONObject(i);
        // Storing each json item in variable
        String title = c.getString(TAG_TITLE);
        String url = c.getString(TAG_URL);  
        jsObjectallnewstype[i] = JSONFunction.getnewstype(title, url); //java.lang.NullPointerException                 
        jsonArrayallnewstype[i] = jsobjectallnewstype[i].getJSONArray(TAG_NEWLIST);
 } 
```

`jsObjectallnewstype[i]`尽管日志显示 JSONFunction.getnewstype 成功检索数据，但此行出现空错误。而且我也担心第二行`jsonArrayallnewstype[i]`也会导致同样的错误。

那么 JSObject 不能作为数组放置吗？如果是这样，有什么选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:33:20.237

要修复您当前的代码，您需要初始化您的数组。这就是您获得 NPE 的原因：

```
 JSONObject[] jsObjectallnewstype = new JSONObject[categories.length()];
    JSONArray[] jsonArrayallnewstype = new JSONArray[categories.length()];

    for(int i = 0; i < categories.length(); i++)
         {
            JSONObject c = categories.getJSONObject(i);
            // Storing each json item in variable
            String title = c.getString(TAG_TITLE);
            String url = c.getString(TAG_URL);  
            jsObjectallnewstype[i] = JSONFunction.getnewstype(title, url); //java.lang.NullPointerException                 
            jsonArrayallnewstype[i] = jsobjectallnewstype[i].getJSONArray(TAG_NEWLIST);
     } 
```

# html - 在 HTML 数字输入中显示尾随十进制零

> ID：13338361
> 
> 赞同：11
> 
> 时间：2012-11-12T04:25:03.563
> 
> 标签：html, forms, numbers, mobile-safari

我在移动 Safari 上显示默认字段值“1.10”时遇到问题。因为最后一位是零，所以显示为“1.1”。我在桌面系统上没有这个问题，只在移动 safari 上显示。

如果我将默认值设置为“1.11”，则显示所有数字，但“1.10”显示为“1.1”。**如何强制 Mobile Safari 将“1.10”显示为默认表单值？**

这是我的代码。

```
 <label id="mortIns_lbl" for=mortIns>Mortgage Ins. (PMI):</label><div class="dollar">$</div>
      <input id=mortIns class=narrow name=mortIns type=text readonly>
      <input class="percent necessary" id=miPerc name=miPerc type=number onblur=loan() min="0"
                 max="3"
                 step=".01"
                 value="1.10"><div class="pct">%</div><a title="Most mortgage banks will require mortgage insurance if the down payment is less than 20% of the total purchase price of the property. Once 20-25% of the principal has been payed down, the PMI should be removed. However, until that happens, the mortgage insurance payment will remain. 1.1% is the average, but for further clarification talk to a professional lender.">?</a>
      </li> 
```

这是显示 Mobile Safari 上的问题的屏幕截图（通过 Xcode 模拟器）

第一个图像显示 1.11 设置为默认值，显示正确的数字。然后设置为 1.10，即截断零。

![显示 3 位数字...好](../Images/317cde75b3cb5ddb4fe151bec3685b64.png)

![当我想显示 3...BAD 时显示 2 位数字](../Images/73d6a3466499307c0f56951f6de60c2c.png)

您可以在 EZMonthlyPayment.com 在您的桌面和 iOS 设备上自行测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T14:00:04.023

您可以使用一些偷偷摸摸的 JavaScript 在文本和数字类型之间交换输入：

```
var numInput = document.getElementById('numInput');
numInput.addEventListener('keypress', function () {
    this.setAttribute('type', 'text');
});
numInput.addEventListener('click', function () {
    this.setAttribute('type', 'number');
}); 
```

这只是取自这个非常好的答案，它可能对您的问题有其他解决方案（尽管我不确定它是否适用于移动 safari）：[如何使 HTML5 数字字段显示尾随零？](https://stackoverflow.com/questions/7790561/how-can-i-make-the-html5-number-field-display-trailing-zeroes)

# c# - 用吉他频率模拟按钮按下 c#

> ID：13338368
> 
> 赞同：0
> 
> 时间：2012-11-12T04:25:27.020
> 
> 标签：c#, button, frequency, simulate, guitar

我最近一直在用我的吉他演奏 Rocksmith，我觉得它真的很有趣。我相信他们“知道”你正在按下哪个音品的方式是将音符的频率与你应该按下的音符进行比较。

我也有一个用传统吉他演奏 Guitar Hero PC 的方法（虽然很奇怪）。本质上，它与普通吉他英雄控制器的工作方式相同，但使用的是真正的吉他。

我可以记下低 E 弦上 1 品、2 品、3 品、4 品和 5 品的频率，这将是控制器上的 5 个按钮。

这将提供两个功能：
1）每次代码注册一个频率时，它也会注册一个“弹奏”，因为如果不弹奏（除了敲击），您就无法真正获得频率。
2）它还允许我将每个频率分配给一个按钮按下。

我还没有开始实现这个，所以我希望它不会违反 SO 的格式。从本质上讲，我为什么要这样做是要问，这可行吗？有什么缺点？以前有没有实施过？你对实现这一点有什么建议吗？等等。

谢谢 ：）

# java - 对通用接口列表进行排序

> ID：13338371
> 
> 赞同：3
> 
> 时间：2012-11-12T04:25:55.647
> 
> 标签：java, generics, sorting, collections, interface

情况就是这样，我有两个类`A`,`B`和一个通用接口`C`

```
Class A implements Comparable<A> {...}

interface C<T> {...}

//this class is not longer generic type, I do not know if this matter.
Class B extends A implements C<A> {...} 
```

然后，在其他班级，我得到了一个`B`List 并按如下方式排序

```
List<B> list = new ArrayList<B>();
Collections.sort(list); 
```

这完美地工作，但现在我想将列表更改为`B`通用接口`C`，以便它可以更通用。

```
List<C<A>> list = new ArrayList<C<A>>();
Collections.sort(list); 
```

这次我得到如下错误：

> `sort(List<T>)`绑定不匹配：类型的泛型方法`Collections`不适用于 arguments `(List<C<A>>)`。推断的类型`C<A>`不是有界参数的有效替代品`<T extends Comparable<? super T>>`

我尝试了以下修改（当然不起作用）：

1.  更改`C`为`interface C<T> extends Comparable<T>{...}`
2.  更改`B`为`class B extends A implements C<A>, Comparable<T> {...}`

有谁能够帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T05:27:13.133

> 将 C 更改为接口 C 扩展 Comparable{...} 类 B 扩展 A 实现 C {...}

正如您已经从错误消息中看到的那样，这两个不能一起工作，因为 ' 和 的定义会发生`B`冲突。`Comparable<A>``Comparable<C<A>>`

由于`A`已经在实施`Comparable<A>`，您可以实现以下目标

```
List<C<A>> list = new ArrayList<C<A>>();
Collections.sort(list); 
```

通过定义一个`Comparator`for`C<A>`如下：

```
class CTComparator<T> implements Comparator<C<T>>
{
    @Override
    public int compare(C<T> o1, C<T> o2)
    {
        return 0;
    }
} 
```

然后使用此比较器应用排序方法：

```
List<C<T>> list  = new ArrayList<C<T>>();
Collections.sort(list, comparator); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:02:32.153

如果您希望`C<T>`根据其包含的类型进行一般可比较，则应使其自身可比较（`C<T>`， not `T`），但将其值类型绑定到那些实现`Comparable`. 像这样的东西：

```
public class C<T extends Comparable<? super T>> extends Comparable<C<T>> {
    private final T value;

    @Override
    public int compareTo(C<T> that) {
       return this.value.compareTo(that.value);
    }
} 
```

这仅对某些容器有意义，例如那些简单地包装一个值的容器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T06:48:44.157

由于`C<A>`没有`Comparator`定义的可见性，`A`因此它在抱怨。定义一个新的比较器`C<A>`作为打击，它应该没问题。

```
List<C<A>> list = new ArrayList<C<A>>();
Collections.sort(list, new Comparator<C<A>>() {
    @Override
    public int compare(C<A> o1, C<A> o2) {
        //implement the comarison
        return 0;
    }
}); 
```

# gstreamer - 使用 gstreamer over RTP 重新传输正在流式传输的数据包

> ID：13338372
> 
> 赞同：0
> 
> 时间：2012-11-12T04:26:01.370
> 
> 标签：gstreamer, rtp

已建立：我目前正在使用 gstreamer over RTP 将数据包（.mp3 文件）从源（服务器）流式传输到接收器（客户端 A）。这件事很简单，我成功地通过网络将音乐从服务器传输到设备。

要求：现在，我想从客户端 A 实时（或至少尽可能接近实时）重新传输数据包，以说任何其他客户端 B 。因此，控制权仍将保留在客户端 A 上，并且现在只有音乐实际上会与客户端 B 一起流式传输。

做这种事情的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:18:15.393

假设您想快速尝试一下。理想的方法是在客户端 A 上设置一个 rtsp 服务器，它可以转发客户端 B 的数据。如果您想按照自己的方式进行操作，这是一种方法：

如果您在客户端 B 中有一个播放器，它可以在给定 sdp 文件的情况下播放 rtp 流，您可以这样做：创建您在客户端 A 中获得的 sdp 的副本。通过某些路径将其提供给客户端 B。[说双方同意通信的 tcp 套接字]

将您在客户端 A 中获得的内容的副本也流式传输到客户端 B。

您需要将 sdp 中的端口号更改为客户端 B 上可用的端口号 [这就是 RTSP 协商所做的]。如果客户端 B 可以在获取 SDP 之前告诉客户端 A 端口号，那么您可以正确设置 sdp 中的端口号，将其提供给客户端 B，然后将他的流的副本发送给客户端 B。您是完毕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:17:25.370

您还使用了基于 TCP 的 RTP。所以这对你来说很容易，因为在 RTP 级别不需要更改。您需要将数据包传递给 RTSP，而不是直接通过 UDP 套接字发送。一切都将由 RTSP 处理。如果您将 RTP 用作独立的，根据 rfc 3550，它不是 RTP 的一部分您仍然不想这样做，那么您没有遵循 RTP 实现的标准方式。

# c++ - 在 linux 上编译 libfacebookcpp，未声明“StringBuilder”

> ID：13338374
> 
> 赞同：0
> 
> 时间：2012-11-12T04:26:03.050
> 
> 标签：c++, linux, makefile

编译时出现错误：

```
PagingInfo.hpp:35：错误：未在此范围内声明“StringBuilder”。

```

我已经包含了正确的头文件，但是为什么编译器找不到定义`StringBuilder`？

**实用程序.hpp：**

```
#ifndef LIBFACEBOOKCPP_UTILS_H_
#define LIBFACEBOOKCPP_UTILS_H_

template<class TData, class TStr>
inline TData fromString(const TStr &str)
{
std::stringstream oss;
oss << str;
TData t;
oss >> t;
return t;
}

class StringBuilder
{
public:
inline operator const std::string () const
{
return oss.str();
}

private:
std::ostringstream oss;
};

#endif // LIBFACEBOOKCPP_UTILS_H_ 
```

**分页信息.hpp**

```
#ifndef LIBFACEBOOKCPP_PAGING_INFO_H_
#define LIBFACEBOOKCPP_PAGING_INFO_H_
#include "Utils.hpp"
namespace LibFacebookCpp
{

struct PagingInfo
{
PagingInfo(unsigned int offset_, unsigned int limit_) : offset(offset_), limit(limit_) { }

bool IsValid() const { return 0 != limit; }
void GetUri(Uri *uri) const
{
LIBFACEBOOKCPP_ASSERT(uri);
uri->query_params["limit"] = StringBuilder() << offset;
uri->query_params["offset"] = StringBuilder() << limit;
}
...
};

} // namespace LibFacebookCpp

#endif // LIBFACEBOOKCPP_PAGING_INFO_H_ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:41:16.743

当我添加足够的骨架代码以解决您在[ideone](http://ideone.com/Nz2wVz)中的问题时，我得到了一个不同的错误：

> prog.cpp: 错误: 'StringBuilder() << ((const LibFacebookCpp::PagingInfo*)this)->LibFacebookCpp::PagingInfo::offset' 中的'operator<<' 不匹配

您的 StringBuilder 类没有定义 << 运算符。为了使用：

```
StringBuilder() << offset; 
```

您将需要定义一个。

在你我之间，该运算符有大约 15 个用于字符串流的重载（每个原始类型一个）。重新实现所有这些将浪费大量时间。只需使用`stringstream`.

# ios - 某些值无法通过 nsurl 发送？

> ID：13338375
> 
> 赞同：0
> 
> 时间：2012-11-12T04:26:05.127
> 
> 标签：ios, xcode, nsurlconnection

我的脚本出现了一个非常奇怪的现象。当它们在脚本中手动制作时，一切正常。然而，当我通过 iOS 上传它时，我的一些字符串似乎阻止它发送（当我删除这些变量时，它再次发送并执行插入命令，只发送了值）。我所说的阻止的意思是它根本无法发送请求并且我没有得到任何插入（脚本旨在插入它得到的任何东西）。更疯狂的是，我的 nsslog 在执行 nsurl 之前在这些位置显示了正确的值。**因此，我很好奇 nsurl 是否有可能被它自己的一些值所阻止？**阻止它的值是我的六个文本字段中的两个和从另一个视图控制器传递的两个 nsstring 之一。我在这里给出了我的格式示例。

```
NSString *urlString = [NSString stringWithFormat:@"http://(mywebsite)?string=%@&text=%@", string, textfield.text]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:30:14.803

如果您的文本包含未转义的字符，例如 @、?、' 或 "，那么是的，您的 url 的内容会导致问题。例如，如果我在您的文本字段中输入 "'abcd'&x=50"，那么你的 web 字符串会突然有一个 x 参数。或者，你可以添加诸如冒号、反斜杠等的东西。

如果你正确地转义了你的字符串，你应该能够以这种方式构建 URL。

# ruby - selenium-webdriver 点击第一个链接

> ID：13338378
> 
> 赞同：1
> 
> 时间：2012-11-12T04:26:25.593
> 
> 标签：ruby, selenium-webdriver

我正在使用 selenium-webdriver 并且我正在寻找一些非常简单的东西，但我没有在文档中找到它。

这是我的代码的一部分：

```
browser = Selenium::WebDriver.for :firefox, :profile => profile
browser.navigate.to 'an_url'
# I find ancestor element
browser.find_element(:id, "displaylinks").find_element(:id, "link0").find_element(:class, "link-center")
# but I want to click the first link child of this last element 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:26:18.503

您可以使用几种不同的选择器：

```
ancestor_element = browser.find_element(:id, "displaylinks").find_element(:id, "link0").find_element(:class, "link-center")

#Using tag_name
ancestor_element.find_element(:tag_name, 'a').click

#Using css-selector
ancestor_element.find_element(:css, 'a').click

#Using xpath-selector (direct child)
ancestor_element.find_element(:xpath, './a').click 

#Using xpath-selector (anywhere in ancestor)child)
ancestor_element.find_element(:xpath, './/a').click 
```

# .net - 使库 WinRT 兼容时最大的挑战是什么？

> ID：13338383
> 
> 赞同：1
> 
> 时间：2012-11-12T04:27:03.877
> 
> 标签：.net, microsoft-metro, windows-runtime

我有一个具有核心功能的 dll，我不想在 ASP.MVC 应用程序和 Metro 应用程序中使用它。因此，我从我的 dll 为 Widows 商店应用程序制作了与 .NET 4.0 和 .NET 兼容的便携式库。正如预期的那样，构建失败了。主要原因是：

1.  可序列化属性[http://social.msdn.microsoft.com/Forums/en/winappswithcsharp/thread/b2ca4ac8-326d-48b0-bb45-965459a99808](http://social.msdn.microsoft.com/Forums/en/winappswithcsharp/thread/b2ca4ac8-326d-48b0-bb45-965459a99808) - 痛苦的惊喜
2.  System.Reflection.Emit 命名空间[http://geekswithblogs.net/mbrit/archive/2012/06/05/say-goodbye-to-system.reflection.emit-any-dynamic-proxy-generation-in-winrt.aspx](http://geekswithblogs.net/mbrit/archive/2012/06/05/say-goodbye-to-system.reflection.emit-any-dynamic-proxy-generation-in-winrt.aspx)
3.  FileInfo 类的用法。几乎预计所有文件系统调用都不会工作

我知道所有的 UI 类也不会被编译。

所以我的问题是，如果我要在 .net 4.0 和 WinRT 之间共享我的库，我必须避免哪些命名空间和类？

**更新** 这里是类和命名空间更改的完整列表[http://msdn.microsoft.com/en-us/library/windows/apps/br230302%28v=vs.110%29.aspx#convert](http://msdn.microsoft.com/en-us/library/windows/apps/br230302%28v=vs.110%29.aspx#convert)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:02:19.147

如果您正在编写要在 .NET 框架和 Windows 应用商店应用程序中重用的新代码，最好立即开始将代码编写为选择这两个目标平台的可移植类库。这样，您将只能使用在两个平台上都可以使用的类和方法（Intellisense 也可以按预期工作）。

[您可以在此处](http://msdn.microsoft.com/en-us/library/gg597391%28v=vs.110%29.aspx#assemblies)找到每个受支持平台的可用 API 概览。

对于可移植类库不支持的 API，因为它们在概念上是不同的，但在某种程度上仍然可用（文件 IO 是一个很好的例子），您可以使用抽象/间接模式为每个平台以不同的方式实现它们。[这](http://blogs.msdn.com/b/dsplaisted/archive/2012/08/27/how-to-make-portable-class-libraries-work-for-you.aspx)是对这种方法的一个很好的解释。

# python - 如何使用 python icalendar.cal.Timezone 类创建 icalendar VTIMEZONE

> ID：13338391
> 
> 赞同：8
> 
> 时间：2012-11-12T04:27:27.677
> 
> 标签：python, timezone, icalendar

有人可以给我一个使用 python [icalendar](http://icalendar.readthedocs.org/en/latest/)库生成[icalendar文件的 VTIMEZONE 部分的示例吗？](http://en.wikipedia.org/wiki/ICalendar)

我相信这可以通过使用 icalendar.cal.Timezone 组件类来完成，但还不知道具体如何。

优选地，生成的 icalendar 文件部分将类似于从 Mac OS X ICal 程序中导出的样本（或类似，但仍然有效的 icalendar 格式）。

```
BEGIN:VTIMEZONE
TZID:America/Denver
BEGIN:DAYLIGHT
TZOFFSETFROM:-0700
RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
DTSTART:20070311T020000
TZNAME:MDT
TZOFFSETTO:-0600
END:DAYLIGHT
BEGIN:STANDARD
TZOFFSETFROM:-0600
RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
DTSTART:20071104T020000
TZNAME:MST
TZOFFSETTO:-0700
END:STANDARD
END:VTIMEZONE 
```

到目前为止，我有这个工作代码，但它不包括所需的 STANDARD 和 DAYLIGHT VTIMEZONE 元素。

```
import icalendar
timezone = icalendar.cal.Timezone()
timezone.add('TZID', 'America/Denver')
timezone.to_ical() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-08T13:45:57.943

目前这似乎是不可能的，至少在使用 pytz 进行大量黑客攻击时是不可能的。

有一个关于相应[icalendar 问题](https://github.com/collective/icalendar/issues/44)的近期更新正在进行的讨论。你可以在那里找到一些 hacky 代码。

[另一个 icalendar 问题](https://github.com/collective/icalendar/pull/154)似乎是为 VTIMEZONE->icalendar 转换实现某些东西的地方。

# mysql - MySQL 在加入/选择标准中苦苦挣扎

> ID：13338393
> 
> 赞同：1
> 
> 时间：2012-11-12T04:27:50.623
> 
> 标签：mysql, join

我希望有人能够指出我正确的方向。

我有一个 COUNTRY 表，其中包含一个主 ID 和国家名称（例如法国）

我有第二个表 PAYMETHODS_COUNTRIES，其中包含主 ID、付款方式 ID（例如 4）和国家/地区 ID

我正在尝试输出每种付款方式的复选框列表，以控制哪些国家（或哪些国家的用户）可以访问这些本地付款方式。

我的复选框列表工作正常，表单的处理也正常。最后剩下的事情是输出带有选定国家的国家复选框列表（例如，这种付款方式在法国和德国可用）显示为 CHECKED。

所以我想做的是输出所有国家的完整列表

```
SELECT id, name FROM country ORDER BY id ASC 
```

然后包括类似这样的 PAYMETHODS_COUNTRIES 表（当然不工作）

```
SELECT country.id AS countryid,
country.name AS countryname,
paymethods_countries.id AS methodid
FROM country LEFT JOIN `paymethods_countries` 
ON country.id = paymethods_countries.country
WHERE paymethods_countries.paymethod = 10 
```

此示例查询仅显示实际在 PAYMETHODS_COUNTRIES 中有记录的行，而不是我所追求的。

我所希望的是 country.id + country.name 的完整列表，其中包含最后一个字段（PAYMETHODS_COUNTRIES 表的 ID） - 在没有链接的情况下应该为 null。这样我应该能够检查 null 或其他，并为这些行输出 CHECKED。

希望这是有道理的——或者如果有人知道更好的方法来实现我正在做的事情，你的想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:35:28.453

由于您的 WHERE 子句，它只会返回在 PAYMETHODS_COUNTRIES 中有记录的行，因为您说 paymethod 必须 = 10。添加一个 OR 让它也为空：

```
SELECT country.id AS countryid,
   country.name AS countryname,
   paymethods_countries.id AS methodid
FROM country 
LEFT JOIN `paymethods_countries` 
   ON country.id = paymethods_countries.country
WHERE paymethods_countries.paymethod = 10
   OR paymethods_countries.paymethod IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T04:39:17.400

While the other answer here will produce the desired result, semantically it is more correct to move the condition from the WHERE clause to the ON clause:

```
SELECT country.id AS countryid,
    country.name AS countryname,
    paymethods_countries.id AS methodid
FROM country 
LEFT JOIN `paymethods_countries` 
   ON country.id = paymethods_countries.country and paymethods_countries.paymethod = 10 
```

This eliminates the need to add the extra OR condition in the WHERE clause.

# rest - 每个部署以编程方式配置 JAX-RS 基本 URI

> ID：13338397
> 
> 赞同：0
> 
> 时间：2012-11-12T04:28:15.267
> 
> 标签：rest, jax-rs, cdi, resteasy

我尝试使用 CDI 扩展在运行时发现 JAX-RS 资源，并在 Java SE 环境中的不同基本 URI 下自动发布它们。如果可能，应用程序不需要扩展`javax.ws.rs.core.Application`自己。

我已经阅读了 RestEasy 文档和 javadoc，但没有找到任何明显的方法来`@ApplicationPath`在运行时修改。

我正在探索的一个想法是尝试以编程方式生成`javax.ws.rs.core.Application`和设置`@ApplicationPath`基本 URI，可能通过使用 AnnotatedType CDI 扩展，并将其发布为 * org.jboss.resteasy.spi.ResteasyDeployment`。

有没有其他/更好的方法来做到这一点？

编辑：

尝试 CDI 扩展事件`ProcessAnnotatedType`来更改`@javax.ws.rs.Path`JAX-RS 资源。

```
<X> void process(@Observes ProcessAnnotatedType<X> pat) {
  if (!pat.getAnnotatedType().isAnnotationPresent(javax.ws.rs.Path.class)) {
    return;
  }
  final AnnotatedType<X> org = pat.getAnnotatedType();
  AnnotatedType<X> wrapped = new AnnotatedType<X>() {
    @Override
    public <T extends Annotation> T getAnnotation(final Class<T> annotation) {
    if (javax.ws.rs.Path.class.equals(annotation)) {
      class PathLiteral extends AnnotationLiteral<javax.ws.rs.Path> implements javax.ws.rs.Path {
        @Override
        public String value() {
          return "change_me/" + (javax.ws.rs.Path) org.getAnnotation(annotation);
        }
      }
      return (T) new PathLiteral();
    } else {
      return org.getAnnotation(annotation);
    }
  }
  pat.setAnnotatedType(wrapped);
} 
```

...然后在引导之后，使用构建 bean`javax.enterprise.inject.spi.BeanManager`期望以下代码打印“change_me/....”

```
Set<Bean<?>> beans = beanManager.getBeans(jaxrsClass);
for (Bean<?> bean : beans) {
  CreationalContext cc = bm.createCreationalContext(bean);
  Object jaxrs = bean.create(cc);
  Path p = jaxrs.getClass().getAnnotation(Path.class);
  System.out.println(p.value());
} 
```

...但这不起作用。`javax.ws.rs.Path`对于 JAX-RS 资源 'jaxrsClass' 保持不变。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T05:53:09.743

我怀疑这是否可以以可靠的方式完成。这可能都归结为首先发生的事情：CDI 引导程序或 JAX-RS，当然在将来或在其他应用程序服务器中，它们都可以并行完成。

这当然是一个很酷的主意。他们在 RestEasy 论坛上说了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T08:31:30.773

我们已经在使用这种方法。

我们正在使用该功能来使用子资源定位器并利用 guice 的力量。

在启动时，我们正在扫描类路径以查找所有使用 @Path 注释的资源。之后，我们在 Names/@Named 的帮助下提取路径并绑定资源。因此，以后可以借助名称来注入资源。

```
bind(..).annotatedWith(Names.named("path")).to(..) 
```

下一步是您需要一个带有子资源定位器的资源。

```
@Path("{name}")
public Object find(@PathParam("name") name){
    return injector.getInstance(..);
} 
```

您可以使用这种方法在运行时绑定它们，也可以更改原始注释路径。

# android - 按钮的 setOnClickListener

> ID：13338398
> 
> 赞同：1
> 
> 时间：2012-11-12T04:29:03.010
> 
> 标签：android, buttonclick

刚开始使用 Android 开发，我不明白为什么这不起作用。这是我得到的错误（在最后一行）：

> View 类型中的方法 setOnClickListener(View.OnClickListener) 不适用于参数 (MainActivity)

这是代码。看起来很简单，但我不明白问题是什么。任何人都可以帮忙吗？谢谢！

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_myActivity);

        View continue = findViewById(R.id.ContinueBtn);
        continue.setOnClickListener(this);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T04:32:11.577

试试这个。

```
public class MainActivity extends Activity implements OnClickListener 
```

当您通过时`this object into setOnClickListener`，您需要实施`OnClickListenere`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:32:31.083

你必须这样做

```
public class MainActivity extends Activity implements OnClickListener {
   /// code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T04:32:53.737

首先将其更改`continue`为其他名称，因为它是您不能将关键字作为变量名的关键字

为您实现 OnClickListener`Mainactivity`

```
Button continuea = (Button)findViewById(R.id.ContinueBtn); 
```

# arrays - 在创建数组时使用 OpenMP 时出现分段错误

> ID：13338400
> 
> 赞同：3
> 
> 时间：2012-11-12T04:29:48.830
> 
> 标签：arrays, c, multithreading, parallel-processing, openmp

访问 for 循环内的数组时出现分段错误。我想要做的是生成 DNA 字符串的所有子序列。

当我在 for 中创建数组时发生了这种情况。看了一会，发现openmp是限制栈大小的，所以改用堆会更安全。所以我将代码更改为使用malloc，但问题仍然存在。

这是完整的代码：

```
#include <limits.h>
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <omp.h>

#define DNA_SIZE 26 
#define DNA "AGTC"

static char** powerset(int argc, char* argv)
{
    unsigned int i, j, bits, i_max = 1U << argc;

    if (argc >= sizeof(i) * CHAR_BIT) {
        fprintf(stderr, "Error: set too large\n");
        exit(1);
    }
    omp_set_num_threads(2);
    char** subsequences = malloc(i_max*sizeof(char*));

    #pragma omp parallel for shared(subsequences, argv) 
    for (i = 0; i < i_max ; ++i) {
        //printf("{");
        int characters = 0;
        for (bits=i; bits ; bits>>=1)
            if (bits & 1)
                ++characters;

        //This is the line where the error is happening. 
        char *ss = malloc(characters+1 * sizeof(char)*16);//the *16 is just to save the cache lin       

        int ssindex = 0;

        for (bits = i, j=0; bits; bits >>= 1, ++j) {
            if (bits & 1) {
                //char a = argv[j];
                ss[ssindex++] = argv[j] ;
            } 
        }
        ss[ssindex] = '\0';
        subsequences[i] = ss;       
    }
    return subsequences;
}

char* getdna()
{
    int i;

    char *dna = (char *)malloc((DNA_SIZE+1) * sizeof(char));

    for(i = 0; i < DNA_SIZE; i++)
    {
        int randomDNA = rand() % 4;
        dna[i] = DNA[randomDNA];
    }

    dna[DNA_SIZE] = '\0';

    return dna;
}

void printResult(char** ss, int size)
{
    //PRINTING THE SUBSEQUENCES
    printf("SUBSEQUENCES FOUND:\r\n");
    int i;
    for(i = 0; i < size; i++)
    {
        printf("%i.\t{ %s } \r\n",i+1 , ss[i]);
        free(ss[i]);
    }
    free(ss);
}

int main(int argc, char* argv[])
{
    srand(time(NULL));
    double starttime, stoptime;
    starttime = omp_get_wtime();
    char* a = getdna();
    printf("%s\r\n", a);
    int size = pow(2, DNA_SIZE);
    printf("number of subsequences: %i\r\n", size);

    char** subsequences = powerset(DNA_SIZE, a);    
    //todo: make it optional printing to the stdout or saving to a file
    //printResult(subsequences, size);
    stoptime = omp_get_wtime();

    printf("Tempo de execucao: %3.2f segundos\n\n", stoptime-starttime);
    printf("Numero de sequencias geradas: %i\n\n", size);
    free(a);
    return 0;
} 
```

我还尝试使 malloc 行变得至关重要，`#pragma omp critical`但没有帮助。我也尝试使用 -mstackrealign 进行编译，但它也不起作用。

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T05:52:19.187

您应该使用更有效的线程安全内存管理。

应用程序可以在编译器生成的代码中显式或隐式地使用`malloc()`动态`free()`/可分配数组、矢量化内在函数等。

线程安全`malloc()`且`free()`在某些`libc`实现中携带由内部锁定引起的**高同步**开销。存在用于多线程应用程序的更快的分配器。例如，在 Solaris 上，多线程应用程序应该与“MT-hot”分配器链接`mtmalloc`，（*即*链接`-lmtmalloc`到使用`mtmalloc`而不是默认的 libc 分配器）。`glibc`，用于 Linux 和一些具有 GNU 用户空间的 OpenSolaris 和 FreeBSD 发行版，使用修改后的`ptmalloc2`分配器，它基于 Doug Lea 的`dlmalloc`. 它使用多个内存区域来实现接近无锁的行为。它还可以配置为使用每线程领域，并且某些发行版（尤其是 RHEL 6 及其衍生版本）启用了该功能。

```
static char** powerset(int argc, char* argv)
{
    int i, j, bits, i_max = 1U << argc;

    if (argc >= sizeof(i) * CHAR_BIT) {
        fprintf(stderr, "Error: set too large\n");
        exit(1);
    }
    omp_set_num_threads(2);

    char** subsequences = malloc(i_max*sizeof(char*));

    int characters = 0;
    for (i = 0; i < i_max ; ++i)
    {
         for (bits=i; bits ; bits>>=1)
            if (bits & 1)
                ++characters;

        subsequences[i] = malloc(characters+1 * sizeof(char)*16);
        characters = 0;
    }

    #pragma omp parallel for shared(subsequences, argv) private(j,bits)
    for (i = 0; i < i_max; ++i)
    {     

        int ssindex = 0;

        for (bits = i, j=0; bits; bits >>= 1, ++j) {
            if (bits & 1) {
                subsequences[i][ssindex++] = argv[j] ;
            } 
        }
       subsequences[i][ssindex] = '\0';
    }

    return subsequences;
} 
```

我在并行区域之前创建（并分配）所需的数据，然后进行剩余的计算。在 24 核机器上运行 12 线程的上述版本采用“Tempo de execucao: 9.44 segundos”。

但是，当我尝试并行化以下代码时：

```
 #pragma omp parallel for shared(subsequences) private(bits,characters)
    for (i = 0; i < i_max ; ++i)
            {
                 for (bits=i; bits ; bits>>=1)
                    if (bits & 1)
                        ++characters;

                subsequences[i] = malloc(characters+1 * sizeof(char)*16);
                characters = 0;
            } 
```

它需要“执行速度：10.19 秒”

如您所见`malloc`，并行调用会导致时间变慢。

最终，您会遇到问题，即每个 sub-malloc 都在尝试分配`(characters+1*DNA_SIZE*sizeof(char))`而不是`((characters+1)*DNA_SIZE*sizeof(char))`，如果我了解您要避免的情况，则在并行部分中不需要乘以缓存行大小的因子。

这段代码似乎也存在一些问题：

```
for (bits = i, j=0; bits; bits >>= 1, ++j) {
    if (bits & 1) {
        //char a = argv[j];
        ss[ssindex++] = argv[j] ;
    }
} 
```

使用此代码，`j`有时会命中`DNA_SIZE`or `DNA_SIZE+1`，从而导致读取`argv[j]`超出数组末尾。（此外，在此函数中使用`argc`and`argv`作为参数的名称有点令人困惑。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-12T05:23:42.017

问题出在`dna[DNA_SIZE] = '\0';`. 到目前为止，您已经为 26 个字符（例如）分配了内存，并且您正在尝试访问第 27 个字符。永远记住数组索引从`0`.

# .net - StreamReader.ReadToEnd() 使用什么字符编码？

> ID：13338404
> 
> 赞同：6
> 
> 时间：2012-11-12T04:30:24.647
> 
> 标签：.net, vb.net, encoding, utf-8, streamreader

*   使用什么字符编码`StreamReader.ReadToEnd()`？
*   下面使用 (b) 而不是 (a) 的原因是什么？
*   如果使用（a）而不是（b），它们是否有成为字符编码问题的风险？
*   还有比（a）和（b）更好的方法吗？

**（一个）**

```
Dim strWebResponse As String
Dim Request As HttpWebRequest = WebRequest.Create(Url)
Using Response As WebResponse = smsRequest.GetResponse()
    Using reader As StreamReader = New StreamReader(Response.GetResponseStream())
        strWebResponse = reader.ReadToEnd()
    End Using
End Using 
```

**(二)**

```
Dim encoding As New UTF8Encoding()
Dim strWebResponse As String
Dim Request As HttpWebRequest = WebRequest.Create(Url)
Using Response As WebResponse = Request.GetResponse()
    Dim responseBuffer(Response.ContentLength - 1) As Byte
    Response.GetResponseStream().Read(responseBuffer, 0, Response.ContentLength - 1)
    strWebResponse = encoding.GetString(responseBuffer)
End Using 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-12T04:44:55.530

使用的标准编码`StreamReader`是~~[Encoding.Default](http://msdn.microsoft.com/en-us/library/system.text.encoding.default.aspx)，它会因机器而异，具体取决于您的 Windows 版本和您设置的区域设置。~~ `Encoding.UTF8`.

我很难记住默认值是什么，所以我更喜欢使用`StreamReader`让我指定编码的构造函数。例如：

```
Using reader As StreamReader = New StreamReader(Response.GetResponseStream(), Encoding.UTF8) 
```

有关更多信息，请参阅[构造函数文档](http://msdn.microsoft.com/en-us/library/ms143456.aspx)。

如果您在示例 a 中使用该构造函数，则结果将与示例 b 相同。

你应该使用 UTF-8 吗？这取决于您正在下载的页面。如果您下载的页面是用 UTF-8 编码的，那么，是的，您应该使用 UTF-8。如果 HTTP 标头中没有定义字符集，则 UTF-8 应该是默认值。但是您需要检查`Content-Type`标题以确定页面是否使用其他编码。例如，`Content-Type`标题可能是：

```
 application/xml; charset=ISO-8859-2 
```

您必须检查 的[ContentType](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.contenttype.aspx)属性`HttpWebResponse`，检查是否有`charset`字段，并根据该字段正确设置编码。

或者，只使用 UTF-8 并希望获得最好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T12:02:34.017

I found a solution, It's not pretty but it works.
First you'll have to set your StreamReader to DetectEncoding as true,
Then you put some special character on your page.

> StreamReader reader = new StreamReader(responseStream, System.Text.Encoding.Default, true);
> 
> <%@ Page Title="FTP - Verificação" Language="C#"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T04:33:33.200

是的 b 很好，因为`UTF-8 will work with any ASCII document`
UTF8 是`Unicode encoding type`.
更重要的是它`backwards compatible with ASCII`，&`standard default for XML and HTML`

# c - Islower 功能故障

> ID：13338405
> 
> 赞同：-1
> 
> 时间：2012-11-12T04:30:29.040
> 
> 标签：c, function, lowercase, caesar-cipher, cs50

我正在上 CS50x 课程，但我遇到了一个小故障。我问他们发生了什么事，没有人知道发生了什么事。

每当我尝试打印小写 f 时，它总是显示为 ?。尝试将 23 作为参数和`abcdefghijklmnopqrstuvwxyz`输入。搞砸了 这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <cs50.h>
#include <string.h>
#include <ctype.h>

int main (int argc, string argv[]){
  if(argc !=2){
    return 1;
  }

  string x = GetString();
  int key = atoi(argv[1]);

  for(int a = 0, n = strlen(x); a < n; a++){
    char i = key + x[a];

    if(islower(x[a])){
      if(i > 122){
        i = (i-122) + 96;
      }
    }
    if(isupper(x[a])){
      if(i > 90){
          i = (i-90) + 64;
      }
    }
    printf("%c", i);
  }

  printf("\n");
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T04:39:52.377

我怀疑这是因为您的`char i`默认设置为`signed`. 当您添加`23`到小写字母时，上面的任何内容`104`(being `127-23`) 都会环绕成负数。查看您的代码，它将保持否定状态，因为它未通过后续测试并且没有被修改。

通常最好使用 进行`char`算术运算`int`，然后转换回`char`... 但您可能可以通过使用`unsigned char`.

# asp.net-mvc-4 - WebApi 和 MVC 4：GetById 和单独项目中的服务

> ID：13338406
> 
> 赞同：1
> 
> 时间：2012-11-12T04:30:31.070
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我正在使用 webapi，MVC 4 项目。（使用存储库模式和工作单元）我有两个问题

1）WebApi的GetById应该返回实体还是HttpResponseMessage？如果是HttpResponseMessage，那么应该是……

```
[System.Web.Http.HttpGet]
public HttpResponseMessage Get(int id)
{
    var car = Uow.Cars.GetById(id);
    return car == null ? Request.CreateResponse(HttpStatusCode.OK, car) : Request.CreateResponse(HttpStatusCode.NotFound,);
} 
```

或者

```
[System.Web.Http.HttpGet]
public HttpResponseMessage Get(int id)
{
    var car= Uow.Cars.GetById(id);
    if (car!= null) {
        return car;
    }
    throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.NotFound));
} 
```

我想关注 RESTfull 的回复。

2) 将 webapi 服务与 UI 分开是否合乎逻辑？我的意思是在一个 webapi 项目中，具有基本 ApiController 和 CRUD http 操作的控制器，因此可以直接从任何地方/任何设备调用它们，然后另一个 webapi/MVC4 项目将调用 webapi 项目的服务？

我之所以问这个问题，是因为在同一个控制器中，服务和返回 View 的处理听起来像是将服务耦合到将使用它的客户端。

例如：从此（在同一个 webapi 控制器中）：

```
[System.Web.Http.HttpGet]
public HttpResponseMessage Get(int id)
{
    var car = Uow.Cars.GetById(id);
    return car!= null ? Request.CreateResponse(HttpStatusCode.OK, car) : Request.CreateResponse(HttpStatusCode.NotFound,);
}

public ViewResult Details(long id)
{
    return View(Get(id));
} 
```

去这个：

```
public ViewResult Details(long id)
{
    return View(webapiService.Cars.Get(id));
} 
```

在服务中实现 Get。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T12:09:33.130

您可以使用`HttpResponseMessage`or 实体`Car`作为返回类型。如果您使用`HttpResponseMessage`，您将在创建响应时对自定义某些 HTTP 属性进行更多控制。

当操作创建资源时，使用`HttpResponseMessage`作为返回类型为您提供了更多灵活的选项来设置状态代码 (201) 和可以访问创建的资源的位置。有关更多信息，请参阅此[帖子](http://prideparrot.com/blog/archive/2012/3/creating_a_rest_service_using_asp_net_web_api)。

REST 不关心你使用哪种方式，它关心的是当调用者请求资源时，服务器应该以调用者可以接受的格式返回资源，并带有适当的状态码（如果存在则为 200，否则为 404）。

如果确实可以选择服务可以从不同的客户端使用，您可以将 WebAPI 控制器移动到单独的项目中，否则请避免这样做。一旦您将 WebAPI 控制器移动到一个单独的项目中，那么当您尝试从 MVC 项目中的 javascript 使用它时，您将面临跨域问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:16:21.250

第 1 点：在 Web API 的情况下从操作返回实体是合乎逻辑的，但是我们无法控制 HttpResponseMessage 属性（如 HttpStatusCode）。除了返回实体始终是一种更清洁的方法。我们可以在各自的过滤器中控制序列化、格式化等来完成我们的工作。但是您永远不能选择返回 car/HttpResponseMessage，因为编译器不会让您编译返回类型为 HttpResponseMessage 且返回类型为 Car 的方法。

第 2 点：为视图和休息调用使用单独的控制器是个好主意。我建议让控制器具有相同的名称但在不同的命名空间中，然后分别路由处理 http 调用（但在其余调用之前添加“/api/”。在同一控制器中对 ViewResult 和 HttpResponseMessage/Car 进行不同的操作是一种选择也但没有那么干净和独立。

# python - Python 定时器回调方法

> ID：13338410
> 
> 赞同：9
> 
> 时间：2012-11-12T04:31:50.173
> 
> 标签：python

```
from threading import Timer

class test_timer():
    def __init__(self):
        self.awesum="hh"
        self.timer = Timer(1,self.say_hello,args=["WOW"])
    def say_hello(self,message):
        self.awesum=message
        print 'HIHIHIIHIH'
        print message
        raise Exception("hi")

if __name__ == '__main__':
    print 'Got to main'
    x=test_timer() 
```

当我运行上面的代码时，我的回调方法永远不会被触发。我一直试图解决这个问题好几个小时，但无法弄清楚>.<

要测试，计时器。我运行此代码并检查 x.awesum 是否为“WOW”

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-12T04:33:14.497

你永远不会启动计时器。你需要：

```
self.timer.start() 
```

# objective-c - 越狱的iOS从后台应用截图

> ID：13338416
> 
> 赞同：2
> 
> 时间：2012-11-12T04:32:58.620
> 
> 标签：objective-c, ios, jailbreak

我正在为自己构建一个实用程序应用程序，它可以在该实用程序在后台运行时截取前台运行的任何内容。该实用程序将在越狱设备上运行，因此它可以访问私有 API，而不仅限于沙箱。由于实用程序应用程序在后台运行（作为守护程序或使用后台程序），我如何访问正在显示的屏幕以生成屏幕截图？

我想要这个的原因是因为我想以编程方式/远程截取屏幕截图。该实用程序将截取屏幕截图并上传到我的本地服务器。我将其用作内部测试工具的一部分。

非常感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:59:05.490

您应该能够使用[`UICreateScreenImage()`](http://iphonedevwiki.net/index.php/UIImage#UIGetScreenImage). 这会给你一个 CGImageRef，你可以用`[UIImage imageWithCGImage:screenshot]`. 然后，您可以将其上传到您的服务器并使用`CGImageRelease(screenshot)`.

# jquery - 如何使用 jquery uploadify 插件将文件控制 ID 传递到服务器端

> ID：13338418
> 
> 赞同：0
> 
> 时间：2012-11-12T04:33:16.020
> 
> 标签：jquery, asp.net, asp.net-mvc, uploadify

如何使用 jquery uploadify 插件将文件控制 ID 传递到服务器端。

```
 $('#myFileControl').uploadify({
        'swf': 'uploadify-v3.1/uploadify.swf',
        'uploader': 'uplodify.ashx',
        'buttonImage': 'uploadify-v3.1/choose.png',
        'method': 'post',
        'formData': { 'icontype': 'notSet','fileControlID':$(this).attr("id")},//pass id
        'onUploadStart': function (file) {
            $('#myFileControl').uploadify('settings', 'formData', { 'icontype': $("#icontype").val() });
        },
        'width': 129,
        'height': 30,
        'sizeLimit': 5120000,
        'fileTypeExts': '*.jpg;*.png;*.gif',
        'fileTypeDesc': 'Web Image Files (.JPG, .PNG, .GIF)',
        'auto': false
    });

<input type="file" name="myfile" id="myFileControl"> 
```

服务器端获取“fileControlID”值始终为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:12:31.787

您可以在同一个控件中添加 runat="server" ，它将成为服务器控件。

```
<input type="file" runat="server" name="myfile" id="myFileControl"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:54:20.603

```
<body>
<form id="form1" runat="server">
<div>
    <input type="text" id="a" name="a" />
    <input type="file" name="myfile" id="myFileId" class="bbbbb">
    <input type="file" name="bbb" id="aaa" class="bbbbb">
    <input type="button" id="c" value="qqq" onclick="checkImport()" />
</div>
</form>
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="uploadify-v3.1/jquery.uploadify-3.1.js"></script>
<script type="text/javascript">
    $(function () {
        $('.bbbbb').each(function () {
            var $iconUpload = $(this);
            $iconUpload.uploadify({
                'swf': 'uploadify-v3.1/uploadify.swf',
                'uploader': 'uplodify.ashx',
                'buttonImage': 'uploadify-v3.1/choose.png',
                'method': 'post',
                'formData': { 'icontype': 'notSet', 'fileID': $iconUpload.attr("id") },
                'onUploadStart': function (file) {
                    $iconUpload.uploadify('settings', 'formData', { 'icontype': $("#a").val() });
                },
                'width': 129,
                'height': 30,
                'sizeLimit': 5120000,
                'fileTypeExts': '*.jpg;*.png;*.gif',
                'fileTypeDesc': 'Web Image Files (.JPG, .PNG, .GIF)',
                'auto': false
            });
        });

    });
    function checkImport() {
        $('#myFileId,#aaa').uploadify('upload');
        // $('#myFileId').uploadifyUpload();
        return true;

    }

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T04:59:00.277

你`myFileControl`不是一个asp.net服务器控件。所以你不会直接找到它。

但是，您可以像这样接收您的文件：

```
 HttpPostedFile fileToUpload = context.Request.Files["myFileControl"];
    string pathToSave = HttpContext.Current.Server.MapPath("~/Files/")
                        + fileToUpload.FileName;
    fileToUpload.SaveAs(pathToSave); 
```

# java - Java多维数组/打印空值

> ID：13338422
> 
> 赞同：-1
> 
> 时间：2012-11-12T04:33:24.350
> 
> 标签：java

这是来自一个 10 行 4 列的数组。如何获得 if 以防止空值打印到屏幕

```
 for(int j = 0; j < calculation[i].length; j++)
        if (calculation[i] != null)<-------- this does nothing, however if I change it to == null nothing prints to screen
      System.out.print(calculation[i][j] + " \t");
      System.out.print("\n"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T04:37:25.197

这将为您打印除空值之外的整个数组。

```
 for(int i = 0; i < calculation.length; i++)
    {
      for(int j = 0; j < calculation[i].length; j++)
      {
        if(calculation[i][j] != null)
           System.out.println(calculation[i][j] + "\t");
      }
      System.out.println("");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:37:28.137

`calculation[i]`可能不是 null 但`calculation[i][j]`可能是。

将您的代码更改为：

```
if (calculation[i][j] != null) 
      {
   //Your code.
      } 
```

# google-maps - 查看本地文件时，MS Access WebBrowser 控件中禁用了 Javascript

> ID：13338424
> 
> 赞同：5
> 
> 时间：2012-11-12T04:33:45.083
> 
> 标签：google-maps, vba, ms-access

我以前看过类似的帖子，但我在网上看到的解决方案似乎都不适合我。

我正在尝试使用 WebBrowser 控件来显示使用 Google Maps JavaScript API 的本地保存的 HTML 文件，但 JavaScript 仍然被顽固地禁用。

为了测试这个问题，我使用基于[https://developers.google.com/maps/documentation/javascript/examples/map-simple](https://developers.google.com/maps/documentation/javascript/examples/map-simple)的谷歌地图制作了一个简单的页面。我还添加了一个按钮来直接测试 JavaScript 是否正常运行

c:\map-test.html 在 Firefox 和 IE 中都能完美运行。

```
<!DOCTYPE html>
<html>
<head>
    <title>Google Maps JavaScript API v3 Example: Map Simple</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
        html, body, #map_canvas {
           margin: 0;
           padding: 0;
           height: 100%;
        }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
<script>
      var map;
      function initialize() {
        var mapOptions = {
          zoom: 8,
          center: new google.maps.LatLng(-34.397, 150.644),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),
        mapOptions);
      }
      google.maps.event.addDomListener(window, 'load', initialize);
   </script>
</head> 
<body>
    <input type="button" onclick="alert('JavaScript Functioning');" value="Test JavaScript">
<div id="map_canvas"></div>
</body>
</html> 
```

然后，我使用名为 cWebBrowser 的 WebBrowser 控件创建了一个 MS Access 表单，并添加了一个加载 c:\map-test.html 的方法。Google 地图界面无法加载，测试按钮已失效。

```
Private Sub Form_Current()
     Me.cWebBrowser.ControlSource = "=(""file:///C:/map-test.html"")"  
End Sub 
```

接下来，我尝试了 map-simple 的在线版本。JavaScript 按预期工作并加载了谷歌地图界面

```
Private Sub Form_Current()
     Me.cWebBrowser.ControlSource = "=(""https://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple"")"
End Sub 
```

我一直试图解决这个问题很长一段时间没有成功。

在这篇文章[http://support.microsoft.com/?kbid=315933](http://support.microsoft.com/?kbid=315933)之后，我在 IE 安全设​​置中启用了我的电脑区域

在所有区域中，我启用了以下功能：

*   允许编写 Microsoft Web 浏览器控件的脚本
*   活动脚本

在高级选项卡下，我启用了以下功能：

*   允许 CD 中的活动内容在我的电脑上运行
*   允许活动内容在我的电脑上的文件中运行

有人建议将 Web 标记添加到我的页面中，但这也无济于事。

我试过清除缓存。

我已经尝试更改文件名，以防清除后缓存仍然存在。

map-test.html 在 IE 和 WebBrowser 控件中下载时都可以工作，但只能在本地使用 IE 工作。除了安全设置之外，还有什么可能导致问题？是否有我缺少的安全设置？我可以做任何其他测试来诊断问题吗？

我无计可施。

环境：
Windows 7 64bit
Access 2010
IE 9

附言

问题继续变得更奇怪

今天，我尝试创建一个非常简单的 JavaScript 页面，以确保不是 Google 地图代码导致了问题。

```
<!DOCTYPE html>
<html>
    <body>
        <input type="button" onclick="alert('JavaScript Functioning');" value="Test JavaScript">
    </body>
</html> 
```

起初它奏效了，我很高兴。接下来，我尝试了 Google Maps 测试页面，它也很有效！所以，我尝试了我的全功能地图（在 IE 和 Firefox 中工作），它从我的数据库应用程序加载 JSON 输出，结果一切都付诸东流，谷歌地图代码在内部导致了许多错误（不幸的是，我没有记录错误） .

现在，我回到了第一方；所有页面都不允许编写脚本，包括上面的 5 行？！？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:56:31.063

首先，看看[增强保护模式和本地文件](http://blogs.msdn.com/b/ieinternals/archive/2012/06/20/loading-local-files-in-enhanced-protected-mode-in-internet-explorer-10.aspx)和[了解本地机器区域锁定](http://blogs.msdn.com/b/ieinternals/archive/2011/03/23/understanding-local-machine-zone-lockdown-restricted-this-webpage-from-running-scripts-or-activex-controls.aspx)。

### 什么在我的机器上工作

我已经使用您完全相同的环境测试了不同的配置，并且它们都可以正常工作（请参阅下面的警告）。

*   创建一个新表单，然后向其中添加一个 webbrowser 控件：

*   将其设置`ControlSource`为 URL 作品：

    ![在此处输入图像描述](../Images/7c557cec65044ff15e9b80e2bb4fe081.png)

*   下载 HTML 并保存到我的桌面，然后在`ControlSource`工程中引用本地文件：

    ![在此处输入图像描述](../Images/2ef243d3c9719b1fda53f5def2691916.png)

*   `ControlSource`添加了一个按钮并在其`OnClick`事件中设置 Webbrowser ：

    ```
    Private Sub Command1_Click()
        WebBrowser0.ControlSource = "=""C:\Users\Renaud\Desktop\map-simple.htm"""
    End Sub 
    ```

![在此处输入图像描述](../Images/96c744b37d2fe727c41140bb5e7a8e93.png) ![在此处输入图像描述](../Images/d12b3aa95e6b1689630799ca0dbb49e2.png) ![在此处输入图像描述](../Images/6e18dd632f04755489d35dd37e8566a6.png)

### 解决方案

从我上面提到的有关本地网页安全的文章的链接中，我尝试了一些事情：

*   如果文件保存在用户的临时文件夹中，它将正确加载。
    试试看，输入`%TEMP%`资源管理器，它应该带你到`C:\Users\username\AppData\Local\Temp`或类似的东西。
    将 html 文件保存在那里并尝试从 Access 加载它，例如使用上面表单上的按钮：

    ```
    Private Sub Command1_Click()
       WebBrowser0.ControlSource = "=""C:\Users\Renaud\AppData\Local\Temp\map-simple.htm"""
    End Sub 
    ```

*   或者，为了让 IE 允许您打开文件，您需要降低其完整性级别，以便在 IE 打开它时强制它在 Internet 区域中运行（从而使其正常工作）。您可以通过打开命令提示符（以管理员身份）检查文件的当前设置：

    ![ICACLS](../Images/b9a98eaf180395d1e3590c715beb84a9.png)

    现在，我们可以设置文件完整性并再次检查设置：

    ![ICACLS](../Images/3d0923350629c196636521cf97515a6f.png)

    现在您应该可以从 Access 和 IE 打开文件了。

    请注意，当您将 ACL 从 NTFS 系统移动到另一个 NTFS 系统时，ACL 会随文件一起移动，但是如果您将它们复制到 USB 闪存驱动器或另一个格式化为 FAT 的系统，它们可能会丢失，因此它们可能需要重新- 如果它们丢失，则应用于目标机器。

*   正如 Remou 提到的，我尝试将[Web 标记](http://msdn.microsoft.com/en-us/library/ms537628(v=vs.85).aspx)添加到文件本身，但它对我不起作用，文件不会加载。
    这是我尝试过的：

    ```
    <!doctype html> 
    <!-- saved from url=(0014)about:internet -->
    <html>
      <head>
        <title>Google Maps JavaScript API v3 Example: Map Simple</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
        <meta charset="utf-8">
        .... 
    ```

*   应该起作用的另一件事是尝试从本地 http 服务器提供文件，例如[Mongoose](http://code.google.com/p/mongoose/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T12:11:41.117

**什么在我的机器上工作**

纯粹是为了未来的读者。

使用 Windows 7 和 Access 2010 以及工具栏中的 Webbrowser 控件，而不是其他 ActiveX 控件；使用 OP 中的代码（如下）并添加[Web 标记（MOTW）](http://msdn.microsoft.com/en-us/library/ms537628%28v=vs.85%29.aspx)；使用保存到桌面的 *.html 文档；将 webbrowser 控制源设置为`="C:\Users\<user>\Desktop\java.htm"`.

```
<!DOCTYPE html>
<!-- saved from url=(0023)http://www.contoso.com/ -->
<html>
<head>
    <title>Google Maps JavaScript API v3 Example: Map Simple</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
        html, body, #map_canvas {
           margin: 0;
           padding: 0;
           height: 100%;
        }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
<script>
      var map;
      function initialize() {
        var mapOptions = {
          zoom: 8,
          center: new google.maps.LatLng(-34.397, 150.644),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),
        mapOptions);
      }
      google.maps.event.addDomListener(window, 'load', initialize);
   </script>
</head> 
<body>
    <input type="button" onclick="alert('JavaScript Functioning');" value="Test JavaScript">
<div id="map_canvas"></div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-06T17:49:31.607

我在 Access 表单上多次使用 WebBrowser 控件，其中包含本地生成的内容。

为了便携性，我不想弄乱每台计算机上的安全设置。

我的解决方案是使用 VBA 而不是 Javascript，用于本地运行的任何内容。您甚至可以将基于 VBA 的事件处理程序附加到文档元素。（使用对象浏览器探索 MSHTML 库。）

这包括使用 file:// 加载的文件以及通过导航到 about:blank 然后使用 WebBrowser.Document.Open / .Write 写入内容而构建的页面上的文件。

对于 Google 地图，您应该能够构建托管基于 Internet 的 iframe 的本地文档。安全方面，Javascript 不能在本地文档中工作，但它应该在 iframe 中工作。

...汤姆·罗宾逊

# javascript - iframe 的问题

> ID：13338427
> 
> 赞同：1
> 
> 时间：2012-11-12T04:33:49.433
> 
> 标签：javascript, html, iframe

我一直在互联网上搜索，疯狂地通过stackover流程并解决了我的一半问题，当您单击链接以加载页面的完整大小时，我正在尝试调整 iframe 的大小，我已经让它在 IE 中工作但在 FF 中什么也没有发生，它只是保持相同的高度，

适用于 IE 的代码

```
function calcHeight() {
    var the_height = 0;
    //find the height of the internal page
    if (/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)) { //test for Firefox/x.x or Firefox x.x (ignoring remaining digits);
        the_height = document.getElementById('class').contentDocument.body.offsetHeight + 140;
    }
    else {
        the_height = document.getElementById('class').contentWindow.document.body.scrollHeight + 18;
    }
    document.getElementById('class').height = the_height + "px";
} 
```

框架代码

```
 <iframe src="iframback.html" name="class" id`="class" width="100%" height="auto" scrolling="no" frameborder="0" onload="calcHeight();" allowtransparency='true'></iframe></td> 
```

任何帮助将不胜感激，我无法弄清楚这一点！这是一个指向测试页面的链接，您应该能够单击“Ohio Conceal Handgun License (CHL)”并在其旁边显示代码并让 IFRAME 像在 IE 中一样向下展开。谢谢！ [http://www.dualactiontactics.com/Update/7/Training.html](http://www.dualactiontactics.com/Update/7/Training.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T04:42:32.387

您在 iframe 中使用**id`**而不是 id，首先更改此设置

```
<iframe src="iframback.html" name="class" id`="class" width="100%" height="auto" 
scrolling="no" frameborder="0" onload="calcHeight();" allowtransparency='true'></iframe> 
```

**id`="class"**到 **id="class"**

并在 js 更改语句中

```
document.getElementById('class').height = the_height + "px"; 
```

至

```
document.getElementById('class').height = the_height; 
```

或者

```
document.getElementById('class').style.height= the_height + "px"; 
```

# ruby-on-rails-3 - 为 S3 动态生成存储桶名称

> ID：13338430
> 
> 赞同：0
> 
> 时间：2012-11-12T04:33:58.133
> 
> 标签：ruby-on-rails-3, amazon-s3, paperclip

我试图根据我的多态关联类型创建一个动态存储桶名称。

我的第一种方法是尝试这样的事情：

```
class PostImage < ActiveRecord::Base
  belongs_to :imageable, :polymorphic => true

  has_attached_file :image, :styles => { :small => "200x200>", :thumb => "50x50>" },
                            :storage => :s3, 
                            :s3_credentials => "#{Rails.root}/config/s3.yml", 
                            :path => "/:style/:id/:filename", 
                            :bucket => self.imageable_type.to_s

end 
```

如果我尝试创建一个新对象，我会收到下一个错误：

> NoMethodError：#< Class:0x007fd3fe0b15d8 的未定义方法“imageable_type”

我在 S3 文档中找到了这个：

> 存储桶：这是存储文件的 S3 存储桶的名称。请记住，存储桶在所有 Amazon S3 中必须是唯一的。如果存储桶不存在，Paperclip 将尝试创建它。桶名不会被插值。如果要在运行时确定存储桶的名称，可以将存储桶定义为 Proc。Paperclip 将调用带有附件作为唯一参数的 Proc。

问题是我不明白如何才能将我的多态关联的名称设置为存储桶的名称。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T05:40:16.467

希望它可以帮助某人，

最终解决方案基于这篇文章：[rails paperclip S3 with dynamic bucket name](https://stackoverflow.com/questions/5982976/rails-paperclip-s3-with-dynamic-bucket-name)

阅读这篇文章以更好地解释如何使用 Proc。

最终代码：

```
class PostImage < ActiveRecord::Base
  belongs_to :imageable, :polymorphic => true

  has_attached_file :image, :styles => {
                   :square=> "170x170#",
                   :rectangle=> "220x170#",
                   :large  => "600x400#" }, :storage => :s3, :s3_credentials => "#{Rails.root}/config/s3.yml",
                   :path => "/:style/:id/:filename",
                   :bucket =>  lambda { |attachment| "#{attachment.instance.imageable_type.to_s.downcase}-gallery" }

end 
```

# jquery - JSON 对象在 WCF REST POST 上具有空数组属性

> ID：13338436
> 
> 赞同：0
> 
> 时间：2012-11-12T04:35:18.197
> 
> 标签：jquery, arrays, json, wcf, rest

我正在将 JSON 对象发布到 WCF 中的 REST API。string 和 int 属性很好，但 IList 类型的属性为 null，即使它们是在 JSON 中指定的。

下面是 JSON 对象在字符串化后的样子：

```
{
    "Id":"1",
    "Name":"Group One ertqer",
    "Description":"This is group 1 estrfasd",
    "SecurityPrincipals":"[
        {
            "Id": "1",
            "DisplayName": "User One",
            "UserName": "user.one",
            "Sid": "null",
            "Fqdn": "gmd.lab" 
         } ,
        {
            "Id": "2",
            "DisplayName": "User Two",
            "UserName": "user.two",
            "Sid": "null",
            "Fqdn": "gmd.lab" 
         }
     ]",
    "SecurityPermissions":"[
        {
            "Id": "2",
            "Name": "Access Service Catalog"
        } ,
        {
            "Id": "1",
            "Name": "Access Portal"
        }
    ]"
} 
```

这是我用来发布对象的 jQuery AJAX 代码：

```
var securitygroup = {
    group: {
        Id: $("#csm-security-groupid").val(),
        Name: $("#csm-security-groupname").val(),
        Description: $('#csm-security-groupdesc').val(),
        "SecurityPrincipals[]": principals,
        "SecurityPermissions[]": permissions
    }
};

$.ajax({
    url: 'http://localhost:809/RestDataServices/RestDataService.svc/SecurityGroups/SecurityGroup',
    contentType: "application/json; charset=utf-8",
    data: JSON.stringify(securitygroup),
    dataType: 'json',
    type: 'POST',
    async: true,
    success: function (data, success, xhr) {
        alert('Group saved - ' + success);
    },
    error: function (xhr, status, error) {
        alert('Error! - ' + xhr.status + ' ' + error);
    }
}); 
```

这是 REST 操作合同：

```
[OperationContract]
[WebInvoke(Method = "POST",
    RequestFormat = WebMessageFormat.Json,
    BodyStyle = WebMessageBodyStyle.Bare,
    UriTemplate = "SecurityGroups/SecurityGroup")]
void SaveSecurityGroup(SecurityGroup group); 
```

SecurityGroup 的数据合约：

```
[DataContract]
public class SecurityGroup
{
    [DataMember]
    public int Id { get; set; }

    [DataMember]
    public string Name { get; set; }

    [DataMember]
    public string Description { get; set; }

    [DataMember]
    public IList<SecurityPermission> SecurityPermissions { get; set; }

    [DataMember]
    public IList<SecurityPrincipal> SecurityPrincipals { get; set; }

} 
```

最后，这是 REST 服务的 web.config 的相关部分：

```
 <system.serviceModel>
    <services>
      <service name="RestDataServices.RestDataService" behaviorConfiguration="DefaultBehavior">
        <endpoint address="" binding="webHttpBinding" contract="RestDataServices.IRestDataService" behaviorConfiguration="web"/>
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="DefaultBehavior">
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <directoryBrowse enabled="true"/>
    <httpProtocol>
     <customHeaders>
       <add name="Access-Control-Allow-Origin" value="*" />
     </customHeaders>
   </httpProtocol>
  </system.webServer> 
```

所以我尝试了很多不同的东西：

1) 尝试打包和解包 2) 最初数据合约具有 List<> 属性，而不是 IList<>，但显然这不起作用 3) 我已经在 StackExchange 上提出了大约十几个其他问题，但没有一个它们似乎与我的问题有关。

我宁愿不必创建自定义格式化程序...我猜我只是做错了事情，结果会很简单。

对此的任何帮助将不胜感激。我已经为此花费了大约 6 个小时，我即将放弃并将数组本身作为单独的调用发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:57:46.423

好的，答案是我需要做两件不同的事情。

1）我在我的 JSON 数组分配中添加了引号和方括号，因为我得到了 400 - 没有它们的错误请求。这是我的空数组/列表属性的来源。

```
var securitygroup = {
    group: {
        Id: $("#csm-security-groupid").val(),
        Name: $("#csm-security-groupname").val(),
        Description: $('#csm-security-groupdesc').val(),
        "SecurityPrincipals[]": principals, //bad
        "SecurityPermissions[]": permissions //bad
    }
}; 
```

2) 一旦我删除了 SecurityPrincipals 和 SecurityPermissions 属性上的 "" 和 []，我再次收到 400 - Bad Request。我注意到我的整数属性在它们周围有引号，所以我使用 parseInt 将它们强制为整数。我还强制将“null”设置为正确的 null 值。下面是 JSON 构建代码的样子，现在：

```
var principals = [];
$("li[data-type='permission']").each(function () {
    principals.push(
        {
            Id: parseInt(this.id),
            DisplayName: this.getAttribute('data-name'),
            UserName: this.getAttribute('data-username'),
            Sid: this.getAttribute('data-sid') == "null" ? null : this.getAttribute('data-sid'),
            Fqdn: this.getAttribute('data-fqdn')
        }
    );
});

//permissions for the current group
var permissions = [];
$("input[type='checkbox']").each(function () {
    if (this.getAttribute("checked") == "checked") {
        permissions.push(
            {
                Id: parseInt(this.getAttribute('data-id')),
                Name: this.getAttribute('data-name')
            }
        );
    }
});

var securitygroup = {
    group: {
        Id: parseInt($("#csm-security-groupid").val()),
        Name: $("#csm-security-groupname").val(),
        Description: $('#csm-security-groupdesc').val(),
        SecurityPrincipals: principals,
        SecurityPermissions: permissions
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:23:48.943

删除 [ 之前和 ] 之后的引号。

JSON 中没有列表（或 iList？）。

[] 表示一个数组。

参考[http://www.json.org/](http://www.json.org/)

# javascript - jQuery 冲突。获取碰撞元素？

> ID：13338438
> 
> 赞同：1
> 
> 时间：2012-11-12T04:35:40.887
> 
> 标签：javascript, jquery, collision

我使用 JQuery 碰撞库：

[jQuery 碰撞示例](http://eruciform.com/static//jquerycollision/jquery-collision-drag-collision-example.html)

我的场景：

a = 被拖动的对象。

b = 碰撞时应返回碰撞检测的对象。

*每 100 毫秒，在 « a » 的拖动事件中，我调用一个检查与 « b » 碰撞的函数

如果 « a » 与 « b » 碰撞，我可以得到库弹出的 divs 对象。但是我找不到一种简单的方法来获取碰撞的元素（« b »）。我有一个解决方法，但它有点多，所以我想直接从图书馆等缩短方法..

我怎样才能得到我的哪些元素被那些“弹出”的 div 碰撞

有什么想法或建议吗？非常感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T23:26:29.360

我刚刚发现了我的问题，它修复了我的解决方法模式。

```
//returns an array of overlaps div elements (my problem)
 var overlaps = $("#selector").collision( ".isSomething", { as: "<div/>" } ); 

//returns an array of collided elements (the solutions)
var overlaps = $("#selector").collision( ".isAVisibleTree", { relative: "body", obstacleData: "odata", as: "<div/>" } );

//my collided object
overlaps[i].data("odata"); 
```

希望能帮助到你，

马克

# syntax - 如何使球拍宏采用整数参数？

> ID：13338439
> 
> 赞同：0
> 
> 时间：2012-11-12T04:35:46.553
> 
> 标签：syntax, macros, racket

我一直在尝试为“包装”函数创建一个宏，即，如果我有一个函数可以获取一个列表并将符号 'a 用于第一个元素，它通常被定义为 lambda (l) (cons 'al)，但我想要一个宏，它将接受一个函数和一个整数表达式对列表，并通过创建一个新函数来“包装”该函数，该函数接受旧函数的一些参数并根据对获取其余部分，使用整数作为位置和表达式作为值来给函数。像这样的东西：

```
(wrap list (0 'blah) (2 'bloo) (4 'blee)) 
```

应扩展为：

```
(lambda (a1 a2 . rest)
  (apply list 'blah a1 'bloo a2 'blee rest)) 
```

问题是，我不知道如何让宏找到对中整数的值，它只知道它是一个语法对象。我对宏很陌生，这应该很简单，我只是在文档方面遇到了麻烦，除了关于宏的简单教程之外，我在网上找不到任何信息。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T05:23:12.047

这似乎是一个疯狂的宏，特别是当[SRFI 26](http://srfi.schemers.org/srfi-26/srfi-26.html)使用起来更加直观时。而不是`(wrap list (0 'blah) (2 'bloo) (4 'blee))`，您可以使用：

```
(cut list 'blah <> 'bloo <> 'blee <...>) 
```

这肯定更容易阅读。

* * *

如果你*真的*必须写这样一个宏，这里有一种方法，将 of 的用法转换为 的`wrap`等价用法`cut`：

```
(require (for-syntax syntax/parse) srfi/26)
(define-syntax (wrap stx)
  (syntax-parse stx
    ((_ func:expr (idx:nat expr:expr) ...)
     (let* ((alist (map cons
                        (syntax->datum #'(idx ...))
                        (syntax-e #'(expr ...))))
            (upper (add1 (apply max -1 (map car alist))))
            (listfunc (lambda (i)
                        (cond ((assv i alist) => cdr)
                              (else #'<>)))))
       (with-syntax (((args ...) (build-list upper listfunc)))
         #'(cut func args ... <...>)))))) 
```

回答你的问题的关键，关于如何在给定语法对象的情况下获取整数，是使用[`syntax->datum`](http://docs.racket-lang.org/reference/stxops.html#%28def._%28%28quote._~23~25kernel%29._syntax-~3edatum%29%29)(for deep syntax-stripping) 或[`syntax-e`](http://docs.racket-lang.org/reference/stxops.html#%28def._%28%28quote._~23~25kernel%29._syntax-e%29%29)(for shallow syntax-stripping)。

* * *

（PS（致阅读本文的 Racket 专家。）我是新手`syntax-parse`，所以我相信`syntax-parse`专家可以找到更好的方法来编写上述内容。我最初将宏编写为`syntax-case`宏，然后对`syntax-parse`语法类进行了处理。就是这样。 )

# regex - Bash 案例条件

> ID：13338440
> 
> 赞同：0
> 
> 时间：2012-11-12T04:35:57.220
> 
> 标签：regex, linux, bash, shell, scripting

我正在使用类似于以下的案例陈述：

 `````
Case "$myvar" in
[aA]) {
     #dostuff
};;
Esac 
```` 

`我的目标是捕获包含 a 或 A 的输入字符串的实例，而忽略字符串的其余部分。麻烦的是，给定包含其他内容（例如 ab）的输入，我的 case 语句没有捕获到该字符串。我确定问题出在我的正则表达式实现上，但我不知道如何解决。`

 `* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T04:47:37.513

bash 中的 case 语句采用 glob，而不是正则表达式。并且 glob 匹配整个字符串。因此，要查找字母“A”的任何实例，您可以：

```
case "$myvar" in
*[aA]*) # do stuff
  ;;
esac 
`````

# java - 如何组合这两个xml文件

> ID：13338445
> 
> 赞同：-2
> 
> 时间：2012-11-12T04:36:42.353
> 
> 标签：java

文件雇员 = new File("E:five/emplo.xml"); File stud = new File("E:/one/two/student.xml"); 如何将这两个文件合并到一个文件对象中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T04:42:04.470

如果你想合并两个标准文本文件，那么你可以只使用文件写入器和文件读取器。

我假设这不是一些特定于 xml 的东西，因为我对它们没有经验。

以下是如何读取文件（没有异常处理）：

```
FileReader fr = new FileReader(file);
BufferedReader br = new BufferedReader(fr); // the only reason I use this is because I am used to line by line handling
String line;
while((line = br.readLine()) != null)
{
  // do something with each line
} 
```

您可以将每个文件读入字符串数组列表，然后使用以下命令输出：

```
FileWriter fout = new FileWriter(file, toAppend);
fout.write(msg);
fout.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:43:14.050

```
String[] filenames = new String[]{ "emplo.xml", "student.xml"};
OutputStream outputStream = new BufferedOutputStream(new FileOutputStream("merged.xml");
for (String filename : filenames) {
    InputStream inputStream = new BufferedInputStream(new FileInputStream(filename);
    org.apache.commons.io.IOUtils.copy(inputStream, outputStream);
    inputStream.close();
}
outputStream.close();<br/> 
```

或者你也可以使用`SAXParser`

# java - 是否可以在没有输入文件的 Hadoop 集群上运行 map/reduce 作业？

> ID：13338446
> 
> 赞同：4
> 
> 时间：2012-11-12T04:36:46.003
> 
> 标签：java, testing, hadoop, mapreduce

当我尝试在 Hadoop 集群上运行 map/reduce 作业而不指定任何输入文件时，我得到以下异常：

```
 java.io.IOException: No input paths specified in job 
```

好吧，我可以想象在没有输入文件的情况下运行作业的情况确实有意义。测试文件的生成就是这样。Hadoop可以做到这一点吗？如果没有，您是否有一些生成文件的经验？有没有更好的方法，然后在集群上保留一个记录的虚拟文件用作生成作业的输入文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:33:53.670

文件路径与基于 FileInputFormat 的输入（如 SequenceInputFormat 等）相关。但从 hbase、数据库读取的输入格式不会从文件中读取，因此您可以自己实现 InputFormat 并在 getSplits、RecordReader、createRecordReader 中定义自己的行为。为了检查，请查看 TextInputFormat 类的源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:28:23.040

## 我猜你正在寻找在 samll 数据集上测试你的 map-reduce，所以在这种情况下，我会推荐以下

## Map-Reduce 的单元测试将解决您的问题

如果你想从你的文件中测试你的映射器/组合器/reducer 的单行 linput，**最好**的办法是对每个文件使用 UnitTest。

***示例代码：-***
**在 java 中使用 Mocking Frame 工作可以在您的 IDE 中运行这些测试用例**

在这里我使用了 Mockito*或者 MRunit 也可以使用，这也依赖于 Mockito（Java Mocking Framework）*

* * *

* * *

```
public class BoxPlotMapperTest {
@Test
public void validOutputTextMapper() throws IOException, InterruptedException
{
    Mapper mapper=new Mapper();//Your Mapper Object 
    Text line=new Text("single line from input-file"); // single line input from file 
    Mapper.Context context=Mockito.mock(Mapper.Context.class);
    mapper.map(null, line, context);//(key=null,value=line,context)//key was not used in my code so its null 
    Mockito.verify(context).write(new Text("your expected key-output"), new Text("your expected value-output")); // 

}

@Test
public void validOutputTextReducer() throws IOException, InterruptedException
{
    Reducer reduer=new Reducer();
    final List<Text> values=new ArrayList<Text>();
    values.add(new Text("value1"));
    values.add(new Text("value2"));
    values.add(new Text("value3"));
    values.add(new Text("value4"));
    Iterable<Text> iterable=new Iterable<Text>() {

        @Override
        public Iterator<Text> iterator() {
            // TODO Auto-generated method stub
            return values.iterator();
        }
    };
    Reducer.Context context=Mockito.mock(Reducer.Context.class);
    reduer.reduce(new Text("key"),iterable, context);
    Mockito.verify(context).write(new Text("your expected key-output"), new Text("your expected value-output"));

} 
```

}

* * *

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:09:35.120

对于 MR 作业单元测试，您还可以使用[MRUnit](https://cwiki.apache.org/MRUNIT/mrunit-tutorial.html)。如果您想使用 Hadoop 生成测试数据，那么我建议您查看[Teragen](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/examples/terasort/TeraGen.html)的源代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T12:29:49.390

如果要生成测试文件，为什么首先需要使用 hadoop？您可以使用 mapreduce 步骤输入的任何类型的文件在 mapreduce 步骤外部使用特定于类型的 API 创建，甚至是 HDFS 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-06T19:39:08.280

我知道我正在复活一个旧线程，但没有选择最佳答案，所以我想我会把它扔在那里。我同意 MRUnit 对很多事情都有好处，但有时我只是想玩一些真实的数据（特别是对于我需要模拟它以使其在 MRUnit 中工作的测试）。当这是我的目标时，我创建了一个单独的小作业来测试我的想法并使用 SleepInputFormat 基本上对 Hadoop 撒谎，并说有输入，而实际上没有。旧 API 在这里提供了一个示例：[https ://svn.apache.org/repos/asf/hadoop/common/branches/branch-0.22/mapreduce/src/test/mapred/org/apache/hadoop/mapreduce/ SleepJob.java](https://svn.apache.org/repos/asf/hadoop/common/branches/branch-0.22/mapreduce/src/test/mapred/org/apache/hadoop/mapreduce/SleepJob.java)，我在这里将输入格式转换为新的 API：[https](https://gist.github.com/keeganwitt/6053872) ://gist.github.com/keeganwitt/6053872 。

# asp.net - 在asp.net中为treeview的检查值编写xml文件

> ID：13338447
> 
> 赞同：0
> 
> 时间：2012-11-12T04:36:48.460
> 
> 标签：asp.net, xml, treeview

```
<form id="form1" runat="server">
<div>
    <asp:TreeView ID="TreeView1" runat="server" ShowCheckBoxes="All" ShowLines="true" ShowExpandCollapse="true">

<Nodes>
<asp:TreeNode Value="Child1" Expanded="True" Text="Server1">
  <asp:TreeNode Value="Grandchild1" Text="MBS1" />
  <asp:TreeNode Value="Grandchild2" Text="MBS2" />
</asp:TreeNode>
<asp:TreeNode Value="Child2" Text="Server2" />
<asp:TreeNode Value="Child3" Expanded="True" Text="MBS3">
  <asp:TreeNode Value="Grandchild1" Text="MBS4" />
</asp:TreeNode>
 </Nodes>
</asp:TreeView>
</div>
<p>
    <asp:Button ID="btnCreateXML" runat="server" onclick="btnCreateXML_Click" 
        Text="Create XML" />
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
</p>
</form> 
```

代码背后：

```
using System.Xml;

 public partial class _Default : System.Web.UI.Page 
{
protected void Page_Load(object sender, EventArgs e)
{
    TreeView1.Attributes.Add("onclick", "javascript: OnTreeClick();");
}
protected void btnCreateXML_Click(object sender, EventArgs e)
{
    XmlDocument doc = new XmlDocument();
    doc.Load(path);
    XmlNode Parent = doc.CreateElement("Parent");
    XmlNode Child = doc.CreateElement("Child");
    doc.Save(path);
    string temp;
    char[] al = new char[5];
    foreach (TreeNode node in TreeView1.CheckedNodes)
    {
        //temp = (node.Text).ToString();
        Child.InnerText = node.Text;
        Parent.AppendChild(Child);

        Response.Write(node.Text);
       // al[node] += al[node];

    }        
 }
} 
```

我确实有 asp.net TreeView 控件，当我检查节点时，我可以从 btnCreateXML 的单击事件后面的代码中获取这些检查值。我将进入 node.Text 的值，我想为它创建 XML 文件。如何实现这一点（仅适用于选定的节点）？任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:08:07.867

**.aspx 文件：**

```
<asp:TreeView ID="TreeView1" runat="server" ShowCheckBoxes="All" ShowLines="True" ExpandDepth="1">
     <Nodes>
     <asp:TreeNode Text="Entire">
          <asp:TreeNode Text="VM">
            <asp:TreeNode Text="MBS1">   
        </asp:TreeNode>
        <asp:TreeNode Text="PF1"></asp:TreeNode>
        </asp:TreeNode>

        <asp:TreeNode Text="VM2">
        <asp:TreeNode Text="MBS2"></asp:TreeNode>
        <asp:TreeNode Text="PF2"></asp:TreeNode>
        </asp:TreeNode>

    </asp:TreeNode>
    </Nodes>
    </asp:TreeView> 
```

**后面的代码：**

protected void btnCreateXML_Click(object sender, EventArgs e) { //Start writer XmlTextWriter writer = new XmlTextWriter(Server.MapPath("~/XMLFiles/" + "XMLFile" + ".xml"), System.Text.Encoding.UTF8) ; //启动 XM 文档 writer.WriteStartDocument(true); writer.Formatting = Formatting.Indented; writer.Indentation = 2; //根元素 writer.WriteStartElement("MBServerList"); 字符串温度；writer.WriteStartElement("SelectedNodedsInfo"); foreach（TreeView1.CheckedNodes 中的 TreeNode 节点）{ temp = (node.Text).ToString();

```
 if (node.Checked)
        {     
           if (node.Depth == 0)
                {
                    writer.WriteStartElement("Scanning Entire Tree");
                    writer.WriteString(node.Text);
                    writer.WriteEndElement();
                    break;   
                 }

            if (node.ChildNodes.Count > 0)
            {

              {
                    writer.WriteStartElement("Server");
                    writer.WriteString(node.Text);

                    foreach (TreeNode cnode in node.ChildNodes)
                    {

                        if (cnode.Checked)
                        {
                            writer.WriteStartElement("Store");
                            writer.WriteString(cnode.Text);
                            writer.WriteEndElement();
                        }
                    }
                    writer.WriteEndElement();
                }
            }
            else
            {
                if ((node.Depth == 1)||(node.Depth == 2) && (node.Parent.Checked == false))
                {
                    writer.WriteStartElement("Server");

                    writer.WriteString(node.Parent.Text);

                    writer.WriteStartElement("Store");
                    writer.WriteString(node.Text);
                    writer.WriteEndElement();
                    writer.WriteEndElement();
                }
            }

        }

    }
    writer.WriteEndElement();
    lblResult.Text = "XML File ceated!";

    writer.WriteEndElement();
    //End XML Document
    writer.WriteEndDocument();
    //Close writer
    writer.Close();
} 
```

更新：从树视图中获取检查值（直到深度级别 3），并为其创建 xml 文件。

# sql - 在 Oracle 中仅对字符串的一部分进行排序

> ID：13338448
> 
> 赞同：1
> 
> 时间：2012-11-12T04:36:51.120
> 
> 标签：sql, oracle, where

好的，所以我有数据库，我只需要提取其中包含 111 的某些行。

所以基本上由 db 看起来像这样：

> ```
> ------------ ------------
> |     ID     |     AB     |
>  ------------ ------------
> |     1      |   bc112    |
>  ------------ ------------
> |     2      |   cd111    |
>  ------------ ------------
> |     3      |   ac111    |
>  ------------ ------------
> |     4      |   bd121    |
>  ------------ ------------ 
> ```

我认为这条线会起作用：

```
SELECT AB
FROM THING
WHERE AB='* 111'; 
```

但由于某种原因这不起作用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:38:39.927

应该`%`代替`*`和`like`代替`=`：

```
SELECT AB
FROM THING
WHERE AB like '%111'; 
```

# android - 如何在加载器中设置文本

> ID：13338457
> 
> 赞同：0
> 
> 时间：2012-11-12T04:38:10.777
> 
> 标签：android, android-loadermanager

我使用 support-v4.jar ，并且可以很容易地显示加载器。但我想在圆圈旁边设置一些文字。我该怎么办？ ![在此处输入图像描述](../Images/fa9c04f59a16999e23dae05861cb94f6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:42:33.520

选项：

1.  在 xml 布局中放置 a`ProgressBar`和 a 。`TextView`
2.  使用`ProgressDialog`并调用`setMessage()`

# javascript - 位置设置为相对时网页上的重叠表格

> ID：13338468
> 
> 赞同：0
> 
> 时间：2012-11-12T04:40:03.937
> 
> 标签：javascript, html, css

我有一个包含多个表格的网页，我遇到了一个问题，即当您放大或缩小时表格重叠，并且有点浮动。

我的 CSS 设置设置为`position: relative`，但将它们更改`absolute`为放大时也会导致重叠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T05:00:57.477

只有当绝对定位的元素有一个具有相对位置的父元素时，位置才能正常工作。

# c# - SharePoint 2010：来自 MVC Web 应用程序的基于声明的身份验证

> ID：13338473
> 
> 赞同：0
> 
> 时间：2012-11-12T04:40:34.560
> 
> 标签：c#, .net, sharepoint, sharepoint-2010, claims-based-identity

我正在使用 MVC4，需要访问和修改 SharePoint 站点中的数据。我发现了这个：http: [//msdn.microsoft.com/en-us/library/hh147177.aspx](http://msdn.microsoft.com/en-us/library/hh147177.aspx)

此处的示例代码：http: [//code.msdn.microsoft.com/Remote-Authentication-in-b7b6f43c](http://code.msdn.microsoft.com/Remote-Authentication-in-b7b6f43c)

非常有趣，但示例代码适用于 Windows 窗体，问题是它会打开一个 Windows 窗体来询问凭据。

我需要的是一种在网络应用程序中实现相同目标的方法。MVC 或网络表单的示例代码都可以。我似乎在网上找不到任何关于此的内容，所以有人有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:00:45.630

在这里找到了我需要的东西：http: [//www.wictorwilen.se/Post/How-to-do-active-authentication-to-Office-365-and-SharePoint-Online.aspx](http://www.wictorwilen.se/Post/How-to-do-active-authentication-to-Office-365-and-SharePoint-Online.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T21:36:55.390

您可以使用 AD 身份验证查询 SharePoint 网站吗？还是很遥远？如果是这样，您可以使用应用程序池标识对 SharePoint Web 服务进行身份验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T21:51:00.367

我使用为 SharePoint 提供身份验证服务的 MVC3 构建了一个 STS。这篇很棒的[Paraesthesia 文章](http://www.paraesthesia.com/archive/2011/02/01/working-with-windows-identity-foundation-in-asp-net-mvc.aspx "在 ASP.NET MVC 中使用 Windows Identity Foundation")帮助我调整了示例 STS 起始代码以作为 MVC 控制器运行。

这是一个很好的起点。如果您有更具体的问题，我也可以回答这些问题。

# ruby-on-rails - 捆绑 rspec /spec 失败

> ID：13338476
> 
> 赞同：2
> 
> 时间：2012-11-12T04:40:50.450
> 
> 标签：ruby-on-rails, ruby, rspec, integration-testing

我正在尝试使用带有命令的 rspec 运行测试套件

```
bundle exec rspec /spec/models/user_spec.rb 
```

或者

```
bundle exec rspec /spec/requests 
```

导致以下错误消息：

```
/Users/ms/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `load': cannot load such file -- /spec/requests (LoadError)
from /Users/ms/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `block in load_spec_files'
from /Users/ms/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `map'
from /Users/ms/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `load_spec_files'
from /Users/ms/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:22:in `run'
from /Users/ms/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:69:in `run'
from /Users/ms/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:8:in `block in autorun' 
```

即使我恢复到默认测试文件，我也会收到此错误，例如：

```
require 'spec_helper'
describe User do
  pending "add some examples to (or delete) #{__FILE__}"
end 
```

好像我搞砸了宝石，但我不确定如何修复它。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T06:51:33.530

删除前导正斜杠：

```
bundle exec rspec spec/models/user_spec.rb 
```

# jquery - jQuery同步触发自定义事件？

> ID：13338484
> 
> 赞同：14
> 
> 时间：2012-11-12T04:41:49.107
> 
> 标签：jquery, synchronization, jquery-events

我正在使用 jQuery 触发器方法来调用事件......但它的行为不一致。有时它调用事件，有时它不调用。

```
<a href="#" onclick="
    $(this).trigger('custom-event');
    window.location.href = 'url';
    return false;
">text</a> 
```

它`custom-event`添加了很多听众。就好像触发方法不是同步的，允许`window.location.href`在执行事件之前进行更改。当 window.location.href 发生改变时，会发生导航，打断一切。

如何同步触发事件？

使用 jQuery 1.8.1。

**编辑**

我发现该事件在调用时具有如下堆栈跟踪：

1.  jQuery.fx.tick (jquery-1.8.1.js:9021)
2.  勾选（jquery-1.8.1.js:8499）
3.  jQuery.Callbacks.self.fireWith (jquery-1.8.1.js:1082)
4.  jQuery.Callbacks.fire (jquery-1.8.1.js:974)
5.  jQuery.speed.opt.complete (jquery-1.8.1.js:8991)
6.  $.customEvent (myfile.js:28)

~~这证明了jQuery`trigger`方法是异步的。~~（我错了......这只能证明我正在调用的事件，里面有一个动画，并且在动画之后在回调中调用了预期的函数）

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-12T04:58:00.617

你，我的朋友，正在寻找 jQuery“何时”。

[http://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)

要强制任何东西同步，你可以使用这样的东西......

```
$.when($(this).trigger('custom-event')).done(function(){
    window.location.href = 'url';
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-18T08:46:26.263

阅读有关 triggerHandler 的文档：

> .triggerHandler() 不是返回 jQuery 对象（以允许链接），而是返回它导致执行的最后一个处理程序返回的任何值。如果没有重新触发处理程序，则返回 undefined

文档中的这一点让我认为这样的代码：

```
// Trigger the custom event
$(this).triggerHandler('custom-event');
// This code will only run when all events are run
window.location.href = 'url'; 
```

会满足你的要求。

见[http://api.jquery.com/triggerHandler/](http://api.jquery.com/triggerHandler/)

# qt4 - Qt QGLWidget GLuint 数组内存对齐问题

> ID：13338490
> 
> 赞同：2
> 
> 时间：2012-11-12T04:42:44.273
> 
> 标签：qt4, texture-mapping, memory-alignment, qglwidget

我正在使用 QGLWidget 子类在 Qt 中关注[NeHe OGL 教程。](http://nehe.gamedev.net/)到目前为止我还没有遇到任何问题，并且在第[6 次教程中](http://nehe.gamedev.net/tutorial/texture_mapping/12038/)在纹理映射中，他介绍了对旋转框进行纹理化。我让一切正常，然后尝试在立方体的每一侧添加我自己的纹理。我使用 QGLWidget::bindTexture() 函数加载通过 Qt 资源系统存储的 256x256 bmp 文件，并将 GLuint id 保存在私有成员数组中。在paintGL() 中，在为正方形的每个面调用glBegin(GL_QUADS) 和glEnd() 之前，我使用GL_TEXTURE_2D 和GLuint 数组元素之一作为参数调用glBindTexture()。它编译得很好，但是该框要么呈现完全白色（好像它可能找不到纹理），否则我在旋转绘制过程中得到疯狂的黑白伪影，随机线条在整个屏幕上射击。

在搞砸的同时，我设法通过在我的类声明的末尾添加另一个私有数据成员来解决问题，当事情神奇地开始工作时，我决定在类声明中将我的 GLuint 纹理数组的声明移到更高的位置，这似乎有效. 我对内存对齐一无所知，这似乎是正在发生的事情的最明显原因，我很想解释这里发生的事情。

万一这很重要，这是在 Qt 4.6 上，在 GCC 4.4.0 和 MinGW 5.1.6 中的 GNU Make 3.8.1 上编译（我应该升级）。

代码：glwidget.hpp，有问题的声明在底部注释

```
 #ifndef GLWIDGET_HPP
    #define GLWIDGET_HPP

    #include <QtOpenGL>

    class QTimer;

    class GLWidget : public QGLWidget
    {
    Q_OBJECT

    public:
        GLWidget( QWidget *parent = 0 );
        ~GLWidget();

    protected:
        void initializeGL();
        void paintGL();
        void resizeGL( int width, int height );

    private:
        void drawCube();
        void loadTextures();

        QTimer  *m_timer;
        GLuint  m_textures[6]; // doesn't cause rendering problems here
        GLfloat m_xrot, m_yrot, m_zrot;
    //  GLuint  m_textures[6]; // causes rendering problems if declared here
    };

    #endif 
```

glwidget.cpp

```
 #include "glwidget.hpp"

    #include <QTimer>

    GLWidget::GLWidget( QWidget *parent )
        : QGLWidget( QGLFormat(QGL::SampleBuffers), parent )
    {
        m_timer = new QTimer( this );
        m_timer->setSingleShot( false );
        connect( m_timer, SIGNAL(timeout()), this, SLOT(updateGL()) );
        m_timer->start( 7 );

        setWindowTitle( "NeHe Lesson 6" );
    }

    GLWidget::~GLWidget()
    {
        glDeleteTextures( 6, m_textures );
    }

    void GLWidget::initializeGL()
    {
        glShadeModel( GL_SMOOTH );  // Enable smooth shading
        qglClearColor( Qt::black );
        glClearDepth( 1.0f );   // Depth buffer setup
        glEnable( GL_DEPTH_TEST );
        glEnable( GL_TEXTURE_2D );
        glDepthFunc( GL_LEQUAL );
        glHint( GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST );

        loadTextures();
    }

    void GLWidget::loadTextures()
    {
        glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
        glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );

        m_textures[0] = bindTexture( QPixmap(":/img/scifi.bmp") );
        m_textures[1] = bindTexture( QPixmap(":/img/scifi2.bmp") );
        m_textures[2] = bindTexture( QPixmap(":/img/scifi3.bmp") );
        m_textures[3] = bindTexture( QPixmap(":/img/scifi4.bmp") );
        m_textures[4] = bindTexture( QPixmap(":/img/scifi5.bmp") );
        m_textures[5] = bindTexture( QPixmap(":/img/scifi6.bmp") );
    }

    void GLWidget::drawCube()
    {
        // Front face
        glBindTexture( GL_TEXTURE_2D, m_textures[0] );
        glBegin( GL_QUADS );
            glNormal3f( 0.0f, 0.0f, 1.0f );
            glTexCoord2f( 0.0f, 0.0f ); glVertex3f(-1.0f,-1.0f, 1.0f ); // Bottom left
            glTexCoord2f( 1.0f, 0.0f ); glVertex3f( 1.0f,-1.0f, 1.0f ); // Bottom right
            glTexCoord2f( 1.0f, 1.0f ); glVertex3f( 1.0f, 1.0f, 1.0f ); // Top right
            glTexCoord2f( 0.0f, 1.0f ); glVertex3f(-1.0f, 1.0f, 1.0f ); // Top left
        glEnd();

        // Back face
        glBindTexture( GL_TEXTURE_2D, m_textures[1] );
        glBegin( GL_QUADS );
            glNormal3f( 0.0f, 0.0f, -1.0f );
            glTexCoord2f( 1.0f, 0.0f ); glVertex3f(-1.0f,-1.0f,-1.0f ); // Bottom right
            glTexCoord2f( 1.0f, 1.0f ); glVertex3f(-1.0f, 1.0f,-1.0f ); // Top right
            glTexCoord2f( 0.0f, 1.0f ); glVertex3f( 1.0f, 1.0f,-1.0f ); // Top left
            glTexCoord2f( 0.0f, 0.0f ); glVertex3f( 1.0f,-1.0f,-1.0f ); // Bottom left
        glEnd();

        // Top Face
        glBindTexture( GL_TEXTURE_2D, m_textures[2] );
        glBegin( GL_QUADS );
            glNormal3f( 0.0f, 1.0f, 0.0f );
            glTexCoord2f( 0.0f, 1.0f ); glVertex3f(-1.0f, 1.0f,-1.0f ); // Top left
            glTexCoord2f( 0.0f, 0.0f ); glVertex3f(-1.0f, 1.0f, 1.0f ); // Bottom left
            glTexCoord2f( 1.0f, 0.0f ); glVertex3f( 1.0f, 1.0f, 1.0f ); // Bottom right
            glTexCoord2f( 1.0f, 1.0f ); glVertex3f( 1.0f, 1.0f,-1.0f ); // Top right
        glEnd();

        // Bottom Face
        glBindTexture( GL_TEXTURE_2D, m_textures[3] );
        glBegin( GL_QUADS );
            glNormal3f( 0.0f, -1.0f, 0.0f );
            glTexCoord2f( 1.0f, 1.0f ); glVertex3f(-1.0f,-1.0f,-1.0f ); // Top right
            glTexCoord2f( 0.0f, 1.0f ); glVertex3f( 1.0f,-1.0f,-1.0f ); // Top left
            glTexCoord2f( 0.0f, 0.0f ); glVertex3f( 1.0f,-1.0f, 1.0f ); // Bottom left
            glTexCoord2f( 1.0f, 0.0f ); glVertex3f(-1.0f,-1.0f, 1.0f ); // Bottom right
        glEnd();

        // Right face
        glBindTexture( GL_TEXTURE_2D, m_textures[4] );
        glBegin( GL_QUADS );
            glNormal3f( 1.0f, 0.0f, 0.0f );
            glTexCoord2f( 1.0f, 0.0f ); glVertex3f( 1.0f,-1.0f,-1.0f ); // Bottom right
            glTexCoord2f( 1.0f, 1.0f ); glVertex3f( 1.0f, 1.0f,-1.0f ); // Top right
            glTexCoord2f( 0.0f, 1.0f ); glVertex3f( 1.0f, 1.0f, 1.0f ); // Top left
            glTexCoord2f( 0.0f, 0.0f ); glVertex3f( 1.0f,-1.0f, 1.0f ); // Bottom left
        glEnd();

        // Left Face
        glBindTexture( GL_TEXTURE_2D, m_textures[5] );
        glBegin( GL_QUADS );
            glNormal3f( -1.0f, 0.0f, 0.0f );
            glTexCoord2f( 0.0f, 0.0f ); glVertex3f(-1.0f,-1.0f,-1.0f ); // Bottom left
            glTexCoord2f( 1.0f, 0.0f ); glVertex3f(-1.0f,-1.0f, 1.0f ); // Bottom right
            glTexCoord2f( 1.0f, 1.0f ); glVertex3f(-1.0f, 1.0f, 1.0f ); // Top right
            glTexCoord2f( 0.0f, 1.0f ); glVertex3f(-1.0f, 1.0f,-1.0f ); // Top left
        glEnd();
    }

    void GLWidget::paintGL()
    {
        glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );
        glLoadIdentity();
        glTranslatef( 0.0f, 0.0f, -5.0f );
        glRotatef( m_xrot, 1.0f, 0.0f, 0.0f );
        glRotatef( m_yrot, 0.0f, 1.0f, 0.0f );
        glRotatef( m_zrot, 0.0f, 0.0f, 1.0f );
        drawCube();

        m_xrot += 0.3f;
        m_yrot += 0.2f;
        m_zrot += 0.4f;
    }

    void GLWidget::resizeGL( int width, int height )
    {
        if( height == 0 )
            height = 1;

        glViewport( 0, 0, width, height );
        glMatrixMode( GL_PROJECTION );
        glLoadIdentity();
        gluPerspective( 45.0f, static_cast<GLfloat>(width)/height, 0.1f, 100.0f );
        glMatrixMode( GL_MODELVIEW );
        glLoadIdentity();
    } 
```

# xml - 正则表达式属性在 xsl:analyze-string 函数中不起作用

> ID：13338499
> 
> 赞同：-2
> 
> 时间：2012-11-12T04:45:19.240
> 
> 标签：xml, regex, xslt, xpath

给定的源 xml 是一部分`<EORI_Number>23 March 2002</EORI_Number>`

并应用下面给出的样式表

```
<xsl:analyze-string select="EORI_Number" regex=".*([0-9]+)\s+([A-Z](a-z)+)\s+([0-9]+).*">
    <xsl:matching-substring>
    one        
    </xsl:matching-substring>
    <xsl:non-matching-substring>
    two
    </xsl:non-matching-substring>
</xsl:analyze-string> 
```

它不工作。我是初学者，`xslt`因此将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T05:03:14.500

可能是因为您的正则表达式不正确。试试这个：

```
.*([0-9]+)\s+([A-Z][a-z]+)\s+([0-9]+).* 
```

**注意**：从原始正则表达式更改`(a-z)`为。`[a-z]`

# r - 使用 lapply 和 ddply 函数

> ID：13338500
> 
> 赞同：1
> 
> 时间：2012-11-12T04:45:27.940
> 
> 标签：r, apply

我正在尝试对我的示例数据（调用 Z）使用 ddply，如下所示：

```
id    y
1001  10
1001  11
1200  12
2001  10
2030  12
2100  32
3100  10
3190  13
4100  45
5100  67
5670  56
...
10001  54
10345  45
11234  32
and so on 
```

我的目的是找到从 1 开始的 id 的 y 的总和（即 1001,1200,..), 2(2100), 3(3100,3190), 4,...10,11,...65 . 例如 id 以 1 开头，总和为 10+11+12=33，对于 id 以 2 开头，则为 32。

我想使用如下所示的 apply 函数：

```
>s <- split(z,z$id)
>lapply(s, function(x) colSums(x[, c("y")])) 
```

但是，这给了我每个唯一 ID 的总和，而不是我正在寻找的那个。在这方面的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T05:16:58.427

这是一个用于执行整数除法的`data.table`解决方案`%/%`（返回多少千）

```
library(data.table)
DT <- data.table(z)

x <- DT[,list(sum_y = sum(y)), by = list(id = id %/% 1000)]
x
   id sum_y
1:  1    33
2:  2    54
3:  3    23
4:  4    45
5:  5   123
6: 10    99 
```

你可以做类似的`ddply`

```
ddply(z, .(id = id %/% 1000 ), summarize, sum_y = sum(y))
  id sum_y
1  1    33
2  2    54
3  3    23
4  4    45
5  5   123
6 10    99 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T05:07:44.380

这是否给了您预期的答案？

```
z <- read.table(textConnection("id y
1001 10
1001 11
1200 12
2001 10
2030 12
2100 32
3100 10
3190 13
4100 45
5100 67
5670 56
10001 54
10345 45"),header=TRUE)

result <- tapply(
                 z$y,
                 as.numeric(substr(z$id,1,nchar(z$id)-3)),
                 sum
                )

result
  1   2   3   4   5  10 
 33  54  23  45 123  99 
```

要从上面窃取@mnel 的行，可以简化为：

```
result <- tapply(
                 z$y,
                 z$id %/% 1000,
                 sum
                ) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T05:24:01.473

thelatemail 提供了一种有效的方法，但我想指出问题不在于您对`lapply`（您的代码几乎是正确的）的理解，而在于考虑分组。thelatemail 在他的解决方案中做到了这一点，这就是关键。我将向您展示您的方法，然后我将如何实际处理它，然后使用`ave`它，因为我从来没有使用过它:)

**读入数据**

```
z <- read.table(textConnection("id y #stole this from the latemail
1001 10
1001 11
1200 12
2001 10
2030 12
2100 32
3100 10
3190 13
4100 45
5100 67
5670 56
10001 54
10345 45"),header=TRUE) 
```

**您的代码已调整**

```
s <- split(z, substring(as.character(z$id), 1, nchar(as.character(z$id)) - 3))
lapply(s, function(x) sum(x[, "y"])) 
```

**我可能会采取的方法；添加一个新的因子 id 变量**

```
z$IDgroup <- substring(as.character(z$id), 1, nchar(as.character(z$id)) - 3)
aggregate(y ~ IDgroup, z, sum)
#similar approach but adds the solution back as a new column
z$group.sum <- ave(z$y, z$IDgroup, FUN=sum)
z 
```

# c++ - 使用 autoconf 找不到 boost library 1.52

> ID：13338502
> 
> 赞同：2
> 
> 时间：2012-11-12T04:46:07.043
> 
> 标签：c++, boost, linker, autoconf

我正在尝试编译 mgiza。它需要提升，所以我安装了 boost_1_52_0。

我一般搜索过stackoverflow和谷歌，但我仍然无法解决这些问题。

最初我的编译错误如下：

按照 Joachim 的建议，要添加 boost 库，我已将其添加到 Makefiles.am

```
AM_CPPFLAGS = $(BOOST_CPPFLAGS)
AM_LDFLAGS = $(LDFLAGS_BOOST) \
    $(LDFLAGS_BOOST_LIBS)
LIBS += $(LIBS_BOOST)

ACLOCAL_AMFLAGS = -I  m4

LDFLAGS_BOOST = \
    $(BOOST_SYSTEM_LDFLAGS) \
    $(BOOST_PROGRAM_OPTIONS_LDFLAGS)

LIBS_BOOST = \
    $(BOOST_SYSTEM_LIBS) \
    $(BOOST_PROGRAM_OPTIONS_LIBS) \
    $(BOOST_FILESYSTEM_LIBS) 
```

我还在 configure.ac 中添加了这样的行：

```
dnl Process this file with autoconf to produce a configure script.
dnl Created by Anjuta application wizard.

AC_INIT(mgiza, 1.0)

AM_INIT_AUTOMAKE(AC_PACKAGE_NAME, AC_PACKAGE_VERSION)
AM_CONFIG_HEADER(config.h)
AM_MAINTAINER_MODE

AC_ISC_POSIX
AC_PROG_CXX
AM_PROG_CC_STDC
AC_HEADER_STDC

AC_PROG_RANLIB
AM_PROG_LIBTOOL
AC_PROG_LIBTOOL

AC_CONFIG_MACRO_DIR(m4)
BOOST_REQUIRE([1.52.0])
BOOST_FILESYSTEM
BOOST_SYSTEM
BOOST_PROGRAM_OPTIONS 
BOOST_REGEX
BOOST_THREAD

AC_OUTPUT([
Makefile
src/Makefile
src/mkcls/Makefile
]) 
```

然后我跑了

```
autoreconf -ifv 
```

以下是留言：

```
autoreconf-2.68：进入目录“。”
autoreconf-2.68：configure.ac：不使用 Gettext
autoreconf-2.68：运行：aclocal --force -I m4
autoreconf-2.68：configure.ac：跟踪
autoreconf-2.68：运行：libtoolize --copy --force
libtoolize：将辅助文件放在“.”中。
libtoolize：复制文件“./ltmain.sh”
libtoolize：将宏放入 AC_CONFIG_MACRO_DIR, `m4'。
libtoolize：复制文件“m4/libtool.m4”
libtoolize：复制文件“m4/ltoptions.m4”
libtoolize：复制文件“m4/ltsugar.m4”
libtoolize：复制文件“m4/ltversion.m4”
libtoolize：复制文件“m4/lt~obsolete.m4”
libtoolize: `AC_PROG_RANLIB' 被 `LT_INIT' 废弃
autoreconf-2.68：运行：/usr/bin/autoconf-2.68 --force
autoreconf-2.68：运行：/usr/bin/autoheader-2.68 --force
autoreconf-2.68: 运行: automake --add-missing --copy --force-missing
autoreconf-2.68：离开目录“。”

```

然后我跑了

```
 configure --with-boost=/home/Jelita/boost_1_52_0 
```

以下是运行结果：

```
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /usr/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether to enable maintainer-specific portions of Makefiles... no
checking for style of include used by make... GNU
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.exe
checking for suffix of executables... .exe
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking dependency style of gcc... gcc3
checking for library containing strerror... none required
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking dependency style of g++... gcc3
checking for gcc... (cached) gcc
checking whether we are using the GNU C compiler... (cached) yes
checking whether gcc accepts -g... (cached) yes
checking for gcc option to accept ISO C89... (cached) none needed
checking dependency style of gcc... (cached) gcc3
checking how to run the C preprocessor... gcc -E
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking for ANSI C header files... yes
checking for ranlib... ranlib
checking build system type... i686-pc-cygwin
checking host system type... i686-pc-cygwin
checking how to print strings... printf
checking for a sed that does not truncate output... /usr/bin/sed
checking for fgrep... /usr/bin/grep -F
checking for ld used by gcc... /usr/i686-pc-cygwin/bin/ld.exe
checking if the linker (/usr/i686-pc-cygwin/bin/ld.exe) is GNU ld... yes
checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B
checking the name lister (/usr/bin/nm -B) interface... BSD nm
checking whether ln -s works... yes
checking the maximum length of command line arguments... 8192
checking whether the shell understands some XSI constructs... yes
checking whether the shell understands "+="... yes
checking how to convert i686-pc-cygwin file names to i686-pc-cygwin format... fu
nc_convert_file_noop
checking how to convert i686-pc-cygwin file names to toolchain format... func_co
nvert_file_noop
checking for /usr/i686-pc-cygwin/bin/ld.exe option to reload object files... -r
checking for objdump... objdump
checking how to recognize dependent libraries... file_magic ^x86 archive import|
^x86 DLL
checking for dlltool... dlltool
checking how to associate runtime and link libraries... func_cygming_dll_for_imp
lib
checking for ar... ar
checking for archiver @FILE support... @
checking for strip... strip
checking for ranlib... (cached) ranlib
checking command to parse /usr/bin/nm -B output from gcc object... ok
checking for sysroot... no
checking for mt... mt
checking if mt is a manifest tool... no
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for dlfcn.h... yes
checking for objdir... .libs
checking if gcc supports -fno-rtti -fno-exceptions... no
checking for gcc option to produce PIC... -DDLL_EXPORT -DPIC
checking if gcc PIC flag -DDLL_EXPORT -DPIC works... yes
checking if gcc static flag -static works... yes
checking if gcc supports -c -o file.o... yes
checking if gcc supports -c -o file.o... (cached) yes
checking whether the gcc linker (/usr/i686-pc-cygwin/bin/ld.exe) supports shared
 libraries... yes
checking whether -lc should be explicitly linked in... yes
checking dynamic linker characteristics... Win32 ld.exe
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
checking how to run the C++ preprocessor... g++ -E
checking for ld used by g++... /usr/i686-pc-cygwin/bin/ld.exe
checking if the linker (/usr/i686-pc-cygwin/bin/ld.exe) is GNU ld... yes
checking whether the g++ linker (/usr/i686-pc-cygwin/bin/ld.exe) supports shared
 libraries... yes
checking for g++ option to produce PIC... -DDLL_EXPORT -DPIC
checking if g++ PIC flag -DDLL_EXPORT -DPIC works... yes
checking if g++ static flag -static works... yes
checking if g++ supports -c -o file.o... yes
checking if g++ supports -c -o file.o... (cached) yes
checking whether the g++ linker (/usr/i686-pc-cygwin/bin/ld.exe) supports shared
 libraries... yes
checking dynamic linker characteristics... Win32 ld.exe
checking how to hardcode library paths into programs... immediate
checking for Boost headers version >= 1.52.0... /home/Jelita/boost_1_52_0
checking for Boost's header version... 1_52
checking for the toolset name used by Boost for g++... gcc45 -gcc
checking boost/system/error_code.hpp usability... yes
checking boost/system/error_code.hpp presence... yes
checking for boost/system/error_code.hpp... yes
checking for the Boost system library... yes
checking boost/filesystem/path.hpp usability... yes
checking boost/filesystem/path.hpp presence... yes
checking for boost/filesystem/path.hpp... yes
checking for the Boost filesystem library... yes
checking for boost/system/error_code.hpp... (cached) yes
checking for the Boost system library... (cached) yes
checking boost/program_options.hpp usability... yes
checking boost/program_options.hpp presence... yes
checking for boost/program_options.hpp... yes
checking for the Boost program_options library... yes
checking boost/regex.hpp usability... yes
checking boost/regex.hpp presence... yes
checking for boost/regex.hpp... yes
checking for the Boost regex library... yes
configure: creating ./config.status
config.status: creating Makefile
config.status: creating src/Makefile
config.status: creating src/mkcls/Makefile
config.status: creating config.h
config.status: executing depfiles commands
config.status: executing libtool commands 
```

同时，我在 config.log 中得到以下信息：

```
configure:16123: checking boost/system/error_code.hpp usability
configure:16123: g++ -c -g -O2  -I/home/Jelita/boost_1_52_0 conftest.cpp >&5
configure:16123: $? = 0
configure:16123: result: yes
configure:16123: checking boost/system/error_code.hpp presence
configure:16123: g++ -E  -I/home/Jelita/boost_1_52_0 conftest.cpp
configure:16123: $? = 0
configure:16123: result: yes
configure:16123: checking for boost/system/error_code.hpp
configure:16123: result: yes
configure:16150: checking for the Boost system library
configure:16192: g++ -c -g -O2  -I/home/Jelita/boost_1_52_0 conftest.cpp >&5
configure:16192: $? = 0
configure:16243: re-using the existing conftest.o
configure:16249: g++ -o conftest.exe -g -O2  -I/home/Jelita/boost_1_52_0  -L/usr/local/lib conftest.o -lboost_system-gcc45-mt-1_52  >&5
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: cannot find -lboost_system-gcc45-mt-1_52
collect2: ld returned 1 exit status
configure:16258: $? = 1
configure:16243: re-using the existing conftest.o
configure:16249: g++ -o conftest.exe -g -O2  -I/home/Jelita/boost_1_52_0  -L/usr/lib conftest.o -lboost_system-gcc45-mt-1_52  >&5
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: cannot find -lboost_system-gcc45-mt-1_52
collect2: ld returned 1 exit status 
```

现在我在编译时收到此错误：

```
libtool: link: g++ -MT -MD -MP -MF -O6 -g -O2 -o .libs/mgiza.exe mgiza-main.o  -
L. -lgiza -lpthread
mgiza-main.o: In function `__static_initialization_and_destruction_0':
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:214: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:215: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:216: undefined
 reference to `boost::system::system_category()'
mgiza-main.o: In function `main':
/home/Jelita/moses/tools/mgiza/src/main.cpp:1099: undefined reference to `boost:
:thread::hardware_concurrency()'
./libgiza.a(libgiza_a-model3.o): In function `__static_initialization_and_destru
ction_0':
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:214: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:215: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:216: undefined
 reference to `boost::system::system_category()'
./libgiza.a(libgiza_a-reports.o): In function `__static_initialization_and_destr
uction_0':
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:214: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:215: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:216: undefined
 reference to `boost::system::system_category()'
./libgiza.a(libgiza_a-hmm.o): In function `__static_initialization_and_destructi
on_0':
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:214: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:215: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:216: undefined
 reference to `boost::system::system_category()'
./libgiza.a(libgiza_a-getSentence.o): In function `__static_initialization_and_d
estruction_0':
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:214: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:215: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:216: undefined
 reference to `boost::system::system_category()'
./libgiza.a(libgiza_a-getSentence.o): In function `thread_exception':
/home/Jelita/moses/tools/mgiza/src/../boost/thread/exceptions.hpp:49: undefined
reference to `boost::system::system_category()'
./libgiza.a(libgiza_a-model1.o): In function `__static_initialization_and_destru
ction_0':
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:214: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:215: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:216: undefined
 reference to `boost::system::system_category()'
./libgiza.a(libgiza_a-model2.o): In function `__static_initialization_and_destru
ction_0':
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:214: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:215: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:216: undefined
 reference to `boost::system::system_category()'
./libgiza.a(libgiza_a-model2to3.o): In function `__static_initialization_and_des
truction_0':
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:214: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:215: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:216: undefined
 reference to `boost::system::system_category()'
./libgiza.a(libgiza_a-parse.o): In function `__static_initialization_and_destruc
tion_0':
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:214: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:215: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:216: undefined
 reference to `boost::system::system_category()'
./libgiza.a(libgiza_a-model3_viterbi_with_tricks.o): In function `__static_initi
alization_and_destruction_0':
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:214: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:215: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:216: undefined
 reference to `boost::system::system_category()'
./libgiza.a(libgiza_a-model3_viterbi.o): In function `__static_initialization_an
d_destruction_0':
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:214: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:215: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:216: undefined
 reference to `boost::system::system_category()'
./libgiza.a(libgiza_a-model345-peg.o): In function `__static_initialization_and_
destruction_0':
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:214: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:215: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:216: undefined
 reference to `boost::system::system_category()'
./libgiza.a(libgiza_a-MoveSwapMatrix.o): In function `__static_initialization_an
d_destruction_0':
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:214: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:215: undefined
 reference to `boost::system::generic_category()'
/home/Jelita/moses/tools/mgiza/src/../boost/system/error_code.hpp:216: undefined
 reference to `boost::system::system_category()'
collect2: ld returned 1 exit status
make[3]: *** [mgiza.exe] Error 1
make[3]: Leaving directory `/home/Jelita/moses/tools/mgiza/src'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/home/Jelita/moses/tools/mgiza/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/Jelita/moses/tools/mgiza'
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:25:34.753

您需要将 Boost 库添加到您`LIBS`的 中`Makefile.am`，并添加特定于 Boost 的`CPPFLAGS`和`LDFLAGS`：

```
LDFLAGS_BOOST = \
    $(BOOST_SYSTEM_LDFLAGS) \
    $(BOOST_PROGRAM_OPTIONS_LDFLAGS)

LIBS_BOOST = \
    $(BOOST_SYSTEM_LIBS) \
    $(BOOST_PROGRAM_OPTIONS_LIBS) \
    $(BOOST_FILESYSTEM_LIBS)

AM_CPPFLAGS += $(BOOST_CPPFLAGS)
AM_LDFLAGS += $(LDFLAGS_BOOST)
LIBS += $(LIBS_BOOST) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:27:32.150

我意识到 src 目录下有一个单独的 Makefile.am。我将 -lboost_system 和 -lboost_thread 的链接添加到所需的程序中，它现在可以编译了。

# php - 使用sql添加数字

> ID：13338507
> 
> 赞同：0
> 
> 时间：2012-11-12T04:47:24.900
> 
> 标签：php, sql, select, numbers, add

这就是我想要做的。如果一个人买一盏灯，`product_quantity`将增加 1。另一个人购买相同的产品，但“product_quantity”为 3。所以如果总计增加 4。

这是我的代码：

```
// build SQL statement to select how many quantities of that product.
$query = "select product_quantity from table where order_item_name = '$ordername' and order_id='$orderid'";

// execute SQL statement
$result = mysqli_query($link, $query) or die(mysqli_error($link));

// shows how many quantity of that product
while($row= mysqli-fetch_assoc($result)){
    $lol = $row['product_quantity']
} 
```

但是如何使用 SQL 将此数字添加到表中的现有数字中？例如，在此表中，有一个字段名为`total_order`：10。我想将新订单：数量 1 和 3 添加到现有的`total_order`：10 相同产品中，使其成为 14。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T05:09:16.887

可以通过使用列名、操作和变量来实现对数据库列的任何数学运算（例如：UPDATE TABLE SET COLUMN = COLUMN (+-*/) $variable WHERE 1;）

```
$ordername = 'lamp';
$orderid = 1;

$total_quantity = 0;
while($row= mysqli->fetch_assoc($result)){
    $total_quantity += $row['product_quantity'];
}    
$sql = "UPDATE TABLE SET `product_quantity`= product_quantity + $total_quantity WHERE `order_item_name` = '$ordername' AND `order_id`='$orderid'"; 
```

# android - 当wifi状态发生变化时，如何调用小部件更新？

> ID：13338510
> 
> 赞同：0
> 
> 时间：2012-11-12T04:47:38.547
> 
> 标签：android, android-widget

我有一个切换 wifi 状态的 wifi 小部件。但是，如果用户在不使用我的小部件的情况下更改了 wifi 状态，那么我的小部件将不会反映该更改。前任。wifi 开启，用户通过设置关闭 wifi，widget 仍然会显示 wifi 开启，因为它没有更新。

wifi状态更改后如何让小部件更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-17T23:05:11.970

您需要在接收器中注册 android.net.conn.CONNECTIVITY_CHANGE 和 android.net.wifi.WIFI_STATE_CHANGED 操作。

然后在 onReceive 方法中，使用以下代码更新小部件：

```
Intent i = new Intent(context, WidgetProvider.class);
i.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
i.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS,
AppWidgetManager.getInstance(context).getAppWidgetIds(new ComponentName(context, WidgetProvider.class)));
context.sendBroadcast(i); 
```

问候，

莱昂纳多奥利维拉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:00:43.510

使用 a`BroadcastReceiver`通知此类更改

使用注册接收器

```
IntentFilter mFilter = new IntentFilter();
mFilter .addAction(WifiManager.SUPPLICANT_CONNECTION_CHANGE_ACTION);
registerReceiver(yourReceiver, mFilter ); 
```

并在 onReceive`yourReceiver`类中使用

```
if (action.equals(WifiManager.SUPPLICANT_CONNECTION_CHANGE_ACTION)) {
//Do something
} 
```

更新您的小部件

# android - 对话框弹出中的 AutoCompleteTextView 下拉高度受限

> ID：13338512
> 
> 赞同：11
> 
> 时间：2012-11-12T04:47:59.457
> 
> 标签：android, autocompletetextview

对话框弹出窗口位于[此处](https://i.imgur.com/UCo7x.png)。

自动完成结果如何在弹出视图结束时停止在[这里](https://i.imgur.com/D10Zg.png)。

我希望结果从对话框视图下拉到父视图。如果我不能这样做，那么我想将 AutoComplete 给我的结果数量限制为两个。

这是我的弹出菜单的点击监听器。

```
addDialog.setContentView(R.layout.shoppinglistadd);

/**Capture the AutoCompleteTextView widget*/
final AutoCompleteTextView autoCompleteTV 
  = (AutoCompleteTextView) addDialog.findViewById(R.id.productEnteredShop);
/**Fills the autocomplete with possibilities*/
String[] acArray = getResources().getStringArray(R.array.completeFoodsList);
/**Create a new ArrayAdapter and bind shoppinglistitem.xml to each list item*/
ArrayAdapter<String> autoCompleteAdapter 
  = new ArrayAdapter<String>(ShoppingList.this, R.layout.shoppinglistitem, acArray);
/**Associate the adapter with textView*/
autoCompleteTV.setAdapter(autoCompleteAdapter); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-02-07T07:15:38.813

`AutoCompleteTextView`您应该使用此方法来限制xml 中小部件的下拉高度：

```
android:dropDownHeight="size" 
```

或使用它以编程方式执行

```
autoCompleteTextView.setDropDownHeight(int); 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T07:54:47.440

对于项目数量的限制部分：您可以`getCount()`覆盖`ArrayAdapter`：

```
@Override
public int getCount() {
   return Math.min(2,super.getCount());
} 
```

这也适用于过滤。

# java - 终止一个长时间执行的线程，然后启动一个新线程以响应用户通过小程序中的 UI 更改参数

> ID：13338514
> 
> 赞同：3
> 
> 时间：2012-11-12T04:48:13.940
> 
> 标签：java, swing, concurrency, applet, jfugue

我有一个小程序，它使用 JFugue API 创建音乐并为用户播放。它允许用户输入乐曲所基于的乐句，或者让他们选择随机生成乐句。我一直在使用以下方法（成功）来简单地停止和启动音乐，它使用 JFugue 的 Player 类在线程中运行。

我使用我的类和来自小程序 GUI 的用户输入生成音乐......然后......

```
private playerThread pthread;
private Thread threadPlyr;
private Player player;
(from variables declaration)

public void startMusic(Pattern p) // pattern is a JFugue object which holds the generated music
{
if (pthread == null)
{ pthread = new playerThread(); }
else
{
    pthread = null;
    pthread = new playerThread();
}
if (threadPlyr == null)
{ threadPlyr = new Thread(pthread); }
else
{
    threadPlyr = null;
    threadPlyr = new Thread(pthread);
}
pthread.setPattern(p);
threadPlyr.start(); 
```

}

```
class playerThread implements Runnable // plays midi using jfugue Player
    {
        private Pattern pt;
        public void setPattern(Pattern p)
        {
            pt = p;
        }
        @Override
        public void run()
        {
                try
                {
                    player.play(pt); // takes a couple mins or more to execute
                    resetGUI();
                }
                catch (Exception exception)
                {
                }
        }
    } 
```

当 Player.isPlaying() 为真时，当用户按下停止/开始按钮时，以下内容将停止音乐：

```
 public void stopMusic()
{
threadPlyr.interrupt();
threadPlyr = null;
pthread = null;
player.stop();
} 
```

现在我想实现一个功能，允许用户在播放音乐时更改参数，创建一个更新的音乐模式，然后播放那个模式。基本上，这个想法是让它为用户模拟对生成的音乐的“实时”调整。

好吧，我已经为此苦苦挣扎了几个星期。我已经阅读了所有标准的 java 文档，研究、阅读和搜索了论坛，并且尝试了许多不同的想法，但都没有成功。

我尝试过的所有方法都遇到的问题是，当我使用新的、更新的音乐模式启动新线程时，所有旧线程也会启动，并且会出现无法理解的杂音而不是我想要的输出.

从我收集到的信息来看，问题似乎是我遇到的所有方法都要求线程能够定期检查“标志”变量的值，然后从其“运行”块中自行关闭响应该变量。但是，由于我的线程调用最少需要几分钟才能执行（播放音乐），并且我需要在它执行时终止它，所以确实没有安全的方法可以这样做。

所以，我想知道在线程方面我是否缺少一些东西，或者我是否可以使用完全不同的方法来实现我的目标。非常感谢任何想法或指导！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:13:29.510

不要播放整个序列，而是播放其中的一小部分。然后检查中止，如果没有，则播放下一部分。您可以使用子模式接口、标记化接口，甚至可以小心地将片段从另一个线程流式传输到模式。

# android - 注销以在 xmpp smack 中添加朋友

> ID：13338515
> 
> 赞同：1
> 
> 时间：2012-11-12T04:48:18.723
> 
> 标签：android, xmpp, subscription

在我的应用程序中，当我必须添加朋友时，我通常会发送 4 次订阅数据包，即

A->B（订阅） B->A（订阅） BA（订阅） A->B（订阅）

在每一步之后，我在服务器上看到状态立即改变。

但在我的应用程序中，它只会在注销并再次登录后反映。此人添加好友后必须注销一次，然后好友列表中才显示该好友>

有什么问题？我发现了很多但没有发现任何错误:(

logcat 中没有显示错误。

在发送每个数据包后，我还打印了 syso 输出。它总是显示为 NONE（在向其发送请求的人的情况下）并且始终显示为 TO/FROM（在发送朋友请求的用户的情况下）。除非有人登录，否则两者都不会反映退出并再次登录。

请帮我 ：（

```
Add Friend Function

public boolean addFriend(String jid) {
        String nickname = null;
        String idExtension = jid+"@abc.hostname.com";
        nickname = StringUtils.parseBareAddress(jid);
        if (!roster.contains(idExtension)) {
            try {   
                roster.createEntry(idExtension, nickname, null);
                //to subscribe the user in the entry
                Presence subscribe = new Presence(Presence.Type.subscribe);
                subscribe.setTo(idExtension);               
                connection.sendPacket(subscribe);   
                return true;

            } catch (XMPPException e) {
                System.err.println("Error in adding friend");
                return false;
            }
        } else {
            return false;
        }
    } 
```

它将向其他用户发送通知..允许编写此代码：-

```
btn_Allow = (Button)findViewById(R.id.btn_manageNotification_ALLOW);
        btn_Allow.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                //accept the friends subscription
                Presence subscribed = new Presence(Presence.Type.subscribed);
                subscribed.setTo(id);               
                connection.sendPacket(subscribed);

                mCustomProgressDialog = CustomProgressDialog.createDialog(
                        ManageNotification.this, "", "");
                mCustomProgressDialog.show();   
                mCustomProgressDialog.setCancelable(false); 
                new Thread(){
                    public void run() {

                        try {
                            sleep(5000);
                            //mXmconn.getContactList();

                            /*Presence subscribed = new Presence(Presence.Type.subscribe);
                            subscribed.setTo(id);               
                            System.out.println("The user is :"+id);
                            connection.sendPacket(subscribed);*/

                        } catch (InterruptedException e) {}                     
                        mReturnUserMenu.sendEmptyMessage(0);

                    };
                }.start();
            }
        }); 
```

同样，再次允许发起请求的用户再次执行此操作。

请帮忙。服务器上的订阅状态会立即更改，但在应用程序上它会在注销一次后更新。

这是代表列表的代码

```
public  void getContactList(){

        roster = connection.getRoster();

        Collection<RosterEntry> entries = roster.getEntries();
        System.out.println("Total=="+entries.size());
        mfriendList.clear();
        mfriendPendingList.clear();
        mfriendRequestList.clear();
        for (RosterEntry entry : entries) {
            mFriendsDataClass = new FriendsDataClass();

            mFriendsDataClass.friendName = entry.getUser().toString();

            String user = entry.getUser();

            int index_of_Alpha = user.indexOf("@");
            /*System.out.println("The current working user is : "+user);
            System.out.println("His status is"+entry.getType().toString());*/
            String subID = user.substring(0, index_of_Alpha);
            Presence availability = roster.getPresence(user);
            Mode userMode = availability.getMode();

            mFriendsDataClass.availability = "";
            mFriendsDataClass.friendNickName = subID;           
            mFriendsDataClass.friendStatus = stusMsg.toString();
            mFriendsDataClass.friendState = retrieveState_mode(availability.getMode(),availability.isAvailable());
            if(entry.getType().toString().equalsIgnoreCase("to")){
                //getContactList();
                mfriendRequestList.add(mFriendsDataClass);
            }else if(entry.getType().toString().equalsIgnoreCase("from")){
                //getContactList();
                mfriendPendingList.add(mFriendsDataClass);
            }else if(entry.getType().toString().equalsIgnoreCase("both")){
                //getContactList();
                mfriendList.add(mFriendsDataClass);
            }           
        }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:12:53.020

要发送您必须使用的请求，

```
roster.createEntry("mail_id", null, null); 
```

对于`Listening`请求，您必须使用`PacketListener`. 并检查`Presence`

```
Presence presence = (Presence) packet;
Presence presence_request = new Presence(Presence.Type.subscribed);
presence_request.setTo(presence.getFrom());
presence_request.setType(Presence.Type.subscribed);
presence_request.setFrom("current_logged_in_user");
connection.sendPacket(presence_request);
roster.createEntry(presence.getFrom(), null, null); 
```

# javascript - 如何跟踪来自 Adwords 的访客

> ID：13338518
> 
> 赞同：2
> 
> 时间：2012-11-12T04:49:19.237
> 
> 标签：javascript, cookies, google-ads-api

我的网站上有一个潜在客户表格，我们可以在其中跟踪访问者的来源。如果访问者来自 adwords，我想禁用下拉菜单并使用预定义的数据自动填充它。此表单不在登录页面上。有没有办法通过阅读 cookie 或任何其他方式来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:10:31.710

您可以使用 Google 的 URL 构建器标记您的目标 url，然后根据您从 url 获得的参数呈现您想要的任何内容

[http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033867&rd=1](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033867&rd=1)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-12T04:53:03.867

你应该使用[谷歌分析。](http://www.google.com/analytics/)

![在此处输入图像描述](../Images/72cce7c057200e93b236e2de19c59d21.png)

# ios - 变量名问题

> ID：13338520
> 
> 赞同：1
> 
> 时间：2012-11-12T04:49:40.093
> 
> 标签：ios, instance-variables

抱歉，如果这是一个初学者问题，但解决方案/正确的语法非常令人困惑。

使用 IOS，我试图找到一种使用另一个外部变量创建实例变量名称的方法。

例如，我创建了自定义类（例如 NSCustomItem），现在我想在循环中使用例程初始化多个单独的实例，结果如下：

```
NSCustomItem *item1
NSCustomItem *item2
NSCustomItem *item3 
```

我正在使用循环来生成多个对象。但是，在循环中，我似乎找不到使用标签或下标或命名字符串公式来创建对象名称的方法：

我一直在尝试像这样的语法想法

```
 (NSCustomItem *)item[i] = [[NSCustomItem alloc] init]; 
```

但是，这是行不通的。

有人可以协助或提供信息吗？赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:03:23.077

创建项目并将每个项目添加到[`NSMutableArray`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)如下所示：

```
NSMutableArray *items = [[NSMutableArray alloc] init];

// then within your loop:
{
    [items addObject:[[NSCustomItem alloc] init]];
} 
```

[然后要访问它们，您可以使用快速枚举](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocFastEnumeration.html)遍历数组：

```
for (NSCustomItem *item in items) {
    // do something with item
} 
```

或者查看[NSArray 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)`NSMutableArray`以了解访问（它是 的子类）中的对象的其他方法`NSArray`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:46:50.053

您不能直接执行此操作。但是你可以使用 an`NSMutableDictionary`来实现类似的东西，

```
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init]; 
```

然后，每次创建对象时，将其添加到字典中：

```
for (int i = 0; i < count; i++) {
  [dict setObject:[[NSCustomItem alloc] init] 
           forKey:[NSString stringWithFormat:@"item%d", i]];//dynamically creates NSCustomItem objects with names item1, item2 etc.. till item'count'
} 
```

现在，当您想使用它时，只需使用，

```
[dict valueForKey:item1];//equivalent to item1 
```

或者

```
[dict valueForKey:[NSString stringWithFormat:@"item%d", i]]; 
```

要访问`item1`( `item1.property`) 中的属性，请使用

```
[[dict valueForKey:item1] property] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T05:07:05.903

永远不要使用 UI/NS/MF 之类的前缀命名自定义对象/类。即，前缀有助于识别类所属的框架，用现有框架的前缀命名自己的对象不是一个好习惯，但是从技术上讲，这没问题。而且，在 iIOS 应用程序中，你总是可以使用类似 C 的语法，你使用的语法不是声明数组的正确 C 方式，如果想坚持 C syantax，你可以使用这样的东西-

```
CustomClass *aTemp[2];

//May use a for loop to populate the Array Elements
aTemp[0] = [[CustomClass alloc]init];
aTemp[1] = [[CustomClass alloc]init];    .... 
```

或者

```
CustomClass *aTemp[]= {[[CustomClass alloc]init],[[CustomClass alloc] init]}; 
```

或者

**编辑：**

```
CustomClass *aTemp[3];   

    for(int i=0;i<=2;i++){ 
     CustomClass *aCustomClass = [[CustomClass alloc]init]   

     // Changes/Customizations in the aCustomClass object 

      aTemp[i]= aCustomClass;
    } 
```

还要确保一切都很好`CustomClass`。

如果您想使用 Objective C API 编写，@smileyborg 给出的答案很好。

# java - 计算百分比“x/y * 100”总是得出 0？

> ID：13338531
> 
> 赞同：5
> 
> 时间：2012-11-12T04:51:22.467
> 
> 标签：java, math

在我的作业中，我必须制作一个简单版本的胡扯，由于某种原因，即使两个变量都不为 0，百分比赋值总是产生 0，这是代码。

```
import java.util.Random; 
```

标题，注意变量

```
public class Craps {
private int die1, die2,myRoll ,myBet,point,myWins,myLosses;
private double winPercent,lossPercent;
private Random r = new Random(); 
```

只需滚动两个模具并生产它们的一些。

```
public int roll(){
    die1 = r.nextInt(6)+1;
    die2 = r.nextInt(6)+1;
    return(die1 + die2);
} 
```

Play 方法，这只是循环游戏。

```
public void play(){
    myRoll = roll();
    point = 0;

    if(myRoll == 2 ||myRoll == 3 || myRoll == 12){
        System.out.println("You lose!");
        myLosses++;
    }else if(myRoll == 7 || myRoll == 11){
        System.out.println("You win!");
        myWins++;
    }else{
        point = myRoll;
        do {
            myRoll = roll();
        }while(myRoll != 7 && myRoll != point);
        if(myRoll == point){
            System.out.println("You win!");
            myWins++;
        }else{
            System.out.println("You lose!");
            myLosses++;
        }
    }
} 
```

这就是错误所在，这是测试方法。

```
public void tester(int howMany){
    int i = 0;
    while(i < howMany){
        play();
        i++;
    } 
```

错误就在这些赋值语句中

```
 winPercent = myWins/i * 100;
    lossPercent = myLosses/i* 100;
    System.out.println("program ran "+i+" times "+winPercent+"% wins "+ lossPercent+"% losses with "+myWins+" wins and "+myLosses+" losses");

} 
```

}

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-12T04:53:02.837

可能是因为您正在进行整数除法，并且分母大于分子。所以值将为零。

您可以更改此分配：-

```
winPercent = myWins/i * 100;
lossPercent = myLosses/i* 100; 
```

到： -

```
winPercent = myWins * 100.0/i;
lossPercent = myLosses * 100.0/i; 
```

有两点需要考虑：-

*   `float`通过将分子转换为： -使您的除法成为除法的浮点数

    ```
    winPercent = (float)(myWins)/i * 100; 
    ```

*   此外，在整数除法的情况下，它的*关联性* 和*优先*级问题。由于`*`和`/`具有*相同的优先*级，并且具有*从左到右的关联性*。因此，`myWins / i`将首先进行评估。因此，该值很有可能为 0。

    因此，只需更改 和 的顺序，`*`使其`/`首先`*`发生。

注意，我`100.0`在乘法中使用过。因为乘以`100`将再次导致*截断*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T04:55:32.940

看一眼

```
 winPercent = myWins/i * 100;
  lossPercent = myLosses/i* 100; 
```

由于`myWins`和都是整数，Java 使用整数运算来返回结果`myLosses`。`i`因为`myWins <= i`的结果`myWins / i`总是 0 或 1。

您可以通过多种方式解决此问题，例如

```
 winPercent = (1.0f * myWins / i) * 100; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-13T14:10:16.727

问题陈述：

```
winPercent = myWins/i * 100;
lossPercent = myLosses/i* 100; 
```

给定：
myWins 或 myLosses = 整数
i = 整数

原因：
除法可能以十进制形式出现，由编译器以整数格式在内部存储。由于传递的值是整数格式，因此只有整数部分（小数部分之前）存储在临时位置。所以实际价值为零。

解决方案：
`winPercent = ((float)myWins/i)*100`;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-13T14:17:07.343

不要类型转换为 int。使用浮点数或双精度数。当您进行整数运算时，不考虑小数部分。

# php - HTML 未显示在视图页面源代码中

> ID：13338533
> 
> 赞同：0
> 
> 时间：2012-11-12T04:51:32.223
> 
> 标签：php, html

**摘要：**为学校设计一个文件管理系统，目前正在开发的页面将在 HTML 表格中显示下载列表

**问题：**当拉起我放在网站上的页面时，浏览器上没有显示任何内容。当我检查查看页面源时，没有列出任何内容。不知何故，我的 HTML 都没有被识别，我不知道为什么。

当我将我的 HTML 开始标签移到 php 语句上方时，它是唯一出现在视图页面源代码上的东西。我在这里做错了什么？

**更新：我注释掉了`download_list.php`文件顶部的 php 并显示了我的 HTML。所以我的 php.ini 显然有问题。

**编码：**

**下载列表.php：**

```
 ini_set( 'display_errors', TRUE );
    error_reporting( E_ALL);

    require_once('database.php');

    // Get all categories
    $query = 'SELECT * FROM file
              ORDER BY fileID';
    $files = $db->query($query);

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<!-- the head section -->
<head>
    <title>My Downloads</title>
    <link rel="stylesheet" type="text/css" href="main.css" /> 
</head>

<body>

    <div id="container">

            <h1>Category List</h1>
        <table>
            <tr>
                <th>Name</th>
                <th>&nbsp;</th>
            </tr>
            <?php foreach ($files as $file) : ?>
            <tr>
                <td><?php echo $file['filename']; ?></td>
                <td>
                    <form action="download_file.php" method="post"
                        id="download_file_form">
                        <input type="hidden" name="category_id"
                               value="<?php echo $file['filename']; ?>"/>
                        <input type="submit" value="Download"/>
                    </form>
                </td>
            </tr>
            <?php endforeach; ?>
    </table>
    <br />

    <h2>Add Category</h2>
    <form action="add_category.php" method="post"
          id="add_category_form">

        <label>Name:</label>
        <input type="input" name="name" />
        <input id="add_category_button" type="submit" value="Add"/>
    </form>
    <br />
    <p><a href="index.php">List Products</a></p>

    </div>

</body>
</html> 
```

**数据库.php：**

```
<?php

    mysql_connect("filler.hostica.com", "filler", "filler") or die(mysql_error());
    mysql_select_db("filler") or die(mysql_error());

    exit();

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T05:19:30.270

Database.php 可能不应该调用`exit();`

编辑：根据 Sean 的评论：您也在调用 $db->query() 类，但该类不在 database.php 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T05:31:06.637

`exit();`在 database.php 中删除或注释。

# ruby-on-rails - 没有内置“错误”方法从 Rails 闪存读取错误的原因？

> ID：13338534
> 
> 赞同：0
> 
> 时间：2012-11-12T04:51:34.343
> 
> 标签：ruby-on-rails, rails-flash

读完[这篇](https://stackoverflow.com/questions/5798791/what-is-the-difference-when-using-flash-error-alert-and-notice)，我发现error、notice、alert之间没有太大的区别，你可以在flash中放任何你想要的东西。

但是，我注意到似乎有用于从视图中的 flash 获取通知和警报的内置方法，但没有用于检索错误消息的内置方法。

我想知道为什么会这样。不鼓励在闪存中使用错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:06:44.733

不，当然不鼓励使用 flash 来解决错误，实际上它是[官方文档](http://guides.rubyonrails.org/action_controller_overview.html#the-flash)的一部分。

您看到警报和通知的访问器和内置方法仅仅是因为它们是最常见的。正如您可能在链接的问题中看到的那样，`flash`它只是一个哈希，您可以使用任何适合您的应用程序的密钥。我相信，至少从我的经验来看，通常的做法`:notice`是针对报告正确完成任务的消息、`:alert`非显示停止错误和`:error`显示停止错误的消息。

# jquery-mobile - 如何使用 Jquery Mobile 删除点以便可以看到所有标题？

> ID：13338535
> 
> 赞同：0
> 
> 时间：2012-11-12T04:51:57.403
> 
> 标签：jquery-mobile, formatting, usability

我用 Jquery Mobile 做了一个应用程序。我想问，如何删除点以便可以看到所有标题？因为当我缩小浏览器时，标题变成了点。我想让它变得正常。谢谢

这是屏幕截图： [应用程序](https://docs.google.com/file/d/0B6MtEMbZDsHCeXg3Y1NKUUFrN0E/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:12:50.100

也许它使用[`text-overflow`](http://www.w3.org/TR/css3-ui/#text-overflow0)带有值的 CSS 属性`ellipsis`？

如果是这样，您必须覆盖[`overflow`](http://www.w3.org/TR/CSS2/visufx.html#propdef-overflow)要使用的属性`visible`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-13T21:35:13.660

不是 100% 确定你在问什么，但我有一个类似的问题，即标题居中，因此如果它们没有显示点，所以我修改了 /jquery.mobile-1.3.2.css 文件第 1163 行

```
.ui-header .ui-title, .ui-footer .ui-title { margin: .6em 30% .8em; 
```

至

```
margin: .6em 0.8em; 
```

不必要的填充，因为它无论如何都是居中的

# go - 如何从打开的 TCPConn* 中检索 IP 地址？

> ID：13338537
> 
> 赞同：6
> 
> 时间：2012-11-12T04:52:08.143
> 
> 标签：go

我有一个从 TCPListener.acceptTCP 接受的 TCPConn*。我只想将 IP 地址（无端口信息）作为字符串或 IP 获取。什么是正确的（即最小的转换/字符串操作）方法来实现这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T06:18:25.627

获取IP，作为IP对象，最直接的方式应该是

```
tcpconn.RemoteAddr().(*net.TCPAddr).IP 
```

使用类型断言并没有错，在这种情况下，它实际上是预期的。

# javascript - 是什么导致我的测试返回错误？

> ID：13338541
> 
> 赞同：0
> 
> 时间：2012-11-12T04:52:35.540
> 
> 标签：javascript, alfresco, alfresco-share

我在 Alfresco 的回购端设置了一个 webscript。webscript 使用 POST 方法，接受并返回 json，并且只是为了设置一些属性来支持客户端 ajax 应用程序。该脚本的控制器代码如下：

```
/**
 * Document Bundle Management Property setter method
 *
 * @method POST
 */

function main() {
        var nodeRef=args.doc,
            salesOrderNumber=json.get("salesOrderNumber"),
            stockCode=json.get("stockCode"),
            VIN=json.get("VIN"),
            customerCode=json.get("customerCode"),
            resultObj={result:"failure",problems:[],debug:[]};
        resultObj.debug.push("Webscript begins. Variables:");
        resultObj.debug.push("\tsalesOrderNumber: " + salesOrderNumber);
        resultObj.debug.push("\tstockCode: " + stockCode);
        resultObj.debug.push("\tVIN: " + VIN);
        resultObj.debug.push("\tcustomerCode:" + customerCode);
        if (nodeRef) {
                resultObj.debug.push("Received nodeRef variable. Checking validity");
                doc=utils.getNodeFromString(nodeRef);
                if (doc && doc.isDocument) {
                        resultObj.result="success";
                        resultObj.debug.push("nodeRef valid, checking document type");
                        if (doc.isSubType("my:documentBundle")) {
                                resultObj.debug.push("Document is already of type my:documentBundle. Not specializing");
                        } else {
                                resultObj.debug.push("Document is not of type my:documentBundle. Specializing");
                                doc.specializeType("my:documentBundle");
                        }
                        if (salesOrderNumber && salesOrderNumber.length && salesOrderNumber.length>0) {
                                doc.properties["salesOrderNumber"]=salesOrderNumber;
                                resultObj.debug.push("Set document salesOrderNumber to " + salesOrderNumber);
                        } else {
                                resultObj.debug.push("salesOrderNumber was not received, was blank or of zero length. ignoring");
                        }
                        if (stockCode && stockCode.length && stockCode.length>0) {
                                doc.properties["stockCode"]=stockCode;
                                resultObj.debug.push("Set document stockCode to " + stockCode);
                        } else {
                                resultObj.debug.push("stockCode was not received, was blank or of zero length. ignoring");
                        }
                        if (VIN && VIN.length && VIN.length>0) {
                                doc.properties["VIN"]=VIN;
                                resultObj.debug.push("Set document VIN to " + VIN);
                        } else {
                                resultObj.debug.push("VIN was not received, was blank or of zero length. ignoring");
                        }
                        if (customerCode && customerCode.length && customerCode.length>0) {
                                doc.properties["customerCode"]=customerCode;
                                resultObj.debug.push("Set document customerCode to " + customerCode);
                        } else {
                                resultObj.debug.push("customerCode was not received, was blank or of zero length. ignoring");
                        }
                        doc.save();
                        resultObj.debug.push("document saved");
                } else {
                        resultObj.problems.push("Invalid nodeRef supplied!");
                }
        } else {
                resultObj.problems.push("No nodeRef supplied!");
        }
        model.obj=resultObj;
}

main(); 
```

我的问题出现在 4 行中，例如: `if (salesOrderNumber && salesOrderNumber.length && salesOrderNumber.length>0) {`，即使我确定变量包含长度不为零的字符串，它似乎总是评估为 false。如果我查看返回的调试属性，我会看到以下内容：

```
0: "Webscript begins. Variables:"
1: "    salesOrderNumber: test"
2: "    stockCode: test"
3: "    VIN: test"
4: "    customerCode:test"
5: "Received nodeRef variable. Checking validity"
6: "nodeRef valid, checking document type"
7: "Document is already of type my:documentBundle. Not specializing"
8: "salesOrderNumber was not received, was blank or of zero length. ignoring"
9: "stockCode was not received, was blank or of zero length. ignoring"
10: "VIN was not received, was blank or of zero length. ignoring"
11: "customerCode was not received, was blank or of zero length. ignoring"  
12: "document saved" 
```

所以，我可以看到所有四个变量都有值“test”。如果在萤火虫或 js 控制台我输入

```
a="test";
if (a && a.length && a.length>0) then console.log("true") else console.log("false") 
```

正如预期的那样，我得到了真正的输出。我看不出是什么影响了这一点——我几乎每天都使用这个令人难以置信的基本条件来测试字符串，然后再使用它们，但这次我显然遗漏了一些东西。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:19:15.980

**编辑：**根据您在下面的评论，我有一个新理论。由于这些似乎是某种对象而不是原始字符串，因此该`length`方法是造成问题的原因：

这个简单的测试与您的问题的行为方式完全相同：

```
var x = {
    toString: function() { return 'test'; },
    length: function() { return 'something'; }
};

console.log('x is: ' + x);
if (x && x.length && x.length > 0)
    console.log('passed');
else
    console.log('failed'); 
```

当您将它连接到一个字符串时，它报告为“测试”，但它没有通过测试，因为它`length > 0`是错误的**，因为长度是一个函数**。我建议将其转换为字符串。

* * *

另外，我要指出你的一些测试是不必要的。`salesOrderNumber.length > 0`当且仅当为假时才会为假`salesOrderNumber.length`。同样，`salesOrderNumber.length`只有当且仅当`salesOrderNumber`是空字符串（对于字符串）时才会是错误的，因此您可以简单地：

```
salesOrderNumber = String(salesOrderNumber);
if (salesOrderNumber)
    console.log('ok');
else
    console.log('oops'); 
```

# vim - 在 80 个字符处换行

> ID：13338542
> 
> 赞同：3
> 
> 时间：2012-11-12T04:52:41.770
> 
> 标签：vim, text, macros, macvim

我想将超过 80 个字符的行拆分为与原始行具有相同缩进级别的多行。它应该只在空白字符处进行剪切，以免单词被一分为二。所以这：

```
 \begin{enumerate}
     \item Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum sed tempus odio. Phasellus lobortis suscipit mattis. Nulla facilisi. In nisi turpis, tristique ut accumsan at, sagittis a orci. Ut nisl enim, eleifend quis fermentum commodo, fermentum a velit. Maecenas a augue nec leo fermentum auctor et ut turpis. Donec ultricies ligula sed mi suscipit sagittis.
 \end{enumerate} 
```

...会变成这样：

```
\begin{enumerate}
    \item Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum
    sed tempus odio. Phasellus lobortis suscipit mattis. Nulla facilisi. In
    nisi turpis, tristique ut accumsan at, sagittis a orci. Ut nisl enim,
    eleifend quis fermentum commodo, fermentum a velit. Maecenas a augue nec
    leo fermentum auctor et ut turpis. Donec ultricies ligula sed mi suscipit
    sagittis.
\end{enumerate} 
```

我将如何编写一个宏来做到这一点？有没有更好的办法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T07:51:20.533

```
:se tw=80 
```

然后标记文本并输入`gq`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:14:00.740

您可以输入如下或使用`q`记录。

```
:.!fmt --width=80 
```

# java - 无法从 .html 页面执行 servlet

> ID：13338544
> 
> 赞同：0
> 
> 时间：2012-11-12T04:53:01.250
> 
> 标签：java, tomcat, servlets

servlet 在 Tomcat 中加载良好。现在我可以很好地访问我的原型 .html 页面，但是当我单击按钮执行 servlet 时，出现以下错误：

```
HTTP Status 500 - Error instantiating servlet class dbServlet

type Exception report

message Error instantiating servlet class dbServlet

description The server encountered an internal error that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: Error instantiating servlet class dbServlet
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
java.lang.Thread.run(Unknown Source)
root cause

java.lang.ClassNotFoundException: dbServlet
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
java.lang.Thread.run(Unknown Source) 
```

下面是我的原型 servlet 的代码：

```
import javax.servlet.*;
import javax.servlet.http.*;
import java.io.*;

@SuppressWarnings("serial")
public class databaseServlet extends HttpServlet {
protected void doGet (HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
response.setContentType("text.html");
PrintWriter out = response.getWriter();

out.println("<xml version = \"1.0\"?>");
out.println("<!DOCTYPE html PUBLIC \"-//W3C//DTD " +
"XHTML 1.0 Strict//EN\" \"http://www.w3.org" +
"/TR/xhtml1/DTD/xhtml1-strict.dtd\">");
out.println("<html xmlns = \"http://www.w3.org/1999/xhtml\">");

out.println("<head>");
out.println("<title>MySQL Servlet</title>");
out.println("<style type='text/css'>");
out.println("body{background-color: blue}");
out.println("</style>");
out.println("</head>");

out.println("<body>");
out.println("<h1>The MySQL Servlet Works!</h1>");
out.println("</body>");

out.println("</html>");
out.close();
}
} 
```

有谁知道堆栈跟踪可能意味着什么？

我很感激帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T04:55:27.503

> java.lang.ClassNotFoundException: dbServlet org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)

从上面的堆栈跟踪：

您的 servlet 是`databaseServlet`，但您正在调用`dbServlet`. 好像输入有误`web.xml`

注意：顺便说一下，java 命名约定建议类名以大写字母开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T05:25:24.327

您没有在问题中包含 Servlet 映射。

```
java.lang.ClassNotFoundException: dbServlet 
```

您有一个名为的 Servlet `databaseServlet`，并且您已`dbServlet`在部署描述符中声明。

您的 Servlet 条目应该是这样的。

例子：

```
<servlet>
    <servlet-name>DatabaseServlet</servlet-name>
    <servlet-class>controller.DatabaseServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>DatabaseServlet</servlet-name>
    <url-pattern>/dbServlet</url-pattern>
  </servlet-mapping> 
```

与问题无关：

尝试使用 MVC 模式，您可以在其中使用 JSP 进行演示，将 Servlet 作为控制器来重定向 Web 应用程序的流程，并将模块作为实体。

# java - 从 JFileChooser 使用 KeyEvent.VK_ENTER

> ID：13338547
> 
> 赞同：3
> 
> 时间：2012-11-12T04:53:22.423
> 
> 标签：java, swing

我有一个带有某些 JComponents（例如 JPanels）的应用程序，它们能够在 InputMap/ActionMap 的帮助下处理 KeyEvent.VK_ENTER。

这很好用，有一个例外：如果我有一个 JFileChooser 来选择一个文件，并且我用 from 键盘完成了这个选择，这个键事件将传递给我的应用程序的下一个活动 JPanel。文件选择运行良好，但按下/释放/键入回车的事件被转发，导致在此面板上执行与该面板上的 KeyEvent.VK_ENTER 相关的操作！如果我通过鼠标完成 JFileChooser，它会按预期工作，并且在下一个活动的 JPanel 上什么也不做。

如何在 JFileChooser 上使用这样的 KeyEvent？我试图在涵盖 JFileChooser 的类中建立一个 KeyBinding，但这不起作用。我在这里添加这部分的代码：

```
public myClass(String theirDir){
    fc = new FileChooser(theirDir);
    this.bindKeyToAction(fc, KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0, true);
}// end constructor()

private bindKeyToAction(JComponent theirComp, KeyStroke theirStroke){
    InputMap localInput = theirComp.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
    localInput.put(theirStroke, theirStroke,.getKeyChar());

    theirComp.getActionMap().put(theirStroke.getKeyChar(), this.generateAction(new String("theCommand");
}// end bindKeyToAction

private Action generateAction(String theirID){
    final String localID = theirID;

    return new AbstractAction(theirID){
        public void actionPerformed(ActionEvent theirEve){
           do something....
        }
    };
}// end generateAction()

...
}// end myClass 
```

但它永远不会达到“做某事......”？！？

# python - 在 Python 图中键入希腊字母等

> ID：13338550
> 
> 赞同：59
> 
> 时间：2012-11-12T04:53:41.463
> 
> 标签：python, matplotlib

我需要在绘图的轴标签中输入希腊字母和埃符号。所以例如

```
fig.gca().set_xlabel("$wavelength\, (Angstrom)$")
fig.gca().set_ylabel("$lambda$") 
```

除了我实际上想要用实际符号替换“Angstrom”和“lambda”。我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-11-12T04:55:27.473

您需要使字符串[原始](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)并使用[latex](http://matplotlib.org/users/usetex.html#text-rendering-with-latex)：

```
fig.gca().set_ylabel(r'$\lambda$') 
```

从 matplotlib 2.0 开始，默认字体[支持大多数西方字母](http://matplotlib.org/users/dflt_style_changes.html#fonts)并且可以很简单

```
ax.set_xlabel('λ') 
```

与 Unicode。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-01-03T21:49:56.757

您不仅可以将原始字符串添加到 matplotlib，还可以在 matplotlibrc 或本地指定字体：

```
from matplotlib import rc

rc('font', **{'family':'serif','serif':['Palatino']})
rc('text', usetex=True) 
```

这会改变你的衬线乳胶字体。您也可以像这样指定 sans-serif Helvetica

```
rc('font',**{'family':'sans-serif','sans-serif':['Helvetica']}) 
```

其他选项是`cursive`和`monospace`它们各自的字体名称。您的标签将是

```
fig.gca().set_xlabel(r'wavelength $5000 \AA$') 
```

如果字体不提供埃符号，您可以尝试使用`\mathring{A}`

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-10-14T00:35:32.293

如果你想在希腊字母前面有一个正常的字符串，请确保你有正确的顺序：

```
plt.ylabel(r'Microstrain [$\mu \epsilon$]') 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-09-12T07:55:10.270

Python 3.x：小希腊字母从 945 编码到 969 所以，alpha 是`chr(945)`， omega 是`chr(969)` 这样，只需键入

```
print(chr(945)) 
```

列表中的小希腊字母列表：

```
greek_letterz=[chr(code) for code in range(945,970)]

print(greek_letterz) 
```

现在， alpha 是 `greek_letterz[0]`， beta 是`greek_letterz[1]`， aso

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-12-04T10:29:53.183

为什么不只使用文字字符？

```
fig.gca().set_xlabel("wavelength, (Å)")
fig.gca().set_ylabel("λ") 
```

如果您使用的是 python 2，则可能必须将其添加到文件中：

```
# -*- coding: utf-8 -*-
from __future__ import unicode_literals  # or use u"unicode strings" 
```

为不容易在键盘上键入的字符定义常量可能会更容易。

```
ANGSTROM, LAMDBA = "Åλ&quot; 
```

然后你可以在其他地方重复使用它们。

```
fig.gca().set_xlabel("wavelength, (%s)" % ANGSTROM)
fig.gca().set_ylabel(LAMBDA) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-25T08:56:07.907

你可以在 python 中使用 unicode 字符。请参阅以下链接[Unicode 字符用于 Python 中的工程师](https://pythonforundergradengineers.com/unicode-characters-in-python.html) 。

# sql-server-2008-r2 - 基于最大日期或最大日志 ID 的 SQL 查询

> ID：13338554
> 
> 赞同：2
> 
> 时间：2012-11-12T04:54:18.823
> 
> 标签：sql-server-2008-r2

我在表中有以下数据（我使用的是 SQL Server 2008R2）：

客户代码、设备到期日期、设备名称、日志 ID

```
S001, NULL, Dvc A, 1
S002, NULL, Dvc B, 2
S002, NULL, Dvc A, 3
S003, 2010-01-01, Dvc A, 4
S004, 2011-06-25, Dvc B, 5
S004, 2012-02-10, Dvc A, 5 
```

日志 ID 列基于运行号。

我想根据以下条件为每个客户代码选择一条记录：
- 如果设备到期日期不为空，则采用最新日期的记录
- 如果所有到期日期均为空，则采用最新记录（最大日志 ID）

因此，选定的记录将是：

```
Customer Code, Device Expiry Date, Device Name, Log ID
S001, NULL, Dvc A, 1
S002, NULL, Dvc A, 3
S003, 2010-01-01, Dvc A, 4
S004, 2012-02-10, Dvc A, 5 
```

查询的输出将进一步与主客户代码连接：

```
Customer Code, Member Type
S001, Silver
S002, Gold
S003, Silver
S004, Silver
S005, Gold 
```

加入后，最终结果将是：

```
Customer Code, Member Type, Device Expiry Date, Device Code
S001, Silver, NULL, Dvc A
S002, Gold, NULL, Dvc A
S003, Silver, 2010-01-01, Dvc A
S004, Silver, 2012-02-10, Dvc A
S005, Gold, NULL, NULL 
```

我想到的是使用几个子查询来获取设备记录。请提供一些关于获得上述结果的想法。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:29:11.170

您可以尝试以下*（未经测试）*

```
;WITH q AS (
  SELECT  *, rn = ROW_NUMBER() OVER (PARTITION BY [Customer Code] ORDER BY [Log ID] DESC, CASE WHEN ISNULL([Device Expiry Date]) THEN 0 ELSE [Device Expiry Date]) END DESC)
  FROM    Devices
)
SELECT  *
FROM    q
WHERE   rn = 1 
```

这个想法是为每一行添加一个行号

*   为每个客户重置
*   从最大的开始`Log ID`
*   并对那些有日期的记录使用虚拟`NULL`日期

现在所需要做的就是从结果集中选择此 rownumber = 1 的所有记录。

# ruby-on-rails - Ruby on Rails：从数组中为选择菜单创建哈希

> ID：13338555
> 
> 赞同：0
> 
> 时间：2012-11-12T04:54:18.363
> 
> 标签：ruby-on-rails, simple-form

我有一个数组：

> @positions = ["external_footer", "external_top_menu", "external_side_menu"]

我想创建一个选择框，以便它为选项生成人性化的值，为选项值生成原始值。所以我想要这样的东西：

```
<option value="external_footer">External Footer</option> 
```

现在我正在这样做：

> = f.input：位置，集合：@positions.collect{|position| { 位置 => 位置.人性化}}

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T05:45:10.813

我找到了一个解决方案：

> = f.input：位置，集合：@positions.collect{|p| [ p.humanize, p ] }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:05:42.560

你`@positions`的控制器里有一个吗？，如果没有，我认为你应该改变：

```
positions = ["external_footer", "external_top_menu", "external_side_menu"] 
```

至：

```
@positions = ["external_footer", "external_top_menu", "external_side_menu"] 
```

你可以试试这个：

```
= f.input :position, collection: @positions.collect { |position| position.humanize } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T05:48:41.483

首先，你的语法可能是错误的——你有一对额外的大括号。尝试`= f.input :position, collection: @positions.collect{|position| position.humanize}` 或`= f.input :position, collection: @positions.collect(&:humanize)`

假设您使用的是 SimpleForm，它可能不知道为选项标签和值调用什么方法。尝试显式传递`:label_method`and或作为 lambda 传递，如此[处](http://simple-form.plataformatec.com.br/#usage/collections)所述。`:value_method``humanize`

# graph - 无法获取过去 7 天内添加照片的所有好友列表使用图形 API

> ID：13338557
> 
> 赞同：1
> 
> 时间：2012-11-12T04:54:23.863
> 
> 标签：graph, facebook-rest-api

我们正在使用以下查询来获取过去 7 天向 facebook 添加照片的所有朋友列表。它以前可以工作，但现在不工作了，只列出用户列表的一部分，用户 ID 范围在 1000000000 到 1200000000 之间。但是我们的朋友 ID 范围从 1000000000 到 1500000000

https://graph.facebook.com/fql?access_token=[accessToken]&q=select uid，从用户那里选择 uid 的名称（从所有者所在的专辑中选择所有者（从 uid1=me() 的朋友中选择 uid2）和 modified_major > now()-3600*24*7) 按名称排序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:03:36.080

Adding more details to my question. I have around 17 friends who added photos in last 7 days. But above query returns only first 7 friends name only. If I give ranged query like https://graph.facebook.com/fql?access_token=[accessToken]&q=select uid, name from user where uid in (select owner from album where owner in (select uid2 from friend where uid1=me() and uid2 > 12000000000 < uid2 1300000000) and modified_major > now()-3600*24*7) ORDER BY name. It returns next set of 5 friends whose userids are between given range. Again udi2 >1300000000 and uid2 <1400000000 and it returned next 2 friends. I can't give paginated query in my application and my above mentioned query without range should return all the friends list. (It was working fine for more than one year and suddenly not been working for couple of months)

# scheme - 方案：嵌套调用/cc 如何为协程工作？

> ID：13338559
> 
> 赞同：5
> 
> 时间：2012-11-12T04:54:26.383
> 
> 标签：scheme, coroutine, callcc, continuation

我正在查看来自[http://community.schemewiki.org/?call-with-current-continuation](http://community.schemewiki.org/?call-with-current-continuation)的协程的以下示例：

```
 (define (hefty-computation do-other-stuff) 
    (let loop ((n 5)) 
      (display "Hefty computation: ") 
      (display n) 
      (newline) 
      (set! do-other-stuff (call/cc do-other-stuff)) ; point A
      (display "Hefty computation (b)")  
      (newline) 
      (set! do-other-stuff (call/cc do-other-stuff)) 
      (display "Hefty computation (c)") 
      (newline) 
      (set! do-other-stuff (call/cc do-other-stuff)) 
      (if (> n 0) 
          (loop (- n 1))))) 
```

多余的工作：

```
 ;; notionally displays a clock 
 (define (superfluous-computation do-other-stuff) 
    (let loop () 
      (for-each (lambda (graphic) 
                  (display graphic) 
                  (newline) 
                  (set! do-other-stuff (call/cc do-other-stuff))) 
                '("Straight up." "Quarter after." "Half past."  "Quarter til.")) ; point B
      (loop))) 

(hefty-computation superfluous-computation) 
```

对于 call/cc 的第一次使用，上下文应该是什么？当我说上下文时，我的意思是由于 callcc 的跳转，我们应该“返回”到哪里？

据我了解，第一次调用 call/cc 时，do-other-stuff 本质上变成了一个过程，执行多余计算的代码，然后在集合之后立即跳转到该点！（A点）。第二次，它将“跳转到 B 点”行为包裹在“跳转到 A 点并执行上下文，或 A 点之后的任何代码”周围。它是否正确？

如果设置，此代码似乎不起作用！实际发生了。或者是套装！这段代码有必要工作吗？

对正在发生的事情进行可视化表示确实会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T05:39:27.923

的上下文`call/cc`是从哪里`call/cc`调用的。您*几乎*可以想到一个`call/cc`类似的方法`goto`，它将代码直接跳回到您之前的位置并`(call/cc whatever)`用返回值替换。

`call/cc`基本上是说，“让我们去做这个功能，然后放弃它，然后跳回到这里，忘记它在做什么”

好的，当我第一次尝试理解`call/cc`时，我发现这段代码非常混乱，所以让我们看一个简化的协程示例：

```
(define r1
  (lambda (cont)
    (display "I'm in r1!")
    (newline)
    (r1 (call/cc cont))))

(define r2
  (lambda (cont2)
    (display "I'm in r2!")
    (newline)
    (r2 (call/cc cont2)))) 
```

好的，这与您的代码**的概念完全相同。**但这要简单得多。

在这种情况下，如果我们称之为`(r1 r2)`打印

```
I'm in r1
I'm in r2
I'm in r1
I'm in r2    
I'm in r1
I'm in r2    
I'm in r1
I'm in r2
... 
```

为什么？因为`r1`first 接受 r2，`cont`所以它向我们宣布它在 r1 中。`(call/cc cont)`然后它以aka的结果在自身上递归`(call/cc r2)`。

好的，那么这有什么回报？well`(call/cc r2)` 将开始执行 r2 并宣布它在 r2 中，然后以`(call/cc cont2)`. 好的，那`cont2`又是什么？`cont2`是 in 之前该表达式的延续`r1`。因此，当我们在这里调用它时，我们会将一个延续传回我们当前所在的位置。然后我们忘记了我们在 r2 中所做的任何事情并跳回执行 r1。

`r1`这在现在重复。我们宣布内容，然后跳回到我们之前在 r2 中的位置和我们之前的表达式，`(call/cc cont2)`返回一个延续到我们所在的位置`r1`，然后我们继续我们的快乐无限循环。

## 返回您的代码

在您的代码中，概念完全相同。其实`superfluous-computation`和上面的功能几乎是一模一样的，你停下来想一想。那么`set!`s怎么了？在这段代码中，他们所做的只是将 的值更改为`do-other-work`最新的延续。就是这样。在我的示例中，我使用了递归。在这个例子中，他们使用`set!`.

# php - 为什么此代码输出错误？

> ID：13338560
> 
> 赞同：-1
> 
> 时间：2012-11-12T04:54:28.060
> 
> 标签：php, html

我是php写作的新手。在我的第一次尝试中，我在将 html 标签输入到 php 时遇到问题。

此代码输出错误：

```
<?php
$a="Begin";
$b=12;
echo $b . " " . $a . " " . "This is php file <br/>";
echo strlen($a);
echo strpos($a,"in") . "<br/>";
echo addcslashes($a,"i")";
?> 
```

这是我收到的错误消息：

```
Parse error: syntax error, unexpected '"', expecting ',' or ';' in /home/specials/public_html/bextool.com/1.php on line 7 
```

有没有机构可以解释一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:55:39.630

这一行：

```
echo addcslashes($a,"i")"; 
```

应该

```
echo addcslashes($a,"i"); 
```

您有时可以在编辑器中告诉您缺少 a`"`或其他内容时颜色是不同的。在这种情况下，您可以看到最后一个分号不像其他分号那样是黑色的——这是一个麻烦的迹象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:00:01.420

删除第`"`7 行中的最后一个并使其如下所示：

```
echo addcslashes($a,"i"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T05:09:31.717

删除一个额外的双引号`"`

```
echo addcslashes($a,"i")"; 
```

做了

```
echo addcslashes($a,"i"); 
```

# c# - 如何打乱字符串C#？

> ID：13338562
> 
> 赞同：0
> 
> 时间：2012-11-12T04:54:31.697
> 
> 标签：c#, .net

我编写代码来打乱单词我正在创建简单的游戏混乱

```
 string jumble = theWord;
         int length = jumble.Count();
         for (int i = 0; i < length; ++i)
         {
             int index1 = (rand.Next() % length);
             int index2 = (rand.Next() % length);

             char  temp =jumble[index1];
             jumble = jumble.Replace(jumble[index1], jumble[index2]);
             jumble = jumble.Replace(jumble[index1], temp);

         } 
```

更新代码

```
 string jumble = theWord;
         int length = jumble.Count();
         for (int i = 0; i < length; ++i)
         {
             int index1 = (rand.Next() % length);
             //int index2 = (rand.Next() % length);

         char temp = jumble[index1];
         jumble[i] = jumble[index1 - 1];
         jumble[i] = temp;

         } 
```

> 错误 1 ​​属性或索引器 'string.this[int]' 无法分配给 - 它是只读的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T05:28:02.787

为了排列的清晰和良好的分布，我会选择这个（可能是出于性能考虑）：

```
public static class Ext
{
    private static Random rand = new Random();

    public static string Shuffle(this String str)
    {
        var list = new SortedList<int,char>();
        foreach (var c in str)
            list.Add(rand.Next(), c);
        return new string(list.Values.ToArray());
    }
} 
```

*   注意其他答案：一个是严重偏见，另一个不会给出所有可能的洗牌。这些都是有效的答案，但如果你不关心这种东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T04:56:19.930

```
 StringBuilder jumbleSB = new StringBuilder();
         jumbleSB.Append(theWord);
         int lengthSB = jumbleSB.Length;
         for (int i = 0; i < lengthSB; ++i)
         {
             int index1 = (rand.Next() % lengthSB);
             int index2 = (rand.Next() % lengthSB);

             Char temp = jumbleSB[index1];
             jumbleSB[index1] = jumbleSB[index2];
             jumbleSB[index2] = temp;

         }

         Console.WriteLine(jumbleSB);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T05:10:22.987

```
var jumble = new StringBuilder("theWord");
int length = jumble.Length;
var random = new Random();
for(int i=length-1; i>0; i--)
{
    int j = random.Next(i);
    char temp = jumble[j];
    jumble[j] = jumble[i];
    jumble[i] = temp;
}
Console.WriteLine(jumble); 
```

# objective-c - 如何在 Master/Detail 模板中更新“Master”UIPopoverController 的尺寸

> ID：13338565
> 
> 赞同：4
> 
> 时间：2012-11-12T04:54:56.290
> 
> 标签：objective-c, ios, uipopovercontroller, master-detail

我有一个使用 iPad 的 Master/Detail 模板构建的项目。当它使用 iOS 5.0 开发时，只需通过执行以下操作（例如）调整弹出框内的视图控制器，即可轻松更新弹出视图：

```
self.contentSizeForViewInPopover = GCRect(500.0, 500.0) 
```

这将采用显示的默认 popoverview 并使其更宽，以便我可以在屏幕上以更少的行显示更多内容。

然而，一旦我在 iOS 6 上查看，我注意到实际的 popoverview 完全不同，看起来更像是一个“滑块”视图，因为一旦你点击顶部的按钮，popoverview 现在从左手滑过右侧和大小不再​​更新。我需要做什么才能让这个“滑块”变宽？

![在此处输入图像描述](../Images/6b85827748bb10997fbebe57bc3b14b4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:51:35.127

您只是无法调整 UISplitViewController 视图的大小。考虑使用一些第三方组件或制作自己的组件以实现所需的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:08:29.847

你不能破解默认的 UISplitViewController。我在这方面已经走了很远，但你最终会得到意想不到的断言。

如果你真的想要让它更宽，你必须考虑使用 MGSplitViewController：[https ://github.com/mattgemmell/MGSplitViewController](https://github.com/mattgemmell/MGSplitViewController)

它提供了通过以下方法设置母版宽度的能力：

`- (void)setSplitPosition:(float)posn animated:(BOOL)animate;`

# algorithm - 修改合并排序算法

> ID：13338568
> 
> 赞同：0
> 
> 时间：2012-11-12T04:55:11.473
> 
> 标签：algorithm, mergesort

描述一种改进的归并排序算法，其中给定的序列被分成三个大小相等的子序列，大约三分之一。渐近地分析算法的时间复杂度。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:59:49.607

这可能是你的功课，但我建议你阅读 Cormen、Lierson 和 Rivest 的第 2 章。

解决这个递归关系 - T(n) = 3T(n/3) + O(n)

每个问题被细分为 3 个子问题，包含 n/3 部分的原始数据。应用masters theorem，你会发现答案是0(n*log(n))。

```
Note - here logarithm is of base 3 . 
```

# c++ - 跨项目的头文件

> ID：13338573
> 
> 赞同：3
> 
> 时间：2012-11-12T04:55:34.920
> 
> 标签：c++, visual-studio-2012, header-files

所以我有两个项目，A 和 B，其中 B 依赖于 A（A 是库，而 B 是控制台应用程序）。A 使用 boost 库，并已配置为包含头文件和库文件，但 B 没有。

Visual Studio 抛出一个错误，提示找不到 Boost 头文件（在项目 B 中）。例如：

错误 C1083：无法打开包含文件：'boost/asio.hpp'：没有此类文件或目录 [项目：B]

我的问题是：有没有办法使 B 也不必包含 Boost 库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:58:22.897

> 有没有办法使 B 也不必包含 Boost 库？

是的，但前提是您可以避免将这些特性用作 A 的类型/函数定义的一部分。如果它们可以真正仅用于实现，那么您可以避免头文件依赖——您仍然需要链接到已编译的库（`asio`requires `boost-system`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T04:59:53.487

如果您包含项目 A 中的 .h ，该 .h 本身包含一个 boost 标头，则会出现问题。如果你只从项目 A 的 cpp 文件中包含你的 boost hpp 并且你为你的库保留一个“无增强”接口，你应该没问题！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T05:09:06.077

如果 A 是一个不错的库，它应该只公开一个接口和一个工厂，即在一个裸露的头文件中定义的抽象类，不包含其他头文件。听起来情况并非如此，但通常可以将任何库带到这种状态。最坏的情况是您必须构建一个类似包装器的解耦层。另一种选择是设置您的项目 B 以包含 boost。您可能仍然需要它供您自己使用...

# jquery - 如何根据特定的 Json 响应提交表单

> ID：13338575
> 
> 赞同：0
> 
> 时间：2012-11-12T04:56:04.170
> 
> 标签：jquery, ajax, json

我是 Json 的新手，所以请原谅新手的问题。

我有一个表单，我在其中进行 Ajax 发布以将地址信息提交到后端脚本以进行验证。

这是表格：

```
<form name="Form" id="Forms" method="post" action="WebCatPageServer.exe" class="uniForm">
<input name="Action" type="hidden" value="SHIPTOVALIDATE"/>
<input name="IsAjax" type="hidden" value="Yes"/>
<!-- <input name="Action" type="hidden" value="VerifyOrder"/>-->

<fieldset class="inlineLabels top">
<h2>Order Details</h2>
<div class="ctrlHolder first">
<label for="orderdesc">Order Description</label>
<input name="Order Desc" id="OrderDesc" type="text" class="textInput small" tabindex="1" value=""/>
</div>

<div class="ctrlHolder">
<label for="po">PO # <span class="redasterisk">*</span></label>
      <input name="Cust Po" id="PoJobNo" type="text" class="textInput small required" maxlength="20" tabindex="2" value="dgnfg"/>
    </div>
<!--    <div class="ctrlHolder">
      <label for="jobname">Job Name</label>
      <input name="Job Name" id="CustJobName" type="text" class="textInput small" maxlength="15" tabindex="3" value=""/>
    </div> -->
    <div class="ctrlHolder">
      <label for="shipvia">Ship Via <span class="redasterisk">*</span></label>
      <select name="Ship Via" id="shipvia"  class="selectInput small required"  tabindex="4"/>
       <option value="" class="default">Select Ship Method</option>
        <option value="OT - Our Truck" class="del" selected>Our Truck</option>
<option value="WC - Will Call" class="pick">Will Call</option>

        </select>   
    </div>

    <div class="ctrlHolder" id="pickupdate">
    <label for="datepickup">Requested Pickup Date <span class="redasterisk">*</span></label>
    <input name="datepickup" id="datepickup" type="text" class="textInput small"  tabindex="5" value="11/09/2012">
    </div>

    <div class="ctrlHolder" id="shipdate">
    <label for="dateship">Requested Delivery Date <span class="redasterisk">*</span></label>
    <input name="dateship" id="dateship" type="text"  class="textInput small" value="" tabindex="6">
    </div>

    <div class="ctrlHolder" id="shipto">
     <label for="ShipTo">Ship To <span class="redasterisk">*</span></label>
    <select name="ShipTos" id="ShipTos" class="selectInput auto required" tabindex="7">
       <option value="">Select an Option</option>
       <option value="ShipToManual" class="manual">Manually Enter Address</option>
    <option value="0">A ACTION AIR*, 5241 YANCEYVILLE, COLUMBIA, SC 29214-0001</option>
<option value="1">A ACTION AIR*, 649 spring lane, sanford, NC 27330</option>
<option value="2">A ACTION AIR*, 1313 south briggs avenue, durham, NC 27703</option>
<option value="3">A ACTION AIR*, 112 cricket hill lane, cary, NC 27513</option>
<option value="4">A ACTION AIR*, 2911 duke homestead road, durham, NC 27705</option>
<option value="5">A ACTION AIR*, chickem poop, atlanta, GA 60609</option>

    </select>
    <br />
    </div>
</fieldset>

 <fieldset class="inlineLabels" id="shipinfo">
   <h2>Shipping Information</h2>
    <div class="ctrlHolder first">
      <label for="YourName">Your Name <span class="redasterisk">*</span></label>
      <input name="Your Name" id="Your_Name" type="text" class="textInput small required"  tabindex="8" value="" />
    </div>
    <div class="ctrlHolder">
      <label for="CompanyName">Company Name <span class="redasterisk">*</span></label>
      <input name="Company Name" id="CompanyName" type="text" class="textInput small required"  tabindex="9" value="A ACTION AIR*"/>
    </div>
    <div class="ctrlHolder">
      <label for="Address1">Address 1 <span class="redasterisk">*</span></label>
      <input name="Address_1" id="Address_1" type="text" maxlength="30"  class="textInput small required" tabindex="10" value="5241 YANCEYVILLE"/>
    </div>
    <div class="ctrlHolder">
      <label for="Address2">Address 2</label>
      <input name="Address_2" id="Address_2" type="text" maxlength="30"  class="textInput small" tabindex="11" value=""/>
    </div>
    <div class="ctrlHolder">
      <label for="City">City <span class="redasterisk">*</span></label>
     <input name="City"  id="City" type="text" maxlength="25" class="textInput small required" tabindex="12" value="COLUMBIA"/>
    </div>
    <div class="ctrlHolder">
      <label for="State">State <span class="redasterisk">*</span></label>
     <select name="State" id="State" class="selectInput small required" tabindex="13">
              <option value="">Select State</option>
              <option value="AL">Alabama</option>
<option value="AK">Alaska</option>
<option value="AZ">Arizona</option>
<option value="AR">Arkansas</option>
<option value="CA">California</option>
<option value="CO">Colorado</option>
<option value="CT">Connecticut</option>
<option value="DE">Delaware</option>
<option value="FL">Florida</option>
<option value="GA">Georgia</option>
<option value="HI">Hawaii</option>
<option value="ID">Idaho</option>
<option value="IL">Illinois</option>
<option value="IN">Indiana</option>
<option value="IA">Iowa</option>
<option value="KS">Kansas</option>
<option value="KY">Kentucky</option>
<option value="LA">Louisiana</option>
<option value="ME">Maine</option>
<option value="MD">Maryland</option>
<option value="MA">Massachussetts</option>
<option value="MI">Michigan</option>
<option value="MN">Minnesota</option>
<option value="MS">Mississippi</option>
<option value="MO">Missouri</option>
<option value="MT">Montana</option>
<option value="NE">Nebraska</option>
<option value="NV">Nevada</option>
<option value="NH">New Hampshire</option>
<option value="NJ">New Jersey</option>
<option value="NM">New Mexico</option>
<option value="NY">New York</option>
<option value="NC">North Carolina</option>
<option value="ND">North Dakota</option>
<option value="OH">Ohio</option>
<option value="OK">Oklahoma</option>
<option value="OR">Oregon</option>
<option value="PA">Pennsylvania</option>
<option value="RI">Rhode Island</option>
<option value="SC" selected>South Carolina</option>
<option value="SD">South Dakota</option>
<option value="TN">Tennessee</option>
<option value="TX">Texas</option>
<option value="UT">Utah</option>
<option value="VT">Vermont</option>
<option value="VA">Virginia</option>
<option value="WA">Washington</option>
<option value="WV">West Virginia</option>
<option value="WI">Wisconsin</option>
<option value="WY">Wyoming</option>

            </select>
    </div>
    <div class="ctrlHolder">
      <label for="ZipCode">Zip Code <span class="redasterisk">*</span></label>
      <input name="Zip"  id="Zip" type="text" maxlength="10" class="textInput small required zipcode"  tabindex="14" value=""/> 
    </div>
    <div class="ctrlHolder">
      <label for="Phone">Phone <span class="redasterisk">*</span></label>
      <input name="Phone Number"  id="Phone" type="text" class="textInput small required phone" alt="phone-us"  tabindex="15" value="(336)954-5009"/>
    </div>
    <div class="ctrlHolder">
      <label for="Fax">Fax</label>
      <input name="FaxNumber"  id="Fax Number" type="text" class="textInput small fax" alt="phone-us"  tabindex="16" value=""/>
    </div>

    <div class="ctrlHolder">
      <label for="">E-mail <span class="redasterisk">*</span></label>
      <input name="Email" id="Email" type="text" class="textInput small required email"  tabindex="17" value=""/>
    </div>
    </fieldset>

<fieldset class="inlineLabels">
<h2>Order/Shipping Notes</h2>
<div class="ctrlHolder first">
      <label for="notes">Order Notes </label>
      <textarea name="OrderNotes" id="ta" cols="26" rows="7" tabindex="18"></textarea><br />
      <p class="formHint"><b>(Maximum characters: 175) &nbsp; <span id="charLeft"></span>  &nbsp; Characters left</b><br />
(Cross streets, special instructions, etc.)</p>
    <br />
    </div>

</fieldset>
<fieldset class="inlineLabels">
<h2>Continue To Next Step</h2>
<div class="buttonHolder">
<label for="freightmsg">**Applicable freight charges will be applied at the time of invoicing.**</label>
<input name="continuetocheckout" type="submit" class="button red smallrounded" value="Continue &gt;" alt="Continue to Next Step" tabindex="20"/>
</div>
</fieldset>
</form> 
```

**AJAX 调用**

这是 AJAX 调用：

```
$(function() {
$("#Forms").submit(function() {
$.ajax({
  type: 'post',
  url: 'WebCatPageServer.exe',
  dataType : 'json',
  data: $("#Forms").serialize(),
  complete:function(data){
 alert(data);
}
});
    return false;
});
}); 
```

**JSON 响应** 这是 JSON 响应：

```
{"DidValidate":true,"Company Name":"A ACTION AIR*","AddrLine1":"5241 YANCEYVILLE","AddrLine2":"","City":"COLUMBIA","State":"SC","Zip":"","Modified":false,"AddressError":false,"ZipError":false} 
```

问题：如果 AddressError 和 ZipError 都返回 false，我如何以编程方式提交表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:54:03.023

这应该有效。它使用通过 javascript 的 submit() 提交的表单不会再次进行验证这一事实。

```
$(function() {
  $("#Forms").submit(function() {
    document.Form.Action.value="SHIPTOVALIDATE";
    $.ajax({
      type: 'post',
      url: 'WebCatPageServer.exe',
      dataType : 'json',
      data: $("#Forms").serialize(),
      complete:function(data){
        alert(data);
        if (validation succeeded) { // put here your rules for returned data valid.
          document.Form.Action.value="DOTHEREALACTION";
          document.Form.submit ();
        }
      }
    });
    return false;
 });
}); 
```

# c - 不兼容的格式类型

> ID：13338578
> 
> 赞同：0
> 
> 时间：2012-11-12T04:56:28.047
> 
> 标签：c

我在 C 中玩 strncpy 并且遇到了一些麻烦。

代码如下：

```
#include <stdio.h>
#include <string.h>

int main(int argc, char *argv[])
{
    char src[] = "Benjamin Franklin";
    char dest[5];

    strncpy(src, dest, sizeof(dest) / sizeof(char));
    dest[5] = '\0';

    printf("%s\n", dest);

    return 0;
} 
```

使用以下代码编译没有错误：

```
gcc -Wall -g -Werror    test.c   -o test 
```

并打印出乱码

```
p4�� 
```

我无法真正理解我做错了什么，特别是因为我已经玩了很多并且一直在网上寻找答案。也许因为我正在使用数组，所以我将地址传递给 printf 而没有意识到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T04:58:02.097

你的参数是倒退的。`strncpy`将第二个字符串复制到第一个字符串中，就像这样。

```
strncpy(dest, src, sizeof(dest) / sizeof(char)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T05:00:20.000

你的程序有两个错误。

1.你交换了 的论点`strncpy`。

2.您**也无法访问`dest[5]`**，因为`dest[4]`是您可以访问的最后一个成员。

如下重写您的程序，它应该可以工作。

```
#include <stdio.h>
#include <string.h>

int main(int argc, char *argv[])
{
    char src[] = "Benjamin Franklin";
    char dest[5];

    strncpy(dest, src, sizeof(dest) / sizeof(char));
    dest[4] = '\0';

    printf("%s\n", dest);

    return 0;
} 
```

很高兴看到您使用`strncpy`而不是`strcpy`. 使用有长度限制的字符串操作函数总是一个好习惯。

`strncpy` [**在这里**](http://linux.die.net/man/3/strncpy)阅读。

# c++ - 需要有关指针和经过时间的程序的建议。如何修复无效操作数且无法转换错误？

> ID：13338582
> 
> 赞同：0
> 
> 时间：2012-11-12T04:57:32.380
> 
> 标签：c++, pointers, struct

我正在尝试编写一个程序来说明用户输入的两次之间的差异。我不知道该怎么做。我得到错误：

第 27 行|错误：“int”和“const MyTime*”类型的无效操作数到二进制“operator-”|

第 |39 行|错误：无法将参数 '1' 的 'MyTime' 转换为 'const MyTime*' 到 'int determineElapsedTime(const MyTime*, const MyTime*)'|

在这个问题上我也需要很多帮助。我没有好的课程，我的课本就像编程的悬崖笔记。这将是我在这所大学的最后一堂课。我使用的 C++ teztbook（我自己的不是上课用的）是 Sam 的 C++ 一天一小时。

```
#include <iostream>
#include<cstdlib>
#include<cstring>

using namespace std;
struct MyTime { int hours, minutes, seconds; };
int DetermineElapsedTime(const MyTime *t1, const MyTime *t2);

long t1, t2;

int DetermineElapsedTime(const MyTime *t1, const MyTime *t2)
{
    return((int)t2-t1);
}

int main(void)
{
    char delim1, delim2;
    MyTime tm, tm2;
    cout << "Input two formats for the time. Separate each with a space. Ex: hr:min:sec\n";
    cin >> tm.hours >> delim1 >> tm.minutes >> delim2 >> tm.seconds;
    cin >> tm2.hours >> delim1 >> tm2.minutes >> delim2 >> tm2.seconds;

    DetermineElapsedTime(tm, tm2);

    return 0;

} 
```

我必须先修复错误。有人有想法么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:06:57.400

请查看您的`DetermineElapsedTime`.

```
struct MyTime { int hours, minutes, seconds; };

...

int DetermineElapsedTime(const MyTime *t1, const MyTime *t2)
{
    return((int)t2-t1);
} 
```

编译器应该如何知道你对这一行的意思

```
 return((int)t2-t1); 
```

你不能简单地减去这两个结构。您必须自己实现这一点。

**编辑：**

更好地使用

```
int DetermineElapsedTime(MyTime &t1, MyTime &t2) 
```

这更像 C++。

我最终得到了（仍然很丑，但目前只剩下主要问题）

您仍然需要找到在`MyTime`结构中减去数据的解决方案。

```
#include <iostream>
#include<cstdlib>
#include<cstring>

using namespace std;
struct MyTime { int hours, minutes, seconds; };

int DetermineElapsedTime(MyTime &t1, MyTime &t2)
{
    // TODO: This is not correct! Implement the correct way.
    return((int)t2-t1);
}

int main(void)
{
    char delim1, delim2;
    MyTime tm, tm2;
    cout << "Input two formats for the time. Separate each with a space. Ex: hr:min:sec\n";
    cin >> tm.hours >> delim1 >> tm.minutes >> delim2 >> tm.seconds;
    cin >> tm2.hours >> delim1 >> tm2.minutes >> delim2 >> tm2.seconds;

    DetermineElapsedTime(tm, tm2);

    return 0;

} 
```

# ruby-on-rails - 三个模型关系之间的 Rails 验证

> ID：13338583
> 
> 赞同：1
> 
> 时间：2012-11-12T04:57:33.993
> 
> 标签：ruby-on-rails, activerecord, associations

我正在研究一种三模型关系，其中一个方面我不确定如何处理。基本关系如下：

```
class Taxonomy
  has_many :terms
  # attribute: `inclusive`, default => false
end

class Term
  belongs_to :taxonomy
  has_and_belongs_to_many :photos
end

class Photo
  has_and_belongs_to_many :terms
end 
```

这是非常简单的事情，除了一件事：

分类可以是“包含”或“独占”。独占意味着条款是互斥的，包容意味着它们不是。

现在，我可以毫无问题地在客户端处理这个问题，但我不太确定如何在照片（或其他地方）上设置验证，基本上说：“验证一个专有分类法中的术语不超过一个与此记录相关联。”

*奖金问题*

此外，虽然这不是必需的，但我一直认为在分类法和照片之间设置某种连接会很好，即，我想要一种简单的方法来查询所有已用术语分类的照片从给定的分类。

我想我可以用类似的东西来做到这一点，`Photo.where('term_id in ?', Taxonomy.find(1).terms.map(&:id))`但是，显然这不是很优雅。我很确定 has_many :through 不能工作，因为术语是照片的习惯，所以如果有人知道建立这种关系的更优雅的方式，我很想听听。

谢谢！

* * *

更新，进一步解释分类思想：

如果分类是`exclusive`ie。`taxonomy.inclusive = false`，则该分类中只能有一个术语附加到给定照片上。现在，一张照片可能应用了多个分类。例如：

分类：颜色，包含术语：红色 (id 1)、蓝色 (id 2)、绿色 (id 3)

分类：地区、专有术语：北美 (id 4)、南美 (id 5)

所以假设我们有一张照片，里面有很多红色和蓝色，所以它得到了这两个词，它可能在南美，所以它得到了这个词。但是，一张照片不能同时属于北美和南美。

所以在这种情况下，如果我们调用：`photo.terms.map &:id`我们会得到`[1,2,4]`

在客户端我基本上可以做（伪代码）

```
form_for photo
- Taxonomy.each do |tax|
  - if tax.inclusive?
    - tax.terms.each do |term|
      - check_box term
  - else
    - tax.terms.each do |term|
      - radio_button term 
```

但在模型方面，我想说，一张照片可以有 term_id 1、2、3 中的任何一个，但只能有/或 4 和 5。

那有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T07:03:47.053

对于您的验证问题，您可以在`Term`模型的`taxonomy_id`字段上添加唯一性验证，该验证仅在分类法不包含在内时才执行，即：

```
class Term
  validates :taxonomy_id, uniqueness: true, unless: Proc.new { |term| term.taxonomy.inclusive }
end 
```

您也可以使用[自定义验证方法](http://guides.rubyonrails.org/active_record_validations_callbacks.html#custom-validators)执行此操作：

```
class Term
  validate :uniqueness_of_taxonomy_if_exclusive

  def uniqueness_of_taxonomy_if_exclusive
    if !taxonomy.inclusive && Term.find_by_taxonomy_id(taxonomy_id)
      errors.add(:taxonomy_id, "already exists for this exclusive taxonomy")
    end
  end
end 
```

请注意，这在这种情况下是没有用的，因为第一种方法给出了相同的结果，但如果您需要进行更复杂的验证，它可能会很有用。

对于您的问题的第二部分，这是在 ActiveRecord 中进行查询的方法，假设`taxonomy`是您想要照片的分类：

```
Photo.includes(:terms => :taxonomy).where('taxonomies.id' => taxonomy.id) 
```

在您发表评论后更新

我相信您的验证应该在表格中进行，以便在照片和术语之间建立联系。如果您遵循 Rails 约定，它实际上是 table `photos_terms`。要对其添加验证，您必须使其成为一等公民，即：为该表添加一个活动记录模型和一个 id 字段，假设您命名它`PhotoTermLink`。这是您想要的验证代码：

```
class PhotoTermLink
  belongs_to :photo
  belongs_to :term

  validates :term_id, uniqueness: { scope: :photo_id }, unless: Proc.new { |link| link.term.taxonomy.inclusive }
end 
```

# android - 在android中单击电子邮件中的链接打开应用程序？

> ID：13338584
> 
> 赞同：0
> 
> 时间：2012-11-12T04:57:46.900
> 
> 标签：android, android-intent

> **可能重复：**
> [如何发送带有链接的电子邮件以打开 Android 应用程序](https://stackoverflow.com/questions/5697899/how-to-send-email-with-link-to-open-android-application)

我对我的项目有一个奇怪的要求..

假设我有一个应用程序说**XYZ**安装在 android 手机中，然后我收到一封来自邮件服务器的电子邮件，其中包含`http://XYZ.com/?params(i.e. X=1&Y=2&Z=3)`现在单击此链接的链接，我想打开**XYZ**应用程序，如果它安装在手机和活动我想获取**这些参数 X、Y 和 Z**，如果**未安装**应用程序，则应将用户重定向到 Play 商店以下载 XYZ 应用程序，安装后应用程序负责并表现得好像它已经安装（打开第一个活动使用这些参数）。

我怎样才能做到这一点？我不知道从哪里开始，所以即使是正确方向的最小指针也会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:06:59.570

您的问题过于广泛，涵盖了 Android SDK 和网络编程的多个方面。尝试将您的需求分解为单独的项目并单独解决它们：

1) 如果应用程序存在并且用户单击浏览器/电子邮件客户端中的链接。如何让我的应用处理此链接？

2) 如果应用没有安装，如何将点击 URL 的用户重定向到 Google Play 中的应用安装页面？

3) 如何从 URL 中提取参数？

4）等。

对于第 1 项，我建议查看[此答案](https://stackoverflow.com/a/2958870/1204377)。

# javascript - 提高性能以便在不使用 Ajax 的情况下刷新整个页面

> ID：13338590
> 
> 赞同：0
> 
> 时间：2012-11-12T04:59:34.983
> 
> 标签：javascript

是否可以提高性能以便在不使用 Ajax 的情况下使用 javascript 刷新整个页面？我们可以维护一些缓存或其他技术来加速页面刷新过程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T05:07:27.857

不知道刷新页面到底是什么意思，但是这样的事情只能通过 JavaScript 来实现，而无需 AJAX。

假设您的页面中有两个部分。第二部分的内容取决于第一部分中选择的值，但变化是确定的。在这种情况下，您可能希望加载第二部分的所有变体并将它们隐藏在页面中。完成后，根据第一部分中的事件，您可以在第二部分中显示/隐藏相应的详细信息。

这种情况的一个常见示例可能是：国家列表和国家列表示例。假设如果将国家/地区选为美国/加拿大等，则要显示州列表，而对于其他国家/地区，则要显示自由文本字段。在这种情况下，您可以预先加载美国州列表和加拿大州列表并将它们隐藏。一旦用户选择任何国家，您就可以在 UI 中显示相关的状态列表/字段。**全部在客户端。**

# magento - 如何从 Magento 管理区域获取给定路径的模块/控制器/操作？

> ID：13338595
> 
> 赞同：1
> 
> 时间：2012-11-12T05:00:15.323
> 
> 标签：magento

我已经到了在我的模块中本地扩展 Mage_Core_Controller_Varien_Router_Standard 以访问它的 match() 方法的地步，但当然，从 Magento 管理员来看，它的处理方式与前置存储不同。

在我浪费时间研究这个之前，有没有一种简单的方法来正确填充 Mage_Core_Controller_Request_Http/Zend_Controller_Request_Http 的实例，其信息与在正常前端（阅读：非管理员）页面加载（即类别页面、搜索页面、 cms 页面），但从基于路径的管理区域（假设给定商店）？

理想情况下，它看起来像：

```
/** @var $request Zend_Controller_Request_Http */
$request = Mage::getModel('namespace_module/foo')->getHttpRequestByPath($uri, $store); 
```

注意：在示例中，store 是可选的，'$uri' 类似于：

*   www.store.com/
*   www.store.com/faq
*   www.store.com/foo/category/mens
*   www.store.com/bar/product/xyz

不寻找黑客，但不介意朝正确的方向推进。我正在使用 Magento EE 1.11。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:27:46.340

`Mage::app()->getRequest()`将返回`Mage_Core_Controller_Request_Http`。从那里您可以调用如下方法：

```
->getControllerName();
->getActionName(); 
```

使用管理商店时，我假设 store_id 为`Mage_Core_Model_App::ADMIN_STORE_ID`.

这是您想要实现的目标，还是您有不同的目标？

# sql - 将行结果拆分为列

> ID：13338604
> 
> 赞同：0
> 
> 时间：2012-11-12T05:01:53.927
> 
> 标签：sql, tsql

以下查询：

```
SELECT  i.Item_ID

  FROM  AGR_Header ah
        LEFT JOIN AGR_Detail ad
               ON ad.AGR_Header_RecID = ah.AGR_Header_RecID
        LEFT JOIN IV_Item i
               ON i.IV_Item_RecID = ad.IV_Item_RecID 
```

显示以下结果：

```
a4 black usage page count
a4 colour usage page count
a4 black usage page count
a4 colour usage page count
a4 black usage page count
a4 colour usage page count
a4 black usage page count
a4 colour usage page count 
```

有没有办法为每个 Item_ID 创建一列，使其显示如下：

```
A4 Black                     A4 Colour
a4 black usage page count    a4 colour usage page count
a4 black usage page count    a4 colour usage page count
a4 black usage page count    a4 colour usage page count
a4 black usage page count    a4 colour usage page count 
```

我已经阅读了有关使用 ROW_NUMBER 为每个 Item_ID 分配序列号或使用 PIVOT ...不熟悉这些或任何其他方式来完成此操作的信息，因此不胜感激。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T05:10:10.833

如果您的输出与您提到的一样，那么您只需为所需的输出执行以下操作：

```
SELECT 
    ISNULL(a4b.Item_ID, '') 'A4 Black', 
    ISNULL(a4c.Item_ID, '') 'A4 Color'
FROM
(
  SELECT    i.Item_ID, ROW_NUMBER() OVER(ORDER BY i.Item_ID ASC) 'RowNum'

  FROM  AGR_Header ah
        LEFT JOIN AGR_Detail ad
               ON ad.AGR_Header_RecID = ah.AGR_Header_RecID
        LEFT JOIN IV_Item i
               ON i.IV_Item_RecID = ad.IV_Item_RecID
  WHERE i.Item_ID LIKE 'a4 black%'
) AS a4b
FULL OUTER JOIN
(
  SELECT    i.Item_ID, ROW_NUMBER() OVER(ORDER BY i.Item_ID ASC) 'RowNum'

  FROM  AGR_Header ah
        LEFT JOIN AGR_Detail ad
               ON ad.AGR_Header_RecID = ah.AGR_Header_RecID
        LEFT JOIN IV_Item i
               ON i.IV_Item_RecID = ad.IV_Item_RecID
  WHERE i.Item_ID LIKE 'a4 color%'
) AS a4c
ON a4b.RowNum = a4c.RowNum 
```

OUTER JOIN 将处理 a4 black 和 a4 color 的条目数不同的情况。

# ios - Xcode 4.5.2 在 Mac OS X Mountain Lion 上不断崩溃？

> ID：13338605
> 
> 赞同：4
> 
> 时间：2012-11-12T05:02:00.387
> 
> 标签：ios, xcode, macos, crash, osx-lion

我一直在将 Xcode 与 mac os x lion 一起使用，并且在尝试在我的 ios 设备上测试我的应用程序时一直出错。我格式化了我的电脑并升级到山狮并撤销了所有的苹果开发者证书和规定，并从头开始。

现在我不再收到错误，但是当我单击运行时 Xcode 崩溃了。我见过其他人有同样的问题。我尝试在 Xcode 中安装这些工具并重新安装 Xcode，但似乎没有任何效果。我什至尝试了其他应用程序。当我查看首选项或随机查看时，Xcode 甚至崩溃，但它无法使用。我已经尝试过人们的建议，但我认为可能是山狮的更新。

有人对我能做些什么来解决它有任何想法吗？谢谢大家，我会在下面发布 Xcode 错误。

* * *

```
Process:         Xcode [3082]
Path:            /Applications/Xcode.app/Contents/MacOS/Xcode
Identifier:      com.apple.dt.Xcode
Version:         4.5.2 (1847)
Build Info:      IDEApplication-1847000000000000~5
App Item ID:     497799835
App External ID: 11823664
Code Type:       X86-64 (Native)
Parent Process:  launchd [120]
User ID:         501

Date/Time:       2012-11-11 23:59:26.948 -0500
OS Version:      Mac OS X 10.8 (12A239)
Report Version:  10

Interval Since Last Report:          12182 sec
Crashes Since Last Report:           7
Per-App Interval Since Last Report:  2713 sec
Per-App Crashes Since Last Report:   7
Anonymous UUID:                      08010D4F-F690-41D3-BFD3-D1ECE072975C

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_PROTECTION_FAILURE at 0x00007fff50fe0ff8

VM Regions Near 0x7fff50fe0ff8:
    MALLOC_SMALL           00007fb59e800000-00007fb59f800000 [ 16.0M] rw-/rwx SM=PRV  
--> STACK GUARD            00007fff4d7e1000-00007fff50fe1000 [ 56.0M] ---/rwx SM=NUL  stack guard for thread 0
    Stack                  00007fff50fe1000-00007fff517e1000 [ 8192K] rw-/rwx SM=COW  thread 0

Application Specific Information:
ProductBuildVersion: 4G2008a
objc[3082]: garbage collection is ON
Performing @selector(performRunAction:) from sender IDERunPauseContinueToolbarButton 0x4023116a0

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   com.apple.dt.IDE.IDEInterfaceBuilderCocoaIntegration    0x000000011621a96e -[NSClipView(IBWorkaround12332156) ibSwizzledNSClipViewWorkaround12332156UpdateConstraints] + 21
1   com.apple.dt.IDE.IDEInterfaceBuilderCocoaIntegration    0x000000011621a9fc -[NSClipView(IBWorkaround12332156) ibSwizzledNSClipViewWorkaround12332156UpdateConstraints] + 163
2   com.apple.dt.IDE.IDEInterfaceBuilderCocoaIntegration    0x000000011621a9fc -[NSClipView(IBWorkaround12332156) ibSwizzledNSClipViewWorkaround12332156UpdateConstraints] + 163
3   com.apple.dt.IDE.IDEInterfaceBuilderCocoaIntegration    0x000000011621a9fc -[NSClipView(IBWorkaround12332156) ibSwizzledNSClipViewWorkaround12332156UpdateConstraints] + 163
4   com.apple.dt.IDE.IDEInterfaceBuilderCocoaIntegration    0x000000011621a9fc -[NSClipView(IBWorkaround12332156) ibSwizzledNSClipViewWorkaround12332156UpdateConstraints] + 163
5   com.apple.dt.IDE.IDEInterfaceBuilderCocoaIntegration 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:17:47.713

好的，所以我知道这不是理想的解决方案，但我发现对我有用的是下载 iOS 5.0 和 5.1 SDK 以通过模拟器运行测试（是的，我知道这会导致无法通过当前模拟器运行测试...）但我可以在我配置的 iPhone 设备上运行我的应用程序，以便在 iOS 6.0 中进行测试

似乎 6.0 模拟器是导致此特定崩溃的罪魁祸首。此外，如果您的设置与我相同，那么您需要注意在尝试再次运行应用程序之前您需要停止应用程序，否则会导致崩溃。此外，如果您正在运行模拟器（5.1 或 5.0），那么您需要确保不仅停止应用程序，而且完全关闭模拟器。否则，这可能会导致另一次崩溃。

我在当前环境中安装 XCode 4.5.2 时遇到的所有故障都导致了与您在上面收到的完全相同的错误消息。

希望这可以帮助！

-d3v1lman1337

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:13:19.190

我遇到了一个问题，即多个 XCode 实例在后台运行，导致 XCode 崩溃。我不确定这是否有帮助，但您可以在终端中尝试以下操作。

```
alias findp="ps -axww | grep $*" 
```

这只是一些速记。

看看这是做什么的。

```
findp Xcode 
```

如果您有大量实例返回该调用，而您实际上并未运行 Xcode，那么这意味着您有一堆孤立的后台 xcode 进程。模拟器还将保留 xcode 实例，因此您也需要关闭它。

无论如何，如果您遇到我遇到的问题，您会看到类似的问题

```
 7645 ??         0:00.12 /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/Accounts.framework/accountsd 
```

然后你可以用

```
kill -9 7645 
```

不确定这是否对你有帮助，但当 xcode 和我一起玩愚蠢的虫子时，它救了我很多次。

# windows-8 - 我可以在不注册和支付 50 美元的情况下使用 Live SDK 进行开发吗？

> ID：13338606
> 
> 赞同：1
> 
> 时间：2012-11-12T05:02:18.803
> 
> 标签：windows-8, onedrive

根据此链接：http: [//msdn.microsoft.com/en-us/library/live/hh826541.aspx](http://msdn.microsoft.com/en-us/library/live/hh826541.aspx)

为了使用 Live SDK，您需要获得一个包标识。

然后它将您链接到此页面： http: [//go.microsoft.com/fwlink/p/ ?LinkId=227628](http://go.microsoft.com/fwlink/p/?LinkId=227628)

它试图获取大量个人信息和 50 美元。

我知道 Windows 商店中的所有应用程序（或本周所称的任何应用程序）都需要注册，但我只是在玩一些想法，现在不想支付 50 美元。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:49:39.600

您可以在此处下载 LiveSDK：http: [//msdn.microsoft.com/en-us/live/ff621310.aspx](http://msdn.microsoft.com/en-us/live/ff621310.aspx)

对于开发，您可以在此处注册您的应用程序： [https ://manage.dev.live.com/Applications/Index](https://manage.dev.live.com/Applications/Index)

您可以在 VS 的项目属性中找到所需的包标识

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T18:44:45.167

答案是不。我必须注册并付款。

# c++ - 如何从包含多个数字的数字中获取一个单独的数字

> ID：13338607
> 
> 赞同：1
> 
> 时间：2012-11-12T05:02:23.650
> 
> 标签：c++

所以我有一个四位数的数字，这是我正在制作的一个简单谜题中的玩家输入，我希望能够检查每个数字，比如说我想检查右边的第二个数字，如果数字恰好是 4601 那么当然会是 6，但除了测试每个四位数之外，它们是不是更快的方法？我通过搜索找到了一些结果，但它们没有帮助，它们只是让我更加困惑，请说出任何答案，以便任何人都能理解。我也在使用c++。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T05:08:11.267

要从任意整数中检索第二个最重要的（以十为基数）数字，`i`您可以执行以下操作：

```
while (i >= 100)
    i /= 10;
return i % 10; 
```

当然，这假设数字大于或等于 10 开始。如果您需要保留该号码，那么您将（显然）希望对副本进行操作。

# 编辑：

可以定义一个函数来使用算术或字符串操作提取任意数字。

## 算术解决方案：

```
int extractDigit(size_t digit, int n) {
    int mask = 1;
    while ( digit --> 0 )
        mask *= 10;
    if (n < mask / 10) { // insufficient digits
        return -1; // or some other appropriate error handling.
    while ( n >= mask )
        n /= mask;
    return n % 10;
} 
```

## 字符串解决方案：

```
#include <sstream>
#include <string>
using std::string;
using std::stringstream;

int extractDigit(size_t digit, int n) {
    string result = static_cast<stringstream&>(stringstream() << n).str();
    if (result.size() < digit) {
        return -1;
    }
    return result[digit-1] - '0';
} 
```

这两种解决方案都隐含地假设`n`它将是非负的。如果需要，您可以通过使用无符号数据类型来强制执行此前提条件。此外，这两个函数都定义了数字位置，使得最高有效位在位置 1，并且位置向右增加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T05:25:17.693

我不会猜测你在拥有数字后要做什么。但如果它只是你想要的数字，那么你可以在下面使用：

```
int a=1234;
char b[4];
sprintf(b,"%d",a);
char c=b[1]; 
```

现在`c`有您的 4 位数号码的第二位数。同样，您可以使用字符数组的索引访问所有数字`b`

对于 c++ 等价物，请参见下文：

```
 std::ostringstream out;
  out << age; 
```

现在`out.str()[1]`将显示第二个数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T05:05:21.773

您可以将数字读取为 an`int`并将其转换为`char`数组并将每个字符检查为数字

例子：

```
char digits[5];
int number;
//Read number in
scanf("%d",&number);
//Make sure it's 4 digits
number%=10000;
//Convert it to a char array
sprintf(digits,"%d",number)

if(digits[1]=='6')
{
    //do stuff
} 
```

# javascript - 一次显示多个隐藏内容的 div

> ID：13338609
> 
> 赞同：1
> 
> 时间：2012-11-12T05:02:54.020
> 
> 标签：javascript, jquery

我在一个页面上有 20 个 div，其中 4 个最初显示，底部有一个 more 链接。单击更多链接应该使接下来的 4 个 div 可见，直到最终所有 div 都可见。

唯一需要注意的是，从来没有固定数量的 div，可能有 5、20 或 102，这些数字不是静态的或已知的。

我不能将 AJAX 用于解决方案，因此将所有内容都放在页面上并一次将 4 个 div 附加到可见列表是解决方法。

有谁知道这样做的插件或有解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T05:06:20.623

您可以使用`:lt` 和`:hidden`选择器并选择前四个隐藏的 div 元素：

```
$('#your-button').click(function(){
   $('.divs:hidden:lt(4)').show()
}) 
```

[http://jsfiddle.net/LyTbn/](http://jsfiddle.net/LyTbn/)

您还可以使用`slice`方法：

```
$('div:hidden').slice(0, 4).show() 
```

# json - Jerkson JsonMappingException

> ID：13338610
> 
> 赞同：0
> 
> 时间：2012-11-12T05:03:07.917
> 
> 标签：json, scala

我正在尝试使用 Jerkson 将 scala 案例类序列化为 JSON 字符串，如下所示：

```
case class Page(title: String, id: String, ls: List[(String, String, Int)])
val pageList = new mutable.ArrayBuffer[Page]()
val jsonString = Json.generate(pageList) 
```

`pageList`非常大，有几百万`Page`个物体。调用失败，出现以下异常：

> 引起：org.codehaus.jackson.map.JsonMappingException：
> [java.lang.ArrayIndexOutOfBoundsException 没有消息]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:07:56.203

您可能需要考虑使用 Streaming 解决方案。您可以使用其中一种 Jackson Streaming API：

```
JsonGenerator jg = jsonFactory.createJsonGenerator(file, JsonEncoding.UTF8); // or Stream, Reader 
```

或者，您可以使用 TokenBuffer（在某些情况下被认为是最佳实践）：

```
TokenBuffer buffer = new TokenBuffer();
// serialize object as JSON tokens (but don't serialize as JSON text!)
objectMapper.writeValue(buffer, myBean); 
```

详细信息：[杰克逊流媒体文档](http://wiki.fasterxml.com/JacksonStreamingApi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:03:08.037

鉴于您有“数百万”个对象，我猜您可能会达到`String`. 尝试生成一个`OutputStream`，即`Json.generate(pageList, out)`。

# c# - c# 将 openfileDialog 替换为无 gui 流

> ID：13338614
> 
> 赞同：0
> 
> 时间：2012-11-12T05:03:18.137
> 
> 标签：c#, stream, openfiledialog

我正在尝试将 MIME gui 与我需要的代码分开。我几乎只剩下一个我不知道如何替换的 gui 元素。此元素是 openfiledialog。这是一个代码片段。

程序.cs

```
var sfd = new OpenFileDialog();
sfd.FileName = "C:\\eml\\" + validOutputFilename;

try
{
    var writer = new MimeMessageWriter();
    using (var fs = sfd.OpenFile()) writer.Write(message, fs);
}
catch (Exception ex)
{
    //ignore
    // need to log
} 
```

消息是一个 IMessage。为存储有关 eml 文件的信息而创建的类。打开文件对话框允许您输入带有 eml 扩展名的文件名，仅此而已。write.Write 需要一个 IMessage 和一个流。内部 writer.Write 正在写入文件 文件中唯一使用此代码的部分是文件本身最后写入并写出任何附件时。这是那些代码片段。

*MimeMessageWriter

- 附件在这里使用它

```
var embeddedMessage = attachment.OpenAsMessage();
var messageWriter = new MimeMessageWriter();
var msgStream = new MemoryStream();
messageWriter.Write(embeddedMessage, msgStream);

var messageAttachment = ew DotNetOpenMail.FileAttachment(msgStream.ToArray());
messageAttachment.ContentType = "message/rfc822";
messageAttachment.FileName = filename + ".eml";

outMessage.AddMixedAttachment(messageAttachment); 
```

- 写出文件的文件部分

```
using (var sw = new StreamWriter(stream))
sw.Write(outMessage.ToDataString()); 
```

我想用允许我传递文件名以在 MimeMessageWriter 中写出文件的东西替换 openFileDialog

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T05:11:40.313

代替

```
using (var fs = sfd.OpenFile()) writer.Write(message, fs); 
```

和

```
string fileName = @"c:\eml\myAttachment.eml";
using ( FileStream fs = new FileStream( fileName, FileMode.CreateNew ) )
{
   writer.Write( message, fs )
} 
```

另请参阅：http: [//msdn.microsoft.com/de-de/library/47ek66wy.aspx](http://msdn.microsoft.com/de-de/library/47ek66wy.aspx)

# windows-8 - Windows 商店应用程序是否需要 ECCN 才能使用 SkyDrive API？

> ID：13338616
> 
> 赞同：2
> 
> 时间：2012-11-12T05:03:27.043
> 
> 标签：windows-8, windows-store-apps, windows-store, onedrive, eccn

应用程序是否需要 ECCN 才能使用 SkyDrive API。SkyDrive API 使用**https** URL。所以，如果我理解微软在[http://msdn.microsoft.com/en-gb/library/windows/apps/hh694069.aspx中关于](http://msdn.microsoft.com/en-gb/library/windows/apps/hh694069.aspx)**密码学**的说法，那么将需要 ECCN，因为它使用的是安全通信通道(SSL) 和 SSL 未列在不受限制的任务中，其中：

*   密码加密
*   复制保护
*   验证
*   数字版权管理
*   使用数字签名

谁能告诉我我是否正确解释了这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T05:48:31.410

你为什么不用`LiveSDK`SkyDrive？

[这](http://code.msdn.microsoft.com/windowsapps/Live-SDK-Windows-Developer-8ad35141)是一个使用 SkyDrive 的示例应用程序

# php - 如何在 Jquery Easy ui 上使用引导程序

> ID：13338624
> 
> 赞同：2
> 
> 时间：2012-11-12T05:05:31.717
> 
> 标签：php, css, jquery-ui, twitter-bootstrap

如何在[jQuery EasyUI 框架上使用](http://www.jeasyui.com/)[引导程序](http://twitter.github.com/bootstrap/)？

当我尝试包含 CSS 时，它总是会弄乱我的设计。

是否可以包含 CSS 和 bootstrap js？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T08:34:10.543

是的，它搞砸了，因为 2 个 CSS 样式表使用相同的选择器（有些是相同的）。您需要做的，包括两者并选择您想要更多依赖的。

打开你的css样式表并重命名匹配的选择器，或者如果你不需要，就删除它们，仅此而已。

PS: buttons are messed up because of these too, example, the UI has a button css and js feature too and bootstap has one too, so they get mixed up

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T05:17:58.627

将引导文件夹放在主题文件夹中

直接在下面包含引导 css

```
<link rel="stylesheet" type="text/css" href="../themes/default/easyui.css">
<link rel="stylesheet" type="text/css" href="../themes/bootstrap/docs/assets/css/bootstrap.css"> 
```

如果您需要在代码中包含任何其他 js 文件，则应将它们包含在文件末尾。

```
<script src="/themes/bootstrap/docs/assets/js/application.js"></script>
<script src="/themes/bootstrap/docs/assets/js/bootstrap-affix.js"></script>
<script src="/themes/bootstrap/docs/assets/js/bootstrap-alert.js"></script>
<script src="/themes/bootstrap/docs/assets/js/bootstrap-button.js"></script>
<script src="/themes/bootstrap/docs/assets/js/bootstrap-carousel.js"></script>
<script src="/themes/bootstrap/docs/assets/js/bootstrap-collapse.js"></script>
<script src="/themes/bootstrap/docs/assets/js/bootstrap-dropdown.js"></script>
<script src="/themes/bootstrap/docs/assets/js/bootstrap-modal.js"></script>
<script src="/themes/bootstrap/docs/assets/js/bootstrap-popover.js"></script>
<script src="/themes/bootstrap/docs/assets/js/bootstrap-scrollspy.js"></script>
<script src="/themes/bootstrap/docs/assets/js/bootstrap-tab.js"></script>
<script src="/themes/bootstrap/docs/assets/js/bootstrap-tooltip.js"></script>
<script src="/themes/bootstrap/docs/assets/js/bootstrap-transition.js"></script>
<script src="/themes/bootstrap/docs/assets/js/bootstrap-typeahead.js"></script>
<script src="/themes/bootstrap/docs/assets/js/bootstrap.js"></script>
<script src="/themes/bootstrap/docs/assets/js/bootstrap.min.js"></script> 
```

# java - iText 阅读多列 PDF 文档

> ID：13338627
> 
> 赞同：0
> 
> 时间：2012-11-12T05:05:46.500
> 
> 标签：java, android, pdf, itext

**阅读多栏PDF文档**

当 iText 读取 PDF（将页面内容提取到字符串变量中）时，内容将通过以下方式修复：

```
reader = new PdfReader(getResources().openRawResource(R.raw.resume1));
original_content = PdfTextExtractor.getTextFromPage(reader, 2);
String sub_content = original_content.trim().replaceAll(" {2,}", " ");
sub_content = sub_content.trim().replaceAll("\n ", "\n");
sub_content = sub_content.replaceAll("(.+)(?<!\\.)\n(?!\\W)", "$1 "); 
```

如果文档只有 1 列，但如果文档有多列，它将每行提取文档 1。它将结合左右列。

我将[其](http://groups.csail.mit.edu/infolab/publications/Katz-ForeignLanguage.pdf)用作示例 PDF，这是来自 START QA 文档。

**如何阅读多列的 PDF 文档？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:23:13.567

这个问题有两种不同的方法，使用哪种方法取决于 PDF 本身。

1.  *如果问题中的 PDF 页面内容中的字符串已经处于所需的顺序：*而不是您使用`LocationTextExtractionStrategy`的重载隐式使用，而是`PdfTextExtractor.getTextFromPage`显式使用`SimpleTextExtractionStrategy`; 在你的情况下：

    ```
    original_content = PdfTextExtractor.getTextFromPage(reader, 2, new SimpleTextExtractionStrategy()); 
    ```

2.  *如果有问题的 PDF 页面内容中的字符串**不是**所需的顺序：*不是您使用`LocationTextExtractionStrategy`的重载隐式使用的，而是`PdfTextExtractor.getTextFromPage`显式包装一个这样的策略，`FilteredTextRenderListener`限制它接收单列区域的文本只要; 在你的情况下：

    ```
    Rectangle left = new Rectangle(0, 0, 306, 792);
    Rectangle right = new Rectangle(306, 0, 612, 792);
    RenderFilter leftFilter = new RegionTextRenderFilter(left);
    RenderFilter rightFilter = new RegionTextRenderFilter(right);
    [...]
    TextExtractionStrategy strategy = new FilteredTextRenderListener(new LocationTextExtractionStrategy(), leftFilter);
    original_content = PdfTextExtractor.getTextFromPage(reader, 2, strategy);
    originalContent += " ";
    strategy = new FilteredTextRenderListener(new LocationTextExtractionStrategy(), rightFilter);
    original_content += PdfTextExtractor.getTextFromPage(reader, 2, strategy); 
    ```

# javascript - 如何获得最近的特定 div？

> ID：13338628
> 
> 赞同：0
> 
> 时间：2012-11-12T05:06:00.657
> 
> 标签：javascript, jquery-selectors, jquery

我想要做的是当用户点击我想要更新大框（div.region）的颜色（div.colour_palette_box）时。问题是代码应该是动态的，因为我有几个集合（div.color_set）。其中之一如下所示。

这是我所指的 UI，

![在此处输入图像描述](../Images/eb3a7045f4abe6e95dfafc61d3f69332.png)

在火虫中，它将如下所示。

![在此处输入图像描述](../Images/7d645bbddfd32896ce4c8bab5a1da3d4.png)

我到目前为止尝试的是。

```
jQuery('div#color_wrapper').on('click','div.colour_palette_box',function(){
        //jQuery(this).closest('div.region');
            //jQuery(this).prev('div.region');
            //both does not work

    }); 
```

上面的代码没有让我得到最接近点击的 div.colour_palette_box 的 div.region ？我怎么才能得到它 ？

更新

实际的 HTML

```
<div class="color_set">
   <div class="region">
      <div colorpalette="colour_selection_box_bg" class="colour_box"></div>
      <p>Product Background</p>
   </div>
   <div class="colour_selection_box_bg colorpalette" style="display: block;">
      <img src="components/com_jink/assets/images/close_mark.jpg" class="colorpalette_close" />
      <div class="colour_palette">
         <div colorid="6" colorregion="bgcolor" style="background:#000000" class="colour_palette_box"></div>
         <div colorid="7" colorregion="bgcolor" style="background:#00FF00" class="colour_palette_box"></div>
         <div colorid="8" colorregion="bgcolor" style="background:#0000FF" class="colour_palette_box"></div>
         <div colorid="9" colorregion="bgcolor" style="background:#FF0000" class="colour_palette_box"></div>
         <div colorid="10" colorregion="bgcolor" style="background:#FFFF00" class="colour_palette_box"></div>
      </div>
   </div>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:14:32.523

试试这个：

```
jQuery('div#color_wrapper').on('click','div.colour_palette_box',function(){
    jQuery(this).parents("div.color_set").find("div.region")
                .css("background", jQuery(this).css("background"));
}); 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T05:15:17.360

试试这个：

```
jQuery('div#color_wrapper').on('click', 'div.colour_palette_box', function() {
    var bgColor = $(this).css("background-color");
    $(this).closest("div.colorpalette").prev("div.region").css("background-color", bgColor);
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T05:16:24.373

您需要进入同一个父级才能使用 .prev() 所以使用以下代码：

```
jQuery(this).parent().parent().prev('div.region') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T05:13:53.353

`region`是父母的兄弟姐妹，`box`因为它不是祖先，`closest`所以不起作用

尝试：

```
$('.colour_palette_box').closest('.colorpalette').siblings('.region') 
```

# sql - Oracle 中与另一列相关的列的平均值

> ID：13338631
> 
> 赞同：1
> 
> 时间：2012-11-12T05:06:27.140
> 
> 标签：sql, database, oracle, average

好的，所以我有一个包含三列的数据库：id、用户名和评级。

数据库将如下所示：

```
 ------------ ------------ ------------ 
|     ID     |     NAME   |   RATING   |
 ------------ ------------ ------------
|     1      |   bc112    |      3     |
 ------------ ------------ ------------
|     2      |   cd111    |      1     |
 ------------ ------------ ------------
|     2      |   cd111    |      2     |
 ------------ ------------ ------------
|     2      |   cd111    |      6     |
 ------------ ------------ ------------ 
```

所以基本上我卡住的地方是我如何获得每个特定用户的平均评分？

我试过这个：

```
SELECT ID, RATING
FROM THING
WHERE AVG(RATING) FOR ID < 3; 
```

但结果什么也没告诉我。代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:13:45.070

通过使用`AVG`聚合函数、`group by`子句和`having`子句如下：

```
SQL> with t1 (ID, NAME, RATING) as
  2  (
  3    select 1, 'bc112', 3  from dual union all
  4    select 2, 'cd111', 1  from dual union all
  5    select 2, 'cd111', 2  from dual union all
  6    select 2, 'cd111', 6  from dual
  7  )
  8  select ID
  9       , NAME
 10       , avg(rating)
 11    from t1
 12   group by id, name
 13   having avg(rating) > 2 
 14  ;

        ID NAME  AVG(RATING)
---------- ----- -----------
         1 bc112           3
         2 cd111           3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:20:09.390

从 THING GROUP BY id 中选择 ID、AVG(RATING)

如果您想要平均评分的任何条件，您可以添加每个 ID 的平均评分。

# sql - 如何从Oracle中的多个表中获取子父关系？

> ID：13338641
> 
> 赞同：2
> 
> 时间：2012-11-12T05:07:28.543
> 
> 标签：sql, oracle

==

# [我的问题的 SQL 小提琴在这里](http://sqlfiddle.com/#!4/19ee4/1)

我有以下与钢铁厂相关的表格

```
HEATS /* Contains data about raw iron melted from scrap and ores */
SLABS /* Contains data about the output of the first table HEATS */
COILS /* Contains data about the output of SLABS */ 
```

我通过删除与问题无关的不必要字段来简化上述表格的结构

```
create table heats
  ( id number,
    production_date date, 
    heat_name varchar(10),
    parent number
  );

create table slabs
  ( id number,
    production_date date, 
    slab_name varchar(10),
    parent number
  );

create table coils
  ( id number,
    production_date date, 
    coil_name varchar(10),
    parent number
  ); 
```

我还插入了一些虚拟数据（但具有适当的关系），如下所示：

```
insert into heats values (1,'01-Nov-2012','GRADE A',null);  
insert into heats values (2,'01-Nov-2012','GRADE B',null);  
insert into heats values (3,'01-Nov-2012','GRADE C',null);  

insert into slabs values (10,'02-Nov-2012','SLAB A',1);
insert into slabs values (20,'02-Nov-2012','SLAB B',2);
insert into slabs values (30,'02-Nov-2012','SLAB C',3);

insert into coils values (100,'03-Nov-2012','COIL A.1',10);
insert into coils values (200,'03-Nov-2012','COIL B.1',20);
insert into coils values (300,'03-Nov-2012','COIL C.1',30);

insert into coils values (400,'03-Nov-2012','COIL A.2',100);
insert into coils values (500,'03-Nov-2012','COIL B.2',200);
insert into coils values (600,'03-Nov-2012','COIL C.2',300);

insert into coils values (700,'03-Nov-2012','COIL A.3',400);
insert into coils values (800,'03-Nov-2012','COIL B.3',500);
insert into coils values (900,'03-Nov-2012','COIL C.3',600); 
```

请注意，在最后 9 个 INSERTS 中，一些线圈可以是其他线圈的孩子，而一些线圈可以是平板的孩子。Slabs 只能是 Heats 的子代。热火没有父母。

现在，我想获得线圈 COIL A.3 的家谱。我可以简单地获得线圈和线圈之间的子父关系。像这样

```
select coil_name from coils c
start with coil_name='COIL A.3'
connect by prior c.parent = c.id 
```

效果很好，我得到了输出

```
COIL A.3
COIL A.2
COIL A.1 
```

但我希望输出还包括其他表（加热和平板）的父母

```
COIL A.3
COIL A.2
COIL A.1
SLAB A
HEAT A 
```

但是当我尝试将其他表名添加到查询中并修改 connect by 子句时，查询变得非常缓慢。如何更有效地实现所需的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T05:48:06.590

`Union all`查询结果集：

```
 SQL> select *
  2    from
  3  (
  4    select id
  5         , slab_name as name
  6         , parent
  7      from slabs c
  8  
  9    union all
 10  
 11    select id
 12         , coil_name
 13         , parent
 14      from coils c
 15  
 16    union all
 17  
 18    select id
 19         , heat_name
 20         , parent
 21      from  heats
 22  
 23  
 24    )
 25   start with name='COIL A.3'
 26   connect by prior parent = id
 27  ;

        ID NAME           PARENT
---------- ---------- ----------
       700 COIL A.3          400
       400 COIL A.2          100
       100 COIL A.1           10
        10 SLAB A              1
         1 GRADE A 
```

# java - 在给定范围内在 Java 中生成随机小写字母

> ID：13338642
> 
> 赞同：3
> 
> 时间：2012-11-12T05:07:41.607
> 
> 标签：java, random, letters

我正在尝试编写一种方法，该方法可以采用起始小写字母和结尾小写字母并在该范围内生成随机字母。接下来，将随机字母分配给用户确定大小的数组的元素。到目前为止，只要起始字符是“a”，我的代码似乎就可以工作。当起始字符不是“a”时，我不知道如何使它工作。我编写了这个完整的程序来尝试解决我的方法：

```
import java.util.Random;
import java.util.Scanner;
public class Add
{
    public static void main( String[] args )
    {
        Scanner scan = new Scanner(System.in);
        System.out.print("Enter array size: ");
        int arraySize = scan.nextInt();
        char charArray[] = new char[arraySize];

        int fromChar;
        int toChar;
        do
        {
        System.out.print("Enter first character: ");
        String line = scan.next();
        fromChar = line.charAt(0);

        System.out.print("Enter second character: ");
        line = scan.next();
        toChar = line.charAt(0);

        Random generator = new Random();
        for(int i = 0; i < arraySize; i++)
        {
            int randomInt = generator.nextInt(toChar - fromChar + 1) + 97;
            //System.out.print(randomInt + " | "); //used to print unicode values
            charArray[i] = (char)(randomInt);
        }
        System.out.println(charArray);
    }
        while(true);

    } // end of main
}// end of class 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T05:11:53.107

```
int randomInt = generator.nextInt(toChar - fromChar + 1) + fromChar; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T05:12:53.277

```
int randomInt = generator.nextInt(toChar - fromChar + 1) + 97; 
```

这不应该是：-

```
int randomInt = generator.nextInt(toChar - fromChar + 1) + fromChar; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T05:20:48.557

**它会帮助你吗？如果你把'a'放在哪里，例如A，它会写一个大写字母，你把数字放在那里，它会给你一些字符，我把b放在那里，从b开始。**

公共静态无效主要（字符串[]参数）{

```
 Random r = new Random();

    System.out.print((char) ((r.nextInt(26) + 'b')) + " ");

    System.out.println();

} 
```

# expressionengine - 将 Safecracker 表单上的动态 author_id 设置为非超级管理员组

> ID：13338644
> 
> 赞同：2
> 
> 时间：2012-11-12T05:07:56.080
> 
> 标签：expressionengine, author, safecracker

我有一个项目，我需要一个名为 Staff Admin 的成员组（权限略低于超级管理员），以便能够通过 Safecracker 表单代表站点成员公开条目数据。现在，我能够在表单上成功设置“author_id”（使用隐藏输入），并且在超级管理员组下登录的用户可以成功发布新条目并在条目上设置指定的 author_id。

问题是，即使我的“员工管理员”组设置允许编辑和更改条目的作者，我也无法在 Safecracker 表单上执行此操作，并且指定的“author_id”被忽略，我收到错误为“invalid_author”触发（所选作者无效。）

认为 Api_channel_entries.php 中的行在 1246 左右（在 EE 2.4 下），它只作为例外来针对超级管理员组进行身份验证：

```
if ($data['author_id'] != $this->EE->session->userdata('member_id') && $this->EE->session->userdata('group_id') != 1) 
```

有什么想法可以解决我遇到的这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:01:02.840

触发该错误是因为您尝试将条目重新分配给的作者 ID 不是该频道的指定有效作者之一。要解决此问题，您需要编辑成员组（您尝试将条目分配给的用户）并启用“在 PUBLISH 页面多作者列表中包含成员？” 环境。

您*可能*还需要通过成员管理 > 编辑成员 > 成员首选项 > “在 PUBLISH 页面多作者列表中包含用户？”为每个用户启用该设置？

# jquery - 将 jquery 图标添加到可点击的 html 测试

> ID：13338646
> 
> 赞同：0
> 
> 时间：2012-11-12T05:08:12.187
> 
> 标签：jquery, html

我怎样才能在语句的最后添加一个图标 [+]，这样如果我点击一个图标，我可以得到一个警报。

```
<div id="catalog" style="width: 518px;">
      <ul id="catalog111" style="left: -37px;top:       -140px;width=500%;">
        <li class="ui-state-default" style="list-style:square; margin: 5px; padding: 5px;
  color: black; background-color: #A0A0A0; width: 441px; font-size: 12px;color: #313b3b"  
    >I should be able to select a document to upload into system  'Need Icon'</li>

      </ul>

   </div>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:44:17.070

你可以这样做，

```
<script language="javascript" type="text/javascript">
$(document).ready(function() {
    $('#plus').click(function(){
        alert('+ sign clicked');
    });
});                
</script> 
```

您可以使用超链接在语句末尾放置一个链接，

```
<div id="catalog" style="width: 518px;">
      <ul id="catalog111" style="left: -37px;top: -140px;width=500%;">
        <li class="ui-state-default" style="list-style:square; margin: 5px; padding: 5px; color: black; background-color: #A0A0A0; width: 441px; font-size: 12px;color: #313b3b">I should be able to select a document to upload into system <a href="#" id="plus" style="text-decoration:none">[+]</a></li>
      </ul>
</div>​ 
```

# prolog - 如何在 Prolog 数据库中断言算术关系

> ID：13338648
> 
> 赞同：0
> 
> 时间：2012-11-12T05:08:18.843
> 
> 标签：prolog, arithmetic-expressions

[我正在使用Bratko](http://ai.ia.agh.edu.pl/wiki/prolog%3apllib%3aforward-chaining_rule_interpreter)提出的前向链接算法。如何在 prolog DB 中输入算术规则。例如，我想输入年龄是 35。换句话说，我想输入事实（年龄，35）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:38:01.887

很大程度上取决于您使用的 Prolog。

我认为假设 assert/1 和“反向”retract/1 的可用性是安全的。您链接的代码已经使用了 assert/1。

一些 Prolog 要求通过 assert/retract 操作谓词的*声明：*

```
:- dynamic fact/2.

...
  assert(fact(age, 35)),
...
  retract(fact(Kind, Value)),
  write(Kind:Value),
... 
```

# iframe - 通过中国代理服务器在 iframe 中加载内容？

> ID：13338652
> 
> 赞同：2
> 
> 时间：2012-11-12T05:08:47.250
> 
> 标签：iframe, proxy, external

我想在我网站的 iframe 中加载外部网站。是否可以使用中文代理服务器加载外部内容？目标是模拟中国的审查制度。

非常感谢。

# php - 用户在 Asterisk 中挂断时丢失的记录文件

> ID：13338657
> 
> 赞同：0
> 
> 时间：2012-11-12T05:09:16.427
> 
> 标签：php, asterisk, agi

我有一个语音应用程序，我想在其中保存录制的声音文件。我的代码是：

```
$record_file= $dir_path . "recordfile_".$file_count;
$this->obj_agi->exec("Record","$record_file.wav,5,$maxsecs"); 
```

每当我在录音过程中挂断电话时，录音应用程序就无法执行并挂断电话。

有谁知道如何在挂机时管理此记录功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:53:13.920

即使您挂断，录音应用程序也会正常处理录音。

然而，在 AGI 内部，捕获挂断的最佳方法是捕获从 Asterisk 发送到 AGI 进程的信号。通过捕获您的 SIGHUP，您可以做任何您想做的事情（计费、触摸文件、插入数据库等）。

默认情况下，将发送 SIGHUP。

要获取更多信息，这里是核心显示应用程序 AGI 的输出（来自 CLI）

```
 A locally executed AGI script will receive SIGHUP
     on hangup from the channel except when using DeadAGI. A fast AGI server will
     correspondingly receive a HANGUP inline with the command dialog. Both of theses
     signals may be disabled by setting the ${AGISIGHUP} channel variable to 'no'
     before executing the AGI application. Alternatively, if you would like the
     AGI application to exit immediately after a channel hangup is detected, set
     the ${AGIEXITONHANGUP} variable to 'yes'. 
```

# java - 巨大的二进制矩阵（位集数组上的逻辑与）Java 性能

> ID：13338658
> 
> 赞同：2
> 
> 时间：2012-11-12T05:09:22.613
> 
> 标签：java, arrays, performance, binary-data, bitset

我们有一个 java 服务，它在一个巨大的二进制矩阵（10 000 x 10 000）上计算一些逻辑运算。该矩阵是位集数组。最重要的操作是给定位集和数组中每个位集之间的交集（逻辑与）。我们正在使用 OpenBitset，它显示了相当好的结果（至少比 java.util.BitSet 好）。数据稀疏性适中（可能连续有多个 0 或 1），位集大小是固定的。

对我们来说最重要的是快速响应时间（目前约为 0.05 秒），因此随着矩阵和请求数量的增长，我们希望找到进一步改进的方法。可能有一些代数方法或更快的库。

我们尝试使用[javaewah](http://code.google.com/p/javaewah/)，但与 OpenBitset 相比，该库执行的操作慢了 10 倍。项目页面上有一个比较，表明其他位集压缩库比 Java BitSet 慢。

你能提出一些其他的方法或新的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:22:01.180

在我最近的博客中，我讨论了一个“又一个”位集实现——带有源代码。也许您想尝试一下：[http ://www.censhare.com/en/aktuelles/censhare-labs/yet-another-compressed-bitset](http://www.censhare.com/en/aktuelles/censhare-labs/yet-another-compressed-bitset)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-23T08:42:58.207

如果您不介意使用客户端-服务器解决方案，[pilosa](https://github.com/pilosa/java-pilosa)将非常适合您的用例。

*   java，python，go的绑定
*   分组支持
*   时间范围支持
*   巨大的矩阵支持
*   使用高性能的roaringbitmap
*   水平缩放
*   舵图[https://github.com/pilosa/helm](https://github.com/pilosa/helm)

# c++ - C++中的静态初始化和线程安全

> ID：13338659
> 
> 赞同：4
> 
> 时间：2012-11-12T05:09:30.977
> 
> 标签：c++, multithreading, static, thread-safety

类实例的静态初始化不是线程安全的。下面的代码是一个不应该做的例子：

```
extern int computesomething();

class cachedcomputation
{
public:
    cachedcomputation()
    {
        result = computesomething();
    }

    int result;
};

void usecached()
{
    static cachedcomputation c;

    // use of c.result - may break
} 
```

但是，下面的代码是线程安全的吗？（忽略解决方案的丑陋）它何时或为什么会中断？

```
extern int computesomething();

class cachedcomputation
{
public:
    cachedcomputation()
    {
    if(0==InterlockedCompareExchange(&mutex, 1, 0))
    {
        // first thread
            result = computesomething();
        InterlockedExchange(&mutex, 2);
    }
    else
    {
        // other thread - spinlock until mutex==2
        while(2!=InterlockedCompareExchange(&mutex, 2, 2)){}
    }
    }

    int result;

private:
    long mutex;
};

void usecached()
{
    static cachedcomputation c;

    // use of c.result - ???
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T05:18:16.290

你需要：

*   初始化你的“互斥锁”
*   在 if 块末尾重置“mutex”：InterlockedExchange(&mutex, 0)
*   可选地将 if 语句转换为 while，因此您的代码将阻塞，直到“互斥锁”被解锁

# jquery - ContinuousCalendar - 如何设置选定的日期？

> ID：13338661
> 
> 赞同：0
> 
> 时间：2012-11-12T05:09:44.750
> 
> 标签：jquery

有人熟悉[连续日历](http://reaktor.github.com/jquery-continuous-calendar/index.html)吗？这个强大的日历缺少示例代码。

如何以编程方式选择日期范围？

[这个例子](http://reaktor.github.com/jquery-continuous-calendar/site/playground.html)表明它是可以做到的。我已经浏览了源代码，但无法弄清楚他们是如何做到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:45:35.937

您只需要将值放入隐藏字段，并确保参数 selectToday 为 false（默认为 false）

```
<div id="dateRange1">
  <input type="hidden" class="startDate" name="range_start" value='1/1/2012' />
  <input type="hidden" class="endDate" name="range_end" value='1/2/2012' />
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:46:14.017

这就是你可以做到的（用你的替换日期

`$('#myContainer').append('<input type="hidden" class="startDate" value="' + '05/22/2012' + '" /><input type="hidden" class="endDate" value="' + '05/25/2012' + '"/>')`

或点击点击：

```
$('#create').click(function(){
        $('#myContainer').append('<input type="hidden" class="startDate" value="' + $('#selectionStart').val() + '" /><input type="hidden" class="endDate" value="' + $('#selectionEnd').val() + '"/>')

        $('#myContainer').continuousCalendar();
}); 
```

这是运行代码：[jsFiddle 上的 ContinuousCalendar](http://jsfiddle.net/qaiser110/5ncmL/)

# android - IOS和Android在Windows下开发

> ID：13338667
> 
> 赞同：1
> 
> 时间：2012-11-12T05:10:54.343
> 
> 标签：android, ios, cross-platform

我目前正在开发 Android 应用程序，并想进入 IOS 开发。许多人建议使用跨平台开发工具。我已经搜索并没有找到任何可靠的东西。任何人都可以为 IOS 和 Android 推荐一个好的跨平台开发 IDE。请提供肯定有效的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:45:14.120

Cordova/PhoneGap 在 iOS 和 Android 之间运行良好，但缺点是您必须使用 HTML 和 javascript 来实现您的应用程序。地图等原生元素需要大量工作，尽管它们有很多插件。不幸的是插件不是标准的。

样式表和 html 很好，因为它们可以相对容易地在大量屏幕尺寸上扩展应用程序。

Window phone 标准有问题，老款速度很慢，但也许 WP8 有改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:11:35.497

我曾使用这两个跨平台。这些都很容易使用。

*   用于跨平台应用程序的[Appcelerator Titanium。](http://www.appcelerator.com/)

使用它，您可以从单个基于 JavaScript 的 SDK 创建丰富的原生 iOS、Android、混合和移动 Web 应用程序

*   [电话间隙](http://phonegap.com/)

使用 PhoneGap 进行开发让您可以使用您熟悉和喜爱的 Web 代码：HTML、CSS 和 Javascript，自由地为 iOS、Android、Blackberry、Windows Phone、Palm WebOS、Bada 和 Symbian 创建移动应用程序。

# ios - 无法在 iOS6 中使导航栏完全透明

> ID：13338668
> 
> 赞同：7
> 
> 时间：2012-11-12T05:10:55.823
> 
> 标签：ios, uikit, ios6, uinavigationbar

我正在使用以下代码使我的导航栏在 iOS5 中透明：

```
const float colorMask[6] = {222, 255, 222, 255, 222, 255};
UIImage *img = [[UIImage alloc] init];
UIImage *maskedImage = [UIImage imageWithCGImage: CGImageCreateWithMaskingColors(img.CGImage, colorMask)];
[self.navigationController.navigationBar setBackgroundImage:maskedImage forBarMetrics:UIBarMetricsDefault]; 
```

升级到 iOS6，导航栏仍然是透明的，但现在它下面有一条细黑线。如何使导航栏完全透明？

我还尝试了以下所有方法：

```
self.navigationController.navigationBar.translucent = YES;
self.navigationController.navigationBar.opaque = YES;
self.navigationController.navigationBar.tintColor = [UIColor clearColor];
self.navigationController.navigationBar.backgroundColor = [UIColor clearColor];
[self.navigationController.navigationBar setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault];
[self.navigationController.navigationBar setBarStyle:UIBarStyleBlackTranslucent];
[[UINavigationBar appearance] setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault]; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T09:08:20.187

解决了。iOS6 为导航栏添加了阴影。所以我在 iOS5 中使用的屏蔽代码仍然可以正常工作 - 我只需要添加

```
if ([self.navigationController.navigationBar respondsToSelector:@selector(shadowImage)]) 
{ 
[self.navigationController.navigationBar setShadowImage:[[UIImage alloc] init]]; 
} 
```

摆脱阴影。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-30T16:22:57.020

```
 self.navigationController.navigationBar.translucent = YES; // Setting this slides the view up, underneath the nav bar (otherwise it'll appear black)
    const float colorMask[6] = {222, 255, 222, 255, 222, 255};
    UIImage *img = [[UIImage alloc] init];
    UIImage *maskedImage = [UIImage imageWithCGImage: CGImageCreateWithMaskingColors(img.CGImage, colorMask)];

    [self.navigationController.navigationBar setBackgroundImage:maskedImage forBarMetrics:UIBarMetricsDefault];
//remove shadow
    [[UINavigationBar appearance] setShadowImage: [[UIImage alloc] init]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T02:45:39.117

```
 if ([self.navigationController.navigationBar respondsToSelector:@selector(shadowImage)])           
 { 
    [self.navigationController.navigationBar setShadowImage:[[[UIImage alloc] init] autorelease]]; 
    // autorelease is necessary, or else [[UIImage alloc] init]'s retainCount is 2.
 } 
```

# citrix - 如何在 Citrix 上找到我的应用程序的并发使用数？

> ID：13338669
> 
> 赞同：1
> 
> 时间：2012-11-12T05:10:56.603
> 
> 标签：citrix

在 Citrix 下是否有办法让我的应用程序调用 Citrix 主机以了解我的应用程序当前正在运行多少个副本？我们想在我们的许可证中限制这一点，我们需要有一种方法在代码中验证它。

谢谢 - 戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:02:54.780

不，Citrix XenApp（这是他们最知名的产品，可能是您要询问的产品）不提供任何可用于应用程序许可证检查的 API 或服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T23:25:29.207

您可以通过 Citrix 获得的最接近方法是使用 Powershell SDK 并调用 Get-XASessionProcess 来获取进程列表。这种方法的问题是您需要成为 Citrix 管理员，这是一种相当全面的方法。

如果我想为许可证强制实施一个简单的并发限制，我会考虑两个选项：

1.  在我的应用程序与之通信的地方实现一个简单的 Web 服务，以获得许可证。

2.  创建一个简单的 Windows 服务来跟踪进程以维护应用程序的并发实例计数。当超过配置的许可证计数时，您可以在全局命名空间的共享内存部分中设置一个标志。然后在您的应用程序中，您在启动时检查此标志并在设置后立即退出。

您可以使用 WMI 跟踪进程，例如

[http://weblogs.asp.net/whaggard/archive/2006/02/11/438006.aspx](http://weblogs.asp.net/whaggard/archive/2006/02/11/438006.aspx)

# ruby - Ruby 中的 url_encode

> ID：13338672
> 
> 赞同：9
> 
> 时间：2012-11-12T05:11:06.090
> 
> 标签：ruby, urlencode

我阅读[了`url_encode`](http://rdoc.info/stdlib/erb/1.9.3/ERB/Util%3Aurl_encode).

是否有一个表格可以准确地告诉我哪个字符被编码为什么，使用 `url_encode`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T05:39:19.753

ERB[`url_encode`](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB/Util.html#method-c-url_encode)可以调整：

```
def url_encode(s)
  s.to_s.dup.force_encoding("ASCII-8BIT").gsub(%r[^a-zA-Z0-9_\-.]/) {
    sprintf("%%%02X", $&.unpack("C")[0])
  }
end 
```

至：

```
def url_encode(s, regex=%r[^a-zA-Z0-9_\-.]/)
  s.to_s.dup.force_encoding("ASCII-8BIT").gsub(regex) {
    sprintf("%%%02X", $&.unpack("C")[0])
  }
end

url_encode('pop', /./)
=> "%70%6F%70" 
```

此外，Ruby 的 CGI 和 URI 模块能够对 URL 进行编码，将受限制的字符转换为实体，因此不要忽视它们的产品。

例如，URL 参数的转义字符：

```
CGI.escape('http://www.example.com')
=> "http%3A%2F%2Fwww.example.com"

CGI.escape('<body><p>foo</p></body>')
=> "%3Cbody%3E%3Cp%3Efoo%3C%2Fp%3E%3C%2Fbody%3E" 
```

Ruby CGI[`escape`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/cgi/rdoc/CGI.html#method-c-escapeElement)还使用一个小的正则表达式来确定应该在 URL 中转义哪些字符。这是文档中方法的定义：

```
def CGI::escape(string)
  string.gsub(%r([^ a-zA-Z0-9_.-]+)/) do
    '%' + $1.unpack('H2' * $1.bytesize).join('%').upcase
  end.tr(' ', '+')
end 
```

您还可以覆盖它并更改正则表达式，或者在重新定义方法时将其公开以供您自己使用：

```
def CGI::escape(string, escape_regex=%r([^ a-zA-Z0-9_.-]+)/)
  string.gsub(escape_regex) do
    '%' + $1.unpack('H2' * $1.bytesize).join('%').upcase
  end.tr(' ', '+')
end 
```

[`URI.encode_www_form_component`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html#method-c-encode_www_form)也做了类似的编码，字符的唯一区别是`*`和`：`

 ````
URI.encode_www_form_component('<p>foo</p>')
=> "%3Cp%3Efoo%3C%2Fp%3E" 
```

而且，与覆盖类似`CGI::escape`，您可以覆盖以下中的正则表达式`URI.encode_www_form_component`：

```
def self.encode_www_form_component(str, regex=%r[^*\-.0-9A-Z_a-z]/)
  str = str.to_s
  if HTML5ASCIIINCOMPAT.include?(str.encoding)
    str = str.encode(Encoding::UTF_8)
  else
    str = str.dup
  end
  str.force_encoding(Encoding::ASCII_8BIT)
  str.gsub!(regex, TBLENCWWWCOMP_)
  str.force_encoding(Encoding::US_ASCII)
end 
````

# gwt - GWT 设计器，.ui.xml 文件

> ID：13338675
> 
> 赞同：1
> 
> 时间：2012-11-12T05:11:17.733
> 
> 标签：gwt, web-applications, gwt-designer

问题是关于 Google GWT Designer 的。GWT Designer 可以处理没有任何 .ui.xml 文件的 .java 文件。但我有一个 gwt 项目，其中设计是通过 .ui.xml 文件和 java 类实现的。它比java类更复杂。你有什么想法吗？可能应该重构吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T07:26:09.543

首先，如果写得好，就不需要重构现成的 UiBinder。这是一个很棒的 GWT 框架，允许将逻辑与视图分离。如果你拒绝它，你的项目将很难维护。

其次，同一个 GWT 项目可以包含用 Java 代码和 UiBinder xml 文件实现的视图。这种情况发生在 UiBinder 尚未支持的旧项目的支持下。Uibinder 是一种更现代的方法，它有很多好处。也就是说，如果您出于某种原因更喜欢仅在没有 xml 的 Java 代码中声明视图，那么请用 Java 代码编写它。这将共存并正常工作。

最重要的是现在的 GWT Designer 已经[支持](https://developers.google.com/web-toolkit/tools/gwtdesigner/wizards/gwt/uibinder_composite)UiBinder。否则，没有人会使用它。

# mysql - 如何在另一个表的嵌套选择中引用一个表中的列

> ID：13338680
> 
> 赞同：1
> 
> 时间：2012-11-12T05:11:43.287
> 
> 标签：mysql, select, nested

我有一个关于使用嵌套选择的基本问题，其中嵌套选择的表名是第一个表中列的数据。这是我想要做什么以及我尝试过但不起作用的查询的示例。

在这个例子中，我想要一个查询来告诉我哪些宠物有几天不喂食

```
table pets

name type feed_schedule
-----------------------
joe  dog  sched_1
sam  cat  sched_2
...

table sched_1

day  feed
---------
sun  yes
mon  no
tues yes
wed  yes
thur no
fri  yes
sat  yes

table sched_2
day  feed
---------
sun  yes
mon  yes
tues yes
wed  no
thur no
fri  yes
sat  yes

SELECT * from pets WHERE (SELECT * FROM pets.feed_schedule WHERE
                       (feed = 'yes')
                       ) 
```

此查询抱怨我无权访问表“feed_schedule”我该如何完成？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:33:33.397

您当前的架构要求使用动态生成的表名。可以使用客户端代码或存储过程使其工作，但它始终需要两个步骤：首先，查询`pets`表以获取带有计划的表的名称，第二步是查询选定的计划表。换句话说，相当混乱。

相反，我建议将您的架构更改为具有单个表计划来保存所有计划，如下所示：

```
CREATE TABLE schedules (
    schedule_id INT NOT NULL,
    feed_day VARCHAR(4),
    feed VARCHAR(3)
) 
```

您现有的所有时间表都将保存到此表中。此外，每只宠物都应保存整数 schedule_id。

现在，您可以使用简单的连接来获取结果，如下所示：

```
SELECT p.name
FROM pets p, schedules s
WHERE p.schedule_id = s.schedule_id
  AND s.feed = 'yes' 
```

# asp.net - 无效参数

> ID：13338685
> 
> 赞同：0
> 
> 时间：2012-11-12T05:12:26.310
> 
> 标签：asp.net, linq

为了从数据库中检索文件，我使用了下面的 linq 查询来下载 efile，但是我在函数下载（Efile）中遇到了无效参数的问题。我见过一些使用数据表进行下载的地方。我喜欢在不使用数据表的情况下这样做，但我不知道怎么做？

```
the fields of table tblfile is like below.

fileid(int), FileName (varchar(50)), ContentType (varchar(50)), Data varbinary(MAX) 
```

请帮助是什么问题。

```
protected void LinkButton1_Command(object sender, CommandEventArgs e)
{
    if (e.CommandName == "Download")
    {
       _DataContext = new EDMSDataContext();
       //you can get your command argument values as follows
       string FileId = e.CommandArgument.ToString();
       int _FileId = Convert.ToInt32(FileId);
       var Efile = from ef in _DataContext.tblFiles
                   where ef.FileId == _FileId
                   select ef;
       if (Efile != null)
       {
           download(Efile);
       }
    }
}

private void download ( tblFile Efile)
{
    Byte[] bytes = (Byte[])Efile.Data.ToArray();
    Response.Buffer = true;
    Response.Charset = "";
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    Response.ContentType = Efile.ContentType.ToString();
    Response.AddHeader("content-disposition", "attachment;filename="
        + Efile.FileName.ToString());
    Response.BinaryWrite(bytes);
    Response.Flush();
    Response.End();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T05:17:23.763

该方法接受“tblFile”对象的参数并且您正在传递集合。将 Single() 添加到您的 linq 查询表达式并得到解决。

```
 var Efile = (from ef in _DataContext.tblFiles
               where ef.FileId == _FileId
               select ef).Single(); 
```

或者，您也可以使用`First()`,`FirstOrDefault()`或`SingleOrDefault()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:29:02.067

确保您的 .dbml 文件具有您的表**tblfile**的属性，如您所愿并如您在此处描述的那样。并使用下面的代码重试数据库中的数据。

```
tblFile data = _DataContext.tblFile.SingleOrDefault(s=>s.fileid  ==  _FileId); 
```

这将按您的意愿工作。

# symfony - 你如何在 Symfony2.1 中为旧版本的 Symfony 注册包？

> ID：13338692
> 
> 赞同：2
> 
> 时间：2012-11-12T05:13:20.733
> 
> 标签：symfony, symfony-2.1, composer-php

我正在尝试在我的 Symfony2.1 应用程序中[为 Doctrine2 使用他们的 EntityAudit 扩展。](https://github.com/simplethings/EntityAudit)

我对此很陌生，而且我刚刚开始意识到多年来为 Symfony 安装新包的“正确”方法有多少。某种“Deps”文件曾经存在但不再存在？在安装 Symfony 时，“使用 Composer”是一种选择——但似乎纯粹是一种选择。现在我开始认为这不是真的。

在 EntityAudit 的说明中，它指的是“自动加载”，并且基于其他内容，我显然应该修改我的 Autoload.php 中的 registerNamespaces 数组。除了我没有那个。所以我找到[了这个链接](https://stackoverflow.com/questions/12338982/symfony2-1-bundle-version-confusion-for-symfony-and-sonata-admin-knp-menu-bun)，那个家伙表示 Symfony2.1 不再这样做，而是支持使用 Composer。

不过，在这种情况下，我真的不知道如何使用 Composer。实际上，我根本不知道如何使用它，但我似乎在其中做了 1 或 2 件基本的事情——“更新”本身和“安装”.. 供应商？无论如何，我找不到足够通用的说明来适应这种需要。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T08:09:12.473

deps 文件在 2.0 中用于管理依赖项。2.1 版本使用了更好的 Composer 依赖管理工具。

## 用作曲家安装

首先你需要一些关于作曲家的基础知识。例如，阅读这篇文章： http: [//net.tutsplus.com/tutorials/php/easy-package-management-with-composer/](http://net.tutsplus.com/tutorials/php/easy-package-management-with-composer/)

在你可以使用 composer 安装一个包之前，你应该寻找那个包的 Packagist 包。对于`SimpleThings\EntityAuditBundle`你应该寻找一个`simplethings/entity-audit-bundle`包，它确实存在：[https ://packagist.org/packages/simplethings/entity-audit-bundle](https://packagist.org/packages/simplethings/entity-audit-bundle)

> **边注**
> 
> Packagist 是 Composer 的主要存档。如果你正在寻找一个捆绑包，你能做的最好的事情就是查看 [KnpBundles](http://knpbundles.com)，它是 Symfony Bundles 的非官方档案。如果一个包包含一个 README 文件，它会显示在那里，如果它有一个 Packagist 包，它会显示一个指向该包的链接。这是一个开始搜索捆绑包的非常有用的站点。

现在您有了包名称，您应该确定要使用的版本。由于这是一个未完成的捆绑包，我们可以通过使用版本来使用最新`dev-master`版本。但是有可能一个`dev-master`版本是针对的`Symfony2.2`，如果我们使用 ，我们应该使用另一个版本`Symfony2.1`，这应该在 README 文件中（在包中，您可以在 Github 或 KnpBundles 上查看）。如果它不在 README 中，您可以使用您想要的版本。可以[在 StofDoctrineExtensionsBundle](https://github.com/stof/StofDoctrineExtensionsBundle#readme)中找到有关版本的注释示例。

现在我们可以将包添加到我们的`composer.json`文件中并更新依赖项。您可以手动执行此操作：

1.  ### 将其添加到`composer.json`文件中：

    ```
    {
        ...,
        "require": {
            ...,
            "simplethings/entity-audit-bundle": "dev-master"
        }
    } 
    ```

2.  ### 更新依赖

    ```
    $ php composer.phar update simplethings/entity-audit-bundle 
    ```

    或更新所有依赖项

    ```
    $ php composer.phar update 
    ```

或者你可以这样做是一个命令：

1.  运行此命令（其中包含包中的包`composer.json`并更新包）

    ```
    $ php composer.phar require simplethings/entity-audit-bundle:dev-master 
    ```

现在这个包被安装到了我们的 Symfony 项目中（in `vendor/simpletings/`）并且自动加载器识别了这个包。我们现在唯一需要做的就是在以下位置注册捆绑包`AppKernel`：

```
// app/AppKernel.php

// ...
class AppKernel extends Kernel
{
    // ...

    public function registerBundles()
    {
        $bundles = array(
            ...,
            new SimpleThings\EntityAudit\SimpleThingsEntityAuditBundle(),
        );

        // ...
    }
} 
```

# php - 数据库不更新行

> ID：13338693
> 
> 赞同：0
> 
> 时间：2012-11-12T05:13:22.107
> 
> 标签：php, mysql

在您假设我没有建立数据库连接之前，我做到了。唯一不更新的代码部分是 if empty 语句。

所有值都可以正确回显，只是查询不起作用。

这是在目录配置中并命名为 stuff.php

```
 $user = $mysqli->real_escape_string($_SESSION['username']);
 $user_query = "SELECT * FROM users WHERE username = '$user'";
 $result = $mysqli->query($user_query);
 $row = $result->fetch_assoc();
 $referrer = $row['ref'];
 $refearn = $row['refearn']; 
```

验证.php

```
include('config/stuff.php');
if (isset($_SERVER['HTTP_X_FORWARDED_FOR'])) {  // Get Real IP              
    $IP = $_SERVER['HTTP_X_FORWARDED_FOR']; 
} else { 
    $IP = $_SERVER['REMOTE_ADDR'];
}

if ($IP=="external server ip here") {
        if (!empty($referrer)){
            $mysqli->query("UPDATE users SET points=points+10, refearn = refearn+10 WHERE username='".$referrer."'") or die(mysqli_error($mysqli)); 
        }
        $mysqli->query("UPDATE users SET points=points+".$earnings.", completed = completed+1 WHERE username='".$subid."'") or die(mysqli_error($mysqli));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:23:07.607

我的猜测是您可以尝试通过查询检索点的值，然后添加到它，这样您就可以更新为一个简单的值。但是，如果 mysql_error() 返回错误，则应该更容易弄清楚。

例子：

```
$getPoints = mysql_query("SELECT points FROM table WHERE condition");
$points = mysql_result($getPoints, 0, "points");

$update = mysql_query("UPDATE table SET points=" . ($points+10) . " WHERE condition"); 
```

希望有帮助。不过，另一个考虑因素。为什么要使用 endif 结构，除非您要破坏 PHP 标记来显示内容？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:24:42.560

尝试这个：

```
$mysqli->query("UPDATE `users` SET `points`=`points`+10, `refearn` = `refearn`+10 WHERE `username`='".$referrer."'") or die(mysqli_error($mysqli)); 
```

希望这可以帮助。我认为，mysql 查询可能会将它们视为常量 - 而不是 mysql 行。试试看

# mysql - 查询以将列放在单行中

> ID：13338694
> 
> 赞同：1
> 
> 时间：2012-11-12T05:13:24.617
> 
> 标签：mysql, sql

我有一张如下表

```
    创建表`水果`（
      `fruit_id` int(11) 默认 NULL，
      `fruit_name` varchar(255) collat​​e latin1_general_ci 默认 NULL
    );

```

该表包含以下字段

```
    插入水果（fruit_id，fruit_name）
               值（101，'芒果'），
                      （102，“苹果”），
                      （103，“橙色”），
                      （104，“菠萝”），
                      （105，“柠檬”），
                      （106，“奶油冻”）；

```

我想要一个选择查询，它将列放入单行，如下所示，用于特定的 id，例如

```
    选择fruit_id，fruit_name
       从水果
      其中fruit_id = 101

```

上述查询将输出分为两列

```
    101 芒果

```

我想要单行中的列如下

```
    101
    芒果

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:17:30.983

```
SELECT row
FROM
(
  SELECT fruit_id, fruit_id row FROM fruits
  UNION
  SELECT fruit_id, fruit_name row FROM fruits
) s
WHERE fruit_id = 101; 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/33fe0/2)

# javascript - 使用 TypeScript 时，如何使用定义文件定义数组中使用的类型？

> ID：13338700
> 
> 赞同：1
> 
> 时间：2012-11-12T05:13:45.577
> 
> 标签：javascript, typescript

我正在使用数据表插件 datatables.net，如下所示：

```
 oTable = $('#dataTable').dataTable({ }); 
```

这是我的一些代码

```
$('#detailData')
    .on('click', '.sort-up', function (event) {
        event.preventDefault();
        var column = $(this).closest('th'),
            columnIndex = column.parent().children().index(column.get(0));
        oTable.fnSort([[columnIndex, 'asc']]);
        return false;
    }) 
```

这给了我以下 Typescript 错误：

> “数组文字表达式中的不兼容类型”

谁能给我一些关于如何解决这个问题的建议？它似乎不喜欢 columnIndex 是一个数字而 'asc' 是一个字符串的事实。在 Stack Overflow 上，我看到了以下内容：

```
var f: any[][] = [
    [Foo, [1, 2, 3]],
    [Bar, [7, 8, 9]],
]; 
```

我知道我需要做这样的事情，但是有没有办法可以在 .d.ts 文件中设置 fnSort 函数的定义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:38:45.547

这应该做的工作

```
oTable.fnSort([<any[]>[columnIndex, 'asc']]); 
```

数组应该是统一类型，因为你有混合类型 [number, string] 它会引发编译错误。将其转换为 any[] 告诉编译器数组中的每个值都是“any”类型（顺便说一句，这是真的；））。然后编译器将生成正确的js。它只是一种愚弄打字稿编译器的方法

你也可以用其他方式 - 将 columnIndex 转换为字符串，但如果你需要它是数字，那么你必须将数组转换为 any[]

# grid - extjs 中的远程分页网格

> ID：13338707
> 
> 赞同：0
> 
> 时间：2012-11-12T05:14:51.243
> 
> 标签：grid, extjs4, paging

你是我最后的机会 :(。我正在尝试使用 mvc 模式工作一个分页网格。网格显示第 21 条记录，但单击“下一步”分页工具栏图标时不刷新。我所有的代码如下详述：

**商店：**

```
Ext.define('CRUDManantiales.store.grid.AbmUsuarios', {
    extend: 'Ext.data.Store',
    model: 'CRUDManantiales.model.grid.AbmUsuarios',

    proxy: {
        type: 'ajax',
        url: 'resources/bundles/usuarios/generarJsonTodos.php',
        reader: {
            type: 'json',
            root: 'data',
            successProperty: 'success',
            totalProperty: 'total'
        }
    }
}); 
```

**主视图代码：**

```
Ext.define('CRUDManantiales.view.grid.AbmUsuarios', {
    // [..........]
    initComponent: function () {

        this.store = 'grid.AbmUsuarios';
        this.dockedItems = [{
            xtype: 'pagingtoolbar',
            store: this.store,
            beforePageText: 'Página',
            afterPageText: 'de {0}',
            displayMsg: 'Mostrando {0} - {1} de {2} registros',
            emptyMsg: 'No hay datos que mostrar',
            dock: 'bottom',
            displayInfo: true,
            pageSize: 21
        }];
        this.callParent(arguments);
    }
}); 
```

我在这段代码中浪费了四天，感谢您的帮助。谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:43:29.823

谢谢大家。问题已经解决了。失败是我在我的 PHP 脚本中使用 POST 数组并且需要使用 GET 方法。:)

# c# - 从 C# API 将 Excel 图表中轴的下限和上限设置为数据集的最小/最大值

> ID：13338708
> 
> 赞同：4
> 
> 时间：2012-11-12T05:14:55.143
> 
> 标签：c#, excel

我正在使用 C# Excel API 生成一些报告。但是，Excel 在数据集中的第一个轴点和最小值之间以及最后一个轴点和数据集中的最大值之间会留下间隙。我的数据集按日期时间排序。如何强制 excel 将轴的下限和上限精确设置为数据集中的最小值和最大值，以便我看不到任何间隙？我可以通过在 excel 图表中手动设置最小/最大轴点来在 excel 中做到这一点。

但是有没有办法让 excel 自动执行此操作，或者使用数据集从我的 C# 应用程序中设置最小/最大点？

示例（标记的间隙） ![在此处输入图像描述](../Images/be7b6cc701f7acf858bd50db16726bce.png)

希望这是有道理的。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T08:09:05.677

[Edited] OK, I did some playing, and I've figured out how to set the vertical and horizontal axis range. This is working with Excel 2010.

Here, I clear all charts on the page and create a new one (_resultsSheet is an Excel.Worksheet):

```
var resultCharts = (ChartObjects)_resultsSheet.ChartObjects();
foreach (ChartObject ch in resultCharts)
{
    ch.Delete();
}
ChartObject resultChart = resultCharts.Add(150, 40, 300, 200);
_resultChartPage = resultChart.Chart; 
```

Now set up the source - I've just used a predefined range of fixed values. You could scan your source to find the actual min and max values:

```
_resultChartRange = _resultsSheet.get_Range("J5", "K15");
_resultChartPage.SetSourceData(_resultChartRange);
_resultChartPage.ChartType = Excel.XlChartType.xlXYScatterLines;
_resultChartPage.HasLegend = false; 
```

Now for the vertical axis setup:

```
Axis vertAxis = (Axis)resultChart.Chart.Axes(XlAxisType.xlValue, XlAxisGroup.xlPrimary);
vertAxis.HasMajorGridlines = true; // change this to whatever you wish
vertAxis.HasTitle = true;
vertAxis.AxisTitle.Text = "up the side";
vertAxis.MaximumScaleIsAuto = false;
vertAxis.MaximumScale = 500; // you can pick this based on your input
vertAxis.MinimumScaleIsAuto = false;
vertAxis.MinimumScale = 5; 
```

now for the other axis. Note here I've used fixed times. To convert a time to an axis scale, just use the 24 hour time in decimal, divided by 24\. Eg. 9:30pm is 21:30 which is 21.5 hours. Don't forget the (double) cast just in case you use to ints.

```
Axis horizAxis = resultChart.Chart.Axes(XlAxisType.xlCategory, XlAxisGroup.xlPrimary);
horizAxis.MaximumScaleIsAuto = false;
horizAxis.MaximumScale = (double)21.5 / 24; // 9:30 pm
horizAxis.MinimumScaleIsAuto = false;
horizAxis.MinimumScale = (double)13 / 24; // 1:00 pm
horizAxis.HasTitle = true;
horizAxis.AxisTitle.Text = "across the bottom"; 
```

and for those who "like to watch":

```
_resultsSheet.Activate();
_workBook.Application.Visible = true; 
```

# javascript - 过滤 json 数据并在网格中显示数据

> ID：13338711
> 
> 赞同：5
> 
> 时间：2012-11-12T05:15:46.310
> 
> 标签：javascript, jquery, html

这是json。我在选择框中显示年份并制作。当我选择一年并使其相关数据应过滤并显示在网格中时。例如，当我选择 2010 年并定义相关数据时，即 2010 年。def, 300 & 5000 应该显示在网格中。任何人都可以在不使用任何 jquery 插件的情况下帮助我做到这一点。

```
var data = [
    { Year: "2011", Make: "abc", Model: "100", SubModel: "5000", },
    { Year: "2011", Make: "abc", Model: "200", SubModel: "6000",  },
    { Year: "2010", Make: "def", Model: "300", SubModel: "5000",  },
    { Year: "2011", Make: "def", Model: "100", SubModel: "1000",  }
]; 
```

这是我的代码：http: [//jsfiddle.net/qK2A3/2/](http://jsfiddle.net/qK2A3/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:26:10.103

回答我的问题

```
function getRelated() {
        $.each(g_Vehicle, function (index) {
            var sMake = g_Vehicle[index].Make;
            if (g_Vehicle[index].Make == $('#DropDown_Make').val() && g_Vehicle[index].Year == $('#DropDown_Year').val()) {
                $(".ModelClass").html(g_Vehicle[index].Model);
                $(".SubModelClass").html(g_Vehicle[index].SubModel);
            }
        });
    }; 
```

演示： http: [//jsfiddle.net/ybT7a/](http://jsfiddle.net/ybT7a/) 它正在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:28:14.833

你可以试试这种方式。

HTML 代码：

```
<select class="target">
  <option value="2010" >2010</option>
  <option value="2011">2011</option>
</select> 
```

JAVASCRIPT代码：

```
$('.target').change(function() {
  var selected_value = $(this).val();
  jQuery.each(data[0] ,function(key,val){
     if(val.Year == selected_value){
         //code to add to grid go here
     }
  })
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T05:48:35.987

您需要遍历对象数组，找到匹配年份的对象并使用该对象解析一些 html。可以通过不同的方式做到这一点，我正在使用数组实用程序方法`$.grep`来执行数组的循环。请注意，演示必须从发布的数据数组中的对象中删除尾随逗号。IE 讨厌尾随逗号并且会中断。

```
var year = /*your code to retrieve year*/  2010;/* test value*/
var make= /*your code to retrieve year*/ 'def';/* test value*/

var obj=$.grep( data, function(item, idx){
    return item.Year == year && item.Make == make;
})[0];

/* create some html from the object that matches year and make*/

$('body').append('<p>Model: '+ obj.Model +', SubModel: '+obj.SubModel+'</p>'); 
```

演示：http: [//jsfiddle.net/uPEQ7/](http://jsfiddle.net/uPEQ7/)

[http://api.jquery.com/jQuery.grep/](http://api.jquery.com/jQuery.grep/)的 API 参考`$.grep`

# jquery-ui - mouseleave 在 jquery 中不起作用

> ID：13338718
> 
> 赞同：2
> 
> 时间：2012-11-12T05:17:08.803
> 
> 标签：jquery-ui, jquery, jquery-plugins, jquery-selectors

我的 mouseleave 在我的 jquery 代码中不起作用

[http://jsfiddle.net/alano/9Dr7T/29/](http://jsfiddle.net/alano/9Dr7T/29/)

在下面提供我的 js 代码

```
mouseleave: function () {
    $(this).find("div:last").remove();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T07:04:15.033

问题不在于`mouseleave`侦听器，问题在于您*如何*绑定这些事件处理程序并为此*解除绑定*。div 已被删除，但每个`mouseenter`事件都会读取它。**由于某种原因，当使用选择器**过滤器时 mouseenter 事件没有被解除绑定`.on()`。这可能与使用[**选择器**](http://api.jquery.com/on/)[过滤器](http://api.jquery.com/on/)[时冒泡](http://api.jquery.com/on/)**的方式有关。**

 **> 当提供选择器时，事件处理程序被称为委托。当事件直接发生在绑定元素上时，不会调用处理程序，而只会调用与选择器匹配的后代（内部元素）。jQuery 将事件从事件目标冒泡到附加处理程序的元素（即，从最里面到最外面的元素），并为沿着该路径匹配选择器的任何元素运行处理程序。

现在，我还不是 100% 确定为什么，但无论哪种方式，如果您使用像这样的直接绑定处理程序，它都会起作用：

```
$('.specialHover').on({
    mouseenter: function() {
        $("<div class='cta'>add image</div>").click(function() {
            var $me = $(this);
            $me.parent().unbind('mouseenter').children('img').attr(
                'src', 
                'http://www.onlinegrocerystore.co.uk/images/goodfood.jpg'
            );
            $me.remove();
        }).appendTo(this);
    },
    mouseleave: function() {
        $(this).find('div:last').remove();
    }
}); 
```

见：http: [//jsfiddle.net/9Dr7T/35/](http://jsfiddle.net/9Dr7T/35/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:56:57.327

您是否尝试过这种方式：

```
mouseleave: function () {
   $("div:last",this).remove();
} 
```**

# struts2 - 带有 Struts 的 Java 对象 Drop down

> ID：13338719
> 
> 赞同：1
> 
> 时间：2012-11-12T05:17:12.517
> 
> 标签：struts2

我将 Strust2 用于表示层。我有带有下拉列表的 struts 表单，它与 java 对象（应用程序）列表绑定。下拉显示应用程序对象列表，用户可以选择一个应用程序并提交。当在Action类中检索用户输入值时，接收值类型为“String”，我们不能直接从struts下拉中检索对象吗，以我为例“应用程序”对象

```
 private List<Application> applicaionList = new ArrayList<Application>();
   @Autowired
   private ApplicationService applicationService;
   private Application application;

   public void loadTheForm(){
       applicationList = applicationService.findAll();
   }

   public void submitForm(){
       Document doc = new Document();
       doc.setApplication(application);

   }
   //Getter Setters... 
```

}

应用程序.jsp

```
<s:form action ="submitForm">
    <s:select list ="applicationList" headerValue="---Select---" headerKey="-1" name="application"/>
</s:form> 
```

struts.xml

```
 <action name="submitForm" class="com.ActionSupport" method="submitForm">
            <result name="success" type="tiles">/newAdminDocumentRequired.tiles</result>
   </action> 
```

当用户从下拉列表中选择值并提交时，提交的值是字符串，我们不能直接在Struts中取对象吗，如果我们不能获取选择值的对象，我们怎么能得到呢？

谢谢你，乌德西卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:08:16.200

我从你的问题中得到的是

```
 1\. You have to show list of applications as drop-down.
 2\. User selects one application and submit the form.
 3\. You have to retrieve the selected application and perform some action with it. 
```

我假设您的 Application 类具有所有应用程序独有的属性“id”。还有一个应用程序名称，您必须向用户显示它。所以现在，我会按如下方式解决这个问题

```
 <s:form action ="submitForm">
        <s:select list ="applicationList" headerValue="---Select---" headerKey="-1" key="application" listKey="id" listValue="applicationName"/>
    </s:form> 
```

现在，这个标签将创建一个下拉菜单，如下所示

```
<select name="application">
    <option value="-1" selected="selected">---Select---</option>
    <option value="1">Demo 1 App</option>
    <option value="2">Demo 2 App</option>
    <option value="3">Demo 3 App</option>
    <option value="4">Demo 4 App</option> 
   </select> 
```

请注意，OPTION 元素中的值 (1,2,3,4) 是 application.id，titles(Demo 1 App, Demo 2 App,etc) 是 application.applicationName。

现在，用户将选择并提交。所选应用程序的 id 将发送到参数“application”中的 struts 操作。在行动中，您可以这样做

```
public MyClass extends ActionSupport{

   private List<Application> applicaionList = new ArrayList<Application>();
   @Autowired
   private ApplicationService applicationService;
   private **String** application;

   public void loadTheForm(){
       applicationList = applicationService.findAll();
   }

   public void submitForm(){
       Application varApp = applicationService.findApplicationById(getApplication());
       Document doc = new Document();
       doc.setApplication(varApp);

   }
   //Getter Setters...

} 
```

请注意，我已将应用程序类型更改为字符串。是的，我认为您不能直接从下拉列表中传递对象。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-16T06:06:36.057

```
Dropdown with object attributes 
Here Example is shown for store object 
```

//存储Bean类

```
calss Store{
private int storeId;
private String storeName;

//getter setter

} 
```

//动作类 //设置struts2动作类中的列表（模型驱动）

```
List<Store> storeList=new ArrayList<>(); 
```

//JSP页面

```
<s:select id="store" name="store" headerKey="-1"
                                headerValue="Select Store " list="storeList"
                                listKey="storeId" listValue="storeId"
                                value="%{IteratorList[#status.index].itemBase.{storeId}}"
                            /></td> 
```

# c - * C 中的 Vs ++ 优先级

> ID：13338730
> 
> 赞同：1
> 
> 时间：2012-11-12T05:18:11.907
> 
> 标签：c, pointers

我无法理解以下 C 代码的输出：

```
#include<stdio.h>
main()
{
   char * something = "something";
   printf("%c", *something++);  // s
   printf("%c", *something);    // o
   printf("%c", *++something);  // m
   printf("%c", *something++);  // m
} 
```

请帮忙 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T05:24:36.757

有关详细信息，请参阅[http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence)

```
printf("%c", *something++); 
```

在 *something 处获取字符，然后将其递增（'s'）

```
printf("%c", *something); 
```

只需获取 char （现在是第二个，由于最后一个语句（'o'）中的增量

```
printf("%c", *++something); 
```

递增然后获取新位置的字符（'m'）

```
printf("%c", *something++); 
```

在 *something 处获取字符，然后将其递增（'m'）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T05:24:38.943

这很简单。

```
char * something = "something"; 
```

指针赋值。

```
printf("%c\n", *something++);//equivalent to *(something++) 
```

指针递增，但递增前的值被取消引用，因为它是后递增的。

```
printf("%c\n", *something);//equivalent to *(something) 
```

在前一个语句中的增量之后，指针现在指向“o”。

```
printf("%c\n", *++something);//equivalent to *(++something) 
```

指针递增指向“m”并在递增指针后取消引用，因为这是预递增的。

```
printf("%c\n", *something++);//equivalent to *(something++) 
```

和第一个答案一样。还要注意`'\n'`printf 中每个字符串的末尾。它使输出缓冲区刷新并打印行。始终`\n`在 printf 的末尾使用 a。

你可能也想看看**[这个问题](https://stackoverflow.com/questions/9255147/does-p-increment-after-dereferencing)**。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-12T05:28:45.720

```
// main entrypoint
int main(int argc, char *argv[])
{
    char * something = "something";

    // increment the value of something one type-width (char), then
    //  return the previous value it pointed to, to be used as the 
    //  input for printf.
    // result: print 's', something now points to 'o'.
    printf("%c", *something++);

    // print the characer at the address contained in pointer something
    // result: print 'o'
    printf("%c", *something);

    // increment the address value in pointer something by one type-width
    //  the type is char, so increase the address value by one byte. then
    //  print the character at the resulting address in pointer something.
    // result: something now points at 'm', print 'm'
    printf("%c", *++something);

    // increment the value of something one type-width (char), then
    //  return the previous value it pointed to, to be used as the 
    //  input for printf.
    // result: print 's', something now points to 'o'.
    printf("%c", *something++);
} 
```

结果：

```
somm 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T05:33:07.693

始终使用顺时针规则[顺时针规则](http://c-faq.com/decl/spiral.anderson.html)

```
printf("%c\n", *something++); 
```

根据您将首先遇到的规则 * 所以获取值然后 ++ 表示递增

![在此处输入图像描述](../Images/fb6eca6d6138ceff0d93eac30de44eec.png)

第三种情况 `printf("%c\n", *something++);`

![在此处输入图像描述](../Images/d2189a3430efec8c3128b73ddf0bc537.png)

所以根据图像递增值++，然后得到值*

# algorithm - matlab：线性拟合的最佳点数

> ID：13338732
> 
> 赞同：5
> 
> 时间：2012-11-12T05:18:26.487
> 
> 标签：algorithm, matlab, linear-regression

我想对几个数据点进行线性拟合，如图所示。由于我知道截距（在本例中为 0.05），因此我只想使用此特定截距拟合线性区域中的点。在这种情况下，可以说点 5:22（但不是 22:30）。我正在寻找一种简单的算法来确定这个最佳点数，基于......嗯，这就是问题...... R^2？任何想法如何做到这一点？我正在考虑使用点 1 到 2:30、2 到 3:30 等来探测 R^2 是否适合，但我真的不知道如何将它包含在清晰简单的函数中。对于固定截距适合我正在使用`polyfit0`（[http://www.mathworks.com/matlabcentral/fileexchange/272-polyfit0-m](http://www.mathworks.com/matlabcentral/fileexchange/272-polyfit0-m)）。感谢您的任何建议！

编辑：样本数据：

```
intercept = 0.043;
x = 0.01:0.01:0.3;
y = [0.0530642513911393,0.0600786706929529,0.0673485248329648,0.0794662409166333,0.0895915873196170,0.103837395346484,0.107224784565365,0.120300492775786,0.126318699218730,0.141508831492330,0.147135757370947,0.161734674733680,0.170982455701681,0.191799936622712,0.192312642057298,0.204771365716483,0.222689541632988,0.242582251060963,0.252582727297656,0.267390860166283,0.282890010610515,0.292381165948577,0.307990544720676,0.314264952297699,0.332344368808024,0.355781519885611,0.373277721489254,0.387722683944356,0.413648156978284,0.446500064130389;]; 
```

![线性拟合](../Images/7a4951aa31d7217d518e9fd267bb327d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T05:23:40.157

你在这里遇到的是一个相当困难的问题，很难找到一个*通用*的解决方案。

一种方法是计算所有连续点对之间的所有斜率/相交，然后对相交进行聚类分析：

```
slopes = diff(y)./diff(x);  
intersepts = y(1:end-1) - slopes.*x(1:end-1);

idx = kmeans(intersepts, 3);

x([idx; 3] == 2)  % the points with the intersepts closest to the linear one. 
```

这需要统计工具箱（用于`kmeans`）。这是我尝试过的所有方法中最好的，尽管以这种方式找到的点范围*可能*有一些小洞；例如，当开始和结束范围内的两点的斜率接近线的斜率时，这些点将被检测为属于线。这个（和其他因素）将需要对以这种方式找到的解决方案进行更多的后处理。

另一种方法（我未能成功构建）是在循环中进行线性拟合，每次从中间的某个点向两个端点增加点的范围，看看平方误差的总和是否仍然很小. 我很快就放弃了，因为定义什么是“小”是非常主观的，必须以某种启发式的方式完成。

我尝试了上述更系统和更强大的方法：

```
function test

    %% example data
    slope = 2;
    intercept = 1.5;

    x = linspace(0.1, 5, 100).';

    y         = slope*x + intercept;
    y(1:12)   = log(x(1:12)) + y(12)-log(x(12));
    y(74:100) = y(74:100) + (x(74:100)-x(74)).^8;

    y = y + 0.2*randn(size(y));

    %% simple algorithm

    [X,fn] = fminsearch(@(ii)P(ii, x,y,intercept), [0.5 0.5])

    [~,inds] = P(X, y,x,intercept)

end

function [C, inds] = P(ii, x,y,intercept)
% ii represents fraction of range from center to end,
% So ii lies between 0 and 1\. 

    N = numel(x);
    n = round(N/2);  

    ii = round(ii*n);

    inds = min(max(1, n+(-ii(1):ii(2))), N);

    % Solve linear system with fixed intercept
    A = x(inds);
    b = y(inds) - intercept;

    % and return the sum of squared errors, divided by 
    % the number of points included in the set. This 
    % last step is required to prevent fminsearch from
    % reducing the set to 1 point (= minimum possible 
    % squared error). 
    C = sum(((A\b)*A - b).^2)/numel(inds);    

end 
```

它只能找到所需索引的粗略近似值（本例中为 12 和 74）。

当`fminsearch`使用随机起始值（实际上只是`rand(1,2)`）运行几十次时，它会变得更加可靠，但我仍然不会赌上我的生命。

如果您有统计工具箱，请使用该`kmeans`选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:05:01.897

根据数据值的数量，我会将数据分成相对较少的重叠段，并为每个段计算线性拟合，或者更确切地说是一阶系数，（记住你知道截距，这将是所有细分市场都相同）。

然后，对于每个系数，计算这条假设线和整个数据集之间的 MSE，选择产生最小 MSE 的系数。

# mysql - 如何根据每个子渠道的买家数量获取每个主渠道的买家数量

> ID：13338735
> 
> 赞同：1
> 
> 时间：2012-11-12T05:18:51.160
> 
> 标签：mysql, sql

我需要帮助进行 mysql 查询以根据每个**子渠道上的买家数量获取每个****主渠道上的买家数量**

 **基本上我有两个表，即**tbl_channel**和**tbl_buyer**如下：

![在此处输入图像描述](../Images/3e467be1b64575ff149e0943a03ee20d.png)

**条件：**

1.  我只是根据每个**子渠道上的买家数量显示每个****主渠道的买家数量（parentid = 0）**
***   channel_id (TBL_BUYER) 中具有相同**buyer_id**的每个**买家**都将计为一个买家**

 ******我想要的结果：**

![在此处输入图像描述](../Images/7a8c539df33a49fb39780e91ee324b4c.png)

到目前为止，我只能查询显示子渠道的买家数量，如下所示：

```
SELECT count(aa.buyer_id) as Number_of_buyers FROM (SELECT b.buyer_id
FROM tbl_channel a 
RIGHT JOIN tbl_buyer b on (a.id=b.channel_id)
WHERE a.parentid_channel_id = 2 /* PARENT ID */
GROUP by b.buyer_id ORDER BY b.channel_id) aa 
```

你能帮我做一个完整的查询以产生如上所示的结果吗？之前谢谢你:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T05:48:25.790

```
SELECT  a.channel_id `Channel ID`,
        a.channel_title `Channel Title`,
        COUNT(DISTINCT c.buyer_id) `Number of Buyers`
FROM    tbl_Channel a
        INNER JOIN tbl_Channel b
            ON a.channel_ID = b.parent_channel_id
        INNER JOIN tbl_buyer c
            ON  b.channel_ID =  c.channel_ID
WHERE   a.parent_channel_id = 0
GROUP BY a.channel_id,
         a.channel_title 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/efd00/1)******

# blackberry - convertWorldToField 方法在哪里？

> ID：13338736
> 
> 赞同：2
> 
> 时间：2012-11-12T05:19:11.983
> 
> 标签：blackberry, java-me, map

在 Class`net.rim.device.api.lbs.MapField` 中有一个方法`convertWorldToField`，非常有用。

API 升级后，新的地图类已移至：

`net.rim.device.api.lbs.maps.ui.MapField`

但是方法`convertWorldToField`消失了，新API中的方法在哪里？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:16:37.833

在新的一组类中，您无需从世界转换为字段即可向地图添加内容。相反，您添加的每个项目（扩展 Mappable）都知道在哪里绘制自己。这是您创建位置的方式：

```
 MapLocation ml = new MapLocation( 43.47751, -80.54817, "label", null );
    MapDataModel model = map.getModel();
    model.add(ml, "tag"); 
```

要检查某些东西是否可见，您可以使用`MapDataModel`类中的方法。

# android - 如何仅在首次创建应用小部件时显示活动？

> ID：13338738
> 
> 赞同：1
> 
> 时间：2012-11-12T05:19:25.583
> 
> 标签：android, android-activity, android-service, android-appwidget

我的应用小部件首次添加到主屏幕时需要进行配置。我想在用户添加小部件后立即打开配置视图。

`AppWidgetProvider`没有`onCreated`事件，所以我在事件中显示配置活动`onUpdate`，并在其中存储一个布尔值`SharedConfiguration`，标记配置已经显示。有没有更简单的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T21:38:37.467

在 AppWidgetProvider XML 文件中有一个名为`android:configure`

您可以使用它来指向要在应用程序拖放到主屏幕时启动的 Activity。前任：

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:configure="com.bandsintown.WidgetSettingsActivity"
    android:minWidth="250dp"
    android:minHeight="110dp"
    android:minResizeWidth="180dp"
    android:minResizeHeight="110dp"
    android:resizeMode="vertical|horizontal"
    android:initialLayout="@layout/widget_layout"
    android:updatePeriodMillis="10000" /> 
```

在您选择的配置活动中，用户可以做出他们想要的任何选择。您需要获取并存储小部件的 ID。在`onCreate`方法中，像这样获取 id：

```
Intent intent = getIntent();
Bundle extras = intent.getExtras();
if (extras != null)
    mAppWidgetId = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID); 
```

当他们做出选择后，使用它向您的主屏幕小部件发送一条消息，表明它已准备好显示：

```
Intent intent = new Intent();
intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, mAppWidgetId);
setResult(RESULT_OK, intent);

finish(); 
```

那会得到你所追求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:44:10.553

尝试将其添加到 onEnabled 函数中。当应用小部件添加到屏幕时将调用 onEnabled

> onEnabled(Context) 首次创建 App Widget 实例时调用。例如，如果用户添加了您的 App Widget 的两个实例，这只会在第一次调用。如果您需要为所有 App Widget 实例打开一个新数据库或执行只需要发生一次的其他设置，那么这是一个很好的地方。

举个例子

```
 @Override
    public void onEnabled(Context context) {

    Log.i("INDEX", "WIDGET Enabled");

    AppWidgetManager mgr = AppWidgetManager.getInstance(context); 
    RemoteViews defaultViews = new RemoteViews(context.getPackageName(), R.layout.widget_restart); 
    Intent idefault = new Intent(context, MainActivity.class);
    idefault.putExtra("widget", "1");
    PendingIntent defaultpendingIntent = PendingIntent.getActivity(context, 0, idefault, 0);
    defaultViews.setOnClickPendingIntent(R.id.headWidget, defaultpendingIntent);
    ComponentName comp = new ComponentName(context.getPackageName(), Widget.class.getName()); 
    mgr.updateAppWidget(comp, defaultViews); 
    } 
```

这将在第一次创建小部件时被调用以设置小部件的外观

如果您有任何问题，请随时在评论中问我:)

# android - 如何在运行时从 SD 卡加载 ImageButton 图像？

> ID：13338759
> 
> 赞同：2
> 
> 时间：2012-11-12T05:23:31.913
> 
> 标签：android, runtime, sd-card, imagebutton

我想让用户从 SD 卡加载自己的图像以用作 ImageButton。这是我的 main.xml 代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/heart"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <ImageButton
        android:id="@+id/imageButton2"
        android:layout_width="150dp"
        android:layout_height="200dp"
        android:src="@drawable/me" />

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="150dp"
        android:layout_height="200dp"
        android:layout_marginLeft="50dp"
        android:layout_marginTop="50dp"
        android:cropToPadding="true"
        android:scaleType="fitCenter"
        android:src="@drawable/mylove" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:33:30.023

在您的 java 代码的 onCreate 方法中，将按钮分配给一个变量，然后设置一个资源或 Bitmap，该资源或 Bitmap 将使用 BitmapFactory 类从文件中解码。

```
Bitmap bmp = BitmapFactory.decodeFile("path/to/file");
ImageButton button1 = (ImageButton)findViewById(R.id.imageButton1);
button1.setImageBitmap(bmp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:29:16.127

像这样试试

```
 ImageButton img = (ImageButton)findViewById(R.id.imageButton2);
  Bitmap bmp = BitmapFactory.decodeFile(path);
  img.setImageBitmap(bmp); 
```

# node.js - 检查中同步检查和异步检查有什么区别？

> ID：13338760
> 
> 赞同：1
> 
> 时间：2012-11-12T05:23:36.163
> 
> 标签：node.js

在 node.js 中同步和异步检查现有文件有什么区别？

例如：

```
var path = require('path');
if (path.existsSync("/the/path")) { // or fs.existsSync
    // ...
} 
```

和

```
// Is it a directory?
lstat('/the/path', function(err, stats) {
    if (!err && stats.isDirectory()) {
        // Yes it is
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:44:40.313

方法的同步版本`fs`通过方法的返回值提供它们的结果；因此，这些方法必须在执行 I/O 以确定结果时阻塞。

异步版本通过调用者作为参数提供给方法的方法的回调函数提供它们的结果。这些方法只是启动所需的 I/O，然后立即返回，因此这些方法的返回值没有用处。当 I/O 稍后完成时，将调用回调以将结果返回给调用者。

# android - 如何在没有附加信息的情况下通过 http post 方法发送文件？

> ID：13338767
> 
> 赞同：0
> 
> 时间：2012-11-12T05:24:01.643
> 
> 标签：android, http, android-file

我正在使用以下代码从 sd 卡发送文件。

```
 HttpURLConnection conn = null;
         DataOutputStream dos = null;
         DataInputStream inStream = null;
         String existingFileName = Environment.getExternalStorageDirectory().getAbsolutePath() 
                 + "/111";

     File f = new File(existingFileName);
     String lineEnd = "\r\n";
     String twoHyphens = "--";
     String boundary =  "*****";
     int bytesRead, bytesAvailable, bufferSize;
     byte[] buffer;
     int maxBufferSize = 1*1024*1024;
     String responseFromServer = "";
     String urlString = "http://192.178.1.7/Geo/Prodect(filename)";
     try
     {
      //------------------ CLIENT REQUEST
     FileInputStream fileInputStream = new FileInputStream(f);
      // open a URL connection to the Servlet
      URL url = new URL(urlString);
      // Open a HTTP connection to the URL
      conn = (HttpURLConnection) url.openConnection();
      // Allow Inputs
      conn.setDoInput(true);
      // Allow Outputs
      conn.setDoOutput(true);
      // Don't use a cached copy.
      conn.setUseCaches(false);
      // Use a post method.
      conn.setRequestMethod("POST");
      conn.setRequestProperty("Connection", "Keep-Alive");
      conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);
      dos = new DataOutputStream( conn.getOutputStream() );
      dos.writeBytes(twoHyphens + boundary + lineEnd);
      dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + existingFileName + "\"" + lineEnd);
      dos.writeBytes(lineEnd);
      // create a buffer of maximum size
      bytesAvailable = fileInputStream.available();
      bufferSize = Math.min(bytesAvailable, maxBufferSize);
      buffer = new byte[bufferSize];
      // read file and write it into form...
      bytesRead = fileInputStream.read(buffer, 0, bufferSize);
      //while (bytesRead > 0)
      Log.v("info",".size."+bytesRead);
      for(int n1=0;n1<bytesRead;n1++)
      {

       dos.write(buffer, 0, bufferSize);
       bytesAvailable = fileInputStream.available();
       bufferSize = Math.min(bytesAvailable, maxBufferSize);
       bytesRead = fileInputStream.read(buffer, 0, bufferSize);

      }

      dos.writeBytes(lineEnd);
      dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
      // close streams
      Log.v("info","File is written");
      fileInputStream.close();
      dos.flush();
      dos.close();
     }
     catch (MalformedURLException ex)
     {
          Log.v("info", "error: " + ex.getMessage(), ex);
     }
     catch (IOException ioe)
     {
          Log.v("info", "error: " + ioe.getMessage(), ioe);
     }
     //------------------ read the SERVER RESPONSE
     try {
           inStream = new DataInputStream ( conn.getInputStream() );
           String str;

           while (( str = inStream.readLine()) != null)
           {
                Log.v("info","Server Response "+str);
           }
           inStream.close();

     }
     catch (IOException ioex)
     {
          Log.v("info", "error: " + ioex.getMessage(), ioex);
     } 
```

它工作正常，但该文件包含 20 行，它保存在服务器中，共 22 行。

我的实际文件如下所示。

android 应用信息 应用名称 应用时间

当我将文件从 sd 卡发送到服务器时，文件如下所示

1) **** *mnt/sdcard/111* ****

android 应用信息 应用名称 应用时间

2) ******

添加了 1 和 2 行。

我如何在没有这两行的情况下发送文件。

如果有人知道解决方案，请帮助我。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:39:12.247

尝试评论以下内容

```
 dos.writeBytes(twoHyphens + boundary + lineEnd);
      dos.writeBytes(lineEnd); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:09:04.313

```
public static StringBuffer post(String url,InputStream in) throws IOException {
        InputStream bufferInputStream = null;
        InputStreamReader responseInputStream = null;
        HttpURLConnection conn = null;
        OutputStream requestOutputStream = null;
        StringBuffer responseString = new StringBuffer();
        int bufferSize = 8192;
        byte[] byteBuffer  = new byte[bufferSize];
        int postDataSize = 0;
        try {
            if (in != null) {
                bufferInputStream = new BufferedInputStream(in);
            }
            if (bufferInputStream != null) {
                postDataSize = bufferInputStream.available();
            }
            //send request
            conn = getConnecttion(url);
            if (postDataSize > 0) {
                requestOutputStream = conn.getOutputStream();
                int position = 0;

                while ((position = bufferInputStream.read(byteBuffer)) > -1) {
                    requestOutputStream.write(byteBuffer, 0, position);
                }
                requestOutputStream.flush();
                requestOutputStream.close();
                requestOutputStream = null;
                byteBuffer = null;
            }
            // get response
            int responseCode = conn.getResponseCode();
            if (responseCode == HttpURLConnection.HTTP_OK) {
                responseInputStream = new InputStreamReader(conn.getInputStream(),"UTF-8");

                char[] charBuffer = new char[bufferSize];
                int _postion = 0;
                while ((_postion=responseInputStream.read(charBuffer)) > -1) {
                    responseString.append(charBuffer,0,_postion);
                }
                responseInputStream.close();
                responseInputStream = null;
                charBuffer = null;
            }else{
                throw new IOException("Respsone code:"+responseCode);
            }
        } catch (Exception e) {
            e.printStackTrace();
            throw new IOException(e.getMessage());
        } finally {
            byteBuffer = null;

            if (responseInputStream != null) {
                responseInputStream.close();
                responseInputStream = null;
            }
            if (conn != null) {
                conn.disconnect();
                conn = null;
            }
            if (requestOutputStream != null) {
                requestOutputStream.close();
                requestOutputStream = null;
            }
            if (bufferInputStream != null) {
                bufferInputStream.close();
                bufferInputStream = null;
            }
        }
        return responseString;
    } 
```

请参考上面的简单代码，

像这样发送文件：post("http://youurl.com",new FileInputStream("you file path"))

# python - 使用 App Engine 服务帐户时出现链接断开错误

> ID：13338773
> 
> 赞同：1
> 
> 时间：2012-11-12T05:25:06.597
> 
> 标签：python, google-app-engine, oauth-2.0, google-bigquery, google-api-python-client

我正在关注本教程

```
https://developers.google.com/bigquery/docs/authorization#service-accounts-appengine 
```

这是我的 main.py 代码

```
import httplib2

from apiclient.discovery import build
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app
from oauth2client.appengine import AppAssertionCredentials

# BigQuery API Settings
SCOPE = 'https://www.googleapis.com/auth/bigquery'
PROJECT_NUMBER = 'XXXXXXXXXX' # REPLACE WITH YOUR Project ID

# Create a new API service for interacting with BigQuery
credentials = AppAssertionCredentials(scope=SCOPE)
http = credentials.authorize(httplib2.Http())
bigquery_service = build('bigquery', 'v2', http=http)

class ListDatasets(webapp.RequestHandler):
  def get(self):
    datasets = bigquery_service.datasets()
    listReply = datasets.list(projectId=PROJECT_NUMBER).execute()
    self.response.out.write('Dataset list:')
    self.response.out.write(listReply)

application = webapp.WSGIApplication(
                                     [('/listdatasets(.*)', ListDatasets)],
                                     debug=True)

def main():
  run_wsgi_app(application)

if __name__ == "__main__":
  main() 
```

这是我的 app.yaml 文件代码

```
application: bigquerymashup
version: 1
runtime: python
api_version: 1

handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: .*
  script: main.py 
```

是的，我已经在 google api 控制台 Team 选项卡中添加了应用引擎服务帐户名称，并且可以编辑权限。当上传应用程序并尝试访问它说的链接

```
Oops! This link appears to be broken. 
```

之前我在本地运行它并尝试使用链接访问它`localhost:8080`。然后我认为可能在本地运行可能会给出错误，所以我将我的代码上传到

```
http://bigquerymashup.appspot.com/ 
```

但它仍然是错误的。

**编辑：** 更新 App.yaml

```
application: bigquerymashup
version: 1
runtime: python
api_version: 1

handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: .*
  script: main.py

- url: /listdatasets
  script: main.py 
```

但得到另一个错误

```
Traceback (most recent call last): File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/webapp/_webapp2‌​5.py", line 710, in call handler.get(*groups) TypeError: get() takes exactly 1 argument (2 given) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:58:38.470

您需要定义一个与您要查找的 URL 匹配的脚本处理程序。

尝试：`http://[your_app_id_here].appspot.com/listdatasets`

[在此处](https://developers.google.com/appengine/docs/python/config/appconfig#Script_Handlers)阅读有关处理程序的更多信息。

# javascript - 正确的行没有上色

> ID：13338778
> 
> 赞同：1
> 
> 时间：2012-11-12T05:25:25.947
> 
> 标签：javascript, css

我的行没有正确着色”

请看一下我的 HTML 输出：

```
<table id="mytable" cellspacing="0" cellpadding="5">
<tbody>
<tr class="tableheader">
<th>Name</th>
<th>Code</th>
<th>Value</th>
<th>Bid</th>
<th>Offer</th>
</tr>
<tr class="rowoddcolor">
<td>Apple</td>
<td>APPL</td>
<td>111</td>
<td>112</td>
<td>110</td>
</tr>
<tr class="tablecontent">
<td>Microsoft</td>
<td>MSFT</td>
<td>78</td>
<td>70</td>
<td>75</td>
</tr>
<tr class="rowevencolor">
<td>Google</td>
<td>GOGL</td>
<td>101</td>
<td>98</td>
<td>102</td>
</tr>
<tr class="tablecontent">
<td>Nokia</td>
<td>NOK</td>
<td>10</td>
<td>8</td>
<td>9</td>
</tr>
<tr class="rowoddcolor">
<td>Samsung</td>
<td>SAMS</td>
<td>89</td>
<td>86</td>
<td>90</td>
</tr>
<tr class="tablecontent">
<td>IntelCorporation</td>
<td>INTC</td>
<td>111</td>
<td>112</td>
<td>110</td>
</tr>
</tbody>
</table> 
```

现在只有第 1 行和第 5 行上色了？为什么不是第三排？

更新代码：

```
function tablerows(id){
    if(document.getElementsByTagName){  
        var tableid = document.getElementById(id);  
        var rows = tableid.getElementsByClassName('tablecontent'); 
        for(i = 0; i < rows.length; i++){          
            if(i % 2 == 0){
                rows[i].className = "rowevencolor";
            }else{
                rows[i].className = "rowoddcolor";
            }      
        }
    }
}

$(document).ready(function() {
                 $.getJSON('table.json',function(data){

                    $('#mytable').empty(); 
                    var html = '';
                    html += '<tr class="tableheader"><th>Name</th><th>Code</th><th>Value</th><th>Bid</th><th>Offer</th></tr>';
                    for (var i=0, size=data.length; i<size;i++) {                           
                            html += '<tr class="tablecontent"><td class="name">'+ data[i].name+ '</td><td class="code">'+ data[i].code+ '</td><td class="value">'
                                         + data[i].value+ '</td><td class="bid">'
                                         +data[i].bid+'</td><td class="offer">'+data[i].offer+'</td></tr>';
                            }

            $('#mytable').append(html);
            tablerows('mytable');

        });
    }); 
```

我正在通过使用 json 的 jquery 创建 html。表正在正确创建。现在通过javascript，我将我的备用行设置为不同的颜色，并且标题应该是不同的颜色。这是我的第一个问题。请看下面我的脚本：

```
function tablerows(id){
    if(document.getElementsByTagName){  
        var tableid = document.getElementById(id);  
        var rows = tableid.getElementById("tablecontent"); 
        for(i = 0; i < rows.length; i++){          
            if(i % 2 == 0){
                rows[i].className = "rowevencolor";
            }else{
                rows[i].className = "rowoddcolor";
            }      
        }
    }
}

$(document).ready(function() {
                 $.getJSON('table.json',function(data){

                    $('#mytable').empty(); 
                    var html = '';
                    html += '<tr class="tableheader"><th>Name</th><th>Code</th><th>Value</th><th>Bid</th><th>Offer</th></tr>';
                    for (var i=0, size=data.length; i<size;i++) {                           
                            html += '<tr id="tablecontent"><td class="name">'+ data[i].name+ '</td><td class="code">'+ data[i].code+ '</td><td class="value">'
                                         + data[i].value+ '</td><td class="bid">'
                                         +data[i].bid+'</td><td class="offer">'+data[i].offer+'</td></tr>';
                            }

            $('#mytable').append(html);

        });

        $(function(){
            tablerows('mytable');
        });
    }); 
```

但我的行没有得到样式。请告诉我问题出在哪里。

下面也是css代码：

```
.rowoddcolor{
    background-color:#FFFFFF;
}
.rowevencolor{
    background-color:#D3D3D3;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:30:31.883

我相信函数“tablerows”是在构建表之前执行的。因此，将该代码放在 append 方法之后。

**例子 ：**

```
$(document).ready(function() {
    $.getJSON('table.json',function(data){
        // existing stuff
        $('#mytable').append(html);
        tablerows('mytable');
    });
}); 
```

另外，在交替时添加颜色类的最简单方法是：

```
$('#mytable tr:even').addClass("rowevencolor");
$('#mytable tr:odd').addClass("rowoddcolor"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T05:34:24.623

一些东西：

首先，元素 ID 应该是唯一的。不要给每个`tr`相同的 id `tablecontent`。

修复之后，您可以放弃整个辅助函数`tablerows()`，因为它是多余的，并且可以将逻辑移至您正在构建表的位置，即：

```
for (var i=0, size=data.length; i<size;i++) {                           
    html += '<tr class="tablecontent row' + (i % 2 ? 'even' : 'odd') + 'color"><td class="name">'+ data[i].name+ '</td><td class="code">'+ data[i].code+ '</td><td class="value">'
         + data[i].value+ '</td><td class="bid">'
         + data[i].bid+'</td><td class="offer">'+data[i].offer+'</td></tr>';
} 
```

或者按照 Kundan 的建议在 CSS 中使用伪选择器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T06:21:12.330

您的代码没有突出显示表第 3 行的原因是因为结果`getElementsByClassName`是[NodeList，而不是 Array](https://stackoverflow.com/questions/3871547/js-iterating-over-result-of-getelementsbyclassname-using-array-foreach)。

因此，在使用索引运算符进行随机访问之前，您需要[将](https://stackoverflow.com/questions/3199588/fastest-way-to-convert-javascript-nodelist-to-array)NodeList 转换为 Array。

例如

```
 var rowsList = tableid.getElementsByClassName('tablecontent');
    var rows = Array.prototype.slice.call(rowsList);
    for (i = 0; i < rows.length; i++) 
       // ... 
```

这是一个工作[小提琴](http://jsfiddle.net/fxNft/2/)

但是，根据 Kundan 的回答，您为什么不使用 jQuery 解决方案似乎很奇怪，因为它的工作量要少得多。jQuery小提琴[在这里](http://jsfiddle.net/fxNft/)

# php - 有人知道任何支持调试的好 USB PHP 服务器吗？

> ID：13338779
> 
> 赞同：0
> 
> 时间：2012-11-12T05:25:26.993
> 
> 标签：php, debugging

我正在通过[http://www.usbwebserver.net/en/](http://www.usbwebserver.net/en/)进行 php 工作，并将其与 phpstorm 一起使用。当我尝试调试时，我发现 Dll 无法加载 PHP_curl，因此我无法调试我的代码。

有人知道我们在 VWD 中使用 .net 的任何技巧吗？我的意思是只放断点，当浏览器发出请求时它就会被命中。

有人知道任何支持调试的 PHP 好 USB 服务器吗？如果我想要更多的东西，那么我想知道如何调试它，就像人们调试他们的 asp.net 应用程序一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:29:55.937

据我所知，您不能在 PHP 中“单步执行”您的代码。使用严格的错误报告会有所帮助。

当涉及到 CURL 时，您还可以使用[curl_error](http://php.net/manual/en/book.curl.php)查看正在发生的一些潜在的“致命”问题。

# javascript - 如何使 Twitter Bootstrap 工具提示有多行？

> ID：13338780
> 
> 赞同：161
> 
> 时间：2012-11-12T05:25:42.853
> 
> 标签：javascript, html, css, twitter-bootstrap

我目前正在使用以下函数来创建将使用 Bootstrap 的工具提示插件显示的文本。为什么多行工具提示仅适用于`<br>`而不适用`\n`？我更喜欢链接的标题属性中没有任何 HTML。

什么有效

```
def tooltip(object)
  tooltip = ""
  object.each do |user|
    tooltip += "#{user.identifier}" + "<br>"
  end
  return tooltip
end 
```

我想要的是

```
def tooltip(object)
   tooltip = ""
   object.each do |user|
     tooltip += "#{user.identifier}" + "\n"
   end
   return tooltip
 end 
```

* * *

## 回答 #1

> 赞同：271
> 
> 时间：2013-01-15T23:35:45.983

您可以`white-space:pre-wrap`在工具提示上使用。这将使工具提示尊重新行。如果行长于容器的默认最大宽度，它们仍将换行。

```
.tooltip-inner {
    white-space:pre-wrap;
} 
```

[http://jsfiddle.net/chad/TSZSL/52/](http://jsfiddle.net/chad/TSZSL/52/)

如果要防止文本换行，请改为执行以下操作。

```
.tooltip-inner {
    white-space:pre;
    max-width:none;
} 
```

[http://jsfiddle.net/chad/TSZSL/53/](http://jsfiddle.net/chad/TSZSL/53/)

这些都不能与`\n`html 中的 a 一起使用，它们实际上必须是实际的换行符。或者，您可以使用编码的换行符`&#013;`，但这可能比使用`<br>`'s 更不可取。

* * *

## 回答 #2

> 赞同：226
> 
> 时间：2013-01-11T15:25:19.120

您可以使用 html 属性：http: [//jsfiddle.net/UBr6c/](http://jsfiddle.net/UBr6c/)

`My <a href="#" title="This is a<br />test...<br />or not" class="my_tooltip">Tooltip</a> test.`

```
$('.my_tooltip').tooltip({html: true}) 
```

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2014-01-29T14:25:27.120

如果您在非链接元素上使用*Twitter Bootstrap*`data`工具提示，您可以指定，您希望在 HTML 代码中直接使用多行工具提示，无需 Javascript，仅使用参数：

```
<span rel="tooltip" data-html="true" data-original-title="1<br />2<br />3">5</span> 
```

这只是*costales*答案的替代版本。所有的荣耀都归于他！:]

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-11-20T04:28:43.907

如果您使用的是 Angular UI Bootstrap，则可以使用带有 html 语法的工具提示：`tooltip-html-unsafe`

例如更新到 angular 1.2.10 和 angular-ui-bootstrap 0.11：http: [//jsfiddle.net/aX2vR/1/](http://jsfiddle.net/aX2vR/1/)

旧的：http: [//jsfiddle.net/8LMwz/1/](http://jsfiddle.net/8LMwz/1/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-04T18:08:49.973

在 Angular UI Bootstrap 0.13.X 中，tooltip-html-unsafe 已被弃用。您现在应该使用 tooltip-html 和 $sce.trustAsHtml() 来完成带有 html 的工具提示。

[https://github.com/angular-ui/bootstrap/commit/e31fcf0fcb06580064d1e6375dbedb69f1c95f25](https://github.com/angular-ui/bootstrap/commit/e31fcf0fcb06580064d1e6375dbedb69f1c95f25)

```
<a href="#" tooltip-html="htmlTooltip">Check me out!</a>

$scope.htmlTooltip = $sce.trustAsHtml('I\'ve been made <b>bold</b>!'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-03T11:08:07.943

Angular Bootstrap 的 CSS 解决方案是

```
::ng-deep .tooltip-inner {
  white-space: pre-wrap;
} 
```

如果您不需要限制它的使用，则无需使用父元素或类选择器。Copy/Pasta，此规则将适用于所有子组件

# c# - 在 C# 中使用按钮打开一个新表单

> ID：13338781
> 
> 赞同：2
> 
> 时间：2012-11-12T05:26:21.870
> 
> 标签：c#, android-activity

嗨，我正在用 c# 做一个简单的活动。我想使用一个按钮打开一个新的form2，当我按下该按钮时form1会自动关闭。这是我的代码：

```
 Form2 form2 = new Form2();
        form2.ShowDialog();
        this.Close(); 
```

现在我不知道我将使用什么方法来自动关闭form1。谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T05:28:32.100

无法工作，因为代码控制将在`form2.ShowDialog();`.

您必须以非模态方式显示 form2：

```
Form2 form2 = new Form2();
form2.Show();
this.Close(); 
```

或者我猜你可以通过隐藏表格来伪造它：

```
Form2 form2 = new Form2();
this.Visible = false;
form2.Show();
this.Visible = true; 
```

尝试两个版本，看看哪个版本更适合您的情况。调用`ShowDialog();`会将表单显示为模态，导致所有用户鼠标/键盘输入仅限于 form2，直到您关闭它。

**编辑：** Form2 必须声明为成员变量，如果它在按钮事件中被 decalred，它将超出范围。

```
Form2 form2 = new Form2();
private void btnOK_Click(object sender, EventArgs e)
{
this.Visible = false;
form2.Show();
this.Visible = true;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T05:30:05.220

而不是使用`this.Close();`use`this.Hide()`和 on formclosure 事件`Form2`give `form1.Show()`。

有关更多信息，请通过此[链接](https://stackoverflow.com/q/13226393/1577396)（我之前问过这个问题）。

# android - 如何从 OnClickListener 视图中获取字符串？安卓

> ID：13338782
> 
> 赞同：0
> 
> 时间：2012-11-12T05:26:28.470
> 
> 标签：android, view, onclicklistener

我在 for 循环中设置了很多 TextView，每个都得到`.setClickable(true)`

然后我

```
tv.setOnClickListener(new OnClickListener() { //tv is the TextView.
    public void onClick(View v) {

    }
}); 
```

我知道这是一个 TextView，但我得到了 View v。如何从内部获取 TextView 的文本`public void onClick(View v){ }`？请记住：我不能简单地将 tv 设置为 final，因为它在 for 循环中，并且会生成很多 TextView。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T05:31:44.437

您可以按如下方式进行类型转换吗？

```
 public void onClick(View v) {
            String text = null;
            if(v instanceof TextView){
                TextView t = (TextView) v;
                text = t.getText().toString();
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T05:30:27.710

您可以将视图类型转换为 textView 并获取文本。您可以向 TextView 添加标签并简单地调用 v.getTag()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-15T03:18:25.053

```
 @Override
public void onClick(View v) 
    { 
    String text = null;
if(v instanceof TextView)
    {
     TextView t = (TextView) v;
         text = t.getText().toString();
    }

    //this is for sending our clicked edittext value to next page ...

Intent next=new Intent(getApplicationContext(),sendSMS.class);
next.putExtra("msg",text);
startActivity(next);

    } 
```

# c# - Selenium RC Jmeter C# LoadTesting

> ID：13338785
> 
> 赞同：1
> 
> 时间：2012-11-12T05:26:45.457
> 
> 标签：c#, selenium-rc, jmeter, load-testing

我正在使用 winforms 应用程序对托管在服务器上的 java web 应用程序进行功能测试。整个应用程序使用数据驱动测试，我从 Excel 输入要执行的测试，应用程序读取它并使用 selenium RC 在浏览器上执行测试用例。在执行 excel 中提到的步骤时，我会并行生成一份报告，确认元素的存在/状态等。

我想在这里集成 jMeter，使用 c# 来计算性能参数，例如使用 Jmeter 的命令行功能并将 URL 传递给 jMeter。

我可以单独使用 jMeter，但我想为测试团队提供一个选项，将其用作所有测试的一站式工具，并使用与功能测试相同的测试用例。是否有任何可用的库可以计算任何操作的 Web 响应时间并为并发用户生成图表/分析。

提前致谢

-ABY

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T08:37:41.243

我一直在尝试研究同样的问题。我从文献综述中得出的答案是否定的。至于 C#，Jmeter 与 jUnit 集成在一起。我在 Apache 文档中没有看到任何提及 Nunit 或 MSTest 支持的内容。Microsoft 为 SQL Server 提供了一个 JDBC 驱动程序，允许您测试查询的执行时间。如果您确实发现它受支持，请注意最佳实践是使用 HTMLUnitDriver 进行无头执行（不会弹出数千个浏览器实例）。

大多数评论还指出，尽管功能性 Selenium 测试可以集成到 JMeter 中，但 Jmeter 报告协议级别的操作，而检测的 Selenium 代码在 DOM 对象级别运行。您失去了在页面加载期间支持围绕各种事件的指标所需的粒度（随机我正在考虑将页面加载的总时间与 redirectStart 和 redirectEnd 之间的差异进行比较）或客户端活动（如来自表单验证的输入）。

# iphone - 在兼容模式下运行 iPhone 应用程序时 iPad 崩溃

> ID：13338786
> 
> 赞同：1
> 
> 时间：2012-11-12T05:26:48.797
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我刚刚审查了我的一个应用程序，我从来不知道这一点，但显然 iPhone 特定的应用程序也必须能够在兼容模式下在 iPad 上运行......我从来不知道这一点，而且它真的没有意义。

无论如何，调用 didFinishLaunchingWithOptions 时我的应用程序崩溃了

```
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    UIViewController *rootViewController;
    rootViewController = [[[WPViewController alloc] initWithNibName:@"WPViewController_iPhone" bundle:nil] autorelease];
    self.viewController = [[[UINavigationController alloc] initWithRootViewController:rootViewController] autorelease];
    self.viewController.navigationBar.barStyle = UIBarStyleBlack;

    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES; 
```

使用 NSLog，我可以看到当我调用 [self.window makeKeyAndVisible] 时它崩溃了；而且，如果我删除那行代码并在 iPad 模拟器中运行它，它不会崩溃，但显然会显示一个空白屏幕。该应用程序在 iPhone 模拟器上运行良好

有任何想法吗？或开始寻找的地方？

# php - 将原始 URL 转换为友好 URL 并显示在浏览器的地址栏中

> ID：13338791
> 
> 赞同：-2
> 
> 时间：2012-11-12T05:27:50.903
> 
> 标签：php, .htaccess

在我的网站上有一个注册导师的链接。该链接是这样的

```
http://www.lankainstitute.com/profiles/centers/index.php?code=1203&institute=Montana+Higher+Educational+Institute#page=art-section 
```

所以我需要重写这个链接，重写后它想在我的浏览器地址栏中显示如下：

```
www.lankainstitute.com/1203/Montana-Higher-Educational-Institute 
```

谁能告诉我是否可以将上面的原始 URL 重写为我的预期 URL 并可以在地址栏中显示它？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T05:32:06.017

是的，您可以通过在 .htaccess 文件中添加一行来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:34:21.807

根据服务器（Apache、ISS）的不同，有一些工具可以做到这一点。就像在 Apache mod_rewrite 中一样，寻找一些示例重写规则。

例如

```
DocumentRoot /var/www/example.com
Alias /myapp /opt/myapp-1.2.3
<Directory /opt/myapp-1.2.3>
    RewriteEngine On
    RewriteBase /myapp/
    RewriteRule ^index\.html$  welcome.html 
</Directory> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T05:34:53.050

[了解更多](http://blog.eprakash.info/2012/01/10-useful-ways-to-rewrite-url-using.html)使用 htaccess 进行 url 重写

好吧，在这种情况下，您可以简单地这样做：

`http://www.lankainstitute.com/profiles/centers/index.php?code=1203&institute=Montana+Higher+Educational+Institute#page=art-section`至`www.lankainstitute.com/1203/Montana-Higher-Educational-Institute`

代码：

```
RewriteEngine On
RewriteRule ^([0-9]+)/([a-zA-Z0-9_-]+)$ index.php?code=$1&institute=$2 
```

`.htaccess`在您的文件中添加此代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T05:35:25.120

使用您的 .htaccess 文件。查看**重写引擎**

# c# - 具有 1 个发布者和 4 个并行消费者的破坏者示例

> ID：13338796
> 
> 赞同：7
> 
> 时间：2012-11-12T05:28:22.757
> 
> 标签：c#, concurrency, disruptor-pattern

在这个例子中[https://stackoverflow.com/a/9980346/93647](https://stackoverflow.com/a/9980346/93647)和这里[为什么我的破坏者例子这么慢？](https://stackoverflow.com/questions/13334778/why-my-disruptor-example-is-so-slow)（在问题结束时）有 1 个发布者发布项目和 1 个消费者。

但就我而言，消费者工作要复杂得多，需要一些时间。所以我想要 4 个并行处理数据的消费者。

例如，如果生产者生产数字：1,2,3,4,5,6,7,8,9,10,11..

我希望消费者 1 捕获 1,5,9，...消费者 2 捕获 2,6,10，...消费者 3 捕获 3,7,11，...消费者 4 捕获 4,8,12...（不完全是这些数字，想法是数据应该并行处理，我不在乎哪个消费者处理了哪个特定数字）

请记住，这需要并行完成，因为在实际应用程序中，消费者工作非常昂贵。我希望消费者在不同的线程中执行以使用多核系统的强大功能。

当然，我可以只创建 4 个环形缓冲区并将 1 个消费者附加到 1 个环形缓冲区。这样我就可以使用原始示例。但我觉得这不会是正确的。创建 1 个发布者（1 个环形缓冲区）和 4 个消费者可能是正确的——因为这是我需要的。

在谷歌群组中添加一个非常相似的问题的链接：[https ://groups.google.com/forum/#!msg/lmax-disruptor/-CLapWuwWLU/GHEP4UkxrAEJ](https://groups.google.com/forum/#!msg/lmax-disruptor/-CLapWuwWLU/GHEP4UkxrAEJ)

所以我们有两个选择：

*   一环多个消费者（每个消费者都会在每次添加时“唤醒”，所有消费者应该有相同的WaitStrategy）
*   许多“一环 - 一个消费者”（每个消费者只会在它应该处理的数据上唤醒。每个消费者可以有自己的 WaitStrategy）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:57:17.773

**编辑**：我忘了提到代码部分取自[常见问题解答](http://code.google.com/p/disruptor/wiki/FrequentlyAskedQuestions#How_do_you_arrange_a_Disruptor_with_multiple_consumers_so_that_e)。我不知道这种方法比弗兰克的建议好还是坏。

该项目的文档记录严重不足，这很可惜，因为它看起来不错。
无论如何尝试以下剪辑（基于您的第一个链接） - 在单声道上测试并且似乎没问题：

```
using System;
using System.Threading.Tasks;
using Disruptor;
using Disruptor.Dsl;

namespace DisruptorTest
{
    public sealed class ValueEntry
    {
        public long Value { get; set; }
    }

    public class MyHandler : IEventHandler<ValueEntry>
    {
        private static int _consumers = 0;
        private readonly int _ordinal;

        public MyHandler()
        {
            this._ordinal = _consumers++;
        }

        public void OnNext(ValueEntry data, long sequence, bool endOfBatch)
        {
            if ((sequence % _consumers) == _ordinal)
                Console.WriteLine("Event handled: Value = {0}, event {1} processed by {2}", data.Value, sequence, _ordinal);
            else
                Console.WriteLine("Event {0} rejected by {1}", sequence, _ordinal);                     
        }
    }

    class Program
    {
        private static readonly Random _random = new Random();
        private const int SIZE = 16;  // Must be multiple of 2
        private const int WORKERS = 4; 

        static void Main()
        {
            var disruptor = new Disruptor.Dsl.Disruptor<ValueEntry>(() => new ValueEntry(), SIZE, TaskScheduler.Default);
            for (int i=0; i < WORKERS; i++)
                disruptor.HandleEventsWith(new MyHandler());
            var ringBuffer = disruptor.Start();

            while (true)
            {
                long sequenceNo = ringBuffer.Next();
                ringBuffer[sequenceNo].Value =  _random.Next();;
                ringBuffer.Publish(sequenceNo);
                Console.WriteLine("Published entry {0}, value {1}", sequenceNo, ringBuffer[sequenceNo].Value);
                Console.ReadKey();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:36:21.077

从环形缓冲区的规范中，您会看到每个消费者都会尝试处理您的`ValueEvent`. 在你的情况下，你不需要那个。

我是这样解决的：

向您添加一个已处理的字段`ValueEvent`，当消费者接受他在该字段上测试的事件时，如果它已被处理，他将继续下一个字段。

不是最漂亮的方式，但它是缓冲区的工作方式。

# couchdb - CouchDB 的 group=true 是否防止重新减少？

> ID：13338799
> 
> 赞同：1
> 
> 时间：2012-11-12T05:28:39.977
> 
> 标签：couchdb

CouchDB 的 map 函数发出键/值对：

```
function(doc) {
  emit(doc.date, 1);
} 
```

潜在地，可能有许多具有相同键的键/值对。在查询视图时设置将`group=true`具有相同键的键/值对分组到相同的 reduce 中：

```
function(keys, values, rereduce) {
  return sum(values);
} 
```

这是否意味着`group=true`（或任何`group_level`> 0），每个键都会有**一个减少**？

还是分组只保证所有reduce都具有同构键，并且仍然可能有一个或多个rereduce？

我正在使用一个不可交换的 reduce 函数，但每个键不会有大量记录。我希望我能够`group=true`在一个 reduce 中设置然后控制操作顺序。如果会有再削减，那么这个计划就没有意义了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:17:54.090

`group=true`粗略的意思是*“嘿，沙发！把这张地图分组，让所有的键都是不同的，但不要错过任何一个！”* 实际上等于`group_level=999`（请参阅[文档](http://wiki.apache.org/couchdb/HTTP_view_API#Querying_Options)）。

虽然您可能无法正确猜测`group_level`并删除一些关键项目（如果 key 是一个数组，那么它是有意义的），`group`请为您处理好这一点，并且不会应用 rereduce。

此外，您的 reduce 函数可以替换为内置的[`_sum`](http://wiki.apache.org/couchdb/Built-In_Reduce_Functions#A_sum)- 它是在 Erlang 中实现的，并且速度更快。

# symfony - Symfony2 Composer 安装

> ID：13338803
> 
> 赞同：5
> 
> 时间：2012-11-12T05:29:01.803
> 
> 标签：symfony, debian, composer-php

我正在尝试安装 Symfony 2.1.3（最新）。我正在运行作曲家并安装一切正常。我得到的**唯一**错误是：

```
Script Sensio\Bundle\DistributionBundle\Composer\ScriptHandler::clearCache 
handling the  post-install-cmd event terminated with an exception

[RuntimeException]                                                         
An error occurred when executing the "'cache:clear --no-warmup'" command. 
```

它被安装在 www 文件夹下。我正在运行 nginx 并遵循 composer 方法。我在互联网上读到 apache 应该手动运行而不是作为服务运行，但是我使用的是 nginx。apache是​​否仍然与它有任何关系？我正在使用Debian挤压。

编辑：根据 AdrienBrault 的建议，错误是因为时区未在 php.ini 中设置。只有使用 --verbose 我才能看到警告。多谢你们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T08:28:57.787

Apache 不相关 - 通过命令行调用 PHP。

最有可能是缓存文件夹中的权限：您是否检查过运行 composer update 的用户是否真的可以写入缓存文件夹？

尝试手动运行`rm -Rf app/cache/dev`（对于生产环境，将 dev 替换为 prod）并查看是否出现任何权限错误。

`default.timezone`如果在 CLI 中运行时未在 php 中配置设置，您也会收到此错误。验证只是运行

`php --info | grep timezone`

并检查设置`date.timezone`是否正确配置。

在安全方面，将 777 设置为文件夹并不是最佳解决方案 - 如果您启用了 ACL，您可以使用它来正确设置缓存和日志文件夹的权限。在[Symfony2 官方安装页面阅读更多内容](http://symfony.com/doc/2.0/book/installation.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-20T23:29:38.970

我有一段时间遇到同样的问题，经过数小时的砖墙撞击后，我意识到......我的项目中有一个 .gitmodule，并且在初始结帐时，这些子模块没有初始化，因此您的作曲家不存在更新，导致上述错误。

确保运行以下

```
git submodule update --init src/Acme/Sadness/Bundle 
```

当然，用您的项目命名空间替换**src/Acme/Sadness/Bundle 。**

希望这可以帮助别人不会经历我刚刚经历的同样痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T09:42:20.103

如果您已经有供应商文件夹，我会删除它并通过“composer.phar install”再次安装 symfony 2.1.3。问题可能来自作曲家的过时版本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-03T18:14:42.520

我有同样的问题，我以这种方式解决。

在控制台上执行此操作，您应该会看到类似这样的内容

```
$ locate php.ini
/etc/php5/apache2/php.ini
/etc/php5/cli/php.ini
/etc/php5/fpm/php.ini 
```

第一行可能是您执行 phpinfo() 时出现的 php.ini；

问题是当你执行 composer update 这没有检查相同的 php.ini

在我的情况下，第二行

我所有的网站都可以正常工作，但在编辑第二个文件并将您在第一个文件中设置的时区放入相同的时区之后，我现在总是没有问题

跑

```
$ sudo service apache2 reload 
```

现在

```
$ composer update 
```

我希望这项为你工作的工作就像为我工作一样

问候埃米利亚诺

# android - 为什么android中的PJSip不能正常工作？

> ID：13338805
> 
> 赞同：1
> 
> 时间：2012-11-12T05:29:13.627
> 
> 标签：android, pjsip

我试过从 pjsip.org 构建的 Apjsua 项目没有成功。我花了很多时间仍然没有正确注册。如果你们中的任何人成功构建了 apjsua 示例应用程序，那么请帮助我。

我在谷歌上搜索了很多 sip，很多人建议我使用 CSipSimple，但我需要比 csipsimple 功能更多的选项。所以我尝试构建 pjsip 应用程序。但没有成功。有没有人有在 android 设备上使用 pjsip 的经验？与我分享将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:12:02.990

例如：

当您启动应用程序时，您应该有一个菜单。现在输入

```
+a 
```

在该控制台应该询问更多信息之后，例如：

1.  sip:用户名@sipserver
2.  sip:sipserver
3.  *
4.  用户名
5.  密码

之后，您应该登录。但在此之前，您应该更改 pjsip-apps/src/pjsua/main_android.c 中的“setInput”函数：

```
void setInput(char *s)
{
    int i = 0;

    for (i = 0; i < sizeof(app_var.line); i++)
    {
        app_var.line[i]=NULL;
    }

    if (strlen(s) < sizeof(app_var.line))
        strncpy(app_var.line, s, strlen(s));

    pj_sem_post(app_var.input_sem);
} 
```

# spring - 使用格式错误解组 JAX-RS 响应 xml（内容类型：文本/xml）

> ID：13338808
> 
> 赞同：0
> 
> 时间：2012-11-12T05:29:29.803
> 
> 标签：spring, jax-rs, content-type, unmarshalling

我正在调用的 JAX-RS Web 服务将 xml 内容作为 text/html 内容类型抛出。在我这边，我需要读取 xml，并将其转换为 Java 对象。

问题是：响应 xml 的格式不正确，并且在错误的地方有换行符，例如 - 之前有几个换行符`<?xml version="1.0" encoding="UTF-8"?>`。这导致试图解组它的问题。

有没有办法可以解组响应 xml 字符串，尽管它有格式问题？

提前致谢。

```
HttpGet httpGet = new HttpGet(uri);
HttpResponse response = client.execute(httpGet);

InputStream inputStream = response.getEntity().getContent();

JAXBContext context = JAXBContext.newInstance(MyClass.class);
MyClass myObj = (MyClass) context.createUnmarshaller().unmarshal(inputStream); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:30:57.167

如何在解组之前修剪内容：

```
import org.apache.commons.io.IOUtils; 
import org.apache.commons.lang.CharEncoding;

MyClass myObj = MyClass.class.cast(
  context.createUnmarshaller().unmarshal(
    IOUtils.toInputStream(
      IOUtils.toString(
        InputStream.class.cast(response.getEntity().getContent()),
        CharEncoding.UTF_8
      ).trim(),
      CharEncoding.UTF_8
    )
  )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:26:17.517

最后让提供商以 xml/应用程序格式发送响应。但是，作为一种出路，我发现的一个选项是将内容保存为文件，然后再次从文件中检索内容。

# java - 检查 HashSet 是否包含某个子集

> ID：13338812
> 
> 赞同：0
> 
> 时间：2012-11-12T05:29:50.800
> 
> 标签：java, algorithm, hashset

我有一段代码，其中包含

```
 Collection<String> tok=Arrays.asList(tokens);
    HashSet<String> lookup=new HashSet<String>();  

       while(!lookup.containsAll(tok)&&max<N)
         {
         } 
```

使用 toString() 我发现即使 HashSet 包含一个集合仍然 containsAll 方法返回 false。我在代码中使用了 remove 方法，但它从未被调用。完整的代码[在 pastebin 上](http://pastebin.com/v0TcCuGX)，这将更具可读性。

目的是获取一个输入字符串和另一个 k 个字符串，并在包含所有 k 个字符串的输入字符串中搜索最小子序列

1）从输入字符串中的索引0开始，并将前k个字符串添加到HashSet，因为这是可以包含k个不同标记的最小序列

2）之后取范围 min=0 到 max=k 并继续在位置 max 添加字符串并递增 max 直到集合包含所有标记

3）当找到所有标记时，删除字符串一个位置 min（最初为 0）并增加 min。如果删除后所有标记都不存在于 HashSet 中。将 found 设置为 false，以便在下一次迭代中重复步骤 2，以从该 min 值开始间隔

4）如果max-min小于之前的差，则新的最小子序列为min-max

输入为

```
 This is a test. This is a programming test. This is a programming test in any language.
 k=4
 this
 a
test
programming 
```

输出是

```
 tokens are  [this, a, test, programming]
Increasing Max [is, test, a, this]  found =false
Increasing Max [is, test, a, this]  found =false
Increasing Max [is, test, a, this]  found =false
Increasing Max [is, programming, test, a, this]  found =false
Increasing Max [is, programming, test, a, this]  found =false
 Increasing Max [is, programming, test, a, this]  found =false
 Increasing Max [is, programming, test, a, this]  found =false
Increasing Max [is, programming, test, a, this]  found =false
Increasing Max [is, programming, test, a, this]  found =false
Increasing Max [is, programming, test, a, this]  found =false
Increasing Max [is, programming, test, a, in, this]  found =false
Increasing Max [is, programming, test, any, a, in, this]  found =false
Increasing Max [is, programming, test, any, a, language, in, this]  found =false

No subsegment found 
```

输出显示 remove 从未被调用，但 containsAll() 仍然返回 false，即使它包含集合中存在的所有字符串。

为什么即使 remove 从未被调用，它仍然返回 false？

即使解决了上述两个问题，也可能 HashSet 不起作用。对于像这样的输入

```
 This is a this test.
 2
 this
 test 
```

由于索引 3 处的 this 不会被添加到集合中。生成的最小间隔将是 [0-4] 而不是 [3-4] 那么是否有一个集合可能包含重复值并具有 containsAll 方法或 Will我必须使用带有字符串索引的 HashMap 作为键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:19:53.880

查看 pasteBin 上的代码，似乎在包含 的循环中`System.out.println(" Increasing Max "+lookup.toString()+" found ="+found);`，您从不调用`lookup.containsAll(tok)`，即它`false`在每次循环迭代中输出的事实是由于`found`之前为假。

其他几点：

*   不要调用`System.exit`你的代码。（好吧，除非您发现了一个非常严重的异常或错误，否则您无法从中恢复，您当前尝试解决的问题不会发生这种情况）。
*   `for`如果您事先知道迭代次数，请使用循环。如果你不这样做，特别是如果循环终止取决于多个变量，那么`while`循环将更具可读性。
*   对于您的问题的更短的解决方案（甚至可能适合一个屏幕），请查看[`sublist`方法](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#subList%28int,%20int%29)。

# java - 如何在 Hibernate 中使用具有 ManyToMany 关联的嵌套对象正确分页？

> ID：13338813
> 
> 赞同：0
> 
> 时间：2012-11-12T05:29:53.643
> 
> 标签：java, hibernate, jersey, jax-rs

好的，所以我有以下（缩写）3 个实体和 HibernateUtil 类。

```
public class Tag {
    @Id
    BigDecimal id;

    String tag

    @ManyToMany( mappedBy="tags" )
    List<Label> labels;
}

public class Label {
    @Id
    BigDecimal id;

    String label;

    @ManyToMany( targetEntity=Tag.class )
    List<Tag> tags;
}

public class Data {
    @Id
    BigDecimal id;

    BigDecimal data;

    @ManyToOne
    Label label;
}

public class HibernateUtil {

    public static List pagedQuery(DetachedCriteria detachedCriteria, Integer start, Integer size) throws WebApplicationException {
        Session session = getSession();
        try {
            Transaction transaction = session.beginTransaction();

            List records = detachedCriteria.getExecutableCriteria(session)
                    .setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY)
                    .setFirstResult(start)
                    .setMaxResults(size)
                    .list();

            transaction.commit();

            return records;
        } catch (Exception e) {
        // Place Logger here...
            throw new WebApplicationException(e);
        } finally {
            session.close();
        }
    }

} 
```

我遇到的问题是，当我尝试使用 HibernateUtil.pagedQuery( detatchedCriteria, start, size ) 查询 Data 类时，我的结果列表与 size 参数不匹配。我发现原因是休眠构建查询以包含标签（Data.Label.Tags）的方式。

例如，当标签具有多个关联标签时，完整分页查询中使用的数据对象子查询的结果列表如下所示（我通过解析 Hibernate 向控制台吐出的 sql 发现了这一点）

1.  数据 1；标签：标签 1
2.  数据 1；标签；标签 2
3.  数据 2；标签；标签 1
4.  数据 2；标签；标签 2
5.  ETC...

如果我用 size=3 调用它，那么返回的结果集将是

1.  数据 1；标签：标签 1
2.  数据 1；标签；标签 2
3.  数据 2；标签；标签 1

但是，Hibernate 会将前两行组合在一起（因为它们是相同的 Data 对象），并且我返回的 List 对象的大小为 2（Data-1 & Data-2）

我试图用我通过 Google 找到的 Projection 方法替换 setResultTransformer 方法，但它只返回了 Data 对象的 id。

有人对我有什么建议吗？我不知道从这里去哪里......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:30:48.557

您面临一个常见的问题，即使用休眠进行分页。resultTransformer 应用在​​“Java”端，因此分页已经在 DB 端进行。

最简单的（也许不是最优化的）是做两个查询，一个使用投影和分页（就像你已经做过的那样），另一个使用投影 id。这是一个例子：

```
//get the projection    
Criteria criteria = factory.getCurrentSession().createCriteria(getEntityClass());
    criteria.setProjection(Projections.distinct((Projections.projectionList().add(Projections.id()).add(Projections.property("name")))));
//paginate the results
    criteria.setMaxResults(pageSize);
    criteria.setFirstResult(first);

List<Object[]> idList = criteria.list();
//get the id's from the projection
        List<Long> longList = new ArrayList<Long>();
        for (Object[] long1 : idList) {
            Object[] record = long1;
            longList.add((Long) record[0]);
        }

if (longList.size() > 0) {
//get all the id's corresponding to the projection, 
//then apply distinct root entity
            criteria = factory.getCurrentSession().createCriteria(getEntityClass());
            criteria.add(Restrictions.in("id", longList));
            criteria.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY);
        } else {
//no results, so let's ommit the second query to the DB
            return new ArrayList<E>();
        }

return criteria.list(); 
```

# r - 使用 R 中的收缩计算模型平均数据的置信区间

> ID：13338816
> 
> 赞同：9
> 
> 时间：2012-11-12T05:30:06.843
> 
> 标签：r, statistics

我正在尝试使用基于 Shaffer, 2004 的逻辑暴露方法运行巢生存模型。我有一系列参数并希望比较所有可能的模型，然后使用收缩率估计模型平均参数，如 Burnham 和 Anderson， 2002\. 但是，我无法弄清楚如何估计收缩调整参数的置信区间。

是否可以估计使用收缩估计的模型平均参数的置信区间？我可以使用 model.average$coef.shrinkage 轻松提取模型平均参数的平均估计值，但我不清楚如何获得相应的置信区间。

任何帮助将不胜感激。我目前正在使用 MuMIn 包，因为 AICcmodavg 出现有关链接功能的错误。

下面是我正在使用的代码的简化版本：

```
library(MuMIn)

# Logistical Exposure Link Function
# See Shaffer, T.  2004\. A unifying approach to analyzing nest success. 
# Auk 121(2): 526-540.

logexp <- function(days = 1)
{
  require(MASS)
  linkfun <- function(mu) qlogis(mu^(1/days))
  linkinv <- function(eta) plogis(eta)^days
  mu.eta <- function(eta) days * plogis(eta)^(days-1) *
    .Call("logit_mu_eta", eta, PACKAGE = "stats")
  valideta <- function(eta) TRUE
  link <- paste("logexp(", days, ")", sep="")
  structure(list(linkfun = linkfun, linkinv = linkinv,
             mu.eta = mu.eta, valideta = valideta, name = link),
        class = "link-glm")
}

# randomly generate data
nest.data <- data.frame(egg=rep(1,100), chick=runif(100), exposure=trunc(rnorm(100,113,10)), density=rnorm(100,0,1), height=rnorm(100,0,1))
  nest.data$chick[nest.data$chick<=0.5] <- 0
  nest.data$chick[nest.data$chick!=0] <- 1

# run global logistic exposure model
glm.logexp <- glm(chick/egg ~  density * height, family=binomial(logexp(days=nest.data$exposure)), data=nest.data)

# evaluate all possible models
model.set <- dredge(glm.logexp)

# model average 95% confidence set and estimate parameters using shrinkage
mod.avg <- model.avg(model.set, beta=TRUE)
(mod.avg$coef.shrinkage) 
```

关于如何提取/生成相应置信区间的任何想法？

谢谢艾米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:45:08.680

在思考了一段时间后，我根据 Lukacs, PM, Burnham, KP, & Anderson, DR (2009) 中的公式 5 提出了以下解决方案。模型选择偏差和弗里德曼悖论。*统计数学研究所年鉴*，62（1），117-125。对其有效性的任何评论将不胜感激。

代码如下：

```
# MuMIn generated shrinkage estimate  
  shrinkage.coef <- mod.avg$coef.shrinkage 

# beta parameters for each variable/model combination
coef.array <- mod.avg$coefArray
  coef.array <- replace(coef.array, is.na(coef.array), 0) # replace NAs with zeros

# generate empty dataframe for estimates
shrinkage.estimates <- data.frame(shrinkage.coef,variance=NA)

# calculate shrinkage-adjusted variance based on Lukacs et al, 2009
for(i in 1:dim(coef.array)[3]){
  input <- data.frame(coef.array[,,i],weight=model.set$weight)

  variance <- rep(NA,dim(input)[2])
  for (j in 1:dim(input)[2]){
    variance[j] <- input$weight[j] * (input$Std..Err[j]^2 + (input$Estimate[j] - shrinkage.estimates$shrinkage.coef[i])^2)
  }
  shrinkage.estimates$variance[i] <- sum(variance)  
}

# calculate confidence intervals
shrinkage.estimates$lci <- shrinkage.estimates$shrinkage.coef - 1.96*shrinkage.estimates$variance
shrinkage.estimates$uci <- shrinkage.estimates$shrinkage.coef + 1.96*shrinkage.estimates$variance 
```

# php - fullCalendar 事件发布方法到 MySQL

> ID：13338817
> 
> 赞同：5
> 
> 时间：2012-11-12T05:30:18.927
> 
> 标签：php, jquery, mysql, fullcalendar

我正在尝试使用 fullCalendar 和 MySQL 创建一个 MySQL 支持的事件接口。我试图操纵 fullCalendar 文档中的示例，并成功地从我的数据库中创建了一个事件源。

我现在正在尝试创建一个`eventDrop`调用，它将事件 ID、标题和开始时间发送到数据库。我使用上一个[问题](https://stackoverflow.com/questions/3964120/how-to-http-post-http-get-and-navigate-to-another-page-using-jquery)中的代码来创建`eventDrop`调用，这是整个 callendar 页面的 JavaScript：

```
$(document).ready(function() {    
    /* initialize the external events
    -----------------------------------------------------------------*/

    $('#external-events div.external-event').each(function() {

        // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
        // it doesn't need to have a start or end
        var eventObject = {
            title: $.trim($(this).text()) // use the element's text as the event title
        };

        // store the Event Object in the DOM element so we can get to it later
        $(this).data('eventObject', eventObject);

        // make the event draggable using jQuery UI
        $(this).draggable({
            zIndex: 999,
            revert: true,      // will cause the event to go back to its
            revertDuration: 0  //  original position after the drag
        });                     
    });    

    /* initialize the calendar
    -----------------------------------------------------------------*/

    $('#calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
        },
        editable: true,
        droppable: true, // this allows things to be dropped onto the calendar !!!
        drop: function(date, allDay) { // this function is called when something is dropped

            // retrieve the dropped element's stored Event Object
            var originalEventObject = $(this).data('eventObject');

            // we need to copy it, so that multiple events don't have a reference to the same object
            var copiedEventObject = $.extend({}, originalEventObject);

            // assign it the date that was reported
            copiedEventObject.start = date;
            copiedEventObject.allDay = allDay;

            // render the event on the calendar
            // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
            $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);                

            // if so, remove the element from the "Draggable Events" list
            $(this).remove();                     
        },

        // events from mysql database
        events: "/json-events.php",

        // submit to database
        eventDrop: function(calEvent, jsEvent, view) {
            var method = 'POST';
            var path = 'submit.php';
            var params = new Array();
            params['id'] = calEvent.id;
            params['start'] = calEvent.start;
             params['end'] = calEvent.end;
             params['title'] = calEvent.title;
            post_to_url( path, params, method);
  }
    });     
}); 
```

我希望 PHP 文件接收 POST 数据并将其插入数据库，结束时间等于开始时间加上 15 分钟（在下面的回答后编辑）：

```
<?php

mysql_connect("") or die(mysql_error());
mysql_select_db("") or die(mysql_error());

$id = $_POST["id"];
$title = $_POST["title"];
$start = $_POST["start"];
$end = date(Y-m-d T H:i:s , strtotime($start)+900);

$query = "INSERT INTO `events` VALUES (`$id`, `$title`, `$start`, `$end`, ``)";
mysql_query($query);
print $query;
?> 
```

数据库未接收事件数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-07T06:12:51.247

这是我得出的结论，在我的测试和公共服务器上运行它没有问题。我采用了 FullCalendar，这是我使用的格式。

数据库真的很简单。

```
id integer 11 chars primary key auto-increment,
title varchar 50,
start varchar 50,
end varchar 50,
url varchar 50. 
```

这是`index.php`or`index.html`文件。

```
<!DOCTYPE html>
<html>
<head>
<link href='css/fullcalendar.css' rel='stylesheet' />
<link href='css/fullcalendar.print.css' rel='stylesheet' media='print' />
<script src='js/jquery-1.9.1.min.js'></script>
<script src='js/jquery-ui-1.10.2.custom.min.js'></script>
<script src='js/fullcalendar.min.js'></script>
<script>
    $(document).ready(function() {
        $('#calendar').fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
            },
            editable: true,
            events: "json.php",
            eventDrop: function(event, delta) {
                alert(event.title + ' was moved ' + delta + ' days\n' +
                    '(should probably update your database)');
            },
            loading: function(bool) {
                if (bool) $('#loading').show();
                else $('#loading').hide();
            }
        });
    });
</script>
<style>
    body {
        margin-top: 40px;
        text-align: center;
        font-size: 14px;
        font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
        } 
    #loading {
        position: absolute;
        top: 5px;
        right: 5px;
        }
    #calendar {
        width: 900px;
        margin: 0 auto;
        } 
</style>
</head>
<body>
<div id='loading' style='display:none'>loading...</div>
<div id='calendar'></div>
<p>json.php needs to be running in the same directory.</p>
</body>
</html> 
```

这是`json.php`文件。

```
<?php
mysql_pconnect("localhost", "root", "") or die("Could not connect");
mysql_select_db("calendar") or die("Could not select database");

$rs = mysql_query("SELECT * FROM events ORDER BY start ASC");
$arr = array();

while($obj = mysql_fetch_object($rs)) {
$arr[] = $obj;
}
echo json_encode($arr);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:07:40.293

一旦删除插入查询中的列名并尝试，如果你没有得到那么让我们考虑一下。做这样的事情

```
mysql_query(INSERT INTO `events` VALUES ('$id', '$title', '$start', '$end', '')); 
```

只需在插入之前打印帖子值，如果看起来很清楚，然后检查您的查询。

回显查询并退出，你可能会得到这样的东西

```
mysql_query(INSERT INTO `events` VALUES ('23', 'event title', 'start date', 'end date', '')); 
```

运行此查询以查找错误（如果有）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:36:33.290

`print $query``;`-最后应该有一个

# xml - 尝试使用 lxml 解析时出现段错误

> ID：13338818
> 
> 赞同：1
> 
> 时间：2012-11-12T05:30:27.133
> 
> 标签：xml, xml-parsing, lxml

我有这个简单的 python 脚本，它是这样的：

```
import sys 
from lxml import etree

tree = etree.parse('gdpdefl.xml') 
```

但它有段错误，所以，经过一番谷歌搜索，我认为我的 xml 文档可能已损坏，所以我尝试了这个：

```
import sys
from lxml import etree

parser = etree.HTMLParser()
tree = etree.parse('gdpdefl.xml', parser) 
```

这也是段错误。这是我要解析的 xml 文档的示例：

```
<?xml version="1.0" encoding="utf-8"?> <Root xmlns:wb="http://www.worldbank.org">   <data>
    <record>
      <field name="Country or Area" key="ARB">Arab World</field>
      <field name="Item" key="NY.GDP.DEFL.KD.ZG">Inflation, GDP deflator (annual %)</field>
      <field name="Year">1960</field>
      <field name="Value" />
    </record>
    <record>
      <field name="Country or Area" key="ARB">Arab World</field>
      <field name="Item" key="NY.GDP.DEFL.KD.ZG">Inflation, GDP deflator (annual %)</field>
      <field name="Year">1961</field>
      <field name="Value" />
    </record> 
    <record>
      <field name="Country or Area" key="ZWE">Zimbabwe</field>
      <field name="Item" key="NY.GDP.DEFL.KD.ZG">Inflation, GDP deflator (annual %)</field>
      <field name="Year">2011</field>
      <field name="Value">21.1562931758805</field>
    </record>
  </data>
</Root> 
```

如果我在这里的 xml 格式不正确，那么将所有 Country、Item、Year 和 Values 字符串从该文件中取出并放入列表的最佳方法是什么？

# jquery-mobile - MobiScroll 选择预设

> ID：13338822
> 
> 赞同：1
> 
> 时间：2012-11-12T05:30:36.570
> 
> 标签：jquery-mobile, mobiscroll

mobiscroll 文档状态

> 此预设增强了常规 HTML 选择以使用滚动条选择值。原始选择被隐藏，而虚拟输入可见。选择的值由预设保持。

他们提供的示例 HTML 代码使用内联样式来隐藏原始选择元素

```
<select name="City" id="select" style="display:none"> 
```

但是，当我这样做并将 mobiscroll 替换设置为内联显示时

```
$('#select').scroller({preset:'select',theme:'default',display:'inline',mode:'scroller',inputClass: 'i-
txt'}); 
```

我发现虽然出现了滚动条，但我最终还是得到了它上面看起来像输入元素的东西。这不会在他们的演示代码中发生，但我注意到他们所做的是这样的

```
<div id="select_cont" style="display: none;">
<select name="City" id="select"> 
```

但这只是隐藏了包括 mobiscroll 替换在内的所有内容。看着被子，我发现打电话

```
$('#select').scroller({preset:'select',theme:'default',display:'inline',mode:'scroller',inputClass: 'i-
txt'}); 
```

在 DOM 中引入了一个虚拟输入元素。

```
<input id='cities_dummy'... 
```

我可以通过发出一个来让假人隐藏自己

```
$('#cities_dummy').css('display','none') 
```

创建滚动条后立即。但是，我无法理解为什么演示代码中的工作方式有所不同。我注意到他们使用的是 jQuery Mobile v 1.1.1，而我使用的是最新版本。

也许这个问题与版本有关？或者这里还有其他东西在起作用？我非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T07:41:54.090

我想到了。这一切都归结于

```
inputClass:i-txt 
```

滚动选项设置中的位。在演示代码中，他们可能正在通过脚本使用此类，具体取决于选项对象中*显示*属性的值。关键是 - 为了在滚动显示设置为“内联”时使原始选择消失，您必须将 i-txt （或您使用的任何输入类）定义为

```
.i-txt{display:none} 
```

# ruby-on-rails - 如何在我的 Emberjs Rails 应用程序中包含 jQuery Mobile

> ID：13338823
> 
> 赞同：0
> 
> 时间：2012-11-12T05:30:37.213
> 
> 标签：ruby-on-rails, jquery-mobile, ember.js

今天我遇到一个令人费解的问题，经过几个小时的搜索，我无法找到问题所在。我正在尝试将 jquery mobile 包含到我的 rails 应用程序中。我尝试过手动引用库文件和使用[jquery_mobile_rails](https://github.com/tscolari/jquery-mobile-rails) gem。两种方法都可以将库插入我的应用程序，但是一旦我添加 jquery mobile，我的应用程序就不再加载。刷新页面时，它不会加载。控制台出现三个错误：

**第一个：**

```
Uncaught TypeError: Object <Ember.ArrayResourceController:ember141> has no method '_resourceRequest'
Jimux.appsMetaController.Em.ArrayResourceController.create.findAll
newFunc
(anonymous function)
(anonymous function)
(anonymous function) jquery.js:566
jQuery.extend.globalEval jquery.js:567
jQuery.ajaxSetup.converters.text script jquery.js:8107
ajaxConvert jquery.js:7992
done jquery.js:7628
callback jquery.js:8367
send jquery.js:8373
jQuery.extend.ajax jquery.js:7835
(anonymous function) jquery.js:5858
jQuery.extend.each jquery.js:613
jQuery.fn.extend.domManip jquery.js:5855
jQuery.fn.extend.append jquery.js:5628
jQuery.fn.extend.wrapAll jquery.js:5585
(anonymous function) jquery.js:5603
jQuery.extend.each jquery.js:613
jQuery.fn.jQuery.each jquery.js:243
jQuery.fn.extend.wrapInner jquery.js:5598
$.extend.initializePage jquery.mobile-1.2.0.js:9063
(anonymous function) jquery.mobile-1.2.0.js:9142
fire jquery.js:976
self.fireWith jquery.js:1084
jQuery.extend.ready jquery.js:408
DOMContentLoaded 
```

**第二：**

```
Uncaught TypeError: Cannot call method 'set' of undefined
Ember.Application.registerInjection.injection
(anonymous function)
(anonymous function)
visit
DAG.topsort
Ember.Application.Ember.Namespace.extend.runInjections
Ember.Application.Ember.Namespace.extend.initialize
(anonymous function)
fire
self.fireWith
jQuery.extend.ready 
```

**第三：**

```
GET http://localhost:3000/assets/images/ajax-loader.gif 404 (Not Found) 
```

一旦我从 中删除`//= require jquery.mobile-1.2.0`，`application.js`我的应用程序就会再次按预期工作——没有任何上述错误。我只是想知道这里会发生什么。我想可能存在一些命名空间冲突，但我不确定是否是这种情况以及如何识别和修复它。

任何有关调试此问题的帮助将不胜感激。如果您在 rails 项目中使用 Embeejs+jQueryMobile，我很想知道您如何将这两个库包含到您的 rails 应用程序中，以及您是否/如何处理任何冲突。

我使用的是 Ember 1.0pre1，以及稍加修改的 ember-rest 版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T05:59:46.750

如果我没记错的话，jQuery Mobile 对 DOM 进行了相当多的操作。这对 Ember 来说可能是个问题，因为 Ember 不希望其他库操作它正在跟踪视图或绑定的 DOM 元素。

# grails - 将 grails 从 1.3.x 升级到 2.0.4 时 Spring Security 核心插件出错

> ID：13338824
> 
> 赞同：0
> 
> 时间：2012-11-12T05:30:47.743
> 
> 标签：grails, spring-security, grails-2.0

我有一个在 grails 1.3.x 中开发的应用程序，我升级到 2.0.4，spring 安全插件中存在依赖错误，所以我做了`grails install-plugin spring-security-core`，它安装了 1.2.7.3 版本。然后我运行 grails 应用程序，出现以下错误。

```
Compilation error: startup failed:
Compile error during compilation with javac.
C:\Users\Vinay.hs\.grails\2.0.4\projects\steer\plugins\spring-security-core-1.2.7.3\src\java\org\codehaus\groovy\grails\plugins\springs
ecurity\AjaxAwareAuthenticationFailureHandler.java:48: cannot find symbol
symbol  : method saveException(javax.servlet.http.HttpServletRequest,org.springframework.security.core.AuthenticationException)
location: class org.codehaus.groovy.grails.plugins.springsecurity.AjaxAwareAuthenticationFailureHandler
                        saveException(request, exception);
                        ^ 
```

然后我添加了`compile ':spring-security-core:1.2.7.3'`. 我得到了一个不同的错误，如下所示

```
:::: WARNINGS
                ::::::::::::::::::::::::::::::::::::::::::::::

                ::          UNRESOLVED DEPENDENCIES         ::

                ::::::::::::::::::::::::::::::::::::::::::::::

                :: #spring-security-core;1.2.7.3: java.text.ParseException: inconsistent module descriptor file found in 'http://plugin
s.grails.org/grails-spring-security-core/tags/RELEASE_1_2_7_3/spring-security-core-1.2.7.3.pom': bad organisation: expected='' found='o
rg.grails.plugins';

                ::::::::::::::::::::::::::::::::::::::::::::::

:::: ERRORS
                grailsCentral: bad organisation found in http://plugins.grails.org/grails-spring-security-core/tags/RELEASE_1_2_7_3/spr
ing-security-core-1.2.7.3.pom: expected='' found='org.grails.plugins' 
```

我提到[了这个jira问题](http://jira.grails.org/browse/GPSPRINGSECURITYCORE-57)，根据我们必须将依赖项更改为运行时，但它给了我以下错误

```
 inconsistent module descriptor file found in 'http://plugins.grails.org/grails-spring-security-core/tags/RELEASE_1_2_7_3/spring-security-core-1.2.7.3.pom': bad organisation: expected='' found='org.grails.plugins'; 
```

那么，如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T05:54:45.817

看起来您将依赖项放在 BuildConfig.groovy`dependencies`部分中，但它应该在以下`plugins`部分中：

```
plugins {
   runtime ":hibernate:$grailsVersion"
   build ":tomcat:$grailsVersion"
   ...
   compile ':spring-security-core:1.2.7.3'
} 
```

# c - 嵌套 C 数组指针类型

> ID：13338825
> 
> 赞同：3
> 
> 时间：2012-11-12T05:31:00.047
> 
> 标签：c, pointers, cstring

这似乎是一个应该已经在某个地方回答的问题，但我似乎找不到令人满意的东西。无论如何，我需要从一个看起来像这样的函数返回：

```
{ {"foo", "bar"}, {"baz", "foo"}, {"foo", "bar"} } 
```

我熟悉 of 的使用`argv`并且理解它的类型的含义，但由于某种原因，我无法正确获取上述表达式的类型。最里面总会有 2 个字符串文字，因此我想像

```
char **s[2] or char *(*s[2]) 
```

应该是我所追求的，但由于某种原因，无论我尝试迭代和使用`printf`. 此外，编译器不断抱怨指针类型不兼容、元素过​​多和大括号过多。这是当前代码：

```
 char *(*s[2]) = { {"foo", "bar"}, {"baz", "spam"}, {"eggs", "ham"} }; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T05:42:12.117

你很亲密。

```
#include <stdio.h>

int main()
{

    char* s[][2] = { {"foo", "bar"}, {"baz", "spam"}, {"eggs", "ham"} };

    for( int i = 0; i < 3; i++ )
    {
        for(int j = 0; j < 2; j ++)
        {
            printf("%s ",s[i][j]);
        }
    }

} 
```

以上打印：`foo bar baz spam eggs ham`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T05:41:48.690

这很简单

```
char *s[3][2] ={ {"foo", "bar"}, {"baz", "spam"}, {"eggs", "ham"} }; 
```

一点解释：

```
char *s ; //   |s| ---> "Only one char array or string"
                          ______
char *s[] ; //  |s| ---> |_s[0]_|--> 1st pointer to char array --> "1st string"
                         |_s[1]_|--> 2nd pointer to char array --> "2nd string"
                         |_s[2]_|--> 3rd pointer to char array --> "3rd string"

                          ___                                __
char *s[][] ;// |s| ---> |___|--> 1st pointer to pointer -->|__|-->"1st string"                                                                  
                                                            |__|-->"2nd string"                                                                           
                         ____                                __            
                         |___|--> 2nd pointer to pointer -->|__|-->"1st string"                                                                  
                                                            |__|-->"2nd string"
                         ____                                __             
                         |___|--> 3rd pointer to pointer -->|__|-->"1st string"                                                                  
                                                            |__|-->"2nd string" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T05:39:33.620

```
char *s[][2] = { {"foo", "bar"}, {"baz", "spam"}, {"eggs", "ham"} };

cout<<s[1][0]; 
```

会打印`baz`

# regex - Unicode 字符串提取和比较

> ID：13338826
> 
> 赞同：1
> 
> 时间：2012-11-12T05:31:01.740
> 
> 标签：regex, scala, unicode

```
1.val Matcher = """.+/(.*)""".r
2.val Matcher(title) = """http://en.wikipedia.org/wiki/Château_La_Louvière"""
3.val lowerCase = title.toLower
4.if(lowercase.equals("château_la_louvière")) //do something 
```

上面的比较返回 false，因为我猜第 2 行的结果是 Ch?teau_La_Louvi?re。有什么想法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:48:02.970

正如 4e6 所说，问题出在 Java 的标准配置中。假设所有文件都以 Latin1 编码。

```
1.val Matcher = """.+/(.*)""".r
2.val Matcher(title) = """http://en.wikipedia.org/wiki/Château_La_Louvière""" 
```

这可以通过设置以下 java-OPTS 来解决

```
export JAVA_OPTS='-Dfile.encoding=UTF-8' 
```

即使您不更改编码，1\. 和 2\. 仍然可以工作。问题在于 3\. 和 4\. 。

```
3.val lowerCase = title.toLower
4.if(lowercase.equals("château_la_louvière")) //do something 
```

''toLower'' 将导致 4\. 中的测试失败，因为 "â" 和 "è" 将被错误解释。这些字符将被编码为两个最多四个字节，每个字节都将独立小写，从而产生与 ''château_la_louvière'' 完全不同的结果。

# php - 具有固定右列的表格

> ID：13338829
> 
> 赞同：0
> 
> 时间：2012-11-12T05:31:15.990
> 
> 标签：php, css, html-table

我想要一张有`Fixed Column`. 我想修复右列。我找到了一个脚本来修复最左边的列。我使用该代码来修复最右边的列。

**HTML**

```
<div><table>
<tr><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="headcol">Row 1</td></tr>
<tr><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="headcol">Row 2</td></tr>
<tr><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="headcol">Row 3</td></tr>
<tr><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="headcol">Row 4</td></tr>
<tr><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="headcol">Row 5</td></tr>
<tr><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="headcol">Row 6</td></tr>
<tr><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="headcol">Row 7</td></tr>
<tr><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="headcol">Row 8</td></tr>
<tr><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="headcol">Row 9</td></tr>
</table></div> 
```

**CSS**

```
div {
    width: 600px;
    overflow-x:scroll;  
    margin: 0 auto;
}
.headcol {
    position:absolute;
    width:5em;
    left: 820px;
}
.long { background:yellow; letter-spacing:1em; }
</style> 
```

[**这**](http://jsfiddle.net/AbjVy/)是该脚本的演示。

问题是当我以不同的分辨率查看此页面或更改浏览器的缩放级别时，最右侧列的位置会发生变化。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:04:24.523

**使用float: right**为右列创建 CSS 样式 **display:block**应该可以解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:38:14.873

尝试设置`min-height`和`max-height`

# c++ - C++：设计：我应该在这里使用枚举吗？

> ID：13338836
> 
> 赞同：0
> 
> 时间：2012-11-12T05:33:15.677
> 
> 标签：c++, enums

C++ 中首选和最好的方法是什么：将*字母*分成 7 组，以便稍后我可以询问 char 是否在第 1、3 或 4 组等中...？我当然可以自己想出几种方法，但我想知道标准并在做这种事情时坚持下去。

```
0
AEIOUHWY
1
BFPV
2
CGJKQSXZ
3
DT
4
MN
5
L
￼
6
￼R 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T05:46:18.330

> C++ 中最好的方法：将字母分成 7 组，这样我以后可以问一个字符是否在第 1、3 或 4 组等中......？

进行“拆分”本身的最有效方法是拥有一个从字母/字符到数字的数组。

```
//                      A  B  C  D  E  F  G  H...
const char lookup[] = { 0, 1, 2, 3, 0, 1, 2, 0... 
```

switch/case 语句是另一个合理的选择——编译器可以自行决定是创建数组实现还是其他方法。

目前尚不清楚您计划使用这 1-6 个值的用途，但`enum`似乎是一个合理的编码选择。这样做的好处是仍然支持您可能对那些特定数值（例如，在 < 比较、流式传输...）中可能有的任何用途，同时比散布在代码中的“魔术”数字常量更易于阅读和编译器检查。任何宽度的常量整数也可能正常工作，但不会有统一的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T05:47:02.970

鉴于所涉及的数据量很少，我可能会按位查找 - 即设置值：

```
cat1 = 1;
cat2 = 2;
cat3 = 4;
cat4 = 8;
cat5 = 16;
cat6 = 32;
cat7 = 64; 
```

然后只需创建一个包含 26 个值的数组，每个值对应字母表中的每个字母，每个值都包含该字母的类别值。当你想对一个字母进行分类时，你只是`categories[ch-'A']`为了找到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T05:47:51.543

创建一个查找表。

```
int lookup[26] = { 0, 1, 2, 3, 0, 1, 2, 0 .... whatever };

inline int getgroup(char c)
{
    return lookup[tolower(c) - 'a'];
} 
```

这样称呼

```
char myc = 'M';
int grp = lookup(myc); 
```

为简洁起见，省略了错误检查。

当然，根据 7 个组所代表的内容，您可以制作枚举而不是使用 0、1、2 等。

# c# - 选中/取消选中 datagridview 上的复选框

> ID：13338837
> 
> 赞同：24
> 
> 时间：2012-11-12T05:33:20.783
> 
> 标签：c#, winforms, datagridview, datagridviewcheckboxcell

有人可以帮我为什么它不起作用吗？我有一个`checkbox`，如果我点击它，这应该取消选中 datagridview 中的所有复选框，这些复选框在包含用户选择的复选框之前已被选中。

这是代码：

```
 private void chkItems_CheckedChanged(object sender, EventArgs e)
        {
            foreach (DataGridViewRow row in datagridview1.Rows)
            {
                DataGridViewCheckBoxCell chk = (DataGridViewCheckBoxCell)row.Cells[1];
                if (chk.Selected == true)
                {
                    chk.Selected = false;
                }
                else
                {
                    chk.Selected = true;
                }
            }
        } 
```

不应选中该复选框。应该检查一下。

这是添加的列

```
 DataGridViewCheckBoxColumn CheckboxColumn = new DataGridViewCheckBoxColumn();
            CheckBox chk = new CheckBox();
            CheckboxColumn.Width = 20;
            datagridview1.Columns.Add(CheckboxColumn); 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-12T06:15:03.663

查看此[MSDN 论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/74df79a9-87ad-4cec-8502-3a357015558d)，它建议将 Cell 的值与 [Cell.TrueValue](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcheckboxcell.truevalue.aspx)进行比较。

因此，通过它的示例，您的代码应该看起来像这样：（*这是完全未经测试的*）

编辑：似乎未绑定 DataGridViewCheckBox 的 Cell.TrueValue 的默认值为空，您需要在列定义中设置它。

```
private void chkItems_CheckedChanged(object sender, EventArgs e)
{
    foreach (DataGridViewRow row in dataGridView1.Rows)
    {
        DataGridViewCheckBoxCell chk = (DataGridViewCheckBoxCell)row.Cells[1];
        if (chk.Value  == chk.TrueValue)
        {
            chk.Value = chk.FalseValue;
        }
        else
        {
            chk.Value = chk.TrueValue;
        }
    }
} 
```

* * *

此代码是在构造函数中设置 TrueValue 和 FalseValue 的工作注释，同时还检查 null：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        DataGridViewCheckBoxColumn CheckboxColumn = new DataGridViewCheckBoxColumn();
        CheckboxColumn.TrueValue = true;
        CheckboxColumn.FalseValue = false;
        CheckboxColumn.Width = 100;
        dataGridView1.Columns.Add(CheckboxColumn);
        dataGridView1.Rows.Add(4);
    }

    private void chkItems_CheckedChanged(object sender, EventArgs e)
    {
        foreach (DataGridViewRow row in dataGridView1.Rows)
        {
            DataGridViewCheckBoxCell chk = (DataGridViewCheckBoxCell)row.Cells[0];
            if (chk.Value == chk.FalseValue || chk.Value == null)
            {
                chk.Value = chk.TrueValue;
            }
            else
            {
                chk.Value = chk.FalseValue;
            }

        }
        dataGridView1.EndEdit();
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-03T00:18:39.337

当我看到这篇文章实际上没有得到回答时，我正在制作我自己的 Checkbox 版本来控制 DataGridViewCheckBoxColumn。要设置 DataGridViewCheckBoxCell 的选中状态，请使用：

```
foreach (DataGridViewRow row in dataGridView1.Rows)
{
    dataGridView1.Rows[row.Index].SetValues(true);
} 
```

对于其他试图完成同样事情的人，这就是我想出的。

这使得这两个控件的行为类似于 Gmail 中的复选框列。它保留了鼠标和键盘的功能。

```
using System;
using System.Windows.Forms;

namespace Check_UnCheck_All
{
    public partial class Check_UnCheck_All : Form
    {
        public Check_UnCheck_All()
        {
            InitializeComponent();
            dataGridView1.RowCount = 10;
            dataGridView1.AllowUserToAddRows = false;
            this.dataGridView1.CellContentClick += new System.Windows.Forms.DataGridViewCellEventHandler(this.dgvApps_CellContentClick);
            this.dataGridView1.CellMouseUp += new System.Windows.Forms.DataGridViewCellMouseEventHandler(this.myDataGrid_OnCellMouseUp);
            this.dataGridView1.CellValueChanged += new System.Windows.Forms.DataGridViewCellEventHandler(this.myDataGrid_OnCellValueChanged);
            this.checkBox1.Click += new System.EventHandler(this.checkBox1_Click);
        }

        public int chkInt = 0;
        public bool chked = false;

        public void myDataGrid_OnCellValueChanged(object sender, DataGridViewCellEventArgs e)
        {
            if (e.ColumnIndex == dataGridView1.Rows[0].Index && e.RowIndex != -1)
            {
                DataGridViewCheckBoxCell chk = dataGridView1.Rows[e.RowIndex].Cells[0] as DataGridViewCheckBoxCell;

                if (Convert.ToBoolean(chk.Value) == true) chkInt++;
                if (Convert.ToBoolean(chk.Value) == false) chkInt--;
                if (chkInt < dataGridView1.Rows.Count && chkInt > 0)
                {
                    checkBox1.CheckState = CheckState.Indeterminate;
                    chked = true;
                }
                else if (chkInt == 0)
                {
                    checkBox1.CheckState = CheckState.Unchecked;
                    chked = false;
                }
                else if (chkInt == dataGridView1.Rows.Count)
                {
                    checkBox1.CheckState = CheckState.Checked;
                    chked = true;
                }
            }
        }
        public void myDataGrid_OnCellMouseUp(object sender, DataGridViewCellMouseEventArgs e)
        {
            // End of edition on each click on column of checkbox
            if (e.ColumnIndex == dataGridView1.Rows[0].Index && e.RowIndex != -1)
            {
                dataGridView1.EndEdit();
            }
            dataGridView1.BeginEdit(true);
        }
        public void dgvApps_CellContentClick(object sender, DataGridViewCellEventArgs e)
        {
            if (dataGridView1.CurrentCell.GetType() == typeof(DataGridViewCheckBoxCell))
            {
                if (dataGridView1.CurrentCell.IsInEditMode)
                {
                    if (dataGridView1.IsCurrentCellDirty)
                    {
                        dataGridView1.EndEdit();
                    }
                }
                dataGridView1.BeginEdit(true);
            }
        }
        public void checkBox1_Click(object sender, EventArgs e)
        {
            if (chked == true)
            {
                foreach (DataGridViewRow row in dataGridView1.Rows)
                {
                    DataGridViewCheckBoxCell chk = (DataGridViewCheckBoxCell)row.Cells[0];
                    if (chk.Value == chk.TrueValue)
                    {
                        chk.Value = chk.FalseValue;
                    }
                    else
                    {
                        chk.Value = chk.TrueValue;
                    }
                }
                chked = false;
                chkInt = 0;
                return;
            }
            if (chked == false)
            {
                foreach (DataGridViewRow row in dataGridView1.Rows)
                {
                    dataGridView1.Rows[row.Index].SetValues(true);
                }
                chked = true;
                chkInt = dataGridView1.Rows.Count;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-22T12:14:26.237

对你来说简单的代码它会工作

```
private void dgv_CellClick(object sender, DataGridViewCellEventArgs e)
{
    if (dgv.CurrentRow.Cells["ColumnNumber"].Value != null && (bool)dgv.CurrentRow.Cells["ColumnNumber"].Value)
    {
        dgv.CurrentRow.Cells["ColumnNumber"].Value = false;
        dgv.CurrentRow.Cells["ColumnNumber"].Value = null;
    }
    else if (dgv.CurrentRow.Cells["ColumnNumber"].Value == null )
    {
        dgv.CurrentRow.Cells["ColumnNumber"].Value = true;
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-12T05:53:42.513

您在此处尝试的代码将翻转复选框的状态（如果为真则变为假，反之亦然），而与*用户选择的复选框无关*，因为这里`foreach`选择**每个**复选框`checkbox`并执行操作。

为了清楚起见，在执行操作之前存储`index`用户选择的复选框，并在操作之后**通过**提及存储的索引来调用复选框并检查它（在你的情况下，让它- 我认为）。`foreach``foreach``True`

这只是逻辑，我确信它是正确的。如果可能，我将尝试实现一些示例代码。

像这样修改你的`foreach`东西：

```
 //Store the index of the selected checkbox here as Integer (you can use e.RowIndex or e.ColumnIndex for it).
    private void chkItems_CheckedChanged(object sender, EventArgs e)
    {
        foreach (DataGridViewRow row in datagridview1.Rows)
        {
            DataGridViewCheckBoxCell chk = (DataGridViewCheckBoxCell)row.Cells[1];
            if (chk.Selected == true)
            {
                chk.Selected = false;
            }
            else
            {
                chk.Selected = true;
            }
        }
    }
    //write the function for checking(making true) the user selected checkbox by calling the stored Index 
```

上面的函数使所有的复选框都为真，包括用户选择的 CheckBox。我想这就是你想要的..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-26T15:03:36.803

下面的代码工作完美

使用复选框 CONTROL 选择/取消选择数据网格上的复选框列

```
 private void checkBox2_CheckedChanged(object sender, EventArgs e)
    {
        if (checkBox2.Checked == false)
        {
            foreach (DataGridViewRow row in dGV1.Rows)
            {
                DataGridViewCheckBoxCell chk = (DataGridViewCheckBoxCell)row.Cells[0];

                    chk.Value = chk.TrueValue;
            }
       }
       else if(checkBox2.Checked==true)
       {
            foreach (DataGridViewRow row in dGV1.Rows)
            {
                DataGridViewCheckBoxCell chk = (DataGridViewCheckBoxCell)row.Cells[0];
                chk.Value = 1;
                if (row.IsNewRow)
                {
                    chk.Value = 0;
                }
            }
        }
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-26T15:12:51.113

试试下面的代码它应该可以工作

```
private void checkBox2_CheckedChanged(object sender, EventArgs e) 
{
    if (checkBox2.Checked == false)
    {
        foreach (DataGridViewRow row in dGV1.Rows)
        {
            DataGridViewCheckBoxCell chk = (DataGridViewCheckBoxCell)row.Cells[0];
            chk.Value = chk.TrueValue;
        }
    }
   else if (checkBox2.Checked == true)
    {
        foreach (DataGridViewRow row in dGV1.Rows)
        {
            DataGridViewCheckBoxCell chk = (DataGridViewCheckBoxCell)row.Cells[0];
            chk.Value = 1;
            if (row.IsNewRow)
            {
                chk.Value = 0;
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-10-21T09:25:09.327

您可以在网格 CellClick 事件上使用此代码进行选中或未选中的单元格复选框：

```
private void Grid_CellClick(object sender, DataGridViewCellEventArgs e)
    {
        if (e.ColumnIndex == 0)
        {
            Grid.Rows[e.RowIndex].Cells[e.ColumnIndex].Value = (Grid.Rows[e.RowIndex].Cells[e.ColumnIndex].Value == null ? true : (!(bool)Grid.Rows[e.RowIndex].Cells[e.ColumnIndex].Value));
        }
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-24T20:44:30.993

虽然所有其他答案都是正确的，但我将添加另一个对我有用的简单选项：

```
var r = dataGridView.Rows[rIndex];
var c = r.Cells[cIndex];
var value = (bool) c.Value; 
c.Value = !value; 
```

压缩：

```
var r = dataGridView.Rows[rIndex];
r.Cells[cIndex].Value = !((bool) r.Cells[cIndex].Value) 
```

只要`cIndex`引用 type 的单元格，就`DataGridViewCheckBoxCell`可以正常工作。希望这对某人有所帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-08T10:35:55.817

你可以试试这段代码：

```
DataGridViewCheckBoxCell chk = (DataGridViewCheckBoxCell)dataGridView1.CurrentRow.Cells[0];
                dataGridView1.BeginEdit(true);
                if (chk.Value == null || (int)chk.Value == 0)
                {
                    chk.Value = 1;
                }
                else
                {
                    chk.Value = 0;
                }
                dataGridView1.EndEdit(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-13T06:56:12.833

```
// here is a simple way to do so

//irate through the gridview
            foreach (DataGridViewRow row in PifGrid.Rows)
            {
//store the cell (which is checkbox cell) in an object
                DataGridViewCheckBoxCell oCell = row.Cells["Check"] as DataGridViewCheckBoxCell;

//check if the checkbox is checked or not
                bool bChecked = (null != oCell && null != oCell.Value && true == (bool)oCell.Value);

//if its checked then uncheck it other wise check it
                if (!bChecked)
                {
                    row.Cells["Check"].Value = true;

                }
                else
                {
                    row.Cells["Check"].Value = false;

                }
            } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-11-26T15:09:46.280

我遇到了同样的问题，即使使用此处提供的解决方案也无法正常工作。复选框根本不会改变，它们的值将保持为空。我花了很长时间才意识到自己的愚蠢：

原来，我`form1.PopulateDataGridView(my data)`在调用 Form 派生类 Form1*之前*调用了`form1.Show()`. 当我更改顺序时，即先调用`Show()`，然后读取数据并填写复选框，该值没有保持为空。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-06-03T10:43:22.233

如果单元格是在代码中创建的，则下面的代码允许用户取消/选中 DataGridView 中的复选框

```
private void gvData_CellClick(object sender, DataGridViewCellEventArgs e)
{
    DataGridViewCheckBoxCell chk = (DataGridViewCheckBoxCell)gvData.Rows[e.RowIndex].Cells[0];

    if (chk.Value == chk.TrueValue)
    {
        gvData.Rows[e.RowIndex].Cells[0].Value = chk.FalseValue;
    }
    else
    {
        gvData.Rows[e.RowIndex].Cells[0].Value = chk.TrueValue;
    }

} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-11-11T16:47:45.333

这是您可以尝试的另一个示例

```
private void dataGridView_CellContentClick(object sender, DataGridViewCellEventArgs e)
    {
        if (e.ColumnIndex == dataGridView.Columns["Select"].Index)
        {
            dataGridView.EndEdit();

            if ((bool)dataGridView.Rows[e.RowIndex].Cells["Select"].Value)
            {
                //-- checking current select, needs to uncheck any other cells that are checked
                foreach(DataGridViewRow row in dataGridView.Rows)
                {
                    if (row.Index == e.RowIndex)
                    {
                        dataGridView.Rows[row.Index].SetValues(true);
                    }
                    else
                    {
                        dataGridView.Rows[row.Index].SetValues(false);
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-11-09T18:08:21.207

所有的铸造都会导致错误，我在这里尝试过没有任何工作，所以我摆弄了一下并让它工作。

```
 foreach (DataGridViewRow row in dataGridView1.Rows)
        {
            if (row.Cells[0].Value != null && (bool)row.Cells[0].Value)
            {
                Console.WriteLine(row.Cells[0].Value);
            }

        } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-04-16T13:07:40.077

我使用 CellMouseUp 事件。我检查正确的列

```
if (e.ColumnIndex == datagridview.Columns["columncheckbox"].Index) 
```

我将实际单元格设置为 DataGridViewCheckBoxCell

```
dgvChkBxCell = datagridview.Rows[e.RowIndex].Cells[e.ColumnIndex] as DataGridViewCheckBoxCell; 
```

然后检查是否使用 EditingCellFormattedValue 进行检查

```
if ((bool)dgvChkBxCell.EditingCellFormattedValue) { } 
```

您必须使用 KeyUp 事件检查键盘输入并检查 .value 属性并检查 CurrentCell 的列索引是否与复选框列匹配。该方法不提供 e.RowIndex 或 e.ColumnIndex。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-09-28T11:54:55.660

在清除选择后对我有用，BeginEdit 并更改 girdview 行并结束编辑模式。

```
 if (dgvDetails.RowCount > 0)
                    {
                        dgvDetails.ClearSelection(); 
                        dgvDetails.BeginEdit(true); 

                        foreach (DataGridViewRow dgvr in dgvDetails.Rows)
                        {
                            dgvr.Cells["cellName"].Value = true;
                        }
                        dgvDetails.EndEdit();
                    } 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-12-04T10:22:15.843

我就是这样做的。

```
private void Grid_CellClick(object sender, DataGridViewCellEventArgs e)
{

    if(Convert.ToBoolean(this.Grid.Rows[e.RowIndex].Cells["Selected"].Value) == false)
    {
        this.Grid.Rows[e.RowIndex].Cells["Selected"].Value = true;
    }
    else
    {
        this.productSpecGrid.Rows[e.RowIndex].Cells["Selected"].Value = false;
    }
} 
```

# mysql - MySQL搜索用户，点朋友在上面

> ID：13338840
> 
> 赞同：2
> 
> 时间：2012-11-12T05:34:02.643
> 
> 标签：mysql, sql

*   我有一个功能可以在我的网站上搜索用户，
*   我的网站上还为朋友提供了功能。
*   我有一个查询要在我的网站上搜索正确的用户，并且
*   我有一个查询可以确定用户是朋友的用户，他们都可以正常工作，

所以我需要帮助是将两者结合起来，在其他用户之前订购朋友。

搜索查询：

```
SELECT userID, fname, lname, 
FROM names 
WHERE (
    fname LIKE '".$term."%' 
    OR lname LIKE '".$term."%' 
    OR CONCAT(fname, ' ', lname) LIKE '".$term."%'
      ) 
AND userID!=$session 
ORDER BY fname ASC, lname ASC 
LIMIT 10 
```

好友查询：

```
SELECT CASE WHEN userID=$session 
            THEN userID2 
            ELSE userID 
            END AS friendID 
FROM friends
WHERE (
       userID=$session 
       OR userID2=$session
       ) 
AND state='1' 
```

所以，一个比较两者的陈述应该是这样的，`IF names.userID=friends.friendID`

现在我在stackoverflow上发现了一个用户对类似问题的建议，这似乎是一种简单的方法，但是我不完全确定如何将它添加到我的特定朋友查询中，因为它更像是一个复杂的查询。

```
SELECT
    posting.id,
    IF(a.friend_id = b.criteria, 1, 0) AS is_friend
...
ORDER BY is_friend DESC, posting.id DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:11:52.513

使用外连接（左连接）将您的第一个查询返回的用户列表与您的第二个查询生成的朋友列表连接起来。现在您将能够根据第二行集是否匹配的事实进行排序：如果匹配，则相应的行应该首先出现。

这是您如何实现上述内容的示例：

```
SELECT
  n.userID,
  n.fname,
  n.lname
FROM names n
LEFT JOIN (
  SELECT CASE WHEN userID=$session 
              THEN userID2 
              ELSE userID 
              END AS friendID 
  FROM friends
  WHERE (
         userID=$session 
         OR userID2=$session
         ) 
  AND state='1'
) f
ON n.userID = f.friendID
WHERE (
    n.fname LIKE '".$term."%' 
    OR n.lname LIKE '".$term."%' 
    OR CONCAT(n.fname, ' ', n.lname) LIKE '".$term."%'
      ) 
AND n.userID!=$session 
ORDER BY (f.friendID IS NULL), n.fname ASC, n.lname ASC 
LIMIT 10 
```

第一个排序标准`(f.friendID IS NULL)`评估`false`是否存在匹配`f`行，即用户是否是朋友，`true`否则评估。因此，由于`false`sort before `true`，朋友将排在非朋友之前。

# perforce - 如何在 Perforce“仓库”之间移动文件夹

> ID：13338841
> 
> 赞同：6
> 
> 时间：2012-11-12T05:34:15.310
> 
> 标签：perforce, depot

前几天意外删除了我的 Svn 存储库后，我想尝试其他的东西，我选择了 Perforce 作为我当前的版本控制工具测试场。它进展顺利，我喜欢在 Perforce 中看到的东西。

这是我的问题。我已将文件提交到我的 Perforce 服务器，然后使用我的客户端电脑从 Perforce 主服务器获取这些项目。现在一切都很好，除了我意识到可以在 Perforce 中使用多个“仓库”，而且对我来说，我应该将其中一些项目转移到另一个仓库 fpr 为了组织，也许出于安全原因客栈。

我一直在寻找一些答案，我找到了其中的几个，但是我无法产生任何预期的结果，因此我在这里寻找一些专家建议。

我尝试过的页面之一是这个

[http://kb.perforce.com/article/24/renaming-depot-directories](http://kb.perforce.com/article/24/renaming-depot-directories)

似乎提供了一个解决方案，但是我无法将文件从一个仓库移动到同一服务器进程上的另一个仓库。页面中的示例适用于将某些文件夹移动到同一仓库中的文件夹。该示例似乎演示了移动到同一仓库下的另一个文件夹。

因此，我正在寻找一种合理且安全的方法将我的主 Perforce 软件仓库文件夹移动到同一服务器上的另一个软件仓库，并且自然不会丢失任何工作。

这就是我想要的

- 当前的

```
//Depot-A
 -->folder1
 -->folder2 
```

- 我想

```
//Depot-A
 -->folder1

//Depot-B
 -->folder2 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T13:44:26.550

在不同的 depot 之间移动文件与在同一 depot 内的文件夹之间移动文件没有什么不同，只是目标 depot 必须已经存在。使用您的示例，并假设“Depot-B”尚不存在，将“folder2”从“Depot-A”移动到“Depot-B”，您只需执行以下操作：

```
p4 depot Depot-B
p4 edit //Depot-A/folder2/...
p4 move //Depot-A/folder2/... //Depot-B/folder2/...
p4 submit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-07T16:05:40.127

这是我要做的（简而言之）：如果您打开一个 P4V 会话并选择提交的更改列表选项卡，您可以过滤此集以仅显示与您要移动的部分相关的更改。这是您将在要填充的新仓库（甚至服务器）上复制的更改集。这个想法是您在一侧解开存档文件，并在目的地以相同的方式将它们卷起来。所以这个过程很简单（1）同步到第一个变更列表，（2）将该集合集成到新位置，（3）检查该集合，以及（4）继续下一个变更列表。显然，这可以编写脚本。我目前正在使用 python 编写脚本，但是任何带有 Perforce 函数库的体面的脚本语言都可以使用。几个并发症：更改列表将按顺序与原始列表相同，但原始时间不会 - 它们将是“当前的”。当然，如果有标签，如果您希望保留它们，则需要将其映射到新位置。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-12T15:07:43.693

我认为额外的仓库不会增加安全性。多个仓库场景主要出现在非常大的安装中。

附加软件仓库的主要好处是您可以更好地控制服务器的磁盘空间布局，例如，如果您的存储库太大而无法容纳单个文件系统并且您需要扩展它以使用多个文件系统。创建额外仓库的第二个原因是您是否必须拥有专门类型的仓库；例如，如果您希望创建一个 Streams depot 以使用 Perforce Streams 功能。

对于您所描述的情况，在可预见的将来，将所有文件都放在 Depot A 下可能没问题。

# ruby - 在正则表达式中散列后转义量词大括号

> ID：13338847
> 
> 赞同：1
> 
> 时间：2012-11-12T05:35:04.087
> 
> 标签：ruby, regex

在正则表达式中转义哈希字符然后用大括号量化的正确方法是什么？我想检测在给定次数内重复的哈希字符序列。我想要类似的东西：

```
/#{1, 6}/ 
```

没有插值。我不能完全关闭正则表达式的插值，因为我在正则表达式的其他部分使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T05:37:26.607

使用反斜杠`\`作为转义字符，例如

```
 /\#{1, 6}/ 
```

# php - 如何使用php从目录中删除文件

> ID：13338851
> 
> 赞同：4
> 
> 时间：2012-11-12T05:35:27.623
> 
> 标签：php

从标题中您可以看到我正在寻找一种从不同目录中删除文件的方法。我在这个主题上能找到的只是 unlink()，但从我在文档中读到的内容以及从测试该函数来看，它会从你放入的代码中删除文件名。让我觉得这与关闭文件非常相似. 我要做的实际上是使用代码删除一个文件，这样我的用户就不必手动转到文件夹并找到他们刚刚从 mysql 数据库中删除的歌曲。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-12T05:37:13.347

[unlink()](http://php.net/manual/en/function.unlink.php)将删除服务器上的文件

[rmdir()](http://php.net/manual/en/function.rmdir.php)将删除服务器上的目录

注意：一旦它消失了，它就消失了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T05:37:06.503

[unlink](http://ca3.php.net/unlink)真正从磁盘中删除指定文件

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T05:39:44.433

我们可以通过使用 unlink 命令在 PHP 中给出其 URL 或路径来删除文件。此命令仅在授予文件夹或文件写入权限时才有效。没有这个，删除命令将失败。这是[删除文件](http://www.plus2net.com/php_tutorial/php-file-delete.php)的命令。

```
$path="images/all11.css";
if(unlink($path)) echo "Deleted file "; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-12T05:38:41.750

*   [realpath](http://de2.php.net/manual/en/function.realpath.php) — 返回规范化的绝对​​路径名
*   [is_readable](http://de2.php.net/manual/en/function.is-readable.php) — 判断文件是否存在且可读
*   [unlink](http://de2.php.net/manual/en/function.unlink.php) — 删除文件

通过 realpath 运行你的文件路径，然后检查返回的路径是否存在，如果存在，取消链接。

# database - 如何从 Windows 窗体应用程序生成 pdf 或文本文件

> ID：13338853
> 
> 赞同：0
> 
> 时间：2012-11-12T05:35:41.853
> 
> 标签：database, winforms, pdf, itextsharp, genfromtxt

我正在创建一个附加数据库的桌面 Windows 表单应用程序。第一个屏幕包含一个用户应该填写的表单，如果他/她想打印这个表单。有没有任何解决方案可以创建 pdf 格式的文件动态地，该用户可以打印吗？

此外，记录也保存在数据库中。我使用过 iTextSharp，它适用于 Web 应用程序。但我想从 Windows 窗体应用程序生成一个文件。请帮助提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:27:10.870

使用任何报告服务，如 sap 水晶报告或出生，然后在桌面应用程序中通过存储过程填充数据更改。创建使用相同存储过程的报告。

从桌面应用程序调用报告后，您可以从报告中选择导出 pdf、excel 等。

# java - 如何根据其他一个选定值更新选择菜单？

> ID：13338861
> 
> 赞同：5
> 
> 时间：2012-11-12T05:36:37.153
> 
> 标签：java, jsf, primefaces, selectonemenu, dynamic-content

我在尝试制作`selectOneMenu`内容时遇到了麻烦，这取决于另一个选择的值。第一个的内容来自我的数据库中的一个表并且工作正常，但第二个应该来自另一个表，但我不能让它工作。这是我的`index.html`，我只是想证明这是如何工作的：

* * *

```
 <h:outputLabel value="Estado" styleClass="requiredLbl"/>
        <p:selectOneMenu id="Estado" value="#{beanInscripcion.id_estado}" valueChangeListener="#{beanInscripcion.buscarMunicipios(event)}" >  
            <f:selectItem itemLabel="Elegir Estado" itemValue="" />
            <f:selectItems value="#{beanInscripcion.estados}"  
                           var="edo" itemLabel="#{edo.nombre_estado}" itemValue="#{edo.id_estado}" />  
            <p:ajax update="Municipio"  listener="#{beanInscripcion.buscarMunicipios(event)}" />
        </p:selectOneMenu> 
        <p:separator /> 
        <h:outputLabel value="Municipio" styleClass="requiredLbl"/>
        <p:selectOneMenu id="Municipio" value="municipio">  
            <f:selectItems value="#{beanInscripcion.municipios}"  
                           var="mun" itemLabel="#{mun.nombre_municipio}" itemValue="#{mun.nombre_municipio}" />  
        </p:selectOneMenu> 
```

* * *

这是我的 Bean 的部分，我应该在其中获取第二个菜单的内容：

* * *

```
@ManagedBean(name = "beanInscripcion")
@ViewScoped
public class BeanInscripcion implements Serializable {

    static String strURL;
    private List<Estado> estados; 
    private List<Municipio> municipios;
    private int id_estado;
    public BeanInscripcion() throws SQLException{
            estados = new ArrayList<Estado>();
            buscarEstados();
    }

    public void buscarEstados() throws SQLException {
        Connection connection = getConnection();
        Statement statement = connection.createStatement();
        ResultSet result = statement.executeQuery("SELECT * FROM estado");
        result.beforeFirst();
        while (result.next()) {
            Estado estado = new Estado();
            estado.setId_estado(result.getInt("id_estado"));
            estado.setNombre_estado(result.getString("nombre_estado"));
            estados.add(estado);
        }
    }

    public void buscarMunicipios() throws SQLException {
        Connection connection = getConnection();
        Statement statement = connection.createStatement();
        ResultSet result = statement.executeQuery("SELECT id_municipio, nombre_municipio FROM municipio WHERE Estado_id_estado = '" + id_estado + "'");
        result.beforeFirst();
        while (result.next()) {
            Municipio municipio = new Municipio();
            municipio.setId_municipio(result.getInt("id_municipio"));
            municipio.setNombre_municipio(result.getString("nombre_municipio"));
            municipios.add(municipio);
        }
    }

    public Connection getConnection() {
        try {
            strURL = "jdbc:mysql://localhost:3306/mydb";
            Class.forName("com.mysql.jdbc.Driver");
            return DriverManager.getConnection(strURL, "root", "root");
        } catch (SQLException ex) {
            return null;
        } catch (ClassNotFoundException ex) {
            return null;
        }
    }

    public List<Estado> getEstados() {
        return estados;
    }

    public void setEstados(List<Estado> estados) {
        this.estados = estados;
    }

    public List<Municipio> getMunicipios() {
        return municipios;
    }

    public void setMunicipios(List<Municipio> municipios) {
        this.municipios = municipios;
    }

    public int getId_estado() {
        return id_estado;
    }

    public void setId_estado(int id_estado) {
        this.id_estado = id_estado;
    }
} 
```

* * *

我已经为此工作了几个小时，但仍然一无所获，我真的很着急，所以如果你在这里给我一些帮助，我将不胜感激。非常感谢您的关注：D

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T06:18:32.790

1.  `value="municipio"`in`<p:selectOneMenu id="Municipio" value="municipio">`意味着该下拉列表中的值永远不会改变，因为您已经有效地将该字段上的值硬编码为始终不变`municipio`（即使这样也会导致转换失败）。该`value`属性应绑定到支持 bean 变量，如

    ```
     <p:selectOneMenu id="Municipio" value="#{beanInscripcion.municipio}" >  
        <f:selectItems value="#{beanInscripcion.municipios}"  
                       var="mun" itemLabel="#{mun.nombre_municipio}" itemValue="#{mun.nombre_municipio}" />  
    </p:selectOneMenu> 
    ```

    在你的支持豆中，有

    ```
     Municipio municipio;
      //getter and setter 
    ```

2.  `event`从中删除参数`<p:ajax update="Municipio" listener="#{beanInscripcion.buscarMunicipios(event)}" />`。它应该是

    ```
    <p:ajax update="Municipio"  listener="#{beanInscripcion.buscarMunicipios}" /> 
    ```

3.  删除`valueChangeListener="#{beanInscripcion.buscarMunicipios(event)}"`. 这是不必要的，因为您已经`<p:ajax/>`定义了一个事件

4.  您最终会在提交该表单时遇到问题，因为您还没有为该`Municipio`自定义类型创建 JSF 转换器。如果您`String`在选择的组件中使用类型以外的任何内容，则它是强制性的。[在此处](https://stackoverflow.com/a/13189326/1530938)查看转换器/转换的简短介绍

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T18:00:04.243

我正在使用 Primefaces，这很简单。我有 2 个 seleceOneMenus，一个用于主题（父项），另一个用于主题（子项）。

```
<h:selectOneMenu id="subject" value="#{QuestionsMB.selectedSubjectId}" var="selectedSubject">  
                <f:selectItem itemLabel="Select Subject" noSelectionOption="true" />
                <f:selectItems value="#{SubjectsMB.subjectsList}" var="selectedSubject" itemValue="#{selectedSubject.id}" itemLabel="#{selectedSubject.subjectName}" />
                <p:ajax update="topic" />
            </h:selectOneMenu>

            <h:selectOneMenu id="topic" value="#{QuestionsMB.selectedTopicId}" var="selectedTopic">  
                <f:selectItem itemLabel="Select Topic" noSelectionOption="true" />
                <f:selectItems value="#{TopicsMB.getTopicsListBySubjectId(QuestionsMB.selectedSubjectId)}" var="selectedTopic" itemValue="#{selectedTopic.id}" itemLabel="#{selectedTopic.topicName}" />
            </h:selectOneMenu> 
```

请注意，当主题 selectonemenu 更改时，主题菜单会根据主题 ID 更改。我通过编辑 hibernate getList() 函数，在 Topics Managed Bean（子 selectonemenu 的托管 bean）中创建了一个简单的函数，如下所示：

```
public List<Topics> getTopicsListBySubjectId(String subjectID) 
    {
        Topics topic = new Topics();
        List<Topics> TopicsList = new ArrayList<Topics>();

        if(subjectID.length() != 0)
        {
            topic.setSubjectId(Integer.parseInt(subjectID));
            TopicsList = getTopicsService().getTopicsBySubjectId(topic);
        }
        else
        {   
            TopicsList.addAll(getTopicsService().getTopics());
        }
        return TopicsList;
    } 
```

事情就像一个魅力...... :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T05:45:38.143

我知道 RichFaces 的解决方案，我很确定它适用于 PrimeFaces，因为组件几乎相同：

[http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=ajax&sample=selectsUpdates&skin=blueSky](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=ajax&sample=selectsUpdates&skin=blueSky)

编辑：这是应用于您的代码的翻译：

```
<h:outputLabel value="Estado" styleClass="requiredLbl"/>
<p:selectOneMenu id="Estado" value="#{beanInscripcion.id_estado}" valueChangeListener="#{beanInscripcion.buscarMunicipios(event)}" >  
    <f:selectItem itemLabel="Elegir Estado" itemValue="" />
    <f:selectItems value="#{beanInscripcion.estados}" var="edo" itemLabel="#{edo.nombre_estado}" itemValue="#{edo.id_estado}" />  
    <p:ajax update="second" process="@this" listener="#{beanInscripcion.buscarMunicipios(event)}" />
</p:selectOneMenu>
<p:separator />
<p:outputPanel id="second">
    <h:outputLabel rendered="#{not empty beanInscripcion.id_estado}" value="Municipio" styleClass="requiredLbl"/>
    <p:selectOneMenu rendered="#{not empty beanInscripcion.id_estado}" id="Municipio" value="municipio">  
        <f:selectItems value="#{beanInscripcion.municipios}" var="mun" itemLabel="#{mun.nombre_municipio}" itemValue="#{mun.nombre_municipio}" />  
    </p:selectOneMenu>
</p:outputPanel> 
```

而对于 bean ：

@ManagedBean(name = "beanInscripcion") @RequestScoped 公共类 BeanInscripcion 实现 Serializable {

```
static String strURL;
private List<Estado> estados; 
private List<Municipio> municipios;
private int id_estado;
public BeanInscripcion() throws SQLException{
        estados = new ArrayList<Estado>();
        buscarEstados();
}

public void buscarEstados() throws SQLException {
    Connection connection = getConnection();
    Statement statement = connection.createStatement();
    ResultSet result = statement.executeQuery("SELECT * FROM estado");
    result.beforeFirst();
    while (result.next()) {
        Estado estado = new Estado();
        estado.setId_estado(result.getInt("id_estado"));
        estado.setNombre_estado(result.getString("nombre_estado"));
        estados.add(estado);
    }
}

public void buscarMunicipios() throws SQLException {
    Connection connection = getConnection();
    Statement statement = connection.createStatement();
    ResultSet result = statement.executeQuery("SELECT id_municipio, nombre_municipio FROM municipio WHERE Estado_id_estado = '" + id_estado + "'");
    result.beforeFirst();
    while (result.next()) {
        Municipio municipio = new Municipio();
        municipio.setId_municipio(result.getInt("id_municipio"));
        municipio.setNombre_municipio(result.getString("nombre_municipio"));
        municipios.add(municipio);
    }
}

public Connection getConnection() {
    try {
        strURL = "jdbc:mysql://localhost:3306/mydb";
        Class.forName("com.mysql.jdbc.Driver");
        return DriverManager.getConnection(strURL, "root", "root");
    } catch (SQLException ex) {
        return null;
    } catch (ClassNotFoundException ex) {
        return null;
    }
}

public List<Estado> getEstados() {
    return estados;
}

public void setEstados(List<Estado> estados) {
    this.estados = estados;
}

public List<Municipio> getMunicipios() {
    return municipios;
}

public void setMunicipios(List<Municipio> municipios) {
    this.municipios = municipios;
}

public int getId_estado() {
    return id_estado;
}

public void setId_estado(int id_estado) {
    this.id_estado = id_estado;
} 
```

}

希望它会工作，因为它没有经过测试！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T06:17:27.117

这只是一个例子。尝试为您的程序提供参考。

例子.xhtml

```
 <p:selectOneMenu value="#{SelectOneMenuBean.selectedValue}" 
                         style="width:195px;" required="true" id="countryMenu">
            <p:ajax update="cityMenu"/>
            <f:selectItems value="#{SelectOneMenuBean.countries}"/>
        </p:selectOneMenu>
        <p:selectOneMenu style="width:195px;" required="true" id="cityMenu">
            <f:selectItems value="#{SelectOneMenuBean.cities}"/>
        </p:selectOneMenu> 
```

SelectOneMenuBean.java

```
@ManagedBean(name="SelectOneMenuBean")
public class SelectOneMenuBean {
    private String selectedValue;

    public String getSelectedValue() {
        return selectedValue;
    }

    public void setSelectedValue(String selectedValue) {
        this.selectedValue = selectedValue;
    }

    public String[] getCountries() {
        return new String[] {"AAA", "BBB", "CCC", "DDD"};
    }

    public String[] getCities() {
        if(selectedValue != null && selectedValue.equals("AAA")) {
            return new String[] {"City_1 of AAA", "City_2 of AAA", "City_3 of AAA"};
        } else if(selectedValue != null && selectedValue.equals("BBB")) {
            return new String[] {"City_1 of BBB", "City_2 of BBB", "City_3 of BBB"};
        } else if(selectedValue != null && selectedValue.equals("CCC")) {
            return new String[] {"City_1 of CCC", "City_2 of CCC", "City_3 of CCC"};
        } else if(selectedValue != null && selectedValue.equals("CCC")) {
            return new String[] {"City_1 of CCC", "City_2 of CCC", "City_3 of CCC"};
        } 
        return new String[] {"No City"};
    }
} 
```

# c++ - 如何使用 Windows API WriteFile 将 ASCII 字符串写入文件？

> ID：13338863
> 
> 赞同：1
> 
> 时间：2012-11-12T05:36:57.760
> 
> 标签：c++, c, windows, file-io

我知道我们可以用来`WriteFile`向文件中写入一些东西：

```
BOOL WINAPI WriteFile (HANDLE hFile, 
                       LPCVOID lpBuffer, 
                       DWORD numOfBytesToWrite,
                       LPDOWRD lpNumOfBytesWritten,
                       LPOVERLAPPED lpOverlapped); 
```

但是我们如何使用这个函数将 ASCII 字符串写入文件呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T05:40:58.537

通常是这样的：

```
WriteFile(your_file, your_string, strlen(your_string), &written, NULL); 
```

不过，您通常不想这样做——除非您的字符串很长，否则如果您使用类似的东西`fprintf`或`fputs`利用标准库中内置的缓冲，它几乎总是更有效（即更快）。

# linux - linux命令末尾的“&”是什么意思？

> ID：13338870
> 
> 赞同：136
> 
> 时间：2012-11-12T05:37:22.643
> 
> 标签：linux, shell, unix

我是系统管理员，我被要求运行一个 linux 脚本来清理系统。

命令是这样的：

```
perl script.pl > output.log & 
```

所以这个命令是以`&`符号结尾的，有什么特别的意义吗？

我对 shell 有基本的了解，但我以前从未见过。

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2012-11-12T05:41:36.943

使`&`命令在后台运行。

来自`man bash`：

> 如果命令由控制运算符**&**终止，则 shell 在子 shell 的后台执行命令。shell 不等待命令完成，返回状态为 0。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-03-18T18:13:48.570

如果没有另行通知，命令将占据前台。您只有一个“前台”进程在单个 shell 会话中运行。& 符号指示命令在后台进程中运行，并立即返回命令行以获取其他命令。

```
sh my_script.sh & 
```

shell 会话关闭后，后台进程将*不会*保持活动状态。[SIGHUP](https://en.wikipedia.org/wiki/SIGHUP)终止所有正在运行的进程。反正默认。如果您的命令长时间运行或无限期运行（即：微服务），您需要使用 nohup 对其进行 pr-pend，以便在您断开会话后它仍然运行：

```
nohup sh my_script.sh & 
```

**编辑：**使用 & 时，后台进程的关闭似乎确实存在灰色区域。请注意，shell*可能会*根据您的操作系统和本地配置（尤其是在 CENTOS/RHEL 上）关闭您的进程： [https](https://serverfault.com/a/117157) ://serverfault.com/a/117157 。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-10-23T17:38:17.430

此外，您可以使用“&”符号通过一 (1) 个 ssh 连接运行多个进程，以保持最少的终端数量。例如，我有一个进程侦听消息以提取文件，第二个进程侦听消息以上传文件：使用“&”我可以在一个终端中运行这两个服务，通过单个 ssh 连接到我的服务器.

这些通过“&”运行的进程在 ssh 会话关闭后也将“保持活动状态”。如果与服务器的 ssh 连接中断并且没有使用终端多路复用器（screen、tmux、byobu），则非常简洁和有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-12-23T07:39:35.027

我不确定，但我现在正在读一本书，我得到的是一个程序需要处理它的信号（就像我按下时一样`CTRL-C`）。现在程序可以`SIG_IGN`用来忽略所有信号或`SIG_DFL`恢复默认动作。

现在，如果您这样做，`$ command &`那么这个作为后台进程运行的进程只会忽略所有将发生的信号。对于前台进程，这些信号不会被忽略。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-05T19:42:05.443

如果您有一个命令执行并且没有快速返回状态 0（提示控制）。

例如：

1.  命令`gedit`启动默认编辑器`gedit`UI。

2.  命令`eclipse`启动 Eclipse IDE。

此类命令不断在终端中抛出活动日志，并且不返回命令提示符。

问题是，如何在后台运行这样的命令，这样，我们将得到命令终端，我们可以使用终端执行其他任务。

答案是：通过附加`&`在这样的命令之后。

```
 user@mymachine:~$ <command> & 
```

例子：

```
user@mymachine:~$ <command> gedit &
user@mymachine:~$ <command> eclipse & 
```

# ubuntu-10.04 - 无法启动服务freeradius ubuntu 10.04

> ID：13338872
> 
> 赞同：0
> 
> 时间：2012-11-12T05:37:36.373
> 
> 标签：ubuntu-10.04, freeradius

我对启动服务 freeradius 有疑问。当我尝试使用命令 /etc/init.d/freeradius stars 启动服务 freeradius 时，它的状态失败

“ **/usr/sbin/freeradius：加载共享库时出错：libfreeradius-radius -2.1.8.so：无法打开共享对象文件：没有这样的文件或目录**”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T11:53:34.997

你必须给freeradius使用root权限

```
$ sudo freeradius -X 
```

或者

```
$ start service freeradius 
```

# objective-c - 使用 Objective C 进行强制转换

> ID：13338873
> 
> 赞同：1
> 
> 时间：2012-11-12T05:37:39.727
> 
> 标签：objective-c, oop, class, core-data, objc-protocol

假设我有一个`NSManagedObject`名为`MBManagedSquare`and的子类`MBManagedCircle`。一个`MBManagedSquare`和`MBManagedCircle`定义一个方法`prepareFromDictionary:(NSDictionary*)dic`，它们的实现是不同的。

说我有这个代码：

```
NSString *type = // could be @"MBManagedSquare" or @"MBManagedCircle"
NSEntityDescription *desc = [NSEntityDescription entityForName:type inManagedObjectContext:_context];
NSManagedObject *object = [[NSManagedObject alloc] initWithEntity:desc insertIntoManagedObjectContext:_context]; 
```

因此，Core Data 的实体类型是通过`type`字符串动态确定的。所以我只知道它是一个`NSManagedObject`.

我想要做的是调用`prepareFromDictionary:`正确类的方法。

因此，如果类型是“MBManagedSquare”，我想将对象转换为`MBManagedSquare`，然后调用

```
[castedObject prepareFromDictionary:dic]; 
```

我尝试做的是：

```
Class class = NSClassFromString(type);
class *castedObject = (class*)object; 
```

但我得到一个预期的表达式错误。我不确定这是否可能。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:51:49.433

如果选择器及其参数匹配，您无需担心调用正确的类——ObjC 具有大量动态调度功能。

就实现而言，这两种方法都很常见：

*   使用您想要的界面创建一个公共基础
*   或创建两个类都采用的协议：

MON协议.h

```
@protocol MONManagedShapeProtocol < NSObject >
- (void)prepareFromDictionary:(NSDictionary *)pDictionary;
@end 
```

然后（因为您知道它是两种类型之一，`MBManagedSquare`或者`MBManagedCircle`）从基础派生或采用协议并声明您的变量，如：

```
// if subclass
MBManagedShape * castedObject = (MBManagedShape*)object; 
```

*或者*

```
// if protocol
NSManagedObject<MONManagedShapeProtocol>* castedObject =
                        (NSManagedObject <MONManagedShapeProtocol>*)object; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:01:14.157

那里不需要演员表。对象可以是 or 并且函数只存在一次。检查它是否存在：responsToSelector:@selector(prepareFromDictionary:)

# android - 如何以编程方式引用 在android中的xml文件中

> ID：13338878
> 
> 赞同：8
> 
> 时间：2012-11-12T05:38:49.257
> 
> 标签：android, xml, textview

我是 android 编程新手，想知道这一点：

我在 strings.xml 文件中定义了 3 个字符串： `<resources> <string name="one">First Click </string> <string name="two">Second Click </string> <string name="three">Third Click </string> <resources>`

和一个文本视图，它显示 strings.xml 文件中的第一个字符串。当用户单击按钮时，我不想 `settext("******")`用来更改文本视图的文本。我怎样才能让 textview 切换到已经在 strings.xml 文件中定义的文本，比如从

> 第一次点击到第二次点击

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-12T05:44:51.473

利用`setText(getResources().getString(R.string.one));`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T07:19:18.527

要确定与变量一起使用的字符串，您必须使用开关，如下所示

```
switch(anyInt) {
    case 1://if the int == 1, then the textview will be set to this
        tv.setText(getResources().getString(R.string.one);
        break;
    case 2://if the into == 2 then the TV will be set to this
        tv.setText(getResources().getString(R.string.two
        break;
    default:
        tv.setText("into does not have value 1-2")
} 
```

根据需要添加尽可能多的这些语句，我相信即使你有很多语句它也非常节省内存

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-12T05:42:19.370

获取应用程序的资源，然后获取带有您要查找的 ID 的字符串。

```
getResources().getString(R.string.one); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-12T05:45:15.807

如果我错了，我想你需要这个，然后回复我。

尝试这个。

```
getResources().getString(R.string.app_name); 
```

您只需阅读应用程序的资源。您可以通过`getResources()`资源类使用应用程序的任何资源。

现在，在这里您需要读取字符串形式`String.xml`，以便您可以使用`getString()`which 是资源的方法，以便您现在获得输出。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-12T05:46:14.737

这会给你想要的效果：

```
yourEditText.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View view) {

        String text = yourEditText.getText().toString();
        if(text.equals(getResources().getString(R.string.one)) {

            yourEditText.setText(getResources().getString(R.string.two)
        } else if(text.equals(getResources().getString(R.string.two)) {

            yourEditText.setText(getResources().getString(R.string.three)
        } else  {

            yourEditText.setText(getResources().getString(R.string.one)
        }
    }); 
```

# android - 如何在没有布局充气器的情况下创建片段视图？

> ID：13338879
> 
> 赞同：0
> 
> 时间：2012-11-12T05:39:09.623
> 
> 标签：android, android-fragments, layout-inflater

我正在研究`Fragments`并`Android`希望以编程方式夸大我的观点 - 没有`LayoutInflater`. 在我的`class`, which 中`extends Fragment`，我想做一些基本的事情，比如：

```
@Override
public View onCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
{
    return new View(inflater.getContext());
} 
```

但是在我`FragmentActivity`的这个 onCreate 方法中：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
} 
```

这`main.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <fragment class="edu.self.myFragment" 
        android:id="@+id/titles"
        android:tag="foo"
        android:layout_width="50px"
        android:layout_height="50px" />

</LinearLayout> 
```

我收到布局错误：

```
11-11 23:25:18.142: E/AndroidRuntime(1162): Caused by: java.lang.IllegalArgumentException: Binary XML file line #12: Duplicate id 0x7f050000, tag foo, or parent id 0x0 with another fragment for edu.self.myFragment 
```

我需要做什么来修复这个错误？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-04T00:15:12.967

您不能对包含另一个片段中的片段的 xml 进行膨胀。您必须手动添加子片段。

# session - 会话超时后的主干 Collection.fetch()

> ID：13338884
> 
> 赞同：3
> 
> 时间：2012-11-12T05:39:49.920
> 
> 标签：session, backbone.js, asp.net-mvc-4

我在现有的 ASP.NET WebForm 网站中添加了一个 ASP.NET MVC4 子 Web 应用程序。整个网站正在使用`forms authentication`.

在我的 MVC4 客户端中，我`Backbone.js`用于构建应用程序，客户端应用程序很可能是一个 SPA。

一切正常，但会话超时后，我的应用程序不会重定向到登录页面。

我在 Collection.fetch 方法上尝试了错误回调，它在会话超时后尝试获取时被触发（这很好）。

但是，响应状态码为 200（OK），响应内容为登录页面内容。

所以，我的问题是，在错误处理程序中，我如何知道回调是由会话超时还是任何其他意外错误触发的？

如果确定，我应该如何让 Backbone 在引用当前页面时将页面重定向到登录页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:56:25.007

[这](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx)是菲尔·哈克在博客上写的

帖子摘录：

**可能的解决方案**

我将介绍一些我在网上看到的可能的解决方案，然后介绍我喜欢的一个。并不是说这些其他解决方案是错误的，而是它们仅在某些情况下是正确的。

**删除表单身份验证**

如果您不需要 FormsAuth，一个简单的解决方案是按照[本文的](http://blog.alexonasp.net/post/2011/08/23/Basic-Authentication-with-WCF-Web-API-hosted-in-IIS-Getting-a-404-Disable-Forms-Authentication-Redirection.aspx)建议删除表单身份验证模块。如果您的唯一目的是使用 ASP.NET 来托管 Web API 服务并且不需要表单身份验证，那么这是一个很好的解决方案。但如果您的应用程序既是 Web 应用程序又是 Web 服务，这不是一个很好的解决方案。

**注册一个 HttpModule 以将重定向转换为 401**

[这篇博文](http://amilagm.com/2010/11/prevent-forms-auth-from-redirecting-to-login-page-in-restful-wcf/)建议注册一个将任何 302 请求转换为 401 的 HTTP 模块。这种方法有两个问题。首先是它打破了重定向是合法的而不是 FormsAuth 的结果的情况。第二个是它需要手动配置一个 HttpModule。

**安装包 MembershipService.Mvc**

我的同事 Steve Sanderson 使用他的 MembershipService.Mvc 和 MembershipService.WebForms NuGet 包有一个更好的方法。这些包将 ASP.NET 成员身份公开为可以从多个设备调用的服务。

**来自此博客评论的更多信息**

我们遇到了同样的问题。但是我们所做的是挂钩到 AuthenticateRequest（就像您所做的那样），我们还检查了请求以查看它是否是 ajax（再次，就像您所做的那样）。但是此时，我们只是返回了一个类似 JSON 的内容，`{location: 'http://www.domain.com/path-to-login-page'}`并且我们只是在该方法中以 HTTP 代码 200 结束了响应。这样，jQuery 仍然得到一个 JSON 结果。但如果结果具有“位置”属性，我们只需将客户端重定向到登录页面。这就是我们的方式，它就像一个魅力。

# asp.net - 详细信息视图中的模板字段（链接按钮）的 Findcontrol 失败

> ID：13338890
> 
> 赞同：1
> 
> 时间：2012-11-12T05:40:51.147
> 
> 标签：asp.net

当 DetailsView 不处于只读模式时，我想将模板字段（链接按钮）设置为不可见。我创建了一个链接按钮来替换自动生成的“删除”按钮，并希望在编辑和插入时隐藏它。

```
<asp:DetailsView ID="resultDetailsView" runat="server" AutoGenerateRows="False" DataKeyNames="smo_code,id"
    DataSourceID="detailviewDataSource" Height="50px" Width="125px" OnItemInserting="resultDetailsView_ItemInserting"
    OnItemUpdating="resultDetailsView_ItemUpdating" OnItemUpdated="resultDetailsView_ItemUpdated"
    OnItemDeleted="resultDetailsView_ItemDeleted" OnItemInserted="resultDetailsView_ItemInserted"
    OnItemDeleting="resultDetailsView_ItemDeleting" OnModeChanging="resultDetailsView_ModeChanging"
    OnDataBound="resultDetailsView_DataBound" OnItemCommand="resultDetailsView_ItemCommand">
    <Fields>
        <asp:BoundField DataField="event" HeaderText="event" SortExpression="event" />
        <asp:TemplateField ShowHeader="False">
            <ItemTemplate>
                <asp:LinkButton ID="deleteLink" runat="server" CommandName="Delete" Text="Delete"
                    OnClientClick='return confirm("Are you sure you want to delete this item?");' />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:CommandField ShowDeleteButton="False" ShowEditButton="True" ShowInsertButton="True" />
    </Fields>
</asp:DetailsView> 
```

在后面的代码中，FINDCONTROL 返回 null：

```
protected void resultDetailsView_DataBound(object sender, EventArgs e)
{
    LinkButton deleteLink = (LinkButton)resultDetailsView.FindControl("deleteLink");
    if (resultDetailsView.CurrentMode == DetailsViewMode.ReadOnly)
    {
        deleteLink.Visible = true;
    }
    else
    {
        deleteLink.Visible = false;
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:31:05.097

您可以在 .DataBind() 方法之后执行此操作。这是一个很好的例子
[How to dynamic hide fields in a DetailsView (fields count is always 0)](https://stackoverflow.com/questions/12385599/how-to-dynamically-hide-fields-in-a-detailsview-fields-count-is-always-0)
甚至这也是一个很好的例子
[Listview/DetailsView: Hide a null field](https://stackoverflow.com/questions/1493048/listview-detailsview-hide-a-null-field)

# java - 接口是对象层次结构的一部分吗？

> ID：13338893
> 
> 赞同：4
> 
> 时间：2012-11-12T05:41:11.060
> 
> 标签：java, object, interface, extends, implements

请在下面找到解释该问题的代码片段。

```
public class Test {

/**
 * @param args
 */
public static void main(String[] args) {
    I ref = new B();
    ref.equals("");
}

}

interface I{

}

class A {
public void method(){

}
}

class B extends A implements I{

} 
```

请参考`main()`,`ref.equals()`允许但`ref.method()`不允许。为什么会这样？

编辑：对象是B（或A或任何其他类）的超类，但同样A也是B的超类。我的问题是为什么A的'method（）'在'ref'中不可见，即为什么允许 ref.equals() 而不允许 ref.method() ？这种方法可见性检查是如何完成的？它是否植根于JVM？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T05:44:12.237

那是因为您确实将其声明为 I：

```
I ref = new B(); 
```

您只会看到在 I 中声明的方法`and the methods from Object`。

当你这样做时：

将其声明为 A：

```
A ref = new B(); 
```

或将其声明为 B

```
B ref = new B(); 
```

或将其转换为 A

```
I ref = new B();
((A)ref).method() 
```

您将可以访问：

```
ref.method() 
```

如果您想查看 A 和 I 中的方法，并且要完整，您可以在它们之间转换您的对象。或者我也有一个工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T05:50:39.077

[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.10.2)声明 java.lang.Object 是所有没有任何超接口的接口的直接超类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T05:44:48.600

当您使用其接口引用对象时，例如

```
 I ref = new B(); 
```

那么您只能访问**接口和 Object 类方法**。在将对象转换为其类之前，您对**类方法没有任何可见性。**

如果要访问`method`在类中声明的，`A`则可以执行以下操作之一：

```
 I ref = new B();
   ((A)ref).method() 
```

或者

```
 A ref = new B();
    ref.method(); 
```

或者

```
 B ref = new B();
    ref.method(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T05:45:33.090

接口类型只能使用具体类来实例化，具体类默认情况下是 Object 的子类。因此，您可以在接口类型上调用 Object 中的方法。仅当在该接口或其超接口中声明时，才能在接口类型上调用所有其他自定义方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T05:45:48.533

如果通过接口引用对象，则只能访问接口公开的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T05:46:39.610

`ref.equals()`是允许的，因为`equals()`是来自对象的方法并且可用于所有子类（甚至 B 因为 B 隐式扩展`Object`）。

如果 method() 不在 B 中，则当您的语句为`I i = new B()`.

# c# - WebClient：忽略 HTTP 500

> ID：13338894
> 
> 赞同：7
> 
> 时间：2012-11-12T05:41:23.977
> 
> 标签：c#, .net, webclient

我正在编写一个程序，它从服务器检索一些数据，对其进行一些操作，并将输出保存到 csv 文件。我遇到的问题是服务器（我不负责）总是返回 HTTP 500 内部服务器错误。我已经与负责它的团队进行了交谈，虽然他们知道这个错误，但他们说它的影响不足以让他们解决。

有没有办法让我在我的代码中忽略这个响应并仍然获取数据？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T06:02:39.440

如果您使用的是 HttpWebRequest/Response，这应该可以帮助您入门：

```
response = null;

try
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create("<url>");

    response = (HttpWebResponse)request.GetResponse();

    //no error
}
catch (WebException e)
{
    if (e.Status == WebExceptionStatus.ProtocolError)
    {
        response = (HttpWebResponse)e.Response;

        if((int)response.StatusCode == 500)
        {
            using (StreamReader sr = new StreamReader(response.GetResponseStream()))
            {
                var result = sr.ReadToEnd();
            }
        }
    }
} 
```

# twitter-bootstrap - Twitter Bootstrap - 响应式词缀

> ID：13338897
> 
> 赞同：52
> 
> 时间：2012-11-12T05:41:57.250
> 
> 标签：twitter-bootstrap

我正在使用 Twitter Bootstrap，我有以下内容：

```
<div class="row">

    <div class="span3">
        <div data-spy="affix">
            <form>
                <!-- inputs and stuff -->
            </form>
        </div>
    </div>

    <!-- span9 and its contents -->

</div> 
```

Bootstrap 正确地应用了词缀效果，`<div>`当我向下滚动页面时它保持静止。但是，一旦我将页面大小调整为移动尺寸并且发生引导响应效果（导航栏折叠/对象彼此很好地对齐），`<div>`现在附加在页面的其他元素之上并且变得混乱。发生这种情况是因为`.affix`它`position: fixed`很好地解释了它。

现在我去了[Bootstrap](http://twitter.github.com/bootstrap/getting-started.html)的网站并将页面大小调整为移动尺寸，附加元素（`<ul>`在他们的情况下）开始与页面很好地流动，在不超过其他元素的情况下占据其自然位置。我还注意到，一旦发生这种情况，课程就会从 更改`affix`为`affix-top`。

我不确定这是他们的定制还是框架的一部分，因为框架的行为显然不同。谁能详细说明这一点？如果页面被调整为移动尺寸，我需要在我的`<div>`位置上具有相同的行为，附加元素将占据其自然位置。

**编辑：**我的观察有点缺陷。我注意到他们页面上的元素最初有`affix-top`，一旦我滚动到下方`data-top-offset`，它就会变为`affix`. 它仍然不能解释为什么我在调整大小时`<div>`不会像他们那样渲染`<ul>`。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-12T21:29:36.447

Bootstrap[为其文档使用了一个额外的 CSS 文件，该文件](http://twitter.github.com/bootstrap/assets/css/docs.css)覆盖了某些元素的默认行为。

具体来说，在第 917 行，他们`position`将附加的侧边栏（作为 <767px 宽度的媒体查询的一部分）更改为`static`：

```
.bs-docs-sidenav.affix {
  position: static;
  width: auto;
  top: 0;
} 
```

他们有几个附加的自定义样式应用于附加的侧边栏；您可以在手机大小的窗口上使用 Chrome Web Inspector/Firebug 来查看它们。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-04-06T01:32:18.817

**HTML**不要附加 span3（或 span4 等）DIV，而是它的子级；就我而言，我贴上了#sidebar。此外，您不必将 .affix 类或 data-offset-top="XXX" 添加到此 div。下面的 Javascript 可以解决问题。

```
 <aside class="span3">
    <div id="sidebar">
     <p>some content</p>
    </div>
  </aside> 
```

**CSS**（bootstrap.css 上不存在以下代码，我从[http://twitter.github.io/bootstrap/assets/css/docs.css](http://twitter.github.io/bootstrap/assets/css/docs.css)复制了它）

```
.affix-bottom {
    position: absolute;
    top: auto;
    bottom: 400px;
} 
```

**Javacript**下面的 js 会根据页面滚动的多少将#sidebar 的类从 .affix 更改为 .affix-bottom

```
 $('#sidebar').affix({
      offset: {
        bottom: 450
      }
   }); 
```

事实上，在小分辨率上#sidebar 会与其他元素重叠。要解决这个问题，请使用引导程序的媒体查询[http://twitter.github.io/bootstrap/scaffolding.html#responsive](http://twitter.github.io/bootstrap/scaffolding.html#responsive)

正如[Sara](https://stackoverflow.com/users/1684247/sara)之前指出的那样，您可以使用类似..

```
@media(max-width:767px){
   .affix {
     position: static;
     width: auto;
     top: 0;
    }
} 
```

..这样您就可以使#sidebar 正常运行。

希望这对某人有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-27T23:05:48.437

我遇到了同样的问题，我的解决方案是删除较小屏幕尺寸的词缀行为。例如，要删除小于 1199 像素的尺寸：

```
#map {

  @media (min-width: 1199px) {
    &.affix-top {
    }

    &.affix {
      position: fixed;
      top: 20px;
      bottom: 100px;
    }

    &.affix-bottom {
    }
  }
} 
```

# javascript - 使用 JQuery 从 HTML 页面中提取嵌入样式

> ID：13338898
> 
> 赞同：0
> 
> 时间：2012-11-12T05:42:00.140
> 
> 标签：javascript, jquery, css, ajax

那么，问题来了……

我必须：

1.  通过带有 AJAX 调用的 REST API 获取 html 页面，
2.  从该 html 中提取具有已知 id 的表（谢天谢地，该表格式正确）
3.  从样式块中提取表格的关联 css，
4.  将表格附加到我页面上的 div 中，然后
5.  重新应用原始 CSS

因此，我感兴趣的页面部分是：

```
<style>
 #tableid td.someclass {
  ...
  }
 #tableid td.anotherclass {
  ...
  }
 [etc etc ..]
</style> 
```

和

```
<table id="tableid">
 ...
</table> 
```

因此，通过上面的列表 1,2 和 4 完全没有问题。3 和 5 对大脑造成负担 - 顺便说一句，无需担心外部样式表，所有内容都在我在单个标签中抓取的页面中。

我想我可以提取整个元素，然后将其附加到我的页面——但这很混乱，可能会导致不必要的副作用。我想做的只是提取适用于#tableid 的样式，然后将它们应用到附加到我的div 的表格中。

有没有一种优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:51:33.780

您可以使用标准的 jQuery 查找器从标题中提取样式：

```
var styles = $('head style').text(); 
```

然后对其运行正则表达式：

```
var tableID     = 'tableid',
    pattern     = new RegExp('#'+ tableID + '[^}]+}', 'g'),
    tableStyles = styles.match(pattern); 
```

这应该为您的表格 ID 提供一系列样式。现在您可以将这些样式附加到当前文档的头部：

```
$('<style/>', { text: tableStyles.join('\n') }).appendTo('head'); 
```

您的用例可能需要一些微调，但这应该大致为您提供您所追求的。

# javascript - 逻辑右移是否总是在 JavaScript 中将源代码转换为 32 位？

> ID：13338899
> 
> 赞同：0
> 
> 时间：2012-11-12T05:42:02.997
> 
> 标签：javascript, bit-shift

很简单，真的。是否`0xf12345678>>>4`总是应该`0x1234567`在 JavaScript 中产生结果？我可以假设这适用于所有浏览器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:46:56.910

是的，根据 ECMAScript 5 规范，`>>>`操作员执行内部`ToUInt32`算法。

请参阅[规范的第 11.7.3 节](http://es5.github.com/#x11.7.3)：

> 1.  令 lref 为评估 ShiftExpression 的结果。
> 2.  令 lval 为 GetValue(lref)。
> 3.  令 rref 为 AdditiveExpression 求值的结果。
> 4.  设 rval 为 GetValue(rref)。
> 5.  令 lnum 为 ToUint32(lval)。
> 6.  设 rnum 为 ToUint32(rval)。
> 7.  令 shiftCount 为屏蔽掉除 rnum 的最低有效 5 位以外的所有结果，即计算 rnum & 0x1F。
> 8.  通过 shiftCount 位返回执行 lnum 的零填充右移的结果。空出的位用零填充。结果是一个无符号的 32 位整数。

非常清楚地说明结果总是一个 32 位整数。

该`>>>`运算符通常用于转换为 32 位无符号整数。例如，MDN 在他们的垫片中使用它。示例：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach#Compatibility](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach#Compatibility)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:46:47.533

应该是一个可靠的假设。`0xf12345678`任何 JS 解释器都会在计算任何操作之前将其作为单个操作数读取。如果你想安全，为什么不`(0xf12345678)>>>4`呢？

关于这里问题的一些细节：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators)

> 按位运算符将其操作数视为 32 位（零和一）的序列，而不是十进制、十六进制或八进制数。例如，十进制数字 9 的二进制表示为 1001。按位运算符对这种二进制表示执行操作，但它们返回标准的 JavaScript 数值。

# air - 通过 NativeProcessStartupInfo flex air 执行 bat 文件

> ID：13338903
> 
> 赞同：0
> 
> 时间：2012-11-12T05:42:28.233
> 
> 标签：air, ftp

bat文件的功能是从telnet机器下载文件。然后我创建一个air应用程序，通过NativeProcessStartupInfo执行bat文件。当我执行air应用程序时，它是有线的，它不起作用，但是如果我手动执行bat文件没有错误，它运行良好，为什么？

```
ftp -i -s:c:\conf 165.11.21.10 
```

conf文件如下： `user pass bin cd /user mget file* quit`

# git - git mergetool 章鱼

> ID：13338906
> 
> 赞同：1
> 
> 时间：2012-11-12T05:42:38.980
> 
> 标签：git

说我有分支

```
master
dog
cat 
```

`dog`和都进行了更改`cat`。当我将这些合并到

```
git checkout master
git merge dog cat 
```

它会产生冲突，因为人们以不同的方式打开`dog`和`cat`更改文件。我尝试使用 [**kdiff3**](http://kdiff3.sourceforge.net)解决此问题，但它似乎不适用于“章鱼”合并。是这种情况还是我做错了什么？

# regex - 使重写规则只接受小写

> ID：13338910
> 
> 赞同：0
> 
> 时间：2012-11-12T05:43:41.583
> 
> 标签：regex, url-rewriting

我怎样才能让这个重写规则只接受小写？

```
RewriteRule ^/?([a-z]{2})/?$ 
```

我尝试为第一部分做 .*/i 。但它不会工作。它仍然让大写通过：

```
RewriteRule ^/?([a-z]{2}.*/i)/([a-z0-9\-]+)/([a-z0-9()_\-.]+)/?$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:37:39.377

除非你[的](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_nc)`RewriteRule`后面跟着[标志](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_nc)，否则匹配应该区分大小写。所以你的第一条规则应该有效。[`[nocase]`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_nc)

请注意，无法使用 PHP-/JS-style 添加标志`/i`。后者将匹配文字斜线后跟小写字母`i`。

# php - 在 php 中打开 2 个 adodb 连接

> ID：13338915
> 
> 赞同：0
> 
> 时间：2012-11-12T05:44:32.810
> 
> 标签：php, mysql, adodb

我想打开 2 adodb 连接。我写了这段代码，但它不起作用。有什么办法可以解决吗？

```
$conn1 = ADONewConnection('mysql');
$conn1->PConnect($host, $user, $pass, $dbname1);

$conn2 = ADONewConnection('mysql');
$conn2->PConnect($host, $user, $pass, $dbname2); 
```

当我跑

```
$sqlreadrecord = "SELECT * FROM `1net`";
$recordSet = $conn1->Execute($sqlreadrecord); 
```

它说errorTable'abcd.1net'不存在它似乎正在从$dbname2 搜索1net 表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:18:30.773

看过adodb的文档。似乎您可以同时连接到两个不同的数据库服务器/数据库。下面的链接中有一个示例。

[http://phplens.com/lens/adodb/docs-adodb.htm#ex6](http://phplens.com/lens/adodb/docs-adodb.htm#ex6)

您可能想尝试：

```
$conn1 = &ADONewConnection('mysql');
$conn1->PConnect($host, $user, $pass, $dbname1);

$conn2 = &ADONewConnection('mysql');
$conn2->PConnect($host, $user, $pass, $dbname2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:48:56.833

可能是你有你的解决方案，但这里是对其他人的帮助。

我也有同样的问题; 我试试这个

```
$conn1 = ADONewConnection('mysql');
$conn1->PConnect($host, $user, $pass, $dbname1);

$conn2 = ADONewConnection('mysql');
$conn2->NConnect($host, $user, $pass, $dbname2); //NConnect for the new connection 
```

[http://phplens.com/lens/adodb/docs-adodb.htm](http://phplens.com/lens/adodb/docs-adodb.htm)

如果你意识到没关系。检查其他公众的权利。谢谢

# google-chrome - 使用其他服务器上的图像文件作为 webkitnotifications 的图标

> ID：13338917
> 
> 赞同：0
> 
> 时间：2012-11-12T05:44:47.160
> 
> 标签：google-chrome, google-chrome-extension, html5-notifications, webkit-notifications

我正在制作 Chrome 扩展程序。

我想使用其他服务器上的图像文件作为 webkitnotifications 的图标（桌面通知）

**在内容脚本中**

```
window.webkitNotifications.createNotification(
    "http://www.example.com/icon48.png", "title", "text"
).show(); 
```

**在 manifest.json**

```
"permissions": [
    "tabs", "notifications", "http://*/*", "https://*/*"
] 
```

但我收到以下错误

```
Uncaught Error: SECURITY_ERR: DOM Exception 18 
```

图标的 URL 以多种方式更改。所以我不能事先将它们全部添加到 manifest.json 中的“web_accessible_resources”中。那么，我该怎么做以上？非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T06:38:43.980

在我的扩展程序中，使用 Chrome 23，我可以毫无问题地指向这样的**外部图标 url**

```
var notification = webkitNotifications.createNotification(
    'http://placehold.it/48x48',  // no need to add to "web_accessible_resources" beforehand
    title,  // notification title
    textToDisplay // notification body text
); 
```

# django - 为表单django创建模板

> ID：13338922
> 
> 赞同：0
> 
> 时间：2012-11-12T05:45:29.563
> 
> 标签：django, django-forms, django-templates

我目前有一个 login.html，其中有一个用于登录的表单。我所有的表格都需要看起来相似，但是会有不同的内容。目前我的代码如下所示：

```
<form enctype="multipart/form-data" method="POST" action="">
    <fieldset>
        <legend>{{ legend }}</legend>
        <div style="line-height:18px">{% block top %}{% endblock %}<br></div>
        <table class="form">
        {% for text,name,inputtype in formcontent %}
            <tr>
                <td class="right">
                    <label>{{ text }}:</label><br/>
                </td><td style="float:left">
                    <input name="{{ name }}" type="{{inputtype}}">
                </td>
            </tr>
        {% endfor %}
        </table>
    <input value="{{ button }}" type="submit">
    <div style="line-height:18px">
        <div class="err">
            {{ err }}
        </div>
        {{ bottom }}
    </div>
</fieldset></form> 
```

我想知道是否有比将变量放入我的 urls.py 更好的方法（鉴于 hte 页面上可能有多种形式，我不相信这在所有情况下都有效）。一个不错的解决方案是创建一个类，但我不知道如何从页面调用这个类。我知道这将涉及制作标签，但我不明白如何提供二维数组作为模板的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:20:52.523

正是出于这个原因，制作了[Django Crispy Forms 。](https://github.com/maraujop/django-crispy-forms)我认为它们正是您所需要的。

# php - Jquery UI 对话框 - 传递动态变量和更改对话框表单 html

> ID：13338927
> 
> 赞同：2
> 
> 时间：2012-11-12T05:45:56.053
> 
> 标签：php, jquery-ui, jquery

我有一个使用 jqueryUI 创建的上传文档对话框，效果很好，但我需要将其添加到具有多个选项卡的页面中，并在下拉框中旋转默认文档类型以及更改使用的表单中的隐藏值通过表单验证（主要是在上传后返回正确的选项卡）。

我可以在页面底部创建十几个稍微重命名的对话框，以便每个对话框都是唯一的，从每个唯一的按钮单击开始，但这会在可能已经太大的页面上产生很多不必要的膨胀。

我真正想要的是在源单击中传递一个数字，该数字会自动更改隐藏的输入字段并更改默认的下拉框选择（它们直接相关）

不幸的是，我的编码技能仍然很笨，我很擅长 php，但 javascript 和 ajax 对我来说仍然有点新。这是远程办公室之间的内部办公室文档共享系统，我只能兼职编写代码，所以不幸的是我有点生疏了...... :)

```
<div id="upload" title="Upload Documents" style="margin: 0 0 0 0" ><div id="upload-Wrapper"><p >To add documents, please select your document on your computer and enter a description and classification.&nbsp;Maximum file size is 25 megabytes per document uploaded.</p>

<form action="updoc.php" enctype="multipart/form-data" method="post">
<div class="auto-style2">
<br/><label>Select Document</label><input type="file" name="pdfdoc" value="" style="width: 279px" />
<br/>   <br/>
<label style="width: 113px">Document Type</label>
<select name="doc_type" id="doc_type" style="width: 281px">
<option value="T">RT</option> <!--This is the default value for the first tab, but on others I need to rotate the list so the correct one is default-->
<option value="C">CT</option>
<option value="A">TA</option>
<option value="P">PA</option>
<option value="D">AD</option>
<option value="H">DH</option>
<option value="L">LW</option>
<option value="V">LWD</option>
<option value="W">LWT</option>
<option value="R">PR</option>
<option value="O">Other</option>
</select>
<br/>   <br/>
<label style="width: 140px">Description </label>
<input type="text" name="pdfdesc" value="" style="width: 309px" />
<br/>
<p>*all fields required  
<input type='hidden' value='3' name='tab' /> <!--This is the hidden value I need to change depending on the source click-->
<input type="submit" name="submit" value="Upload File" style="float:none; margin-left: 85px"  /></p>
</div>
</form>
</div><!--end Contact-Wrapper-->
</div>

<script>
var dialogOpts = {
bgiframe: true,
autoOpen: false,
modal: true,
width: "521px"
};

$('#upload').dialog(dialogOpts);
$('#upload-Links').click(function() {
  $('#upload').dialog('open');
  return false;
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:38:17.677

你的问题不是很清楚。“来源点击”是什么意思？

根据我的理解，这就是我想出的。以下脚本会将下拉列表更改为选择文件时和选择`CT`文件时。`.txt``TA``.png`

无论选择什么文件，文件名都将被放入隐藏字段。

```
$('input[name=pdfdoc]').change(function() {
    var f = $(this).val(); // file name
    var dt = $('#doc_type'); // drop down
    switch (f.split('.').pop()) { // check the file extension
        case 'txt':
            dt.val('C');
            break;
        case 'png':
            dt.val('A');
            break;
    }
    $('input[name=tab]').val(f); // store the file name in the hidden field
}); 
```

如果这不是您想要的，请告诉我 - 我会更新答案。

# php - 如何从 API 调用中解析 JSON 数据？

> ID：13338929
> 
> 赞同：0
> 
> 时间：2012-11-12T05:46:05.590
> 
> 标签：php, javascript, jquery, json

这是我目前所拥有的：

```
<?php
    $string = file_get_contents("http://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=##################################&steamids=76561198040884950");
    $json=json_decode($string);
?>

<script type="text/javascript">
        alert("<?php echo $json; ?>");
</script> 
```

在这个阶段我要做的就是接收 JSON 信息。我对 jQuery 和 PHP 很陌生，所以不确定我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:49:33.690

看看这个[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)，像这样

```
var obj = jQuery.parseJSON('{"name":"John"}');
alert( obj.name === "John" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T05:50:44.157

通过使用`json_decode`，您将 JSON 从字符串（可以普遍理解和解析）转换为 PHP 对象或数组，这不会以您希望的方式打印出来。您应该避免转换它，只需执行以下操作：

```
<?php
    $string = file_get_contents("http://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=...&steamids=76561198040884950");
?>

<script type="text/javascript">
        var json = <?php echo $string; ?>;
        // do things with the JSON; parse it into an object, etc
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T05:52:59.890

通过 PHP使用[json_decode](http://php.net/manual/en/function.json-decode.php)时，您的输出将以数组的形式返回；

从外部文件返回 json 信息到 jquery 脚本时，您必须确保使用正确的语法。[法典](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T05:56:06.953

其次我不确定你是否知道，但是在使用 file_get_contents 时，你需要你的 php.ini 文件具有以下标志：

> allow_url_fopen = 1

如果您不想这样做，还有其他选择： [检查一下](https://stackoverflow.com/questions/3488425/php-ini-file-get-contents-external-url)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T06:05:41.930

尝试使用`<?php print_r($json); ?>`而不是`echo`. 它正在做你想做的事。 `echo`只是不擅长处理数组。

# java - 从一副牌中发牌的 Java 代码

> ID：13338932
> 
> 赞同：1
> 
> 时间：2012-11-12T05:46:37.173
> 
> 标签：java, arrays, shuffle, poker

我正在尝试编写一种方法来从甲板顶部移除指定数量的卡片并将它们作为数组返回。

这就是我到目前为止所做的。创建牌组的方法，复制牌组，返回数组中指定位置的牌的方法，返回牌组大小的方法，洗牌和切牌（不确定这些是正确的）。这是卡片类

```
public class Card {

    private final int suit; // 0, 1, 2, 3 represent Spades, Hearts, Clubs,
                            // Diamonds, respectively

    private final int value; // 1 through 13 (1 is Ace, 11 is jack, 12 is
                                // queen, 13 is king)

    /*
     * Strings for use in toString method and also for identifying card images
     */
    private final static String[] suitNames = { "s", "h", "c", "d" };
    private final static String[] valueNames = { "Unused", "A", "2", "3", "4",
            "5", "6", "7", "8", "9", "10", "J", "Q", "K" };

    /**
     * Standard constructor.
     * 
     * @param value
     *            1 through 13; 1 represents Ace, 2 through 10 for numerical
     *            cards, 11 is Jack, 12 is Queen, 13 is King
     * @param suit
     *            0 through 3; represents Spades, Hearts, Clubs, or Diamonds
     */
    public Card(int value, int suit) {
        if (value < 1 || value > 13) {
            throw new RuntimeException("Illegal card value attempted.  The "
                    + "acceptable range is 1 to 13\.  You tried " + value);
        }
        if (suit < 0 || suit > 3) {
            throw new RuntimeException("Illegal suit attempted.  The  "
                    + "acceptable range is 0 to 3\.  You tried " + suit);
        }
        this.suit = suit;
        this.value = value;
    }

    /**
     * "Getter" for value of Card.
     * 
     * @return value of card (1-13; 1 for Ace, 2-10 for numerical cards, 11 for
     *         Jack, 12 for Queen, 13 for King)
     */
    public int getValue() {
        return value;
    }

    /**
     * "Getter" for suit of Card.
     * 
     * @return suit of card (0-3; 0 for Spades, 1 for Hearts, 2 for Clubs, 3 for
     *         Diamonds)
     */
    public int getSuit() {
        return suit;
    }

    /**
     * Returns the name of the card as a String. For example, the 2 of hearts
     * would be "2 of h", and the Jack of Spades would be "J of s".
     * 
     * @return string that looks like: value "of" suit
     */
    public String toString() {
        return valueNames[value] + " of " + suitNames[suit];
    }

    /**
     * [STUDENTS SHOULD NOT BE CALLING THIS METHOD!] Used for finding the image
     * corresponding to this Card.
     * 
     * @return path of image file corresponding to this Card.
     */
    public String getImageFileName() {

        String retValue;
        retValue = suitNames[suit];
        if (value <= 10)
            retValue += value;
        else if (value == 11)
            retValue += "j";
        else if (value == 12)
            retValue += "q";
        else if (value == 13)
            retValue += "k";
        else
            retValue += "Unknown!";
        return "images/" + retValue + ".gif";
    }
} 
```

Deck 方法是我需要帮助的方法

```
public class Deck {

    private Card[] cards;

    public Deck() {
        cards = new Card[52];
        int numberOfCard = 0;
        for (int suit = 0; suit <= 3; suit++) {
            for (int value = 1; value <= 13; value++) {
                cards[numberOfCard] = new Card(value, suit);
                numberOfCard++;
            }
        }
    }

    public Deck(Deck other) {

        cards = new Card[other.cards.length];
        for (int i = 0; i < other.cards.length; i++) {
            cards[i] = other.cards[i];
        }
    }

    public Card getCardAt(int position) {
        if (position >= cards.length) {
            throw new IndexOutOfBoundsException("Values are out of bounds");
        } else {
            return cards[position];
        }
    }

    public int getNumCards() {
        return cards.length;
    }

    public void shuffle() {
        int temp = 0;
        for (int row = 0; row < cards.length; row++) {
            int random = (int) (Math.random() * ((cards.length - row) + 1));
            Deck.this.cards[temp] = this.getCardAt(row);
            cards[row] = cards[random];
            cards[random] = cards[temp];
        }

    }

    public void cut(int position) {
        Deck tempDeck = new Deck();
        int cutNum = tempDeck.getNumCards() / 2;
        for (int i = 0; i < cutNum; i++) {
            tempDeck.cards[i] = this.cards[52 - cutNum + i];
        }
        for (int j = 0; j < 52 - cutNum; j++) {
            tempDeck.cards[j + cutNum] = this.cards[j];
        }
        this.cards = tempDeck.cards;
    }

    public Card[] deal(int numCards) {
        return cards;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:00:46.263

如果您不能使用`List`s，那么使用另一个变量与牌组顶牌的索引似乎是个好主意：

```
public class Deck {

    private Card[] cards;
    private int topCardIndex;

    public Deck() {
        cards = new Card[52];
        int numberOfCard = 0;
        for(int suit = 0; suit <= 3; suit++){
            for(int value = 1; value <= 13; value++){
                cards[numberOfCard] = new Card(value, suit);
                numberOfCard++;
            }
        }
        topCardIndex = 0;
    }

    public Card getCardAt(int position) {
        if (position >= cards.length - topCardIndex || position < topCardIndex) {
            throw new IndexOutOfBoundsException("Values are out of bounds");
        } else {
            return cards[topCardIndex + position];
        }
    }

    public Card[] deal(int numCards) {
        // FIXME: check bounds, or make method "Card pickCardAt(int position)"
        // that removes the card from the deck
        Card[] drawnCards = new Card[numCards];
        for(int index = 0; index < numCards; index ++) {
            drawnCards[index] = cards[topCard];
            topCard++;
        }
        return drawnCards;
    } 
```

* * *

我认为将 Deck 的`card`集合设置为 a`List`而不是 a`Card[]`会更好，因此您可以进行更好的操作，例如`remove()`.

如果你想`n`从牌组中取出第一张牌，那么你只需`remove()` **n**次得到你的结果数组（我也会制作一个列表）。

```
public List<Card> deal(int numCards) {
    List<Card> drawnCards = new ArrayList<Card>(numCards);
    for(int index = 0; index < numCards; index++) {
        drawnCards.add(cards.remove(0));
    }
    return drawnCards;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:33:44.350

这就是我在游戏中处理卡片组的方式。我也有 read() 方法从 XML 文件中读取卡片并将它们推入。

```
import java.util.Stack;

public class CardStack extends Stack<Card> {

    public CardStack () {}

    public void shuffle() {
        List<Card> list = this.subList(0, this.size());
        //changes in this list are reflected in original Stack
        Collections.shuffle(list);
    }

    public Card pop () {
        try {
            Card card = super.pop();
            return card;
        } catch (EmptyStackException e) {
            return null;
        }
    }
} 
```

# android - 如何在最短的时间内查询 db 中的 3 个表

> ID：13338941
> 
> 赞同：1
> 
> 时间：2012-11-12T05:47:31.637
> 
> 标签：android, sql, sqlite, android-alarms

如果我有一个包含 3 个表 A、B 和 C 的数据库。这些表每个都有一个时间戳列。

如何查询 3 个表以获取时间戳最少的行（最接近现在）。

我可以分别查询每个表并获取每个表的最小时间戳，然后在代码中进行比较，但我认为必须有更有效的方法。

我想这样做是因为，我想为 NEXT 到期日期安排警报，而不是为所有时间戳安排警报。我正在使用 SQLITE。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:52:19.067

```
SELECT MIN(TS), Table_Name FROM (
SELECT MIN(TS) AS TS, 'A' as Table_Name FROM A
UNION SELECT MIN(TS) AS TS, 'B' as Table_Name FROM B
UNION SELECT MIN(TS) AS TS, 'C' as Table_Name FROM C); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T06:29:29.367

我认为最好的方法是从其中的 3 个中形成一个统一的选择查询，例如，如果表 A 有 3 列，表 B 有两列，则为它们编写一个三列选择并使用例如 '' 作为第三列. 那么你可以使用`Union`and `Order`by 来实现你的最终查询。（因为我不知道你的表结构我只是使用了 A. *,b.* ,C.*）

```
with temp as (
    SELECT A.* Table_Name FROM A
UNION SELECT B.* as Table_Name FROM B
UNION SELECT C.* as Table_Name FROM C
)
select top(1) temp.* from temp Order By temp.TS where temp.TS<TimeNow 
```

# android - 如何在android中输入位置

> ID：13338952
> 
> 赞同：0
> 
> 时间：2012-11-12T05:49:01.973
> 
> 标签：android

我有一个应用程序，用户必须在地图上选择一个位置。我想知道为此目的调用谷歌地图图形界面的正确意图是什么。有没有标准的方法来做到这一点？其次，如果用户只想使用文本框输入地点的位置，有没有办法根据用户的位置显示地点的提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:12:18.003

有一个可用于 android 的外部库，用于使用 google map mapview -> [https://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

要搜索某些地方，您可以使用 google places API (https://developers.google.com/places/) 来处理它，您可以创建一个文本框并从中获取输入，如果您愿意，可以在其中搜索示例在澳大利亚悉尼搜索一些“食物”你可以用这个

> [https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AddYourOwnKeyHere](https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AddYourOwnKeyHere)

它将返回一个 json 数据，然后您可以对其进行解析以获取地点的纬度和经度并在地图视图中查看

或者您也可以使用 google map JavaScript API，我认为该功能几乎相同，但是您在 HTML 文件中创建它并在 android webview 中显示它，如果您使用它，您也可以在 iOS 应用程序中使用它来显示 HTML UIWebView 中的文件

如果有任何问题你可以通过评论问我:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:21:20.443

嗨，我不确定文本框，但如果您只想从地图中获取输入，您可以要求用户点击地图，将标记放在地图位置上。这可以通过**OnTap**方法完成。这里是如何做的链接[这里](http://wptrafficanalyzer.in/blog/add-marker-on-touched-location-using-google-map-in-android-example/)和[这里](http://blog.chrisblunt.com/android-map-view-double-taps-and-overlay-markers/)

# python - /admin/ 处的 Django ImportError

> ID：13338955
> 
> 赞同：2
> 
> 时间：2012-11-12T05:49:43.340
> 
> 标签：python, django, django-admin

当我尝试访问我的 Django 管理站点时，出现以下错误：

> /admin/ 处的 ImportError
> 
> 没有名为 django.views 的模块
> 
> 请求方法：GET 请求 URL： `http://127.0.0.1:8000/admin/`Django 版本：1.4.1 异常类型：ImportError 异常值：
> 
> 没有名为 django.views 的模块
> 
> 异常位置：/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py in import_module，第 35 行 Python 可执行文件：/usr/bin/python Python 版本：2.7.3

这是我的 urls.py 文件：

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^$', include('home.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

当我评论该行时`url(r'^$', include('home.urls'))`，管理站点再次工作。

我无法弄清楚我的问题是什么。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:26:36.153

您在代码中其他地方的某个视图中出现错误，该视图正在尝试导入`django.views`. 管理站点需要导入所有视图才能正确反转 URL，因此即使它不在管理代码本身中也会触发错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:19:28.357

我不确定它是否能满足你对正确答案的渴望。我尝试复制这个问题并发现它而不是使用

```
include('home.urls') 
```

如果你用类似的东西替换它

```
(admin.site.urls) 
```

或者你也可以使用

```
url(r'^{{project_name}}', '{{project_name}}.{{app_name}}.views.{{some html template file}}'), 
```

那么它工作正常。希望它至少可以帮助你缩小影响点。

# printing - windows8下如何打印xps文件

> ID：13338956
> 
> 赞同：3
> 
> 时间：2012-11-12T05:49:53.467
> 
> 标签：printing, windows-8, xps

是否有任何博客或文档介绍如何在 windows8 中打印 xps 文件？我已经从官方 sdk 中看到了打印样本，但没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T15:38:29.053

我还尝试直接从 Windows Store 应用程序打印...在我的情况下，我正在通过代码在我的应用程序中创建一个 pdf 文档。（到目前为止）我能做的最好的事情是打开与文档关联的任何应用程序/程序（WinRT Surface 上的 XPS Viewer 应用程序......如果安装了 Win 8 系统上的 Adob​​e Reader）。这是我使用的代码：

```
StorageFile filetoShare = await Windows.Storage.KnownFolders.DocumentsLibrary.GetFileAsync("Document.PDF");
await Windows.System.Launcher.LaunchFileAsync(filetoShare); 
```

在任何一种情况下，它都会离开应用程序并直接进入相关程序，然后要求用户采取行动进行打印。我很想找到一种直接从应用程序执行此操作的方法。

# android - C# 响应在 Android 浏览器上显示下载不成功错误

> ID：13338957
> 
> 赞同：1
> 
> 时间：2012-11-12T05:50:32.877
> 
> 标签：android, asp.net, mobile, download, response

我使用`Asp.net`并`C#`运行这个网站并接近移动版本，我使用`jQuery`移动。当我通过桌面浏览器下载时工作正常，当我尝试通过手机下载时，出现错误

> 下载失败

我该如何解决？

这是我的代码

```
protected void lbAttach_Click(object sender, EventArgs e)
{
    if (this.IsPostBack)
    {                
        string sRFP = lblRFPNo.Text.ToString().Trim();
        if (dsRFP(sRFP).Tables[0].Rows[0]["Attachment"].ToString() != "")
        {
            byte[] Attach = (byte[])dsRFP(sRFP).Tables[0].Rows[0]["Attachment"];
            string strfn = Convert.ToString(dsRFP(sRFP).Tables[0].Rows[0]["AttachName"]);
            string ext = Path.GetExtension(strfn);

            Response.Buffer = true;
            Response.Clear();
            Response.ClearContent();
            Response.ClearHeaders();
            Response.AddHeader("Content-Disposition", "attachment; filename=\"" + strfn.ToUpper() + "\"" );

            //BinaryWriter bw = new BinaryWriter(Response.OutputStream);
            //bw.Write(Attach);
            //bw.Close();
            Response.ContentType = ReturnExtension(ext);

            try
            {
                Response.BinaryWrite(Attach);
            }
            catch (Exception ex)
            {
                lblMessage.Text = ex.Message;
            }

            Response.End();
            Response.Flush();
            Response.Close();
        }
    }
}

private string ReturnExtension(string fileExtension)
{
    switch (fileExtension)
    {
        case ".htm":
        case ".html":
        case ".log":
            return "text/HTML";
        case ".txt":
            return "text/plain";
        case ".doc":
            return "application/ms-word";
        case ".tiff":
        case ".tif":
            return "image/tiff";
        case ".asf":
            return "video/x-ms-asf";
        case ".avi":
            return "video/avi";
        case ".zip":
            return "application/zip";
        case ".xls":
        case ".csv":
            return "application/vnd.ms-excel";
        case ".gif":
            return "image/gif";
        case ".jpg":
        case "jpeg":
            return "image/jpeg";
        case ".bmp":
            return "image/bmp";
        case ".wav":
            return "audio/wav";
        case ".mp3":
            return "audio/mpeg3";
        case ".mpg":
        case "mpeg":
            return "video/mpeg";
        case ".rtf":
            return "application/rtf";
        case ".asp":
            return "text/asp";
        case ".pdf":
            return "application/pdf";
        case ".fdf":
            return "application/vnd.fdf";
        case ".ppt":
            return "application/mspowerpoint";
        case ".dwg":
            return "image/vnd.dwg";
        case ".msg":
            return "application/msoutlook";
        case ".xml":
        case ".sdxl":
            return "application/xml";
        case ".xdp":
            return "application/vnd.adobe.xdp+xml";
        default:
            return "application/octet-stream";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-23T11:32:40.713

我有类似的问题，文件下载在 Chrome 中失败。我刚刚删除了 Response.Flush() 和 Response.Close() 并添加了 Response.End() 有效

# javascript - 在字符串时间中添加 20 分钟并将其填充到文本框中或警告它

> ID：13338960
> 
> 赞同：0
> 
> 时间：2012-11-12T05:50:44.187
> 
> 标签：javascript, jquery

我在选择/列表控件中填充了一个时间字符串，例如 05:40 我想在其中添加 20 分钟并在每次列表值更改 jquery 或 javascript 时填充到文本框中

```
$(document).ready(function() {

$("#starttimeList").change(function() {
var selectVal = $('#starttimeList').val();
    ////// HERE I WANT MY CODE AS selectVal is getting value of select control e.g. 05:40 and entTime is my textbox where I want the time added with 20 minutes.
$("#endTime").val(selectVal);

 });
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-12T06:31:31.567

如果时间格式为 hh:mm，您可以使用一个简单的函数将其转换为分钟，添加更多分钟，然后再次将其转换回 hh:mm：

```
function addMinutes(time/*"hh:mm"*/, minsToAdd/*"N"*/) {
  function z(n){
    return (n<10? '0':'') + n;
  }
  var bits = time.split(':');
  var mins = bits[0]*60 + (+bits[1]) + (+minsToAdd);

  return z(mins%(24*60)/60 | 0) + ':' + z(mins%60);  
}  

addMinutes('05:40', '20');  // '06:00'
addMinutes('23:50', 20);    // '00:10'
addMinutes('00:00', '120'); // '02:00' 
```

要添加的分钟数可以是数字或字符串。

如果您需要允许夏令时，使用日期对象可能会使生活更轻松。

# java - 我们如何在 html 表单中添加“加号”？

> ID：13338961
> 
> 赞同：0
> 
> 时间：2012-11-12T05:50:49.890
> 
> 标签：java, html, jsp, jakarta-ee, servlets

根据[何时将空间编码为加号 (+) 或 %20？](https://stackoverflow.com/questions/2678551/when-to-encode-space-to-plus-and-when-to-20)当我们在 html 表单名称或值中有任何空格时，我们的浏览器会将空格编码为“+”，但是如果我们有用户故意输入的“加号”值（例如文本字段）怎么办？我们的网络服务器会误解该符号并将其改回空格吗？我们将如何避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T05:59:40.050

> 我们的网络服务器会误解该符号并将其改回空格吗？

不，因为当`+`在表单中输入一个字符时，它会被编码为`%2B`.

这是一个例子（[小提琴](http://jsfiddle.net/3MFX2/1/)）：

```
<form method="POST" action="/">
    <input name="foo" type="text" value="+">
    <input name="bar" type="text" value="bacon sauce">
</form>

<script>
    // This encodes the form, (i.e. that's what your server receives)
    alert( $('form').serialize() );
</script> 
```

警报框将显示：`foo=%2B&bar=bacon+sauce`

这意味着`+`被编码为`%2B`。因此，在您的服务器上，只需将所有`+`字符转换为 a`space`和`%2B`，`+`但您可能应该将解码部分留给您的框架或库。​</p>

这是一个你可以用来玩参数编码的小提琴：[小提琴](http://jsfiddle.net/3MFX2/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:53:46.540

加号需要使用 % 符号转换为[urlencoded](http://docs.oracle.com/javase/1,5,0/docs/api/java/net/URLEncoder.html)形式。在这种情况下 %2B。

# asp.net-mvc-3 - 在 Orchard CMS 中路由自定义控制器

> ID：13338963
> 
> 赞同：5
> 
> 时间：2012-11-12T05:50:53.357
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing, orchardcms

我在设置到 Orchard 中的自定义控制器的路由时遇到了一些问题。

我创建了一个视图：

```
@model dynamic
@{
    Script.Require("jQuery");
}
@using (Html.BeginForm("Send", "Email", FormMethod.Post, new { id = "contactUsForm" }))
{
    <fieldset>
        <legend>Contact Us</legend>
        <div class="editor-label">Name:</div>
        <div class="editor-field">
            @Html.TextBox("Name", "", new {style = "width: 200px"})
        </div>
        <div class="editor-label">Email Address:</div>
        <div class="editor-field">
            @Html.TextBox("Email", "", new {style = "width: 200px"})
        </div>
        <div class="editor-label">Telephone Number:</div>
        <div class="editor-field">
            @Html.TextBox("Telephone", "", new {style = "width: 200px"})
        </div>
        <div class="editor-label">Message:</div>
        <div class="editor-field">
            @Html.TextArea("Message", "", new {style = "width: 200px"})
        </div>
        <br/>
        <input id="ContactUsSend" type="button" value="Submit" />
    </fieldset>
}
@using (Script.Foot()) {
    <script>
        $(function() {
            $('#ContactUsSend').click(function () {
                alert('@Url.Action("Send", "Email")');
                var formData = $("#contactUsForm").serializeArray();

                $.ajax({
                    type: "POST",
                    url: '@Url.Action("Send", "Email")',
                    data: formData,
                    dataType: "json",
                    success: function (data) {
                        alert(data);
                    }
                });
            });
        });
    </script>
} 
```

使用控制器：

```
public class EmailController : Controller
    {
        [HttpPost]
        public ActionResult Send()
        {
            var orchardServices = DependencyResolver.Current.GetService<IOrchardServices>();
            var messageHandler = DependencyResolver.Current.GetService<IMessageManager>();
            var svc = new ContactUsService(orchardServices, messageHandler);
            svc.DoSomething();
            return new EmptyResult();
        } 
    } 
```

并设置路线：

```
public class Routes : IRouteProvider {
        public void GetRoutes(ICollection<RouteDescriptor> routes) {
            foreach (var routeDescriptor in GetRoutes()) {
                routes.Add(routeDescriptor);
            }
        }

        public IEnumerable<RouteDescriptor> GetRoutes() {
            return new[] {
                new RouteDescriptor {
                    Priority = 15,
                    Route = new Route(
                        "ContactUsWidget",
                        new RouteValueDictionary {
                            {"area", "ContactUsWidget"},
                            {"controller", "Email"},
                            {"action", "Send"}
                        },
                        new RouteValueDictionary(),
                        new RouteValueDictionary {
                            {"area", "ContactUsWidget"}
                        },
                        new MvcRouteHandler())
                }
            };
        }
    } 
```

但是当我点击提交按钮时，它会尝试发布到

> OrchardLocal/Contents/电子邮件/发送

显然失败了。谁能指出我做错的方向？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T09:37:46.310

尝试这个：

```
@using (Html.BeginForm("Send", "Email", new { area = "Your.Module" }, FormMethod.Post, new { id = "contactUsForm" })) 
```

添加区域就像一个额外的子句，确保只有你的模块被搜索到匹配的控制器/动作方法对。

# ruby-on-rails-3 - Rails 在观察者中拉取属性

> ID：13338965
> 
> 赞同：0
> 
> 时间：2012-11-12T05:51:13.803
> 
> 标签：ruby-on-rails-3, observers

我有这个观察者，它监视评论表，并在创建某些内容后发送电子邮件。我似乎没有在观察者中正确地进行关联，因为我收到错误或`ArgumentError (wrong number of arguments (0 for 5)):`使用此代码：

```
class CommentObserver < ActiveRecord::Observer
  def after_create(comment)

    if comment.guest_comment == true
      if comment.name?
        InvoiceMailer.message(comment.name, comment.content, comment.email, comment.user.email, comment.order_id).deliver
      elsif comment.email?
        # do something if there's no email yet
        InvoiceMailer.message(comment.name, comment.content, comment.order.customer.email, comment.user.email, comment.order_id).deliver
      else
        InvoiceMailer.message(comment.email, comment.content, comment.email, comment.user.email, comment.order_id).deliver
      end
    else
      # owner made the comment
      if comment.user.account.company_name?
        InvoiceMailer.message(comment.user.name+", "+comment.user.account.company_name, comment.content, comment.user.email, comment.email, comment.order_id).deliver
      else  
        InvoiceMailer.message(comment.user.name, comment.content, comment.user.email, comment.email, comment.order_id).deliver
      end
    end
  end
end 
```

有没有办法在观察者内部编写正确的关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:18:35.817

所以我发现观察者没有/不应该访问数据库。我现在将我的逻辑移至邮件程序（稍后将移至帮助程序）。然后确保不要使用“消息”作为您的方法名称，因为它是保留的；）

# javascript - 将简单的模态库添加到 Rails 应用程序

> ID：13338966
> 
> 赞同：0
> 
> 时间：2012-11-12T05:51:15.553
> 
> 标签：javascript, ruby-on-rails

我想将[简单的模态](http://simplemodal.plasm.it/)javascript 库添加到我的 rails 应用程序

在网页上所有js文件都加载成功

```
<script src="/assets/simple-modal/mootools-core-1.3.1.js?body=1" type="text/javascript"></script>
<script src="/assets/simple-modal/mootools-more-1.3.1.1.js?body=1" type="text/javascript"></script>
<script src="/assets/simple-modal/simple-modal.js?body=1" type="text/javascript"></script> 
```

我试图在咖啡中添加这样的事件：

```
$(document).ready ->
  $("#batch a.accept").live 'click', ->
    SM = new SimpleModal(btn_ok: "Alert button")
    SM.show
      title: "Title"
      contents: "Your message..." 
```

有了萤火虫控制台中的这段代码，我得到了

```
TypeError: $("simple-modal").getElement is not a function 
```

当我尝试像在手册中那样使用 javascript 添加事件时：

```
window.addEvent("domready", function(e){
/* Alert */
$("#batch a.accept").addEvent("click", function(e){
  e.stop();
  var SM = new SimpleModal({"btn_ok":"Alert button"});
      SM.show({
        "title":"Alert Modal Title",
        "contents":"Lorem ipsum dolor sit amet..."
      });
});
}); 
```

我收到了这个错误：

```
TypeError: $("#batch a.accept").addEvent is not a function 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:50:16.187

尝试将 jquery 添加到脚本列表的顶部

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="/assets/simple-modal/mootools-core-1.3.1.js?body=1" type="text/javascript"></script>
<script src="/assets/simple-modal/mootools-more-1.3.1.1.js?body=1" type="text/javascript"></script>
<script src="/assets/simple-modal/simple-modal.js?body=1" type="text/javascript"></script> 
```

# visual-studio-2010 - 在 Visual Studio 中建立数据库连接时出错

> ID：13338969
> 
> 赞同：-1
> 
> 时间：2012-11-12T05:51:45.193
> 
> 标签：visual-studio-2010, visual-studio

任何人都知道如何解决这个问题？

与 SQL Server 建立连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 定位服务器/指定实例时出错）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:00:41.473

确保服务器实例已启动。从开始菜单-> Microsoft SQL Server... -> 配置工具-> SQL Server 配置管理器-> SQL Server 服务执行此操作

如果它不在您的本地机器上，即在远程服务器上，那么您的帐户需要在 SQL Server 上登录，该登录名被授予访问您尝试连接的数据库的权限。

通常本地服务器实例默认安装为您自己的访问权限。但检查并没有什么坏处。

另外如果是远程的，其他人能连接成功吗？如果没有，那么您可能还需要在 SQL Server 上启用远程连接。

确保实例名称正确很重要。斜杠应该是反斜杠，而不是正斜杠。您使用什么作为实例名称？

# php - 邮件变量中包含的 foreach 的 PHP 输出

> ID：13338971
> 
> 赞同：1
> 
> 时间：2012-11-12T05:52:18.397
> 
> 标签：php

我想在我的 sendmail.php 中包含 foreach 循环 + echo $total 作为变量 $order 的输出。有人可以帮助我吗？我有点卡住了。

我的 sendmail.php：

```
<?php
if(!isset($_SESSION)) {
     session_start();
}

$to = $_SESSION['email'];
$firstname = $_SESSION['firstname'] ;
$lastname = $_SESSION['lastname'] ;
$email = $_SESSION['email'] ;
$addressline1 = $_SESSION['addressline1'] ;
$towncity = $_SESSION['towncity'] ;
$postcode = $_SESSION['postcode'] ;

foreach ($_SESSION['invoice'] as $value) { //needs to = $order
    echo $value."<br>";} //needs to = $order
echo "Total: $".$_SESSION['total']; //needs to = $order

//set subject
$subject = "Crystal Fusion - New Order";

//body of the e-mail
$body = "New Order Received:\n\n\n\n
    From: $firstname $lastname\n
    Email: $email\n
    Address: $addressline1\n
    Town/City: $towncity\n
    Postcode: $postcode\n
    Order: $order"; //needs to = foreach loop above

$sent = mail($to, $subject, $body);

if($sent)
    {echo "<script language=javascript>window.location = 'mail_succeed.php';</script>";}
else
    {echo "<script language=javascript>window.location = 'mail_fail.php';</script>";}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:32:40.657

解决方案是使用类似的东西

```
ob_start(); 

// Add your output
foreach ($_SESSION['invoice'] as $value) { //needs to = $order
    echo $value."<br>";} //needs to = $order
echo "Total: $".$_SESSION['total']; //needs to = $order
// if you need your logic at multiple places, consider using a separate php file and including it here
// ...

$body=ob_get_contents();
ob_end_clean(); 
mail($to, $subject, $body); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-12T06:06:46.790

如何将你的 foreach 循环更改为：

```
$order = '';
foreach ($_SESSION['invoice'] as $value) { //needs to = $order
    echo $value."<br>"; //needs to = $order
    $order .= $value."\n";
}
echo "Total: $".$_SESSION['total']; //needs to = $order
$order .= "Total: $".$_SESSION['total']; 
```

# actionscript-3 - 如何将此函数转换为 ActionScript 3.0？

> ID：13338974
> 
> 赞同：1
> 
> 时间：2012-11-12T05:52:32.390
> 
> 标签：actionscript-3, flash

你能帮我把这个函数转换成 ActionScript 3.0 吗？

```
for (i=1; i<3; i++) {
    _root["pemain"+i].onEnterFrame = function() {
        ulartangga();
        if (this.temp_nomor<this.nomor) {
            this.temp_nomor++;
        }
        this._x = _root["kotak"+this.temp_nomor]._x;
        this._y = _root["kotak"+this.temp_nomor]._y;
    };
} 
```

我遵循了来自[http://warungflash.com/2009/05/ular-tangga-player-vs-player/的教程](http://warungflash.com/2009/05/ular-tangga-player-vs-player/)

我试图转换成这个：

```
function onEnterFrame() {
//ulartangga();
if (this.temp_nomor<this.nomor) {
    this.temp_nomor++;
}
this.x = stage["kotak"+this.temp_nomor].x;
this.y = stage["kotak"+this.temp_nomor].y;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:43:45.083

enter-frame 应该是一个 EventListener。假设您的其他代码是正确的，这应该可以工作。

```
import flash.events.Event;

this.addEventListener(Event.ENTER_FRAME, enterFrameHandler);

function enterFrameHandler(e:Event):void{
    if (this.temp_nomor<this.nomor) {
        this.temp_nomor++;
    }
    this.x = stage["kotak"+this.temp_nomor].x;
    this.y = stage["kotak"+this.temp_nomor].y;
} 
```

# c++ - 静态之前的预期主要表达式？常量指针必须使用

> ID：13338976
> 
> 赞同：0
> 
> 时间：2012-11-12T05:52:43.390
> 
> 标签：c++, static, struct

由于分配的某些限制，我无法更改此代码中的很多内容。这是代码：

```
#include <iostream>
#include<cstdlib>
#include<cstring>

using namespace std;
struct MyTime { int hours, minutes, seconds; };
int DetermineElapsedTime(const MyTime *t1, const MyTime *t2);
const int hourSeconds = 3600;
const int minSeconds = 60;

int DetermineElapsedTime(const MyTime *t1, const MyTime *t2)
{//problem about static in next line
    static MyTime ((long) (((t2.hours * hourSeconds) + (t2.minutes * minSeconds) +  t2.seconds) -
                   ((t1.hours * hourSeconds) + (t1.minutes * minSeconds) + t1.seconds)));
    return(MyTime);
} 
```

这不是全部，但我需要以某种方式计算从主要输入到另一个输入的时间量。我也需要使用 setfill。

无论如何，有谁知道如何解决在静态之前需要主表达式的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T05:56:24.427

你想写的（我认为）更像

```
MyTime DetermineElapsedTime(const MyTime *t1, const MyTime *t2)
{
    MyTime var = { ...... };
    return var;
} 
```

那条线上的静电背后的意图是什么？如果您多次调用此函数，这将导致问题，因为该行将在程序的生命周期内仅执行一次（如果您放`static`），因此会给出错误的答案。

返回类型也关闭了。你需要像@mux解释的那样修复`->`/`.`

编辑：您使用的是构造函数语法，但没有为 MyTime 定义构造函数，我认为您需要使用`MyTime var = {...}`语法而不是`MyTime var(...)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T05:57:19.347

您忘记了变量的类型和名称，似乎您想要两个`MyTime`对象之间的差异，差异似乎返回为`int`not in a new `MyTime`：

```
int t = ((int) (((t2->hours * hourSeconds) + (t2->minutes * minSeconds) +  t2.seconds) - ((t1->hours * hourSeconds) + (t1->minutes * minSeconds) + t1->seconds)));
return(t); 
```

此外，`t1`and`t2`是指针，所以使用`->`而不是`.`访问成员，如果使用`static`变量，则将初始化一次，并且每次都返回相同的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T06:04:48.657

这段代码有很多问题。

首先，你不能返回一个`struct`类型，你需要返回一个变量。

创建静态变量时，您没有给它命名并使用`=`符号。

使用指针时，您需要使用`->`而不是`.`

现在，您的代码中的逻辑将为您提供以秒为单位的差异，然后您需要将其转换为适当的小时、分钟和秒以填充 MyTime 变量。这是一个如何计算时间的示例（未经测试，只是一个示例）：

```
int difference = (t2->hours * hoursSeconds + t2->minutes * minSeconds + t2->seconds) - (t1->hours * hoursSeconds + t1->minutes * minSeconds + t1->seconds); // this gives you a difference in seconds
int hoursDifference = difference / hoursSeconds; // how many full hours we have
difference -= hoursDifference * hoursSeconds; // remove from total what we just computed
int minsDifference = difference / minsSeconds; // how many full minutes we have
difference -= minsDifference * minsSeconds;
MyTime diff;
diff.hours = hoursDifference;
diff.minutes = minsDifference;
diff.seconds = difference;
return diff; 
```

# regex - MongoDB \uXXXX 问题

> ID：13338981
> 
> 赞同：2
> 
> 时间：2012-11-12T05:53:30.650
> 
> 标签：regex, mongodb, unicode

在我的集合中，以下查询返回一些结果：

```
db.c.find({t:/a/}) 
```

但下面的查询（以及任何其他具有 的正则表达式`\uXXXX`）不返回任何结果：

```
db.c.find({t:/\u0041/}) 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:02:49.393

原因是根据[文档](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions)

> MongoDB 将 PCRE 用于正则表达式。

但是 PCRE 文档说

> 不支持以下 Perl 转义序列：\l、\u、\L、\U 和 \N（如果后跟字符名或 Unicode 值）。（支持 \N 本身，匹配非换行符。）事实上，这些是由 Perl 的通用字符串处理实现的，而不是其模式匹配引擎的一部分。如果 PCRE 遇到任何这些，默认情况下会生成错误。但是，如果设置了 PCRE_JAVASCRIPT_COMPAT 选项，则 \U 和 \u 被解释为 JavaScript 解释它们。

也就是说，[这个 SO question](https://stackoverflow.com/questions/9890467/matching-multibyte-utf8-characters-in-mongodb-regular-expression)可能会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T06:15:04.520

使用 Ray Toal 的答案，使用 PCRE`\x{XXXX}`语法而不是 JavaScript`\uXXXX`解决了问题。

```
db.c.find({t:/\x{0041}/}) 
```

# iphone - 如何在iOS中获取周边网络的实力？

> ID：13338987
> 
> 赞同：1
> 
> 时间：2012-11-12T05:53:57.840
> 
> 标签：iphone, objective-c, ios, ipad, wireless

是否有任何框架可以找出周围的网络和网络强度。请告诉我在 ios 4/5/6 中是否可能。是否有任何示例代码。

例如我在 iPhone Airtel 网络中使用。基于 Airtel 网络，我需要找到该特定区域的其他网络以及该网络的信号强度。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T06:02:19.030

据我所知，这不能使用公共 API 来完成。您需要使用私有 API 来检查[MobileApple80211 框架](http://code.google.com/p/iphone-wireless/wiki/Apple80211Functions)。

是的，有可能。事实上，有一个很棒的第 3 方库，称为[iPhone-Wireless](http://code.google.com/p/iphone-wireless/wiki/Stumbler)

这为您提供 -

1.  查看您所在地区的无线网络。
2.  每个网络的信号强度。

对于 iOS 5，您需要越狱的 iPhone。[Guvener Gokce](https://stackoverflow.com/users/80973/guvener-gokce)有一篇非常有教育意义的博客文章：[iPhone Wireless Scanner iOS5](http://blog.guvenergokce.com/iphone-wireless-scanner-ios5/170/)

希望这会有所帮助，但请记住，此库使用私有 API，您的应用可能会被应用商店拒绝。

更新：也检查一下 -[通过 SDK 访问 iPhone WiFi 信息](https://stackoverflow.com/questions/351954/accessing-iphone-wifi-information-via-sdk)

# scala - 如何使用未过滤的 netty 向响应添加标头值，如何编写代码？

> ID：13338989
> 
> 赞同：2
> 
> 时间：2012-11-12T05:54:03.457
> 
> 标签：scala, netty, response.addheader, unfiltered

我响应一个流，我想将 headerName 添加`fileName`到响应的标题中。但是我不会写？

```
req.respond(CharContentType("text/csv") ~> ResponseBytes(xxxxx.usersExport)) 
```

我知道一个`Header.scala` [https://github.com/unfiltered/unfiltered/blob/master/library/src/main/scala/response/headers.scala](https://github.com/unfiltered/unfiltered/blob/master/library/src/main/scala/response/headers.scala)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-02T13:13:53.757

在当前版本的 unfiltered 中，只需使用以下代码进行响应：

```
Ok ~> ResponseHeader("Content-Type", Set("application/json")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T01:41:22.413

我自己找到了答案：

```
req.respond(new ResponseHeader("key","value") ~> CharContentType("text/csv") ~> ResponseBytes(xxxxx.usersExport)) 
```

# php - 通过 API 的 Google 联系人

> ID：13338990
> 
> 赞同：1
> 
> 时间：2012-11-12T05:54:18.720
> 
> 标签：php, google-contacts-api

我想为用户获取 Google 联系人，并通过 PHP 脚本创建新联系人和更新联系人的日志。有人可以指导我如何进行吗？

我已经使用 0Auth2.0 为日历事件实现了相同类型的服务，但对于联系人，我在 Google PHP 客户端库中没有找到任何 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T15:15:00.663

问题出在示例中，似乎 json 编码器搞砸了。一位开发人员在此链接上写了如何获取电子邮件地址 [http://pastebin.com/kAYT5Jng](http://pastebin.com/kAYT5Jng) 您可以[在此处查看部分讨论](https://groups.google.com/forum/embed/?place=forum/google-contacts-api&showsearch=true#!topic/google-contacts-api/U63UnuqfMoA)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-25T14:27:12.510

你试过这个项目吗 [https://github.com/rapidwebltd/php-google-contacts-v3-api](https://github.com/rapidwebltd/php-google-contacts-v3-api)

获取所有联系人：

```
$contacts = rapidweb\googlecontacts\factories\ContactFactory::getAll();
var_dump($contacts); 
```

创建新联系人

```
$name = "Frodo Baggins";
$phoneNumber = "06439111222";
$emailAddress = "frodo@example.com";
$note = "Note for example";

$newContact = rapidweb\googlecontacts\factories\ContactFactory::create($name, $phoneNumber, $emailAddress, $note); 
```

# algorithm - 找到多边形最小边数的算法

> ID：13338993
> 
> 赞同：1
> 
> 时间：2012-11-12T05:55:04.780
> 
> 标签：algorithm

如何设计一种算法来找到位于两个同心圆之间的多边形的最小边**数**？

与此类似：

![界](../Images/6273ba7b78c69ab16f367c39e16eefc7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T06:44:43.567

首先考虑最简单的情况：内圈在显微镜下很小。只要内圆的半径不为零，最小边数为 3。

多边形什么时候开始需要 4 条边？画一个与圆内接的等边三角形。当内圆的半径到达三角形边的中心点时，多边形开始需要 4 条边。

如果将一个 N 边的正多边形内接在外圆中，则可以使用余弦规则计算从每条边的中点到圆心的距离：

```
distance_to_midpoint = cos ( 360 / (N * 2) ) * radius_of_outer_circle 
```

（说明：如果你用圆的中心点到有问题的一边做一个等腰三角形，半径的角度为 360 / N。在边的中点将三角形分成两半，形成一个带斜边的直角三角形等于外圆的半径，然后使用余弦规则）

现在`distance_to_midpoint`需要大于或等于内圆的半径，所以求解`N`：

```
radius_of_inner_circle = cos(360 / (N * 2)) * radius_of_outer_circle
cos(360 / (N*2)) = radius_of_inner_circle / radius_of_outer_circle
360 / (N*2) = acos(radius_i / radius_o)
N = 180 / (acos(radius_i / radius_o)) 
```

（我还没有仔细检查这个数学，真的很晚了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T06:46:34.647

用 表示多边形的半径，即多边形外接圆的半径`R`。内接圆的半径为

```
r = R*Cos[180°/n] 
```

解决这个问题`n`，消除给出否定结果的虚假解决方案，你有

```
n = 180°/ArcCos[r/R] 
```

你必须摆弄一下才能得到 的整数值`n`，我把它留给你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T06:33:40.757

1.  绘制内圆的切线，标记 A，B - 切线与外圆的交点。
2.  从 B 点画一条内圆的切线（不同），标记与外圆 C 的交点。
3.  重复过程 (2) 直到新切线穿过第一个切线 AB。

该算法将确保您在每一步都覆盖最大径向截面，从而最大限度地减少生成的多边形中的边数。

如果您只想找到边数，只需找到从外圆上的同一点到内圆的 2 个切线之间的角度，并计算有多少个这样的角度构成完整的 360 度（如果有，则加 1其余） - 就像评论中建议的@cheeken

# html - IE、Opera、Safari 上的 Twitter 订阅源

> ID：13338995
> 
> 赞同：0
> 
> 时间：2012-11-12T05:55:14.427
> 
> 标签：html, twitter

我有一个页面，在其中实现了 Twitter 提要小部件。如果在 Firefox 和 Chrome 上运行良好，但在 IE、Opera 和 Safari 上运行良好，它只会出现“@JackSchaible 的推文”，而不是实际的提要本身。有人请帮忙吗？

网址是 www.logicanddesign.ca

或者，这是我的源代码：

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Logic & Design: Home</title>
        <link rel="stylesheet" type="text/css" href="styles/divs.css" />
        <link rel="stylesheet" type="text/css" href="styles/fonts.css" />
        <link rel="stylesheet" type="text/css" href="styles/tags.css" />
        <link rel="stylesheet" type="text/css" href="styles/images.css" />
        <link rel="shortcut icon" href="images/Icon-OR.png" />
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script src="scripts/animations.js"></script>
        <script src="scripts/socialMediaPlugins.js"></script>
    </head>
    <body>
        <div id="wrapper">
            <header>
                <img id="logo" alt="logo" src="images/Logo.png" />
            </header>
            <div id="divider">
                <img id="headerDivider" alt="Line" src="images/Line.jpg" />
            </div>
            <nav>
                <div class="Button" id="selectedButton">
                    <img id="arrowOverlay" alt="Overlay" src="images/Arrows/FadeArrow.png" />
                    <img id="extender" alt="Home" src="Images/Arrows/Arrow%20Body.png" />
                    <img id="selectedArrow" alt="Home" src="Images/Arrows/Home/Home.png" />
                </div>
                <div class="Button" id="aboutButton">
                    <img alt="About Me" src="Images/Arrows/About/About.png"/>
                </div>
                <div class="Button" id="abilitiesButton">
                    <img alt="My Abilities" src="Images/Arrows/Abilities/Abilities.png"/>
                </div>
                <div class="Button" id="portfolioButton">
                    <img alt="My Portfolio" src="Images/Arrows/Portfolio/Portfolio.png"/>
                </div>
                <div class="Button" id="contactButton">
                    <img alt="Contact Me" src="Images/Arrows/Contact/Contact.png"/>
                </div>
            </nav>
            <div id="mainContent">
                <div id="innerContent">
                    <p>Welcome to Logic & Design! If you are looking for work done and it has anything to do with a computer, you have come to the right place! My name is Jack Schaible and I do nearly everything computer-related. Whether it is software analysis, design, web apps, database design, web design or development, whatever your needs, I can fill them. I will take care of the technical side of things so you can focus on what matters: running your business!</p>
                </div>
            </div>
            <div id="imageBar">
                    <div id="networkingIcons">
                        <div id="fb" class="fb-like-box" data-href="http://www.facebook.com/logicanddesign" data-width="200" data-height="75" data-colorscheme="dark" data-show-faces="false" data-stream="false" data-header="false"></div>
                    <a class="twitter-timeline" href="https://twitter.com/JackSchaible" data-widget-id="266804071627898880">Tweets by @JackSchaible</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                    <div class="g-plus" data-width="199" data-height="69" data-href="https://plus.google.com/105579960548041650339" data-rel="author" data-theme="dark"></div>
                    <script type="text/javascript">
                      (function() {
                        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                        po.src = 'https://apis.google.com/js/plusone.js';
                        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
                      })();
                    </script>
                    <script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
<script type="IN/Share" data-counter="right"></script>
                </div>
            </div>
            <footer>
                <p>&copy; <script type="text/javascript">document.write((new Date).getFullYear());</script> Jack Schaible</p>
            </footer>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:19:43.977

当它从服务器访问时，它适用于我的所有浏览器，`http://localhost/twitter.html`但当`http://www.logicanddesign.ca/`作为 html 文件查看时，它不能：`file:///C:/xampp/htdocs/twitter.html`. 这似乎是 .js 脚本的细微差别。

# c# - 如何将 JToken 或 JObject 的值解析为动态确定的类型

> ID：13338996
> 
> 赞同：2
> 
> 时间：2012-11-12T05:55:41.663
> 
> 标签：c#, .net, json.net

我希望有人可以解释如何/为什么这不适用于动态确定对象的类型，然后使用泛型中的类型。

这将起作用，因为我将 DateTime 明确地硬编码为类型：

```
string serializedObject = JsonConvert.SerializeObject(exampleObject);
Type dataType = exampleObject.GetType();
JObject jObject = JObject.Parse(serializedObject);
jObject.Value<DateTime>("propertyName"); 
```

然而，这些似乎都不起作用：

```
jObject.Value<typeof(dateType)>("propertyName");
jObject.Value<dateType>("propertyName"); 
```

如何在此处正确指定属性的类型：

```
jObject.Value<{WHAT SHOULD I PUT HERE}>("propertyName"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:06:38.527

它不起作用，因为您`dataType`在运行时确定，但是，`Value<>`需要在编译时知道类型。一方面，它`Value<T>`可能对必须是什么有限制，如果它不知道会是什么`T`，它就无法在编译时执行这些检查。`dataType``dataType`

以下是一些解决您要完成的任务的答案，尽管处理的是集合，但通常适用于运行时确定的泛型参数： [在运行时指定泛型集合类型参数](https://stackoverflow.com/questions/513952/specifying-generic-collection-type-param-at-runtime)

请注意，您的“{WHAT SHOULD I PUT HERE}”是他们所说的通用参数。

# php - 获取当前页面状态码出错-PHP

> ID：13338997
> 
> 赞同：0
> 
> 时间：2012-11-12T05:55:59.853
> 
> 标签：php, sockets, http-status-code-404

得到这是我管理的php中的片段

```
$server="localhost";
function sockAccess($page)
{
   $errno="";
   $errstr="";
   $fp=0;
   global $server;
   $fp=fsockopen($server,80,$errno,$errstr,30);

   if($fp===0)
   {
      die("Error $errstr ($errno)");
   }
   $out="GET /$page HTTP/1.1\r\n";
   $out.="Host: $server\r\n";
   $out.="Connection: Close\r\n\r\n";

   fwrite($fp,$out);
   $content=fgets($fp);
   $code=trim(substr($content,9,4));
   fclose($fp);
   return intval($code);
}
//echo '".'.$_SERVER["REQUEST_URI"].'"';
//echo '"php self='. $_SERVER['PHP_SELF'].'"';
if(($_SERVER['PHP_SELF']) == ($_SERVER['REQUEST_URI'])}
{
echo "code=", " ", sockAccess('".'.$_SERVER["REQUEST_URI"].'"'), "\n";
}
else
{
echo "code=", " ", sockAccess('".'.$_SERVER["REQUEST_URI"].'"'), "\n";
}
echo "code=", " ", sockAccess("./test.php"), "\n";

echo "code=", " ", sockAccess("brokenlink.php"), "\n"; 
```

问题是它仍然显示`code=404`回`"code=", " ", sockAccess('".'.$_SERVER["REQUEST_URI"].'"'), "\n";` 显所以我认为的解决方案可能是它没有读取已经运行的文件。所以我通过使用 if else 修改了 bove 代码。但现在文件 dosent 运行。这是错误的。提前谢谢。

# css - 如何围绕“绝对定位”元素流动一系列元素？

> ID：13338999
> 
> 赞同：2
> 
> 时间：2012-11-12T05:56:06.680
> 
> 标签：css, css-float, css-position

这是 jsFiddle：http: [//jsfiddle.net/RkMFK/](http://jsfiddle.net/RkMFK/)

这是html和css：

```
<div class="cont">

<div class="item">one</div>
<div class="item">two</div>
<div class="item">three</div>
<div class="item">four</div>
<div class="item">five</div>
<div class="item">six</div>
<div class="item">seven</div>
<div class="item">eight</div>
<div class="item">nine</div>
<div class="item">ten</div>
<div class="item">eleven</div>
<div class="item">twelve</div>
<div class="item">thirteen</div>
<div class="item">fourteen</div>
<div class="item">fifteen</div>
<div class="item">sixteen</div>
<div class="item">seventeen</div>
<div class="item">eighteen</div>

<div class="island"></div>

</div>​

.cont {
    width: 240px;
    height: 160px;
    background-color:blue;
    position:relative;
    overflow:hidden;
}

.island {
    position:absolute;
    top:50px;
    left:80px;
    width:40px;
    height:40px;
    background-color:red;
}

.item {
    float:left;
    display:inline;
    position:relative;
    height:20px;
    margin:2px;
    padding: 0 10px;
    background-color:yellow;
    overflow:hidden;
} 
```

如何使用 CSS 使黄色项目在红色“岛”周围流动？

摘要：我有一个固定尺寸的容器 div。其中某处是特定位置的一个小“岛”div（当前绝对定位，这会将其从流中移除）。如何用围绕岛屿的许多未知宽度的小元素填充容器？有什么办法只用css做到这一点吗？我被困住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:36:29.953

可能是你想要一些像这个[小提琴](http://jsfiddle.net/RkMFK/1/)一样的东西。如果我在某些地方落后，请告诉我。所以我可以锻炼..

代码：html

```
<div class="cont">

<div class="island"></div>
<div class="item">one</div>
<div class="item">two</div>
<div class="item">three</div>
<div class="item">four</div>
<div class="item">five</div>
<div class="item">six</div>
<div class="item">seven</div>
<div class="item">eight</div>
<div class="item">nine</div>
<div class="item">ten</div>
<div style="margin:0 20px" class="item">eleven</div>
<div style="margin:0 25px" class="item">twelve</div>
<div class="item">thirteen</div>
<div style="margin-left:58px;" class="item">fourteen</div>
<div class="item">fifteen</div>
<div class="item">sixteen</div>
<div class="item">seventeen</div>
<div class="item">eighteen</div>

</div> 
```