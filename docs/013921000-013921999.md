# StackOverflow 问答 13921000-13921999

# google-apps-script - 使用 Google Web App 扩展 Google 电子表格 UI

> ID：13921003
> 
> 赞同：4
> 
> 时间：2012-12-17T19:42:43.780
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

我为 Google 电子表格创建了一个脚本，该脚本只是添加了一个新的菜单项，如此处所述的[自定义菜单项在电子表格](https://developers.google.com/apps-script/execution_extensions#menus)中。然后我将此脚本部署为 Web 应用程序，我希望所有安装该应用程序的用户都能够看到新的菜单项。我被困在这一点上。

据我了解，当您将脚本部署为 Web 应用程序时，onOpen 函数失去了它的意义。因此，在 doGet 中，我为 onOpen 事件创建了自定义触发器，将 myOnOpen 处理程序附加到它并在 myOnOpen 中添加了一个菜单项，但该项目没有显示出来。

这是我的代码：

```
function doGet() {
    var newSheet = SpreadsheetApp.create("new sheet");
    var newId = newSheet.getId();
    ScriptProperties.setProperty('newId', newId); 

    ScriptApp.newTrigger("myOnOpen")
        .forSpreadsheet(newId)
        .onOpen()
        .create();
};

function myOnOpen() {
    var newId = ScriptProperties.getProperty('newId');
    var sheet = SpreadsheetApp.openById(newId);

    var entries = [ { name : "Show bingo", functionName : "Bingo" } ];
    sheet.addMenu("My Menu", entries);
};

function Bingo() {
    Browser.msgBox("Bingo!");
}; 
```

因此，当安装该应用程序的用户打开“新工作表”电子表格时，他看不到“我的菜单”。我在这里做错了什么？为什么菜单项不显示？归根结底，我想创建一个 Web 应用程序，它通过额外的菜单和对话框扩展了 Google 电子表格 UI。

欢迎任何建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:49:35.837

当您将脚本部署为 Web 应用程序时，Web 应用程序的用户将只能看到您从 doGet 函数“返回”的内容。您可以使用[UiApp](https://developers.google.com/apps-script/uiapp)或[HtmlService](https://developers.google.com/apps-script/html_service)创建内容并返回此内容以在浏览器中呈现。您的新菜单项附加到电子表格，因此它们只能在用户转到电子表格本身时显示（激活 onOpen 触发器等）。

# ruby-on-rails-3 - AngularJS 视图在 Rails 应用程序中的位置

> ID：13921006
> 
> 赞同：18
> 
> 时间：2012-12-17T19:42:55.093
> 
> 标签：ruby-on-rails-3, angularjs

我正在尝试将 AngularJS 集成到 Rails 应用程序中。我有一个带有书籍控制器和书籍模型的 Rails 应用程序。在 Rails 索引视图中，我有这个，AngularJS 应该从这里接管：

```
.page_text{"ng-app" => "books"}
  .row
    .twelve.columns
      %div{"ng-view" => ""} 
```

AngularJS 控制器看起来像这样：

```
function BooksOverviewCtrl($scope, $http) {
  $http.get('/books.json').success(function(data) {
    $scope.books = data;
  });
}
BooksOverviewCtrl.$inject = ['$scope', '$http']; 
```

这是 routeProvider：

```
angular.module('books', []).
  config(['$routeProvider', function($routeProvider) {
  $routeProvider.
      when('/books', { templateUrl: 'books/book-overview.html.haml',   controller: BooksOverviewCtrl });
}]); 
```

目前，AngularJS 视图位于“app/assets/javascripts/angularjs/books/book-overview.html.haml”中。当我加载页面时，它说找不到页面，那么我必须在哪里将 AngularJS 视图存储在我的 Rails 应用程序中？这是错误：

```
GET http://localhost:3000/books/book-overview.html.haml 404 (Not Found) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-10-31T16:35:47.347

我使用[$templateCache](http://docs.angularjs.org/api/ng.$templateCache)来处理这个问题。所以在我看来：

```
<script type="text/ng-template" id="bookOverview.html">
  <%= render partial: "book-overview" %>
</script> 
```

然后使用 $routeProvider 你可以：

```
$routeProvider
  .when('/books', {
    templateUrl: 'bookOverview.html',
    controller: BooksOverviewCtrl 
  }); 
```

这样，您可以将视图保存在`app/views/books`通常保存它们的目录中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-12T18:56:54.577

经过一番研究，我发现有两种方法可以解决这个问题。第一个选项是 Mahbub 和 Adnan Doric 都提到的方式：将文件存储在公共文件夹中，因为它们无论如何都是静态的 html 文件。

虽然这行得通，但对我来说感觉不自然，因为那样文件就会分散。有些在 public 文件夹中，有些在 assets/javascripts 文件夹中。不是我的首选，但它可能对其他人有用。

第二个选项是将路由存储在特定文件中，例如“assets/javascripts/routes.js.erb”。由于“.erb”，可以在文件中使用 Rails 资产路径并创建如下相对路径：

```
when('/books', { templateUrl: "<%= asset_path('book-overview.html.haml') %>",   controller: BooksOverviewCtrl }); 
```

也许不是完美的解决方案，但对我来说这是最好的，因为现在我所有的 Angular 文件都保存在“assets/javascripts”文件夹中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-16T04:33:02.500

如果您使用[angular-rails-templates](https://github.com/pitr/angular-rails-templates) gem，您可以将它们放入 rails 资产管道并使用 angular 的[模板缓存](http://docs.angularjs.org/api/ng.%24templateCache)。

链接：

*   [角轨模板](https://github.com/pitr/angular-rails-templates)
*   [模板缓存](http://docs.angularjs.org/api/ng.%24templateCache)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-12T15:01:39.570

您将 AngularJS 部分放在公共文件夹中，而不禁用资产管道，只需确保它可以在您的浏览器中通过指定的 URL 访问。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-08T00:01:31.953

我在 App/Assets/Javascript 中创建了一个名为 Angular 的新文件夹。Angular 文件夹包含控制器、视图、服务和指令的子文件夹。

现在要引用一个视图，让我们说 sample.html。这就是我的 templateUrl 路径的样子。

.when('/sample', { templateUrl: '/assets/angular/views/sample.html', 控制器: 'SampleCtrl' })

这样，所有 Angular 代码都**驻留在一个文件夹**中，而不是分散在各处。此外，**Rails 资产管道**可用于缩小和压缩 Angular 的控制器和服务。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-21T18:31:33.327

我还建议使用**Angular Rails 模板**

# 宝石文件

`gem 'angular-rails-templates'`

`$ bundle install`

# 应用程序.js

`//= require angular-rails-templates`

# 应用程序.js

`angular.module('myApp', ['templates'])`

现在，当您包含`templateUrl: 'books/book-overview.html.haml'`它时，它将在您的资产文件夹中搜索正确的视图。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-18T09:21:49.883

I've turned the asset pipeline off in config/application.rb and put all the files in public folder. Since the client side files (angularJS project) don't need any processing, filters, i chose that way.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-08T09:28:36.303

您可以尝试使用 gem[`js_assets`](https://github.com/kavkaz/js_assets)

### AngularJS 的苗条

例如，我们想在 AngularJS 应用程序中使用模板 Slim。让我们的模板将在`app/assets/webapp/`. 我们进行以下设置：

```
# config/application.rb
config.assets.paths << Rails.root.join('app', 'assets', 'webapp')

# config/initizlizers/assets_engine.rb
Rails.application.assets.register_engine('.slim', Slim::Template)

# config/environments/production.rb
config.assets.precompile += ['*.html'] 
```

不要忘记在您的`application.js`

```
//= require app_assets 
```

现在对于模板`app/assets/webapp/blogs/edit.html.slim`，我们可以根据环境获取路径：

```
var path = asset_path('blogs/edit.html')

// the function will return for development:
// /assets/blogs/edit.html

// and for production
// /assets/blogs/edit-5eb3bb250d5300736006c8944e436e3f.html

$routeProvider
    .when('/books', {
    templateUrl: assetPath('bookOverview.html'),
    controller: BooksOverviewCtrl 
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-02T03:54:46.523

如果您想将两者完全分开，以下可能会很好。

一种选择可能是在`/ngapp/dist`or`/ngapp/build`文件夹与`/public`文件夹或`/public`. 使用 grunt/node 服务器进行开发和测试，因此您不必每次都重新构建，然后在准备推送到远程服务器时再到`grunt build`链接的文件夹。`/ngapp/dist`

这使 AngularJS 文件夹与 Rails 应用程序分开，但只允许访问最终构建文件，而不是 AngularJS 应用程序文件夹中的源文件。

# java - MySql/JAVA 替换

> ID：13921008
> 
> 赞同：0
> 
> 时间：2012-12-17T19:42:59.633
> 
> 标签：java, mysql

我有一个问题，当我想用​​这个方法从 java 更改数据库中的内容时：

```
stmt.executeUpdate("UPDATE contentPage1 SET Content = REPLACE(Content,'"+oldContenido+"','"+newContenido+"');"); 
```

我无法更改内容，因为我想输入新文本，而此文本包含诸如 '' 之类的字符，我无法更改旧内容！我所做的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:49:09.213

[PreparedStatements](http://docs.oracle.com/javase/6/docs/api/index.html?java/sql/PreparedStatement.html)允许您在 SQL 中使用占位符 (?) 并稍后填写值。他们还处理自动转义......

```
PreparedStatement pstmt = con.prepareStatement("UPDATE contentPage1 SET Content = REPLACE(Content, ?, ?);");
pstmt.setString(1, "first");
pstmt.setString(2, "second - characters like ' will be escaped automatically!"); 
```

**更新**

在下面的评论中，听起来 OP 实际上并没有尝试使用 REPLACE SQL 函数，他们只是尝试更新给定列中的数据。这是一些示例代码来实现这一点（@TedHopp 评论的略微修改版本）：

```
int messageId = 123; // use the PK or unique identifier of the record you want to update
PreparedStatement pstmt = con.prepareStatement("UPDATE contentPage1 SET Content = ? WHERE Id = ?;"); // 'Id' is whatever your PK column is
pstmt.setString(1, "my new message content");
pstmt.setInt(2, messageId);
int numRowsAffected = pstmt.executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:46:58.697

您可能想要使用[PreparedStatements](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/PreparedStatement.html)。您可以将参数添加*到语句*对象，它会照顾您正确处理任何字符转义、类型转换等。

编辑：Jesse Web 是对的，并提供了一个示例解决方案。他的回答应该被接受。

# c# - 自引用列表到多个结构化列表？

> ID：13921015
> 
> 赞同：0
> 
> 时间：2012-12-17T19:43:16.427
> 
> 标签：c#, list, recursion, self-reference

我无法让我的递归再次工作：/

我有一个包含一些自引用项目的列表，但是如果它们基于它们的键属于一起，我如何将它们放入列表列表中。

有人可以帮我解决这个问题吗？请 ：）

这是一些代码。

```
public class Employees
{
    public int employeeID { get; set; }
    public int? parentEmployeeID { get; set; }
    public string Name { get; set; }
    public string Position { get; set; }
}
    List<Employees> Employeelist = new List<Employees> {
new Employees { employeeID = 1, parentEmployeeID = null, Name = "Mike", Position = "CIO" },
new Employees { employeeID = 2, parentEmployeeID = 1, Name = "Robs", Position = "Sales" },
new Employees { employeeID = 3, parentEmployeeID = 7, Name = "Fred", Position = "Manager" },
new Employees { employeeID = 4, parentEmployeeID = 6, Name = "Pablo", Position = "Economy" },
new Employees { employeeID = 5, parentEmployeeID = 2, Name = "Erica", Position = "Sometingelse" },
new Employees { employeeID = 6, parentEmployeeID = null, Name = "Obama", Position = "" },
new Employees { employeeID = 7, parentEmployeeID = 5, Name = "Brad", Position = "" },
new Employees { employeeID = 8, parentEmployeeID = 3, Name = "Amy", Position = "" },
new Employees { employeeID = 9, parentEmployeeID = 4, Name = "Howard", Position = "" },
};

    List<List<Employees>> StrucutedEmployeeList = new List<List<Employees>>();
    private void ArrangeInNewlistofLists(Employees root, int? parentOptionID)
    {
        foreach (Employees option in Employeelist.Where(x => x.employeeID == parentOptionID))
        {
            List<Employees> temp = new List<Employees>();
            StrucutedEmployeeList.Add(temp);
            ArrangeInNewlistofLists(option, option.parentEmployeeID);
        }
    }

    public void ArrangeListWithRecursion()
    {
        foreach (var item in Employeelist)
        {
            if (item.parentEmployeeID == null)
                ArrangeInNewlistofLists(item, null);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:58:33.030

首先： `foreach (Employees option in Employeelist.Where(x => x.employeeID == parentOptionID))`- 这将永远不会返回任何结果，因为您没有 ID 为空的员工......

我想你想要`x.parentEmployeeID`例如

```
foreach (Employees option in Employeelist.Where(x => x.parentEmployeeID == parentOptionID)) 
```

此外，这是没有的，因为：

```
List<Employees> temp = new List<Employees>();
StrucutedEmployeeList.Add(temp); 
```

你总是在添加空列表，而不是对它们做任何其他事情......

这应该做你想要的：

```
public class Employees
{
    public int employeeID { get; set; }
    public int? parentEmployeeID { get; set; }
    public string Name { get; set; }
    public string Position { get; set; }

    public List<Employees> subEmp { get; set; }
} 
```

请注意，您有 subEmp 列表。现在填充 call `ArrangeListWithRecursion()`：

```
 List<Employees> StrucutedEmployeeList = new List<Employees>();
    private Employees ArrangeInNewlistofLists(Employees item, int? parentOptionID)
    {
        item.subEmp = new List<Employees>();

        foreach (Employees option in Employeelist.Where(x => x.parentEmployeeID == parentOptionID))
        {
            item.subEmp.Add(ArrangeInNewlistofLists(option, item.employeeID));
        }
        return item;
    }

    public void ArrangeListWithRecursion()
    {
        foreach (var item in Employeelist.Where(x=>x.parentEmployeeID == null))
        {
            StrucutedEmployeeList.Add(ArrangeInNewlistofLists(item, item.employeeID));
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:20:23.023

我不太确定您要通过示例完成什么。假设您正在尝试将相关员工分组在一起，一种方法可能是像这样重新组织您的对象：

员工等级：

```
public class Employees : List<Employee>
{
    public new void Add(Employee employee)
    {
        employee.employees = this;
        base.Add(employee);
    }
} 
```

员工等级：

```
public class Employee
{
    public Employees employees { get; set; }
    public int employeeID { get; set; }
    public int? parentEmployeeID { get; set; }
    public string Name { get; set; }
    public string Position { get; set; }

    public Employee Boss 
    {
        get 
        {
            return employees.FirstOrDefault(e => e.employeeID == this.parentEmployeeID); 
        }
    }

    public IEnumerable<Employee> Subordinates 
    { 
        get
        {
            return employees.Where(e => e.parentEmployeeID == this.employeeID);
        }
    }
} 
```

填充员工：

```
var employees = new Employees();
employees.Add(new Employee { employeeID = 1, parentEmployeeID = null, Name = "Mike", Position = "CIO" });
employees.Add(new Employee { employeeID = 2, parentEmployeeID = 1, Name = "Robs", Position = "Sales" });
employees.Add(new Employee { employeeID = 3, parentEmployeeID = 7, Name = "Fred", Position = "Manager" });
employees.Add(new Employee { employeeID = 4, parentEmployeeID = 6, Name = "Pablo", Position = "Economy" });
employees.Add(new Employee { employeeID = 5, parentEmployeeID = 2, Name = "Erica", Position = "Sometingelse" });
employees.Add(new Employee { employeeID = 6, parentEmployeeID = null, Name = "Obama", Position = "" });
employees.Add(new Employee { employeeID = 7, parentEmployeeID = 5, Name = "Brad", Position = "" });
employees.Add(new Employee { employeeID = 8, parentEmployeeID = 2, Name = "Amy", Position = "" });
employees.Add(new Employee { employeeID = 9, parentEmployeeID = 2, Name = "Howard", Position = "" }); 
```

这允许您仅填充单个员工列表，并且您可以使用单个员工对象上的属性从那里获取每个员工的老板或他们的下属。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:13:54.800

您构建代码的方式不允许真正的递归解决方案。通过将 children 属性添加到Employees，您将获得所需的解决方案。

```
 public class Employees
        {
            public int employeeID { get; set; }
            public int? parentEmployeeID { get; set; }
            public string Name { get; set; }
            public string Position { get; set; }

            public List<Employees> Children { get; set; }
        }

        public void Arrange()
        {
            Employeelist = ArrangeListWithRecursion();
        }

        private List<Employees> ArrangeListWithRecursion(int? parentId = null)
        {
            var result = new List<Employees>();
            foreach (var employee in Employeelist.Where(e => e.parentEmployeeID == parentId))
            {
                var children = Employeelist.Where(e => e.parentEmployeeID == employee.employeeID).ToList();
                employee.Children = ArrangeListWithRecursion(employee.employeeID);
                result.Add(employee);
            }
            return result;
        } 
```

# linux - 将在 Linux 上完成的 Perforce 移动匹配到 Windows

> ID：13921016
> 
> 赞同：0
> 
> 时间：2012-12-17T19:43:22.517
> 
> 标签：linux, windows, perforce, p4v

我已经使用 AltRoots 参数设置了一个共享工作区，以便我可以在 Linux 机器上运行我的代码并在我的 Windows 机器上进行开发（个人偏好）。我`p4 move`在 Linux 中的文件上做了一些“”。但是，这些移动不会在我的 Windows 工作区上得到更新。待处理的 Windows 更改列表具有“移动”更改，但是当我尝试在 Windows 上提交（以及其他编辑）时，P4V 抱怨那些移动的文件不存在。

如何在我的工作区之间强制进行硬同步？或者当我`P4 move`在 Linux 上执行“”时，Windows 是否真的更新了？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-31T17:40:12.343

要在两台机器之间建立一个“共享工作空间”，实际的工作空间文件系统需要共享（例如通过 Samba）。

Perforce 本身不会在共享单个客户端规范的两台主机之间复制本地文件系统更改；就 Perforce 而言，一切都是通过软件仓库同步的（这意味着您需要使用两个客户端规范并从一个提交 [或搁置] 更改，然后再将它们同步到另一个）。

对于您描述的工作流程，使用[Samba](https://en.wikipedia.org/wiki/Samba_(software))听起来像是要走的路。由于您的开发环境是在 Windows 上，我进一步建议您使用“win” LineEnd 设置（希望您的 Linux 工具知道如何说 CRLF——如果不是，我可能会建议一个基于搁置的工作流程，因为那会让Perforce 为你做 LineEnd 翻译）。

# iphone - xcode中的照片网格

> ID：13921019
> 
> 赞同：-3
> 
> 时间：2012-12-17T19:43:32.817
> 
> 标签：iphone, objective-c, ios, xcode, ios6

我缺乏 xcode、cocoa touch 或 c++ 等方面的知识。现在，我将尝试制作一个摄影应用程序，其中有一个标签栏和 4 个子类别。在第一类中，我希望它是一个可以通过触摸放大的照片网格。几个月来我真的没有时间学习更多关于编程的知识。这是如何以最简单的方式实现的？我目前倾向于 AQGridView，但由于我对该领域的了解为零，我无法完全理解这些说明。现在，在你问我为什么要在没有任何知识的情况下制作应用程序之前，让我回答一下。我的父亲是一名摄影师，并希望获得一个应用程序。如果我设法为他制作一个，我可以获得大量工作，他的摄影师朋友为应用程序付费。如果我已经做到了，

所以，总而言之，我的问题是：我如何以最简单的方式实现这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:53:44.903

听起来像是新 UICollectionViews 的绝佳候选者。那里有许多网格框架，但如果你有任何 iOS 上的 TableViews 经验，CollectionViews 可以轻而易举地快速启动和运行。可以在此处找到学习和实现 CollectionViews（API 文档之外）的最佳资源之一：

[UICollectionView 自定义布局教程](http://skeuo.com/uicollectionview-custom-layout-tutorial)

# php - 从电子邮件正文分配 php 变量

> ID：13921028
> 
> 赞同：0
> 
> 时间：2012-12-17T19:43:54.890
> 
> 标签：php, email, variables

我很难弄清楚下一步该去哪里。我已经在我的 cpanel 上设置了一个管道来编程，它接收电子邮件并将它们发送到我拥有的 php 脚本。

该脚本获取电子邮件，提取正文，并将整个正文分配给一个名为 $body 的变量。接下来我需要做的是获取正文中的信息，并使它们成为我可以发送到 API 的更多 php 变量。

电子邮件将始终采用相同的格式。这就是我要求脚本向我发送 $body 变量的电子邮件时得到的结果。

```
--14dae934062f9d9cee04d111829f
Content-Type: text/plain; charset=ISO-8859-1

*field_1* = Illinois
*field_2* = miguel
*field_3* = martinez
*field_4* = miguel41303427@sbcglobal.net
*field_5* = 2305250033
*field_6* = streamwood
*field_7* = il
*field_8* = 2001
*field_9* = BMW
*field_10* = 325i
*field_11* = 129000

--14dae934062f9d9cee04d111829f
Content-Type: text/html; charset=ISO-8859-1

<p class="MsoNormal"><b>field_1</b> = Illinois<br>
<b>field_2</b> = miguel<br>
<b>field_3</b> = martinez<br>
<b>field_4</b> = <a href="mailto:miguel41303427@sbcglobal.net">miguel41307@sbcglobal.net</a><br>
<b>field_5</b> = 2305250033<br>
<b>field_6</b> = streamwood<br>
<b>field_7</b> = il<br>
<b>field_8</b> = 2001<br>
<b>field_9</b> = BMW<br>
<b>field_10</b> = 325i<br>
<b>field_11</b> = 129000<br></p>

--14dae934062f9d9cee04d111829f-- 
```

有没有办法获取 field_1 的值，在这种情况下是伊利诺伊州，并将其分配给 $state

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:49:07.633

可以使用正则表达式来完成。尝试这样的事情：

```
if(preg_match('/<b>field\_1<\/b>(.*)<br>/', $body, $matches))
 $field1 = $matches[1];
} 
```

# ldap - Phpldapadmin 因未知原因无法工作

> ID：13921030
> 
> 赞同：9
> 
> 时间：2012-12-17T19:44:00.070
> 
> 标签：ldap, openldap, phpldapadmin

我正在尝试安装 LDAP。我已经`slapd`在 Debian 上安装了 PhpLDAPAdmin 工具，但是当我登录时，我什么也做不了。尽管我以 身份登录`'cn=admin,dc=barbucha'`，但我看到的是右侧而不是树：

```
Logged in as: dc=example,dc=com
   This base cannot be created with PLA. 
```

我试过谷歌，但这个错误似乎很少见。我已经创建了一个数据库`'cn=admin,dc=barbucha'`。（否则我无法使用该名称登录。）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-18T09:17:13.077

这种情况很少发生。由于未知原因，配置过程没有从 LDAP 服务器获取数据，也没有在`/etc/phpldapadmin/config.php`脚本中设置正确的值。第 300 行附近的某处是错误生成的两条重要行：

```
$servers->setValue('server','base',array('dc=example,dc=com'));
$servers->setValue('login','bind_id','cn=admin,dc=example,dc=com'); 
```

这些设置使用 PhpLDAPAdmin 访问 LDAP 数据集，无论您登录时使用的登录名如何。更新这些行有助于：

```
$servers->setValue('server','base',array('dc=barbucha'));
$servers->setValue('login','bind_id','cn=admin,dc=barbucha'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-17T07:27:44.730

可能你应该先添加一个 LDAP 根：在 /etc/openldap/ 中创建一个文件

```
vim /etc/openldap/base.ldif 
```

然后输入：

```
dn: dc=em,dc=com
o: RDCenter
objectclass: dcobject
objectclass: organization 
```

并在目录中运行此命令：

```
ldapadd  -f base.ldif  -x -D  cn=Admin,dc=em,dc=com -W 
```

输入你自己的密码，就会添加根节点。重新打开phpldapadmin，你会发现一切正常

# c# - 使用 ZipFiles 压缩文件

> ID：13921031
> 
> 赞同：0
> 
> 时间：2012-12-17T19:44:00.587
> 
> 标签：c#

说我是否有以下内容：

```
 using (ZipFile zip = new ZipFile())
    {
      zip.AddFile("C:\\ReadMe.txt");
      zip.AddFile("C:\\7440-N49th.png");
      zip.AddFile("C:\\2008_Annual_Report.pdf");        
      zip.Save("C:\\Files\\ZipFiles\\Test.zip");
    } 
```

我感到困惑的是，当我打开 zip 文件时，它转到 C：首先我必须单击 Files，然后我必须单击 ZipFiles 才能查看 zip 文件中的内容。

为什么当我单击 zip 文件时它不打开我添加的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:47:42.587

你在使用 DotNetZip 吗？您的意思是要将文件添加到 zip 文件的根目录吗？如果是这样，也许你正在尝试做

```
zip.AddFile("C:\\ReadMe.txt", ""); 
```

第二个字符串是您将其添加到 zip 中的路径（如果是根，则为空字符串）。

# php - 验证表格

> ID：13921033
> 
> 赞同：0
> 
> 时间：2012-12-17T19:44:11.960
> 
> 标签：php, codeigniter

我有一个使用 jQuery ajax 提交的表单，并将其发送到一个名为 submit 的控制器函数，以验证并使用表单数据执行我需要执行的任何其他任务。当用户名不只包含小写字母和数字时，我试图找出为什么我的表单验证库没有显示错误。

```
$this->form_validation->set_rules('username', 'Username', 'trim|required|xss_clean|strtolower'); 
```

表单提交后的 POST 值：

```
username    TestingUSER 
```

编辑：

据我所知，它可以正确地到达 php 服务器端。

PHP：

```
public function submit()
{
    $output_status = 'Notice';
    $output_title = 'Not Processed';
    $output_message = 'The request was unprocessed!';

    $this->form_validation->set_rules('username', 'Username', 'trim|required|xss_clean|strtolower');
    $this->form_validation->set_rules('password', 'Password', 'trim|required|xss_clean');
    $this->form_validation->set_rules('remember', 'Remember Me', 'trim|xss_clean|integer');

    if ($this->form_validation->run() == TRUE)
    {

    }
    else
    {
        $output_status = 'Error';
        $output_title = 'Form Not Validated';
        $output_message = validation_errors();
    }

    echo json_encode(array('output_status' => $output_status, 'output_title' => $output_title, 'output_message' => $output_message));
} 
```

编辑2：

基于谢赫的回答。我收到回复说“无法访问与您的字段名称对应的错误消息”。它确实说标题的表单未验证，因此该消息不起作用。

```
public function check_username($str)
{
    if (preg_match('#[0-9]#', $str) && preg_match('#[a-z]#', $str)) 
    {
        return TRUE;
    }
    $this->form_validation->set_message('username', 'This is not have an accepted value!');
    return FALSE;
} 
```

编辑 3：

我想要做的是让它报告存在验证错误，但没有 pnotify 响应中的特定错误。但是我确实希望它在表单元素下显示特定错误。

jQuery代码：

[http://pastebin.com/1KehMJkh](http://pastebin.com/1KehMJkh)

登录表单：

[http://pastebin.com/EfpBfbfN](http://pastebin.com/EfpBfbfN)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:02:38.097

我认为您可以在控制器中使用回调函数

```
public function check_username($str)
{
    if (preg_match('#[a-z0-9]#', $str)) {
        return TRUE;
    }
    $this->form_validation->set_message('check_username', 'This is not have an accepted value!');
    return FALSE;
} 
```

验证规则`username`

```
$this->form_validation->set_rules('username', 'Username', 'trim|required|xss_clean|callback_check_username'); 
```

[你可能也喜欢这个](http://www.witheringtree.com/2011/09/custom-codeigniter-validation-methods/)。

# javascript - 使用 javascript 切换（显示/隐藏）元素

> ID：13921042
> 
> 赞同：1
> 
> 时间：2012-12-17T19:44:43.837
> 
> 标签：javascript, html, css

通过使用此方法，我可以使用 2 个按钮显示/隐藏元素：

```
<script type="text/javascript">
function showStuff(id) {
        document.getElementById(id).style.display = 'block';
}
function hideStuff(id) {
    document.getElementById(id).style.display = 'none';
}
</script>

<input type="button" onClick="hideStuff('themes')" value="Hide">
<input type="button" onClick="showStuff('themes')" value="Show">
<div id="themes" style="display:block">
    <h3>Stuff</h3>
</div> 
```

有没有使用单个按钮的方法？也许如果&否则？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T19:51:04.550

您已经回答了您的问题...使用`if`/ `else`：

```
function toggle(id) {
    var element = document.getElementById(id);

    if (element) {
        var display = element.style.display;

        if (display == "none") {
            element.style.display = "block";
        } else {
            element.style.display = "none";
        }
    }
} 
```

这不会是完全万无一失的，以防您隐藏/显示`inline`或`inline-block`元素，*或者*如果您对元素使用非默认值`display`......例如将 div 设置`display`为“内联”（无论出于何种原因）然后尝试使用此功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:50:52.210

是的，如果/否则会起作用

```
function toggle(id){
    var elem = document.getElementById(id);
    if(elem.style.display == 'block'){
        elem.style.display == 'none'
    } else if(elem.style.display == 'none'){
        elem.style.display == 'block'
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-15T09:44:29.070

我想你的意思是这样的：

```
 function toggle(id){
var elem = document.getElementById(id);
if(elem.style.display == "block"){
    elem.style.display="none";
} else {
    elem.style.display="block";
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-14T20:53:29.073

这是一个替代解决方案。除了使用`document.getElementById`，您还可以使用**`document.querySelector`**which 返回文档中与指定选择器或选择器组匹配的**第一个元素。**

解决方案代码：

```
function toggleShow() {
    var elem = document.querySelector(id);
    if(elem.style.display == 'inline-block'){
      elem.style.display="none";
    }
    else {
      elem.style.display = "inline-block";
    }
  } 
```

# iphone - 当我构建并运行应用程序时，iPhone 模拟器屏幕是黑色的

> ID：13921044
> 
> 赞同：2
> 
> 时间：2012-12-17T19:44:50.513
> 
> 标签：iphone, objective-c, ios

我今年 17 岁，对这一切都很陌生，但是我已经学习了一段时间并掌握了基础知识，但是在构建和运行我的应用程序时遇到了没有显示任何内容的问题。

我正在制作一个简单的“类似乒乓球的游戏”，它有一个包含四个选项的菜单，每个选项都有一个不同的“游戏”视图，但是我只是专注于让菜单具有一个“游戏”视图，直到我能找出问题所在在此之前，我为其他 3 种“游戏场景”（网球、经典、溜冰场、沙滩球——使用网球 atm）添加了其他 3 个视图。这是我的 AppDelegate.h 文件的代码；

```
#import <UIKit/UIKit.h>

@class ViewController;

@interface AppDelegate : NSObject <UIApplicationDelegate> {

UIWindow *window;
ViewController *viewController;

}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet ViewController *viewController;

@end 
```

这是 AppDelegate.m 文件；

```
#import "AppDelegate.h"
#import "ViewController.h"

@implementation AppDelegate

@synthesize window;
@synthesize viewController;

- (void)applicationDidFinishLaunching:(UIApplication *)application {

// Override point for customization after app launch
[window addSubview:viewController.view];
[window makeKeyAndVisible];
}

@end 
```

接下来是 ViewContoller.h 文件；

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {

IBOutlet UIImageView *menuBG;

IBOutlet UIButton *playClassic;
IBOutlet UIButton *playTennis;
IBOutlet UIButton *playIceHockey;
IBOutlet UIButton *playBeachball;

IBOutlet UIImageView *court;
IBOutlet UIImageView *ball;
IBOutlet UIImageView *racquet_blue;
IBOutlet UIImageView *racquet_red;

IBOutlet UILabel *tapToBegin;

IBOutlet UILabel *player_score;
IBOutlet UILabel *computer_score;

CGPoint ballVelocity;

NSInteger gameState;
NSInteger previousState;

NSInteger player_score_value;
NSInteger computer_score_value;

IBOutlet UIButton *back;

}

@property(nonatomic,retain) IBOutlet UIImageView *menuBG;

@property(nonatomic,retain) IBOutlet UIButton *playClassic;
@property(nonatomic,retain) IBOutlet UIButton *playTennis;
@property(nonatomic,retain) IBOutlet UIButton *playIceHockey;
@property(nonatomic,retain) IBOutlet UIButton *playBeachball;

@property(nonatomic,retain) IBOutlet UIImageView *court;
@property(nonatomic,retain) IBOutlet UIImageView *ball;
@property(nonatomic,retain) IBOutlet UIImageView *racquet_red;
@property(nonatomic,retain) IBOutlet UIImageView *racquet_blue;

@property(nonatomic,retain) IBOutlet UILabel     *tapToBegin;

@property(nonatomic,retain) IBOutlet UILabel *player_score;
@property(nonatomic,retain) IBOutlet UILabel *computer_score;

@property(nonatomic) CGPoint ballVelocity;

@property(nonatomic) NSInteger gameState;
@property(nonatomic) NSInteger previousState;

@property(nonatomic,retain) IBOutlet UIButton *back;

-(void)reset:(BOOL) newGame;

-(IBAction)playClassicButtonClicked;
-(IBAction)playTennisButtonClicked;
-(IBAction)playIceHockeyButtonClicked;
-(IBAction)playBeachballButtonClicked;
-(IBAction)BackButtonClicked;

@end 
```

这是 ViewContoller.m 文件；

```
#import "ViewController.h"

#define kGameStateRunning 1
#define kGameStatePaused  2
#define kStateMenu  1

#define kBallSpeedX 4
#define kBallSpeedY 6

#define kCompMoveSpeed 3
#define kScoreToWin 5

@implementation ViewController
@synthesize      ball,racquet_blue,racquet_red,player_score,computer_score,gameState,ballVelocity,tapToBegin,back,menuBG,playBeachball,playClassic,playIceHockey,playTennis,court,previousState;

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
if(gameState == kGameStatePaused) {
    tapToBegin.hidden = YES;
    gameState = kGameStateRunning;
} else if(gameState == kGameStateRunning) {
    [self touchesMoved:touches withEvent:event];
}
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
UITouch *touch = [[event allTouches] anyObject];
CGPoint location = [touch locationInView:touch.view];
CGPoint xLocation = CGPointMake(location.x,racquet_blue.center.y);
racquet_blue.center = xLocation;
 }

-(void) gameLoop {
// Running
if(gameState == kGameStateRunning) {

    if (previousState != kGameStateRunning)
    {
        menuBG.hidden = 1;

        playClassic.hidden = 1;
        playTennis.hidden = 1;
        playIceHockey.hidden= 1;
        playBeachball.hidden = 1;

        ball.hidden = 0;
        court.hidden = 0;
        racquet_blue.hidden = 0;
        racquet_red.hidden = 0;
        player_score.hidden = 0;
        computer_score.hidden = 0;
        tapToBegin.hidden = 0;
        back.hidden = 0;

    }

    previousState = kGameStateRunning;
}
else if (gameState == kStateMenu)
{
    if(previousState != kStateMenu) {

        menuBG.hidden = 0;

        playClassic.hidden = 0;
        playTennis.hidden = 0;
        playIceHockey.hidden = 0;
        playBeachball.hidden = 0;

        ball.hidden = 1;
        court.hidden = 1;
        racquet_blue.hidden = 1;
        racquet_red.hidden = 1;
        player_score.hidden = 1;
        computer_score.hidden = 1;
        tapToBegin.hidden = 1;
        back.hidden = 1;
    }
    previousState = kStateMenu;

    }

    ball.center = CGPointMake(ball.center.x + ballVelocity.x , ball.center.y +    ballVelocity.y);

    if(ball.center.x > self.view.bounds.size.width || ball.center.x < 0) {
        ballVelocity.x = -ballVelocity.x;
    }

    if(ball.center.y > self.view.bounds.size.height || ball.center.y < 0) {
        ballVelocity.y = -ballVelocity.y;
    }

    if(CGRectIntersectsRect(ball.frame,racquet_blue.frame)) {
        if(ball.center.y < racquet_blue.center.y) {
            ballVelocity.y = -ballVelocity.y;
            NSLog(@"%f %f",ball.center,racquet_red.center);
        }
    }

    if(CGRectIntersectsRect(ball.frame,racquet_red.frame)) {
        if(ball.center.y > racquet_red.center.y) {
            ballVelocity.y = -ballVelocity.y;
        }
    }

    // Begin Simple AI
    if(ball.center.y <= self.view.center.y) {
        if(ball.center.x < racquet_red.center.x) {
            CGPoint compLocation = CGPointMake(racquet_red.center.x - kCompMoveSpeed, racquet_red.center.y);
            racquet_red.center = compLocation;
        }

            if(ball.center.x > racquet_red.center.x) {
                CGPoint compLocation = CGPointMake(racquet_red.center.x + kCompMoveSpeed, racquet_red.center.y);
                racquet_red.center = compLocation;
            }
        }

    // Begin Scoring Game Logic
    if(ball.center.y <= 0) {
        player_score_value++;
        [self reset:(player_score_value >= kScoreToWin)];
    }

    if(ball.center.y > self.view.bounds.size.height) {
        computer_score_value++;
        [self reset:(computer_score_value >= kScoreToWin)];
    }

    else {
    if(tapToBegin.hidden) {
        tapToBegin.hidden = NO;
    }
}
}

-(void)reset:(BOOL) newGame {
self.gameState = kGameStatePaused;
ball.center = self.view.center;
if(newGame) {
    if(computer_score_value > player_score_value) {
        tapToBegin.text = @"Computer Wins!";
    } else {
        tapToBegin.text = @"Player Wins!";
    }

    computer_score_value = 0;
    player_score_value = 0;
} else {
    tapToBegin.text = @"Tap To Begin";
}

player_score.text = [NSString stringWithFormat:@"%d",player_score_value];
computer_score.text = [NSString stringWithFormat:@"%d",computer_score_value];
}

- (void)viewDidLoad {
[super viewDidLoad];
gameState = kStateMenu;
self.gameState = kGameStatePaused;
ballVelocity = CGPointMake(kBallSpeedX,kBallSpeedY);
[NSTimer scheduledTimerWithTimeInterval:0.01 target:self selector:@selector(gameLoop)    userInfo:nil repeats:YES];
}

-(IBAction)playClassicButtonClicked {
gameState = kGameStateRunning;
}

-(IBAction)playTennisButtonClicked {
gameState = kGameStateRunning;
}

-(IBAction)playIceHockeyButtonClicked {
gameState = kGameStateRunning;
}

-(IBAction)playBeachballButtonClicked {
gameState = kGameStateRunning;
}

- (IBAction)BackButtonClicked {
gameState = kStateMenu;
}

- (void)didReceiveMemoryWarning {
[super didReceiveMemoryWarning]; // Releases the view if it doesn't have a superview
// Release anything that's not essential, such as cached data
}

@end 
```

我为信息量道歉，但我希望你能意识到我试图尽可能清楚地说明我试图展示/实现的内容，从而让你更容易回答。

如果您需要任何其他信息或发现任何“偏离主题的错误”，请随时告诉我，我将非常感激并张贴任何缺失的信息。我将非常感谢任何帮助，谢谢瑞恩 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:34:41.347

您是否在 Target 的属性中选择了 window.xib 作为主界面？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:04:16.213

为什么你设置了两次 gameState 的值？

```
gameState = kStateMenu;
self.gameState = kGameStatePaused; 
```

显然，当`gameLoop`被调用时，gameState 的值为`kGameStatePaused`。而且我没有看到`gameLoop`方法中的任何功能`kGameStatePaused`。

或许这就是原因……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:52:12.343

```
[window addSubview:viewController.view];
[window makeKeyAndVisible]; 
```

而不是上面

做这个

```
window.rootViewController = viewController;
[window makeKeyAndVisible]; 
```

# c# - 优化网络爬取

> ID：13921046
> 
> 赞同：0
> 
> 时间：2012-12-17T19:44:53.837
> 
> 标签：c#, image, performance, webclient

我正在开发一种从网页中抓取图像的快速工具。目前，我使用 WebClient 来获取页面的源数据，从源中解析图像 URL，然后使用 WebClient.DownloadFile 将它们单独下载到文件夹中。这可能需要相当长的时间。
我了解所需的大部分时间是由于我的连接和下载数据。
有没有其他更有效的方法来解决这个问题，无论是 C# HTML 解析库还是其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:47:00.833

您可以使用多个线程，这将打开到网页的多个并发 HTTP 连接。

一种好的方法是实现生产者/消费者模式：让一个线程获取并解析包含图像的 HTML，然后将图像 URL 排队到类似于 BlockingCollection 的东西中。让多个线程从队列中读取图像 URL 并同时下载图像。

[http://msdn.microsoft.com/en-us/library/dd997371.aspx](http://msdn.microsoft.com/en-us/library/dd997371.aspx)

如果您喜欢尖端技术，那么此类问题非常适合 TPL 数据流（BlockingCollection 的替代品）。

[http://msdn.microsoft.com/en-us/devlabs/gg585582.aspx](http://msdn.microsoft.com/en-us/devlabs/gg585582.aspx)

# asp.net - 将 Html.Action 与子文件夹中的控制器一起使用

> ID：13921049
> 
> 赞同：0
> 
> 时间：2012-12-17T19:45:08.447
> 
> 标签：asp.net, razor, asp.net-mvc-4

我正在使用 asp.net mvc4 构建一个 webapge。对于组织，我想将一些控制器放在 Controllers 文件夹的子文件夹中。例如：

```
 Controllers
   AccountController
   BlahController
   Dashboard (Folder)
     ChickenController
     BeefController 
```

要使用 BeefController （返回部分视图），似乎我应该使用：

```
 @Html.Action("Index", "Dashboard/BeefDashboard") 
```

然而，这让我得到以下错误：

```
 The controller for path '/' was not found or does not implement IController. 
```

我将如何使用 BeefController？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:58:33.437

ASP.NET MVC 世界中没有物理子文件夹概念。你应该做的是在仪表板控制器中有一个动作方法，它接受一个参数，然后根据它返回特定的视图。

```
public class DashBoardController: Controller
{
  public ActionMethod Index(string id)
  {
    if(id=="chicken") 
    {
      return PartialView("Chicken");
    }
    else if(id=="beef") 
    {
      return PartialView("beef");
    }
    return View("NotFound");
  }

} 
```

现在你可以访问那些像

```
Dashboard/beef
Dashboard/chicken 
```

# c - malloc() 在无限循环中

> ID：13921053
> 
> 赞同：0
> 
> 时间：2012-12-17T19:45:20.960
> 
> 标签：c, crash, malloc, free, std

我有一个面试问题，当我们`malloc()`在无限循环中分配大量内存而不是`free()`它时会发生什么。

当堆上没有足够的内存并且它应该打破循环时，我想检查条件`NULL`应该起作用，但是它没有发生并且程序通过打印异常终止`killed`。

`if`为什么会发生这种情况以及为什么在没有要分配的内存时（我的意思是当 malloc() 失败时）它不执行该部分？这是什么行为？

我的代码是：

```
#include<stdio.h>
#include<stdlib.h>

int main(void) {
  int *px;

  while(1)
    {
     px = malloc(sizeof(int)*1024*1024);
     if (px == NULL)
       {
        printf("Heap Full .. Cannot allocate memory \n");
        break;
       }
     else
       printf("Allocated \t");
    }
  return 0;
} 
```

编辑：gcc - 4.5.2 (Linux- Ubuntu -11.04)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:11:00.103

如果您在 linux 上运行，请留意第一个终端。它将显示如下内容：

```
OOM error - killing proc 1100 
```

OOM 表示内存不足。

我认为它在`dmesg`和/或`/var/log/messages`和/或`/var/log/system`取决于 linux 发行版中也是可见的。您可以使用以下命令进行 grep：

```
grep -i oom /var/log/* 
```

你可以让你的程序慢慢地抓取内存，并留意：

```
watch free -m 
```

你会看到可用的交换下降和下降。当它几乎什么都没有时，Linux 会杀死你的程序，并且可用内存量会再次增加。

这是解释输出的一个很好的链接`free -m`：[http ://www.linuxatemyram.com/](http://www.linuxatemyram.com/)

* * *

这种行为可能是由我的 init 或其他一些保护机制（如“上帝”）启动的应用程序的问题，您可以进入一个循环，其中 linux 杀死应用程序并 init 或其他东西再次启动它。如果所需的内存量远大于可用 RAM，则通过将内存页面交换到磁盘可能会导致速度变慢。

在某些情况下，linux 不会杀死导致问题的程序，而是杀死其他一些进程。例如，如果它杀死 init，机器将重新启动。

在最坏的情况下，一个程序或一组进程将请求大量内存（超过 Ram 中可用的内存）并尝试重复访问它。Linux 没有快速放置内存的地方，因此它必须将 Ram 的一些页面交换到磁盘（交换分区）并加载从磁盘访问的页面，以便程序可以查看/编辑它。

这种情况每毫秒一次又一次地发生。由于磁盘比 RAM 慢 1000 倍，因此这个问题可能会使机器停止运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:18:00.970

> 但它并没有发生，程序通过打印终止异常终止。

请记住，您并不孤单。在这种情况下，你被 Out Of Memory 杀手杀死了，它看到你的进程占用了系统的内存，并采取了措施来阻止它。

> 为什么会发生这种情况以及为什么在没有要分配的内存时它不执行 if 部分（我的意思是当 malloc() 失败时）？这是什么行为？

好吧，没有理由相信`if`检查没有运行。查看手册[页](http://linux.die.net/man/3/malloc)`malloc()`

> 默认情况下，Linux 遵循乐观的内存分配策略。**这意味着当 malloc() 返回非 NULL 时，不能保证内存确实可用**。如果发现系统内存不足，OOM 杀手将杀死一个或多个进程。

因此，您*认为*您通过支票“保护”了自己免受内存不足的影响`NULL`；实际上，这仅意味着***如果***您返回 a `NULL`，您就不会尊重它，这与您是否确实获得了所需的内存无关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T20:15:28.893

行为取决于 ulimit - 请参阅[http://www.linuxhowtos.org/Tips%20and%20Tricks/ulimit.htm](http://www.linuxhowtos.org/Tips%20and%20Tricks/ulimit.htm)

如果您对内存使用有限制，您将看到预期的 NULL 返回行为，另一方面，如果您没有限制，您可能会看到您看到的 OOM 收割机等。

# google-chrome - Chrome - 关闭 pdf 打开的选项卡键盘快捷键

> ID：13921054
> 
> 赞同：1
> 
> 时间：2012-12-17T19:45:23.270
> 
> 标签：google-chrome, browser, keyboard-shortcuts

Ctrl+W 是在谷歌浏览器中关闭选项卡的快捷键，如果打开的选项卡有 pdf 文件，则键盘快捷键不起作用。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:52:54.693

2 巨魔 比一个真正的答案

点击顶部的 x 有什么难的

获取火狐

但真正的答案是我以前还没有。如果你在新窗口中打开总是有 cmd-q (Mac) alt-F4 (Windows)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:54:02.430

CTRL+W**也不会关闭**带有**Flash 视频的选项卡。**尝试这个：

1.  在新标签页中打开这个：

    > http://www.youtube.com/embed/[YOUTUBE_VIDEO_ID]

2.  单击播放。

3.  按 CTRL+W。

您将看到该选项卡不会关闭。

我认为您的问题与此类似...

# vba - 将单元格向右更改为与当前单元格一样多

> ID：13921056
> 
> 赞同：0
> 
> 时间：2012-12-17T19:45:35.547
> 
> 标签：vba, excel

我有火车到达/出发时刻表，每条支线都在单独的一行。我需要让电子表格自动检测单元格中的变化，并在相同的时间内将所有单元格从它向右更改。单元格具有时间格式。我怎么做？

* * *

到目前为止我已经尝试过：

我在 SE 上的其他问题中找到了这段代码：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Not Intersect(Target, Target.Worksheet.Range("H5")) Is Nothing Then Macro
End Sub 
```

但是我无法理解将它放在哪里以及如何使其自动工作，除了为特定范围工作之外，这可能与我发现它的问题不同。

* * *

**UPD**：我在 VBA 中寻找的逻辑：

1.  等到一个单元格被选中，如果它有*时间*格式，将其值复制到`Tmp`.
2.  将新旧值之间的差异保存到`Tmp`.
3.  如果右侧的单元格包含某些内容并且其格式为*Time*，请添加`Tmp`。

    继续，直到单元格为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:03:09.900

如果您知道时间之间的差异有多大，那么您可以根据该差异计算新时间。

例如 A1 是`10:07`，A2 是`10:14`。不必每次都单独输入，您可以将 A2 设置为`=A1+TIME(0,7,0)`. 然后，当您将 A1 更改为 时`10:15`， A2 将自动更改为`10:22`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:58:56.057

好的，这可能会让您朝着正确的方向开始：

您首先要存储所有原始单元格值。因此，以下 VBA 代码将 A 列中前 200 行的值存储到一个数组中。您需要先运行此代码，可能是在打开工作簿时：

```
Dim contents(200) As Variant
Public Sub StoreOriginalValues()
    ' save all existing values
    For r = 1 To 200  ' change for number of rows you have
        contents(r) = Worksheets(1).Cells(r, 1).Value
    Next
End Sub 
```

存储原始单元格值后，您可以在 Worksheet_Change 事件中放置代码，以便每当用户更改 A 列中的单元格时，您都可以比较原始值和新值并找出差异。然后，您可以将此差异应用于该行中的其余列：

```
Private Sub Worksheet_Change(ByVal Target As Range)

    If Target.Column = 1 Then  ' only check for changes in column A
        originalvalue = contents(Target.Row)
        newvalue = Target.Value
        contents(Target.Row) = Target.Value

        difference = newvalue - originalvalue
        Set chgcell = Cells(Target.Row, Target.Column + 1)

        Do While Not IsEmpty(chgcell)
            chgcell.Value = chgcell.Value + difference
            Set chgcell = chgcell.Offset(0, 1)  ' move one column to right
        Loop
End If

End Sub 
```

**现在这段代码绝不是完美的**。例如，它不会检查他们是否输入了有效时间。它也不会检查在该行的其余列中输入的值是否是时间或文本或诸如此类。但就像我说的，我希望它能为你指明正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T23:15:07.323

我的解决方案：

```
Dim oldVal
Dim diff

Private Sub Worksheet_SelectionChange(ByVal Target As Range)
oldVal = Target.Value
End Sub

Private Sub Worksheet_Change(ByVal Target As Range)
Application.EnableEvents = False
ActiveCell.Offset(-1, 0).Select
Application.EnableEvents = True
diff = Target.Value - oldVal

If Not diff = 0 Then
While Not ActiveCell.Offset(0, 1) = "#"
Application.EnableEvents = False
ActiveCell.Offset(0, 1).Select
Application.EnableEvents = True

If Not ActiveCell Is Nothing _
And Not ActiveCell = "" _
And TypeName(ActiveCell) = TypeName(ActiveCell.Offset(0, -1)) Then

Application.EnableEvents = False
ActiveCell.Value = ActiveCell.Value + diff
Application.EnableEvents = True

End If
Wend
End If

End Sub 
```

这是我很长一段时间以来第一次使用 VB，所以代码很糟糕，但它确实有效。

# kendo-ui - 如何使用以前上传的文件填充 Kendo Upload

> ID：13921058
> 
> 赞同：11
> 
> 时间：2012-12-17T19:45:52.490
> 
> 标签：kendo-ui

我正在使用 MVC 的 Kendo UI 文件上传，效果很好。在我的编辑页面上，我想显示之前从创建页面上传的文件。为了视觉一致性，我想在我的编辑页面上重新使用上传小部件，以便用户可以使用“删除”功能，或者如果他们选择添加其他文件。上传小部件是否支持此功能？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-20T18:07:23.450

所以，我意识到这是一个很老的问题，但我最近想出了如何可靠地做到这一点。虽然此处的其他答案肯定会显示文件，但它并没有真正将其连接到任何事件（特别是“删除”事件）。此外，与其手动设置所有这些，我想我宁愿让剑道做所有真正的肮脏工作。

请注意，这仅适用于您的文件上传未设置为自动同步的情况。如果您使用自动上传功能，您可以在此处的 Kendo 文档中找到示例：[http ://docs.kendoui.c​​om/api/web/upload#configuration-files](http://docs.kendoui.com/api/web/upload#configuration-files)

所以无论如何，让我们假设我们有一个文件输入，我们已经制作了一个剑道上传：

```
<input id="files" name="files" type="file" multiple="multiple" /> 
```

```
$(document).ready(function () { 
    var $upload = $("#files");
    var allowMultiple = Boolean($upload.attr("multiple"));

    $upload.kendoUpload({
        multiple: allowMultiple,
        showFileList: true,
        autoUpload: false        
    });
} 
```

然后，我们只需要将有关文件的信息获取到我们的 jQuery 中。我喜欢把它塞进隐藏字段中的 JSON 字符串中，但你可以随心所欲地做。

这是一个使用 Mvc HtmlHelpers 和 Newtonsoft 的 JSON.NET 的示例（我不使用 Razor，但您应该了解总体思路）：

```
if (Model.Attachments.Count > 0)
{
    var files = Model.Attachments.Select(x => new { name = x.FileName, extension = x.FileExtension, size = x.Size });
    var filesJson = JsonConvert.SerializeObject(files);
    Html.Render(Html.Hidden("existing-files", filesJson));
} 
```

请注意，格式*非常重要*。我们正在尝试匹配 Kendo 期望的 JavaScript 对象的结构：

```
{
    relatedInput : sourceInput,
    fileNames: [{ // <-- this is the collection we just built above            
        name: "example.txt",
        extenstion: ".txt",            
        size: 1234
    }]
} 
```

所以，剩下要做的就是把它们放在一起。基本上，我们`onSelect`将从 Kendo 的内部重新创建函数`syncUploadModule`：

```
$(document).ready(function () {
    // setup the kendo upload
    var $upload = $("#files");
    var allowMultiple = Boolean($upload.attr("multiple"));

    var upload = $upload.kendoUpload({
        multiple: allowMultiple,
        showFileList: true,
        autoUpload: false        
    }).getKendoUpload();

    // initialize the files
    if (upload) {
        var filesJson = $("[name$='existing-files']").val();
        if (filesJson) {                
            var files = JSON.parse(filesJson);

            var name = $.map(files, function (item) {
                return item.name;
            }).join(", ");

            var sourceInput = upload._module.element.find("input[type='file']").last();
            upload._addInput(sourceInput.clone().val(""));
            var file = upload._enqueueFile(name, {
                relatedInput : sourceInput,
                fileNames : files
            });
            upload._fileAction(file, "remove");
        }
    }
}); 
```

差不多就是这样！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T01:01:08.697

我想出了一个方法来做到这一点。

基本上，您需要模仿 Upload 控件生成的 HTML，并且使用一些 JavaScript 来连接每个项目。我最初将 HTML 呈现为隐藏，然后在初始化 Kendo Upload 控件后，将 HTML 列表附加到 Kendo 创建的父容器。

这是我的 MVC 视图：

```
@if (Model.Attachments != null && Model.Attachments.Count > 0)
{
  <ul id="existing-files" class="k-upload-files k-reset" style="display: none;">
    @foreach (var file in Model.Attachments)
    {
      <li class="k-file" data-att-id="@file.Id">
        <span class="k-icon k-success">uploaded</span>
        <span class="k-filename" title="@file.Name">@file.Name</span>
        <button type="button" class="k-button k-button-icontext k-upload-action">
          <span class="k-icon k-delete"></span>
          Remove
        </button>
      </li>
    }
  </ul>
} 
```

这是 JavaScript（注意，它是从 CoffeeScript 生成的）：

```
var $fileList, $files, item, _fn, _i, _len;
$fileList = $("#existing-files");
if ($fileList.length > 0) {
  $(".k-upload").append($fileList);
  $files = $(".k-file");
  _fn = function(item) {
    var $item, fileId, filenames;
    $item = $(item);
    fileId = $item.data("att-id");
    filenames = [
      {
        name: fileId
      }
    ];
    return $item.data("fileNames", filenames);
  };
  for (_i = 0, _len = $files.length; _i < _len; _i++) {
    item = $files[_i];
    _fn(item);
  }
  $fileList.show();
} 
```

你可以[在我的博客上找到完整的文章](http://bit.ly/15LhuD3)，在那里我深入探讨了这个话题。我希望这可以帮助你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T21:34:37.033

一些额外的搜索给了我我*不*想要的答案 - 根据[this](http://www.kendoui.com/forums/ui/upload/adding-files-to-populate-on-initialization.aspx)和[this](http://www.kendoui.com//forums/ui/upload/file-list-templates.aspx)，Telerik 不支持使用以前上传的文档预先填充上传小部件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-14T21:44:08.733

自从提出这个问题以来，它已被添加到选项中。

查看[http://docs.telerik.com/kendo-ui/api/web/upload#configuration-files](http://docs.telerik.com/kendo-ui/api/web/upload#configuration-files)

它仅适用于异步模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-01T20:56:35.207

Try this...

```
 @(Html.Kendo().Upload()
              .Name("files")
              .Async(a => a
                  .Save("SaveFile", "Home")
                  .Remove("RemoveFile", "Home")
                  .AutoUpload(true))
              .Files(files =>
              {
                  foreach (var file in Model.FundRequest.Files)
                  {
                          files.Add().Name(file.Name).Extension(Path.GetExtension(file.Name)).Size((long)file.SizeKb * 1024);
                   }

              })) 
```

My Model has a reference to my "FundRequest" object that has a List of "File" objects, so I just loop through each "File" and add.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-04T13:07:33.193

看一下这个！

```
<script>
    var files = [
        { name: "file1.doc", size: 525, extension: ".doc" },
        { name: "file2.jpg", size: 600, extension: ".jpg" },
        { name: "file3.xls", size: 720, extension: ".xls" },
    ];

    $("#upload").kendoUpload({
        async: {
            saveUrl: "Home/Save",
            removeUrl: "Home/Remove",
            autoUpload: true
        },
        files: files
    });
</script>
```

```
<input type="file" name="files" id="upload" />
```

# c# - 如何使用 Reflection.Emit 添加引用

> ID：13921061
> 
> 赞同：1
> 
> 时间：2012-12-17T19:46:13.960
> 
> 标签：c#, reflection, dll, il

我正在为在 .NET 框架上运行的语言编写编译器。我正在尝试为导入语句生成代码。基本上

```
import System.Drawing 
```

应该表现得像

```
using System.Drawing; 
```

在 C# 中。import 语句还将支持以下内容：

```
import Foo.Bar in "foo.dll" 
```

这将在 foo.dll 中导入 Foo.Bar 类。我的问题是如何使用 Reflection.Emit 将这些链接到我生成的程序中？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:54:02.083

你只是：消费图书馆。这意味着，您只需在发出的代码中使用来自 foo.dll 的类型/方法。`Reflection.Emit`包装器将自动添加必要的参考元数据。请注意，这意味着如果您的代码导入了一个库然后不使用它，那么生成的 IL 中将不存在该引用。有趣的是，这**正是**C# 编译器所做的（可能是 VB 编译器）。

# c++ - 将代码编译为特定的 C/C++ 标准

> ID：13921064
> 
> 赞同：4
> 
> 时间：2012-12-17T19:46:33.023
> 
> 标签：c++, c, g++, clang++

我试过用谷歌搜索，但我得到的只是如何编译基本程序的结果。是否可以通过指定代码应编译为 C89、C99、C++98 等来使用 Clang++ 和 G++ 将代码编译为特定的 C++ 标准？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T19:49:27.483

您可以使用 -std 标志。例如，要编译为 C99，请使用`-std=c99`

它的文档在[这里](http://gcc.gnu.org/onlinedocs/gcc/Standards.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T19:49:03.713

像这样使用`-std`标志：

```
g++ -std=c++98 -o myprog myprog.cpp -lfoo 
```

[这是一个](http://linux.die.net/man/1/g++)包含大量 GCC/G++ 选项的手册页，包括这个。

# jquery - jquery validate css 不适用于一个表单字段

> ID：13921066
> 
> 赞同：2
> 
> 时间：2012-12-17T19:46:39.873
> 
> 标签：jquery, css, jquery-validate

最后一天我一直在努力让我的 CSS 都很好并且直观地用于注册表单，但我只遇到了一个我似乎无法解决的问题。

我的 for ID 是 contactForm 并且我设置了几个通用 CSS 规则来在输入上应用视觉提示或选择让人们知道这些值是否被接受：

```
#contactForm input.error, select.error  {border: 1px solid #AB000B; background-color:#FFF2F2}   
#contactForm input.valid, select.valid  {border: 1px solid #3D993D; background-color:#E2FEDF} 
```

这些是验证插件使用的一般错误和有效。

我认为还在输入右侧设置绿色复选框（有效）或红色错误消息：

```
highlight: function(label) {
    $(label).addClass('error');
},
success: function(label) {
    label.text('OK').addClass('valid');
}, 
```

那些的CSS是：

```
#contactForm.jqv1 label.valid {
   width: 16px;
   background: url("../images/tick.png") center center no-repeat;
   display: inline-block;
   text-indent: -9999px;
}
#contactForm.jqv1 label.error {
   font-weight: bold;
   color: red;
} 
```

.jqv1 类应用于整个表单以覆盖站点中其他页面上使用的一些#contactForm 默认值。

除了一个表单字段外，一切都按预期工作。如果我输入正在使用的用户名，我将获得#contactForm input.error 样式（红色边框淡红色背景）和#contactForm.jqv1 label.error（右侧的粗体红色消息）。如果我输入一个有效的用户名，我会得到相反的 - 绿色边框和绿色复选标记。

但是 - 如果我输入一个无效的用户名然后切换到一个有效的用户名，我会得到绿色的复选标记，但输入字段没有得到“class=valid”来触发绿色边框。它也反过来做同样的事情（有效到无效的用户名使边框保持绿色，即使我收到红色错误消息）。

其他字段工作正常 - 如果我更正无效条目，我将获得绿色边框和绿色复选标记。有问题的验证规则确实使用了遥控器：

```
sp_user: {
                required: true,
                rangelength: [4,50],
                remote: {
                    cache:false,
                    async:false,
                    url: compath + "/rmtUserCFC.cfc?method=checkUsernameRemote&returnformat=json",
                    type: "post"
                }
            }, 
```

关于我可以做些什么来消除最后一个小的 CSS 错误有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:22:59.723

尝试：

```
highlight: function(label) {
    $(label).addClass('error').removeClass('valid');
},
success: function(label) {
    label.text('OK').addClass('valid').removeClass('error');
}, 
```

添加新类不会删除旧类，因此您拥有两个类的元素。

# python - Python one-liner 将浮点数转换为字符串

> ID：13921067
> 
> 赞同：3
> 
> 时间：2012-12-17T19:46:43.673
> 
> 标签：python

我想将 0.0 到 39.9 之间的浮点数转换为字符串。如果十位数字分别为 1、2 或 3，则将其替换为 L、T 或 Y。如果它在其中，则附加一个 M。例如，22.3 将返回 T2.3，8.1 将返回 M8.1，依此类推。否则，返回浮点数。

这段代码当然有效，但我想知道是否有更简单（如果不是单行）的解决方案。这是代码：

```
def specType(SpT):
  if 0 <= SpT <= 9.9:
    return 'M{}'.format(SpT)
  elif 10.0 <= SpT <= 19.9:
    return 'L{}'.format(SpT - 10)
  elif 20.0 <= SpT <= 29.9:
    return 'T{}'.format(SpT - 20)
  elif 30.0 <= SpT <= 39.9:
    return 'Y{}'.format(SpT - 30) 
  else:
    return SpT 
```

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T19:51:34.690

怎么样：

```
def specType(SpT):
    return '{}{}'.format('MLTY'[int(SpT//10)], SpT % 10) if 0.0 <= SpT <= 39.9 else SpT 
```

这使

```
>>> specType(0.0)
'M0.0'
>>> specType(8.1)
'M8.1'
>>> specType(14.5)
'L4.5'
>>> specType(22.3)
'T2.3'
>>> specType(34.7)
'Y4.7' 
```

[如评论中所述，您将要考虑如何处理可以潜入您的界限的数字-我做了一个猜测；酌情修改。]

# javascript - jQuery 回调和发布/订阅

> ID：13921068
> 
> 赞同：7
> 
> 时间：2012-12-17T19:46:48.150
> 
> 标签：javascript, jquery, publish-subscribe, jquery-callback

过去我通过在窗口上绑定在 jQuery 中完成了非常简单的 pub/sub。

```
// subscribe
$( window ).on("someEvent", function() { ... });

// publish
$( window ).trigger("someEvent"); 
```

然而，我最近了解了新的回调功能，这似乎是在 jQuery 中处理 pub/sub 的推荐方式。

与仅在窗口上绑定相比，使用回调有什么优势？对于像上面这样的简单系统，使用回调功能是否过大？

编辑：这是有关我通常如何使用上述内容的更多信息...

这是我有时会做的事情，以允许我的 jQuery 插件相互通信。例如，我有自己的可拖动和可放置的插件，需要进行通信。

当拖动开始、更新和停止时，可拖动插件会触发窗口上的自定义事件。droppable 插件会监视这些事件并做出相应的反应。

```
// in draggable

onStart: function() {
  $( window ).trigger("dragger.start", [data]);
}

// in droppable

$( window ).on("dragger.start", function(event, data) {
...
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:02:19.780

绑定到窗口本身并没有问题，但是因为其他事件可以绑定到窗口或从窗口取消绑定，您的系统可能会产生您不希望的副作用。例如，即使您只是打算取消绑定更常见的事件，例如or ，`$(window).off()`也会取消绑定。`"someEvent"``"scroll"``"click"`

我不会说使用回调是多余的，因为它相对简单——我会说比你所做的更简单：

```
var callbacks = $.Callbacks();
callbacks.add(function () { ... });
callbacks.fire(); 
```

这就是您替换示例代码所需的全部内容。我立即看到的一个优点是您不需要知道在触发阶段需要触发的事件的名称；它的处理更加透明，这通常很好。

您还可以将多个函数调用添加到单个回调或同时具有多个回调。如果您只是使用`window`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:07:55.690

我认为使用 jQuery 的回调 ($.Callbacks()) 可以使代码更简洁，并且比将函数绑定到窗口的方法更有条理。您有更大的灵活性，因为您不必知道触发回调时要使用的事件的名称。

# java - glReadPixel 在 OnPick 函数中不起作用

> ID：13921074
> 
> 赞同：-1
> 
> 时间：2012-12-17T19:47:07.277
> 
> 标签：java, android, opengl-es-2.0

我尝试在 android 应用程序中实现 3D 拾取。我使用 OpenGL ES2.0。

现在我想读取深度缓冲区（写在 FBO 中），但 glReadPixels 只返回 0。代码是正确的，因为我在调用 RenderInTexture 函数后尝试了相同的代码，它返回了正确的值。在 OnPick 函数中调用 RenderInTexture 而不是调用 glReadPixels 也返回 0。

问题是什么？是否可以在 OnPick 事件中读取帧缓冲区，或者我是否必须设置一些变量？

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:59:06.837

OnPick 是否在主 (UI) 线程上调用？可能你有两个线程，opengl 渲染线程和发送事件的主应用程序线程。尝试将 onpick 坐标存储在 OnPick 方法中并在 opengl 线程中进行计算。

希望有帮助。

# java - 为变量生成随机/唯一名称

> ID：13921077
> 
> 赞同：0
> 
> 时间：2012-12-17T19:47:17.160
> 
> 标签：java

我试图通过这样做来生成未知数量的按钮：

```
 for (int i = 0; i < itemsList.size(); i++) {
        final String item = itemsList.get(i);
        TButton button = new TButton("" + item, 8, 415 + (25 * i), 90, 25) {
            public void doAction() {
                System.out.println("Item: " + item);
            }
        };
        this.buttons.add(button);
    }

    for (TButton button : buttons) {
        this.framework.add(button);
    } 
```

但是该框架不接受具有相同名称的多个按钮，因此我收到错误消息。

我可以为每个按钮生成随机/唯一名称吗？

错误：

```
Exception in thread "main" java.lang.IllegalStateException: gtge.TestGame$1@32301b86     [UIName=Button, bounds=8,415,90,25] [text=Plante] already reside in another container!!!
at com.golden.gamedev.gui.toolkit.TContainer.add(Unknown Source)
at com.golden.gamedev.gui.toolkit.FrameWork.add(Unknown Source)
at gtge.TestGame.update(TestGame.java:78)
at com.golden.gamedev.Game.startGameLoop(Unknown Source)
at com.golden.gamedev.Game.start(Unknown Source)
at com.golden.gamedev.GameLoader.start(Unknown Source)
at gtge.TestGame.main(TestGame.java:96) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:25:54.850

这成功了：

```
 for (int i = 0; i < itemsList.size(); i++) {
        final String item = itemsList.get(i);
        TButton button = new TButton("" + item, 8, 300 + (25 * i), 90, 25) {
            public void doAction() {
                System.out.println("Item: " + item);
                //TestGame.this.test = "" + item;
            }
        };
        this.framework.add(button);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:51:07.093

您可以使用该`hashCode()`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:50:29.247

我不了解 java，但我在 vb 中使用 guid 做了类似的事情`guid.newguid()`来创建一个新的唯一值。

# maven - 无法在存储库中心找到资源“opensymphony:quartz-all:pom:1.6.3”

> ID：13921079
> 
> 赞同：2
> 
> 时间：2012-12-17T19:47:19.283
> 
> 标签：maven, quartz-scheduler

我继承了这个曾经成功构建和运行的项目（几年前......）。现在，当从版本控制中签出时，它会抱怨：

> 无法在存储库中心 ( [http://repo1.maven.org/maven2](http://repo1.maven.org/maven2) )中找到资源“opensymphony:quartz-all:pom:1.6.3”

但是跟随该存储库链接（[http://repo1.maven.org/maven2](http://repo1.maven.org/maven2)）会导致一个可浏览的站点，该站点清楚地表明该资源**是**可用的：[http](http://search.maven.org/#browse|1030701351) ://search.maven.org/#browse|1030701351 ！

我什至可以手动下载它，我也可以在我的本地 repo ( `C:\maven\repo\opensymphony\quartz-all\1.6.3\quartz-all-1.6.3`) 中找到它。

所以，我的问题：

1.  如果 Maven 存在，为什么还要抱怨*呢*？
2.  如果 Maven 找不到它，它是如何到达我的本地[仓库的？](https://stackoverflow.com/a/13496645/1864054)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:38:21.470

您的本地存储库不在 C:\maven ...它在您的用户目录中 ~/.m2/repository

为了调试真正发生的事情，我建议停用 ~/.m2/settings.xml（例如通过重命名它）并在没有任何旧工件的情况下从新的本地存储库（只需删除 ~/.平方米/存储库）

这会告诉你真正缺少什么。

如果缺少任何内容，则意味着它不在 Centra 存储库 (http://search.maven.org) 中。作为下一步，我将在您的网络中安装一个存储库管理器。我建议使用 Sonatype Nexus（开源、免费书籍作为文档），然后在其中添加任何其他存储库或缺少的工件。

# mysql - 搜索联系人多达多个级别

> ID：13921080
> 
> 赞同：0
> 
> 时间：2012-12-17T19:47:19.343
> 
> 标签：mysql, data-structures

> **可能重复：**
> [MySQL 递归树搜索](https://stackoverflow.com/questions/5725914/mysql-recursive-tree-search)

我正在放置一个联系人搜索选项，因此用户最多可以搜索 10 个级别的联系人，例如，我可以搜索我的联系人的联系人，以及他的联系人的联系人等等，最多 10 个级别。

它可以通过太多的 sql 连接来完成，但我想知道是否有更好的解决方案

谢谢

编辑：这是架构

用户表id，用户名

联系表 id、user_id、contact_id

user_id 和contact_id 都是用户表的外键。

这是获取我的联系人的最高 1 级的简单查询

```
SELECT * FROM users LEFT JOIN contacts 
ON users.id = contacts.user_id
WHERE users.id = MY_USER_ID 
```

# c# - 在开始的 BODY 标记之后插入 HTML 代码

> ID：13921082
> 
> 赞同：1
> 
> 时间：2012-12-17T19:47:20.683
> 
> 标签：c#, asp.net, vb.net, webforms, html-injections

有没有人在 ASP.Net 网络表单页面中打开 BODY 标记之后注入 HTML 片段的示例？这段代码的定位非常具体。

开始的 HTML 可能如下所示：

```
</head>
<body>
<div id="header"> 
```

生成的 HTML 应如下所示：

```
</head>
<body>
<div id="new-div"></div>
<div id="header"> 
```

这是一种无法直接操作 HTML 的场景，而 javascript 这样做太晚了，以至于附加的 HTML 无法发挥作用。它必须使用服务器端代码完成，并且在 HTML 进入 Web 浏览器之前就位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:53:23.667

你可以在你的 aspx 标记中这样做：

```
<html>
    <head>
    </head>
    <body>
        <%= FunctionTheOutputsString() %> 
```

是的`<%=`缩写`Response.Write()`，是直接写入页面的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:02:35.553

使用 jQuery，您可以`prepend()`这样使用：

```
​$(function(){
 $('body').prepend('<div id="new-div">Div content</div>');
})​; 
```

[jsfiddle在这里。](http://jsfiddle.net/3yhsm/)

**更新**：服务器端解决方案也可以是（除了上面的答案）：

```
<html>
  <head>
  </head>
<body>
   <asp:placeholder id="divPlaceHolder" Visible="False" runat="server">
      <div id="new-div">
      </div>
   </asp:placeHolder> 
```

在 Page_Load()...

```
 if(SomeCondition)
    divPlaceHolder.Visible=true; 
```

并且由于不呈现不可见元素，因此只有在为 true`new-div`时才会显示该元素`SomeCondition`

# mysql - MySQL 或 Redis 中的实时高性能标签搜索

> ID：13921083
> 
> 赞同：2
> 
> 时间：2012-12-17T19:47:21.543
> 
> 标签：mysql, tags, redis, sql-order-by

**问题描述：**

一个标签（tags）可以通过联结表（tagged_as）与任意对象相关联。对于特定对象类型 (specific_object)，选择与一系列标签关联的所有对象的并集或交集，按对象上的数字列对结果进行排序，并限制结果以用于分页目的。

**人为的架构：**

```
CREATE TABLE tags (
    id INT NOT NULL AUTO_INCREMENT,
    name VARCHAR(45) NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE specific_object(
    id INT NOT NULL AUTO_INCREMENT,
    name VARCHAR(45) NOT NULL,
    vote_sum INT NOT NULL DEFAULT 0,
    PRIMARY KEY (id)
);

CREATE TABLE tagged_as(
    id INT NOT NULL AUTO_INCREMENT,
    tag_id INT NOT NULL,
    content_type_id INT NOT NULL,
    object_id INT NOT NULL,
    PRIMARY KEY (id)
); 
```

出于本示例的目的，我省略了 specific_object 表中的许多其他列。

**表行数：**

标签： 12,297

标记为：46,642,064

特定对象：2,444,944

**天真的 MySQL 解决方案：**

```
SELECT
    specific_object.*
FROM
    specific_object
JOIN
    tagged_as
ON
    specific_object.id = tagged_as.object_id
    AND
    tagged_as.content_type_id = <SPECIFIC_OBJECT_CONTENT_TYPE_ID>
WHERE
    tagged_as.tag_id = <TAG_ONE_ID>
    AND
    tagged_as.tag_id = <TAG_TWO_ID>
    ...
ORDER BY specific_object.vote_sum DESC
LIMIT 50 
```

此解决方案的问题是 MySQL 无法利用索引来解析 ORDER BY 子句，因为“用于获取行的键与 ORDER BY 中使用的键不同”（[http://dev.mysql.com /doc/refman/5.0/en/order-by-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)）。执行时间：20+秒

**天真的 Redis 解决方案：**

```
for each specific object: SET specfic_object:<ID> <ID>
for each tagged as: SADD tag:<TAG ID> specific_object:<ID>

specific_object_ids = SUNION tag:<TAG_ONE_ID> tag:<TAG_TWO_ID> ...
specific_object_ids = SINTER tag:<TAG_ONE_ID> tag:<TAG_TWO_ID> ...

SELECT * FROM specific_object WHERE id IN (<specific_object_ids>) ORDER BY vote_sum DESC 
```

这个解决方案的问题是 ORDER BY 仍然必须由 MySQL 完成。此外，一个标签可能与数十万个特定对象相关联，这些对象需要移动大量数据。执行时间：较大的标签需要 20 多秒

**我还没有尝试过的可能解决方案**

*非规范化*

也许将 vote_sum 列移动到 tagged_as 表中。不再需要加入来执行订单。这可能与天真的解决方案具有相同的问题。

*Redis 排序集*

```
for each specific object: SET specific_object:<ID> <ID>
for each specific object: SET specific_object_weight:<ID> <VOTE_SUM>
for each tagged as: SADD tag:<TAG_ID> specific_object:<ID>

SINTERSTORE result:<timestamp> <TAG_ONE_ID> <TAG_TWO_ID> ...
SORT result:<timestamp> BY specific_object_weight_* LIMIT 0 50 
specific_object_ids = SMEMBERS result:<timestamp>
DEL result:<timestamp>

SELECT * FROM specific_object WHERE id IN (<specific_object_ids>) 
```

将所有排序移至 Redis。这增加了额外的复杂性，因为现在您还必须在 Redis 中维护 vote_sum 值。不确定这是否足够快。

**问题：**

任何一种可能的解决方案都可行吗？是否有其他解决方案或不同的技术可以提供帮助？我愿意接受相当大的改变来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:38:39.823

当问题是 DESC 排序的性能时，我过去解决问题的方法是将 的值存储`-1*vote_sum`在单独的列中，然后按该列 ASC 排序。我已经能够让 MySQL 使用索引对该列进行排序。

您可以存储一个冗余列（`vote_sum`和`neg_vote_sum`，或者您可以只存储负值，并在需要将其作为正值返回时将其乘以 -1。

但我怀疑您的性能问题的根源是排序操作。作为测试，当您执行 ? 时，语句的性能如何比较`ORDER BY vote_sum ASC`？

# python - 字符编码、XML、Excel、python

> ID：13921091
> 
> 赞同：0
> 
> 时间：2012-12-17T19:48:16.987
> 
> 标签：python, excel, encoding, utf-8

我正在读取从另一个软件程序导入到 excel xml 文件中的字符串列表。我不确定 excel 文件的编码是什么，但我很确定它不是 windows-1252，因为当我尝试使用该编码时，我会遇到很多错误。

现在给我带来麻烦的具体词是：“Zmysłowska, Magdalena”（注意“l”不是标准的“l”，而是有一个斜线）。

我已经尝试了一些东西，在这里我会提到其中的三个：

(1)

```
page = unicode(page, "utf-8")
page = unicodedata.normalize("NFKD", page)
page = page.encode("utf-8", "ignore")

Output: Zmys\xc5\x82owska, Magdalena
Output after print statement: ZmysÅ‚owska, Magdalena 
```

(2)

```
page = unicode(page, "utf-8")
page = unicodedata.normalize("NFKD", page)

Output: Zmys\u0142owska, Magdalena
Output after print statment: Zmysłowska, Magdalena

Note: this is great, but I need to encode it back to utf-8 before putting the string into my     db.  When I do that, by running page.encode("utf-8", "ignore"), I end up with ZmysÅ‚owska, Magdalena again. 
```

(3) 什么都不做（不规范化、不解码、不编码）。字符串进来时似乎已经是 utf-8。但是，当我什么都不做时，字符串再次以以下输出结束：

```
Output: Zmys\xc5\x82owska, Magdalena
Output after print statement: ZmysÅ‚owska, Magdalena 
```

有没有办法将此字符串转换为 utf-8？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:11:25.473

您的问题不在于您的编码和解码。您的代码正确地采用 UTF-8 字符串，并将其转换为 NFKD 规范化的 UTF-8 字符串。（如果您曾经使用 Python 3，您可能希望使用`page.decode("utf-8")`而不是`unicode(page, "utf-8")`仅仅用于面向未来的验证，并使代码更易于阅读，因为`encode`and`decode`更明显是并行的，但您不必这样做；这两个是等价的。）

您的实际问题是您正在将 UTF-8 字符串打印到某些不是 UTF-8 的上下文中。您很可能正在打印到`cmd`默认为 Windows-1252 的窗口。因此，`cmd`尝试将 UTF-8 字符解释为 Windows-1252，并得到垃圾。

有一个非常简单的方法来测试这个。让 Python 解码 UTF-8 字符串，就像它是 Windows-1252 一样，并查看生成的 Unicode 字符串是否与所看到的一样。

```
>>> print page.decode('windows-1252')
ZmysÅ‚owska, Magdalena

>>> print repr(page.decode('windows-1252'))
u'Zmys\xc5\u201aowska, Magdalena' 
```

有两种方法可以解决这个问题：

1.  打印 Unicode 字符串并让 Python 处理它。
2.  打印转换为适当编码的字符串。

对于选项 1：

```
print page.decode("utf-8") # of unicode(page, "utf-8") 
```

对于选项 2，它将是以下之一：

```
print page.decode("utf-8").encode("windows-1252")
print page.decode("utf-8").encode(sys.getdefaultencoding()) 
```

当然，如果您保留中间 Unicode 字符串，则不需要所有这些`decode`调用：

```
upage = page.decode("utf-8")
upage = unicodedata.normalize("NFKD", upage)
page = upage.encode("utf-8", "ignore")

print upage 
```

# maven - Maven 插件依赖 - 在我所有的 pom 中使用源插件

> ID：13921094
> 
> 赞同：3
> 
> 时间：2012-12-17T19:48:32.757
> 
> 标签：maven, maven-3, maven-source-plugin

我想为我们所有的项目配置 Maven 源插件的使用。我们的项目当前配置的方式是我们有一个被所有项目继承的父 pom。因此，为了让所有项目都使用 maven 源插件，我做了以下工作：

1.  `build -> plugin management`在父pom下定义了maven源码插件

    > ```
    >  <plugin>
    >             <groupId>org.apache.maven.plugins</groupId>
    >             <artifactId>maven-source-plugin</artifactId>
    >             <version>2.2.1</version>
    >             <executions>
    >                 <execution>
    >                     <id>attach-sources</id>
    >                     <goals>
    >                         <goal>jar-no-fork</goal>
    >                     </goals>
    >                 </execution>
    >             </executions>
    >         </plugin> 
    > ```

2.  在我的项目 pom（子 pom）中，我在下面包含了源插件`build -> plugins`

> ```
>  <plugin>
>             <groupId>org.apache.maven.plugins</groupId>
>             <artifactId>maven-source-plugin</artifactId>
>         </plugin> 
> ```

有人可以告诉我这是否是配置它的最佳方式吗？有什么办法可以避免在子 pom 中指定源插件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T20:15:48.813

这是最好的方法。

To avoid having to add the plugin declaration in the child pom you could add it to the build/plugins section in the parent. The problem with that however is that EVERY child gets that invocation added even if it does not make sense if e.g. the child is a pom or ear packaging. You should therefore not do this..

# sed - 如何使用 sed 删除选定的端线？

> ID：13921101
> 
> 赞同：0
> 
> 时间：2012-12-17T19:48:58.670
> 
> 标签：sed

我正在尝试删除文件中所有行的结束线，其中结束线将两个等号分开

IE：

```
1
a=
=b
2 
```

至

```
1
a==b
2 
```

我有

```
sed -i.bak -e 's/=\n    =//g' fileName 
```

但是，它似乎没有对我的文件进行任何更改。我的脚本正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:04:14.293

尝试这个。它将整个文件内容保存在模式空间中，并删除等号之间的所有换行符。

```
sed -i.bak -e ':a ; $! { N; b a }; s/=\n=/==/g' fileName 
```

它产生：

```
1
a==b
2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T20:47:23.773

这可能对您有用（GNU sed）：

```
sed '$!N;s/=\n=/==/;P;D' file 
```

或者

```
sed -e '$!N' -e 's/='$"\n"'=/==/' -e 'P' -e 'D' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T13:50:28.980

不同操作系统上的不同 sed 以不同的方式处理换行符。在 sed 中指定换行符的最便携方法是在返回之前使用反斜杠：

```
sed -e 's/=\
=//g' file 
```

但是，除非您调用其他一些神奇的 sed 字符将多行放入缓冲区等中，否则这对您不起作用。...

只需使用 awk：

```
$ cat file
1
a=
=b
2
$ awk '{printf "%s%s", $0, (/=$/ ? "" : "\n")}' file
1
a==b
2 
```

如果当前行以“=”或换行符结尾，则只打印当前行，然后不打印任何内容。再简单不过了，而且它的便携性很强......

哦，如果你想改变你的原始文件，那就是：

```
awk '{printf "%s%s", $0, (/=$/ ? "" : "\n")}' file > tmp && mv tmp file 
```

# python - 我怎么做不等于多个数字？

> ID：13921104
> 
> 赞同：0
> 
> 时间：2012-12-17T19:49:06.033
> 
> 标签：python

我正在使用 python 3.2.3 idle 这是我的代码：

```
number = input("please enter 1 or 2")
if number != 1 or 2: #this part is wrong
     print("You didn't enter 1 or 2") 
```

我的代码不正确。我想这样做，如果用户不输入 1 或 2，则会弹出错误。说他们输入 1.5、3 等或不是 1.0 或 2.0 的东西。

我如何使用**!=**命令来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T19:51:06.110

问题是代码被解析为

```
if ((number != 1) or 2): 
```

和`2`，非零，始终为真。

相反，我会建议

```
if number not in (1, 2): 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T19:51:15.867

您始终可以使用`in`/ `not in`：

```
if number not in (1,2): 
```

不要忘记从你的数字中创建一个整数......

```
number = int(input("please enter 1 or 2")) 
```

您的代码将永远不会给出`True`结果，因为您正在将字符串与整数进行比较（它总是不相等的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T19:54:01.627

你可以试试这个：

```
if number!=1 and number!=2 
```

# perl - 使用 Mail::POP3Client 访问 Gmail

> ID：13921109
> 
> 赞同：1
> 
> 时间：2012-12-17T19:49:12.193
> 
> 标签：perl, email, gmail

我正在使用此脚本从 gmail 帐户获取所有消息：

```
#!/usr/bin/perl

use Mail::POP3Client;
use IO::Socket::SSL;
no warnings;

my $username = 'username';
my $password = 'password';
my $mailhost = 'pop.gmail.com';
my $port = 995;

my $socket = IO::Socket::SSL->new(
                PeerAddr => 'pop.gmail.com',
                PeerPort => 995,
                Proto    => 'tcp',
            )
            or die "No socket!: $!\n";
my $pop = Mail::POP3Client->new();
$pop->User($username);
$pop->Pass($password);
$pop->Socket($socket);
$pop->Connect();

# me fijo cuantos hay
my $count = $pop->Count();
my $size = $pop->Size();

print "count[$count]\n"; 
```

在 gmail 帐户中，大约有 1.500 条消息……但总是 $pop->Count() 返回 250 或更多……绝不是 1.500。

有人知道这件事吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:59:09.167

最后，我使用 IMAP 代替 POP。

```
#!/usr/bin/perl
use strict;
use warnings;
use Mail::IMAPClient;
use IO::Socket::SSL;

my $socket = IO::Socket::SSL->new(
   PeerAddr => 'imap.gmail.com',
   PeerPort => 993,
  )
  or die "socket(): $@";

my $client = Mail::IMAPClient->new(
   Socket   => $socket,
   User     => 'username',
   Password => 'password',
  )
  or die "new(): $@";

my $cont = 1;
$client->select('INBOX');
my @mails = ($client->seen(),$client->unseen);
foreach my $id (@mails) {
    my $from = $client->get_header($id, 'From');
    if ($from =~ /([a-zA-Z\_\-\.0-9]+@[a-zA-Z\_\-0-9]+\.[0-9a-zA-Z\.\-\_]+)/) {
        my $email = lc $1;
        print "email[$email]\n";
    };
};

$client->logout(); 
```

这工作很棒。

# android - 如何在 Android 上创建自定义通知。文字代替图片

> ID：13921110
> 
> 赞同：2
> 
> 时间：2012-12-17T19:49:13.497
> 
> 标签：android

我想在这里创建通知：

![在此处输入图像描述](../Images/0b3586fc49d1e860995231627d630704.png)

红色圆圈 = 始终可见的图标。蓝色圆圈 = 仅在展开时可见的图标。

如何制作这样的红圈通知？

我必须创建 100 张图像还是可以使用文本等自定义通知？我可以将两个图像连接在一起吗？

我找到了这个：

[http://www.framentos.com/en/android-tutorial/2012/02/20/how-to-create-a-custom-notification-on-android/](http://www.framentos.com/en/android-tutorial/2012/02/20/how-to-create-a-custom-notification-on-android/)

[自定义通知布局和文本颜色](https://stackoverflow.com/questions/4867338/custom-notification-layouts-and-text-colors)

但是我仍然不知道如何创建这个红色圆圈。有了这个，我知道如何创建蓝色圆圈，但我不需要。我不是在制造电池！

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T21:13:00.627

您可以在通知区域/状态栏（“红色圆圈”）中放置的唯一文本是代码文本，它在显示后会消失（setTicker）。该区域的目的是使用小图标 (setSmallIcon) 提醒用户通知未完成。您*可以*制作 100 个不同的图标，每个百分比一个，但是您不会使用 Android 的标准通知设计指南。

我建议如果你想要一个电池指示器，使用 5 个电池图标。一个图标是“充满”的电池，还有一个分别代表 75%、50%、25% 和“非常低”（红色）。我怀疑大多数用户不需要在状态栏中*确切*地看到他们还剩下多少电池。然后，您可以在完整通知中显示确切的数字和估计剩余时间。

# objective-c - 使用 Storyboards 处理未知深度的 UITableView 的最佳方法

> ID：13921113
> 
> 赞同：1
> 
> 时间：2012-12-17T19:49:15.593
> 
> 标签：objective-c, ios, cocoa-touch, uistoryboard

我正在创建一个故事板，它将穿过未知的深度。我正在做的是创建一个从 UITableViewCell 到其主视图控制器的循环序列。在 perforSegueWithIdentifier 中，我将信息传递给下一个级别。

一切正常，但问题是我是否想根据该数据分支到详细视图。我不得不求助于带有按钮和幻像视图的黑客。有谁知道这应该如何正式完成？我希望能够将 UITableViewCell 链接到两个不同的控制器，然后在 performSegueWithIdentifier 中决定去哪一个。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:35:25.583

我对故事板没有太多经验，但根据我对传统 UITableView 用法的了解，单元格不应该告诉视图控制器要做什么。这样做打破了 MVC 范式。单元格的表视图的委托（通常是显示表视图的视图控制器）将响应该方法`tableView:didSelectRowAtIndexPath:`，然后将执行适当的 segue 到下一个视图控制器。

为了显示详细视图，表格视图单元格提供了附件类型`UITableViewCellAccessoryDetailDisclosureButton`。使用这种类型时，表视图委托可以响应选择器`tableView:accessoryButtonTappedForRowWithIndexPath:`，然后执行必要的 segue 以显示详细视图。

我希望这是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:19:00.417

我前一段时间做过类似的事情。

我没有找到任何“官方”解决方案，但我找到的一个解决方案是在单元格中添加一个长按手势识别器，除了正常选择之外，它还会引导用户进入详细视图。

然而，唯一的缺点是您必须以某种方式通知用户此“隐藏”选项。

这是 viewDidLoad 中的代码片段：

```
UILongPressGestureRecognizer *taskDetail = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(showTaskDetail:)];
taskDetail.minimumPressDuration=0.5f;
taskDetail.numberOfTouchesRequired=1;
[self.myTableView addGestureRecognizer:taskDetail]; 
```

然后在我的taskDetail中：

```
-(IBAction)showTaskDetail:(id)sender {
    UILongPressGestureRecognizer *gesture = (UILongPressGestureRecognizer*)sender;
    if (gesture.state == UIGestureRecognizerStateBegan) {
        CGPoint p = [gesture locationInView:TV];
        NSIndexPath *indexPath = [self.myTableView indexPathForRowAtPoint:p];
        MyManagedObj *obj = [self.datasource objectAtIndex:indexPath.row];
        // other operations omitted...
        // then perform segue... 
        [self performSegueWithIdentifier:@"taskDetail" sender:indexPath];

    }
} 
```

我尝试过的其他解决方案是在 UITableViewCell 中设置两个按钮，一个用于表格向下钻取，另一个用于详细信息。它也可以，但是我的手机太小了，没有太多空间可以放两个按钮。

# intellij-idea - 如何始终在同一个编辑器中打开文件？

> ID：13921119
> 
> 赞同：4
> 
> 时间：2012-12-17T19:49:36.227
> 
> 标签：intellij-idea

当我在不同的编辑器中切换文件（例如使用 ctrl-n ）时，intellij 总是在原始编辑器中打开文件，该文件的选项卡所在的位置。来自 vim 背景，这对我来说似乎违反直觉。有没有办法强制 intellij 总是在同一个编辑器窗口中打开文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T05:55:22.160

请为以下相关问题投票：

*   [IDEA-67559](http://youtrack.jetbrains.com/issue/IDEA-67559)在有多个文件组时打开文件可能会在不同的组中重新打开，而不是在当前组中打开
*   [IDEA-81628](http://youtrack.jetbrains.com/issue/IDEA-81628)在同一文件中导航错误地离开拆分编辑器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-20T17:10:44.360

当使用 Ctrl-Shift-N 打开所需文件时，Shift-Enter 确认将保持焦点选项卡组。

# c# - 如何在 ServiceStack 中使用 Redis 客户端进行搜索？

> ID：13921120
> 
> 赞同：1
> 
> 时间：2012-12-17T19:49:38.770
> 
> 标签：c#, redis, servicestack

使用 ServiceStack 中的 Redis C# 客户端，有没有办法在存储的 JSON 对象中搜索值？

例如，我们有键：

```
urn:comment:1, urn:comment:2 etc and the corresponding values stored are:

"{Id:1, CommentText:"some text here that could be quite large..." ...} etc 
```

用户可能输入一个字符串并希望查看包含输入的字符串的所有 Comment 对象。

你怎么做到这一点？

# excel - Excel 2007 VBA 选择单元格范围

> ID：13921121
> 
> 赞同：1
> 
> 时间：2012-12-17T19:49:48.240
> 
> 标签：excel, excel-2007, vba

我正在尝试选择一系列单元格。我以前做过，但语法有问题。

```
Sub ChgDateX()

Range("A41").Select

Do
    If ActiveCell.Value = "Last Updated" Then
    mydate = ActiveCell.Offset(-40, 0).Value

    'Cells(ActiveCell.Offset(0, 1), ActiveCell.Offset(0, 9)).Select
    ActiveCell.Offset(0, 1).Value = mydate
    ActiveCell.Offset(0, 2).Value = mydate
    ActiveCell.Offset(0, 3).Value = mydate
    ActiveCell.Offset(0, 4).Value = mydate
    ActiveCell.Offset(0, 5).Value = mydate
    ActiveCell.Offset(0, 6).Value = mydate
    ActiveCell.Offset(0, 7).Value = mydate
    ActiveCell.Offset(0, 8).Value = mydate
    ActiveCell.Offset(0, 9).Value = mydate

    ActiveCell.EntireRow.Select
    Selection.NumberFormat = "m/d/yyyy"
    ActiveCell.Offset(1, 0).Select
        Else: ActiveCell.Offset(1, 0).Select
    End If
Loop Until ActiveCell.Value = "" & ActiveCell.Offset(-3, 0).Value = ""

End Sub 
```

我试图摆脱单独的 offset = mydate 类型编码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T20:34:32.107

几件事：

这段代码：

```
Loop Until ActiveCell.Value = "" & ActiveCell.Offset(-3, 0).Value = "" 
```

无法按预期工作，因为您正在寻找的正确运算符是`And`而不是`&`

你不必“选择”任何东西。您可以在变量中放置对单元格的引用（请参阅我的代码）。

此外，由于您总是向下移动到循环中的下一个单元格，您可以将其放在`IF`语句之外。

根据您的代码，我认为您正在寻找这样的东西：

```
Option Explicit

Sub test()
    Dim r As Range
    Dim myDate As Date

    Set r = Range("A41")

    Do
        If (r.Value = "Last Updated") Then
            myDate = r.Offset(-40, 0).Value

            With Range(r.Offset(0, 1), r.Offset(0, 9))
                .Value = myDate
                .NumberFormat = "m/d/yyyy"
            End With
        End If

        Set r = r.Offset(1, 0)
    Loop Until r.Value = vbNullString And r.Offset(-3, 0).Value = ""

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:21:15.567

试试这个：

```
ActiveCell.Range("B1:J1").Value = MyDate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:32:18.760

这个怎么样......有1个音符。我不建议这样循环。也许您可以过滤`Column A <> ""`或其他东西，然后循环通过可见单元格？很难说不知道你在做什么。

```
Option Explicit

Sub ChgDateX()

Range("A41").Select

Do
    If ActiveCell.Value = "Last Updated" Then

        Range(ActiveCell.Offset(0, 1), ActiveCell.Offset(0, 9)).Value = ActiveCell.Offset(-40, 0).Value

        ActiveCell.EntireRow.NumberFormat = "m/d/yyyy"

    End If

    ActiveCell.Offset(1).Select

Loop Until ActiveCell.Value = "" & ActiveCell.Offset(-3, 0).Value = ""

End Sub 
```

# c - 计算 IP 报头长度

> ID：13921124
> 
> 赞同：1
> 
> 时间：2012-12-17T19:50:06.360
> 
> 标签：c, sockets, ip

我正在尝试构建 ICMP 数据包并通过原始套接字发送它。查看示例，我看到 IP 数据包长度计算为：

iphdr.ip_hl = sizeof(struct ip) >> 2

您能解释一下为什么我们需要将 struct ip 右移 2 次而不是分配一个常量值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:56:50.317

IP（或 ICMP）数据包的“ip_hl”字段定义为 IP 标头的长度，以 32 位字为单位。

sizeof(struct ip) 产生 IP 标头的长度，以 8 位字节为单位。正如 ip_hl 字段中所预期的那样，将该值右移两次提供以 32 位字为单位的长度。

不为此使用常量的一个很好的理由是消除源代码中的幻数。（无论如何，编译器都会为“sizeof(struct ip) >> 2”生成一个常量值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:54:14.437

因为 4-bit header length 字段是 header 中***32-bit 字的数量，包括 options***，所以它可能长于 20 个字节（字段值 5），所以它不应该是一个常量值。您的示例只是假设没有选项场景。

# python - 将 pdf 插入 sql 表的图像字段

> ID：13921127
> 
> 赞同：0
> 
> 时间：2012-12-17T19:50:14.263
> 
> 标签：python, sql, image, pdf, bytearray

我有一个 python 脚本，我需要将 pdf 插入到图像字段的 SQL 表中。我可以在该字段中添加几乎任何内容——数字、文本、pdf 的十六进制版本，但我无法使用字节或字节数组添加 pdf。document_image 字段被定义为图像。我已经验证了 sql 语句本身是正确的 - 如果我对 document_image 使用 null。

在下面的代码中，我尝试了 hex_report（它将插入，但 adobe 无法读取）、array_report 和 bin_report - 这两个给出了相同的错误。

```
report_map = "C:\\simple_test_pdf.pdf"
initial_report = open(report_map, 'rb').read()

hex_report =  binascii.b2a_hex(initial_report)
array_report = bytearray(initial_report)
bin_report = bytes(initial_report)

db = abc_sql()
db.Set_database("image")
conn   = db.Open_Connection()   

conn.execute_scalar("DECLARE   @return_value int, \
@new_serial_id int, \
@return_msg varchar(4000) \
EXEC    @return_value = image.image_insert \
@new_serial_id = @new_serial_id  OUTPUT, \
@return_msg = @return_msg OUTPUT,  \
@pd_request_id = 776, \
@mime_type = 'application/pdf', \
@document_file_name = 'Report_Results.pdf', \
@document_description = 'Report and Map', \
@document_image = %s \
SELECT @new_serial_id as '@new_serial_id',\
@return_msg as '@return_msg', \
'Return Value' = @return_value", str(bin_report )) 
```

我得到的错误是：

mssql.MssqlDatabaseException：SQL Server 消息 105，严重性 15，状态 1，第 1 行：字符串 '%PDF-1.5 %âãÏÓ 10 0 obj <> endobj 15 0 obj 后的未闭合引号

... '%PDF-1.5 ...附近的语法不正确...（截断）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:38:43.377

你可以做这样的事情，

```
INSERT INTO Table(ID, Blob) 
SELECT 0, * FROM OPENROWSET(BULK N'C:\YourPathFolder\File.pdf', SINGLE_BLOB) rs 
```

如果你想参数化那个 TSQL 语句，你可以这样做：

```
declare @path varchar(5000)
declare @SQL varchar(5000)
set @path = 'c:\YourPath\Yourfile.pdf'
set @SQL = 'INSERT INTO Table(ID, Blob) 
SELECT 0, * FROM OPENROWSET(BULK N''' +@CertPath +''', SINGLE_BLOB) rs'
execute (@SQL) 
```

说了这么多，我不建议使用图像字段——它很快就会被弃用。正如 MS 建议的那样，改用 varBinary(max)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:36:45.777

你能显示表结构，所以我们可以从那里开始吗？

我会为此目的使用 varbinary(MAX)。它会给你一些灵活性。[你也可以在MSDN](http://msdn.microsoft.com/en-us/library/a1904w6t)上找到一些帮助

# java - 解析xml文档Java“无法解析”

> ID：13921147
> 
> 赞同：0
> 
> 时间：2012-12-17T19:51:13.037
> 
> 标签：java, xml, parsing

我正在阅读有关如何使用 java 解析 xml 文档并遇到问题的教程。我收到错误“dom 无法解析”我知道这与我声明变量的方式和超出范围有关，但我不知道如何解决它。

任何帮助将不胜感激，我将在下面发布相关部分：

```
package com.xmlparse;

import java.io.IOException;
import java.util.Iterator;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;
import org.xml.sax.Attributes;
import org.xml.sax.SAXException;

import com.entities.Employee;

public class XmlParser
{

private void parseXmlFile(){
    //get the factory
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

    try {

        //Using factory get an instance of document builder
        DocumentBuilder db = dbf.newDocumentBuilder();

        //parse using builder to get DOM representation of the XML file
    Document dom = db.parse("test.xml");

    } catch(ParserConfigurationException pce) {
        pce.printStackTrace();
    } catch(SAXException se) {
        se.printStackTrace();
    } catch(IOException ioe) {
        ioe.printStackTrace();
    }
}

 private void parseDocument() {

    Document dom = db.parse("test.xml");

    //get the root element
    Element docEle = dom.getDocumentElement();

    //get a nodelist of elements
    NodeList nl = docEle.getElementsByTagName("Employee");
    if(nl != null && nl.getLength() > 0) {
        for(int i = 0 ; i < nl.getLength(); i++) {

            //get the employee element
            Element el = (Element)nl.item(i);

            //get the Employee object
            Employee e = getEmployee(el);

            //add it to list
            myEmpls.add(e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:53:36.963

当您`DocumentBuilder` `db`在不同的方法中使用时，您可以声明`db`为类成员变量：

```
private DocumentBuilder db; 
```

并像这样初始化`parseXmlFile`：

```
db = dbf.newDocumentBuilder(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:58:58.467

您可以像下面这样更改方法签名，并在调用它时传递创建的文档构建器实例。

```
private void parseDocument(DocumentBuilder db) 
```

# javascript - Backbone 0.9.9 在创建新模型时验证模型

> ID：13921152
> 
> 赞同：1
> 
> 时间：2012-12-17T19:51:25.613
> 
> 标签：javascript, backbone.js

更新到新的 Backbone 版本 0.9.9 后，当我想创建一个新模型时，它总是进入验证功能。例如，我在默认值和“标题”：“”中设置“标题”，并且在验证中我想检查是否有长度。如果在启动时运行验证功能，那么总是会出现错误。

我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:06:12.007

你可以在你的验证方法中允许空标题，或者你总是用值实例化你的模型，例如：`new Model({ title: 'my title' })`

在更糟糕的情况下，您可以检查模型是否被获取，例如：

```
validate: function( attrs ) {
  if( this.fetched ) {
    if( !attrs.title.length ) { return "error!"; }
  }
} 
```

`this.fetched`然后，当您获得所有信息并正确构建模型时，您只需设置为 true。

但事实是，您的`defaults`值应该从一开始就采用有效格式。

**在评论中讨论后编辑**
您可能还可以检查该`hasChanged`功能`Backbone.model`是否允许验证。例如：

```
validate: function( attrs ) {
  if( this.hasChanged() ) {
    if( !attrs.title.length ) { return "error!"; }
  }
} 
```

这样，您将跳过初始化验证，然后，它只会在您使用`set`新值时进行验证。

# php - CakePHP：在两个查询中完成的几个连接、belongsTo 和 hasMany 关系

> ID：13921153
> 
> 赞同：4
> 
> 时间：2012-12-17T19:51:28.983
> 
> 标签：php, mysql, cakephp, has-many, belongs-to

我需要一些关于 CakePHP 2.2.3 的帮助。

## 我有的

我目前有以下设置：

`Post` **有很多** `Attachment`

它工作正常，页面由 2 个查询生成：

```
SELECT *, `Post`.`id` 
FROM `posts` AS `Post` 
WHERE 1 = 1 
ORDER BY `Post`.`created` DESC

SELECT 
    `Attachment`.`id`, 
    `Attachment`.`post_id`, 
    `Attachment`.`created` 
FROM 
    `attachments` AS `Attachment` 
WHERE 
    `Attachment`.`post_id` IN (1, 2, 3, ..., n) 
```

## 我想要的是

我想将关系扩展如下：

`Post` **有很多** `Attachment`；每个都`Attachment` **属于** `Type`

而且我不知道让CakePHP 跟随它的热度。
基本上，我需要的是：

```
SELECT *, `Post`.`id` 
FROM `posts` AS `Post` 
WHERE 1 = 1 
ORDER BY `Post`.`created` DESC

SELECT 
    `Attachment`.`id`, 
    `Attachment`.`post_id`, 
    `Attachment`.`created`, 
    `Type`.`title`, `Type`.`icon` 
FROM 
    `attachments` AS `Attachment` 
LEFT JOIN 
    `types` AS `Type` 
    ON (`Attachment`.`type_id`=`Type`.`id`) 
WHERE 
    `Attachment`.`post_id` IN (1, 2, 3, ..., n) 
```

注意`LEFT JOIN types`添加。

所以我在第二个查询中得到了相应的类型数据。我知道我可以循环或使用`->query()`调用来获取数据，但我希望这尽可能有效和灵活。

## 问题

我尝试了[Containable](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)，[Model Unbinding 技巧](http://mark-story.com/posts/view/using-bindmodel-to-get-to-deep-relations)（[和这个](http://ask.amoeba.co.in/joining-multiple-tables-in-cakephp-using-bindmodel-method/)），但没有成功。我尝试了不同的选项组合，我相信我什至删除了连接。这是我`PostsController`现在的样子。

```
class PostsController extends AppController {
    public function index() {

        $this->Post->unbindModel(array('hasMany' => array('Attachment')));
        $this->Post->Attachment->unbindModel(array('belongsTo' => array('Type')));

        $this->Post->bindModel(array(
            'hasMany' => array(
                'Attachment' => array(
                    'className'  => 'Attachment',
                // when uncommented, throws the "Unknown column Post.id" SQLSTATE error
                //  'conditions' => array('Post.id' => 'Attachment.post_id'),
                    'foreignKey' => false,
                ),
            ),
        ));
        $this->Post->Attachment->bindModel(array(
            'belongsTo' => array(
                'Filetype' => array(
                    'className'  => 'Filetype',
                //  'conditions' => array('Type.id' => 'Attachment.type_id'),
                    'foreignKey' => false,
                ),
            ),
        ));
        $all = $this->Post->find('all', array(
            'joins' => array(
                array(
                    'table' => 'users',
                    'prefix' => '',
                    'alias' => 'User',
                    'type' => 'INNER',
                    'conditions' => array(
                        'User.id = Post.user_id',
                    )
                ),
            ),
            'contain' => array('Attachment', 'Type'),
            'conditions' => array(),
            'fields' => array('*'),
            'order' => 'Post.created ASC'
        ));
        var_dump($all);exit;
    }
} 
```

但它只是在循环中每次迭代运行一个额外的查询并获取*所有*附件：

```
SELECT `Attachment`.`id`, ... 
FROM `attachments` AS `Attachment` 
WHERE 1 = 1 
```

当我取消注释此关联的条件时，它会抛出 SQLSTATE “Column Post.id not found error” - 我猜是因为这里没有加入 Post 表。

我需要帮助进行设置。

请帮忙！谢谢

**更新**

我已按如下方式更改了控制器。请注意没有`bindModel`/`unbindModel`代码，关系是在模型类中设置的（在这种情况下是否正确？）。

```
class PostsController extends AppController {
    public function index() {
        $options = array(
            'contain' => array(
                'Post',
                'Type'
            ),
            'order' => 'Post.created DESC',
            'conditions' => array(
            //  'Post.title LIKE' => 'my post'
            )
        );

    //  The following throws "Fatal error: Call to a member function find() on a non-object"
    //  $posts = $this->Attachment->find('all', $options); 

    //  So I had to use $this->Post->Attachment instead of $this->Attachment
        $posts = $this->Post->Attachment->find('all', $options);
        $this->set(compact('posts'));
    }   
} 
```

这是`Attachment`模型：

```
class Attachment extends AppModel {
    public $belongsTo = array(
        'Type' => array(
            'className' => 'Type',
            'foreignKey' => 'type_id',
        ),
        'Post' => array(
            'className' => 'Post',
            'foreignKey' => 'post_id',
        ),
    );
} 
```

上面的代码运行这个查询：

```
SELECT 
    `Attachment`.`id`, `Attachment`.`type_id`, `Attachment`.`post_id`, `Attachment`.`created`, 
    `Type`.`id`, `Type`.`title`, 
    `Post`.`id`, `Post`.`text`, `Post`.`created` 
FROM 
    `attachments` AS `Attachment` 
    LEFT JOIN `types` AS `Type` ON (`Attachment`.`type_id` = `Type`.`id`) 
    LEFT JOIN `posts` AS `Post` ON (`Attachment`.`post_id` = `Post`.`id`) 
WHERE 
    1 = 1 
ORDER BY 
    `Post`.`created` ASC 
```

一切都是关于这里的附件。我的意思是帖子加入了附件，所以如果帖子没有附件，它不会被退回。这可能是因为`Attachment->find()`从附件的角度来看，呼叫是如此。我想它应该是：

```
// ...
FROM 
    `posts` AS `Post`
    LEFT JOIN `attachments` AS `Attachment`  ON (`Attachment`.`post_id` = `Post`.`id`) 
    LEFT JOIN `types` AS `Type` ON (`Attachment`.`type_id` = `Type`.`id`) 
// ... 
```

但这行不通，不是吗？您会看到`posts`,`attachments`和`types`，但它们确实具有*不同*的关系类型。最初，我已经发布了 CakePHP 运行的这两个单独的查询——这一定是有原因的。

**更新2**

我仍然相信这一切都是为了在初始设置中将第二个查询更改为`Attachment`模型（请参阅*我想要*的部分）。所以我会得到附件类型以及附件本身。我的意思是在那种情况下，左连接`types`表`attachments`不会破坏任何数据库关系逻辑，是吗？
我只是想确保没有办法通过一个复杂但单一的`find()`调用来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:04:37.277

每当 Cake 看到 hasMany 关系时，它会自动创建多个查询来拉取数据。在构建这些查询时，它会查找可以左连接到它的关系（hasOne 和 belongsTo）。

由于 Cake 无法为您完成此操作，因此您需要自己合并它们。

```
public function index() {
  $posts = $this->Post->find('all');
  // get all attachments for all found posts
  $attachments = $this->Post->Attachment->find('all', array(
    'contain' => array('Type'),
    'conditions' => array('Post.id' => Set::extract('/Post/id', $posts)
  ));
  // now join them to the posts array
  foreach ($posts as $key => $data) {
    $postId = $data['Post']['id'];
    // append any data related to this post to the post's array
    $posts[$key] += Set::extract("/Attachment[post_id=$postId]/..", $attachments);
  }
  $this->set(compact('posts'));
} 
```

`$attachments`这不是最有效的方法，因为您将多次遍历数组，但我相信您明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T09:47:07.377

试试 hasMany 中的 finderQuery。例如：在 Post 模型中，

```
public $hasMany = array(
    'Attachment' => array(
        'className' => 'Attachment',
        'foreignKey' => 'post_id',
        'dependent' => false,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '                            
             SELECT 
                 `Attachment`.`id`, 
                 `Attachment`.`post_id`, 
                 `Attachment`.`created`, 
                 `Type`.`title`, 
                 `Type`.`icon` 
                  FROM 
                 `attachments` AS `Attachment` 
                  LEFT JOIN 
                 `types` AS `Type` 
                  ON (`Attachment`.`type_id`=`Type`.`id`) 
                   WHERE 
                          `Attachment`.`post_id` IN (1, 2, 3, ..., n)
                ',
        'counterQuery' => ''
    ) 
```

# java - 从 IObservableList 创建 ArrayList - 是否可能

> ID：13921154
> 
> 赞同：1
> 
> 时间：2012-12-17T19:51:29.730
> 
> 标签：java

我正在从另一个类中的 ArrayList 创建一个新的 ArrayList。

```
 ArrayList<AplotDataModel.AplotDatasetData> tableData = AplotDataModel.getInstance().getArrayData(); 
```

我已经将另一个类中的数组列表更改为 IOservableList。所以我希望它就像更改获取 ObservableList 而不是 ArrayList 的方法一样简单

```
 ArrayList<AplotDataModel.AplotDatasetData> tableData = AplotDataModel.getInstance().getObservableList(); 
```

我收到以下错误：

类型不匹配：无法从 IObservableList 转换为 ArrayList

***编辑*** AplotDatasetData 是 AplotDataModel 的子类。

```
 public class AplotDatasetData {

  TCComponentItemRevision rev;
  TCComponentDataset   componentdataset;
  String prlValue;
  String datasetName;
  String markUp = "No";

  //////////////////////////////////////////////////////////////////////////
  //                           Constructor                                //
  //////////////////////////////////////////////////////////////////////////
  public AplotDatasetData(TCComponentItemRevision tcRevision, TCComponentDataset selectedDataset) {
     rev = tcRevision;
     componentdataset = selectedDataset;

  }// end Constructor

  ///////////////////////////////////////////////////////////////////////////
  //                            getDataset()                               //
  ///////////////////////////////////////////////////////////////////////////
  public TCComponent getDataset() {
     return componentdataset;
  }// end getDataset()

  ///////////////////////////////////////////////////////////////////////////
  //                               getRev()                                //
  ///////////////////////////////////////////////////////////////////////////
  public TCComponent getRev() {
     return rev;
  }// end getRev()

  ///////////////////////////////////////////////////////////////////////////
  //                             getPRLValue()                             //
  ///////////////////////////////////////////////////////////////////////////
  public String getPRLValue() {
     try {
        prlValue = rev.getRelatedComponent("IMAN_master_form_rev").getStringProperty("PRL");
     }
     catch (TCException e) {
        e.printStackTrace();
     }
     return prlValue;
  }// end getPRLValue()

  ///////////////////////////////////////////////////////////////////////////
  //                           getDatasetName()                            //
  ///////////////////////////////////////////////////////////////////////////
  public String getDatasetName() {
     try {
        datasetName = componentdataset.getStringProperty("object_string");
     }
     catch (TCException e) {
        e.printStackTrace();
     }
     return datasetName;
  }// end getDatasetName()

  ///////////////////////////////////////////////////////////////////////////
  //                          getECMarkupValue()                           //
  ///////////////////////////////////////////////////////////////////////////
  public String getMarkupValue() {
     return markUp;
  }// end getECMarkupValue()

  ///////////////////////////////////////////////////////////////////////////
  //                          setECMarkupValue()                           //
  ///////////////////////////////////////////////////////////////////////////
  public void setMarkupValue(String markupValue) {
     markUp = markupValue;

  }// end getECMarkupValue() 
```

那是我的基本数据模型。用户选择发送 TCComponentItemRevision rev 的数据；TCComponentDataset 组件数据集；

到 ObservableList，然后我使用 AplotDatasetData 从 rev 获取更多信息，componentdataset 来填充我的表。

因此，用户单击 GUI 上的一个按钮，打开一个新的 gui 对话框。新的 Gui 还有一个包含几个新列的表 - 我只是想获取用户在第一个 GUI 中填充的 ObservableList 并使用它来构建一个新的数组列表。

ObservableList 不能扩展像 AplotDatasetData 这样的类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:16:26.733

您可以从 Collection 创建一个新的 ArrayList。既然`org.eclipse.core.databinding.observable.list.IObservableList`是收藏，

```
ArrayList<AplotDataModel.AplotDatasetData> tableData = new ArrayList<AplotDataModel.AplotDatasetData>(AplotDataModel.getInstance().getObservableList()); 
```

应该管用。

如果不需要 ArrayList，也可以将 IObservableList 分配给 List：

```
List<AplotDataModel.AplotDatasetData> tableData = AplotDataModel.getInstance().getObservableList(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T19:54:22.640

您必须更改 tableData ArrayList 中的泛型以支持 IObservable：

```
ArrayList<IObservable> tableData = AplotDataModel.getInstance().getObservableList(); 
```

基本上，你最初说我有一篮子苹果。把那边那堆苹果放进我的苹果篮里。

然后，你去把那堆苹果换成了橘子。现在，你是说把那堆橙子放进我的苹果篮里。你认为你可以把橙子放进去，因为它是一个篮子——但你不能。这是一个苹果篮。将其更改为橙色篮子。

**编辑**

我误读了这个问题。如果你想让它工作，你需要 IObservableList 来扩展 ArrayList。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-17T19:56:38.843

好吧，我不知道 AplotDataModel 是什么，但是您可以使用`<?extends ?>`，例如：

```
Class c = AplotDataModel.getInstance().getClass();
ArrayList<?extends c ?> tableData = AplotDataModel.getInstance().getObservableList(); 
```

或者

```
ArrayList<?extends IObservalbeList ?> tableData = AplotDataModel.getInstance().getObservableList(); 
```

# postgresql - 带有空子查询的 Postgresql OR 条件

> ID：13921159
> 
> 赞同：1
> 
> 时间：2012-12-17T19:52:10.403
> 
> 标签：postgresql

如何优化其 WHERE 条件包括检查 user_id = X OR user_id IN 的查询（一些可能不返回结果的子查询）

在下面的示例中，查询 1 和 2 都非常快（< 1 毫秒），但查询 3（只是查询 1 和 2 中条件的 OR）要慢得多（50 毫秒）

有人可以解释一下为什么查询 3 这么慢，一般来说我应该采用哪些类型的查询优化策略来避免这个问题？我意识到我的示例中的子查询很容易被消除，但在现实生活中，有时子查询似乎是获取我想要的数据的最简单的方法。

相关代码和数据：

发布数据 [https://dl.dropbox.com/u/4597000/StackOverflow/sanitized_posts.csv](https://dl.dropbox.com/u/4597000/StackOverflow/sanitized_posts.csv)

用户数据 [https://dl.dropbox.com/u/4597000/StackOverflow/sanitized_users.csv](https://dl.dropbox.com/u/4597000/StackOverflow/sanitized_users.csv)

```
# from the shell:
# > createdb test

CREATE TABLE posts (
  id integer PRIMARY KEY NOT NULL,
  created_by_id integer NOT NULL,
  created_at integer NOT NULL
);
CREATE INDEX index_posts ON posts (created_by_id, created_at);
CREATE INDEX index_posts_2 ON posts (created_at);

CREATE TABLE users (
  id integer PRIMARY KEY NOT NULL,
  login varchar(50) NOT NULL
);
CREATE INDEX index_users ON users (login);

COPY posts FROM '/path/to/sanitized_posts.csv' DELIMITERS ',' CSV;
COPY users FROM '/path/to/sanitized_users.csv' DELIMITERS ',' CSV;

-- queries:

-- query 1, fast:
EXPLAIN ANALYZE SELECT * FROM posts WHERE created_by_id = 123 LIMIT 100;

-- query 2, fast:
EXPLAIN ANALYZE SELECT * FROM posts WHERE created_by_id IN (SELECT id FROM users WHERE login = 'nobodyhasthislogin') LIMIT 100;

-- query 3, slow:
EXPLAIN ANALYZE SELECT * FROM posts WHERE created_by_id = 123 OR created_by_id IN (SELECT id FROM users WHERE login = 'nobodyhasthislogin') LIMIT 100; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:14:32.573

拆分查询（已编辑）：

```
SELECT * FROM (
    SELECT * FROM posts p WHERE p.created_by_id = 123 
    union    
    SELECT * FROM posts p
    WHERE 
      EXISTS ( SELECT TRUE FROM users WHERE id = p.created_by_id AND login = 'nobodyhasthislogin')
  ) p
  LIMIT 100; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:38:40.323

在这个特定查询中，大部分时间都与索引扫描有关。这是一个从不同角度进行的查询，以避免这种情况，但应该返回等效的结果。

```
SELECT posts.* FROM users JOIN posts on posts.created_by_id=users.id WHERE users.id=123 or login='nobodyhasthislogin' 
```

这从用户表中选择，执行一次过滤器，然后将帖子加入到该表中。

我意识到这个问题是关于优化技巧的，而不是这个特定的查询。为了回答这个问题，我的建议是运行`EXPLAIN ANALYZE`并阅读解释结果， -[这个](https://stackoverflow.com/questions/117262/what-is-postgresql-explain-telling-me-exactly)答案对我有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:54:47.397

How about:

```
EXPLAIN ANALYZE
SELECT  * 
FROM    posts
WHERE   created_by_id IN (
           SELECT 123
           UNION ALL
           SELECT id FROM
           users  WHERE
           login  = 'nobodyhasthislogin') LIMIT 100; 
```

# php - 显示从最后一行到第一行的数据

> ID：13921160
> 
> 赞同：-1
> 
> 时间：2012-12-17T19:52:09.997
> 
> 标签：php, mysql

我在 stackoverflow 和 google 上搜索了很多，但没有直接回答我的问题。这是一个非常基本的问题，所以我认为必须有一个非常简单的解决方案，但我真的找不到我的解决方案，可能是我的搜索关键字不完美。那么问题来了，

我现在正在使用 php 和 mysql。我有一个数据表，我只想将它们从最后一行显示到第一行，这就是我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:57:03.763

试试这个

```
 $result1 = mysql_query("SELECT * FROM job ORDER BY id DESC");
       while($row1 = mysql_fetch_array($result1)) {
        echo $row1['id']." <br /> " ;     
    } 
```

输出 ：

```
19
18
17
...... 
```

// id 是你的列名

# javascript - 从 jquery 数组值中选择 div

> ID：13921165
> 
> 赞同：1
> 
> 时间：2012-12-17T19:52:24.537
> 
> 标签：javascript, jquery

我有一个简单的问题，如果单击数组中的 div，我需要执行操作 .click() ...

```
if($('#container_1').click(function(){ 
    $('div#image').fadeOut('fast', function(){
        $('div#cat_1').css('background-color', '#F30');
        $('#new_frame').show('fast').load('history.html');
    });
}));

if($('#container_2').click(function(){ 
    $('div#image').fadeOut('fast', function(){
        $('div#cat_2').css('background-color', '#F30');
        $('#new_frame').show('fast').load('history.html');
    });
}));

if($('#container_3').click(function(){ 
    $('div#image').fadeOut('fast', function(){
        $('div#cat_3').css('background-color', '#F30');
        $('#new_frame').show('fast').load('history.html');
    });
}));

if($('#container_4').click(function(){ 
    $('div#image').fadeOut('fast', function(){
        $('div#cat_4').css('background-color', '#F30');
        $('#new_frame').show('fast').load('history.html');
    });
}));

if($('#container_5').click(function(){ 
    $('div#image').fadeOut('fast', function(){
        $('div#cat_5').css('background-color', '#F30');
        $('#new_frame').show('fast').load('history.html');
    });
})); 
```

好的，这就是我的代码，它的工作原理......

但我认为我可以做得更短......使用这样的代码::

```
Contenedores = ['1', '2', '3', '4', '5'];

if($('#container_'+Contenedores).click(function(){ 
    $('div#image').fadeOut('fast', function(){
        $('div#cat_'+Contenedores).css('background-color', '#F30');
        $('#new_frame').show('fast').load('history.html');
    });
})); 
```

但我不知道如何正确工作......

谢谢，对不起我糟糕的英语。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T19:54:06.663

我只需使用单击元素的 ID 中的数字来获取“猫”元素。为什么你会做完全相同的事情并在每次点击时加载相同的内容，这超出了我的理解，但是像这样：

```
$('[id^="container_"]').on('click', function(){ 
    var self=this;
    $('div#image').fadeOut('fast', function(){
        $('div#cat_'+self.id.replace('container_','')).css('background-color', '#F30');
        $('#new_frame').show('fast').load('history.html');
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T19:56:32.587

有很多方法可以执行此操作，您也可以使用逗号分隔值：

```
$('#container_1,#container_2,#container_3,#container_4,...').click(function(){ ... 
```

或者您可以在这些 div 上使用类名以使其更简单：

```
$('.toclick').click(function(){

}); 
```

使用类名将是我的最爱。

PS：您不需要 if 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:09:26.883

你只需要遍历你的数组：

```
var Contenedores = ['1', '2', '3', '4', '5'];

$.each(Contenedores,function(index,value){
$('#container_'+value).click(function(){ 
$('div#image').fadeOut('fast', function(){
    $('div#cat_'+value).css('background-color', '#F30');
    $('#new_frame').show('fast').load('history.html');
});
});
}); 
```

也就是说，必须有更好的方法——类或事件委托——但如果不了解你的用例就很难说清楚。

# javascript - soda.js Selenium RC 2 如何重用浏览器会话

> ID：13921167
> 
> 赞同：1
> 
> 时间：2012-12-17T19:52:28.150
> 
> 标签：javascript, selenium, teamcity, mocha.js

我使用 Soda.js、mocha 和 selenium RC。我试图加快我的测试速度，我想的一种方法是因为我为每个测试启动一个新会话（即通过关闭/打开一个新浏览器并登录到一个站点来运行）。

我在各种论坛/留言板上看到了许多关于重用其他语言的会话的不完整帖子，但我的测试都是 Javascript。

有谁知道一旦我开始我的测试我可以重用以前的浏览器/会话，所以我不必在每个测试中开始一个新的会话。

我的苏打水测试跑步者看起来像这样。

```
var soda = require('soda'),
util = require('util'),

//config object - values injected by TeamCity
config = {
    host: process.env['SELENIUM_HOST'] || 'localhost',
    port: process.env['SELENIUM_PORT'] || 4444,

   url: process.env['SELENIUM_SITE'] || 'http://google.com',      
    browser: process.env['SELENIUM_BROWSER'] || 'firefox'
}; 
```

描述（“TEST_SITE”，函数（）{

```
beforeEach(

    function(done){
    browser = soda.createOnPointClient(config);

    // Log commands as they are fired
        browser.on('command', function(cmd, args){
        console.log(' \x1b[33m%s\x1b[0m: %s', cmd, args.join(', '));
    });

    //establish the session
    browser.session(function(err){
        done(err);
    });

    }

);

afterEach(function(done){

    browser.testComplete(function(err) {
        console.log('done');
        if(err) throw err;
       done();
    });

});

describe("Areas",function(){
   var tests = require('./areas');
   for(var test in tests){
       if(tests.hasOwnProperty(test)){
           test = tests[test];
           if(typeof( test ) == 'function')
               test();
           else if (util.isArray(test)) {
               for(var i=0, l=test.length;i<l;i++){
                   if(typeof( test[i] ) == 'function')
                       test[i]();
               }
           }
       }

   }
}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:33:26.447

我找到了我的答案。我真的需要更多地专注于摩卡咖啡，我的回答大致如下：

```
 //before running the suite, create a connection to the Selenium server
before(
    function(done){
    browser = soda.createOnPointClient(config);

    // Log commands as they are fired
        browser.on('command', function(cmd, args){
        console.log(' \x1b[33m%s\x1b[0m: %s', cmd, args.join(', '));
    });

    //establish the session
    browser.session(function(err){
        done(err);
    });

    }
);

//after each test has completed, send the browser back to the main page (hopefully cleaning our environment)
afterEach(function(done){browser.open('/',function(){
    done();
});
});

//after the entire suite has completed, shut down the selenium connection
after(function(done){

    browser.testComplete(function(err) {
        console.log('done');
        if(err) throw err;
       done();
    });

}); 
```

The result so far was that I'm not seeing any real performance gain by reusing the session over starting a new one. My tests still take roughly the same amount of time.

# playframework - 如何在依赖解析器中获取应用程序路径？

> ID：13921168
> 
> 赞同：0
> 
> 时间：2012-12-17T19:52:28.710
> 
> 标签：playframework, playframework-2.0, sbt

我在`repo`子目录中有本地 Maven 存储库。需要在解析器路径中指向该目录，但下面的示例不起作用。如何进入`application path`这个配置？

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
  resolvers += "my1" at "file://${Play.application().path()}/repo"
  resolvers += "my2" at "file://${application.path}/repo"
  resolvers += "my3" at "file://${play.application.path}/repo"
) 
```

在控制器类中使用`Play.application().path()`点到路径而不是我需要得到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:41:03.100

Build.scala 中的项目类和设置不可用，因为它构建了 play 项目。但是你可以使用一些 SBT 魔法：

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
  resolvers <+= baseDirectory { base => 
    "local maven repo in project" at ("file://" + base.getAbsolutePath + "/repo")
  }
) 
```

# iphone - 使用 Storyboard 将 UINavigationController 推入 UIViewController

> ID：13921169
> 
> 赞同：1
> 
> 时间：2012-12-17T19:52:34.553
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, uinavigationcontroller

我的应用程序的故事板使用 UIViewController 转到应用程序的不同视图。但是，我想尝试第三方库，即 EGOPhotoViewer，而不是重新发明轮子。但是如何从情节提要中将 UINavigationController 添加到 UIViewController ？这是该库用于初始化的代码。

```
EGOPhotoViewController *photoController = [[EGOPhotoViewController alloc] initWithPhotoSource:source];

[self.navigationController pushViewController:photoController animated:YES] 
```

当我将它添加为视图控制器时，它只对我有用：

```
[self presentModalViewController:photoController animated:YES]; 
```

但是该库在导航控制器中效果最好，因为我的测试方法中缺少标题栏和导航按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T20:01:06.310

在故事板中

*   选择你原来的 viewController，然后在菜单中：

*   编辑器 -> 嵌入 -> 导航控制器（即 viewController 成为 rootViewController）

现在您有多种选择来推送您的照片控制器，例如：

*   从 rootViewController 中的 UI 小部件，按住 CTRL 并拖动到 photoController。这将创建一个无需额外代码即可工作的 segue（尽管它有助于命名 segue，以便您稍后可以在代码中引用它）

*   或您在问题中的代码。

# android - Android Maps V2 API 中的地面叠加层大小错误

> ID：13921172
> 
> 赞同：0
> 
> 时间：2012-12-17T19:52:53.980
> 
> 标签：android, google-maps-android-api-2

我正在地图上放置一个地面叠加层。使用以下代码，我可以定位位图：

```
LatLng logAnchor = new LatLng(50.7738,7.28046);

GroundOverlayOptions mGroundOverlayOptions =new GroundOverlayOptions()

.image(BitmapDescriptorFactory.fromResource(R.drawable.hennef))

.anchor(0, 0)

.bearing(15)

.position(logAnchor, 59);

testGroundOverlay = mMap.addGroundOverlay(mGroundOverlayOptions); 
```

当我尝试使位图越来越大时，当我从 58 米变为 59 米时，叠加层会跳跃并变得比地图上预期的更大。有谁知道这是一个错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:38:23.293

在 GMAP API v2 中，您可以看到

> **位置...您可以选择提供叠加层的高度（以米为单位）。如果您不提供叠加层的高度，则会自动计算以保留图像的比例**。
> 
> 只需尝试使用位置（logAnchor，浮动宽度，浮动高度）

# objective-c - 无法在标签栏内隐藏中心图像

> ID：13921173
> 
> 赞同：0
> 
> 时间：2012-12-17T19:52:59.537
> 
> 标签：objective-c, ios

我将此代码用作我的标签栏类，它为我提供了一个带有更大中心按钮的自定义标签栏。我的问题是当我尝试隐藏标签栏时，标签栏消失了，但中心按钮图像仍然可见。如何使用标签栏隐藏中间按钮？

```
[self addCenterButtonWithImage:[UIImage imageNamed:@"hood.png"] highlightImage:[UIImage imageNamed:@"hood-selected.png"] target:self action:@selector(buttonPressed:)]; 
```

……

```
- (void)addCenterButtonWithImage:(UIImage *)buttonImage highlightImage:(UIImage *)highlightImage target:(id)target action:(SEL)action
{
    UIButton* button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.autoresizingMask = UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleTopMargin;
    button.frame = CGRectMake(0.0, 0.0, buttonImage.size.width, buttonImage.size.height);
    [button setBackgroundImage:buttonImage forState:UIControlStateNormal];
    [button setBackgroundImage:highlightImage forState:UIControlStateHighlighted];

    CGFloat heightDifference = buttonImage.size.height - self.tabBar.frame.size.height;
    if (heightDifference < 0) {
        button.center = self.tabBar.center;
    } else {

        CGPoint center = self.tabBar.center;
        center.y = center.y - heightDifference/2.0;
        button.center = center;

    }

    [button addTarget:target action:action forControlEvents:UIControlEventTouchUpInside];

    [self.view addSubview:button];
} 
```

**更新：**

我在另一堂课上写道：

```
TabBarController *blah = [[WBTabBarController alloc]init];
[blah hideButton]; 
```

……

**TabBarController.h：**

```
@property (nonatomic, strong) UIButton* button; 
```

**TabBarController.m:**

```
self.button = button; 
```

...

```
-(void)hideButton
{
    _button.hidden = YES;
    NSLog(@"Test!!!");
} 
```

但它不起作用。如果我放入`_button.hidden = YES;`TabBarController 的 viewDidLoad 按钮是隐藏的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:47:54.740

[self.button removeFromSuperView]

或 button.hidden=YES

当您像此处一样添加子视图时 [self.view addSubview:button]; 然后你想删除它，你通常会这样做 [self.button removeFromSuperView];

在隐藏标签栏的方法中放置 [self.button removeFromSuperView]; 这也行不通吗？

# ruby-on-rails - 使用 Arel 进行 Rails 搜索

> ID：13921175
> 
> 赞同：0
> 
> 时间：2012-12-17T19:53:15.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

伙计们，我正在尝试查找业务列等于 false 的所有用户。业务列在另一个模型中，所以我有2个模型用户模型和信息模型。我正在尝试使用 Arel 创建自己的搜索。这是我的用户模型上的方法：

```
def self.search
        users = self.arel_table

        information = Information.arel_table

        users.
            join(information).on(users[:id].eq(information[:user_id])).
            where(information[:business].eq(false))
end 
```

我没有看到错误，但我收到了这个错误：

```
NoMethodError in Users#index

Showing
/Users/jeanosorio/rails_projects/rutalaboral/app/views/users/index.html.erb
where line #1 raised:

undefined method `each' for `#<Arel::SelectManager:0x007ffcff1c2e20>` 
```

这是我从用户控制器执行的操作

```
def index
   @users = User.search()
end 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:09:16.597

您是否有任何理由尝试使用 Arel 而不是 ActiveRecord？在 ActiveRecord 中，您将执行以下操作：

```
User.joins(:information).where(Information.arel_table[:business].eq(false)) 
```

# xamarin.ios - 从样本缓冲区获取图像

> ID：13921181
> 
> 赞同：2
> 
> 时间：2012-12-17T19:53:35.300
> 
> 标签：xamarin.ios, screen-capture, avcapturesession, cgbitmapcontext, base-address

我正在尝试在相机打开时在 ipad 上捕获屏幕截图。我的代码看起来与 Xamarin MonoTouch 示例中的 AVCaptureFrames 完全一样：

![在此处输入图像描述](../Images/e9ae1a8cc7cc8e7e0d6f2c34a0465a1f.png)

但是，出于某种原因，我不断收到无效的处理程序异常。我看过与我类似的其他问题，例如：

[MonoTouch中的CGBitmapContext抛出无效句柄异常](https://stackoverflow.com/questions/12281658/cgbitmapcontext-in-monotouch-throws-invalid-handle-exception)和[“无效句柄”创建CGBitmapContext](https://stackoverflow.com/questions/10118388/invalid-handle-create-cgbitmapcontext)

但他们的解决方案并没有解决我的类似问题。我的问题不是由于发送 null 或因为我的内存太大。我没有发送空值，我通过 xcode 分配工具检查了我的内存使用情况，我的内存使用情况没有爆炸；它最多只增加 400KB。

# c# - 动态设置当前选项卡 WPF

> ID：13921182
> 
> 赞同：0
> 
> 时间：2012-12-17T19:53:35.903
> 
> 标签：c#, wpf, tabcontrol

我正在为我的 IDE 开发一些功能，单击一些树视图项，将更改当前显示的选项卡。我正在尝试这样做，但没有运气。我究竟做错了什么？如何将所需的选项卡设置为焦点？

这是代码：

```
 void tr_ViewOtherClass(object sender, MouseButtonEventArgs e)
        {
            string tagToView = ((TreeViewItem) sender).Tag.ToString();
            TabItem currentTab = ((TabItem) (tabControl.SelectedItem));
            if (tagToView != currentTab.Tag.ToString())
            {
                TabItem tabToView = null;
                for (int i = 0; i < tabControl.Items.Count; i++)
                {
                    tabToView = ((TabItem) (tabControl.Items[i]));
                    if (tabToView.Tag.ToString() == tagToView)
                        break;
                }
                classCodes[currentTab.Tag.ToString()] = ((TextEditor) currentTab.Content).Text;
                currentTab = tabToView;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:53:15.637

当您为`currentTab`变量赋值时，它**不会**修改`tabControl.SelectedItem`.

`tabControl.SelectedItem`如果你想改变它的值，你必须直接赋值；`currentTab`相当于一个指针，修改它的值只会修改局部变量所指向的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:13:46.287

TabItem currentTab
和
TabItem tabToView
都只是局部变量。
如果要将更改推送到 UI，则需要将 tabControl SelectedItem 与通知绑定两种方式。

TabControl 在 MVVM 中的行为不同。
我给出了非 MVVM 方式。
MVVM 可能是一个更好的方法。

# twitter-bootstrap - 退出元素时立即关闭引导弹出窗口？

> ID：13921193
> 
> 赞同：0
> 
> 时间：2012-12-17T19:54:15.093
> 
> 标签：twitter-bootstrap, popover

我们有一个我们正在使用的引导弹出窗口，它的加载方式是：

```
 $('a[rel=popover]').popover({
        placement: 'top',
        trigger: 'hover',
        animation: 'false',
        delay: 0
    }); 
```

页面上有许多项目（想想封面艺术），当您退出第一个并移至第二个时，即使动画关闭且延迟为 0，第一个关闭前也会有延迟。有没有办法在下一个加载之前关闭任何其他？

注意，用户并没有点击任何外部的东西，只是用 rel=popover 将鼠标悬停在下一个项目上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:57:40.677

像这样使用它：

```
$('a[rel=popover]').popover({
    placement: 'top',
    trigger: 'hover',
    animation: false,
    delay: { show: 100, hide: 1 }
}); 
```

# c# - 在 ASP.NET 4.0 中将动态构建的 HTML 写入文件

> ID：13921198
> 
> 赞同：-2
> 
> 时间：2012-12-17T19:54:35.953
> 
> 标签：c#

我有一个接收用户信息的网络表单。各种文本框的值用于构建一个html文件。我将此 html 写入文件（具有特定名称），然后提示用户保存此文件。此 html 用于创建 Outlook 电子邮件签名。目前我在应用程序中有这个 html。这已经部署到服务器上。我必须为所有用户设置此文件的写入权限才能使其正常工作。

是否存在任何安全风险？如果多个用户同时访问此应用程序并写入文件会发生什么情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:02:06.897

当您说文件具有“特定名称”时，您的意思是它始终是相同的名称吗？如果是这样，那么是的，如果多个用户同时使用此功能将会出现问题。他们将覆盖一个文件并下载彼此的数据。每次进程运行时，您都需要生成一个唯一的文件名以避免这种情况。

但是你真的需要保存文件吗？

还是您的目标纯粹是生成一些 HTML 供用户下载，而您这样做的方式是将其写入文件，然后提示他们下载该文件？

如果您不需要保存文件，而只需要生成 HTML 并提示用户保存，只需将其作为普通页面提供，并设置响应标头以便他们的浏览器将下载它。这些方面的东西：

```
Response.AddHeader("content-disposition", "attachment;filename=my_file.html"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:14:19.897

据我了解，用户填写网络表单并提交。随即，会弹出一个 html 文件以供从服务器下载。我认为这是这个场景的非常巧妙的实现。您只需要确保正确释放资源以防止锁定文件。

当多个用户访问此应用程序时，它不应中断，因为使用特定名称创建单独的文件（正如您所提到的）。我不知道使用什么逻辑来创建唯一名称。在某些特殊情况下（这完全取决于您的名称计算逻辑），如果计算出的特定文件名不知何故变得与现有文件相似，您应该有代码来替换或创建相同文件名的不同版本。如果您将捕获的数据从 Web 表单一次又一次地写入同一个文件而不释放您的流/文件对象，则可能会发生锁定。确保在代码中使用后处理您的对象。

如果您将 Web 应用程序的应用程序池的访问权限授予对该文件/文件夹具有写入权限的用户，而不是授予每个人写入权限，那就太好了。这样，您的应用程序将获得执行写入操作的完全权限，而不是拥有权限的用户。如果用户对文件/文件夹具有写入权限，那么任何人都很容易窥视并做一些意想不到的事情。

希望这可以帮助。

# css - CSS - li 背景

> ID：13921199
> 
> 赞同：0
> 
> 时间：2012-12-17T19:54:37.073
> 
> 标签：css, html-lists

我想对此进行编码，以便活动和悬停的 li 出现在正常的 li 上。但是发生的是悬停和活动 li 出现在正常 li 内。当我添加填充（以悬停和活动 li 的）以尝试复制正常 li 的大小时，正常 li 仍然可见，并且只是通过增加悬停和活动 li 的填充来扩展，并且没有被覆盖，因为我需要它是.

这是我的CSS：

/ ***** ** *** ** *** *******水平导航****** ** *** ** *** ****** /

```
.menu-horizontal {
    margin: 3px 2px 0.75em;
}
.menu-horizontal ul.top-level {
    background-color: #FFFFFF;
    clear: none;
    list-style-type: none;
    margin: 0;
    padding: 0;
}
.menu-horizontal ul.top-level li {
    background: #FEAB27;
    border-radius: 7px 7px 0px 0px;
    display: inline-block;
    height: 28px;
    padding: 0 25px;
}
.menu-horizontal ul.top-level {
    display: inline-block;
    float: left;
    height: 23px;
    margin-left: 173px;
    padding-top: 5px;
    text-align: center;
    text-transform: none;
}

.menu-horizontal ul.top-level li a {
    background: none repeat scroll 0 0 transparent;
    color: #000000;
    display: inline-block;
    line-height: 24px;
    text-decoration: none;
    font-family: Verdana,'Magra','Gafata',sans-serif;
    font-size: 102%;
    font-weight: bold;
}
.menu-horizontal ul.top-level li.selected a, .menu-horizontal ul.top-level li a:hover {
    background: #FDCC00;
    border-radius: 7px 7px 7px 7px;
    text-decoration: underline;

}
.menu-horizontal li ul.second-level {
    display: block;
    left: -999em;
    margin: -1000px 0 0;
    overflow: visible;
    padding: 0 0 9px;
    position: absolute;
    text-align: left;
}

.menu-horizontal li:hover ul.second-level, .menu-horizontal li.hover ul.second-level {
    left: auto;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:21:04.550

我不确定我的问题是否正确，但你想要这样的东西吗？

```
.menu-horizontal ul.top-level li.selected, .menu-horizontal ul.top-level li:hover {
background: #FDCC00;
border-radius: 7px 7px 7px 7px;
}

.menu-horizontal ul.top-level li a:hover, .menu-horizontal ul.top-level li.selected a {
text-decoration: underline;
} 
```

[http://jsfiddle.net/svSwA/](http://jsfiddle.net/svSwA/)

如果要将另一个元素更改为 A，则必须将 :hover 选择器放在其上，否则必须使用 JavaScript。

# c# - 在函数调用中将 XML 数据作为参数传递

> ID：13921201
> 
> 赞同：0
> 
> 时间：2012-12-17T19:54:46.873
> 
> 标签：c#, xml, app-config

我将`MyApp.exe.config`文件作为 xml 复制到单独的位置。

我正在使用这个自定义配置文件在应用程序运行时访问和更改一些设置，而不是`ConfigurationManager.<section>`使用`app.config`.

问题是，默认的 app.config 文件可能会在稍后阶段在用户机器上更新，我想将这些更改传播回我的自定义配置文件。

做这个的最好方式是什么？

```
<configSections>
    <section name="" type="" />
</configSections>

<appSettings>
    <add key="" value="" />
</appSettings>

<ConnectionManangerProviders>
    <provider name="" enabled="" type="">
        <pollingInterval></pollingInterval>
    </provider>
</ConnectionManagerProviders>

<QueueManagerProviders>
    <provider name="" enabled="" type="unique" encrypted="" signed="" cryptoProvider="" />
    <provider name="" enabled="" type="unique" encrypted="" signed="" cryptoProvider="">
        <queueName></queueName>
    </provider>
    <provider name="" enabled="" type="unique" encrypted="" signed="" cryptoProvider="">
        <applicationName></applicationName>
        <connectionString></connectionString>
    </provider>
</QueueManagerProviders> 
```

例如，这是配置文件的外观。假设`<QueueManagerProviders>`在 app.config 中修改了下面元素的值之一，我如何将此文件中的数据传递给方法，以便该方法可以有效地解析它并更新自定义配置文件中的相应部分我建立？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:10:02.783

这表明了糟糕的设计，可能有更好的方法来实现整个功能。但是，如果您无法控制“服务”部分，那么您将陷入困境......

您可能需要[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)，它“侦听文件系统更改通知并在目录或目录中的文件更改时引发事件”。

添加一个事件处理程序，如果您的文件发生更改，请再次读取整个文件并解析它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:36:04.060

实现自定义 ConfigSection 处理程序（请参阅[http://msdn.microsoft.com/en-us/library/2tw134k3(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/2tw134k3(v=vs.100).aspx)）。

# php - 对“标记”数据库进行排序的最快方法

> ID：13921204
> 
> 赞同：0
> 
> 时间：2012-12-17T19:55:14.610
> 
> 标签：php, mysql, database, tagging

我设置了一个相当普通的标记系统：

```
table|'keyword'|   : tag_id        | tag
table|'tag_thread'|: tag_thread_id | tag_id      | thread_id
table|'thread'|    : thread_id     | thread_info 
```

然而，我已经改变了我的标签的显示方式。

我的新想法是`related`在`keyword_tbl`. 我决定尝试这条路线，因为我想做一个面包屑系统，并且想“订购”标签，例如，体育 -> 棒球 -> 投手。此外，如果他们输入“棒球”，我想将 Sports 作为标签的一部分，而不用担心。

```
keyword_tbl : keyword_id | keyword | related_id 
```

例如：

```
keyword_tbl:
keyword_id // 1       // 2        // 3
keyword    // sports  // baseball // pitchers
related    // 0       // 1        // 2 
```

`0`标志着它是一个“通用”标签，是最广泛的术语。这意味着对于他们发布的每个线程，我只需要存储一个值（最详细的，或上面示例中的“投手”）。从“Pitcher”开始，我可以派生相关字段，并以向后的方式创建面包屑。

我的问题是：哪条路线更适合我试图用面包屑做的事情？我打算这样做的方式有什么特别错误的地方吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:14:16.887

这里有一些潜在的问题（但这并不意味着你走错了路）。

通常，标签是一个比类别更宽松的概念。听起来您将它们混合在一起，这可能是个问题。当你有一个适用于棒球和足球领域的人的标签（比如“左撇子”）时会发生什么？发明标签是为了避免这种分类问题，在这种分类问题中，所有事物都需要一个父级。

找出相关标签集的查询可能效率低下/混乱，具体取决于您可能拥有多少级别的面包屑。谁负责将标签分类成树？如果它是一个管理功能（因此不会经常发生），您可能想要创建一个“物化视图”来保存每个标签的所有相关标签。

# iframe - 无法为 iframe 内容调整 fancybox 的大小

> ID：13921205
> 
> 赞同：0
> 
> 时间：2012-12-17T19:55:17.233
> 
> 标签：iframe, fancybox

我想为多个fancybox iframe 重用相同的选择器类。我在这里查看了关于将 iframe 内容调整为fancybox 的不同帖子。虽然我看到的所有这些似乎都可以工作（我目前在[这里使用 JFK 的解决方案](https://stackoverflow.com/questions/10996212/auto-height-resizing-in-fancybox)），但我无法获得它，或者其他一些人无法在我的页面上工作。我在萤火虫中查找了“fancybox-iframe”类，它读作“fancybox-type-iframe”类。有人可以让我知道我在下面使用的代码有什么问题，为什么它是错误的以及如何修复它。链接的答案、jsfiddles 等也很好。内联用于包含少量内容的花式框，但我想将 iframe 用于页面。谢谢！

这是完整的代码。

这个打开fancybox的链接在域内的不同页面上

```
 <a href="thm12.html" class="openfb"></a> 
```

在fancybox中显示的HTML页面

```
 <!DOCTYPE html >
    <html style="width:550px;height:350px;" >
    <head>
    <title>THM - Twelve</title>
    <script language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
    <script src="../js/ui/jquery.ui.core.js"></script>
    <script src="../js/ui/jquery.ui.widget.js"></script>
    <script src="../js/ui/jquery.ui.mouse.js"></script>
    </script>    
    </head>    
    <body>

    <div class="thm-set">
       <p class="thm-set-title" >Start Settings</p>
  <form id="" class="default-set-thm" >

    <div class="thm-content" ><p>Lorem ipsum aenean tempus lacus vitae orci 
                        posuere porttitor eget non felis. Donec lectus elit, aliquam nec eleifend sit amet.</p><input type="text" value="" placeholder="" /></div>

           <span class="buttons">
                <input type="submit" class="close-fancybox"  value=""/>
                    <input type="submit" class="save-fancybox" value=""  />           
                </span> 
           </form>   
       </div>
    </body>
    </html> 
```

花式盒子 js 脚本

```
$(".openfb").fancybox({
    hideOnContentClick: false,
    type:'iframe',
    scrolling: 'no', 
    beforeShow: function(){
        this.width = ($('.fancybox-iframe').contents().find('html').width());
             alert("the width of this div is " + this.width);
        this.height = ($('.fancybox-iframe').contents().find('html').height());
    }
}); 
```

Chrome 提醒结果

![javascript 警报](../Images/03e716ee3b2181be38b45bf5bdb39570.png)

火狐警报结果

![在此处输入图像描述](../Images/83605af6ddb53859014c1db356efb87a.png)

IE 9 警报结果：

![在此处输入图像描述](../Images/24e67ffeae013e7d9ef1ed6a6ad355a7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:34:11.890

可能是您页面中的**拼写错误**，显示在 fancybox ... 这一行：

```
<html style="width:550px;height:350px; > 
```

... 缺少结束引号，`style="..."`因此无法从该标签中获取尺寸。

我的**[DEMO](http://www.picssel.com/playground/jquery/getDimensionFromIframe_27may12.html)**用于进一步的代码分析。

# c# - 以编程方式将 pkcs12 的私钥安装到 Linux 上的 Mono Cert Store

> ID：13921207
> 
> 赞同：1
> 
> 时间：2012-12-17T19:55:29.767
> 
> 标签：c#, linux, mono, private-key, pkcs#12

在 Windows 环境中的 .NET 上，如果 .pfx/.p12 包含私钥，则可以通过以下方式以编程方式将其安装到证书存储中（其中 rawData 是包含完整 .pfx/.p12 的字节数组，两者公钥和私钥，密码是.pfx/.p12的密码）：

```
X509Store store = new X509Store(StoreName.My, StoreLocation.LocalMachine);
X509Certificate2 certificate = new X509Certificate2(rawData, password, X509KeyStorageFlags.MachineKeySet | X509KeyStorageFlags.PersistKeySet | X509KeyStorageFlags.Exportable);
store.Open(OpenFlags.ReadWrite);
store.Add(certificate);
store.Close(); 
```

我希望在 Linux 环境中的 Mono 上做同样的事情。上面的代码在 Windows 上运行，只会在 Linux 上安装证书的公钥，而不是私钥。我已经能够使用 Mono 的 certmgr 实用程序手动安装 .p12 的私钥，但我正在寻找一种编程解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:58:38.867

抱歉，这个答案无法解决您的问题。Mono 不支持将私钥保存到证书存储区。[在这个有趣的讨论](http://lists.ximian.com/pipermail/mono-devel-list/2010-October/036101.html)中可以找到（高度）技术性的细节 。

在我的应用程序中，我最终将证书和私钥存储在数据库中，因为无论如何我的应用程序设计需要一种集中式证书存储。

# c++ - jsoncpp链接错误cmake

> ID：13921208
> 
> 赞同：2
> 
> 时间：2012-12-17T19:55:31.193
> 
> 标签：c++, eclipse, cmake, linker-errors, jsoncpp

我是 cmake 的新手。它工作得很好，但现在我得到了一些链接错误：

```
undefined reference to `Json::Reader::Reader()'
undefined reference to `Json::Value::Value(Json::ValueType)'
undefined reference to `Json::Reader::parse(std::basic_istream<char, std::char_traits<char> >&, Json::Value&, bool)'
undefined reference to `google::protobuf::MessageLite::ParseFromArray(void const*, int)' 
```

还有一些这种类型。

我想我必须在某处添加 jsoncpp 库。

这里有人知道如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T03:46:27.143

```
target_link_libraries(your_exe_target_name jsoncpp) 
```

Be sure that you've set up `link_directories()` beforehand.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-26T01:41:40.047

您可能需要考虑使用 [https://github.com/nlohmann/json](https://github.com/nlohmann/json)

它以单个 .hpp 文件的形式出现，您只需下载该文件，放入项目的源代码，然后在您想使用它时将其包含在头文件中。

然后将其作为项目的任何其他源文件进行编译和链接，无需任何特殊的 CMake 配置！

此外，它是一个非常易于使用的 JSON 库。

# flash - Flash：导入具有过滤器的 swf

> ID：13921209
> 
> 赞同：1
> 
> 时间：2012-12-17T19:55:35.440
> 
> 标签：flash, animation, filter

我制作了一个包含过滤器的 Flash 动画。当我将该 swf 导入另一个 flash 文件时，它会忽略过滤器。导入 swf 时，它会将动画转换为关键帧。当然这里没有 GPU 渲染问题。怎么了？

# php - mysql_fetch 问题...我快疯了

> ID：13921214
> 
> 赞同：0
> 
> 时间：2012-12-17T19:55:45.090
> 
> 标签：php, mysql

对不起，可能在某个地方会有我的问题的答案，但我正在寻找解决这个问题的几个小时：这是代码：

```
 <?php
    $con = mysql_connect("****","****","***");
    if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }

        mysql_select_db("******", $con);

    $query = "SELECT id FROM fq_questions";
    $rowcnt = mysql_num_rows(mysql_query($query));      
    echo "Tot scenes: ".$rowcnt;
    $id = rand (1,$rowcnt);
    echo "<br>Id rand: ".$id."<br>";    
flush();
    $newquery = "SELECT question FROM fq_questions WHERE id=".$id;
    $result = mysql_query($newquery);
    if (!$result) {
        $message  = 'Invalid query: ' . mysql_error() . "\n";
        $message .= 'Whole query: ' . $newquery;
        die($message);
    }

    $row = mysql_fetch_assoc($result);
    echo $row['question'];

    mysql_close($con);
    ?> 
```

问题是没有输出。我什么都试过了，好像是查询有问题，但是*有*结果，不是假的，但是即使存在，也没有输出。代码一直有效

```
 echo "<br>Id rand: ".$id."<br>"; 
```

然后它什么也没显示。这是一个虚拟的问题，我正因为它而变得疯狂。

呃，忘记了......我遇到问题的网站：[http ://www.freelabs.it/filmquiz/game.php](http://www.freelabs.it/filmquiz/game.php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:58:13.690

小心，`desc`是一个 SQL 关键字！因此，您的查询可能无法编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:01:33.543

“desc”是 MySQL 的保留字，您应该只更改数据库中的列名。无论如何，您的方法根本不是随机的，一旦您的 id 中有一个“漏洞”（当您删除一个成员时），它就会失败。

看看 MySQL “ORDER BY RAND()”

```
$data = mysql_query("SELECT description FROM fq_questions ORDER BY RAND() LIMIT 1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:03:26.593

您使用`mysql_fetch_row()`which 返回一个数值数组。然后，您尝试访问名为“desc”的阵列槽。
它不存在。（我的猜测是，这会产生一个抑制错误，阻止任何输出显示，或一个抑制警告，阻止该行之后的任何输出出现。）
尝试更改`mysql_fetch_row()`为`mysql_fetch_assoc()`（仍然不推荐使用！），这应该可以解决。

来源：[http](http://php.net/manual/en/function.mysql-fetch-row.php)
://php.net/manual/en/function.mysql-fetch-row.php 和： http: [//php.net/manual/en/function.mysql-fetch-assoc.php](http://php.net/manual/en/function.mysql-fetch-assoc.php)

# scala - 遍历状态单子时如何处理嵌套结构

> ID：13921215
> 
> 赞同：7
> 
> 时间：2012-12-17T19:55:46.963
> 
> 标签：scala, stack-overflow, scalaz, state-monad

我有一个嵌套结构，我正在使用 scalaz 状态单子将其转换为 XML。在我必须处理多级嵌套结构之前，这很有效。这是一个类似于我正在做的简化示例。给定以下 ADT：

```
sealed trait Nested
case object Leaf extends Nested
case class Foo(inner: Nested) extends Nested
case class Bar(inner: Nested) extends Nested 
```

我使用状态 monad 编写了一个转换器对象（假设 Scalaz7 和以下导入`import scalaz.{Node => _, _}; import Scalaz._; import scala.xml._`）：

```
case class Parents(foos: Int, bars: Int)
type ParentsS[X] = State[Parents, X]

def convertFoo(foo: Foo): ParentsS[Seq[Node]] = for {
  parents <- init[Parents]
  _ <- put[Parents](Parents(parents.foos + 1, parents.bars))
  inner <- convert(foo.inner)
  _ <- put[Parents](parents)
} yield <foo count={ parents.foos.toString }/>.copy(child=inner)

def convertBar(bar: Bar): ParentsS[Seq[Node]] = for {
  parents <- init[Parents]
  _ <- put[Parents](Parents(parents.foos, parents.bars + 1))
  inner <- convert(bar.inner)
  _ <- put[Parents](parents)
} yield <bar count={ parents.bars.toString }/>.copy(child=inner)

def convert(nested: Nested): ParentsS[Seq[Node]] = nested match {
  case Leaf => Seq[Node]().point[ParentsS]
  case foo@Foo(_) => convertFoo(foo)
  case bar@Bar(_) => convertBar(bar)
}

def nested(n: Int): Nested =
  if (n == 0) Leaf
  else {
    if (n % 2 == 0) Bar(nested(n - 1))
    else Foo(nested(n - 1))
  } 
```

根据我的堆栈设置，`convert(nested(1000)).apply(Parents(0, 0))`在转换过程中会导致堆栈溢出。（较高的值会导致`nested`溢出，但这可以忽略，因为我刚刚`nested`为这个问题创建了。）：

```
 at scalaz.IdInstances$$anon$1.bind(Id.scala:20)
    at scalaz.StateT$$anonfun$flatMap$1.apply(StateT.scala:48)
    at scalaz.StateT$$anon$7.apply(StateT.scala:72)
    at scalaz.StateT$$anonfun$flatMap$1.apply(StateT.scala:48)
    at scalaz.StateT$$anon$7.apply(StateT.scala:72)
    at scalaz.StateT$$anonfun$flatMap$1$$anonfun$apply$2.apply(StateT.scala:49)
    at scalaz.StateT$$anonfun$flatMap$1$$anonfun$apply$2.apply(StateT.scala:48) 
```

我的问题是 - 避免堆栈溢出的最佳方法是什么`scalaz.stateT`？如果使 XML 序列化逻辑更易于遵循和排除故障，我想继续使用 state monad，就像在我的真实示例中一样（实际输入结构是从实时调试会话中检索到的 JDI 镜像[对象和数组](http://docs.oracle.com/javase/6/docs/jdk/api/jpda/jdi/com/sun/jdi/ObjectReference.html)，内部值是嵌套字段值） .

编辑：取出嵌套堆栈问题：

```
import util.control.TailCalls
def nested2(n: Int, acc: Nested = Leaf): TailCalls.TailRec[Nested] =
  if (n == 0) TailCalls.done(acc)
  else TailCalls.tailcall(nested2(n - 1, if (n % 2 == 0) Bar(acc) else Foo(acc))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T22:55:47.750

蹦床可以帮助您避免这里的堆栈溢出。首先对于相同的设置：

```
sealed trait Nested
case object Leaf extends Nested
case class Foo(inner: Nested) extends Nested
case class Bar(inner: Nested) extends Nested

import scalaz.{Node => _, _}; import Scalaz._;
import scala.util.control.TailCalls, scala.xml._

case class Parents(foos: Int, bars: Int)

def nested(n: Int, acc: Nested = Leaf): TailCalls.TailRec[Nested] =
  if (n == 0) TailCalls.done(acc) else TailCalls.tailcall(
    nested(n - 1, if (n % 2 == 0) Bar(acc) else Foo(acc))
  ) 
```

一些略有不同的类型别名：

```
type TrampolinedState[S, A] = StateT[Free.Trampoline, S, A]
type ParentsS[A] = TrampolinedState[Parents, A] 
```

`MonadState`为方便起见，我们将导入实例的方法：

```
val monadState = MonadState[TrampolinedState, Parents]
import monadState._ 
```

其余的实际上更简洁一些，因为我们不需要类型参数 on`put`等：

```
def convertFoo(foo: Foo): ParentsS[Seq[Node]] = for {
  parents <- init
  _ <- put(Parents(parents.foos + 1, parents.bars))
  inner <- convert(foo.inner)
  _ <- put(parents)
} yield <foo count={ parents.foos.toString }/>.copy(child=inner)

def convertBar(bar: Bar): ParentsS[Seq[Node]] = for {
  parents <- init
  _ <- put(Parents(parents.foos, parents.bars + 1))
  inner <- convert(bar.inner)
  _ <- put(parents)
} yield <bar count={ parents.bars.toString }/>.copy(child=inner)

def convert(nested: Nested): ParentsS[Seq[Node]] = nested match {
  case Leaf => Seq[Node]().point[ParentsS]
  case foo@Foo(_) => convertFoo(foo)
  case bar@Bar(_) => convertBar(bar)
} 
```

现在我们只需运行以下命令（例如）：

```
convert(nested(2000).result).apply(Parents(0, 0)).run 
```

这远远超出了香草`State`解决方案开始在我的机器上窒息的程度。

# jira - 如何确定文件在 JIRA 中附加到什么问题？

> ID：13921216
> 
> 赞同：2
> 
> 时间：2012-12-17T19:55:57.550
> 
> 标签：jira

在我们的 JIRA 安装中，我有一个文件附件的完整 URL 路径（例如 /jira/secure/attachment/40226/FileName.jpg）。但是，我不确定此文件当前附加到哪个问题，因为附件 URL 不包含有关“父”问题的任何信息。有没有办法使用 JQL 来找出这个链接？任何可以帮助的插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:09:11.053

您可以从文件位置获取问题。附件按以下层次结构排列：

```
attachments -> project-name -> issue key 
```

例如，如果 Jira 安装在`/var/atlassian/application-data`并且附件位于 下`jira/data/attachments`，对于 issue on project `DVP`， issue `DRP-913`，附件将位于：

```
/var/atlassian/application-data/jira/data/attachments/DVP/DVP-913 
```

您作为示例提供的路径不是默认附件路径，这就是它没有关于父问题的任何信息的原因。

另一种不太有效的方法是[直接查询 Jira 的数据库](https://confluence.atlassian.com/display/JIRACOM/Example+SQL+queries+for+JIRA#ExampleSQLqueriesforJIRA-Findwhichissueanattachmentbelongsto)：

```
SELECT * FROM jiraissue WHERE id in 
  (SELECT issueid from changegroup where ID in 
    (SELECT groupid FROM changeitem WHERE NEWVALUE='<enter attachment ID>')
  ) 
```

您可以在此处找到有关[数据库结构](https://developer.atlassian.com/display/JIRADEV/Database+Schema)的更多信息。

如果您需要任何帮助，请告诉我。

# python - 试图找出 Python 中的 except 语句

> ID：13921219
> 
> 赞同：3
> 
> 时间：2012-12-17T19:56:21.470
> 
> 标签：python, except

我在理解在 Python 中使用“except”语句的方法时遇到了一些麻烦。我现在是一个可怕的编码员，所以我提前道歉。

这是我试图运行的小代码：

```
def mathWorks():
    print " Answer the following: 5 + x = 10"

    x = int(raw_input("Please type your answer: "))

    if x == 5:
        print "You are correct!"
    else:
        print "You are incorrect!"
        break
    except ValueError:
        print "That is not an integer!"

mathWorks() 
```

我认为我想要完成的事情是不言自明的。不幸的是，这段代码中的“except”语句出现“无效语法”。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T19:58:07.477

`except`必须在一个`try`块之后。这表明应该处理异常的代码部分：

```
try:
    x = int(raw_input("Please type your answer: "))
except ValueError:
    print "That is not an integer!" 
```

将其读作“试试这个，如果失败就这样做”。请注意，在块中做的越少越好`try`——这可以确保您不会捕获您无意捕获的错误（就像指定要捕获的异常类型一样，您已经在这样做了）。

在这种情况下，您可能还想`sys.exit(1)`在`except`块中调用，否则程序将继续（并因另一个错误而失败）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:58:29.910

它是这样使用的：

```
try: # try code here
except: # except errors here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T03:09:28.933

对于您的代码，有一个“else”语句，您应该在所有 except 语句之后使用“else”语句。

这与您的问题没有直接关系，但您可能会遇到这个问题。

更多详情请参考原文档： [https ://docs.python.org/2/tutorial/errors.html](https://docs.python.org/2/tutorial/errors.html)

# c# - ASP MVC 控制器方法中的 Linq 语法错误

> ID：13921227
> 
> 赞同：0
> 
> 时间：2012-12-17T19:56:53.600
> 
> 标签：c#, asp.net-mvc-3, linq

我有一个 Linq 查询，需要在页面控制器的 Index 方法中使用，但是在代码的“选择新”部分出现以下错误：

**错误**

```
Cannot implicitly convert type 'System.Linq.IQueryable<AnonymousType#1>' to 'string' 
```

**动作方法**

```
 public ActionResult Index(string query)
    {

        var agentProductTraining = "";

        if (String.IsNullOrEmpty(query))
        {
            BlankIndex();
        }
        else
        {
            agentProductTraining = from course in db.Course
                                   where
                                       course.CourseDescription.Contains(query)
                                   select new
                                   {
                                       course.CourseCode,
                                       course.CourseDescription,
                                       course.Partner,
                                       course.Status,
                                       course.LastChangeDate,
                                       course.LastChangeOperator
                                   };
        }

        return View(agentProductTraining.ToList());
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T19:58:30.350

正如错误明确指出的那样，您不能将 LINQ 查询 ( `IQueryable<T>`) 的结果分配给类型为 的变量`string`。

您应该在该行中声明变量：

```
var agentProductTraining = select ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:05:08.337

您已将变量初始化为字符串，因此编译器将变量设为`string`类型（因为您使用了`var`关键字），但随后尝试为其分配一组匿名类型。

您可以将其声明为`object`相反或`var`：

```
object agentProductTraining;  // can safely be overwritten 
```

我也假设你的意思是：

```
return BlankIndex(); 
```

在`if`块中。否则会落到

```
return View(agentProductTraining.ToList()); 
```

`agentProductTraining`将在哪里`null`

当然，如果你`return BlankIndex`在`if`块中使用，你可以简化整个事情：

```
if (String.IsNullOrEmpty(query))
{
    return BlankIndex();
}

// don't need an `else` here since the if will return to the caller
var agentProductTraining = from course in db.Course
                           where
                               course.CourseDescription.Contains(query)
                           select new
                           {
                               course.CourseCode,
                               course.CourseDescription,
                               course.Partner,
                               course.Status,
                               course.LastChangeDate,
                               course.LastChangeOperator
                           };

return View(agentProductTraining.ToList()); 
```

# tcl - 在 tcl/tk 中使用 for 循环创建多个输入框

> ID：13921228
> 
> 赞同：0
> 
> 时间：2012-12-17T19:56:58.757
> 
> 标签：tcl, tk

嗨，我有一个整数值，并且基于该值，我必须在 tcl/tk gui 中创建输入框。所以我做了这样的事情：

```
 set frame1 [::hwt::LabeledFrame [::hwt::WindowRecess editThicknessWindow].frame1 "Current List: " \
                                                        -expand 0 -relief flat -anchor e -side top -pady 15]

    for {set i 0} {$i < $length_Thickness} {incr i} {
        set Entry_No_$i [::hwt::AddEntry $frame1.Entry_No_[eval $i] label "List Values_$i :" labelwidth 15 \
          entryWidth 10 anchor nw validate real text [namespace current]::arr_attribOptionsValue(Thickness)[$i] state normal \
          withoutPacking -textvariable [namespace current]::lst_Value[$i] ]
          pack $Entry_No_[eval $i] -side top -anchor nw -padx 10 -pady 10
    } 
```

因此，假设我的整数为 3，那么我必须创建 3 个输入框。我有一个列表“arr_attribOptionsValue（Thickness）”，其中包含 3 个值，因此我希望将列表中的值填充到输入框中。由于我是 tcl/tk 的新手，所以不确定语法是否正确或者我是否遗漏了什么。我很困惑，就像我正在创建 tk 变量 Entry_No_$i 并且在包中我使用的是 $Entry_No_[eval $i] 所以这两个是指相同的值还是语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:25:54.173

首先，如果您要创建这样的变量，`$Entry_No_[eval $i]`那么我*真的*认为您的做法是错误的。这样的复合变量实际上更容易作为数组元素完成，例如`Entry_No($i)`，其中没有`eval`混淆事物（或`$Entry_No($i)`从元素中读取而不是命名它）。

其次，`[namespace current]::arr_attribOptionsValue(Thickness)[$i]`更容易出错，尤其是`$i`整数。你不能处理这样的列表元素（没有人建议它*应该*是可能的，但这肯定不会在接下来的几个月内发生，而且肯定不会与这样的数组结合使用） . 相反，最简单的机制是使用从源列表中填充的另一个数组，并在必要时使用跟踪耦合回来。（跟踪是一种更高级的技术；如果您需要它们，请提出另一个问题。）从列表中填充工作数组可能是这样完成的：

```
set i 0
foreach item $arr_attribOptions(Thickness) {
    set varname arr_attribOptions(Thickness,$i)
    set $varname $item
    incr i
} 
```

是的，您可以将变量名称存储在变量中。（阅读时，使用`[set $varname]`做双重取消引用。）

第三，小部件名称最好不包含大多数非字母数字字符（`.`当然，除了 ）并且不以大写字母开头任何组件（出于与窗口类相关的技术原因）。

第四，请使用`variable`（或`upvar`或`namespace upvar`）来避免使用完全限定的变量。

* * *

总的来说，我们可以结合使用这些技术来获得这样的结果：

```
set frame1 [::hwt::LabeledFrame [::hwt::WindowRecess editThicknessWindow].frame1 "Current List: " \
        -expand 0 -relief flat -anchor e -side top -pady 15]

namespace upvar [namespace current] \
        arr_attribOptions attribs arr_values values lst_Value valueList
set i 0
foreach item $attribs(Thickness) {
    set attribs(Thickness,$i) $item
    set values($i) [lindex $valueList $i]
    incr i
}

for {set i 0} {$i < $length_Thickness} {incr i} {
    set Entry_No($i) [::hwt::AddEntry $frame1.entry_No_$i label "List Values_$i :" labelwidth 15 \
            entryWidth 10 anchor nw validate real text arr_attribOptions(Thickness,$i) state normal \
            withoutPacking -textvariable [namespace current]::arr_values($i)]
    pack $Entry_No($i) -side top -anchor nw -padx 10 -pady 10
} 
```

我不知道我已经确定了所有的问题（而且大多数 Tcl 程序员不在变量名上使用匈牙利类型前缀），但它现在更接近惯用语了。

# sql - 如何返回时间戳最早和时间戳最新的记录

> ID：13921236
> 
> 赞同：-2
> 
> 时间：2012-12-17T19:57:19.923
> 
> 标签：sql, sql-server

我有一个查询，可以拉动用户打卡和打卡时间。我要做的是只返回第一个时钟时间和最后一个时钟时间的结果。

我的查询是：

```
SELECT
   lRecordID, lEmployeeID, dtTimeIn, dtTimeOut, sEnteredBy, sUpdatedBy, 
   dtUpdated, sDept, fHoursWorked, lDeptID, dblHourlyWage, fRegHours, dblRegLabor, 
   fOTHours, dblOTLabor, dtTimePunchIn, dtTimePunchOut, fPunchedHours
FROM            
   TimeClock
WHERE        
   (dtTimeIn > @startdate) AND (dtTimeOut < @enddate) AND (sDept IN ('1', '2', '3')) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:07:40.120

一种方法是使用以下`row_number`功能：

```
SELECT lRecordID, lEmployeeID, dtTimeIn, dtTimeOut, sEnteredBy, sUpdatedBy, 
       dtUpdated, sDept, fHoursWorked, lDeptID, dblHourlyWage, fRegHours, dblRegLabor, 
       fOTHours, dblOTLabor, dtTimePunchIn, dtTimePunchOut, fPunchedHours
FROM (select tc.*,
             row_number() over (partition by cast(dtTimeIn as date) order by dtTimeIn) as seqnum_asc,
             row_number() over (partition by cast(dtTimeIn as date) order by dtTimeIn desc) as seqnum_desc
     from TimeClock tc
     WHERE (dtTimeIn > @startdate) AND (dtTimeOut < @enddate) AND (sDept IN ('1', '2', '3'))
    ) tc
where seqnum_asc = 1 or seqnum_desc = 1 
```

我假设 dtTimeIn 包含您要查找的日期和时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T20:13:53.557

试试这个使用`rank()`;

```
SELECT * FROM (
    SELECT lRecordID, lEmployeeID, dtTimeIn, dtTimeOut, sEnteredBy, 
       sUpdatedBy, dtUpdated, sDept, fHoursWorked, lDeptID, 
       dblHourlyWage, fRegHours, dblRegLabor, fOTHours, dblOTLabor, 
       dtTimePunchIn, dtTimePunchOut, fPunchedHours,
       RANK() OVER (ORDER BY dtTimeIn) rk1, --earliest record gets 1
       RANK() OVER (ORDER BY dtTimeOut DESC) rk2 --latest record gets 1

    FROM  TimeClock
    WHERE (dtTimeIn > @startdate) AND (dtTimeOut < @enddate) AND 
      (sDept IN ('1', '2', '3'))
) A
WHERE rk1=1 OR rk2=1 
```

**编辑 (1)：**使用`Partitian by` *sDept编辑*

**编辑 (2)：**再次编辑删除`Partitian by` *sDept*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T20:13:56.670

您可以使用子查询来执行此操作：

```
SELECT
   lRecordID, lEmployeeID, dtTimeIn, dtTimeOut, sEnteredBy, sUpdatedBy, 
   dtUpdated, sDept, fHoursWorked, lDeptID, dblHourlyWage, fRegHours, dblRegLabor, 
   fOTHours, dblOTLabor, dtTimePunchIn, dtTimePunchOut, fPunchedHours
FROM TimeClock c
LEFT JOIN
(
    select MIN(dtTimeIn) MindtTimeIn, CAST(dtTimeIn as DATE) dt
    from timeclock
    group by CAST(dtTimeIn as DATE)
) MinEmp
    on c.dtTimeIn = MinEmp.MindtTimeIn
    and CAST(c.dtTimeIn as DATE) = MinEmp.dt
LEFT JOIN
(
    select MAX(dtTimeOut) MaxdtTimeOut, CAST(dtTimeOut as DATE) dt
    from timeclock
    group by CAST(dtTimeOut as DATE)
) MaxEmp
    on c.dtTimeOut = MaxEmp.MaxdtTimeOut
    and CAST(c.dtTimeOut as DATE) = MaxEmp.dt
WHERE (dtTimeIn > @startdate) 
    AND (dtTimeOut < @enddate) 
    AND (sDept IN ('1', '2', '3')) 
```

如果您没有使用 SQL Server 2008+，那么您没有`DATE`数据类型，因此您可以使用：

```
SELECT
   lRecordID, lEmployeeID, dtTimeIn, dtTimeOut, sEnteredBy, sUpdatedBy, 
   dtUpdated, sDept, fHoursWorked, lDeptID, dblHourlyWage, fRegHours, dblRegLabor, 
   fOTHours, dblOTLabor, dtTimePunchIn, dtTimePunchOut, fPunchedHours
FROM TimeClock c
LEFT JOIN
(
    select MIN(dtTimeIn) MindtTimeIn, Convert(char(10), dtTimeIn, 120) dt
    from timeclock
    group by Convert(char(10), dtTimeIn, 120)
) MinEmp
    on c.dtTimeIn = MinEmp.MindtTimeIn
    and Convert(char(10), c.dtTimeIn, 120) = MinEmp.dt
LEFT JOIN
(
    select MAX(dtTimeOut) MaxdtTimeOut, Convert(char(10), dtTimeOut, 120) dt
    from timeclock
    group by Convert(char(10), dtTimeOut, 120
) MaxEmp
    on c.dtTimeOut = MaxEmp.MaxdtTimeOut
    and Convert(char(10), c.dtTimeOut, 120 = MaxEmp.dt
WHERE (dtTimeIn > @startdate) 
    AND (dtTimeOut < @enddate) 
    AND (sDept IN ('1', '2', '3')) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T20:10:42.023

你会想做：

```
SELECT [] FROM [] WHERE [] AND rownum = 1 ORDER BY timestamp DESC
UNION
SELECT [] FROM [] WHERE [] AND rownum = 1 ORDER BY timestamp ASC 
```

可能有更好的方法可以做到这一点，但这无论如何都会让你得到答案。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-17T20:07:14.510

如果添加 ORDER BY dtTimeIn ASC 并限制 TOP 1 的行数，它将返回第一个打卡。如果添加 ORDER BY dtTimeOut DESC 并限制 TOP 1 的行数，它将显示最后一个打卡出去。您只需要合并这两个查询。

我没有尝试过，但它可能看起来像这样。

```
SELECT TOP 1 * FROM  (

SELECT
   lRecordID, lEmployeeID, dtTimeIn, dtTimeOut, sEnteredBy, sUpdatedBy, 
   dtUpdated, sDept, fHoursWorked, lDeptID, dblHourlyWage, fRegHours, dblRegLabor, 
   fOTHours, dblOTLabor, dtTimePunchIn, dtTimePunchOut, fPunchedHours
FROM            
   TimeClock
WHERE        
   (dtTimeIn > @startdate) AND (dtTimeOut < @enddate) AND (sDept IN ('1', '2', '3'))
ORDER BY dtTimeIn ASC
)

UNION 

SELECT TOP 1 * FROM (

SELECT
   lRecordID, lEmployeeID, dtTimeIn, dtTimeOut, sEnteredBy, sUpdatedBy, 
   dtUpdated, sDept, fHoursWorked, lDeptID, dblHourlyWage, fRegHours, dblRegLabor, 
   fOTHours, dblOTLabor, dtTimePunchIn, dtTimePunchOut, fPunchedHours
FROM            
   TimeClock
WHERE        
   (dtTimeIn > @startdate) AND (dtTimeOut < @enddate) AND (sDept IN ('1', '2', '3'))
ORDER BY dtTimeOut DESC

) 
```

# objective-c - 在 Xcode 中查看控制器问题

> ID：13921240
> 
> 赞同：0
> 
> 时间：2012-12-17T19:57:48.543
> 
> 标签：objective-c, cocoa-touch

我刚刚想出了如何在按下按钮时添加新视图。例如，在我的故事板中，我使用了一个选项卡式控制器，而在我的第一个 viewController 中，我在导航栏的右上角有一个按钮。当我按下该按钮时，它会指向另一个视图控制器。我想知道如何为该视图控制器编写代码？我尝试创建一个新文件>objective-c 类，但我不知道如何将它们链接在一起？有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:02:51.007

如果您在情节提要中创建了另一个控制器，您只需将该控制器的类更改为您创建的新类。您在身份检查器中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:06:04.370

使用导航控制器在视图之间导航，您必须为按钮创建一个 IBACTION 方法。您将在其中通过 pushviewcontroller 导航所需的视图。

请看这个链接...

[如何推送视图控制器（视图控制器）？](https://stackoverflow.com/questions/1644293/how-to-push-viewcontroller-view-controller)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T11:22:34.880

这意味着必须初始化哪个类以及该类的 nib 名称是什么。我们不应该在这个块中做任何事情，直到您需要在 viewDidLoad/viewWillAppear 之前执行您的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T18:28:02.423

事实证明，不需要任何代码来获取按钮以将您定向到您设置的另一个视图控制器。您必须在`@interface`部件中明确声明按钮，将按钮与其代码连接，然后您必须使用从按钮到您希望按钮激活的下一个视图控制器的操作连接。我个人使用了模态连接，主要是因为我不确定什么是推送连接或它的作用......但是我想通了！希望这对需要这个的任何其他人有所帮助！

# c++ - 读取文件时0x0D后0x0A

> ID：13921247
> 
> 赞同：0
> 
> 时间：2012-12-17T19:58:24.923
> 
> 标签：c++

我读了一个文件，发现`0x0D`后面有任何`0x0A`. 我只知道进行转换的是窗户。

但是我用的是二进制模式，就不能阻止吗？

`ifstream input(inputname, ios::binary);input.get(ch);`

我该如何避免它。我只想得到`\n`.

怎么写文件？

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:27:49.337

如果您使用的系统确实使用了行尾，那么以*文本*`\r\n`模式打开文件将导致系统自动将这些转换为不带. 以二进制模式打开文件会阻止这种转换。*`\n``\r`*

 *如果您使用的系统*不*使用此约定，则没有模式可以转换行尾。您必须自己手动转换它们或使用外部工具预处理文件。

* * *

如果要检测文件是否使用`\r\n`，则必须手动进行。扫描文本文件，看看每个文件`\n`前面是否都有`\r`.

作为替代方案，您可以简单地在处理代码中添加逻辑以专门处理`\r`后跟`\n`. 就像是：

```
for (int i=0; i<n; ++i) {
    if ('\r' == text[i] && (i+1<n) && '\n' == text[i+1])
        ++i; // skip carriage return, just handle newline
    if ('\n' == text[i])
        handle newline...
    else
        handle other characters
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:22:33.513

唔。如果您使用二进制模式，`ios::binary`则告诉库您要读取二进制文件（未煮过的，原始文件）。
在文本文件中使用 msdos（现在有些人称之为 windows-nt）的行由 0d0a 终止。因此，如果您不想看到这两个字符，则必须以文本模式打开文件（只需省略 ios::binary）。
或者您必须通过一些实用程序（如 dos2unix）将这些文件转换为 unix 样式，但是，如果您使用的是 Windows 系统，例如记事本可能无法按预期显示这些文件...*

# maven - Maven编译失败，Maven安装成功

> ID：13921248
> 
> 赞同：1
> 
> 时间：2012-12-17T19:58:26.387
> 
> 标签：maven, compilation

我无法解释为什么我的**Maven 编译**失败而**Maven 安装**在同一个项目上成功。上下文：运行 Eclipse 和 m2e，一切都在工作空间中编译。运行配置 > Maven 编译失败（未找到符号）但 Maven 安装成功。所以，我的理解是*Maven install 调用 Maven compile*。Maven 编译失败：**未找到符号**位于 .java 测试类的祖先类上。有趣的是，对类执行 run as > JUnit 测试显示在同一个祖先类上编译失败 ClassNotFound。你能帮我吗？- 查克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:53:45.597

在eclipse中，所有java文件都是从源文件夹编译到`target/classes`（可以更改）。Eclipse 用于编译所有类 - 从具有所有范围（编译、测试、提供等）的 pom 和其他项目（检查您的项目是否依赖于工作区中的其他打开）。当你运行`maven install`- maven 检查是否所有的类都已编译并创建 jar 包。它不知道类是如何编译的？通过 Maven 还是通过 Eclipse？

如果您通过 maven compile（安装包）进行编译 - maven 仅使用具有 compile/provided 范围的库。它不使用任何其他依赖项。

你可以做一个测试。添加到你的pom：

```
 <dependency>
      <groupId>org.testng</groupId>
      <artifactId>testng</artifactId>
      <version>6.8</version>
      <scope>test</scope>
    </dependency> 
```

现在在 src/main/java @Test 注释中的一个类中使用。在eclipse项目中会编译。但是运行时`mvn clean install`会显示编译错误（No such class Test）。

# php - 在没有框架的情况下路由 REST 请求？

> ID：13921249
> 
> 赞同：6
> 
> 时间：2012-12-17T19:58:26.837
> 
> 标签：php, api, rest

我一直在阅读这篇文章来学习如何构建一个 REST API：

[http://www.gen-x-design.com/archives/create-a-rest-api-with-php/](http://www.gen-x-design.com/archives/create-a-rest-api-with-php/)

有一次它说“假设您已将请求路由到用户的正确控制器”

没有框架我怎么能做到这一点？

我正在编写一个 REST API，我可以从不同的应用程序与之交互。我准备好了上面的教程，它主要是有意义的，但我不完全理解将我的请求路由到正确的用户控制器意味着什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:07:35.657

假设您正在使用，您可以使用一些基于 PHP 的逻辑`Apache`的组合轻松完成此操作。`mod_rewrite`例如，在您的`.htaccess`或 vhost 定义中，您可以通过单个处理程序路由所有请求，可能`index.php`：

```
# Don't rewrite requests for e.g. assets
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*+)$ index.php?q=$1 [L] 
```

...然后在您的 index.php 文件中执行以下操作：

```
$target = $_REQUEST['q'];
/* parse the request and include the appropriate controller PHP */ 
```

例如，一个请求`/products/1234`可能会导致包含一个`controllers/products.php`处理程序。然后，该处理程序可以对 product 采取行动`1234`。因为您使用的是 REST，所以您不需要关心具有查询字符串参数的原始请求。

有多种方法可以完成听起来像是您正在尝试做的事情，这只是其中之一。最终，您的选择将取决于您的具体要求。上述模式相当普遍，但是许多框架都使用它或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:09:25.270

我认为这是一个术语问题。每个具有某种概括程度的代码都可以称为“框架”。而且由于您询问的是“路由”，它提供了一个初步的泛化水平，因此每个实现都成为一个框架。

如果您不想使用现有的成熟框架，您可以详细说明自己的轻量级实现。这里有一些文章开始：

*   [编写自己的 PHP MVC 框架](http://anantgarg.com/2009/03/13/write-your-own-php-mvc-framework-part-1/)
*   [PHP MVC 框架一小时内](http://johnsquibb.com/tutorials/mvc-framework-in-1-hour-part-one) （作者决定删除这篇文章，因为他认为使用现代的成熟框架更适合编程此类事情，但有些人发现这种简单和精简的方法更适合许多方面：学习、效率、没有巨大的依赖等）；该帖子在其他一些站点上可用，例如，在[回程机器](https://web.archive.org/web/20121215045721/http://johnsquibb.com/tutorials/mvc-framework-in-1-hour-part-one)或[副本中](http://phpbao.diandian.com/post/2013-03-14/40048243953)
*   [PHP 中的模型视图控制器](http://php-html.net/tutorials/model-view-controller-in-php/)

所有这些介绍都包括对路由机制的解释并演示其实现。

基本上，路由器是应用程序内部的一种内部“ [DNS](http://en.wikipedia.org/wiki/Domain_Name_System) ”（比喻意义上的）。当请求到达您的站点时，您需要根据该请求属性将其分派给适当的工作人员类。这是路由器的任务。

# php - 为什么 ../（点点斜杠）在我的根目录中不起作用？

> ID：13921252
> 
> 赞同：1
> 
> 时间：2012-12-17T19:58:30.367
> 
> 标签：php

> **可能重复：**
> [相对包含文件](https://stackoverflow.com/questions/5398451/relative-include-files)

例如，

```
 include('../admin/db_cred.php'); 
```

如果我在另一个文件夹（例如 public）中，那将有效。但是，如果我只是在 www.SITE.com/index.php，它不起作用。

警告：include(../admin/db_cred.php) [function.include]: failed to open stream: No such file or directory in /home/[...].php on line 6

我添加了（点点斜线），因为搜索 ../ 不能很好地工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:01:43.813

约定表示从您所在的`../`位置上移一级目录。如果您在根目录中，则不能再向上移动任何级别。

如果您的 /admin 文件夹在根目录中，并且您从 /public 目录调用它，那么`../admin/`将允许您从下一级选择 /admin 文件夹

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T20:04:06.770

`../`意思是“这个文件夹上面的文件夹”或“上移一个文件夹”。例如，如果您在终端中输入`cd ../`，您将从开始的位置向上移动一个文件夹。

当您位于 时`site.com/index`，您很可能位于您网站的 Web 根目录中，因此无法升级，因为没有升级。

“可是上面有文件夹`/var/www`！” 是的，有，但是您的脚本无权访问它们（这是一件非常好的事情，您不希望被劫持的脚本访问您的整个服务器）。就您的脚本而言，`/var/www`（或任何您的 Web 根目录）*是*最顶层，无论文件系统上实际存在什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:03:07.480

../ 是父文件夹，但 root 没有父文件夹。

如果你想解决

```
http://site/admin/db_cred.php 
```

你应该这样写：

```
include('~/admin/db_cred.php'); 
```

# algorithm - 二进制字符串搜索 - 最小 bin 宽度？

> ID：13921264
> 
> 赞同：5
> 
> 时间：2012-12-17T19:59:06.700
> 
> 标签：algorithm, search, binary-search-tree

我碰巧在 Python 中构建二进制搜索，但这个问题通常与二进制搜索结构有关。

假设我有大约一千个合格的候选人，我正在使用二分搜索进行搜索，采用经典的方法将排序的数据集二等分并重复此过程，以缩小合格的集合以进行迭代。候选人只是一串名字，（first-last 格式，例如“Peter Jackson”）我最初按字母顺序对集合进行排序，然后使用以下方法进行二分：

```
hi = len(names)
lo = 0
while lo < hi:
  mid = (lo+hi)//2
  midval = names[mid].lower()
  if midval < query.lower():
    lo = mid+1
  elif midval > query.lower():
    hi=mid
  else:
    return midval
return None 
```

此代码改编自此处：[https ://stackoverflow.com/a/212413/215608](https://stackoverflow.com/a/212413/215608)

事情是这样的，上面的过程假设一个完全匹配或根本没有结果。如果查询只是针对“彼得”，但有几个姓氏不同的彼得怎么办？为了归还所有的 Peters，必须确保被平分的“箱子”永远不会变得如此之小，以至于除了符合条件的结果。为了返回所有的彼得，二分过程必须停止并让与正则表达式/常规旧字符串匹配之类的东西。

我不是在问如何实现这一点，而是*这种类型的搜索被称为*......什么是带有“bin size”分隔标准的二分搜索？有条件地平分数据集的东西，一旦满足条件，就会回退到其他形式的字符串匹配，以确保查询中可以有效地有一个结束通配符（因此搜索“彼得”将得到“彼得杰克逊”和“彼得爱德华兹”）

希望我已经清楚我的意思。我意识到在典型的数据库场景中，名称可能是分开的，这只是作为概念证明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:15:08.243

这种两段式搜索我以前没有遇到过，所以不知道它是否有一个众所周知的名字。但是，我可以提出一种方法来执行它。

假设您已经运行了第一阶段并且没有找到匹配项。

您可以使用一对二分搜索和一个特殊的比较器来执行第二阶段。[`bisect_left`二进制搜索将使用与和`bisect_right`](http://docs.python.org/2/library/bisect.html)相同的原理。您将无法直接使用这些函数，因为您需要一个特殊的比较器，但您可以将它们用作实现的基础。

现在到比较器。在将列表元素`x`与搜索键`k`进行比较时，比较器将只使用`x[:len(k)]`并忽略其余的`x`. 因此，在搜索“Peter”时，列表中的所有 Peter 都会比较等于键。因此，`bisect_left()`to`bisect_right()`将为您提供包含列表中所有 Peters 的范围。

所有这些都可以通过`O(log n)`比较来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:14:56.647

在您的二分搜索中，您要么找到完全匹配，要么找到匹配所在的区域。因此，在您的情况下，您需要获取包含和返回所有中间字符串 的区域
的上限和下限（`hi` `lo`如您所说） 。`Peter`

但是，如果您的目标是显示单词的下一个单词，则应该查看 Tries 而不是 BST

# image - XP中TIF文件的背景颜色问题

> ID：13921273
> 
> 赞同：1
> 
> 时间：2012-12-17T19:59:57.817
> 
> 标签：image, windows-7, background, windows-xp

我在 XP 和 Windows 7 上的图像文件存在问题，但它在 Windows 2008 框中完美运行。谈到实际问题，问题中的 TIF 图像是带有白色背景的发票表单图像，带有发票详细信息。当我在 2008 年打开它时，它以白色背景打开，但是当我在 XP 和 Windows 2008 中打开它时，它变成带有白色文本的黑色背景。我正在就这个问题寻求一些帮助。1\. 是否是操作系统问题 2\. 如果是操作系统问题，我如何使用任何代码（最好是 C#）将背景颜色更改为白色，因为我使用 C# 进行开发。

提前致谢

萨蒂什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:23:31.340

简单地我们可以交换调色板然后问题将由此解决......

```
 Dim plet As ColorPalette = Image.Palette
         plet.Entries(1) = c1
         plet.Entries(0) = c2
         Image.Palette = plet 
```

但对识别有问题的图像感到震惊，即因为我们必须将其应用于仅存在问题的图像。否则正确的图像也会倒置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T00:26:13.240

可能是 CMYK 或透明度问题，或者它以 16 位颜色格式（每个组件）保存。

但是，如果不访问一个实际文件进行分析，这很难确定。

更新：

问题 1：对于 TIFF 文件 - 在 Windows XP 上，Photometric 标签被 Windows 照片查看器及其基础技术忽略，TIFF 文件使用单个位平面（2 种颜色）。这是一个错误。

解决方案 1a：手动输入（切换到现有）调色板条目以强制位 0（关闭）黑色和位 1（打开）白色。

解决方案 1b：将文件另存为 RGB 文件/灰度会更理想，但在 GDI+ 中对 8 位灰度文件 IMO 没有很好的支持）。

问题 2：字节顺序。在 Windows XP 上，字节顺序 (big-endian) 可能会导致问题。通常，TIFF 以 Motorola big-endian 格式 (MSB) 保存，但在 Windows XP 上，TIFF 文件假定为 little-endian 格式。

解决方案 2a：以 little-endian 顺序 (Intel) 为新文件保存新的 TIFF 文件

解决方案 2b：如果重新保存（重新扫描）不是现有文件的选项，则重新排序现有文件的内容，将字节顺序从 LSF（英特尔）切换到 MSF（摩托罗拉）。更新标头以指示新的字节顺序（将 II 替换为 MM 等）。

# java - HSQLDB 和 .lobs 文件大小

> ID：13921277
> 
> 赞同：5
> 
> 时间：2012-12-17T20:00:08.430
> 
> 标签：java, size, blob, hsqldb

我在 Java 中使用 HSQLDB 数据库，它将文件存储在定义为 BLOB 的列中。

当我将带有文件/BLOB 的表行添加到我的表中时，.lobs 文件会增加文件/BLOB 的大小。当我将另一个文件添加到我的表中时，它的大小再次增加（2 x BLOB 大小）。

所以，我实现了一个测试方法，它迭代 10 次并将同一个文件写入我的表并在插入后立即将其删除。

现在，我的 .lobs 文件是 10 x 文件大小......即使我已经删除了包含该文件的所有表行。

我试图执行 CHECKPOINT DEFRAG 但没有任何反应。.lobs 文件保持相同的文件大小。

这让我很担心，因为我正在创建的 webapp 将向我的数据库写入大量文件，即使带有文件 (BLOB) 的表行将在一段时间后被删除，.lobs 文件将始终增加或保持不变大小并最终吃掉我所有的磁盘空间。

我是否缺少某些设置，或者这是 HSQLDB 和 BLOB 的预期行为？

非常感谢！

亲切的问候，安德烈亚斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:08:43.640

这个是正常的。

记录所有删除的 lob 空间。在 CHECKPOINT 之后，如果您插入新的 l​​ob，则会重复使用这些空间。

在生产数据库中，插入和删除的循环不断重复。在日志运行中，.lobs 文件大小不会超过数据库中 lobs 的实际大小非常大的量。

更新：

.lobs 文件增长到检查点的原因是为了在系统崩溃的情况下允许数据恢复。

HSQLDB 2.3.0 及更高版本在删除 lob 后，如果文件末尾有空白空间，则会在 CHECKPOINT 截断 .lobs 文件。

# php - 无法在 XAMPP Windows 上安装 MongoDB PHP 驱动程序

> ID：13921281
> 
> 赞同：2
> 
> 时间：2012-12-17T20:00:12.457
> 
> 标签：php, mongodb, xampp, mongodb-php

我正在使用 Windows 操作系统（64 位）并运行 XAMPP（PHP 5.4.7）。我尝试安装 PHP MongoDB 驱动程序，但它没有反映在 phpinfo() 页面上。

我遵循了列出的相同步骤：

1.  [我从https://github.com/mongodb/mongo-php-driver/downloads](https://github.com/mongodb/mongo-php-driver/downloads)下载了 php_mongo-1.3.2RC1.zip（最新的）
2.  我提取了文件夹并复制了`php_mongo-1.3.1-5.4-vc9.dll`文件并粘贴到`C://XAMPP/php/ext/`. 我的 PHP 扩展构建说 API20100525,TS,VC9
3.  我打开了 php.ini 文件并`;extension=php_mongo-1.3.1-5.4-vc9.dll`在最后一行插入。

然后我查看了`phpinfo()`页面并尝试了

```
echo extension_loaded("mongo") ? "loaded\n" : "not loaded\n"; 
```

它说它没有加载。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T20:03:52.510

尝试删除**;** 从`;extension=php_mongo-1.3.1-5.4-vc9.dll`你的 php.ini开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-03T10:48:17.313

完成问题中提到的所有步骤后，xampp 可能无法加载“.dll”文件。只需确保将“.dll”文件文件夹的路径作为系统变量路径添加到环境变量中即可。

我遇到了同样的问题，然后将“.dll”文件文件夹的路径添加到环境变量作为系统变量路径后，它就起作用了。然后它能够​​找到该文件。

最后，这是停止 xampp 加载“.dll”文件的唯一步骤，尽管它存在于该文件夹中。人们经常错过这一步，因为它没有明确指出。

# c# - 两点/坐标之间的矢量角度是多少

> ID：13921282
> 
> 赞同：0
> 
> 时间：2012-12-17T20:00:15.013
> 
> 标签：c#, math, angle

有谁知道当 0 度参考上升时（12 点钟）如何获得两点之间的角度？我为此使用了两组 (x,y) 点`atan2()`，但它在 3 点钟返回 0 度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T20:03:32.537

Atan2() 从正 X 轴返回逆时针角度。

如果您想要从正 Y 轴的顺时针角度，您可以从 90 度中减去该角度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T20:41:27.977

你知道你的点的水平和垂直位置吗？

如果是这样，我将它们命名为 (X1, Y1) 和 (X2, Y2) （X 是水平的，Y 是垂直的）

您可以计算点 #2 相对于 #1 位置的位置： X = X2 - X1 Y = Y2 - Y1 您可以使用 atan( X / Y ) 来获得所需的角度。

您还想检查 Y == 0，因为您将无法执行 X / Y。如果 Y == 0，那么您的线是水平的。

PS：说两点的角度，挺奇怪的。

# android - Android bootstrap：需要将 authToken 传递给我的请求接受标头

> ID：13921283
> 
> 赞同：1
> 
> 时间：2012-12-17T20:00:20.340
> 
> 标签：android, rest, authentication

好吧，我一直在努力理解这个“模板”[项目](https://github.com/donnfelker/android-bootstrap)的身份验证过程，只是不明白。

我正在尝试做的是基本登录，所以我可以获得我的授权令牌，我之前已经通过使用 SharedPreference（从未实际使用过 AccountManager）并从我的 rest android 客户端（通过自定义 SessionManager）访问它来完成它。

到目前为止，我已经完成了第一部分。我能够获得我的授权令牌。

**BoostrapAuthenticatorActivity.java：**

```
 /**
     * Called when response is received from the server for authentication
     * request. See onAuthenticationResult(). Sets the
     * AccountAuthenticatorResult which is sent back to the caller. Also sets
     * the authToken in AccountManager for this account.
     */

    protected void finishLogin() {
        final Account account = new Account(email, Constants.Auth.LZGO_ACCOUNT_TYPE);

        if (requestNewAccount)
            accountManager.addAccountExplicitly(account, password, null);
        else
            accountManager.setPassword(account, password);
        final Intent intent = new Intent();
        authToken = token;
        userToken = user;
        intent.putExtra(KEY_ACCOUNT_NAME, userToken);
        intent.putExtra(KEY_ACCOUNT_TYPE, Constants.Auth.LZGO_ACCOUNT_TYPE);
        if (authTokenType != null
                && authTokenType.equals(Constants.Auth.AUTHTOKEN_TYPE))
            intent.putExtra(KEY_AUTHTOKEN, authToken);
        setAccountAuthenticatorResult(intent.getExtras());
        setResult(RESULT_OK, intent);
        finish();
    } 
```

我如何访问这个值？如果你检查这个类，

**BootstrapServiceProvider.java：**

```
@Inject private ApiKeyProvider keyProvider;
@Inject private UserAgentProvider userAgentProvider;

/**
 * Get service for configured key provider
 * <p>
 * This method gets an auth key and so it blocks and shouldn't be called on the main thread.
 *
 * @return bootstrap service
 * @throws IOException
 * @throws AccountsException
 */
public BootstrapService getService() throws IOException, AccountsException {
    return new BootstrapService(keyProvider.getAuthKey(), userAgentProvider);
} 
```

最后，提供者：

**ApiKeyProvider.java：**

```
@Inject private Activity activity;
@Inject private AccountManager accountManager;

/**
 * This call blocks, so shouldn't be called on the UI thread
 *
 * @return API key to be used for authorization with a {@link com.android.lzgo.core.LzgoService} instance
 * @throws AccountsException
 * @throws IOException
 */
public String getAuthKey() throws AccountsException, IOException {
    AccountManagerFuture<Bundle> accountManagerFuture = accountManager.getAuthTokenByFeatures(Constants.Auth.BOOTSTRAP_ACCOUNT_TYPE,
            Constants.Auth.AUTHTOKEN_TYPE, new String[0], activity, null, null, null, null);
    Log.d("ApiKeyProvider", "ApiKeyProvider= " + accountManagerFuture.getResult().getString(KEY_AUTHTOKEN));
    return accountManagerFuture.getResult().getString(KEY_AUTHTOKEN);
} 
```

但这给我一个空值！我迷路了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:40:59.047

我不确定为什么 authtoken 没有被正确应用`setAccountAuthenticatorResult(...)`，但是我很幸运通过添加以下`accountManager.setAuthToken(...)`调用`finishLogin()`

```
if (authTokenType != null
            && authTokenType.equals(Constants.Auth.AUTHTOKEN_TYPE)) {
        intent.putExtra(KEY_AUTHTOKEN, authToken);
        accountManager.setAuthToken(account, authTokenType, authToken);
} 
```

也许这与不使用 Parse.com 作为我们的后端有关？

# php - 谷歌可视化（图表工具）API

> ID：13921288
> 
> 赞同：1
> 
> 时间：2012-12-17T20:00:46.320
> 
> 标签：php, javascript, google-visualization

尝试按照此处的详细信息为 Google 图表制作动画：[https ://developers.google.com/chart/interactive/docs/animation](https://developers.google.com/chart/interactive/docs/animation)

不太确定我在下面的示例中缺少什么？还希望添加 onclick 事件。

是的，我在正文中有 id = chart_div 的 div。

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load('visualization', '1', {packages: ['corechart']});
</script>
<script type="text/javascript">

 // Some raw data (not necessarily accurate)
var rowData1 = [['Month', 'Bolivia', 'Ecuador', 'Madagascar', 'Papua  Guinea',
                 'Rwanda', 'Average'],
                ['2004/05', 165, 938, 522, 998, 450, 114.6],
                ['2005/06', 135, 1120, 599, 1268, 288, 382],
                ['2006/07', 157, 1167, 587, 807, 397, 623],
                ['2007/08', 139, 1110, 615, 968, 215, 409.4],
                ['2008/09', 136, 691, 629, 1026, 366, 569.6]];
var rowData2 = [['Month', 'Bolivia', 'Ecuador', 'Madagascar', 'Papua  Guinea',
                 'Rwanda', 'Average'],
                ['2004/05', 122, 638, 722, 998, 450, 614.6],
                ['2005/06', 100, 1120, 899, 1268, 288, 682],
                ['2006/07', 183, 167, 487, 207, 397, 623],
                ['2007/08', 200, 510, 315, 1068, 215, 609.4],
                ['2008/09', 123, 491, 829, 826, 366, 569.6]];

// Create and populate the data tables.
var data = [];
data[0] = google.visualization.arrayToDataTable(rowData1);
data[1] = google.visualization.arrayToDataTable(rowData2);

var options = {
  width: 400,
  height: 240,
  vAxis: {title: "Cups"},
  hAxis: {title: "Month"},
  seriesType: "bars",
  series: {5: {type: "line"}},
  animation:{
    duration: 1000,
    easing: 'out'
  },
};
var current = 0;
// Create and draw the visualization.
var chart = new google.visualization.ComboChart(document.getElementById('chart_div'));
var button = document.getElementById('b1');
function drawChart() {
  // Disabling the button while the chart is drawing.
  button.disabled = true;
  google.visualization.events.addListener(chart, 'ready',
      function() {
        button.disabled = false;
        button.value = 'Switch to ' + (current ? 'Tea' : 'Coffee');
      });
  options['title'] = 'Monthly ' + (current ? 'Coffee' : 'Tea') + ' Production by Country';

  chart.draw(data[current], options);
}
drawChart();

button.onclick = function() {
  current = 1 - current;
  drawChart();
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:04:36.673

我猜你忘记了 jQuery。另外，你有这个：

```
var chart = new google.visualization.ComboChart(document.getElementById('chart_div'));
var button = document.getElementById('b1'); 
```

因此，您的 HTML 绝对需要如下所示。是吗？

```
<form><input id="b1" type="button" value="Change Value"></form>
<div id="chart_div" style="position: relative;"></div> 
```

在这里你有完整的脚本：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script id="jqueryui" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.10/jquery-ui.min.js" defer="" async=""></script>
<script src="https://www.google.com/jsapi"></script>
<script type="text/javascript"> 
google.load('visualization', '1.1', {packages: ['corechart']});

google.setOnLoadCallback(drawExample);

function drawExample() {
  // Some raw data (not necessarily accurate)
  var rowData1 = [['Month', 'Bolivia', 'Ecuador', 'Madagascar', 'Papua  Guinea',
                   'Rwanda', 'Average'],
                  ['2004/05', 165, 938, 522, 998, 450, 114.6],
                  ['2005/06', 135, 1120, 599, 1268, 288, 382],
                  ['2006/07', 157, 1167, 587, 807, 397, 623],
                  ['2007/08', 139, 1110, 615, 968, 215, 409.4],
                  ['2008/09', 136, 691, 629, 1026, 366, 569.6]];
  var rowData2 = [['Month', 'Bolivia', 'Ecuador', 'Madagascar', 'Papua  Guinea',
                   'Rwanda', 'Average'],
                  ['2004/05', 122, 638, 722, 998, 450, 614.6],
                  ['2005/06', 100, 1120, 899, 1268, 288, 682],
                  ['2006/07', 183, 167, 487, 207, 397, 623],
                  ['2007/08', 200, 510, 315, 1068, 215, 609.4],
                  ['2008/09', 123, 491, 829, 826, 366, 569.6]];

  // Create and populate the data tables.
  var data = [];
  data[0] = google.visualization.arrayToDataTable(rowData1);
  data[1] = google.visualization.arrayToDataTable(rowData2);

  var options = {
    width: 400,
    height: 240,
    vAxis: {title: "Cups"},
    hAxis: {title: "Month"},
    seriesType: "bars",
    series: {5: {type: "line"}},
    animation:{
      duration: 1000,
      easing: 'out'
    }
  };
  var current = 0;
  // Create and draw the visualization.
  var chart = new google.visualization.ComboChart(document.getElementById('example-visualization'));
  var button = document.getElementById('example');
  function drawChart() {
     // Disabling the button while the chart is drawing.
    button.disabled = true;
    google.visualization.events.addListener(chart, 'ready',
        function() {
          button.disabled = false;
          button.value = 'Switch to ' + (current ? 'Tea' : 'Coffee');
        });
    options['title'] = 'Monthly ' + (current ? 'Coffee' : 'Tea') + ' Production by Country';

    chart.draw(data[current], options);
  }
  drawChart();

  button.onclick = function() {
    current = 1 - current;
    drawChart();
  }
}
</script>

<form><input id="example" type="button" value="Change Value"></form>
<div id="example-visualization" style="position: relative;"></div> 
```

# c# - 将datagridview行拖放到自身上

> ID：13921289
> 
> 赞同：0
> 
> 时间：2012-12-17T20:00:52.230
> 
> 标签：c#, winforms, datagridview

我最近试图找到一些代码来将一行从一个数据网格视图拖放到 WinForms 应用程序中的另一个数据网格视图。我最终找到了有效的代码，但有一个小问题。当我在*dataGridView2*中选择一行拖动到*dataGridView1*时，如果我不小心并且马虎，我不小心将该行拖到*dataGridView2*的另一行中。它就像它只是消失在*dataGridView2*的另一行中。有没有办法检测到如果被拖动的行不在*dataGridView1*中，则不允许将其丢弃？

```
 dataGridView2.MouseMove += new MouseEventHandler(dataGridView2_MouseMove);
 dataGridView1.DragEnter += new DragEventHandler(dataGridView1_DragEnter);
 dataGridView1.DragDrop += new DragEventHandler(dataGridView1_DragDrop);

 void dataGridView1_DragDrop(object sender, DragEventArgs e)
    {
        DataGridViewRow row = e.Data.GetData(typeof(DataGridViewRow)) as DataGridViewRow;
        if (row != null)
        {
            DataGridViewRow newrow = row.Clone() as DataGridViewRow;
            for (int i = 0; i < newrow.Cells.Count; i++)
            {
                newrow.Cells[i].Value = row.Cells[i].Value;
            }

            this.dataGridView1.Rows.Add(newrow);

        }
    }

    void dataGridView1_DragEnter(object sender, DragEventArgs e)
    {
        if (e.Data.GetDataPresent(typeof(DataGridViewRow)))
        {
            e.Effect = DragDropEffects.Copy;
        }
    }

    void dataGridView2_MouseMove(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
        {
            this.dataGridView2.DoDragDrop(this.dataGridView2.CurrentRow, DragDropEffects.All);
            this.dataGridView2.Rows.Remove(this.dataGridView2.CurrentRow);
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T13:50:41.350

将 datagridview2 的 AllowDrop 属性设置为 false。

# extjs - Sencha touch 2：获取 XMLHttpRequest 无法加载文件：Access-Control-Allow-Origin 不允许 data.json.Origin null

> ID：13921295
> 
> 赞同：1
> 
> 时间：2012-12-17T20:01:21.607
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我正在尝试从托管在本地服务器上的 json 文件中加载一些数据，但是`XMLHttpRequest cannot load http://localhost:8080/data.json?_dc=1355779280677&page=1&start=0&limit=25\. Origin null is not allowed by Access-Control-Allow-Origin. "`一旦应用程序加载，我就会收到错误消息。我的列表中没有填充记录。

我的代码如下。

```
Ext.define('POC.view.HomePage', {
    extend: 'Ext.TabPanel',
    requires:['Ext.TitleBar','Ext.dataview.List',
    'Ext.Ajax','Ext.data.proxy.Ajax'],
    xtype:'homePage', 
    alias: 'widget.wuHomePageView',

     config: {
     fullscreen: true,
        items: [
        {
          title: 'Home',
          iconCls: 'home',

          items: [

       {
    xtype: 'list',
        title: 'Sample',
        height: '100%',
        onItemDisclosure: true,

        store: {
        autoLoad: true,
        fields: ['name'],
            proxy: {
           type: 'json',
           url: 'http://localhost:8080/data.json',
            reader: {
               type: 'ajax',
               rootProperty: 'stores'
                }
                }
                },
             itemTpl: '{name}',

                }],

                },
            {
            title: 'Contact',
            iconCls: 'user',
            html: 'Contact Screen'
                }
            ]
            },

}); 
```

我的 Json 文件如下。

```
{
    "stores": [
        {
            "name": "Science Gallery",
            "logo": "sciencegallery.jpg",
            "desc": "Get some food",
            "telephone": "016261234",
            "city": "Dublin",
            "add1": "Pearse Street",
            "post": "2",
            "country": "Ireland",
            "latitude": "53.34422",
            "longitude": "-6.25006",
            "menu": [
                {
                    "item": "SC Sandwich"
                },
                {
                    "item": "SC Toasted Sandwich"
                },
                {
                    "item": "SC Panini"
                },
                {
                    "item": "SC Ciabatta"
                },
                {
                    "item": "SC Burrito"
                }
            ]
        },
        {
            "name": "Spar",
            "logo": "spar.jpg",
            "desc": "Get some food",
            "telephone": "016261234",
            "city": "Dublin",
            "add1": "Mayor Street",
            "post": "2",
            "country": "Ireland",
            "latitude": "53.34422",
            "longitude": "-6.25006",
            "menu": [
                {
                    "item": "Spar Sandwich"
                },
                {
                    "item": "Spar Toasted Sandwich"
                },
                {
                    "item": "Spar Panini"
                },
                {
                    "item": "Spar Ciabatta"
                },
                {
                    "item": "Spar Burrito"
                }
            ]
        }
    ]
} 
```

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:56:39.497

没有像json代理这样的东西！您必须使用 ajax 代理：

```
proxy: {
   type: 'ajax',
   .....
} 
```

# web-services - cURL 将 XML 发送到 Web 服务。需要不同的编码

> ID：13921299
> 
> 赞同：0
> 
> 时间：2012-12-17T20:01:45.170
> 
> 标签：web-services, soap, curl

有什么方法可以设置 cURL 以使用`&lt;`and`&lt;`而不是`<`and发送此 XML`>`

```
 $xml_data = '
    <Shipping_Address>
    <Province>BC</Province>
    <Country>Canada</Country>
    <PostalCode>V6P 5T2</PostalCode>
    <Phone>604-561-7977</Phone>
    </Shipping_Address>';

$ch = curl_init($URL);
curl_setopt($ch, CURLOPT_MUTE, 1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml','charset=ISO-8859-1'));
curl_setopt($ch, CURLOPT_POSTFIELDS, "$xml_data");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$output = curl_exec($ch);
curl_close($ch);
var_dump($output); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:09:28.477

如果 web 服务需要 XML，这似乎很奇怪。但如果是，你应该可以通过调用来做到这一点`htmlentities()`：

```
$xml_data = htmlentities('
    <Shipping_Address>
    <Province>BC</Province>
    <Country>Canada</Country>
    <PostalCode>V6P 5T2</PostalCode>
    <Phone>604-561-7977</Phone>
    </Shipping_Address>'); 
```

# c++ - 构造单位矩阵

> ID：13921301
> 
> 赞同：0
> 
> 时间：2012-12-17T20:01:53.453
> 
> 标签：c++, algorithm

我试图解决一个算法问题，我是新手，我正在尝试大量练习编程问题。所以我想构造一个单位矩阵 n*n。我想出了一个愚蠢的解决方案，它适用于 4*4 矩阵，但不适用于 5*5。我知道它奇怪的解决方案，当我看到它时，问题的解决方案真的很容易。我需要知道我做错了什么以便我可以学习，我的解决方案真的很愚蠢，在解决这些问题之后我会变得更好吗？

```
#include <iostream>
#include <vector>
#include <sstream>
#include <iomanip>  // for setw, setfill

using namespace std;

int binary(int number);

int main()
{

    vector<vector<int> > matrix;

    cout<<"Please enter the size of the identity matrix"<<endl;
    int n;
    cin>>n;

    matrix.resize(n);
    for (int i=0; i<n;i++)
    {

        matrix[i].resize(n);
    }

    int steps = 1<<n-1;

    int bin  = binary(steps);
    ostringstream binString;

    binString <<bin;
    if(binString.str().size()<n)
    {
        std::string dest = binString.str();
        int nPaddings = n-binString.str().size();
        if (nPaddings==0) nPaddings=1;
        dest = std::string( nPaddings, '0').append( binString.str());
        binString.str("");
        binString<<dest;
    }
    for (int col = 0; col<n; col++)
    {
        if(col>=1)
        {
            steps= (int)steps/2;
            int bin = binary(steps);
            binString.str("");
            binString << bin;
            if(binString.str().size()<n)
            {
                std::string dest = binString.str();
                int nPaddings = n-steps;
                if (nPaddings==0) nPaddings=1;
                dest = std::string( nPaddings, '0').append( binString.str());
                binString.str("");
                binString<<dest;
            }
        }
        for (int row=0; row<n; row++)
        {
            matrix[col][row] =binString.str().at(row)-'0';
        }
    }

    return 0;
}

int binary(int number) {
    long rem,i=1,sum=0;
    do
    {
        rem=number%2;
        sum=sum + (i*rem);
        number=number/2;
        i=i*10;
    }while(number>0);

    return sum;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:09:54.480

有一种更简单的方法可以做到这一点。

首先，您应该分配具有指定大小的矩阵。那么，你知道只有对角线是`1`s：

```
vector<vector<int> > matrix;
int n;

cout << "Please enter the size of the identity matrix" << endl;
cin >> n;

// Initialize the matrix as a n x n array of 0.
matrix = vector<vector<int> >(n, vector<int>(n,0));

// Set the diagonal to be 1s
for(unsigned int t = 0; t < n; t++)
    matrix[t][t] = 1; 
```

[你可以在这里](http://ideone.com/T82CmE)看到一个活生生的例子。

## 编辑：

您的错误来自这一行：

```
int nPaddings = n-steps; 
```

实际上，您没有使用 的大小`dest`来计算填充，这是不正确的。[看到这里](http://ideone.com/X0A8k0)，我添加了一些调试 printfs 来查看变量的状态。您可以看到`nPaddings == -3`，因此出现错误。

你的想法：

```
for each column
    get the representation of the column as a string
    set the i-th value of the column as the i-th character of the string 
```

因此，这是一个使用您的想法的更简单的程序。将代码分成几个函数有很大帮助。此外，`std::ostringstream`这里`std::string`只是纯粹的矫枉过正。

```
#include <iostream>
#include <vector>
#include <iomanip>  // for setw, setfill

using namespace std;
std::string binStr(unsigned int exponent, unsigned int size);

int main()
{

    vector<vector<int> > matrix;

    cout<<"Please enter the size of the identity matrix"<<endl;
    int n;
    cin>>n;

// Initialize the matrix
    matrix.resize(n);
    for (int i=0; i<n;i++)
        matrix[i].resize(n);

// Fill the matrix
    for (int col = 0; col<n; col++)
    {
        std::string bin = binStr(n-col,n);
        for (int row=0; row<n; row++)
            matrix[col][row] = bin[row]-'0';
    }

// Print the matrix and return
    for(unsigned int y = 0; y < n; y++)
    {
        for(unsigned int x = 0; x < n; x++)
            cout << "\t" << matrix[y][x];
        cout << "\n";
    }
    return 0;
}

std::string binStr(unsigned int exponent, unsigned int size)
{
    // You do not need a string stream (which is like using a bazooka to kill a fly...)
    // Instead, just create a string of the required length
    // 'str' will contain the binary representation of 2^exponent
    std::string str(size,'0');
    if(exponent <= size && exponent > 0)
        str[size - exponent] = '1';
    return str;
} 
```

[您可以在这里](http://ideone.com/bNe1xN)看到它的实际效果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T20:23:05.963

```
#include <iostream>
#include <vector>
using namespace std;

vector<vector<int> > make_idty_matrix( int n )
{
    vector<vector<int> > idty( n, vector<int>( n, 0 ));
    for( int i = 0; i < n; ++i )
        idty[i][i] = 1;
    return idty;
}

int main()
{
    vector<vector<int> > matrix = make_idty_matrix( 5 );

    // your code here
    // ...

    return 0;
} 
```

# selenium - 确定弹出/新窗口类型，以便我可以在 selenium webdriver 中与之交互

> ID：13921309
> 
> 赞同：0
> 
> 时间：2012-12-17T20:02:26.723
> 
> 标签：selenium, junit, selenium-webdriver, popupwindow

这可能是一个菜鸟问题，但我不知道如何确定我正在与之交互的弹出窗口类型，因此我可以获得足够的信息来使用 selenium webdriver 自动化它。

我以为它只是一个弹出窗口，但是当使用（似乎是）处理弹出窗口的标准方法时，我的 Selenium JUnit 测试会冻结单击按钮的实例。

```
 String mainWindowHandle = driver.getWindowHandle();

    //P2: Click on the element that opens the popup
    driver.findElement(By.xpath("//a[contains(text(),'Login')]")).click();

    Set s=driver.getWindowHandles();

    Iterator ite=s.iterator();
    while(ite.hasNext()){
        System.out.println("Current ite = " + ite.next().toString());
        String popupHandle=ite.next().toString();
        if(!popupHandle.contains(mainWindowHandle)){
            driver.switchTo().window(popupHandle);
            System.out.println("reached popup window? Now perform the login procedure before returning to the original window");
            driver.switchTo().window(mainWindowHandle);
        }
    } 
```

此代码[在此处进行了描述，](https://stackoverflow.com/questions/9188343/how-can-selenium-web-driver-get-to-know-when-the-new-window-has-opened-and-then)并且是公认的答案。我还看到了此代码的许多其他类似示例，但是在我的应用程序中，硒测试在线挂起

```
driver.findElement(By.xpath("//a[contains(text(),'Login')]")).click(); 
```

它只是在等待我输入登录信息，直到我手动输入登录信息，测试才会挂起。如果我确实输入了信息，测试将继续。我想让这段代码找到弹出窗口的句柄（并最终）用用户名填充它并传递并单击“确定”。虽然有可能我不是在处理传统的弹出窗口吗？我怎么知道？

此登录按钮是 html 中的以下元素`<a href="/trac/login">Login</a>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:35:40.807

我在使用 selenium RC 时遇到了同样的问题。我使用了如下所示的 try catch 块，它帮助我解决了问题。希望它会有用。

//webdriver代码直到点击弹出链接

```
try {
      selenium.waitForPopUp("myWindow","3000");
        }

    catch(Exception e){
        selenium.selectPopUp("myWindow");
        selenium.windowFocus(); 
```

//需要在弹窗上执行的活动***

//将焦点返回到主窗口的代码

```
 String[] winFocus; 
 String winTitle;
 winFocus = selenium.getAllWindowTitles();
 winTitle = winFocus[0];
 selenium.selectWindow(winTitle); 
```

}

# android - SQLite 数据库。在列表视图中存储信息

> ID：13921313
> 
> 赞同：0
> 
> 时间：2012-12-17T20:02:46.553
> 
> 标签：android, android-sqlite

所以我一直在通过这个网站搜索我正在寻找的答案，但我找不到它。关于 SQLite 数据库的 YouTube 上有很多很好的教程，但没有一个能真正做到我想要的。

我正在制作一个游戏，在游戏中我希望玩家能够选择他们想要购买的物品（从商店），当他们购买该物品时，它将被保存到数据库中。然后，当他们进入他们的库存或商店内的“出售”屏幕时，列表视图将显示他们的库存中的内容。

我已经完全建立了商店。即 - 他们可以购买的物品，当他们选择一个物品时，会弹出一个对话框并询问他们是否要购买它，如果是，它将减去他们拥有的黄金并将该物品添加到数据库中。

^ 唯一不工作的部分是将项目添加到数据库的部分。

这是一些代码：

```
String[] MeleeArmour = new String[] {

    "--- Melee Armour ---",

    "(100G) Bronze Helmet", "(250G) Bronze Chestplate",
            "(125G) Bronze Leggings", "(100G) Bronze Boots" //etc.... 
```

--

```
MeleeArmourList.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            switch (position) {
            case 1:
                // (100G) Bronze Helmet

                AlertDialog.Builder dlgAlert = new AlertDialog.Builder(
                        Shop.this);
                dlgAlert.setMessage("Purchase Bronze Helmet?");
                dlgAlert.setTitle("Shop");
                dlgAlert.setPositiveButton("Buy",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                if (Integer.parseInt(textViewShopGoldValue1
                                        .getText().toString()) >= 100) {
                                    int gold1 = Integer
                                            .parseInt(textViewShopGoldValue1
                                                    .getText().toString()) - 100;
                                    textViewShopGoldValue1.setText(""
                                            + gold1);
                                    Toast msg = Toast.makeText(Shop.this,
                                            "Bronze Helmet added to inventory",
                                            Toast.LENGTH_SHORT);
                                    msg.show();

                                 //this is where I need to add the item to a database

                                } else {
                                    Toast msg = Toast.makeText(Shop.this,
                                            "You don't have enough gold!",
                                            Toast.LENGTH_SHORT);
                                    msg.show();
                                }
                                dialog.dismiss();
                            }
                        });
                dlgAlert.setNeutralButton("View info",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int which) {

                                dialog.dismiss();
                            }
                        });
                dlgAlert.setNegativeButton("Cancel",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int which) {

                                dialog.dismiss();
                            }
                        });
                dlgAlert.setCancelable(false);
                dlgAlert.create().show();

                break; 
```

有人有想法么？我将如何设置数据库以使用我想要的。或者有什么不同的方法可以做吗？我尝试在其中执行“putExtra”方法并保存数据，但是在玩家购买物品后，我必须将它们发送到库存屏幕，这很烦人，人们不会喜欢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:03:05.110

这涉及到一些数据库设计和应用程序设计。

您应该有一个表来存储可以购买的物品。如果你有它，那么很容易显示可供购买的物品及其成本，并且你可以通过各种方式将数据库与你的应用程序一起分发。

接下来，您需要一个表来存储用户购买的商品。

现在，要购买商品，用户会前往购买活动。您检查用户的余额，查询项目表以获取用户可以购买的项目，并将其显示在列表视图中。用户单击一个项目，您从用户的余额中扣除成本，并将该项目存储在用户的库存视图中。

不需要“确认”。相反，有一个“撤消”或“删除”选项。

# struts2 - jsp中struts2 taglib对象访问

> ID：13921315
> 
> 赞同：0
> 
> 时间：2012-12-17T20:02:48.893
> 
> 标签：struts2, action, taglib

嗨，我创建了一个包含一个文档对象的动作。我想在 jsp 中显示这些属性。我曾经使用 struts 标签，但我无法获得它，我能够获得 action 的字符串属性，但不是 Object，您能帮帮我吗……请参阅下面的代码。我全力支持。我无法修复它。我正在使用 tomcat7 。

```
 public class SearchResultAction extends ActionSupport{
private static Logger log = Logger.getLogger(SearchResultAction.class);
private String name;

private DocumentData documentData;

 public String execute() throws Exception {

   documentData=new DocumentData();

   documentData.setdocName("docName");
   documentData.setdDocTitle("docTitle");

   if (documentData!=null)

      {
         return SUCCESS;
      }else{
         return ERROR;  
      }
     }

public String getName() {
  return name;
}

public void setName(String name) {
  this.name = name;
}

public DocumentData getDocumentData() {
    return documentData;
}

public void setDocumentData(DocumentData documentData) {
    this.documentData = documentData;
}
 } 
```

我的jsp代码是：

```
<s:property value="documentData.docName" default="object is null"/> 
```

我的 pojo 课程是：

```
 public class DocumentData {
String docName;
String dDocTitle;
String dDocDate;
String dDocAuther; 
```

// 所有属性的 setter 和 getter }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:11:39.420

您的`docName`setter 不遵循 JavaBean 约定；你的吸气剂吗？

例如，`setdocName`应该是`setDocName`，吸气剂`getDocName`。

OGNL 将调用`getDocName()`，如果该方法不存在，您将无法获取数据。

# python - 使用 ConfigParser 处理重复键

> ID：13921323
> 
> 赞同：4
> 
> 时间：2012-12-17T20:03:22.620
> 
> 标签：python, python-3.x, configparser

> **可能重复：**
> [Python Config Parser（重复密钥支持）](https://stackoverflow.com/questions/5396144/python-config-parser-duplicate-key-support)

我正在尝试在 Python 中读取 INI 格式的项目文件。该文件在一个部分中包含重复的键（具有唯一值）。例如，其中一个部分如下所示：

```
[Source Files]
Source="file1.c"
Source="file2.c"
Source="file3.c" 
```

如果我使用以下代码阅读此内容

```
config = configparser.ConfigParser( strict=False )
config.read( "project/file/name" )
print( config.get( "Source Files", "Source" ) ) 
```

结果是

```
"file3.c" 
```

有没有办法获取键的所有值的列表`Source`？我愿意使用其他方法来解析文件。

请注意，我无法更改文件格式。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T00:30:56.000

我最终从`RawConfigParser`该类继承来实现此功能。如果其他人对此感兴趣，这是我正在使用的代码：

```
import configparser

class ConfigParserMultiOpt(configparser.RawConfigParser):
  """ConfigParser allowing duplicate keys. Values are stored in a list"""

  def __init__(self):
    configparser.RawConfigParser.__init__(self, empty_lines_in_values=False, strict=False)

  def _read(self, fp, fpname):
    """Parse a sectioned configuration file.

    Each section in a configuration file contains a header, indicated by
    a name in square brackets (`[]'), plus key/value options, indicated by
    `name' and `value' delimited with a specific substring (`=' or `:' by
    default).

    Values can span multiple lines, as long as they are indented deeper
    than the first line of the value. Depending on the parser's mode, blank
    lines may be treated as parts of multiline values or ignored.

    Configuration files may include comments, prefixed by specific
    characters (`#' and `;' by default). Comments may appear on their own
    in an otherwise empty line or may be entered in lines holding values or
    section names.
    """
    elements_added = set()
    cursect = None                        # None, or a dictionary
    sectname = None
    optname = None
    lineno = 0
    indent_level = 0
    e = None                              # None, or an exception
    for lineno, line in enumerate(fp, start=1):
      comment_start = None
      # strip inline comments
      for prefix in self._inline_comment_prefixes:
        index = line.find(prefix)
        if index == 0 or (index > 0 and line[index-1].isspace()):
          comment_start = index
          break
      # strip full line comments
      for prefix in self._comment_prefixes:
        if line.strip().startswith(prefix):
          comment_start = 0
          break
      value = line[:comment_start].strip()
      if not value:
        if self._empty_lines_in_values:
          # add empty line to the value, but only if there was no
          # comment on the line
          if (comment_start is None and
              cursect is not None and
              optname and
              cursect[optname] is not None):
              cursect[optname].append('') # newlines added at join
        else:
          # empty line marks end of value
          indent_level = sys.maxsize
        continue
      # continuation line?
      first_nonspace = self.NONSPACECRE.search(line)
      cur_indent_level = first_nonspace.start() if first_nonspace else 0
      if (cursect is not None and optname and
          cur_indent_level > indent_level):
          cursect[optname].append(value)
      # a section header or option header?
      else:
        indent_level = cur_indent_level
        # is it a section header?
        mo = self.SECTCRE.match(value)
        if mo:
          sectname = mo.group('header')
          if sectname in self._sections:
            if self._strict and sectname in elements_added:
              raise DuplicateSectionError(sectname, fpname,
                                          lineno)
            cursect = self._sections[sectname]
            elements_added.add(sectname)
          elif sectname == self.default_section:
            cursect = self._defaults
          else:
            cursect = self._dict()
            self._sections[sectname] = cursect
            self._proxies[sectname] = configparser.SectionProxy(self, sectname)
            elements_added.add(sectname)
          # So sections can't start with a continuation line
          optname = None
        # no section header in the file?
        elif cursect is None:
          raise MissingSectionHeaderError(fpname, lineno, line)
        # an option line?
        else:
          mo = self._optcre.match(value)
          if mo:
            optname, vi, optval = mo.group('option', 'vi', 'value')
            if not optname:
              e = self._handle_error(e, fpname, lineno, line)
            optname = self.optionxform(optname.rstrip())
            if (self._strict and
              (sectname, optname) in elements_added):
              raise configparser.DuplicateOptionError(sectname, optname, fpname, lineno)
            elements_added.add((sectname, optname))
            # This check is fine because the OPTCRE cannot
            # match if it would set optval to None
            if optval is not None:
              optval = optval.strip()
              # Check if this optname already exists
              if (optname in cursect) and (cursect[optname] is not None):
                # If it does, convert it to a tuple if it isn't already one
                if not isinstance(cursect[optname], tuple):
                  cursect[optname] = tuple(cursect[optname])
                cursect[optname] = cursect[optname] + tuple([optval])
              else:
                cursect[optname] = [optval]
            else:
                # valueless option handling
                cursect[optname] = None
          else:
            # a non-fatal parsing error occurred. set up the
            # exception but keep going. the exception will be
            # raised at the end of the file and will contain a
            # list of all bogus lines
            e = self._handle_error(e, fpname, lineno, line)
    # if any parsing errors occurred, raise an exception
    if e:
        raise e
    self._join_multiline_values() 
```

该`_read`函数是从 复制粘贴的`configparser.py`。我所做的唯一更改是在行`if`后添加条件`optval = optval.strip()`。`ConfigParserMultiOpt`将为 a 中的一个部分中的重复键返回多个值`tuple`。

* * *

我是 Python 的新手，所以如果有人对改进上面的代码有任何建议，我会全力以赴！

# python - 使用 Python 从在线图像/电影中获取 MD5 哈希值

> ID：13921330
> 
> 赞同：1
> 
> 时间：2012-12-17T20:03:58.050
> 
> 标签：python, html, web, http-headers, md5

我目前正在寻找使用 Python 2.x 编写一个快速脚本，以尝试获取特定网站上许多图像和电影的 MD5 哈希值。我在 w3.org 网站上注意到 HTTP/1.1 协议确实在内容字段中提供了一个选项来访问 MD5 值，但我想知道这是否必须由网站管理员设置？我的脚本如下：-

```
import httplib
c = httplib.HTTPConnection("www.samplesite.com")
c.request("HEAD", "/sampleimage.jpg")
r = c.getresponse()
res = r.getheaders()
print res 
```

我有一种感觉，我需要编辑 'HEAD' 或者可能是 r.getheaders，但我只是不确定用什么来替换它们。

有什么建议么？如前所述，我只是想指向一个图像，然后捕获所述图像/电影的 MD5 哈希值。理想情况下，我不想下载图像/电影来节省带宽，因此我为什么要这样做。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T20:05:21.087

是的，服务器很少会真正响应带有 MD5 标头的请求。您*可以*检查一下，但不幸的是，在大多数情况下，您实际上需要下载视频或图像。

（至少[`hashlib`](http://docs.python.org/2/library/hashlib.html#module-hashlib)很简单！）

# mysql - 尝试使用 rails 2.3.5 连接表时出现轻微查询问题

> ID：13921331
> 
> 赞同：0
> 
> 时间：2012-12-17T20:03:58.550
> 
> 标签：mysql, ruby-on-rails, join

我把这个查询放在一起，效果很好。

```
 search = Artist.where(:status => "active").where("upcoming_events_count > 0").order("echonest_external_popularity DESC").limit(limit)) 
```

问题是我想再添加一张支票，它位于另一张 ArtistPhoto 表上。匹配需要确保艺术家（来自artist_id）也包含一张有效的照片。

我有独立工作的查询：

```
 ArtistPhoto.where("artist_id = ? and artist_photos.primary = ?", self.id, true).first 
```

如果有人可以协助将连接加入 1 个查询，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:10:06.580

用于`joins`添加其他关联：

```
search = Artist.joins(:artist_photos).
                where("artist_photos.primary = ?", true).
                where(...) # other filters here 
```

这个答案假设你的模型`has_many :artist_photos`上有一个。`Artist`

# matplotlib - Matplotlib 表格格式 - 更改行标签单元格的宽度

> ID：13921338
> 
> 赞同：7
> 
> 时间：2012-12-17T20:04:37.200
> 
> 标签：matplotlib, tabular

![在此处输入图像描述](../Images/da108543e8b370bdc2aeb506bc895eef.png)

我对这张表有一个明显的问题，因为行标签在图之外，我不知道如何修复它。我知道我可以进入儿童艺术家并在那里更改高度和宽度之类的东西，但我已经尝试过但它没有用，所以也许你现在可以帮助我。

这是我为此使用的代码，希望它不会太难阅读......：

```
ind1=np.arange(5)

figure()
axes([0.2, 0.45, 0.7, 0.45])

## define different bars
l1=bar((ind1-0.45),mean_morphing_cc[0:5],width=0.2,bottom=0,color='darkblue',yerr=[min_dif_morphing_cc[0:5],max_dif_morphing_cc[0:5]],error_kw=dict(elinewidth=2, ecolor='darkkhaki'))

l2=bar((ind1-0.25),mean_persistence_cc[0:5],width=0.2,bottom=0,color='darkred',yerr=[min_dif_persistence_cc[0:5],max_dif_persistence_cc[0:5]],error_kw=dict(elinewidth=2, ecolor='darkkhaki'))

l3=bar((ind1+0.05),mean_m_vs_p_cc[0:5],width=0.2,bottom=0,color='purple',yerr=[min_dif_m_vs_p_cc[0:5],max_dif_m_vs_p_cc[0:5]],error_kw=dict(elinewidth=2, ecolor='darkkhaki'))

## print grid and a horizontal line at "0"
grid(True, linestyle='-', which='major', color='lightgrey',alpha=0.5)

hlines(0, -0.5,(max(ind1)+0.5), colors='k', linestyles='solid')

ylabel('mean((cloud cover_forecast/cloud cover_observation)-1),\n mean("morphing" - "persistence")',horizontalalignment='right',multialignment='center',size='xx-small')

xlim(-0.5,(max(ind1)+0.5))

xticks(ind1,[])

## print a legend
legend((l1[0],l2[0],l3[0]),('mean morphing cloud cover','mean persistence cloud cover','mean morphing vs persistence error'),'lower center',ncol=2,bbox_to_anchor=(0.5,-0.92),borderpad=0.2,labelspacing=0.2,handlelength=1,handletextpad=0.2)

leg = plt.gca().get_legend()

ltext  = leg.get_texts()  # all the text.Text instance in the legend

llines = leg.get_lines()  # all the lines.Line2D instance in the legend

frame  = leg.get_frame()  # the patch.Rectangle instance surrounding the legend

frame.set_facecolor('0.90')      # set the frame face color to light gray

plt.setp(ltext, fontsize='x-small')    # the legend text fontsize

## print the title
title('cloud cover over- or underestimation\n morphing forecast compared to persistence',size='small')

## print the table
the_table=plt.table(cellText=[[str(i)[:4] for i in mean_morphing_cc[0:5]],max_morphing_cc[0:5],min_morphing_cc[0:5],mean_persistence_cc[0:5],max_persistence_cc[0:5],min_persistence_cc[0:5],mean_m_vs_p_cc[0:5],max_m_vs_p_cc[0:5],min_m_vs_p_cc[0:5]],
                    rowLabels=['morphing: mean','morphing: max','morphing: min','persistence: mean','persistence: max','persistence: min','morph vs per: mean','morph vs per: max','morph vs per: min'],
                    rowColours=['darkblue','darkblue','darkblue','darkred','darkred','darkred','purple','purple','purple'],colLabels=['t+1','t+2','t+3','t+4','t+5'],loc='bottom')

## change cell properties
table_props=the_table.properties()
table_cells=table_props['child_artists']
for cell in table_cells:
    cell.set_width(0.2)
    cell.set_height(0.065)
    cell.set_fontsize(12)

show() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-14T18:54:33.443

我还没有找到完美的答案，但我找到了一个对我自己的目的有用的解决方案。

同时调整 colWidth 和 table 宽度可以缩小 rowLabel 列的宽度。在[源代码](https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/table.py)中，实际上他们使用了一个变量rowLabelWidth，但他们不让用户设置它。无论如何，首先我将重写您现有的代码，以便您可以看到在哪里进行了更改。这是可变格式的原始文件：

```
## setting properties to variables to make table function easier to read
data = [[str(i)[:4] for i in mean_morphing_cc[0:5]],max_morphing_cc[0:5],min_morphing_cc[0:5],mean_persistence_cc[0:5],max_persistence_cc[0:5],min_persistence_cc[0:5],mean_m_vs_p_cc[0:5],max_m_vs_p_cc[0:5],min_m_vs_p_cc[0:5]]
rowLabels = ['morphing: mean','morphing: max','morphing: min','persistence: mean','persistence: max','persistence: min','morph vs per: mean','morph vs per: max','morph vs per: min']
rowColours = ['darkblue','darkblue','darkblue','darkred','darkred','darkred','purple','purple','purple']
colLabels = ['t+1','t+2','t+3','t+4','t+5']
loc = 'bottom'

## without changing anything, this is what your table function would look like
the_table=plt.table(cellText = data,
                rowLabels = rowLabels, rowColours = rowColours,
                colLabels = colLabels, loc = loc) 
```

这是 rowLabelWidth 的源代码中的内容，我们将使用它来帮助确定将 width 和 colWidth 设置为什么。

```
# Do row labels
if rowLabels is not None:
    for row in xrange(rows):
        table.add_cell(row + offset, -1,
                       width=rowLabelWidth or 1e-15, height=height,
                       text=rowLabels[row], facecolor=rowColours[row],
                       loc=rowLoc)
    if rowLabelWidth == 0:
        table.auto_set_column_width(-1) 
```

看来您已将图表的宽度设置为轴（[0.2, 0.45, 0.7, 0.45]），设置为 0.7，因此我们将其设置为变量 tb_width

```
tb_width = 0.7 
```

rowLabelWidth 自动调整大小，这对我们没有帮助。但是，如果您尝试使用 colWidths 的以下三个选项，您可以开始弄清楚如何使其以您想要的方式工作。添加 bbox 属性以明确说明表格的位置。需要注意的重要一点是，rowLabelWidth 似乎不包括在整个表格宽度中。

```
## standard - essentially what happens when you don't specify colWidths. Takes the table width, divides it by the number of columns, giving each column an equal width.
colWidths = [tb_width/n_cols] * n_cols
## rowLabels stick out on the left

## similar to the above, but the '+1' attempts to account for the fact that another column's width, rowLabels, should fit inside the overall table width
colWidths=[( tb_width / (n_cols + 1) )] * n_cols  

## set your own width. this will start messing with the width of the rowLabelsWidth as now the colWidths aren't perfectly proportioned within the table width
tb_colWidth = 0.08
colWidths = [tb_colWidth] * n_cols 
```

为确保 rowLabels 正好适合图表下方而不会突出到左侧，请使用 bbox 坐标。使用表格的左下角作为参考点，定位表格：bbox=[x_coordinate, y_coordinate, width, height]。如果 x_coordinate 设置为考虑您的 tb_colWidth，则它将表格移动到使 rowLabels 列的最左侧直接位于上图左下角所需的确切数量上。

```
bbox = [tb_colWidth, y_coordinate, tb_width, tb_height] 
```

如果现在这导致最右边的列从图表下方伸出，则将宽度缩小一列的大小：

```
bbox = [tb_colWidth, y_coordinate, tb_width - tb_colWidth, tb_height] 
```

现在把它们放在一起：

```
the_table=plt.table(cellText = data,
            rowLabels = rowLabels, rowColours = rowColours,
            colLabels = colLabels, loc = 'bottom',
            colWidths = colWidths, bbox = bbox) 
```

您不必执行调整单元格宽度的最终表格单元格循环，而是可以使用上述工具进行控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-23T17:53:41.190

我遇到了这个问题，我通过将行标签的对齐方式从“左”更改为“右”来部分修复它。

```
cellDict = the_table.get_celld()
for x in range(1, len(row_labels)+1):
    cellDict[(x,-1)]._loc = 'right' 
```

get_celld() 返回单元格的字典， cellDict[(x,-1)] 选择 x 行和 -1 列中的单元格，即行标签列。

这不会更改行标签列的宽度，因此标签左侧可能仍有一个空格。我的离开屏幕左侧，但至少我现在可以看到行标签中的所有文本。

# c# - 解析 ASPX 中自动生成的选择元素在做什么？

> ID：13921339
> 
> 赞同：0
> 
> 时间：2012-12-17T20:04:44.637
> 
> 标签：c#, asp.net, html

我试图理解以下`select`元素：

```
 <select name="ctl00$ctl00$ContentPlaceHolder1$ContentItems$ddlResponseRange id="ctl00_ctl00_ContentPlaceHolder1_ContentItems_ddlResponseRange" class="Content" style="width:11%;"> 
```

这都是自动生成的代码，正确（即像 ct100 ）？$ 符号在做什么 - 它们用于表达式绑定吗？仅供参考，这里的 ddl 表示“下拉列表”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:12:41.957

这只是一根大绳子。从 HTML 的角度来看，它们都是构成属性值的有效字符，因此在这个意义上它是“正确的”。

至于尝试自己使用 id/name 值，或者依赖基于该结构的 name/id 假设，我建议避免这种情况。我发现最好假装 ASP 会生成一个我无法使用的随机名称/ID，尽管事实上它只是从该项目到根的所有元素的 ID。如果你发现自己写出这样的 ID 值，你可能做错了什么。

至于为什么它遵循该约定而不是仅仅实际分配一个随机 ID/名称（或根本没有），以便它可以重新使用它来将 HTML 响应与内存中项目的结构相关联。确保每个页面的 ID 是唯一的也很重要，并且通过使用这种结构意味着 APS ID 值只需要在兄弟元素之间是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:40:07.747

`$`和`_`用作控件`ddlResponseRange`的服务器端 ID 和其父控件类型[`INamingContainer`](http://msdn.microsoft.com/en-us/library/system.web.ui.inamingcontainer.aspx)（通常是`<asp:content>`控件）的服务器端 ID 之间的分隔符。

页面上的控件本身，就在 a 内部`<form runat="server">`没有这样的属性。但是，当您开始使用母版页或数据绑定控件时，您使用的是实现`INamingContainer`. 这个接口就像一个标记，它指示 ASP.NET 运行时开始将控件的服务器端 ID 添加到其子控件的 ID。这对于保证生成的 HTML 中的唯一名称和 ID 属性是必要的。

最终，此基础结构支持 ASP.NET Web 窗体回发机制和客户端脚本。

如果您使用的是 ASP.NET 4.0 或更高版本，您实际上可以影响 ASP.NET 生成客户端 ID 的方式。有关配置客户端 ID 的不同方法，请参阅[本文。](http://weblogs.asp.net/scottgu/archive/2010/03/30/cleaner-html-markup-with-asp-net-4-web-forms-client-ids-vs-2010-and-net-4-0-series.aspx)

# php - 如何在 Minion 中请求另一个动作

> ID：13921340
> 
> 赞同：0
> 
> 时间：2012-12-17T20:04:44.650
> 
> 标签：php, kohana, kohana-3

我正在尝试从命令行运行控制器操作。php 代码是用 Kohana 3.3 编写的。Kohana 官方说我必须使用 minion 任务处理器。如何在此模块中包含我的操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T09:25:34.853

您可以像这样从命令行调用 minion 控制器（从 Kohana 3.3 开始）：

```
$ php index.php --uri=minion --task={task} 
```

每个任务都在里面`classes/task`，如此处所述[https://github.com/kohana/minion#writing-your-own-tasks](https://github.com/kohana/minion#writing-your-own-tasks)

确保在引导程序中启用 minion 模块

在 minion 模块之前，您必须使用控制器，并且一些与服务器相关的东西将不可用，但您可以在浏览器中执行

```
$ php index.php --uri="control/do/action" 
```

# cordova - phonegap 的天气小部件

> ID：13921344
> 
> 赞同：0
> 
> 时间：2012-12-17T20:04:59.877
> 
> 标签：cordova, widget

我需要使用我所在城镇的信息来实现一个 phonegap 应用程序。他们要求我提供的是当天天气的页面。

我一直在寻找要在 phonegap 中使用的天气小部件，但没有运气（实际上，由于我是 phonegap 开发的新手，我什至不知道是否可以在这种应用程序中使用小部件）。

有人会帮我解决这个问题吗？

提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T00:36:13.063

我想你想阅读：

[使用 phonegap 创建 Android 小部件](https://stackoverflow.com/questions/8755318/creating-android-widgets-using-phonegap)

[https://groups.google.com/forum/?fromgroups=#!topic/phonegap/U5gr-rz2anQ](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/U5gr-rz2anQ)

但老实说，我不认为你现在可以做到这一点，至少不写一些 Java 就不行。:)

我希望我的回答至少对你有所帮助:)

# autotools - 使用自动工具符号链接到每个构建子目录中的源目录

> ID：13921345
> 
> 赞同：0
> 
> 时间：2012-12-17T20:05:05.313
> 
> 标签：autotools

让我们假设这个项目层次结构：

```
根
|-src
| |-项目1
| |-项目2
| | |-src
| | | |-嵌套
|-构建

```

使用 GNU autotools 并依赖递归 make，在`build`目录中配置和制作项目层次结构是没有问题的：

`root$ cd src && autoreconf -i && cd ../build && ../src/configure --options && make`

现在，由于这会在 中创建`src`层次结构的镜像，因此`build`我希望在 的每个子目录中都有一个指向相应子目录的符号链接`src`，`build`如下所示：

```
根
|-src
| |-项目1
| |-项目2
| | |-src
| | | |-嵌套
|-构建
| |-项目1
| | |-_src -> 根/src/proj1
| |-项目2
| | |-_src -> 根/src/proj2
| | |-src
| | | |-_src -> 根/src/proj2/src
| | | |-嵌套
| | | | |-_src -> root/src/proj2/src/nested

```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T17:09:56.240

我可能对我要如何处理我要求的符号链接有些不明确，所以这个解决方案不是很明显。我只是想在调试期间从构建目录中访问源文件，并且尽可能少地输入。从那时起，我认为别名而不是许多符号链接也可以完成这项工作：

```
$ less `s`/file.cc 
```

别名在哪里`s`定义为

```
alias s='pwd | sed -e "s|build|src|"' 
```

# bash - 为什么 bash 命令返回“...是一个目录”？

> ID：13921354
> 
> 赞同：0
> 
> 时间：2012-12-17T20:05:56.520
> 
> 标签：bash, cordova

当我按照步骤为 Eclipse 启动一个新的 Cordova PhoneGap 项目时（按照以下说明操作：http: [//docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android) )，我首先将 Android 的 /bin 目录拖到终端窗口（其中包含创建脚本），然后输入：

```
./create /Users/Steve/Documents/PhoneGap_apps/PhoneGap_apps/appName2 com.companyname.appName2 appName2 
```

创建项目。

但我得到的回报是：

```
-bash: /Users/Steve/Downloads/phonegap-phonegap-8a3aa47/lib/android/bin: is a directory 
```

未创建 appName2 目录。

为什么我会收到“是一个目录”通知，以及如何解决它以创建目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:11:44.663

编辑：固定路径。

我认为您的路径中缺少波浪号 (~)。

尝试这个：

```
./create ~/Documents/PhoneGap_apps/PhoneGap_apps/appName2 com.companyname.appName2 appName2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:07:19.360

我根据 Marcus 的响应成功创建了文件夹，首先添加了“cd”，然后添加了整个脚本。早些时候，在尝试他的回答时，我在将 /bin 文件夹拖过来后首先点击了 Return，然后添加了脚本。在一条线上完成所有三个组件就可以完成这项工作。

# python - dateutil.rrulestr() 的对面

> ID：13921360
> 
> 赞同：3
> 
> 时间：2012-12-17T20:06:29.717
> 
> 标签：python, icalendar, python-dateutil, rfc5545

python-dateutil 库提供了将 iCalendar 重复规则解析为实例的`rrule`类和函数。`rrulestr()``rrule`

是否有一个函数可以将`rrule`实例序列化为接受的字符串`rrulestr()`？python-dateutil 中似乎没有一个。

# ajax - 如果我使用 jQuery 发送 AJAX 请求并且仅验证它们 X-Requested-With，应用程序是否足以抵御 CSRF 攻击？

> ID：13921363
> 
> 赞同：0
> 
> 时间：2012-12-17T20:06:55.907
> 
> 标签：ajax, csrf

根据[这篇文章](https://nealpoole.com/blog/2010/11/preventing-csrf-attacks-with-ajax-and-http-headers/)，验证 jQuery 发送的 AJAX 请求的 X-Requested-With 标头就足够了。那么在这种情况下是否不需要实现令牌？

如果是，在哪里定义不允许跨浏览器请求？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:46:24.573

文章本身说这种方法是不够的：

> 警告
> 
> 这篇文章中描述的防止 CSRF 攻击的方法现在被认为是不够的。对此帖子的评论链接到有关绕过它的攻击的更多详细信息。

# sql - 使用外键创建表

> ID：13921365
> 
> 赞同：1
> 
> 时间：2012-12-17T20:07:03.387
> 
> 标签：sql, oracle, foreign-keys, create-table

嘿，我正在尝试创建一个包含 a 的表，`Foreign Key`但由于某种原因，我遇到了错误。错误说`00907\. 00000 - "missing right parenthesis"`这很奇怪，因为我没有随机的左括号。我查找了如何使用 a 创建表，`Foreign Key`并导致以下代码：

```
Create Table EMPHIREINFO
(
empname VARCHAR2(10) NOT NULL FOREIGN KEY REFERENCES EMPADDRESS(empname),
empno NUMBER(4,0) NOT NULL PRIMARY KEY,
startdt DATE,
enddt DATE,
cntrlgth NUMBER(5,0)
) 
```

我尝试了有和没有的`REFERENCES EMPADDRESS(empname)`，我仍然得到同样的错误。任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T20:11:21.757

您需要在 之后指定列`FOREIGN KEY`。但是，我更喜欢使用命名约束，例如

```
Create Table EMPHIREINFO
(
empname VARCHAR2(10) NOT NULL ,
empno NUMBER(4,0) NOT NULL ,
startdt DATE,
enddt DATE,
cntrlgth NUMBER(5,0),
CONSTRAINT PK_EMPHIREINFO PRIMARY KEY(empno) USING INDEX
 (CREATE UNIQUE INDEX IDXU_EMPHIREINFO_empno ON EMPHIREINFO(empno) ),
 CONSTRAINT FK_EMPHIREINFO_EMPNAME FOREIGN KEY(empname)
 REFERENCES EMPADDRESS(empname)
) 
```

# ruby-on-rails - 检查rails中是否存在输入框

> ID：13921368
> 
> 赞同：0
> 
> 时间：2012-12-17T20:07:26.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3, client-side-validation

我必须检查确认密码输入框是否存在于表单中。
如果存在，我需要这样做：

```
validates :password,:confirmation=>true 
```

别的

将确认设置为假。

**问题的详细解释：**

我正在使用rails client_side_validation gem，它将模型验证转换为javascript表单验证。

这有一个小问题，因为登录和注册属于同一张表，它们都有一个模型。现在，当我在模型中添加它进行验证时：

```
validates :password,:confirmation=>true 
```

它不会让我登录，因为验证将变为错误，因为登录时没有确认密码输入框。它只适用于注册。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:33:52.323

在您的注册表单中，您可以有一个在表单中传递的隐藏字段。如果该属性存在并返回，`true`则验证密码确认是否存在。

注册表单，表单标签内的某处：

```
<%= form.hidden_field :is_signup, true %> 
```

模型：

```
attribute_accessor :confirm_password
attribute_accessor :is_signup

validates :confirm_password, :presence => true, :if => :validate_confirm_password?

def validate_confirm_password?
  is_signup
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:44:34.973

假设一个模型用户添加`@user.is_signup = true`到 users_controller 中的注册操作。在您的用户模型中添加`attribute_accessor :is_signup`和`validates :confirm_password, :confirmation => true, :if => :is_signup`.

# objective-c - 自动布局不适用于多行 UILabel

> ID：13921369
> 
> 赞同：2
> 
> 时间：2012-12-17T20:07:29.873
> 
> 标签：objective-c, ios, uilabel, autolayout

我有以下单元格：

[![](../Images/826e4f59968007c36dd3b6d07ca46b09.png)](https://i.stack.imgur.com/uj6ZK.png)
[（来源：[qwuh.com](https://ssl.qwuh.com/b/images/Cell.png)）]

顶部的“正在加载...”是`UILabel`其“行”设置为 0。我无法截断内容，因此它必须相应地调整大小并将其下的所有其他内容向下推。

通常发生的是我确实得到了一个例如 3 line `UILabel`，但它与图像视图重叠。我不明白这一点，因为我对`UILabel`和之间的垂直间距有“1000”用户约束`UIImageView`。我在 IB 中设置了“兄弟姐妹和祖先”和“后代”。

除了顶部的第一个“正在加载...”UILabel 之外，这些视图都没有在 IB 中设置任何“...Space to Superview”。我真的尝试了一切，但它总是表现错误。

我该怎么办，这样设置顶部 UILabel 的 text 属性确实会下推图像视图和其他所有内容？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T05:50:59.900

你能和我们分享你的限制吗？我创建了一个具有以下约束的场景：

![查看约束](../Images/96208c4cb6ec08cf3f5f94d604634c17.png)

使用这种配置，当我将顶部标签设置为非常长的字符串时，它会增长并且下面的所有内容都会向下移动。

也许您可以与我们分享您的限制，我们可以看看是否有任何事情发生在我们身上。

另外，我知道您说没有模棱两可的约束，但可能值得使用以下内容检查调试器并查看它的内容：

```
po [[UIWindow keyWindow] _autolayoutTrace] 
```

# python - 让 django webapp 自行重启的最佳实践

> ID：13921373
> 
> 赞同：1
> 
> 时间：2012-12-17T20:07:36.083
> 
> 标签：python, django, caching

我们有某些系统管理员设置，我们会向 django webapp 的超级用户公开这些设置。诸如域名（使用 contrib.sites）和单点登录配置之类的东西。其中一些设置被系统缓存，有时是因为我们希望避免在每个请求的中间件中额外的数据库命中，如果我们可以帮助它，有时是因为它是 contrib.sites，它有自己的缓存。因此，当设置更改时，更改在重新加载应用程序之前不会生效。

我们希望应用程序在进行这些更改时自行重新启动，这样我们的客户就不需要纠缠我们为他们重新启动。

我们的 webapp 是通过 mod_wsgi 在 apache 上运行的，所以只要更改这些设置中的一个，我们应该可以通过触摸应用程序的 wsgi 文件来做到这一点，但这样做感觉有点奇怪，我担心会有我们应该遵循一些更优雅的约定。

是否有正确的方法来应用缓存并要求重新加载应用程序的更新？使这些东西的缓存失效会很麻烦，所以我想我会避免这种情况，除非应用程序重启有严重的缺陷。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:23:37.337

对于 mod_wsgi 阅读：

*   [http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode](http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode)

其他一些 WSGI 服务器也有类似的选项，但其他 WSGI 服务器中的选项通常更有限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T23:49:38.207

如果您使用 WSGI 并且您的进程正在被 supervisord、gunicorn、uwsgi 或类似的控制器监视，那么您可以简单地向自己发送一个 SIGINT 或 SIGQUIT（取决于控制器）。它应该优雅地关闭当前进程，控制器将为您重新启动它。

```
import signal, os
os.kill(os.getpid(), signal.SIGQUIT) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T08:32:26.510

这取决于您的设置：

*   如果您在单个服务器上使用 wsgi，您可以触摸 wsgi 文件让 apache 重新启动应用程序的每个实例
*   如果您使用的是 gunicorn，您可能会使用 supervisord 来控制它。然后 supervisorctl restart APPNAME 将是解决方案
*   如果您在多台服务器上扩展您的应用程序，您必须确保每台服务器都重新启动它们的实例。有几种方法可以实现这一点：
    *   如果您使用的是 mod_wsgi，请使用相同的文件系统，那么每台服务器都需要一次触摸
    *   使用 ssh 登录到其他服务器并让它们重新启动您的应用程序

我确信有更多方法可以重新启动您的应用程序，但这在很大程度上取决于您的设置以及您是否必须重新启动所有实例或只重新启动一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T21:32:51.037

如果您使用 mod_wsgi 在 apache 上运行它，只需在每次更改模型时更新 wsgi 配置文件的时间戳。如果 wsgi 文件得到更新，Apache 会自动重新启动应用程序。

# javascript - setAttribute("transform",...) 不起作用 元素

> ID：13921378
> 
> 赞同：1
> 
> 时间：2012-12-17T20:08:05.253
> 
> 标签：javascript, windows, svg, transform, setattribute

我需要一些 svg/javascript 编程方面的帮助。我制作了一个 SVG 图形，其中的元素“Stern”应该由`onmouseover-event`. 我们不允许使用 svg-animations，动画应该由 javascript 完成。我的想法是使用`setAttribute("transform",...)`，但这无论如何都行不通。我用谷歌搜索了大约一个小时，但我发现那里没有任何效果。函数 stern_rotieren 由鼠标触发（我用 测试过`alert("test")`），类似的东西`setAttribute("fill","white")`在同一个函数中完美运行。只是`setAttribute("transform",...)`不起作用。也许你可以告诉我我的失败，我很绝望。

```
<defs>
    <script type="text/javascript">

        other functions

        function stern_rotieren(){
            var stern=document.getElementById("Stern");
            stern.setAttribute("transform","rotate(15 500 500)");           
        }

    </script>
    <symbol id="Baum" fill="white" stroke="green" stroke-width="5">
        <path d="M 1000,200 Q 950,400 800,500 Q 600,600 750,650 T 700,850" />
        <path d="M 700,850 Q 400,1100 600, 1100 T 500,1400" />
        <path d="M 500,1400 Q 250,1600 450,1600 L 850,1600 Q 950,1600 950,1700" />
    </symbol>
    <symbol id="Kugel" fill="red" onclick="kugel_farbe()" transform="translate(0,0)">
        <circle cx="50" cy="50" r="50" />
    </symbol>
    <symbol id="Stern" fill="yellow" onclick="stern_farbe()" onmouseover="stern_rotieren()" >
        <polygon points="200,20 80,360 380,120 20,120 320,360"/>
    </symbol>
</defs>

<use xlink:href="#Baum" transform="translate(0,250)" />
<use xlink:href="#Baum" transform="translate(2000,250) scale(-1,1)" />
<use xlink:href="#Kugel" transform="translate(850,1050)" />
<use xlink:href="#Kugel" transform="translate(1050,750)" />
<use xlink:href="#Kugel" transform="translate(1200,1250)" />
<use xlink:href="#Kugel" transform="translate(700,1650)" />
<use xlink:href="#Kugel" transform="translate(1300,1700)" />
<use xlink:href="#Stern" transform="translate(800,185)" />
<use xlink:href="#Stern" transform="translate(970,900) scale(0.5)" />
<use xlink:href="#Stern" transform="translate(800,1300) scale(0.5)" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:39:45.073

符号元素不接受变换属性。例如，如果您在子多边形元素上设置变换属性，它将起作用。

# macos - 如何在 mac os x 10.8.2 上重置 postgresql 9.2 默认用户（通常是“postgres”）密码？

> ID：13921380
> 
> 赞同：38
> 
> 时间：2012-12-17T20:08:26.300
> 
> 标签：macos, postgresql

我刚刚`PostgreSQL 9.2`从[enterprisedb](http://www.enterprisedb.com/)安装到`Mac OS X 10.8.2`. 我输错了`postgres`用户密码，所以无法连接。如何重设密码？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-12-17T20:08:26.300

[找到方向](http://visibletrap.blogspot.com/2011/12/postgresqlmac-modify-root-password.html)：

```
sudo su postgres 
```

修改/Library/PostgreSQL/9.2/data/pg_hba.conf

```
-local all all   md5
+local all all   trust 
```

重新启动 postgres

```
/Library/PostgreSQL/9.2/bin/pg_ctl restart -D /Library/PostgreSQL/9.2/data/ 
```

连接到 postgres：

```
psql 
```

在 psql 内部（`\q`退出）：

```
ALTER USER postgres WITH ENCRYPTED PASSWORD 'password'; 
```

修改 pg_hba.conf 回来

```
+local all all   md5
-local all all   trust 
```

重新启动 postgres

```
/Library/PostgreSQL/9.2/bin/pg_ctl restart -D /Library/PostgreSQL/9.2/data/ 
```

# c++ - 如何grep包含“->”的字符串

> ID：13921383
> 
> 赞同：3
> 
> 时间：2012-12-17T20:08:39.540
> 
> 标签：c++, grep

我正在单个目录`->foo`中的所有文件中寻找文字字符串。`*.cpp`如果我尝试

```
grep -F "->foo" *.cpp 
```

grep 报告

```
Invalid option -- '>' 
```

然后，如果我尝试

```
grep -F "-\>foo" *.cpp 
```

我明白了

```
Invalid option -- '\' 
```

我怎样才能得到这个工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T20:10:00.980

试试这个：

```
grep -e "->foo" *.cpp 
```

从[手册页](http://linux.die.net/man/1/grep)：

> > -e PATTERN, --regexp=PATTERN
> > 使用 PATTERN 作为模式。这可用于指定多个搜索模式，或**保护以连字符 (-) 开头的模式**。（-e 由 POSIX 指定。）[强调添加]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T20:12:20.667

通常*（不`grep`具体）* using`--`表示选项的结束：

```
grep -F -- "->foo" *.cpp 
```

当您意外创建以 开头的文件时很有帮助`-`：

```
$ touch -- -damn 

$ ls -- -*
-damn

$ rm -damn
rm: invalid option -- 'd'

$ rm -- -damn 
```

# c++ - 在 C++ 中声明可见性/访问的方式有何不同？

> ID：13921384
> 
> 赞同：0
> 
> 时间：2012-12-17T20:08:42.343
> 
> 标签：c++, class, methods, attributes, visibility

这可能是一个愚蠢的问题，但是在如何在 C++ 中声明类访问的效率、优化等方面有什么不同吗？

作为一个具体的例子，在类中声明每个属性/方法的可见性与在类中声明可见性（即私有/公共/受保护）“块”是否更有效，效率更低，或者两者都不声明。

例如，是下面的代码：

```
class Foo{
  private:
    int member1;
    string member2;
    ...
    Thing memberN;

  public:
    int member2;
    Thing member3;
    ...
    string memberM;
} 
```

比：

```
class Foo{
  private:
    int member1;

  private:
    string member2;

  private:
    ...

  private:
    Thing memberN;

  public:
    int member2;

  public:
    Thing member3;

  public:
    ...

  public:
    string memberM;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:12:25.350

一样的。访问修饰符供编译器使用并产生相同的输出二进制代码。

# jquery - 将 json 数组发送到 MVC4 控制器操作的正确方法

> ID：13921398
> 
> 赞同：2
> 
> 时间：2012-12-17T20:09:31.113
> 
> 标签：jquery, arrays, json, asp.net-mvc-4, fancybox-2

我有一个控制器：

```
public virtual ActionResult CreateMultiple(int[] ids)
{
...
} 
```

在 JS 中，我得到所有选中的复选框，将其转换为 int 数组：

```
var params = [];
$("input:checkbox:checked.checkedPersons").each(function () { params.push($(this).val()); });
$("a.modalFormLink").attr("data-params", JSON.stringify( { "ids": params })); 
```

然后，一旦我单击该链接，我所做的就是显示一个带有视图的 Fancybox... 通过`data-params`Fancybox href 中的 queryString 发送属性值：

```
...
options.params = JSON.parse($(this).attr("data-params"));
var query = $.toQueryString(options.params);
... 
```

**问题：**好吧，如果我只选中一个复选框，这在某种程度上是有效的。如果我有多个，则活页夹失败并且参数为空。

data-params 属性的内容是：

```
{"ids":["4","6"]} 
```

当我只有一个值（并且有效）时，内容是：

```
{"ids":["4"]} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:18:46.117

我假设您正在使用 ajax 进行此调用。

如果是这样，请尝试添加

```
traditional: true 
```

到您在 ajax 调用中的选项。

```
$.ajax({
url : 'someurl.com',
traditional:true,
data : someData
}); 
```

# .net - 对 .NET 同步/异步执行和结果中的 WMI 感到困惑

> ID：13921399
> 
> 赞同：0
> 
> 时间：2012-12-17T20:09:31.680
> 
> 标签：.net, wmi

我正在尝试使用 WMI 从 Windows 8 系统上的导出加载 Hyper-V 系统定义。到目前为止，我有这个：

```
var managementScope = new ManagementScope(@"root\virtualization\v2");
var invokeMethodOptions = new InvokeMethodOptions();
invokeMethodOptions.Timeout = new TimeSpan(0, 0, 10);
using (var managementService = WmiUtilities.GetVirtualMachineManagementService(managementScope)) {
    var inParameters = managementService.GetMethodParameters(@"ImportSystemDefinition");
    inParameters["SystemDefinitionFile"] = filePath;
    inParameters["SnapshotFolder"] = snapshotPath;
    inParameters["GenerateNewSystemIdentifier"] = false;
    ManagementBaseObject outParameters = managementService.InvokeMethod(@"ImportSystemDefinition", inParameters, invokeMethodOptions);
    foreach (var value in outParameters.Properties) {
        Console.WriteLine("{0}: {1}", value.Name, value.Value);
    }
    return (ManagementBaseObject) outParameters["ImportedSystem"];
} 
```

当我运行它时，返回码是`4096`，表示作业已成功启动，并且我得到了一个作业值 - 例如：

```
ImportedSystem: 
Job: \\COREI7\root\virtualization\v2:Msvm_ConcreteJob.InstanceID="B1DC90B6-14A1-42C0-924E-225660E6EC98"
ReturnValue: 4096 
```

我有以下问题：

1.  是否可以同步执行此方法？我怎么能说呢？[http://msdn.microsoft.com/en-us/library/hh850082(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/hh850082(v=vs.85).aspx)上的 MSDN 文档表明这是可能的（“如果操作同步完成”），但我不知道如何. 我的猜测是这是一个关于如何同步执行方法的一般 WMI 问题，我似乎找不到如何去做。
2.  如果我被迫做异步，我如何看那个特定的工作？我发现的一切都是关于观看流程事件或事件日志事件，但它们似乎都是我所针对的特定 WQL 事件，而不是一般的工作事件。

如果这些问题太基本，我深表歉意——我只是没有运气找到答案。

谢谢！

[编辑] 我正在考虑添加一个`ManagementOperationObserver`来告诉我它什么时候完成，虽然目前还不清楚为什么我需要强制它异步时它似乎正在这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:35:25.503

好的，所以我解决了这个问题。

首先，作业完成时出现错误。`4096`告诉我它已经开始但没有完成，因为它失败了。我仍然不知道如何从上面的代码中快速解决这个问题，但在 PowerShell 中进行实验后，我清楚地知道这就是正在发生的事情。

其次，我彻底修改了代码。可以让 Visual Studio 从服务器资源管理器生成强类型 WMI 类：http: [//msdn.microsoft.com/en-us/library/ms257357.aspx](http://msdn.microsoft.com/en-us/library/ms257357.aspx)。这样做两次以获得`ROOT.virtualization.v2.Msvm_PlannedComputerSystem.cs`并`ROOT.virtualization.v2.Msvm_VirtualSystemManagementService.cs`让我执行以下代码，这更清晰：

```
var managementScope = new ManagementScope(@"root\virtualization\v2");
using (var managementService = new VirtualSystemManagementService(WmiUtilities.GetVirtualMachineManagementService(managementScope))) {
    PlannedComputerSystem importedSystem;
    ConcreteJob job;
    var importResults = managementService.ImportSystemDefinition(
        GenerateNewSystemIdentifier: false,
        SystemDefinitionFile: filePath,
        SnapshotFolder: snapshotPath,
        ImportedSystem: out importedSystem,
        Job: out job
    );
    if (importResults != 0) {
        MessageBox.Show(String.Format("Error on import of {0}: {1}", filePath, job.ErrorDescription));
    }
} 
```

请注意，必须稍微更改生成的代码才能从`ImportSystemDefinition`调用中获取更好的强类型对象：

```
ImportedSystem = null;
Job = null;
if (outParams == null) {
    return 0;
} else {
    if (outParams.Properties["ImportedSystem"].Value != null) {
        ImportedSystem = new PlannedComputerSystem(new ManagementObject(outParams.Properties["ImportedSystem"].Value.ToString()));
    }
    if (outParams.Properties["Job"].Value != null) {
        Job = new ConcreteJob(new ManagementObject(outParams.Properties["Job"].Value.ToString;
    }
    return Convert.ToUInt32(outParams.Properties["ReturnValue"].Value);
} 
```

# microsoft-metro - Windows 8 Phone 应用程序和 Metro Style 应用程序有什么区别？

> ID：13921400
> 
> 赞同：1
> 
> 时间：2012-12-17T20:09:31.850
> 
> 标签：microsoft-metro, windows-phone-8

我将为 Windows Phone 8 开发一个应用程序。但我也想让这个应用程序在其他 Windows 8 平台上可用。想知道，它是否可以用作 Metro 风格的应用程序？否则我将不得不开发两个不同的应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T23:01:26.177

API 在某些方面相似（使用 XAML、C#、常用 WinRT 库），但存在一些显着差异。

例如：

1.  Windows Phone 中的 XAML/UI 层基于 Silverlight 堆栈，与 Windows 应用商店的不同。

2.  无法在手机上编写 WinRT HTML5/JS 应用程序（但可以使用 WebBrowserControl 来托管 HTML5 应用程序，尤其是使用 PhoneGap 等工具）。

3.  手机上没有 C++/XAML 开发（支持 C++/DirectX）。

4.  手机在 WinRT 和 .NET 中具有 Windows 应用商店中不可用的专用 API。

基本上你必须制作两个应用程序，但你应该能够在两者之间共享大量代码。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj714089 (v=vs.105).aspx...](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj714089(v=vs.105).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:15:48.287

它们是相同类型的应用程序并使用相同的 API。可能需要进行一些更改，但如果您正在寻找一般答案，那么可以，它将作为 Metro 应用程序运行，但需要进行修改。

# django - 如何不在终端中显示静态请求

> ID：13921404
> 
> 赞同：1
> 
> 时间：2012-12-17T20:09:49.430
> 
> 标签：django

是否可以在运行 django 的终端中不显示静态文件夹的输出？

有时我需要输出一些调试数据。我需要在顶部滚动才能看到它。

我正在运行多个服务器，例如 solr、celery 和 redis，并使用 tmux 来组织终端窗口。只是为了看我的指纹而在不同的窗口之间跳转是一种痛苦。

看到我需要的只是请求而不是这些垃圾会非常令人愉快：

```
[17/Dec/2012 15:02:04] "GET /static/stylesheets/screen.css?c37d260fd09cc901ba8a3c368e3c888b75b61609 HTTP/1.1" 304 0
[17/Dec/2012 15:02:04] "GET /static/js/compressed.js?79917cdacff0725b658d1af00ad192f77f61e880 HTTP/1.1" 304 0
[17/Dec/2012 15:02:04] "GET /static/css/all.css?c6cefe9dda47c84cd6a931b2a3d0f3b0528ee286 HTTP/1.1" 304 0
[17/Dec/2012 15:02:04] "GET /static/js/keyboard.js?77b4a72c5a8a35714276a7addf50bb959d036b11 HTTP/1.1" 304 0
[17/Dec/2012 15:02:04] "GET /static/css/keyboard.css HTTP/1.1" 304 0
[17/Dec/2012 15:02:04] "GET /static/css/imageflow.css HTTP/1.1" 304 0
[17/Dec/2012 15:02:04] "GET /static/js/jquery-1.6.4.min.js HTTP/1.1" 304 0
[17/Dec/2012 15:02:04] "GET /static/js/jquery-ui-1.8.16.custom.min.js HTTP/1.1" 304 0
[17/Dec/2012 15:02:04] "GET /static/images/bg-intro.gif HTTP/1.1" 304 0
[17/Dec/2012 15:02:04] "GET /static/images/bg-inner-content-c-onecolumn.png HTTP/1.1" 304 0
[17/Dec/2012 15:02:04] "GET /static/images/bg-tabset.gif HTTP/1.1" 304 0
[17/Dec/2012 15:02:04] "GET /static/images/bg-main.jpg HTTP/1.1" 304 0
[17/Dec/2012 15:02:04] "GET /static/images/menu_kanali_back.gif HTTP/1.1" 304 0
[17/Dec/2012 15:02:04] "GET /static/images/bg_country_year_filters.png HTTP/1.1" 304 0
[17/Dec/2012 15:02:04] "GET /static/images/path_kanali_back.gif HTTP/1.1" 304 0
[17/Dec/2012 15:02:04] "GET /static/images/btn_hide_countries_groups.png HTTP/1.1" 304 0
[17/Dec/2012 15:02:04] "GET /static/images/btn_apply_changes.png HTTP/1.1" 304 0
[17/Dec/2012 15:02:04] "GET /static/images/bg-inner-content-b-onecolumn.png HTTP/1.1" 304 0
[17/Dec/2012 15:02:04] "GET /static/images/kak_smotret_footer.jpg HTTP/1.1" 304 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:23:27.903

我认为 grep 可以帮助你：

```
python ./manage.py runserver 3>&1 1>&2 2>&3 3>&- | grep -v static 
```

这个想法是使用 grep 返回与给定模式不匹配的行

这是关于如何 [通过过滤器仅管道 stderr的解释](https://stackoverflow.com/questions/3618078/pipe-only-stderr-through-a-filter)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:25:44.173

也许不完全是你想要的，但它可能已经足够好了：

[https://github.com/tomchristie/django-pdb](https://github.com/tomchristie/django-pdb)

使用它将在需要时停止 django。例如在加载视图等之前。

# c - 阻塞接收的 OpenMPI 数组无法正常工作（在某些情况下程序不会停止）

> ID：13921407
> 
> 赞同：1
> 
> 时间：2012-12-17T20:09:55.733
> 
> 标签：c, mpi, distributed-computing

我认为这是一个非常奇怪的问题：我有这个代码：它应该接收一个大小为块和宽度的二维矩阵。矩阵分配使用：

```
int **alloc2d(int n, int m) {
    int i = 0;
    int *data = malloc(n * m * sizeof(int));
    int **array = malloc(n * sizeof(int *));
    for (i = 0; i < n; i++) {
        array[i] = &(data[i * m]);
    }
    return array;
} 
```

所以它是一个连续的内存块。

我有以下代码：

```
MPI_Status st;
int worker;
       for(i = 1; i < size; i++) {
        MPI_Recv(&(recmat[0][0]), chunk*width, MPI_INT, MPI_ANY_SOURCE, 1,
                                 MPI_COMM_WORLD, &st);

        worker = st.MPI_SOURCE;
      /*  for(k = worker * chunk; k < (worker + 1) * chunk; k++){
            for(j = 0; j < width; j++) {
                mat[k][j] = recmat[k - worker * chunk][j];
                }
            }*/
        } 
```

如果代码是这样的，一切都会停止并且运行良好。如果我取消注释该区域：

```
for(k = worker * chunk; k < (worker + 1) * chunk; k++){
                for(j = 0; j < width; j++) {
                    mat[k][j] = recmat[k - worker * chunk][j];
                    }
                } 
```

运行此代码的线程不会停止，我找不到对此的合理解释。也许有人可以看到错误或问题。谢谢！

recmat 分配和块计算：

```
int **recmat;
recmat = alloc2d(chunk,width);
int chunk;
chunk = height / size; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:02:14.853

对不起，这太长了，不适合评论：

您发布的代码很好；例如，在其周围放置足够的代码以使其运行会产生正确的结果（如下）。所以问题不在你认为的地方。

如果您看到代码锁定在您认为不应该锁定的地方，这通常表明存在奇怪的内存错误或其他情况。你最好只通过调试器运行它，或者通过 valgrind 之类的东西来检查内存问题。

```
#include <stdio.h>
#include <stdlib.h>
#include <mpi.h>

int **alloc2d(int n, int m) {
    int i = 0;
    int *data = malloc(n * m * sizeof(int));
    int **array = malloc(n * sizeof(int *));
    for (i = 0; i < n; i++) {
        array[i] = &(data[i * m]);
    }
    return array;
}

int main(int argc, char **argv) {

    int rank, size;
    const int height=10, width=10;

    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);

    int **recmat;
    int chunk;
    chunk = height / size;

    if (chunk*size != height) {
        fprintf(stderr, "%s: number of ranks %d does not divide size %d\n",
                     argv[0], size, height);
        MPI_Finalize();
        exit(1);
    }

    if (rank == 0) {
        int **recmat = alloc2d(chunk,width);
        int **mat = alloc2d(height,width);
        int worker;
        int i,j,k;
        MPI_Status st;

        /* deal with my own submatrix */
        for (k=0; k<chunk; k++) {
            for (j=0; j<width; j++) {
                mat[k][j] = 0;
            }
        }

        for(i = 1; i < size; i++) {
            MPI_Recv(&(recmat[0][0]), chunk*width, MPI_INT, MPI_ANY_SOURCE, 1,
                                     MPI_COMM_WORLD, &st);

            worker = st.MPI_SOURCE;
            for(k = worker * chunk; k < (worker + 1) * chunk; k++){
                for(j = 0; j < width; j++) {
                    mat[k][j] = recmat[k - worker * chunk][j];
                }
            }
        }

        free(&(recmat[0][0]));
        free(recmat);

        printf("Rank 0: mat is \n");
        for (int i=0; i<height; i++) {
            for (int j=0; j<width; j++) {
                printf("%2d ", mat[i][j]);
            }
            printf("\n");
        }

        free(&(mat[0][0]));
        free(mat);

    } else {
        int **sendmat = alloc2d(chunk,width);
        for (int i=0; i<chunk; i++)
            for (int j=0; j<width; j++)
                sendmat[i][j] = rank;

        MPI_Send(&(sendmat[0][0]), chunk*width, MPI_INT, 0, 1, MPI_COMM_WORLD);

        free(&(sendmat[0][0]));
        free(sendmat);
    }

    MPI_Finalize();

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:17:09.927

我的代码中有很多错误和错误，甚至不值得一提，我很抱歉这个无用的问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T08:35:22.977

这也是一个较长的评论。如果您首先探测消息，然后使用状态中的排名直接将消息的内容接收到大矩阵中，则可以防止接收数据的重复复制：

```
for(i = 1; i < size; i++) {
    MPI_Probe(MPI_ANY_SOURCE, 1, MPI_COMM_WORLD, &st);
    worker = st.MPI_SOURCE;
    MPI_Recv(&(mat[worker*chunk][0]), chunk*width, MPI_INT,
             worker, 1, MPI_COMM_WORLD, &st);
} 
```

更少的代码，应该更快地工作。

# php - LinkedIn API 使用 php oauth 类发布共享

> ID：13921412
> 
> 赞同：2
> 
> 时间：2012-12-17T20:10:20.200
> 
> 标签：php, linkedin

细节：

1.  我正在使用 Manuel Lemos php oauth 类和 login_with_linkedin.php 脚本作为参考。

2.  我已成功完成 oauth 流程并使用 API 'http://api.linkedin.com/v1/people/~' 检索用户信息

3.  使用 Post Shares API (http://api.linkedin.com/v1/people/~/shares) 时出现错误

这是我上次尝试失败的相关代码；

```
// Scope settings

 $client->scope = 'r_fullprofile r_emailaddress r_network rw_nus';

// Call to API (Post)

$success = $client->CallAPI(
  'http://api.linkedin.com/v1/people/~/shares', 
  'POST', array(
      "format"=>"json",
      "comment"=> "Test"
   ), array('FailOnAccessError'=>true), $user); 
```

这是错误消息：

`Error: it was not possible to access the API call: it was returned an unexpected response status 401 Response: { "errorCode": 0, "message": "Unknown authentication scheme", "requestId": "8DWA0EBJTB", "status": 401, "timestamp": 1355774186502 }`

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:07:51.950

我也在班级创建者的论坛上发布了同样的问题。他给了我一个有效的答案。

答案可以在这里找到： [http ://www.phpclasses.org/discuss/package/7700/thread/22/](http://www.phpclasses.org/discuss/package/7700/thread/22/)

# hadoop - HBase 可以像 Hadoop 一样访问文本文档和 CSV 文档吗？

> ID：13921414
> 
> 赞同：0
> 
> 时间：2012-12-17T20:10:25.527
> 
> 标签：hadoop, nosql, hbase

在 Hadoop 中，我可以轻松创建 Map/Reduce 应用程序来访问和处理大型文本文件和 csv 文件中的数据。我的问题是 Hbase 可以做同样的事情并访问这么大的文件，还是 HBase 有其他用途？

Hbase 像关系数据库一样运行查询；所以，我很难理解 HBase 的优势，除非它可以像 Hadoop 一样访问巨大的文本和 csv 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:34:22.577

首先，Hbase 只是一个商店。商店从不访问任何东西。相反，您访问商店以获取或放置数据。与任何其他数据存储一样，Hbase 只有一项工作要做，即存储您的数据并在您需要时提供给您。您可以编写 MapReduce 作业或顺序 Java 程序等以将数据放入 Hbase 或从中获取数据。你喜欢哪条路完全取决于你。

谈到问题的第二部分，Hbase 从来没有像传统的关系数据库那样工作。从存储数据到访问数据，一切都是完全不同的。使用 Hbase 的优点是您可以将非常大量的数据存储到其中并具有随机读/写访问权限。数据可以是任何类型，即。text, csv, tsv, binary 等。但是，在继续之前，您必须先考虑 Hbase 是否适合您，因为一种尺寸并不适合所有人。

高温高压

# .net - 在不同级别具有 InotifyPropertyChanged 的 简单 MVVM

> ID：13921416
> 
> 赞同：1
> 
> 时间：2012-12-17T20:10:28.330
> 
> 标签：.net, vb.net, wcf, mvvm

我是像 MVVM 这样的深度编码的新手，在[MSDN Simple MVVM page 页面上](http://msdn.microsoft.com/en-us/library/hh563947.aspx)，模型类是在没有 INotifyPropertyChanged 的​​情况下定义的，只有它使用的 VIEWModelBase。

主要代码如下（代码是从提到的页面复制的）：

```
Namespace SimpleMVVM.Model

    Public Class Customer
        Public Property CustomerID() As Integer 
        Public Property FullName() As String 
        Public Property Phone() As String 
    End Class 
End Namespace

Namespace SimpleMVVM.Model
    Public Class CustomerRepository
        Private _customers As List(Of Customer)

        Public Sub New()
            _customers = New List(Of Customer) From
            {
                New Customer() With {.CustomerID = 1, .FullName = "Dana Birkby", .Phone = "394-555-0181"},
                New Customer() With {.CustomerID = 2, .FullName = "Adriana Giorgi", .Phone = "117-555-0119"},
                New Customer() With {.CustomerID = 3, .FullName = "Wei Yu", .Phone = "798-555-0118"}
            }
        End Sub 

        Public Function GetCustomers() As List(Of Customer)
            Return _customers
        End Function 

        Public Sub UpdateCustomer(SelectedCustomer As Customer)
            Dim customerToChange = _customers.Single(Function(c) c.CustomerID = SelectedCustomer.CustomerID)
            customerToChange = SelectedCustomer
        End Sub 
    End Class 
End Namespace

Imports System.ComponentModel

Namespace SimpleMVVM.ViewModel

    Public MustInherit Class ViewModelBase
        Implements INotifyPropertyChanged

        Public Event PropertyChanged As PropertyChangedEventHandler Implements INotifyPropertyChanged.PropertyChanged

        Protected Overridable Sub OnPropertyChanged(propname As String)
            RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(propname))
        End Sub 
    End Class 
End Namespace

Imports System.Collections.Generic
Imports SimpleMVVM.Model

Namespace SimpleMVVM.ViewModel

    Public Class CustomerViewModel
        Inherits ViewModelBase

        Private _customers As List(Of Customer)
        Private _currentCustomer As Customer
        Private _repository As CustomerRepository
        Private _updateCustomerCommand As RelayCommand

        Public Sub New()
            _repository = New CustomerRepository()
            _customers = _repository.GetCustomers()

            WireCommands()
        End Sub 

        Private Sub WireCommands()
            UpdateCustomerCommand = New RelayCommand(AddressOf UpdateCustomer)
        End Sub 

        Public Property UpdateCustomerCommand() As RelayCommand
            Get 
                Return _updateCustomerCommand
            End Get 
            Private Set(value As RelayCommand)
                _updateCustomerCommand = value
            End Set 
        End Property 

        Public Property Customers() As List(Of Customer)
            Get 
                Return _customers
            End Get 
            Set(value As List(Of Customer))
                _customers = value
            End Set 
        End Property 

        Public Property CurrentCustomer() As Customer
            Get 
                Return _currentCustomer
            End Get 
            Set(value As Customer)
                If _currentCustomer.Equals(value) Then
                    _currentCustomer = value
                    OnPropertyChanged("CurrentCustomer")
                    UpdateCustomerCommand.IsEnabled = True 
                End If 
            End Set 
        End Property 

        Public Sub UpdateCustomer()
            _repository.UpdateCustomer(CurrentCustomer)
        End Sub 
    End Class 
End Namespace 
```

1.  我的问题是，与在 viewmodelbase 中的 CustomerOBject 上实现的 INotifyproperty 相比，在类客户中的每个属性上实现的 INotifypropertychanged 的​​ INotifyPropertyChanged 效果是否相同。

2.  在第二种情况下，当客户对象仅修改一个属性值时，例如 CurrentCustomer.FullName="asdasd" 是否会引发每个属性的 Inotifypropertychanged 事件？

3.  Viewmodelclass 可以像 datacontract 一样通过 WCF 发送，或者 datacontract 仅适用于没有 InotifyPropertyChanged 的​​ Modelclass

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:17:56.527

我将尝试回答您的问题：

1.  在您的类/视图模型上实现 INotifyPropertyChanged。您要发送通知的所有属性都必须调用 OnPropertyChanged("YourPropertyName");

2.  不，只要调用 OnPropertyChanged("YourPropertyName"); ，只会影响已更改的属性。

3.  您可以发送一个带有 [DataContract] 属性的视图模型，但您确实应该对您的模型执行此操作。

# c - 不需要的输出 c 程序

> ID：13921420
> 
> 赞同：1
> 
> 时间：2012-12-17T20:10:53.210
> 
> 标签：c, io, printf

我编写了一个程序，它以两个整数（m 和 n）作为输入，然后将它们之间的所有素数写入文件。我希望输出看起来整洁，所以我使用字段宽度修饰符打印每个数字 7 个空格，并且每行只打印 10 个。除了第一行，输出与预期的一样，第一行只打印了 9 个数字。
这是代码：

```
#include <stdio.h>
#include <math.h>

#define SIZE 100000000

char primes[SIZE];

void seive(void)
{
    int i, j;
    primes[1] = primes[0] = 1;
    for (i=3;i<=sqrt(SIZE);i+=2)           
        if (primes[i] == 1)
            continue;
        else 
            for (j=i*i;j<SIZE;j+=2*i)
                primes[j] = 1;
}

int main()
{
    int n, m, count;
    FILE *fp;
    fp = fopen("test.txt", "w");
    seive();
    scanf("%d %d", &m, &n);
    count = 0;
    if (m <= 2) {
       fprintf(fp, "%7d ", 2);
       count++;
       }
    if (!(m & 1))
       m++;
    for (m;m<=n;m+=2) {
        if (!primes[m]) {
           count++;
           if (count == 10) {
              fprintf(fp, "\n");
              count = 0;
           }
           fprintf(fp, "%7d ", m);
        }
    }
    return 0;
} 
```

这是输入 1 300 的输出：

```
 2       3       5       7      11      13      17      19      23 
     29      31      37      41      43      47      53      59      61      67 
     71      73      79      83      89      97     101     103     107     109 
    113     127     131     137     139     149     151     157     163     167 
    173     179     181     191     193     197     199     211     223     227 
    229     233     239     241     251     257     263     269     271     277 
    281     283     293 
```

正如你所看到的，第一行只打印了九个数字，但在它之后是它应该做的。我很困惑。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:16:16.950

我认为这与在循环中打印输出之前打印换行符有关。

将其更改为：

```
for (m;m<=n;m+=2) {
    if (!primes[m]) {
       count++;

       fprintf(fp, "%7d ", m);

       if (count == 10/*&& you're going to print more numbers*/) {
          fprintf(fp, "\n");
          count = 0;
       }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:14:46.537

```
count = 0;
if (m <= 2) {
   fprintf(fp, "%7d ", 2);
   count++;
   } 
```

这会开始一行，打印一个条目，然后递增`count`到 1。

```
 if (!primes[m]) {
       count++;
       if (count == 10) {
          fprintf(fp, "\n");
          count = 0;
       }
       fprintf(fp, "%7d ", m); 
```

这开始一行，打印一个条目，然后设置`count`为零。

由于两个代码部分设置`count`为不同的值（减一），因此每行产生不同数量的条目（减一）。

# python - 从应用程序中捕获完整请求

> ID：13921426
> 
> 赞同：2
> 
> 时间：2012-12-17T20:11:11.383
> 
> 标签：python, curl

我正在编写一个 Python 应用程序，它查询多个网络服务器，每台服务器每分钟一次。该应用程序可以正常运行几分钟，然后所有服务器开始响应并出现以下错误：

> 发生以下 cURL 错误：请求的 URL 返回错误：400 Bad Request

发生这种情况时，我看到我的输出带宽挂钩和两个 CPU 内核都在 80% 以上工作（这台机器上的负载通常非常轻）。但是，内存使用不会受到显着影响。

有没有办法捕获从特定应用程序发送的所有请求的整个请求？或者，在 Python 中，我可以捕获完整的请求，然后将其输出回来以进行调试吗？这是查询服务器的代码部分：

```
output = cStringIO.StringIO()
c = pycurl.Curl()
c.setopt(c.URL, url)
c.setopt(c.USERAGENT, 'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:17.0) Gecko/20100101 Firefox/17.0')
c.setopt(c.WRITEFUNCTION, output.write)
c.setopt(c.CONNECTTIMEOUT, 10) 
c.setopt(c.TIMEOUT, 15) 
c.setopt(c.FAILONERROR, True)
c.setopt(c.NOSIGNAL, 1)

try:
    c.perform()
    toReturn = output.getvalue()
    output.close()
    return toReturn

except pycurl.error, error:
    errno, errstr = error
    print 'The following cURL error occurred: ', errstr 
```

该机器是具有 6 GiB RAM 的双核 2.0 GHz Intel 机器，运行 Kubuntu 12.10 和 Python 2.7。一切都是用 VIM 编码的，所以没有乱七八糟的 IDE 代码乱跑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:34:08.457

> 有没有办法捕获从特定应用程序发送的所有请求的整个请求？

捕获和监控所有传入/传出流量（包括从应用程序发送的请求）的最简单方法是使用[wireshark](http://www.wireshark.org/)

> 或者，在 Python 中，我可以捕获完整的请求，然后将其输出回来以进行调试吗？

您可以添加以下调试选项，以便 curl 打印有关请求的一些有用信息：

> c.setopt(pycurl.VERBOSE, 1)

# javascript - 在锚点内选择 div

> ID：13921430
> 
> 赞同：0
> 
> 时间：2012-12-17T20:11:25.690
> 
> 标签：javascript, jquery, html, anchor

如何在锚标签内选择 div 标签。考虑以下 HTML。

```
<a target="_new" href="https://stackoverflow.com/12.mp4"
       data-placement="top" rel="tooltip" 
       title="Video (MP4)" >
       <div class="hidden">Interesting 12</div>
    </a> 
```

我必须选择所有指向视频资源的锚标签。我可以选择锚标签。现在如何选择其中的分区并获取文本？

```
$("a").each(function() {
    var link = $(this).attr('href');
    if (typeof link == "string" && link.indexOf(".mp4") > 0) {
        alert(link);
    }
})​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:13:44.697

```
$('a[href*=".mp4"]').each(function() {
   alert( this.href );
   $(this).find('div.hidden').text();
}); 
```

或者

```
$("a").each(function() {
    var link = $(this).attr('href');
    if (typeof link == "string" && link.indexOf(".mp4") > 0) {
        alert(link);

        $(this).find('div.hidden').text();
        // OR
        $('div.hidden', this).text();
    }
})​; 
```

### 笔记

放置一个`div`内锚标记是无效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:14:08.410

使用`.find('div')`或`.find('.hidden')`之后`$('a')`

[http://api.jquery.com/find/](http://api.jquery.com/find/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T20:14:38.727

```
$("a").each(function(){
    $(this).find('div').each(function(){
        ....
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T20:14:40.703

采用[`.find()`](http://api.jquery.com/find/)

```
$("a").each(function() {
    var link = $(this).attr('href');
    if (typeof link == "string" && link.indexOf(".mp4") > 0) {
        alert(link);
    }

    // get the div
    var divText = $(this).find('div').text();

})​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T20:30:43.260

```
$("a").each(function() {

    var link = $(this).attr('href');

    a=link.length;

    var filetype=link[a-3]+link[a-2]+link[a-1]

    if(link[a-4] == '.' && filetype=='mp4') //you can check more extensions here using ||.
      $(this).find('.hidden').text()          

}) 
```

# objective-c - 是否可以在配置文件方向上同时显示主要和详细信息？

> ID：13921432
> 
> 赞同：0
> 
> 时间：2012-12-17T20:11:27.063
> 
> 标签：objective-c, ios, xcode, master-detail

当我使用风景时，我可以看到我的主人和细节彼此相邻。是否可以让轮廓方向工作完全相同？我的细节视图很小，不需要占据整个窗口，如果在主视图中没有选择任何项目，显示细节视图甚至没有意义。

我在这里专门谈论iPad。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:27:14.020

只需实现下面的 UISplitViewControllerDelegate 方法：

```
- (BOOL)splitViewController:(UISplitViewController *)svc shouldHideViewController:(UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation {
    return NO;
} 
```

# web-services - 拦截器中断 web 服务 ssl 连接

> ID：13921440
> 
> 赞同：2
> 
> 时间：2012-12-17T20:11:59.887
> 
> 标签：web-services, jakarta-ee, ssl, glassfish, interceptor

我有一个使用 ssl（glassfish 3.1.2 和 jax-ws）保护的 ejb 端点 web 服务我正在使用拦截器记录用户活动：

```
@Statless
public class WebServiceInterceptor {

    @Resource
    WebServiceContext wsContext;

    @AroundInvoke
    protected Object audit(InvocationContext ctx) throws Exception {

        MessageContext mc = wsContext.getMessageContext();

        try {
            Principal principal = wsContext.getUserPrincipal();
            user = principal.getName();
            System.out.println("user:" + user);
        } catch (Exception e) {
            System.out.println("log faild!");
        }
} 
```

当拦截器被触发时，我得到这个异常：

```
ATTENTION: invocation error on ejb endpoint Oculus_ws_v1 at /mywebservice/mywebservice : com.ctc.wstx.exc.WstxIOException: null
javax.xml.ws.WebServiceException: com.ctc.wstx.exc.WstxIOException: null
    at com.sun.xml.ws.encoding.StreamSOAPCodec.encode(StreamSOAPCodec.java:130)
    at com.sun.xml.ws.security.encoding.LazyStreamCodec.encode(LazyStreamCodec.java:88)
    at com.sun.xml.ws.encoding.SOAPBindingCodec.encode(SOAPBindingCodec.java:285)
    at com.sun.xml.ws.transport.http.HttpAdapter.encodePacket(HttpAdapter.java:421)
    at com.sun.xml.ws.transport.http.HttpAdapter.access$100(HttpAdapter.java:99)
    at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:650)
    at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:263)
    at com.sun.xml.ws.transport.http.servlet.ServletAdapter.handle(ServletAdapter.java:163)
    at org.glassfish.webservices.Ejb3MessageDispatcher.handlePost(Ejb3MessageDispatcher.java:120)
    at org.glassfish.webservices.Ejb3MessageDispatcher.invoke(Ejb3MessageDispatcher.java:91)
    at org.glassfish.webservices.EjbWebServiceServlet.dispatchToEjbEndpoint(EjbWebServiceServlet.java:200)
    at org.glassfish.webservices.EjbWebServiceServlet.service(EjbWebServiceServlet.java:131)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at com.sun.grizzly.http.servlet.ServletAdapter$FilterChainImpl.doFilter(ServletAdapter.java:1059)
    at com.sun.grizzly.http.servlet.ServletAdapter$FilterChainImpl.invokeFilterChain(ServletAdapter.java:999)
    at com.sun.grizzly.http.servlet.ServletAdapter.doService(ServletAdapter.java:434)
    at com.sun.grizzly.http.servlet.ServletAdapter.service(ServletAdapter.java:384)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)
Caused by: com.ctc.wstx.exc.WstxIOException: null
    at com.ctc.wstx.sw.BaseStreamWriter.flush(BaseStreamWriter.java:263)
    at com.sun.xml.ws.util.xml.XMLStreamWriterFilter.flush(XMLStreamWriterFilter.java:71)
    at com.sun.xml.ws.streaming.XMLStreamWriterUtil.getOutputStream(XMLStreamWriterUtil.java:103)
    at com.sun.xml.ws.message.jaxb.JAXBMessage.writePayloadTo(JAXBMessage.java:382)
    at com.sun.xml.ws.security.opt.impl.message.SOAPBody.writePayload(SOAPBody.java:132)
    at com.sun.xml.ws.security.opt.impl.message.SOAPBody.writeTo(SOAPBody.java:166)
    at com.sun.xml.ws.security.opt.impl.message.SecuredMessage.writeTo(SecuredMessage.java:364)
    at com.sun.xml.ws.security.opt.impl.message.MessageWrapper.writeTo(MessageWrapper.java:355)
    at com.sun.xml.ws.encoding.StreamSOAPCodec.encode(StreamSOAPCodec.java:127)
    ... 34 more
Caused by: ClientAbortException:  java.io.IOException: SSLOutputWriter: CLOSED
    at com.sun.grizzly.tcp.http11.GrizzlyOutputBuffer.doFlush(GrizzlyOutputBuffer.java:439)
    at com.sun.grizzly.tcp.http11.GrizzlyOutputBuffer.flush(GrizzlyOutputBuffer.java:405)
    at com.sun.grizzly.tcp.http11.GrizzlyOutputStream.flush(GrizzlyOutputStream.java:140)
    at com.sun.grizzly.http.servlet.ServletOutputStreamImpl.flush(ServletOutputStreamImpl.java:100)
    at com.ctc.wstx.io.UTF8Writer.flush(UTF8Writer.java:103)
    at com.ctc.wstx.sw.BufferingXmlWriter.flush(BufferingXmlWriter.java:225)
    at com.ctc.wstx.sw.BaseStreamWriter.flush(BaseStreamWriter.java:261)
    ... 42 more
Caused by: java.io.IOException: SSLOutputWriter: CLOSED
    at com.sun.grizzly.util.SSLOutputWriter.flushChannel(SSLOutputWriter.java:98)
    at com.sun.grizzly.ssl.SSLOutputBuffer.flushChannel(SSLOutputBuffer.java:138)
    at com.sun.grizzly.http.SocketChannelOutputBuffer.flushBuffer(SocketChannelOutputBuffer.java:498)
    at com.sun.grizzly.http.SocketChannelOutputBuffer.flush(SocketChannelOutputBuffer.java:476)
    at com.sun.grizzly.http.ProcessorTask.action(ProcessorTask.java:1287)
    at com.sun.grizzly.ssl.SSLProcessorTask.action(SSLProcessorTask.java:164)
    at com.sun.grizzly.tcp.Response.action(Response.java:268)
    at com.sun.grizzly.tcp.http11.GrizzlyOutputBuffer.doFlush(GrizzlyOutputBuffer.java:434)
    ... 48 more

INFO: user:super_hd
ATTENTION: invocation error on ejb endpoint Oculus_ws_v1 at /Oculus_ws_v1/Oculus_ws_v1 : com.ctc.wstx.exc.WstxIOException: null
javax.xml.ws.WebServiceException: com.ctc.wstx.exc.WstxIOException: null
    at com.sun.xml.ws.encoding.StreamSOAPCodec.encode(StreamSOAPCodec.java:130)
    at com.sun.xml.ws.security.encoding.LazyStreamCodec.encode(LazyStreamCodec.java:88)
    at com.sun.xml.ws.encoding.SOAPBindingCodec.encode(SOAPBindingCodec.java:285)
    at com.sun.xml.ws.transport.http.HttpAdapter.encodePacket(HttpAdapter.java:421)
    at com.sun.xml.ws.transport.http.HttpAdapter.access$100(HttpAdapter.java:99)
    at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:650)
    at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:263)
    at com.sun.xml.ws.transport.http.servlet.ServletAdapter.handle(ServletAdapter.java:163)
    at org.glassfish.webservices.Ejb3MessageDispatcher.handlePost(Ejb3MessageDispatcher.java:120)
    at org.glassfish.webservices.Ejb3MessageDispatcher.invoke(Ejb3MessageDispatcher.java:91)
    at org.glassfish.webservices.EjbWebServiceServlet.dispatchToEjbEndpoint(EjbWebServiceServlet.java:200)
    at org.glassfish.webservices.EjbWebServiceServlet.service(EjbWebServiceServlet.java:131)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at com.sun.grizzly.http.servlet.ServletAdapter$FilterChainImpl.doFilter(ServletAdapter.java:1059)
    at com.sun.grizzly.http.servlet.ServletAdapter$FilterChainImpl.invokeFilterChain(ServletAdapter.java:999)
    at com.sun.grizzly.http.servlet.ServletAdapter.doService(ServletAdapter.java:434)
    at com.sun.grizzly.http.servlet.ServletAdapter.service(ServletAdapter.java:384)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)
Caused by: com.ctc.wstx.exc.WstxIOException: null
    at com.ctc.wstx.sw.BaseStreamWriter.flush(BaseStreamWriter.java:263)
    at com.sun.xml.ws.util.xml.XMLStreamWriterFilter.flush(XMLStreamWriterFilter.java:71)
    at com.sun.xml.ws.streaming.XMLStreamWriterUtil.getOutputStream(XMLStreamWriterUtil.java:103)
    at com.sun.xml.ws.message.jaxb.JAXBMessage.writePayloadTo(JAXBMessage.java:382)
    at com.sun.xml.ws.security.opt.impl.message.SOAPBody.writePayload(SOAPBody.java:132)
    at com.sun.xml.ws.security.opt.impl.message.SOAPBody.writeTo(SOAPBody.java:166)
    at com.sun.xml.ws.security.opt.impl.message.SecuredMessage.writeTo(SecuredMessage.java:364)
    at com.sun.xml.ws.security.opt.impl.message.MessageWrapper.writeTo(MessageWrapper.java:355)
    at com.sun.xml.ws.encoding.StreamSOAPCodec.encode(StreamSOAPCodec.java:127)
    ... 34 more
Caused by: ClientAbortException:  java.io.IOException: SSLOutputWriter: CLOSED
    at com.sun.grizzly.tcp.http11.GrizzlyOutputBuffer.doFlush(GrizzlyOutputBuffer.java:439)
    at com.sun.grizzly.tcp.http11.GrizzlyOutputBuffer.flush(GrizzlyOutputBuffer.java:405)
    at com.sun.grizzly.tcp.http11.GrizzlyOutputStream.flush(GrizzlyOutputStream.java:140)
    at com.sun.grizzly.http.servlet.ServletOutputStreamImpl.flush(ServletOutputStreamImpl.java:100)
    at com.ctc.wstx.io.UTF8Writer.flush(UTF8Writer.java:103)
    at com.ctc.wstx.sw.BufferingXmlWriter.flush(BufferingXmlWriter.java:225)
    at com.ctc.wstx.sw.BaseStreamWriter.flush(BaseStreamWriter.java:261)
    ... 42 more
Caused by: java.io.IOException: SSLOutputWriter: CLOSED
    at com.sun.grizzly.util.SSLOutputWriter.flushChannel(SSLOutputWriter.java:98)
    at com.sun.grizzly.ssl.SSLOutputBuffer.flushChannel(SSLOutputBuffer.java:138)
    at com.sun.grizzly.http.SocketChannelOutputBuffer.flushBuffer(SocketChannelOutputBuffer.java:498)
    at com.sun.grizzly.http.SocketChannelOutputBuffer.flush(SocketChannelOutputBuffer.java:476)
    at com.sun.grizzly.http.ProcessorTask.action(ProcessorTask.java:1287)
    at com.sun.grizzly.ssl.SSLProcessorTask.action(SSLProcessorTask.java:164)
    at com.sun.grizzly.tcp.Response.action(Response.java:268)
    at com.sun.grizzly.tcp.http11.GrizzlyOutputBuffer.doFlush(GrizzlyOutputBuffer.java:434)
    ... 48 more 
```

如果我禁用 ssl 加密或评论`wsContext.getUserPrincipal();`一切运行正常。谢谢

编辑1：如果我调用此方法，这与拦截器的使用无关：

```
 @Resource
    WebServiceContext wsContext;

    @WebMethod(operationName = "hello")
    public String hello(@WebParam(name = "name") String txt) {
        System.out.println("ws context:" + wsContext.getUserPrincipal());

        return "Hello " + txt + " !";
    } 
```

我得到几乎相同的例外

```
ATTENTION: processorTask.exceptionSSLcert
javax.net.ssl.SSLException: SSLEngine is closing/closed
    at com.sun.net.ssl.internal.ssl.SSLEngineImpl.kickstartHandshake(SSLEngineImpl.java:656)
    at com.sun.net.ssl.internal.ssl.SSLEngineImpl.beginHandshake(SSLEngineImpl.java:689)
    at com.sun.grizzly.util.SSLUtils.doPeerCertificateChain(SSLUtils.java:563)
    at com.sun.grizzly.filter.SSLReadFilter.doPeerCertificateChain(SSLReadFilter.java:340)
    at com.sun.grizzly.ssl.SSLProcessorTask.action(SSLProcessorTask.java:153)
    at com.sun.grizzly.tcp.Request.action(Request.java:430)
    at com.sun.grizzly.tcp.http11.GrizzlyRequest.getAttribute(GrizzlyRequest.java:835)
    at com.sun.grizzly.tcp.http11.GrizzlyRequest.getUserPrincipal(GrizzlyRequest.java:1845)
    at com.sun.grizzly.http.servlet.HttpServletRequestImpl.getUserPrincipal(HttpServletRequestImpl.java:906)
    at com.sun.xml.ws.transport.http.servlet.ServletConnectionImpl.getUserPrincipal(ServletConnectionImpl.java:219)
    at com.sun.xml.ws.server.AbstractWebServiceContext.getUserPrincipal(AbstractWebServiceContext.java:84)
    at org.glassfish.webservices.WebServiceContextImpl.getUserPrincipal(WebServiceContextImpl.java:112)
    at Ws.PocWS.hello(PocWS.java:32) 
```

任何解决方法都会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:46:03.900

显然这是一种奇怪但没有错误的行为。

如果在使用 ssl/jax-ws 加密时调用 getPrincipal() ，则容器会自动“切换”到相互 ssl authentification 。结果这会破坏整个事情，因为我没有在客户端配置密钥库。可以在[此处找到解决方法](http://java.net/jira/browse/GRIZZLY-1385)

# regex - 正则表达式 RedirectMatch 以删除问号和查询字符串参数

> ID：13921442
> 
> 赞同：0
> 
> 时间：2012-12-17T20:12:13.977
> 
> 标签：regex, .htaccess, redirect, joomla

我有一个不再使用日历组件的 Joomla 站点，我需要将所有旧 URL 重定向回主页。网址看起来像这样...

```
http://www.example.com/week/?date=2006-03-05&print=1&tmpl=component
http://www.example.com/week/?date=2010-09-12
http://www.example.com/week/?date=2007-04-01&print=1&tmpl=component 
```

我尝试在 .htaccess 文件中编写 RedirectMatch 以删除域之后的所有内容，但我只能从 URL 中删除 week/，问号和参数仍然存在。这会导致某些参数出现问题，这些参数会删除模板、模块或格式化页面以进行打印。

任何人都可以提出解决方案吗？这是我到目前为止尝试过的...

```
RedirectMatch 301 ^/week/\?.* http://www.example.com
RedirectMatch 301 ^/week/\?(.*) http://www.example.com
RedirectMatch 301 ^/week/\?+.+ http://www.example.com
RedirectMatch 301 ^/week/\?+(.*) http://www.example.com 
```

并且没有打开插入符号的相同规则......

```
RedirectMatch 301 /week/\?.* http://www.example.com
RedirectMatch 301 /week/\?(.*) http://www.example.com
RedirectMatch 301 /week/\?+.+ http://www.example.com
RedirectMatch 301 /week/\?+(.*) http://www.example.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:15:40.877

**编辑：**

对于网址：

```
http://example.com/week/?date=2010-09-12 
```

你可以试试这个规则：

```
 RewriteEngine on
 RewriteRule ^.*week/?$ www.example.com [R] 
```

# client - OpenJMS - 客户端端口号

> ID：13921443
> 
> 赞同：4
> 
> 时间：2012-12-17T20:12:15.160
> 
> 标签：client, client-server, jms, port, openjms

关于 Bart 在[NAT 路由器中阻止 JMS 消息](https://stackoverflow.com/questions/13455209/nat-router-blocking-jms-messages)的问题， 我试图找到客户端接收 openJMS 消息的端口号。在网上搜索年龄后，我只能找到有关服务器端口的信息，在客户端上什么也没有。这是一个 tcp 连接。

如果有人能指出我正确的方向，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T02:35:50.663

通常，每个新连接的客户端端口号都会不同。**我找不到任何证据表明 OpenJMS 客户端在与服务器通信时使用特定的端口号。**这里有一些解释。

1.  [端口号](http://publib.boulder.ibm.com/infocenter/cicsts/v3r1/index.jsp?topic=/com.ibm.cics.ts31.doc/dfhtl/topics/dfhtl2d.htm)

    > 当客户端进程第一次联系服务器进程时，它可能会使用一个众所周知的端口号来发起通信。众所周知的端口号由互联网编号分配机构 IANA 分配给整个互联网的特定服务。众所周知的端口号在 0 到 1023 的范围内。
    > 
    > 众所周知的端口仅用于在客户端和服务器进程之间建立通信。完成此操作后，服务器会分配一个临时端口号以供后续使用。临时端口号是在进程开始通信时动态分配的唯一端口号。它们在通信完成时被释放。

2.  [TCP/IP 客户端（临时）端口和客户端/服务器应用程序端口使用](http://www.tcpipguide.com/free/t_TCPIPClientEphemeralPortsandClientServerApplicatio.htm)

    > 相反，服务器响应客户端；他们不主动与他们联系。因此，客户端不需要使用保留的端口号。事实上，这确实是一种轻描淡写的说法：服务器***不应该*** 使用众所周知的或注册的端口号将响应发送回客户端。原因是特定设备有可能在同一台机器上运行相同协议的客户端和服务器软件。如果服务器在其机器的端口 80 上接收到 HTTP 请求并将回复发送回客户端机器上的端口 80，则它将回复发送到客户端机器的 HTTP***服务器*** 进程（如果存在）而不是发送的客户端进程最初的请求。
    > 
    > 要知道将回复发送到哪里，服务器必须知道客户端正在使用的端口号。这由客户端作为请求中的源端口提供，然后由服务器用作目标端口来发送回复。客户端进程不使用众所周知的或注册的端口。相反，每个客户端进程都分配有一个临时端口号供其使用。这通常称为临时端口号。

3.  另一个问题的类似答案：[如何决定互联网上客户端和服务器通信之间的端口号](https://stackoverflow.com/questions/9788636/how-to-decide-on-port-number-between-client-and-server-communication-on-internet)：

    > 此外，客户端可以连接到同一端口上的许多服务器。当客户端连接时，他们将在那里使用一个随机端口。
    > 
    > 只有服务器需要担心使用空闲端口，客户端需要知道这个端口是什么，否则他们将无法连接到您的服务器。

其他可能的帮助：

*   [如何查找正在使用的临时端口的数量？](https://stackoverflow.com/questions/10237419/how-to-find-number-of-ephemeral-ports-in-use)

# objective-c - 尝试通过快速枚举 NSMutableArray 将 UILabel 动态添加到视图

> ID：13921446
> 
> 赞同：1
> 
> 时间：2012-12-17T20:12:36.370
> 
> 标签：objective-c, ios, cocoa-touch, nsmutablearray, fast-enumeration

我有一个包含 Person 类型对象的 NSMutableArray。Person 对象包含 NSString *name、NSString *dateStamp 和 NSString *testScore 的参数。我想使用快速枚举做的是将每个对象的参数显示为视图中的一行上的 UILabel，每个对象都显示在每一行上。

问题是 NSMutableArray 可能包含任意数量的对象，因此视图上可能有一两行标签，或者视图上有几行。我想创建一个 for 循环，该循环将动态填充视图中的每个对象在一行上（并且始终保持间距），并允许用户向下滚动以查看任何更向下且最初无法在屏幕上看到的行.

我的 for 循环如下所示：

```
for (Person *checkPerson in personList) {
    UILabel *label1 =  [[UILabel alloc] initWithFrame: CGRectMake(10, 10, 50, 20)];
    label1.text = Person.name;

    UILabel *label2 =  [[UILabel alloc] initWithFrame: CGRectMake(70, 10, 50, 20)];
    label2.text = Person.dateStamp;

    UILabel *label3 =  [[UILabel alloc] initWithFrame: CGRectMake(130, 10, 50, 20)];
    label3.text = Person.testScore;

    [self.view addSubView:label1];
    [self.view addSubView:label2]; 
    [self.view addSubView:label3];
 } 
```

我需要做的是动态调整 CGRectMake 字段中的“y”值，以便每个对象在 NSMutableArray 迭代时依次向下移动到另一行，这样用户可以向下滚动以进一步查看其他行，如果必要的。滚动功能是自动添加的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:16:18.020

你应该做块枚举，因为这也给你一个索引，你可以用它来计算`y`

```
[personList enumerateObjectsUsingBlock:^(Person *person, NSUInteger idx, BOOL *stop) {
    UILabel *label1 =  [[UILabel alloc] initWithFrame: CGRectMake(10, 10+20*idx , 50, 20)];
    label1.text = person.name;
    UILabel *label2 =  [[UILabel alloc] initWithFrame: CGRectMake(70, 10+20 *idx, 50, 20)];
    label2.text = person.dateStamp;

    UILabel *label3 =  [[UILabel alloc] initWithFrame: CGRectMake(130, 10+20*idx, 50, 20)];
    label3.text = person.testScore;

    [self.view addSubView:label1];
    [self.view addSubView:label2]; 
    [self.view addSubView:label3];
}]; 
```

您应该将它们放在 UIScrollView 上，根据数组中元素的数量在其中设置 contentSize。

```
scrollView.contentSize = CGSizeMake(<width>, [personList count] / 3 *30); 
```

* * *

您还应该考虑使用 UITableView。这可能更容易，并且单元重用可以保持较低的内存使用率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:34:33.153

只需在您的代码中添加一个`y`变量并在每次迭代后增加它

```
CGFloat y = 10;
for (Person *checkPerson in personList) {
    UILabel *label1 =  [[UILabel alloc] initWithFrame: CGRectMake(10, y, 50, 20)];
    label1.text = Person.name;

    UILabel *label2 =  [[UILabel alloc] initWithFrame: CGRectMake(70, y, 50, 20)];
    label2.text = Person.dateStamp;

    UILabel *label3 =  [[UILabel alloc] initWithFrame: CGRectMake(130, y, 50, 20)];
    label3.text = Person.testScore;

    [self.view addSubView:label1];
    [self.view addSubView:label2]; 
    [self.view addSubView:label3];

    y+=80;
 } 
```

但正如其他人所说，一个 UITableView 注定要完成这样的任务：D

# javascript - Dojox 工具提示不会在鼠标悬停时显示

> ID：13921447
> 
> 赞同：2
> 
> 时间：2012-12-17T20:12:38.697
> 
> 标签：javascript, charts, dojo, tooltip

使用 dojo 工具包渲染一个简单的折线图时，我快疯了。一切都很好，只是鼠标悬停时工具提示不显示。ChartData 是具有以下结构的对象列表：

```
 [{'x':x1, 'y':y1, 'tooltip':"some text"}, {...}, ...] 
```

放大动画适用于 Chrome 和 Firefox。我尝试按照[此处](https://stackoverflow.com/questions/13085203/dojox-chart-highlight-effect-not-working)的建议更改主题，但仍然没有结果。我做错了什么？

```
 require([ 
    "dojox/charting/Chart",
        "dojox/charting/axis2d/Default",
        "dojox/charting/plot2d/Lines",
        "dojox/charting/themes/MiamiNice",
        "dojox/charting/action2d/Tooltip",
        "dojox/charting/action2d/Magnify"],
        function(Chart, Tooltip, Magnify, themes, Lines, Default) {
        var chartData = data["res"];
        var chart = new Chart("graph", {title: data["title"], 
                              titleFontColor: "#79B30B"});

        chart.addAxis("y", {vertical: true, min: 0, max:110});
        chart.addAxis("x");
        chart.addPlot("default", { type: "Lines", markers: true, 
                                   tension:3,
                                   shadows: {dx: 2, dy: 2, dw: 2} } );
        chart.setTheme(dojox.charting.themes.MiamiNice);
        chart.addSeries("Connectivity[%]", chartData);
        var tooltip = new dojox.charting.action2d.Tooltip(chart, "default");
        var magnify = new dojox.charting.action2d.Magnify(chart, "default");
        chart.render();
      }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T19:18:54.207

非常感谢 Frode，解决方案是在 HTML 页面的头部加载 dijit 主题在我的代码中将是 MiamiNice 而不是 Claro。

```
 <style type="text/css">
  @import
  url("http://archive.dojotoolkit.org/nightly/dojotoolkit/dijit/themes/claro/claro.css");
  </style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T03:56:54.997

我遇到了一个问题，我的工具提示没有显示在折线图上。在将绘图添加到图表并且工具提示开始显示时，我将标记：false 更改为标记：true。

```
mapChart1.addPlot("default", {
    type : dojox.charting.plot2d.Lines,
    markers : true
}); 
```

# java - 每次迭代保存模拟数据的最佳策略是什么？

> ID：13921453
> 
> 赞同：0
> 
> 时间：2012-12-17T20:13:06.973
> 
> 标签：java, algorithm, particle-swarm

我有一个针对复杂问题的多目标粒子群优化算法，它使用大量（4000 个粒子）并且是一个耗时的模拟（执行 4 - 6 小时）。

由于算法保存了一个存档，一个迄今为止找到的最佳解决方案的存储库，为了分析算法收敛和行为，我需要从这个存储库中保存一些数据，有时在每次迭代时从整个种群中保存一些数据。

目前在每次迭代中，我（用 Java 语言）从粒子的对象（从存储库和/或总体）复制一些属性，将其格式化为 StringBuffer，该方法在与模拟不同的线程中运行，并且仅在程序执行结束我将它保存到一个文本文件中。

我认为我的算法这样做会以一种糟糕的方式消耗内存。但是考虑到性能，我不知道保存所有这些数据的最佳方法是什么：我应该遵循相同的逻辑，但每次迭代都保存一个 .txt 文件，而不是在算法结束时保存吗？还是我应该保存到数据库？如果是这样，我应该在每次迭代中还是在最后或其他时间保存它？还是我应该以不同的方式处理它？

**编辑：**存储库数据通常在 [5 - 10] MB 范围内，而人口数据占用 [100 - 200] MB 内存。每次我运行程序时，我都需要大约 20 次模拟来分析平均收敛性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:52:20.733

`StringBuffer`使用数组来保存字符，这是内存的连续区域。每当需要扩展它时，它都会创建一个大两倍的新数组。通常对于大多数应用程序来说已经足够了，但是如果您认为这个缓冲区可能非常大并且想要消除管理连续部分内存的开销，您可以将其替换为字符串列表（或 StringBuffers）。这将需要更多内存，但不需要此内存是连续的。

# jquery - jQuery Validator 信用卡号 + 类型匹配

> ID：13921456
> 
> 赞同：5
> 
> 时间：2012-12-17T20:13:14.220
> 
> 标签：jquery, jquery-validate

尝试添加一个客户 jQuery 验证器方法，该方法基本上检查卡类型和信用卡号的有效性。

IE。如果类型是MasterCard，如果卡号不以5开头，则无效；如果类型是Visa，如果卡号不以4开头，则无效。我公司只收取MC或Visa的费用，不需要其他。

```
$.validator.addMethod("CCNumber", function(value, element, param) {
  if (param == "MasterCard") {
    return value.substring(0,1) != 5;   
  }
  else if (param == "Visa") {
    return value.substring(0,1) != 4;   
  }
}); 
```

在这里调用它：

```
cardnumber: {
  required: true,
  creditcard: true,
  minlength: 13,
  maxlength: 16,
  digits: true,
  CCNumber: function(){ return $('#cardtype').val(); }
}, 
```

而消息...

```
cardnumber: {
  required: "Please enter a valid credit card number",
  minlength: "Please enter a valid credit card number",
  maxlength: "Please enter a valid credit card number",
  digits: "Your credit card number cannot contain spaces.",
  CCNumber: "WRONG"
}, 
```

最后，HTML：

```
<select name="cardtype" id="cardtype">
  <option value="MasterCard">MasterCard</option>
  <option value="Visa">Visa</option>
</select> 
```

我以前从未编写过 jQuery 方法，但这里没有发生任何事情。我不完全确定我做错了什么，因为我试图查看其他方法，但找不到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:37:15.217

[jQuery Validation 插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)已经为此类事情提供了额外的方法。

以下是[“其他方法”文件](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/additional-methods.js)中使用的默认方法，但随后仅针对 Visa 和 Mastercard 进行了编辑。

```
jQuery.validator.addMethod("creditcardtypes", function(value, element, param) {
    if (/[^0-9-]+/.test(value)) {
        return false;
    }

    value = value.replace(/\D/g, "");

    var validTypes = 0x0000;

    if (param.mastercard)
        validTypes |= 0x0001;
    if (param.visa)
        validTypes |= 0x0002;

    if (validTypes & 0x0001 && /^(5[12345])/.test(value)) { //mastercard
        return value.length == 16;
    }
    if (validTypes & 0x0002 && /^(4)/.test(value)) { //visa
        return value.length == 16;
    }
    return false;
}, "Please enter a valid credit card number."); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-17T20:27:12.490

sub() 不是 javascript 函数。您要查找的函数是 substring()。不过，更容易的是 charAt(0)，因为您只需要第一个字符。

# openssl - 如何在 XAMPP 中启用 openssl 支持？

> ID：13921458
> 
> 赞同：2
> 
> 时间：2012-12-17T20:13:18.427
> 
> 标签：openssl, xampp

我正在尝试在 XAMPP 中启用 openssl 支持。我按照这些说明进行操作，但出现错误：

```
1\.  Open php.ini and  uncomment the following:  extension=php_openssl.dll

2\.  Make sure you have config the following section pointing to your 
php install directory (in my case is located in a second partition at 
e:\php)

3\.  Directory in which the loadable extensions (modules) reside.
extension_dir = "e:/php/ext"

4\.  Add your php directory to the PATH variable
start>run>type cmd
on windows console type:
set PATH=%PATH%;e:\php
(remember replace e:\php with YOUR directory)
(note that using %path% is the same as var+=value, so the directory 
will be appended at the end of the variable)

5\.  php5 comes with all the dll in the zip package so if you add the php 
directory to the path variable, you don't need to move anything to your 
windows system directory (very safe for later updates, because you just 
replace the content of your php directory)

6\.  start>run>inetsrv/iis.msc
right click on your computer
all task>restart IIS 
```

当我查找时，`phpinfo()`它说 openssl 支持已启用。

但是当我尝试运行命令行时出现错误：

```
openssl.cnf not found. 
```

这个错误是什么意思，我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-18T07:30:14.367

要在您的 xampp 服务器上启用 openssl、curl 和 intl，请执行以下步骤：

注意：以上步骤都可以，但是如果您是代码编辑的新手，您将一事无成

1.  打开您的 xampp 服务器的安装位置，例如`C:\xampp or C:\program files\xampp`取决于您的安装位置

2.  在安装 xampp 服务器的文件夹中搜索搜索栏

3.  键入`C:\xampp\php\php.ini`or `C:\program files\xampp\php\php.ini`，然后使用记事本或写字板打开 php.ini 文件

4.  然后滚动直到您看到`;extension=openssl.dll, ;extension=curl.dll, ;extension=intl.dll`，然后删除注释 (;) 并保存您的文件

5.  通过退出关闭服务器并重新启动它

# java - 证书与私钥匹配

> ID：13921459
> 
> 赞同：1
> 
> 时间：2012-12-17T20:13:24.690
> 
> 标签：java, cryptography, public-key

我们目前正在用java实现一个数字签名小程序。用户将拥有包含私钥密钥库及其各自证书的令牌。证书和私钥将具有不同的别名。

我需要做的是将存储中的私钥调用/匹配到用户在签名时选择的证书。java - 如何在java中将私钥与其各自的证书匹配？我需要 getkey(alias, password) 之类的东西，其中别名来自所选证书和密钥之间的匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:51:11.520

如果您使用的是 ECC，那么

```
Q = k * P 
```

其中**Q**是您的公钥，因此当您知道私钥**k**时，您也知道基点**P**和曲线，因此您可以“轻松”计算公钥。

当使用众所周知的实现时，RSA 的问题也很简单，其中指数 e 是固定的。如果它没有修复它可能会很棘手，但也不是那么难。

完全另一个问题是......您如何将给定的公钥与存储的证书相匹配？另一个问题是为什么要做这样的事情？您应该在签名后保存证书信息并访问 java 密钥库中的对应证书。歧义总是一个问题，特别是在加密货币中，你应该尽可能明确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:59:45.867

如果我理解你的设计 - 你的想法不是你应该继续的东西，但是 java 应该支持你需要的东西：

使用此代码：

```
 KeyStore.PrivateKeyEntry pkEntry = (KeyStore.PrivateKeyEntry)
 ks.getEntry("privateKeyAlias", password);
 Certificate certificateFromPrivateKey = pkEntry.getCertificate();
 KeyStore.TrustedCertificateEntry certEntry = (KeyStore.TrustedCertificateEntry)ks.getEntry("certificateAlias, password);
 Certificate certificateFromPublicKey = certEntry.getCertificate();

 if (certificateFromPrivateKey.equals(certificateFromPublicKey)) ... 
```

[在javadoc](http://docs.oracle.com/javase/6/docs/api/java/security/KeyStore.html)中阅读有关它的更多信息- 但我真的认为你这样做是错误的。

另外 - 一个相关的 API（我假设你正在使用它） - [http://docs.oracle.com/javase/6/docs/api/java/security/Signature.html](http://docs.oracle.com/javase/6/docs/api/java/security/Signature.html)

# jquery - 如何创建动态磁贴组合？

> ID：13921478
> 
> 赞同：-2
> 
> 时间：2012-12-17T20:14:25.203
> 
> 标签：jquery, web, tile, portfolio

我想知道创建这样一个基于图块的投资组合的方法是什么：

[http://prothemeus.com/demo/litho/](http://prothemeus.com/demo/litho/)

我的意思是我知道它一定是 jQuery 和 CSS3 的混合体……我想知道我应该如何创建一个！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:44:11.663

该算法是一维装箱算法，可用于在运筹学中最小化箱。同样有趣的是，它按列（x 轴）对图块进行排序。单独的css只能按行（y轴）排序。有很多 jquery 插件将此功能添加到 html 和 css 可供下载，例如 masonry、wookmark 等等。同位素是砌体的大姐大，许可证稍微紧一点。

# javascript - 从外部文件运行 PaperScript/JavaScript 不起作用

> ID：13921483
> 
> 赞同：0
> 
> 时间：2012-12-17T20:14:34.773
> 
> 标签：javascript, paperjs

我正在探索 Paper.js 库。本[教程](http://paperjs.org/tutorials/getting-started/working-with-paper-js/)中的第一个代码示例运行良好。但是，当我将内联 javascript 移动到外部文件时，就像在第二个代码片段中一样，它会停止在屏幕上显示任何内容。在 myScript.js 中，我尝试了

```
paper.install(window);
window.onload = function() {
 // Create a Paper.js Path to draw a line into it:
    var path = new Path();
    // Give the stroke a color
    path.strokeColor = 'black';
    var start = new Point(100, 100);
    // Move to start and draw a line from there
    path.moveTo(start);
    // Note the plus operator on Point objects.
    // PaperScript does that for us, and much more!
    path.lineTo(start + [ 100, -50 ]);

    } 
```

并使用 jQuery

```
$(document).ready(function(){
 // Create a Paper.js Path to draw a line into it:
    var path = new Path();
    // Give the stroke a color
    path.strokeColor = 'black';
    var start = new Point(100, 100);
    // Move to start and draw a line from there
    path.moveTo(start);
    // Note the plus operator on Point objects.
    // PaperScript does that for us, and much more!
    path.lineTo(start + [ 100, -50 ]);

    }); 
```

没有成功。我忘记了什么？谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:32:12.310

您要么需要参考 paperscript 文件，要么跳过直接使用 javascript 所需的障碍，如 [http://paperjs.org/tutorials/getting-started/using-javascript-directly中所述](http://paperjs.org/tutorials/getting-started/using-javascript-directly)

这是一个使用 jquery、paper、coffeescript 的小提琴，可能会给你一些想法：http: [//jsfiddle.net/tATps/](http://jsfiddle.net/tATps/)

```
$('#foo').text(paper);
canvas = $("#myCanvas")[0];
paper.setup(canvas);
path = new paper.Path.Rectangle(10, 10, 20, 10);
path.strokeColor = "black";
paper.view.draw();

path = new paper.Path.Circle(40, 40, 20);
path.strokeColor = "black";
paper.view.draw();

tool = new paper.Tool()

@view = paper.view
size = view.size
@normalCenter = view.size.divide 2

tool.onMouseMove = (event) =>    
    view.zoom = 2 # yes, I set the zoom every time instead of once.  lazy.
    p = event.point.clone()
    p.x = Math.max p.x, 0
    p.y = Math.max p.y, 0
    movement = @normalCenter.subtract(view.center )
    movement = movement.add p.subtract(@normalCenter).divide(2)
    view.scrollBy(movement)
    $('#foo').text([p, view.center]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-12T15:33:20.290

如果这与[https://en.wikipedia.org/wiki/Same-origin_policy](https://en.wikipedia.org/wiki/Same-origin_policy)有关，您需要从本地 HTTP 服务器加载页面，或在浏览器中禁用该检查。以下任何一种方法都是设置本地 Web 服务器的快速方法。

```
# Python <3
python -m SimpleHTTPServer

# Python 3
python -m http.server

# NodeJS
npm install http-server -g  # install
http-server                 # run 
```

# jquery-mobile - 带有标题和描述 MVC 的 jQuery Mobile 交互式链接

> ID：13921488
> 
> 赞同：0
> 
> 时间：2012-12-17T20:14:49.720
> 
> 标签：jquery-mobile, asp.net-mvc-4

我正在尝试使用带有标题和描述的交互式列表元素。

我有一个操作链接和 ap 标签。

```
 <li>@Html.ActionLink((string)Model.Date.ToShortDateString(), "Details", new { id = Model.id})
  <p style="padding-left: 15px;">@Model.RecordType</p>
 </li> 
```

是否也可以使描述“可点击”？标题在正确的位置，但如果用户不小心触摸了描述，则不会触发操作链接。

这个 li 包含在一个`<ul data-role="listview">`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T20:19:30.623

问题是当我在浏览器中测试它时。在移动设备上测试时，不存在此问题。

# ssas - 在 SSAS 中使用百分位数作为度量

> ID：13921492
> 
> 赞同：2
> 
> 时间：2012-12-17T20:15:07.480
> 
> 标签：ssas

如何在 SSAS 多维数据集中使用百分位（比如说 99% 百分位）作为度量？我希望能够使用许多不同的维度和过滤器对其进行报告，因此在 sql 中进行预先计算不是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:59:41.933

如果你想评估一个维度的百分位数，那么你可以做到这一点，而无需在 SQL 中预先计算任何东西。这可以使用[TopPercent](http://technet.microsoft.com/en-us/library/ms145498.aspx)和[Tail](http://technet.microsoft.com/en-us/library/ms146056.aspx) MDX 函数的组合来完成。

例如，假设您想通过 [Measures].[Avg Daily Census]（我从事医疗保健工作）度量来查找 [Date].[Calendar Month] 维度属性的第 25 个百分位。您可以使用以下查询来执行此操作。

```
WITH
   MEMBER [Measures].[25th Percentile] AS
      (
         Tail(
            TopPercent(
               [Date].[Calendar Month].[Calendar Month],
               100 - 25,
               [Measures].[Avg Daily Census]
            )
         ).Item(0),
         [Measures].[Avg Daily Census]
      )
SELECT 
   [Measures].[25th Percentile] ON 0
FROM [Census] 
```

此查询使用 TopPercent 查找 [Calendar Month] 维度属性中前 75% 的值，查找该集合中具有最低值的成员，然后评估该成员的度量。

现在，如果您想生成整组百分位值，您可以使用序列实用程序维度（只是一个包含数字的维度），或者您可以创建一个包含 0-99 的自定义百分位维度。以下查询将生成所有百分比的度量值。

```
WITH
   MEMBER [Measures].[Percentile] AS
      (
         Tail(
            TopPercent(
               [Date].[Calendar Month].[Calendar Month],
               100 - [Sequence].[Ones].CurrentMember.MemberValue,
               [Measures].[Avg Daily Census]
            )
         ).Item(0),
         [Measures].[Avg Daily Census]
      )
SELECT 
   [Measures].[Percentile] ON 0,
   [Sequence].[Ones].&[0] : [Sequence].[Ones].&[99] ON 1
FROM [Census] 
```

但是，如果您尝试在事实表的粒度上评估百分位数，那么我相信您要么需要预先计算每个事实行的百分位数，要么添加[退化](http://en.wikipedia.org/wiki/Degenerate_dimension)维度并使用上述方法。

# c++ - 从重载函数中选择常量表达式？

> ID：13921495
> 
> 赞同：3
> 
> 时间：2012-12-17T20:15:14.623
> 
> 标签：c++, c++11, metaprogramming, overloading

考虑以下示例（我今天发布了几个不同的问题）：

```
#include <iostream>
#include <vector>
#include <array>
#include <type_traits>

// Version A
template<typename T>
constexpr unsigned int f(const T&)
{
    return 1;
}

// Version B
template<typename... T1, template<typename...> class T>
constexpr unsigned int f(const T<T1...>&)
{
    return 2;
}

// Version C
template<typename T1, template<typename, unsigned int...> class T, unsigned int... N>
constexpr unsigned int f(const T<T1, N...>&)
{
    return 3;
}

// Main
int main(int argc, char* argv[])
{
    std::integral_constant<int, f(double())> a;
    std::integral_constant<int, f(std::vector<double>())> b;
    std::integral_constant<int, f(std::array<double, 3>())> c;
    std::cout<<a<<b<<c<<std::endl; // The goal is to return 123
    return 0;
} 
```

此代码无法编译并返回以下编译错误：

```
temporary of non-literal type 'std::vector<double>' in a constant expression 
```

如何修改此代码以编译它？

注意：目标是将函数的第一个版本采用的类型转换为 1，将函数的第二个版本采用的类型转换为 2，等等...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:34:24.200

您需要部分专业化，这在函数上是不可能的，将它们包装在结构/类中即可完成工作：

```
#include <iostream>
#include <vector>
#include <array>
#include <type_traits>

// Version A                                                                                                                                                   
template<typename T>
struct f
{
  constexpr static unsigned int execute()                                                                                                                      
  {                                                                                                                                                            
    return 1;                                                                                                                                                  
  }
};

// Version B                                                                                                                                                   
template<template <typename ... > class Tpl, typename ... TplArgs>
struct f< Tpl<TplArgs...> >
{
  constexpr static unsigned int execute()                                                                                                                      
  {                                                                                                                                                            
    return 2;                                                                                                                                                  
  }
};

// Version C                                                                                                                                                   
template<template<typename, std::size_t...> class Tpl, typename FirstArg, std::size_t... N>
struct f< Tpl<FirstArg, N...> >
{
  constexpr static unsigned int execute()                                                                                                                      
  {                                                                                                                                                            
    return 3;                                                                                                                                                  
  }
};

// Main                                                                                                                                                        
int main(int argc, char* argv[])                                                                                                                               
{                                                                                                                                                              
  std::integral_constant<int, f<double>::execute()> a;                                                                                                         
  std::integral_constant<int, f<std::vector<double>>::execute()> b;                                                                                            
  std::integral_constant<int, f<std::array<double, 3>>::execute()> c;                                                                                          

  std::cout << a << ' ' << b << ' ' << c << std::endl;

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:22:36.270

定义常量时不能使用临时向量：

```
int main(int argc, char* argv[])
{
    std::integral_constant<int, f(double())> a;
    std::vector<double> vec;
    std::integral_constant<int, f(vec)> b;
    std::integral_constant<int, f(std::array<double, 3>())> c;

    std::cout << a << b << c;
    return 0;
} 
```

问题是编译器可能会省略`vector`创建，如果向量的唯一目的是传递给常量表达式函数，但实际上它不能，因为向量不是文字类型。

`std::array`只是 c 数组之上的一个事物包装器，它具有微不足道的构造函数和析构函数。由于 double 也是文字类型，所以双精度数组变为文字。

但是请注意，如果您定义

```
struct A
{
    A(){std::cout << "I'm so complicated A!\n"; }
} 
```

您将无法使用构造：

```
int main(int argc, char* argv[])
{
    std::integral_constant<int, f(A())> a;
    std::integral_constant<int, f(std::array<A, 3>())> c;

    std::cout << a << b << c;
    return 0;
} 
```

要么，而

```
int main(int argc, char* argv[])
{
    A a_v;
    std::integral_constant<int, f(a_v)> a;

    std::array<A, 3> c_v
    std::integral_constant<int, f(c_v)> c;

    std::cout << a << b << c;
    return 0;
} 
```

仍然是可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:29:54.660

您的问题是，我们能负担多少修改此代码的费用？例如，以下编译，但它是你想要做的吗？

```
#include <iostream>
#include <vector>
#include <array>
#include <type_traits>

// Version A
template<typename T>
constexpr unsigned int f()
{
    return 1;
}

// Version B
template<typename... T1, template<typename...> class T>
constexpr unsigned int f()
{
    return 2;
}

// Version C
template<typename T1 = double, template<typename, unsigned int...> class T, unsigned int... N>
constexpr unsigned int f()
{
    return 3;
}

// Main
int main(int argc, char* argv[])
{
    std::integral_constant<int, f<double>()> a;
    std::integral_constant<int, f<std::vector<double>>()> b;
    std::integral_constant<int, f<std::array<double, 3>>()> c;
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T21:05:12.477

我通过使用指针而不是引用找到了解决方案：

```
// Version A
template<typename T>
constexpr unsigned int f(const T*)
{
    return 1;
}

// Version B
template<typename... T1, template<typename...> class T>
constexpr unsigned int f(const T<T1...>*)
{
    return 2;
}

// Version C
template<typename T1, template<typename, unsigned int...> class T, unsigned int... N>
constexpr unsigned int f(const T<T1, N...>*)
{
    return 3;
}

// Main
int main(int argc, char* argv[])
{
    std::vector<double> tmp;
    std::integral_constant<int, f(static_cast<double*>(nullptr))> a;
    std::integral_constant<int, f(static_cast<decltype(tmp)*>(nullptr))> b;
    std::integral_constant<int, f(static_cast<std::array<double, 3>*>(nullptr)) > c;
    std::cout<<a<<b<<c<<std::endl;
    return 0;
} 
```

也许这不是最优雅的方式，但它确实有效。如果有人有一个优雅的等价物，我很感兴趣。

# java - 不是 JEPG 文件 JAI，图像结束，输入文件过早结束

> ID：13921496
> 
> 赞同：2
> 
> 时间：2012-12-17T20:15:25.727
> 
> 标签：java, jai

使用 JAI 加载 Jpeg 图像时遇到异常：

> 原因：com.sun.media.jai.codecimpl.util.ImagingException：无法处理图像流，格式不正确。... 43 更多原因：com.sun.image.codec.jpeg.ImageFormatException：不是 JPEG 文件：以 sun.awt.image.codec.JPEGImageDecoderImpl.readJPEGStream(Native Method) 的 0xff 0xd9 开头

查看十六进制，它实际上在文件流的末尾有一个 0xff 0xd9 块。根据[维基百科](http://en.wikipedia.org/wiki/JPEG#Syntax_and_structure)：

> EOI 0xFF, 0xD9 无 图像结束

但是我知道我可以在任何图像编辑器中打开这个文件。如果我在 paint.net 编辑器中以 95% 的压缩率重新保存，该块就会消失（我假设因为这个块在标题中，并且在保存时 paint.net 会重写标题）

我知道我可以通过一个简单的字节检查来检测它[https://stackoverflow.com/a/10069478/51841](https://stackoverflow.com/a/10069478/51841)

有没有

*   一种在 java 中打开和重新保存图像的方法，这样它就不会成为 JAI 的其余部分的问题（这样我最后会得到一个 RenderedOp）
*   一种让 JAI 读取图像的方法，尽管有此标题（大多数图像阅读器似乎都这样做）
*   修改该二进制块的安全方法（即，用另一个块替换）

或者有没有人对我错过的这个问题有更多的了解？

# ios - 简单查询：如何检测可变数组中添加的项？

> ID：13921499
> 
> 赞同：1
> 
> 时间：2012-12-17T20:15:35.747
> 
> 标签：ios, objective-c, xcode

> **可能重复：**
> [KVO 和 NSMutableArray](https://stackoverflow.com/questions/6914248/kvo-and-nsmutablearray)

正如标题所说，我需要能够检测到可变数组的变化。这样做的原因是，一旦用户添加了新位置，就会自动刷新我正在制作的应用程序的地图视图。

我想这就像询问数组是否等于数组的计数加一或数组的计数减一，但我不知道如何实现。

如果您在回答之前需要更多信息，请随时在评论中提问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:28:12.833

您可以为此使用 Key-Value Observing。有关更多详细信息，请查看[Key-Value Observing Programming Guide 简介](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)。

> 键值观察提供了一种机制，允许对象在其他对象的特定属性发生更改时得到通知。它对于应用程序中模型层和控制器层之间的通信特别有用。（在 OS X 中，控制器层绑定技术在很大程度上依赖于键值观察。）控制器对象通常观察模型对象的属性，视图对象通过控制器观察模型对象的属性。但是，此外，模型对象可能会观察其他模型对象（通常是为了确定从属值何时发生变化），甚至是它自己（再次确定从属值何时发生变化）。
> 
> 您可以观察到的属性包括简单属性、一对一关系和一对多关系。一对多关系的观察者被告知所做更改的类型，以及更改涉及哪些对象。

查看[这篇关于 KVO 的博客](http://blog.herlein.com/2012/01/simple-ios-key-value-observing-kvo-explained/)，了解如何使用它。另[请查看本教程。](http://nachbaur.com/blog/back-to-basics-using-kvo)还要检查这个问题，[Key-Value-Observing a to-many relationship in Cocoa](https://stackoverflow.com/questions/477204/key-value-observing-a-to-many-relationship-in-cocoa)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:21:30.387

这个问题有很多答案。

一种流行的方法是在每次模型更改时使用 NSNotficationCenter 发布通知。

您还可以使用委托在插入对象或 Key-Value Observing 时调用方法。

这很大程度上取决于您的设计。如果您指定，也许您可​​以获得更具体的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:28:59.227

您可以为此使用 KVO。就我个人而言，我不喜欢 NotificationCenter，但我想这是个人品味。

见[KVO 和 NSMutableArray](https://stackoverflow.com/questions/6914248/kvo-and-nsmutablearray)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T05:04:44.433

另一个解决方案是不要那样做。如果您是对可变数组进行更改的人，那么您知道您正在对可变数组进行更改。如果不是，请不要出售可变数组；将数组包装在一个类中，以便任何更改都必须通过您控制的方法进行。

# process - Hadoop RPC 服务器不会停止

> ID：13921501
> 
> 赞同：0
> 
> 时间：2012-12-17T20:15:42.997
> 
> 标签：process, hadoop, ipc, rpc

我试图使用 Hadoop IPC 在它们之间创建一个带有 IPC 的简单父子进程。事实证明，程序执行并打印了结果，但它没有退出。这是它的代码。

```
interface Protocol extends VersionedProtocol{
  public static final long versionID = 1L;
  IntWritable getInput();
}

public final class JavaProcess implements Protocol{
  Server server;

  public JavaProcess() {
  String rpcAddr = "localhost";
  int rpcPort = 8989;
  Configuration conf = new Configuration();
  try {
    server = RPC.getServer(this, rpcAddr, rpcPort, conf);
    server.start();

  } catch (IOException e) {
    e.printStackTrace();
  }
}

public int exec(Class klass) throws IOException,InterruptedException {
  String javaHome = System.getProperty("java.home");
  String javaBin = javaHome +
      File.separator + "bin" +
      File.separator + "java";
  String classpath = System.getProperty("java.class.path");
  String className = klass.getCanonicalName();

  ProcessBuilder builder = new ProcessBuilder(
      javaBin, "-cp", classpath, className);

  Process process = builder.start();
  int exit_code = process.waitFor();
  server.stop();

  System.out.println("completed process");
  return exit_code;
}

public static void main(String...args) throws IOException, InterruptedException{
  int status = new JavaProcess().exec(JavaProcessChild.class);
  System.out.println(status);
}

@Override
public IntWritable getInput() {
  return new IntWritable(10);
}

@Override
public long getProtocolVersion(String paramString, long paramLong)
    throws IOException {
  return Protocol.versionID;
 }
} 
```

这是子进程类。但是我已经意识到这是由于服务器端的 RPC.getServer() 它是罪魁祸首。是一些已知的 hadoop 错误，还是我遗漏了什么？

```
public class JavaProcessChild{

  public static void main(String...args){
    Protocol umbilical = null;
    try {
       Configuration defaultConf = new Configuration();
       InetSocketAddress addr = new InetSocketAddress("localhost", 8989);
       umbilical = (Protocol) RPC.waitForProxy(Protocol.class, Protocol.versionID,
            addr, defaultConf);
       IntWritable input = umbilical.getInput();

       JavaProcessChild my = new JavaProcessChild();

      if(input!=null && input.equals(new IntWritable(10))){
        Thread.sleep(10000);
      }
      else{
        Thread.sleep(1000);
      }
    } catch (Throwable e) {
      e.printStackTrace();
   } finally{
      if(umbilical != null){
        RPC.stopProxy(umbilical);
      }
  }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:32:20.050

我们通过邮件解决了这个问题。但我只想在这里为公众提供两分钱：

所以没有死在那里的线程（因此不让主线程完成）是`org.apache.hadoop.ipc.Server$Reader`. 原因是，执行`readSelector.select();`是不可中断的。如果您仔细查看调试器或线程转储，它会永远等待该调用，即使主线程已被清理。

两个可能的修复：

*   让读者线程成为一个守护进程（不是很酷，因为选择器不会被正确清理，但进程会结束）
*   中断线程池时从外部显式关闭“readSelector”

但是，这是 Hadoop 中的一个错误，我没有时间查看 JIRA。也许这已经修复了，在 YARN 中，旧的 IPC 无论如何都被 protobuf 和 thrift 所取代。

顺便说一句，这也是平台依赖于选择器的实现，我在 debian/windows 系统上观察到了这些僵尸，但在 redhat/solaris 上没有。

如果有人对 Hadoop 1.0 的补丁感兴趣，请给我发电子邮件。我将在不久的将来整理出 JIRA 错误，并在此处编辑它以提供更多信息。（也许这在此期间无论如何都是固定的）。

# java - 如果我使用一个语句选择属性然后使用多个 sql 查询的 1 个准备好的语句，我是否需要使用连接池

> ID：13921511
> 
> 赞同：1
> 
> 时间：2012-12-17T20:16:41.730
> 
> 标签：java, sql, postgresql, jdbc, prepared-statement

我正在使用 jdbc 驱动程序查询 postgres db，这将是一个相当基本的独立 java 应用程序，用于查询本地安装/托管服务器。

我想用格式字符串记录我传递的 sql，以检查我是否只是传递问号或实际的列名，但结果 jdbc 不支持这种线程安全日志记录。我构建了我准备好的陈述，使其在不同的条件下有所不同。

所以我使用一个语句来选择我需要的一切，然后使用结果集进行检索，同时根据这些结果集创建一个准备好的对象。在我使用两个不同的准备好的语句并且收到死锁之前，我的准备好的语句可以在两个 sql 更新之间变化。因此我需要连接池吗？我宁愿不这样做，因为这个独立的应用程序不应该占用太多时间，因为我已经投入了太多时间来尝试调试和解决服务器问题。我的代码如下：

```
 public static void handleEntries(Long level,
        PreparedStatement w_ustmt, String base_url, String name5,
        String name4, String name3, String name2, String name1, String name0) throws SQLException {
    String wiki_url_entry = "";
    try {
        if (level.equals((long) 5)) {
            // wiki_url = wiki_url + name5;
            w_ustmt.setString(1, base_url + name5);
            w_ustmt.addBatch();
            System.out.println(w_ustmt.toString());
        } else if (level.equals((long) 4)) {
            // wiki_url = wiki_url + name4;
            w_ustmt.setString(1, base_url + name4);
            w_ustmt.addBatch();
            System.out.println(w_ustmt.toString());
        } else if (level.equals((long) 3)) {
            //for some reason all the results are coming from this loop
            // wiki_url = wiki_url + name3;
            w_ustmt.setString(1, base_url + name3);
            w_ustmt.addBatch();
            System.out.println(w_ustmt.toString());
        } else if (level.equals((long) 2)) {
            // wiki_url = wiki_url + name2;
            w_ustmt.setString(1, base_url + name2);
            w_ustmt.addBatch();
            System.out.println(w_ustmt.toString());
        } else if (level.equals((long) 1)) {
            // wiki_url = wiki_url + name1;
            w_ustmt.setString(1, base_url + name1);
            w_ustmt.addBatch();
            System.out.println(w_ustmt.toString());
        } else {
            // wiki_url = wiki_url + name0;
            w_ustmt.setString(1, base_url + name0);
            w_ustmt.addBatch();
            System.out.println(w_ustmt.toString());
        }

    } catch (SQLException ex) {
        Logger lgr = Logger.getLogger(Shapefile_Repair.class.getName());
        lgr.log(Level.SEVERE, ex.getMessage());
        while (ex != null){
            System.out.println(ex.getNextException());
        }
        //System.out.println("SQLState: A " + ex.getSQLState());
        //System.out.println("VendorError A: " + ex.getErrorCode());
    }
}

/* this function will handle all the urls which have same entries */ 
public static void handleDups(String wiki_url,
        String base_url, String name5, String name4,
        String name3, String name2, String name1, String name0,
        PreparedStatement w_ustmt) {
    String wiki_url_entry = "";
    try {
        if (wiki_url.toString().equals(base_url + name5)) {
            wiki_url_entry = wiki_url + "(" + name0 + "." + name1  + "." + name2 + "." + name3 + "." +
            name4 + ")";
            // rewriting here, yet it is only printing ?, ?
            w_ustmt.setString(1, wiki_url_entry);
        } else if (wiki_url.toString().equals(base_url + name4)) {
            wiki_url_entry = wiki_url + "(" + name0 + "." + name1 + "." + name2 + "." + name3 +
            ")";
            w_ustmt.setString(1, wiki_url_entry);
        } else if (wiki_url.toString().equals(base_url + name3)) {
            wiki_url_entry = wiki_url + "(" + name0 + "." + name1  + "." + name2
            + ")";
            w_ustmt.setString(1, wiki_url_entry);
        } else if (wiki_url.toString().equals(base_url + name2)) {
            wiki_url_entry = wiki_url + "(" + name0 + "." + name1 + ")";
            w_ustmt.setString(1, wiki_url_entry);
        } else if (wiki_url.toString().equals(base_url + name1)) {
            wiki_url_entry = wiki_url + "(" + name0 + ")";
            w_ustmt.setString(1, wiki_url_entry);
        }
        w_ustmt.addBatch();
        System.out.println("B");
    } catch (SQLException ex) {
        Logger lgr = Logger.getLogger(Shapefile_Repair.class.getName());
        lgr.log(Level.SEVERE, ex.getMessage());
        System.out.println("SQLState: B " + ex.getSQLState());
        System.out.println("VendorError B :" + ex.getErrorCode());
    }
}

/* main method */
@SuppressWarnings("resource")
public static void main(String[] args) throws InstantiationException,
        IllegalAccessException, SQLException {
    // TODO Auto-generated method stub
    Connection conn = null;
    // use the log4jdbc4 wrapper for the connection object
    // conn = new net.sf.log4jdbc.ConnectionSpy(conn);
    Statement stmt = null;
    ResultSet rs = null;
    try {
        // conn = makeConnection(args[0], args[1], args[2], args[3], "");
        String host = args[0];
        String port = args[1];
        String database = args[2];
        String user = args[3];
        String password = args[4];
        String sql_query = "SELECT \"NAME_0\", \"NAME_1\", \"NAME_2\", \"NAME_3\", \"NAME_4\", \"NAME_5\", \"WIKI_URL\", \"LEVEL_DEPT\" FROM"
                + " AdminBoundaries WHERE \"WIKI_URL\" IN(SELECT \"WIKI_URL\" FROM AdminBoundaries"
                + " GROUP By \"WIKI_URL\" HAVING (count (\"WIKI_URL\") > 1)) ORDER BY \"WIKI_URL\";";
        Class.forName("org.postgresql.Driver").newInstance();

        String url = "jdbc:postgresql://" + host + ":" + port + "/"
                + database;
        conn = DriverManager.getConnection(url, user, password);
        // if(conn.equals(null)){
        // System.err.println("Connection complete");
        // }
        DatabaseMetaData meta;          
        try {
            if (conn.isClosed()) {
                System.out.println("closed");
            }
            System.out.println(conn.getWarnings());
            meta = conn.getMetaData();
            boolean updateable = meta.supportsResultSetConcurrency(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE);
            /*if(updateable) System.out.println("yes");
            System.out.println("Does database support batch processes?:"
                    + meta.supportsBatchUpdates());
            ResultSet columns = meta.getColumns(null, null,
                    "adminboundaries", "%");
            while (columns.next()) {
                System.out.println(columns.getString(4));
            }*/
            // after checking the table, adminboundaries was in fact
            // evident, so the issue now is changing the sql queries to
            // lower case
            /*
             * ResultSet tables = meta.getTables(null, null, "%", null);
             * while (tables.next()){
             * System.out.println(tables.getString(3)); }
             */
        } finally {
            System.out.println(conn.getTransactionIsolation());
            System.out.println(sql_query);
            stmt = conn.createStatement(ResultSet.CLOSE_CURSORS_AT_COMMIT,
                    ResultSet.CONCUR_UPDATABLE,
                    ResultSet.TYPE_SCROLL_INSENSITIVE);
            System.out.println(stmt.getFetchSize());
            stmt.setMaxRows(900);
            System.out.println(conn.getTypeMap());
            // stmt.addBatch(sql_query);
            rs = stmt.executeQuery(sql_query);
            // batch_counter is for the row count of the SQL statements
            // executed
            // int batch_counter = pstmt.executeUpdate();
            // update dup_sql's arguments being set as it will vary
            // String wiki_sql =
            // "UPDATE AdminBoundaries SET \"WIKI_URL\" = ?";
            PreparedStatement w_ustmt = conn
                    .prepareStatement("UPDATE AdminBoundaries SET WIKI_URL = ?");
            // int counter = 0;
            // for (counter = 0; counter < 1000; counter++) {
            conn.setAutoCommit(false);
            // stmt.addBatch(sql_query);
            // stmt.setQueryTimeout(30);
            System.out.println(rs.getFetchSize());
            SQLWarning resultsetWarning = rs.getWarnings();
            System.out.println(resultsetWarning);
            // consider changing tables/columns to lower case as sources say
            // to do
            while (rs.next()) {
                String base_url = "http://127.0.0.1/mediawiki/index.php/";
                String name0 = rs.getString("NAME_0");
                String name1 = rs.getString("NAME_1");
                String name2 = rs.getString("NAME_2");
                String name3 = rs.getString("NAME_3");
                String name4 = rs.getString("NAME_4");
                String name5 = rs.getString("NAME_5");
                String wiki_url = rs.getString("WIKI_URL");
                Long level = rs.getLong("LEVEL_DEPT");
                /*for (int i = 1; i < rs.getMetaData().getColumnCount() + 1; i++) {
                    while (rs.next()) {
                        System.out.println(i + " " + rs.getMetaData().getColumnName(i));
                    }
                }*/
                // use 127.0.0.1, not ncsirad-pc b/c wiki_urls are coming
                // back 127.0.0.1

                // TO DO: rethink this if statement to include in function
                // and execute
                // both functions without conditionals above. So it will run
                // through first
                // then run through second.

                if (wiki_url.toString().equals(base_url)) {
                    // Savepoint savepoint1 =
                    // conn.setSavepoint("wiki_entry");
                    // w_ustmt.setQueryTimeout(30);
                    // System.out.println("Getting into duplicates loop");
                    handleEntries(level, w_ustmt, base_url, name5, name4,
                            name3, name2, name1, name0);
                    // add to batch
                    // w_ustmt.addBatch(wiki_sql);
                    // int counts2[] = w_ustmt.executeBatch();
                    // make sure to try the below
                    // w_ustmt.executeUpdate();
                    // conn.rollback(savepoint1);
                } else {
                    handleDups(wiki_url, base_url, name5, name4, name3,
                            name2, name1, name0, w_ustmt);
                    w_ustmt.setQueryTimeout(30);
                    // dup_pstmt.addBatch(dup_sql);
                    // int count3[] = dup_pstmt.executeBatch();
                }

            }
            // may not need executeUpdate
            int counts[] = w_ustmt.executeBatch();
            System.out.println("here is " + counts);
            conn.commit();
            conn.setAutoCommit(true);
            // counter = 0;
            // }
        }
        System.out.println("finished queries");
        rs.close();

    } catch (ClassNotFoundException e) {
        e.printStackTrace();
        // System.exit(1);
    } catch (SQLException ex) {
        Logger lgr = Logger.getLogger(Shapefile_Repair.class.getName());
        lgr.log(Level.SEVERE, ex.getMessage());
        System.out.println("SQLState C: " + ex.getSQLState() + " " + lgr);
        System.out.println("VendorError C: " + ex.getErrorCode());
        if (ex != null) {
            System.out.println(ex.getNextException());
        }
    } finally {
        try {
            if (rs != null) {
                rs.close();
            }
            if (stmt != null) {
                stmt.close();
            }
            if (conn != null) {
                conn.close();
            }
        } catch (SQLException e) {
        }
    }
     conn.close();
} 
```

}

```
The errors/SQL returned from printing was long with the first couple print statements indicating the # of allowable rows so I shortened it: 
UPDATE adminboundaries SET WIKI_URL = 'http://127.0.0.1/mediawiki/index.php/null'
UPDATE adminboundaries SET WIKI_URL = 'http://127.0.0.1/mediawiki/index.php/null'
UPDATE adminboundaries SET WIKI_URL = 'http://127.0.0.1/mediawiki/index.php/null'
UPDATE adminboundaries SET WIKI_URL = 'http://127.0.0.1/mediawiki/index.php/null'
UPDATE adminboundaries SET WIKI_URL = 'http://127.0.0.1/mediawiki/index.php/null'
UPDATE adminboundaries SET WIKI_URL = 'http://127.0.0.1/mediawiki/index.php/?uilly (France.Picardie.Aisne.Laon.Craonne)'
UPDATE adminboundaries SET WIKI_URL = 'http://127.0.0.1/mediawiki/index.php/?uilly (France.Champagne-Ardenne.Marne.Épernay.Dormans)'
UPDATE adminboundaries SET WIKI_URL = 'http://127.0.0.1/mediawiki/index.php/01 (Vietnam.Ðông Nam B?.H? Chí Minh city.Qu?n 3)'
UPDATE adminboundaries SET WIKI_URL = 'http://127.0.0.1/mediawiki/index.php/01 (Vietnam.Ðông Nam B?.H? Chí Minh city.Qu?n 10)'
UPDATE adminboundaries SET WIKI_URL = 'http://127.0.0.1/mediawiki/index.php/01 (Vietnam.Ðông Nam B?.H? Chí Minh city.Qu?n 6)'
UPDATE adminboundaries SET WIKI_URL = 'http://127.0.0.1/mediawiki/index.php/01 (Vietnam.Ðông Nam B?.H? Chí Minh city.Phú Nhu?n)'
UPDATE adminboundaries SET WIKI_URL = 'http://127.0.0.1/mediawiki/index.php/01 (Vietnam.Ðông Nam B?.H? Chí Minh city.Qu?n 4)'
Dec 18, 2012 4:31:05 PM Shapefile_Repair main 
SEVERE: Batch entry 0 UPDATE    adminboundaries SET        

WIKI_URL='http://127.0.0.1/mediawiki/index.php/null' was aborted.  
Call getNextException to see the cause.
SQLState C: 42703 java.util.logging.Logger@37504d
VendorError C: 0
org.postgresql.util.PSQLException: ERROR: column "wiki_url" of relation   

"adminboundaries" does not exist
Position: 28 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:13:24.360

异常 cleary 说`wiki_url`在 table 中不存在`adminboundaries`。

`org.postgresql.util.PSQLException: ERROR: column "wiki_url" of relation "adminboundaries" does not exist`

我认为它来自`update`查询正在执行

`conn.prepareStatement("UPDATE adminboundaries SET WIKI_URL = ?");`

由于 postgresql 区分大小写 将您的查询更改为

`conn.prepareStatement("UPDATE AdminBoundaries SET WIKI_URL = ?");`假设您的表名是`AdminBoundaries`.

# php - php 的邮件未在 gmail.com 上发送

> ID：13921515
> 
> 赞同：0
> 
> 时间：2012-12-17T20:17:26.420
> 
> 标签：php, email, gmail

我有这个代码

```
mail($to, 'Some Subject', 'message'); 
```

如果`$to`是`gmail.com`邮件服务器地址，则不发送邮件，但如果`$to`是其他邮件服务器，例如`mail.ru`，消息发送成功。

可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:19:20.770

GMail 会阻止小型服务器，因为它们往往会发送大部分垃圾邮件。

编辑：但我相信我让它工作了一次，一秒钟，我正在搜索相关代码！

我确实剪掉了一点，但应该仍然可以工作。

```
public function send($sName, $sMail, $sSubject, $aTo, $sContent, $bHtml){
    $this->mailer = 'X-Mailer: PHP/' . \phpversion(). "\n";
    $this->ip = 'X-Sender-IP:' . $_SERVER['REMOTE_ADDR'] . "\n";

    $this->from = 'From:' . $sName . '<' . $sMail . ">\n";
    $this->reply = 'Reply-To:' . $sMail . "\n";
    $this->contentType = "Content-Type: text/html\nContent-Transfer-Encoding: 8bit\n\n";

    $this->from .= $this->reply;
    $this->from .= $this->mailer;
    $this->from .= $this->ip;
    $aAttach = $this->checkAttachement();
    $this->from .= $this->contentType;

    foreach($aTo as $to){
        $to = \trim($to);
        if($to != "" && \strlen($to) > 5){
            mail($to, $sSubject, $sContent, $this->from);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:20:47.947

检查您的垃圾邮件箱。由于此类服务用于发送大量电子邮件，GMail 通常会阻止它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:26:17.080

在您的发件人电子邮件地址使用的域的公共域 DNS 记录中（例如 noreply@mydomain.ru），您需要为您的发送服务器/IP 创建一个 SPF 记录。

SPF 记录可能如下所示：

```
v=spf1 include:my-php-server.ru ~all 
```

看到这个：[http ://en.wikipedia.org/wiki/Sender_Policy_Framework](http://en.wikipedia.org/wiki/Sender_Policy_Framework)

# amazon-ec2 - Amazon S3 是否独立于 EC2 不可用？

> ID：13921526
> 
> 赞同：0
> 
> 时间：2012-12-17T20:18:22.733
> 
> 标签：amazon-ec2, amazon-s3, backup

目前，我们正在将所有用户生成的内容上传到一个中型 EC2 实例，然后我们从那里运行一个 cron 作业以将所有上传的内容同步到 S3。我们有一些在后端运行的代码（每次您需要访问任何上传的文件时）检查资源是否已移动到 S3，或者它是否仅在我们的上传实例上可用。

这似乎有点浪费，但它确实提供了冗余——如果 S3 关闭，我们有一些 JavaScript 代码可以强制从我们的上传框提供文件。实际文件上传存储在 EBS 中，而不是实例上。

我们现在在 S3 存储桶中有大约 150GB 的文件；这使得执行 S3 存储桶的单独备份非常耗时，并且几乎不可能定期运行。

所以，我的问题是，这甚至有必要吗？谁能指出我在 S3 和 EC2 之间的一些正常运行时间统计数据？是否曾经发生过 S3 已关闭但 EC2 可用的情况？似乎将所有内容直接上传到 S3 并相信它已经启动可能更简单......另一方面，我们可以将所有内容存储在 EBS 中而完全忘记 S3，这似乎更有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:12:57.287

您的 EC2 实例关闭的可能性比 S3 关闭的可能性要大得多。一方面，您有一个实例在单个主机上运行，​​并且在单个可用区中具有单个网络连接。除此之外，在平台级别上，EC2（尤其是涉及 EBS）已经有[几次](http://evilrouters.net/2011/04/29/the-ec2-ebs-outage-what-amazon-didnt-tell-you/) [长期](http://techcrunch.com/2011/08/08/amazon-ec2-outage/) [中断](http://arstechnica.com/information-technology/2012/10/amazon-web-services-outage-once-again-shows-reality-behind-the-cloud/)，而 S3 自 2008 年以来没有发生过重大的可用性事件。

S3 是一个分布在您所选区域的分布式系统。坦率地说，在具有最终一致性保证的对象级别上操作比 EBS 和 EC2 解决的问题要简单得多，所有这些都通过设计增加了额外的一致性保证（以及失败的方法）。

我通常让上传过程将 S3 视为后备存储——直接上传到 S3，或以直写方式通过 EC2 实例上传——并接受如果 S3 关闭，则我无法处理上传。这样做会引入一种故障模式，您的应用程序正在运行但 S3 未运行，但它显着降低了数据丢失的可能性，这通常是比不可用更严重的问题。这还允许您通过不同可用区中的不同 EC2 实例同时处理上传，对冲 EC2 故障，以及通过实例存储实例，对冲 EBS 故障。

# vba - 设置一个单元格的地址等于另一个......在另一个工作簿中

> ID：13921528
> 
> 赞同：-1
> 
> 时间：2012-12-17T20:18:29.313
> 
> 标签：vba, excel, cell, spreadsheet

假设我刚刚将一个表复制到另一个工作簿，并想编写一个宏来验证复制是否成功，我必须有两个范围变量来比较它们。如何分配要比较的单元格的地址以跟随另一个工作簿中另一个单元格的地址，以便它们都以相同的方式偏移，即使两个起始单元格不同，仍然可以正确比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:41:38.350

将 originalRange 更改为所需工作簿中的原始数据范围。如果在粘贴后立即运行，则可以将 Selection 用于 pastedValue 数据。如果没有，则相应地更改：

```
Dim i As Double, j As Double
Dim originalRange() As Variant, pastedValue() As Variant
Dim copyPassed As Boolean

originalRange = Workbooks("Book1").Sheets("Sheet1").Range("A1").CurrentRegion.Value
pastedValue = Selection

copyPassed = True

For i = 1 To UBound(pastedValue, 1)

    For j = 1 To UBound(pastedValue, 2)

        If (originalRange(i, j) <> pastedValue(i, j)) Then

            copyPassed = False
            GoTo test_exit:

        End If

    Next j

Next i

test_exit:

MsgBox "Copy Passed: " & copyPassed 
```

# apache - 设置 Silex Bootstrap 时出现 Apache 错误：无法检查 htaccess 文件

> ID：13921529
> 
> 赞同：14
> 
> 时间：2012-12-17T20:18:30.417
> 
> 标签：apache, .htaccess

我正在尝试使用 Silex Bootstrap 建立一个网站。我已将它与其他 Web 项目放在我的文件夹中，并更改了 Apache 配置中的 DocumentRoot。

```
<Directory /folder/to/silex_projects/web>
     Options Indexes FollowSymLinks MultiViews
     AllowOverride All
     Order allow,deny
      allow from all
</Directory> 
```

但是我无法打开框架的索引页面，Apache给出：

> [Mon Dec 17 21:10:52 2012] [crit] [client 127.0.0.1] (13)Permission denied: /folder/to/silex_project/web/.htaccess pcfg_openfile: 无法检查 htaccess 文件，确保它是可读的

我已经用 chmod 修改了整个项目文件夹`chmod a+r -R`。同一文件夹中的其他项目可以正常使用该`.htaccess`文件。

该`.htaccess`文件确实存在。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-17T20:32:06.503

`chmod 755 -R /silex_project/`解决了我的问题。我仍然不知道为什么 Apache 需要写权限才能工作。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-11-04T15:55:37.830

这可能是因为运行 Apache 的用户对该目录没有 eXecute 权限。还需要读取其中的文件。`chmod a+rx /folder/to/silex_projects`可能会解决你的错误。

您`chmod 755 -R`也不能通过提供写访问权限来解决这个问题，而是因为这恰好也添加了 eXecute。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-18T01:27:38.340

除了发布的其他答案之外，如果您要更改可能从发行版“默认”位置访问文件的任何内容，那么在这种情况下，SELinux （如果已启用）可能会咬到您。

解决方法是为目录/文件向 selinux 添加适当的策略，或者如果您不希望 selinux 安全运行，则禁用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-14T07:21:37.643

我也有这个错误，发现这个很好的参考 [（13）权限被拒绝：/home/username/.htaccess pcfg_openfile：无法检查htaccess文件，确保它是可读的](http://help.directadmin.com/item.php?id=363)

查看您的域时，如果您看到错误“禁止”，然后检查您的 apache 日志：/var/log/httpd/error_log /var/log/httpd/domains/domain.com.error.log

并查看错误：

```
[crit] [client 1.2.3.4] (13)Permission denied: /home/username/.htaccess pcfg_openfile: unable to check htaccess file, ensure it is readable 
```

这意味着 apache 对您的 /home/username 目录没有读取权限。

造成这种情况的原因可能与权限相关、配置相关或所有权相关。

Apache 以用户“apache”运行，因此该用户或组的目录必须为 +x。

1) 从 DirectAdmin 1.38.0 开始，我们实现了 secure_acccess_group 功能，它将 /home/user（对于用户）设置为 chmod 750 和 chown username:access。apache 用户将在“访问”组中。要确认这一点，请键入以下内容：

```
[root@server]# grep ^access: /etc/group
access:x:506:apache,nobody,mail,majordomo,daemon 
```

你应该得到与显示的输出类似的东西。

如果您得到一个空白的用户列表，则访问组存在，但为空。要正确填充组（在 RedHat/CentOS/Debian 系统上），请输入：

```
usermod -G access apache
usermod -G access nobody
usermod -G access mail
usermod -G access majordomo
usermod -G access daemon 
```

在 FreeBSD 系统上，创建组的命令是：

```
pw groupadd -n access -M apache,nobody,mail,majordomo,daemon 
```

但这意味着该组尚不存在。这种情况在 FreeBSD 上没有出现过，所以可能不需要。

# .net - 实体框架查询生成继承响应时间

> ID：13921530
> 
> 赞同：0
> 
> 时间：2012-12-17T20:18:37.733
> 
> 标签：.net, linq, entity-framework

我有一个 Logs 实体，它有两个继承的实体。每个继承的实体都链接到另一个不同的实体。ResponseLog 和 SessionLog 分别连接到 Response 和 Session 实体。

Logs 表有超过 70 万条记录，预计将增长到数百万。

我想做的是从日志表中取出前 100 个条目并将它们放入列表中。

```
 var LogResults = (from entries in this.DbContext.LogEntries
                          orderby entries.TimeStamp descending
                          select entries).Take(nEntries); 
```

但是，当我这样做时`List<LogEntry> LogResultList= LogResults.ToList();`，大约需要 45 秒才能完成！我意识到“ToList”功能是在实际进行与数据库的事务时，但无论 nEntries = 100、25 还是 10000，所需的时间长度都是相同的！

我查看了 linq 生成的查询，它似乎在提取前 100 个之前评估了 Log 表中每个日志条目（700k+）的类型。

有没有办法获得前 100 名，*然后*找出这些记录是哪些继承类型？

这是生成的sql：

```
 SELECT TOP (100) 
[Project3].[C1] AS [C1], 
[Project3].[Id] AS [Id], 
[Project3].[Message] AS [Message], 
[Project3].[TimeStamp] AS [TimeStamp], 
[Project3].[UserId] AS [UserId], 
[Project3].[SeverityLevelRaw] AS [SeverityLevelRaw], 
[Project3].[C2] AS [C2], 
[Project3].[C3] AS [C3]
FROM ( SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Message] AS [Message], 
    [Extent1].[TimeStamp] AS [TimeStamp], 
    [Extent1].[UserId] AS [UserId], 
    [Extent1].[SeverityLevelRaw] AS [SeverityLevelRaw], 
    CASE WHEN ( NOT (([Project1].[C1] = 1) AND ([Project1].[C1] IS NOT NULL))) THEN '0X' WHEN (([Project1].[C1] = 1) AND ([Project1].[C1] IS NOT NULL) AND ( NOT (([Project2].[C1] = 1) AND ([Project2].[C1] IS NOT NULL)))) THEN '0X0X' ELSE '0X0X0X' END AS [C1], 
    CASE WHEN ( NOT (([Project1].[C1] = 1) AND ([Project1].[C1] IS NOT NULL))) THEN CAST(NULL AS uniqueidentifier) WHEN (([Project1].[C1] = 1) AND ([Project1].[C1] IS NOT NULL) AND ( NOT (([Project2].[C1] = 1) AND ([Project2].[C1] IS NOT NULL)))) THEN [Project1].[SessionId] ELSE [Project1].[SessionId] END AS [C2], 
    CASE WHEN ( NOT (([Project1].[C1] = 1) AND ([Project1].[C1] IS NOT NULL))) THEN CAST(NULL AS uniqueidentifier) WHEN (([Project1].[C1] = 1) AND ([Project1].[C1] IS NOT NULL) AND ( NOT (([Project2].[C1] = 1) AND ([Project2].[C1] IS NOT NULL)))) THEN CAST(NULL AS uniqueidentifier) ELSE [Project2].[ResponseId] END AS [C3]
    FROM   [dbo].[LogEntries] AS [Extent1]
    LEFT OUTER JOIN  (SELECT 
        [Extent2].[SessionId] AS [SessionId], 
        [Extent2].[Id] AS [Id], 
        cast(1 as bit) AS [C1]
        FROM [dbo].[LogEntries_RuntimeLogEntry] AS [Extent2] ) AS [Project1] ON [Extent1].[Id] = [Project1].[Id]
    LEFT OUTER JOIN  (SELECT 
        [Extent3].[ResponseId] AS [ResponseId], 
        [Extent3].[Id] AS [Id], 
        cast(1 as bit) AS [C1]
        FROM [dbo].[LogEntries_ResponseLogEntry] AS [Extent3] ) AS [Project2] ON [Extent1].[Id] = [Project2].[Id]
)  AS [Project3]
ORDER BY [Project3].[TimeStamp] DESC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:11:36.770

我建议你看一下执行计划。您可能需要在 TimeStamp 上添加一个索引。

在 Microsoft SQL Server Management Studio 中，将鼠标悬停在查询编辑器上方的图标上，然后单击标有“包括实际执行计划”的图标。然后，重新运行您的查询。

请注意，结果旁边现在有一个名为“执行计划”的选项卡。这是一个非常棒的工具，用于对耗时过长的查询进行故障排除。通过将鼠标悬停在执行计划中的图标上，通常是从右到左，您可以看到数据库引擎如何决定完成您的查询以及花费了这么长时间。

Joe Chang 有一篇文章[http://www.qdpma.com/cbo/s2kcbo_2a.html](http://www.qdpma.com/cbo/s2kcbo_2a.html)可以帮助您了解在 SQL Server 执行计划中可以找到的不同类型的执行步骤。通常，您不希望在批量扫描或索引扫描中看到太多时间（本质上是从上到下搜索以查找某些内容）。相反，您希望查看索引查找操作（通常是 btree 二进制搜索）。

我希望您会发现大部分时间都花在了扫描或大型排序操作上。尝试在 TimeStamp 列上添加索引。我敢打赌，在这种情况下，它会将您的查询降到亚秒级。

# javascript - 更新 observableArray 中项目的属性并持久化到模板

> ID：13921534
> 
> 赞同：1
> 
> 时间：2012-12-17T20:18:47.313
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

我正在使用 KnockoutJS ...

我的 viewModel 中有一部`observableArray`电影。当用户按标题搜索电影时，数组会更新，因此将被推送到数组中的典型 json 响应如下所示......

```
{data : [{
    Id: 12345,
    Title: 'Movie1',
    Year: 2010,
    Character: [{
        Name: 'Character1',
        Person: { Id: 1, Name: 'Person1' }
    },{
        Name: 'Character2',
        Person: { Id: 2, Name: 'Person2' }
    }],
    UserMovies: [{
        Id: 8
        IsWatched: false,
        Rating: 3.5,
        UserId: 'e1e9c075-1ded-4e7d-8d30-d5d1fbd47103'
    }]
}]} 
```

每部电影的`UserMovies`属性代表特定于该用户的信息，例如他们的个人评分或他们是否看过电影等。

我让用户能够将电影“添加”到他们在数据库中的集合中。当他们将电影添加到他们的收藏中时，会发回一个 json 响应，其中包含`UserMovies`该电影的更新属性。

我正在尝试仅更新该属性，然后将其保留在淘汰赛模板中。这是我当前的视图模型...

```
function viewModel() {
    // private properties
    var self = this;

    // public properties
    self.movies = ko.observableArray([]);
    self.searchValue = ko.observable();

    // public operations
    self.search = function () {
        self.isLoading(true);
        $.getJSON(arguments[0].action, { name: this.searchValue() }, function (data) {
            self.movies(data);
        });
    };
    self.add = function (movie) {
        $.ajax({
            type: 'POST',
            url: arguments[1].currentTarget.attributes[1].value,
            data: JSON.stringify({ movie: movie }),
            contentType: 'application/json',
            dataType: 'json',
            success: function (data) {
                // how to just update UserMovies property and persist to template for the given movie?
            }
        });
    };
}

ko.applyBindings(new viewModel()); 
```

我不确定如何更新属性，但就将数据保存到淘汰赛模板而言，我认为这是因为`UserMovies`每部电影的属性本身并不是可观察的，因此如果更新它，模板中的任何内容都不会自动更改。

我一直在阅读有关使每个属性都可观察的映射插件。这可能会解决我的持久性问题，但我仍然不确定如何仅更新`UserMovies`属性，无论它是在映射插件中`observableArray`还是通过映射插件。

**更新**

我使用映射插件创建了一个小提琴。如果我返回整部电影而不仅仅是`UserMovies`属性，则更新数组中的项目会容易得多。我在让它工作时遇到了一些问题，我正在努力弄清楚如何创建一个针对该`UserMovies`属性的“键”映射。[http://jsfiddle.net/cmBd9/3/](http://jsfiddle.net/cmBd9/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T04:39:11.757

正如您自己正确指出的那样，UserMovies 属性不是可观察的这一事实意味着即使您更新它，UI 中也不会发生任何事情。尽管如此，您可以通过以下方式更新（不可观察的）UserMovies：

```
self.add = function (movie) {
    $.ajax({
        type: 'POST',
        url: arguments[1].currentTarget.attributes[1].value,
        data: JSON.stringify({ movie: movie }),
        contentType: 'application/json',
        dataType: 'json',
        success: function (data) {
            ko.utils.arrayForEach(self.movies(), function(m) {
              if (m.Id == movie.Id) {
                m.UserMovies = data;
              }
            });
        }
    });
}; 
```

一定要检查[映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)。我唯一担心的是文档显示了如何最初从 JSON 映射对象，以及以后如何从 JSON 更新整个对象。

但是，它似乎没有提到任何关于从 JSON 映射对象以及后来出现并仅从 JSON 更新该对象的**一部分**的任何内容，所以我不确定这是否可行。

如果您遇到问题，您可以尝试让 add 方法的服务调用返回整个电影对象，以便您更紧密地遵循映射插件所支持的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:59:21.753

我能够使用映射选项使其与映射插件一起使用。我将密钥设置为`UserMovies`每个的 ID，`UserMovie`所以当`fromJS()`被调用时，它会查看每个的 ID`UserMovie`来判断是更新还是添加新的`UserMovie`

这是我更新的代码...

```
function viewModel() {
    // private properties
    var self = this;
    var mapping = {
        'UserMovies': {
            key: function (data) {
                return ko.utils.unwrapObservable(data.Id);
            }
        }
    };

    // public properties
    self.movies = ko.mapping.fromJS([]);
    self.searchValue = ko.observable();

    // public operations
    self.search = function () {
        self.isLoading(true);
        $.getJSON(arguments[0].action, { name: this.searchValue() }, function (data) {
            ko.mapping.fromJS(data, {}, self.movies);
        });
    };
    self.add = function (movie) {
        $.ajax({
            type: 'POST',
            url: arguments[1].currentTarget.attributes[1].value,
            data: ko.toJSON({ movie: movie }),
            contentType: 'application/json',
            dataType: 'json',
            success: function (data) {
                if(data.success) {
                    ko.mapping.fromJS(data.movie, mapping, movie);
                }
            }
        });
    };
} 
```

# inno-setup - 跳过基于 Inno Setup 中可选组件的自定义页面

> ID：13921535
> 
> 赞同：19
> 
> 时间：2012-12-17T20:18:54.650
> 
> 标签：inno-setup

在之前的问题中，我询问了如何拥有三个可选组件，用户还可以分别指定每个组件的位置（例如，一个代码部分和两个 HTML Web 应用程序）。@Miral 给了我一个很好的答案，我现在已经实现了：
[三个用户定义的位置中的三个组件](https://stackoverflow.com/questions/13728134/three-components-in-three-user-defined-locations)

我还有一个小的审美问题。我总是`CreateInputDirPage`在向导中创建并要求用户提供 , 。问题出现在`wpSelectComponents`.

问题：如果未选择组件，如何跳过页面。也就是说，我如何跳过我的自定义页面？

我有一种感觉，它与`ShouldSkipPage()`. 但我不知道`PageID`我的自定义页面是什么，以及如何测试以查看选择了哪些组件。

> 函数 ShouldSkipPage(PageID: Integer): 布尔值；
> 
> 向导调用此事件函数来确定是否应该显示特定页面（由 PageID 指定）。如果返回True，则页面将被跳过；如果您返回 False，则可能会显示该页面。

我的脚本附在下面：

```
[Components]
Name: "Watson"; Description: "Watson Component"; Types: onlywatson full
Name: "Toby"; Description: "Toby Component"; Types: onlytoby full
Name: "Sherlock"; Description: "Sherlock Component"; Types: onlysherlock full

[Code]
var 
    TobyDirPage: TInputDirWizardPage;
    SherlockDirPage: TInputDirWizardPage;

procedure InitializeWizard;
begin
  TobyDirPage := CreateInputDirPage(wpSelectComponents,
    'Select Location for Toby Web Pages', 'Where should we store the sample Toby application files?',
    'The sample Toby stand-alone map application will be saved in the following folder.'#13#10#13#10 +
    'To continue, click Next. If you would like to select a different folder, click Browse.',
    False, 'New Folder');
  { Add item (with an empty caption) }
  TobyDirPage.Add('');
  { Set initial value (optional) }
  TobyDirPage.Values[0] := ExpandConstant('c:\wwwroot\Toby');

  SherlockDirPage := CreateInputDirPage(wpSelectComponents,
    'Select Location for Sherlock Web Pages', 'Where should we store the Sherlock Catalog Search Tool?',
    'Sherlock.html and it'#39 + 's associated files will be saved in the following folder.'#13#10#13#10 +
    'To continue, click Next. If you would like to select a different folder, click Browse.',
    False, 'New Folder');
  { Add item (with an empty caption) }
  SherlockDirPage.Add('');
  { Set initial value (optional) }
  SherlockDirPage.Values[0] := ExpandConstant('c:\wwwroot\Sherlock');
end;

function GetTobyDir(Param: String): String;
begin
  { Return the selected TobyDir }
  Result := TobyDirPage.Values[0];
end;

function GetSherlockDir(Param: String): String;
begin
  { Return the selected TobyDir }
  Result := SherlockDirPage.Values[0];
end; 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-17T20:31:36.253

正如您正确地预感到的那样，您需要使用[`ShouldSkipPage`](http://jrsoftware.org/ishelp/topic_scriptevents.htm#ShouldSkipPage)事件处理程序来有条件地跳过页面。要检查是否选择了某个组件，请使用该[`IsComponentSelected`](http://jrsoftware.org/ishelp/topic_isxfunc_iscomponentselected.htm)功能，最后，要获取您的自定义页面的 ID，您需要存储其[`ID`](http://jrsoftware.org/ishelp/topic_scriptclasses.htm#TWizardPage). 将所有内容放在一起可能会为您提供以下示例脚本：

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program
OutputDir=userdocs:Inno Setup Examples Output

[Components]
Name: "help"; Description: "Help File";

[Code]
var
  CustomPageID: Integer;

procedure InitializeWizard;
var
  CustomPage: TInputDirWizardPage;
begin
  CustomPage := CreateInputDirPage(wpSelectComponents, 'Caption', 
    'Description', 'SubCaption', False, 'NewFolderName');
  CustomPage.Add('Input');
  { store your custom page ID to further use in the ShouldSkipPage event }
  CustomPageID := CustomPage.ID;
end;

function ShouldSkipPage(PageID: Integer): Boolean;
begin
  { initialize result to not skip any page (not necessary, but safer) }
  Result := False;
  { if the page that is asked to be skipped is your custom page, then... }
  if PageID = CustomPageID then
    { if the component is not selected, skip the page }
    Result := not IsComponentSelected('help');
end; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-04-06T19:19:06.560

我对此的看法是使用 TWizardPageShouldSkipEvent，我只制作了一个案例和点脚本：

```
[Code]
var 
    TobyDirPage: TInputDirWizardPage;

function SkipEvent (Sender: TWizardPage): Boolean;
begin
    Result := not IsComponentSelected('Toby');
end; 

procedure InitializeWizard;
begin
    TobyDirPage := CreateInputDirPage(wpSelectComponents, yadda yadda yadda
    TobyDirPage.OnShouldSkipPage := @SkipEvent;
end; 
```

现在，`OnShouldSkipPage`在按下 Next 之后立即触发，然后在绘制`wpSelectComponents`之前触发，`TobyDirPage`并且由于您可以将该事件附加到页面本身，因此您不需要摆弄 PageID。

# javascript - 使用“碰撞”接近边缘时翻转工具提示

> ID：13921536
> 
> 赞同：1
> 
> 时间：2012-12-17T20:18:57.500
> 
> 标签：javascript, jquery, html, css, flip

我的工具提示超出了我的页面边界。我正在使用一个名为 aToolTip 的 jquery 插件。这是我的代码：

```
(function($) {
    $.fn.aToolTip = function(options) {
        /**
            setup default settings
        */
        var defaults = {
            // no need to change/override
            closeTipBtn: 'aToolTipCloseBtn',
            toolTipId: 'aToolTip',
            // ok to override
            fixed: false,
            clickIt: false,
            inSpeed: 200,
            outSpeed: 100,
            tipContent: '',
            toolTipClass: 'defaultTheme',
            xOffset: 5,
            yOffset: 5,
            onShow: null,
            onHide: null,

        },
        // This makes it so the users custom options overrides the default ones
        settings = $.extend({}, defaults, options);

        return this.each(function() {
            var obj = $(this);
            /**
                Decide weather to use a title attr as the tooltip content
            */
            if(obj.attr('title')){
                // set the tooltip content/text to be the obj title attribute
                var tipContent = obj.attr('title');  
            } else {
                // if no title attribute set it to the tipContent option in settings
                var tipContent = settings.tipContent;
            }

            /**
                Build the markup for aToolTip
            */
            var buildaToolTip = function(){
                $('body').append("<div id='"+settings.toolTipId+"' class='"+settings.toolTipClass+"'><p class='aToolTipContent'>"+tipContent+"</p></div>");

                if(tipContent && settings.clickIt){
                    $('#'+settings.toolTipId+' p.aToolTipContent')
                    .append("<a id='"+settings.closeTipBtn+"' href='#' alt='close'>close</a>");
                }
            },
            /**
                Position aToolTip
            */
            positionaToolTip = function(){
                $('#'+settings.toolTipId).css({
                    top: (obj.offset().top - $('#'+settings.toolTipId).outerHeight() - settings.yOffset) + 'px',
                    left: (obj.offset().left + obj.outerWidth() + settings.xOffset) + 'px'
                })
                // added delay() call...
                .stop().delay(1000).fadeIn(settings.inSpeed, function(){
                    if ($.isFunction(settings.onShow)){
                        settings.onShow(obj);
                    }
                });             
            },
            /**
                Remove aToolTip
            */
            removeaToolTip = function(){
                // Fade out
                $('#'+settings.toolTipId).stop().fadeOut(settings.outSpeed, function(){
                    $(this).remove();
                    if($.isFunction(settings.onHide)){
                        settings.onHide(obj);
                    }
                });             
            };

            /**
                Decide what kind of tooltips to display
            */
            // Regular aToolTip
            if(tipContent && !settings.clickIt){    
                // Activate on hover    
                obj.hover(function(){
                    // remove already existing tooltip
                    $('#'+settings.toolTipId).remove();
                    obj.attr({title: ''});
                    buildaToolTip();
                    positionaToolTip();
                }, function(){ 
                    removeaToolTip();
                }); 
            }           

            // Click activated aToolTip
            if(tipContent && settings.clickIt){
                // Activate on click    
                obj.click(function(el){
                    // remove already existing tooltip
                    $('#'+settings.toolTipId).remove();
                    obj.attr({title: ''});
                    buildaToolTip();
                    positionaToolTip();
                    // Click to close tooltip
                    $('#'+settings.closeTipBtn).click(function(){
                        removeaToolTip();
                        return false;
                    });      
                    return false;           
                });
            }

            // Follow mouse if enabled
            if(!settings.fixed && !settings.clickIt){
                obj.mousemove(function(el){
                    $('#'+settings.toolTipId).css({
                        top: (el.pageY - $('#'+settings.toolTipId).outerHeight() - settings.yOffset),
                        left: (el.pageX + settings.xOffset)
                    });
                });         
            }           

        }); // END: return this
    };
})(jQuery); 
```

当接近右边距时，如何修改我的工具提示以翻转翻转？现在我他们消失在右边和上边距。我还需要它们在 350px 之后换行。我尝试将以下内容添加到函数中，但没有结果：

```
max-width: 350px,
collision: "flipfit flip", 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:05:29.123

你的问题就在这里：

```
positionaToolTip = function(){//this is not toggling between the two.
                $('#'+settings.toolTipId).css({
                    top: (obj.offset().top - $('#'+settings.toolTipId).outerHeight() - settings.yOffset) + 'px',
                    left: (obj.offset().left + obj.outerWidth() + settings.xOffset) + 'px'
                })
                // added delay() call...
                .stop().delay(1000).fadeIn(settings.inSpeed, function(){
                    if ($.isFunction(settings.onShow)){
                        settings.onShow(obj);
                    }
                });             
            }, 
```

也许添加这样的东西会起作用：

```
 var $tooltip = $('#' + settings.toolTipId),
       $win = $(window),
       winLeft = $win.scrollLeft(),
       objWidth = obj.outerWidth(),
       tipWidth = $tooltip.outerWidth(),
       offset = $obj.offset(),
       ttWidth = $tooltip.outerWidth(),
       ttHeight = $tooltip.outerHeight();
   $win.width() < (offset.left - winLeft + objWidth + tipWidth + ttWidth) ?
    $tooltip//reversed (to left)
     .addClass("reversed")
     .css({
      left: offset.left - winLeft - tipWidth - ttWidth,
      top: offset.top - $win.scrollTop() + $obj.outerHeight() / 2 + ttHeight
     })
   :
    $tooltip//standard (to right)
     .css({
      left: offset.left - winLeft + objWidth + ttWidth,
      top: offset.top - $win.scrollTop() + $obj.outerHeight() / 2 + ttHeight
     }); 
```

# powershell - Powershell 中不同的文件类型列表

> ID：13921537
> 
> 赞同：26
> 
> 时间：2012-12-17T20:19:04.777
> 
> 标签：powershell

我正在尝试在 Powershell 中编写一个单行代码，其中列出了文件夹（及其子文件夹）中的所有文件类型。

到目前为止我有这个：

```
Get-ChildItem D:\Audio -Recursive | Select-Object PSParentPath, Extension | Export-Csv D:\Test.csv 
```

但是，我想做得更好，并且对于每个文件夹，每个找到的扩展名只显示一次。

例如，假设我在 D:\Audio\foo 中有 10 个 mp3 文件和 1 个 jpg 文件，在 D:\Audio\bar 中有 5 个 flac 文件和 1 个 txt 文件。我希望输出为：

*   富.mp3
*   富.jpeg
*   酒吧.flac
*   酒吧.txt

我想我应该使用 Get-Unique 但是如何在 Extension 属性上而不是在 Path 属性上指定它？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-18T04:50:24.023

只需将 -Unique 添加到 Select-Object：

```
Get-Childitem -Recurse | Select-Object PSParentPath,Extension -Unique 
```

（此外，DirectoryName 在这里可能比 PSParentPath 更好）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-01-29T10:04:20.463

我完成了 Jimmeh 的解决方案，使用 -file 仅获取文件

```
Get-ChildItem "c:\temp" -Recurse -file | select directoryname, Extension -Unique 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:58:01.330

试试这个：

```
Get-ChildItem D:\Audio -Recurse | Group-Object psparentpath, extension | ? {(($_.Name -split ", .")[1]) -ne $Null } | ft -AutoSize @{Expression={(($_.Name.Split("\"))[$_.Name.Split("\").Length -1] -split ",")[0]};Label="Folder"}, @{Expression={($_.Name -split ", .")[1]};Label="Extension"} 
```

要显示文件夹 + 扩展名的完整路径，请尝试以下操作。

```
Get-ChildItem D:\Audio -Recurse | Group-Object psparentpath, extension | ? {(($_.Name -split ", .")[1]) -ne $Null } | ft -AutoSize @{Expression={($_.Name.Replace("Microsoft.PowerShell.Core\FileSystem::","") -split ", .")[0]};Label="Folder"}, @{Expression={($_.Name -split ", .")[1]};Label="Extension"} 
```

# sql - 使用多个 UNION 重写 SQL Server 查询

> ID：13921542
> 
> 赞同：2
> 
> 时间：2012-12-17T20:19:23.753
> 
> 标签：sql, sql-server, union, unpivot

有没有更好（更有效）的方式来编写这个查询？似乎应该有一种方法可以只用一个`UNION`.

询问：

```
SELECT 'Value1' as PropertyKey, PropertyValue=(SELECT Value1 FROM MyTable WITH (NOLOCK))
UNION
SELECT 'Value2' as PropertyKey, PropertyValue=(SELECT Value2 FROM MyTable WITH (NOLOCK))
UNION
SELECT 'Value3' as PropertyKey, PropertyValue=(SELECT Value3 FROM MyTable WITH (NOLOCK))
UNION
...
SELECT 'Value100' as PropertyKey, PropertyValue=(SELECT Value100 FROM MyTable WITH (NOLOCK)) 
```

最终，我需要我的结果集有 2 列（`PropertyKey`和`PropertyValue`）。列中的值`PropertyKey`将是我表中列的名称，列中的值`PropertyValue`将是相应的值。

`UNION`如果我总是从同一张表中选择，是否可以只用一个来写这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:22:47.387

如果您有权访问该`UNPIVOT`功能，则可以通过以下方式使用它：

```
select PropertyKey, PropertyValue
from yourtable
unpivot
(
  PropertyValue
  for PropertyKey in (Value1, Value2, Value3) -- list other columns here
) unpiv 
```

要记住的关键部分`UNPIVOT`是数据类型必须相同，因此您可能必须转换数据类型：

```
select PropertyKey, PropertyValue
from
(
    select CAST(value1 as varchar(10)), 
         CAST(value1 as varchar(10)), ...
    from yourtable
) src
unpivot
(
  PropertyValue
  for PropertyKey in (Value1, Value2, Value3) -- list other columns here
) unpiv 
```

您甚至可以动态执行此操作，这将在运行时获取要转换的列列表：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)    

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('yourtable')
         for xml path('')), 1, 1, '')

set @query 
  = 'select PropertyKey, PropertyValue
     from yourtable
     unpivot
     (
        PropertyValue
        for PropertyKey in ('+ @colsunpivot +')
     ) u'

exec(@query) 
```

如果你被卡住了，使用你当前的版本，那么我会稍微改变它并使用 a`UNION ALL`而不是`UNION`：

```
SELECT 'Value1' as PropertyKey, Value1 PropertyValue
FROM MyTable
UNION ALL
SELECT 'Value2' as PropertyKey, Value2 PropertyValue
FROM MyTable 
```

# z3 - 使用 Z3 作为 SAT 求解器的 Z3 极性

> ID：13921545
> 
> 赞同：7
> 
> 时间：2012-12-17T20:19:27.407
> 
> 标签：z3

我正在尝试使用 Z3 解决具有 12000 多个布尔变量的 SAT 问题。我希望大多数变量在解决方案中都会评估为假。有没有办法引导或提示 Z3 作为 SAT 求解器首先尝试“极性错误”？我已经用 cryptominisat 2 试过了，结果很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T21:05:36.557

Z3 是求解器和预处理器的集合。我们可以为一些求解器提供提示。使用该命令时`(check-sat)`，Z3 会自动为我们选择求解器。`(check-sat-using <strategy>)`如果我们想自己选择求解器，我们应该这样做。例如，以下命令将指示 Z3 使用布尔 SAT 求解器。

```
(check-sat-using sat) 
```

我们可以强制它总是先尝试“极性错误”，方法是：

```
(check-sat-using (with sat :phase always-false)) 
```

我们还可以控制预处理步骤。如果我们想在调用之前将公式放入 CNF 中`sat`，我们应该使用：

```
(check-sat-using (then tseitin-cnf (with sat :phase always-false))) 
```

**编辑**：如果您使用的是 DIMACS 输入格式和 Z3 v4.3.1，则无法使用命令行为所有可用求解器设置参数。下一个版本将解决这个限制。同时，您可以使用以下命令下载进行中的分支：

```
git clone https://git01.codeplex.com/z3 -b unstable 
```

并编译 Z3。然后，为了强制极性为假，我们使用命令行选项

```
sat.phase=always_false 
```

该命令`z3 -pm:sat`将显示此模块的所有可用选项。

**结束编辑**

以下是 SMT 2.0 中的完整示例（也可[在线获取](http://rise4fun.com/Z3/pmau)）：

```
(declare-const p Bool)
(declare-const q Bool)
(declare-const r Bool)
(declare-const s Bool)

(assert (or (not p) (not q) (not r)))
(assert (or r s))
(assert (or r (not s)))
(assert (or r (and p q)))

(echo "With always false")
(check-sat-using (then tseitin-cnf (with sat :phase always-false)))
(get-model)
(echo "With always true")
(check-sat-using (then tseitin-cnf (with sat :phase always-true)))
(get-model) 
```

# java - 使用 JDBC 将 Android 连接到 SQL Server

> ID：13921546
> 
> 赞同：3
> 
> 时间：2012-12-17T20:19:27.967
> 
> 标签：java, android, sql-server, jdbc

我目前正在为 Android 制作一个应用程序，它应该将其数据同步到 MSSQL Server 2008。我目前正在测试使其工作的方法，因为我以前从未这样做过。我应该提到，只要设备连接到 USB 端口而不是通过 WiFi，它就会同步，因为公司不想在网络上注册设备。

到目前为止，这就是我将 Java 连接到 SQL Server 的方法。这是一个简单的 Select 代码（我目前正在使用 SQLExpress 进行测试）：

```
 String connectionUrl = "jdbc:sqlserver://127.0.0.1:1433;" +
             "databaseName=Android;integratedSecurity=true;";

  // Declare the JDBC objects.
  Connection con = null;
  Statement stmt = null;
  ResultSet rs = null;

  try {
     // Establish the connection.
     Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
     con = DriverManager.getConnection(connectionUrl);

     // Create and execute an SQL statement that returns some data.
     String SQL = "SELECT * FROM AndroidTest;";
     stmt = con.createStatement();
     rs = stmt.executeQuery(SQL);

     // Iterate through the data in the result set and display it.
     while (rs.next()) {
        System.out.println(rs.getString(1) + " " + rs.getString(2));
     }
  }

  // Handle any errors that may have occurred.
  catch (Exception e) {
     e.printStackTrace();
  }
  finally {
     if (rs != null) try { rs.close(); } catch(Exception e) {}
     if (stmt != null) try { stmt.close(); } catch(Exception e) {}
     if (con != null) try { con.close(); } catch(Exception e) {}
  } 
```

现在，我在 Android 中尝试了同样的事情，这就是它的样子：

```
package com.example.testsqlserver;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.Statement;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;

public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void clickSend(View view) {
        (new Thread(new TestThread())).start();
    }
    public class TestThread extends Thread {
      public void run() {
          String connectionUrl = "jdbc:sqlserver://127.0.0.1:1433;" +
                     "databaseName=Android;integratedSecurity=true;";

          // Declare the JDBC objects.
          Connection con = null;
          Statement stmt = null;

          try {
             // Establish the connection.
             Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
             con = DriverManager.getConnection(connectionUrl);

             //Get information from EditText
             EditText txtTest = (EditText)findViewById(R.id.txtTest);
             EditText txtName = (EditText)findViewById(R.id.txtName);
             String test = txtTest.getText().toString();
             String name = txtName.getText().toString();

             // Create and execute an SQL statement that returns some data.
             String SQL = "INSERT INTO AndroidTest VALUES('" + test + "', '" + name + "');";
             stmt = con.createStatement();
             stmt.executeUpdate(SQL);
             Log.e("Success", "Success");
          }

          // Handle any errors that may have occurred.
          catch (Exception e) {
             e.printStackTrace();
              Log.e("Error", e.toString());
          }
          finally {
             if (stmt != null) try { stmt.close(); } catch(Exception e) {}
             if (con != null) try { con.close(); } catch(Exception e) {}
          }
      }

      public void main(String args[]) {
          (new TestThread()).start();
      }
    }
} 
```

在第一个示例中，它运行良好，但在第二个示例中，它给了我这个错误：

> 12-17 20:15:12.589: E/Error(1668): com.microsoft.sqlserver.jdbc.SQLServerException: TCP/IP 连接到主机 127.0.0.1，端口 1433 失败。错误：“在 403 毫秒后无法连接到 /127.0.0.1（端口 1433）：isConnected 失败：ECONNREFUSED（连接被拒绝）。验证连接属性，检查 SQL Server 实例是否正在主机上运行并接受 TCP/IP 连接在端口，并且没有防火墙阻止与端口的 TCP 连接。”。

我第一次运行第一个代码时遇到了这个错误，我只需要在 SQL Server 设置中启用端口 1433。不过，我不明白，为什么它不能在第二张桌子上工作。这是相同的代码，唯一的区别是它是通过按下按钮执行的，并且我让它在单独的线程上运行。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T20:27:40.417

[请参阅有关Emulator Netorking](http://developer.android.com/tools/devices/emulator.html#emulatornetworking)的这一部分。

您需要使用 10.0.2.2，它允许您从模拟器与开发机器 127.0.0.1 地址进行通信。

您可能还需要进行一些端口重定向（请参阅该文档中的进一步内容）。

# xcode - XCode 有进入超类的热键吗？

> ID：13921547
> 
> 赞同：0
> 
> 时间：2012-12-17T20:19:29.427
> 
> 标签：xcode, hotkeys

有没有办法做到这一点？我看了看，找不到方法。将使我的生活更轻松，而不必转到 .h 文件并跳转到超类的定义，或者单击后退按钮左侧的图标并选择超类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:37:06.097

不，它不是afaik ..我总是转到标题（我认为是CTRL + CMD + UP）并cmd +单击超类以打开ITS标题

# java - 使用异常的 Java 类

> ID：13921548
> 
> 赞同：0
> 
> 时间：2012-12-17T20:19:32.997
> 
> 标签：java, exception

我有下一个代码，基于使用 Java UDPSocket() 的示例（不是内置类）：

```
package BomberButti;
import java.io.*; 
import java.net.*; 

/**
 * BomberServer
 * Hier wordt de Server opgezet waarop Clients kunnen connecteren om vervolgens tegen elkaar te spelen
 * @author Kaj
 */
public class BomberServer {

    public BomberServer() {
        waitForPlayers();
    }

    public static void waitForPlayers() throws Exception {
        try {
            DatagramSocket serverSocket = new DatagramSocket(9876); //Socket openen

            byte[] receiveData = new byte[1024]; //Ontvangen gegevens
            byte[] sendData  = new byte[1024];  //Te verzenden gegevens

            while(true) {
                receiveData = new byte[1024]; 

                //Ontvangen data (als die er is) ophalen
                DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length); 

                System.out.println ("Waiting for datagram packet");

                serverSocket.receive(receivePacket); 

                String sentence = new String(receivePacket.getData()); 

                InetAddress IPAddress = receivePacket.getAddress(); 

                int port = receivePacket.getPort(); 

                System.out.println ("From: " + IPAddress + ":" + port);
                System.out.println ("Message: " + sentence);

                String capitalizedSentence = sentence.toUpperCase(); 

                sendData = capitalizedSentence.getBytes(); 
                sendData = new String("Request accepted").getBytes();
                DatagramPacket sendPacket = 
                   new DatagramPacket(sendData, sendData.length, IPAddress, 
                                     port); 

                serverSocket.send(sendPacket); 

              } 
        }
        catch(SocketException ex) {
            System.out.println("UDP Port 9876 is occupied.");
            System.exit(1);
        }
    }
    public static void main(String args[])  {
        BomberServer server = new BomberServer();
    }
} 
```

尝试运行此代码时，我收到错误“未报告的异常异常；必须被抓住或宣布被抛出”。

我知道这与我放置在我的 waitForPlayers() 方法声明后面的“抛出异常”有关。但是当我删除这个 throws Exception 部分时，我在该行收到一个错误： serverSocket.receive(receivePacket); 'unreporter 异常 IOException; 必须宣布被抛出'所以我想我尝试的两种方法都不是正确的方法。

那么我该怎么做才能正确呢？

真挚地，

卢克索

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:25:41.333

里面的代码`waitForPlayers()`可以抛出 IOException，所以方法应该声明它抛出 IOException（而不是 Exception，因为 Exception 太模糊了）：

```
public static void waitForPlayers() throws IOException { 
```

由于此方法可以抛出 IOException，并且您从构造函数调用此方法而不会捕获 IOException，因此构造函数还必须声明它会抛出 IOException：

```
public BomberServer() throws IOException { 
```

当然，调用这个构造函数的方法也必须要么捕获 IOException，要么声明它抛出 IOException 等等，直到你可以处理这个 IOException，从而捕获它来处理它。

阅读[有关异常的教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/index.html)。

重要提示：捕获异常，打印其堆栈跟踪，并像什么都没发生一样继续，这通常不是处理异常的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:29:43.233

添加`throws Exception`到`BomberServer()`和`main()`：

```
public class BomberServer {

    public BomberServer() throws Exception {
        waitForPlayers();
    }

    public static void waitForPlayers() throws Exception {
        ...
    }
    public static void main(String args[]) throws Exception {
        BomberServer server = new BomberServer();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:25:19.853

错误消息可能会更清楚一些。中的声明`waitForPlayers()`大部分都很好，但是您需要在调用它的代码（以及调用它的代码......）中进行类似的声明，直到您一直到`main( )`或一个`try...catch`块。

说得更具体一些，`IOException`而不是仅仅说出来`Exception`可能会更安全一些。

# excel - 如何选择 VBA 上的变量引用的单元格

> ID：13921549
> 
> 赞同：2
> 
> 时间：2012-12-17T20:19:34.793
> 
> 标签：excel, vba, reference

这就是我到目前为止所拥有的。我需要一个子来复制一组单元格并将它们的值粘贴到下一个可用的空单元格上。我得到的错误是选择第一个可用的单元格。有什么想法吗？

```
Dim workline As Integer
Sub Test()
With ActiveSheet
workline = 11
    While .Cells(workline, 2) <> Empty
    workline = workline + 1
    Wend
End With
    Range("B3:CH9").Select
    Selection.Copy

     range(workline,2) .Select

Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False
Application.CutCopyMode = False
 Message = MsgBox("Data copied succesfully", vbInformation + vbOKOnly, "Aecon Mining")
End Sub` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T20:29:52.363

未在 Excel 中测试，但应该可以工作，或者至少可以为您指明正确的方向：

```
Range("B3:CH9").Copy
Range("B2").end(xlDown).offset(1,0).paste 'first available cell 
```

并且不要到处使用那些 .Select 和 selection ，它们完全是在浪费时间。

# php - 在 LOAD INFILE 到 MySQL 之前转义 CSV 文件

> ID：13921550
> 
> 赞同：0
> 
> 时间：2012-12-17T20:19:58.873
> 
> 标签：php, mysql, phpmyadmin

我正在编写一个脚本，该脚本会定期将 CSV 文件上传到 MySQL 数据库中。问题是 CSV 文件中的一个字段包含用户生成的文本，其中可能包括引号和其他对 MySQL 不友好的字符。

我已经确定上传 CSV 文件的最有效方法是通过 MySQL 的“LOAD DATA INFILE”命令。这是我上传 CSV 时出现在 MyPHPAdmin 中的命令：

```
LOAD DATA LOCAL INFILE '/home/myfolder/tmp/property_re_1.csv' REPLACE INTO TABLE `markers`
    FIELDS TERMINATED BY ';' ENCLOSED BY '"' ESCAPED BY '\\'
    LINES TERMINATED BY '\r\n' # 2 rows affected. 
```

简单地使用此命令加载 CSV 是行不通的，因为该进程在遇到“””时立即终止，并且“ESCAPED BY '\'”似乎没有达到其目的。

在这种情况下，我想我可能必须首先使用 PHP 以编程方式转义 CSV 文件中的引号。然后使用 SQL 中的 LOAD DATA INFILE 命令将“转义”文件加载到 MySQL 中。

我确信这是一个具有“最佳实践”解决方案的常见问题。本质上，我的脚本需要在将 CSV 文件加载到 MYSQL 表之前“清理”它。

这是我正在使用的实际 SQL 表和 CSV 文件的链接，以帮助更聪明的人围绕这个问题思考：[https ://www.dropbox.com/sh/4iq10i51qlqyq8q/UjEQwvXKDA](https://www.dropbox.com/sh/4iq10i51qlqyq8q/UjEQwvXKDA)

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:54:39.850

Dropbox 上的数据文件具有由 分隔的字段`,`，可选地由 括起来，由`"`分隔的`\n`行和包含标题行的行；而您上面的语句适用于一个文件，其字段由 分隔`;`，始终由 包围`"`，行由 分隔`\r\n`且不包含任何标题行。

也就是说，它也适用于名为的文件`data.csv`，而 Dropbox 上的文件名为`property_re_1.csv`.

```
mysql> CREATE TABLE IF NOT EXISTS `markers` (
    ->    `L_ListingID` int(20) NOT NULL,
    ->    `L_Class` int(5) NOT NULL,
    ->    `L_Type_` int(10) NOT NULL,
    ->    `L_Status` varchar(10) NOT NULL,
    ->    `L_AskingPrice` float NOT NULL,
    ->    `L_Remarks` text NOT NULL,
    ->    `L_Address` varchar(50) NOT NULL,
    ->    `L_City` text NOT NULL,
    ->    `L_State` varchar(10) NOT NULL,
    ->    `LO1_OrganizationName` varchar(65) NOT NULL,
    ->    `LA1_AgentLicenseID` int(20) NOT NULL,
    ->    `LA1_UserFirstName` varchar(50) NOT NULL,
    ->    `LA1_UserLastName` varchar(50) NOT NULL,
    ->    `L_PictureCount` int(4) NOT NULL,
    ->    PRIMARY KEY (`L_ListingID`)
    ->) ENGINE=MyISAM DEFAULT CHARSET=latin1;
查询正常，0 行受影响（0.21 秒）

mysql>LOAD DATA LOCAL INFILE 'property_re_1.csv' 
    -> REPLACE INTO TABLE `markers`
    -> FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' ESCAPED BY '\\'
    -> LINES TERMINATED BY '\n' IGNORE 1 LINES;
查询正常，315 行受影响（0.01 秒）
记录：315 删除：0 跳过：0 警告：0

```

# iphone - 上传申请流程

> ID：13921554
> 
> 赞同：1
> 
> 时间：2012-12-17T20:20:09.240
> 
> 标签：iphone, xcode

我试图找出我需要使用应用程序加载器上传的特定文件是什么，我在哪里可以找到这个文件......</p>

我虽然应该上传 .app.dsym 文件，但它无法打开。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:35:40.117

打开 Xcode，然后打开首选项。在上部选项卡栏中，单击“位置”。您现在将看到 IDE 存储派生数据的位置。（当您单击小箭头时，文件夹将在 Finder 中打开）。

现在去

> DerivedData/<YourApp>/Build/Products/Release-iphoneos.

此目录中的 .app 文件必须被压缩，然后可以通过应用程序加载器上传（如果它使用分发证书签名）。

# html - 使用 CSS 将文本流中的图像移动到右侧

> ID：13921559
> 
> 赞同：2
> 
> 时间：2012-12-17T20:20:43.663
> 
> 标签：html, css

我有一些基本的标记：

```
<div class="page_content">
    <p>A paragraph of text.</p>
    <p>Another paragraph of text.</p>
    <img src="image.jpg" />
    <p>Some more text.</p> 
</div> 
```

段落的大小受到限制，即`.page_content p{min-width:24em;max-width:36em}`. 我的目标是响应式布局。

在较大的浏览器宽度下，我想将图像移出主要文本流以实现沿这些线的布局（上面 html 中的 nb 图像可能与下面显示的位置不匹配！）：

```
    ===== = 图片

    --------
    --------
    --------

    -------- ======
    -------- ======
    -------- ======
    --------

    --------
    --------
    --------

```

如果我`float:right`是图像，它们会从文本中滑出，顶部边缘与它们的“父”段落一致。但是，它们一直对齐到页面的右侧。我似乎无法找到一种方法让它们与它们所在段落的右侧齐平。

我不想将图像移出主 page_content div，因为在小屏幕宽度下，我希望图像出现在与文本相同的“列”中 - 响应式设计。

关于如何实现这一点的任何想法？可能吗？我已经玩了几个小时，但我一点也不聪明！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:33:04.147

我会这样做：http: [//jsfiddle.net/RjDaS/16/](http://jsfiddle.net/RjDaS/16/)

我会将每个 paragraf 标签包装在一个 div 中（这个有一个名为 section 的类）并让图像在它旁边。这也适用于您的响应式设计。但是我无法让您的图像留在 page_content div 中。

```
<div class="page_content">
    <p>A paragraph of text.</p>
    <div class="Section">
        <p>Another paragraph of text.</p>
        <img src="image.jpg" />
    </div >
    <p>Some more text.</p> 

</div> 
```

​</p>

CSS：

```
.Section p{

    float:left;
    /*min-width:24em;*/
    max-width:36em;
        margin-right:10px;
}
.Section img{
    float:left;
}
.Section{
    overflow:hidden;
}
​
​ 
```

编辑：向左添加浮动，使其靠近 p 标签。（删除了 min-width 以获得更好的可视化）

# javascript - 有没有办法从客户那里确定访问者国家？

> ID：13921563
> 
> 赞同：0
> 
> 时间：2012-12-17T20:20:59.737
> 
> 标签：javascript, jquery, google-maps, geocoding

我正在使用谷歌地图和地理编码 API 在用户输入邮政编码后检索经纬度/经度，但我想将邮政编码限制在该用户所在的国家/地区，这样我就不会得到多个结果。

有没有办法从客户端可靠地确定访问者的原籍国，可能使用 jquery 或可能以某种方式解码用户代理？

我的电话将结束，看起来像这样：

```
var country = ???
var postcode = document.getElementById('postcode').value + ', ' + country;

var geocoder = new google.maps.Geocoder();         
geocoder.geocode({ 'address': postcode }, function (results, status) {          
   if (status == google.maps.GeocoderStatus.OK) {  
       ...
   }
}); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:29:42.080

您可以使用访问者 IP 地址在 GeoIP 表中查找他的来源。周围有各种桌子，例如[来自 MaxMind 的桌子](http://www.maxmind.com/en/opensource)。

请注意，如果用户位于代理服务器后面或者您无法获取 IP，这可能会失败。除此之外，它应该是一种非常可靠的方法，当然取决于您的 GeoIP 表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T23:22:46.223

为了不依赖第三方的好处，您可以使用[Google 的 Loader](https://developers.google.com/loader)获取客户端的位置。[这是一个很好](https://stackoverflow.com/questions/3940767/how-to-get-client-location-using-google-maps-api-v3)的使用示例，加载 Google Maps API 和 ClientLocation。

# vim - 如何设置这个特定的 vimrc 配置

> ID：13921565
> 
> 赞同：1
> 
> 时间：2012-12-17T20:21:10.073
> 
> 标签：vim

我没有太多经验，希望你们能帮助我，因为我周围没有人可以。

我开始使用 Vim，我现在正在设置我的 vimrc，但这是很多工作，我想专注于学习如何使用它，而不是将我的时间浪费在配置简单的东西上，比如文本突出显示或缩进，每个人都有的东西......所以我想使用这个通常由 Steve Francia 提供的vimrc [https://github.com/spf13/spf13-vim 。](https://github.com/spf13/spf13-vim)

问题是他使用 gitHub，我想在我的机器上本地拥有一切，你能告诉我怎么做吗？当然，包括所有插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T01:42:00.877

> ......这是很多工作......

准备好不断地花一些时间学习新的 Vim 技能并改进您的配置（或选择一个不同的编辑器/IDE，它可以提供更无忧无虑但也更受限制的体验）。Vim 的创建者 Bram Moolenaar 为[良好的文本编辑习惯](http://www.moolenaar.net/habits.html)提出了令人信服的案例。相信我，这不是浪费时间，但你需要克服对即时满足的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:32:47.610

我建议只打开您提到的缩进和语法功能，然后收工。现在不要担心你不需要加载的扩展。

```
$ cat > $HOME/.vimrc
syntax on
filetype plugin indent on
^D
$ 
```

是的，我使用类似他的设置（我使用 Pathogen），当然，能够将 git 模块克隆到我的`.vim/bundle`目录中是很酷的，但这是一个复杂的配置，现在只会分散你的注意力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T08:40:29.127

在 Vim 中编程所需的绝对最小值在接受的答案中。我会添加`set hidden`一些其他的，但你*不需要*更多。特别是隐藏本机功能或无用 Git 集成插件的奇怪快捷方式。

实际上，不要从一开始就安装任何插件，尤其是像那种“分发”这样的垃圾堆。`$ vimtutor`如果需要，请多次关注。了解如何使用`:help`。不要逐字复制任何人的 vimrc，如果您从网上的随机 vimrc 中获取某些内容，请阅读文档的相关部分以确保您了解它的作用、它的作用以及原因。随着你的前进，你的`~/.vimrc`和`~/.vim/`会随着你的成长和缩小。这就是它的完成方式。

如果您正在寻找初学者级别的信息，[LearnVim](https://github.com/dahu/LearnVim)是一个相当不错的 Vim 介绍，您可以将其安装为 Vim 文档的一部分。我建议你安装它并仔细阅读它：它固执己见，但充满了低级信息，这些信息无疑会对你未来有所帮助。当我开始时，我肯定会喜欢阅读它。

正如 Ingo 所说，如果这一切看起来势不可挡，没有人会嘲笑你决定使用另一个编辑器/IDE。在我所有的团队中，我是唯一一个使用 Vim 的人（见鬼，我什至不把它用于所有事情），而且我们编写的代码同样好和/或坏。

无论如何，如果你*真的*想走“发行版”路线，你必须学习[Git 和 Github 的基础知识](https://help.github.com/)，并按照发行版维护者提供[的说明进行操作。](https://github.com/spf13/spf13-vim#installation)

# c# - 时间：2019-04-01 标签：c#remote powershell Hyperv cmdlet start-vm -Vm

> ID：13921567
> 
> 赞同：0
> 
> 时间：2012-12-17T20:21:15.780
> 
> 标签：c#, powershell, hyper-v

我正在尝试传递该 powershell 命令的 VM 对象：

```
Start-Vm -Vm <VirtualMachine> 
```

我想通过 c# 代码来做到这一点。所以我创建了一个远程运行空间等等：

```
class RemotePowershell
{
    private const string SHELL_URI = "http://schemas.microsoft.com/powershell/Microsoft.PowerShell";
    private WSManConnectionInfo connectionInfo = null;

    public RemotePowershell(string hostname, string username, string livepassword)
    {

        SecureString password = new SecureString();
        foreach (char c in livepassword.ToCharArray()) { password.AppendChar(c); }
        password.MakeReadOnly();

        PSCredential creds = new PSCredential(string.Format("{0}\\{1}", hostname, username), password);

        var targetWsMan = new Uri(string.Format("http://{0}:5985/wsman", hostname));
        connectionInfo = new WSManConnectionInfo(targetWsMan, SHELL_URI, creds);
        connectionInfo.OperationTimeout = 4 * 60 * 1000; // 4 minutes.
        connectionInfo.OpenTimeout = 1 * 60 * 1000; // 1 minute.
        connectionInfo.AuthenticationMechanism = AuthenticationMechanism.Negotiate;       
    }

    public void RunScript(string scriptText, Collection<CommandParameter> parametters)
    {
        using (Runspace runspace = RunspaceFactory.CreateRunspace(connectionInfo))
        {
            runspace.Open();

            using (PowerShell ps = PowerShell.Create())
            {
                ps.Runspace = runspace;
                ps.AddCommand(scriptText);
                ps.AddParameters(parametters);

                Collection<PSObject> results = ps.Invoke();    
            }
            runspace.Close();
        } 
```

我用这样的扩展方法运行它：

```
public static class PowershellExtentionMethods
{
    private static RemotePowershell powerShellSession = new RemotePowershell("HOSTNAME", "USERNAME", "PASSWORD");

    public static void PowershellExec(this string commands, Collection<CommandParameter> parameters)
    {
        powerShellSession.RunScript(commands, parameters);
    }
}

var cmd = "Start-VM";
Collection<CommandParameter> cpc = new Collection<CommandParameter>();
cpc.Add(new CommandParameter("Vm",this.vm));
cmd.PowershellExec(cpc); 
```

并且没有任何附加的虚拟机不会启动并且代码毫无例外地运行。

所以我想知道我是否使用正确的技术将对象传递给 cmdlet...

如果有人作为一个想法，他是受欢迎的;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T16:51:28.150

一些想法.. 您的示例看起来不错，但是您使用的是什么类型的虚拟化？我根据您使用 Hyper-V 的示例猜测。

检查事项：

*   服务器操作系统，如果是 2008 或 2008 R2，来自 System Center 或第三方库的命令在哪里？无论哪种情况，我都没有看到使用 Start-VM 命令加载模块的调用。在调用之前确保 cmdlet 或函数可用。如果是 Server 2012，自动加载应该处理加载命令，但您需要确保 Hyper-V 模块在盒子上可用并加载到会话中。
*   您传递给 Start-VM 的“this.VM”的类型是什么？根据您用于管理 VM 的模块，对象的类型很重要。
*   虚拟机存储是什么样的？它是本地的还是 SMB 共享的？如果它在 SMB 共享上，是否有正确的凭证委派？

# mysql - MySQL 最大推荐的 BLOB 字段数

> ID：13921572
> 
> 赞同：0
> 
> 时间：2012-12-17T20:21:31.543
> 
> 标签：mysql

我正在更新 MySQL 中的一行，该行当前有 15 个 varchar(2500) 列以及一些其他小型列。我需要允许用户在这些列中输入更多数据，将它们转换为 BLOBS 会更好吗？每行是否有最大推荐的 BLOBS 数？

关于不超过每行的最大字节数，同时仍然允许用户在每列中输入多少的灵活性，最佳实践是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:16:30.040

不，没有建议的最大连续 BLOBS 数。您实际上只受行的最大大小的限制。访问每个 BLOB 都会产生一些性能开销（行包含指向存储在其他地方的 BLOB 数据的指针，而不是访问实际存储在行中的列值。）

最佳做法是在行中包含最常访问的列，并将可变长度列的大小限制在实际范围内。当列的大小超过其他数据类型允许的最大值或行的长度超过允许的最大值时，请考虑 TEXT 和/或 BLOB 列。或者，考虑为不常访问的“long-ish”列使用单独的子表。

# eclipse - 在 Eclipse 中配置 GWT 代码验证

> ID：13921576
> 
> 赞同：2
> 
> 时间：2012-12-17T20:21:48.817
> 
> 标签：eclipse, gwt, eclipse-juno, gwt-2.5

我将首先提出一些我遇到的具体问题，并根据上下文进行跟进：

*   如何控制如何配置 eclipse 中的 GWT 代码验证？
*   GWT 代码验证有什么作用？
*   当它扫描 java 类时，它会加载任何类吗？
*   为什么它扫描不在客户端/共享包中的类？我怎样才能让它停止？

我正在运行 Eclipse Juno。最近我团队的另一位成员将我们的项目从 GWT 2.4 升级到 2.5，我注意到的第一个影响是 GWT 代码验证会消耗资源，使我的工作空间停止，并最终因 java 堆错误而失败 - 迫使我杀死日食。

请注意，我在我的 中配置了很多堆`eclipse.ini`，特别是：`-Xms256m -Xmx1536m`

尽管如此，为了重新获得对我的工作区的控制权，我未选中`Project --> Build Automatically`，将 eclipse 配置为使用 显示堆使用情况`Preferences --> General --> Show Heap Status`，并将我的堆大小`eclipse.ini`增加到`-Xms2048m -Xmx3072m`只是作为一个实验来看看会发生什么。

完成此操作后，我再次打开 eclipse 并让它自动构建，当它执行 GWT 代码验证阶段时，要特别注意进度条，以及堆大小：它爬了，爬了，爬了，最后在某个地方达到了峰值2G以北消耗。最终，它完成了（尽管花费的时间太长，根本不是合理的时间）。在完成后的一分钟内，一个巨大的垃圾收集事件使堆减少到只有 300 兆字节。

我在进度条下看到的更有趣：GWT 代码验证似乎正在扫描`*.java`我整个项目中的每个文件：不仅仅是那些在`client`和`shared`包中的文件，而是所有文件。我看到了 GWT 编译器在一百万年内永远不会看到的类名。

所以看起来，虽然 GWT 编译器足够聪明，可以从入口点 GWT 模块文件开始并从那里搜索，但 GWT 代码验证过程似乎对所有内容进行了蛮力搜索。

如果它在此过程中进行任何类加载，上帝会帮助它。其中一些旧的服务器端类包含我祖先的古老罪恶，在静态初始化程序中连接到外部资源等等。

有什么方法可以让我将此验证配置为对其扫描的内容更加简洁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:30:07.723

我正在浏览 Eclipse Validator 文档。它指出项目构建验证器可以允许可配置的过滤器。[http://www.eclipse.org/webtools/wst/components/validation/ValidationOverview.html](http://www.eclipse.org/webtools/wst/components/validation/ValidationOverview.html)

但是我在 GPE 源代码上找不到任何相关的东西 @ [http://code.google.com/p/google-plugin-for-eclipse/source/search?q=validator&origq=validator&btnG=Search+Trunk](http://code.google.com/p/google-plugin-for-eclipse/source/search?q=validator&origq=validator&btnG=Search+Trunk)

同时，我们坚持使用 Preferences -> Validation -> Suspend All Validators 禁用 eclipse 中的所有验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T10:12:33.997

您应该禁用对已编译 JavaScript 文件的验证。这有助于解决 Eclipse 性能问题：[https ://stackoverflow.com/a/19909401/1040124](https://stackoverflow.com/a/19909401/1040124)

# .net - fiddler 使用 .NET HttpWebRequest 和 HttpWebResponse 捕获 https 请求和响应

> ID：13921578
> 
> 赞同：1
> 
> 时间：2012-12-17T20:21:55.363
> 
> 标签：.net, httpwebrequest, fiddler, httpwebresponse

有什么方法可以让 Fiddler 捕获使用 .NET HttpWebRequest 和 HttpWebResponse 发出的 https 请求和响应？

我有请求一些 url 的应用程序。

下一个代码帮助我使用 fiddler 捕获所有 http 请求

```
WebRequest.DefaultWebProxy = new WebProxy("127.0.0.1", 8888); 
```

但是当应用程序收到 https 请求时我遇到了问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T17:09:16.240

解决方案是在添加

```
ServicePointManager.ServerCertificateValidationCallback = Validator 
```

和

```
bool Validator (object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors) { return true; } 
```

感谢马丁·鲍利格

# javascript - 使用 RequireJS 的 Javascript 命名空间，为什么？

> ID：13921581
> 
> 赞同：6
> 
> 时间：2012-12-17T20:22:01.287
> 
> 标签：javascript, jquery, requirejs, javascript-namespaces

我目前正面临关于 javascript 名称空间的争论，我需要社区意见。

**场景：** 负责这个项目的架构师不知何故致力于 RequireJS 并且真的想使用它。

我必须说，该应用程序是一个后台，布局为一个向导，所以你需要在 6 个页面上来回切换，其中包含一些复杂的业务逻辑，最后填写一些我可以在这里描述为流程请求的内容。

好的，没有单页应用程序对这些问题没有任何兴趣。普通的后台 Web 应用程序，多页面，具有非常复杂的 UI，其中每个页面都向服务器请求，并且所有资源（css、javascript 等）都必须在页面加载时加载。

**主要问题：**了解我们正在谈论的应用程序类型，为什么首先需要 RequireJS？

**第二个问题：**为什么要说服 javacript 中命名空间的最佳方法是使用 RequireJS？我错过了什么吗？

**我的观点：** 对我来说这根本没有意义。在这里使用RequireJS很麻烦，因为没有资源是按需加载的，它们都是在页面加载时加载的（只是因为我们在页面加载时都需要它们）。我们至少需要支持 IE8、Chrome、Firefox 和 Opera，而且我们已经在所有这些浏览器上加载资源时遇到了很多麻烦。已经有很多技巧可以确保通过 Require 加载所有内容。

对于命名空间来说，情况更糟。当然可以，但同样，对我来说似乎很麻烦，而且在这件事上实际上非常有限。

所以我错过了什么吗？我需要第三种（或第 100 种）意见。

*   你觉得这怎么样？
*   你用什么？
*   为什么？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T20:42:47.307

AMD 加载程序（RequireJS 就是其中之一）解决了不同的问题：

*   适当的模块化，关注点分离
*   无全球污染
*   没有名字冲突
*   按需加载或部署前优化
*   取决于加载器，用于解决高级问题的插件，例如本地化资源或加载时编译

我是此类加载器的忠实拥护者，发现它们对除非常小的单页应用程序之外的所有应用程序都很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T20:44:34.763

无论它是否是“单页应用程序”，RequireJS 在开发客户端 JavaScript 时有助于解决两件在没有大量开发人员纪律的情况下不容易做到的事情：

**生产与开发环境**

到目前为止，将 JavaScript 应用程序拆分为逻辑上类似于应用程序不同部分的文件是常识。更容易调试和维护。然而，在生产中，传送许多未压缩的文件对性能不利。因此，您将所有文件连接成一个文件，将其缩小（例如，使用 Google 闭包编译器），然后将其作为单个 gzip 压缩文件发送。[使用命令行工具（例如使用GruntJS](http://gruntjs.com) ）有许多不同的方法可以做到这一点，但是如果没有像 RequireJS 这样的脚本加载器，您必须以某种方式为两个不同的用例设置页面（将所有开发文件引用为脚本标签或单个生产.js) 你自己。RequireJS 有一个 NodeJS 构建工具，可以为您完成所有这些工作。

**模块化**

现在将代码保存在单独的文件中就很好了。但是由于 JavaScript 的性质和一切都是全局的，这意味着您仍然可能会遇到奇怪的事情，例如名称冲突。这就是命名空间派上用场的地方。但更好的选择是将所有内容包装到它自己的函数中（它引入了自己的范围）。这就是为什么大多数 JavaScript 代码都采用自执行匿名函数的原因。如果这个函数现在返回一个 API，它想公开你有 web 模块。您可以独立于应用程序测试您的模块 API，并在其他地方重新使用它。

还可以阅读 RequireJS 文档的[Why Web Modules](http://requirejs.org/docs/why.html)部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T20:44:10.800

在我个人看来，使用 javascript 模块系统几乎从来都不是一个坏主意。Requirejs 也不是唯一可能的 javascript 模块加载器（但可能是最流行的一个）。一些替代品是 LABjs 或 HeadJS。

这些加载程序通常很容易使用（一开始并没有太多麻烦），但是当项目变得越来越大时会很有帮助。它们避免了全局空间中的命名冲突，还可以通过最小化/优化模块来支持您的部署步骤。最重要的事实是它们允许您编写更模块化的 JavaScript 代码。

*   你有一些实用功能吗？只需创建一个实用程序模块。
*   您在所有页面上都有一些您需要的功能？将它们放在一个公共模块中。
*   有些页面需要很多特定的 javascript 代码？为这些页面创建一个额外的模块，这样您就不必在其他页面上加载此代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:07:12.213

我目前防止污染全球环境和名称冲突的解决方案是使用`$.extend`.

文件系统树如下所示：

```
RootFolder
  +-> js
  global.js
  ...
   +-> views
       index.js
       page1.js
       page2.js
       ...
index.html
page1.html
page2.html 
```

所以它通常是一个 global.js 文件，其中包含所有应用程序共享代码和每个页面的另一个特定代码。

对于命名空间，我喜欢 $.extend 所以在每个 js 文件上我都有类似的东西：

```
var app = app || {};  

/* only one document ready block per view if needed */
$(document).ready(function(){
    /* initialization code */
});

/* extend the app namespace with the Page1 code */
$.extend(app, {
    page1: {
        SayHi: function SayHi(name){
            alert('Hi ' + name);
        }
    }
}); 
```

因此，您可以通过调用以下方式访问您的代码：

```
app.page1.SayHi("Alex"); 
```

使用这种技术，您：

*   完全控制您的代码。没有您无法完全控制的神奇资源加载和花哨的东西。
*   无全球环境污染
*   没有命名冲突
*   命名空间树可以任意深，您是自己复杂性的所有者。
*   你可以有几个 js 文件，它们实际上贡献于同一个命名空间级别。这对辅助工具特别有用。
*   根据您在页面上包含的 javascript 文件，您可以拥有更大或更小的应用名称空间。

**结论：**

Web 环境真的很简单，我们不应该把它复杂化。

我不是在使用 RequireJS，不要误会我的意思。它做了它的本意（本质上是纯粹的资源延迟加载）。其他一切都是包装随附的东西，但也可以以更清洁和透明的方式实现。

因此，如果我不需要主要功能，则使用它毫无意义。

干杯!

# c++ - 防止随机整数不断被重新分配

> ID：13921584
> 
> 赞同：0
> 
> 时间：2012-12-17T20:22:23.087
> 
> 标签：c++

我正在开发一个随机选择一个数字的小游戏，然后要求用户猜测它，并根据用户的选择（更大，更小......）给出指示。要生成 0 到 100 之间的随机数，我使用以下代码：

```
int random = rand() % 101; 
```

这很好用，但唯一的问题是这个变量不断被重新分配一个不同的值。我怎样才能防止这种情况？

```
#include <iostream>
#include <string>
#include <cmath>
using namespace std;
int tries;//number of tries allowed
bool win;//whether the user has won the game or not
int main(){
    string gameType;
    cout << "Please enter your game type; \"easy\", \"medium\", \"hard\", and \"expert\"." << endl;
    cin >> gameType;
    if(gameType == "easy"){
        tries = 40;
        cout << "You have 40 tries." << endl;
    }else if (gameType == "medium"){
        tries = 20;
        cout << "You have 20 tries." << endl;
    }else if (gameType == "hard"){
        tries = 10;
        cout << "You have 10 tries." << endl;
    }else if (gameType == "expert"){
        tries = 5;
        cout << "You have 5 tries.";
    }

    cout << "Please enter a number between 0 and 100." << endl;

    while (win == false){
        int random = rand() % 101;//random number generation between 0 and 100
        return(random);
        bool valid = false;//if the user's number is valid (0 >= ; <= 100)
        int usedTries = 0;//the tries that the user has used up
        int selection;
        cin >> selection;
        if (selection > 100){
            cout << "Your number cannot be above 100." << endl;
            valid = false;
        }else if (selection < 0){
            cout << "Your number cannot be below 0";
            valid = false;
        }else{
            valid = true;
        }
        if (valid == true){
            if (selection > random){//bigger than target number
                cout << "Smaller!" << endl;
                usedTries = usedTries + 1;
            }else if (selection < random){//smaller than target number
                cout << "Bigger!" << endl;
                usedTries = usedTries + 1;
            }else if (selection == random){//the user has guessed the right answer
                cout << "Yay! You win!" << endl;
                win = true;
            }
            if (usedTries >= tries){//user has used up his number of tries
                cout << "Sorry, you've lost the game. Try again later." << endl;
                win = false;//to end the loop and terminate the game
            }
        }
    }
return(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:26:29.933

只有在您执行分配时，它才会被分配一个新值。根据您的描述，它是在循环内分配的。您可能希望将分配移出循环。

典型的结构类似于：

1.  调用 srand
2.  生成随机数
3.  从用户那里得到猜测
4.  如果猜错了，转到3
5.  如果用户想再去，转到2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:33:14.270

正如其他人指出的那样，您应该只分配一次。无论哪种方式，您都可以将其更改为：

```
static int random = rand() % 101; 
```

那只会分配一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:26:47.107

如果您有相同的结果数并且想要真正的随机值，您应该`srand`在调用之前使用函数`rand`至少一次。传递给`srand`一些随机值，简单的方法是以秒为单位传递当前时间等。

# java - Java - 增强的 For 循环永无止境

> ID：13921587
> 
> 赞同：3
> 
> 时间：2012-12-17T20:22:39.000
> 
> 标签：java, loops, for-loop, foreach

此代码正在产生一个无限循环：

```
 for (String element : friendSet) {
        resultNum ++;
        System.out.println("  Result # " + resultNum + " = " + element);
        System.out.print(" friendSet.size() = " + friendSet.size());
    } 
```

friendSet.size() = 2923 但结果不断攀升至数万，直到我强制程序停止。例如：

```
friendSet.size() = 2923  Result # 7652 = Charlie
friendSet.size() = 2923  Result # 7653 = Jamie
friendSet.size() = 2923  Result # 7654 = Smith 
```

到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:26:39.457

在幕后：java 中的 foreach 循环只使用 objects `iterator`。

是`friendSet`某种自定义的可迭代集合吗？如果是这样，您的迭代器实现不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:04:12.083

我的 for 循环所在的方法被多次调用。谢谢你们的帮助。我的愚蠢错误。

# iphone - Objective-C 如何列出所有可用的编码

> ID：13921595
> 
> 赞同：5
> 
> 时间：2012-12-17T20:23:13.737
> 
> 标签：iphone, objective-c, encoding

在 Java 中，我可以使用以下代码获取所有可用的编码：

```
SortedMap<String, Charset> availableCharsets = Charset.availableCharsets();
Vector allEncodes = new Vector();
for (Map.Entry<String, Charset> entry : availableCharsets.entrySet()) {
            allEncodes.add(entry.getKey());
} 
```

然后，我可以使用我想要的任何编码读取任何文件：

```
Reader in = new InputStreamReader(new FileInputStream(aPath), allEncodes.get(0) ); 
```

那么，是否有任何想法如何在 Objective-C 中实现这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:32:08.470

`const NSStringEncoding* encodingArray = [NSString availableStringEncodings];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:02:53.667

这或多或少是从 Java 中翻译您的代码。您还需要完成代码检查`readingError`变量。当然，中心点是`avaiableStringEncodings`静态消息。

```
 NSMutableArray *arrayOfEncodings = [[NSMutableArray alloc] init];

  const NSStringEncoding *encodings = [NSString availableStringEncodings];
  while (*encodings != 0){
    [arrayOfEncodings addObject:[NSNumber numberWithInt:*encodings]];
    encodings++;
  }

  NSError *readingError = nil;
  NSString yourPath = @"some path you want";
  NSData *data = [[NSData alloc] initWithContentsOfFile:yourPath    options:NSDataReadingUncached error:&readingError];

  NSStringEncoding firstEncoding = (NSStringEncoding) [((NSNumber *) [arrayOfEncodings objectAtIndex:0]) intValue];

  NSString *myString = [[NSString alloc] initWithData:data encoding:firstEncoding]; 
```

# asp.net - asp.net SiteMap 中的 SecurityTrimming

> ID：13921598
> 
> 赞同：0
> 
> 时间：2012-12-17T20:23:28.667
> 
> 标签：asp.net, sitemapprovider, securitytrimmingenabled

我在我的网站上遇到了奇怪的问题，我有菜单，我正在处理它`asp:menu`，`SiteMap`现在我想限制`menu's`基于`roles`，所以我`securityTrimmingEnable="true"`在 web.config 中使用，现在我的问题是我有一些需要启用的菜单项由 2 种类型的用户（管理员和登录用户），现在在`Web.Sitemap`文件中，我创建了`siteMapNode`在菜单中使用的，这里我添加了`roles`属性来指定哪些类型的用户可以访问菜单，有一个主菜单应该只能由这 2 个用户访问，其他任何人都不能访问（即非匿名），现在我找不到在`roles`属性中指定多个角色的方法，我也尝试过指定`*`，但这似乎也适用于非匿名用户，即不是我的要求，这是我的样本`web.sitemap`文件

```
 <siteMapNode roles="*">
    <siteMapNode roles="Administrator" url="~/default.aspx" title="HOME" />
 </siteMapNode> 
```

在上述情况下，主页菜单仅对管理员可用。现在，如果我指定`*`使其对非管理员但已登录的用户可用，它也适用于未登录的用户。

```
 <siteMapNode roles="*">
    <siteMapNode roles="*" url="~/default.aspx" title="HOME" />
 </siteMapNode> 
```

无论如何，我可以让管理员和登录用户可以使用上述菜单。
下面是我的 web.config 设置：

```
<siteMap defaultProvider="XmlSiteMapProvider" enabled="true">
      <providers>
        <clear/>
        <add name="XmlSiteMapProvider"
          description="Default SiteMap provider."
          type="System.Web.XmlSiteMapProvider "
          siteMapFile="Web.sitemap"
          securityTrimmingEnabled="true" />
      </providers>
    </siteMap> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:41:56.087

实际上对角色属性的使用存在误解。在您的情况下，它不仅限于“管理员”，还显示为其他角色。菜单项根据使用`<location>`web.config 文件中的标记指定的授权设置进行限制。查看下面的文章了解更多信息。

[http://stweet.wordpress.com/2010/06/13/designing-the-folder-structure-of-the-asp-net-web-application/](http://stweet.wordpress.com/2010/06/13/designing-the-folder-structure-of-the-asp-net-web-application/)

# python - 触发 select() 的函数

> ID：13921601
> 
> 赞同：1
> 
> 时间：2012-12-17T20:23:47.030
> 
> 标签：python

我想用 Python 编写一个每 30 秒触发一次 select() 的函数。

到目前为止，我的代码如下所示 -

```
inputs = [ UDPSock , sys.stdin]
outputs = []
while inputs:
  readable, writable, exceptional = select.select(inputs, outputs, inputs)
  for s in readable:
    if s is UDPSock
      # Deal with socket

    elif s is sys.stdin:
      # Deal with input 
```

我想实现以下目标 -

```
inputs = [ UDPSock , sys.stdin, timer]
outputs = []
while inputs:
  readable, writable, exceptional = select.select(inputs, outputs, inputs)
  for s in readable:
    if s is UDPSock
      # Deal with socket

    elif s is sys.stdin:
      # Deal with input

    elif s is timer:
      # Deal with  timer 
```

理想情况下，如果可能的话，我希望不使用线程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T20:27:57.120

使用可选`timeout`参数[选择](http://docs.python.org/2/library/select.html)有问题吗？

例如

```
while True:
    ready = readable, writable, exceptional = select.select(inputs, outputs,
                                                            inputs, 30.0)
        if not any(ready):
            #timeout condition
        else:
            #iterate over the ready lists as appropriate 
```

# ios - 每天将 1 个项目从 xml 添加到 tableview

> ID：13921603
> 
> 赞同：0
> 
> 时间：2012-12-17T20:24:31.933
> 
> 标签：ios, xcode, uitableview

我想获取一个已经构建的 xml，对其进行解析，并首先在 xml 中添加最旧的项目，然后每天再添加 1 个。用来解析的代码是：

```
- (void)parseRss:(GDataXMLElement *)rootElement entries:(NSMutableArray *)entries {

    NSArray *channels = [rootElement elementsForName:@"channel"];
    for (GDataXMLElement *channel in channels) {            

        NSString *blogTitle = [channel valueForChild:@"title"];                    

        NSArray *items = [channel elementsForName:@"item"];
        for (GDataXMLElement *item in items) {

            NSString *articleTitle = [item valueForChild:@"title"];
            NSString *articleUrl = [item valueForChild:@"guid"];            
            NSString *articleDateString = [item valueForChild:@"pubdate"];        
            NSDate *articleDate = [NSDate dateFromInternetDateTimeString:articleDateString formatHint:DateFormatHintRFC822];
            NSString *articleImage = [item valueForChild:@"description"];
            NSDateFormatter * dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
            [dateFormatter setTimeStyle:NSDateFormatterShortStyle];
            [dateFormatter setDateStyle:NSDateFormatterMediumStyle];

            RSSEntry *entry = [[[RSSEntry alloc] initWithBlogTitle:blogTitle
                                                      articleTitle:articleTitle
                                                        articleUrl:articleUrl
                                                       articleDate:articleDate
                                                      articleImage:articleImage
                                                              date:thedate] autorelease];
            [entries addObject:entry];

        }      
    }

} 
```

我该如何更改它，以便它只会在第一次启动应用程序时添加最旧的项目，等等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T04:55:18.007

在我输入的 AppDelegate didFinishLaunchingWithOptions 方法中：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    if (![defaults integerForKey:@"totalDays"]) {

        // if there is no value for the key, set it to 0
        [defaults setInteger:0 forKey:@"totalDays"];
        [defaults synchronize];
    }
    if (![defaults objectForKey:@"currentDate"]) {
        [defaults setObject:@"32 01" forKey:@"currentDate"];
        //this will ensure that no one's start date ever matches current value
        [defaults synchronize];
    }
    // get the current date
    NSDate *date = [NSDate date];

    // format it
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc]init];
    [dateFormat setDateFormat:@"dd MM"];

    // convert it to a string
    NSString *dateString = [dateFormat stringFromDate:date];

    // free up memory
    [dateFormat release];
    if ([defaults objectForKey:@"currentDate"]){
    NSString *checkdate = [defaults objectForKey:@"currentDate"];
    if (![dateString isEqualToString:checkdate]) {
       //now if your current date is different from the last date it will add 1 to the total days key
        NSInteger currentnumber = [defaults integerForKey:@"totalDays"];
        NSLog(@"The current number is %i", currentnumber);

        [defaults setObject:dateString forKey:@"currentDate"];
        [defaults setInteger:currentnumber+1 forKey:@"totalDays"];
        [defaults synchronize];
        NSLog(@"The new number is %i", [defaults integerForKey:@"totalDays"]);
    }
    } 
```

然后在我添加的 NSPredicate 区域：

```
NSDate *start = [NSDate dateFromRFC3339String:@"2013-01-01T00:00:00-06:00"];
            NSInteger difference = [[NSUserDefaults standardUserDefaults] integerForKey:@"totalDays"];

NSPredicate *predicate = [NSPredicate predicateWithFormat: @"articleDate < %@",  [NSDate dateWithTimeInterval:(86400*difference) sinceDate:start]];
            NSArray *filteredArray = [entries filteredArrayUsingPredicate: predicate]; 
```

最后一点代码有望完成最初的预期。

# c# - 如何使用 C# 向 QuickBooks 添加信用付款

> ID：13921605
> 
> 赞同：1
> 
> 时间：2012-12-17T20:24:48.207
> 
> 标签：c#, quickbooks

我可以使用 C#.NET（和 QBFC）将账单转移到 QuickBooks，但我想发送信用账单。例如，我希望能够进行预付款。在屏幕上，我必须将类型更改为信用（而不是账单）。

如何以编程方式执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:16:08.743

I found a way to fix this. If anyone know any other solutions, please update. I used IVendorCreditAdd & IMsgSetRequest.AppendVendorCreditAddRq() to create credit payment

# javascript - 如何正确使用 jQuery off() 方法从元素中删除 mouseenter 和 mouseleave 事件

> ID：13921606
> 
> 赞同：0
> 
> 时间：2012-12-17T20:24:59.073
> 
> 标签：javascript, jquery, html

我似乎在使用 jQuery off() 方法从元素中删除某些事件时遇到了一些麻烦。当我符合某个条件时，我想删除 mouseenter 和 mouseleave 事件。

这是我得到的。

jsfiddle：http: [//jsfiddle.net/GE7Wg/](http://jsfiddle.net/GE7Wg/)

在上面的小提琴中，第 2 条不应有与其关联的 mouseenter/mouseleave 事件。

谢谢！

## HTML

```
<!DOCTYPE html>
<html>
<head></head>
<body>   
    <input type="hidden" id="HiddenMediaID" value="450">

    <article class="Article">
        Article 1                
        <input type="hidden" class="LatestMediaID" value="200" />
    </article>

    <article class="Article">
        Article 2
        <input type="hidden" class="LatestMediaID" value="450" />
    </article>

    <article class="Article">
        Article 3
        <input type="hidden" class="LatestMediaID" value="700" />
    </article> 
</body>
</html> 
```

## jQuery

```
//Page loaded - jQuery Ready
$(document).ready(function () {   
    //User hovering over article. Change BG.
    $(document).on('mouseenter', '.Article', function () {
        $(this).css('background', '#F0F8FF');
    }).on('mouseleave', '.Article', function () {
        $(this).css('background', '#FFFFFF');
    });

    //Set active BG color if condition is met.
    $('.LatestMediaID').each(function () {
        var LatestMediaID = $(this).val();     

        //Disable mouseenter and mouseleave events on the matched Article.
        if (LatestMediaID == $('#HiddenMediaID').val()) {
            //Disable events.
            $(document).off('mouseenter', $(this).parent());
            $(document).off('mouseleave', $(this).parent());

            //Change BG color to light blue.    
            $(this).parent().css('background', '#F0F8FF');
        }
    });
}); 
```

## CSS

```
.Article {
    width: 150px;
    height: 35px;
    line-height: 35px;
    margin: 10px;
    background-color: #FFFFFF;
    border: 1px solid #CCCCCC;
    text-align: center;    
} 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:47:09.450

让我们做一些 DOM 操作并抛出一些条件

```
//Page loaded - jQuery Ready
$(document).ready(function () {

    //User hovering over article. Change BG.
    $(document).on('mouseenter', '.Article', function () {
        if( !( $(this).hasClass('donotSelect') ) )
            $(this).css('background', '#F0F8FF');
        else
             $(document).off('mouseleave', $(this));
    }).on('mouseleave', '.Article', function () {
        if( !( $(this).hasClass('donotSelect') ) )
            $(this).css('background', '#FFFFFF');
        else
             $(document).off('mouseenter', $(this));
    });

    //Set active BG color if condition is met.
    $('.LatestMediaID').each(function () {
        var LatestMediaID = $(this).val();     

        //Disable mouseenter and mouseleave events on the matched Article.
        if (LatestMediaID == $('#HiddenMediaID').val()) {
            $(this).parent().addClass("donotSelect");
            //Change BG color to light blue.    
            $(this).parent().css('background', '#F0F8FF');
        }
    });

}); 
```

[http://jsfiddle.net/GE7Wg/5/](http://jsfiddle.net/GE7Wg/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:36:45.323

不确定是什么导致了问题，但是您可以通过预先检查值来避免首先添加事件。

也许使用类似的东西：

```
$(function() {
    var hidID = $("#HiddenMediaID").val();
    $(".Article").each(function(){
        var article = $(this);
        if(article.find(".LatestMediaID").val() !== hidID)
        {
            article.on("mouseenter", function(){ article.css("background", "#F0F8FF") });
            article.on("mouseleave", function(){ article.css("background", "#FFFFFF") });
        }
    });
}); 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:41:21.273

有一种方法可以通过在所选文章级别[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)从那里添加另一个事件来按照您想要的方式进行操作，但这真的很难看。通过 CSS [http://jsfiddle.net/liho1eye/GE7Wg/4/处理这个问题要干净得多](http://jsfiddle.net/liho1eye/GE7Wg/4/)

```
.selected, .hover { background-color:#F0F8FF;}​ 
```

脚本：

```
$(document).on('mouseenter mouseleave', '.Article', function(e) {
    $(this).toggleClass("hover", e.type == "mouseenter");
}); 
```

# css - 使用内联 CSS 将元素定位在由外部样式表指定的块周围的最佳方法是什么？

> ID：13921607
> 
> 赞同：3
> 
> 时间：2012-12-17T20:25:15.113
> 
> 标签：css, layout, stylesheet, design-guidelines

如何为该页面的表单生成部分指定位置，然后使用内联 CSS 在其周围放置元素？ [https://org2.democracyinaction.org/o/6351/p/salsa/event/common/public/?event_KEY=50926](https://org2.democracyinaction.org/o/6351/p/salsa/event/common/public/?event_KEY=50926)

我们半生不熟的临时解决方案使用多个 Absolute 元素。不幸的是，这些跨浏览器的性能不同，并且在移动设备上尤其糟糕（导致页面元素溢出和滚动）。

这是我对外部样式表的补充，将表单生成的注册框向上和向左移动：

```
#regForm {width: 400px; position:absolute; clear:left; top:315px; } 
```

这是我在其周围排列 div 元素的内联尝试：

```
<div> top element (quotes)
</div>
<div style="height:2400px"></div> 
//I put this in to keep the bottom page border from overlapping the absolute divs

<div style="position: absolute; top: 350px; left: 450px; width: 520px; 
overflow: auto; margin: 0px; padding: 0px;"> 
right column (of explanation text) </div>
<p></p>
<div style="position: absolute; top: 815px; left: 15px; width: 400px; 
overflow: auto; margin: 0px; padding: 0px;">  
left column (more info about the #regForm box above, plus images) </div> 
```

我们需要达到的目标：

```
[          top element         ]

[#regForm div] [right column   ]

[left column ] 
```

约束：我们正在重新格式化表单生成的页面。我有一个输入面板，我们可以在其中向页面添加 HTML 内容并使用内联 CSS。我们还可以向外部 CSS 样式表添加覆盖元素，但不能直接编辑整个样式表。

**tl:dr 版本：** 当您无权编辑生成该元素的 HTML 时，如何使用 CSS 将元素（在本例中为 #regForm）在页面中向上移动？如果没有样式，#regForm 元素只会被附加到末尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:31:33.650

如果您希望页面正常流动并且首先出现#regdiv，您可以浮动列和表单，然后使用jQuery 在文档树中向上移动表单。

jsFiddle 中的一个示例：http: [//jsfiddle.net/TjDmw/11/](http://jsfiddle.net/TjDmw/11/)

HTML：

```
<div id="container">
<div id="rightcol"></div>
<div id="leftcol"></div>
<div id="regdiv"></div><!--Last in HTML, but moved up with jQuery-->
</div>​​​​​​​​​​​​​​​​ 
```

CSS：

```
#container {
    border:2px black solid;
    width:400px;    
    float:left;
}
#rightcol{
    background:red;
    width:200px;
    height:400px;
    float:right;
}
#leftcol{
    background:blue;
    width:160px;
    height:450px;
    float:left;
}
#regdiv{
    background:green;
    width:140px;
    height:220px;
    float:left;
} 
```

JS：

```
$('#regdiv').insertBefore('#rightcol');​ 
```

​</p>

# php - 一种实现facebook链接共享功能的方法

> ID：13921611
> 
> 赞同：1
> 
> 时间：2012-12-17T20:25:35.593
> 
> 标签：php, facebook, preview

我正在寻找一种创建功能的方法，类似于在 facebook 中发布指向现有网站的链接。如果这个说法比较模棱两可，我会尽量详细说明。

当您粘贴您的链接并提交您的帖子时，facebook 连同您的链接会提供您正在发布的页面的小预览（文本，可能是小图片）

有什么方法可以实现这一目标？

我读了类似[的帖子](https://stackoverflow.com/questions/5778072/how-do-google-and-facebook-implement-and-create-the-preview-link-functionality)，但问题是我不需要那么多图片，文字就足够了。

在 PHP 中工作，但语言并不重要，因为我正在寻找一个高级别的想法。以前我在考虑用 cURL 解析链接的内容，但问题是在很多情况下，facebook 返回的文本在页面上不可用。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:27:04.310

据我所知，Facebook 从`meta name="description"`链接页面上标签的内容属性中提取。

如果没有可用的元描述标签，它似乎从`<p>`它可以在页面上找到的第一个段落标签的开头拉出。

图片是从`<img>`页面上的可用标签中提取的，在发布时可以选择轮播。

最后，链接子文本也是用户可编辑的（启动状态更新，包含链接，然后单击出现的链接子文本区域）。

就我个人而言，我会采用这样的路线：卷曲页面，解析它以获得元标记描述，如果没有使用基本算法或仅第一段标记获取一些可能的数据，然后允许用户编辑呈现的任何内容（它更友好给用户，还解决了用户代理不同回报的问题）。将面向用户的控件设置为 ajax，这样您的站点访问要预览的链接所花费的时间都不会出现问题。

我建议使用 DOM 库（如果您对它感到满意并且知道如何处理可能格式错误的 html 页面，您甚至可以使用 DOMDocument）而不是正则表达式来解析页面的`<meta>`,`<p>`和可能还有`<img>`标签。构建一个正则表达式可以正确处理您将在“野外”遇到的所有潜在不同情况，而不是从一组已知站点中遇到的情况可能会变得非常粗糙。[通常推荐使用QueryPath](http://querypath.org/)，并且有涵盖[许多可用选项](https://stackoverflow.com/questions/1364136/jquery-like-interface-for-php)的 stackoverflow 线程。

大多数现代网站，尤其是大型网站，都擅长填充元描述标签，尤其是对于动态生成的页面。

您也可以从页面上抓取`<img>`标签，但您需要在本地托管图像：您可以托管所有图像，然后删除除所选图像之外的所有图像，或者您可以托管缩略图（假设您有一个图像处理库安装并打开）。您选择哪一个取决于带宽和存储是否更重要，或者运行`imagecopyresampled`、`imagecopyresized`、`Gmagick::thumbnailimage`等的一次性处理等（选择您手头/您最喜欢的任何东西）。您不希望热链接到页面上的图像，因为它在带宽方面的道德性，特别是在链接任何具有防热链接的站点（引荐来源/等方法）时最终出现损坏图像的可能性，或者从到期/等 就个人而言，我可能会去存储缩略图。

如果您想最终删除自己服务器上的图像/缩略图文件，您可以将整个链接实体包装为处理过期/等的对象。既然你要求一个高层次的想法，我会把具体的实现留给你。

> 但问题是，在很多情况下，facebook 返回的文本在页面上不可用。

您是否查看过页面的元标记？到目前为止，我已经测试了几个页面，这通常是在呈现的链接页面上不可见的内容的来源，并且似乎是 Facebook 算法的首选。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T03:25:51.733

预先全面披露，我是[ThumbnailApp.com](http://www.thumbnailapp.com)的开发人员。

这是一个带有可选 Javascript SDK 的 JSON API 服务，我认为它完全符合您的要求：它将解析一个字符串以检测任何 url 并返回资产的标题、描述和缩略图。如果页面有 OpenGraph 标签，它将使用这些标签作为图像缩略图。它目前处于私人测试阶段，但我们每周都会添加更多帐户。

如果你觉得你真的需要一个自己动手的解决方案：

查看基于 python 的[Webkit2Png](https://github.com/adamn/python-webkit2png)和无头浏览器[PhantomJs](http://phantomjs.org/)。他们可以将网页呈现为图像（默认大小为 800x600），然后您必须编写一些代码来调整和裁剪图像的大小，就像 taswyn 提到的那样。理想情况下，您会将调整大小的图像上传到 Amazon S3，然后将其托管在 CloudFront 等 CDN 上。

要获取标题和描述，首先获取 URL 内容（cURL 或其他），您需要检查`content-type`标题以确保它是网页。如果是，您可以使用 HTML 解析器（例如[SimpleHTMLDOM](http://simplehtmldom.sourceforge.net/) PHP 库）来获取标题和描述元数据。如果您希望它与 Facebook 完全一样，您还需要检查任何 OpenGraph 标签，特别是`og:image`标签。

也不要忘记缓存。第一次渲染和描述解析可能需要很长时间。即使您的网站速度很快，您正在渲染的网页也可能很慢，最好的方法是渲染/解析一次，然后保存并返回调整大小的图像和元数据以供后续请求。根据您的要求，您可能需要每小时刷新一次缓存数据，或者您可以每天刷新一次。

自己做这件事需要大量的工作和大量的服务器配置。我觉得使用 3rd 方服务是更好的选择，但显然我有偏见:)

# javascript - 如何使用 YouTube 视频启动和关闭 jQuery Twitter Bootstrap Modal？

> ID：13921613
> 
> 赞同：5
> 
> 时间：2012-12-17T20:25:40.433
> 
> 标签：javascript, jquery, twitter-bootstrap, youtube

我需要一个简单的演示，说明如何在[Twitter Bootstrap 模式](http://twitter.github.com/bootstrap/javascript.html#modals)中从 JavaScript 启动和关闭 YouTube 视频（而不是点击锚标记）。

到目前为止，我可以很好地启动它，但关闭时它会继续在后台播放。

这是我的html：

```
<div id="myModalThumbnail"><img src="http://placehold.it/250x150&text=Video%20Thumbnail">
</div>

<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    </div>
    <div class="modal-body">
        <iframe width="520" height="390" frameborder="0" allowfullscreen=""></iframe>
    </div>
</div>​ 
```

Javascript：

```
$('#myModalThumbnail').click(function () {
    var src = 'http://www.youtube.com/v/KVu3gS7iJu4&amp;rel=0&amp;autohide=1&amp;showinfo=0&amp;autoplay=1';
    $('#myModal').modal('show');
    $('#myModal iframe').attr('src', src);
}); 
```

​还有一个[jsfiddle](http://jsfiddle.net/VtKS8/5/)：http: [//jsfiddle.net/VtKS8/5/](http://jsfiddle.net/VtKS8/5/)

接下来是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T20:30:46.897

好吧，看起来我需要做的就是删除`src`按钮单击的属性。

```
$('#myModal button').click(function () {
    $('#myModal iframe').removeAttr('src');
}); 
```

JSFiddle：http: [//jsfiddle.net/VtKS8/6/](http://jsfiddle.net/VtKS8/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-02T00:31:30.667

这是使用内置引导挂钩的引导 3 的更新版本

```
<script>
     $( document ).ready(function() {
       $('#audiomodal').on('hidden.bs.modal', function () {
            $( "audio" ).attr('src', '');
       });
     });
</script> 
```

# matlab - 从泰克示波器收集超过 10,000 个数据点？

> ID：13921618
> 
> 赞同：8
> 
> 时间：2012-12-17T20:26:16.143
> 
> 标签：matlab, oscilloscope

我正在构建一个 MATLAB GUI 来从 Tektronix DPO4104 示波器（[此处](http://www.mathworks.com/matlabcentral/fileexchange/21781-tektronix-dpo4104-oscilloscope-driver)为 MATLAB 驱动程序）收集数据。

我正在玩弄`tmtool`我的 GUI 代码，发现驱动程序只能收集 ​​10,000 个数据点，无论示波器是否设置为显示超过 10k 点。我[在 CCSM 上找到了这篇文章，](http://www.mathworks.com/matlabcentral/newsreader/view_thread/267937)但它并没有太大帮助。（如果您愿意阅读，我是最后一篇文章。）我使用的是 DPO4104 驱动程序，而这篇文章讨论了 DPO4100 驱动程序的使用，我相信。

据我所知，步骤是：

1.  编辑驱动程序的`readwaveform`功能以考虑当前`recordLength`- 在我的情况下，例如 100,000 点。
2.  手动编辑驱动程序`MaxNumberPoint`从 10,000 到 100,000。（在我的情况下，默认数字是 0.. 我将其更改为 100,000）。
3.  手动编辑`EndingPoint`。我也将其设置为 100,000。
4.  在创建设备对象之前`set(interfaceObj, 'InputBufferLength', 2.5*recordLength)`，即确保输入缓冲区可以容纳超过 100,000 个点。建议使用至少两倍的预期缓冲区。我使用 2.5 只是因为。
5.  为它构建设备对象和波形对象，`connect()`然后`readwaveform`. 利润。

我仍然无法`tmtool`通过我的 GUI 或通过我的 GUI 收集超过 10,000 点。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:54:37.767

我找到了一位泰克工程师；他基本上告诉我直接使用SCPI命令并跳过驱动程序。虽然烦人，但这可能是最简单的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T18:26:33.353

我想到了！我认为。花几个星期后退一步，刷新真的很有帮助。这是我所做的：

1) 编辑驱动程序`init`函数以配置更大的缓冲区大小。完整`init`代码：

```
function init(obj)
% This method is called after the object is created.
% OBJ is the device object.
% End of function definition - DO NOT EDIT

% Extract the interface object.
interface = get(obj, 'Interface');

fclose(interface);

% Configure the buffer size to allow for waveform transfer.
set(interface, 'InputBufferSize', 12e6);
set(interface, 'OutputBufferSize', 12e6); % Originally is set to 50,000 
```

我最初尝试将缓冲区大小设置为 22e6（我想获得 1000 万个点），但出现内存不足错误。假设缓冲区应该是您期望的两倍多一点，加上标题的空间。我可能不需要价值 200 万点的“标题”，但是，嗯。

2）编辑驱动程序`readwaveform()`，首先查询用户可设置的收集点数应该是多少。然后，将 SCPI 命令写入示波器，以确保要传输的数据点数等于用户所需的点数。下面的代码片段可以解决问题`readwaveform`：

```
try 
    % Specify source
    fprintf(interface,['DATA:SOURCE ' trueSource]);

    %----------BEGIN CODE TO HANDLE MORE THAN 10k POINTS----------
    recordLength = query(interface, 'HORizontal:RECordlength?');
    fprintf(interface, 'DATA:START 1');
    fprintf(interface, 'DATA:STOP %d', str2num(recordLength));
    %----------END CODE TO HANDLE MORE THAN 10k POINTS----------

    % Issue the curve transfer command.
    fprintf(interface, 'CURVE?');

    raw = binblockread(interface, 'int16');

    % Tektronix scopes send and extra terminator after the binblock.
    fread(interface, 1); 
```

3) 在用户代码中，设置 SCPI 命令以将记录大小更改为底层接口对象：

```
% interfaceObj is a VISA object.
fprintf(interfaceObj, 'HORizontal:RECordlength 5000000'); 
```

你有它。希望这可以帮助其他试图解决这个问题的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T16:09:07.867

您是否可以一次收集 10,000 个数据点，然后将它们保存在某个地方，收集接下来的 10,000 个，将它们附加到保存的点，重复？

当然，这是一种解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T01:24:42.583

这是一个坏主意。开始收集 10,000 点。当你达到 5000 点时，再次开始收集数据（你可能需要在新线程中运行它）。不断来回移动，直到你需要的所有数据都存储在 20 种数据结构中。然后，通过排列数据点将结构组合成一个结构。这可能比直接调用 SCPI 命令更有效，并且可能有一些我没有想到的讨厌的警告。但正如我所说，这是一个坏主意......

# javascript - 如何使用查询字符串中的变量触发 jquery 调用

> ID：13921627
> 
> 赞同：0
> 
> 时间：2012-12-17T20:26:52.583
> 
> 标签：javascript, jquery, asp.net-mvc-3, search-engine

有一个问题，我即将在我的网站上重建搜索功能，但我无法让它按我想要的方式工作。问题是当进入带有查询字符串“q”的页面时，我希望填写搜索框并开始搜索。我已经来回测试过，但无法让它工作。如果您在搜索框中键入并等待 500 毫秒，则搜索有效，但在搜索框自动填充后我不管理触发呼叫。

这是没有查询字符串功能的代码。

```
<script type="text/javascript">
$(document).ready(function () { // 1
    jQuery("abbr.timeago").timeago();
    $("tr:even").addClass("even");
    $("tr:odd").addClass("odd");
    var q = getQuerystring('q', '');

    $("input#q").val(q);
}); // 1

$(document).ready(
    function () { // 1
        // Hide update box  
        $('#updater').hide();

        var retrieveData = function (path, query, funStart, funEnd, funHandleData) 
        { // 2
            // for displaying updater 
            funStart();
            // retrieve JSON result 
            $.getJSON(
                path,
                { name: query },
                function (data) 
                { // 3
                    // handle incoming data 
                    funHandleData(data);
                    // for hiding updater 
                    funEnd();
                } // 3
        ); // 2
    }; // 1

    $(function () 
    { // 1
        var timer;

        $("#q").keyup(function () 
        { // 2
            clearTimeout(timer);
            var ms = 500; // milliseconds
            var val = this.value;
            timer = setTimeout(
            function () 
            { // 3
                retrieveData('/Search/FindPaste/', $('#q')[0].value,
                    function () { $('#updater').show(); },
                    function () { $('#updater').hide(); },
                    function (data) 
                    { // 4
                        $('#codelist > tr').remove();
                        for (s in data) 
                        { // 5
                            var code = data[s];
                            var d1 = new Date(parseInt(code.Created.substr(6)));

                            $('#codelist').append('<tr><td><a href="http://www.pastebucket.com/' + code.CodeID + '">' + code.Title + '</a></td><td><abbr class="timeago" title="' + d1.toString('yyyy-MM-dd HH:mm:ss') + '">' + d1.toString('yyyy-MM-dd HH:mm:ss') + '</abbr></td><td>' + code.Syntax + '</td><td>' + code.Views + '</td><td><a href="http://www.pastebucket.com/User/' + code.Username + '">' + code.Username + '</a></td></tr>');
                            jQuery("abbr.timeago").timeago();
                            $("tr:even").addClass("even");
                            $("tr:odd").addClass("odd");
                        } // 5
                    }) // 4
                }, ms); // 3
            }); // 2
        }); // 1
    }

);

function getQuerystring(key, default_) 
{
    if (default_ == null) default_ = "";
    key = key.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regex = new RegExp("[\\?&]" + key + "=([^&#]*)");
    var qs = regex.exec(window.location.href);
    if (qs == null)
        return default_;
    else
        return qs[1];
} 
```

**解决方案！**

```
 <script type="text/javascript">
    $(document).ready(function () { // 1

    }); // 1

    $(document).ready(function () {
        // Hide update box  
        $('#updater').hide();

        var retrieveData = function (path, query, funStart, funEnd, funHandleData) { // 2
            // for displaying updater 
            funStart();
            // retrieve JSON result 
            $.getJSON(
                path,
                { name: query },
                function (data) { // 3
                    // handle incoming data 
                    funHandleData(data);
                    // for hiding updater 
                    funEnd();
                } 
            ); 
        }; 

        var timer;

        $("#q").keyup(function () { // 2
            clearTimeout(timer);
            var ms = 500; // milliseconds
            var val = this.value;
            timer = setTimeout(
        function () { // 3
            retrieveData('/Search/FindPaste/', $('#q')[0].value,
                function () { $('#updater').show(); },
                function () { $('#updater').hide(); },
                function (data) { // 4
                    $('#codelist > tr').remove();
                    for (s in data) { // 5
                        var code = data[s];
                        var d1 = new Date(parseInt(code.Created.substr(6)));

                        $('#codelist').append('<tr><td><a href="http://www.pastebucket.com/' + code.CodeID + '">' + code.Title + '</a></td><td><abbr class="timeago" title="' + d1.toString('yyyy-MM-dd HH:mm:ss') + '">' + d1.toString('yyyy-MM-dd HH:mm:ss') + '</abbr></td><td>' + code.Syntax + '</td><td>' + code.Views + '</td><td><a href="http://www.pastebucket.com/User/' + code.Username + '">' + code.Username + '</a></td></tr>');
                        jQuery("abbr.timeago").timeago();
                        $("tr:even").addClass("even");
                        $("tr:odd").addClass("odd");
                    } // 5
                }) // 4
        }, ms); // 3
        }); // 2

        jQuery("abbr.timeago").timeago();
        $("tr:even").addClass("even");
        $("tr:odd").addClass("odd");
        var q = getQuerystring('q', '');

        $('input#q').val(q).keyup()

    }
);

function getQuerystring(key, default_) {
    if (default_ == null) default_ = "";
    key = key.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regex = new RegExp("[\\?&]" + key + "=([^&#]*)");
    var qs = regex.exec(window.location.href);
    if (qs == null)
        return default_;
    else
        return qs[1];
}

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:30:10.527

只需填充框并触发框`change()`上的事件。

```
$('input#q').val(q).change(); 
```

*编辑：或者在你的情况下，`keyup`事件：`$('input#q').val(q).keyup()`*

# python - 平行六面体数据的体积切片图

> ID：13921629
> 
> 赞同：1
> 
> 时间：2012-12-17T20:27:01.640
> 
> 标签：python, numpy, sage

我有一个由三个向量定义的平行六面体数据：

2.468000 0.000000 0.000000

b -1.234000 2.137351 0.000000

c 0.000000 0.000000 32.000000

我的网格由 40 40 500 个点描述，分别用于轴 a、b、c。正如你所看到的，这三个向量不是相互正交的，这会给网格的读取带来很多问题。

我最初的计划是读取我的原始数据，然后提取几个体积切片，用 sagemath 处理以生成超级漂亮的图片。遗憾的是，我在 python 文档中查看了类似的内容，我发现了几个可用于正交体积（ndgrid、easyviz.slice_）的命令，但没有用于非相互正交体积数据的命令。

在 Scitools 包和 numpy 中，我找到了以下命令

[Numpy](http://docs.scipy.org/doc/numpy/reference/)提供：

*   网格
*   奥格
*   网状网格

[Scitools](http://scitools.googlecode.com/hg/doc/api/html/index.html)提供：

*   网格
*   盒子网格

然后我也在寻找这些`matplotlib`功能，但它们太多了，我干脆放弃了。

有没有一些友好的程序员可以让我走上正确的道路？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:10:39.580

你到底在追求什么？

您可以轻松地创建一个形状数组，`(40, 40, 500, 3)`其中位置的项目`[a, b, c]`是一个 3 元素数组，其中包含相应平行六面体网格点的 x、y、z 坐标，如下所示：

```
a = np.array([2.468000, 0.000000, 0.000000]).reshape(1, 1, 1, 3)
b = np.array([-1.234000, 2.137351, 0.000000]).reshape(1, 1, 1, 3)
c = np.array([0.000000, 0.000000, 32.000000]).reshape(1, 1, 1, 3)
A = np.linspace(0, 1, num=40).reshape(40, 1, 1, 1)
B = np.linspace(0, 1, num=40).reshape(1, 40, 1, 1)
C = np.linspace(0, 1, num=500).reshape(1, 1, 500, 1)
grid = a * A + b * B + c * C 
```

# python - 将 Python 脚本嵌入 C 的最简单和最快的方法？

> ID：13921631
> 
> 赞同：1
> 
> 时间：2012-12-17T20:27:03.897
> 
> 标签：python, python-c-api, python-embedding

我一直在研究用于将我的 python 脚本嵌入到 C 中的 Python/C API。我想知道是否有一种简单（或更简单）的方法可以嵌入我的 python 脚本，而不必过多地参与 python/c API。我应该提到（因为我不确定这是否会成为问题）在我的 python 脚本中，我在我的 python 脚本中使用了许多其他模块（确切地说是 NumPy、SciPy、Matplotlib 和 Mayavi）。您能提供的任何帮助或建议将不胜感激。

# android - Android/iOS 测试自动化：如何模拟复杂的手势

> ID：13921633
> 
> 赞同：1
> 
> 时间：2012-12-17T20:27:10.643
> 
> 标签：android, ios, testing, automation, gesture

是否有一个测试自动化框架（适用于 iOS/Android/多平台），不需要访问被测试应用程序的源代码，支持模拟复杂手势（如弯曲拖动动作）的能力？

我看到大多数框架都支持点对点线性手势的能力，但我需要非线性运动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:35:11.203

在 Android 上，您可以使用[Instrumentation API](https://developer.android.com/tools/testing/testing_android.html#Instrumentation)将任意 MotionEvents 发送到您自己的活动和视图。查看[Instrumentation Javadoc](http://developer.android.com/reference/android/app/Instrumentation.html)。特别是`sendPointerSync(MotionEvent me)`方法。使用该方法，您可以发送一系列运动事件，代表您想要的任何客人。

最简单的方法可能是设置一个简单的应用程序来使用触摸侦听器为您“记录”运动事件并以某种方式存储它们，然后您可以将它们输入到`sendPointerSync()`方法中。

# python - 返回/打印句子中的位数或错误消息

> ID：13921638
> 
> 赞同：3
> 
> 时间：2012-12-17T20:27:25.650
> 
> 标签：python, string, return, message, digits

我是该网站和 python 的新手，所以我希望我能提供所有必需的信息。我已经搜索过这个问题，但似乎没有一个解决方案对我有用。

我正在尝试创建一个函数来读取一些文本并返回它包含的数字数量。例如：

"It is 2012" , 应该返回 "Text has 4 digits"

如果没有数字，它应该返回不同的消息，例如：

"今天是星期一" ，应该返回 "文本不包含数字"

所以我写了这个：

```
def CountNumbers(txt):
    sum = 0

    for n in txt:
        if n.isdigit() == False:
            print ("Text does not contain digits")

        else:
            sum += 1

    print("Text has", sum, "digit(s)")

txt = str(input("Write some text: "))
(CountNumbers(txt)) 
```

功能似乎没问题，但是打印结果错误，例如：

```
Write some text: 65
Text has 2 digit(s) #this is ok, but... 
```

当我只输入文本时：

```
Write some text: sd 
Text does not contain digits
Text does not contain digits
Text does not contain digits
Text has 0 digit(s) 
```

当我输入文本和数字（但首先输入文本）时：

```
Write some text: sd 564
Text does not contain digits
Text does not contain digits
Text does not contain digits
Text has 3 digit(s) 
```

我知道我的错误在于块，（我认为），但我还没有想出办法，因为当我使用返回时，它会在完成阅读文本之前停止。我已经尝试了大约 20 多种不同的东西，请帮助我！

谢谢 ！！

PS 我需要它作为 .py 而不仅仅是在 IDLE (Python Shell) 窗口中工作，这就是为什么我要编写这样的块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T20:33:41.257

问题是您每次遇到非数字字符时都会打印“文本不包含数字”消息。当您知道有多少个字符时，请尝试将该 print 语句移到循环之后：

```
def CountNumbers(txt):
    sum = 0

    for n in txt:
        if n.isdigit():
            sum += 1

    if sum > 0:   
        print("Text has", sum, "digit(s)")
    else:
        print ("Text does not contain digits")

txt = str(input("Write some text: "))
(CountNumbers(txt)) 
```

**编辑：**关于好的 Python 代码还有几点：

*   正如您问题的评论中所指出的，按照惯例，Python 中的函数/方法用下划线小写命名，即`count_numbers`not `CountNumbers`。
*   Pedantic 模式：您正在计算字符串中的数字，而不是数字，因此为了清楚起见，它确实应该命名`count_digits`。
*   [有一个名为sum](http://docs.python.org/3/library/functions.html#sum)的内置 Python 函数。通过使用同名变量来*隐藏*此函数被认为是不好的做法。我会将您的`sum`变量重命名为`count`.
*   无需将函数调用括在括号中（它不会造成任何伤害，除了让它看起来很糟糕恕我直言）。

通过这些更改，您的代码变为：

```
def count_digits(txt):
    count = 0

    for n in txt:
        if n.isdigit():
            count += 1

    if count > 0:   
        print("Text has", count, "digit(s)")
    else:
        print ("Text does not contain digits")

txt = str(input("Write some text: "))
count_digits(txt) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T20:33:38.190

我刚刚解决了你的代码问题：

```
def CountNumbers(txt):
    sum = 0

    for n in txt:
        if n.isdigit():
            sum += 1

    if sum:
        print("Text has", sum, "digit(s)")
    else:
        print ("Text does not contain digits")

CountNumbers(input("Write some text: ")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T21:18:19.633

提前返回还不错，可以大大简化代码：

```
def CountNumbers(txt):
    for n in txt:
        if not n.isdigit():
            print ("Text does not contain digits")
            return

    print("Text has", len(txt), "digit(s)")

txt = str(input("Write some text: "))
(CountNumbers(txt)) 
```

此函数在出现非数字字符时立即返回，或打印输入字符串的长度（仅由*数字*组成）。

您也可以使用“生成表达式”来编写它，例如：

```
def CountNumbers(txt):
    if all(char.isdigit() for char in txt):
        print("Text has", len(txt), "digit(s)")
    else:
        print ("Text does not contain digits")

txt = str(input("Write some text: "))
(CountNumbers(txt)) 
```

现在，Python 函数更典型地返回值并让调用代码对其进行操作。此版本返回字符串并让程序的“主要”部分打印结果。它还将函数重命名为全小写（Python 通常使用大写的类名称）：

```
def countnumbers(txt):
    if all(char.isdigit() for char in txt):
        return "Text has %d digit(s)" % len(txt)
    else:
        return "Text does not contain digits"

txt = str(input("Write some text: "))
print(countnumbers(txt)) 
```

嗯，不要太破旧！但是 Python 也有漂亮的条件表达式，比如：

```
def countnumbers(txt):
    return ("Text has %d digit(s)" % len(txt)
        if all(char.isdigit() for char in txt)
        else "Text does not contain digits")

txt = str(input("Write some text: "))
print(countnumbers(txt)) 
```

最后，也许你想把它做成一个合适的模块，以便其他代码可以使用它。像这样包装程序的交互部分，它只会在您像命令行脚本一样运行它时执行，但如果您将其作为模块导入则*不会执行：*

```
def countnumbers(txt):
    return ("Text has %d digit(s)" % len(txt)
        if all(char.isdigit() for char in txt)
        else "Text does not contain digits")

if __name__ == '__main__':
    txt = str(input("Write some text: "))
    print(countnumbers(txt)) 
```

如果我将该函数编写为生产系统的一部分，那将非常接近它的外观。请注意，*逻辑*与您的第一次尝试相同。最大的不同是这个版本让 Python 完成了大部分工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T21:31:38.827

对原始版本进行了稍微 Pythonic 的改造。就个人而言，我发现“列表理解”形式更容易阅读（除非它是嵌套的）：

```
def count_digits(txt):
    count = len([c for c in txt if c.isdigit()])

    if count > 0:
        print ("Text has", count, "digit(s)")
    else:
        print ("Text does not contain digits") 
```

# java - 图像识别神经网络问题故障排除

> ID：13921640
> 
> 赞同：0
> 
> 时间：2012-12-17T20:27:38.077
> 
> 标签：java, image-processing, neural-network

提前感谢您阅读本文。

所以我正在尝试编写一个神经网络来识别图像中的特定徽标。我基本上有一个特定纵横比的滑动窗口，它将当前窗口缩放到输入的预期大小。窗口在将输入输入网络的周围滑动，并查看输出以确定窗口中的内容是否是我正在寻找的徽标。在这种情况下，它将在窗口边缘绘制一个框，勾勒出徽标。

我的问题在于神经网络报告的图像其他部分的置信度太高，最终会在整个地方绘制如此多的框，以至于无法看到原始图像的大部分内容。所以神经网络显然有问题。

为了输入图像，我尝试以灰度和颜色展开。这两种方式都行不通。我也尝试过输入大小的变化。当它开始变得太小时，它会变得更糟，但即使在 57x22x3 彩色展开输入时，它仍然会失败。

所以我认为这也不是问题。我的神经网络有 X 个输入神经元（其中 X 是宽度 * 高度 * num_colors）。我有一个隐藏层，大小也是 X，最后，我在输出层有 1 个输出神经元，输出一个介于 0.0 和 1.0 之间的值，代表总置信度。

我有 17 个正面训练示例（理想输出为 1.0）和 19 个负面训练示例（理想输出为 0.0）。训练后，网络报告的所有正例的置信度几乎相等，约为 0.95，所有负例的置信度几乎相等，约为 0.013。

我的理论是我拥有的训练示例的数量太少了，我应该收集/生成更多。最初我每个人只有 5 个，但我也没有看到从上升到 17+ 的任何收益。

我应该注意我已经尝试过使用 Encog 和 Neuroph，两者的结果都非常相似。我正在使用反向传播进行学习，并尝试使用 0.3 到 0.7 之间的学习率以及 0.0 到 0.8 之间的动量值。无论如何，结果几乎总是相同的。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T03:38:58.093

尝试使用 SOM/LVQ 神经网络对滑动窗口输入进行分类，这篇 matlab 帖子应该会给你一些想法[http://scriptbucket.wordpress.com/2012/09/21/image-classification-using-matlab-somlvq/](http://scriptbucket.wordpress.com/2012/09/21/image-classification-using-matlab-somlvq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:49:06.873

通常神经网络确实需要大量样本来学习，但不能肯定这是你的问题。

也许对您来说进行匹配的一个更好的主意是找到图案中每个像素与给定图像中图案可能存在的像素的百分比匹配（例如使用滑动窗口样式）。

如果您有一组像素颜色来匹配您的模式：

> 0xFF0000, 0x00FF00, 0x0000FF

以及具有这些像素颜色的图案：

> 0xEE0000、0x00FF00、0x0101DE

您可以获得每个像素的百分比增量，然后对其进行平均。现在有多种方法可以求平均值（加权平均值、指数加权平均值等）。最后，您可以获得整个图案的百分比匹配：图案与滑动窗口中当前像素的匹配程度。您始终可以跟踪最高分数，因此最后只显示一个框（与模式匹配概率最高的框）。

您可以为每个像素创建一个神经元，并且树突可以是颜色十六进制数的不同部分。也许每个 R、G、B 都有一个枝晶。在我上面给出的示例中，我为整个颜色整数取了一个树突。

# python - Python - 数据框的维度

> ID：13921647
> 
> 赞同：99
> 
> 时间：2012-12-17T20:27:52.850
> 
> 标签：python, pandas

Python 新手。

在 R 中，您可以使用 dim(...) 获取矩阵的维度。Python Pandas 的数据框对应的函数是什么？

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-12-17T20:29:56.957

`df.shape`，`df`你的DataFrame在哪里。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2017-11-06T14:44:05.603

# 获取有关 DataFrame 或 Series 的维度信息的所有方法的摘要

有多种方法可以获取有关 DataFrame 或 Series 属性的信息。

**创建示例 DataFrame 和系列**

```
df = pd.DataFrame({'a':[5, 2, np.nan], 'b':[ 9, 2, 4]})
df

     a  b
0  5.0  9
1  2.0  2
2  NaN  4

s = df['a']
s

0    5.0
1    2.0
2    NaN
Name: a, dtype: float64 
```

### `shape`属性

该`shape`属性返回 DataFrame 中行数和列数的两项元组。对于一个系列，它返回一个单项元组。

```
df.shape
(3, 2)

s.shape
(3,) 
```

* * *

### `len`功能

要获取 DataFrame 的行数或获取 Series 的长度，请使用该`len`函数。将返回一个整数。

```
len(df)
3

len(s)
3 
```

* * *

### `size`属性

要获取 DataFrame 或 Series 中的元素总数，请使用该`size`属性。对于 DataFrame，这是行数和列数的乘积。对于系列，这将等效于以下`len`功能：

```
df.size
6

s.size
3 
```

* * *

### `ndim`属性

该`ndim`属性返回 DataFrame 或 Series 的维数。DataFrames 总是 2，Series 总是 1：

```
df.ndim
2

s.ndim
1 
```

* * *

### 棘手的`count`方法

该`count`方法可用于返回 DataFrame 的每一列/行的非缺失值的数量。这可能非常令人困惑，因为大多数人通常认为 count 只是每行的长度，但事实并非如此。在 DataFrame 上调用时，将返回一个 Series，其中包含索引中的列名和非缺失值的数量作为值。

```
df.count() # by default, get the count of each column

a    2
b    3
dtype: int64

df.count(axis='columns') # change direction to get count of each row

0    2
1    2
2    1
dtype: int64 
```

对于一个系列，只有一个计算轴，所以它只返回一个标量：

```
s.count()
2 
```

* * *

## 使用`info`检索元数据的方法

该`info`方法返回每列的非缺失值个数和数据类型

df.info()

```
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 3 entries, 0 to 2
Data columns (total 2 columns):
a    2 non-null float64
b    3 non-null int64
dtypes: float64(1), int64(1)
memory usage: 128.0 bytes 
```

# c# - 运行超过 2 个线程时 FtpWebRequest 超时

> ID：13921649
> 
> 赞同：3
> 
> 时间：2012-12-17T20:27:57.103
> 
> 标签：c#, multithreading, ftp

> **可能重复：**
> [如何以编程方式删除 WebClient 中的 2 个连接限制](https://stackoverflow.com/questions/866350/how-can-i-programmatically-remove-the-2-connection-limit-in-webclient)

在我开始尝试一次运行多个线程之前，我的 FTP 脚本运行良好。在过度调试之后`FtpWebRequest`，如果其他两个线程已经在做某事，就会发现只是超时。（上传、检查文件/目录是否存在或创建目录。）

我已经尝试在 ftp 类中实现一个锁，以便一次只能创建一个线程`FtpWebRequest`（然后在获得 c 的响应时关闭锁），但这没有帮助。

每个请求都使用它自己的`FtpWebRequest`对象，所以我不太确定为什么会这样。使用客户端时，我可以同时将 10 个文件上传到同一个 FTP 服务器，`FileZilla`所以我无法想象这是服务器端的问题。

.NET 中是否存在导致此问题的静态幕后事件？

**超时 >2 个线程的示例函数：**

```
public class ftp
{
    private string host = null;
    private string user = null;
    private string pass = null;
    private int bufferSize = 2048;

    /* Construct Object */
    public ftp(string hostIP, string userName, string password) { host = hostIP; user = userName; pass = password; }

    private object fileFolderCheckLock = new object(); //Only check if a file/dir exists one thread at a time
    private object requestLock = new object(); //Don't create multiple ftprequests simultaneously. Exit this lock when the response is being received.

    /* Create a New Directory on the FTP Server */
    public bool CreateDirectory(string newDirectory)
    {
        FtpWebRequest ftpRequest = null;
        FtpWebResponse ftpResponse = null;
        try
        {
            lock(requestLock)
            {
                if(!newDirectory.EndsWith("/")) newDirectory += "/";
                //Console.WriteLine("chk: "+host + "/" + newDirectory);
                Uri theuri = new Uri(host + "/" + newDirectory);
                //Console.WriteLine("theuri: "+theuri.ToString());
                /* Create an FTP Request */
                ftpRequest = (FtpWebRequest)WebRequest.Create(theuri);
                /* Log in to the FTP Server with the User Name and Password Provided */
                ftpRequest.Credentials = new NetworkCredential(user, pass);
                /* When in doubt, use these options */
                ftpRequest.UseBinary = true;
                ftpRequest.UsePassive = true;
                ftpRequest.KeepAlive = true;
                ftpRequest.Timeout = 10000;
                /* Specify the Type of FTP Request */
                ftpRequest.Method = WebRequestMethods.Ftp.MakeDirectory;
                /* Establish Return Communication with the FTP Server */
                ftpResponse = (FtpWebResponse)ftpRequest.GetResponse();
            }
        }
        catch (Exception ex){ Console.WriteLine("CreateDirectory Exception"+ex.ToString()); }
        finally
        {
            /* Resource Cleanup */
            try{ftpResponse.Close();}catch(Exception){}//??
            ftpRequest = null;
        }
        return true;
    }
} 
```

谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T20:48:21.383

您可能正在达到默认的最大连接数。看看这个：[How can I programmatically remove the 2 connection limit in WebClient](https://stackoverflow.com/questions/866350/how-can-i-programmatically-remove-the-2-connection-limit-in-webclient)

# tinymce - 下划线不会使用 TinyMCE 和 Ice NYTimes 插件保存

> ID：13921650
> 
> 赞同：1
> 
> 时间：2012-12-17T20:28:03.333
> 
> 标签：tinymce, underline, ice-js

我正在使用纽约时报的 TinyMCE 冰插件。这是一个很棒的曲目更改插件。问题是它似乎干扰了 TinyMCE 的常规下划线行为。我可以在文本下划线，但在保存该文本后，下划线会被删除。

粗体适当地保存为：

```
<p><strong>uuuuuuu</strong></p> 
```

斜体另存为：

```
<p><em>uuuuuuu</em></p> 
```

但下划线保存为：

```
<p><span>uuuuuuu</span></p> 
```

最后，没有样式保存为：

```
<p>uuuuuuu</p> 
```

因此，出于某种原因，样式：“下划线”正在从跨度标签中删除。去除冰块可以解决问题，但我们需要改变轨道。任何帮助都会很棒！

# django - django rest框架通过POST创建嵌套对象“模型”

> ID：13921654
> 
> 赞同：26
> 
> 时间：2012-12-17T20:28:14.387
> 
> 标签：django, django-rest-framework

我正在尝试发布一个新的嵌套对象，问题只是创建“顶部”对象（播放列表），但不要创建“ChannelItem”......

我的模型：

```
class Playlist(models.Model):
    provider = models.IntegerField()
    channel_id = models.CharField(max_length=100)
    channel_version = models.CharField(blank=True, max_length=100)
    start = models.DateTimeField()
    url = models.CharField(max_length=500)

class ChannelItem(models.Model):
    playlist = models.ForeignKey(Playlist, editable=False, related_name='channelitems')
    content_id = models.CharField(max_length=100)
    content_version = models.CharField(blank=True, max_length=100) 
```

我的序列化器：

```
class ChannelItemSerializer(serializers.ModelSerializer):
    class Meta:
        model = ChannelItem
        fields = ('content_id', 'content_version')
        exclude = ('id')
        depth = 1

class PlaylistSerializer(serializers.ModelSerializer):

    class Meta:
        model = Playlist
        fields = ('id', 'provider', 'channel_id', 'channel_version', 'start', 
                  'url', 'channelitems')
        depth = 2

channelitems = ChannelItemSerializer() 
```

我使用 curl 发布以下数据：

```
'{"provider":125,"channel_id":"xyz", "channel_version":"xsqt", 
"start":"2012-12-17T11:04:35","url":"http://192.168.1.83:8080/maaaaa",
"channelitems":[{"content_id":"0.flv", "content_version":"ss"},
{"content_id":"1.flv","content_version":"ss"}]}' http://localhost:8000/playlist_scheduler/playlists/ 
```

我收到消息：

```
HTTP/1.1 201 CREATED
Content-Type: application/json
Transfer-Encoding: chunked
Date: Mon, 17 Dec 2012 20:12:54 GMT
Server: 0.0.0.0

{"id": 25, "provider": 125, "channel_id": "xyz", "channel_version": "xsqt",
"start":"2012-12-17T11:04:35", "url": "http://localhost:8080/something",
"channelitems": []} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-17T22:59:25.063

嵌套表示[目前不支持 read-write](http://tomchristie.github.io/rest-framework-2-docs/api-guide/serializers.html#dealing-with-nested-objects)，而应该是只读的。

您可能应该考虑使用平面表示，使用 pk 或超链接关系。

如果您需要嵌套表示，您可能需要考虑使用两个单独的端点 - 一个平面可写端点和一个嵌套只读端点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-17T06:22:09.487

如果有人需要一个快速而肮脏的解决方案，我想出了一个我将在项目中临时使用的解决方案：

```
class NestedManyToManyField(serializers.WritableField):
    def to_native(self, value):
        serializer = self.Meta.serializer(value.all(), many=True, context=self.context)
        return serializer.data
    def from_native(self, data):
        serializer = self.Meta.serializer(data=data, many=True, context=self.context)
        serializer.is_valid()
        serializer.save()
        return serializer.object
    class Meta:
        serializer = None 
```

然后创建您自己的子类`NestedManyToManyField`：

```
class TopicNestedSerializer(NestedManyToManyField):
    class Meta:
        serializer = MyOriginalSerializer 
```

一个例子`MyOriginalSerializer`：

```
class MyOriginalSerializer(serializers.ModelSerializer):
    class Meta:
        model = models.MyModel
        fields = ('id', 'title',) 
```

到目前为止，这对我来说很好。但请注意，即将有干净的修复：

*   [https://github.com/tomchristie/django-rest-framework/issues/960](https://github.com/tomchristie/django-rest-framework/issues/960)
*   [https://github.com/tomchristie/django-rest-framework/pull/817](https://github.com/tomchristie/django-rest-framework/pull/817)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T12:59:07.393

经过长时间的努力，我制作了第一个版本，funcinasse ...我相信通过一些改进可以包含在 ModelSerializer 中

```
class ChannelItemSerializer(serializers.ModelSerializer):

    class Meta:
        model = ChannelItem
        fields = ('id', 'content_id', 'content_version')

    def field_from_native(self, data, files, field_name, into):
        try:
            if self._use_files:
                _files = files[field_name]
            else:
                _data = data[field_name]
        except KeyError:
            if getattr(self, 'default', None):
                _data = self.default
            else:
                if getattr(self, 'required', None):
                    raise ValidationError(self.error_messages['required'])
                return

        if type(_data) is list:
            into[field_name] = [] 
            for item in _data:
                into[field_name].append(self._custom_from_native(item))
        else:
            into[field_name] = self._custom_from_native(_data)

    def _custom_from_native(self, data):
        self._errors = {}
        if data is not None:
            attrs = self.restore_fields(data, None)
            attrs = self.perform_validation(attrs)
        else:
            self._errors['non_field_errors'] = ['No input provided']

        if not self._errors:
            return self.restore_object(attrs, instance=getattr(self, 'object', None))

class PlaylistSerializer(serializers.ModelSerializer):

    class Meta:
        model = Playlist
        fields = ('id', 'provider', 'channel_id', 'channel_version', 'start', 'url', 'channel_items')
        depth = 1

    channel_items = ChannelItemSerializer()

    def restore_object(self, attrs, instance=None):
        self.foreign_data = {}

        for (obj, model) in self.opts.model._meta.get_all_related_objects_with_model():
            field_name = obj.field.related_query_name()
            if field_name in attrs:
                self.foreign_data[field_name] = attrs.pop(field_name)

        return super(PlaylistSerializer, self).restore_object(attrs, instance)

    def save(self, save_m2m=True):
        super(PlaylistSerializer, self).save(save_m2m)

        if getattr(self, 'foreign_data', None):
            for accessor_name, object_list in self.foreign_data.items():
                setattr(self.object, accessor_name, object_list)
            self.foreign_data = {}

        return self.object 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-03T19:27:04.987

对我来说，我有一个我可以接受的混合解决方法。即，创建一个具有以下内容的视图：

*   非嵌套序列化程序形式的 ManyToMany 字段
*   将嵌套的 ManyToMany 字段别名`_objs`为后缀为变量的变量，并将其指定为只读
*   当您`PUT`回到服务器时，协调两个别名字段并将结果存储在未嵌套的序列化器字段中

例如

```
class MSerializer(serializers.HyperlinkedModelSerializer):
    foo_objs = TempSensorSerializer(source='foos', many=True, allow_add_remove=True,required=False,read_only=True)
    class Meta:
        model = M
        fields = ('url', 'foos', 'foo_objs') 
```

我不喜欢这个解决方案，但它比在检索初始容器后尝试单独查询和整理嵌套字段要好。

# java - Java - 线程基数排序

> ID：13921655
> 
> 赞同：2
> 
> 时间：2012-12-17T20:28:16.190
> 
> 标签：java, multithreading, sorting, radix

我一直在研究基数排序的不同变体。起初我使用链接，这真的很慢。然后我在使用 val % (10 * pass) 时继续使用计数排序，最近将其转换为相应的字节并对它们进行计数排序，这也允许我按负值排序。

我想用多线程来尝试它，并且只能让它工作大约一半的时间。我想知道是否有人可以帮助查看我的代码，看看我的线程哪里出了问题。我让每个线程计数对每个字节进行排序。谢谢：

```
public class radixSort {

    public int[] array;
    public int arraySize, arrayRange;
    public radixSort (int[] array, int size, int range) {
        this.array = array;
        this.arraySize = size;
        this.arrayRange = range;
    }
    public int[] RadixSort() {
        Thread[] threads = new Thread[4];
        for (int i=0;i<4;i++)
            threads[i] = new Thread(new Radix(arraySize, i));
        for (int i=0;i<4;i++)
            threads[i].start();
        for (int i=0;i<4;i++)
            try {
                threads[i].join();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        return array;
    }
    class Radix implements Runnable {
        private int pass, size;
        private int[] tempArray, freqArray;
        public Radix(int size, int pass) {
            this.pass = pass;
            this.size = size;
            this.tempArray = new int[size];
            this.freqArray = new int[256];
        }
        public void run() {
            int temp, i, j;
            synchronized(array) {
                for (i=0;i<size;i++) {
                    if (array[i] <= 0) temp = array[i] ^ 0x80000000;
                    else temp = array[i] ^ ((array[i] >> 31) | 0x80000000);
                    j = temp >> (pass << 3) & 0xFF;
                    freqArray[j]++;
                }
                for (i=1;i<256;i++)
                    freqArray[i] += freqArray[i-1];
                for (i=size-1;i>=0;i--) {
                    if (array[i] <= 0) temp = array[i] ^ 0x80000000;
                    else temp = array[i] ^ ((array[i] >> 31) | 0x80000000);
                    j = temp >> (pass << 3) & 0xFF;
                    tempArray[--freqArray[j]] = array[i];
                }
                for (i=0;i<size;i++)
                    array[i] = tempArray[i];
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:39:01.187

There is a basic problem with this approach. To get a benefit from multithreading, you need to give each thread a non-overlapping task compared to the other treads. By `synchonizing` on the `array` you have made it so only one thread does work at a time, meaning you get all the overhead of threads with none of the benefit.

Think of ways to partition the task so that threads work in parallel. For example, after the first pass, all the item with a 1 high bit will be in one part of the array, and those with a zero high-bit will be in the other. You could have one thread work on each part of the array without synchronizing.

Note that your `runnable` has to completely change so that it does one pass at a specified subset of the array then spawns threads for the next pass.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:38:44.953

除了错误的类和方法名称（类应该以大写字母开头，方法不应该）之外，我可以看到您正在同步数组上的所有线程工作。所以它实际上根本不是平行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:53:59.210

I am pretty sure that you can't really parallelize RadixSort, at least in the way you are trying to. Someone pointed out that you can do it by divide-and-conquer, as you first order by the highest bits, but in fact, RadixSort works by comparing the lower-order bits first, so you can't really divide-and-conquer. The array can basically be completely permuted after each pass.

Guys, prove me wrong, but i think it's inherently impossible to parallelize this algorithm like you try to. Maybe you can parallelize the (count) sorting that is done inside of each pass, but be aware that ++ is not an atomic operation.

# ibm-mq - 在 IBM MQ Explorer 中添加其他协调队列管理器

> ID：13921657
> 
> 赞同：0
> 
> 时间：2012-12-17T20:28:46.393
> 
> 标签：ibm-mq, websphere-mq-fte

一旦在 IBM MQ Explorer 的“Managed File Transfer”文件夹中拥有了一个协调队列管理器（当然还有 FTE 插件），那么如何添加额外的协调队列管理器呢？我在托管文件传输文件夹中没有看到“添加协调 Qmgr”选项...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T04:23:25.017

您必须从命令行使用 fteSetupCoordination 命令创建一个协调队列管理器。

```
fteSetupCoordination.cmd -coordinationQMgr QM_COORD2 -coordinationQMgrHost localhost -coordinationQMgrPort 3099 -coordinationQMgrChannel MQSVRCHN 
```

此命令将在 config 目录下创建一个 .mqsc 文件。该 mqsc 文件必须针对新的协调队列管理器运行。例如：

```
runmqsc QM_COORD2 < C:\MQFTE\IBM\WMQFTE\config\QM_COORD2\QM_COORD2.mqsc 
```

启动 MQ Explorer，您将看到节点`QM_COORD2`下的另一个协调队列管理器。**请注意，任何时候都只能有一个协调队列管理器处于活动状态。**因此队列管理器将显示为非活动状态。您将需要断开活动的协调队列管理器，然后使其处于活动状态。要使其处于活动状态，只需右键单击并单击短菜单。`Managed File Transfer`**`QM_COORD2``QM_COORD2``QM_COORD2``Connect`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:23:42.227

因此，在解决 PMR 之后，我们发现我在 v 7.0.1.2 中为 MQ Explorer 实现的 FTE 插件无法检测到额外的协调队列管理器。我部署了 v7.5 版本，现在一切正常。结案。**

# backbone.js - 将主干事件绑定并触发到特定视图

> ID：13921661
> 
> 赞同：0
> 
> 时间：2012-12-17T20:29:02.347
> 
> 标签：backbone.js, backbone-views, backbone-events

我正在创建一个 ajax 上传组件，它由每个主干视图的进度条组成，这就是我的视图模板的样子。

```
<script id="view-template-dropped-file" type="text/html">
    <a><%=name %></a><span><%=fileSize%></span>
    <div class="ui-progress-bar">
        <div class="ui-progress"></div>
    </div>
</script> 
```

当我将文件拖放到拖放区域时，我会像这样为每个文件创建一个视图

```
for (i = 0; i < files.length; i++) {
    var view = new DroppedFileView({
        model: new DroppedFile({
            name: files[i].name,
            fileSize: files[i].size
        })
    });
    var $li = view.render().$el;
    $('#droparea ul').append($li);
}); 
```

添加了一些文件的放置区域显示每个文件的进度条。[http://cl.ly/Lf4v](http://cl.ly/Lf4v)

现在，当我按下上传时，我需要分别显示每个文件的进度。

我试图做的是像这样绑定到我的 DroppedFileView 中的事件

```
initialize: function() {
    var app = myapp.app;
    app.bind('showProgress', this._progress, this);
} 
```

和 _progress 函数

```
_progress: function(percentComplete) {
    this.$el.find('.ui-progress').animateProgress((percentComplete * 100), function () { }, 2000);
} 
```

这就是我从放置区域视图触发事件的方式

```
xhr: function () {
    var xhr = new window.XMLHttpRequest();
    xhr.upload.addEventListener("progress", function (e) {
        if (e.lengthComputable) {
            var percentComplete = e.loaded / e.total;
            app.trigger('showProgress', percentComplete);
        }
    }, false);
    return xhr;
} 
```

当然这不会起作用，因为我在所有视图中都听相同的 showProgress 事件，这将导致所有进度条显示相同的进度。

那么，是否可以将事件绑定到指定的视图，以便可以单独更新进度，或者事件不是一个好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:55:22.977

您可能需要考虑让`DroppedFile`模型发出进度事件。因此，与其在 上触发事件`app`，不如在正在上传的模型实例上触发它。

您的示例代码没有提到哪个类拥有该`xhr`方法，但在模型本身上定义它是有意义的。在这种情况下，事件触发是微不足道的：

```
xhr: function () {
    var model = this;
    var xhr = new window.XMLHttpRequest();
    xhr.upload.addEventListener("progress", function (e) {
        if (e.lengthComputable) {
            var percentComplete = e.loaded / e.total;
            model.trigger('showProgress', percentComplete);
        }
    }, false);
    return xhr;
} 
```

在视图构造函数中：

```
initialize: function() {
    this.model.bind('showProgress', this._progress, this);
} 
```

**根据评论编辑：**

即使您的视图结构比我上面假设的要复杂一些，我认为使用`DroppedFile`模型作为事件发射器是可行的方法。如果一个`DroppedFileView`代表`DroppedFile`，它应该反映它有意义的模型的状态。

`DropzoneView`只需跟踪`DropzoneView.files`. 无论您是想让实际的 AJAX 请求成为视图的责任，还是将其重构为单个模型，都无关紧要。

# c++ - C++ 默认枚举值用法

> ID：13921662
> 
> 赞同：6
> 
> 时间：2012-12-17T20:29:08.593
> 
> 标签：c++, enums, default-value

这个讨论是关于默认值的名称： [C#：枚举的默认值应该是 None 还是 Unknown？](https://stackoverflow.com/questions/3160376/c-should-the-default-value-of-an-enum-be-none-or-unknown)

但是，最近与我交谈过的很多人都认为默认枚举值是有害的、不必要的，并且可能会导致不好的做法。

例如，考虑以下内容：

```
enum eJobStates
{
    JOB_STATE_INITIALISING,
    JOB_STATE_PROCESSING,
    JOB_STATE_DONE
}; 
```

将作业设置为 JOB_STATE_UNKNOWN 是没有意义的，但是您可以想象任何可能用于监视所述作业的结构都可以使用这样的值。

在定义枚举时是否有任何关于创建默认值的最佳实践/经验法则？是否应该尽可能地避免它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:11:14.523

无效的默认值基本上是您设计中的变体。该对象在创建时无效。你应该在*合理*的时候避免这种情况。绝不应该“不惜一切代价”避免它。

有些问题需要您从变体状态开始。在这种情况下，您**必须**在心理上推理该无效值。如果您避免命名它，那么您正在积极地降低您的代码的表现力。考虑一下您与以后必须维护代码的人之间的沟通。

顺风处理它很烦人。您从一个变体状态开始，但是当它相关时，您希望它不再是变体。我更喜欢的策略是允许用户忽略变体状态并在我犯错时抛出。

```
namespace FooType {
  enum EnumValue {
    INVALID = 0
    ,valid
  };
}

struct Foo {
  Foo() : val(FooType::INVALID) {}
  FooType::EnumValue get() const {
    if (val == FooType::INVALID)
      throw std::logic_error("variant Foo state");
    return val;
  }
  FooType::EnumValue val;
}; 
```

这使您的用户不必为您的差异进行推理，这是值得为之奋斗的。

如果您无法摆脱这种情况，我通常更愿意降级为安全和不安全的接口。

```
struct Foo {
  Foo() : val(FooType::INVALID) {}
  bool get(FooType::EnumValue& val_) const {
    if (val == FooType::INVALID)
      return false;
    val_ = val;
    return true;
  }
  FooType::EnumValue get() const {
    FooType::EnumValue val_;
    if (!get(val_))
      throw std::logic_error("variant Foo state");
    return val_;
  }
  FooType::EnumValue get_or_default(FooType::EnumValue def) const {
    FooType::EnumValue val_;
    if (!get(val_))
      return def;
    return val_;
  }
  FooType::EnumValue val;
}; 
```

这些类型的接口适用于可能需要空值的数据库之类的东西。

# regex - Mx align-regexp 删除文本？

> ID：13921664
> 
> 赞同：5
> 
> 时间：2012-12-17T20:29:18.337
> 
> 标签：regex, emacs

这是我尝试格式化的示例文本：

```
(9 12 19 38 0 -39 -20 -13 -10)
(7 9 14 29 0 -30 -15 -10 -8)
(4 6 9 19 0 -20 -10 -7 -5)
(2 3 4 9 0 -10 -5 -4 -3)
(0 0 0 0 0 0 0 0 0)
(-3 -4 -5 -10 0 9 4 3 2)
(-5 -7 -10 -20 0 19 9 6 4)
(-8 -10 -15 -30 0 29 14 9 7)
(-10 -13 -20 -39 0 38 19 12 9) 
```

我希望每列都对齐数字，（即如果有减号，请添加额外的空格）。

如果我这样做：`C-u``M-x``align-regexp``RET``\([[:digit:]]+\)``RET``RET``RET```y``

我明白了：

```
(9  12 19 38 0 -3 -2 -1 -1)
(7  9  14 29 0 -3 -1 -1 -8)
(4  6  9  19 0 -2 -1 -7 -5)
(2  3  4  9  0 -1 -5 -4 -3)
(0  0  0  0  0 0  0  0  0 )
(-3 -4 -5 -1 0 9  4  3  2 )
(-5 -7 -1 -2 0 19 9  6  4 )
(-8 -1 -1 -3 0 29 14 9  7 )
(-1 -1 -2 -3 0 38 19 12 9 ) 
```

这非常接近，但不是我想要的。

如果我尝试修改表达式以包含减号，如下所示：`\(-?[[:digit:]]+\)`

然后我得到这个：

```
(9 1 1 3 0 - - - -)
(7 9 1 2 0 - - - -)
(4 6 9 1 0 - - - -)
(2 3 4 9 0 - - - -)
(0 0 0 0 0 0 0 0 0)
(- - - - 0 9 4 3 2)
(- - - - 0 1 9 6 4)
(- - - - 0 2 1 9 7)
(- - - - 0 3 1 1 9) 
```

这是一个错误，还是有什么我不知道的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:54:01.820

指定组（通常是组 1）匹配的文本被扩展或缩小，因此组中的非空白字符会被删除，如您所见。除非启用了对齐，这通过向 提供*负*组号来指示`align-regexp`：

`C-u``M-x``align-regexp``RET``\(\s-*-?\)[0-9]+``RET``-1``RET``RET``y`

如果需要，您可以通过在匹配组中包含数字来对齐每个数字的个位上的列：

`C-u``M-x``align-regexp``RET``\(\s-*-?[0-9]+\)``RET``-1``RET``RET``y`

在任何一种情况下，都会在每个左括号后插入一个额外的空格。我看不出有什么办法可以避免`align-regexp`这样做，但如果你经常这样做，你可以将它包装在一个执行, 然后用原始区域中的任何地方`align-regexp`替换正则表达式`"^( "`的命令中。`"("`

# linux - SublimeText 启动后总是崩溃

> ID：13921665
> 
> 赞同：1
> 
> 时间：2012-12-17T20:29:23.147
> 
> 标签：linux, crash, sublimetext2, fedora, glibc

Sublime总是在启动后突然开始下降。

```
*** glibc detected *** sublime: free(): invalid pointer: 0x42197460 *** 
```

完整：[https ://gist.github.com/4321825](https://gist.github.com/4321825)

我已经尝试删除配置并重新运行 sublime 并重新安装它，但它没有任何效果。

**glibc 版本：**

```
Version     : 2.15
Release     : 58.fc17 
```

**软呢帽 17, x32**

**崇高文本 2 构建 2217**

我还尝试了这里[http://repo.cloudhike.com/sublime2_dev/fedora/17/i386/RPMS/](http://repo.cloudhike.com/sublime2_dev/fedora/17/i386/RPMS/)的所有版本， 但效果相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:35:57.100

经过一些研究，我发现问题出在包装中

```
cairo-freeworld.i686 0:1.10.2-1.fc17.R 
```

这是依赖于

```
fontconfig-infinality.noarch 3.1-3.R 
```

我刚刚降级它来解决我的问题。

# java - Spring MVC - 什么是 url 路径信息？

> ID：13921666
> 
> 赞同：0
> 
> 时间：2012-12-17T20:29:37.823
> 
> 标签：java, spring, spring-mvc

我想知道什么是 url 路径信息？

例如在

> **http://myserver:8080/servletname/handlermethod**

它是包括服务器名称的整个路径：

> **http://myserver:8080/servletname/handlermethod**

还是只是

**/servletname/handlermethod**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T20:48:31.580

`getPathInfo()`根据文档：

> 返回与客户端发出此请求时发送的 URL 关联的任何额外路径信息。额外的路径信息在 servlet 路径之后，但在查询字符串之前，并以“/”字符开头。

所以在你的例子中它会返回`/handlermethod`

如果你想拥有`/servletname/handlermethod`你应该使用`getRequestURI()`.

`getRequestURL()`将返回客户端创建的完整 URL（字符串参数除外）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T21:33:26.783

Spring MVC 中的路径信息可能暗示通过 URL 发送的信息。在 Spring MVC 控制器中，您可以轻松设置请求映射，其中包括一个变量值占位符，该占位符绑定到`@PathVariable`方法签名中带有注释的参数 - 与请求映射相关。例如：

```
 @RequestMapping(value = "/user/{userId}")  
public ModelAndView getUserByPathVariable(@PathVariable Long userId, HttpServletRequest request,  HttpServletResponse response) { 
        System.out.println("Got request param: " + userId); 
```

您可以在这里查看更详细的示例：[Spring MVC Controller Example](http://www.commonj.com/blogs/2012/06/01/spring-mvc-3-tutorial-passing-request-parameters-to-controllers/)

# python-2.7 - python multiprocessing socket.error：[Errno 111]连接被拒绝？

> ID：13921669
> 
> 赞同：8
> 
> 时间：2012-12-17T20:29:43.517
> 
> 标签：python-2.7, connection, multiprocessing, errno

我正在使用 python 2.7 中的多处理进行简单的服务器/客户端连接。
当我在单独的 python shell 中运行客户端代码时，连接成功，但是当我将应用程序作为一个整体运行时，我得到“socket.error: [Errno 111] Connection denied”。

这是回溯：

```
Traceback (most recent call last):
  File "./kaboom", line 276, in <module>
    sequence.run(testEnv)
  File "/e/m/amoreau/test_edit/kaboom/src/kbmSequence.py", line 271, in run
    if testEnv.open() != SUCCESS:
  File "/e/m/amoreau/test_edit/kaboom/src/kbmTestEnv.py", line 518, in open
    queueManager = resultsClient.QueueServerClient()
  File "/e/m/amoreau/test_edit/kaboom/resultsClient.py", line 15, in QueueServerClient
    manager.connect()
  File "/usr/lib64/python2.6/multiprocessing/managers.py", line 474, in connect
    conn = Client(self._address, authkey=self._authkey)
  File "/usr/lib64/python2.6/multiprocessing/connection.py", line 143, in Client
    c = SocketClient(address)
  File "/usr/lib64/python2.6/multiprocessing/connection.py", line 263, in SocketClient
    s.connect(address)
  File "<string>", line 1, in connect
socket.error: [Errno 111] Connection refused 
```

为什么会这样？我已禁用所有防火墙。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-05-30T00:40:24.070

你好，我刚遇到这个问题。我知道这是一个旧答案，但我在相关问题中找到了答案。它在下面列出。问题是客户端在服务器创建套接字之前尝试连接到服务器。

嗯，这就是我的情况。将服务器派生到另一个进程所需的时间比客户端尝试连接的时间要长一点。为了测试，我在我的客户中打了一个睡眠电话，果然，没有更多的错误。

[Python 套接字错误 - 连接被拒绝](https://stackoverflow.com/questions/11585377/python-socket-error-errno-111-connection-refused?rq=1)

# r - 如何通过变量将参数传递到 data.table[J()]

> ID：13921670
> 
> 赞同：2
> 
> 时间：2012-12-17T20:29:44.703
> 
> 标签：r, optimization, data.table

我对（完全了不起的）软件包是全新的`data.table`，并且似乎陷入了一个非常基本的，有点奇怪的问题。我无法发布我正在使用的确切数据集，对此我深表歉意——但我认为问题很简单，可以清楚地表达，希望这仍然很清楚。

假设我有一个像这样的data.table，带有键x：

```
set1
   x y
1: 1 a
2: 1 b
3: 1 c
4: 2 a 
```

我想返回一个`set1`包含所有行的子集，其中`x == 1`. 这在 data.table: 中非常简单`set1[J(1)]`。巴姆。完毕。我也可以分配`z <- 1`和调用`set1[J(z)]`。再次：效果很好。

...除非我尝试将其扩展到包含约 6M 行的实际数据集。当我打电话时`set1[J(1674)]`，我得到了一个 78 行的回报，这正是我正在寻找的。但我需要能够查找（字面上）这些子集的 4M。当我将要搜索的值分配给变量时，`id <- 1674`, 并调用`set1[J(id)]`... R 几乎占据了我的桌面。

显然，我不明白的*事情*发生在 data.table 引擎盖下，但我无法弄清楚是什么。谷歌搜索和通过 Stack Overflow 搜索表明这应该可行。出于纯粹的奇思妙想，我尝试过：

```
id <- quote(1674)
set1[J(eval(id))] 
```

......但那远非常糟糕。什么……这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:52:48.123

[@mnel 在我写作的时候打败了我……]

几乎可以肯定，一列`set1`恰好被称为`"id"`; IE，

```
isTRUE("id" %in% names(set1)) 
```

导致`set1[J(id)]`自我加入`set1$id`，`set1`忽略`id`调用范围。

如果是这样，有几种方法可以避免这样的范围问题：

```
.id = <your 4M ids>
set1[J(.id)] 
```

`i`或使用在调用范围中评估单个名称的事实：

```
JDT=J(id); set1[JDT] 
```

或者那`eval`也是`eval`在调用范围内：

```
set1[eval(J(id))] 
```

或者，我们确实想让这个更清晰、更健壮和更容易，所以一个想法是添加`..`：

```
set1[..(J(id))]     # .. alias for eval 
```

也许 ：

```
set1[J(..id)] 
```

where`..`从文件系统的 中借用它的含义`..`，意思是上一级。如果`..`是符号的前缀，则可以执行以下操作：

```
DT[colB==..id] 
```

where `==` is used there for illustration. In that example `colB` is expected to be a column name and `..id` will find `id` in calling scope (one level up). The thinking is that that would be quite clear to the reader of the code what the programmer intended.

# mysql - 如何将与字符串连接的数字插入mysql数据库？

> ID：13921671
> 
> 赞同：-1
> 
> 时间：2012-12-17T20:29:46.463
> 
> 标签：mysql, string, insert, numbers

如何将其插入`917678904@tmomail.com`mysql数据库？.

我尝试在它周围加上单引号而没有单引号，但两种方法都失败了。

```
// This is my query:

$n = 917678904@tmomail.com;
$table = "invites";

if(!mysql_query("INSERT into $dbname.$table (accepted_by, accepted_on, phone, email,  reffer) 
              VALUES('NULL', 'NULL', 'NULL', `$n`, 'NULL'")){
                 echo mysql_error();
} 
```

这是表结构

```
accepted_by VARCHAR (50) NOT NULL
accepted_on VARCHAR (45) NOT NULL
phone VARCHAR (11) NULL
email VARCHAR (250) NULL
refferer CHAR (3) NOT NULL) 
```

这是 $n 周围带有单引号的错误消息：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 2 
```

我正在使用 MYSQL 5.0 版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:30:48.000

```
`$n` 
```

in your values field is incorrect. Backticks are used to escape field names, which the value of `$n` almost certainly isn't. It should be using regular quotes:

```
INSERT ... VALUES (..., '$n', ...)
                        ^--^-- 
```

As well, `'NULL'` is also incorrect. That will try to insert the literal characters `N`, `U`, `L`, `L` into your db table. For an actual SQL null value, remove the quotes:

```
... VALUES(NULL, NULL,....)
           ^^^^ 
```

And lastly, you say your table structure has `refferer`, but your query string is using `reffer`. Maybe just a typo, but worth pointing out.

# compiler-construction - 语法导向翻译

> ID：13921675
> 
> 赞同：3
> 
> 时间：2012-12-17T20:29:58.150
> 
> 标签：compiler-construction, syntax, context-free-grammar

我需要语法导向翻译方面的帮助。我不知道如何分解语法，以便为它生成四元组。

举个例子：

```
S ::= If E then S1 else S2 
```

被分解成这个（因为我们不知道跳跃目标）

```
1\. <ifstmt> ::= <truepart> S2
2\. <truepart> ::= <ifclause> S1 else
3\. <ifclause> ::= if E then 
```

分解时的一般方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T01:24:04.330

通常，您在可能需要生成代码的地方将每个语法构造分开（正如您使用 if-then-else 演示的那样），并将代码生成操作附加到解析器的语法规则缩减操作。

虽然你可以这样做，但你会得到相当笨拙的代码；从根本上说，您最终将实现一个堆栈机器，因为纯语法无法跟踪上下文，因此您必须假设它是递归构造的（例如，类似堆栈的）。如果你这样做，你会得到比你真正想要的更多和愚蠢的四倍。所做的一切都是浪费后端的时间，如果它正在优化，或者导致它生成愚蠢的代码，如果不是。

大多数情况下，当一个人生成四边形时，一个人对比“语法定向翻译”更复杂的东西感兴趣。在这种情况下，最好构建一个 AST，构建符号表和控制流图，甚至可能是数据流图，然后从中构建四元组。

然后你可以专注于构建一个好的后端来处理这些四边形。

# list - Haskell List With Guards 错误

> ID：13921676
> 
> 赞同：2
> 
> 时间：2012-12-17T20:29:57.500
> 
> 标签：list, haskell, guard, list-comprehension, take

我正在尝试在haskell中编写一个非常简单的函数来根据输入更改列表中的值，如下所示

```
update_game :: [Int] -> Int -> Int -> [Int]
update_game (x:xs) row take_amnt | row == 1 = x - take_amnt:xs
                                 | row == 2 = x : head(xs) - take_amnt : tail(xs)
                                 | row == 3 = x : head(xs) : last(xs) - take_amnt` 
```

前两种情况工作正常，但是最后一种情况给我带来了问题，我不知道为什么，我得到的错误是：

[http://i.stack.imgur.com/jpT8b.png](http://i.stack.imgur.com/jpT8b.png)

[http://i.stack.imgur.com/tlz5t.png](http://i.stack.imgur.com/tlz5t.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:34:04.467

to 的第二个参数`:`应该是一个列表，但`last(xs) - take_amnt`显然只产生一个元素。尝试

```
row == 3 = x : head(xs) : [last(xs) - take_amnt] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T20:34:13.780

```
last(xs) - take_amnt 
```

是`Int`，但 的第二个参数`(:)`必须是列表，因为`(:) :: a -> [a] -> [a]`.

如果您的列表总是三个元素长（但是您可能应该使用元组而不是列表），看起来，将其包装在 a 中`[ ]`会以正确的语义解决它，

```
update_game :: [Int] -> Int -> Int -> [Int]
update_game (x:xs) row take_amnt | row == 1 = x - take_amnt:xs
                                 | row == 2 = x : head(xs) - take_amnt : tail(xs)
                                 | row == 3 = x : head(xs) : [last(xs) - take_amnt] 
```

但是，最好进行相应的模式匹配

```
update_game [x,y,z] 1 take_amnt = [x - take_amnt, y, z]
update_game [x,y,z] 2 take_amnt = [x, y - take_amnt, z]
update_game [x,y,z] 3 take_amnt = [x, y, z - take_amnt]
update_game _       _ _         = error "Invalid input" 
```

或者在没有模式匹配的情况下使其通用

```
update_game xs index take_amnt = zipWith (-) xs (replicate (index-1) 0 ++ take_amnt : repeat 0) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T20:36:47.900

":" 中的第二个参数应该是一个列表，`last(xs) - take_amnt`只给出一个元素。

将它包装在“[]”中，这将是`[last(xs) - take_amnt]`

# algorithm - 为什么贪心算法找不到图的最大独立集？

> ID：13921679
> 
> 赞同：7
> 
> 时间：2012-12-17T20:30:18.647
> 
> 标签：algorithm, graph-theory

给定一个图 G，为什么不能保证遵循贪心算法找到G 的[最大独立集](http://en.wikipedia.org/wiki/Independent_set_%28graph_theory%29)：

```
Greedy(G):
S = {}
While G is not empty:
    Let v be a node with minimum degree in G
    S = union(S, {v})
    remove v and its neighbors from G
return S 
```

我想知道有人可以向我展示一个该算法失败的简单图表示例吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T20:55:29.820

我不确定这是最简单的例子，但这是一个失败的例子：http: [//imgur.com/QK3DC](http://imgur.com/QK3DC)

第一步，您可以选择 B、C、D 或 F，因为它们的度数均为 2。假设我们删除 B 及其邻居。这使得 F 和 D 的度数为 1，E 的度数为 2。在接下来的两个步骤中，我们删除 F 和 D 并最终得到一个 3 的集合大小，这是最大值。

相反，假设在第一步我们删除了 C 及其邻居。这给我们留下了 F、A 和 E，每个的度数大小为 2。我们接下来取其中一个，图是空的，我们的解决方案只包含 2 个节点，正如我们所见，这不是最大值.

# c# - 如何阻止尝试输入名称而不是从 AutoCompleteExtender 中的列表中选择的用户？ASP.NET

> ID：13921680
> 
> 赞同：0
> 
> 时间：2012-12-17T20:30:21.997
> 
> 标签：c#, asp.net, vb.net

这是我的情况：我在 ASP.NET 中使用 C# 进行编程，并且我使用 SQL Server 作为数据库。

在这个特定的页面上，背后的代码是在 VB 中完成的（长话短说，背后的通常代码是一个 .CS 文件，但这是我早期的页面之一）。我有用户输入姓氏的前几个字母，然后 AutoCompleteExtender 用这些起始字母显示数据库中的其余名称。不仅如此，它还显示姓名和此人的唯一 ID 号（这是出于特定原因）。名称和 ID 使用分隔符“|”分隔 （即巴巴特，亚伦 | 9920）。

如果用户没有单击其中一个名称（就像他们应该的那样），而只是输入一个名称.. 我需要在后面的代码中创建一些东西（在 VB 中），因为没有附加唯一的 ID 号，所以对用户大喊大叫到名字。基本上，我不希望他们在没有在数据库中给出的列表中选择一个的情况下输入名称。就目前而言，如果用户输入随机名称并点击提交，它会进入我不想要的数据库。我可以在不使用 VB 中的代码的情况下做到这一点吗？

这里最好的方法是什么？我不想使用直接向上的滚动条，因为此页面旨在让用户能够快速输入数据，并且从大量名称列表中进行选择不符合该标准。

我被困住了。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:34:18.057

您可以根据列表检查名称并尝试找到匹配项，而不是默认对用户大喊大叫。如果存在，则使用匹配的 ID，否则，报告未找到该用户。

这将作为验证的一部分来完成。

您还可以在此处查看其他建议：[使用 ComboBox 的自动完成功能，同时将值限制为列表中的值？](https://stackoverflow.com/questions/443569/using-the-autocomplete-feature-of-combobox-while-limiting-values-to-those-in-th)

# c# - 列表 列出 在 C# 中？

> ID：13921681
> 
> 赞同：1
> 
> 时间：2012-12-17T20:30:24.790
> 
> 标签：c#, .net, .net-4.0, interface

*我想在 C# 中做一些类似 co-variance 的事情，但我在这里没有任何继承。*

我有这个代码：

```
public interface IBirthday
{
   void Dance ();
}

public class Birthday:IBirthday
{
 public void Dance()
    {}
 }

void Main()
{
  List<Birthday> l= new List<Birthday>();
  List<IBirthday> d = l; //<--- How can I accomplish that ? 
} 
```

我怎样才能使这项工作？（除了手动迭代和构建（linq 或循环））

```
List<IBirthday> d = list of birthdays ? 
```

迭代/linq 是唯一的选择吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T20:39:53.867

在不创建全新列表的情况下，*不可能*将 a 分配给`List<Birthday>`a （它可以对您隐藏，但它*必须*发生在某个地方）。`List<IBirthday>`

 *如果您尝试做的事情是可能的，那么当有人这样做时会发生什么：

```
public class UnBirthday : IBirthday { ... }

d.Add(new UnBirthday()); 
```

嗯，它是一个`List<IBirthday>`，所以它认为它能够添加新项目。但基础列表实际上是 a `List<Birthday>`，您不能将 a 添加`UnBirthday`到该列表中。考虑到允许这个和只是在运行时崩溃之间的选择，C# 做出了决定（在我看来是正确的），首先不允许它。

使用泛型参数协方差的唯一方法（您正在尝试做的事情）是将其分配给只能读取信息而从不输入信息的东西。其中一个例子是`IEnumerable<T>`. 每一个单曲`Birthday`都是一个`IBirthday`，没有办法`IEnumerable`得到一个`IBirthday`不是一个`Birthday`，所以说：

```
List<Birthday> l= new List<Birthday>();
IEnumerable<IBirthday> d = l; 
```

工作得很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T20:32:01.893

您可以使用：

```
d = l.Cast<IBirthday>.ToList(); 
```*

# qt - Qt 的 GUI 设计器

> ID：13921682
> 
> 赞同：1
> 
> 时间：2012-12-17T20:30:35.630
> 
> 标签：qt, user-interface, python-3.x, pyside, gui-designer

我想问一下 Qt 是否有任何优秀的 GUI 设计师可以在 QtCreator 旁边使用 PySide，因为它很大。但我认为每个都可以与 PySide 一起使用，因为它不必生成 python3 代码而只需生成 .ui 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:37:33.887

是的，有[Qt Designer](https://qt-project.org/doc/qt-4.8/designer-manual.html)，它是 Qt 工具包本身的一部分。

（注意：根据您的平台，您可能需要安装一些额外的软件包才能使用它）。

# asp.net-mvc - 在 ASP.NET MVC 和 Razor 上配置发行说明

> ID：13921686
> 
> 赞同：1
> 
> 时间：2012-12-17T20:31:08.087
> 
> 标签：asp.net-mvc, razor, versioning, viewbag

我正在尝试使用 Razor 在 ASP.NET MVC 上设置我们的内部版本号和发行说明——似乎内置了一些功能，因为这已经在标题的主布局页面中：

`<a href="@ViewBag.VersionLink">Build: @ViewBag.VersionInfo</a>`

我们现在在构建 145 上，但是，它总是说`Build: 1.0.0.0`，并且链接到`App_Readme/Build1.0.0.0.txt`它只是吐出这个：

```
Hi, 
This is build 1.0.0.0
Thanks 
```

我不知道在哪里更新构建信息。我试图回溯它，但它并没有导致任何地方，而且[谷歌](https://www.google.com/search?q=mvc%20razor%20build%20implementation) [也](https://www.google.com/search?q=mvc%20razor%20configure%20release%20notes) [没有](https://www.google.com/search?q=mvc%20razor%20release%20notes%20how%20set%20up) [找到](https://www.google.com/search?q=razor%20release%20notes%20VersionLink) [太多](https://www.google.com/search?q=razor%20release%20notes%20viewbag)有用[的东西。](https://www.google.com/search?q=razor%20release%20notes%20VersionLink%20VersionInfo)

如何配置发行说明或设置构建版本控制？我什至会接受一个答案，该答案将我指向一个可以帮助我的良好在线资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:42:19.130

**简而言之：**没有黑魔法可以知道 asp.net mvc 中的应用程序构建或发布版本。因此，这些信息需要从您的控制器传递到视图。

您可以使用强类型视图模型或`TempData`将该信息传递给 ASP.NET MVC 视图。

这里有一些参考资料 - [ASP.NET MVC 3 (C#) 简介](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)。

**编辑：**如果您想使用，`ViewBag`那么这个视频教程是非常方便的考虑： - [**ViewBag：MVC 简介 - 课程**](http://mrbool.com/viewbag-introduction-to-mvc-course-asp-net-4-and-visual-studio-2010-part-36/22394)

# windows - Git说：键difftool.vs2012.cmd的值不止一个

> ID：13921687
> 
> 赞同：1
> 
> 时间：2012-12-17T20:31:09.373
> 
> 标签：windows, git

我今天运行了两次这个命令，第二次尝试使用引号，因为设置似乎没有效果：

```
git config --global difftool.vs2012.cmd "C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe" -diff "$LOCAL" "$REMOTE" 
```

现在当我运行这个时：

```
git config --global --get difftool.vs2012.cmd 
```

我明白了：

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe
error: More than one value for the key difftool.vs2012.cmd: C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe 
```

注意错误。

运行`git difftool -t vs2012`仍然不起作用，但我的问题是如何删除 Git 配置文件中某处明显重复的键值对？

在输入这个问题时，我再次运行了第一个命令，现在我似乎有 3 次了！为什么它不断添加而不是覆盖？

配置文件在哪里，所以我可以使用记事本而不是这种糟糕的命令行语法来编辑它？

我认为 Git 会像人们谈论它的方式一样好。

PS以下问题没有提到如何解决它。

[键 user.name Git 的多个值](https://stackoverflow.com/questions/4310974/more-than-one-value-for-the-key-user-name-git)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:55:03.987

要删除重复项，我必须`.gitconfig`在支持行尾的文本编辑器中编辑我的主目录（Windows 配置文件）。

Git，作为一个 Linux 的东西，Linux 人认为他们做事的方式是在上帝的视野中，他们忽略了他们正在运行的 Windows 平台的行尾，所以要小心不要只使用任何Windows 上的文本编辑器。

# jquery - 奇怪的内容在我的网页上移动

> ID：13921688
> 
> 赞同：0
> 
> 时间：2012-12-17T20:31:16.497
> 
> 标签：jquery, html, css

我开发了这个网站。

[http://www.chipotlelabs.com/apps/](http://www.chipotlelabs.com/apps/)

它工作正常，但是当我使用像这样的哈希运行时：

[http://www.chipotlelabs.com/apps/#Instaplayer](http://www.chipotlelabs.com/apps/#Instaplayer)

我的内容随机移动..有什么想法吗？

这是我的代码的一部分，我使用 move.js 库和 jQuery BBQ：后退按钮和查询库。

```
case 'Instaplayer':
$('#cuerpoinsta').waitForImages({
    waitForAll: true,
    finished: function() {
        // All images have loaded.
        $(window).unbind('mousewheel');
        $("#accion").css("display", "none");
        $("#header").animate({
            height: "120px"
        }, 1000);
        $("#fondorepeat").animate({
            height: "120px"
        }, 1000);

        $("#logo").animate({
            "margin-top": "15px",
            'margin-left': '370px',
            width: "216px",
            height: "75px"
        }, 900, function() {

            $("#sombramenu").fadeIn('fast');
            fixedtotal()

            $("#primerasfotos").css('display', 'block');

            if ($(window).height() < 670) {
                if ($(window).scrollTop() == 0) {
                    demas();
                    $("#uno").attr({
                        'src': 'images/1x.jpg',
                        'rel': 'images/1x_thumb.png'
                    })
                    $("#dos").attr({
                        'src': 'images/2x.jpg',
                        'rel': 'images/2x_thumb.png'
                    })
                    $("#tres").attr({
                        'src': 'images/3x.jpg',
                        'rel': 'images/3x_thumb.png'
                    })
                    $("#cuatro").attr({
                        'src': 'images/4x.jpg',
                        'rel': 'images/4x_thumb.png'
                    })
                    $("#cinco").attr({
                        'src': 'images/5x.jpg',
                        'rel': 'images/5x_thumb.png'
                    })
                    $('html,body').stop(true, false).animate({
                        scrollTop: $("#instacont").offset().top - 88
                    }, 1000, function() {
                        move("#sloganinsta").set('opacity', 1).scale(0.7).set('margin-left', '60px').set('margin-top', '100px').duration('0.6s').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').end()
                        move("#instafoto").set('opacity', 1).scale(0.7).set('margin-left', '0px').set('margin-top', '115px').duration('0.6s').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').end()
                        move("#appletv").set('opacity', 1).scale(0.7).set('margin-left', '460px').set('margin-top', '380px').duration('0.6s').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').end()
                        move("#labadgeinsta").set('opacity', 1).scale(0.7).set('margin-left', '480px').set('margin-top', '325px').duration('0.6s').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').end()
                        move("#fraseinsta").set('opacity', 1).scale(0.7).set('margin-left', '465px').set('margin-top', '240px').duration('0.6s').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').end()
                        move("#fraseotra").set('opacity', 1).scale(0.7).set('margin-left', '180px').set('margin-top', '290px').duration('0.6s').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').end(function() {

                            $("#primerasfotos").css('top', '42%');
                            $(".carro").css({
                                'margin-left': '420px',
                                'margin-top': '320px'
                            });
                            move(".carro").scale(0.7).end();
                            move("#slogan").set('opacity', 1).scale(0.7).set('margin-left', '60px').set('margin-top', '50px').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').duration('0.6s').end(function() {

                                move("#pluma").set('opacity', 1).scale(1).set('margin-left', '144px').set('margin-top', '442px').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').set("width", "200px").duration('0.6s').end(function() {});
                                move("#iphone").set('opacity', 1).scale(1).set('margin-left', '250px').set('margin-top', '305px').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').set('width', '100px').duration('0.6s').end(function() {});

                                move("#moleskine").set('opacity', 1).scale(1).set('margin-left', '305px').set('margin-top', '257px').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').set('width', '151px').duration('0.6s').end(function() {});
                                move("#ipad").set('opacity', 1).scale(1).set('margin-left', '399px').set('margin-top', '210px').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').set("width", "350px").duration('0.6s').end(function() {})

                                demas();

                                $("#nf").removeClass('activo');
                                $("#calcpad").removeClass('activo');
                                $("#insta").addClass('activo');

                            });

                        })

                    })
                }
                else {
                    return;
                }
            }
            else {
                if ($(window).scrollTop() == 0) {
                    demas();
                    $('html,body').stop(true, false).animate({
                        scrollTop: $("#instacont").offset().top - 150
                    }, 1000, function() {

                        move("#sloganinsta").set('opacity', 1).scale(1).set('margin-left', '25px').set('margin-top', '50px').duration('0.6s').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').end()
                        move("#instafoto").set('opacity', 1).scale(1).set('margin-left', '0px').set('margin-top', '115px').duration('0.6s').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').end()
                        move("#appletv").set('opacity', 1).scale(1).set('margin-left', '565px').set('margin-top', '426px').duration('0.6s').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').end()
                        move("#labadgeinsta").set('opacity', 1).scale(1).set('margin-left', '575px').set('margin-top', '340px').duration('0.6s').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').end()
                        move("#fraseinsta").set('opacity', 1).scale(1).set('margin-left', '575px').set('margin-top', '240px').duration('0.6s').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').end()
                        move("#fraseotra").set('opacity', 1).scale(1).set('margin-left', '15px').set('margin-top', '125px').duration('0.6s').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').end(function() {

                            move("#slogan").set('opacity', 1).scale(1).set('margin-left', '60px').set('margin-top', '46px').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').duration('0.6s').end(function() {

                                move("#pluma").set('opacity', 1).scale(1).set('margin-left', '67px').set('margin-top', '499px').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').duration('0.6s').end(function() {
                                    move("#iphone").set('opacity', 1).scale(1).set('margin-left', '234px').set('margin-top', '320px').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').duration('0.6s').end(function() {

                                        move("#moleskine").set('opacity', 1).scale(1).set('margin-left', '305px').set('margin-top', '267px').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').duration('0.6s').end(function() {
                                            move("#ipad").set('opacity', 1).scale(1).set('margin-left', '445px').set('margin-top', '220px').ease('cubic-bezier(0.680, -0.550, 0.265, 1.550)').duration('0.6s').end(function() {

                                                $("#nf").removeClass('activo');
                                                $("#insta").addClass('activo');
                                                $("#calcpad").removeClass('activo');
                                                e.stopPropagation();

                                            });
                                        });
                                    });
                                });
                            });

                        })

                    })
                }
                else {
                    return;
                }
            }
        })
    }
})

break; 
```

# android - 从 asynctask 访问首选项

> ID：13921691
> 
> 赞同：0
> 
> 时间：2012-12-17T20:31:36.943
> 
> 标签：android, variables, scope, android-asynctask, preferences

我正在尝试从异步任务中访问已保存的首选项，但我总是不断收到错误“无法解决首选项”。有任何想法吗？这是代码的一部分：

```
 public class Login extends SherlockActivity {
      SharedPreferences preferences;
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        preferences = PreferenceManager.getDefaultSharedPreferences(this);

        new LongOperationLogin(this).execute();
    }
}

class LongOperationLogin extends AsyncTask<String, Void, String> {
    private Login longOperationContext = null;    

    public LongOperationLogin(Login context) {
        longOperationContext = context;
    }

    @Override
    protected String doInBackground(String... params) {
    //THIS IS WHERE I NEED THE VALUE
        String username = this.preferences.getString("username", "n/a");
        try {
        //JSON fetching
            }
        } catch (MalformedURLException e) {
            e.printStackTrace();
            Log.v("Error", "URL exc");
        } catch (IOException e) {
            e.printStackTrace();
            Log.v("ERROR", "IOEXECPTOIn");
        } catch (JSONException e) {
            e.printStackTrace();
            Log.v("Error", "JsonException");
        }
        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        }
    }

    protected void onPreExecute() {
    }

 protected void onProgressUpdate(Void... values) {
    }
} 
```

提前致谢！罗伯特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:49:46.023

您应该使用 访问您的偏好变量`Login.this.preferences`。还要确保您的 AsyncTask 是一个内部类（包含在 中`Login`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:41:23.027

尝试这个

```
 String username = longOperationContext.preferences.getString("username", "n/a"); 
```

并公开偏好字段

# jbpm - LocalTask service - 标记完成后流程未继续

> ID：13921694
> 
> 赞同：2
> 
> 时间：2012-12-17T20:32:02.330
> 
> 标签：jbpm

我正在使用 JBPM 5.4.0 并通过 spring 容器以及本地任务服务创建注入。我在会话中注册了 LocalHTItemHandler，但即使在将我的任务标记为完成（没有问题发生）之后，流程也不会继续。这里可能出了什么问题？

即使使用 LocalTask​​Service，我是否也需要启动任务服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:03:27.243

您是否在任务处理程序上调用了 connect()？处理程序仅以惰性方式将会话注册为侦听器（这意味着当它需要为会话创建第一个任务时），但如果您先完成任务，引擎可能尚未侦听。在处理程序上调用 connect() 将立即注册侦听器。

克里斯

# jquery - 使用 jQuery 验证插件验证多个选择框

> ID：13921701
> 
> 赞同：3
> 
> 时间：2012-12-17T20:32:21.890
> 
> 标签：jquery, jquery-validate

所以我在使用 jQuery Validation Plugin 时遇到了一些问题。我有 3 个彼此相邻的选择标签，因此用户可以输入他们的生日。如何为 3 个选择标签提供 1 条验证消息？我听说也许可以做一个自定义规则？

这是 HTML，我已经包含了一个 jsfiddle。

```
<form id="commentForm" action="" method="post">
<p>
    <label for="month">Birthday:</label>
    <select name="month" class="required select">
        <option value="">Month</option>
        <option>Jan</option>
        <option>Feb</option>
    </select>
    <select name="day" class="required select">
        <option value="">Day</option>
        <option>01</option>
        <option>02</option>
    </select>
    <select name="year" class="required select">
        <option value="">Year</option>
        <option>1990</option>
        <option>1991</option>
    </select>
</p>
<input type="submit" value="Sign Up" class="button">
</form>​ 
```

[这](http://jsfiddle.net/atLV4/)是当前正在发生的事情的一个例子。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T20:40:44.017

您可以使用该`group`选项将字段组合在一起，以便为该组显示一条错误消息。然后，您可以使用以下`errorPlacement`选项将一条错误消息放置在您想要的位置：

```
$("#commentForm").validate({
    groups: {
        birthday: "month day year"
    },
    errorPlacement: function(error, element) {
        var name = element.prop("name");
        if (name === "month" || name === "day" || name === "year") {
            error.insertAfter("select[name='year']");
        } else {
            error.insertAfter(element);
        }
    }
}); 
```

**示例：http:** [//jsfiddle.net/atLV4/3/](http://jsfiddle.net/atLV4/3/)

# qt - 如何使用 Qt 实现类似于 Visual Studio 解决方案资源管理器的树视图？

> ID：13921704
> 
> 赞同：0
> 
> 时间：2012-12-17T20:32:30.780
> 
> 标签：qt, model-view, solution-explorer

我想用 Qt 实现一个类似于 Visual Studio 解决方案资源管理器的树视图。树用于表示称为“项目”的外部数据。我想使用 Qt 模型/视图架构。

(1) QTreeView 为视图，模型派生自 QAbstractItemModel ，其中包含一个指向项目对象的指针。(2) 目录下的项目按名称排序。在目录下添加项目时，它会自动放在正确的位置。(3) 双击树中的项目时，会弹出一个对话框进行编辑。

实现（2）和（3）的任何好方法。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:30:17.513

广告 2) 看看这里可能会有所帮助：[http](http://doc.qt.digia.com/qt/qsortfilterproxymodel.html) ://doc.qt.digia.com/qt/qsortfilterproxymodel.html 。它包含实现更复杂的项目排序和过滤的示例。

广告 3) 覆盖 QTreeView::mouseDoubleClickEvent()。

顺便说一句，作为替代方案，您可以使用 QTreeWidget 和 QTreeWidgetItem，在这种情况下，您可能希望遍历树并将子项直接插入到您想要的位置。

# python - 检查python中的数字是否在一定范围内（带循环）？

> ID：13921707
> 
> 赞同：0
> 
> 时间：2012-12-17T20:32:48.600
> 
> 标签：python

这是我的代码：

```
total = int(input("How many students are there "))
print("Please enter their scores, between 1 - 100")

myList = []
for i in range (total):
    n = int(input("Enter a test score >> "))

    myList.append(n) 
```

基本上我正在编写一个程序来计算测试分数，但首先用户必须输入介于 0 - 100 之间的分数。

如果用户输入的测试分数超出该范围，我希望程序告诉用户重写该数字。我不希望程序以错误结束。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T20:34:47.740

```
while True:
   n = int(input("enter a number between 0 and 100: "))
   if 0 <= n <= 100:
      break
   print('try again') 
```

就像您问题中的代码一样，这将适用于 Python 2.x 和 3.x。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T20:35:47.757

首先，你必须知道如何检查一个值是否在一个范围内。这很容易：

```
if n in range(0, 101): 
```

几乎是英文的直接翻译。（这只是 Python 3.0 或更高版本的一个很好的解决方案，但您显然使用的是 Python 3。）

接下来，如果你想让他们继续尝试直到他们输入有效的内容，只需循环执行：

```
for i in range(total):
    while True:
        n = int(input("Enter a test score >> "))
        if n in range(0, 101):
            break
    myList.append(n) 
```

同样，几乎是英语的直接翻译。

但是如果你把它分解成一个单独的函数可能会更清楚：

```
def getTestScore():
    while True:
        n = int(input("Enter a test score >> "))
        if n in range(0, 101):
            return n

for i in range(total):
    n = getTestScore()
    myList.append(n) 
```

正如 fp 指出的那样，如果他们键入不是整数的东西，例如“A+”，程序仍然会“以错误结束”。处理有点棘手。如果您给它一个不是整数的有效表示形式的字符串，该`int`函数将引发 a 。`ValueError`所以：

```
def getTestScore():
    while True:
        try:
            n = int(input("Enter a test score >> "))
        except ValueError:
            pass
        else:
            if n in range(0, 101):
                return n 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:37:46.323

您可以使用辅助函数，例如：

```
def input_number(min, max):
    while True:
        n = input("Please enter a number between {} and {}:".format(min, max))
        n = int(n)
        if (min <= n <= max):
            return n
        else:
            print("Bzzt! Wrong.") 
```

# vb.net - vb2012 管理员权限

> ID：13921708
> 
> 赞同：0
> 
> 时间：2012-12-17T20:32:50.967
> 
> 标签：vb.net

我编写了一种更简洁的程序，但在权限方面出现了巨大错误（我认为）错误消息是这样打印出来的。

mscorlib.dll 中出现“System.UnauthorizedAccessException”类型的未处理异常附加信息：拒绝访问路径“C:\Windows\CSC\v2.0.6”。

它说代码的错误部分是这一行

```
For Each fi In DirectroyInfos.GetFiles(filter) 
```

但这里是代码的填充块。

```
For Each fi In DirectroyInfos.GetFiles(filter)
            Try
                file_count = file_count + 1
                file_size = CULng(file_size + fi.Length)
                FilesToDelete.Add(fi.FullName)
            Catch ex As UnauthorizedAccessException
                'There's really no pretty way to handle this exception
            Catch ex As FileNotFoundException
                'There's really no pretty way to handle this exception
            End Try 
```

我认为这是某种权限问题我有 Windows 7 并且注意到有很多运行有管理问题.. 我认为它试图删除或访问它没有权限获取的文件。

有没有什么办法解决这一问题？我在编码中遗漏了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:39:57.277

正如您在问题中所说，您没有该文件的写访问权限。

跳过您无权访问的文件，或以管理员身份运行应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:59:18.363

win32 api 似乎有一个限制，如果您无权访问其中一个文件，它将跳过文件夹中的所有文件。

[从Microsoft Connect](https://connect.microsoft.com/VisualStudio/feedback/details/512171/directory-enumeratedirectory-etc-unusable-due-to-frequent-unauthorizedaccessexceptions-even-runas-administrator)查看此解决方案：

[如何：遍历目录树（C# 编程指南）](http://msdn.microsoft.com/en-us/library/bb513869.aspx)

# python - Urrlib3/Requests：Google App Engine 上的 HTTPS 问题

> ID：13921711
> 
> 赞同：5
> 
> 时间：2012-12-17T20:33:09.527
> 
> 标签：python, google-app-engine, ssl, python-requests

您好我正在尝试使用 App Engine 上的请求建立 HTTPS 连接，但出现以下错误

```
NameError: name 'CERT_NONE' is not defined 
```

似乎 urrlib3 无法导入 ssl。有任何想法吗？

更新：问题是 App Engine 上的 ssl 缺少以下内容

```
from ssl import wrap_socket, CERT_NONE, SSLError 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T01:44:43.817

**t-8ch**已修复此问题，您可以在 urllib3 github 存储库的此调用[https://github.com/shazow/urllib3/pull/130中看到。](https://github.com/shazow/urllib3/pull/130)

他们还没有合并到 master 分支，但是你可以在这里从**t-8ch**的固定分支获取可用的包：[https ://github.com/t-8ch/urllib3/tree/unify_ssl_api](https://github.com/t-8ch/urllib3/tree/unify_ssl_api)

我已经测试过了，这运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:20:40.250

maxcnunes 提到的修复似乎已合并到 requests-1.2.0 中。看起来它至少在我的 dev_appserver 上工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-18T09:25:04.403

你用的是最新的 urllib3 吗？他们最近增加了对 GAE 的支持。我似乎记得您需要使用 urlfetch API，而不是直接使用 SSL。

# jquery - $.mobile.ajaxEnabled = 假；

> ID：13921714
> 
> 赞同：1
> 
> 时间：2012-12-17T20:33:14.393
> 
> 标签：jquery, ajax, url, jquery-mobile, select

我已经为此苦苦挣扎了好几天了。我正在尝试让选择菜单用作导航菜单。但是当我点击按钮时，什么也没有发生。感谢@Enrico，我认为我的 changePage 代码是正确的。我还发现需要在链接上关闭 Ajax。我试图禁用 Ajax 有点过火了。这是我的代码：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile.structure-1.2.0.min.css" />
<base href="http://kickfitness.com/" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script language="text/javascript">
/* VERY IMPORTANT this is before loading jquery.mobile JS */
$( document ).on( "mobileinit", function() {
    // Make your jQuery Mobile framework configuration changes here!
    $.mobile.allowCrossDomainPages = true;
            $.mobile.ajaxEnabled = false;
            });
 $(document).bind("mobileinit", function(){
        $.mobile.ajaxEnabled = false;
        });
</script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.js"></script>

<script language="text/javascript">
$(function() {
    $("#select-choice-1").change(function() {
        $.mobile.ajaxEnabled = false;
        $.mobile.changePage($(this).val());
    });        
});
</script> 
```

这是我的菜单：

```
<div id="MobileWrapper" data-role="fieldcontain">
<select name="select-choice-1" id="select-choice-1" data-theme="a" data-form="ui-btn-up-a"data-native-menu="false" data-mini="false"><!-- data-native-menu="false" -->
<option data-placeholder="true">Navigation</option><!-- data=placeholder makes this not show up in the pop up-->
<option value="http://kickfitness.com/index.php">Home</option>
<option value="/services/index.php">Services</option>
<option value="trainers/index.php">Trainers</option>
<option value="/locations/index.php">Locations</option>
<option value="/calendar/index.php">Calendar</option>
<option value="/contactus/index.php">Contact Us</option>
</select>
</div><!--END MobileWrapper DIV--> 
```

这是该页面的 URL。它是使用响应式 CSS 完成的，因此您可以通过将浏览器窗口设置得非常小来查看移动导航。 [http://kickfitness.com/services/index2.php](http://kickfitness.com/services/index2.php)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T04:29:00.653

您不需要所有 $.mobile.ajaxEnabled 设置，只需调用 changePage 选项“reloadPage”等于 true：

```
$(function() {
    $("#select-choice-1").change(function() {
        $.mobile.changePage($(this).val(), { reloadPage: true } );
    });        
}); 
```

# android - Mac OS 上的 Phonegap eclipse 环境

> ID：13921716
> 
> 赞同：0
> 
> 时间：2012-12-17T20:33:20.637
> 
> 标签：android, ios, eclipse, cordova

[是否有使用 Eclipse 和PhoneGap](http://phonegap.com/)在 Mac OSx 上创建 iPhone 应用程序的教程？

我已经阅读了很多教程，但它们都是使用没有 Eclipse 的 Xcode。我想使用相同的代码库并从同一个编辑器为 Android 和 iPhone 构建并在不同的设备上进行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:37:38.207

一般来说，如果没有任何疯狂的工作，这将很难实现。代码的基本应用程序（PhoneGap）部分是 iPhone 和 Android、这个目标 c 和 java 所独有的。

您可能需要使用单独的 IDE 环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:39:22.653

你可以找到一些eclipse的插件，比如：[KDevelop](http://www.kdevelop.org/)

所以现在你可以为 iPhone（目标 c）和 Android（java）开发

我读过它，但我没有任何经验。

# opencv - 捆绑调整功能

> ID：13921720
> 
> 赞同：9
> 
> 时间：2012-12-17T20:33:44.580
> 
> 标签：opencv, camera, bundle, adjustment

如果我有一个已知的相机姿势（旋转 + 位置）和内在函数（失真系数和相机矩阵），并且 2 个相机从稍微不同的角度指向同一个场景。

有没有办法使用捆绑调整来优化相机姿势？最好在一些已经存在的 API 或函数中使用不需要太多的数学知识。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-07T21:16:44.397

您应该使用[Changchang Wu 的 PBA（多核捆绑调整）](http://grail.cs.washington.edu/projects/mcba/)。它确实是一个不错的库，它是用 C++ 编写的。此外，它还具有多核计算甚至 GPU 计算，加速约 20 倍。

它结构清晰，易于使用。

因此，您应该使用[PBA ，而不是使用 Lourakis 的](http://grail.cs.washington.edu/projects/mcba/)[SBA](http://www.ics.forth.gr/~lourakis/sba/)或[Christopher Zach](http://www.inf.ethz.ch/personal/chzach/opensource.html)的 SSBA 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T10:09:04.547

[您可能想在http://www.inf.ethz.ch/personal/chzach/opensource.html](http://web.archive.org/web/20140103233938/http://www.inf.ethz.ch/personal/chzach/opensource.html)上查看 SSBA，但它仍然需要一些数学知识才能正确使用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T22:44:20.653

您可以在 OpenCV 中尝试实现。它在 contrib 模块中。但我还不能让它正常工作.. :/ [关于它的文章](http://ardrone-ailab-u-tokyo.blogspot.de/2012/11/opencv-levmarqsparse-class-for-sparse_13.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-18T23:31:09.010

试试 Ceres 求解器。[此处](http://ceres-solver.org/nnls_tutorial.html#bundle-adjustment)提供了一个示例实现。同样，您需要了解捆绑调整的数学原理。但这是不可避免的。

# sql - SQL 合并中发生的无意交叉连接

> ID：13921721
> 
> 赞同：2
> 
> 时间：2012-12-17T20:33:47.440
> 
> 标签：sql, tsql, join, merge

我有两个表，我想加入以下列：

> 表：#IndexDecomposition；组分。
> 
> 行：标识符；CUSIP；伊辛；世多乐。

这是一个更大的`MERGE`语句的一部分，现在我认为交叉连接正在发生在`INSERT`语句上：

```
MERGE indexdecomp.ConstituentWeighting targ
USING (#IndexConstituents src
       INNER JOIN indexDecomp.Constituent c WITH (NOLOCK) on 
        ((c.Identifier = src.Identifier) OR (c.Identifier IS NULL AND src.Identifier IS NULL))
           AND ((c.CUSIP = src.CUSIP) OR (c.CUSIP IS NULL AND src.CUSIP IS NULL))
           AND ((c.ISIN = src.ISIN) OR (c.ISIN IS NULL AND src.ISIN IS NULL))
           AND ((c.SEDOL = src.SEDOL) OR (c.SEDOL IS NULL AND src.SEDOL IS NULL)))
ON (    targ.ConstituentId = c.Id 
    AND targ.AsOfDate = src.Date
    AND ((targ.Weighting = src.Weighting) OR (targ.Weighting IS NULL AND src.Weighting IS NULL))
    AND ((targ.TotalSharesHeld = src.TotalSharesHeld) OR (targ.TotalSharesHeld IS NULL AND src.TotalSharesHeld IS NULL))
    AND ((targ.SharesOutstanding = src.SharesOutstanding) OR (targ.SharesOutstanding IS NULL AND src.SharesOutstanding IS NULL))
    AND ((targ.NotionalValue = src.NotionalValue) OR (targ.NotionalValue IS NULL AND src.NotionalValue IS NULL))
    AND ((targ.MarketValue = src.MarketValue) OR (targ.MarketValue IS NULL AND src.MarketValue IS NULL))
    AND ((targ.MarketCap = src.MarketCap) OR (targ.MarketCap IS NULL AND src.MarketCap IS NULL))
    AND ((targ.LastTrade = src.LastTrade) OR (targ.LastTrade IS NULL AND src.LastTrade IS NULL))
    AND ((targ.Earnings = src.Earnings) OR (targ.Earnings IS NULL AND src.Earnings IS NULL))
    AND ((targ.PeRatio = src.PeRatio) OR (targ.PeRatio IS NULL AND src.PeRatio IS NULL))
    AND ((targ.Face = src.Face) OR (targ.Face IS NULL AND src.Face IS NULL)))
WHEN NOT MATCHED BY TARGET THEN
    INSERT (
         ConstituentID
        ,AsOfDate
        ,Weighting
        ,TotalSharesHeld
        ,SharesOutstanding
        ,NotionalValue
        ,MarketValue
        ,MarketCap
        ,LastTrade
        ,Earnings
        ,PeRatio
        ,Face
        ,ModifiedBy
        ,ModifiedDate
        ,CreatedBy
        ,CreatedDate
    )
    VALUES (
         c.Id
        ,src.Date
        ,src.Weighting
        ,src.TotalSharesHeld
        ,src.SharesOutstanding
        ,src.NotionalValue
        ,src.MarketValue
        ,src.MarketCap
        ,src.LastTrade
        ,src.Earnings
        ,src.PeRatio
        ,src.Face
        ,'user'
        ,getdate()
        ,'user'
        ,getdate()
    )
; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:38:18.590

我认为您最近尝试的唯一问题是它没有清除所有空值的组合（即所有四个 ID 都为空的误报）。您可以通过要求四个标识符中的至少一个必须为非空来修复它，如下所示：

```
SELECT *
FROM xTradeCapture.staging.IndexDecomposition src
INNER JOIN indexDecomp.Constituent c WITH (NOLOCK) on 
(((c.Identifier = src.Identifier) OR (c.Identifier IS NULL AND src.Identifier IS NULL))
AND ((c.CUSIP = src.CUSIP) OR (c.CUSIP IS NULL AND src.CUSIP IS NULL))
AND ((c.ISIN = src.ISIN) OR (c.ISIN IS NULL AND src.ISIN IS NULL))
AND ((c.SEDOL = src.SEDOL) OR (c.SEDOL IS NULL AND src.SEDOL IS NULL))
AND (c.Identifier IS NOT NULL OR c.CUSIP IS NOT NULL OR c.ISIN IS NOT NULL OR c.SEDOL IS NOT NULL)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:36:16.523

你的第二个代码片段是正确的。优化器识别此模式并将其转换为等连接。所以你没有得到笛卡尔积。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:51:08.323

`ISNULL`如果您知道自己不在表中的虚拟值，您也可以使用。下面的示例假定 Identifier 和 CUSIP 为整数，ISIN 和 SEDOL 为 varchar...

```
SELECT *
FROM xTradeCapture.staging.IndexDecomposition src
INNER JOIN indexDecomp.Constituent c WITH (NOLOCK) on 
    ISNULL(c.Identifier,-1) = ISNULL(src.Identifier,-1)
AND ISNULL(c.CUSIP,-1) = ISNULL(src.CUSIP,-1)
AND ISNULL(c.ISIN,'ABC') = ISNULL(src.ISIN,'ABC')
AND ISNULL(c.SEDOL,'ABC') = ISNULL(src.SEDOL,'ABC') 
```

# google-provisioning-api - 尝试通过 API 获取 Google Apps 单点登录签名密钥

> ID：13921724
> 
> 赞同：0
> 
> 时间：2012-12-17T20:34:00.043
> 
> 标签：google-provisioning-api, google-reseller-api, google-admin-settings-api

在尝试检索单点登录密钥以首次更新（创建）它时，我从 Google Apps 管理员设置 API 收到一个有趣的错误。我们希望仅通过 API 执行此操作，但似乎 API 假设签名密钥已在客户端创建。以下 GET 请求失败并出现以下错误：

```
GET https://apps-apis.google.com/a/feeds/domain/2.0/ruby-alphaz.co/sso/signingkey 
```

响应错误如下：

```
SimpleXMLElement Object
(
    [error] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [errorCode] => 1408
                    [invalidInput] => 
                    [reason] => InvalidSsoSigningKey
                )
        )
) 
```

我可以毫无问题地更新单点登录设置，但签名密钥端点会导致问题。需要明确的是，域当前不存在签名密钥，但域指令是尝试通过端点检索 XML 以确保它具有正确的 id 参数集，以便我可以跟进随后的 PUT 响应以创建/更新签名密钥。

我在这里关注的文档：

[https://developers.google.com/google-apps/admin-settings/#retrieving_the_single_sign-on_signing_key](https://developers.google.com/google-apps/admin-settings/#retrieving_the_single_sign-on_signing_key)

我知道我的 Auth 令牌标头设置正确，因为它们适用于其他端点。

有任何想法吗？

## 更新（和解决方案）

在以下答案的评论部分与 Jay 交谈后，发现问题的解决方案如下：

1.  如果您执行 GET 请求`https://apps-apis.google.com/a/feeds/domain/2.0/{domainName}/sso/signingkey`并收到带有`InvalidSsoSigningKey`错误的 XML 响应，请首先确保您已通过`https://apps-apis.google.com/a/feeds/domain/2.0/{domainName}/sso/general`端点启用 SSO。
2.  如果您确定已启用 SSO 并且仍然收到`InvalidSsoSigningKey`错误消息，则可能是因为您尚未上传签名密钥。虽然它没有很容易记录，但您可以`https://apps-apis.google.com/a/feeds/domain/2.0/{domainName}/sso/signingkey`使用以下格式执行 PUT 请求来创建您的签名密钥：

    ```
    <?xml version="1.0" encoding="UTF-8"?> 
    <atom:entry xmlns:atom="http://www.w3.org/2005/Atom" xmlns:apps="http://schemas.google.com/apps/2006"> 
        <apps:property name="signingKey" value="[YOUR_BASE64_ENCODED_CERTIFICATE_VALUE]" /> 
    </atom:entry> 
    ```

3.  从现在开始，您应该能够成功地发出 GET 请求`https://apps-apis.google.com/a/feeds/domain/2.0/{domainName}/sso/signingkey`并收到有效的响应。未来的更新将需要利用此 GET 响应，因为它包含正确的`id`参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:08:54.840

我在 2009 年就这个问题提交了一个问题，请随时为它加注星标：

[http://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=1527](http://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=1527)

您需要启用 SSO 才能检索密钥。

是的，这意味着您无法在启用 SSO 之前正确检查密钥匹配。

在执行 PUT 之前，您不需要执行 GET。只需手动创建 XML。看看 GAM 是如何做到的：

[http://code.google.com/p/google-apps-manager/source/browse/trunk/gdata/apps/adminsettings/service.py#363](http://code.google.com/p/google-apps-manager/source/browse/trunk/gdata/apps/adminsettings/service.py#363)

# objective-c - 在 Interface Builder 中设置接口并在 for 循环中重用它

> ID：13921726
> 
> 赞同：1
> 
> 时间：2012-12-17T20:34:02.293
> 
> 标签：objective-c, ios, xcode, interface-builder

好的，我对 iOS 编程有点陌生，我不太确定如何表达这个问题，但希望有人能指出我正确的方向。我正在尝试创建类似新闻应用程序的东西。界面将完全是大图像块，一些更大，一些更小，每个图像都有一个标题。现在在界面生成器中创建几个带有图像和标题的图块，然后在应用程序中为我的 JSON 数组中的每个类别循环它们几次是明智的。

例如，我将有 3 个“体育”图块，然后 3 个“政治”图块等。

这是可接受的做事方式还是我应该以编程方式做所有事情？

感谢您的帮助，希望这个问题有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:39:38.030

不确定我理解正确。但是您可以在一些 NIB 文件（例如，sports.xib、political.xib）中创建不同的视图，并根据您的需要用这个或那个 nib 实例化一个视图控制器：

```
MyViewController *vc = [[MyViewController alloc] initWithNibName: @"sports" bundle:nil]; 
```

或者

```
MyViewController *vc = [[MyViewController alloc] initWithNibName: @"politics" bundel: nil]; 
```

# java - 获得适当的星期和月份

> ID：13921734
> 
> 赞同：2
> 
> 时间：2012-12-17T20:34:22.637
> 
> 标签：java, calendar, gregorian-calendar

我有一个班级作业：

> 该类应该有一个方法来计算两个日期之间的天数，返回星期几并给出给定日期的星座。

这是我写的代码：

```
import java.util.GregorianCalendar;

public class Data {
    private GregorianCalendar date;

    public Data(int year, int month, int day) {
        date = new GregorianCalendar(year, month + 1, day);
    }

    public int differenceInDaysFrom(int year, int month, int day) {
        GregorianCalendar tempDate = new GregorianCalendar(year, month, day);
        int daysBetween = (int)(tempDate.getTimeInMillis()-date.getTimeInMillis())/(1000 * 60 * 60 * 24);
        return Math.abs(daysBetween);
    }

    public String dayOfTheWeek() {
        String[] stringDays = new String[]{ "Monday",
                                            "Tuesday",
                                            "Wednesday",
                                            "Thursday",
                                            "Friday",
                                            "Saturday",
                                            "Sunday" };
        return stringDays[date.get(GregorianCalendar.DAY_OF_WEEK) - 1];
    }

    public void zodiacSign() {
        int day = date.get(GregorianCalendar.DATE);
        int month = date.get(GregorianCalendar.MONTH);

        System.out.println(day + " " + month);
    }
} 
```

1.  当我`date`使用 YYY\MM\DD 进行初始化时，在检查 dayOfTheWeek 的近期日期时一切正常，但是当我输入我的出生日期 (1991\11\14) 时，它会在星期三返回，但我是在星期四出生的。

2.  当我试图获取 day 和 mont 来检查星座时，它完全吓坏了，当我输入 11 时返回 0（对于月份，days 效果很好）。

3.  更重要的是......当我开始寻找`+1`月份时甚至`differenceInDaysFrom`停止正常工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:51:45.970

关于你生日（周三或周四）的问题：

首先，您必须将第 10 个月作为 11 月自`0=January`. 其他答案已经发现了这一点。

那么你需要将你的 String 数组声明为：

```
 new String[] { "Sunday", "Monday", "Tuesday", 
"Wednesday", "Thursday", "Friday", "Saturday" }; 
```

因为，`DAY_OF_WEEK, 1=Sunday, 2=MONDAY,`请检查 Calendar 类的 javaDoc。然后你应该得到“星期四”

为十二生肖法。您输入了 11，因此您收到的日期对象月份参数为 11+1=12。12 不是有效月份（0-11 是有效的，如上所述，Jan=0）因此你吓坏了。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:43:46.467

看一下这个：

```
Days d = Days.daysBetween(startDate, endDate);
int days = d.getDays();
http://joda-time.sourceforge.net/faq.html#datediff 
```

您的问题之一是您每月 +1，而月份从 0 到 11（我知道很愚蠢）所以 11+1 是 12，这是无效的。（我认为您可以设置严格性）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T20:48:20.787

而不是`month + 1`你需要`month-1`，也换行 11 -> 0。

```
date = new GregorianCalendar(year, (month == 0) ? 11 : month - 1, day); 
```

# jquery - 鼠标悬停和鼠标移出用jquery隐藏dom元素

> ID：13921737
> 
> 赞同：0
> 
> 时间：2012-12-17T20:34:25.927
> 
> 标签：jquery, css, hover, mouseevent

当你悬停它时，我想隐藏一个 dom 元素。我想显示它下面的 div。问题是当第一个元素隐藏时，jquery 不再看到悬停并将悬停 div 带回来。所以 div 切换得非常快。

当您的鼠标超出 div 区域时，我想要“前面”。

```
<div  class="blockLong front" ></div>
<div  class="blockLong"></div> 
```

div 以绝对位置放置在eatchother 上，并且大小相同

这是jQuery：

```
$('.front').hover( function()
{
    $(this).hide();
});

$('.front').mouseout( function()
{
    $(this).show();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:37:43.667

为了一致性，您应该`hover`专门使用：

```
$('.front').hover(function(){
    $(this).fadeTo(500,0);
}, function() {
    $(this).fadeTo(500,1);
}); 
```

这有效地做的是为每个`mouseenter`和添加一个处理程序`mouseleave`。

如果您不希望 div 在`mouseleave`事件触发时返回，您可以试试这个：

```
$('.front').mouseenter(function(){
    $(this).fadeOut(500);
});

$('blockLong:not(.front)').mouseleave(function(){
    $('.front').fadeIn(500);
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:47:56.790

尝试这个：

```
<div  class="blockLong front"></div>
<div  class="blockLong back"></div> 
```

JS

```
$('.front').hover( function()
{
    $(this).hide();
});

$('.back').mouseout( function()
{
    $(".blockLong.front").show();
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-17T20:52:31.010

这就是我所做的：

```
<div  class="blockLong back"></div>
<div  class="blockLong front"></div>

$('.front').hover( function()
{
    $(this).hide();
});

$('.back').mouseout( function()
{
    $(this).next().show();
}); 
```

# java - OSX 和 Windows 的字节数据类型是否存在差异

> ID：13921742
> 
> 赞同：1
> 
> 时间：2012-12-17T20:34:36.817
> 
> 标签：java, arrays

我正在使用声明为的字节数组数据类型：

```
byte[] sendbuf= new byte[64]; 
```

后来，我打电话：

```
dev.write(sendbuf);  // see class code below for this 
```

谁能告诉我为什么在 OSX 10.7.5 下一切正常，但在 Windows XP 下我得到一个异常“参数不正确”？两个操作系统之间的数据类型有区别吗？

HIDDevice.class 是：

```
public native int write(byte[] data) throws IOException;

/**
 * Read an Input Report to a HID device.
 *
 * @param buf a buffer to put the read data into
 * @return the actual number of bytes read 
 * @throws IOException if read error occured
 */ 
```

这是错误：

```
java.io.IOException: The parameter is incorrect.
    at com.codeminders.hidapi.HIDDevice.write(Native Method)
    at HIDTesting2.hidData.run(hidData.java:96) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-13T02:36:44.910

我应该更好地阅读 hidapi API 的说明。“data[] 的第一个字节必须包含报告 ID。对于仅支持单个报告的设备，必须将其设置为 0x0。” 在我的辩护中，它在我的 OSX 10.7.5 环境中运行得很好。我的 Arduino 设备收到了很好的消息，我能够从第一个元素 byte[0] 处理 byte[] 数组。但是，当我在 XP 计算机上运行 .jar 时，HID 接口正在寻找第一个 0x0 字节。我需要做的就是更改代码以将其作为缓冲区的第一个字节传递，Windows 和 Mac 都可以正常看到写入请求。

# javascript - 谷歌地图 JSP

> ID：13921744
> 
> 赞同：1
> 
> 时间：2012-12-17T20:34:42.047
> 
> 标签：javascript, jsp, google-maps-api-3, google-maps-markers

我正在使用 Google 地图 API 和 JSP 创建一个应用程序。我遇到了问题，因为当我将事件添加到标记并使用查询字符串传递值时，我不断得到相同的值，而不是标记的实际值。有人可以让我知道我做错了什么吗？

```
 <%

            Query query2 = em.createNamedQuery("Factories.findAll");
            List<Factories> factories = query2.getResultList();

            for (int i = 0; i < factories.size(); i++) {
                Float longitude = factories.get(i).getLongitude();
                Float latitude = factories.get(i).getLatitude();
                String name = factories.get(i).getName();
                Integer id = factories.get(i).getFactoryID();
        %>

                var marker = new google.maps.Marker({
                    position: new google.maps.LatLng(<%=latitude%>, <%=longitude%>),
                    raiseOnDrag:true,
                    title: "<%=name%>",
                    clickable:true,
                    zIndex: <%=id%>,
                    map: map
                });
                google.maps.event.addListener(marker, 'click', function() { 
                    window.location = "viewFireworksFactory.jsp?id=" + marker.getZIndex();
                });

        <% }%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:49:02.177

查看生成的 JavaScript。它将如下所示：

```
var marker = new google.maps.Marker({
                position: new google.maps.LatLng(245, 654),
                raiseOnDrag:true,
                title: "A",
                clickable:true,
                zIndex: 1,
                map: map
            });
google.maps.event.addListener(marker, 'click', function() { 
    window.location = "viewFireworksFactory.jsp?id=" + marker.getZIndex();
});

var marker = new google.maps.Marker({
                position: new google.maps.LatLng(654, 987),
                raiseOnDrag:true,
                title: "B",
                clickable:true,
                zIndex: 2,
                map: map
            });
google.maps.event.addListener(marker, 'click', function() { 
    window.location = "viewFireworksFactory.jsp?id=" + marker.getZIndex();
});

var marker = new google.maps.Marker({
                position: new google.maps.LatLng(985, 2315),
                raiseOnDrag:true,
                title: "C",
                clickable:true,
                zIndex: 3,
                map: map
            });
google.maps.event.addListener(marker, 'click', function() { 
    window.location = "viewFireworksFactory.jsp?id=" + marker.getZIndex();
});

var marker = new google.maps.Marker({
                position: new google.maps.LatLng(6855, 464),
                raiseOnDrag:true,
                title: "D",
                clickable:true,
                zIndex: 4,
                map: map
            });
google.maps.event.addListener(marker, 'click', function() { 
    window.location = "viewFireworksFactory.jsp?id=" + marker.getZIndex();
}); 
```

因此，很明显，它将重新定义同一个标记变量 N 次，覆盖之前对同一个变量的定义。因此，所有侦听器都将在标记中获得 Z 索引，该标记由分配给变量的最后一个对象引用。

# unix - 如何允许用户使用密码通过 SFTP 而不是私钥登录？

> ID：13921751
> 
> 赞同：0
> 
> 时间：2012-12-17T20:35:05.027
> 
> 标签：unix, ubuntu, ftp, amazon-ec2, sftp

我已经在 Ubuntu 中设置了 VSFTPD，如果我尝试使用私钥对文件进行 SFTP 传输，我可以正常使用——但我想允许其他用户使用密码。[我已经按照 Ubuntu 的说明进行操作](https://help.ubuntu.com/10.04/serverguide/ftp-server.html)，并且已经在“sftponly”用户组中创建了用户，并创建了适当的主目录，但是当我尝试连接时，我被拒绝了：

`Permission denied (publickey).`

当我做一个 ssh -vvv someuser@123.45.67.89 时，一行说：

`debug1: Authentications that can continue: publickey`

我有另一台服务器，密码方法可以正常工作，那个特定的调试行说：

`debug1: Authentications that can continue: publickey,password`

所以，我的问题是：如何添加`password`到身份验证方法列表中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T22:44:09.783

编辑 sshd_config 并确保您有`PasswordAuthentication yes`.

在 Ubuntu 上，文件在这里：/etc/ssh/ssh_config

您可能需要备份一份副本并更改权限，以便备份是只读的，以防万一您需要恢复之前的设置。

这个问题的第一个答案应该会有所帮助：[https ://serverfault.com/questions/154957/set-up-sftp-to-use-password-but-ssh-not-to-use-password](https://serverfault.com/questions/154957/set-up-sftp-to-use-password-but-ssh-not-to-use-password)

# compiler-optimization - 如何防止忙等待的优化

> ID：13921753
> 
> 赞同：3
> 
> 时间：2012-12-17T20:35:13.560
> 
> 标签：compiler-optimization

我需要一个忙等待的功能。

```
for(long int j=0; j<50000000; ++j)
  ; 
```

当我在发布模式下编译时，这会得到优化。除了在调试模式下编译之外，还有什么方法可以导致它*没有*得到优化吗？我并不特别关心循环的实际数量，但它**一定**是一个明显的忙延迟。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T22:37:52.987

我不知道你为什么需要让 CPU 保持忙碌，但让我们假设你真的有充分的理由，比如确保让 CPU 保持忙碌，这样它就不会考虑上周经历的分手并得到所有郁闷，但我离题了...

您看到的问题是编译器执行“死代码消除”：它看到循环什么都不做（即没有副作用），因此将其删除。所以你可以让它有副作用。

一个简单的解决方案是这个函数：

```
void busywait(long iterations)
{
    for(volatile long i = 0; i != iterations; i++)
        ;
} 
```

通过标记`i`为`volatile`确保循环具有副作用，因为存储到 volatile 对象（即我们执行的递增）被视为具有副作用。

# java - 添加大型查询时，如何修复 SpreadSheetAddRows 函数崩溃？

> ID：13921754
> 
> 赞同：7
> 
> 时间：2012-12-17T20:35:14.390
> 
> 标签：java, arrays, coldfusion, apache-poi, coldfusion-9

EDIT3：感谢@Leigh 的帮助，我将问题缩小到查询中的日期列。使用原始代码集和 POI，当 SpreadSheetAddRows() 尝试添加包含类似日期的单元格的非常大的查询时，页面会崩溃。我在这里做了一个错误报告：[https](https://bugbase.adobe.com/index.cfm?event=bug&id=3432184) ://bugbase.adobe.com/index.cfm?event=bug&id=3432184 。

* * *

我有一个查询要添加到一个 spreadhseet 对象，当查询的行数过多（本例中为 18583）时，该对象似乎会出错。确切的错误如下：

```
java.lang.ArrayIndexOutOfBoundsException: -32735
at java.util.ArrayList.get(ArrayList.java:324)
at org.apache.poi.hssf.model.WorkbookRecordList.get(WorkbookRecordList.j ava:50)
at org.apache.poi.hssf.model.Workbook.getExFormatAt(Workbook.java:787)
at org.apache.poi.hssf.usermodel.HSSFCell.getCellStyle(HSSFCell.java:901 )
at org.apache.poi.hssf.usermodel.HSSFSheet.autoSizeColumn(HSSFSheet.java :1727)
at coldfusion.excel.Excel.autoResize(Excel.java:1246)
at coldfusion.excel.Excel.autoResize(Excel.java:1240)
at coldfusion.excel.Excel.addRows(Excel.java:1214)
at coldfusion.runtime.CFPage.SpreadSheetAddRows(CFPage.java:7089) at coldfusion.runtime.CFPage.SpreadSheetAddRows(CFPage.java:7076) 
```

以下是相关代码：

```
<cfset xls = spreadsheetNew()>
<cfset spreadsheetAddRow(xls, arrayToList( qryTest.getMeta().getColumnLabels() ))>
<cfset SpreadsheetFormatRow(xls, {bold=true,fgcolor="brown",color="white"}, 1)>
<cfset SpreadsheetAddRows(xls, qryTest)>
<cfheader name="Content-Disposition" value="attachment; filename=#filename#">
<cfcontent variable="#spreadsheetReadBinary(xls)#" reset="yes" type="application/vnd.ms-excel"> 
```

* * *

编辑：我之前确实成功使用了 cfspreadsheet，但它不会生成带有标题的电子表格（而且它也有需要创建一个临时文件来提供服务的缺点。）

* * *

EDIT2：根据@Leigh 的建议，我更新了 CF9/lib 文件夹中的 POI。错误现在已更改为以下内容：

`<cfset SpreadsheetFormatRow(xls, {bold=true,fgcolor="brown",color="white"}, 1)>`给出以下消息：org.apache.poi.hssf.util.HSSFColor.getIndexHash()Ljava/util/Hashtable;

错误代码：

```
java.lang.NoSuchMethodError:
org.apache.poi.hssf.util.HSSFColor.getIndexHash()Ljava/util/Hashtable;
at coldfusion.excel.Excel.getHSSFColor(Excel.java:2094)
at coldfusion.excel.Excel.findFont(Excel.java:2237)
at coldfusion.excel.Excel.getCellStyle(Excel.java:2318)
at coldfusion.excel.Excel.formatRow(Excel.java:2948)
at coldfusion.excel.Excel.formatRow(Excel.java:2963)
at coldfusion.excel.Excel.formatRow(Excel.java:2981)
at coldfusion.runtime.CFPage.SpreadSheetFormatRow(CFPage.java:7268) 
```

评论该行，它现在再次崩溃： `<cfset SpreadsheetAddRows(xls, qryTest)>`

错误代码：

```
java.lang.IllegalStateException: The maximum number of cell styles was exceeded. You can define up to 4000 styles in a .xls workbook 
at org.apache.poi.hssf.usermodel.HSSFWorkbook.createCellStyle(HSSFWorkbook.java:1120) 
at org.apache.poi.hssf.usermodel.HSSFWorkbook.createCellStyle(HSSFWorkbook.java:73) 
at coldfusion.excel.Excel.addRow(Excel.java:1323)
at coldfusion.excel.Excel.addRows(Excel.java:1203) 
at coldfusion.runtime.CFPage.SpreadSheetAddRows(CFPage.java:7089) 
at coldfusion.runtime.CFPage.SpreadSheetAddRows(CFPage.java:7076) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T20:44:02.020

我怀疑它根本与 CF 或 JRE 版本无关。至少不是直接的。这听起来像是 POI 中的一个错误。

如果您查看异常，它清楚地表明当 CF 调用尝试自动调整列大小的 POI 方法（添加查询数据之后）时会出现问题。快速搜索发现了几份类似错误的报告[（](http://apache-poi.1045710.n5.nabble.com/DO-NOT-REPLY-Bug-48079-New-POI-reportSheet-autoSizeColumn-java-lang-ArrayIndexOutOfBoundsException-1-tp2322165p3245286.html)`ArrayIndexOutOfBoundsException`恰好提到了 ColdFusion）：`HSSFSheet.autoSizeColumn`

> 如果您在设置超过 32767 个单元格后尝试在列上使用 org.apache.poi.hssf.usermodel.HSSFSheet 和方法 autosizecolumn(int)，则会引发 ArrayOutOfBoundsException。

根据错误报告，该问题存在于版本 3.5 中，该版本与 ColdFusion 9 中包含的（主要）版本相同。其中一位 POI 开发人员建议该问题已在以后的版本中得到修复。因此，您可以尝试更新 POI jar。除此之外，如果您可以组合一个重现问题的测试用例，您可能需要提交一份[错误报告](https://bugbase.adobe.com/)。

> 我之前确实成功地使用了 cfspreadsheet，但它不会生成带有标题的电子表格（而且它也有需要创建一个临时文件来提供服务的缺点。）

`cfspreadsheet`可能不会像这样做那样尝试自动调整列的大小`spreadsheetAddRows`，因此不会发生错误。因此，显而易见的解决方法（而不是一个很好的解决方法）是避免尝试调整列宽大小的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:15:14.007

如果您从代码中退后一步，只检查抛出的错误，您可以[从 java 文档中得到这个](http://docs.oracle.com/javase/6/docs/api/java/lang/ArrayIndexOutOfBoundsException.html) ，[这里是另一个参考](https://stackoverflow.com/questions/5554734/java-lang-arrayindexoutofboundsexception)

> 抛出以指示已使用非法索引访问数组。索引为负数或大于或等于数组的大小。

该错误还会向您显示尝试的非法索引值：`-32735`

现在您的问题是您没有在代码本身中指定索引值，因为您使用的是 ColdFusion 函数。该函数 ( `SpreadsheetAddRows`) 试图将您的查询结果转换为一个数组，然后将这些值中的每一个附加到 Excel 电子表格的行中。它正在利用底层 Java 运行时来执行这些任务，这会引发错误。所以我担心你遇到的这个限制有点卡住了。您可以尝试升级您的 ColdFusion 安装正在运行的 JRE 版本，以查看该问题是否已在较新的版本中得到解决。我相信 ColdFusion 9 附带 Java 1.6.0_14，[请参见此处](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WS29fdb0a9aebd66bc-3f601fac1237f9e6e66-8000.html)。[由于DOS 漏洞补丁](http://helpx.adobe.com/coldfusion/kb/oracle-security-alert-cve-2010.html)，您应该至少运行 1.6.0_24\. 看起来它们[现在](http://www.oracle.com/technetwork/java/javase/downloads/index.html)已达到 1.6.0_38 ，但您必须检查 Adob​​e 对此的支持。

如果升级 JRE 不能解决问题，那么我相信您需要更改 ColdFusion 代码以避免此问题。你说你使用`CFSpreadSheet`标签成功了。或者，也许您可​​以使用不同的方式将查询结果传递给`SpreadsheetAddRows`函数。（尽管我假设您已经用尽了这条途径。）也许循环查询并构建您自己的数组或循环查询并一次添加一行。我意识到这可能不是最佳的，但在尝试了几种不同的方法后，希望能成为一种可行的方法。

我还将在您的帖子中添加 ColdFusion 标记（不带版本号）以引起更多关注。

**更新**

只是想跟进 ColdFusion 9 支持的 Java 版本。我发现[Charlie Arehart 的这篇博客文章](http://www.carehart.org/blog/client/index.cfm/2011/10/28/CF911-Have-you-updated-your-ColdFusion-JVM-to-24-yet-Important-security-fix-for-CF-89)讨论了 Adob​​e 对 ColdFusion 服务器 Java 升级的立场。该链接指向[此处的官方 Adob​​e 帖子，](http://helpx.adobe.com/coldfusion/kb/upgrading-java-coldfusion.html)其中指出将支持任何次要版本升级。所以对于 ColdFusion 9 “支持所有未来的 JDK 1.6.0_x 版本”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-04T18:35:57.830

（摘自[http://poi.apache.org/spreadsheet/quick-guide.html](http://poi.apache.org/spreadsheet/quick-guide.html)）

> 请注意，工作簿中唯一字体的最大数量限制为 32767（最大正短）。您应该在应用程序中重复使用字体，而不是为每个单元格创建字体。例子：
> 
> 错误的：
> 
> ```
> for (int i = 0; i < 10000; i++) {
>     Row row = sheet.createRow(i);
>     Cell cell = row.createCell((short) 0);
> 
>     CellStyle style = workbook.createCellStyle();
>     Font font = workbook.createFont();
>     font.setBoldweight(Font.BOLDWEIGHT_BOLD);
>     style.setFont(font);
>     cell.setCellStyle(style);
> } 
> ```
> 
> 正确的：
> 
> ```
> CellStyle style = workbook.createCellStyle();
> Font font = workbook.createFont();
> font.setBoldweight(Font.BOLDWEIGHT_BOLD);
> style.setFont(font);
> for (int i = 0; i < 10000; i++) {
>     Row row = sheet.createRow(i);
>     Cell cell = row.createCell((short) 0);
>     cell.setCellStyle(style);
> } 
> ```

无论如何，你也可以试试这个：

```
org.apache.poi.hssf.usermodel.HSSFOptimiser.optimiseCellStyles(HSSFWorkbook) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T20:59:17.080

根据我对数组的经验，当你得到一个`OutOfBounds`异常时，通常是因为我“溢出”了数组——也就是说，我循环的次数比索引中的项目总数多一个。这通常会发生，因为我忘记了当数组从 0 开始时，我必须只循环到数组长度 - 1。

确保您没有循环超过数组的长度。

# sql - 将两个表中不相关的列相加，然后根据 ID 连接

> ID：13921757
> 
> 赞同：2
> 
> 时间：2012-12-17T20:35:23.003
> 
> 标签：sql, sql-server-2008-r2

我有两个基本上像这样设置的表（非常精简的版本）：

**表 1**：

```
ID       Amt 1     Amt 2
-------------------------    
112     $20        $30
112     $50        $60
125     $75        $05 
```

**表 2**：

```
ID       Amt 3     Amt 4
-------------------------
112       $25       $30
125       $40       $60
125      $110      $120 
```

所有金额列需要单独求和，输出类似于：

查询结果：

```
ID       Amt 1     Amt 2     Amt 3     Amt 4
--------------------------------------------
112     $70        $90       $25       $30
125     $75        $05       $150      $180 
```

我尝试过的连接导致记录重复（和求和）的倍数是 ID 在第二个表中重复的次数。我没有连接这些表的主键。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:43:49.650

要正确解决此问题，您需要单独进行聚合。即使两个表都具有相同 id 的多行，这也将起作用：

```
select id, sum(amt1), sum(amt2), sum(amt3), sum(amt4)
from ((select id, sum(amt1) as amt1, sum(amt2) as amt2, NULL as amt3, NULL as amt4
       from tbl1
       group by id
      ) union all
      (select id, NULL, NULL, sum(amt3), sum(amt4)
       from tbl2
       group by id
      )
     ) t
group by id 
```

上面的查询给出了这个想法`group by`。有些人更喜欢 a`full outer join`用于此目的：

```
select coalesce(t1.id, t2.id) as id, amt1, amt2, amt3, amt4
from (select id, sum(amt1) as amt1, sum(amt2) as amt2
       from tbl1
       group by id
      ) t1 full outer join
      (select id, sum(amt3) as amt3, sum(amt4) as amt4
       from tbl2
       group by id
      ) t2
      on t1.id = t2.id 
```

关键是聚合必须在任何连接*之前*完成，所以你没有多行的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:47:38.840

在 SQL Server 2005 或更高版本上，您可以使用两个 CTE（通用表表达式）对每个表进行求和/分组，然后将两者连接起来 - 如下所示：

```
;WITH CTE1 AS
(
    SELECT 
        ID, Amount1 = SUM(Amt1), Amount2 = SUM(Amt2)
    FROM
        dbo.SumTbl1
    GROUP BY
        ID  
),
CTE2 AS
(
    SELECT 
        ID, Amount3 = SUM(Amt3), Amount4 = SUM(Amt4)
    FROM
        dbo.SumTbl2
    GROUP BY
        ID  
)
SELECT CTE1.ID, Amount1, Amount2, Amount3, Amount4
FROM CTE1
INNER JOIN CTE2 ON CTE1.ID = CTE2.ID 
```

这给了我你想要的输出

# java - 按钮上有图像的 JOptionPane？

> ID：13921759
> 
> 赞同：1
> 
> 时间：2012-12-17T20:35:25.620
> 
> 标签：java, image, swing, jbutton, joptionpane

除了标签之外，如何在按钮上创建带有图像的 JOptionPane？例如，如果我想要确定按钮上的复选标记和取消按钮上的 x 图标？如果不从头开始将整个对话框创建为 JFrame/JPanel，这是否可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T20:43:56.650

`JOptionPane.showOptionDialog()`有一个参数`options`，它是一个 s 的数组`Component`。您可以将一组自定义按钮传递给它：

```
JOptionPane.showOptionDialog( parent, question, title,
   JOptionPane.YES_NO_OPTION, JOptionPane.WARNING_MESSAGE
   new Component[]{ new JButton("OK", myIcon), 
                    new JButton("cancel", myOtherIcon) 
                  }
 ); 
```

从以下文档`JOptionPane`：

> options - 表示用户可以做出的可能选择的对象数组；如果对象是组件，则它们被正确渲染；

或者，您可以子类`JOptionPane`化，并直接更改组件及其布局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T21:22:08.700

[我在java 2 学校](http://www.java2s.com/Tutorial/Java/0240__Swing/AddingComponentstotheButtonAreaUsingJOptionPanewithaJButtoncontainingatextlabelandanicon.htm)上发现了一个看起来有点混乱的解决方案，它似乎可以实际工作并响应按钮点击和动作侦听器：

```
 JFrame frame = new JFrame();
    JOptionPane optionPane = new JOptionPane();
    optionPane.setMessage("I got an icon and a text label");
    optionPane.setMessageType(JOptionPane.INFORMATION_MESSAGE);
    Icon icon = new ImageIcon("yourFile.gif");
    JButton jButton = getButton(optionPane, "OK", icon);
    optionPane.setOptions(new Object[] { jButton });
    JDialog dialog = optionPane.createDialog(frame, "Icon/Text Button");
    dialog.setVisible(true);

  }

  public static JButton getButton(final JOptionPane optionPane, String text, Icon icon) {
    final JButton button = new JButton(text, icon);
    ActionListener actionListener = new ActionListener() {
      public void actionPerformed(ActionEvent actionEvent) {
        // Return current text label, instead of argument to method
        optionPane.setValue(button.getText());
        System.out.println(button.getText());
      }
    };
    button.addActionListener(actionListener);
    return button;
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-07T18:40:21.827

我有同样的问题。用这个动作监听器解决：

```
 JButton ok = new JButton("OK");
    ok.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            Container parent = ok.getParent();
            while (parent != null && !(parent instanceof JDialog)) {
                parent = parent.getParent();
            }
            parent.setVisible(false);
        }
    }); 
```

# iphone - 编辑后将实体保存在核心数据中

> ID：13921767
> 
> 赞同：0
> 
> 时间：2012-12-17T20:35:54.077
> 
> 标签：iphone, objective-c, ios, core-data

我有一些视图控制器。在我登录的第一个 LoginViewController 中，我创建了 newEntity。通过单击“登录”按钮，我通过谓词“登录”获取并分配此 newEntity 获取。AppDelegate.h 为 Core Data 创建了一些东西。在 LoginViewController 中，我在 .h 中有下一个字符串：

```
@class AppDelegate;
...
@property (strong, nonatomic) AppDelegate *appMeDelegate;
@property (strong, nonatomic) NSManagedObjectContext *context;
... 
```

在 LoginViewController.m

```
#import "AppDelegate.h"
...
@synthesize ... appMeDelegate, context;
...
//I have login button where i compare login and password in 
//UITextFields with that in Core Data and if it is 
//all right i load fetch for user with his login
-(IBAction)login:
{
appMeDelegate = (AppDelegate *) [[UIApplication sharedApplication]delegate];
context = appMeDelegate.managedObjectContext;
NSFetchRequest * fetchRequest = [[NSFetchRequest alloc]init];
NSPredicate *predicateMe = [NSPredicate predicateWithFormat:@"login==%@",login.text];
fetchRequest.predicate = predicateMe;
... //then I create newEntity }
//next method for saving
-(void)saving
{
NSError *error = nil;
if (![context save:&error]) {
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}} 
```

然后在其他 ViewController 我使用 newEntity 但无法保存它

```
- (void)viewDidLoad
{
[super viewDidLoad];
NSData *newdata = [NSData dataWithData:self.loginViewController.newEntity.photo];
photoArray = [NSMutableArray arrayWithArray:
[NSKeyedUnarchiver unarchiveObjectWithData:newdata]];}

-(IBAction)save
 {  [photoArray addObject:myImage];
NSData *newData = [NSKeyedArchiver archivedDataWithRootObject:photoArray];
[self.loginViewController.newEntity setValue:newData forKey:@"photo"];
[self.loginViewController saving]; 
```

但没有结果，也没有保存实体的变化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:43:23.233

你会使用这样的东西来保存你的 managedDocument 上下文

```
 [self.managedDocument saveToURL: self.managedDocument.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:^(BOOL success) {
    if (completionHandler) completionHandler(success);
}]; 
```

**编辑** 对不起，刚刚看到您显然没有使用 NSManagedDocument （您应该查看）。

不要这样做：

```
[self.loginViewController saving]; 
```

像以前一样做：

```
appMeDelegate = (AppDelegate *) [[UIApplication sharedApplication]delegate];
NSManagedObjectContext *context = appMeDelegate.managedObjectContext;
[context save: &error]; 
```

# c - 使用 unix 域套接字编写单独的消息

> ID：13921773
> 
> 赞同：0
> 
> 时间：2012-12-17T20:36:31.407
> 
> 标签：c, sockets, unix, unix-socket

我目前正在学习使用 unix 域套接字编程，对此我有疑问。分离消息的标准方法是什么？例如，服务器写入两条消息，客户端需要执行两次读取以获取消息。我想我可以通过总是在每条消息的末尾附加一个特定的字符序列来“定义”我自己的协议，但这似乎不正确。写入套接字时，null char 似乎被丢弃了。我将非常感谢您的澄清，尤其是在接下来的 2 小时内：D。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:43:17.787

使用[`SOCK_DGRAM`](http://www.kernel.org/doc/man-pages/online/pages/man7/unix.7.html)套接字，您将在来自源的写入和在目标的读取之间获得一一对应的关系。

`SOCK_STREAM`您确实需要在套接字提供的流之上的*应用程序级协议。*通常的选择是：

*   **固定长度的消息**，直到你得到足够的字节，
*   每条消息的**固定长度的小标题**，它告诉长度，可能是后面的类型，
*   **分隔消息**（这里的缺点是分隔符不能出现在消息本身中），
*   **自描述**格式（xml、asn.1 等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T20:41:17.520

首先，“unix sockets”通常是指“unix domain socket”，IPC的一种特殊形式。

> 写入套接字时，null char 似乎被丢弃了

这不太可能。你可能写的不对。

> 但这似乎不对

一种更简单的方法是在每个“消息”之前加上一个包含长度的标题。例如

```
 +---+---------+---+-------+
         | 3 |         | 5 | ...   |
         +---+---------+---+-------+ 
```

* * *

一种更简单的方法是使用具有消息概念的协议，即类似于 UDP 或 SCTP 的协议，其中 a`send`最多等于一个`recv`。

# objective-c - CGImageRef cg = [[UIImage imageNamed: Path] CGImage]; 需要 CGImageRelease(cg)'？

> ID：13921779
> 
> 赞同：2
> 
> 时间：2012-12-17T20:36:49.513
> 
> 标签：objective-c, ios, core-foundation, cgimage

我正在尝试从 iOS 中的图像资产中读取 ARGB 像素。为此，我需要一个`CGImageRef`可以用来获取它的`CGDataProvider`. 我的问题是，如果我创建一个`CGImageRef`使用：

```
CGImageRef cg = [[UIImage imageNamed: Path] CGImage]; 
```

我最终需要打电话`CGImageRelease(cg)`吗？如果我不打电话`CGImageRelease`，我会不会有内存泄漏？

我遇到的另一个问题是第二次读取同一个文件会返回一个空图像，我怀疑这可能是因为我没有`CGImageRelease`第一次调用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T20:39:55.560

`CGImageRelease`仅当您使用`CGImageCreate`,`Copy`或`Retain`（或任何具有创建、复制、保留的相关方法。例如：- `CGBitmapContextCreateImage`）时，您才需要调用。在这种情况下，您不必这样做，因为您没有进行任何创建、复制或保留。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:38:21.540

不，CGImage 将绑定到 UIImage 的生命周期

遵循可可的“创建规则”：您只需要释放您拥有的东西（来自名为 new*、copy*、retain 的方法的对象返回所有权）

此外，来自 CF 的任何对象都遵循 CF 创建规则（仅来自名为 Create*、Copy*、Retain 的方法的对象）

# php - 该术语的正则表达式

> ID：13921781
> 
> 赞同：0
> 
> 时间：2012-12-17T20:36:56.790
> 
> 标签：php, regex

从以下行中提取 1944 的正则表达式是什么：

```
vol. 9, no. 3, pp. 185-197, 1944 
```

1944 年基本上是我试图提取的出版年。我在 1900 年和 2010 年之间变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:41:28.687

如果它始终是字符串中的最后一部分，您可以使用它们`$`来表明这一点，并且年份应始终是一个 4 位数字，因此您可以使用`d{4}`. 因此，您想要的正则表达式应为：

`\d{4}$`

如果你想测试你的正则表达式，这里有一个非常简洁的工具：http: [//pagecolumn.com/tool/pregtest.htm](http://pagecolumn.com/tool/pregtest.htm)，它的右侧也有规则。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:40:15.333

你需要一个更好的约束，但也许是这样的：

```
,\s+(19\d\d|200\d|2010) 
```

例如，您知道特定的引用风格吗？（MLA、APA 等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T20:40:24.840

假设这一年永远是最后一年：

```
\d{4}$ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T20:47:32.897

匹配 1900 到 2010 之间的任意数字：

```
(19\d\d|200\d|2010) 
```

如果日期始终是该行的最后一项：

```
(19\d\d|200\d|2010)$ 
```

如果它之后可能有某些东西，但它总是紧跟在页面引用之后：

```
pp?\.\s*[-\d]+,\s*(19\d\d|200\d|2010) 
```

注意：在设计正则表达式时，选择大量匹配项以供您测试通常非常重要，这样您就可以看到可能的输入中可能存在哪些变化。一个测试项目本身不足以设计一个防弹的正则表达式。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-17T20:38:23.807

尝试同时捕捉 4 个数字：

```
\d{4} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-17T22:19:03.383

好的，我使用它来工作：

```
\b[1-9][0-9]{3}\b 
```

这匹配 1000 到 1999 之间的数字，我知道“年份”之前的数字不会那么大

# php - 获取 Pinterest - 处理 AJAX/Javascript 自动加载

> ID：13921786
> 
> 赞同：1
> 
> 时间：2012-12-17T20:37:26.520
> 
> 标签：php, javascript, ajax, web-scraping, pinterest

[在为任何查询](http://pinterest.com/search/pins/?q=mountains)滚动 pinterest 时，图片会自动弹出。否则不要。

在 PHP 中获取它们的最佳方法是什么？我的意思是，我可能必须以某种方式重现该“滚动事件”以获取某个查询的全部内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:11:41.823

使用 jQuery 和 Ajax。

查找用户向下滚动页面的百分比（参见：http: [//iwearshorts.com/blog/measuring-user-scroll-with-jquery/](http://iwearshorts.com/blog/measuring-user-scroll-with-jquery/)）

然后使用 AJAX 调用您的 PHP 文件并检索更多内容，然后再次使用 jQuery 将其附加到您希望它出现的 div 的底部。

# javascript - 如何使用 javaScript 一次重新加载页面

> ID：13921790
> 
> 赞同：0
> 
> 时间：2012-12-17T20:37:38.533
> 
> 标签：javascript, jquery, load

我想在不使用按钮的情况下加载所有代码后重新加载页面。

我用了：`location.reload();`

问题是它一直在反复重新加载我的页面。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T20:44:08.270

`window.reload()`每次重新加载页面时，您都会受到打击。做这样的事情：

```
if(window.location.href.indexOf('?reloaded') === -1) window.location.href = window.location.href + "?reloaded=true"; 
```

这假定页面没有使用任何其他 url 参数。

**编辑**

正如 Matt Ball 指出的那样，使用 localStorage 或 cookie 不会仅限于单个选项卡或窗口，但正如 Jackson Sandland 在评论中指出的那样，我上面给出的解决方案将改变浏览器历史记录。在做了一些挖掘之后，我想出了另一个公认的“hacky”但看似有效的解决方案：`window.name`在 URL 中使用而不是标志：

```
if(window.name !== "refreshed") {
    window.name = "refreshed";
    window.location.refresh();
} 
```

如果您想对此进行测试，请将以下内容粘贴到 HTML 文件中并将其加载到浏览器中：

```
<script>
window.name = prompt("Window name", window.name);
</script> 
```

输入新名称，然后刷新页面。您会看到刷新时会显示新名称。同样，如果您随后打开具有相同文件的第二个选项卡，则可以独立于另一个选项卡设置该选项卡的名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T20:43:09.643

您最好的选择是在某处标记它已重新加载一次。使用马特所说的 cookie 或 localStorage，如果您需要每个选项卡，您可以更改 location.hash

也许您可以帮助我们了解您为什么要重新加载，可能还有另一种方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T20:40:45.050

您需要在页面的 JavaScript 之外存储某种状态，以指示是否刷新。一种方法是使用[`localStorage`](http://diveintohtml5.info/storage.html), 或 cookie，但这些都不适用于每个选项卡或每个窗口。

# c# - 处理多用户安全、所有权

> ID：13921795
> 
> 赞同：0
> 
> 时间：2012-12-17T20:37:51.460
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-membership

我计划*使用 Entity Framewok 开发一个 asp.net mvc 4（和 simplemembership）网站*，它将处理多个用户。用户有一个页面，例如 facebook 个人资料页面，它可以发布或编辑。而且我希望其他用户也可以在此页面上查看和发布，但不能编辑这些帖子，就像 facebook 一样。

我现在正在寻找一个小时的一些关于如何做到这一点的信息，但我什么也没找到。我是 asp.net 的新手，我不知道所有的方法。角色似乎无法处理此类操作。有没有办法在我的控制器中做类似的事情，当我创建一个帖子时，我说登录用户是所有者，只有他可以删除这个帖子，但所有其他人都可以看到它。但是，我仍然不知道如何为每个用户做他的个人资料页面。

我接受所有的建议、tuto 或文章的链接、思考、想法……（抱歉我的英语不好）谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:43:05.390

您可以使用 simplemembership 查找当前登录的用户，如下所示：

```
User.Identity.Name 
```

要获取当前用户，您可以查询您的存储库，例如：

```
var currentUser = db.UserProfiles.Where(u => u.UserName.Equals(User.Identity.Name)).Single(); 
```

**EDIT2：错过了将字段从我的模型更改为您的字段，已修复**

根据您的评论，我将尝试使用 MVC4 中的标准脚手架 CRUD 删除方法编写一个小示例，并且假设 Post 模型具有 UserId 属性/字段：

```
 [HttpPost, ActionName("Delete")]
 public ActionResult DeleteConfirmed(int id) 
 {
     var currentUser = db.UserProfiles.Where(u => u.UserName.Equals(User.Identity.Name)).Single();
     Post post = db.Posts.Find(id);      
     if (post.UserId==currentUser.UserId)
     {
        {
          db.Posts.Remove(post);
          db.SaveChanges();
          return RedirectToAction("Index");
        }  
     }    
  } 
```

# list - 将for循环转换为列表理解python

> ID：13921796
> 
> 赞同：-1
> 
> 时间：2012-12-17T20:37:57.653
> 
> 标签：list, for-loop, list-comprehension, nested-loops

我需要一些帮助将以下嵌套的 for 循环转换为列表理解。

```
adj_edges = []
for a in edges:
    adj = []
    for b in edges:
        if b[0] < a[0] and b[1] >= a[0] and b[1] <= a[1]:
            adj.append(b)
    adj_edges.append((a[0], adj)) 
```

其中边缘是这样的列表列表 [[0, 200], [200, 400]] 我以前使用过列表推导，但我不知道为什么我遇到了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:02:26.437

这里是：

```
adj_edges = [(a[0], [b for b in edges if b[0] < a[0] and b[1] >= a[0] and b[1] <= a[1]]) for a in edges] 
```

这是一个交互式会话，展示了两种替代方法：

```
>>> edges = [[0, 200], [200, 400]]
>>> adj_edges = []
>>> for a in edges:
...     adj = []
...     for b in edges:
...         if b[0] < a[0] and b[1] >= a[0] and b[1] <= a[1]:
...             adj.append(b)
...     adj_edges.append((a[0], adj))
... 
>>> adj_edges
[(0, []), (200, [[0, 200]])]
>>> [(a[0], [b for b in edges if b[0] < a[0] and b[1] >= a[0] and b[1] <= a[1]]) for a in edges]
[(0, []), (200, [[0, 200]])] 
```

# asp.net - 水晶报表批量/海量打印

> ID：13921797
> 
> 赞同：1
> 
> 时间：2012-12-17T20:38:15.933
> 
> 标签：asp.net, vb.net, printing, crystal-reports

我在尝试从我的网络应用程序打印多个文件时遇到问题。

这是问题：

我们有一个有几行的gridview，用户选择他想要打印的行（通常是2xx或更多）。每行都有一个代码，该代码已经打印在纸上，因此这是预期的结果：

纸| 行打印

1 | 1

2 | 2

3 | 3

4 | 4

5 | 5

但是，这就是我们获取打印件的方式

纸| 行打印

1 | 1

2 | 2

3 | 4

4 | 5

5 | 7

*数字仅供参考，通常不会发生在第一个数字上

我怀疑网络中可能会丢失一些行（因为它是网络打印机）。我想尝试的是在 1 个电话中发送所有文件，而不是一个一个地发送。我一直在寻找，但到目前为止什么都没有。我真的很感激一些帮助。

这是我们用来打印的代码片段：

```
'gridview rows loop

    'validations & some operations

    CrystalReportSource.ReportDocument.PrintToPrinter(1,False,0,0)

'next row 
```

在此先感谢您的帮助。

问候

奥斯卡

pd：对不起，如果我的英语不是那么好，那不是我的母语

# z3 - 通过假设时检查坐的错误

> ID：13921799
> 
> 赞同：3
> 
> 时间：2012-12-17T20:38:20.757
> 
> 标签：z3, smt

我们今天遇到了这个看似严重的错误。

考虑[这个 Z3 脚本](http://rise4fun.com/Z3/3DU)。（为完整起见，转载如下。）

公式是不饱和的。我们首先用一个额外的假设检查公式，并得到`unsat`预期的结果。然而，当我们再次检查时，没有任何假设，Z3 现在报告`sat`. 当我们要求一个模型时，我们得到一个明显错误的模型（本质上是矛盾的`(distinct 1 1)`）。

`(check-sat ...)`如果我们用`(push)`和包围第一个`(pop)`，结果如预期。这表明，当`check-sat`传递额外的假设时，它会对上下文进行不合理的简化。

我们是否可能`check-sat`以不正确的方式使用？

```
(set-option :produce-unsat-cores true)
(set-option :produce-models true)

(declare-const start25 Bool)
(declare-const bf07 Bool)
(declare-const bf19 Bool)
(declare-const lt06 Int)
(declare-const ef08 Int)
(declare-const ef110 Int)

(declare-fun whileM4 (Int) Int)

(assert start25)
(assert (=> start25 (distinct lt06 1)))
(assert (=> start25 (= lt06 (whileM4 0))))
(assert (=> (not bf07) (= ef08 0)))
(assert (=> bf07 (= ef08 (whileM4 (+ 0 1)))))
(assert (=> start25 (not (< (whileM4 0) 1))))
(assert (=> start25 (= (whileM4 0) ef08)))
(assert (=> start25 (and (=> bf07 (< 0 1)) (=> (< 0 1) bf07))))
(assert (=> (not bf19) (= ef110 (+ 0 1))))
(assert (=> bf19 (= ef110 (whileM4 (+ (+ 0 1) 1)))))
(assert (=> bf07 (not (< (whileM4 (+ 0 1)) 1))))
(assert (=> bf07 (= (whileM4 (+ 0 1)) ef110)))
(assert (=> bf07 (and (=> bf19 (< (+ 0 1) 1)) (=> (< (+ 0 1) 1) bf19))))

(push) ; comment out to produce bug
(check-sat (not bf19))
(pop)  ; comment out to produce bug

(check-sat) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T22:14:37.063

感谢您报告错误。该错误影响所有 Z3 <= v4.3.1。我修复了这个错误，并且该修复程序已经在 codeplex 上可用。

[http://z3.codeplex.com/SourceControl/changeset/8c211dd4fcd3](http://z3.codeplex.com/SourceControl/changeset/8c211dd4fcd3)

为了获得工作进行中的分支，我们使用

```
git clone https://git01.codeplex.com/z3 -b unstable 
```

使用“work-in-progress”分支可能不方便，因为您还会获得其他更新和修改。因此，另一种选择是手动将修复应用到您正在使用的版本。请注意，修复是一个非常[小的修改](http://z3.codeplex.com/SourceControl/changeset/8c211dd4fcd3)。

# c# - Should().Contain() 与等价选项

> ID：13921808
> 
> 赞同：2
> 
> 时间：2012-12-17T20:38:54.547
> 
> 标签：c#, fluent-assertions

我试图断言`Claim`s 的集合包含一组预期的声明。我似乎遇到的问题是无法检查子集并提供我自己的等效选项。

```
var expected = new[] {
    new Claim(ClaimTypes.Name, "joshdev"),
    new Claim(ClaimTypes.Email, "test@test.com"),
    new Claim(ClaimTypes.GivenName, "Josh"),
    new Claim(ClaimTypes.Surname, "Perry"),
};

var identity = GetIdentity(); 
```

我试过的...

```
identity.Claims.ShouldAllBeEquivalentTo(expected, options => options.Including(x => x.Type).Including(x => x.Value)); 
```

如果身份的声明不完全是预期的集合，那么这将失败，例如，不仅仅是那些声明。

```
identity.Claims.Should().Contain(expected); 
```

这失败了，因为`Contain`只是使用了`object::Equals`该`Claim`类型未实现的方法。

我需要的是某种方法，但具有与暴露`Contain`相同的等效选项。`ShouldAllBeEquivalentTo`我想也许`ShouldBeEquivalentTo`会是我想要的，但这提供了断言集合对象本身，而不是集合中的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:45:49.423

不幸的是，这在当前版本中还不可能。扩展点在那里（请参阅[EquivalencyValidator](http://fluentassertions.codeplex.com/SourceControl/changeset/view/ef5bc38e40d8#Main/FluentAssertions.Net35/Equivalency/EquivalencyValidator.cs)类），但步骤列表当前是私有的。否则，您可以将[EnumerableEquivalencyStep](http://fluentassertions.codeplex.com/SourceControl/changeset/view/ef5bc38e40d8#Main/FluentAssertions.Net35/Equivalency/EnumerableEquivalencyStep.cs)替换为您自己的提供“包含”行为的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-14T15:14:32.733

如果您使用[Shouldly](https://shouldly.readthedocs.io)，则可以将**ShouldAllBe**与**Contains**一起使用。

```
collection1 = {1, 2, 3, 4};
collection2 = {2, 4, 1, 3};

collection1.ShouldAllBe(item=>collection2.Contains(item)); // true 
```

最后，您可以编写扩展程序。

```
public static class ShouldlyIEnumerableExtensions
{
    public static void ShouldEquivalentTo<T>(this IEnumerable<T> list, IEnumerable<T> equivalent)
    {
        list.ShouldAllBe(l => equivalent.Contains(l));
    }
} 
```

**更新**

**ShouldBe**方法上有一个可选参数。

```
collection1.ShouldBe(collection2, ignoreOrder: true); // true 
```

# c++ - K阶统计搜索

> ID：13921809
> 
> 赞同：0
> 
> 时间：2012-12-17T20:38:56.687
> 
> 标签：c++, arrays, algorithm, search, unordered

所以我实现了我自己的第 k 阶统计搜索来查找未排序数组中的第 k 个最大元素。但是我刚刚意识到我使用的算法（可以在这里找到：http: [//pine.cs.yale.edu/pinewiki/QuickSelect](http://pine.cs.yale.edu/pinewiki/QuickSelect)）返回元素本身，但是我实际上想返回第 k 个最大的索引元素。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:38:31.437

使用 QuickSelect 返回第 k 个统计量的原始索引是不可行的。该算法是就地的，它会打乱数组。您必须在开始时制作原始数组的副本（或在元素移动时跟踪元素，这也需要 O(n) 内存并且要复杂得多。）

# ruby-on-rails - 按 Mongo _id 过滤 ElasticSearch 结果

> ID：13921810
> 
> 赞同：0
> 
> 时间：2012-12-17T20:38:58.567
> 
> 标签：ruby-on-rails, mongoid, elasticsearch, tire

我目前正在使用 Ture/ElasticSearch 为我的数据库使用 Mongoid/MongoDB。我想根据数组过滤我的结果`_id`。这是一些类似于我正在尝试的伪代码：

```
search = Tire::Search::Search.new()
search.filter :terms, :_id => [array_of_ids] 
```

当我换出`:_id`属性并尝试使用另一个索引属性时，它工作正常。但是，使用`:_id`，它不返回任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:25:09.580

原来你不允许过滤`:_id`or `:id`。这是轮胎特定的还是 ElasticSearch 特定的，我不确定。

在我的轮胎自定义映射中，我继续添加了一个重复字段作为别名。更多伪代码：

```
tire.mapping do
  indexes :id,         :index    => :not_analyzed
  indexes :content_id, :analyzer => :keyword,
                       :as       => "_id"
  ...
end 
```

重要的部分是`indexes :content_id, :as => "_id"`。从那时起，我使用`:content_id`.

# php - PHP/Postgres 查询未写入 CSV

> ID：13921813
> 
> 赞同：0
> 
> 时间：2012-12-17T20:39:03.117
> 
> 标签：php, postgresql, email, csv

我在让 postgres 查询在我正在运行的某些 php 中工作时遇到了一些麻烦。本质上，我正在创建一份每日报告，该报告将通过电子邮件发送到分发列表，但我无法将我的数据提取到 csv 中。这是我以前没有做过的事情，所以我一直在使用另一个类似的报告来做到这一点。有人可以帮忙吗？

```
include('/some_connection/db_connect.inc');

ob_flush();

$yesterday_db = date('Y-m-d', strtotime('-1 days'));
$yesterday_msg = date('m/d/Y', strtotime('-1 days'));
$yesterday_fn = date('Ymd', strtotime('-1 days'));

$filename = 'fileData_'.$yesterday_fn.'.csv';

$path = '/tmp/';

$res = $db->getAll("SELECT tickets.order_number, tickets.customer_id, tickets.ticket_id, customers.email, (customers.first_name || ' ' || customers.last_name), customers.address_line_1, customers.address_line_2, customers.city, customers.state, customers.zip, (customers.first_name || ' ' || customers.last_name), customers.address_line_1, customers.address_line_2, customers.city, customers.state, customers.zip, customers.phone_1, customers.phone_2, customers.phone_3, contacts.notes
        FROM tickets, customers, contacts
        WHERE tickets.initial_call_date >= '$yesterday_db'
        AND tickets.initial_call_date <= '$yesterday_db'
        AND tickets.customer_id = customers.customer_id
        AND tickets.ticket_id = contacts.ticket_id");

$db2 = DB::connect('database');
$db2->setFetchMode(DB_FETCHMODE_ASSOC);

$handle = fopen($path.$filename,'w');

if(DB::isError($res)) { echo $res->getdebuginfo(); return;}
fwrite($handle,'"Account","Customer Code","Email","Bill Name","Bill Address 1","Bill Address 2","Bill City","Bill State","Bill Zip","Ship Name","Ship Address 1","Ship Address 2","Ship City","Ship State","Ship Zip","Phone 1","Phone 2","Phone 3","Description"'."\n");

foreach($res as $crow){
$id = $crow['customer_id'];
$res = $db->query("SELECT tickets.order_number, tickets.customer_id, tickets.ticket_id, customers.email, (customers.first_name || ' ' || customers.last_name) as bill_name, customers.address_line_1, customers.address_line_2, customers.city, customers.state, customers.zip, (customers.first_name || ' ' || customers.last_name) as ship_name, customers.address_line_1, customers.address_line_2, customers.city, customers.state, customers.zip, customers.phone_1, customers.phone_2, customers.phone_3, contacts.notes
        FROM tickets, customers, contacts
        WHERE tickets.initial_call_date >= '$yesterday_db'
        AND tickets.initial_call_date <= '$yesterday_db'
        AND tickets.customer_id = customers.customer_id
        AND tickets.ticket_id = contacts.ticket_id");

if(DB::isError($res)) { echo 'Error getting information for '.$id.'.'.$res->getdebuginfo()."\n"; return; }

$row = $res->fetchrow();

if(!empty($row)){
fwrite($handle,'"","'.$row['order_number'].'","'.$row['customer_id'].'","'.$row['ticket_id'].'","'.$row['email'].'","'.$row['bill_name'].'","'.$row['address_line_1'].'","'.$row['address_line_2'].'","'.$row['city'].'","'.$row['state'].'","'.$row['zip'].'","'.$row['ship_name'].'","'.$row['address_line_1'].'","'.$row['address_line_2'].'","'.$row['city'].'","'.$row['state'].'","'.$row['zip'].'","'.$row['phone_1'].'","'.$row['phone_2'].'","'.$row['phone_3'].'","'.$row['notes']."\n");
    } 
}

fclose($handle);

$to = 'someone@somemail.com';
$from = 'system@somemail.com';
$from_name = 'Daily Upload';
$replyto = '';
$subject = 'CSV for '.$yesterday_msg."\n";
$message = 'Attached is the ticket data for '.$yesterday_msg."\n";

mail_attachment($filename,$path,$to,$from,$from_name,$replyto,$subject,$message);

function remove_non_numeric($string) {
return preg_replace('/\D/', '', $string);
}

function mail_attachment($filename, $path, $mailto, $from_mail, $from_name, $replyto, $subject, $message) {
$file = $path.$filename;
$file_size = filesize($file);
$handle = fopen($file, "r");
$content = fread($handle, $file_size);
fclose($handle);
$content = chunk_split(base64_encode($content));
$uid = md5(uniqid(time()));
$name = basename($file);
$header = "From: ".$from_name." <".$from_mail.">\r\n";
$header .= "Reply-To: ".$replyto."\r\n";
$header .= "MIME-Version: 1.0\r\n";
$header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
$header .= "This is a multi-part message in MIME format.\r\n";
$header .= "--".$uid."\r\n";
$header .= "Content-type:text/plain; charset=iso-8859-1\r\n";
$header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
$header .= $message."\r\n\r\n";
$header .= "--".$uid."\r\n";
$header .= "Content-Type: text/csv; name=\"".$filename."\"\r\n"; // use different content types here
$header .= "Content-Transfer-Encoding: base64\r\n";
$header .= "Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n";
$header .= $content."\r\n\r\n";
$header .= "--".$uid."--";
if (mail($mailto, $subject, "", $header)) {
    echo "mail send ... OK"; // or use booleans here
} else {
    echo "mail send ... ERROR!";
}
}?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:46:27.810

问题可能出在您的 if 上：

```
if(empty($row)){
    //Write here
} 
```

应该：

```
if(!empty($row)){
    //Write here
} 
```

另请注意，在这种情况下， [fputcsv](http://php.net/manual/en/function.fputcsv.php)是一个非常有用的功能。

编辑：另一个问题是你的循环：

```
foreach($res as $crow){
   $id = $crow['customer_id'];
   $res = $db->query(query);
} 
```

请注意，在第一个循环之后，您将覆盖`$res`变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:57:47.657

我正在发布最终代码，以便在需要时可以帮助其他人。

```
<?php
include('/home/ ... some connection ... /db_connect.inc');
ini_set("auto_detect_line_endings", true);

ob_flush();

$yesterday_db = date('Y-m-d', strtotime('-1 days'));
$yesterday_msg = date('m/d/Y', strtotime('-1 days'));
$yesterday_fn = date('Ymd', strtotime('-1 days'));
$today_db = date('Y-m-d', strtotime('today'));

$qty = 1;
$amt = 0;
$status = "'Service'";

$filename = 'dispatchTrack_'.$yesterday_fn.'.csv';
$path = '/tmp/';

$db2 = DB::connect('odbc://connection');
$db2->setFetchMode(DB_FETCHMODE_ASSOC);
    if (!$db2) {
        die('Could not connect: ' . pg_last_error());
    }

$handle = fopen($path.$filename,'w');

$query = "SELECT distinct (wo.work_order_id || '-' || t.order_number) AS order_number, wo.customer, 
(c.first_name || ' ' || c.last_name) as bill_name, 
(c.address_line_1) as bill_address_1, (c.address_line_2) as bill_address_2, 
(c.city) as bill_city, (c.state) as bill_state, (c.zip) as bill_zip, 
(c.first_name || ' ' || c.last_name) as ship_name, 
(c.address_line_1) as ship_address_1, (c.address_line_2) as ship_address_2, 
(c.city) as ship_city, (c.state) as ship_state, (c.zip) as ship_zip, 
(c.phone_1) as phone1, (c.phone_2) as phone2, (c.phone_3) as phone3, 
c.email, (p.item_id) AS model, (ppi.display_name || ' - ' || p.item_description) AS description, $qty, $amt, $status, (wo.visit_date) AS delivery_date,
(techs.dispatch_code) AS truck, (p.problem_description) AS order_detail 
FROM work_orders AS wo, customers AS c, tickets AS t, techs, problems AS p
JOIN pta_package_items AS ppi
ON p.item_id = ppi.item_id
WHERE c.customer_id IN (SELECT DISTINCT wo.customer
        FROM work_orders AS wo
        WHERE wo.date_created >= '$yesterday_db'
        AND wo.date_created < '$today_db')
AND wo.customer = c.customer_id
AND t.ticket_id = wo.ticket_id
AND p.ticket_id = t.ticket_id
AND techs.tech_id = wo.tech
AND wo.status = 1
ORDER BY order_number";

$result = pg_query($query) or die ('Query failed: ' . pg_last_error());

fputcsv($handle, array('Order Number','Customer Code','Bill Name','Bill Address1','Bill Address2','Bill City','Bill State','Bill Zip','Ship Name','Ship Address1','Ship Address2','Ship City','Ship State','Ship Zip','Phone1','Phone2','Phone3','Email','Model','Description','Quantity','Amount','Delivery Type','Delivery Date','Truck','Order Detail','Comment1','Comment2','Comment3'));

while ($row = pg_fetch_row($result)) fputcsv($handle, $row, $delimeter = ',', $enclosure = '"');

fclose($handle); 
```

...文件的其余部分与以前相同。再次感谢那些评论我非常感谢帮助的人。

# c - 独立于平台的 GigE Vision 驱动程序

> ID：13921825
> 
> 赞同：5
> 
> 时间：2012-12-17T20:39:58.807
> 
> 标签：c, camera, computer-vision, vision

是否存在独立于平台的 GigE Vision 驱动程序或软件包？我正在将 Point Gray Research Flea3 GigE 相机与德州仪器 C6678 多核 DSP 芯片集成。我希望找到一个软件，它明确地将任何依赖于硬件的调用分解为平台或便携式文件，然后我可以为我的平台填写特定细节以传输 UDP 数据包等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T16:15:12.230

看起来，GigE Vision 标准虽然号称是开放的，但实际上根本就不是开放标准。在任何商业软件中实施它都需要支付许可费，未经[AIA](http://www.visiononline.org)批准甚至不能公开下载。

我能够找到一个真正开放的标准实现：

[OpenGigEVision](https://gitorious.org/opengigevision)

# jquery - RollOver 上的停止下拉动画

> ID：13921832
> 
> 赞同：0
> 
> 时间：2012-12-17T20:40:24.867
> 
> 标签：jquery, animation, drop-down-menu, menu

我有一个具有翻转效果的下拉菜单。

当用户滚动第一级菜单中的一个项目时，我想停止所有其他菜单项中仍然存在的下拉动画。但是我找不到在所有这些混乱中应用这个简单代码的方法。

这个问题有3个解决方案：

1.  文学只是关闭所有下拉没有动画。
2.  用动画关闭。
3.  或停止动画

2解决方案会很棒。当我翻转一个项目时，关闭所有其他带有动画的下拉菜单。现在任何解决方案都适合我。

**更新：**

我的最终结果是：

```
$('.dropdown:animated').not(this).not('.selected').stop().hide(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:44:32.467

你可以这样做：

```
$(':animated').stop(); 
```

这只会停止当前活动的所有动画。但是，它不会关闭打开的菜单项。

如果您想关闭打开的项目，我建议您查看菜单项通常是如何关闭的，并将其应用于包装的集合。例如：这可以工作：

```
$(':animated').stop().hide(); 
```

# ios - 如何本地化 iOS 的图像文件夹？

> ID：13921833
> 
> 赞同：12
> 
> 时间：2012-12-17T20:40:24.397
> 
> 标签：ios, xcode, image, localization

我有一个已经大量开发的项目，突然间我们意识到我们需要翻译一组图像。我有翻译后的图像，但我不确定如何将它们应用到我的项目中。

在项目中已经引用的许多图像上实现本地化的最简单方法是什么？

图像由命名的对象引用。所以@"xyz"，而不是@"xyz.png"。图像的位置也设置为“相对于组”，虽然我想我可以改变它，虽然我不知道该怎么做。

谢谢。

[我已阅读以下内容，但不清楚并且获取信息没有本地化选项：[一次在 Xcode 中本地化许多图像？](https://stackoverflow.com/questions/2942771/localize-many-images-in-xcode-at-once)]

编辑：有 74 个图像要本地化 [针对三种语言中的每一种] 编辑：添加了图像的引用方式。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-17T20:50:03.707

首先，确保在项目中设置本地化：

![在此处输入图像描述](../Images/ff912d3e9b14b9a5e87d92ef0906e4cd.png)

您的项目文件夹中应该有`*.lproj`文件夹。每个本地化（`en.lproj`等`de.lproj`）一个。将本地化图像添加到正确的文件夹中。`[UIImage imageNamed:@xyz.png"]`如果您使用常规方式加载图像 ( ) ，则不必更改代码。iOS 将根据用户的语言设置简单地加载正确的。

您可能必须在原始图像所在的目录中创建本地化文件夹，以便不必更改资源的路径。因此，如果图像的路径是 myfolder/myimage.png，那么 en.lproj 和 fr.lproj 文件夹将进入 myfolder。

# php - PHP 使用 $i 进行计数

> ID：13921835
> 
> 赞同：2
> 
> 时间：2012-12-17T20:40:29.297
> 
> 标签：php, variables

您好，我想在每次循环时向变量添加一个数字，以便以后可以拾取该变量。

```
<?php
$i=1;
while($i<=5)
  {
  $myinfo.$i = "This is the text I can change";
  $i++;
  }
?>

<?php echo $myinfo1 ?>
<?php echo $myinfo2 ?>
<?php echo $myinfo3 ?>
<?php echo $myinfo4 ?>
<?php echo $myinfo5 ?> 
```

我不能在循环中包含“myinfo1”，因为我需要将它添加到页面下方的表格中。

如果不清楚，我很抱歉，但我不知道我正在尝试做的事情的正确名称。

如果有人可以提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T20:42:16.823

尝试这个 ：

```
<?php
$i=1;
while($i<=5)
  {
  ${'myinfo'.$i} = "This is the text I can change";
  $i++;
  }
?>

<?php echo $myinfo1 ?>
<?php echo $myinfo2 ?>
<?php echo $myinfo3 ?>
<?php echo $myinfo4 ?>
<?php echo $myinfo5 ?> 
```

（但使用数组是更好的解决方案！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T20:46:37.430

您是否考虑过使用数组而不是命名变量？通过更改为这种架构，您可以添加更多项目而无需更改代码（添加更多行`$myInfoX`）。随着您的开发，此方法也将比您当前的代码更易于阅读和添加。

例如，

```
 $myInfo = array(); 

  for ($i=0; $i<=5; $i++) 
  {
     $myInfo[] = "This is the text I can change";
  } 
```

这将产生一个带有编号索引的数组，您可以像这样回忆：

```
<?php echo $myInfo[2]; //returns "This is the text I can change" ?> 
```

您还可以像这样在循环中使用数组：

```
<?php 
     for($info in $myInfo)
     {
         echo $info; 
     }
 ?> 
```

这将依次打印数组中的每个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:45:28.167

一个 for 循环会简化事情。

尝试这个：

```
$myinfo1 = "String of text 1";
$myinfo2 = "String of text 2";
$myinfo3 = "String of text 3";
$myinfo4 = "String of text 4";
$myinfo5 = "String of text 5";

for ($i=1; $i <= 5; $i++){
     echo $myinfo . $i "<br>";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T20:46:23.707

只是为了让你确定这一点

```
 <?php echo $myinfo1  ;?>
                      ^--------------   you are missing this 
```

这应该是你的代码

```
 <?php
$myinfo1 = "This is the text I can change"; 
$myinfo2 = "This is the text I can change";   
$myinfo3 = "This is the text I can change";   
$myinfo4 = "This is the text I can change";   
$myinfo5 = "This is the text I can change";        

 for ($i = 1; $i <= 5; $i++) 
 {
echo  $myinfo.$i ;

 }
 ?> 
```

# c# - 读取和写入 HTTP 标头

> ID：13921840
> 
> 赞同：2
> 
> 时间：2012-12-17T20:40:36.477
> 
> 标签：c#, asp.net

目前我有一个有两个页面的网络应用程序，登录和默认。

我一直在不知疲倦地尝试编写 2x GUID，当在登录页面后面的代码中执行登录过程时，这些 GUID 返回到 HTTP 标头中。然后我想在默认页面的页面加载中读出这些内容。

我对 C# 中的 HTTP 标头相当缺乏经验，我之前尝试了以下方法从登录中添加值但没有成功......

```
Request.Headers.Add("GUID", strGUID);
Response.Headers.Add("GUID", strGUID); 
```

要检索我尝试使用的默认页面上的值...

```
strGUID = Response.Headers.Get("GUID"); 
```

然后为了最终清除我堆积在其中的所有自定义垃圾的标题，我试图使用......

```
Response.Headers.Clear(); 
```

我一直在浏览互联网，但似乎找不到任何关于此的教程或任何关于如何完成类似任务的分步说明。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T21:01:23.760

由于 HTTP 是一种无状态协议，因此您不能使用 HTTP 标头在请求之间共享数据。我看不出您的代码本身有什么问题，但是没有规则说在一个响应（login.aspx）中发送给客户端的 HTTP 标头应该在下一个请求（default.aspx）中发送回服务器）。即使执行从 login.aspx 到 default.aspx 的重定向，这仍然是正确的，因为重定向本身与跟随它的页面视图是分开的。

您可能正在寻找的是持续多个请求的存储。为此，您可以使用 cookie 将值存储在浏览器中：

```
// Set in login.aspx
Response.Cookies.Add(new HttpCookie("Guid", Guid.NewGuid())

// Read in default.aspx
HttpCookie token = Request.Cookies["Guid"]; 
```

...或会话存储将值存储在服务器上。

```
// Set in login.aspx
Session["Guid"] = Guid.NewGuid();

// Read in default.aspx
Guid token = (Guid) Session["Guid"]; 
```

您可以使用[Fiddler 之](http://www.fiddler2.com/fiddler2/)类的工具来检查 HTTP 流量，以更好地了解 HTTP 标头的传输方式。

# node.js - Node.js：进行模块继承的正确方法是什么？

> ID：13921844
> 
> 赞同：0
> 
> 时间：2012-12-17T20:40:44.277
> 
> 标签：node.js, module, express, extends

**背景**

我正在 node.js 之上使用 express.js 制作一个简单的 Web 服务器。当我为我的服务器制作路由处理程序时，我不可避免地不得不考虑一些常见的功能。因此，我想制作一个具有所有常见处理程序功能（如 DB 连接）的 baseHandler，当我编写其他路由处理程序时，我想“扩展”baseHandler 以方便地获得这些常用处理程序功能。

**我正在尝试什么**

实现它的方法是什么，正确的方法是什么？我正在尝试一个非常直接的解决方案，我将 baseHandler 编写为一个普通的处理程序模块，具有一个本地 mysql 实例并导出操作数据库的函数。下面的代码：

```
// Mysql 
var _mysql = require('mysql');

// Mysql connection
exports.getDbHandle = function() {
    var mysql = _mysql.createConnection({
    host: xxx
    port: xxx
    user: xxx
    password: xxx
    database: xxx
});
return mysql;
}; 
```

然后在我的路由处理程序中，我将只需要这个模块并使用它具有的任何功能。这似乎解决了问题，但我感觉这不是正确的方法。因为我将在我的路由处理程序中有一个 baseHandler 模块的实例，它感觉就像一个实用模块，而不是路由处理程序本身的一部分。

**问题**

那么在nodejs中扩展模块的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:54:20.083

将通用功能放入中间件中，您可以将其插入需要该功能的路由中，而不是创建类层次结构。这迫使您将功能清晰地解耦为独立的组件。`req`中间件可以通过将它们添加为请求对象的属性来使诸如数据库连接之类的东西对路由可用。

# json - Spring REST 服务在没有日志记录的情况下失败

> ID：13921845
> 
> 赞同：1
> 
> 时间：2012-12-17T20:40:44.247
> 
> 标签：json, spring, rest

我有一个 REST Web 服务，有时可以工作，有时会失败。也就是说，我的响应对象有几个子对象，包括一个有几组相关数据的子对象。这些子对象的数量取决于入站参数集。

如果我提交应该得到失败响应的用户 ID/密码；即，错误的用户 ID 或无效密码，响应按预期返回。

如果我提交了应该成功的用户 id / pw，并且没有返回复杂的对象，则响应会按预期返回。

最后，如果我提交了一个用户 id / pw，该用户 id / pw 应该返回一个附加到响应的复杂对象数组，我会收到一个日志记录静默失败，并重定向到 500 页。有一段时间，我收到关于主要复杂对象上的子对象和 Hibernate Session 关闭/不可用问题的投诉。我尝试初始化整个世界，这“帮助”了我不再从 Hibernate 获得关于子对象上的会话问题的详细异常日志记录，但我仍然被重定向到 500 页而根本没有任何日志记录。为了弄清楚这是否是嵌套/隐藏会话问题的问题，我尝试附加一个手工创建的对象，但仍然得到 500 页。

下面是我的控制器代码，它在某些情况下有效，但如果 EnergyAudit[] 数组填充了任何内容，则会失败。

```
 @RequestMapping(method= RequestMethod.GET,value="login")
public @ResponseBody LoginResponse login(@RequestParam("userName") String userNameIn, @RequestParam("password") String passwordIn){

    LoginResponse theResponse = new LoginResponse();
    try{
        logger.info("Entering login for username: "+ userNameIn + " and pw: "+ passwordIn);

        //  CREATE! 
        EnergyAuditUser theUser; 

        try{ 
            // DO A BUNCH OF STUFF TO VALIDATE THEY ARE AN OK USER LEFT OUT FOR OUR PURPOSES HERE. 

        // OK.  IF WE GOT HERE, THEN WE CAN ASSUME THAT THERE IS A USER 
        // AND THEY GAVE US TEH GOOD DATA.  GOOD JOB, USER! 
        theResponse.setSuccessOrFailureSw(Constants.SUCCESS); 
        theResponse.setResponseMessage("Successfully logged in!"); 
        theResponse.setTheUser(theUser);

        // NOW, IF THE USER IS NOT A REACH USER, WE WANT TO SUBMIT BACK ANY AUDITS 
        // REACH USERS WILL HAVE ANOTHER TRANSACTION SET TO ALLOW THEM TO PICK AND CHOOSE
        // FROM THE DAYS AUDITS!
        if (theUser.getEnergyAuditUserType().equalsIgnoreCase(EnergyAuditUser.COT_AUDITOR_TYPE)){
            // WE SHOULD GET ANY AND ALL OPEN, ASSIGNED AUDITS FOR THIS USER.
            EnergyAudit[] assignedAudits = auditService.getAssignedEnergyAuditsForUser(theUser.getEnergyAuditUserId(), false,false, true, false);           
        //  theResponse.setEnergyAudits(assignedAudits);    

// NOTE THAT HERE I ATTEMPTED TO CREATE A NON-BOUND AUDIT TO EVALUATE IF THE SILENT FAILURE WAS HIBERNATE SESSION RELATED.  NO LOVE!
            EnergyAudit bogusAudit = new EnergyAudit(); 
            bogusAudit.setStartingInsulationRvalue(32); 
            bogusAudit.setStreetAddress("123 Chiefy Street"); 
            bogusAudit.setAuditDate(new java.util.Date()); 

            EnergyAudit[] bogusResults = new EnergyAudit[1]; 
            bogusResults[0] = bogusAudit; 

            theResponse.setEnergyAudits(bogusResults);

        }

        // THIS USER / LOSER OUGHT TO BE GOOD TO GO!
        return theResponse; 
```

让我发疯的是，我的控制台没有给我任何关于这里发生的事情的信息。非常感谢任何见解。

布莱恩

# javascript - 如何获取已编译的车把模板的来源？

> ID：13921846
> 
> 赞同：0
> 
> 时间：2012-12-17T20:40:46.940
> 
> 标签：javascript, handlebars.js

我想修改已编译的 Handlebars 模板，例如：

```
var template = Handlebars.templates.my_path.to.original_template
var source = template.magic // ??
var modifiedTemplate = Handlebars.compile($(source).append('Also: {{something}}')) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:07:43.927

显然没有办法在不修改`Handlebars`.

此外，当我们使用`rails-handlebars`时，它会更加复杂。:-(

# linux-kernel - 在暂停/恢复周期后，jiffies 是否应该“赶上”？

> ID：13921849
> 
> 赞同：1
> 
> 时间：2012-12-17T20:41:11.400
> 
> 标签：linux-kernel, embedded-linux

在暂停到 RAM 然后恢复之后，我们是否应该更新 jiffies 以通过检查我们的始终保持时钟来考虑暂停所花费的时间？jiffies 所基于的时钟在挂起/恢复期间断电，因此它不会继续自行增加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:06:30.753

据我所知，不，你不应该，因为 jiffies 只是系统计时器中断到期的次数。

Che 例如 this 的第 54 行[，](http://git.kernel.org/?p=linux/kernel/git/stable/linux-stable.git;a=blob;f=include/linux/power/charger-manager.h;h=0e86840eb603186728d6af5d14a3c277f3f4382b;hb=HEAD)这假设 jiffies 停止。

# asp.net - 获取 asp:gridview 中的复选框状态

> ID：13921860
> 
> 赞同：1
> 
> 时间：2012-12-17T20:42:14.233
> 
> 标签：asp.net, vb.net

我已经设置了一个 gridview 来包含一列这样的复选框：

```
 <asp:TemplateField HeaderText = "Editor">
                        <ItemTemplate>
                             <asp:CheckBox ID="chkRemove" runat="server" AutoPostBack="false" Checked='<%#currentMember(Eval("GroupID")) %>' />
                        </ItemTemplate>
                    </asp:TemplateField> 
```

函数 currentMember 返回 true 或 false。

用户将能够取消选中行以删除成员状态。

现在，一旦用户点击提交，我如何确定用户未选中哪些行以便我可以更新数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:49:15.397

将以下代码放入提交按钮单击处理程序中

```
for (int i = 0; i < gridView.Rows.Count; i++)
{
    CheckBox cbox = (CheckBox)gridView.Rows[i].FindControl("chkRemove");
    if(cbox.Checked){
        //DO DATABASE STUFF
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:47:59.980

在您的事件处理程序代码中，请执行以下步骤

获取行：

```
GridViewRow row = GridView1.Rows 
```

然后，对于每一行，找到 CheckBox 控件：

```
CheckBox checkBox = row.FindControl("chkRemove") 
```

查看控件是否未选中：

```
checkBox.Checked == false 
```

最后，收集您作为数据键绑定到 GridView 的记录 ID：

```
int id = (int)GridView1.DataKeys[row.RowIndex].Value; 
```

现在您应该拥有更新数据库所需的信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T13:15:01.147

这与接受的答案相同，但使用 C# 编程约定。接受的答案使用 Java 中也使用的 C/C++ 约定。这没有错，但令人不悦。

```
 protected void Button1_Click(object sender, EventArgs e)
        {
            GridViewRowCollection rows = ItemsGridView.Rows;

            foreach (GridViewRow gvr in rows){
                CheckBox chk = (CheckBox)gvr.FindControl("chkremove");
                if (chk.Checked)
                {
                    //Do stuff here
                }
            }
        } 
```

# javascript - 了解基本的 DOM 链接

> ID：13921864
> 
> 赞同：5
> 
> 时间：2012-12-17T20:42:30.033
> 
> 标签：javascript, dom

我开始使用 JavaScript 和 DOM，试图故意远离 jQuery 等，至少有一段时间。考虑到这一点，教程通常会提供如下示例：

```
h = document.createElement("h1");
t = document.createTextNode("Hello.");
h.appendChild(t);
document.body.appendChild(h); 
```

为了简化这一点并避免变量，我成功地链接了以下内容：

```
document.body.appendChild(document.createElement("h1")).appendChild(document.createTextNode("Hello.")); 
```

虽然这可行，但我尝试缩短以下前置操作：

```
h = document.createElement("h1");
t = document.createTextNode("Put this on top.");
h.appendChild(t);
document.body.insertBefore(h,document.body.firstChild); 
```

具有以下内容：

```
document.body.insertBefore(document.createElement("h1")).appendChild(document.createTextNode("Put this on top."),document.body.firstChild); 
```

但是这一次它没有按预期工作：文本被放置在 BODY 元素的最末端，获得了追加而不是前置。

我想成功的第一个案例只是侥幸，但我看不出这种连锁做法有什么问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T20:50:15.723

你在错误的地方有括号。您的线路：

```
document.body.insertBefore( document.createElement("h1") )
.appendChild( document.createTextNode("Put this on top."), document.body.firstChild ); 
```

应该如何：

```
document.body.insertBefore(
    document.createElement("h1").appendChild(
        document.createTextNode("Put this on top.")), document.body.firstChild); 
```

现在您明白了为什么将所有内容合并在一行中通常是个坏主意。

好的，这条固定行不会为您提供“带有变量”的代码的确切行为。这是因为 .appendChild 返回子 DOM 元素（`<INPUT>`在您的情况下），而不是父级（`<H1>`在您的情况下）。但是您希望所有`<H1>`DOM 元素都添加到文档的开头。要在一行中实现这一点，您需要使用 .parentNode 属性：

```
document.body.insertBefore(
    document.createElement("h1").appendChild(
        document.createTextNode("Put this on top.")).parentNode, document.body.firstChild) 
```

伙计们，请不要使用这样的代码，这仅用于教育目的）））

# php - cURL 不适用于 POST 数据

> ID：13921867
> 
> 赞同：0
> 
> 时间：2012-12-17T20:42:48.733
> 
> 标签：php, debugging, curl

我正在尝试调试它，但我没有运气。我是否正确发送 POST 数据？

```
if (isset($_POST['chrisBox'])) {

$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, "http://www.associates.com/send-email-orders.php");
curl_setopt($curl, CURLOPT_POST, TRUE);
curl_setopt($curl, CURLOPT_POSTFIELDS, $_POST['chrisBox']);
curl_setopt($curl, CURLOPT_HEADER, FALSE);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, FALSE);
curl_setopt($curl, CURLOPT_VERBOSE, TRUE);
$ex = curl_exec($curl);
echo 'email';
$email = true;

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T20:47:54.637

请求中发送的参数`$_POST`需要采用以下形式 -

```
key=value&foo=bar 
```

您可以为此使用 PHP 的[http-build-query](http://php.net/manual/en/function.http-build-query.php)函数。它将从一个数组创建一个查询字符串。

```
curl_setopt($curl, CURLOPT_POSTFIELDS, http_build_query($_POST)); 
```

如果你只想传递一个参数，你仍然需要将它包装在一个数组或对象中。

```
$params = array(
  'stack'=>'overflow'
);

http_build_query($params);     // stack=overflow 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T20:45:37.967

CURLOPT_POSTFILEDS 需要一个 urlencoded 字符串或一个数组作为参数。阅读[PHP 手册 curl_setopt](http://php.net/manual/de/function.curl-setopt.php)。更改了您的示例，现在它使用了 urlencoded 字符串。

```
if (isset($_POST['chrisBox'])) {

    $curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, "http://www.associates.com/send-email-orders.php");
    curl_setopt($curl, CURLOPT_POST, TRUE);
    curl_setopt($curl, CURLOPT_POSTFIELDS, 'chrisBox=' . urlencode($_POST['chrisBox']));
    curl_setopt($curl, CURLOPT_HEADER, FALSE);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, FALSE);
    curl_setopt($curl, CURLOPT_VERBOSE, TRUE);
    $ex = curl_exec($curl);
    echo 'email';
    $email = true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:46:46.540

```
$ex = curl_exec($process);
if ($ex === false)
{
    // throw new Exception('Curl error: ' . @curl_error($process));
    // this will give you more info
    var_dump(curl_error($process));
} 
```

# c++ - C++ 变量变化监视器

> ID：13921869
> 
> 赞同：4
> 
> 时间：2012-12-17T20:42:58.773
> 
> 标签：c++, debugging

出于调试目的，我想找到一种方法来自动跟踪我的设计中涉及的变量的变化。

我想获得的结果就像每次分配变量时新值的printf一样，但没有手动插入所有printf。

做这个的最好方式是什么？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T20:50:22.003

为要监视的变量创建一个新类并定义适当的`operator=`赋值运算符方法：

```
template <class T>
class MonitoredVariable
{
public:
    MonitoredVariable() {}
    MonitoredVariable(const T& value) : m_value(value) {}

    T operator T() const { return m_value; }

    const MonitoredVariable& operator = (const T& value)
    {
        printf("Variable modified\n");
        m_value = value;
        return *this;
    }
private:
    T m_value;
} 
```

示例用法：

```
MoniredVariable<int> x;
x = 42;  // Will print "Variable modified" 
```

当然，要使此功能有用，您必须在`operator=`实现中包含相关信息，并且您还必须重载其他算术赋值运算符，例如`+=`,`-=`等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:50:19.673

尝试为他们编写一些代理类并重新定义赋值运算符。它有指针或值语义，但我更喜欢指针，因为它很简单。

```
template<class T>
struct proxy
{
//add const version
  T & operator * ()
  {
    std::cout << "access" << std::endl;
    return val_;
  }

  T * operator -> ()
  {
    std::cout << "access" << std::endl;
    return &val_;
  }

  proxy<T> & operator = (T const & other)
  {
    std::cout << "access" << std::endl;
    val = other;
    return (*this);
  }
private:
   T val_;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-21T09:20:32.730

[等待地址](https://docs.microsoft.com/en-us/windows/win32/api/synchapi/nf-synchapi-waitonaddress)

```
ULONG g_TargetValue; // global, accessible to all threads
ULONG CapturedValue;
ULONG UndesiredValue;

UndesiredValue = 0;
CapturedValue = g_TargetValue;
while (CapturedValue == UndesiredValue) {
      WaitOnAddress(&g_TargetValue, &UndesiredValue, sizeof(ULONG), INFINITE);
      CapturedValue = g_TargetValue;
} 
```

您必须创建一个线程来等待 g_TargetValue 被另一个线程更改。

# c++ - 串口异步IO

> ID：13921870
> 
> 赞同：3
> 
> 时间：2012-12-17T20:43:03.153
> 
> 标签：c++, multithreading, asynchronous, serial-port

在半双工串行端口上设计完全异步 IO 时，我需要您的建议。目前我有一个阅读器线程和许多由信号量和互斥锁控制的编写器线程。现在我想通过消除线程来简化同步。主要问题是串口 IO 有一个奇怪的行为。

`read`我需要做的就是确保`write`系统调用只阻塞调用线程，直到 IO 操作实际完成。我假设`read`默认情况下是阻塞系统调用。虽然我得到`-1`了回报`read`。有一个奇怪的`EBUSY`错误，我没有描述。当前代码：

```
bool SerialManager::initialize(const PortType& portType, const size_t& number)
{
// Open Serial port (/dev/ttyS2 in this case)
fd = open(portName.str().c_str(), O_RDWR ); //O_NOCTTY
if (fd < 0) // if open is not successful
{
    cerr << ERROR << "Unable to open `" << portName << "'." << endl;
    return false;
}
else
{
    cout << INFO << "Port " << portName.str() << " successfully opened."
            << endl;
    cout << INFO << "Configuring port..." << endl;
    fcntl(fd, F_SETFL,~O_NONBLOCK);
    struct termios port_settings; // structure to store the port settings in
    cfsetispeed(&port_settings, B38400); // set baud rate
    cfsetospeed(&port_settings, B38400); // set baud rate
    port_settings.c_cflag |= CLOCAL | CREAD;
    port_settings.c_cflag &= ~CRTSCTS; // disable H/W flow control
    port_settings.c_lflag &= ~( ISIG | // disable SIGxxxx signals
            IEXTEN | // disable extended functions
            ECHO | ECHOE); // disable all auto-echo functions
    port_settings.c_lflag &= ~ICANON ; // raw mode
    port_settings.c_oflag &= ~OPOST; // raw output
    port_settings.c_iflag &= ~(IXON | IXOFF | IXANY); // disable S/W flow control;
    port_settings.c_cc[VTIME] = 20; // wait 0.1 second to get data
    port_settings.c_cc[VMIN] = 0;

    port_settings.c_cflag = (port_settings.c_cflag &= ~CSIZE) | CS8; // set data byte size
    port_settings.c_cflag &= ~CSTOPB; // set stop bit 1
    port_settings.c_cflag &= ~PARENB; // set no parity
    port_settings.c_iflag |= IGNPAR; // ignore parity
    port_settings.c_iflag &= ~(INPCK | ISTRIP | PARMRK);

    // Set
    if (tcsetattr(fd, TCSANOW, &port_settings) < 0)
    {
        cerr << ERROR << "Unable to configure serial port." << endl;
        return false;
    }
    else
    {
        cout << INFO << "Port `" << portName.str()
                << "' configuration was successful." << endl;
            return true;
    }
}
} 
```

写入数据：

```
int SerialManager::asyncWriteData(const byte* data, const size_t& size)
{
    int writeSize = write(fd, data, size);
    return writeSize;
} 
```

供阅读：

```
void SerialManager::asyncRead(byte* buffer, const size_t& size, bool& ok)
{
    byte temp[256];
    ssize_t packetSize = read(fd, temp, 256);
    if (packetSize > 0)
    {
        for (size_t i = 0; i < size; ++i)
            buffer[i] = temp[i];
        ok = true;
    }
    cout << errno << endl;
    perror("Error occured: "); // <=== Here I'm getting EBUSY (code 16)
    ok = false;
} 
```

`SerialManager`在外面使用类：

```
....
word checksum = this->id + 0x2C;
checksum = ~checksum;
// Send read command
byte command[] =
{ 0xff, // heading
        0xff, // ~
        this->id, // id of actuator
        0x04, // length
        0x02, // instruction: read
        0x24, // start address: present position
        0x02, // data length
        static_cast<byte>(checksum) //checksum
        };
SerialManager::lockPort(); // lock a mutex to avoid collitions
int numbytes = SerialManager::asyncWriteData(command, 8);
if (numbytes < 0)
{
    cerr << ERROR << "Could not write to serial port." << endl;
    return 0;
}
cout << INFO << numbytes << " bytes has been written." << endl;
for (size_t i = 0; i < 8; ++i)
{
    cout << hex << setfill('0') << setw(2) << (int) command[i] << ' ';
}
cout << endl;

byte* data = new byte[8];
bool ok;
// Here I need to make sure data write is completed before start reading
SerialManager::asyncRead(data, 8, ok);
if (ok)
{
    word position = data[5] + (static_cast<word>(data[6]) << 8);
    return position;
}
else
{
    cerr << ERROR << "Unable to read data from serial port..." << endl;
    return -1;
}
SerialManager::unlockPort(); // Unlock previously locked mutex
.... 
```

**更新：**

我删除了没有意义的读者线程。因为我们有一条无法控制传输的半双工线路。同步IO有两个问题：

1.  从控制器向执行器发送很长的数据，当数据在端口上时，第一个执行器没有响应： ![第一的](../Images/3cf63635bfd4556207fc23c5aaf91301.png)

2.  一个执行器可能会响应，而另一个执行器的数据未完全传输 ![第二](../Images/0a8553f7f5f43cc1121046d1df37a4d3.png)

也`EBUSY`可以通过添加`fsync`after来解决问题`write`。这就是我需要的。（一个阻塞`write`）：

```
int SerialManager::asyncWriteData(const byte* data, const size_t& size)
{
    ssize_t packetSize = write(fd, data, size);
    if (packetSize > 0)
    {
        fsync(fd);
    }
    return packetSize;
} 
```

来自人 fsync：

> fsync() 将文件描述符 fd 引用的文件的所有修改的内核数据（即修改的缓冲区缓存页面）传输（“刷新”）到该文件所在的磁盘设备（或其他永久存储设备）。呼叫阻塞，直到设备报告传输已完成。它还刷新与文件关联的元数据信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T13:07:12.393

我怀疑这回答了你的问题，但我认为它会有所帮助。

在 void SerialManager::asyncRead(byte*, const size_t&, bool&) 中有两个错误：

1.  当 read 返回成功时，您正在使用 errno 的值（并使用 perror 基于它打印消息），而不仅仅是当它出错时（返回值 < 0）。成功时，不指定 errno 具有任何特定值。所以你有效地使用了垃圾数据；你得到的 EBUSY 可能没有任何意义。errno 仅在发生特定错误时被定义为具有特定值。请参阅 Linux 系统上的“man errno”，在我的 Debian 系统上的相关部分中说：“它的值仅在调用的返回值指示错误时才有意义（即，大多数系统调用为 -1；-1或大多数库函数中的NULL）；成功的函数允许更改errno。”。注意“被允许”，而不是“必须”。

2.  您读入临时缓冲区，然后将其逐字节复制到调用者传递的目标缓冲区中。这是对 CPU 周期和内存带宽的毫无意义的浪费。你可以直接读入调用者的缓冲区。即使您必须（出于某种奇怪的原因）读入临时缓冲区然后将其复制到其他地方，您也应该使用 memcpy(3) 或 memmove(3) 将其复制到其他地方，而不是使用您自己的逐字节循环。

关于设计，当只有一个串行端口时，我不明白有多个读取器或写入器的意义。您是否正在尝试实现并行性？我看不出你怎么能，只有一个串口。如果你想要异步而不是并行，你应该研究 fcntl(fd, F_SETFL, existing_flags & O_ASYNC) （尽管信号相当陈旧和丑陋），或者可能只是将 fd 设置为非阻塞，然后在内部事件中调用 select()应用程序的循环并处理任何可用的 I/O（如果有）。

希望这可以帮助！

# css - Firefox 上 Tumblr 的 Base64 字体编码

> ID：13921876
> 
> 赞同：8
> 
> 时间：2012-12-17T20:43:30.253
> 
> 标签：css, firefox, fonts, base64, tumblr

我正在开发一个 Tumblr 主题，并想使用我在所有浏览器中都有的字体。因为 Firefox 不允许对其他域的 css 字体进行 http 请求，所以目前该字体在 Firefox 中不起作用，但在所有其他使用标准 @font-face 语法的浏览器中都可以使用。

环顾四周，发现了使用 base64 将字体直接编码到 css 文件中的建议。现在尝试这样做，但它不起作用。我以前从未使用过这种技术，所以我可能只是遗漏了一些东西。我从 tumblr 主题链接到样式表，并将 font-family:futuraBold 分配给某些元素。

这是样式表的样子：

```
 @font-face {
    font-family: “futuraBold”;
    src: url(“data:font/opentype;base64,BASE64CODE”);
} 
```

我在这里使用了base64编码器：[http ://www.opinionatedgeek.com/dotnet/tools/base64encode/](http://www.opinionatedgeek.com/dotnet/tools/base64encode/)

并上传了一个 .otf 字体文件。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:43:46.460

所有这些都是正确的，除了你我认为你不需要任何引号，单引号或双引号。它应该是这样的：

```
@font-face {
    font-family: futuraBold;
    src: url(data:font/opentype;base64,BASE64CODE);
} 
```

希望这有帮助

# c++ - 如何访问继承的成员

> ID：13921884
> 
> 赞同：0
> 
> 时间：2012-12-17T20:44:05.813
> 
> 标签：c++

我有一个像这样的 A 类和 B 类：

```
class A
{
public:
   A(){}
};

class B : public A
{
public:
   B() : A()
   {
      value = 10;
   }
   int Value()
   {
      return value;
   }

protected:
   int value;
}: 
```

我有这个代码：

```
int main()
{
   A* a = new B();
   // how can I access to Value() ? I would like to make that :
   int val = a->Value();
   // must i cast a to B ? how ?
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T20:47:55.673

使 Value() 成为 A 中的纯虚函数（同时添加一个虚析构函数）：

```
class A
{
public:
  A(){}
  virtual ~A(){}
  virtual int Value() = 0;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:46:50.387

问题是， Virtual() 不是继承的。它没有在 A 中定义。

将 A 中的 Value() 声明为纯虚拟。

```
virtual int Value() = 0; 
```

您无法访问 Value() 因为就编译器而言， A （这是您正在创建的对象类型）中没有 Value() 函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T20:48:16.860

使用虚方法

```
class A
{
public:
   A(){}
   virtual int Value() = 0;
   virtual ~A(){}
};

class B : public A
{
public:
   B() : A()
   {
      value = 10;
   }
   int Value()
   {
      return value;
   }

protected:
   int value;
}: 
```

还要记住（告诉不要问原则）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T20:46:45.590

改为这样做：

```
B* b = new B(); 
```

如果您需要`B`make a 的功能`B`。

# sql-server-2008 - 如何在 SQL Server 2008 中获取“搜索的 CASE 表达式”以返回搜索条件而不是 result_expression

> ID：13921895
> 
> 赞同：1
> 
> 时间：2012-12-17T20:44:55.290
> 
> 标签：sql-server-2008, tsql, case, where-clause

我试图在我的 WHERE 子句中应用条件逻辑，使用带有“[搜索的 CASE 表达式](http://msdn.microsoft.com/en-us/library/ms181765%28v=sql.105%29.aspx)”的 CASE 语句，它返回一个表达式，但它不起作用，因为[WHERE 子句](http://msdn.microsoft.com/en-us/library/ms188047%28v=sql.105%29.aspx)需要一个“[搜索条件](http://msdn.microsoft.com/en-us/library/ms173545%28v=sql.105%29.aspx)”。见下文。

如何在 WHERE 子句中使用“搜索的 CASE 表达式”并让它返回“搜索条件”？

```
WHERE
(
    --user supplies both min and max price
    CASE 
        WHEN (@MIN_PRICE IS NOT NULL AND @MAX_PRICE IS NOT NULL AND @MIN_PRICE > 0 AND @MAX_PRICE > 0) THEN
            CASE 
                WHEN LIST_STATUS = 'Sold' THEN
                    SOLD_PRICE BETWEEN @MIN_PRICE AND @MAX_PRICE
                ELSE --Active and Contingent
                    CASE 
                        WHEN VALUE_RANGE_PRICING = 'No' THEN
                            LIST_PRICE_H BETWEEN @MIN_PRICE AND @MAX_PRICE
                        ELSE --Price Range
                            LOW_LIST_PRICE BETWEEN @MIN_PRICE AND @MAX_PRICE
                            OR
                            LIST_PRICE_H BETWEEN @MIN_PRICE AND @MAX_PRICE
                    END
            END
        --user supplies just max price
        WHEN ((@MIN_PRICE IS NULL OR @MIN_PRICE = 0) AND @MAX_PRICE IS NOT NULL AND @MAX_PRICE > 0) THEN
            CASE 
                WHEN LIST_STATUS = 'Sold' THEN
                    SOLD_PRICE <= @MAX_PRICE
                ELSE --Active and Contingent
                    CASE 
                        WHEN VALUE_RANGE_PRICING = 'No' THEN
                            SEARCH_PRICE <= @MAX_PRICE
                        ELSE --Price Range
                            LOW_LIST_PRICE <= @MAX_PRICE
                    END
            END
        --user supplies just min price
        WHEN ((@MAX_PRICE IS NULL OR @MAX_PRICE = 0) AND @MIN_PRICE IS NOT NULL AND @MIN_PRICE > 0) THEN
            CASE 
                WHEN LIST_STATUS = 'Sold' THEN
                    SOLD_PRICE >= @MIN_PRICE
                ELSE --Active and Contingent
                    CASE 
                        WHEN VALUE_RANGE_PRICING = 'No'
                            SEARCH_PRICE >= @MIN_PRICE
                        ELSE --Price Range
                            LIST_PRICE_H >= @MIN_PRICE
                    END
            END
        --else {do nothing} as no min/max prices supplied
    END
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:41:09.423

我相信以下内容在功能上应该是等效的。

这假定使用的值属于`MONEY`数据类型...如果不是，您可以将此处使用的最小/最大值调整为正在使用的数据类型的值。

```
-- First, set the min / max magic numbers for the MONEY data type.
DECLARE
    @MinMoney MONEY,
    @MaxMoney MONEY

SET @MinMoney = -922,337,203,685,477.5808
SET @MaxMoney = 922,337,203,685,477.5807

-- Then later in your query...
WHERE
(
    CASE 
        -- First, handle the "no parameters supplied scenario" by returning NULL,
        --  which will cause the following check to fail.
        WHEN @MIN_PRICE IS NULL AND @MAX_PRICE IS NULL THEN NULL

        -- Next, supply the values for the various statuses.
        WHEN LIST_STATUS = 'Sold' THEN SOLD_PRICE
        WHEN VALUE_RANGE_PRICING = 'No' THEN LIST_PRICE_H
        ELSE LOW_LIST_PRICE

    -- Lastly, check if the supplied value falls within the range.  
    -- If a value isn't supplied, convert it to either the min or max value.
    END BETWEEN 
        ISNULL(NULLIF(@MIN_PRICE, 0), @MinMoney) 
        AND ISNULL(NULLIF(@MAX_PRICE, 0), @MaxMoney)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T23:52:07.870

您需要将布尔表达式转换为整数，1 表示真，0 表示假，然后将它们与 1 进行比较以再次获得布尔值。你可以这样说`case when EXPRESSION then 1 else 0 end`。

像这样的东西：

```
where 
case 
   when situation1 then
             case when condition1  then 1 
              else 0 
              end
    when situation2 then 
          case when conditon2 then 1
              else 0 end
    else 0 end
 = 1 
```

在您的示例中：

像这样：

```
WHERE
(
    --user supplies both min and max price
    CASE 
        WHEN (@MIN_PRICE IS NOT NULL AND @MAX_PRICE IS NOT NULL AND @MIN_PRICE > 0 AND @MAX_PRICE > 0) THEN
            CASE 
                WHEN LIST_STATUS = 'Sold' THEN
                    case when SOLD_PRICE BETWEEN @MIN_PRICE AND @MAX_PRICE then 1 else 0 end
                ELSE --Active and Contingent
                    CASE 
                        WHEN VALUE_RANGE_PRICING = 'No' THEN
                            case when LIST_PRICE_H BETWEEN @MIN_PRICE AND @MAX_PRICE then 1 else 0 end
                        ELSE --Price Range
                        case when 
                            LOW_LIST_PRICE BETWEEN @MIN_PRICE AND @MAX_PRICE
                            OR
                            LIST_PRICE_H BETWEEN @MIN_PRICE AND @MAX_PRICE
                            then 1 else 0 end
                    END
            END
        --user supplies just max price
        WHEN ((@MIN_PRICE IS NULL OR @MIN_PRICE = 0) AND @MAX_PRICE IS NOT NULL AND @MAX_PRICE > 0) THEN
            CASE 
                WHEN LIST_STATUS = 'Sold' THEN
                    case when SOLD_PRICE <= @MAX_PRICE then 1 else 0 end
                ELSE --Active and Contingent
                    CASE 
                        WHEN VALUE_RANGE_PRICING = 'No' THEN
                            case when SEARCH_PRICE <= @MAX_PRICE then 1 else 0 end
                        ELSE --Price Range
                            case when LOW_LIST_PRICE <= @MAX_PRICE then 1 else 0 end
                    END
            END
        --user supplies just min price
        WHEN ((@MAX_PRICE IS NULL OR @MAX_PRICE = 0) AND @MIN_PRICE IS NOT NULL AND @MIN_PRICE > 0) THEN
            CASE 
                WHEN LIST_STATUS = 'Sold' THEN
                    case when SOLD_PRICE >= @MIN_PRICE then 1 else 0 end
                ELSE --Active and Contingent
                    CASE 
                        WHEN VALUE_RANGE_PRICING = 'No' Then 
                            case when SEARCH_PRICE >= @MIN_PRICE then 1 else 0 end
                        ELSE --Price Range
                            case when LIST_PRICE_H >= @MIN_PRICE then 1 else 0 end
                    END
            END
        --else {do nothing} as no min/max prices supplied
    END
    = 1
) 
```

您将需要仔细阅读此内容是否有错别字......

另外，请注意，这不会使用任何索引。要使其使用索引，您可以将其分解为联合或使用临时表。

# dependency-injection - 配置与 Zend\Di\Di 一起使用的类别名

> ID：13921897
> 
> 赞同：1
> 
> 时间：2012-12-17T20:45:14.880
> 
> 标签：dependency-injection, zend-framework2

我有一个记录器类（Application\Debug\Logger），用于将整个应用程序中的各种调试消息记录到日志文件中。我想使用简单的别名'logger'来获取该类的实例。所以我尝试配置 Zend\Di\Di，以便我可以在模块控制器或其他应用程序组件中执行类似的操作：

```
$di = new \Zend\Di\Di();
$logger = $di->get('logger');
//$logger should be Application\Debug\Logger instance... 
```

为了实现这一点，我在 Application/config/module.config.php 中有这个：

```
'di' => array(
    'instance' => array(
        'alias' => array(
            'logger' => 'Application\Debug\Logger',
        ),
    ),
) 
```

但问题是：别名“记录器”不起作用。我可以使用 Di 并通过全名（Application\Debug\Logger）获取类，但不能通过别名（我得到错误：类记录器无法位于提供的定义中）。我想我必须以某种方式将配置传递给 Di，但我不知道如何。你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:46:25.427

我找到了我的问题的部分解决方案。我注意到，当我调用 ServiceManager 时，它还使用依赖注入配置来找到合适的类，所以我可以调用：

```
$logger = $this->getServiceLocator()->get('logger'); 
```

在控制器中通过为 DI 配置的别名获取记录器实例。

所以在我的配置文件中我也可以放：

```
'service_manager' => array(
    'invokables' => array(
        'logger' => 'Application\Debug\Logger',
    )
), 
```

它的工作原理与之前的 di config 示例相同。但是我仍然不完全了解如何正确使用 DI，所以如果有人可以向我解释一下，我将不胜感激。

# html - CSS - 具有动态宽度的固定位置

> ID：13921899
> 
> 赞同：3
> 
> 时间：2012-12-17T20:45:23.710
> 
> 标签：html, css

我有一个固定宽度的“搜索”容器。它有2个孩子：

1.  锚定到父对象右下角的“数量”容器。它的宽度是动态的，但应该总是比父容器小很多。
2.  显示当前搜索条件的“面包屑”容器。它的宽度可以变化甚至包裹。

我已经设法让这几乎可以工作，但是有一个边缘情况，当“面包屑”是一定长度时，来自两个子容器的文本重叠。

下面是一些关于它的外观的示例以及它当前如何被破坏的示例：

![样本](../Images/d82f18e9d922a1f404c7da5abf2b5b4b.png)

这是 HTML/CSS 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<style type="text/css">
.search {
    border: 1px solid blue;
    width: 600px;
    position: relative;
}
.breadcrumbs {
    border: 1px solid green;
}
.quantity {
    border: 1px solid red;
    position: absolute;
    right: 0;
    bottom: 0;
}
</style>
</head>
<body>
<b>Sample 1</b>
<div class="search">
    <div class="breadcrumbs">Search Criteria: Blah Search Filter 1 &gt; Blah Search Filter 2 &gt; Blah Search Filter 3</div>
    <div class="quantity">51-100 of 5000</div>
</div>
<b>Sample 2</b>
<div class="search">
    <div class="breadcrumbs">Search Criteria: Blah Search Filter 1 &gt; Blah Search Filter 2 &gt; Blah Search Filter 3 &gt; Blah Search Filter 4</div>
    <div class="quantity">51-100 of 5000</div>
</div>
<b>Broken Sample</b>
<div class="search">
    <div class="breadcrumbs">Search Criteria: Blah Search Filter 1 &gt; Blah Search Filter 2 &gt; Blah Search Filter 3 &gt; Uh Oh!</div>
    <div class="quantity">51-100 of 5000</div>
</div>

</body>
</html> 
```

**注意：**如果不能完全按照我的要求做，下面是一个潜在的替代方案：![选择](../Images/992d5415953b9e28279770437e9e87e1.png)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:54:23.343

无需更改标记，此 CSS 即可工作：

```
.search {
    border: 1px solid blue;
    width: 600px;
    overflow: hidden;
}
.breadcrumbs {
    border: 1px solid green;
    display: inline;
}
.quantity {
    border: 1px solid red;
    float: right;
} 
```

[http://jsfiddle.net/mC5QG/](http://jsfiddle.net/mC5QG/)（稍作修改，您可以看到完整的效果）

[http://jsfiddle.net/mC5QG/2/](http://jsfiddle.net/mC5QG/2/)（添加`margin-top: -1px`到`.quantity`）

将绝对定位更改为浮点数并将第一个子元素设置为`display: inline`. 无论元素的宽度是多少，都应该工作。

匹配替代外观的替代解决方案：

```
.search {
    border: 1px solid blue;
    display: table-row;
}

.breadcrumbs, .quantity {
    display: table-cell;
}

.breadcrumbs {
    border: 1px solid green;
}
.quantity {
    border: 1px solid red;
    white-space: pre;
    vertical-align: bottom;
} 
```

[http://jsfiddle.net/mC5QG/1/](http://jsfiddle.net/mC5QG/1/)

# spring - 如何在我的属性文件中创建一个初始化我的属性的 bean？

> ID：13921902
> 
> 赞同：0
> 
> 时间：2012-12-17T20:45:35.887
> 
> 标签：spring, properties, constructor, applicationcontext

我正在使用 Spring 3.1.1.RELEASE。在我的应用程序上下文中，我正在尝试使用基于属性文件中的属性的构造函数来设置 bean。这是我的应用程序上下文...

```
 <!-- Define test properties  -->
    <util:properties id="applicationProperties" location="classpath:test.properties" />

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
            <property name="locations">
                    <list>
                            <value>classpath:test.properties</value>
                    </list>
            </property>
            <property name="ignoreUnresolvablePlaceholders" value="false"/>
    </bean>

    <bean id="myprojectClient" class="org.mainco.subco.myproject.myprojectClient">
    <constructor-arg value="${quickbase.username}" />
    <constructor-arg value="${quickbase.password}" />
</bean> 
```

以及我的 test.properties 文件的顶部……</p>

```
# Quickbase credentials
quickbase.username=dalvarado-NONEMP@mainco.org
# It is expected that the password given here is encrypted.
quickbase.password=o37AbCdju57/nTWplI0oNg== 
```

这是我在 JUnit 测试中声明应用程序上下文文件的方式...

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({ "classpath:test-context.xml" })
public class TrainingAssignmentDaoTest extends AbstractTransactionalJUnit4SpringContextTests {

…

    @Autowired
    @Qualifier(value="applicationProperties")
    private Properties m_testProps; 
```

但我得到了这个例外，“无法解析占位符'quickbase.username'”。我需要做什么才能让我的财产在那里？

```
 java.lang.IllegalStateException: Failed to load ApplicationContext
        at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
        at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
        at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
        at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
        at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
        at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
        at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
        at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'myprojectClient' defined in class path resource [test-context.xml]: Could not resolve placeholder 'quickbase.username'
        at org.springframework.beans.factory.config.PlaceholderConfigurerSupport.doProcessProperties(PlaceholderConfigurerSupport.java: 209)
        at org.springframework.beans.factory.config.PropertyPlaceholderConfigurer.processProperties(PropertyPlaceholderConfigurer.java:220)
        at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:84)
        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:681)  
        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:656)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:446)
        at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103)
        at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
        at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
        at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
        at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
        ... 24 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:13:22.977

由于其他一切都很好，因此您的属性文件一定不在类路径上。我假设您正在从单元测试中运行它，尝试使用这个虚拟测试，假设您的上下文 xml 文件名是`testContext.xml`：

```
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:testContext.xml")
public class MyTest {

@Autowired
myprojectClient myprojectClient;

@Test
public void test()
{
    //use myProjectClient
}

} 
```

通过这种方式，您可以使用 Spring 上下文开始测试，该上下文从`@ContextConfiguration`. 可以使用多个上下文文件。还有一件事，使用大写字母作为类名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:45:59.077

尝试将*ignoreUnresolvablePlaceholders*设置为 true 并重试。

```
<property name="ignoreUnresolvablePlaceholders" value="true"/> 
```

您的应用程序中可能有多个 org.springframework.beans.factory.config.PropertyPlaceholderConfigurer（可能在您的应用程序上下文和测试上下文中）。

# jquery - 修复了重叠的 jquery 面板

> ID：13921907
> 
> 赞同：0
> 
> 时间：2012-12-17T20:45:59.317
> 
> 标签：jquery, html, css

我对这个站点的计划是在页面中添加一个标题，当您滚动页面时该标题保持不变。不过要注意的是，这个标题还需要向下滑动并显示一个面板，同时覆盖主要内容，而不是将其向下推。我已经尝试`position:fixed`过标题和/或面板 div，但它以某种方式隐藏了滚动条。我也尝试过使用`z-index`，但这没有任何效果。

任何帮助，将不胜感激。这是我的代码。

[我的 HTML](http://tny.cz/22de6520)

[还有我的 CSS](http://tny.cz/4f9d59aa)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:07:36.023

似乎您的下方有一个额外的 div 标签`div#main_header`，但没有结束标签。

我在我的 jsfiddle 中对其进行了测试。

[http://jsfiddle.net/Morlock0821/mfF4X/1/](http://jsfiddle.net/Morlock0821/mfF4X/1/)

我还从您的css中删除了`position:absolute`and并添加了.`top:0``#header``position:fixed`

它似乎正在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:09:44.397

这就是你想要的？

[http://limpid.nl/lab/css/fixed/header](http://limpid.nl/lab/css/fixed/header)

希望它有所帮助:)

# python - Python urllib2：从 url 接收 JSON 响应

> ID：13921910
> 
> 赞同：94
> 
> 时间：2012-12-17T20:46:07.463
> 
> 标签：python, json, urllib2

我正在尝试使用 Python 获取 URL，响应是 JSON。但是，当我跑步时

```
import urllib2
response = urllib2.urlopen('https://api.instagram.com/v1/tags/pizza/media/XXXXXX')
html=response.read()
print html 
```

html 是 str 类型，我期待一个 JSON。有什么方法可以将响应捕获为 JSON 或 python 字典而不是 str。

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2012-12-17T20:47:46.390

如果 URL 返回有效的 JSON 编码数据，请使用[`json`库](http://docs.python.org/2/library/json.html)对其进行解码：

```
import urllib2
import json

response = urllib2.urlopen('https://api.instagram.com/v1/tags/pizza/media/XXXXXX')
data = json.load(response)   
print data 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-03-20T10:47:05.123

```
import json
import urllib

url = 'http://example.com/file.json'
r = urllib.request.urlopen(url)
data = json.loads(r.read().decode(r.info().get_param('charset') or 'utf-8'))
print(data) 
```

[urllib](https://docs.python.org/3.4/library/urllib.html "urllib")，对于 Python 3.4
[HTTPMessage](https://docs.python.org/3.4/library/email.message.html#email.message.Message.get_param "HTTP消息")，由 r.info() 返回

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-03-15T15:01:32.510

```
"""
Return JSON to webpage
Adding to wonderful answer by @Sanal
For Django 3.4
Adding a working url that returns a json (Source: http://www.jsontest.com/#echo)
"""

import json
import urllib

url = 'http://echo.jsontest.com/insert-key-here/insert-value-here/key/value'
respons = urllib.request.urlopen(url)
data = json.loads(respons.read().decode(respons.info().get_param('charset') or 'utf-8'))
return HttpResponse(json.dumps(data), content_type="application/json") 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-17T20:47:42.397

小心验证等，但直接的解决方案是：

```
import json
the_dict = json.load(response) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-17T08:13:33.723

```
resource_url = 'http://localhost:8080/service/'
response = json.loads(urllib2.urlopen(resource_url).read()) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-19T03:10:46.103

Python 3 标准库单行：

```
load(urlopen(url))

# imports (place these above the code before running it)
from json import load
from urllib.request import urlopen
url = 'https://jsonplaceholder.typicode.com/todos/1' 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-08-08T06:00:39.890

您还可以使用`requests`如下方式获取 json：

```
import requests

r = requests.get('http://yoursite.com/your-json-pfile.json')
json_response = r.json() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-12T06:42:07.967

虽然我猜它已经回答了我想在这个中添加我的一点点

```
import json
import urllib2
class Website(object):
    def __init__(self,name):
        self.name = name 
    def dump(self):
     self.data= urllib2.urlopen(self.name)
     return self.data

    def convJSON(self):
         data=  json.load(self.dump())
     print data

domain = Website("https://example.com")
domain.convJSON() 
```

注意：传递给**json.load()**的对象应该支持**.read()**，因此**urllib2.urlopen(self.name).read()**不起作用。在这种情况下，应为传递的域提供协议**http**

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-30T14:49:30.193

这是您问题的另一个更简单的解决方案

```
pd.read_json(data) 
```

其中 data 是以下代码的 str 输出

```
response = urlopen("https://data.nasa.gov/resource/y77d-th95.json")
json_data = response.read().decode('utf-8', 'replace') 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-02-23T19:56:33.697

此处提供的示例均不适合我。它们用于 Python 2 (uurllib2) 或用于 Python 3 的返回错误“ImportError: No module named request”。我用谷歌搜索错误消息，它显然需要我安装一个模块——这对于这样一个简单的任务显然是不可接受的。

这段代码对我有用：

```
import json,urllib
data = urllib.urlopen("https://api.github.com/users?since=0").read()
d = json.loads(data)
print (d) 
```

# actionscript-3 - rtmfp FMS 或 Cirrus

> ID：13921918
> 
> 赞同：-1
> 
> 时间：2012-12-17T20:46:57.697
> 
> 标签：actionscript-3, flash-media-server, adobe-cirrus

我想构建一个小型 p2p 聊天应用程序。但是，在这个阶段我不知道我应该选择 FMS 开发服务器还是 Cirrus。FMS 和 Cirrus 的主要区别是什么？FMS 是否有 NetStream 和 NetGroup 类而 Cirrus 没有，反之亦然？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:28:40.930

The difference between both:

*   Cirrus - Adobe rendezvous service that does all the dirty job of connecting your P2P app users with each other. Now, after Cirrus connects the users, they can communicate using Adobe P2P RTMFP protocol which is based on UDP and therefore is fast but not 100% reliable. Perfect choice for games and applications that require low latency connection between peers. (Note: AFAIK Cirrus license does not allow to use it for commercial apps but you can use free alternative, like Cumulus, which, by the way, is an open source project).

*   FMS is based on different approach. Not like RTMFP where all users connect directly to each other, FMS is a centralized server, meaning all traffic first goes through the server before reaching target users. In addition, it is based on higher level TCP protocol (100% connection reliability). Therefore it is slower and produces higher latency compared to RTMFP. FMS can be used as a fallback when Cirrus or similar rendezvous service fails to connect two users using RTMFP.

# c++ - 如何在 C++ 中访问新主函数的参数？

> ID：13921924
> 
> 赞同：0
> 
> 时间：2012-12-17T20:47:22.477
> 
> 标签：c++, visual-studio, visual-c++, linker, visual-studio-2010

我有一个新的 main 函数，我要求链接器在 Visual Studio 中指向它。

我可以正确执行此功能。但是，我得到的命令行参数不正确。

目前这是我的签名

```
int NewMain(int argc, const char* argv[])
    {
    cout << "New Main" << endl;
    for (int i = 0; i < argc; ++i)
        {
        cout << argv[i] << "\n";
        }
    return 0;
    } 
```

但是，当我使用与标准 main 相同的函数时，我得到了所有参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T21:01:33.423

当您指定链接器的入口点时，被调用的函数不会传递*任何*参数。它的签名是`int entrypoint(void);`

如果需要命令行，可以使用`GetCommandLine`. 如果你想把它解析成参数，你可以自己做，也可以使用`CommandLineToArgvW`-- 但请注意，这*仅*在宽字符版本中可用，所以如果你想要一个标准命令行（使用`char`s，而不是`wchar_t`s ) 你必须自己做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T20:59:48.703

来自 msdn 的社区插件：

> 带有命令行参数的自定义入口点函数
> 无法使用命令行参数指定自定义入口点，因为当您指定这样的入口点时，mainCRTStartup 不再被调用，因此不提供带有命令行参数的入口点，例如int argc 和 char* argv[]。

[http://msdn.microsoft.com/en-us/library/f9t8842e%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/f9t8842e%28v=vs.80%29.aspx)

# jquery - 如何在 jQuery 数据表文本框中的文本末尾设置光标位置？

> ID：13921929
> 
> 赞同：0
> 
> 时间：2012-12-17T20:47:44.177
> 
> 标签：jquery, jquery-ui, jquery-plugins

我正在使用 jQuery datatable 以表格格式显示一些信息。当我双击要编辑的单元格值时，该单元格变成了一个很棒的文本框。但是光标位置不在文本框中值的末尾。即使该值为 2 个字符长，光标仍显示在第 17 个字符位置。是否有任何选项可以根据值的大小在值的末尾自动设置光标位置？感谢您的任何建议。

# ios - RestKit 响应无法反序列化为对象

> ID：13921936
> 
> 赞同：7
> 
> 时间：2012-12-17T20:48:03.810
> 
> 标签：ios, restkit, restkit-0.20

在使用 RestKit 的发布请求期间，我无法将响应映射回对象。

这是代码：

要求：

```
// mapping for the response. response is an object: {"response":"message","success":bool}
RKObjectMapping *responseMapping = [RKObjectMapping mappingForClass:[GenericResponse class]];
    [responseMapping addAttributeMappingsFromArray:@[@"success",@"response"]];
    responseMapping.setDefaultValueForMissingAttributes = YES;
    RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:responseMapping pathPattern:@"/authenticate" keyPath:nil statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];

    // mapping for the request body
    RKObjectMapping *requestMapping = [RKObjectMapping requestMapping];
    [requestMapping addAttributeMappingsFromArray:@[@"username", @"password"]];
    RKRequestDescriptor *requestDescriptor = [RKRequestDescriptor requestDescriptorWithMapping:requestMapping objectClass:[LoginCriteria class] rootKeyPath:nil];

    // set up the request
    RKObjectManager *manager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:@"http://localhost:8080"]];
    [manager addResponseDescriptor:responseDescriptor];
    [manager addRequestDescriptor:requestDescriptor];
    [manager setRequestSerializationMIMEType:@"application/json"];

    // set up the LoginCriteria object
    LoginCriteria* loginCriteria = [LoginCriteria new];
    loginCriteria.password = @"test";
    loginCriteria.username = @"test";

    // make the request
    [manager postObject:loginCriteria path:@"/authenticate" parameters:nil
    success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
            GenericResponse *genericResponse = (GenericResponse*)mappingResult;
            NSLog(@"logged in: %@", [mappingResult array]);
    } failure:^(RKObjectRequestOperation *operation, NSError *error) {
        NSLog(@"login failed");
    }]; 
```

通用响应.h：

```
@interface GenericResponse : NSObject
@property (nonatomic) Boolean* success;
@property (nonatomic, copy) NSString* response;
@end 
```

日志：

```
2012-12-17 15:44:22.890 Radiuus[8221:1703] T restkit.network:RKHTTPRequestOperation.m:139 POST 'http://localhost:8080/authenticate':
request.headers={
    Accept = "application/json";
    "Accept-Language" = "en, fr, de, ja, nl, it, es, pt, pt-PT, da, fi, nb, sv, ko, zh-Hans, zh-Hant, ru, pl, tr, uk, ar, hr, cs, el, he, ro, sk, th, id, ms, en-GB, ca, hu, vi, en-us;q=0.8";
    "Content-Type" = "application/json; charset=utf-8";
    "User-Agent" = "Radiuus/1.0 (iPhone Simulator; iOS 6.0; Scale/1.00)";
}
request.body=(null)
2012-12-17 15:44:23.244 Radiuus[8221:5d0b] T restkit.network:RKHTTPRequestOperation.m:156 POST 'http://localhost:8080/authenticate' (200):
response.headers={
    "Content-Type" = "application/json";
    Date = "Mon, 17 Dec 2012 20:44:23 GMT";
    Server = "Apache-Coyote/1.1";
    "Transfer-Encoding" = Identity;
}
response.body={"response":"authentication succeeded","success":true}
2012-12-17 15:44:23.246 Radiuus[8221:4f03] W restkit.object_mapping:RKMapperOperation.m:76 Adding mapping error: Expected an object mapping for class of type 'LoginCriteria', provider returned one for 'GenericResponse' 
```

从日志中，对我来说奇怪的是，RestKit 似乎期望反序列化对 LoginCriteria 对象的响应，但是当它正确获取 GenericResponse 对象时“失败”，这当然是正确的。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T19:51:29.177

感谢您对您的问题的回答，因为它引导我朝着正确的方向弄清楚如何使用 RestKit 的内置方法之一来解决这个问题，而不是修改核心代码。

从他的文档[https://github.com/RestKit/RestKit/wiki/Object-mapping](https://github.com/RestKit/RestKit/wiki/Object-mapping)在**处理核心数据发布/放置中的多个根对象**部分中，他提到如果您想发布一种类型的对象，但是在响应中收到另一个，那么您必须在请求操作中`nil`退出。`targetObject`他的文档中缺少一个完整的示例，所以这是我使用的代码块：

```
RKManagedObjectRequestOperation *operation = [RKObjectManager.sharedManager appropriateObjectRequestOperationWithObject: objectToBePOSTed method:RKRequestMethodPOST path: path parameters: params];
operation.targetObject = nil;
[operation setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
    //handle success
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    //handle failure
}];
[RKObjectManager.sharedManager enqueueObjectRequestOperation:operation]; 
```

~ 节日快乐

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:34:33.107

我对 RestKit 有同样的问题。解决方案是为我作为响应发布的对象添加映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:46:20.400

我深入研究了 RestKit 代码，并在`mapObject`函数中找到了以下代码段`RKMapperOperation.m`：

```
if (NO == [[self.targetObject class] isSubclassOfClass:objectMapping.objectClass]) {
            if ([_mappingsDictionary count] == 1) {
                NSString *errorMessage = [NSString stringWithFormat:
                                          @"Expected an object mapping for class of type '%@', provider returned one for '%@'",
                                          NSStringFromClass([self.targetObject class]), NSStringFromClass(objectMapping.objectClass)];
                [self addErrorWithCode:RKMappingErrorTypeMismatch message:errorMessage keyPath:keyPath userInfo:nil];
                return nil;
            } else {
                // There is more than one mapping present. We are likely mapping secondary key paths to new objects
                destinationObject = [self objectWithMapping:mapping andData:mappableObject];
            }
        } 
```

第一条`if`语句检查以确保`targetObject`（请求对象）具有位于`objectMapping.objectClass`（响应对象）层次结构中的类类型。由于我的请求和响应对象不同，这当然会失败。我在该行设置了一个断点来证明这一点。这是我检查时打印的内容：

```
(lldb) po self.targetObject
(id) $1 = 0x09fb54d0 <LoginCriteria: 0x9fb54d0>
(lldb) po objectMapping.objectClass
(Class) $2 = 0x00162c58 GenericResponse 
```

如您所见，它们属于不同的类型，因此如果成功并且函数返回 nil，则返回未映射的响应。我只是替换`return nil;`为`destinationObject = [self objectWithMapping:mapping andData:mappableObject];`，一切都按预期工作。

我对这个解决方案不满意，因为我不觉得 RestKit 的作者打算让帖子发送和接收不同的对象。因此，这是一个黑客。在 a) 我听到更好的解决方案，或者 b) RestKit 的作者自己做出这个改变（或接受我的 :) 之前，我不会回答这个问题。

# java - Grails：如何使用 grails 约束定义主从视图

> ID：13921944
> 
> 赞同：1
> 
> 时间：2012-12-17T20:48:31.970
> 
> 标签：java, grails, grails-orm

我想用这些表创建一个简单的主/详细视图：

```
create table MASTER_ID2
(
   ID                   int not null,
   VALOR                varchar(40),
   primary key (ID)
);

create table DETAIL_ID2
 (
   ID                   int not null,
   ID_MASTER            int not null,
   VALOR_DET            char(40),
   primary key (ID)
);

alter table DETAIL_ID2 add constraint FK_RDET5 foreign key (ID_MASTER)
      references MASTER_ID2 (ID) on delete restrict on update restrict; 
```

我有这些域类：

```
class MasterId2 {

    Integer id
    String valor
    //
    static hasMany = [details : DetailId2]

    static mapping = {
        table 'master_id2'
        version false
        id generator:'identity', column:'ID'
        //
        details column: 'id_master'     
    }

    static constraints = {
        id(max: 2147483647)
        valor(size: 0..40)
    }

    String toString() {
        return "${id}" 
    }
}

class DetailId2  implements Serializable {

    Integer id
    Integer id_master
    String valor_det
    //
    MasterId2 master
    static belongsTo = MasterId2

    static mapping = {
        table 'detail_id2'
        version false
        id generator:'identity', column:'ID'
    }

    static constraints = {
        id(max: 2147483647)
        valor_det(size: 0..40)
    }

    String toString() {
        return "${id}" 
    }
} 
```

但是详细视图没有分配外键。

我的代码有什么问题？

* * *

我做这个改变

类 MasterId2 {

```
Integer id
String valor
//
static hasMany = [details : DetailId2]

static mapping = {
    table 'master_id2'
    // version is set to false, because this isn't available by default for legacy databases
    version false
    id generator:'identity', column:'ID'
    //
    details column: 'id_master' 
```

}

```
static constraints = {
    id(max: 2147483647)
    valor(size: 0..40)
}
String toString() {
    return "${id}" 
} 
```

}

类 DetailId2 实现可序列化 {

```
Integer id
Integer id_master
String valor_det
//
//MasterId2 master
//static belongsTo = MasterId2
static belongsTo = [master: MasterId2]

static mapping = {
    table 'detail_id2'
    // version is set to false, because this isn't available by default for legacy databases
    version false
    id generator:'identity', column:'ID'
    //
    master insertable: false               // enforce foreign key
    master updateable: false               // enforce foreign key 
```

}

```
static constraints = {
    id(max: 2147483647)
    valor_det(size: 0..40)
}
String toString() {
    return "${id}" 
} 
```

}

但我得到了这个表格

瓦洛代 -> 编辑

Idmaster * -> 编辑

**Master * -> 没有值的列表框**

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:01:27.020

将 DetailId2 的映射从

```
static mapping = {
        table 'detail_id2'
        version false
        id generator:'identity', column:'ID'
    } 
```

至

```
static mapping = {
        table 'detail_id2'
        version false
        id generator:'identity', column:'ID'
        master insertable: false               // enforce foreign key
        master updateable: false               // enforce foreign key
    } 
```

# mysql - 我应该如何避免sql注入？

> ID：13921945
> 
> 赞同：2
> 
> 时间：2012-12-17T20:48:33.000
> 
> 标签：mysql, ruby-on-rails

我有一个查询：

```
@results = the_db.where('name LIKE ?', '%#{input}%').paginate(
    :page => params[:page], 
    :per_page => 50, 
    :group => "name", 
    :order => [
        "CASE WHEN name like '#{input}%' THEN 0 
        WHEN name like '% %#{input}% %' THEN 1
            END, name"
    ]
) 
```

问题是这很容易被注射。（订单条款）我该如何解决这个问题？是否有可能以某种方式清理用户的输入以否定任何攻击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:59:50.947

使用参数化查询。

```
@results = the_db.where('name LIKE ?', "%#{input}%").paginate(
    :page => params[:page], 
    :per_page => 50, 
    :group => "name", 
    :order => [
        "CASE WHEN name like ? THEN 0 
        WHEN name like ? THEN 1
            END, name",
            '#{input}%',
            '% %#{input}% %'
    ]
) 
```

虽然我不确定如果你`%`在字符串中它会如何表现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:07:32.110

您可以在嵌入之前或之后[`sanitize`](http://apidock.com/rails/ActiveRecord/Sanitization/ClassMethods/sanitize)在字符串上使用该方法。`input`这基本上就是 Rails 参数化为您所做的。

请注意，清理将添加前导和尾随单引号`'`，如果需要，您可以使用以下命令将其删除：

```
sanitize(something)[1..-2] 
```

在您的示例中，您可以执行以下操作：

```
:order => [
    "CASE WHEN name like #{sanitize "#{input}%")} THEN 0 
    WHEN name like #{sanitize "% %#{input}% %")} THEN 1
        END, name"
] 
```

请注意，您将需要`sanitize`在类方法或范围内调用，或者使用可以访问它的命名空间（例如`ModelName.sanitize`或`ActiveRecord::Base.sanitize`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T21:12:18.470

您可以使用该`sanitize_sql_array`方法。不幸的是，它是一个私有方法，所以你必须用`send`.

```
query = <<-QUERY
CASE WHEN name like ? THEN 0 
     WHEN name like ? THEN 1
     END, name
QUERY

sanitized_order = ActiveRecord::Base.send :sanitize_sql_array, [query, "'#{input}%'", "'% %#{input}% %'"]

@results = the_db.where('name LIKE ?', '%#{input}%').paginate(
:page => params[:page], 
:per_page => 50, 
:group => "name", 
:order => sanitized_order) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T22:25:42.477

您还可以试用 squeel gem：

[https://github.com/ernie/squeel](https://github.com/ernie/squeel)

Rian Bates 在他的 RailsCasts 中很好地介绍了 squeel：

[http://railscasts.com/episodes/354-squeel?view=asciicast](http://railscasts.com/episodes/354-squeel?view=asciicast)

# objective-c - 使用后台线程处理单元重用的正确方法？

> ID：13921946
> 
> 赞同：10
> 
> 时间：2012-12-17T20:48:35.933
> 
> 标签：objective-c, multithreading, ios6, nsoperation, uicollectionview

我有一个`UICollectionView`，但同样的方法应该适用于`UITableViews`. 我的每个单元格都包含我从磁盘加载的图像，这是一个缓慢的操作。为了缓解这种情况，我使用了异步调度队列。这很好用，但是快速滚动会导致这些操作堆叠起来，这样单元格就会按顺序将其图像从一个更改为另一个，直到最终在最后一次调用时停止。

过去，我检查过该单元格是否仍然可见，如果不可见，则不继续。但是，这不适用于 UICollectionView，而且无论如何它效率不高。我正在考虑迁移到 use `NSOperations`，它可以被取消，这样只有最后一次修改单元格的调用才会通过。我可以通过检查`prepareForReuse`方法中的操作是否完成来做到这一点，如果没有完成，则取消它。我希望过去有人处理过这个问题，并可以提供一些提示或解决方案。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-17T21:41:41.257

[Session 211 - Building Concurrent User Interfaces on iOS，来自 WWDC 2012](https://developer.apple.com/videos/wwdc/2012/?id=211)，讨论了随着后台任务赶上（从 38 分 15 秒开始）单元格图像发生变化的问题。

这是您解决该问题的方法。在后台队列中加载图像后，使用索引路径查找当前单元格（如果有），它正在显示包含该图像的项目。如果你得到一个单元格，设置单元格的图像。如果您得到 nil，则当前没有单元格显示该项目，因此只需丢弃图像。

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    MyCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];
    cell.imageView.image = nil;
    dispatch_async(myQueue, ^{
        [self bg_loadImageForRowAtIndexPath:indexPath];
    });
    return cell;
}

- (void)bg_loadImageForRowAtIndexPath:(NSIndexPath *)indexPath {
    // I assume you have a method that returns the path of the image file.  That
    // method must be safe to run on the background queue.
    NSString *path = [self bg_pathOfImageForItemAtIndexPath:indexPath];
    UIImage *image = [UIImage imageWithContentsOfFile:path];
    // Make sure the image actually loads its data now.
    [image CGImage];

    dispatch_async(dispatch_get_main_queue(), ^{
        [self setImage:image forItemAtIndexPath:indexPath];
    });
}

- (void)setImage:(UIImage *)image forItemAtIndexPath:(NSIndexPath *)indexPath {
    MyCell *cell = (MyCell *)[collectionView cellForItemAtIndexPath:indexPath];
    // If cell is nil, the following line has no effect.
    cell.imageView.image = image;
} 
```

这是一种减少后台任务加载视图不再需要的图像的简单方法。给自己一个`NSMutableSet`实例变量：

```
@implementation MyViewController {
    dispatch_queue_t myQueue;
    NSMutableSet *indexPathsNeedingImages;
} 
```

当您需要加载图像时，将单元格的索引路径放入集合中并调度一个任务，从集合中取出一个索引路径并加载其图像：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    MyCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];
    cell.imageView.image  = nil;
    [self addIndexPathToImageLoadingQueue:indexPath];
    return cell;
}

- (void)addIndexPathToImageLoadingQueue:(NSIndexPath *)indexPath {
    if (!indexPathsNeedingImages) {
        indexPathsNeedingImages = [NSMutableSet set];
    }
    [indexPathsNeedingImages addObject:indexPath];
    dispatch_async(myQueue, ^{ [self bg_loadOneImage]; });
} 
```

如果单元格停止显示，请从集合中删除单元格的索引路径：

```
- (void)collectionView:(UICollectionView *)collectionView didEndDisplayingCell:(UICollectionViewCell *)cell forItemAtIndexPath:(NSIndexPath *)indexPath {
    [indexPathsNeedingImages removeObject:indexPath];
} 
```

要加载图像，请从集合中获取索引路径。我们必须为此调度回主队列，以避免集合上的竞争条件：

```
- (void)bg_loadOneImage {
    __block NSIndexPath *indexPath;
    dispatch_sync(dispatch_get_main_queue(), ^{
        indexPath = [indexPathsNeedingImages anyObject];
        if (indexPath) {
            [indexPathsNeedingImages removeObject:indexPath];
        }
    }

    if (indexPath) {
        [self bg_loadImageForRowAtIndexPath:indexPath];
    }
} 
```

`bg_loadImageForRowAtIndexPath:`方法同上。但是当我们实际设置单元格中的图像时，我们还想从集合中删除单元格的索引路径：

```
- (void)setImage:(UIImage *)image forItemAtIndexPath:(NSIndexPath *)indexPath {
    MyCell *cell = (MyCell *)[collectionView cellForItemAtIndexPath:indexPath];
    // If cell is nil, the following line has no effect.
    cell.imageView.image = image;

    [indexPathsNeedingImages removeObject:indexPath];
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-17T20:58:39.020

您是否尝试过使用[SDWebImage](https://github.com/rs/SDWebImage)开源框架来处理从 Web 下载图像并异步缓存它们？它非常适合`UITableViews`并且应该与`UICollectionViews`. 您只需使用扩展的`setImage:withURL:`方法，`UIImageView`它就会变魔术。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-17T20:58:59.890

我在大约 400 个元素的 UITableView 上遇到了同样的问题，并找到了一个残酷但有效的解决方案：不要重复使用单元格！取决于图像的大小和大小，但实际上 iOS 在释放未使用的单元格方面非常有效......再次：这不是纯粹主义者所建议的，但与异步加载相结合可以快速点亮，无错误并且不必处理复杂的同步逻辑。

# java - 获取存储的实际数字

> ID：13921951
> 
> 赞同：1
> 
> 时间：2012-12-17T20:48:48.460
> 
> 标签：java, floating-point, bigdecimal, ieee-754

我有一个使用泰勒级数创建科学计算器的项目。此外，我正在分析一个数字到 ieee 754 标准浮点系统。

在我的计算器中，用户选择他们想要单精度还是双精度：我使用浮点和双精度变量，然后按照 ieee 754 规范分析数字。

如果用户想要双精度，则分析如下：

```
double analyze=3.45
BigDecimal bd=new BigDecimal(analyze) 
```

这给了我

```
3.45000000000000017763568394002504646778106689453125 
```

1.  这个数字是以二进制格式存储在电脑内存中的实际数字吗？

2.  如果不是，我可以得到所存储数字的真实值吗？

3.  还有为什么会这样？

    `double analyze=0.5`
    `BigDecimal db=new BigBecimal(analyze)`

它只打印`0.5`- 为什么我会丢失有效数字？

谁能告诉我为什么会这样

```
 BigDecimal one=new BigDecimal(0.1);
        BigDecimal five=one.multiply(new BigDecimal(5)) ;
        System.out.println("5 times 0.1 is "+" "+ five);

        System.out.println("But the 0.5 in BigDecimal is " + " "+ new BigDecimal(0.5)); 
```

通过运行这个你得到 5 倍 0.1 是 0.5000000000000000277555756156289135105907917022705078125 但是 BigDecimal 中的 0.5 是 0.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:51:03.347

> 1.我想问你这个数字是不是以二进制格式存储在电脑内存中的实际数字？

是的。

> 2.如果不是，我可以得到所存储数字的真实值

嗯，是的，所以没问题。

> 1.  它只打印我 --> 0.5 为什么我会丢失有效数字？

你没有；`0.5`是以二进制格式存储的确切数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T21:51:54.017

1.  是的，当您将数字“3.45”转换为常见的双精度格式时，3.450000000000000017763568394002504646778106689453125 是存储在双精度中的实际值。

2.  这才是真正的价值。

3.  您没有显示打印 0.5 的方法。我记得，Java 中的一种常见显示机制只是打印尽可能多的数字来准确表示值，如果可能的话。它不打印尾随零，因为它们是多余的。

您可能想知道“好吧，如果只打印 0.5，我怎么知道这个数字是 0.5000000000 而不是 0.5000000001 或类似的东西？” 答案是，如果数字与 0.5 不同，则会打印更多数字，因为已定义显示机制来执行此操作。因此，您可以相信“.5”意味着 .5，仅此而已，仅此而已。

如果这是一个学校项目，那么您可能不需要担心 3.45 会以稍微不同的值表示。继续使用双精度值进行计算。

此外，泰勒级数对于真正的计算器来说是一个糟糕的选择，因为它们被设计为在一个点附近是准确的，但你会想要一个在一个区间内准确的级数。还有其他系列可以更好地分散他们的错误，因此他们需要更少的术语来获得准确的结果。如果建议作为学校项目的一部分，我只会使用泰勒级数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T01:13:17.627

1.  是的。[BigDecimal(double)](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html#BigDecimal%28double%29)构造函数“将double 转换为 BigDecimal，BigDecimal 是 double 的二进制浮点值的精确十进制表示。” BigDecimal [toString](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html#toString%28%29)方法显示确切的值。

2.  不适用

3.  0.5 完全可以表示为双精度数。BigDecimal(0.5) 结果具有未缩放的值 5 和缩放 1。它满足 BigDecimal [toString](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html#toString%28%29)条件，无需指数即可显示。小数点后的位数等于小数位数，1。

您的示例代码：

```
 BigDecimal one=new BigDecimal(0.1);
    BigDecimal five=one.multiply(new BigDecimal(5)) ; 
```

除非您正在探测双重表示，否则使用 BigDecimal 双重构造函数会带来问题。0.1 不能完全表示为双精度数，因此您的“一”不完全是 0.1，即使`BigDecimal("0.1")`是准确的。

更一般地，双精度数的精确值始终具有`a/(2**b)`其中`a`和`b`是整数并`"**"`表示幂的形式。`(a * 5**b)/(10**b)`具有相同的值，并且可以精确地表示为比例为 b 的 BigDecimal。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-17T20:57:34.100

通常，float 和 double**不会**精确地表示十进制数（除了 2 的幂和其他一些“甜蜜点”）。该数字以二进制形式在内部存储。`Double.doubleToRawLongBits`您可以使用或访问内部表示`Float.floatToRawIntBits`。

# python - 具有多线程 pyqt 应用程序的多个 Windows

> ID：13921952
> 
> 赞同：0
> 
> 时间：2012-12-17T20:49:00.383
> 
> 标签：python, pyqt4, multiprocessing, py2exe

我编写了一个小型多处理应用程序，然后为它编写了一个 PyQt 前端。当我通过使用 Python 从命令行调用它（或通过从 Spyder IDE 调用 run）来运行脚本时，它完全按照我的预期运行并且运行良好。

但是，如果我尝试使用 Py2Exe 制作可执行文件以将其提供给朋友，它就会开始表现得很奇怪。当用户点击真正启动进程并调用多线程部分的按钮时，它会生成多个看起来像原始的 Qt 窗口。然后它基本上锁定了。关闭它生成的新窗口之一会导致它重新打开该窗口。尝试关闭原始文件会生成一条没有响应的消息。

我将不胜感激有关在哪里寻找的任何帮助或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:00:30.160

如果不查看您的代码，我对此并不肯定，但是在将 Py2Exe 与多线程一起使用时，还有一些额外的注意事项。

看看[这个链接](http://docs.python.org/dev/library/multiprocessing.html#multiprocessing.freeze%5Fsupport)，也许它与你的问题有关。

有人在[这里有类似的声音问题](https://stackoverflow.com/questions/2073942/multiprocessing-problem-pyqt-py2exe?rq=1)

# php - Foreach 计数 1 项进入数组的次数

> ID：13921956
> 
> 赞同：0
> 
> 时间：2012-12-17T20:49:07.907
> 
> 标签：php, loops, foreach, explode

我试图在 foreach 中计数

像这样在数组中 项目 1 项目 1 项目 2 项目 3 项目 3 项目 3 项目 3

现在这些物品来自爆炸

```
 $likes = explode(',', $user_likes); 
```

然后我有

```
foreach($likes as $like){

  echo $like.'<br>';

} 
```

我想要的输出是

第 1 (2) 项 第 2 (1) 项 第 3 (4) 项

所以没有双重项目，但该项目在数组中的次数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:57:28.843

做

```
print_r(array_count_values($likes)); 
```

如果您希望将其格式化为 item 1 (2) item 2 (1) 等，请执行以下操作：

```
$valueCount = array_count_values($likes);
foreach ($valueCount as $key => $value) {
    echo $key." (".$value.") ";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:54:30.450

尝试这样的事情：

```
$scores = array();

foreach($likes as $like){
    if(!isset($scores[$like]))
    {
        $scores[$like] = 1;
    }
    else
    {
        $scores[$like]++;
    }
}

print_r($scores); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T21:15:02.687

这...

```
<?php

// Counter
$i = '0';

// Array
$array = 'apple, grape, pair, plum';
$array = explode(",", $array);

// Loop
foreach ($array as $value)
  {
      $i++;
      echo '<p>#' . $i . ' - ' . $value . '</p>';
  }

?> 
```

会输出这样的东西...

```
#1 - apple

#2 - grape

#3 - pair

#4 - plum 
```

# java - 从 Java 1.4 连接到 SQL 2008

> ID：13921957
> 
> 赞同：0
> 
> 时间：2012-12-17T20:49:11.763
> 
> 标签：java, sql-server-2008, jdbc

我有 Java 代码，暂时必须在 Java 1.4 中运行，并且使用*SQL Server 2000 Driver for JDBC*。我们使用的 MS SQL Server 之一正在从 SQL Server 2000 升级到 SQL Server 2008。SQL 2000 JDBC 驱动程序不适用于 2008，正如我在实践中和[在线阅读](http://social.msdn.microsoft.com/Forums/en-us/sqldataaccess/thread/c91f0a42-847c-4fb6-8939-264b517bf1e7)中发现的那样。

支持 SQL 2008（2、3 和 4）的所有（？）较新版本的 JDBC[都需要](http://www.microsoft.com/en-us/download/details.aspx?id=2505)Java 5 或 Java 6。

如何从 Java 1.4 连接到 MS SQL Server 2008？

**编辑**看起来*SQL Server 2005 JDBC Driver 1.2*将允许我从 Java 1.4 连接到 SQL 2008，但**[下载不再可用](http://news.softpedia.com/news/SQL-Server-JDBC-Driver-1-2-Downloads-to-Be-Discontinued-137129.shtml)**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:19:12.410

您可以使用第三方驱动程序，例如 jdts：http: [//jtds.sourceforge.net](http://jtds.sourceforge.net)。1.2.x 版本在 1.3 到 6 版本上运行。这里有一个很好的链接，描述了如何使用它：[Help me create a jTDS connection string](https://stackoverflow.com/questions/1862283/help-me-create-a-jtds-connection-string)。

# jquery - jquery在加载时添加类

> ID：13921963
> 
> 赞同：1
> 
> 时间：2012-12-17T20:49:33.987
> 
> 标签：jquery

jQuery：

```
$(document).ready(function() {
    $('.text').load(function() {
        if (this.value == this.title) {
            $('.text').addClass("highlight");
        }
    });
}); 
```

CSS：

```
.highlight
{
  background: #FFA9B8;
  border: 1px solid red;
} 
```

HTML

```
<label for="first_name">first name: </label>
<input type = "text" name = "first_name" class = "text" value = "First..." title = "First..." />
<label for="last_name">last name: </label>
<input type = "text" name = "last_name" class = "text" value = "Last..." title = "Last..." /> 
```

我本质上想在加载页面时将类“highlight”添加到 2 个输入字段的背景中……仅当标题和值都相同时。

谢谢-艺术

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:53:02.190

```
$(document).ready(function(){
   $('.text').filter(function(){
        return this.value === this.title
   }).addClass('highlight')
}); 
```

# javascript - 可以通过 Jscript 为图像获取 CSS 定义的大小并在图像加载之前更改 URL 值吗？

> ID：13921969
> 
> 赞同：1
> 
> 时间：2012-12-17T20:49:48.057
> 
> 标签：javascript, jquery, html, css

所以我拥有的是以下 HTML 结构

```
<div class="large">
<a href="http://www.google.com">
<img src="/wp-content/themes/firstone/mythumb.php?src=http://www.example.com/test.jpg&h=600&w=800&zc=1&s=1" width="800" height="600" border="0" /></a>
</div> 
```

现在，mythumb.php 是一个缩略图脚本，它将动态创建具有预定义大小限制（在本例中为 800x600）的缩略图。

但是在我的 CSS 文件中，我设置了

```
.large img
{
width:400px;
height:300px;
} 
```

这样做是为了在 iphone/ipad 等上实现视网膜效果。

但是，我认为这最好动态完成，并且我希望能够提取 CSS 定义的宽度和高度并替换 URL 中的这些值

在这种情况下，javascript是否有可能改变

/wp-content/themes/firstone/mythumb.php?src=http://www.example.com/test.jpg&h=600&w=800&zc=1&s=1

到

/wp-content/themes/firstone/mythumb.php?src=http://www.example.com/test.jpg* **&h=300&w=400*** &zc=1&s=1

此更改应在图像加载之前发生，因此我们不会浪费用户带宽下载相同的图像两次。

我还想仅将此应用于从 mythumb.php 调用的图像，而不是页面上的其他静态图像

有没有人认为这样的事情是可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:02:10.603

在 html 中布局您的 img 标签，但省略 src 属性

```
<img id="test" class="variableRes" />
<img id="test1" class="variableRes"/> 
```

在 js 中设置图像路径数组：

```
myImages = {
    test: "/wp-content/themes/firstone/mythumb.php?src=http://www.example.com/test.jpg",
    test1: "/wp-content/themes/firstone/mythumb.php?src=http://www.example.com/test1.jpg"
} 
```

您的 css 确定 img 大小，因此您可以查询 img 样式、构建 url 并将 src 分配给 img 标签

```
$('.variableRes').each(function(){
    var $el = $(this);
    var id = $el.attr("id");
    var height = $el.css("height").substr(0,-2);//strip "px"
    var width = $el.css("width").substr(0,-2);
    $el.attr("src", myImages[id] + "&h="+ height +"&w="+ width+"&zc=1&s=1");
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:06:20.560

如果图像具有 src，则无法阻止加载图像。您可以将其更改为另一个属性，例如“data-src”

```
<img data-src="/wp-content/themes/firstone/mythumb.php?src=http://www.example.com/test.jpg&h=600&w=800&zc=1&s=1" width="800" height="600" border="0" /> 
```

然后你可以像这样迭代它们：（如果你有很多imgs，不推荐）

```
var imgs = document.getElementsByTagName('img');​​
for (var i = 0; i < imgs.length; i++) {
    if (notRetina) {
        imgs[i].src = imgs[i].getAttribute('data-src')
        .replace('h=600', 'h=300')
        .replace('w=800', 'h=400');
    }
} 
```

您可能比替换更好地放置您想要的值（例如不将它们放在 data-src attr 中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T21:07:37.940

如果您在服务器上的 HTML 源代码中设置图像的 src，大多数情况下会导致浏览器获取图像两次。你可以做两件事：

1.  使用 javascript 设置 src 并最初让它指向一个占位符。
2.  设置内联标签的样式。

如果每次图像的大小都不同，我会选择第二个选项，因为它更容易而且更快

所以：

```
<div style="width: 800px; height: 600px">
  <a href="http://www.google.com">
  <img src="/wp-content/themes/firstone/mythumb.php src=http://www.example.com/test.jpg&h=600&w=800&zc=1&s=1" width="800" height="600" border="0" /></a>
</div> 
```

800 和 600 值将使用 php 设置。

但是，如果在“大”情况下大小始终相同，则可以使用您提到的 javascript 方法。它稍微慢一些，因为具有宽度和高度定义的 CSS 是异步获取的。您将不得不等待 document.onload 事件而不是 domready 事件，以确保您具有 CSS 宽度和高度定义。然后，您可以使用 javascript 获取 div 的宽度和高度并构建图像 src。因为 onload 可能需要很长时间（尤其是您有外部可能较慢的内容，例如社交媒体按钮），所以在从服务器拉取所有内容之前，图像将不可见。

我会创建一个 php 大型服务器变量并在任何地方使用它。它绝对是最快的，并且您仍然可以在一个地方定义尺寸。

# google-chrome-extension - 扩展中的 Google Chrome Socket API

> ID：13921970
> 
> 赞同：19
> 
> 时间：2012-12-17T20:49:52.580
> 
> 标签：google-chrome-extension

因此，在开发了几个小时的扩展后，假设 chrome.socket API 可用于扩展，我加载了我的扩展，并被告知 Socket API 仅可用于“打包应用程序”。

有谁知道发生了什么，以及扩展是否会获得该功能（回来，因为我认为他们在 .experimental 中时可以访问）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-17T21:13:50.643

来自[Chrome 文档](http://developer.chrome.com/apps/app_network.html)：

> **打包的应用程序**可以充当 TCP 和 UDP 连接的网络客户端。

不，扩展无法访问套接字 API，而且他们不可能得到它。

你的困惑是可以理解的，因为谷歌所谓的“打包应用程序”过去只不过是在主屏幕上带有图标的美化扩展。然而，谷歌现在正在扩展程序和应用程序之间拉开更大的鸿沟。

扩展程序曾经具有应用程序功能的子集，但现在每个扩展程序都具有相互排斥的功能。扩展旨在增强正常的 Web 浏览，而应用程序旨在用作不干扰正常浏览的独立工具。如果查看[应用程序](http://developer.chrome.com/apps/api_index.html)和[扩展](http://developer.chrome.com/extensions/api_index.html)程序的 API 列表，您会发现列表*大不相同*：应用程序具有强大的以硬件和操作系统为中心的 API，例如`socket`、`usb`和`bluetooth`，而扩展程序垄断了以浏览器为中心的 API像`tabs`,`cookies`和`bookmarks`.

# java - 值未填充到 gemfire 缓存中

> ID：13921971
> 
> 赞同：0
> 
> 时间：2012-12-17T20:49:55.180
> 
> 标签：java, spring, gemfire, spring-data-gemfire

我有 2 个 xml 配置文件，如下所示

**应用上下文.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:gfe="http://www.springframework.org/schema/gemfire" xmlns:util="http://www.springframework.org/schema/util"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/gemfire http://www.springframework.org/schema/gemfire/spring-gemfire.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">

    <context:component-scan
        base-package="com.mycompany.data.testcache" />
    <context:annotation-config />

    <import resource="test-cache.xml" />

    <bean id="testCache" class="org.springframework.data.gemfire.GemfireTemplate">
        <property name="region" ref="region1" />
    </bean>

</beans> 
```

**测试缓存.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:gfe="http://www.springframework.org/schema/gemfire"
    xmlns:util="http://www.springframework.org/schema/util" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/gemfire http://www.springframework.org/schema/gemfire/spring-gemfire.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd 
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <context:component-scan
        base-package="com.mycompany.data.testcache" />
    <context:annotation-config />

    <util:properties id="props" location="classpath:test-cache.properties">
        <prop key="log-level">info</prop>
    </util:properties>

    <gfe:cache id="gemfire-cache" properties-ref="props" />

    <gfe:local-region id="region1" cache-ref="gemfire-cache">
        <gfe:cache-listener ref="listener" />
    </gfe:local-region>

    <bean id="listener"
        class="com.mycompany.data.TestLoggingCacheListener" />
</beans> 
```

我有一个名为**TestCache.java的测试类**

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:app-context.xml" })
public class TestCache {

    @Autowired
    GemfireTemplate testCache;

    @Test
    public void testgetSomeValues() {

        HashMap<String, String> map1 = retrieveSomeValues();

        HashMap<String, String> map2 = retrieveSomeValues();

        assertEquals(Map1, Map2);
    }

    @Cacheable(value = "testCache")
    public HashMap<String, String> retrieveSomeValues() {

        HashMap<String, String> obj = new HashMap<String, String>();
        obj.put("600", "Auto");
        obj.put("601", "Life");

        return obj;
    }

} 
```

但我没有看到实际上没有缓存到该区域中。对于retrieveSomeValues() 方法的两个方法调用，该方法实际上正在执行，而不是从缓存中检索值。

我能知道上面的测试课有什么问题吗？我可以知道如何使用 @Cacheable 来缓存able retriveSomeValues() 方法的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T00:54:27.240

您需要 Spring Framework 的缓存支持才能使用 @Cacheable。有一个 Spring GemFire 快速入门示例，展示了如何使用带有 @Cacheable 注释的 GemFire：

[https://github.com/SpringSource/spring-gemfire-examples/tree/master/quickstart/spring-cache](https://github.com/SpringSource/spring-gemfire-examples/tree/master/quickstart/spring-cache)

您将在那里找到所需的一切：应用程序的 xml 配置、缓存、gemfire 和使用注释的代码。

# windows - 在 Windows 环境中编辑文件夹白名单上的文件

> ID：13921972
> 
> 赞同：1
> 
> 时间：2012-12-17T20:49:57.197
> 
> 标签：windows, powershell, batch-file, vbscript

我有一个文件夹，里面有约 4000 个文件夹。在每个文件夹中都有一个我希望编辑的 .ini 文件。在 .ini 文件中，我想搜索一个字符串并将其替换为另一个字符串。

需要注意的是，我有一个特定的文件夹列表，如果你愿意的话，还有一个白名单。我只想更改我在白名单中指定的文件夹内的 .ini 文件，而不是其余文件夹。

我的平台是Windows。

示例文件夹结构：

```
Parent Folder
    Folder1
        file.ini
            Variable1=TOMATO
            ^^^^^^^^^^^^^^^^^ > Replace with: Variable1=Lettuce    
    Folder2
        file.ini
            DO NOTHING 
    Folder3
        file.ini
            Variable1=TOMATO
            ^^^^^^^^^^^^^^^^^ > Replace with: Variable1=Lettuce    
    FolderA
        file.ini
            DO NOTHING 
    FolderB
        file.ini
            DO NOTHING 
    FolderC
        file.ini
            Variable1=TOMATO
            ^^^^^^^^^^^^^^^^^ > Replace with: Variable1=Lettuce 
```

上述文件夹结构的变量文件夹列表如下：

*   文件夹 1
*   文件夹 3
*   文件夹C

我的变量是：

*   搜索：变量 1=番茄
*   替换为：变量 1=生菜

我尝试使用 WinGrep 等，但我只看到一行排除而不是能够调用上述文件夹列表。我对这个一次性脚本的生产运行将从 ~4000 个文件夹中拉出 ~1000 个文件夹，因此无法进行手动处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:31:59.123

一个计划（独立于实现语言）：

1.  打开白名单文件进行读取
2.  对于每个非空行，为 .ini 文件构建一个完整/完整的文件规范
3.  如果 .ini 文件存在，将其加载到内存中，进行替换，然后将其写回

如果您想要 VBScript 版本，请在 .ini 文件和替换文件中发布一些详细信息。

**更新：**

让您入门的 VBScript 代码：

```
 Const csFrom = "Variable1=TOMATO"
  Const csTo = "Variable1=Lettuce"
  Dim oFS  : Set oFS  = CreateObject("Scripting.FileSystemObject")
  Dim sDir : sDir     = oFS.GetAbsolutePathName("..\test\13921972")
  Dim tsFL : Set tsFL = oFS.OpenTextFile(oFS.BuildPath(sDir, "whitelist.txt"))
  Do Until tsFL.AtEndOfStream
     Dim sFSpec : sFSpec = Trim(tsFL.ReadLine())
     If "" <> sFSpec Then
        WScript.Echo "wl:", sFSpec
        sFSpec = oFS.BuildPath(sDir, oFS.BuildPath(sFSpec, "some.ini"))
        WScript.Echo "fs:", sFSpec
        If oFS.FileExists(sFSpec) Then
           Dim sAll : sAll = oFS.OpenTextFile(sFSpec).ReadAll()
           WScript.Echo sAll
           oFS.CreateTextFile(sFSpec, True).Write Replace(sAll, csFrom, csTo)
           WScript.Echo oFS.OpenTextFile(sFSpec).ReadAll()
        End If
     End If
  Loop
  tsFL.Close 
```

两次运行的输出：

```
wl: dir1
fs: E:\trials\SoTrials\answers\13415663\test\13921972\dir1\some.ini
Variable0=NoliMeTangere
Variable1=TOMATO
Variable2=NoliMeTangere

Variable0=NoliMeTangere
Variable1=Lettuce
Variable2=NoliMeTangere

wl: dir1
fs: E:\trials\SoTrials\answers\13415663\test\13921972\dir1\some.ini
Variable0=NoliMeTangere
Variable1=Lettuce
Variable2=NoliMeTangere

Variable0=NoliMeTangere
Variable1=Lettuce
Variable2=NoliMeTangere 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:41:56.307

我将把它作为 Powershell 解决方案提交。它需要所有文件的静态“之前”和“之后”字符串。如果不是这种情况，您可能需要使用哈希表来存储值。如您所见，它还要求白名单每行有一个路径，并且路径是绝对的（例如 C:\windows）

```
$before = "this string is getting replaced"
$after = "this is my replacement"
$whitelist = [array](Get-content "path\to\whitelist")

foreach ($path in $whitelist) {
    $files = Get-ChildItem *.ini -Path $path -Recurse
    foreach ($file in $files) {
        (Get-Content $file.fullname).Replace($before,$after) | set-content $file.fullname
    }
} 
```

Whitelist.txt 示例：

```
C:\test\whats up
C:\test\1
C:\test\2 
```

# asp.net-mvc - MVC 部分视图来创建/列出项目和重定向

> ID：13921977
> 
> 赞同：1
> 
> 时间：2012-12-17T20:50:09.850
> 
> 标签：asp.net-mvc, redirect, asp.net-mvc-partialview

我想要实现的基本上是在顶部显示一个输入新帖子的表单，然后在表单下方显示一个已经存在的帖子列表。此外，我试图让这个视图有点通用，以便它可以显示不同类型的帖子。

需要明确的是，我所说的帖子是指 Facebook 状态帖子，而不是 Http-Post。

想象一下，您有一个显示所有帖子的主页，然后您有一个个人资料页面，该页面仅显示与该个人资料相关的帖子。

所以我有我的 _Posts 部分视图，如下所示：

```
@model IEnumerable<Post>

@Html.Partial("_CreatePost", new Post())

@foreach (var item in Model)
{
    <div class="Post">
        <h5>@item.Title</h5>
        <p>@DateTime.Now.Subtract(item.Date).ToString("mm") minutes ago</p>
        <p>@item.Content</p>
    </div>
} 
```

部分视图的代码是：

```
@model MVC_Test_CRUD.Models.Post

<script src="~/Scripts/jquery-1.7.1.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>

@using (Html.BeginForm("Create","Post")) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Post</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Title)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Title)
            @Html.ValidationMessageFor(model => model.Title)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Content)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Content)
            @Html.ValidationMessageFor(model => model.Content)
        </div>

            <p>
                <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

我成功地显示了一个帖子列表，我也可以创建新帖子。

我的控制器中还有一个标准的创建操作，这会导致

```
return RedirectToAction("Index") 
```

如果创建成功。所以我的问题是如何根据位置向控制器发送有关重定向位置（主页/索引或配置文件/索引或其他地方）的附加参数

```
@Html.Partial("_CreatePost", new Post()) 
```

被插入。

# javascript - 需要单独页面上的视频

> ID：13921978
> 
> 赞同：0
> 
> 时间：2012-12-17T20:50:12.287
> 
> 标签：javascript, html, html5-video

```
<!DOCTYPE html>
<html> 
<head>
    <title>World Map</title>
    <body>
<p>Click on a clickable area of the map for more info.</p>
<img src ="worldmap.gif" width="576" height="307" alt="World Map" usemap="#worldmap">

<map name="worldmap">

<area shape="rect" coords="265,49,279,64" href="ukanthem.mp4" alt="anthem" onclick="playVideo()"> 
<video id="video1" class="true" autoplay controls width="420">
<source src="ukanthem.mp4" type="video/mp4">
<source src="ukanthem.mp4" type="video/ogg">
</video>
<video id="video2" class=flase" width="420" controls>
<source src="beef.mp4">
</video>
<button id="hideButton" onclick="swap();">Switch</button>

<script>
var flag=true;
function swap() {
var myVideo1=document.getElementById("Video1");
var myVideo2=document.getElementById("video2");
flag=!flag;
video1.setAttribute("class", flag);
video2.setAttribute("class", !flag);
if (flag) {
    video2.pause();
    video1.play();
} else {
    video1.pause();
    video2.play();
}
}
</script>

</map>

</body>
</head>
</html> 
```

我正在创建一个交互式 gif 图像，单击某些区域后，它会将您带到播放视频的页面，然后您可以切换到另一个视频，我的视频与交互式地图显示在同一页面上。我希望它们位于单独的页面上，单击协调区域即可访问该页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:55:12.097

我会将 href 更改为不同的页面而不是 mp4 文件，并将要播放的 mp4 添加为参数。让其他页面读取参数并显示视频。

例如：

```
<area shape="rect" coords="265,49,279,64" href="playVideo.php?video=ukanthem.mp4" alt="anthem" target="_blank"> 
```

您可以使用纯 html 文件代替 php 文件，并让 javascript 从 URL 读取参数。

# php - 如何使用会话？

> ID：13921979
> 
> 赞同：-3
> 
> 时间：2012-12-17T20:50:11.933
> 
> 标签：php, html, session

你好我有一个问题如何使用会话。

我想更改网站的语言。所以语言设置的逻辑如下：

调用我的网站时，将检查是否有 browser_accept_language。如果有语言设置，它将被用作首选语言，否则设置默认语言。在下一步中，将检查是否已经在会话中存储了它的设置。如果语言有会话值，则首选语言将更改为会话条目。

好的，这是逻辑部分。现在我尝试编码。问题是它似乎不起作用，我不知道为什么。

所以php是：

```
<?PHP       
    session_start();

    header ("Content-Type: text/html; charset=utf-8");

    include_once "scripts/db_connect.php";

if (isset($_SERVER["HTTP_ACCEPT_LANGUAGE"])){
    $max   = 0.0;
    $languages = explode(",", (strtolower($_SERVER["HTTP_ACCEPT_LANGUAGE"])));
    foreach($languages as $language){
        $language = explode(';', $language);
        $q    = (isset($language[1])) ? ((float) $language[1]) : 1.0;
        if ($q > $max){
            $max = $q;
            $pref_language = $language[0];
        }
    }
    $pref_language = trim($pref_language);
}

$_SESSION['language'] = $pref_language_changed;

if (isset ($_SESSION['language']) ){

    $pref_language = $pref_language_changed;

}... 
```

然后是一些用于 mainwrapper 的 html 页脚：

```
if ($pref_language === "af" OR $pref_language === "en"{
    $footer = "footer1";
    }else{
        $footer = "footer2";
    }

include_once "../scripts/".$footer.".php"; 
```

页脚本身是：

```
 ... <ul class="flag">
                <li id="'.$language_flag.'">
                    <ul class="drop_down">
                        <form action="'.$_SERVER['PHP_SELF'].'" method="post">
                            <a href="/foo"><li id="one"><div>language1</div></li></a>
                            <a href="/bar"><li id="two"><div>language2</div></li></a>
                        </form>
                    </ul>
                </li>
             </ul>...
<!--Footer -->';    

if (isset($_POST['one'])){
    $_SESSION['language'] = "language1";
    }
if (isset($_POST['two'])){
    $_SESSION['language'] = "language2";
    }
?> 
```

这就是我所有页面的基础。

如果有人可以告诉我如何使用会话，我将不胜感激。

多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:58:36.477

试试这个

```
<ul class="drop_down">
    <form action="'.$_SERVER['PHP_SELF'].'" method="post">
        <li><input type="submit" name="one" value="language1"></li>
        <li id="two"><input type="submit" name="one" value="language2"></li>
    </form>
 </ul> 
```

此外，当您想链接`<li>` 使用时

```
<li><a href="/foo">Link</a></li> 
```

不要在外部使用 a href`<li>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:19:03.720

在通过 POST 提交语言后，您必须重新加载页面，因为您在加载新语言之前阅读它！其他选项是在实际检查之前移动设置会话的代码。

杰弗里斯的回答也是对的。您的原始代码根本没有发送 lang。

# wpf - WPF XAML 设计器崩溃

> ID：13921984
> 
> 赞同：2
> 
> 时间：2012-12-17T20:50:27.433
> 
> 标签：wpf, xaml, exception, designer

我有一个窗口，里面唯一的东西就是一个TextBlock。每次我更改任何东西时，我都会遇到可笑的设计师例外情况。我开始删除所有试图找出这个错误的罪魁祸首的东西。现在我什么都没有了，但设计师一直在抛出异常。

```
<Window x:Class="Company.Product.Views.About"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Height="397"
    Width="658">
<TextBlock>Test</TextBlock>
</Window> 
```

后面的代码：

```
/// <summary>
    /// Interaction logic for Window1.xaml
    /// </summary>
    public partial class About : Window
    {
        public About()
        {
            InitializeComponent();
        }
    } 
```

如果我“单击此处重新加载设计器”，则会显示窗口，但是如果我修改 TextBlock 的文本，则会出现异常

**例外**

```
System.ArgumentNullException
Value cannot be null.
   at System.RuntimeType.MakeGenericType(Type[] instantiation)
   at Microsoft.VisualStudio.Shell.Design.VsTargetFrameworkUtil.GetRuntimeType(Type type)
   at Microsoft.VisualStudio.Shell.Design.VsTargetFrameworkType.TryGetRuntimeType()
   at Microsoft.VisualStudio.Shell.Design.VsTargetFrameworkUtil.EnsureRuntimeType(Type type)
   at Microsoft.VisualStudio.Shell.Design.VsTargetFrameworkProvider.GetRuntimeType(Type reflectionType)
   at MS.Internal.Package.VSIsolationProviderService.RemoteReferenceProxy.VsReflectionResolver.GetRuntimeType(Type reflectionType)
   at Microsoft.Windows.Design.Metadata.ReflectionMetadataContext.CachingReflectionResolver.GetRuntimeType(Type reflectionType)
   at Microsoft.Windows.Design.Metadata.ReflectionMetadataContext.Microsoft.Windows.Design.Metadata.IReflectionResolver.GetRuntimeType(Type reflectionType)
   at MS.Internal.Metadata.ClrType.get_RuntimeMember()
   at MS.Internal.Metadata.ClrMember`1.Microsoft.Windows.Design.Metadata.Reflection.IReflectionMember.get_MemberInfo()
   at MS.Internal.Metadata.ClrType.Equals(Object obj)
   at System.Collections.Generic.ObjectEqualityComparer`1.Equals(T x, T y)
   at System.Collections.Generic.Dictionary`2.FindEntry(TKey key)
   at Microsoft.Windows.Design.Metadata.Xaml.XamlExtensionImplementations.<>c__DisplayClass5.<FindAttachableProperties>b__4(ITypeMetadata walkType)
   at MS.Internal.Design.Metadata.Xaml.XamlType.<GetAllAttachableProperties>d__7.MoveNext()
   at MS.Internal.Design.Metadata.Xaml.XamlType.<FindAttachableProperties>d__0.MoveNext()
   at Microsoft.Windows.Design.Metadata.Xaml.XamlExtensionImplementations.<FindAttachableProperties>d__7.MoveNext()
   at MS.Internal.VirtualModel.VirtualModelPropertyCollection.<GetUncachedProperties>d__0.MoveNext()
   at System.Linq.Buffer`1..ctor(IEnumerable`1 source)
   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
   at MS.Internal.VirtualModel.VirtualModelPropertyCollection.GetEnumerator()
   at MS.Internal.Designer.PropertyEditing.Model.Properties.ModelPropertyMerger.<GetFirstProperties>d__0.MoveNext()
   at MS.Internal.Designer.PropertyEditing.Views.PropertyEntryReader.RedraftEntries(IPropertyViewManager viewManager, Selection selection, Boolean attachedOnly, IEventCodeBehindProxy eventCodeBehindProxy, CategoryList categoryList)
   at MS.Internal.Designer.PropertyEditing.PropertyInspector.UpdateCategories(Selection selection, Boolean attachedOnly, IEntryReader entryReader)
   at MS.Internal.Designer.PropertyEditing.PropertyInspector.RefreshPropertyList(Boolean attachedOnly)
   at MS.Internal.Designer.PropertyEditing.PropertyInspector.OnSelectionChangedIdle()
   at MS.Internal.Designer.PropertyEditing.PropertyInspector.OnSelectionChangedIdleForced(Object sender, EventArgs e)
   at System.Windows.Threading.DispatcherTimer.FireTick(Object unused)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler) 
```

我没有办法调试问题是什么，坦率地说，考虑到这个简单的例子应该没​​有任何东西应该让设计者崩溃，我感到很沮丧。有任何想法吗？

**更新**

重新安装更新重新加载后，问题暂时消失了。现在问题又回来了。

实际上，我不确定问题是否消失了。我还尝试了 VS 安全模式、/resetsettings，并删除了 VS 文件夹中的几个缓存文件夹。

**更新2**

[这是一个显示问题的截屏视频，](http://www.screencast.com/t/BNygIXHS)请原谅我的分辨率，我是纵向的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:54:30.627

好吧，我相信我解决了这个问题。我创建了一个新的可执行项目，将旧项目中的所有内容复制到新项目中，并尝试逐项删除或添加项目，以找出该项目的特别之处。

事实证明，我引用了 Actipro 的几个 3rd 方库。早些时候，我已经升级了库并将它们复制到 /lib 文件夹并从那里引用它们。但是其中一个参考被遗忘了，我相信它是针对 GAC 中的旧版本而不是 /lib 文件夹。我想我基本上引用了两个不同版本的 Actipro 共享库。

**在删除了对第 3 方库旧版本的错误引用，并将其更新为与其他库一样的正确版本后，问题就消失了**

奇怪的是，有问题的 Window 没有使用该库中的任何组件或任何东西。可能是它试图解析库中的附加属性（来自堆栈跟踪）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:23:21.050

尝试`TextBlock`在属性中设置 ' 的内容`TextBlock.Text`：

```
<Window x:Class="Company.Product.Views.About"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Height="397"
Width="658">
     <TextBlock Text="Test"/>
</Window> 
```

也许这就是问题所在。

# core-plot - 在 y 轴的零值上画一条线

> ID：13921990
> 
> 赞同：-1
> 
> 时间：2012-12-17T20:50:54.907
> 
> 标签：core-plot

直升机，

是否可以在 y 轴的零值上画一条线？

因为我有负值，所以我将轴的正交值更改为数据源上的最低值。

谢谢

![图形](../Images/a5503241c35767b86b42ba1e21aa5678.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T00:39:39.380

制作第二个 x 轴并将其定位为零。您可以省略标签和刻度线以获取轴线。*请参阅Plot Gallery*应用程序中的轴演示，了解如何将其他轴添加到核心绘图图中的示例。

# jquery - 十进制掩码

> ID：13921997
> 
> 赞同：1
> 
> 时间：2012-12-17T20:51:25.717
> 
> 标签：jquery, mask

我正在使用[jQuery 屏蔽输入插件](http://digitalbush.com/projects/masked-input-plugin/)。

我需要为百分比的十进制数定义一个掩码，以便以下所有输入都是有效的 -

*   1
*   10
*   1.1
*   1.10
*   10.1
*   10.10
*   99.99
*   100

百分比不能大于 100，因此 100.00 有效，但 100.01 无效。

```
$("#" + enum.WomenInSororitiesId).mask("9?9.99"); //valid till 99.99 
```

使用上面的代码，我得到了至少一个数字，但是对于带十进制的 1-9，用户需要将其输入为 01.00 或 02.00。

我怎样才能返工这个面具，以便它可以在上述情况下工作？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:52:05.167

无法为此使用屏蔽输入插件。

您可以使用验证函数来验证带有小数位的百分比字段，如该问题的许多答案中所述：

[验证包含浮点数的文本字段是有效的百分比值吗？](https://stackoverflow.com/questions/8579267/validating-a-text-field-containing-a-float-is-a-valid-percentage-value)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:20:35.140

这可以通过声明允许字符为小数点或数字的自定义掩码定义来完成。例如：

```
$.mask.definitions['~']='[0-9|.]';
$("input.abcd").mask("9?~9"); 
```

这说明：

*   第一个字符必须是数字
*   后续字符是可选的
*   第二个字符可以是 [0-9] 或 .
*   第三个字符可以是 [0-9] 但不是。（这可以防止像“5.2”这样的奇怪输入。）

此方法的一个缺点是，如果您使用以下掩码：

```
$.mask.definitions['~']='[0-9|.]';
$("input.abcd").mask("9?~~~9"); 
```

然后像“5...2”这样的输入是有效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:59:25.347

这不是一个答案，但似乎你不能。作为安慰奖，这里有一个小代码来测试你的值，以确保它是数字并且 < 100。

```
$("#" + enum.WomenInSororitiesId).change(function () {
    val = $(this).val();
    if(!$.isNumeric(val) || val-0 > 100) {
        alert("Something went horribly, horribly wrong.");
    }
}); 
```

# ocaml - 此表达式具有 Sast.var_decl 类型，但预期为 Ast.var_decl 类型的表达式（使用 Ocaml 编写编译）

> ID：13921998
> 
> 赞同：1
> 
> 时间：2012-12-17T20:51:29.527
> 
> 标签：ocaml

我正在使用 Ocaml 编写一个小型编译器。我想对 Ast 进行类型检查，然后放入 Sast。

但我总是得到如下错误：

```
 File "typecheck_debug.ml", line 93, characters 28-35:
    Error: This expression has type Sast.var_decl
           but an expression was expected of type Ast.var_decl 
```

代码是：

```
 let rec trans_lval env = function
          Ast.Id(n) -> let vdecl = (find_variable env.scope n) in
                       Sast.Id(vdecl), vdecl.vvtype 

    ocamllex scanner.mll
    ocamlyacc parser.mly
    ocamlc -c ast.mli
    ocamlc -c parser.mli
    ocamlc -c scanner.ml
    ocamlc -c parser.ml
    ocamlc -c sast.mli
    ocamlc -c typecheck_debug.ml 
```

我不懂为什么。我的项目流程有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:07:48.437

仅从那一点代码很难分辨，但听起来像是`Sast.Id`期望 type 的值`Sast.var_decl`作为其参数，但`find_variable`产生的 value 为 type `Ast.var_decl`，所以这就是`vdecl`.

我在这里假设第 93 行，字符 28-35 是`(vdecl)`. 如果不是这种情况，请澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:05:27.367

另一种可能性是问题不存在，而是在函数的另一个分支中`trans_lval`（你没有显示，但必须有其他的，你的 ast 不能只由`Id`s 组成）。检查代码的哪些部分是罪魁祸首的一种简单方法包括：

1.  向您的函数添加显式类型注释，例如：

    ```
    let rec trans_lval : Ast.lval -> Sast.lval = function
       (*  code follows *) 
    ```

    （这可能是错误的，我显然无法从您提供的信息中分辨出您的功能的真实类型）。

2.  注释掉你的功能代码，直到错误消失。当它发生时，您知道至少在您注释掉的最后一段代码中存在冲突。您可以尝试解决该问题。

3.  之后取消注释其他注释位，并解决该过程中出现的任何其他问题。