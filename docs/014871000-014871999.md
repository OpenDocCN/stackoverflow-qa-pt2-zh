# StackOverflow 问答 14871000-14871999

# android - 选择器在android中第一次onclick时不起作用

> ID：14871000
> 
> 赞同：1
> 
> 时间：2013-02-14T08:55:07.733
> 
> 标签：android, radio-button, selector

我有四个单选按钮，它们是问题选项。
我必须在这里应用 onclick 监听器。
我希望如果用户单击正确答案背景使用第一个选择器，如果选择错误答案第二个选择器工作并且具有正确答案的单选按钮也显示其按下事件，我必须在运行时设置选择器。
而且我有多个问题的单页。问题是选择器在我第一次单击单选按钮时无法正常工作。第二次它工作正常。但是如果答案错误，我怎么能调用正确答案单选按钮的压迫。

这是我的选择器代码：-

```
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
      <item android:state_selected="false" android:state_pressed="false" 
            android:drawable="@drawable/brown"  />
      <item android:state_pressed="true" android:drawable="@drawable/green"  />
      <item android:state_selected="true" android:state_pressed="false" 
            android:drawable="@drawable/green"  />
 </selector> 
```

一个单选按钮的代码，但我有四个这样的四个单选按钮的案例：-

```
 case R.id.radio0:
            clickSound();
            if (radio0.isChecked()) {
                user_ans = radio0.getText().toString().trim();
                if (correct_answer.equalsIgnoreCase(user_ans)) {

                    radio0.setBackgroundResource(R.drawable.green_selector_brown);
                    ern_score += 1000;
                    score.setText(String.valueOf(ern_score));
                } else {
                    radio0.setBackgroundResource(R.drawable.red_selector_brown);
                }
                ++ctr;
            }
            break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:30:06.427

```
radio3.setBackgroundDrawable(getResources().getDrawable(R.drawable.red_selector_gray)); 
```

使用它会解决你的问题

# c++ - 为什么用户程序中动态分配的缓冲区会使内核驱动程序崩溃？

> ID：14871003
> 
> 赞同：1
> 
> 时间：2013-02-14T08:55:33.943
> 
> 标签：c++, windows, memory-management, driver, kernel

我有一个分配缓冲区的程序，该缓冲区的指针通过自定义 IOCTL 传递给内核驱动程序。在驱动程序中，我得到一个 Mdl 并使用“MmGetSystemAddressForMdlSafe”锁定用户程序缓冲区的页面，然后使用 Mdl 填充用户程序缓冲区。

如果在用户程序中缓冲区是一个普通数组，驱动程序总是按它应该的方式工作。（WORD 缓冲区[256]，其中 word 是无符号短整数）

如果用户程序缓冲区不时使用 new 关键字`(WORD *buffer = new WORD[256])`或 malloc 关键字分配，我会收到 BSOD 并且错误是“非分页区域中的页面错误”。`(WORD *buffer=(WORD*) malloc(sizeof(*buffer)*256)))`

为什么？

谢谢！

编辑（附加细节）：

在驱动程序中我使用`MmGetSystemAddressForMdlSafe`这种方式：

`PVOID p_buffer = MmGetSystemAddressForMdlSafe(Irp->MdlAddress, HighPagePriority);`

Irp 是我在处理`IRP_MJ_DEVICE_CONTROL`MajorFunction 时作为第二个参数接收的 PIRP。

在我检查它`p_buffer`不为空之后，我使用该指针来写入用户缓冲区：

`READ_PORT_BUFFER_USHORT((PUSHORT)(USHORT)current_port.address, (PUSHORT)p_buffer, 256)`

IOCTL 定义：

```
#define IOCTL_TEST_READPORT      CTL_CODE(FILE_DEVICE_TEST,  \
    TEST_IOCTL_INDEX + 0,   \
    METHOD_OUT_DIRECT,         \
    FILE_ANY_ACCESS) 
```

处理的驱动程序函数`IRP_MJ_DEVICE_CONTROL`：

```
 NTSTATUS TESTDispatch(IN PDEVICE_OBJECT DeviceObject, IN PIRP Irp)
{
PIO_STACK_LOCATION IrpStack;
ULONG              input_buffer_size;
ULONG              output_buffer_size;
ULONG              control_code;
PVOID              p_buffer;
NTSTATUS           nt_status;
struct             port current_port;

UNREFERENCED_PARAMETER(DeviceObject);
PAGED_CODE();

Irp->IoStatus.Status      = STATUS_SUCCESS;
Irp->IoStatus.Information = 0;

IrpStack = IoGetCurrentIrpStackLocation(Irp);

switch (IrpStack->MajorFunction)
{

case IRP_MJ_DEVICE_CONTROL:

    control_code = IrpStack->Parameters.DeviceIoControl.IoControlCode;

    switch (control_code)
    {
        case IOCTL_TEST_READPORT:
            p_buffer = MmGetSystemAddressForMdlSafe(Irp->MdlAddress, HighPagePriority);
            input_buffer_size  = IrpStack->Parameters.DeviceIoControl.InputBufferLength;

            if (!p_buffer) 
            {
                nt_status = STATUS_INSUFFICIENT_RESOURCES;
                break;
            }
            if (input_buffer_size)
            {
                memcpy (&current_port, Irp->AssociatedIrp.SystemBuffer, input_buffer_size);
                switch (current_port.size)
                {
                case 1:
                    current_port.value = (ULONG)READ_PORT_UCHAR((PUCHAR)(USHORT)current_port.address);
                    memcpy (p_buffer, &current_port.value, sizeof(current_port.value));
                    Irp->IoStatus.Information = sizeof(current_port.value);
                    break;
                case 0xF0:
                    READ_PORT_BUFFER_USHORT((PUSHORT)(USHORT)current_port.address, (PUSHORT)p_buffer, 256);
                    Irp->IoStatus.Information = sizeof(current_port.value);
                    break;
                case 2:
                    current_port.value = (ULONG)READ_PORT_USHORT((PUSHORT)(USHORT)current_port.address);
                    memcpy (p_buffer, &current_port.value, sizeof(current_port.value));
                    Irp->IoStatus.Information = sizeof(current_port.value);
                    break;
                }
            }
            else
                Irp->IoStatus.Status = STATUS_INVALID_PARAMETER;
                break;
        case IRP_MJ_CREATE:
            KdPrint(("IRP_MJ_CREATE"));
            break;

        case IRP_MJ_CLOSE:
            KdPrint(("IRP_MJ_CLOSE"));
            break;

        default:
            Irp->IoStatus.Status = STATUS_INVALID_PARAMETER;
            break;
    }
    break;
}
nt_status = Irp->IoStatus.Status;
IoCompleteRequest (Irp, IO_NO_INCREMENT);
return nt_status;
} 
```

相关案例在`case 0xF0:`里面`case IOCTL_TEST_READPORT:`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:20:21.403

根据我的理解，您误解了`MmGetSystemAddressForMdlSafe`. [根据此处的文档](https://docs.google.com/viewer?a=v&q=cache%3ai3FRelP1tJwJ%3adownload.microsoft.com/download/e/b/a/eba1050f-a31d-436b-9281-92cdfeae4b45/mem-mgmt.doc+windows+Memory+descriptor+list&hl=en&gl=uk&pid=bl&srcid=ADGEESh2ZFm1eYLcVhKdyww6x0_JPA1u3HGrcED2DdZ6U_fKqVstz_XtmEhpfTW_Mzt0--t12KTCmmJMu_CKNspXqpqFWdqRnESlGyL6ufTHnYPu--ZiRLRjGIeAF0JQq_HLKYonDZ_7&sig=AHIEtbRvkjuRvrbgOcJia6X_Dt6LbwqrEA)，您可以使用此函数来获取由 MDL（内存描述符列表）描述的虚拟地址。

> . 如果驱动程序必须使用虚拟地址来访问 MDL 描述的页面，它必须使用 MmGetSystemAddressForMdlSafe 将这些页面映射到系统地址空间

同一份文件也这样说：

> 要使用虚拟地址访问 MDL 描述的缓冲区，驱动程序调用 MmGetSystemAddressForMdlSafe 将缓冲区映射到系统空间。
> 
> **MmGetSystemAddressForMdlSafe**：将 MDL 描述的物理页面映射到系统空间，并返回 MDL 的虚拟地址。返回的虚拟地址可以**在任何 IRQL 和任何进程上下文中使用。**

如果您查看[MSDN 文档](http://msdn.microsoft.com/en-gb/library/windows/hardware/ff554559%28v=vs.85%29.aspx)，`MmGetSystemAddressForMdlSafe`您将看到以下行：

> MmGetSystemAddressForMdlSafe 宏为指定的 MDL 描述的缓冲区返回一个非分页系统空间虚拟地址。

它说这个函数返回一个由 MDL 描述的缓冲区的**非分页**虚拟地址。

MDL的定义如下：

> 内存描述符列表 (MDL) 描述了**物理内存**中的页面列表。

这是物理内存中页面的描述，而不是虚拟内存。您分配的缓冲区`new`已经有虚拟地址，试图在上面使用`MmGetSystemAddressForMdlSafe`，这是错误的。您应该使用该函数从 MDL 中获取虚拟地址，而不是从虚拟地址范围中获取 MDL。

现在，继续解释`page fault in non-paged area`：

现在，如果您考虑一下，很可能您的缓冲区分配给`new`或`malloc`已经在分页内存区域中（实际上，看到它在用户空间中，这是极有可能的），这意味着尝试获取此缓冲区的虚拟地址（这已经是错误的，因为它不是 MDL），将导致*非分页区域中的页面错误*，因为缓冲区的内存位于分页区域中，而您将其映射到内核中的非分页区域，并且非分页区域不能引起缺页。（很可能与错误的 IRQL 级别有关）

# extjs - 获取分页工具栏ext js 3.4的当前页面

> ID：14871006
> 
> 赞同：0
> 
> 时间：2013-02-14T08:55:44.197
> 
> 标签：extjs, pagination, paging, extjs3

我正在使用 EXT JS 3.4

如何获取分页工具栏的当前页面？

例如，分页工具栏显示第 7 页，共 10 页。如何获得值“7”，因为在刷新 Grid 中的记录后我需要当前页面值。

我在网格上刷新后的问题，它返回到第 1 页而不是我离开的第 7 页。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:00:11.013

您可以使用工具栏的光标属性。[请参阅游标属性的文档](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.PagingToolbar-property-cursor)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T20:47:04.127

要检索活动页面（根据文档）：

```
// t is reference to the paging toolbar instance
var activePage = Math.ceil((t.cursor + t.pageSize) / t.pageSize); 
```

但是如果你在做服务器端分页，刷新方法已经通过游标传递到加载方法

```
doRefresh : function() {
    this.doLoad(this.cursor);
} 
```

然后，这将填充加载选项的启动参数，您可以将其与页面大小（将设置为“限制”参数）一起使用，以在刷新时返回正确的页面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T06:03:08.147

grid.filterXml.documentElement.setAttribute("PageNo",pageno);//设置当前页号

grid.filterXml.documentElement.setAttribute("Start", this.cursor);//到当前页面

# objective-c - 指定图标的路径

> ID：14871010
> 
> 赞同：0
> 
> 时间：2013-02-14T08:56:00.113
> 
> 标签：objective-c, xcode, image, cocoa

**好的，这是我的情况：**

*   我的应用程序图形没有复制到 Bundle 的资源文件夹中，而是复制到子文件夹中（例如`Resources/Graphics`）
*   **我需要在info.plist**中正确设置图标——无论是应用程序图标，还是与应用程序关联的文档类型

 ****但是，这里的问题是：**

*   如果我设置`CFBundleIconFile = "myicon";`并`myicon.icns`位于*Resources* bundle 文件夹中，它可以正常工作。
*   如果`myicon.icns`在`Graphics`子文件夹中，那么 - 即使我设置了类似`CFBundleIconFile = "Graphics/myicon";`或的路径`CFBundleIconFile = "Graphics/myicon.icns";`- 它似乎也没有捡起它。

那么，有什么想法可以解决这个问题吗？（显然没有告诉我复制*资源*文件夹中的 .icns）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:06:39.223

在这种情况下，子文件夹无关紧要，`so you dont need to set the full path, only file name, without extension`.

`CFBundleIconFile = "myicon";`

这一行足以让应用程序从包中加载正确的文件。一个项目/包中不允许有多个同名的*图标文件。*您不需要将文件复制到文件`Resources`夹中，唯一的问题是必须将文件添加到项目中。**

# php - 如何使用 PHP 动态生成 HTML 页面？

> ID：14871014
> 
> 赞同：15
> 
> 时间：2013-02-14T08:56:09.947
> 
> 标签：php, html, mysql, dynamic

我有一个页面显示有关属性的信息，基于来自 url 的唯一 ID，在 mysql 数据库中搜索该 ID，从该行获取所有信息等，确实相当标准。

我想知道是否/如何为每个数据库行“创建”一个 html 页面，因为我假设这对 SEO 会更好？拥有多个带有关键字的页面而不是一个动态页面？

我的属性是通过网站上的表单/上传系统添加到数据库中的，我想在上传时创建页面可能是最简单的，但我愿意接受建议！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-05-08T16:39:17.243

以防万一有人想要生成/创建实际`HTML`文件......

```
$myFile = "filename.html"; // or .php   
$fh = fopen($myFile, 'w'); // or die("error");  
$stringData = "your html code php code goes here";   
fwrite($fh, $stringData);
fclose($fh); 
```

享受！

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-14T09:17:12.497

**我想知道是否/如何为每个数据库行“创建”一个 html 页面**？

您只需要创建一个`php`生成 html 模板的文件，改变的是该页面上基于文本的内容。`POST`在该页面中，您可以通过or获取参数（例如行 ID）`GET`，然后从数据库中获取信息。

**我假设这对搜索引擎优化会更好？**

搜索引擎作为谷歌解释`example.php?id=33`和`example.php?id=44`是不同的页面，**是**的，从 SEO 的角度来看，这种方式比单个列表页面更好，所以你至少需要两个 php 文件（`listing.php`和`single.php`），因为从`listing.php`.

**额外建议：**

`example.php?id=33`真的很丑而且对 seo 不是很友好，也许你需要一些 url 重写代码。类似的东西`example/properties/property-name`更好;)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-14T09:12:52.063

根据您的要求，您不必动态生成 html 页面。它可以通过 .htaccess 文件来完成。

这仍然是生成 HTML 页面的示例代码

```
<?php

 $filename = 'test.html';
 header("Cache-Control: public");
 header("Content-Description: File Transfer");
 header("Content-Disposition: attachment; filename=$filename");
 header("Content-Type: application/octet-stream; ");
 header("Content-Transfer-Encoding: binary");
?> 
```

您可以创建任何 .html 、 .php 文件，只需更改文件名的扩展名

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-14T09:21:13.497

您不需要生成任何动态 html 页面，只需使用 .htaccess 文件并重写 URL。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-04-25T08:59:16.753

我一直在从事与此类似的工作，并且我有一些可能对您有所帮助的代码。现场示例在[这里](http://couples.000webhostapp.com/couple/)和下面，是我用来供您参考的代码。

**创建-page.php**

```
<?php

// Session is started.
session_start();

// Name of the template file.
$template_file = 'couples-template.php';

// Root folder if working in subdirectory. Name is up to you ut must match with server's folder.
$base_path = '/couple/';

// Path to the directory where you store the "couples-template.php" file.
$template_path = '../template/';

// Path to the directory where php will store the auto-generated couple's pages.
$couples_path = '../couples/';

// Posted data.
$data['groom-name'] = str_replace(' ', '', $_POST['groom-name']);
$data['bride-name'] = str_replace(' ', '', $_POST['bride-name']);
// $data['groom-surname'] = $_POST['groom-surname'];
// $data['bride-surname'] = $_POST['bride-surname'];
$data['wedding-date'] = $_POST['wedding-date'];
$data['email'] = $_POST['email'];
$data['code'] = str_replace(array('/', '-', ' '), '', $_POST['wedding-date']).strtoupper(substr($data['groom-name'], 0, 1)).urlencode('&').strtoupper(substr($data['bride-name'], 0, 1));

// Data array (Should match with data above's order).
$placeholders = array('{groom-name}', '{bride-name}', '{wedding-date}', '{email}', '{code}');

// Get the couples-template.php as a string.
$template = file_get_contents($template_path.$template_file);

// Fills the template.
$new_file = str_replace($placeholders, $data, $template);

// Generates couple's URL and makes it frendly and lowercase.
$couples_url = str_replace(' ', '', strtolower($data['groom-name'].'-'.$data['bride-name'].'.php'));

// Save file into couples directory.
$fp = fopen($couples_path.$couples_url, 'w');
fwrite($fp, $new_file);
fclose($fp);

// Set the variables to pass them to success page.
$_SESSION['couples_url'] = $couples_url;
// If working in root directory.
$_SESSION['couples_path'] = str_replace('.', '', $couples_path);
// If working in a sub directory.
//$_SESSION['couples_path'] = substr_replace($base_path, '', -1).str_replace('.', '',$couples_path);

header('Location: success.php');

?> 
```

希望这个文件可以帮助并作为参考来启动和提升您的项目。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-10-09T04:34:17.310

它看起来很有趣，但它确实有效。

```
<?php 
$file = 'newpage.html';
// Open the file to get existing content
$current = file_get_contents($file);
// Append a new person to the file
$current .= "<!doctype html><html>
<head><meta charset='utf-8'>
<title>new file</title>
</head><body><h3>New HTML file</h3>
</body></html>
";
// Write the contents back to the file
file_put_contents($file, $current);
?> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-11-18T11:00:14.027

我建议您使用 URL rewrite mod 足以解决您的问题，我有同样的问题，但使用 URL rewrite mod 并获得良好的 SEO 响应。我可以给你一个小例子。例如，您考虑 WordPress，这里的数据存储在数据库中，但使用 URL 重写模块，许多 WordPress 网站从 Google 获得了良好的响应并获得了排名。

示例：没有 url 重写模式的 wordpress url -- domain.com/?p=123 after url rewrite mode -- domain.com/{title of article} like domain.com/seo-url-rewrite-mod

我想你已经明白我想说的话了

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-04-18T18:44:08.137

我将更新代码以包含更改，并对其进行注释，以便您可以清楚地看到发生了什么......

```
<?php   
include("templates/header.htm");   

// Set the default name 
$action = 'index'; 
// Specify some disallowed paths 
$disallowed_paths = array('header', 'footer'); 
if (!empty($_GET['action'])) { 
    $tmp_action = basename($_GET['action']); 
    // If it's not a disallowed path, and if the file exists, update $action 
    if (!in_array($tmp_action, $disallowed_paths) && file_exists("templates/{$tmp_action}.htm")) 
        $action = $tmp_action; 
} 
// Include $action 
include("templates/$action.htm"); 

include("templates/footer.htm"); 
```

# function - 在数据压缩中使用双向哈希

> ID：14871017
> 
> 赞同：-1
> 
> 时间：2013-02-14T08:56:17.000
> 
> 标签：function, hash, compression, two-way

是否可以在数据压缩中使用双向哈希函数。如果是这样，哪种类型的散列函数是合适的。（如果我们可以使用散列函数进行压缩，我们可以发送例如 1GByte（数据）作为仅 1Kbyte（散列），这样我们可以提高带宽并节省存储空间。如果可能，接收者可以恢复来自散列的数据。考虑到如今的计算机和接收器具有非常快的处理器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:48:19.110

不。（这个答案是完全完全足够的，但我添加了这句话以满足 SO 的最小答案长度。）

# delphi - 在 Delphi 2005 中引用 3rd 方组件

> ID：14871019
> 
> 赞同：1
> 
> 时间：2013-02-14T08:56:25.617
> 
> 标签：delphi, delphi-xe2, delphi-2005

我对 Delphi 很陌生，我正在帮助一个团队设置使用 Rad Studio 2005 的构建服务器。

他们刚刚购买了 DevExpress VCL，并想使用这些。我宁愿不在构建服务器上安装该组件，而是将它们作为源代码的一部分并确保项目正在使用该版本。

在 Delphi 中是如何做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:57:49.090

我们将所有第 3 方的东西编译到 BPL 中，然后将该 .bpl 以及相应的 .dcp 和 .dpr/.bdsproje 放入源代码控制中，以便将其交付给构建服务器。效果很好。回想起来，它应该是一系列 BPL，按供应商划分，这样我们就可以升级单个组件/库，而无需对其他所有内容进行回归测试。

# android - getAction Bar 给出空指针异常

> ID：14871022
> 
> 赞同：1
> 
> 时间：2013-02-14T08:56:38.377
> 
> 标签：android, android-actionbar

我想在 android 中使用操作栏。为此我使用

```
getActionBar().setHomeButtonEnabled(true); 
```

在 SetContentView 下方。但是给了我空指针异常。当我只尝试 getActionBar() 它工作正常。

请帮我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T09:03:05.703

如果您的活动没有`title bar`该方法`getActionBar()`可以返回 null。

您有两种选择来解决此问题：

1-`getWindow().requestFeature(Window.FEATURE_ACTION_BAR);`之前添加`setContentView`

2-在您`Manifest`指定一个支持的主题`ActionBar`

还要确保您的目标是正确的 android 版本，例如`<uses-sdk android:minSdkVersion="11" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:04:11.080

getActionBar() 将为预 Honeycomb 设备返回 null。

如果您的目标是 Android v2.3 到 4.2，请尝试[ActionBarSherlock](http://actionbarsherlock.com)。

# android - 在列表视图中列出项目。获取异常

> ID：14871023
> 
> 赞同：0
> 
> 时间：2013-02-14T08:56:38.810
> 
> 标签：android, list, listview

在我的应用程序中，我正在从 sd 卡中检索文件。并将其列在列表视图中。同时列出 m 得到一个异常致命的执行。我该怎么办。请帮帮我。我正在使用 android2.2。相同的代码在 2.3 上运行

下面是代码-

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); 
        //i=getIntent();
        File file = new File(Environment.getExternalStorageDirectory()
            + File.separator
            + "gallery" //folder name
        );
        if (!file.exists()) {
            file.mkdirs();
        }
        ListView lv = (ListView) findViewById(R.id.listview);
        list = getSD();
        lv.setAdapter((ListAdapter) new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, list));//here i'm getting exeception
        Log.d("LOG", "FIRE !!!! " );  

        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                // When clicked, show a toast with the TextView text

                i=new Intent();
                i.putExtra("file","string");
                setResult(RESULT_OK, i);
                finish();
            }

        });
    } 
```

例外-

```
02-14 14:27:38.377: E/AndroidRuntime(395): FATAL EXCEPTION: main
02-14 14:27:38.377: E/AndroidRuntime(395): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.my.zproject/com.my.zproject.ImportFile}: java.lang.NullPointerException
02-14 14:27:38.377: E/AndroidRuntime(395):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
02-14 14:27:38.377: E/AndroidRuntime(395):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-14 14:27:38.377: E/AndroidRuntime(395):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-14 14:27:38.377: E/AndroidRuntime(395):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-14 14:27:38.377: E/AndroidRuntime(395):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-14 14:27:38.377: E/AndroidRuntime(395):  at android.os.Looper.loop(Looper.java:123)
02-14 14:27:38.377: E/AndroidRuntime(395):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-14 14:27:38.377: E/AndroidRuntime(395):  at java.lang.reflect.Method.invokeNative(Native Method)
02-14 14:27:38.377: E/AndroidRuntime(395):  at java.lang.reflect.Method.invoke(Method.java:521)
02-14 14:27:38.377: E/AndroidRuntime(395):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-14 14:27:38.377: E/AndroidRuntime(395):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-14 14:27:38.377: E/AndroidRuntime(395):  at dalvik.system.NativeStart.main(Native Method)
02-14 14:27:38.377: E/AndroidRuntime(395): Caused by: java.lang.NullPointerException
02-14 14:27:38.377: E/AndroidRuntime(395):  at com.my.zproject.ImportFile.onCreate(ImportFile.java:38)
02-14 14:27:38.377: E/AndroidRuntime(395):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:10:20.337

```
Caused by: java.lang.NullPointerException
02-14 14:27:38.377: E/AndroidRuntime(395):  at com.my.zproject.ImportFile.onCreate(ImportFile.java:38) 
```

**在您的方法中的第38**行有一个`NullPointerException`在您的`ImportFile`类中。`onCreate(...)`

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:12:01.133

问题是由于activity_main.xml。请检查正确的文件名/变量名。**

# php - php mysql 多字段搜索空字段

> ID：14871026
> 
> 赞同：0
> 
> 时间：2013-02-14T08:56:47.847
> 
> 标签：php, mysql

```
<?php
if(isset($_POST['submit'])) {
    $fields = array('field1', 'field2', 'field3');
    $conditions = array();
    foreach($fields as $field){
        if(isset($_POST[$field]) && $_POST[$field] != '') {
            $conditions[] = "`".$field."` like '%" . mysql_real_escape_string($_POST[$field]) . "%'";
        }
    }
    $query = "SELECT * FROM customer ";
    if(count($conditions) > 0) {
        $query .= "WHERE " . implode (' AND ', $conditions); 
    }
    $result = mysql_query($query); 
    $say = mysql_num_rows($result);
    if ($say == 0) {
        echo "<tr>no result.</tr>";
        } else {

echo '...';     
    while($row = mysql_fetch_array($result))
  {
  ...

  }}
} ?> 
```

为什么这段代码不检查空字段？它返回具有空字段的结果，即使表单提交为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:28:28.423

我想到的唯一改进是`trim()`：

```
if(isset($_POST[$field]) && trim($_POST[$field]) != '') { 
```

但是，我确信这不是问题。
您有没有想过**将结果查询打印出来**？
看，您正在编写一个程序来创建一些字符串（SQL 查询）。但由于某种原因，对这个程序的直接结果从来没有兴趣，从一些间接结果来判断。可能是它的数据/查询逻辑产生了这样的结果，但查询本身还可以吗？

如果查询仍然错误 - 继续调试。
回显所有涉及的内容 - 打印变量、条件结果、循环中的中间结果 - 并查找不一致之处

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:39:00.387

```
$query = "SELECT * FROM customer ";
if(count($conditions) > 0) {
$query .= "WHERE " . implode (' AND ', $conditions); 
} 
```

当表单提交为空（$conditions=0）时，它会返回所有表（从客户中选择 *）。

添加了一个 else 条件并修复。感谢您的打印查询建议。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T09:05:58.100

检查某些东西是否为空。您可以使用 empty() 方法。

检查这个：

[空的（）](http://php.net/manual/en/function.empty.php)

isset() 仅检查该对象/变量是否已设置。有关更多详细信息，请查看此

[伊塞特（）](http://php.net/manual/en/function.isset.php)

# vb.net - 案例AndAlso组合

> ID：14871033
> 
> 赞同：0
> 
> 时间：2013-02-14T08:57:22.333
> 
> 标签：vb.net

这是代码：

```
Select Case ConnectionId
  Case Is = 40113 AndAlso CompanyId= 88 
```

两者都是正确的，connectionId 是 40113，CompanyId 是 88，但代码转到 Case Else...

有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:03:08.960

您应该设置`OPTION STRICT`为 ON。那么这甚至不会编译，因为您正在尝试使用`Integer`as `Boolean`，这也是您的问题的原因。`40113` 将评估为`True`所以`40113 AndAlso CompanyId= 88`也将评估为`True`，但`ConnectionId = True`将评估为`False`。（你明白为什么你应该设置`STRICT`）

改为使用`If-Else`：

```
If ConnectionId = 40113 AndAlso CompanyId = 88 Then
    ' ... '
Else
    ' ... '
End If 
```

一般来说：如果要比较多个变量，请使用`If`- 而不是`Select Case`.

# backbone.js - 在不丢失对 dom 的引用的情况下重新渲染 Backbone 视图

> ID：14871035
> 
> 赞同：1
> 
> 时间：2013-02-14T08:57:45.720
> 
> 标签：backbone.js, view, rendering

我的骨干有以下问题，我想知道哪种策略更合适

我有一个选择控件，实现为 Backbone 视图，最初加载一个选项说“加载选项”。所以我加载一个只有一个元素的数组并渲染视图。

选项将从集合中加载，因此我触发了一个 fetch 集合。

然后我初始化一个组件，该组件负责显示每个字段的行错误。所以我保存了组合的 dom 元素的引用。

当获取操作最终准备就绪时，我使用从集合中加载的所有选项重新渲染控件。

为了呈现视图，我使用如下内容：

```
render: function() {
  this.$el.html(this.template(this.model.attributes));
  return this;
} 
```

相当标准的骨干东西

问题是第二次渲染视图后dom的引用不再有效，

也许这种情况有点奇怪，但我可以想到很多情况，在这些情况下我必须重新渲染视图而不会丢失它们的 dom 引用（例如，一个依赖于另一个组合的组合）

所以我想知道在不丢失对视图内 dom 元素的所有引用的情况下重新渲染视图的最佳方法是什么......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T09:16:30.470

的目的`Backbone.View`是将对某个 DOM 子树的访问封装到一个定义良好的单个类中。传递对 DOM 元素的引用是一种糟糕的 Backbone 做法，这些应该被视为视图的内部实现细节。

相反，您应该让您的观点直接或通过调解员间接交流。

直接沟通可能类似于：

```
var ViewA = Backbone.View.extend({
  getSelectedValue: function() {
    return this.$(".combo").val()
  }
});

var ViewB = Backbone.View.extend({
  initialize: function(options) {
    this.viewA = options.viewA;
  },
  doSomething: function() {
    var val = this.viewA.getSelectedValue();
  }
});

var a = new ViewA();
var b = new ViewB({viewA:a}); 
```

间接地，使用根`Backbone`对象作为中介：

```
var ViewA = Backbone.View.extend({
  events: {
    "change .combo" : "selectedValueChanged"
  },
  selectedValueChanged: function() {
    //publish
    Backbone.trigger('ViewA:changed', this.$('.combo').val());
  }
});

var ViewB = Backbone.View.extend({
  initialize: function(options) {
    //subscribe
    this.listenTo(Backbone, 'ViewA:changed', this.doSomething);
  },
  doSomething: function(val) {
    //handle 
  }
});

var a = new ViewA();
var b = new ViewB(); 
```

当然，上面的内容非常通用，但我在这里要说明的一点是，您不必担心 DOM 元素是否被交换，因为没有其他视图应该知道元素的存在。如果您定义视图之间的接口（通过方法调用或中介消息传递），您的应用程序将更易于维护且不那么脆弱。

# php - 网站最近被黑了，想帮助我改进我的登录脚本

> ID：14871046
> 
> 赞同：0
> 
> 时间：2013-02-14T08:58:25.690
> 
> 标签：php, security, login, mysqli

昨天我的网站被黑了，黑客设法登录到管理区域并发布了一个博客，其中包含指向他网站的重定向链接。所以我请求一些帮助以确保我的登录安全。

这是我的脚本：

```
 $username = $_POST['username'];
    $password = md5_base64($_POST['password']);

    $stmt = $mysqli->prepare("SELECT id, username, password, permission FROM user WHERE username = ? AND password = ?");
    $stmt->bind_param('ss', $username, $password);
    $stmt->execute();
    $stmt->bind_result($userid, $username, $password, $permission);
    $stmt->store_result();

    if(($numRows = $stmt->num_rows) > 0)
    {   
        $response_array['status'] = "success";
        $response_array['message'] = "Logged in";
    }
    else
    {
        $response_array['status'] = "error";
        $response_array['message'] = "Sorry, Wrong Username/Password Combination" .$password;                   
    } 
```

这是 md5_base64 函数：

```
 function md5_base64 ( $data ) 
    { 
       return preg_replace('/=+$/','',base64_encode(md5($data,true))); 
    } 
```

非常感谢任何帮助、建议和改进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:16:58.913

您的登录脚本没有任何问题，除了非常愚蠢的函数 md5_base64() 之外。但从 SQL 注入的角度来看，它是无辜的。
使用像“qwerty123”这样的密码，不需要狡猾的注射就可以突破。我怀疑，一个名字就像密码一样容易被猜到。

或者可能有其他一些缺陷。像愚蠢的cookie来记住用户等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:05:07.553

**需要一些关于攻击如何发生的信息。**

1.  这可能是**SQL 注入**而不是编程缺陷的可能性。

2.  始终在将查询发送到数据库之前清理您的输入，单引号可以创建 SQL 注入攻击。

3.  注意**默认密码或简单密码**，如 admin 、 admin123 、 12345 等。

4.  人们可以很容易地猜到或者可以使用字典攻击来破解它。

    也使用复杂密码。

5.  如果您使用的是数据库，请使用**Prepared Statement** 。

问候

**安舒尔卡塔**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:10:17.490

你需要问自己的问题——那个人是怎么得到密码的？

他登录到实际机器吗？这可以通过安全审核来防止，并删除对 ftp/telnet 的访问 - 编辑`/etc/inetd.conf`和删除不必要的服务。还要检查启动时启动的守护进程 - Google 运行级别和启动的内容。只需使用 SSH 访问机器。

然后查看数据库。MySql 可以配置为只接受来自特定 IP 地址的连接并使用 SSH。还要确保通过对特定数据库具有已知权限的用户帐户访问数据库

还要检查你的防火墙。这可以防止人们远程访问机器。

然后看web服务器的配置。也许使用 HTTPS 访问管理区域。

还要遵循上面 anshulkatta 给出的建议

# jquery - 皇家滑块不添加标题

> ID：14871049
> 
> 赞同：1
> 
> 时间：2013-02-14T08:58:39.250
> 
> 标签：jquery, html, slider, royal-slider

嘿，这只是一个我似乎无法正确解决的简单问题。

我正在我正在处理的网站上实施皇家滑块。我让它在笔记本电脑的图像中运行，我想要的是当您滚动图像时，每个图像的底部都有一个标题。我只是使用简单的图像，所以[这里](http://dimsemenov.com/plugins/royal-slider/documentation/#global-caption)的文档建议我只使用图像中的 alt，插件只会拾取它，只是它不会。

我的 HTML 看起来像这样：

```
<div class="laptopBg">
  <img src="/images/laptop.png" class="imgBg" width="707" height="400">
  <div id="slider-toolkit" class="royalSlider rsDefaultInv">
    <img src="/images/t1.jpg" alt="the toolkit landing page" />
    <img src="/images/t2.jpg"/>
    <img src="/images/t3.jpg"/>
    <img src="/images/t4.jpg"/>
  </div>
</div> 
```

我在皇家滑块中的设置如下：

```
 function makeRoyalSlider(systemName) {
   $('#slider-' + systemName).royalSlider({
    autoHeight: false,
    arrowsNav: true,
    arrowsNavAutoHide: false,
    fadeInLoadedSlide: false,
    globalCaption:true, //this is the option they say is required for rendering captions.
    controlNavigationSpacing: 0,
    controlNavigation: 'bullets',
    imageScaleMode: 'fill',
    imageAlignCenter: true,
    loop: false,
    loopRewind: true,
    numImagesTopReload: 6,
    keyboardNavEnabled: true,
    autoScaleSlider: true,  
    autoScaleSliderWidth: 486,     
    autoScaleSliderHeight: 315
  }).data('royalslider');
 }; 
```

有人用皇家滑块工作过吗？或者你遇到过类似的情况？我确实尝试过使用类似的东西

```
 <figure class="rsCaption">This caption <b>HTML</b> text will be used.</figure> 
```

这样“rsCaption”类就存在了，但这只是在图像之间创建了一张新幻灯片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-19T18:31:40.510

由于某种原因，该`.js`文件没有处理该`globalCaption`标志。从作者那里复制了最新版本，并且字幕按照文档中的说明工作。

`http://dimsemenov.com/plugins/royal-slider/royalslider/jquery.royalslider.min.js`

要将标题移到滑块容器之外，请添加`appendTo`您的`royalSlider`调用。

```
// initialize
$('#photos').royalSlider({ ... globalCaption: true, ... });

// Move caption container, auto refresh when slides change
$('.rsGCaption').appendTo('.new-container'); 
```

# xslt - 如何在 XSLT 中声明一个序列？

> ID：14871051
> 
> 赞同：3
> 
> 时间：2013-02-14T08:58:58.887
> 
> 标签：xslt, sequence

我需要声明一个固定的数字序列。我该怎么做呢？

例如，是不是（我在这里猜）：

```
<xsl:element name="xsl:param">
    <xsl:attribute name="name">MySequence</xsl:attribute>
    <xsl:sequence>(1,2,3,4)</xsl:sequence>
</xsl:element> 
```

或者

```
<xsl:element name="xsl:param">
    <xsl:attribute name="name">MySequence</xsl:attribute>
    <xsl:sequence>1,2,3,4</xsl:sequence>
</xsl:element> 
```

要不然是啥？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T09:15:22.517

如果您使用的是 XSLT 2.0，则可以直接创建序列，`select`如下所示：

```
<xsl:param name="MySequence" select="('1','2','3','4')"/> 
```

基于 XSLT 的验证...

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>
    <xsl:strip-space elements="*"/>

    <xsl:param name="seq" select="('23453','74365','98','653')"/>

    <xsl:template match="/">
        <xsl:for-each select="$seq">
            <xsl:value-of select="concat('Item ',position(),': ',.,'&#xA;')"/>
        </xsl:for-each>
    </xsl:template>

</xsl:stylesheet> 
```

应用于任何 XML 输入会产生：

```
Item 1: 23453
Item 2: 74365
Item 3: 98
Item 4: 653 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:19:46.363

要构建 XSLT 2.0 意义上的序列，您可以使用`select`例如

```
<xsl:sequence select="1 to 4" /> 
```

但是，如果您要将值添加到您可能更喜欢的元素`value-of`

```
<xsl:value-of select="1 to 4" separator="," /> 
```

鉴于问题中的片段，这将生成输出 XML

```
<xsl:param name="MySequence">1,2,3,4</xsl:param> 
```

这使得生成的参数的值成为逗号分隔的字符串。如果您实际上希望该`param`值是生成的 XSLT 中的一个序列，那么您需要生成一个`select`属性而不是使用元素内容

```
<xsl:element name="xsl:param">
  <xsl:attribute name="name" select="'MySequence'"/>
  <xsl:attribute name="select">
    <xsl:text>(</xsl:text>
    <xsl:value-of select="1 to 4" separator=","/>
    <xsl:text>)</xsl:text>
  </xsl:attribute>
</xsl:element> 
```

给出输出

```
<xsl:param name="MySequence" select="(1,2,3,4)" /> 
```

# javascript - 当按位运算符做同样的事情时，为什么要使用逻辑运算符？

> ID：14871052
> 
> 赞同：10
> 
> 时间：2013-02-14T08:59:07.220
> 
> 标签：javascript, operators, bitwise-operators, logical-operators

考虑这种情况：

```
(true & true & false & false & true) == true //returns: false 
```

如您所见，按位 AND 行为与逻辑 AND 完全相同：

```
(true && true && false && false && true) == true //returns: false 
```

我想知道*为什么*当按位运算与逻辑运算相同时我应该使用逻辑运算。

*注意*：请不要回答这是因为性能问题，因为它在 Mozilla Firefox 中要快得多，请参阅这个 jsPerf：http: [//jsperf.com/bitwise-logical-and](http://jsperf.com/bitwise-logical-and)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-14T09:02:03.203

使用逻辑运算符的短路评估最常见的用途不是性能，而是避免错误。看到这个：

```
if (a && a.length) 
```

你不能简单地`&`在这里使用。

请注意，当您不处理布尔值时，无法使用`&`代替。`&&`例如`&`on `2`( `01`in binary) 和`4`( `10`in binary) is `0`。

还要注意，除了在`if`测试中，`&&`（就像`||`） 也被使用，因为[它返回一个操作数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators)：

```
"a" & "b" => 0
"a" && "b" => "b" 
```

更一般地说，通常可以使用`&`代替。`&&`就像`;`在你的 javascript 代码中省略大多数一样。但它会迫使你思考更多不必要的东西（或者会不时给你带来奇怪的错误）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-14T09:04:49.837

> 按位运算的行为相同吗？

不，这不对。位运算符适用于整数，而逻辑运算符具有截然不同的语义。只有当使用纯布尔值时，结果可能是相似的。

*   [位运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators)：计算两个操作数，转换为 32 位整数，对它们进行运算，然后返回数字。
*   [逻辑运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators)：评估第一个操作数，如果它是真/假，则评估并返回第二个操作数，否则返回第一个结果。这称为[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)

您已经可以看到结果类型的这种差异：

```
(true & true & false & false & true) === 0
(true && true && false && false && true) === false 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-14T09:48:13.703

不，他们不这样做。区别在于：

1.  是否转换操作数类型
2.  是否计算两个操作数
3.  返回值

```
// sample functions 
function a() { console.log("a()"); return false; }
function b() { console.log("b()"); return true; } 
```

## &&（逻辑与）

1.  检查操作数的真实性
2.  使用短路并且可能不计算第二个操作数
3.  返回最后一个计算的操作数而不进行类型转换

```
a() && b();
// LOG: "a()"
// RET: false 
```

## &（按位与）

1.  临时将操作数转换为其 32 位整数表示（如有必要）
2.  计算两个操作数
3.  返回一个数字

```
a() & b();
// LOG: "a()"
// LOG: "b()"
// RET: 0 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-14T09:04:55.703

因为使用`&&`或`&`传达不同的意图。

第一个说你正在测试[**真实性**](http://11heavens.com/falsy-and-truthy-in-javascript)。

第二个意味着你变出一些魔法。在实际代码中，您将看到`variable1 & variable2`. 不清楚您实际上*是否*打算测试真实性（***而不是***真实性）。代码的读者可能会感到困惑，因为不清楚为什么`&`要使用。

此外，正如许多其他帖子所指出的，当考虑除布尔值和函数调用之外的其他值时，语义*完全不同。*

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-14T09:30:56.500

几乎所有内容都已经说过了，但为了完整起见，我想看看性能方面（你说的无关紧要，但很可能）：

JavaScript 有很多难以记住的关于如何计算表达式的规则。当涉及到更复杂的比较时，这包括很多类型转换（隐式类型强制）。数组和对象需要通过调用它们的`toString()`方法进行转换，然后转换为数字。这会导致*巨大*的性能损失。

逻辑运算符`&&`是短路的。这意味着一旦遇到[虚假](https://developer.mozilla.org/en-US/docs/Glossary/Falsy)值，评估就会停止并`false`返回。位运算符将始终评估整个语句。

当涉及非常昂贵的操作（转换数组和对象）时，请考虑以下（是的，非常极端的）短路示例：（性能根据Chromium 90中的[https://jsbench.me ）](https://jsbench.me)

```
// logical operator
( false && {} && [] ) == true
//  /\ short circuits here
// performance: 805M ops/sec  

// bitwise operator
( false  & {}  & [] ) == true // evaluates the entire statement
// performance: 3.7M ops/sec 
```

您可以看到性能相差 100 倍！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-14T09:03:18.257

1.  布尔值允许短路，这可以是性能提升或安全检查。
2.  条件中使用的非布尔值。例如，`if ( 1 & 2 )`将返回 false，而`if ( 1 && 2 )`将返回 true。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-14T09:03:14.970

您不能短路按位运算符。位运算符还可以做更多的事情，而不仅仅是计算布尔表达式。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-14T09:04:31.640

有一个巨大的区别：逻辑操作是短路的。这意味着 (true && true && false ) 是最后要执行的事情。这允许强大的构造，例如使用抽象工厂模型`var myFunc = mozilla.func || opera.sameFunc || webkit.evenOneMoreVariationOfTheSameConcept;`

必须对按位运算的所有子表达式进行完全评估——顺便说一句。无论如何，一个人很少需要评估常量按位或逻辑表达式。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-14T09:06:52.637

第一个条件必须先转换然后对位求和。但第二个将检查逻辑和返回值。

所以第一个会比第二个慢。

运行此测试：http: [//jsperf.com/bitwise-logical](http://jsperf.com/bitwise-logical)

在 Chrome & IE Bitwise 上较慢，但在 FireFox 上逻辑较慢

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-23T05:20:11.367

按位运算符（& 和 |）将两个操作数转换为 32 位“整数”并返回位运算作为结果。如果操作数不是数字，则转换为 0。

逻辑运算符（&& 和 ||）根本不是逻辑运算符，而是操作数之一或 0 的选择器。

*   如果两个都存在，逻辑 && 返回第一个操作数，否则返回 0
*   逻辑 || 返回第一个现有操作数，否则为 0
*   如果不存在，则操作数存在：未定义、null、false 或 0

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-02-14T12:15:51.190

```
var bit1 = (((true & true) & (false & false)) & true), // return 0;
    bit2 = (((true && true) && (false && false)) && true); // return flase

alert(bit1 + ' is not ' + bit2); 
```

# r - 使用两个矩阵选择行最小值

> ID：14871053
> 
> 赞同：0
> 
> 时间：2013-02-14T08:59:16.403
> 
> 标签：r

如果我有这个矩阵（`mat`）：

```
set.seed(140213)
mat <- matrix(runif(16,0,1),nrow = 4)
colnames(mat) <- 1:4
rownames(mat) <- 5:8
#> mat
#          1          2         3         4
#5 0.1120015 0.01454408 0.3411633 0.3456254
#6 0.5709174 0.70443202 0.9114756 0.9157580
#7 0.1500032 0.40889119 0.6231543 0.9736331
#8 0.9773827 0.45136413 0.9706694 0.5022132 
```

对于每一行，我可以得到两个*最低*列的：

```
namesmat <- t(apply(mat, 1, function(x)
                            head(names(x)[order(x, decreasing = FALSE)], 2)))

#  [,1] [,2]
#5 "2"  "1" 
#6 "1"  "2" 
#7 "1"  "2" 
#8 "2"  "4" 
```

现在我的问题是：

如果我有另一个矩阵 ( `mat2`)

```
 set.seed(14022013) ; mat2 <- matrix(runif(16,0,1),nrow = 4) 
```

我怎样才能像以前一样为每列获取*最低*`mat2`的两行，但忽略我已经从中选择的列`mat`。

例如，如果`mat2`在行的最高列中，`5`则`cols 3 & 1`必须选择最高的嵌套。如果下一个最高的是“col 2”，我将不得不选择下一个最高的。如果不清楚，请告诉我。

`mat2`我的脑袋想使用类似的方法进行某种配对应用`namesmat`：

```
 t(apply(mat, 1, function(x) head(
     names(x)[order(x[! names(x) == apply(namesmat,1,c)] ,
         decreasing = FALSE)], 2))) 
```

我将在许多垫子上这样做。`mat2`选择取决于`mat`选择。然后我将有一个`mat3`并且每行最低列的选择将取决于选择`mat`和`mat2`组合，因此忽略已经选择的所有行`mat`并`mat2`继续几个垫子。

显然在这种情况下只有 4 列，所以我只能执行此序列两次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:42:27.643

可能有点复杂，但可以完成工作。我使用更简单的矩阵来演示发生了什么..

```
> mat1 <- matrix(c(1,2,3,4,4,3,2,1), nrow=2 , byrow=T)

> mat2 <- matrix(c(5,6,7,8,8,7,6,5), nrow=2 , byrow=T)

> colnames(mat1) <- c("A", "B", "C", "D")

> colnames(mat2) <- c("A", "B", "C", "D")

> mat1
     A B C D
[1,] 1 2 3 4
[2,] 4 3 2 1

> mat2 
     A B C D
[1,] 5 6 7 8
[2,] 8 7 6 5

> mymax <- function(x) {
+     names(  x[order(x)]  )[1:2] 
+ }

> mymax2 <- function(x,y) {
+     z <- names(  x[order(x)]  )
+     z[!z %in% y][1:2] 
+ }

> namesmat <- t(apply(mat1, 1, mymax))

> namesmat
     [,1] [,2]
[1,] "A"  "B" 
[2,] "D"  "C" 

> namesmat2 <- t(sapply(1:nrow(mat2), function(i) mymax2(mat2[i,], namesmat[i,])))

> namesmat2
     [,1] [,2]
[1,] "C"  "D" 
[2,] "B"  "A" 
```

# c# - LINQ查询出生日期以获取年龄

> ID：14871056
> 
> 赞同：7
> 
> 时间：2013-02-14T08:59:23.663
> 
> 标签：c#, linq-to-sql

我正在对员工的出生日期进行查询（在北风数据库中），我想知道他们的年龄。我怎么做？

```
 private void Form1_Load(object sender, EventArgs e)
    {
        using (NorthWindDataContext dataContext = new NorthWindDataContext())
        {
            DateTime today = DateTime.Today;

            var q1 = from z in dataContext.Employees
                     select new
                     {
                         z.FirstName,
                       today-z.BirthDate <---- problem  here
                     };

            dataGridView1.DataSource = q1;

        }
    } 
```

在我的最后一个网格中，我想要年龄列。

生日 = 1969 年 5 月 29 日（示例）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-14T09:12:34.427

这可能很棘手，因为您需要确保今年的生日已经过去，否则您的年龄将超出一岁。

```
var query = from e in dataContext.Employees
            //get the difference in years since the birthdate
            let years = DateTime.Now.Year - e.BirthDate.Year
            //get the date of the birthday this year
            let birthdayThisYear = e.BirthDate.AddYears(years)
            select new
            {
                //if the birthday hasn't passed yet this year we need years - 1
                Age = birthdayThisYear > DateTime.Now ? years - 1 : years
            }; 
```

这样做的好处是可以在生成的 SQL 查询中计算年龄。这意味着您不需要遍历客户端的结果集来计算年龄。

如果您有兴趣，它将生成以下 SQL：

```
-- Region Parameters
DECLARE @p0 Int = 2013
DECLARE @p1 DateTime = '2013-02-14 09:08:46.413'
DECLARE @p2 Int = 1
-- EndRegion
SELECT [t2].[value] AS [years], [t2].[value2] AS [birthdayThisYear], 
    (CASE 
        WHEN [t2].[value2] > @p1 THEN [t2].[value] - @p2
        ELSE [t2].[value]
     END) AS [Age]
FROM (
    SELECT [t1].[value], DATEADD(YEAR, [t1].[value], [t1].[BirthDate]) AS [value2]
    FROM (
        SELECT [t0].[BirthDate], @p0 - DATEPART(Year, [t0].[BirthDate]) AS [value]
        FROM [Employees] AS [t0]
        ) AS [t1]
    ) AS [t2] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-14T09:01:43.270

创建具有 3 个属性的匿名对象：`FirstName`和`Age`（`BirthDate`这是检查员工今年是否已过生日所必需的）。

```
var q1 = (from z in dataContext.Employees
    select new
    {
         FirstName = z.FirstName,
         Age = today.Year - z.BirthDate.Year,
         BirthDate = z.BirthDate
    }).ToList();

q1.ForEach(x => if (x.BirthDate > today.AddYears(-x.Age)) { x.Age--; }); 
```

根据评论（正确），您还应该检查是否`BirthDate`已通过，因此在选择数据后，您必须运行检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T09:03:00.473

您需要一个命名属性，如下所示：

```
private void Form1_Load(object sender, EventArgs e)
{
    using (NorthWindDataContext dataContext = new NorthWindDataContext())
    {
        DateTime today = DateTime.Today;

        var q1 = from z in dataContext.Employees
                 select new
                 {
                     Name = z.FirstName,
                     Age = today - z.BirthDate
                 };

        dataGridView1.DataSource = q1;

    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T09:09:18.697

```
var temp = from o in dataContext.Employees
    select new
    {
         FirstName = o.FirstName,
         Age = DateTime.Now.Year - z.BirthDate.Year -1
    }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T09:01:16.483

```
 var q1 = from z in dataContext.Employees
          select new
         {
            z.FirstName,
            z.BirthDate,
            Age = DateTime.Now.Year - z.BirthDate.Year
         }; 
```

# c# - c#中winform工具中的STA错误

> ID：14871057
> 
> 赞同：-2
> 
> 时间：2013-02-14T08:59:33.520
> 
> 标签：c#, winforms, openfiledialog

我得到“当前线程必须设置为单线程单元 (STA) 模式，然后才能进行 OLE 调用。确保您的 Main 函数上标记了 STAThreadAttribute。仅当调试器附加到进程时才会引发此异常”错误。这是以下代码。

```
if (externalButton.Checked == true)
{
    // int i = 1;
    saveFileDialog.Title = "Save the Proofer Report";
    saveFileDialog.Filter = "Document Files (*.doc)|*.doc|Document Files        (*.docx)|*.docx";
     saveFileDialog.FilterIndex = 0;
     saveFileDialog.InitialDirectory = "MyDocuments";
     saveFileDialog.FileName = "Proofer Report -- " +  Path.GetFileName((string)fileName) + ".doc";
     //i.tostring()
     saveFileDialog.DefaultExt = ".doc"; 

     saveFileDialog.ShowHelp = true;
     saveFileDialog.ShowDialog();-----getting the error here
     fname = saveFileDialog.FileName;
  }
  else
  {
     fname =(string)fileName;              
  }
  if (fname != "")
  {               
     if (worker.CancellationPending == true)
     {
        // report progress
        worker.ReportProgress(25);
        return; 
```

## }

程序.cs

```
 [STAthread]
static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:04:41.977

确保您的`Main`功能已`STAThreadAttribute`在其上标记。

或者，如果您在另一个线程上运行您的 UI 代码，请使用某种机制在主线程上调用它（例如`BeginInvoke`）。

至于为什么保存文件对话框需要单线程单元模型背后的技术原因，它源于使用 Windows Shell 的通用文件对话框。第三方扩展可以在这里加载，他们期望单线程单元线程模型。

尽管它是为 C++ 开发人员编写的，但*备注*部分[`ShellExecute`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)提供了有关此要求的一些很好的信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T09:38:48.383

**解决方案 1**

`STAThread`在您的 Main 方法上方使用。

```
[STAThread]
static void Main(string[] args)

{

} 
```

**解决方案 2**

如果解决方案不起作用，请清洁您的解决方案。还要交叉检查所有 dll 是否真的被删除。转到您的调试文件夹并`dll`从那里删除任何旧的/陈旧的。然后再次重建您的解决方案，现在一切都应该好了。

我的经验表明......大多数时候，解决方案 2 工作正常。

# plugins - IntelliJ 自定义插件不会在类路径上加载库 jar

> ID：14871062
> 
> 赞同：2
> 
> 时间：2013-02-14T08:59:58.360
> 
> 标签：plugins, intellij-idea

我正在开发 IntelliJ 插件，并且正在使用 apache httpcore-4.2.1.jar。我按照 Jetbrains 在他们的 Confluence 页面上声明的插件结构文档，并正在使用这个结构：

```
.IntelliJIDEAx0
plugins
    Sample
        lib
            libfoo.jar
            libbar.jar
        classes
            com/foo/.....
            ...
            ...
        META-INF
            plugin.xml 
```

我的目录结构是这个

```
c:\Program Files (x86)\JetBrains\IntelliJ IDEA 12.0.1
plugins
    myplugin
        lib
            commons-codec-1.6.jar
            commons-logging-1.1.1.jar
            httpclient-4.2.1-atlassian-2.jar
            httpcore-4.2.1.jar
            jackson-core-asl-1.9.12.jar
            jackson-mapper-asl-1.9.12.jar
            list.txt
            myplugin.jar
                META-INF
                    plugin.xml
                com/..... #classes here 
```

然后我通过 IntelliJ/Settings/Plugins/Install 使用 myplugin.jar 从硬盘安装了这个插件。

重新启动后，我得到了这个异常

```
org/apache/http/protocol/HttpContext [Plugin: maca.myplugin]: org/apache/http/protocol/HttpContext [Plugin: maca.myplugin]
com.intellij.diagnostic.PluginException: org/apache/http/protocol/HttpContext [Plugin: maca.myplugin]
    at com.intellij.openapi.components.impl.ComponentManagerImpl$ComponentsRegistry.a(ComponentManagerImpl.java:470)
    at com.intellij.openapi.components.impl.ComponentManagerImpl$ComponentsRegistry.a(ComponentManagerImpl.java:435)
    at com.intellij.openapi.components.impl.ComponentManagerImpl$ComponentsRegistry.access$000(ComponentManagerImpl.java:421)
    at com.intellij.openapi.components.impl.ComponentManagerImpl.a(ComponentManagerImpl.java:102)
    at com.intellij.openapi.components.impl.ComponentManagerImpl.initComponents(ComponentManagerImpl.java:346)
    at com.intellij.openapi.components.impl.ComponentManagerImpl.init(ComponentManagerImpl.java:86)
    at com.intellij.openapi.project.impl.ProjectImpl.init(ProjectImpl.java:307)
    at com.intellij.openapi.project.impl.ProjectManagerImpl.a(ProjectManagerImpl.java:279)
    at com.intellij.openapi.project.impl.ProjectManagerImpl.access$300(ProjectManagerImpl.java:81)
    at com.intellij.openapi.project.impl.ProjectManagerImpl$9.compute(ProjectManagerImpl.java:529)
    at com.intellij.openapi.project.impl.ProjectManagerImpl$9.compute(ProjectManagerImpl.java:525)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl$4.run(ProgressManagerImpl.java:275)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl$TaskRunnable.run(ProgressManagerImpl.java:501)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl$6.run(ProgressManagerImpl.java:310)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl$2.run(ProgressManagerImpl.java:191)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl.executeProcessUnderProgress(ProgressManagerImpl.java:232)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl.runProcess(ProgressManagerImpl.java:181)
    at com.intellij.openapi.application.impl.ApplicationImpl$8$1.run(ApplicationImpl.java:692)
    at com.intellij.openapi.application.impl.ApplicationImpl$6.run(ApplicationImpl.java:465)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
    at com.intellij.openapi.application.impl.ApplicationImpl$1$1.run(ApplicationImpl.java:153)
Caused by: java.lang.NoClassDefFoundError: org/apache/http/protocol/HttpContext
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at com.intellij.openapi.components.impl.ComponentManagerImpl$ComponentsRegistry.a(ComponentManagerImpl.java:445)
    ... 25 more
Caused by: java.lang.ClassNotFoundException: org.apache.http.protocol.HttpContext PluginClassLoader[maca.myplugin, 0.1]
    at com.intellij.ide.plugins.cl.PluginClassLoader.loadClass(PluginClassLoader.java:77)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 28 more 
```

似乎 IntelliJ 没有将其他库放在插件类加载器的类路径上，我不知道为什么。

有人可以帮助我吗？

谢谢

# ios - 不使用代理类的 OData4ObjC

> ID：14871063
> 
> 赞同：0
> 
> 时间：2013-02-14T09:00:00.843
> 
> 标签：ios, objective-c, odata

我正在使用 OData4ObjC，想知道有没有办法在不使用代理类的情况下添加/更新/删除表中的条目。就像 Android 的 OData4j 一样

例如，

```
OEntity havinaCola = c.getEntity("Products", 3).execute(); 
```

我目前正在使用代理类，如下所述，

```
proxy = [[serviceEntities alloc] initWithUri:@"sampleservices/producer.svc/" credential:nil];
QueryOperationResponse *response = [proxy execute:@"customers"];
NSMutableArray *array = [response getResult]; 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:21:08.333

我找到了一种方法来做同样的事情，即正如作者“Matthew Baxter-Reynolds”“多移动开发（为 iPhone 和 Android 平台构建应用程序）”所写的书中所提到的，建议了如何获取/更新/删除/添加的方法条目。

希望这是有用的。

谢谢

# jquery - jquery初学者动画img从一个地方到另一个地方（直线或曲线）

> ID：14871071
> 
> 赞同：0
> 
> 时间：2013-02-14T09:00:12.897
> 
> 标签：jquery, jquery-animate

我真的很想学习如何使用 jquery 更好地制作动画。不只是标准淡入淡出等...

所以我有 div#1 ，我可以通过 jquery .offset 函数获取它相对于文档的坐标。我也有目的地 div 也有坐标。

现在我如何沿着这条路径移动我的图像？

我四处搜索，但我只看到现成的插件可以做到这一点。我想自己做...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:04:17.200

```
$('#div1').animate({
    left: 200, // absolute destination position
    top: '+=50' // relative to starting position
}, 5000); 
```

jQuery 将从当前位置计算中间步骤。您无需担心动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:04:42.350

你只需要`target`css。jQuery 负责处理当前的 css。

例如。

```
$('#div1').animate({top: '200px', left: '300px'},3000); 
```

`div1`将在 3 秒内将具有 id`top = 200px`的元素设置为动画`left = 300px`，无论它放置在什么位置。

（如果元素已经在那个位置，你根本看不到动画）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:07:05.223

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

获取目标 div 的 offset().left，并将 div#1 的“左”设置为 .animate 调用中的值。

# python - 从 IDLE 运行时，BeautifulSoup 失败并出现递归深度错误

> ID：14871077
> 
> 赞同：1
> 
> 时间：2013-02-14T09:00:54.030
> 
> 标签：python, python-2.7, beautifulsoup

考虑以下 BeautifulSoup 代码片段

```
>>> ================================ RESTART ================================
>>> import BeautifulSoup
>>> with open(r"d:\temp\ICE.htm") as ice:
    soup = BeautifulSoup.BeautifulSoup(ice.read())
    trs = soup.findAll('tr')
    for tr in trs:
        labels = tr.findAll('label', {'class':'PSEDITBOXLABEL'})
        for label in labels:
        print label.contents[0] 
```

从 IDLE 运行它会导致它引发 RuntimeError 异常，并带有奇怪的回溯和奇怪的递归深度错误

```
Traceback (most recent call last):
  File "<pyshell#37>", line 4, in <module>
    print label.contents[0]
  File "C:\Python27\lib\idlelib\rpc.py", line 595, in __call__
    value = self.sockio.remotecall(self.oid, self.name, args, kwargs)
  File "C:\Python27\lib\idlelib\rpc.py", line 210, in remotecall
    seq = self.asynccall(oid, methodname, args, kwargs)
  File "C:\Python27\lib\idlelib\rpc.py", line 225, in asynccall
    self.putmessage((seq, request))
  File "C:\Python27\lib\idlelib\rpc.py", line 324, in putmessage
    s = pickle.dumps(message)
  File "C:\Python27\lib\copy_reg.py", line 71, in _reduce_ex
    state = base(self)
  File "C:\Python27\lib\site-packages\BeautifulSoup.py", line 476, in __unicode__
    return str(self).decode(DEFAULT_OUTPUT_ENCODING)
RuntimeError: maximum recursion depth exceeded while getting the str of an object 
```

从命令提示符运行时，类似的代码运行良好

```
D:\temp>cat ICE.py
import BeautifulSoup
import os
import sys
with open(sys.argv[1]) as ice:
        soup = BeautifulSoup.BeautifulSoup(ice.read())
        trs = soup.findAll('tr')
        for tr in trs:
            labels = tr.findAll('label', {'class':'PSEDITBOXLABEL'})
            for label in labels:
                print label.contents[0]

D:\temp>python ICE.py ICE.htm
Report ID
*Subject
Date Created
Duplicate ID
*Reported By
Reporting Org
Incident ID
Traceback (most recent call last):
  File "ICE.py", line 8, in <module>
    labels = tr.findAll('label', {'class':'PSEDITBOXLABEL'})
  File "c:\Python27\lib\site-packages\BeautifulSoup.py", line 849, in findAll
    return self._findAll(name, attrs, text, limit, generator, **kwargs)
  File "c:\Python27\lib\site-packages\BeautifulSoup.py", line 377, in _findAll
    found = strainer.search(i)
  File "c:\Python27\lib\site-packages\BeautifulSoup.py", line 970, in search
    if self._matches(markup, self.text):
  File "c:\Python27\lib\site-packages\BeautifulSoup.py", line 989, in _matches
    if markup and not isinstance(markup, basestring):
KeyboardInterrupt 
```

顺便说一句，我使用的 BeautifulSoup 版本是

```
>>> BeautifulSoup.__version__
'3.2.1' 
```

我还没有更新到 bs4，因为我发现它有些错误

**注意**可能无法共享 html 内容

# zooming - 动力学js缩放范围

> ID：14871080
> 
> 赞同：0
> 
> 时间：2013-02-14T09:00:58.587
> 
> 标签：zooming, kineticjs, getpixel

有没有办法在不计算最小/最大 xy 和 wh 的情况下缩放形状集合的范围 - 当涉及倾斜线时非常痛苦。![在此处输入图像描述](../Images/28dea9e31c5d90ae513d0b82c7957cad.png)

也许某种像素检测？

# c++ - C++11 是否保证“int a[8] = {};” 在语义上等同于“int a[8]{};”？

> ID：14871081
> 
> 赞同：14
> 
> 时间：2013-02-14T09:01:02.130
> 
> 标签：c++, performance, c++11, initialization, standards

在 C++11 中，以下两个语句都是合法的：

声明1。`int a[8] = {};`

声明2。`int a[8]{};`

但是，我更喜欢语句 1 而不是语句 2，因为我认为语句 1 更具表现力。

C++11 标准是否保证两个语句在语义上是等效的？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-14T09:03:10.227

从语义上讲，它们并不相同，很像复制/直接初始化：

### 8.5.4 列表初始化[dcl.init.list]

> 1 列表初始化是从花括号初始化列表初始化对象或引用。这样的初始化器称为初始化器列表，列表中以逗号分隔的初始化器子句称为初始化器列表的元素。初始化列表可能为空。**列表初始化可以发生在直接初始化或复制初始化上下文中；直接初始化上下文中的列表初始化称为直接列表初始化，而复制初始化上下文中的列表初始化称为复制列表初始化。**[...]（强调我的）

原始答案，处理比较性能：不，该标准规定了算法的一些复杂性限制，但没有在这些问题上的性能。这最好留给编译器，但所有编译器都可能生成相同的代码。

考虑一下复制初始化与直接初始化。该标准仅指定它们是什么，它从未说一个必须比另一个更快，或者它们必须表现相同。这完全取决于编译器。

**这是一件好事，因为编译器知道什么最适合该平台。**如果标准确实施加了这样的限制，它可以说`+`必须比 快`*`，这是非常直观的。`*`但是想想一个为乘法构建的平台，它实际上用机器代码计算更快。为了符合标准，编译器必须不遗余力地翻译`*`成较慢的指令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T09:06:22.923

该标准仅定义了所谓的“可观察行为”，即 I/O 库调用和易失性数据读写的序列。没有速度要求。

您无法确定在实践中哪个更快。体面的编译器应该发出相同的代码，但有时编译器中存在错误，这些错误可能会影响代码发出。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-14T16:17:42.067

是的，它们在语义上是等价的。

聚合（8.5.1，例如数组）上的列表初始化（8.5.4）执行聚合初始化（8.5.4p3b1）。聚合初始化*不关心*语法形式是直接初始化还是复制初始化；聚合初始化的规则在任何一种情况下都同样适用。特别是，聚合的成员总是从初始化列表的相应子句*复制初始化。*

有一个例外，几乎但不完全适用于您的情况；在没有足够的元素来初始化聚合的所有成员时，标准不清楚如何初始化剩余的成员；它们是从`{}`（空的列表初始化器）列表初始化的，但没有指定它们是复制列表初始化还是直接列表初始化，或者这是否取决于原始列表初始化（参见注释）；事实上，clang 和 gcc 在这种极端情况下的行为不同。但是，这与您的情况无关，因为聚合成员类型是`int`，并且对于非类类型的列表初始化`{}`调用值初始化，即零初始化，无论语法形式如何（即`int i{};`和`int i = {};`语义相同）。

有几个理由更喜欢`=`（复制初始化）语法：首先，它是标准在几乎所有示例中使用的形式（例外是 8.5.4p3 中的最后两个示例，其中一个示例在缩小转换时出现错误另一个演示从一个空的初始化列表进行初始化）。此外，正如您所说，它更具表现力；我还发现，在列表初始化聚合时，复制初始化语法更好地反映了聚合的元素本身是复制初始化的事实。

最后，`=`在一种情况下需要使用 without 语法：对象是具有构造函数的*非聚合*类类型`explicit`。因此，应该为这种情况保留直接列表初始化语法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T09:19:15.593

C++11 标准甚至不保证它`int a[8] = {};`与`int aVeryLongName[8] = {};`.

# java - grails 应用程序中的 Perm Gem 问题

> ID：14871084
> 
> 赞同：0
> 
> 时间：2013-02-14T09:01:11.677
> 
> 标签：java, tomcat, grails, java-opts

我正在创建一个 grails(2.1) 应用程序并将其部署在 tomcat 服务器上。但我收到 Perm Gem 空间错误。

我有一些想法可以通过设置来忽略这个错误`JAVA_OPTS`。但我没有任何访问`Tomcat/bin`目录的权限。

所以，任何人都知道在不访问`Tomcat/bin`目录的情况下忽略这个错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:06:03.017

看看 [Q: OMG 我在开发模式下运行 Grails 时遇到 OutOfMemoryErrors 或 PermGen Space 错误。我该怎么办](http://www.grails.org/FAQ#Q:%20OMG%20I%20get%20OutOfMemoryErrors%20or%20PermGen%20Space%20errors%20when%20running%20Grails%20in%20development%20mode.%20What%20do%20I%20do?)

来自[grails-permgem-error](https://stackoverflow.com/questions/6412153/grails-permgem-error)

PermGen 是 JVM 内存的一个区域，用于加载类。

当你的应用程序执行时，它会使用越来越多的内存，尤其是在调试环境中，或者如果你大量使用闭包。

解决这个问题的方法是添加更多！

这是通过在启动应用程序时向 JVM 传递一个或两个参数来完成的。

参数是：

```
-XX:MaxPermSize=256m
-XX:PermSize=128m 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:19:51.790

如果不重要，您可以[禁用 grails 自动重新编译功能。](http://www.grails.org/FAQ#Q%3a%20OMG%20I%20get%20OutOfMemoryErrors%20or%20PermGen%20Space%20errors%20when%20running%20Grails%20in%20development%20mode.%20What%20do%20I%20do?)

```
$ grails -Ddisable.auto.recompile=true run-app 
```

# c++ - 如何捕获 QDockWidget 关闭按钮单击事件

> ID：14871085
> 
> 赞同：10
> 
> 时间：2013-02-14T09:01:13.987
> 
> 标签：c++, qt, qdockwidget

我在`QStackedWidge`a 中有一个 t `QDockWidget`- 取决于显示的页面我希望显示/隐藏`QDockWidget`. 我可以通过使用来做到这一点`QDockWidget::setFeatures()`。

但是我面临的问题是如何捕获关闭按钮的信号，以便我可以更改停靠功能/设置堆叠的小部件页面索引。

![QDockWidget 关闭按钮](../Images/47d62041cf7700205b1b0f6f5a0accb4.png)

我试图使用事件过滤器：

```
class EventFilter : public QObject
{
    Q_OBJECT
public:
    EventFilter( QObject* aParent );
protected:
    bool eventFilter(QObject *obj, QEvent *event);
};

EventFilter::EventFilter( QObject* aParent )
    : QObject( aParent )
{

}

bool EventFilter::eventFilter( QObject *obj, QEvent *event )
{
    if ( event->type() == QEvent::Close )
    {
        return true;
    }
    return QObject::eventFilter( obj, event );
} 
```

并安装它：

```
EventFilter* filter = new EventFilter( this );
u->dockWidget_6->installEventFilter( filter ); 
```

在 my 的构造函数中`QMainWindow`- 该`eventFilter()`方法没有被调用。

所以接下来我尝试使用`QDockWidget::visibilityChanged`更改后的信号，因为这听起来可能是我想要的：

```
connect( u->dockWidget_6, SIGNAL(visibilityChanged(bool)), SLOT(dockWindowClosed(bool)) ); 
```

这个插槽确实被调用了 - 但不是在单击关闭按钮时。

最后我尝试使用提升`QDockWidget`来捕获`QWidget::closeEvent()`.

```
 class DockWidgetWithCloseSignal : public QDockWidget
  {
       Q_OBJECT
   public:
      explicit DockWidgetWithCloseSignal(const QString &title, QWidget *parent = 0, Qt::WindowFlags flags = 0)
        : QDockWidget( title, parent, flags )
    {

    }

    explicit DockWidgetWithCloseSignal(QWidget *parent = 0, Qt::WindowFlags flags = 0)
 : QDockWidget( parent, flags )
    {

    }
protected:
    void closeEvent(QCloseEvent *event)
    {
        event->ignore();
    }
}; 
```

我看到构造函数被调用，这意味着这个新的小部件确实被使用了，但同样没有乐趣，因为在`closeEvent()`单击关闭按钮时从未调用过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:14:58.000

事实证明，除了`visibilityChanged`信号之外的一切都有效！

我向覆盖的`closeEvent()`方法添加了一个信号，然后我可以连接到我想要的任何插槽。

实际的问题是，在堆叠的小部件中，我`QDockWidget`在另一个页面上有另一个，因此我将所有这些东西都添加到了错误的地方`QDockWidget`！（当然`QDockWidget`也宣传错了！）。

希望这个问题可以作为其他任何需要弄清楚如何做到这一点的人的参考 - 而不是为什么它不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-30T12:02:45.263

基于 DockWidget 创建一个新的 CloseDockWidget。

覆盖 closeEvent() 方法，但从那里发出一个额外的 closed() 信号。

**小部件/qclosedockwidget.cpp**：

```
#include "qclosedockwidget.h"

namespace Widgets
{
    QCloseDockWidget::QCloseDockWidget(const QString &title, QWidget *parent) 
    : QDockWidget(title, parent)
    {
        // constructor
    }

    void QCloseDockWidget::closeEvent(QCloseEvent *event)
    {
        emit closed(); // <------ signal

        QDockWidget::closeEvent(event);
    }
} // namespace Widgets 
```

**小部件/qclosedockwidget.h**：

```
#ifndef QCLOSEDOCKWIDGET_H
#define QCLOSEDOCKWIDGET_H

#include <QDockWidget>

namespace Widgets
{

    class QCloseDockWidget : public QDockWidget
    {
        Q_OBJECT

    public:
        QCloseDockWidget(const QString &title = "", QWidget *parent = nullptr);

    protected:
        void closeEvent(QCloseEvent *event);
    signals:
        void closed();
    };

} // namespace Widgets

#endif // QCLOSEDOCKWIDGET_H 
```

现在您可以实例化并连接到新信号：

```
auto *dockWidget = new Widgets::QCloseDockWidget("MyDockWidget", this);

connect(dockWidget, &Widgets::QCloseDockWidget::closed, this, &MainWindow::dockWidgetCloseClicked); 
```

# vim - vim 编辑器错误颜色

> ID：14871087
> 
> 赞同：7
> 
> 时间：2013-02-14T09:01:22.863
> 
> 标签：vim, colors

我在 Ubuntu 上使用 Vim 7.3。问题是 - 每当我的代码出现错误时，该错误都会用白色标记。在那种颜色下面我看不到任何东西。因此，如果我有拼写错误（缺少一个大括号），它将用白色标记那个大括号，但我将看不到那个错误（它被颜色覆盖）。有时它会标记所有行。我正在使用*Molokai*配色方案。

我试图改变配色方案，但没有任何反应。我想错误颜色来自 vim 本机设置。

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T09:20:31.550

这

```
:hi 
```

命令列出所有定义的突出显示。找到白色的（对于错误，这应该是`Error`），并在您的 中更改它（参见`:help :highlight`）`~/.vimrc`，例如：

```
:hi Error ctermfg=Red guifg=Red 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T17:36:10.633

如果突出显示是问题，那么您可以通过在命令模式下键入“:noh”（不带引号）轻松快速地关闭所有突出显示。这将暂时关闭突出显示。这也适用于在搜索后摆脱突出显示（这真的让我很烦恼，因为就像你在这里的问题一样，当它突出显示时我无法阅读文本）。

如果你还没有，你应该在你的主目录中创建一个名为“.vimrc”的文件，所以它的路径是“~/.vimrc”。这就是@mtk 所指的（以防万一你还不知道。有些人在工作中使用Vim，但不知道.vimrc 文件）。

# postgis - PostGIS:搜索几何位置

> ID：14871092
> 
> 赞同：0
> 
> 时间：2013-02-14T09:01:52.010
> 
> 标签：postgis

我正在开发一个将地址的纬度/经度信息存储在 PostGIS 表中的系统。要将 Lat/Long 存储在几何数据类型中，我使用 ST_GeometryFromText 函数。

例如，以下函数调用获取针对指定纬度/经度位置的几何值：

```
 myPointGeo =  ST_GeometryFromText('POINT(40.758871 -73.985114)); 
```

同样，我将 Polygon 转换为几何表示，如下所示：

```
myPolygonGeo =  ST_GeometryFromText('POLYGON ((40.7566484549725 -73.9878561496734, 40.7556894646734 -73.9853026866913, 40.7545841705587 -73.9860537052154, 40.7548036054111 -73.9881458282471, 40.7559820394514 -73.9887895584106, 40.7566484549725 -73.9878561496734 ))') 
```

我想知道上面的纬度/经度位置是否位于这个多边形内。为此，我使用 ST_Within 函数。但是，尽管“myPointGeo”实际上位于多边形内，但 ST_Within 返回的是 false。我以这种方式使用 ST_Within：

```
 St_Within(myPointGeo,myPolygonGeo) 
```

我在这里做错了什么？我应该为此目的使用其他功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:02:54.160

查询看起来正确。它返回`false`，因为该点不在多边形中。这两个几何形状是不相交的。

![多边形中的点](../Images/156e80e6157d3ae5d62927e58b9ffd73.png)

# asp.net - 在 asp.net 中动态添加到页面的用户控件中使用 AjaxControlToolkit Accordion 控件

> ID：14871096
> 
> 赞同：0
> 
> 时间：2013-02-14T09:02:17.320
> 
> 标签：asp.net, user-controls, ajaxcontroltoolkit

您好我正在尝试在用户控件中使用 AjaxControlToolkit 的 Accordion 控件。该用户控件是从后面的代码动态添加到页面的。我的用户控制代码如下：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="MyControl.ascx.cs" 
Inherits="Project.UC.Control" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit"
TagPrefix="asp" %>

<asp:Accordion ID="Accordion1" runat="server" HeaderSelectedCssClass="Sel" 
HeaderCssClass="unSel" SelectedIndex="0">
<Panes>
<asp:AccordionPane runat="server" ID="AccordionPane1">  
<Header>Red Orchid</Header>  
<Content>Some content here.</Content>  
</asp:AccordionPane>  
</Panes>
</asp:Accordion> 
```

为了动态添加用户控件，我在页面后面的代码中使用了以下代码

```
Control mycontrol = this.LoadControl("~/myUserControl.ascx");
this.Controls.Add(mycontrol); 
```

在我的用户控件使用者页面上，我有带有 runat="server" 的表单标记，还为 ajax 功能添加了 ScriptManager 控件。当我运行我的代码时，我收到以下错误

```
Control 'ctl02_Accordion1_AccordionExtender' of type 
'AccordionExtender' must be placed inside a form tag with runat=server. 
```

我已经在我的消费者页面上使用了带有 runat="server" 标记的表单，为什么会出现这个问题。为了解决这个问题，我将消费者页面的表单标签移至用户控件，这解决了我的问题，但这样做我无法利用消费者页面上的回发。如果我将带有 runat="server" 的表单标签放在用户控件和消费者页面中，则会显示错误，您只能在页面上使用一个表单标签。如何解决这个问题呢。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:07:50.767

将`PlaceHolder`控件添加到窗体上，而不是`this.Controls.Add(mycontrol);`使用`PlaceHolder1.Controls.Add(mycontrol);`

或者您需要将控件添加到表单的`Controls`集合中。假设 form 有`aspnetForm`id 你应该写：`aspnetForm.Controls.Add(mycontrol);`

原因是`Page`该类具有自己的`Controls`属性，因此`this.Controls.Add(mycontrol);`将控件添加到 Page.Controls 集合。但是所有向服务器提交任何数据的控件都必须放在`form`元素中，否则它们的值不应该在服务器端访问。这来自成熟的 html 表单：[HTML 表单和输入](http://www.w3schools.com/html/html_forms.asp)

# ios - 在主视图内的视图上使用 Collectionviewcontroller

> ID：14871099
> 
> 赞同：0
> 
> 时间：2013-02-14T09:02:30.737
> 
> 标签：ios, objective-c

在我的 iPad 应用程序中，我有一个主视图，它包含`three child views`

1.  最佳
2.  中间
3.  和底部

是否可以在不同的子视图上使用不同的视图控制器？
例如，我想在底视图和顶视图上使用集合视图控制器。
如果是，那么是否可以动态添加和删除单元格？

一个小例子将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:22:39.863

如果您使用的是 iOS 6，您可以通过从对象库中删除 ContainerView 在情节提要中轻松创建容器视图控制器。

![在此处输入图像描述](../Images/4d0f5ac4cdb1232d328d55992117fb62.png)

否则，您将需要手动实现容器视图控制器。请参阅[文档](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:08:01.307

要首先在视图上使用集合视图控制器，您必须在其他地方创建一个带有 CollectionView 的 UICollectionViewController。您可以在界面生成器中或以编程方式创建此 CollectionViewController。然后将 UICollectionViewController 的 collectionView 视为普通视图并将其添加到具有所需框架的视图中。
如果您不熟悉 CollectionView，请查看 Google
[UICollectionView 教程上的一些关于 UICollectionView 的教程](https://stackoverflow.com/questions/15523238/uicollectionview-tutorial)

# php - Metrofax API：如何有效地获取传真状态？

> ID：14871101
> 
> 赞同：0
> 
> 时间：2013-02-14T09:02:44.933
> 
> 标签：php, xml, api, fax, metrofax

基于此 API：[https ://wsf.metrofax.com/doc/](https://wsf.metrofax.com/doc/)

有没有办法getStatusFromFaxId？

**步骤是：**

1.  SendFaxMessage 返回 tracking_number
2.  GetFaxMessageFrmTrkNbr 获取faxId
3.  GetTransmissionStatus 获取状态

对我来说，这效率不高（对于一千份传真）。

有没有最好、最有效的方法来做到这一点？任何答案将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:05:36.580

在您布置的场景中，第 3 步实际上有些多余。只需使用跟踪号就可以在传真的整个生命周期内跟踪传真的状态（无需知道 FaxID）。

通过调用 GetFaxMessageFrmTrkNbr，您将返回一个包含传真状态的对象，该状态应允许您确定传真是否仍在发送或已成功/失败。您应该能够遍历您的 1,000 个跟踪号码列表（每个都调用 GetFaxMessageFrmTrkNbr）以检查其状态，从仍需要检查其状态的项目列表中删除那些最终确定的。这是一个快速的电话，在这种规模下应该相当有效。

对于任何最终失败的传真，您可能希望选择调用 GetTransmissionStatus，因为这将返回一个人类可读的字符串，说明其失败原因。对于成功的传真或仍在发送的传真，实际上没有必要调用它。

# asp.net-mvc - MVC4 外部登录：Google 提供程序按钮消失

> ID：14871104
> 
> 赞同：2
> 
> 时间：2013-02-14T09:02:49.803
> 
> 标签：asp.net-mvc, asp.net-mvc-4, oauth

问题：我以前可以使用 Google 外部登录登录到我的 MVC4 网站，但突然**“Google”按钮没有出现**。当我尝试一个新的干净的 MVC4 项目时，我没有得到这样的行为。

调试显示，当AccountController 中的操作尝试返回 _ExternalLoginsListPartial 视图时，对象的`IsAuthenticatedWithOAuth`属性`OAuthWebSecurity`会引发“缺少方法异常” 。`ExternalLoginsList`然后，在渲染 _loginPartial 视图时，`Request.IsAuthenticated`为 false。此外，生成的 HTML 包含按钮的代码（所以这意味着这是一个身份验证问题？）

该网站应该在 Windows Azure 上运行，但在云中和本地运行时都会出现问题。实际上，该按钮第一次消失是在将新版本的网站发布到 Azure 之后。

3 个小时来来回回，我没有更接近解决方案。这里非常需要帮助。谢谢

# wpf - 如何管理某些默认的 WPF 数据绑定行为

> ID：14871105
> 
> 赞同：1
> 
> 时间：2013-02-14T09:02:54.520
> 
> 标签：wpf, data-binding, binding, default

例如，在 WPF 中很容易定义默认应用于每个 TextBox 的样式。

但是这些样式和 ControlTemplates 不能影响我的绑定的默认设置，例如我想要

```
<TextBox Text="{Binding}" /> 
```

表现得像

```
<TextBox Text="{Binding UpdateSourceTrigger=PropertyChanged}" /> 
```

默认。

另外，如果我将 TextBox.Text 绑定到一个可为空的数字属性，我希望在绑定中有 TargetNullValue=''，并且可能总是说 ValidateOnDataErrors=True...

你见过管理这种默认行为的好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:55:00.130

我建议您从默认绑定派生并在自定义类中实现您想要的所有内容。大概没有别的办法了。

# extjs - 无法在 Sencha Touch 中构建应用程序 - 插件依赖问题

> ID：14871108
> 
> 赞同：1
> 
> 时间：2013-02-14T09:03:01.750
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我正在使用 Sencha Cmd v3.0.2.288。
我需要构建一个应用程序（sencha app build）。
我收到此错误。

我的理解似乎与对插件的依赖有关`Plugin.field.TimePicker`。

在 app.js 我加载这个插件使用

```
Ext.Loader.setPath('Plugin', './plugin'); 
```

它在桌面浏览器上运行良好。

你能指出我在这里做错了什么吗？

```
js:9667
[WRN]           C1000: Yui Compressor Warning (Trailing comma is not legal in an
 ECMA-262 object initializer =>         ],) -- C:\wamp\www\gs-2\app\view\Login.j
s:1467
[WRN]           C1000: Yui Compressor Warning (Trailing comma is not legal in an
 ECMA-262 object initializer =>             ]) -- C:\wamp\www\gs-2\app\view\Logi
n.js:7871
[WRN]           C1000: Yui Compressor Warning (Trailing comma is not legal in an
 ECMA-262 object initializer =>             ],) -- C:\wamp\www\gs-2\app\view\Nav
igViewTimetable.js:2471
[WRN]           C1000: Yui Compressor Warning (Trailing comma is not legal in an
 ECMA-262 object initializer =>         ],) -- C:\wamp\www\gs-2\app\view\ScanQRC
ontainer.js:13367
[WRN]           C1000: Yui Compressor Warning (Trailing comma is not legal in an
 ECMA-262 object initializer =>             ]) -- C:\wamp\www\gs-2\app\view\Sett
ings.js:3671
[WRN]           C1000: Yui Compressor Warning (Trailing comma is not legal in an
 ECMA-262 object initializer =>         ]) -- C:\wamp\www\gs-2\app\view\Settings
Failure.js:3867
[WRN]           C1000: Yui Compressor Warning (Trailing comma is not legal in an
 ECMA-262 object initializer =>         ],) -- C:\wamp\www\gs-2\app\view\TtDetai
lView.js:10367
[INF]           Processing class inheritance graph
[INF]           Processing instantiation refereces to classes and aliases
[WRN]           C1000: Yui Compressor Warning (Trailing comma is not legal in an
 ECMA-262 object initializer =>         ]) -- C:\wamp\www\gs-2\app\model\Edit.js
:1667
[WRN]           C1000: Yui Compressor Warning (Trailing comma is not legal in an
 ECMA-262 object initializer =>         ],) -- C:\wamp\www\gs-2\app\model\Today.
js:9667
[WRN]           C1000: Yui Compressor Warning (Trailing comma is not legal in an
 ECMA-262 object initializer =>         ],) -- C:\wamp\www\gs-2\app\view\Login.j
s:1467
[WRN]           C1000: Yui Compressor Warning (Trailing comma is not legal in an
 ECMA-262 object initializer =>             ]) -- C:\wamp\www\gs-2\app\view\Logi
n.js:7871
[WRN]           C1000: Yui Compressor Warning (Trailing comma is not legal in an
 ECMA-262 object initializer =>             ],) -- C:\wamp\www\gs-2\app\view\Nav
igViewTimetable.js:2471
[WRN]           C1000: Yui Compressor Warning (Trailing comma is not legal in an
 ECMA-262 object initializer =>         ],) -- C:\wamp\www\gs-2\app\view\ScanQRC
ontainer.js:13367
[WRN]           C1000: Yui Compressor Warning (Trailing comma is not legal in an
 ECMA-262 object initializer =>             ]) -- C:\wamp\www\gs-2\app\view\Sett
ings.js:3671
[WRN]           C1000: Yui Compressor Warning (Trailing comma is not legal in an
 ECMA-262 object initializer =>         ]) -- C:\wamp\www\gs-2\app\view\Settings
Failure.js:3867
[WRN]           C1000: Yui Compressor Warning (Trailing comma is not legal in an
 ECMA-262 object initializer =>         ],) -- C:\wamp\www\gs-2\app\view\TtDetai
lView.js:10367
[INF]           Processing source dependencies
[ERR]           Failed to find file for Plugin.field.TimePicker
 required by C:\wamp\www\gs-2\app\view\DashboardEdit.js
[ERR]
[ERR]           BUILD FAILED
[ERR]           com.sencha.exceptions.BasicException: The following error occurr
ed while executing this line:
[ERR]           C:\wamp\www\gs-2\.sencha\app\build-impl.xml:137: com.sencha.exce
ptions.ExScript: Wrapped com.sencha.exceptions.BasicException: com.sencha.except
ions.ExBuild: Failed to find any files for Plugin.field.TimePicker (x-app-build#
273)   runAppBuild (x-app-build:273)   [anonymous] (x-app-build:545)   x_app_bui
ld (x-app-build:543)   <script> (anonymous:1)
[ERR]                   at com.sencha.exceptions.BasicException.wrap(BasicExcept
ion.java:43)
[ERR]                   at com.sencha.cli.Command.dispatch(Command.java:104)
[ERR]                   at com.sencha.cli.Commands.dispatch(Commands.java:49)
[ERR]                   at com.sencha.cli.AbstractCommand.dispatch(AbstractComma
nd.java:182)
[ERR]                   at com.sencha.ant.SenchaCommandTask.doExecute(SenchaComm
andTask.java:69)
[ERR]                   at com.sencha.ant.BaseAntTask.execute(BaseAntTask.java:2
2)
[ERR]                   at org.apache.tools.ant.UnknownElement.execute(UnknownEl
ement.java:291)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native M
ethod)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown S
ource)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unkno
wn Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(D
ispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]                   at org.apache.tools.ant.Target.execute(Target.java:392)
[ERR]                   at org.apache.tools.ant.Target.performTasks(Target.java:
413)
[ERR]                   at org.apache.tools.ant.Project.executeSortedTargets(Pro
ject.java:1399)
[ERR]                   at org.apache.tools.ant.Project.executeTarget(Project.ja
va:1368)
[ERR]                   at org.apache.tools.ant.helper.DefaultExecutor.executeTa
rgets(DefaultExecutor.java:41)
[ERR]                   at org.apache.tools.ant.Project.executeTargets(Project.j
ava:1251)
[ERR]                   at com.sencha.ant.AntRunner.run(AntRunner.java:156)
[ERR]                   at com.sencha.ant.AntRunner.run(AntRunner.java:72)
[ERR]                   at com.sencha.command.BasePluginCommands$BasePluginComma
nd.run(BasePluginCommands.java:94)
[ERR]                   at com.sencha.command.BasePluginCommands$BasePluginComma
nd.run(BasePluginCommands.java:98)
[ERR]                   at com.sencha.command.BasePluginCommands$BaseNamePathCom
mand.run(BasePluginCommands.java:142)
[ERR]                   at com.sencha.command.app.AppCommands$BuildCommand.execu
te(AppCommands.java:116)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native M
ethod)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown S
ource)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unkno
wn Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at com.sencha.cli.Command.dispatch(Command.java:78)
[ERR]                   at com.sencha.cli.Commands.dispatch(Commands.java:49)
[ERR]                   at com.sencha.cli.Commands.dispatch(Commands.java:49)
[ERR]                   at com.sencha.command.Sencha.main(Sencha.java:71)
[ERR]           Caused by: C:\wamp\www\gs-2\.sencha\app\build-impl.xml:144: The
following error occurred while executing this line:
[ERR]           C:\wamp\www\gs-2\.sencha\app\build-impl.xml:137: com.sencha.exce
ptions.ExScript: Wrapped com.sencha.exceptions.BasicException: com.sencha.except
ions.ExBuild: Failed to find any files for Plugin.field.TimePicker (x-app-build#
273)   runAppBuild (x-app-build:273)   [anonymous] (x-app-build:545)   x_app_bui
ld (x-app-build:543)   <script> (anonymous:1)
[ERR]                   at org.apache.tools.ant.ProjectHelper.addLocationToBuild
Exception(ProjectHelper.java:551)
[ERR]                   at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:44
4)
[ERR]                   at org.apache.tools.ant.taskdefs.CallTarget.execute(Call
Target.java:105)
[ERR]                   at org.apache.tools.ant.UnknownElement.execute(UnknownEl
ement.java:291)
[ERR]                   at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown
Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unkno
wn Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(D
ispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]                   at org.apache.tools.ant.Target.execute(Target.java:392)
[ERR]                   at org.apache.tools.ant.Target.performTasks(Target.java:
413)
[ERR]                   at org.apache.tools.ant.Project.executeSortedTargets(Pro
ject.java:1399)
[ERR]                   at org.apache.tools.ant.Project.executeTarget(Project.ja
va:1368)
[ERR]                   at org.apache.tools.ant.helper.DefaultExecutor.executeTa
rgets(DefaultExecutor.java:41)
[ERR]                   at org.apache.tools.ant.Project.executeTargets(Project.j
ava:1251)
[ERR]                   at com.sencha.ant.AntRunner.run(AntRunner.java:156)
[ERR]                   at com.sencha.ant.AntRunner.run(AntRunner.java:80)
[ERR]                   at com.sencha.command.ant.AntCommand.execute(AntCommand.
java:75)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native M
ethod)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown S
ource)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unkno
wn Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at com.sencha.cli.Command.dispatch(Command.java:78)
[ERR]                   ... 31 more
[ERR]           Caused by: C:\wamp\www\gs-2\.sencha\app\build-impl.xml:137: com.
sencha.exceptions.ExScript: Wrapped com.sencha.exceptions.BasicException: com.se
ncha.exceptions.ExBuild: Failed to find any files for Plugin.field.TimePicker (x
-app-build#273)   runAppBuild (x-app-build:273)   [anonymous] (x-app-build:545)
  x_app_build (x-app-build:543)   <script> (anonymous:1)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(D
ispatchUtils.java:116)
[ERR]                   at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]                   at org.apache.tools.ant.Target.execute(Target.java:392)
[ERR]                   at org.apache.tools.ant.Target.performTasks(Target.java:
413)
[ERR]                   at org.apache.tools.ant.Project.executeSortedTargets(Pro
ject.java:1399)
[ERR]                   at org.apache.tools.ant.helper.SingleCheckExecutor.execu
teTargets(SingleCheckExecutor.java:38)
[ERR]                   at org.apache.tools.ant.Project.executeTargets(Project.j
ava:1251)
[ERR]                   at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:44
2)
[ERR]                   ... 52 more
[ERR]           Caused by: com.sencha.exceptions.ExScript: Wrapped com.sencha.ex
ceptions.BasicException: com.sencha.exceptions.ExBuild: Failed to find any files
 for Plugin.field.TimePicker (x-app-build#273)   runAppBuild (x-app-build:273)
 [anonymous] (x-app-build:545)   x_app_build (x-app-build:543)   <script> (anony
mous:1)
[ERR]                   at com.sencha.util.JavaScriptHost.eval(JavaScriptHost.ja
va:74)
[ERR]                   at com.sencha.ant.ScriptTask.executeScript(ScriptTask.ja
va:92)
[ERR]                   at org.apache.tools.ant.taskdefs.optional.script.ScriptD
efBase.execute(ScriptDefBase.java:50)
[ERR]                   at org.apache.tools.ant.UnknownElement.execute(UnknownEl
ement.java:291)
[ERR]                   at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown
Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unkno
wn Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(D
ispatchUtils.java:106)
[ERR]                   ... 59 more
[ERR]           Caused by: org.mozilla.javascript.WrappedException: Wrapped com.
sencha.exceptions.BasicException: com.sencha.exceptions.ExBuild: Failed to find
any files for Plugin.field.TimePicker (x-app-build#273)
[ERR]                   at org.mozilla.javascript.Context.throwAsScriptRuntimeEx
(Context.java:1786)
[ERR]                   at org.mozilla.javascript.MemberBox.invoke(MemberBox.jav
a:183)
[ERR]                   at org.mozilla.javascript.NativeJavaMethod.call(NativeJa
vaMethod.java:247)
[ERR]                   at org.mozilla.javascript.Interpreter.interpretLoop(Inte
rpreter.java:1701)
[ERR]                   at org.mozilla.javascript.Interpreter.interpret(Interpre
ter.java:854)
[ERR]                   at org.mozilla.javascript.InterpretedFunction.call(Inter
pretedFunction.java:164)
[ERR]                   at org.mozilla.javascript.ContextFactory.doTopCall(Conte
xtFactory.java:426)
[ERR]                   at org.mozilla.javascript.ScriptRuntime.doTopCall(Script
Runtime.java:3178)
[ERR]                   at org.mozilla.javascript.InterpretedFunction.exec(Inter
pretedFunction.java:175)
[ERR]                   at org.mozilla.javascript.Context.evaluateString(Context
.java:1111)
[ERR]                   at com.sencha.util.JavaScriptHost.eval(JavaScriptHost.ja
va:67)
[ERR]                   ... 66 more
[ERR]           Caused by: com.sencha.exceptions.BasicException: com.sencha.exce
ptions.ExBuild: Failed to find any files for Plugin.field.TimePicker
[ERR]                   at com.sencha.cli.Commands$Cmd.create(Commands.java:117)

[ERR]                   at com.sencha.cli.Commands.findCommand(Commands.java:74)

[ERR]                   at com.sencha.cli.Commands.dispatch(Commands.java:43)
[ERR]                   at com.sencha.cli.Commands.dispatch(Commands.java:49)
[ERR]                   at com.sencha.cli.AbstractCommand.dispatch(AbstractComma
nd.java:182)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native M
ethod)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown S
ource)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unkno
wn Sour
[ERR]           ce)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.mozilla.javascript.MemberBox.invoke(MemberBox.jav
a:161)
[ERR]                   ... 75 more
[ERR]           Caused by: com.sencha.exceptions.ExBuild: Failed to find any fil
es for Plugin.field.TimePicker
[ERR]                   at com.sencha.tools.compiler.CompilerContext.processFile
Dependencies(CompilerContext.java:451)
[ERR]                   at com.sencha.tools.compiler.CompilerContext.processFile
Dependencies(CompilerContext.java:413)
[ERR]                   at com.sencha.tools.compiler.CompilerContext.processFile
Dependencies(CompilerContext.java:394)
[ERR]                   at com.sencha.tools.compiler.CompilerContext.doProcessDe
pendencies(CompilerContext.java:345)
[ERR]                   at com.sencha.tools.compiler.CompilerContext.processDepe
ndencies(CompilerContext.java:335)
[ERR]                   at com.sencha.tools.compiler.CompilerContext.processDepe
ndencies(CompilerContext.java:307)
[ERR]                   at com.sencha.command.compile.CompileCommands.getCache(C
ompileCommands.java:199)
[ERR]                   at com.sencha.command.compile.CompileCommands.getCache(C
ompileCommands.java:154)
[ERR]                   at com.sencha.command.compile.CompileCommands$BaseFilter
Command.<init>(CompileCommands.java:300)
[ERR]                   at com.sencha.command.compile.CompileCommands$IncludeCom
mand.<init>(CompileCommands.java:420)
[ERR]                   at com.sencha.command.compile.CompileCommands$UnionComma
nd.<init>(CompileCommands.java:425)
[ERR]                   at com.sencha.command.compile.CompileCommands.createUnio
n(CompileCommands.java:1068)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native M
ethod)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown S
ource)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unkno
wn Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at com.sencha.cli.Commands$Cmd.create(Commands.java:99)
[ERR]                   ... 84 more
[ERR]
[ERR]           Total time: 22 seconds
[ERR]           com.sencha.exceptions.BasicException: The following error occurr
ed while executing this line:
C:\wamp\www\gs-2\.sencha\app\build-impl.xml:137: com.sencha.exceptions.ExScript:
 Wrapped com.sencha.exceptions.BasicException: com.sencha.exceptions.ExBuild: Fa
iled to find any files for Plugin.field.TimePicker (x-app-build#273)
   runAppBuild (x-app-build:273)
   [anonymous] (x-app-build:545)
   x_app_build (x-app-build:543)
   <script> (anonymous:1)

c:\wamp\www\gs-2> 
```

* * *

时间选择器.js

```
Ext.define('Plugin.field.TimePicker', {
    extend: 'Ext.field.Text',
    alternateClassName: 'Plugin.form.TimePicker',
    xtype: 'timepickerfield',
    requires: [
        'Plugin.picker.Time',
        'Ext.DateExtras'
    ],

    config: {
        ui: 'select',

        /**
         * @cfg {Object/Ext.picker.Date} picker
         * An object that is used when creating the internal {@link Ext.picker.Date} component or a direct instance of {@link Ext.picker.Date}
         * Defaults to true
         * @accessor
         */
        picker: true,

        /**
         * @cfg {Boolean}
         * @hide
         * @accessor
         */
        clearIcon: false,

        /**
         * @cfg {Object/Date} value
         * Default value for the field and the internal {@link Ext.picker.Date} component. Accepts an object of 'year',
         * 'month' and 'day' values, all of which should be numbers, or a {@link Date}.
         *
         * Example: {year: 1989, day: 1, month: 5} = 1st May 1989 or new Date()
         * @accessor
         */

        /**
         * @cfg {Boolean} destroyPickerOnHide
         * Whether or not to destroy the picker widget on hide. This save memory if it's not used frequently,
         * but increase delay time on the next show due to re-instantiation. Defaults to false
         * @accessor
         */
        destroyPickerOnHide: false,

        /**
         * @cfg {String} dateFormat The format to be used when displaying the date in this field.
         * Accepts any valid date format. You can view formats over in the {@link Ext.Date} documentation.
         * Defaults to `Ext.util.Format.defaultDateFormat`.
         */
        dateFormat: null,

        /**
         * @cfg {Object}
         * @hide
         */
        component: {
            useMask: true
        }
    },

    initialize: function() {
        this.callParent();

        this.getComponent().on({
            scope: this,
            masktap: 'onMaskTap'
        });

        this.getComponent().input.dom.disabled = true;
    },

    syncEmptyCls: Ext.emptyFn,

    applyValue: function(value) {
        if (!Ext.isDate(value) && !Ext.isObject(value)) {
            return null;
        }

        if (Ext.isObject(value)) {
            return new Date(value.year, value.month - 1, value.day);
        }

        return value;
    },

    updateValue: function(newValue) {
        var picker = this._picker;
        if (picker && picker.isPicker) {
            picker.setValue(newValue);
        }

        // Ext.Date.format expects a Date
        if (newValue !== null) {
            this.getComponent().setValue(Ext.Date.format(newValue, 'H:i'));
        } else {
            this.getComponent().setValue('');
        }

        if (this._picker && this._picker instanceof Plugin.picker.Time) {
            this._picker.setValue(newValue);
        }
    },

    /**
     * Updates the date format in the field.
     * @private
     */
    updateDateFormat: function(newDateFormat, oldDateFormat) {
        var value = this.getValue();
        if (newDateFormat != oldDateFormat && Ext.isDate(value)) {
            this.getComponent().setValue(Ext.Date.format(value, 'H:i'));
        }
    },

    /**
     * Returns the {@link Date} value of this field.
     * If you wanted a formated date
     * @return {Date} The date selected
     */
    getValue: function() {
        if (this._picker && this._picker instanceof Plugin.picker.Time) {
            return this._picker.getValue();
        }

        return this._value;
    },

    /**
     * Returns the value of the field formatted using the specified format. If it is not specified, it will default to
     * {@link #dateFormat} and then {@link Ext.util.Format#defaultDateFormat}.
     * @param {String} format The format to be returned
     * @return {String} The formatted date
     */
    getFormattedValue: function(format) {
        var value = this.getValue();
        return (Ext.isDate(value)) ? Ext.Date.format(value, format || 'H:i') : value;
    },

    applyPicker: function(picker, pickerInstance) {
        if (pickerInstance && pickerInstance.isPicker) {
            picker = pickerInstance.setConfig(picker);
        }

        return picker;
    },

    getPicker: function() {
        var picker = this._picker,
            value = this.getValue();

        if (picker && !picker.isPicker) {
            picker = Ext.factory(picker, Plugin.picker.Time);
            if (value != null) {
                picker.setValue(value);
            }
        }

        picker.on({
            scope: this,
            change: 'onPickerChange',
            hide  : 'onPickerHide'
        });
        Ext.Viewport.add(picker);
        this._picker = picker;

        return picker;
    },

    /**
     * @private
     * Listener to the tap event of the mask element. Shows the internal DatePicker component when the button has been tapped.
     */
    onMaskTap: function() {
        if (this.getDisabled()) {
            return false;
        }

        if (this.getReadOnly()) {
            return false;
        }

        this.getPicker().show();

        return false;
    },

    /**
     * Called when the picker changes its value
     * @param {Ext.picker.Date} picker The date picker
     * @param {Object} value The new value from the date picker
     * @private
     */
    onPickerChange: function(picker, value) {
        var me = this;

        me.setValue(value);
        me.fireEvent('change', me, me.getValue());
    },

    /**
     * Destroys the picker when it is hidden, if
     * {@link Ext.field.DatePicker#destroyPickerOnHide destroyPickerOnHide} is set to true
     * @private
     */
    onPickerHide: function() {
        var picker = this.getPicker();
        if (this.getDestroyPickerOnHide() && picker) {
            picker.destroy();
            this._picker = true;
        }
    },

    reset: function() {
        this.setValue(this.originalValue);
    },

    // @private
    destroy: function() {
        var picker = this._picker;

        if (picker && picker.isPicker) {
            picker.destroy();
        }

        this.callParent(arguments);
    }
    //<deprecated product=touch since=2.0>
}, function() {
    this.override({
        getValue: function(format) {
            if (format) {
                //<debug warn>
                Ext.Logger.deprecate("format argument of the getValue method is deprecated, please use getFormattedValue instead", this);
                //</debug>
                return this.getFormattedValue(format);
            }
            return this.callOverridden();
        }
    });

    /**
     * @method getDatePicker
     * @inheritdoc Ext.field.DatePicker#getPicker
     * @deprecated 2.0.0 Please use #getPicker instead
     */
    Ext.deprecateMethod(this, 'getTimePicker', 'getPicker');
    //</deprecated>
}); 
```

* * *

在 app.js 中

```
launch: function() {

    Ext.Viewport.add([
    {
        xtype: 'loginview'
    },
    {
        xtype: 'mainview'
    }
    ]);

    Ext.Loader.setPath('Plugin', './plugin');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:02:09.440

`Ext.Loader.setPath`在外面试试`Ext.application`。您的应用程序在浏览器中运行对吗？您是否`require` 在 app.js 中为此`Timepicker.js`文件添加了一个。因为，它是一个插件，你可以添加 require -

`requires:['Plugin.field.TimePicker']` ST 会自动获取在构建应用程序时提到的文件，`require`因此它是放置您需要的所有内容的好地方。此外，我认为文件/目录名称也区分大小写。

# c# - 将来自不同 MEF 插件的 ToolStripMenuItems 合并到一个 MenuStrip 中

> ID：14871113
> 
> 赞同：2
> 
> 时间：2013-02-14T09:03:10.350
> 
> 标签：c#, winforms, plugins, mef

目前我尝试将不同的合并`ToolStripMenuItems`为一个`MenuStrip`。因此，我创建了一个名为`IMenu`. 这包括`ToolStripMenuItem`来自 MEF 插件的一个，并且应该加载到主窗口菜单条中。问题是，如果我运行应用程序，我会得到`MenuStrip`两个具有相同名称的 DropDown 元素。但我想要的是我可以将 MEF 插件的菜单绑定到应用程序的 MenuStrip 中而无需重复输入，例如如何为 MEF 插件制作一个好的菜单结构？

示例：我从主应用程序中获得了此条目

文件
|--> 新建
|--> 保存
|--> 导入
|--> 导出

然后我为导入/导出特定类型创建了一个插件。因此，我必须在导入/导出下动态添加菜单条目。但是怎么做？你的解决方案如何？

文件
|--> 新建
|--> 保存
|--> 导入
|--> 到 Word
|--> 导出
|--> 从 Word

这是我的代码：首先是插件的接口

```
public interface IMenu
{
  ToolStripMenuItem ToolStripItem { get; }
} 
```

这是菜单项的插件示例

帮助
|--> 更新

```
[Export(typeof(IMenu))]
class UpdateMenuItems : IMenu
{
  System.Windows.Forms.ToolStripMenuItem helpMenuItem;
  System.Windows.Forms.ToolStripMenuItem updateMenuItem;

  public System.Windows.Forms.ToolStripMenuItem ToolStripItem
  {
    get { return helpMenuItem; }
  }

  public UpdateMenuItems()
  {
    InitializeComponent();
  }

  private void InitializeComponent()
  {
    this.updateMenuItem = new System.Windows.Forms.ToolStripMenuItem();
    this.updateMenuItem.Name = "Update";
    this.updateMenuItem.Size = new System.Drawing.Size(94, 20);
    this.updateMenuItem.Text = "Update";
    this.updateMenuItem.MergeIndex = 1;
    this.updateMenuItem.MergeAction = System.Windows.Forms.MergeAction.Insert;
    this.updateMenuItem.Click += updateMenuItem_Click;

    this.helpMenuItem = new System.Windows.Forms.ToolStripMenuItem();
    this.helpMenuItem.DropDownItems.AddRange(new System.Windows.Forms.ToolStripItem[] {
          this.updateMenuItem});
    this.helpMenuItem.Name = "aboutToolStripMenuItem";
    this.helpMenuItem.Size = new System.Drawing.Size(44, 20);
    this.helpMenuItem.MergeAction = System.Windows.Forms.MergeAction.Insert;
    this.helpMenuItem.Text = "Help";

  }

  void updateMenuItem_Click(object sender, EventArgs e)
  {
    UpdateController update = new UpdateController();
    update.Execute();
  } 
```

这是另一个 MEF 插件，它也具有根元素“帮助”

```
[Export(typeof(IMenu))]
class MenuItem : IMenu
{
  public ToolStripMenuItem ToolStripItem
  {
    get { return testItem; }
  }

  private System.Windows.Forms.ToolStripMenuItem testItem;
  private System.Windows.Forms.ToolStripMenuItem unterpunk1;
  private System.Windows.Forms.ToolStripMenuItem unterpunk2;

  public MenuItem()
  {
    InitializeComponent();
  }

  public void InitializeComponent()
  {
    this.testItem = new System.Windows.Forms.ToolStripMenuItem();
    this.testItem.Name = "aboutToolStripMenuItem";
    this.testItem.Size = new System.Drawing.Size(94, 20);
    this.testItem.Text = "Help";
    this.testItem.Click += testItem_Click;

    unterpunk1 = new ToolStripMenuItem();
    unterpunk1.Text = "Speichern";
    unterpunk1.MergeAction = MergeAction.Insert;
    unterpunk1.MergeIndex = 1;
    testItem.DropDownItems.Add(unterpunk1);

    unterpunk2 = new ToolStripMenuItem();
    unterpunk2.Text = "Prüfen";
    unterpunk2.MergeAction = MergeAction.Insert;
    unterpunk2.MergeIndex = 2;
    testItem.DropDownItems.Add(unterpunk2);

  }

  void testItem_Click(object sender, EventArgs e)
  {
    //
  } 
```

在我的主窗体中，我将所有内容添加到 MenuStrip。

```
 foreach (var item in MenuItems)
  {
    this.menuStrip1.Items.Add(item.ToolStripItem);
  } 
```

`ToolStripMenuItems`不自动合并？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T19:03:54.027

我非常怀疑是否有一个自动功能可以做到这一点，所以这就是我如何处理手动解决方案。有一个陷阱，那就是罐子`ToolStripItem`在任何时候都只有一个父母。因此，将其添加到现有菜单会将其从另一个菜单中删除，您需要考虑到这一点（在我的方法中通过检查该项目是否已经拥有所有者来完成）。如果这是一个问题，您需要先克隆子项。

编辑：我意识到你可能需要一个递归函数，所以我替换了代码。类 MenuItem2 包含 Help/Speichern/Save As/About 项。

```
public Form1()
{
    InitializeComponent();

    List<IMenu> menuItems = new List<IMenu>() { new UpdateMenuItems(), new MenuItem(), new MenuItem2() };
    MergeMenus(this.menuStrip1.Items, menuItems.Select(m => m.ToolStripItem));
}

/// <summary>
/// Recursive function that merges two ToolStripItem trees into one
/// </summary>
/// <param name="existingItems">Collection of existing ToolStripItems</param>
/// <param name="newItems">Collection of new ToolStripItems. IEnumerable instead of ToolStripItemCollection to allow for items without an owner</param>
private void MergeMenus(ToolStripItemCollection existingItems, IEnumerable<ToolStripItem> newItems)
{
    int count = newItems.Count();
    int removedFromCollection = 0; // keep track of items that are removed from the newItems collection 
    for (int i = 0; i < count; i++)
    {
        ToolStripItem newItem = newItems.ElementAt(i - removedFromCollection);
        bool merged = false;
        string key = newItem.Name; // the items are identified and compared by its name
        if (existingItems.ContainsKey(key))
        {
            ToolStripItem existingItem = existingItems[key];
            if (existingItem != null && existingItem.GetType().Equals(newItem.GetType()))
            {
                // check if the matching items are ToolStripMenuItems. if so, merge their children recursively
                if (newItem is ToolStripMenuItem)
                    MergeMenus(((ToolStripMenuItem)existingItem).DropDownItems, ((ToolStripMenuItem)newItem).DropDownItems.Cast<ToolStripItem>());

                // do not add this particular item (existing item with same name and type found)
                merged = true;
            }
        }

        if (!merged) // newItem does not exist in existingItems (or not as the same type)
        {
            // if there was an owner, the item will be removed from the collection and the next element's index needs to be adjusted
            if (newItem.Owner != null) 
                removedFromCollection++;

            // add item to the existing tree
            existingItems.Add(newItem);
        }
    }
} 
```

经过测试，似乎有效：

![在此处输入图像描述](../Images/cb4141842eddd53ac83f2cff9fa9d1a7.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T07:15:33.417

我通过 IMenuService 使用 MVVM 和 Unity 实现了一个主菜单。我在同一主题上发布了对我自己的问题的相当完整的答案（但针对菜单而不是工具条）。我认为您可以为 ToolStrip 做一些与我在代码中所做的非常相似的事情。

请看下面的答案：

[使用 MVVM 生成菜单的 DataTemplate](https://stackoverflow.com/questions/9502680/datatemplate-to-generate-menu-with-mvvm/12843540#12843540)

# matlab - 如何在matlab中改变触发角控制以获得hvdc传输系统的各种操作模式

> ID：14871120
> 
> 赞同：1
> 
> 时间：2013-02-14T09:03:39.917
> 
> 标签：matlab

我在 HVDC 做项目。我已经构建了整流器和逆变器站，以通过 HVDC 传输电力。找到了 matlab 演示 hvdc 站。我想知道如何改变整流器和逆变器站的触发角以获得 hvdc 站的各种运行模式，例如当交流侧电压降低时和交流电压进一步降低时......我想获得高压直流站的各种运行模式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T09:47:14.850

在电子堆栈交换上有一个很好的答案 - [https://electronics.stackexchange.com/questions/107460/average-output-voltage-of-a-fully-controlled-full-wave-rectifier](https://electronics.stackexchange.com/questions/107460/average-output-voltage-of-a-fully-controlled-full-wave-rectifier)

如果您想深入了解这背后的理论，我建议您开始进一步阅读触发脉冲的控制 - 例如[，双向 HVDC 上的这个 PDF](http://homepages.abdn.ac.uk/d.jovcic/pages/Pap436.pdf)提供了一个很好的概述。但是，它非常依赖于拓扑（转换器的配置方式）

# sockets - select() 与破损管道有关的行为

> ID：14871123
> 
> 赞同：1
> 
> 时间：2013-02-14T09:03:54.577
> 
> 标签：sockets, select

我正在使用`select()`调用读取和写入套接字

如何检测另一端是否关闭了套接字？本质上如何在使用时检测破损的管道`select()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:06:06.480

如果套接字从另一端正常关闭，select 将报告`read`套接字的条件。如果连接因其他原因丢失，将报告其中一个`read`或条件。`error`

# c# - 在 AutoCAD 中关闭 C# dll

> ID：14871128
> 
> 赞同：1
> 
> 时间：2013-02-14T09:04:24.130
> 
> 标签：c#, forms, dll, exit

我为 AutoCAD 编写了一个 C# 插件，它只是一个带有一些表单和用户输入等的 dll。是否可以只关闭dll？

我试过了：

```
 Application.Exit(); 
```

但这确实关闭了整个 AutoCAD 应用程序，这不是我想要的。

它也无助于关闭表单，因为我有多个无法全局访问的表单。

我只想添加一些代码来演示我可能想要关闭插件的位置：

```
// first class

            [CommandMethod("PluginName"]
            public static void StartPlugin()
            {
                 LoginWindow login = new LoginWindow();
                 DialogResult loginResult= login.ShowDialog();

                 if (loginResult== DialogResult.OK)
                 {
                    StartInventoryPropertiesSelection();
                 }
            }

// second class

    public partial class LoginWindow : Form
    {

        public LoginWindow()
        {
               InitializeComponent();

                // Cancel here
                Plugin.Quit // ==> this is what I am looking for
        }

    } 
```

# php - 这三个选项中的哪一个可以最快地填充我的数据库表？

> ID：14871140
> 
> 赞同：1
> 
> 时间：2013-02-14T09:05:01.553
> 
> 标签：php, mysql, curl, xmlreader

我有一个（巨大的：640 万行）数据库表，其中三列如下：

```
URL     Title      Description 
```

现在只填充了 URL 列，其中包含来自网络的各种 url。我必须在每一行的 url 中添加标题和元描述。我认为我可以通过三种方式做到这一点：

选项 1：使用 php 和 CURL 转到每个 url 并获取标题和 meta:description。（即使使用选项 2 或 3，我也必须至少对部分 url 执行此操作）。

选项 2：我有一个 DMOZ xml 文件，其中包含数百万个元素，如下所示：

```
 <ExternalPage about="http://animation.about.com/">
       <d:Title>About.com: Animation Guide</d:Title>
       <d:Description>Keep up with developments in online animation for all skill levels.     Download tools, and seek inspiration from online work.</d:Description>
       <topic>Top/Arts/Animation</topic>
    </ExternalPage>
    <ExternalPage about="http://www.toonhound.com/">
       <d:Title>Toonhound</d:Title>
       <d:Description>British cartoon, animation and comic strip creations - links, reviews  and news from the UK.</d:Description>
       <topic>Top/Arts/Animation</topic>
    </ExternalPage> 
```

等等

我可以使用 xmlreader 比较每个 ExternalPage-about 中的 url，以查看它是否与我的表中的 640 万个 url 中的一个匹配，如果匹配，则添加标题和描述。

选项 3：我可以将上述所有 dmoz 数据写入单独的数据库表（再次使用 xmlreader），这也需要时间，然后以某种方式在两个表上使用 JOIN 和 SELECT 来获取我需要的信息。

对于这些 url，选项 2 或 3 会比仅对所有 url 使用选项 1 更快吗？如果是，这两个选项中哪一个会更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:24:05.697

它只是一个脚本，你只会运行一次。如果它不是很快也没关系。顺便说一句，600 万行并不是太大，在任何像样的计算机上都需要几分钟。

CURL 解决方案根本不是一种选择！你知道获取 600 万个 URL 需要多长时间吗？！！

将 XML 插入数据库，并根据需要进行查询。

**编辑**：要捕获数百万个 URL（可能需要数周才能完成！）：

1.  获得[便宜的 vps](http://www.lowendbox.com/)服务器（比您的家用计算机更快的连接）。
2.  将 url 导出到文本文件。
3.  使用 wget 下载每个 URL（不要忘记使用多个 wget 进程）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:29:37.333

假设“更快”意味着更新 URL 表的时间更少，那么选项 3 似乎是最好的选择。

您可以使用 XML 中的记录填充另一个表，然后使用 JOIN 更新您的主表。

# azure - 工作角色实例不健康

> ID：14871145
> 
> 赞同：2
> 
> 时间：2013-02-14T09:05:11.877
> 
> 标签：azure

我部署的工作人员角色之一显示为不健康，尽管它运行良好（为每个请求完成所需的工作）。我在那里看不到任何运行时异常，并且状态显示为正在回收。

谁能给我一个提示，为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:34:05.027

遵循其中一种（或两种）方法来获取有关您的应用程序中正在发生的事情的更多洞察信息。

*   配置诊断 -[一篇关于如何配置它的好文章](http://www.windowsazure.com/en-us/manage/services/cloud-services/how-to-monitor-a-cloud-service/)。
*   启用远程桌面 -[如何配置对角色实例的远程访问](http://www.windowsazure.com/en-us/manage/services/cloud-services/how-to-configure-a-cloud-service/#remoteaccess)

收集数据一段时间 - 1/2 或 1 小时。检查诊断日志。使用远程桌面登录并检查 Windows 事件日志。更好地检测您的代码。

工人角色的回收通常通过退出实现`Run`方法来调用`RoleEntryPoint`（通常`WorkerRole.cs`）。你永远不会退出这个方法。未处理的异常可能是`Run`方法终止的原因。.NET 运行时中未处理的异常通常记录到 Windows 事件日志中。

# c - 循环中的 C Scanf

> ID：14871146
> 
> 赞同：0
> 
> 时间：2013-02-14T09:05:13.233
> 
> 标签：c

它第一次工作，第二次执行时，它会跳过第二个 scanf 函数。从几页谷歌后，注意到这是在缓冲中添加 \n 的 scanf 函数的行为，为了解决这个问题，我在 scanf 之后添加了 fflush(stdin) 并且它确实有效，但是当第二次执行时，它给我一个错误的结果。有人可以指导我这个程序有什么问题吗？

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
char UserInput[50];
int i = 0;
int exit;

do{

printf("Please enter a string (less than 50 character): ");
scanf("%[a-z,A-Z, ,]s",&UserInput);

while(UserInput[i] != '\0' && i<50)
{
    i++;
}

if (i==50)
    printf("The string is too long\n");
else
    printf("The length of the string is %d\n",i);

printf("To continue, please key in any numbers other than 0: ");
scanf("%d",&exit);
    fflush(stdin);
}while(exit !=0);

system("PAUSE");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:06:27.713

您不使用＆符号来读取数组。将行更改为：

```
scanf("%[a-z,A-Z, ,]s",UserInput); 
```

exit 也是一个字符数组，而不是整数。将 exit 更改为 int 或将 scanf 更改为: `scanf("%s",exit);`。相信我exit[对于](http://en.cppreference.com/w/c/program/exit)`C`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:21:21.150

几个错误和备注：

1.  使用扫描集格式 ( `%[a-zA-Z ]`) 时，您不应该`s`在末尾使用 an，逗号也不应该在那里。
2.  您应该在调用时检查返回码，`scanf`以确保您确实成功地阅读了应该阅读的内容。
3.  你有溢出`UserInput`缓冲区的风险 - 它只允许长度为 49 的字符串，但在填充缓冲区时你没有施加这样的限制。
4.  您不会在每次迭代后完全`i`重置。`0`
5.  `exit`应该有 type `int`，因为您使用格式`%d`来填充它。正如在别处指出的那样，`exit`在 C 中不是一个特别好的变量名（有一个名为 的标准函数`exit`）。
6.  您使用多个`scanf`调用而没有正确处理读取前一次读取的任何剩余内容。最好逐行（使用`fgets`例如）将输入读取到缓冲区中，然后从该缓冲区中解析出您需要的数据。
7.  不要`fflush`在输入流上使用（如`stdin`）。它仅用于输出流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:19:08.350

有几个问题。

您计算长度的循环有点毫无意义，而且它在运行一次后也不会重置`i`，所以它会在第二次尝试时中断。

删除循环，`strlen()`如果您觉得必须计算长度，请改用。

更好的是，删除使用`sscanf()`并`fgets()`改为使用。

请注意，`&UserInput`这有点毫无意义，名称`UserInput`将“衰减”为指向`&UserInput[0]`函数调用中第一个元素 () 的指针，并且是陈述它的最佳方式：

```
fgets(UserInput, sizeof UserInput, stdin); 
```

我会怎么写。不要忘记检查返回值。

# bash - 如果 find -exec 在其中一个文件上失败，如何退出

> ID：14871147
> 
> 赞同：20
> 
> 时间：2013-02-14T09:05:13.937
> 
> 标签：bash, find, exec, exit

我想运行命令

```
find some/path -exec program \{} \; 
```

但我希望 find 命令在命令执行后立即退出

```
 program \{} 
```

在找到的任何文件上都失败。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T09:49:12.247

我认为不可能实现你想要的，只有`find -exec`.

最接近的替代方法是对 进行管道`find`，`xargs`如下所示：

```
find some/path -print0 | xargs -0 program 
```

或者

```
find some/path -print0 | xargs -0L1 program 
```

如果程序以非零退出状态终止，这将退出

*   `print0`用于处理名称中带有换行符的文件
*   `-0``-print0`使用时需要
*   `L1`告诉`xargs`程序一次用一个参数执行程序（默认是在一次程序执行中添加所有参数）

如果你只有健全的文件名，你可以像这样简化：

```
find some/path | xargs program 
```

或者

```
find some/path | xargs -L1 program 
```

最后，如果程序需要多个参数，您可以使用`-i`组合 with `{}`。例如

```
find some/path | xargs -i program param1 param2 {} param4 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T12:24:00.627

除了其他很好的答案之外，GNU find （至少）还有一个`-quit`谓词：

```
find path -other -predicates \( -exec cmd {} \; -o -quit \) 
```

`-quit`谓词[肯定是非标准的](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/find.html)，并且在 BSD 查找中不存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T09:36:05.127

您可以将输出从管道`find`传输到另一个子进程并使用`while`/ `break`：

```
find some/path | while read f
do
    program $f
    if [ $? -ne 0 ]
    then
        break
    fi
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-05T10:04:07.967

这是我的“构建系统”示例，它在遇到第一个编译器错误后停止（基于 Kojiro 的回答，这对我来说并不适用）：

（对转义括号的需求是真实的。我知道这很痛苦。）

```
find -name '*.cpp' \( -print -a -exec g++ -c {} \; -o -quit \) 
```

我想为位于当前目录及以下目录中的所有 C++ 文件构建一个静态库。

在运行编译器之前，我想要文件`-print`-ed，然后`-exec`-ed，但是当它失败时（并且`stderr`在`-quit`.

`-a`is like `&&`and `-o`is like `||`in shell 或 C.

没有括号，GNU find 通过首先尝试最可能的条件来“优化”查询，这就是 - 我猜 - `-quit`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-07T21:46:31.697

```
% _find_trap() {
>   _find_pid="${1}" ; _find_ops="${2}" ; _find_trigger="${3}"
>   shift 3 && set -- "${@}" 
>   trap 'kill -s INT "-${_find_pid}" \
>     unset _find_pid _find_ops _find_trigger ; set - \
>     1>&2 printf "%s" "find killed due to trap" \
>     exit [CODE] ' TRAP
>  while { sh -c "${_find_ops} ${@}"} {
>    [ "${_find_trigger}" ] && { kill -s TRAP "-${_find_pid}" ; break ; }
>    ...
>  }
> export -f _find_trap ; find . -execdir _find_trap \"$$\" \"${cmds}\" \
>   \"${testable_trigger}\" "{}" + 
```

# sql - 通过加入分组（多对多）

> ID：14871150
> 
> 赞同：3
> 
> 时间：2013-02-14T09:05:25.890
> 
> 标签：sql, tsql

我有 2 个表，产品和组件

```
CREATE TABLE Product(
ProductId uniqueidentifier DEFAULT NEWID(),
ProductName nvarchar(25) NOT NULL,
CONSTRAINT PK_Product PRIMARY KEY (ProductId))

CREATE TABLE Component
(
    ComponentId uniqueidentifier DEFAULT NEWID(),
    ComponentName nvarchar(25) NOT NULL,
    CONSTRAINT PK_Component PRIMARY KEY (ComponentId)
) 
```

我需要一个“多对多”的连接，所以我创建了第三个表

```
CREATE TABLE Product_Component(
idProduct_Component uniqueidentifier DEFAULT NEWID(),
idProduct uniqueidentifier, 
idComponent uniqueidentifier,

 CONSTRAINT PK_idProduct_Component PRIMARY KEY (idProduct_Component),

CONSTRAINT FK_idComponent FOREIGN KEY (idComponent)
REFERENCES Component (ComponentId),
CONSTRAINT FK_idProduct FOREIGN KEY (idProduct)
REFERENCES Product (ProductId)) 
```

我添加了一些数据，现在我可以`select`从表格中获取。产品可以有很多组件，组件在很多产品中。现在我有`Product`2 行 - 蛋糕和面包。在`Component`我有 3 行 - 糖、盐和面粉。我在表格中添加了值，`Product_Component`现在我有一些想法，比如蛋糕包括糖和面粉，面包包括盐和面粉。我使用这样的查询

```
SELECT Product.ProductName, Component.ComponentName FROM Product_Component
JOIN Component 
ON Product_Component.idComponent = Component.ComponentId 
JOIN Product
ON Product_Component.idProduct = Product.ProductId
WHERE Product.ProductName = 'Bread' 
```

我看到所有面包的成分，但每一行都像

```
bread | salt
bread | flour 
```

我想看看这样的东西

```
bread | salt
      | flour
      | some other component 
```

我试过

```
SELECT Product.ProductName, Component.ComponentName FROM Product_Component
JOIN Component 
ON Product_Component.idComponent = Component.ComponentId 
JOIN Product
ON Product_Component.idProduct = Product.ProductId
WHERE Product.ProductName = 'Bread'
GROUP BY Product.ProductName 
```

但我有消息

```
Column 'Component.ComponentName' is invalid in the select list because it is not contained in either an aggregate function or the GROUP BY clause. 
```

请帮助做出正确的查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:19:02.367

我认为在您的客户端应用程序中执行此操作会更好、更容易。SQL 与格式化无关。

**但是**，如果您想在 SQL 中以任何方式执行此操作，您可以使用[`FOR XML`](http://msdn.microsoft.com/en-us/library/ms178107%28v=sql.100%29.aspx)to 对每个分组产品的组件名称进行分组连接，如下所示：

```
SELECT 
  p.ProductName, 
  STUFF((
    SELECT ', ' + c2.ComponentName 
    FROM Component AS c2
    WHERE c2.idComponent = pc.idComponent 
    FOR XML PATH (''))
  ,1,2,'') AS ComponentsNames
FROM Product_Component AS pc
JOIN Component         AS c ON pc.idComponent = c.ComponentId 
JOIN Product           AS p ON pc.idProduct   = p.ProductId
WHERE p.ProductName = 'Bread'
GROUP BY p.ProductName; 
```

# android - SqlLite 如何找出包含日期格式的请求？

> ID：14871154
> 
> 赞同：0
> 
> 时间：2013-02-14T09:05:42.410
> 
> 标签：android, sqlite

我正在开发一个 android 项目，该项目从数据库中检索信息并将其存储（使用 SqLite for Java 端）。

这是我的要求：

```
String Query = 

"SELECT xxx.APP_ID " + "FROM xxx INNER JOIN yyy ON
xxx.APP_ID = yyy.APP_ID " +

"WHERE date('"+mydate+"') BETWEEN date(xxx.APP_DATEBEGIN) AND date(xxx.APP_DATEEND)
" +

"AND (yyy.USR_ID = " + myid + ") " +

"ORDER BY xxx.APP_DATEBEGIN"; 
```

`mydate`格式为：`YYYY-MM-DD HH:MM:SS`与数据库中的日期格式相同。

我使用转换执行相同的请求（Sql 服务器端），效果很好。我认为该关键字`date`在 SqlLite 中不可用。

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:16:06.720

在 SQLite 中，您不需要使用任何函数来表示日期 - 只需使用包含日期的纯字符串：[SQLFiddle demo](http://www.sqlfiddle.com/#!5/9eecb/4)。

这与[文档](http://www.sqlite.org/datatype3.html)一致：

> SQLite 没有为存储日期和/或时间预留存储类。相反，SQLite 的内置日期和时间函数能够将日期和时间存储为 TEXT、REAL 或 INTEGER 值：
> 
> *   TEXT 作为 ISO8601 字符串（“YYYY-MM-DD HH:MM:SS.SSS”）。
> *   REAL 作为儒略日数字，根据预测的公历，自公元前 4714 年 11 月 24 日格林威治中午以来的天数。
> *   INTEGER 作为 Unix 时间，自 1970-01-01 00:00:00 UTC 以来的秒数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:16:54.317

这里：

[http://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)

在第 1.2 节中，您可以看到约会格式的选项（我还建议将此站点添加为书签，因为它非常有用）

我个人喜欢使用 UNIX UTC 时间系统，因为使用 >、< 和 = 很容易与其他日期进行比较，而且它有点像一个通用系统，因为它不关心区域化。

# actionscript-3 - swiftsuspenders 构造函数参数？

> ID：14871155
> 
> 赞同：0
> 
> 时间：2013-02-14T09:05:42.960
> 
> 标签：actionscript-3, dependency-injection, robotlegs, swiftsuspenders

一旦我在一些关于编码指南的谷歌文档中阅读到一个类的每个新实例都应该来自一个工厂类，我就使用了 SwiftSuspender。

现在我的问题是，是否可以使用 SS 的依赖注入创建需要构造函数参数的对象的新实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:21:29.760

是的，Swiftsuspenders 完全支持构造函数注入。

您可以注入需要类实例的字段（或方法或其他构造函数），也可以使用`injector.getInstance`直接查询注入器以获取使用注入器的映射创建的实例。

# java - 删除函数尝试删除外键

> ID：14871156
> 
> 赞同：0
> 
> 时间：2013-02-14T09:05:49.637
> 
> 标签：java, database, orm, mapping, entity

我遇到了以下问题。当我尝试删除我的实体时，它会自动尝试删除外键对象。

这是我的实体：

```
@Entity
public class ScmoKomponente implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    @Size(min = 1, max = 50, message = "{standard}")
    private String name;
    @Temporal(javax.persistence.TemporalType.DATE)
    private Date datum;
    @ManyToOne(cascade = CascadeType.ALL)
    private ScmoProjekt projekt;
    @ManyToOne(cascade = CascadeType.ALL)
    private SupplierUser lieferant;

    public SupplierUser getLieferant() {
        return lieferant;
    }

    public void setLieferant(SupplierUser lieferant) {
        this.lieferant = lieferant;
    }

    public ScmoProjekt getProjekt() {
        return projekt;
    }

    public void setProjekt(ScmoProjekt projekt) {
        this.projekt = projekt;
    }

    public Date getDatum() {
        return datum;
    }

    public void setDatum(Date datum) {
        this.datum = datum;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof ScmoKomponente)) {
            return false;
        }
        ScmoKomponente other = (ScmoKomponente) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "scmo.model.project.ScmoKomponente[ id=" + id + " ]";
    }

} 
```

删除功能：

```
public void deleteScmoKomponente(ScmoKomponente ScmoKomponente) {
    em.remove(em.merge(ScmoKomponente));
} 
```

和电话：

```
public String deleteScmoKompo() {
    ss.deleteScmoKomponente(selectedKompo);
    selectedKompo = null;
    return scmoEditKompo();
} 
```

当我现在尝试删除 scmoKomponent 时，它会自动删除数据库中的 ScmoProjekt 和 SupplierUser 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:18:26.047

如果我正确地知道您是否设置 `CascadeType.ALL`了休眠或 jpa 将在您更改父实体时对子元素执行所有操作，例如更新、保存、删除。`@Many-to-One`因此，如果您想修复您的程序，只需从注释中删除级联属性。

[您可以在此处](http://www.developer.com/open/article.php/10930_3559931_3/Hibernate-Basics.htm)找到有关级联类型的一些信息

# symfony - 如何将日期时间字段拆分为日期和时间？

> ID：14871157
> 
> 赞同：1
> 
> 时间：2013-02-14T09:05:55.597
> 
> 标签：symfony, twig

我有一列具有数据类型`datetime`，我想以拆分方式在树枝中获取此字段，例如

```
Enter date <textbox to take date in format=YYYY:M:d>
Enter time <select box for time (format=HH:MM:SS)> 
```

我想以与表格相同的格式插入表格

例如：`2013-02-14 12:02:32`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:11:10.667

我添加了日期和时间的小部件并且它有效

```
 $builder->add('startDate','datetime',array(
                'date_widget'=>'single_text',
                'date_format'=>'d-M-y',
                'time_widget' => 'choice'
        )) 
```

我认为这将是实现我所期望的方式。

# python - Python Gae Ajax，如何实现通知？

> ID：14871160
> 
> 赞同：2
> 
> 时间：2013-02-14T09:06:04.490
> 
> 标签：python, ajax, google-app-engine

我有这个应用程序想要实现一个与 Stack Overflow 完全相同的通知系统。当有人回答或回复问题或主题时。我希望线程的原始用户能够在站点的顶部栏中得到通知。我见过能够做到这一点的谷歌频道 api。但是如果我们将它用于通知，这样做太昂贵了。我也阅读过有关 Node.js Web 套接字的信息。但它看起来不够简单。有谁知道我在哪里可以找到一个简单的方法来做到这一点？也许只是一个 Ajax 调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:22:36.490

你可以试试[PubNub](http://www.pubnub.com/)。

尽管您可以使用 Channel API 完成工作，但实现起来有点困难，因为它只支持一对一的通道，如果您想向多个客户端发送一条消息，则必须发送多条消息。使用 PubNub，您可以简单地订阅一个频道，无论您有多少订阅者，他们都会收到消息。

他们有许多不同语言的示例，并且包含 Google App Engine，因此请查看[PubNub 开发中心](http://www.pubnub.com/devcenter)了解更多信息。

# spring - 当我们保存答案时，休眠异常行已更新或删除异常

> ID：14871163
> 
> 赞同：0
> 
> 时间：2013-02-14T09:06:23.883
> 
> 标签：spring, hibernate

在这里，我提供了引发异常的休眠项目代码

例外：

```
org.hibernate.StaleObjectStateException:Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): 
```

当我们调用下面提到的方法时，我想让这个线程安全

```
public String saveAnswer(String assignmentid, String answerid, String answer) throws Exception {

        getStudentManager().logRequestedAnswer(answerid, answer);

        User user = getUserManager().getCurrentUser();

        HttpSession session = WebContextFactory.get().getSession();
        int practiceElapsedTime = getStudentManager().touchPracticeTime(assignmentid, session);
        long practiceUpdateTime = ((Date) session.getAttribute("student_current_practice_last_update")).getTime();

        StudentAnswer savedAnswer = getStudentManager().saveAnswer(user, assignmentid, answerid, answer);

        Map<String, Object> result = new HashMap<String, Object>();
        result.put("answerid", savedAnswer.getAnswerKey().getObjectid());
        result.put("answer", savedAnswer.getAnswer());

        //we're synching the client's time with the server on saves
        result.put("practiceElapsedTime", practiceElapsedTime);
        result.put("practiceUpdateTime", practiceUpdateTime);

        if (savedAnswer.getAssignmentStatus().isCompleted())
            result.put("progress", savedAnswer.getAssignmentStatus().getPercent());
        else
            result.put("progress", savedAnswer.getAssignmentStatus().getProgress());

        StringWriter json = new StringWriter();
        ObjectMapper mapper = new ObjectMapper();
        mapper.writeValue(json, result);
        return json.toString();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:53:59.273

There are two things i learned with hibernate. First, if you save the same object multiple times rapidly you may have a StaleObjectStateException. This is due to versioning on the table. A simple solution is to disable it. You should consider locking too if your table is accessed by multiple threads: [http://docs.jboss.org/hibernate/orm/4.0/devguide/en-US/html/ch05.html](http://docs.jboss.org/hibernate/orm/4.0/devguide/en-US/html/ch05.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:40:39.303

这可能意味着在提交事务之前，您尝试更新的行已经被其他线程更新。检查同一条记录是否同时被多个线程处理。

# hibernate - 从休眠 3 调用 StoredProcedure 导致（要遍历的节点不能为空！）

> ID：14871167
> 
> 赞同：0
> 
> 时间：2013-02-14T09:06:29.867
> 
> 标签：hibernate, jpa

由于设计限制，我需要使用`entityManager.createQuery()`API 从休眠中调用 SP。在“”中调用此`entityManager.createQuery("call xxx(:caseId)")`结果`java.lang.IllegalArgumentException: node to traverse cannot be null!`。我尝试了其他选项，例如 `entityManager.createQuery("call xxx(?1)")`etc..all 导致相同的错误。有什么我想念的吗？我知道该错误非常普遍，并且与某种语法问题有关。

任何人都可以让我知道调用 SP 的正确语法`createQuery`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:06:04.413

你可以使用`org.hibernate.Session`这个：

```
Query query = session.createQuery("CALL xxx(:caseId)").setString("caseId", valueForIt); 
```

注意：如果 caseId 不是字符串，请使用适当的 set 方法。

现在您可以执行 a `query.executeUpdate()`，或者如果您想要返回某些内容（例如列表），您可以执行 a `query.list()`。

# android - Facebook 签入错误

> ID：14871169
> 
> 赞同：0
> 
> 时间：2013-02-14T09:06:35.373
> 
> 标签：android, facebook, checkin

我正在使用以下代码在 Facebook 中使用 android 进行检查：

```
private void checkin(){
    String access_token = mPrefs.getString("access_token", null);
    Bundle params = new Bundle();
    params.putString("access_token", access_token);
    JSONObject place = new JSONObject();
    try {
        place.put("location", location.toString());
        place.put("name", name);
        place.put("id", id);
    } catch (JSONException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    Log.i("place", place.toString());
    params.putString("place", place.toString());  // YOUR PLACE ID
    params.putString("message","I m here in this place");
    JSONObject coordinates = new JSONObject();
    try {
        coordinates.put("latitude", Latitude);
        coordinates.put("longitude", Longitude);
    } catch (JSONException e) {
        e.printStackTrace();
    }

    params.putString("coordinates",coordinates.toString());
    params.putString("tags", "xxxx");//where xx indicates the User Id
    String response="";
    try {
        response = facebook.request("me/checkins", params, "POST");
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    Log.d("Response",response);
} 
```

但是在签入期间我收到一个错误为::

```
{"error":{"message":"(#114) An id must be a valid ID string (e.g., \"123\")","type":"OAuthException","code":114}} 
```

这就是我获取页面 url 是我的 FB 页面 URL 的位置详细信息的方式：

```
try {
        String response = facebook.request(pageURL);
        Log.i("Facebook Page Response ", response);
        JSONObject jobj = new JSONObject(response);
        location = new JSONObject(jobj.getString("location"));
        Latitude = location.getString("latitude");
        Longitude = location.getString("longitude");
        id = jobj.getString("id");
        name = jobj.getString("name");
        Log.i("Latitude", location.getString("latitude"));
        Log.i("Longitude", location.getString("longitude"));
        Log.i("id", jobj.getString("id"));
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (JSONException e) {
        e.printStackTrace();
    } 
```

请帮助我，我对使用 Facebook api 非常陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:30:08.810

对不起，我太愚蠢了，使用这种方法。根据 Facebook 文档，它已被弃用。我无法删除这篇文章。对不起。

# php - PHP 正在破坏 echo 上的文件

> ID：14871172
> 
> 赞同：0
> 
> 时间：2013-02-14T09:06:47.997
> 
> 标签：php, curl, download, corrupt

我正在使用 curl 从其他站点获取一些图像和其他文件。问题是，如果我将获取的内容写入文件，然后重定向到下载的文件，则图像是完美的。

但是，如果我只是回显内容，在`Content-type: image/jpeg`标题之前，图像总是被破坏。我已经检查并比较了这两个文件，似乎 echo 在文件的开头添加了空白，这可能是破坏图像的原因。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:08:41.670

确保您的开始`<?php`标签位于文件的开头，并且您`exit`紧接在回显之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:14:45.373

在回显之前，您是否发送了`Content-type: image/jpeg`带有 PHP 的 header() 函数？如果不是，PHP 仍然假定您将输出 HTML，并且在第一次回显时，它将在其前面加上正确的 HTML 标头。您应该：在任何实际输出之前使用您希望输出的标题信息调用 header()，然后回显内容。（如果您不专门处理结果，那么将其保存在内存中不是一个好习惯 --- 请参阅 PHP 的 passthru() 和朋友！）

# c# - XAML 更改切换按钮内的图像源

> ID：14871175
> 
> 赞同：1
> 
> 时间：2013-02-14T09:06:57.643
> 
> 标签：c#, wpf, visual-studio-2010, xaml

当切换按钮“IsPressed”为真时，我正在尝试更改图像源（仅在 XAML 中）。但是当我试图通过“Image.Trigger”绑定该属性时，它不起作用。

这就是我现在所拥有的，并且图像的显示方式与我想要的完全一样。

```
<ToggleButton x:Name="pbStations"
              Template="{StaticResource ContentOnlyTemplateToggleButton}">
  <StackPanel Orientation="Horizontal">
    <Image Source="/Sprites/Misc/ExpanderButtonClose.png"
           Margin="2"
           Stretch="Uniform"
           x:Name="img">
    </Image>
    <TextBlock Text="STATIONS"
               x:Name="tbStations"
               Style="{StaticResource tbTriggerGray}" />
  </StackPanel>
</ToggleButton> 
```

这是我尝试过但不起作用的方法：

```
<ToggleButton x:Name="pbStations"
              Template="{StaticResource ContentOnlyTemplateToggleButton}">
  <StackPanel Orientation="Horizontal">
    <Image Source="/Sprites/Misc/ExpanderButtonClose.png"
           Margin="2"
           Stretch="Uniform"
           x:Name="img">
      <Image.Triggers>
        <DataTrigger Binding="{Binding ElementName=pbStations,Path=IsPressed}"
                     Value="True">
          <Setter TargetName="img"
                  Property="Image.Source"
                  Value="/Sprites/Misc/ExpanderButtonOpen.png" />
        </DataTrigger>
      </Image.Triggers>
    </Image>
    <TextBlock Text="STATIONS"
               x:Name="tbStations"
               Style="{StaticResource tbTriggerGray}" />
  </StackPanel>
</ToggleButton> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T09:34:42.973

尝试在该图像的样式内为图像设置触发器。这是代码

```
<ToggleButton x:Name="pbStations"
              Template="{StaticResource ContentOnlyTemplateToggleButton}">
    <StackPanel Orientation="Horizontal">
        <Image Margin="2"
               Stretch="Uniform"
               x:Name="img">
        <Image.Style>
          <Style TargetType="Image">
            <Style.Triggers>                                  
              <DataTrigger 
                    Binding="{Binding ElementName=pbStations,Path=IsPressed}"
                    Value="True">        
                <Setter Property="Source"
                        Value="/Sprites/Misc/ExpanderButtonOpen.png" />   
              </DataTrigger>
              <DataTrigger 
                    Binding="{Binding ElementName=pbStations,Path=IsPressed}"
                    Value="False">        
                <Setter Property="Source"
                        Value="/Sprites/Misc/ExpanderButtonClose.png" />   
              </DataTrigger>
            </Style.Triggers>
      </Style>
     </Image.Style>
        </Image>
        <TextBlock Text="STATIONS"
                   x:Name="tbStations"
                   Style="{StaticResource tbTriggerGray}" />
    </StackPanel>
</ToggleButton> 
```

我在 2 个数据触发器中移动了所有图像设置逻辑。原因是 WPF 引擎将在执行 DataTrigger 后评估您的 Image 的 Source 属性，因此 DataTrigger 的 Setter 的优先级将低于手动为图像设置 Source 属性。

请注意，IsPressed 仅在您按住鼠标左键时为 True，但当您释放它时，IsPressed 将变为 False。ToggleButton 类有 IsChecked 属性，可以存储状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T08:55:48.057

使用 WinRT 工具包。

[Win RT XAML 工具包中的 UI 控件概述](http://blogs.msdn.com/b/pakistan/archive/2013/02/14/an-overview-of-ui-controls-from-win-rt-xaml-toolkit.aspx)

# php - 使用 5 个页面的 mod-Rewrite（通配符子域）

> ID：14871176
> 
> 赞同：3
> 
> 时间：2013-02-14T09:06:59.237
> 
> 标签：php, .htaccess, mod-rewrite, subdomain, wildcard

假设我有 5 页（`index.php`, `about.php`, `portfolio.php`, `gallery.php`, `contact.php`）。

假设 id 是`1`.

原始网址是：

`www.domain.com/folder/index.php?id=1`， `www.domain.com/folder/about.php?id=1` 等等……

现在，我想将其更改为：

`1.domain.com/index`, `1.domain.com/about`, `1.domain.com/portfolio`, `1.domain.com/gallery`, `1.domain.com/contact`

mod-rewrite 可以吗？如果我在`index.php`页面中，如果 mod-rewrite 是可能的`<a href="" >`，那会发生什么？`about.php`

非常感谢：DI 感谢您的帮助：D

**编辑**

还有一件事，我的通配符子域文件夹是`public_html/folder/`

**[Anubhava](https://stackoverflow.com/users/548225/anubhava)的解决方案**

用子域代码编辑：

```
Options +FollowSymLinks -MultiViews

RewriteEngine On
RewriteBase /

# EDIT BY ANUBHAVA: to make http://1.domain.com/ load /about as default page
# Replace /about with any other page you want as default page
RewriteCond %{HTTP_HOST} ^1\.(domain\.com$ [NC]
RewriteRule ^$ /about [L]

RewriteCond %{HTTP_HOST} !^www.domain.com$ [NC]
RewriteCond %{HTTP_HOST} ^(www.)?([^.]+).domain.com$ [NC]
RewriteRule ^(index|about|portfolio|gallery|contact)/?$ /$1.php?id=%2 [L,NC,QSA] 
```

确保您的通配符子域目录是页面所在的位置。还将您的 .htaccess 文件放在页面所在的目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:13:16.873

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# EDIT: to make http://1.domain.com/ load /about
RewriteCond %{HTTP_HOST} ^1\.(domain\.com$ [NC]
RewriteRule ^$ /about [L]

RewriteCond %{HTTP_HOST} ^1\.(domain\.com$ [NC]
RewriteRule ^(index|about|portfolio|gallery|contact)/?$ http://www.%1/folder/$1.php?id=1 [R=302,L,NC,QSA] 
```

一旦到位，请创建如下所示的 href 链接：

`<a href="http://1.domain.com/about">About Us</a>`或者`<a href="http://1.domain.com/contact">Contact Us</a>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:15:47.883

您需要更改 .htaccess 文件。编写下面的代码，它将隐藏文件的扩展名。

```
 Options +FollowSymlinks
    RewriteEngine on
    RewriteRule ^([a-zA-Z])\$ $1.php [NC] 
```

之后，您将在锚链接中提供 URL，例如 /index 等。

干杯。

# c# - 将项目添加到用户控件中的菜单

> ID：14871180
> 
> 赞同：2
> 
> 时间：2013-02-14T09:07:07.250
> 
> 标签：c#, wpf, user-controls

我创建了一个包含两个项目的用户控件：一个按钮和一个菜单。下面的代码是一个极其简化的版本，仍然存在同样的问题（我将在下面提到）。

```
<UserControl x:Class="gemsTouchLensApplication.Controls.ButtonAndMenu"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
    <StackPanel Orientation="Horizontal">
        <Button/>
        <Menu/>
    </StackPanel>
</UserControl> 
```

我希望能够用这个用户控件做两件事：向菜单添加项目并设置按钮的内容。

我希望能够以传统方式将项目添加到菜单中

```
<Menu>
    <MenuItem Header="1"/>
    <MenuItem Header="2"/>
    <MenuItem Header="3"/>
        <MenuItem Header="4"/>
        <MenuItem Header="5"/>
    etc...
</Menu> 
```

但是，当我在将用户控件添加到堆栈面板后尝试执行此操作时

```
<Window>
    <StackPanel>
        <cntrls:ButtonAndMenu>
            <MenuItem Header="1"/>
            <MenuItem Header="2"/> <!--Comment this out and the error disappears-->
        </cntrls:ButtonAndMenu>
    </StackPanel>
</Window> 
```

意想不到的事情发生了。我只能向用户控件添加一个项目。如果我添加多个项目，我会收到错误：

属性“内容”只能设置一次。

当只添加一个项目时，控件的视觉效果更接近于按钮，而不是菜单。

我怀疑通过向用户控件添加控件，WPF 引擎默认设置按钮的内容，而不是将控件添加到菜单中。

如何修改用户控件以便消费者可以：

1.  使用常规符号将项目添加到菜单
2.  还是设置按钮的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:18:31.063

了解如何做到这一点。

我创建了一个名为 MenuItems 的依赖属性，并将菜单的项目源绑定到该属性。我还必须在我的用户控件的类上设置一个属性。

```
[ContentProperty("MenuItems")]
public partial class ButtonAndMenu: UserControl
{
    public ObservableCollection<DependencyObject> MenuItems
    {
        get { return (ObservableCollection<DependencyObject>)GetValue(MenuItemsProperty); }
        set { SetValue(MenuItemsProperty, value); }
    }

    internal static readonly DependencyProperty MenuItemsProperty = DependencyProperty.Register(
        "MenuItems", typeof(ObservableCollection<DependencyObject>), typeof(ButtonAndMenu),
        new FrameworkPropertyMetadata(new ObservableCollection<DependencyObject>()));
} 
```

XAML 变为：

```
<UserControl x:Class="gemsTouchLensApplication.Controls.ButtonAndMenu"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300"
         x:Name="root">
    <StackPanel Orientation="Horizontal">
        <Button/>
        <Menu ItemsSource={Binding ElementName=root, Path=MenuItems}/>
    </StackPanel>
</UserControl> 
```

然后，在主窗口中，我可以执行以下操作：

```
<Window>
    <StackPanel>
        <cntrls:ButtonAndMenu>
            <MenuItem Header="1"/>
            <MenuItem Header="2"/>
            <MenuItem Header="3"/>
            <!--etc...    You can keep adding items here-->
        </cntrls:ButtonAndMenu>
    </StackPanel>
</Window> 
```

所以，总结一下：

1.  创建一个作为集合的依赖属性
2.  将类的 ContentProperty 属性设置为该依赖项属性
3.  将菜单的 ItemsSource 绑定到该属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:15:24.237

它的 because`MenuItem`源自`ItemsControl`but`UserControl`是 a `ContentControl`。你必须制作`ButtonAndMenu`为`ItemsControl`. 你为什么不做一个自定义的 MenuItemControl？

编辑：

此链接可能会有所帮助。

1)[创建和使用自定义 WPF 控件](http://www.codeproject.com/Articles/17830/Creating-and-consuming-a-custom-WPF-control)。这个演示展示了如何自定义一个`ListBox`到`ColorPickerControl1`.

您可以对 MenuItemControl 使用相同的概念。

您将不再使用 UserControl 并且您的 CustomControl 将看起来像。为此，您需要研究如何在 WPF 中制作自定义控件。

```
public class MyMenuItem : MenuItem
{ 
    // add your custom work here
} 
```

# java - 在 JPA 中使用相同的实体键映射多个 HashMap

> ID：14871181
> 
> 赞同：2
> 
> 时间：2013-02-14T09:07:11.753
> 
> 标签：java, hibernate, jpa, orm, h2

我有以下商业模式：

**膳食**- 包含名称和价格

**菜单**- 包含名称和一组膳食及其数量和替代价格（通常低于默认价格）。

过去我曾使用`HashMap<Entity, Value>`. 在这种情况下，我有两个值：价格和数量。由于 Java 和 JPA 不支持多映射，我决定使用两个包含相同键的 HashMap。

```
@Entity
public class Menu {
    @Column
    private String name;

    @ElementCollection
    @CollectionTable(name = "MENU_MEALS", joinColumns = @JoinColumn(name = "MENU_ID"))
    @MapKeyJoinColumn(name = "MEAL_ID", referencedColumnName = "ID")
    @Column(name="AMOUNT")
    private Map<Meal, BigDecimal> amounts = new LinkedHashMap<Meal, BigDecimal>();

    @ElementCollection
    @CollectionTable(name = "MENU_MEALS", joinColumns = @JoinColumn(name = "MENU_ID"))
    @MapKeyJoinColumn(name = "MEAL_ID", referencedColumnName = "ID")
    @Column(name="PRICE")
    private Map<Meal, BigDecimal> prices = new LinkedHashMap<Meal, BigDecimal>();
} 
```

生成的表看起来不错：MENU_ID、MEAL_ID、AMOUNT、PRICE。

我像这样（在我的实体内部的一个方法中）向菜单添加新的膳食，并且我在它分离时执行它（不想立即将膳食存储到数据库 - 首先是 GUI 预览）：

```
menu.prices.add(meal, price);
menu.amounts.add(meal, amount); 
```

将足够的餐食添加到分离的菜单并单击“确定”按钮后，我的菜单将被合并。

该`em.merge(menu)`操作映射为以下 SQL：

```
insert into MENU_MEAL (MENU_ID, MEAL_ID, PRICE) values (?, ?, ?)
insert into MENU_MEAL (MENU_ID, MEAL_ID, AMOUNT) values (?, ?, ?) 
```

这就是问题所在。我得到一个主键约束违反异常。第二次调用应该更新 (MENU_ID, MEAL_ID) 条目，而不是尝试插入具有相同外键的新条目。

有什么建议可以强制它执行“更新-如果存在-插入-否则”吗？

我通过将每个 HashMap 映射到不同的表来临时解决了这个问题。但我不喜欢这种解决方案。

编辑：我需要我的合并行为如下：

```
insert into MENU_MEAL (MENU_ID, MEAL_ID, PRICE) values(?, ?, ?) on duplicate key update PRICE=values(price) 
```

任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-13T07:49:37.327

我知道我迟到了，但这些是我的解决方案：

1) 使用具有 @Embeddable 值的单个 Map：

```
@Entity
public class Menu
{
    @Column
    private String name;

    @ElementCollection
    @CollectionTable(name = "MENU_MEALS", joinColumns = @JoinColumn(name = "MENU_ID"))
    @MapKeyJoinColumn(name = "MEAL_ID", referencedColumnName = "ID")
    private Map<Meal, Detail> details = new LinkedHashMap<Meal, Detail>();
}

@Embeddable
public class Detail
{
    @Column(name = "AMOUNT")
    private BigDecimal amount;

    @Column(name = "PRICE")
    private BigDecimal price;
} 
```

此映射具有您已有的相同表结构。

2) 使用具有@Entity 关系的单个 Map：

```
@Entity
public class Menu
{
    @Column
    private String name;

    @OneToMany(mappedBy = "menu", cascade = CascadeType.ALL, orphanRemoval = true)
    @MapKey(name = "meal")
    private Map<Meal, MealDetail> details = new LinkedHashMap<Meal, MealDetail>();
}

@Entity
public class MealDetail
{
    @ManyToOne
    @JoinColumn(name = "MENU_ID")
    private Menu menu;

    @ManyToOne
    @JoinColumn(name = "MEAL_ID")
    private Meal meal;

    @Column(name = "AMOUNT")
    private BigDecimal amount;

    @Column(name = "PRICE")
    private BigDecimal price;
} 
```

此映射添加了一个 ID 列，但我认为使用 @PrimaryKeyJoinColumns 可以获得与以前相同的映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:11:01.647

如果我没记错的话，当您使用`variable = em.find`和更新该变量时，您可以更新实体管理器中的值而无需持久化。

您可以将代码包围在您更改的位置，也可以通过以下方式添加值：

```
em.getTransaction().begin();
//change
menu.prices.add(meal, price);
menu.amounts.add(meal, amount);
em.getTransaction().commit(); 
```

你也可以试试`em.flush()`。

如果您显示代码是如何创建的，则可以给出更确定的答案`menu`。你用了`em.find()`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:39:47.733

当使用 Hibernate 作为 JPA ORM 提供程序时，我找到了解决问题的方法。只需覆盖默认的 SQL INSERT 命令，将`@SQLInsert`Hibernate 注释添加到 HashMap。

H2数据库解决方案：

```
@SQLInsert(sql="MERGE INTO MENU_MEAL(MENU_ID, MEAL_ID, PRICE) VALUES (?, ?, ?)")
private Map<Meal, BigDecimal> prices = new LinkedHashMap<Meal, BigDecimal>();

@SQLInsert(sql="MERGE INTO MENU_MEAL(MENU_ID, MEAL_ID, AMOUNT) VALUES (?, ?, ?)")
private Map<Meal, BigDecimal> amounts = new LinkedHashMap<Meal, BigDecimal>(); 
```

其他数据库的解决方案（支持 ON DUPLICATE KEY）：

```
@SQLInsert(sql="INSERT INTO MENU_MEAL(MENU_ID, MEAL_ID, PRICE) VALUES (?, ?, ?) ON DUPLICATE KEY UPDATE set PRICE = VALUES(PRICE)")
private Map<Meal, BigDecimal> prices = new LinkedHashMap<Meal, BigDecimal>();

@SQLInsert(sql="INSERT INTO MENU_MEAL(MENU_ID, MEAL_ID, AMOUNT) VALUES (?, ?, ?) ON DUPLICATE KEY UPDATE set AMOUNT = VALUES(AMOUNT)")
private Map<Meal, BigDecimal> amounts = new LinkedHashMap<Meal, BigDecimal>(); 
```

仍然对解决方案不完全满意（依赖于数据库和 ORM 提供程序），但比为每个 HashMap 拥有一个表要好。

# openid - OpenIdButton 的扩展返回 null

> ID：14871183
> 
> 赞同：0
> 
> 时间：2013-02-14T09:07:18.023
> 
> 标签：openid, dotnetopenauth

以下是我用 vb.net 编写的代码。

> Protected Sub OpenIdButton3_LoggedIn(ByVal sender As Object, ByVal e As DotNetOpenAuth.OpenId.RelyingParty.OpenIdEventArgs) 处理 OpenIdButton3.LoggedIn
> 
> OpenIdButton3.Visible = False
> 
> 暗淡的个人资料 As ClaimsResponse = e.Response.GetExtension(Of ClaimsResponse)()
> 
> 暗淡电子邮件作为字符串 = profile.Email
> 
> MsgBox(电子邮件)
> 
> 结束子

但线

> 暗淡电子邮件作为字符串 = profile.Email

给出以下错误。

> 异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

我已经阅读了相关文档，并在 webconfig 中实现了 AXFetchAsSregTransform。以下是显示相同的块。

```
<sectionGroup name="dotNetOpenAuth" type="DotNetOpenAuth.Configuration.DotNetOpenAuthSection, DotNetOpenAuth.Core">
  <section name="dotNetOpenAuth" type="DotNetOpenAuth.Configuration.DotNetOpenAuthSection" requirePermission="false" allowLocation="true" />
  <section name="openid" type="DotNetOpenAuth.Configuration.OpenIdElement, DotNetOpenAuth.OpenId" requirePermission="false" allowLocation="true" />
  <section name="oauth" type="DotNetOpenAuth.Configuration.OAuthElement, DotNetOpenAuth.OAuth" requirePermission="false" allowLocation="true" />
  <section name="messaging" type="DotNetOpenAuth.Configuration.MessagingElement, DotNetOpenAuth.Core" requirePermission="false" allowLocation="true" />
  <section name="reporting" type="DotNetOpenAuth.Configuration.ReportingElement, DotNetOpenAuth.Core" requirePermission="false" allowLocation="true" />
</sectionGroup> 
```

> <dotNetOpenAuth>

```
<openid>

  <relyingParty> 
```

```
 <add type="DotNetOpenAuth.OpenId.Behaviors.AXFetchAsSregTransform, DotNetOpenAuth" />

    </behaviors>

  </relyingParty>

</openid> 
```

</dotNetOpenAuth>

即使那样，我似乎也得到了空值。我正在从 Google 获得身份验证。

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:02:53.973

最后，我找到了解决方案。在这里发布它，以便其他面临相同问题的人可以得到帮助。

> '全球声明 - 如果您在本地声明它们，出于某种原因，它们似乎不起作用
> 
> > > > 将依赖方调暗为新的 OpenIdRelyingParty
> > > > 
> > > > 将 authResponse 调暗为 IAuthenticationResponse

声明后在您的网络表单上创建一个按钮，允许用户登录 Google。还有一个标签，将显示已登录用户的电子邮件 ID。

> '将以下代码放在页面加载中。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim googleAppsDiscovery As New HostMetaDiscoveryService() With {.UseGoogleHostedHostMeta = True}
    relyingParty.DiscoveryServices.Insert(0, googleAppsDiscovery)

    authResponse = relyingParty.GetResponse()

    If authResponse IsNot Nothing Then
        If authResponse.Status = AuthenticationStatus.Authenticated Then
            Dim fetch As FetchResponse = authResponse.GetExtension(Of FetchResponse)()
            If fetch IsNot Nothing Then
                ' Save user details in session variables
                'Dim temp As [String]() = fetch.GetAttributeValue(WellKnownAttributes.Contact.Email).ToString().Split("@"c)
                Dim temp As String = fetch.GetAttributeValue(WellKnownAttributes.Contact.Email).ToString()
                If temp IsNot Nothing Then
                    Dim userName As String = temp
                    Label1.Text = "You are logged in as : " & userName
                End If
            End If
        End If
    End If
End Sub 
```

将以下代码放入按钮的单击事件中

```
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim currentPageURL As String = curPageURL.ToString

    Dim urlRealm As New Uri(currentPageURL)
    Dim urlReturn As New Uri(currentPageURL)

    Dim rm As Realm = New Realm(urlRealm)
    Dim gIdentifier As String = "https://www.google.com/accounts/o8/id"

    Dim request As IAuthenticationRequest = relyingParty.CreateRequest(gIdentifier, urlRealm, urlReturn)

    Dim fetch As New FetchRequest

    fetch.Attributes.Add(New AttributeRequest(WellKnownAttributes.Contact.Email, True))
    request.AddExtension(fetch)

    request.RedirectToProvider()
End Sub 
```

添加以下两个函数以获取您当前的 URL

```
Function curPageURL() As String
    Dim s, protocol, port As String

    If Request.ServerVariables("HTTPS") = "on" Then
        s = "s"
    Else
        s = ""
    End If

    protocol = strLeft(LCase(Request.ServerVariables("SERVER_PROTOCOL")), "/") & s

    If Request.ServerVariables("SERVER_PORT") = "80" Then
        port = ""
    Else
        port = ":" & Request.ServerVariables("SERVER_PORT")
    End If

    curPageURL = protocol & "://" & Request.ServerVariables("SERVER_NAME") & _
          port & Request.ServerVariables("SCRIPT_NAME")
End Function

Function strLeft(ByVal str1 As String, ByVal str2 As String) As String
    strLeft = Left(str1, InStr(str1, str2) - 1)
End Function 
```

你完成了。

# ruby-on-rails - 从复选框中获取值 Ruby on Rails，多对多

> ID：14871185
> 
> 赞同：0
> 
> 时间：2013-02-14T09:07:24.193
> 
> 标签：ruby-on-rails, forms, checkbox, many-to-many

我正在尝试从表单中的某些复选框中获取值。表格：

```
<%= form_for @book do |f| %>

  <%= f.label :title %>
  <%= f.text_field :title %>

  <%= f.label :description %>
  <%= f.text_area :description %>

<% @users.each do |user| %>
  <%= check_box_tag 'user_ids[]', user.id,false -%>
  <%= h user.name -%>
  <% end %>

<%= f.submit "Save" %>

<% end %> 
```

图书`has_and_belongs_to_many`用户，所以我想做的是将`user ids`复选框添加到`@book.users`. 我怎样才能做到这一点？我不断收到错误：`Can't mass-assign protected attributes: user_ids.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:03:49.300

在您的模型中添加此行并尝试

```
attr_accessor :user_ids 
```

# python - 如果在 Pyramid 中配置了类的视图，是否可以使用为超类配置的视图？

> ID：14871193
> 
> 赞同：5
> 
> 时间：2013-02-14T09:08:06.300
> 
> 标签：python, inheritance, pyramid

我正在创建一个使用遍历的简单的基于金字塔的 CMS。有一个名为 的类`Collection`，它有一些子类`NewsCollection`，例如`GalleriesCollection`等。

我需要两种视图来显示这些集合。前端，html 视图和后端，json 视图（管理面板使用 dgrid 显示数据）。后端视图可以是通用的——它在每种情况下都转储 json 数据。前端视图不应该——每种数据都有一个自定义模板。

问题是：当我像这样配置视图时：

```
@view_config(context=Collection, xhr=True, renderer='json', accept='application/json') 
```

它工作正常。但是，只要我添加了为此配置的**任何**视图，`NewsCollection`就会优先考虑。即使我将谓词专门用于与上述配置冲突（例如`accept='text/html'`），仍然不会调用上述视图。相反，我会得到一个“谓词不匹配”。

`Collection`我的问题是-当还有视图时，我可以做任何事情来使配置为的视图被调用`NewsCollection`吗？还是我必须使用其他设计（例如*url 调度*或为不同的资源类型多次添加相同的视图）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T13:46:26.983

我尝试构建一个非常相似的系统并发现了同样的问题 - 事实上，这是 Pyramid 错误跟踪器中的票：[https ://github.com/Pylons/pyramid/issues/409](https://github.com/Pylons/pyramid/issues/409)

简而言之，并非 Pyramid 中的所有视图谓词都是相等的——`context`这是一种特殊情况。视图首先使用匹配`context`，然后使用其他谓词缩小选择范围。

还有一个最近的[拉取请求](https://github.com/Pylons/pyramid/pull/786)，这将使 Pyramid 的行为方式与您（和我）期望的一样——但是，从那里的讨论中，我看到由于可能的性能权衡，它不太可能被采用。

（**更新：**拉取请求已于 2013 年 3 月合并，所以我想它应该在 1.4 之后的版本中可用）

一种解决方法是使用自定义谓词：

```
def context_implements(*types):
    """
    A custom predicate to implement matching views to resources which
    implement more than one interface - in this situation Pyramid has
    trouble matching views to the second registered interface. See
    https://github.com/Pylons/pyramid/issues/409#issuecomment-3578518

    Accepts a list of interfaces - if ANY of them are implemented the function
    returns True
    """
    def inner(context, request):
        for typ in types:
            if typ.providedBy(context):
                return True
        return False
    return inner

@view_config(context=ICollection,
    custom_predicates=(context_implements(INewsCollection),)
    )
def news_collection_view(context, request):
    .... 
```

# ruby-on-rails - 计数/总和等的最佳数据库实践

> ID：14871197
> 
> 赞同：1
> 
> 时间：2013-02-14T09:08:38.057
> 
> 标签：ruby-on-rails, database, postgresql

我想知道在存储计数/总和等方面的最佳做法是什么？在每个页面加载时动态计算是否很大？

我有一个 Rails 应用程序，其中包含来自多个来源的产品和销售报告。其中一些销售报告可以延伸到每天 100k+ 行。目前，我们正在为每个页面加载动态计算。这显然非常缓慢。

由于几乎可以肯定销售报告只写一次但读了很多次，所以在我的产品表中添加一个总和列并在每次写入新销售时增加它会更好吗？我可以看到这显然会快得多，但它确实严重限制了我提供日期过滤的能力；“过去 7 天前 10 名”等。

启用过滤的另一种解决方案是创建第三张表，其中包含每种产品的每日总和吗？主销售表每天可以为每个产品包含多行，有时甚至数千行，所以我可以再次看到主销售表的精简版本也可以加快速度。

我应该在导入期间使用 before/after_save 回调/进行这些计算，还是应该查看在后台运行的计划任务？

谁能提供一些建议或推荐阅读以帮助我走上正确的道路并帮助我改善令人尴尬的缓慢页面加载时间？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T14:42:44.560

好问题。

一般来说，我认为最好从动态生成计数和总和开始。这遵循 Codd 的规则等。问题是随着时间的推移这可能会变慢。你如何处理它取决于很多事情。我将为您提供处理销售数据的解决方案以及为什么我认为这是理想的。

销售数据很重要，因为虽然它有时可以在一段时间后短暂调整，但在没有犯规的情况下永远不会再调整（这是在关闭书籍之后）。销售书籍通常每月或每年关闭。

您可以做的是将聚合与日期或最大 ID 等放在关闭条目中，并放入触发器，以便您可以确保没有条目被添加到关闭期间。这允许您从已知的良好值前滚聚合。在这种情况下，您可能只在收盘期间或开盘期间汇总。

# jquery - 如何在基于 DIV 的选择表单元素上对多个字段使用 jQuery Validate

> ID：14871200
> 
> 赞同：1
> 
> 时间：2013-02-14T09:08:44.793
> 
> 标签：jquery, jquery-validate

嗨，我已[将此](https://stackoverflow.com/questions/13145359/how-to-use-jquery-validate-on-div-based-select-form-element)用于下拉框验证。如果我有多个下拉菜单，它只适用于一个下拉菜单意味着它无法正确显示

```
$(document).ready(function () {
    $('.default').dropkick();
    $('.example_form').validate({
        highlight: function (element, errorClass) {         
            $(element).siblings('.dk_container').addClass('error');  
            $('.dk_toggle').css('border', 'none');
        },
        unhighlight: function(element, errorClass) {
            $(element).siblings('.dk_container').removeClass('error');  
            $('.dk_toggle').css('border', '1px solid #ccc');
        }
    });
}); 
```

这是一个[小提琴](http://jsfiddle.net/rDZGm/)

如何突出显示每个字段的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:26:54.063

试试这个小提琴：

[http://jsfiddle.net/yWANA/5/](http://jsfiddle.net/yWANA/5/)

现在已修复。

问题在于您编写的突出显示代码。

如果您在突出显示中写警报，您会发现它只会出现错误

这是一些代码：

```
 $(document).ready(function () {
$('.default').dropkick();
$('.example_form').validate({
    highlight: function (element, errorClass) {   
         $(element).prev().addClass('error');
         //$(element).prev().addClass('error'); 
         $('.dk_toggle').css('border', 'none');
    },
    unhighlight: function(element, errorClass) {
        $(element).prev('.dk_container').removeClass('error');  
        $('.dk_toggle').css('border', '1px solid #ccc');
    }
}); 
```

});

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:03:02.940

只需为每个下拉菜单设置一个隐藏字段，并在您更改下拉列表值时将值分配给隐藏字段。并将必填字段验证写入隐藏字段

```
$('#country').dropkick({
    change: function (value, label) {
        $('#countryHidden').val(value);
      }
});

$('.example_form').validate({
   ignore: "",
    rules : {
        countryHidden : {
            required: true
        }
    },
    messages : {
      countryHidden : {
            required:"Please select your  country"              
        }  
    } 
}); 
```

[小提琴](http://jsfiddle.net/muthusamy/rDZGm/1/)

# ios - 自定义 UITableViewCell 附件视图按钮在真实设备上不可见

> ID：14871202
> 
> 赞同：0
> 
> 时间：2013-02-14T09:08:49.620
> 
> 标签：ios, uitableview, uibutton

在我的`UITableView`我想为`custom accessoryView`表中的行添加按钮；这是在`UITableViewCell` **cellForRowAtIndexPath**方法中添加的代码：

```
 UIImage *image = [UIImage imageNamed:@"icon.png"];
    UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 28, 28)]; // tested also initWithFrame:CGRectMake(0, 0, image.size.width, image.size.heigth)
    [UIButton buttonWithType:UIButtonTypeCustom];
    [button setBackgroundImage:image forState:UIControlStateNormal];
    button.backgroundColor = [UIColor clearColor];

    cell.accessoryView = button;
    [button addTarget:self action:@selector(accessoryButtonTapped:event:) forControlEvents:UIControlEventTouchUpInside]; 
```

这在 iOS 模拟器（iOS 5.1 和 iOS 6.1）上完美运行，我可以在表格的每一行的右侧看到带有 icon.png 图像的自定义 UIButton，我还可以在自定义图像上调用accessoryButtonTapped 事件。但是，如果我在真实设备（带有 iOS 5.1 的 iPhone 4 或带有 iOS 6.1 的 iPad 3rd）上测试我的应用程序，我看不到自定义按钮，它是不可见的，实际上在每行右侧点击仍然会调用 accessoryButtonTapped 事件。我也删除并重新安装了应用程序，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:41:50.010

如果您的方法被调用，则表示该按钮在那里。问题出在你的形象上。在设备上运行时，检查图像是否为 nil，以及图像是否已添加到构建目标中。

# node.js - 从来没有写过任何自动化测试，我应该如何开始行为驱动的开发？

> ID：14871204
> 
> 赞同：6
> 
> 时间：2013-02-14T09:09:15.830
> 
> 标签：node.js, ruby, rspec, bdd, ruby-mocha

多年来，我一直在使用多种语言进行编程，并且喜欢认为我通常很擅长它。但是，我从未编写*过*任何自动化测试：没有单元测试，没有 TDD，没有 BDD，什么都没有。

我*试图*开始为我的项目编写适当的测试套件。我可以看到在进行任何更改后能够自动测试项目中的所有代码的理论价值。我可以看到像 RSpec 和 Mocha 这样的测试框架应该如何使设置和运行上述测试相当容易，我喜欢它们为编写测试提供的 DSL。

但我从未设法为我的代码的任何部分编写实际的单元测试。我写的东西似乎从来没有以实际有用的方式进行测试。

*   在使用它们的上下文之外，函数似乎不是非常可调用的。我编写的许多函数都会进行 HTTP 请求调用、数据库查询或其他一些不易测试的调用。
*   一些函数返回 HTML 字符串。我可以将 HTML 字符串与同一字符串的硬编码版本进行比较，但这似乎只会限制我更改该部分代码的能力。再加上在我的测试代码中有大量的 HTML 是一团糟。
*   我可以将模拟/间谍对象传递给一个方法，并确保它们得到某些方法调用，但据我所知，这只是测试我正在“测试”的方法的实现细节。

我将如何开始正确的 BDD 测试？（我更喜欢使用 Mocha 和 Node.js 来做这件事，但是关于 BDD 的一般建议也很好。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:00:30.847

看起来您要问的主要问题是“我如何编写可测试的代码”？

作为面向对象编程的粉丝，我知道我有偏见，但根据我的经验，测试以 OO 风格编写的代码要容易得多。这样做的原因是单元测试旨在测试系统的小型、隔离组件，而设计良好的面向对象代码（大部分）提供了这一点。

我同意函数通常与它们所处的上下文相关联，这使得它们难以测试。我在函数式编程方面没有太多经验，但我知道上下文经常以某种变量的形式传递，因此很难分离函数的关注点。

通过 OO 编程，我通过模拟执行实际网络请求以返回一组已知数据的对象，成功地测试了围绕 HTTP 请求、数据库查询等的对象。然后，您测试您的包装器对象是否以正确的方式处理该数据。您还可以测试失败和意外数据。另一种方法是设置您使用的本地服务器而不是普通端点，但这会给您的测试套件带来外部依赖，应尽可能避免。

在测试 HTML 时，由于视图层的高度可变性，很多人根本不这样做。然而，有些东西确实值得测试，但*绝不*是完整的 HTML 字符串——正如您所发现的，只是一个微小的变化就意味着整个测试都会中断。在这种情况下，您真正​​测试的是什么，代码库不同部分中的两个字符串是否相同？

最好的办法是将 HTML 字符串从您的函数/对象加载到 HTML 解析器库中，您通常可以使用 Xpath 或 CSS 选择器来检查具有特定类、ID 或其他属性的标签，并检查元素的数量符合某些要求的。Rspec 内置了这个（`have_tag()`方法），许多测试库也是如此。

您可能希望查看的其他内容是集成测试（例如 Capybara、Selenium）。这将使用 JavaScript 引擎加载您的 Web 应用程序，因此您可以检查 HTML 元素和 JavaScript 事件。

在整个模拟/存根的事情上，您通常只想对作为您正在测试的对象的依赖项的对象执行此操作。否则，您几乎可以操纵任何东西来断言为真！

至于测试资源，即使您不打算练习 TDD，我也建议您查看测试驱动开发书籍。主要原因是他们让你首先投入测试。这里有一些：

1.  肯特贝克的书[测试驱动开发：通过示例](https://rads.stackoverflow.com/amzn/click/com/0321146530)
2.  使用 PHP 进行 TDD 的免费电子书，[实用 PHP 测试](http://www.giorgiosironi.com/2009/12/practical-php-testing-is-here.html)
3.  这个网站，[单元测试的艺术](http://artofunittesting.com/in-ruby/)
4.  [Slideshare](http://www.slideshare.net/) - 只需搜索单元测试或 BDD 并尽可能多地阅读！
5.  大卫切利姆斯基等。al.：RSpec [Book](http://pragprog.com/book/achbd/the-rspec-book)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:16:57.577

TDD 或 BDD，没关系，它们是同构的，正如 Mocha 所证明的那样，它们只是可插入的前端。

> 我可以将模拟/间谍对象传递给一个方法，并确保它们得到某些方法调用，但据我所知，这只是测试我正在“测试”的方法的实现细节。

这正是单元测试的重点：你只测试你正在测试的代码，而不是更多。更多测试的问题在于，失败的测试通常不会准确地标记问题。单元测试的承诺是您可以*在很大程度上*避免调试。过于粗略的测试会使这一点无效。当然，平衡是必需的，任何有任何 UT 经验的人都会告诉你，很容易陷入我想要测试但没有注意到的陷阱，您的测试可能都是绿色的，实际代码不起作用。

# wpf - wpf mvvm ImageSelector

> ID：14871206
> 
> 赞同：0
> 
> 时间：2013-02-14T09:09:22.980
> 
> 标签：wpf, image, mvvm, move, resize-image

我有一个 mvvm 项目。我通过单击项目中的加载按钮加载 .jpg 格式的图像。我想选择该图像的一部分并移动它并通过单击菜单中的矩形工具重新调整它的大小，但我不知道如何

查看代码：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="240*" />
        <RowDefinition Height="60*" />
    </Grid.RowDefinitions>
    <StackPanel Orientation="Horizontal" Grid.Row="0">
        <Image Source="{Binding MyImage.Source}" ></Image>
    </StackPanel>
    <StackPanel Orientation="Horizontal" Grid.Row="1">
        <Button Width="70" Height="40" Command="{Binding LoadCommand}">Load Image</Button>
    </StackPanel>
</Grid> 
```

视图模型代码：

```
 #region Property
    private Image _MyImage;
    public Image MyImage
    {
        get
        {
            return _MyImage;
        }
        set
        {
            _MyImage = value;
            OnPropertyChanged("MyImage");
        }
    }
    #endregion

    #region Constructor
    public ImageViewModel()
    {
        _MyImage = new Image();
    }
    #endregion

    #region Commands
    RelayCommand _LoadCommand;
    public ICommand LoadCommand
    {
        get
        {
            if (_LoadCommand == null)
            {
                _LoadCommand = new RelayCommand(param => LoadCommandExecute());
            }
            return _LoadCommand;
        }
    }
    #endregion

    #region Methods
    private void LoadCommandExecute()
    {

        OpenFileDialog op = new OpenFileDialog();
        op.Title = "Select a picture";
        op.Filter = "All supported graphics|*.jpg;*.jpeg;*.png|" +
            "JPEG (*.jpg;*.jpeg)|*.jpg;*.jpeg|" +
            "Portable Network Graphic (*.png)|*.png";
        if (op.ShowDialog() == true)
        {
            MyImage.Source = new BitmapImage(new Uri(op.FileName));
        }
    }
    #endregion 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:20:57.430

实现[拖动选择](http://www.codeproject.com/Articles/148503/Simple-Drag-Selection-in-WPF)是解决此问题的一种方法。实现拖动选择后，检查选择矩形相对于图像的位置，裁剪图像的该部分并允许以任何您喜欢的方式对其进行修改。

如果您在此过程中遇到问题，请发布一些代码，我们将尽力解决。

# vb.net - 保持面板居中 vb.net

> ID：14871207
> 
> 赞同：0
> 
> 时间：2013-02-14T09:09:26.920
> 
> 标签：vb.net

我在 VB.Net 中有两个面板。父面板`(panel1)`停靠在表单上，​​这意味着当表单调整大小时它会调整大小。

子面板`(panel2)`应该位于面板 1 的中心，但是当其父面板或窗体调整大小时，面板 2 不会保留中心。

简而言之，我怎样才能将 panel2 始终保持在 panel1 的中心？

我使用 VB.net。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:16:04.863

尝试这样的事情：

```
Private Sub Form1_Resize(sender As Object, e As EventArgs) Handles Me.Resize
    Panel2.Top = (Panel1.Height - Panel2.Height) / 2
    Panel2.Left = (Panel1.Width - Panel2.Width) / 2
End Sub 
```

# objective-c - NSNumber 和 float - 类型转换异常

> ID：14871210
> 
> 赞同：4
> 
> 时间：2013-02-14T09:09:40.750
> 
> 标签：objective-c, casting, floating-point, nsnumber

在我的应用程序中，我使用了一个使用 json 进行通信的外部 API。今天我遇到了浮点数和 NSNumbers 之间的奇怪行为（由于我对 iOS 的缺乏经验，这可能很奇怪）。问题是我在 API 响应中收到一个浮点数，在这种特殊情况下它是 135.99。当本机 obj-c json 解析器解析响应时，它会使用该值创建 NSNumber。它工作完美。但是当我开始使用这个 API 时，我不知道原生 json 解析器是如何表现出来的，所以我一直在做这样的事情：

```
NSNumber * number = [NSNumber numberWithFloat:[[response objectForKey:@"Number"] floatValue]]; 
```

所以，上面发生的实际上是将 NSNumber 转换为浮点数并使用该浮点数创建新的 NSNumber。它有什么奇怪的？奇怪（对我来说）是上面的行生成 NSNumber 的值...... 135.99001 而不是 135.99 这是正确的。

我知道浮点算术真的很糟糕，特别是在像 PHP 这样的语言中（0.2 + 0.7 不等于 0.9），但我没想到在像 Objective-c 这样的语言中，它是 C 语言的超集，我会发现这样乱来。有人对这个问题有很好的解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-11T21:24:24.520

你犯了一个初学者的错误，那就是假设“float”是浮点数的正确类型。它不是。除非您有充分的理由使用 float，否则“double”是您应该使用的类型。JSON 解析器将不可避免地使用 [NSNumber numberWithDouble:...] 来创建它们存储的 NSNumber 对象（或 [NSNumber numberWithLongLong:...] 或 NSDecimalNumber），但*绝不*会使用[NSNumber numberWithFloat:]。

与 double 相比，float 的精度非常有限。您可以确定，在大多数情况下，由于精度有限，[NSNumber numberWithFloat:...] 会给您不同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:46:39.003

对于像 C 这样的语言（我也怀疑 PHP），浮点（和双精度）算术并不真正与语言相关，而是与底层硬件相关。

对于现代计算机，这意味着由 CPU 实现的 IEEE 浮点运算，所以如果你用 C、Pascal、FORTRAN 等编写程序，你会遇到同样的问题。它们都只是调用 CPU 的浮点指令并将其保留在那。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T09:41:36.640

花车会发生奇怪的事情。它们不精确是它们本性的一部分。

除此之外，我不完全理解您为什么将漂亮的 NSNumber 转换（不仅仅是类型转换）为 float 只是为了从 float 中创建一个新的 NSNumber 对象，即使您无法想到，您也不应该期望两个 float 值相等出于任何原因，它们应该不同。这意味着，在比较浮点数时，您永远不应该比较`float1 == float2`. 更好地比较`abs(float1-float2) < 0.001`或重要的是什么。

关于浮动的这些行为的一些一般情况在这个网站上有很好的解释：http: [//floating-point-gui.de/](http://floating-point-gui.de/)

# java - 使用 iText 将隐藏文件嵌入 PDF

> ID：14871211
> 
> 赞同：1
> 
> 时间：2013-02-14T09:09:43.660
> 
> 标签：java, pdf, embed, itext, hidden

是否可以使用 iText 将隐藏文件嵌入到 PDF 中？

我尝试了以下方法，但我不希望文件显示在“文件附件”选项卡中。

```
stamper.addFileAttachment("Description", null, "file", "File name"); 
```

和

```
PdfFileSpecification pfs = PdfFileSpecification.fileEmbedded(stamper.getWriter(), "file", null, null,false);
stamper.addFileAttachment("Description",pfs); 
```

我听说我可以将文件的内容与元数据一起嵌入，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:34:36.710

我找到了另一种方法来做我想做的事，我将文件的内容（它相当小）保存到一个隐藏的 TextField 对象中，以后可以使用 AcroField 的 getField 方法访问该对象。

# php - 代码点火器：在非对象上调用成员函数 num_rows()

> ID：14871213
> 
> 赞同：3
> 
> 时间：2013-02-14T09:09:51.620
> 
> 标签：php, sql, database, codeigniter, session

我已经在 localhost 上的 codeigniter 中开发了一个应用程序...该应用程序运行良好..然后我将应用程序上传到临时服务器...登录到管理面板后我收到此错误..但是如果我运行相同的应用程序在本地主机它工作正常...

错误

```
 Fatal error: Call to a member function num_rows() on a non-object in  /home/u520606051/public_html/application/models/loginmodel.php on line 9 
```

这是我的模型：

```
function validate($data)
{
    $query = $this->db->get_where('users', $data);
    if($query->num_rows() == 1)
    {
        return true;
    }
} 
```

控制器

```
function verifyUser()
{
    //getting parameters from view 
    $data = array(
            'username' => $this->input->post('username'),
            'password' => $this->input->post('password')
        );      
    $this->load->model('loginModel'); 
    $query = $this->loginModel->validate($data);

    if ($query)
    {
        //if the user c validated
        //data variable is created becx we want to put username in session
        $data = array(
                'username' => $this->input->post('username'),
                'is_logged_in' => true  
            );

        $this->session->set_userdata($data);
        redirect('sessionController/dashboard_area');
    }
    else
    {
        $this->index();
    }
    } 
```

**模态文件名：**

```
 loginmodel.php

 class Loginmodel extends CI_Model 
```

**控制器文件名**

```
loginController.php

 class LoginController extends CI_Controller 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:55:17.543

好吧，我自己想出了一个解决方案..实际上它没有加载数据库，因此当我想查询并选择结果时，我得到了这个错误，最后当我检查我的 databse.php 文件时，在数据库的名称，所以我删除了它.. 谢谢大家

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:58:07.733

如果没有看到你的文件名，我不能保证，但几乎可以肯定的是，你在文件名、类名和调用（加载）名中使用不同的大小写来命名你的模型。

您的 localhost 很可能是 Windows，这无关紧要；您的服务器很可能是区分大小写的 Linux

回去检查一切是否相同，你会没事的

# xml - 在VB中替换xml文件的值属性中的双引号

> ID：14871214
> 
> 赞同：1
> 
> 时间：2013-02-14T09:09:56.667
> 
> 标签：xml, vb.net, import, replace, export

我的 xml 文件中有以下节点，它是另一个程序的导出。我必须在我的应用程序中编辑 xml 文件，以便以正确的方式导入它。

节点：

```
<field name="memo" value="24-06-2004 Lorem ipsum dolor "sit" amit"/> 
```

最终它必须变成这样

```
<field name="memo" value="24-06-2004 Lorem ipsum dolor &quot;sit&quot; amit"/> 
```

或者

```
<field name="memo" value="24-06-2004 Lorem ipsum dolor 'sit' amit"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:42:45.890

```
ResultString = Regex.Replace(SubjectString, _
    "(?<=         # Assert that this matches before the current position:" & chr(10) & _
    " ^           # Start of string                                      " & chr(10) & _
    " [^""]*""    # Match any number of non-quotes, then one quote       " & chr(10) & _
    " (?>[^""]*"" # Match pairs of quotes,                               " & chr(10) & _
    "    [^""]*"" # optional non-quotes in-between                       " & chr(10) & _
    " )*          # any number of times.                                 " & chr(10) & _
    " [^""]*      # Match any number of non-quotes                       " & chr(10) & _
    ")            # End of lookbehind assertion                          " & chr(10) & _
    """           # MATCH ONE QUOTE                                      " & chr(10) & _
    "(?!          # Assert that the following cannot match here:         " & chr(10) & _
    " \s+         #  Whitespace                                          " & chr(10) & _
    " \w+=        #  An identifier like value=                           " & chr(10) & _
    "|            # or                                                   " & chr(10) & _
    " \s*         #  optional whitespace                                 " & chr(10) & _
    " [/?]?       #  followed by either / or ? or nothing                " & chr(10) & _
    " >           #  followed by >                                       " & chr(10) & _
    ")            # End of lookahead assertion.                          " & chr(10) & _
    "|            # OR do the same in the other direction:               " & chr(10) & _
    "(?<!\w+=)""(?=[^""]*""(?>[^""]*""[^""]*"")*[^""]*$)", _
    "&quot;", RegexOptions.IgnorePatternWhitespace) 
```

# angularjs - 检查 json 字典是否有空字符串作为值

> ID：14871218
> 
> 赞同：2
> 
> 时间：2013-02-14T09:10:02.543
> 
> 标签：angularjs, string

我想要实现的是仅当 JSON 对象中的元素值**不**等于空字符串时才显示和元素`''`。

### 例如：

说我有以下 json 对象

```
{
    'id' : 23,
    'name' : 'Adrian Reese',
    'age' : '',
    'location' : ''
} 
```

现在在我显示用户信息的部分模板中，我执行以下操作：

```
<h1>{{ user.name | capitalize }}</h1>
<span class="age">Age: {{ user.age }}</span>
<span class="location">Location: {{ user.location }}</span> 
```

对于每个用户，我希望`<span>'s`仅当值不等于时才可见`''`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T09:45:04.623

使用`ngShow`：[http ://docs.angularjs.org/api/ng.directive:ngShow](http://docs.angularjs.org/api/ng.directive:ngShow)

```
<span ng-show="user.age != ''" class="age">Age: {{ user.age }}</span>
<span ng-show="user.location != ''" class="location">Location: {{ user.location }}</span> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T09:45:19.383

`div`您可以使用以下元素包装您的标记，例如`ng-show`：

```
<div ng-show="user.age != ''">
    <h1>{{ user.name | capitalize }}</h1>
    <span class="age">Age: {{ user.age }}</span>
    <span class="location">Location: {{ user.location }}</span>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T10:41:14.707

您可以使用过滤器在代码中指定可见属性规则：

[http://jsfiddle.net/g/sANcQ/2/](http://jsfiddle.net/g/sANcQ/2/)

```
 <div ng-controller="Ctrl">
   <h1>{{ user.name }}</h1>
   <span ng-repeat="(key, value) in user | userVisibleProps" class="{{key}}">{{key}}: {{value}}</span>
</div> 
```

Javascript：

```
function Ctrl($scope) {
    $scope.user = {
        'id' : 23,
        'name' : 'Adrian Reese',
        'age' : '',
        'location' : ''
    };
}

angular.module('app', [])
  .controller('Ctrl', Ctrl)
  .filter('userVisibleProps', function(){
      return function(user) {
          var visibleUser = {};
          for(var key in user) {
              if(key != 'id' && user[key] !== '') {
                  visibleUser[key] = user[key];
              }
          }
          return visibleUser;
      };
  });

angular.bootstrap(document.body, ['app']); 
```

# emblem.js - 如何在会徽.js 模板中插入 HTML 符号

> ID：14871219
> 
> 赞同：0
> 
> 时间：2013-02-14T09:10:04.643
> 
> 标签：emblem.js

我想`&nbsp;`在两个元素之间插入一个特殊字符。

例如，在这样`i`定义的标签之后：

```
%i.icon-off 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:05:28.160

根据您在另一个答案中的评论，这里有几种不同的方式我会写这个：

```
 i.icon-off
 |  #{t "menu.logout"} 
```

请注意“#”之前的额外空格。'|' 后面的那个 是可选的，如果存在就会被忽略，所以你必须再使用一个。

还可以写

```
 i.icon-off
 |  {{t "menu.logout"}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:21:31.907

我终于找到了方法：

```
%i.icon-off
| &nbsp;
t "menu.logout" 
```

但在其他更简单的情况下，您也可以使用：

```
i.icon-off &nbsp; 
```

# packet - 如何做数据包嗅探器？

> ID：14871221
> 
> 赞同：1
> 
> 时间：2013-02-14T09:10:17.553
> 
> 标签：packet, tcp-ip

每个人。这都是关于我们的门记录系统 Falco。当员工将他/她的 ID 敲入读卡器时，信号会发送到 Falco 服务器并将数据（卡 ID、时间）输入数据库。Falco 的报告确实没有帮助，所以我们的人力资源人员几乎手动进行考勤记录工作。我无法访问 Falco 数据库，但我可以物理访问位于 Falco 服务器和读卡器之间的“面板”。我可以从 Falco Panel 窃听数据包并将数据放入我自己的数据库吗？Falco Panel 实现 TCP/IT、ARP 和 DHCP，并使用端口号 4413 和 4414。我搜索了如何使用以太网分离器，但我仍然感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:12:03.897

如果您可以访问 Falco 运行所在的同一网络，则可以使用某种数据包嗅探软件。Wireshark 是一个非常流行的数据包嗅探器，我会推荐它。Wireshark 可以记录所有数据包流量并按使用的协议对其进行排序。它允许您像您想要的那样保存、打印记录并将其添加到数据库中。但是，您最终需要做的主要事情是访问同一网络 falco 和读卡器使用。所以是的，您可以使用以太网分路器并将单独的电缆连接到您的计算机。这样，wireshark 就可以访问流量。[您可以在http://www.wireshark.org](http://www.wireshark.org)下载wireshark

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-22T09:10:46.487

我只想补充一下 Wireshark 用于`libpcap`实际捕获数据包的内容。确定协议和数据格式后，如果您想编写自己的应用程序，也可以使用它。请参阅[http://www.tcpdump.org](http://www.tcpdump.org)。

# php - 如何使用 parent:: 方法访问父类中的变量

> ID：14871224
> 
> 赞同：4
> 
> 时间：2013-02-14T09:10:25.210
> 
> 标签：php

我在父类中有受保护的变量 UserId。我将在我的子类中扩展变量，如下所示

```
class Main
{
  protected $UserId          = "151";
  protected static $UserName = "Madhavan";      

  protected function SampleMethod()
  {
    print "This is Sample Method";
  } 
}

class SubMain extends Main
{   
  function __construct()
  {    
    print parent::SampleMethod();

    print "User Id is ".$this->UserId."<br/>";          
    print parent::$UserName;
    print "User Id is ".parent::$UserId."<br/>";            
  }
} 
```

当我使用**$this->UserId**时，它的打印很好。但是当我使用 Parent::$UserId 时，它的显示错误

*致命错误：访问未声明的静态属性：Main::$UserName*

为什么它没有显示我由**parent::SampleMethod()**访问的函数，因为该函数不是静态的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:34:35.307

范围解析运算符`::`有时会以不明显的方式表现。当应用于常量或变量时，它总是以静态方式解析。

但是，当应用于函数时，被调用者的执行上下文取决于调用者代码的执行上下文；上下文没有改变。

例如，这可以正常工作，没有任何警告：

```
class Test
{
  private $a = 123;

  public function __construct()
  {
    Test::test();
    self::test();
  }

  public function test()
  {
    echo $this->a;
  }
}

new Test(); 
```

调用`self::test()`和`Test::test()`两者都以非静态方式运行，因为`__construct()`被非静态调用并且您引用的是同一个类。

要引用任何实例变量，例如`$a`在上面的示例中，`$this->`需要使用 of。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:21:25.730

这是因为函数是可覆盖的（因此旧版本的同名共存）而属性不是（声明只是相互覆盖，并且不应在后代类中重新声明属性）。`$this->`如果它不是静态的，并且如果它是静态的，您总是访问属性的唯一实例`self::`。（如果在多个祖先类中声明了一个属性，则仍然只存在一个数据字段，因此您不能引用任何“其他”或“以前的”。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:24:42.623

如果 E_STRICT 未激活，您将不会收到错误消息，否则您将收到如下内容：

严格标准：非静态方法 parent::SampleMethod() 不应在...中静态调用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T09:30:29.913

`self::$UserName`您可以使用self 关键字的属性（定义它的位置）来访问它，而不是使用 parent 。如果您想在子类中达到它的值（因为覆盖它），它可以通过`final::$UserName`（称为后期静态绑定）访问

# h2 - h2 根据表中的当前列创建计算列

> ID：14871226
> 
> 赞同：0
> 
> 时间：2013-02-14T09:10:30.833
> 
> 标签：h2

我有一个非常奇怪的问题，在我看来，我希望根据同一个表中的当前列计算现有列。现有的列类型是“DATE”，另一种是“Datetime”。我使用查询“ ALTER TABLE TEST ALTER COLUMN 'date' AS CONVERT('last_date', DATE) ”。我总是遇到异常：org.h2.jdbc.JdbcSQLException：SQL 语句中的语法错误“ALTER TABLE TEST ALTER COLUMN 'date'[*] AS CONVERT('last_date', DATE)”；预期的“标识符”；...

等待任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:48:03.137

alter table的[H2 SQL 语法](http://h2database.com/html/grammar.html#alter_table_alter)不同。尝试：

```
drop table test;
create table test("last_date" timestamp, "date" timestamp);
alter table test alter column "date" timestamp 
    as convert("last_date", date); 
```

或者

```
drop table test;
create table test(last_date timestamp, date timestamp);
alter table test alter column date timestamp 
    as convert(last_date, date); 
```

# c# - c# PicturePanel地址解析问题

> ID：14871227
> 
> 赞同：0
> 
> 时间：2013-02-14T09:10:31.187
> 
> 标签：c#, visual-studio

我最近在c#中遇到了一个奇怪的错误。我正在处理一个有多个图片面板的作业。其中一个用于获取图片，而其他用于显示匹配。

这是我的代码

```
pic.image = image.fromfile("images\\a.png"); 
```

好的，我的问题是这段代码有效，直到我没有直接从面板获取图片

为了获取图片，我正在使用此代码

```
if (openPicture.ShowDialog() != DialogResult.Cancel)
        {
            //----------- Load Picture ----------------------------------
            pictureBox13.Image = Image.FromFile(openPicture.FileName);
        } 
```

如果我成功获得照片，第一个代码会给我这个错误

```
 "file not found error" 
```

任何人都会遇到这样的问题，因为我无法在第一个代码中硬编码图像的确切位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:07:59.607

好吧，我没那么聪明，但我仍然发现这个解决方案最适合我的情况

```
Directory.GetCurrentDirectory(); 
```

我只是在每张图片中添加了这一行，以从相对更改为绝对。

# c# - 数据集写入文件

> ID：14871228
> 
> 赞同：3
> 
> 时间：2013-02-14T09:10:31.857
> 
> 标签：c#, .net, dataset, filestream

我有一个`DataSet`with `600K records`。
当我尝试将这些数据写入`XML`文件时，我`OutOfMemoryException`总是会得到。
以下是我目前如何编写数据。

执行此操作的**最有效的内存**方法是什么？

```
using (MemoryStream output = new MemoryStream())
{
    WorkingDataset.WriteXml(output, XmlWriteMode.WriteSchema);
    using (FileStream outputFile = File.Create(FilePath))
    {
         using (GZipStream compressedStream = new GZipStream(outputFile, CompressionMode.Compress))
         {
        compressedStream.Write(output.GetBuffer(), 0, (int)output.Length);
         }
        }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T09:11:43.500

你为什么要使用 a `MemoryStream`？直接写入磁盘即可：

```
using (var fileStream = File.Create(FilePath))
{
    using (var zipStream = new GZipStream(outputFile, CompressionMode.Compress))
    {
        WorkingDataset.WriteXml(zipStream, XmlWriteMode.WriteSchema);
    }
} 
```

# c++ - 是否有一种优雅的方式来遍历 2 个地图并比较值（地图具有相同的类型）

> ID：14871232
> 
> 赞同：3
> 
> 时间：2013-02-14T09:10:56.270
> 
> 标签：c++, stl, stdmap

假设我有 2 张地图：

```
map<int,vector<int>> id2courses;
map<int,vector <int>> id2allowed_courses; 
```

我想为每个 key(id) 查看课程列表是否仅包含该 id 允许的课程。它可以通过 for 循环轻松完成，但我想利用 std::map 是有序的这一事实，也就是我想在两个映射中前进（用较小的键递增迭代器），然后当我点击相等的键时我想做比较。我知道我可以用非平凡的 while 循环来做到这一点，但我想知道有没有内置的 STL 方法来做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:29:11.000

使用[`std::set_intersection`](http://en.cppreference.com/w/cpp/algorithm/set_intersection)有点小技巧：

```
map<int,vector<int>> id2courses;
map<int,vector <int>> i2allowed_courses;

set_intersection(id2courses.begin(), id2courses.end(),
                 i2allowed_courses.begin(), i2allowed_courses.end(),
                 null_output_iterator(),
                 compare_and_do_something_if_same_key); 
```

来自`null_output_iterator`问题[Discarding the output of a function that need a output iterator](https://stackoverflow.com/q/335930/1084416)。

`compare_and_do_something_if_same_key``pair<const int, vector<int>>`将从每个地图中传递一个。如果键相等，您可以进行所需的处理。您还需要返回一个布尔值来表示元素的顺序：

```
bool compare_and_do_something_if_same_key(
    pair<const int, vector<int>& a, pair<const int, vector<int>& b)
{
    if(a.first == b.first) {
        doProcessing(a, b);
    }
    return a.first < b.first;
} 
```

警告 Emptor：文档说比较函数不能修改被比较的对象。我认为这意味着不得以会导致订购问题的方式进行修改。由于您没有按`second`价值排序，所以`pair`我认为这并不重要。

*编辑*可读性：

这可以包装成一个命名函数：

```
template<typename Map, typename KeyValueProcessor> 
void process_values_for_matching_keys(
    Map& map1, Map& map2, KeyValueProcessor& keyValueProcessor); 
```

并用作：

```
process_pairs_for_matching_keys(id2courses, i2allowed_courses, doProcessing); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:16:45.073

您可以使用[set_intersection()](http://www.cplusplus.com/reference/algorithm/set_intersection/)，但是这个实现虽然更容易阅读，但性能并不好。我会使用一个循环并在两个映射上增加两个迭代器。我认为没有更快的解决方案。即使有一些内置的东西，它的性能也会和这个幼稚的解决方案一样好。

# c# - 获取 WebBrowser.NewWindow 事件的 URL

> ID：14871235
> 
> 赞同：3
> 
> 时间：2013-02-14T09:11:03.517
> 
> 标签：c#, browser, new-window

我正在尝试将新的 Window 事件重定向到新选项卡：

```
myWebBrowser.NewWindow += add_NewTab; 

//...

private void add_NewTab(object sender, CancelEventArgs e)
{ 
    WebBrowser thisWebBrowser = (WebBrowser)sender;
    e.Cancel = true; //should block the default browser to open a new window

    TabPage addedTabPage = new TabPage("redirected tab"); //create a new tab
    tabControl_webBrowsers.TabPages.Add(addedTabPage); //add the new tab to the TabControl
    WebBrowser addedWebBrowser = new WebBrowser() //create the new web browser inside the new tab
    {
        Parent = addedTabPage,
        Dock = DockStyle.Fill
    };

    addedWebBrowser.Navigate(thisWebBrowser.StatusText.ToString()); //set the new browser destination url
} 
```

我不确定 using`WebBrowser.StatusText`是获取新窗口 url 的最佳方式（这不适用于我测试过的每个站点）。

是否有更好的类/方法可以调用来获取新的窗口目标？

* * *

**更新：**

我已经尝试过查理建议的解决方案

1.  添加了 Microsoft Internet Control (COM) 参考
2.  使用 SHDocVw 添加；
3.  使用了代码：

    System.Windows.Forms.WebBrowser myWebBrowser = new System.Windows.Forms.WebBrowser();
    SHDocVw.WebBrowser axBrowser = (SHDocVw.WebBrowser)myWebBrowser.ActiveXInstance;
    axBrowser.NewWindow3 += new DWebBrowserEvents2_NewWindow3EventHandler(Browser_NewWindow3);

不幸的是，我收到了`NullReference Exception`我无法纠正的第三行。

* * *

**解决方案：**

我认为解决方案不在相关答案中（或者我无法找到它），因为它解释了如何实现 NewWindow2 事件（而不是处理原始目标 url 的 NewWindow3），并且建议的实现是相同的这里会导致 NullReference Exception 错误。
无论如何，我发现了这两个帖子：

*   [讨论](http://www.rapidsnail.com/Developer/topic/2008/75/3/48011/open-in-new-window-c-webbrowser-problems.aspx)_
*   [原文](http://blog.csdn.net/jinjazz/article/details/1901192)（页面是中文但代码可读）

建议是将前三行修改为这一行：

```
(myWebBrowser.ActiveXInstance as SHDocVw.WebBrowser).NewWindow3 += new SHDocVw.DWebBrowserEvents2_NewWindow3EventHandler(Browser_NewWindow3); 
```

`System.Windows.Forms.WebBrowser`现在一切正常，我能够在所有其余代码中继续使用原始代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T17:35:34.800

看起来`WebBrowser`控件是一个非常蹩脚的包装器`SHDocVw`。幸运的是，微软通过`WebBrowser.ActiveXInstance`.

来自[http://www.codeproject.com/Articles/71592/How-to-easily-capture-the-NewWindow3-event-and-det](http://www.codeproject.com/Articles/71592/How-to-easily-capture-the-NewWindow3-event-and-det)的代码可以解决问题：

首先，添加对`Microsoft Internet Controls`. 然后实现一个 NewWindow3 处理程序：

```
SHDocVw.WebBrowser axBrowser = (SHDocVw.WebBrowser)webBrowser.ActiveXInstance;
axBrowser.NewWindow3 += new DWebBrowserEvents2_NewWindow3EventHandler(Browser_NewWindow3); 
```

# c# - 报告来自不同类c#的进度backgroundworker

> ID：14871238
> 
> 赞同：16
> 
> 时间：2013-02-14T09:11:12.227
> 
> 标签：c#, backgroundworker

在我的 .NET C# 项目中，我使用了“BackgroundWorker”来调用不同类中的方法。以下是我的主要形式的源代码

```
public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        testClass t1 = new testClass();
        private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            t1.changevalue(1000);
        }

        private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            label1.Text += Convert.ToString(e.ProgressPercentage);
        }

        private void button1_Click(object sender, EventArgs e)
        {
            backgroundWorker1.RunWorkerAsync();
        }
    } 
```

并在我的项目中名为“testClass.cs”的单独类文件中包含以下代码。我想从这个类向BackgroundWorker报告进度，这样我就可以从label1中显示main中的进度。

```
class testClass
    {
        private int val;
        public int changevalue(int i)
        {
            for (int j = 0; j < 1000; j++)
            {
                val += i + j;
                //from here i need to preport the backgroundworker progress
                //eg; backgroundworker1.reportProgress(j);
            }
            return val;
        }
    } 
```

但我不允许从“testClass”访问 BackgroundWorker。

有人可以告诉如何克服这个问题吗？

ps-我找到[了这个解决方案](https://stackoverflow.com/questions/3289920/c-sharp-how-to-report-progress-from-within-a-class-to-a-backgroundworker)，但我不明白。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-14T09:39:27.073

您可以将其作为变量传递

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    t1.changevalue(1000, sender as BackgroundWorker);
}

class testClass
{
    private int val;
    public int changevalue(int i, BackgroundWorker bw)
    {
        for (int j = 0; j < 1000; j++)
        {
            val += i + j;
            bw.ReportProgress(i);
            //from here i need to preport the backgroundworker progress
            //eg; backgroundworker1.reportProgress(j);
        }
        return val;
    }
} 
```

**但**我认为最好的选择是`event`你`testClass`可以`Form`分配的。

```
public partial class Form1 : Form
{
    private BackgroundWorker backgroundWorker1;
    private testClass t1 = new testClass();

    public Form1()
    {
        InitializeComponent();

        // subscribe to your event
        t1.OnProgressUpdate += t1_OnProgressUpdate;
    }

    private void t1_OnProgressUpdate(int value)
    {
        // Its another thread so invoke back to UI thread
        base.Invoke((Action)delegate
        {
            label1.Text += Convert.ToString(value);
        });
    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        t1.changevalue(1000);
    }

    private void button1_Click_1(object sender, EventArgs e)
    {
        backgroundWorker1.RunWorkerAsync();
    }

}

class testClass
{
    public delegate void ProgressUpdate(int value);
    public event ProgressUpdate OnProgressUpdate;

    private int val;
    public int changevalue(int i)
    {
        for (int j = 0; j < 1000; j++)
        {
            val += i + j;

            // Fire the event
            if (OnProgressUpdate != null)
            {
                OnProgressUpdate(i);
            }
        }
        return val;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-12T11:02:30.207

我刚刚遇到了同样的问题（我的长期运行过程是数据库还原），并通过在另一个类中引发一个事件以类似的方式解决了它，但随后让我对该事件的订阅者充当了 backgroundWorker1 的包装器.报告进度（）。

```
private void DBRestoreProgressHandler(DataAccess da, DataAccess.DatabaseRestoreEventArgs e)
    {
        backgroundWorker1.ReportProgress(e.RestoreProgress);
    }

private void backgroundWorker1_ReportProgress(object sender, ProgressChangedEventArgs e)
    {
        someLabel.Text = e.ProgressPercentage.ToString();
    } 
```

这节省了不得不使用：

```
base.Invoke((Action)delegate 
```

如果表单意外关闭，我认为这会导致问题？

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-09-10T19:09:20.747

我在上面的代码中错过了这个吗？：

backgroundWorker1 = new BackgroundWorker();

backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);

# architecture - 框架的调用堆栈和堆栈具有不同位置的平台？

> ID：14871239
> 
> 赞同：0
> 
> 时间：2013-02-14T09:11:20.750
> 
> 标签：architecture, hardware, platform

是否有一个硬件平台本机支持两个不同的内存位置来存储调用堆栈和函数堆栈帧的堆栈？首先——也许保护用户代码的读写。对硬件平台特别感兴趣，这些平台是为传统的结构化语言（即 C/C++）而设计的，但并不陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T01:12:39.233

这是非常低资源微控制器的常见设置。

这种安排的动机通常是以下一种或两种：

1) 以核心速度运行的片上 SRAM 数量有限（通常为 1 或 2 kB），而额外的内存访问时间较慢 - 1kB 足够用于返回地址的几个线程堆栈，而不是用于大型自动变量存储在堆栈中。2) 分段寻址模式，其中段内存储器访问指令使用较短的操作码进行编码，因此可以更快地从 RAM 中获取。

这种安排使函数调用和返回的简单情况变得便宜。

在实践中，对于许多 CPU 架构——尤其是 RISC 架构——编译器使用通用内存访问指令来创建和使用堆栈帧，因此关于堆栈帧所在的位置以及如何使用它们的决定是编译器作者的一项任务而不是 CPU 架构师。

我怀疑您对这个问题的想法是保护返回地址不被堆栈帧中的其他数据覆盖？

# ios - uitextview 成为第一响应者后，UIButton 不调度触摸事件

> ID：14871240
> 
> 赞同：4
> 
> 时间：2013-02-14T09:11:22.543
> 
> 标签：ios, uibutton, uitextview, touch-event, first-responder

当控制器加载时，我有一个`UITextView`应该成为第一响应者（显示键盘）。唯一的事情是，我已经“膨胀”了两个`UIView`，每个都包含一个`UIButton`. 当`UITextView`还不是第一响应者时，这些按钮上的触摸事件确实起作用，但是在`UITextView`成为第一响应者之后，`UIButtons`它们没有响应任何点击事件。

当 textview 成为第一响应者时，如何确保按钮仍然有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:15:18.693

希望这对你有用。它确实对我有用..

在`UIButton`'s`IBAction`方法中检查您的文本字段是否是第一响应者。如果是第一响应者，请辞职。这将关闭键盘并执行按钮操作。

```
-(IBAction)btn:(id)sender
 {
  if ([txt isFirstResponder]) 
   {
    [txt resignFirstResponder];
   }
 UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"hi" message:@"Hello" delegate:self cancelButtonTitle:@"ok" otherButtonTitles:nil, nil];
 [alert show];
} 
```

![按钮动作加上辞职的第一响应者](../Images/12a6be888260b13e996aaa5c134b1cd1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-26T16:20:01.650

Changing the button initialization to lazy might fix the problem, as was suggested [in this answer](https://stackoverflow.com/a/49604460/4884617).

# c# - 静态类和非静态类有什么区别？

> ID：14871242
> 
> 赞同：-8
> 
> 时间：2013-02-14T09:11:26.797
> 
> 标签：c#

有人可以解释一下这两个类之间的区别吗？

我总是使用第一个，但我也经常使用第二个。

```
public static class Test
{
    public static void Method()
    {

    }
}

public class Test
{
    public static void Method()
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T09:13:27.307

第一个类是静态的，这意味着：

*   您不能将其用作类型参数
*   您不能将其用作变量类型
*   它将*没有*实例构造函数（而您的非静态类隐式具有公共无参数构造函数）
*   它将是隐式抽象和密封的（即使该组合不能是静态的
*   它不能包含任何非静态成员
*   它可以包含扩展方法（如果它是顶级的非泛型静态类）

Basically for utility classes which are only *meant* to contain static members, using a static class expresses that intent clearly and lets the compiler help you enforce that usage.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:12:55.307

静态类永远不能被实例化，只能有静态成员。在您的第二个代码片段中，您可以创建一个实例`Test`，但不是在第一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:13:08.530

静态类只能包含第一个静态成员。第二个是非静态类，可以包含静态和非静态。

> 一个类可以声明为静态的，表明它只包含静态成员。无法使用 new 关键字创建静态类的实例。加载包含类的程序或命名空间时，.NET Framework 公共语言运行时 (CLR) 会自动加载静态类，[参考](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx).

# vb.net - 如果 vb.net 中的运算符给出错误

> ID：14871244
> 
> 赞同：2
> 
> 时间：2013-02-14T09:11:33.267
> 
> 标签：vb.net

我的代码中有一行`notes = If(IsDBNull(notes),"","")`。当我尝试在本地主机上运行它时，

我在第 51 行收到错误消息：

> 说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

```
Compiler Error Message: BC30201: Expression expected.

Source Error:

Line 49:       End Try  
Line 50:       
**Line 51:     notes = If(IsDBNull(notes),"","")** 
Line 52:       'Context.Response.Output.Write("AAAA"+notes+"MMM")
Line 53:        if notes.Trim().Equals("TIMEUP") then  

Version Information: Microsoft .NET Framework Version:2.0.50727.5466; ASP.NET Version:2.0.50727.5459 
```

但是，当将相同的代码移植到生产环境时，它运行时没有任何故障，知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:13:24.510

你的意思是：

```
IIf(IsDBNull(notes),"","") 
```

注意额外的 I。

如果语句被声明为您在第 53 行看到的语句：

```
If <condition> Then 
```

IIF 语句声明为：

```
IIf(Expression, True, False) 
```

[http://msdn.microsoft.com/en-gb/library/27ydhh0d(v=vs.71).aspx](http://msdn.microsoft.com/en-gb/library/27ydhh0d(v=vs.71).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T09:17:02.227

问题是 VS 2008 引入了[`If`-operator](http://msdn.microsoft.com/en-us/library/bb513985%28v=vs.90%29.aspx)，但您正在编译为 .NET Framework Version:2.0。

这将在 .NET 2 上编译：

```
Dim notesObj As Object = IIf(IsDBNull(notes),"","") 
```

不同之处在于它`IIF`返回一个对象，而`If`它是强类型的（[C# 中的条件运算符 (?)](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.80%29.aspx)），因此您可以编写：

```
Dim notesStr = If(IsDBNull(notes),"","") ' a string ' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T09:16:49.100

VB.NET 2008 引入了**operator**，它会**短路**——也就是说，只有一个 if-true 和 if-false 表达式被评估。[`If`](http://msdn.microsoft.com/en-gb/library/bb513985%28v=vs.90%29.aspx)

 ****在此之前，所有可用的都是**function**，它作为一个*function*，总是计算if-true*和*if-false 表达式。[`IIf`](http://msdn.microsoft.com/en-gb/library/27ydhh0d%28v=vs.90%29.aspx)

 ****看起来您的生产机器使用的是 VB.NET 2008 或更高版本，而您的本地计算机使用的是 VB.NET 2005 或更早版本。********

# r - 我可以在数据框的每个元素上使用 gsub() 吗？

> ID：14871249
> 
> 赞同：11
> 
> 时间：2013-02-14T09:11:46.467
> 
> 标签：r

从 Wikipedia 导入表格后，我有以下形式的值列表：

```
 > tbl[2:6]
    $`Internet
    Explorer`
     [1] "30.71%" "30.78%" "31.23%" "32.08%" "32.70%" "32.85%" "32.04%" "32.31%" "32.12%" "34.07%" "34.81%"
    [12] "35.75%" "37.45%" "38.65%" "40.63%" "40.18%" "41.66%" "41.89%" "42.45%" "43.58%" "43.87%" "44.52%"

    $Chrome
     [1] "36.52%" "36.42%" "35.72%" "34.77%" "34.21%" "33.59%" "33.81%" "32.76%" "32.43%" "31.23%" "30.87%"
    [12] "29.84%" "28.40%" "27.27%" "25.69%" "25.00%" "23.61%" "23.16%" "22.14%" "20.65%" "19.36%" "18.29%" 
```

我试图摆脱百分比符号，以便将数据转换为数字形式。

**有没有比矢量化更快的方法来清理这些数据？**我当前的代码如下：

```
 data <- lapply(tbl[2:6], FUN = function(x) as.numeric(gsub("%", "", x))) 
```

数据最终成为数据框，但我无法`gsub`在数据框的所有元素上正常工作。**有没有办法 gsub() 数据框的每个元素？**

[该项目的代码是在线的，有结果。](http://rpubs.com/briatte/browsers)提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T09:17:44.890

好吧，我认为您可以通过以下方式进行操作，但我不知道它是否比您的更好或更清洁：

```
df <- data.frame(tbl)
df[,-1] <- as.numeric(gsub("%", "", as.matrix(df[,-1]))) 
```

这使 ：

```
R> head(df)
            Date Internet.Explorer Chrome Firefox Safari Opera Mobile
1   January 2013             30.71  36.52   21.42   8.29  1.19  14.13
2  December 2012             30.78  36.42   21.89   7.92  1.26  14.55
3  November 2012             31.23  35.72   22.37   7.83  1.39  13.08
4   October 2012             32.08  34.77   22.32   7.81  1.63  12.30
5 September 2012             32.70  34.21   22.40   7.70  1.61  12.03
6    August 2012             32.85  33.59   22.85   7.39  1.63  11.78
R> sapply(df, class)
             Date Internet.Explorer            Chrome           Firefox 
         "factor"         "numeric"         "numeric"         "numeric" 
           Safari             Opera            Mobile 
        "numeric"         "numeric"         "numeric" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T10:18:28.607

像 juba 我不确定这种方式是否“更好或更清洁”但是......要对数据框的所有元素采取行动，您可以使用*apply*：

```
# start with data frame, not list
url <- "http://en.wikipedia.org/wiki/Usage_share_of_web_browsers"
# Get the eleventh table.
tbl <- readHTMLTable(url, which = 11, stringsAsFactors = F)

# use apply on the non-date columns
tbl[, 2:7] <- apply(tbl[, 2:7], 2, function(x) as.numeric(gsub("%", "", x))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-29T15:15:00.110

我会通过使用`for`-loop 来做到这一点（我知道人们不太喜欢循环，但至少它不会触及您的数据结构）：

```
 for (i in 1:length(tbl[2:6])) {
         tbl[,i] <- gsub("%", "", tbl[,i])
 } 
```

# r - par(mfrow=...) 用于 psych 库中的多个双标图

> ID：14871250
> 
> 赞同：1
> 
> 时间：2013-02-14T09:11:47.980
> 
> 标签：r, plot, psych

运行以下代码时，我没有得到预期的结果。我希望在一个窗口中获取所有图（当我执行更简单的操作时它可以工作`plot(1:5)`），但只有最后一个图出现在左上角。

为什么会发生这种情况，我怎样才能获得所需的行为？

```
library(psych)
swiss2<-swiss[c(2:6)]
rotations <- c("none", "varimax", "quatimax", 
               "promax", "oblimin", "simplimax")

par(mfrow=c(2,3))
for (current_rotation in rotations){
  biplot(principal(swiss2, nfactors = 2, rotate = current_rotation, scores = T), 
         main = current_rotation)
} 
```

`windows()`注意：我用和尝试了不同的图形设备`x11()`。同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-09T17:14:56.827

这是 biplot.psych 中的一个微妙错误。

我在 biplot.psych 的出口处将图形参数重置为原始设置。我已对此进行了修改以保留 op <- par(mfrow=c(2,3)) #或任何设置。

一般来说，如果您发现 psych 中的错误，如果您让我知道，我会更快地修复它。

账单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:23:13.217

好吧，它在这里工作得很好。

我的第一次尝试失败并出现以下错误消息：

```
Loading required package: GPArotation
Erreur dans principal(swiss2, nfactors = 2, rotate = current_rotation, scores = T) (depuis #2) :
  I am sorry, to do these rotations requires the GPArotation package to be installed
De plus : Message d'avis :
In library(package, lib.loc = lib.loc, character.only = TRUE, logical.return = TRUE,  :
  there is no package called ‘GPArotation’ 
```

你有`GPArotation`安装包吗？

![在此处输入图像描述](../Images/95030f7cda526ba37b624bb23cf76cb1.png)

# javascript - 使用 JavaScript 构建时，SVG 颜色阴影过滤器失败

> ID：14871252
> 
> 赞同：0
> 
> 时间：2013-02-14T09:11:55.557
> 
> 标签：javascript, image, svg, svg-filters

我为 SVG 图像创建了一个投影，使用纯 SVG 效果很好（参见[**现场演示**](http://jsfiddle.net/9dMWz/)）：

```
<!DOCTYPE html>
<html>
    <body>
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
            <defs>
                <filter id="drop">
                    <feComponenttransfer result="offOut" in="SourceAlpha">
                        <feFuncA type="linear" />
                        <feFuncR type="discrete" tablevalues="1" />
                        <feFuncG type="discrete" />
                        <feFuncB type="discrete" />
                    </feComponentTransfer>
                    <feOffset result="shadow" dx="67" dy="0" in="offOut" />
                    <feGaussianBlur stdDeviation="8" result="blurOut" in="shadow" />
                    <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />
                </filter>
            </defs>
            <g>
                <g filter="url(#drop)">
                    <image x="10" y="100" width="440" height="60" xlink:href="/images/pulpit.jpg"
                    preserveAspectRatio="defer"></image>
                </g>
            </g>
        </svg>
    </body>
</html> 
```

正如预期的那样，这里的图像是用红色阴影创建的，但我尝试使用以下代码通过 JavaScript 创建和修改 SVG（参见[**现场演示**](http://jsfiddle.net/7uJU7/)）：

```
<!DOCTYPE html>
<html>

    <body>
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="sv">
            <rect width="90" height="90" stroke="green" stroke-width="3" fill="rgba(255,25,8,1)"
            />
            <g id="gr">
                <image x="10" y="100" width="440" height="60" xlink:href="/images/pulpit.jpg"
                preserveAspectRatio="defer"></image>
            </g>
        </svg>
    </body>
    <script>
        var feoffset = document.createElementNS("http://www.w3.org/2000/svg", "feOffset");
        var feGaussianBlur = document.createElementNS("http://www.w3.org/2000/svg", "feGaussianBlur");
        var filter = document.createElementNS("http://www.w3.org/2000/svg", "filter");
        var definition = document.createElementNS("http://www.w3.org/2000/svg", "defs");

        filter.setAttribute("id", "fPicture5");
        filter.setAttribute("filterUnits", "userSpaceOnUse");
        feoffset.setAttribute("result", "shadow");
        feoffset.setAttribute("in", "offOut");

        feoffset.setAttribute("dx", "67");
        feoffset.setAttribute("dy", "0");

        feGaussianBlur.setAttribute("result", "blurOut");
        feGaussianBlur.setAttribute("in", "shadow");
        feGaussianBlur.setAttribute("stdDeviation", "8");

        var feBlend = document.createElementNS("http://www.w3.org/2000/svg", "feBlend");
        var feCTransfer = document.createElementNS("http://www.w3.org/2000/svg", "feComponentTransfer");

        var feFuncR = document.createElementNS("http://www.w3.org/2000/svg", "feFuncR");
        var feFuncG = document.createElementNS("http://www.w3.org/2000/svg", "feFuncG");
        var feFuncB = document.createElementNS("http://www.w3.org/2000/svg", "feFuncB");

        feCTransfer.setAttribute("in", "SourceAlpha");
        feCTransfer.setAttribute("result", "offOut");

        feBlend.setAttribute("in", "SourceGraphic");
        feBlend.setAttribute("in2", "blurOut");
        feBlend.setAttribute("mode", "normal");

        feFuncR.setAttribute("type", "discrete");
        feFuncG.setAttribute("type", "discrete");
        feFuncB.setAttribute("type", "discrete");

        feFuncR.setAttribute("tablevalues", "1");
        feFuncG.setAttribute("tablevalues", "0");
        feFuncB.setAttribute("tablevalues", "0");

        feCTransfer.appendChild(feFuncR);
        feCTransfer.appendChild(feFuncG);
        feCTransfer.appendChild(feFuncB);

        filter.appendChild(feCTransfer);
        filter.appendChild(feoffset);
        filter.appendChild(feGaussianBlur);
        filter.appendChild(feBlend);

        definition.appendChild(filter);
        document.getElementById("sv").appendChild(definition);
        document.getElementById("gr").setAttribute("filter", "url(#fPicture5)");
    </script>

</html> 
```

结果是图像创建成功，但是阴影是黑色的。

我找不到办法让它按预期变红，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:50:12.330

只需将您的 feFuncR tableValues 更改为“1 1” - 现在它已在 Firefox 中修复。

```
<feFuncR type="discrete" tableValues="1 1" /> 
```

Firefox 中存在一个错误，它没有正确处理具有单个值的离散 tableValues，该错误已在 edge.xml 中修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:18:25.973

这个怎么样？[http://jsfiddle.net/WvYpS/](http://jsfiddle.net/WvYpS/)

将 替换`feComponentTransfer`为`feColorMatrix`：

```
<feColorMatrix type="matrix" 
 values="0 0 0 1 0  
         0 0 0 0 0 
         0 0 0 0 0 
         0 0 0 1 0"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:06:47.140

[一旦我将图像替换为](http://jsfiddle.net/longsonr/5tN84/)实际存在的图像，例如另一个小提琴中的图像，它就可以在 Firefox 上完美运行：

```
<image x="10" y="100" width="440" height="60" xlink:href="http://placekitten.com/100/80"
preserveAspectRatio="defer"></image> 
```

如果您正在使用其他一些 UA 并且它不起作用，那么也许您应该在它使用的任何错误跟踪器上提出一个错误。

您是否意识到您还缺少第二把小提琴中的 feFuncA feComponentTransfer 孩子？

# visual-studio-2010 - Crystal Reports 从数据集中包装文本字段

> ID：14871259
> 
> 赞同：9
> 
> 时间：2013-02-14T09:12:17.623
> 
> 标签：visual-studio-2010, crystal-reports, dataset, word-wrap

我正在使用水晶报表和 Visual Studio 2010 来显示来自 sql server 数据库的报表。所以我有这个大文本字段（varchar（500））并用数据集检索它以生成报告。问题是，我的报告中的文本字段不是将文本换行以适合框，而是在右侧截断并且不会将其拉下一行。我没有看到任何看起来直接影响文本换行功能的设计时属性。到目前为止我做了什么：

1.  我使用了可以增长选项并设置了适当的限制，但它仍然与线重叠。
2.  我也尝试在文本对象中插入数据字段，但没有任何改变。

截图在这里[http://imageshack.us/f/11/44079942.jpg/](http://imageshack.us/f/11/44079942.jpg/)

我错过了什么？

先感谢您

pe2s

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T23:53:36.380

右键单击文本字段，选择“格式对象”，转到常用选项卡，然后选中“可以增长”。这允许文本框随着文本换行而向下增长。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T06:08:47.620

尝试这个，

1.  右键单击要自动换行的字段
2.  选择“格式化对象”选项
3.  选择“可以增长”复选框
4.  最大行数“1”或保持“0”以忽略行数限制。

这应该工作..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-30T13:36:14.003

尝试这个，

右键单击对象选择格式对象选择可以增长最大行数“0”然后确定

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-30T03:12:28.407

我已经解决了，结果我的水晶报表似乎崩溃了。当我重新安装我的 CR13 时，问题消失了。谢谢大家的回复

# git - 在 ubuntu 上克隆需要很长时间

> ID：14871260
> 
> 赞同：5
> 
> 时间：2013-02-14T09:12:21.040
> 
> 标签：git, git-clone

我已经使用命令在 ubuntu 中安装了 Git

```
sudo apt-get install git-core 
sudo apt-get install git 
```

在此之后，我尝试使用命令安装 node.js

```
git clone git://github.com/ry/node.git 
```

在这一步，它说

```
Cloning into node.. 
```

并且需要很长时间并且不会返回。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T00:32:57.013

该存储库 ( `git://github.com/ry/node.git`) 实际上重定向到`joyent`帐户。

尝试使用 git 或 https 协议的*目标*url，看看克隆是否更快。

```
git clone git://github.com/joyent/node.git
git clone https://github.com/joyent/node.git 
```

另外，两天前，GitHub 遇到了一些可能影响克隆的问题：

> 10:11 我们目前的一台文件服务器出现问题。这会影响存储库的子集。
> 10:05 UTC我们正在调查我们的一个文件服务器的问题。

* * *

我刚刚使用两种协议对其进行了测试：

```
vonc@voncp1 ~/ $ time git clone git://github.com/joyent/node.git
[ VonC,vonc@laposte.net for github.com ]
Cloning into 'node'...
remote: Counting objects: 92208, done.
remote: Compressing objects: 100% (23478/23478), done.
remote: Total 92208 (delta 72604), reused 85936 (delta 67189)
Receiving objects: 100% (92208/92208), 57.96 MiB | 4.49 MiB/s, done.
Resolving deltas: 100% (72604/72604), done.

real    0m34.156s
user    0m9.777s
sys 0m2.104s 
```

和：

```
vonc@voncp1 ~/ $ time git clone https://github.com/joyent/node
[ VonC,vonc@laposte.net for github.com ]
Cloning into 'node'...
remote: Counting objects: 92208, done.
remote: Compressing objects: 100% (23478/23478), done.
remote: Total 92208 (delta 72604), reused 85936 (delta 67189)
Receiving objects: 100% (92208/92208), 57.96 MiB | 3.48 MiB/s, done.
Resolving deltas: 100% (72604/72604), done.

real    0m43.459s
user    0m10.153s
sys 0m1.752s 
```

# entity-framework - 在灯光开关中以零或一对一关系创建主键

> ID：14871261
> 
> 赞同：0
> 
> 时间：2013-02-14T09:12:21.247
> 
> 标签：entity-framework, entity-relationship, visual-studio-lightswitch

我有两个表，第一个有一个主键但它不是自动增量，另一个有一个主键并且也是自动增量。我需要将第二个主键的值设置为第一个。

```
TABLE1 primary key         TABLE2 primary key
zero or one   ------------ one 
```

当我向 TABLE1 插入新记录时，我有这种关系，TABLE2 主键没有插入到 TABLE1 主键。值为 0。我该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:56:11.960

它不会自动设置，您必须在*Table1*的*Inserting*方法中向*Table2*添加一条记录，并自己设置对它的引用。

 **仅仅因为您定义了它们之间的关系并不意味着*Table2*记录将被自动添加，*Table1* FK 也不意味着。

还是我误解了你的要求？

编辑：

```
partial void PERSONELs_Inserting(PERSONEL entity) 
{ 
    entity.refPersonelID = entity.Personelyetki.Id; 
} 
```

如果*refPersonelID*只是一个**整数**属性，那么上面的代码应该可以正常工作。如果它不仅仅是一个普通的整数属性，那么我仍然不明白问题是什么。你遇到了什么错误？

我将举一个例子，说明如何使用*Table1*和*Table2*设置导航属性。我假设它们之间存在 1-Many 关系，因此*Table1有一个名为**Table2s*的导航集合属性，而*Table2*有一个名为*Table1*的导航属性。我不完全理解您实际上要做什么，但下面的示例代码说明了设置导航属性的**正确方法。**

要设置 Table2 的 Table1 属性，您可以这样做：

```
private void UpdateTable1
{
    //retrieve the Table1 entity that corresponds to the required integer ID value (someIdValue)
    var table = this.Details.DataWorkspace.ApplicationData.Table1Set.SingleOrDefault(someIdValue);

    //assign the retrieved entity to the navigation property
    this.Table1 = table;

    //you CAN'T do this
    this.Tbale1.ID = someIdValue;
} 
```**

# imacros - 如何逐个运行宏（.iim）

> ID：14871262
> 
> 赞同：0
> 
> 时间：2013-02-14T09:12:21.030
> 
> 标签：imacros

我是 imacros 的新手。我有 5 个宏（.iim）。我想一个一个地执行所有宏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:29:54.037

使用 JavaScript 脚本。

```
iimPlay("macro1.iim")
iimPlay("macro2.iim")
iimPlay("macro3.iim")
iimPlay("macro4.iim")
iimPlay("macro5.iim") 
```

宏必须位于 #Current.iim 宏旁边的 Macros 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-22T14:43:51.930

如果要创建循环并设置要运行的时间，请使用此代码 con javascripting

```
var loopcounter = 10

for (i=1;i<=loopcounter;i++){
iimPlay("macro1.iim");
iimPlay("macro2.iim");
iimPlay("macro3.iim");
} 
```

# javascript - Backbone.js - 模型内的集合 - 对象函数 (a){return new n(a)} 没有方法“有”

> ID：14871266
> 
> 赞同：0
> 
> 时间：2013-02-14T09:12:37.610
> 
> 标签：javascript, backbone.js, backbone-model

我得到一个

```
Object function (a){return new n(a)} has no method 'has' 
```

`fetch()`在我的模型上调用该方法时出错。继承人的代码：

```
var Exercise = Backbone.Model.extend({
    defaults: {
        idAttribute: 'e_id',
        e_id: "-1",
        exerciseName: "Exercise",
        exerciseDescription: "Address",
        exerciseURL: "vimeo.com",
        reps: "0",
        sequence: "0"
    },
    initialize: function() {
        alert("Exercise!");
    }
});

var ExerciseList = Backbone.Collection.extend({
    url: "/getWorkoutList.php",
    model: Exercise,
    initialize: function() { }
});

var Workout = Backbone.Model.extend({
    urlRoot: "/getWorkoutList.php",
    url: function() {
        return this.urlRoot + "?workoutID=" + this.get('workoutId');
    },
    defaults: {
        idAttribute: 'workoutId',
        workoutId: "-1",
        workoutName: "WorkoutName",
        workoutDescription: "WorkoutDescription",
        exercises: new ExerciseList()
    }, 
    initialize: function() {
        _.bindAll(this); 
        directory.renderWorkout(this);
    },
    parse: function(response) {
        return response;
    }
});

var WorkoutList = Backbone.Collection.extend({
    url: "/getWorkoutList.php",
    model: Workout,
    initialize: function() {
        _.bindAll(this); 
    },
    parse: function(response) {
        return response;
    }
});

var WorkoutView = Backbone.View.extend({
    tagName: "div",
    className: "workout-container",
    template: $("#tmp-workout").html(),
    initialize: function() {
        _.bindAll(this); 
        this.model.bind('change', this.render, this);
    },
    render: function(){
        console.log("WorkoutView");
        var tmpl = _.template(this.template);
        this.$el.html(tmpl(this.model.toJSON()));
        return this;
    },
    //add ui events
    events: {
        "click #workout-details": "getWorkoutDetails"
    },

    getWorkoutDetails: function (e) {
        e.preventDefault();
        this.model.fetch();
    }
});

var ExerciseView = Backbone.View.extend({
    tagName: "exercise",
    className: "exercise-container",
    template: $("#tmp-exercise").html(),
    initialize: function() {
        _.bindAll(this); 
        alert("ExerciseView");
    },
    render: function(){
        console.log("render exercise view");
        var tmpl = _.template(this.template);
        this.$el.html(tmpl(this.model.toJSON()));
        return this;
    }
});

var WorkoutListingView = Backbone.View.extend({
    el: $("#workouts"),
    initialize: function() {
        var collection = new WorkoutList();
        collection.fetch();
    },
    render: function() {
        var that = this;
        _.each(this.collection.models, function(item){
            that.renderWorkout(item);
        });
    },
    renderWorkout: function(item) {
        var workoutView = new WorkoutView({
            model:item
        });
        this.$el.append(workoutView.render().el);
        var that = this;
        _.each(workoutView.model.get('exercises').models, function(exercise) {
            that.renderExercise(exercise);
        });
    },
    renderExercise: function(item) {
        var exerciseView = new ExerciseView({
            model:item
        });
        this.$el.append(exerciseView.render().el);
    }
}); 
```

当我第一次检索锻炼集合时，一切正常。但是，当我打电话时`getWorkoutDetails`，我得到了错误。通过插入警报和`console.logs`锻炼`parse()`模型，我发现它确实从服务器获得了正确的响应，但由于某种原因，它给出了这个错误。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:37:19.043

好的，在缩小 javascript spaghetti 的美丽世界中花了很多时间后，我发现我使用的 underscore.js 版本没有函数“has”。将 underscore.js 从 1.2.2 更新到 1.4.4 解决了这个问题。另外，我的backbone.js 版本是0.9.1

# c# - 在 C# 中编写一个递减数组

> ID：14871267
> 
> 赞同：1
> 
> 时间：2013-02-14T09:12:38.580
> 
> 标签：c#, arrays, c#-4.0

这是您需要一些相当明显的小帮助的日子之一，我需要创建一个递减年份数组，并且需要显示从当前年份开始递减的五年，现在它就像 (2012,2011,2010,2009, 2008）等……

我想不出如何在 c# 中做到这一点，欢迎任何帮助。

问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T09:17:24.877

这个怎么样？

```
Enumerable.Range(DateTime.Now.Year - 5, 5).Reverse().ToArray(); 
```

[`Enumerable.Range(int start, int count)`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.range.aspx)会给你 5 个后续数字，从 5 年前开始。[`Reverse()`](http://msdn.microsoft.com/en-us/library/bb358497.aspx)反转序列；）并[`ToArray()`](http://msdn.microsoft.com/en-us/library/bb298736.aspx)从中创建一个数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T09:15:22.163

普通的旧 C#：

```
int[] ret = new int[5];
for ( int i = 0; i < 5; i++ )
    ret[i] = DateTime.Now.Year - i - 1; 
```

使用 LINQ：

```
var ret = Enumerable.Range(0, 5).Select(i => DateTime.Now.Year - i - 1).ToArray(); 
```

[Botz3000 LINQ 版本](https://stackoverflow.com/a/14871362/41360)（更好）：

```
var ret = Enumerable.Range(DateTime.Now.Year - 5, 5).Reverse().ToArray() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T09:15:54.537

这将工作得很好：

```
var year = DateTime.Today.Year;
var array = new int[5];

for (int i = 0; i < 5; i++)
{
    array[i] = year--;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T09:18:20.403

```
public Int32[] GetDecrementalYearsArray(int startWith, int countOfItems)
{
   Int32[] array = new Int32[countOfItems];
   array[0] = startWith;
   for(int i=1;i<countOfItems;i++)
   {
       array[i] = startWith-i;
   }
   return array;
} 
```

# csv - 使用 CSV 文件绘图

> ID：14871272
> 
> 赞同：64
> 
> 时间：2013-02-14T09:12:50.217
> 
> 标签：csv, graph, gnuplot

我有一个 csv 文件，每行有 5 个条目。每个条目都是网络数据包是否被触发。每行的最后一项是数据包的大小。每行 = 经过的时间（以毫秒为单位）。

例如行

```
1 , 0 , 1 , 2 , 117 
```

如何绘制图表，例如其中 x 轴是行号，y 是例如每行中第一个条目的值？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-02-14T09:16:48.537

这应该让你开始：

```
set datafile separator ","
plot 'infile' using 0:1 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-05-04T21:17:45.997

您还可以使用 gnuplot（免费）绘制到 png 文件：

终端命令

```
gnuplot> set title '<title>'
gnuplot> set ylabel '<yLabel>'
gnuplot> set xlabel '<xLabel>'
gnuplot> set grid
gnuplot> set term png
gnuplot> set output '<Output file name>.png'
gnuplot> plot '<fromfile.csv>' 
```

*注意：您始终需要在此处提供正确的扩展名（此处为 .png）`set output`*

那么输出也可能不是行，因为您的数据没有继续。要解决此问题，只需将“情节”行更改为：

```
plot '<Fromfile.csv>' with line lt -1 lw 2 
```

更多线条编辑选项（破折号和线条颜色等）： http: [//gnuplot.sourceforge.net/demo_canvas/dashcolor.html](http://gnuplot.sourceforge.net/demo_canvas/dashcolor.html)

*   gnuplot 在大多数 Linux 发行版中都可以通过包管理器使用（例如，在基于 apt 的发行版上，运行`apt-get install gnuplot`）
*   gnuplot 可通过 Cygwin 在 Windows 中使用
*   gnuplot 在 macOS 上可以通过[homebrew](https://brew.sh) (run `brew install gnuplot`)获得

# python - 删除 Python 标准库中的变量

> ID：14871275
> 
> 赞同：6
> 
> 时间：2013-02-14T09:12:53.397
> 
> 标签：python, reference, try-catch

我一直在阅读标准*线程*库（Python 2.6）中的一些代码，其中有一段代码让我感到好奇。它可以缩短为以下结构（与 threading.py 中的 __bootstrap_inner 方法相比*）*：

```
def foo():
    exc_type, exc_value, exc_tb = sys.exc_info()
    try:
        # some code
    except:
        # some code
    finally:
        del exc_type, exc_value, exc_tb 
```

这些变量不会超出`foo`范围。最后有什么理由删除这些引用吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T09:14:03.613

是的，至少对于`exc_tb`; 回溯对象持有对当前帧的引用，这使得它成为循环引用。

通过删除本地引用，您打破了这个圈子，因此您不必希望和相信垃圾收集器能够做到。

从[`sys.exc_info()`函数文档](http://docs.python.org/2/library/sys.html#sys.exc_info)：

> **警告**：将回溯返回值分配给正在处理异常的函数中的局部变量将导致循环引用。这将防止同一函数中的局部变量或回溯引用的任何内容被垃圾收集。由于大多数函数不需要访问回溯，最好的解决方案是使用类似的东西`exctype, value = sys.exc_info()[:2]`只提取异常类型和值。如果您确实需要回溯，请确保在使用后将其删除（最好使用`try`...`finally`语句完成）或调用`exc_info()`本身不处理异常的函数。

# ios - 隐藏导航栏不起作用

> ID：14871280
> 
> 赞同：1
> 
> 时间：2013-02-14T09:13:11.283
> 
> 标签：ios, cocoa-touch, uinavigationcontroller, uinavigationbar

我正在使用以下代码来 隐藏`NavigationBar`：`View`

```
[self.navigationController setNavigationBarHidden: YES animated:YES]; 
```

（我使用的是 iOS 6）我做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:17:21.860

在 `viewWillAppear. 它会起作用的。

# javascript - 我脚本中的“this”对象不支持 IE 中的此属性或方法

> ID：14871281
> 
> 赞同：2
> 
> 时间：2013-02-14T09:13:12.033
> 
> 标签：javascript

我有一段代码适用于 Chrome 和 Firefox，但不适用于 IE8。这个想法是在调整大小时检查文档的高度，以便固定的可滚动区域始终是网页的高度。

```
24    MyJavascript.prototype.handleWindow_onResize = function (e) {
25        window.clearTimeout(this.windowResizeTimer);
26        this.windowResizeTimer = setTimeout(function () {
27            this.doStuff();
28        }.bind(this), 20);
29    }; 
```

在 IE8 中，当我重新调整窗口大小时，出现错误：

```
Message: Object doesn't support this property or method
Line: 26
Char: 9
Code: 0
URI: XXX 
```

谁能看到我做错了什么？我猜“这个”是问题所在，但我不明白为什么 IE8 以与 Chrome 和 FF 不同的方式处理它。

NB 在我的 IE8 浏览器的 IE7 模式下，此错误出现在页面加载时，而不是调整大小时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:17:28.697

IE<9 不支持绑定。您可以使用提供它的库，例如[下划线的 bind](http://underscorejs.org/#bind)或[jQuery 的 proxy](http://api.jquery.com/jQuery.proxy/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T09:17:48.450

看`Function.bind`参考：[bind](https://developer.mozilla.org/ru/docs/JavaScript/Reference/Global_Objects/Function/bind)

请注意broser兼容性部分。

而不是`bind`函数，你可以用闭包重写你的代码：

```
MyJavascript.prototype.handleWindow_onResize = function (e) {
    window.clearTimeout(this.windowResizeTimer);
    var self = this;
    this.windowResizeTimer = setTimeout(function () {
        self.doStuff();
    }, 20);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:18:57.517

听起来像是一个令人困惑的错误行号。我猜 IE 将第 26 行开始的整个表达式视为一行。它想告诉你的是，直到版本 9，IE 才支持函数的[`bind`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)。

您可以使用[来自 MDN](https://developer.mozilla.org/ru/docs/JavaScript/Reference/Global_Objects/Function/bind#Compatibility)、[https://github.com/kriskowal/es5-shim](https://github.com/kriskowal/es5-shim)的兼容性 shim ，或一些将其作为静态函数 ( `_.bind`, `$.proxy`) 提供的库函数。

# ado.net - 无法从与具有外键约束的另一个表关联的表中删除值

> ID：14871283
> 
> 赞同：0
> 
> 时间：2013-02-14T09:13:20.917
> 
> 标签：ado.net, dataset, constraints

嗨，我有两张桌子`Customer`和`Orders`。
`Customer Id`在和`primary`在中。 我已经完成了以下编码：`Customer``Foreign key``Orders`

```
ForeignKeyConstraint custOrderFK = new ForeignKeyConstraint("CustOrderFK",
  custDS.Tables["CustTable"].Columns["CustomerID"], 
  custDS.Tables["OrdersTable"].Columns["CustomerID"]);
custOrderFK.DeleteRule = Rule.None;  

custDS.Tables["OrdersTable"].Constraints.Add(custOrderFK); 
```

因为我已经提到`custOrderFK.DeleteRule = Rule.None;`删除客户表中的条目不应该影响订单表。但我无法从客户表中删除一行。它抛出异常。我是 ado.net 的新手。
也许我对规则的理解有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:17:09.183

使用带有外键的删除级联选项。

# javascript - 如何使用javascript检查是否启用了java插件？

> ID：14871287
> 
> 赞同：4
> 
> 时间：2013-02-14T09:13:30.607
> 
> 标签：javascript, asp.net

我有一个由小程序代码组成的 .aspx 页面。为了运行它，浏览器必须有一个活动的 Java 插件。

有没有办法使用 Javascript 检查是否安装并启用了 Java 插件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T09:19:21.303

```
window.navigator.javaEnabled()//true if java enabled 

window.navigator.plugins // will give u all the plugins installed in the browser 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T09:19:09.637

我建议您使用 Oracle 推荐的方法

```
<script src="http://www.java.com/js/deployJava.js"></script>
<script>
    if (deployJava.versionCheck('1.6+')) {            
        var url = "http://docs.oracle.com/javase/tutorialJWS/deployment/webstart/examples/Notepad.jnlp";

        <!-- you can also invoke deployJava.runApplet here -->
        deployJava.createWebStartLaunchButton(url, '1.6.0'); 
    } else {
        document.location.href="http://oracle.com";
    }
</script> 
```

这取自[http://docs.oracle.com/javase/tutorial/deployment/deploymentInDepth/jreVersionCheck.html](http://docs.oracle.com/javase/tutorial/deployment/deploymentInDepth/jreVersionCheck.html)

您还应该查看 Java 部署工具包 [http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html#deplToolkit](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html#deplToolkit)

# php - 如何使用 Lithium 中的视图呈现电子邮件？

> ID：14871289
> 
> 赞同：0
> 
> 时间：2013-02-14T09:13:38.147
> 
> 标签：php, email, lithium, mailer

在锂文档中写道 *View::$_request*

> “如果适用，保留发起对该视图的调用的当前请求的详细信息。如果这不适用，则可能为空。例如，如果创建 View 类以呈现电子邮件。”

但是如何使用视图来呈现电子邮件呢？是否可以实例化一个视图而不将其发送到浏览器，而是获取内容并使用 mail() 发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:40:20.197

看看[li3_mailer](https://github.com/eLod/li3_mailer)插件。

从文档中，您的问题的答案：

> 呈现电子邮件消息类似于呈现响应，但有一些例外。最重要的是，电子邮件消息可能具有多种类型（并且没有“相应”请求），而不是可以协商以推断最合适的（单个）响应类型的请求。为了支持这一点，插件实现了一个类似于 http 的[Media的邮件](https://github.com/UnionOfRAD/lithium/blob/master/net/http/Media.php)[Media](https://github.com/eLod/li3_mailer/blob/master/net/mail/Media.php)类，可用于注册新类型或配置内置插件。

# java - 在 java 1.6 中以优雅的方式切换字符串

> ID：14871290
> 
> 赞同：1
> 
> 时间：2013-02-14T09:13:38.703
> 
> 标签：java, switch-statement

我正在使用 java 1.6，我知道从 java 1.7 开始可以选择打开字符串，但在这里我使用 if/elseif 来路由类型名称，我的问题是是否有一种优雅的方式可以将其更改为 switch

```
public static SwitchType<?> switchT(final String typeName,
                                    final String memberName) {

    if (typeName.equals("java.lang.String")) {
        return new SwitchInputType<String>(new String(memberName + " "));

    } else if (typeName.equals("char")) {
        return new SwitchInputType<Character>(new Character('a'));

    } else if (typeName.equals("decimal") || 
               typeName.equals("java.math.BigDecimal")) {
        return new SwitchInputType<BigDecimal>(new BigDecimal("34.58"));

    } else if (typeName.equals("boolean")) {

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:16:10.413

可以使用许多模式，从使用枚举到使用 a，`Map<String,Implementation>`但没有一个比您在这种精确情况下所拥有的更简洁和更快。只有当更多代码依赖于此时，它们才有意义`typeName`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:20:54.470

您可以使用`Map<String, SwitchTypeFactory>`：

```
public interface SwitchTypeFactory {
   SwitchType<?> create(String memberName);
}

...

private static Map<String, SwitchTypeFactory> factories = new HashMap<String, SwitchTypeFactory>();

static {
   factories.put("java.lang.String", new SwitchTypeFactory() {
        @Override
        public SwitchType<?> create(String memberName) {
            return new SwitchInputType<String>(memberName + " ");
        }
    });

    factories.put("char", new SwitchTypeFactory() {
        @Override
        public SwitchType<?> create(String memberName) {
            return new SwitchInputType<Character>(Character.valueOf('a'))
        }
    });
    ...
}

public static SwitchType<?> switchT(final String typeName, final String memberName) {
    return factories.get(typeName).create(memberName);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T14:23:17.803

虽然这可能有点反直觉，`enum`但在这方面使用已被证明非常强大。

每个`enum`都有一个`valueOf(String)`返回该名称的 Element 的方法。然后您可以在 switch 语句中使用检索到的元素。唯一丑陋的部分是`valueOf(String)`抛出一个`IllegalArgumentException`. 所以捕获它相当于默认情况。

```
enum Type{
    JAVA_LANG_STRING;
    CHAR;
    DECIMAL;
    BOOLEAN;
    JAVA_LANG_BIGDECIMAL;
}

public static SwitchType<?> switchT(final String typeName,
                                final String memberName) {

    try{
    Type t = Type.valueOf(typeName.toUppercase().replace(".","_"));
    switch(t){
    case Type.JAVA_LANG_STRING: return new SwitchInputType<String>(new String(memberName + " "));
    case Type.CHAR: return new SwitchInputType<Character>(new Character('a'));
    case Type.DECIMAL:
    case Type.JAVA_MATH_BIGDECIMAL: return new SwitchInputType<BigDecimal>(new BigDecimal("34.58"));
    }catch(IllegalArgumentException e){
        //default case
    }
} 
```

枚举也可以实现接口。通过为每个元素提供一个实现或一个全局实现。

```
interface SwitchInputTypeFacotry {

    SwitchInputType get(String arg);

}
enum TypeName implements SwitchInputTypeFacotry{
    CHAR{
        SwitchInputType get(String arg){
            return new SwitchInputType<Character>(new Character('a'));
        }
    }
    [...]
}

public static SwitchType<?> switchT(final String typeName,
                                final String memberName) {

    try{
        SwitchInputTypeFacotry t = Type.valueOf(typeName.toUppercase().replace(".","_"));
        return t.get(memberName);
    }catch(IllegalArgumentException e){
        //default case
    }
} 
```

第二种方法可以很容易地扩展功能（只要它保留在一个模块中，就不可能使用枚举进行子类化）。

# javascript - Phonegap 相机和二维码

> ID：14871291
> 
> 赞同：1
> 
> 时间：2013-02-14T09:13:43.483
> 
> 标签：javascript, cordova, camera, qr-code

目前我刚刚开始了旨在扫描二维码并解码为信息的phonegap项目。我注意到，默认phonegap文档中所述的相机访问是单击按钮，打开默认相机应用程序，捕获图像，然后返回图像应用程序。

是否可以像其他 QR 扫描应用程序一样直接在应用程序本身上调用“实时”摄像头？不点击捕获按钮？

我使用 jsqrcode 库来解码二维码。如果有更好的插件请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:31:36.363

我们使用这个 phonegap 插件：

[PhoneGap 插件 BarcodeScanner](https://github.com/phonegap/phonegap-plugin-barcodescanner)

当相机应用程序处于活动状态时，它会“即时”扫描。它适用于二维码。

> 支持的平台：
> 
> ```
> Android
> iOS
> Windows (Windows/Windows Phone 8.1 and Windows 10)
> Windows Phone 8
> BlackBerry 10
> Browser 
> ```

# wpf - EF 5：释放上下文时 OriginalValues 丢失

> ID：14871294
> 
> 赞同：1
> 
> 时间：2013-02-14T09:13:57.947
> 
> 标签：wpf, frameworks, entity, dbcontext

我是EF的新手。因此，为了测试乐观并发，我使用了 EF 5、WPF 和一个已经创建的数据库。WPF 项目包含一个`MainWindow`通过`TextBox1`主键搜索客户、`TextBox2`编辑客户名称、`textblock (txtLog)`记录字段值和保存按钮的功能。为了模拟并发访问，`SQL Server 2008`我在 Management Studio 中执行查询“ `update client set r01_nomcli = 'GGGGG' where r01_codcli = '4112010002';`”，然后单击保存按钮。它工作正常并被`DbUpdateConcurrencyException`触发，但实体的原始值丢失并采用与当前值相同的值。这是因为“使用”块导致实体分离。为了解决这个问题，我必须在窗口的构造函数之前声明上下文并在“`Window_Loaded`” 事件是否还有其他方法？有助于了解使用 EF 的最佳实践以及如何使用 EF 5 构建可重用 DAL。谢谢。在代码下方：

```
 public partial class OptimisticConcurrency : Window
{

//client is an entity

    client _currentClient = null;

    public OptimisticConcurrency()
    {
        InitializeComponent();
    }

    //**************************TextBox1 PreviewKeyDown Event Handler
    private void TextBox_PreviewKeyDown_1(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Enter)
        {

            using (dbleaseEntities context = new dbleaseEntities())
            {
                _currentClient = context.client.Find(txtCode.Text);
                if (_currentClient == null)
                    MessageBox.Show("Customer " + txtCode.Text + " not found.", "Error", MessageBoxButton.OK, MessageBoxImage.Error);
                else
                    this.DataContext = _currentClient;
            }
        }
    }

//*****************Save Button Click Event Handler

private void Button_Click_2(object sender, RoutedEventArgs e)
    {
        using (dbleaseEntities context = new dbleaseEntities())
        {
            context.Configuration.ValidateOnSaveEnabled = false;
            try
            {
                context.Entry(_currentClient).State = System.Data.EntityState.Modified;
                context.SaveChanges();
                MessageBox.Show("Success.", "Save", MessageBoxButton.OK,    MessageBoxImage.Information);
            }
            catch (DbEntityValidationException ex)
            {
                string ss = "";
                foreach (var error in ex.EntityValidationErrors)
                    ss = string.Join(Environment.NewLine, error.ValidationErrors.Select(v => v.ErrorMessage));
                MessageBox.Show(ss, "Error", MessageBoxButton.OK, MessageBoxImage.Error);
             }

            catch (DbUpdateConcurrencyException ex)
            {
                string StrValues= "";
                DbPropertyValues ov = ex.Entries.Single().OriginalValues;
                DbPropertyValues cv = ex.Entries.Single().CurrentValues;
                DbPropertyValues dv = ex.Entries.Single().GetDatabaseValues();

                StrValues=  "Original value  : " + ov["r01_nomcli"] + Environment.NewLine +
                            "Current value   : " + cv["r01_nomcli"] + Environment.NewLine +
                            "Database value  : " + dv["r01_nomcli"];

               txtLog.Text = StrValues

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:30:05.787

你有大约三个选择

1.  做你现在正在做的事情 - 即保持对象连接到上下文
2.  使用自我跟踪实体：http: [//blogs.msdn.com/b/efdesign/archive/2009/03/24/self-tracking-entities-in-the-entity-framework.aspx](http://blogs.msdn.com/b/efdesign/archive/2009/03/24/self-tracking-entities-in-the-entity-framework.aspx)
3.  使用 GetDatabaseValues

# web-services - 如何使用matlab通过需要登录的网页调用Soap\WSDL服务？

> ID：14871305
> 
> 赞同：2
> 
> 时间：2013-02-14T09:14:44.537
> 
> 标签：web-services, matlab, login

我是 wsdl\soapmessage 查询\回复世界的新手（如果我可以这样说的话），并且我在使用以下 wsdl 时遇到了一些困难（我真的很希望，至少可以这样看那里描述的服务之一）
[http://almdemo.polarion.com/polarion/ws/services/TrackerWebService?wsdl](http://almdemo.polarion.com/polarion/ws/services/TrackerWebService?wsdl)

提供给我用于开发 matlab 网络界面。现在我的 matlab 代码如下所示：

```
targetNamespace = 'http://ws.polarion.com/TrackerWebService';

method = 'queryWorkItems';
values= {'Query','Sort'}
names = {'query', 'sort'}
types ={'xsd:string','xsd:string'}
message = createSoapMessage( targetNamespace, method, values, names, types)

response = callSoapService('http://almdemo.polarion.com/polarion/ws/services',...
% Service's endpoint
'http://almdemo.polarion.com/polarion/#/workitems',...
% Server method to run
message)
% SOAP message created using createSoapMessage

author = parseSoapResponse(response) 
```

特此为节省您的时间，我只想解决我的两个问题：

1.  代码是否正确？

2.  有人可以告诉我这样的 wsdl 链接是否只是 Web 服务的定义，或者它也是服务的端点？

3.  [通常要手动执行\每次点击网页http://almdemo.polarion.com/polarion](http://almdemo.polarion.com/polarion)上的此服务 ，您必须登录！

那么如何在首先登录我的matlab中发送消息？或者必须将这样的服务引入到那个 wsdl 中才能让我这样做？能否请您写下它必须如何定义，因为我并没有真正编写 wsdl 文件，但我会学习！**

我将非常感谢您的帮助，并祝您度过愉快的一周（-结束）男孩（女孩）！！！

问候

克里斯马克

ps：我尝试使用 Soapui 并将该网页作为端点，但每次我输入凭据时工具都会崩溃！也许是因为数据加载！？？？

# windows-7 - 如何配置 autorun.inf 文件？

> ID：14871309
> 
> 赞同：1
> 
> 时间：2013-02-14T09:14:54.690
> 
> 标签：windows-7, autorun

我想知道是否可以创建一个不运行 .exe 文件的 autorun.inf 文件。相反，它可以打开网络浏览器或播放视频。我该如何进行这些步骤？当然，我知道有些 .inf 文件可以被检测为病毒，但我希望做的这个 autorun.inf 文件是干净的。

感谢您提供有关如何执行此操作的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T09:20:11.253

基本上，您放入`open=`.inf 部分的所有内容都将使用默认关联应用程序打开或执行。

如果您在其中输入这样的网址：

```
open=http://www.google.com 
```

它将在系统的默认网络浏览器中打开 google.com。

您（当然）可以随时查看 Microsoft 提供的文档。

[http://msdn.microsoft.com/en-us/library/windows/desktop/cc144200(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144200(v=vs.85).aspx)

# visual-studio-2010 - 无法在 R2010a 上使用 mex

> ID：14871311
> 
> 赞同：2
> 
> 时间：2013-02-14T09:14:59.737
> 
> 标签：visual-studio-2010, matlab, mex

我正在使用 Matlab R2010a。我需要创建一个嵌入我需要 mex 的代码的自定义块。我的系统上安装了 Visual Studio Express 2010。我按照说明使用 unzip 命令将 R2010a 的 mex 补丁安装到 matlabroot 文件夹中。我还按照建议安装了 Windows SDK 7.1 64 位。但是，当我键入 mex -setup 时，没有显示编译器。任何替代解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:06:22.707

你的matlab是64位的吗？我认为它不支持 mex（或者有一些问题。我不记得了）。我遇到了这个问题并切换到更新的版本。

# ruby-on-rails - 从 Rails 服务器连接到 Socket.io 服务器

> ID：14871313
> 
> 赞同：1
> 
> 时间：2013-02-14T09:15:04.213
> 
> 标签：ruby-on-rails, node.js, heroku, socket.io

**[更新 1]** 我发现`io.connect('http://xxxxx.herokuapp.com')`实际上在 xxxxx.herokuapp.com 端口 3000 上发送了一个请求：如果请求没有端口号，则连接有效。我没有在 io.connect 中指定端口，我该如何摆脱它？

```
 Request URL:http://xxxxx.herokuapp.com:3000/socket.io/1/?t=1360853265439
  Request Headersview source
  Cache-Control:max-age=0
  Origin:http://localhost:3000
  Referer:http://localhost:3000/about
  User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like      Gecko) Chrome/24.0.1312.57 Safari/537.17
  Query String Parametersview sourceview URL encoded
  t:1360853265439 
```

**[更新 2]** 比较这里是当我从本地文件系统运行 java 脚本时成功连接的 HEAD

```
 Request URL:http://xxxxx.herokuapp.com/socket.io/1/?t=1360854705943
 Request Method:GET
 Status Code:200 OK
 Request Headersview source
 Accept:*/*
 Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
 Accept-Encoding:gzip,deflate,sdch
 Accept-Language:en-US,en;q=0.8
 Cache-Control:max-age=0
 Connection:keep-alive
 Host :xxxxx.herokuapp.com
 Origin:null
 User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like      Gecko) Chrome/24.0.1312.57 Safari/537.17 
```

**[更新 3]** 将端口设置为 80 似乎可以正常工作

```
 var socket = io.connect('http://xxxxx.herokuapp.com',{port:80}); 
```

**[问题]**我打算在一台主机上设置 socket.io 以与另一台主机上的 Rails 应用程序通信。当客户端 Javascript 托管在 localhost:3000 以连接到托管在 localhost:5000 上的 node.js 服务器上的 Socket.io 时，一切正常。当客户端 Javascript 和 Socket.io 都托管在 Heroku 上的同一端口上时，它也可以正常工作。

托管在 XXXX.herokuapp.com 上的 socket_server.js

```
 var app = require('http').createServer(handler)
              , io = require('socket.io').listen(app)
              , fs = require('fs')
              , i = 0

            io.configure(function () {
              io.set("origin = *");
              io.set("transports", ["xhr-polling"]);
              io.set("polling duration", 100);
            });

            var port = process.env.PORT || 5000; // Use the port that Heroku provides or default to 5000
            app.listen(port, function() {
              console.log(">>>>>>socket server up and running on port: "+port);
            });

            function handler (req, res) {
              fs.readFile(__dirname + '/socket.html',
              function (err, data) {
                if (err) {
                  res.writeHead(500);
                  return res.end('Error loading socket.html');
                }

                res.writeHead(200);
                res.end(data);
              });
            }

            io.sockets.on('connection', function (socket) {
                console.log(">>>>>>client connected through socket");
              socket.emit('news', '>>>>>>server say hello to client', i);
              console.log('>>>>>>server say hello to client' +'['+i+']')
              socket.on('my other event', function (data) {
                socket.emit('news', i);
                i++;
                console.log(data +'['+i+']');
              });
            }); 
```

如果我将客户端 javascript 放在 XXXX.herokuapp.com 上的 socket.html 中，它与 socket.io 相同，它的行为符合预期。

```
 <div id='sandbox'>sandbox</div>

        <script src="/socket.io/socket.io.js"></script>

        <script>

          var socket = io.connect('window.location.hostname');
          $('#sandbox').append('<div> lora </div>');
          socket.on('news', function (data, index) {
            $('#sandbox').append('<div>' + data + ' ' + index + '</div>');
            console.log(data);
            socket.emit('my other event', { my: 'data' });
          });
        </script> 
```

但是，如果我将客户端 Javascript 放在 YYYY.herokuapp.com 上的 Rails 服务器上并尝试连接到 xxx.herokuapp.com 上的 Socket.io 服务器，它就不起作用。它设法在服务器上检索 socket.io.js 但 io.connect(' [http://xxxxx.herokuapp.com](http://xxxxx.herokuapp.com) ') 没有得到服务器的任何响应。

```
 <div id='sandbox'>sandbox</div>

        <script src="http://xxxxx.herokuapp.com/socket.io/socket.io.js"></script>

        <script>

          var socket = io.connect('http://xxxxx.herokuapp.com');
          $('#sandbox').append('<div> lora </div>');
          socket.on('news', function (data, index) {
            $('#sandbox').append('<div>' + data + ' ' + index + '</div>');
            console.log(data);
            socket.emit('my other event', { my: 'data' });
          });
        </script> 
```

我阅读了一些帖子点设置 io.set("origins = *") 的解决方案，但这似乎在这种情况下也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:39:44.613

在 socket.io 中， Origins`*`默认设置为。它会是`io.set("origin", "*");`，但由于这是默认值，您可以忽略此功能。

我确实注意到`var socket = io.connect('window.location.hostname')`您的客户端代码中也有，您可能会提到：`var socket = io.connect(window.location.hostname)`没有单引号。heroku 文档确实建议使用`io.set("polling duration", 100);`但是您将其设置为 100 而不是建议的`10`.Other 然后我认为您的代码没有任何问题，它应该可以正常工作。

如果这些修复没有帮助，那么我会将其归咎于您的托管。在部署实时应用程序时，Heroku 是一个非常严格的平台。所以可能是他们在这里搞砸了。我建议尝试在其他地方部署，例如在 nodejitsu.com 上，它也支持 WebSockets，并且不会对轮询施加任何限制，以查看它是否适合您。

# c++ - 定时向量 vs 地图 vs unordered_map 查找

> ID：14871315
> 
> 赞同：4
> 
> 时间：2013-02-14T09:15:07.327
> 
> 标签：c++, map, vector, unordered-map

我对矢量查找与地图查找很好奇，并为它编写了一个小测试程序。它似乎矢量总是比我使用它的方式更快。还有什么我应该考虑的吗？测试是否有任何偏见？运行结果在底部.. 以纳秒为单位，但 gcc 在我的平台上似乎不支持它。

使用字符串进行查找当然会改变很多。

我正在使用的编译行是这样的： g++ -O3 --std=c++0x -o lookup lookup.cpp

```
#include <iostream>
#include <vector>
#include <map>
#include <unordered_map>
#include <chrono>
#include <algorithm>

unsigned dummy = 0;

class A
{
public:
    A(unsigned id) : m_id(id){}

    unsigned id(){ return m_id; }
    void func()
    {
        //making sure its not optimized away
        dummy++;
    }
private:
    unsigned m_id;
};

class B
{
public:
    void func()
    {
        //making sure its not optimized away
        dummy++;
    }
};

int main()
{
    std::vector<A> v;
    std::unordered_map<unsigned, B> u;
    std::map<unsigned, B> m;

    unsigned elementCount = 1;

    struct Times
    {
        unsigned long long v;
        unsigned long long u;
        unsigned long long m;
    };
    std::map<unsigned, Times> timesMap;

    while(elementCount != 10000000)
    {
        elementCount *= 10;
        for(unsigned i = 0; i < elementCount; ++i)
        {
            v.emplace_back(A(i));
            u.insert(std::make_pair(i, B()));
            m.insert(std::make_pair(i, B()));
        }

        std::chrono::time_point<std::chrono::steady_clock> start = std::chrono::high_resolution_clock::now();
        for(unsigned i = 0; i < elementCount; ++i)
        {
            auto findItr = std::find_if(std::begin(v), std::end(v),
                                        [&i](A & a){ return a.id() == i; });

            findItr->func();
        }
        auto tp0 = std::chrono::high_resolution_clock::now()- start;
        unsigned long long vTime = std::chrono::duration_cast<std::chrono::nanoseconds>(tp0).count();

        start = std::chrono::high_resolution_clock::now();
        for(unsigned i = 0; i < elementCount; ++i)
        {
            u[i].func();
        }
        auto tp1 = std::chrono::high_resolution_clock::now()- start;
        unsigned long long uTime = std::chrono::duration_cast<std::chrono::nanoseconds>(tp1).count();

        start = std::chrono::high_resolution_clock::now();
        for(unsigned i = 0; i < elementCount; ++i)
        {
            m[i].func();
        }
        auto tp2 = std::chrono::high_resolution_clock::now()- start;
        unsigned long long mTime = std::chrono::duration_cast<std::chrono::nanoseconds>(tp2).count();

        timesMap.insert(std::make_pair(elementCount ,Times{vTime, uTime, mTime}));
    }

    for(auto & itr : timesMap)
    {
        std::cout << "Element count: " << itr.first << std::endl; 
        std::cout << "std::vector time:        " << itr.second.v << std::endl;
        std::cout << "std::unordered_map time: " << itr.second.u << std::endl;
        std::cout << "std::map time:           " << itr.second.m << std::endl;
        std::cout << "-----------------------------------" << std::endl;
    }

    std::cout << dummy;
} 
```

* * *

```
./lookup 
Element count: 10
std::vector time:        0
std::unordered_map time: 0
std::map time:           1000
-----------------------------------
Element count: 100
std::vector time:        0
std::unordered_map time: 3000
std::map time:           13000
-----------------------------------
Element count: 1000
std::vector time:        2000
std::unordered_map time: 29000
std::map time:           138000
-----------------------------------
Element count: 10000
std::vector time:        22000
std::unordered_map time: 287000
std::map time:           1610000
-----------------------------------
Element count: 100000
std::vector time:        72000
std::unordered_map time: 1539000
std::map time:           8994000
-----------------------------------
Element count: 1000000
std::vector time:        746000
std::unordered_map time: 12654000
std::map time:           154060000
-----------------------------------
Element count: 10000000
std::vector time:        8001000
std::unordered_map time: 123608000
std::map time:           2279362000
-----------------------------------
33333330 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T09:38:29.900

我一点也不震惊矢量测试比其他任何东西都好。它的 asm 代码（实际反汇编）分解为这个（在我的 Apple LLVM 4.2 上完全选择）：

```
0x100001205:  callq  0x100002696               ; symbol stub for: std::__1::chrono::steady_clock::now()
0x10000120a:  testl  %r13d, %r13d
0x10000120d:  leaq   -272(%rbp), %rbx
0x100001214:  je     0x100001224               ; main + 328 at main.cpp:78
0x100001216:  imull  $10, %r14d, %ecx
0x10000121a:  incl   7896(%rip)                ; dummy
0x100001220:  decl   %ecx
0x100001222:  jne    0x10000121a               ; main + 318 [inlined] A::func() at main.cpp:83
main + 318 at main.cpp:83
0x100001224:  movq   %rax, -280(%rbp)
0x10000122b:  callq  0x100002696               ; symbol stub for: std::__1::chrono:: 
```

注意“循环”（`jne 0x10000121a`）。“find_if”已被完全优化，结果实际上是使用递减寄存器对数组进行扫描，以计算增加全局的次数。*这就是正在做的一切；在这方面没有进行任何类型的搜索。*

所以，是的，它是你如何使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T09:34:47.427

首先，您似乎没有在测试之间清除您的容器。所以他们不包含你认为他们所做的事情。

其次，根据您的时间，您的向量表现出线性时间，这是不可能的，因为算法中的复杂性是 O(N*N)。可能它被优化了。我建议不要尝试与优化作斗争，而是将其关闭。

第三，您的值对于向量来说太可预测了。这会对其产生巨大影响。尝试随机值（或 random_shuffle()）

# sql - 如何从映射表组中获取计数是 PostgreSQL 中的另一个表？

> ID：14871316
> 
> 赞同：0
> 
> 时间：2013-02-14T09:15:12.477
> 
> 标签：sql, postgresql, aggregate-functions

我有三张桌子：

```
store 
=====
   name
   address 
   city 
   state 
   country 
   tag ..., 

post
=======
    title
    summary 
    tags ...

store_post_map
================
(mapping on store and post based on tag). 
```

现在我想从映射表组中获取帖子计数`city`，或者`state`，PostgreSQL中的SQL是什么？`country``store.id`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:21:28.397

基本上是这样的：

```
SELECT store_id, count(*) AS posts_ct
FROM   store_post_map
GROUP  BY store_id; 
```

> 我们如何获得每个地区可以有多个商店的每个城市、州或国家的计数？

每个国家的计数：

```
SELECT s.country, count(*) AS posts_ct
FROM   store          s
JOIN   store_post_map sp ON sp.store_id = s.id
GROUP  BY 1; -- positional parameter - is the same as GROUP BY s.country here 
```

对于每个`city`您可能需要的计数`GROUP BY` `area`，`country`此外，因为城市名称几乎不是唯一的。像：

```
SELECT s.city, s.area, s.country, count(*) AS posts_ct
FROM   store          s
JOIN   store_post_map sp ON sp.store_id = s.id
GROUP  BY 1, 2, 3; 
```

# java - 编写一个简单的 cron 作业来运行 Java 类

> ID：14871318
> 
> 赞同：4
> 
> 时间：2013-02-14T09:15:21.930
> 
> 标签：java, linux, cron

如何从头开始编写 cron 作业以运行 java 类或编写带有嵌入式 Java 代码的 cron 作业类来运行？

以及如何将计时器设置为每分钟运行一次（例如）该 cron 作业？

注意：完全是 Linux 初学者

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T23:09:50.007

这是运行测试作业的示例 sh 文件

```
#!/bin/bash
export JAVA_HOME=/usr/java/jdk1.6.0_07
echo "Java Home is $JAVA_HOME"
export CLASSPATH=.:..:$CLASSPATH:
echo "Path is is $PATH"
echo "CLASSPATH is is $CLASSPATH"
$JAVA_HOME/bin/java  TestJob
echo "$JAVA_HOME/bin/java  TestJob" 
```

然后像这样从你的cronjob指向它

```
0 5 * * * . $HOME/.profile; /path/to/command/test/job 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T09:34:04.360

如果您正在考虑一个简单的 cron 任务，您可以使用[TimerTask](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/TimerTask.html)

[Quartz](http://quartz-scheduler.org/)还以 Java 中的 cron 作业而闻名。

# c# - 在 MouseMove 上调整图形路径的大小

> ID：14871325
> 
> 赞同：0
> 
> 时间：2013-02-14T09:15:45.823
> 
> 标签：c#, gdi+

在 GDI+ 和 C# 中，我使用 AddRectangle 和 AddLine 方法使用图形路径创建了一个表

![在此处输入图像描述](../Images/dde03de6123d91f2fb24caf23f4adb5a.png)

现在在我的鼠标移动期间，我想调整/移动这个完整的表格。

我可以遍历所有子路径并在鼠标移动期间重新计算所有内容，但我想知道是否有任何方法可以一次移动或调整这个完整的图形路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T01:23:38.130

嗯，有 GraphicsPath.Transform。

```
Matrix m = new Matrix();
m.Scale(scaleX, scaleY, MatrixOrder.Append);
m.Translate(offsetX, offsetY, MatrixOrder.Append);
path.Transform(m); 
```

不过，考虑到 GDI+ 仅使用单精度浮点数，将路径转换太多次可能并不好。我建议保留您根据需要进行转换的原始路径。

或者，您可以在绘制之前编辑 Graphics 对象的变换，或者在每次绘制之前重建路径。不管你怎么做，你都会得到相同的结果。转换后的路径不会比新路径绘制得更快，而且构建路径所需的时间可能可以忽略不计。所以我猜重新计算是最简单的写法，而且它没有我能想到的缺点。

# sql - Oracle 将查询结果输出到文件

> ID：14871329
> 
> 赞同：0
> 
> 时间：2013-02-14T09:15:54.923
> 
> 标签：sql, database, oracle, sqlplus

目前我正在运行多个查询，这些查询将输出假脱机到一个文件中，这可能是一个漫长的过程，下面是我在 sqlplus 中的当前设置。

```
set feedback off
set heading off
set echo off
set termout OFF
set linesize 150
set long 1999999
set longchunk 1999999
set pagesize 0
spool results.sql
@queries.sql
spool off
set termout on
set echo on
set heading on
set feedback on 
```

我想知道是否有任何方法可以加快这个过程？或者有没有更快的方法使用 sqlplus 将查询的输出发送到文件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-05-28T11:40:35.170

# 澄清

您能否澄清以下内容

1.  **sqlplus**客户端是否在您的数据库管理系统所在的同一物理机（或虚拟机）上（更具体地说，是您的`ora`and `datafiles`）？
2.  您可以通过使用减小结果集的大小来测试您的查询`fetch first n rows`吗？

# 时间复杂度和细节

为什么你认为瓶颈是假脱机？在对性能不佳的原因做出任何结论之前，您可能需要尝试收集一些有关查询的计时统计信息。我会修改您的查询以仅返回行的子集

```
SELECT * FROM scott.dept FETCH FIRST 10000 rows 
```

优化查询很大程度上取决于数据的结构和例程的运行方式，因此为了优化，您需要能够对性能变化进行基准测试。

然后，您将需要检查以下两个参数

```
SHOW PARAMETER statistics_level
SHOW PARAMETER timed_statistics 
```

您还需要为查询计时

```
SET TIMING ON 
```

> 请记住，所有这些只是为了对性能进行基准测试，您需要在生产中恢复这些设置。

请记住，由于池/缓冲/缓存等，多次运行相同的查询会导致性能指标不一致。您应该查询`v$statistics_level`并调查

*   已处理的行
*   排序（内存）
*   排序（磁盘）
*   物理读取
*   一致得到

我会`SHUTDOWN IMMEDIATELY; STARTUP MOUNT;`然后你多次解释你的查询。

```
EXPLAIN PLAN FOR SELECT * FROM SCOTT.DEPT; 
```

检查解释计划是否在您随后的电话中发生变化。

此外，在某些情况下，您可以通过运行强制缓存表

```
SELECT * FROM SCOTT.DEPT CACHE; 
```

然后将其与性能指标进行比较

```
SELECT * FROM SCOTT.DEPT NOCACHE; 
```

您可能还希望将表无限期地保留在内存中

```
ALTER TABLE *scott.dept* STORAGE (buffer_pool keep) 
```

如果您没有看到任何明显的东西，请运行 `explain plan for`您的查询。连续多次运行解释，看看是否有任何变化。

除此之外，您还应该记住，在不刷新缓冲区/清除缓存的情况下多次运行查询会给您带来不可靠的读数。如果您不确定假脱机是瓶颈，我还建议您运行`explain plan for your`查询

还有一些技巧可以随着时间的推移提高性能（假设定期运行此例程）。如果您使用`alter table *table_name* cache`，运行查询而不使用假脱机到文件，然后再次`alter table *table_name* nocache`使用假脱机运行，您可能会获得更高的性能，但如果这完全可行，则再次完全取决于您的用例。

# 设置

虽然我怀疑您的问题是否可以通过任何设置组合来解决，但以下是一些可能会提供边际收益的方法

1.  `set trimspool on`

> 删除 spool 文件中的空格以填充 linesize 2\. 设置 echo off 这可能毫无意义，具体取决于您的例程是完全自动化还是交互式 3.`set verify off` 这将从您的 spool 中删除替换变量，但可以大大加快您的进程...再次，取决于您的数据 4.`set autoprint off` 这是另一个变量设置。关闭是默认设置，但您可以保证我会明确地将其设置为 5。`set serveroutput off` 6.`SET TRIMOUT ON` 删除在输出文件 7 上填充 linesize 的空格。 `set arraysize N` 您肯定会修改这个。N 是一次获取的行数。这个的大小取决于你的表的结构

虽然这些设置*可能会*提高您的例程速度，但性能通常取决于您的架构和数据集。

# java - 用字符串数组填充列表

> ID：14871330
> 
> 赞同：1
> 
> 时间：2013-02-14T09:16:03.330
> 
> 标签：java, arrays, list

我正在尝试使用字符串数组填充列表，但添加到列表中的唯一数组是最后添加的。这似乎被添加到所有列表元素中。

我究竟做错了什么？

```
String[] indata = new String[2];
List<String[]> ls = new ArrayList<String[]>();
indata[0]="test1";
indata[1]="test2";
ls.add(indata);
indata[0]="test3";
indata[1]="test4";
ls.add(indata);
for(int index=0; index < ls.size(); index++)
        System.out.println("ZZZZZZZZZZZZ----->>  " + index + "     " + Arrays.toString(ls.get(index))); 
```

预期输出：

```
ZZZZZZZZZZZZ----->>  0     [test1, test2]
ZZZZZZZZZZZZ----->>  1     [test3, test4] 
```

实际输出：

```
ZZZZZZZZZZZZ----->>  0     [test3, test4]
ZZZZZZZZZZZZ----->>  1     [test3, test4] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:17:26.900

应该：

```
String [] indata = new String [2];
List <String []> ls = new ArrayList <String []> ();
indata [0] = "test1";
indata [1] = "test2";
ls.add (indata);
indata = new String [2]; // This line added
indata [0] = "test3";
indata [1] = "test4";
ls.add (indata); 
```

当您执行`ls.add (indata)`对数组的引用时，将存储在列表中，而不是数组的副本。所以在这之后，`ls.get (0)`和`indata`指向同一个数组实例，修改这个数组的第一个元素`indata [0] = "test3"`会改变你使用`ls.get (0)[0]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:22:43.350

当您创建一个对象并将其添加到列表中时，该对象不会被复制到列表中。相反，现有对象的引用被添加到列表中。所以当您这样做时：

```
String[] indata = new String[2];
List<String[]> ls = new ArrayList<String[]>();
indata[0]="test1";
indata[1]="test2";
ls.add(indata); 
```

indata 和 ls.get(0) 都指向同一个对象。

在这里，您再次修改 indata 指向的数据以添加第二个数组。因此 ls.get(0) 也指向更新的数据。

为了添加新数组，您需要创建新数组并将其添加到列表中。

# mobile - NFC 的跨平台移动开发框架

> ID：14871335
> 
> 赞同：1
> 
> 时间：2013-02-14T09:16:10.610
> 
> 标签：mobile, cross-platform, nfc

我想为多个移动平台（android、BB、iOS 等）创建一个应用程序，该应用程序能够使用 nfc 点对点功能。（例如，读取/写入 nfc 读取器/写入器）。

我查看了 mosync（因为它允许我们编写我熟悉的 C/C++ 代码），但他们的 API 没有指定任何关于点对点 nfc 的内容。它仅支持读取/写入 nfc 标签。

那么，哪个是我可以用来满足这一需求的最佳平台？（最好我的意思是灵活并且支持最大数量的平台）

另外，libnfc 可以与“任何”这样的框架一起使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:09:08.890

如果你不打算像原生应用那样利用设备的功能，我建议你看看[PhoneGap](http://phonegap.com/)。当我们谈论跨平台应用程序时，它是最常见的框架。您也可以使用[phonegap-nfc](https://github.com/chariotsolutions/phonegap-nfc)插件来支持 android、bb 和 windows phone 8。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T17:10:12.427

我们已经为 Android、iPhone 和 Windows Phone 8 开发了大约 5 个 NFC 应用程序。我们现在开始 BB10。

不要指望那里的跨平台 - 最后你既不会省钱也不会省力。我不反对跨平台，我们大量使用它，例如在 Google TV 或 PS3 上，但不是在那里。

使用本机代码完成的 Android、iPhone (iCarte)、Windows Phone 8 和可能的 BB10 应用程序更简单（至少对我们而言）。内容本身可以使用 HTML/JavaScript/CSS 呈现。

BR 斯坦

# sql - Xquery 返回具有受限节点的行

> ID：14871336
> 
> 赞同：1
> 
> 时间：2013-02-14T09:16:14.900
> 
> 标签：sql, xml, sql-server-2008, xpath, xquery

我有一个表，其中一列包含 XML 数据。现在我想检索那些限制节点的 xml 数据。请参阅以下示例以获取有关我的方案的更多说明，

```
declare @table table (id int, xmlfield xml) insert into @table select 1,'<Root xmlns="">
    <Sample>
    <Issue>
      <Level>one</Level>
      <Descp>First Example</Descp>
    </Issue>
    <Issue>
      <Level>two</Level>
      <Descp>Second Example</Descp>
    </Issue>
    </Sample> </Root>'

      select * from @table 
```

现在我需要以下结果集

```
Id  XMLfield

1   first example 
```

即，对于选定的级别，我需要它的描述。更清楚地，节点应该被限制为`<level>one</level>`

（需要：一级的描述是什么？）

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:38:53.917

看看[xml 数据类型方法](http://msdn.microsoft.com/en-us/library/ms190798.aspx)

```
select id,
       xmlfield.value('(//Issue[Level = "one"]/Descp/text())[1]', 'varchar(100)') as XMLField
from @table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:57:39.007

您正在寻找的 XQuery 是

```
//Issue[Level = "one"]/Descp/data() 
```

# iphone - 将 NSDictionary 的对象放入数组中？

> ID：14871337
> 
> 赞同：0
> 
> 时间：2013-02-14T09:16:17.763
> 
> 标签：iphone, nsdictionary

我有一本像这样的字典：

```
{
levels =     {
    exchange =         {
        text = ALL;
    };
    product =         {
        text = ALL;
    };
    segment =         {
        text = ALL;
    };
    symbol =         {
        text = ALL;
    };
};
marginavailable =     {
    adhocmargin =         {
        text = "0.00";
    };
    branchadhoc =         {
        text = "0.00";
    };
    cashmarginavailable =         {
        text = "0.00";
    };
    collateralvalue =         {
        text = "0.00";
    };
    credits =         {
        text = "0.00";
    };
    directcollateralvalue =         {
        text = "0.00";
    };
    notionalcash =         {
        text = 0;
    };
    payinamount =         {
        text = "0.00";
    };
};
marginutilised =     {
    adhocscripmargin =         {
        text = "0.00";
    };
    category =         {
        text = 0;
    };
    cncmarginused =         {
        text = 0;
    };
    cncsellcreditpresent =         {
        text = 0;
    };
    debits =         {
        text = "0.00";
    };
    elm =         {
        text = "0.00";
    };
    exposuremargin =         {
        text = "0.00";
    };
    grossexposurevalue =         {
        text = "0.00";
    };
    ipoamount =         {
        text = "0.00";
    };
    mfamount =         {
        text = "0.00";
    };
    multiplier =         {
        text = "0.00";
    };
    payoutamount =         {
        text = "0.00";
    };
    premiumpresent =         {
        text = "0.00";
    };
    realisedmtom =         {
        text = "-0.00";
    };
    scripbasketmargin =         {
        text = "0.00";
    };
    spanmargin =         {
        text = "0.00";
    };
    subtotal =         {
        text = "0.00";
    };
    turnover =         {
        text = "0.00";
    };
    unrealisedmtom =         {
        text = "-0.00";
    };
    valueindelivery =         {
        text = "0.0";
    };
    varmargin =         {
        text = "0.00";
    };
};
net =     {
    text = "0.00";
}; 
```

}

上面的字典包含四个键，即levels、marginavailable、marginutilised和net等

我希望将前三个键和最后一个对象中的对象放入一个数组中。我已经尝试了很多，但没有找到任何逻辑来解析它。

我想要这样的字典数组

```
 exchange =         {
    text = ALL;
};
product =         {
    text = ALL;
};
segment =         {
    text = ALL;
};
symbol =         {
    text = ALL;
};
adhocmargin =         {
    text = "0.00";
};
branchadhoc =         {
    text = "0.00";
};
cashmarginavailable =         {
    text = "0.00";
};
collateralvalue =         {
    text = "0.00";
};
credits =         {
    text = "0.00";
};
directcollateralvalue =         {
    text = "0.00";
};
notionalcash =         {
    text = 0;
};
payinamount =         {
    text = "0.00";
};
adhocscripmargin =         {
    text = "0.00";
};
category =         {
    text = 0;
};
cncmarginused =         {
    text = 0;
};
cncsellcreditpresent =         {
    text = 0;
};
debits =         {
    text = "0.00";
};
elm =         {
    text = "0.00";
};
exposuremargin =         {
    text = "0.00";
};
grossexposurevalue =         {
    text = "0.00";
};
ipoamount =         {
    text = "0.00";
};
mfamount =         {
    text = "0.00";
};
multiplier =         {
    text = "0.00";
};
payoutamount =         {
    text = "0.00";
};
premiumpresent =         {
    text = "0.00";
};
realisedmtom =         {
    text = "-0.00";
};
scripbasketmargin =         {
    text = "0.00";
};
spanmargin =         {
    text = "0.00";
};
subtotal =         {
    text = "0.00";
};
turnover =         {
    text = "0.00";
};
unrealisedmtom =         {
    text = "-0.00";
};
valueindelivery =         {
    text = "0.0";
};
varmargin =         {
    text = "0.00";
};
net =     {
    text = "0.00";
}; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:27:48.123

您可以使用`addEntriesFromDictionary:`来`NSMutableDictionary`构建一个新字典，将原始数据的每个二级字典合并。

像这样的东西：

```
// Original data presumed held in origData

NSMutableDictionary *newDict = [NSMutableDictionary dictionary];

[newDict addEntriesFromDictionary: [origData objectForKey: @"levels"]];

// etc. for the other keys 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:29:51.857

您只需尝试遵循逻辑它可能会对您有所帮助。

```
resultAry = [[NSMutableArray alloc]init];
[resultAry addObject:[[parentDictionary objectForKey:@"levels"]objectForKey:@"exchange"]]; 
```

就像你从`levels`键添加所有对象然后按照相同的方式`marginavailable`和`marginutilised`

然后最后添加`net`

```
[resultAry addObject:[parentDictionary objectForKey:@"net"]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:41:01.067

如果 maindictionary 包含字典，则此代码应该保持良好

```
 NSMutableArray *dictionaryArray = [[NSMutableArray alloc]init];
        for (NSDictionary *childDictionaries in rootDict) { // rootDict is the original dictionary whic has all the four keys levels,marginAvailable,marginutilized and net

        for (NSDictionary *dict in childDictionaries) {
            [dictionaryArray addObject:dict];
        }
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T09:47:40.903

```
 NSMutableArray *newArray = [[NSMutableArray alloc]init];

   [dictionary enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop)
     {
         if ([(NSString *)key isEqualToString:@"marginutilised"])
             *stop = YES;
         [newArray addObjectsFromArray:(NSArray *)obj];
     }]; 
```

现在你可以在 newArray 中得到结果 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T09:48:12.650

要获取数组中的所有对象，还可以使用 enumerateKeysAndObjectsUsingBlock: 像这样

```
NSMutableArray *yourArray = [NSMutableArray arrayWithCapacity:0];
    [yourDict enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {
        if([(NSString*)key isEqualToString:@"net"]){
            [yourArray addObject:[(NSDictionary*)obj objectForKey:@"net"]];
            *stop = YES;
        }
            [yourArray addObject:obj];
    }]; 
```

# c# - 异步 Folder.Bind 上的 ArgumentException

> ID：14871340
> 
> 赞同：2
> 
> 时间：2013-02-14T09:16:32.630
> 
> 标签：c#, exchangewebservices, exchange-server-2010, ews-managed-api

我们使用 EWS 托管 API 将我们的 CRM 与 Exchange 服务器同步。只要我使用 EWS Manage API 1.1，一切都很完美。现在我更新到 Api 2.0（Dll 版本：15.0.516.14），如果我从不同的线程绑定到同一个文件夹并且不明白为什么，我会收到 ArgumentException。

这是引发异常的示例代码：

```
private void TestAsyncFolderGet()
    {
        try
        {
            ExchangeService service = this.GetService();

            Parallel.For(0, 20, (i) =>
                {
                    Folder fo = Folder.Bind(service, WellKnownFolderName.Inbox);
               });

        }
        catch (Exception ex)
        {
            this.State = "Failed: " + ex.Message;
        }
    }

    private ExchangeService GetService()
    {
        ExchangeService result = new ExchangeService(ExchangeVersion.Exchange2010);

        result.AutodiscoverUrl("test@foo.com");

        return result;
    } 
```

我的真实情况是我使用 pullsubscription 获取更改的项目并异步处理更改。在执行此操作时，我将绑定到父文件夹以获取一些信息。

谁能帮我避免异常？

Stacktrace 和异常信息：

System.ArgumentException：已添加具有相同键的项目。

在 System.Collections.Generic.Dictionary `2.Insert(TKey key, TValue value, Boolean add) at Microsoft.Exchange.WebServices.Data.ExchangeServiceBase.SaveHttpResponseHeaders(WebHeaderCollection headers) at Microsoft.Exchange.WebServices.Data.SimpleServiceRequestBase.ReadResponse(IEwsHttpWebResponse response) at Microsoft.Exchange.WebServices.Data.ExchangeService.InternalFindFolders(IEnumerable`1 parentFolderIds，SearchFilter searchFilter，FolderView 视图，ServiceErrorHandling errorHandlingMode）在 Microsoft.Exchange.WebServices.Data.ExchangeService.FindFolders（FolderId parentFolderId，FolderView 视图）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T07:49:41.193

我给微软打了一个支持电话，得到了这个答案......

我来自消息传递开发人员支持团队，现在已经掌握了这个案例。我已经查看了您在论坛中描述的问题，并且根据那里的示例代码，简单的答案是 ExchangeService 不能保证是线程安全的，除非作为公共静态成员（请参阅[http：/ /msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.exchangeservice(v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.exchangeservice(v=exchg.80).aspx) )。

您可以使用多种技术来避免该问题。您可以为每个线程使用 ExchangeService，但如果您同时运行大量线程，则可能不建议这样做，因为您可能会达到限制限制（每个服务实例都可能导致服务器上的新会话）。您可以为文件夹对象实现缓存，这样如果不同的线程请求同一个对象，缓存对象可以在已经被请求的情况下返回它（这也将提高性能，因为它会减少对服务器的请求）。

需要注意的重要一点是，由于 EWS 是一个 Web 应用程序，因此您应该谨慎使用多线程，并尽量减少工作线程的数量。如果每个工作线程都在向 Exchange 服务器生成请求，那么与使用一个工作线程相比，您不太可能在性能方面获得太多收益，因为您将等待来自 Exchange 的响应。

因此，在我的案例中，解决方案是创建一个名为“SafeExecuter”的类，该类注意只对每个用户进行 Exchange 调用。还要注意不超过 throttlingpolicy。

# java - 在 XP 中以管理员权限运行 java 应用程序

> ID：14871341
> 
> 赞同：6
> 
> 时间：2013-02-14T09:16:38.623
> 
> 标签：java

我在 java 中创建了一个小程序，它从注册表中读取应用程序的 UninstallString，然后使用

```
Process p = Runtime.getRuntime.exec("command") 
```

卸载此应用程序。但此任务需要管理员权限。

在 Windows Vista、7 和 8 上，通过使用以下命令“java -jar java_app.jar”创建一个 bat 文件可以正常工作，右键单击该 bat 文件并以管理员身份运行。

但是在 XP 上，我的帐户是管理员帐户，但仍然无法以管理员身份运行 java 程序。

谁能给我一些可以解决这个问题的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:21:31.637

您可以使用 RunAs 命令：

```
RUNAS /TrustLevel:Unrestricted notepad.exe 
```

您可以在系统上找到可用的信任级别：

```
RUNAS /ShowTrustLevels 
```

以下喜欢更详细地解释了[http://blog.johnmuellerbooks.com/2011/04/26/simulating-users-with-the-runas-command.aspx](http://blog.johnmuellerbooks.com/2011/04/26/simulating-users-with-the-runas-command.aspx)

# android - 在 EditText 小部件中键入日期时间

> ID：14871342
> 
> 赞同：0
> 
> 时间：2013-02-14T09:16:42.577
> 
> 标签：android, datetime, android-edittext

我正在尝试对 EditText 进行编程以接受日期时间值。用户只需键入数字，“/”和“:”将自动附加。请指教！

我正在使用 InputType 和 InputFilter 进行测试。没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:02:13.763

它可以通过使用 TextWather 并将 reqared 符号添加到 requared 位置来完成。

```
testEdit.addTextChangedListener(new TextWatcher() {
            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
            } 
```

```
 @Override
                public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                } 
```

```
@Override
            public void afterTextChanged(Editable s) {
                Log.e("b", "" + s);
                if (s.length()  2) {
                    s.append('/');
                } else if (s.length()  5) {
                    s.append('/');
                }                 
            }
        }); 
```

但是很难理解用户的意思。例如，当他在月份位置按下“1”按钮时，它可以是第一个月或“1*”月份之一。那么我们应该在末尾添加点吗？

# jquery - 在 jQuery Mobile 中隐藏标题

> ID：14871345
> 
> 赞同：3
> 
> 时间：2013-02-14T09:16:47.807
> 
> 标签：jquery, html, jquery-mobile, asp.net-mvc-4

在我的 jQuery Mobile 应用程序（MVC4 模板）中，我需要完全隐藏特定页面上的标题（它上面有一张我想要填满屏幕的地图）。为了做到这一点，我相信标题需要将 data-fullscreen 属性设置为“true”。

通过遵循这个问题中给出的建议，我设法在一定程度上实现了上述目标：-

[如何在 jQuery Mobile 中将标题设置为全屏模式？](https://stackoverflow.com/questions/14732482/how-to-set-header-to-full-screen-mode-in-jquery-mobile)

但是，它仅在标题的 data-fullscreen 属性最初设置为“true”时才有效，这是不需要的，因为它会导致标题在加载每个页面时从全屏变为固定时“跳转”，而且因为我只希望标题全屏\隐藏在一页上，在其余页面上，标题只需要保持固定。

这是所需的效果（标题中的 data-fullscreen 设置为 true）：-

[http://jsfiddle.net/Gajotres/HCcUe/](http://jsfiddle.net/Gajotres/HCcUe/)

在这里你可以看到如果你没有 data-fullscreen="true" 它不起作用

[http://jsfiddle.net/sidd92/QcgMZ/](http://jsfiddle.net/sidd92/QcgMZ/)

到目前为止，这是我自己的代码：-

**_layout.cshtml**

```
<div id="Index" data-role="page">                          
    <div data-role="header" data-theme="b" data-position="fixed" data-fullscreen="true" id="dvHeader"> 
        <div id="logo"></div>                                         
    </div>          
    <div data-role="header" data-theme="a">
        <a id="btnGlobalBack" data-role="button" data-icon="back" style="display:none;">Back</a>
        <h1>@ViewBag.Title</h1> 
    </div>  

    <div id="mainContent" data-role="content" page_name="test">                                         
        @RenderBody()  
        @RenderSection("BodyScriptsSection", required: false)           
    </div>               
    <div data-role="footer" data-position="fixed" data-tap-toggle="false">
        @RenderSection("Footer")                
    </div><!-- /footer -->                                  
</div> 
```

**脚本.js**

```
 $(document).on("click", "#btnEnableFullscreenAndHide", function () {
        $("#dvHeader").attr({ 'data-fullscreen': 'true', 'data-position': 'fixed' })
        .removeAttr('out')
        .addClass('ui-header-fixed')
        .removeAttr('reverse')
        .addClass('ui-header-fullscreen')
        .addClass('slidedown')
        .addClass('out')
        .addClass('reverse');   
    });

    $(document).on("click", "#btnBackToFixed", function () {   
        $("#dvHeader").removeAttr('data-fullscreen')
        .removeClass('ui-header-fullscreen')
        .removeClass('ui-header-fixed')
        .removeClass('slidedown')
        .addClass('out')
        .addClass('reverse');  
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:15:23.593

这段代码似乎工作正常。我只在 Chrome 中测试过。

```
 <div data-role="page" id="home">

    <div data-role="header" data-fullscreen="true">
    </div><!-- /header -->

    <div data-role="content" class="infobox">
        <p>I'm first in the source order so I'm shown as the page.</p>
        <p>View internal page called <a href="#bar">bar</a></p>
    </div><!-- /content -->

</div><!-- /page --> 
```

因此，请尝试删除该特定页面上的固定属性，并确保该属性`data-role="header"` `div`完全为空。

# user-interface - 为完美的文本渲染选择一个跨平台的图形库

> ID：14871347
> 
> 赞同：6
> 
> 时间：2013-02-14T09:16:48.413
> 
> 标签：user-interface, opengl, cross-platform, sdl, cairo

我想用 c/c++ 编写一个简单的文本编辑应用程序（主要致力于源代码编辑），具有以下规范：

*   跨平台（Windows、OS X、Linux）
*   每个操作系统上的外观尽可能相同
*   快得离谱
*   卓越的字体打印质量*** 最重要的 ***
*   小部件支持不是很重要，我真的不需要小部件的复杂支持
*   优先于软件代码架构及其速度，而不是来自硬件加速支持的速度

在写之前我做了一个研究并在网上搜索了一些，但我需要一些建议来更好地选择：

*   GTK+ 和 wxwidgets：一套完整的库来完成我的任务
*   SDL：提供平台上的虚拟化层，因此我可以使用 SDL 原语编写平台独立图形
*   开罗（或 pango）：
*   斯基亚
*   视图（在 chromium 内部使用[http://www.chromium.org/developers/design-documents/chromeviews](http://www.chromium.org/developers/design-documents/chromeviews)）
*   AGG（反颗粒几何：似乎是具有亚像素特性的最好的文本渲染库，但是速度和支持呢？）
*   雾框架（[http://code.google.com/p/fog/](http://code.google.com/p/fog/)）：看起来也不错，但缺少一些功能
*   打开总帐
*   闪烁

我丢弃了QT，我不喜欢如何使用它。

我错过了使用图书馆而不是另一个图书馆的哪些事情？那么支持呢？在某些情况下，我不太清楚每个库为我提供了什么以及我必须做哪些工作才能达到我的目标（例如，要添加到图形项目的其他层）。

图形堆栈组织的示例也非常有助于我选择正确的工具。我必须选择适当的平衡来定制和部署速度。例如：SDL 提供的哪些服务比 Cairo 或 Skia 少？等等。（从更接近操作系统的层开始）

*   后端（= 操作系统图形的虚拟化）
*   ?
*   ?
*   ?
*   将小部件组合到应用程序中的快速应用程序工具包

# java - Java - 地图或关键对象内的地图？

> ID：14871349
> 
> 赞同：-1
> 
> 时间：2013-02-14T09:16:50.337
> 
> 标签：java

嗨，我有 3 个属性（字符串）需要识别某个对象。

什么是更好的解决方案：

使用[Pierre](https://stackoverflow.com/questions/1190049/using-two-or-more-objects-as-a-hashmap-key)和[Joachim Sauer](https://stackoverflow.com/questions/635014/any-disadvantage-to-using-arbitrary-objects-as-map-keys-in-java)发布的关键对象，如下所示：

```
public class MyKey{

private String one;
private String two;
private String three;

public MyKey(Sting one,String two, String three){
    this.one=one;
    this.two=two;
    this.three=three;
}

//getter only

@Override
public int hashcode(){
// creating Hashcode
}

@Override
public boolean equals(Object o){
// comparing
}
} 
```

=>`Map<MyKey, Object>`

或在地图内使用地图内的地图：

=>`Map<String, Map<String, Map<String, Object>>>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:20:17.800

我认为你应该选择第一个选项。原因是它更干净、更灵活。想象一下几个月后您需要向您的键添加一个额外的元素，您的结构现在将无效，因为它需要更多级别的嵌套，更不用说使其更复杂了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:19:27.243

我会使用您指定的关键类。它更清晰，并且具有能够命名键的优点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:19:38.850

你说

> 我有识别某个对象所需的 3 个属性（字符串）。

这立即向我表明您的密钥由三个字符串组成，并且您的第一个解决方案是正确且直观的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T09:19:41.367

如果您总是需要 3 个键，出于性能原因，您应该使用一个键对象（tuple-3）。一个对象来统治它们......如果你想要更好的并发性，也可以让每个关键字段最终（你甚至可以预先计算哈希......）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T09:22:47.993

只需实现等于

```
one.equals(o) || two.equals(o) || three.equals(o) 
```

和哈希码

```
one.hashCode() ^ two.hashCode() ^ three.hashCode() 
```

# constraints - ADO.NET EF 如何使用 Code First 设置 FK

> ID：14871366
> 
> 赞同：0
> 
> 时间：2013-02-14T09:17:28.150
> 
> 标签：constraints, code-first, ado.net-entity-data-model

我有这些描述我的数据库模型的类：

```
 public class Blog
    {
        public int BlogId { get; set; }
        public string Name { get; set; }
        public string Url { get; set; }

        public virtual List<Post> Posts { get; set; }
    }

    public class Post
    {
        public int PostId { get; set; }
        public string Title { get; set; }
        public string Content { get; set; }

        public int BlogId { get; set; }
        public virtual Blog Blog { get; set; }
    }

    public class User
    {
        public int UserId { get; set; }
        public string Username { get; set; }
        public string DisplayName { get; set; }
    }

    public class BloggingContext : DbContext
    {
        public DbSet<Blog> Blogs { get; set; }
        public DbSet<Post> Posts { get; set; }
        public DbSet<User> Users { get; set; }
    } 
```

它工作正常，但是当我尝试`App.Config`像这样添加 FK 约束时：

```
 <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="System.Data.SqlClient" />
      </parameters>
    </defaultConnectionFactory>
    <Association Name="UserBlogs">
      <End Type="CodeFirstNewDatabaseSample.BloggingContext.User" Role="User" Multiplicity="1" >
        <OnDelete Action="Cascade" />
      </End>
      <End Type="CodeFirstNewDatabaseSample.BloggingContext.Blog" Role="Blog" Multiplicity="*" />
      <ReferentialConstraint>
        <Principal Role="User">
          <PropertyRef Name="UserId" />
        </Principal>
        <Dependent Role="Blog">
          <PropertyRef Name="UserId" />
        </Dependent>
      </ReferentialConstraint>
    </Association>
  </entityFramework> 
```

我得到一个错误`App.Config has threw an error`。如何使用此代码作为示例添加 FKeys，是否`App.Config`适合这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:26:11.867

模型构建器是我使用 Entity Framework 配置 FK 的首选方法

查看我的博客文章，其中详细介绍了如何在此处执行此操作：http: [//blog.staticvoid.co.nz/2012/7/17/entity_framework-navigation_property_basics_with_code_first](http://blog.staticvoid.co.nz/2012/7/17/entity_framework-navigation_property_basics_with_code_first)

# android - 如何将值添加到android中的字符串数组

> ID：14871369
> 
> 赞同：0
> 
> 时间：2013-02-14T09:17:32.240
> 
> 标签：android, json, for-loop, arrays

我的代码有问题，

我有一个 json 数组

```
 [{"Response":{"data":"sibin1"}},{"Response":{"data":"sibin2"}},
                              {"Response": {"data":"sibin3"}}] 
```

我正在尝试使用以下代码提取 json 数据，这里我只添加了部分代码

```
 JSONArray  finalResult = new JSONArray(tokener);
                 int finalresultlengt=finalResult.length();
                 JSONObject json_data = new JSONObject();
      for (int i = 0; i < finalResult.length(); i++) 
            {

          json_data = finalResult.getJSONObject(i);
          System.out.println("json dataa"+json_data.names().toString());
          JSONObject menuObject = json_data.getJSONObject("Response");
          result=   menuObject.getString("data");   
             System.out.println(result);
              } 
```

代码运行良好

当值

```
 i=0 ,result is sibin1
                    i=1 ,result is sibin2
                    i=2 ,result is sibin3 
```

但我的问题是，我需要将结果存储在给定 for 循环内长度为 finalresultlength 的字符串数组中，如果有人知道，我还需要在给定 for 循环外的 for 循环中打印字符串数组中的值，请帮助我............

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:25:18.667

你也可以这样做。

创建一个大小为“finalresultlengt”的 ArrayList 并添加值。

```
 list.add(result);  // variable 'result' in your case is the value from JSON 
```

如果您要添加更多值，请创建一个 POJO 类。

```
class POJO {
    private String dataVal;

    public void setDataVal(String dataVal) {
        this.dataVal = dataVal;
    }

    public String getDataVal() {
        return dataVal;
     }
 } 
```

然后创建一个 POJO 类型的 ArrayList。

```
 ArrayList<POJO> list = new ArrayList<POJO>(finalresultlengt); 
```

编辑

```
JSONArray  finalResult = new JSONArray(tokener);
int finalresultlengt=finalResult.length();
JSONObject json_data = new JSONObject();
ArrayList<String> list = new ArrayList<String>(finalresultlengt);

for (int i = 0; i < finalResult.length(); i++) {
      json_data = finalResult.getJSONObject(i);
      System.out.println("json dataa"+json_data.names().toString());
      JSONObject menuObject = json_data.getJSONObject("Response");
      result=   menuObject.getString("data");
      list.add(result);   
 } 
```

从 ArrayList 填充值。

```
 for(String value : list) 
      System.out.println(value); 
```

# ios - iOS将视频修剪为固定长度

> ID：14871379
> 
> 赞同：0
> 
> 时间：2013-02-14T09:18:17.623
> 
> 标签：ios, objective-c, cocoa-touch

我希望能够从照片库中选择一个视频，并从现有剪辑中挑选出 15 秒的视频。有没有办法强制修剪为固定长度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:46:26.787

将[`UIImagePickerController`](https://developer.apple.com/library/ios/documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)属性设置为[`videoMaximumDuration`](https://developer.apple.com/library/ios/documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/occ/instp/UIImagePickerController/videoMaximumDuration)您想要的固定长度。从文档中：

> 视频录制的最大持续时间（以秒为单位）。

`@property (nonatomic) NSTimeInterval videoMaximumDuration Discussion`

> 此属性的默认值为 10 分钟（600 秒）。当用户点击“共享”按钮将电影发送到 MMS、MobileMe、YouTube 或其他目的地时，会强制执行适当的持续时间限制和适当的视频质量。
> 
> 仅当 mediaTypes 属性的值数组包含 kUTTypeMovie 媒体类型时，此属性才可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-29T12:23:30.673

你能不能看看下面的代码。希望对你有帮助

```
-(void)recordVideo{
   imagePicker = [[UIImagePickerController alloc]init];
   imagePicker.delegate = self;
   imagePicker.allowsEditing = YES;
   imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
   imagePicker.mediaTypes = [[NSArray alloc]initWithObjects:(NSString *) kUTTypeMovie, (NSString *) kUTTypeMPEG4, nil];
   imagePicker.videoQuality = UIImagePickerControllerQualityTypeIFrame1280x720;
   [imagePicker setVideoMaximumDuration:15.0f];
  sourceType = [UIImagePickerController availableMediaTypesForSourceType:imagePicker.sourceType];
  if (![sourceType containsObject:(NSString *) kUTTypeMovie]) {
    NSLog(@"Can not Save Video");
 }
 [self presentModalViewController:imagePicker animated:YES];
} 
```

请确保，在呈现控制器之前，您必须将**allowEditing**设置为**YES 。**

# html - 是否有包含 HTML 的“样式”(CSS) 词法分析的 scintilla (scilexer.dll) 版本？

> ID：14871380
> 
> 赞同：5
> 
> 时间：2013-02-14T09:18:19.483
> 
> 标签：html, css, syntax-highlighting, lexer, scintilla

我相当确定*文本突出显示*（通过分离不同类型的文本）是闪烁词法分析器工作的一部分。如果不是，而是特定于程序，请纠正我。

当前版本的 scintilla 的 HTML 词法分析器支持脚本标记元素 (ie `<script>`) 和其他类型的嵌入代码，但不支持样式表标记元素 (ie `<style>`)，例如 CSS。

我的朋友使用 Notepad++（它使用 Scintilla）进行网页编辑，并且想要这个功能。在我跑去为他构建一个自定义版本之前，我想我会问其他人是否已经添加了这个。

在人们建议检查最新版本的 Scintilla（因为 Notepad++ 的版本落后 2 年）是否已经具备此功能之前，我已经构建了最新版本并对其进行了测试。它也不适用于嵌入式 CSS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-25T07:38:40.690

升级到最新版本的 Notepad++ (6.3.2)，因为它已经支持 CSS 语法高亮。

# c# - 我的 Web 服务是否必须实现 WCF 才能使类型重用工作？

> ID：14871382
> 
> 赞同：1
> 
> 时间：2013-02-14T09:18:24.907
> 
> 标签：c#, visual-studio-2010, web-services, asmx, webservice-client

我知道在创建 WCF 服务和客户端时，我们可以通过使用 [DataContract] 属性重用合同类。当我的 Web 服务是旧版 asmx Web 服务时，有什么办法可以做到这一点？

回答时请考虑我提出的唯一限制是服务，如果有帮助，可以将客户端代理重新生成为 WCF 客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-17T14:42:30.747

由于没有人回答，而且自从我提出这个问题以来的几个月里我找不到相反的证据，我自己回答：

不，当服务实现为 asmx Web 服务时，客户端和服务器之间的类型重用是不可能的。

如果有人知道，请分享。

# java - 如何在 Java 中获取用户的单个字符输入？

> ID：14871384
> 
> 赞同：3
> 
> 时间：2013-02-14T09:18:31.720
> 
> 标签：java, core

在下面的示例中，我尝试接受来自用户的单个字符输入，但是在运行程序时，我执行了多次 do..while 循环。请看下面程序的结果。

如果有人可以帮助我回答，如何解决这个问题？

```
import java.io.*;

public class Main {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws IOException {

            char c;
           // BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
            DataInputStream in =new DataInputStream(System.in);

            // Asking the user what to do with the application
           do{ 

            System.out.println("Would you like to access your account, if yes,type 'Y' or if you want to create a new account press 'N'to exit press 'E' ");          

            byte b = in.readByte();
            c = (char) b;
            c = Character.toUpperCase(c);

            if (c=='Y'){
                System.out.println(c);
               }
            else if (c=='N') {
              System.out.println(c);
            }
            else if (c=='E'){
               System.out.println(c); 
            }
            else{
                System.out.println("Incorrect Entry, try again: "+c); 
            }

           }while (c!='E');

    }

} 
```

# 输出

```
init:
deps-jar:
compile:
run:
Would you like to access your account, if yes,type 'Y' or if you want to create a new account press 'N'to exit press 'E' 
asdfgaf
Incorrect Entry, try again: A
Would you like to access your account, if yes,type 'Y' or if you want to create a new account press 'N'to exit press 'E' 
Incorrect Entry, try again: S
Would you like to access your account, if yes,type 'Y' or if you want to create a new account press 'N'to exit press 'E' 
Incorrect Entry, try again: D
Would you like to access your account, if yes,type 'Y' or if you want to create a new account press 'N'to exit press 'E' 
Incorrect Entry, try again: F
Would you like to access your account, if yes,type 'Y' or if you want to create a new account press 'N'to exit press 'E' 
Incorrect Entry, try again: G
Would you like to access your account, if yes,type 'Y' or if you want to create a new account press 'N'to exit press 'E' 
Incorrect Entry, try again: A
Would you like to access your account, if yes,type 'Y' or if you want to create a new account press 'N'to exit press 'E' 
Incorrect Entry, try again: F
Would you like to access your account, if yes,type 'Y' or if you want to create a new account press 'N'to exit press 'E' 
Incorrect Entry, try again: 

Would you like to access your account, if yes,type 'Y' or if you want to create a new account press 'N'to exit press 'E' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:24:04.213

使用 DataInputStream 可能不是处理您的情况的最佳方法。

DataInputStream 缓冲您键入的输入，这就是为什么您会通过循环获得不需要的冗长消息。

尝试改用扫描仪。这是扫描仪的示例：

```
Scanner objScanner = new Scanner(System.in);
char c = objScanner.next().charAt(0);
System.out.println(c); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T09:30:42.900

使用 System.in.read() 而不是 DataInputStream。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-03T07:18:38.703

用于获取输入的用户扫描程序类。它是解决您的问题的好方法。

```
Scanner scan = new Scanner(System.in);
System.out.println(scan.next().charAt(0)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T09:36:55.797

`DataInputStream`( `InputStream`) 本质上是一个**二元**结构。如果您想读取文本数据（例如从控制台），您应该使用 Reader。在源代码中有一个注释掉`BufferedReader`。最好使用相同的而不是`DataInputStream`. 您可以执行以下操作，

```
BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
String input = in.readLine(); 
```

或者您可以使用`DataInputStream.readLine()`，但由于某种原因不推荐使用。并且它也建议在那里使用`BufferedReader.readLine()`.

您可以选择其他选项，例如[Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-18T00:17:05.380

由于这个线程还没有接受的答案，即使它真的很旧，我仍然会回答；对于仍然想要解释的人。

对于这种情况，使用 a`Scanner`是最好的主意。扫描仪易于使用，并停止线程直到完成。您可以利用它来发挥自己的优势，或者您可以创建一个新线程来保持当前线程运行。扫描仪的基本用法：

```
Scanner s = new Scanner(System.in) //Makes a new scanner with System.in
String letter = s.next(); //Use next to find the character typed
//Insert code using letter variable 
```

“字母”将返回扫描仪中空格之前的所有内容。要仅找到第一个字母，请拆分字符串，`""`然后取数组的第一个（第 0 个）。

最后，从[这个线程中引用了一个关于扫描仪的好引述](https://stackoverflow.com/questions/22458575/whats-the-difference-between-next-and-nextline-methods-from-scanner-class)

> next() 只能读取输入直到空格。它无法读取以空格分隔的两个单词。此外，next() 在读取输入后将光标放在同一行。
> 
> nextLine() 读取输入，包括单词之间的空格（也就是说，它读取到行尾 \n）。读取输入后，nextLine() 将光标定位到下一行。

后来在找多个词的时候，用nextLine()代替next()得到*完整*的String

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-14T09:26:01.340

可能在上面的执行示例中，您将输入输入为“asdfgaf”，然后按回车键。因此，它一次将 A、S、D、F .... 作为输入一个字符。您应该输入“y”或“n”或“e”（一次单个字符），然后按 Enter。

例如，您是否想访问您的帐户，如果是，请输入“Y”，或者如果您想创建一个新帐户，请按“N”退出按“E”：y

# c++ - 从无符号短转换为字符串 C++

> ID：14871388
> 
> 赞同：11
> 
> 时间：2013-02-14T09:18:57.880
> 
> 标签：c++, type-conversion

如何使用 C++ 从 unsigned short 转换为 string？我有两个无符号短变量：

```
 unsigned short major = 8, minor = 1; 
```

我想加入他们的字符串，看起来像：

```
 std::string version = major + "." + minor; 
```

我该怎么做？将提供一个小的示例代码。

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-14T09:20:47.180

可以使用[std::stringstream](http://en.cppreference.com/w/cpp/io/basic_stringstream)或[std::to_string](http://en.cppreference.com/w/cpp/string/basic_string/to_string) (C++11) 或 boost::lexical_cast

```
#include<sstream>

std::stringstream ss;
ss << major  << "." << minor;

std::string s = ss.str(); 
```

std::to_string:

```
std::string s = std::to_string(major) + "." +std::to_string(minor); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T09:22:20.627

在 C++11 中，您不需要一些流来执行此操作：

```
std::string version = std::to_string(major)
              + "." + std::to_string(minor); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:20:28.703

```
std::ostringstream oss;
oss << major << "." << minor; 
```

通过 接收生成的字符串`oss.str()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T09:21:12.263

使用`std::ostringstream`. 您需要包含标题`<sstream>`。

```
std::ostringstream ss;
ss << major << "." << minor;

std::cout << ss.str(); 
```

# php - 如何在php中显示两个相关数组的值？

> ID：14871403
> 
> 赞同：1
> 
> 时间：2013-02-14T09:19:39.027
> 
> 标签：php, pagination

我有两个数组 myarray1 具有图像名称，myarray2 具有图像地址，我将在分页中显示图像名称及其地址，但不知道如何完成代码。

```
$pages = array_chunk($myarray1,10);
$addrs = array_chunk($myarray2,10);
$page_number = 1
$count = 0;
    echo'<table>';
    echo'<tr>';
    foreach ($pages[$page_number] as $i) {
      $counter++;
      if ($count == 5) {
         echo '</tr><tr>';
         $counter = 0;
      }
       echo'<td>'.$i. " AND " . <<Value of addrs array goes here
      echo'</td>';
     }
     ....... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:33:13.337

我会这样做

```
 $count = 1;
  foreach ($pages[$page_number] as $key => $i) {
  if ($count % 5 == 0) {
     echo '</tr><tr>';
     echo '</div>';
     echo '</div>';
  }
   echo'<td>'.$i. " AND " . $addrs[$page_number][$key]
  echo'</td>';
  $count++; // increase at the end.
 } 
```

如果您可以尝试在 foreach 之前对这些数组进行 var_dump 以明确结构的外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:26:47.343

尝试这样的事情：（注意 counter++ 在 $count++ 中也发生了变化）

```
foreach ($pages[$page_number] as $key => $i) {
      $count++;
      if ($count == 5) {
         echo '</tr><tr>';
         echo '</div>';
         echo '</div>';
         $count = 0;
      }
       echo'<td>'.$i. " AND " . $addrs[$page_number][$key]
      echo'</td>';
     } 
```

# c# - CA2000 和返回的 Socket 对象：如何解决？

> ID：14871407
> 
> 赞同：0
> 
> 时间：2013-02-14T09:19:47.477
> 
> 标签：c#, sockets, code-analysis, idisposable, ca2000

我有下一个功能：

```
 public static Socket ConnectSocket(string srvName, int srvPort)
    {
        Socket tempSocket = null;
        IPHostEntry hostEntry = null;

        try
        {
            hostEntry = Dns.GetHostEntry(srvName);

            //// Loop through the AddressList to obtain the supported AddressFamily. This is to avoid
            //// an exception that occurs when the host IP Address is not compatible with the address family
            //// (typical in the IPv6 case).
            foreach (IPAddress address in hostEntry.AddressList)
            {
                IPEndPoint ipe = new IPEndPoint(address, srvPort);
                if (!ipe.AddressFamily.Equals(AddressFamily.InterNetwork))
                    continue;

                tempSocket = new Socket(ipe.AddressFamily, SocketType.Stream, ProtocolType.Tcp);

                tempSocket.Connect(ipe);
                if (tempSocket.Connected)
                {
                    return tempSocket;
                }

                tempSocket.Close();
            }

            throw new ConnectionThruAddressFamilyFailedException();
        }
finally
{
  //I can't close socket here because I want to use it next
}
    } 
```

在代码分析期间，我显然有[CA2000（在失去范围之前处理对象）](http://msdn.microsoft.com/en-us/library/ms182289.aspx)警告。接下来返回的套接字用于与服务器通信。所以我不能在这里处理它。即使我稍后在这里处理这个对象，我也有 CA2000。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:30:31.143

如果有东西抛出异常，你既不返回套接字*也不* `Close`返回/`Dispose`它。

尝试：

```
try
{
    tempSocket = new Socket(ipe.AddressFamily, SocketType.Stream,
                            ProtocolType.Tcp);

    tempSocket.Connect(ipe);
    if (tempSocket.Connected)
    {
        return tempSocket;
    }

    tempSocket.Close();
    tempSocket = null;
}
catch (Exception)
{
    if (tempSocket != null)
        tempSocket.Close();
    throw;
} 
```

# ios - 布尔属性上的 KVO，不调用 observeValueForKeyPath

> ID：14871410
> 
> 赞同：3
> 
> 时间：2013-02-14T09:19:51.733
> 
> 标签：ios, singleton, key-value-observing, key-value-coding

我有一个 appDelegate，它有一个属性 myWindow 的 MyWindowClass。我需要从 myWindow 观察 bool 属性。比我有一个 CustomViewController，需要观察布尔值的变化。如果我想添加观察者，我会在 ViewController 中执行以下操作：

```
LayerWindow *w = ((AppDelegate*)[UIApplication sharedApplication].delegate).window;
    [w addObserver:self forKeyPath:@"touchInsideLayerWindow" options:(NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld) context:nil]; 
```

在 ViewController 我有

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context 
```

方法定义，也在头文件中。

在 WindowClass 我有以下代码：

```
[self setValue:[NSNumber numberWithBool: YES]forKey:@"touchInsideLayerWindow"];
 NSLog(@"isTouchInside %@", self.touchInsideLayerWindow ? @"YES" : @"NO"); 
```

ViewController 中的方法 observeValueForKeyPath 永远不会被调用。有谁知道，有什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:37:42.307

看起来一个问题是您说该属性是 a `BOOL`，但您正试图`NSNumber`在`setValue`调用中将其设置为 a 。

第二：如果你用 来做你的设置器`@synthesize`，那么只要你使用点语法，就会自动支持 KVO。

```
 self.touchInsideLayerWindow = YES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:45:40.303

将此行替换`[self setValue:[NSNumber numberWithBool: YES]forKey:@"touchInsideLayerWindow"];`为

```
[self willChangeValueForKey:@"touchInsideLayerWindow"];
[self setValue:[NSNumber numberWithBool: YES]forKey:@"touchInsideLayerWindow"];
[self didChangeValueForKey:@"touchInsideLayerWindow"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:36:55.287

我已经解决了这个问题，KVO 的代码是正确的，错误在别处。我在对象上调用 addObserver，但未正确初始化。

# c++ - http post的xml文件大小 - tinyxml vc++

> ID：14871411
> 
> 赞同：0
> 
> 时间：2013-02-14T09:19:52.553
> 
> 标签：c++, xml, xml-parsing, http-post

我试图将 xml 文件作为字符串发布到服务器。XML 库是 tinyxml，用于发布使用 CInternetsession。

当 xml 文件达到 300 kb 左右时，会发生什么情况，Posting 工作正常。

但是当 xml 文件大小超过这个值时，我会收到“操作超时”。

为什么会出现这个错误？

这是 xml 或 CinternetSession 发布大小的问题吗？

我想知道用于编写、读取和解析大约至少 20 mb 的大型 xml 的 xml 库的最佳资源。我们对 xml 解析有什么限制吗

```
 char text[7000] = {""};
SHGetSpecialFolderPath(0,xmlpth,CSIDL_APPDATA,1);

TiXmlDocument docs( "C:\\XmlData.xml" );
bool loadOkays = docs.LoadFile();

if ( !loadOkays )
{

}
else
{
    TiXmlPrinter printer;
    printer.SetIndent("\t");
    docs.Accept( &printer );
    docs.Print();
    CString URLpostdata = printer.CStr();
    #define MAX_READ_BUFFER 102400

    CString strHeaders =_T("Content-Type: text/xml");

    CString strFormData = _T("Data=<?xml version=\"1.0\" encoding=\"UTF-8\" ?><xmldata>"+URLpostdata+"</xmldata>");

    CInternetSession session;
    session.SetOption(INTERNET_OPTION_CONNECT_TIMEOUT,60000);
    session.SetOption(INTERNET_OPTION_CONNECT_RETRIES, 60000);
    CHttpConnection* pConnection = session.GetHttpConnection(_T("xxx.xxx.xxx.x"));
    CHttpFile* pFile =
        pConnection->OpenRequest(CHttpConnection::HTTP_VERB_POST, _T("/WinTest/TestServlet?"));
    BOOL result = pFile->SendRequest(strHeaders, (LPVOID)(LPCTSTR)strFormData, strFormData.GetLength());    

    DWORD dwError;
    pFile->QueryInfoStatusCode(dwError);

    if(dwError==200)
    {
        AfxMessageBox("Data was successfully posted");
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:36:16.493

如果这是与超时相关的问题，您可以使用 [CInternetSession::SetOption更改超时选项](http://msdn.microsoft.com/en-US/library/96146k14%28v=vs.80%29.aspx)

要获取有效的超时值，请使用：[CInternetSession::QueryOption](http://msdn.microsoft.com/en-US/library/0eyxs82h%28v=vs.80%29.aspx)

例如：

```
CInternetSession s;   
s.SetOption(INTERNET_OPTION_CONNECT_TIMEOUT, 60000);
s.SetOption(INTERNET_OPTION_SEND_TIMEOUT, 60000); 
```

# java - Android：当全部发送到后台时如何关闭从我的应用程序打开的应用程序

> ID：14871419
> 
> 赞同：1
> 
> 时间：2013-02-14T09:20:23.587
> 
> 标签：java, android, android-intent

这是我的问题。我正在开发从服务器加载一些文档的应用程序。我通过 Intent.ACTION_VIEW 在另一个应用程序中打开文档。这一切都很好。问题是整个应用程序都受 pin 保护，因此我必须捕获诸如“发送到后台”或“屏幕锁定”之类的事件以在之后调出 pin 屏幕，当在我的上方打开另一个应用程序时，这不起作用。因此，如果用户打开文档然后按主页按钮，从菜单中单击我的启动图标，然后他再次获得打开文档的外部应用程序，并再次使用后退按钮访问我的应用程序。这是需要修复的安全问题。以下是一些代码片段：

* * *

打开文件：

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);

Uri uri = Uri.fromFile(downloadedFile);
String mimeType = document.getMimeType();
intent.setDataAndType(uri, mimeType);
startActivityForResult(intent, 1); 
```

捕获发送到后台：

```
 ActivityManager am = (ActivityManager) context
            .getSystemService(Context.ACTIVITY_SERVICE);
    List<RunningTaskInfo> tasks = am.getRunningTasks(1);
    if (!tasks.isEmpty()) {
        ComponentName topActivity = tasks.get(0).topActivity;
        if (!topActivity.getPackageName().equals(context.getPackageName())) {
            IN_BACKGROUND = true;
            Log.i(PinUtil.class.getSimpleName(), "App sent to background ");
        } else {
            IN_BACKGROUND = false;
        }
    } 
```

我的问题是：当打开另一个应用程序时，是否可以检测我的应用程序是否被发送到后台？按下启动器图标时如何不打开另一个应用程序。

感谢所有回复。问候卢博斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:59:03.340

为了解决这个问题：

> 因此，如果用户打开文档然后按主页按钮，从菜单中单击我的启动图标，然后他再次获得打开文档的外部应用程序，并再次使用后退按钮访问我的应用程序。这是需要修复的安全问题。以下是一些代码片段：

您需要确保，当您启动外部应用程序以供用户查看文档时，该外部应用程序不会**与**您的应用程序在同一任务中运行。它需要在一个新的、单独的任务中运行。你可以这样做：

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); // Ensure app runs in separate task
Uri uri = Uri.fromFile(downloadedFile);
String mimeType = document.getMimeType();
intent.setDataAndType(uri, mimeType);
startActivity(intent); // Can't use startActivityForResult() here 
```

但是，您不能`startActivityForResult()`在启动外部查看器时使用，因为在另一个任务中运行的活动无法向您返回结果。但是，无论如何，大多数外部应用程序在启动时都不会返回结果`ACTION_VIEW`，因此这可能不是问题。

然后你问这个：

> 我的问题是：当打开另一个应用程序时，是否可以检测我的应用程序是否被发送到后台？按下启动器图标时如何不打开另一个应用程序。

StackOverflow 上应该有一些答案可以帮助您确定您的应用程序是否在后台（确定这一点实际上并不容易）。

我上面的解释应该回答你的第二个问题。如果您没有在任务中启动其他应用程序，则按下启动器图标时只会启动您的应用程序。

# php - 在 div 第 2 部分中加载新页面

> ID：14871424
> 
> 赞同：0
> 
> 时间：2013-02-14T09:20:41.053
> 
> 标签：php, javascript

我已经设法将新页面加载到`div`（感谢大家的帮助），但它看起来很糟糕（有菜单栏和徽标，但我只想要内容），所以我只需要`div`从新页面加载. 我尝试了一个新脚本，但被重定向到新页面。请帮忙。

```
<script>
   jQuery(document).ready(function() {
           jQuery('.stil_link_img a').click(function(){
             var x = $(this).attr("href") + "#content_eco";
             jQuery("#new_page").load(x);
             return false;
           });
   });   

</script>
<div id="pachete">
   <?php 
      $result=mysql_query("SELECT* FROM imagini"); 
      while($data=mysql_fetch_row($result)){
                  if( ($data[3]==1)&&($data[2]==2) ){ ?>
   <div class="stil_link_img">
      <a href="<?php echo $data[4];?>" class="poza_efect"><img  src="upload/<?php echo $data[1];?>"></a> 
   </div>
   <?php               }
      }?>
</div>
<div id="new_page">
   //some content which should be replaced with my loaded page
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:26:15.973

```
jQuery(document).ready(function() {
    jQuery('.stil_link_img a').click(function(){
      var $pageContent = jQuery('<div/>').load($(this).attr("href"));
      jQuery("#new_page").html(jQuery("#content_eco",$pageContent).html());
      return false;
    });
}); 
```

我假设#content_eco 是新页面中的部门ID（来自href 属性的url）。

或者您可以仅从 url 加载内容并避免链接回发为

```
<script>
   jQuery(document).ready(function() {
           jQuery('.stil_link_img a').click(function(){
             var x = $(this).attr("rel") + " #content_eco";
             jQuery("#new_page").load(x);
             return false;
           });
   });
</script>
<div id="pachete">
   <?php 
      $result=mysql_query("SELECT* FROM imagini"); 
      while($data=mysql_fetch_row($result)){
                  if( ($data[3]==1)&&($data[2]==2) ){ ?>
   <div class="stil_link_img">
      <a href='#' rel="<?php echo $data[4];?>" class="poza_efect"><img  src="upload/<?php echo $data[1];?>"></a> 
   </div>
   <?php               }
      }?>
</div>
<div id="new_page">
   //some content which should be replaced with my loaded page
</div> 
```

希望这对您有所帮助。

# ruby-on-rails - 在 Ruby on Rails 中为单个用户验证唯一的项目名称

> ID：14871433
> 
> 赞同：2
> 
> 时间：2013-02-14T09:21:06.167
> 
> 标签：ruby-on-rails, validates-uniqueness-of

在我的模型类`Project`中，我希望使用`name`. 我像这样验证名称：

```
 validates :name, :uniqueness => true 
```

我希望`name`项目是独一无二的，仅在`User`. 意思是，一个用户不能有多个同名的项目，但是项目表可能包含多个同名的项目，由不同的用户拥有。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T09:29:18.717

看到[范围的独特性](http://guides.rubyonrails.org/active_record_validations_callbacks.html#uniqueness)

```
validates :name, :presence => true, :uniqueness => {:scope => :user_id} 
```

# asp.net-mvc-3 - 使用 RedirectAction 方法打开一个新窗口

> ID：14871434
> 
> 赞同：0
> 
> 时间：2013-02-14T09:21:06.913
> 
> 标签：asp.net-mvc-3

我有一种情况，我需要在新窗口中打开一个视图，在 MVC 3.0 中不使用 ACtionLink，我们必须使用 RedirectAction 方法。我们怎么能这样做？

```
RedirectAction("Index", "Home"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:35:54.460

您不能从控制器执行客户端操作。

您需要先打开窗口才能执行导致 RedirectToAction 的操作。

或者重定向到包含模型中的操作的页面，并使用它来打开带有脚本的窗口。

# android - 文字转语音问题

> ID：14871443
> 
> 赞同：1
> 
> 时间：2013-02-14T09:21:26.760
> 
> 标签：android, text-to-speech

我想做一个文本到语音测试应用程序，看到这个教程：[http ://android-developers.blogspot.com.es/2009/09/introduction-to-text-to-speech-in.html](http://android-developers.blogspot.com.es/2009/09/introduction-to-text-to-speech-in.html)

我尝试按照教程所说的去做，并且我将语言设置为西班牙语：

```
mTts = new TextToSpeech(this, this);
   Locale loc = new Locale ("spa", "ESP");
   mTts.setLanguage(loc); 
```

我也试过这样做（不起作用）：

```
// Specify the exact voice you are checking for
checkIntent.putExtra(TextToSpeech.Engine.EXTRA_CHECK_VOICE_DATA_FOR,"spa-ESP"); 
```

问题是当应用程序启动时，应用程序会提示我到一个屏幕，要求我下载四种语言，德语、西班牙语、法语、意大利语。如果我只下载西班牙语然后按返回键，应用程序可以工作，但每次我启动应用程序时，它都会显示相同的屏幕来下载其他三种语言，并且只有在我下载论坛语言时才会停止出现。

我的目标是提示用户只下载西班牙语，并且只显示一次语言下载对话框，而不是总是显示。

我正在使用 4.1 的 Nexus S 手机上对其进行测试

这是完整的代码：

```
public class MainActivity extends Activity implements OnInitListener {  
    private static final int MY_DATA_CHECK_CODE = 0;
    EditText editText;
    Button button;
    private TextToSpeech mTts;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    editText = (EditText) findViewById(R.id.editText);
    button = (Button) findViewById(R.id.button);    

    editText.setText("Estoy probando, porque hay que probar.");                 

    Intent checkIntent = new Intent();
    checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
    startActivityForResult(checkIntent, MY_DATA_CHECK_CODE);

    button.setOnClickListener(new OnClickListener() {           
        @Override
        public void onClick(View v) {
            mTts.speak(editText.getText().toString(), TextToSpeech.QUEUE_FLUSH, null);              
        }
    });
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == MY_DATA_CHECK_CODE) {
        if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
            // success, create the TTS instance
            mTts = new TextToSpeech(this, this);
            Locale loc = new Locale ("spa", "ESP");
            mTts.setLanguage(loc);
        } else {
            // missing data, install it
            Intent installIntent = new Intent();
            installIntent.setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
            startActivity(installIntent);

            mTts = new TextToSpeech(this, this);
            Locale loc = new Locale ("spa", "ESP");
            mTts.setLanguage(loc);
        }
    }
}

@Override
public void onInit(int arg0) {}
} 
```

我希望你能帮我找到解决办法

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:11:23.273

您不能使用[MARC 代码](http://www.loc.gov/marc/languages/language_code.html)，而是 使用[ISO-639-1](http://en.wikipedia.org/wiki/ISO_639-1) / [ISO-3166-1](http://en.wikipedia.org/wiki/ISO_3166-1)代码来创建语言环境：`Locale loc = new Locale ("es");`. [另请参阅Locale 类参考](http://developer.android.com/reference/java/util/Locale.html)中的“类概述”部分。

# c# - HRESULT 异常：0x80070057 (E_INVALIDARG)

> ID：14871449
> 
> 赞同：39
> 
> 时间：2013-02-14T09:21:39.583
> 
> 标签：c#, wpf, .net-assembly

我有一个 WPF 应用程序。在构建它时，我收到以下错误：

> 无法加载文件或程序集或其依赖项之一。参数不正确。（来自 HRESULT 的异常：0x80070057 (E_INVALIDARG)）

应用程序正在尝试从虚拟驱动器加载程序集（作为调试文件夹）

例如：[subst r: c:[my Assembly bin pth]

早些时候我将 c:\bin 挂载为网络驱动器，并收到以下错误。

> 此程序集可能已从 Web 下载。如果程序集是从 Web 下载的，Windows 会将其标记为 Web 文件，即使它驻留在本地计算机上也是如此。这可能会阻止它在您的项目中使用。您可以通过更改文件属性来更改此名称。仅取消阻止您信任的程序集。有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkId=179545](http://go.microsoft.com/fwlink/?LinkId=179545)。

编辑：顺便说一句，我无法在属性窗口中找到取消阻止按钮。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-06-11T09:37:04.657

清除项目的临时框架文件：

对于 Windows 7，路径为：

```
C:\Users\[username]\AppData\Local\Temp\Temporary ASP.NET Files\ 
```

对于路径中带有“框架”的 64 位系统，完整路径为：

```
C:\WINDOWS\Microsoft.NET\Framework64\v2.0.50727\Temporary ASP.NET Files\ 
```

[http://www.solutioncottage.com/ShowSolution.aspx?solID=59](http://www.solutioncottage.com/ShowSolution.aspx?solID=59)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-01-08T18:45:45.377

从下面的路径中删除所有临时文件仍然有效，它保存了我在 Web 服务器上托管的开发站点 (HRESULT: 0x80070057 (E_INVALIDARG))

> C:\WINDOWS\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-12-02T16:30:48.277

在 Visual Studio 2019 上，我能够手动将**“.vs”**文件夹删除到解决方案目录中来解决这个问题。

谢谢

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-03T10:57:36.653

当我在构建时遇到蓝屏时，这发生在我身上。

我不得不删除我的包和 bin 文件夹，然后从 TFS 获取

那时我在以下位置什么都没有......

> C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET 文件

要解决我将 Visual Studio 设置为调试模式，然后监视上述目录。我删除了出现的文件，然后该应用程序再次开始工作。

是时候开始寻找新的开发机器了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T11:16:42.587

对于您在安装时遇到的错误是由于程序集/DLL 的阻塞。右键单击您下载的任何 DLL，您将获得一个取消阻止它的选项。

对于无法加载文件或程序集或其依赖项之一错误，在起始类的构造函数中放置一个断点并检查它是由于什么原因而失败的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-04T06:26:38.403

在构建我的 wcf 服务时出现 Windows 8 蓝屏错误后，我遇到了这个问题。我尝试了上面的所有建议..但它并没有解决问题。

最后，我在同一个 wcf 项目上**从 IIS 中删除并重新创建了新应用程序。**
然后一切正常。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-21T14:50:51.570

引用[这个](https://stackoverflow.com/questions/8269386/could-not-load-file-or-assembly-the-parameter-is-incorrect/24150227#24150227)SO 答案：

> **这可能在引用 COM 包装器 dll 时发生。**

进入 Visual Studio 项目，在 References 下，选择引用的 COM 包装程序集，右键单击，首选项，并确保`Embed Interop Types`和`Specific Version`都设置为`False`.

# fortran - 将 compaq fortran 转换为 intel fortran 错误 numeric_libraries

> ID：14871450
> 
> 赞同：0
> 
> 时间：2013-02-14T09:21:42.220
> 
> 标签：fortran

我正在尝试将 compaq fortran 转换为 intel fortran 代码。我安装“intel parallel studio XE 2011 SP1 for windows” 我正在使用 Visual Studio 2010。我创建新的空 fortran 项目并在构建时添加我唯一的文件“x.for”我收到错误：“错误 #7002：打开错误编译的模块文件。检查包含路径 [numerical_libraries]。在代码中，该行是：

```
USE numerical_libraries 
```

我尝试搜索“numerical_libraries”或 IMSL 库，但找不到它安装在我的电脑上，我应该在哪里找到它？我该如何修复这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:35:03.257

该`use`声明肯定表明您的程序正在寻找[IMSL](http://www.roguewave.com/products/imsl-numerical-libraries/fortran-library.aspx)数值库的安装，并且错误消息告诉您编译器找不到该文件`numerical_libraries.mod`。由于 IMSL 库是付费且可选的组件，因此最可能的解释是您没有付费并安装这些库。

如果您有，请联系 IMSL 寻求帮助，这是您需要支付的费用之一。

如果您尚未安装这些库，那么简单的解决方案是为它们付费并安装它们。 [英特尔](http://software.intel.com/en-us/rogue-wave-imsl-fortran-library)是一个来源，RogueWave 是另一个来源。

一个更困难的解决方案是识别您的程序调用的 IMSL 例程，并将这些调用替换为对您确实有代码的例程的调用，无论是来自其他来源还是来自您自己的努力。

**编辑**以回应 OP 的评论。

好的，如果你确实有库，你需要做两件事：

1.  告诉编译器在哪里可以找到`.mod`它需要的文件。在 Visual Studio 中打开项目属性页面，导航到 Fortran/General 子页面并将路径插入`numerical_libraries.mod`到**Additional Include Directories**中。
2.  告诉链接器在哪里可以找到要链接的二进制文件。在项目属性页面中打开 Linker/General 子页面，将二进制文件（`.lib`或`.dll`文件）的路径放入**Additional Library Directories**中。**在 Linker/Input 页面上，在Additional Dependencies**标题下包含要链接到的库。

然后，正如他们所说，*鲍勃是你母亲的兄弟*。

# django - 解码器 zip 不可用（Windows 7）

> ID：14871454
> 
> 赞同：4
> 
> 时间：2013-02-14T09:22:09.757
> 
> 标签：django, python-imaging-library

我安装了 django-photologue。但是当我尝试在 django admin 中保存照片时，它会抛出这个错误：

> '解码器 zip 不可用'

我已经卸载并重新安装了 PIL。我希望有人可以帮助我完成有关如何克服此错误的完整步骤。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-29T03:14:36.500

[在 Windows 上，使用PIL 网站上](http://www.pythonware.com/products/pil/index.htm)的二进制安装程序安装 PIL，而不是使用 pip。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-04T16:07:12.727

我能够在 Windows 上使用`pip install --use-wheel Pillow`. 我不确定发生了什么变化，因为 PILLOW 安装曾经在我的 Windows 设置上工作。我必须有一些混合版本或默认行为已更改。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-14T09:38:42.427

请尝试以下说明：

```
sudo pip uninstall PIL
sudo apt-get install libjpeg8 libjpeg62-dev libfreetype6 libfreetype6-dev
sudo ln -s /usr/lib/x86_64-linux-gnu/libjpeg.so /usr/lib
sudo ln -s /usr/lib/x86_64-linux-gnu/libfreetype.so /usr/lib
sudo ln -s /usr/lib/x86_64-linux-gnu/libz.so /usr/lib
sudo pip install -U PIL 
```

那应该解决 PIL 问题`decoder zip not available`。

# opengl - glm 使用什么编译/链接机制？

> ID：14871460
> 
> 赞同：1
> 
> 时间：2013-02-14T09:22:38.403
> 
> 标签：opengl, glm-math

我目前正在使用 OpenGL 使用 glm 库，我看到每个头文件 (*.hpp) 都有自己的实现文件 (*.inl)，但是每次编译项目时它如何自动编译（或链接）glm？例如：

```
#include <glm/glm.hpp>
// We actualy dont included any *.inl files
// And in glm.hpp (or any *.hpp files) are not included too! 
```

但是编译的时候没有报错！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T10:15:15.140

从 glm/glm/core/dummy.cpp：

```
/// GLM is a header only library. There is nothing to compile. 
/// dummy.cpp exist only a wordaround for CMake file. 
```

所以你必须在你的项目中包含标题，就是这样（类似于 boost）。您对[.inl 文件](https://stackoverflow.com/q/1208028/187752)是正确的，它们包含在标题中。标头有守卫，所以不会有重复。

# java - 如何在浏览器中发出 POST API 请求？

> ID：14871461
> 
> 赞同：0
> 
> 时间：2013-02-14T09:22:38.163
> 
> 标签：java, api, post, put

我对 API 和 POST、PUT 或 DELETE 真的很陌生。我也是使用 POST 或其他方式运行 API 的新手。我给了一份文件，上面写着

功能：- 添加新项目

URI：-qtp/qtps

行动：- 发布

```
REQUEST :- <n1:qtp xmlns:n1="http://www.mac.com/qts/xml/ns/qtm/qtpManagement"><name>rosa     qtp 3</name><ipAddress>171.68.121.232</ipAddress><macAddress>10:0t:24:03:r7:57</macAddress><description>this is rosa qtp </description></n1:qtp> 
```

我完全不知道如何进一步进行，但我知道通过执行我需要在应用程序服务器中添加一个新项目的请求，我自己尝试了一些浏览器，但它没有用。

有人可以告诉我如何使用这个或向我解释更多关于这个或至少给我一个线索

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:51:47.197

根据我的经验，用于测试和调试 HTTP 请求的最有用的工具之一是 cURL ( [http://curl.haxx.se/](http://curl.haxx.se/) )。

cURL 实际上是大多数 PHP 应用程序用于 HTTP 请求的底层库；命令行版本让您几乎可以做任何 HTTP 可以做的事情，并获得很好的调试数据。

在您上面描述的场景中，下载并安装 cURL 后，您可能会使用如下命令：

```
curl --header "Content-Type: application/xml" --data '<XML YOU WANT TO SEND>' -X POST <URL TO WHICH DATA SHOULD BE SENT> 
```

从您的问题中不清楚目标主机 + url 是什么，但使用您提供的特定示例数据可能看起来像：

```
curl --header "Content-Type: application/xml"  --data '<n1:qtp xmlns:n1="http://www.mac.com/qts/xml/ns/qtm/qtpManagement"><name>rosa     qtp 3</name><ipAddress>171.68.121.232</ipAddress><macAddress>10:0t:24:03:r7:57</macAddress><description>this is rosa qtp </description></n1:qtp>' -X POST http://www.mac.com/qtp/qtps 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:29:01.420

为此安装一个萤火虫插件。您可以使用 SOA 客户端。

# entity-framework-5 - 使用 EF 5 通过数据注释创建索引

> ID：14871464
> 
> 赞同：1
> 
> 时间：2013-02-14T09:22:42.860
> 
> 标签：entity-framework-5, code-first

我首先使用 EF5 和代码来创建数据库。我有一个字符串字段，想在上面放 Index(non-unique)。是否可以使用数据注释创建索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:32:51.600

EF 没有创建索引的特殊方法，您需要恢复为旧式 SQL 语句。

你可以使用种子方法来做到这一点

```
protected override void Seed(EntityMappingContext context)
{
    context.Database.ExecuteSqlCommand("CREATE INDEX IX_NAME ON TABLE (COLUMN)");
} 
```

如此处所述：[向表添加索引](https://stackoverflow.com/questions/5040795/adding-index-to-a-table)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T16:48:42.927

如果您正在使用代码迁移，您可以修改迁移（'Up' 方法）以将索引添加到新表： CreateTable("dbo.tablename", c => {...}) .PrimaryKey(t = > t.PrimaryKeyColumn) .Index(t => t.IndexColumn);

...或者，如果要向现有表添加索引，请使用： CreateIndex("dbo.tablename", t => t.IndexColumn)

降级数据库时不要忘记删除索引（'Down'方法） DropIndex(...)

# c++ - 什么是`long double`的格式说明符

> ID：14871466
> 
> 赞同：25
> 
> 时间：2013-02-14T09:22:43.327
> 
> 标签：c++, c

我正在开发适用于各种 Unix 和 Windows 32 位和 64 位操作系统的应用程序。

我正在使用`long double`数据类型，当我这样做`sprintf()`并在其中使用`long double`时`%lf` ，它可以在 Windows 上正常工作，不会出现任何错误，但是在 Solaris 平台上它会提供核心转储。

相同问题的示例代码如下。

```
void main(){
    string size = "16622";
    string sizeFact = "20";
    long long sizeLongLong = strtoll(size);
    int factInt = atoi(sizeFact);
    long double sizeLongDouble = (long double) sizeLongLong/pow(2, factInt);
    char buf[512];
    sprintf(buf, "%.3lf %s", sizeLongDouble, "str");    
} 
```

如上所述，代码在 Windows 32 位和 64 位上运行良好，但是对于 sprintf，它为我提供了 Solaris 上的核心。

我尝试在 sprintf 中进行类型转换，效果很好。

```
sprintf(buf, "%.3lf %s", (double) sizeLongDouble, "str"); 
```

格式说明符有什么用`long double`？

我在这里犯了什么错误，我是否使用了错误的格式说明符，因为它提供了核心？

为什么我需要在 sprintf() 中再输入一次 cast？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-14T09:27:23.697

因为`long double`你应该使用 format `"%Lf"`。使用小 L（即`"%lf"`）进行格式化对 POSIX 系统没有影响（请参阅[规范](http://pubs.opengroup.org/onlinepubs/009695399/functions/fprintf.html)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T09:29:14.413

[文档](http://linux.die.net/man/3/printf)清楚地说明了这一点：

> **大号**
> 
> a **、A、e、E、f、F、g**或**G**转换后的 A 对应于 long double 参数。（C99 > 允许 %LF，但 SUSv2 不允许。）

所以，你应该使用`%Lf`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-15T21:22:30.483

我会将此添加为评论，但我还不能这样做。同样重要的是要注意，您也可以通过`long double`这种方式使用指数“p”表示法：

*   定点符号：`%Lf`
*   指数符号：`%Le`
*   p 符号：`%La`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T09:25:10.030

取决于我见过的编译器`%Lf`并`%llf`尝试两者，看看哪个有效。`%lf`您使用的是 not for 的格式说明`double`符`long double`。我相信`g++`你应该使用`%llf`，而在视觉工作室它是`%Lf`。

# solr - Solr/Lucene 中 q=word1 word2 和 q="word1 word2" 的区别

> ID：14871467
> 
> 赞同：0
> 
> 时间：2013-02-14T09:22:45.833
> 
> 标签：solr, lucene

有人可以告诉我有什么区别：

```
q=word1 word2 
```

和

```
q="word1 word2" 
```

我正在尝试匹配分析的关键字“word1 word2”（是的，我的关键字可以有空格），`KeywordTokenizerFactory`它似乎只在我在查询中添加引号时才有效。

顺便说一句，我使用 Solr 扩展 Dismax，不知道这是否重要。那么语法是：

```
q="some text"&qf=KeywordField&qf=FrenchtextField 
```

* * *

**编辑：**

引号的问题是我有另一个包含全文的字段（分析是基本的并且接近 FrenchAnalyzer，包括小写过滤器）

我有 'HelloWorld' 文本索引，我可以用 q=helloWoRLD 但不能用 q="helloWoRLD" 找到它：这个单元测试被破坏了，因为我在所有查询中都添加了引号。我不明白 q=helloWoRLD 和 q="helloWoRLD" 之间有什么区别，因为它仍然是 1 个术语搜索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:59:19.770

Lucene 查询语法使用空格分隔术语，因此您在“q”和“word2”字段中执行“word1”搜索，但没有指定字段（我不确定 lucene 在未指定字段时的行为方式）。

*   如果要在字段 q 中搜索字符串“word1 word2”（连续词），则必须使用引号，即 q="word1 word2"
*   如果您想搜索同时包含这两个词（非连续）的记录，那么您可以搜索“q=word1 AND q=word2”

我不太了解您的 hello world 问题，因此无法对此发表评论。希望这可以帮助

# css - 在这种情况下，如何对齐图像中间的文本？

> ID：14871469
> 
> 赞同：2
> 
> 时间：2013-02-14T09:22:50.253
> 
> 标签：css, text-alignment

我有这个 HTML：

```
<table>
<tbody>
    <tr>
        <td style="padding-bottom:12px;">
            <a title="Blogartikel Nummer 2" href="#">
            <img width="80" height="80" class="recent-thumbnail" title="Blogartikel Nummer 2" src="http://upload.wikimedia.org/wikipedia/commons/b/bf/Lano_Beach_-_Savai%27i,_2007.jpg">Blogartikel Nummer 2</a>
            <div>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt.</div> 
        </td>
    </tr>
    <tr>
        <td style="padding-bottom:12px;">
            <a title="Blogartikel Nummer 1" href="#">
            <img width="80" height="80" class="recent-thumbnail" title="Blogartikel Nummer 1" src="http://upload.wikimedia.org/wikipedia/commons/b/bf/Lano_Beach_-_Savai%27i,_2007.jpg">Blogartikel Nummer 1</a>
            <div>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt.</div> 
        </td>
    </tr>
</tbody>
</table> 
```

左边有一张图片，右边有一个链接，下面有一些文字。我想在图像中间对齐右侧的文本。我试过 style="vertical-align:middle;" ，但这不会对齐全文，只是一部分。

我怎样才能做到这一点？

小提琴：http: [//jsfiddle.net/wNFTs/](http://jsfiddle.net/wNFTs/)

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:25:04.877

采用`text-align`

```
 text-align:center 
```

`CSS`上课并做：

```
.center-text {
    text-align:center;
}

<span class="center-text"> Blogartikel Nummer 2</span>
<div class="center-text"> Lorem Ipsum </div> 
```

由于 span 不是块元素，您可能必须将：`display: inline-block`属性应用于 span。

[http://jsfiddle.net/K6pSK/6/](http://jsfiddle.net/K6pSK/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T09:34:51.390

您可以将它们包装在容器中并将容器设置为`display: inline-block`和`vertical-align: middle`。

HTML

```
<table>
    <tbody>
        <tr>
            <td style="padding-bottom:12px;">
                <div class="image">
                    <a title="Blogartikel Nummer 2" href="#">
                        <img width="80" height="80" class="recent-thumbnail" title="Blogartikel Nummer 2" src="http://upload.wikimedia.org/wikipedia/commons/b/bf/Lano_Beach_-_Savai%27i,_2007.jpg" />
                    </a>
                </div>
                <div class="info">
                    <a title="Blogartikel Nummer 2" href="#">Blogartikel Nummer 2</a>
                    <div>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt.</div>
                </div>
            </td>
        </tr>
        <tr>
            <td style="padding-bottom:12px;">
                <div class="image">
                    <a title="Blogartikel Nummer 1" href="#">
                        <img width="80" height="80" class="recent-thumbnail" title="Blogartikel Nummer 1" src="http://upload.wikimedia.org/wikipedia/commons/b/bf/Lano_Beach_-_Savai%27i,_2007.jpg" />
                    </a>
                </div>
                <div class="info">
                    <a title="Blogartikel Nummer 1" href="#">Blogartikel Nummer 1</a>
                    <div>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy
                    eirmod tempor invidunt.</div>
                </div>
            </td>
        </tr>
    </tbody>
</table> 
```

CSS

```
.image, .info {
    display: inline-block;
    vertical-align: middle;
} 
```

[jsfiddle](http://jsfiddle.net/Nw5rG/1/)

**建议：**

您也可以完全摆脱表格，因为您并没有真正显示表格数据，而是将每个项目包装在自己的容器中。

HTML

```
<div class="item">
    <div class="image">
        <a title="Blogartikel Nummer 2" href="#">
            <img width="80" height="80" class="recent-thumbnail" title="Blogartikel Nummer 2" src="http://upload.wikimedia.org/wikipedia/commons/b/bf/Lano_Beach_-_Savai%27i,_2007.jpg" />
        </a>
    </div>
    <div class="info">
        <a title="Blogartikel Nummer 2" href="#">Blogartikel Nummer 2</a>
        <div>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt.</div>
    </div>
</div>
<div class="item">
    <div class="image">
        <a title="Blogartikel Nummer 1" href="#">
            <img width="80" height="80" class="recent-thumbnail" title="Blogartikel Nummer 1" src="http://upload.wikimedia.org/wikipedia/commons/b/bf/Lano_Beach_-_Savai%27i,_2007.jpg" />
        </a>
    </div>
    <div class="info">
        <a title="Blogartikel Nummer 1" href="#">Blogartikel Nummer 1</a>
        <div>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy
            eirmod tempor invidunt.</div>
    </div>
</div> 
```

CSS

```
.item {
    margin-bottom: 12px;
}

.image, .info {
    display: inline-block;
    vertical-align: middle;
} 
```

[jsfiddle](http://jsfiddle.net/Nw5rG/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:35:08.893

尝试在 href 中添加一个表格。但这不是最好的方法。

```
<tr>        <td style="padding-bottom: 12px;">
                            <a title="Blogartikel Nummer 2" href="#" style="vertical-align: middle">
                                <table>
                                    <tr>
                                        <td>
                                            <img width="80" height="80" class="recent-thumbnail" title="Blogartikel Nummer 2"
                                                src="http://upload.wikimedia.org/wikipedia/commons/b/bf/Lano_Beach_-_Savai%27i,_2007.jpg">
                                        </td>
                                        <td valign="middle">
                                            Blogartikel Nummer 2
                                        </td>
                                    </tr>
                                </table>
                            </a>
                            <div>
                                Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod
                                tempor invidunt.</div>
                        </td>
                    </tr> 
```

# ios - 两个 NSManagedObjectContext 互相观察对方的 NSManagedObjectContextDidSaveNotification

> ID：14871476
> 
> 赞同：1
> 
> 时间：2013-02-14T09:23:15.260
> 
> 标签：ios, core-data, nsmanagedobjectcontext

我有一个视图控制器 A 和一个使用 NSFetchedResultsController 的表视图，基于主上下文和一个视图控制器 B，它处理来自服务器的下载并将它们保存在数据库中处理第二个上下文，我们称之为编辑上下文。主上下文观察 NSManagedObjectContextDidSaveNotification，并在编辑上下文保存时合并 chenges。

当我从视图控制器 A 中删除一个单元格时，NSFetchedResultsController 将更改保存在主上下文中。在 B 中，如果我尝试再次下载在 A 中删除的对象，则在保存上下文时出现错误。

我已经通过这种方式解决了这个问题，但我真的不知道这是否是一个好方法：我已经让编辑上下文观察主上下文，所以当我在主上下文中删除某些内容时，另一个会合并更改。所以主要上下文和编辑上下文是相互观察的。它会引起问题吗？

# android - 插入代码导致应用程序停止

> ID：14871477
> 
> 赞同：-1
> 
> 时间：2013-02-14T09:23:21.523
> 
> 标签：android, database, insert, sqlite

我有这组代码用于将数据插入到我的 sqlite 数据库中。但是为什么当我尝试插入时我的应用程序会停止？

```
package edu.nyp.project;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.view.View.OnClickListener;

public class AddData extends Activity {
Button insertButton = null;
EditText shopText= null;
EditText dealText= null;
EditText locationText= null;
EditText websiteText= null;
EditText categoryText= null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.adddata);

    insertButton = (Button) findViewById(R.id.button1);
    insertButton.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v)
        {
            DBAdapter dbAdapter = new
                    DBAdapter(getApplicationContext());
            try{
                dbAdapter.open();

                String shop = shopText.getText().toString(); 
                String deal = dealText.getText().toString(); 
                String location = locationText.getText().toString(); 
                String website = websiteText.getText().toString(); 
                String category = categoryText.getText().toString(); 
            }
            catch(Exception e){
                Log.d("Add Data ", e.getMessage());
            }
            finally{
                if (dbAdapter != null)
                    dbAdapter.close();
            }
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.adddata, menu);
    return true;
}
} 
```

这是 DBAdapter 文件的代码供参考。

```
package edu.nyp.project;

import android.content.ContentValues;
import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBAdapter {
public static final String KEY_ROWID = "_id";
public static final String KEY_SHOP = "shop";
public static final String KEY_DEAL = "deal";
public static final String KEY_LOCATION = "location";
public static final String KEY_WEBSITE = "website";
public static final String KEY_CATEGORY = "category";
private static final String TAG = "DBAdapter";

private static final String DATABASE_NAME = "Project";
private static final String DATABASE_TABLE = "Deals";
private static final int DATABASE_VERSION = 1;

private static final String DATABASE_CREATE =
        "create table Deals (_id integer primary key autoincrement, " +
        "shop varchar not null, deal varchar not null, " +
        "location varchar not null, website varchar not null, category text not null);";

private final Context context;

private DatabaseHelper DBHelper;
private SQLiteDatabase db;

public DBAdapter (Context ctx)
{
    this.context = ctx;
    DBHelper = new DatabaseHelper(context);
}

private static class DatabaseHelper extends SQLiteOpenHelper
{
    DatabaseHelper(Context context)
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    public void onCreate (SQLiteDatabase db)
    {
        try{
            db.execSQL(DATABASE_CREATE);
        }
        catch(SQLException e){
            e.printStackTrace();
        }
    }

    public void onUpgrade (SQLiteDatabase db, int oldVersion, int newVersion)
    {
        Log.w(TAG, "Upgrading database from version " + oldVersion+ "to "+ newVersion 
                + "which will destroy all data");
        db.execSQL("DROP TABLE IF EXISTS Deals");
        onCreate(db);
    }
}

public DBAdapter open() throws SQLException
{
    db = DBHelper.getWritableDatabase();
    return this;
}

public void close()
{
    DBHelper.close();
}

public long insertDeal(String shop, String deal, String location, String website, String category)
{
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_SHOP, shop);
    initialValues.put(KEY_DEAL, deal);
    initialValues.put(KEY_LOCATION, location);
    initialValues.put(KEY_WEBSITE, website);
    initialValues.put(KEY_CATEGORY, category);
    return db.insert(DATABASE_TABLE, null, initialValues);
}
} 
```

和xml文件在下面，也供参考。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TableLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/shopText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="Shop name" >

            <requestFocus />
        </EditText>

    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/dealText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="Deal" >
        </EditText>

    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/locationText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="Location" >
        </EditText>

    </TableRow>

    <TableRow
        android:id="@+id/tableRow4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/websiteText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="Website" >
        </EditText>

    </TableRow>

    <TableRow
        android:id="@+id/tableRow5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/categoryText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="Category" >
        </EditText>

    </TableRow>

</TableLayout>

<LinearLayout
    android:id="@+id/LinearLayout1"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent">
        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="60px"
            android:text="Insert" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="60px"
            android:text="Delete" />

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="60px"
            android:text="Search" />

 </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:28:04.877

因为我认为您没有将这些组件与 findViewById 绑定：

```
shopText.getText().toString(); 
            String deal = dealText.getText().toString(); 
            String location = locationText.getText().toString(); 
            String website = websiteText.getText().toString(); 
            String category = categoryText.getText().toString(); 
```

结果应该是 NullPointerException。向我们展示您的 LogCat...

否则将其添加到您的创建并重试：

```
shopText= (EditText)findViewById(R.id.THE_ID);
dealText= (EditText)findViewById(R.id.THE_ID);;
locationText= (EditText)findViewById(R.id.THE_ID);;
websiteText= (EditText)findViewById(R.id.THE_ID);;
categoryText= (EditText)findViewById(R.id.THE_ID);; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:31:54.163

```
 First of all get all EditText By id.
    try{
    shopText=(EditText)findViewById(R.id.shopText)
    //get All EditText by id like above
                    dbAdapter.open();

                    String shop = shopText.getText().toString(); 
                    String deal = dealText.getText().toString(); 
                    String location = locationText.getText().toString(); 
                    String website = websiteText.getText().toString(); 
                   String category = categoryText.getText().toString(); 
//secondly 
dbAdapter.insertDeal(shop,deal,location,website,category);

                } 
```

# delphi - 分组提示和警告

> ID：14871480
> 
> 赞同：1
> 
> 时间：2013-02-14T09:23:26.647
> 
> 标签：delphi, delphi-xe2

是否可以按某些标准对提示和警告消息进行分组或排序（例如，在消息窗口下的组中获取所有“变量可能尚未初始化”）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:52:26.170

使用IDE，没有。您也不能使用命令行编译器来做到这一点。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2021-11-22T22:36:48.970

一种可能的解决方案是禁用所有警告，除了提示和警告选项卡下的编译器设置/选项中的一个警告等等，但这需要 waaaayyy 太长的时间！

但是，如果您真的每天都需要这个功能来处理一个大型项目，则可以将其保存到“选项集”，然后在需要时重新应用。

我自己还没有尝试过，但很有可能这会奏效。

现在将尝试，因为我需要这个 =D

嗯，我发现了一个小技巧，只需按 F 就足够了，它会将其设置为 False ！;)

这将加快进程！;)

OK 刚刚试了一下，50%的解决方案。

不幸的是，提示是一种全有或全无的东西，不能单独指定:(

# java - Java查找两台服务器是否在同一台机器上运行

> ID：14871482
> 
> 赞同：1
> 
> 时间：2013-02-14T09:23:43.840
> 
> 标签：java, ip, hostname, inet

我必须找出两台服务器是否在同一主机上运行。

我有两台主机，但我无法比较它们，因为一台可以有 IP 地址，另一台可以有主机名。当我进一步挖掘时，我发现主机名可以有任意数量的别名。那么如何确定两个主机别名（其中一个可以是 IP）对应于同一主机或不同主机？

我们可以使用找到主机名，`java.net.InetAddress.getLocalHost().getHostName();`但我不确定如何查找两个主机名是否指向同一主机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:27:17.797

您可以将所有内容都转换为 IP 地址，并且由于我们知道它们是独一无二的，因此可以将它们进行比较。

看看这篇文章。

[http://www.java2s.com/Code/Java/Network-Protocol/ConvertahostnametotheequivalentIPaddress.htm](http://www.java2s.com/Code/Java/Network-Protocol/ConvertahostnametotheequivalentIPaddress.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:41:16.540

*   获取主机名的 IP 地址。[使用：`InetAddress::getByName()`]
*   获取您拥有的 IP 的网络接口。[使用： `NetworkInterface::getByInetAddress()`]
*   获取网络接口的 MAC 地址 [使用：`NetworkInterface::getHardwareAddress()`]
*   如果两台服务器生成的 MAC 地址重叠，则它们在同一台机器上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:47:03.297

对两个主机名进行 NSlookup。比较结果。

您可以使用 InetAddress.getHostAddress() 来执行查找。

请注意，主机名可能位于负载均衡器或其他类型的代理之后，因此没有可靠的方法来测试它们是否真的“在同一台（物理）机器上运行”。

# delphi - TMainMenu 的 OnNewItem 事件

> ID：14871485
> 
> 赞同：0
> 
> 时间：2013-02-14T09:24:01.477
> 
> 标签：delphi, menuitem

我`TMainMenu`在表单上有一个，我想在将一个`TMenuItem`添加到`TmainMenu`.

`TMainMenu.OnChange(Sender: TObject; Source: TMenuItem; Rebuild: Boolean)`似乎不起作用，因为在添加或删除或更新项目时参数值没有区别。我只需要对新项目做出反应。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T09:46:51.323

# 问题

查看代码`TMenuItem.Add()`很明显，唯一触发的事件是`OnChange`. 因此，没有简单而干净的解决方案。

# 干净的解决方案——重构你的代码

我的第一个想法：您肯定*知道*何时将菜单项添加到菜单中，是您的代码添加了它。最好的选择是简单地重构代码，这样它就不会直接添加菜单项，而是调用您选择的方法。例如，如果您使用这样的代码：

```
someMenu.Add(M); // where someMenu is an existing menu item and "M" is the new item 
```

你可以把它重构成这样：

```
// procedure definition in private section of main form, or somewhere else relevant:
procedure AddSubMenu(const Where, What: TMenuItem);

// Refactor your code to do this:
AddSubMenu(someMenu, M);

// Then in the "AddSubMenu" you can do whatever you want to do for new items:
procedure TFormName.AddSubmenu(const Where, What: TMenuItem);
begin
  // Do your thing.
  // Then do the actual adding of the menu item
  Where.Add(What);
end; 
```

# 替代解决方案 - 跟踪现有菜单项

使用`OnChange`你知道被调用的项目，递归地遍历现有列表并对`TMenuItems`它们做一些事情，这样你就知道你以前见过它们。例如将 设置`Tag`为 1 - 您会知道带有的项目`Tag = 0`是新的。或者将所有项目添加到字典中，以便您可以轻松测试哪些项目是新的，哪些项目是预先存在的。

这是一个使用属性来跟踪的示例`OnChange`处理程序`Tag`，而不是菜单项是新的还是旧的。确保正确处理菜单的初始创建；例如，在从 DFM 初始化 Menu 之后，并将所有设计时菜单项的 设置为之后，我将`OnChange`在运行时从表单的 中分配`OnCreate``Tag``1`

```
procedure TForm1.MainMenu1Change(Sender: TObject; Source: TMenuItem; Rebuild: Boolean);
var i: Integer;

  procedure VisitMenuItem(const M: TMenuItem);
  begin
    if M.Tag = 0 then
    begin
      // First time I see this TMenuItem!

      // DO my thing
      ShowMessage(M.Caption);

      // Mark the item so I don't "Do my thing" again
      M.Tag := 1;
    end;
  end;

  procedure RecursivelyVisitAllMenuItems(const Root: TMenuItem);
  var i:Integer;
  begin
    VisitMenuItem(Root);
    for i:=0 to Root.Count-1 do
      RecursivelyVisitAllMenuItems(Root.Items[i]);
  end;

begin
  for i:=0 to MainMenu1.Items.Count-1 do
    RecursivelyVisitAllMenuItems(MainMenu1.Items[i]);
end; 
```

# asp.net-mvc - 在 .net MVC 网站上生成 50k 静态 html 页面 - 这如何与持续部署一起工作？

> ID：14871492
> 
> 赞同：0
> 
> 时间：2013-02-14T09:24:14.870
> 
> 标签：asp.net-mvc, asp.net-mvc-3, caching, continuous-integration, continuous-deployment

这是情况。

1.  我们的网站有大约 50,000 个“详细信息”页面，每个页面都由来自我们数据库和 API 的大量数据组成。目前这些是动态的，但数据只需要每天更改，如果那样的话。我们启用了输出缓存以加快速度。

2.  我们每天多次直接从 Git 部署到 Appharbor。如果我错了，请纠正我，但我认为每次这样做都会丢失缓存。所以输出缓存并没有做它应该做的一切。除此之外，我宁愿内容从一开始就被缓存，而不是当第一个用户点击每个页面时。

现在，如果不是因为持续部署问题，我建议在编译期间生成静态 html 文件以获得最佳性能。但我觉得每天多次重复这个过程并不是正确的解决方案。

我们应该看什么缓存策略？

附带问题：如果我们确实生成了 50k 静态 html 文件，你会以某种方式将它们作为文件夹结构排列在磁盘上，还是将它们存储在数据库中，或者存储在内存中，还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:46:51.947

你为什么不使用 App Fabric Cache ？（我不知道它是否可以通过应用程序港口获得）

[http://www.hanselman.com/blog/InstallingConfiguringAndUsingWindowsServerAppFabricAndTheVelocityMemoryCacheIn10Minutes.aspx](http://www.hanselman.com/blog/InstallingConfiguringAndUsingWindowsServerAppFabricAndTheVelocityMemoryCacheIn10Minutes.aspx)

或者，也许您应该考虑实现自己的 OutputCache Provider 并将结果保存在您的 ravendb 或文件系统中：

[http://msdn.microsoft.com/en-us/magazine/gg650661.aspx](http://msdn.microsoft.com/en-us/magazine/gg650661.aspx)

这样，您可以确保在重新启动应用程序时不会清除缓存。

编辑：应用程序结构不可用，但您可以将 memcache 与此提供程序一起使用：[https ://github.com/enyim/memcached-providers](https://github.com/enyim/memcached-providers)

# image - Why are the new (1.10.0) jQuery UI images the wrong color in Firefox?

> ID：14871499
> 
> 赞同：0
> 
> 时间：2013-02-14T09:24:51.933
> 
> 标签：image, jquery-ui, firefox, themeroller

I'm currently using jQuery UI 1.9.2 and want to upgrade to 1.10.0\. I have a custom theme and used the URL at the top of my CSS file to visit the ThemeRoller.

My colors didn't look right, so I went through and double checked all my settings. I was using 3-digit hex colors and tried changing them to 6 digits, but that didn't help anything. I cleared my cache and restarted my computer. No change.

I started digging a little deeper. I opened the image in PSP, the colors are fine. They also appear fine in Safari and Chrome. They look fine in Firefox 12 on the laptop, but *not* in Firefox 12 on the PC (Win XP on both machines).

I thought maybe there was an add-on messing with my colors. But I opened the 1.9.2 image file in Firefox and it looks correct.

1.9.2 -> ![1.9.2 ui-bg_diagonals-small_25_0066cc_40x40.png](../Images/ecf03b7fc380396b019ad66f60dfb008.png)       1.10.0 -> ![1.10.0 ui-bg_diagonals-small_25_0066cc_40x40.png](../Images/0a75e1db4d1be4fa103844d98debfe46.png)

I just added the two images to this post from my own computer. I'm looking at the preview with the images side-by-side. The one on the left (1.9.2) is the one I want. The one on the right (1.10.0) looks much more purple on my screen. The background color is supposed to be #0066cc. I used a color picker to view the color displayed by Firefox. The 1.10.0 version has a background color of #4756c7\. I see the same problem with all the new images, even the flat ones.

I looked at the two files with ExamDiff Pro and they are very different. Plus, all the new images are larger than the old images (more than twice as many bytes).

Luckily, I only copied over the CSS file and the new animated-overlay.gif, so I am just going to keep using the old images. But I want to understand what's going on.

So what did jQuery UI do differently when generating their images? And why did they change them? And why does Firefox 12 on my computer show them with different colors?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:35:39.323

Hard to say exactly without seeing the actual files, but it sounds like browser variations in the way that ICC color profiles are being handled. More details on FireFox specifically [over here](https://developer.mozilla.org/en-US/docs/ICC_color_correction_in_Firefox). But it might not be FireFox being the problem & more connected to whatever your main development browser is & how it handles ICC profiles as well.

Like the FireFox article implies, the feature is fairly old in many browsers but what I have noticed is many modern browsers nowadays are actually paying attention to ICC profiles as a default, whereas before that feature was disabled by default.

Which is all to say I would see how these images look if you strip out all EXIF metadata using a tool like [exiftool](http://www.sno.phy.queensu.ca/~phil/exiftool/). Without an embedded ICC color profile, the images should render similarly between all browsers.

And to strip out all metadata with `exiftool` you would just run a command like this; assuming your file is named `test.jpg`:

```
exiftool -all= test.jpg 
```

You will end up with a backup file tagged as `test.jpg_original` that still has EXIF data embedded and a cleaned `test.jpg` that now is 100% stripped of EXIF data.

# android - 在应用程序中显示随机问题

> ID：14871500
> 
> 赞同：-1
> 
> 时间：2013-02-14T09:24:53.260
> 
> 标签：android, random, viewflipper

我正在开发一个涉及测验的应用程序。我使用 viewflipper 来显示问题，当我按下下一个按钮时，它会翻转到下一个问题。但是，我希望随机显示这些问题。我已经解析了一个 xml 并显示了问题 n 它的选项！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:30:13.563

假设您的所有问题都存储在`array`或某些数据结构中，例如`ArrayList`

您只需在活动中定义一个随机对象**一次**

例如

```
Random random = new Random(); 
```

获取下一个问题索引：

```
int nextQuestionIndex = random.nextInt(n); // where n is the total number of questions 
```

# windows-phone-7 - 如何在 Windows Phone 的谷歌地图上获取用户的当前位置

> ID：14871507
> 
> 赞同：0
> 
> 时间：2013-02-14T09:25:28.503
> 
> 标签：windows-phone-7, google-maps, c#-4.0, google-maps-api-3, bing-maps

当用户打开我的 Windows Phone 应用程序时，应该会显示他的当前位置 - 使用 Google 地图或 Bing 地图。我试图将 Bing 地图集成到我的应用程序中，但问题是：

如何定位用户的确切位置或附近位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:35:20.670

该地图只是一个控件，如果您从**GeoCoordinateWatcher**获得它，您可以在其上显示您的位置。您可以在网上寻找好的示例（例如[http://blogs.msdn.com/b/dragoman/archive/2010/09/21/wp7-code-using-the-geolocation-api.aspx](http://blogs.msdn.com/b/dragoman/archive/2010/09/21/wp7-code-using-the-geolocation-api.aspx)），但如果您需要我也可以帮助实现它。

# ruby-on-rails - rvm install 1.9.3 是否默认安装了 OpenSSL 支持？

> ID：14871508
> 
> 赞同：1
> 
> 时间：2013-02-14T09:25:32.863
> 
> 标签：ruby-on-rails, rvm

如果我这样做`rvm install 1.9.3`，它会安装 OpenSSL 支持吗？Rails 不需要 OpenSSL`bundle install`吗？在 Gemfile 你有`source 'https://rubygems.org'`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:10:41.220

我卸载了我的 macbook 上的所有东西（rvm、rails、ruby 等）。

安装自制软件

安装的 rvm

冉`rvm requirements run force`

冉`rvm install rails`

`rails new sample_app`

`cd sample_app`

*注意：* `source 'https://rubygems.org'`存在于 Gemfile 中，需要 openssl！

`bundle install` **它奏效了**！

**无需指定：** `--with-openssl-dir=$HOME/.rvm/usr`

# java - itext变量问题

> ID：14871509
> 
> 赞同：0
> 
> 时间：2013-02-14T09:25:49.607
> 
> 标签：java

我试图在 pdf 文档中显示来自类“dbproperties”的变量值。以下代码说明了它，

```
dbproperties db = new dbproperties();

Chunk text1 = new Chunk(db.index_number);
Paragraph p = new Paragraph();
p.add(text1);
document.close(); 
```

但收到错误

> 不能从静态内容中引用非静态变量”，用于“Chunk text1 = new Chunk(db.index_number);

谁能帮我解决这个问题？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:49:20.410

由于代码不完整，再次尝试猜测：

会不会`db`是您的类的非静态成员，但代码是在某个静态方法或代码块中执行的？例如

```
class YourClass
{
    dbproperties db = new dbproperties();

    public static void main(String[] args)
    {
        [...]
        Chunk text1 = new Chunk(db.index_number);
        Paragraph p = new Paragraph();
        p.add(text1);
        document.close();
        [...]
    }
} 
```

在这种情况下，代码无法访问`db`，因为代码位于静态方法中（即不在类的单个实例的上下文中），而要访问的成员与单个实例相关联。

在这种情况下，您需要一个类的实例，例如

```
 [...]
        YourClass instance = new YourClass();
        Chunk text1 = new Chunk(instance.db.index_number); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:50:05.563

您能否向我们展示更多导致此错误的精确代码？

我的看法是，您以非静态方法或仅作为实例字段单独声明 db 变量：

```
dbproperties db = new dbproperties(); 
```

但以下代码在 statis 方法中执行，如下所示：

```
public static void main(String[] argv){
   Chunk text1 = new Chunk(db.index_number);
   ....
} 
```

然后**db**不能从 main 访问。它们应该是静态的或实例的。您可以在 main 中声明**db**来解决它。

# java - GCM IntentService注册ID每次都不一样

> ID：14871510
> 
> 赞同：0
> 
> 时间：2013-02-14T09:26:00.230
> 
> 标签：java, android, google-cloud-messaging

我有一个简单的问题：每次注册服务时，我在 onRegistered 回调中收到的令牌是否不同？这正常吗？我通过以下方式注册服务：

```
GCMRegistrar.register(mContext, SENDER_ID); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:29:44.130

```
 // Dont call the register method each time. Call it only if required.

    final String regId = GCMRegistrar.getRegistrationId(c);
    if (regId.equals(""))
    {
        GCMRegistrar.register(<your context>, <Your GCM sender ID>); 
    }
    else
    {
        //already registered
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:03:54.677

通常每次都是一样的，但是谷歌可能会刷新他们的`registration id`记录，如果发生这种情况，您将收到一个新的注册 ID。

这就是为什么在您的应用程序中您`register`每次都调用并检查是否已`registration id`更改

我注意到，当您卸载并重新安装该应用程序时，`registration id`通常会发生变化。

# mongodb - 如何为混合类型的嵌套列表指定 salat DAO 模型？

> ID：14871521
> 
> 赞同：0
> 
> 时间：2013-02-14T09:26:34.927
> 
> 标签：mongodb, scala, serialization, casbah, salat

我从 MongoDB 返回的数据如下所示：

```
> db.foo.findOne()
[
    {
        "_id" : "some string",
        "bar" : [
            [
                14960265,
                0.5454545454545454
            ],
            [
                30680,
                0.36363636363636365
            ],
            [
                12852625,
                0.09090909090909091
            ]
        ],
    }
] 
```

该`bar`属性包含一个未知大小的列表，其中每个项目都是一个长度为 2 的列表，其中包含一个 Int 和一个 Double。在 Scala 中，我将其表示为 List[(Int, Double)]。

我将如何为这个结构编写模型以与 Salat 一起使用？

Salat 不做元组，所以我尝试了：

```
case class FooEntry(a: Int, b: Double)
case class Foo(_id: String, bar: List[FooEntry]) 
```

但得到：

> java.lang.IllegalArgumentException：BasicBSONList 只能与数字键一起使用，而不是：[a]

也试过：

```
case class Foo(_id: String, sps: List[Any]) 
```

但得到：

> java.lang.ClassCastException：com.mongodb.BasicDBList 不能转换为 scala.collection.immutable.List

显然，数据可以以更好的形式存储，使用对象而不是长度为 2 的数组。但鉴于这就是我所拥有的，有没有一种使用 Salat 反序列化它的好方法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:57:52.483

Salat项目在这里负责。无论您的数据结构是什么，您都需要为列表指定类型。Salat 还不支持元组，虽然 Salat 支持多态集合（这需要类型提示！），但它不支持像你这样的异构类型列表。

你可以重组你的数据，使数组成员不是列表，而是

```
[
  {x: 123, y: 123.0}, 
  {x: 456, y: 456.0}
] 
```

然后你可以使用

```
case class Bar(x: Long, y: Double)
case class Foo(_id: String, sps: List[Bar]) 
```

或者，考虑尝试使用 Miles Sabin 的 Shapeless 项目或 Alois Cochard 的 Sherpa 项目来反序列化您的数据。

# c++ - 在 C++ 中检查平均计算中的双倍溢出

> ID：14871522
> 
> 赞同：-1
> 
> 时间：2013-02-14T09:26:37.157
> 
> 标签：c++

我必须在 C++ 中实现标准差和方差。

```
#include <iostream>
#include <string>
#include <math.h>

class StdDeviation
{ 
private: 
    int max; 
    double value[100]; 
    double mean; 

public: 
double CalculateMean() 
{ 
    double sum = 0; 
    for(int i = 0; i < max; i++) 
        sum += value[i];  // Question 1\. at bottom.

    return (sum / max); 
} 

double CalculateVariane() 
{ 
    mean = CalculateMean(); 

    double temp = 0; 
    for(int i = 0; i < max; i++) 
    { 
         temp += (value[i] - mean) * (value[i] - mean) ; 
    } 

    return temp / max; 
} 

double CalculateSampleVariane() 
{ 
    mean = CalculateMean(); 
    double temp = 0; 
    for(int i = 0; i < max; i++) 
    { 
         temp += (value[i] - mean) * (value[i] - mean) ; 
    } 

    return temp / (max - 1); 
} 

int SetValues(double *p, int count) 
{ 

    if(count > 100) 
        return -1; 

    max = count; 

    for(int i = 0; i < count; i++) 
        value[i] = p[i]; 

    return 0; 
}     

double GetStandardDeviation() 
{ 
    return sqrt(CalculateVariane()); 
} 

double GetSampleStandardDeviation() 
{ 
    return sqrt(CalculateSampleVariane()); 
} 

}; 
```

以下是我的问题：

1.  如何确保 double 的值不会溢出并返回零。
2.  如何检查我没有超过总和的最大值，即最大值的两倍？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:15:13.007

你确定溢出是一个问题吗？double 的最大值是 1.7*10 ^(308)。您正在对平方求和，但即使您的值不超过 ~10 ^(150) ，您仍然是安全的。你真的有这样的价值观吗？

更严重的问题是舍入错误。`double`保留大约 17 个有效数字（准确地说是 52 个有效二进制数字）。如果添加指数不同的数字，则较小的下半部分仅影响超出结果精度的数字。极端`1E20 + 1 == 1E20`，因为要表示为不同的数字，这将需要 20 个有效数字，而您没有它们。当您可能会有很多小数字和少数大数字时，建议先添加小数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:40:59.067

在 C++11 中

```
double CalculateMean() 
{ 
    double sum = 0; 
    for(int i = 0; i < max; i++) 
    {
        sum += value[i];
        if(isinf(sum))
        {
            //handle error
        }
    }

    return (sum / max); 
} 
```

参见：[isinf](http://en.cppreference.com/w/cpp/numeric/math/isinf)

但是，如果您迭代地计算前缀的平均值，则可以完全避免该问题（用于平均值计算）：

```
double CalculateMean() 
{ 
    double mean = 0; 
    for(int i = 0; i < max; i++) 
    {
        mean *= ((double)i/(double)(i+1));
        mean += value[i]/(i+1);
    }

    return mean; 
} 
```

现在 mean 只能等于无穷大，如果值里面有一个 infinte 值开始

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T17:01:31.967

```
double avg = 0;
for (int i = 0; i < max; ++i)
    avg += value[i] / max; 
```

# javascript - 谷歌浏览器不会在调试器中保存我的代码更改

> ID：14871524
> 
> 赞同：2
> 
> 时间：2013-02-14T09:26:46.997
> 
> 标签：javascript, debugging, google-chrome, javascript-debugger

我正在开发一个网络应用程序，而 google-chrome 开始表现得很奇怪。当我在 JavaScript 文件中进行更改时，在调试器上点击刷新后 - 我仍然在调试器中看到相同的代码，并且浏览器执行这个旧代码。为什么 google-chrome 会有这样的行为，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T09:30:45.767

1.  打开开发者工具，右键单击并选择“检查元素”或 Ctrl/Cmd + Shift + J
2.  单击该窗口右下角的 Cog 图标。
3.  选择常规选项卡
4.  勾选“禁用缓存”

这将禁止 Chrome 缓存（本地存储）js 文件的副本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:29:30.743

也许是缓存问题。尝试进行缓存刷新（ctrl-r，ctrl-f5）。如果您使用 cache.manifest 文件，那么您需要以`touch`某种方式使用它并双重刷新您的应用程序以显示更改。

# jquery - 显示页面元素默认 jquery

> ID：14871527
> 
> 赞同：0
> 
> 时间：2013-02-14T09:26:55.363
> 
> 标签：jquery

我有一个注册页面，顶部有 2 个单选按钮（2 种注册类型）。

当第一个单选按钮被选中时，我看到了第一种类型的注册表格。当第二个单选按钮被选中时，我看到了第二种类型的表单。

我通过将 jquery 代码添加到单选按钮输入来实现它：

```
onclick="jQuery('.school_field').hide();jQuery('.priv_field').show(); 
```

问题：当我进入注册页面时，我看到了我创建的所有表格（用于 2 种注册类型）。如何在默认情况下显示第一类注册的表单？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:29:19.563

使用以下 CSS`priv_field`在页面加载期间隐藏所有元素：

```
.priv_field { display: none; } 
```

使用 jQuery 也可以实现同样的效果，尽管我没有看到它的案例：

```
$(function() { $('.priv_field').hide(); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:30:34.653

默认情况下，您需要在页面加载时隐藏表单并仅显示一个。

可能这有帮助

```
$(document).ready(function(){

    jQuery('.school_field').hide();
    jQuery('.priv_field').show();    

}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:49:12.477

您可以使用 show() 和 hide() 。这有点简单

看看[http://jsfiddle.net/nagoba/ZvQw6/](http://jsfiddle.net/nagoba/ZvQw6/)

```
$(document).ready(function(){

    $("#form1").click(function(){

        $('#form2').attr('checked',false);
        $("#f1").show();
        $("#f2").hide();

    });

    $("#form2").click(function(){

        $('#form1').attr('checked',false); 
         $("#f2").show();
        $("#f1").hide();

    });

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T09:52:16.743

您的意思是隐藏/显示仅适用于第一/第二注册类型的*字段*，而不是*表单？*

当 DOM 准备好时，您应该检查最初选择了哪个单选按钮，然后基于此隐藏/显示字段。

```
$(document).ready(function() {
  if ($('input.radio-button-for-school').is(':selected')) {
    $('.priv_field').hide();
    $('.school_field').show();
  } else {
    $('.school_field').hide();
    $('.priv_field').show();
  }
}); 
```

请注意，在某些浏览器中，如果您将表单字段设置为特定值，然后重新加载页面，表单字段仍将保持相同的值。因此，IMO 仅仅假设您的默认单选按钮将始终是您加载页面时选择的单选按钮是不够的。如果用户提交表单但其中包含一些无效值，您可能还希望保留用户的输入。

# glx - glxMakeCurrent 给出分段错误

> ID：14871528
> 
> 赞同：1
> 
> 时间：2013-02-14T09:26:56.847
> 
> 标签：glx

**glXMakeCurrent**给出**分段**错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:48:07.610

原因有很多，其中大多数是由错误输入引起的实现错误。

如果您需要帮助解决此问题，您需要提供以下内容作为开始：

*   您正在运行的平台
*   您链接到的 libGL 驱动程序，以及支持它的 GPU（如果有）
*   您可以创建的触发问题的最小完整代码示例

# c# - updatepanel 更新整个页面，而不仅仅是内容模板

> ID：14871529
> 
> 赞同：2
> 
> 时间：2013-02-14T09:27:00.323
> 
> 标签：c#, asp.net, .net

```
 <%@ Page Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="Default2.aspx.cs" Inherits="Default2"  ClientIDMode="AutoID" %>
                        <asp:Content ID="Content1" ContentPlaceHolderID="head"        Runat="server">
                        </asp:Content>

                        <asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="server">

                        <% 
                        foreach (var item in AllSales)
                        {
         //Here i have just set a breakpoint to see if it loops the AllSales list when I press the update button
                        }
                        %>

                        <asp:UpdatePanel runat="server" ID="UpdatePanel1">
                        <ContentTemplate>

                        <p>Update Panel: DateTime.Now: <%= DateTime.Now.ToString() %></p>
                        <asp:Button runat="server" ID="Submit" Text="Update" />

                        </ContentTemplate>

                        </asp:UpdatePanel>

                        </asp:Content> 
```

脚本管理器代码位于母版页中：

```
 <asp:ScriptManager ID="ScriptManager1" runat="server" />

    <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">

    </asp:ContentPlaceHolder> 
```

这里的问题是，每次我单击更新按钮时，它都会再次加载页面并循环“AllSales”列表，我只想更新一个部分而不必进行不必要的循环。

这是有趣的部分：**如果我删除母版页，它会起作用！但是使用母版页，它没有，为什么？！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:30:52.760

您需要使用服务器控件来启动更新，而不是使用普通的 html 输入按钮。尝试使用：

```
<asp:Button ID="ActivitySubmit" Text="Submit" runat="server" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T09:28:11.557

将`UpdateMode`mode 属性设置为 Conditional。UpdateMode 的默认值为`Always`，如果该`UpdateMode`属性设置为 Always，则 UpdatePanel 控件的内容会在来自页面任何位置的每次回发时更新，请[参考](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.updatemode.aspx)

**编辑：**您正在使用 input type="submit" 这可能导致 post back 将其替换为 asp:Button 以使 ajax 调用正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T09:29:21.967

这种行为的原因是您使用纯 html 提交按钮而不是 ASP.NET 服务器按钮。因此页面提交到服务器而不涉及 ASP.NET Ajax 功能。用asp替换`ActivitySubmit`按钮：按钮控件

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T15:45:21.130

我已经测试了相同的代码，只改变了按钮类型，它只刷新了更新面板的内容。问题是您的网站面向 .NET 3.0，但您至少需要面向 3.5。我在 3.0 上测试过，它不起作用，但在 3.5 和 4.0 上，它工作正常。因此，更简单、更安全的解决方案是针对 3.5 及更高版本。但是如果你想使用 .NET 3.0，我会尝试找到一个解决方法。请告诉我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T15:31:52.177

我试图重现您的问题，但在我的情况下它工作正常。尝试创建一个新的 .aspx 文件并粘贴以下内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <p>Outside UpdatePanel</p>
        <asp:ScriptManager runat="server" ID="ScriptManager1">
        </asp:ScriptManager>
        <asp:UpdatePanel runat="server" ID="UpdatePanel1">
            <ContentTemplate>
                <p>DateTime.Now: <%= DateTime.Now.ToString() %></p>
                <asp:Button runat="server" ID="SubmitButton" Text="Go" />
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
    </form>
</body>
</html> 
```

这是在 VS2010 中使用 .NET 4.0 在空 Web 应用程序中测试的。这对你也有用吗？我使用带有内容占位符的母版页尝试了相同的示例。这会产生相同（正常工作）的结果。据此，我收集到您的页面上还有其他我们遗漏的内容。有没有？

**[编辑]**

我做了另一个简单的例子，这次是一个母版页和一个内容页。

母版页：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ScriptManager runat="server" ID="ScriptManager1"></asp:ScriptManager>
        <p>Master Page: DateTime.Now: <%= DateTime.Now.ToString() %></p>
        <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server"></asp:ContentPlaceHolder>
    </div>
    </form>
</body>
</html> 
```

页面：

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
<asp:UpdatePanel runat="server" ID="UpdatePanel1">
<ContentTemplate>
<p>Update Panel: DateTime.Now: <%= DateTime.Now.ToString() %></p>
<asp:Button runat="server" ID="Submit" Text="Update" />
</ContentTemplate>
</asp:UpdatePanel>
</asp:Content> 
```

再次，这在与另一个示例相同的环境中没有问题。看起来您必须告诉我您所针对的 .NET 框架以及您在母版页和 aspx 页面中设置的其他内容，因为：

在 .Net 3.5 及更高版本中，这将起作用。然而，在较低版本中，它不会。恐怕我一直无法弄清楚如何在较低版本中修复它。:(

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T11:58:03.020

在您的`Page`标签中添加

```
ClientIDMode="AutoID" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-01T17:21:28.813

我认为您可以尝试将表单放入更新面板中，或者您可以尝试将子项更改为更新面板的触发器属性，如下所示：

```
<asp:UpdatePanel runat="server" ID="UpdatePanel1" ChildrenAsTriggers="False"> 
```

然后像这样添加按钮作为触发器

```
 ScriptManager.GetCurrent(Page).RegisterAsyncPostBackControl(SubmitButton); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-02T20:31:39.737

尝试将此部分添加到您的更新面板：

```
 <Triggers>
     <asp:AsyncPostBackTrigger ControlID="Submit" />
  </Triggers> 
```

# iis - Windows Server 中的 Unity3D Web 客户端加载页面错误？

> ID：14871533
> 
> 赞同：0
> 
> 时间：2013-02-14T09:27:17.517
> 
> 标签：iis, unity3d, loading

我开发了一个 Unity3d 3D Walk 并在网上发布。当我上传到 Linux 服务器时，它工作正常；但是，当我上传到 Windows 服务器时，我遇到了问题。

Linux 服务器： http: [//www.mandanemedia.com/Staging/Unity3D/NUS3DWalkThrough/](http://www.mandanemedia.com/Staging/Unity3D/NUS3DWalkThrough/)

Windows 服务器： [http ://skqs.nus.edu.sg/medicallibrary3d/](http://skqs.nus.edu.sg/medicallibrary3d/)

我认为正在发生的事情是无法访问 Unity3D 页面。要自己尝试，请转到[此链接](http://www.mandanemedia.com/Staging/Unity3D/NUS3DWalkThrough/WebPlayer.unity3d)，您不会收到错误消息。但是，如果你去[这个页面](http://skqs.nus.edu.sg/medicallibrary3d/WebPlayer.unity3d)，你会得到一个 ISS 错误。

我在谷歌上搜索过，试图找到一个解决方案：

在 IIS 服务器上，它必须指定 Unity3D 文件是允许发送的内容。

怎么做：在 IIS 主目录的 web.config 文件中，我们需要配置文件以允许加载 unity3d 文件：

```
<configuration>
    <system.webServer>
        <staticContent>
            <remove fileExtension=".unity3d" />
            <mimeMap fileExtension=".unity3d" mimeType="application/vnd.unity" />
        </staticContent>
    </system.webServer>
</configuration> 
```

更多链接：

1.  [http://forum.unity3d.com/threads/14819-lots-of-customers-experience-invalid-Unity-file/page3](http://forum.unity3d.com/threads/14819-lots-of-customers-experience-invalid-Unity-file/page3)
2.  [在 Windows Azure 中部署 Unity3D](https://stackoverflow.com/questions/10739720/deploy-unity3d-in-windows-azure)
3.  [http://developer.dynamicweb-cms.com/forum/development/adding-mime-types.aspx](http://developer.dynamicweb-cms.com/forum/development/adding-mime-types.aspx)

我已经让 NUS 的网络管理员来执行此操作，以下是服务器设置的屏幕截图：

[替代文字 http://www.mandanemedia.com/Staging/Unity3D/NUS3DWalkThrough/image001.png](http://www.mandanemedia.com/Staging/Unity3D/NUS3DWalkThrough/image001.png) [替代文字 http://www.mandanemedia.com/Staging/Unity3D/NUS3DWalkThrough/image002.png](http://www.mandanemedia.com/Staging/Unity3D/NUS3DWalkThrough/image002.png)

但问题仍然存在。如果有人对如何解决它有任何想法，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:43:46.577

问题是服务器是windows 2003和IIS6，因此这种方法在IIS6中不起作用。

通过配置 IIS6，我们需要在 windows Server 2003 中使用 IIS 管理器用户界面：

1.  转到开始\管理工具并运行 IIS 管理器。
2.  右键单击服务器名称并选择属性。
3.  在“属性”对话框中，单击“MIME 类型”。
4.  在 MIME 类型对话框中，单击新建。一世
5.  在 MIME 类型对话框中，输入以下 MIME 类型：

    扩展名：.unity3d

    MIME 类型：application/vnd.unity

完成了，祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:18:07.103

我也不是 IIS 专家，但我记得有一些设置决定了 IIS 将为客户端提供哪些文件扩展名。由于统一网络项目使用特殊的文件扩展名“.unity”，似乎 IIS 配置不正确。请参阅： [Unity3d 论坛关于主题的帖子](http://forum.unity3d.com/threads/11263-Setting-up-IIS-to-stream-Unity3D-content)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T19:34:33.703

这在 IIS 7.5 中变得更加奇怪。如果我使用我一直使用的 web.config 方法，它就可以正常工作。由于我管理服务器，因此我决定将其添加到服务器级别的 MIME 类型列表中。所以在服务器级别我添加：

扩展名：.unity3d mime 类型：application/vnd.unity

突然间，我在多个网站上的所有 PNG 图像都开始返回 500 错误。我删除了它的映射。

如果我在“站点”级别而不是在 IIS 配置中的服务器级别添加 MIME 类型，它可以正常工作。它似乎是一个 IIS 错误。如果您遇到它，仅供参考。

# android - 如何防止 URL 被包裹在 TextView 中？

> ID：14871539
> 
> 赞同：6
> 
> 时间：2013-02-14T09:27:50.140
> 
> 标签：android, textview, word-wrap

我有一个`TextView`可以显示一些可选 URL 的多行。现在我有一个问题：我的一些长 URL 显示在位置`://`

```
sometext sometext http://   <-- AUTO LINE WRAP
google.com/ 
```

如何禁用整个 URL 或至少`http(s)://`前缀的换行？但是，我仍然需要启用文本换行。

我的文字应该这样换行

```
sometext sometext    <-- AUTO LINE WRAP
http://google.com/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:21:51.740

这只是为 textview 实现自定义包装的概念证明。您可能需要根据您的要求添加/编辑条件。

如果您的要求是我们的 textview 类必须以这样的方式显示多行，它不应该以某些文本结尾（这里是 http:// 和 http:），我已经修改了非常流行的 textview 类的代码，以满足这一点要求：来源： [自动缩放 TextView 文本以适应边界](https://stackoverflow.com/questions/5033012/auto-scale-textview-text-to-fit-within-bounds)

变化：

```
 private boolean mCustomLineWrap = true;

/**
     * Resize the text size with specified width and height
     * @param width
     * @param height
     */
    public void resizeText(int width, int height) {
        CharSequence text = getText();
        // Do not resize if the view does not have dimensions or there is no text
        if(text == null || text.length() == 0 || height <= 0 || width <= 0 || mTextSize == 0) {
            return;
        }

        // Get the text view's paint object
        TextPaint textPaint = getPaint();

        // Store the current text size
        float oldTextSize = textPaint.getTextSize();
        // If there is a max text size set, use the lesser of that and the default text size
        float targetTextSize = mMaxTextSize > 0 ? Math.min(mTextSize, mMaxTextSize) : mTextSize;

        // Get the required text height
        int textHeight = getTextHeight(text, textPaint, width, targetTextSize);

        // Until we either fit within our text view or we had reached our min text size, incrementally try smaller sizes
        while(textHeight > height && targetTextSize > mMinTextSize) {
            targetTextSize = Math.max(targetTextSize - 2, mMinTextSize);
            textHeight = getTextHeight(text, textPaint, width, targetTextSize);
        }

        if(mCustomLineWrap ) {

            // Draw using a static layout
            StaticLayout layout = new StaticLayout(text, textPaint, width, Alignment.ALIGN_NORMAL, mSpacingMult, mSpacingAdd, false);
            // Check that we have a least one line of rendered text
            if(layout.getLineCount() > 0) {
                String lineText[] = new String[layout.getLineCount()];
                // Since the line at the specific vertical position would be cut off,
                // we must trim up to the previous line
                String wrapStr = "http:", wrapStrWithSlash = "http://";
                boolean preAppendWrapStr = false, preAppendWrapStrWithSlash = false ;
                for(int lastLine = 0; lastLine < layout.getLineCount(); lastLine++)
                {
                    int start = layout.getLineStart(lastLine);
                    int end = layout.getLineEnd(lastLine);
                   lineText[lastLine] = ((String) getText()).substring(start,end);
                    if(preAppendWrapStr)
                    {
                        lineText[lastLine] = "\n" + wrapStr + lineText[lastLine];
                        preAppendWrapStr = false;
                    }
                    else if(preAppendWrapStrWithSlash)
                    {
                        lineText[lastLine] = "\n" + wrapStrWithSlash + lineText[lastLine];
                        preAppendWrapStrWithSlash = false;
                    }

                    if(lineText[lastLine].endsWith(wrapStr))
                    {
                        preAppendWrapStr = true;
                        lineText[lastLine] = lineText[lastLine].substring(0,lineText[lastLine].lastIndexOf(wrapStr));
                    }
                    if( lineText[lastLine].endsWith(wrapStrWithSlash))
                    {
                        preAppendWrapStrWithSlash = true;
                        lineText[lastLine] = lineText[lastLine].substring(0,lineText[lastLine].lastIndexOf(wrapStrWithSlash));
                    }

                }
                String compString = "";
                for(String lineStr :   lineText)
                {
                    compString += lineStr;
                }
                  setText(compString);
            }

        }

        // Some devices try to auto adjust line spacing, so force default line spacing
        // and invalidate the layout as a side effect
        textPaint.setTextSize(targetTextSize);
        setLineSpacing(mSpacingAdd, mSpacingMult);

        // Notify the listener if registered
        if(mTextResizeListener != null) {
            mTextResizeListener.onTextResize(this, oldTextSize, targetTextSize);
        }

        // Reset force resize flag
        mNeedsResize = false;
    } 
```

# solr - 如何对包含属于多个位置的产品的文档进行分类？

> ID：14871550
> 
> 赞同：0
> 
> 时间：2013-02-14T09:28:45.320
> 
> 标签：solr, search-engine, solrj

假设我的索引包含产品，每个产品都出现在多个商店。如何根据用户与属于该产品的所有商店之间的最小距离对产品进行排序。我身边有用户的经纬度，还有店铺的经纬度。

我正在使用 solr 4。我尝试制作一个多值位置（[solr 空间搜索](http://wiki.apache.org/solr/SpatialSearch)）字段，其中包含属于每个商店的各种商店的位置，但它给出的结果是错误的。

{编辑}

我尝试使用 solr.LatLonType 类创建一个多值位置字段，如包含属于特定产品的所有商店位置值的[链接](http://wiki.apache.org/solr/SpatialSearch#QuickStart)中所述，但是当您尝试使用 geodist() 函数对该字段进行排序时，它给出错误的结果（您可以通过查看 geodist() 函数的值来检查它，您可以再次在 fl 参数中请求该函数。我相信属于 LatLong 类的字段不能像[这里](http://wiki.apache.org/solr/SpatialSearch#LatLonType)描述的那样被设为多值，但是任何人都可以给出我用其他方法来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:21:43.583

您所有的链接都指向旧实现的文档。Solr 4 有了[新的实现](http://wiki.apache.org/solr/SolrAdaptersForLuceneSpatial4)。

此外，如果您可以升级，Solr 4.1 添加了一些[额外的 GEO 支持](https://lucene.apache.org/solr/4_1_0/changes/Changes.html#4.1.0.new_features)(SOLR-4230)。Geo 是 Lucene 和 Solr 中发展非常迅速的话题，做一些复查以确保您使用的是最新功能是有意义的。

# arduino - Arduino上意外的整数数学结果

> ID：14871551
> 
> 赞同：1
> 
> 时间：2013-02-14T09:28:49.373
> 
> 标签：arduino

我正在尝试将 RGB LED 从一种颜色平滑过渡到另一种颜色。作为逻辑的一部分，我有以下函数来确定变化有多大（它乘以一个因子`f`以避免浮点数学）：

```
int colorDelta(int from, int to, int f) {
  int delta;

  if (to == from) {
    delta = 0;
  } else {
    delta = (to - from) * f;
  }

  return delta;
} 
```

**当我打电话时，`colorDelta(0, 255, 1000)`我希望结果是`-255000`，而是函数返回`7144`。**

我尝试尽可能直接地执行该操作以进行调试，但`Serial.print((0 - 255) * 1000, DEC);`也写入`7144`串行端口。

我在这里愚蠢地忽略了什么？我真的很想看到（平滑过渡的）光。;)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:49:59.597

我怀疑整数溢出：该`int`类型无法容纳-255000。按照语言标准，有符号整数溢出是未定义的行为，但实际上结果的主要位*通常*只是被丢弃（警告：此观察不打算用于*编写代码*，因为未定义的行为仍然未定义；它仅适用于那些当您必须对已知错误的程序进行*推理时）。*

快速检查它的一个好方法是计算您的实际结果和预期结果之间的差异：`-255000 - 7144 = -262144`. 后者是`-(1<<18)`，这表明我的怀疑是有根据的。

# javascript - 车把或主干将空字符串插入 html

> ID：14871565
> 
> 赞同：5
> 
> 时间：2013-02-14T09:29:22.853
> 
> 标签：javascript, backbone.js, handlebars.js

我是车把和主干的新手，我目前正在尝试在我的网页上预编译车把模板。然而，我不知道是哪一个把手或主干在 DOM 中添加了一个空字符串。我不知道为什么。当我在主干视图中编译模板时，不会发生同样的事情。

对我来说更奇怪的是，我有一个预编译的车把模板，这不会发生......

这是预编译时的html图片：

![在此处输入图像描述](../Images/c8c0e918a665ceff9272768ad6db5bc2.png)

这是在主干视图中编译时的图片：

![在此处输入图像描述](../Images/6f48f8fde7e566ba8ba64408780ddaa7.png)

有谁知道为什么会这样？

我试图通过仅编译不接受任何数据的最简单模板并查看文件中的问题来简化预编译的模板文件......我已经更改了返回字符串，但它没有解决问题，所以我认为问题必须在骨干内的某个地方......

简单的模板：

```
<div id="channelsContainer"></div>
<div>
    <div id="postsContainer"></div>
    <div>
        <div id="contentContainer"></div>
        <div id="detailsContainer"></div>
    </div>
</div> 
```

从主干视图中的模板函数返回预编译的模板：

```
template:   function(data)
    {
        return Handlebars.templates['shell.html'];
    } 
```

在视图中编译时返回模板：

```
template:   function(data)
        {
            var handlebarTemplate = Handlebars.compile('<div id="channelsContainer"></div> \
<div> \
    <div id="postsContainer"></div> \
    <div> \
        <div id="contentContainer"></div> \
        <div id="detailsContainer"></div> \
    </div> \
</div>');

            return handlebarTemplate;
        } 
```

在同一个主干视图中，在初始化方法中：

```
this.$el.empty().html(this.template()); 
```

非常感谢您对找出正在发生的事情的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:14:08.803

我的同事找到了问题的答案......他只是用没有 BOM 编码的 UTF-8 保存了文件......资源： [没有 BOM 的 UTF-8](https://stackoverflow.com/questions/5406172/utf-8-without-bom)

似乎 Visual Studio 使用不适当的编码保存文件......

谢谢你们的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:39:12.443

我只能猜测，但我的一个模板也有类似的问题。就我而言，内联模板是解析为 DOM 节点的字符串，而不是解析为 DOM 节点的 XML。结果，任何错误的空格在解析后都被转换为 TEXT 元素，当模板被调用时，它们正在进入 DOM 中。

# android - 在 Android 中从 shell 命令安装/卸载

> ID：14871570
> 
> 赞同：13
> 
> 时间：2013-02-14T09:29:31.087
> 
> 标签：android, silent-installer

我想在 Android 中实现一个静默安装程序，来自 apk 文件和 unistaller 包。该主题已在 SO 和其他地方进行了广泛讨论，但由于某种原因，我无法申请任何我错过的内容。这个范围显然很难实现，因为如果成功，这将是 Android 的严重安全漏洞。但是，我需要为一个特殊项目实施它，而不是为消费市场。有两种方法：

1.  通过调整 PackageManager 安装程序（实际上只是删除用户接受对话框），从源代码（例如 AOSP 或 Cyanogen mod）生成自定义 ROM。
2.  通过以超级用户身份创建进程并执行“adb shell pm install”以编程方式执行此操作。我之前在 /system/xbin 中安装了“su”，并在运行时测试了 RootTools.rootIsAvailable()。

对于第一种情况，我深入研究了 Froyo 源代码，但使用 @hide 标记的方法陷入了死胡同。第二个我首先尝试了来自终端的命令

```
adb shell pm install /mnt/sdcard/HelloAndroid.apk 
```

和

```
adb shell pm uninstall com.example.helloandroid 
```

两者都工作正常。然后，我使用了以下代码，在有根的模拟器（2.2 - Froyo）上测试了开发：

```
@Override
    public void onClick(View v) {
        switch (v.getId())
           {
              case R.id.btnInstall:
                  try {  
                      install = Runtime.getRuntime().exec("su\n");   
                      DataOutputStream os = new DataOutputStream(install.getOutputStream());
                      os.writeBytes("pm install /mnt/sdcard/HelloAndroid.apk\n"); 
                      os.writeBytes("exit\n"); 
                      os.flush();
                      install.waitFor();

                              if (install.exitValue() == 0) {  
                                  Toast.makeText(MainActivity.this, "Success!", Toast.LENGTH_LONG).show();
                              }  
                              else {  
                                  Toast.makeText(MainActivity.this, "Failure. Exit code: "+String.valueOf(install.exitValue()), Toast.LENGTH_LONG).show();
                              }
                  }
                  catch (InterruptedException e) {  
                      logError(e);
                  }
                  catch (IOException e) {  
                  logError(e);
                  } 
                  break;

              case R.id.btnUninstall:
                  try {
                      install = Runtime.getRuntime().exec("su\n"); 
                      install=Runtime.getRuntime().exec("pm uninstall "+txtPackageName.getText().toString()+"\n");

                } catch (Exception e) {
                    logError(e);
                }
                  break;
           }

    } 
```

为了避免拼写错误和其他修饰，我硬编码了安装命令的 apk 文件参数；在 'case R.id.btnInstall' 上，该命令未执行，退出为“失败”，退出值为 1，表示“找不到该类”；不知道这意味着什么……感谢您的帮助！

已编辑：我有干净的解决方案，只要我有时间和正确形式的代码，我就会从 AZ 发布答案！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T10:19:38.357

正如我在这里所承诺的那样，这是解决此问题的方法，除了必须将整个应用程序安装在 /system/app 目录中之外，无需对系统进行任何强制。我跟着，然后对这里的优秀文章做了一些修复：http: [//paulonaka.wordpress.com/2011/07/02/how-to-install-a-application-in-background-on-android/](http://paulononaka.wordpress.com/2011/07/02/how-to-install-a-application-in-background-on-android/)。我已经下载了文章中引用的 zip 文件，（我尽量保持相同的类名）：

1.  创建了一个新项目和一个主要活动作为入口点

```
 package com.example.silentinstuninst;

import java.io.File;
import java.lang.reflect.InvocationTargetException;

import com.example.instuninsthelper.ApplicationManager;
import com.example.instuninsthelper.OnDeletedPackage;
import com.example.instuninsthelper.OnInstalledPackage;

import android.os.Bundle;
import android.os.Environment;
import android.app.Activity;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity implements OnClickListener {

    Process install;
    Button btnInstall, btnUninstall;
    EditText txtApkFileName, txtPackageName; 

    public static final String TAG = "SilentInstall/Uninstall";

    private static ApplicationManager am;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        initializeValues();

    }

    private void initializeValues() {

        btnInstall = (Button) findViewById(R.id.btnInstall);
        btnUninstall = (Button) findViewById(R.id.btnUninstall);
        txtApkFileName = (EditText) findViewById(R.id.txtApkFilePath);
        txtPackageName = (EditText) findViewById(R.id.txtPackageName);

        btnInstall.setOnClickListener(this);
        btnUninstall.setOnClickListener(this);

        try {
            am = new ApplicationManager(this);
            am.setOnInstalledPackage(new OnInstalledPackage() {

                public void packageInstalled(String packageName, int returnCode) {
                    if (returnCode == ApplicationManager.INSTALL_SUCCEEDED) {
                        Log.d(TAG, "Install succeeded");
                    } else {
                        Log.d(TAG, "Install failed: " + returnCode);
                    }
                }
            });

            am.setOnDeletedPackage(new OnDeletedPackage() {
                public void packageDeleted(boolean succeeded) {
                    Log.d(TAG, "Uninstall succeeded");  
                }
            });

        } catch (Exception e) {
            logError(e);
        }
    }

    private void logError(Exception e) {
        e.printStackTrace();
        Toast.makeText(this, R.string.error+e.getMessage(), Toast.LENGTH_LONG).show();
    }

    @Override
    public void onClick(View v) {
        switch (v.getId())
           {
              case R.id.btnInstall:
                  // InstallUninstall.Install(txtApkFileName.getText().toString());
            try {
                am.installPackage(Environment.getExternalStorageDirectory() +
                        File.separator + txtApkFileName.getText().toString());
            } catch (IllegalArgumentException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IllegalAccessException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (InvocationTargetException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } // install package
                  break;

              case R.id.btnUninstall:
                  // InstallUninstall.Uninstall(txtPackageName.getText().toString());
            try {
                am.uninstallPackage(txtPackageName.getText().toString());
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                logError(e);
            } catch (IllegalAccessException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                logError(e);
            } catch (InvocationTargetException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                logError(e);
            }
                  break;
           }    
    }
} 
```

2.  在 /src 中创建包*com.example.instuninsthelper*。我在那里添加了 ApplicationManager.java 和 OnInstalledPackage.java 文件
3.  在 ApplicationManager 类中插入以下代码：

```
 private OnDeletedPackage onDeletedPackage;
class PackageDeleteObserver extends IPackageDeleteObserver.Stub { 

        public void packageDeleted(boolean succeeded) throws RemoteException {
            if (onDeletedPackage != null) {
                onDeletedPackage.packageDeleted(succeeded);
            }
        }

    } 
```

4.  创建，在相同的*com.example.instuninsthelper*下使用以下代码打包文件 OnDeletedPackage.java：

```
 package com.example.instuninsthelper;
public interface OnDeletedPackage {
    public void packageDeleted(boolean succeeded);
} 
```

5.  在 android.content.pm 包中（不应更改命名空间）我修改了 IPackageDeleteObserver.java，结果如下：

```
 package android.content.pm;

public interface IPackageDeleteObserver extends android.os.IInterface {

    public abstract static class Stub extends android.os.Binder implements android.content.pm.IPackageDeleteObserver {
        public Stub() {
            throw new RuntimeException("Stub!");
        }

        public static android.content.pm.IPackageDeleteObserver asInterface(android.os.IBinder obj) {
            throw new RuntimeException("Stub!");
        }

        public android.os.IBinder asBinder() {
            throw new RuntimeException("Stub!");
        }

        public boolean onTransact(int code, android.os.Parcel data, android.os.Parcel reply, int flags)
                throws android.os.RemoteException {
            throw new RuntimeException("Stub!");
        }
    }

    public abstract void packageDeleted(boolean succeeded)
            throws android.os.RemoteException;
} 
```

6.  在 Eclipse 中构建应用程序并将其部署到模拟器
7.  在模拟器中：主页按钮>设置>应用程序> ...卸载应用程序（因为它没有安装在/system/app中，我们只需要生成apk文件）
8.  执行以下操作来启动模拟器（以便我们可以在 /system/app 中写入；我使用的其他解决方案是生成一个自定义 ROM，此应用程序包含在 /system/app 中）：
    *   从这里下载 su 文件[http://forum.xda-developers.com/showthread.php?t=682828http://forum.xda-developers.com/showthread.php?t=682828](http://forum.xda-developers.com/showthread.php?t=682828http://forum.xda-developers.com/showthread.php?t=682828)。将其重命名为 su.zip
    *   然后从控制台： * adb shell mount -o rw,remount -t yaffs2 /dev/block/mtdblock03 /system * adb push su.zip /system/xbin/su * adb shell chmod 06755 /system * adb shell chmod 06755 /系统/xbin/su
9.  从控制台，进入项目的 /bin 目录，然后输入： * adb push .apk /system/app
10.  最后，总是从控制台输入： * adb shell am start -n com.example.silentinstuninst/com.example.silentinstuninst.MainActivity
11.  请享用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T09:56:13.327

不知道，只是一个想法：

我认为您正在编写标准，而不是执行命令或通过其输入向进程提供额外数据。我认为应该是：

```
Runtime.getRuntime().exec("pm install /mnt/sdcard/HelloAndroid.apk\n"); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-25T05:38:51.687

在`/system/app`目录中安装本质上与需要 root 相同。

假设您有 root，请查看[RootTools](http://code.google.com/p/roottools/)。然后你可以这样做：

```
if (RootTools.isAccessGiven()) {
    CommandCapture command = new CommandCapture(0, "pm install " + PATH_TO_APK);
    RootTools.getShell(true).add(command).waitForFinish();
} 
```

请注意，这`waitForFinish()`是一个阻塞调用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T09:34:51.373

好吧，您也可以直接使用 PackageManager 执行此操作（需要 root 访问权限）：

*   使用具有公开接口的 platform-sdk 创建一个应用程序（创建或下载它，并配置 eclipse）
*   在应用程序中直接调用允许静默安装/删除的隐藏 API 函数。
*   通过将 APK 复制到 /system/app（需要 root），将 APK 作为系统应用安装在您的设备上

看到这个： http: [//forum.xda-developers.com/showthread.php?t=1711653](http://forum.xda-developers.com/showthread.php?t=1711653)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-07T23:34:11.090

> Runtime.getRuntime().exec("pm install /mnt/sdcard/HelloAndroid.apk\n");

这对我有用，尽管还需要做两个额外的细节：

1.  在 AndroidManifest.xml 中添加 **android:sharedUserId="android.uid.system" 。**

2.  使用系统密钥对 apk 进行签名。

    但是这种方式似乎无法判断是否安装成功，所以我稍后会尝试@Ginger的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-19T11:49:50.533

对于所有仍然有问题的人：您将需要一个有根设备并使用

```
Process result = Runtime.getRuntime().exec("pm install -r -d MyApp.apk /system/app") 
```

如果您收到结果代码 9（错误代码 9），您需要从设备中删除您的 apk 并将其推回（推送而不是安装！）。

转到设备外壳并推送 apk

```
launcher=MyApp.apk
$adb shell su -c "mount -o remount,rw -t rfs /dev/stl5 /system"
$adb push $launcher /sdcard/$launcher
$adb shell su -c "chmod 644 /system/app/$launcher" 
```

现在您可以使用 pm install 而不会出现错误。希望它会帮助某人。

# php - 我想检测从下拉列表中选择的值，然后将其传递给页面 url 并重新加载

> ID：14871573
> 
> 赞同：0
> 
> 时间：2013-02-14T09:29:50.920
> 
> 标签：php, javascript

我有一些 javascript 按字母顺序 az 或 za 对我的 ul 进行排序。它在第一页上工作正常，但如果有超过一页，它会忽略第 2 页上的列表等。

因此，我不想使用 javascript 对 li 进行排序，而是想将选择传递回页面的查询并重新加载

这是我的脚本，现在大部分都是多余的。

```
var select = document.getElementById('organise');

        $('#organise').change(function() {

            if(select.value === 'A') {

                $('.recipeTable li').sortElements(function(a,b){

                    var aText = $.text([a]);
                    var bText = $.text([b]);

                    return aText.toLowerCase() > bText.toLowerCase() ? 1 : -1;
                });

            } else {

                $('.recipeTable li').sortElements(function(a,b){

                    var aText = $.text([a]);
                    var bText = $.text([b]);

                    return aText.toLowerCase() > bText.toLowerCase() ? -1 : 1;
                });

            }

        }); 
```

所以我想检测选定的下拉值（A 或 Z）并将其传递到 url 并重新加载。我被困住了;-？

富有的 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:04:23.070

我不确定这是解决问题的最佳方法，也许您应该详细说明哪些内容不适用于您的分页。无论如何，您可以通过执行以下操作来实现您需要做的事情（代码注释中的解释）：

```
var queryString = {};

// Get the previous query string with a little help from PHP
// this shouldn't be a problem since you are already using PHP
// for your project.
queryString = <?php json_encode( $_GET ); ?>;

$('#organise').change( function() {

    // Set the sort property of the object to the value of the select.
    queryString.sort = $(this).val();

    // jQuery will help you serialise the JSON object back to
    // a perfectly valid query string (you may want to escape
    // characters)
    newQueryString = $.param( queryString );

    // Append the new query string
    window.location = newQueryString;

}); 
```

此功能将正确检查您是否已经有任何查询字符串并保留它；此外，如果用户多次更改选择，它不会添加几个查询字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:32:37.063

您可以更改网址并传递参数

```
 document.location.href = document.location.href + "?arg=" + document.getElementById("organise").value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:46:02.280

`localstorage`如果您不想在其中显示，您可以使用它`url`

例如：

```
 function Ascending()
  {
        $('.recipeTable li').sortElements(function(a,b){
            var aText = $.text([a]);
            var bText = $.text([b]);
            return aText.toLowerCase() > bText.toLowerCase() ? 1 : -1;
        });
  }
  function Descending()
  {
        $('.recipeTable li').sortElements(function(a,b){
            var aText = $.text([a]);
            var bText = $.text([b]);
            return aText.toLowerCase() > bText.toLowerCase() ? -1 : 1;
        });
  }

  if(localStorage.order=='A')
  { 
        return Ascending();
  }
  else
  {
       return Descending();
  }
  var select=document.getElementById('organise');
  $('#organise').change(function() {

        if(select.value === 'A') {
            localStorage.order=='A';
            return Ascending();

        } else {
            localStorage.order=='Z';
            return Descending();

        }

    }); 
```

有关更多信息，请`localStorage`参阅[http://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp)

# c++ - 为什么我不能对 C 中的关键字使用#define？

> ID：14871576
> 
> 赞同：2
> 
> 时间：2013-02-14T09:29:52.893
> 
> 标签：c++, c, macros, macrodef

我正在尝试在 C++ 中使用以下代码。有人能告诉我为什么它显示错误吗？

```
#define  def namespace;
using def std;
int main(){
return 0;
} 
```

虽然以下代码工作正常

```
#define  def namespace std;
using def;
int main(){
return 0;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-14T09:31:17.503

这是因为嵌入的分号：

```
#define  def namespace;
                      ^
                      |
                     WHOA! 
```

请注意，`#define`它本身不需要分号来终止定义，因此如果您使用分号，它将成为文本的一部分，将插入到使用宏的任何位置。

预处理后，第一个示例将把该`using`行变成：

```
using namespace; std; 
```

这显然有句法问题。

解决方法是删除`#define`行中的尾随分号，如下所示：

```
#define def namespace 
```

您应该弄清楚如何使用编译器读取预处理代码，这在理顺宏引起的混乱时总是很有指导意义的。

# facebook - MVC3 Web 项目错误：“试图以访问权限 10.10.0.1:3128 禁止的方式访问套接字”

> ID：14871577
> 
> 赞同：3
> 
> 时间：2013-02-14T09:30:00.033
> 
> 标签：facebook, asp.net-mvc-3, azure

我将我的 MVC3 Web 项目发布到 Azure。当我尝试使用 fb 进行授权时，出现以下错误。

附加信息：

*   callbackUrl = [http://site.azurewebsites.net/Facebook/AddSocialAccount](http://site.azurewebsites.net/Facebook/AddSocialAccount)
*   аauthenticateUrl = [https://graph.facebook.com/oauth/authorize?client_id=](https://graph.facebook.com/oauth/authorize?client_id=) *** &response_type=code&redirect_uri=http%3A%2F%2Fsite.azurewebsites.net%2FFacebook%2FAddSocialAccount&scope=publish_stream%2Cemail%2Cuser_birthday

因此应用程序在 fb 上授权，转到 AddSocialAccount 操作并在字符串中失败：

```
var profile = this.Provider.GetUserProfile(code); 
```

去哪里：

```
protected override Task<AccessGrant> PostForAccessGrantAsync(string accessTokenUrl, NameValueCollection request)
    {
        return this.RestTemplate.PostForObjectAsync<NameValueCollection>(accessTokenUrl, request)
            .ContinueWith<AccessGrant>(task =>
            {
                string expires = task.Result["expires"];
                return new AccessGrant(task.Result["access_token"], null, null, expires != null ? new Nullable<int>(Int32.Parse(expires)) : null);
            });
    } 
```

并且有错误的字符串是

```
string expires = task.Result["expires"]; 
```

错误：

```
Server Error in '/' Application.
enter code here
An attempt was made to access a socket in a way forbidden by its access permissions 10.10.0.1:3128
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 
Exception Details: System.Net.Sockets.SocketException: An attempt was made to access a socket in a way forbidden by its access permissions 10.10.0.1:3128
Source Error: 
An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.
Stack Trace: 
[SocketException (0x271d): An attempt was made to access a socket in a way forbidden by its access permissions 10.10.0.1:3128]
System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult) +6462061
System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Exception& exception) +271
[WebException: Unable to connect to the remote server]
System.Net.HttpWebRequest.EndGetRequestStream(IAsyncResult asyncResult, TransportContext& context) +2233126
System.Net.HttpWebRequest.EndGetRequestStream(IAsyncResult asyncResult) +14
Spring.Http.Client.WebClientHttpRequest.ExecuteRequestCallback(IAsyncResult result) in f:\bamboo-home\xml-data\build-dir\SPRNETREST-RELEASE-JOB1\src\Spring.Rest\Http\Client\WebClientHttpRequest.cs:246
[AggregateException: One or more errors occurred.]
System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions) +3548265
System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification) +73
System.Threading.Tasks.Task`1.get_Result() +10486829
Project.Social.Facebook.Api.Impl.FacebookOAuth2Template.<PostForAccessGrantAsync>b__0(Task`1 task) in D:\Code\Poll\Project.Social\Facebook\Api\Impl\FacebookOAuth2Template.cs:23
System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke() +81
System.Threading.Tasks.Task.Execute() +49

[AggregateException: One or more errors occurred.]   
System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions) +3548265
System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification) +73
System.Threading.Tasks.Task`1.get_Result() +10486829
Project.Social.Base.OAuth2SocialProvider`4.SetAccessToken(String code) in    D:\Code\Poll\Project.Social\Base\OAuth2SocialProvider.cs:49
Project.Social.Base.OAuth2SocialProvider`4.GetServiceClient(String oauth_verifier) in D:\Code\Poll\Project.Social\Base\OAuth2SocialProvider.cs:66
Project.Social.Facebook.FacebookProvider.GetUserProfile(String oauth_verifier) in D:\Code\Poll\Project.Social\Facebook\FacebookProvider.cs:26   Project.Areas.FrontEnd.Controllers.ControllersBase.OAuthControllerBase`3.AddSocialAccount(String code, String oauth_verifier) in D:\Code\Poll\Project\Areas\FrontEnd\Controllers\ControllersBase\OAuthControllerBase.cs:112
lambda_method(Closure , ControllerBase , Object[] ) +147
System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +14
System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +214
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +55
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +253
System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +21
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +253
System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +21
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +191
System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +324
System.Web.Mvc.Controller.ExecuteCore() +106
System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +91
System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +34
System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +19
System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +10
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +48
System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9629708
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

当我将本地计算机与 Azure 的 connectionString 一起使用时，我没有收到此错误（我更改了 fb 上的域和 url）。感谢您的任何想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:25:02.520

我解决了这个问题。我的 web.config 中有默认代理。

```
<system.net>
<defaultProxy>
  <proxy usesystemdefault="True" proxyaddress="http://10.10.0.1:3128" bypassonlocal="True" />
</defaultProxy> 
```

我删除了它。并且授权工作正常。

# nhibernate - 如何映射 Nhibernate 集合

> ID：14871591
> 
> 赞同：1
> 
> 时间：2013-02-14T09:30:36.370
> 
> 标签：nhibernate, collections

我有`customer`和`BankAccount`桌子。`CustomerID`是`BankAccount`表中的外键。在这里，我们必须处理一对多的关系。我已经完成了`CustomerInfo`和的映射`BankAccountInfo`。我已附上问题帖子。

在这里，我们要使用`Iesi.collections`. 有没有人知道如何在 Nhibernate 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:40:41.710

要进行*集合*映射，请阅读本文档：[第 6 章。集合映射](http://nhforge.org/doc/nh/en/index.html#collections)

如果您将使用`Iesi`集合，最合适的可能是`ISet<>`，它旨在仅允许插入 unqiue 值：

```
public class Customer
{
  public virtual Iesi.Collections.Generic.ISet<BankAccount> BankAccounts { get; set; }
} 
```

映射可能是这样的

```
<set name="BankAccounts" inverse="true" lazy="true" table="BankAccount" 
   cascade="all" batch-size="25" >
 <key column="CustomerId" />
 <one-to-many class="BankAccount" />
</set> 
```

注意：这个映射有一些*冗余*属性，可以帮助进行更智能的加载。例如，批量大小将避免 1+N 负载，而执行 1 + N/25...级联将隐含地解决添加项目的持久性...在 doc 中阅读更多内容。

完整的 ISet 描述：[http ://ayende.com/blog/3943/nhibernate-mapping-set](http://ayende.com/blog/3943/nhibernate-mapping-set)

# apache - mod_deflate disabled：资产仍在压缩中

> ID：14871592
> 
> 赞同：2
> 
> 时间：2013-02-14T09:30:38.173
> 
> 标签：apache, codeigniter, apache2

当我执行时：

```
sudo a2dismod deflate
sudo service apache2 restart 
```

并在 Chrome Web 工具中刷新并检查我网站的响应标头，我的资产（css 和 js）仍被标记为`Content-Encoding : gzip`. Y-Slow 还确认除了实际的 html 文档之外的所有资产仍然被压缩。

我在 CodeIgniter 的配置文件中关闭了输出压缩：

```
$config['compress_output'] = FALSE; 
```

对于它的价值......尽管禁用了 deflate 模块，我认为这并不重要，我的`/etc/apache2/mods-available/deflate.conf`文件是系统默认值：

```
<IfModule mod_deflate.c>
          AddOutputFilterByType DEFLATE text/html text/plain text/xml
          AddOutputFilterByType DEFLATE text/css
          AddOutputFilterByType DEFLATE application/x-javascript application/javascript application/ecmascript
          AddOutputFilterByType DEFLATE application/rss+xml
</IfModule> 
```

我正在运行 Ubuntu 12.04。还有什么可能导致我的资产被压缩？

我的`.htaccess`文件没有放气命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:52:16.767

您可以尝试以下方法。

要禁用指定文件的 gzip，请尝试以下操作：

```
SetEnvIfNoCase Request_URI YOUR_FILE_NAME\.php$ no-gzip dont-vary 
```

在你的`htaccess`文件中。**`change YOUR_FILE_NAME\.PHP$ to what you need`**.

并完全禁用 gzip 试试这个：

```
SetEnv no-gzip dont-vary 
```

在你的`htaccess`文件中。

# .net - 具有数据库优先模型的实体框架

> ID：14871599
> 
> 赞同：0
> 
> 时间：2013-02-14T09:30:56.157
> 
> 标签：.net, entity-framework, asp.net-mvc-4, wcf-data-services, ef-database-first

我正在使用带有数据注释的 EF 4.1 在 ASP.NET MVC 中进行开发。客户端验证按预期工作。但我有这个疑问。例如，当必填字段（例如：产品名称）从客户端到服务器变为 null 并且实体模型抛出异常时。我该如何处理这种情况？

一些附加信息是，我通过 WCF 服务层使用 EF

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:20:13.813

您也应该通过调用 model.isvalid 在服务器端/控制器上验证模型，以获取有关 MVC 服务器端验证的更多信息：

[http://msdn.microsoft.com/en-us/library/dd410404(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/dd410404(v=vs.90).aspx)

希望有帮助。

# php - 检索使用链接发布的值

> ID：14871602
> 
> 赞同：0
> 
> 时间：2013-02-14T09:31:09.053
> 
> 标签：php, html, forms, post

我正在尝试使用超链接提交表单，但它没有将值发布到下一页。这是我的代码表单：

```
<?php
$email = array('name'=>'accountno','id'=>'accountno','value'=>set_value('email'));
 ?>    

<form method="post" id = "login_form" action="/salesrep/check" name = "login_form" class="custLogin">
<fieldset style="color: #BD1313; width: 440px;">  <input type="hidden" name="submit_type" id="submit_type" value="account_only">
<br><center><label for="customerNo"><b>Customer No:</b></label>
<?  echo form_input($email);?>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="/salesrep/check" class="shopping-icon" onclick="document.login_form.submit()">Submit</a><? echo form_input($button);?>   </center>
   <p>&nbsp;</p>
           </fieldset> 
   </form> 
```

下一页的代码如下所示：

```
<?
print_array($_POST);
         die();
 ?> 
```

当我在这里使用按钮时，它成功地将值发布到下一页。但是我无法使用 onclick 事件上的超链接发布值。我在哪里犯错？当我已经在文本框中插入值时，为什么我得到空数组。？？或者有什么办法我可以使用链接发布值并在下一页检索它们？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:05:26.050

*真正的*问题是您首先尝试使用链接和一些 JavaScript 来提交表单。不要这样做。按钮通知用户他们将提交表单。当它们处于*表单模式*时，它们将显示在屏幕阅读器中（带有某些 JavaScript 的链接不会）。他们“只是工作”。

如果您坚持使用链接和一些 JavaScript，那么您的代码不起作用的原因是 JavaScript 运行，表单开始提交，然后链接被跟踪并且向页面发出 GET 请求。

通常你可以调用[`preventDefault`](https://developer.mozilla.org/en/docs/DOM/event.preventDefault)事件来阻止它，但你使用的是旧式的内在事件属性，所以你需要`return false;`从那里开始。

推荐阅读：[渐进式增强](http://en.wikipedia.org/wiki/Progressive_enhancement)和[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)

# wordpress - 类别分页在自定义帖子类型中不起作用

> ID：14871606
> 
> 赞同：0
> 
> 时间：2013-02-14T09:31:26.703
> 
> 标签：wordpress, pagination, custom-post-type

我在分页结果中显示我的类别页面时遇到问题

我有一个名为“视频”的自定义帖子类型

我把这种类型的所有帖子放在一个类别名称“汽车视频”中

我使用模板页面 category-9.php' 作为该类别“汽车视频”的 id 是“9”

我将此代码放在 category-9.php

```
<?php
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
?>
    <?php query_posts( $query_string . '&post_type=videos&posts_per_page=10&paged=' . $paged ); ?>
    <?php if ( have_posts() ) : ?>
        <?php
        /* Start the Loop */
        while ( have_posts() ) : the_post();
            /* Include the post format-specific template for the content. If you want to
             * this in a child theme then include a file called called content-___.php
             * (where ___ is the post format) and that will be used instead.
             */
            get_template_part( 'content', 'videos' );

        endwhile;

        // twentytwelve_content_nav( 'nav-below' );
        ?>
    <?php paging(); ?>
    <?php else : ?>
        <?php get_template_part( 'content', 'none' ); ?>
    <?php endif; ?> 
```

我的第一页“sitename.com/blog/category/cat-videos/”工作正常，但我的这些页面无法正常工作

'sitename.com/blog/category/cat-videos/page/1'

'sitename.com/blog/category/cat-videos/page/2'

ETC..

它给了我 404.php 页面

这是自定义帖子注册

```
$post_type_args = array(
'label' => 'Videos',
'labels' => array(
    'name' => 'Videos',
    'singular_name' => 'Video',
    'menu_name' => 'Videos'
),
'public' => true,
'has_archive' => true,
'hierarchical' => true,
'supports' => array('title','author','thumbnail','comments'),
'rewrite' => array('slug' => 'videos'),
'taxonomies' => array('category','post_tag')

);

register_post_type('videos',$post_type_args); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-29T17:49:44.690

我对你的有一些问题，我找到了将这段代码放入 function.php 的解决方案。一切正常

```
 function fix_category_pagination($qs){
    if(isset($qs['category_name']) && isset($qs['paged'])){
        $qs['post_type'] = get_post_types($args = array(
            'public'   => true,
            '_builtin' => false
        ));
        array_push($qs['post_type'],'post');
    }
    return $qs;
}
add_filter('request', 'fix_category_pagination'); 
```

# image - Sinatra 图像显示问题

> ID：14871610
> 
> 赞同：0
> 
> 时间：2013-02-14T09:31:44.963
> 
> 标签：image, sinatra, haml, thin

这是我的视图代码（haml）的一部分：

```
%link{rel:'stylesheet', href:'/screen.css', type:'text/css', media:'screen'}
%img{scr:'/tile.jpg'} 
```

./public文件*夹*包含文件 *screen.css*和*tile.jpg*

 *问题是图像没有出现在页面上。同时css文件成功应用

我也尝试将*tile.jpg*放入*./public/images*但没有任何改变。

Webserver - 瘦的 sinatra 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:37:23.123

您可能想尝试一下[Sinatra 静态资产 gem](https://rubygems.org/gems/sinatra-static-assets)。出于同样的原因，我开始使用它，这意味着我不必记住 HTML 属性（尽管仍然有点），它也应该减少拼写错误。*

# php - 分页不显示在网页上

> ID：14871611
> 
> 赞同：0
> 
> 时间：2013-02-14T09:31:44.180
> 
> 标签：php, codeigniter, pagination

大家好，我是 CodeIgniter 和 PHP 的新手。

我正在尝试在我的一个页面上创建分页，但由于某种原因，我的代码没有在页面上显示分页。

视图.php

```
 </head>
   <body>

            <h1>Answer</h1>
            <?php if (isset($records)) : foreach($records as $row) : ?>

      <div = 'container'>

          <?php 
          if (isset($pagination))
            {
            echo $pagination;
            } 
           ?>

          <ul>
           <h1><?php  echo  $row->question; ?></h1>
           <li><?php  echo  $row->answer1; ?></li>
             <li><?php  echo  $row->answer2; ?></li>
             <li><?php  echo  $row->answer3; ?></li>
             <li><?php  echo  $row->answer4; ?></li>
             <li><?php  echo  $row->answer5; ?></li>
             <li><?php  echo  $row->answer6; ?></li>
          <ul>

       </div>

          <?php endforeach; ?>
          <?php else : ?>
          <h2>no records were returned</h2>
          <?php endif; ?>
    </body>
</html> 
```

控制.php

```
<?php

class Survey extends CI_Controller{

function index()
{
          $data = array(
         'question' => $this->input->post('question'),
          'answer1' => $this->input->post('answer1'),
          'answer2' => $this->input->post('answer2'),
          'answer3' => $this->input->post('answer3'),
          'answer4' => $this->input->post('answer4'),
          'answer5' => $this->input->post('answer5'),
          'answer6' => $this->input->post('answer6'),
           );

           if($query = $this->membership_model->get_records())
           {
               $data['records'] = $query;
           }

           $this->load->view('survey_view', $data);

           }

//pagination
        function page()
           {

            $this->load->library('pagination');

            $config['base_url'] = 'http://localhost/admin/index.php/survey/index';
            $config['total_rows'] = $this->db->get('save_survey')->num_rows();
            $config['per_page'] = 1;
            $config['num_links'] =10;

            $this->pagination->initialize($config);

            $data['records'] = $this->db-get('save_survey', $config['per_page'], $this->uri->segment(3));
            $data['pagination'] = $this->pagination->create_links();
            $this->load->view('survey_view', $data);

          }
    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:45:39.720

该函数`page()`永远不会被调用。

当您导航到控制器时，`index()`将触发默认功能。并且在该函数中没有对`page();`方法的调用。

我以前从未使用过 CI 的分页内容，但是要将您的分页代码 ( `page()`) 包含在`index()`方法中，您可以这样做（我从 page 方法中删除了视图）：

```
class Survay extends CI_Controller{
    function index() {
        $data = array(
            'question' => $this->input->post('question'),
            'answer1' => $this->input->post('answer1'),
            'answer2' => $this->input->post('answer2'),
            'answer3' => $this->input->post('answer3'),
            'answer4' => $this->input->post('answer4'),
            'answer5' => $this->input->post('answer5'),
            'answer6' => $this->input->post('answer6'),
        );

        if($query = $this->membership_model->get_records()) {
            $data['records'] = $query;
        }

        //call your page method and set the pagination variables to this object
        $this->page();

        //show the view
        $this->load->view('survay_view', $data);
    }

    //pagination ONLY sets the pagination variables
    function page() {
        $this->load->library('pagination');

        $config['base_url'] = 'http://localhost/admin/index.php/survay/index';
        $config['total_rows'] = $this->db->get('save_survay')->num_rows();
        $config['per_page'] = 1;
        $config['num_links'] = 10;

        $this->pagination->initialize($config);

        $data['records'] = $this->db-get('save_survay', $config['per_page'], $this->uri->segment(3));
        $data['pagination'] = $this->pagination->create_links();
    }
} 
```

# java - Guava：从包含变量的对象列表中获取变量列表

> ID：14871615
> 
> 赞同：1
> 
> 时间：2013-02-14T09:31:57.970
> 
> 标签：java, list, guava

想法：

我有一个对象

```
public class Book(){
  private String name;
  private Integer nbOfPage;
  public Book()
  ...
} 
```

我得到了这个对象的列表

```
List<Book> books = new ArrayList<Book>(); 
```

现在我想知道是否在番石榴或其他图书馆中，是否有一种快速的方法可以从我得到的所有书籍中获取所有不同名称的列表，我可以做些什么：

```
List<String> names = new ArrayList<String>();
for (Book aBook : books){
   if (!names.contains(aBook.getName()){
        names.add(aBook.getName());
   }
} 
```

我觉得这种方式有点“重”，我的书单可以有200到1200本书。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:33:39.413

使用番石榴的[`Multimaps.index`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Multimaps.html#index%28java.lang.Iterable,%20com.google.common.base.Function%29). 它完全符合您的预期。

```
List<Book> books = ...

Function<Book,String> bookToName = new Function<Book,String>() {
  String apply(Book b) { return b.getName(); }
}

Multimap<String,Book> booksByName = Multimaps.index(books, bookToName); 
```

然后，玩弄你的`Multimap`，就像`booksByName.keys()`你只需要名字一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:41:03.973

为书名集合使用一个[Set （如HashSet），这样你就不必每次都检查你是否已经有了当前的书名。](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)您可以在恒定时间内将元素插入 HashSet，并且不会有重复项。确保你有一个好的 hashCode() 方法和一个对应的 equals，请参阅：[Java 中覆盖 equals 和 hashCode 时应该考虑哪些问题？](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)

不存在更快的解决方案，因为您必须至少遍历所有书籍一次。

# visual-studio-2010 - VS2010 操作无法完成

> ID：14871616
> 
> 赞同：2
> 
> 时间：2013-02-14T09:32:01.190
> 
> 标签：visual-studio-2010

在 vs2010 中打开样式表时出现以下错误：

> 操作无法完成

我试过[了](https://stackoverflow.com/questions/6638903/vs2010-editing-stylesheet-the-operation-could-not-be-completed-unspecified-er)，我重新安装了 VS2010，但它对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:53:14.347

[正如这里](https://stackoverflow.com/a/7272955/1154184)提到的：

> 转到工具 -> 扩展管理器 -> 在线库并搜索/安装“Microsoft Visual Studio 2010 的 Web 标准更新”

# c# - 在 Windows 中单击粘贴时执行应用程序（资源管理器）

> ID：14871617
> 
> 赞同：0
> 
> 时间：2013-02-14T09:32:02.950
> 
> 标签：c#

我有一个应用程序，它基本上是一个复印机，但它可以做更多其他事情。我不能过去的是：

我想在用户选择几个文件（在资源管理器、桌面或 Windows 中的任何位置）时打开应用程序，并且所有这些选定的文件应该在缓存或类似的东西中，以便它在列表或其他东西中。

这是由 Windows 完成的，所以我不必这样做。当用户选择了他想要选择的所有文件并复制它时，当用户将这些文件粘贴到其他地方时，我该如何执行应用程序？让它自动打开？

我有这个：

```
[DllImport("User32.dll")]
protected static extern int
SetClipboardViewer(int hWndNewViewer);
[DllImport("User32.dll", CharSet = CharSet.Auto)]
public static extern bool
ChangeClipboardChain(IntPtr hWndRemove,
IntPtr hWndNewNext);
[DllImport("user32.dll", CharSet = CharSet.Auto)]
public static extern int SendMessage(IntPtr hwnd, int wMsg,
IntPtr wParam,
IntPtr lParam);

IntPtr nextClipboardViewer;

protected override void WndProc(ref System.Windows.Forms.Message m)
{
    // Defined in winuser.h
    const int WM_DRAWCLIPBOARD = 0x308;
    const int WM_CHANGECBCHAIN = 0x030D;

    switch (m.Msg)
    {
        case WM_DRAWCLIPBOARD:
            DisplayClipboardData();
            SendMessage(nextClipboardViewer, m.Msg, m.WParam, m.LParam);
            break;

        case WM_CHANGECBCHAIN:
            if (m.WParam == nextClipboardViewer)
            {
                nextClipboardViewer = m.LParam;
            }
            else
            {
                SendMessage(nextClipboardViewer, m.Msg, m.WParam,
                m.LParam);
            }
            break;

        default:
            base.WndProc(ref m);
            break;
    }
}

void DisplayClipboardData()
{
    try
    {
        IDataObject iData = new DataObject();
        iData = Clipboard.GetDataObject();
        if (iData.GetDataPresent(DataFormats.Rtf))
        {
            richTextBox1.Rtf = (string)iData.GetData(DataFormats.Rtf);
        }
        else if (iData.GetDataPresent(DataFormats.Text))
        {
            richTextBox1.Text = (string)iData.GetData(DataFormats.Text);
        }
        else
        {
            richTextBox1.Text = "[Clipboard data is not RTF or ASCII Text]";
        }

    }
    catch (Exception e)
    {
        MessageBox.Show(e.ToString());
    }
} 
```

但这仅在选择文本时有效。如何显示每个文件的文件目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:45:06.503

如果要对复制（Ctrl+C）或剪切（Ctrl+V）操作而不是粘贴（Ctrl+V）操作做出反应，其实还是比较简单的。
您所要做的就是监视剪贴板，因为这就是这些信息所在的地方。您必须收听的数据格式是`FileDrop`.

不幸的是，您将不得不使用 WinAPI 来监听剪贴板的变化。

当您收到此类更改时，您可以检索复制文件的列表，如下所示：

```
void DisplayClipboardData()
{
    if(!Clipboard.ContainsFileDropList())
        return;

    var fileList = Clipboard.GetFileDropList();
    // Do something with the file list.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:59:29.700

我认为你必须做两件事：

[1) 使用SetWindowsHookEx](http://www.pinvoke.net/default.aspx/user32.setwindowshookex)连接到 windows 键盘和鼠标事件，这是一个 winform 应用程序中[的示例](http://www.codeproject.com/Articles/14485/Low-level-Windows-API-hooks-from-C-to-stop-unwante)

2）[检查剪贴板的内容](http://msdn.microsoft.com/en-us/library/c2thcsx4%28v=vs.100%29.aspx)并用它们做你需要的

这种方法的主要内容是，您将侦听键盘事件的钩子必须与线程相关联，因此您的应用程序必须已经加载并保持驻留在内存中以便您接收事件。您可以创建一个有限的 gui，并可能[在系统树中有一个图标](http://www.codeproject.com/Articles/27599/Minimize-window-to-system-tray)。

**编辑**：Windows 钩子上的[MSDN 概述](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644959%28v=vs.85%29.aspx#wh_keyboard_llhook)

# php - 如何从数组中打印我的值

> ID：14871620
> 
> 赞同：1
> 
> 时间：2013-02-14T09:32:15.097
> 
> 标签：php, arrays

如果它们之间的时间少于 20 分钟，我如何从数组中打印出我的值？

```
This is my foreach for myArray:

     foreach ($cooltransactions as $key=>$value)
{
$array[$key] = array('cardid' => $cooltransactions[$key]['cardid'],'created' => strtotime($cooltransactions[$key]['created']));     
 }
$newArray=array();
$i=0;
foreach($array as $k=>$v){
       $id=$array[$k]['cardid'];
       $time=$array[$k]['created'];
       foreach($array as $k1=>$v1){
          if($k<$k1){
             if($array[$k1]['cardid']==$id){
                 if(compare($time,$array[$k1]['created'])){
                     $newArray[$i]['cardid']=$id;
                     $newArray[$i]['created']=date('d-m-y H:i:s', $time['created']);
                     $i++;
                 }
             }
          }
       }
    }

  function compare($firsttime, $secondtime){
     $interval = $firsttime-$secondtime;
     $dif=round(abs($interval) / 60);
     if ($dif < 2 || $dif < -2 ) {
        return true;
     }
  } 
```

print_r($newArray);

这就是我得到的：

```
Array ( 
[0] => Array ( [cardid] => 56324  [created] => 01-01-70 01:00:00)
[1] => Array ( [cardid] => 56324  [created] => 01-01-70 01:00:00) 
[2] => Array ( [cardid] => 21352 [created] => 01-01-70 01:00:00) 
[3] => Array ( [cardid] => 21352 [created] => 01-01-70 01:00:00)
) 
```

但这是我想要的输出：

```
Array  ( 
    [1] => Array ( [Cardid] => 21352 [created] => 02-02-13 11:11:41 ) 
    [2] => Array ( [Cardid] => 21352 [created] => 02-02-13 10:59:48 )     
  ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:39:20.950

似乎您希望根据条件拆分数组，因此您可以使用 foreach 并使用第一个变量设置一个临时变量并对其进行迭代，然后在 if 语句的帮助下使用临时值检查当前节点的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:39:23.130

使用此代码：

```
 $cooltransactions=Array ( 
    Array ( 'Cardid' => 56324, 'created' => '11-02-13 15:36:32' ),
    Array ( 'Cardid' => 56324, 'created' => '11-02-13 15:08:51' ),         
    Array ( 'Cardid' => 42683, 'created' => '10-02-13 13:42:24' ), 
    Array ( 'Cardid' => 21352, 'created' => '02-02-13 11:11:41' ), 
    Array ( 'Cardid' => 21352, 'created' => '02-02-13 11:11:41' ),
    Array ( 'Cardid' => 74124, 'created' => '02-02-13 11:02:53' ), 
    Array ( 'Cardid' => 21352, 'created' => '02-02-13 10:59:48' ) 
 );

foreach ($cooltransactions as $key=>$value)
{
$array[$key] = array('Cardid' => $cooltransactions[$key]['Cardid'],
                     'created' => strtotime($cooltransactions[$key]['created'])
                    );     
 }
$newArray=array();
$i=0;
foreach($array as $k=>$v){
    if(isset($array[$k])){
       $id=$array[$k]['Cardid'];
       $time=$array[$k]['created'];
        echo $time.'<br>';
       foreach($array as $k1=>$v1){
          if($k<$k1){
             if($array[$k1]['Cardid']==$id){
                 echo '2 fields with the same id have been detected: id='.$id.'</br>'; 
                 if(compare($time,$array[$k1]['created'])){
                     $newArray[$i]['Cardid']=$id;
                     $newArray[$i]['created']=date("Y-m-d h:i:s", $array[$k1]['created']);
                     unset($array[$k1]);
                     $i++;
                 }
             }
          }
       }
    }
 }
echo '<br>FINAL ARRAY:<br>';
var_dump($newArray);

  function compare($firsttime, $secondtime){
     $interval = $firsttime-$secondtime;
     $dif=round(abs($interval) / 60);
     echo 'This fields have the same id: the difference in minutes is: '.$dif.' </br>';
     if ($dif < 20 || $dif < -20 ) {
        return true;
     }
  } 
```

1297629392 已检测到 2 个 id 相同的字段：id=56324 此字段具有相同 id：分钟差异为：28 1297627731 1266086544 1013616701 已检测到 2 个具有相同 id 的字段：id=21352 此字段具有相同 id : 分钟差是: 0 检测到 2 个 id 相同的字段: id=21352 这个字段有相同 id: 分钟差是: 12 1013616173

最终数组：数组（2）{[0]=>数组（2）{[“Cardid”]=> int（21352）[“created”]=>字符串（19）“2002-02-13 11:11： 41" } [1]=> array(2) { ["Cardid"]=> int(21352) ["created"]=> string(19) "2002-02-13 10:59:48" } }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:26:33.120

```
$arr=Array ( 
    Array ( 'Cardid' => 56324, 'created' => '11-02-13 15:36:32' ),
    Array ( 'Cardid' => 56324, 'created' => '11-02-13 15:08:51' ),         
    Array ( 'Cardid' => 42683, 'created' => '10-02-13 13:42:24' ), 
    Array ( 'Cardid' => 21352, 'created' => '02-02-13 11:11:41' ), 
    Array ( 'Cardid' => 74124, 'created' => '02-02-13 11:02:53' ), 
    Array ( 'Cardid' => 21352, 'created' => '02-02-13 10:59:48' ) 
 );

function filter_rows($rows)
{
   $cards=array();
   foreach($rows as $row)
   {
     $cards[$row['Cardid']][]=$row['created'];
   }

   $res=array();

   foreach($cards as $cardid=>$card_trns)
   {
      for($i=1,$ms=count($card_trns);$i<$ms;$i++)
      {
        $d1=new DateTime($card_trns[$i]);
        $d0=new DateTime($card_trns[$i-1]);
        $di=$d1->diff($d0,true);
        $diff_min=$di->format('%i');
        if($diff_min<=20)
        {
           $res[]=array('Cardid'=>$cardid, 'created'=>$card_trns[$i]);
           $res[]=array('Cardid'=>$cardid, 'created'=>$card_trns[$i-1]);
        }
      }
   }
   return $res;
}

print_r(filter_rows($arr)); 
```

# eclipse - 无法运行 Eclipse

> ID：14871623
> 
> 赞同：0
> 
> 时间：2013-02-14T09:32:30.037
> 
> 标签：eclipse

今天早上，我无法运行 Eclipse Indigo，而昨天它还在工作。

我收到这条消息：

> 发生错误。查看日志文件 E:\workspaces\sim.metadata.log

我的 .log 文件显示：

```
!STACK 0
!MESSAGE An error occurred while automatically activating bundle org.eclipse.core.resources (103).
...
Caused by: java.lang.ClassFormatError: Illegal constant pool index 7436 for method signature in class file org/eclipse/core/internal/resources/MarkerManager
...
!STACK 1
java.lang.NoClassDefFoundError: org/eclipse/core/resources/IContainer
...
Caused by: org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter$TerminatingClassNotFoundException: An error occurred while automatically activating bundle org.eclipse.core.resources (103).
...
Caused by: org.osgi.framework.BundleException: Exception in org.eclipse.core.resources.ResourcesPlugin.start() of bundle org.eclipse.core.resources. 
```

`clean`我用这个参数运行了 Eclipse，但它是一样的。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:35:54.100

看起来您的 Eclipse 之前某个时候崩溃了，无法恢复工作区。

您可以删除 .metadata/.plugins/org.eclipse.core.resources/.snap 。

或者

尝试使用新的工作区。更改 \configuration.settings\org.eclipse.ui.ide.prefs 中的设置并将 SHOW_WORKSPACE_SELECTION_DIALOG 设置为 true

之后将所有项目导入您的工作区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:35:16.617

尝试重新安装 Eclipse。关于非法常量池索引的消息听起来像是一个损坏的`.class`文件。您的设置和工作区应该保持不变，但您可能需要重新安装插件（如果有）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T09:37:03.903

我想你的工作区仍然完好无损。最好和最快的选择是重新安装 eclipse 并用旧的工作区替换新的工作区。

# android - Android中带有线程的自定义ListView项目

> ID：14871624
> 
> 赞同：0
> 
> 时间：2013-02-14T09:32:32.713
> 
> 标签：android, multithreading, multiprocessing

我使用自定义列表视图适配器创建了一个自定义 ListView。我想在列表中的每个列表项中设置当前时间。列表框中的项目必须每秒更新当前时间。

MainActivity.java

```
package com.example.examapp;

import java.sql.Time;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;
import java.util.List;
import java.util.Locale;

import com.example.exambp.*;

import android.R.string;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.content.pm.LabeledIntent;
import android.content.res.Configuration;
import android.database.sqlite.SQLiteDatabase;
import android.text.format.DateFormat;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class MainActivity extends Activity {
    ListView lv;
    Activity act=this;
    List<ListViewItem> items;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        items=new ArrayList<ListViewItem>();    
        lv=(ListView)findViewById(R.id.listView1);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);

    }
    public void showData(View v)
    {
        IntentIntegrator i=new IntentIntegrator(this);
        i.initiateScan();
    }

    String[] onedata;
    public void onActivityResult(int requestCode, int resultCode, Intent intent) {
         IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
         if (scanResult != null) {
          String x=scanResult.getContents();
          EditText et=(EditText)findViewById(R.id.editText1);
          et.setText(x);                 
          addToList(x); 

         }

    }

    ListViewItem li;
    CustomListViewAdapter adapter;
    public void addToList(String str)
    {

          onedata=str.split("/");    
          li=new ListViewItem();

          li.enrollId="EnrollmentID: "+onedata[0].toString();
          li.ExamId="ExamID: "+onedata[1].toString();
          li.UserId="UserId: "+onedata[2].toString();
          li.StartedTime=onedata[3].toString();
          li.Duration=onedata[4].toString();
          li.AvailableTime="jiukjh";
          items.add(li);

          adapter=new CustomListViewAdapter(this, items);
          lv.setAdapter(adapter);

    }

} 
```

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_marginLeft="60dp"
        android:ems="10"
        android:inputType="text" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:onClick="showData"
        android:text="@string/btn_val" />

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:orientation="vertical" >
    </LinearLayout>

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView9"
        android:layout_toRightOf="@+id/linearLayout2" >
    </ListView>

    <TextView
        android:id="@+id/textView9"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/button1"
        android:text="Started Exams"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

item_row.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/txtAvailability"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="TextView"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/txtEnrollmentId"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/txtAvailability"
        android:text="TextView" />

    <TextView
        android:id="@+id/txtUserId"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/txtEnrollmentId"
        android:layout_alignBottom="@+id/txtEnrollmentId"
        android:layout_marginLeft="78dp"
        android:layout_toRightOf="@+id/txtAvailability"
        android:text="TextView" />

    <TextView
        android:id="@+id/txtExamId"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/txtEnrollmentId"
        android:text="TextView" />

    <TextView
        android:id="@+id/txtStartTime"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/txtExamId"
        android:layout_alignBottom="@+id/txtExamId"
        android:layout_alignLeft="@+id/txtUserId"
        android:text="TextView" />

</RelativeLayout> 
```

CustomListViewAdapter.java

```
package com.example.examapp;

import java.util.Date;
import java.util.List;

import com.example.exambp.*;

import android.app.Activity;  
import android.content.Context;
import android.view.LayoutInflater;  
import android.view.View;  
import android.view.ViewGroup;  
import android.widget.BaseAdapter;  
import android.widget.ImageView;  
import android.widget.ListView;
import android.widget.TextView;  

public class CustomListViewAdapter extends BaseAdapter
{  

    LayoutInflater inflater;
    List<ListViewItem> items;
    Activity act;
    public CustomListViewAdapter(Activity context, List<ListViewItem> items) {  
        super();

        this.items = items;
        this.inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        this.act=context;

    }

    @Override  
    public int getCount() {  
        // TODO Auto-generated method stub  
        return items.size();  
    }  

    @Override  
    public Object getItem(int position) {  
        // TODO Auto-generated method stub  
        return null;  
    }  

    @Override  
    public long getItemId(int position) {  
        // TODO Auto-generated method stub  
        return 0;  
    }
    View vi;   
    @Override  
    public View getView(final int position, View convertView, ViewGroup parent) {  
        // TODO Auto-generated method stub  
        ListViewItem item=items.get(position);

        vi=convertView;

        if(convertView==null)
            vi = inflater.inflate(R.layout.item_row, null);

        //ImageView imgThumbnail=(ImageView)vi.findViewById(R.id.imgThumbnail);
        TextView txtAvailableTime1=(TextView)vi.findViewById(R.id.txtAvailability);
        TextView txtEnrollmentId1=(TextView)vi.findViewById(R.id.txtEnrollmentId);
        TextView txtUserId1=(TextView)vi.findViewById(R.id.txtUserId);
        TextView txtExamId1=(TextView)vi.findViewById(R.id.txtExamId);
        TextView txtStartedTime1=(TextView)vi.findViewById(R.id.txtStartTime);

        //imgThumbnail.setImageResource(item.ThumbnailResource);
        txtAvailableTime1.setText(item.AvailableTime.toString());
        txtEnrollmentId1.setText(item.enrollId.toString());
        txtUserId1.setText(item.UserId.toString());
        txtExamId1.setText(item.ExamId.toString());
        txtStartedTime1.setText(item.StartedTime.toString());

        Thread myThread = null;
        Runnable runnable = new CountDownRunner();
        myThread= new Thread(runnable);   
        myThread.start();

        return vi;  
    }

    public void doWork() {
        act.runOnUiThread(new Runnable() {
            public void run() {
                try{

                        TextView txtCurrentTime=(TextView)vi.findViewById(R.id.txtAvailability);
                        Date dt = new Date();
                        int hours = dt.getHours();
                        int minutes = dt.getMinutes();
                        int seconds = dt.getSeconds();
                        String curTime = hours + ":" + minutes + ":" + seconds;
                        txtCurrentTime.setText(curTime);

                }catch (Exception e) {
                    //TextView txtCurrentTime=(TextView)vi.findViewById(R.id.txtAvailability);
                     //txtCurrentTime.setText(e.getMessage());
                }
            }
        });
    }

    class CountDownRunner implements Runnable{
        // @Override
        public void run() {
                while(true){
                    try {
                        doWork();
                        Thread.sleep(1000);
                    } catch (InterruptedException e) {
                            Thread.currentThread().interrupt();
                    }catch(Exception e){
                    }
                }
        }

    }
} 
```

这只运行一次。我想连续更改列表项中的当前时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:37:39.100

每一秒，您都必须遍历项目中的每个`List<ListViewItem>`项目，然后更新每个项目的时间。在那次通话之后`listView.notifyDataSetChanged()`。

# android - phonegap 项目的进度对话框

> ID：14871628
> 
> 赞同：0
> 
> 时间：2013-02-14T09:32:43.857
> 
> 标签：android, html, cordova

我对`html5`和非常`css`陌生`javascript`。我有android开发方面的知识。现在我已经开始做`phonegap`项目了。

`progressdialog`在我的项目中，当应用程序从一个屏幕移动到另一个屏幕或加载某些内容时，我想像在 android 中一样显示一个加载器。

谁能帮我在html5中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T12:08:57.357

我有类似的需要。我能够使用导航器对象来做到这一点。请在下面找到在后台加载数据的示例代码

```
function someJSFunctionLoadingData() {
   navigator.notification.activityStart("Your message....", "loading");
   ////// some activity
   navigator.notification.activityStop(); 
```

}

为了进一步导航，您可以使用引入一个小的延迟（2 秒）并让进度条在此期间加载，然后将用户定向到您需要的 url。以下是相同的示例

```
function loadMyUrl(){
    navigator.notification.activityStart("Loading some url....", "loading");
    setTimeout(function loadMyUrl(){
                      navigator.app.loadUrl('file:///android_asse/www/someurl.html');
                      navigator.notification.activityStop();
                      }, 2000 ); 
 } 
```

我从[这个](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/TtCu2_Sx4_I)链接得到了以上想法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:51:18.323

一个简单的解决方案是创建一个基于 CSS 的微调器元素，并在需要时通过您的 js 将其设置为隐藏/可见。

[我在网上](http://blogs.adobe.com/cantrell/archives/2011/12/creating-a-loading-spinner-animation-in-css-and-javascript.html)搜索并发现了大量的例子，这里就是一个例子。

# ruby - 替换 Padrino-Warden 中的默认身份验证策略

> ID：14871632
> 
> 赞同：0
> 
> 时间：2013-02-14T09:33:04.853
> 
> 标签：ruby, padrino, warden

我正在努力替换 Padrino-Warden gem 的默认 :password 策略。我认为我需要为warden获取管理器实例，以便我可以设置默认策略，但我不确定如何在 app.rb 文件中执行此操作

现在 app.rb 看起来像这样

```
register Padrino::Warden

Warden::Strategies.add(:udid) do
    def valid?
      puts "udid strat"
      params[:udid]
    end

    def authenticate!
      user = User.get(:udid => params[:udid])
      user.nil? ? fail!("Could not log in") : success!(user)
    end
end

Warden::Manager.serialize_into_session do |user|
  user.id
end

Warden::Manager.serialize_from_session do |id|
  User.get(id)
end

use ::Warden::Manager do |manager|
     manager.scope_defaults :default, 
      strategies: [:password], 
      action: 'sessions/unauthenticated'
end 
```

哪个不起作用。守望者环境还是这个样子

```
Warden::Proxy:70352196940440 @config={:default_scope=>:default, :scope_defaults=>{}, :default_strategies=>{:_all=>[:password]}, :intercept_401=>true, :failure_app=>Dagis} 
```

如果我在 config.ru 中配置warden，它将为warden 设置正确的环境，但是我怀疑Padrino 提供的会话中间件不能与Warden 一起很好地工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:26:04.107

您需要指示监狱长经理何时使用该策略。更新`strategies`您传递给该`use`方法的键，以反映您想要启用的策略以及它们应该运行的顺序。你可以这样做：

```
use ::Warden::Manager do |manager|
  manager.scope_defaults :default, 
    strategies: [:udid, :password], 
    action: 'sessions/unauthenticated'
end 
```

[在 github](https://github.com/hassox/warden/wiki/Setup)上的 Warden wiki 上有一堆例子

# date - 日期对象设置

> ID：14871633
> 
> 赞同：0
> 
> 时间：2013-02-14T09:33:05.683
> 
> 标签：date, long-integer

我有一个必须用来设置 Date 对象的方法，如下所示：

*   方法名称（日期 d）

现在需要很长时间的构造函数处理起来似乎有点棘手，所以我想听听你是否有人知道如何使它起作用，这将指定年、月和日时间.????

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:45:23.050

您可以改用[日历](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)。它有日期和时间。

```
Calendar field access

Field                    Explanation
Calendar.YEAR            Identifies the year
Calendar.MONTH           Identifies the month
Calendar.DAY_OF_MONTH    Identifies the day
Calendar.HOUR            Identifies the hour
Calendar.MINUTE          Identifies the minute
Calendar.SECOND          Identifies the second 
```

# java - 标签的焦点监听器

> ID：14871634
> 
> 赞同：2
> 
> 时间：2013-02-14T09:33:07.840
> 
> 标签：java, vaadin

我有一个带有标签的网格，单击标签时我需要执行一个操作。

你知道我怎样才能做到这一点吗？我更喜欢使用标签监听器而不是可点击布局。我不想使用看起来像纯文本的按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:00:08.647

你不能。Vaadin 标签没有任何点击侦听器 => 您不能直接侦听 Vaadin 标签上的点击（至少在不下降到客户端上的 javascript 的情况下不能）。

简而言之：如果您想知道一个组件（并且该组件不支持 ClickListener），可点击布局是规范的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:59:09.790

我想你没有办法`com.vaadin.ui.Label`并且`com.vaadin.ui.Button.ClickListener`你必须使用平面按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-25T00:07:20.403

有一种方法可以实现这一点：

```
final Label label= new Label("My clickable Label");
        myForm.addComponent(label);
        myForm.addLayoutClickListener(new LayoutClickListener() {
            @Override
            public void layoutClick(LayoutClickEvent event) {
                // capture click and do whatever you'd like to do
                if (event.getClickedComponent() != null) {
                    if (event.getClickedComponent().equals(label)) {
                        System.out.println("clicked!");
                    }
                }
            }
        }); 
```

# .net - 将行插入具有标识的 SQL Server 时出错

> ID：14871635
> 
> 赞同：0
> 
> 时间：2013-02-14T09:33:11.507
> 
> 标签：.net, sql-server, sql-server-2008-r2, odbc

让我们考虑以下使用 ODBC 驱动程序连接到 SQL Server 的连接字符串：

```
Driver={SQL Server Native Client 10.0};Server=xxx.xx.xx.xx,xxxx;Database=mydata;Uid=xx;Pwd=xxxxxx; 
```

*   数据库类型：SQL Server
*   驱动程序：SQL Server - ODBC 本机客户端 10.0
*   提供者类型：`System.Data.Odbc`

我正在执行这个命令：

```
SET IDENTITY_INSERT db1.table ON;

INSERT INTO db1.table 
   SELECT * FROM db.table

SET IDENTITY_INSERT db1.table OFF; 
```

我收到错误：

> *ERROR [23000] [Microsoft][SQL Server Native Client 10.0][SQL Server]只有在使用列列表并且 IDENTITY_INSERT 为 ON 时，才能为表 'db1.table' 中的标识列指定显式值。*

为了解决这个问题，我现在必须做什么？

等待您的回复。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:35:18.847

您必须明确列出要插入的列：

```
INSERT db1.table(IdColumn, Column1, Column2)
SELECT IdColumn, Column1, Column2
FROM db.table 
```

无论如何，您都应该将列名指定为标准做法，以避免出现错误（例如列未对齐、添加新列等）。使用 IDENTITY_INSERT 时，这实际上是由 SQL Server 根据错误消息强制执行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:42:07.757

当用户尝试将包含特定标识值的行插入到包含标识列的表中时，会发生此错误。根据您的 SQL 语句运行以下命令：

在您的 SQL 语句之前：

```
SET IDENTITY_INSERT <tablename> ON 
```

--您必须为您的 INSERT 语句制作一个列列表：

```
INSERT Into tableA ([col1], [col2], [col3], [col4], [col5] ) 
SELECT [col1], [col2], [col3], [col4], [col5] FROM tableB 
```

不喜欢：

```
 "INSERT Into tableA SELECT ........" 
```

在您的 SQL 语句之后：

```
SET IDENTITY_INSERT <tablename> OFF 
```

# android - Activity 更改时如何仅为一个 Activity 设置动画？

> ID：14871637
> 
> 赞同：1
> 
> 时间：2013-02-14T09:33:13.793
> 
> 标签：android, android-activity, translate-animation

当从`Ativity A`to改变时`Activity B`，反之亦然，我希望它**只是** `Activity B`动画，但在我的情况下`Activity A`也是动画。（在屏幕左侧留下一个空白区域）`Activity B`动画效果很好，我的问题是动画`Activity A`。（不应该存在）。我已经设定

```
//Activity B
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    overridePendingTransition(R.anim.fadein, R.anim.fadeout);
    setContentView(R.layout.mylayout); 
      //..........
  } 
```

仅在`Activity B`. 我希望它`Activity A`永远不会动画或从屏幕上消失。

我以这种方式**修复了反向动画**（从 更改`Activity B`为`Activity A`）：

```
//Activity B
@Override
public void onPause(){
    super.onPause();
    overridePendingTransition(0, R.anim.fadeout);
} 
```

这很好用，所以，现在的问题只是从`Activity A`to的变化`Activity B`，我想要同样的行为`Activity A`（只是留下来，没有动画）。但如果我尝试`overridePendingTransition(R.anim.fadein, 0);`，从屏幕上消失`onCreate()`。`Activity A`

淡入淡出.xml

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/accelerate_interpolator">
    <translate android:fromXDelta="100%p" android:toXDelta="0%p" android:duration="1000"/> 
```

淡出.xml

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:interpolator="@android:anim/accelerate_interpolator">
        <translate android:fromXDelta="0%p" android:toXDelta="100%p" android:duration="1000"/>
</set> 
```

第一张图是我现在得到的，第二张图是我想要得到的。

![](../Images/29defd04168f595f9cf32930562076d5.png) ![在此处输入图像描述](../Images/0dfe880170af099e7c3c757e2404a183.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T09:42:04.543

尝试这个。

**静止不动.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromYDelta="0%p" android:toYDelta="0%p"
    android:duration="@android:integer/config_longAnimTime"
 /> 
```

# c++ - 我应该使用 shared_ptr 还是 unique_ptr？

> ID：14871640
> 
> 赞同：27
> 
> 时间：2013-02-14T09:33:35.220
> 
> 标签：c++, c++11, shared-ptr, smart-pointers, unique-ptr

我有一个关于[`std::unique_ptr`](http://en.cppreference.com/w/cpp/memory/unique_ptr)和的问题[`std::shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr)。我知道有很多关于何时使用哪一个的问题，但我仍然不确定我是否理解正确。我在某处读到智能指针的默认选择应该是`std::unique_ptr`，但据我了解，出于我的需要，我宁愿使用`std::shared_ptr`. 例如，我有：

```
class B;
class A
{
private:
   B* b;
public:
   B* getB();
};

A::getB()
{
   return b;
} 
```

所以基本上类`A`拥有指向对象类型的指针，`B`并且有一个返回这个指针的方法。如果我创建 getter，我假设其他一些类可以访问这个指针，因此它应该`shared_ptr`代替`unique_ptr`. 我是对的，还是我还不明白？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-14T09:44:27.570

简短的回答：取决于。

这取决于`getB`当拥有的 A 超出范围时，返回的指针是否可以在某处存储/使用。区别在于*所有权*而不是您拥有多少指针。

*   如果在使用 的结果时 A 仍然存在`getB`，则可以存储 a`unique_ptr`并返回一个普通指针（如果`getB`永远无法返回，则返回一个引用`nullptr`）。这表示“A拥有B，而没有其他人拥有”。
*   如果在您使用/保存 的结果时 A 可能超出范围`getB`，但 B 应该与 A 一起（或不久之后）超出范围，存储 a`shared_ptr`并返回 a `weak_ptr`。
*   如果可能有许多对象，包括 的调用者`getB`，可能会持有 B 并且没有明确的单一所有者，存储和返回`shared_ptr`s。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T09:38:13.610

为了举例，我们假设确实需要一个指针并且只是`B b;`不剪切它（例如，也许 B 是多态的）。

### 情景阿尔法

所以，A 是B*的*所有者。

```
private:
   std::unique_ptr<B> b; 
```

并`getB`提供 B 的视图。

```
public:
   B& getB();

B& A::getB()
{
   return *b;
} 
```

### 场景测试版

A 是B 的所有者之一*。*

```
private:
   std::shared_ptr<B> b; 
```

A 可以将 B 的所有权转让给其他人。

```
public:
   std::shared_ptr<B> getB();

std::shared_ptr<B> A::getB()
{
   return b;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T09:35:59.073

您返回一个裸指针，而不是 a `shared_ptr`，因此共享指针不会解决任何问题。要么返回 a `shared_ptr`，要么使用 a `unique_ptr`。试着想想怎么可能`shared_ptr`实现，我相信这应该能说明我的观点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T09:36:02.187

我想你是对的。如果您只将`B`指针作为私有成员故事`A`，我想我会使用`std::unqiue_ptr`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-14T09:38:16.923

问题中没有足够的信息。

智能指针捕获并实现所有权语义。如果`A`对象拥有该`B`对象，那么销毁`A`应该销毁`B`，然后使用`unique_ptr`. 但是`unique_ptr`这里并没有很好的返回类型。它只是成员，您仍然会返回一个裸指针。

如果获得客户端可以无限期`B`继续使用的手段，那么使用，因为那将是共享所有权。`B``shared_ptr`

# java - 如何关闭 EBean 增强

> ID：14871642
> 
> 赞同：5
> 
> 时间：2013-02-14T09:33:41.383
> 
> 标签：java, database, jpa, ebean

我一直在使用带有增强功能的 Ebean 一段时间。它在大多数情况下都可以工作，但是要正确配置非常脆弱且非常麻烦。我希望关闭它可以提高鲁棒性。

我的问题是，如果我在 Eclipse 和 Maven 中关闭增强器，我就会开始出现各种异常。我应该遵循哪些步骤来摆脱增强功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T14:57:13.650

尝试从 application.conf 中删除 ebean.default="models.*" 行。它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-18T21:36:51.943

从 Ebean 支持增强和“动态子类生成”开始，这现在是一个老问题。

几年前，随着 Ebean，我们放弃了对“动态子类生成”的支持，这不再是一种选择（出于多种原因），因此请注意**Ebean 现在要求增强**。

在增强工具方面付出了很多努力，尤其是 IntelliJ IDEA 增强器插件以使其健壮（例如支持 Kotlin 部分编译的工作）。

如果有人对增强有疑问，请告诉我们（Ebean 项目），谢谢。

# windows - 在 Windows 上从 RAM 运行程序

> ID：14871644
> 
> 赞同：0
> 
> 时间：2013-02-14T09:33:51.743
> 
> 标签：windows, command-line, ram

有没有办法从 Windows 的命令行运行程序，同时强制 Windows 仅将进程保留在 RAM 中而不将其交换到磁盘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:37:22.197

通常，您无法安全可靠地防止正常应用程序看到页面错误（从磁盘加载，或者只是在池中重新排列页面）。这通常也不是问题。

页面错误（没有磁盘访问）一直在发生，它们需要几十纳秒。Windows 经常将页面移入和移出非常小的工作集。这并不意味着您的工作集之外的页面已经“消失”，但如果有人要求更多内存，它们*可能会被交换/丢弃。*大多数情况下，当您再次访问工作集之外的页面时，它仍然存在，只是默默地移回工作集，将另一个（可能是最不重要的）推出。
从磁盘重新加载页面（数据或程序代码）的速度要慢得多，但通常不会经常发生，只要程序实际正在运行并且机器的 RAM 不是非常低。如果发生这种情况，坦率地说，没有什么可以做的不同，因为这意味着内存比需要的少。

您可以使用`VirtualLock`锁定地址空间的页面（任何页面，包括被代码占用的页面），但这仍然不是硬性保证（即使文档会让您相信）并且它仅在工作集范围内有效，默认情况下*很小*（略大于 1 MiB）。
然而，锁定给你的最好保证是，当你的进程运行时，你锁定的页面在 RAM 中。这意味着，理论上，当您的进程未运行时，它们*仍*可能在下一次上下文切换时被换出。

但是，如果您为应用程序提供足够大的最大工作集大小 ( [`SetProcessWorkingSetSize`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686234%28v=vs.85%29.aspx))，则页面错误（在代码中或一般情况下）极不可能发生。
请注意，绝大多数程序大部分时间都驻留在内存中，即使它们已完成运行（缓冲区缓存）。

# java - JavaLauncher 争夺相同的资源

> ID：14871645
> 
> 赞同：1
> 
> 时间：2013-02-14T09:33:53.257
> 
> 标签：java, windows, stored-procedures, intellij-idea, race-condition

我有一个用 JavaLuncher 启动 IDEA intellj 的 shell (Windows) 程序。Intellij 卡住了，直到我关闭 shell 程序。剂量 JavaLuncher 用 Shell 共享资源启动 intellij 吗？

# javascript - 在javascript中的其他函数内调用函数

> ID：14871650
> 
> 赞同：0
> 
> 时间：2013-02-14T09:34:09.513
> 
> 标签：javascript

具有如下定义的 Person 函数，

```
function Person() {
    this.GetContactDetail = function() {

        // Can I make a call to GetFullDetail  function over here is it possible , 
        // I tried but it doesnt calls the GetFullDetail  function
        this.GetFullDetail; 
    };

    this.GetFullDetail = function() {

    };
};

var objPer = new Person();
objPer.GetContactDetail(); 
```

上面的代码只是一个片段供参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:35:40.307

为了在 javascript 中调用函数，您应该在其名称后使用 ()。只是引用它，不会调用它。

所以在上面你应该做这样的事情：

```
this.GetFullDetail(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:00:54.043

像这样调用函数

```
 this.GetFullDetail(); 
```

这`this.GetFullDetail;`显示了`Person variable`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T09:38:18.977

`this`GetContactDetails 内部不是指上下文，`Person`而是指`GetContactDetails`上下文。您应该保存对`this`外部的引用。

```
function Person() {
     var _self = this;
     this.GetContactDetail = function () { 
        _self.GetFullDetail(); 
        ... 
```

# apache - 在 node.js 中捕获“关闭”套接字事件

> ID：14871651
> 
> 赞同：0
> 
> 时间：2013-02-14T09:34:12.430
> 
> 标签：apache, node.js, sockets, mod-proxy

我在端口 80 上使用 Apache。

Node.js 服务器监听 1337 端口，Apache 通过他代理所有请求：

```
ProxyRequests off

ProxyPass /nodejs/ http://127.0.0.1:1337/ timeout=300 retry=0
ProxyPassReverse /nodejs/ http://127.0.0.1:1337/ 
```

和 server.js：

```
var http = require("http");

http.createServer(function (req, res) {
    req.socket.on("close", function () {
        console.log("socket close");
    });
}).listen(1337); 
```

问题：当用户中止连接时（在浏览器中停止请求，例如按 Esc），node.js 无法触发*socket.on("close")*直到 apache 的超时有效。

除了将 Apache 置于 node.js 之后，还有什么解决方案？

# java - Java：将文件（使用路径）复制到目录并重命名同名文件

> ID：14871652
> 
> 赞同：0
> 
> 时间：2013-02-14T09:34:17.707
> 
> 标签：java

我是 Java 新手，正在从事一个项目以提高我的技能并需要一些帮助。

我有一个文件，让我们调用它`tools.extension`，它必须转到一个已经有`tools.extension`文件的目录。我希望我的代码检查它是否`tools.extension`存在，如果存在，将其重命名为`tools(currentdate).extension`.

所以我尝试了这个来测试逻辑：

```
Scanner myS = new Scanner(System.in);
        Path path = Paths.get(myS.nextLine());
        Path file = Files.createFile(path);
        Path path1 = Paths.get(myS.nextLine());
        Path file1 = Files.createFile(path1);

       if (file.getFileName() == file1.getFileName())

       {
           System.out.println("file already exists");
       }

       else
       {
           System.out.println("File doesn't already exist");
       }

       Files.delete(file);
       Files.delete(file1); 
```

但是当然后来我意识到某处会出现异常，但我只是想试试这个来检查我的逻辑。

我总是得到`file doesn't already exist`

即使我`text.txt`在不​​同的目录中创建两个文件也不行。它不认为它们具有相同的名称，即使当我 print 时`getFileName()`，它们都是！

有人可以给我一些建议或指点我一个对我有帮助的教程吗？

真的非常感谢你！

编辑：

非常感谢您提醒我 .equals，它正在工作！

我还有一个问题，我该如何重命名文件或文件1？它们是我不知道的路径。

我应该使用 toFile() 方法然后使用 renameTo() 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:35:49.797

这`if (file.getFileName() == file1.getFileName())`是错误。

`.equals(...)`您应该使用方法比较字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:39:44.400

只需使用

```
if(file.getFileName().equals(file1.getFileName())){
  //file exist
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:44:52.923

我不知道你背后有什么，但关于[File API](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)`Files.createFile(path);`的一些重要的事情：

[`File.exists()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#exists%28%29)必须用于检查`file`文件系统中是否存在。

返回一个布尔值，[`File.delete()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#delete%28%29)告诉您调用是否成功。

您可以随意创建 File 对象，但这并不意味着该文件是在文件系统上创建的。

要在文件系统上创建文件，您需要调用 : [`File.createNewFile()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#createNewFile%28%29)。此方法再次返回一个布尔值，告诉您创建是否成功。

可[`File.renameTo(anotherFile)`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#renameTo%28java.io.File%29)用于重命名文件。它再次返回一个布尔值，告诉您重命名是否成功。

玩文件时的一个常见错误是忘记检查所有这些文件系统操作的结果......所以不要忘记它。

# json - 如何在骆驼路由期间将json转换为java对象

> ID：14871655
> 
> 赞同：1
> 
> 时间：2013-02-14T09:34:24.693
> 
> 标签：json, apache, apache-camel, ibatis

我正在使用骆驼并通过activemq发送json字符串，并希望使用ibatis将接收到的对象保存在数据库中。我想知道如何在骆驼路线期间将 json 转换为 java 对象。

from("jms:queue:TestQueue").bean(new SomeBean()) .to("ibatis:User.insert");

任何建议对于将 json 转换为 java 对象或直接将 json 传递给 ibatis 都会很有用。

谢谢洛克什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T19:40:54.843

我认为由于最后一点，您正在获得默认值：.bean(new SomeBean())

# lua - 在 Lua 中获取最大速度（数字）

> ID：14871656
> 
> 赞同：-2
> 
> 时间：2013-02-14T09:34:27.437
> 
> 标签：lua, coronasdk

我正在开发应用程序以查看您的运行速度，**为此我需要一个显示您的最大速度的功能。**但找不到我该怎么做。

```
local speedText = string.format( '%.3f', event.speed )
speed.y = 250
speed.x = 125
local numValue = tonumber(speedText)*3.6
if numValue ~= nil then
    speed.text = math.round( numValue )
end 
```

我已将“speedText”设置为您在上面看到的数字。

我在 Corona SDK/ **Lua中编码**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:35:07.773

您需要跟踪每一帧的速度，并执行以下简单操作：

```
if event.speed > currentMaxSpeed then
    currentMaxSpeed = event.speed;
end 
```

# iphone - iPhone 故事板 UINavigationController Tabbar 消失

> ID：14871658
> 
> 赞同：0
> 
> 时间：2013-02-14T09:34:34.820
> 
> 标签：iphone, uinavigationcontroller, uitabbarcontroller, uistoryboard

我已经发布了这个问题，但可能没有人理解并回答它。
我尝试了网上冲浪，并学习了几天，但不幸的是我找不到答案。
我现在唯一能做的就是依赖stackoverflow的家伙。
我用情节提要构建简单的应用程序，没有任何代码。
我的故事板如下。

![在此处输入图像描述](../Images/4d2bc591a3a3c53c5cf4c53790937fe8.png)

当我运行应用程序并移动到“ViewController A”时，标签栏突然消失了。我真的很想知道为什么会这样。如何在此屏幕中显示标签栏？

当前屏幕“ViewController A”，其中标签栏消失了。

![在此处输入图像描述](../Images/089a9a8cc2d0e4f9ac90a2d33e9125e1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:54:00.460

Add a navigation Controller for View controller A.

Take Storyboard , select View controller . Editor->Embed In->NavigationController

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:49:44.200

是的，它会正确地消失，您需要`UINavigationController`嵌入到每个根控制器中，`tabBarController`即 viewController 项目 1 和 viewController 项目 2。目前正在发生的事情是您正在将 viewController A 推送到在第一个屏幕后面没有 TABBAR 控制器的 navigationController。

# ios - addSubview 将我的视图向下推

> ID：14871671
> 
> 赞同：0
> 
> 时间：2013-02-14T09:35:09.290
> 
> 标签：ios

我将代码从`self.view = m_tabBarController.view;`to更改为`[self.view addSubview:m_tabBarController.view];`，我的视图似乎被推倒了。为什么呢？

m_tabBarController 是 UITabBarController。

不知道为什么会这样。需要一些指导..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:27:18.417

这两个功能用于不同的目的。

在这

```
self.view = m_tabBarController.view; 
```

您正在将 m_tabBarController.view 分配给 self.view

而在这个

```
[self.view addSubview:m_tabBarController.view]; 
```

您在 self.view 添加 m_tabBarController.view

那么当然你的视图将在这个函数中被关闭，因为你的 self.view 已经成为 m_tabBarController.view 的父级。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:47:55.870

在 [self.view addSubview:m_tabBarController.view] 前面添加这个；

```
m_tabBarController.view.frame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height); 
```

解决了这个问题。

# android - 在 Android 中向远程设备发送数据的最佳方式

> ID：14871672
> 
> 赞同：0
> 
> 时间：2013-02-14T09:35:10.173
> 
> 标签：android, networking, udp, wireless, datagram

我的问题是，将数据发送到同一网络中的其他设备的最佳方式是什么？

我有两台设备，都连接在同一个无线网络上，它们都有一个负责网络发现和所有这些东西的服务。

一旦设备“A”知道设备“B”在哪里，就会创建一个数据报套接字。然后，当您触摸设备 A 的屏幕时，它会使用数据报包向设备 B 发送一些数据。但这些数据必须是实时的。

现在我得到了大约 200 毫秒的延迟，在触摸屏幕和设备 B 收到数据包之间。

所以，我想知道是否有其他方法可以减少这个时间并使其更快。我选择 UDP 是因为它更快，而且它不在乎途中是否丢失。但也许有更好的方法来做到这一点。

谢谢！

**设备 A 发送到 B 代码**

```
@Override
            public void run() {
                // TODO Auto-generated method stub
                super.run();
                try {
                    if (clientSocket==null || clientSocket.isClosed() || !clientSocket.isConnected()) {
                        clientSocket = new DatagramSocket();
                    }
                    EngelPacket p = new EngelPacket(0,1,0,1,0);
                    p.setTime(System.currentTimeMillis());
                    byte[] sendData = p.getPacketBytes();
                    DatagramPacket sendPacket = new DatagramPacket(sendData,
                            sendData.length, ipDest, port);
                    clientSocket.send(sendPacket);
                } catch (SocketException e) {
                    // TODO Auto-generated catch block

                    e.printStackTrace();
                } catch (UnknownHostException e) {
                    // TODO Auto-generated catch block

                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block

                    e.printStackTrace();
                }
            } 
```

# android - Facebook - 手机重启后会话为空

> ID：14871678
> 
> 赞同：0
> 
> 时间：2013-02-14T09:35:30.120
> 
> 标签：android, facebook, login

手机重启后，我必须重新登录我的应用程序，但我不想这样做。是否可以保存 facebook 会话以便不重新登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:04:24.433

是的，可以保存 Facebook 会话。Facebook sdk 具有保存会话的完整实现。通过调用以下方法，您可以检查会话是否有效。

```
public static boolean restore(Facebook session, Context context) {
        SharedPreferences savedSession =
            context.getSharedPreferences(KEY, Context.MODE_PRIVATE);
        session.setAccessToken(savedSession.getString(TOKEN, null));
        session.setAccessExpires(savedSession.getLong(EXPIRES, 0));
        return session.isSessionValid();
    } 
```

# c - 链接器错误未定义对“打印”的引用

> ID：14871679
> 
> 赞同：2
> 
> 时间：2013-02-14T09:35:29.637
> 
> 标签：c, linker-errors, undefined-reference

我有一个名为“main.c”的程序，其中包含调用一个函数的 main()，该函数的定义在其他名为“nim.c”的源文件中可用。我制作了一个名为“nim.h”的头文件，其中包含所需方法的原型。这个头文件“nim.h”已经包含在我的“main.c”中。我正在放置属于该程序的所有文件。

```
 //main.c
    #include <stdio.h>
    #include "nim.h"
    int main()
    {
         print(); 
         return 0;
    }
//nim.h
    #include<stdio.h>
           void print();
//nim.c
    #include<stdio.h>

    void print()
    {
         printf("hello !!"); 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:04:16.857

您必须告诉链接器，您的可执行文件由两个目标文件（main.o 和 nim.o）以及所有官僚文件（如 libc、win32 等）组成。

使用 gcc，您将编译 C 源代码：

```
gcc nim.c -o nim.o
gcc main.c nim.o <libraries> -o main.exe 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:04:30.560

我使用了下面的命令，一切都成功了。

```
gcc main.c nim.c -o nim 
```

尝试上面的命令来构建，让我知道你到底得到了什么错误？

# jquery - 使用 jquery 循环 json 多维数组的困惑

> ID：14871683
> 
> 赞同：3
> 
> 时间：2013-02-14T09:35:41.123
> 
> 标签：jquery, json

我有一个这样的json数据，

```
var menuItems = {
    data:
    {        
        dataA: 
        {
            cmClass: "classA",
            cmID: "a",
            properties: [
                { cId: 'testa', cClass: 'edit', aId: 'sa', text: 'sample a' },
                { cId: 'testaa', cClass: 'cut', aId: 'saa', text: 'sample aa' }                
            ]
        },
        dataB: 
        {
            cmClass: "classB",
            cmID: "b",
            properties: [
                { cId: 'testb', cClass: 'edit', aId: 'sb', text: 'sample b' },
                { cId: 'testbb', cClass: 'cut', aId: 'sbb', text: 'sample bb' },
                { cId: 'testbbb', cClass: 'copy', aId: 'sbbb', text: 'sample bbb' },
            ]
        }
    }
}; 
```

我想遍历所有数据并从中创建一个无序列表。所以为了测试我有以下jquery，

```
 $.each(menuItems.data, function (i) {
    $.each(this, function (key, value) {
    {
        alert(key + " : " + value);
        if (key == "properties") {
            $.each(value, function (key1, value1) {
                alert(key1 + " : " + value1);
            })
        }
    }
    });          
}); 
```

第一个警报正确显示为“cmClass：classA”，“cmId：a”等，但第二个循环总是给出“0：[object object]”，“1：[object object]”等，我卡在这里，我尝试了不同的案例，但似乎没有任何效果。json数据有什么问题吗？有人可以帮忙吗？我被困在这里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:46:34.590

您循环对象，因此您需要在 $each 中执行另一个循环。

```
$.each(menuItems.data, function (i) {
    $.each(this, function (key, value) {
    {
        console.log(key + " : " + value);
        if (key == "properties") {
            $.each(value, function (key1, value1) {
                for(k in value1) {
                   console.log( key1 + ':' + k + ':' + value1[k]);
                }
            })
        }
    }
    });
}); 
```

# xslt - XSLT 样式表不返回子元素

> ID：14871689
> 
> 赞同：0
> 
> 时间：2013-02-14T09:35:56.227
> 
> 标签：xslt

我是 XSLT 的新手，我有一个不返回子元素的基本样式表。任何人都可以帮忙吗？

谢谢。

样式表

```
 <?xml version="1.0" encoding="UTF-8"?>
   <xsl:stylesheet version="2.0" 
      xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
       xmlns:wd="urn:com.workday/bsvc" wd:version="v17"> 
        <xsl:strip-space elements="*"/>
        <xsl:output indent="yes" method="text"/>
        <xsl:template match="/Get_Worker_Response "> 

         <xsl:template match="/wd:Response_Data/wd:Worker/wd:Worker_Data">
                <xsl:value-of select="wd:Worker_ID" />
                </xsl:template>

   </xsl:template>  
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:40:42.397

你应该得到一个语法错误；你不能有嵌套`xsl:template`元素。

# ruby - 红宝石字符串内的单个反斜杠

> ID：14871693
> 
> 赞同：1
> 
> 时间：2013-02-14T09:36:02.290
> 
> 标签：ruby, string, backslash

我有来自给定导出源的带有反斜杠的路径字符串（窗口），格式为

```
"path\to\something" 
```

当我尝试用 ruby​​ 阅读时，它显示为

```
\t 
```

和

```
\s 
```

作为转义序列。最后我只想一个

```
File.join(my_unix_path, "path\to\something") 
```

我知道

```
%q{"path\to\something"} 
```

有效，但由于我在变量中有字符串，所以我不能那样使用它。任何想法如何删除它或将其转换为常规的 unix 路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T13:07:31.783

不要为 Ruby 的路径使用反斜杠。

与许多其他语言一样，Ruby 了解平台并将自动将路径斜线转换为平台的正确方向。这意味着您可以*始终*在路径中使用正斜杠，并完成它：

从[IO](http://www.ruby-doc.org/core-1.9.3/IO.html)的文档中：

> 如果可能，Ruby 将在不同的操作系统约定之间转换路径名。例如，在 Windows 系统上，文件名“/gumby/ruby/test.rb”将打开为“\gumby\ruby\test.rb”。在 Ruby 字符串中指定 Windows 样式的文件名时，请记住转义反斜杠：

```
"c:\\gumby\\ruby\\test.rb"

```

> 我们这里的示例将使用 Unix 风格的正斜杠；File::SEPARATOR 可用于获取特定于平台的分隔符。

作为附加信息，您在`"path\to\something"`转义`\s`时看到的问题`\t`是因为字符串在双引号中。如果它在单引号中，则不会出现问题，因为反斜杠会失去它们的魔力。有关更多信息，请参阅“[单引号字符串中的反斜杠与 Ruby 中的双引号字符串？](https://stackoverflow.com/questions/648156/backslashes-in-single-quoted-strings-vs-double-quoted-strings-in-ruby?rq=1) ”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:13:08.707

如果你真的有`"path\to\something"`（我怀疑），那么你已经在那个字符串中有制表符和空格。如果你真的想要`"path\to\something"`（我也怀疑），那么你不必做任何事情。你已经有了。

如果您确实有`'path\to\something'`（我认为很可能），那么您没有将反斜杠解释为转义字符。如果你真的想要`'path\to\something'`（我认为很可能），那么你不必做任何事情。你已经有了。

# javascript - Microsoft JScript 运行时错误：无法获取属性“已检查”的值：对象为空或仅在 IE9 中未定义

> ID：14871695
> 
> 赞同：0
> 
> 时间：2013-02-14T09:36:05.883
> 
> 标签：javascript, internet-explorer-9, runtime-error

我必须检查复选框中的项目，然后单击添加按钮，将选中的项目添加到一个框中。检查复选框中的项目并单击添加按钮后，我得到以下错误。它仅在 IE9 中发生。

Microsoft JScript 运行时错误：无法获取“已检查”属性的值：对象为空或未定义

我的js页面代码是：

```
document.onkeyup = fnRemoveSelectedItems;
//Global variables 
var cssGridrow="gridrow";
var cssGridalteraterow="gridalteraterow";
var selectedItems=new String();
var pickItemSelected="1";
var isOnsiteLoc = 0;

/*Function that adds the selected items to the text box in the pick up box */
function fnPickUpAdd(btnOKClientId, lstFromClientId, txtBoxClientId, ColumnToTake) {
    //enable the ok button
    document.getElementById(btnOKClientId).disabled=false;
    //From grid Object
    var lstFrom=document.getElementById(lstFromClientId);
    //to textbox Object
    var txtBoxObject=document.getElementById(txtBoxClientId);

    //If the lstFromClienId is location then iteration occurs.
    if (lstFromClientId.search(/Location/i) > 0) {
        //Iterating only with in the grid rows to check if the location is onsite
        for (var i = 1; i < lstFrom.rows.length; i++) {
            var CheckBoxId = lstFrom.rows[i].cells[0].childNodes[0].id;
            if (document.getElementById(CheckBoxId).checked && lstFrom.rows[i].cells[6].innerText != null && lstFrom.rows[i].cells[6].innerText == "True") {
                isOnsiteLoc = 1;
                break;
            }
        }
    }
    //Iterating only with in the grid rows to get the selected SOIDs
    for(var i=0;i<lstFrom.rows.length; i++) {
        if(lstFrom.rows[i].className==cssGridrow || lstFrom.rows[i].className==cssGridalteraterow) {
            var childRowCheckBoxId=lstFrom.rows[i].cells[0].childNodes[0].id;
            if(childRowCheckBoxId!= "") {
                if(document.getElementById(childRowCheckBoxId).checked) {
                    //locationmatchFor = "1" for all scenarios except for location pick up in search
                    // so for this we would take the value in cells[1]
                    if(ColumnToTake=='1'){ //From Preferences 
                        if(findMatchValue(txtBoxObject, lstFrom.rows[i].cells[1].innerText)==false) {
                            //show that in the text box
                            txtBoxObject.innerHTML+="<span onclick='fnSelectItem(this)' isItem=1>"+lstFrom.rows[i].cells[1].innerText+";</span>";

                            //Form this to pass the selected items to the parent page
                            //selectedItems+=(lstFrom.rows[i].cells[1].innerText)+":"+(lstFrom.rows[i].cells[2].innerText);
                            selectedItems+=(lstFrom.rows[i].cells[1].innerText);
                            selectedItems+=";";
                        }
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:47:01.137

可能是您在以下几行中没有尝试访问的`DOM`属性：`id`

```
var CheckBoxId = lstFrom.rows[i].cells[0].childNodes[0].id; 
```

和

```
var childRowCheckBoxId=lstFrom.rows[i].cells[0].childNodes[0].id; 
```

是`id`属性吗？如果是这样，你可以尝试做

```
getAttribute('id') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-15T20:43:57.120

在 html 的头部添加以下内容：

```
<meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-21T01:46:48.163

我的猜测是，在您的`For`循环中，您正在遍历网格的最后一行。检查`Length`属性，看看它是否在计数中包含“页码行”。 `i < Length - 1`为我工作。

# macos - Mac OS X、Java 7：createNewFile 文件名编码

> ID：14871702
> 
> 赞同：2
> 
> 时间：2013-02-14T09:36:36.450
> 
> 标签：macos, encoding, java-7

我正在尝试将主要在 Mac OSX 上运行的应用程序从 Java6 更新到 Java7。它发生在文件名中使用一些特殊字符创建的文件，例如“föhn.txt”，在 Java7 中被创建为“f?hn.txt”。

如果你在 Mac 上运行这个排序示例

```
File file = new File("föhn.txt");
file.createNewFile(); 
```

*   使用 Java6：föhn.txt
*   使用 Java7：f?hn.txt

我知道这个主题有类似的线程：

*   [Java中文件名的编码](https://stackoverflow.com/questions/10106161/encoding-of-file-names-in-java)
*   [设置默认的 Java 字符编码？](https://stackoverflow.com/questions/361975/setting-the-default-java-character-encoding)

并且我尝试设置 JVM 参数：`-Dfile.encoding=UTF8`但这对文件名没有影响。编译器和源设置为 utf-8。我不知道为什么这不适用于 OS X 上的 Java7。

更新：我在 eclipse 和 Netbeans 中尝试过这个例子，最终的应用程序与 jdk (appbundler) 捆绑在一起。

Mac OS X 使用分解的 UTF-8 格式： [File.listFiles() 使用 JDK 6 破坏 Unicode 名称（Unicode 规范化问题）](https://stackoverflow.com/questions/3610013/file-listfiles-mangles-unicode-names-with-jdk-6-unicode-normalization-issues)

还有一个关于这个主题的博客： http: [//shlrm.org/blog/2012/10/04/osx-java-utf-8-oh-my/](http://shlrm.org/blog/2012/10/04/osx-java-utf-8-oh-my/)

这有助于读取文件名，但我还没有找到使用正确编码文件名创建新文件的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:57:20.827

感谢@Duralumin 的正确提示。

从 eclipse、netbeans 或与 JRE (appbundle) 捆绑的应用程序直接使用 Java7 的 java 二进制文件。从命令行调用 java 将使用来自 Apple 的文件 /usr/bin 下的二进制文件。出于这个原因，它可以从命令行工作。

在 eclipse 或 netbeans 中，您必须在运行配置中设置 Environment，只需添加：

```
LC_TYPE = "UTF-8" 
```

在我添加的 Appbundle 中

```
setenv("LC_CTYPE","UTF-8",1); 
```

到我正在使用的本机（Objective-C）JavaAppLauncher。

# spring - 行已被另一个事务更新或删除

> ID：14871703
> 
> 赞同：-2
> 
> 时间：2013-02-14T09:36:40.347
> 
> 标签：spring, hibernate

当我运行我再次尝试过的代码时出现此异常，但我不断收到问题是学生无法进行测试，因为这次有人给它测试同步类型的错误即将到来

.....：

```
Caused by: org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect) 
```

我的代码：

公共同步 StudentAnswer saveAnswer(User user, String assignmentid, String answerid, String answer) throws Exception {

```
 if (user == null || user.getStudent() == null)
        throw new GeneralSecurityException("Permission Denied");

    Auditor auditor = new Auditor(user);

    AssignmentStatus status = getAssignmentStatus(user, assignmentid);
    StudentAnswer studentAnswer = getStudentAnswer(user, assignmentid, answerid);

    Object oldStatus = auditor.clone(status, new AssignmentStatus());
    //Object oldAnswer = auditor.clone(studentAnswer, new StudentAnswer());
    Object oldAnswer = auditor.clone((studentAnswer == null) ? new StudentAnswer() : studentAnswer, new StudentAnswer());
    Date now = new Date();

    if (status != null && status.isCompleted())
        return studentAnswer;

    if (studentAnswer == null) {

        Assignment assignment   = getAssignment(user, assignmentid);
        AnswerKey answerKey     = (AnswerKey) genericDao.get(AnswerKey.class, answerid);

        if (answerKey == null)
            throw new Exception("There was an error trying to save an answer.");

        if (status == null)
            status = startAssignment(user, assignment, now);

        if (status == null)
            throw new Exception("There was an error trying to start the assignment.");

        studentAnswer = new StudentAnswer();
        studentAnswer.setStudent(user.getStudent());
        studentAnswer.setCreateTime(now);
        studentAnswer.setAssignmentStatus( status );
        studentAnswer.setAssignment(assignment);
        studentAnswer.setAnswerKey( answerKey );
        studentAnswer.setQuestionNumber( answerKey.getNumber() );
        studentAnswer.setAnswerKeyCopy( answerKey.getAnswer() );

        //Adding a new answer changes your progress percentage, so we recalculate it
        updateProgress(status, now, answer);

    }
    //changing existing answer
    else {
        Long practiceId = studentAnswer.getAnswerKey().getPractice().getObjectid();

        PracticeStatus practiceStatus = null;
        for (PracticeStatus tmpPracticeStatus : (List<PracticeStatus>) status.getPracticeStatuses()) {
            if (tmpPracticeStatus.getCustomPractice().getPractice().getObjectid().longValue() == practiceId.longValue()) {
                practiceStatus = tmpPracticeStatus;
            }
        }

        //completed practice due to time out or submit?  Don't change the
        //answer.
        if (practiceStatus != null && practiceStatus.isCompleted()) {
            throw new Exception("Time is up for this practice, so answers may no longer be changed.");
            //return studentAnswer;
        }

    }

    if (answer!=null && answer.length() > 0)
        studentAnswer.setAnswer(answer.charAt(0));
    else
        studentAnswer.setAnswer(' ');

    studentAnswer.setUpdateTime(now);

    studentAnswer = (StudentAnswer) genericDao.save(studentAnswer);

    updateGrade(status);
    updateProgress(status, now, null);
    genericDao.save(status);

    auditor.audit("answer_save", status, oldStatus);
    auditor.audit("answer_save", studentAnswer, oldAnswer);
    genericDao.saveList(auditor.getList());

    return studentAnswer;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:39:46.230

这可能意味着在提交事务之前，您尝试更新的行已经被其他线程更新。检查同一条记录是否同时被多个线程处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:50:51.267

我想你的问题是为什么你会得到这个异常以及如何解决它。如果您的系统对并发更新零容忍，那么在查询中使用悲观锁，但您必须确保在短事务中获得锁，否则会出现性能问题。或者更好的解决方案是使用乐观锁（使用版本字段）并检查版本是否等于最新版本，如果不可能，则向用户发送消息说数据已过期。

# r - 如何在数学表达式中添加星号？

> ID：14871706
> 
> 赞同：12
> 
> 时间：2013-02-14T09:36:43.397
> 
> 标签：r, plot, symbols, annotate

我正在尝试使用 R² 值和重要性编码来注释绘图，但我不能`*`作为符号传递，也不能作为并列运算符传递。

我试过`?plot.math`了，这是我试过的

```
plot(1:10,1:10)
text(6,4,expression(R^2==8))
text(6,4,expression(R^2==8^{**}))
Error: unexpected '^' in "text(6,4,expression(R^2==8^{**" 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-14T09:42:10.833

您需要`paste`在表达式中使用：

```
text(4,6,expression(paste(R^2==8^"**"))) 
```

或者

```
text(6,4,expression(paste(R^2==8, "**"))) 
```

![在此处输入图像描述](../Images/ede52050e4b6a9529005ad430e4bfc2b.png)

# python - 适用于 Python 2.x 和 Python 3.x 的可移植、高效内存 range()

> ID：14871712
> 
> 赞同：4
> 
> 时间：2013-02-14T09:37:04.023
> 
> 标签：python, iterator, range, xrange

我知道`range`Python 2.x 的缺点（它创建了一个对大范围来说效率低下的列表）并且它是更快的迭代器对应物`xrange`。然而，在 Python 3.x 中，`range`是一个迭代器并被`xrange`删除。有没有办法编写用 Python 2.x 和 Python 3.x 编写的这两个循环，以使代码可移植并使用迭代器？

```
# Python 2.x
for i in xrange(a_lot):
    use_i_in_someway(i)

# Python 3.x
for i in range(a_lot):
    use_i_in_someway(i) 
```

我知道有人可能会做类似的事情

```
if(platform.python_version_tuple()[0] == '3'):
    xrange = range 
```

但我正在考虑一些不那么hack-ish而不是定制的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:15:53.700

一种替代方法是使用[Six](http://pythonhosted.org/six/)模块，它提供了简单的实用程序来包装 Python 2 和 Python 3 之间的差异。它旨在支持无需修改即可在 Python 2 和 3 上工作的代码库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:40:22.020

不用担心`xrange()`，2to3 只是将其转换为`range()`. 但是，如果您正在编写可移植的代码，那么一个好主意是创建例如`compat.py`文件，您可以在其中导入跨 python 功能。例如查看 pymongo 源：[https ://github.com/mongodb/mongo-python-driver/blob/master/bson/py3compat.py](https://github.com/mongodb/mongo-python-driver/blob/master/bson/py3compat.py)

# ruby - 部分文件可编辑的人偶模板

> ID：14871718
> 
> 赞同：0
> 
> 时间：2013-02-14T09:37:30.227
> 
> 标签：ruby, puppet

我有一个由 puppet 部署的配置文件，它是一个模板。使用此配置文件的程序编辑文件的一部分，这意味着每次 puppet 运行都会替换该文件。

是否可以声明一个未由 puppet 定义且可以编辑的变量区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:28:14.667

在这种情况下，您应该求助于[augeas](http://projects.puppetlabs.com/projects/1/wiki/puppet_augeas)。它将允许 puppet 只更改它知道或想要控制的配置键，而不是整个文件。因此，您将使用`file`资源来确保文件存在，但不关心内容。然后用于`augeas`管理您希望控制的部分内容。

# java - Log4J SQL 日志记录 TopLink

> ID：14871720
> 
> 赞同：2
> 
> 时间：2013-02-14T09:37:33.627
> 
> 标签：java, sql, log4j, toplink

有谁知道使用调用某些 sql 查询的方法后如何在控制台上查看 SQL 日志的解决方案？我正在使用 Eclipse、Log4J fw 和 TopLink V11.1.1.5。

这是我的 log4j 文件：

```
log4j.appender.sql.Threshold=INFO
log4j.appender.sql=org.apache.log4j.jdbc.JDBCAppender
log4j.appender.sql.URL=url
log4j.appender.sql.sql=xxxx
log4j.appender.sql.password=pwd
log4j.appender.sql.user=user
log4j.appender.sql.driver=driver 
```

我想我在 Log4j 属性文件中遗漏了一些行。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:44:37.527

我不认为你可以通过配置来做到这一点，AFAIK 你需要在触发它们之前记录语句（来自代码）。或者，您可以使用 SQL Monitor 之类的方法，但您的 log4J 日志文件中不会包含这些语句。

如果您决定使用第一个选项，您可以创建一个包装类来运行记录这些的 SQL 语句。

# jquery - 如何在 jquery 花式框 v2.1.4 中更改弹出框的大小？

> ID：14871722
> 
> 赞同：0
> 
> 时间：2013-02-14T09:37:41.867
> 
> 标签：jquery, html, css, popup, fancybox

我正在使用 jquery fancy-box v2.1.4（请参阅[此处](http://fancybox.net/)的 fancybox 网站）。Fancybox 工作正常，但我无法更改弹出窗口的大小。如何控制fancybox弹出窗口的大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T10:20:59.383

FancyBox 作为内置方法将宽度和高度设置为生成的“窗口”以保存内容...查看网站以获取更多说明，但这里很受欢迎：

```
// initialize popup iframe (fancybox)
$(".yourframeclass").fancybox({
'autoDimensions': false,
'padding'       : 0,
'width'         : 940,
'height'        : 400,
'autoScale'     : false,
'transitionIn'  : 'none',
'transitionOut' : 'none',
 'type'          : 'iframe'
 }); 
```

在这里，我设置了一个固定为 940px x 400px 的弹出窗口（它也可以是 % 值）......如果内容大于fancybox持有人，它将在同一个持有人而不是文档本身上生成滚动条！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:14:32.333

我不知道希望这是有用的。

```
$("yourSelector").fancybox({
    'width': 560, //change this value with width u want
    'height': 340 //change this value with height u want
}); 
```

# xpages - XPages：如何隐藏编辑框控件？

> ID：14871723
> 
> 赞同：1
> 
> 时间：2013-02-14T09:37:42.813
> 
> 标签：xpages

我想使用编辑框控件来存储一些东西，但我不想在 UI 中显示编辑框。我试图将*渲染*或*加载*的属性设置为 false，编辑框控件不显示，但我无法访问该控件，因为它没有渲染。有任何想法吗？感谢帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T09:47:19.893

您可以为此使用*隐藏输入控件*：

```
<xp:inputHidden> 
```

或者将编辑框的样式属性设置为

```
display:none; 
```

# http-headers - 从容器访问 IHttpRequest 或 IRequestContext

> ID：14871724
> 
> 赞同：3
> 
> 时间：2013-02-14T09:37:51.123
> 
> 标签：http-headers, servicestack, funq

我需要根据传入请求中 HTTP 标头的值来解决我的服务的依赖关系。

我试过像这样注册一个工厂方法：

```
container.Register(c => GetDependencyForRequest(c.Resolve<IHttpRequest>())); 
```

我也试过：

```
container.Register(c => GetDependencyForRequest(c.Resolve<IRequestContext>())); 
```

但是，两者都抛出`ResolutionException`s。

我不想让我的服务负担决定使用哪种实现。我只是希望他们`IDependency`在他们的构造函数中有一个并让容器解决它。

有没有办法做到这一点？或者还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:18:08.983

我不确定是否有办法通过 IoC 容器来做到这一点。一种可能的解决方案是创建您自己的 Service 子类，该子类可以基于 Http Header 在其构造函数中“新建”您的 IDependency。下面是一些伪代码给你一个想法。希望这可以帮助。

```
public abstract class MyServiceBase : Service
{
    private Dictionary<string, Func<IDependency>> Dependencies = new Dictionary<string, Func<Dependency>>()
                                                                    {
                                                                        {"header1", () => new Dependency()},
                                                                        {"header2", () => new Dependency()}
                                                                    };

    public IDependency Dependency { get; set; }

    protected MyServiceBase()
    {
        this.Dependency = this.Dependencies[this.RequestContext.GetHeader("headerName")]();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T17:54:03.417

答案比我想象的要简单得多：

```
container.Register(c => FindDependencyForRequest(HttpContext.Current.ToRequestContext())); 
```

# websphere-portal - 我们如何将 IBM Websphere 门户中的 JSP 页面视为 IFrame

> ID：14871727
> 
> 赞同：0
> 
> 时间：2013-02-14T09:38:02.207
> 
> 标签：websphere-portal

我们如何将 IBM Websphere 门户中的 JSP 页面视为 IFrame。我以前做过这个，但我不记得我使用了哪个 portlet。有人可以帮助解决这个问题吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T00:55:25.527

iframe 模式下始终存在 Web Clipper Portlet：

[http://infolib.lotus.com/resources/portal/8.0.0/doc/en_us/PT800ACD001/admin/adclclpr.html](http://infolib.lotus.com/resources/portal/8.0.0/doc/en_us/PT800ACD001/admin/adclclpr.html)

-斯科特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:27:09.320

哪个 websphere 门户版本？你的意思是JSP 服务器portlet 吗？

# spring - JPA 无法在多对一关系中分配新的持久实体

> ID：14871731
> 
> 赞同：0
> 
> 时间：2013-02-14T09:38:27.403
> 
> 标签：spring, hibernate, jpa

我必须使用多对一的双向关系定义 JPA 实体，特此：

```
@Entity
public class Department implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @SequenceGenerator(name="DEPARTAMENTO_ID_GENERATOR",sequenceName="DEPARTAMENTO_SEQ")
    @GeneratedValue(strategy=GenerationType.SEQUENCE,generator="DEPARTAMENTO_ID_GENERATOR")
    @Column(name="DEP_ID")
    private long id;

    @Column(name="DEP_DESC")
    private String desc;

    //bi-directional many-to-one association to Academico
    @OneToMany(mappedBy="department")
    private Set<Proffesor> proffesors;
//getters and setters
}

@Entity
@Table(name="ACADEMICOS")
public class Proffesor implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @SequenceGenerator(name="ACADEMICOS_ID_GENERATOR", sequenceName="ACADEMICOS_SEQ")
    @GeneratedValue(strategy=GenerationType.SEQUENCE,generator="ACADEMICOS_ID_GENERATOR")
    @Column(name="ACD_ID")
    private long id;
@ManyToOne(cascade={CascadeType.PERSIST,CascadeType.MERGE})
    @JoinColumn(name="ACD_DEPADSCRITO_DEP")
    private Department department;
// getters and setters.
} 
```

在事务性 Spring 服务之后，我有下一个代码来以这种方式操作实体。

```
@Transactional (propagation=Propagation.REQUIRED)
    public void createDepartmentWithExistentProffesor(String desc,Long idAvaiableProf) {
        // new department   
        Department dep = new Department();
        dep.setDesc(desc);
        HashSet<Proffesor> proffesors = new HashSet<Proffesor>();
        dep.setProffesors(proffesors);

// I obtain the correct attached Proffesor entity
        Proffesor proffesor=DAOQueryBasic.getProffesorById(idAvaiableProf);

// I asign the relationship beetwen proffesor and department in both directions
                dep.addProffesors(proffesor);
// Persists department      
        DAODataBasic.insertDepartment(dep);
// The id value is not correct then Exception ORA-0221
        System.out.println("SERVICIO: Departamento creado con id: " + dep.getId());

    } 
```

正如我在评论中所说，持久化的新部门的ID不是事务中的真实数据库ID，那么它就会产生异常

```
Exception in thread "main" org.springframework.orm.jpa.JpaSystemException: org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update
........

Caused by: java.sql.BatchUpdateException: ORA-02291: integrity restiction (HIBERNATE_PRB.FK_ACD2DEP) violated - primary key don't found 
```

我在测试中尝试过，持久化与 Proffesor 没有关系的新部门实体，我发现新部门持久化实体的 id 在事务中没有有效值，但在事务之外，id 已经有正确的值。但我需要交易中的正确值。

有谁能够帮我？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:45:16.090

尝试这个

```
@OneToMany(mappedBy="department",cascade = CascadeType.PERSIST)
private Set<Proffesor> proffesors; 
```

# c++ - 如何使用结构数组作为结构数组的索引？

> ID：14871733
> 
> 赞同：0
> 
> 时间：2013-02-14T09:38:32.067
> 
> 标签：c++, struct, opencl

我有这个结构数组，其中一些运算符重载

```
struct xyz
{
  int x; float y;
};

std::vector<xyz> a1,a2,a3; 
```

当我将其用作

```
a1 [ a2 [ i ] ] = a3 [ i ]

//by this I mean

//a1 [ a2 [ i ].x ].x = a3 [ i ].x
//a1 [ a2 [ i ].x ].y = a3 [ i ].y 
```

我收到此错误“\OCL6D24.tmp.cl”，第 236 行：错误：表达式必须具有整数或枚举类型

我在 OpenCL 内核中使用它。但是这个问题类似于普通的 C++ 程序。我该如何解决这个问题？

**更新：我认为我需要的东西是不可能的，尤其是在 OpenCL 内核的情况下。但我解决了我的问题。这是一个设计缺陷。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:41:08.290

您必须使用某种关联容器才能做到这一点。例如`std::map`或`std::unordered_map`(on `C++11`)。`std::vector`仅支持使用整数类型进行索引（就像错误所说的那样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:46:42.167

[std::vector::operator[]](http://en.cppreference.com/w/cpp/container/vector/operator_at)将 size_t 作为输入，但您将对象传递`xyz`给它。这就是您的编译器拒绝您的代码的原因。

要解决您的代码，您可以重载`operator int()`以将对象隐式转换为整数：

```
struct xyz
{
  int x; float y;
  operator int()
  {
    return x;
  }
}; 
```

但是您需要确保返回值与向量中的正确索引相关。

或者使用一些关联容器`std::unordered_map`来代替。

# jquery - 如何将此代码从'each'重写为'for'？：

> ID：14871734
> 
> 赞同：1
> 
> 时间：2013-02-14T09:38:36.470
> 
> 标签：jquery, for-loop, each

如何将此代码从“每个”重写为“为”：

```
myDiv.scroll(function () { 
    $nower = (($(this).scrollTop() + $start_pr) / $skorost) + $ugol * 8;
    $.each(ImgDiv, function(index) {
        $(this).offset({ top: Math.cos((index + 1) * $ugol + $nower) * $size_dug + $smes_y, left: Math.sin(-((index + 1) * $ugol + $nower)) * $size_dug + $smes_x });
    });
}); 
```

我正在尝试，但它不起作用：=（

```
myDiv.scroll(function () {  
    var $nower = (($(this).scrollTop() + $start_pr) / $skorost) + $ugol * 8;
    for (var ink = 0, len = ImgDiv.length; ink < len; ink++) {
        ImgDiv[ink].offset({top: Math.cos((ink + 1) * $ugol + $nower) * $size_dug + $smes_y, left: Math.sin(-((ink + 1) * $ugol + $nower)) * $size_dug + $smes_x });
    };
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:40:49.770

您可能正在尝试在对象而不是 jQuery 对象上调用`jQuery`函数偏移量。`DOM`将`DOM`对象转换为`jQuery`对象，如下所示。

改变

```
ImgDiv[ink] 
```

至

```
$(ImgDiv[ink]) 
```

你的代码是

```
myDiv.scroll(function () {  
        var $nower=(($(this).scrollTop()+$start_pr)/$skorost)+$ugol*8;
        for (var ink=0, len = ImgDiv.length; ink < len; ink++)
        {
        $(ImgDiv[ink]).offset({top: Math.cos((ink+1)*$ugol+$nower)*$size_dug+$smes_y, left: Math.sin(-((ink+1)*$ugol+$nower))*$size_dug+$smes_x });
        };
    }); 
```

# php - Magento：更改配置选项而不保存它

> ID：14871738
> 
> 赞同：4
> 
> 时间：2013-02-14T09:38:47.513
> 
> 标签：php, magento, magento-1.5

在我的 Magento 模块中，我只想更改一次运行的配置选项 - 更改不应保存在数据库中。

只是在运行时在某些条件下更改它，以便所有后续核心调用等都使用该选项。

我知道你可以使用类似的东西`Mage::getConfig()->saveConfig(...)`，但这实际上保存了数据库中的更改。
我正在使用`Magento 1.5`.

这有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:46:41.253

试试这个：

```
Mage::getConfig()->setNode($path, $value); 
```

见[http://incho.net/ecommerce/magento/how-to-programmatically-change-magentos-core-config-data/comment-page-1/#comment-9535](http://inchoo.net/ecommerce/magento/how-to-programmatically-change-magentos-core-config-data/comment-page-1/#comment-9535)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-19T07:44:07.710

用于`$store->setConfig('config_path', 'value_to_set')`考虑内存缓存。请注意，这与 Magento 配置缓存无关，但如果您`Mage::getStoreConfig()`使用相同的路径调用两次，它不会读取加载的 XML 结构，而是在数组中查找它。

请参阅：[https ://stackoverflow.com/a/23384578/664108](https://stackoverflow.com/a/23384578/664108)

# magento - 从侧边栏“非主页”Magento 中删除/添加内容块

> ID：14871742
> 
> 赞同：0
> 
> 时间：2013-02-14T09:39:01.863
> 
> 标签：magento, templates, layout, positioning, sidebar

我是 magento 的新手，无法找到我正在寻找的答案。我刚买了一个模板，它运行良好，希望我只是修改我的侧边栏类别/产品视图页面的布局。（我的主页通过管理面板排序）。

基本上，我该如何从侧边栏中添加和删除内容块？

PS：magento 是否有某种备忘单？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:04:28.977

在 local.xml 中

```
<layout_handle>
   <remove name="left.permanent.callout" />  

   <remove name="catalog.compare.sidebar" />  <!--product compare-->

   <remove name="left.reports.product.viewed" /> <!--recently viewed prod-->

</layout_handle>" 
```

这样你就可以删除你想要的任何块。

# mechanicalturk - 撞上亚马逊机械土耳其人 HIT

> ID：14871747
> 
> 赞同：6
> 
> 时间：2013-02-14T09:39:18.450
> 
> 标签：mechanicalturk

我们通过 Amazon Mechanical Turk 为两名玩家提供基于网络的游戏。对于每场比赛，我们需要两名玩家同时进入，或者最多相隔 1 分钟。我们注意到，在我们发布 HIT 后的最初几分钟，我们得到了很多工人，因为 HIT 在他们的搜索结果的第一页上，但后来随着游戏移到前一页，率下降。因此，为了获得足够多的同时工作人员，我们不得不移除 HIT，并打开一个新的 HIT。

是否有可能，而不是删除一个 HIT，而是打开一个新的 HIT 以某种方式“碰撞”/“戳”旧的 HIT 以使其看起来是新的？

这在许多广告网站中都是可能的，当您发布广告后，您可以将其撞到广告列表的顶部。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-22T01:16:13.733

使用[TurkPrime.com](http://www.turkprime.com)可以通过使用“重新启动”功能来提高命中率。它关闭第一个 HIT 并打开一个新的 HIT，不包括完成第一个 HIT 的所有工人。效果是当按日期排序时，它会将 HIT 推到 Mechanical Turk 的顶部。

使用[TurkPrime](http://www.turkprime.com)，您可以使用自己的 Amazon MTurk 账户，但对于没有 MTurk 账户的请求者，他们可以选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-07T17:39:52.613

我所知道的唯一确定命中的方法是创建相同 HIT 类型的不同 HIT 并将 HIT 添加到该类型。出于排序目的，这会影响整个 HIT 类型的创建日期，这是工作人员经常搜索的内容。查看我使用这种方法的项目：

*   [https://github.com/HarvardEconCS/turkserver-meteor](https://github.com/HarvardEconCS/turkserver-meteor)
*   [https://github.com/HarvardEconCS/TurkServer](https://github.com/HarvardEconCS/TurkServer)

为您的 HIT 获得并发工作人员的另一种方法是在工作人员论坛上发帖。

*   [http://www.mturkforum.com/](http://www.mturkforum.com/)
*   [http://www.cloudmebaby.com/](http://www.cloudmebaby.com/)
*   [http://www.reddit.com/r/mturk](http://www.reddit.com/r/mturk)
*   [http://www.mturkgrind.com/](http://www.mturkgrind.com/)
*   [http://www.turkernation.com/](http://www.turkernation.com/)

一般来说，如果您要同时做需要两个以上工人的事情，您需要与工人建立沟通并提前安排一些事情。

# ios - 如何更改我的 iOS 应用程序的权利？

> ID：14871748
> 
> 赞同：16
> 
> 时间：2013-02-14T09:39:19.417
> 
> 标签：ios, objective-c, xcode, jailbreak, entitlements

我需要运行以下代码来关闭我的 iphone 屏幕。

在 iOS6 上：

```
void (*BKSDisplayServicesSetScreenBlanked)(BOOL blanked) = (void (*)(BOOL blanked))dlsym(RTLD_DEFAULT, "BKSDisplayServicesSetScreenBlanked"); 
```

然后使用：

```
BKSDisplayServicesSetScreenBlanked(1); // 1 to dim, 0 to undim 
```

它不起作用。有人告诉我，我需要`com.apple.backboard.client`授权才能在我的 iPhone 上工作。我不知道如何设置这些权利。我见过几种设置权利的方法，但它们让我很困惑，比如这个。

> 是的，您确实需要对权利进行代码签名。但是，不，它不必与越狱手机上的 Apple 证书一起使用。您可以通过下载 ldid 可执行文件来伪造代码签名，然后执行
> 
> ```
> cd MyAppName.app 
> ldid -Sentitlements.xml MyAppName 
> ```
> 
> 假设您的应用程序名为 MyAppName，并且您创建了权利文件 entitlements.xml。如果您使用 ldid 伪造代码签名，我相信此权利文件对您有用。

```
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN"
 "http://www.apple.com/DTDs/PropertyList-1.0.dtd"> <plist version="1.0">
   <dict>
     <key>com.apple.backboard.client</key>
     <true/>
   </dict> 
</plist> 
```

即使使用上述方法，我将上述权利文件放在哪里？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-14T22:29:45.593

**对于越狱应用程序/权利**，你需要做这样的事情。首先，创建一个名为`entitlements.xml`（或任何你喜欢的）的文件：

```
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
  <dict>
    <key>com.apple.backboard.client</key>
    <true/>
  </dict>
</plist> 
```

如果需要，您可以添加**更多权利。**此示例文件只是授予应用程序`com.apple.backboard.client`权利。

你把这个文件放在**哪里**并不重要。关键是：

1.  您将需要修改 Xcode 的`SDKSettings.plist`文件，[如此处所示](http://thebigboss.org/hosting-repository-cydia/submit-your-app/compile-for-cydia-submission)。 `CODE_SIGNING_REQUIRED`应设置为`NO`。
2.  不要在 Xcode 中对您的应用程序进行代码签名。在**Build Settings**中，确保代码签名标识设置为**Don't Code Sign**。
3.  在为**iOS 设备（不是模拟器！）****构建**应用程序之后，然后转到 Mac 上输出文件所在的目录。对于名为 的应用程序，您正在寻找该文件夹。它可能因您的配置而异，因此我不会费心告诉您它在哪里。如果有疑问，请使用命令行命令。**`HelloWorld``HelloWorld.app``find`**
***   [从此位置](http://code.google.com/p/networkpx/downloads/detail?name=ldid)下载`ldid`预先构建的，或[从此处作为源](https://github.com/rpetrich/ldid)下载。*   将 entitlements.xml 文件复制到与 where is 相同的目录中`HelloWorld.app`。（注意：你不必在这里**拥有**它......如果你把它放在其他地方，只需调整我在下面显示的命令行）。*   将目录更改为您的 entitlements.xml 文件所在的目录。*   [使用此命令伪造代码签名](http://www.saurik.com/id/8)：**

 **```
$ldid -Sentitlements.xml HelloWorld.app/HelloWorld 
```

在那之后，您需要传输整个 HelloWorld.app 文件夹以在您的设备上安装该应用程序。有很多方法可以做到这一点，听起来你已经有办法了。

我用脚本设置了整个过程，以使其更容易。

**注意：**我没有说明此权利是否是用于`BKSDisplayServicesSetScreenBlanked()`在 iOS 6 上调用的正确权利。我尚未对此进行测试。我确实知道此权利允许您`SBDimScreen()`在较低的 iOS 版本上使用。但是，这个答案只是对**如何**为越狱应用程序添加这种权利的描述。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T10:24:37.083

权利在 Xcode 项目文件中设置或在 Xcode 项目选择的权利文件中设置。

在“摘要”或“构建阶段”中的项目设置中查找设置或权利文件的名称**

# xml - 带有未声明前缀的 xml 文档格式是否正确？

> ID：14871752
> 
> 赞同：1
> 
> 时间：2013-02-14T09:39:23.937
> 
> 标签：xml, xml-namespaces, well-formed

例如我有以下文件：

```
<root>
    <prefix:element>

    </prefix:element>
</root> 
```

如您所见，名称空间`prefix`未声明。是不是这个文件格式不正确？

来自[w3fools](http://www.w3schools.com/xml/xml_dtd.asp)文档：

> “格式良好”的 XML 文档具有正确的 XML 语法。语法规则：
> 
> *   XML 文档必须有根元素
> *   XML 元素必须有一个结束标记
> *   XML 标签区分大小写
> *   XML 元素必须正确嵌套
> *   XML 属性值必须用引号引起来

...与命名空间无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:45:46.950

[XML 中的命名空间](http://www.w3.org/TR/REC-xml-names/)是独立于 XML 1.0 本身的规范。您提供的示例文档是格式良好的 XML 1.0，但根据名称空间规范不是*名称空间格式*正确的，如果您想解析它，您必须使用配置为不支持名称空间的解析器。

# javascript - 如何为 mvc3.net 中的表提供运行时分页

> ID：14871756
> 
> 赞同：0
> 
> 时间：2013-02-14T09:39:30.523
> 
> 标签：javascript, jquery, .net, ajax, asp.net-mvc-3

我正在 mvc3.net 中创建运行时表。从控制器我得到 json 集合，并在视图中根据 json 集合创建运行时表

首先我只是初始化表

```
<div id="DisplayBookChapterList" class="fLeft per30 mr15">        
    <table class="contentTable" id="tblDisplayChapterList" >            
         </table> 
```

在运行时我通过下面给定的代码填充表格行

```
$.getJSON("@Url.Action("GetBookChapterList", "CourseManagement")" + '/' + bookname,  function (data) {
$.each(data, function (key, val) {
                BookChapterlist += '<tr><td style="display:none" id=ChapterListBookID value=' + val.BookID + '>' + val.BookID + '</td><td>' + val.ChapterNo + ' </td><td>' + val.Title + '</td><td><input type=checkbox id="' + val.ChapterID + '"></td></tr>';

}
});               
$('#DisplayBookChapterList table').append(BookChapterlist); 
```

我想给这个动态创建的表分页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:45:20.737

将可选的“页面”参数添加到您的 GetBookChapterList 操作方法，并使 GetBookChapterList 返回该页面的数据。如果您使用实体框架，请使用 IQueryable 上的 Skip 和 Take 方法来实现分页。

在浏览器中，在表格底部呈现下一个/上一个页面链接，该链接获取并重新呈现下一个/上一个页面的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:54:45.090

You'll want to create the paging links to select a specific page, next, previous, first, last or whatever you need. E.g.

```
<ul>        
    @foreach (var page in Enumerable.Range(1, numPages)) {
        <li>@Html.ActionLink(page.ToString(), "GetBookChapterList", "CourseManagement", new {page}, new {@class = "page-link"})</li>
    }        
</ul> 
```

Note that all links have the css class "page-link".

On the server side, add a "page" parameter to your action so you know which page to fetch in the controller.

Now, back to the HTML code: the href of each link is the address where to fetch the data from and we can use this in our JavaScript code:

```
<script>
    $(function() {
        $(".page-link").on('click', function(e) {
            e.preventDefault();
            $.getJSON($(this).attr('href'), function(data) {
                console.log(data);
            });
        });
    });
</script> 
```

The nice thing about this approach is that you can make it easily fall back for clients that have JavaScript disabled: in the "GetBookChapterList" action, check if the request is an ajax request (Request.IsAjaxRequest()). If so, return the required JSON data. If not, render a normal, full page showing the selected page of the table.

This is generally a good approach: if possible, make sure the site works without JavaScript, then add JavaScript to improve it.

# javascript - 在javascript中使用“that”关键字

> ID：14871757
> 
> 赞同：18
> 
> 时间：2013-02-14T09:39:35.237
> 
> 标签：javascript

我很少有广泛使用关键字“that”的javascript。我看到很多帖子都在谈论 javascript 关键字“this”。

我想了解这个关键字在 javascript 上下文中的含义以及它的可见性/范围。

就像是

```
that.someFunctionaName(someParameter) 
```

这是什么意思？

我理解关键字“this”总是指向当前对象的所有者。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-14T09:42:29.133

`that`不是 JavaScript 中的关键字。我怀疑您拥有的代码正在使用类中的某些内容来定义自身的实例。例如：

```
function myClass()
{
    var that = this;
} 
```

通过这样做，您可以确保您引用的是对象，而不是另一个元素。例如，考虑以下示例：

```
function myClass()
{
    var that = this;
    $('.myele').click(function() {  

        // 'this' refers to the element that was clicked.
        // 'that' still refers to the myClass() object.
    });
} 
```

# java - 将文件路径插入数据库删除\

> ID：14871760
> 
> 赞同：3
> 
> 时间：2013-02-14T09:39:41.127
> 
> 标签：java, filechooser

我是java新手。我想将从中选择的文件路径插入`FileChooser`到数据库中。但是当我尝试这样做时，路径在查询语句之前是正确的，并且在将其输入数据库后，它会删除文件路径中存在的所有反斜杠。

```
filepath=f.getCanonicalPath();
// some database statements....
String query="insert into table1 values('" + filepath + "')"; 
```

如果我选择的文件路径是：

> "C:\users\documents\hello.txt";

它将其插入为：

> “C:Usersdocumentshello.txt”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T09:43:16.383

基本上，您不应该像那样将您的价值直接放入 SQL 中。

您应该使用[`PreparedStatement`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html)并使用您的值设置*参数*。不需要转义，也没有 SQL 注入攻击的风险。

```
String query = "insert into table1 values(?)";

PreparedStatement statement = connection.prepareStatement(query);
try {
   statement.setString(1, filePath);
   statement.executeUpdate();
} finally {
   statement.close();
} 
```

*每当您*发现自己基于用户输入动态构建 SQL 时，您应该退后一步，*强烈*考虑参数化 SQL。（如果您的应用程序基本上是 SQL 开发工具，则例外情况......）

# javascript - 在页面加载时，使用 JQuery 如何创建复选框？

> ID：14871769
> 
> 赞同：-2
> 
> 时间：2013-02-14T09:40:09.210
> 
> 标签：javascript, jquery

以下代码创建了一个加载有值的表，因此每次创建行时，我都希望该行上的复选框位于第一列。

```
var LoadLabels = function (data) {
    var CableInfos = eval(data);
    var newContent = '';
    var currentState = Hesto.Html.SaveTableState('#ScannedLabelList');

    if (CableInfos.length != 0) {
        $.each(CableInfos, function (i, item) {
            var sideFlag = item.KeepSideFlag;
            newContent += Hesto.Html.StsrtTR(); This is the column     where i wanna load my checkboxes
            newContent += Hesto.Html.StartTR(item.Serial, null);
            newContent += Hesto.Html.CreateTD(item.Serial, null);
            newContent += Hesto.Html.CreateTD(item.KanbanNumber, null,   null);
            newContent += Hesto.Html.CreateTD(item.CustomerNumber,   null, null);
            newContent += Hesto.Html.CreateTD(item.Description, null,    'centerAlign');
            newContent += Hesto.Html.CreateTD(item.Quantity, null);
        //  newContent += Hesto.Html.CreateTD('<input id="deleteRow"     type="button" value="Delete" onclick="deleteRow(this)">', null);
            newContent = Hesto.Html.EndTR(newContent);

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:44:25.187

您可以将复选框标记附加到您的 newContent 字符串：

```
$("newContent").append("<input type=checkbox name=" + Hesto.Html.StsrtTR() value=" + Hesto.Html.StsrtTR() + ">"Checkbox 
```

# javascript - 为google chart api提供渐变色绘制饼图

> ID：14871770
> 
> 赞同：0
> 
> 时间：2013-02-14T09:40:09.840
> 
> 标签：javascript, pie-chart, google-visualization

我正在使用谷歌图表 API 在页面上绘制饼图。这使用一些默认颜色来绘制饼图的扇区。我们可以选择提供我们自己的颜色来绘制饼图，如[https://google-developers.appspot.com/chart/interactive/docs/gallery/piechart](https://google-developers.appspot.com/chart/interactive/docs/gallery/piechart)`colors:['red','#004411']`中所建议的那样。现在我想知道如何通过向 API 提供渐变颜色来实现一些玻璃效果？有什么方法我无法做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T00:27:06.517

[已经在这里](https://stackoverflow.com/questions/14607708/use-gradient-colors-for-pie-chart-in-a-range-of-two-colors/14638874#14638874)回答了。这就是它所说的：

> 通过新 SVG 饼图的标准配置选项是不可能的。
> 
> 但是，如果您喜欢这种事情，可以使用 CSS 为饼图的元素着色。CSS 可以根据浏览器等以各种方式创建渐变。有关详细信息，请参阅[此站点](http://css-tricks.com/examples/CSS3Gradient/)。
> 
> 如果您想为饼图的特定元素着色，您可以使用 Google Chrome 中的开发者工具等工具来帮助追踪特定元素，并使用上述 CSS 重新着色该元素。
> 
> 这在 IE 中可能无法正常工作（几乎没有）。
> 
> 然而，总的来说，渐变的使用往往只是吸引眼球，实际上使图表更难阅读（饼图并不重要，饼图[通常不是图表的最佳选择](http://peltiertech.com/WordPress/peltier-loves-pie/)）。

# php - 从 joomla 获取文章标题到插件中

> ID：14871772
> 
> 赞同：0
> 
> 时间：2013-02-14T09:40:16.043
> 
> 标签：php, joomla

所以我有这个工作 PHP 代码来获取 Joomla 当前显示的文章：

```
<?php
    $option = JRequest::getCmd('option');
    $view = JRequest::getCmd('view');
if ($option=="com_content" && $view=="article") {
    $ids = explode(':',JRequest::getString('id'));
    $article_id = $ids[0];
    $article =& JTable::getInstance("content");
    $article->load($article_id);
    echo $article->get("title");
}
else {
    echo "Error - not an article";
}
?> 
```

我已经成功地在 ChronoForms 中使用它来获取我的文章名称以通过电子邮件发送给客户，这恰好是一个招标网站，每个文章名称的末尾都有一个 ID 代码，例如 12345。

是否有任何快速而肮脏的方法可以将此代码插入到 joomla 中的某个位置，以便我可以在文章中动态修改我的插件，例如：

```
{gallery}12345{/gallery} 
```

我尝试将它直接添加到模板中，但无论我在哪里插入它（顶部、底部、中间）都会出现各种问题。我还在文章 joomla 插件中尝试了一个 PHP，但该代码停止了页面显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T13:15:28.630

根据评论，这是我的理解；如果我弄错了，请纠正我。

您有一些包含代码的文章

```
{gallery}here!{/gallery} 
```

插件应该替换为哪个

```
 {gallery}The title of the article{/gallery} 
```

如果是这样，这将需要在 com_content, view=article 上发生，Joomla 将使插件的 onContentBeforeDisplay() 文章对象可用。

```
function onContentBeforeDisplay($context, &$article, &$params, $page=0){
    $view     = JRequest::getCmd('view'); 
    if ($view == 'article') {
        $content = $article->text;  
        $title = $article->title;
        $content = preg_replace('/{gallery}.*{\/gallery}/',"{gallery}$title{/gallery}",$content);
        $article->text = $content;
    }
} 
```

但是，如果您需要另一篇文章的标题，或者在 com_content view=article 之外需要它，那么您必须实例化 com_content 并从那里获取它。

# django - 没有 Neo4Django 的 Django 和 Neo4j

> ID：14871775
> 
> 赞同：9
> 
> 时间：2013-02-14T09:40:27.770
> 
> 标签：django, django-models, neo4j, neo4django

我正在使用 Neo4j（以及 Postgres）构建一个 Django 应用程序，我发现这个名为[neo4django](https://github.com/scholrly/neo4django/ "neo4django")的 Django 集成，我想知道是否可以仅使用 neo4restclient，例如，不使用 Neo4django 的缺点是什么？仅使用 neo4-rest-client 是否会给我更大的灵活性？当我用 Neo4Django 创建我的模型时，似乎在建模图形数据库和关系数据库之间没有区别。我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T21:49:06.877

您绝对可以继续使用 neo4j-rest-client 或 py2neo，而无需使用 neo4django。同样，您可以使用 Django、任何 REST 客户端等随时使用您想要的任何其他数据库驱动程序。

你会失去什么？模型 DSL、内置查询（例如`Person.objects.filter(name="Mohamed")`）、内置索引以及其背后的 Lucene、Gremlin 和 Cypher。有些事情会容易得多——比如在节点上设置任意属性——但你需要更多地了解 Neo4j 的工作原理。

您还将丢失 Django 提供的一些与 neo4django 一起使用的快捷方式，例如`get_object_or_404()`和一些与查询集一起使用的基于类的视图。

你会得到什么？绝对强大的数据库，更容易调整数据库性能。尽管 neo4django 不像 Python 领域中的一些传统 ORM 那样出色，但在功率与提供的易用性之间的权衡是相似的。

也就是说，两者可以一起工作——您可以随时从 neo4django 下拉到底层 REST 客户端节点和关系。只需用于`model_instance.node`从模型中获取底层的 neo4j-rest-client 节点对象，并`from neo4django.db import connection`获取包装的 neo4j-rest-client `GraphDatabase`。

关于你是否遗漏了什么：neo4django 是为了重用强大的开发人员界面——Django ORM——而编写的，所以它应该感觉类似于为 Postgres 编写模型。我曾经写过[一些关于这种奇怪感觉](http://mattluongo.com/post/neo4django-017-released)的文章。我认为问题的一部分可能是该库没有突出显示对图形感兴趣的新开发人员期望的图形术语——比如遍历和模式匹配——而是在 Django 查询服装中穿着这些技术。

我很想知道你的想法，或者知道你想让图书馆做的任何事情，它没有做:) 祝你好运！

# global-variables - 在 ns-2 的 TCL 脚本中的过程中无法识别全局变量

> ID：14871785
> 
> 赞同：1
> 
> 时间：2013-02-14T09:40:56.170
> 
> 标签：global-variables, tcl, ns2

我正在尝试运行以下 tcl 脚本，但在过程 thpt_rec 中出现错误，即
ns: thpt_rec: can't read "tcps(0)": no such variable
while
execution "$tcps(0) set bytes_"
(procedure "thpt_rec " 第 4 行)
从
"thpt_rec"中调用

但是当我用一个名为 sink 的变量替换这个 tcps(0) 时，一切都运行良好。请阐明这个问题。

```
set ns [new Simulator]  
set tracefile [open tcpf1.tr w]  
set thptfile  [open thpt.tr  w]   
$ns trace-all $tracefile

proc finish {} {  
global ns tracefile thptfile  
$ns flush-trace  
close $tracefile  
close $thptfile  
exit 0  
}

proc thpt_rec {} {  
global ns tcps(0) thptfile  
set time 1.0   
set bw [$tcps(0) set bytes_]  
set now [$ns now]  
puts $thptfile "$now [expr $bw/$time*8/1000000]"  
$tcps(0) set bytes_ 0  
$ns at [expr $now+$time] "thpt_rec"     
}

for {set i 0} {$i < 10} {incr i} {  
set n($i) [$ns node]  
}

for {set i 0} {$i < 4} {incr i} {  
$ns duplex-link $n($i) $n(4) 10Mb 2ms DropTail  
$ns duplex-link $n(5)  $n([expr ($i+6)]) 10Mb 2ms DropTail   
}

$ns duplex-link $n(4) $n(5) 0.25Mb 10ms DropTail

set tcp(0) [new Agent/TCP]  
$ns attach-agent $n(0) $tcp(0)  
set tcps(0) [new Agent/TCPSink]  
$ns attach-agent $n(6) $tcps(0)  
$ns connect $tcp(0) $tcps(0)  
set ftp(0) [new Application/FTP]     
$ftp(0) attach-agent $tcp(0)  

$ns at 0.0 "thpt_rec"  
for {set i 0} {$i < 1} {incr i} {  
$ns at [expr (5.0 * $i )] "$ftp($i) start"  
$ns at 140.0 "$ftp($i) stop"  
}  
$ns at 150.0 "finish"  

$ns run 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T10:22:57.940

代替

```
global ns tcps(0) thptfile 
```

和

```
global ns tcps thptfile 
```

它应该可以正常工作。

~~问题是`tcps`变量是一个[数组](http://www.tcl.tk/man/tcl8.5/tutorial/Tcl22.html)，而*数组元素不是变量*——它们只是值。~~ 因此，如果要在过程中访问全局数组的元素，则应将数组变量本身声明为`global`.

# android - android重新激活在edittext中输入

> ID：14871787
> 
> 赞同：0
> 
> 时间：2013-02-14T09:40:59.950
> 
> 标签：android, android-edittext

我有一个编辑文本，我希望它一开始是不可编辑的，所以我这样做了

```
et_more.setKeyListener(null); 
```

当用户选择单选按钮时，我想再次重新激活edittext

```
public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
        case R.id.rb_dialog_price_limit_more:

            break;
        case R.id.rb_dialog_price_limit_less:
            break;
        default:
            break;
        }
    } 
```

那是onclick，请问我应该在里面放什么`case` `break`？

### 我想让它再次活跃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:45:32.260

代替`et_more.setKeyListener(null);`

您可以尝试`et_more.setEnabled(false);`并在您的开关中放置`et_more.setEnabled(true);`

# php - 无法在 Symfony2 应用程序中使用 Sahi / Mink / Behat 上传文件

> ID：14871790
> 
> 赞同：7
> 
> 时间：2013-02-14T09:41:01.587
> 
> 标签：php, symfony, behat, mink, sahi

我在 Symfony2 应用程序中使用 Mink 和 Sahi 进行用户界面测试。但实际上我无法使用 Sahi 上传文件。

我的 Sahi 服务器已启动并正在运行：

```
[09:51:33] coil@ubuntu:~/Webdev/sahi/bin$ ./sahi.sh 
--------
SAHI_HOME: ..
SAHI_USERDATA_DIR: ../userdata
SAHI_EXT_CLASS_PATH:
--------
Sahi properties file = /home/coil/Webdev/sahi/config/sahi.properties
Sahi user properties file = /home/coil/Webdev/sahi/userdata/config/userdata.properties
Added shutdown hook.
>>>> Sahi started. Listening on port: 9999
>>>> Configure your browser to use this server and port as its proxy
>>>> Browse any page and CTRL-ALT-DblClick on the page to bring up the Sahi Controller
-----
Reading browser types from: /home/coil/Webdev/sahi/userdata/config/browser_types.xml
----- 
```

我的步骤实现：

```
 // $element->getXpath() --> (//html/descendant-or-self::*[@id = 'attachment'])[1]
$element->attachFile($file); 
```

请注意，如果我使用不是`/home/coil/Webdev/sahi/userdata`目录的文件，则会收到以下错误：

```
$element->attachFile('toto'); 
```

```
error:_setFile2(_byXPath("(//html/descendant-or-self::*[@id = 'attachment'])[1]"), "toto")
      Error: File not found: toto; Base directory is userdata directory: /home/coil/Webdev/sahi/userdata
      Error: File not found: toto; Base directory is userdata directory: /home/coil/Webdev/sahi/userdata
      at Sahi._setFile (http://dev.project.com/_s_/spr/concat.js:1398:12)
      at Sahi._setFile2 (http://dev.project.com/_s_/spr/concat.js:1367:7)
      at eval (eval at <anonymous> (http://dev.project.com/_s_/spr/concat.js:3480:14), <anonymous>:1:7)
      at Sahi.ex (http://dev.project.com/_s_/spr/concat.js:3480:9)
      at <anonymous>:1:11
      <a href='/_s_/dyn/Log_getBrowserScript?href=null&n=-1'><b>Click for browser script</b></a> 
```

因此，Sahi 可以“找到”该文件，因为它不会对有效且现有的文件引发任何错误。但是当提交表单时，Sahi 代理永远不会上传文件。

其他检查：

*   我删除了客户端 HTML5 和 JavaScript 验证以确保没有副作用。
*   我所有其他的 Sahi 测试都可以，只有 3 个带有 Upload 的测试没有通过
*   代理是在我的测试浏览器中设置的
*   我可以毫无问题地在浏览器中打开 Sahi 控制器
*   MaxOsX 和 Ubuntu 上的同样问题
*   每次我运行上传测试时，我都会在 /userdata/temp/download 中有一个新条目，命名为`sahi_11a83f8806be8046fc0aaa80eac076110b95__fr-fr-2-0.bdic`

真正奇怪的是，我确信这些测试已经通过了一段时间，我的应用程序或配置中肯定发生了一些改变，这会破坏 Sahi 文件的上传，但我找不到什么。之前在 Sahi 控制台中，我有关于它正在上传的文件的日志，现在根本没有日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:54:29.750

使用 Sahi 服务器可以访问的绝对系统路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:36:54.390

表单发布到的 url 是否与网页的 url 不同？_setFile 和 _setFile2 采用第三个参数，该参数可配置为指向操作 URL（Sahi 代理应附加文件的 URL）[http://sahi.co.in/w/_setFile](http://sahi.co.in/w/_setFile)

# android - 保留对 Android 应用程序上下文的引用是否安全？

> ID：14871792
> 
> 赞同：5
> 
> 时间：2013-02-14T09:41:04.207
> 
> 标签：android, android-context, lifecycle

`Context.getApplicationContext()`在 Android 应用程序中，保留对应用程序整个生命周期返回的应用程序上下文的引用是否安全？

```
Context ac = context.getApplicationContext();
// keep the ac reference throughout the app lifetime 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T09:43:04.930

是的。在应用程序被系统杀死之前，应用程序上下文不会改变。当应用程序被杀死时，您的变量会被清除。另一方面，坚持活动上下文是不安全的。

# ios - 使用 KVO 更改属性时发送通知

> ID：14871799
> 
> 赞同：15
> 
> 时间：2013-02-14T09:41:28.973
> 
> 标签：ios, objective-c, properties, key-value-observing

`myName`我有一个在我的班级中命名的属性，例如：

```
@property (nonatomic, strong) NSString *myName; 
```

`myName`我需要在属性值更改时发送通知。

现在我正在做类似的事情：

```
- (void)setMyName:(NSString *)name
{
  _myName = name;
  [[NSNotificationCenter defaultCenter] postNotificationName:CHANGE_NOTIFICATION object:nil];
} 
```

我知道在 iOS 中有类似[**Key-Value Observing的东西。**](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueObserving/Articles/KVOCompliance.html)但是我不知道如何实现它，我阅读了整个文档，但无法很好地理解。

请帮助我了解如何在不使用自定义设置器的情况下实现相同的功能。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-14T09:57:07.930

试试这个：

```
MyClass *var = [MyClass new];
[var addObserver:self forKeyPath:@"myName" options:NSKeyValueChangeOldKey context:nil]; 
```

并实施

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{

} 
```

当 myName 属性更改时，将随时调用此方法

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-14T09:58:10.887

改为`- (void)setMyName:(NSString *)name`这样做

```
[self willChangeValueForKey:@"myName"];
_myName = name;
[self didChangeValueForKey:@"myName"];

//this generates the KVO's 
```

在你想听的地方（viewController），在 viewDidLoad 中添加这一行：

> [w addObserver:self forKeyPath:@"myName" options:NSKeyValueObservingOptionNew context:nil];
> 
> //通过这样做，你注册了viewController来监听KVO。

并实现此方法：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if ([[change objectForKey:NSKeyValueChangeNewKey] isEqual:[NSNull null]]) {
        return;
    } else {
        //read the change dictionary, and have fun :)
    }
} 
```

> //只要属性的值发生变化，就会调用这个方法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-14T10:19:43.313

要在没有客户设置器的情况下执行此操作，只需合成属性设置器。这将创建对 willChangeValueForKey / didChangeValueForKey 的所有支持调用。

`@synthesize myName;`

然后使用点语法设置属性值：

self.myName = @"伊尼戈蒙托亚"

然后观察者将自动收到 KVO 通知。

（您需要在释放被观察对象之前移除观察者。）

# oracle - oracle 8 从字符串中提取字符串

> ID：14871801
> 
> 赞同：0
> 
> 时间：2013-02-14T09:41:29.910
> 
> 标签：oracle, extract, subst

我有

“这是 <>sample<> 文本。需要提取 <>smth1<> 和 <>smth2<> 以及许多其他内容。” 在 oracle 数据库的列中。我需要得到：

样本 smth1 smth2

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:51:10.507

尝试创建此功能：

```
create or replace
Function GetSurroundedText (origStr varchar2, openingStr varchar2, closingStr varchar2, outputSep varchar2)
Return Varchar2
Is
   continue boolean := true;
   l_string Varchar2(2000) := origStr;
   startPos PLS_Integer;
   endPos PLS_Integer;
   openingStrPos PLS_Integer;
   res Varchar2(2000) := '';
   sep Varchar2(100) := outputSep;
Begin
While true
Loop
   openingStrPos :=Instr(l_string, openingStr);
   If openingStrPos > 0 Then
      startPos := openingStrPos + Length(openingStr);
      l_String := Substr(l_string, startPos);
   else
      exit;
   end if;
   endPos := Instr(l_string, closingStr);
   if endPos > 0 Then
      if res = '' Then
         sep := '';
      else
         sep := outputSep;
      end If;
      res := res || sep || Substr(l_string, 1, endpos-1);
      l_String := Substr(l_string, endPos + Length(closingStr));
   else
      exit;
   end if;
End Loop;
return res;
End; 
```

而且，在你的情况下，像这样使用它：

```
select GetSurroundedText(mycolumn, '<>', '<>', ' ') from mytable; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:54:40.063

在 Oracle/PLSQL 中，replace 函数将字符串中的一系列字符替换为另一组字符。

```
replace( string1, string_to_replace, [ replacement_string ]) 
```

所以

```
replace( YourString, '<>', ''); 
```

应该做的伎俩。

如果您的情况更复杂并且您需要更详细的解决方案，您可以检查此功能，该功能允许您在分隔符之间提取单词。

[http://www.oradev.com/parse_string.jsp](http://www.oradev.com/parse_string.jsp)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:28:08.127

使用替换功能将<>替换为''。它将起作用

# joomla2.5 - 如何在 joomla 2.5 注册表单中添加额外字段？

> ID：14871805
> 
> 赞同：0
> 
> 时间：2013-02-14T09:41:39.867
> 
> 标签：joomla2.5

我想在 joomla 2.5 注册表单中添加一个额外的文件上传字段，用于上传用户的照片：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:02:57.687

你必须：

1）修改文件`components/com_users/models/forms/registration.xml`并添加额外的字段。

2）修改函数`register($temp)`，`components\com_users\models\registration.php`以便您可以将路径/路径保存到文件/文件。

3）也许在你的数据库中添加额外的表或向`#__users`表中添加列

# mysql - 如何在 1 个查询中插入和删除记录？

> ID：14871809
> 
> 赞同：0
> 
> 时间：2013-02-14T09:41:52.063
> 
> 标签：mysql, sql-server, database, oracle

嗨我想建立一个（关注/取消关注）按钮，

如果记录不存在，则应该通过在表中“**添加**”记录来跟踪页面*{表列是 UserID 和 PageID} ，*

或者如果记录已经存在，则通过从表中“**删除”记录来取消关注页面**

我知道我可以通过创建 2 个查询在 PHP 代码中处理这个问题，但我想知道我是否可以使用 'if statment' 或其他东西来处理 1 个查询！！

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:52:41.913

在 Oracle 中，您可以使用[`MERGE`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9016.htm#SQLRF01606)带有[`DELETE`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9016.htm#i2081030)子句的语句，考虑：

```
SQL> create table foo(userid number, pageid number, dummy number);

Table created

SQL> CREATE OR REPLACE PROCEDURE follow(p_userid NUMBER, p_pageid NUMBER) IS
  2  BEGIN
  3     MERGE INTO foo f
  4     USING (SELECT p_userid userid, p_pageid pageid FROM dual) i
  5     ON (f.userid = i.userid AND f.pageid = i.pageid)
  6     WHEN MATCHED THEN
  7        UPDATE SET f.dummy = NULL
  8        DELETE WHERE 1 = 1
  9     WHEN NOT MATCHED THEN
 10        INSERT (userid, pageid) VALUES (i.userid, i.pageid);
 11  END;
 12  /

Procedure created 
```

需要虚拟列，因为`MERGE`语句不能更新连接列（在`ON`子句中）并且`UPDATE`子句是必需的。运行该语句两次将删除该行：

```
SQL> exec follow(1, 1);

PL/SQL procedure successfully completed

SQL> select * from foo;

    USERID     PAGEID      DUMMY
---------- ---------- ----------
         1          1 

SQL> exec follow(1, 2);

PL/SQL procedure successfully completed

SQL> select * from foo;

    USERID     PAGEID      DUMMY
---------- ---------- ----------
         1          1 
         1          2 

SQL> exec follow(1, 1);

PL/SQL procedure successfully completed

SQL> select * from foo;

    USERID     PAGEID      DUMMY
---------- ---------- ----------
         1          2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:47:31.360

据我所知，你不能直接这样做。作为一种解决方法，根据您启动查询的方式，您可以使用分号作为分隔符在同一个句子中启动两个查询。

当然，您总是可以使用存储过程来代替。

但是，我不认为这种解决方案是好的做法。将您的两个查询保存在同一个事务中并从业务层调用它。将来我会更加坚持。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T09:49:47.130

假设您要添加或删除的表被调用`User_Page`。

```
IF EXISTS (SELECT * FROM User_Page WHERE USerID = @userID and PageID = @PageID)
 BEGIN
  DELETE FROM User_Page  WHERE USerID = @userID and PageID = @PageID
 END
ELSE
 BEGIN
  INSERT INTO User_Page (UserID, PageID) VALUES (@userID, @pageID)
 END 
```

# ios - UIPickerView 停止 NSTimer

> ID：14871810
> 
> 赞同：0
> 
> 时间：2013-02-14T09:42:01.550
> 
> 标签：ios, objective-c, uipickerview, nstimer

我一直在开发一个只包含两个元素 a`UILabel`和 a的小应用程序`UIPickerView`。

由`UILabel`更新 以`NSTimer`从 60 倒计时到 0。

仅包含一个数据数组，`UIPickerView`不直接与`UILabel`with交互`NSTimer`。

我的问题是，当我玩`UIPickerView`并且向上或向下滚动时，计数器“动画”停止，继续执行其操作，直到您从 UIPickerView 中选择一个选项。

我无法解决这个问题，我不知道这是否是 iPhone SDK 的错误，或者是否有任何属性作为 becomeFirstResponder 可以帮助我。

我正在使用 iOS SDK 6.1。

这是我的代码：

**视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIPickerViewDataSource,UIPickerViewDelegate>{
    IBOutlet UIPickerView *uno;
    NSMutableArray *numeros;
    NSTimer *timer;
    IBOutlet UILabel *contador;
    int num;
}

@property (nonatomic, retain) IBOutlet UIPickerView *uno;

@property (nonatomic, retain) NSMutableArray *numeros;

@property (nonatomic, retain) IBOutlet UILabel *contador;

@end 
```

**视图控制器.m**

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize uno, numeros, contador;

- (void)viewDidLoad
{
    [super viewDidLoad];

    numeros = [[NSMutableArray alloc] init];
    [numeros addObject:@"0"];
    [numeros addObject:@"1"];
    [numeros addObject:@"2"];
    [numeros addObject:@"3"];
    [numeros addObject:@"4"];
    [numeros addObject:@"5"];
    [numeros addObject:@"6"];
    [numeros addObject:@"7"];
    [numeros addObject:@"8"];
    [numeros addObject:@"9"];

    uno.delegate = self;
    uno.dataSource = self;

    num = 60;

    timer = [NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(updateCounter:) userInfo:nil repeats:YES];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)thePickerView {
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component {
    return [numeros count];
}

- (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
    return [numeros objectAtIndex:row];
}

- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    NSLog(@"Hi");
}

- (void)updateCounter:(NSTimer *)theTimer {
    num = num - 1;
    [contador setText:[NSString stringWithFormat:@"%d",num]];
}

@end 
```

该应用程序如下所示：http: [//imgur.com/ljB93tN](http://imgur.com/ljB93tN)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:53:26.677

add `NSRunLoop` after

```
timer = [NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(updateCounter:) userInfo:nil repeats:YES];

NSRunLoop *runner = [NSRunLoop currentRunLoop];
        [runner addTimer:timer forMode: NSDefaultRunLoopMode]; 
```

# android - 如何强制 Android Webview 在 DOM 更改上重新绘制？

> ID：14871813
> 
> 赞同：5
> 
> 时间：2013-02-14T09:42:05.017
> 
> 标签：android, jquery, dom, webview, updating

我目前正在开发一个需要在 Android Webview 中作为本机应用程序的一部分运行的门户网站。整个门户网站大量基于 AJAX。因此，每当提交表单时，都是异步完成的。根据响应，我需要显示一个消息框，显示“成功”或“错误”。我现在正在用 jQuery 做这个。问题是，Android Webview 不会重新绘制，因此消息框将不可见。有帮助的是点击屏幕上的任意位置。这似乎迫使重新粉刷。不，我需要做的是：

1) 以另一种方式进行 DOM 更改，以便 Android Webview 正确处理它。

或者

2）通过触发一些（伪）事件或使用一些肮脏的黑客来强制重新绘制:)

有人遇到过这个问题吗？任何提示都非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T09:47:23.913

观看此[视频](https://developers.google.com/events/io/sessions/gooio2012/122/)并阅读此[答案](https://stackoverflow.com/questions/13500452/android-webview-renders-blank-white-view-doesnt-update-on-css-changes-or-html)。诀窍是使用

```
 -webkit-transform: translate3d(0,0,0); 
```

需要更新的 div 上的 css 样式。这会创建一个新层，并且动画/更新变得更加平滑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T09:12:04.303

我从来没有遇到过它显示来自非异步调用的 DOM 更新的问题，所以也许一个解决方案是让你的异步方法回调到注入的对象 ( `WebView.addJavascriptInterface()`) - 然后在 UI 线程上运行调用Webview 来更新 UI？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-19T16:48:48.063

只是一个不同的想法来获得你想要的结果：

就这通过 jQuery 工作而言，您是否尝试过在您的 WebView 上启用 JavaScript？通过这种方式，您应该能够在 WebView 中执行 JavaScript 代码（并且可能会看到来自 jQuery 的更改）。

```
myWebView.getSettings().setJavaScriptEnabled(true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-27T14:40:20.523

这是我每次强制 webview 更新的方法，请参见代码：// WEBVIEW

```
package com.example.scroll;
// philip r brenan at gmail.com, www.appaapps.com 
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.webkit.WebView;

public class MainActivity extends Activity
 {protected void onCreate(Bundle savedInstanceState)
   {super.onCreate(savedInstanceState);
    setContentView(new MyWebView(this)); 
   }
  class MyWebView extends WebView 
   {MyWebView(Context Context)
     {super(Context);
      getSettings().setJavaScriptEnabled(true);
      addJavascriptInterface(this, "Android");   
      new Thread()
       {public void run()
         {for(int j = 0; j < 100; ++j)
           {post(new Runnable()
             {public void run()
               {loadData(content(), "text/html", "utf-8"); // Display in browser
               }
             });    
            try {Thread.sleep(5000);} catch(Exception e) {}
           }  
         }
       }.start();
     } 
    int c = 0, C = 1;
    String content() 
     {final StringBuilder s = new StringBuilder();
      //s.append("<html id="+(C++)+"><body>"); // WEBVIEW REFRESHES CORRECTLY *************** 
      s.append("<html><body>");              // WEBVIEW DOES NOT REFRESH ******************

      s.append("<h1 id=11>1111</h1>");
      s.append("<script>location.href = '#22';</script>");
      for(int i = 0; i < 10; ++i) s.append("<p>"+c+c+c); ++c;

      s.append("<h1 id=22>2222</h1>");
      for(int i = 0; i < 10; ++i) s.append("<p>"+c+c+c); ++c;
      Log.e("AAAAAA", "content="+s.toString());
      s.append("</body></html>");
      return s.toString();
     }
   } 
 } 
```

# r - 在安装过程中从 Internet 下载数据的软件包

> ID：14871818
> 
> 赞同：7
> 
> 时间：2013-02-14T09:42:12.763
> 
> 标签：r, packaging

是否有人知道在安装过程中从 Internet 下载数据集然后准备并保存它以便在使用加载包时可用的包`library(packageName)`？这种方法是否有任何缺点（除了如果数据源不可用或数据格式已更改，软件包安装将失败的明显缺点）？

**编辑**：一些背景。数据是 ZIP 存档中的三个制表符分隔文件，归联邦统计局所有，通常可免费访问。我有下载、提取和准备数据的 R 代码，最后创建了三个可以以`.RData`格式保存的数据帧。

我正在考虑创建两个包：提供数据的“数据”包和对其进行操作的“代码”包。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:40:39.840

我之前做过这个模型，当你发布你的编辑时。我认为它会起作用，但未经测试。我已经评论了它，所以你可以看到你需要改变什么。这里的想法是检查当前工作环境中是否有预期的对象。如果不是，请检查可以找到数据的文件是否在当前工作目录中。如果没有找到，提示用户下载文件，然后从那里继续。

```
myFunction <- function(this, that, dataset) {

  # We're giving the user a chance to specify the dataset.
  #   Maybe they have already downloaded it and saved it.
  if (is.null(dataset)) {

    # Check to see if the object is already in the workspace.
    # If it is not, check to see whether the .RData file that
    #   contains the object is in the current working directory.
    if (!exists("OBJECTNAME", where = 1)) {
      if (isTRUE(list.files(
        pattern = "^DATAFILE.RData$") == "DATAFILE.RData")) {
        load("DATAFILE.RData")

        # If neither of those are successful, prompt the user
        #   to download the dataset.
      } else {
        ans = readline(
          "DATAFILE.RData dataset not found in working directory.
          OBJECTNAME object not found in workspace. \n
          Download and load the dataset now? (y/n) ")
        if (ans != "y")
          return(invisible())

        # I usually use RCurl in case the URL is https
        require(RCurl)
        baseURL = c("http://some/base/url/")

        # Here, we actually download the data
        temp = getBinaryURL(paste0(baseURL, "DATAFILE.RData"))

        # Here we load the data
        load(rawConnection(temp), envir=.GlobalEnv)
        message("OBJECTNAME data downloaded from \n",
                paste0(baseURL, "DATAFILE.RData \n"), 
                "and added to your workspace\n\n")
        rm(temp, baseURL)
      }
    }
    dataset <- OBJECTNAME
  }
  TEMP <- dataset
  ## Other fun stuff with TEMP, this, and that.
} 
```

* * *

## 两个包，托管在 Github

这是另一种方法，基于@juba 和 I 之间的评论。基本概念是，正如您所描述的，一个包用于代码，一个包用于数据。此函数将是包含您的代码的包的一部分。它会：

1.  检查是否安装了数据包
2.  检查您安装的数据包的版本是否与 Github 上的版本匹配，我们将假设它是最新版本。

当它未能通过任何检查时，它会询问用户是否要更新他们的软件包安装。在这种情况下，为了演示，我已经链接到我在 Github 上正在进行的一个包。这应该让您了解在您将其托管在您自己的包后需要替换什么才能使其与您自己的包一起使用。

```
CheckVersionFirst <- function() {
  # Check to see if installed
  if (!"StataDCTutils" %in% installed.packages()[, 1]) {
    Checks <- "Failed"
  } else {
    # Compare version numbers
    require(RCurl)
    temp <- getURL("https://raw.github.com/mrdwab/StataDCTutils/master/DESCRIPTION")
    CurrentVersion <- gsub("^\\s|\\s$", "", 
                           gsub(".*Version:(.*)\\nDate.*", "\\1", temp))
    if (packageVersion("StataDCTutils") == CurrentVersion) {
      Checks <- "Passed"
    }
    if (packageVersion("StataDCTutils") < CurrentVersion) {
      Checks <- "Failed"
    }
  }

  switch(
    Checks,
    Passed = { message("Everything looks OK! Proceeding!") },
    Failed = {
      ans = readline(
        "'StataDCTutils is either outdated or not installed. Update now? (y/n) ")
      if (ans != "y")
        return(invisible())
      require(devtools)
      install_github("StataDCTutils", "mrdwab")
    })
# Some cool things you want to do after you are sure the data is there
} 
```

试试看`CheckVersionFirst()`。

> *注意*：只有当您虔诚地记得每次将新版本的数据推送到 Github 时都在描述文件中更新您的版本号时，这才会成功！

因此，为了澄清/概括/扩展，基本思想是：

*   定期将***数据***包的更新版本推送到 Github，请务必在其文件中更改***数据包的版本号。***`DESCRIPTION`
*   将此`CheckVersionFirst()`函数作为`.onLoad`事件集成到您的***代码***包中。（显然修改函数以匹配您的帐户和包名称）。
*   更改读取的注释行`# Some cool things you want to do after you are sure the data is there`以反映您实际想要做的很酷的事情，这可能会从`library(YOURDATAPACKAGE)`加载数据开始......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:03:29.767

这种方法可能效率不高，但却是一个很好的解决方法。如果您正在制作一个需要定期更新数据的包，请先制作一个包含该数据的包。它不需要任何函数，但我喜欢 setter 的概念（在这种情况下你可能不需要它）和 getter。

然后，当您制作包时，将“数据”包作为依赖项。这样，每当有人安装您的软件包时，他/她将始终拥有最新数据。

就您而言，您只需更换“数据”包中的数据，然后将其上传到您想要的存储库。

如果您不知道如何构建包，请检查`?packages.skeleton`和`R CMD CHECK`，`R CMD BUILD`

# c++ - C ++为什么不提供整数的系统最大大小？

> ID：14871820
> 
> 赞同：0
> 
> 时间：2013-02-14T09:42:20.660
> 
> 标签：c++, c, integer, bit-manipulation

因此，如果我理解正确，整数是字节的集合，它表示以二为底的格式的数字，如果你愿意的话。

因此，如果我有 unsigned int test=0，那么它实际上应该只包含一个位字段，所有这些位都为零。然而，

```
unsigned int test=0;
test=~test; 
```

产生**-1**。

我原以为这会用 填充所有位`'1'`，使整数在该系统上尽可能大....

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T09:43:39.650

你如何打印价值？

如果它显示为“-1”或一个大的无符号整数只是在打印出来时*解释*位的一种方式，这些位本身不知道区别。

您需要将其打印为一个`unsigned`值。

此外，正如其他答案所指出的，您对系统如何存储数字有很多疑问；无法保证数字与用于表示该数字的位之间存在特定的相关性。

无论如何，获得这个值的正确方法是[`#include <climits>`](http://www.cplusplus.com/reference/climits/)使用`UINT_MAX`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T09:44:10.130

你没有正确理解。整数表示整数，仅此而已。表示的细节不是标准的一部分（除了少数例外），您没有必要假设按位运算和整数值之间存在任何相关性。

（具有讽刺意味的是，标准通过模块化算术规则强制转换为无符号整数*实际上**是*该无符号类型的最大可能值。）`-1`

 **更新：*为了澄清，我说的是所有整数类型。如果您只使用*无符号类型*（我假设您不是因为您的否定答案），那么您在按位运算和表示的值之间有一个明确定义的对应关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T12:36:58.387

或者，您可以使用：

```
unsigned int test =0;
test--; 
```*

# java - 读取使用 Struts 上传的文件

> ID：14871825
> 
> 赞同：0
> 
> 时间：2013-02-14T09:42:42.467
> 
> 标签：java, jsp, servlets, struts

我尝试读取通过浏览上传的文件。为此，我正在使用 apache commons fileupload jar。因此，在使用项目应用程序运行它之前，我只需执行一个成功读取文件的 servlet/jsp POC 项目。下面是代码，

```
protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

        boolean isMultipart = FileUpload.isMultipartContent(request);
        String content = "";

        try {
            if (isMultipart) {
                FileItemFactory factory = new DefaultFileItemFactory();
                FileUploadBase upload = new FileUpload(factory);
                String[] arr;
                List items;

                items = upload.parseRequest(request);

                Iterator iter = items.iterator();
                while (iter.hasNext()) {
                    FileItem item = (FileItem) iter.next();
                    if (!item.isFormField()) {
                        BufferedInputStream buff = new    BufferedInputStream(
                                item.getInputStream());
                        byte[] bytes = new byte[buff.available()];
                        buff.read(bytes, 0, bytes.length);
                        content = new String(bytes);
                        arr = content.split(",");

                    }
                }
            }

            request.getRequestDispatcher("success.jsp").forward(request,
                    response);
        } catch (FileUploadException e) {

        } 
```

我使用了 jar 版本 1.1，因为我的项目目录具有该版本的 jar，并且它使用 java 1.4。对于 java 1.5，我们假设使用 ServletFileUpload 而不是 FileUpload 。但我想我可以在哪里使用更早版本的 jar 进行工作并不重要。

当我将它与使用 struts 1.1 的实际应用程序一起使用时，问题就来了。一切似乎都很好，但我在解析请求时不返回项目。

items = upload.parseRequest(request);

**这里的项目是空的。**

所以我能发现的不同之处在于，成功显示结果的 POC 项目是一个 JSP/Servlet 项目，其中真正的应用程序正在使用 Struts。

在这种情况下，JSP/Servlet 和 Struts 项目中的请求会有所不同吗？

在这两种情况下，我都会在下面的表格中使用。

```
<form action="SampleWeb" method="post" enctype="multipart/form-data">
<input type="file" name="datafile" size="40">
<input type="submit" value="Submit"> 
```

下面是struts应用程序中唯一的添加，

```
 <action
        path="/ReportsAction"
        type="come.test.ReportsAction"
        name="ReportsForm"
        scope="request"
        validate="false"
        parameter="dispatch">
        <forward name="success" path="/reports/A.jsp"/>
        <forward name="updatesuccess" path="/common/B.jsp"/>              
    </action> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:14:16.583

请求就是请求。

但是，如果您使用的是 Struts 1，请实际*使用*Struts 1。

**表单，Java 端**

将 an`ActionForm`与`FormFile`属性一起使用：

```
public class YourForm extends ActionForm {
private FormFile file; // Plus public getter/setter
    // Etc.
} 
```

您还可以执行诸如验证内容类型之类的操作：

```
public ActionErrors validate(ActionMapping mapping, HttpServletRequest request) {
    if (!"text/plain".equals(getFile().getContentType())) {
        // etc. 
```

**表单，JSP 端**

```
<html:form action="/uploadAction" method="post" enctype="multipart/form-data">
  <html:file property="file" />
  <!-- Etc... --> 
```

**那个行动**

在操作中，您应该将文件复制到其最终目的地（在 webapp*之外*；使用配置参数来定义文件的最终位置）。考虑使用实用程序库来进行复制（或移动，可能有几个选项），而不是像某些教程中所示的那样完成动作中的所有工作。

[http://www.mkyong.com/struts/struts-file-upload-example/](http://www.mkyong.com/struts/struts-file-upload-example/)

不要盲目地跨环境使用相同的技术：这项工作是*为*您处理的。

此外，避免将 Struts 1 用于新项目。它比 Struts 2 或 Spring MVC 等更现代的选项（反过来又比 Rails、Grails、Play 等更难使用）更古老且更难使用。

# android - 跨不同应用程序的 Android 活动静态变量

> ID：14871832
> 
> 赞同：-1
> 
> 时间：2013-02-14T09:43:09.913
> 
> 标签：android

我正在创建一个实现我的 Activity 子类的库项目，然后在不同的应用程序中重用它。当我在一个应用程序中为活动设置静态变量时，这对使用同一类的其他应用程序有影响吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:47:59.220

不，因为每个应用程序都在一个完全独立的进程中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:54:14.800

*当我在一个应用程序中为活动设置静态变量时，这对使用同一类的其他应用程序有影响吗？*

不，不同的应用程序是不同的过程。但是你知道在某些情况下，Android 可能会杀死进程并稍后重新启动它的活动吗？在这种情况下，您的静态变量将丢失其值。（我想您已经知道，当您转动屏幕时（以及在某些其他情况下），Activity 会被销毁并重新创建。）

# jquery - jquery ui 对话覆盖未显示

> ID：14871833
> 
> 赞同：2
> 
> 时间：2013-02-14T09:43:10.923
> 
> 标签：jquery, css, jquery-ui

我`jquery ui dialogue`在我的`asp.net mvc application`.
我只是复制了与它们相关的样式`ui dialogues`并修改/自定义了它们。
我为叠加添加了以下样式：

```
 .ui-widget-overlay
 {
     background: #666666 url(images/ui-bg_diagonals-thick_20_666666_40x40.png) 50% 50% repeat;
     opacity: .5;
     filter: Alpha(Opacity=50);
 } 
```

我看到那个图像在那条路上。
和对话的模态： true 已设置，但我没有看到覆盖。
我正在使用 jquery-ui-1.10.0。

这是我的CSS：

```
body {font-family:Verdana, Geneva, sans-serif !important; font-size: 11px; background-color:#250A2F !important; color: #D4D4D4; line-height:20px;} 

p {font-family:Verdana, Geneva, sans-serif !important; font-size: 13px; color: #D4D4D4 !important;} 
em {font-family:Verdana, Geneva, sans-serif !important; font-size: 11px; color: #D4D4D4 !important;} 
textarea {font-family:Verdana, Geneva, sans-serif !important; font-size: 11px; color: #777 !important;} 

span {font-family:Verdana, Geneva, sans-serif !important; font-size: 11px; color: #D4D4D4 !important;} 

input[type="text"]:focus,
input[type="number"]:focus,
input[type="email"]:focus,
input[type="search"]:focus,
input[type="password"]:focus,
input[type="range"]:focus
{
outline:none;
}

h1 {font-family:Verdana, Geneva, sans-serif; font-size: 20px; color:#D4D4D4 !important; font-weight:normal !important;} 
h2 {font-family:Verdana, Geneva, sans-serif; font-size: 14px; color:#D4D4D4 !important; font-weight:normal !important;} 
h3 {font-family:Verdana, Geneva, sans-serif; font-size: 12px; color:#D4D4D4 !important; font-weight:normal !important;} 
h4 {font-family:Verdana, Geneva, sans-serif; !important} font-weight:normal !important; 
h5 {font-family:Verdana, Geneva, sans-serif; !important font-weight:normal !important;} 
h6 {font-family:Verdana, Geneva, sans-serif; !important font-weight:normal !important;} 

.main-box{/*width:460px;*/ margin:10px 0 0 0; /*border-bottom:1px solid #262626;*/}
.main-box p{font-family:Arial, Helvetica, sans-serif !important;}

.hd{background-color:#4d4d4d; padding:3px 5px; font-size:13px;}
.table-main{/*border:1px solid #4d4d4d; width:458px;*/}
.table-main p{padding:10px 0 0 10px; font-size:1em; font-family:Arial, Helvetica, sans-serif !important;}

.up-main{padding:10px 10px 2px 10px; border-bottom:1px solid #4d4d4d;}
.user-div{width:190px !important; float:left;}

.user-div-2{width:190px !important; float:left; margin:0 0 0 41px;}

.user-fld{width:354px !important; margin:0 0 0 10px; float:left;}
.user-fld input{width:338px !important; margin-bottom:0px !important; height:18px !important; background-color:transparent !important; color:#FFF !important; border-bottom:1px solid #FFF; border-left:none !important; border-right:none !important; border-top:none !important; /* padding:0 8px; */}

.user-fld select{width:354px; background-image:url(../images/dropdown.png); background-repeat:repeat; border-bottom:1px solid #fff; padding:0 0 7px 0; border-left:none; border-right:none; border-top:none;}

.user-fld-2{width:190px !important; margin:0 0 5px 0 !important;}
.user-fld-2 input{width:168px !important; margin-bottom:0px !important; height:18px !important; background-color:transparent !important; color:#FFF !important; border-bottom:1px solid #FFF; border-left:none !important; border-right:none !important; border-top:none !important; 
outline:none !important;}

.user-fld-3{width:200px !important; margin:0 0 5px 0; font-family:Arial, Helvetica, sans-serif !important;}

.user-fld-3 input{width:168px !important; margin-bottom:0px !important; height:18px !important; background-color:transparent !important; color:#FFF !important; border-bottom:1px solid #FFF; border-left:none !important; border-right:none !important; border-top:none !important; font-family:Arial, Helvetica, sans-serif !important;}

.user-fld-3 select{width:181px !important; margin-bottom:0px !important; height:29px !important; background-color:transparent !important; color:#FFF !important; border-bottom:1px solid #FFF; border-left:none !important; border-right:none !important; border-top:none !important; font-family:Arial, Helvetica, sans-serif !important;}

.login-dv{text-align:center; padding:5px;}

.clear-n{clear:both;}

.scnd-dv{margin:7px 0 0 0; padding:10px;}

.inner-txt{margin:0px 0 0 0;}

.txt-in{float:left; width:190px; text-align:left; padding:0 0 5px 10px; font-size:12px;}
.txt-in-2{float:left; width:190px; text-align:left; padding:0 0 5px 10px; font-size:12px; margin:0 0 0 33px;}

.main-tble{margin:0; padding:0;}
.main-tble p{padding:0; margin:0;}

.inner-new-box{
    position: relative;
    border-radius:4px 4px 4px 4px;
    padding:15px;
    background: none;
    overflow: auto;
    color:#ffffff;
    background:none repeat scroll 0 0 #0E0E0E;
    margin:10px 0 0 0;
}

.buttons-main{font-size:12px; color:#000; text-align:center; border-top:1px solid #4d4d4d; padding:20px 0 0 0;}
.buttons-main input{padding:5px 8px; color:#000; cursor:pointer;}
.close-btn{float:right;}

.ui-button .ui-button-text {
    display: block;
    line-height: normal;
}
.ui-button-text-only .ui-button-text {
    padding: .4em 1em;
    color:#000 !important;
}

.ui-dialog {
    position: absolute;
    top: 0;
    left: 0;
    padding: .2em;
    outline: 0;
}
.ui-dialog .ui-dialog-titlebar {
    padding: .4em 1em;
    position: relative;
}
.ui-dialog .ui-dialog-title {
    float: left;
    margin: .1em 0;
    white-space: nowrap;
    width: 90%;
    overflow: hidden;
    text-overflow: ellipsis;
}
.ui-dialog .ui-dialog-titlebar-close {
    position: absolute;
    right: .3em;
    top: 50%;
    width: 21px;
    margin: -10px 0 0 0;
    padding: 1px;
    height: 20px;
}

.ui-dialog .ui-dialog-content h2{
    border-bottom:1px solid #262626;
    font-size:22px;
    font-weight:normal !important;
    padding:0 0 10px 0;
    margin-bottom:0;
    }

.ui-dialog .ui-dialog-buttonpane {
    text-align:center;
    background-color:#0E0E0E;
    border-radius:4px;
    border-width: 1px 0 0 0;
    background-image: none;
    margin-top: -7px;
    padding: .3em 1em .5em 1.4em;
}
.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset {
    /*float: right;*/
    border-top: 1px solid #262626;
    height: 39px;
    margin: 9px 0 0;
    padding: 4px 0 0;
    text-align: center;
}
.ui-dialog .ui-dialog-buttonpane button {
    margin: .5em .4em .5em 0;
    cursor: pointer;
    border-radius:2px;
}
.ui-dialog .ui-resizable-se {
    width: 12px;
    height: 12px;
    right: -5px;
    bottom: -5px;
    background-position: 16px 16px;
}

.popup-dv{display:none; color:#FFF;}

.up-content{ /*height:340px;*/ /*width:460px;*/ /*overflow:auto;*/}
.up-content h2{font-size:22px; font-weight:normal !important; border-bottom:1px solid #262626; padding:0 0 10px 0;}
.up-content p{font-size:13px; color:#FFF; line-height:18px; padding:10px 0;}

.social-icons{height:39px; /*width:460px;*/ border-top:1px solid #262626; padding:20px 0 0 0; text-align:center; margin:9px 0 0 0;}
.social-icons img{margin:0 20px 0 0;}

.ui-tabs .ui-tabs-nav li.ui-tabs-active a,
.ui-tabs .ui-tabs-nav li.ui-state-disabled a,
.ui-tabs .ui-tabs-nav li.ui-tabs-loading a {
    cursor: text;
    background-color:#333;
}
.ui-tabs .ui-tabs-nav li a, /* first selector in group seems obsolete, but required to overcome bug in Opera applying cursor: text overall if defined elsewhere... */
.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-active a {
    cursor: pointer;
    background-color:#1c1c1c;
    color:#FFF;
    border:none;
    font-weight:normal;

}
.ui-tabs .ui-tabs-panel {
    display: block;
    border-width: 0;
    padding: 1em 1.4em;
    background: none;
    color:#FFF !important;
}.ui-tabs {
    position: relative;/* position: relative prevents IE scroll bug (element with position: relative inside container with overflow: auto appear as "fixed") */
    padding: .2em;
}
.ui-tabs .ui-tabs-nav {
    margin: 0;
    padding: .2em .2em 0;
}
.ui-tabs .ui-tabs-nav li {
    list-style: none;
    font-size:14px;
    float: left;
    position: relative;
    top: 0;
    /*margin: 1px .2em 0 0;*/
    border-bottom: 0;
    padding: 0;
    white-space: nowrap;
}
.ui-tabs .ui-tabs-nav li a {
    float: left;
    padding: .5em 1em;
    text-decoration: none;
}
.ui-tabs .ui-tabs-nav li.ui-tabs-active {
/*  margin-bottom: -1px;
    padding-bottom: 1px;*/
    border:none;
}
.ui-tabs .ui-tabs-nav li.ui-tabs-active a,
.ui-tabs .ui-tabs-nav li.ui-state-disabled a,
.ui-tabs .ui-tabs-nav li.ui-tabs-loading a {
    cursor: text;
    background-color:#333;
}

.lft-txt{float:left; font-size:14px;}
.lft-txt span{padding:0 0 0 50px; font-size:14px;}

.pass-txt{float:left; font-size:14px;}
.pass-txt span{padding:0 0 0 21px; font-size:14px;}

.login-txt{float:left; font-size:14px;}
.login-txt span{padding:0 0 0 30px; font-size:14px;}

.make-txt{float:left; font-size:14px; width:135px;}
.make-txt span{padding:0 0 0 50px; font-size:14px;}

.new-fld{width:390px !important; margin:0 0 0 10px; float:left;}
.new-fld input[type="text"]{width:354px !important; margin-bottom:0px !important; height:18px !important; background-color:transparent !important; color:#FFF !important; border-bottom:1px solid #FFF; border-left:none !important; border-right:none !important; border-top:none !important; font-size:14px; /*padding:0 8px;*/}
.new-fld textarea{background-color:transparent !important; border:1px solid #FFF; width:368px !important; height:200px;}

.user-div{width:190px !important; float:left;}

.user-div-2{width:190px !important; float:left; margin:0 0 0 41px;}

.flds-up{margin:0px 0 10px 0;}

.hd-a{float:left; display:block;}

.main-dv{font-size:14px; margin:20px 0 0 0;}
.forgt{float:left; margin:0 30px 0 0;}
.frgt-btn{float:left;}
.frgt-btn input{cursor:pointer;}

.btm-main{float:left; font-size:14px; margin:0 30px 10px 0;}
.btm-inner-lft{float:left; width:135px; margin:0 10px 0 0;}
.btm-inner-fld{float:left;}
.btm-inner-fld input{background-color:transparent !important; border:none; border-bottom:1px solid #FFF; color:#FFF;} 
```

在页面中我有这些样式：

```
 <style>
        .ui-dialog-titlebar-close
        {
            visibility: hidden;
        }
    </style>
    <style type="text/css">
        .transparent, .ui-dialog-buttonpane
        {
            background: transparent; /* z-index: 1000;*/
        }

        .ui-widget-overlay
        {
            background: #666666 url(images/ui-bg_diagonals-thick_20_666666_40x40.png) 50% 50% repeat;
            opacity: .5;
            filter: Alpha(Opacity=50);
        }

        .ui-widget-content
        {
            width: auto !important;
            border: none;
        }
        /* .ui-widget
        {
            width: auto !important;
        }*/

        #tabs
        {
            border: none;
        }

        #tabs .ui-widget-header
        {
            background: transparent !important;
            border-top: none;
            border-right: none;
            border-left: none;
            border-bottom: 1px solid #262626;
            border-top: none;
            padding-bottom: 10px;
        }

        #tabs .ui-tabs
        {
            padding: 0 !important;
            margin-top: 40px;
            position: relative;
        }

        #tabs .ui-tabs .ui-tabs-nav
        {
            padding: 0 !important;
            position: absolute;
            margin: -32px -1px 0;
        }

        a:link
        {
            text-decoration: underline;
            color: White;
        }
        a:visited
        {
            text-decoration: none;
        }
        a:active
        {
            text-decoration: none;
        }
        a:hover
        {
            text-decoration: none;
            color: Gray;
        }

        a img
        {
            border: 0;
        }
    </style> 
```

js代码是这样的：

```
$("#151").dialog({
                autoOpen: false,

                autoResize: true,

                buttons: [
                    {
                        text: "Login",
                        click: function () {
                           $("#Tutorial").dialog("open");
                            //$(this).dialog("close");
                        }
                    },

                ]
            });
            // Link to open the dialog
            $("#151-link").click(function (event) {

                $(".ui-dialog-titlebar").hide();
                $("#151").dialog({ dialogClass: 'transparent' });
                $("#151").dialog("open");

                event.preventDefault();
            }); 
```

你能建议我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:43:21.013

我添加了这三个类：

```
.ui-widget-overlay
    {
        background: #666666 url(images/ui-bg_diagonals-thick_20_666666_40x40.png) 50% 50% repeat;
        opacity: .5;
        filter: Alpha(Opacity=50);
    }

    .ui-widget-overlay {
background: url("images/ui-bg_diagonals-thick_20_666666_40x40.png") repeat scroll 50% 50% #666666;
opacity: 0.5; 
```

}

```
.ui-widget-overlay {
    height: 100%;
    left: 0;
    position: fixed;
    top: 0;
    width: 100%;
}

.ui-front {
    z-index: 100;
} 
```

并设置 modal:true 并且它起作用了。谢谢@axrwkr

# android - 使用单链接下载所有可用的 Android 版本以离线安装

> ID：14871834
> 
> 赞同：0
> 
> 时间：2013-02-14T09:43:12.873
> 
> 标签：android

是否有任何链接可用于下载包括 Google API 在内的所有 Android 版本？如果有，您能否提供链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:47:31.840

查询[http://dl-ssl.google.com/android/repository/repository-7.xml](http://dl-ssl.google.com/android/repository/repository-7.xml)

如您所见，这是 google 发布的所有版本，因此将“repository.xml”替换为 sdk:url 标签，您将下载此 sdk，例如下载“android-17_r01.zip”只需使用[http://dl .google.com/android/repository/android-17_r01.zip](http://dl.google.com/android/repository/android-17_r01.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:48:33.473

安装离线android需求有很大问题，下载android sdk然后运行sdk manager，它提供了你需要的一切。

# excel - 如果 Excel 2010 中的单元格区域中的单元格包含特定文本，请将整个单元格文本移动到不同的列中

> ID：14871838
> 
> 赞同：0
> 
> 时间：2013-02-14T09:43:32.170
> 
> 标签：excel, full-text-search, excel-2010

我正在努力寻找这个问题的答案......

每个月我都会收到一个电子表格，里面装满了客户数据，这些数据是从某种 CRM 软件中提取的原始数据，这些数据是一团糟。有些单元格被合并，有些则没有。当您取消合并整个工作表时，您最终得到的数据意味着一列随机分布在 3 列中并与另一数据混合，即电子邮件地址分布在 3 列中并与邮政编码混合。

我想做的是在 S、T 和 U 列中搜索包含“@”的单元格，并将整个电子邮件地址移动（而不是复制）到同一行的 V 列。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:49:06.560

您可以在 V1 中使用以下公式来实现这一点：

```
=INDEX(S1:U1,MATCH(TRUE,NOT(ISERROR(SEARCH("@",S1:U1))),0))

```

公式需要以数组公式的形式输入，即按`Ctrl`- `Shift`- `Enter`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T21:18:58.123

按 Alt+F11 打开 Visual Basic 编辑器，然后单击插入、模块。[将其粘贴进去。或者，只需在此处](https://www.stndip.com/downloads/move-the-email.xls)下载示例文件。然后在视图/宏下，这个 movemail() 例程将在那里。运行。

我接受支票、汇票、贝宝、比特币... :-) j/j 享受。

```
Sub moveemail()

Dim ws As Worksheet
Dim thisCell As Range, nextCell As Range, lookAt As Range
Dim foundAt As String, lookFor As String
Dim lastRow As Long
lookFor = "@"
On Error GoTo Err

'get last populated cell
Set ws = Application.ActiveSheet
With ws
    If WorksheetFunction.CountA(Cells) > 0 Then
        lastRow = Cells.Find(what:="*", SearchOrder:=xlByRows, _
        SearchDirection:=xlPrevious).Row
    End If
End With

' go cell by cell looking for @ from row 1 to row 10000
Set lookAt = ActiveSheet.Range("S1:U" & lastRow)
Set thisCell = lookAt.Find(what:=lookFor, LookIn:=xlValues, lookAt:=xlPart, SearchDirection:=xlNext)
    If Not thisCell Is Nothing Then
        Set nextCell = thisCell
        Do
            Set thisCell = lookAt.FindNext(After:=thisCell)
            If Not thisCell Is Nothing Then
                foundAt = thisCell.Address

                            thisCell.Copy Range("V" & thisCell.Row)
                            thisCell.ClearContents
            Else
                Exit Do
            End If
            If thisCell.Address = nextCell.Address Then Exit Do
        Loop
    Else
        'MsgBox SearchString & " not Found"
        Exit Sub
    End If
Err:
    'MsgBox Err.Number
    Exit Sub
End Sub 
```

# php - 从 PHP 脚本检测是否启用了 mbstring

> ID：14871842
> 
> 赞同：24
> 
> 时间：2013-02-14T09:43:51.990
> 
> 标签：php, mbstring

如何检查 mbstring 扩展是否加载到 php 脚本中？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-14T09:46:37.320

利用`if (extension_loaded('mbstring')) { /* loaded */ }`

请参阅[PHP 手册](http://php.net/manual/en/function.extension-loaded.php)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-06-14T23:53:10.213

从终端/控制台，进入 PHP CLI 模式并回显如下命令，

```
$ php -a

php > echo extension_loaded('mbstring');
1 
```

如果 mbstring 作为扩展加载，它将返回 1，否则返回 null

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-14T09:46:31.993

在 php 文件中运行此代码 --

```
<?php phpinfo(); ?> 
```

![mbstring](../Images/17bdb934d06ee14f6df97277dbb708fd.png)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-11-18T19:43:59.953

也很有用：

`php -i | grep mbstring`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-14T09:47:16.820

使用 extension_loaded 类：

```
extension_loaded('mbstring'); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-14T09:45:51.067

你可以通过phpinfo()查看。

在 phpinfo 页面中搜索字符串“mbstring”。如果它存在则意味着 mbstring 被启用或被禁用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-18T06:20:38.283

```
if you cannot find mbstring in phpinfo();    
change extension_dir = "ext" to  extension_dir = "c:/php/ext" 
in c:\php\php.ini file 
```

# php - 检查数据库模式的变化并更新

> ID：14871845
> 
> 赞同：0
> 
> 时间：2013-02-14T09:44:02.093
> 
> 标签：php, mysql

在我们公司，我们有一个业务解决方案，其中包括 CMS、CRM 和其他几个系统。对于我们的每个客户，这些都安装在多个域中。该系统仍在开发中，因此新表和字段已添加到数据库中。每次我们想向我们的客户发布新版本时，我都必须通过他们的数据库并手动插入新的字段和表格。有没有办法可以自动完成（一个脚本可能检测新字段和表并插入它们？）我们正在使用 php 和 mysql。我们希望避免备份客户数据、删除数据库表、运行 sql 查询以插入所有数据库表（包括新表），然后重新插入客户数据。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:59:20.743

[MySQL 的蟾蜍](http://www.quest.com/toad-for-mysql/)

DB Extract, Compare-and-Search Utility — 让您比较两个 MySQL 数据库，查看差异，并创建脚本来更新目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:56:07.270

你正在寻找的是

```
ALTER TABLE 'xyz' ADD 'new_colum' INT(10) DEFAULT '0' NOT NULL; 
```

或者如果你想摆脱一个列

```
ALTER TABLE 'xyz' DROP 'new_colum'; 
```

将所有表编辑放入 update.php 文件中，然后手动调用并删除一次，或者尝试选择一次“new_colum”并在数据库不存在时更新数据库。或者我做什么：“我有一个设置字段”软件版本“并使用它作为触发器来更新我的表。但是由于无论如何您都必须安装新脚本，您可以手动调用它。

# asp-classic - 使用 ASP 的 MS 访问数据库连接

> ID：14871853
> 
> 赞同：0
> 
> 时间：2013-02-14T09:44:37.350
> 
> 标签：asp-classic

我是第一次使用 ASP。我已使用 ASP 连接到数据库访问，但无法从我的 MS Access 数据库中获取数据。我什至不知道我是否连接到我的数据库。我想我做错了。

我正在使用以下代码

```
<!DOCTYPE html>
<html>
<body>
<%
    set conn=Server.CreateObject("ADODB.Connection")
    conn.Provider="Microsoft.Jet.OLEDB.4.0"
    conn.Open "C:\Amit Chadwick\IPTC\Database\IPTC.mdb"

    set rs = Server.CreateObject("ADODB.recordset")
    rs.Open "Select * from Image_Data", conn%>
    <table border="1" width="100%">
    <%do until rs.EOF%>
    <tr>    
    <%for each x in rs.Fields%>
    <td><%Response.Write(x.value)%></td>
    <%next
    rs.MoveNext%>
    </tr>
    <%loop
    rs.close
    conn.close
%>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-28T03:09:59.057

谢谢，我发现您的代码对我很有帮助，我使用您的代码成功连接到 MS Access。我还做了一些可能对您有帮助的修改。

```
<%
set conn=Server.CreateObject("ADODB.Connection")
conn.Provider="Microsoft.Jet.OLEDB.4.0"
conn.Open "C:\vb\mydb.mdb"
set rs = Server.CreateObject("ADODB.recordset")
rs.Open "Select * from student", conn
do until rs.EOF
Response.Write(rs.Fields("roll"))
Response.Write(rs.Fields("name"))
Response.Write(rs.Fields("age"))
rs.MoveNext
loop
rs.close
conn.close
%> 
```

# java - 从较大目录（工作区）中的文件中获取特定单词

> ID：14871857
> 
> 赞同：0
> 
> 时间：2013-02-14T09:45:03.923
> 
> 标签：java, jakarta-ee

我需要用文字记录我的应用程序使用的表名是什么，以及它们在哪些类中使用。

这是一个非常大的应用程序。我使用扩展类名（Testtransformation）在工作区中进行了文件搜索，并获得了 142 个引用表名的 java 文件。

我需要为此获取表名和相应的类。

因此，考虑首先编写一个 java 代码来获取扩展 Testtransformation 的 java 文件列表，并尝试其中的表名和列表中的相应类名，所以不要手动复制粘贴它。

可以这样做吗？

例如：我的一类做搜索：我需要获取类名 AddCustomer 和表名 H005Table

```
 public class AddCustomer extends Testtranformation
    {
             ...//codes.....
                         ....
                 SetIn.SetParms( "H005Table",       // Tablename
                             m.getNumber())     
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:02:25.210

使用 BufferedReader 读取直到“公共类”行的行，当指针位于“公共类”行时，检查它是否具有“扩展”。如果是，请将类名称添加到列表中。这就是我们如何在java中做到这一点。为所有 listFiles() 运行的循环

如果环境是 Unix，我会做类似下面的事情而不是 java 程序。

> 寻找 。-名称“*.java”| xargs grep "扩展类名"

# android - android：播放 youtube 视频的 webview 显示白色空白页几秒钟

> ID：14871860
> 
> 赞同：3
> 
> 时间：2013-02-14T09:45:05.600
> 
> 标签：android, video, webview

我正在使用 webview 播放 youtube 视频。它的工作完美，除了一个白色的空白页显示几秒钟。然后我得到加载页面指示和页面加载。我怎样才能摆脱一开始的白色空白页面。我的代码如下

```
public static void showVideo(final Context context, WebView webReview,
        final Activity activity, String videoid, String width, String height) {

        WebSettings webSettings = webReview.getSettings();
        webSettings.setJavaScriptEnabled(true);
        webSettings.setJavaScriptCanOpenWindowsAutomatically(true);
        webReview.getSettings().setPluginsEnabled(true);

        webReview.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress) {
                activity.setProgress(progress * 100);
            }
        });
    /*  webReview.setWebViewClient(new WebViewClient() {

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                return true;
            }

            public void onReceivedError(WebView view, int errorCode,
                    String description, String failingUrl) {
                Toast.makeText(context, description, Toast.LENGTH_LONG)
                        .show();
            }
            @Override
            public void onPageStarted(WebView view, String url,
                    Bitmap favicon) {
                Log.i("onPageStarted", "url" + url);
                super.onPageStarted(view, url, favicon);
                if (progreesDialogue != null) {
                    showProgressDialog();
                }

            }

            @Override
            public void onPageFinished(WebView view, String url) {

                if (progreesDialogue != null
                        && progreesDialogue.isShowing()) {

                    progreesDialogue.dismiss();
                }
            }

        }); */

        String data = "<html>"
                + "<head>"
                + "</head>"
                + "<body style=\"margin: 0; padding: 0\">"
                + "<iframe "
                + "type=\"text/html\" "
                + "class=\"youtube-player\" "
                + "width=\""
                + width
                + "\" "
                + "height=\""
                + height
                + "\" "
                + "src=\"http://www.youtube.com/v/"
                + videoid
                + "?controls=0&showinfo=0&showsearch=0&modestbranding=1&autoplay=1&fs=0\" "
                + "frameborder=\"0\"></iframe>" + "</body>" + "</html>";

        webReview.loadData(data, "text/html", "utf-8");
        //webReview.loadUrl("http://www.youtube.com/v/"+videoid);

    } 
} 
```

我也尝试过未注释的 webviewclient，它在下面的代码中进行了注释。

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-02-22T13:37:13.957

```
android:hardwareAccelerated='true' 
```

在你的 AndroidManifest.xml 中使用它

# html - 使用 css 丢失元素的位置

> ID：14871863
> 
> 赞同：1
> 
> 时间：2013-02-14T09:45:14.127
> 
> 标签：html, css

我需要这样做： ![在此处输入图像描述](../Images/e16e8e35a55d06df325602fdad1bb81c.png)

左框应具有静态宽度，右框应调整为完整浏览器宽度。盒子的高度也应该是可调整的。

PS对不起，伙计们，小提琴工作花了一段时间。

[所以它在这里](http://jsfiddle.net/QggCv/1/)

```
<div class="page-wrapper">
    <div class="search-wrapper">
    </div>
    <div class="content-wrapper">
        <div class="leftPage">
        </div>
        <div class="rightPage">
        </div>
    </div>
</div> 
```

问题是：

我有银色左页。我希望它具有静态宽度。让我们说454px。而且我希望将右页（黑色）动态调整为屏幕大小。

宽度为 20%/80% 的变体对我不利。只有CSS可以吗？我用 jquery/js 得到了很好的答案，但如果它只能用 CSS 来完成，仍然很有趣）

给您添麻烦了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:50:19.747

**Javascript/jQuery**

如果您希望左列是静态的而右列是动态的，您将需要 Javascript 或像 SASS 这样的 CSS 预处理器。这是旧浏览器支持的唯一真正解决方案。

```
// parent width - leftpage width = remainings
$('div.rightPage').width(
    $('div.rightPage').parent().width() - $('div.leftPage').width()
); 
```

**流体布局**

如果你真的想要一个纯 CSS 解决方案，我建议改用流体布局。这也是跨浏览器。

```
div.leftPage { width: 25%; }
div.rightPage { width: 75%; } 
```

**模拟表**

作为替代方案，您仍然可以使用`display: table`. 表确实具有该功能。[查看演示](http://jsfiddle.net/QHyjT/)（调整窗口大小以查看它的工作）

这可能不适用于 IE6 和 IE7。

**本机表**

最后，如果你对表格没问题，你可以使用本机表格，它们是跨浏览器的；）

CSS

```
table td.fixed { width: 200px; } 
```

HTML

```
<table>
    <tbody>
        <tr>
            <td class="fixed">
                <p>Left content</p>
            </td><td>
                <p>Right content</p>
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

最后，为了垂直调整大小，您需要设置`resize: vertical`.

```
div.leftpage, div.rightpage { resize: vertical; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:02:01.977

使用表格要容易得多。

**HTML**

```
<div class="page-wrapper">
    <div class="search-wrapper">
    </div>
    <table class="content-wrapper">
      <tr>
        <td class="leftPage">LEFT</td>
        <td class="rightPage">RIGHT</td>
       </tr>
    </table>
</div> 
```

**CSS**

```
table
{
  width:100%;
}
.leftPage
{
width: 454px;
} 
```

除非你真的想坚持使用 DIV？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T10:25:44.810

尝试在容器中使用`absolute`位置，并使您的位置与您的宽度具有相同数量的像素。如下所示：`relative``right` `div``left``left`

```
div.content-wrapper {
    height: 100%;
    width: 100%;
    position:relative;
}
div.leftPage {
    background-color: black;
    height: 100%;
    width: 454px;
    position:absolute;
}
div.rightPage {
    background-color: red;
    height: 100%;
    width: 100%;
    position:absolute;
    left:454px;
} 
```

如果您希望您的 s 在页面上扩展，也可以将`body`高度设置为 100% ：`div`

```
body, html {
    width:100%;
    height:100%;
} 
```

这是演示：http: [//jsfiddle.net/XLLSA/1/](http://jsfiddle.net/XLLSA/1/)

**编辑**

我修复了搜索 div：http: [//jsfiddle.net/XLLSA/2/](http://jsfiddle.net/XLLSA/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T09:53:10.603

试试这个..

```
div.left { 
    width: 20%;
    min-width: 200px;
}
div.right { 
    width: 80%; 
} 
```

# sass - nil:NilClass 的未定义方法“执行”

> ID：14871867
> 
> 赞同：2
> 
> 时间：2013-02-14T09:45:20.670
> 
> 标签：sass, font-awesome

我正在尝试使用 .scss 将 font-awesome 更新到最新版本。

当我尝试使用 campass 进行编译时，它会引发此错误：

```
 >>> Change detected at 17:51:13 to: ui/_font_awesome.scss
NoMethodError on line ["323"] of /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/perform.rb: undefined method `perform' for nil:NilClass
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/perform.rb:321:in `map'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/perform.rb:321:in `run_interp_no_strip'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/perform.rb:331:in `run_interp'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/perform.rb:295:in `visit_directive'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/base.rb:37:in `visit'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/perform.rb:20:in `visit'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/perform.rb:146:in `block in visit_import'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/perform.rb:146:in `map'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/perform.rb:146:in `visit_import'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/base.rb:37:in `visit'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/perform.rb:20:in `visit'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/perform.rb:146:in `block in visit_import'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/perform.rb:146:in `map'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/perform.rb:146:in `visit_import'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/base.rb:37:in `visit'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/perform.rb:20:in `visit'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/base.rb:53:in `block in visit_children'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/base.rb:53:in `map'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/base.rb:53:in `visit_children'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/perform.rb:29:in `block in visit_children'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/perform.rb:41:in `with_environment'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/perform.rb:28:in `visit_children'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/base.rb:37:in `block in visit'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/perform.rb:49:in `visit_root'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/base.rb:37:in `visit'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/perform.rb:20:in `visit'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/visitors/perform.rb:7:in `visit'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/tree/root_node.rb:20:in `render'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/engine.rb:305:in `_render'
  /usr/local/lib/ruby/gems/1.9.1/gems/sass-3.2.0.alpha.64/lib/sass/engine.rb:252:in `render'
  /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/compiler.rb:140:in `block (2 levels) in compile'
  /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/compiler.rb:126:in `timed'
  /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/compiler.rb:139:in `block in compile'
  /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/logger.rb:45:in `red'
  /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/compiler.rb:138:in `compile'
  /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/compiler.rb:118:in `compile_if_required'
  /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/compiler.rb:103:in `block (2 levels) in run'
  /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/compiler.rb:101:in `each'
  /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/compiler.rb:101:in `block in run'
  /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/compiler.rb:126:in `timed'
  /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/compiler.rb:100:in `run'
  /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/commands/watch_project.rb:147:in `recompile'
  /usr/local/lib/ruby/gems/1.9.1/gems/fssm-0.2.8.1/lib/fssm/path.rb:73:in `call'
  /usr/local/lib/ruby/gems/1.9.1/gems/fssm-0.2.8.1/lib/fssm/path.rb:73:in `run_callback'
  /usr/local/lib/ruby/gems/1.9.1/gems/fssm-0.2.8.1/lib/fssm/path.rb:55:in `callback_action'
  /usr/local/lib/ruby/gems/1.9.1/gems/fssm-0.2.8.1/lib/fssm/path.rb:35:in `update'
  /usr/local/lib/ruby/gems/1.9.1/gems/fssm-0.2.8.1/lib/fssm/state/directory.rb:39:in `block in modified'
  /usr/local/lib/ruby/gems/1.9.1/gems/fssm-0.2.8.1/lib/fssm/state/directory.rb:37:in `each'
  /usr/local/lib/ruby/gems/1.9.1/gems/fssm-0.2.8.1/lib/fssm/state/directory.rb:37:in `modified'
  /usr/local/lib/ruby/gems/1.9.1/gems/fssm-0.2.8.1/lib/fssm/state/directory.rb:18:in `refresh'
  /usr/local/lib/ruby/gems/1.9.1/gems/fssm-0.2.8.1/lib/fssm/backends/inotify.rb:12:in `block in add_handler'
  /usr/local/lib/ruby/gems/1.9.1/gems/rb-inotify-0.8.8/lib/rb-inotify/notifier.rb:200:in `call'
  /usr/local/lib/ruby/gems/1.9.1/gems/rb-inotify-0.8.8/lib/rb-inotify/notifier.rb:200:in `block in watch'
  /usr/local/lib/ruby/gems/1.9.1/gems/rb-inotify-0.8.8/lib/rb-inotify/watcher.rb:41:in `[]'
  /usr/local/lib/ruby/gems/1.9.1/gems/rb-inotify-0.8.8/lib/rb-inotify/watcher.rb:41:in `callback!'
  /usr/local/lib/ruby/gems/1.9.1/gems/rb-inotify-0.8.8/lib/rb-inotify/event.rb:128:in `callback!'
  /usr/local/lib/ruby/gems/1.9.1/gems/rb-inotify-0.8.8/lib/rb-inotify/notifier.rb:233:in `block in process'
  /usr/local/lib/ruby/gems/1.9.1/gems/rb-inotify-0.8.8/lib/rb-inotify/notifier.rb:233:in `each'
  /usr/local/lib/ruby/gems/1.9.1/gems/rb-inotify-0.8.8/lib/rb-inotify/notifier.rb:233:in `process'
  /usr/local/lib/ruby/gems/1.9.1/gems/rb-inotify-0.8.8/lib/rb-inotify/notifier.rb:216:in `run'
  /usr/local/lib/ruby/gems/1.9.1/gems/fssm-0.2.8.1/lib/fssm/backends/inotify.rb:20:in `run'
  /usr/local/lib/ruby/gems/1.9.1/gems/fssm-0.2.8.1/lib/fssm/monitor.rb:26:in `run'
  /usr/local/lib/ruby/gems/1.9.1/gems/fssm-0.2.8.1/lib/fssm.rb:70:in `monitor'
  /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/commands/watch_project.rb:87:in `perform'
  /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/commands/base.rb:18:in `execute'
  /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/commands/project_base.rb:19:in `execute'
  /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/exec/sub_command_ui.rb:43:in `perform!'
  /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/exec/sub_command_ui.rb:15:in `run!'
  /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.1/bin/compass:29:in `block in <top (required)>'
  /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.1/bin/compass:43:in `call'
  /usr/local/lib/ruby/gems/1.9.1/gems/compass-0.12.1/bin/compass:43:in `<top (required)>'
  /usr/local/bin/compass:19:in `load'
  /usr/local/bin/compass:19:in `<main>' 
```

我花了整个下午寻找有同样问题的人，但没有找到任何东西......

任何猜测可能是什么问题？

泰！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T22:53:29.020

检查您最近添加到 sass 文件中的所有指令（`@include`, `@import`, `@extend`）并确认没有拼写错误。

当 sass 尝试执行它无法识别的指令时，您可能会收到此错误。例如。说你输入的`@includ`时候你的意思`@include`

# .net - 只有前 50 行从 winforms 中的 datagridview 复制到剪贴板

> ID：14871877
> 
> 赞同：2
> 
> 时间：2013-02-14T09:45:58.927
> 
> 标签：.net, vb.net, winforms, datagridview, copy-paste

我有一个 datagridview myDgv 数据将从数据库填充到其中。

当我将复制的数据粘贴到 excel 中时，我正在执行 Ctrl+A （全选）和复制（ Ctrl + C ），只有前 50 行数据被复制。
其余行为空白。

这是我的 keydown 事件中的代码

```
If e.Control AndAlso e.KeyCode = Keys.C Then
    Dim d As DataObject = myDgv.GetClipboardContent()
    Clipboard.SetDataObject(d)
    e.Handled = True
End If 
```

当我向下滚动网格直到结束（最后一行）并执行 Ctrl+C 然后将其粘贴到 excel 中时，所有行都被粘贴了。

我该如何着手解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:08:12.207

使用`DataGridView.SelectAll`方法来选择使用 ctrl + A 上的所有行。

并使用以下事件来按下按键：

```
void dataGridView1_KeyDown(object sender, KeyEventArgs e)
{
    if (e.Control && e.KeyCode == Keys.C)
    {
        //call to DataGridView.SelectAll Method
    }
} 
```

# android - 在按钮单击事件上设置新视图

> ID：14871881
> 
> 赞同：-1
> 
> 时间：2013-02-14T09:46:08.583
> 
> 标签：android, android-layout

我刚开始学习安卓应用开发。我想在按钮事件上设置另一个视图。我怎样才能做到这一点。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

  //  b1=(Button)findViewById(R.id.button1);

}
public void call_it(Menu v)
{
     setContentView(R.layout.activity_new_);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:55:12.457

如果你想从一些 xml 膨胀它，你可以按照这个：

在您的内部`onCreate()`找到您的布局视图，如下所示：

```
LinearLayout myLayout = (LinearLayout) findViewById(R.id.mylayoutid); 
```

这`mylayoutid`将是`activity_main.xml`您要在其中添加新布局/视图的最外层布局的 ID。然后按钮单击功能如下：

```
public void call_it(Menu v)
{
    final LayoutInflater linflater = (LayoutInflater) mContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    LinearLayout lLayout = (LinearLayout) linflater .inflate(
                    R.layout.activity_new, null);
    myLayout.addView(lLayout)
} 
```

如果你想创建一个新视图并显示它，你可以这样做：

```
TextView txt = new TextView(this);
LayoutParams lp = new LayoutParams(new LinearLayout.LayoutParams(LayourParams.WRAP_CONTENT,LayourParams.WRAP_CONTENT));
txt .setLayoutParams(lp);
txt .setTextSize(10);
myLayout.addView(txt); 
```

# vb.net - Excel - 在工作表之间匹配列数据

> ID：14871882
> 
> 赞同：1
> 
> 时间：2013-02-14T09:46:10.973
> 
> 标签：vb.net, excel

我得到了一个 excel 工作簿，上面有两张纸，上面有很多数据——这需要合并成一张。为了简单起见：

表 1

```
|Servers|
ABCD1
ABCD2
ABCD3 
```

表 2

```
|Servers|        |Policy|
ABCD1            PolicyA
ABCD3            PolicyB 
```

我要说的是；将策略从表 2 移到表 1，将策略与服务器匹配，但在服务器没有策略的情况下留空。

我已经阅读了有关 VLOOKUP 的信息，但似乎无法使其正常工作。

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:02:22.443

您需要将值设为空白的是一个 if 函数来检查策略是否存在。

对于**Excel 2007 及更高版本**：

```
=IF(IFERROR(VLOOKUP(A1,Sheet2!A:B,2,FALSE),"")="", "", VLOOKUP(A1,Sheet2!A:B,2,FALSE)) 
```

为他人：

```
=IF(ISERROR(VLOOKUP(A1,Sheet2!A:B,2,FALSE)),"", IF(VLOOKUP(A1,Sheet2!A:B,2,FALSE)="", "", VLOOKUP(A1,Sheet2!A:B,2,FALSE))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:50:35.420

假设在 Sheet1 中，Servers 在 A 列中，将以下公式放在 B 列中：

```
=IFERROR(VLOOKUP(A1,Sheet2!A:B,2,0),"无政策")

```

# java - 登录自定义 ant 任务

> ID：14871885
> 
> 赞同：3
> 
> 时间：2013-02-14T09:46:19.983
> 
> 标签：java, logging, ant

我正在创建一个自定义 ant 任务，它根据用户收到的参数执行 IO 任务（如文件写入/追加）

我想编写任务，就好像在 ant 任务中使用它的开发人员使用`-v`or`-d`标志运行它，会输出更多，

我想知道核心蚂蚁任务是如何做到的。他们是在打印到控制台之前检查输出级别还是只是通过使用`java.util.logging.Logger`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:54:24.453

按照本[教程](http://ant.apache.org/manual/tutorial-writing-tasks.html#TaskAdapter)。

提炼 ：

> 与任务适配器集成
> 
> 我们班与 Ant 无关。它不扩展超类并且不实现接口。Ant是怎么知道集成的？通过命名约定：我们的类提供了一个带有签名 public void execute() 的方法。此类由 Ant 包装， `org.apache.tools.ant.TaskAdapter`这是一个任务，并使用反射来设置对项目的引用并调用`execute()` 方法。
> 
> 设置对项目的引用？可能很有趣。Project 类为我们提供了一些不错的功能：访问 Ant 的日志记录工具，获取和设置属性等等。所以我们尝试使用该类：
> 
> ```
> import org.apache.tools.ant.Project;
> 
> public class HelloWorld {
> 
>     private Project project;
> 
>     public void setProject(Project proj) {
>         project = proj;
>     }
> 
>     public void execute() {
>         String message = project.getProperty("ant.project.name");
>         project.log("Here is project '" + message + "'.", Project.MSG_INFO);
>     } } 
> ```
> 
> [...]

# jpa - 在 JAXB 反序列化后，如何在合并时忽略具有空值的 JPA ManyToOne 属性？

> ID：14871886
> 
> 赞同：5
> 
> 时间：2013-02-14T09:46:19.373
> 
> 标签：jpa, merge, null, jaxb

示例用例：

```
class Address {

@XMLTransient
@ManyToOne(cascade={})
private Person person;

} 
```

在我的用例中，地址通过 JAXB 序列化为 XML，在另一个系统中进行修改，从 XML 反序列化为分离的 JPA 实体，然后合并回 db (em.merge(address))。由于 Person 属性被标记为 @XMLTransient，因此它从 XML 中恢复为 null。

由于所有 Address' 都有一个数据库条目并且可以通过那里的 Id 标识我想合并以忽略 Person 属性并只保留关系的数据库值（这与级联无关）。

有没有办法告诉 JPA 在合并时忽略 Person 属性，或者我是否必须在合并之前使用 @XMLAdapter 来设置具有相应 Person 对象的属性（顺便说一句，我还在所有实体上使用带有 @Version 的乐观锁定）。

有什么提示吗？

米格尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:21:26.823

听起来您根本不希望 JPA 在合并时更新此关系。那是对的吗？如果是这样，您是否尝试过`updatable=false`设置`@ManyToOne`？

# spi - 我应该使用哪些 OMAP-L138 寄存器来选择另一个 SPI 芯片？

> ID：14871887
> 
> 赞同：2
> 
> 时间：2013-02-14T09:46:24.140
> 
> 标签：spi, omap

我有 OMAP-L138 Experimenter Kit，我想与设置在 SPI 1 芯片选择 1 上的外围设备之一进行通信（SPI1 芯片选择 0 上也有闪存）。

我很困惑我应该使用哪些寄存器来选择芯片 1 ？

根据[OMAP-L138 Technical Reference Manual](http://www.ti.com/lit/ug/spruh77a/spruh77a.pdf)，我应该

*   设置 4 针模式

    spi->SPIPC0 = SOMI | 西莫 | 时钟 | SCS0; //带片选的4针模式

*   设置 SPIPC0.SCS0FUN 的 1 位以显示 SPI_CS1 - 是 SPI 功能引脚

    SETBIT(spi->SPIPC0, 0x00000002);

*   设置 SPIDAT1.CSNR 的 17 位（表示 SPI_CS1 引脚被驱动为高电平。）

    SPI->SPIDAT1 = 0；SETBIT(spi->SPIDAT1, 0x20000); //设置第17位（对应SPI_CS1）

*   将 SIDEF.CSDEF 设置为 1 位（表示 SPI_CS1 引脚被驱动为高电平。）

    spi->SPIDEF = 0；SETBIT(spi->SPIDEF, 0x00000002); //在 CSDEF 字段中设置第 1 位（对应于 SPI_CS1）

*   最后，在从 SPI1_CS1 设备读取数据之前，我应该将 SPIDAT1.CSHOLD 设置为保持有效的片选信号

    SETBIT(spi->SPIDAT1,0x10000000); //设置代表CSHOLD的第28位

这是正确的还是我错过了什么？可能我还需要对 PINMUX5（引脚复用控制 5 寄存器）做一些事情吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:52:09.623

看来我已经想通了。

*   在寄存器 PINMUX5 中设置第 0 位 - 选择功能 SPI1_SCS[1]
*   在寄存器 PINMUX5 中设置第 4 位 - 选择功能 SPI1_SCS[0]

    EVMOMAPL138_pinmuxConfig(5, 0x00FFFFF0, 0x00111101); //使能片选1 EVMOMAPL138_pinmuxConfig(5, 0x00FFFFF0, 0x00111110); //启用片选0

# sql - 在 PostgreSQL 的组查询中检查单个行

> ID：14871888
> 
> 赞同：3
> 
> 时间：2013-02-14T09:46:27.070
> 
> 标签：sql, postgresql, distinct, case

```
WITH 
Emp(DName, EName, Role) AS (
     VALUES ('D1','E11', 'Role1'), 
            ('D1','E11', 'Role2'),
            ('D1','E12', 'Role1'), 
            ('D2','E12', 'Role1')
) 
```

对于每个部门，获取每个角色的员工人数。
输出应该是：

```
#_of_Role1_Employees; #_of_Role2_Employees
2; 1
1; 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:32:06.053

```
WITH 
Emp(DName, EName, Role) AS (
     VALUES ('D1','E11', 'Role1'), 
            ('D1','E11', 'Role2'),
            ('D1','E12', 'Role1'), 
            ('D2','E12', 'Role1')
)
select
    dname "Dname",
    count(role = 'Role1' or null) "Role1",
    count(role = 'Role2' or null) "Role2"
from emp
group by dname
;
 Dname | Role1 | Role2 
-------+-------+-------
 D1    |     2 |     1
 D2    |     1 |     0 
```

## 更新

这应该符合不同的要求：

```
WITH
Emp(DName, EName, Role) AS (
     VALUES ('D1','E11', 'Role1'),
            ('D1','E11', 'Role2'),
            ('D1','E12', 'Role1'),
            ('D2','E12', 'Role1')
)
select
    dname "Dname",
    count(role = 'Role1' or null) "Role1",
    count(role = 'Role2' or null) "Role2"
from (
    select distinct *
    from emp
) s
group by dname
;
 Dname | Role1 | Role2 
-------+-------+-------
 D1    |     2 |     1
 D2    |     1 |     0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:46:27.070

在部门组中，要检查每个员工行的角色，并对不同的员工姓名进行计数。

```
Select COUNT(Distinct(CASE WHEN Role = 'Role1' THEN EName END)) As "#_of_Role1_Employees",
       COUNT(Distinct(CASE WHEN Role = 'Role2' THEN EName END)) As "#_of_Role2_Employees"
from Emp
Group by DName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:27:41.503

每个可以有重复条目的事实`(dname, ename, role)`表明测试用例过于简化。我怀疑测试用例应该是：

```
CREATE TEMP TABLE emp(dname text, ename text, role text, col1 text);
INSERT INTO emp VALUES
    ('D1','E11', 'Role1', 'foo1')
   ,('D1','E11', 'Role2', 'foo2')
   ,('D1','E12', 'Role1', 'foo3')
   ,('D1','E12', 'Role1', 'foo4')
   ,('D2','E12', 'Role2', 'foo5'); 
```

然后[@Clodoaldo 的（否则很好）查询](https://stackoverflow.com/a/14872769/939860)将不得不使用：

```
SELECT DISTINCT dname, ename, role 
```

代替：

```
SELECT DISTINCT * 
```

另一种方法是交叉表查询：

```
SELECT * FROM crosstab(
      $x$
      SELECT dname, role, count(DISTINCT ename)::int
      FROM   emp
      GROUP  BY dname, role
      $x$

      ,$y$SELECT DISTINCT role FROM emp ORDER BY 1$y$)
AS ct (dname text, "Role1" text, "Role2" int); 
```

您需要[`tablefunc`](http://www.postgresql.org/docs/current/interactive/tablefunc.html)为此安装。此相关答案中有关此查询的更多详细信息：
[PostgreSQL Crosstab Query](https://stackoverflow.com/questions/3002499/postgresql-crosstab-query/11751905#11751905)

您必须在列定义列表中列出所有可能的角色。

# internet-explorer - 将鼠标悬停在 div 上时溢出-y 滚动 - Internet Explorer

> ID：14871890
> 
> 赞同：1
> 
> 时间：2013-02-14T09:46:31.063
> 
> 标签：internet-explorer, html, scroll, overflow

我有一个 div，里面有一些内容，我希望这个 div 仅在悬停时显示垂直滚动条。我有以下代码：

```
<div id="scroll" style="width:370px; height:50px;">
    lots of plain text inside 
</div>

#scroll { 
    overflow: hidden;
}

#scroll:hover {
   overflow-y: scroll;
} 
```

它在 Firefox、Opera 和 Chrome 上完美运行，但对于 IE 8 和 9，悬停时不会出现滚动。是否有任何解决方案可以使其在 IE 中也按预期工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:10:51.960

请使用以下代码进行检查。您必须使用 div 的背景才能在 IE7 -9 中工作。并确保您的`DOCKTYPE in HTML`.

```
#scroll { 
    background: #ffffff;
    overflow: hidden;
}

#scroll:hover { 
    background: #ffffff;
    overflow-y: scroll;
} 
```

# html - 如何获取相同 id 的元素

> ID：14871897
> 
> 赞同：-3
> 
> 时间：2013-02-14T09:46:39.647
> 
> 标签：html, html-parsing, html-agility-pack

我正在尝试解析html。两个表在同一个 html 中具有相同的 id。我该如何解析这个？

```
<div>
      <table width='450' border=4  id='1234azert'>
      ...
      </table>
      <table width='450' border=5  id='1234azert'>
      ...
      </table>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:51:11.347

是的你可以。如果您使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)，您可以使用[XPath](http://www.w3schools.com/xpath/default.asp)并设置您需要的元素索引。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T09:49:35.903

不能将相同的 ID 分配给多个元素。ID 是唯一的。然而，一个类代表一个组或集合，并允许你做你想做的事。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-14T09:49:39.387

永远不应该是这样。在任何情况下，两个元素都不应具有相同的 id。如果您有这种情况，则始终返回 dom 树中具有该 id 的第一个元素。

更多解释在这里：

[在具有其他 id 的两个 div 元素中有两个具有相同 id 的元素是否正常？](https://stackoverflow.com/questions/3093121/is-it-normal-to-have-two-elements-with-same-id-in-two-div-elements-with-other-id)

# javascript - 如何使用 jquery 选择和取消选择数据？

> ID：14871903
> 
> 赞同：0
> 
> 时间：2013-02-14T09:46:56.810
> 
> 标签：javascript, css, ajax, jquery

我想选择和取消选择即将到来的数据，但是这次在我的代码中它只是选择并且勾号图像会出现，我想做当我再次单击数据时，勾号将消失我该怎么做？提前致谢

```
 <style>
.highlight{ font-wieght:bold;   color:#F00;}
.amounts{}
.tick{ float:left; margin-top:-5px;}    
.highlight .amount{ display : inline;}
.tick img{  display:none;   width   : 25px; height  : 25px; margin-right: 10px; float   : left;}
.highlight .tick img{   display : block;}
</style>

<script>
jQuery(document).ready(function (){

    jQuery('.amounts').click(function (){
        var pname = jQuery(this).attr('product_name');
        if(!jQuery(this).hasClass('highlight')){
            jQuery('.amount-'+pname).removeClass('highlight');
            jQuery(this).addClass('highlight');
        }

    });

});
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T09:49:07.987

```
if(!jQuery(this).hasClass('highlight')){
            jQuery('.amount-'+pname).removeClass('highlight');
            jQuery(this).addClass('highlight');
        }
else {
            jQuery('.amount-'+pname).addClass('highlight');
            jQuery(this).removeClass('highlight');
} 
```

只是你可以使用这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T09:50:18.820

改变：

```
if(!jQuery(this).hasClass('highlight')){
   jQuery('.amount-'+pname).removeClass('highlight');
   jQuery(this).addClass('highlight');
} 
```

至

```
jQuery('.amount-'+pname).removeClass('highlight');
jQuery(this).toggleClass('highlight'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T12:00:58.647

好吧，我找到了解决方案

```
 if(!jQuery(this).hasClass('highlight')){
        jQuery('.amount-'+pname).removeClass('highlight');
        jQuery(this).addClass('highlight');
    }
else {
        jQuery(this).removeClass('highlight');
} 
```

# graph - Visual Studio 2012 中的图表和图形控件

> ID：14871906
> 
> 赞同：0
> 
> 时间：2013-02-14T09:47:08.797
> 
> 标签：graph, charts, controls

我一直在 Visual Studio 2012 中开发 windows phone 8 应用程序。我需要在我的应用程序中使用图表和图形控件。有人可以建议我一些有效的解决方案吗？有没有办法在 Visual Studio 2012 工具箱中添加图形、图表控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:41:08.630

[此](https://stackoverflow.com/questions/577278/wpf-chart-controls/4227432#4227432)WPF 相关问题中的大多数图表组件都支持 WP8。

# mysql - MYSQL批量INSERT慢

> ID：14871909
> 
> 赞同：2
> 
> 时间：2013-02-14T09:47:17.873
> 
> 标签：mysql, performance, bulkinsert

我有一个非常长的 MYSQL INSERT。MYSQL 冻结了几分钟，解冻后没有插入任何数据。

我的 INSERT 查询有问题吗？

```
INSERT INTO polim_inventory_transactions 
(item, type, warehouse, quantity, date) 
VALUES
(100004, 'Inventory Tr', 'BFL', 354.0000, '2013-01-31'),
(100007, 'Purchase Rec', 'BFL', 23552.0000, '2013-01-15'),
(100206, 'Inventory Tr', 'BFL', 125.0000, '2013-01-08'),
(100206, 'Inventory Tr', 'BFL', 75.0000, '2013-01-09'),
(100206, 'Inventory Tr', 'BFL', 100.0000, '2013-01-09'), .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:01:08.333

如果这是 MyISAM 表，您可以尝试在插入之前锁定它。此外，如果您在此表上有键，禁用它们也很有帮助：

```
ALTER TABLE polim_inventory_transactions DISABLE KEYS; 
```

通常，您可以在此处查看更多提示：[MyISAM 表的批量数据加载](http://dev.mysql.com/doc/refman/5.5/en/optimizing-myisam-bulk-data-loading.html)

# c++builder - TDateTime 值有什么问题

> ID：14871915
> 
> 赞同：1
> 
> 时间：2013-02-14T09:47:36.277
> 
> 标签：c++builder, tdbgrid, tdatetime, tfield

我有一个名为 currMonth 的 TDateTime 变量。currMonth 的值为“2000 年 6 月 30 日晚上 11:59:59”。我需要插入 currMonth 作为 TDBGrid 中名为 dtBegin 的字段的默认值。

我试试这段代码：

```
dtBegin->AsDateTime = currMonth; 
```

并且编译器成功编译了项目，但是当我调试它时，我得到的 dtBegin 值不是“6/30/2000 11:59:59 PM”而是{ 36738.9999999884 }。

有人知道这个 TDateTime 对象有什么问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:00:18.563

[您在 Embarcadero 论坛](https://forums.embarcadero.com/thread.jspa?threadID=83220)上发布的同一问题与您在此处发布的同时有许多回复。

简而言之，没有任何问题。 `TDateTime`被实现为`double`内部。调试检查器只是`double`按原样向您显示该值，而不是您期望的格式化日期/时间字符串。这是正常行为，您`TDateTime`自己将在您的代码中正常工作。您使用的是旧版本的 C++Builder，因此您没有`TDateTime`新版本的 C++Builder 用于更好地显示`TDateTime`值的调试可视化工具，仅此而已。

如果您需要`TDateTime`在调试器中以格式化方式查看值，则必须在 Watch List 中定义一个条目，该条目调用 RTL 的`DateTimeToStr()`函数或`TDateTime::FormatString()`方法，并向您显示结果。

# c++ - 我可以在流式传输/写入时同时读取 mp4 文件的早期部分吗？

> ID：14871916
> 
> 赞同：1
> 
> 时间：2013-02-14T09:47:40.067
> 
> 标签：c++, video-streaming, h.264, mpeg-4, live555

我正在使用基于 Live555/openRTSP 的代码将 H.264 视频源流式传输到 mp4 文件，并希望同时读取文件的早期部分（来自不同的应用程序）。更改`fopen`为`fid = _fsopen(fileName, "wb", _SH_DENYWR)`（来自OutputFile.cpp）显然是不够的，因为它没有任何区别并且媒体播放器仍然不会打开它（那是mp4输出的写入行吗？）

在相关说明中，如果我模拟软件的非正常关闭（例如电源故障），则任何媒体播放器都无法读取未完成的文件。我假设文件关闭时写入文件的内容是允许媒体播放器理解文件的内容。如果可能的话，这也是我想编码的情况，并且很可能与上述问题完全相同？

收到任何指示/答案/想法:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:46:05.597

万一有人需要同样的东西，我就是这样做的，而且比我想象的要容易：

*   将 OutputFile.cpp更改`fopen`为文件共享调用`_fsopen` （共享读取访问）
*   `QuickTimeFileSink::continuePlaying()`在我调用的函数中每 10 秒一次 `completeOutputFile()`，从而使标题保持最新（包括视频长度等）。

Windows Media Player 不喜欢它（可能试图获得独占文件访问权限），但 VLC 很高兴在我仍在流式传输文件时读取文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:51:05.887

您通常不会`MP4`使用 -like API 从文件中读取（对于许多其他格式也是如此）`fopen`，而是使用库。反过来，它期望一个完整的文件并且不要尝试恢复损坏的文件，或读取仍在写入的文件。

因此，虽然从技术上讲，在编写过程中可以阅读，但使用常规库、应用程序和播放器不太可能成功。您需要先完成写入以使文件有效、可读和可播放 - 因为完成步骤会写入播放所需的索引。

# rspec - 未定义的局部变量或方法“root_path”（Rspec Spork Guard）

> ID：14871918
> 
> 赞同：2
> 
> 时间：2013-02-14T09:47:47.897
> 
> 标签：rspec, ruby-on-rails-3.2, guard, spork

我有一个新手问题:-)

我正在“创建”一个应用程序，我使用 M. Hartl's Tutorial 来执行此操作。但是自从我决定更改我的 routes.rb 后，我遇到了一些问题。我知道这个问题已经发布了，但答案对我不起作用，所以我想我应该问一个新的......

以下是代码：

## 配置/路由.rb

```
 root to: 'static_pages#home'
  match '/help', to: 'static_pages#help'
  match '/contact', to: 'static_pages#contact'
  match '/about', to: 'static_pages#about' 
```

## 规范/请求/static_pages.rb

```
require 'spec_helper'

describe "Static pages" do

  let(:base_title) { "Vidons" }

  describe "Home page" do
    visit root_path
    it "should have the h1 'Vidons'" do
      page.should have_selector('h1', :text => 'Vidons')
    end
    it "should have the base title" do
      page.should have_selector('title', :text => "#{base_title}")
    end
  end

  describe "Help page" do
    visit help_path
    it "should have the h1 'Aide'" do
      page.should have_selector('h1', :text => 'Aide')
    end
    it "should have the title 'Aide'" do
      page.should have_selector('title', :text => "#{base_title} | Aide")
    end
  end

  describe "About page" do
    visit about_path
    it "should have the h1 'A propos'" do
      page.should have_selector('h1', :text => 'A propos')
    end
    it "should have the title 'A propos'" do
      page.should have_selector('title', :text => "#{base_title} | A propos")
    end
  end

  describe "Contact page" do
    visit contact_path
    it "should have the h1 'Contact'" do
      page.should have_selector('h1', :text => 'Contact')
    end
    it "should have the title 'Contact'" do
      page.should have_selector('title', :text => "#{base_title} | Contact")
    end
  end
end 
```

## 规范/spec_helper.rb

（我删除了 Rspec.configure 块之一，并保留了 spork prerun 块内的那个）

```
require 'rubygems'
require 'spork'
#uncomment the following line to use spork with the debugger
#require 'spork/ext/ruby-debug'

Spork.prefork do
  # Loading more in this block will cause your tests to run faster. However,
  # if you change any configuration or code from libraries loaded here, you'll
  # need to restart spork for it take effect.
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'
  require 'rspec/autorun'

  # Requires supporting ruby files with custom matchers and macros, etc,
  # in spec/support/ and its subdirectories.
  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

  RSpec.configure do |config|
    # == Mock Framework
    #
    # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
    #
    # config.mock_with :mocha
    # config.mock_with :flexmock
    # config.mock_with :rr
    config.mock_with :rspec

    # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
    config.fixture_path = "#{::Rails.root}/spec/fixtures"

    # If you're not using ActiveRecord, or you'd prefer not to run each of your
    # examples within a transaction, remove the following line or assign false
    # instead of true.
    config.use_transactional_fixtures = true

    # If true, the base class of anonymous controllers will be inferred
    # automatically. This will be the default behavior in future versions of
    # rspec-rails.
    config.infer_base_class_for_anonymous_controllers = false
  end
end

Spork.each_run do
  # This code will be run each time you run your specs.

end 
```

这是 rspec-guard 的回应：

> 10:07:46 - 信息 - 弃用警告：:version 选项已弃用。现在仅支持 RSpec 2。
> 
> 10:07:46 - INFO - Guard 使用 Libnotify 发送通知。
> 
> 10:07:46 - INFO - Guard 使用 TerminalTitle 发送通知。
> 
> 10:07:46 - 信息 - 为 RSpec 启动 Spork
> 
> 使用 RSpec
> 
> 预加载 Rails 环境
> 
> 正在加载 Spork.prefork 块...
> 
> Rack::File headers 参数在 Rack 1.5 之后替换了 cache_control。
> 
> Spork 已准备好并正在 8989 上收听！
> 
> 10:07:53 - 信息 - RSpec 的 Spork 服务器成功启动
> 
> 10:07:53 - 信息 - Guard::RSpec 正在运行
> 
> 10:07:53 - 信息 - 运行所有规格
> 
> 使用 args ["--drb", "-f", "progress", "-r", "/home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/guard-rspec- 运行测试2.4.0/lib/guard/rspec/formatter.rb”、“-f”、“Guard::RSpec::Formatter”、“--failure-exit-code”、“2”、“spec”].. .
> 
> 遇到异常：#>
> 
> 回溯：
> 
> /home/flokate/Rubyrails/vidons/spec/requests/static_pages_spec.rb:8:in `block (2 levels) in '
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:244:in `module_eval'
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:244:in `subclass'
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:230:in `describe'
> 
> /home/flokate/Rubyrails/vidons/spec/requests/static_pages_spec.rb:7:in `block in '
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:244:in `module_eval'
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:244:in `subclass'
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:230:in `describe'
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.2/lib/rspec/core/dsl.rb:18:in `describe'
> 
> /home/flokate/Rubyrails/vidons/spec/requests/static_pages_spec.rb:3:in `'
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:in `load'
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:in `block in load'
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:236:in `load_dependency'
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:in `load'
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `block in load_spec_files'
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `each'
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.2/lib/rspec/core/configuration.rb:789:in `load_spec_files'
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.12.2/lib/rspec/core/command_line.rb:22：在“运行”中
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/spork-0.9.2/lib/spork/test_framework/rspec.rb:11:in `run_tests'
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/spork-0.9.2/lib/spork/run_strategy/forking.rb:13:in `block in run'
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/spork-0.9.2/lib/spork/forker.rb:21:in `block in initialize'
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/spork-0.9.2/lib/spork/forker.rb:18:in `fork'
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/spork-0.9.2/lib/spork/forker.rb:18:in `initialize'
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/spork-0.9.2/lib/spork/run_strategy/forking.rb:9:in `new'
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/spork-0.9.2/lib/spork/run_strategy/forking.rb:9:in `run'
> 
> /home/flokate/.rvm/gems/ruby-1.9.3-p286/gems/spork-0.9.2/lib/spork/server.rb:48:in `run'
> 
> /home/flokate/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/drb/drb.rb:1548:in `perform_without_block'
> 
> /home/flokate/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/drb/drb.rb:1508:in `执行'
> 
> /home/flokate/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/drb/drb.rb:1586:in `block (2 levels) in main_loop'
> 
> /home/flokate/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/drb/drb.rb:1582:在“循环”中
> 
> /home/flokate/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/drb/drb.rb:1582:in `block in main_loop'
> 
> 完毕。

由于弃用警告，我查看了我的 Gemfile，并删除了版本号，以便使用我感兴趣的最后一个 gem：

```
group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails'
  gem 'guard-rspec'
  gem 'guard-spork'
  gem 'spork'
end 
```

这给了我：

```
Fetching gem metadata from https://rubygems.org/.........
Fetching gem metadata from https://rubygems.org/..
Using rake (10.0.3) 
Using i18n (0.6.1) 
Using multi_json (1.6.0) 
Using activesupport (3.2.12) 
Using builder (3.0.4) 
Using activemodel (3.2.12) 
Using erubis (2.7.0) 
Using journey (1.0.4) 
Using rack (1.4.5) 
Using rack-cache (1.2) 
Using rack-test (0.6.2) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.2.2) 
Using actionpack (3.2.12) 
Using mime-types (1.21) 
Using polyglot (0.3.3) 
Using treetop (1.4.12) 
Using mail (2.4.4) 
Using actionmailer (3.2.12) 
Using arel (3.0.2) 
Using tzinfo (0.3.35) 
Using activerecord (3.2.12) 
Using activeresource (3.2.12) 
Using annotate (2.5.0) 
Using bcrypt-ruby (3.0.1) 
Using bootstrap-sass (2.1.0.0) 
Using bundler (1.2.3) 
Using nokogiri (1.5.6) 
Using ffi (1.3.1) 
Using childprocess (0.3.8) 
Using rubyzip (0.9.9) 
Using websocket (1.0.7) 
Using selenium-webdriver (2.29.0) 
Using xpath (0.1.4) 
Using capybara (1.1.2) 
Using coderay (1.0.8) 
Using coffee-script-source (1.4.0) 
Using execjs (1.4.0) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.3) 
Using json (1.7.7) 
Using rdoc (3.12.1) 
Using thor (0.17.0) 
Using railties (3.2.12) 
Using coffee-rails (3.2.2) 
Using diff-lcs (1.1.3) 
Using factory_girl (4.1.0) 
Using factory_girl_rails (4.1.0) 
Using listen (0.7.2) 
Using lumberjack (1.0.2) 
Using method_source (0.8.1) 
Using slop (3.4.3) 
Using pry (0.9.12) 
Using terminal-table (1.4.5) 
Using guard (1.6.2) 
Using rspec-core (2.12.2) 
Using rspec-expectations (2.12.1) 
Using rspec-mocks (2.12.2) 
Using rspec (2.12.0) 
Using guard-rspec (2.4.0) 
Using spork (0.9.2) 
Using guard-spork (1.4.2) 
Using jquery-rails (2.0.2) 
Using libnotify (0.5.9) 
Using rails (3.2.12) 
Using rb-inotify (0.8.8) 
Using rspec-rails (2.12.2) 
Using sass (3.2.5) 
Using sass-rails (3.2.5) 
Using sqlite3 (1.3.5) 
Using uglifier (1.2.3) 
Your bundle is updated! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

它并没有改变任何东西......我现在不太了解，但我希望你们中的一个能给我带来光明;-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T00:59:55.093

你只需要`visit root_path`在一个前块内：`before { visit root_path }`

# plupload - plupload 上传大小大于约 4 GB 的文件

> ID：14871919
> 
> 赞同：2
> 
> 时间：2013-02-14T09:47:49.770
> 
> 标签：plupload

我在网站上使用 plupload (1.5.4) 来上传电影文件。如果我尝试添加大小为 4287360 kB 的文件，则该文件根本不会添加到上传队列中。

问题似乎出在客户端，因为我还没有按下“开始上传”按钮，而只有“添加文件”按钮。

在当前版本的 Firefox 中运行时，plupload 选择的运行时是 flash。

这是php设置代码：

```
$("#uploaderdiv").plupload({
    runtimes : 'flash,html5,browserplus,silverlight,gears,html4',
    max_file_size : '20000mb',
    max_file_count : 1, // user can add no more then 1 file at a time
    chunk_size : '4mb',
    url : 'plupload_1_5_4/plupload/examples/upload.php',
    flash_swf_url : 'js/plupload.flash.swf',
    silverlight_xap_url : 'js/plupload.silverlight.xap',
unique_names : false,
    multiple_queues : true,
    filters : [
    ],
  }); 
```

我必须怎么做才能允许用户上传最大 15 或 20 GiB 的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:10:51.713

事实证明，限制是由这一行中的 plupload flash 引擎引起的：

```
runtimes : 'flash,html5,browserplus,silverlight,gears,html4', 
```

当我将此引擎优先级列表更改为：

```
runtimes : 'html5,browserplus,silverlight,flash,gears,html4', 
```

我还可以排队和上传更大的文件，正如使用 html5 引擎使用 19 GB 文件测试的那样。

# .net - xslt 调试将所有值显示为 null

> ID：14871921
> 
> 赞同：7
> 
> 时间：2013-02-14T09:47:54.627
> 
> 标签：.net, debugging, xslt

我正在使用带有 .Net 3.5 的 Visual Studio 10 Premium 并尝试调试 XslCompiledTransform。

我可以逐步完成所有操作，但所有变量值似乎都显示为 NULL。例如 self::node() 在本地窗口中显示为 NULL；如果我将 self::node() 放入监视窗口，它会显示“无法评估表达式。无效的指针”

唯一似乎有值的变量是 position() 和 last()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-04T11:51:14.007

在我的情况下，使用 Visual Studio 2010，它会不断地崩溃或根本不会在断点处中断。

这些问题似乎可以通过 Visual Studio 2012 及更高版本得到解决，其中 XSLT 调试工作正常。

如果您无法使用 Visual Studio 2010，请使用`xsl:message`获取诊断消息，或使用相同的选择替换您使用的`xsl:apply-templates`位置。`xsl:copy-of`仔细检查您的命名空间，因为这是未触发匹配或选择为空的最常见原因。

# c# - 如何从第二个重定向页面更新第一页？

> ID：14871923
> 
> 赞同：1
> 
> 时间：2013-02-14T09:47:58.640
> 
> 标签：c#, javascript, jquery, asp.net, ajax

我有两页：

```
page1.aspx

page2.aspx 
```

第一个有一个`GridView`打开第二个页面。

我想打开第二页，并在提交时更新`Gridview`第一页以反映更改。

* * *

```
protected void gv_inbox_RowCommand(object sender, GridViewCommandEventArgs e)
 {
   int index = Convert.ToInt32(e.CommandArgument);

    if (e.CommandName == "sign")
    {
      Session["main_code"] = int.Parse(((HiddenField)gv_inbox.Rows[index].Cells[1].FindControl("HDN_MainCode")).Value);
      Session["year"] = int.Parse(((HiddenField)gv_inbox.Rows[index].Cells[1].FindControl("HDN_Year")).Value);
      Session["values_key"] = gv_inbox.DataKeys[index].Value.ToString();

     String js = "window.open('page2.aspx', '_blank');";
                ClientScript.RegisterClientScriptBlock(this.GetType(), "Open Signature.aspx", js, true);

     }
} 
```

我想在点击更新第一页的`button [Confirm]`时候。`page2.aspx`并关闭第二页

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:32:31.007

最好的办法是在第 2 页上放置一个按钮，该按钮再次重定向到第 1 页。另一种选择是设置一个计时器，它会在几秒钟后返回到第 1 页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:57:07.510

我认为您在提交的第二页中有一些表单，您希望将新提交的数据显示到 gridview 中？如果是这种情况，在提交第一个表单时，您应该重新加载 page1.aspx。

所以这样做：只需使用js技巧“self.parent.location.href=self.parent.location.href;” 点击按钮[确认]。

# security - 我应该在哪里插入 Asp.net WebAPI 中的授权？

> ID：14871925
> 
> 赞同：25
> 
> 时间：2013-02-14T09:48:02.627
> 
> 标签：security, asp.net-web-api, authorization

如我所见，我有 3 个可能的地方可以将我的东西插入管道

```
1)     AuthorizationFilters

2)     Action Filters

3)     DelegatingHandler 
```

最明显的是 AuthorizationFilters ，我可以在其中使用自定义授权属性来装饰我的操作/控制器。`MyCustomAuthorizationAttribute`说……

由于 HTTP 消息处理程序处于处理管道的第一阶段。把它放在那里有意义吗？

现在对我来说，授权只是意味着检查标头中的令牌，该令牌在身份验证后提供给客户端。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-14T10:42:55.350

**2014 年 7 月更新**

我最初的回答涵盖了 WebApi 1。WebApi 2 发生了一些变化，即现在`IAuthenticationFilter`意味着您可以将身份验证逻辑移出`DelegatingHandler`更优雅的部分。

[这里](https://github.com/mbenford/WebApi-AuthenticationFilter)有一个 Nuget 项目，它提供了 IAuthenticationFilter 的实现，并解释了它的介绍的一些背景。

OWIN 中间件现在可能是实现您的身份验证逻辑的最佳位置 - 这里有一个证书身份验证示例，[并且在](http://leastprivilege.com/2013/11/11/client-certificate-authentication-middleware-for-katana/)[这篇博](http://lbadri.wordpress.com/2013/07/13/basic-authentication-with-asp-net-web-api-using-owin-middleware/)文中提供了基本身份验证 OWIN 中间件，前一个示例是首选示例，因为它演示了基`AuthenticationHandler`类的使用。

关于的建议`AuthorizationFilters`基本保持不变。

**结束更新**

通常...

用于`DelegatingHandler`进行身份验证...即某人是谁。使用它来设置线程和用户上下文的原理，添加声明等。您也可以在此处放置授权逻辑，但在相当全局的范围内。我个人总是使用 AuthorizationFilters 进行授权。

用于`AuthorizationFilters`将控制器和操作限制为特定人员。当您可以使用声明、主体、url 或 http 请求参数中的信息推断他们的许可时，将使用这些。默认授权过滤器可用于限制对匿名用户或角色的访问（如果在委托处理程序中设置） - 显然，如果需要，您也可以实现自己的 AuthorizationFilters。

当您需要使用消息内容对授权做出决定时偶尔使用`ActionFilters`，例如您需要访问实体上的属性以决定他们是否有权访问（显然要小心这个（！））。

笔记：

在`AuthorizationFilters`读取正文内容之前调用它们，因此它们无权访问消息正文来做出授权决定，这就是为什么`ActionFilters`专门`OnActionExecuting`使用 偶尔引发身份验证错误的原因。

**所以**

在您的场景中，我会简单`DelegatingHandler`地获取您的标题并设置主体。

```
public class CustomAuthenticationMessageHandler : DelegatingHandler
{

    public CustomAuthenticationMessageHandler ()
    {

    }

    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request,
                                                           CancellationToken cancellationToken)
    {
        Authenticate(request);

        return base.SendAsync(request, cancellationToken);
    }

    protected virtual void Authenticate(HttpRequestMessage request)
    {

        var authorisationHeader = request.Headers.Authorization;

        if (authorisationHeader == null)
        {
            return;
        }

        //Ensure you are happy with the header contents then

        {
            var principal = new GenericPrincipal(//new Identity , //Roles);
            Thread.CurrentPrincipal = principal;
            HttpContext.Current.User = principal;
        }

    }
} 
```

然后使用`AuthorizationFilters`限制访问：

```
 [Authorize]
    public string Get()
    {

    }

    [Authorize(Roles = "Admin")]
    public string GetAdminOnly()
    {

    } 
```

**注册全局认证**

```
config.MessageHandlers.Add(new CustomAuthenticationMessageHandler()); 
```

这意味着在每个请求中，主体都将设置为 null 或有效身份。它不会处理授权，即不会拒绝对任何控制器或操作的访问。

**开始保护资源**

使用标准或自定义 [Authorize] 属性来定位受保护的控制器和操作。或全球注册：

```
config.Filters.Add(new AuthorizeAttribute()); 
```

并且仅将您希望使用该 `[AllowAnonymous]`属性不安全的控制器和操作列入白名单。

**如果您只想对某些路由进行身份验证**

然后你可以修改你`DelegatingHandler`的一点来设置`InnerHandler`路由到正确的控制器，例如

```
public CustomAuthenticationMessageHandler(HttpConfiguration configuration)
{
       InnerHandler = new HttpRoutingDispatcher(configuration);
} 
```

然后你可以像这样在你的路由上指定这个处理程序：

```
config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "myurl",
            defaults: new {},
            constraints: new {},
            handler: new CustomAuthenticationHandler(config)
            ); 
```

# android - Android EditText InputMethodManager 在输入字符串中有换行符

> ID：14871930
> 
> 赞同：1
> 
> 时间：2013-02-14T09:48:15.640
> 
> 标签：android, android-edittext

我正在启动一个带有文本编辑的对话框。我希望键盘在我触摸文本编辑字段时弹出，当我点击返回时，我希望它消失。

好吧，我明白了

```
 final EditText commentTextEdit = new EditText(context);
        commentTextEdit.setFocusableInTouchMode(false);
        commentTextEdit.setOnTouchListener(new EditText.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                commentTextEdit.setFocusableInTouchMode(true); 
                InputMethodManager inputManager = (InputMethodManager)context.getSystemService(Context.INPUT_METHOD_SERVICE); 
                inputManager.hideSoftInputFromWindow(commentTextEdit.getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS );
                return false;
            }
        });
        commentTextEdit.setOnEditorActionListener(new OnEditorActionListener() {
            @Override
            public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
                String s = commentTextEdit.getText().toString();
                Log.d("Dialogs", "BarOptionsDialog got input "+s);
                if(s.contains("\n"))
                    Log.d("Dialogs", "BarOptionsDialog found new line");
                InputMethodManager imm = (InputMethodManager)context.getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(commentTextEdit.getWindowToken(), 0);
                return false;
            }
        });
        commentTextEdit.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1f));
        innerlayout.addView(commentTextEdit); 
```

唯一的问题是，我不想要字符串中的 \n 。当我点击返回时触发 setOnEditorActionListener onEditorAction 但是当我查看字符串时，那里没有 \n

然而，当 setOnEditorActionListener onEditorAction 完成时，\n 出现在我不想要的编辑文本中。

有人知道如何阻止吗？

谢谢

# android - 使用嵌套布局定义特定的 xml 布局

> ID：14871931
> 
> 赞同：1
> 
> 时间：2013-02-14T09:48:19.397
> 
> 标签：android, xml, xml-layout

我正在设计我的第一个 Android 应用程序，并试图掌握创建 XML 布局的窍门。（我对 Java 有丰富的经验）

基本上我想做的事情：

![http://i.imgur.com/ZgbvYsX.png](../Images/0071c77eae9d0f8da9b6e4b9a2e38c07.png)

大纲描述的地方：

**蓝色：**基本视图（我可以在其中设置文本）

**红色：**一个 ButtonView（用于用户同步数据）

**绿色：**嵌套的 RelativeLayout（我将在其中添加很多其他内容）

更具体地说，我想做的是：

![在此处输入图像描述](../Images/350022eb86346c60a8c83709819d2f12.png)

所以我的问题是：如何设置不同的布局？我在设置蓝色和红色视图时遇到了一定的麻烦，因为我希望红色视图填充大约 25% 的屏幕宽度（蓝色填充最后 75%）。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:57:20.647

使用`layout_weight`属性指定视图占用的屏幕空间百分比。

就像这里一样，例如：

```
<LinearLayout android:layout_height="match_parent" android:layout_width="match_parent"
android:orientation="vertical"    .........>

     <LinearLayout android:layout_height="wrap_content" android:layout_width="match_parent"
     android:orientation="horizontal">

           <EditText android:layout_height="wrap_content" android:layout_width="0dip"
           android:layout_weight="3"/>

           <Button android:layout_height="wrap_content" android:layout_width="0dip"
           android:layout_weight="1"/>

     </LinearLayout>

     //Other view

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:57:28.483

使用以下 xml，这是专门为您设计的。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_alignParentLeft="true"
        android:layout_weight="0.75">

        <TextView
            android:id="@+id/headingTextView"
            style="@android:style/TextAppearance.WindowTitle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"

            android:text="Cafe Vigeos"
            android:textColor="@android:color/white"
            android:textSize="30sp" />
         </RelativeLayout>
         <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_alignParentRight="true"
        android:layout_weight="0.25">
        <Button
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/nested_relative_layout"
        android:layout_width="match_parent"
        android:layout_height="fill_parent" >
    </RelativeLayout>

</LinearLayout> 
```

# excel - 如果单元格包含某些文本，则将此文本放入单元格中

> ID：14871935
> 
> 赞同：1
> 
> 时间：2013-02-14T09:48:36.443
> 
> 标签：excel

我有一个这样的数据集：

```
 A     B          C
1     A     A is this   
2     B     Z is this
3     C     D is this
4     D     A is this
5     E     K is this 
```

如果单元格 B1 包含 A、B、C、D 或 E（因此是 A 列的值），那么我想将 A、B、C、D 或 E 放入单元格 C1

我尝试使用以下 C1 公式来执行此操作：

```
=IF(FIND("A";B1;1);"A";IF(FIND("B";B1;1");"B";IF(FIND("C";B1;1) ... 
```

但由于我的 A 列包含 24 个可能的值，因此它变成了一个很长的公式。

有人可以帮我简化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:53:32.247

将以下公式放入 C 列：

```
=INDEX(A:A,MATCH(FALSE,ISERROR(FIND(A:A,B1)),0))

```

将其作为数组公式输入，即按`Ctrl`- `Shift`- `Enter`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T16:09:24.507

我们有一个类似的问题（试图根据一个单元格中包含的标准对数据行进行分类）。这是一个非常丑陋的公式，但它有效：

=IF(ISERROR(FIND(".03",Q4,1)),(IF(ISERROR(FIND("F",Q4,1)),(IF(ISERROR(FIND(".50",Q4,1 )),(IF(ISERROR(FIND(".25",Q4,1)),(IF(Q4>"A","other","Parts")),"Svc")),"Install") ),"Frt")),"马赫")

find 函数会返回匹配项或错误 (#VALUE)，因此每次进行新搜索时都必须添加 ISERROR。

阅读公式的最佳方法是从最左边开始，匹配到最右边，然后向内（F1、F2、F3、F4、F5、F6---- A6、A5、A4、A3、A2 , A1)

在 excel 帮助中无法找到此内容，并且在 Web 上也很难找到，因此我想分享此内容，以防其他人在创建公式以根据单元格是否包含标准来确定值时遇到问题。

# google-chrome - 在页面中嵌入 Web 检查器控制台

> ID：14871936
> 
> 赞同：7
> 
> 时间：2013-02-14T09:48:39.797
> 
> 标签：google-chrome, web-inspector

有没有办法在页面中嵌入来自 chrome web 检查器的“控制台”选项卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-08T16:59:21.327

不幸的是，我不知道在任何浏览器的普通网页中执行此操作的方法，但您可以制作一个[Electron 应用程序](http://electron.atom.io/)，并可能在您想要用户的任何时候显示检查器。

如果你想在你的网站上嵌入一个 JS 控制台模拟器，也许是为了炫耀原始的 JavaScript，你可以使用[YourJS Console](https://yourjs.com/console/)。它还使您能够使用自定义代码或 GitHub Gist 初始化控制台。

# android - 缩放 html 电子邮件以适应移动屏幕而无需滚动（android / iOS）

> ID：14871937
> 
> 赞同：3
> 
> 时间：2013-02-14T09:48:40.623
> 
> 标签：android, iphone, html-email

我正在尝试构建一个 html 电子邮件，它可以缩放以适应移动屏幕，而无需用户水平滚动。我试过用...

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

并将身体宽度设置为 100% - 但似乎都不起作用。还有其他建议吗？

这是我的完整html

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style type="text/css">.ExternalClass .ecxReadMsgBody{width:100%;}   .ExternalClass{width:100%;} body{margin: 0; padding: 0;} </style>

</head>
<body style="background: #dfdfe0; width:100%;">

    <table align="center" border="0" cellpadding="0" cellspacing="0" style="background: #dfdfe0;color: #37383a;margin: 0px;width: 100%;" width="100%">
        <tr>
            <td>
                <table border="0" cellpadding="0" cellspacing="0" width="576">

                    <tr>
                        <td colspan="2"></td>
                        <td colspan="34" style="background-color: red;" bgcolor="red"><img width="522" src="header2.png"></td>
                        <td colspan="2"></td>
                    </tr>

                    <tr> <!-- Start of the email grid -->
                        <td width="9"></td>
                        <td width="18" height="10" style="background-color: red; height: 10px;" bgcolor="red"></td>
                        <td width="27"></td> 
                        <td width="9"></td>
                        <td width="9"></td>
                        <td width="27"></td>
                        <td width="9"></td>
                        <td width="9"></td>
                        <td width="27"></td>
                        <td width="9"></td>
                        <td width="9"></td>
                        <td width="27"></td>
                        <td width="9"></td>
                        <td width="9"></td>
                        <td width="27"></td>
                        <td width="9"></td>
                        <td width="9"></td>
                        <td width="27"></td>
                        <td width="9"></td>
                        <td width="9"></td>
                        <td width="27"></td>
                        <td width="9"></td>
                        <td width="9"></td>
                        <td width="27"></td>
                        <td width="9"></td>
                        <td width="9"></td>
                        <td width="27"></td>
                        <td width="9"></td>
                        <td width="9"></td>
                        <td width="27"></td>
                        <td width="9"></td>
                        <td width="9"></td>
                        <td width="27"></td>
                        <td width="9"></td>
                        <td width="9"></td>
                        <td width="27"></td>
                        <td width="18" style="background-color: red;" bgcolor="red"></td>
                        <td width="9"></td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html> 
```

非常感谢！

编辑

请注意，我还将列数减少到 5，但我仍然得到相同的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:55:11.163

您的表格宽度以像素 (576px) 为单位设置，大于手机屏幕尺寸。您可以使用[媒体查询（响应式设计）](http://www.campaignmonitor.com/guides/mobile/)来禁用或调整桌面版本以适应移动屏幕，否则您需要使用[流畅的设计](http://www.campaignmonitor.com/blog/post/3564/applying-fluid-layouts-to-html-email-design/)。

限制是媒体查询在 Gmail 中不起作用，因为您无法内联它们。流体仅适用于单列布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:51:52.287

```
<table border="0" cellpadding="0" cellspacing="0" width="100%"> 
```

您已在表格中指定了绝对宽度。将其更改为 100% 宽度。

# asp.net-mvc-3 - 使用函数从表中返回一个值

> ID：14871938
> 
> 赞同：2
> 
> 时间：2013-02-14T09:48:41.933
> 
> 标签：asp.net-mvc-3, sql-server-2008

我有这个代码：

```
public int GetUserIdByEmail(string email)
{
  using (SqlConnection conn = new SqlConnection(ZincModelContainer.CONNECTIONSTRING))
  {
    using (SqlCommand cmd = conn.CreateCommand())
    {
      conn.Open();
      cmd.CommandType = System.Data.CommandType.Text;
      cmd.CommandText = String.Concat("SELECT [Zinc].[GetUserIdByEmail] (", email, ")");  //is this correct??? the problem lies here

      return (int)cmd.ExecuteScalar();
     } 
  }
} 
```

我在上面的代码中得到了错误。这仍然不对我现在有我的功能，如下 veljasije 建议的谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:56:16.487

修改您的程序：

```
CREATE PROCEDURE [Zinc].[GetUserIdByEmail]
 (
   @Email varchar (100)
 )

 AS
 BEGIN

   SELECT zu.UserId from Zinc.Users zu WHERE Email = @Email

 END 
```

在您的代码中，将参数的类型从更改`NVarChar`为`VarChar`

**功能**

```
CREATE FUNCTION [Zinc].[GetUserIdByEmail]
 (
   @Email varchar(100)
 )
 RETURNS int
 AS
 BEGIN

   DECLARE @UserId int;
   SET @UserId = (SELECT zu.UserId from Zinc.Users zu WHERE Email = @Email)

   RETURN @UserId                
 END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:53:18.893

首先，在 sproc 中指定 @Email 参数的大小 - 如果没有它，它将默认为 1 个字符，因此不会尝试匹配您期望的值。

始终明确指定大小以避免任何问题（例如，根据 Marc_s 的评论，以及我在[此处](http://www.adathedev.co.uk/2010/04/sql-cast-to-varchar-without-size.html)发布的演示，它的行为不同，但在使用 CAST/CONVERT 时默认为 30 个字符）

其次，使用[SqlCommand.ExecuteScalar()](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx) 例如

```
userId = (int)cmd.ExecuteScalar(); 
```

# jquery - 标题的背景图片

> ID：14871941
> 
> 赞同：3
> 
> 时间：2013-02-14T09:49:01.960
> 
> 标签：jquery, jquery-mobile

我想将背景图像添加到标题并为其设置背景位置。这是我的代码不起作用..

HTML

```
 <!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Home</title>
<!-- Meta viewport tag is to adjust to all Mobile screen Resolutions-->
<meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1" />

<link rel="stylesheet" type="text/css" href="css/style.css" />
<link rel="stylesheet" type="text/css" href="css/Jstyle.css" />
<script type="text/javascript" src="Javascript/jquery1.js"></script>
<script type="text/javascript" src="Javascript/jquery2.js"></script>

</head>
<body>
    <div data-role="page" id="project">

        <div data-role="header" class="header"></div>

        <div id="ad" align="center">

            <img alt="image" src="images/ad.png">

        </div>

        <div data-role="content">
            <div id="product" align="center">
                <img alt="image2" src="images/product.png">

            </div>

            <!-- Style card  -->

            <div id="style" align="center">
                <img alt="image2" src="images/style_card.png">

            </div>
            <!-- Social  -->

            <div id="social" align="center">
                <img alt="image2" src="images/app_store.png"> <img
                    alt="image2" src="images/social.png">
            </div>
        </div>
    </div>

</body> 
```

CSS：

```
.header{

background-image:url("images/image_bg_inner.png");

width:200px;

background-color: #B00C0C; 
```

}

也试过了`.ui-header`。。它不工作。请帮助我如何做同样的事情..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:56:48.143

**尝试 ：**

```
.header {
width:200px;
background-image:url("images/image_bg_inner.png");
} 
```

也许 与`background-color`冲突`background-image`。

**或者：**

为您的标题添加高度。

```
.header {
width:200px;
background-color: #B00C0C;
background-image:url("images/image_bg_inner.png");
min-height:70px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:02:18.637

这对我来说很好。

```
<style type="text/css">
.ui-header {
  height:200px; /* any height */
  background-image:url(newlogo.png);
  background-repeat:no-repeat;
  background-position:center;
}
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:54:45.297

Try:

```
.ui-bar-a{
    background-image:url("images/image_bg_inner.png");
    width:200px;
    background-color: #B00C0C;
} 
```

If you are using another theme change to .ui-bar-b etc. Width 200px seems odd on that element though?

# spring - 在表单外显示弹簧表单错误

> ID：14871942
> 
> 赞同：5
> 
> 时间：2013-02-14T09:49:03.353
> 
> 标签：spring, spring-mvc

我们如何在表单之外显示表单错误。我知道它可以使用`<sf:errors path="nb"></sf:errors>`. 如果我想单独显示它，`div`我该怎么做？我是春天的新手，所以请指导我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T10:17:16.213

如果您打算同时显示所有错误消息，则可以使用以下标记库。

```
<%@taglib uri="http://www.springframework.org/tags" prefix="spring" %> 
```

就像是，

```
<spring:hasBindErrors htmlEscape="true" name="someBean">
    <c:if test="${errors.errorCount gt 0}">
    <h4>The error list :</h4>
    <font color="red">
      <c:forEach items="${errors.allErrors}" var="error">
        <spring:message code="${error.code}"
                        arguments="${error.arguments}"
                        text="${error.defaultMessage}"/><br/>
      </c:forEach>
    </font>
  </c:if>   
</spring:hasBindErrors> 
```

请注意，`name="someBean"`标签的 name 属性[`<spring:hasBindErrors/>`](http://static.springsource.org/spring/docs/1.2.x/taglib/tag/BindErrorsTag.html)是绑定到表单的实际命令对象。

# javascript - 使用 UseSubmitBhaviour=false 不会触发“onclick”事件

> ID：14871943
> 
> 赞同：4
> 
> 时间：2013-02-14T09:49:03.887
> 
> 标签：javascript, asp.net, onclick, aspbutton

以下代码适用于我的工作环境。但对于我的客户，'Onclick' 事件不会触发。如果我们从页面中删除`UseSubmitBehavior='false'`和`OnclientClick`事件，它对他们来说工作正常。我的问题是这个问题的原因是什么。是因为浏览器设置还是什么？我不知道为什么它不射击。请帮我。

```
 <asp:ToolkitScriptManager  ID="ToolkitScriptManager1" AsyncPostBackTimeout="10000"
    runat="server">
</asp:ToolkitScriptManager>
<asp:Panel ID="Panel1"  runat="server">
    <table>
        <tr>
            <td align="left">
                UserName:
                <asp:TextBox ID="tbUserName" Width="150px" runat="server" ></asp:TextBox>
                <asp:RequiredFieldValidator ID="rfvUser" runat="server" ErrorMessage="Required" ControlToValidate="tbUserName"
                    ValidationGroup="validate"></asp:RequiredFieldValidator>
            </td>
        </tr>
        <tr>
            <td align="left">
                Password:
                <asp:TextBox Width="150px" ID="tbPassword" 
                    runat="server" TextMode="Password" ></asp:TextBox>
                <asp:RequiredFieldValidator ID="rfvPassword" runat="server" ErrorMessage="Required"
                    ControlToValidate="tbPassword" ValidationGroup="validate"></asp:RequiredFieldValidator>
            </td>
        </tr>
        <tr id="rowCaptcha" runat="server">
            <td>
                <table style="margin-left: 30px">
                    <tr>
                        <td>
                            <telerik:radcaptcha errormessage="Please enter valid code" validatedtextboxid="tbRadcaptcha"
                                captchatextboxlabelcssclass="textBox" id="RadCaptcha1" captchaaudiolinkbuttontext=""
                                enablerefreshimage="true" captchaimage-renderimageonly="true" validationgroup="group"
                                runat="server"></telerik:radcaptcha>

                        </td>
                    </tr>
                    <tr>
                        <td align="left">
                            <asp:Label ID="Label5" runat="server"  Text="Type the above code in text box"></asp:Label>
                        </td>
                    </tr>
                    <tr>
                        <td align="left">
                            <asp:TextBox runat="server" ValidationGroup="group" ID="tbRadcaptcha"></asp:TextBox>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td align="left">
                <br />
                <asp:Button ID="btLogin" runat="server" Style="margin-left: 80px" UseSubmitBehavior="false"
                    OnClientClick="this.disabled=true" ValidationGroup="group" Text="Login" OnClick="btLogin_Click" />
            </td>
        </tr>
    </table>
</asp:Panel> 
```

编辑：此代码在我们的本地环境中适用于 ie8、ie9 和 ie10。但是对于我的客户来说，使用 ie8 和 ie10（他们不使用 ie9）的人不起作用。他们的浏览器是否有任何设置更改？提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:07:31.167

是的，可能存在由不是“最新”的服务器端 .NET 框架引起的客户端问题。

参见例如：[http ://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

您应该向您的客户索取页面的 HTML 源代码。

确保这件事 ：

*   它包含从 onclick 事件`__dopostback`连接到您的调用`this.disabled=true`
*   该`__dopostback`函数的生成代码在您使用相同浏览器的工作环境中是相同的
*   如果不同，您的客户可能错过了一些更新

# ios - 是否有另一种在 iOS 中启动 Messages 应用程序的方法？（用于捐赠）

> ID：14871949
> 
> 赞同：12
> 
> 时间：2013-02-14T09:49:13.120
> 
> 标签：ios, sms, messages, submission, donations

我们正在尝试提交一个 iOS 应用程序，该应用程序可以进行慈善 SMS 捐赠。我们过去做过很多这样的事情，没有问题；但苹果不再愿意接受我们的做法并拒绝了我们的应用程序。

他们声称该应用程序不符合指南的第 21.2 点。这是：

> **21.2**募捐必须通过 Safari 中的网站或短信进行

过去，在这个当前的应用程序中，我们使用`MFMessageComposeViewController`框架`MessageUI`来构建 SMS 消息。我们使用它是因为；作为对简码的捐赠，我们需要能够在消息中编写关键字。

在调解中心（和拒绝争议）进行了一些反复讨论之后，我能从苹果公司得到的关于我们应该做的最多的事情是：

> 从应用程序内发送 SMS 消息可能不符合 App Store 指南。

和

> SMS 链接应启动 Messages 以进行捐赠。

我们可以使用`sms:` [URL 方案](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/sms.html)来启动特定数量的消息应用程序，但该方法不允许我们添加所需的关键字。

* * *

所以问题是：有谁知道启动消息应用程序的另一种方式？

我们的后备选项是放弃自己构建 SMS 消息，并有一个警报告诉用户“将*YYYY 发送到 ZZZZ* ”，这是一个非常糟糕的用户体验。

* * *

**更新（2013 年 3 月 5 日）：**

我们再次使用仅警报后备选项重新提交了该应用程序……出于同样的原因，它再次被拒绝。我们再次与苹果公司竞争。

* * *

**更新（2013 年 3 月 6 日）：**

在向 Apple 发出严厉的信息后，解释了显而易见的……该应用程序已通过提交。

我写：

> 我们必须不同意。该应用程序不包括在应用程序内收集慈善捐款的功能。它只通知用户他们可以如何捐赠。

所以; 如果您有同样的问题，我建议您先尝试投诉，然后再“修复”您的应用程序。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-14T10:01:18.283

是和否。

**在基本层面上：否。**我查看了文档，当您在外部调用 Messages 应用程序时，您（相当令人沮丧）无法为您的消息设置正文。

您只能：

1.  打开消息应用

    ```
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"sms:"]]; 
    ```

2.  输入要发送消息的号码

    ```
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"sms:+1234567890"]]; 
    ```

* * *

**更复杂：是的。**这是发送带有正文的短信的方法和代码。它以 ModalView 的形式呈现与消息应用程序完全相同的视图。作为参考[，您可以在此处阅读文档](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html#//apple_ref/doc/uid/TP40009668)。

3.  `MessageUI`将框架导入您的项目

4.  将这些添加到发送消息的操作所在的视图的 .h 中（在我的例子中是一个带有单个按钮的简单视图）。

    ```
    #import <MessageUI/MessageUI.h>
    #import <MessageUI/MFMessageComposeViewController.h> 
    ```

5.  发送消息的重要代码应该类似于：

    ```
    -(IBAction)sendSMS:(id)sender {

        if([MFMessageComposeViewController canSendText]) {
            MFMessageComposeViewController *controller = [[MFMessageComposeViewController alloc] init];
            controller.body = @"Hello";
            controller.recipients = [NSArray arrayWithObjects:@"+1234567890", nil];
            controller.messageComposeDelegate = self;
            [self presentViewController:controller animated:YES completion:nil];
        }
    } 
    ```

* * *

上面的代码不会发送文本或取消视图，因为我们还没有实现该`messageComposeViewController:didFinishWithResult:`方法 - 可以在[此处](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMessageComposeViewControllerDelegate_protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40009669)阅读相关文档。这将如下所示：

```
- (void)messageComposeViewController:(MFMessageComposeViewController *)controller 
                 didFinishWithResult:(MessageComposeResult)result {
    switch(result) {
        case MessageComposeResultCancelled:
            // user canceled sms
            [self dismissViewControllerAnimated:YES completion:nil];
            break;
        case MessageComposeResultSent:
            // user sent sms
            //perhaps put an alert here and dismiss the view on one of the alerts buttons
            break;
        case MessageComposeResultFailed:
            // sms send failed
            //perhaps put an alert here and dismiss the view when the alert is canceled
            break;
        default:
            break;
    }
} 
```

在每种情况下，您都可以显示警报、关闭视图（如案例 1）或您的应用程序需要的任何内容。

我确信第二种方法应该被批准，或者苹果应该从他们的文档中删除它。关键是`canSendText`if 语句。如果这个（或 case 开关`didFinishWithResult`）没有实现，Apple 肯定会拒绝该应用程序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-10T15:26:32.537

您也可以设置正文，但您必须转义字符串。

```
NSString *sms = @"sms://+1234567890&body=This is the body.";

NSString *url = [sms stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]]; 
```

# nstimer - NSTimer 只运行一次

> ID：14871958
> 
> 赞同：0
> 
> 时间：2013-02-14T09:49:50.550
> 
> 标签：nstimer

我为我的应用程序创建了计时器，但计时器只运行一次，然后停止。

下面是我的代码：

```
moveobjecttimer= [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(moveObject) userInfo:nil repeats:YES]; 
```

重复设置为 YES，但计时器只运行一次。

我的问题是：如何创建在连续循环中运行而不停止的计时器？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:48:55.397

也许您的代码是单独执行的`NSThread`？在这种情况下，计时器被添加到该线程的运行循环中。如果线程随后终止，则在计时器可以第二次触发之前，计时器仅触发一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:04:19.933

我添加了额外的代码，在运行循环和主线程上添加了计时器。还添加了日志记录，根据日志，计时器一直处于活动状态。

下面是代码： NSRunLoop *runloop = [NSRunLoop currentRunLoop]; self.moveobjecttimer= [NSTimer scheduledTimerWithTimeInterval:0.1 目标:self 选择器:@selector(moveObject) userInfo:nil repeats:YES];

```
 [runloop addTimer:moveobjecttimer forMode:NSRunLoopCommonModes];
    [runloop addTimer:moveobjecttimer forMode:UITrackingRunLoopMode];
    [self performSelectorOnMainThread:@selector(moveobjecttimer) withObject:nil waitUntilDone:NO];

    BOOL timerstate = [moveobjecttimer isValid];
    NSLog(@"Timer validity is: %@",timerstate?@"YES":@"NO"); 
```

动画只再次显示一次。

# javascript - 太多递归下划线 1.4.4

> ID：14871959
> 
> 赞同：1
> 
> 时间：2013-02-14T09:49:53.687
> 
> 标签：javascript, jquery, jquery-mobile, backbone.js, underscore.js

我有这个问题。

```
too much recursion 
```

它指向 underscore.js

```
// Extend a given object with all the properties in passed-in object(s).
_.extend = function(obj) {
  each(slice.call(arguments, 1), function(source) {
     if (source) {
       for (var prop in source) {
          obj[prop] = source[prop];
       }
     }
  });
return obj;
}; 
```

顺便说一句，我正在使用 Backbone 0.9.10、jQuery 1.8.2、jQuery Mobile 1.2.0、需要 2.1.4 和下划线 1.4.4

这是我的 main.js

```
require.config({
paths:{
    jquery : 'libs/jQuery/1.8.2/jquery-1.8.2',
    mobile : 'libs/jQuery/jMobile/1.2.0/jquery.mobile-1.2.0',
    base64 : 'libs/base64/webtoolkit.base64',
    backbone : 'libs/backbone/0.9.10/backbone',
    localstorage : 'libs/backbone/localstorage/backbone.localStorage',
    underscore : 'libs/underscore/1.4.4/underscore',
    text : 'libs/require/2.1.4/text/text',
    template : '../template'
},

 shim: {
    backbone: { deps: ["underscore", "jquery", "mobile"], exports: "Backbone" },
    underscore: { exports: "_" }
}

});

require([
// Load our app module and pass it to our definition function
'router'
], function(Router){

Router.initialize();
}); 
```

所以我的问题是 Backbone 0.9.10 与下划线 1.4.4 不兼容吗？它们也是我得到的两个 AMD 版本[https://github.com/amdjs](https://github.com/amdjs)。

当我尝试将 Backbone 降级到 0.9.2 而下划线为 1.4.4 时，问题是我希望更新 Backbone。有任何想法吗？谢谢

# kohana - 我要计数评论（Kohana 3.2）

> ID：14871960
> 
> 赞同：0
> 
> 时间：2013-02-14T09:49:54.720
> 
> 标签：kohana

我正在使用 Kohana 3.2 和 Bootstrap 2.3.0 开发迷你博客，这是一个数据库结构表。

```
CREATE TABLE IF NOT EXISTS `entries` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `entry_title` varchar(255) NOT NULL,
  `entry_content` text NOT NULL,
  `entry_created_date` datetime NOT NULL,
  `entry_edited_date` datetime NOT NULL,
  `entry_created_ip` varchar(40) NOT NULL,
  `entry_edited_ip` varchar(40) NOT NULL,
  `entry_published` tinyint(1) NOT NULL,
  `entry_published_comment` tinyint(1) NOT NULL,
  `entry_hits` int(11) NOT NULL,
  `catentry_id` tinyint(2) NOT NULL,
  `user_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `comments` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `comment_message` text NOT NULL,
  `comment_date` datetime NOT NULL,
  `comment_ip` varchar(40) NOT NULL,
  `entry_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8; 
```

这是我的项目位置。C:\wamp\www\iblog

创建模型条目。C:\wamp\www\iblog\application\classes\model\entry.php

```
<?php

defined('SYSPATH') or die('No direct script access.');

class Model_Entry extends ORM {
    protected $_belongs_to = array(
        'catentry' => array(),
        'user' => array()
    );

    protected $_has_many = array(
        'comments' => array()
    );
} 
```

创建模型注释。C:\wamp\www\iblog\application\classes\model\comment.php

```
<?php

defined('SYSPATH') or die('No direct script access.');

class Model_Comment extends ORM {
    protected $_belongs_to = array(
        'entry' => array(),
        'user' => array()
    );
} 
```

在控制器管理中创建函数入口。C:\wamp\www\iblog\application\classes\controller\manage.php

```
function action_entry() {
        if (Session::instance()->get('user') == null && Session::instance()->get('user')->usertype_id != 1) {
            $this->template->content = View::factory('user/login');
        } else {

            // Get the total count of records in the enry table
            $count = ORM::factory('entry')->find_all()->count();

            // Create an instance of Pagination class and set values
            $pagination = Pagination::factory(array(
                        'total_items' => $count,
                        'items_per_page' => 10,
                    ));
            $pagination->route_params(array('controller' => $this->request->controller(), 'action' => $this->request->action()));

            // Load specific results for current page
            $entries = ORM::factory('entry')
                    ->order_by('id')
                    ->limit($pagination->items_per_page)
                    ->offset($pagination->offset)
                    ->find_all();

            // Render the pagination links
            $page_links = $pagination->render();

            // Define our template view and bind to variables
            $this->template->content = View::factory('manage/entry')
                    ->bind('count', $count)
                    ->bind('entries', $entries)
                    ->bind('page_links', $page_links);
        }
    } 
```

创建视图条目。C:\wamp\www\iblog\application\views\manage\entry.php

```
<ul class="breadcrumb">
    <li>
        <?php echo HTML::anchor('', '<i class="icon-home icon-white"></i>&nbspHome'); ?>
        <span class="divider">/</span>
    </li>
    <li>
        <?php echo HTML::anchor('manage/index', 'manage'); ?>
        <span class="divider">/</span>
    </li>
    <li class="active">entry</li>
</ul>

<div class="page-header">
    <span class="pull-right">
        <?php echo HTML::anchor('manage/index', '<strong>กลับไปหน้าตั้งค่า&lt;/strong> <i class="icon-signout"></i>', array('class' => 'btn btn-danger')); ?>
    </span>
    <h2><i class="icon-tasks"></i> จัดการบล็อก&lt;/h2>
</div>

<table class="table table-striped table-condensed table-hover">
    <thead>
        <tr>
            <th>#</th>
            <th>Name</th>
            <th>Category</th>
            <th>Comment Count</th>
            <th>publish?</th>
            <th>comment?</th>
            <th>Hits</th>
            <th>Owner</th>
            <th>Created</th>
            <th>Modified</th>
            <th style="width: 36px;"></th>
        </tr>
    </thead>
    <tbody>
        <?php foreach ($entries as $entry): ?>
            <tr class="tooltip-demo">
                <td><?php echo $entry->id; ?></td>
                <td>
                    <?php echo HTML::anchor('', '<i class="icon-eye-open"></i>', array('rel' => 'tooltip', 'title' => $entry->entry_title)); ?>
                </td>
                <td><?php echo $entry->catentry->cat_entry_name; ?></td>
                <td><?php echo 'no'; ?></td>
                <td>
                    <?php 
                        switch($entry->entry_published) {
                            case 0: echo '<span class="label label-warning">publish</span>';break; 
                            case 1: echo '<span class="label label-success">waited</span>';break;
                        }
                    ?>
                </td>
                <td>
                    <?php 
                        switch($entry->entry_published_comment) {
                            case 0: echo '<span class="label label-important">On</span>';break; 
                            case 1: echo '<span class="label label-success">Off</span>';break;
                        }
                    ?>
                </td>
                <td><?php echo HTML::anchor('entry/viewEntry/'. $entry->id, @$entry->entry_hits); ?></td>
                <td><?php echo $entry->user->username; ?></td>
                <td><?php echo $entry->entry_created_date; ?></td>
                <td>
                    <?php 
                        if ($entry->entry_edited_date == '0000-00-00 00:00:00') {
                            echo 'Not Modified.'; 
                        } else {
                            echo $entry->entry_edited_date;
                        }
                    ?>
                </td>
                <td>
                    <?php echo HTML::anchor('manage/editEntry/' . $entry->id, '<i class="icon-edit"></i>', array('rel' => 'tooltip', 'title' => 'แก้ไข')); ?>
                    <?php echo HTML::anchor('manage/deleteEntry/' . $entry->id, '<i class="icon-minus-sign"></i>', array('rel' => 'tooltip', 'data-placement' => 'right', 'title' => 'ลบบล็อกนี้', 'onclick' => 'return confirm(\'ต้องการลบบล็อกนี้ใช่หรือไม่?\')')); ?>

    <!--<a href="<?php //echo url::base();  ?>admin/delete/<?php //echo $catentry->id;  ?>" onclick="return confirm('ต้องการลบหมวดนี้ใช่หรือไม่?')" role="button" data-toggle="modal"><i class="icon-minus-sign"></i></a>-->
                </td>
            </tr>
        <?php endforeach; ?>
    </tbody>
</table>

<hr>

<div class="pagination">
    <?php echo @$page_links; ?>
    <span class="pull-right"><?php echo Form::label('', '<h4><i class="icon-book"></i> ' . $count . ' Entries</h4>'); ?></span>
</div> 
```

问题。我如何计算评论计数值的评论？

[查看示例条目](http://i.stack.imgur.com/oGACu.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:41:54.203

鉴于“foreach”正文，您可以这样写：

```
<?php echo $entry->comments->count_all(); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:26:40.770

在您看来，在 for 循环中，尝试插入：

```
<?php echo $entry->comments->find_all()->count(); ?> 
```

这应该可以工作，因为您将条目标记为 has_many 评论。

# android - 显示特定布局的名称按钮

> ID：14871964
> 
> 赞同：0
> 
> 时间：2013-02-14T09:50:08.830
> 
> 标签：android, string, adapter

我正在尝试显示 tab_s 但我唯一得到的只是 LogCat 显示的变量“s”但是当我尝试将此变量放入 String [] 时它只会显示黑屏我如何将这个变量放入一个字符串数组

```
private void allbuttons()
{       Class cls = R.drawable.class;
        fieldlist = cls.getDeclaredFields();
        setContentView(layoutIds[position]);
        String[] tab_s = null;
        ListView listView = (ListView) findViewById(R.id.listViewallbuttons);

        allButtonsInLayout = getViewsFromViewGroup(findViewById(android.R.id.content), Button.class);

        Toast.makeText(this, "" + allButtonsInLayout.size(), Toast.LENGTH_SHORT).show();

        for(  int i=0;i<allButtonsInLayout.size();i++){

            cls = R.drawable.class;
            fieldlist = cls.getDeclaredFields();

            String fieldName = null ;

            for (java.lang.reflect.Field fld1 : fieldlist) {

                try {
                    setContentView(R.layout.listallbuttons);
                    ListView listView1 = (ListView) findViewById(R.id.listViewallbuttons);

                    drawableId = fld1 .getInt(null);
                    String s=getResources().getResourceEntryName(drawableId);
                    Log.v("tagllll", "msg" + s);

                    tab_s[i]=s;

                    Log.v("tagtab_s", "msg" + tab_s[i]);

                    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                            android.R.layout.simple_list_item_1, android.R.id.text1,tab_s);
                    listView1.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:42:11.417

我找到了一个解决方案，问题是 tab_s 的大小，所以我的想法是在 tab_s 的大小很小时创建另一个数组，然后将 tab_s 复制到另一个数组 temp 中，最终 tab_s 将包含我想要的任何内容！

```
Class cls = R.drawable.class;
fieldlist = cls.getDeclaredFields();
setContentView(layoutIds[position]);
java.lang.reflect.Field fld1;
ListView listView = (ListView) findViewById(R.id.listViewallbuttons);

allButtonsInLayout = getViewsFromViewGroup(findViewById(android.R.id.content), Button.class);
//allButtonsInLayout = getViewsFromViewGroup(findViewById(android.R.id.content), Button.class);
//String tabname=allButtonsInLayout.get(position).getResources().getResourceEntryName(position);
Toast.makeText(this, "" + allButtonsInLayout.size(), Toast.LENGTH_SHORT).show();
int size=allButtonsInLayout.size();

String[] tab_s = new String [size];
int k = 0;
String s;

    // Bitmap bm = null;
    // SQLiteAdapter mySQLiteAdapter =new SQLiteAdapter(getApplicationContext());
    //mySQLiteAdapter.openToRead();
    // bm=mySQLiteAdapter.queueAllphoto();
    //mySQLiteAdapter.close();
    //allButtonsInLayout.get(i).setBackgroundDrawable(d);

    cls = R.drawable.class;
    fieldlist = cls.getDeclaredFields();

    String fieldName = null ;

    for (java.lang.reflect.Field fld : fieldlist) {

        for(  int i=0;i<allButtonsInLayout.size();i++){

        try {

            setContentView(R.layout.listallbuttons);
            ListView listView1 = (ListView) findViewById(R.id.listViewallbuttons);

            drawableId = fld .getInt(null);

             s=getResources().getResourceEntryName(drawableId);

            Log.v("tagllll", "msg" + s);

            if((k<=i)) {

             tab_s[k++]=s;
            }
            else{
                size++;

                String[]temp=new String[size];

                for (int f=0;f<tab_s.length;f++){
                    temp[f]=tab_s[f];

                }
                tab_s=temp;
                /*for (int f=0;f<tab_s.length;f++){
                    if (tab_s[f]==tab_s[f--]){
                        tab_s[f]=null;
                    }
                }*/
                if(tab_s[k]!=s)
                tab_s[k++]=s;

            }

            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                        android.R.layout.simple_list_item_1, android.R.id.text1,tab_s);

                listView1.setAdapter(adapter);

            //MyAdapter mine=new MyAdapter(getBaseContext(),s);

            /*Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("application_name");
            builder .setMessage("Vous avez cliqué sur : " + s);
            builder.show();*/

            //Log.v("tagtab_s", "msg" + tab_s[i]);

            //layoutButtons[k]=fieldName;

            drawableId--;
            allButtonsInLayout.get(i).setBackgroundResource(drawableId);
            //int k=getResources().getInteger(drawableId);

        }
        catch(Exception e){

            e.getMessage();
            Toast.makeText(DvpList2.this,
                    "plus d'images", Toast.LENGTH_SHORT).show();
        }
        allButtonsInLayout.get(i).setOnClickListener(new OnClickListener(){

                @Override
                public void onClick(View v) {
                    try{
                        drawableId--;
                        //allButtonsInLayout.get(i).setBackgroundResource(drawableId);
                    }
                    catch(Exception e){

                        e.getMessage();
                        Toast.makeText(DvpList2.this,
                                "plus d'images", Toast.LENGTH_SHORT).show();
                    }
                }

            });

        // do whatever with the drawable

    }

}

    //Bitmap bmp = BitmapFactory.decodeByteArray(content,0,content.length);

    //image =  new BitmapDrawable(BitmapFactory.decodeByteArray(content, 0, content.length));

    Toast.makeText(DvpList2.this,
            "ImageButton is clicked!", Toast.LENGTH_SHORT).show(); 
```

# ruby-on-rails - Rails 应用程序模板：如何覆盖环境文件中已经存在的行？

> ID：14871965
> 
> 赞同：1
> 
> 时间：2013-02-14T09:50:12.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3

[Rails 应用程序模板](http://edgeguides.rubyonrails.org/rails_application_templates.html)非常适合快速设置基础项目。

但是当我使用“环境”指令来添加一些默认配置时，它不会覆盖已经存在的设置。

例如，如果我在我的应用程序模板中设置这一行：

```
environment 'config.action_mailer.raise_delivery_errors = true', env: 'development' 
```

`config/environments/development.rb`它添加在我的文件顶部。但这不会覆盖下面的现有行

```
config.action_mailer.raise_delivery_errors = false 
```

有没有办法覆盖现有的行？（或至少一个删除与特定模式匹配的行的指令）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:05:08.270

由于 Rails 应用程序模板生成器基于[Thor](https://github.com/wycats/thor)，因此可以使用 gsub_file 删除文件的一部分。所以在这种情况下：

```
gsub_file('config/environments/development.rb', /config\.action_mailer\.raise_delivery_errors.*/, '') 
```

# iphone - 在应用内显示与 Facebook 帖子相关的评论

> ID：14871966
> 
> 赞同：1
> 
> 时间：2013-02-14T09:50:13.450
> 
> 标签：iphone, ios, objective-c, facebook

目前我有一个应用程序，我可以在其中加载一些从`webservice`. 目前这与`facebook`. 但现在我想`comments`在我的应用程序中获取与该 newsItem 相关的这些内容。

我现在的问题是，我有一种方法可以使用`Facebook IOS API`. 或者我应该让我的网络服务处理它？

# iphone - 图像序列 -> 性能下降？

> ID：14871967
> 
> 赞同：1
> 
> 时间：2013-02-14T09:50:14.007
> 
> 标签：iphone, ios, objective-c

我的问题基本上是使用`UIImageViews`和他们的`animationImages`.
因为我需要暂停，所以我现在使用了很多相同的动画“空帧”，只是为了实现一个简单的暂停。
我的问题基本上是，如果我使用很多相同的图像，它实际上是否使用了更多的 GPU/CPU 内存，或者它是否只影响存储的图像数组的长度可以忽略不计？

图像序列是实时生成的还是预渲染的（我猜这是这个问题的本质）

# ruby-on-rails-3 - 当没有数据返回时，有没有办法忽略子查询？

> ID：14871973
> 
> 赞同：0
> 
> 时间：2013-02-14T09:50:36.523
> 
> 标签：ruby-on-rails-3, rails-activerecord

我有以下查询：

```
Comic.join(:publishercomics).where("publisher_id = 1 AND (rating < 5 OR rating IS NULL) AND comics.id NOT IN (:favorites)", {:favorites => User.find_by_id(current_user_id).favorites.where("top_10 = true").map(&comic_id)}) 
```

current_user_id 在没有登录用户时设置为 0，否则设置为当前登录用户的 ID。我尝试这样做是因为我希望不必编写两个查询，一个用于用户登录时，一个用于未登录。一般来说，能够编写一个跳过没有找到记录的事实并停止尝试加入不存在的数据的查询似乎很有用。如果我直接编写这个 SQL，这将非常简单：

```
SELECT c.*
FROM comics c
INNER JOIN publishercomics pc ON pc.publisher_id = 1 AND pc.comic_id = c.id
WHERE comics.id NOT IN (SELECT comics_id FROM favorites WHERE user_id = current_user_id AND top_10 = true)
AND (c.rating < 5 OR c.rating IS NULL) 
```

这个问题可能会扩展到一般情况——有没有办法让 rails 查询的行为更像 SQL，这样当查询的一部分没有返回数据时，整个查询就不会失败？所以“User.find_by_id(0).favorites”不会返回任何记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:14:01.193

尝试：

```
Comic.join(:publishercomics).where("publisher_id = 1 AND (rating < 5 OR rating IS NULL) AND comics.id NOT IN (:favorites)", {:favorites => User.find_by_id(current_user_id).nil? ? [0] : User.find_by_id(current_user_id).favorites.where("top_10 = true").map(&comic_id)}) 
```

或者

```
user = User.find_by_id(current_user_id)
Comic.join(:publishercomics).where("publisher_id = 1 AND (rating < 5 OR rating IS NULL) AND comics.id NOT IN (:favorites)", {:favorites => user.nil? ? [0] : user.favorites.where("top_10 = true").map(&comic_id)}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:16:19.357

我发现此查询可能会失败的另一种方式。如果用户存在，但没有与该用户关联的收藏夹。

起初我尝试添加：

```
User.find_by_id(like_user_id).favorites.nil? ? [0] 
```

像这样：

```
Comic.join(:publishercomics).where("publisher_id = 1 AND (rating < 5 OR rating IS NULL) AND comics.id NOT IN (:favorites)", {:favorites => User.find_by_id(current_user_id).nil? ? [0] : User.find_by_id(like_user_id).favorites.nil? ? [0] : User.find_by_id(current_user_id).favorites.where("top_10 = true").map(&comic_id)}) 
```

但这不起作用，因为“收藏夹”在某种程度上不是零。我不太明白这是如何工作的。所以我改为使用：

```
User.find_by_id(like_user_id).favorites.count == 0 ? [0] 
```

这似乎有效。

# spring - Grails上传文件异常，由springsecurity引起

> ID：14871978
> 
> 赞同：3
> 
> 时间：2013-02-14T09:50:52.750
> 
> 标签：spring, grails, spring-security

我使用 grails 1.3.7 并且我有一个奇怪的错误。这是我上传文件的代码：

```
def editAvatar = {
            def uploadedAvatar = request.getFile("uploadedAvatar");
    if(!uploadedAvatar?.isEmpty()) {
        clientService.saveUploadedAvatar(uploadedAvatar, basePath);
        render 'avaterUdated';
    } else {
        render(contentType:"text/json", encoding:"UTF-8") {
            [valid:false, error: "some error"]
        }
    } 
```

在开发环境中一切正常，但在生产模式下我有例外：

```
org.codehaus.groovy.runtime.typehandling.GroovyCastException: 
 Cannot cast object 'org.springframework.security.web.firewall.RequestWrapper@1ce4ded'with class 'org.springframework.security.web.firewall.RequestWrapper' to class 'org.springframework.web.multipart.MultipartHttpServletRequest'
at ru.pscb.web.grb.ui.UserProfileController$_closure6.doCall(UserProfileController.groovy:80) 
```

我也尝试了这段代码：

```
MultipartHttpServletRequest mpr = (MultipartHttpServletRequest)request;
    def uploadedAvatar = request.getFile("uploadedAvatar"); 
```

但这也行不通。

我使用 sprigsecurity-core1.2 和 grails 1.3.7/ 我无法升级它。

感谢您的任何回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-13T14:05:10.543

谢谢你 - 4 年后，你刚刚救了我。在您的代码中，问题似乎是您将请求转换为 a`MultipartHttpServletRequest`但您没有将 uploadAvatar 设置为此请求的转换版本（mpr）。尝试将最后一行代码更改为：

```
def uploadedAvatar = mpr.getFile("uploadedAvatar"); 
```

谢谢您的帮助！

# android - Android，不推荐使用独立版的traceview

> ID：14871980
> 
> 赞同：6
> 
> 时间：2013-02-14T09:50:54.243
> 
> 标签：android, ddms, android-traceview

我想看看我的踪迹。

1- 在代码中，我添加了这些代码行：

```
// Start trace recording
android.os.Debug.startMethodTracing("hc_traceview"); 
```

和

```
// Stop trace recording
android.os.Debug.stopMethodTracing(); 
```

2- 我可以在 DDMS 的文件资源管理器中看到“ `hc_traceview.terac`”。

3-基于[Viewing Trace Files in Traceview](http://developer.android.com/tools/debugging/debugging-tracing.html#runningtraceview)，我在终端中运行了以下命令：

```
@hesam-K5VD:~/Desktop/Eclipse/sdk/tools$ traceview /mnt/sdcard/hc_traceview 
```

但输出是：

```
The standalone version of traceview is deprecated.
Please use Android Device Monitor (tools/monitor) instead.
trace file '/mnt/sdcard/hc_traceview' not found 
```

4-根据建议，我在终端中运行了以下命令：

```
@hesam-K5VD:~/Desktop/Eclipse/sdk/tools$ monitor /mnt/sdcard/hc_traceview 
```

DDMS 已打开，但我的踪迹不在这里 :( 我怎样才能看到我的踪迹？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T09:58:31.860

请看这里：[DDMS](http://developer.android.com/tools/debugging/ddms.html)

该页面说您可以像这样在 DDMS 视图中启动和停止方法分析：

*   在调试模式下从 Eclipse 启动您的应用程序。
*   转到 DDMS 视图
*   在设备窗口中有一个名为**Start Method Profiling的小按钮**
*   需要时单击它（您可以将其与断点结合以获得准确的开始/结束）
*   完成后单击**停止方法分析**
*   DDMS 中的新窗口将出现与具有相同输出的 traceview 类似。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-01T16:00:18.220

您应该将跟踪从 sdcard 中拉出，如下所示：

cd`your sdk/platform-tools`
`$ adb pull /sdcard/hc_traceview.trace`
打开监视器（双击`monitor.bat`）`sdk/tools`。单击“打开文件...”并`hc_traceview.trace`从`sdk/platform-tools`文件夹中选择。您现在应该清楚地看到您的跟踪。如果出现任何问题，请在此处发表评论。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-10T16:26:07.247

DDMS打开后，点击File菜单，选择“Open File...”，然后选择上一步生成的trace文件，就会显示所有trace信息。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-14T10:26:02.703

从 sdcard 中拉出跟踪文件

$ *adb*拉 /sdcard/

然后打电话，

$*跟踪视图*/

**注意：调用traceview**命令时请在traceview文件名末尾注明.trace

[在这里](http://developer.android.com/tools/debugging/debugging-tracing.html)查看更多信息

# .net - 为什么这个语义等效（据我所知）vbscript代码失败

> ID：14871983
> 
> 赞同：3
> 
> 时间：2013-02-14T09:51:04.780
> 
> 标签：.net, vbscript, com-interop

我想为 VBScript 创建一个与 .Net 中的 String.Format 相同的 FormatString 函数。

我发现我可以在 VBScript 中使用 System.Text.StringBuilder 对象并测试了以下有效的代码

```
Option Explicit

Dim sbText 'As System.Text.StringBuilder
Set sbText = CreateObject("System.Text.StringBuilder")

Call sbText.AppendFormat_5( _
                Nothing, _
                "My name is {0} and the current date time is '{1:dd MMMM yyyy HH:mm:ss}'", _
                Array("Robert", Now))

Call MsgBox(sbText.ToString())
```

然后我把它放在一个函数中，它失败了，见下文

```
Option Explicit

Function FormatString(ByVal sText, ByVal Arguments) 'As String

    Dim sbText 'As System.Text.StringBuilder

    'Test the input variables
    If Not TypeName(sText) = "String" Then _
        Err.Raise 5 'vbErrInvalidProcCallOrArg

    If Not IsArray(Arguments) Then _
        Err.Raise 5 'vbErrInvalidProcCallOrArg

    Set sbText = CreateObject("System.Text.StringBuilder")
    Call sbText.AppendFormat_5(Nothing, sText, Arguments)

    FormatString = sbText.ToString()

End Function

Call MsgBox(FormatString( _
            "My name is {0} and the current date time is '{1:dd MMMM yyyy HH:mm:ss}'", _
            Array("Robert", Now)))
```

它失败`Call sbText.AppendFormat_5(Nothing, sText, Arguments)`并出现错误“无效的过程调用或参数：'sbText.AppendFormat_5'”。

所以我不明白为什么在函数之外我可以按顺序传递以下类型：

Nothing
String
Arrary

它们可以工作，但在函数内部却不行。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:26:44.310

您需要按值传递数组参数：

```
Call sbText.AppendFormat_5(Nothing, sText, Arguments)
==>
Call sbText.AppendFormat_5(Nothing, sText, (Arguments)) 
```

# cursor - 如何将光标移回一个卡在 SOL 上的字符而不是跳转到上一个 EOL？

> ID：14871985
> 
> 赞同：2
> 
> 时间：2013-02-14T09:51:12.103
> 
> 标签：cursor, back, eol

我 gvim，当我使用光标移动键返回一个字符时，它不会回绕到上一行，而是卡在当前行的开头。是否有任何标志来控制这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:19:46.737

就在这里。详情见`:help 'whichwrap'`：

```
'whichwrap' 'ww'    string  (Vim default: "b,s", Vi default: "")
            global
            {not in Vi}
    Allow specified keys that move the cursor left/right to move to the
    previous/next line when the cursor is on the first/last character in
    the line.  Concatenate characters to allow this for these keys:
        char   key    mode  ~
         b    <BS>   Normal and Visual
         s    <Space>    Normal and Visual
         h    "h"    Normal and Visual (not recommended)
         l    "l"    Normal and Visual (not recommended)
         <    <Left>     Normal and Visual
         >    <Right>    Normal and Visual
         ~    "~"    Normal
         [    <Left>     Insert and Replace
         ]    <Right>    Insert and Replace
    For example: >
        :set ww=<,>,[,] 
```

# java - Eclipse RCP：检查本机库

> ID：14871987
> 
> 赞同：2
> 
> 时间：2013-02-14T09:51:15.440
> 
> 标签：java, eclipse, rcp

在 Eclispe RCP 应用程序中，有没有办法检查当前系统上是否有特定的本地库可用？

使用 System.loadLibrary("myLib"); 然后捕获 UnsatisfiedLinkError 会导致其他包无法使用该库，因为这会导致错误“库已由另一个类加载器加载”。

我在互联网上找到了解决这个问题的方法，它使用自定义类加载器，然后加载库，然后使用 System.gc() 对类加载器进行垃圾收集，这也将卸载库以便可以加载它再次被另一个捆绑。

不过也有缺点：

1.  它需要大量的自定义代码
2.  捕捉 UnsatfisfiedLinkError 有点吓人
3.  假设 Bundle1 加载库以检查可用性。然后 Bundle1 卸载该库，而 Bundle2 加载该库以实际使用它。Bundle2 不会卸载库（因为没有理由这样做）。然后，Bundle1 再次要加载库以检查可用性。这又会导致 UnsatisfiedLinkError。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T11:37:21.857

ad 3.) 首先，我会避免让捆绑包随机加载系统库。也许您可以将系统库的处理及其所有访问打包到一个服务包中？

我同意，捕捉*ERROR*不仅可怕，而且可能根本不是我们应该做的事情。错误是一个虚拟机错误，这通常会导致您的虚拟机或您的应用程序重新启动，以确保稳定运行。

对我来说，检查库是否可用类似于检查文件资源是否存在。如果库在您的应用程序上下文中非常动态，您可以让用户浏览库并让应用程序知道它在哪里。如果没有用户这样的东西，你不能简单地在客户端机器的路径中搜索文件吗？

# c# - 文本框如何用作 IP 地址框

> ID：14871989
> 
> 赞同：1
> 
> 时间：2013-02-14T09:51:20.877
> 
> 标签：c#, asp.net, textbox, ip

我的问题是，我们能否创建一个像 IP 地址框这样的文本框，这意味着我们只能在文本框中插入数值，`"122.235.25.36"`并且所有点 (.) 都已经保留在那里。

我正在制作一个应用程序。我想在其中分配任何特定格式的 IP，正如我们在网络中看到的那样，用于配置网络 IP。如果在带有 jquery/javascript 的 c# asp.net 中这是可能的，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:53:06.787

[jQuery Masked Input Plugin](http://digitalbush.com/projects/masked-input-plugin/)允许您指定这样的格式。

```
$("#ip").mask("999.999.999.999"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T09:59:09.700

您可以使用正则表达式并使用以下 JavaScript 函数匹配以下表达式：

```
function checkValidIPAddress() {
 var regex = "\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b"

 var str = $("#inputBox").val();
 var pattern = new RegExp(regex);
 return pattern.test(str);
} 
```

`#inputBox`您要验证的控件的 ID 在哪里。

**此代码工作的演示：**

[http://jsfiddle.net/MHKkX/](http://jsfiddle.net/MHKkX/)

**从评论：**

函数 checkValidIPAddress() { var regex = "^(?:[0-9]{1,3}.){3}[0-9]{1,3}$";

```
 var str = $("#inputBox").val();
 var pattern = new RegExp(regex);
 return pattern.test(str); 
```

}

```
$("#inputBox").keyup(function() {
  if (checkValidIPAddress()) {
     $("#error").hide();  
  } else {
    $("#error").show();   
 }
}); 
```

[http://jsfiddle.net/MHKkX/7/](http://jsfiddle.net/MHKkX/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:53:34.650

你可以使用这个 Jquery 插件：

[http://mlntn.com/2009/12/30/jquery-ip-address-plugin/](http://mlntn.com/2009/12/30/jquery-ip-address-plugin/)

演示是：

[http://mlntn.com/demos/jquery-ipaddress/](http://mlntn.com/demos/jquery-ipaddress/)

# linux - 创建一个包含 2 列的文件，每列来自不同的文件

> ID：14871991
> 
> 赞同：0
> 
> 时间：2013-02-14T09:51:22.953
> 
> 标签：linux, perl, awk

如何使用 perl 或 awk 获得以下输出，或者在 linux 命令中是否有可能？

文件1：

```
1
2
2
4 
```

文件2：

```
5
6
7
8 
```

期望的输出：

```
1   5
2   6
2   7
4   8 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T09:55:09.413

用命令`paste`

```
paste  file1  file2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T10:22:21.843

更准确地说：

`paste`命令只是打印出来。要将其保存到新文件，命令应为：

```
paste file1 file2 > outputFile 
```

`outputFile`现在包含两列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T10:01:28.310

当文件中的行不是固定宽度时，一个更灵活的解决方案是`pr`：

```
$ pr -mtw 10 file1 file2
1    5
2    6
3    7
4    8 
```

更改`file1`为包含可变宽度线：

```
$ cat file1
The number 1
two
3
The last number is the number four

# With pr two columns are output    
$ pr -mt  file1 file2
The number 1                        5
two                                 6
3                                   7
The last number is the number four  8

# Paste simply inserts a tab which doesn't format the output in two columns
$ paste file1 file2
The number 1    5
two     6
3       7
The last number is the number four      8 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T10:25:44.383

您也可以使用 GNU 并行执行此操作：

```
parallel --xapply echo '{1}' '{2}' :::: file1 :::: file2 
```

# node.js - 使用 node.js 加密/解密密码

> ID：14871992
> 
> 赞同：4
> 
> 时间：2013-02-14T09:51:30.707
> 
> 标签：node.js, bcrypt

我正在使用`bcrypt`nodejs 模块。

我对加密和比较密码感到满意，但似乎无法解密。

我想知道：

1.  您如何使用 nodejs 加密/解密密码（您使用的是哪个模块或方法）？
2.  是否有解密`bcrypt`模块编码的密码的技巧？

谢谢 ！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-14T09:54:50.290

You don't decrypt passwords with bcrypt -- it's a one-way algorithm. What you do is store the hash of the original (salted) password. Then you hash the (salted) guess. If the hashes match, then the guess is correct.

Fortunately, the `node-bcrypt` library does all of this for you, so you only need to provide the plaintext guess and the hash (from the database).

For example, you might do this:

```
// "password"; usually stored in the database in the user's row.
var stored_hash = '$2a$10$vxliJ./aXotlnxS9HaJoXeeASt48.ddU7sHNOpXC/cLhgzJGdASCe'
bcrypt.compare(guess, stored_hash, function(err, res) {

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:34:47.123

更好的方法是使用此节点模块[https://github.com/davidwood/node-password-hash](https://github.com/davidwood/node-password-hash)，它可以加密您的密码并允许使用实际密码验证加密版本。

# jquery - 更新到版本 0.5.5 后流星停止工作

> ID：14871995
> 
> 赞同：0
> 
> 时间：2013-02-14T09:51:58.770
> 
> 标签：jquery, twitter-bootstrap, meteor

我今天已将*流星*升级到*0.5.5*版。重新启动服务器后，我的网站停止工作，因为没有出现引导模式。流星更改日志显示了对*bootstrap 2.3.0*和*jquery 1.9*的更新。

此版本是否存在任何已知问题？尤其是模态？

顺便说一句：浏览器在加载时在 jquery.js 中显示以下错误：

```
Unhandled Error: Maximum recursion depth exceeded 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-20T14:13:06.350

将评论复制到问题中，以便可以接受：

> 非常感谢！你为我指明了正确的方向。我的空闲检测是问题所在。我从这里使用 jquery 插件。在以前的 bootstrap 和 jquery 版本中，每次出现模式时，计时器都会停止工作。所以我在模式的“显示”事件中禁用了他，并在“隐藏”事件中再次启用了他。我还没有用当前版本测试它。但这就是问题所在。再次谢谢你！:)

# c# - Binding data to jquery dialog

> ID：14871996
> 
> 赞同：2
> 
> 时间：2013-02-14T09:52:03.157
> 
> 标签：c#, jquery, asp.net, jquery-dialog

I have an `asp:datalist` bound to a database. When the user clicks a button on one of the rows, a dialog needs to be shown where the user is prompted to enter additional information.

This dialog needs some information from the item clicked. For this, I'm trying to look at `Jquery Dialog` and `Jquery.data()`. I don't know, if this is possible at all. The dialog shows up fine, but the data is not passed.

```
$(function () {
    $("#dialog-confirm").dialog({
        autoOpen: false,
        resizable: false,
        height: 'auto',
        width: 'auto',
        modal: true,
        buttons: {
            "OK": function () {
                $(this).dialog("close");
                var minattend = $(this).data('minattend')
                var maxattend = $(this).data('maxattend')

                DoAdditionalSearch(minattend , maxattend);
            },
            Cancel: function () {
                $(this).dialog("close");
            }
        }
    });
}); 
```

And the ItemDataBound in code-behind:

```
LinkButton lnkBook = DirectCast(e.Item.FindControl("lnkBook"), LinkButton);
lnkBook.OnClientClick += "$('#dialog-confirm').data('minattend', " + countmin + ");";
lnkBook.OnClientClick += "$('#dialog-confirm').data('maxattend', " + countmax + ");";
lnkBook.OnClientClick += "$('#dialog-confirm').dialog('open'); return false;"; 
```

When I run the code, the `minattend` and `maxattend` is undefined

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:42:31.587

Woops. Was passing strings, and missed a couple of "'":

> lnkBook.OnClientClick += "$('#dialog-confirm').data('minattend', **'**" + countmin + "**'**);"; lnkBook.OnClientClick += "$('#dialog-confirm').data('maxattend', **'**" + countmax + "**'**);";

And now it works like a charm. Glad I learned this :)

# c# - The process cannot be accessed because it's being used by another process

> ID：14871997
> 
> 赞同：5
> 
> 时间：2013-02-14T09:52:04.123
> 
> 标签：c#

Allow me to paint the picture if you will. All the posts I have read regarding this issue the only thing i haven't found is the solution/cause to the problem. Why hasn't MS fixed this?

I work on a solution at home and at work and we have Team Foundation Server(TFS) setup. When at home I have to VPN in. I have VS 2010 SP1, Win XP SP3 at work and Win 7 64 bit at home w/ SQL Server 2008 R2 Developer.

For years now I have worked with no issues while debugging what so ever from either location.

Just recently we published the application to the server from the work location (Win XP SP3 Pro) and only since then I get this 'The process cannot access the file because it is being used by another process" error.

I do not have any problems working from home. (WIn 7 64 bit machine) and I have not published from home at all either for what it's worth.

When at work I have to restart VS or keep task manager open and endprocess for the process of the app named **appname_vshost.exe** (or simular) 2-3 times before debug will run again smoothly. If I don't VS IDE is very painfully slow to respond.

I have totally deleted the Project files locally and retrieved them fresh from the TFS. Everything runs fine until I edit something in the solution (project) and it starts all over again.

Anyone know of any solutions that I may not have found as yet? I think having to creat a "work around" is a bandaid and not a solition any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:05:39.433

假设你的意思是当你编译....

我在这上面浪费了几天又一天……直到我遇到这个：

[http://connect.microsoft.com/VisualStudio/feedback/details/700166/compiler-locks-generated-exe-file-when-application-experience-service-is-turned-off](http://connect.microsoft.com/VisualStudio/feedback/details/700166/compiler-locks-generated-exe-file-when-application-experience-service-is-turned-off)

这主要是由于应用程序体验服务被关闭。

进入您的服务列表（控制面板 > 管理工具 > 服务），确保将其设置为自动。

从那以后就没有问题了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:59:59.097

尝试使用[解锁](http://en.wikipedia.org/wiki/Unlocker)器来确定哪个文件被哪个进程锁定，您可以在文件夹级别运行它，这样您就可以在整个项目文件夹发生错误时尝试它。

# php - Regular Exp - match and replace all tags that don't equal x with html safe

> ID：14871998
> 
> 赞同：-2
> 
> 时间：2013-02-14T09:52:08.933
> 
> 标签：php, regex

I'm writing a chat program and what I want to do is replace all the html tags with > < tags but allow specific tags to still work (img, a etc.)

This is what I have so far but it does not appear to be working:

```
$value = '
<img src="/blah/blah.gif" />
<img src="/blah/blah.gif">
<b>blah</b>
<strong>test</strong>
<script>test</script>
<script>test
<script
type="text">

<script></script>
<script
>

</script>

<script>blah

<br />

';
$tags = 'b|img'; // allow these tags

echo preg_replace("~<((/(?!$tags)|(?!/)(?!$tags)).*?)>~is", '&lt;$1&gt;', $value); 
```

The result of the output is this:

```
<img src="/blah/blah.gif" />
<img src="/blah/blah.gif">
<b>blah</b>
&lt;strong&gt;test&lt;/strong&gt;
&lt;script&gt;test&lt;/script&gt;
&lt;script&gt;test
&lt;script
type="text"&gt;

&lt;script&gt;&lt;/script&gt;
&lt;script
&gt;

&lt;/script&gt;

&lt;script&gt;blah

<br /> 
```

As you can see it doesn't appear to be stripping the
tag out as well even though this is not in the `$tags` variable as an allowed tag.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:56:15.960

```
$value = '
<img src="/blah/blah.gif" />
<img src="/blah/blah.gif">
<b>blah</b>
<strong>test</strong>
<script>test</script>
<script>test
<script
type="text">

<script></script>
<script
>

</script>

<script>blah

<br />

';

echo strip_tags($value,'<b><img>'); 
```

回声：

```
<img src="/blah/blah.gif" />
<img src="/blah/blah.gif">
<b>blah</b>
test
test
test

blah 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:57:04.280

我实际上建议无条件地将所有 HTML 标记替换为`&lt;`/ `&gt;`，然后引入 BBCode 支持：它会让您免于令人难以置信的头痛。

至于最初的问题，我所知道的可靠地做到这一点的唯一方法是解析输入 HTML，丢弃所有冗余空格，然后进行模式匹配。