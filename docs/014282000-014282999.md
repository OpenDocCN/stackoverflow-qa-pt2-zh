# StackOverflow 问答 14282000-14282999

# macos - OSX 中的 Sublime Text 2：无论主题或字体如何，所有字体都是粗体

> ID：14282000
> 
> 赞同：1
> 
> 时间：2013-01-11T16:06:21.940
> 
> 标签：macos, sublimetext2

我在 mac (OSX 10.7) 上有一个奇怪的问题：我选择的任何主题或字体 - 所有字体都以粗体显示。我将所有设置与 Dropbox 同步，在 Windows 7 和 Ubuntu 上，字体正常。

不知道这是 OSX 问题还是 sublime，但有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T09:53:30.300

我想我知道你在说什么。尝试在您的设置中添加这一行：

```
"font_options": [ "gray_antialias" ] 
```

您的代码看起来会更清晰（这取决于您使用的字体）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-24T16:41:45.103

我发现我必须添加两个选项才能使字体看起来正确

```
"font_options":
[
    "no_bold",
    "gray_antialias"
] 
```

# java - 播放 - oracle 10g : PersistenceException: ERROR execution DML bindLog[] error[ORA-00001: Unique key constraint violation (PLAY.PK_COMPANY)\n

> ID：14282010
> 
> 赞同：0
> 
> 时间：2013-01-11T16:06:42.017
> 
> 标签：java, playframework, oracle10g, playframework-2.0, ebean

我正在尝试将 oracle 10g 和 ebeans 用于 plesk 的“计算机数据库”示例应用程序。但是当我尝试在数据库中插入一台新计算机时，我得到了这个错误：

```
[PersistenceException: ERROR executing DML bindLog[] error[ORA-00001: Unique key constraint violation (PLAY.PK_COMPANY)\n ]] 
```

在以下行：

```
{ 
 Form<Computer> computerForm = form(Computer.class).bindFromRequest();
        if(computerForm.hasErrors()) {
            return badRequest(createForm.render(computerForm));
        }
       computerForm.get().save(); //HERE
        flash("success", "Computer " + computerForm.get().name + " has been created");
       return GO_HOME;
} 
```

这里有我的对象声明：

```
@Entity 
@Table(name="COMPUTER")
@SequenceGenerator(name = "computer_seq", sequenceName = "computer_seq")
public class Computer extends Model {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    public Long id;

    @Constraints.Required
    @Column(name="name")
    public String name;

    @Column(name="introduced")
    public String introduced;

    @Column(name="discontinued")
    public String discontinued;

    @ManyToOne(cascade = CascadeType.MERGE)
    public Company company;

    /**
     * Generic query helper for entity Computer with id Long
     */
    public static Finder<Long,Computer> find = new Finder<Long,Computer>(Long.class, Computer.class); 

    /**
     * Return a page of computer
     *
     * @param page Page to display
     * @param pageSize Number of computers per page
     * @param sortBy Computer property used for sorting
     * @param order Sort order (either or asc or desc)
     * @param filter Filter applied on the name column
     */
    public static Page<Computer> page(int page, int pageSize, String sortBy, String order, String filter) {
        return 
            find.where()
                .ilike("name", "%" + filter + "%")
                .orderBy(sortBy + " " + order)
                .fetch("company")
                .findPagingList(pageSize)
                .getPage(page);
    }

} 
```

**编辑1：** 我尝试了不同的`GeneratedValue strategy`喜欢`AUTO`，`IDENTITY`但没有任何效果....

**编辑 2：** 我尝试使用`Sequence`策略，但它也不起作用：

```
@SequenceGenerator(name = "computer_seq", sequenceName = "computer_seq", initialValue=1, allocationSize=100)
[...]
    @Id
    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="computer_seq")
    public Long id; 
```

**编辑 3：** 这里有公司实体：

```
@Entity 
@Table(name="COMPANY")
@SequenceGenerator(name = "company_seq", sequenceName = "company_seq", initialValue=1, allocationSize=100)
public class Company extends Model {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    public Long id;

    @Constraints.Required
    @Column(name="name")
    public String name;

    /**
     * Generic query helper for entity Company with id Long
     */
    public static Model.Finder<Long,Company> find = new Model.Finder<Long,Company>(Long.class, Company.class);

    public static Map<String,String> options() {
        LinkedHashMap<String,String> options = new LinkedHashMap<String,String>();
        for(Company c: Company.find.orderBy("name").findList()) {
            options.put(c.id.toString(), c.name);
        }
        return options;
    }

} 
```

我尝试了一个`SEQUENCE strategy`并且`AUTO strategy`它也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:17:28.520

当您在同一张表上保存重复的 id 时出现此错误

保存前检查 id 值。@[参见 http://www.techonthenet.com/oracle/errors/ora00001.php](http://www.techonthenet.com/oracle/errors/ora00001.php)

我的英语很抱歉。:D

编辑 ：

> 违反唯一键约束 (PLAY.PK_COMPANY) 也尝试检查 COMPANY 实体的自动生成序列。

编辑 ：

> 将 Company Generate 更改为 @GeneratedValue(strategy=GenerationType.AUTO,generator="company_seq") 或更改为 @GeneratedValue(strategy=GenerationType.SEQUENCE,generator="company_seq")

# php - PHP 在全局命名空间中使用类

> ID：14282011
> 
> 赞同：2
> 
> 时间：2013-01-11T16:06:43.233
> 
> 标签：php, pdo, namespaces, autoload

我有一个使用 PDO 的 DB 包装类，并在构造函数中创建了一个 PDO 对象。包装类在我们的命名空间中，我们正在使用自动加载器。问题是在我们的命名空间中找不到 PDO 类，所以我尝试使用[这里](https://stackoverflow.com/questions/6901358/problems-with-php-namespaces-and-built-in-classes-how-to-fix)描述的全局命名空间。

```
//Class file
namespace Company\Common;
class DB {
    private function __construct(){
        $this->Handle=new PDO(...);
    }
} 
```

有了这个，我得到了这个（如预期的那样）：

```
Warning: require(...\vendors\Company\Common\PDO.class.php): failed to open stream 
```

如果我这样做：

```
namespace Company\Common;
use PDO; 
```

我明白了：

```
Fatal error: Class 'DB' not found in ...\includes\utils.php 
```

并且 utils.php 在错误行中包含了这个，在实现命名空间之前它工作得很好：

```
DB::getInstance(); 
```

或者我试过这个：

```
namespace Company\Common;
class DB {
    private function __construct(){
        $this->Handle=new \PDO(...);
    }
} 
```

它试图像最初那样在我们的命名空间中加载 PDO 类。

我该如何解决这个问题？我想通过这样做`use PDO`或者`new \PDO`它会加载全局 PDO 类，但它似乎不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T16:43:45.340

在命名空间 PHP 中，对类的引用必须包含该类的命名空间，除非您有`use`包含该类或其部分命名空间的语句。

因此，如果您没有`use`声明，则必须使用前导反斜杠引用 PDO 和其他全局类 - 即`$obj = new \PDO();`

如果您有一个`use`引用该类的语句，那么您可以仅通过类名来引用它：

```
use PDO;
....
$obj = new PDO(); 
```

如果您要引用许多全局类，`use`如果您想避免每次都使用反斜杠，则需要单独引用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:16:26.437

通常在我们的项目中，我们会设置这样的包含路径：

```
set_include_path('PATH_TO_GLOBAL_LIBS; PATH_TO_LIBRARY_1; PATH_TO_LIBRARY_X; PATH_TO_DOCUMENT_ROOT'); 
```

通过这个我们告诉 PHP (Apache) 在这些路径中搜索任何应该被自动加载器包含的类。

然后假设我们有一些`Library_1`，`/var/www/Libs/library_1`并且这个路径被添加到 include_path 我们可以这样做：

```
namespace Company\Common;

Class DB {
    private function __construct() {
        $this->Handle = new \Library_1();
    }
} 
```

这应该与

```
namespace Company\Common;

use \Library_1;

Class DB {
    private function __construct() {
        $this->Handle = new Library_1();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:40:55.913

解决了。我没有意识到命名空间的别名仅适用于当前文件，而不适用于任何未来包含的文件。在 PHP.net 上找到这个也适用于别名：

> 导入规则是基于每个文件的，这意味着包含的文件不会继承父文件的导入规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T16:17:02.560

这行得通，你的问题是 elsewere。

索引.php

```
<?php
include('_db.php');
use Company\Common\DB;
new DB; 
```

_db.php

```
<?php
namespace Company\Common;
use \PDO;

class DB {
    public function __construct() {
        $this->Handle = new PDO;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T16:26:05.700

要访问和之类的全局对象`PDO`，`DateTime`您需要在它们前面加上反斜杠。所以你有两个选择。

首先，`use`您希望在名称空间类文件中使用的类：

```
<?php
namespace Vendor;

use \PDO;
use \PDOException;

class MyClass
{
    public function __construct()
    {
        try {
            $db = new PDO($dsn, $user, $pass);
            $db->setAttribute(\PDO::ATTR_ERRMODE, \PDO::ERRMODE_EXCEPTION);
        }
        catch (PDOException $e) {
            echo $e->getMessage();
            exit;
        }
    }
} 
```

或者只是在你的类中使用以反斜杠为前缀的声明：

```
<?php
namespace Vendor;

class MyClass
{
    public function __construct()
    {
        try {
            $db = new \PDO($dsn, $user, $pass);
            $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        }
        catch (\PDOException $e) {
            echo $e->getMessage();
            exit;
        }
    }
} 
```

就个人而言，我更喜欢第一种方法。

# api - Facebook 登录后 Soundcloud popup_callback.html 未重定向到回调 url

> ID：14282013
> 
> 赞同：2
> 
> 时间：2013-01-11T16:06:46.867
> 
> 标签：api, login, callback, soundcloud

我多年阅读后的第一篇文章：P 我认为 soundcloud 的页面有一些问题[https://soundcloud.com/popup_callback.html](https://soundcloud.com/popup_callback.html)

我的应用程序使用 soundcloud api 并且工作正常，但是当我的用户尝试连接 facebook 并且他们从 facebook 转到 [https://soundcloud.com/popup_callback.html?returnTo=CALLBACK_URL](https://soundcloud.com/popup_callback.html?returnTo=CALLBACK_URL) 但它没有重定向到回调 url ，只显示一个空白页面。

用户需要在其他窗口中登录 soundcloud 才能登录我的应用程序。我的回调网址可能有问题吗？“http://domain.com/callback/”

我在 ff、opera 和 chrome 以及 SO 的不同版本中尝试过

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-29T16:24:09.663

这似乎是 SoundCloud API 中的一个错误（请参阅[Soundcloud: blank page with popup_callback.html when trying to auth using Facebook](https://stackoverflow.com/questions/11544193/soundcloud-blank-page-with-popup-callback-html-when-trying-to-auth-using-facebo)）

`display=popup`在重定向到 SoundCloud 的 OAuth2 授权端点时，我可以通过包含在查询字符串中来解决此问题： `https://soundcloud.com/connect?client_id=[my_client_id]&redirect_uri=[my_redirect_uri]&response_type=code&display=popup`. 这将强制显示移动优化显示，但修复了 Facebook 登录问题。

请注意，我实际上并没有打开弹出窗口，我只是在使用客户端重定向时包含此参数`window.location='https://soundcloud.com/connect?...&display=popup'`

# windows-7 - WDK7：使用 IoAttachDeviceToDeviceStack 在 PREfast 中给出“必须保留内存”警告

> ID：14282015
> 
> 赞同：0
> 
> 时间：2013-01-11T16:06:57.027
> 
> 标签：windows-7, wdk, prefast

我正在使用 PREFast 检查 Windows7 的一些驱动程序代码构建。以下代码行

```
stackDeviceObject = IoAttachDeviceToDeviceStack(deviceObject, PhysicalDeviceObject); 
```

发出警告：

```
warning 28107: The Memory 'deviceObject' must be held when calling 'IoAttachDeviceToDeviceStack'. 
```

deviceObject 是通过先前调用 IoCreateDevice 获得的。有谁知道这个警告意味着什么以及如何摆脱它？

PREfast 帮助说“调用函数时程序在调用函数之前必须获取的资源没有获取。因此，函数调用将失败。”

帮助页面提供的示例围绕在对 KaEnterCriticalRegion 和 KaLeaveCriticalRegion 的调用之间对 ExAcquireResourceLite 和 ExReleaseResourceLite （给出此警告）的一对调用，然后据说可以消除警告，但我不知道如何将此信息应用于我对 IoAttachDeviceToDeviceStack 的调用。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:39:52.850

我相信我对自己的问题有一个答案。调用`IoCreateDevice`是在一个单独的函数中调用的。我认为这阻止了 PREfast 看到这个函数被调用并且`deviceObject`在调用被调用之前被正确初始化`IoAttachDeviceToDeviceStack`。

我已将呼叫移至与警告`IoCreateDevice`相同的功能中。`IoAttachDeviceToDeviceStack`

感谢任何花时间阅读本文并试图找到答案的人。

# gxt - 使用简单类型加载数据支持的组合框

> ID：14282016
> 
> 赞同：0
> 
> 时间：2013-01-11T16:06:59.600
> 
> 标签：gxt

我有一个返回字符串列表的 RPC 方法。我想创建一个带有商店的 ComboBox，它将通过 RpcProxy 加载值，但我找不到不使用某种 ModelData 类的示例。

我宁愿不必创建一个只有一个属性（字符串）的简单 Bean，然后必须一次转换 List 一项。

我的理想是创建这样的东西：

```
RpcProxy<List<String>> proxy = new RpcProxy<List<String>>()... 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:55:32.833

不幸的是，在 GXT 2.2.5 中，您无法不使用`ModelData`.

的类定义`ComboBox`说明了一切：

```
public class ComboBox<D extends ModelData> extends TriggerField<D> implements SelectionProvider<D> {
...
protected ListStore<D> store;
... 
```

因此，此时您最关心的是保持代码清洁。如果您必须创建一个专门的`ModelData`派生类，您可以`ComboBox`为您的包装对象创建子类并保留一个嵌套类定义。

如果您不习惯使用 GXT 2.2.5，我会更新到 GXT 3.0.x 和 GWT 2.5.0。GXT 3 不再使用`ModelData`. 现在，一切都接受 bean-like 对象。

# symfony - Symfony2 和平面 PHP CMS

> ID：14282017
> 
> 赞同：0
> 
> 时间：2013-01-11T16:07:00.180
> 
> 标签：symfony, content-management-system

我有一个在过去几年中一直在构建的 CMS，它非常大，可以完美地满足网站的需求。我即将使用 Symfony2 重新构建网站的前端，只是想再次保证我可以使用我现有的 CMS，它没有 Symfony2 组件并且几乎是带有 Symfony2 前端的扁平 PHP？我什至可能会将 CMS 放在网站的子域中，这样网站文件将完全独立，但显然会共享相同的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:59:33.320

是的，你没有理由不能这样做。您需要注意诸如结果缓存之类的事情，因为值可能会在一个不会使缓存无效的完全独立的系统中更新。

如果这只是用于前端，您是否考虑过只使用 Silex？它更轻量级，因此应该提供更好的性能。

# uiviewcontroller - 在 CCLayer 上调用 .xib

> ID：14282026
> 
> 赞同：0
> 
> 时间：2013-01-11T16:07:22.030
> 
> 标签：uiviewcontroller, cocos2d-iphone, ccsprite

我正在制作一个从 PhotoLibrary 捕获选定图像并将其放在 CCSprite 上的应用程序，我的问题是：图像太大，我无法减小尺寸，所以我想添加一些 UIViewController 或 .Xib CCSprite 的大小并将图像放在 .Xib 上。

# iphone - 如何访问显示已发布到墙上的应用程序名称的链接？

> ID：14282027
> 
> 赞同：1
> 
> 时间：2013-01-11T16:07:25.633
> 
> 标签：iphone, ios, objective-c, facebook

看看这张照片：

![在此处输入图像描述](../Images/bb2db9639ea2a3eafef1c40cb968b33d.png)

你可以在我的 Facebook 墙上看到一个用 Draw Something 应用程序制作的帖子。用红色椭圆标记的是指向 Draw Something Facebook 页面的链接。据我了解，此链接始终显示应用程序的名称。我想知道的是如何从我的代码中访问这样的链接？我如何指定这个参数来设置我需要的链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:17:21.747

这不是在您的代码中完成的，它是 Facebook API 的一部分。当您访问developers.facebook.com 使用Facebook 设置您的应用程序时，您给他们的名称将是显示的名称，该链接的URL 将是您的应用程序页面。

*也就是说，我不知道 Facebook 是否允许您自定义此内容，但我猜他们不会。

# c# - asp中的自定义错误

> ID：14282032
> 
> 赞同：1
> 
> 时间：2013-01-11T16:07:42.373
> 
> 标签：c#, asp.net, custom-error-pages, custom-errors

我正在尝试做一个错误页面，只要发生错误就会重定向到它。

这是我的代码：

```
 <customErrors defaultRedirect="Error.aspx" mode="On" /> 
```

现在工作正常我怎样才能在我的错误页面上获得错误消息

示例：错误 - 索引错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:20:39.343

```
protected override void OnError(EventArgs e)
{     
  HttpContext ctx = HttpContext.Current;

  Exception exception = ctx.Server.GetLastError ();

  string errorInfo = 
     "<br>Offending URL: " + ctx.Request.Url.ToString () +
     "<br>Source: " + exception.Source + 
     "<br>Message: " + exception.Message +
     "<br>Stack trace: " + exception.StackTrace;

  ctx.Response.Write (errorInfo);
  ctx.Server.ClearError ();

  base.OnError (e);
} 
```

阅读有关[ASP.NET 自定义错误页面的更多信息](https://support.microsoft.com/en-us/kb/306355)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:16:03.747

您需要获取最后发生的错误（以编程方式）并将其显示在页面中。您可以这样做（在 Error.aspx 中）：

```
protected void Page_Load(object sender, EventArgs e)
{
     Exception ex = Server.GetLastError();
     lblError.Text= ex.Message;
     Server.ClearError();
} 
```

在您的页面中定义的标签控件在哪里`lblError`只是为了显示错误消息。

有关更多详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.getlasterror.aspx)。

# c# - 将图像列表下载到位图数组 C#

> ID：14282034
> 
> 赞同：0
> 
> 时间：2013-01-11T16:07:43.107
> 
> 标签：c#, image, xaml, windows-8

我的应用程序中有一个组件需要预加载某些图像。我的想法是我应该将网络上的所有图像下载到位图对象中，然后将它们用作我的图像中的源。最简单的方法是什么？我已经编写了一些代码来下载图像，但它似乎不适用于多个图像：

```
 HttpClient client = new HttpClient();
        NetResult result;

        try
        {

            Debug.WriteLine("Starting call to " + Url);
            HttpResponseMessage response = await client.GetAsync(Url);
            response.EnsureSuccessStatusCode();
            result = await this.processContent(response.Content);

        }
        catch (Exception e) 
        {

            Debug.WriteLine(e.Message);
            Debug.WriteLine("Unable to load " + Url);
            result = new NetResult(NetResultStatus.Failure, "Could not connect to " + Url + ".");

} 
```

...

ProcessContent 的工作方式如下：

```
public override async Task<NetResult> processContent(HttpContent content)
    {

        InMemoryRandomAccessStream randomAccessStream = null;

        if (content != null && !Constants.FakeInternet)
        {
            byte[] img = await content.ReadAsByteArrayAsync();
            // Transform to a stream
            randomAccessStream = new InMemoryRandomAccessStream();
            DataWriter writer = new DataWriter(randomAccessStream.GetOutputStreamAt(0));
            writer.WriteBytes(img);
            await writer.StoreAsync();
        }

        _m = new ManualResetEvent(false);

        (Application.Current as App).UIDispatcher.DispatchAsync(() =>
            {

                    // Create bitmap image
                    image = new BitmapImage();

                    NetImage i = (NetImage)this;

                    Debug.WriteLine("Creating Image " + Url);
                    image.ImageFailed += ImageFailed;
                    image.ImageOpened += ImageOpened;
                    image.SetSource(randomAccessStream);

            });

        _m.WaitOne();

        return await base.processContent(content);

    }

    void ImageOpened(object sender, Windows.UI.Xaml.RoutedEventArgs e)
    {

        Debug.WriteLine("Image opened: " + Url);
        _m.Set();

    }

    void ImageFailed(object sender, Windows.UI.Xaml.ExceptionRoutedEventArgs e)
    {

        Debug.WriteLine("Image failed: " + Url);
        image = null;
        ConnectionState = ConnectionState.Failed;
        _m.Set();

    } 
```

是否有一个内置的 API 可以用来从网络将 PNG 下载到位图对象中？我想其中一件烦人的事情是我必须在 UI 线程上解码位图……这是为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:18:43.893

我不知道 WinRT API 可以为您节省一些下载 PNG 和创建 BitmapImage 的步骤。这并不意味着不存在。

[您可能会发现查看XAML 图像示例](http://code.msdn.microsoft.com/windowsapps/0f5d56ae-5e57-48e1-9cd9-993115b027b9)中的场景 4 会有所帮助。它在后台线程上异步计算分形，然后在 WriteableBitmap 中显示结果。这将使您脱离 UI 线程。

# ruby-on-rails - 单引号字符串的内插

> ID：14282038
> 
> 赞同：0
> 
> 时间：2013-01-11T16:08:00.833
> 
> 标签：ruby-on-rails, ruby, string, quotes, string-interpolation

我正在构建一个字符串，该字符串将用作通过 SSH 在 Windows 机器上运行的命令。

该命令必须在其元素用双引号括起来的情况下执行，所以我必须将命令作为一个整体用单引号括起来。然而，这意味着我失去了使用内联插值的能力。

那么有没有办法我仍然可以在单引号字符串上使用内联插值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:12:09.980

使用 %Q{command} 如下：

```
 puts %Q{Hello "xyz"}  => Hello "xyz"

 puts %Q{"Hello" 'xyz'} => "Hello" 'xyz' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T16:10:21.137

不，您不能对单引号字符串使用插值。相反，您可以转义双引号。

```
puts "I say \"Hello\""
# >> I say "Hello" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:13:18.430

```
puts %Q(I say "Hello", you say #{goodbye}) 
```

# python - 我将如何通过 Internet 将更新推送到在桌面上运行的应用程序？

> ID：14282040
> 
> 赞同：-3
> 
> 时间：2013-01-11T16:08:03.093
> 
> 标签：python, architecture

我一直在构建这个在我们的工作计算机上运行的小应用程序。我们不在办公室时，它只是晚上的一些小维护工作。前几天我添加了一些功能，以便它连接到网站并在用户代理字符串中发送其状态信息。这很酷，因为我可以在家监控它在做什么。但后来我想知道，我可以通过互联网远程更改这个东西的配置设置吗？喜欢打开或关闭某些选项？

我该怎么办？

理想情况下，我希望有一个带有各种控制面板的非常基本的网页，然后可以将设置提交给当前正在运行的软件。

我什至不知道从哪里开始这样的事情。你怎么得到两件事，所以在互联网上互相交谈？我需要研究哪些核心知识？

不幸的是，这倾向于问题的开放式方面，但我是这个领域的新手，并且可以在正确的方向上使用一个点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:12:33.100

我的建议是停止使用胖客户端并准备将其移至基于 Web 的客户端。这将允许一个中心连接点，并且当您需要他们执行所述更新时，您不会让用户不更新他们的客户端。

您可能要考虑的架构是应用程序服务器，例如 Django（因为您使用的是 Python）。将会发生的事情是将应用程序（瘦客户端）部署到 Django，用户现在将通过服务器为他们吐出的会话连接到这一部分。通过这样做，您可以从一个位置管理所有用户并根据需要翻转开关。归根结底，这也降低了软件的维护成本和尝试对桌面客户端进行故障排除所花费的时间。

**评论**

> 那么，例如，程序启动，连接到服务器并从中构建其设置？配置是如何发生的？我会让程序反复检查服务器是否有更改，还是有更好的方法？

它的工作方式是有两种类型的配置文件。一种是用户定义的，例如，如果用户偏好以蓝色显示文本并且您存储该信息，服务器并不关心它，因为它们通常存储在本地。

现在就服务器配置文件而言，您可以做几件事：

1.  **通过角色配置权限**
    这需要您根据用户的角色更新用户的权限。发生此更新时，您必须终止所有将受到影响的活动会话，以便新权限影响这些用户，或者您可以等待会话自行超时并获取新权限。

2.  **修改应用服务器设置**
    这需要关闭应用程序，例如需要处理的维护问题，即补丁。

3.  **该程序不轮询服务器，服务器向下推送到客户端**。这甚至不完全正确，客户端连接到服务器，如果有新数据，客户端通常通过套接字接收它。您的会话将存储大部分信息，这就是为什么需要定期刷新/销毁它（注销等）。

就程序获取其设置而言，是的。用户有连接到应用程序的“虚拟”终端，这些帐户通常是只读的。因此，他们不能修改服务器的内容，也不能出于安全目的进行修改。当用户连接时，应用程序将连接到数据库并检索凭据（您也可以使用证书，我推荐这种方法）。根据用户与应用程序连接的凭据，将向用户提供基本“配置文件”以及服务器知道的任何用户特定信息，即显示名称/上次登录日期。

# php - 如果复选框选中/未使用 PHP 选中，则插入 mySQL 查询

> ID：14282043
> 
> 赞同：0
> 
> 时间：2013-01-11T16:08:06.510
> 
> 标签：php, javascript, html, ajax

在尝试根据复选框内的值开发复选框激活的 mySQL 查询的过程中，我遇到了一个我无法解决的问题，我目前尝试了以下操作

```
<input type="checkbox" name="status" onclick="updateStatus(<? echo $data['id']; ?>,this.checked)"> 
```

函数“updateStatus”的 Javascript/Ajax 代码如下

```
function updateStatus(id,value) {
if (window.XMLHttpRequest) {
    http = new XMLHttpRequest()
} else if (window.ActiveXObject) {
    http = new ActiveXObject("Microsoft.XMLHTTP")
} else {
    alert("Your browser does not support XMLHTTP!")
}
http.abort();
http.open("GET", "../functions/ajax.php?check=update_status&id=" + id + "&checked="+value, true);
http.onreadystatechange = function () {
     if (http.readyState == 4) {
        alert(http.responseText);
     }
 }
 http.send(null) 
```

functions/ajax.php 中的 PHP 函数

```
if(isset($check) and $check == 'update_status' and isset($_GET['id'])){
    $id = mysql_real_escape_string($_GET['id']);
    $checked= mysql_real_escape_string($_GET['checked']);
if($checked == true) {
    echo "Checked";
} elseif($checked == false) {
    echo "Not checked";
} else {
    echo "Invalid response";
} 
```

使用此代码时，它总是返回“已检查”，知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:13:20.253

试试这个（代码测试），

```
<input type="checkbox" name="status" onclick="updateStatus(<? echo $data['id']; ?>,this.checked)"> 
```

您将获得第二个参数为真或假；

```
function updateStatus(id,checked) {
if (window.XMLHttpRequest) {
    http = new XMLHttpRequest()
} else if (window.ActiveXObject) {
    http = new ActiveXObject("Microsoft.XMLHTTP")
} else {
    alert("Your browser does not support XMLHTTP!")
}
http.abort();
http.open("GET", "../functions/ajax.php?check=update_status&id=" + id+"checked="+checked, true);
http.onreadystatechange = function () {
     if (http.readyState == 4) {
        alert(http.responseText);
     }
 }
 http.send(null) 
```

你的 PHP 将是：

```
if(isset($check) and $check == 'update_status' and isset($_GET['id']) AND isset($_GET['checked'])){
$id = mysql_real_escape_string($_GET['id']);
$checked= mysql_real_escape_string($_GET['checked']);
if($checked == true) {
$query = mysql_query("SELECT * FROM `check_status` WHERE `user_id` = '$_SESSION[userid]' and `id` = '$id'");
else
 //some other query
//Then i can insert the query based on if the checkbox checked or not. 
```

# android - Google Maps v2 使用 setMyLocationEnabled 时出错

> ID：14282045
> 
> 赞同：2
> 
> 时间：2013-01-11T16:08:16.997
> 
> 标签：android, android-mapview, android-maps, android-maps-v2

我不确定我错了，在 Google Map v2 示例中`nullPointerException`使用。`googlemap.setMyLocationEnabled(true)`

**MainActivity.java 文件：**

```
package com.example.locationgooglemapsv2;
import java.io.IOException;
import java.util.List;

import android.content.Context;
import android.location.Address;
import android.location.Criteria;
import android.location.Geocoder;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.AsyncTask;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;
import android.widget.RadioGroup;
import android.widget.RadioGroup.OnCheckedChangeListener;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMap.OnMapClickListener;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions;

public class MainActivity extends FragmentActivity implements LocationListener {

GoogleMap googleMap;
MarkerOptions markerOptions;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Getting reference to the SupportMapFragment of activity_main.xml
    SupportMapFragment fm = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);

    // Getting GoogleMap object from the fragment
    googleMap = fm.getMap();

    // Enabling MyLocation Layer of Google Map
    googleMap.setMyLocationEnabled(true);

    /*======== MAP TYPE ==========*/

    googleMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);

    RadioGroup rgViews = (RadioGroup) findViewById(R.id.rg_views);

    rgViews.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            // TODO Auto-generated method stub
            switch(checkedId){
            case R.id.normal:   googleMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
                                break;

            case R.id.satellite:googleMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
                                break;

            case R.id.terrain:  googleMap.setMapType(GoogleMap.MAP_TYPE_TERRAIN);
                                break;
            }
        }
    });

    /*======== MARKER AND ONCLICK ==========*/

    googleMap.setOnMapClickListener(new OnMapClickListener() {

        @Override
        public void onMapClick(LatLng latlng) {

            // Creating a marker
            MarkerOptions markerOption = new MarkerOptions();

            // Setting the position for the marker
            markerOption.position(latlng);

            // Setting the title for the marker.
            // This will be displayed on taping the marker
            //markerOption.title(latlng.latitude + " : " + latlng.longitude);

            // Clears the previously touched position
            googleMap.clear();

            // Animating to the touched position
            googleMap.animateCamera(CameraUpdateFactory.newLatLng(latlng));

            // Placing a marker on the touched position
            googleMap.addMarker(markerOption);

            // Adding Marker on the touched location with address
            new ReverseGeocodingTask(getBaseContext()).execute(latlng);

        }
    });

    /*======== LOCATION ==========*/

     // Getting LocationManager object from System Service LOCATION_SERVICE
    LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

    // Creating a criteria object to retrieve provider
    Criteria criteria = new Criteria();

    // Getting the name of the best provider
    String provider = locationManager.getBestProvider(criteria, true);

    // Getting Current Location
    Location location = locationManager.getLastKnownLocation(provider);

    if(location!=null){
            onLocationChanged(location);
    }

    locationManager.requestLocationUpdates(provider, 20000, 0, this);
}

@Override
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub

    double lat = location.getLatitude();
    double lng = location.getLongitude();

    //--maps
    LatLng latlng = new LatLng(lat, lng);
    googleMap.moveCamera(CameraUpdateFactory.newLatLng(latlng));
    googleMap.animateCamera(CameraUpdateFactory.zoomTo(10));

}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

/*======== REVERSE GEO CODING ==========*/

class ReverseGeocodingTask extends AsyncTask<LatLng, Void, String>{

    Context mContext;

    public ReverseGeocodingTask( Context con) {

        super();
        this.mContext = con;

    }

    @Override
    protected String doInBackground(LatLng... params) {
        // TODO Auto-generated method stub
        Geocoder geocoder = new Geocoder(mContext);
        double lat = params[0].latitude;
        double lng = params[0].longitude;

        List<Address> addresses = null;
        String actualAdress = "";

        try {
            addresses = geocoder.getFromLocation(lat, lng, 1);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        if(addresses != null && addresses.size() > 0){
            Address address = addresses.get(0);

            actualAdress = String.format("%s, %s, %s", address.getMaxAddressLineIndex() > 0 ? address.getAddressLine(0) : "",
                    address.getLocality(), address.getCountryName());
        }

        return actualAdress;
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

        // Setting the title for the marker.
        // This will be displayed on taping the marker
        markerOptions.title(result);

        // Placing a marker on the touched position
        googleMap.addMarker(markerOptions);
    }

}

} 
```

**清单文件：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.locationgooglemapsv2"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<permission
    android:name="com.example.locationgooglemapsv2.permission.MAPS_RECIEVE"
    android:protectionLevel="signature" >
</permission>

<uses-permission android:name="com.example.locationgooglemapsv2.permission.MAPS_RECIEVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.locationgooglemapsv2.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="API_KEY" />
</application>

</manifest> 
```

**错误日志：**

```
01-11 21:11:56.282: E/AndroidRuntime(327): FATAL EXCEPTION: main
01-11 21:11:56.282: E/AndroidRuntime(327): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.locationgooglemapsv2/com.example.locationgooglemapsv2.MainActivity}: java.lang.NullPointerException
01-11 21:11:56.282: E/AndroidRuntime(327):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-11 21:11:56.282: E/AndroidRuntime(327):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-11 21:11:56.282: E/AndroidRuntime(327):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-11 21:11:56.282: E/AndroidRuntime(327):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-11 21:11:56.282: E/AndroidRuntime(327):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-11 21:11:56.282: E/AndroidRuntime(327):  at android.os.Looper.loop(Looper.java:123)
01-11 21:11:56.282: E/AndroidRuntime(327):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-11 21:11:56.282: E/AndroidRuntime(327):  at java.lang.reflect.Method.invokeNative(Native Method)
01-11 21:11:56.282: E/AndroidRuntime(327):  at java.lang.reflect.Method.invoke(Method.java:521)
01-11 21:11:56.282: E/AndroidRuntime(327):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-11 21:11:56.282: E/AndroidRuntime(327):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-11 21:11:56.282: E/AndroidRuntime(327):  at dalvik.system.NativeStart.main(Native Method)
01-11 21:11:56.282: E/AndroidRuntime(327): Caused by: java.lang.NullPointerException
01-11 21:11:56.282: E/AndroidRuntime(327):  at com.example.locationgooglemapsv2.MainActivity.onCreate(MainActivity.java:46)
01-11 21:11:56.282: E/AndroidRuntime(327):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-11 21:11:56.282: E/AndroidRuntime(327):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
01-11 21:11:56.282: E/AndroidRuntime(327):  ... 11 more 
```

顺便说一句，对于那些试图玩的人来说，源代码是一个很好的例子，`google map v2`并且得到了很好的评论。

任何有关该错误的帮助表示赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T16:24:11.283

由于设备中缺少 Google Play Services API，我得到了一些类似的东西。如果您使用：

```
GooglePlayServicesUtil.isGooglePlayServicesAvailable(Context) 
```

如果可用，它应该返回 ConnectionResult.SUCCESS。如果它返回

```
ConnectionResult.SERVICE_MISSING
ConnectionResult.SERVICE_VERSION_UPDATE_REQUIRED
ConnectionResult.SERVICE_DISABLED 
```

您可以提示用户下载它使用

```
GooglePlayServicesUtil.getErrorDialog() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T16:18:59.780

`getmap()`正在返回 null。这意味着地图还没有准备好。要么是因为片段尚未准备好，要么是您在没有可用 Google Play 服务的设备上运行。有关详细信息，请参阅[getMap](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/MapFragment#getMap%28%29)。

# php - 设置 $this = &$otherObject 会改变什么吗？

> ID：14282047
> 
> 赞同：1
> 
> 时间：2013-01-11T16:08:23.503
> 
> 标签：php, object, reference, php4

评论表明我必须澄清我的观点：我是一名开发人员和顾问，在这里从事外国代码的工作。我目前的任务是帮助将现有的（非常大的）系统从 PHP4 迁移到 Java。在查看代码时，我偶然发现了一段让我非常困惑的代码。

我正在处理的系统中的某个类（我们称之为TestClass）执行以下操作：

```
function reload(){
    $newobject = new TestClass();
    $this = $newobject;
} 
```

我快速尝试了一下，期望在直接访问对象成员之间或通过某些 getter 访问对象之间存在一些不一致的行为，以防万一这以某种方式起作用。我认为在最坏的情况下，指向现有对象的外部指针和内部指针（又名 $this）将针对堆的不同部分。
快速测试似乎表明根本没有发生任何事情。

知道这是否有任何（副作用）效果吗？

这是我的完整测试：

```
<?php

ini_set('display_errors', true);

class TestClass{

    var $var1;

    function TestClass(){
        $this->var1 = 0;
    }

    function getVar1(){
        return $this->var1;
    }

    function setVar1($value){
        $this->var1 = $value;
    }

    function reload(){
        $newobject = new TestClass();
        $this = &$newobject;
    }
}

echo "<h3>Creating TestObject</h3>";

$testObject = new TestClass();

echo "Accessing member directly: " . $testObject->var1 . "<br>";
echo "Accessing member via get: " . $testObject->getVar1() . "<br>";

echo "Setting member directly to 1<br>";

$testObject->var1 = 1;

echo "Accessing member directly: " . $testObject->var1 . "<br>";
echo "Accessing member via get: " . $testObject->getVar1() . "<br>";

echo "<h3>Calling reload</h3>";

$testObject->reload();

echo "Accessing member directly: " . $testObject->var1 . "<br>";
echo "Accessing member via get: " . $testObject->getVar1() . "<br>";
?> 
```

如果 $this 现在指向新对象，而 $testObject 仍将指向原始对象，我希望在最后两次调用中得到 1 和 0，但在两种情况下都返回 1。所以我需要知道 $this 的重新分配是否在做任何事情，而不是一个坏主意。如果不是，我可以永远丢弃那部分。所以如果有人知道任何副作用，请告诉。

PS：我完全知道上面的代码没有使用可见性等。原始系统是用 PHP4 编写的，所以为什么要麻烦 :-|

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:51:01.683

好的，在同事的暗示下，我明白了。如果重新加载功能更改为

```
function reload(){
    $newobject = new TestClass();
    $this = $newobject;
} 
```

该对象被新创建的内容覆盖。这是由于上面评论中“我穿上长袍戴上巫师帽”提到的文字副本。如果与强制引用调用一起使用，则不会发生任何事情，这很好。

# webgl - GLGE XML 是如何工作的？

> ID：14282049
> 
> 赞同：1
> 
> 时间：2013-01-11T16:08:32.843
> 
> 标签：webgl, glge

我正在尝试使用 GLGE，但我不知道如何在 XML 网格中编写 [或导出.. 或转换..] 3D 模型。

有人能解释一下如何“理解”这个 XML 之王吗？

# html - 在按键事件 request.form 获取 null

> ID：14282053
> 
> 赞同：-1
> 
> 时间：2013-01-11T16:08:56.760
> 
> 标签：html, internet-explorer, asp-classic, vbscript

我在经典 asp 中有一个登录页面，其中包含两个按钮 login 和 signup 。我还有一个隐藏的提交按钮。在提交表单时，我正在检查 if request.form(submit) = login

然后登录步骤

否则 request.form(signup) = 注册

它在所有浏览器中都可以正常工作，但是在 IE 中，当我按下回车键时，它会避开 request.form(submit) = login 和 request.form(signup) = signup 但是当我点击回车按钮时它可以正常工作。知道为什么我在 request.form(submit) = login 上一无所获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:41:18.857

问题非常基本和根本：Internet Explorer 没有“默认”提交按钮。每个浏览器都可以自由选择在通过密钥提交表单的情况下如何表现`ENTER`，现代浏览器选择发送第一个提交按钮的值的逻辑方式（就像它被点击一样），而 IE，作为 IE，选择不友好的方式. 不足为奇，也没有办法解决这个“问题”的根源，除非你碰巧为 IE 编写代码。

解决这个问题的唯一方法是使用 JavaScript 并*强制*浏览器在按下 时选择特定的提交按钮`ENTER`。为此，首先将唯一 ID 添加到登录按钮：

```
<input type="submit" name="submit" value="login" id="btnLogin" /> 
```

现在将`onkeypress`处理程序添加到您的表单标签：

```
<form action="YourPage.asp" method="POST" onkeypress="if (event.keyCode === 13) { document.getElementById('btnLogin').click(); return false; }"> 
```

`ENTER`这将模拟在表单内按下时单击登录按钮。

这种方法的唯一缺点是，如果您的表单包含`<textarea>`，按下`ENTER`它们也会提交表单，这不是一件好事。为了让他们表现得像他们应该表现的那样，将这个添加到他们每个人中：

```
<textarea onkeypress="event.cancelBubble = true;"> 
```

以上将取消从向上冒泡到`<form>`按键事件的事件。

# scala - Scala Specs2 动态添加片段

> ID：14282058
> 
> 赞同：0
> 
> 时间：2013-01-11T16:09:13.783
> 
> 标签：scala

建设期间`org.specs2.Specification`，

我使用像这样添加砖块：

```
 def is =  "My Spec".title ^ method1 ^ method2 ^ end 
```

其中 methodN 包含如下内容：

```
a must be "expected string" 
```

就我而言，我遇到了方法2取决于方法2的执行的问题。换个说法：method2返回Fragment，必须推迟到method1完成执行。

有没有这方面的最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:28:28.613

通常应该这样写：

```
def is =  "My Spec".title ^ "1" ! method1 ^ "2" ! method2 ^ end 
```

但是您是否打算按照自己的方式进行操作？

# maven - 如何防止程序集插件在空程序集上失败？

> ID：14282060
> 
> 赞同：0
> 
> 时间：2013-01-11T16:09:19.143
> 
> 标签：maven, maven-assembly-plugin

我有一个大型的多模块项目。此项目中的许多模块需要创建辅助工件以用于构建项目分发。我创建了一个共享程序集描述符，它工作正常。

我当前的问题是某些模块没有任何描述符拾取的内容，这会导致程序集插件失败，因为程序集是空的。

当程序集为空时，有什么方法可以防止程序集插件掉落？我查看了单个目标的参数，但找不到任何东西。我不想在我的单个模块上手动启用/禁用此程序集，我想在没有任何内容的父模块和子模块上配置程序集以跳过在程序集上的创建而不是失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:17:16.150

您可以将您的程序集插件配置移动到`<pluginManagement>`父模块中的一个部分，然后只在需要它的子模块中指定程序集插件。

家长：

```
<pluginManagement>
  <plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</plugin>
        <artifactId>maven-assembly-plugin</plugin>
        <version>${your.version}</version>
        <configuration>
           <!-- whatever you have here now -->
        </configuration>
        <executions>
           <!-- whatever you have here now -->
        </executions>
    </plugin>
  </plugins>
</pluginManagement> 
```

需要创建程序集的子项：

```
<build>
  <plugins>
    <!-- Pull in config from the parent -->
    <plugin>
        <groupId>org.apache.maven.plugins</plugin>
        <artifactId>maven-assembly-plugin</plugin>
    </plugin>
  .....
  </plugins>
  .....
</build> 
```

# android - AND 和 OR 在一个查询中起作用，不起作用？sqlite

> ID：14282063
> 
> 赞同：0
> 
> 时间：2013-01-11T16:09:38.490
> 
> 标签：android, sql, sqlite, select

我用 WHERE 运行查询

“COMPUTERCLASSROOM_SLOT1 = 0 或 COMPUTERCLASSROOM_SLOT2 = 0 和 COMPUTERCLASSROOM_DONE = 1”

虽然它返回所有满足要求的行..这是表行数据

根据列表示，这里是行的值

```
ROW 1 =                0                       0                          0    
ROW 2 =                1                       0                          0   
ROW 3 =                1                       2                          1   
ROW 4 =                1                       3                          0   
ROW 5 =                1                       4                          1   
ROW 6 =                0                       5                          1   
ROW 7 =                0                       0                          1 
```

他们都回来了..这是为什么？如果我用 AND 更改 OR，它将跟随查询，返回第 7 行...这很奇怪..我需要在一个查询中使用 OR 和 AND，因为我的目标是返回一个至少为 0 的行SLot1 或 Slot2，并且 DONE = 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:11:07.587

它应该是

```
WHERE (COMPUTERCLASSROOM_SLOT1 = 0 OR COMPUTERCLASSROOM_SLOT2 = 0) AND 
       COMPUTERCLASSROOM_DONE = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:14:29.693

正如@Jack 已经指出的那样，问题在于您没有使用括号。因此，您的查询在逻辑上与您所期望的不同。

试试@JW. 的片段，它会完美运行。

```
WHERE (COMPUTERCLASSROOM_SLOT1 = 0 OR COMPUTERCLASSROOM_SLOT2 = 0) AND (COMPUTERCLASSROOM_DONE = 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T16:23:40.933

*根本原因*

AND 被评估为乘法；OR 被评估为加法。因此，根据算术优先规则 (PEMDAS)，在评估 OR 之前先评估 AND。

```
Example: 1 OR 0 is 1 + 0 = 1; 1 AND 0 is 1 * 0 = 0; 
```

所以

```
X or X or X and X is grouped automatically as X or X or (X and X). 
```

使用括号可以避免混淆，并使代码更具可读性。

# java - 服务效率

> ID：14282064
> 
> 赞同：0
> 
> 时间：2013-01-11T16:09:40.787
> 
> 标签：java, android, multithreading, service

我得到了一个生成用户位置的服务。我还有一个带有服务实例的线程，它从服务中获取位置并将其发送到数据库。该线程正在休眠 1 分钟，然后再次从服务中请求地址并将其发送到数据库。

我的问题是我应该创建一个服务而不是这个线程，并且第二个服务将每 1 分钟启动一次吗？优点是当他不需要喜欢线程时服务不会运行，但缺点是我必须每 1 分钟创建一个新连接。

什么是更好的？谁更有效率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:17:30.747

我通常的想法是最好的总是不使用`Thread.sleep();`

话虽如此，您可以采取多种选择：

. 仅每 1 分钟请求一次位置，但这可能会对电池产生奇怪的影响，因为 GPS 无线电将在非工作时间保持打开状态。

. 创建服务的 PendingIntent 并要求 AlarmManager 在 1 分钟内再次调用它。这不会让您的 GPS 一直处于开启状态（如果您的程序正确），但它需要再次定位

. 您还可以在同一服务中（无需销毁并重新启动它）使用[ScheduledExecutorService](http://developer.android.com/reference/java/util/concurrent/ScheduledExecutorService.html)每 1 分钟运行一次线程。（GPS 开或关取决于编程）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:13:57.777

为什么需要线程或第二个服务来插入插入数据库的位置更新。为什么不能在 requestLocationUpdates 方法和 onLocationChanged 事件中配置每 1 分钟的 locationupdates，为什么不能直接将记录插入表中。每分钟运行第二个服务或线程可能会影响您的电池性能。我在我的一个项目中见过。

# templates - 导入的包在 Play 中不可用！框架模板

> ID：14282068
> 
> 赞同：5
> 
> 时间：2013-01-11T16:09:55.810
> 
> 标签：templates, scala, playframework-2.0, bean-validation

我有一个 Play 2.0 模板，其中包含以下第一行：

```
@(item: Option[Item] = None,
    violations: java.util.Set[ConstraintViolation[Item]] = new util.HashSet[ConstraintViolation[Item]]())

@import java.util
@import javax.validation.ConstraintViolation 
```

但是`ConstraintViolation`找不到，我得到了错误：

```
not found: type ConstraintViolation 
```

bean 验证 API 本身在应用程序中可用，因为我可以在控制器中使用它。我该怎么做才能在我的模板中导入它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T17:01:34.123

要么使用完全限定名称，即，`@(item: Option[Item] = None, violations: java.util.Set[javax.validation.ConstraintViolation[Item]] = new util.HashSet[javax.validation.ConstraintViolation[Item]]())`要么添加到 Build.scala 中的通用模板导入中，如下所示：

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
  templatesImport += "javax.validation.ConstraintViolation"
) 
```

# certificate - 受信任的根证书在客户端 SSL 连接上自动消失

> ID：14282069
> 
> 赞同：3
> 
> 时间：2013-01-11T16:09:55.757
> 
> 标签：certificate, windows-server-2008-r2, x509

我有这个最奇怪的问题。首先：我对这个证书很陌生。不过，我已经进行了大量的搜索和阅读。

> 只要客户端 Web 浏览器尝试使用使用该 CA 证书创建的 SSL 证书连接到网站，我安装到服务器中受信任的根证书颁发机构存储中的 CA 证书就会自动被删除/消失。

**详细信息：** Windows Server 2008 R2（开发服务器）。我创建了自己的证书颁发机构证书；我用它来生成 SSL 服务器证书（安装在我的 IIS 7 服务器上）和客户端证书（用于在我的本地 PC 上连接到设置为需要 SSL 和需要客户端证书的开发服务器上的 WCF Webservice ）。

我将 CA 证书安装到服务器和本地 PC 上的受信任根中。将 SSL 服务器证书安装到该特定站点的 IIS7 中，并将 https 绑定到端口 443。

> 一旦我启动浏览器以使用 HTTPS 访问该站点，CA 证书就会在服务器上自动删除（从受信任的根证书颁发机构存储中）。我的本地PC浏览器会报403错误。

这让我发疯了......有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:44:59.883

显然，经过大量的奔波，这是由于许多商店中的相同证书太多。我打开 MMC.exe > Add/Remove SnapIns > Certificates 注意那里有 3 种类型（我的用户帐户、服务帐户和计算机帐户）。打开我的用户和计算机帐户，遍历每个商店的所有商店并删除所有具有相同名称的 CA 证书。然后在我的用户帐户或计算机帐户中添加 CA 证书，具体取决于您访问证书的方式（如果以编程方式使用证书，请将其安装在计算机帐户中，[受信任的根证书颁发机构]。

只要1个地方，问题就会消失。

# email - 发送电子邮件 Android 时避免打开电子邮件客户端

> ID：14282076
> 
> 赞同：1
> 
> 时间：2013-01-11T16:10:17.853
> 
> 标签：email, android-intent, email-client

我有一个使用模拟器通过 Intent 发送文本电子邮件的普通代码。我遇到的问题是电子邮件客户端的“撰写”活动 - 我使用 ICS AVD - 在执行 startActivity() 时出现。所有字段均已正确填写，我必须单击“发送”以结束该过程。之后，控件返回到我的应用程序 UI，并且电子邮件正确发送到目的地。我应该怎么做才能在后台顺利完成发送，而不弹出模拟器的电子邮件应用程序？这是我的代码：

```
public class AppPilot extends Application {
    ...
    private static Context context;
    ...
    @Override
    public void onCreate() {
        super.onCreate();
        context = this;
    }
    ....
        /**
     * Send an Email 
     * @param emailAddress
     * @param emailObject
     * @param emailBody
     */
    public static void sendEmailCoupon(String emailAddress, String emailSubject,
        String  emailBody)  {

        String emailadd[] = { emailAddress };
        Intent emailIntent = new Intent(Intent.ACTION_SEND);
        emailIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        emailIntent.putExtra(Intent.EXTRA_EMAIL, emailadd);
        emailIntent.putExtra(Intent.EXTRA_SUBJECT, emailSubject);
        emailIntent.setType("plain/text");
        emailIntent.putExtra(Intent.EXTRA_TEXT, emailBody);
        context.startActivity(emailIntent);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:52:51.343

这是未来寻找的人的答案，以防在原始帖子之前单击此帖子：[使用JavaMail API在Android中发送电子邮件而不使用默认/内置应用程序](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)。基本上，首先下载3个jar文件——mail.jar（URI：http: [//javamail-android.googlecode.com/files/mail.jar](http://javamail-android.googlecode.com/files/mail.jar)）；activation.jar (URI: [http://javamail-android.googlecode.com/files/activation.jar](http://javamail-android.googlecode.com/files/activation.jar) ); additional.jar (URI: [http://javamail-android.googlecode.com/files/additionnal.jar](http://javamail-android.googlecode.com/files/additionnal.jar)) 到 Eclipse 项目的 /libs 文件夹中。然后右键单击它们中的每一个并使用 Build Path > Add to Build Path 进行引用。创建一个单独的“电子邮件”类，并按照上面链接中“droopie”发布的代码 100% 进行操作。需要使用 JavaMail 以便绕过安全设计原则或将 Android 作为应用程序容器。高温高压

# lotus-notes - 在 Lotus Notes 中动态地从可编辑字段到可计算字段的总和

> ID：14282080
> 
> 赞同：1
> 
> 时间：2013-01-11T16:10:21.630
> 
> 标签：lotus-notes

我们设计了 Lotus Notes 表单，我们在其中以表格格式显示来自外部系统的数据。在表格显示中，我们有可编辑字段，用户在这些可编辑字段中输入金额。现在我们需要从这些可编辑字段中添加数据并动态显示在底部的总计字段中。有人可以在这方面用代码帮助我吗？

当前代码：当前可编辑字段名称为： ，，`PE_TOBEPOSTED`总字段为。所以在 TOT_AMT 的字段值中写了以下代码`PE_TOBEPOSTED1``PE_TOBEPOSTED3``TOT_AMT`

```
w_postd := @Left(PE_TOBEPOSTED;15); 
w_postd := @ProperCase(@Name([CN];@Left(w_postd;15))); 
w_postd1 := @Left(PE_TOBEPOSTED1;15); w_postd1 := @ProperCase(@Name([CN];@Left(w_postd1;15))); 

TOT_AMT = w_postd + w_postd1 + w_postd2 
```

PS：我在 Lotus Notes 开发中才两周大

谢谢。

问候，基肖尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:38:57.660

要对值求和，有一个 @SUM 公式，其工作原理如下：

```
@SUM(PE_TOBEPOSTED : PE_TOBEPOSTED1 : PE_TOBEPOSTED3); 
```

在这里，括号内列出的值用冒号分隔，是您要求和的字段的名称。所以这假设 PE_TOBEPOSTED、PE_TOBEPOSTED1 和 PE_TOBEPOSTED3 字段中有一个数字。

您可以添加刷新按钮以使页面重新计算。按钮的代码是：

```
@Command( [ViewRefreshFields] ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:47:42.617

好的，因为您对此完全陌生，因此您需要考虑很多事情。

首先，如果您希望在用户与 Notes 客户端中的文档交互时发生更改，那么您应该使用 LotusScript 中的 NotesUIDocument 对象。

如果您希望在没有与 UI 交互时发生更改，您可以使用 NotesDocument 对象。

我强烈建议您查看信息中心以获取相关文档。每个 LS 对象引用都有匹配的示例代码。

例如这里是关于如何从文档中获取字段的 NotesUIDocument。

[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_EXAMPLES_FIELDGETTEXT_METHOD.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_EXAMPLES_FIELDGETTEXT_METHOD.html)

您将从相关字段中获取文本，然后使用 CINT 方法将字符串更改为整数，添加它们并将它们发送回文档。

# php - 使用 git smudge/clean 替换文件内容

> ID：14282083
> 
> 赞同：5
> 
> 时间：2013-01-11T16:10:38.613
> 
> 标签：php, git, githooks

我正在尝试使用 git 来管理对我的实时网站的部署。我遇到的问题是我有几个设置文件，我不想在推送到生产环境时更新

我正在寻找的是使用钩子或涂抹/清洁来更改文件内容，例如从

```
<?php
define('DB_NAME', 'live');
define('DB_HOST', '127.0.0.1');
define('DB_USER', 'live_user');
define('DB_PASS', 'livePass'); 
```

至

```
<?php
define('DB_NAME', 'local');
define('DB_HOST', '127.0.0.1');
define('DB_USER', 'local_user');
define('DB_PASS', 'localPass'); 
```

有没有人可以告诉我整个过程

我确实想知道使用 post-receive 钩子和 shell 脚本来替换内容，但理想情况下，我希望在我运行 git checkout -f 之后在实时副本中更改之前更改 repo 中的内容

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T16:16:51.923

> 理想情况下，我希望在运行 git checkout -f 之后更改 repo 中的内容

最接近的是过滤器内容驱动程序，它将替换*.*`git checkout`

![弄脏](../Images/305d3163585ffff228ee832833a9d288.png)

（来自[Scott Schacon](https://github.com/schacon)的关于[Git 属性的](http://git-scm.com/book/en/Customizing-Git-Git-Attributes)[Pro Git 书籍](http://git-scm.com/book)页面：“关键字扩展”部分）

`.gitattributes`因此，在您的情况下：在文件中声明的污迹过滤器。

请参阅“[可以 git 自动在空格和制表符之间切换吗？](https://stackoverflow.com/questions/2316677/can-git-automatically-switch-between-spaces-and-tabs/2316728#2316728) ”，除非您会使用 sed 来替换 local to live（如[本例所示](https://stackoverflow.com/questions/1201779/keeping-git-from-requiring-commit-of-changes/1201899#1201899)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:28:19.240

我认为，您必须从头到尾阅读主题[自定义 Git - Git Book 中的 Git 属性](http://git-scm.com/book/ch7-2.html)才能全面了解，但要特别仔细检查“关键字扩展”部分，其中自定义手工脚本用于将存储库中的 KEYWORD 隐藏到工作目录中的最终文本（和后面）。它们是**任何代码**，可以在带有工作目录的主机上执行，从 .gitattributes 文件中引用

**注意：**因为您必须有不同的 clean-filter 输出（对于本地和实时），所以您可能在本地和实时 WorkingDir 上有两个稍微不同（内容）的清理脚本，在通用文件名下（在本书的示例清理结果中，所有位置都相同） - 使用单个脚本）。

# javascript - JavaScript 设计模式

> ID：14282084
> 
> 赞同：3
> 
> 时间：2013-01-11T16:10:40.203
> 
> 标签：javascript, javascript-events

我正在使用 websockets 在 JavaScript 中开发一个聊天室应用程序。然而，除了这里和那里的 jQuery 小片段外，我对 JavaScript 的经验很少。

我的问题是，我应该使用什么设计模式来使对象自包含并能够创建它的多个实例而不干扰同一对象的其他实例？此外，当“this”关键字引用当前对象实例以外的内容时，我需要知道如何存储公共对象属性并从事件处理程序中访问它们。

代码示例会很棒！

目前，我正在使用原型设计模式，它似乎工作但不是很优雅 - 至少可以说......特别是我如何处理事件，有没有更好的方法？

我目前正在做类似的事情：

```
function Room( args ) {
    this.container = $( '#room-' + args.id );
    this.container.find( '.someBtn' ).on( 'click', this.someEventHandler() );
}

Room.prototype.someEventHandler = function() {
    var self = this;

    return function( event ) {
        console.log( self, this, event );
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:23:59.107

原型已经足够好，它非常适合您描述的任务。

如果你想要更多，你就无法逃避阅读:-)那里有很多设计模式，有时更多的是偏好问题，因为差异很小。

这是关于模式的最佳读物之一：[JS 设计模式](http://addyosmani.com/largescalejavascript/)

另一个关于模块模式和 requirejs：[使用模块组织代码](http://backbonetutorials.com/organizing-backbone-using-modules/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:22:47.063

我建议你不要把它留给 Room 来找出元素并使用 $.proxy

```
function Room( args ) {
    this.container = $( args.elem ); //elem can be selector, dom element, or another jQuery object
    this.container.find( '.someBtn' ).on( 'click', $.proxy( this.clicked, this) );
}

Room.prototype.clicked = function(event) {
    console.log( this, event.currentTarget );
} 
```

在`clicked`方法`this`中是房间实例 abd `event.currentTarget`是处理程序附加到的元素或委托目标。见[http://api.jquery.com/event.currentTarget/](http://api.jquery.com/event.currentTarget/)

我对 jQuery 有一个待处理的功能请求，以使上述内容更加清晰[http://bugs.jquery.com/ticket/12031](http://bugs.jquery.com/ticket/12031)

# ruby-on-rails - 仅 Rails 渲染布局？

> ID：14282087
> 
> 赞同：21
> 
> 时间：2013-01-11T16:10:51.653
> 
> 标签：ruby-on-rails

只是尝试一个简单的 Rails 应用程序，主要是使用 JSON 的 API 后端，重型客户端应用程序。所以我想做的只是渲染布局，让javascript代码处理url，并发出ajax请求来获取json数据。以下似乎有效：

```
respond_to do |format|
  format.html { render :nothing => true, :layout => true }
end 
```

然而，由于没有什么意味着什么都不渲染，所以感觉有点不对劲。有没有更合适的方法来渲染布局？请注意，我的布局没有产量。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-06-24T16:34:18.787

好吧，这在 Rails 4.0 中对我有用：

```
render :text => "", :layout => true 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-08-09T04:22:44.033

（复制 Vasile 的评论以获得更好的可见性。）

对于 rails 5.1，为了在不需要视图模板的情况下渲染布局，您需要使用

```
def index
  render html: '', layout: true
end 
```

或使用自定义布局

```
def index
  render html: '', layout: 'mylayout'
end 
```

根据 tfwright，这也将起作用：

```
def index
  render html: nil, layout: true
end 
```

但是，以下内容将不起作用：

`render text: '', layout: 'mylayout'`会给你一个错误，因为视图模板`index.html.haml`不存在。

`render nothing: true, layout: 'mylayout'`会给你一个错误，因为`nothing:true`不推荐使用，并且`index`模板不存在（但是，这在 rails 4.2 中有效）

`render body: '', layout: 'mylayout'`将呈现''（无布局）

`render plain: '', layout: 'mylayout'`将呈现''（无布局）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-11T16:42:33.047

```
render :file => "layout_file", :layout => false 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-11T16:38:02.543

试试这个，这会将响应呈现给一个名为的文件，该文件`sample.html`可能是一个静态 html 文件。

你也可以把这个文件放在一个公共位置，这样你就可以把它加载到所有的动作中

在这个页面中有你的静态内容，如果你需要一个动态页面，你也可以有一个`.erb`页面

在你的方法中

```
def index
    @posts = Post.all

    respond_to do |format|
      format.html {render :file => "posts/sample"}
      format.json { render json: @posts }
    end
end

/post/sample.html 
```

高温高压

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-06-08T21:07:57.857

我需要类似的东西——显示一个没有部分的布局模板（部分在客户端处理）。

`rails 4.2.0`

```
respond_to do |format|
  format.html { render text: nil, layout: true }
end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T16:14:18.557

我相信如果您的应用程序只是从服务器获取 JSON，格式应该是`json`而不是`html`.

```
respond_to do |format|
  format.json @your_collection
end 
```

或者将所有动作的格式放在你的控制器中，然后只用对象来响应。

# data-structures - 为什么这个 AVL 树实现在 64 位而不是 32 位实现中将位打包成指针？

> ID：14282088
> 
> 赞同：5
> 
> 时间：2013-01-11T16:10:53.497
> 
> 标签：data-structures, solaris, bit-manipulation, avl-tree

在**[Solaris 的这个 AVL 树实现中](https://github.com/illumos/illumos-gate/blob/master/usr/src/uts/common/sys/avl_impl.h)**，如果为 32 位库编译，结构 avl_node 的定义方式很明显。

但是对于 64 库，指向节点父节点的指针被打包到“avl_pcb”中。看起来只存储了 61 位 ponter。

1.  为什么这行得通？
2.  为什么不为 32 位做类似的事情呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T17:03:06.067

在 64 位机器上，指针通常对齐到字边界，字边界是 8 字节的倍数。结果，指针的最低三位将为零。因此，如果一个数据结构需要三位信息，它可以将它们打包到指针的最低三位中。那样：

*   要跟随指针，请清除指针值的最低三位，然后取消引用它。
*   要读取这三个位中的任何一个，请屏蔽指针中的其余位并直接读取它们。

这种方法非常标准，不会失去任何指向地址的能力，因为通常出于性能或硬件原因，您无论如何都不希望有非对齐的指针。

我不确定的是为什么他们不在 32 位的情况下这样做，因为使用三个指针，他们可以使用相同的技巧轻松隐藏必要的位，但每个指针有两个位。我的猜测是这是一个性能问题：如果你确实将位打包到指针的底部，由于清除位所需的计算，你会增加跟踪指针的成本。请注意，例如，在 64 位情况下，这些位被打包到父指针中，这仅用于不常见的操作，例如计算顺序后继或在插入或删除时进行旋转。这可以保持快速查找。在 32 位的情况下，要隐藏 3 位，实现需要使用两个指针的低位，其中一个必须是左指针或右指针。我的猜测是，减慢树搜索的性能损失不值得节省空间，因此他们决定只处理内存损失并将它们分开存储。不过，这只是推测，因为如果他们愿意，他们绝对可以将这些位存储在指针的底部。

附带说明：如果实现使用的是红/黑树而不是 AVL 树，则只需要两个信息位：判断节点是红色还是黑色，以及判断节点是否为红色或黑色。节点是左孩子或右孩子。在这种情况下，所需的两位总是可以打包到一个 32 位指针中。这就是红黑树受欢迎的原因之一。

希望这可以帮助！

# android - Android TextView：如何在 TextView 中设置整行的背景颜色

> ID：14282092
> 
> 赞同：4
> 
> 时间：2013-01-11T16:11:02.200
> 
> 标签：android, textview, background-color

我想在 TextView 中设置整行的背景颜色，而不一定是文本覆盖的那部分行（我可以使用 Span 来完成）。

例如，如果说第 0 行，可以容纳 25 个字符，但只有 12 个字符。如果我说

```
SpannableString s = new SpannableString("abcdefghijkl");
s.setSpan(new BackgroundColorSpan(0xffffffff), 0, 11, Spanned.SPAN_INCLUSIVE_INCLUSIVE);
TextView t = new TextView();
t.setText(s); 
```

这将设置一半行的背景颜色。但我想让整行（TextView 的整个宽度）填充背景色。此外，我希望这仅发生在一行，而不是整个 TextView 背景。

知道如何实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:33:46.730

将您的 TextView 包装在一个 RelativeLayout 中，并在其后面放置另一个视图：

```
<RelativeLayout
    android:id="@+id/container"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    >
    <View android:id="@+id/bgcolor"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:background="@color/whatever"
        />
    <TextView android:id="@+id/textview"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        />
</RelativeLayout> 
```

现在，在全局布局中，找到 TextView 的一行的高度，并将 bgcolor 视图设置为该高度：

```
final TextView textView = (TextView) findViewById(R.id.textview);
final ViewTreeObserver vto = textView.getViewTreeObserver();
vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
    public void onGlobalLayout() {
        int lineHeight = textView.getLineHeight();
        // May need to also getLineSpacingExtra, etc. not sure.
        View bgColor = findViewById(R.id.bgcolor);
        RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams) 
                bgColor.getLayoutParams();
        lp.height = lineHeight;
        bgColor.setLayoutParams(lp);
        // May or may not want to remove the listener:
        vto.removeGlobalOnLayoutListener(this);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:44:19.283

您的目标是使用具有垂直方向的 LineaLayout 之类的东西
，它将 TextView 作为“可着色线”。

1) 创建一个扩展 LinearLayout 的类。
2) 编写基本函数以添加“可着色线”、“绘制它”等
3) 在布局 XML 中使用您的视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T18:53:46.323

```
 TextView name = (TextView) findViewById(R.id.name);
    String iName = "YOYOYOYO";

    ForegroundColorSpan fcs = new ForegroundColorSpan(Color.rgb(184, 184,
            184));

    SpannableString ssb = new SpannableString(iName);
    ssb.setSpan(fcs, 0, iName.length(),
            Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    name.setText(ssb); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-11T16:21:26.307

TextView（就像所有其他 android View 一样）具有[setBackgroundColor方法](http://developer.android.com/reference/android/view/View.html#setBackgroundColor%28int%29)

```
t.setBackgroundColor(0xffffffff); 
```

# python - 在 Mac OS X 上捕获 Python 子进程输出的问题

> ID：14282095
> 
> 赞同：2
> 
> 时间：2013-01-11T16:11:14.290
> 
> 标签：python, macos, subprocess, popen

我在 Mac OS 10.6.8 上运行 Python 3.3。我正在编写一个运行多个子进程的脚本，我想捕获每个子进程的输出并将其记录在一个文件中。我遇到了麻烦。

我首先尝试了以下方法：

```
import subprocess
logFile = open("log.txt", 'w')
proc = subprocess.Popen(args, stdout=logFile, stderr=logFile)
proc.wait() 
```

这产生了一个空的 log.txt。在互联网上闲逛了一下之后，我尝试了这个

```
import subprocess
proc = subprocess.Popen(args, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
output, err = proc.communicate()
logFile = open("log.txt", 'w')
logFile.write(output) 
```

这也产生了一个空的 log.txt。因此，我没有写入文件，而是尝试将输出打印到命令行：

```
output, err = proc.communicate()
print(output)
print(err) 
```

这产生了这个：

```
b''
b'' 
```

我正在尝试运行的过程是 fastq_quality_trimmer。它接受一个输入文件，对其进行过滤，然后将结果保存到一个新文件中。它只向标准输出写入几行，就像这样

```
Minimum Quality Threshold: 20
Minimum Length: 20
Input: 750000 reads.
Output: 750000 reads.
discarded 0 (0%) too-short reads. 
```

如果我从命令行运行它并像这样重定向输出

```
fastq_quality_trimmer -Q 33 -v -t 50 -l 20 -i in.fq -o in_trimmed.fq > log.txt 
```

输出成功写入 log.txt。

我想也许当我用 Popen 调用 fastq_quality_trimmer 时，它以某种方式无法运行，但我的脚本生成的过滤文件与我从命令行运行 fastq_quality_trimmer 时生成的文件相同。所以它*正在工作*；我只是无法捕获输出。更令人困惑的是，我*可以*使用与我发布的内容基本相同的代码成功捕获其他进程（回显、其他 Python 脚本）的输出。

有什么想法吗？我错过了一些非常明显的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:28:27.787

你忘了一个逗号：

```
["fastq_quality_trimmer", "-Q", "33" "-v", "-t", "50", "-l", "20", "-i", leftInitial, "-o", leftTrimmed] 
```

`"33"`在和之间添加它`"-v"`。

您实际上是在传递参数`-Q 33-v`而不是`-Q 33 -v`.

如果它们之间只有空格，Python 将连接两个相邻的字符串：

```
>>> "33", "-v"
('33', '-v')
>>> "33" "-v"
'33-v' 
```

由于`-v`是`fastq_quality_trimmer`产生输出所需的详细开关，因此它会在丢失时保持沉默。

每当您遇到调用子进程的问题时，请*三重*检查创建的命令行。预先等待可以`args`帮助`['echo']`：

```
proc = subprocess.Popen(['echo'] + args, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
output, err = proc.communicate()
print(output) 
```

# java - Java 正则表达式用新值替换值

> ID：14282097
> 
> 赞同：0
> 
> 时间：2013-01-11T16:11:16.203
> 
> 标签：java, regex

如何获取正则表达式以获取文件中**name =**之后的值，并将其替换。我有一个名为“myfile.txt”的文件。

```
public static void main(String[] args)
    File TextFile = new File("C:\\text.txt");
    if (TextFile.exists()) {
        try {
            ReplaceWordInFile(TextFile, "haical", "arnanda");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

private static void ReplaceWordInFile(File MyFile, String OldText, String NewText)
        throws IOException {

    File tempFile = File.createTempFile("filetemp", ".tmp");
    FileWriter fw = new FileWriter(tempFile);

    Reader fr = new FileReader(MyFile);
    BufferedReader br = new BufferedReader(fr);

    while (br.ready()) {
        fw.write(br.readLine().replaceAll(OldText, NewText) + "\n");
    }

    fw.close();
    br.close();
    fr.close();
    tempFile.renameTo(MyFile);
} 
```

**文件 C:\text.txt 的内容是：**

```
name = haical
address = Michigan 48309, Amerika Serikat
age = 19
gender = male
activity = school
hoby = hiking, travel 
```

如果我在第一行运行上面的程序，name = haical 将更改为 name = arnanda。

我的问题是 from 的值`name`不是 'haical' 而是另一个值，所以我想在**name = blablabla**之后获取值。

此外，有时该语句`name = haical`不会保留其空格数并更改其位置。

稍后输出的内容示例是：

```
address = Michigan 48309, Amerika Serikat
name   =    haical  
age = 19
gender = male
activity = school
hoby = hiking, travel 
```

所以它并不总是在第一行和后面的一些空格`=`，但它总是以**name =**开头。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:17:04.040

利用

```
....replaceAll("^name\\s*=\\s*" + YourNameVariableToReplace + "\\s*$", "name="+YourNameVariableToInsert) 
```

替换字符串。如果他可能包含 Regex-Control-Chars，也许您需要先转义 Name。

# math - 如何在给定坐标的圆周上找到一个点的位置（以度为单位）

> ID：14282101
> 
> 赞同：1
> 
> 时间：2013-01-11T16:11:29.863
> 
> 标签：math, coordinates, trigonometry, geometry, degrees

谁是数学天才并想检查我的数学？

我试图找到 a`point(x,y)`在圆的圆周上的位置（以度为单位）。如果我使用`x=radius*cos(Q)+xOrigin`，我最终`arccos((x/2)-xOrigin) = Q`会得到以弧度为单位的角度。然后我去`D = Q(180/Pi)`获得学位，但我总是偏离目标大约 3-5 度。

那是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:16:07.337

大多数现代编程语言都有`atan2()`某个地方，它会上升和运行，并在所有四个象限中以弧度表示角度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:17:40.197

你的 Q 公式应该是

```
Q = acos((x-xOrigin)/radius) 
```

请注意，`acos`返回 0 和 pi 之间的角度；如果角度在第三或第四象限，则需要从 2 * pi 中减去角度。

在不知道出现错误的实际值的情况下，很难判断这是否是唯一的问题。您从弧度到度的转换是正确的。

# php - 函数缩短标题

> ID：14282102
> 
> 赞同：0
> 
> 时间：2013-01-11T16:11:35.457
> 
> 标签：php, wordpress, function

我在 Wordpress 中开发，但我的 PHP 知识很少，标题只显示第一个单词，我该如何更改？这就是我认为它仅限于第一个单词的地方。

```
function ShortenTitle($title){
// Change to the number of characters you want to display
$chars_max = 100;
$chars_text = strlen($title);
$title = $title."";
$title = substr($title,0,$chars_max);
$title = substr($title,0,strrpos($title,' '));
if ($chars_title > $chars_max)
{
$title = $title."...";
}
return $title;
}
function limit_content($str, $length) {
  $str = strip_tags($str);
  $str = explode(" ", $str);
  return implode(" " , array_slice($str, 0, $length));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:13:56.470

`if ($chars_title > $chars_max)`应该`if ($chars_text > $chars_max)`

试试这个：

```
function ShortenTitle($title) {
    $title = trim($title);
    $chars_max = 100;
    if (strlen($title) > $chars_max) {
        $title = substr($title, 0, $chars_max) . "...";
    }
    return $title;
} 
```

稍微清理了一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:16:23.373

该[`trim`](http://php.net/manual/en/function.trim.php)函数从字符串的末尾删除空格，我假设这是你试图用这个做的

```
$title = substr($title,0,strrpos($title,' ')); 
```

此外，为了安全/准确，您可能应该在计算长度之前进行修剪。试试这个：

```
function ShortenTitle($title){
    // Change to the number of characters you want to display
    $chars_max = 100;
    $new_title = substr(trim($title),0,$chars_max);
    if (strlen($title) > strlen($new_title)) {
        $new_title .= "...";
    }
    return $new_title;
} 
```

# wpf - WPF绑定到混淆对象找不到属性

> ID：14282103
> 
> 赞同：0
> 
> 时间：2013-01-11T16:11:38.817
> 
> 标签：wpf, binding, spreadsheetgear

我正在尝试将 ComboBox 绑定到 SpreadsheetGear 工作表的命名单元格。

SpreadsheetGear 是一个混淆程序集，所以我的第一个猜测是。

```
<ComboBox Width="200" x:Name="comboBox" IsEditable="True" ItemsSource="{Binding Names, Mode=OneWay}">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Name}"/>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

并且视图模型属性是

```
private IWorksheet worksheet;
public IWorksheet Worksheet
{
    get { return worksheet; }
    private set { SetField(ref worksheet, value, () => Worksheet); OnPropertyChanged(() => Names); }
}
public IEnumerable<IName> Names
{
    get { return Worksheet.Names.Cast<IName>(); }
} 
```

我在输出窗口中收到以下错误

```
System.Windows.Data Error: 40 : BindingExpression path error: 'Name' property not found on 'object' ''ᜪ' (HashCode=1500138080)'. BindingExpression:Path=Name; DataItem='ᜪ' (HashCode=1500138080); target element is 'TextBlock' (Name=''); target property is 'Text' (type 'String') 
```

我试过`Worksheet.Names`直接返回，它不继承自 Enumerable 但确实提供`GetEnumerator()`. 这产生了同样的错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:15:23.680

没有更多代码，很难说，但我会随机猜测：是`IName`内部接口吗？大多数代码混淆器只会破坏`internal`//类/枚举/接口`private`...`protected`

# clojure - Clojure 1.5 中的非用户命名空间中缺少文档

> ID：14282109
> 
> 赞同：10
> 
> 时间：2013-01-11T16:11:56.267
> 
> 标签：clojure, clojure-repl

我应该怎么做才能`doc`再次可用？

```
brew install --devel leiningen
lein new app yeehaw
cd yeehaw
; edit project.clj and replace "1.4.0" with 1.5.0-RC1"
lein repl
yeehaw.core=> (doc map)
CompilerException java.lang.RuntimeException: Unable to resolve symbol: doc
in this context, compiling:(NO_SOURCE_PATH:1:1) 
```

此更改来自[CLJ-1085](http://dev.clojure.org/jira/browse/CLJ-1085)和此[相关源](https://github.com/clojure/clojure/commit/728972b026a323fc941a5d560b81d37453dc6cad)。

请注意，`doc`通常的 REPL 功能在命名空间中仍然可用`user`，但在我的应用程序的命名空间中，至少在 REPL 中时，将它放在我的指尖会很好。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T16:24:22.407

进入`doc`当前命名空间：

```
(clojure.core/use '[clojure.repl :only (doc)]) 
```

然后再试`doc`一次。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-11T16:20:30.133

感谢 clojure IRC 的帮助，这里有一些选项：

*   使用`clojure.repl/doc`而不是`doc`
*   用于`(apply require clojure.main/repl-requires)`将`doc`其他 REPL 功能带入新的命名空间。

# networking - 第 2 层交换机和 IP 地址重复

> ID：14282117
> 
> 赞同：-2
> 
> 时间：2013-01-11T16:12:17.297
> 
> 标签：networking, routing, ip, switch-statement, cisco

您好网络大师，

我有一个关于 IP 复制以及这如何影响相关交换机（第 2 层）的问题。抱歉，我没有任何资源可以测试这个。如果有人能阐明他们在这方面的经验，那就太好了。

如果我有两台服务器（Linux），比如说`A`& `B`，提供完全相同的内容，并且由于某种原因，它们都被分配了相同的 IP 地址。更具体地说，如果 A 已经有一个 address`IP.100`而 B 有另一个 address `IP.200`。现在，一切似乎都正常了，并且交换机存储了正确的 MAC 地址。如果稍后`B`也获得了 address `IP.100`，这将如何影响交换机的`ARP`缓存？什么时候`B`获得新地址，我假设它会广播 ARP？通知相关的交换机。

所以问题是，交换机是否存储两台机器的条目？还是用新的覆盖现有的？是否有任何标准行为或专有开关的反应不同？

如果没有 ARP 缓存的客户端尝试连接到 IP.100，它将被转发到哪台机器？`A`还是`B`没有？如果`A`OR `B`，我可以从客户的角度说没有中断吗？（假设这是一个静态网站，没有登录会话等）

随意指出任何相关文档。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:07:01.230

交换机将看不到任何 IP，也没有用于转发数据包的 arp 缓存，它只有 mac 地址表将 mac 映射到端口，在您的情况下，mac 将是唯一的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:31:58.903

理论上，您不应该让两台主机在同一个 IP 上通话，除非它们参与路由。例如任意演员。因为事情会破裂。

每个主机都有自己的 MAC 地址。如果交换机只进行第二层转发，那么交换机只跟踪 MAC 地址。跟踪 ARP 条目的是终端主机或路由器。

如果将 IP 100 移动到 B，那么主机将更新它们自己的 ARP 表。但是如果 A 和 B 同时有 100 个，这将导致问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-05T14:13:07.353

我实际上认为这就是多播的工作方式。
主机获得一个多播地址，所有设备共享同一个多播地址。
交换机会将 Mac 地址的集合收集到它的 mac 表中的同一个多播中。

不过我可能是错的....仍在学习。

# java - getNodeName 匹配一个 XML 节点，但 XPath 找不到它

> ID：14282126
> 
> 赞同：0
> 
> 时间：2013-01-11T16:12:50.837
> 
> 标签：java, xpath

这感觉就像一个菜鸟问题。

我正在查看一堆操作 XML DOM 的 Java 代码。（这些类是JDK 7 附带的库存等。）它有很多看起来像这样的地方`org.w3c.dom.Document`：`javax.xml.xpath.XPath`

```
String expr = "/fixed/path/through/the/hierarchy";

// actual code reuses factory instances, etc
XPath xpath = XPathFactory.newInstance().newXPath();
Node topNode = someDocumentInstance.getFirstChild();
Node node = (Node) xpath.evaluate (expr, topNode, XPathConstants.NODE);

NodeList children = node.getChildNodes();
for (int i = 0; i < children.getLength(); i++) {
    Node child = children.item(i);
    if (child.getNodeName().equalsIgnoreCase("somePrefix:someTag")) {
        // "return child;" or otherwise break out of the loop
    }
} 
```

这一切都有效。但是这个循环似乎是一项乏味的工作。如果我们已经在使用 XPath 来获取节点，为什么还要遍历该节点的子节点来寻找已知标记？

所以我尝试重写一个部分来直接获取子节点。但查询使用

```
String expr = "/fixed/path/through/the/hierarchy/somePrefix:someTag"; 
```

从不匹配任何东西。我已经尝试过请求`XPathConstants.NODESET`或等变体`.STRING`，但仍然没有结果。（无论如何，这些节点应该只有一个。）

我觉得我在这里遗漏了一些非常明显的东西，但我无法弄清楚为什么完整的查询会失败，当查询父级加上通过子级的手动循环有效时。`getNodeName()`当我使用这样的查询时，XPath 是否会测试节点的某些质量？

我想出的唯一理论是它与 XML 名称空间有关，在这个项目中没有使用。（实际上`.setNamespaceAware(false)`在 DocumentBuilderFactory 实例上有一个调用，并带有一条评论说“不要这样做，否则一切都会中断”。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:19:21.027

如果您在没有名称空间的情况下进行解析，那么您应该离开`somePrefix`您的表达式：

```
String expr = "/fixed/path/through/the/hierarchy/someTag"; 
```

这样做的原因是 XPath 对命名空间和本地名称执行匹配，*而不是*限定名称（即`getNodeName()`返回的名称）。如果您在 XPath 表达式中添加前缀，XPath 解释器将使用它从其名称空间映射中检索名称空间。由于您没有给它任何映射，这将失败。

`NODESET`此外，如果要遍历子节点，您可能想要使用。

# css - 使用 svg 作为背景的 CSS，不加载外部模式

> ID：14282127
> 
> 赞同：3
> 
> 时间：2013-01-11T16:12:53.350
> 
> 标签：css, design-patterns, svg, load

如果我把 SVG 当作一个对象，它可以正常工作（只有 chrome 上关于 mime 类型的控制台错误等）：[www.bunquer.com](http://www.bunquer.com)

我想把它当作背景，但在那种情况下，**山内的图案不会加载，为什么？** [http://bunquer.com/tests/svg/](http://bunquer.com/tests/svg/)

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:32:45.137

当 SVG 用作图像时，出于隐私原因，SVG 文件必须是自包含的。有关更多详细信息和推理，请参阅[https://bugzilla.mozilla.org/show_bug.cgi?id=628747](https://bugzilla.mozilla.org/show_bug.cgi?id=628747)。

# c# - 如何确定我们服务器上图像调整器的负担？

> ID：14282139
> 
> 赞同：1
> 
> 时间：2013-01-11T16:13:36.107
> 
> 标签：c#, asp.net, httphandler

我们需要在将大图像传递给最终用户之前将它们重新调整为更小的尺寸。（最终用户是全球性的，并且连接速度可能很慢。）主服务器，门户服务器（plumtree），为用户的浏览器生成图像链接，然后浏览器从不同的服务器（Aqualogic）请求图像。

不幸的是，AL 服务器并不总是有文件的较小副本，因为过去重新调整大小的过程是手动的，并且没有规律地发生。

为了消除手动步骤的需要，我在第三台服务器上创建了一个简单的 HttpHandler 网站，它获取请求的图像，使用 WebRequest 进入 AquaLogic 服务器并下载完整大小的图像，即时重新调整大小并然后将结果发送到请求用户的浏览器。

现在我的老板问我对第三台服务器（这是我们的生产网络服务器集群）会有什么影响。他想要关于处理负载和带宽使用的指标。我该如何衡量这个？我可以测量这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:21:11.000

如果您跟踪原始图像的大小和调整大小的图像的大小，带宽使用应该很容易估算。

有一些可用的分析工具可以帮助您确定处理负载，例如[ANTS](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)。

# regex - 正则表达式 regexp - 字符范围、单词边界、断言

> ID：14282140
> 
> 赞同：0
> 
> 时间：2013-01-11T16:13:43.813
> 
> 标签：regex, word, expression, boundary

一个非常快速的问题。

这是表达式：

```
/[a-zA-Z]{1,}/ 
```

我希望这个表达式只匹配那些字母。但它似乎也匹配“=”（等号）。难道我做错了什么？

例如：

```
/\B#{1}(__){1}(F|OB){1}_{1}([a-zA-Z]{1,})={1}\B/ 
```

this应该匹配：`#__OB_someText=` 问题是它也匹配 this:`#__OB_someText==`或者 this`#__OB_someText====2` 等号应该只出现一次。

我可能不太了解这些断言：`\b \B`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:20:44.527

`\B``=`代表 NON word boundary，和之间没有非字边界`=`

改用这个正则表达式：

```
/\B#(__)(F|OB)_([a-zA-Z]+)=[^=]/ 
```

`{1}`可以省略

`{1,}`是相同的`+`

`[^=]`表示任何不是`=`

# php - 如何在我的自定义字段 wordpress 中使用 [短代码]

> ID：14282141
> 
> 赞同：2
> 
> 时间：2013-01-11T16:13:50.957
> 
> 标签：php, wordpress, shortcode

我有一个自定义 wordpress `post.php`，特定类别中的所有帖子都将使用此模板。在几乎每篇文章中都会有滚动推荐，为了处理这个问题，我使用了一个图层滑块。

在页面中，我有一个自定义的推荐字段，其中填充了类似`[layreslider id="2"]` 在我的 php 文件中的内容：

```
<div class="trips-testimonials">
    <?php do_shortcode(get_post_meta($post->ID, 'testimonial', true)); ?>
</div> 
```

这似乎无济于事。如果我在 PHP 中添加回声：

```
<?php echo do_shortcode(get_post_meta($post-ID, 'testimonial', true)); ?> 
```

我得到的输出`[layreslider id="2"]`

这是一个示例页面，照片下方的蓝色框是滑块应显示的位置。 [http://www.ct-social.com/ctsdev/aff/capri/](http://www.ct-social.com/ctsdev/aff/capri/)

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:49:09.443

看起来你错过了帖子 ID 中的 > 所以它应该是

```
<?php do_shortcode(get_post_meta($post->ID, 'testimonial', true)); ?> 
```

此外，您可能需要调用 global $post; 如果在循环之外。

# tree - 评估同质 AST 中的 IF 子树

> ID：14282143
> 
> 赞同：2
> 
> 时间：2013-01-11T16:13:54.953
> 
> 标签：tree, antlr, antlr3, abstract-syntax-tree

我正在为同质 AST（所有节点都具有相同的类）构建一个 tree walker，评估 if 语句的正确方法是什么？

我的 if AST 是这样的： ![在此处输入图像描述](../Images/f9fdf689837c3d9db31adb4e11016bba.png)

我会在解析一个`IF`块时按顺序评估他的`CONDBLOCK`孩子，如果其中一个为真，则树行者不会评估其余的。

更清楚地说，我的树行者是这样的：

```
ifStat       : ^(IF { jump=false; } condition* defcond?) 
condition    : { if (jump) return retval; } ^(CONDBLOCK exp block) { jump=$exp.value; }
defcond      : ^(DEFAULT block) 
```

我的问题是，如果在示例`$op=+`中必须执行第一个`CONDBLOCK`，我不想评估其他任何内容，我想执行第一个`CODEBLOCK`并在我的 AST 树中向上评估`if`.

现在我已经用一个标志和一个签入`condition`规则来实现它，如果标志为真则返回（这意味着另一个块已经被执行）。

但`return retval;`完全停止执行，我只想上升而不评估剩余条件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T21:34:10.257

来自 AST 的任何涉及分支或跳转的运行时评估都可能会变得丑陋。您可能需要考虑将 AST 转换为一系列更常规的操作并按顺序执行它们。这是一个额外的步骤，但它会让你摆脱这样的困境，我认为它比 AST 评估器更容易验证和调试。

有了这个，这是一种跳过评估后续规则`condition`和`defcond`规则的方法。我坚持您的结构，这意味着评估有两个不同的阶段：匹配阶段 ( `exp`) 和执行阶段 ( `block`)。这只值得注意，因为阶段是在子图的不同部分处理的，并且没有自然的跳转方式，因此需要在整个`if`语句中跟踪它们。

这是一个简单的类来管理跟踪单个`if`评估：

```
class Evaluation {
    boolean matched = false;
    boolean done = false;
} 
```

当`matched`为真和`done`假时，下一个`block`被执行。执行后，`done`设置为true。当`matched`和`done`都为真时，语句`block`的其余部分不再执行 s 。`if`

以下是处理此问题的树解析器规则：

```
ifStat       
@init { Evaluation eval = new Evaluation(); }
             : ^(IF condition[eval]* defcond[eval]?) 
             ;

condition [Evaluation eval]
             : ^(CONDBLOCK exp {if ($exp.value) eval.matched = true;} evalblock[eval])
             ;

defcond [Evaluation eval] 
             : ^(DEFAULT {eval.matched = true;} evalblock[eval]) //force a match
             ;

evalblock [Evaluation eval]     
             : {eval.matched && !eval.done}? //Only do this when a condition is matched but not yet executed
                block                //call the execution code
                {eval.done = true;}  //evaluation is complete.
             | ^(CODEBLOCK .*)  //read the code subgraph (nothing gets executed)                
             ; 
```

* * *

以下是我用来测试的语法和代码：

### TreeEvaluator.g（组合语法生成 AST）

```
grammar TreeEvaluator;

options { 
    output = AST;
}

tokens { 
    CONDBLOCK;
    CODEBLOCK;
    DEFAULT;
}

compilationUnit : condition+ EOF;
condition   : cif elif* celse? -> ^(IF cif elif* celse?);
cif         : IF expr block -> ^(CONDBLOCK expr block);
elif        : ELIF expr block -> ^(CONDBLOCK expr block);
celse       : ELSE block -> ^(DEFAULT block); 
expr        : ID EQ^ ID;
block       : LCUR ID RCUR -> ^(CODEBLOCK ID);

IF  : 'if';
ELIF: 'elif';
ELSE: 'else';
LCUR: '{';
RCUR: '}';
EQ  : '==';
ID  : ('a'..'z'|'A'..'Z')+;
WS  : (' '|'\t'|'\f'|'\r'|'\n')+ {skip();}; 
```

### AstTreeEvaluatorParser.g（树解析器）

```
tree grammar AstTreeEvaluatorParser;

options { 
    output = AST;
    tokenVocab = TreeEvaluator;
    ASTLabelType = CommonTree;
}

@members { 
    private static final class Evaluation {
        boolean matched = false; 
        boolean done = false;
    }

    private java.util.HashMap<String, Integer> vars = new java.util.HashMap<String, Integer>();

    public void addVar(String name, int value){
        vars.put(name, value);
    }

}

compilationUnit : ifStat+;

ifStat       
@init { Evaluation eval = new Evaluation(); }
             : ^(IF condition[eval]* defcond[eval]?) 
             ;

condition [Evaluation eval]
             : ^(CONDBLOCK exp {if ($exp.value) eval.matched = true;} evalblock[eval])
             ;

defcond [Evaluation eval] 
             : ^(DEFAULT {eval.matched = true;} evalblock[eval]) //force a match
             ;

evalblock [Evaluation eval]     
             : {eval.matched && !eval.done}? //Only do this when a condition is matched but not finished 
                block                //call the execution code
                {eval.done = true;}  //evaluation is complete.
             | ^(CODEBLOCK .*)  //read the code node and continue without executing
             ;

block        : ^(CODEBLOCK ID) {System.out.println("Executed " + $ID.getText());};

exp returns [boolean value]
            : ^(EQ lhs=ID rhs=ID)
                {$value = vars.get($lhs.getText()) == vars.get($rhs.getText());}
            ; 
```

### TreeEvaluatorTest.java（测试代码）

```
public class TreeEvaluatorTest {

    public static void main(String[] args) throws Exception {
        CharStream input = new ANTLRStringStream("if a == b {b} elif a == c {c} elif a == d {d} else {e}");
        TreeEvaluatorLexer lexer = new TreeEvaluatorLexer(input);
        CommonTokenStream tokens = new CommonTokenStream(lexer);

        TreeEvaluatorParser parser = new TreeEvaluatorParser(tokens);

        TreeEvaluatorParser.compilationUnit_return result = parser.compilationUnit();

        if (lexer.getNumberOfSyntaxErrors() > 0 || parser.getNumberOfSyntaxErrors() > 0){
            throw new Exception("Syntax Errors encountered!");
        }

        AstTreeEvaluatorParser tparser = new AstTreeEvaluatorParser(new CommonTreeNodeStream(result.getTree()));
        tparser.addVar("a", 0);
        tparser.addVar("b", 2);
        tparser.addVar("c", 3);
        tparser.addVar("d", 4);
        AstTreeEvaluatorParser.compilationUnit_return tresult = tparser.compilationUnit();

    }
} 
```

测试代码评估`if a == b {b} elif a == c {c} elif a == d {d} else {e}`. `{}`如果评估，则打印 s之间的 id 。所以如果`a == b`是真的，那么`"Executed b"`将被打印出来。

变量值是通过调用来分配的`tparser.addVar(...)`。在这种情况下，`a`不等于任何其他变量，因此块`{e}`被评估。

# php - 使用 PHP 从 MIME 编码的电子邮件中删除签名

> ID：14282150
> 
> 赞同：2
> 
> 时间：2013-01-11T16:14:17.710
> 
> 标签：php, email, pear, pop3, email-parsing

我正在使用[imap从 pop3 服务器读取邮件，并使用使用 PEAR](http://uk3.php.net/manual/en/book.imap.php) [Mimedecode](http://codepad.org/LZNtORlT)的 mailparse 类对它们进行解码。

我想知道是否有任何方法可以获得签名或只是将其从邮件正文中删除。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T17:17:02.210

签名是正文的一部分，所以不，实际上没有办法只删除签名，除非您知道每个签名都将具有完全相同的格式。

如果你知道每个签名都会出现在 10 个连字符之后，就像这样

```
Lorem ipsum lorem ispum.Lorem ipsum lorem ispum.Lorem ipsum lorem ispum.
Lorem ipsum lorem ispum.Lorem ipsum lorem ispum.
----------
Your Name 
```

如果是这种情况，那么你可以这样做

```
$message = explode('----------', $body); 
```

$message[0] 是正文，$message[1] 是签名。

# yii - Yii 多对多储蓄问题

> ID：14282152
> 
> 赞同：0
> 
> 时间：2013-01-11T16:14:23.237
> 
> 标签：yii, yii-extensions

我无法保存多对多关系。我的数据库架构如下：-

```
articles
- id (PK)
- content

tags
- id (PK)
- name

article_tag
- article_id (PK)
- tag_id (PK) 
```

我的文章模型具有以下关系：-

```
'tags' => array(self::MANY_MANY, 'Tag', 'article_tag(tag_id, article_id)'), 
```

但是，当我看到使用 Yii 行为时，我收到以下错误：-

```
Table "tags" does not have a column named "article_tag(tag_id, article_id)". 
```

我已经完成了从模式到关系的所有事情，但我似乎无法找出问题所在。我也尝试过使用其他扩展，但它们似乎都没有保存到 m:n 表中。

我在这里错过了什么吗？

**附加信息**

这是我的 CManyManyRelation 对象；foreignKey 看起来不正确。

```
CManyManyRelation Object ( [limit] => -1 [offset] => -1 [index] => [through] => [joinType] => LEFT OUTER JOIN [on] => [alias] => [with] => Array ( ) [together] => [scopes] => [name] => tags [className] => Tag [foreignKey] => restaurant_tag(restaurant_id, tag_id) [select] => * [condition] => [params] => Array ( ) [group] => [join] => [having] => [order] => [_e:CComponent:private] => [_m:CComponent:private] => ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:22:16.053

在类的多对多关系中，`Article`您应该首先放置文章的 id，然后是标签的 id：

```
'tags' => array(self::MANY_MANY, 'Tag', 'article_tag(article_id, tag_id)'), 
```

然后在课堂上`Tag`你应该有：

```
'articles' => array(self::MANY_MANY, 'Article', 'article_tag(tag_id, article_id)'), 
```

编辑：我的错我没有意识到它正在保存导致问题的相关模型。Yii 中没有内置的保存相关记录的可能性

对我来说，保存相关模型的最佳解决方案是扩展[activerecord-relation-behavior](http://www.yiiframework.com/extension/activerecord-relation-behavior/)。该扩展将处理所有的 HAS_MANY 和 MANY_MANY 关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:59:44.147

我一直在使用 yii-manymanyactiverecord 扩展来帮助简化流程，你可以在这里找到它：[http ://www.yiiframework.com/extension/yii-manymanyactiverecord/](http://www.yiiframework.com/extension/yii-manymanyactiverecord/)

# java - 父类组件上的 CRUD 操作的接口/设计模式

> ID：14282156
> 
> 赞同：0
> 
> 时间：2013-01-11T16:14:34.920
> 
> 标签：java, spring, design-patterns, interface, wsdl

我有一个从 WSDL 生成的父类 ProcessDefinition。它有十几个组件类。我的要求是：

*   从数据库中提取现有定义
*   将新定义插入数据库
*   更新数据库中的现有定义（可能需要对定义的组件进行插入、更新、删除）
*   从数据库中删除定义

提取很容易，因为我检查数据库是否存在每个组件，如果存在则添加到定义中。为此，我打算使用带有方法的接口

```
public interface ComponentDAO 
{
 public void addComponentToDefinition(ProcessDefinition definition, String   environmentName);
} 
```

我将为每个组件提供一个实现，如果存在，它将从数据库中提取其组件信息，创建所需的类并将其设置在定义中。

在春天，我将配置该接口的列表并插入每个实现，然后在我的主 DAO 类中，我可以执行以下操作

```
ProcessDefinition definition = new ProcessDefinition()
definition.setProcessID(someID);
for (ComponentDAO c: this.getComponentDAOs)
{
  c.addComponentToDefinition(definition);
} 
```

这很容易扩展，如果我添加一个新组件，我不需要接触任何现有的类。但是在更新组件或创建新组件时，我需要知道组件类，即

```
public void update(ProcessComponentA component, String   environmentName);
public void update(ProcessComponentB component, String   environmentName); 
```

使用泛型，我可以将接口定义为

```
public interface ComponentDAO<T>
{
 public void addComponentToDefinition(ProcessDefinition definition, String   environmentName);
 public void updateComponent(T component);
} 
```

这使 ComponentDAO 实现保持干净，但是在调用接口的主类中，我必须以原始类型定义 ComponentDAO 列表，不需要类型转换，但编译器无法进行完整的类型检查并导致有关参数化的警告原始类型。

是否有我应该为此使用的设计模式？假设我忽略了休眠或任何其他 ORM 框架。

# android - 如何实现 CordovaInterface 以便我可以在 webview 中使用相机？

> ID：14282159
> 
> 赞同：4
> 
> 时间：2013-01-11T16:14:39.397
> 
> 标签：android, cordova, android-webview, android-camera

我是安卓新手。

[我按照教程](http://docs.phonegap.com/en/2.3.0/guide_cordova-webview_android.md.html#Embedding%20Cordova%20WebView%20on%20Android)`WebView`在我的 Android 应用程序中嵌入了 Cordova 。

我已经使用`CordovaWebView`.

假设我在那个网页上有一个名为“Capture Photo”的按钮，我应该怎么做才能调用本地 API 才能使用相机？

本教程建议我需要按`CordovaInterface`以下方式实现使用相机。

```
@Override
public void setActivityResultCallback(CordovaPlugin plugin) {
    this.activityResultCallback = plugin;        
} 
```

我不知道**activityResultCallback**到底是什么。是否有另一个教程向我展示如何实现此接口？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T17:29:30.997

因为没有人回答我的问题。

我找到了可以解决这个问题的[教程。](http://www.infil00p.org/advanced-tutorial-using-cordovawebview-on-android/)

更新：鉴于链接已损坏，我将发布我自己的代码来实现 Cordova 接口。

```
// Instance for CordovaInterface
private final ExecutorService threadPool = Executors.newCachedThreadPool();
private boolean mAlternateTitle = false;
private boolean bound;
private boolean volumeupBound;
private boolean volumedownBound;
private CordovaPlugin activityResultCallback;
private Object activityResultKeepRunning;
private Object keepRunning;

public Activity getActivity() {
    return this;
}

@Deprecated
public Context getContext() {
    return this;
}

public ExecutorService getThreadPool() {
    return threadPool;
}

public void setActivityResultCallback(CordovaPlugin plugin) {
    this.activityResultCallback = plugin;

}

public void startActivityForResult(CordovaPlugin command, Intent intent, int requestCode) {
    this.activityResultCallback = command;
    this.activityResultKeepRunning = this.keepRunning;

    // If multitasking turned on, then disable it for activities that return
    // results
    if (command != null) {
        this.keepRunning = false;
    }

    // Start activity
    super.startActivityForResult(intent, requestCode);

}

@Override
protected void onActivityResult(final int requestCode, final int resultCode, final Intent intent) {
    super.onActivityResult(requestCode, resultCode, intent);
    final CordovaPlugin callback = this.activityResultCallback;
    if (callback != null) {
        // Need to use background thread
        this.getThreadPool().execute(new Runnable() {
            public void run() {
                callback.onActivityResult(requestCode, resultCode, intent);
            }
        });
    }
} 
```

# sql - 从存储价格历史的 sql 表中提取数据

> ID：14282160
> 
> 赞同：0
> 
> 时间：2013-01-11T16:14:42.300
> 
> 标签：sql

我一直在试图弄清楚如何从 sql 表中提取数据，该表包含库存中物品价格变化的历史记录。数据布局示例如下：

```
Item No   Date changed   Price
1         11/20/2012     15
2         11/28/2012     25
1         12/1/2012      18 
```

我需要为每个项目拉出最后一个条目，这样我才能找到价格变化超过一定百分比的地方。一旦我得到所有信息，但我不确定如何只提取每个项目的最后两个更新。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:26:55.617

简单地按日期排序并准确检索每个 id 的两行。

`SELECT Price FROM table WHERE id=2 ORDER BY date_changed DESC LIMIT 0,2`

这是最后两次价格变动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:11:01.783

这就是我让它工作的方式。创建表##inventoryitems (ID INT Identity(1,1),itemno char(11));

插入 ##inventoryitems 从 InventoryActPkgCostHist 中选择不同的 itemno，其中 LocID=3

创建表 ##temptable (item# char(11),changedate datetime,price numeric(8,2));

DECLARE @Counter INT SET @Counter = 1 而@Counter<=(select COUNT(*) from ##inventoryitems)

开始插入 ##temptable 选择前 2 个 i.itemno,i.ActPkgCostDate,i.ActPkgCost 从 InventoryActPkgCostHist 我加入 ##inventoryitesm temp on i.itemno= temp.itemno where temp.id=@Counter and locidd=3 order by itemno ,ActPkgCostDate desc

设置@Counter=@Counter+1

结尾

谢谢大家的帮助

# java - 确保用户的浏览器检索到 css、js 和图像的新副本

> ID：14282162
> 
> 赞同：0
> 
> 时间：2013-01-11T16:14:45.863
> 
> 标签：java, apache, tomcat, spring-mvc

我们正在运行一个 Java/Spring MVC 应用程序，其中 Tomcat 6 作为 servlet 容器，Apache 2.2 作为 Web 服务器。

我们最近部署了一个全新的品牌重塑，彻底改变了网站的外观和感觉。

我们将 ?v=1 参数附加到 head 部分的资源中，但我们仍然遇到一些导致问题的旧缓存资源问题。

我们可以在 tomcat 或 apache 中设置什么来确保提取新副本，还是我们需要使用修订号来强制客户端获取新版本的资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:00:51.853

您可以尝试使用元标记，如下所示：

```
<meta http-equiv="Expires" content="Mon, 26 Jul 1997 05:00:00 GMT" />
<meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate">
<meta http-equiv="Pragma" content="no-cache"> 
```

但是，我意识到 IE9 似乎在我的一个 Web 项目中忽略了这些元标记。所以，我没有使用元标记，而是在 url 上附加了一些随机数，比如`?v=1235324324`......你可以使用`Math.random()`or `Date.getTime()`，基本上是独一无二的。您要确保`v`每次的值都不同，而不是一直使用值`1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:19:59.447

AFAIK 如果没有开发人员工具，就无法禁用浏览器缓存。

虽然，您可以通过 webapp 本身的 HTTP 标头禁用浏览器缓存。对于任何 2000 年后的浏览器，仅 HTTP 1.1“Cache-Control”标头就足够了。但是为了提供额外的保护，服务器可以同时发出[HTTP 1.1 "Cache-Control" 和 HTTP 1.0 "Expires" 标头](http://www.mnot.net/cache_docs/#EXPIRES)。

# sql - 选择后更新列

> ID：14282163
> 
> 赞同：0
> 
> 时间：2013-01-11T16:14:47.970
> 
> 标签：sql, select, procedure

我有一个 MS SQL 存储过程 (SP)：

```
SELECT *  
FROM tblA  
WHERE stateID = 1  
ORDER BY DateTime DESC 
```

仍在同一个 SP 中，如何更新 SELECT 语句返回的每一行的 stateID 列？SP 仍然从 SELECT 语句返回行。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:40:44.063

如果您在返回的结果中有唯一标识符，则可以这样做。

```
UPDATE tblA SET stateID = 2 WHERE download_id in (select download_id from FROM tblA  
WHERE stateID = 1  
ORDER BY DateTime DESC) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:17:39.093

你可以这样做，因为这将返回相同的行

```
update tblA
set col = value  
WHERE stateID = 1 
```

# java - 异常读取 XLSB 文件 Apache POI java.io.CharConversionException

> ID：14282164
> 
> 赞同：6
> 
> 时间：2013-01-11T16:14:49.077
> 
> 标签：java, excel, apache-poi, sax, xlsb

我正在开发一个使用 Apache POI 读取 excel xlsb 文件的 Java 应用程序，但是在读取它时出现异常，我的代码如下：

```
import java.io.IOException;
import java.io.InputStream;

import org.apache.poi.xssf.eventusermodel.XSSFReader;
import org.apache.poi.xssf.model.SharedStringsTable;
import org.apache.poi.xssf.usermodel.XSSFRichTextString;
import org.apache.poi.openxml4j.exceptions.InvalidFormatException;
import org.apache.poi.openxml4j.exceptions.OpenXML4JException;
import org.apache.poi.openxml4j.opc.Package;
import org.xml.sax.Attributes;
import org.xml.sax.ContentHandler;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
import org.xml.sax.XMLReader;
import org.xml.sax.helpers.DefaultHandler;
import org.xml.sax.helpers.XMLReaderFactory;

import java.util.Iterator;

public class Prueba {

    public static void main (String [] args){

        String direccion = "C:/Documents and Settings/RSalasL/My Documents/New Folder/masstigeoct12.xlsb";

        Package pkg;
        try {
            pkg = Package.open(direccion);
            XSSFReader r = new XSSFReader(pkg);
            SharedStringsTable sst = r.getSharedStringsTable();

            XMLReader parser = fetchSheetParser(sst);

            Iterator<InputStream> sheets = r.getSheetsData();
            while(sheets.hasNext()) {
                System.out.println("Processing new sheet:\n");
                InputStream sheet = sheets.next();
                InputSource sheetSource = new InputSource(sheet);
                parser.parse(sheetSource);
                sheet.close();
                System.out.println("");
            }

        } catch (InvalidFormatException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (OpenXML4JException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    public void processAllSheets(String filename) throws Exception {
        Package pkg = Package.open(filename);
        XSSFReader r = new XSSFReader( pkg );
        SharedStringsTable sst = r.getSharedStringsTable();

        XMLReader parser = fetchSheetParser(sst);

        Iterator<InputStream> sheets = r.getSheetsData();
        while(sheets.hasNext()) {
            System.out.println("Processing new sheet:\n");
            InputStream sheet = sheets.next();
            InputSource sheetSource = new InputSource(sheet);
            parser.parse(sheetSource);
            sheet.close();
            System.out.println("");
        }
    }

    public static XMLReader fetchSheetParser(SharedStringsTable sst) throws SAXException {
        XMLReader parser =
            XMLReaderFactory.createXMLReader(
                    "org.apache.xerces.parsers.SAXParser"
            );
        ContentHandler handler = new SheetHandler(sst);
        parser.setContentHandler(handler);
        return parser;
    }

    private static class SheetHandler extends DefaultHandler {
        private SharedStringsTable sst;
        private String lastContents;
        private boolean nextIsString;

        private SheetHandler(SharedStringsTable sst) {
            this.sst = sst;
        }

        public void startElement(String uri, String localName, String name,
                Attributes attributes) throws SAXException {
            // c => cell
            if(name.equals("c")) {
                // Print the cell reference
                System.out.print(attributes.getValue("r") + " - ");
                // Figure out if the value is an index in the SST
                String cellType = attributes.getValue("t");
                if(cellType != null && cellType.equals("s")) {
                    nextIsString = true;
                } else {
                    nextIsString = false;
                }
            }
            // Clear contents cache
            lastContents = "";
        }

        public void endElement(String uri, String localName, String name)
                throws SAXException {
            // Process the last contents as required.
            // Do now, as characters() may be called more than once
            if(nextIsString) {
                int idx = Integer.parseInt(lastContents);
                lastContents = new XSSFRichTextString(sst.getEntryAt(idx)).toString();
            nextIsString = false;
            }

            // v => contents of a cell
            // Output after we've seen the string contents
            if(name.equals("v")) {
                System.out.println(lastContents);
            }
        }

        public void characters(char[] ch, int start, int length)
                throws SAXException {
            lastContents += new String(ch, start, length);
        }
    }

} 
```

例外是：

```
java.io.CharConversionException: Characters larger than 4 bytes are not supported: byte 0x83 implies a length of more than 4 bytes
    at org.apache.xmlbeans.impl.piccolo.xml.UTF8XMLDecoder.decode(UTF8XMLDecoder.java:162)
    at org.apache.xmlbeans.impl.piccolo.xml.XMLStreamReader$FastStreamDecoder.read(XMLStreamReader.java:762)
    at org.apache.xmlbeans.impl.piccolo.xml.XMLStreamReader.read(XMLStreamReader.java:162)
    at org.apache.xmlbeans.impl.piccolo.xml.PiccoloLexer.yy_refill(PiccoloLexer.java:3474)
    at org.apache.xmlbeans.impl.piccolo.xml.PiccoloLexer.yylex(PiccoloLexer.java:3958)
    at org.apache.xmlbeans.impl.piccolo.xml.Piccolo.yylex(Piccolo.java:1290)
    at org.apache.xmlbeans.impl.piccolo.xml.Piccolo.yyparse(Piccolo.java:1400)
    at org.apache.xmlbeans.impl.piccolo.xml.Piccolo.parse(Piccolo.java:714)
    at org.apache.xmlbeans.impl.store.Locale$SaxLoader.load(Locale.java:3439)
    at org.apache.xmlbeans.impl.store.Locale.parseToXmlObject(Locale.java:1270)
    at org.apache.xmlbeans.impl.store.Locale.parseToXmlObject(Locale.java:1257)
    at org.apache.xmlbeans.impl.schema.SchemaTypeLoaderBase.parse(SchemaTypeLoaderBase.java:345)
    at org.openxmlformats.schemas.spreadsheetml.x2006.main.WorkbookDocument$Factory.parse(Unknown Source)
    at org.apache.poi.xssf.eventusermodel.XSSFReader$SheetIterator.<init>(XSSFReader.java:207)
    at org.apache.poi.xssf.eventusermodel.XSSFReader$SheetIterator.<init>(XSSFReader.java:166)
    at org.apache.poi.xssf.eventusermodel.XSSFReader.getSheetsData(XSSFReader.java:160)
    at EDManager.Prueba.main(Prueba.java:36) 
```

该文件有 2 张，一张 329 行 3 列，另一张 566 行 3 列，我只想读取文件以查找第二张表中是否有值。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T20:27:15.937

Apache POI 不支持将 .xlsb 文件格式用于文本提取以外的任何内容。Apache POI 很乐意提供完整的读取或写入支持 .xls 文件（通过 HSSF）和 .xlsx 文件（通过 XSSF），或两者（通过通用 SS UserModel 接口）。

但是，生成操作不支持 .xlsb 格式 - 这是两者之间非常奇怪的混合体，涉及的大量工作意味着没有人愿意自愿/赞助所需的工作。

从 Apache POI 3.15 beta3 / 3.16 开始，Apache POI 为 .xlsb 提供的是[.xlsb 文件的文本提取器 - XSSFBEventBasedExcelExtractor](http://poi.apache.org/apidocs/org/apache/poi/xssf/extractor/XSSFBEventBasedExcelExtractor.html)。您可以使用它从文件中获取文本，或者通过一些调整将其转换为 CSV 之类的内容

要获得完整的读/写支持，您需要将文件转换为 .xls（如果它没有非常多的行/列）或 .xlsx（如果有）。如果您真的很想提供帮助，您可以查看[XSSFBEventBasedExcelExtractor 的源代码](https://svn.apache.org/repos/asf/poi/trunk/src/ooxml/java/org/apache/poi/xssf/extractor/XSSFBEventBasedExcelExtractor.java)，然后尝试贡献补丁以添加对 POI 的全面支持！

（此外，我认为您的特定 .xlsb 文件部分损坏的例外情况，但即使不是，Apache POI 仍然不支持除文本提取之外的任何其他内容，抱歉）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-13T12:46:48.967

我曾尝试使用 Apache POI 读取 XLSB 文件，它是成功的。下面是我使用的代码片段。

```
import org.apache.poi.openxml4j.exceptions.InvalidFormatException;
import org.apache.poi.openxml4j.exceptions.OpenXML4JException;
import org.apache.poi.openxml4j.opc.OPCPackage;
import org.apache.poi.ss.usermodel.DataFormatter;
import org.apache.poi.xssf.binary.XSSFBSharedStringsTable;
import org.apache.poi.xssf.binary.XSSFBSheetHandler;
import org.apache.poi.xssf.binary.XSSFBStylesTable;
import org.apache.poi.xssf.eventusermodel.XSSFBReader;
import org.xml.sax.SAXException;

import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.List;

public class ApachePoiXLSB {

    public static void main (String [] args){

        String xlsbFileName = "test.xlsb";

        OPCPackage pkg;

        try {
            pkg = OPCPackage.open(xlsbFileName);
            XSSFBReader r = new XSSFBReader(pkg);
            XSSFBSharedStringsTable sst = new XSSFBSharedStringsTable(pkg);
            XSSFBStylesTable xssfbStylesTable = r.getXSSFBStylesTable();
            XSSFBReader.SheetIterator it = (XSSFBReader.SheetIterator) r.getSheetsData();

            List<String> sheetTexts = new ArrayList<>();
            while (it.hasNext()) {
                InputStream is = it.next();
                String name = it.getSheetName();
                TestSheetHandler testSheetHandler = new TestSheetHandler();
                testSheetHandler.startSheet(name);
                XSSFBSheetHandler sheetHandler = new XSSFBSheetHandler(is,
                        xssfbStylesTable,
                        it.getXSSFBSheetComments(),
                        sst, testSheetHandler,
                        new DataFormatter(),
                        false);
                sheetHandler.parse();
                testSheetHandler.endSheet();
                sheetTexts.add(testSheetHandler.toString());
            }
            System.out.println("output text:"+sheetTexts);

        } catch (InvalidFormatException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (OpenXML4JException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}

import org.apache.poi.xssf.eventusermodel.XSSFSheetXMLHandler;
import org.apache.poi.xssf.usermodel.XSSFComment;

class TestSheetHandler implements XSSFSheetXMLHandler.SheetContentsHandler {

        private final StringBuilder sb = new StringBuilder();

        public void startSheet(String sheetName) {
            sb.append("<sheet name=\"").append(sheetName).append(">");
        }

        public void endSheet() {
            sb.append("</sheet>");
        }

        @Override
        public void startRow(int rowNum) {
            sb.append("\n<tr num=\"").append(rowNum).append(">");
        }

        @Override
        public void endRow(int rowNum) {
            sb.append("\n</tr num=\"").append(rowNum).append(">");
        }

        @Override
        public void cell(String cellReference, String formattedValue, XSSFComment comment) {
            formattedValue = (formattedValue == null) ? "" : formattedValue;
            if (comment == null) {
                sb.append("\n\t<td ref=\"").append(cellReference).append("\">").append(formattedValue).append("</td>");
            } else {
                sb.append("\n\t<td ref=\"").append(cellReference).append("\">")
                        .append(formattedValue)
                        .append("<span type=\"comment\" author=\"")
                        .append(comment.getAuthor()).append("\">")
                        .append(comment.getString().toString().trim()).append("</span>")
                        .append("</td>");
            }
        }

        @Override
        public void headerFooter(String text, boolean isHeader, String tagName) {
            if (isHeader) {
                sb.append("<header tagName=\"").append(tagName).append("\">").append(text).append("</header>");
            } else {
                sb.append("<footer tagName=\"").append(tagName).append("\">").append(text).append("</footer>");

            }
        }

        @Override
        public String toString() {
            return sb.toString();
        }
    } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-11-30T15:56:08.903

我有一个使用[smartxls](http://www.smartxls.com/)的实现，我的代码首先将 xlsb 转换为 xlsx，之后可以使用 ApachePoi。下一个方法接收 java.io.File 并验证其扩展名是否为 xlsb 并将其转换为 xlsx 并将文件替换为新文件。这对我有用。

```
private void processXLSBFile(File file) {
    WorkBook workBook = new WorkBook();
    String filePath = file.getAbsolutePath();
    if (FilenameUtils.getExtension(filePath).equalsIgnoreCase((Static.XLSB_EXT))) {
        try {
            workBook.readXLSB(new java.io.FileInputStream(filePath));
            filePath = filePath.replaceAll("(?i)".concat(Static.XLSB),
                    Static.XLSX_EXT.toLowerCase());
            workBook.writeXLSX(new java.io.FileOutputStream(filePath));
            final File xlsb = new File(filePath);
            file = xlsb;
        } catch (Exception e) {
            logger.error(e.getMessage(), e);
            MensajesJSFUtil
                    .mostrarMensajeNegocio(new GTMException(e, ClaveMensaje.COMANDAS_ADJUNTAR_XLSBFILE_READERROR));
        }
    }
} 
```

# javascript - pprvent 脚本匹配 url

> ID：14282172
> 
> 赞同：0
> 
> 时间：2013-01-11T16:15:13.987
> 
> 标签：javascript, jquery, html

我试图阻止脚本在某些页面上触发。有没有一种方法可以通过从 url 读取字符串并防止函数加载到这些特定页面中来做到这一点。真的有可能吗？我想在所有 otehr 页面中运行脚本，并且脚本包含在模板级别

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:17:38.907

不要通过页面 URL 进行操作。相反，为脚本应该（或不应该）运行的页面添加一个类`<html>`，并让它在做任何事情之前检查它。

所以：

```
<html class='dont-run-script'> 
```

然后脚本可以以此为基础：

```
if (!$('body').is('.dont-run-script *')) {
  // all the code
} 
```

（显然代码不应该在加载主体之前运行，所以它应该在最后导入，否则代码应该在“就绪”或“加载”处理程序中。）

# php - 正则表达式匹配PHP中的两个不同字符串

> ID：14282173
> 
> 赞同：0
> 
> 时间：2013-01-11T16:15:16.737
> 
> 标签：php, expression

**如何查找所有包含`hello`.`English`并以 . 结尾的文件名`.apk`。**

我目前有一个正则表达式，用于查找包含`hello`并以`.apk`.

```
preg_match('/.*hello.*\.apk$/i', $filename); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:38:24.223

你可以用正则表达式来做到这一点，但你最终会得到丑陋/复杂/难以辨认的表达式。而是将更简单的条件与逻辑运算符结合使用：

```
if (strpos($filename, 'hello') !== 0 && strpos($filename, 'English') !== 0 && substr($filename, -4) === '.apk') {
    // filename matches
} 
```

PHP 缺乏标准的字符串函数，比如`contains()`or`starts|endsWith()`使得上面的代码有点难看，但是没有什么能阻止你创建一个帮助器、实用程序类：

```
class StringHelper {
    private $subject;

    public function __construct($subject) {
        $this->subject = $subject;
    }

    public function contains($substring) {
        return strpos($this->subject, $substring) !== false;
    }

    public function endsWith($string) {
        return substr($this->subject, strlen($string) * -1) === $string;
    }
} 
```

然后你`if`变得更加简单：

```
$filename = new StringHelper($filename);

if ($filename->contains('hello') && $filename->contains('English') && $filename->endsWith('.apk')) {
    // matches
} 
```

**提示：**`StringHelper`您可以使用`StringUtilis`带有一堆静态方法的“经典”类而不是创建对象，这些静态方法接受`$string`作为它们的第一个参数。

**提示：** `StringHelper::contains()`可以接受一个字符串数组并检查您的字符串是否包含它们全部或至少一个（取决于第二个参数中给出的某种标志）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:20:02.560

如果您在文件名中需要“he​​llo”或“English”，这个正则表达式应该可以解决问题：

`/.*(hello|English).*\.apk$/`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T16:20:47.290

如果“英语”必须在“你好”之后：

```
if(preg_match('/.*hello.*English.*\.apk$/i', $filename)); 
```

如果它们可以按任何顺序排列：

```
if(preg_match('/(hello.*English|English.*hello).*\.apk$/i', $filename)); 
```

# ruby-on-rails-3 - rake jobs:work 每次我启动我的服务器？

> ID：14282185
> 
> 赞同：0
> 
> 时间：2013-01-11T16:16:11.673
> 
> 标签：ruby-on-rails-3, delayed-job

我正在使用延迟作业，因为我在后台运行了一些长时间运行的进程。烦人的部分是我每次启动应用程序之前都需要运行“rake jobs:work”。有什么方法可以让我的 Rails 应用程序知道我希望它在每次重新启动服务器时启动？或刷新我的主页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:10:33.613

这是在你的本地机器上吗？如果是这样，您可以设置一个可以运行的别名，当您使用该别名时该别名将运行“rake jobs:work”。例如：

```
alias startserver='rake jobs:work & rails s' 
```

# c# - 使用 ScaleTransform 和 TranslateTransform 在 WPF 图像控件的显示区域显示部分图像

> ID：14282186
> 
> 赞同：2
> 
> 时间：2013-01-11T16:16:17.773
> 
> 标签：c#, wpf

我的应用程序中已经有一个`WPF` `Image`控件。使用`ScaleTransform`和`TranslateTransform`，该`Image`控件具有很好的缩放和平移功能。

我想知道是否有任何方法可以使用and在`Image`控件中显示图像源的某些矩形区域。为此，我想我需要在控件的视口中获取/设置图像源的矩形坐标。但似乎我找不到任何关于此的参考。`ScaleTransform``TranslateTransform``Image`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:28:59.310

我认为[CroppedBitmap](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.croppedbitmap.aspx)可以帮助你：

```
<CroppedBitmap x:Key="croppedImage" 
      Source="{StaticResource masterImage}" SourceRect="30 20 105 50"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:49:09.837

对我来说幸运的是，矩形的大小都相同，因此我可以轻松找到 ScaleTrensformation 的固定比例值，例如 5.0，它将使每个矩形都适合视口。一旦确定了，我就可以想出以下函数来计算 TranslateTransform 的值，根据图像中的坐标。希望它可以帮助处于类似情况的人。

```
 public void SetImageCoordinate(double x, double y)
    {

        TransformGroup transformGroup = (TransformGroup)image.RenderTransform;
        ScaleTransform transform = (ScaleTransform)transformGroup.Children[0];

        ImageSource imageSource = image.Source;
        BitmapImage bitmapImage = (BitmapImage) imageSource ;
        //Now since you got the image displayed in Image control. You can easily map the mouse position to the Pixel scale.

        var pixelMousePositionX = -(x ) / bitmapImage.PixelWidth * transform.ScaleX * image.ActualWidth;
        var pixelMousePositionY = -(y) / bitmapImage.PixelHeight * transform.ScaleY * image.ActualHeight;

        //MessageBox.Show("X: " + pixelMousePositionX + "; Y: " + pixelMousePositionY);

        var tt = (TranslateTransform)((TransformGroup)image.RenderTransform).Children.First(tr => tr is TranslateTransform);
        tt.X = pixelMousePositionX;
        tt.Y = pixelMousePositionY;            
    } 
```

# c++ - 使用子表达式解析 boost::spirit 语法的结果

> ID：14282191
> 
> 赞同：1
> 
> 时间：2013-01-11T16:16:25.887
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi

我正在尝试进入 boost spirit 2，但以下代码无法按预期工作：

```
template<typename Iterator>
struct my_grammar : qi::grammar<Iterator, std::string()>
{
    my_grammar() : my_grammar::base_type(time_literal)
    {
        using ascii::char_;
        using ascii::digit;

        time_literal = digit >> -digit >> char_(':') >> digit >> digit >> -(char_(':') >> digit >> digit);
    }

    qi::rule<Iterator, std::string()> time_literal;
};

void main()
{
    my_grammar<std::string::iterator> g;
    std::string input("01:02:03");
    std::string::iterator begin = input.begin();
    std::string::iterator iter = begin;
    std::string::iterator end = input.end();
    std::string result;
    bool matched = phrase_parse(iter, end, g, ascii::space, result);
    std::cout << (matched ? "matched "+std::string(begin, iter) : "no match") << std::endl;
    if (iter != end)
        std::cout << "remaining: " << std::string(iter, end) << std::endl;
    else
        std::cout << "result: " << result << std::endl;
    std::cout << std::endl;
} 
```

这打印：

```
matched: 01:02:03
result: 01:02: 
```

但我希望看到：

```
matched: 01:02:03
result: 01:02:03 
```

那么最后两位数字去哪儿了，我怎样才能把它们找回来呢？

# c++ - 在 Linux 上的一个函数中删除或替换重复的 C++ 代码

> ID：14282194
> 
> 赞同：-3
> 
> 时间：2013-01-11T16:16:35.860
> 
> 标签：c++, code-duplication

我正在 Linux 上开发 C++。

我需要在两个函数中删除一些重复的代码。

一种功能用于计算，另一种用于记录。

在 logging() 中有一些重复的代码，比computing() 长得多。

重复的代码分别分布在 logging() 中，这意味着它们不仅仅是从computing() 复制和粘贴的。

我需要逐行找出重复的部分，删除它们，然后通过将它们作为参数从计算（）传递到日志记录来替换必要的结果。

有没有一些有效的方法来处理这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:24:19.647

并排查看函数，识别公共代码块，然后将这些公共块分解为单独的方法/函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:49:36.430

合并它们可能不值得。但是，如果您真的必须这样做，也许是一个带有额外`bool do_logging`参数的常用函数。

# sql - Excel 中的 SQL 查询功能

> ID：14282195
> 
> 赞同：1
> 
> 时间：2013-01-11T16:16:38.547
> 
> 标签：sql, vba, ms-access, excel

我将在 Excel VBA 中编写宏“sql_query”，它为我提供 Excel 中的 SQL 查询功能。

```
sql_query(Query as String;ChosenRange as Range) 
```

但是如何做到这一点呢？每次创建ChoosedRange.accdb 好像挺费时间的，你怎么看。

假设：只有 VBA Excel + 库

有什么线索吗？

# sql - 以时间戳列为条件以选择一年的数据

> ID：14282196
> 
> 赞同：1
> 
> 时间：2013-01-11T16:16:43.847
> 
> 标签：sql, postgresql, datetime, select, timestamp

这很简单`SELECT`，但条件只是日期的年份。前任。：

```
SELECT * FROM project WHERE project_reg = '2013'; 
```

`project_reg`是类型`timestamp`。返回的错误是“语法无效”。

> 错误：la sintaxis de entrada no es valida para Tipo 时间戳：«2013»

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:32:28.417

```
SELECT * 
from project 
where extract(year from project_reg) = 2013 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T19:52:39.483

如果表很小或性能不重要，[@Clodoaldo 的答案](https://stackoverflow.com/a/14282510/939860)就可以了。
否则，我会建议这种更复杂的形式：

```
SELECT * 
FROM   project 
WHERE  project_reg >= '2013-01-01 0:0'
AND    project_reg <  '2014-01-01 0:0' 
```

### 为什么？

当您的条件检查**表达式**（如`extract(year from project_reg)`）时，查询优化器只能重写最基本的形式，以按原样应用于表列。这个不行
否则，Postgres 必须先计算表中每一行的表达式，*然后**才能*应用条件。更重要的是，*不能使用基本索引*，这会导致全表扫描，而索引扫描会便宜得多。
这会使大表上的查询变得**非常昂贵**。我在这里说的是数量级。

为避免这种情况，您可以：

*   [在表达式上](http://www.postgresql.org/docs/current/interactive/indexes-expressional.html)创建索引

    ```
    CREATE INDEX project_project_reg_year_idx
    ON project (extract(year FROM project_reg)::int); 
    ```

    你可能还没有那个。

    请注意我如何将结果转换为`integer`，它比 . 返回的双精度更适合“年” `extract()`。您将在查询中使用相同的表达式。

    缺点：这样的索引相当专业，只能用于匹配表达式。在大多数情况下，一个用于多种目的的基本索引是可取的。

*   重写您的条件，以便可以直接检查表列。*如果你可以的话。*
    幸运的是，你可以。这就是我建议的查询所做的。这样，可以使用普通索引：

    ```
    CREATE INDEX project_project_reg_idx ON project (project_reg); 
    ```

    你可能已经有了。至少你可能*应该*。

使用索引和不使用索引测试您的查询[`EXPLAIN ANALYZE`](http://www.postgresql.org/docs/current/interactive/sql-explain.html)以衡量差异。

# c# - 查找哪个服务在 C# 中运行了可执行文件

> ID：14282200
> 
> 赞同：2
> 
> 时间：2013-01-11T16:16:54.003
> 
> 标签：c#, asp.net-mvc, windows-services

我想知道是否有可能找出哪个 Windows 服务运行了可执行文件？

我有两个不同的服务从同一个 exe 运行，做不同的事情。该程序的 main 方法检测命令行参数并将启动控制台应用程序（如果在 Environment.UserInteractive 中运行），或者启动两个可能的服务之一。我找不到辨别正在运行的服务的好方法，因此我可以选择正确的服务在代码中启动。在windows服务的镜像路径中传入.exe参数似乎不起作用。这些服务在服务器上运行并自动启动，因此手动执行它并不是一个真正的选择。

我真的很想避免必须有两个具有不同可执行文件的不同项目，所以我可以通知程序运行哪个服务的任何方式都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:23:45.783

让您的服务共享其启动状态（临时文件、注册表项或其他方法，它甚至可以将其作为 html 写入 Web 服务器...）

```
ServiceController yourService = new ServiceController( "YourServiceName" , "YourMachine" );
if( yourService.Status == ServiceControllerStatus.Stopped )
{
    yourService.Start();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:49:18.223

您可以在服务启动时在服务中创建一个[Mutex](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)，使用它正在运行的版本的唯一名称。如果获得了互斥锁，那么您就知道它没有运行。如果无法获取，则服务已在运行。

然后，您可以通过一个新进程启动您的服务，该进程首先尝试获取第一个服务的互斥锁，如果无法获得它，则启动第二个服务。

因此，您启动 ServiceRunner.exe -foo。获得了一个名为“foo”的互斥体，因此您释放互斥体，ServiceRunner.exe 启动 Service.exe -foo。

如果未获得互斥锁，则尝试获取名为“bar”的互斥锁并遵循相同的过程。

这是一个令人讨厌的解决方案，并且需要您创建一个简单地尝试启动服务的新 exe。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T17:05:36.293

您可以在`ImagePath`. 我知道我曾经使用 .net windows 服务完成了这项工作，但我记得，我必须使用标准 .Net 安装程序以外的其他东西来安装该服务。

.Net 安装程序会在您传递的任何内容周围添加引号，这会使 ImagePath 从`C:\test\test.exe -arguments`应`"C:\test\test.exe -arguments"`为`"C:\test\test.exe" -arguments`.

查看[WiX](http://wix.sourceforge.net/manual-wix2/wix_xsd_serviceinstall.htm)、[sc.exe](http://support.microsoft.com/kb/251192)或[CreateService](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682450%28v=vs.85%29.aspx)以获得正确的注册表值。

要进行测试，请照常安装您的服务并在 regedit 中浏览`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\yourServiceName`并编辑 ImagePath。有关其外观的示例，请查看`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\seclogon`.

# sql - 在sql中选择具有短语计数的数据

> ID：14282201
> 
> 赞同：3
> 
> 时间：2013-01-11T16:16:56.597
> 
> 标签：sql, oracle, count, oracle10g, string-matching

我有一张表说 EMPLOYEE，它有一列 EMPLOYEE_NAME。
我想查看超过 5 条记录中的短语。
该短语可以是至少 3 个字符的任何内容。
例如，我的表看起来像这样

```
EMPLOYEE_NAME
User1
User2
User3
Client1
Client2
Client3
Use1
Aent1
Auser2
ent3 
```

我想在输出中看到“Use”和“ent”，因为它们有 5 个或更多记录匹配。
所以基本上我想看到长度为 3 的字符序列出现在 5 个或更多记录中的任何位置。
让我解释一下我的情况，以便有人可以想到比这更好的解决方案。
我有一个 web 服务，它会在一些数据库中访问一个存储过程。
这个网络服务有一个字段（比如员工姓名），我们可以在其中进行通配符搜索。
这个网络服务还有另一个字段，我们可以在其中指定输出中的最大记录数。
因此，如果特定短语的搜索结果超过该数字，我将在响应中收到错误。
我需要找到可以给我该错误的测试数据。
sp 中使用的查询只是在搜索短语前后放置 % 并返回所有 d 条匹配记录
，我知道 sp 使用的数据库、表和列，并且可以直接运行任何查询。
上面解释的这个查询解决方案是我能想到的唯一解决方案。
由于已经是周末，我没有尝试以下答案，下周将尝试第一件事。
但与此同时，如果有人能提供另一个更好的角度来寻找解决方案，那就更好了。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T17:11:09.587

这是症结所在：

> “该短语可以是至少 3 个字符的任何内容。”

我希望您的意思是您要扫描表格以查找可以包含三个或更多字符的给定搜索模式。这很容易

```
select employee_id
           , employee_name
from  ( 
    with data as 
        ( select employee_id
                 , employee_name
                 , case 
                     when instr(employee_name, '&search_pattern ) > 0 
                     then 1 
                   else 0 end as i
          from employees )
    select employee_id
           , employee_name
           , sum(i ) over () as cnt
    from data
    where i > 0 )
where cnt >= 5; 
```

现在，如果您的意思是要扫描每个 EMPLOYEE_NAME，确定该文本中的每组字符，然后搜索所有其他行以查找这些模式的出现，那么祝您好运。我希望您拥有一台具有大量 RAM 和许多内核的服务器，因为您将需要大量的工作（或非常小的桌子！）。

从您的评论看来，后一种选择就是您想要的。因此，这是一个查询，它将识别代码中的所有三字符段。您可以使用它来生成搜索模式的提要，您可以将其输入到我在上面发布的查询中。

```
select employee_name, triple from (
    with data as ( select max(length(employee_name)) as mx from employee )
    select employee_name
           , substr(employee_name, level, ,3) as triple
    from employee
         , data
    connect by level <= data.mx )
where length(triple) = 3; 
```

在现实生活中，您只想选择 DISTINCT 三元组，但我留下了另一列以提供结果的上下文。

扩展此解决方案以查找三个或更多字符的片段作为练习留给读者；）

* * *

> “我希望找到一个简单的解决方案。令我惊讶的是，到目前为止没有人遇到这个问题。”

好吧，是时候醒来闻一闻咖啡了。 [字符串操作的*计算量很大*。](http://www.joelonsoftware.com/articles/fog0000000319.html). 人们花费如此多的时间和金钱开发数据库模式的原因是我们不必投入大量精力来扫描长字符串以查找特定模式。

您的情况与我们期望在任何数据库中找到的情况完全相反。这就是为什么没有预装解决方案的原因，更不用说简单的解决方案了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T21:43:40.900

要将名称拆分为 3 的短语，您可以使用`SUBSTR(employee_name, x, 3)`，其中 x 必须从 1 运行到`length(employee_name)-1`：

```
substr('Client1',1,3) Cli
substr('Client1',2,3) lie
substr('Client1',3,3) ien
substr('Client1',4,3) ent
substr('Client1',5,3) nt1 
```

要生成这些位置，可以创建一个包含从 1 到最大值的数字的表。或者使用一点魔法并即时生成数字：

```
SELECT level AS x FROM dual CONNECT BY level < max;
1
2
... 
```

结合起来，这将得到所有员工姓名中长度为 3 的所有短语：

```
SELECT id, substr(employee_name, x, 3) AS phrase
  FROM employee
  JOIN (SELECT level AS x FROM dual CONNECT BY level < 27) pos
    ON pos.x < length(employee_name)-1;
1 Use
1 ser
1 er1
... 
```

现在我们只需要过滤掉出现在 5 行或更多行中的短语。这很容易通过以下方式完成`GROUP BY phrase HAVING count(DISTINCT id) >= 5`：

```
SELECT phrase, count(distinct id)
  FROM (
        SELECT id, substr(employee_name, x, 3) AS phrase
          FROM employee
          JOIN (SELECT level AS x FROM dual CONNECT BY level < 27) pos
            ON pos.x < length(employee_name)-1
       )
 GROUP BY phrase
HAVING count(distinct id) >= 5;
ent 5 
```

为什么“使用”应该出现在您的示例结果中？我只有4行？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T20:03:31.983

就个人而言，我会使用一个管道行函数，它将为输入字符串中找到的每个三元组的输入 n 个记录中的每个字符串返回。使用此（表）函数，我将与 EMPLOYEE_NAME 与 group by 连接，并仅选择超过 5 个不同的员工姓名计数。如果您有兴趣可以给您一个代码示例。

# android - 动态 Android 应用本地化

> ID：14282204
> 
> 赞同：12
> 
> 时间：2013-01-11T16:17:07.983
> 
> 标签：android, localization, android-resources

我在[这里](http://developer.android.com/guide/topics/resources/localization.html)读到，Android 应用程序中的本地化是通过与应用程序一起部署的 XML 文件进行的。

是否可以在运行时将这些 XML 文件动态加载到应用程序中？

如果不是，是否可以覆盖 UI XML 和资源 XML 之间的绑定，以便我可以绑定到我自己的、动态加载的 XML 文件而不是其中的一个`res/values`？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T16:23:57.890

> 是否可以在运行时将这些 xml 文件动态加载到应用程序中？

不，对不起。

> 如果不是，是否可以覆盖 UI xml 和资源 XML 之间的绑定，以便我可以绑定到我自己的、动态加载的 xml 文件而不是 res/values 中的一个？

`res/values/`除非您使用它，否则从未使用过任何东西。因此，没有什么可以“覆盖”。

例如，假设您有一个`TextView`. 您希望它显示一些文本。您希望该文本被本地化。通常，您会设置一系列字符串资源，每个翻译一个，然后将这些字符串资源用于`TextView`（例如，`android:text`在布局中或`setText()`在 Java 中）。在您的情况下，您不会设置字符串资源，而是“做自己的事情”，并`setText()`根据需要调用。

您在方法中失去的是自动转换。如果用户在您的应用程序运行时切换语言，Android 会将其视为配置更改并在您的活动返回前台时重新启动它们。通常，这会自动加载新的字符串资源。在您的情况下，它不会，因为您没有使用字符串资源。相反，您需要告诉 Android 不要重新启动您的活动（通过`android:configChanges`）并自己手动重新加载您的所有`TextView`等小部件。如果你忘记了一个，那么用户就完蛋了。

恕我直言，除非有人用枪指着你的脑袋强迫你尝试更改翻译而不发布新版本的应用程序，否则只需使用字符串资源并发布新版本的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T16:29:08.247

如果您愿意，您可以重新发明轮子并实现您自己的基于语言环境的资源加载。

您可以通过以下方式获取当前[语言环境](http://developer.android.com/reference/java/util/Locale.html)

```
Locale = context.getResources().getConfiguration().locale; 
```

然后使用结果来适当地加载你自己的字符串/绘图/任何东西。当然，您必须以编程方式完成所有这些工作（XML 布局不会自动使用正确的资源）。

我强烈建议坚持使用标准的本地化技术。

# java - setIcon 有效，而 setDisabledIcon 无效 - 为什么？

> ID：14282205
> 
> 赞同：0
> 
> 时间：2013-01-11T16:17:12.247
> 
> 标签：java, swing, jbutton, imageicon

我想为禁用的 JButton 设置一个图标。问题是，这样的代码：

```
package problemshowcase;

import java.awt.event.*;
import javax.swing.*;

public class ProblemShowcase {
    JFrame frame1 = null;
    JButton btn = null;

    public static void main(String[] args) {
        ProblemShowcase test = new ProblemShowcase();
        test.makeFrame();
    }

    public void makeFrame()
    {
        frame1 = new JFrame();
        frame1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame1.setSize(500,500);

        btn = new JButton();
        btn.setDisabledIcon(new ImageIcon(getClass().getResource("/test.png")));
        btn.addActionListener(new someListener());

        frame1.getContentPane().add(btn);
        frame1.setVisible(true);
    }

    class someListener implements ActionListener{
        public void actionPerformed(ActionEvent ev){
            JButton foo = (JButton) ev.getSource();

            foo.setEnabled(false);
        }
    }
} 
```

单击后使按钮完全变灰，上面没有任何图像。但是，当我将 setDisabledIcon() 更改为 setIcon() 时，它会在单击之前和之后显示正确的图像（尽管它显然是灰色的）。这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:09:10.477

好的，所以只要没有设置“常规”图标，JButton（和 JToggleButton）似乎根本不会向您显示 DisabledIcon。*因此，如果您想在单击之前保持按钮的非图标性*（如果您像我一样编写扫雷器，那么您想要的）唯一的解决方案就是这样做：

```
package problemshowcase;

import java.awt.event.*;
import javax.swing.*;

public class ProblemShowcase {
    JFrame frame1 = null;
    JButton btn = null;

    public static void main(String[] args) {
        ProblemShowcase test = new ProblemShowcase();
        test.makeFrame();
    }

    public void makeFrame()
    {
        frame1 = new JFrame();
        frame1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame1.setSize(500,500);

        btn = new JButton();
        btn.setDisabledIcon(new ImageIcon(getClass().getResource("/test.png")));
        btn.addActionListener(new someListener());

        frame1.getContentPane().add(btn);
        frame1.setVisible(true);
    }

    class someListener implements ActionListener{
        public void actionPerformed(ActionEvent ev){
            JButton foo = (JButton) ev.getSource();
            btn.setIcon(new ImageIcon(getClass().getResource("/test.png")));

            foo.setEnabled(false);
        }
    }
} 
```

这样，您就在将按钮设置为禁用之前设置了“常规”图标，因此根本不会显示它。您还可以在那里放置一些 1x1 像素透明的东西。

不是最优雅的解决方案，但它似乎是唯一有效的解决方案......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T18:11:45.200

> setIcon 有效，而 setDisabledIcon 无效

两者在这里都工作得很好。单击黄色按钮可以看到它变成红色。

```
import java.awt.*;
import java.awt.image.*;
import java.awt.event.*;
import javax.swing.*;

public class ProblemShowcase {
    JFrame frame1 = null;
    JButton btn = null;

    public static void main(String[] args) {
        ProblemShowcase test = new ProblemShowcase();
        test.makeFrame();
    }

    public void makeFrame()
    {
        frame1 = new JFrame();
        frame1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        btn = new JButton();
        btn.setIcon(new ImageIcon(getImage(Color.YELLOW,200,40)));
        btn.setDisabledIcon(new ImageIcon(getImage(Color.RED,200,40)));
        btn.addActionListener(new someListener());

        frame1.getContentPane().add(btn);

        frame1.pack();
        frame1.setVisible(true);
    }

    private BufferedImage getImage(Color color, int w, int h) {
        BufferedImage bi = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);
        Graphics g = bi.getGraphics();
        g.setColor(color);
        g.fillRect(0,0,w,h);
        g.dispose();

        return bi;
    }

    class someListener implements ActionListener{
        public void actionPerformed(ActionEvent ev){
            JButton foo = (JButton) ev.getSource();

            foo.setEnabled(false);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T20:19:35.440

似乎 JButton 和 JToggleButton 要求您在使用禁用图标之前调用 setIcon() 和 setDisabledIcon() 。我可以想到两种解决方法：

1.  使用与按钮本身颜色相同的 1x1 像素图标调用 setIcon()。

2.  继承 JButton 或 JToggleButton 并提供您自己的功能。

# mysql - 从这个 mySQL 表查询总路径距离

> ID：14282206
> 
> 赞同：0
> 
> 时间：2013-01-11T16:17:12.443
> 
> 标签：mysql, distance

我有这张表，[这里](http://www.sqlfiddle.com/#!2/3dd22)的 SQLFiddle来自这张图片![小路](../Images/ef43c514a56d8ee0b0087c9e99e8851e.png)

```
CREATE TABLE Table1 (
`id` INT( 11 ),
`Segment` VARCHAR( 5 ),
`Distance` FLOAT( 5, 2 ),
`startX` FLOAT( 5, 2 ),
`startY` FLOAT( 5, 2 ),
`endX` FLOAT( 5, 2 ),
`endY` FLOAT( 5, 2 )
);
INSERT INTO Table1 
(`id`, `Segment`, `Distance`, `startX`, `startY`, `endX`, `endY`)
VALUES
(1, 'AB', 14.00, -20.00, -19.00, -34.00, -19.00),
(2, 'BC', 15.56, -9.00, -8.00, -20.00, -19.00),
(3, 'CD', 19.00, 10.00, -8.00, -9.00, -8.00),
(4, 'DE', 21.00, 10.00, -29.00, 10.00, -8.00),
(5, 'EF', 11.31, 18.00, -37.00, 10.00, -29.00),
(6, 'FG', 26.66, 42.00, -37.00, 18.00, -37.00),
(7, 'DH', 43.00, 53.00, -8.00, 10.00, -8.00),
(8, 'HI', 22.63, 69.00, -24.00, 53.00, -8.00),
(9, 'HJ', 13.00, 53.00, 5.00, 53.00, -8.00),
(10, 'JK', 14.14, 63.00, 15.00, 53.00, -5.00),
(11, 'KL', 21.00, 84.00, 15.00, 63.00, 15.00),
(12, 'LM', 14.14, 94.00, 25.00, 84.00, 15.00); 
```

在表格中已经给出了每个段的长度，段的开始 xy 和结束 xy

问题#1，是否可以使用该表中的 mysql 进行查询，该查询将为我提供总路径距离，例如，如果我想获得从 A 点到 E 点的路径距离，将给我总距离 AB+BC+CD+德

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:01:28.333

我有理由确定用简单的 SQL 查询是不可能做到这一点的。如果您的结构始终是一棵树，则需要从末端节点到根节点的路径，如果不是，则需要使用 Djikstra 算法之类的东西。这两种解决方案都需要一个迭代过程，而 SQL 是不可能的。您可能可以使用存储过程来执行此操作，但您最好在调用它的脚本中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:30:16.897

您正在谈论通过不同的可能性进行迭代。虽然您可以在 MySQL 中执行此操作（可能通过某种过程或函数），但这不是您通常会使用 SQL 执行的任务，它通常会在应用程序端完成。

如果点的数量不是很大（您的示例有 13 个），我将构建一个包含所有点元组的表，然后查询您感兴趣的任何两个。

```
CREATE TABLE distances (
  point1 VARCHAR(1),
  point2 VARCHAR(1),
  distance FLOAT(5,2)
); 
```

填写您的起点（您提供的所有 1 段），然后按照以下方式执行操作：

```
INSERT INTO distances (point1, point2, distance) 
SELECT
  p1.point1 as point1,
  p2.point2 as point2,
  p1.distance + p2.distance as distance
FROM
  distances p1
INNER JOIN distances p2
  ON p1.point2 = p2.point1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:37:27.280

```
SELECT SUM(distance) 
  FROM table1 a  
 WHERE a.segment IN ('AB','BC','CD','DE'); 
```

我希望您可以编写一些代码来动态构建 IN 字符串。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-11T16:52:29.840

我想这就是你要找的。我正在使用 Char 操作根据两个输入确定路径的开始和结束。起点的第一个字符和终点的第二个字符。

```
SELECT SUM(t.distance) FROM Table1 t
WHERE t.segment >= CONCAT('A',Char(ASCII('A')+1))
AND t.segment <= CONCAT(Char(ASCII('E')-1),'E') 
```

# bash - 如何使用 Groovy 执行带有反引号的 shell 命令？

> ID：14282208
> 
> 赞同：8
> 
> 时间：2013-01-11T16:17:17.767
> 
> 标签：bash, shell, groovy, backticks

我无法使用 Groovy 执行带有反引号的 shell 命令。一个简化的例子：

```
println "echo `date`".execute().text 
```

我四处搜寻并试图弄清楚如何以某种方式逃脱它们，但没有运气。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T16:22:43.550

如果您尝试：

```
println ["bash", "-c", "echo `date`"].execute().text 
```

我的猜测是

```
"echo `date`".execute() 
```

如果你调用一个字符串， java`Runtime#exec(String)`将在下面使用。`execute()`在这种情况下，这只是标记字符串并`echo`使用参数执行程序

```
`date` 
```

或者

```
$(date) 
```

但这是 shell (bash) 语法，必须通过 bash 执行。

# ruby-on-rails - 如何处理多个“事物”的登录和注销功能？

> ID：14282215
> 
> 赞同：0
> 
> 时间：2013-01-11T16:17:35.937
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, session, authentication

我正在使用 Ruby on Rails 3.2.9。在我的应用程序中，我想处理多个“事物”的登录和退出功能，因为除了经典用户之外，“其他事物”可以登录和退出。我想`sessions_controller`为每个可以进行身份​​验证的东西实现一个“专用”REST-ful，也许通过在`config/routes.rb`文件中进行如下操作：

```
# Before:
# resources :users
# resources :other_things

# After:
resources :users do
  resource :sessions, :only => [:new, :create, :destroy], :controller => 'users/sessions'
end
resources :other_things do
  resource :sessions, :only => [:new, :create, :destroy], :controller => 'other_things/sessions'
end 
```

使用上面的代码，我试图为用户和其他事物“分离”/“命名空间”身份验证问题。但是，与上面的代码不同，我想将登录和注销 URL 匹配如下：

```
localhost/users/sign_in
localhost/users/sign_out
localhost/other_things/sign_in
localhost/other_things/sign_out 
```

我*应该*如何进行？你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:45:36.780

也许这个？由于路线很少，我不会花时间清理更多。

```
resources :users do
  get :sign_in => 'users/sessions#new'
  post :sign_in => 'users/sessions#create'
  delete :sign_out => 'users/sessions#destroy'
end

resources :other_things do
  get :sign_in => 'other_things/sessions#new'
  post :sign_in => 'other_things/sessions#create'
  delete :sign_out => 'other_things/sessions#destroy'
end 
```

# c# - Java 和 .NET 之间的 RegEx“匹配”不同

> ID：14282218
> 
> 赞同：3
> 
> 时间：2013-01-11T16:17:39.320
> 
> 标签：c#, java, .net, regex

我有在 .NET 中匹配但在 Java 中不匹配的正则表达式。我认为 Java 版本是正确的，所以我想知道如何在 .NET 中复制此功能。

这是模式：

```
([12AB]?)[: ]*(Mo|Mn|M|Tu|We|Wd|W|Th|Fr|F|Sa|Su)(\w*)[: ]*(\w*)[: ]*(\w*) 
```

这是测试字符串：

```
D1:AM 
```

这是一个工作示例：[RegEx Fiddle](http://fiddle.re/ay0u)

单击 Java 以查看 Java 的结果： ![Java 正则表达式结果](../Images/fc2ca0214c66292296840279ff679652.png)

点击 .NET 的结果： ![.NET 正则表达式结果](../Images/e5414c19b8438b5400ae9d317ae72844.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T16:23:41.970

`.matches()`没有什么区别，只是再次说明您是 Java 错误命名方法的另一个受害者。正则表达式匹配可以发生在输入的任何地方，如果你想匹配，比如说，只在输入的开头，你必须明确地告诉正则表达式引擎。

如果您再次查看您粘贴的图像，您将看到`.find()`Java 返回 true，与`.Match()`.NET 相同。Java`.find()`进行真正的正则表达式匹配，.NET 的`.Match()`.

Java 在这里是错误命名的`.matches()`，因为它在开头和结尾都锚定了正则表达式（旁注：`.lookingAt()`仅在开头锚定）。如果您想在 .NET 中复制该行为，请锚定您的正则表达式：

```
^([12AB]?)[: ]*(Mo|Mn|M|Tu|We|Wd|W|Th|Fr|F|Sa|Su)(\w*)[: ]*(\w*)[: ]*(\w*)$ 
```

（但从您的屏幕截图来看，您似乎使用*了另一个*正则表达式，而不是您引用的那个：上面的正则表达式既不匹配`D1:AM`也不`D1:PM`匹配）

# riak - riak 节点可达，但传输失败，ehost_unreach

> ID：14282226
> 
> 赞同：0
> 
> 时间：2013-01-11T16:17:57.270
> 
> 标签：riak

我有一个 riak 戒指，它的所有权交接卡住了。由于 ehost_unreach，切换似乎卡住了。但是 ring_status 显示所有节点都已启动且可访问。

如何解决传输失败问题？

谢谢！

riak-admin ring-status 尝试通过 sudo -H -u riak 重启脚本 ================================== = 索赔人 ==================================== 索赔人：'riak@10.253.66.128' 状态：上环准备好：真

=============================== 所有权移交 ================== ============ 所有者：riak@10.253.66.181 下一个所有者：riak@10.253.66.128

索引：1415829711164312202009819681693899175291684651008 等待中：[riak_kv_vnode] 完成：[riak_pipe_vnode]

* * *

=============================== 无法访问的节点 ================== ============ 所有节点都已启动且可访问

[error] ownership_handoff transfer of riak_kv_vnode from 'riak@10.253.66.181' 1415829711164312202009819681693899175291684651008 to 'riak@10.253.66.128' 1415829711164312202009819681693899175291684651008 failed because of error:{badmatch,{error,ehostunreach}} [{riak_core_handoff_sender,start_fold,5,[{file ,"src/riak_core_handoff_sender.erl"},{line,97}]}]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:50:42.057

事实证明，在环状态下节点处于启动和可达状态并不一定意味着节点在每个方向上都真正可达。

我没有在节点 10.253.66.128 上正确设置防火墙。根据[http://comments.gmane.org/gmane.comp.db.riak.user/9152](http://comments.gmane.org/gmane.comp.db.riak.user/9152)启用 TCP 连接后，我能够正确进行切换。

-A RH-Firewall-1-INPUT -p tcp -m state --state NEW -m tcp --dport 4369 -j ACCEPT

-A RH-Firewall-1-INPUT -p tcp -m state --state NEW -m tcp --dport 8087 -j ACCEPT

-A RH-Firewall-1-INPUT -p tcp -m state --state NEW -m tcp --dport 8099 -j ACCEPT

-A RH-Firewall-1-INPUT -p tcp -m state --state NEW -m tcp --dport 7010:7014 -j ACCEPT

# java - 限制对 Java 包的访问

> ID：14282235
> 
> 赞同：1
> 
> 时间：2013-01-11T16:18:21.417
> 
> 标签：java, design-patterns, architecture, package

我有由 GUI 按钮触发的命令，例如：开始和中止。这些命令在单击按钮后在 actionPerformed 方法中执行。GUI 和命令在包 A 中。在包 BI 中有一个类，它从外部库调用方法。

包 B 中的示例：

```
class Control {
    void start() {
      extLib.start();
    }

    void abort() {
      extLib.abort();
    }
  } 
```

包 A 中的类无法访问包 B 中的类。如何在命令中执行 Control 类中的方法？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:36:58.197

`class A`添加这个在`import yourpackage.*;`哪里`class B`可用。

现在您可以通过执行此操作来引用您的 Control 类。

```
Control c = new Control ();
c.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:24:56.013

我的问题可能不清楚或不完整，对此感到抱歉。
这是我
在包 B 中所做的：

```
package b.startup

public class Initialize {
  public Initialize() {
    CmdFactory.getInstance().setControlAdapter(new ControlAdapter());
  }
} 
```

```
package b.control
public class ControlAdapter implements Control {
  public void start() { extLib.start() };
  public void abort() { extLib.abort() };
} 
```

包装 A

```
package a.control
  public interface Control {
    void start();
    void abort();
  } 
```

```
package a.cmd
    public class StartCmd extends Command {
      public void execute(/* Some parameters */) {
        CmdFactory.getInstance.getControlAdapter().start(/* Some parameters */);
      }
    } 
```

```
package a.factory
public class CmdFactory {
  Control control;
  // Constructor for default control
  // Getter and Setter for control.
} 
```

包 A 中的类不要从包 B 中的类调用方法。非常简单，但我的解决方案使用单例，我想避免它以及静态方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T10:13:01.427

您在 Control 类中访问包，但无权访问其方法`start()`和`abort()`，因为访问不带修饰符的方法的标准是包级别。您必须定义公共方法，或者通过将其他类定义为子类来保护。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T10:22:28.190

确保对包 B public 中的类使用 public 访问修饰符而不是 default 修饰符！

# javascript - 在发出 ajax 调用之前检查输入更改的干净方法是什么

> ID：14282236
> 
> 赞同：2
> 
> 时间：2013-01-11T16:18:27.447
> 
> 标签：javascript, jquery, asp.net-mvc-3

我有一个 ASP.NET MVC 3 项目，其中包含一个带有 5 个文本输入框的表单，允许用户输入搜索条件。

目前，当用户从一个字段切换到下一个字段时，我有一个`$('.watched').blur(ajaxSearch);`函数可以发出我的`ajaxSearch`函数，这可以正常工作，排序...

我的问题是 ajaxSearch 每次都被调用，每次我通过字段进行选项卡，或单击`.searchResults`结果 div 中显示的值之一。

我已将我当前的搜索 javascript 放在问题的末尾。

我想将值存储在文本框中，然后在发出另一个 ajax 调用之前检查它们是否有更改。

**伪代码的想法**

```
var oldvalues =  {}
function saveCurrentValues() {
    foreach( input box on the form ) {
       save the currentvalue of the input box into oldvalues['inputboxid']
    }
}

function isNewSearch() {
    foreach( input box on the form ) {
        if (oldvalues['inputbox.id'] !== input box value) {
            return true;
        }
    }
    return false;
} 
```

我不确定如何实现 foreach 和 oldvalues 分配。一些javascript大师能否为我指出这个实现的正确方向。（我在下面的 javascript 中添加了*注释*行，我认为这个实现应该真正完成工作。）

**javascript**

```
function displayResults(data) {
    $('.searchResults').html(data);
}

function ajaxSearch() {
    // if (isNewSearch() ) {
    //    saveCurrentValues();
          $('#selectedRecord').empty();
          var myForm = $('#searchForm');
          $.post(myForm.URL, myForm.serialize(), displayResults);
    //}
}

$(function () {
    $('.watched').blur(ajaxSearch);
    //saveCurrentValues();
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T16:23:32.997

而不是制作自己的功能。你不能用这个`change`事件代替`blur`事件吗？

```
$('.watched').change(ajaxSearch); 
```

***仅当元素（输入、文本区域）***的值发生更改然后模糊时才会发生更改事件。

当元素的值改变时，change 事件被发送到元素。此事件仅限于元素、框和元素。对于选择框、复选框和单选按钮，当用户使用鼠标进行选择时会立即触发事件，但对于其他元素类型***（输入、文本区域）***，***事件会延迟到元素失去焦点为止。***

[***这是文档***](http://api.jquery.com/change/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T16:23:49.870

```
// Bind to the blur event (and change event)
// but only trigger it when a new value is present:
$('.watched').on('blur change',function(e){
  var $this = $(this),
      curValue = $this.val(),
      lastval = $this.data('last');
  // check if it's a new value
  if (lastVal != curVal){
    // store new value
    $this.data('last',curVal);
    // now call ajax
    ajaxSearch();
  }
}); 
```

伪代码，但利用能够存储在您进行新查询时查询的最后一个已知值。

# sql - 2013 日期的 SQL 变慢？

> ID：14282247
> 
> 赞同：0
> 
> 时间：2013-01-11T16:19:11.643
> 
> 标签：sql, tsql

我有一些查询可以为我提供一组数据。现在，在 2013 年之前，它们根据查询的数据量运行得与预期一样快。但现在它就像地狱一样慢。例子：

```
SELECT *
FROM   (SELECT TOP 25 UserDetail,
                      isnull(ROUND(SUM(Cost), 2), 0) AS MixedCost
        FROM   PCounter.dbo.PrintJobsWithUserDetail
        WHERE  Month(PrintDate) = 1
               AND Year(PrintDate) = 2013
        GROUP  BY UserDetail
        ORDER  BY MixedCost DESC) AS A
ORDER  BY A.MixedCost ASC 
```

现在，对于 Month = 1 Year = 2012，此查询在 2 秒内执行，而对于 2013，则需要 ¬3 分钟。

我要疯了吗？PS 每个月的数据量都差不多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:27:12.983

如果参数嗅探是罪魁祸首……在您的 SP 中，请尝试以下操作；

```
ALTER PROC MyProc
@YearParm INT
AS
BEGIN
    DECLARE @DummyParm INT
    SET @DummyParm = @YearParm

    [SP LOGIC]  

END 
```

另外，我 100% 同意@CJK。日期过滤的方法将否定索引，因为它`SARG`不能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T18:45:46.807

我不同意这是参数嗅探。

除此之外，您显示的查询不使用参数！

很可能您的统计信息需要更新，并且您遇到[升序日期列](http://sqlinthewild.co.za/index.php/2011/03/22/statistics-row-estimations-and-the-ascending-date-column/)的常见问题，即在插入新行然后查询最近插入的数据时默认重新编译阈值不足。[跟踪标志 2389 和 2390 可以提供帮助。](http://blogs.msdn.com/b/ianjo/archive/2006/04/24/582227.aspx)

我有点惊讶的是，不可分割的谓词不会阻止使用统计信息，但是通过使用以下查询调整年份的快速测试确实会影响估计的行数。

```
SELECT *
FROM sys.objects
WHERE YEAR(create_date) = 2013 
```

# token - 词法分析中的运算符

> ID：14282253
> 
> 赞同：0
> 
> 时间：2013-01-11T16:19:26.153
> 
> 标签：token, lexical-analysis

我正在修改编译器上的一些东西以进行 uni 考试，我想知道操作员令牌有什么 ID？例如...

```
float position, initial, rate;
position = initial += rate * 60 
```

令牌，类型；职位，身份证；=, =; 初始，ID；+=, ??? （这是什么类型）；费率，身份证；*, *; 60，人数；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:33:32.957

你确定+=不是+=吗？我认为它应该是一个标准定义的运算符，就像 + 或 = 一样。

这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/3yx2xe3h%28v=vs.80%29.aspx "C++ 标记")说编译器应该选择可能的最长标记（从左到右读取），因此您的编译器不应将 i+=5 混淆为两个运算符。他们给出的例子是 i+++j == (i++) + j。

# ruby-on-rails - 使用 ActiveRecord 查询时如何仅选择特定列？

> ID：14282254
> 
> 赞同：0
> 
> 时间：2013-01-11T16:19:26.223
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我知道我们是否只想使用 find 或 where 选择某些特定的列，就像这样。

```
Post.find(10).select("column1") 
```

但是，当我编写这样的代码`post.user.username`（依赖 ActiveRecord 关联）时，如果我只想从`user`表中选择几列，我找不到这样做的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:32:21.810

在您的帖子模型中，您可以按如下方式定义关联：

```
belongs_to :user, :select => [:username] 
```

然后通过帖子引用用户将仅选择所述列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:45:27.107

您可以使用选择选项

选择所有帖子的用户名

```
Project.select(["id", "name"]) 
```

带有 where 条件

```
Project.select(["id", "name"]).where("id=1") 
```

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T16:51:20.993

您可以执行以下操作：

```
Post.find_by_sql("select * from posts P inner join users U on U.id = P.user_id where U.id = 10").collect{|x| x.<column_name>} 
```

# php - Codeigniter 包含在视图中

> ID：14282262
> 
> 赞同：3
> 
> 时间：2013-01-11T16:19:53.820
> 
> 标签：php, codeigniter

CI新手，如果这是一个冒犯性的直接修复，请原谅。

我有许多视图需要能够包含相同的导航，如下所示：

```
...
<div class="projectNav">
  <?php 
    echo anchor('projects/view/' . $project->intId, '<img src="'.base_url().'assets/img/icons/zoom.png" />'); 
    echo anchor('tasks?project=' . $project->intId . '&status=open', '<img src="'.base_url().'assets/img/icons/puzzle.png" />');
    echo anchor('projects/edit/' . $project->intId, '<img src="'.base_url().'assets/img/icons/edit.png" />');
    echo anchor('projects/charges/' . $project->intId, '<img src="'.base_url().'assets/img/icons/sterling_pound_currency_sign.png" />');
  ?>
</div>
... 
```

显然，由于它是每个观点的标准，我不想重复自己。在 CI 中“包含”这个导航的最佳实践方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T16:21:38.157

```
$this->load->view('nav'); 
```

将在应用程序内的视图文件夹中加载 nav.php。此方法可以从控制器或视图运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T16:26:55.483

你可以通过两种方式做到这一点（据我所知）

在控制器中（如果您包含在控制器中，您应该按照您希望的方式以相同的顺序加载。）

```
$this->load->view('nav') 
```

在视图中

```
include('nav.php') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T16:32:15.240

看起来您正在寻找模板/布局系统。CodeIgniter 的一种实现可以在[http://daylerees.com/layout/](http://daylerees.com/layout/)找到。

如果你不想使用完整的布局引擎，你可以添加一个`display_override`钩子来操作你的视图。这在[http://maestric.com/doc/php/codeigniter_compress_html](http://maestric.com/doc/php/codeigniter_compress_html)有简要描述。

# c# - 访问检索到的数据

> ID：14282269
> 
> 赞同：6
> 
> 时间：2013-01-11T16:20:28.190
> 
> 标签：c#, asp.net, ado.net, sqldatasource

几天来，我一直在努力寻找这个问题的答案，我很难相信这是不可能的。

我想了解在`DataSet/DataTable`构建页面时由*ASP.NET*运行时`SqlDataSource.Select`自动调用方法时构建的那个。

 *我知道我可以在后面的代码中运行它，但这会再次访问数据库，我真的很想避免这种情况。我遇到的每个示例都告诉您在后面的代码中执行 Select 方法。

有没有办法访问已经检索到的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:27:32.667

您可以尝试使用此代码 - 基于 ToTable 方法

```
DataView view = (DataView)SqlDataSource.Select(...);
DataTable table = view.ToTable(); 
```

链接：http: [//msdn.microsoft.com/en-us/library/wec2b2e6.aspx](http://msdn.microsoft.com/en-us/library/wec2b2e6.aspx)*

# android - Droidgap 错误在 Phonegap Android 应用程序中没有这样的文件或目录

> ID：14282275
> 
> 赞同：1
> 
> 时间：2013-01-11T16:20:41.497
> 
> 标签：android, cordova

我正在使用 Phonegap 创建一个 AndroidApp，但是当我运行模拟器时出现以下错误：

```
 droidgap:48:in ``': No such file or directory
      android create project -t 7 -k be.progone.test -a PG1 -n PG1 -p E:/baud/work/Mobile/Pr_Eclipse/PG1/build (Errno::ENOENT) 
      from droidgap:48:in create_android' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:43:31.977

cehck local.properties 文件在您的 FrameworkFolder 中，指向您的 android sdk 目录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:26:45.333

将 Android SDK 工具路径添加到系统。

```
Eg: C:\Program Files\Android SDK\tools 
```

# c++ - 使用 TFS 生成版本头文件

> ID：14282280
> 
> 赞同：3
> 
> 时间：2013-01-11T16:20:54.423
> 
> 标签：c++, tfs

我们正在考虑将自动版本控制添加到由 Team Foundation Server 开发和自动构建的本机 c++ 项目中。理想情况下，我们将开始构建（从 TFS 检查所有最新版本），然后作为第一步，从 TFS 获取构建号，创建一个头文件，然后在继续构建之前将该文件重新检入。这甚至可以在这样的构建期间进行结帐/签入吗？

我不太熟悉 TFS 的工作原理以及从中检索信息的功能，我们团队中的其他任何人也不太熟悉，这是我们第一次使用它......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T17:30:40.293

是的，你可以。这是一个很棒的网站，展示了如何为 AssemblyInfo 的 C# 执行此操作，因此您必须稍微调整解决方案，但它应该足以让您完成任务。

在大容量构建环境中签出/签入要非常小心。您将倾向于得到很多“无法签出已锁定的文件”，并且在签入时发生冲突，因为在此构建签出后签入了另一个构建。使用具有大量错误处理和验证以及处理冲突能力的自定义任务。不要大量使用 TF.EXE。

[网站](http://www.ewaldhofman.nl/post/2010/05/13/Customize-Team-Build-2010-e28093-Part-5-Increase-AssemblyVersion.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:29:13.943

不要签入版本文件——它会带来无穷无尽的麻烦。相反，使用 TFS 提供的构建名称即时生成它，并使用它进行编译。我们从[Wintelect 的解决方案](http://www.wintellect.com/cs/blogs/jrobbins/archive/2011/09/05/tfs-2010-build-numbers-file-versions-from-inside-your-c-and-c-projects.aspx)（支持 C++、C# 和其他语言）开始，并对其进行了修改，以将构建的实际版本字符串作为字符串包含在内。

警告：每次创建文件都会破坏增量构建。我们最终仅在文件不存在时才重新创建文件，这意味着增量构建具有不正确的构建编号 - 但我们的“官方”构建不是增量的，并且具有正确的编号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T17:02:02.117

有趣的想法，我不知道是否可以通过内置的构建活动（可能不是）来执行此操作，但是，您可以使用 Invoke Process 调用您想要的任何其他内容，因此您可以尝试调用 tf. exe（即将文件名设置为*路径*\tf.exe 和参数设置为“checkout *fullpathtothefile* ”）以签出文件，进行编辑/更改（可能在另一个 Invoke Process 活动中），然后使用 Invoke Process 将其签回.

只是把想法扔在那里！

# ruby-on-rails - 我可以将 ERB 文件呈现为 gem 内的 HTML 字符串（在 ActionController::Base 之外）吗？

> ID：14282283
> 
> 赞同：1
> 
> 时间：2013-01-11T16:21:03.537
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, erb

我正在制作一个 gem，它将在 Rails 项目的 public/ 目录中生成一个 .html 文件。它将用于从 Cucumber 场景中自动生成文档。

能够将 HTML 文件模板化为 ERB 对我来说非常方便，这样我就可以传入变量，让 ERB 做这件事，然后吐出原始 HTML 来生成文件。

我知道`ActionController::Base#render_to_string`，但在 gem 中，我显然不在此方法的范围内。还有另一种方法可以做到这一点吗？我的另一个选择是在 heredoc 中定义标记，但如果可以只编写 ERB 文件，我宁愿远离它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-06T18:05:54.913

如果您想访问各种帮助程序，请考虑使用 ActionView 而不是 ERB。这是如何执行此操作的完整示例。

```
class MyClass
  def test
    render 'register_user', :jid => 'my login', :password => 'my password'
  end

  private
  def render template, **values
    templates_dir = "#{Rails.root}/app/lib/api"
    template_file = "#{template}.xml.erb"
    ActionView::Base.new(templates_dir).render \
        :file => template_file,
        :locals => values
  end
end 
```

一个模板位于其中，`app/lib/api`如下所示：

```
<query xmlns="archipel:xmppserver:users">
  <archipel action="register">
    <%= tag :user, :jid => jid, :password => password %>
  </archipel>
</query> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:33:05.433

```
ActionView::Base.new(Rails.configuration.paths["app/views"].first).render(...) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T16:29:49.220

```
require 'erb'
ERB.new("Hello <%= 'World'%>").result 
```

您可以将模板文件读入字符串，使用新的 ERB 实例进行渲染，然后编写静态 HTML。

如果需要使用变量，可以提供绑定。

```
foo = :bar
ERB.new("Hello <%= foo%>").result(binding) # "Hello bar" 
```

[ERB 文档](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html)

[ERB#结果](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html#method-i-result)

# javascript - 如何在javascript中正则表达式一组字符？(\/)

> ID：14282287
> 
> 赞同：2
> 
> 时间：2013-01-11T16:21:12.203
> 
> 标签：javascript, jquery, regex

我有一个字符串，我只想正则表达式“一起”的某些字符。我怎么能这样做呢？我要检查的字符是正斜杠旁边的反斜杠。

[http://jsfiddle.net/H4e7p/2/](http://jsfiddle.net/H4e7p/2/)

例子：

这是我正在对其进行正则表达式的字符串：

```
Hello world! How \ar/e you? \/\/\/\/\/\/\\\\\\\\/\/ 
```

这**应该**是这样的：

```
Hello world! How \ar/e you? ******\\\\\\\** 
```

这**实际上是**这样的：

```
Hello world! How *ar*e you? *********************** 
```

这是我目前使用的正则表达式：

```
/[\\/]/g 
```

为了完成对一组字符的检查，正则表达式必须是什么样子？(\/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:22:32.810

您使用了错误的常规语法：[`[xyz]`](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#special-character-set)是

> 一个字符集。匹配任何一个封闭的字符。

请尝试以下正则表达式：`/\\\//g`.

**演示：http:** [//jsfiddle.net/H4e7p/3/](http://jsfiddle.net/H4e7p/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:23:24.037

的含义`/[\\\/]/g`是 \ 或 /

但是你想要 `/(\\\/)/g`

**编辑**更正转义的 /

# javascript - ajax 调用后调整文档高度

> ID：14282291
> 
> 赞同：0
> 
> 时间：2013-01-11T16:21:38.473
> 
> 标签：javascript, jquery, html, height, document

我想在 ajax 调用后更改文档高度。为什么要这样做？因为在我的网页中，我有不同的按钮来导航（转到第一页，到最后一页，到一个特定的页面），并且数据是由 ajax 加载的，但是如果加载的数据比以前少，我会得到一个额外的空白结束。

例如，如果文档和正文在调用之前为 3400 高度，而我转到最后一页，并且该页面的数据较少，则正文变为 2400 高度，但文档保持 3400 高度。

所以我想改变文档的高度。我试过这个，但没有奏效：

```
if(jQuery(document).height() > jQuery('html').height()){
  jQuery(document).height(jQuery('html').height());
} 
```

有任何想法吗？ajax 调用后可以“调整”文档的大小吗？

# python - 堆和负数的奇怪行为

> ID：14282292
> 
> 赞同：1
> 
> 时间：2013-01-11T16:21:52.497
> 
> 标签：python, data-structures

我有一个创建两个堆 minHeap 和 maxHeap 的算法。两者之间的唯一区别是 maxHeap 反转了 minHeap 的符号，这是一个使用 Python 的 heapq 数据结构作为最大堆的简单 hack。这是我创建堆的代码（堆键基本上是字典中一周中给定日期的工人数量）：

```
for day in self.weekDict:
    if day != 'Saturday' and len(self.weekDict[day]) != 0: #saturdays and holidays not part of optimization
        heapq.heappush(minHeap, (len(self.weekDict[day]), day))
        heapq.heappush(maxHeap, (-len(self.weekDict[day]), day)) 
```

minHeap 按预期工作，但是当有多个相同的键时，最大堆给了我奇怪的行为。见下文：

```
[(-8, 'Thursday'), (-7, 'Monday'), (-5, 'Friday'), (-7, 'Wednesday'), (-7, 'Tuesday')] 
```

为什么最后两天不正常？是不是因为只有第一天保证是最小值，并且一旦我从堆中弹出第一天就会自动调整自己？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T16:37:35.277

堆不是排序列表。堆是一棵二叉树，*恰好存储*为列表。堆的元素具有以下属性：

a[k] <= a[2*k+1] 和 a[k] <= a[2*k+2] 对于 a 中的所有 k

请参阅文档以获得更完整的解释和精美的图片以帮助遵循结构：[http ://docs.python.org/2/library/heapq.html#theory](http://docs.python.org/2/library/heapq.html#theory)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:32:51.167

堆不是排序列表。它们是列表，您可以从中快速拉出第一个元素，还可以维护结构，以便您可以继续快速拉出下一个第一个元素。当您将堆视为列表时，元素将不会完全排序。

# java - Java JPanel 不会出现在 Linux 的 JFrame 中

> ID：14282296
> 
> 赞同：3
> 
> 时间：2013-01-11T16:22:02.247
> 
> 标签：java, swing, jframe, jpanel, absolutelayout

我正在使用一个应用程序来查询数据库并将该信息提取到我添加到 JFrame 的几个 JPanel 上。每隔 30 秒，我在 JFrame 中将一个可见性设置为 false，另一个设置为 true，以交替显示哪个。

该应用程序在 Windows 中运行良好，但是当我将它放在我的 Ubuntu 机器上（运行 XFCE 和 openjdk-7-jre）时，面板不显示。JFrame 中的其他组件确实出现了，但我不确定出了什么问题。同样，该程序在 Windows 中正确运行，但在 Ubuntu 中无法正常运行。

我试图将我的代码缩减为可以自行编译和运行的代码，但我知道我的代码一团糟。我几乎没有做过 Java 编程，所以我很抱歉这一切会变得多么丑陋！我还删除了数据库的东西，因为它正在工作，因此你们都不需要看到。

感谢任何可以为我指明正确方向的人！

```
package productivityDisplay;

import java.awt.Color;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class Display implements ActionListener {

// Sizing constants
public boolean trimNames = false; // if true, trims to 10 characters (use
                                    // this if something is cut off)
int refreshRate = 600000; // Refresh rate for Data (milliseconds)
int margin = 2;
int labelHeight = 76;
Font defaultFont = new Font("Tahoma", Font.PLAIN, 50);
Color DodgerBlue = new Color(30, 144, 255);
Color OrangeRed = new Color(255, 69, 0);
Color DarkGreen = new Color(0, 100, 0);
// End Sizing constants

// Controls
private JLabel lblCountDown;
public int countDown;
private Timer refresh;
private JFrame frame;
private JLabel lblCurrTime;
private JPanel pnlGrind1, pnlGrind2;
private JLabel lblWeekSummary, lblRepairCredit,
        lblRepair2Count, lblCustom1, lblCustom2,
        lblQC, lblRepair, lblRepair2;
@SuppressWarnings("rawtypes")
private JComboBox cmbTeamNames;
// End Controls

// Data Variables
private int currentTeam;

// End Data Variables

public static void main(String[] args) {
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            try {
                Display window = new Display(1); // Attempts to show
                                                    // the
                                                    // window
                window.frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
                throw new Error("Yeah, it's broken.");
            }
        }
    });
}

public Display(int team) {
    initialize();
    cmbTeamNames.setSelectedIndex(team);
    getData();
}

/**
 * @wbp.parser.entryPoint
 */

@SuppressWarnings({ "unchecked", "rawtypes" })
private void initialize() {
    frame = new JFrame();

    frame.setVisible(true);
    frame.setExtendedState(frame.getExtendedState() | JFrame.MAXIMIZED_BOTH); // Maximize
                                                                                // Window
    int width = frame.getWidth();
    int height = frame.getHeight();
    //frame.setResizable(true); // Can't be resized
    frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    frame.setLayout(null);

 // MASSIVE CHUNK OF LAYOUT CODE //

    String[] strTeamNames = { "", "Grinding", "Finishing" };
    cmbTeamNames = new JComboBox(strTeamNames); // Combo Box (Grinding,
                                                // finishing) 
    cmbTeamNames.setFont(new Font("Tahoma", Font.PLAIN, 40));
    cmbTeamNames.setBounds(20, 11, 297, 67);
    frame.getContentPane().add(cmbTeamNames);
    cmbTeamNames.setName("cmbTeamNames");
    cmbTeamNames.addActionListener(this);

    lblCurrTime = new JLabel("Clock");
    lblCurrTime.setFont(new Font("Tahoma", Font.PLAIN, 99));
    lblCurrTime.setBounds((width - 350), 11, 300, 100);
    frame.getContentPane().add(lblCurrTime);
    countDown = 0;
    lblCountDown = new JLabel("Next update in: "+countDown);
    lblCountDown.setFont(new Font("Tahoma", Font.PLAIN, 40));
    lblCountDown.setBounds(cmbTeamNames.getX() + cmbTeamNames.getWidth()
            + 40, 20, 400, 50);
    frame.getContentPane().add(lblCountDown);

    // Grinding Layout 2

    pnlGrind2 = new JPanel();
    pnlGrind2.setBounds(20, 89, (width - 50), height - 130);
    frame.getContentPane().add(pnlGrind2);
    pnlGrind2.setLayout(null);
    pnlGrind2.setBorder(BorderFactory.createLineBorder (Color.blue, 2));
    // Column1

    JSeparator separator = new JSeparator();
    separator.setBounds(0, (labelHeight + margin - 1), 300, 10);
    pnlGrind2.add(separator);
    // End Column1
    // Column2
    int leftSet = 450;

    JSeparator separator2 = new JSeparator();
    separator2.setBounds(leftSet, (labelHeight + margin - 1), 200, 10);
    pnlGrind2.add(separator2);

    // End Column2
    // Column3
    leftSet = 750;

    JSeparator separator3 = new JSeparator();
    separator3.setBounds(leftSet, (labelHeight + margin - 1), 200, 10);
    pnlGrind2.add(separator3);

    // End Column3
    // Bottom rows

    lblRepair2 = new JLabel("Repair Credit:");

    pnlGrind2.add(lblRepair2);
    lblRepair2.setFont(defaultFont);
    lblRepair2.setForeground(DodgerBlue);
    lblRepair2Count = new JLabel("");
    lblRepair2Count.setBounds(lblRepair2.getX() + lblRepair2.getWidth()
            + margin, lblRepair2.getY(), 515, labelHeight);
    pnlGrind2.add(lblRepair2Count);
    lblRepair2Count.setFont(defaultFont);
    lblRepair2Count.setForeground(DodgerBlue);

    // End Bottom rows
    pnlGrind2.setVisible(false);
    pnlGrind2.setBackground(new Color(0, 0, 204)); // Used to see panel
    // better

    // End Grinding Layout 2

    // Grinding Layout 1

    pnlGrind1 = new JPanel();
    pnlGrind1.setBounds(20, 89, (width - 50), height - 130);
    frame.getContentPane().add(pnlGrind1);
    pnlGrind1.setLayout(null);
    pnlGrind1.setBorder(BorderFactory.createLineBorder (Color.blue, 2));
    pnlGrind1.setVisible(false);
    pnlGrind1.setBackground(new Color(255, 0, 204)); // Used to see panel
    // better

    // Left Side
    lblWeekSummary = new JLabel("Week Summary (Measured at Buffing)");
    lblWeekSummary.setBounds(0, 0, 515, 37);
    pnlGrind1.add(lblWeekSummary);
    lblWeekSummary.setFont(new Font("Tahoma", Font.PLAIN, 30));
    // Spacing
    lblCustom1 = new JLabel("Custom:");
    lblCustom1.setBounds(0,
            lblWeekSummary.getY() + (lblWeekSummary.getHeight() + margin)
                    * 2, 515, labelHeight);
    pnlGrind1.add(lblCustom1);
    lblCustom1.setFont(defaultFont);
    lblCustom1.setForeground(OrangeRed);

    lblRepairCredit = new JLabel("Repair Credit:");
    lblRepairCredit.setBounds(0,
            lblCustom1.getY() + (lblCustom1.getHeight() + margin), 515,
            labelHeight);
    pnlGrind1.add(lblRepairCredit);
    lblRepairCredit.setFont(defaultFont);
    lblRepairCredit.setForeground(DodgerBlue);
    // Spacing
    lblQC = new JLabel("QC");
    lblQC.setBounds(
            0,
            (int) (lblRepairCredit.getY() + (lblRepairCredit.getHeight() + margin) * 1.5),
            515, labelHeight);
    pnlGrind1.add(lblQC);
    lblQC.setFont(defaultFont);
    lblQC.setForeground(DarkGreen);

    lblCustom2 = new JLabel("Custom:");
    lblCustom2.setBounds(0, lblQC.getY() + (lblQC.getHeight() + margin),
            515, labelHeight);
    pnlGrind1.add(lblCustom2);
    lblCustom2.setFont(defaultFont);
    lblCustom2.setForeground(DarkGreen);

    lblRepair = new JLabel("Repair:");
    lblRepair.setBounds(0, lblCustom2.getY()
            + (lblCustom2.getHeight() + margin), 515, labelHeight);
    pnlGrind1.add(lblRepair);
    lblRepair.setFont(defaultFont);
    lblRepair.setForeground(DarkGreen);
    // End Left Side

    // Right Side

    // End Right Side

    // End Grinding Layout 1
// END MASSIVE CHUNK OF LAYOUT CODE //
    frame.pack();
    frame.setExtendedState(frame.getExtendedState() | JFrame.MAXIMIZED_BOTH); // Maximize
    // Window
}

// Thread classes

public void getData() {
    ActionListener updateData = new ActionListener() {
        public void actionPerformed(ActionEvent evt) {
            pnlGrind1.repaint();
            pnlGrind2.repaint();
            countDown = 15;
        }
    };
    refresh = new Timer(refreshRate, updateData);
    refresh.start();

}

// End Thread Classes

public void actionPerformed(ActionEvent e) { // Combo box to select team was
                                                // clicked

    int team;
    team = cmbTeamNames.getSelectedIndex();
    currentTeam = team;
    countDown=600;
    int t2Interval = 5000;
    if (team == 1) { // Grinding team
        pnlGrind1.setVisible(true);
    }
    ActionListener alternatePnl = new ActionListener() {

        public void actionPerformed(ActionEvent evt) {
            // updateData();

            alternatePanel(cmbTeamNames.getSelectedIndex());

        }
    };
    new Timer(t2Interval, alternatePnl).start();

}

void alternatePanel(int team) {
    if (team == 1) { // If Grinding team
        if (pnlGrind1.isVisible()) {
            pnlGrind1.setVisible(false);
            pnlGrind2.setVisible(true);
        } else {
            pnlGrind2.setVisible(false);
            pnlGrind1.setVisible(true);
        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:49:01.543

因为 JPanels 得到负的高度和宽度：

```
pnlGrind2.setBounds(20, 89, (width - 50), height - 130); 
```

, 和宽度 = 高度 = 0 那里。您刚刚初始化了`JFrame`so ，默认情况下都为 0 ，然后立即将这些值分配给`height`and `width`。

如果已经进行绝对布局，请保持一致并尽快指定您的框架大小：

```
private void initialize() {
    frame = new JFrame();
    frame.setSize(800, 600);
    ... 
```

之后 JPanel 出现在我的 Ubuntu 机器的屏幕上。

# java - Java/Android：Facebook SDK 登录两种方式，没有一种工作

> ID：14282298
> 
> 赞同：0
> 
> 时间：2013-01-11T16:22:14.843
> 
> 标签：java, android, facebook, sdk

我在 android 应用程序中登录 Facebook 时遇到问题。我找到了两种方法：一种是旧的和已弃用的，另一种是新的。当我实施弃用时，在测试期间一切正常，而没有安装官方的 facebook 应用程序。安装后，预签入会告诉我我的应用程序配置错误。当我实施第二种方式时，它也不起作用。它甚至没有开始会话。

链接到教程：旧方式：[http](http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/) ://www.androidhive.info/2012/03/android-facebook-connect-tutorial/ 新方式：http: [//developers.facebook.com/docs/getting-started/facebook -sdk-for-android/3.0/](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

还有一件事，当我将 facebook 项目添加到我的工作区时，我的 sdk 和 facebook sdk 中的 android 支持库并不相同，所以我通过将 facebook 的一个更改为来自 Android SDK 的那些来解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:45:17.263

正确设置您的密钥哈希以使本机 SSO 正常工作。

[http://facebook.stackoverflow.com/a/13499901/931354](http://facebook.stackoverflow.com/a/13499901/931354)

# php - Laravel 中的关系

> ID：14282299
> 
> 赞同：0
> 
> 时间：2013-01-11T16:22:15.073
> 
> 标签：php, orm, relationship, laravel, eloquent

我有两张桌子，`Galleries`和`Gallery_items`。在`Galleries`我保存诸如作者是谁之类的信息。在`Gallery_items`我保存画廊包含的每张图片。

现在我想在***每个*****画廊中****获取第一张照片，*其中*标题是蒙娜丽莎*，*作者是莱昂纳多·达·芬奇*****。***

 ***我测试过：

```
Gallery_items::group_by('gallery_id')->where('title', '=', 'mona lisa')->gallery()->where('author', '=', 'Leonardo da Vinci'); 
```

但它不起作用。我得到一个错误`Method [gallery] is not defined on the Query class.`。

但我已将 gallery() 添加到模型中。

```
class Gallery_items extends Eloquent
{
    public function gallery()
    {
        return $this->belongs_to('gallery');
    }
} 
```

知道我该怎么做吗？这甚至可以通过一个查询来实现吗？“[约束急切加载](http://laravel.com/docs/database/eloquent#constraining-eager-loads)”也许是答案（我不明白那是什么）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:16:47.153

感谢@AndHeiberg，我开始从其他角度看待问题，现在我已经使用`JOIN`语句解决了问题。

```
Gallery_items::join('gallery', 'Gallery_items.gallery_id', '=', 'gallery.id'))->group_by('gallery_id')->where_title_and_author('Mona Lisa', 'Leonardo da Vinci'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T18:00:07.133

这应该有效：

```
Gallery_items->group_by('gallery_id')->where_title_and_author('Mona Lisa', 'Leonardo da Vinci'); 
```***

# coldfusion - 将多个源文件移动到单个文件中

> ID：14282300
> 
> 赞同：0
> 
> 时间：2013-01-11T16:22:15.150
> 
> 标签：coldfusion

我需要获取数百个源代码文件并将它们移动到一个文件中（出于专利目的）。所有源代码包括 CSS、JS、HTML 和 Model Glue 2.0 框架。

我可以稍微轻松地构建一系列**cfdirectory**循环和**cffile 读/写**操作，以将所有内容读入一个巨大的文件中。但是，这似乎效率低下并且对服务器资源造成负担（这是我们的生产箱）

在我走这条路之前，还有其他更自动化的解决方案吗？

**编辑**：它不能是压缩格式，如 zip、war 等。它必须是txt、pdf等格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:54:02.983

您不必使用 CF 来执行此操作，还有其他可用的工具。

如果您只是想将每个文件合并成一个大文件，您可以使用 DOS（假设您在 windows 机器上）或将其移动到您的 windows pc（假设您不使用 Mac）并简单地编写一个小文件批处理文件。[howtogeek](http://www.howtogeek.com/howto/keyboard-ninja/keyboard-ninja-concatenate-multiple-text-files-in-windows/)有一个教程。

或者你可以做`C:\[your CF folder]>type *.cfm >> merge.txt`类似[这里的事情](http://tekcert.com/blog/2012/04/23/how-concatenate-multiple-text-files-one)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T21:30:40.213

将所有文件聚合在一起的任何解决方案都将做同样的事情：遍历目录树，读取文件，然后[以某种方式处理它们：在您的情况下，只需将它们拼接成 PDF 等]。

如果您担心对产品服务器上的文件执行此操作的处理开销，请先*将它们从产品服务器上复制下来*。

我会通过你在第二段中描述的机制来做到这一点。我唯一要注意的是您在“cfdirectory loopS”中使用复数。你只需要一个......`<cfdirectory>`有一个`recurse`选项，这意味着你可能只需一个`<cfdirectory>`调用和一个循环就可以逃脱（并且没有太多的处理开销）。

# node.js - 如何在快递网站中使用节点的集群模块？

> ID：14282303
> 
> 赞同：1
> 
> 时间：2013-01-11T16:22:18.670
> 
> 标签：node.js, express, node-cluster

我已经阅读了一些关于 Node.js 0.8 中引入的集群模块的信息，但我不确定如何（或是否应该）将它应用到我在 Express 上运行的网站。我有一个非常普通的 Express 设置：由 Hogan.js 渲染的模板，由 Stylus 编译的 CSS，没有 websockets 或花哨的中间件。

使用集群模块是否可以获得显着的性能改进？

如果是这样，如何最好地在标准 Express 项目中使用集群？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T16:32:00.570

碰巧，我昨天才在博客上写过这个！在回答您的性能问题时——是的，有一个明确的好处。我在帖子中包含了一些基准：
[http ://rowanmanning.co.uk/posts/node-cluster-and-express](http://rowanmanning.co.uk/posts/node-cluster-and-express)

简短的回答是集群模块允许您充分利用多核机器；您的应用程序将能够处理更多的请求。

这个答案也值得一读，它详细介绍了 Nginx 作为替代方案：
[Node.js on multi-core machines](https://stackoverflow.com/questions/2387724/node-js-on-multi-core-machines/8685968#8685968)

# php - 自动在数据库表中创建条目 (php/mysql)

> ID：14282304
> 
> 赞同：1
> 
> 时间：2013-01-11T16:22:19.233
> 
> 标签：php, javascript, mysql, sql, database

我正在做一个项目，该项目记录了一天花费的金额。假设数据库中的开始日（第一个条目）是 2013 年 1 月 1 日。现在每天我都会向数据库提交一个条目，但有些日子我不能。该表如下所示：

日期***_ _* __ *_* _** |****__ *_* __** _花费**

 **2013-01-09 | 2000

2013-01-11 | 1200

假设今天是 2012 年 1 月 11 日，我忘记在 2012 年 1 月 10 日输入。现在我想使用 php+mysql 编写代码，它将遍历表格并检查第一个条目和最新条目之间是否缺少任何日期。当它发现 2012 年 1 月 10 日的条目丢失时，它应该在已花费列中创建金额为 0 的条目本身。我怎样才能做到这一点？有没有比我尝试使用的更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:23:43.973

完成此操作的唯一方法是`JOIN`在具有完整日历的表上或制作日期表。你可以写一个游标，但它被认为是最后的手段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T17:35:00.627

这是我的建议，创建一个文件来存储脚本运行的最后日期，假设今天（2013 年 1 月 11 日）您已经运行了该脚本，而不是仅在该文件中存储 2013 年 1 月 11 日，如果您运行明天再次，它将存储明天的日期 2013-01-12。

我们将使用这个日期来创建查询并减少我们的处理时间。

存储在文件中的日期是我们的 $minDate，

使用查询从数据库中找出最大日期，说它是 $maxDate，

查询：Select Date,Spent from table where date('Date')>$minDate;

将结果存储在数组中 $dateArray

使用 $minDate 和 $maxDate 之间的期间创建一个日期数组

```
$starting_date = new DateTime($minDate." 00:00");
$ending_date = new DateTime($maxDate." 23:59:59");

$interval = new DateInterval('P1D');
$period = new  DatePeriod($starting_date , $interval, $ending_date);
foreach ($period as $date) {
  $curDate=$date->format('Y-m-d');
  if(!in_array($curDate,$dateArray)){
     //insert new row with $curDate
  }
}
update lastProcessedDate in your file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:27:34.907

您可以创建一个存储过程并安排它每晚运行。像创建游标来循环遍历表，按日期列排序，然后检查上一条记录以查看缺少多少天，如果超过 1，则单独插入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T16:46:28.883

我会这样处理：创建一个 cronjob，它在清晨（比如凌晨 2 点左右）运行你的 PHP 脚本。该脚本将当前日期减去 1（昨天）并使用对数据库的选择查询。如果它没有找到一个条目，它将创建一个。当您每天运行它时，您将确保总有昨天的条目。**

# asp.net - Orchard CMS - 在内容项编辑器中维护查询字符串值

> ID：14282305
> 
> 赞同：2
> 
> 时间：2013-01-11T16:22:19.563
> 
> 标签：asp.net, orchardcms, orchardcms-1.6

在我的 Orchard 实例中，我有一个自定义内容类型。创建内容类型的实例时，必须将查询字符串值传递到编辑器页面，以便在后台为关联模型设置值。

问题是，只要点击“保存”或“立即发布”，查询字符串就会丢失。它不在 URL 中维护，对驱动程序中查询字符串的任何引用都返回 null。

那么，有没有什么办法可以保持查询字符串的状态呢？

代码示例：

```
//GET
protected override DriverResult Editor(PerformerPart part, dynamic shapeHelper)
{
    var workContext = _workContextAccessor.GetContext();
    var request = workContext.HttpContext.Request;
    var id = request.QueryString["id"];
} 
```

最初，“id”设置为查询字符串参数，但回发后查询字符串返回“null”。

注意：我使用的是 Orchard 1.6 版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-25T12:53:27.033

如果您将其保存在隐藏字段的页面上，则可以在回发时获取查询字符串参数。如果编辑形状取决于这个参数，它会有点困难。

司机：

```
protected override DriverResult Editor(PerformerPart part, dynamic shapeHelper)
{
    return Editor(part, null, shapeHelper);
} 
```

司机：

```
protected override DriverResult Editor(PerformerPart part, IUpdateModel updater, dynamic shapeHelper)
{
    var model = new PerformerPartEditViewModel();

    if (updater != null)
    {
        if (updater.TryUpdateModel(model, Prefix, null, null))
        {
            // update part
        }
    }
    else
    {
        model.StrId = _wca.GetContext().HttpContext.Request.QueryString["id"]; // if you save id in your part that you can also try get it from the part
    }

    if (string.IsNullOrEmpty(model.StrId))
    {
        // populate model with empty values
    }
    else
    {
        // populate model with right values
    }

    return ContentShape("Parts_Performer_Edit", () => shapeHelper.EditorTemplate(
            TemplateName: "Parts/Performer",
            Prefix: Prefix,
            Model: model
    ));
} 
```

看法

```
@model Smth.ModuleName.ViewModels.PerformerPartEditViewModel
@Html.HiddenFor(m => m.StrId) 
```

# android - ViewPage 解决方案

> ID：14282307
> 
> 赞同：1
> 
> 时间：2013-01-11T16:22:26.877
> 
> 标签：android, listview

我希望我的应用程序中的活动和布局很少。应该有 100 页可以阅读有关科学、自然等方面的内容。但我不想制作 100 个布局。我想向我的视图适配器添加不同的页面，就像使用列表一样。对所有人使用相同的布局，然后向其中添加新数据（如列表）。我想创建具有相同列表视图概念但数据不同的页面。

已经有一篇关于我正在谈论的帖子：[Using viewpager in my application](https://stackoverflow.com/questions/8392520/using-viewpager-in-my-application) but I can't understand how to do it..我做了一些尝试..我把android-support-v4.jar放在libs中..我制作了xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"

android:orientation="vertical"

 >
<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="0px"
    android:layout_weight="1" >
</android.support.v4.view.ViewPager>

</LinearLayout> 
```

下一步是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:25:42.810

看看这个[`ViewPager`例子](http://www.edumobile.org/android/android-beginner-tutorials/view-pager-example-in-android-development/)。基本上你需要创建一个适配器来提供你需要的页面。如果您有很多页面，我建议您使用 a `FragmentStatePagerAdapter`，因为它针对大量页面进行了优化。

[更好的是，请查看Android 文档](http://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html)上的这个示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:08:49.967

随着 Oleg 的回答，我将添加[这个简单的教程](http://wptrafficanalyzer.in/blog/implementing-horizontal-view-swiping-using-viewpager-and-fragmentpageradapter-in-android/)，我发现它有你可以下载的源代码，一旦它对你有用，你可以在学习它的工作原理时慢慢适应你的需要。这显示了如何显示`TextView`我认为是您想要的而不是`Image`. 一旦您从您获得的链接之一中获得了基础知识，我认为您可能想要创建一个`ArrayList`（可能在它自己的类中）并从那里获取数据以添加到每个页面，`TextView`因为有大量页面你打算拥有。如果您花时间并确保您了解这些组件如何协同工作的基础知识，那么我认为其余的对您来说会更容易。

我同意 Oleg 的回答，您可能想要使用 a `FragmentStatePagerAdapter`，因为您将拥有大量页面/数据。但是请试一试本教程，看看这是否有助于您理解所有这些如何协同工作。祝你好运！

**更新**

因为我之前没有这样做过，所以我会尽力向你展示一些可能有用的东西。如果不自己玩弄它，我不能肯定地说，但我会试一试（使用来自 turorial 的代码和一个返回数组的组成类）

```
 public Fragment getItem(int arg0) {
    MyFragment myFragment = new MyFragment();
    Bundle data = new Bundle();
    String myArrayString = new ArrayClassName().getText(arg0);  //This should get a string value from a method you create in your Array class called getText()
    data.putInt("current_page", arg0);
    myFragment.setArguments(data);
    return myFragment;  //this hopefully gets passed back to onCreateView()
} 
```

然后`setText(mCurrentPage)`像他们在`onCreateView()`设置页面文本中所做的那样使用。我可能错过了一些东西，因为我在脑海中做了所有这些，但我想这样的事情会让你开始。希望它可以工作，因为之前没有使用它需要做很多工作：D

# jquery - 字符串 - 来自隐藏 iframe 内 src 的 jquery 匹配

> ID：14282311
> 
> 赞同：0
> 
> 时间：2013-01-11T16:22:31.997
> 
> 标签：jquery, string, iframe, match, src

我正在处理的文档在表格上有一个名称列表，每一行都有一个与名称对应的唯一 ID。我想要做的是让 jquery 搜索来自另一个站点的隐藏 iframe 中的名称：

```
<iframe style="display: none" ID="websrc" src="https://sites.google.com/site/andsamyong/"></iframe>

<div id="names">
<table border="1">
<tr><td>Name</td></tr>
<tr id="sam"><td>Sam</td></tr>
<tr id="james"><td>James</td></tr> 
```

并为其添加`style="display: none"`属性。由于同源政策，它可能无法通过我希望使用的简单方法来完成，因为我不太精通 Javascript，更不用说使用 Jquery。

谢谢你。- 山姆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:24:32.050

由于同源策略，这是不可能的，除非您从请求数据的跨域站点具有特殊访问权限。（而且因为它是谷歌，我很确定你没有那个访问权限。）

# php - 无法使用 JFactory:getEditor 保存换行符

> ID：14282316
> 
> 赞同：1
> 
> 时间：2013-01-11T16:22:51.463
> 
> 标签：php, joomla

在`JFactory::geteditor()`我无法保存换行符。有什么办法可以使这项工作吗？

# asp.net - 如何在 div 内的数据网格右侧附加滚动条？

> ID：14282317
> 
> 赞同：1
> 
> 时间：2013-01-11T16:22:53.467
> 
> 标签：asp.net, datagrid, scrollbar

我正在创建一个`div`包含 Datagrid 的可滚动对象，如下所示：-

```
<div id="myDiv"
     style="overflow: auto; height: 300px; "
     onscroll="myFunction();">
     <asp:DataGrid id="gradesGrid"
     .
     .
     .
     </asp:DataGrid>
</div> 
```

并且滚动条正式出现。但是，正如我所希望的那样，它并没有被附加到内容的右侧`div`，而是遮挡了 DataGrid 的右侧边缘。这会导致出现烦人的水平滚动条。有没有办法说服`div`将滚动条附加到 DataGrid 的外部而不是它的顶部？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:27:22.940

据我所知，**目前不支持此功能。**

如果您不介意 div 中垂直滚动条的轻微中断，只需应用以下内容：

```
overflow-x: hidden; 
```

要隐藏水平滚动条（上图），或者增加 div 的大小 = 滚动条的像素宽度。也许实现一些填充？

```
padding-right: <value of the width of the scrollbar>; 
```

**编辑：** *我建议填充的原因是因为你说你想要它在外面，现在你不能这样做，但如果它在外面，那么其他内容就必须用边距或填充来调整 - 所以真的没关系（这可能是您不能首先将滚动条设置在外部的原因）。

例如，如果您在外面有滚动条，并且它是 10px 宽，您将需要在其他 div 或它旁边的任何东西上设置一个规则，以便在它的一侧有 10px 的边距，以“触及”该滚动条。在包含的元素上添加填充更容易。***编辑结束。**

您还可以设置滚动条的宽度，例如在 webkit 上：

```
::-webkit-scrollbar 
{
    width: 10px;
    height: 10px;
} 
```

这是一个非常夸张的例子：http: [//jsfiddle.net/eFhnN/](http://jsfiddle.net/eFhnN/)

# jquery - 通过 Ajax 使用 Javascript 设置 Rails/Ruby 变量

> ID：14282318
> 
> 赞同：2
> 
> 时间：2013-01-11T16:22:57.003
> 
> 标签：jquery, ruby-on-rails, ruby, ajax, cookies

在我的导航列表中，我有一个包含所有用户的下拉框选择，仅供管理员使用。管理员可以选择一个用户，并通过ajax更新视图以显示所选用户的信息。

视图更新如下：

```
$(#Users).change(function() {
    $ajax({
        ... yada yada update information in view. 
```

但是，我想要实现的是，如果我更改为另一个视图/url（例如我的帐户 html.erb 到 mygraph.html.erb）或刷新我的页面，我希望用户下拉框选择与用户选择保持一致我做了。

我想用 Rails cookie 来做到这一点。但我必须重定向到控制器来设置 cookie。

我尝试了一个 POST ajax 调用，

```
$(#Users).change(function() {
  $.ajax({
    ...
    data: {
       "<%= cookies[:selected] %>": this.value 
```

它不起作用，但出于某种原因，我已经怀疑它会这么简单。

我应该如何实施这个解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:32:47.063

您不必重定向到控制器操作。您可以对控制器操作进行 ajax 调用。您可以在控制器操作中设置 cookie，如下所示：

```
 $(function(){
   $('#user_select')change(function(){
     value = $(this).val()
     $.post("controller/action",{selected_value : value}, function(data, status){
       if(status == "success")
       {
         alert(data);
       } 
    });
   return false;
   })
  }) 
```

控制器：

```
 def action
   cookies[:name]=params[:selected_value]
   render :text => "success"
 end 
```

# service - 如何强制 Web 服务只运行一次

> ID：14282320
> 
> 赞同：0
> 
> 时间：2013-01-11T16:23:06.417
> 
> 标签：service, web

我编写了一个 Web 服务，它将一些（敏感）数据输出到经过严格身份验证的客户端。

我被要求让任何单个请求只工作一次，以避免任何安全风险:-(

我在问自己：

*   这个要求对你有意义吗？
*   如果是这样，你将如何做到这一点？我想 - 如果可能的话 - 避免必须保留请求存档......
*   如果它有任何用途，则为服务器上的应用程序选择的语言是 perl。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:32:57.093

我需要有关该服务的更多信息，以确定它是否有意义。但是，我认为不保留某种日志就不可能防止重复请求。也许您可以对请求进行 SHA 哈希处理并将其存储在表中以比较未来的请求哈希？

# jquery - jQuery验证，验证不起作用

> ID：14282322
> 
> 赞同：2
> 
> 时间：2013-01-11T16:23:13.767
> 
> 标签：jquery, jquery-validate

我有一个简单的注册表单，它使用 jQuery validate 来验证表单的内容。但它似乎没有工作。我的 servlet 触发并且表单提交时包含无效数据，无论页面顶部的 jQuery 是什么。下面是我的代码。有人可以帮忙吗？

脚本代码：

```
<head>
    <title>Sign Up</title>
    <meta charset="iso-8859-1">
    <link rel="stylesheet" href="style/style.css" type="text/css">
    <!--[if lt IE 9]><script src="scripts/html5shiv.js"></script><![endif]-->
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/jquery.validate.js" type="text/javascript">
    </script>
    <script src="http://code.jquery.com/jquery-1.8.3.min.js" type="text/javascript">
    </script>
    <script type="text/javascript">
        $().ready(function() {
            // validate the comment form when it is submitted
            $("#signup").validate();

            // validate signup form on keyup and submit
            $("#signup").validate({
                rules: {
                    firstname: "required",
                    lastname: "required",
                    address1: "required",
                    city: "required",
                    county: "required",
                    postcode: "required",

                    password_s: {
                        required: true,
                        minlength: 5
                    },
                    password_s_con: {
                        required: true,
                        minlength: 5,
                        equalTo: "#password_s"
                    },
                    email: {
                        required: true,
                        email: true
                    },

                    agree: "required"
                },
                messages: {
                    firstname: "Please enter your first name",
                    lastname: "Please enter your last name",
                    address1: "Please enter your addres",
                    city: "Please enter your city/town",
                    county: "Please enter your county",
                    postcode: "Please enter your postcode",

                    password: {
                        required: "Please provide a password",
                        minlength: "Your password must be at least 5 characters long"
                    },
                    confirm_password: {
                        required: "Please provide a password",
                        minlength: "Your password must be at least 5 characters long",
                        equalTo: "Please enter the same password as above"
                    },
                    email: "Please enter a valid email address",
                    agree: "Please accept our policy"
                }
            });

        });
    </script>
</head> 
```

表格：

```
<table align="left">
<tr><td align="left">
        <form name="signup" id="signup" action="SignUpServlet" method="post">
            <table width="400px" align="right" class="">
                <fieldset>
                    <legend>Sign Up:</legend>
                    <tr>
                        <td>First Name:</td> <td><input type="text" id="firstname" name="firstname" required="required">*</td>
                    </tr>
                    <tr>
                        <td>Last Name:</td><td><input type="text" id="lastname" name="lastname" required="required">*</td>
                    </tr>
                    <tr>
                        <td>Address Line 1:</td><td> <input type="text" id="address1" name="address1" required="required">*</td>
                    </tr>
                    <tr>
                        <td>Address Line 2:</td><td> <input type="text" id="address2" name="address2"></td>
                    </tr>
                    <tr>
                        <td>City:</td><td> <input type="text" id="city" name="city" required="required">*</td>
                    </tr>
                    <tr>
                        <td>County:</td><td><input type="text" id="county" name="county" required="required">*</td>
                    </tr>
                    <tr>
                        <td>Postcode:</td> <td><input type="text" id="postcode" name="postcode" required="required">*</td>
                    </tr>
                    <tr>
                        <td>Phone:</td><td> <input type="text" id="phone" name="phone"></td>
                    </tr>
                    <tr>
                        <td>Email Address:</td><td> <input type="text" id="email_s" name="email_s" required="required">*</td>
                    </tr>
                    <tr>
                        <td>Password:</td><td> <input type="password" id="password_s" name="password_s" required="required"></td>
                    </tr>
                    <tr>
                        <td>Confirm Password:</td><td> <input type="password" id="password_s_con" name="password_s_con" required="required"></td>
                    </tr>
                    <tr>
                        <td>Privacy Policy:</td><td> <input type="checkbox" class="checkbox" id="agree" name="agree" required="required"></td>
                    </tr>
                    <tr>
                        <td></td><td>
                            <input type="submit" id="lf_submit" value="submit"></td>
                    </tr>
                </fieldset>
            </table>
        </form>
    </td></tr>
<tr><td align="left"> </td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T16:40:16.587

首先，您不需要调用`.validate()`两次。它是多余和多余的，所以删除第一个，自然保留包含选项的那个。

```
$().ready(function() {
        // validate the comment form when it is submitted
        $("#signup").validate(); // <-- REMOVE THIS

        // validate signup form on keyup and submit
        $("#signup").validate({ 
```

`.validate()`在内部调用一次`DOM Ready`以初始化表单。除非您在插件选项中覆盖它们，否则所有验证事件（例如`submit`、等）都是自动的。`keyup`

其次，您在插件*之后**错误地*包含了 jQuery 。

 *无论您使用哪个 jQuery 插件，都**需要首先包含 jQuery...**

```
<script src="http://code.jquery.com/jquery-1.8.3.min.js" type="text/javascript"></script>

<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/jquery.validate.js" type="text/javascript"></script> 
```

**您的代码的工作演示：http:** [**//jsfiddle.net/qUYvS/**](http://jsfiddle.net/qUYvS/)

**文档：http:** [//jqueryvalidation.org/](http://jqueryvalidation.org/)*

# r - 在 -1 和 1 之间规范化矩阵的列

> ID：14282323
> 
> 赞同：2
> 
> 时间：2013-01-11T16:23:15.487
> 
> 标签：r, matrix, normalization

我有一个大矩阵（数千行和数百行），我想在 -1 和 1 之间按列标准化。这是我写的代码：

```
normalize <- function(x) { 
    for(j in 1:length(x[1,])){
        print(j)
        min <- min(x[,j])
        max <- max(x[,j])
        for(i in 1:length(x[,j])){
            x[i,j] <- 2 * (x[i,j] - min)/( max - min) - 1
        }
    }
    return(x)
} 
```

不幸的是，它变慢了。我看过这个：

```
normalize <- function(x) { 
    x <- sweep(x, 2, apply(x, 2, min)) 
    sweep(x, 2, apply(x, 2, max), "/") 
} 
```

它很快，但它在 0 和 1 之间正常化。你能帮我修改一下吗？对不起，我刚开始学习 R

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:37:14.787

`x`在你自己的函数结束时重新调整矩阵怎么样？

```
normalize <- function(x) { 
    x <- sweep(x, 2, apply(x, 2, min)) 
    x <- sweep(x, 2, apply(x, 2, max), "/") 
    2*x - 1
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T17:35:47.893

基准：

```
normalize2 <- function(A) { 
  scale(A,center=TRUE,scale=apply(A,2,function(x) 0.5*(max(x)-min(x))))
}

normalize3 <- function(mat) { 
  apply(mat,2,function(x) {xmin <- min(x); 2*(x-xmin)/(max(x)-xmin)-1})
}

normalize4 <- function(x) { 
  aa <- colMeans(x)
  x <- sweep(x, 2, aa)           # retrive the mean from each column

  2* sweep(x, 2, apply(x, 2, function(y) max(y)-min(y)), "/") 
}

set.seed(42)
mat <- matrix(sample(1:10,1e5,TRUE),1e3)
erg2 <- normalize2(mat)
attributes(erg2) <- attributes(normalize3(mat))
all.equal(  
  erg2,  
  normalize3(mat),   
  normalize4(mat)
  )

[1] TRUE

library(microbenchmark)
microbenchmark(normalize4(mat),normalize3(mat),normalize2(mat))

Unit: milliseconds
             expr      min       lq   median       uq      max
1 normalize2(mat) 4.846551 5.486845 5.597799 5.861976 30.46634
2 normalize3(mat) 4.191677 4.862655 4.980571 5.153438 28.94257
3 normalize4(mat) 4.960790 5.648666 5.766207 5.972404 30.08334

set.seed(42)
mat <- matrix(sample(1:10,1e4,TRUE),10)
microbenchmark(normalize4(mat),normalize3(mat),normalize2(mat))

Unit: milliseconds
             expr      min       lq   median       uq       max
1 normalize2(mat) 4.319131 4.445384 4.556756 4.821512  9.116263
2 normalize3(mat) 5.743305 5.927829 6.098392 6.454875 13.439526
3 normalize4(mat) 3.955712 4.102306 4.175394 4.402710  5.773221 
```

如果列`apply`数较少，解决方案会稍微慢一些，但如果列数很大，则解决方案会稍微快一些。总体而言，性能是相同的数量级。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T16:39:43.320

这将使用相同的方法重新调整矩阵

```
normalize <- function(x) { 
  x <- sweep(x, 2, apply(x, 2, mean))           # retrive the mean from each column
  2* sweep(x, 2, apply(x, 2, function(y) max(y)-min(y)), "/") 
} 
```

}

**编辑**

按照评论中的建议使用`colMeans`当然更快

```
normalize <- function(x) { 
  aa <- colMeans(x)
  x <- sweep(x, 2, aa)           # retrive the mean from each column

  2* sweep(x, 2, apply(x, 2, function(y) max(y)-min(y)), "/") 
}
A <- matrix(1:24, ncol=3)

> normalize(A)
           [,1]       [,2]       [,3]
[1,] -1.0000000 -1.0000000 -1.0000000
[2,] -0.7142857 -0.7142857 -0.7142857
[3,] -0.4285714 -0.4285714 -0.4285714
[4,] -0.1428571 -0.1428571 -0.1428571
[5,]  0.1428571  0.1428571  0.1428571
[6,]  0.4285714  0.4285714  0.4285714
[7,]  0.7142857  0.7142857  0.7142857
[8,]  1.0000000  1.0000000  1.0000000 
```

**`scale`使用基础包的功能进行**编辑****

 **```
scale(A,center=TRUE,scale=apply(A,2,function(x) 0.5*(max(x)-min(x))))
           [,1]       [,2]       [,3]
[1,] -1.0000000 -1.0000000 -1.0000000
[2,] -0.7142857 -0.7142857 -0.7142857
[3,] -0.4285714 -0.4285714 -0.4285714
[4,] -0.1428571 -0.1428571 -0.1428571
[5,]  0.1428571  0.1428571  0.1428571
[6,]  0.4285714  0.4285714  0.4285714
[7,]  0.7142857  0.7142857  0.7142857
[8,]  1.0000000  1.0000000  1.0000000 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T16:30:40.677

怎么样：

```
x[,1] <- (x[,1]-mean(x[,1]))/(max(x[,1])-min(x[,1])) 
```

中的大多数基本函数`R`都是矢量化的，因此无需`for`在代码中包含循环。此代码段将缩放第 1 列的所有内容（您也可以使用该函数`scale()`，尽管它没有最小/最大值选项）。

要创建整个数据集，您可以执行以下操作：

```
Scale <- function(y) y <- (y-mean(y))/(max(y)-min(y))
DataFrame.Scaled <- apply(DataFrame, 2, Scale) 
```

**编辑**：还值得指出的是，您*不想*在函数之后命名值。当你这样做时`min <- min(x)`，它会在你下次请求时给 R 带来一些混乱`min`。**

# for-loop - 减慢 Arduino FOR 循环

> ID：14282324
> 
> 赞同：0
> 
> 时间：2013-01-11T16:23:17.827
> 
> 标签：for-loop, arduino, delay

我正在尝试以下代码。我希望我的 LED 在 2 秒/2000 毫秒内慢慢变暗。编写的这段代码与循环`digitalWrite(2,HIGH)`和`digitalWrite(2,LOW)`. 我怀疑处理器在 255 个步骤中的速度如此之快，以至于淡出持续时间是难以察觉的。

```
void setup () {                        # set pin 2 as output
    pinMode = (2,OUTPUT);
}

void loop () {
    (for int fi=0;fi<255;fi++) {   # fade IN pin2 from 0-254
    analogWrite(2,fi)
    }
    (for int fo=0;fo<255;fo--) {   # fade OUT pin2 from 0-254
    analogWrite(2,fo)
    }
} 
```

我想要一个或两个关于如何减缓褪色和褪色的建议。我最初的想法是`delay(8)`在每个 for 步骤中添加......但这看起来更像是一个阶梯式的功率增加而不是一个平滑的线性淡入淡出吗？这一定是最佳实践还是有更可接受的方式？

还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:29:22.577

我会使用 micros 函数来更好地控制您何时发出写入：

[http://arduino.cc/en/Reference/Micros](http://arduino.cc/en/Reference/Micros)

这不是延迟，而是返回自开发板上线以来经过的微秒数，您可以使用它执行以下逻辑：

```
setup()
{
     t0 = micros()
}

loop()
{
    t1 = micros();
    dt = t1 - t0;
    if (dt > SOME_SMALL_TIME_DELTA)
    {
         increment_or_decrement_led_value_by_one();
         t0 = t1
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T07:53:47.807

是的，你是对的，用微控制器不可能创建真正的线性淡入淡出。输出将始终具有一些最小步长或分辨率。对您来说，问题是“PWM 是否具有足够的分辨率以致无法感知这些步骤？”

PWN 可以分 255 步输出 0 到 100%。这与显示器上每个像素的 8 位分辨率相同。查看任何显示器校准页面，您可能会说服自己 8 位分辨率提供了基本上看起来平滑的刻度。[示例监视器梯度](http://www.lagom.nl/lcd-test/gradient.php)

所以这是您的示例，它每 4 秒使 LED 亮起和熄灭一次。这向您展示了如何在后台执行任务的几种方法。

4 秒切换到关闭使用 Blink without Delay Arduino 文档中描述的方法。每次通过 loop() 检查自上次更改以来经过的时间是否超过指定的时间间隔 - 如果是，则更改状态并标记当前时间。

淡入淡出的完成方式略有不同。你留下了下一次改变发生的时间。每次循环循环（），您都会检查是否是下一个动作的时间。如果是，您进行更改，并存储何时进行下一次更改。

```
/* unfortunately standard LED on pin 13 does not have PWM
You will need to connect an LED and resistor */
const int pin = 3;

/* this is your step time between changes in light 
output in milliseconds */
const unsigned int tstep = 8;

/* this is the time then next change can be made.
The change will happen at or after this value. */
unsigned int tnext = 0;

/* this is the current and target light level 
The output will slowly ramp until the current value
meets the target.  So to request that the change start,
the code just sets a new target. */
unsigned int target = 0;
unsigned int current = 0;

/* These are from Blink without Delay 
Shows another way to execute delays. */
unsigned long previousMillis = 0;
unsigned long interval = 4000;

void setup() {
   pinMode(pin,OUTPUT);
   tnext = millis() + tstep;
   analogWrite(pin, current);
}

/* something in the code calls this
to request a change in the LED state 
Pass what you want to be the new value
and the LED will slowly change to that value. */
void newTarget(int value) {
   tnext = millis() + tstep;
   target = value;
}

/* call this frequently to update the LED 
If the time of the next action has been reached,
execute the change and setup when the following
change will occur. */
void driveLed() {
   unsigned int tnow = millis();

   if(target != current) {
      if(tnow >= tnext) {
         if(target > current) {
            current += 1;
         }
         else {
            current -= 1;
         }
         analogWrite(pin, current);
         tnext += tstep;
      }
   }
}

/* Note that the main loop has no delays.
Execution will spin rapidly through this, most times
checking and finding nothing to to.
You would add your other functionality here, and this 
LED would continue to happen.  As long as you don't pack 
anything that takes on the order of 8 ms, you won't notice
a change in the LED fade behavior.
void loop() {
   unsigned int tnow = millis();

   // some other logic here would decide when to change the LED state
   // For this sample, just toggle every 4 seconds
   if((tnow - previousMillis) >= interval) {        
      if(0 == target) {
         newTarget(255);
      }
      else {
         newTarget(0);
      }
      previousMillis = tnow;
   }

   driveLed();
} 
```

# javascript - 有条件的 ng 重复

> ID：14282325
> 
> 赞同：1
> 
> 时间：2013-01-11T16:23:19.537
> 
> 标签：javascript, angularjs, underscore.js

在这样的例子中：

```
<div ng-repeat="i in ['1','2']" id="tab-{{i}}">
    <div ng-repeat="e in myCollection"> 
     </div>
</div> 
```

在第二次的第一次迭代中，`ng-repeat`我想获得第一个元素，`myCollection`在第二次迭代中，我想获得集合的其余部分：

那么为什么我不能做这样的事情：

```
<div ng-repeat="i in ['1','2']" id="tab-{{i}}">
    <div ng-repeat="e in i == 1 ? _.first(myCollection) : _.rest(myCollection, 1)"> 
    </div>
</div> 
```

underscore.js 方法非常有用，但不幸的是，这个技巧不起作用。

那么我怎么能在不涉及代码隐藏javascript的情况下在标记中做这样的事情呢？我知道，我知道这可能不是正确的做法，但我很好奇这是否可能......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:29:53.870

Angular[表达式](http://docs.angularjs.org/guide/expression)看起来像 javascript，但实际上是它的一个子集，并且不允许在其中包含任何类型的控制流语句。要完成您想做的事情，您需要在控制器中设置内部 ng-repeat 数组。

# c++ - 得到错误说“未定义的引用...”用c ++

> ID：14282326
> 
> 赞同：0
> 
> 时间：2013-01-11T16:23:20.937
> 
> 标签：c++, linker-errors

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

```
#include <FakeMas.h>
#include <zinc-testsupport-client-api/ClientFactory.h>
#include <zinc-testsupport-client-api/Process.h>
#include <zinc-testsupport-client-api/ProcessCreator.h>

    FakeMas::FakeMas() {    
        ClientFactory &clientFactory(PluginFactory::getInstance<ClientFactory>(pluginConfig));
        boost::shared_ptr<ProcessCreator> webServerProcessCreator = clientFactory.createProcessCreator();
    } 
```

当我构建它时，我收到一条错误消息：

```
...../src/.libs/libZincTestWebServer.so: undefined reference to `zinc::testsupport::client::ClientFactory::createProcessCreator()' 
```

有趣的是，如果我注释掉课程的第二行

```
boost::shared_ptr<ProcessCreator> webServerProcessCreator = clientFactory.createProcessCreator() 
```

然后它将建立成功

所以我感到困惑，似乎没有链接问题，因为它可以构建

```
ClientFactory &clientFactory(PluginFactory::getInstance<ClientFactory>(pluginConfig)) 
```

那么它如何找到类但找不到功能？

顺便说一句，我认为该函数是以正确的方式声明和定义的：

```
boost::shared_ptr<ProcessCreator> ClientFactory::createProcessCreator() {
    .........
} 
```

有人知道吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:03:08.220

我建议检查您定义（未声明）类的源文件`ClientFactory`，并确保您有方法的实现`createProcessCreator()`。即使声明了其中一个方法但未实现，当然也可以拥有一个有效的类并创建它的实例。

还要检查您的链接命令，以确保您正在链接您认为包含此方法的目标文件。

PS 还要检查该方法的拼写和大小写，以确保它在任何地方都匹配（尽管我认为如果这是问题所在，您会遇到其他编译错误）。

# java - 如何检查使用 JavaService.exe 创建的 Windows 服务是否已正确执行方法且没有错误

> ID：14282327
> 
> 赞同：0
> 
> 时间：2013-01-11T16:23:21.510
> 
> 标签：java, exception, windows-services

我使用 JavaService 创建了一个 Windows 服务。然后，我通过调用命令“net start MyService”通过我的 java 应用程序启动它。

我的问题是启动服务的调用方法抛出了一个java异常，但是windows服务管理器没有检测到它并且服务状态变成了启动。

问题是如何从 Windows 服务管理器中获取调用启动/停止服务方法时出现 java 异常的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:08:54.463

无法从 Windows 服务获取该信息（调用 start 方法时出现 java 异常）。

我们只能安装/启动/停止/删除一个windows服务，不能再多了！！

# php - 动画 gif 在表单处理期间不动画

> ID：14282330
> 
> 赞同：0
> 
> 时间：2013-01-11T16:23:34.343
> 
> 标签：php, jquery, spinner

```
<form action="reg.php" method="post" onsubmit="spinn()">
 ... 
```

表单处理时间长约 7 秒。（里面有phpMailer）

```
function spinn(){
    $('#loading').html("<img src='spinn.gif' />");
} 
```

`spinn.gif`在那里，但是 - 它没有动画！保留为普通图像。
同时（在表单处理期间）Firefox 选项卡上的微调器 - 是动画的。

我的 RAM 是 4GB - 如果重要的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:31:44.110

只是一个想法...您可以尝试在其中启动 html

`<img src='spinn.gif' style='display: none;' />`

然后在您的代码中：

```
function spinn(){
    $('#loading').show();
} 
```

可能需要预加载图像，并且在提交表单时可能无法执行此操作。

# c# - 为什么我们不能在另一个类方法之外使用类方法？

> ID：14282335
> 
> 赞同：4
> 
> 时间：2013-01-11T16:23:42.040
> 
> 标签：c#, oop

这是我的问题：

```
class A
{
    B mB = new B();  //this is fine
    int y = mB.method1(); //this is error;

    public void method2()
    {
        int x = mB.method1(); //this is fine
    }
} 
```

有人可以解释上述差异吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T16:25:53.527

使用类中的方法初始化[字段](http://msdn.microsoft.com/en-us/library/ms173118.aspx)（与声明同时）必须在类的*实例*上完成。

由于在初始化字段时不允许引用实例本身（参见 C# 语言参考版本 4.0 中的第 10.5.5.2 节和[Eric Lippert 的评论](https://stackoverflow.com/questions/14282335/why-we-cannot-use-class-method-outside-another-class-method/14282376#comment19837401_14282376)）（因为字段初始化发生在任何构造函数执行之前），所以这不是可能的。

如果调用的方法是静态的（因此在类型上声明），那么您*可以*调用它，因为静态成员在实例成员之前被初始化。

* * *

现在，字段初始化的顺序不能保证——这意味着编译器*可能*决定`y`在`mB`. 在这种情况下，如果允许在一个字段上调用一个方法来初始化另一个字段，您会得到一个`NullReferenceException`. 最好首先避免该问题，并且不允许这种行为。

# c# - 枚举所有可能的平局，掷出 N 个 X 面骰子

> ID：14282342
> 
> 赞同：0
> 
> 时间：2013-01-11T16:23:58.177
> 
> 标签：c#, combinatorics, dice

给定 n 个骰子，每个骰子都有 x 面，我试图列举所有可能的抽奖。例如，如果我们有 10 个三面骰子，并且它们都落在值 1 面：
10 00 00
我有一个启发式方法（EnumerateDrawsH），它只适用于预先定义的面数和一个递归方法（EnumerateDrawsR ) 适用于任意数量的边。目前，我的 R 版本的性能远低于 H。在 R 中，我需要一种有效的方法来跟踪正在写入的绘图中的骰子总数，这应该是 sum 参数，但它是不正确的。我发现的唯一解决方法是在递归的每个级别上重做总计并将其存储在 drawSum 局部变量中，该变量经过测试以结束递归。有谁知道如何在 sum 参数中获得正确的值？

```
using System;
using System.Diagnostics;
using System.IO;
using System.Text;

static class EnumerateDicesDraws
{
  public static void Run()
  {
    int nbDices = 10;
    Stopwatch watch;

    watch = Stopwatch.StartNew();
    EnumerateDicesDraws.EnumerateDrawsH(nbDices);
    watch.Stop();
    Console.WriteLine(watch.Elapsed);

    watch = Stopwatch.StartNew();
    EnumerateDicesDraws.EnumerateDrawsR(nbDices, 3);
    watch.Stop();
    Console.WriteLine(watch.Elapsed);

    Console.ReadKey(true);
  }

  public static void EnumerateDrawsR(int nbDices, int nbSides)
  {
    string filePath = Path.Combine(Path.GetTempPath(), string.Concat("Draws[R]", nbDices, ".txt"));
    int[] dices = new int[nbSides];
    using (StreamWriter writer = new StreamWriter(filePath, false))
      EnumerateDrawsR(0, 0, nbDices, dices, writer);
  }
  private static void EnumerateDrawsR(int index, int sum, int nbDices, int[] dices, StreamWriter writer)
  {
    int drawSum = 0;
    for (int i = 0; i < dices.Length; i++)
    {
      drawSum += dices[i];
      if (drawSum == nbDices)
      {
        for (int j = 0; j < dices.Length - 1; j++)
          writer.Write(string.Format("{0:D2} ", dices[j]));
        writer.Write(string.Format("{0:D2} ", dices[dices.Length - 1]));
        writer.Write(string.Format("{0:D3}", sum));
        writer.WriteLine();
        for (; index < dices.Length; index++)
          dices[index] = 0;
        return;
      }
    }
    /*
    if (sum == nbDices)
    {
        for (int j = 0; j < dices.Length; j++)
            writer.Write(string.Format("{0:D2} ", dices[j], j < dices.Length - 1 ? " " : null));
        writer.WriteLine();
        for (; index < dices.Length; index++)
            dices[index] = 0;
        return;
    }
      */
    if (index < dices.Length)
    {
      EnumerateDrawsR(index + 1, sum + dices[index], nbDices, dices, writer);
      EnumerateDrawsR(index, sum + ++dices[index], nbDices, dices, writer);
    }
  }
  public static void EnumerateDrawsH(int nbDices)
  {
    StringBuilder draws = new StringBuilder();
    string format = "{0:D2} {1:D2} {2:D2}\r\n";
    int cumul = 0;
    int[] dices = new int[3];
    for (dices[0] = 0; dices[0] <= nbDices; dices[0]++)
    {
      cumul = dices[0];
      if (cumul == nbDices)
      {
        for (int i = 1; i < dices.Length; i++)
          dices[i] = 0;
        draws.AppendFormat(format, dices[0], dices[1], dices[2]);
        break;
      }
      for (dices[1] = 0; dices[1] <= nbDices; dices[1]++)
      {
        cumul = dices[0] + dices[1];
        if (cumul == nbDices)
        {
          for (int i = 2; i < dices.Length; i++)
            dices[i] = 0;
          draws.AppendFormat(format, dices[0], dices[1], dices[2]);
          break;
        }
        for (dices[2] = 0; dices[2] <= nbDices; dices[2]++)
        {
          cumul = dices[0] + dices[1] + dices[2];
          if (cumul == nbDices)
          {
            draws.AppendFormat(format, dices[0], dices[1], dices[2]);
            break;
          }
        }
      }
    }
    File.WriteAllText(Path.Combine(Path.GetTempPath(), string.Concat("Draws[H]", nbDices, ".txt")), draws.ToString());
  }
} 
```

* * *

编辑

她是 nlucaroni 建议的解决方案，递归退出条件是固定的。

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Linq;

static class Programm
{
  static void Main()
  {
    var watch = Stopwatch.StartNew();
    var outputFile = DiceRoll.Draws(nbDicesTotal: 10, nbValues: 6);
    watch.Stop();
    Console.WriteLine(watch.Elapsed);

    Console.WriteLine();

    Console.WriteLine("Output to :");
    Console.WriteLine(outputFile);

    Console.ReadKey(true);
  }
}

static class DiceRoll
{
  /// <summary>
  /// Writes all possible draws (or distributions) for a given number of dices having a given number of values
  /// </summary>
  /// <param name="nbDicesTotal">Total number of dices rolled</param>
  /// <param name="nbValues">Number of different values of each dice</param>
  /// <returns>Output file path in system temporary folder</returns>
  public static string Draws(int nbDicesTotal, int nbValues)
  {
    var filePath = Path.Combine(Path.GetTempPath(), string.Format("DiceDraws[{0}].txt", nbDicesTotal));
    var distribution = new int[nbValues];
    using (var writer = new StreamWriter(filePath, false))
      foreach (var draw in Draws(0, 0, nbDicesTotal, distribution))
        //Call to Select method adds huge cost of performance. Remove call to Select to compare.
        writer.WriteLine(string.Join(" ", draw.Select(x => x.ToString("D2"))));
    return filePath;
  }

  /// <summary>
  /// Returns all possible draws (or distributions) for a given number of dices having a given number of values
  /// </summary>
  /// <param name="distributionIndex">We are incrementing the number of dices of this value</param>
  /// <param name="nbAddedDices">Number of  dices (up to nbDicesTotal) considered in the recursion. EXIT CONDITION OF THE RECURSION</param>
  /// <param name="nbDicesTotal">Total number of dices rolled</param>
  /// <param name="distribution">Distribution of dice values in a draw. Index is dice value. Value is the number of dices of value 'index'</param>
  /// <returns>All possible draws</returns>
  /// <remarks>Recursive methode. Should not be called directly, only from the other overload</remarks>
  static IEnumerable<IEnumerable<int>> Draws(int distributionIndex,
                                             int nbAddedDices,
                                             int nbDicesTotal,
                                             int[] distribution)
  {
    // Uncomment for exactness check
    // System.Diagnostics.Debug.Assert(distribution.Sum() == nbAddedDices);

    if (nbAddedDices == nbDicesTotal)
    {
      yield return distribution;

      nbAddedDices -= distribution.Length - distributionIndex;
      for (; distributionIndex < distribution.Length; distributionIndex++)
        distribution[distributionIndex] = 0;
    }

    if (distributionIndex < distribution.Length)
    {
      foreach (var draw in Draws(distributionIndex + 1, nbAddedDices, nbDicesTotal, distribution))
        yield return draw;

      distribution[distributionIndex]++;

      foreach (var draw in Draws(distributionIndex, nbAddedDices + 1, nbDicesTotal, distribution))
        yield return draw;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:31:56.410

`x`您可以通过用`n`数字计算基数来枚举所有抽奖。

例如，将数组中的所有骰子初始化为最小值，假设骰子的标签是 from`0`到`(x-1)`。然后，你从一个 's 数组开始`0`，这是第一个和最低的值，然后你可以增加最右边的直到它等于`x-1`，你增加第二个骰子，重置第一个骰子，然后继续，等等。

计算机编程艺术第 4 卷：分册 3 包含大量信息，如果您需要按特定顺序列举它们。

# ios - UICollectionViewController 中的 ALAsset 不显示图像

> ID：14282346
> 
> 赞同：0
> 
> 时间：2013-01-11T16:24:08.960
> 
> 标签：ios, objective-c, xcode, uicollectionview, alassetslibrary

我在 collectionViewCell 的每个项目中显示设备库中的 ALAssets 列表时遇到问题。

我的图像在收藏视图中不可见。我尝试了我在亲戚帖子中找到的所有解决方案，但我没有找到答案......为什么？

这是我的开发环境：

iPhone5，IOS 6.0.2，XCode 4.5，使用 ARC 和故事板。

这是我的代码：

**1\. 首先，我在委托中获取带有设备媒体的 MutableArray：**

*#AppDelegate.m*

```
 -(void)loadPhotosFromDevice
 {
    //deviceMedia = [[NSMutableArray alloc] init];
    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

    // Enumerate just the photos and videos group by using ALAssetsGroupSavedPhotos.
    if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
    {
        [library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos     usingBlock:^(ALAssetsGroup *group, BOOL *stop)
         {
             // Within the group enumeration block, filter if necessary
             [group setAssetsFilter:[ALAssetsFilter allPhotos]];
             [group enumerateAssetsUsingBlock:^(ALAsset *alAsset, NSUInteger index,     BOOL *innerStop)
              {
                  // The end of the enumeration is signaled by asset == nil.
                  if (alAsset)
                  {
                      ALAssetRepresentation *representation = [alAsset defaultRepresentation];

                      [self addPhoto:representation andAsset:alAsset];
                  }
                  else
                  {
                      //NSLog(@"Done! Count = %d", deviceMedia.count);
                      //Do something awesome
                  }
              }];
         }
                             failureBlock: ^(NSError *error) {
                                 // Typically you should handle an error more gracefully than this.
                                 NSLog(@"No groups");
                             }];
    }
} 
```

**2\. 我在“媒体”对象类中使用“AddPhoto”方法发送所有数据：**

*#AppDelegate.m*

```
 -(void)addPhoto:(ALAssetRepresentation *)asset andAsset:alAsset
    {
    //NSLog(@"Adding photo!");

    Media *media = [[Media alloc] init];
    media.baseurl = @"";
    media.url = [asset.url absoluteString];

    Thumbnail *t = [[Thumbnail alloc] init];
    t.rep = asset;
    t.url = [asset.url absoluteString];

    media.thumbnails = [[Thumbnail alloc] initWithRepresentation:asset];
    media.name = asset.filename;
    media.asset = alAsset;
    media.isFromDevice = YES;
    [getPhotos addObject:media];
    NSLog(@"\nDevice Photo added array");
    } 
```

*#Media.h*

```
 import <AssetsLibrary/AssetsLibrary.h>

 @interface Media : NSObject
 {
    //General
    AudioInfo *audioInfo;
    Info *info;
    Header *header;
    Status *requestStatus;
    Exif *exif;
    Thumbnail *thumbnails;
    NSString *name;
    NSString *uploaddt;
    NSString *baseurl;
    NSString *url;
    NSString *createdt;
    NSString *takendt;
    NSString *recorddt;
    ALAsset *asset;
    bool isFromDevice;
}
//General

    @property (nonatomic, retain) Thumbnail *thumbnails;
    @property (nonatomic, retain) Status *requestStatus;
    @property (nonatomic, retain) NSString *name;
    @property (nonatomic, retain) NSString *uploaddt;
    @property (nonatomic, retain) NSString *baseurl;
    @property (nonatomic, retain) NSString *url;
    @property (nonatomic, retain) NSString *createdt;
    @property (nonatomic, retain) NSString *takendt;
    @property (nonatomic, retain) NSString *recorddt;
    @property (nonatomic, retain) ALAsset *asset;
    @property (nonatomic, readwrite) bool isFromDevice;

@end 
```

**3\. 然后我将它们显示在 CollectionViewController 中：**

*#PhotoDisplayCloudViewController*

```
@implementation PhotoDisplayCloudViewController

- (void)viewDidLoad {
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    tableau = appDelegate.getPhotos;
    [super viewDidLoad];
}

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView{
    return 1;
}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section{
    return tableau.count;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{
    //CELL
    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"cell" forIndexPath:indexPath];
    Media *object = [[Media alloc] init];
    object = [tableau objectAtIndex:indexPath.row];

    //IMAGE
    NSString *url = [NSString stringWithFormat:@"%@%@", object.baseurl, object.thumbnails.url];
    NSLog(@"%@ start loading", object.name);
    UIImageView *image = [[UIImageView alloc] init];
    if (object.isFromDevice)
    {    
        image = [[UIImageView alloc] initWithImage:[UIImage imageWithCGImage :[object.asset.self thumbnail]]];          
    }
    else
    {
        image = [[UIImageView alloc] initWithImage:[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString: url]]]];
    } 
    [image setFrame:CGRectMake(image.frame.origin.x, image.frame.origin.y, 72, 72)];

    //LABEL
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(image.frame.origin.x+6, image.frame.origin.y+58, 60, 12)];
    label.textAlignment = NSTextAlignmentCenter;
    label.textColor = UIColor.blackColor;
    label.contentMode = UIViewContentModeBottom;
    label.font = [UIFont fontWithName:@"Times New Roman" size:9];
    label.text = object.name;

    //ADD VIEWS

    [cell addSubview:image];
    [cell addSubview:label];
    NSLog(@"%@ end loading", object.name);

    return cell;
}

- (void)didGrabImage:(UIImage *)image {
    [collectionCell addSubview:image];
}

- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
    PhotoDetailViewController *photoDetailViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"photoDetail"];
    photoDetailViewController.MaPhoto=[tableau objectAtIndex:indexPath.row];
    [self.navigationController pushViewController:photoDetailViewController animated:YES];

} 
@end 
```

请清楚地回答我^^

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:39:46.340

我找到了我的问题的答案：

感谢“adaydesign 的博客”，我使用这种方法将我的资产加载到 UIImageView 中：

它完美无缺！

```
-(void)loadPhotoFromURL:(NSURL*)imgURL thumbnail:(BOOL)useThumbnail showIn:(UIImageView*)imView{

     if (imgURL!=nil) {

        ALAssetsLibraryAssetForURLResultBlock resultBlock = ^(ALAsset *myasset){

             CGImageRef iref;

             if (useThumbnail) {

                 iref = [myasset thumbnail];

             }else {

                 ALAssetRepresentation *rep = [myasset defaultRepresentation];

                 iref = [rep fullScreenImage];

             }

             if (iref) {

                 UIImage *resPhoto = [UIImage imageWithCGImage:iref];

                     //NSLog(@"photo size:%f x %f",resPhoto.size.width,resPhoto.size.height);

                 imView.image = resPhoto;

              }

        };//end result block

        ALAssetsLibraryAccessFailureBlock failureBlock = ^(NSError *error){

            NSLog(@"error....");

        };//end failureBlock

        ALAssetsLibrary *assetLib = [[[ALAssetsLibrary alloc] init] autorelease];

        [assetLib assetForURL:imgURL

                  resultBlock:resultBlock

                 failureBlock:(ALAssetsLibraryAccessFailureBlock)failureBlock];

      }//end if

}//end function 
```

# php - CodeIgniter 分页无法按预期工作

> ID：14282350
> 
> 赞同：0
> 
> 时间：2013-01-11T16:24:20.110
> 
> 标签：php, codeigniter, pagination

我正在**CodeIgniter 2.1.3**中创建分页。每个链接的 url 都缺少我为它们创建的 base_url。例如，当我将**鼠标悬停**`localhost/2`在它们上时，它们仅显示或`localhost/3,...`在这些链接上。

 **这是我的控制器：

```
public function default_page() {
    $values = $this->maction->get_user_info( $_SESSION['id'] );
    if ( $values ) {
        $congif['base_url'] = base_url()."home/default_page/";
        // I aslo tried
        // $congif['base_url'] = site_url("home/default_page/");
        $config['total_rows'] = $this->maction->get_all_num_rows();
        $config['per_page'] = 10;
        $config['num_links'] = 5;
        $offset = 3;
        // I also tried
        // $offset = $this->uri->segment( 3 );
        $config['last_tag_open'] = "<div class='pagination'>";
        $config['last_tag_close'] = "</div>";
        $config['prev_link'] = "&laquo;";
        $config['next_link'] = "&raquo;";
        // $config['use_page_numbers'] = TRUE;
        $this->pagination->initialize( $config );                   
        $data['posts'] = $this->maction->get_all_posts( $config['per_page'] , $offset );
        $data['pagination'] = $this->pagination->create_links();

        $this->load->view('template/header');
        $this->load->view('default', $data);
        $this->load->view('template/footer');
    }
} 
```

这是我的模型：

```
public function get_all_posts( $per_page, $offset ) {
    $sql = "SELECT * FROM user INNER JOIN content 
            ON user.user_id = content.crby ORDER BY 
            content.content_id DESC LIMIT $per_page, $offset";
    return $this->db->query( $sql );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:08:32.997

应该是`$config['base_url']`，不是`$congif`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:29:54.333

我认为它应该是 base_url() 而不是 base_url。**

# jquery - IE中的shadowbox问题

> ID：14282351
> 
> 赞同：0
> 
> 时间：2013-01-11T16:24:20.347
> 
> 标签：jquery, internet-explorer, jwplayer, shadowbox

我有一个在影子框中播放多个视频的网页：http: [//www.videospresentia.es](http://www.videospresentia.es)

它在 Chrome、Safari 和 Firefox 中运行良好。但我在 IE 中有一个问题：只有当鼠标悬停在视频窗口上时，视频才会播放。关于如何解决这个问题的任何想法？

# javascript - 使用JS从url获取变量

> ID：14282356
> 
> 赞同：-3
> 
> 时间：2013-01-11T16:24:31.097
> 
> 标签：javascript, jquery, regex

> **可能重复：**
> [如何获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)

我有这个链接

url/merchant.html?id=45

我正在尝试使用 JS 或 JQuery 获取 ID，但没有成功。

我试过这段代码

```
var urlParams = {};
(function () {
    var match,
        pl     = /\+/g,  // Regex for replacing addition symbol with a space
        search = /([^&=]+)=?([^&]*)/g,
        decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
        query  = window.location.search.substring(1);

    while (match = search.exec(query))
       urlParams[decode(match[1])] = decode(match[2]);
})(); 
```

它返回“未定义”

代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:27:12.207

在这里使用这个：

```
function getParameterByName(name)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

所以在你的情况下：

```
getParameterByName("id") 
```

来自： [如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:27:50.857

我不久前写了这个函数：

```
/**
 * Retrieves the value of a query string parameter.
 * @param string href The full URL
 * @param string key The key in the query string to search for.
 * @param variant def The default value to return if the key doesn't exist.
 * @returns variant if key exists returns the value, otherwise returns a default value.
 */
function getURIParam(href, key, def) {
    if (arguments.length == 2) def = null;
    var qs = href.substring(href.indexOf('?') + 1);
    var s = qs.split('&');
    for (var k in s) {
        var s2 = s[k].split('=');
        if (s2[0] == key)
            return decodeURIComponent(s2[1]);
    }
    return def;
} 
```

你会像这样使用它：

```
var href = "http://www.example.org?id=1492";
var id = getURIParam(href, "id", 0);
//Output of id: 1492 
```

如果密钥不存在：

```
var href = "http://www.example.org?id=1492";
var name = getURIParam(href, "name", "Unnamed");
//Output of name: Unnamed 
```

# android - Android VPNService - 如何从我的活动中调出“系统管理对话框”？

> ID：14282361
> 
> 赞同：1
> 
> 时间：2013-01-11T16:24:35.517
> 
> 标签：android, service, android-activity, system, vpn

根据[本](http://developer.android.com/reference/android/net/VpnService.html)教程，断开 vpn 服务的唯一方法是使用“系统管理对话框”。这可以通过向下拖动通知栏并从那里选择来手动完成，但这不是解决我的问题的好方法。

当按下“断开连接”按钮时，我需要能够从我的应用程序中调出此对话框，但是我找不到任何有关如何执行此操作的文档。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:15:50.010

不幸的是，目前唯一公开和推荐的断开连接的方法就是通过通知。不幸的是，断开甚至打开对话框的功能被隐藏了。

当然，这并不一定意味着它们不能被访问，但是那样会带来很多痛苦。在这种特定情况下我没有尝试过这个，但我过去做过这个，很早以前，用音乐播放器找出正在播放的内容（用于音频乱码）。因此，如果您绝对必须找到一种方法来做到这一点，无论多么 hacky，那么您都可以尝试这个，但请记住，'ere be dragons - 这涉及访问您不应该访问的私有 API。该 API 可以在任何两个给定的 android 版本（不仅仅是平台版本）之间随心所欲地改变，因为它应该是私有的和内部的。您需要使您的代码对这里的故障非常有弹性，坦率地说，它永远不会比 hacky 和 ​​PITA 更重要。

对，说了这么多，[见第 171 行](https://android.googlesource.com/platform/packages/apps/Settings/+/e7565f3c48e6c90e65d9c15e33d20673a187c156/src/com/android/settings/vpn/AuthenticationActor.java)

这就是你想要做的。除了你看不到你需要的东西，对吧？所以你需要[这个 AIDL 来提供服务](http://www.netmite.com/android/mydroid/donut/frameworks/base/vpn/java/android/net/vpn/IVpnService.aidl)（可能还有一点反思，我忘记了 - 很长时间没有这样做了）。

[这篇博文](http://blog.codetastrophe.com/2008/12/accessing-hidden-system-service-apis-in.html)描述了一些类似的东西，虽然没有很详细。很难找到谈论的事情，因为这是一种非常令人沮丧的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:14:36.753

我认为关闭 tun descript 并让服务结束就可以了。这将有效地结束 VPN（但有问题的应用程序仍将保留再次打开 VPN 的权限）。通知（钥匙符号）也将消失。如果您正在尝试另一个可能更难的应用程序的 VPNService。也许您应该向该应用程序的作者询问 API。

# putty - 无法使用 PuTTY ssh 连接

> ID：14282364
> 
> 赞同：1
> 
> 时间：2013-01-11T16:24:44.933
> 
> 标签：putty

我在 Windows 7 机器上并安装了 PuTTY。我正在尝试连接，但由于密码错误，身份验证失败。但是，我连接的虚拟机没有密码？

以下是我正在尝试使用的信用：

```
Host: 127.0.0.1
Port: 2222
Username: vagrant
Private key: c:/users/<username>/.vagrant.d/insecure_private_key 
```

当我打开 PuTTY 时，我输入上述凭据并单击打开，此时它要求输入用户名并输入“vagrant”，然后它要求输入密码，但没有密码，所以我被拒绝访问?

不知道如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-26T07:55:50.653

“---Begin RSA PRIVATE KEY ....”密钥不是 PuTTY 使用的格式。

*   使用程序 puttygen.exe（与 putty.exe 程序所在的位置相同）来“加载”私钥。
*   从过滤器中选择“所有文件（*.*）”以查看文件 c:/users/.../.vagrant.d/insecure_private_key 并打开它。它会说它已经成功导入外键......
*   然后使用“保存私钥”选项将加载的密钥保存到 *.ppk 文件中。
*   然后将该 ppk 文件用作 PuTTY 中“SSH | Auth”的密钥文件

那应该行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-30T09:05:27.507

我遇到了相反的情况：使用 putty 专有的 .ppk 格式来配置需要 SSH 格式的“config.ssh.private_key_path”。

您还可以使用 puttygen 将 .ppk 格式转换为 SSH 格式。

# java - Spring MVC：没有参数的记录控制器路径

> ID：14282365
> 
> 赞同：3
> 
> 时间：2013-01-11T16:24:50.493
> 
> 标签：java, spring-mvc

我正在尝试向 Spring MVC 应用程序添加一些指标收集。假设我有一个控制器，其映射为：

```
 /User/{username}/Foobar 
```

我想使用路径收集所有控制器映射调用的指标。现在我可以创建一个处理程序/拦截器并查看请求，但这会给我：

```
/User/Charlie/Foobar 
```

这不是我想要的。我希望控制器映射本身记录。而且我不想为每个控制器添加一些东西。如果我能提供帮助，我也宁愿不使用 AOP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T20:06:07.690

事实证明，Spring 将最匹配的控制器模式挂在请求本身上。您可以像这样从处理程序拦截器中获取它：

```
 (String)request.getAttribute(HandlerMapping.BEST_MATCHING_PATTERN_ATTRIBUTE) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T19:34:00.217

我可以想到两个选择：

1.  在我看来，匹配的结果是在类中获得的[`org.springframework.web.servlet.handler.AbstractUrlHandlerMapping`](https://github.com/SpringSource/spring-framework/blob/v3.0.7.RELEASE/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/handler/AbstractUrlHandlerMapping.java)，它记录了获得的模式（见第 266 行）。我会尝试为该类启用日志记录，看看输出是否对您的目的有帮助。

2.  （复杂）

    扩展[`org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping`](https://github.com/SpringSource/spring-framework/blob/v3.0.7.RELEASE/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/annotation/DefaultAnnotationHandlerMapping.java)以覆盖`lookupHandler`继承自`AbstractUrlHandlerMapping`并记录/注册您需要的方法。根据[此类文档](https://github.com/SpringSource/spring-framework/blob/v3.0.7.RELEASE/org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/annotation/DefaultAnnotationHandlerMapping.java#L40)，您可以注册一个不同的文档，以便`DispatcherServlet`使用您的版本。

    在 Spring 3.2.x`DefaultAnnotationHandlerMapping`中已弃用，因此必须使用不同的类。

# svg - 点击第一个后更新第二个条形图 - d3js

> ID：14282366
> 
> 赞同：0
> 
> 时间：2013-01-11T16:24:52.473
> 
> 标签：svg, d3.js

我想创建两个条形图并在单击第一个条形图中的一个 rect 元素时更新第二个条形图。

例如：

带有 data1 = [1,2,3,4,5] 的图表；带有 data2 = [6,7,8,9,10] 的图表；

单击高度为 2 的矩形时，我的意思是图表 1 中的第二个元素，所有图表 2 元素必须更新为 newdata = [4,5,6,7,8]

更新数据后，图表 2 应以蓝色显示旧数据，以黄色显示更新数据。

关于如何做到这一点的任何想法？我被困在控制chart2上。

谢谢！

这是我试图实现上述场景的示例代码

```
function svg_int(data){

console.log(data);

var svg = d3.selectAll("svg");

var w = 100,
    h = 500,
    barPadding =3,
    scale = 10,
    //max = d3.max(data);
    max = 200000;

var svg = d3.select('#chartDisplay')
    .append("svg")
    .attr("width",w)
    .attr("height",h);

console.log(svg);

var y = d3.scale.linear().range([h,0]),
    yAxis = d3.svg.axis().scale(y).ticks(5).orient("left"),
    x = d3.scale.linear().range([0, w]);

y.domain([0, max]).nice();
x.domain([0, data.length]).nice();

console.log(svg);

var rect = svg.selectAll("rect")
    .data(data, function(d,i) { console.log(i); console.log(d); return i;});

console.log(rect);

rect.enter().append("rect")
    .attr("class","original")
    .attr("x", function(d,i) {return x(i);})
    .attr("y", function(d,i) {console.log(d); return y(d);})
    .attr("width", w / data.length - barPadding)
    .attr("height", function(d) {return h - y(d);})
    .attr("fill", "rgb(90,90,90)");

console.log(rect);

svg.append("svg:g")
    .attr("class", "y axis")
    .attr("transform", "translate(-4,0)")
    .call(yAxis);  

rect.on("click", function(d) {
    console.log(d);
    });

    rect.exit().remove();  }

   data1 = [1,2,3,4,5];
   data2 = [6,7,8,9,10];

   var chart1 = new svg_int(data1);
   var chart2 = new svg_int(data2); 
```

# jquery - 防止默认操作。仅在 chrome 中工作

> ID：14282367
> 
> 赞同：1
> 
> 时间：2013-01-11T16:24:55.047
> 
> 标签：jquery, drag-and-drop, preventdefault

查询：

```
$(document).ready(function () {
   $('input[type=file]').uploadImage();
   jQuery.event.props.push('dataTransfer');
   $(".upload-cont").bind('dragenter', function (e) {
      $(".upload-cont").css("border", "1px dashed black;");
   });
   $(".upload-cont").bind('drop', function (e) {
      var files = e.dataTransfer.files;
      e.preventDefault();
   });
   $("body").bind('drop', function (e) {
      e.preventDefault();
   });
}); 
```

在 Firefox 17、explorer 8 中，当将文件从桌面拖放到浏览器中时，图像将加载到另一个页面中。我添加了 preventDefault() ，它在 chrome 中完美运行。可以做些什么来阻止在 ff 中执行该操作，即浏览器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T16:28:57.827

尝试将代码更改为。

```
$('body').on('dragover drop', function(e){
    e.preventDefault();
}); 
```

某些浏览器也必须取消拖动事件才能收听拖放。引用[mdn](https://developer.mozilla.org/en-US/docs/DragDrop/Drag_Operations)

> dragenter 和 dragover 事件的侦听器用于指示有效的放置目标，即可以放置拖动项目的位置。网页或应用程序的大多数区域都不是放置数据的有效位置。因此，这些事件的默认处理是不允许丢弃。
> 
> 如果要允许放置，则必须通过取消事件来防止默认处理。您可以通过从属性定义的事件侦听器返回 false 或调用事件的 event.preventDefault 方法来做到这一点。后者在单独脚本中定义的函数中可能更可行。

# excel - 如何从 DB2 中的 Excel 工作表中读取数据

> ID：14282368
> 
> 赞同：1
> 
> 时间：2013-01-11T16:24:57.570
> 
> 标签：excel, db2

我需要编写一个存储过程/函数，它从 Excel 工作簿的工作表中读取数据。我如何在 DB2 中做到这一点？**我正在使用 AIX 操作系统。**

尝试[从 DB2 读取 Excel，](https://stackoverflow.com/questions/12800174/read-excel-from-db2)但无法在我的操作系统上运行。也试过

```
Import from FileName.csv of DEL COMMITCOUNT 1000 insert into TableName 
```

但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:59:38.600

如果可能，最好将您的 excel 文件转换为 csv 等平面文件。因为 DB2 本身不知道 excel 文件。它的 csv 文件可以使用 DB2 中的 IMPORT、LOAD 或 INGEST 工具进行本地处理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:02:44.967

您有多种选择，如果您打算阅读 Excel 工作簿（.xls 或 .xlsx）而不是纯 CSV 格式的文本文件，最简单的方法可能是使用[Apache POI库编写](http://poi.apache.org/)[Java 存储过程。](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/ad/r0007620.htm)

不那么干净但同样有效，您可以编写 Perl / Python / PHP 脚本来读取文件并一次返回一行，并从存储过程中调用脚本，请参阅：[从 SQL 进行操作系统调用](http://www.ibm.com/developerworks/data/library/techarticle/0303stolze/0303stolze.html)

# mysql - MySQL将字符串连接到列

> ID：14282369
> 
> 赞同：18
> 
> 时间：2013-01-11T16:25:27.550
> 
> 标签：mysql

我正在尝试从添加更多数据的行中编辑信息，例如：

```
select name, obs from users where area='it' 
```

它给了我：

```
name       obs
charles    vegetarian
xena       otaku 
```

我想添加到他们的 obs '友好的辛勤工作'

我试过了：

```
update users set obs=obs+' frienly hard worker' where area='it' 
```

但它没有用，我想要的结果是：

```
name       obs
charles    vegetarian frienly hard worker
xena       otaku frienly hard worker 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-11T16:30:52.377

在 MySQL 中，加号`+`是执行算术运算的操作数。

您需要使用该`CONCAT()`函数将字符串连接在一起。

```
UPDATE users 
SET obs = CONCAT(obs,' frienly hard worker') 
WHERE area='it'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-05T23:27:41.670

```
update users set obs= CONCAT('string1', column1 , 'string2', column1 , 'string3' ) where area='it' 
```

# android - 尽快将 PageTransformer 应用到 PagerView

> ID：14282375
> 
> 赞同：5
> 
> 时间：2013-01-11T16:25:47.040
> 
> 标签：android, android-viewpager

我有一个应用于 ViewPager 的 PageTransfomer，它工作得很好，但我想在将 PageTransformer 设置为 ViewPager 后立即启动页面的转换。我已经尝试过：

*   设置当前项（整数）
*   设置当前项（整数，真）
*   beginFakeDrag(), fakeDragBy(float), endFakeDrag()
*   无效（）
*   getAdapter().notifyDataSetChanged()

我已经在我的活动的 onCreate 中尝试了所有这些，但也许我错了。

有人有线索吗 ？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T08:21:44.653

根据奥列格的回答，我的应用程序使用了下面的代码。

我的补充是检查`beginFakeDrag()`inside的返回结果`_invalidatePageTransformer`。

我`sendInvalidatePageTransformer()`从里面打电话

*   `onConfigurationChanged()`当方向改变时
*   在我的片段中的`LoaderCallback<Cursor>`-methods内

    ```
    private Handler handler = new Handler()
    {
            public void handleMessage(Message msg)
            {
                    switch(msg.what)
                    {
                            case 0:
                                    _invalidatePageTransformer();
                                    break;
                    }
            }
    };

    private void _invalidatePageTransformer()
    {
            //no need to invalidate if we have no adapter or no items
            if (this.getAdapter() != null && this.getAdapter().getCount() > 0)
            {
                    //import check here, only fakeDrag if "beginFakeDrag()" returns true
                    if (this.beginFakeDrag())
                    {
                            this.fakeDragBy(0f);
                            this.endFakeDrag();
                    }
            }
    }

    public void sendInvalidatePageTransformer()
    {
            this.handler.sendEmptyMessage(0);
    } 
    ```

**编辑：**注意：此代码位于自定义 ViewPager 子类中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T16:32:29.557

Try one of these things:

1.  Put the code in `onPostCreate()`
2.  Put the code in a handler; i.e. `new Handler().post(new Runnable() { /* your code */ });`

# c++ - 变量“dim”（不是数组）周围的堆栈已损坏

> ID：14282378
> 
> 赞同：2
> 
> 时间：2013-01-11T16:25:55.060
> 
> 标签：c++, visual-studio-2010, fstream, corrupt

我正在尝试使用 fstream 从二进制文件中读取一些我之前写过的数据。

问题是在函数结束后显示主题中的消息

代码如下：

```
ifstream in("contrib.bin", ios::in | ios::binary );

char *nume, dim;
in.read((char*)&dim, sizeof(int));
nume = new char[dim + 1];
in.read(nume, dim);
nume[dim] = '\0';
double imp;
in.read((char*)&imp, sizeof(double));

delete [] nume; 
```

现在，我已经完成了作业并寻找了这个问题，但是遇到它的其他人有数组，而我的变量是一个简单的字符。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T16:28:27.620

编码

```
char dim;
in.read((char*)&dim, sizeof(int)); 
```

定义一个 1 字节的字符，然后将`sizeof(int)`字节（可能大于 1）读入其中。这是无效的，可能会损坏您的堆栈。

如果需要读取`sizeof(int)`字节，声明`dim`为`int`. 否则，将您读取的字节数更改为 1。最好还`sizeof(dim)`确保您只读取与您提供的存储空间一样多的字节数：

```
in.read((char*)&dim, sizeof(dim)); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-11T16:28:12.453

`in.read((char*)&dim, sizeof(int));`是不正确的，`dim`只保留`sizeof(char)`它是一个，但你正试图读`sizeof(int)`入它。

之后所有的手套都脱掉了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T16:29:10.997

好吧，您定义一个字符，然后以 int 的大小读取。那将是第一个问题

```
char *nume, dim;
in.read((char*)&dim, sizeof(char)); 
```

# asp.net - radwindow 关闭时重新绑定 Radgrid 不刷新

> ID：14282381
> 
> 赞同：2
> 
> 时间：2013-01-11T16:26:02.753
> 
> 标签：asp.net, telerik, master-pages, radgrid, radwindow

一旦通过母版页关闭了 radwindow，我正在尝试重新绑定我的网格。我的网格位于 aspx 页面中的用户控件中。在母版页中，我有：

```
 function CancelEdit() {
            GetRadWindow().Close();
        }

        function CloseAndRebind() {
            GetRadWindow().BrowserWindow.refreshGrid(); // Call the function in parent page 
            GetRadWindow().close(); // Close the window 
        }

        function refreshGrid() {
                $find("<%= RadAjaxManager1.ClientID %>").ajaxRequest("Rebind");
        } 
```

我在用户控件中有以下 javascript：

```
<script type="text/javascript" language="javascript">
    function refreshGrid() {
        $find("<%= RadAjaxManager.GetCurrent(me.Page).ClientID %>").ajaxRequest("Rebind");
    }

</script> 
```

一旦我在 radwindow 中关闭更新数据库，我就会注册一个 javascript：

```
 ScriptManager.RegisterStartupScript(Page, Page.GetType(), "mykey", "CloseAndRebind();", True) 
```

我可以看到我的数据源发生了变化，但网格没有更新。有什么建议么？

编辑 ：：

```
The structure is something like this:

I have master page which has the RadAjaxManager.
There is a main page which has a user control
Another user control inside above user control which has the RadGrid
Then there is an aspx page that opens as radwindow 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:51:28.487

使用客户端 API 重新绑定您的网格，应该是这样做的正确方法：

在您的子页面中：

```
 function refreshGrid() {
        $find("<%= YourGrid.ClientID %>").get_masterTableView().rebind();
    } 
```

要从父页面调用 javascript 函数，只需使用以下命令：

```
 function CloseAndRebind() {
        GetRadWindow().get_contentFrame().contentWindow.refreshGrid(); // Call the function in parent page 
        GetRadWindow().close(); // Close the window 
    } 
```

# r - gwidgets ggraphics ggplot的前沿

> ID：14282384
> 
> 赞同：1
> 
> 时间：2013-01-11T16:26:22.567
> 
> 标签：r, ggplot2, gwidgets

这可能是非常明显的事情，但我正在努力寻找一个很好的资源来解释如何使用`gwidgets`. 在一些帮助下，我有了这个脚本，它创建了一个复选框，这些复选框改变了一个文件名列表，然后使用`ggplot`. 问题是情节在右边缘被切断，我不知道如何解决这个问题。

**编辑：**我看到你们中的一些人一直在忙着降低我的评级，但现在如果你使用我提供的文件运行它，这应该可以工作。我怀疑问题出`cairoDevice`在 ggraphics 渲染情节的方式和方式上。

```
read.table("foo.csv", header = TRUE, sep = ",", row.names=1)

ggplot(MeanFrameMelt, aes(x=variable, y=value, color=Legend, group=Legend))+ 
  geom_line()+ 
  theme(panel.background = element_rect(fill='NA', colour='black', size = 1), 
        legend.position = "none")+ 
  ylab("Tag Density (mean coverage/bp)")+ 
  xlab("Distance from reference side (bp)")+ 
  scale_x_discrete(breaks=c("V1", "V200", "V400"), labels=c("-10000", "0", "10000"))+ 

GraphFiles <- FileNamesOrig
w <- gwindow("Tag Density Checkboxes", width = 1000)
g <- ggroup(container = w, horizontal = FALSE)
add(g, ggraphics())
lyt <- glayout(container = g, horizontal = FALSE)
print(p) 
```

[foo.cvs（这是 MeanFrameMelt）](http://sdrv.ms/UW1UlZ)

![在此处输入图像描述](../Images/ad3ec340d63cd515fdbfcef1e5441af1.png)

**编辑2：** 这就是我的图表。我不知道发生了什么，我正在`data.frame`使用以下命令导出：

```
write.table(MeanFrameMelt, file="test.cvs", sep=",", col.names=TRUE) 
```

但是当我使用导出的文件运行它时，我得到的正是 agstudy 得到的。这些文件应该是相同的。

![在此处输入图像描述](../Images/998fe06c8919c2a1f14103742ae3ffad.png)

**编辑 3：**

用 gput 测试了它（谢谢你的建议），现在它创建了正确的图： [新文件](http://sdrv.ms/10pxJpq)

利用`dget(file="test.txt")`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:52:11.750

我刚刚重新组织了您的代码，但我无法重现该问题。您必须在handelr 中调用绘图操作，以便稍后与用户交互（例如缩放、鼠标事件）。我在这里展示一个例子。第一次运行时，您会看到带有丑陋轴的情节。然后，当您单击某个区域时，绘图会刷新并且您有一个不错的轴。

```
## I define my plot
p <- ggplot(MeanFrameMelt, aes(x=variable, y=value, color=Legend, group=Legend))+ 
  geom_line()+ 
  theme(panel.background = element_rect(fill='NA', colour='black', size = 1), 
        legend.position = "none")+ 
  ylab("Tag Density (mean coverage/bp)")+ 
  xlab("Distance from reference side (bp)")
## init gwidgets
library(gWidgetsRGtk2)
w   <- gwindow("Tag Density Checkboxes", width = 1000)
g   <- ggroup(container = w, horizontal = FALSE)
gg  <- ggraphics(container=g)
lyt <- glayout(container = g, horizontal = FALSE)
## I plot it the first time 
print(p)
## I add a handler
ID <- addHandlerChanged(gg, handler=function(h,...) {
   p <-  p + scale_x_discrete(breaks=c("V1", "V200", "V400"), 
                     labels=c("-1000", "0", "1000"))
   print(p)
})
print(p) 
```

![在此处输入图像描述](../Images/3124917f110982e129558eeb7e28069a.png)

# c# - Azure CloudTable.ExecuteBatch(TableBatchOperation) 引发存储异常。如何找到导致异常的操作？

> ID：14282385
> 
> 赞同：4
> 
> 时间：2013-01-11T16:26:22.840
> 
> 标签：c#, azure, azure-storage

我有删除某些项目的代码：

```
 private static void DeleteBatch(IList<TableEntity> toDelete)
    {
        if(toDelete == null)
            throw new ArgumentNullException("toDelete");
        if(toDelete.Count == 0)
            throw new ArgumentException("There is no elements in toDelete.");
        if(toDelete.GroupBy(e => e.PartitionKey).Count() > 1)
            throw new ArgumentException("The entities to delete must have the same PartitionKey.");

        Parallel.ForEach(Partitioner.Create(0, toDelete.Count, 100),
                         range =>
                         {
                             TableBatchOperation batchOperation = new TableBatchOperation();
                             for (Int32 i = range.Item1; i < range.Item2; i++)
                                 batchOperation.Delete(toDelete[i]);
                             _table.ExecuteBatch(batchOperation);
                         });
    } 
```

表实体通过 * ETag 传递。

有时这会抛出一个`StorageException: The specified resource does not exist.`我认为这是 404 HttpStatusCode。在这种情况下，我不在乎它是否不存在，所以我想忽略导致它们的操作的这个异常。如何忽略批处理中单个 TableOperations 的 404，或者至少重试未引发此异常的 TableOperations 的批处理操作（我怎么知道哪些操作失败了）。单独做每个操作只是为了能够找到导致404的原因，感觉非常无效。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T06:26:26.423

在批处理操作中，我认为不可能忽略错误。您可以做一件事来确定批处理中的哪个实体失败，这可以通过捕获 StorageException 并检查 RequestInformation.ExtendedErrorInformation 属性来完成。看看下面的截图，尤其是 ErrorCode 和 ErrorMessage。我在这里所做的是使我的批处理中的第二个实体在删除实体批处理操作中失败。您将得到 ErrorCode 作为“ResourceNotFound”，但有趣的是 ErrorMessage。如果您看到，您会收到 ErrorMessage 为“1：指定的资源不存在”。它基本上为您提供了批处理中失败的实体的索引。

![在此处输入图像描述](../Images/fcfe0a0663822389723389ba2b1d916a.png)

然后您可以做的是将批次分成 3 个部分 - 在此失败实体之前的部分，此失败实体（单个项目），然后是此失败实体之后的实体，并在单独的操作中尝试它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-28T18:23:29.317

您要问的是批处理操作的失败操作索引。

我已经为 StorageExtension 实现了一个扩展类，它提供了提取有用信息的方法，包括失败的操作索引。

看看：[https ://www.nuget.org/packages/AzureStorageExceptionParser/](https://www.nuget.org/packages/AzureStorageExceptionParser/)

它提供了提取的扩展方法 - ErrorCode - ETag - ExtendedErrorMessage - FailedOperationIndex（失败的批处理操作） - HttpStatusCode - OperationStartTime (UTC) - OperationEndTime (UTC) - RequestDate (UTC) - RequestId - TargetLocation（主要、次要等） - IsOptimisticConcurrencyFailure

# ios - 核心数据：同一个对象的多个关系

> ID：14282386
> 
> 赞同：1
> 
> 时间：2013-01-11T16:26:27.290
> 
> 标签：ios, core-data, relationship

我有一个包含（除其他外）*WorkingPlan*和*Position*的核心数据数据库。一个*WorkingPlan*有零个或多个*Position*对象。一切正常，直到我尝试多次将相同的*职位*添加到一个*工作计划中。*而不是拥有多个关系（正如我所需要的那样），我只得到一个关系。我该怎么做才能获得与该*职位*的多个关系？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T21:27:04.380

正如评论中已经提到的，核心数据关系描述了一个对象与一*组不同的*其他对象的关系。一个对象不可能与同一个其他对象有多个关系。

我想到的一种*可能的*解决方案是在and`WorkingStep`之间引入另一个实体：`WorkingPlan``Position`

![在此处输入图像描述](../Images/8a96fa7885df4369d27db4e5da11a56a.png)

*   `steps`是从到的**有序**对多关系，`WorkingPlan``WorkingStep`
*   `plan`是一对一的反比关系，
*   `position``WorkingStep`是从到的一对一关系`Position`，
*   `steps`是逆对多关系。

我建议了从to的**有序**关系，因为我假设一个计划的步骤必须以定义的顺序执行。`WorkingPlan``WorkingStep`

例如，如果必须按顺序为计划执行位置“pos1”、“pos2”、“pos1”，您将在计划中添加 3 个步骤“step1”、“step2”、“step3”，并且两者“step1”和“step3”与“pos1”相关，“step2”与“pos2”相关。

向有序关系添加值有点棘手。以下代码显示了如何创建上述对象：

```
WorkingPlan *plan1 = [NSEntityDescription insertNewObjectForEntityForName:@"WorkingPlan" inManagedObjectContext:context];

WorkingStep *step1 = [NSEntityDescription insertNewObjectForEntityForName:@"WorkingStep" inManagedObjectContext:context];
WorkingStep *step2 = [NSEntityDescription insertNewObjectForEntityForName:@"WorkingStep" inManagedObjectContext:context];
WorkingStep *step3 = [NSEntityDescription insertNewObjectForEntityForName:@"WorkingStep" inManagedObjectContext:context];

Position *pos1 = [NSEntityDescription insertNewObjectForEntityForName:@"Position" inManagedObjectContext:context];
Position *pos2 = [NSEntityDescription insertNewObjectForEntityForName:@"Position" inManagedObjectContext:context];

step1.position = pos1;
step2.position = pos2;
step3.position = pos1;

// temporary proxy object used to modify the ordered to-many relationship "steps":
NSMutableOrderedSet *tmpMutableSteps = [plan1 mutableOrderedSetValueForKey:@"steps"];
[tmpMutableSteps addObject:step1];
[tmpMutableSteps addObject:step2];
[tmpMutableSteps addObject:step3]; 
```

* * *

**更多信息：**

您也可以`plan1.steps`像这样设置一个“步骤”：

```
plan1.steps = [NSOrderedSet orderedSetWithObjects:step1, step2, step3, nil]; // works! 
```

但是某些访问器方法不适用于有序关系：

```
[plan1 addStepsObject:step1]; // does not work! 
```

似乎是“合乎逻辑的步骤”，但它抛出了一个`NSInvalidArgumentException`：

```
*** -[NSSet intersectsSet:]: set argument is not an NSSet 
```

这似乎是其他人已经注意到的自动生成的访问器方法中的一个错误（例如[NSOrderedSet 生成的访问器中抛出的异常](https://stackoverflow.com/questions/7385439/exception-thrown-in-nsorderedset-generated-accessors)）。使用代理对象是解决该问题的一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:55:06.357

在 xCode Core Data 模型中，将关系“位置”添加到 WorkingPlan。在工作计划对象仍处于选中状态并选中“位置”关系的情况下，在数据模型检查器（在 xCode 右侧）的关系属性表单中，选中“复数”“多对多关系”复选框。如果您需要准确的工作计划相关职位数量，请根据需要填写最小/最大计数字段。

# iphone - 添加 iPhone 分享按钮

> ID：14282388
> 
> 赞同：2
> 
> 时间：2013-01-11T16:26:32.113
> 
> 标签：iphone, uiactionsheet, sharing

我已经让 Tweet 表出现在我的应用程序中，但我只想在用户按下 UIActionSheet 中的特定“Tweet”按钮时生成它们。

目前，用户按下圆角矩形按钮后，我的 UIActionSheet 将显示在主视图中。我想把这个按钮改成苹果的“标准”分享方式，就是使用带有方形图片的按钮和跳出来的箭头，如下图

![在此处输入图像描述](../Images/a97654037318e18c7fe4d0daf5feac3e.png)

我在哪里可以找到按钮的图像来执行此操作，或者该按钮是否已内置到 XCode 中？

我希望我说得足够清楚。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T10:15:54.243

您只需使用**Bar Button Item**创建工具栏项。在属性检查器中，选择按钮**的“操作”**类型。

![在此处输入图像描述](../Images/38ccd1b3e915f130453c0366f36f9554.png)

将圆角矩形按钮中的选择器/方法附加到此按钮。

！

# python - django下使用子进程调用scala程序

> ID：14282390
> 
> 赞同：0
> 
> 时间：2013-01-11T16:26:36.777
> 
> 标签：python, django, scala, subprocess

我有一个 scala 程序，我想使用子进程从 django 中调用它：

```
encode_cmd = "/usr/local/share/scala/scala-2.10.0/bin/scala -cp /home/django/code/classes conn {}".format(self.id)
output = subprocess.Popen(encode_cmd, shell = True, stdout = subprocess.PIPE).stdout.read() 
```

此代码在 python shell 中运行良好，但是当作为正常 web 服务器进程的一部分运行时，它找不到 scala 依赖项（例如，scala 类引用 slick 库）失败并出现 java.lang.NoClassDefFoundError。

我尝试将特定用户指定为 mod_wsgi 守护进程的一部分，但这没有什么区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:05:50.027

您应该像这样在命令中添加 jars: `-cp /home/django/code/classes:/path/to/slick.jar`，否则它只包括 .class' 和包含每个包的类文件的文件夹。

如果你有很多罐子，你总是可以依赖 shell 扩展：`/path/to/dependencies/*.jar`

另一种选择是使用 SBT 的[xsbt-start-script-plugin](https://github.com/typesafehub/xsbt-start-script-plugin)或 Maven 的[appassembler](http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/)插件来创建 shell 脚本

# mysql - MySQL 查询优化，用于按日期和状态对项目进行排序

> ID：14282392
> 
> 赞同：0
> 
> 时间：2013-01-11T16:26:37.880
> 
> 标签：mysql, query-optimization, prestashop

我面临一个 mySQL 问题：我有一个包含这些列的 mySQL 表，它存储每个订单和订单的每个状态：

```
 id_order_history / id_employee / id_order / id_order_state / date_add 
```

我想得到一个 *id_order* 的列表，它们在特定的 *id_order_state* 中 - 比如说 10 - 但我不想获得在这个特定状态之后状态发生变化的订单，也不想收集不到 7 天的订单...

以下是我如何做到这一点：

首先查询以获取订单和日期列表：

```
SELECT id_order, date
           FROM '._DB_PREFIX_.'ps_order_history, 
           WHERE TO_DAYS(NOW()) - TO_DAYS(date_add) <= 7 
           AND id_order_state = 10 
```

然后一个循环只获取没有最新状态的订单：

```
$query = '   SELECT id_order, date
           FROM '._DB_PREFIX_.'ps_order_history, 
           WHERE ';

foreach ( $listAbove, $item) {
     $query =+ '
                (( date > $item['date'])
                AND ( id_order = $item['id']))
             ';
 }
 $orderlist = Db::getInstance()->ExecuteS($query); 
```

这并不是真正的优化，我很确定我可以只用一个查询来做到这一点，但我真的不知道怎么做。

你知道如何使这个更清洁吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:39:05.213

如果我理解这一点，例如，您只需要**最近状态**等于 10 的订单。因此，让我们从获取订单和最新状态开始

```
SELECT
   id_order,
   MAX(id_order_history) as m
FROM ps_order_history
GROUP BY id_order 
```

这为我们提供了每个订单的最新订单历史项目（假设`id_order_history`是 PK 并且最大值表示最近的订单条目）。现在我们只需搜索该子查询以找到我们想要的条件。

```
SELECT
   poh.id_order
FROM ps_order_history poh
INNER JOIN
 (SELECT
   id_order,
   MAX(id_order_history) as m
 FROM ps_order_history
 GROUP BY id_order) sub
 ON sub.id_order = poh.id_order
   AND sub.m = poh.id_order_history
WHERE poh.id_order_state = 10
   AND TO_DAYS(NOW()) - TO_DAYS(poh.date_add) <= 7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:51:01.317

`WHERE`您可以在子句中使用子查询。这是一个例子：

```
create table order_history 
(orderid int, orderstate int, orderdate date, 
primary key(orderid, orderstate, orderdate));

insert into order_history values (1,1,makedate(2012,1));
insert into order_history values (1,2,makedate(2012,2));
insert into order_history values (1,3,makedate(2012,3));
insert into order_history values (2,1,makedate(2012,1));
insert into order_history values (2,3,makedate(2012,3));
insert into order_history values (3,1,makedate(2012,1)); 
```

此查询现在将选择最新`orderstate`为 3 的所有项目：

```
select a.orderid, a.orderdate from order_history a
where a.orderdate = 
  (select max(orderdate) from order_history b where b.orderid = a.orderid)
and a.orderstate=3 
```

要按 orderdate 进行限制，只需在外部`where`子句中添加另一个子句以供您选择日期。

# c# - C# 混淆和 XAML

> ID：14282393
> 
> 赞同：2
> 
> 时间：2013-01-11T16:26:39.833
> 
> 标签：c#, xaml, binding, obfuscation

我在 xaml 文件中有一个按钮，在某些情况下应该隐藏。

这里是：

```
<Button Visibility="{Binding Path=ShowMyButton}"/> 
```

绑定工作完美，直到混淆我的代码。

在 AssemblyInfo.cs 中，我添加了以下程序集注释：

```
[assembly: ObfuscateAssemblyAttribute(false, StripAfterObfuscation = false)] 
```

顺便说一句，我使用 Eazfuscator.NET

混淆代码后，按钮始终可见，即绑定不再起作用。

我在 ShowMyButton 属性中添加了以下注释：

```
[ObfuscationAttribute(Exclude=true)]
public bool ShowMyButton
{
     get
     {
         return _showMe;
     }
     set
     {
         _showMe= value;
         OnPropertyChanged("ShowMyButton");
     }
} 
```

此排除工作正常，但我有 3 个问题：

1.  为什么 xaml 在混淆方面会感到困惑。我可以告诉混淆器不要混淆引用 xaml 文件中的绑定的方法吗？
2.  根据 msdn ObfuscateAssemblyAttribute 仅区分公共和私有方法。手动排除所有在 xaml 文件中引用绑定的方法会非常令人沮丧（我的应用程序中有几十个）。有自动选项吗？

3.  有没有办法告诉混淆器只混淆应用程序中的特定方法，即默认情况下请不要混淆任何东西，直到我告诉你这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:34:13.127

这里的问题与 XAML 无关。问题在于您的`INotifyPropertyChanged`; 强调为什么字符串类型是一个坏主意。混淆器正在重命名`ShowMyButton`它用作方法的任何地方，但它不会重命名字符串的出现：

```
OnPropertyChanged("ShowMyButton"); 
```

混淆后，触发的更新事件会说属性“ShowMyButton”已更新，但实际属性已重命名为混淆值，因此任何依赖此接口的代码，包括 XAML 的数据绑定都不会正确更新，始终显示布尔值的默认值：true。

一个对重构更友好的实现使用表达式而不是字符串类型，因此有问题的行可以重写为

```
OnPropertyChanged(() => this.ShowMyButton); 
```

[这种模式的一种可能实现。](http://www.codeproject.com/Tips/257473/Make-OnPropertyChanged-events-safe-for-refactoring)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T09:08:29.160

这是一个已知问题，[已](http://blog.gapotchenko.com/eazfuscator.net/xaml-renaming-for-wpf)在最新版本的 Eazfuscator.NET 中得到修复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-07T12:08:26.373

[尝试 Babel for .net 并在http://babelfor.net/](http://babelfor.net/)上查看它对 XAML 的混淆非常好。另请注意，Eazfuscator 很容易通过 de4dot 和 ILSpy 的组合进行反混淆。而且它对变量和值的重命名非常简单，ILSpy 可以揭示一切。

另一方面，Babel 添加了循环、迭代、开关，这些都可能使破解者感到困惑，并使任何反混淆的代码不可读和不可追踪。它还可以加密字符串和整个方法，使它们不可读。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T16:28:50.773

如果混淆器混淆了`ShowMyButton`属性，但没有在编译的 XAML 中重命名它，则绑定没有目标，因为它仍然是目标`ShowMyButton`，而不是混淆的版本。

# grails - 使用 GGTS 升级到 Grails 2.2.0 的问题

> ID：14282396
> 
> 赞同：1
> 
> 时间：2013-01-11T16:26:50.063
> 
> 标签：grails

我正在尝试将 Grails 升级到 2.2.0 版。我使用[gvm](http://gvmtool.net)并安装了 Grails 2.2.0。在此之后，我将[GGTS](http://grails.org/products/ggts)中的项目更改为使用 Grails 2.2.0 版和 Groovy 2.0.0 版。但是当我最终尝试运行该项目时，出现以下错误：

```
Error occurred during initialization of VMError opening zip file or JAR manifest
missing : null

agent library failed to init: instrument 
```

问题是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T17:54:16.757

我们遇到了同样的问题。这是由于 eclipse 为以前的 grails 版本保存了旧的运行配置。

只需删除旧的启动配置并重试。

要删除旧的启动配置：转到 Run\RunConfiguration\Grails 选择所有节点并删除它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T03:20:51.617

当我开始使用 Grails 2.2.0 时，我遇到了同样的问题 - Ian 提到的解决方案有效，这是我的项目中出现的问题和解决方案的链接

[Grails 2.2.0 错误](https://stackoverflow.com/questions/14189786/grails-2-2-0-support-in-eclipse)

添加于 1/15/2013 基于 2.2.0/ivy 缓存问题的其他建议

我在 Windows 上运行，有几件事要尝试。

1.  根据您的错误消息，问题可能与缓存的**常春藤**有关，我建议使用**clean 命令将其清除。**

2.  我也将继续删除您机器上位于**\ivy-cache**的冰冷缓存文件夹（备份后以防万一）

3.  阅读 **[http://grails.org/doc/2.0.0/guide/gettingStarted.html](http://grails.org/doc/2.0.0/guide/gettingStarted.html)**上的 grails 文档，请参阅**第 2.3 节**有关 Ivy 缓存的内容 - 并行运行 2.x 和 1.x grails 项目可能会出现问题。
4.  安装时，我不必显式安装 groovy - 我只需安装 grails 并隐式处理 groovy 代码。你可以这样做吗？排除依赖问题？
5.  在我的 grails 版本中，我的 groovy 版本显示为**2.0.5——**我假设你的意思是**grails 2.2.0——**你能确保你安装的 groovy 版本与 grails 2.2.0 兼容吗？
6.  如果可能，请在之前未安装 grails 的新设备上尝试您的代码。这是为了排除由于其他现有问题造成的干扰

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T16:40:02.820

这是一个[已知问题](https://issuetracker.springsource.com/browse/STS-3141)，因为 2.2（和 2.1.3）使用的 springloaded 重新加载代理的版本与以前版本的 Grails 使用的名称不同。错误报告中有一个解决方法，或者您可以升级到知道新名称的 GGTS 夜间版本（如[本错误报告](https://issuetracker.springsource.com/browse/STS-3134)中所述）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T12:56:51.423

我在 Windows XP 上使用 GGTS 3.2 和 Groovy 编译器 2.1.1。

从 GGTS 3.1 导入了一个项目，将编译器升级到 2.1.1 并陷入混乱，因此删除了该项目并将其从 .grails 缓存中删除，然后从头开始重新创建项目。在运行项目时，我遇到了常春藤错误。

通过 Run->RunConfiguration...Grails 删除旧的启动配置修复了问题，而无需切换到 GGTS 的夜间构建。

（顺便说一句，删除 ivy-cache 根本没有帮助）

# sql - 如何从不同的表中检索最小值

> ID：14282403
> 
> 赞同：0
> 
> 时间：2013-01-11T16:27:03.107
> 
> 标签：sql

我想从中检索（time1）的最小值`table1`，`table2`例如

```
表 1(id​​, time1, time2, time3)
表 2（id，时间 1，时间 2，时间 3）
```

```
id , time 1, time2, time3 (联​​合后)
1、下午 2:00、下午 1:30、下午 1:31
下午 1,1:45、下午 3:00、下午 4:00
2,2:01pm,1:31pm,1:32pm
下午 2,1:50、下午 3:01、下午 4:00
```

我想要的最终结果是

```
id，时间1，时间2，时间3
下午 1,1:45、下午 3:00、下午 4:00
下午 2,1:50、下午 3:01、下午 4:00
```

我尝试了以下方法，但我从 table1 和 table2 中得到了重复的 ID，即 min(time1) 值。如上例所示，如何从联合结果中获取 min(time1) 行？

```
选择 id、时间 1、时间 2、时间 3 从
表格1
其中时间1 =
(
选择分钟（时间1）
从表 1
)
联盟
选择 id、时间 1、时间 2、时间 3 从
表2
其中时间1 =
(
选择分钟（时间1）
从表 2
)
```

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:29:38.703

您可以`union`将表格放在一起，并按以下方式分组`id`：

```
select  id
,       min(time1) as min_time1
,       min(time2) as min_time2
,       min(time3) as min_time3
from    (
        select  id
        ,       time1
        ,       time2
        ,       time3
        from    table1
        union all
        select  id
        ,       time1
        ,       time2
        ,       time3
        from    table2
        ) as SubQueryAlias
group by
        id 
```

# php - JQuery - 评估 Html 到元素

> ID：14282410
> 
> 赞同：1
> 
> 时间：2013-01-11T16:27:36.247
> 
> 标签：php, jquery, html, eval

在我的一些 PHP 页面上，我喜欢从另一个地方加载数据，并填充输入或文本区域。

当涉及到 html 标签时，我遇到了问题。（也有撇号）我在 FF 中注意到 html 通常不太擅长与 javascript 一起传递。（错误控制台）

因此，如果可能的话，我正在寻求有关如何 HONE 的帮助。

**主页：**

```
<textarea name="templatetext" id="templatetext"></textarea>

<script language="javascript" type="text/javascript">
$(document).ready(function(){

   /* calls page2.php */
   $.ajax({data:"formId=loadtemplatetext",
        success:function(response){ 
                                    eval(response); 
                                  } 
       });
        return false;
   });

});
</script> 
```

**Page2.php**

```
<?php
$templatetext = '<p>This is a test email<br /><br /><br /></p>
<p><span style="color: #808080; font-size: 12px; font-family: Tahoma,sans-serif;"><strong>Some Text here with an apostophe or image: <br /><img title="Test Img" src="http://somefakeurl.com/img/somefakeimg.gif" alt="test img" width="112" height="59" />';

die('$("#templatetext").val("'.addslashes($templatetext).'");');
?> 
```

这适用于常规/纯文本。我可以清理它以填充 a 中的值`<textarea>`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:32:23.783

我建议更改执行此操作的方式。要么在客户端代码中知道新内容的去向，要么创建一个对象，使客户端更容易解析它。例如

### 版本一：特定于服务器的处理（和客户端处理）

```
<?php

  $result = array();
  $result['template'] = '<p>this is a test email<br/ >...';
  $result['target'] = '#templatetext';

  echo json_encode($result); 
```

然后你的 AJAX 代码变成：

```
$.ajax({
  data:'formId=loadtemplatetext',
  success: function(d){
    $(d.target).html(d.template);
  }
}); 
```

### 版本二：服务器处理、客户端处理

```
<?php

  echo '<p>This is a test email<br />...'; 
```

然后你的 AJAX 变成：

```
$('#template').load('/page.php?formId=loadtemplatetext'); 
```

**不惜一切代价**抵制`eval`使用。这可能会导致很多安全威胁。

# image-processing - minMaxLoc 最大值混淆

> ID：14282412
> 
> 赞同：1
> 
> 时间：2013-01-11T16:27:40.023
> 
> 标签：image-processing, opencv, computer-vision, vision

我一直在使用 minMaxLoc 来计算通过在灰度图像上运行拉普拉斯滤波器获得的数据的最大值。我的简单意图是粗略估计锐度。我遇到了一个令人困惑的情况，我在这里讨论过。

对于一组图像，从 minMaxLoc 函数获得的最大值类似于 1360、1456,450 等。

```
 Laplacian(src_gray,dst,ddepth,kernel_size,scale,delta,BORDER_DEFAULT);
    minMaxLoc(dst,&min,&estimate,&minLoc,&maxLoc,noArray());//Estimate is the max value 
```

现在我只是尝试计算平均值，以便更好地了解图像中锐度的分布。请注意，DST 是保存来自拉普拉斯算子的数据的 Mat 变量。

```
 Size s = dst.size();
    rows = s.height;
    cols = s.width;
    total = 0;
    max =  0;
    for(int k=0;k<rows;k++)
    {
      for(int l=0;l<cols;l++)
      {
        total = total + abs(dst.at<int>(k,l));
      }
    }
    average = total/(rows*cols); 
```

我得到了 2 个莫名其妙的结果。我获得的平均值不仅大于从 minMaxLoc 获得的最大值，而且在对一组图像进行尝试时有时为负值。样本平均值，其中 22567，有时为 -25678。

负数的出现更加令人困惑，因为我使用 abs() 来获得拉普拉斯结果的绝对值。

为了得到正确的理解，我自己计算了最大值，然后计算了平均值：

```
 Size s = dst.size();
    rows = s.height;
    cols = s.width;
    total = 0;
    max =  0;
    for(int k=0;k<rows;k++)
    {
      for(int l=0;l<cols;l++)
      {
        if(abs(dst.at<int>(k,l))>max)
        {
           max = abs(dst.at<int>(k,l));
        }
        total = total + abs(dst.at<int>(k,l));
       }
    }
    average = total/(rows*cols); 
```

令人惊讶的是，我发现最大值为 8 位。

这就是我感到困惑的原因。minMaxLoc 函数给出的最大值是多少？为什么 abs() 总共不起作用，为什么我得到 -ve 平均值。？

如果我在代码中遗漏了什么，请原谅我，但这让我有点困惑。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:54:30.717

I think you should use .at< uchar > instead of int (considering image to be grayscale) otherwise the value will overflow!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T21:31:25.207

通常图像有 8 位图像。所以很有可能，您正在使用错误的方法访问图像的像素。在这种情况下，您从矩阵中读取的值是错误的。

要检查您是否正在使用单通道整数矩阵，请使用

```
dst.type() == CV_32SC1 . 
```

要检查 8 位矩阵，请使用

```
dst.type() == CV_8SC1 . 
```

如果您实际上有这样一个 8 位整数矩阵，则需要使用`.at<uchar>`来访问像素。

即使您只向其中添加了正值，您的总变量仍为负数的原因可能是由于[整数溢出](http://en.wikipedia.org/wiki/Integer_overflow)。您可以使用`long int`for total 来避免这种情况。

# iphone - 源代码安全 - 与 iOS 公司合作

> ID：14282418
> 
> 赞同：4
> 
> 时间：2013-01-11T16:28:00.723
> 
> 标签：iphone, ios, security, app-store-connect

我目前正在为一家公司工作，该公司针对 iOS 进行了一个相当大规模的电子商务项目。当然，他们想在他们的 iTunes 帐户下发布他们的项目。我担心的是，我要做的就是开发项目并代表他们从他们的帐户上传项目并将我的代码保留给我自己，以防万一他们想做类似的项目。

我的 ipa 或代码安全吗？他们有什么办法只能从itunesconnect帐户访问ipa或代码？经验丰富的开发人员的任何想法和知识都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T16:49:52.917

您的客户端必须使用[Application Loader](https://itunesconnect.apple.com/apploader/ApplicationLoader_2.8.dmg)

*   他们必须为您提供 App Store 配置文件
*   使用配置文件使用“com.compagny.appname”归档您的应用
*   组织者应该在这个过程之后打开。选择您的存档并单击分发按钮。
*   为企业或 AdHoc 部署选择保存
*   选择 App Store 配置文件
*   将您的 ipa 保存在您的磁盘上（例如 Documents 目录）
*   打开终端并转到文档并执行：sudo chmod 755 yourApp.ipa
*   将您的 ipa 发送给您的客户，仅此而已！

使用这种方法，您的客户将无法获得您的代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:53:08.437

我建议让他们将您的开发者帐户添加为他们的开发者，并让您为他们上传。当您向他们发送 IPA 并上传文件时，这将减少任何问题的可能性。

创建 IPA 后，他们无法检索源代码。他们唯一能做的就是获取图像和二进制文件。然而，他们可以从汇编中对二进制文件进行逆向工程，但这不太可能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T16:59:46.907

请注意，这是一个电子商务应用程序（处理信用卡），在美国，PCI 法律要求可能不允许他们让您上传任何内容，也因此没有源代码。他们的法律团队应该知道这一点。

# css - 使用 CSS 在内容后添加度数符号

> ID：14282422
> 
> 赞同：5
> 
> 时间：2013-01-11T16:28:12.153
> 
> 标签：css

我知道我可以用“°”在 HTML 中添加一个度数符号，我正在查看使用 :after 选择器和 content 属性的 CSS 示例，但我无法将它们放在一起。

我希望在输入框中出现的文本之后显示一个度数符号。

```
<div class="threshold">
    <input type="text" value="12" name="thresholdSelect" disabled="disabled">
</div> 
```

和CSS：

```
.threshold input:after {
    content: "&deg;"
} 
```

但这似乎不起作用。关于如何解决它的任何想法。我可以将度数符号存储在值中，但这需要大量额外的 JavaScript 用于验证等。有什么办法可以用 CSS 做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T16:35:01.543

尝试这样的事情

**HTML**

```
<div class="threshold">
    <input type="text" value="12" name="thresholdSelect" disabled="disabled">
</div> 
```

**CSS**

```
.threshold:before {
    content: "\00b0"
} 
```

**演示： http:** [//jsfiddle.net/Tt2hU/](http://jsfiddle.net/Tt2hU/)或[http://jsfiddle.net/Tt2hU/1/](http://jsfiddle.net/Tt2hU/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T16:39:29.697

这可能会有所帮助：[我可以在输入字段上使用 :after 伪元素吗？](https://stackoverflow.com/questions/2587669/css-after-pseudo-element-on-input-field)

似乎在带有输入标签的 CSS 中是不可能的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T16:31:09.847

应该像这样工作

度°只需通过

```
<p>degrees&#176;</p> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-11T16:32:37.350

*您必须输入对十六进制 Unicode 字符值的转义引用*（来自[此处](http://alanhogan.com/tips/css/special-characters-in-generated-content)）

```
::after {
  content: "\00b0";
} 
```

[演示](http://jsfiddle.net/V2Bqh/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-11T16:38:50.903

HTML 实体在 CSS 中不起作用，您可以使用字符代码实体，即反斜杠后跟十六进制字符代码：

```
.threshold input:after {
  content: "\00b0";
} 
```

但是，这仅适用于常规元素，而不适用于输入元素。

演示：http: [//jsfiddle.net/Guffa/AcxEG/](http://jsfiddle.net/Guffa/AcxEG/)

# java - 为什么当年份小于 1884 时，它会删除几毫秒？

> ID：14282423
> 
> 赞同：13
> 
> 时间：2013-01-11T16:28:15.450
> 
> 标签：java, date, jodatime

```
DateTime start = new DateTime().withYear(1884);
System.out.println(start);
System.out.println(start.minusYears(1)); 
```

输出

```
1884-01-11T08:26:10.234-08:00
1883-01-11T08:26:10.234-07:52:58 
```

编辑1：我不正确。它没有删除 1.02 秒

```
DateTime start = new DateTime().withYear(1884);
DateTime other = start.minusYears(1);
long diffMs = start.getMillis() - other.getMillis(); //31536422000 
```

编辑2：

`toString();`有趣的是，我对- ( `-08:00`, `-07:52:58`)的输出感到困惑

编辑3：

使用 Java 日历，我看不出有任何区别：

```
Calendar cal = Calendar.getInstance();
cal.set(start.getYear(), 
        start.getMonthOfYear(), 
        start.getDayOfMonth(), 
        start.getHourOfDay(), 
        start.getMinuteOfHour(), 
        start.getSecondOfDay());
System.out.println(cal.getTime());

cal = Calendar.getInstance();
cal.set(start.getYear()- 1, 
        start.getMonthOfYear(), 
        start.getDayOfMonth(), 
        start.getHourOfDay(), 
        start.getMinuteOfHour(), 
        start.getSecondOfDay());
System.out.println(cal.getTime()); 
```

输出：

```
Mon Feb 11 18:46:42 PST 1884
Sun Feb 11 18:46:42 PST 1883 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T16:31:58.667

从[这个时区历史页面](http://www.timeanddate.com/time/time-zones-history.html)；

> 1883 年 11 月 18 日，美国大陆引入了四个标准时区。英国已经在英格兰、苏格兰和威尔士采用了自己的标准时区，并在 1884 年帮助达成了全球时区的国际共识。

换句话说，美国时区在这两个时间戳之间发生了变化。

编辑：如果您将时区设置为 PST（时区），您将看不到此效果，而如果您将其设置为某个位置（例如 America/Los_Angeles），您会看到。这是因为*PST 的时区偏移量没有改变*，而是创建了 PST 并且洛杉矶从 LMT 更改为 PST）也就是说，洛杉矶时间改变了，而 PST 没有改变。

作为演示，你可以在 linux 上试试这个；

```
# PST test
$ TZ=PST8PDT date -d '1883-01-01 12:00:00 UTC'
Mon Jan  1 04:00:00 PST 1883

# America/Los_Angeles test
$ TZ=America/Los_Angeles date -d '1883-01-01 12:00:00 UTC'
Mon Jan  1 04:07:02 LMT 1883 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:33:26.433

美国在今年采用了标准时间。

> 1883 年：美国和加拿大的铁路采用五个标准化时区来取代整个大陆社区的多个当地时间。每个人很快就会在“铁路时间”上运作。

[来源](http://www.wired.com/science/discoveries/news/2008/11/dayintech_1118)

[关于标准时间的维基百科页面](http://en.wikipedia.org/wiki/Standard_time)

# string - 寻找想法：许多不同字符串的按字典顺序排序的后缀数组有效地计算 LCP 数组

> ID：14282424
> 
> 赞同：3
> 
> 时间：2013-01-11T16:28:16.803
> 
> 标签：string, algorithm, similarity, suffix-array

我不想直接解决这个问题的根源，但这是一个[链接](https://www.interviewstreet.com/challenges/dashboard/#problem/4efa210eb70ac)：

所以我接收字符串并将它们添加到后缀数组中，该数组在内部实现为排序集，然后我获得的是两个给定字符串的字典排序列表。

```
S1 = "banana"
S2 = "panama"

SuffixArray.add S1, S2 
```

为了使搜索`k-th`最小子字符串有效，我预处理这个排序集以添加有关后缀与其前身之间最长公共前缀的信息，并密切关注累积子字符串计数。所以我知道对于一个`k`大于最后一项的累积子字符串计数的给定，这是一个无效的查询。

这对于问题定义中给出的约束的小输入和随机大输入非常有效，最多有 50 个长度为 2000 的字符串。我能够通过 7 个案例中的 4 个，我很惊讶我没有没有得到他们所有。

所以我去寻找瓶颈，它击中了我。给定大量这样的输入

```
anananananananana.....ananana
bkbkbkbkbkbkbkbkb.....bkbkbkb 
```

对第 k 个最小子字符串的查询仍然像预期的那样快，**但不是我预处理排序集**的方式......我计算集合元素之间最长公共前缀的方式效率不高且线性 O(m)，比如对此，我做了最天真的事情，期望它足够好：

```
m = anananan
n = anananana

Start at 0 and find the point where `m[i] != n[i]` 
```

之所以这样，是因为后缀和他的前任可能没有关系（即来自不同的输入字符串），所以我想我不得不使用蛮力。

这是当时的问题，也是我最终将问题减少到的地方。给定一个按我上面描述的方式按字典顺序排序的后缀列表（由多个字符串组成）：

**计算最长公共前缀数组的有效方法是什么？**.

**那么子问题是，我的方法完全偏离标准了吗？如果是这种情况，请提出进一步的调查途径。**

*脚注，我不想看到已实现的算法，我不介意被告知去阅读有关该主题的某本书或资源，因为无论如何我在尝试这些挑战时都会这样做。*

*接受的答案将引导我走上正确的道路，或者在失败的情况下；教我如何在更广泛的意义上解决这些类型的问题的东西，一本书或其他东西*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:02:15.170

## 阅读

我会推荐[斯坦福的本教程 pdf](http://www.stanford.edu/class/cs97si/suffix-array.pdf)。

本教程解释了一个简单的 O(nlog^2n) 算法，它使用 O(nlogn) 空间来计算后缀数组和中间结果矩阵。中间结果矩阵可用于计算 O(logn) 中两个后缀之间的最长公共前缀。

## 提示

如果您想尝试自己开发算法，关键是根据字符串的 2^k 长前缀对字符串进行排序。

从教程：

> 让我们用 A(i,k) 表示从位置 i 开始的长度为 2^k 的 A 的子序列。A(i,k) 在 A(j,k) 子序列 (j=1,n) 的排序数组中的位置保留在 P(k,i) 中。

和

> 使用矩阵 P，可以从最大的 k 向下迭代到 0，并检查 A(i,k) = A(j,k)。如果两个前缀相等，则找到长度为 2^k 的公共前缀。我们只需要更新 i 和 j，将它们都增加 2^k 并再次检查是否有更多常见的前缀。

# javascript - D3 - 饼图和强制导向标签

> ID：14282431
> 
> 赞同：13
> 
> 时间：2013-01-11T16:28:53.433
> 
> 标签：javascript, d3.js, label, pie-chart, force-layout

我正在寻找使用 D3 创建带有浮动标签的饼图。我是 D3 的新手，我什至不确定这是否可行？你能以某种方式在另一个图形中使用一个图形的标签吗？如果可以的话，你能给我举个例子吗？

更简短的说明：我想要来自： [http ://bl.ocks.org/1691430 的标签](http://bl.ocks.org/1691430)

![在此处输入图像描述](../Images/100583c4543664cb64c8bd1eff1305bf.png) ...在饼图上。

这是我在下面运行的代码：或者在 JSBIN 中： http: [//jsbin.com/awilak/1/edit](http://jsbin.com/awilak/1/edit)

如果我正确理解他的代码，这是添加标签的部分。我不明白 labelForce.update 做了什么。从那里开始，我不关心过渡，所以不需要这条线。然后剩下的只是画圆圈并添加链接/线？如果有人可以整合这将是惊人的，但如果你能帮助我了解发生了什么以及我错过了什么，我将不胜感激。

```
// Now for the labels
// This is the only function call needed, the rest is just drawing the labels
anchors.call(labelForce.update)

labels = svg.selectAll(".labels")
    .data(data, function(d,i) {return i;})
labels.exit()
    .attr("class","exit")
    .transition()
    .delay(0)
    .duration(500)
    .style("opacity",0)
    .remove();

// Draw the labelbox, caption and the link
newLabels = labels.enter().append("g").attr("class","labels")

newLabelBox = newLabels.append("g").attr("class","labelbox")
newLabelBox.append("circle").attr("r",11)
newLabelBox.append("text").attr("class","labeltext").attr("y",6)
newLabels.append("line").attr("class","link")

labelBox = svg.selectAll(".labels").selectAll(".labelbox")
links = svg.selectAll(".link")
labelBox.selectAll("text").text(function(d) { return d.num})
}

<!DOCTYPE html>
<html>
<head>    
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Testing Pie Chart</title>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js?2.1.3"></script>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.geom.js?2.1.3"></script>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.layout.js?2.1.3"></script>

    <style type="text/css">
    .slice text {
        font-size: 16pt;
        font-family: Arial;
    }   
    </style>
</head>
<body>
    <button id="button"> Test </button>
    <br>
    <form id="controls">
        <div>
            <h2>Y axis</h2>
            <ul id="y-axis">
                <li><label><input checked="checked" type="radio" name="y-axis" value="Component">Component</label></li>
                <li><label><input type="radio" name="y-axis" value="Browser">Browser</label></li>
                <li><label><input type="radio" name="y-axis" value="Version">Version</label></li>
            </ul>
        </div>
    </form>
    <script type="text/javascript">
    // return a list of types which are currently selected
    function plottableTypes () {
        var types = [].map.call (document.querySelectorAll ("#coaster-types input:checked"), function (checkbox) { return checkbox.value;} );
        return types;
     }

    var w = 600,                        //width
    h = 600,                            //height
    r = 100,
    r2 = 200,                           //radius
    axis = getAxis (),                  //axes
    color = d3.scale.category20c();     //builtin range of colors

    data = [
        {"Browser":"Internet Explorer ","Version":"8.0","Toatl":2000,"Component":"6077447412293130422"},
        {"Browser":"Internet Explorer ","Version":"9.0 ","Toatl":1852,"Component":"6077447412293130422"},
        {"Browser":"Internet Explorer ","Version":"6.0 ","Toatl":1754,"Component":"6077447412293130422"},
        {"Browser":"Firefox ","Version":"16.0 ","Toatl":1020,"Component":"6077447412293130422"},
        {"Browser":"Chrome ","Version":"23.0 ","Toatl":972,"Component":"6077447412293130422"},
        {"Browser":"Internet Explorer ","Version":"7.0 ","Toatl":700,"Component":"6077447412293130422"},
        {"Browser":"Mobile Safari ","Version":"6.0 ","Toatl":632,"Component":"6077447412293130422"},
        {"Browser":"BOT ","Version":"BOT ","Toatl":356,"Component":"6077447412293130422"},
        {"Browser":"Firefox ","Version":"8.0 ","Toatl":196,"Component":"6077447412293130422"},
        {"Browser":"Mobile Safari ","Version":"5.1 ","Toatl":184,"Component":"6077447412293130422"}
    ];

    var vis = d3.select("body")
        .append("svg:svg")              //create the SVG element inside the <body>
        .data([data])                   //associate our data with the document
        .attr("width", w)           //set the width and height of our visualization (these will be attributes of the <svg> tag
        .attr("height", h)
        .append("svg:g")                //make a group to hold our pie chart
        .attr("transform", "translate(" + r2 + "," + r2 + ")")    //move the center of the pie chart from 0, 0 to radius, radius

    var arc = d3.svg.arc()              //this will create <path> elements for us using arc data
        .outerRadius(r);

    var pie = d3.layout.pie()           //this will create arc data for us given a list of values
        .value(function(d) { return d.Toatl; });    //we must tell it out to access the value of each element in our data array

    var arcs = vis.selectAll("g.slice")     //this selects all <g> elements with class slice (there aren't any yet)
        .data(pie)                          //associate the generated pie data (an array of arcs, each having startAngle, endAngle and value properties) 
        .enter()                            //this will create <g> elements for every "extra" data element that should be associated with a selection. The result is creating a <g> for every object in the data array
        .append("svg:g")                //create a group to hold each slice (we will have a <path> and a <text> element associated with each slice)
        .attr("class", "slice");    //allow us to style things in the slices (like text)

    arcs.append("svg:path")
        .attr("fill", function(d, i) { return color(i); } ) //set the color for each slice to be chosen from the color function defined above
        .attr("d", arc);                                    //this creates the actual SVG path using the associated data (pie) with the arc drawing function

    arcs.append("svg:text")                                     //add a label to each slice
        .attr("transform", function(d) {                    //set the label's origin to the center of the arc
            //we have to make sure to set these before calling arc.centroid
            d.innerRadius = r2;
            d.outerRadius = r;
            return "translate(" + arc.centroid(d) + ")";        //this gives us a pair of coordinates like [50, 50]
        })
        .attr("text-anchor", "middle")                          //center the text on it's origin
        .text(function(d, i) { 
            if(axis.yAxis == "Component"){
                return data[i].Component;
            }
            return data[i].Browser;     //get the label from our original data array
        });       

        d3.select('#button').on('click', reColor);

        var arcOver = d3.svg.arc()
            .outerRadius(r + 30) 
            .innerRadius(0);
        var arc = d3.svg.arc()
            .outerRadius(r)
            .innerRadius(0); 

        var arcs = vis.selectAll("g.slice")
            .attr("class", "slice")
            .on("mouseover", function(d) {
                getAxis();
                d3.select(this)
                    .select("path")
                    .transition()
                    .duration(500)
                .attr("d", arcOver);
                d3.select(this).select("text")
                    .text(function(d, i) { 
                        if(axis.yAxis == "Component"){
                            return data[i].Component;
                        }
                    return data[i].Browser;     //get the label from our original data array
                });       
            })
            .on("mouseout", function(d) {
                getAxis();
                d3.select(this)
                    .select("path")
                    .transition()
                    .duration(500)
                    .attr("d", arc);
                d3.select(this)
                    .select("text")
                    .text(function(d, i) { 
                        if(axis.yAxis == "Component"){
                            return data[i].Component;
                        }
                        return data[i].Browser;     //get the label from our original data array
                    }); 
                });

        function reColor(){
            var slices = d3.select('body').selectAll('path');
            slices.transition()
                .duration(2000)
                .attr("fill", function(d, i) { return color(i+2); } );
            slices.transition()
                .delay(2000)
                .duration(2000)
                .attr("fill", function(d, i) { return color(i+10); } )
        }
        function makeData(){

        }
        // return an object containing the currently selected axis choices
        function getAxis () {
            var y = document.querySelector("#y-axis input:checked").value;
            return {
                yAxis: y,
            };
        }
        function update() {
            axis = getAxis()
            arcs.selectAll("text")          //add a label to each slice              
                .text(function(d, i) { 
                    if(axis.yAxis == "Component"){
                        return data[i].Component;
                    }
                    return data[i].Browser;     //get the label from our original data array
                });
            }

        document.getElementById("controls").addEventListener ("click", update, false);
        document.getElementById("controls").addEventListener ("keyup", update, false);
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-13T00:30:56.770

正如其他人在介绍帖子的评论中提到的那样，可以实现像您描述的那样的解决方案，并且可以使用您的代码加上“移动标签”示例的一部分。如果我理解正确，您希望使用 force-layout 实现不重叠的标签，这是一个非常好的主意，我还没有偶然发现。

您从示例中粘贴的代码部分**仅绘制**您已经正确解释的标签和线条。下一步是在饼图周围以类似力的布局**重新排列标签。**

示例中重新排列标签（和链接）的部分如下：

```
function redrawLabels() {
    labelBox
        .attr("transform",function(d) { return "translate("+d.labelPos.x+" "+d.labelPos.y+")"})

    links
        .attr("x1",function(d) { return d.anchorPos.x})
        .attr("y1",function(d) { return d.anchorPos.y})
        .attr("x2",function(d) { return d.labelPos.x})
        .attr("y2",function(d) { return d.labelPos.y})
}        

// Initialize the label-forces
labelForce = d3.force_labels()
    .linkDistance(0.0)
    .gravity(0)
    .nodes([]).links([])
    .charge(-60)
    .on("tick",redrawLabels) 
```

该功能是改变标签和线条位置的功能。力由 D3 计算并以`d3.force_labels()...`. 如您所见，该函数被分配为滴答事件的事件处理程序。换句话说：在计算力的每一步之后，D3 为每个标签调用“抽屉”并更新位置。

不幸的是，我对 D3 的方法不是很熟悉`force_labels()`，但我认为它的工作原理与常规的`force()`. 在您的情况下，锚点放置在每个标签的每个饼片中的某个位置。每个馅饼块（而不是馅饼本身）的中心越多越好。不幸的是，您必须以某种方式计算此锚位置（sin 和 cos 的东西）并将行端设置为`redrawLabels()`.

完成此操作后，您将看到第一个结果。您可能必须使用重力、linkDistance 等力值来获得良好的效果。（这就是示例中的 silders 所做的。）

有关更多信息，请参阅 d3 文档：[https ://github.com/mbostock/d3/wiki/Force-Layout](https://github.com/mbostock/d3/wiki/Force-Layout)

然后你可能会偶然发现标签在饼图周围排列但没有重叠但以某种奇怪的顺序排列的问题。您可以通过最初将标签以正确的顺序放置在饼图周围的较大圆圈上来解决此问题，而不是将它们随机放置在面板周围，这是问题的原因。这样，您将体验到更少的抖动和错位。

这个想法也在另一个块示例中进行了描述：http: [//bl.ocks.org/mbostock/7881887](http://bl.ocks.org/mbostock/7881887)

在此示例中，节点最初放置在虚拟圆上。定位由以下函数计算：

x: Math.cos(i / m * 2 * Math.PI) * 200 + 宽度 / 2 + Math.random(),

y: Math.sin(i / m * 2 * Math.PI) * 200 + height / 2 + Math.random()

它们代表一个半径为 200 的圆，位于绘图面板的中心。圆被分成m个同样大的块。i/m 只计算 i 范围从 0 到 m-1 的“块位置”。

希望我能帮上忙！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T08:31:57.200

是的，您绝对可以将力标签与饼图结合起来！您开始使用的饼图标签没有什么特别之处，它们只是文本元素，可以像其他任何东西一样使用变换或 x/y 定位。看起来您最初是根据它们标记的弧的质心来定位这些标签，但您可以轻松地使用其他标准（例如力布局的输出）。

D3 的力布局根据一组约束来计算事物的位置，这些约束包括什么是固定的、什么是可移动的以及哪些与哪些相连。Mike 的 bl.ocks 示例中的`labelForce.update`方法用于告知力布局需要定位多少对象，以及固定“锚”点在哪里。然后它将标签的计算位置保存到图表的数据模型中，稍后在`redrawLabels`函数中使用它们。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-22T22:14:50.580

您需要创建两条弧线。一个用于绘制饼图，另一个用于放置标签。

```
// first arc used for drawing the pie chart
var arc = d3.svg.arc()
  .outerRadius(radius - 10)
  .innerRadius(0);

// label attached to first arc
g.append("text")
  .attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")"; })
  .attr("dy", ".35em")
  .style("text-anchor", "middle")
  .text(function(d) { return d.data.age; });

// second arc for labels
var arc2 = d3.svg.arc()
  .outerRadius(radius + 20)
  .innerRadius(radius + 20);

// label attached to second arc
g.append("text")
  .attr("transform", function(d) { return "translate(" + arc2.centroid(d) + ")"; })
  .attr("dy", ".35em")
  .style("text-anchor", "middle")
  .text(function(d) { return d.data.age; }); 
```

# maven - 缺少通过静态项目内存储库解决方案向 Maven 构建类路径添加的 jar

> ID：14282435
> 
> 赞同：1
> 
> 时间：2013-01-11T16:28:59.783
> 
> 标签：maven, maven-2, maven-3

推荐在没有公共存储库的 Maven 项目中添加 JAR 文件的最佳策略之一是使用静态项目内存储库。不错的博客：[http](http://charlie.cu.cc/2012/06/how-add-external-libraries-maven/) ://charlie.cu.cc/2012/06/how-add-external-libraries-maven/或我发现 StackOverflow 帖子中最受欢迎的博客之一 我[可以在不安装它们的情况下将 jars 添加到 maven 2 构建类路径吗?](https://stackoverflow.com/questions/364114/can-i-add-jars-to-maven-2-build-classpath-without-installing-them) 是否有人在为解决方案的集成采取完全相同的步骤时遇到下一个问题（我的特殊情况是添加 filters-1.0.jar 文件）：“Missing artifact imageUtil:filters:jar:0.1:compile”或换句话说，尽管如此最后在 pom.xml 中设置了静态项目内存储库也无法识别？我错过了什么吗？

以下是我整合解决方案的步骤：

*   在我的 Maven 项目的根目录中创建一个“repo”文件夹
*   在 pom.xml 我注册了静态存储库：

> `<repository>`
> 
> ```
>  <id>repo</id>
>        <releases>
>            <enabled>true</enabled>
>            <checksumPolicy>ignore</checksumPolicy>
>        </releases>
>        <snapshots>
>            <enabled>false</enabled>
>        </snapshots>
>        <url>file://${project.basedir}/repo</url> 
> ```
> 
> `</repository>`

*   再次在 pom.xml 中添加了提及依赖项：

> `<dependency>`
> 
> ```
>  <groupId>imageUtil</groupId>
>   <artifactId>filters</artifactId>
>   <version>0.1</version> 
> ```
> 
> `</dependency>`

*   最后一步是在下一个子文件夹结构中复制提及 JAR

    /repo/imageUtil/filters/0.1/filters-0.1.jar

当我签入项目的构建路径时（我使用的是 Eclipse），我还看到提到 JAR 正在我的本地存储库中查找或 - /home/simeon/.m2/repository/imageUtil/filters/0.1（缺失）

也许这里的问题是“如何对我的 maven 项目说应该在我的静态项目内存储库中搜索这个 JAR”？

提前致谢， 西蒙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:12:36.373

你的设置看起来不错。它永远不会占用您的项目内存储库，还是您的意思是它第一次工作，然后它只会在`/home/simeon/.m2/repository/imageUtil/filters/0.1`

我尝试了类似的方法，发现*如果我给出 Maven 中央存储库中可用的标准库的名称，它会首先查找那里并从那里下载它*。

所以我采用了一个标准库（saxon）并将其重命名为不同的东西（例如：saxonic），我知道它不会在任何外部回购中可用，我可以看到它使用我定义的*“inprojrepo”*并将其安装到我自己的本地Maven仓库。

之后，它使用本地 Maven 存储库进行下一次构建。

```
[INFO] ------------------------------------------------------------------------
Downloading: file://D:\mymavenproject\someproject/inprojrepo/net/sf/Saxo
nic/9.4/Saxonic-9.4.pom
Downloading: http://repo.maven.apache.org/maven2/net/sf/Saxonic/9.4/Saxonic-9.4.
pom
[WARNING] The POM for net.sf:Saxonic:jar:9.4 is missing, no dependency informati
on available
Downloading: file://D:\mymavenproject\someproject/inprojrepo/net/sf/Saxo
nic/9.4/Saxonic-9.4.jar
Downloaded: file://D:\mymavenproject\someproject/inprojrepo/net/sf/Saxon
ic/9.4/Saxonic-9.4.jar (9560 KB at 29234.1 KB/sec)
[INFO] 
```

我的 POM

```
<repository>
    <id>inprojrepo</id>
    <releases>
           <enabled>true</enabled>
           <checksumPolicy>ignore</checksumPolicy>
       </releases>
       <snapshots>
           <enabled>false</enabled>
       </snapshots>
    <url>file://${project.basedir}/inprojrepo</url>
</repository> 
```

# c# - 以编程方式访问 UniformGrid ItemTemplate

> ID：14282440
> 
> 赞同：1
> 
> 时间：2013-01-11T16:29:20.227
> 
> 标签：c#, wpf, datatemplate, itemscontrol

我正在尝试使用 WPF 构建一个宾果游戏模拟器以了解有关 WPF 的更多信息，但我无法弄清楚如何以`<ItemsControl>`编程方式更改模板。

我只使用 VS 2010 的默认 WPF 应用程序，所以我有 MainWindow.xaml、App.xaml 和 MainWindow.xaml.cs。

我想访问 , 的原因`<ItemTemplate>`是如果选择的宾果号码出现，则更改绑定模板。

我已经在我的代码隐藏文件中尝试[了这种可能的解决方案](https://stackoverflow.com/a/984862/1804496 "这个可能的解决方案")，但我认为这在这种情况下不起作用。

这是我设置 MainWindow 和 App xaml 文件的方式

# 主窗口.xaml

```
<ItemsControl Name="icBColumn" ItemsSource="{Binding CardBNumbers}" 
              Grid.Column="0" Grid.Row="2" 
              ItemTemplate="{StaticResource BingoSquare}"
              ItemsPanel="{StaticResource BingoColumn}"> 
```

# 应用程序.xaml

```
<DataTemplate x:Key="BingoSquare">
  <Border Background="{DynamicResource UnmarkedSquare}">
    <Label Content="{Binding}" />
  </Border>
</DataTemplate>
<RadialGradientBrush x:Key="UnmarkedSquare" GradientOrigin="0.5,0.5" 
                     Center="0.5,0.5" RadiusX="0.5" RadiusY="0.5">
  <RadialGradientBrush.GradientStops>
    <GradientStop Color="LimeGreen" Offset="1" />
  </RadialGradientBrush.GradientStops>
</RadialGradientBrush>
<ItemsPanelTemplate x:Key="BingoColumn">
  <UniformGrid Name="NumbersGrid" Columns="1" Rows="5"/>
</ItemsPanelTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:52:36.330

检查这个[链接](http://msdn.microsoft.com/en-us/library/system.windows.frameworktemplate.findname.aspx)，你会发现代码足够接近你的需要，但需要一些工作。

我会提出一些重建。

例如，您将 ItemsControl 的 ItemsSource 绑定到 CardBNumbers。它是 int 列表还是 CustomClass 列表，例如 BingoNumClass。如果它是自定义类，则添加一个布尔 IsBingo 布尔属性，您将默认设置为 false。只要选择了宾果编号并且您将更新CardBnumbers列表项时，它将转向代码。

然后，您可以在 IsBingo 属性上使用 Datatriggers 扩展您的 ItemTemplate，以便在选择它后立即更改其外观 - 从您的 CardBNumbers 列表中变为 true。

# c - 返回0后main函数不退出，shmctl不删除段

> ID：14282443
> 
> 赞同：0
> 
> 时间：2013-01-11T16:29:24.663
> 
> 标签：c, shared-memory

我正在尝试将共享内存用作管道，但遇到了几个问题：

1.  我无法删除分段
2.  主函数不退出，之后`return 0`

    ```
    int main()
    {
      int spd[2], pid, rb;
      char buff[4096];
      if (shm_pipe_pipe(spd) < 0)
      {
            perror("shm_pipe_pipe");
            exit(1);
      }
      if (fork())
      {
            rb = shm_pipe_read(spd[0], buff, sizeof(buff));
            if (rb > 0)
                    write(1, buff, rb);
      }
      else
      {
             shm_pipe_write(spd[1], "hello world!\n", sizeof("hello world!\n"));
      }

      shm_pipe_close(spd[0]);
      shm_pipe_close(spd[1]);
      printf("end main\n");
      return 0;
    } 
    ```

最后一个输出是“end main”，但程序没有关闭并返回 bash ......我肯定它与整个共享内存有关：

`shm_pipe_pipe()`分配共享内存段和指向共享内存的指针：

```
shmid = shmget(key, PIPE_SIZE, IPC_CREAT | IPC_EXCL | 0600);
buffer = (char*)shmat(pipes_array[i].m_shmid, NULL, 0)) == NULL) 
```

`shm_pipe_write` `and shm_pipe_read`只需执行 memcpy() 到/从共享内存

`shm_pipe_close()`free 是指向该段的指针并删除该段：

```
shmdt(buffer);
shmctl(shmid, IPC_RMID, NULL); 
```

我不明白为什么它不起作用。

它写在 shmdt 的手册页中，经过`fork(2) the child inherits the attached shared memory segments.`

所以我尝试`shmdt`在父亲和孩子上使用两次，但后来出现错误

```
Invalid argument 
```

当`main()`打印“end main”后卡住时，我尝试查看共享内存的状态`ipcs -m`，我看到`nattch`是 1，然后`key`是 0...只有在我之后`ctrl+c` `main()`，内存段才被删除`ipcs -m`

我不确定我应该带来什么进一步的信息。我没有写所有的功能，因为这很多，我认为这不重要......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:04:26.763

我怀疑你对某些事情感到困惑。

> 最后一个输出是“end main”
> 
> shm_pipe_close() 释放指向该段的指针并删除该段

然而，正如所写的那样——`exit`在子块中没有——这段代码*应该***在父子**块中运行：

```
 shm_pipe_close(spd[0]);
  shm_pipe_close(spd[1]);
  printf("end main\n"); 
```

换句话说，两次（除非孩子停滞不前`shm_pipe_read`，见下文）。如果“删除段”指的是单个共享内存实体，这可能是无意的。

除此之外，您的结果取决于是否像管道`shm_pipe_read`上`shm_pipe_write`的正常阻塞读/写调用一样工作，它一直等到在另一端读取或写入数据。我猜你的写作肯定*不是*那样的，阅读也可能不是这样。

这意味着这`shm_pipe_write`可能发生在父级中，然后立即删除“管道”（实际上是一个共享的内存段）。如果这导致某些事情`shm_pipe_read`停止（因为该段已经消失），它可能（如 ring0 在评论中所说）解释您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:54:55.490

我认为你的问题就在这里：

```
 shmid = shmget(key, PIPE_SIZE, IPC_CREAT | IPC_EXCL | 0600); 
```

更改权限，以便子级和父级都可以访问共享内存段：

```
 shmid = shmget(key, PIPE_SIZE, IPC_CREAT | IPC_EXCL | 0666); 
```

* * *

因为我不确切知道你的函数在做什么......这是一个类似的程序，你可以参考看看你是否有其他错误（顺便说一句 - 我将这里的权限更改为 0600，我可以看到主进程完成但孩子挂起）：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/shm.h>

int main(int argc, char * argv[])
{
    key_t key = 1111;
    int shmid;
    char *buff;
    char *s;
    char *addr = NULL;

    if((shmid = shmget(key, 4096, IPC_CREAT | IPC_EXCL | 0666)) < 0 ) {
         perror("shmget");
        return -1;
    }
    if((buff = shmat(shmid, addr, 0)) == (char *)-1) {
        perror("shmat");
        return -1;
    }
    if(fork()){
      printf("I'm the child\n");
      while(strlen(buff) == 0) {}
      for(s = buff; *s != NULL; s++)
        putchar(*s);
      printf("\nChild is done\n");
    }
    else {
      printf("I'm the parent\n");
       strcpy(buff, "hello world!\0");
      printf("Parent is done.\n");
    }
    shmdt(addr);
    shmctl(shmid, IPC_RMID, NULL);
    return 0;
} 
```

# android - 单击按钮上的菜单项

> ID：14282449
> 
> 赞同：1
> 
> 时间：2013-01-11T16:29:41.123
> 
> 标签：android, menuitem

我正在尝试在菜单项上获取图像。但在本教程中，它使用字母来查看菜单项。我想在单击按钮时查看按钮。目前该代码不起作用。我指的是教程。请指导我找到最好的方法。

我的代码：

```
package com.example.androiddemo;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Switch;
import android.widget.Toast;

public class nextpagejava extends Activity implements OnClickListener{
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.nextpage);
    Button bt1 = (Button) findViewById(R.id.btn1);
    bt1.setOnClickListener(this);
  }
  @Override
  public void onClick(View v) {
    // TODO Auto-generated method stub
  }
  public void CreateMenu(Menu m){
    m.setQwertyMode(true);
    MenuItem mItm1 = m.add(0, 0, 0, "Item1");
    {
      mItm1.setAlphabeticShortcut('a');
      mItm1.setIcon(R.drawable.images);
    }
  }
  private boolean MenuChoice(MenuItem item){
    switch(item.getItemId()){
      case 0:
        Toast.makeText(this, "You clicked on item 1", Toast.LENGTH_LONG).show();
        return true;
      }
      return false;
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:31:58.560

如果您询问使用图标来溢出 ActionBar，您不能这样做 - 只有文本描述可用于此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:37:51.483

希望您正在寻找将图像添加到菜单的功能。如果我理解正确，下面的教程可以帮助你做到这一点，

[http://tonysilvestri.com/blog/2010/08/25/android-options-menu-with-an-image/](http://tonysilvestri.com/blog/2010/08/25/android-options-menu-with-an-image/)

# spring-roo - Spring Roo osgi 启动命令上的 UnknownHostException

> ID：14282453
> 
> 赞同：0
> 
> 时间：2013-01-11T16:29:50.803
> 
> 标签：spring-roo

我正在使用 Spring Roo 插件 dev-t 迈出第一步。生成和构建“简单插件”成功完成。但在最后一步我收到了奇怪的错误信息。

**java.net.UnknownHostException：目标捆绑 ID 文件：//target/org.home.roo.addon.hello-0.1.0.BUILD-SNAPSHOT.jar 无效。**

目标目录和 jar 确实存在。我什至无法理解这个错误的性质。你能告诉我我做错了什么或错过了什么吗？

```
C:\sts_workspaceRooAddOn\spring-roo-addon-hello> roo addon create simple --topLevelPackage org.home.roo.addon.hello
    ____  ____  ____
   / __ \/ __ \/ __ \
  / /_/ / / / / / / /
 / _, _/ /_/ / /_/ /
/_/ |_|\____/\____/    1.2.2.RELEASE [rev 7d75659]

Welcome to Spring Roo. For assistance press TAB or type "hint" then hit ENTER.
Created ROOT\pom.xml
Created ROOT\readme.txt
Created ROOT\legal
Created ROOT\legal\LICENSE.TXT
Created SRC_MAIN_JAVA\org\home\roo\addon\hello
Created SRC_MAIN_JAVA\org\home\roo\addon\hello\HelloCommands.java
Created SRC_MAIN_JAVA\org\home\roo\addon\hello\HelloOperations.java
Created SRC_MAIN_JAVA\org\home\roo\addon\hello\HelloOperationsImpl.java
Created SRC_MAIN_JAVA\org\home\roo\addon\hello\HelloPropertyName.java
Created ROOT\src\main\assembly
Created ROOT\src\main\assembly\assembly.xml
Created SRC_MAIN_RESOURCES\org\home\roo\addon\hello
Created SRC_MAIN_RESOURCES\org\home\roo\addon\hello\info.tagx
Created SRC_MAIN_RESOURCES\org\home\roo\addon\hello\show.tagx

C:\sts_workspaceRooAddOn\spring-roo-addon-hello>mvn clean install
...
...
[INFO] Installing org/home/roo/addon/hello/org.home.roo.addon.hello/0.1.0.BUILD-SNAPSHOT/org.home.roo.addon.hello-0.1
.0.BUILD-SNAPSHOT.jar
[INFO] Writing OBR metadata
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 14.268s

C:\sts_workspaceRooAddOn\spring-roo-addon-hello>roo osgi start --url file://target/org.home.roo.addon.hello-0.1.0.BUILD
-SNAPSHOT.jar
    ____  ____  ____
   / __ \/ __ \/ __ \
  / /_/ / / / / / / /
 / _, _/ /_/ / /_/ /
/_/ |_|\____/\____/    1.2.2.RELEASE [rev 7d75659]

Welcome to Spring Roo. For assistance press TAB or type "hint" then hit ENTER.
0 upgrades available (plus 35 upgrades not visible due to your version stability setting of RELEASE)
java.net.UnknownHostException: target
Bundle ID file://target/org.home.roo.addon.hello-0.1.0.BUILD-SNAPSHOT.jar is invalid. 
```

# java - 将盒装双倍乘以 2 的最有效方法？

> ID：14282456
> 
> 赞同：1
> 
> 时间：2013-01-11T16:29:59.207
> 
> 标签：java, double, wrapper

假设我们有一个装箱的 double 变量，`foo`我们想将它的值乘以并将其`2`存储在另一个装箱的 double 变量中`bar`。从以下方法，

**方法一：**

```
Double bar = foo * 2; 
```

和，

**方法二：**

```
Double bar = Double.valueOf(foo.doubleValue() * 2); 
```

考虑到效率、可读性等，哪一个更可取？或者差异是如此微不足道，以至于这些方法实际上是等效的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T16:33:54.940

方法一更好。

*   它可以被人类阅读
*   在其他条件相同的情况下，更少的字符比更多的字符更好
*   编译器可能会消除任何性能差异。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T16:33:15.517

我认为无论您如何尝试优化它，java都会使这个版本`Double bar = foo * 2;`至少与您的解决方案一样优化。试图获得这样的表现通常是徒劳的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T16:33:46.270

第一。它具有更好的可读性，并将所有装箱/拆箱操作保持在幕后。

不要考虑*乘以 2*这样简单的操作的效率。

...或长答案

有两种方法：

```
void method1() {
    Double foo = 1.0;
    Double bar = foo * 2;
}

void method2() {
    Double foo = 1.0;
    Double bar = Double.valueOf(foo.doubleValue() * 2);
} 
```

编译`javac`并查看字节码指令`javap`

```
void method1();
   Code:
      0: dconst_1
      1: invokestatic  #2                  // Method java/lang/Double.valueOf:(D)Ljava/lang/Double;
      4: astore_1
      5: aload_1
      6: invokevirtual #3                  // Method java/lang/Double.doubleValue:()D
      9: ldc2_w        #4                  // double 2.0d
     12: dmul
     13: invokestatic  #2                  // Method java/lang/Double.valueOf:(D)Ljava/lang/Double;
     16: astore_2
     17: return

 void method2();
   Code:
      0: dconst_1
      1: invokestatic  #2                  // Method java/lang/Double.valueOf:(D)Ljava/lang/Double;
      4: astore_1
      5: aload_1
      6: invokevirtual #3                  // Method java/lang/Double.doubleValue:()D
      9: ldc2_w        #4                  // double 2.0d
     12: dmul
     13: invokestatic  #2                  // Method java/lang/Double.valueOf:(D)Ljava/lang/Double;
     16: astore_2
     17: return 
```

您看得出来差别吗？

# ruby - 从 YELP API 解析 JSON 时出错

> ID：14282459
> 
> 赞同：0
> 
> 时间：2013-01-11T16:30:12.153
> 
> 标签：ruby, json, parsing, yelp

我无法从 Yelp API 解析 JSON。JSON 数据如下所示：

```
{
    region: {
        span: {
            latitude_delta: 0,
            longitude_delta: 0
        },
        center: {
            latitude: 38.054117,
            longitude: -84.439002
        }
    },
    total: 23,
    businesses: [
        {
            is_claimed: false,
            rating: 5,
            mobile_url: "http://m.yelp.com/biz/vineyard-community-church-lexington",
            rating_img_url: "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/f1def11e4e79/ico/stars/v1/stars_5.png",
            review_count: 2,
            name: "Vineyard Community Church",
            snippet_image_url: "http://s3-media4.ak.yelpcdn.com/photo/VoeMtbk7NRFi6diksSUtOQ/ms.jpg",
            rating_img_url_small: "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/c7623205d5cd/ico/stars/v1/stars_small_5.png",
            url: "http://www.yelp.com/biz/vineyard-community-church-lexington",
            phone: "8592582300",
            snippet_text: "I have been a member of Vineyard Community Church since 2004\. Here you will find a modern worship service with a full band, witty speakers who teach...",
            image_url: "http://s3-media3.ak.yelpcdn.com/bphoto/D71eikniuaHjdOC8DB6ziA/ms.jpg",
            categories: [
                [
                    "Churches",
                    "churches"
                ]
            ],
            display_phone: "+1-859-258-2300",
            rating_img_url_large: "http://s3-media3.ak.yelpcdn.com/assets/2/www/img/22affc4e6c38/ico/stars/v1/stars_large_5.png",
            id: "vineyard-community-church-lexington",
            is_closed: false,
            location: {
                city: "Lexington",
                display_address: [
                    "1881 Eastland Pwky",
                    "Lexington, KY 40505"
                ],
                geo_accuracy: 8,
                postal_code: "40505",
                country_code: "US",
                address: [
                    "1881 Eastland Pwky"
                ],
                coordinate: {
                    latitude: 38.054117,
                    longitude: -84.439002
                },
                state_code: "KY"
            }
        }
    ]
} 
```

JSON 存储在一个名为 @stuff 的 ruby​​ 字符串中，这是我用来尝试解析它的代码：

```
@parsed_stuff = JSON::parse(@stuff) 
```

当我这样做并尝试显示 @ parsed_stuff 的内容时，我在浏览器中收到以下错误

```
Parse error on line 2: { "region"=&gt;{ "span -------------^ Expecting '}', ':', ',', ']' 
```

对此问题提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:02:01.410

使用[jsonlint](http://jsonlint.com/)验证**JSON**。在这里，您必须将所有键作为字符串。

试试看

```
{
    "region": {
        "span": {
            "latitude_delta": 0,
            "longitude_delta": 0
        },
        "center": {
            "latitude": 38.054117,
            "longitude": -84.439002
        }
    },
    "total": 23,
    "businesses": [
        {
            "is_claimed": false,
            "rating": 5,
            "mobile_url": "http://m.yelp.com/biz/vineyard-community-church-lexington",
            "rating_img_url": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/f1def11e4e79/ico/stars/v1/stars_5.png",
            "review_count": 2,
            "name": "Vineyard Community Church",
            "snippet_image_url": "http://s3-media4.ak.yelpcdn.com/photo/VoeMtbk7NRFi6diksSUtOQ/ms.jpg",
            "rating_img_url_small": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/c7623205d5cd/ico/stars/v1/stars_small_5.png",
            "url": "http://www.yelp.com/biz/vineyard-community-church-lexington",
            "phone": "8592582300",
            "snippet_text": "I have been a member of Vineyard Community Church since 2004\. Here you will find a modern worship service with a full band, witty speakers who teach...",
            "image_url": "http://s3-media3.ak.yelpcdn.com/bphoto/D71eikniuaHjdOC8DB6ziA/ms.jpg",
            "categories": [
                [
                    "Churches",
                    "churches"
                ]
            ],
            "display_phone": "+1-859-258-2300",
            "rating_img_url_large": "http://s3-media3.ak.yelpcdn.com/assets/2/www/img/22affc4e6c38/ico/stars/v1/stars_large_5.png",
            "id": "vineyard-community-church-lexington",
            "is_closed": false,
            "location": {
                "city": "Lexington",
                "display_address": [
                    "1881 Eastland Pwky",
                    "Lexington, KY 40505"
                ],
                "geo_accuracy": 8,
                "postal_code": "40505",
                "country_code": "US",
                "address": [
                    "1881 Eastland Pwky"
                ],
                "coordinate": {
                    "latitude": 38.054117,
                    "longitude": -84.439002
                },
                "state_code": "KY"
            }
        }
    ]
} 
```

# xcode - 您在 Xcode for iPhone5 Storyboard 中使用什么图像尺寸

> ID：14282462
> 
> 赞同：0
> 
> 时间：2013-01-11T16:30:38.530
> 
> 标签：xcode, graphics, storyboard, iphone-5

创建 iPhone5 故事板时，您在 Xcode 中使用了哪些图像。因为 iPhone5 只有视网膜，所以你所有的图形都必须加倍，而坐标都是那个的 1/2。

因此，如果我在 Xcode 中的屏幕中间有一个 50 x 50 的图像，那么我的 iPhone5 图像必须是 100x100。如果我将该图像命名为 image100.png，我仍然会在 50x50 的屏幕上创建一个 UIImageView 并将其命名为 image100.png。这似乎可行，如果是这样，那么在创建 iPhone5 故事板时，您只需要记住将所有高度和宽度都减少 2 即可？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:14:02.233

是的，这是规则。

这完全是习惯于解决独立性的想法的问题。点不是像素。在 iphone5 上，我们希望图像分辨率为每点 2 像素，在非视网膜屏幕上，我们希望图像分辨率为每点 1 像素。

# ruby-on-rails - 创建然后更新 - Rails

> ID：14282466
> 
> 赞同：0
> 
> 时间：2013-01-11T16:30:44.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord, update-attributes

我在下面有一组通过表单提交的参数

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"pyMkh1eJ7WxYC978XKjdsyGOeGDvi6RTIOSGb9KMqkc=", "link"=>{"category_id"=>"1", "comment"=>"", "url"=>"yahoo.com "}, "type"=>"html", "original_url"=>"http://yahoo.com", "url"=>"http://www.yahoo.com/", "title"=>"Yahoo!", "description"=>"Welcome to Yahoo!, the world's most visited home page. Quickly find what you're searching for, get in touch with friends and stay in-the-know with the latest news and information.", "favicon_url"=>"http://www.yahoo.com/favicon.ico", "provider_url"=>"http://www.yahoo.com", "provider_display"=>"www.yahoo.com", "provider_name"=>"Yahoo", "safe"=>"true", "html"=>"", "thumbnail_url"=>"", "object_type"=>"link", "image_url"=>"", "category_id"=>"1"} 
```

我想在属于类别模型的链接模型中创建一个新的“链接”记录。我在链接控制器中的“创建”操作如下所示

```
 def create
    @category = Category.find_by_id(params[:category_id])
    @link = @category.links.build(params[:link])
    @link.user_id = current_user.id
    respond_to do |format|
        if @link.save
            links_attributes = params.slice(:original_url, :title, :description, :favicon_url, :provider_url, :provider_display, :thumbnail_url, :object_type)
            @link.update_attributes(links_attributes)
        else 

        end
    end     
  end 
```

如果我只是在没有更新属性的情况下执行@link.save，它只会保存评论、url 和类别 ID。但是，上面创建了 2 条记录，一条评论、url 和 category_id，另一条包含所有数据。

我怎样才能确保这只会创建一个包含所有信息的记录？

**更新** 如果我可以用 3 个参数创建记录，然后用剩余的参数（links_attributes）更新它，我会很好......只是不知道该怎么做。

这是我提交时得到的输出：

```
Started POST "/categories/1/links" for 127.0.0.1 at 2013-01-11 12:43:44 -0500
Processing by LinksController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"pyMkh1eJ7WxYC978XKjdsyGOeGDvi6RTIOSGb9KMqkc=", "link"=>{"category_id"=>"1", "comment"=>"", "url"=>"bloomberg.com "}, "type"=>"html", "original_url"=>"http://bloomberg.com", "url"=>"http://www.bloomberg.com/", "title"=>"Business, Financial & Economic News, Stock Quotes", "description"=>"Bloomberg is a premier site for business and financial market news. It delivers world economic news, stock futures, stock quotes, & personal finance advice.", "favicon_url"=>"http://www.bloomberg.com/favicon.ico", "provider_url"=>"http://www.bloomberg.com", "provider_display"=>"www.bloomberg.com", "provider_name"=>"Bloomberg", "safe"=>"true", "html"=>"", "thumbnail_url"=>"http://www.bloomberg.com/image/is2KySnyVWmA.jpg", "object_type"=>"link", "image_url"=>"", "category_id"=>"1"}
  User Load (0.1ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
   (0.1ms)  begin transaction
  SQL (0.4ms)  INSERT INTO "links" ("category_id", "comment", "created_at", "description", "favicon_url", "object_type", "original_url", "points", "profile_link", "provider_display", "provider_url", "thumbnail", "thumbnail_url", "title", "updated_at", "url", "user_id") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["category_id", "1"], ["comment", ""], ["created_at", Fri, 11 Jan 2013 17:43:

Started POST "/categories/1/links" for 127.0.0.1 at 2013-01-11 12:43:44 -0500
Processing by LinksController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"pyMkh1eJ7WxYC978XKjdsyGOeGDvi6RTIOSGb9KMqkc=", "link"=>{"category_id"=>"1", "comment"=>"", "url"=>""}, "commit"=>"Post", "category_id"=>"1"}
  User Load (0.1ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
   (0.1ms)  begin transaction
  SQL (0.4ms)  INSE44 UTC +00:00], ["description", "Bloomberg is a premier site for business and financial market news. It delivers world economic news, stock futures, stock quotes, & personal finance advice."], ["favicon_url", "http://www.bloomberg.com/favicon.ico"], ["object_type", "link"], ["original_url", "http://bloomberg.com"], ["points", nil], ["profile_link", nil], ["provider_display", "www.bloomberg.com"], ["provider_url", "http://www.bloomberg.com"], ["thumbnail", nil], ["thumbnail_url", "http://www.bloomberg.com/imRT INTO "links" ("category_id", "comment", "created_at", "description", "favicon_url", "object_type", "original_url", "points", "profile_link", "provider_display", "provider_url", "thumbnail", "thumbnail_url", "title", "updated_at", "url", "user_id") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["category_id", "1"], ["comment", ""], ["created_at", Fri, 11 Jan 2013 17:43:44 UTC +00:00], ["description", nil], ["favicon_url", nil], ["object_type", nil], ["original_url", nil], ["points", nil], ["profile_link", nil], ["provider_display", nil], ["provider_url", nil], ["thumbnail", nil], ["thumbnail_url", nil], ["title", nil], ["updated_at", Fri, 11 Jan 2013 17:43:44 UTC +00:00], ["url", ""], ["user_id", 1]]
   (1.1ms)  commit transaction
  Rendered links/create.js.erb (0.0ms)
Completed 200 OK in 8ms (Views: 3.9ms | ActiveRecord: 1.6ms)
age/is2KySnyVWmA.jpg"], ["title", "Business, Financial & Economic News, Stock Quotes"], ["updated_at", Fri, 11 Jan 2013 17:43:44 UTC +00:00], ["url", "bloomberg.com "], ["user_id", 1]]
   (2.5ms)  commit transaction
  Rendered links/create.js.erb (0.0ms) 
```

这是我的表格：

```
<%= form_for([@category, @category.links.build], :remote => true, :class => "form-horizontal") do |f| %>
    <%= f.hidden_field :category_id, :value => params[:id] %>
    Comment: <%= f.text_field :comment %><BR>
    Link: <%= f.text_field :url %>
    <%= f.submit "Post", :class => "btn", :disable_with => '...', :id => "new_link_button" %>
<% end %>

<div class="selector" style="width:350px;margin:-30px 0px 0px 0px;"></div>
<!-- Placeholder that tells Preview where to put the loading icon-->
<div class="loading">
    <img src='http://embedly.github.com/jquery-preview/images/loading-rectangle.gif'>
</div>

<script>

$('#link_url').preview({ key:'60f1dcdf3258476794784148a6eb65e7', // Sign up for a key: http://embed.ly/pricing

      selector : {type:'rich'},
      preview : {
        submit : function(e, data){
          $.ajax({
            dataType: 'script',
            url: this.form.attr('action'),
            type: 'POST',
            data: data
          });
        },
      },
      autoplay : 0,
      maxwidth : 350,
      display : {display : 'rich'}
});

$('#new_link_button').click(function(e) {
    e.preventdevault();
    $('.new_link').submit();
    return false;
});

</script> 
```

这是我的路线：

```
 resources :categories, :only => [:new, :show, :create, :edit, :update] do
    resources :links, :only => [:new, :show, :create, :edit, :update]
    resources :industries, :only => [:new, :show, :create, :edit, :update]
    resources :territories, :only => [:new, :show, :create, :edit, :update]
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:48:29.547

在保存之前尝试设置它们。

```
def create
  @link = Link.new(params[:link])
  @link.category_id = params[:category_id]
  @link.original_url = params[:original_url]
  @link.title = params[:title]
  @link.description = params[:description]
  @link.user_id = current_user.id
  # etc...
  respond_to do |format|
    if @link.save
      # do things...
    else 
      # do other things...
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:00:56.150

首先，您不需要调用`@link.save`then `@link.update_attributes`，因为如果它不存在，`@link.update_attributes`它将保存在您的数据库中。`@link`

从您发布的日志中，您的控制器似乎收到了两个发布请求，这就是它创建两个对象的原因，我认为原因是发生了两次提交：一个是提交的表单，另一个是内部的 ajax 请求你的`$('#link_url').preview(...`代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:36:51.760

我认为您的表单的构建方式存在问题。正如您在发布的参数中看到的那样，`params[:link]`仅包含您尝试保存在链接上的数据的子集：

`"link"=>{"category_id"=>"1", "comment"=>"", "url"=>"yahoo.com "}`

其余的都在 params 数组的顶层：

`Parameters: {... "original_url"=>"http://yahoo.com", "url"=>"http://www.yahoo.com/", "title"=>"Yahoo!", "description"=>"Welcome to Yahoo!..." ...}`

你应该看看你是如何使用 form_for 来构造你的表单的，并确保它被正确地用于附加参数。

**编辑：**

如果您无法编辑表单，则可以在控制器中执行此操作：

```
@link.user_id = current_user.id
links_attributes = params.slice(:original_url, :title, :description, :favicon_url, :provider_url, :provider_display, :thumbnail_url, :object_type)
@link.attributes = links_attributes
respond_to do |format| 
   if @link.save
      ... 
```

# android - 如果所选行不存在，Android 数据库不执行任何操作

> ID：14282468
> 
> 赞同：0
> 
> 时间：2013-01-11T16:30:45.693
> 
> 标签：android, database, select, random

我做了一个查询，使用 ID 从数据库中请求一个随机行。但我有一个小问题。如果它存在或不存在，我希望它显示一条消息。例如我的数据库是这样的：

ID - ingilizce - turkce
1 - hello - merhaba
4 - hi - selam

如您所见，第二和第三条记录不存在。我生成一个介于 1 和 4 之间的随机数，并得到属于 ID 的行。因此，当它生成一个像 2 或 3 这样的数字时，它会生成一个新的随机数。
我的代码在这里：

公共无效kelimeUret（）{

```
SQLiteDatabase db = kelimeler.getReadableDatabase();

rastgele = new Random();

Cursor kayit = db.rawQuery("SELECT count(*) FROM kelimeler", null);

kayit.moveToFirst();

int max = Integer.parseInt(kayit.getString(0));
int min = 1;

int rastgeleKayit = rastgele.nextInt(max - min + 1) + min;

Cursor kayit3 = db.rawQuery("SELECT * FROM kelimeler WHERE id=" + rastgeleKayit, null);
kayit3.moveToFirst();
int kayitSayisi = kayit3.getCount();

if (kayitSayisi<1) {

    //Toast.makeText(getApplicationContext(), "bu kayıt yok", Toast.LENGTH_SHORT).show();
    //kelimeUret();

    // I COULDN'T DO HERE !

} else {

    Cursor kayit2 = db.rawQuery("SELECT ingilizce FROM kelimeler WHERE id=" + rastgeleKayit, null);

    kayit2.moveToFirst();

    String sonuc = kayit2.getString(0);

    olusturulanKelime = sonuc;

    kelime = (TextView) findViewById(R.id.kelime);
    kelime.setText(sonuc);

} 
```

感谢您的回复...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:35:25.587

```
Cursor kayit3 = db.rawQuery("SELECT * FROM kelimeler WHERE id=" + rastgeleKayit, null);
kayit3.moveToFirst(); 
```

kayit3.getCount(); 将返回查询返回的记录数。如果没有记录，则它不存在。如果它返回多于 1 条记录，则该记录存在。

希望这可以帮助

# kaltura - 如何使用 Kaltura API 在条目上设置 AccessControlProfile？

> ID：14282472
> 
> 赞同：1
> 
> 时间：2013-01-11T16:30:58.477
> 
> 标签：kaltura

我正在通过 Kaltura Contribution Widget 上传视频条目。我希望允许用户选择免费预览的长度，该长度将为无权查看整个视频的用户显示。我想通过创建不同的 AccessControlProfiles（具有不同的预览长度）然后在用户选择预览长度后将配置文件分配给上传的视频来实现这一点。

有没有办法使用 API 分配访问控制配置文件？我浏览了文档，但找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:28:31.713

您可能必须代理 api，因为您的上传贡献的用户（当然）将无法修改配置文件。对于给定时间 5、10、15 等第二次预览，可能最容易拥有一些访问控制配置文件。

访问控制的 api 是基于每个条目应用的。您可以通过以下方式“添加”新配置文件：[http ://www.kaltura.com/api_v3/testmeDoc/index.php?service=accessControlProfile](http://www.kaltura.com/api_v3/testmeDoc/index.php?service=accessControlProfile)

然后，您可以从 baseEntry 服务为条目分配一个基本访问控制 ID： [http](http://www.kaltura.com/api_v3/testmeDoc/index.php?service=baseEntry&action=update) ://www.kaltura.com/api_v3/testmeDoc/index.php?service=baseEntry&action=update 通过填充字段：baseEntry:accessControlId

希望有帮助。

# ios - 在 iOS 视图中动态添加/删除行（如邮件中的规则）

> ID：14282474
> 
> 赞同：0
> 
> 时间：2013-01-11T16:31:03.180
> 
> 标签：ios, objective-c, dynamic, tableview, rows

我正在开发一个应用程序，该应用程序具有需要配置商店营业时间的视图。

因此有一个包含一周中所有日期的列表：
- 星期一从 [10:00] 到 [12:00] (-) (+)
- 星期二从 [10:00] 到 [12:00] (-) ( +)
                 从 [14:00] 到 [18:00] (-) (+)
- 星期三 (+)
- 星期四 (+)
- 星期五从 [10:00] 到 [18:00] (-) (+) - 周六 (+)
- 周日 (+)

所以每天可以有多个开放时间。按 (-) 按钮删除该行，按 (+) 按钮添加一行。

我想像邮件中的规则配置一样实现这一点。（还不能提供截图，因为这是我的第一个问题）

我假设这可以像 tableview 一样实现，每天都有一个 UITableView，每一行都是打开时间的间隔。但我不确定。如果是这样，我如何动态调整表格视图的大小以仅显示必要的行？然后我如何重新排列布局，以免重叠？

更好的是一种更简单的方法，或者一个处理类似事情的框架。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:52:22.527

在我看来，使用 UITableView 肯定是一个好方法。为了管理不同大小的行，一个好的技术是为 UITableViewCell 类创建一个静态方法，该方法在给定单元格应该显示的内容的情况下返回 CGFloat 高度。例如，如果单元格需要显示一些文本，您将创建一个类似于此的方法：

```
+ (CGFloat)heightForCellWithText:(NSString *)text 
```

请记住，此信息需要通过 UITableViewDelegate 的`tableView:heightForRowAtIndexPath`方法传递。这种技术的美妙之处在于，您实际上不需要创建 UITableViewCell 实例来确定它的高度——无论实例是否已经分配，​​它都会在需要时计算并传递给 TableView。

希望这能给你一个正确的方向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:54:35.067

有一些苹果委托方法为您提供了使用一些委托方法编辑表格视图的功能。

您也可以删除您的行并在表中添加新行。但请记住，在添加或删除一行时，您必须每次都更新您的数据源。

在这里很难解释所有这些方法。但是有一些示例项目已经实现了您想要的所有这些功能。

在此处检查用于编辑表格查看样式的示例项目[示例代码](http://adeem.me/blog/2009/05/29/iphone-sdk-tutorial-add-delete-reorder-uitableview-row/)

另一个示例代码是[示例项目 2](http://www.edumobile.org/iphone/iphone-programming-tutorials/how-to-add-delete-data-from-tableview-in-iphone/)

我希望这会帮助你并解决你的问题。

# javascript - phonegap：1\. 照片后 iOS 的相机问题

> ID：14282477
> 
> 赞同：0
> 
> 时间：2013-01-11T16:31:23.757
> 
> 标签：javascript, cordova

我正在使用相机为 Andriod 和 iOS 做一个 phonegap 应用程序。在 Android 上一切正常！我可以打开相机，拍照，将照片保存到本地存储中……在 iOS 上我可以做同样的事情，但只能做一次。如果我想再做一次，相机将无法打开。对于 Android，我使用 phonegap 1.0(!)，对于 iOS cordova 2.2。两个应用程序都有相同的 javascript 代码。

`function capturePhoto() { navigator.camera.getPicture(savePicture, noPicture, { quality: 30, destinationType: Camera.DestinationType.DATA_URL }); }`

拍照或取消拍照过程都没有关系...

怎么办才能多次使用相机！请给我一个简短的反馈。

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:30:20.737

这不是phonegap的问题。这是 JQTouch 的问题，但仅限于 iOS！？问题解决了……

谢谢。

# asp.net - 主页 aspx 中的错误呈现控件。发生了未处理的异常。未指定 HtmlImageID 属性

> ID：14282479
> 
> 赞同：-1
> 
> 时间：2013-01-11T16:31:28.327
> 
> 标签：asp.net

我正在使用 asp.net 。我收到错误渲染控件 - Header1。发生了未处理的异常。未指定 HtmlImageID 属性。

如何修复此错误？

```
<tr>
    <td style="width: 100%; text-align: left; border-top-width: 0px; border-left-width: 0px; border-left-color: black; border-bottom-width: 0px; border-bottom-color: black; border-top-color: black; border-right-width: 0px; border-right-color: black; padding-right: 0px; padding-left: 0px; padding-bottom: 0px; margin: 0px; padding-top: 0px;" valign="top">
        <uc2:Header ID="Header1" runat="server" OnLoad="Header1_Load" EnableTheming="true" EnableViewState="true" Visible="true" />
    </td>
</tr> 
```

我的uc2是

```
<%@ Register Src="controls/Header.ascx" TagName="Header" TagPrefix="uc2" %> 
```

代码背后：

```
protected void Header1_Load(object sender, EventArgs e)
        {

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:34:00.347

在您的`<uc2:Header`标签中，您需要为`HtmlImageID`. 这个值需要是多少，不看uc2的细节就很难说了。

# python - python selenium 挂起寻找不存在的元素

> ID：14282481
> 
> 赞同：1
> 
> 时间：2013-01-11T16:31:36.657
> 
> 标签：python, firefox, selenium

我在 Python 中使用 selenium，当我搜索不存在的元素时它总是冻结。我真的尝试了一切（Firefox 17.0.1 版）：

```
>>> import selenium
>>> selenium.__version__
'2.26.0'
>>> from selenium import webdriver
>>> from selenium.webdriver.support.ui import WebDriverWait
>>> ff = webdriver.Firefox()
>>> ff.implicitly_wait(5)
>>> ff.set_page_load_timeout(5)
>>> ff.set_script_timeout(5)
>>> waiter = WebDriverWait(ff, 5)
>>> waiter.until(lambda ff: ff.find_element_by_name("foo")) 
```

最后一个命令无限期地冻结。如何让 firefox 在找不到元素时简单地返回 None 或抛出异常，而不是**永远**挂起？我正在使用硒 2.26.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:05:15.133

根据[此处找到的答案](https://stackoverflow.com/questions/12880024/selenium-webdriver-2-25-timeout-not-working/)

如果您使用的是 Firefox 17 和 Selenium 2.26.0，那么您遇到了缺陷 #4814：[http ://code.google.com/p/selenium/issues/detail?id=4814](http://code.google.com/p/selenium/issues/detail?id=4814)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T17:12:22.873

这似乎是 2.26.0 版本中的错误，`pip install selenium==2.27.0`已在我的计算机上修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:49:49.317

现在，我正在使用这个解决方法：

```
def selenium_safe_find_element_by_name(ff, element_name):
    elements = ff.find_elements_by_name(element_name)
    if not elements:
        raise ValueError("<name=%s> not found" % (element_name,))

    return elements[0] 
```

但是，如果没有这种解决方法，这似乎应该以某种方式工作。

# php - 读取输入类型隐藏值

> ID：14282482
> 
> 赞同：0
> 
> 时间：2013-01-11T16:31:38.933
> 
> 标签：php, html, forms

是否可以在加载时读取值？我怀疑不是。

```
<!DOCTYPE html>
<html>
    <head>
        <title>Some test</title>
    </head>
    <body>
        <form method="POST">
        <input type="hidden" name="token" value="<?php echo sha1("text")?>" >
        </form>
        <?php
        echo $_POST['token'];
        ?>
    </body>
</html> 
```

假设我想发送一些由 php 生成的值，如下所示：

```
<a href="url + page?options=1&token=sasadasdasda878asd7as8d7a"> 
```

是否可以选择不通过 URL 传递令牌（使用 get）来获取令牌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:33:35.923

`$_POST`将填充浏览器发送的数据。

如果页面中有表单，那么表单提交的数据只会在浏览*器提交表单时由浏览*器发送，不会在页面初始加载时提交，因为：

*   该页面可能会通过 GET 请求而不是 POST 请求加载
*   浏览器在收到页面之前不会在表单中包含数据，因此它无法在页面请求中提交该数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:45:31.003

您也可以使用 $_SESSION，因为它存储在服务器端。

# javascript - jQuery Waypoints 错误：粘性方法不存在

> ID：14282485
> 
> 赞同：5
> 
> 时间：2013-01-11T16:31:45.990
> 
> 标签：javascript, jquery, wordpress, jquery-waypoints

[我想使用jQuery Waypoints](http://imakewebthings.com/jquery-waypoints/)插件将一个元素粘贴到 WordPress 的页面顶部。

```
<script src="path/to/waypoints.min.js"></script>
<script>
  $('#myelement').waypoint('sticky');
</script> 
```

但是控制台说：

> 错误： jQuery Waypoints 中不存在粘性方法。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-11T16:51:42.853

您是否在您的 normal 顶部包含了**粘性快捷方式脚本**`waypoints.js`？

```
<script src="path/to/waypoints.min.js"></script>
<script src="path/to/waypoints-sticky.min.js"></script> 
```

查看[来源](https://github.com/imakewebthings/jquery-waypoints/tree/master/shortcuts/sticky-elements)和[文档](http://imakewebthings.com/jquery-waypoints/shortcuts/sticky-elements/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T08:11:11.130

用户可能会发生的另一件事是，js 将粘性 css 添加到元素但 css 为空。

添加：

```
.stuck{position: fixed; top: 0;} 
```

到您的 css 文件将粘贴它。

# c++ - C++ - 错误：“受保护”+ QT => 可能的解决方法之前的预期不合格ID

> ID：14282486
> 
> 赞同：-3
> 
> 时间：2013-01-11T16:31:46.937
> 
> 标签：c++, qt

事实上，我并不是真的来这里问一个问题，而是分享一个在几个小时内让我发疯的问题。

**在大多数情况下，错误“expected unqualified-id [...]”的经典解决方案是在类声明末尾缺少分号。这里情况不同。**

现在让我解释发生了什么。我需要一个类，一个由同事开发的一些对象，以及那些已经被软件的其他部分使用的资源。所以我知道它有效且可用。所以我修改了我的makefile和我的包含，重新编译和繁荣，我有：

**foob​​ar.hh:81：错误：“受保护”之前的预期不合格 ID**

我所包含的东西与我的同事几乎相同，具有相似的 makefile 和环境，所以我无法理解这个问题。但最后，我们发现了很大的不同：我使用的是 QT（因为我正在开发 GUI）并且**编译器指向的发生错误的方法都被命名为 'signals'**。

我没有完整的解释，但我们只是将方法名称更改为其他名称，并且它正在工作。对于 QT 用户，您知道信号是一个特定的 QT 词，用于信号/槽机制，但我仍然在这方面浪费了很多时间。**如果有人可以准确地解释我感兴趣的问题**，但我想与您分享这个快速解决方法（并且因为 stackoverflow 在过去帮助了我很多时间）。

问候， Ikwy

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:55:26.373

`signals`是 Qt 中的一种关键字。此名称不能用作 Qt 中的标识符。您不能使用此名称声明函数或变量。

*   您可以重命名您的标识符。
*   或者你可以让你的项目禁用 Qt 关键字，但是你应该确保这些关键字没有在你的项目中使用它们的 Qt 含义。（他们可能是）。要禁用关键字，您应该使您的项目（假设使用`qmake`）`CONFIG += no_keywords`启用选项）

# regex - 在 Perl 中使用正则表达式匹配字符

> ID：14282500
> 
> 赞同：1
> 
> 时间：2013-01-11T16:32:14.150
> 
> 标签：regex, perl

我正在尝试逐行阅读文档，并且只对某些字母字符感兴趣，而不是换行符。

我有以下内容：

```
@chars = split //;

for $char (@chars) {
  if (   ($pos % 16569 == 1719)
      || ($pos % 16569 == 8251)
      || ($pos % 16569 == 10238)) {
    print FILE_OUT "$char\n";
  }

  if ($char == m/[A-Z]/) {
    $pos++;
  }

} 
```

正则表达式`m/[A-Z]/`无法匹配，因为`$pos`从不增加。甚至可以匹配 Perl 中的单个字符，还是只允许对字符串进行此操作？如果是这样，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T16:35:18.270

您可能的意思是`=~`而不是`==`. `==`是相等的数值比较。`=~`在运算符的左侧调用常规模式匹配。

哦，你也应该总是`use strict`and `use warnings`，尤其是在例子中。

欢迎来到 StackOverflow。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T16:36:27.693

可能有更优雅的方法可以做到这一点，但您遇到的问题是您使用了错误的运算符。 `==`意思是“数字，等于”；在这种情况下，您要询问 $char 是否与您的正则表达式匹配`$_`（这不是您想要的！）

相反，您应该使用正则表达式匹配运算符：`=~`。

# string - 使用 xslt 字符串函数更改日期格式

> ID：14282502
> 
> 赞同：2
> 
> 时间：2013-01-11T16:32:15.070
> 
> 标签：string, date, xslt, substring

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:05:05.380

**这个完整而短暂的转变：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="@normal[string-length()=6]">
  <xsl:attribute name="normal">
   <xsl:value-of select="concat(substring(.,1,4),'-',substring(.,5))"/>
  </xsl:attribute>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档时（提供的片段包装在单个顶部元素中）：**

```
<t>
    <date normal="YYYMMDD"> Month, DD, YYYY</date>
    <date normal="YYYY/YYYY"> YYYY-YYYY</date>
    <date normal="YYYYMM"> Month, YYYY</date>
    <date normal="YYYYMM">MM-YYYY</date>
    <name normal="Smith, John"> John Smith </name>
</t> 
```

**产生想要的正确结果：**

```
<t>
   <date normal="YYYMMDD"> Month, DD, YYYY</date>
   <date normal="YYYY/YYYY"> YYYY-YYYY</date>
   <date normal="YYYY-MM"> Month, YYYY</date>
   <date normal="YYYY-MM">MM-YYYY</date>
   <name normal="Smith, John"> John Smith </name>
</t> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:45:11.903

像这样的东西？：

```
<xsl:choose>
  <xsl:when text="string-length(@normal) = 6 and number(@normal) = number(@normal)">
    <xsl:value-of select="concat(substring(@normal, 1, 4), '-', substring(@normal, 5, 2))" />
  </xsl:when>
  <xsl:otherwise>
    <xsl:value-of select="@normal" />
  </xsl:otherwise>
</xsl:choose> 
```

`number(@normal) = number(@normal)`检查确保这是`@normal`一个数字，因为看起来您在`normal`属性中也有一些非日期值。是否存在可能是 6 位非日期数字的风险？

# python - how to use boto to connect/upload a file?

> ID：14282504
> 
> 赞同：1
> 
> 时间：2013-01-11T16:32:15.103
> 
> 标签：python, amazon-s3, boto

I literally just signed up for an S3 account, installed boto and would now like to try uploading a file. I'm using this as a reference - [http://aws.amazon.com/articles/3998](http://aws.amazon.com/articles/3998)

I was surprised you needed to store your credentials as clear text in a file, but that's what I'm trying to do, though for a start I'm NOT putting in my password and expect to get an error.

So I did the following in python as instructed:

import boto

s3 = boto.connect_s3()

s3

S3Connection:s3.amazonaws.com

and the command succeeded, though I expected an error since my credentials are bad, but perhaps this is only a connection object and the real error should occur when I create the bucket. so then I tried this:

bucket = s3.create_bucket('1234567mjs7654321')

and command has been hanging for over 10 minutes.

I've got to believe there is something really basic I'm doing wrong but don't know what it might be.

here's the result of enabling debugging:

```
s3.create_bucket('1234567mjs7654321')
2013-01-11 17:58:17,765 foo [DEBUG]:path=/
2013-01-11 17:58:17,766 foo [DEBUG]:auth_path=/1234567mjs7654321/
2013-01-11 17:58:17,766 foo [DEBUG]:Method: PUT
2013-01-11 17:58:17,766 foo [DEBUG]:Path: /
2013-01-11 17:58:17,766 foo [DEBUG]:Data:
2013-01-11 17:58:17,766 foo [DEBUG]:Headers: {}
2013-01-11 17:58:17,766 foo [DEBUG]:Host: 1234567mjs7654321.s3.amazonaws.com
2013-01-11 17:58:17,766 foo [DEBUG]:establishing HTTPS connection:              host=1234567mjs7654321.s3.amazonaws.com, kwargs={}
2013-01-11 17:58:17,766 foo [DEBUG]:Token: None
2013-01-11 17:58:17,766 foo [DEBUG]:StringToSign:
PUT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:44:18.367

解决了！！！我的机器上存在访问问题，虽然我还不确定是什么，但它确实可以从不同的系统工作。我只是很失望它没有提前告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:37:09.160

我无法想象它为什么会挂起。我建议尝试将完整的调试日志记录到控制台，如下所示：

```
import boto
boto.set_stream_logger('foo')
s3 = boto.connect_s3(debug=2)
s3.create_bucket('1234567mjs7654321') 
```

您应该会看到大量信息被转储到控制台，也许这将包含有关正在发生的事情的线索。

# python - 线程工作显然没有任何参考代码

> ID：14282505
> 
> 赞同：1
> 
> 时间：2013-01-11T16:32:17.827
> 
> 标签：python, multithreading, panda3d

我的代码是：

类客户端（DirectObject，对象）：

```
'''
Clientclass. This class processes the keys which the user presses to the host and gets the data
from the host, which are to be set in a dummy version of the model
'''

seed= ""
id = None

def __init__(self, ip):
    '''
    This is the  constructor. It creates the ShowBase an starts both the process which processes the keys and the process 
    which takes in data from the host
    param: ip ip is a float which contains the ip adress of the host

    '''
    logging.getLogger(__name__).info("Clientobjekt erstellt")
    self.makw = mouseAndKeyWrapper.MouseAndKeyWrapper()
    time.sleep(5)      
    from modules.logic import game
    self.cprocess = threading.Thread(target = Client.workAsClient, args = (ip,self.makw))
    self.cprocess.start()
    time.sleep(5)
    while True:
        if Client.seed != "":
            break               
    game.seed = Client.seed
    game.initGame()
    game.initGameInstance()    
    game.start()    

    self.workShowBase()  
    game.myShowBase.run()

def workShowBase(self):

    '''
    workShowBase defines how to change values in keydict when keys are pressed and
    starts ShowBase process
    '''
    from modules.logic import game
    logging.getLogger(__name__).info("Showbase is working")
    game.myShowBase.accept("w", self.makw.setKeys, ["w",1])
    game.myShowBase.accept("a", self.makw.setKeys, ["a",1])
    game.myShowBase.accept("s", self.makw.setKeys, ["s",1])
    game.myShowBase.accept("d", self.makw.setKeys, ["d",1])
    game.myShowBase.accept("space", self.makw.setKeys, ["space",1])
    game.myShowBase.accept("w-up", self.makw.setKeys, ["w",0])
    game.myShowBase.accept("a-up", self.makw.setKeys, ["a",0])
    game.myShowBase.accept("s-up", self.makw.setKeys, ["s",0])
    game.myShowBase.accept("d-up", self.makw.setKeys, ["d",0])
    game.myShowBase.accept("space-up", self.makw.setKeys, ["space",0])
    #game.myShowBase.accept("mouse1",self.makw.setKeys,["mouse",1])
    #game.myShowBase.accept("mouse1-up",self.makw.setKeys,["mouse",0])

@staticmethod  
def workAsClient(ip, makw):
    '''
    This method contains the client thread, that is, the thread which sends data to the host and
    receives data from it - for this reason it has to be static
    param: ip ip is a float which contains the ip adress of the host
    '''
    logging.getLogger(__name__).info("Clientendlosschleife gestartet")
    from modules.logic import game
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM) 
    s.connect((ip, 50001)) 
    seedSend = s.recv(4096)
    Client.seed =loads(seedSend)
    ID = s.recv(4096)
    Client.id = loads(ID)      
    makw.id = id
    keyThread = threading.Thread(target =Client.sendData, args = (makw,s))
    print("threadmade")
    keyThread.start()
    print("started")

@staticmethod    
def sendData(makw, sock):
    print("method")     
    while True:
        print("loop")
        dictToSend = dumps(makw,2)
        print("dumped")
        sock.sendall(dictToSend)
        print("sent") 
```

这确实很好用。

但是，如果我在构造函数中省略“time.sleep(5)”，则永远不会创建调用 sendData 的线程，更不用说启动了。怎么可能？Showbase 在技术上不应该干涉，在另一个过程中！我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:01:58.990

您应该避免使用可能会消耗所有资源的完全活动等待，而让其他线程没有机会工作。

所以你最好试试：

```
while True:
        if Client.seed != "":
            break
        time.sleep(10) 
```

实际上，您的辅助线程已启动，但是如果您的主线程在其无限循环中消耗了所有处理，它将永远没有机会工作，那么永远不会提供主线程正在等待的种子 =>**死锁**

当您使用 sleep(5) 时，您有机会安排辅助线程并产生种子；然后当后者重新安排主线程时，它会找到种子，继续工作，一切都按预期进行。

但是您的解决方法非常脆弱，因为您无法保证在主线程睡眠期间会安排另一个线程。

它现在可以在您的开发环境中运行，但稍后可能会在另一个环境中的生产中中断。

# php - 将登录表单与数据库链接

> ID：14282514
> 
> 赞同：-3
> 
> 时间：2013-01-11T16:32:36.017
> 
> 标签：php, login

> **可能重复：**
> [PHP/MySQL 登录问题](https://stackoverflow.com/questions/14281696/php-mysql-login-issue)

尝试登录网站上的会员区时，它没有与数据库链接，因此输入零数据仍会将我带到会员区。

下面的 php 和 HTML 有什么问题。

```
 <?php
 session_start();
 include("dbconnect.php");
 $numrows=0;
 $sqlMember = mysql_real_escape_string($member);
$sqlPassword = mysql_real_escape_string($password);
$query="select First_name fname, Last_name lname, Email email, Membership_Number from members where (Membership_Number='$sqlMember' and Password='$sqlPassword')";

  $link = mysql_query($query);
 if (!$link) {
  die('login error');
 }
 $numrows=mysql_num_rows($link);
 if ($numrows>0){  // authentication is successfull
  while($row = mysql_fetch_array($query));
  $_SESSION['user']['first_name']=$row['first_name'];
  $_SESSION['user']['last_name']=$row['last_name'];
  $_SESSION['user']['Membership_Number ']=$row['Membership_Number '];
  echo $_SESSION['user']['fname'].' '.$_SESSION['user']['lname'];
  header("location:members_area.php");
 } else {
  header("location:../invalid.php");  // authentication was unsuccessfull
 }
?> 
```

HTML

```
<form id="jjjj" action="Send_log_details.php" class="register">
    <ul>
    <li>
    Membership Number:<br>
    <input type="text" id="Membership_Number" name="Membership_Number">
    </li>
        <li>
    Password:<br>
<input type="password"  id="Password" name="Password" value="Log in">
        </li>
    <li>

    <input type="submit" name="register" value="Login" onclick="logMeIn()">             
        </li>
        </ul>
        </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:34:21.197

```
$sqlMember = mysql_real_escape_string($member);
$sqlPassword = mysql_real_escape_string($password); 
```

应该

```
$sqlMember = mysql_real_escape_string($_POST["Membership_Number"]);
$sqlPassword = mysql_real_escape_string($_POST["Password"]); 
```

和

```
<form id="jjjj" action="Send_log_details.php" class="register"> 
```

应该

```
<form id="jjjj" action="Send_log_details.php" class="register" method="POST"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:39:28.470

你的 SQL 对我来说似乎是错误的，我希望我不是。

```
// Your code
$query="select First_name fname, Last_name lname, Email email, Membership_Number from members where (Membership_Number='$sqlMember' and Password='$sqlPassword')";

// My code
$query="select fname AS First_name, lname AS Last_name, email AS Email, Membership_Number from members where (Membership_Number='$sqlMember' and Password='$sqlPassword')"; 
```

此外，我只会接受登录成功，如果`mysql_num_rows($query) == 1`

# javascript - 提高 IE8 上 javascript 间隔的性能

> ID：14282520
> 
> 赞同：0
> 
> 时间：2013-01-11T16:32:50.510
> 
> 标签：javascript, internet-explorer-8

我正在使用遍历搜索结果列表的javascript循环（使用），通过添加围绕搜索命中`setInterval`的css来突出显示搜索词。`<span>`我`setInterval`这样做是为了释放对浏览器的控制。

在 Chrome 和 Firefox 中这很有效——即使 setInterval 参数为 10-20ms；并且用户可以完全控制浏览器（即滚动、点击链接等），同时快速突出显示结果：

```
mylooper = setInterval(function() {
    // my functionality is here
},15); // 15ms 
```

不幸的是，当使用可怕的 IE8 时，浏览器会被锁定并且需要*很*长时间才能添加`<span>`'s 和设置搜索结果的样式。首先加载页面也需要很长时间 - 删除此脚本后大大缩短了时间。

到目前为止，我已经尝试过：

*   更改间隔值（我读过 IE8 没有检测到低于 15 毫秒的间隔）；
*   使用`setTimeout`而不是 setInterval；
*   删除间隔以检查这实际上是导致减速的原因（它是！）；和
*   咒骂 Internet Explorer 很多；

    ```
    var highlightLoop;
    var index = 0;

    highlightLoop = setInterval(function () {

    var regex = RegExp(regexPhrase, "gi"); // regexPhase created elsewhere
    var searchResults = resultElements.eq(index).get(0); // run through resultElements which contain alll the nodes with search results in them.

      findAndReplaceDOMText( // a function that does the searching and inserting of styling
        regex,
        searchResults,
        function (fill, matchIndex) {
          called = true;
          var span = document.createElement("span");
          span.className = "result-highlight";
          span.innerHTML = fill;
          return span;
        }
      );
      if (index == resultElements.length || searchTermUpdated == true) { // stop interval loop when search term changes or we reach the end of results - variable set elsewhere.
        searchTermUpdated = false;
        clearInterval(highlightLoop); // stop the loop
      }
      index++
    }
    }, 50); // 50ms does not improve performance. 
    ```

任何关于 IE 中这种 javascripting 的变通方法的建议都将不胜感激。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:38:53.013

我相信你可以通过调整来提高性能`findAndReplaceDOMText`，也许它的回调也可以。我想`findAndReplaceDOMText`从所有匹配的循环中将回调返回的元素附加到 DOM。如果它在循环内执行此操作，请尝试将其移到循环外，并立即将所有更改应用到 DOM。这应该会带来更好的性能，因为在每次 DOM 更新后重新绘制页面是昂贵的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:42:52.780

试试这种递归方法：

*   获取要在数组 X 中操作的所有元素的列表（一次成本）
*   当数组 X 有长度时，继续重复下一个动作
    *   将第一个元素移出数组
    *   处理单个元素
    *   [在 a 上使用新数组 X（现在 X n] - 1 长度）再次开始此过程`setTimeout`

代码一般看起来像这样

```
function processArray(array) {
  var element = array.shift();
  processElement(element);
  if (array)
    setTimeout(function(){processArray(array);},15ms);
} 
```

这个递归可能还有其他事情要做，但它在所有浏览器中都工作得相当好并且从不阻塞，因为你只是在最后一个有时间完成时才开始重复。

# c++ - OSX 上 C/C++ 的 IntelliJ IDEA 12 设置

> ID：14282521
> 
> 赞同：9
> 
> 时间：2013-01-11T16:32:55.060
> 
> 标签：c++, macos, intellij-idea

我最近决定尝试 IntelliJ IDEA 12 CE。

我成功安装了他们的 C/C++ 插件并重新启动了 IDE。

现在，在我单击文件->新建项目->C/C++ 模块后，下一个窗口会提示我“选择 Cpp SDK”。

我被困在这个窗口，尝试输入许多路径并失败。我的系统是 OSX Mountain Lion，安装了命令行工具的 Xcode 4.5.2。使用 gcc 从命令行编译可以正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T07:33:46.883

我可以确认在 OSX 上使用 Idea 12.0.1 Ultimate (Build Id 123.94) 和 Xcode 4.5.1 可以正常工作。在“选择 Cpp SDK”的对话框中，我写了 /usr/bin/gcc（这是“哪个 gcc”在我的系统上返回的内容。我使用了 0.8 版构建 4。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T20:18:28.280

JetBrains 提供了一个不错的 C++/Obj-C IDE，用于在 OSX 上进行开发 - AppCode。不久前它更新到2.0版本。支持大多数 IDEA 功能和插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T19:53:56.407

从命令行运行 IDEA 时会显示此错误消息：

```
ERROR - com.intellij.ide.IdeEventQueue - Error during dispatching of java.awt.event.MouseEvent[MOUSE_RELEASED,(449,630),absolute(903,739),button=1,modifiers=Button1,clickCount=1] on dialog0 
```

可能是 IDEA 12 插件中的错误。

尝试使用 IDEA 11。

# javascript - 在 iframe 的加载事件之后？

> ID：14282526
> 
> 赞同：0
> 
> 时间：2013-01-11T16:33:09.480
> 
> 标签：javascript, jsp, iframe

我正在使用 iframe 作为我的一个表单的目标。提交表单后，我需要转换 iframe 的 html。我尝试使用 onload 事件，但是当事件被触发时，我的 iframe 还没有从我的表单生成的 html（就在调试器断点上）：

```
<html>
<head>
<title>Test</title>
</head>
<body>
    <script language="javascript">
        function loaded(){
            var lResponse = document.getElementById('results');
            debugger;
        }   
    </script>
    <div>
        <table>
            <tr>
                <td width="100%">
                    <form id="serverForm" target="results" <web:taskProcessorName attribute="action"  type="admin"/>>
                        <div>
                            <table>
                                <tr>
                                    <td>
                                        <div name="resultsDiv" id="resultsDiv" style="display: none">
                                            <iframe name="results" id="results" onload="loaded" frameborder="0"></iframe>                                           
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <!-- Hidden Inputs -->
                        <input type="hidden" name="server" value="..." /> 
                    </form>
                </td>
            </tr>
        </table>
    </div>
    <script language="javascript">
        document.getElementById('serverForm').submit();
        document.getElementById('resultsDiv').style.display='block';        
    </script>
</body>
</html> 
```

没有第 3 方库 - 纯 JavaScript。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-11T17:00:54.547

我改用以下内容，这似乎在已设置 iframe html 时捕获了该事件：

```
function lLoadFunc(){
    var lResponse = document.getElementById('results');
}

if(lResponse.addEventListener)
    lResponse.addEventListener('load', lLoadFunc, true); 
```

# javascript - phonegap iPhone 应用程序缓存旧数据

> ID：14282532
> 
> 赞同：2
> 
> 时间：2013-01-11T16:33:36.377
> 
> 标签：javascript, jquery, iphone, cordova

Phonegap 2.1 iOS 6 jQuery 1.7.2 JQMobile 1.1.1

如果我几天不使用该应用程序，我有一个 phonegap 应用程序似乎正在缓存来自 ajax 响应的旧数据。我必须重新安装应用程序才能清除它。我找到了应用程序本身的修复程序，但这需要重新发布。它连接到一个 .NET WCF REST 服务，有没有办法在那个端关闭缓存？我在 webconfig 中根本没有 outputCache，所以它可能默认打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T01:12:47.873

您还可以将随机数作为查询参数附加到您的 AJAX 请求 URL 以强制更新缓存，即`https://example.com/request.asp?timestamp=02347892378`.

# android - Google Maps v1：地图在模拟器上显示，但在测试设备上只有灰色瓷砖

> ID：14282537
> 
> 赞同：1
> 
> 时间：2013-01-11T16:33:54.333
> 
> 标签：android, google-maps

我审查了所有帖子和答案，但**问题很简单......**

使用通过 Eclipse 上传的 TEST 设备时，我应该使用 debug.Keystore 中的 API-Key，还是需要我的应用程序密钥库中的 API-Key？

我的应用程序在使用模拟器时运行良好，但在测试 HTC 设备上进行测试时出现灰色瓷砖。

# java - 处理 JSONObject 异常

> ID：14282538
> 
> 赞同：0
> 
> 时间：2013-01-11T16:33:56.220
> 
> 标签：java, exception

我正在使用`JSONObject`构建 JSON 响应。我面临的问题是如何处理`.put()`抛出的异常。我用 try catch 包围了我的代码，但我也想在我的 catch 中输出 JSON。如下所示，我一直在手动执行此操作，但这似乎容易出错。处理此异常的正确方法是什么？

```
try{
    myResponse.put("successful",true);
    resp.getOutputStream().print(myeResponse.toString());
} catch (JSONException e) {
    resp.getOutputStream().print("{\"successful\":false, \"error\":\"Changes could not be saved.  Please reload the page and try again.\"}");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T17:08:09.757

你需要弄清楚的是什么时候throw的`put()`方法。`JSONObject``JSONException`

来自[Javadoc](http://www.json.org/javadoc/org/json/JSONObject.html#put%28java.lang.String,%20boolean%29)

```
public JSONObject put(java.lang.String key,
                      boolean value)
               throws JSONException

Put a key/boolean pair in the JSONObject.

Parameters:
    key - A key string.
    value - A boolean which is the value. 
Returns:
    this. 
Throws:
    JSONException - If the key is null. 
```

因此，您需要注意的是您的密钥不为空，因为您的密钥是`"successful"`.

# php - php强制从动态链接下载pdf并存储到本地文件夹

> ID：14282541
> 
> 赞同：1
> 
> 时间：2013-01-11T16:34:00.653
> 
> 标签：php, pdf, download, mime-types

我正在构建一个脚本，将 imap 放入谷歌邮箱，获取一条消息，并从正文中提取一个链接。该链接通过 php 打开时，会启动从外部源下载 PDF 文件的过程。

这是我需要做的：

1.  以编程方式打开启动下载的链接
2.  下载 PDF，显然绕过任何对话框
3.  将 PDF 文件存储到 Web 服务器上的本地文件夹

我已经成功到可以启动下载过程并下载文件的地步了。但是，每次打开 PDF 的尝试都会发现文件已损坏，我不知道为什么。这就是我现在正在尝试的。以下内容基于类似的主题。

```
 $filename =  http://cckk.ca/KE645R26/geico.com_SEO_Domain_Dashboard_20121101_00.pdf

    header('Content-Description: File Transfer');
    header('Content-Type: application/pdf');
    header('Content-Disposition: attachment; filename="' . basename($filename) . '"');
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Pragma: public');
    header('Content-Length: ' . filesize($filename));
    ob_clean();
    flush();
    readfile($filename);
    exit; 
```

我在想我传递的文件名可能有问题？

**注意：**此脚本将设置为每隔几秒在服务器上运行的 CRON 任务，以便不断从我们自己的邮箱中获取，因此这不会有任何类型的用户交互或对一个安全风险用户。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T16:37:07.397

尝试：

```
$filename = 'http://cckk.ca/KE645R26/geico.com_SEO_Domain_Dashboard_20121101_00.pdf';

file_put_contents(
    '/your/server/path/folder/' . basename($filename), // where to save file
    file_get_contents($filename)
);

exit; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T16:40:10.750

您不能在远程文件上使用 filesize()。最有可能的是，该调用的错误出现在文件的开头，从而损坏了它。

# mysql - 带有 Arquillian 的 JPA/PersistenceContext：实体未存储在 MySQL 数据库中

> ID：14282543
> 
> 赞同：1
> 
> 时间：2013-01-11T16:34:06.083
> 
> 标签：mysql, jpa, glassfish-3, jta, jboss-arquillian

抱怨没有收到异常似乎很奇怪，但我们开始吧：

待测类：

```
/**
 * Implementation of {@link IGlossaryDataAccessObject} using JPA.
 */
@ApplicationScoped
public class JpaGlossaryDataAccessObject implements IGlossaryDataAccessObject {
    @PersistenceContext
    private EntityManager entityManager;

    /*
     * (non-Javadoc)
     * 
     * @see
     * ch.diction.webportal.glossary.model.IGlossaryDataAccessObject#createGlossary
     * (java.lang.String)
     */
    @Override
    @TransactionAttribute
    public void createGlossary(String glossaryName) {
        final GlossaryColumn column = new GlossaryColumn(DEFAULT_GLOSSARY_COLUMN_NAME);
        final GlossaryEntry entry = new GlossaryEntry(DEFAULT_ENTRY_VALUE, column);
        final GlossaryRow row = new GlossaryRow(entry);
        final Glossary glossary = new Glossary(glossaryName, row);
        entityManager.persist(glossary);
    }
// ...
} 
```

单元测试：

```
@RunWith(Arquillian.class)
public class JpaGlossaryDataAccessObjectTest {
    @Deployment
    public static Archive<?> createDeployment() {
        final MavenDependencyResolver resolver = DependencyResolvers.use(MavenDependencyResolver.class)
                .loadMetadataFromPom("pom.xml");
        return ShrinkWrap
                .create(WebArchive.class, "test.war")
                .addPackage(Glossary.class.getPackage())
                .addPackage(IdentityObject.class.getPackage())
                .addPackage(IGlossaryDataAccessObject.class.getPackage())
                .addPackage(EntityManagerProducer.class.getPackage())
                .addAsLibraries(resolver.artifact("org.jboss.seam.persistence:seam-persistence").resolveAsFiles())
                .addAsWebInfResource("ch/diction/webportal/resources/glossary/model/beans.txt", "beans.xml")
                .addAsResource("ch/diction/webportal/resources/persistence/persistence.txt", "META-INF/persistence.xml");
    }

    @Inject
    private IGlossaryDataAccessObject dao;
    @PersistenceContext
    private EntityManager em;

    @Test
    public void testCreateGlossary() {
        final String glossaryName = "empty";
        dao.createGlossary(glossaryName);
        final List<Glossary> result = em.createQuery("SELECT g FROM Glossary g", Glossary.class).getResultList();
        Assert.assertEquals(1, result.size());
    }
} 
```

这个单元测试在我的本地 GlassFish 3.1.2.2 服务器上使用 Arquillian 运行，完成时没有任何错误或异常。然而，当我使用调试器并在“dao.createGlossary(...)”之后停止执行时，我可以使用 MySQL Workbench 验证实际上没有数据写入表。

我想知道 Arquillian 框架是否做得比我知道的要多，它可能提供某种数据库测试容器，在每次测试后自动回滚我的事务。是这种情况还是什么可能阻止数据实际写入MySQL？

感谢您的任何提示和最好的问候帕斯卡

PS：为了完整起见，这是我的其他测试配置文件：

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">
    <persistence-unit name="web-portal-test" transaction-type="JTA">
        <jta-data-source>jdbc/web-portal-test</jta-data-source>
        <properties>
            <property name="eclipselink.logging.level" value="INFO" />
        </properties>
    </persistence-unit>
</persistence> 
```

豆类.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:s="urn:java:ee"
    xmlns:security="urn:java:org.jboss.seam.security" xmlns:permission="urn:java:org.jboss.seam.security.permission"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://jboss.org/schema/cdi/beans_1_0.xsd">
    <alternatives />
    <decorators />
    <interceptors>
        <class>org.jboss.seam.transaction.TransactionInterceptor</class>
    </interceptors>
</beans> 
```

arquillian.xml：

```
<?xml version="1.0"?>
<arquillian xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://jboss.org/schema/arquillian"
    xsi:schemaLocation="http://jboss.org/schema/arquillian
    http://jboss.org/schema/arquillian/arquillian_1_0.xsd">
    <defaultProtocol type="Servlet 3.0" />
    <container qualifier="remote-glassfish" default="true">
        <configuration>
            <property name="adminUser">admin</property>
            <property name="adminPassword">******</property>
            <property name="adminPort">4848</property>
            <property name="adminHttps">false</property>
            <property name="remoteServerHttpPort">9005</property>
            <property name="target">server</property>
        </configuration>
    </container>
</arquillian> 
```

更新：我已经能够验证实体确实存储在实时环境中的数据库中。所以似乎 Arquillian 确实在单元测试环境中回滚了我的事务——这很奇怪，因为在他们的网站指南中，他们使用手动 SQL 命令来清理数据库： [http ://arquillian.org/guides/testing_java_persistence/](http://arquillian.org/guides/testing_java_persistence/)

# android - 需要root在运行时通过应用程序执行shell命令“input keyevent <#>”吗？

> ID：14282553
> 
> 赞同：4
> 
> 时间：2013-01-11T16:34:56.810
> 
> 标签：android, linux, shell

我正在尝试执行 adb shell 命令`input keyevent 5`以在运行时通过我的应用程序接听电话。

如果我这样做：

```
Runtime.getRuntime().exec("input keyevent 5"); 
```

它似乎没有执行（什么都没有发生）。但是当我这样做时：

```
Runtime.getRuntime().exec(new String[] {"su", "-c", "input keyevent 5"}); 
```

屏幕上的回答按钮上的预期模拟点击发生。哪个好。

然而一个问题是，在某些使用超级用户 root 的设备上，该命令需要一段时间才能获得超级用户权限。它适用于具有 Chainfire 的 SuperSU su 二进制文件的设备。

我的问题是：是否可以在运行时通过 Java 代码在没有 root 的情况下执行此命令？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:40:42.373

绝对没有！

那将是一个绝对重大的安全问题，因此您必须扎根。

# joomla - Joomla:: 创建的 JText 不出现

> ID：14282556
> 
> 赞同：2
> 
> 时间：2013-01-11T16:35:01.010
> 
> 标签：joomla

我正在做一个 Joomla 项目，我是 Joomla 的新手。尝试以标准方式完成任务。因此，为了显示“版权”和“保留所有权利”，我在“en-GB.tpl_beez5.ini”文件中创建了两个 JText。beez5 是我正在使用的模板。在“en-GB.tpl_beez5.ini”文件中，我创建的是：

```
TPL_BEEZ5_COPYRIGTHS="Copyrights ©"
TPL_BEEZ5_ALL_RIGHTS_RESERVED="All Rights Reserved" 
```

在我的 index.php 文件中，我使用以下代码调用这两个 JText：

```
<?php echo JText::_('TPL_BEEZ5_COPYRIGTHS');?> <company name> <?php echo JText::_('TPL_BEEZ5_ALL_RIGHTS_RESERVED');?> 
```

但问题是我在浏览器中得到的是

```
TPL_BEEZ5_COPYRIGTHS <company name> TPL_BEEZ5_ALL_RIGHTS_RESERVED 
```

我真的不知道这可能是什么原因。我尝试了谷歌，但找不到任何东西可以解决我的问题。

我能做些什么来解决我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T11:04:15.840

**问题解决了。**

它不起作用，因为`en-GB.tpl_beez5.ini`我编辑的配置文件在里面`templates/beez5/language/en-GB`，但我发现我必须修改的实际文件在里面`language/en-GB`

感谢您检查**它**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:50:31.767

我刚刚在我的服务器上将您的代码添加到 Beez 5 以进行测试，一切正常：

我进行了一些调整，例如将 © 更改为 © 以使其可以被每个浏览器读取

**语言字符串：**

```
TPL_BEEZ5_COPYRIGHT="Copyright &copy;"
TPL_BEEZ5_ALL_RIGHTS_RESERVED="All Rights Reserved" 
```

**索引.php**

```
<?php echo JText::_('TPL_BEEZ5_COPYRIGHT'); ?> Company Name <?php echo JText::_('TPL_BEEZ5_ALL_RIGHTS_RESERVED'); ?> 
```

# python - Python 无法构建查询字符串

> ID：14282557
> 
> 赞同：0
> 
> 时间：2013-01-11T16:35:07.197
> 
> 标签：python, mysql

我在使用以下代码时遇到问题：

```
start_date = dt.datetime(2012,01,01,00,00,00)
end_date = dt.datetime(2014,01,01,00,00,00)

sql="SELECT c.id extension, er.id, flow, filename, filesize, unread, er.cr_date, callerid, \
length, callid, info, party FROM extension_recording er, extension e, client c \
WHERE er.extension_id = e.id AND e.client_id = c.id AND c.parent_client_id = %s \
AND er.cr_date => %s AND er.cr_date <= %s" % (client_id) (start_date) (end_date)

cur.execute(sql)
recordings = cur.fetchall()

if recordings.rowcount == 0: sys.exit("No recordings for selected date range - exiting")

for recording in recordings:
    do stuff to recording 
```

构建查询字符串会导致以下错误：

```
TypeError: 'str' object is not callable 
```

我确定我遗漏了一些非常明显的东西，但我看不到树木的树木。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:35:58.743

将长线的末尾更改为：

```
... er.cr_date <= %s" % (client_id, start_date, end_date) 
```

此外，当您使用它时，三引号对于长行更方便：

```
sql = """
    SELECT c.id extension, ...
    ... er.cr_date <= %s""" % (... 
```

# sql - 组和其他条件下的 ID 最小值和最大值

> ID：14282558
> 
> 赞同：5
> 
> 时间：2013-01-11T16:35:08.397
> 
> 标签：sql, max, min

我在 MS SQL Server 中有一个类似于下面的表。

```
 id | Timestamp | active
    -----+-----------+--------
      1  |    1:00   |    1
      1  |    2:00   |    1
      1  |    3:00   |    1
      1  |    4:00   |    0
      1  |    5:00   |    0
      1  |    6:00   |    1
      1  |    7:00   |    0
      1  |    8:00   |    0
      1  |    9:00   |    0
      1  |   10:00   |    1
      1  |   11:00   |    1
      1  |   12:00   |    0
      1  |   13:00   |    1
      2  |    2:00   |    1
      2  |    3:00   |    1
      2  |    4:00   |    0
      2  |    5:00   |    0
      3  |    8:00   |    0
      3  |    9:00   |    0
      4  |    1:00   |    1
      4  |    2:00   |    1
      5  |   16:00   |    0 
```

我想要做什么找出每个 ID 何时处于非活动状态（活动 = 0）多长时间。我试图做的是在 active = 0 时按 id 对它进行分组，并在最小和最大时间上做一个 datediff。但这会给我一个 id 1 的结果，表示它在 12:00 时离线 8 小时（12:00 - 4:00）。当我真正想要的是一个查询，它将给我以下结果集。

```
 id | approx. offline in hours |  at time
    ---+--------------------------+-----------
     1 |            1             |    5:00
     1 |            2             |    9:00
     1 |            0             |   12:00
     2 |            1             |    5:00
     3 |            0             |    9:00
     5 |            0             |   16:00 
```

我最初尝试的错误查询是

```
SELECT id as [Inactive],
       DATEDIFF(hour, MIN(Timestamp), MAX(Timestamp)) as [approx. offline in hours],
       MAX(Timestamp) as [at time]
FROM table
WHERE active = 0
GROUP BY [Inactive] 
```

但是该查询的问题在于它跳过了两者之间的活动时间。我一直在查看使用 PARTITION 提出和回答的[这个](https://stackoverflow.com/questions/1529225/sql-server-query-to-group-sequential-date-data)问题，但看起来这个问题已经足够不同了，而且答案对于我无法理解的问题来说太具体了。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:50:25.303

一种适用于任何数据库的方法是使用相关子查询。这个想法是为每个连续的活动值字符串分配一个组名。特定的组名是下一次值更改的时间。

```
select id, active, min(TimeStamp), max(TimeStamp)
from (select t.*,
             (select min(timeStamp) from t t2 where t2.id = t.id and t2.timeStamp > t.timeStamp and t2.active <> t.active
             ) groupName
      from t
     ) t
group by id, groupName, active 
```

需要注意的是，如何将时间戳转换为持续时间取决于数据库。由于您没有指定数据库，因此我将让您添加该逻辑。

此外，如果给定 id 的最后一条记录处于非活动状态，则 groupname 为 NULL。那不是问题。

# java - Java 的 JITter 如何影响测量代码速度？

> ID：14282561
> 
> 赞同：1
> 
> 时间：2013-01-11T16:35:23.240
> 
> 标签：java, c++, profiling

我对 Java 比较陌生，我很好奇 Java 在普通任务上的表现如何与 C++ 相比。因此，我比较了 2 种 C++ 字符串格式化方法（sprintf 和 ostringstream）与使用 Java 的 StringBuilder。对于每个可执行文件，我传递的第一个参数是要测量的迭代次数，所以所有代码看起来大致像

```
 int numIterations = args[0]; // or argv[1] in C++

 // measure begin here, ie: 
 int begin = System.nanoTime();
 // loop to measure
 for (int i = 0; i < numIterations; ++i)
 {
      // formatting code
 }
 // measure end here, ie
 int end = System.nanoTime(); 
```

这与我看到其他人分析 Java 代码的方式一致。我注意到对于少量的迭代（比如 1000 次），Java 的表现很差。对于较大数量的迭代，（比如 1,000,000）Java 表现相对较好：

1000 次迭代

```
$ ./spf.out 1000
C++  took: 1412618 ns
$ ./oss.out 1000
C++  took: 1816222 ns
$ java StringBuilderTest 1000
Java took: 25787951 ns 
```

1000000 次迭代

```
$ ./spf.out 1000000
C++  took: 1658699148 ns
$ ./oss.out 1000000
C++  took: 2053606449 ns
$java StringBuilderTest 1000000
Java took:  595965442 ns 
```

我怀疑使用开始/结束计时器来分析 java 代码的方法，因为我不确定 JITer 的工作原理。这是衡量 Java 代码的有效方法吗？当使用 JIT'er 运行代码时，Java 是否有更多的“热身”工作？分析 Java 代码的规范方法是什么。有没有办法在测量性能之前预热 JITer？或者只是理解对于小 N JITing 将成为测量的性能数字的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:59:55.817

> 这是衡量 Java 代码的有效方法吗？

对于显示的代码，是的。Java 在消除不做任何事情的代码方面比 C++ 聪明得多。在 Java 明显更快的 10 个基准测试中，有 9 个是这种情况。

> 当使用 JIT'er 运行代码时，Java 是否有更多的“热身”工作？

是的，热身经历了几个阶段。确保您运行测试 2-10 秒，它应该已经足够温暖。您可能会忽略前 10K - 20K 次运行。

> 分析 Java 代码的规范方法是什么。有没有办法在测量性能之前预热 JITer？

有很多方法。这是最简单的一种。

```
 long begin = 0;
 // loop to measure
 for (int i = -11000; i < numIterations; ++i)
    if (i == 0) begin = System.nanoTime(); 
```

> 或者只是理解对于小 N JITing 将成为测量的性能数字的一部分？

这取决于您希望进行测试的现实程度。如果在生产中代码不会被调用 10,000 次并且它没有完全预热，那就是你应该测量的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:39:16.493

1000 次迭代以预热 VM；可能有点低，我使用 100 000，但在开始测量之前要预热。对于基准测试的输出，如果您添加“每次调用时间”，而不仅仅是总时间，那么它是更好的 readbale。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:52:09.170

这篇[博客文章](http://stuq.nl/weblog/2009-01-28/why-many-java-performance-tests-are-wrong)对验证我在热点 VM 中看到的内容大有帮助。

总而言之，是的，HotSpot VM 会在一段时间内预热。很多像我这样的新手发布了很多错误的性能测试，因为他们正在测量 VM 预热时间。

引用文章：

> 不要在热身期间从性能统计中得出结论！
> 
> *   执行你的测试，测量吞吐量直到它稳定。您在热身期间获得的统计数据应该被丢弃。
> *   确保您知道测试场景的预热时间有多长。我们使用 10-15 分钟的预热时间，这足以满足我们的需要。但是你自己测试一下！JVM 检测热点并编译运行代码需要时间。

# html - IE 中止 1 个文件的 html5 视频加载

> ID：14282563
> 
> 赞同：0
> 
> 时间：2013-01-11T16:35:26.320
> 
> 标签：html, internet-explorer, internet-explorer-9, html5-video

我正在尝试创建一个前端网页来托管我公司常见问题的教程/疑难解答视频。我正在使用 html5 并试图让页面在最新版本的 IE FF 和 Chrome 中工作。该网页在所有三个中都有效，只是 IE 的行为有点奇怪。我有多个 IE 的 mp4 视频，但每次似乎只有一个中止。我想知道如何解决这个问题。

这是我的代码示例。我很确定这一切都是正确的。

```
 <div id="video0" class="videos">
        <a  href="How_to_Compress_a_Folder.mp4">Alternate Link</a><br/>
        <video  controls id="player0" class="players">
            <source src="How_to_Compress_a_Folder.mp4" type="video/mp4">
            <source src="How_to_Compress_a_Folder.ogv" type="video/ogg">
        </video>
        </div>

        <div id="video1" class="videos" >
        <a href="How_to_Map_a_Network_Drive_on_Windows_7.mp4"> Alternate Link</a><br/>
        <video id="player1" controls class="players">
            <source src="How_to_Map_a_Network_Drive_on_Windows_7.mp4" type="video/mp4">
        </video>
        </div> 
```

如何映射网络驱动器可以正常加载和播放，但如何压缩文件夹没有任何建议。我试图将 .ogv 文件转换为 mp4 以查看是否也可以正常工作，但它没有。同样，只是这个文件给我带来了问题。我想避免重新录制视频，因为无法保证此问题不会再次发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:28:08.263

解决方案实际上很简单。代码没有问题，但文件本身没有问题。似乎创建视频的人将其中一些录制为 mp4，其他录制为 avi，然后转换为 mp4。他最初使用 Miro Converter 将它们转换为 mp4，这就是它不起作用的原因。然后他尝试了一个不同的转换器（不确定是哪个），结果很好。

# tinymce - tinymce - 如何禁用智能粘贴

> ID：14282565
> 
> 赞同：4
> 
> 时间：2013-01-11T16:35:32.797
> 
> 标签：tinymce

当我在 tinymce 编辑器中粘贴某些内容并将其保存到 db 时，它会自动保存与该副本相关的所有样式。我只想保留 html 标签而不是 css 样式。如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T08:31:50.400

您可以使用 tinymce 初始化配置参数 paste_remove_styles

```
paste_remove_styles: true, 
```

还有更多关于粘贴的设置——你可以在[这里](http://www.tinymce.com/wiki.php/Plugin%3apaste)找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T09:31:49.100

只需添加这一行

> paste_remove_styles：真

# html - html5 地理定位 gps 传感器在 watchPosition() 时禁用

> ID：14282567
> 
> 赞同：0
> 
> 时间：2013-01-11T16:35:45.633
> 
> 标签：html, geolocation, gps

我正在 Andoid 2.3.3 上测试一个地理定位脚本，但是当 watchPosition() 处于活动状态时，gps 传感器会禁用。

我喜欢传感器保持活动状态，因此它会在一秒钟内更新。

这是 android 2.3 问题还是脚本中的错误？

```
<!DOCTYPE html>
<html>
  <head>
    <style>
      #tripmeter {
        border: 3px double black;
        padding: 10px;
        margin: 10px 0;
      }

      p {
        color: #222;
        font: 14px Arial;
      }

      span {
        color: #00C;
      }
    </style>
  </head>
  <body>
    <div id="tripmeter">
      <p>
        Starting Location (lat, lon):<br/>
        <span id="startLat">???</span>&deg;, <span id="startLon">???</span>&deg;
      </p>
      <p>
        Current Location (lat, lon):<br/>
        <span id="currentLat">???</span>&deg;, <span id="currentLon">???</span>&deg;
      </p>
      <p>
        Distance from starting location:<br/>
        <span id="distance">0</span> km
      </p>
    </div>
    <script>
      window.onload = function() {
        var startPos;

        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            startPos = position;
            document.getElementById("startLat").innerHTML = startPos.coords.latitude;
            document.getElementById("startLon").innerHTML = startPos.coords.longitude;
          }, function(error) {
            alert("Error occurred. Error code: " + error.code);
            // error.code can be:
            //   0: unknown error
            //   1: permission denied
            //   2: position unavailable (error response from locaton provider)
            //   3: timed out
          }, {enableHighAccuracy: true});

          navigator.geolocation.watchPosition(function(position) {
            document.getElementById("currentLat").innerHTML = position.coords.latitude;
            document.getElementById("currentLon").innerHTML = position.coords.longitude;
            document.getElementById("distance").innerHTML =
              calculateDistance(startPos.coords.latitude, startPos.coords.longitude,
                                position.coords.latitude, position.coords.longitude);
          }, {enableHighAccuracy: true});
        }
      };

      // Reused code - copyright Moveable Type Scripts - retrieved May 4, 2010.
      // http://www.movable-type.co.uk/scripts/latlong.html
      // Under Creative Commons License http://creativecommons.org/licenses/by/3.0/
      function calculateDistance(lat1, lon1, lat2, lon2) {
        var R = 6371; // km
        var dLat = (lat2-lat1).toRad();
        var dLon = (lon2-lon1).toRad();
        var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(lat1.toRad()) * Math.cos(lat2.toRad()) *
                Math.sin(dLon/2) * Math.sin(dLon/2);
        var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
        var d = R * c;
        return d;
      }
      Number.prototype.toRad = function() {
        return this * Math.PI / 180;
      }
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:08:01.460

通过在应用程序的 WebView 中实现 html 脚本来解决。使用清单中的 gps 权限，传感器保持活动状态。

# java - Spring Security - 在重定向到登录时保留 URL 参数

> ID：14282569
> 
> 赞同：23
> 
> 时间：2013-01-11T16:35:52.980
> 
> 标签：java, spring, spring-mvc, spring-security

好的。

假设我有一个安全的 url 模式

```
/secure/link-profile 
```

可选地，可以附加 url 参数。

```
/secure/link-profile?firstName=Bob&secondName=Smith&membershipNumber=1234 
```

我怎样才能将这些 url 参数转移到登录页面？

```
/login?firstName=Bob&secondName=Smith&membershipNumber=1234 
```

基本前提是我们提供与第三方的奖励集成，第三方会将他们的用户发送给我们。他们将被带到一个页面，以将他们的第 3 方帐户/个人资料与他们/我们的网站用户链接起来。但是，如果他们没有我们现有的帐户，那么在登录页面上，他们将转到注册页面，然后我们想预先填充他们的一些详细信息，这些详细信息是第 3 方传递给我们的。

提前致谢

春天安全 2.0.7.RELEASE 春天框架 3.1.1.RELEASE

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T18:49:37.503

见中的方法`buildRedirectUrlToLoginPage(HttpServletRequest request, ...)`。`LoginUrlAuthenticationEntryPoint`

如果我正确理解了您想要实现的目标，我认为在子类中重写此方法，复制原始方法，但 `urlBuilder.setQuery(request.getQueryString())`在构建 url 时另外调用就足够了。

然后你只需要配置`ExceptionTranslationFilter`这个自定义的入口点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T19:50:25.250

根据@zagyi的回复，我只是在我现有的扩展中覆盖了一个方法`AuthenticationProcessingFilterEntryPoint`

覆盖的方法`protected String determineUrlToUseForThisRequest(HttpServletRequest request, HttpServletResponse response, AuthenticationException exception)`是由`buildRedirectUrlToLoginPage(..`

```
@Override
protected String determineUrlToUseForThisRequest(HttpServletRequest request, HttpServletResponse response,
        AuthenticationException exception) {
    String url = super.determineUrlToUseForThisRequest(request, response, exception);
    return url + "?" + request.getQueryString();
} 
```

显然，这可以改进为也使用各种构建器，以满足 url 上现有的查询字符串，但此时我知道我的登录 url 始终是`/login/`，所以这对我的目的来说很好

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-19T04:20:36.353

另[一篇文章](https://stackoverflow.com/questions/8405831/how-to-extend-loginurlauthenticationentrypoint-or-how-to-implement-authenticatio)解释了覆盖如何不起作用。我需要覆盖[开始](http://docs.spring.io/spring-security/site/docs/3.2.5.RELEASE/apidocs/org/springframework/security/web/authentication/LoginUrlAuthenticationEntryPoint.html#commence(javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse,%20org.springframework.security.core.AuthenticationException)。这可能是在更高版本的 Spring Security 中引入的新事物。

```
public class SecurityConfig extends WebSecurityConfigurerAdapter {
    protected void configure(final HttpSecurity httpSecurity) throws Exception {
    httpSecurity.
    formLogin().loginPage("/signIn").permitAll().
        and().
            authorizeRequests().
            antMatchers(managementContextPath + "/**").permitAll().
            anyRequest().authenticated().withObjectPostProcessor(objectPostProcessor).
        and().
            csrf().disable().
            contentTypeOptions().
            xssProtection().
            cacheControl().
            httpStrictTransportSecurity().
        and().
            requestCache().requestCache(new RedisRequestCache(savedRequestRedisTemplate())).
        and().
            sessionManagement().sessionAuthenticationStrategy(sessionAuthenticationStrategy).
        and().
            exceptionHandling().authenticationEntryPoint(new AuthenticationProcessingFilterEntryPoint("/signIn"));
    }
} 
```

```
公共类 AuthenticationProcessingFilterEntryPoint 扩展 LoginUrlAuthenticationEntryPoint {
    公共 AuthenticationProcessingFilterEntryPoint(String loginFormUrl) {
        超级（登录表单网址）；
    }

    @覆盖
    公共无效开始（HttpServletRequest 请求，HttpServletResponse 响应，AuthenticationException authException）抛出 IOException，ServletException {
        RedirectStrategy redirectStrategy = new DefaultRedirectStrategy();
        redirectStrategy.sendRedirect(request, response, getLoginFormUrl() + "?" + request.getQueryString());
    }
}

```

Rizier123，再次感谢您的指点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-17T05:52:04.690

嗨[卡巴尔](https://stackoverflow.com/users/818316/kabal)-

我有非常相似的要求，我关注了你和[zagyi](https://stackoverflow.com/users/1276804/zagyi)和[lion 的](https://stackoverflow.com/users/1037210/lion)帖子，但我似乎仍然失去了 /login 页面上的原始请求参数。

这是我所拥有的：

```
public class AuthenticationProcessingFilterEntryPoint extends LoginUrlAuthenticationEntryPoint {
    @Override
    protected String determineUrlToUseForThisRequest(HttpServletRequest request, HttpServletResponse response, AuthenticationException exception) {
        String url = super.determineUrlToUseForThisRequest(request, response, exception);
        return url + "?" + request.getQueryString();
    }
}

protected void configure(final HttpSecurity httpSecurity) throws Exception {
    httpSecurity.
    formLogin().loginPage("/signIn").permitAll().
        and().
            authorizeRequests().
            antMatchers(managementContextPath + "/**").permitAll().
            anyRequest().authenticated().withObjectPostProcessor(objectPostProcessor).
        and().
            csrf().disable().
            contentTypeOptions().
            xssProtection().
            cacheControl().
            httpStrictTransportSecurity().
        and().
            requestCache().requestCache(new RedisRequestCache(savedRequestRedisTemplate())).
        and().
            sessionManagement().sessionAuthenticationStrategy(sessionAuthenticationStrategy).
        and().
            addFilter(new ExceptionTranslationFilter(new AuthenticationProcessingFilterEntryPoint()));
} 
```

我可以看到 AuthenticationProcessingFilterEntryPoint 已部署，但它没有在那里遇到断点。

根据[文档](http://docs.spring.io/spring-security/site/docs/3.2.5.RELEASE/reference/htmlsingle/#exception-translation-filter)，这似乎只有在出现 AuthenticationException 或 AccessDeniedException 时才会生效。在上面的配置中，我不确定当这种情况发生时弹簧内部是否会抛出这种异常。

此外，无论身份验证成功与否，我都想保留登录页面上的查询参数。

我确实添加了成功和失败处理程序，但没有一个会起作用。

```
protected void configure(final HttpSecurity httpSecurity) throws Exception {
    httpSecurity.
    formLogin().
        successHandler(new PropogateQueryStringAuthenticationSuccessHandlerImpl()).
        failureHandler(new SimpleUrlAuthenticationFailureHandlerImpl(new QueryStringPropagateRedirectStrategy())).
    and().
        authorizeRequests().
        antMatchers(managementContextPath + "/**").permitAll().
        anyRequest().authenticated().withObjectPostProcessor(objectPostProcessor).
    and().
        csrf().disable().
        contentTypeOptions().
        xssProtection().
        cacheControl().
        httpStrictTransportSecurity().
    and().
        requestCache().requestCache(new RedisRequestCache(savedRequestRedisTemplate())).
     and().
        sessionManagement().sessionAuthenticationStrategy(sessionAuthenticationStrategy);
} 
```

我在 spring boot 1.1.6.RELEASE 上使用 spring-security 3.2.4.RELEASE（它又使用 Spring framework 4.0.7.RELEASE）

谢谢，桑

# drupal - 如何在 Drupal 7 中显示渲染字段

> ID：14282571
> 
> 赞同：1
> 
> 时间：2013-01-11T16:36:02.203
> 
> 标签：drupal, drupal-7

我有一个非常具体的问题，我希望有人能来救我！我在 Drupal 7 中使用地址字段让我的用户输入希望我的产品邮寄给的人的地址。使用 Views Export Data，我将他们在表单中输入的数据转换为 .csv 文件，这使我能够自动化发送邮件的过程。

我的问题是地址字段将地址中的每条数据分别保存在数据库中。当在节点上显示地址时，地址正确显示，带有换行符。在 Views 中，如果我创建数据列表，它仍然可以正确显示，但由于某种原因，Views Data Export 无法正确呈现地址。取而代之的是，它在一行中取出数据并将其串起来而不会中断。

我想做的是将呈现的地址字段保存在数据库中，以便我可以调用格式正确的地址。有一个令牌 [field_address] 可以正确显示地址以用于除 Views Data Export 之外的所有目的。有没有办法将令牌插入自定义字段，以便将完整地址保存在数据库中？

任何帮助将不胜感激，谢谢！-JB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:04:50.020

地址字段令牌模块可能会对您有所帮助。[http://drupal.org/project/addressfield_tokens](http://drupal.org/project/addressfield_tokens)

# c# - 为什么我动态创建的自定义类型数组返回空值实例？

> ID：14282573
> 
> 赞同：0
> 
> 时间：2013-01-11T16:36:15.410
> 
> 标签：c#, arrays, createinstance

所以我创建了这个简单的代码来动态创建一个数组——在索引 0 和 1 处期望两个“空/未初始化”对象。但是我在变量 r 中得到了一个对象数组，它们都是空的？

我错过了一些如此基本的东西......我不明白。提前致谢。

```
public class myclass
{
    int a;
    string b;
    float c;
}

class Program
{
    static void Main(string[] args)
    {
        Type t = Type.GetType("ConsoleApplication1.myclass");
        var r = Array.CreateInstance(t.GetElementType(), 2);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:37:55.540

这就是数组的工作方式。`default(TheTypeOfTheArray)`对于所有引用类型（这是一个引用类型），它们最初填充的是`null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:37:44.130

创建一个数组并不意味着初始化它的对象。例如，如果`ConsoleApplication1.myclass`没有无参数构造函数，您如何期望 CLR 隐式创建它的实例？

以这堂课为例。

```
class Foo
{
    public Foo(int value)
    {
        Value = value;
    }

    public int Value { get; set; }
} 
```

使用以下代码：

```
var array = new Foo[10]; 
```

你会得到一个`Foo[]`里面有十个`null`元素的。原因在上面已经解释过了。

# unix - 按列的部分值排序 - Unix

> ID：14282574
> 
> 赞同：0
> 
> 时间：2013-01-11T16:36:18.207
> 
> 标签：unix, sorting, partial

我有以下格式的一些字段

```
apple   banana   blue   xyz=4;pqr=5;mno=3
lemon   banana   red    xyz=2;pqr=6;mno=7
horse   tiger    green  xyz=3;pqr=2;mno=1 
```

我想按第四列的“pqr”值对它们进行排序，这样我的输出是：

```
horse   tiger    green  xyz=3;pqr=2;mno=1
apple   banana   blue   xyz=4;pqr=5;mno=3
lemon   banana   red    xyz=2;pqr=6;mno=7 
```

我尝试了以下方法：

猫文件.txt | sort -key=4.2 ，但这不起作用，因为它需要第二个字符进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:00:01.400

您可以尝试在制表符分隔的字段中拆分半列分隔的字段

```
cat file1 | sed 's/;/;\t/g'

apple   banana   blue   xyz=4;  pqr=5;  mno=3
lemon   banana   red    xyz=2;  pqr=6;  mno=7
horse   tiger    green  xyz=3;  pqr=2;  mno=1 
```

...对您的输出进行排序，然后合并您的字段

```
cat file1 | sed 's/;/;\t/g' | sort --key=5 | sed 's/;\t/;/g'

horse   tiger    green  xyz=3;pqr=2;mno=1
apple   banana   blue   xyz=4;pqr=5;mno=3
lemon   banana   red    xyz=2;pqr=6;mno=7 
```

不是最好的解决方案，但效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T17:04:21.067

这可能会奏效。它忽略空白和非打印字符，用于`;`划分字段，并在第二个字段上排序。

```
sort -bi -t\; -k2 file.txt 
```

# java - 如何计算多列（colspan）HTML 表格的宽度？

> ID：14282575
> 
> 赞同：4
> 
> 时间：2013-01-11T16:36:17.520
> 
> 标签：java, html, latex, html-table

我正在尝试`longtabu`在我正在编写的 Java 程序中将 HTML 表解析为 LaTeX 代码（使用它支持自定义列宽设置）。我的代码运行非常稳定，直到刚才输出看起来还不错。我必须支持表的`colspan`-feature（我现在正在跳过 rowspan），这就是问题所在。导致问题的表如下所示：

```
<table>
<tr>
    <td width="385" colspan="3">
        Content
    </td>
    <td width="359" colspan="3">
        Content
    </td>
    <td width="151">
        Content
    </td>
</tr>
<tr>
    <td width="24">
        Content
    </td>
    <td width="361" colspan="2">
        Content
    </td>
    <td width="359" colspan="3">
        Content
    </td>
    <td width="151">
        Content
    </td>
</tr>
<tr>
    <td width="24">
        Content
    </td>
    <td width="276">
        Content
    </td>
    <td width="85">
        Content
    </td>
    <td width="198" colspan="2">
        Content
    </td>
    <td width="161">
        Content
    </td>
    <td width="151">
        Content
    </td>
</tr> 
```

我发现了这个问题，没有一个表格行定义了所有的列宽。

据我了解，我需要一个线性方程组来解决单列宽度的计算……我是对的还是我错过了什么？

在 Java 中求解这样一个方程系统的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:58:53.203

假设源表没有过度约束、约束不足或不一致约束，我建议：

*   定义一个事实表，列出确定的每列的已知宽度
*   为指定起始列、列跨度和总宽度的每个 colspan 条目定义一个约束对象集合。
*   通过收集事实和约束的整个表定义。
*   然后遍历事实表，对于未定义的每一列，遍历所有约束，看看是否存在对定义了所有其他列的一组列的约束。这样的约束将为当前考虑的列生成一个值。
*   每次发现新的列值时，您都从事实表的开头重新开始，扫描未知列，并且每次扫描整个约束集。

这是一个 n 平方（或更差）算法，但只要表没有一万行或一万列就应该没问题。如果表格被正确约束，您将到达定义所有列宽的点。像这样的蛮力算法的优点是它相对容易调试并且应该是稳定的。

如果表格约束不足，您将达到通过的点，并且仍然存在未计算的列宽。如果要处理此问题，则添加另一遍，这一次采用涉及未计算表列的任意约束，该列还必须包含一个或多个其他未计算表列，并在所有未计算列中平均分配剩余空间约束。由于这是一个任意约束，您可能会在不同的运行中得到不同的答案......但表受到约束......这有关系吗？

完成后，您将拥有一个包含所有列宽的完整事实表，然后您可以生成指定所有表列的 LaTeX 代码。

# python - 在 try-except 块中定义的未定义变量

> ID：14282577
> 
> 赞同：0
> 
> 时间：2013-01-11T16:36:21.077
> 
> 标签：python, python-2.7

我正在使用以下代码从网页[http://ajaxian.com](http://ajaxian.com)抓取 XFN 内容， 但出现未定义变量错误：

我的代码如下：

```
'''
Created on Jan 11, 2013

@author: Somnath
'''
# Scraping XFN content from a web page
# -*-coding: utf-8 -*-

import sys
import urllib2
import HTMLParser
from BeautifulSoup import BeautifulSoup

# Try http://ajaxian.com
URL = sys.argv[0]

XFN_TAGS = set([
            'colleague',
            'sweetheart',
            'parent',
            'co-resident',
            'co-worker',
            'muse',
            'neighbor',
            'sibling',
            'kin',
            'child',
            'date',
            'spouse',
            'me',
            'acquaintance',
            'met',
            'crush',
            'contact',
            'friend',
            ])

try:
    page = urllib2.urlopen(URL)
except urllib2.URLError:
    print 'Failed to fetch ' + item

try:
    soup = BeautifulSoup(page)
except HTMLParser.HTMLParseError:
    print 'Failed to parse ' + item

anchorTags = soup.findAll('a')

for a in anchorTags:
    if a.has_key('rel'):
        if len(set(a['rel'].split()) & XFN_TAGS) > 0:
            tags = a['rel'].split()
            print a.contents[0], a['href'], tags 
```

我的代码中有两个 try 块，它给出了一个错误 undefined variable : item. 如果我想重新包含 try-except 块，我应该在 try 块之外给出变量、项目的空白定义吗？

PS：请注意，这是一本书的标准代码。而且我希望他们不会犯如此微不足道的错误。我这里有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:38:06.803

```
print 'Failed to fetch ' + item 
```

item 没有在任何地方**定义。**我猜你想在那里打印 URL。

根据[python教程](http://docs.python.org/3/tutorial/introduction.html)

> 变量必须先“定义”（赋值）才能使用，否则会出错：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T16:37:51.300

假设您要打印加载失败的 URL，请尝试将其更改为`print 'Failed to fetch ' + URL`. 你实际上`item`并没有在任何地方定义，所以 Python 不知道你的意思：

```
try:
    page = urllib2.urlopen(URL)
except urllib2.URLError:
    print 'Failed to fetch ' + URL 
```

在您的第二个块中，也更改`item`为`URL`（假设您要显示的错误显示的是 URL 而不是内容）。

```
try:
    soup = BeautifulSoup(page)
except HTMLParser.HTMLParseError:
    print 'Failed to parse ' + URL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:51:08.393

您没有定义变量“项目”。这就是导致错误的原因。您必须在使用变量之前定义它。

# git - 当我从另一台机器推送时如何更新本地 git？

> ID：14282578
> 
> 赞同：0
> 
> 时间：2013-01-11T16:36:20.843
> 
> 标签：git, bitbucket

我在学校机器上设置了一个 git repo，然后在另一台家用机器上克隆了相同的 repo。我已经提交并推送了家用机器，现在我想将更改更新到学校机器。我应该怎么办？我试过`git remote update`了，但是当我检查文件时它没有更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:48:08.033

你做错了:)

如果您使用的存储库不是学校机器上的裸存储库，则需要

git reset --hard

推送到它之后，因为您只是更新 ref 不是工作副本

更好的是使用裸存储库并从 [服务器上的其他机器/存储库 Git拉/推到它](http://git-scm.com/book/ch4-2.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-22T20:07:13.887

只需在您的学校机器上执行此命令：

git pull 起源大师

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T20:20:20.597

既然你用 标记了这个问题`bitbucket`，我将做出以下假设。如果这些假设中的任何一个不正确，请在您的问题中澄清，我将更新此答案。

*   共有三 (3) 个存储库
    *   一上`bitbucket`
    *   `bitbucket`学校机器上存储库的克隆
    *   `bitbucket`您的家庭系统上的存储库的克隆。
*   在家庭克隆上，步骤类似于：

    *   `git add <changes>`
    *   `git commit -m '<message>'`
    *   `git push <remote> <branch>`
*   在学校克隆
    *   `git remote update`

获取所有远程中的`git remote update`更改，因此如果主存储库推送的更改位于同一个远程，则它们已加载到学校系统的存储库中。

这里的关键是存储库是`.git`文件夹，因此其中的 refs 已更新——但工作副本没有。为了更新工作副本，您需要将提取到本地存储库的更改与工作目录合并。这是通过`git merge <options>`.

* * *

如果我基于您的标签的假设不正确并且只有两个存储库；学校和家。然后您需要`git merge <options>`将更改带入您的工作副本，除非您也有本地更改；在这种情况下，请执行类似于以下的操作 if

```
git stash
git merge <options>
git stash pop 
```

此时解决从存储和提交中弹出的本地更改之间的任何冲突。

如果您不想将更改保留在本地副本中，您可以使用`git reset --hard`.

* * *

最后要注意的是，如果可以避免，请不要推入非裸存储库 - 通常可以。学校存储库从主存储库中提取（获取/合并）更改比主存储库推送到学校存储库要好得多。

# c# - 使用反射获取多级子类中的字段值

> ID：14282579
> 
> 赞同：0
> 
> 时间：2013-01-11T16:36:26.303
> 
> 标签：c#, reflection, mono, field

所以我有这个具有多个子类级别的对象，就像这样（不是实际的对象，而是传达它的结构的抽象）：

```
public class MasterType
{
    public TypeA typeA = new TypeA();
    public TypeB typeB = new TypeB();

    public class TypeA
    {
        public SubTypeA subTypeA = new SubTypeA();
        public SubTypeB subTypeB = new SubTypeB();

        public class SubTypeA
        {
            public int Field1 = 10;
        }

        public class SubTypeB
        {
            public int Field2 = 20;
        }
    }

    public class typeB
    {
        public int Field3 = 30;
    }
} 
```

我试图提取 TypeA 的字段及其子类（SubTypeA 和 SubTypeB），如下所示：

```
foreach (var t in MasterType.TypeA.GetType().GetFields(BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.FlattenHierarchy))
{
    foreach (var field in t.FieldType.GetFields(BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public))
    {
        Console.WriteLine(field.Name + " | " + field.GetValue(t.FieldType));
    }
} 
```

但我得到了这个例外：

```
ArgumentException: Field 'Field1' defined on type 'SubTypeA' is not a field on the target object which is of type 'MonoType'. 
```

打印 t 的 FieldType 会产生预期的结果“SubTypeA”等。
我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:51:53.913

> 难道我做错了什么？

是的 - 在这个表达式中：

```
field.GetValue( t.FieldType ) 
```

传递给的参数`GetValue`应该是定义字段的类型的实例。它应该是包含您要获取的特定字段值的对象。

`t.FieldType`是类型的一个实例`System.Type`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:51:45.507

在您`GetValue`需要类`SubTypeA`和的实例中`SubTypeB`，必须接收哪些字段，但您传递了一个`Type`实例。

试试这个方法：

```
 MasterType value = new MasterType();
        foreach (var t in typeof(MasterType.TypeA).GetFields(BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.FlattenHierarchy))
        {
            var fieldValue = t.GetValue(value.typeA);
            foreach (var field in t.FieldType.GetFields(BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public))
            {
                Console.WriteLine(field.Name + " | " + field.GetValue(fieldValue));
            }
        } 
```

首先你需要创建`MasterType`实例，然后你应该得到`subTypeA`和`subTypeB`的值`value.typeA`。这些值将作为`GetValue`嵌套 foreach 的参数传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:55:37.067

对我来说，以下代码有效：

```
foreach (var fieldInfo in typeof(MasterType.TypeA).GetFields())
{
 Console.WriteLine(fieldInfo);
} 
```

*GetType*是实例方法，而不是静态的。要获取 Type 对象，您需要使用*typeof*。

# python - Scrapy - 2 类 - 空白项目-字段

> ID：14282582
> 
> 赞同：0
> 
> 时间：2013-01-11T16:36:29.903
> 
> 标签：python, scrapy

我爬了一个网站的每个页面，但是现在出现了这个问题。

如果页面包含类“td-cell align-right gray”和“td-cell align-right gray row-border”，则在 item['price'] 中写入两者的 text()。
但是，如果一个页面只包含“td-cell align-right gray row-border”，那么在 item['price'] 中只写 text()。

编码：

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy.http.request import Request
from Test01.items import Test01Item
from scrapy.utils.url import urljoin_rfc
from scrapy.utils.response import get_base_url
import urlparse

    class ScrapyOrgSpider(BaseSpider):
        name = "oeticket"
        allowed_domains = ["oeticket.com"]
        start_urls = ["http://www.oeticket.com/de/suche/?search_string=amaretto"]

        def parse(self, response):
            hxs = HtmlXPathSelector(response)
            items = []

            next_page = hxs.select("//li[@class='next-page navigation']/a/@href").extract()
            abs_page = []
            for g in next_page:
                abs_page.append("http://oeticket.com" + g )

            if not not abs_page:
                for e in abs_page:
                    yield Request(e, self.parse)

            next_event = hxs.select("//li[@class='event-item vevent']/a/@href").extract()
            abs_event = []
            for it in next_event:
                abs_event.append("http://oeticket.com" + it) 

            if not not abs_event:
                for s in abs_event:
                    yield Request(s, self.parse)

            deeper = hxs.select("//li[@class='performance-item vevent']/a/@href").extract()
            abs_deeper = []
            for c in deeper:
               abs_deeper.append("http://oeticket.com" + c)

            if not not abs_deeper:
                for d in abs_deeper: 
                    yield Request(d, self.parse)

            posts = hxs.select("//ul[@class='grid_10 horizontal-list clearfix']")
            preis = hxs.select("//tbody/tr")

            for post in posts:
                item = Test01Item()

                item["when"] = post.select("li[@class='when']/p/abbr/text()").extract() + post.select("li[@class='when']/h2/text()").extract()
                items.append(item)

            for post in posts:
                item = Test01Item()
                item["what"] = post.select("li[@class='what']/h2/text()").extract()
                items.append(item)

            for post in posts:
                item = Test01Item()
                item["where"] = post.select("li[@class='where']/h2/text()").extract()
                items.append(item)

            for prei in preis:
                item = Test01Item()
                item['url'] = response.url
                item['price'] = prei.select("td[@class='ticket_price td-cell ucase black strong align-right']/text()").extract()
                item['price'] = prei.select("td[@class='ticket_price td-cell ucase black strong align-right row-border']/text()").extract()
                item["func"] = prei.select("td[@class='td-cell align-right gray']/text()").extract()
                item["func"] = prei.select("td[@class='td-cell align-right gray row-border']/text()").extract()

                items.append(item)

            for item in items:
                yield item 
```

结果：

```
{"when": ["Donnerstag,  7\. Feb 2013 ", "20:00"]},
{"what": ["Amaretto"]},
{"where": ["kleines theater"]},
{"url": "http://www.oeticket.com/de/tickets/amaretto-salzburg-kleines-theater-482435/performance.html", "price": [], "func": []},
{"url": "http://www.oeticket.com/de/tickets/amaretto-salzburg-kleines-theater-482435/performance.html", "price": ["  15,90 EUR  "], "func": ["  Erm\u00e4\u00dfigung lt. Info - ACHTUNG: Ausweiskontrolle!  "]}, 
```

预期结果：

```
{"when": ["Donnerstag,  7\. Feb 2013 ", "20:00"]},
{"what": ["Amaretto"]},
{"where": ["kleines theater"]},
{"url": "http://www.oeticket.com/de/tickets/amaretto-salzburg-kleines-theater-482435/performance.html", "price": ["  22,50 EUR  "], "func": ["  Normalpreis  "},
{"url": "http://www.oeticket.com/de/tickets/amaretto-salzburg-kleines-theater-482435/performance.html", "price": ["  15,90 EUR  "], "func": ["  Erm\u00e4\u00dfigung lt. Info - ACHTUNG: Ausweiskontrolle!  "]}, 
```

如何使用空白项目字段解决此问题？谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:45:55.050

您必须检查列表项，如果列表的长度为 0

```
item['price'] = prei.select("td[@class='ticket_price td-cell ucase black strong align-right']/text()").extract()
if len(item['price']) == 0:
   item['price'] = prei.select("td[@class='ticket_price td-cell ucase black strong align-right row-border']/text()").extract() 
```

# jboss7.x - 使用 Jboss 7 和 Http 组件

> ID：14282583
> 
> 赞同：0
> 
> 时间：2013-01-11T16:36:41.400
> 
> 标签：jboss7.x, apache-httpcomponents

我正在尝试使用 httpcomponents 和 jboss 7。httpcomponent 的版本是 4.2.2。这是代码：

```
@Startup
@Singleton
public class Gnip {

@Schedule(minute="*", hour="*", persistent=false)
public void doGnip() {

    System.out.println("HTTP sending.");

    HttpClient httpclient = new DefaultHttpClient();
    HttpGet httpget = new HttpGet("http://localhost:8080/AtmosphereTest/push?msg=100000");
    try {
        httpclient.execute(httpget);
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

每分钟执行一次 GET 的计时器。很简单。它编译和部署很好，但是，当计时器启动时，我得到了这个：

```
 17:17:00,057 ERROR [org.jboss.as.ejb3] (EJB default - 6) JBAS014122: Error during retrying timeout for timer: [id=08c08446-8d01-4617-902c-2becb6b26dfe timedObjectId=AtmosphereEJB.AtmosphereEJB.Gnip auto-timer?:true persistent?:true timerService=org.jboss.as.ejb3.timerservice.TimerServiceImpl@5bec70c1 initialExpiration=Fri Jan 11 0
0:00:00 CET 2013 intervalDuration(in milli sec)=0 nextExpiration=Fri Jan 11 17:18:00 CET 2013 timerState=RETRY_TIMEOUT: javax.ejb.EJBException: org.apache.http.conn.s
sl.SSLInitializationException: Failure initializing default SSL context
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.handleExceptionInOurTx(CMTTxInterceptor.java:166) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.ejb3.tx.TimerCMTTxInterceptor.handleExceptionInOurTx(TimerCMTTxInterceptor.java:52) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:230) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:304) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:190) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41) [jboss-as-ejb3-
7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:43) [jboss-as-ejb3-7.1.1.Final.jar:7.
1.1.Final]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ejb3.timerservice.TimedObjectInvokerImpl.callTimeout(TimedObjectInvokerImpl.java:101) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.ejb3.timerservice.task.CalendarTimerTask.callTimeout(CalendarTimerTask.java:60) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.ejb3.timerservice.task.TimerTask.run(TimerTask.java:132) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441) [rt.jar:1.6.0_26]
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) [rt.jar:1.6.0_26]
        at java.util.concurrent.FutureTask.run(FutureTask.java:138) [rt.jar:1.6.0_26]
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_26]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_26]
        at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_26]
        at org.jboss.threads.JBossThread.run(JBossThread.java:122) [jboss-threads-2.0.0.GA.jar:2.0.0.GA]
Caused by: org.apache.http.conn.ssl.SSLInitializationException: Failure initializing default SSL context
        at org.apache.http.conn.ssl.SSLSocketFactory.createDefaultSSLContext(SSLSocketFactory.java:360)
        at org.apache.http.conn.ssl.SSLSocketFactory.getSocketFactory(SSLSocketFactory.java:175)
        at org.apache.http.impl.conn.SchemeRegistryFactory.createDefault(SchemeRegistryFactory.java:49)
        at org.apache.http.impl.client.AbstractHttpClient.createClientConnectionManager(AbstractHttpClient.java:306)
        at org.apache.http.impl.client.AbstractHttpClient.getConnectionManager(AbstractHttpClient.java:466)
        at org.apache.http.impl.client.AbstractHttpClient.createHttpContext(AbstractHttpClient.java:286)
        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:851)
        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805)
        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:784)
        at edu.pezzati.atm.ejb.Gnip.doGnip(Gnip.java:26)
        at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source) [:1.6.0_26]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_26]
        at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_26]
        at org.jboss.as.ee.component.ManagedReferenceMethodInterceptorFactory$ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptorFac
tory.java:72) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:34) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]

        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:374) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ejb3.concurrency.ContainerManagedConcurrencyInterceptor.processInvocation(ContainerManagedConcurrencyInterceptor.java:104) [jboss-as-ejb3-7.1.
1.Final.jar:7.1.1.Final]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:53) [jboss-as-ee-7.1.1.Final.ja
r:7.1.1.Final]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ejb3.component.singleton.SingletonComponentInstanceAssociationInterceptor.processInvocation(SingletonComponentInstanceAssociationInterceptor.j
ava:53) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:228) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
        ... 22 more
Caused by: java.lang.NullPointerException
        at org.apache.http.conn.ssl.SSLSocketFactory.createSSLContext(SSLSocketFactory.java:225)
        at org.apache.http.conn.ssl.SSLSocketFactory.createDefaultSSLContext(SSLSocketFactory.java:358)
        ... 50 more 
```

我错过了我的 JBoss 的一些配置吗？寻找解决方案。TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:16:44.483

当然，我错误地配置了我的 AS。JBoss 7.1.1 带有一个关于 Httpcomponents 的模块（版本 4.1.2）。我所要做的就是添加这个：

`<global-modules>
<module name="org.apache.httpcomponents" slot="main"/>
</global-modules>`

到我的standalone.xml。希望有人觉得这很有帮助。

# android - 从 git 导入 Facebook Android SDK 3.0 失败

> ID：14282587
> 
> 赞同：1
> 
> 时间：2013-01-11T16:36:53.983
> 
> 标签：android, facebook, eclipse

尝试为 android 3.0 sdk 导入 facebook，抛出以下错误：

```
01-11 15:37:15.394: E/AndroidRuntime(408): FATAL EXCEPTION: main
01-11 15:37:15.394: E/AndroidRuntime(408): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.facebook.samples.hellofacebook/com.facebook.samples.hellofacebook.HelloFacebookSampleActivity}: java.lang.ClassNotFoundException: com.facebook.samples.hellofacebook.HelloFacebookSampleActivity in loader dalvik.system.PathClassLoader[/data/app/com.facebook.samples.hellofacebook-1.apk]
01-11 15:37:15.394: E/AndroidRuntime(408):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
01-11 15:37:15.394: E/AndroidRuntime(408):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-11 15:37:15.394: E/AndroidRuntime(408):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-11 15:37:15.394: E/AndroidRuntime(408):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-11 15:37:15.394: E/AndroidRuntime(408):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-11 15:37:15.394: E/AndroidRuntime(408):  at android.os.Looper.loop(Looper.java:130)
01-11 15:37:15.394: E/AndroidRuntime(408):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-11 15:37:15.394: E/AndroidRuntime(408):  at java.lang.reflect.Method.invokeNative(Native Method)
01-11 15:37:15.394: E/AndroidRuntime(408):  at java.lang.reflect.Method.invoke(Method.java:507)
01-11 15:37:15.394: E/AndroidRuntime(408):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-11 15:37:15.394: E/AndroidRuntime(408):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-11 15:37:15.394: E/AndroidRuntime(408):  at dalvik.system.NativeStart.main(Native Method)
01-11 15:37:15.394: E/AndroidRuntime(408): Caused by: java.lang.ClassNotFoundException: com.facebook.samples.hellofacebook.HelloFacebookSampleActivity in loader dalvik.system.PathClassLoader[/data/app/com.facebook.samples.hellofacebook-1.apk]
01-11 15:37:15.394: E/AndroidRuntime(408):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
01-11 15:37:15.394: E/AndroidRuntime(408):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
01-11 15:37:15.394: E/AndroidRuntime(408):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
01-11 15:37:15.394: E/AndroidRuntime(408):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
01-11 15:37:15.394: E/AndroidRuntime(408):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
01-11 15:37:15.394: E/AndroidRuntime(408):  ... 11 more 
```

由于项目设置，通过 git 导入失败

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:36:53.983

为了克服错误，右键单击每个示例项目->android 工具->添加支持库，并在同一菜单下修复项目属性。

此外，不要忘记将 android-support-v4 添加到 facebook 的 lib 到项目的构建路径设置中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T08:46:39.047

您也可以转到项目属性 -> Java buildpath -> order and export 并勾选 android-support-v4.jar

# visual-studio-lightswitch - IIS 7.5 中的 Lightswitch 部署问题

> ID：14282590
> 
> 赞同：1
> 
> 时间：2013-01-11T16:37:01.407
> 
> 标签：visual-studio-lightswitch

我正在尝试在 IIS 7.5 中部署我的第一个灯开关应用程序。我使用的是MSSQL server 2008。我使用的是visual studio 2012。本地机器没有问题。当我尝试发布应用程序时，出现以下错误：

错误 1 ​​为应用程序部署数据库时发生异常。执行 SQL 文件“InstallProfile.sql”期间发生错误。SQL 错误号为 6951，SqlException 消息为：访问被拒绝。

我给了 lightswitchadmin 'dbcreator' & db_owner 角色。但是，我不能让它工作。

部署因错误消息中止后，我看到在网站中创建了一个文件夹。当我在浏览器中键入地址时：我收到以下消息。'与数据库通信时发生错误'。

如果我进行刷新，则会出现一个 2 文本框，用于输入用户名和密码。当我输入应用程序管理员用户名和密码时，它显示：“与数据库通信时发生错误”。

任何帮助表示赞赏。谢谢 Musfiqur

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:44:06.323

听起来您用于连接数据库的连接字符串中的用户没有正确的 SQL 权限来创建所需的数据库对象。

# html - 如果包含在（显示：无）中，我可以填写一个字段吗？

> ID：14282596
> 
> 赞同：0
> 
> 时间：2013-01-11T16:37:20.733
> 
> 标签：html, ruby, selenium, capybara

有没有办法填写一个看起来像这样的字段......

```
<span id="you_cannot_see_me" style="display: none;">              
    <input id="hidey" name="hidey" type="text" value="">          
</span> 
```

我努力了...

```
accessthis = find('#hidey').should_not be_visible
fill_in( accessthis , :with => 'desired text') 
```

...并收到以下错误

```
Unable to find field false (Capybara::ElementNotFound) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:53:28.090

使用 Selenium，您不能与不可见的 web 元素进行交互。Selenium 用于模拟实际的用户交互，因此您无法手动完成的任何事情都无法使用 Selenium 完成。

# mysql - SQL 查询中的错误

> ID：14282602
> 
> 赞同：-3
> 
> 时间：2013-01-11T16:37:31.183
> 
> 标签：mysql, sql, database

我需要有人帮我找出我的 sql 查询中的错误：

```
CREATE PROCEDURE confirm(IN bookingID INT, OUT status VARCHAR(40))
BEGIN
DECLARE numberOfPass INT;
DECLARE contactStatus VARCHAR(30);
SET numberOfPass = (SELECT count(*) FROM passenger WHERE passenger.Booking = bookingID);
SET contactStatus = (SELECT contact FROM booking WHERE booking.Id = bookingID);
IF numberOfPass <> (SELECT numberOfSeats FROM booking WHERE booking.Id  = bookingID)) THEN SET status = "Passenger information missing";
ELSE IF ISNULL(contactStatus) THEN SET status ="Contact missing for booking";
ELSE SET status = "OK";
END IF;
END; 
```

我收到以下错误消息：

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 ') THEN SET status = "Passenger information missing" 附近使用正确的语法；ELSE IF ISNULL(contactStatu' 在第 7 行

可能是什么错误？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:39:48.923

你有一个额外的括号

```
IF numberOfPass <> (SELECT numberOfSeats FROM booking WHERE booking.Id  = bookingID)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T16:40:09.493

*   利用`ELSEIF`
*   去掉多余的括号

完整的查询，

```
DELIMITER $$
CREATE PROCEDURE confirm(IN bookingID INT, OUT status VARCHAR(40))
BEGIN
    DECLARE numberOfPass INT;
    DECLARE contactStatus VARCHAR(30);
    SET numberOfPass = (SELECT count(*) FROM passenger WHERE passenger.Booking = bookingID);
    SET contactStatus = (SELECT contact FROM booking WHERE booking.Id = bookingID);
    IF numberOfPass <> (SELECT numberOfSeats FROM booking WHERE booking.Id  = bookingID) THEN 
        SET status = "Passenger information missing";
    ELSEIF ISNULL(contactStatus) THEN 
        SET status ="Contact missing for booking";
    ELSE 
        SET status = "OK";
    END IF;
END $$
DELIMITER ; 
```

*   [请参阅 IF 语法^(MySQL 文档)](http://dev.mysql.com/doc/refman/5.0/en/if.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T16:43:13.530

额外的）在你的代码中......

```
 !!!
 IF numberOfPass <> (SELECT numberOfSeats FROM booking WHERE booking.Id  = bookingID)) 
```

# javascript - Javascript OO 参考这个

> ID：14282605
> 
> 赞同：3
> 
> 时间：2013-01-11T16:37:40.697
> 
> 标签：javascript, oop

简短描述：我正在使用带有函数声明、新关键字和原型方法的 OO Javascript（示例如下）。我需要一种方法来引用对象的每个方法中的“自我”对象。“this”似乎只有在我直接调用该方法时才有效，否则“this”似乎指的是任何调用该方法的东西。

更多细节：这是我的对象的简化版本。

```
function Peer(id) {
    this.id = id;
    this.pc = new RTCPeerConnection(SERVER);

    this.pc.onevent1 = this.onEvent1;
    this.pc.onevent2 = this.onEvent2;
}

Peer.prototype.doSomething = function() {
    // create offer takes one param, a callback function
    this.pc.createOffer(this.myCallback);
};

Peer.prototype.onEvent1 = function(evt) {
    // here this refers to the RTCPeerConnection object, so this doesn't work
    this.initSomething(evt.data);    
};

Peer.prototype.myCallback = function(data) {
    // here this refers to the window object, so this doesn't work
    this.setSomething = data;
};

Peer.prototype.initSomething = function(data) {
    // use data
}; 
```

这是一个使用它的示例。

```
var peer = new Peer(1);
peer.doSomething();
// eventually something triggers event1 
```

我尽量简化代码，并在注释中解释问题。我为第一个场景（调用 this.myCallback）创建了一个解决方法，方法是创建 this 的本地副本并使回调参数成为匿名函数，该函数使用我的本地副本调用我需要的函数。但是第二种情况更麻烦（事件触发）。

我很好奇是否有一个不同的面向对象编程模型，其中每个方法总是对父对象有一个正确的引用，而不管方法是如何被调用的？或者如果有不同的方法来创建一个对象作为自定义对象的属性并将其事件绑定到自定义对象的方法？对不起，如果这是令人困惑的语言！请注意，我的问题与 RTCPeerConnection 无关，这恰好是我目前正在从事的项目。

我找到了这篇文章：[http](http://www.alistapart.com/articles/getoutbindingsituations) ://www.alistapart.com/articles/getoutbindingsituations但我不完全确定如何使用这些信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T16:39:42.217

> 我很好奇是否有一个不同的面向对象编程模型，其中每个方法总是对父对象有一个正确的引用，而不管方法是如何被调用的？

是的，有：它被称为[`Function.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind).

```
function Peer(id) {
    this.id = id;
    this.pc = new RTCPeerConnection(SERVER);

    this.pc.onevent1 = this.onEvent1.bind(this);
    this.pc.onevent2 = this.onEvent2.bind(this);
} 
```

同样， for`myCallback`总是`this`引用`Peer`实例：

```
Peer.prototype.doSomething = function() {
    // create offer takes one param, a callback function
    this.pc.createOffer(this.myCallback.bind(this));
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:56:55.237

方法只是一个定义为原型属性的函数。它本身没有任何特定的对象上下文，这是有原因的，因为可能存在无限数量的给定类型的对象，因此该方法在给定特定对象的上下文时起作用。

在 javascript（以及其他 OO 语言）中，该对象上下文由调用者提供。这样做的经典方法是在特定对象上调用方法：

```
obj.method(); 
```

但是，您也可以`this`使用`.apply()`or`.call()`或将指针设置为其他值`.bind()`。您可以在 MDN 上阅读所有这些内容。 `.bind()`某些较旧的浏览器不支持，因此您需要使用 shim 或使用其他解决方案（我使用下面提到的解决方案）。

因此，调用者必须负责确保`this`正确设置 ptr。这就是javascript的工作原理。

尝试将方法调用作为回调传递时，另一种设计模式解决方法如下：

```
var self = this;
callMeWhenDone(function() {
    self.myMethod();
}); 
```

在这里，您将`this`ptr 保存在局部变量中并使用它从匿名回调中调用方法，因为回调中的`this`指针将设置为其他值。

注意：在内部，`.bind()`只是在做与此解决方法类似的事情。

# java - 强制 InetAddress.getHostAddress() 返回 IPv4 地址

> ID：14282608
> 
> 赞同：5
> 
> 时间：2013-01-11T16:37:48.537
> 
> 标签：java, ipv6, ipv4

我正在使用一个`java.net.InetAddress.getLocalHost().getHostAddress()`用于获取本地 IP 地址的库。但是，这总是在我的计算机上返回一个 IPv6 地址（Gentoo Linux，JDK 1.6.0_37）。该地址进一步用于不支持 IPv6 地址并因此失败的上下文中。

有没有办法强制`getHostAddress()`返回一个 IPv4 地址（例如通过参数给 JVM）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T16:57:04.573

您可以将其设置为在可用时使用 IPv4。当然，IPv6 地址比 IPv4 地址多很多，因此它当然不能保证总是获得 IPv4 地址。

```
java.net.preferIPv4Stack = true 
```

要么设置：

```
System.setProperty("java.net.preferIPv4Stack" , "true"); 
```

或作为命令行参数：

```
-Djava.net.preferIPv4Stack=true 
```

不过，首选 IPv4 地址通常是默认行为。

如果您需要确保永远不会获得 IPv6 地址，我认为您需要检查它`java.net.InetAddress.getLocalHost().getHostAddress()`是否不返回 an `Inet6Address`，并在它返回时处理它（我想是个例外）。

或者，当然，更好的方法：修复你的代码以支持 IPv6。

# php - 为什么在开发 PHP 脚本时使用 /r/n？

> ID：14282609
> 
> 赞同：0
> 
> 时间：2013-01-11T16:37:47.777
> 
> 标签：php, coding-style

在互联网上到处寻找答案，但运气不佳，所以我在这里。我一直在剖析从 CodeCanyon.net 网站购买的脚本来学习 OOP，我注意到很多行以 /r/n 结尾。为什么这是常见的做法，实际用途是什么？提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T16:39:39.097

取自[这里](https://stackoverflow.com/questions/2115549/php-difference-between-r-n-and-n)

\r\n 是 Windows 系统的行尾字符。

\n 是 UNIX 系统的行尾字符。

这是为了确保跨操作系统的兼容性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:41:28.980

这取决于您的操作系统。对于基于 Unix 的系统 \n 工作正常，但 Windows 需要 \r\n
\r 是 a`carriage return`和
\na`linefeed` 以防你想查找这些

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:44:37.780

正如其他人所说`\r\n`，适用于 Windows，`\n`适用于 unix。

要创建跨操作系统代码，请使用[`PHP_EOL`](http://us3.php.net/manual/en/reserved.constants.php)它是一个常量，它将成为当前操作系统的行尾字符。

# javascript - jQuery - 在可拖动时切换网格

> ID：14282610
> 
> 赞同：0
> 
> 时间：2013-01-11T16:37:48.740
> 
> 标签：javascript, jquery, draggable

假设我有一个网格并使用它创建它，如下所示：

```
$( "#dragIt" ).draggable({ grid: [ 15, 15 ] }); 
```

然后，我在`div`. 无论如何，当我切换复选框时，网格会打开和关闭吗？我找不到关于如何关闭/打开它的[官方 jquery ui 网站。](http://jqueryui.com/draggable/#snap-to)谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:01:48.567

试试这个：http: [//jsbin.com/ewamuq/1/edit](http://jsbin.com/ewamuq/1/edit)

```
$(function () {
  $("#draggable4").draggable({
    grid: [15, 15]
  });

  $('input[type="checkbox"]').change(function () {
    if ($(':checked').length > 0) {
      $("#draggable4").draggable({
        grid: false
      });
    } else {
      $("#draggable4").draggable({
        grid: [15, 15]
      });
    }
  });
}); 
```

# cakephp-2.0 - 带有过滤、列排除和 AJAX 分页的 CakePHP 网格视图

> ID：14282611
> 
> 赞同：1
> 
> 时间：2013-01-11T16:37:48.593
> 
> 标签：cakephp-2.0

我正在使用 CakePHP 构建网格或电子表格视图。视图以标准的 CakePHP 方式通过 AJAX 使用分页。

我需要添加一些标准的电子表格功能：

*   隐藏或显示列
*   使用用户提供的标准和操作数应用过滤器
*   保存过滤器

查看当前正在生成的视图的 XHR，我想我需要扩展 Paginator Controller 和 Helper 来更改请求。我正在寻找有关这是否是正确方法的意见，以及任何指导或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-31T20:03:44.610

如果你想用 js 来显示和隐藏你的列，我建议使用 CakeGrid 插件：

[https://github.com/Mehrdad-Dadkhah/CakeGrid](https://github.com/Mehrdad-Dadkhah/CakeGrid)

或者像这个例子一样使用jquery DataTable：[http ://www.datatables.net/examples/api/show_hide.html](http://www.datatables.net/examples/api/show_hide.html)

但我建议使用 CakeGrid 插件，因为它可以让您的网格变得干净，并为您提供很多选项和 Grid 的拖曳布局，包括 table 和 div 以及...

要让 ajax 分页和过滤都在一起，您可以添加一个表单来过滤和

在会话中保存最后一个分页选项并使用控制器中的最后一个分页选项管理过滤

或者

当成功触发您的 ajax 事件时，将过滤表单的操作替换为最后请求的 url。如果您自己处理 ajax 并为您的操作禁用安全性检查，您可以执行此操作，因为您更改了表单操作并且您从 cake 安全组件中获得了 CSRF 错误

# mef - 是否可以使用约定在 MEF 2 中注册开放泛型？

> ID：14282614
> 
> 赞同：1
> 
> 时间：2013-01-11T16:37:51.807
> 
> 标签：mef

我正在探索 MEF2/.Net4.5（又名约定）的新的无属性注册功能。更具体地说，我正在尝试注册开放泛型：

```
public interface IRepository<T>
{
    T Fetch();
}

public class Repository<T> : IRepository<T>
{
    public T Fetch()
    {
        return default(T);
    }
}

public class Quotation
{

}

class Program
{
    static void Main(string[] args)
    {
       var registrationBuilder = new RegistrationBuilder();

       registrationBuilder
            .ForType<Repository<Quotation>>()
            .Export();

        registrationBuilder
            .ForTypesMatching(t => t.Name.EndsWith("ory"))
            .Export();

        registrationBuilder
            .ForType<Quotation>()
            .Export<Quotation>();

        var catalog = new AssemblyCatalog(typeof (Program).Assembly, registrationBuilder);

        foreach (var part in catalog.Parts)
        {
            Console.WriteLine(part.ToString());
        }
     }
 } 
```

无论我使用哪种方法来注册存储库（参见代码），目录中都只包含 Quotation 类。我是否遗漏了什么，或者注册 API 中不支持开放泛型？

此致，

K·科塞利斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:35:12.047

有可能的。据我所知，所有组合都是可能的。

属性导出 - 约定导入 约定导出 - 属性导入 约定导出 - 约定导入

为了让您的样本工作替换：

```
registrationBuilder
            .ForTypesMatching(t => t.Name.EndsWith("ory"))
            .Export(); 
```

和：

```
registrationBuilder
                .ForTypesMatching(t => t.GetInterface(typeof(IRepository<>).Name) != null)                    
                .ExportInterfaces(); 
```

当然还有其他方法可以实现`ForTypesMatching`谓词。请注意，您还可以过滤导出的接口。

奇怪的是，以下不起作用：

```
registrationBuilder
                .ForTypesDerivedFrom(typeof(IRepository<>))
                .ExportInterfaces(); 
```

我现在没有时间查看 MEF 的源代码，但是当我这样做时，我会告诉你。

# c++ - 无论分辨率如何，使球以相同的速度移动（PONG）

> ID：14282615
> 
> 赞同：2
> 
> 时间：2013-01-11T16:37:52.740
> 
> 标签：c++, directx, game-physics, pong

我创建了一个简单的 Pong 游戏，并通过在游戏逻辑中的**位置添加变量****ballSpeed**来移动球，例如：**`update`**

 **```
void Update()
{
    ballPosition += ballSpeed;
} 
```

问题是这`ballSpeed`是一个`D3DXVECTOR3`带有组件的：`x = 10; y = 10; z = 0;`

问题是，当我增加窗口的分辨率时`640:480`，`1280:1024`球的移动速度会变慢，因为它需要更多的像素。

我的问题是：**无论显示器的分辨率如何，我怎样才能让球以相同的速度移动？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:40:10.307

也许你可以引入一个新的坐标系；说从（0,0）到（1,1）。在这个坐标系中移动球，然后将这些坐标中的位置映射到屏幕上的像素来绘制球。您会希望您的坐标系具有与窗口相同的纵横比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:47:07.767

您应该首先引入屏幕坐标和逻辑坐标之间的转换，并且更新球的位置不是常数，而是考虑自上次更新以来的时间，以便正确模拟速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T17:01:55.543

您可以通过实际分辨率与显影分辨率的比率来缩放速度。由于 Pong 中的游戏玩法以水平运动为主，因此您可以使用宽度的比率：

```
ballSpeed = int(ballSpeed * width / 640.0); 
```

您可能也希望对所有屏幕元素的大小（例如球）执行相同的操作。

这一切都假设您将“速度”定义为穿过整个屏幕所用的时间，而不是覆盖给定的英寸数。该计算不仅仅取决于分辨率。**

# makefile - Hunk #1 FAILED at 1\. 这是什么意思？

> ID：14282617
> 
> 赞同：67
> 
> 时间：2013-01-11T16:37:59.200
> 
> 标签：makefile, cross-compiling, vlc

运行时出现以下错误`make`，我不知道它是什么意思或如何处理它。谁能照亮我或指出我正确的方向？

```
(cd libdvdnav-git && patch -p1) < ../../contrib/src/dvdnav/dvdnav.patch
patching file Makefile.am
Hunk #1 FAILED at 1.
1 out of 1 hunk FAILED -- saving rejects to file Makefile.am.rej
make: *** [dvdnav] Error 1 
```

我正在尝试为 win32 交叉编译 VLC（使用 linux）。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-01-11T16:48:01.403

这是由 生成的错误`patch`。如果您打开`.patch`文件，您会看到它被组织成一堆片段，即所谓的“大块”。每个块都标识新旧版本中的相应代码段（按行号），这些代码段之间的差异以及它们之间的相似之处（“上下文”）。

如果大块的相似性与原始文件中的内容不匹配，大块可能会失败。当您看到此错误时，几乎总是因为您正在为您正在修补的代码的错误版本使用补丁。有几种方法可以解决这个问题：

*   获取`libdvdnav`已包含补丁的更新版本（最佳选择）。
*   获取您正在修补`.patch`的版本的文件。`libdvdnav`
*   手动打补丁。对于补丁中的每一个hunk，尝试找到对应的文件和行`libdvdnav`，并根据补丁中的说明进行更正。
*   取它的版本`libdvdnav`更接近`.patch`文件的任何版本（可能是个坏主意）。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2018-09-18T07:38:07.693

在某些情况下，文件版本**没有区别**，而只是缩进、间距、行尾或行号。

尽管存在这些差异，但要修补，可以使用以下**两个参数：**

**--ignore-whitespace ：**它忽略空白差异（缩进等）。

**--fuzz 3 ：** “--fuzz *X* ”选项将最大模糊因子设置为线条。此选项仅适用于上下文和统一差异；它在寻找安装大块的地方时最多忽略*X行。*请注意，较大的模糊因子会增加制作错误补丁的几率。默认模糊因子为 2；没有必要将其设置为超过 diff 中的上下文行数，通常为 3。

*不要忘记用户“--dry-run”：它会在不应用补丁的情况下尝试补丁。*

例子 ：

```
patch --verbose --dry-run --ignore-whitespace --fuzz 3 < /path/to/patch.patch 
```

关于 Fuzz 的更多信息：

[https://www.gnu.org/software/diffutils/manual/html_node/Inexact.html](https://www.gnu.org/software/diffutils/manual/html_node/Inexact.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-09T15:37:00.340

调试技巧

1.  将crlf添加到补丁文件的末尾并测试它是否有效
2.  尝试使用 --ignore-whitespace 命令，如下所示： `markus@ubuntu:~$ patch -Np1 --ignore-whitespace -d software-1.0 < fix-bug.patch` 请参阅[markus 的教程](http://www.markusbe.com/2009/11/how-to-apply-a-patch-and-solve-hunk-failed-cant-find-file-to-patch-and-others/#hunk-failed)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-11T01:57:30.037

当我没有在相关 git 项目的顶级目录中应用补丁时，我收到了“hunks failed”消息。我在子目录中应用补丁（我创建它的地方）。

似乎可以从 git 项目中的子目录创建补丁，但不能应用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-05T11:50:36.623

按照[这里](https://lists.freedesktop.org/archives/ooo-build/2010-March/000654.html)的说明，它解决了我的问题。

您必须运行如下命令；patch -p0 --dry-run < path/to/your/patchFile/yourPatch.patch

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-17T15:32:28.280

就我而言，IDEA 生成的补丁非常好，但是，我编辑了补丁并保存了它，将 CRLF 更改为 LF，然后补丁停止工作。奇怪的是，将其转换回 CRLF 不起作用。我在 VI 编辑器中注意到，即使设置为 DOS 格式，'^M' 也没有添加到行尾。这迫使我只在 VI 中进行更改，以便保留 EOL。

这可能适用于您，如果您在非 Windows 环境中对覆盖两个版本之间更改的补丁进行更改，这两个版本都来自 Windows 环境。您要小心编辑此类文件的方式。

顺便说一句`ignore-whitespace`，没有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-03-01T11:53:40.587

当我生成补丁文件`git diff`并粘贴输出时，它发生在我身上：

```
git diff branch-1 branch-2 # and then copy the output 
```

这会插入或更改空格的性质。

我将输出定向到一个文件：

```
git diff branch-1 branch-2 > my-patch.patch 
```

这解决了这个问题。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-03-26T19:33:02.333

**Hunk #1 FAILED at 1\. 1 / 1 hunk FAILED -- 将拒绝保存到文件 Makefile.am.rej**

当我通过补丁应用更改然后在stackoverflow上完全搜索时发现了同样的错误，但我没有得到答案。

然后我搜索了一些小部分，比如补丁错误背后的原因，然后我发现

**Hunk #n 在 nnn 失败。n 个大块中的 n 个失败 - 将拒绝保存到文件 file.rej**

这意味着不能将一个或多个称为大块的更改引入文件中。有时这可能是因为通过电子邮件发送补丁或将补丁复制到文件中，并且添加或删除了空格。尝试将 --ignore-whitespace 添加到命令行以解决此问题。

**第2步**

然后我搜索了不同的文件结尾，我发现有两种类型的格式系统 LF，CF

然后我检查我的文件我使用什么格式

现在如果这个文件是在 *NIX 系统中创建的，它会显示

$ cat -A 文件你好$

hello$ 但是如果这个文件是在 Windows 中创建的，它会显示

$ cat -A 文件你好^M$

你好^M

**代表 CR，$ 代表 LF。请注意，Windows 没有使用 CRLF 保存最后一行**

这是我从stackoverflow中找到的

然后我检查我的原始文件格式和 .patch/diff 我得到那个补丁文件有 LF 和 Cf

然后我在将补丁应用到 Windows 或 unix 格式之前转换这些文件，方法是使用

**dos2unix 文件名.extension 或 unix2dos 文件名.extension**

这将转换文件

然后应用补丁得到结果

**命令提示符命令**

**创建文件** touch filename.txt

用于创建补丁/差异文件

diff -u originalfile.txt 编辑文件.txt > originalfile.diff 或 diff -u originalfile.txt 编辑文件.txt > originalfile.patch

**在应用更改检查文件格式之前**

cat -A originalfile.txt
cat -A originalfile.diff

**现在转换 doc2unix 或 unix2dos** unix2dos originalfile.txt unix2dos originalfile.diff

**应用更改** 补丁 originalfile.txt < originalfile.diff

**完毕 ！！**

***我希望这会帮助你！***

# ios - 有没有办法像这样向 NSOperationQueue 添加块

> ID：14282621
> 
> 赞同：10
> 
> 时间：2013-01-11T16:38:10.707
> 
> 标签：ios, nsoperationqueue, block

我正在尝试了解 NSOperationQueue，并尝试创建最简单的示例。我有以下内容：

```
NSOperationQueue *myOQ=[[NSOperationQueue alloc] init];

[myOQ addOperationWithBlock:^(void){
  NSLog(@"here is something for jt 2");
}];
[myOQ addOperationWithBlock:^(void){
  NSLog(@"oh is this going to work 2");
}]; 
```

但想这样做：

```
void  (^jt)() = ^void(){
  NSLog(@"here is something for jt");
};

void (^cl)() = ^void(){
  NSLog(@"oh is this going to work");
};

NSOperationQueue *myOQ=[[NSOperationQueue alloc] init];

[myOQ addOperation:jt];
[myOQ addOperation:cl]; 
```

后一种形式可能吗？我可以将块转换为 NSOperation 吗？

提前谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-11T16:45:26.030

你可以：

```
NSBlockOperation *jtOperation = [NSBlockOperation blockOperationWithBlock:^{
    NSLog(@"here is something for jt");
}];

NSBlockOperation *clOperation = [NSBlockOperation blockOperationWithBlock:^{
    NSLog(@"oh is this going to work");
}];

[myOQ addOperation:jtOperation];
[myOQ addOperation:clOperation]; 
```

话虽如此，除非出于某种其他原因（例如，建立操作之间的依赖关系等），`addOperationWithBlock`我确实需要对象指针，否则我通常会这样做。`NSOperation`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-05T09:19:35.167

你也可以做

```
[operationQueue addOperationWithBlock:^{
    // Stuff
})]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-03T11:41:45.220

**迅速**

```
let networkingOperation = NSBlockOperation(block: {
                             // Your code here
                          }) 
```

# c++ - 非类型模板参数错误（'x' 不是类型）

> ID：14282622
> 
> 赞同：5
> 
> 时间：2013-01-11T16:38:17.820
> 
> 标签：c++, gcc, g++

我正在尝试构建我朋友的 QT 应用程序的 OS X 版本，他在 Windows 和 Linux 上构建了该应用程序。我们都在使用 g++。我正在使用 gcc 4.2.1。不幸的是，我不知道他在构建应用程序时使用的是什么版本（那是很久以前的事了）。

任何人都可以解释为什么我会收到错误：

```
../../../src/dbapi/dbcore/node.h:24: error: 'dimensions' is not a type 
```

编译以下代码时：

节点.h：

```
template<class T,const unsigned int dimensions>
class EXPORT_DBCORE Node : public Transform<T,dimensions>
{
public:
  Node( Id id,
        QString& name,
        QString& text = "",
        // ************** Offending line: ***************
        Vector<T,dimensions> position = Vector<T,dimensions>(),
        Quaternion<T> rotation = Quaternion<T>() )
    : Transform<T,dimensions>( position, rotation )
    , mId( id )
    , mName( name )
    , mText( text )
  {
  }

private:
  ...
}; 
```

矢量.h：

```
template<class T,const unsigned int dimensions>
class EXPORT_DBCORE Vector
{
public:
  //! Default Constructor
  Vector()
  {
    mpArray = new T[dimensions];
    for( int i = 0; i < dimensions; i++ )
    {
      mpArray[i] = 0;
    }
  }
... 
```

谢谢。

编辑：抱歉，如果不清楚哪一行是第 24 行。它由 Node.h 摘录中的“违规行”注释指示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T19:11:01.630

不幸的是，我认为标准实际上说此代码格式错误，请参阅[核心问题 325](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#325)。C++ 语法说，默认参数的模板参数列表中的逗号被解析为开始下一个函数参数，因此问题`= Vector<T, dimensions>()`出在代码中，因此`dimensions`被视为开始一个新的函数参数，而不是作为模板 ID。

GCC 4.4.0 在近五年前被更改（参见[Bug 57](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=57)）以接受代码，你有充分的理由使用这样一个旧版本吗？

如果无法升级，可以通过向 Node 添加 typedef 来解决该错误：

```
typedef Vector<T, dimensions> VectorType; 
```

然后使用它：

```
 Node( Id id,
        QString& name,
        QString& text = "",
        VectorType position = VectorType(),
        Quaternion<T> rotation = Quaternion<T>() ) 
```

从技术上讲，只有默认参数需要使用 typedef，但我会将它用于参数声明和默认参数。事实上，我几乎总是为我的类使用的任何容器类型声明一个 typedef，然后在类中使用该 typedef。这通常更短，意味着如果您更改容器，那么您通常只需要更新 typedef，而不是每次使用它。

# linux - Linux 文件和字符串搜索

> ID：14282623
> 
> 赞同：0
> 
> 时间：2013-01-11T16:38:19.527
> 
> 标签：linux, search

我是Linux的n00b。我试图理解一个大型 C++ 项目的源代码，其中包括一堆其他头文件等。

在其中一个主文件中，我看到了一堆函数调用，但我没有看到文件本身的定义，所以它显然是从其他地方包含进来的。

我正在寻找一种方法来搜索文件或实际定义函数的位置。有没有办法做到这一点？请帮忙。正如我所提到的，我正在使用 Linux。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:40:40.517

查看[grep](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep)以在标题/文本文件等中搜索字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:43:05.070

您可以从以下命令开始

```
find . -name '*.[ch]*' | xargs grep some_search_term 
```

对于更高级的搜索，您应该考虑查看[cscope](http://cscope.sourceforge.net/)或[ctags](http://ctags.sourceforge.net/)。

# apache2 - 如何在不重新启动的情况下添加/删除 Apache2 平衡器成员

> ID：14282625
> 
> 赞同：0
> 
> 时间：2013-01-11T16:38:23.043
> 
> 标签：apache2, load-balancing, mod-proxy-balancer

我想知道，是否有办法在不完全重启 apache 的情况下添加/删除 Apache2 mod_proxy_balancer balancer-members，这样现有的连接就不会被中断？

如果我只是更新相同的 vhost 文件中的成员并通过

```
service apache2 reload 
```

apache 不会应用所做的更改。提供的`balancer-manager`指令和 Web 后端允许在不重新启动的情况下修改特定 blanacer 成员（例如 loadfactor）的参数，但不能以这种方式添加新成员或删除现有成员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-16T13:03:58.880

最后，由于一些不常见的问题`apache`和`mod_proxy_balancer`（有关更多详细信息，请参阅[https://issues.apache.org/bugzilla/show_bug.cgi?id=44736](https://issues.apache.org/bugzilla/show_bug.cgi?id=44736)）我做了一些解决方法：

首先用占位符填充平衡器工作配置，将负载因子设置为“1”，例如：

```
<Proxy balancer://mycluster>
   BalancerMember http://www.cmgm.info/virtual/1/  loadfactor=1
   BalancerMember http://www.cmgm.info/virtual/2/  loadfactor=1
   BalancerMember http://www.cmgm.info/virtual/3/  loadfactor=1
   BalancerMember http://www.cmgm.info/virtual/4/  loadfactor=1
   BalancerMember http://www.cmgm.info/virtual/5/  loadfactor=1
   ...
   BalancerMember http://www.cmgm.info/virtual/n/  loadfactor=1
</Proxy> 
```

然后`mod_rewrite`用于将占位符动态分配给真正的平衡器成员，例如：

```
RewriteEngine on
RewriteRule ^1/(.*)$ http://www.worker1.de/$1 [P]
RewriteRule ^2/(.*)$ http://www.worker2.de/$1 [P]
...
RewriteRule ^n/(.*)$ http://www.workern.de/$1 [P] 
```

添加、删除、启用、禁用和设置每个（虚拟）成员的负载因子是通过访问`balancer-manager`Web 界面来完成的。

总而言之，`mod_proxy_balancer`可以使用此解决方法以编程方式进行动态修改。

# android - 来自图像的 Android 动画壁纸

> ID：14282629
> 
> 赞同：2
> 
> 时间：2013-01-11T16:38:29.687
> 
> 标签：android, live-wallpaper, android-image

我正在尝试使用我正在绘制的一些图像制作动画 Android 背景。我一步一步地画图，但手机画得很慢。

我正在尝试这个：

```
 public class MyWallpaperService extends WallpaperService {
        private int[] images = { R.drawable.p1, R.drawable.p2, R.drawable.p3,
                R.drawable.p4, R.drawable.p5, R.drawable.p6, R.drawable.p7,
                R.drawable.p8, R.drawable.p9, R.drawable.p10, R.drawable.p11,
                R.drawable.p12, R.drawable.p13, R.drawable.p14, R.drawable.p15,
                R.drawable.p16, R.drawable.p17, R.drawable.p18, R.drawable.p19,
                R.drawable.p20, R.drawable.p21, R.drawable.p22, R.drawable.p23,
                R.drawable.p24 };

        @Override
        public Engine onCreateEngine() {
            return new MyWallpaperEngine();
        }

        private class MyWallpaperEngine extends Engine {
            private final Handler handler = new Handler();
            private final Runnable drawRunner = new Runnable() {
                @Override
                public void run() {
                    drawImage(images[0]);
                }

            };

            private Paint paint = new Paint();
            private boolean touch = true;

            @Override
            public void onVisibilityChanged(boolean visible) {
                if (visible) {
                    handler.post(drawRunner);
                } else {
                    handler.removeCallbacks(drawRunner);
                }
            }

            @Override
            public void onSurfaceDestroyed(SurfaceHolder holder) {
                super.onSurfaceDestroyed(holder);
                handler.removeCallbacks(drawRunner);
            }

            @Override
            public void onSurfaceChanged(SurfaceHolder holder, int format,
                    int width, int height) {
                super.onSurfaceChanged(holder, format, width, height);
            }

            @Override
            public void onTouchEvent(MotionEvent event) {
                if (partOne) {
                    if (touch) {
                        touch = false;
                        for (int i = 0; i < images.length; i++)
                            imagePostDelay(i, i * 100, i == images.length - 1 ? true
                                    : false);
                    }
                }
                super.onTouchEvent(event);
            }

            private void drawImage(int id) {
                WindowManager wm = (WindowManager) getSystemService(Context.WINDOW_SERVICE);
                Display display = wm.getDefaultDisplay();
                @SuppressWarnings("deprecation")
                int width = display.getWidth(); // deprecated 960
                @SuppressWarnings("deprecation")
                int height = display.getHeight(); // deprecated 540
                final Resources res = getResources();
                Bitmap bitmap;
                Canvas canvas = null;
                SurfaceHolder holder = getSurfaceHolder();
                bitmap = BitmapFactory.decodeResource(res, id);
                bitmap = Bitmap.createScaledBitmap(bitmap, width, height, true);
                try {
                    canvas = holder.lockCanvas();
                    canvas.drawBitmap(bitmap, 0, 0, paint);
                } catch (NullPointerException e) {
                } finally {
                    if (canvas != null)
                        holder.unlockCanvasAndPost(canvas);
                }
            }

            private void imagePostDelay(final int index, int delay,
                    final boolean allowTouch) {
                new Handler().postDelayed(new Runnable() {
                    public void run() {
                        try {
                            drawImage(images[index]);
                        } catch (ArrayIndexOutOfBoundsException e) {
                        }
                        if (allowTouch)
                            touch = true;
                    }
                }, delay);
            }
        } 
```

我尝试在该`onCreate`方法中以适当的分辨率保存图像，但没有帮助。然后我尝试使用较少的图像，但它引发了`OutOfMemory`异常。这可能是由图像数量引起的。最主要的是捕捉图像并没有太大帮助。它仍然很慢。

*   有没有什么好的教程可以帮助在 Android 上制作现场幻灯片背景？
*   `setWallpaper()`在 xml 中以适当的分辨率存储图像并仅使用该方法更改图像是个好主意吗？方法会 `setWallpaper()`更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:48:47.590

为了更有效地绘制移动

```
bitmap = BitmapFactory.decodeResource(res, id);
bitmap = Bitmap.createScaledBitmap(bitmap, width, height, true); 
```

到

```
....
private class MyWallpaperEngine extends Engine {
bitmap = BitmapFactory.decodeResource(res, id);

....
    @Override
    public void onSurfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        super.onSurfaceChanged(holder, format, width, height);

        // size the background bitmap so it draws efficiently 
        bitmap = Bitmap.createScaledBitmap(bitmap, width, height, true);

        drawFrame();
    }

....
void drawFrame() {
Canvas c = null;
        try {
            c = holder.lockCanvas();
            if (c != null) {
                // This will draw on every cycle of the Runnable, 
                // so don't do any decoding of Bitmap here, 
                // that would be very inefficient.  
               canvas.drawBitmap(bitmap, 0, 0, paint);
         }
        } finally {
            if (c != null) holder.unlockCanvasAndPost(c);
        }

        mHandler.removeCallbacks(drawRunner);
        if (mVisible) {
            mHandler.postDelayed(drawRunner,  1000/25);
        }
    } 
```

# yaml-cpp - 如何为特定的 yaml-cpp 节点设置发射样式

> ID：14282645
> 
> 赞同：4
> 
> 时间：2013-01-11T16:39:36.160
> 
> 标签：yaml-cpp

我正在发出一个 YAML 文档，如下所示：

```
YAML::Node doc; // ...populate doc...
YAML::Emitter out;
out << doc; 
```

在节点层次结构的某个地方，我有一个特定的序列，我想在`Flow`样式中发出，而其他一切都应该使用默认样式设置。

除了手动发射每个节点并注意我感兴趣的节点之外，我似乎找不到任何方法。这似乎是为相对简单的事情付出高昂的代价。

理想情况下，我希望能够标记`Node`“如果你被发射，请使用以下样式”。但我认为没有任何支持。

谁能想到不得不手动发出整个文档的方法？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-15T01:43:05.810

[如this question](https://stackoverflow.com/questions/14659434/how-to-set-yaml-cpp-node-style)中所指出的，此功能已实施。

您可以使用以下代码设置节点样式

```
node.SetStyle(YAML::EmitterStyle::Flow); 
```

或者

```
node.SetStyle(YAML::EmitterStyle::Block); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T05:33:55.860

目前这是不可能的，但我已将其作为功能请求提交：

[http://code.google.com/p/yaml-cpp/issues/detail?id=184](http://code.google.com/p/yaml-cpp/issues/detail?id=184)

# php - dom解析后如何在mysql中插入所有href标签？

> ID：14282650
> 
> 赞同：0
> 
> 时间：2013-01-11T16:39:50.913
> 
> 标签：php, foreach

我遇到了一个`foreach循环，我想在DOM解析后将其导入数据库，包括所有标签/href。这是我的循环：

```
foreach($html->find('a') as $element) 
{       
    $sql1="INSERT INTO page (site_id,url) VALUES (LAST_INSERT_ID(),'$element->href')";  
} 
```

这是一个可以正常工作的：

```
$j=1;
foreach($html->find('a') as $element) 
{       
    echo $j++ . ') HREF: ' . $element->href . ' ' . '<br>';         
} 
```

如何让第一个循环存储所有 href 标签，而不仅仅是最后一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:43:30.720

看起来您循环遍历，`$sql1`每次都重置，然后我假设您执行循环后的最后一个查询。你真正应该做的是`INSERT`在你的循环中构建一个复合语句，并在最后执行它。在一个循环中执行多个`INSERT`s 是不好的做法，您可以通过一个查询轻松插入多行。

就像是...

```
$values .= sprintf('(%s), ', $element->href); 
```

当然，您需要删除结尾的逗号。就像是...

```
$values = substr ($values, 0, strlen($values)-1); 
```

接着...

```
$sql1="INSERT INTO page (url) VALUES ($values)"; 
```

另外，我不知道你为什么需要使用`LAST_INSERT_ID`. 您可能想创建一个`AUTOINCREMENT`列，然后让 MySQL 完成这项工作。如果你解释你想做什么，`LAST_INSERT_ID`我可以提供更好的建议。

不言而喻，您应该使用 PDO 或 MySQLi 准备好的语句。PHP 的 MySQL 函数已弃用、不安全，将在未来版本中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:44:45.333

关于什么：

```
$sql = array();
    foreach($html->find('a') as $element) 
{       
     $sql[] = "INSERT INTO page (site_id,url) VALUES (LAST_INSERT_ID(),'$element->href')"; 
} 
```

只需使用和数组来存储所有查询，以便稍后使用 foreach 循环执行它们，或者直接在您提供的 foreach 循环中进行数据库查找

# continuous-integration - 如果代码覆盖率低于 TFS2012 中的阈值，则构建失败

> ID：14282652
> 
> 赞同：11
> 
> 时间：2013-01-11T16:39:58.393
> 
> 标签：continuous-integration, code-coverage, azure-devops

当代码覆盖率低于阈值时，我试图在 TFS 服务（托管 TFS2012）中构建失败。

我一直在搞乱[http://scrumdod.blogspot.co.uk/2011/04/fail-build-if-code-coverage-is-low.html的解决方案](http://scrumdod.blogspot.co.uk/2011/04/fail-build-if-code-coverage-is-low.html)

但是，我使用的是 TFS2012，很多事情似乎都发生了变化。特别是，测试运行的配置完全不同，似乎没有任何方法可以在构建过程模板或 .runsettings 文件中获取或设置 .coverage 文件的位置和名称。

我将如何在 TFS2012 或 TFSService 中查找（或设置）.coverage 文件的位置？

或者，如果代码覆盖率低于阈值，是否还有另一种方法可以使构建失败？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T17:09:28.733

这将需要几个步骤：

1.  创建自定义构建活动
2.  将活动添加到构建控制器
3.  在新的构建过程中调用该自定义构建活动
4.  使用新的构建过程

## 1\. 创建自定义构建活动。

在 VS2012 中创建一个新项目（我调用了我的 CodeCoverageLibrary。参考以下程序集：

*   Microsoft.TeamFoundation.Build.Client
*   Microsoft.TeamFoundation.Client
*   Microsoft.TeamFoundation.TestManagement.Client
*   Microsoft.TeamFoundation.WorkItemTracking.Client
*   系统
*   系统活动
*   系统核心
*   System.Xaml

您可以使用以下代码：

```
using System;
using System.Activities;
using System.Collections.Generic;
using Microsoft.TeamFoundation.Build.Client;
using Microsoft.TeamFoundation.Client;
using Microsoft.TeamFoundation.TestManagement.Client;

namespace CodeCoverageLibrary
{
    [BuildActivity(HostEnvironmentOption.All)]
    public sealed class GetCodeCoverage : CodeActivity<double>
    {
        public InArgument<IBuildDetail> BuildDetail { get; set; }

        protected override double Execute(CodeActivityContext context)
        {
            var buildDetail = BuildDetail.Get(context);
            var buildCoverages = GetBuildCoverages(buildDetail.BuildServer.TeamProjectCollection.Uri,
                                                   buildDetail.TeamProject, buildDetail.Uri);
            return GetTotalCoverage(buildCoverages);
        }

        private static IEnumerable<IBuildCoverage> GetBuildCoverages(Uri uri, string projectName, Uri buildUri)
        {
            return TfsTeamProjectCollectionFactory.GetTeamProjectCollection(uri)
                                                  .GetService<ITestManagementService>()
                                                  .GetTeamProject(projectName)
                                                  .CoverageAnalysisManager.QueryBuildCoverage(buildUri.ToString(),
                                                                                              CoverageQueryFlags.Modules);
        }

        private static double GetTotalCoverage(IEnumerable<IBuildCoverage> buildCoverages)
        {
            int totalCoveredBlocks = 0, totalUncoveredBlocks = 0;
            foreach (var buildCoverage in buildCoverages)
            {
                foreach (var module in buildCoverage.Modules)
                {
                    totalCoveredBlocks += module.Statistics.BlocksCovered;
                    totalUncoveredBlocks += module.Statistics.BlocksNotCovered;
                }
            }

            return (totalCoveredBlocks == 0 && totalUncoveredBlocks == 0)
                                      ? 0.0
                                      : ((double) totalCoveredBlocks) /
                                        ((double) (totalCoveredBlocks + totalUncoveredBlocks));
        }
    }
} 
```

编译项目并添加到 TFS 上的版本控制路径。

## 2\. 将活动添加到构建控制器

在 Team Explorer 中，转到**Builds** > **Actions** > **Manage Build Controllers ...**。然后单击构建控制器的**属性...。**在**自定义程序集的版本控制路径下**，放置您在上面使用的路径。

## 3\. 在构建过程中调用自定义构建活动

将**BuildProcessTemplates\DefaultTemplate.11.1.xaml**复制到新文件。

更新新 XAML 文件的开头以包含以下内容：

```
<Activity ...
          xmlns:ccl="clr-namespace:CodeCoverageLibrary;assembly=CodeCoverageLibrary"
          ...
          >
  <x:Members>
    ...
    <x:Property Name="CodeCoverageTolerance" Type="InArgument(x:Double)" />
  </x:Members>
  ...
  <this:Process.Metadata>
    <mtbw:ProcessParameterMetadataCollection>
      ...
      <mtbw:ProcessParameterMetadata BrowsableWhen="EditingDefinition" Category="#900 Misc" DisplayName="CodeCoverageTolerance" Description="If the overall code coverage drops below this threshold, then the build will fail. This is a number between 0 and 1." ParameterName="CodeCoverageTolerance" />
    </mtbw:ProcessParameterMetadataCollection>
  </this:Process.Metadata> 
```

更新 XAML 文件的末尾以包含以下内容：

```
 <Sequence DisplayName="Code Coverage Check" mtbwt:BuildTrackingParticipant.Importance="None">
        <Sequence.Variables>
          <Variable x:TypeArguments="x:Double" Name="CodeCovered" />
        </Sequence.Variables>
        <ccl:GetCodeCoverage DisplayName="Getting Code Coverage" BuildDetail="[BuildDetail]" Result="[CodeCovered]" />
        <If Condition="[CodeCovered &lt; CodeCoverageTolerance]">
          <If.Then>
            <Sequence DisplayName="Comparing Code Coverage Against Tolerance">
              <mtbwa:SetBuildProperties DisplayName="Set TestStatus to Failed" mtbwt:BuildTrackingParticipant.Importance="Low" PropertiesToSet="TestStatus" TestStatus="[Microsoft.TeamFoundation.Build.Client.BuildPhaseStatus.Failed]" />
              <mtbwa:WriteBuildError Message="[&quot;Code Coverage of &quot; + CodeCovered.ToString(&quot;P&quot;) + &quot; is less than required &quot; + CodeCoverageTolerance.ToString(&quot;P&quot;)]" />
            </Sequence>
          </If.Then>
        </If>
      </Sequence>
    </mtbwa:AgentScope>
    <mtbwa:InvokeForReason DisplayName="Check In Gated Changes for CheckInShelveset Builds" Reason="CheckInShelveset">
      <mtbwa:CheckInGatedChanges DisplayName="Check In Gated Changes" />
    </mtbwa:InvokeForReason>
  </Sequence>
</Activity> 
```

将此检查到 TFS。

## 4.使用新的构建过程

在 Team Explorer 中，转到**Builds**并右键单击您的构建定义。转到**Edit Build Definition...** > **Process**。展开**构建过程模板**并单击**新建**...。单击**选择现有 XAML 文件**并输入新 XAML 文件的路径。单击**确定**。您现在应该在**4\. Misc**下看到**CodeCoverageTolerance**。您可以输入一个介于 0 和 1 之间的数字来表示您想要的百分比。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:18:13.967

您可以在 RunTests 活动之后添加您的活动，您可以在其中查询[代码覆盖附件的构建](http://geekswithblogs.net/TarunArora/archive/2012/05/16/get-detailed-build-test-results-using-the-tfs-api.aspx)并[合并和解析 .coverage 文件](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.coverage.analysis.coverageinfo.aspx)以通过/失败构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T04:09:32.490

上面的解决方案只有一件事，您应该将计算修改为这样，以确保将百分比值返回到小数点后两位

```
return (totalCoveredBlocks == 0 && totalUncoveredBlocks == 0)
                                  ? 0.0
                                  : Math.Round(((double)totalCoveredBlocks) /
                                    ((double)(totalCoveredBlocks + totalUncoveredBlocks)) * 100, 2); 
```**

# css - 使用引导程序和 css 的模块化内容框

> ID：14282653
> 
> 赞同：0
> 
> 时间：2013-01-11T16:39:59.857
> 
> 标签：css, html, twitter-bootstrap

我们正在尝试在引导程序中构建内容预览网格 - 与您在 medium.com 上看到的大致相同，例如：[https ://medium.com/100-word-stories](https://medium.com/100-word-stories)

我们目前正在使用这种带有动态引导的结构：

```
<div class="container">
  <div class="row">
    <div class="span4">CONTENT BOX 1</div>
    <div class="span4">CONTENT BOX 2</div>
    <div class="span4">CONTENT BOX 3</div>
  </row>
  <row>
    <div class="span4">CONTENT BOX 4</div>
    <div class="span4">CONTENT BOX 5</div>
    <div class="span4">CONTENT BOX 6</div>
  </row>
</div> 
```

因此，我们考虑使用/调整引导程序“well”类以获得框架和填充的内容容器 - 类似`<div class="span4 well">`- 但该类的 css 填充/边距破坏了页面结构。

是否有一种“干净”的方法可以通过引导程序实现这一点，或者我们最好从头开始构建自己的类？在这种情况下 - 你们会建议什么是最好/最干净/最简单的方法？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:49:42.030

您使用的是最新版本的 css 框架吗？

```
<div class="row">
   <div class="span4">
      <div class="well">sdfijoidfisdonsdfiosdnfosdi</div>
   </div>
   <div class="span4">
      <div class="well">sdfijoidfisdonsdfiosdnfosdi</div>
   </div>
   <div class="span4">
      <div class="well">sdfijoidfisdonsdfiosdnfosdi</div>
   </div>
</div>
<div class="row">
   <div class="span4">
      <div class="well">sdfijoidfisdonsdfiosdnfosdi</div>
   </div>
   <div class="span4">
      <div class="well">sdfijoidfisdonsdfiosdnfosdi</div>
   </div>
   <div class="span4">
      <div class="well">sdfijoidfisdonsdfiosdnfosdi</div>
   </div>
</div> 
```

这对我有用！

# c# - 如何在 C# 中模拟 ANSI 终端？

> ID：14282659
> 
> 赞同：1
> 
> 时间：2013-01-11T16:40:13.603
> 
> 标签：c#, mono, terminal, pty

我在 Mono 中有一个应用程序，它创建一个腻子窗口，连接到它的 PTY 并通过它与世界通信。

感谢 Putty，我有一个完整的终端，我可以将特殊代码（如 Ctrl+C、Ctrl+Z）发送到我的应用程序。

我想回到我的终端，在其中启动应用程序。我想抓住尽可能多的组合键。这样我就可以通过 ssh 使用我的应用程序，而不会弹出任何窗口。

我的想法是从 /dev/ 检索我当前的终端，忽略（或处理）所有可能的信号，轮询按下的键并转发到我的应用程序。这可以在 C 中使用 P/Invoke 完成。

这是可能的，但编码是痛苦和耗时的。

我想知道它是否已经完成了？你知道任何图书馆吗？最好的选择是注册一个或两个回调，但任何使它更容易的解决方案都会很棒。

**TL;博士**

我需要一个库来提供我的界面，例如：

```
event Action<byte> CharReceived;
void WriteChar(byte val); 
```

并允许我接收 ANSI 终端代码作为字节序列。

替代方案是根据 ANSI 终端规则转换`ConsoleKeyInfo`为的库。`byte[]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:45:50.863

我发现以下项目链接非常有帮助。您可以下载该项目，然后查看 codeproject 网站上的第一条评论，了解如何将其扩展到 SerialPort 支持（这是我需要的）。

[http://www.codeproject.com/Articles/20781/Terminal-Control-Library-C-VT100-ANSI-XTERM-SSH-Te](http://www.codeproject.com/Articles/20781/Terminal-Control-Library-C-VT100-ANSI-XTERM-SSH-Te)

该项目实际上是 Poderosa 项目的一个薄包装，但除非你会说日语，否则这个薄包装很有用。Poderosa 项目已经支持 SerialPorts，但它并没有被“Columbus-MCSD”带到表面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-10T08:56:20.353

实际上，观察到对这种场景缺乏良好的支持（并且稍微改变了我们的要求），我们开发了自己的终端模拟器，Termsharp：

[https://github.com/antmicro/termsharp](https://github.com/antmicro/termsharp)

它是基于窗口的（在 XWT 上运行），但可以用作库，解码 VT100 序列。

虽然我用我工作的公司的产品来回答我自己的问题，但它是在原始帖子之后很长时间创建的，所以我希望它是可以接受的。

# css - 悬停动画仅在第一次有效

> ID：14282661
> 
> 赞同：1
> 
> 时间：2013-01-11T16:40:20.400
> 
> 标签：css, animation

我有一个简单的 DIV，其中包含在悬停时动画的文本。唯一的问题是它只执行一次，如果用户再次将鼠标悬停在它上面，它不会执行任何操作，直到页面重新加载。

有什么我可以做的，让它每次悬停时都会动画，而无需用户刷新？

CSS

```
.animated2:hover {
-webkit-animation-fill-mode: both;
-moz-animation-fill-mode: both;
-ms-animation-fill-mode: both;
-o-animation-fill-mode: both;
animation-fill-mode: both;
-webkit-animation-duration: 1s;
-moz-animation-duration: 1s;
-ms-animation-duration: 1s;
-o-animation-duration: 1s;
animation-duration: 1s;
}

@-webkit-keyframes tada {
0% {-webkit-transform: scale(1);}   
10%, 20% {-webkit-transform: scale(0.9) rotate(-3deg);}
30%, 50%, 70%, 90% {-webkit-transform: scale(1.1) rotate(3deg);}
40%, 60%, 80% {-webkit-transform: scale(1.1) rotate(-3deg);}
100% {-webkit-transform: scale(1) rotate(0);}
}

@-moz-keyframes tada {
0% {-moz-transform: scale(1);}  
10%, 20% {-moz-transform: scale(0.9) rotate(-3deg);}
30%, 50%, 70%, 90% {-moz-transform: scale(1.1) rotate(3deg);}
40%, 60%, 80% {-moz-transform: scale(1.1) rotate(-3deg);}
100% {-moz-transform: scale(1) rotate(0);}
}

@-o-keyframes tada {
0% {-o-transform: scale(1);}    
10%, 20% {-o-transform: scale(0.9) rotate(-3deg);}
30%, 50%, 70%, 90% {-o-transform: scale(1.1) rotate(3deg);}
40%, 60%, 80% {-o-transform: scale(1.1) rotate(-3deg);}
100% {-o-transform: scale(1) rotate(0);}
 }

@keyframes tada {
0% {transform: scale(1);}   
10%, 20% {transform: scale(0.9) rotate(-3deg);}
30%, 50%, 70%, 90% {transform: scale(1.1) rotate(3deg);}
40%, 60%, 80% {transform: scale(1.1) rotate(-3deg);}
100% {transform: scale(1) rotate(0);}
}

.tada {
-webkit-animation-name: tada;
-moz-animation-name: tada;
-o-animation-name: tada;
animation-name: tada;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-13T18:55:46.200

您可以通过使用一点点 Javascript 来实现您的目标。

您可以将悬停时的动画类（tada）添加到您想要动画的 div 中。当然，当您移出鼠标光标时，您必须删除动画类（tada）。

我没有尝试过旋转，但你也可以在没有 Javascript 的情况下进行缩放。

例如：

```
.animated2 {
  -webkit-transform: scale(1);
  -moz-transform: scale(1);
  -ms-transform: scale(1);
  -o-transform: scale(1);
  transform: scale(1);
  -webkit-transition: all 0.4s;
  -moz-transition: all 0.4s;
  -o-transition: all 0.4s;
  transition: all 0.4s;
}

.animated2:hover {  
  -webkit-transform: scale(1.05);
  -moz-transform: scale(1.05);
  -ms-transform: scale(1.05);
  -o-transform: scale(1.05);
  transform: scale(1.05); 
} 
```

每次在 div 上移动光标时都应该适用于缩放。

干杯。

# ruby-on-rails - Rails 资源未使用的方法

> ID：14282670
> 
> 赞同：0
> 
> 时间：2013-01-11T16:41:01.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3

只是对 Rails 的这个感到好奇。如果我有照片资源并且没有使用destroy方法，我应该在路由文件中排除destroy方法路由，即。

```
resources :photos, :except => [:destroy] 
```

只是在想？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:42:57.510

“应该”意味着我对某种程度的义务感到不舒服。

也就是说，如果它背后没有功能，为什么要公开它？

运行 a`rake routes`并看到什么都不做或出错的东西会产生误导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:54:22.987

没有硬性规定，如果你没有资源方法，就应该排除它们，但我个人认为排除不使用的路由是个好主意。

这样，另一个开发人员可以清楚地看到可用的资源方法。

# forms - Symfony2 如何从数据库中获取外键

> ID：14282685
> 
> 赞同：0
> 
> 时间：2013-01-11T16:41:55.950
> 
> 标签：forms, entity-framework, symfony

我有一个字段的实体患者

```
/**
 *
 * @ORM\OneToOne(targetEntity="Surgery\LoginBundle\Entity\User" , mappedBy="patient")
 * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 */
 protected $user; 
```

我想从 Patiens 获取外键，所以我创建了那个查询

```
$query = $em->createQuery('SELECT p.user_id FROM SurgeryPatientBundle:Patients p WHERE p.user =5 '); 
```

我收到这个错误

```
[Semantical Error] line 0, col 9 near 'user_id FROM': Error: Class Surgery\PatientBundle\Entity\Patients has no field or association named user_id ' 
```

我的问题是我可以在不创建 JOIN 的情况下进入该领域吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:54:30.607

p.user.id 应该完成这项工作。

```
$query = $em->createQuery('SELECT p.user.id FROM SurgeryPatientBundle:Patients p WHERE p.user =5 '); 
```

记住要考虑对象而不是数据库列名。我假设用户有一个 getId() 方法。

```
echo $query->getQuery()->getSQL();  // Handy for debugging 
```

我怀疑您不会发现 id 很有用。可能需要使用 $em->createPartialReference() 为自己获取一个可用于其他关系的用户对象。

并确保您执行以下操作：

```
$query->getQuery()->getScalerResult(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:31:17.453

试试这个：

```
$query = $em->createQuery('SELECT u.id FROM SurgeryPatientBundle:Patients p JOIN p.user u WHERE p.user =5') 
```

或者

```
$patient = $em->getRepository('SurgeryPatientBundle:Patients')->findOneBy(array('user' => 5));
$user = $patient->getUser()->getId(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-12T11:35:40.563

试试这个：

```
public function getBaseExportQuery()
{
  return $this->createQueryBuilder('p')
              ->getQuery()
              ->setHint(\Doctrine\ORM\Query::HINT_INCLUDE_META_COLUMNS, true)
              ->getArrayResult();

} 
```

# android - JNIUtil 在 Titanium Android 应用程序中找不到 Java 类 DatabaseModule / Freeze on Splash Screen 错误

> ID：14282686
> 
> 赞同：0
> 
> 时间：2013-01-11T16:41:58.240
> 
> 标签：android, debugging, titanium

在各种不同的模拟器和设备上测试使用 Titanium 开发的 android 应用程序时，我的应用程序开始在初始屏幕上冻结或简单地崩溃。我使用 android sdk/tools 中的 ddms 应用程序尝试调试错误，并得到：

```
JNIUtil Couldn't find Java class: ti/modules/titanium/database/DatabaseModule 
```

这令人惊讶，因为我没有更改任何与 db 相关的代码，甚至不必指定我想要加载该类。我清理了项目，重新启动了模拟器，制作了新的 AVD，等等，但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:41:58.240

在寻找其他有同样问题的人时，我遇到了[http://developer.appcelerator.com/question/131639/test-package-works-but-signed-one-dies-on-phone](http://developer.appcelerator.com/question/131639/test-package-works-but-signed-one-dies-on-phone)并从底部得到了线索回答。由于某种原因，Titanium 构建过程没有加载在我`require(`的一个处理数据库内容的文件中使用的标准模块。通过在我的 app.js 文件顶部引用一个 db，它以某种方式让构建过程重新开始包含 DatabaseModule。

```
var db = Titanium.Database.open('my_table'); 
```

# php - Magento - 具体产品的管理属性名称

> ID：14282688
> 
> 赞同：1
> 
> 时间：2013-01-11T16:42:14.233
> 
> 标签：php, magento, attributes, label, admin

我花了几个小时试图弄清楚但失败了。我需要在 Magento 中为“制造商”属性提取标签和值。但我需要获取管理字段中的描述 - 而不是特定于商店的描述。

我找到了很多方法来获取特定于商店的信息，我也可以提取属性的所有选项，但不能只从产品页面获取当前文章 + 管理值 + 管理标签的组合（无论来自哪个商店我正在访问它）。

有人可以帮忙吗？

这给出了所有值+标签的数组，但不适用于具体文章：

```
<pre><code>
$attribute = $_product->getResource()->getAttribute('manufacturer');
foreach ( $attribute->getSource()->getAllOptions(true, true) as $option){
$attributeArray[$option['value']] = $option['label'];
}
</code></pre> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:02:34.343

只需获取产品制造商的价值并从您的一系列选项中获取标签，如下所示：

```
$manufacturerOfProduct = $product->getManufacturer();
$attribute = $_product->getResource()->getAttribute('manufacturer');
foreach ( $attribute->getSource()->getAllOptions(true, true) as $option){
   $attributeArray[$option['value']] = $option['label'];
}
var_dump("Product manufacturer value is ".$manufacturerOfProduct." and label is ".$attributeArray[$manufacturerOfProduct]); 
```

# symfony - 根据 symfony 2.0 中的路由自定义 403 错误页面

> ID：14282690
> 
> 赞同：4
> 
> 时间：2013-01-11T16:42:26.780
> 
> 标签：symfony, twig, http-status-code-403

我想自定义 Symfony 2.0 中的错误页面

我知道这是通过覆盖其中的布局来完成的，`app/Resources/TwigBundle/views/Exception/*`但我希望为不同的路线设置不同的错误页面。

我想要一个用于后端，一个用于前端。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T20:31:15.757

你需要做的并不难。Symfony 允许您明确指定哪个控制器处理您的异常。因此，在您的 config.yml 中，您可以在 twig 配置下指定异常控制器：

从 Symfony 2.2 开始

```
twig:
   exception_controller:  my.twig.controller.exception:showAction

services:
    my.twig.controller.exception:
        class: AcmeDemoBundle\Controller\ExceptionController
        arguments: [@twig, %kernel.debug%] 
```

直到 Symfony 2.1：

```
twig:
  exception_controller: AcmeDemoBundle\Controller\ExceptionController::showAction 
```

然后，您可以创建一个自定义 showAction，根据路由显示自定义错误页面：

```
<?php
namespace AcmeDemoBundle\Controller;

use Symfony\Component\HttpKernel\Exception\FlattenException;
use Symfony\Component\HttpKernel\Log\DebugLoggerInterface;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Bundle\TwigBundle\Controller\ExceptionController as BaseExceptionController;

class ExceptionController extends BaseExceptionController
{
    public function showAction(FlattenException $exception, DebugLoggerInterface $logger = null, $format = 'html')
    {
        if ($this->container->get('request')->get('_route') == "abcRoute") {
            $appTemplate = "backend";
        } else { 
            $appTemplate = "frontend";
        }

        $template = $this->container->get('kernel')->isDebug() ? 'exception' : 'error';
        $code = $exception->getStatusCode();

        return $this->container->get('templating')->renderResponse(
            'AcmeDemoBundle:Exception:' . $appTemplate . '_' . $template . '.html.twig',
            array(
                'status_code'    => $code,
                'status_text'    => Response::$statusTexts[$code],
                'exception'      => $exception,
                'logger'         => null,
                'currentContent' => '',
            )
        );
    }
} 
```

显然，您可能应该自定义 if 语句来测试当前路由以满足您的需求，但这应该这样做。

如果您没有创建特定的错误模板，您可能希望添加默认为正常 Twig 错误页面的代码。有关更多信息，请查看代码

```
Symfony\Bundle\TwigBundle\Controller\ExceptionController 
```

也

```
Symfony\Component\HttpKernel\EventListener\ExceptionListener 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-25T07:00:03.290

我用 `arguments: ["@twig", "%kernel.debug%"]` 而不是 `arguments: [@twig, %kernel.debug%]`

# swt - JavaFX 2.2 MediaPlayer：如何在 Windows 上发布媒体文件句柄

> ID：14282691
> 
> 赞同：3
> 
> 时间：2013-01-11T16:42:26.620
> 
> 标签：swt, eclipse-rcp, javafx-2

我在 Eclipse RCP 应用程序的编辑器中使用 JavaFX 来播放视频。在编辑器 UI 的初始化过程中，我做了一些类似的事情：

```
canvas = new FXCanvas(imageSection, SWT.NONE);
canvas.setScene(createScene());
...
// createScene()
Media media = new Media(file.toURI().toString());
MediaPlayer player = new MediaPlayer(media);
MediaView view = new MediaView(player);
...
player.play(); 
```

在编辑器的 dispose 方法中，我确保视频停止播放：

```
@Override
public void dispose() {
    player.stop();
    super.dispose();
} 
```

但是，如果我想在编辑器关闭后（无论是从我自己的应用程序还是从 Windows 资源管理器）删除正在编辑器中播放的视频资源，则无法删除该文件，因为我的应用程序仍在使用它。看起来 fx 的 Media 对象从未释放视频资源。我在 javafx 文档中找不到任何指针来要求 Media 或 MediaPlayer 对象在编辑器关闭时释放资源。

我的问题：如何确保 javafx 在编辑器关闭时释放视频文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-03T07:06:12.463

刚刚遇到同样的问题，经过大量阅读后，我发现了这篇文章（[https://bugs.openjdk.java.net/browse/JDK-8123986](https://bugs.openjdk.java.net/browse/JDK-8123986)）。最后的建议之一是简单地在**MediaPlayer对象上使用****dispose()** ，这对我来说很好。

 **如果您需要确保在播放音频后释放文件，您可以执行以下操作：

```
File recording = new File("recording.mp3");
Media media = new Media(recording.toURI().toString());
final MediaPlayer mediaPlayer = new MediaPlayer(media);
mediaPlayer.play();
mediaPlayer.setOnEndOfMedia(new Runnable() {
    @Override
    public void run() {
        mediaPlayer.dispose();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T13:28:58.517

对于它的价值，我在 JavaFX 论坛上发布了我的问题。作为回应，我被指向了这张 Jira 票：http: [//javafx-jira.kenai.com/browse/RT-18224](http://javafx-jira.kenai.com/browse/RT-18224)

票证中的建议对我的情况没有帮助，所以我坚持我的解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T00:04:55.790

如果我们在应用程序中加载许多文件并使用滑块调用 seek()，由于文件数量增加，应用程序的性能会相应下降，并且操作系统的内存图显示内存的增加率。看起来像 JavaFx 内存泄漏在媒体问题上。现在，还有另一个错误：[https ://javafx-jira.kenai.com/browse/RT-28379](https://javafx-jira.kenai.com/browse/RT-28379)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T19:58:23.480

我遇到了相同（或类似）的问题。在我的例子中，我在一个独立的 Java Swing 桌面应用程序中使用 JavaFX MediaPlayer。我正在使用 JRE 1.7.0_10 和 JavaFx 2.2.4-b18。该应用程序在 Windows 机器上运行。就我而言，有些媒体文件在播放后需要删除。我碰巧正在使用 Files.delete() 方法。它总是抛出 IOException 并显示消息“该进程无法访问该文件，因为它正被另一个进程使用”，但仅在播放的最后一个文件上这样做。在尝试删除之前，我确保在媒体播放器上调用 stop()。

我还在 Carl Dea 的“JavaFX 2.0 示例介绍”一书中的 PlayingAudio 示例（第 3-1 章）中重新创建了这个场景，方法是修改上述示例以在停止按钮的事件处理程序中调用媒体文件对象上的 delete()。同样，我确保在停止媒体播放器后调用 delete。（这个例子纯粹是 JavaFX，没有 Swing。）

对于它的价值，我在我的 Swing 应用程序中解决这个问题的方法是在任何引发我之前提到的 IOException 的文件上调用 deleteOnExit()。即使这样，我也必须确保在退出应用程序时我首先调用了 Platform.exit()，否则 deleteOnExit() 也不起作用。

我希望这会有所帮助。**

# java - Gluegen 32 位与 64 位库

> ID：14282692
> 
> 赞同：0
> 
> 时间：2013-01-11T16:42:31.420
> 
> 标签：java, architecture, operating-system, jogl

我有一个 Java 应用程序，它使用 Gluegen（和 JOGL）在 3D 图中可视化一些数据，我的问题归结为这样一个事实，即如果用户在 64 位机器上的 32 位 JRE 上运行我的应用程序，我是不确定我需要使用哪个版本的gluegen/jogl dll 文件。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:53:56.607

32 位应用程序需要 32 位 DLL，无论它在何处运行。您应该能够对其进行编码，以便应用程序查找 32 位库，如果查找失败，则查找 64 位库。即任何工作;）

更好的是，您可以使用 JRE 的位数来告诉您哪个应该工作。

```
String bitness = System.getProperty("sun.arch.data.model"); 
```

# mysql - 检索其存储的时间范围在给定工作日出现一次或多次的行

> ID：14282694
> 
> 赞同：2
> 
> 时间：2013-01-11T16:42:32.757
> 
> 标签：mysql, innodb

我想知道从 MySQL 表中检索行的最佳方法（性能），其中两个日期类型字段共同构成给定的时间范围，恰好在相关时间范围内的某个工作日。

假设给定的表结构和数据示例，检索所有行的最佳方法是检索其存储的时间范围恰好有一个或多个星期一的出现，例如，星期一由数字 2 引用。

```
Table: ExampleA
Fields:
ID (int) | Begin (date) | End (date)
------------------------------------
1        |  2012-02-14  | 2012-02-16
2        |  2012-01-01  | 2012-01-15
3        |  2012-03-04  | 2012-03-06
4        |  2012-01-23  | 2012-02-07
5        |  2012-07-15  | 2012-07-15
6        |  2012-03-06  | 2012-03-13 
```

在示例查询中，最好通过基于非零的索引引用给定的工作日，从星期日开始，到星期六结束，分别构成以下索引位置：1 到 7。（与 MySQL 函数[DAYOFWEEK](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_dayofweek)相同。）

**更新：**

一直在研究如何在给定的时间范围内逐日迭代，但看起来并不好。创建临时表等的要求是不切实际的，当同时用户请求具有相同要求的操作时，它会导致问题。

示例：[如何使用 mysql 获取两个给定日期之间的日期列表？](https://dba.stackexchange.com/questions/8155/how-can-i-get-a-list-of-dates-between-two-given-dates-with-mysql)

最初的想法是循环遍历每一行的时间范围内的每一天。然后对于每个时间范围，逐日从初始日期到结束日期，并返回每个时间范围（行）找到的星期几的列表。肯定不是一个快速的方法，但只是开始的一些东西。有什么比这个更好的建议或其他建议吗？

**更新 2：**

[G-Nugget](https://stackoverflow.com/users/1621209/g-nugget) [建议](https://stackoverflow.com/a/14283551/114298)为每个工作日创建七个布尔字段，并在添加新行时，将相应字段标记为在所述行的时间范围内找到的工作日为真。当然，这是由使用数据库的应用程序完成的，而不是 SQL 查询本身。

这是迄今为止我见过或见过的最直接且对性能影响最小的解决方案，但是我无法编辑表架构。

**更新 3：**

为了进一步澄清这个问题，万一有人感到困惑或误读。笔记：

> 我正在寻找可以在“开始”、“结束”处找到星期一或我在其时间范围内选择的另一个工作日（从“存在”到“结束”）的行，或沿着从“开始”到“结束”的时间段

**更新 4：**

在这里，您有这个问题的[SQL Fiddle](http://sqlfiddle.com/#!2/74de7/8/0)供您尝试您的想法，而无需在您的机器中构建表。

**更新 5 - 解决方案：**

使用[Alexey Gerasimov的](https://stackoverflow.com/users/1029908/alexey-gerasimov) [回答](https://stackoverflow.com/a/14284165/114298)，我能够将他的 where 子句逻辑应用于我自己的问题并完成我的解决方案。谢谢阿列克谢。

如果您阅读本文并想尝试一下，看看它是否适合您的需求：

您可以使用这个[SQLFiddle](http://sqlfiddle.com/#!2/74de7/14/1)或这个小查询来设置和运行他的解决方案：

```
# Create table
CREATE TABLE `ExampleA` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `Begin` date NOT NULL,
  `End` date NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=latin1;

# Insert demo data
INSERT INTO `ExampleA`(`ID`,`Begin`,`End`) VALUES  
(1,'2012-02-14','2012-02-16'),
(2,'2012-01-01','2012-01-15'),
(3,'2012-03-04','2012-03-06'),
(4,'2012-01-23','2012-02-07'),
(5,'2012-07-15','2012-07-15'),
(6,'2012-03-06','2012-03-13');

# Query to retrieve rows which time frame
# has one or more occurrences of a given weekday
#
# 1 Sunday
# 2 Monday
# 3 Tuesday
# 4 Wednesday
# 5 Thursday 
# 6 Friday
# 7 Saturday

SET @MYDAYOFWEEK=2;
SELECT * FROM ExampleA
WHERE
(
        ( @MYDAYOFWEEK >= DAYOFWEEK(BEGIN) AND @MYDAYOFWEEK <= DAYOFWEEK(BEGIN) + DATEDIFF(END,BEGIN) )
    OR  
        ( 
          @MYDAYOFWEEK+7 >= DAYOFWEEK(BEGIN) AND @MYDAYOFWEEK+7 <= DAYOFWEEK(BEGIN) + DATEDIFF(END,BEGIN) 
        )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:32:20.877

There is no "good" way to do what you're asking with how your data is currently set up. An index cannot be used in this query since you cannot know which days are in the range until you read the two dates.

One possible way to improve the performance of the query would be to have an indicator field (something like `TINYINT` or `CHAR(1)`) for each day. It *could* help, but, in general, it might actually slow down the table due to the increased size and indexes. If you would only need to know if something happened on one or two days, this option could work, but the extra size would probably outweigh the benefits if you needed more than 2 or 3 days.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T18:12:06.923

像这样的东西怎么样：

```
select * from ExampleA
where ID = MYDAYOFWEEK
and (
        ( id >= dayofweek(begin) and id <= dayofweek(begin) + DATEDIFF(end,begin) )
    OR  
        ( 
        id+7 >= dayofweek(begin) and id+7 <= dayofweek(begin) + DATEDIFF(end,begin) 
        )
    ) 
```

第一次检查匹配同一周的日子，第二次检查跨越几周。不确定这是否是性能最好的查询

**更新**

对不起。我以为第一列是星期几。要修复，只需将查询更改如下：

```
select * from ExampleA
where (
        ( MYDAYOFWEEK >= dayofweek(begin) and MYDAYOFWEEK <= dayofweek(begin) + DATEDIFF(end,begin) )
    OR  
        ( 
        MYDAYOFWEEK+7 >= dayofweek(begin) and MYDAYOFWEEK+7 <= dayofweek(begin) + DATEDIFF(end,begin) 
        )
    ) 
```

这个绝对不快

# java - 处理程序之前的函数 spring 3

> ID：14282697
> 
> 赞同：1
> 
> 时间：2013-01-11T16:42:49.047
> 
> 标签：java, spring, spring-mvc, spring-security

我是 Spring 和一般框架中的新手...

我有几行代码我想在几乎每个处理程序中执行。例如，我将我的数据库会话和经过身份验证的用户保存为 httpSession 属性，对于我的大多数处理程序，我有：

```
@RequestMapping(....)
public ModelAndView get(HttpSession ses){
   User u = ses.getAttribute("currUser");
   DBsession session = ses.getAttribute("DBsession");
   if( u==null ) new ModelAndView("redirect:login");
   ...
} 
```

spring 有什么方法可以为我做到这一点并直接将 DBsession 和经过身份验证的 User 对象作为处理程序参数？

```
@RequestMapping(....)
public ModelAndView get(User u, DBsession session ){
   ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:54:36.440

正确的方法是使用自定义[WebArgumentResolver](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/web/bind/support/WebArgumentResolver.html)，它干净地扩展了带`@RequestMapping`注释的处理程序方法来解析参数。我使用这种机制来处理干净地合并 JPA 实体并将它们传递给我的控制器。

[您可以在此处](http://www.cakesolutions.net/teamblogs/2009/10/23/custom-arguments-for-requestmapping-methods/)和[此处](http://karthikg.wordpress.com/2009/11/08/learn-to-customize-spring-mvc-controller-method-arguments/)查看执行此操作的示例，或者在 Google 上查看更多信息，有很多。

# sql-server - 您如何确定将 100% 的钱花在哪里？

> ID：14282701
> 
> 赞同：0
> 
> 时间：2013-01-11T16:43:04.427
> 
> 标签：sql-server

执行计划总是产生 100% 的结果，那么对于哪个部分是您想要最高百分比的地方，是否有经验法则？

例如，如果我执行 SELECT 语句，我可以看到

```
03% Hash Match
02% Hash Match
10% Hash Match
01% RID Lookup
09% RID Lookup 
04% Index Seek
07% Index Seek (Nonclustered)
01% Clustered Index seek
18% Clustered Index seek
35% Key lookup (Clustered)
01% Nested Loops 
```

你明白了。如果我遗漏了一两个，请原谅我。所以我的问题是：这好还是不好？如果我使用 SELECT 语句，我确信统计数据会发生变化，但它们的总和总是 100，所以我不知道我希望哪个类别的百分比最高。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T17:04:13.707

没有真正的目标，比如“将 100% 推向聚集索引搜索”，但您应该做的是专注于最昂贵的运算符并努力提高它们的效率。也就是说，当然，如果查询首先表现出性能问题。在任何查询计划中总会有一个“最昂贵”的运算符——但整个查询的成本是多少？你花时间在你最重的击球手上吗？你怎么知道的？或者您是否正在查看那个 35% 运算符并试图从已经在 2 毫秒内运行的查询中挤出额外的纳秒？

此外，不要依赖*估计*的执行计划；生成*实际*计划（其中还将包含有关估计的信息，让您了解 SQL Server 可能还有多远）。

针对您的具体情况的一条评论：您想尽您所能摆脱任何 RID 或密钥查找。这意味着可能会向您的堆添加聚簇索引（您的堆是否有有效的用例？），并可能在具有聚簇索引的表上添加或更改现有索引。

我强烈建议您阅读 Grant Friitchey 的免费电子书 SQL Server 执行计划：

[http://www.sqlservercentral.com/articles/books/65831/](http://www.sqlservercentral.com/articles/books/65831/)

我还强烈建议您下载[SQL Sentry Plan Explorer](http://sqlsentry.net/plan-explorer/sql-server-query-view.asp)并尝试一下。与 SSMS 展示计划相比，有几个优势可以帮助您更快地识别和修复计划问题：

*   色标最昂贵的运营商
*   按 CPU、I/O 或两者显示成本明细
*   总是得到正确的百分比（在[许多情况](http://connect.microsoft.com/SQLServer/feedback/details/267530/ssms-execution-plan-sometimes-exceeds-100)下 SSMS[增加了超过 100%](http://connect.microsoft.com/SQLServer/feedback/details/370798/query-plan-iterator-cost-percentage-way-off)）
*   显示更有意义的交换信息（更确定的线宽，并显示行数或数据大小，而无需查看工具提示）
*   突出显示估计行和实际行之间的差异
*   突出显示昂贵的运算符，例如查找（并识别索引中缺少的列）
*   在生成实际计划时，我们包括运行时指标，例如 CPU / 持续时间 / 读取
*   还有很多其他的功能我不会在这里赘述...

*免责声明：我为 SQL Sentry 工作*

# performance - 如何测试 AS3 项目的性能？

> ID：14282702
> 
> 赞同：0
> 
> 时间：2013-01-11T16:43:12.593
> 
> 标签：performance, actionscript-3, flash-builder, flash

我在 AS3 中使用 Flash-Builder 完成了一个项目，现在我想测试我的 SWF 文件的性能。我认为在浏览器中打开它时它可以工作，但我不确定如何？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:01:44.257

查看 Adob​​e Scout： http: [//www.adobe.com/devnet/flashruntimes/articles/adobe-scout-getting-started.edu.html](http://www.adobe.com/devnet/flashruntimes/articles/adobe-scout-getting-started.edu.html)

[检查来自 Grant Skinner http://gskinner.com/blog/archives/2009/04/as3_performance.html](http://gskinner.com/blog/archives/2009/04/as3_performance.html)的以下链接

还有一个社区管理页面，用于速度测试。您可能还想看看这些[http://osflash.org/as3_speed_optimizations](http://osflash.org/as3_speed_optimizations)

# php - 使用 Mod rewrite 改变 url 路径如图

> ID：14282706
> 
> 赞同：0
> 
> 时间：2013-01-11T16:43:23.583
> 
> 标签：php, apache, mod-rewrite

我正在努力实现这一目标，

我的查询是

```
domain.com/forum.php?id=100000 
```

我想将其重写为

```
domain.com/forum/id/10000 
```

我试过这样做，

```
RewriteCond %{QUERY_STRING} id=(\d+) 
RewriteRule ^forum.php /%1/? [R=301] 
```

但我明白了

```
domain.com/10000. 
```

如果有人可以帮我解决这个问题，我真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:47:46.723

试试这个 - 如果你的网址如下所示

```
domain.com/forum/id/10000 
```

比规则将是

```
RewriteRule ^([a-zA-Z]+)$/([a-zA-Z]+)$/([a-zA-Z0-9-]+)$ $1.php?$2=$3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:53:14.370

把这个放在你的`.htaccess`

```
RewriteRule ^forum/([^/\.]+)/([^/\.]+)/?$ forum.php?$1=$2 
```

去

`http://domain.com/forum/id/10000`

您现在应该看到与访问时相同的输出

`http://domain.com/forum.php?id=10000`

# html - 一个 div 保持在另一个 div 之下

> ID：14282707
> 
> 赞同：-1
> 
> 时间：2013-01-11T16:43:27.040
> 
> 标签：html, css, stylesheet

我有一个 div，我想在其他主 div 的底部对齐

更新：这里是实际代码：

```
<div style="width: 800px; height: 400px;"> 
few more controls here
  <div style="height: 230px; ">

                    <bpcms:cmseditableregion runat="server" id="cms1" regiontitle="Content2"
                        regiontype="HtmlEditor" required="false" />
                </div>

                <div style="height: 50px; width: 800px; border: 2px solid #99CC00; font-size: 13px;
                    color: #ffbb33; overflow: hidden; padding: 5px 20px 5px 20px;">
                    <bpcms:cmseditableregion runat="server" id="cms2" regiontitle="Content1"
                        regiontype="TextBox" required="false" />
                </div>
</div> 
```

尽管给出了 innerdiv1 的固定高度，但 innerdiv 2 仍然根据内部 div 1 的内容不断向上移动

因此，如果 innerdiv1 中没有内容，则 innerdiv 2 完全向上移动。有没有办法在不使用绝对定位的情况下修复 innerdiv2 以保持在 innerdiv1 以下 250 像素。

解决方案也应该适用于所有 IE。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:47:22.903

这应该适用于您的第一个问题。

```
<div id="maindiv">
    <div id="innerdiv1" style="height:200px;">
        few dynamic controls here
    </div>
    <div id="innerdiv2" style="height:50px">
        This div should be just above footer.
    </div>
</div> 
```

编辑：

您可能想查看这些关于 html 和 css 的基本教程。

[http://www.w3schools.com/](http://www.w3schools.com/)

[http://www.w3schools.com/html/default.asp](http://www.w3schools.com/html/default.asp)

[http://www.w3schools.com/css/default.asp](http://www.w3schools.com/css/default.asp)

这应该适用于您编辑的问题：

看起来 div 标签上方的“这里有几个控件”正在将内容向下推，它应该放在 div 标签内。如果你不想这样，你可以将这些控件包装在一个 div 中并给它一个设定的高度。

```
<div style="width: 800px; height: 400px;">
    <div style="height: 230px;">
        few more controls here
        <!-- this content should be inside the div if you want the content to stay fixed.-->
        <bpcms:cmseditableregion runat="server" id="cms1" regiontitle="Content2" regiontype="HtmlEditor" required="false" />

    </div>

    <div style="height: 50px; width: 800px; border: 2px solid #99CC00; font-size: 13px;color: #ffbb33; overflow: hidden; padding: 5px 20px 5px 20px;">
        <bpcms:cmseditableregion runat="server" id="cms2" regiontitle="Content1"                         regiontype="TextBox" required="false" />
    </div>
</div> 
```

这可能是一种更清洁的方式。

```
<style>
.outer {
width: 800px;
height: 400px;
background-color:#eee;
}
.top {
height: 230px;
background-color:#fee;
}
.bottom {
height: 50px;
/*height actually 64px when including border and padding*/
width: 800px;
/*width actually 844px when including border and padding*/
border: 2px solid #99CC00;
/* padding adds 2 px to all sides for a total of 4px */
font-size: 13px;color:
#ffbb33;
overflow: hidden;
padding: 5px 20px 5px 20px;
/* padding adds 5px to top and bottom for a total of 10px
 * padding adds 20px to left and right sides for a total of 40px */
background-color:#fee;

}
</style>
<div class="outer">
<div class="top">
    few more controls here
    <bpcms:cmseditableregion runat="server" id="cms1" regiontitle="Content2" regiontype="HtmlEditor" required="false" />
    </div>
<div class="bottom">
    <bpcms:cmseditableregion runat="server" id="cms2" regiontitle="Content1" regiontype="TextBox" required="false" />
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:47:37.207

```
<div id="maindiv">
    <div id="innerdiv1" style="height:200px;">

    </div>
    <div id="innerdiv2" style="height:50px;">
    This div should be just above footer.
    </div>
</div> 
```

您的 HTML 不正确！

[***小提琴***](http://jsfiddle.net/vHwJW/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T16:47:42.427

使用 CSS

```
<style>
#innerdiv1 { height:200px;}
#innerdiv2 { height:50px;}
</style>

<div id=maindiv>
<div id=innerdiv1>
    few dynamic controls here
</div>
<div id=innerdiv2>
This div should be just above footer.
</div>
</div> 
```

你也可以使用这个

```
<div id=maindiv>
<div style="height:200px;">
    few dynamic controls here
</div>
<div style="height:50px;">
This div should be just above footer.
</div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T16:55:05.050

尝试在样式属性中设置高度。

```
<div style="height:250px;">
     above
</div>
<div style="height: 150px;">
     below
<div/> 
```

在此处查看示例和更多教程 [http://www.w3schools.com/css/tryit.asp?filename=trycss_dim_height](http://www.w3schools.com/css/tryit.asp?filename=trycss_dim_height)

# tfs - 如何使用 LIMIT 关键字在 WIQL 的 ms sql 中使用来查询 TFS 工作项

> ID：14282712
> 
> 赞同：6
> 
> 时间：2013-01-11T16:43:47.890
> 
> 标签：tfs, workitem, tfs-workitem, tfs-sdk, wiql

我正在研究 TFS API，我不知道 TFS API 有任何类似 LIMIT 关键字或没有的东西。我需要它来进行分页。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T12:20:35.657

TFS WIQL中没有与 SQL`LIMIT`关键字等效的东西，您需要自己实现分页。

一种方法是在第一次访问时检索所有结果，并将它们缓存并自己分页。

另一种方法是在每次用户页面时动态构建 WIQL 查询。例如：

1.  运行 WIQL 查询以仅返回与查询匹配的工作项 ID。`SELECT [System.Id] FROM WorkItems WHERE <conditions>`
2.  缓存该 ID 列表
3.  将该 ID 列表分成与您的分页大小相匹配的组
4.  每次您的用户页面时，通过 ID 显式请求工作项。`SELECT <fields> FROM WorkItems WHERE [System.Id] IN (10,11,12,13,14,15)`

根据您要实现的目标，您还应该知道 TFS 工作项跟踪 API 在幕后为字段值实现分页/延迟加载，以最大限度地延长响应时间。您可以通过附加网络嗅探器并在 Visual Studio 中滚动大型工作项查询来了解其工作原理。

有关详细信息，请参阅[字段值的分页](http://msdn.microsoft.com/en-US/library/bb130306.aspx#performance)：

> 您可以通过选择您的代码将使用的所有字段来最小化到服务器的往返行程。以下代码为查询进行一次往返，并在每次访问新页面时返回一页标题。

```
WorkItemCollection results = WorkItemStore.Query(
    "SELECT Title FROM Workitems WHERE (ID < 1000)");

foreach (WorkItem item in results)
{
    Console.WriteLine(item.Fields["Title"].Value);
} 
```

> 如果您的代码访问您未在 SELECT 子句中指定的字段，则该字段将添加到分页字段集中。执行另一个往返以刷新该页面以包含该字段的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-08T20:48:37.813

我遇到过同样的问题。我应用`Take`了序列以限制查询提供的结果。不幸的是，这实际上并没有限制数据库返回的结果，但是由于不支持该功能，它提供了一个可行的选项。

```
Me.mWorkItems.Query(pstrSQL).OfType(Of WorkItem)().Take(5) 
```

使用`Skip`和`Take`一起可以用于分页。

# html - 从 Firefox 17 升级到 Firefox 18 后站点闪烁

> ID：14282713
> 
> 赞同：0
> 
> 时间：2013-01-11T16:43:49.117
> 
> 标签：html, css, firefox, web-deployment

我有一个带有背景图片的网站，由 css 设置。在 Firefox 17 早期，当我按下提交按钮并重新加载页面时，看起来只有页面的一部分被替换，所有背景/菜单等都已到位。现在我有一个问题，当我首先提交表单时，所有页面都变成白色，然后所有页面都是从 skratch 绘制的。您有什么想法可以在 Firefox 中更改，是否可以以某种方式避免它？PS我不确定，我可以给网站链接，否则将被视为垃圾邮件。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:55:43.867

Firefox 真的很喜欢最快的重新加载之一。但请记住，这是一个浏览器问题，因此在 Firefox 中看起来很快的东西在 Safari 和 Opera 等其他浏览器中看起来不会那么快。

所以你唯一能做的就是尽可能快地加载你的布局。为此，我建议：

1.  确保在您的样式显示之前没有或几乎没有 javascript 正在运行。
2.  确保您的请求在服务器端得到妥善管理。仔细研究数据库查询并确保您的服务器在近 0 毫秒内处理页面请求。
3.  注意样式表中是否存在 CSS 函数，因为它们可能会在显示任何内容之前让 CPU 进入进程。
4.  最后但同样重要的是，尽量不要在页面之间下载太多。任何大量的 KB 下载都会降低您在切换页面时执行*“静止效果”*的机会。

我想这就是你能做的。:)

PS：当然，请仔细检查您的浏览器缓存配置。

# javascript - 在奇数位置制作动画时在 Chrome 中晃动图像

> ID：14282715
> 
> 赞同：6
> 
> 时间：2013-01-11T16:43:49.967
> 
> 标签：javascript, jquery, css, google-chrome, jquery-animate

我正在尝试创建某种遮罩动画，其中图像从其中心显示（**编辑：** “中心”不一定表示实际背景图像的中心，而是可见区域的中心！**/edit**）。到目前为止它运行良好，唯一的问题是在 Chrome 中（目前在 Windows 7 x64 上为 24.0.1312.52m）显示的内容在晃动。

这是一个 jsfiddle 示例：http: [//jsfiddle.net/BaKTN/](http://jsfiddle.net/BaKTN/)

到目前为止，我发现这可以通过不禁用`background-repeat`（[http://jsfiddle.net/BaKTN/1/](http://jsfiddle.net/BaKTN/1/)）来解决。不确定内部到底发生了什么，但这会使图像保持在它所属的位置。不幸的是，这只是问题的一半，当外部容器放置在奇数坐标上时会再次发生晃动，例如，在使用基于百分比的定位时会发生这种情况（至少在内部坐标可能是奇数）。

这是另一个显示此行为的 jsfiddle 示例：http: [//jsfiddle.net/VbgXB/](http://jsfiddle.net/VbgXB/)

**编辑：**使用固定定位似乎有帮助，即使有更多的外部容器会导致奇怪的坐标，一切看起来都很好。然而，这种解决方法当然只是有条件地有用，因为它会打乱滚动：http: [//jsfiddle.net/BaKTN/5/](http://jsfiddle.net/BaKTN/5/)。所以我还在寻找另一个技巧。**/编辑**

任何想法实际上是什么导致了这个问题以及如何在不改变容器坐标的情况下绕过它？这可能与这个错误有关：[http](http://code.google.com/p/chromium/issues/detail?id=140038) ://code.google.com/p/chromium/issues/detail?id=140038 ？

附言。请注意，这是为了成为需要保持 CSS2 兼容的较大动画（多个图块）的一部分！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T16:54:25.410

这可能是由于背景位置的部分像素值。四舍五入的值似乎可以解决它：http: [//jsfiddle.net/BaKTN/2/](http://jsfiddle.net/BaKTN/2/)

```
(function($) {
  $.extend($.fx.step,{
    backgroundPosition: function(fx) {
      if (typeof fx.end == 'string') {
        var start = $.css(fx.elem,'backgroundPosition');
        start = toArray(start);
        fx.start = [start[0],start[2]];
        var end = toArray(fx.end);
        fx.end = [end[0],end[2]];
        fx.unit = [end[1],end[3]];
      }
      var nowPosX = []; 
```

**相关代码**

```
 nowPosX[0] = Math.round(((fx.end[0] - fx.start[0]) * fx.pos) + fx.start[0]) + fx.unit[0];
      nowPosX[1] = Math.round(((fx.end[1] - fx.start[1]) * fx.pos) + fx.start[1]) + fx.unit[1]; 
```

**结束相关代码**

```
 fx.elem.style.backgroundPosition = nowPosX[0]+' '+nowPosX[1];

      function toArray(strg){
        strg = strg.replace(/left|top/g,'0px');
        strg = strg.replace(/right|bottom/g,'100%');
        strg = strg.replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");
        var res = strg.match(/(-?[0-9\.]+)(px|\%|em|pt)\s(-?[0-9\.]+)(px|\%|em|pt)/);
        return [parseFloat(res[1],10),res[2],parseFloat(res[3],10),res[4]];
      }
    }
  });
})(jQuery); 
```

**编辑**- 将您的`#container`位置转换为（整个）像素而不是百分比将修复第二种情况，但在调整窗口大小时它不会调整其位置：http: [//jsfiddle.net/VbgXB/1/](http://jsfiddle.net/VbgXB/1/)

```
var $con = $("#container");
$con.css({
  left: Math.round($con.position().left),
  top: Math.round($con.position().top)
}); 
```

# mysql - 如何从存储库在 Ubuntu 12.04 服务器中安装 MySQL 5.1

> ID：14282717
> 
> 赞同：3
> 
> 时间：2013-01-11T16:44:04.163
> 
> 标签：mysql, installation, ubuntu-12.04, ubuntu-server, mysql-5.1

我需要在 Ubuntu Server 中安装 MySQL 5.1。我在其他问题中看到使用 *deb [http://packages.dotdeb.org](http://packages.dotdeb.org) lenny all* 但它不起作用。还有其他仓库吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-30T14:59:28.397

尝试这个

```
#!/bin/bash

set -e

cd ~/
wget http://downloads.mysql.com/archives/mysql-5.1/mysql-5.1.65.tar.gz
tar -zxf mysql-5.1.65.tar.gz
cd mysql-5.1.65
./configure  '--prefix=/usr' '--exec-prefix=/usr' '--libexecdir=/usr/sbin' '--datadir=/usr/share' '--localstatedir=/var/lib/mysql' '--includedir=/usr/include' '--infodir=/usr/share/info' '--mandir=/usr/share/man' '--with-system-type=debian-linux-gnu' '--enable-shared' '--enable-static' '--enable-thread-safe-client' '--enable-assembler' '--enable-local-infile' '--with-fast-mutexes' '--with-big-tables' '--with-unix-socket-path=/var/run/mysqld/mysqld.sock' '--with-mysqld-user=mysql' '--with-libwrap' '--without-readline' '--with-ssl' '--without-docs' '--with-extra-charsets=all' '--with-plugins=max' '--with-embedded-server' '--with-embedded-privilege-control'
make
sudo make install 
```

# mysql - 如何每个唯一字段仅选择 1 行（另一个字段确定在重复的情况下哪个字段）

> ID：14282718
> 
> 赞同：1
> 
> 时间：2013-01-11T16:44:06.167
> 
> 标签：mysql, sql, pdo, greatest-n-per-group

我环顾四周，我不确定是否需要某种 IF 语句、LIMIT 语句或完全不同的东西。

**情况**

我有一个看起来像这样的数据库：

```
id    |   elem_id   |  elem_data  | draft
1     |  uniq1234   |  examplestr |   0
2     |  uniq1653   |  examplestr |   1
3     |  uniq9964   |  examplestr |   0
4     |  uniq1234   |  examplestr |   1 
```

等等等等...

**我的意图**

我只想为每个 unique 选择一行`elem_id`。如果存在两个，我想选择一个草稿值为 1 的。（因此，对于上表中的查询，它将找到 elem_id 的两次出现`uniq1234`并选择草稿值为 1 的那个（即，第 4 行））。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:49:18.960

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  elem_ID, MAX(`Draft`) maxDraft
            FROM tableName
            GROUP BY elem_ID
        ) b ON a.elem_ID = b.elem_ID AND
                a.`draft` = b.maxDraft 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/774f7/1)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-11T16:49:36.007

如果你总共只选择 1 行，你可以用`ORDER`魔法做到这一点

```
SELECT
  id,
  elem_id,
  elem_data,
  draft
FROM your_table
WHERE elem_id = 'uniq1234'
ORDER BY draft DESC
LIMIT 1 
```

如果要在结果中获取多行，请按 分组`elem_id`以获取最大草稿，然后嵌套该子查询

```
SELECT
  a.id,
  a.elem_id,
  a.elem_data,
  a.draft
FROM your_table a,
(SELECT
   b.elem_id,
   MAX(b.draft) as m
 FROM your_table b
 GROUP BY b.elem_id) sub
WHERE a.elem_id = sub.elem_id
  AND a.draft = sub.m 
```

# asp.net - 找不到文件的应用程序错误？

> ID：14282719
> 
> 赞同：1
> 
> 时间：2013-01-11T16:44:07.397
> 
> 标签：asp.net, global-asax

我从我的同事那里接手了一个 asp.net 项目。当我开始运行项目时，Global.asax.cs 中的 Application_Error() 会抛出一个错误，指出文件不存在。有人建议使用 HttpContext.Current.Request.Url.ToString() 来获取丢失文件的文件路径。它返回了 favicon.ico。我不确定这意味着什么，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:46:33.777

这意味着您在所需路径处缺少 favicon.ico 文件。在 error throw 中，它会显示一个完整的路径。请检查您是否在指定位置有该文件。如果存在，请检查其属性是隐藏还是只读。问题必须仅与您丢失的文件有关。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:55:40.753

Internet Explorer（可能是其他浏览器）总是在 favicon.ico 上请求。如果找到此文件，它将显示为选项卡或窗口的图标。

您可以创建一个网站图标并将其放在您网站的根目录下。

或者也许只是对 Application_Error 上的 404 错误不做任何事情。

参见[维基百科上的图标](http://fr.wikipedia.org/wiki/Favicon)

# node-mongodb-native - 光标有问题

> ID：14282722
> 
> 赞同：0
> 
> 时间：2013-01-11T16:44:21.467
> 
> 标签：node-mongodb-native

我尝试一个接一个地获取两个文档。出于测试目的，我将 batchSize 设置为 1。而且我无法获取第二份文件。但是，当我将 batchSize 设置为 2 时，它会毫无问题地返回第二个文档。

```
mongoClient.connect('mongodb://127.0.0.1:27017/mydb?w=1&journal=true&wtimeout=4000',server:{auto_reconnect:true, poolSize:2}}, function(err, db){
var cursor = db.collection('coll').find({},{},{batchSize:1});
    cursor.nextObject(function(e, doc)
    {
         console.log(doc);
         //We successfully fetched the first document and now it's time to get the second  one
         cursor.nextObject(function(e, doc2)
         {
            //It returns NULL!
            console.log(doc2);
         });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:41:37.933

我找到了这种奇怪而愚蠢的行为的原因。这恰好是故意的行为。 [http://docs.mongodb.org/manual/reference/method/cursor.batchSize/](http://docs.mongodb.org/manual/reference/method/cursor.batchSize/)

> 指定 1 或负数类似于使用 limit() 方法。

# java - URLClassLoader 和包私有方法的可访问性

> ID：14282726
> 
> 赞同：16
> 
> 时间：2013-01-11T16:44:36.863
> 
> 标签：java, package, classpath, classloader

我有一个类`Formula`，位于 package`javaapplication4`中，我使用 URLClassLoader 加载它。但是，当我从位于同一个包中的另一个类调用它时`Test1`，我无法访问其具有默认访问修饰符的方法（我可以访问公共方法）。

我得到以下异常：

> java.lang.IllegalAccessException：类 javaapplication4.Test1 无法使用修饰符“”访问类 javaapplication4.Formula 的成员

**如何访问在运行时从同一个包加载的类的包私有方法？**

我想这是使用不同的类加载器的问题，但不知道为什么（我已经设置了 URLClassLoader 的父级）。

SSCCE 重现问题（Windows 路径） - 我想问题出在`loadClass`方法中：

```
public class Test1 {

    private static final Path TEMP_PATH = Paths.get("C:/temp/");

    public static void main(String[] args) throws Exception {
        String thisPackage = Test1.class.getPackage().getName();
        String className = thisPackage + ".Formula"; //javaapplication4.Formula
        String body = "package " + thisPackage + ";   "
                    + "public class Formula {         "
                    + "    double calculateFails() {  "
                    + "        return 123;            "
                    + "    }                          "
                    + "    public double calculate() {"
                    + "        return 123;            "
                    + "    }                          "
                    + "}                              ";

        compile(className, body, TEMP_PATH);
        Class<?> formulaClass = loadClass(className, TEMP_PATH);

        Method calculate = formulaClass.getDeclaredMethod("calculate");
        double value = (double) calculate.invoke(formulaClass.newInstance());
        //next line prints 123
        System.out.println("value = " + value);

        Method calculateFails = formulaClass.getDeclaredMethod("calculateFails");
        //next line throws exception:
        double valueFails = (double) calculateFails.invoke(formulaClass.newInstance());
        System.out.println("valueFails = " + valueFails);
    }

    private static Class<?> loadClass(String className, Path path) throws Exception {
        URLClassLoader loader = new URLClassLoader(new URL[]{path.toUri().toURL()}, Test1.class.getClassLoader());
        return loader.loadClass(className);
    }

    private static void compile(String className, String body, Path path) throws Exception {
        List<JavaSourceFromString> sourceCode = Arrays.asList(new JavaSourceFromString(className, body));

        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
        StandardJavaFileManager fileManager = compiler.getStandardFileManager(null, null, null);
        fileManager.setLocation(StandardLocation.CLASS_OUTPUT, Arrays.asList(path.toFile()));
        boolean ok = compiler.getTask(null, fileManager, null, null, null, sourceCode).call();

        System.out.println("compilation ok = " + ok);
    }

    public static class JavaSourceFromString extends SimpleJavaFileObject {
        final String code;

        JavaSourceFromString(String name, String code) {
            super(URI.create("string:///" + name.replace('.', '/') + JavaFileObject.Kind.SOURCE.extension),
                    JavaFileObject.Kind.SOURCE);
            this.code = code;
        }

        @Override
        public CharSequence getCharContent(boolean ignoreEncodingErrors) {
            return code;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T17:00:35.200

运行时的类由其完全限定名称和 ClassLoader 标识。

例如，当您测试两个`Class<T>`对象的相等性时，如果它们具有相同的规范名称但从不同的 ClassLoader 加载，它们将不相等。

对于属于同一个包的两个类（进而能够访问包私有方法），它们也需要从同一个 ClassLoader 加载，这里不是这种情况。实际上`Test1`是由系统类加载器加载的，而公式是由内部创建的 URLClassLoader 加载的`loadClass()`。

如果您为 URLClassLoader 指定父加载器以使其加载`Test1`，仍然使用两个不同的加载器（您可以通过断言加载器相等来检查它）。

我不认为你可以让`Formula`同一个`Test1`ClassLoader 加载类（你必须使用众所周知的路径并将其放在 CLASSPATH 上），但我找到了一种相反的方法：加载另一个`Test1`in实例用于加载公式的 ClassLoader。这是伪代码中的布局：

```
class Test1 {

  public static void main(String... args) {
    loadClass(formula);
  }

  static void loadClass(location) {
    ClassLoader loader = new ClassLoader();
    Class formula = loader.load(location);
    Class test1 = loader.load(Test1);
    // ...
    Method compute = test1.getMethod("compute");
    compute.invoke(test1, formula);
  }

  static void compute(formula) {
    print formula;
  }
} 
```

这是[pastebin](http://pastebin.com/eN5DyBrC)。一些注意事项：我`null`为 URLClassLoader 指定了一个父级以避免上面列出的问题，并且我操纵了字符串来达到这个目的 - 但不知道这种方法在其他部署场景中的鲁棒性如何。此外，我使用的 URLCLassLoader 仅在两个目录中搜索以查找类定义，而不是 CLASSPATH 中列出的所有条目

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-11T17:38:30.300

答案是：

在`sun.reflect.Reflection`包中有一个方法称为`isSameClassPackage`（实际签名是 `private static boolean isSameClassPackage(ClassLoader arg0, String arg1, ClassLoader arg2, String arg3);`）。该方法负责决定两个类是否属于同一个包。

首先检查此方法是否比较 arg0 和 arg2（两个类加载器），如果它们不同，则返回 false。

因此，如果您对两个类使用不同的类加载器，它将不匹配。

编辑：完整的调用链（根据要求）是：

```
Method.invoke()
Method.checkAccess() -- fallback to the real check
Method.slowCheckMemberAccess()   -- first thing to do to call
Reflection.ensureMemberAccess()  -- check some nulls, then
Reflection.verifyMemberAccess()  -- if public, it,'s OK, otherwise check further
Reflection.isSameClassPackage(Class, Class) -- get the class loaders of 2 classes
Reflection.isSameClassPackage(ClassLoader, String, ClassLoader, String) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T17:47:09.000

[我在JVM 规范 5.4.4](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.4.4-200)（强调我的）中找到了解释：

> 当且仅当以下任一条件为真时，类或接口 D 才能访问字段或方法 R：
> 
> *   [...]
> *   R 要么是受保护的，要么具有默认访问权限（即既不是公共的，也不是受保护的，也不是私有的），并且由与 D**相同的运行时包中的类声明。**

运行时包在[规范 #5.3](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.3-300)中定义：

> 类或接口的运行时包由包名**和定义类**或接口的类加载器决定。

底线：这是预期的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T01:57:30.817

添加`c:\temp`到 java 类路径并使用与 Test1.class 相同的 ClassLoader 加载 Formula.class

```
Class<?> formulaClass = Class.forName(className); 
```

这将解决您的问题。

# wordpress - Wordpress 媒体上传错误

> ID：14282730
> 
> 赞同：0
> 
> 时间：2013-01-11T16:45:06.717
> 
> 标签：wordpress

我在将大图像上传到 WordPress 3.5 时遇到问题，我收到以下错误：

> 上传时发生错误。请稍后再试。

*   我检查了上传文件夹的权限，它们是正确的（甚至尝试将它们设置为 777）

*   我尝试禁用所有插件，切换回默认主题并将各种代码行添加到 .htaccess 文件夹。

*   我也尝试了[这篇文章中](http://www.hongkiat.com/blog/wordpress-25-image-upload-error-wordpress-fix/)的建议。

如果我尝试在本地上传文件，它可以工作，如果我在不同的服务器上尝试它，它可以工作。谁能告诉我可能是什么原因造成的？它仅发生在具有大文件大小的文件上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T07:55:51.917

检查你的function.php文件（重命名它）然后检查它的工作。然后你在function.php中有问题我通过这解决了我的问题可能对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T14:13:25.873

事实证明，这是我们使用的托管服务提供商以及如何设置服务器的问题。我们搬到了不同的托管服务提供商，一切都按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T07:11:52.013

请检查 php.ini 值

`echo ini_get('upload_max_filesize') ; echo ini_get('post_max_size'); echo ini_get('memory_limit');`

如果它的值小于然后使用下面的代码来增加值

`ini_set('upload_max_filesize', '128M'); ini_set('post_max_size', '128M'); ini_set('memory_limit', '512M');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-02T02:14:05.717

尝试增加 PHP.INI Builder 中的 upload_file_maxsize 和 max_execution_time 值。此外，您还可以尝试在媒体设置中禁用“将缩略图裁剪为精确尺寸（通常缩略图是成比例的）”。[http://debug.ga/wordpress-media-upload-errors-part-2/](http://debug.ga/wordpress-media-upload-errors-part-2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-23T18:58:59.053

在服务器上编辑 php.ini 解决了我的问题。它涉及到大图像的问题。检查upload_max_filesize 等。正如jogesh_pi 所说。

# azure - 如何在 Windows Azure 中只升级单个 webrole 实例

> ID：14282731
> 
> 赞同：2
> 
> 时间：2013-01-11T16:45:07.153
> 
> 标签：azure, azure-web-roles

我创建了 Azure 项目。使用两个实例创建了一个 Web 角色。我已经从 VS2010 发布了两个实例。现在我想通过关闭站点来更新角色的另一个实例。请尽快帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:48:29.503

您无法更新一个实例。这就是为什么你有生产和暂存槽的原因。将您的新代码上传到暂存槽，在仪表板的临时 URL 上检查它。然后，高兴的时候，交换VIP。最后，删除现在暂存槽中的旧代码。

负载均衡器实际上会在 VIP SWAP 之后将用户移动到新实例，以获得不间断的用户体验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T17:46:10.227

尽管 VIP 交换是首选方法（因为回滚更容易），但它可以在不使用暂存槽和生产槽的情况下完成。

如果您在一个角色中拥有多个实例，则在您部署结构控制器时，它将为您处理所有事情。它将确保一次升级一个实例。

如果您查看云服务实例选项卡上的两个实例，您将看到它们位于不同的更新（和故障）域中。（升级和更新域是一回事——MS 在文档、api 和门户中交替使用它）。结构控制器在启动另一个域之前升级一个域中的所有机器。这种情况下会升级一个实例，只有升级成功后，才会开始升级另一个实例。有关详细信息，请参阅[更新 Windows Azure 服务概述](http://msdn.microsoft.com/en-gb/library/windowsazure/hh472157.aspx#howanupgradeproceeds)。

简短的回答是，只要您配置了多个实例，您就不必担心站点因升级或故障而关闭。用一个简单的项目试试这个，你会发现它按预期工作。

# case - 使用 CASE 语句组合数据

> ID：14282737
> 
> 赞同：1
> 
> 时间：2013-01-11T16:45:25.113
> 
> 标签：case

我有以下代码。目的是获取 AML_TYP_CD 字段中的数据，这是他们完成的教育水平。20 和 25 与 30/35/ 40/45 相同，我需要编写一个案例语句将它们一起计数，这样 25 将返回为 20 等，然后还有大约 50 个其他教育水平代码我需要消除。最好的方法是什么，因为我正在编写的 CASE 语句不起作用。CASE 语句将进入 SELECT 子句，我写的那个不起作用的是

```
CASE WHEN (AML_TYP_CD) = '20' OR '25' THEN Bachelors ELSE NULL END) As Bach_Degree 
```

其余的代码是：

```
 SELECT     dbo.TACCPLI.SYS_EMP_ID_NR, MAX(dbo.TACCPLI.AML_TYP_CD) AS DEG
FROM         dbo.TACCPLI INNER JOIN
                          (SELECT     dbo.v_TMS_employee_HR.GEMSID, dbo.v_TMS_employee_HR.TMS_ID
                            FROM          dbo.v_TMS_employee_HR INNER JOIN
                                                   dbo.v_sc17_TMS_Data_Career_Meeting_Rating ON 
                                                   dbo.v_TMS_employee_HR.TMS_ID = dbo.v_sc17_TMS_Data_Career_Meeting_Rating.Employee_ID
                            WHERE      (LEFT(dbo.v_sc17_TMS_Data_Career_Meeting_Rating.Meeting_Readiness_Rating, 2) IN ('14', '15')) AND 
                                                   (dbo.v_TMS_employee_HR.Job_Group_Code >= '72') AND (dbo.v_TMS_employee_HR.Job_Group_Code <= '79') AND 
                                                   (dbo.v_sc17_TMS_Data_Career_Meeting_Rating.Plan_Year = 2012) AND (dbo.v_TMS_employee_HR.Region NOT IN ('12', '13', '16', '17'))
                            GROUP BY dbo.v_sc17_TMS_Data_Career_Meeting_Rating.Meeting_Readiness_Rating, dbo.v_TMS_employee_HR.GEMSID, dbo.v_TMS_employee_HR.TMS_ID) 
                      AS HPS ON dbo.TACCPLI.SYS_EMP_ID_NR = HPS.TMS_ID
GROUP BY dbo.TACCPLI.SYS_EMP_ID_NR 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:49:21.390

你的语法是错误的。你会想要这样的东西：

```
SELECT 
    CASE WHEN AML_TYP_CD = '20' OR AML_TYP_CD = '25' THEN 'Bachelor''s' 
         WHEN AML_TYP_CD = '30' OR AML_TYP_CD = '35' THEN 'Whatever'
         --Other cases
         WHEN AML_TYP_CD = '90' OR AML_TYP_CD = '95' THEN 'Something'
         ELSE 'Other'
    END AS Degree 
```

或者在我看来更干净一点：

```
SELECT 
    CASE WHEN CONVERT(INT, AML_TYP_CD) < 30 THEN 'Bachelor''s' 
         WHEN CONVERT(INT, AML_TYP_CD) < 40 THEN 'Whatever'
         --Other cases
         WHEN CONVERT(INT, AML_TYP_CD) < 100 THEN 'Something'
         ELSE 'Other'
    END AS Degree 
```

# javascript - 在 JavaScript 中覆盖 function.toString 时我应该担心吗？

> ID：14282739
> 
> 赞同：2
> 
> 时间：2013-01-11T16:45:29.730
> 
> 标签：javascript, function, overloading

当我在 JavaScript 中编写函数包装器（例如：a`throttle`或`debounce`函数）时，我希望能够检查“装饰”函数并且仍然能够知道底层函数是什么。以一个实现`throttle`为例：

```
function throttle(fn, time) {
  var handle;

  var execute = function() {
    handle = null;
    fn.apply(this, arguments);
  };

  var throttled = function() {
    if(!handle) {
      handle = setTimeout(execute.bind(this), time);
    }
  };

  throttled.toString = function() {
    return fn.toString() + "\n// throttled to " + time + "ms";
  };

  return throttled;
}

var makeAjax = throttle(function(callback) {
  $.getJSON("/path", callback);
}, 500);

console.log(makeAjax); 
```

`console.log`来电显示：

```
function (callback) {
  $.getJSON("/path", callback);
}
// throttled to 500ms 
```

作为一个用户，`throttle`我更关心我给它的功能，而不是它的内部`throttled`。

但是，在覆盖原生函数时，我总是感到有些不安。执行此操作时，我是否应该担心任何合规性和/或性能问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T17:11:43.337

在 Mozilla Developer Group 中，他们更多地讨论了覆盖 toString()。 [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString)

我认为这里可能存在的问题是创建自动化单元测试（我的经验仅限于 NUnit Selenium），您可能无法使用私有 .toString() 或者它可能导致不稳定的测试结果？调试也可能是一个问题！

要覆盖其他具有方法的本地 js 函数，您可能还需要手动扩展所有方法以替换被覆盖的内容。

Addy Osmani 在他的“学习 JavaScript 设计模式”一书中进一步讨论了这一点，[http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript)

# core-data - 如何从 RestKit 托管对象存储中删除对象

> ID：14282741
> 
> 赞同：0
> 
> 时间：2013-01-11T16:45:39.993
> 
> 标签：core-data, restkit, nsmanagedobject

我正在使用 RestKit 0.2 从我的服务器获取 JSON 文件并将对象映射到我的 CoreData 堆栈（类似于[TwitterCoreData](https://github.com/RestKit/RestKit/tree/master/Examples/RKTwitterCoreData)示例）。

在第一个请求中，我得到以下结果：`Artist1, Artist2, Artist3`.

在第二个请求中，一位艺术家已过时，结果如下所示`Artist1, Artist3`：

现在`Artist2`应该从我的本地商店中删除并消失在我的`UITableView`. 但是，我找不到`Artist2`从本地存储中删除的方法。

如何从托管对象存储中删除 RestKit 0.2 中的对象？

这就是我正在做的事情：

```
#pragma mark - Data methods
- (void)fetchResults {
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Artists"];
NSSortDescriptor *descriptor = [NSSortDescriptor sortDescriptorWithKey:@"ordernr" ascending:YES];
fetchRequest.sortDescriptors = @[descriptor];
NSError *error = nil;

// Setup fetched results
self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                                                    managedObjectContext:[RKManagedObjectStore defaultStore].mainQueueManagedObjectContext
                                                                      sectionNameKeyPath:nil
                                                                               cacheName:nil];
[self.fetchedResultsController setDelegate:self];
BOOL fetchSuccessful = [self.fetchedResultsController performFetch:&error];

if(fetchSuccessful){
    data = [self.fetchedResultsController fetchedObjects];
    [_tableView reloadData];
    NSLog(@"Fetched artists: %i", [[self.fetchedResultsController fetchedObjects] count]);
}
}

- (void)loadData {
[[RKObjectManager sharedManager] getObjectsAtPath:@"/artists.php" parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {

     NSLog(@"Fetched artists: %i", [[mappingResult array] count]);

    for (id object in data) {
        if (NO == [[mappingResult array] containsObject:object]){
            NSLog(@"DELETE 1 object...");
            //HOW TO DELETE THE OBJECT HERE??
        }
    }

    [[NSUserDefaults standardUserDefaults] setObject:[NSDate date] forKey:@"ArtistsLastUpdatedAt"];
    [[NSUserDefaults standardUserDefaults] synchronize];

    [self fetchResults];

} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    RKLogError(@"Load failed with error: %@", error);
}];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:14:01.903

尝试以下操作：

```
NSManagedObjectContext *context = object.managedObjectContext;

[context deleteObject:object];

NSError *error;
if (![context save:&error]) {

NSLog(@"delete error");

// Handle the error, update UI etc.

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T11:03:57.433

我首先遵循亚历山大的回答的建议，但它只是从当前上下文中删除对象。重新启动应用程序后，将再次从核心数据中获取对象。

因此，您应该将更改保存到持久存储：

```
NSManagedObjectContext *context = objectToBeDeleted.managedObjectContext;
[context deleteObject:objectToBeDeleted];
NSError *error;
if (![context saveToPersistentStore:&error]) {
    NSLog(@"delete error %@", [error localizedDescription]);
} 
```

# zend-framework - 如何在 Zend Front Controller 插件中使用来自另一个模块的类？

> ID：14282745
> 
> 赞同：0
> 
> 时间：2013-01-11T16:45:58.837
> 
> 标签：zend-framework

我们目前正在将我们的应用程序（基于 Zend 框架 1.11）重新组织成一个模块化结构，并且遇到了一个问题，即我们需要能够在该模块的自动加载器注册之前使用该模块内的资源。

例如，我们有一个前端控制器插件来检查用户的登录状态..

```
class Application_Plugin_LoginCheck extends Zend_Controller_Plugin_Abstract {

    public function preDispatch(Zend_Controller_Request_Abstract $request) {

        // ACL-lookup code which ultimately retrieves Othermodule_Model_User 
        // from session
        // Othermodule_Model_User is not defined
    }
} 
```

我们需要`Othermodule_Model_User`在这一点上可用，但似乎自动加载器`Othermodule`在引导序列之前不会被注册。

同样，同样的问题阻止我们在任何给定模块的引导类中使用来自任何其他模块的类。

在 Zend Framework 应用程序中实现这种设置的正确方法是什么？

引导是使用 Zend 的应用程序引导和模块引导类完成的。我在下面举了一个例子——我认为我们没有做任何不寻常的事情。

应用程序引导：

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap {

    protected function _initDb() {...}

    protected function _initConfig() {...}

    protected function _initLog() {...}

    protected function _initMvcStaticRoutes() {...}

    protected function _initRestRoute() {...}

    protected function _initTranslate() {...}

    public function _initActionHelpers() {...}

    public function _initViewHelpers() {...} 
} 
```

模块引导：

```
class Account_Bootstrap extends Zend_Application_Module_Bootstrap { 
    protected function _initTranslate() {
        ...
    }
} 
```

该插件已在应用程序配置中注册

```
resources.frontController.plugins.logincheck.class = "Application_Plugin_LoginCheck" 
```

# c - gtk+ win32 线程

> ID：14282748
> 
> 赞同：0
> 
> 时间：2013-01-11T16:46:05.123
> 
> 标签：c, winapi, gtk, pthreads

来自[http://developer.gnome.org/gdk/unstable/gdk-Threads.html](http://developer.gnome.org/gdk/unstable/gdk-Threads.html)

> 使用 Win32 后端，根本不应尝试从多个线程调用 GDK。

但是如何避免界面冻结呢？

例如，我有一个从主机获取虚拟机名称并将其逐行添加到树列表视图的按钮的回调。我创建了执行此操作的 pthread 并添加了行。

**有时**列表视图变成垃圾（一些单元格变成空白），之后所有应用程序的行为都相同（所有对话框等）

由于在 WIN32 中多线程是不可能的，我该怎么做才能模拟它或避免此类问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:51:52.030

只是为了回答这个问题：

> ```
> But how to avoid freezing of an interface? 
> ```

独立于您用于 UI 的工具包，这是通过在与 UI 线程不同的线程中进行计算来实现的。然后通过使用消息来更新 UI 以反映数据中的更改。切勿从与创建窗口的线程不同的线程更新 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:52:19.327

最简单的方法是像你一样做一个线程，然后从那里添加你想要传递给 GUI 的任何东西到一个全局容器。然后调用`g_idle_add()`调度一个函数来读取这个容器并更新 GUI；空闲回调将从 GUI 线程调用。

有两点需要注意：

1.  在程序的初始化中调用`g_thread_init()`或`gdk_thread_init()`使 glib 线程安全。
2.  使用互斥锁保护全局容器。

# matplotlib - 如何将 AxesGrid 用于不同大小的轴

> ID：14282751
> 
> 赞同：0
> 
> 时间：2013-01-11T16:46:23.990
> 
> 标签：matplotlib

我想画一个二次图。它应该有 13 个轴，一个是 2x2，另一个是 1x1 大小（相对单位）。例如，它应如下所示：

```
+---+-+-+
|   +-+-+
+-+-+-+-+
+-+-+-+-+
+-+-+-+-+ 
```

我一直在尝试 AxesGrid，但是使用`show_all=True`，左上角也充满了四个轴，如果我设置`show_all=False`，我的图上根本没有任何轴。

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:32:37.583

I would suggest using `gridspec` instead ([tutorial](http://matplotlib.org/users/gridspec.html)).

```
import matplotlib.gridspec as gridspec
gs = gridspec.GridSpec(4, 4)

ax_big = plt.subplot(gs[0:2, 0:2])
rest_of_axes = []
for j in range(2,4):
    for k in range(0,4):
        rest_of_axes.append(plt.subplot(gs[j,k]))

for k in range(2,4):
    for j in range(0,2):
        rest_of_axes.append(plt.subplot(gs[j,k])) 
```

# c# - 转换为类型 T 我有 T 的字符串名称

> ID：14282753
> 
> 赞同：0
> 
> 时间：2013-01-11T16:46:35.020
> 
> 标签：c#, reflection

> **可能重复：**
> [从字符串名称在程序集中创建类实例](https://stackoverflow.com/questions/12433451/create-class-instance-in-assembly-from-string-name)

使用类型的字符串表示`MyClass`我想`MyClass`从它的字符串表示中创建一个实例。

请参阅我的代码中的注释：

```
interface MyData
{
    string Value { get; }
}

class MyClass : MyData
{
    public MyClass(string s)
    {
        Value = s;
    }

    public string Value { get; private set; }

    public static explicit operator MyClass(string strRep)
    {
        return new MyClass(strRep);
    }

    public static implicit operator string(MyClass inst)
    {
        return inst.Value;
    }
}

class Program
{
    static void Main(string[] args)
    {
        MyClass inst = new MyClass("Hello World");

        string instStr = inst; //string representation of MyClass
        string instTypeStr = inst.GetType().FullName;

        // I want to be able to do this:
        MyData copyInst = (instTypeStr)instStr; // this would throw an error if instTypeStr did not inherit MyData

        // Then eventually:
        if (instTypeStr.Equals("MyClass"))
        {
            MyClass = (MyClass)copyInst;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:48:39.463

你可以使用`Activator.CreateInstance`方法

链接： http: [//msdn.microsoft.com/fr-fr/library/d133hta4 (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/d133hta4(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:16:56.500

您应该了解[序列化](http://msdn.microsoft.com/en-us/library/vstudio/ms233843.aspx)。

要将您的类数据保存为字符串，您应该将您的对象*序列化为字符串。*`MyClass`要从字符串中检索您的类数据，您应该从字符串中*反序列*化您的`MyClass`对象。

[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)将为您提供帮助

# android - AndroidPlot：是否可以直接绘制到位图（从不在屏幕上绘制/显示）？

> ID：14282754
> 
> 赞同：0
> 
> 时间：2013-01-11T16:46:44.103
> 
> 标签：android, bitmap, plot, draw, androidplot

我在使用 AndroidPlot 将各种绘图绘制到显示器上以及将该绘图捕获到画布并保存为 JPG 文件方面取得了巨大成功。感谢所有相关人员提供了一个很棒的实用程序！

我一直在努力解决在后台创建和保存绘图到位图的需要（没有将它绘制到屏幕上或在屏幕上显示） - 用于记录目的。

我难住了！ ***可以这样做***还是我在吠叫错误的树？

...任何提示、提示或建议将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:20:35.240

编辑：我错了 - EvZ 提到的解决方案非常有效。我测试了自己并且能够从以编程方式创建的 XYPlot 生成位图。我通过编写一个由 Button 和 ImageView 组成的简单应用程序进行了测试。当按下按钮时，XYPlot 实例的 redraw() 方法被调用并检索它的位图。这是该按钮处理程序的外观：

```
public void onClick(View view) {
  plot.setDrawingCacheEnabled(true);
  plot.buildDrawingCache(true);
  Bitmap cache = plot.getDrawingCache();
  Bitmap b = Bitmap.createBitmap(cache);
  plot.redraw();
  displayImg.setImageBitmap(b);
  plot.setDrawingCacheEnabled(false); // clear drawing cache
} 
```

要确保的一件事是在使用按钮之前为绘图实例分配大小：

```
// creates a 200x200 bitmap:
plot.layout(0, 0, 200, 200); 
```

# coldfusion - 如何在 Coldfusion 中解码法语 html 实体

> ID：14282755
> 
> 赞同：2
> 
> 时间：2013-01-11T16:46:53.240
> 
> 标签：coldfusion, decode

我尝试了一些不同的东西，包括 urldecode() 以及这个问题的一些不同答案：[Decode Numeric HTML Entities in ColdFusion？](https://stackoverflow.com/questions/1646839/decode-numeric-html-entities-in-coldfusion)

例如我有这个法语文本：

```
&nbsp;Apr&egrave;s avoir termin&eacute; 
```

我需要转换为实际的法语字符，包括开头的空格：

```
 Après avoir terminé 
```

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T16:50:53.623

您可以使用 Apache Commons 库来执行此操作：

```
<cfset input = "&nbsp;Apr&egrave;s avoir termin&eacute;" />
<cfset utils = createObject("java", "org.apache.commons.lang.StringEscapeUtils") />
<cfdump var=#utils.unescapeHTML(input)# /> 
```

（ps这隐藏在我对您链接到的问题的回答[的评论](https://stackoverflow.com/questions/1646839/decode-numeric-html-entities-in-coldfusion#comment19587816_1647085)中，尽管我已经编辑到主要答案中以增加可见性。）

# java - Android List View Array Index Out Of Bounds Exception - 没有线索？

> ID：14282757
> 
> 赞同：4
> 
> 时间：2013-01-11T16:46:59.647
> 
> 标签：java, android, listview, exception, indexoutofboundsexception

我有一个应用程序在打开时会加载一个列表视图，但是我得到了一个数组索引越界异常，没有关于问题所在的线索。它试图在某个地方访问 index=-1，但我不知道在哪里。

该应用程序从数据库加载作业信息，将它们放入 ArrayList 中的单独作业对象中，然后从那里将其加载到 ListView 中。我真的不知道异常来自哪里，我检查了我所有的代码。列表中只有 1 项作业，但应用程序拒绝打开并在我尝试打开时强制关闭。这是 LogCat 输出

谢谢

LogCat 输出

```
01-11 16:38:43.644: E/AndroidRuntime(7267): FATAL EXCEPTION: main
01-11 16:38:43.644: E/AndroidRuntime(7267): java.lang.ArrayIndexOutOfBoundsException: length=29; index=-1
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.text.StaticLayout.calculateEllipsis(StaticLayout.java:738)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.text.StaticLayout.out(StaticLayout.java:702)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.text.StaticLayout.generate(StaticLayout.java:410)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.text.StaticLayout.<init>(StaticLayout.java:140)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.widget.TextView.makeSingleLayout(TextView.java:5888)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.widget.TextView.makeNewLayout(TextView.java:5745)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.widget.TextView.onMeasure(TextView.java:6102)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.View.measure(View.java:15513)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:645)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:425)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.View.measure(View.java:15513)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1052)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:590)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.View.measure(View.java:15513)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.widget.ListView.measureScrapChild(ListView.java:1183)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1248)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.widget.ListView.onMeasure(ListView.java:1158)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.View.measure(View.java:15513)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:695)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.View.measure(View.java:15513)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.View.measure(View.java:15513)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:847)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.View.measure(View.java:15513)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.View.measure(View.java:15513)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.Choreographer.doCallbacks(Choreographer.java:562)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.Choreographer.doFrame(Choreographer.java:532)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.os.Handler.handleCallback(Handler.java:725)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.os.Looper.loop(Looper.java:137)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at java.lang.reflect.Method.invokeNative(Native Method)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at java.lang.reflect.Method.invoke(Method.java:511)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-11 16:38:43.644: E/AndroidRuntime(7267):     at dalvik.system.NativeStart.main(Native Method) 
```

从数据库加载

```
public ArrayList<HomeworkItem> getHomeworks() {
        String[] columns = new String[] { KEY_ROWID, KEY_TITLE, KEY_SUBJECT,
                KEY_DUE_DAY, KEY_DUE_MONTH, KEY_DUE_YEAR, KEY_NOTES,
                KEY_REMINDER_ONE, KEY_REMINDER_TWO };
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null,
                null, null);
        ArrayList<HomeworkItem> hwks = new ArrayList<HomeworkItem>();

        int id = c.getColumnIndex(KEY_ROWID);
        int iTitle = c.getColumnIndex(KEY_TITLE);
        int iSub = c.getColumnIndex(KEY_SUBJECT);
        int iDay = c.getColumnIndex(KEY_DUE_DAY);
        int iMonth = c.getColumnIndex(KEY_DUE_MONTH);
        int iYear = c.getColumnIndex(KEY_DUE_YEAR);
        int iNotes = c.getColumnIndex(KEY_NOTES);
        int iOne = c.getColumnIndex(KEY_REMINDER_ONE);
        int iTwo = c.getColumnIndex(KEY_REMINDER_TWO);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            HomeworkItem h = new HomeworkItem();
            h.id = c.getInt(id);
            h.title = c.getString(iTitle);
            h.subject = c.getString(iSub);
            h.day = Integer.parseInt(c.getString(iDay));
            h.month = Integer.parseInt(c.getString(iMonth));
            h.year = Integer.parseInt(c.getString(iYear));
            h.notes = c.getString(iNotes);
            h.late = h.isLate();

            h.oneDayReminder = Boolean.parseBoolean(c.getString(iOne));
            h.twoDayReminder = Boolean.parseBoolean(c.getString(iTwo));
            hwks.add(h);
        }
        return hwks;
    } 
```

ListView 适配器

```
public class MyAdapter extends BaseAdapter { // adapter for list

        public MyAdapter(Context c) {

        }

        public int getCount() {
            // TODO Auto-generated method stub
            Log.d("hwk", hwks.size()+" is the size");
            return hwks.size();
        }

        public Object getItem(int position) {
            // TODO Auto-generated method stub
            Log.d("hwk", position+" being accessed");
            return position;
        }

        public long getItemId(int position) {
            // TODO Auto-generated method stub
            Log.d("hwk", position+" being accessed");
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            View v = convertView; // inflate the list
            TextView title, subject, dueDate, listLate;

            if (v == null) {
                LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.list, null);
                Log.d("hwk", "v inflated");
            }
            title = (TextView) v.findViewById(R.id.listTitle); // get the id's
                                                                // of fields
            subject = (TextView) v.findViewById(R.id.listSubject);
            dueDate = (TextView) v.findViewById(R.id.listDueDate);
            listLate = (TextView) v.findViewById(R.id.listLate);
            Log.d("hwk", "got views");

            title.setText(hwks.get(position).title);
            subject.setText(hwks.get(position).subject);
            String date = hwks.get(position).day + "/"
                    + (hwks.get(position).month + 1) + "/"
                    + hwks.get(position).year;
            dueDate.setText(date);
            Log.d("hwk", "some text set");

            if (hwks.get(position).late) { // set if they are late or not
                if (hwks.get(position).isToday()) {
                    listLate.setTextColor(Color.rgb(255, 165, 0));
                    listLate.setText("Due Today!");
                } else {
                    listLate.setTextColor(Color.RED);
                    listLate.setText("Late");
                }
            } else {
                listLate.setTextColor(Color.GREEN);
                listLate.setText("Ongoing");
            }
            Log.d("hwk", "returning v");
            return v;
        }

    } 
```

编辑：此外，当我第一次在应用程序中添加家庭作业时，ListView 工作，它会刷新 ListView 并将家庭作业添加到其中。发生这种情况时，我完全重新加载了主 Activity，因此在应用程序关闭一次后打开它似乎是一个问题。

编辑 2：我从应用程序中删除了数据，添加了一个新的家庭作业，现在我无法重新创建问题.. 可能是什么原因造成的？！

编辑 3：检测到问题。这与一些文本有关。我已经发现，当我将“标题”设置为“二项式展开”时，它重新创建了我之前在作业也称为“二项式展开”时遇到的错误。是否与尝试将该字符串放在 TextView 中并且文本太大有关？

我已经扩展了 TextView 的宽度，它停止了错误。当我扩展文本时，我又遇到了问题。一定是文本视图溢出的问题。我可以设置任何 TextView 属性来阻止它吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-30T19:31:10.930

这是由在没有on 的 a 上设置`android:ellipsize="middle"`（或`start`）引起的。`TextView``android:singleLine="true"`

例如，以下因此错误而崩溃：

```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ellipsize="middle"
    android:maxLines="1"
    android:text="blahblahblahblahblahblahblahblahblahbla---go really long" /> 
```

但以下没有：

```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ellipsize="middle"
    android:singleLine="true"
    android:text="blahblahblahblahblahblahblahblahblahbla---go really long" /> 
```

参考：[https ://code.google.com/p/android/issues/detail?id=33868](https://code.google.com/p/android/issues/detail?id=33868)

注意：`singleLine`是一个已弃用的属性，但仍适用于 Jelly Bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:01:06.243

您的问题出在 getView 方法中，每当您滚动数组时都会调用此方法，因此请确保在执行任何逻辑之前检查视图是否不为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T12:12:09.980

[在 CursorAdapter 的构造函数](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html#SimpleCursorAdapter%28android.content.Context,%20int,%20android.database.Cursor,%20java.lang.String%5B%5D,%20int%5B%5D,%20int%29)中检查您的布局和光标列名数组长度。当两个数组的长度不匹配时，会导致`ArrayOutOfBoundsException`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-16T20:07:05.743

这肯定和文本视图的椭圆逻辑有关，与适配器代码无关。

# c++ - C++ 类纠缠编辑

> ID：14282763
> 
> 赞同：0
> 
> 时间：2013-01-11T16:47:34.710
> 
> 标签：c++, class

我正在尝试使用两个类的变量来从 A 类的变量访问 B 类的变量，反之亦然。但是，我想不出一个可能的解决方案。它总是以循环或以下错误结束：

错误：非静态数据成员的使用无效

这是代码示例：

播放器.h：

```
#ifndef _PLAYER_H_
  #define _PLAYER_H_

#include "Segment/Dynamic_Segment.h"

class Attributes_P;
class Player;

class Attributes_P : public Attributes_DS{
  protected:
  Player *rel;
  int inv_mcols, inv_mrows;

  public:
  Attributes_P();
  void controls( int MKEY_UP, int MKEY_RIGHT, int MKEY_DOWN, int MKEY_LEFT );
  void inventory( int inv_mcols, int inv_mrows );
};

class Player : public Dynamic_Segment{
  protected:
  int   **inv;

  public:

  int   MKEY_UP, MKEY_RIGHT, MKEY_DOWN, MKEY_LEFT;

  public:

  Player();
  Attributes_P set;
  friend class Core;
  friend class Attributes_P;

};
#endif 
```

播放器.cpp：

```
#include "Segment/Player.h"

Attributes_P::Attributes_P(){};

Player::Player() : Dynamic_Segment(){
  set.inv_mcols = 0;
  set.inv_mrows = 0;
}

void Attributes_P::inventory( int inv_mcols, int inv_mrows ) {
  this->inv_mcols = inv_mcols;
  this->inv_mrows = inv_mrows;
  &rel.inv = new int*[this->inv_mcols];
  for( int i = 0; i < this->inv_mrows; i++ ) {
    &rel.inv[i] = new int[this->inv_mcols];
  }
}

void Attributes_P::controls( int MKEY_UP, int MKEY_RIGHT, int MKEY_DOWN, int MKEY_LEFT ) {
  &rel.MKEY_UP = MKEY_UP;
  &rel.MKEY_RIGHT = MKEY_RIGHT;
  &rel.MKEY_DOWN = MKEY_DOWN;
  &rel.MKEY_LEFT = MKEY_LEFT;
} 
```

一段时间以来，我一直在用头撞墙……任何想法都将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T16:50:36.430

现在我明白了。我想这是

```
&rel. 
```

应该

```
rel-> 
```

IE

```
rel->MKEY_UP = MKEY_UP; 
```

你的意思是`(*rel).MKEY_UP`？这也有效。

# regex - 使用正则表达式限制文本中的特殊字符并仅在逗号后允许相同的字符

> ID：14282771
> 
> 赞同：0
> 
> 时间：2013-01-11T16:47:45.423
> 
> 标签：regex

我的文本应该以 $ 开头，然后只能包含字母 AZ，不允许特殊字符，现在可以有一个逗号 (,)，并且同样的模式将再次重复，即 $ 和字母。

如何为这种情况创建正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:48:56.937

你可以试试这个：

```
^\$[A-Z]*,?\$[A-Z]* 
```

细节 ：

*   `^\$`: 以 '$' 开头
*   `[A-Z]*`: 从 A 到 Z 的字符
*   `,?`：可以有一个'，'

* * *

**更多信息后**编辑：****

 **```
^\$[a-z]*(?:,? ?\$[a-z]*)*$ 
```

将匹配`$adbdfd,$asdfaf`and`$adbdfd`但不匹配`$adbdfd,aa`or `adbdfd,$aa`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:02:24.403

尝试这个

```
^(?i)(\$[a-z]+)(,(?1))*$ 
```

或者如果逗号和后面的单词之间允许有空格，试试这个

```
^(?i)(\$[a-z]+)(,\s*(?1))*$ 
```**

# c# - 写入日期值

> ID：14282774
> 
> 赞同：0
> 
> 时间：2013-01-11T16:47:53.723
> 
> 标签：c#, io, globalization

我正在使用我的程序以美国格式 (MMDDYYYY) 将一些日期值写入 c# 中的 csv 文件。这是一个 WPF 应用程序。如果用户在其计算机中具有不同的区域设置（例如英国），则日期值正在翻转。我如何确保无论用户的区域设置是什么，我的应用程序都会以美国格式写入日期值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:50:35.427

您可以在将日期转换为字符串时指定格式（不过，我不确定这是否是您显示日期的方式）：

```
DateTime d = DateTime.Now;
string s = d.ToString("MMddyyyy"); 
```

有关日期格式字符串的更多详细信息，请参阅：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:52:25.923

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
Console.WriteLine(dateToDisplay.ToString("MMddyyyy")); 
```

# matlab - plotyy改变颜色

> ID：14282777
> 
> 赞同：3
> 
> 时间：2013-01-11T16:48:05.530
> 
> 标签：matlab, plot, matlab-figure

我在 MATLAB 中使用 plotyy 函数。它实际上是 2 个地块，每个地块有 5 条“线”。我希望 5 行颜色匹配，但我不管理。我尝试了从设置句柄到颜色顺序的各种方法 - 见下文。

这两个变量 pk3... 是每个 5 列的向量。

```
[ax,h1,h2]= plotyy(2007:2050,pk3uco25,2007:2050,pk3ux45) 
```

我已经使用下面的行来控制其他属性，...

```
set(h1,'linestyle', 'd','marker','*', 'markersize', 5) %variable 1
set(h2,'linestyle', '-', 'linewidth', 1.5)             %variable 2 
```

我想要的是前 5 行，匹配后 5 行的颜色。我尝试了各种方法，例如：

*   设置一个重复的颜色顺序，使得`mycolororder{1:5,:} == mycolororder{6:10,:}`

    `set(gca,'colororder',mycolororder); %`

*   使用值矩阵

`cols(1:5,1)={'color'};`

```
cols(:,2)=get(h1,'color');
set(h2,cols{1:5,1},cols{1:5,2}); 
```

......还有其他一些事情，但没有运气！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:01:00.933

为了将`h2`颜色设置为与颜色相同，请`h1`使用以下行：

```
set(h2, {'Color'}, get(h1,'Color')); 
```

例如：

```
x=1:5;
y1=meshgrid(10:10:50,1:5);
y2=y1+1;
[ax,h1,h2]= plotyy(x,y1,x,y2);
set(h2, {'Color'},get(h1,'Color')); 
```

![示例图](../Images/cfe1ee16696e188b9b4bf9f0db082513.png)

# facebook-graph-api - Facebook 登录 - 如何更改配色方案

> ID：14282780
> 
> 赞同：0
> 
> 时间：2013-01-11T16:48:18.370
> 
> 标签：facebook-graph-api, facebook-javascript-sdk

是否可以选择将 Facebook 登录按钮的基本颜色更改为更亮并适合深色背景，我指的是登录按钮，而不是 LIKE 按钮。

这个不行：

```
data-colorscheme="dark" 
```

谢谢。

# orm - Insight.Database.Schema SchemaGroup 用途

> ID：14282781
> 
> 赞同：0
> 
> 时间：2013-01-11T16:48:21.523
> 
> 标签：orm

`Insight.Database.Schema`'s的实际方面是`SchemaGroup`什么？为什么以及如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:53:33.557

我在 wiki 上添加了更多信息：

[https://github.com/jonwagner/Insight.Database.Schema/wiki/Schema-Groups](https://github.com/jonwagner/Insight.Database.Schema/wiki/Schema-Groups)

总结：

您可以使用模式组将多个模式安装到同一个数据库中。

有时，您有多个程序或组件需要将 SQL 安装到数据库中。您可能还想单独管理它们的模式（可能在单独的发布周期中）。

例如，您的应用程序中有两个组件。用户成员库和您的应用程序代码。它们都有自己的 SQL 模式。

# python - 从另一个脚本调用 python unittest 并导出所有错误消息

> ID：14282783
> 
> 赞同：9
> 
> 时间：2013-01-11T16:48:24.907
> 
> 标签：python, unit-testing

对不起，基本问题。我使用 unittest 方法在一个脚本中检查我的模型。现在，我的问题是如何从另一个文件调用这个脚本并保存测试结果。以下是我的代码示例：

```
**model_test.py**

import unittest
import model_eq #script has models

class modelOutputTest(unittest.TestCase):
    def setUp(self):
        #####Pre-defined inputs########
        self.dsed_in=[1,2]

        #####Pre-defined outputs########
        self.msed_out=[6,24]

        #####TestCase run variables########
        self.tot_iter=len(self.a_in)

    def testMsed(self):
        for i in range(self.tot_iter):
            fun = model_eq.msed(self.dsed_in[i],self.a_in[i],self.pb_in[i])
            value = self.msed_out[i]
            testFailureMessage = "Test of function name: %s iteration: %i expected: %i != calculated: %i" % ("msed",i,value,fun)
self.assertEqual(round(fun,3),round(self.msed_out[i],3),testFailureMessage)

if __name__ == '__main__':
    unittest.main() 
```

我想要的下一步是创建另一个名为 test_page.py 的脚本，它运行单元测试脚本并将结果保存到变量（我需要将结果发布到网页）。

```
test_page.py    

from model_test.py import *
a=modelOutputTest.testMsed() 
```

但是，我收到以下错误。

```
Traceback (most recent call last):
  File "D:\Dropbox\AppPest\rice\Rice_unittest.py", line 16, in &lt;module&gt;
    a= RiceOutputTest.testMsed()
TypeError: unbound method testMsed() must be called with RiceOutputTest instance as first argument (got nothing instead) 
```

谁能给我一些建议？谢谢！

感谢尼克斯的帮助！我的下一个问题是：我需要在一个循环中使用两个给定的案例来测试这个函数。它张贴[在这里](https://stackoverflow.com/questions/14285010/python-unit-testing-a-loop-function)。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-11T16:50:55.240

你需要使用一个`test runner`

> 测试运行器 测试运行器是一个组件，它协调测试的执行并向用户提供结果。运行程序可以使用图形界面、文本界面或返回特殊值来指示执行测试的结果。

```
from unittest.case import TestCase
import unittest
from StringIO import StringIO
class MyTestCase(TestCase):
    def testTrue(self):
        '''
        Always true
        '''
        assert True

    def testFail(self):
        '''
        Always fails
        '''
        assert False

from pprint import pprint
stream = StringIO()
runner = unittest.TextTestRunner(stream=stream)
result = runner.run(unittest.makeSuite(MyTestCase))
print 'Tests run ', result.testsRun
print 'Errors ', result.errors
pprint(result.failures)
stream.seek(0)
print 'Test output\n', stream.read() 
```

* * *

```
>>> Output:  
>>> Tests run  2
>>> Errors  []
>>> [(<__main__.MyTestCase testMethod=testFail>,
>>> 'Traceback (most recent call last):\n  File "leanwx/test.py", line 15, in testFail\n                assert False\nAssertionError\n')]
>>> Test output
>>> F.
>>> ======================================================================
>>> FAIL: testFail (__main__.MyTestCase)
>>> ----------------------------------------------------------------------
>>> Traceback (most recent call last):
>>>   File "leanwx/test.py", line 15, in testFail
>>>     assert False
>>> AssertionError
>>>
>>>----------------------------------------------------------------------
>>>Ran 2 tests in 0.001s
>>>
>>>FAILED (failures=1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-21T18:20:05.047

假设您的单元测试位于“test”目录中：

```
# Tested in Python 3.8
# https://docs.python.org/3/library/unittest.html#module-unittest
from unittest import TestLoader, TestResult
from pathlib import Path

def run_tests():
    test_loader = TestLoader()
    test_result = TestResult()

    # Use resolve() to get an absolute path
    # https://docs.python.org/3/library/pathlib.html#pathlib.Path.resolve
    test_directory = str(Path(__file__).resolve().parent / 'test')

    test_suite = test_loader.discover(test_directory, pattern='test_*.py')
    test_suite.run(result=test_result)

    # See the docs for details on the TestResult object
    # https://docs.python.org/3/library/unittest.html#unittest.TestResult

    if test_result.wasSuccessful():
        exit(0)
    else:
        # Here you can either print or log your test errors and failures
        # test_result.errors or test_result.failures
        exit(-1)

if __name__ == '__main__':
    run_tests() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-05T12:26:34.987

`.py`从标题中删除`from model_test.py import *`

# windows - Windows 批处理文件时间比较

> ID：14282788
> 
> 赞同：8
> 
> 时间：2013-01-11T16:48:38.193
> 
> 标签：windows, batch-file, cmd

我正在尝试将当前系统时间与设定时间进行比较。请看下面：

```
 set currentTime=%TIME%
 set flag=false

 if %currentTime% geq 07:00 if %currentTime% leq 22:45 set flag=true

 if %flag%==true (

 ) else (

 ) 
```

如果时间在上午 7 点到晚上 10:45 之间，则执行此操作，否则执行其他操作。

问题是这行不通。结果不断变化。我认为这与我与 07:00 的比较有关

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T18:34:26.087

您的脚本失败的原因是上午 10 点之前的时间。当时间小于 10 时，%Time% 变量返回此格式：`" H:MM:SS:ss"`. 但是，当 10 或更高版本时，`%Time%`变量返回此格式：`"HH:MM:SS:ss"`.

请注意`0`之前的时代开始时的`10`失踪失踪。这会导致比较问题，因为批处理正在进行字符串比较而不是数字比较。

`07:00`小于，`6:00`因为 的 ASCII 值`6`大于 的 ASCII 值`0`。

如果时间在上午 10 点之前，该解决方案要求您在时间的开头附加一个零。

**只是改变**

```
set currentTime=%TIME% 
```

**进入**

```
set "currentTime=%Time: =0%" 
```

这将用零替换时间中的任何空格。

# c# - 每天处理超过 100,000 张上传图像的大小调整

> ID：14282795
> 
> 赞同：2
> 
> 时间：2013-01-11T16:48:59.033
> 
> 标签：c#, asp.net

目前我们正在实时调整图像大小。我们的用户每天上传大约 50K 到 100K 的图像。我们的服务器 24/7 使用 100% 的 CPU。页面加载时间很慢。**拉姆不是问题。**

我们有一个**双 CPU 英特尔至强 L5630 2.13GHz**服务器，具有**24** GB内存。我们正在使用一个简单的图像调整脚本从原始图像制作缩略图。但这是最大化CPU的。

我想通过硬件和软件来解决这个问题。

*   在硬件方面，我们将订购另一台配备双 Xeon 3GHz 处理器的服务器。该服务器将与网站分开处理图像处理。

*   关于软件，我想请教有经验的人，他们使用什么样的软件来处理具有低 cpu 开销的图像。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:19:31.477

### 首先，分析你的读/写平衡和（更重要的）读分布

大多数大容量用户发现最好将上传直接发送到 blob 存储，未经修改，并根据请求动态调整大小。这种方法有很多好处（敏捷性、移动支持、控制），但主要是它可以降低资源利用率。大多数内容永远不会吸引眼球；为什么要在上面浪费资源？

### 二、获取服务器安全、服务器优化的镜像库

看来您已经在查看我的软件[ImageResizer](http://imageresizing.net)了，据我所知，这是 .NET 唯一对服务器友好的选择。它还提供了一系列管道，每个管道都有自己的权衡。**如果您想要原始速度，请使用 WIC 管道；我希望您会看到比当前脚本好 10-20 倍的性能。**WIC 流水线的质量*不如*默认流水线，但速度要快 2-4 倍，而且您无法区分大多数图像。

### 考虑寻求帮助

我帮助许多公司突破了 100 万和 1000 万的图像障碍；有一些架构缺陷需要避免，但在这种规模下，最好深入了解您的需求。Varnish 或 CDN 是一种选择吗？这些可以极大地帮助扩展超过 500 图像/秒的障碍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:06:11.083

首先，它们是否需要实时处理？– 如果没有，您可以查看一个基于队列的系统，该系统使用其他服务器/当前服务器上的安静时间来处理缩略图。

图像是否只调整了一次，或者用户是否可以再次请求图像导致另一次调整大小？– 如果是这样，您需要查看缓存。

正在重新处理的图像有多大，一次正在处理多少图像——如果它在一整天内展开？

回发期间调整图像大小是否会导致页面加载时间延迟？– 如果是这样，他们将该指令添加到新线程将改善响应时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T17:07:03.950

首先，您最好将图像处理与主服务器分开。

最佳答案取决于您的特定情况的更多详细信息：什么软件环境，用于调整图像大小的软件，如何配置等。在那里进行优化可能会产生强大的速度提升。例如，是否有多个内核，是否可以使用基于 GPU 的处理？

也就是说，由于每个图像大小调整操作都独立于其他操作，因此有一个通用的解决方案。您可以轻松地将工作分发到任意数量的服务器上。构建一个（或更多，如果需要）额外的图像处理服务器。然后使调整大小请求被分发。这可以在多个级别上完成（Web 客户端是否通过 URL 调用调整大小？随机化发送给它们的 URL 中的服务器名称。业务层调用调整大小？在那里随机化服务器名称。）。

如果您需要更具体的答案，请提供更多详细信息。

# navigation - 如何订购 CRM 2011 上的默认导航项？

> ID：14282796
> 
> 赞同：0
> 
> 时间：2013-01-11T16:48:57.723
> 
> 标签：navigation, dynamics-crm-2011, dynamics-crm

我正在使用新的自定义实体而不是默认表单来开发 CRM 2011。

我需要导航窗格的公共部分下的项目按字母顺序排列。

在表单的编辑模式下，项目看起来很好，但是当我以用户身份打开它时，它会在列表的开头添加更多项目，“活动”和“关闭的活动”

![在此处输入图像描述](../Images/44cbf4dfc7fd2fbc0d3b5bf41baa489d.png)

后面的表单是用户表单，前面的表单是编辑模式。亮点项目是包括在内的项目。

如果我在编辑模式下看不到这些物品，我该如何订购它们？或者我怎样才能将它们从 Common 部分中删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:46:19.767

我怀疑您将能够通过编辑站点地图来实现这一点。

阅读这篇文章：[更改表单导航](http://msdn.microsoft.com/en-gb/library/gg328217.aspx)。

> 更改导航项的相对顺序
> 
> 表单编辑器允许您拖动导航项以更改导航组中的相对顺序。
> 
> 在大多数实体关系中，在主要实体的导航窗格项区域中，您可以更改相对于其他导航项的显示顺序值。值越低，项目将在顺序中显示的越高。
> 
> (FormXml) 元素包含一个 Sequence 属性，您可以使用该属性覆盖在实体关系中设置的显示顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T18:02:01.243

您可以在表单上使用 Javascript 隐藏它们。

遍历 Xrm.Page.ui.navigation.items 集合，根据名称检查并在不需要的集合上调用 setVisible(false)。

除此之外，对于那些特定项目，您可以创建自定义实体而根本无法进行活动。

# client-side - 如何在客户端访问 orbeon 表单数据 ID？

> ID：14282800
> 
> 赞同：1
> 
> 时间：2013-01-11T16:49:06.070
> 
> 标签：client-side, orbeon, xforms

在我的应用程序中，我呈现自己的页面并将 Orbeon URL 的内容注入`/orbeon/fr/appname/formname/new?orbeon-embeddable=true`到`div`.

`form_data_id`保存时，我需要在我的实体 ID 和我的实体 ID之间创建关系。我可以捕获保存按钮上的单击事件，但我没有`form_data_id`在 Form DOM 或任何 Orbeon JavaScript 对象上找到它。

在哪里`form_data_id`，或者如何暴露它？你有另一种方法来建立与 的关系`form_data_id`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:06:08.653

如果您指的是 Orbeon 的文档 ID，并且您可以在自己的页面中使用 JavaScript，则使用以下函数调用。

```
ORBEON.xforms.Document.getValue("fr-parameters-instance-document") 
```

这将返回一个字符串，例如“4a1ae3c34a8e14e70c8fc3a02234a847d13896a9”。

# c# - 如何在没有 default.htm 页面的情况下使用 ServiceStack MVC 库

> ID：14282801
> 
> 赞同：2
> 
> 时间：2013-01-11T16:49:06.570
> 
> 标签：c#, asp.net-mvc, servicestack

我在应用程序中使用 Servicestack.MVC.Host nuget 包。这个包将默认视图设置为包含的 default.htm 文件。我已经尝试过使用 global.asax 中的 routes.map 方法渲染到我选择的视图（默认情况下），但这根本不起作用。是否有另一个配置设置可以让我进行此更改。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:01:47.253

在 AppHost 配置（）

```
SetConfig(new EndpointHostConfig {DefaultRedirectPath = "/Foo" }); 
```

# delphi - 如何使用 Delphi 7 ADOQuery.ExecSQL 在 SQL Server 上更新 DateTime 保留毫秒？

> ID：14282802
> 
> 赞同：9
> 
> 时间：2013-01-11T16:49:13.823
> 
> 标签：delphi, ado, datetime2

如何使用 Delphi 7 在 SQL Server 2012 上更新 DateTime 保留毫秒`ADOQuery.ExecSQL`？

`DateTime2[7]`SQL Server 似乎降低了秒精度，所以我在 SQL Server 2012字段上没有毫秒或微秒。MS Access 不会使用此 ADO 查询减少毫秒数。以下 ADOQuery 代码似乎适用于我关心的所有 DataTypes 除了 SQL Server `DateTime`。

我正在使用的连接字符串是： `Provider=SQLNCLI11.1;Integrated Security=SSPI;User ID="";Initial File Name="";Server SPN="";Data Source=myPC\SQLSERVER2012EXP;Initial Catalog=MyDatabase`

这是我的代码：

```
function ExecuteNonQry(Conn:TADOConnection;Sql:string;Params:Variant): Integer;
{ Execute a query that does not return a recordset.  Returns number of rows 
  affected. Params can be any unique name, they are all dealt with in order
  of appearance in the parameter array and in the sql string.
  E.g. SQL 
    'INSERT INTO customers (id,name,country) VALUES (:id,:name,:country)';
  E.g. calling code:
    sql := 
     'INSERT INTO Sessions (SessionType_cod , HasErrors, Start_Timestamp) ' + 
     ' VALUES (:1, :2, :3)';
    params := VarArrayOf([ 1, true, Now ]);
    ExecuteNonQry( GvConnection1, sql, params );

    Note: Do not use ADO with Paradox - will be slow and possibly error prone.

    Tested the following DataTypes with "Insert Into" and "Update" queries
    **********************************************************************
    Delphi          MS Access    SQL Server      Paradox
    -----------------------------------------------------
    ftInteger       Long         int
    ftString        Text(255)    nvarchar(255)
    ftString        Memo         nvarchar(max)
    ftBoolean       Boolean      bit
    ftDateTime      Date         datetime2(7)
    ftDouble        Double       float
}
var
  qry : TADOQuery;
begin
  assert( Conn <> nil);
  assert( Sql <> '');
  qry := TADOQuery.Create(nil);
  qry.DisableControls;
  qry.SQL.Text := Sql;
  AddParametersToQuery(qry, Params);
  qry.Connection := Conn;
  result := qry.ExecSQL;
end;

procedure AddParametersToQuery(var Qry: TADOQuery; Params: Variant);
{ Version 1b.  (Uses Delphi function to replace "DIRegEx" dependencies)
  Add parameters (type and value) to ADO query. ADOQuery must have SQL 
  text set and Params is a variant array. 
  Limitations: SQL Server drops DateTime second precision digits for 
  milliseconds or microseconds.
  E.g. Sql: 
    'INSERT INTO Sessions (SessionType_cod , HasErrors, Start_Timestamp) 
     VALUES (:1, :2, :3)';
  or  Sql: 
    'INSERT INTO Sessions (SessionType_cod , HasErrors, Start_Timestamp) 
     VALUES (:mykey, :HasErrors, :myDateTime)';
}
const
  regPattern = ':';
var
  str: String;
  val: Variant;
  i: Integer;
  sl: TStrings;
begin
  assert( Qry.SQL.Text <> '');

  // in some cases this is necessary.
  Qry.Parameters.ParseSQL(Qry.SQL.Text, true);        

  sl := TStringList.Create;
  try
    // find all param wordssql text such as '1, 2, 3'
    sl := ExtractWordsToStrings(':', Qry.SQL.Text);   

    // loop through any matches found
    for i := 0 to sl.Count -1 do            
    begin
      str := sl[i];
      val := GetVarParam(i, Params);
      // in some cases this is necessary.
      Qry.Parameters.ParamByName(str).DataType := 
          VarTypeToDataType(Ord(VarType(val)) );
      Qry.Parameters.ParamByName(str).Value := val;
    end;
  finally
    sl.Free;
  end;
end; 
```

**更新**

MS Access 和 SQL Server 的修改代码：

```
if (VarType(val) = varDate) And IsSqlServerProvider(Conn.Provider) then begin
  // needed for SQL Server
  Qry.Parameters.ParamByName(str).Value := 
     FormatDateTime('yyyymmdd hh:nn:ss.zzz', val)   
end
else
begin
  // in some cases this is necessary.
  Qry.Parameters.ParamByName(str).DataType := 
     VarTypeToDataType(Ord(VarType(val))); 
  Qry.Parameters.ParamByName(str).Value := val;
end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T07:54:04.753

通过 Ado 的 DateTime2(7) 被视为 TWideStringField。
日期时间将被视为 TDateTimeField。
如果分配 TDatetime，内部转换将忽略像 DateTimeToStr(dt) 这样的毫秒。
您可以使用自己的转换为 WideString 来处理这个问题。

```
Function MyDateTimeString(d:TDateTime):String;
begin
  Result := FormatDateTime('yyyymmdd hh:nn:ss.zzz',d);
end;

procedure TForm1.Button1Click(Sender: TObject);
var
dt:TdateTime;
begin
  dt := now;
  Caption := FormatDateTime('dd.mm.yyyy hh:nn:ss.zzz',dt);
  Adoquery1.Paramcheck := true;
  Adoquery1.SQL.Text := 'Insert into Tab (a,b,DT) Values (:a,:b,:DT)';
  Adoquery1.Parameters.ParseSQL(Adoquery1.SQL.Text,true);
  Adoquery1.Parameters.ParamByName('a').Value := 1;
  Adoquery1.Parameters.ParamByName('b').Value := 2;
  Adoquery1.Parameters.ParamByName('DT').Value := MyDateTimeString(dt);
  Adoquery1.ExecSQL;
end; 
```

使用 then 以下将导致四舍五入：

```
 Adoquery1.Parameters.ParamByName('DT').DataType := ftDateTime;
  Adoquery1.Parameters.ParamByName('DT').Value := dt; 
```

# c# - 多键数据结构

> ID：14282807
> 
> 赞同：11
> 
> 时间：2013-01-11T16:49:29.993
> 
> 标签：c#, generics, dictionary, generic-collections

我正在寻找一种可以使用多个键进行搜索的数据结构。用一个例子更容易解释：

```
var myDataStructure = new MultiKeyDataStructure<int, string, MyType>();
myDataStructure.Add(1, "some string 1", new MyType());
myDataStructure.Add(2, "some string 2", new MyType());

var myType = new MyType();
myDataStructure.Add(3, "some string 3", myType);

Tuple<string, MyType> t1 = myDataStructure[1];
Tuple<int, MyType> t2 = myDataStructure["some string 1"];
Tuple<int, string> t3 = myDataStructure[myType]; 
```

像这样的事情是否可能，如果是这样，是否有任何已经存在的东西可以做到这一点？您将如何实现将所有内容都视为键并通过搜索其中任何一个来返回所有关联键的东西？

理想情况下，您还可以使用任意数量和/或类型的参数：

```
var myDataStructure = new MultiKeyDataStructure<int, string, Foo, Bar>(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T17:16:13.833

所以这里有一个适用于三个键的。您可以按照列出的模式为 4、5、6 等键制作一个。这将是很多代码，但不是特别困难的任务（只是乏味）。

请注意，由于键的每个部分都有一个字典，因此会占用大量内存；这就是您为从任何密钥访问非常事实的灵活性所付出的代价。

```
public class MultiKeyDictionary<T1, T2, T3>
{
    private Dictionary<T1, Tuple<T1, T2, T3>> firstLookup = new Dictionary<T1, Tuple<T1, T2, T3>>();
    private Dictionary<T2, Tuple<T1, T2, T3>> secondLookup = new Dictionary<T2, Tuple<T1, T2, T3>>();
    private Dictionary<T3, Tuple<T1, T2, T3>> thirdLookup = new Dictionary<T3, Tuple<T1, T2, T3>>();

    public void Add(Tuple<T1, T2, T3> values)
    {
        if (!firstLookup.ContainsKey(values.Item1) &&
            !secondLookup.ContainsKey(values.Item2) &&
            !thirdLookup.ContainsKey(values.Item3))
        {
            firstLookup.Add(values.Item1, values);
            secondLookup.Add(values.Item2, values);
            thirdLookup.Add(values.Item3, values);
        }
        else
        {
            //throw an exeption or something.
        }
    }

    public Tuple<T1, T2, T3> GetFirst(T1 key)
    {
        return firstLookup[key];
    }

    public Tuple<T1, T2, T3> GetSecond(T2 key)
    {
        return secondLookup[key];
    }

    public Tuple<T1, T2, T3> GetThird(T3 key)
    {
        return thirdLookup[key];
    }

    public void RemoveFirst(T1 key)
    {
        var values = GetFirst(key);

        firstLookup.Remove(values.Item1);
        secondLookup.Remove(values.Item2);
        thirdLookup.Remove(values.Item3);
    }

    public void RemoveSecond(T2 key)
    {
        var values = GetSecond(key);

        firstLookup.Remove(values.Item1);
        secondLookup.Remove(values.Item2);
        thirdLookup.Remove(values.Item3);
    }

    public void RemoveThird(T3 key)
    {
        var values = GetThird(key);

        firstLookup.Remove(values.Item1);
        secondLookup.Remove(values.Item2);
        thirdLookup.Remove(values.Item3);
    }
} 
```

下面是一种完全不同的方法。它不是为每个键填充查找，而是将所有值存储在单个集合中并执行线性搜索以查找给定键的项目。它将有 O(n) 搜索/删除时间，但 O(1) 添加。之前的实现有 O(1) 的添加、删除和搜索，但是会占用更多的内存。

```
public class MultiKeyDictionary2<T1, T2, T3>
{
    private HashSet<Tuple<T1, T2, T3>> lookup = new HashSet<Tuple<T1, T2, T3>>();
    private HashSet<T1> firstKeys = new HashSet<T1>();
    private HashSet<T2> secondKeys = new HashSet<T2>();
    private HashSet<T3> thirdKeys = new HashSet<T3>();

    public void Add(Tuple<T1, T2, T3> values)
    {
        if (lookup.Any(multiKey => object.Equals(multiKey.Item1, values.Item1) ||
            object.Equals(multiKey.Item2, values.Item2) ||
            object.Equals(multiKey.Item3, values.Item3)))
        {
            //throw an exception or something
        }
        else
        {
            lookup.Add(values);
        }
    }

    public Tuple<T1, T2, T3> GetFirst(T1 key)
    {
        return lookup.FirstOrDefault(values => object.Equals(values.Item1, key));
    }

    public Tuple<T1, T2, T3> GetSecond(T2 key)
    {
        return lookup.FirstOrDefault(values => object.Equals(values.Item2, key));
    }

    public Tuple<T1, T2, T3> GetThird(T3 key)
    {
        return lookup.FirstOrDefault(values => object.Equals(values.Item3, key));
    }

    public void RemoveFirst(T1 key)
    {
        var values = GetFirst(key);
        if (values != null)
            lookup.Remove(values);
    }

    public void RemoveSecond(T2 key)
    {
        var values = GetSecond(key);
        if (values != null)
            lookup.Remove(values);
    }

    public void RemoveThird(T3 key)
    {
        var values = GetThird(key);
        if (values != null)
            lookup.Remove(values);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T17:36:52.587

首先，不幸的是没有内置任何东西，所以你必须手动实现一些东西。

这里的问题是你不能有一个具有未指定数量的泛型类型定义的类，即不存在这样的东西：

```
class MultiKeyDictionary<T1, ...>
{} 
```

因此，您可以决定实现某些情况（2 键、3 键等，使用类似于`Tuple<>`实现的方法），或者您应该放弃类型安全。

如果您决定采用第一种方法，您应该可以执行以下操作（例如使用 3 个键）：

```
class ThreeKeysDict<T1,T2,T3>
{
   var dict1 = new Dictionary<T1,Tuple<T2,T3>>();
   var dict2 = new Dictionary<T2,Tuple<T1,T3>>();
   var dict3 = new Dictionary<T3,Tuple<T1,T2>>();
   public void Add(T1 key1,T2 key2, T3 key3)
   {
      dict1.Add(key1,Tuple.Create(key2,key3));
      dict2.Add(key2,Tuple.Create(key1,key3));
      dict3.Add(key3,Tuple.Create(key1,key2));
   }
   public Tuple<T2,T3> GetByKey1(T1 key1)
   {
      return dict1[key1];
   }
   public Tuple<T1,T3> GetByKey2(T2 key2)
   {
      return dict2[key2];
   }
   public Tuple<T1,T2> GetByKey3(T3 key3)
   {
      return dict3[key3];
   }
} 
```

非通用版本将是这样的：

```
class MultiKeyDict
{
    Dictionary<object, object[]>[] indexesByKey;
    public MultiKeyDict(int nKeys)
    {
        indexesByKey = new Dictionary<object, object[]>[nKeys];
    }
    public void Add(params object[] values)
    {
        if (values.Length != indexesByKey.Length)
            throw new ArgumentException("Wrong number of arguments given");
        var objects = values.ToArray();
        for (int i = 0; i < indexesByKey.Length; i++)
            this.indexesByKey[i].Add(values[i], objects);
    }
    public object[] Get(int keyNum, object key)
    {
        return this.indexesByKey[keyNum][key];
    }
} 
```

如果不同键的数量增加，这两种方法都会使用大量内存（因为它们为每个键采用一个字典）。

* * *

**免责声明：**

这些代码没有经过测试，也没有空值/超出范围检查等。
它们只是为了给你一个整体的想法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T17:22:45.613

既然您说您想要编译时类型安全，那么您必须放弃许多事情：

1.  具有任意数量参数的能力（C# 没有可变参数泛型）
2.  拥有多个相同类型的键的能力（编译器会抱怨不明确的重载）

这两个限制可以通过使用基于反射的方法来解决，但是你会失去编译时类型的安全性。

因此，根据您的限制，这是您将使用的解决方案（仅在所有泛型类型不同时才有效！）

```
class TripleKeyDictionnary<TKey1, TKey2, TKey3>
{
    public Tuple<TKey2, TKey3> this[TKey1 key]
    {
        get
        {
            return _key1Lookup[key];
        }
    }

    public Tuple<TKey1, TKey3> this[TKey2 key]
    {
        get
        {
            return _key2Lookup[key];
        }
    }

    public Tuple<TKey1, TKey2> this[TKey3 key]
    {
        get
        {
            return _key3Lookup[key];
        }
    }

    private Dictionary<TKey1, Tuple<TKey2, TKey3>> _key1Lookup = new Dictionary<TKey1, Tuple<TKey2, TKey3>>();
    private Dictionary<TKey2, Tuple<TKey1, TKey3>> _key2Lookup = new Dictionary<TKey2, Tuple<TKey1, TKey3>>();
    private Dictionary<TKey3, Tuple<TKey1, TKey2>> _key3Lookup = new Dictionary<TKey3, Tuple<TKey1, TKey2>>();

    public void Add(TKey1 key1, TKey2 key2, TKey3 key3)
    {
        _key1Lookup.Add(key1, Tuple.Create(key2, key3));
        _key2Lookup.Add(key2, Tuple.Create(key1, key3));
        _key3Lookup.Add(key3, Tuple.Create(key1, key2));
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T17:19:32.550

当我遇到这样的情况时，我只使用两个字典，而不是尝试提出一些新的数据结构。每个字典都有一个映射到值的可能键。

如果你真的希望它被抽象，你总是可以创建一个内部使用两个或更多字典的类，这取决于你需要多少不同类型的键。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T17:38:07.957

我不确定是否存在任何这样的数据结构，但您可以创建一个。

假设键/子键是唯一的

以下是`MultiKeyDictionary`（使用 2 个内部字典，一个用于键（as `object`），一个用于值）。

```
public class MultiKeyDictionary<TValue> 
{
    private Dictionary<Guid, TValue> values;
    private Dictionary<Object, Guid> keys;

    public MultiKeyDictionary()
    {
        keys = new Dictionary<Object,Guid>();
        values = new Dictionary<Guid,TValue>();
    }
    public IEnumerable<Object> Keys
    {
        get { return keys.Keys.AsEnumerable();} // May group according to values here
    }

    public IEnumerable<TValue> Values
    {
        get { return values.Values;}
    }

    public TValue this[object key]
    {
        get 
        {
            if (keys.ContainsKey(key)) 
            {
                var internalKey = keys[key];
                return values[internalKey];
            }
            throw new KeyNotFoundException();
        }
    }

    public void Add(TValue value,object key1, params object[] keys) // key1 to force minimum 1 key
    {
        Add(key1 , value);
        foreach( var key in keys)
        {
        Add (key, value);
        }
    }

    private void Add(Object key, TValue value)
    {
        var internalKey = Guid.NewGuid();
        keys.Add( key, internalKey);
        values.Add(internalKey, value);     
    }   
} 
```

它可以用作

```
MultiKeyDictionary<string> dict = new MultiKeyDictionary<string>();
dict.Add("Hello" , 1,2,3,"StringKey"); // First item is value, remaining all are keys
Console.WriteLine(dict[1]); // Note 1 is key and not intex
Console.WriteLine(dict[2]); // Note 2 is key and not index
Console.WriteLine(dict["StringKey"]); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T18:14:32.920

怎么样

```
class MultiKeyLookup<A, B, C> : IEnumerable<Tuple<A, B, C>>
{
    private readonly ILookup<A, Tuple<B, C>> a;
    private readonly ILookup<B, Tuple<A, C>> b;
    private readonly ILookup<C, Tuple<A, B>> c;
    private readonly IEnumerable<Tuple<A, B, C>> order;

    public MultiKeyLookup(IEnumerable<Tuple<A, B, C>> source)
    {
        this.order = source.ToList();
        this.a = this.order.ToLookup(
            o => o.Item1, 
            o => new Tuple<B, C>(o.Item2, o.Item3));
        this.b = this.order.ToLookup(
            o => o.Item2, 
            o => new Tuple<A, C>(o.Item1, o.Item3));
        this.c = this.order.ToLookup(
            o => o.Item3, 
            o => new Tuple<A, B>(o.Item1, o.Item2));
    }

    public ILookup<A, Tuple<B, C>> Item1
    {
        get
        {
            return this.a
        }
    }

    public ILookup<B, Tuple<A, C>> Item2
    {
        get
        {
            return this.b
        }
    }

    public ILookup<C, Tuple<A, B>> Item3
    {
        get
        {
            return this.c
        }
    }

    public IEnumerator<Tuple<A, B, C>> GetEnumerator()
    {
        this.order.GetEnumerator();
    }

    public IEnumerator IEnumerable.GetEnumerator()
    {
        this.order.GetEnumerator();
    }
} 
```

您会使用哪个，

```
var multiKeyLookup = new MultiKeyLookup(
    new[] {
        Tuple.Create(1, "some string 1", new MyType()),
        Tuple.Create(2, "some string 2", new MyType())}); 

var intMatches = multiKeyLookup.Item1[1];
var stringMatches = multiKeyLookup.Item2["some string 1"];
var typeMatches = multiKeyLookup.Item3[myType]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-11T17:13:50.463

您可以获得的最接近的东西可能是`HashSet<Tuple<int, string, MyType>>`. HashSets 自动检查重复项，并`Tuple`检查它的值是否相等。

```
class MultiKey<T1, T2, T3> : HashSet<Tuple<T1, T2, T3>>
{
    public bool Add(T1 t1, T2 t2, T3 t3)
    {
        return this.Add(Tuple.Create(t1, t2, t3));
    }
    public T1 Get(T2 t2, T3 t3)
    {
        var match = this.SingleOrDefault(x => x.Item2.Equals(t2) && x.Item3.Equals(t3));
        if (match == null) return default(T1);
        else return match.Item1;
    }
    public T2 Get(T1 t1, T3 t3)
    {
        var match = this.SingleOrDefault(x => x.Item1.Equals(t1) && x.Item3.Equals(t3));
        if (match == null) return default(T2);
        else return match.Item2;
    }
    public T3 Get(T1 t1, T2 t2)
    {
        var match = this.SingleOrDefault(x => x.Item1.Equals(t1) && x.Item2.Equals(t2));
        if (match == null) return default(T3);
        else return match.Item3;
    }
} 
```

用法：

```
key.Add(1, "Foo", new MyType("foo"));
key.Add(2, "Bar", new MyType("bar"));
key.Add(2, "Bar", new MyType("bar")); // Does not add, because it already exists.
var key1 = key.Get("Bar", new Foo("bar")); // Returns 2
var defaultKey = key.Get("Bar", new Foo("foo")); // Returns 0, the default value for an int
var key2 = key.Get(1, new Foo("foo")); // returns "Foo" 
```

`MyType`如果您将它与很多`new`s一起使用，您需要确保根据其值比较相等性。否则，创建一个新的将保证一个独特的价值。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-01-11T17:06:37.270

[`System.Tuple`](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)添加时牢记将其用作字典键。用法：

```
var dict = new Dictionary<Tuple<string, int>, DateTime>();
dict.Add(Tuple.Create("Louis", 14), new DateTime(1638, 9, 5)); 
```

虽然元组语法很麻烦，但静态工厂方法在创建站点上承担了很多痛苦。

# php - 遍历数组时返回的奇怪值

> ID：14282808
> 
> 赞同：2
> 
> 时间：2013-01-11T16:49:32.043
> 
> 标签：php, arrays, foreach

```
$rows = getChallengeList();
error_log(print_r($rows, 1));
?>
<table border="1">
    <tr><th>ID</th><th>Title</th><th>Description</th></tr>
    <?php foreach ($rows as $row): ?>
        <?php foreach($row as $chal): ?>
        <tr>
            <td><?= $chal['loyalty_challenges_id']; ?></td>
            <td><?= $chal['title']; ?></td>
            <td><?= $chal['description']; ?></td>
        </tr>    
        <?php endforeach; ?>
    <?php endforeach; ?>
</table> 
```

error_log 返回：

```
[11-Jan-2013 10:44:27] Array
(
    [0] => Array
        (
            [loyalty_challenges_id] => 1
            [title] => New Customer Special
            [description] => Reward new customers with a free order of breadsticks after placing their second order during their first 30 days 
        )

    [1] => Array
        (
            [loyalty_challenges_id] => 2
            [title] => Frequent Flyer Special
            [description] => Reward long-time customers who order often with a free pizza
        )

) 
```

但循环呈现的值如下所示：

```
<table border="1">
    <tr><th>ID</th><th>Title</th><th>Description</th></tr>
    <tr>
        <td>1</td>
        <td>1</td>
        <td>1</td>
    </tr>    
    <tr>
        <td>N</td>
        <td>N</td>
        <td>N</td>
    </tr>    
    <tr>
        <td>R</td>
        <td>R</td>
        <td>R</td>
    </tr>    
    <tr>
        <td>2</td>
        <td>2</td>
        <td>2</td>
    </tr>    
    <tr>
        <td>F</td>
        <td>F</td>
        <td>F</td>
    </tr>    
    <tr>
        <td>R</td>
        <td>R</td>
        <td>R</td>
    </tr>    
</table> 
```

知道什么会导致这种情况吗？自从我使用直接 php 而不是拥有自己的数组处理功能的 CMS 以来，已经有一段时间了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T16:52:25.377

你有一个循环太多：

```
$rows = getChallengeList();
error_log(print_r($rows, 1));
?>
<table border="1">
    <tr><th>ID</th><th>Title</th><th>Description</th></tr>
    <?php foreach ($rows as $chal): ?>
        <tr>
            <td><?= $chal['loyalty_challenges_id']; ?></td>
            <td><?= $chal['title']; ?></td>
            <td><?= $chal['description']; ?></td>
        </tr>    
    <?php endforeach; ?>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:52:58.980

你只需要一个`foreach`：

```
<?php foreach ($rows as $row): ?>
    <tr>
        <td><?php echo $row['loyalty_challenges_id']; ?></td>
        <td><?php echo $row['title']; ?></td>
        <td><?php echo $row['description']; ?></td>
    </tr>    
<?php endforeach; ?> 
```

**发生了什么 ？**

当您循环时，`$chal`您会循环每个键，并且当您尝试访问时 `$chal['loyalty_challenges_id'];`

是一样的

`$rows[0]['loyalty_challenges_id']['loyalty_challenges_id']`

这被翻译成

`$rows[0]['loyalty_challenges_id'][0]`

这就是为什么你得到每行的第一个字母。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T16:52:35.867

尝试 ：

```
<?php foreach ($rows as $row): ?>
    <tr>
        <td><?php echo $row['loyalty_challenges_id']; ?></td>
        <td><?php echo $row['title']; ?></td>
        <td><?php echo $row['description']; ?></td>
    </tr>    
<?php endforeach; ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T16:52:47.047

```
 <?php foreach($row as $chal): ?>
    <tr>
        <td><?= $chal['loyalty_challenges_id']; ?></td>
        <td><?= $chal['title']; ?></td>
        <td><?= $chal['description']; ?></td>
    </tr>    
    <?php endforeach; ?> 
```

这个 foreach 是不需要的。删除它，然后使用`$row['loyalty_challenges_id']`等。

# android - 如何覆盖xml中的默认背景颜色？

> ID：14282809
> 
> 赞同：1
> 
> 时间：2013-01-11T16:49:32.710
> 
> 标签：android, android-layout, inheritance, background-color, overwrite

我的`main.xml`文件除其他外包含有关应用程序背景颜色的信息：

```
android:background="@color/background_default" 
```

我也有不同的样式供用户选择，保存在其他 xml 文件中。当用户选择其中之一时，我希望`main.xml`覆盖其中包含的默认值。

不幸的是，只有文本颜色被覆盖，背景颜色没有改变。这是其中一种自定义样式：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="Light">
        <item name="android:textColor">@color/text_light</item>
        <item name="android:windowBackground">@color/background_light</item>
        <item name="android:colorBackground">@color/background_light</item>
    </style>
</resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:16:33.227

您可以`android:background="@color/background_default"`从 main.xml 中省略，并应用使用该颜色的默认主题。然后，当用户更改主题时，背景将随之更改。

您不能使用主题来覆盖在视图 xml 中指定的颜色；视图更具体并覆盖主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:51:10.807

在您的样式上使用 parent 属性来继承默认主题，然后覆盖：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="Light" parent="android:Theme">
        <item name="android:textColor">@color/text_light</item>
        <item name="android:windowBackground">@color/background_light</item>
        <item name="android:colorBackground">@color/background_light</item>
    </style>
</resources> 
```

# mongodb - 如何使用 MongoDB 进行报告？

> ID：14282817
> 
> 赞同：29
> 
> 时间：2013-01-11T16:49:47.943
> 
> 标签：mongodb, reporting

我正在考虑将 MongoDB 用于我的下一个大项目，但我有几个担忧。特别是，我该如何进行报告？

我的理解是，我无法执行通常在关系数据库中执行的相同类型的连接和聚合。我想到的报告涉及以严格的标准汇总来自不同“表”的大量数据。

这在 MongoDB 中很容易实现吗，还是会让人头疼？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-04-15T17:49:24.057

虽然 Pentaho 和 Jaspersoft 以及其他遗留报告解决方案有办法从 MongoDB 中提取数据，但有两种较新的解决方案专门设计用于分析和报告 MongoDB 数据：

*   [JSON工作室](http://jsonstudio.com)。这是一个商业解决方案，可让您直观地构建聚合管道并将它们连接到图表。
*   [大满贯数据](http://slamdata.com)。这是一个开源解决方案，可让您通过 GUI 界面或 API 直接在 MongoDB 上运行 SQL 查询（包括 JOIN、GROUP BY、HAVING 等）。该项目的当前版本已内置数据可视化，并允许您创建报告仪表板并将其嵌入到 MongoDB 应用程序中。

因为这两种方法都在 MongoDB 之上运行（相对于其他方法，即抽取数据并将其标准化以在 Mondrian 或其他方式中报告），它们对于 MongoDB 报告来说更容易、更自然。另一方面，由于数据没有加载到全内存多维数据集中（例如），如果您尝试实时生成复杂的报告，报告体验可能会受到影响。

*免责声明*：我是 SlamData 项目的贡献者，尽管我与 JSON Studio 没有任何关系。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T15:32:03.420

好像 JasperReports 和 Pentaho 这样的开源工具可以连接到 MongoDB，如果你想跳到 NoSQL 船但又不想跳到 NoSQL 船，你可以使用像[Simba 的](http://www.simba.com/MongoDB-ODBC-Driver-SQL-Connector.htm)那样的 ODBC 或 OLE DB 驱动程序，然后使用任何普通的 SQL 报告工具，如[DBxtra](http://www.dbxtra.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-26T05:02:38.090

一般来说，不要仅仅因为你想在生产环境中尝试一些新的东西而使用 mongodb：这会给你带来很多麻烦。关于何时使用它有一篇很棒的 Stackoverflow 帖子：[https ://stackoverflow.com/a/1477354/1248724](https://stackoverflow.com/a/1477354/1248724)

关于报告： [Map-Reduce](http://docs.mongodb.org/manual/core/map-reduce/)，尤其是增量的，会对您有很大帮助，但您不能将 mongoDB 视为关系数据库。它只是不是一个。例如查询子文档的疯狂。mongoDB [Aggregation-Framework](http://docs.mongodb.org/manual/core/aggregation-pipeline/)在大多数情况下会做得很好，但与 SQL 相比有其局限性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-18T20:39:11.590

如果您使用的是 .NET，使用 DexExpress 报告可以轻松编写报告。它适用于 MongoDb .NET 驱动程序，只有一个限制，您必须为您在数据中使用的每个聚合具有强类型。您可以从主应用程序数据库提供程序中使用的所有类型，所以这不会是一个大麻烦。如果您的 MongoDB 集合类似于 SQL 数据表，则可以使用 ODBC 驱动程序，这种方式非常有限，但您可以使用任何与 ODBC 连接一起使用的报告服务。我更喜欢首先使用：“DevExpress”XtraReports。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-22T09:12:40.663

不确定您是否可以在 MongoDB 中完成所有报告以及是否有足够的响应时间。因此，您可以为此目的在 MongoDB 之上添加一个工具。例如，[icCube](http://www.icCube.com)现在支持[MongoDB](http://www.iccube.com/iccube/accessing-mongodb-iccube/)用于这种用途。提取整个数据集是没有意义的，但大多数时候用于报告和分析的数据只代表整体的一小部分，连接内存中的 OLAP 工具进行报告和分析是有意义的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-23T13:56:56.327

MongoDB 报告变得更容易，因为它具有聚合框架，该框架提供了一个可以连接到报告软件的 api。这是一篇提供有关 MongoDB 报告和可视化的详细信息的文章[http://blog.jinfonet.com/mongodb-reporting-visualization-jreport/](http://blog.jinfonet.com/mongodb-reporting-visualization-jreport/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-14T13:45:13.600

据我所知，没有简单的方法可以像在 Mongo 的关系数据库中那样执行连接、聚合等。您可以为此使用不同的外部分析工具。在我的公司，我们使用[Sisense](http://www.sisense.com/mongodb-connector/)并通过 ODBC 驱动程序将其连接到 MongoDB，这使我们可以在数据上使用类似 SQL 的功能，并且效果很好。但是，我不知道在 MongoDB 中本地执行此操作的方法。

# facebook - 如何使用公共访问令牌获取用户的公共位置？

> ID：14282820
> 
> 赞同：1
> 
> 时间：2013-01-11T16:49:51.937
> 
> 标签：facebook, location

我已经尝试了很多搜索，但无法找到相关的答案。当我浏览他们的 Facebook 个人资料时，我可以看到该人的位置，例如[https://www.facebook.com/nitin.karkera](https://www.facebook.com/nitin.karkera)已公开他的位置。

但使用图形 api 资源管理器，我无法通过此调用获取位置

> nitin.karkera?fields=id,name,location

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:05:33.527

我想你错过了许可：`friends_location`/ `user_location`。设置此权限后尝试相同的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T03:36:12.627

不，文档清楚地表明你不能。唯一的选择是抓取 Facebook 网页并等待他们的法律部门与您联系。

# c# - HealthVault 的 WebApplicationUtilities.GetPersonInfo( authToken ) 究竟需要什么功能？

> ID：14282822
> 
> 赞同：0
> 
> 时间：2013-01-11T16:50:09.310
> 
> 标签：c#, asp.net-mvc, healthvault

我在绕圈子跑。我在我们的 ASP.NET MVC 应用程序中使用 HealthVault SDK（来自 NuGet 的最新版本）。我的目标是向用户授权我们的 HealthVault 应用程序，检索他们的 PersonID 和 RecordID 并将它们存储在我们的数据库中。我无法获得`PersonInfo`.

首先，根据[http://msdn.microsoft.com/en-us/library/ff803620.aspx#AUTH](http://msdn.microsoft.com/en-us/library/ff803620.aspx#AUTH)我将用户重定向到 HealthVault 进行登录。

`https://account.healthvault-ppe.com/redirect.aspx?target=AUTH&targetqs=?appid={AppId}%26redirect%3d{ReturnUrl}`

我被成功重定向，我授权我的记录和应用程序，我被重定向回来。

```
var target = Request.QueryString[ "target" ];
if (target == "APPAUTHSUCCESS") {
    var token = Request.QueryString[ "wctoken" ];
    var p = WebApplicationUtilities.GetPersonInfo( token );
} 
```

上面的代码失败了。扔就行了`var p = WebApplicationUtilities.GetPersonInfo( token )`。

> Microsoft.Health.HealthServiceAccessDeniedException：访问被拒绝。

令牌不为空，应用程序拥有所有权限并返回成功，但始终抛出拒绝访问。什么可能是错的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:36:30.280

在我的情况下，当我的 PFX 文件中的私钥（在 web.config 中配置）与应用程序的公钥不匹配时，就会发生这种情况。
我仍在使用测试环境并使用[https://config.healthvault-ppe.com](https://config.healthvault-ppe.com)来配置我的应用程序。
尝试从 PFX 文件中提取公钥（制作 .cer 文件）并将其作为应用程序的公钥上传。

# .net - Soap 服务方法参数错误与 AffiliateWindow 的 AffiliateService

> ID：14282823
> 
> 赞同：0
> 
> 时间：2013-01-11T16:50:14.213
> 
> 标签：.net, soap, wsdl

我正在实施位于**[此处](http://api.affiliatewindow.com/v4/AffiliateService?wsdl)****的 AffiliateWindow 的 AffiliateService** (Soap) 。

我只需要从这个服务中调用两个方法。我在 VS 2010 中有一个项目设置，并添加了 Web Servcie 参考和代理类。除了我需要输入 TransactionId 以获取交易的阶段之外，每件事都运行良好。它返回并错误说 TransactionId 不正确。

另一方面，我可以使用日期和 DateType 调用方法 (getTrasactionList)。但是当我尝试将 TrasactionId 或 MerchantId 传递给任何一种方法时，我都会收到此错误。

异常详细信息还告诉 Array 为空。但我像这样填充数组

`var gTrIdi = new getTransaction
{
aTransactionIds = new ArrayOfint() { id = "'86862924'" }
};`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:27:03.797

我得到了答案。问题出在代理类上。

改为`private ArrayOfInt aTransactionIdsField;`
在课堂上`private int[] aTransactionIdsField;`，`getTransaction`它就像一个魅力。

# ruby-on-rails - 雾挂在 Fog::Compute.servers.bootstrap

> ID：14282825
> 
> 赞同：2
> 
> 时间：2013-01-11T16:50:18.767
> 
> 标签：ruby-on-rails, fog

我正在使用雾在 EC2 上配置服务器。

我有：

```
EC2 = Fog::Compute.new 提供者：'AWS'，
                       aws_access_key_id：AWS_ACCESS_KEY，
                       aws_secret_access_key：AWS_SECRET_KEY

s = EC2.servers.bootstrap image_id：AMI_ID，
                              flavor_id: FLAVOR_ID,
                              private_key_path: '~/.ssh/id_rsa',
                              public_key_path: '~/.ssh/id_rsa.pub',
                              标签：{名称：TAGGED_NAME}，
                              用户名：ROOT_USER

```

当我在 rakefile 中运行它并且它挂`s = EC2.servers.bootstrap`了很长时间。

有什么想法或指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:48:11.260

我也遇到了这个问题。在部署了几个 EC2 实例后，我最终卡住了（它确实工作了 1 晚，然后在第二天早上卡住了）。

我的快速解决方法是登录 Amazon EC2，删除与我的部署关联的密钥对.. IE：

```
EC2 = Fog::Compute.new provider:              'AWS',
                       region:                REGION,
                       aws_access_key_id:     AWS_ACCESS_KEY,
                       aws_secret_access_key: AWS_SECRET_KEY

Fog.credential = waffles
s = EC2.servers.bootstrap image_id:   AMI_ID,
                          flavor_id:  FLAVOR_ID,
                          private_key_path: '~/.ssh/id_rsa',
                          public_key_path: '~/.ssh/id_rsa.pub',
                          tags:       { Name: TAGGED_NAME },
                          username: ROOT_USER 
```

这将创建一个名为“fog_waffles b6:21:d1:3d:2b:b9:e7:48:b9:75:50:3f:03:5b:fb:85”的密钥对。删除它，您应该能够继续前进。

据我所知**，如果您创建具有相同密钥对名称的新实例，则密钥对不会得到更新/替换**。如果您删除该实例，然后使用**具有相同名称的新密钥对**创建一个新实例，它似乎会遇到问题。

有关[EC2 密钥对的更多信息](http://docs.aws.amazon.com/AWSSecurityCredentials/1.0/AboutAWSCredentials.html#EC2KeyPairs)

**附录**

我使用的雾的版本是 1.9。

如果您有多个人创建实例，您可能希望使用以下内容：

```
EC2 = Fog::Compute.new provider:              'AWS',
                       region:                REGION,
                       aws_access_key_id:     AWS_ACCESS_KEY,
                       aws_secret_access_key: AWS_SECRET_KEY

Fog.credential = waffles
s = EC2.servers.bootstrap image_id:   AMI_ID,
                          flavor_id:  FLAVOR_ID,
                          private_key_path: '~/.ssh/id_rsa',
                          public_key_path: '~/.ssh/id_rsa.pub',
                          tags:       { Name: TAGGED_NAME },
                          username: ROOT_USER

EC2.delete_key_pair("fog_waffles") 
```

这将确保密钥对永远不会发生冲突。删除它是可以的，因为它只是部署实例时需要的。部署实例后，Fog 会将您的公钥放入 authorized_keys 中，这样您就可以访问该实例。

另一种选择是将 Fog.credential 更改为对每个用户都是唯一的（而不是删除它）。IE：

```
Fog.credential = waffles_ryan 
```

# visual-studio-2012 - VS、Nuget、TFS - 管理复杂的内部依赖结构

> ID：14282828
> 
> 赞同：3
> 
> 时间：2013-01-11T16:50:22.710
> 
> 标签：visual-studio-2012, nuget, dependency-management

由于我们构建/维护的产品数量众多，我们有一个相当复杂的 dll 结构（>100 个程序集）。我们正在安装 TFS 2012。我们目前使用 NuGet 来管理对外部 dll 的引用。

Nuget 似乎可以成为管理我们内部 dll 的解决方案。

这是我们的结构示例：

*   框架.dll
*   业务.dll
    *   参考：Framework.dll
*   业务.X.dll
    *   参考：Framework.dll
    *   参考：Business.dll
*   应用程序.X.dll
    *   参考：Framework.dll
    *   参考：Business.X.dll
    *   参考：Business.dll

为了使用 NuGet 完成此任务，我为每个程序集创建了一个 nuget 规范/包。然后每个包都包括其依赖包。

*   框架.1.0.nupkg
*   Business.1.0.nupkg
    *   取决于：框架
*   Business.X.1.0.nupkg
    *   取决于：框架、业务
*   应用程序.X.1.0.nupkg
    *   取决于：框架、业务、Business.X

1）我创建了Framework VS项目，构建它，并将其打包到Framework.1.0.nupkg 2）我打开了Business VS项目并通过安装Framework.1.0.nupkg添加了对Framework.dll的引用3）然后我构建并将Business VS项目打包为Business.1.0.nupkg 4）我为每个程序集重复了这个过程（仅供参考，我使用NuGetter来自动化这个）

我无法协调本地开发人员机器和构建服务器之间的差异。

以下是我的理解：

1.  由于 NuGet 的包还原功能，我不需要将最终程序集存储在 TFS 中。
2.  不是引用程序集，而是使用 NuGet 添加引用。例如，在 Business VS 项目中，框架程序集是从 Nuget Framework.1.0 包中添加的。

但是，这使得程序集开发人员难以构建/测试新功能。开发 Business 和 Business.X 程序集的开发人员应该如何在不删除/读取引用的情况下在本地（在他们自己的机器上）测试功能。这是必要的，因为 Business.X 引用的是打包的 Business，而不是本地构建的 Business.dll。

我的目标：

1.  使用构建服务器生成版本化的共享程序集
2.  允许消费者应用程序添加对这些程序集的引用
3.  允许共享程序集的开发人员在需要服务器构建之前轻松地在本地编译/测试

我认为 Nuget 适用于 #1 和 #2，但我似乎无法完成 #3。有一个更好的方法吗？

感谢您提供任何信息/指针！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T20:48:35.843

每个程序集（DLL）一个单独的 NuGet 包是多余的 - 我希望您的大多数内部 NuGet 包包含一组程序集，这些程序集提供了一个基本上独立于其他程序集组的功能“块”。

所以这不是正确的模式：

> 为了使用 NuGet 完成此任务，我为每个程序集创建了一个 nuget 规范/包。

相反，您可能希望为每个解决方案 (.sln) 创建一个或两个 NuGet 包，假设您的解决方案已合理分组。

# visual-studio - VS 2012 和 TFS 2010 的签入策略错误 - CheckForWarningsPolicy

> ID：14282830
> 
> 赞同：5
> 
> 时间：2013-01-11T16:50:28.860
> 
> 标签：visual-studio, visual-studio-2012

对于我们在公司创建的每个项目，我们都使用 Team Foudation Server 2010 和 Visual Studio 2010。我们创建了一些后期构建事件、一些签入策略，并且一切正常。

最近我们迁移到 Visual Studio Professional 2012（版本 11.0.51106.06 更新 1），现在，每次我们尝试签入一些代码时，都会收到以下错误：

> 检查编译警告和错误策略中的内部错误。加载检查编译警告和错误策略策略时出错（策略程序集 'CheckForWarningsPolicy, Version=2.1.0.0, Culture=neutral, PublicKeyToken=342882479c9e5e25' 未注册。）。安装说明：要安装此策略，请阅读 ReadMe.txt。
> 
> 加载检查编译警告和错误策略策略时出错（策略程序集 'CheckForWarningsPolicy, Version=2.1.0.0, Culture=neutral, PublicKeyToken=342882479c9e5e25' 未注册。）。安装说明：要安装此策略，请阅读 ReadMe.txt。

错误末尾引用的 ReadMe.txt 无法访问，没有链接或指示文件在哪里。

我已经在谷歌和这里搜索了这个答案，但没有任何运气。可能我做错了搜索。

我读了一些问题，例如：

*   [Visual Studio 2012 和 TFS 2010 中的自定义策略](https://stackoverflow.com/questions/12007626/custom-policies-in-visual-studio-2012-and-tfs-2010)
*   [TFS 2012 和 VS 2010](https://stackoverflow.com/questions/11111346/tfs-2012-and-vs-2010)

但他们都没有为我工作。我能做些什么来解决这个错误？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:02:42.830

我“解决”了这个错误，我会发布我所做的，以便任何面临同样问题的人都可以从我的经验中学习。

为了在 Visual Studio 2010 中创建此签入策略，我们使用了由[Jeff Bramwell 开发的自定义策略（链接到 MSDN 配置文件）](http://social.msdn.microsoft.com/profile/jeff%20bramwell/?ws=usercard-hover)。[正如您在 MSDN](http://visualstudiogallery.msdn.microsoft.com/703dd1e0-4af3-4b45-8ef8-bf1a1e1d2cd2)的政策页面中所见，这项政策显然不是由他维护的。我在页面上问了一个问题并给他发了一条推文，现在我会等待他的回答。

在 Visual Studio 2010 中测试此策略我检查它是否不起作用，因此，我只是将其从项目中的项目 > 设置 > 源代码管理 > 签入策略中删除。

如果我需要更详细的信息，我可以添加代码分析签入策略，如[Stack Overflow 问题中关于“如果存在代码分析警告时阻止签入”中](https://stackoverflow.com/questions/9501339/tfs2010-prevent-check-in-if-code-analysis-warning-exists)所述。通过这种方法，我什至可以设置自定义规则。

希望这会帮助有同样问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:25:13.877

您必须在 2012 年安装 2010 签入策略。最简单的方法是在使用签入策略的每台计算机上的 Visual Studio 2012 注册表 hyve 中注册现有程序集。然后看看它们现在是否也适用于 Visual Studio 2012。您可以尝试使用绑定重定向来解决任何版本控制问题。[此博客文章中解释了设置绑定重定向](http://blog.jessehouwing.nl/2012/03/using-existing-check-in-policies-with.html)的过程。

如果您使用的 API 在 Visual Studio 2012 中发生了更改，那么您可能必须编译新版本的 Checkin Policy 并使用 checkin 策略在每台机器的 2012 注册表 hyve 中注册它。

我已经引用的博客文章还解释了您需要在哪个注册表 hyve 下注册您的策略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T04:20:16.557

您需要重新编译 2012 studio 下的策略，因为其中的 TFS API 不同 - 程序集版本是 11.0，而 2010 是 10.0

# three.js - webgl opacity issue, flickering

> ID：14282834
> 
> 赞同：0
> 
> 时间：2013-01-11T16:50:41.013
> 
> 标签：three.js, webgl

I would like to add "water" to my scene but i'm experiencing flickering whenever my camera gets into the water.

I created a fiddle [here](http://jsfiddle.net/JaU3M/), if I move the camera inside the transparent cube the face which touches the face of the solid cube starts to flicker when moving the camera arround.

I tried disabling the depthTest which resolves the flickering issue but when moving the camera the transparent cube is visible when placing the camera behind the solid cube looking at the transparent cube so that's not an option.

I googled a lot and also had a look at some questions at SO and what I found so far is that it's a `depth-buffer` issue. Also I read that one should draw the solid objects after the translucent objects have been drawn but I think three.js does that for me?

Altogether I haven't found an answer which helps me solving this, I understand that transparency isn't the easiest thing to do in three.js / webgl but I would appreciate some hints on how i can overcome this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:12:26.343

The problem is likely the coincident faces.

Remove the touching transparent face.

# authentication - 树枝中的 app.user.username 返回无法添加全局

> ID：14282842
> 
> 赞同：4
> 
> 时间：2013-01-11T16:51:11.153
> 
> 标签：authentication, symfony, twig

根据文档：

```
http://symfony.com/doc/current/book/security.html#retrieving-the-user-object 
```

我正在尝试使用 twig 来检查用户是否已通过身份验证

当我放入我的树枝模板时：

```
{{ app.user.username }} 
```

我得到错误

```
LogicException: Unable to add global "app" as the runtime or the extensions have already been initialized. 
```

**编辑：**请按照下面的 composer.json 内容查找

```
{
    "name": "symfony/framework-standard-edition",
    "description": "The \"Symfony Standard Edition\" distribution",
    "autoload": {
        "psr-0": { "": "src/" }
    },
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.1.*",
        "doctrine/orm": ">=2.2.3,<2.4-dev",
        "doctrine/doctrine-bundle": "1.0.*",
        "twig/extensions": "1.0.*@dev",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.1.*",
        "symfony/monolog-bundle": "2.1.*",
        "sensio/distribution-bundle": "2.1.*",
        "sensio/framework-extra-bundle": "2.1.*",
        "sensio/generator-bundle": "2.1.*",
        "jms/security-extra-bundle": "1.2.*",
        "jms/di-extra-bundle": "1.1.*",
        "kriswallsmith/assetic": "1.1.*@dev",
        "doctrine/data-fixtures": "dev-master",
        "doctrine/doctrine-fixtures-bundle": "dev-master"
    },
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ]
    },
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web"
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:01:06.160

没有更多细节很难回答这个问题。

首先，请注意过去也有过类似的异常，这是由于`Symfony2.1`最近版本已解决的一个错误：[请参阅此处了解更多详细信息](https://github.com/symfony/symfony/issues/6174)。

然后，请注意错误似乎是在`addGlobal`class 的函数中抛出的`Twig_Environment`。你安装了这样的 Twig Extension 吗？

如果不阅读您的`composer.json`，我可以建议尝试：

1.  清除缓存。
2.  **更新**, 中的代码`composer.json`以避免出现最新的捆绑包。
3.  创建`composer.phar`.
4.  然后编译得到`composer.phar`.
5.  `php composer.phar install`或者`php composer.phar update`，无论您的情况如何。

希望能帮助到你。

# html - 纯文本的 HTML 电子邮件 MIME 类型

> ID：14282846
> 
> 赞同：0
> 
> 时间：2013-01-11T16:51:17.267
> 
> 标签：html, email, mime

我有一个客户/朋友正在准备通过机构访问发送电子邮件。他们需要一个包含 html 的包罗万象的文档，以及一个 HTML 文档中电子邮件的纯文本版本。我认为我有一个基本的了解，但有点困惑。我通常使用 Mailchimp 来处理我的电子邮件营销。

所以我们将使用常规的 html 文档

```
<html>
<head>
<title>Our Email</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>
<body>
 our html markup

</body>
</html> 
```

但是，是不是在下面的某个地方，我们为纯文本版本声明了一个替代的 mime 类型，然后电子邮件客户端选择显示哪个？并且这两个都必须包装在多部分/混合的 mime 类型中吗？

我知道这可能很简单，但我读过的大部分内容都处理了发送邮件的 PHP 文件中的 MIME 类型声明，但我们需要在此文档中进行区分。真的只是想知道这应该如何构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:06:53.380

So it was confusion for nothing. The service implied that the user was expected to upload a single document to cover the both(which implies needed to specify MIME-types in the document), but this was not the case, as they required everything to fall inside html markup. The service itself was supposed to offer the additional step to insert the plain text version, and it was a bug on their part that they are working on. Hope that makes sense, but thanks for the responses guys

# asp.net-mvc-3 - IIS7.5 网站上的 MVC 3 Windows 身份验证挑战（默认情况下不是应用程序）Windows Server 2008 R2 VM

> ID：14282847
> 
> 赞同：1
> 
> 时间：2013-01-11T16:51:19.593
> 
> 标签：asp.net-mvc-3, iis-7.5, windows-server-2008, windows-authentication

需要您的建设性建议和任何帮助。我正在 Windows Server 2008 R2 上的 IIS7.5 中为我的公司 Intranet（不是现有默认网站下的应用程序！）创建一个新网站，并且似乎无法通过 Windows 身份验证的身份验证问题获得。我已经浏览了 StackOverflow 以及其他网站上的所有文章和帖子，但目前还没有找到可行的解决方案。

我在 IIS7.5 中创建和配置这个新站点的步骤：

1.  RDC 到我的 VM，我在 IIS 7.5 上创建新网站。打开 IIS 管理器。
2.  没有更改默认网站，它没有绑定到主机名，所有未分配的 IP 地址，端口 80。它仍然存在。
3.  右键单击“站点”，“添加网站...”，提供站点名称“sit”，应用程序池：DefaultAppPool，物理路径指向应用程序，适用于开发服务器（VS2010）。
4.  单击“测试设置...”显示身份验证网格图标，授权黄色感叹号：“无法验证对路径的访问”。
5.  检查我的物理路径目录以获取 Windows 安全访问权限（Windows 资源管理器），但找不到 DefaultAppPool 帐户以添加到 NT 安全访问权限。暂时就这样吧。
6.  在“添加网站”表单的“绑定”部分，如上所述使用，我留下类型：HTTP，IP 地址：全部未分配，端口：80。在主机名中：我提供“sit”，与站点名称相同以上。
7.  单击确定。站点已创建，显示在“站点”窗口的右窗格中。单击最右侧垂直“操作”面板上的“浏览坐在 *:80(http)”超链接。浏览器 IE8 启动，我收到关于 DNS 查找无法找到“sit”的错误，这是我在步骤 5 中提到的主机名。
8.  我转到 System32\drivers\etc 目录中的“主机”文件，添加条目：{MachineIP} 坐下，保存。
9.  重新加载浏览器，现在它要求我提供 Windows 凭据。在盒子上提供我的管理员凭据 3 次，浏览器会给我以下消息：

“HTTP 错误 401.1 - 未经授权您无权使用您提供的凭据查看此目录或页面。

**登录方式尚未确定**

**登录用户尚未确定**

10.在 IIS7.5 中检查我的身份验证。它是从我的 Web 配置中正确解密的：Windwos Authentication Enabled，响应类型 HTTP 401 Challenge。匿名身份验证已禁用。这是我的 web.config 安全设置：

```
 <system.webServer>
    <security>
    <authentication>
  <anonymousAuthentication enabled="false" userName="" />
  <windowsAuthentication enabled="true" useKernelMode="false" useAppPoolCredentials="true"> 
                <providers>
                    <clear />
                    <add value="NTLM" />
                    <add value="Negotiate" />
                </providers>
                <extendedProtection tokenChecking="Allow" />
            </windowsAuthentication>
        </authentication>
    </security>
<validation validateIntegratedModeConfiguration="false" />
<modules runAllManagedModulesForAllRequests="true" />
    </system.webServer>
    <system.web>
    <authentication mode="Windows" />
    <identity impersonate="false" /> 
```

我的 Windows Athentication 模块都在 IIS 中安装和引用。

这是我无法继续进行的地方，我需要你的帮助。我错过了一些东西，但我无法弄清楚它是什么。当我返回该站点并打开“基本设置”时，我在“测试连接”弹出窗口的“授权”中看到了令人生畏的黄色感叹号，但我似乎无法弄清楚如何解决它：我已登录以管理员身份进入我的虚拟机，我为我的应用程序的物理位置提供了完全访问权限，我尝试在站点以及应用程序池上使用我的管理员帐户，我已经在物理应用程序目录中添加了所有人帐户，并具有读取执行权限权限，添加了IUSR，IIS_IUSRS，NETWROK SERVICE等权限，仍然无济于事。我不是特别明白：

1.  为什么浏览器会提示我输入凭据，即使我的浏览器设置显示“使用当前用户名和密码自动登录”，并且我的站点主机名已添加到“本地 Intranet”列表中？

2.  为什么我提供有效凭据（3 次）后，仍然得到“登录方法：尚未确定”和“登录用户：尚未确定”？

这是我的请求，被 Fiddler 抓住了：

-[NTLM Type3：身份验证]------------------------------ 提供者：NTLMSSP 类型：3 操作系统版本：6.1:7601 标志: 0xa2888205 安全缓冲区支持 Unicode。请求服务器的身份验证领域包含在 Type2 回复中。NTLM 身份验证。协商总是签字。协商 NTLM2 密钥。提供用于计算 NTLMv2 响应的目标信息块。支持 56 位加密。支持 128 位加密。lmresp_Offset：160；lmresp_Length：24；lmresp_Length2：24 ntresp_Offset：184；ntresp_Length：24；ntresp_Length2：24 Domain_Offset：88；域_长度：12；Domain_Length2：12 User_Offset：100；用户长度：36；User_Length2：36 Host_Offset：136；主机长度：24；Host_Length2：24 msg_len：208 域：BLAHBLAH 用户：sergey ivanchenkov 主机：LLLBBBAAA001 lm_resp：

有没有人有任何好的建议来解决这个问题？衷心感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T15:11:36.983

我知道这有点晚了，但我遇到了同样的问题，这对我有帮助： [https ://serverfault.com/questions/485006/why-cant-i-log-in-to-a-windows-protected-iis -7-5-服务器上的目录](https://serverfault.com/questions/485006/why-cant-i-log-in-to-a-windows-protected-iis-7-5-directory-on-the-server)

phoebus 在那里写道：

> 您几乎肯定会遇到 IIS 5.1 引入的 Windows 环回检查。这是一项安全功能，可避免针对系统的某些类型的反射攻击。
> 
> Microsoft 有一篇 KB 文章描述了解决方法。他们基本上归结为修改注册表以禁用环回检查，或允许某些主机名（例如您的本地主机名或站点名）进行反向连接。
> 
> 您可以通过 PowerShell 快速禁用检查：
> 
> 以下是微软的官方说明。请注意，尽管下面的说明指示重新启动，但我发现 IE 通常会立即获取更改。
> 
> 方法 1：指定主机名（如果需要 NTLM 身份验证，首选方法）
> 
> 1.  将 DisableStrictNameChecking 注册表项设置为 1。
>     2.  单击开始，单击运行，键入 regedit，然后单击确定。
>     3.  在注册表编辑器中，找到并单击以下注册表项：HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa\MSV1_0
>     4.  右键单击 MSV1_0，指向新建，然后单击多字符串值。
>     5.  键入 BackConnectionHostNames，然后按 Enter。
>     6.  右键单击 BackConnectionHostNames，然后单击修改。
>     7.  在数值数据框中，键入本地计算机上站点的主机名或主机名，然后单击确定。
>     8.  退出注册表编辑器，然后重新启动 IISAdmin 服务。
> 
> 方法2：禁用环回检查（不太推荐的方法）
> 
> 1.  将 DisableStrictNameChecking 注册表项设置为 1。
>     2.  单击开始，单击运行，键入 regedit，然后单击确定。
>     3.  在注册表编辑器中，找到并单击以下注册表项：HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa
>     4.  右键单击 Lsa，指向新建，然后单击 DWORD 值。
>     5.  键入 DisableLoopbackCheck，然后按 Enter。
>     6.  右键单击 DisableLoopbackCheck，然后单击修改。
>     7.  在数值数据框中，键入 1，然后单击确定。
>     8.  退出注册表编辑器，然后重新启动计算机。
> 
> 附录：
> 
> 要将 DisableStrictNameChecking 注册表项设置为 1：
> 
> 1.  单击开始，单击运行，键入 regedit，然后单击确定。
>     2.  在注册表编辑器中，找到并单击以下注册表项：HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\LanmanServer\Parameters
>     3.  右键单击参数，指向新建，然后单击 DWORD 值。
>     4.  键入 DisableStrictNameChecking，然后按 Enter。
>     5.  右键单击 DisableStrictNameChecking，然后单击修改。
>     6.  在数值数据框中，键入 1，然后单击确定。
>     7.  退出注册表编辑器，然后重新启动计算机。

# c# - C# - 上传后调整图像大小

> ID：14282848
> 
> 赞同：0
> 
> 时间：2013-01-11T16:51:20.253
> 
> 标签：c#, image, visual-studio

我正在尝试在上传后调整图像大小，但它不起作用

怎么了？

```
 private void button1_Click(object sender, EventArgs e)
    {
    OpenFileDialog open = new OpenFileDialog(); 

     open.Filter = "Image Files(*.jpg; *.jpeg; *.gif; *.bmp)|*.jpg; *.jpeg; *.gif; *.bmp"; 
       if (open.ShowDialog() == DialogResult.OK)
    {
        var imagem = new Bitmap(open.FileName);
        var resizedImage = new Bitmap(imagem, pictureBox1.Size);
       pictureBox1.Image = resizedImage;
        } 

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T17:06:31.830

PictureBox 已经具有调整图像大小的能力。

如果您使用该`Image`属性分配图像，则可以将[SizeMode](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.sizemode.aspx)属性设置为[StretchImage](http://msdn.microsoft.com/en-us/library/system.windows.forms.pictureboxsizemode.aspx)。这意味着您的代码将如下所示：

```
var imagem = new Bitmap(open.FileName);
pictureBox1.Image = imagem; 
```

如果要使用该`BackgroundImage`属性分配图像，则可以将[BackgroundImageLayout](http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.backgroundimagelayout.aspx)属性设置为[Stretch](http://msdn.microsoft.com/en-gb/library/system.windows.forms.imagelayout.aspx)。这意味着您的代码将如下所示：

```
var imagem = new Bitmap(open.FileName);
pictureBox1.BackgroundImage = imagem; 
```

* * *

根据个人经验，我发现 PictureBox 控件很痛苦。如果您需要在任何时候更改或删除图像，我总是发现我需要明确处理图像，否则它会给我带来内存泄漏，在某些情况下只是简单的错误。值得注意的是，当您需要在 WinForms 中进行自定义绘图或渲染时，`Panel`控件是一个更好的选择。您也可以在 a 上绘制图像`Panel`，但根据您的需要，您可能会发现只使用`PictureBox`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T17:04:56.497

您需要设置图片框的[SizeMode](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.sizemode.aspx)

来自 MSDN

> 默认情况下，在 Normal 模式下，Image 位于 PictureBox 的左上角，任何对于 PictureBox 来说太大的图像部分都会被剪裁掉。使用 StretchImage 值会使图像拉伸或收缩以适合 PictureBox。使用 Zoom 值会导致图像被拉伸或缩小以适合 PictureBox；但是，原始的纵横比保持不变。

因此，将设置`PictureBox1`从更改`Normal`为`StretchImage`或`Zoom`取决于您想要的影响。它将使它按照您的意愿行事，并且您可以删除调整大小的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T17:16:33.363

好吧，您不需要此代码，只需将 SizeMode 属性设置为 StretchImage。但是，您的代码不起作用的极其令人讨厌的原因是从一个图像更改为另一个图像本身并不会触发图片框重绘。

两种通常的解决方案是

在分配图像后调用`pictureBox1.Invalidate()`，或在分配图像`pictureBox1.Image = null`之前调用。

即使设置了 SizeMode，您也可能必须执行其中一项操作，如果图像与 PictureBox 大小相同，则不记得了。

# haskell - 存在主义的使用

> ID：14282851
> 
> 赞同：4
> 
> 时间：2013-01-11T16:51:28.567
> 
> 标签：haskell

我正在阅读这篇出色的论文[“结构化图的函数式编程，Bruno C. d. S. Oliveira”](http://www.cs.utexas.edu/~wcook/Drafts/2012/graphs.pdf)（[这里有一些视频](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&ved=0CEMQtwIwAg&url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DtQGh5oemhkw&ei=WkPwUOy5Huiy0QHE1oCgDQ&usg=AFQjCNEa4XoYzjfHQtBnzblM4fNp-pauHA&bvm=bv.1357700187,d.dmQ)），并且我正在尝试实现所有的结构。我正在努力使用存在主义。尽管作者提到了 Haskell throghout，但似乎这些类型在 Coq 或 Agda 中更容易表达。我怎样才能使这个编译？谢谢。

### 代码

```
data PStream a v = Var v
                 | Mu (v -> PStream a v)
                 | Cons a (PStream a v)

data Stream a = forall v. Pack {pop :: PStream a v} 

foldStream :: (a -> b -> b) -> b -> Stream a -> b
foldStream f k (Pack s) = pfoldStream s
    where pfoldStream (Var x)     = x
          pfoldStream (Mu g)      = pfoldStream (g k)
          pfoldStream (Cons x xs) = f x (pfoldStream xs) 
```

### 错误

```
error:
 Couldn't match type `v' with `b'
      `v' is a rigid type variable bound by
          a pattern with constructor
            Pack :: forall a v. PStream a v -> Stream a,
          in an equation for `foldStream'
          at C:\...\StructuredGraph.hs:17:17
      `b' is a rigid type variable bound by
          the type signature for
            foldStream :: (a -> b -> b) -> b -> Stream a -> b
          at C:\...\StructuredGraph.hs:17:1
    Expected type: PStream a b
      Actual type: PStream a v
    In the first argument of `pfoldStream', namely `s'
    In the expression: pfoldStream s 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T17:17:30.603

你有一个存在类型，但看起来论文中提到的类型是通用的（尽管我没有在 的定义之外阅读它`Stream`）。

有很大区别

```
newtype Stream a = forall v. Pack { pop :: PStream a v } 
```

和

```
newtype Stream a = Pack { forall v. pop :: PStream a v } 
```

前者似乎对这种类型不是很有用，因为你无法知道`v`它是什么。后者使您的代码编译。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T17:12:38.107

那么，你认为这个（部分）函数的类型是什么？

```
pfoldStream (Var x) = x 
```

这很简单：

```
pfoldStream :: Stream a v -> v 
```

您的`foldStream f k`操作基本上计算`pfoldstream . pop`. 类型是什么？

```
-- this is wrong
pfoldstream . pop :: PStream a -> v 
```

你不能那样做。您不能只从存在内部返回类型。`v`请注意右侧是如何出现的。我们怎么知道什么是正确`v`的？我们不这样做，因为`v`存在性限定：类型检查器拥有的唯一信息是该类型`v`存在，它没有关于该类型是否等于 的信息`b`。

我可以给出一个更简单的说明：

```
data E = forall a. E a
unpack (E x) = x 
```

的类型`unpack`在 Haskell 的类型系统中是不可表达的，这基本上就是你所要求的。类型将是`unpack :: E -> x`，但不是针对*任何*x（x 不是普遍量化的），而是针对*特定*的x（x 是存在量化的）。

## 解决问题

下一个问题是“如何编译？” 这不是问题——问题是请求指定不正确。我不知道你想要什么，而不是编译器。我可以建议一种使其编译的方法：

```
foldStream :: (a -> b -> b) -> b -> PStream a b -> b
foldStream f k s = pfoldStream s
    where pfoldStream (Var x)     = x
          pfoldStream (Mu g)      = pfoldStream (g k)
          pfoldStream (Cons x xs) = f x (pfoldStream xs) 
```

这摆脱了存在限定符，但我不知道该怎么做，我猜这不是你想要的。使其编译的另一种方法是将代码替换为通过用户的扬声器播放“O Canada”的函数，但我怀疑这与您想要的比上面的代码更不相似。

## 阅读论文

我查看了论文，我认为该类型不应该是存在的：我认为您应该使用更高阶的类型。所以代替存在类型：

```
data Stream a = forall v. Pack {pop :: PStream a v} 
```

我们真的在看 rank 2 类型：

```
type Stream a = forall v. Stream a v 
```

您可以在第 4.1 节中看到`v`变量用于将流送入自身的方式。这是通用的原因是因为它允许流的使用者使用任何类型的 for `v`，因此，`v`不需要出现在 for 的签名中`foldStream`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T17:40:36.903

所有人似乎一下子就回答了。我只是要指出 GADT 语法，`Str`如下所示，总是让我更容易理解——在这种情况下，为什么`foldStream`用另一种方式使用量词是没有希望的。我有论文中代码的准可读版本，所以我把它放在这里： [https ://github.com/applicative/structured_graphs](https://github.com/applicative/structured_graphs)

```
{-#LANGUAGE GADTs, RankNTypes#-}
data PStream a v = Var v
                 | Mu (v -> PStream a v)
                 | Cons a (PStream a v)
ones :: PStream Int v
ones = Cons (1 :: Int) ones

data Stream a where P :: forall a  . (forall v . PStream a v) -> Stream a 
```

-- 即我们使用一个（难以构造的）v-independent PStream av -- 一个类型的项目`forall v . PStream a v`来制作一个`Str a`. 所以`P ones`for`ones`定义如上，因为我没有用v来定义。相比之下，与您的

```
data Stream a where P :: forall a v .      PStream a v        -> Stream a 
```

的类型`P`可以让我们`Str a`用你喜欢的任何旧的 a 和 v 构造 a ，甚至 v 的类型在结果中也是不可见的`Str a`。所以`P "Hello"`将是这种类型的有效成员。`Int`当类型 b 专门用于而不是时，祝你在下面提取 x 好运`String`：

```
foldStream  :: (a -> b -> b) -> b -> Stream a -> b
foldStream f k = pfoldStream . pop
    where pfoldStream (Var x)     = x
          pfoldStream (Mu g)      = pfoldStream (g k)
          pfoldStream (Cons x xs) = f x (pfoldStream xs)
          pop (P x) = x 
```

对于 的第一个（预期的）声明`Stream`，这些值很难构造，但易于使用。使用另一个（“存在”）声明，构造一个值很容易，但很难使用它，因为底层类型是“隐藏的”。您在尝试定义时遇到了使用这样一个值的困难`pfoldStream`。

# .htaccess - 我可以使用 htaccess 删除幻像吗？从网址

> ID：14282852
> 
> 赞同：0
> 
> 时间：2013-01-11T16:51:37.987
> 
> 标签：.htaccess, mod-rewrite

谷歌以某种方式为我的网站索引了一些幻像 URL。我仍在努力寻找问题所在。

例如，下面以粗体显示的所有内容都不应该存在。

[http://www.mydomain.com/directory/sights](http://www.mydomain.com/directory/sights) **?/kauai/sights/sights/kalalau_lookout**

它应该看起来像这样： [http ://www.mydomain.com/directory/sights](http://www.mydomain.com/directory/sights)

我怎样才能去掉？标记除了它之后的所有内容并使其 301 重定向到正确的页面？

谢谢，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:03:37.537

从[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

> **修改查询字符串**
> 默认情况下，查询字符串是原封不动地传递的。
> ...
> *当您想删除现有的查询字符串时，只需用问号结束替换字符串。*
> ...

您可以删除所有查询字符串

```
RewriteEngine On
RewriteCond %{QUERY_STRING} .
RewriteRule .* http://www.mydomain.com$0? 
```

# powershell - 执行操作的访问权限不足 - Powershell

> ID：14282855
> 
> 赞同：4
> 
> 时间：2013-01-11T16:51:41.007
> 
> 标签：powershell, permissions, active-directory, powershell-2.0

我正在编写一个简单的脚本来将 AD 组成员身份从一个用户复制到另一个用户。我只使用 ActiveDirectory 模块。

该脚本看起来可以工作并且确实可以工作，直到我尝试将组广告给用户。

代码：

```
import-module ActiveDirectory
$templateUser = get-ADUser user1
$targetUser = getADUser user2

$groups =get-adprincipalgroupmembership $templateUser
$groups2 = get-ADPrincipalGroupMembership $targetUser

foreach($group in $groups) {
    add-adGroupMember $group $targetUser
} 
```

错误：

```
Add-ADGroupMember : insufficient access rights to performt the operation
At line:9 char:18
+ FullyQualifiedErrorID : Insufficient access rights to perform the operation,Microsoft.ActiveDirectory.Management.Commands.AddADGroupMember 
```

笔记/想法：

我以普通用户身份登录，但我以其他用户（我的管理员帐户）身份运行 powershell。我不是本地管理员，但我是域管理员。如果我启动 AD 工具并手动执行，我可以将用户添加到组（我有权添加到这些组）。

编辑：

以管理员身份运行 powershell。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T14:11:01.517

以管理员身份运行 powershell。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-21T03:01:14.340

我今天在 Server 2012 中遇到了这个问题。我以管理员身份运行 powershell，我是域管理员，我是本地管理员，我是我能找到的各种管理员。

我通过使用 Active Directory 用户和计算机工具“修复”它，将我自己添加为我试图添加用户的 AD 组的经理，并勾选该框以允许经理更改成员资格。然后我可以愉快地运行 AD-AddGroupMember。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-16T15:33:58.940

我今天遇到了这个问题，一个自动化系统正在使用 powershell 脚本来处理各种事情......原来是执行策略。我们使用 ExecutionPolicy Bypass 标志运行脚本，甚至直接在脚本之外的 powershell 中运行命令也不起作用，但是一旦我们将 executionpolicy 设置为不受限制，一切都会神奇地起作用。

对我们来说，我们甚至可以创建安全组，但不能通过 powershell 将用户添加到组中，即使我们可以在 ADUC 中进行相同的更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-31T19:46:15.360

我也遇到了这个问题，使用 Powershell 远程连接到域控制器。

在我的情况下，`Include inheritable permissions from this object's parent`对于我无法更改的特定对象，它被关闭了。

# gwt - GWT ScrollPanel 未显示完整内容

> ID：14282858
> 
> 赞同：5
> 
> 时间：2013-01-11T16:51:46.600
> 
> 标签：gwt, scroll

我使用 AbsolutPanel 作为主面板。我将另一个 AbsolutPanel 作为标题添加到主面板。现在我将一个 ScrollPanel 添加到主面板。ScrollPanel 在另一个面板上包含 30 个按钮。滚动时最后一个按钮未完全显示。

如果我删除标题 AbsolutPanel 一切都会显示 - 如果我增加标题面板的高度，则显示更少。包含 VerticalPanel 的 ScrollPanel 的可滚动区域精确地随着位于 ScrollPanel 之外的标题面板的高度而减小。如果我对主面板使用“Overflow.SCROLL”，我可以滚动到verticalPanel的末尾，但在这种情况下，标题面板也会滚动。

非常感谢每一个帮助 - 谢谢！

为了重现这个问题，我做了以下测试：

```
AbsolutePanel main = new AbsolutePanel();
RootLayoutPanel.get().add(main);
main.setSize("100px", "100%");

AbsolutePanel header = new AbsolutePanel();
main.add(header);
header.add(new Label("HEADER"));

VerticalPanel content = new  VerticalPanel();
ScrollPanel scroll = new ScrollPanel(content);
scroll.setSize("100px", "100%");
main.add(scroll);

for (int i = 0; i < 30; i++)
    content.add(new Button("Button :" + i)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T05:32:07.760

由于您使用的是绝对面板、垂直面板和滚动面板的组合，因此它们都不是布局面板。所以你需要看到滚动面板的高度到某个确定的高度，而不是以百分比给出。

更改您的代码

```
scroll.setSize("100px", "100%"); 
```

至

```
scroll.setSize("100px", "500px"); 
```

TADA，它有效，你得到一个卷轴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:28:14.140

您的 VerticalPanel 基于试图填充 100% 父容器的表。不要认为你的布局是一个好方法。检查[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels)关于布局。

我建议您使用 DockLayoutPanel 创建带有标题的 100% 高度布局。如果您开始使用面板名称中带有 [Layout] 的面板，请不要使用 VerticalPanel。它们是基于 Div 的。如果您不确定浏览器将如何处理，请务必不要混合 div 和表格。

# matlab - 使用 lsqcurvefit 拟合

> ID：14282864
> 
> 赞同：3
> 
> 时间：2013-01-11T16:51:54.697
> 
> 标签：matlab, parameters, curve-fitting

我想将一些数据拟合到洛伦兹函数，但是当我使用不同数量级的参数时，我发现拟合存在问题。

这是我的洛伦兹函数：

```
function [ value ] = lorentz( x,x0,gamma,amp )
    value = amp * gamma^2 ./ ((x-x0).^2 + gamma^2);
end 
```

现在生成示例数据的脚本：

```
x = linspace(2e14,6e14,200);
x0 = 4.525e14;
gamma = 0.5e14;
amp = 2e-14;

y = lorentz(x,x0,gamma,amp); 
```

以及将洛伦兹拟合到样本数据的脚本：

```
params = [4.475e14;0.4e14;1.8e-14];
opts = optimset('TolFun',1e-60,'TolX',1e-50,'Display','Iter');
fitfunc = @(params,x) lorentz(x,params(1),params(2),params(3));
fitparams = lsqcurvefit(fitfunc,params,x,y,[],[],opts)

figure(1);hold on;
plot(x,y,'.');
plot(x,lorentz(x,params(1),params(2),params(3)),'--');
plot(x,lorentz(x,fitparams(1),fitparams(2),fitparams(3)));
hold off; 
```

这只会改变最后一个参数（最小的，即幅度）。如果我将所有指数都排除在外，它会按预期工作。我认为有一些 opts 的微调要做，但我不知道如何。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T02:43:01.170

正如您所建议的，只要您的参数变化超过 28 个（！）数量级，您就会遇到数值问题。例如，LSQCURVEFIT 将尝试估计适当的梯度步长，并且这些计算可能对数值稳定性很敏感（取决于实际实现 - 请参阅[http://en.wikipedia.org/wiki/Levenberg%E2%80%93Marquardt_algorithm](http://en.wikipedia.org/wiki/Levenberg%E2%80%93Marquardt_algorithm) for所有这一切是如何完成的摘要）。

根据我的经验，您需要找到一种方法来规范化输入参数，使它们更具可比性。例如，您可以记录所有值，然后将它们 exp() 放入您的目标函数中。

```
params = log([4.475e14;0.4e14;1.8e-14]) 
```

和

```
function [ value ] = lorentz( x,x0,gamma,amp )
    gamma = exp(gamma); 
    amp = exp(amp);
    x0 = exp(x0);
    value = amp * gamma^2 ./ ((x-x0).^2 + gamma^2);
end 
```

这可能会引入其他不稳定性，但它应该让你开始。

# php - 仅当高级自定义字段的内容等于0时如何调用函数？

> ID：14282867
> 
> 赞同：0
> 
> 时间：2013-01-11T16:52:05.783
> 
> 标签：php, wordpress

仅当高级自定义字段的内容等于 0 时，我将如何调用此函数

```
 function updateNumbers() {
     global $wpdb;  
     $querystr = "SELECT $wpdb->posts.* FROM $wpdb->posts WHERE $wpdb-posts.post_status = 'publish' AND $wpdb->posts.post_type = 'post'";  
     $pageposts = $wpdb->get_results($querystr, OBJECT);  
     $counts = 1440 ;  
     if ($pageposts):  
       foreach ($pageposts as $post):
         setup_postdata($post);  
         $counts++;  
         add_post_meta($post->ID, 'incr_number', $counts, true);  
         update_post_meta($post->ID, 'incr_number', $counts);  
       endforeach;  
     endif;     remove_action ( 'publish_post', 'updateNumbers' ); 
 }     

 add_action ( 'publish_post', 'updateNumbers' ); 
```

在此先感谢男孩和女孩！

++++++编辑++++++

为了澄清，这应该在上下文中描述函数：

div 由 ACF 插件控制的 wordpress 字段填充：

```
<?php $post_id = get_field('job-number'); ?>
div class="postID"><?php echo $post_id ?></div> 
```

如果这个值等于 0 那么我想运行这个函数：

```
 function updateNumbers() {
     global $wpdb;  
     $querystr = "SELECT $wpdb->posts.* FROM $wpdb->posts WHERE $wpdb->posts.post_status = 'publish' AND $wpdb->posts.post_type =
 'post'";  
     $pageposts = $wpdb->get_results($querystr, OBJECT);  
     $counts = 1440 ;  
     if ($pageposts):  
     foreach ($pageposts as $post):
     setup_postdata($post);  
     $counts++;  
     add_post_meta($post->ID, 'incr_number', $counts, true);  
     update_post_meta($post->ID, 'incr_number', $counts);  
     endforeach;  
     endif; }

 add_action ( 'publish_post', 'updateNumbers' ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:01:51.683

像下面这样的东西似乎是你所追求的......

```
<?php
    $key = 'field_name';
    $meta = get_post_meta($post->ID, $key, true);
    if ($meta == '0') {
        updateNumbers();
    }
?> 
```

# facebook-graph-api - 带有图形 API 的 Facebook 封面照片

> ID：14282869
> 
> 赞同：0
> 
> 时间：2013-01-11T16:52:10.507
> 
> 标签：facebook-graph-api

我想知道是否有可能在一个电话中获得封面照片。

喜欢 > [https://graph.facebook.com/PAGEID/picture?type=square](https://graph.facebook.com/PAGEID/picture?type=square)立即为您提供照片。

是否可以这样做> [https://graph.facebook.com/PAGEID?fields=cover](https://graph.facebook.com/PAGEID?fields=cover)

不必用json解析它？

我想要的是封面照片。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:34:39.213

> 我想知道是否有可能在一个电话中获得封面照片。

不，你不能。

您可以改用 FB api-

```
$albumCover = $facebook->api("/[album_id]?fields=picture", "get");

echo "<img src='".$albumCover['picture']."' />"; 
```

我猜只添加一条额外的线不会打扰你。

# openssl - 如何从私钥文件创建 p12 文件？

> ID：14282873
> 
> 赞同：0
> 
> 时间：2013-01-11T16:52:23.960
> 
> 标签：openssl

我有一个带有安全密码的私钥。如何从中创建 .p12 文件？我试过命令 `>openssl pkcs12 -export -inkey myprivatekey -out test.p12`

但什么都没有发生。如何生成它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:04:20.690

[请参阅此处](http://www.openssl.org/docs/apps/pkcs12.html)的 pkcs12 文档。我认为您还需要提及 certfile。在 PKCS #12 中，需要证书和私有。或者，您可以通过提供 CAfile 和 CApath 来包含证书链。

# ruby - Ruby 中的符号/字符串可互换对象

> ID：14282877
> 
> 赞同：0
> 
> 时间：2013-01-11T16:52:31.873
> 
> 标签：ruby

我需要一个接受字符串或符号的对象（然后将其转换为字符串），并且可以与字符串或符号进行比较，可互换地类似于 HashWithIndifferent 访问的行为方式：

```
StringWithIndifferentAccess.new("foo").include? :f
=> true

StringWithIndifferentAccess.new(:foo) ==  "foo"
=> true 
```

有没有一种简单的方法可以做到这一点并让它“正常工作”（TM），而不必手动重新定义每个字符串方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:13:18.060

这传递了您的示例

```
class StringWithIndifferentAccess
  def initialize obj
    @string = obj.to_s
  end

  def == (other)
    @string == other.to_s
  end

  def include?(other)
    @string.include? other.to_s
  end
end 
```

* * *

## 更新

所以我只是再次阅读了这个问题，并为所有可以使用 method_missing 并将任何符号转换为字符串的字符串方法“正常工作”，如下所示：

```
class StringWithIndifferentAccess
  def initialize obj
    @string = obj.to_s
  end

  # Seems we have to override the == method because we get it from BasicObject
  def == (other)
    @string == other.to_s
  end

  def method_missing(method, *args, &block)
    args.map! {|arg| arg.is_a?(Symbol) ? arg.to_s : arg }
    if @string.respond_to?(method)
      @string.send(method, *args, &block)
    else
      raise NoMethodError  
    end    
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:58:56.867

你可以使用这个：

```
sym = :try
sym.class
=> Symbol
str = "try"
str.class
=> String
str.to_sym
=> :try
sym.to_s
=> "try" 
```

因此，只需创建一个使用符号或字符串构造但也具有始终为字符串的值的类。添加一个未定义的方法，该方法采用单个参数，将其转换为字符串，然后在值上调用它。

希望这会有所帮助。

# android - Android 编辑文本光标不出现

> ID：14282882
> 
> 赞同：11
> 
> 时间：2013-01-11T16:52:56.483
> 
> 标签：android, android-edittext, text-cursor

在我的应用程序中，我使用以下代码禁用了键盘（我现在使用我的自定义键盘）：

```
editText.setInputType(InputType.TYPE_NULL); 
```

现在，我的问题是文本光标不再出现在编辑文本中。我该怎么办？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-06T15:16:13.010

在错误跟踪器中打开了一个问题 在错误跟踪[器](http://code.google.com/p/android/issues/detail?id=27609)中为此打开了一个问题。其中一位用户建议了适用于“大多数”设备的方法。

简而言之，您所要做的就是调用：

```
editText.setRawInputType(InputType.TYPE_CLASS_TEXT); 
```

为您的**EditText**视图（在您调用后`editText.setInputType(InputType.TYPE_NULL);`）。

您可能还应该设置：

```
editText.setTextIsSelectable(true); 
```

以便选择文本（尽管 in 似乎不适用于三星 Galaxy SIII）。此方法仅从*HONEYCOMB* (api11) 开始可用，因此在为较旧的 Android 版本开发时请记住这一点。

还声明您的**EditText**不应该是活动开始时接收焦点的第一个视图（如果是 - 只是来自另一个视图的 requestFocus() ）。虽然我（个人）没有遇到任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:12:12.487

为什么不为您的自定义键盘使用自定义视图，而不是实现一个成熟的 IME？这将解决您的光标问题，甚至可以使您的键盘在您的应用程序之外可用（如果您愿意）。

如果您想这样做，这个答案有几个有用的链接： [如何为 Android 开发软键盘？](https://stackoverflow.com/questions/3480715/how-to-develop-a-soft-keyboard-for-android/3480756#3480756)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T17:19:56.790

我真的不建议这样做。编写一个好的完整的 IME 真的很难。此外，用户开始期待他们的键盘提供的功能（自动更正、Swyping、下一个单词预测、更改语言的能力），除非您在键盘本身上花费数月时间，否则您不会拥有这些功能。任何不允许我使用 Swype 的应用程序都会立即被删除（偏见说明：我在 Swype android 上工作）。

但是，如果您想作为键盘与操作系统完全集成，您将不得不编写一个 InputMethodService。然后，用户可以在键盘选择菜单中选择您的键盘，并可用于任何应用程序。这是获得完整操作系统集成的唯一方法，否则您将需要真正从头开始——编写自己的 EditView。玩得开心，得到一个看起来不错的东西绝对不是微不足道的。

此外，设置输入类型 null 不会禁用大多数键盘。它只是将它们置于哑模式并关闭预测之类的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-02T13:23:14.583

我尝试了以下答案并且它有效，但请注意 1）EditText 不能专注于初始化 2）当您的方向发生变化而用户的焦点位于 editText 时，库存键盘会弹出，这是另一个“可解决”的问题.

这在之前的答案中提到过，但请注意您必须确保您的 editText 元素不会专注于实例化：

[https://code.google.com/p/android/issues/detail?id=27609#c7](https://code.google.com/p/android/issues/detail?id=27609#c7)

#7 nyphb...@gmail.com

我终于找到了一个（对我来说）可行的解决方案。

第一部分（在 onCreate 中）：

```
mText.setInputType(InputType.TYPE_NULL);
if (android.os.Build.VERSION.SDK_INT >= 11 /*android.os.Build.VERSION_CODES.HONEYCOMB*/) {
    // this fakes the TextView (which actually handles cursor drawing)
    // into drawing the cursor even though you've disabled soft input
    // with TYPE_NULL
    mText.setRawInputType(InputType.TYPE_CLASS_TEXT);
} 
```

另外，需要将android:textIsSelectable设置为true（或者在onCreate中设置）并且EditText一定不能专注于初始化。如果您的 EditText 是第一个可聚焦的视图（在我的情况下是这样），您可以通过将其放在其上方来解决此问题：

```
<LinearLayout
  android:layout_width="0px"
  android:layout_height="0px"
  android:focusable="true"
  android:focusableInTouchMode="true" >
    <requestFocus />
</LinearLayout> 
```

# c# - C# 泛型和接口以及简单的 OO

> ID：14282884
> 
> 赞同：5
> 
> 时间：2013-01-11T16:53:07.500
> 
> 标签：c#, oop, generics

我的 C# 技能很低，但我不明白为什么以下失败：

```
public interface IQuotable {}
public class Order : IQuotable {}
public class Proxy {
  public void GetQuotes(IList<IQuotable> list) { ... }
} 
```

那么代码如下：

```
List<Order> orders = new List<Orders>();
orders.Add(new Order());
orders.Add(new Order());

Proxy proxy = new Proxy();
proxy.GetQuotes(orders); // produces compile error 
```

我只是做错了什么而没有看到吗？由于 Order 实现了 Quotable，因此订单列表将作为 IList of quoatables 进入。我有类似 Java 的东西，它可以工作，所以我很确定我缺乏 C# 知识。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T16:57:51.197

您无法从 a 转换`List<Order>`为`IList<IQuotable>`. 他们只是不兼容。毕竟，您可以将*任何*类型的- 添加`IQuotable`到`IList<IQuotable>`- 但您只能将`Order`（或子类型）添加到`List<Order>`.

三个选项：

*   如果您使用的是 .NET 4 或更高版本，则可以在将代理方法更改为时使用协方差：

    ```
    public void GetQuotes(IEnumerable<IQuotable> list) 
    ```

    当然，这仅在您只需要遍历列表时才有效。

*   您可以`GetQuotes`使用约束进行泛型：

    ```
    public void GetQuotes<T>(IList<T> list) where T : IQuotable 
    ```

*   你可以建立一个`List<IQuotable>`开始：

    ```
    List<IQuotable> orders = new List<IQuotable>();
    orders.Add(new Order());
    orders.Add(new Order()); 
    ```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-11T16:54:19.467

`IList`不是协变的。您不能将 a`List<Order>`转换为`IList<Quotable>`.

您可以将签名更改`GetQuotes`为：

```
public void GetQuotes(IEnumerable<IQuotable> quotes) 
```

然后，通过以下方式具体化一个列表（如果您需要它的功能）：

```
var list = quotes.ToList(); 
```

# c# - 如何禁用或自定义当用户将鼠标悬停在任务栏上的应用程序图标上时显示的图像预览？

> ID：14282887
> 
> 赞同：1
> 
> 时间：2013-01-11T16:53:08.287
> 
> 标签：c#, windows, winforms, taskbar, aero

在带有 Aero 的 Windows 中... 当用户将鼠标悬停在应用程序的图标上时，应用程序的小预览会出现在任务栏上方。我正在寻找有关如何禁用此预览或更改/自定义此小预览图像框中显示的内容的任何信息。

请注意，我不希望以用户身份禁用 Aero 功能 - 我希望在应用内控制此功能。

预先感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:21:24.473

这是 API 的包装器库，它控制 Windows 中的这些功能 - 跳转列表、图标叠加、进度条、选项卡式缩略图和缩略图工具栏 [http://archive.msdn.microsoft.com/WindowsAPICodePack](http://archive.msdn.microsoft.com/WindowsAPICodePack)

# iphone - NSUserDefaults 无法保存 NSMutableDictionary

> ID：14282892
> 
> 赞同：2
> 
> 时间：2013-01-11T16:53:37.340
> 
> 标签：iphone, ios, objective-c, nsdictionary

我正在尝试使用以下代码将 NSMutableDictionary 保存到 NSUserDefaults：

```
NSUserDefaults *def = [NSUserDefaults standardUserDefaults];
NSMutableDictionary *repositoryData = [[NSMutableDictionary alloc] init];

[repositoryData setObject:personData forKey:@"persondata"];

[def setObject:repositoryData forKey:@"kUserRepository"];
[def synchronize];
[repositoryData removeAllObjects];
[repositoryData release]; 
```

但我收到了这个消息：

```
 [NSUserDefaults setObject:forKey:]: Attempt to insert non-property value '{
    persondata = "<Person: 0x1ed57e70>";
}' of class '__NSDictionaryM'.  Note that dictionaries and arrays in property lists must also contain only property values. 
```

而且 Person 类也有 NSCoding：

人.h

```
 @interface Person : NSObject <NSCoding> {
    NSString *name;
    NSString *email;
    NSString *phoneNumber;
    NSString *gender;

    int age;
}

@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) NSString *email;
@property (nonatomic, retain) NSString *phoneNumber;
@property (nonatomic, retain) NSString *gender;
@property (assign) int age;

@end 
```

人.m

```
 @implementation Person
@synthesize name,email,phoneNumber,age,gender;

#pragma mark
#pragma mark NSCoder

- (void)encodeWithCoder:(NSCoder *)encoder{
    [encoder encodeObject:self.name forKey:@"username"];
    [encoder encodeObject:self.email forKey:@"useremail"];
    [encoder encodeObject:self.phoneNumber forKey:@"userphonenumber"];
    [encoder encodeObject:self.gender forKey:@"usergender"];

    [encoder encodeInt:self.age forKey:@"userage"];
}

- (id)initWithCoder:(NSCoder *)decoder {
    if(self = [super init]){

        self.name = [decoder decodeObjectForKey:@"username"];
        self.email = [decoder decodeObjectForKey:@"useremail"];
        self.phoneNumber = [decoder decodeObjectForKey:@"userphonenumber"];
        self.gender = [decoder decodeObjectForKey:@"usergender"];

        self.age = [decoder decodeIntForKey:@"userage"];
    }
    return self;
}

@end 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:56:49.477

对于可以`NSUserDefaults`在`NSDictionary`. 这些包括`NSString, NSNumber, NSData, NSArray and NSDictionary`. 在存储`NSCoder`到. `NSData`_`NSKeyedArchiver``NSUserDefaults`

另外，看看[这个](https://stackoverflow.com/questions/2315948/how-to-store-custom-objects-in-nsuserdefaults)

# c# - WPF 列表框虚拟化创建 DisconnectedItems

> ID：14282894
> 
> 赞同：17
> 
> 时间：2013-01-11T16:53:48.360
> 
> 标签：c#, .net, wpf, virtualization

我正在尝试使用 WPF ListBox 创建图形控件。我创建了自己的 Canvas，它源自 VirtualizingPanel，我自己处理项目的实现和虚拟化。

然后将列表框的项目面板设置为我的自定义虚拟化画布。

我遇到的问题发生在以下情况：

*   首先创建 ListBox 项 A。
*   ListBox Item B 创建在画布上 Item A 的右侧。
*   ListBox Item A 首先被虚拟化（通过将其移出视图）。
*   ListBox Item B 是第二个虚拟化的（再次通过将其移出视图）。
*   将 ListBox 项 A 和 B 显示在视图中（即：实现它们）
*   使用 Snoop，我检测到 ListBox 现在有 3 个项目，其中一个是位于 ListBox Item B 正下方的“DisconnectedItem”。

是什么导致了这个“DisconnectedItem”的创建？如果我先虚拟化 B，然后再虚拟化 A，则不会创建此项目。我的理论是，在 ListBox 中的其他项目之前虚拟化项目会导致子项断开连接。

使用具有数百个节点的图形时，问题更加明显，因为当我四处平移时，我最终得到了数百个断开连接的项目。

这是画布的部分代码：

```
/// <summary>
/// Arranges and virtualizes child element positionned explicitly.
/// </summary>
public class VirtualizingCanvas : VirtualizingPanel
{
   (...)

    protected override Size MeasureOverride(Size constraint)
    {
        ItemsControl itemsOwner = ItemsControl.GetItemsOwner(this);

        // For some reason you have to "touch" the children collection in 
        // order for the ItemContainerGenerator to initialize properly.
        var necessaryChidrenTouch = Children;

        IItemContainerGenerator generator = ItemContainerGenerator;

        IDisposable generationAction = null;

        int index = 0;
        Rect visibilityRect = new Rect(
            -HorizontalOffset / ZoomFactor,
            -VerticalOffset / ZoomFactor,
            ActualWidth / ZoomFactor,
            ActualHeight / ZoomFactor);

        // Loop thru the list of items and generate their container
        // if they are included in the current visible view.
        foreach (object item in itemsOwner.Items)
        {
            var virtualizedItem = item as IVirtualizingCanvasItem;

            if (virtualizedItem == null || 
                visibilityRect.IntersectsWith(GetBounds(virtualizedItem)))
            {
                if (generationAction == null)
                {
                    GeneratorPosition startPosition = 
                                 generator.GeneratorPositionFromIndex(index);
                    generationAction = generator.StartAt(startPosition, 
                                           GeneratorDirection.Forward, true);
                }

                GenerateItem(index);
            }
            else
            {
                GeneratorPosition itemPosition = 
                               generator.GeneratorPositionFromIndex(index);

                if (itemPosition.Index != -1 && itemPosition.Offset == 0)
                {
                    RemoveInternalChildRange(index, 1);
                    generator.Remove(itemPosition, 1);
                }

                // The generator needs to be "reseted" when we skip some items
                // in the sequence...
                if (generationAction != null)
                {
                    generationAction.Dispose();
                    generationAction = null;
                }
            }

            ++index;
        }

        if (generationAction != null)
        {
            generationAction.Dispose();
        }

        return default(Size);
    }

   (...)

    private void GenerateItem(int index)
    {
        bool newlyRealized;
        var element = 
          ItemContainerGenerator.GenerateNext(out newlyRealized) as UIElement;

        if (newlyRealized)
        {
            if (index >= InternalChildren.Count)
            {
                AddInternalChild(element);
            }
            else
            {
                InsertInternalChild(index, element);
            }

            ItemContainerGenerator.PrepareItemContainer(element);

            element.RenderTransform = _scaleTransform;
        }

        element.Measure(new Size(double.PositiveInfinity,
                                 double.PositiveInfinity));
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2019-08-27T10:48:28.900

我迟到了 6 年，但 WPF 中的问题仍未解决。[这](https://www.programering.com/a/MDO5ADMwATQ.html)是解决方案（解决方法）。

对 DataContext 进行自绑定，例如：

```
<Image DataContext="{Binding}" /> 
```

这对我有用，即使对于非常复杂的 xaml。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T12:40:02.813

每当从可视化树中删除容器时都会使用它，因为相应的项目被删除，或者集合被刷新，或者容器被滚动出屏幕并重新虚拟化。

这是 WPF 4 中的一个已知错误

[有关已知错误](https://connect.microsoft.com/VisualStudio/feedback/details/619658/wpf-virtualized-control-disconnecteditem-reference-when-datacontext-switch)，请参阅此链接，它还有一个您可以应用的解决方法。

> “您可以通过在第一次看到它时保存对标记对象 {DisconnectedItem} 的引用，然后与保存的值进行比较，从而使您的解决方案更加健壮。
> 
> 我们应该公开测试 {DisconnectedItem} 的方法，但它漏掉了。我们将在未来的版本中解决这个问题，但现在你可以相信有一个独特的 {DisconnectedItem} 对象这一事实。”

# javascript - 使用 JQuery hashtags 淡入淡出某个 div 的内容

> ID：14282895
> 
> 赞同：0
> 
> 时间：2013-01-11T16:53:52.273
> 
> 标签：javascript, jquery, html, hashtag

**编辑：这是该站点的临时版本的链接：http: [//staging-site.site44.com/](http://staging-site.site44.com/) **

我对 jquery 非常陌生，所以如果这个问题非常简单，我深表歉意。我要在我的网站上做的首先是在页面加载时让我的#topContent div 中的内容淡入。

但除此之外，我还希望我的主导航使用 jquery 主题标签来切换显示在#topContent div 中的页面内容。我已经阅读了一些关于如何在 jquery 中执行此操作的内容，从我所阅读的内容来看，我认为我需要在我的主 html 文档中创建页面部分，这些部分在选择某个导航链接之前是隐藏的 - 然后隐藏内容当前显示并显示与刚刚选择的导航链接相关的内容，我离我有多近？

到目前为止，这是我的尝试...

HTML

```
<nav id="headerNav">

            <ul class="navList">
                <li class="navItem"><a href="#products" class="transition">Products</a></li>
                <li id="view-about" class="navItem"><a href="#about" class="transition">About</a></li>
                <li class="navItem"><a href="#portfolio">Portfolio</a></li>
                <li class="navItem"><a href="#">Contact</a></li>
            </ul>
        </nav>

    </div>

</div>

<!-- topMain -->
<div id="topContentWrapper">

    <div id="topContent">

            <div id="#products">
                <h2>Test worked! - products </h2>
                <p>this test just worked sooo hard!</p> 
            </div>

            <div id="#about">
                <h2>Test worked! - about </h2>
                <p>this test just worked sooo hard!</p> 
            </div>

            <div id="#portfolio">
                <h2>Test worked! - Portfolio </h2>
                <p>this test just worked sooo hard!</p> 
            </div>

    </div>

</div> 
```

JS

```
// Fade In Effect

$(document).ready(function() {
    $("#topContent").css("display", "none");
    $("#topContent").fadeIn(2000);

$("a.transition").click(function(event){
    event.preventDefault();
    linkLocation = this.href;
    $("#topContent").fadeOut(1000);      
});

function redirectPage() {
    window.location = linkLocation;
}

$("#view-about").click(function(event){
    $("#products").fadeOut(1000);
    $("#portfolio").fadeOut(1000);   
    $("#about").fadeIn(1000); 
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:03:40.503

好的，这段代码应该可以工作：

```
$(function(){
    $last = null;
    $(".navList li a").click(function(){
        if ($last != null) $last.fadeOut(1000);
        $last = $($(this).attr("href"));
        $($(this).attr("href")).fadeIn(2000);
    });
}); 
```

但是，您需要将您的更改`topContent`为：

```
 <div id="topContent">

            <div id="products" style="display: none;">
                <h2>Test worked! - products </h2>
                <p>this test just worked sooo hard!</p> 
            </div>

            <div id="about" style="display: none;">
                <h2>Test worked! - about </h2>
                <p>this test just worked sooo hard!</p> 
            </div>

            <div id="portfolio" style="display: none;">
                <h2>Test worked! - Portfolio </h2>
                <p>this test just worked sooo hard!</p> 
            </div>

    </div> 
```

原因：

首先，你需要你`id`的 s 是这样的：`id="about"`而不是 this: `id="#about"`。指定的前面`id`不需要 a 。`#`（与设置标签时`class`不需要 a相同）`.`

我在本地测试的 jQuery 代码，所以它应该可以工作。

笔记：

> 您可能希望自动显示一些不同的内容，因为现在加载时它是空白的，直到您单击其中一个链接。

希望这有帮助！

## ****编辑：****

**我建议您将代码更改为：**

 **```
ids =   [ "products", "about", "portfolio" ];
links = [ "Products", "About", "Portfolio" ];

$(function(){
    $last = null;
    $(".navList li a").click(function(){
        New = "#" + ids[links.indexOf($(this).text())];
        if ($last != null) $last.fadeOut(1000);
        $last = $(New);
        $(New).fadeIn(2000);
    });
}); 
```

因为它将所有内容不断地保存在同一个地方。为此，您需要更改代码的另外两个部分：

```
<ul class="navList">
    <li class="navItem"><a href="#topContent" class="transition">Products</a></li>
    <li id="view-about" class="navItem"><a href="#topContent" class="transition">About</a></li>
    <li class="navItem"><a href="#topContent">Portfolio</a></li>
    <li class="navItem"><a href="#topContent">Contact</a></li>
</ul> 
```

和：

```
 <div id="topContent">

            <div id="products" style="display: none; position: absolute">
                <h2>Test worked! - products </h2>
                <p>this test just worked sooo hard!</p> 
            </div>

            <div id="about" style="display: none; position: absolute">
                <h2>Test worked! - about </h2>
                <p>this test just worked sooo hard!</p> 
            </div>

            <div id="portfolio" style="display: none; position: absolute">
                <h2>Test worked! - Portfolio </h2>
                <p>this test just worked sooo hard!</p> 
            </div>

    </div> 
```

最后一部分只是我的建议，但做任何你需要的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T17:39:47.873

而不是在您的 a.transition 处理程序中执行此操作：

```
$("#topContent").fadeOut(1000); 
```

做：

```
$("#topContent").children().fadeOut(1000); 
```

问题是您实际上正在淡出更高级别的项目，因此即使您将它们淡入，孩子们也不再可见。**

# c - 如何改进 Windows 中此 C 开放调用的错误报告？

> ID：14282899
> 
> 赞同：0
> 
> 时间：2013-01-11T16:54:13.273
> 
> 标签：c, windows, file-io

就目前而言，代码如下所示：

```
fd = open(filename, openflag, perm); 
```

然后我在打开时调用 perror 并接收

```
open: No error
open: No error
open: No error
open: No error 
```

最后的错误调用是：

```
die(1, "open_fds: File open error"); 
```

屈服

```
SIO_ERROR: open_fds: File open error 
```

我该怎么做才能获得更有意义的错误消息？

注意：这是针对 Windows 环境的，我对 C 比较陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:25:06.953

您可以使用`perror`，也可以`strerror(errno)`在 Windows 上使用，两者都应该可以工作，这是后者的一个示例：

```
int fd = open("some_made_up_file_name.txt", O_RDONLY);
if(fd < 0)
    printf("%s\n", strerror(errno)); 
```

在这种情况下，我会得到：

> 没有这样的文件或目录

因为我试图打开的那个文件不存在，而且我没有告诉它在这种情况下创建。您需要确保检查来自 的退货`open()`，`< 0`并且您遇到了问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T17:00:54.670

据我所见，`perror`在 Windows 中也可以正常工作。你知道是否`open`失败（它返回了什么）以及如果它失败了，为什么在你的情况下它失败了？文件不存在还是权限问题？为什么要`perror`打印 4 次“无错误”消息？

功能是什么`die`- 据我所知它不是标准功能？打印错误消息有什么作用？

在 Windows 上，您还可以使用[GetLastError](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360%28v=vs.85%29.aspx)来获取错误。（除了`errno`和`perror`）。

您可以使用[FormatMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680582%28v=vs.85%29.aspx)格式化 GetLastError 返回的错误代码对应的错误消息。

# jquery - .parent() 在多个选择器内

> ID：14282906
> 
> 赞同：0
> 
> 时间：2013-01-11T16:54:29.857
> 
> 标签：jquery, jquery-selectors, multiple-select-query

我想选择几个目标：

1.  每个**不是**`li`父母的直系后代（除非它是最后一个，参见 2。） **`.sub-menu`**
***   an的最后一个li元素`ul.sub-menu`*   **排除**所有`li`作为父级的`ul.sub-menu`**

 **我在想这样的事情，但这似乎不起作用：`$("ul:not(.sub-menu) > li, ul.sub-menu > li:last, ('ul.sub-menu').parent()")`

当尝试在多个选择器中选择具有非 CSS 选择器的元素时，会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:00:38.327

```
$('ul:not(.sub-menu) > li, ul.sub-menu > li:last-child').not(':has(ul.sub-menu)'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:03:16.570

试试这个：

`$('ul:not(.sub-menu) > li, ul.sub-menu > li:last-child, li:not(:has(ul.sub-menu))')`**

# list - Struts 列表验证

> ID：14282913
> 
> 赞同：0
> 
> 时间：2013-01-11T16:54:42.820
> 
> 标签：list, validation, drop-down-menu, struts2

我有一个 struts2 选择

```
<s:select list="country" listKey="referenceId" listValue="referenceDesc" 
  headerKey="0" headerValue="Select an option" 
  name="selectedCountry[%{#status.index}]"/>. 
```

现在我可以看到为三个用户动态生成的三个下拉列表，我的问题是如何验证在validation.xml 中选择的每个人的国家。我听说过访问者验证器，我对这种情况感到很复杂，有人可以告诉我如何让它工作吗？

# php - 多次加载编辑器

> ID：14282920
> 
> 赞同：0
> 
> 时间：2013-01-11T16:55:21.040
> 
> 标签：php, javascript, textarea, yui

我使用 YUI 富文本编辑器，我通过 javascript 加载它：

```
var myEditor = new YAHOO.widget.Editor('comments', {
height: '80px',
width: '600px',
dompath: false, //Turns on the bar at the bottom
animate: true,
});
myEditor.render(); 
```

现在我想将它附加到多个文本区域，如下所示：

```
echo "<textarea name='comments' id='comments" . $issue_id . "' style='width: 600px; height: 80px;' onfocus=\"findField('comments" . $issue_id . "')\">" . $comments . "</textarea>"; 
```

我怎样才能在脚本中加入类似的东西`'comments" . $issue_id . "'`？有人可以给我一个关于如何进行的提示吗？谢谢

# java - Jjava中的字符串索引超出范围

> ID：14282923
> 
> 赞同：0
> 
> 时间：2013-01-11T16:55:26.707
> 
> 标签：java, string, indexing, indexoutofboundsexception

检查字符串索引是否在界限内的最佳方法是什么？假设我们正在检查一个字符串的索引`i-1`，或者`i+1` 因为你不能说！= null。

例子：

```
for (int i = 0; i < string.length(); i++) 
{
    if (string.charAt(i+1) == '#' && string.charAt(i - 1) != '1') 
    {    
    }
} 
```

您是否应该只检查字符串的长度并查看它是否在其中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:56:15.573

```
string.charAt(i+1) == '#' 
```

是的，我认为您需要确保`i+1`不大于字符串长度。

例子：

```
if( (i+1) < string.length() && (i-1) >= 0 && (yourcode))
   { 
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:58:12.840

为什么不只检查字符串的长度？

```
if(myString.length() - 1 > i) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T17:05:44.210

在这些情况下，我总是修改循环的长度（和/或开始）......这些都是很好的答案 - 没有一种方法可以做到，但这就是我的做法：

```
for (int i = 1; i < string.length() - 1; i++) 
{
    if (string.charAt(i+1) == '#' && (i != 1 || string.charAt(i - 1) != '1'))
    {    
    }
} 
```

编辑：在考虑了这段代码所涉及的所有情况之后，我不一定会以这种方式这样做，而是找到一种更简洁的方式来准确表达我想要完成的事情

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T17:18:08.903

最简单的方法是像这样更改`for`循环：

```
for (int i = 1; i < string.length() - 1; i++) 
{
    if (string.charAt(i+1) == '#' && string.charAt(i - 1) != '1') 
    {    
    }
} 
```

**解释：**

`string.charAt(i - 1)`意味着您可能会读取`i-1`字符串的位置。由于 0 是最低有效值，您可以使用以下命令开始迭代`i = 1`

`string.charAt(i + 1)`意味着您可能会读取`i+1`字符串的位置。因为`string.length() - 1`是您需要在 结束迭代的最高有效值`i == string.length() - 2`。由于 for 循环在进入循环之前检查条件，使用`i < string.length() - 1`将是正确的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T17:20:04.247

我会尝试使用此代码。

```
for (int i = 1; string!= null && string.length() >= 3 && i < string.length() - 1; i++) 
//it solve the case of String == null and string too short
//it optimize the max number of cycles
{
    if (string.charAt(i+1) == '#' && string.charAt(i - 1) != '1') 
    {    
    }
} 
```

# java - 使用 Java 应用程序远程连接到 H2 数据库

> ID：14282924
> 
> 赞同：5
> 
> 时间：2013-01-11T16:55:26.183
> 
> 标签：java, h2

我遇到以下问题：当我尝试使用我的外部 IP 地址（PC 的 IP 而不是我的本地 IP = 我们在 cmd.exe 中运行 ipconfig 后看到的输出）创建 TcpServer 时，会发生以下错误：

服务器错误：异常打开端口“9092”（端口可能正在使用中），原因：“java.net.BindException：无法分配请求的地址：JVM_Bind”[90061-169]

但是，该端口未使用。我已经使用 netstat -a -n 进行了检查。我已经启用了我的外部 IP，并且我已经禁用了路由器的防火墙。我的外部 IP 现在可以被 ping 通了。

请帮我。

更新：这是我启动 tcp 服务器的代码。

```
package businessApp;

import org.h2.tools.Server; //imports the server utility

public class startTcpServerForH2 {

    Server server; //the server's instance variable

    private static final String SERVER_IP = "192.168.1.101"; //fixed IP of the server
    private static final String SERVER_PORT = "9092"; //fixed port the server is listening to

    public void tcpServer() { //method responsible to create the tcp server

        optionPane optPane = new optionPane(); //option pane for debugging purposes, shows the server's status

        try { //catches any server related errors, if the connection is broken etc.

            //server uses the IP and port defined earlier, allows other computers in the LAN to connect and implements the secure socket layer (SSL) feature
            server = Server.createTcpServer( //create tcp server
                new String[] { "-tcpPort" , SERVER_PORT , "-tcpAllowOthers" , "-tcpSSL" }).start();

            System.out.println(server.getStatus()); //prints out the server's status
            optPane.checkServerStatus(server.getStatus()); //prints out the server's status on the option pane as well

        } catch(Exception ex){
            System.out.println("Error with Server: " + ex.getMessage());
        }
    }

    public static void main(String[] args){

        startTcpServerForH2 tcpServ = new startTcpServerForH2(); //create a new server object
        tcpServ.tcpServer(); //starts the tcp server
    }
} 
```

第二次更新：这里是 h2Connection 代码。

打包businessApp；

导入java.sql.*；//导入sql特征

//负责与H2数据库引擎连接的类 public class h2Connection {

```
Connection conn;        //connection variable
DatabaseMetaData dbmd;  /** Metadata variable which include methods such as the following:
                         * 1) Database Product Name
                         * 2) Database Product Version
                         * 3) URL where the database files are located (in TCP mode)
                        */
Statement stm;          //statements variable
ResultSet rst;          //result sets variable

private static final String SERVER_IP = "..."; //here I enter my WAN_IP
private static final String SERVER_PORT = "9092";

public Connection connectionToH2(Connection connt) {

    optionPane optPane = new optionPane(); //create new option pane object
    String outputConn = null; //declare & initialize string which will hold important messages

    try {

        Class.forName("org.h2.Driver"); //Driver's name
        /** The String URL is pertained of the following:
         *  1) jdbc which java implements so that it can take advantage of the SQL features
         *  2) Which Database Engine will be used
         *  3) URL where the files will be stored (as this is a TCP connection)
         *  4) Schema: businessApp
         *  5) Auto server is true means that other computers can connect with the same databse at any time
         *  6) Port number of the server is also defined
         */

        String url = "jdbc:h2:tcp://" + SERVER_IP + ":" + SERVER_PORT + "/C:/Databases/businessApp;IFEXISTS=TRUE";
        System.out.println(url); //prints out the url the database files are located as well as the h2 features used (SSL)
        connt = DriverManager.getConnection(url, "sa", ""); //Driver Manager defines the username & password of the database
        System.out.println(connt.getCatalog()); //prints out the database schema
        optPane.checkServerStatus(connt.getCatalog()); //prints out the database schema on the option pane as well
        connt.setAutoCommit(false); //set AutoCommit to false to control commit actions manually

        //outputs H2 version and the URL of the database files which H2 is reading from, for confirmation
        dbmd = connt.getMetaData(); //get MetaData to confirm connection

        outputConn = "Connection to "+dbmd.getDatabaseProductName()+" "+
                   dbmd.getDatabaseProductVersion()+ " with the URL " + dbmd.getURL()+" was successful.\n";
        System.out.println(outputConn);  //outputs the message on the system (NetBeans compiler)
        optPane.checkH2Connection(outputConn); //outputs the message on top of the frame

    } catch (ClassNotFoundException ex){ //In case there is an error for creating the class for the Driver to be used
        System.out.println("Error creating class: " + ex.getMessage());
    } catch(SQLException ex){ //Any error associated with the Database Engine
        System.out.println("SQL error: " + ex.getMessage());
        optPane.checkServerStatus("SQL error: " + ex.getMessage());
    }
    return connt; //As the method is not void, a connection variable must be returned
} 
```

}

当我想连接到 h2 数据库时，我创建了一个新的 h2Connection 对象并使用它来连接。我一个字一个字地跟着 H2 手册。你还需要什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T06:00:55.393

正如下面显示的命令行帮助中所建议的，[*针对远程访问的保护*](http://www.h2database.com/html/advanced.html#remote_access)建议如下：

> 默认情况下，该数据库在启动 H2 控制台、TCP 服务器或 PG 服务器时不允许来自其他机器的连接。可以使用命令行选项`-webAllowOthers`、`-tcpAllowOthers`、启用远程访问`-pgAllowOthers`。

有关这些选项的重要[警告](http://www.h2database.com/html/advanced.html#remote_access)，请参阅文档。

附录：对我有用，只要我打开防火墙`Server` *后重新启动；*你根本不需要这`setProperty()`条线；`LAN IP`您的转发`WAN_IP`端口 9092 应该是您的主机 IP 地址；然后您可以通过以下方式打开外壳`WAN_IP`：

```
java -cp h2.jar org.h2.tools.Shell -url 
    jdbc:h2:tcp://WAN_IP/~/path/to/test;ifexists=true" 
```

命令行帮助：

```
$ java -cp .:/opt/h2/bin/h2.jar org.h2.tools.Shell -?
使用 JDBC 访问数据库的交互式命令行工具。
用法：java org.h2.tools.Shell
选项区分大小写。支持的选项有：
[-help] 或 [-?] 打印选项列表
[-url ""] 数据库 URL (jdbc:h2:...)
[-user ] 用户名
[-password ] 密码
[-driver ] 要使用的 JDBC 驱动程序类（大多数情况下不需要）
[-sql ""] 执行SQL语句并退出
[-properties ""] 从此目录加载服务器属性
如果特殊字符不能按预期工作，您可能需要使用
 -Dfile.encoding=UTF-8 (Mac OS X) 或 CP850 (Windows)。
另请参阅 http://h2database.com/javadoc/org/h2/tools/Shell.html

$ java -cp /opt/h2/bin/h2.jar org.h2.tools.Server -?
启动 H2 控制台 (web-) 服务器、TCP 和 PG 服务器。
用法：java org.h2.tools.Server
不带选项运行时，会启动 -tcp、-web、-browser 和 -pg。
选项区分大小写。支持的选项有：
[-help] 或 [-?] 打印选项列表
[-web] 使用 H2 控制台启动 Web 服务器
[-webAllowOthers] 允许其他计算机连接 - 见下文
[-webDaemon] 使用守护线程
[-webPort ] 端口（默认：8082）
[-webSSL] 使用加密 (HTTPS) 连接
[-browser] 启动浏览器连接到网络服务器
[-tcp​​] 启动 TCP 服务器
[-tcp​​AllowOthers] 允许其他计算机连接 - 见下文
[-tcp​​Daemon] 使用守护线程
[-tcp​​Port ] 端口（默认：9092）
[-tcp​​SSL] 使用加密 (SSL) 连接
[-tcp​​Password ] 关闭 TCP 服务器的密码
[-tcp​​Shutdown ""] 停止 TCP 服务器；示例：tcp://localhost
[-tcp​​ShutdownForce] 不要等到所有连接都关闭
[-pg] 启动 PG 服务器
[-pgAllowOthers] 允许其他计算机连接 - 见下文
[-pgDaemon] 使用守护线程
[-pgPort ] 端口（默认值：5435）
[-properties ""] 服务器属性（默认：~，禁用：null）
[-baseDir ] H2 数据库的基本目录（所有服务器）
[-ifExists] 只能打开现有数据库（所有服务器）
[-trace] 打印附加跟踪信息（所有服务器）
选项 -xAllowOthers 具有潜在风险。
有关详细信息，请参阅高级主题/防止远程访问。
另请参阅 http://h2database.com/javadoc/org/h2/tools/Server.html

```

# android - 应用程序名称作为第一个活动

> ID：14282925
> 
> 赞同：0
> 
> 时间：2013-01-11T16:55:27.563
> 
> 标签：android

我在活动之间手动切换清单，因为我创建了需要首先执行的新活动。一切正常，但在我的启动器的应用程序屏幕中，我看到我的应用程序图标下方的所有应用程序，我看到第一个活动的名称“SplashScreen”，但是当我卸载或转到我的应用程序时，我看到名称没问题.

我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.myapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.CALL_PHONE"/>

<application
    android:hardwareAccelerated="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:largeHeap="true"
    android:theme="@android:style/Theme.NoTitleBar" >

    <activity
        android:name="com.myapp.SplashScreen"
        android:label="@string/title_activity_splash_screen"
        android:screenOrientation="portrait" >
        <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name="com.myapp.MainScreen"
        android:label="@string/title_activity_main_screen"
        android:screenOrientation="portrait" >
    </activity>

    <activity
        android:name="com.myapp.Cameras"
        android:label="@string/title_activity_cameras"
        android:screenOrientation="portrait" >
    </activity>

</application> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:57:05.850

```
android:label="@string/title_activity_splash_screen" 
```

那是正在使用的名称。您可以删除这一行（以及其他活动的所有标签）并让所有活动使用应用程序名称`@string/app_name`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:57:24.230

```
 <activity
        android:name="com.myapp.SplashScreen"
         android:label="@string/app_name"
        android:screenOrientation="portrait" > 
```

这应该显示应用程序名称

# android - 网格对象有故障，但仅在 Tegra 3 设备上

> ID：14282928
> 
> 赞同：0
> 
> 时间：2013-01-11T16:55:39.263
> 
> 标签：android, opengl-es, tegra

您好，我在 Tegra 3 设备上的渲染非常有问题。知道这怎么可能？这是两个屏幕。第一个是华硕A510平板电脑的故障，第二个是我的galaxy nexus上的正确渲染

![故障 Tegra 3](../Images/55e080b29a943ec4d2a916538b8ded3f.png)

![在 gnex 上正确渲染](../Images/1f0fbd763092421ca4447d86a5a8f88d.png)

这是我的渲染类代码：

```
public class ShowCaseRenderer {

GLGraphics glGraphics;
LookAtCamera camera;

AmbientLight ambientLight;
DirectionalLight directionalLight;
public float rotation = 0;
public static float rotationCamera = 0;

private Vector2 camDirection;

public static final int SWIPE_LEFT = -1;
public static final int SWIPE_RIGHT = 1;

public ShowCaseRenderer(GLGraphics glGraphics) {

    camDirection = new Vector2();

    this.glGraphics = glGraphics;
    camera = new LookAtCamera(67, glGraphics.getWidth()
            / (float) glGraphics.getHeight(), 0.1f, 100);

    ambientLight = new AmbientLight();
    ambientLight.setColor(0.2f, 0.2f, 0.2f, 1.0f);
    directionalLight = new DirectionalLight();
    directionalLight.setDirection(-1, -0.5f, 0);

    GL10 gl = glGraphics.getGL();
    gl.glViewport(0, 0, glGraphics.getWidth(), glGraphics.getHeight());
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    GLU.gluPerspective(gl, 67,
            glGraphics.getWidth() / (float) glGraphics.getHeight(), 0.1f,
            10.0f);

}

public void render(int swipe, float deltaTime) {

    GL10 gl = glGraphics.getGL();

    camDirection.set((float) Math.cos(rotationCamera * Vector2.TO_RADIANS),
            (float) Math.sin(rotationCamera * Vector2.TO_RADIANS)).nor();

    camera.getPosition().set(0, 0, 0)
            .sub(camDirection.x * 2.55f, -0.4f, camDirection.y * 2.5f);  

    camera.getLookAt().set(0, 0, 0);

    camera.setMatrices(gl);

    gl.glEnable(GL10.GL_DEPTH_TEST);
    gl.glEnable(GL10.GL_TEXTURE_2D);
    gl.glEnable(GL10.GL_LIGHTING);
    gl.glEnable(GL10.GL_COLOR_MATERIAL);
    gl.glEnable(GL10.GL_BLEND);

    ambientLight.enable(gl);
    directionalLight.enable(gl, GL10.GL_LIGHT0);

    if (swipe == SWIPE_LEFT && rotationCamera % 90 != 0) {

        rotationCamera = rotationCamera -= 1.5f;

    }

    if (swipe == SWIPE_RIGHT && rotationCamera % 90 != 0) {

        rotationCamera = rotationCamera += 1.5f;

    }

    if (rotationCamera == 360)
        rotationCamera = 0;
    if (rotationCamera < 0)
        rotationCamera = rotationCamera + 360;

    //eigenRotation der Autos
    rotation = rotation += deltaTime * 25;
    if (rotation > 360) {
        rotation = rotation - 360;
    }

    renderShowCase(gl);

    gl.glDisable(GL10.GL_TEXTURE_2D);

    gl.glDisable(GL10.GL_COLOR_MATERIAL);
    gl.glDisable(GL10.GL_LIGHTING);
    gl.glDisable(GL10.GL_DEPTH_TEST);
    gl.glDisable(GL10.GL_BLEND);
}

private void renderShowCase(GL10 gl) {

    Assets.ectoMobileTexture.bind();
    Assets.ectoMobileModel.bind();

    gl.glPushMatrix();

    gl.glTranslatef(0, 0.01f, -1.5f);

    gl.glRotatef(-rotation, 0, 1, 0);

    Assets.ectoMobileModel.draw(GL10.GL_TRIANGLES, 0,
            Assets.ectoMobileModel.getNumVertices());
    gl.glPopMatrix();

    Assets.ectoMobileModel.unbind();

    Assets.batMobileTexture.bind();
    Assets.batMobileModel.bind();

    gl.glPushMatrix();

    gl.glTranslatef(0, 0.01f, 1.5f);

    gl.glRotatef(-rotation, 0, 1, 0);

    Assets.batMobileModel.draw(GL10.GL_TRIANGLES, 0,
            Assets.batMobileModel.getNumVertices());
    gl.glPopMatrix();

    Assets.batMobileModel.unbind();

    Assets.mysteryMachineTexture.bind();
    Assets.mysteryMachineModel.bind();

    gl.glPushMatrix();

    gl.glTranslatef(-1.5f, 0.01f, 0);

    gl.glRotatef(-rotation, 0, 1, 0);

    Assets.mysteryMachineModel.draw(GL10.GL_TRIANGLES, 0,
            Assets.mysteryMachineModel.getNumVertices());
    gl.glPopMatrix();

    Assets.mysteryMachineModel.unbind();

    Assets.podRacerTexture.bind();
    Assets.podRacerModel.bind();

    gl.glPushMatrix();

    gl.glTranslatef(1.5f, 0.01f, 0);

    gl.glRotatef(-rotation, 0, 1, 0);

    Assets.podRacerModel.draw(GL10.GL_TRIANGLES, 0,
            Assets.podRacerModel.getNumVertices());
    gl.glPopMatrix();

    Assets.podRacerModel.unbind();

}

  } 
```

谢谢你...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:46:35.880

好的解决了问题。故障导致了一个 guiElement，它有一个奇怪的混合配置......

# javascript - JQuery 随机输入占位符

> ID：14282931
> 
> 赞同：2
> 
> 时间：2013-01-11T16:55:50.460
> 
> 标签：javascript, jquery, html, placeholder

加载文档后，如何从 jquery 中的字符串数组中设置随机占位符文本？现在我刚刚“硬编码”了占位符的设置？但是如何动态地做到这一点？

```
jQuery(function($) {
   $(document).ready(function () {
    var list = new Array();
    list.push("1");
    list.push("2");
        $('#search').attr("placeholder","placeholder text");
    });
}); 
```

一次如何看到 1，其他 2...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:59:01.673

```
$(function(){
  var list = [...],
      r = Math.floor(Math.random() * list.length);
  $('#search').prop('placeholder',list[r]);
}); 
```

这将使用其中的任何可能性`list`并从中为占位符分配一个新的随机值。

[例子](http://jsfiddle.net/Cxy8S/)

# c - 如何在 C 中实现 Foulke 算法

> ID：14282932
> 
> 赞同：-4
> 
> 时间：2013-01-11T16:55:50.607
> 
> 标签：c, algorithm, math, matrix

Foulke 算法定义为

```
(In + U)2 = In+ U + U2 
```

和：

`In`: 单位矩阵
`U`: 方邻接矩阵

我想通过递归在 C 中实现这个算法。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:07:17.947

你的公式是错误的。用单位矩阵代替`U`，你会看到等式不成立。您需要将其更改为`(In + U)^2 = In+ 2*U + U^2`. 就像数字一样。有道理，对吧？

否则，您需要做的就是实现一个乘以二维矩阵并将结果返回二维数组的函数。我不认为对这个问题使用递归是一个好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:00:38.637

我建议您使用 BLAS 库。或者你想在没有任何代数库的情况下自己制作？

# javascript - 本地存储保存表单 N 页数据，直到最终提交

> ID：14282933
> 
> 赞同：1
> 
> 时间：2013-01-11T16:55:59.777
> 
> 标签：javascript, jquery, local-storage

我的场景：我有一个 9 页长的应用程序，总共有大约 125 个不同类型和大小的输入（仅输入、文本区域、单选和选择）。我想使用本地存储来保存表单值。用户可以在页面之间移动（例如在提交申请之前进行审查），所以我不想在他们提交申请之前清除本地存储，如果他们从一个页面更改为另一个页面，表单应该从本地存储重新加载它的值. 他们提交表单后，我将清除本地存储，但在此之前，应保留本地存储。

我发现了这个很棒的[jquery 插件](http://shaneriley.tumblr.com/post/1729353009/saving-form-state-with-jquery-and-localstorage)和一个[演示页面](http://shaneriley.com/jquery/remember_state/)，它似乎几乎可以满足我的要求 - 好吧，有两个例外：

1) 该插件会提示用户是否要恢复他们以前输入的我不想拥有的信息（我宁愿让数据就在那里）。我在表单底部的导航按钮只是“上一个”和“继续”（在第一页上，它只是“继续”，在最后一页上它们将是“上一个”和“提交申请”）。

2）即使没有要加载的数据，插件也会提示用户（如果我可以让它加载数据，如果有的话，这将是一个非问题，如果没有则跳过它）。例如，第一次访问页面会提示用户恢复以前输入的数据。

这是演示页面中使用 的[jquery.remember-state.js的链接。](http://shaneriley.com/jquery/remember_state/jquery.remember-state.js)

==================================================== =====
我参加了上面的演示并调整了 jquery.remember-state.js 以***尝试***让它做我需要的，但它不能正常工作。
这是我的（[jsFiddle](http://jsfiddle.net/Excalibur/KmkH5/4/)）。
**注意 1：** jsFiddle 仅用于显示我的代码，不一定是 jsFiddle 环境中的工作示例。如果将代码复制到本地环境，您应该能够访问 console.log 以查看是否/什么被保存到 localStorage。
**注意 2：**所以想要内联格式化代码，所以我会看看我能做些什么来使其格式正确。

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
  <title>LocalStorage and Unload State Save</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="../jQueryPlugins/RememberState/form.css" />

  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <!-- use the modified jquery.remember-state.js code in the JavaScript panel instead
       the script tag below is the original js file
  <script src="http://shaneriley.com/jquery/remember_state/jquery.remember-state.js"></script>-->
  <script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
(function($) {
  /* jQuery form remember state plugin
     Name: rememberState
     Version: 1.3
     Description: When called on a form element, localStorage is used to
     remember the values that have been input up to the point of either
     saving or unloading. (closing window, navigating away, etc.) If
     localStorage isn't available, nothing is bound or stored.
     The plugin looks for an element with a class of remember_state to show
     a note indicating there is stored data that can be repopulated by clicking
     on the anchor within the remember_state container. If the element doesn't
     exist, it is created and prepended to the form.
     Usage: $("form").rememberState("my_object_name");
     Notes: To trigger the deletion of a form's localStorage object from
     outside the plugin, trigger the reset_state event on the form element
     by using $("form").trigger("reset_state");
  */
  if (!window.localStorage || !window.JSON) {
    if (console && console.log) {
      !window.localStorage && console.log("ERROR: you browser does not support" +
        " localStorage (use this polyfill https://gist.github.com/350433)");
      !window.JSON&& console.log("ERROR: you browser does not support" +
        " JSON (use this polyfill http://bestiejs.github.com/json3/)");
    }
    return $.fn.rememberState = function() { return this; };
  }

  var remember_state = {
    name: "rememberState",
    clearOnSubmit: false, //default was true;
    //  ****************************
    /*noticeDialog: (function() {
        return $("<p />", {"class": "remember_state"})
        .html('Do you want to <a href="#">restore your previously entered info</a>?');
    })(),*/
    //  ****************************    
    ignore: null,
    noticeSelector: ".remember_state",
    use_ids: false,
    objName: false,
    clickNotice: function(e) {
      var data = JSON.parse(localStorage.getItem(e.data.instance.objName)),
          $f = $(this).closest("form"),
          $e;
      for (var i in data) {
        $e = $f.find("[name=\"" + data[i].name + "\"]");
        if ($e.is(":radio, :checkbox")) {
          $e.filter("[value=" + data[i].value + "]").prop("checked", true);
        }
        else if ($e.is("select")) {
          $e.find("[value=" + data[i].value + "]").prop("selected", true);
        }
        else {
          $e.val(data[i].value);
        }
        $e.change();
      }
      e.data.instance.noticeDialog.remove();
      e.preventDefault();
    },
    chooseStorageProp: function() {
      if (this.$el.length > 1) {
        if (console && console.warn) {
          console.warn("WARNING: Cannot process more than one form with the same" +
            " object. Attempting to use form IDs instead.");
        }
        this.objName = this.$el.attr("id");
      }
    },
    errorNoID: function() {
      if (console && console.log) {
        console.log("ERROR: No form ID or object name. Add an ID or pass" +
          " in an object name");
      }
    },
    saveState: function(e) {
      var instance = e.data.instance;
      var values = instance.$el.serializeArray();
      // jQuery doesn't currently support datetime-local inputs despite a
      // comment by dmethvin stating the contrary:
      // http://bugs.jquery.com/ticket/5667
      // Manually storing input type until jQuery is patched
      instance.$el.find("input[type='datetime-local']").each(function() {
        var $i = $(this);
        values.push({ name: $i.attr("name"), value: $i.val() });
      });
      values = instance.removeIgnored(values);

      values.length && internals.setObject(instance.objName, values);
    },
    save: function() {
      var instance = this;
      if (!this.saveState) {
        instance = this.data(remember_state.name);
      }
      instance.saveState({ data: { instance: instance } });
    },
    removeIgnored: function(values) {
      if (!this.ignore) { return values; }
      $.each(this.ignore, function(i, name) {
        $.each(values, function(j, input) {
          if (name === input.name) { delete values[j]; }
        });
      });
      return values;
    },
    init: function() {
      var instance = this;
        //  ****************************
     /* if (instance.noticeDialog.length && instance.noticeDialog.jquery) {
        instance.noticeDialog.find("a").bind("click." + instance.name, {
          instance: instance
        }, instance.clickNotice);
      }*/
        //  ****************************

      instance.chooseStorageProp();
      if (!instance.objName) {
        instance.errorNoID();
        return;
      }

      if (localStorage[instance.objName]) {
            //  **************************** 
        /*if (instance.noticeDialog.length && typeof instance.noticeDialog === "object") {
          instance.noticeDialog.prependTo(instance.$el);
        }
        else {
          instance.$el.find(instance.noticeSelector).show();
        }*/
            //  ****************************
      }
      if (instance.clearOnSubmit) {
        instance.$el.bind("submit." + instance.name, function() {
          instance.$el.trigger("reset_state");
          $(window).unbind("unload." + instance.name);
        });
      }

      instance.$el.bind("reset_state." + instance.name, function() {
          localStorage.removeItem(instance.objName);
      });
        //  ****************************
      /*$(window).bind("unload." + instance.name, { instance: instance }, instance.saveState);
      instance.$el.find(":reset").bind("click.remember_state", function() {
          $(this).closest("form").trigger("reset_state");
      });*/

    }
  };

  var internals = {
    setObject: function(key, value) { localStorage[key] = JSON.stringify(value); },
    getObject: function(key) { return JSON.parse(localStorage[key]); },
    createPlugin: function(plugin) {
      $.fn[plugin.name] = function(opts) {
        var $els = this,
            method = $.isPlainObject(opts) || !opts ? "" : opts;
        if (method && plugin[method]) {
          plugin[method].apply($els, Array.prototype.slice.call(arguments, 1));
        }
        else if (!method) {
          $els.each(function(i) {
            var plugin_instance = $.extend(true, {
              $el: $els.eq(i)
            }, plugin, opts);
            $els.eq(i).data(plugin.name, plugin_instance);
            plugin_instance.init();
          });
        }
        else {
          $.error('Method ' +  method + ' does not exist on jQuery.' + plugin.name);
        }
        return $els;
      };
    }
  };

  internals.createPlugin(remember_state);
})(jQuery);

});//]]>  

</script>
  <script>
  var thisPage = 'page1';   //defines the variable to use for local storage
    $(function() {
      $("form")
        .rememberState({objName: thisPage})
        .submit(function() {localStorage.setItem(thisPage, $(this).serializeArray());
        return true;
      });
    });
  </script>

</head>
<body>
  <form method="post" action="page2.cfm">
    <fieldset>
      <dl>

        <dt><label for="first_name">First Name</label></dt>
        <dd><input type="text" name="first_name" id="first_name" /></dd>
        <dt><label for="last_name">Last Name</label></dt>
        <dd><input type="text" name="last_name" id="last_name" /></dd>
      </dl>
    </fieldset>
    <fieldset class="actions">
      <input type="submit" value="Continue" />

    </fieldset>
  </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:01:12.993

我以为这会比以前更艰难。这是我想出的解决方案：

在按下提交按钮时的表单页面上：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>  
<script type="text/javascript">    
$(document).ready(function()    {
var thisPageID = 'page1';  // each page gets its own    
    $('form').submit(function() {    
        var formFields = $(this).serialize();    
        localStorage.setItem(thisPageID, formFields);    
        data = localStorage.getItem(thisPageID);    
        return true;    
    });    
});    
</script> 
```

然后在最后一页上，我通过页面 id 从本地存储中检索每个页面的数据，并用数据填充我的 div 标签。

```
function getLocalData(id){
    var ApplicantData;
    ApplicantData = localStorage.getItem(id);
    if (ApplicantData){
        $.each(ApplicantData.split('&'), function (index, elem) {
            var vals = elem.split('=');
            var $div = $("#"+vals[0]);
            var separator = '';
            //  console.log($div);
            if ($div.html().length > 0) {
                separator = ', ';
            }
            $div.html($div.html() + separator + decodeURIComponent(vals[1].replace(/\+/g, '  ')));
        });             
    }
} 
```

一些帮助我的文章（一些 SO，一些外部）：
-[清除 localStorage](https://stackoverflow.com/questions/7667958/clear-localstorage)
- [http://www.simonbingham.me.uk/index.cfm/main/post/uuid/using-html5-local-storage-and -jquery-to-persist-form-data-47](http://www.simonbingham.me.uk/index.cfm/main/post/uuid/using-html5-local-storage-and-jquery-to-persist-form-data-47)
- [http://www.thomashardy.me.uk/using-html5-localstorage-on-a-form](http://www.thomashardy.me.uk/using-html5-localstorage-on-a-form)

还有更多，但这就是我仍然在标签中打开的所有内容。

# c++ - 是否有任何技术/概念上的原因 boost::circular_buffer 不支持移动语义？

> ID：14282934
> 
> 赞同：3
> 
> 时间：2013-01-11T16:56:06.137
> 
> 标签：c++, boost, move, circular-buffer

我想用 unique_ptrs 填充 boost::circular_buffer 但我在公共接口的任何函数中都找不到任何“emplace”函数或任何 && 参数。是否有任何特殊原因 circular_buffer 不能支持我缺少的移动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-05-23T02:50:49.933

感谢[https://svn.boost.org/trac/boost/ticket/7888](https://svn.boost.org/trac/boost/ticket/7888) ，这现在在 Boost 中实现。最初的实现似乎是在 1.55 中，在 1.57 中对编译器警告进行了一些修复。

但是，从 Boost 1.63 开始，仍然不支持`emplace()`、`emplace_front()`或`emplace_back()`。有关这项工作，请参阅[https://svn.boost.org/trac/boost/ticket/9299](https://svn.boost.org/trac/boost/ticket/9299)。

# javascript - 使用 JavaScript 实现 message.properties 的最佳方式是什么以及如何？

> ID：14282935
> 
> 赞同：0
> 
> 时间：2013-01-11T16:56:07.887
> 
> 标签：javascript

我查看了 jquery.i18n，但它在 IE 中引起了很多问题，我的应用程序必须在 ie7+ 中工作。我正在使用 JavaScript MVC，但我不确定它们是否能很好地协同工作。

我想要做的是有一个带有一堆键的 message.properties 文件，然后用适当的消息属性键替换我的 html 和 js 中的硬编码文本。

我正在寻找一种普通的 javascript/jquery 方法而不是插件。如果那里有人这样做或可以指出我正确的方向，那将不胜感激。

提前致谢

# c# - 为位图之间的差异找到可能的最小矩形

> ID：14282942
> 
> 赞同：0
> 
> 时间：2013-01-11T16:56:29.620
> 
> 标签：c#, .net, image, bitmap

我正在尝试优化我正在编写的 VNC 类型应用程序的性能，但在真正优化它时遇到了一些困难。

给定两个位图，我想返回第三个位图，其尺寸尽可能小，完全包含位图之间的差异。

我能够返回与我的位图 A / 位图 B 大小相同的位图，其中差异有颜色，其余部分是透明的，但这并没有为我节省任何实际数据空间，也没有真正优化任何东西（除非位图对完全透明的像素做了一些特别的事情，但我觉得他们好像没有。）

无论如何，这就是我现在所拥有的，我可能会跟踪找到第一个更改的指针，然后跟踪找到最后一个更改的指针，但是如何将这些指针转换为矩形？我怎样才能将我的全尺寸差异位图裁剪到那个矩形？

这是我到目前为止使用的代码：

```
var a = previous.Screen;
var b = next.Screen;
Bitmap output = new Bitmap(
Math.Max(a.Width, b.Width),
Math.Max(a.Height, b.Height),
PixelFormat.Format32bppArgb);

Rectangle recta = new Rectangle(Point.Empty, a.Size);
Rectangle rectb = new Rectangle(Point.Empty, b.Size);
Rectangle rectOutput = new Rectangle(Point.Empty, output.Size);

BitmapData aData = a.LockBits(recta, ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);
BitmapData bData = b.LockBits(rectb, ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);
BitmapData outputData = output.LockBits(rectOutput, ImageLockMode.ReadWrite, PixelFormat.Format32bppArgb);

try
{
    unsafe
    {
      byte* aPtr = (byte*) aData.Scan0;
      byte* bPtr = (byte*) bData.Scan0;
      byte* outputPtr = (byte*) outputData.Scan0;

      int h = Math.Min(a.Height, b.Height);
      int w = Math.Min(a.Width, b.Width);

      for (int y = 0; y < h; y++)
      {
        aPtr = (byte*) aData.Scan0;
        bPtr = (byte*) bData.Scan0;
        outputPtr = (byte*) outputData.Scan0;

        aPtr += y*aData.Stride;
        bPtr += y*bData.Stride;
        outputPtr += y*outputData.Stride;

         for (int x = 0; x < w; x++)
         {
           bool bl = false;
           //the three color channels
           for (int j = 0; j < 3; j++)
           {
             if (*aPtr != *bPtr)
             {
               bl = true;
             }

             *outputPtr = (byte) *bPtr;

             outputPtr++;
             aPtr++;
             bPtr++;
          }

          //alpha, when one or mre color channels are different
          if (bl)
           *outputPtr = (byte) ((*aPtr + *bPtr)/2);

          outputPtr++;
          aPtr++;
          bPtr++;
         }
      }
   }

 }
 catch
 {
    if (output != null)
    {
      output.UnlockBits(outputData);
      output.Dispose();
      output = null;
    }
 }
 finally
 {
     a.UnlockBits(aData);
     b.UnlockBits(bData);

     if (output != null)
       output.UnlockBits(outputData);
 } 
```

# c# - 将 texbox 中的值存储到数组中，然后检查输入的长度以匹配数组大小 c#

> ID：14282944
> 
> 赞同：0
> 
> 时间：2013-01-11T16:56:34.117
> 
> 标签：c#, winforms, textbox

我是 C# 新手。我一直在尝试将输入到文本框中的值，在 Windows 窗体上，然后将它们保存在数组中。如果输入数据大于名称的大小，我试图然后显示一条消息。

例如，一个人在文本框中输入他们的名字。该数组的大小可能为`[20]`. 因此，如果名称超过 20 个字符，则会显示警告。

我有这个工作但没有使用数组来检查输入。

```
 string[] name = new string[20];
       public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            if (textBox1.Text.Length <= 0)
            {
                MessageBox.Show("empty");
            }
            else if (textBox1.Text.Length > 20)
            {
                MessageBox.Show("Too many letters");
            }
            else
            {

            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T17:06:03.430

如果您使用的是*Net 3.5 框架或更高版本，则可以使用*[IsNullOrWhiteSpace](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspx)验证`TextBox`if 是否包含字符串或为空

 *```
 char[] name;

    private void button2_Click(object sender, EventArgs e)
    {
        int countChar = textBox1.Text.Trim().Count();

        if (string.IsNullOrWhiteSpace(textBox1.Text)) //if (countChar == 0)
        {
            MessageBox.Show("empty");
            return;
        }

        if (countChar > 20)
        {
            MessageBox.Show("You have entered " + countChar.ToString() + " letters, Too many letters");
            return;
        }

        MessageBox.Show("Success");
    } 
```

***编辑：***我意识到 OP 想要将`TextBox`值存储到数组

```
 var toArray = textBox1.Text.Trim().ToArray();
        name = toArray.ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:11:25.780

做这个：

```
 // Global string list
    List<string> inputList = new List<string>();

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (textBox1.Text.Length <= 0)
        {
            MessageBox.Show("empty");
        }
        else if (textBox1.Text.Length > 20)
        {
            MessageBox.Show("Too many letters");
        }
        else
        {
            // Add to list if less than 20 but greater than 0
            inputList.Add(textBox1.Text);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T17:08:26.043

`name`将您的数组更改为`char[]`而不是`string[]`. 你在这里说的是你有一个字符串数组；比如 20 个全名而不是 20 个字符的名字。

在您的 if 语句中，您可以使用数组和文本框来满足您的条件

```
else if (textBox1.Text.Length > name.Length)
{
    MessageBox.Show("Too many letters");
} 
```

这还有很多其他的问题，可以采取不同的方法，但为了专注于您的问题，我已将所有其他不相关的信息排除在此答案之外。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T17:03:15.017

> 但没有使用数组来检查输入。

它在`array`内部使用。`String`是`char[]`并且`String.Length`实际上是 Char 数组的长度。

* * *

```
string[] name = new string[20]; 
```

您不需要`string[]`存储`string`长度为 20 的 a。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T17:03:37.223

对于此任务，更好地使用列表：

```
List<String> list_string=new List<String>(); 
```

添加项目您需要：

```
list_string.Add("My String"); 
```

列表是动态集合，因此您永远不会超出范围。

使用 String 类时的其他方式。

**字符串**是数组的字符，它是动态对象，所以你永远不会超出范围。*

# java - 如何将 java bean 值转换为网页/表示值？

> ID：14282946
> 
> 赞同：2
> 
> 时间：2013-01-11T16:56:43.430
> 
> 标签：java, jsp, localization, enums, javabeans

在原生 MVC Web 项目（不能使用 Hibernate 或 Spring）中，提供“转换表”以将 bean 变量中的值修改为呈现友好格式的最佳方式是什么？为每个变量提供自定义的“Web Getter 方法”似乎很糟糕。

例如：一个名为**status**的变量可以在持久层中填充值“A”、“I”、“D”或“U”，因此在 bean 中它是以这种方式存储的。但是在页面上，这四个值分别转换为“活动”、“不活动”、“已删除”和“未定义”。在哪里以及如何存放这些翻译知识？

（另外，Java webdev 社区对这种“翻译表”有一个特定的名称吗？在这里搜索已经回答的解决方案时，我有点词汇量不足。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:20:27.043

为此，通常使用资源包，这些资源包可以通过标准[JSTL](https://stackoverflow.com/tags/jstl/info) [`<fmt:xxx>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fmt/tld-summary.html)标记访问，甚至可以使用JSTL 标记在幕后使用的[`ResourceBundle`API以编程方式访问。](http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html)

例如包`status.properties`中的文件`com.example.i18n`

```
status.A = Active
status.I = Inactive
status.D = Deleted
status.U = Undefined 
```

with （前提是您有一个具有此属性的 bean `${bean}`）

```
<fmt:bundle basename="com.example.i18n.status">
    Status: <fmt:message key="status.${bean.status}" />
</fmt:bundle> 
```

或者

```
<fmt:bundle basename="com.example.i18n.status" prefix="status.">
    Status: <fmt:message key="${bean.status}" />
</fmt:bundle> 
```

### 也可以看看：

*   [如何使 Java Web 应用程序国际化？](https://stackoverflow.com/questions/4276061/how-to-internationalize-a-java-web-application/4278571#4278571)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:04:28.433

一种常见的方法是使用表示级别 bean 和域数据 bean。将代码放入表示 bean 以将域 bean（您已经拥有的域 bean）中的值复制到可显示的值。同样，您有代码，也可以在表示 bean 中，以在提交表单时转换回来。（假设您有一种方法可以在网站上为该数据组件创建。

如果转换代码变得复杂，或者整个应用程序中各种数据对象的转换之间存在大量共性，您可以将转换提取到一组类，这些类的工作是转换特定类型的数据，或者您可以有一些实用程序类具有执行常见转换的方法，并且它们被表示 bean 用于使转换代码小而紧凑。

# node.js - Node.js：使用 aync 函数或基于队列的工作程序运行外部进程任务？

> ID：14282950
> 
> 赞同：0
> 
> 时间：2013-01-11T16:57:00.320
> 
> 标签：node.js, web-worker

我有以下功能来调整图像大小并上传到 S3（使用“gm”和“knox”）：

```
var http = require('http');
var https = require('https');
var s3 = require('./s3');
var gm = require('gm');
var fs = require('fs');

module.exports.processImageUrl = function(imageUrl, filename, callback) {
    var client = http;
    if (imageUrl.substr(0, 8) == 'https://') { client = https; }

    client.get(imageUrl, function(res) {
        if (res.statusCode != 200) {
            return callback(new Error('HTTP Response code ' + res.statusCode));
        }

        gm(res)
            .geometry(1024, 768, '>')
            .stream('jpg', function(err, stdout, stderr) {
                if (!err) {
                    var file = fs.createWriteStream(__dirname + '/../tmp/' + filename + '.jpg');

                    stdout.pipe(file);

                    stdout.on('end', function() {
                        fs.stat(__dirname + '/../tmp/' + filename +'.jpg', function(err, stats) {
                            if (!err) {
                                var headers = {
                                    'Content-Length': stats.size
                                    ,     'Content-Type': 'Image/jpeg'
                                    , 'x-amz-acl': 'public-read'
                                };

                                var file = fs.createReadStream(__dirname + '/../tmp/' + filename + '.jpg');

                                s3.putStream(file, '/img/d/' + filename + '.jpg', headers, function(err, res) {
                                    if(err) {
                                        return callback(err);
                                    } else {
                                        fs.unlink(__dirname + '/../tmp/' + filename + '.jpg');
                                        return callback(null, res.client._httpMessage.url);
                                    }
                                });
                            }
                        });
                    });
                } else {
                    callback(err);
                }
            });
    }).on('error', function(err) {
            callback(err);
        });
}; 
```

如果我处理许多并发请求，可能会产生许多 GraphicsMagick 进程，实现基于队列的工作人员来处理图像并产生受控数量的进程是更好的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:32:42.973

在队列中管理这个绝对更好。您不希望最终用户由于请求数量而使您的服务停止，并且当您不排队高 CPU 操作时，DOS 攻击变得微不足道。我什至会考虑将 GraphicsMagick 代码放到不同的服务器/服务器上，这样您就可以独立于 http 代码轻松扩展它们。

# jquery - 悬停/退出时jQuery淡入/淡出没有闪烁或队列

> ID：14282951
> 
> 赞同：3
> 
> 时间：2013-01-11T16:57:00.573
> 
> 标签：jquery, queue, tooltip, fadein, jquery-hover

我有一个连续的 HTML 元素列表。每个列表项都包含一个超链接内的图像，如下所示：

```
<ul class="products">
  <li><a href="#" title="Title 1"><img src="image.jpg" /></a></li>
  <li><a href="#" title="Title 2"><img src="image.jpg" /></a></li>
  <li><a href="#" title="Title 3"><img src="image.jpg" /></a></li>
</ul> 
```

当您将鼠标悬停在列表项上时，我基本上想使用 jQuery 淡入包含链接标题的工具提示。因此，当您将鼠标悬停在第一个列表项上时，DOM 将变为以下内容：

```
<ul class="products">
  <li>
    <div class="product-title-ribbon">Title 1</div>
    <a href="#" title="Title 1"><img src="image.jpg" /></a>
  </li>
  <li><a href="#" title="Title 2"><img src="image.jpg" /></a></li>
  <li><a href="#" title="Title 3"><img src="image.jpg" /></a></li>
</ul> 
```

当您将鼠标移出时，工具提示需要淡出。它实际上最终会比标准工具提示更复杂，因此我不只是使用现成的解决方案；我试图让我的头脑了解机制，以便我能够理解它并适应前进。

无论如何，我有基本的工作，但它是丑陋的，因为当你在项目上鼠标时，工具提示会不断地淡入淡出。我在这里做了一个小提琴：http: [//jsfiddle.net/YcuYY/](http://jsfiddle.net/YcuYY/)。谁能提出一种改进方法，使工具提示更加精致而不会闪烁或排队？通过这种排序，我应该能够继续对其进行调整以适应最终需求。

```
var productRibbon = $('<div class="product-title-ribbon"></div>');

$('.products li').hover(function() {
    var productTitle = $('a',this).attr('title');
    productRibbon.text(productTitle);
    $(this).prepend(productRibbon);
    productRibbon.fadeIn(500);
},function () {
    $(productRibbon,this).fadeOut(500);
}); 
```

非常感谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:11:47.933

不要听人说这`hover`是错误的。他们不阅读 jQuery 官方文档。该`.hover()`方法绑定了 mouseenter 和 mouseleave 事件的处理程序。

**这完全没问题，而且是正确的**

`.on`为了简单起见，我将只使用该方法并委托`mouseenter`and`mouseleave`事件。

另外，我不会迭代`element` **productRibbon**因为它不值得，我会立即将它附加到`<li>`each 内部，以防止跳动的动画：

[jsBin 演示](http://jsbin.com/emisem/5/edit)

```
$('.products li').each(function(){     
   $(this).append('<div class="product-title-ribbon">'+ $('a',this).attr('title')+'</div>');      
}).on('mouseenter mouseleave',function( e ) {    
   $(this).find('.product-title-ribbon').stop().fadeTo(400, e.type=='mouseenter'?1:0);      
}); 
```

虽然`.stop()`防止动画堆积
`e.type=='mouseenter'?1:0`将根据当前注册的`e`事件确定不透明度级别并在您的 CSS 中
添加`display:none;``.product-title-ribbon`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T17:14:11.770

我稍微改变了 jsFiddle [http://jsfiddle.net/3ppqv/](http://jsfiddle.net/3ppqv/)

变化是：1）CSS - 将“display：none”添加到“product-title-ribbon”类

```
.products li {
  display: block;
  position: relative;
  float: left;
  width: 100px;
  height: 100px;
  margin: 10px;
  background: #ccc;
}
.product-title-ribbon {
  position: absolute;
  width: 120px;
  top: 40px;
  left: -10px;
  background: #f00;
  display: none;
} 
```

2）JavaScript，使 div 成为悬停时的局部变量，并将选择器 fadeOut 更改为使用 css 类：

```
$('.products li').hover(function() {
    var productRibbon = $('<div class="product-title-ribbon"></div>');
        var productTitle = $('a',this).attr('title');
        productRibbon.text(productTitle);
        $(this).prepend(productRibbon);
    productRibbon.fadeIn(500);
    },function () {
        $('.product-title-ribbon',this).fadeOut(500);
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T17:01:27.013

不要使用 .hover()。编辑：使用不透明度而不是淡入/淡出，或者如下所述使用 stop() 而不是 stop(1)。

```
$('.products li').on({
    mouseenter: function() {
        var productTitle = $(this).find('a').attr('title');

        productRibbon.text(productTitle);
        $(this).prepend(productRibbon);
        productRibbon.stop().animate({opacity:1},500);
    },
    mouseleave: function () {
        $(this).find(productRibbon).stop().animate({opacity:0},500);
    }
}); 
```

# php - Prestashop：动态切换主题并读取 cookie 以检查 url 中的参数

> ID：14282955
> 
> 赞同：0
> 
> 时间：2013-01-11T16:57:09.423
> 
> 标签：php, prestashop, smarty3

为了设置 A/B 测试（通过 GG Analytics），我计划复制我当前的主题（用于组织目的），以便使用复制的主题来进行测试的替代版本。我用`Prestashop 1.4.9.2`.

我已经做了什么，并且有效：

* * *

`/classes/FrontController.php`在`displayHeader()`函数中添加了这个*（我知道我应该覆盖，但不是重点；））*：

```
if(isset($_GET['alternate']))
{
    $cookie->alternate = "1";
    $cookie->write();
} 
```

* * *

替换为`/config/settings.inc.php`：

```
define('_THEME_NAME_', 'my_usual_theme'); 
```

经过

```
if(isset($_GET['alternate']) || $cookie->alternate == "1")
{
    define('_THEME_NAME_', 'my_alternate_theme');       
}
else
{
    define('_THEME_NAME_', 'my_usual_theme');
} 
```

* * *

这样，当我在最后加载带有“ `?alternate`”的 Prestahop url 时，它会加载替代主题。美好的。

**问题**：我无法检查 cookie 中的值`settings.inc.php`，因此当我单击链接时，它会加载默认主题。

**问题**：有什么线索可以检查这个文件中的 cookie 吗？或者`config.inc.php`？或者在另一个文件中“重新定义”主题名称，覆盖`settings.inc.php`设置？

请注意，我检查了另一个文件中的 cookie 以验证该过程，它运行良好。我也尝试使用经典`setcookie`方法，但如果我可以阅读/检查，我不能用这种方式写......而且由于我不明白的原因，Smarty 中的 PHP 激活不起作用（试图`setcookie`直接在模板中，但即使使用简单的回显也会出现错误 500）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:00:08.307

我认为最简单的方法是移动`define('_THEME_NAME_', 'prestashop');`到可以使用全局`$cookie`变量的地方。

问候

# ruby-on-rails-3 - rspec vs 'url_validation' gem

> ID：14282956
> 
> 赞同：1
> 
> 时间：2013-01-11T16:57:12.723
> 
> 标签：ruby-on-rails-3, validation, rspec2

作为一个新的 Rails 人，我正在为 rspec 苦苦挣扎，我需要验证传递给 Active Record 的 url。这可能是由于我的无知，所以请指出我正确的方向。video_url 是一个字符串字段，我想将其验证为有效的 URL。环顾四周，我选择了这个 gem，因为它似乎在 rspec 中经过了全面测试。对于我的测试，我没有看到如何将他的验证测试合并到我的模型测试中。

在 Rails 控制台中，我创建了一个 Post 对象，并确保如果我输入了一个我知道不会被发现的虚假 URL，我会得到一个错误。奇怪的是，尝试在安装了 gem 的测试中复制它会失败，因为它没有发现错误。当我进入控制台时，我预计会出现某种错误。我的问题是我做错了什么，因为它没有错误？我已经多次尝试对可能导致它的原因进行三角测量，但 gem 似乎在 rspec 中不起作用？我原以为如果我可以让它在控制台中工作，我可以让它在 rspec 中工作吗？

post.rb

```
 class Post < ActiveRecord::Base
   attr_accessible :body, :title, :image, :video_title, :video_url
   validates_presence_of :title, :body, :author
   validates :video_url, :presence => true, :if => :video_title_present?, :url => { 
        :check_path => [ 300..399, 400..499, 500..599 ], :allow_nil => true,
        :url_not_accessible_message => "must be valid.",
        :invalid_url_message => "must be valid.",
        :url_invalid_response_message => "must be valid."}

   def video_title_present?
     !self.video_title.blank?
   end
   belongs_to :author, class_name: "User"
 end 
```

post_spec.rb

```
 before do
   @post = Post.new(title: "foo", body: "my body here")
 end

 describe "validates with video links" do
   it "validates with video url and video title" do
     @post.video_url = "http://heckitoqi.com"
     @post.video_title = "my title"
     @post.should have_at_least(1).error_on(:video_url)
   end
 end 
```

控制台输出：

```
 Failure/Error: @post.should have_at_least(1).error_on(:video_url)
 expected at least 1 error on :video_url, got 0 
```

在我的一些错误中，我尝试了一个更开放的错误，但由于没有发现任何错误而失败。

这是我使用 Rails 控制台对模型进行的烟雾测试的简短版本：

```
 u = User.first
 p = Post.new(title: "title", body: "body", video_title: "vtitle", video_url: "http://heckitoqi.com")
 p.author = u
 p.save!

 >> HTTPI GET request to heckitoqi.com (net_http)
 >> ActiveRecord::RecordInvalid: Validation failed: Video url must be valid. 
```

如果我可以让它在控制台中验证，那么我的测试实现有问题，对吧？我只是不明白我做错了什么。谢谢，山姆

# xcode - 预期标识符或“（” - xCode

> ID：14282958
> 
> 赞同：3
> 
> 时间：2013-01-11T16:57:17.630
> 
> 标签：xcode

我是一名正在为我的学校学习和开发应用程序的学生。我刚刚开始并且做得很好。但是，我收到错误“预期标识符或'（'”。我已经花了几天时间阅读帖子和谷歌搜索，但没有找到适合我的解决方案。

我正在尝试在我的应用程序的第二个选项卡上制作一个圆形矩形按钮，以链接到学校的网站。

这是.h：

```
#import <UIKit/UIKit.h>

@interface SecondViewController : UIViewController  {

}

- (IBAction)Website:(id)sender;

 @end 
```

这是我的 .m 错误评论：

```
#import "SecondViewController.h"

@interface SecondViewController ()

@end

@implementation SecondViewController 

-(IBAction)Website {
[[UIApplication sharedApplication ] openURL:[NSURL URLWithString:@"http://www.google.com"]];

}

{      **// Error is on this line[23]**
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (IBAction)Website;

- (IBAction)Website:(id)sender; {
}
@end 
```

我该如何解决这个小家伙？非常感谢！此外，.h 文件是由 xCode 形成的，只需控制从按钮拖动到 .h 并创建一个动作。这可能是原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T17:01:09.900

我认为您不小心删除了这一行：

```
- (void)viewDidLoad 
```

在这条线之上

```
{      **// Error is on this line[23]** 
```

但为简单起见，您可以删除它：

```
{      **// Error is on this line[23]**
     [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
 } 
```

因为你没有使用 viewDidLoad 做任何事情

# random - Arduino 的同时和随机输出引脚

> ID：14282959
> 
> 赞同：0
> 
> 时间：2013-01-11T16:57:23.093
> 
> 标签：random, arduino, fadein, fadeout

我有一个项目需要八个不同的灯在随机时间打开和关闭之间循环，随机淡入、随机淡出和随机开/关持续时间。我的策略是淡入淡出，随机开启一段时间，淡出，随机关闭一段时间，重复。虽然现在我在每个 for 循环之前都选择了一个随机引脚，但我想使用一个 for 循环随机选择一个引脚来运行整个开/关循环。

这是我的伪代码。或者也许这是我的代码。

```
void setup() {
    int pin = 0;
    int fadeIn = 0;
    int fadeOut = 0;
    int onDuration = 0;
    int offDuration = 0;
}
void loop() {    
pin = random(2,8)
onDuration = random(2000,15000)
    for (fadeIn=0;fadeIn<255;i++) {
        analogWrite(pin,fadeIn)
    }
delay(onDuration)
pin = random(2,8)
offDuration = random(1000,7000)
    for (fadeOut=254;fadeOut>0;fadeOut--) {
        analogWrite(pin,fadeOut)
    }
delay(offDuration)
} 
```

循环（打开，然后关闭）将是循环的一个实例。如果我想在第一个循环运行时在另一个引脚上启动循环的第二个实例，那我可以通过编程方式完成吗？或者我需要八个控制器，每个控制器同时淡入和淡出灯光？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:35:22.270

在上面的代码中，淡入和淡出不是随机时间。那是你的意图吗？如果是这样，您需要在循环的每次迭代中添加延迟。

无论如何，这是您可以在没有 8 个单独的板的情况下完成的事情。

因为它是嵌入式的，所以你不能很容易地多线程。您需要实现自己的任务调度程序，并且必须将每个 LED 视为自己的任务。然后，您只需跟踪每个不同 LED 的状态（淡入、打开、淡出或关闭）。当您在不同任务之间切换时，根据状态控制每个 LED。

至于基于时间的任务调度程序，您有不同的选择。也许最简单的方法是实现周期性定时器中断。AVR 数据表很好地解释了这一点。对于 Arduino，您还可以使用一些库。例如： http: [//playground.arduino.cc/code/timer1](http://playground.arduino.cc/code/timer1)

另一种选择是做类似的事情： [http ://arduino.cc/forum/index.php?PHPSESSID=3e72433bc4375ee6c20d56f3998762ca&topic=5686.msg44073#msg44073](http://arduino.cc/forum/index.php?PHPSESSID=3e72433bc4375ee6c20d56f3998762ca&topic=5686.msg44073#msg44073)

只是一些建议。听起来是一个有趣的项目。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T04:46:56.017

您可以使用带有 switch/case 语句的程序化编码风格并通过一些变量跟踪状态来管理这类事情（多个灯/线程）。由于 Arduino 上的内存有限，这有时是唯一的方法。

另一方面，我在使用[自定义类](https://stackoverflow.com/questions/1735990/using-classes-with-the-arduino)和[自定义库](http://arduino.cc/en/Hacking/LibraryTutorial)的面向对象方法进行这种照明控制方面取得了很大成功。更容易，`loop()`然后您只需要处理更高级别的逻辑并为每个实例提供服务（例如，告诉它更新并且实例处理该逻辑）。

唯一的问题是内存有限 - 所以它可能取决于您使用的特定板。不过，我建议您试一试-可能会很好地记忆，并且您会学到很多东西。

# autohotkey - 使 Alt+Enter 发送结束键，修饰符不起作用？

> ID：14282961
> 
> 赞同：2
> 
> 时间：2013-01-11T16:57:36.970
> 
> 标签：autohotkey

很简单的问题，但我遇到了问题。我试过这个`!Enter::Send, {End}`效果很好，但我遇到的问题是我不能使用其他修饰符。`Alt`+ `Shift`+`Enter`应该作为`Shift`+ `End`，并且`Alt`+ `Ctrl`+`Enter`应该作为`Ctrl`+`End`

我也试过这个，`*!Enter::Send, {End}`但它似乎忽略了`Ctrl`and or `Shift`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T17:54:35.770

热键消耗他们的事件，所以他们`*`正在吃`Shift`或`Ctrl`事件。

`*`当您希望一系列热键都做同样的事情时，它很有用。

```
*#c::Run Calc.exe  ; Win+C, Shift+Win+C, Ctrl+Win+C, etc. all launch calc 
```

以下应该做你想要的。

```
!Enter::^End 
```

或者

```
!Enter:: Send, {End}
+!Enter:: Send, +{End}
^!Enter:: Send, ^{End} 
```

# matlab - 从 Matlab 中的 X 和 Y 数组获取 linspace 上的 Y 列表

> ID：14282969
> 
> 赞同：2
> 
> 时间：2013-01-11T16:58:04.963
> 
> 标签：matlab

我有两个数组 - X 点和 Y 点。X 数组有一些空格（例如 [0 1 2 6 7 8]），而 Y 数组仅包含该 X 的值。我已经将该数组作为小波变换的局部最大值。我可以用它来绘制它`plot(X,Y)`

现在我想在 linspace 上获取 Y - Y 必须包含从 0 到 8 的任何 X 的值。我想要与`plot(Y)`前一个相同的图`plot(X, Y)`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:03:44.830

看起来您想要执行插值

```
xPts = [0 1 2 6 7 8];
yPts = ...

xPlot = 0:1:8;
yPlot = interp1(xPts,yPts,xPlot,'cubic')

plot(xPlot,yPlot) 
```

检查[interp1 的文档以了解](http://www.mathworks.com/help/matlab/ref/interp1.html)不同的插值方案。

如果有重复的 x 值，您可以平均相应的 y 值

```
 xPtsRep = [0 0 1 2 6 7 7 8]
   yPtsRep = ...

   [xPts,~,xIdx] = unique(xPtsRep);
   yPts = accumarray(xIdx,yPtsRep,[],@mean); 
```

# php - 复选框总是在 javascript/php 中返回 true

> ID：14282970
> 
> 赞同：0
> 
> 时间：2013-01-11T16:58:04.703
> 
> 标签：php, javascript, html, ajax

我正在尝试使用将值传递给 PHP 的 Ajax/Javascript 响应来获取复选框的值，以便我可以根据值执行查询（“已检查”、“未检查”）

```
<input type="checkbox" name="status" onclick="updateStatus(<? echo $data['id']; ?>,this.checked)"> 
```

函数“updateStatus”的 Javascript/Ajax 代码如下

```
function updateStatus(id,value) {
if (window.XMLHttpRequest) {
    http = new XMLHttpRequest()
} else if (window.ActiveXObject) {
    http = new ActiveXObject("Microsoft.XMLHTTP")
} else {
    alert("Your browser does not support XMLHTTP!")
}
http.abort();
http.open("GET", "../functions/ajax.php?check=update_status&id=" + id + "&checked="+value, true);
http.onreadystatechange = function () {
     if (http.readyState == 4) {
        alert(http.responseText);
     }
 }
 http.send(null) 
```

functions/ajax.php 中的 PHP 函数

```
if(isset($check) and $check == 'update_status' and isset($_GET['id'])){
    $id = mysql_real_escape_string($_GET['id']);
    $checked= mysql_real_escape_string($_GET['checked']);
if($checked == true) {
    echo "Checked";
} elseif($checked == false) {
    echo "Not checked";
} else {
    echo "Invalid response";
} 
```

使用此代码时，它总是返回“已检查”，知道为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T17:02:53.997

在 JS 中。`value`将是`true`或`false`。当您对其中任何一个进行字符串化时，您将获得一个字符串 (`'true'`或`'false'`)。

因此`$_GET['checked']`将是其中之一`"true"`或`"false"`两者`== true`。

To fix this on the PHP side, compare to the *string* `"true"` and the *string* `"false"`; not the boolean.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T17:04:28.153

You are getting `$_GET['checked']` as a `String`. Change to something like:

```
if($checked == "true") {
    echo "Checked";
} elseif($checked == "false") {
    echo "Not checked";
} else {
    echo "Invalid response";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T17:06:34.693

This might help you in your answer [https://stackoverflow.com/a/4228827/90648](https://stackoverflow.com/a/4228827/90648)

You can try replacing the code

```
"&checked="+value 
```

with

```
(value ? "&checked=true" : '') 
```

This way you will only send the value true when it is checked, and not send anything (which you can check in PHP with `isset`)

or you can go with

```
(value ? "&checked=true" : '&checked=') 
```

which will again, not send anything, thus empty string will be interpreted as `false`.

# android - Android：如何将谷歌地图视图上的按钮设置为不透明

> ID：14282973
> 
> 赞同：0
> 
> 时间：2013-01-11T16:58:13.217
> 
> 标签：android

到目前为止，我有一个谷歌地图视图，我想在地图视图上显示两个按钮。但是当我像这样添加它们时

```
<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:apiKey="..."
    android:clickable="true" />

<Button
    android:id="@+id/etageplus"
    android:
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginRight="14dp"
    android:layout_marginTop="15dp"
    android:text="+" />

<Button
    android:id="@+id/etageminus"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/etageplus"
    android:layout_below="@+id/etageplus"
    android:text="-" /> 
```

...它们是透明的，我不希望它们透明。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:11:34.480

您是否尝试过设置背景颜色或可绘制？颜色的第一个八位字节是透明度，FF 是完全不透明的

# grails - 会话超时后的 Grails Spring Security 重定向

> ID：14282979
> 
> 赞同：3
> 
> 时间：2013-01-11T16:58:34.137
> 
> 标签：grails, spring-security, session-timeout

我对会话超时有疑问。在我的 grails 应用程序中，用户在会话超时后登录，但随后进入最后编辑的页面。我想阻止这种情况并将它们发送到特定的 URL。我怎样才能做到这一点，我在 spring 安全文档中找不到东西。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:13:04.640

根据[docs](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/13%20URL%20Properties.html)，您似乎可以使用以下组合：

```
successHandler.defaultTargetUrl="/whatever/url/you/want"
successHandler.alwaysUseDefault=true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T18:14:31.483

默认情况下，spring security 会在登录成功后转发原始请求。您可以通过添加以下内容来防止这种情况`Config.groovy`：

```
grails.plugins.springsecurity.successHandler.alwaysUseDefault = true
grails.plugins.springsecurity.successHandler.alwaysUseDefaultTargetUrl = true
grails.plugins.springsecurity.successHandler.defaultTargetUrl = '/my/default/url' 
```

这两个属性听起来应该做同样的事情，但在我的情况下，它只有在我同时拥有它们时才有效。也许你可以删除其中一个并让它工作......

这将在您登录时改变行为，而不仅仅是在超时之后。如果您需要更动态的解决方案，我想您必须深入研究 Spring Security 源代码...

# c# - 为什么我的 mysql 查询总是返回一个 int 值而不是一个布尔值？

> ID：14282980
> 
> 赞同：1
> 
> 时间：2013-01-11T16:58:35.243
> 
> 标签：c#, mysql

我正在尝试从 C# 中读取以下存储过程。

```
DECLARE IsTrue boolean;
DECLARE IsFalse boolean;
set IsTrue = true;
set IsFalse = false;
SELECT  
     stuff.ID1
    ,stuff.ID2
    ,stuff.ID3
    ,stuff.ID4
      ,CASE  
            WHEN stuff1.ID1 IS NOT NULL THEN IsTrue
            WHEN stuff1.ID1 IS NULL THEN IsFalse
            END AS 'stuff1Column'   
      ,CASE   
            WHEN stuff2.ID1 IS NOT NULL THEN IsTrue
            WHEN stuff2.ID1 IS NULL THEN IsFalse
            END AS 'stuff2Column'   
      FROM myStuff.stuff
      LEFT JOIN myStuff.stuff1 ON stuff.ID1 = myStuff.stuff1.ID1
      LEFT JOIN myStuff.stuff2 ON stuff2.ID1 = myStuff.stuff2.ID1
      ORDER BY stuff.ID1 DESC; 
```

基本上在 C# 中，我抛出了以下异常。

```
Object of type 'System.Int32' cannot be converted to type 'System.Boolean'. 
```

即使我指定返回一个布尔值，它也给了我一个`Int`。我也尝试过为此使用 tinyint(1) ，但它仍然不起作用。

这是课程：

```
public class Stuff {
        private int _ID1;
        private int _ID2;
        private int _ID3;
        private int _ID4;
        private bool _stuff1Column;
        private bool _stuff2Column;

    public int ID1 {
        get { return _ID1; }
        set { _ID1 = value; }
    }
    public int ID2 {
        get { return _ID2; }
        set { _ID2 = value; }
    }
    public int ID3 {
        get { return _ID3; }
        set { _ID3 = value; }
    }
    public int ID4 {
        get { return _ID4; }
        set { _ID4 = value; }
    }
    public bool Stuff1Column {  
        get { return _stuff1Column; }
    set { _stuff1Column = value; }
    }
    public bool Stuff2Column {  
        get { return _stuff2Column; }
        set { _stuff2Column = value; }
    }   
} 
```

**编辑 1**

我的班级正在尝试将`stuff1Column`and读取`stuff2Column`为 bool 值，因为这就是属性。

**编辑 2**

这是读取它的 C# 代码。

```
public static List<T> Read<T>(T data, string procedure) {
    List<T> collection = new List<T>();
    PropertyInfo[] properties = typeof(T).GetProperties(BindingFlags.Public | BindingFlags.Instance);
    List<PropertyInfo> propertiesToSearch = new List<PropertyInfo>();
    foreach (PropertyInfo prop in properties) {
        if (prop.GetCustomAttributes(false).Any(x => x.GetType() == typeof(DataParameter)))
            propertiesToSearch.Add(prop);
    }
    MySqlConnection connection = new MySqlConnection(Properties.Settings.Default.MySqlConnection);
    MySqlCommand command = new MySqlCommand(procedure, connection);
    command.CommandType = CommandType.StoredProcedure;
    foreach (PropertyInfo property in propertiesToSearch) {
        var parameterName = "@" + property.Name;
        var value = property.GetValue(data, null);
        command.Parameters.AddWithValue(parameterName, value);
    }
    connection.Open();
    MySqlDataReader reader = command.ExecuteReader();
    while (reader.Read()) {
        T item = Activator.CreateInstance<T>();
        foreach (PropertyInfo property in propertiesToSearch) {
            if (reader[property.Name] is MySql.Data.Types.MySqlDateTime) {
                property.SetValue(item, (DateTime)(MySql.Data.Types.MySqlDateTime)reader[property.Name], null);
            } else {
                Type test = reader[property.Name].GetType();
                property.SetValue(item, reader[property.Name], null);
            }
        }
        collection.Add(item);
    }
    reader.Close();
    connection.Close();
    return collection;
} 
```

**编辑 3**

我有另一个存储了 tinyint(1) 值的表，MySqlDataReader 自动将其解释为布尔值。所以我相信这与它是一个存储过程以及它不是实际存储值的事实有关，可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:01:13.513

我错了，在 MySQL 中没有与 C# 的 Boolean 类型等效的类型，因此您只能使用 NUMERIC 类型并将返回的值评估为 C# 中的整数。

因此，保留 BOOLEAN 类型并修改 C# 代码以评估返回的 BOOLEAN 值（因此 0 表示 False，1 表示 True）。

# python - Python多处理挂起

> ID：14282981
> 
> 赞同：0
> 
> 时间：2013-01-11T16:58:36.740
> 
> 标签：python, python-2.7, python-multithreading

我开始在 python 中学习多处理，但已经到了我的代码挂起的地步。它只是使用多线程计算 1 000 000 阶乘。

```
import multiprocessing

def part(n):
    ret = 1
    n_max = n + 9999
    while n <= n_max:
        ret *= n
        n += 1
    print "Part "+ str(n-1) + " complete"
    return ret

def buildlist(n_max):
    n = 1
    L = []
    while n <= n_max:
        L.append(n)
        n += 10000
    return L

final = 1
ne = 0
if __name__ == '__main__':
    pool = multiprocessing.Pool()
    results = [pool.apply_async(part, (x,)) for x in buildlist(1000000)]
    for r in results:
        x = r.get()
        final *= x
        ne+= 1
        print ne
    print final 
```

我已经包含了一些打印函数来尝试诊断代码挂起的位置，它会按预期打印部分函数中包含的字符串 100 次。“print ne”也可以工作 100 次。

问题是 final 不会打印，并且代码没有完成。

我该如何解决这个问题？

编辑：另外，由于这被否决了，有人可以解释我做错了什么/为什么我被否决了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:20:42.440

该程序运行良好 --- 直到`print final`. 然后它会花费大量时间来尝试打印这个数字，这是非常巨大的......

# ruby-on-rails - Rails 3 Action Mailer：可以从用户的电子邮件中向自己发送电子邮件（用于“联系我们”表格）？

> ID：14282982
> 
> 赞同：0
> 
> 时间：2013-01-11T16:58:48.090
> 
> 标签：ruby-on-rails

嗨，我正在尝试为联系我们的表格制作邮件。电子邮件将是`:from`user@email.com 和`:to`my@email.com 。这可以在开发中通过 SMTP 完成吗？ActionMailer 是真的从用户的电子邮件帐户发送电子邮件，还是只是假电子邮件？我想使用 user@email.com 作为发件人的原因是因为我希望我可以轻松地直接回复该电子邮件。

我正在尝试使用 localhost 并且收到错误消息：`Errno::ECONNREFUSED (Connection refused - connect(2)):`我认为这是因为我没有正确设置设置。发送此电子邮件是否需要在实际 gmail 帐户上具有用户名/密码？

这是我现在的设置（我没有任何用户名/密码，所以这可能是我错误的根源吗？）：

```
ActionMailer::Base.smtp_settings = {
  :address              => '127.0.0.1',
  :port                 => 25
} 
```

控制器：

```
def email
  ContactMailer.contact_form(params).deliver
end 
```

邮寄者：

```
class ContactMailer < ActionMailer::Base
  default :to => "my@email.com"

  def contact_form(sender)
    @sender = sender
    mail(:from => sender[:email], :subject => "Question from #{sender[:company] ?     sender[:company] : "" } 
                                              - Contact Us")
  end
end 
```

意见/contact_mailer/contact_mailer.text.erb：

```
We have been contacted by <%= @sender[:email] %> 
```

固定的

我将此行添加到我的初始化程序中：

`ActionMailer::Base.delivery_method = :sendmail`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:01:49.097

使用[Letter Opener](https://github.com/ryanb/letter_opener)进行开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T18:42:01.217

@Edmund，我很好奇，当您说“已修复”时，这是否意味着您通过将该行添加到初始化程序来解决此问题？如果是这样介意澄清究竟是哪个文件？

我对[本付费教程](http://learn-rails.com/learn-ruby-on-rails.html)的理解是，您不需要设置任何 SMTP 设置，因为只有在您从自己的帐户发送电子邮件时才需要这些设置（即 SMTP 允许 ActionMailer 进入您的帐户并在代表你）。

我会说虽然这提出了一个奇怪的假设...... ActionMailer 能够以某种方式从其他人的帐户发送电子邮件，而无需了解他们的 SMTP 设置。

无论如何，这是一个奇怪的部分答案，因为这是教程教给我的，但我实际上无法让它工作，所以我也很想知道什么对你有用。

# wpf - MultiDataTrigger 不会更改 TextBox 的 IsReadOnly 属性

> ID：14282984
> 
> 赞同：0
> 
> 时间：2013-01-11T16:58:56.487
> 
> 标签：wpf, xaml, multidatatrigger

我`MultiDataTrigger`在多行中使用`TextBox`：

```
<TextBox TextWrapping="Wrap" ScrollViewer.CanContentScroll="True"
                    FlowDirection="RightToLeft" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Auto"
                    Text="{Binding ArabicDescription}" IsReadOnly="True">
    <TextBox.Style>
        <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource {x:Type TextBox}}">
            <Style.Triggers>
                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding Path=EnableNewEntry}" Value="True" />
                        <Condition Binding="{Binding Path=AllowArabic}" Value="True" />
                    </MultiDataTrigger.Conditions>
                    <Setter Property="IsReadOnly" Value="False" />
                    <Setter Property="Background" Value="Blue" />
                </MultiDataTrigger>
            </Style.Triggers>
        </Style>
    </TextBox.Style>
</TextBox> 
```

当`EnableNewEntry`和`AllowArabic`变为真时，`TextBox`应该变为只读。为了测试，我也改变了背景颜色。问题是在适当变化的`IsReadOnly`地方没有变化。`Background`

我也尝试了以下设置器，但它也不起作用：

```
<Setter Property="TextBox.IsReadOnly" Value="False" /> 
```

我究竟做错了什么？

里特什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:01:56.027

您不应将 IsReadolny 显式设置为 True 使用您已经必须将其设置为 false 的 MultiDataTrigger 并在需要时将其设置为 true 但不要在 TextBox 属性中设置它

# c++ - 对于 c++ 整数，1 除以 2 是否可靠地等于 0，并且 3/2 = 1、5/2 = 2 等等？

> ID：14282989
> 
> 赞同：8
> 
> 时间：2013-01-11T16:59:27.340
> 
> 标签：c++, integer-division

有两个不同但相关大小的向量。较大的是`(2 * RESOLUTION) + INDEX_OFFSET`（例如2050），较小的是简单`RESOLUTION`（例如1024）。我相信假设它`uint16_t`可以用来包含向量索引是足够安全的。

通过增加`resultIndex`2 来执行对较大向量的迭代。在每次迭代期间，对索引处的较小向量进行赋值`(resultIndex - INDEX_OFFSET) / 2`。

本质上，代码依赖于这样的假设，无论`INDEX_OFFSET`是奇数还是偶数，上述除以 2 将始终向下舍入，而与架构无关。例如，如果`resultIndex`是 0 或 1，则预期为 0，如果是 2 或 3，则预期为 1，依此类推。在上述参数范围内，这是一个安全的假设吗？

注意我承认存在[“除整数类型 - 结果可预测吗？”](https://stackoverflow.com/questions/8064447/dividing-integer-types-are-results-predictable "划分整数类型 - 结果可预测吗？") 但它似乎并不完全匹配。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-11T17:01:39.483

是的; 这是由语言保证的：

> `[C++11: 5.6/4]:`二元`/`运算符产生商，二元`%`运算符产生第一个表达式除以第二个表达式的余数。如果`/`or的第二个操作数`%`为零，则行为未定义。**对于整数操作数，`/`运算符产生代数商，其中任何小数部分被丢弃；**如果商`a/b`在结果类型中是可表示的，`(a/b)*b + a%b`则等于`a`。

在`3/2`中，`3`和`2`都是整数操作数；这个运算的代数商是`1.5`，当你丢弃小数部分时`.5`，你得到`1`. 这适用于您的其他示例，以及所有其他示例。

# jquery - 同一页面上具有相同href的多个锚标记，片段标识符不起作用

> ID：14282991
> 
> 赞同：0
> 
> 时间：2013-01-11T16:59:35.367
> 
> 标签：jquery, html

这是最奇怪的事情 - 我有一个带有以下锚标记的 html 页面，它可以完美运行。

```
<a href="index.php#contact">Contact</a> 
```

在页面的下方，我有相同的锚标记......

```
<a href="index.php#contact">Contact</a> 
```

第一个有效，第二个无效！Firebug 控制台显示以下错误消息：

```
[11:52:23.927] Syntax error, unrecognized expression: nav a[href=index.php#contact] @ http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js:2 
```

这太奇怪了！如果我删除 href 的片段标识符（#contact）部分，则链接仍然有效！例子：

```
<a href="index.php">Contact</a> 
```

并且使用不同的片段标识符不起作用 - 示例：

```
<a href="index.php#abcdefg">Contact</a> 
```

有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:06:28.453

问题是您的 jquery 选择器。似乎在某处您正在调用像这样（或类似）的 jquery 函数：

```
$('nav a[href=index.php#contact]'); 
```

要修复它，请使用以下命令：

```
$('nav a[href="index.php#contact"]'); 
```

# maven-3 - 将 Maven 依赖项绑定到特定的存储库

> ID：14282993
> 
> 赞同：0
> 
> 时间：2013-01-11T16:59:39.393
> 
> 标签：maven-3

在我们的一个较大项目中，我们已经有六个左右的远程存储库来收集各种依赖项。当一个新的存储库出现时，Maven 会尝试从新存储库下载所有内容，毕竟可能会有一个新版本。其中一些存储库非常慢或直到超时才响应，从而导致构建时间长得离谱。

另一个问题是 Maven 试图从远程存储库中下载我们自己的内部构件，当然它们不是托管在这些存储库中的。我认为这是一个巨大的隐私问题。

**是否可以以仅从特定存储库下载依赖项的方式配置 Maven？**

我知道您可以设置自己的 Maven 存储库管理器（如 Nexus），但我想知道是否可以使用普通 Maven。尝试从远程存储库获取本地工件很烦人，即使它只是一个小的家庭项目，恕我直言不保证设置一个完整的存储库管理器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T10:49:04.810

为了不让这个问题永远得不到回答：

**不，这是不可能的。**我认为这是 Maven 的一个主要缺点（众多缺点之一），但你去了。

# android - 像 iphone 通用图像加载器这样的库-（在 monotouch 和 monodroid 中使用 android 库）

> ID：14282997
> 
> 赞同：1
> 
> 时间：2013-01-11T16:59:48.587
> 
> 标签：android, iphone, xamarin.ios, xamarin.android, universal-image-loader

我使用 monodroid 为 android 开发了一个应用程序。现在，我想通过 monotouch 为 iphone 开发应用程序。在 android 应用程序中，我使用 Universal Image Loader 在列表视图的图像视图、图库视图等中显示下载的图像。现在的问题是，有没有像通用图像加载器这样的库可以将此库用于 iphone 的应用程序？或者 xamarin 是否赋予在 monotouch 和 monodroid 应用程序中使用库的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:45:26.720

对于 MonoTouch，我最常看到用于图像加载和缓存的库是 MonoTouch.Dialog 项目中的图像加载器。

其他可用，包括我的库中的缓存 mvvmcross ......虽然现在我很想看看使用 Universal Image Loader 代替！