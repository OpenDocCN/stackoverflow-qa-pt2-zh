# StackOverflow 问答 15333000-15333999

# android - android库提供的任何库以使相机具有高对比度？

> ID：15333001
> 
> 赞同：0
> 
> 时间：2013-03-11T07:08:23.060
> 
> 标签：android, android-camera, high-contrast

我正在做一个关于具有高对比度功能的manifier的android作业。

我不想保存图像，而是希望用户将相机用作具有高对比度功能的调节器。但我只能找到使图像对比度高的方法。

所以我想知道有没有办法让相机变得高对比度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:11:42.683

您可以使用**平均阈值**方法。[这个答案](https://stackoverflow.com/a/8959828/752320)更详细一点，并且有一个链接到详细介绍算法的论文。我不能保证它对每一帧都足够快，但我已经将它用于全分辨率静止图像，没有明显的延迟，所以对于较小（预览尺寸）的图像，应该没问题。

# javascript - 使用 jQuery 动态添加数据后重新加载 CSS 的最有效方法是什么？

> ID：15333003
> 
> 赞同：1
> 
> 时间：2013-03-11T07:08:28.287
> 
> 标签：javascript, jquery, css, twitter-bootstrap

此行是在 ajax 调用之后添加的：

```
<tr id="product1" class = "success">
    <td>1</td>
    <td>product one</td>
</tr> 
```

该类`success`为该行设置了绿色背景，但显然这种样式丢失了，因为该行是动态添加的。

我已经看到了通过动态加载 CSS 的解决方案，但我想知道如果您拥有一个广泛的样式表，哪种方法最有效。谢谢

我正在使用助推器：

```
 <table id = "table_result" class="table">
          <thead id ="table_result_search">
            <tr>
              <th>#</th>
              <th>Product</th>
              <th>Price</th>
              <th>Stock</th>
            </tr>
          </thead>
          <tbody>

          </tbody>
        </table> 
```

和jQuery：

```
//ajax
var tr = TrTableResult(id,nombre, stock, price, n);
$("#table_result_search").append(tr);
//fin ajax
function TrTableResult(id,nombre,stock,price,n){
var color = new Array("success", "error", "warning", "info");
var tr = '<tr id ="'+id+'" class="' + color[n] + '">';  
  tr+= '<td>'+ id +'</td>';
  tr+= '<td>'+ product+'</td>';
  tr+= '<td>'+ price +'</td>'; 
  tr+= '<td>'+ stock +'</td>'; 
  tr+= '</tr>';
  return tr;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T07:13:59.037

**更新答案**：

现在您已经引用了您的标记和代码，很明显您确实有这个`table`类，所以下面的原始答案不是它。

但请注意，您将您的附加`tr`到您的`thead`元素：

```
$("#table_result_search").append(tr); 
```

您的标记在哪里：

```
<thead id ="table_result_search"> 
```

您没有看到`success`课程的任何效果，因为规则是：

```
.table tbody tr.success > td {
  background-color: #dff0d8;
} 
```

注意`tbody`里面的。所以选择器不匹配，因为您将该行附加到 a `thead`，而不是 a `tbody`。

* * *

**原始答案**：

正如我们中的一些人在评论中指出的那样，浏览器将 CSS 应用于与相关选择器匹配的所有元素，无论是否动态添加。

如果问题是`success`该类似乎不起作用，则可能是您的元素中缺少`table`该类`table`（是的，真的）。

bootstrap 的 CSS 中的规则是：

```
.table tbody tr.success > td {
  background-color: #dff0d8;
} 
```

请注意，它以类选择器 ( `.table`) 开头，而不是标签选择器 ( `table`)。

因此，例如，此标记**不会**将这些样式应用于`td`此表中的 ：

```
<table>
  <tbody>
    <tr id="product1" class = "success">
      <td>1</td>
      <td>product one</td>
    </tr>
  </tbody>
</table> 
```

[实例](http://jsbin.com/ihabak/1)| [资源](http://jsbin.com/ihabak/1/edit)

但是这个标记（唯一的变化是`table`标签）将：

```
<table class="table">
  <tbody>
    <tr id="product1" class = "success">
      <td>1</td>
      <td>product one</td>
    </tr>
  </tbody>
</table> 
```

[实例](http://jsbin.com/ihabak/2)| [资源](http://jsbin.com/ihabak/2/edit)

# c# - 使用c#更改文件夹中的文件扩展名

> ID：15333005
> 
> 赞同：-3
> 
> 时间：2013-03-11T07:08:36.377
> 
> 标签：c#

我在一个文件夹中有文件，我想更改它们的扩展名，就像`123.pdf.kayityok ;`它们已经更改一样，所以我想做的是`.pdf`再次制作它们，`.kayityok`所以在我选择文件夹并运行程序后，它会使文件像`123.pdf`. 好久没用c#了，请详细解释一下。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:14:16.877

尝试这个

有：`Path.ChangeExtension`方法。

```
var result = Path.ChangeExtension(myffile, ".jpg"); 
```

如果您还想物理更改扩展名，可以使用 File.Move 方法：

`File.Move(myffile, Path.ChangeExtension(myffile, ".jpg"))`;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:11:05.570

使用[File.Move](http://msdn.microsoft.com/en-us/library/system.io.file.move.aspx)重命名文件。如果您提供文件所在的同一目录，则只会重命名该文件。

例如：

```
File.Move(@"C:\dir\123.pdf.kayityok", @"C:\dir\123.pdf"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T07:13:08.167

检查 .NET 框架的 Path 类 ( [http://msdn.microsoft.com/en-us/library/3bdzys9w.aspx](http://msdn.microsoft.com/en-us/library/3bdzys9w.aspx) )。ChangeExtension() 方法可以帮助您（[http://msdn.microsoft.com/en-us/library/system.io.path.changeextension.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.changeextension.aspx)）

问候，

# cakephp - 在 cakephp ctp 中显示默认时间

> ID：15333012
> 
> 赞同：0
> 
> 时间：2013-03-11T07:09:01.517
> 
> 标签：cakephp, time, cakephp-2.0

我希望在 ctp 时间下拉列表中显示默认时间为上午 9:00。以下是我的 ctp 代码：

```
<?php
                                      echo $this->Form->input('Rideoffer.DepartureTime', array(
                                                        'type' => 'time',

                                                         'interval' => 5
                                                         ));
                             ?> 
```

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:48:58.033

使用“选定”选项

```
<?php
echo $this->Form->input('Rideoffer.DepartureTime', array(
    'type' => 'time',
    'interval' => 5,
    'selected' => '09:00:00',
));
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:19:39.027

设置默认数据的最佳方法是使用控制器（并且仅在未发布时）：

```
if (!$this->request->is('post')) {
    $this->request->data['Rideoffer']['DepartureTime'] = '09:00:00';
} 
```

见[http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#common-options](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#common-options)

这适用于所有表单元素。

表单的“selected”、“value”、“checked”和其他硬编码属性通常会在发布不成功后直接破坏表单（如果表单包含验证错误）：它会丢失所有输入的数据并将它们重置为原来的值在此之前对于前端用户来说通常很烦人。

见[http://www.dereuromark.de/2010/06/23/working-with-forms/](http://www.dereuromark.de/2010/06/23/working-with-forms/)

# python - 如何在 Python 中使用这个 bash 测试结构？

> ID：15333013
> 
> 赞同：0
> 
> 时间：2013-03-11T07:09:07.347
> 
> 标签：python, bash, subprocess

我有一个 bash 片段我想移植到 Python。它查找 SVN 所在的位置以及它是否可执行。

```
SVN=`which svn 2>&1` 
if [[ ! -x $SVN ]]; then
    echo "A subversion binary could not be found ($SVN)"        
fi 
```

这是我目前在 Python 中使用 subprocess 模块的尝试：

```
SVN = Popen('which svn 2>&1', shell=True, stdout=PIPE).communicate()[0]
Popen("if [[ ! -x SVN ]]; then echo 'svn could not be found or executed'; fi", shell=True) 
```

这不起作用，因为虽然我确实将 SVN 的位置保存在 Python 的本地命名空间中，但我无法从 Popen 访问它。

我还尝试组合成一个 Popen 对象：

```
Popen("if [[ ! -x 'which svn 2>&1']]; then echo 'svn could not be found'; fi", shell=True) 
```

但是我收到了这个错误（不用说，看起来很笨拙）

```
/bin/sh: -c: line 0: syntax error near `;'
/bin/sh: -c: line 0: `if [[ ! -x 'which svn 2>&1']]; then echo 'svn could not be found'; fi' 
```

是否有 Python 版本的测试构造“-x”？我认为那将是理想的。其他解决方法也将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T07:27:09.583

这是最简单的解决方案：

```
path_to_svn = shutil.which('svn')
is_executable = os.access(path_to_svn, os.X_OK) 
```

[`shutil.which`](http://docs.python.org/dev/library/shutil.html#shutil.which)在 Python 3.3 中是新的；[这个答案](https://stackoverflow.com/a/377028/399317)中有一个polyfill 。如果您真的想要，您也可以从中获取路径`Popen`，但这不是必需的。

这是[`os.access`](http://docs.python.org/2/library/os.html#os.access).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:22:33.773

```
SVN = Popen('which svn 2>&1', shell=True, stdout=PIPE).communicate()[0]
str="if [[ ! -x " + SVN + " ]]; then echo 'svn could not be found or executed'; fi"
Popen(str, shell=True) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T07:35:25.397

不需要使用 which，您已经可以尝试不带参数运行 svn，如果它有效，则意味着它就在那里。

```
try:
    SVN = subprocess.Popen('svn')
    SVN.wait()
    print "svn exists"
except OSError:
    print "svn does not exist" 
```

# lucene - Grails Searchable Plugin(Lucene) - 一对多查询

> ID：15333020
> 
> 赞同：0
> 
> 时间：2013-03-11T07:09:29.550
> 
> 标签：lucene, grails-2.0, compass-lucene, grails-searchable

我正在使用圣杯的`searchable plugin(0.6.4)`. 我需要根据隐私设置搜索会员。以下是数据库设计。会员有`MemberProfile, and MemberProfile has PrivacySettings`

```
class Member extends {
        String firstName
        String lastName
    static searchable = {
        analyzer "simple"
        only = ['firstName', 'lastName']
        firstName boost: 5.0
        profile component: true
        profile reference: true
    }
    static hasOne = [profile: MemberProfile]
}
class MemberProfile {
    static searchable = {
        analyzer "simple"
        only = ['currentCity', 'currentCountry']
        privacySettings component: true
    }

        static hasMany = [privacySettings:PrivacySettings]
    String currentCity
    String currentCountry
    List<PrivacySettings> privacySettings
}
//For instance Privacy Settings contains 
//fieldSectionName: firstName , connectionLevel: true , memberLevel: false
// This means firstName will be shown to only members' friends(connection)
class PrivacySettings {

    static searchable = {
        analyzer "simple"
        only = ['fieldSectionName', 'connectionLevel', 'memberLevel']
    }
    String fieldSectionName
    boolean connectionLevel
    boolean memberLevel
} 
```

一个成员个人资料的每个字段都有许多隐私设置。

只搜索那些在隐私设置表中的 fieldsSectionName 和 connectionLevel 中具有 display_name 的成员的查询将是什么。

我正在尝试这样的事情

```
def query="mydisplayname"
def searchResults = Member.search(query + "*" + "  +(fieldSectionName:${'display_name'} AND connectionLevel:${true})", params) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:12:25.780

我不知道圣杯，但在 Lucene 中，布尔查询中的最大子句数默认为 1024。

您可以增加此限制。

但是，会有性能损失。或者您可以索引文档上的值并搜索它们（lucene 将对具有相同名称的不同字段执行 OR 操作）。

您可以使用 BooleanQuery 类的静态属性更改限制：

```
 BooleanQuery.MaxClauseCount = 99999; 
```

暗里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T14:15:58.100

我在我的 grails 应用程序中遇到了同样的问题，要解决它，请将 org.apache.lucene.search.BooleanQuery.maxClauseCount = 99999 添加到您的 config.groovy 并重新启动您的应用程序

# android - api级别8制作vcard时不要插入图片源代码

> ID：15333022
> 
> 赞同：1
> 
> 时间：2013-03-11T07:09:39.580
> 
> 标签：android, vcf-vcard

我正在使用此代码制作 Vcard，现在我想在我的 vcard 中不要插入图像代码，所有其他内容都将添加到 vcard 中，我是如何做到的......我正在使用这个

```
 String VCard = "";

         Cursor phones = getContentResolver().query(android.provider.ContactsContract.Contacts.CONTENT_URI , null,null, null, null);
         phones.moveToFirst();
         pDialog.setMax(phones.getCount());
           for(int i =0;i<phones.getCount();i++)
           {

              String lookupKey =  phones.getString(phones.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));
              Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_VCARD_URI, lookupKey);

              AssetFileDescriptor fd;
             try 
             {
                 fd = getContentResolver().openAssetFileDescriptor(uri, "r");
                 FileInputStream fis = fd.createInputStream();
                 byte[] buf = new byte[(int) fd.getDeclaredLength()];
                 fis.read(buf);
                 VCard += new String(buf);
                 String y =String.valueOf(i);
                 publishProgress(y);
                 phones.moveToNext();                           
                 Log.d("Vcard",  VCard);
             } 
             catch (Exception e1) 
             {
                  // TODO Auto-generated catch block
                  e1.printStackTrace();
             }

         }

        try {
            FileOutputStream mFileOutputStream = new FileOutputStream(file, false);
              mFileOutputStream.write(VCard.toString().getBytes());
              mFileOutputStream.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:20:51.397

```
 String lookupKey = phones.getString(phones
    .getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));
Uri vcardUri = ContactsContract.Contacts.CONTENT_VCARD_URI
    .buildUpon()
    .appendQueryParameter("nophoto", String.valueOf(true))
    .build();
Uri uri = Uri.withAppendedPath(vcardUri, lookupKey); 
```

我再次修改它，在for循环中使用

# c++ - printf 的整数参数的零填充宽度和精度是否相同？

> ID：15333023
> 
> 赞同：3
> 
> 时间：2013-03-11T07:09:46.647
> 
> 标签：c++, visual-c++, printf, number-formatting

我最近偶然发现了这样的代码：

```
uint32_t val;
...
printf("%.08X", val); 
```

这让我很困惑。我的意思是，要么指定`0`+width 要么指定精度，两者的意义何在？

[宽度](http://msdn.microsoft.com/en-us/library/vstudio/25366k66.aspx)：

> width 参数 ... 控制输出的最小字符数。如果输出值中的字符数小于指定宽度，则添加空格 ... 。如果宽度以 0 为前缀，则添加前导零 ... 。
> 
> 宽度规范永远不会导致值被截断。...

[精度](http://msdn.microsoft.com/en-us/library/vstudio/0ecbz014.aspx)：

> ...它由一个句点 (.) 后跟一个非负十进制整数组成，根据转换类型，它指定...要输出的有效位数。
> 
> 类型确定精度的解释或省略精度时的默认精度......
> 
> `d, i, u, o, x, X`- 精度指定要打印的最小位数。如果参数中的位数小于精度，则在左侧用零填充输出值。当位数超过精度时，该值不会被截断。

所以我要么使用`"%08X"` *，要么* `"%.8X"`但`"%.08X"`对我没有任何意义。

然而，它似乎没有任何区别，也就是说，所有三个变体似乎都产生相同的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T07:17:21.980

你是对的：

`"%08X"`,`"%.8X"`和`"%.08X"`

**是等价的。**

至于*为什么*- 参考这个：

[http://www.cplusplus.com/reference/cstdio/printf/](http://www.cplusplus.com/reference/cstdio/printf/)

因此：

在情况 1 中，这个使用指定宽度：

> 要打印的最小字符数。如果要打印的值比这个数字短，结果用空格填充。即使结果较大，该值也不会被截断。

因此：

`%08X`将打印*至少 8 个字符*

并从此参考：

> 对于整数说明符（d、i、o、u、x、X）：精度指定要写入的最小位数。如果要写入的值小于此数字，则结果用前导零填充。即使结果更长，该值也不会被截断。精度为 0 表示不为值 0 写入任何字符。对于 a、A、e、E、f 和 F 说明符：这是要在小数点后打印的位数（默认为 6） . 对于 g 和 G 说明符：这是要打印的最大有效位数。对于 s：这是要打印的最大字符数。默认情况下，所有字符都会打印，直到遇到结束的空字符。如果指定的周期没有明确的精度值，则假定为 0。

`%.8X`使用精度说明符。因此，它也将打印至少 8 个字符。

最后：

`%.08X`还将打印至少 8 个字符（同样，由于精度说明符）。为什么？因为`08`被解释为`8`- 导致与前一个相同的输出。这对于单位数精度规范输出似乎没有意义，但在这样的情况下：

`%0.15X`

这很*重要*。

**存在这些不同的格式是为了更好地控制输出**（在我看来，这是一种非常类似于 Fortran 的继承）。

但是，正如您所发现的，这种对精度进行更精细控制的过度补偿允许您获得相同的输出 - 但具有不同的标志。

更新：

正如 hvd 指出的那样，我忘了提及：说明`X`符需要一个无符号值，所以在这种情况下，你的输出对于`%08X`and是相同的`%.8X`（因为没有符号）。但是，对于类似：`%08d`和`%.8d`-**它不是：一个填充到 8 个数字，另一个填充到 8 个字符，因此它们对于负值的行为不同。**

# postgresql - 在while循环中执行命令

> ID：15333028
> 
> 赞同：-4
> 
> 时间：2013-03-11T07:10:21.937
> 
> 标签：postgresql

我有一个运行以下循环的 postgres 函数

`while x<=colnum LOOP` `EXECUTE
'Update attendrpt set slot'||x||' = pres from (SELECT branch, semester, attend_date , div, array_to_string(ARRAY_AGG(first_name||':'||alias_name||':'||lect_type||':'|| to_char(present,'99')),';') As pres from attend1 where lecture_slot_no ='||x||' group by branch, semester, attend_date , div ) j where attendrpt.branch=j.branch and attendrpt.semester=j.semester and attendrpt.attenddate=j.attend_date and attendrpt.div=j.div;';`

```
 `x:=x+1;
  END LOOP;` 
```

这里的问题是它与查询中的单引号和执行命令冲突。无论如何要解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:23:31.983

根据手册，用美元引用（like`$BODY$`或 just `$$`）引用您的函数定义。

使用`execute ... using`而不是字符串替换。对于替换标识符，请使用函数中的`%I`格式说明符`format`。

如果您绝对必须使用`||`字符串连接，比如您使用的是某个古老版本的 PostgreSQL，您需要使用`quote_literal`and`quote_ident`函数来避免引用问题和潜在的安全问题。

除此之外，看起来整个方法完全没有必要。您正在做的事情看起来可以用简单的 SQL 完成。

# javascript - 为什么 log4javascript.trace 方法不起作用？

> ID：15333029
> 
> 赞同：1
> 
> 时间：2013-03-11T07:10:23.497
> 
> 标签：javascript, logging, log4javascript

从文档中我可以看到有这样的功能，但它不起作用。为什么？ [http://log4javascript.org/docs/quickstart.html](http://log4javascript.org/docs/quickstart.html)

我看到了一个关于它的错误，但它被标记为已修复，所以我得到了最新版本，但错误仍然存​​在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:44:35.760

该`trace()`方法确实有效，但默认情况下被禁用。

每个记录器都有一个级别，默认为`DEBUG`. 您可以使用它的`setLevel()`方法更改它：

```
var log = log4javascript.getDefaultLogger();
log.setLevel(log4javascript.Level.TRACE); 
```

这足以启用默认记录器的跟踪，如快速入门指南中所使用的。

每个附加程序还有一个阈值日志记录级别，可以通过附加程序的`setThreshold()`级别设置。这个级别的默认值取决于 appender，但对于大多数 appender 来说，级别是`ALL`，这意味着发送到 appender 的所有日志消息都会被记录。

# graphics - openmesh EdgeHandle 类

> ID：15333030
> 
> 赞同：1
> 
> 时间：2013-03-11T07:10:24.043
> 
> 标签：graphics, mesh, modeling, edges, openmesh

因此，我将 OpenMesh 库用于项目，并将 EdgeHandle e 传递给方法。是否有可能看到这条边连接了哪两个面？我尝试在网上查找，但 openMesh 的文档非常稀少，而 EdgeHandle 的内容甚至更稀少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-04T23:18:54.867

是的，OpenMesh 的“文档”非常令人恼火。但是，通过搜索`face_handle`tintin提到的，我发现这个页面隐藏在其中，它提供了大量有用的功能： http: [//openmesh.org/Documentation/OpenMesh-2.4-Documentation/classOpenMesh_1_1Concepts_1_1KernelT.html](http://openmesh.org/Documentation/OpenMesh-2.4-Documentation/classOpenMesh_1_1Concepts_1_1KernelT.html)

使用那里找到的东西，以下对我有用：

```
FaceHandle a = mesh.face_handle(mesh.halfedge_handle(e,0));
FaceHandle b = mesh.face_handle(mesh.halfedge_handle(e,1)); 
```

（从技术上讲，我将右侧包含在一个函数调用中，所以我没有完全按照编写的方式尝试过。至少右侧应该返回某种形式的 FaceHandle。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T07:38:29.477

处理这件事并不难，

```
HalfedgeHandle halfedge_handle(VertexHandle _vh) const {
    return vertex(_vh).halfedge_handle_;
} 
```

使用此函数，您将能够使用 edge_handle 生成半边句柄。你可以

```
mymesh.face_handle(_hh);
mesh.face_handle(mesh.opposite_halfedge_handle(_hh)); 
```

得到你需要的两个 face_handle。

# java - 侵入的确切含义是什么？是什么让 Spring 非侵入性的？

> ID：15333033
> 
> 赞同：21
> 
> 时间：2013-03-11T07:10:50.340
> 
> 标签：java, spring, apache, pojo

我是弹簧框架的新手。在我看到的大部分 Spring 教程中，Spring 都被描述为“非侵入式”。

侵入性是什么意思？在 Java 中使用 Spring 的优点是什么，是什么使它成为非侵入性的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-11T07:14:09.277

如果 IoC 容器具有侵入性，则意味着您的代码需要明确了解依赖注入。例如，在 Guice 中，您使用`@Inject`注释（和其他）。这些注释比以前更加标准化，这很好——这意味着通过一组注释，您可以（至少在理论上）使您的代码可用于各种不同的侵入式 IoC 容器。

使用非侵入式容器，您可以编写代码而根本不参考 IoC……一切都*取决于*对成员和注释的反射，即使您不使用 IoC 也会出现。

侵入式容器和非侵入式容器各有利弊——例如，更具体的代码可以让您更好地控制绑定的一些细节——但值得了解它们的区别。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T07:16:30.917

检查[http://forum.springsource.org/showthread.php?27846-Spring-is-non-invasive](http://forum.springsource.org/showthread.php?27846-Spring-is-non-invasive)

> **它的真正含义是什么？**

“您不必强制导入或扩展任何 Spring API，例如 Struts 会强制您扩展 Action”。

当然，在某些领域，比如web框架，是不可能避免依赖框架的应用代码的。但是 Spring 一直试图在配置管理方面达到非侵入性的理想状态

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-11T07:59:15.310

春天可以是侵入性的，也可以是非侵入性的，这完全取决于你。

Non-invansive spring 不使用注释（例如@Autowired）也不使用它自己的类（例如JdbcTemplate），它只使用配置将你的bean（简单的POJO）连接在一起（你仍然必须在你的代码中以某种方式初始化spring，无论如何，这有点侵入性）。但是你可以在没有任何重大代码更改的情况下自由地放弃 spring。另一方面，Invasive spring 为您提供模板类（用于持久性、Web 服务等）、注释和其他东西，如果不进行重构（如果您使用它们），您就不能简单地留下。

编辑：有人说弹簧不是侵入性的，因为它不会强迫您实现接口或扩展类。对我来说，一个框架不是侵入性的，如果它可以很容易地被替换的话。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-15T16:02:22.193

大多数 Java 框架都强制您扩展它们的类之一或实现它们的接口之一。这种侵入式编程模型的示例是 EJB 2 时代的无状态会话 bean、早期版本的 Struts、WebWork、Tapestry。

Spring 避免使用其 API 乱扔代码。Spring 从不强迫您实现特定于 Spring 的接口或扩展特定于 Spring 的类。相反，这些类通常没有任何迹象表明它们正在被 Spring 使用。

```
public class HelloWorld {
    public String hello() {
      return "Hello World";
    }
} 
```

这是一个简单的 Java 类 (POJO)。没有任何迹象表明它是 Spring 组件。Spring 是非侵入性的，这意味着此类在 Spring 应用程序中的功能与在非 Spring 应用程序中的功能相同。虽然 POJO 很简单，但它们可以很强大。

POJO 在 Spring 中变得强大的方法之一是使用依赖注入。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-03T21:06:18.360

侵入性框架意味着您被迫扩展它们的类之一或实现它们的接口之一。您可以在 Struts 或 EJB2 等框架中看到这一点。Spring 是非侵入性的，因为它避免了这种情况。在最坏的情况下，一个类可能会使用 Spring 的注释之一进行注释，但否则它就是一个 POJO。所以只有你需要这样的 POJO：

```
package com.habuma.spring;
 public class HelloWorldBean {
  public String sayHello() {
return "Hello World";
 }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-25T18:25:51.037

据说 Spring 框架是非侵入性的，这意味着它不会强制程序员从 Spring API 提供的任何预定义类或接口扩展或实现他们的类，在 struts 中我们曾经扩展 Action Class 权利，这就是为什么 struts 被称为具有侵略性。

在struts框架的情况下，它会强制程序员，程序员类必须从struts API提供的基类扩展。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-08T05:13:12.950

使用@Resource 和@Inject 而不是@Component 和@Autowired。它非常有用，并且在 Spring 和 Guice 等 DI 框架中实现了标准化。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-02T01:51:49.283

侵入性意义 - 非常迅速地传播到周围。Spring作者说EJB、Struts等框架充满了框架特定的代码，很难迁移到其他框架，这违背了Java的一次编写和随处运行的哲学。Spring 说它是非侵入性的，因为它使用 POJO 编写服务器端，因此可以迁移到任何平台。但正如至少 2 位贡献者在这篇文章中所建议的那样，春天是癌症，与它声称的相反

> spring 对一个项目来说是一种癌症，一旦它感染了你的项目，如果不攻击 spring 配置文件，你就无法做任何事情......非侵入性在这方面非常具有误导性！– user177800 2013 年 3 月 11 日 7:18

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-20T06:53:59.847

声称 Spring 是非侵入性的，就像声称地球是平的一样。你完全否认现实，只基于你的个人偏见。

Spring 不仅侵入您的代码库，还侵入您的大脑。当您对在网上搜索信息和解决编程问题的解决方案建立了良好的信心时，这会让您非常恼火。我用大约 10 种语言和 shell 完成了认真的编程工作，并且几乎总是设法找到有用的信息、答案和提示来解决我的问题。通常我会设法很快找到一个不错的解决方案，有时需要一些挖掘。春天不是这样。一种曾经流行的脚本语言吹捧的口号是“不仅有办法做到这一点”。对于 Spring，您通常会发现许多不这样做的方法，或者许多在您的特定设置中不起作用的方法。

I do not doubt that Spring has real value. I do see that. But it comes with way too much magic, that works well as long as it works, but once it fails, the tooling and documentation often fail as well.

# php - 段塞场的长度有限

> ID：15333035
> 
> 赞同：0
> 
> 时间：2013-03-11T07:11:06.193
> 
> 标签：php, cakephp, cakephp-1.3, cakephp-2.0, cakephp-2.1

如何限制数据库中的 slug 字段。在下面的代码中，问题是表的字段，它包含长文本。所以我想为长度有限的问题字段创建 slug。我该怎么做？//在模型中

```
var $actsAs = array(
            'Sluggable.Sluggable' => array(
            'label' => 'question',
            'slug' => 'slug',
            'separator' => '-',
            'overwrite' => false
          )
        ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:14:33.103

查看[行为的来源](https://github.com/CakeDC/utils/blob/master/Model/Behavior/SluggableBehavior.php)。

只需将`'length'=>50`参数添加到您的 sluggable 数组中。

CakeDC 的大多数插件都很出色，但缺少文档（这应该鼓励您自己动手了解插件的工作原理）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T07:18:23.300

创建一个函数

```
 function create_slug($string) {
      $string = substr($string, 0, 100);
      $string = preg_replace("/[^a-zA-Z0-9\/_|+ -]/", '', $string);
      $string = strtolower(trim($string, '-'));
      $string = preg_replace("/[\/_|+ -]+/", '-', $string);
      return $string;
    } 
```

并像这样使用它

```
$actsAs = array(
    'Sluggable.Sluggable' => array(
        'label' => 'very & long & question',
        'slug' => create_slug('very & long & question'),
        'separator' => '-',
        'overwrite' => false
    )
);

print_r($actsAs); 
```

// 输出

```
Array
(
    [Sluggable.Sluggable] => Array
        (
            [label] => very & long & question
            [slug] => very-long-question
            [separator] => -
            [overwrite] => 
        )

) 
```

# select - NEWBIE : 从 IEnumerable Select 中选择 2 个或更多信息

> ID：15333038
> 
> 赞同：0
> 
> 时间：2013-03-11T07:11:11.887
> 
> 标签：select, ienumerable

新手，我的代码有问题。在此代码返回一个字符串数组（学生姓名）之前，但我需要添加学生 ID，而不需要我重新编码整个方法。有人可以帮我怎么做吗？基本上我需要包括基于学生姓名的学生证。

TIA。

```
public Student[] GetAllStudents(string subject)
    { 
        Student[] students = cache.GetAllStudents(subject);

        if (students == null)
        {
            Subjects group = RetrieveSubjects(subject);

            if (group != null)
            {
                students = group.Students.Select(r => r.StudentName).ToArray();
                // I need to include also the Student ID based on the Student Name queried above.

            }
            else
            {
                students = new string[0];
            }

            cache.AddAllStudents(subject, students);
        }

        return students;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:13:40.540

您可以在选择子句中使用匿名类，即

```
students = group.Students
                  .Select(r => new { name= r.StudentName, id= r.StudentID } )
                  .ToArray(); 
```

或者只是选择学生对象，因为它应该有你需要的一切

```
students = group.Students.ToArray();

// doing .Select(r=>r) is redundant and can be omited 
```

似乎您需要从您的 studentinfo 类创建 Student 类，您可能希望更改初始化程序中的道具。

```
students = group.Students
                  .Select(r => new Student { 
                         StudentName= r.StudentName, 
                         StudentID= r.StudentID 
                   })
                  .ToArray(); 
```

# php - 将 Canvas 图像作为电子邮件附件发送

> ID：15333039
> 
> 赞同：1
> 
> 时间：2013-03-11T07:11:12.180
> 
> 标签：php, javascript, html, email

我想通过单击按钮将画布作为电子邮件的附件发送。

我使用将画布转换为图像 `var image=canvas.toDataURL();`

我想直接将其附加在 Outlook 等电子邮件客户端中，而不提示用户保存位置。

很高兴有人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:37:19.407

理想情况下，当您尝试发送某些东西时，您需要使用`mailto:`标签。这允许您向邮件添加主题和正文。但是，这将不允许您发送附件。因此，我建议在邮件内容中提供一个指向文档路径的 url 来解决问题。

示例邮件

```
mailto:xyz@gmail.com?subject=TestMail&amp;body=This is a test mail 
```

# python - django 会话检查是否存在

> ID：15333041
> 
> 赞同：2
> 
> 时间：2013-03-11T07:11:19.097
> 
> 标签：python, django, session

我正在尝试检查会话中是否有任何内容。我所做的是：

```
if request.session: 
   # do something 
```

但它不工作。有没有办法知道会话在那一刻是否包含某些内容？

如果我这样做`request.session['some_name']`，它会起作用，但在某些情况下，我只需要知道会话是否为空。

询问一些具体的名字并不总是需要的。例如。如果没有会话，则返回错误，因为`some_name`不存在。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T07:36:34.243

`request.session`是`SessionBase`对象的实例，其行为类似于字典，但它不是字典。这个对象有一个叫做“私有”字段（实际上是一个属性）`_session`，它是一个保存所有数据的字典。

原因是 Django 在您调用`request.session[key]`. 它是惰性实例化的。

所以你可以尝试这样做：

```
if request.session._session:
    # do something 
```

或者你可以通过查看这样的键来做到这一点：

```
if request.session.keys():
    # do something 
```

请注意如何`.keys()`工作：

**django/contrib/sessions/backends/base.py**

```
class SessionBase(object):
    # some code

    def keys(self):
        return self._session.keys()

    # some code 
```

我总是建议直接阅读源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-20T07:57:18.043

现在会话对象上有一个方便的方法

`request.session.is_empty()`

# ios - 带有部分标题的 UICollectionViewWaterfallLayout？

> ID：15333042
> 
> 赞同：1
> 
> 时间：2013-03-11T07:11:27.403
> 
> 标签：ios, objective-c, uicollectionview, uicollectionviewlayout

我希望您已经知道一个名为“UICollectionViewWaterfallLayout”的控件。有没有办法在其中实现“节标题”？

谢谢，

雷诺琼斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:14:23.210

[文档说：](https://github.com/chiahsien/UICollectionViewWaterfallLayout#limitation)

> 没有补充视图和装饰视图。

分叉它并尝试重写代码。

# javascript - 如何在 Javascript 方法中使用 clientId 获取 selectOneMenu 的值？

> ID：15333050
> 
> 赞同：0
> 
> 时间：2013-03-11T07:11:43.900
> 
> 标签：javascript, jquery, jsf, primefaces

我有一个包含 selectOneMenu 的数据表。我想通过使用 clientId 在我的 Javascript 方法中获取 selectOneMenu 的选定值。我已经尝试使用以下代码..

```
 <p:dataTable var="name" value="#{model.nameList}" rowIndexVar="rowIndex">
<p:selectOneMenu id="selector_#{rowIndex}" onchange="select(#{rowIndex});">
            <f:selectItem itemLabel="Select" itemValue=""></f:selectItem>
            <f:selectItem itemLabel="Month" itemValue="Month"></f:selectItem>
            <f:selectItem itemLabel="Week" itemValue="Week"></f:selectItem>
        </p:selectOneMenu>
</p:dataTable>

<script type="text/javascript">
    function select(rowIndex){
        selector = "selector_" + rowIndex;
        var element = $("select[name$=" + selector +" option:selected").val();

        alert(element);
    }
</script> 
```

* * *

我需要 javascript 方法中的两个值，rowIndex 和 selectOneMenu 的选定值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T08:44:51.793

干得好：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui" template="/WEB-INF/templates/globalTemplate.xhtml">

    <ui:define name="title">15320268</ui:define>
    <ui:define name="content">
        <p:growl id="growl" showDetail="true" />

        <h:form>
            <p:dataTable var="name" value="#{so15320268.nameList}" rowIndexVar="rowIndex" widgetVar="table">                
                <p:column>
                    <p:selectOneMenu widgetVar="menu_#{rowIndex}" onchange="select(menu_#{rowIndex});">
                        <f:selectItem itemLabel="Select" itemValue=""></f:selectItem>
                        <f:selectItem itemLabel="Month" itemValue="Month"></f:selectItem>
                        <f:selectItem itemLabel="Week" itemValue="Week"></f:selectItem>
                    </p:selectOneMenu>
                </p:column>
            </p:dataTable>
        </h:form>
        <script type="text/javascript">
            function select(widgetVar){
                var selectMenuDiv = widgetVar.getJQ(); // it will give you the underlying jquery object
                //alert(selectMenuDiv.get(0)); // uncoment this line it will show: [object HTMLDivElement]; 
                // so it is not select element
                var selectMenu = $(selectMenuDiv).find('select');
                var selectValue = $('> option:selected', selectMenu).val();
                alert(selectValue);             
            }
        </script>
    </ui:define>
</ui:composition> 
```

查看下图，这是`<p:selectOneMenu/>`渲染的方式： ![在此处输入图像描述](../Images/b366fd4d5a6e3e3cd745596d802e76ab.png)

仔细查看突出显示的 div 的 id。它以`selector_`. xhtml 是：`<p:selectOneMenu id="selector_#{rowIndex}"`. 您试图用 el 和在 JSF 中创建 id，这是不允许的，这就是为什么`#{rowIndex}`没有为 id 渲染的原因。[文档](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/)说如果 id 确实支持 el ，则必须对其进行评估，那么`java.lang.String`这将是

> javax.el.ValueExpression（必须评估为 java.lang.String）

大概原因就在有的方法`public void setValueExpression(String name, ValueExpression binding)`上。`javax.faces.component.UIComponent``if (!(binding.isLiteralText()))`

我希望它可以帮助您了解 el 不能用于 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:15:24.333

将课程添加到您的选择中

```
<p:dataTable var="name" value="#{model.nameList}" rowIndexVar="rowIndex">
<p:selectOneMenu styleClass="myClass" id="selector_#{rowIndex}" data-rowindex="#{rowIndex}">
            <f:selectItem itemLabel="Select" itemValue=""></f:selectItem>
            <f:selectItem itemLabel="Month" itemValue="Month"></f:selectItem>
            <f:selectItem itemLabel="Week" itemValue="Week"></f:selectItem>
        </p:selectOneMenu>
</p:dataTable> 
```

和js部分

```
<script type="text/javascript">

 $(function(){
  $(".myClass").change(function(e){
   console.log($(this).val());
   console.log($(this).attr("data-rowindex"));
   //or
   //console.log($(this).data('rowindex'));
  });
 });

</script> 
```

[**演示**](http://jsfiddle.net/cCbxX/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:25:20.893

我通过使用 styleClass 解决了它。现在我可以在 javascript 方法中获取选定的值和 rowIndex。

```
<p:dataTable var="name" value="#{model.nameList}" rowIndexVar="rowIndex">
<p:column>
<p:selectOneMenu id="selector_#{rowIndex}" styleClass="menu_#{rowIndex}" onchange="select('#{rowIndex}');">
            <f:selectItem itemLabel="Select" itemValue=""></f:selectItem>
            <f:selectItem itemLabel="Month" itemValue="Month"></f:selectItem>
            <f:selectItem itemLabel="Week" itemValue="Week"></f:selectItem>
        </p:selectOneMenu>
</p:column>
</p:dataTable>

<script type="text/javascript">
    function select(rowIndex){
        var menuClassName = "menu_" + rowIndex;
        var element = $("select[class$='" + menuClassName + "'] option:selected").val(); 

    }
</script> 
```

但是根据我的问题，我仍然无法使用 clientId 获得这种功能

# java - Apache Commons File Upload-上传后获取正确的文件

> ID：15333051
> 
> 赞同：0
> 
> 时间：2013-03-11T07:11:49.703
> 
> 标签：java, jsp, apache-commons-fileupload, apache-commons-io

我使用以下代码成功上传了一个文本文件（比如另一个.java），但在尝试打开上传的文件时它给了我一个错误。提前致谢。

文件上传.jsp

```
<form action="test.jsp" method="post" enctype="multipart/form-data">
<input type="file" name="file"/>
<br/>
<input type="submit" value="Upload">
</form>
</body> 
```

测试.jsp

```
<%@page import="org.apache.commons.fileupload.FileItem"%>
<%@page import="org.apache.commons.fileupload.disk.DiskFileItemFactory"%>
<%@page import="org.apache.commons.fileupload.servlet.ServletFileUpload"%>
<%@page import="java.io.*"%>
<%@page import="java.util.*"%>
<%-- <%@page import="org.apache.commons.io.*" %> --%>
<%@page import="org.apache.commons.io.*"%>

<%@page import="org.apache.commons.fileupload.FileUploadException"%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%
    try {
        String username = "";
        List<FileItem> items = new ServletFileUpload(
                new DiskFileItemFactory()).parseRequest(request);
        for (FileItem item : items) {
            if (item.isFormField()) {
                // Process regular form field (input type="text|radio|checkbox|etc", select, etc).
                String fieldname = item.getFieldName();
                String fieldvalue = item.getString();

                if (fieldname.equals("vsrd")) {
                    username = fieldvalue;
                }

                // ... (do your job here)
            } else {
                // Process form file field (input type="file").
                String fieldname = item.getFieldName();

                String filename = FilenameUtils.getName(item.getName());

                InputStream filecontent = item.getInputStream();

                byte[] b = new byte[filecontent.available()];
                FileOutputStream fos = new FileOutputStream(
                        "/home/visruth/Desktop/Out" + filename);
                fos.write(b);
                fos.close();
                // ... (do your job here)
            }
        }
    } catch (FileUploadException e) {
        throw new ServletException("Cannot parse multipart request.", e);
    }
%> 
```

尝试打开时出错`OutAnother.java`：

![在此处输入图像描述](../Images/fb051ded7c0e9fa29c93f3546e48008c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:33:13.133

在您的代码中，您刚刚创建了一个空字节数组。您尚未从 InputStream 中读取内容。Inputstream#available() 只是获得可用长度。它不会从 InputStream 中读取内容。

典型的方法是从 InputStream 读取并写入 OutputStream：

```
FileInputStream is = new FileInputStream(
        new File("D:\\temp\\in.java"));
FileOutputStream os = new FileOutputStream(
        new File("D:\\temp\\out.java"));
byte[] buff = new byte[1000];
int length = -1;
while ((length = is.read(buff)) != -1) {
    os.write(buff, 0, length);
}
is.close();
os.close(); 
```

你也可以使用commons-io 中的[IOUtils#copy](http://commons.apache.org/proper/commons-io/javadocs/api-2.4/org/apache/commons/io/IOUtils.html#copy%28java.io.InputStream,%20java.io.OutputStream%29)来完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:42:41.160

我通过添加以下代码来修复它：

```
byte[] b = new byte[filecontent.available()];
filecontent.read(b); 
```

# android - 广播接收器双 SIM 卡来电块

> ID：15333058
> 
> 赞同：2
> 
> 时间：2013-03-11T07:12:22.887
> 
> 标签：android, android-layout, android-intent

我正在使用双重，我也是android开发的新手。我写了一个应用程序来切断所有来电。在许多博客和论坛帖子中，我发现双 sim 卡都无法阻止呼叫。但它可能适用于 SIM 1。

我的代码适用于所有其他单卡手机，但不适用于双卡，甚至 SIM 1。请指导我解决此问题。

```
try {
    String number = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);
    setResultData(null); // It will terminate the call
    TelephonyManager telephone = (TelephonyManager) context
        .getSystemService(Context.TELEPHONY_SERVICE);
    Class c = Class.forName(telephone.getClass().getName());
    Method m = c.getDeclaredMethod("getITelephony");
    m.setAccessible(true);

    ITelephony telephonyService = (ITelephony) m.invoke(telephone);
    // telephonyService.silenceRinger();

    telephonyService.endCall();
    Toast.makeText(context, "Call Terminated"+ number, Toast.LENGTH_LONG).show();
}
catch (Exception e) {
    e.printStackTrace();
} 
```

# jquery - Jquery 插件 simplemodal 无法正确显示？

> ID：15333060
> 
> 赞同：0
> 
> 时间：2013-03-11T07:12:38.980
> 
> 标签：jquery, asp.net, simplemodal

我正在使用 EricMarin 的[SimpleModal](http://www.ericmmartin.com/projects/simplemodal/)。我没有正确显示 modalpopup。我是使用 jquery 插件的新手，找不到我出错的地方

这是我正在使用的 jquery 脚本

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.10.1.js"></script>
<script type="text/javascript" src="../js/jquery.simplemodal.1.4.4.min.js"></script> 
```

这是我用过的css

```
<link rel="stylesheet" href="../css/simplemodal.css" /> 
```

这是 simplemodal.css 文件

```
#simplemodal-container a.modalCloseImg {
background:url(/Images/x.png) no-repeat; /* adjust url as required */
width:25px;
height:29px;
display:inline;
z-index:3200;
position:absolute;
top:-15px;
right:-18px;
cursor:pointer;
}
[if lt IE 7]>
#simplemodal-container a.modalCloseImg {
    background:none;
    right:-14px;
    width:22px;
    height:26px;
    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
        src='Images/x.png', sizingMethod='scale'
    );
} 
```

这是我用来显示模式弹出窗口的 jquery 函数

```
 <script type="text/javascript"> 
   $(function() {   

        $("#btnAdd").click(function(){                
            $("#tblSession").modal();
        });
   });
 </script> 
```

这是我用来显示模式弹出窗口的表格

```
<table id="tblSession" style="width:100%">
<tr>
    <td>
        <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
    </td>
    <td>
        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    </td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:04:18.043

就您的代码提供的而言，我认为您应该通过`.hide { display: none }`在其上添加类来隐藏表格，然后您需要做的就是运行模式。

[这里的例子](http://jsfiddle.net/agriboz/gpest/1/)

此外，正如@da_re 所说，您不应该添加 jQuery 两次。无论如何，它是一个旧版本，不再可用。

# objective-c - drawRect 不绘制矩形 - Objective-C

> ID：15333063
> 
> 赞同：-1
> 
> 时间：2013-03-11T07:12:59.933
> 
> 标签：objective-c, cocoa-touch, quartz-2d

我只想在视图上绘制一个矩形。这是我在 UIView 子类中的代码：

```
- (void)drawRect:(CGRect)rect
{
context = UIGraphicsGetCurrentContext();
CGContextSetRGBFillColor(context, 255.0/255.0, 0.0/255.0, 0.0/255.0, 1);
CGContextAddRect(context, (CGRectMake(20, 20, 20, 20)));

} 
```

当我运行它时，没有绘制矩形。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:36:55.893

`CGContextAddRect`只是在上下文中添加一个矩形路径。您还需要使用`CGContextFillPath`or来描边或填充路径`CGContextStrokePath`。

您也可以直接使用`UIRectFill`或填充矩形`CGContextFillRect`。

# jquery - 对象数组到字符串 jQuery

> ID：15333064
> 
> 赞同：0
> 
> 时间：2013-03-11T07:13:00.450
> 
> 标签：jquery, arrays, object

在 jQuery 中执行以下代码是否有更短的符号？我想记录所有段落的 html 内容。

```
var array = $('p').get();
$.each(array, function(i, val)
{
    console.log(val);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:15:04.363

你可以试试

```
console.log(array.join('')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:15:05.923

试试这个

```
 $.each(($('p').get()), function(i, val)
{
    console.log(val);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T07:15:10.327

您可以链接您的代码：

```
$('p').each(function (){
    console.log($(this).html());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T07:16:03.380

根据您期望的格式，您可以尝试：

```
array.toSTring() 
```

这将导致数组元素由“，”分隔

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T07:16:44.067

你可以从字面上做：

```
console.log($('p').get()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T07:17:19.157

你想获取段落的内容吗？

`console.log($('p').text())`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-11T07:18:12.353

试试地图（）

```
 var pArray=$('p').map(function() {
  return this.id;
}).get();
console.log(pArray); 
```

# mysql - 提交响应后无法调用sendredirect()

> ID：15333071
> 
> 赞同：0
> 
> 时间：2013-03-11T07:13:48.003
> 
> 标签：mysql, jsp, tomcat

我的问题再次与我正在为报告跟踪系统执行的同一项目相关，在访问重定向到“userloginmid.jsp”的登录页面后，tomcat 日志中出现以下错误。代码如下所示在同一窗口中。

如果可能，请提供相同的解决方案。

```
<%@ page import="java.sql.*,java.util.*,java.text.*,java.text.SimpleDateFormat" %>
<%

  String userName = request.getParameter("userName");
  String password = request.getParameter("password");

    System.out.println("MySQL Connect Example.");
    Connection conn = null;
    String url = "jdbc:mysql://localhost:3306/";
    String dbName = "report_tracking";
    String driver = "com.mysql.jdbc.Driver";
    String username = "root"; 
    String userPassword = "root";

      java.util.Date now = new java.util.Date();
      String DATE_FORMAT = "yyyy-MM-dd hh:mm:ss";
      SimpleDateFormat sdf = new SimpleDateFormat(DATE_FORMAT);

    String strDateNew = sdf.format(now) ;

    try {
      Class.forName(driver).newInstance();
      conn = DriverManager.getConnection(url+dbName,username,userPassword);
      Statement st = conn.createStatement();
      String strQuery = "select * from userregister where username='"+userName+"' and password='"+password+"'"; 
      out.println(strQuery);
      ResultSet rs = st.executeQuery(strQuery);

       if(rs.next())
        {

            int userid=rs.getInt(1);
            String user=rs.getString(2);

            session.setAttribute("userid",userid);
            session.setAttribute("username",user);
            session.setAttribute("intime",strDateNew);

            String queryString = "INSERT INTO admin set userid="+userid+",intime='"+strDateNew+"'";
            int i = st.executeUpdate(queryString);

            if(i>0)
            {
                response.sendRedirect("welcome.jsp");
            }

        }

        response.sendRedirect("login.jsp");
        conn.close();

    } catch (Exception e) {
      e.printStackTrace();
    }
 %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:43:10.113

你的代码有很多问题。

首先，对您陈述的问题的解释，在提交响应后重定向：

当 HTTP 标头已经发送到客户端时（如果您还不知道，请阅读有关 HTTP 协议的信息），它们已经被发送出去并且不能被拉回。您在 jsp 中对示例进行编码，这是架构的 VIEW 部分 - 至少在“页面导入”和代码部分之间有一个换行符，可能会触发服务器将其缓冲区刷新到客户端。完成后，HTTP 标头就消失了，您不能再重定向了。

解决方法：不要在 jsp 中实现此例程，而是在 servlet 中实现（或使用为您处理此问题的体面的框架。任何当前都足够了）。

现在谈谈您的代码存在的一些问题：

*   请阅读有关[SQL 注入](http://xkcd.com/327/)的信息。想想有人发布类似`someone';` `someone' OR '0' = '0`或类似的用户名（只是在我去的时候编造它们）
*   一旦您获得连接并遇到任何错误，您将不会清理连接（例如，您将在任何异常情况下泄漏连接）
*   您似乎正在存储明文密码。绝对不行，因为除了您之外的其他人将拥有一个帐户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:12:07.583

`loopholes`正如所有人所说，您的代码中有很多内容。

但你的问题的答案是

```
sendRedirect requires a return statement 
```

因此，将您的代码行更改为

`response.sendRedirect( "welcome.jsp"); return;`和

```
response.sendRedirect("login.jsp"); return; 
```

也读[这个](http://helpx.adobe.com/legacy/kb/jrun-4-using-sendredirect-requires.html)。

# ajax - jQuery ajax 授权令牌标头失败

> ID：15333073
> 
> 赞同：2
> 
> 时间：2013-03-11T07:14:02.547
> 
> 标签：ajax, jquery, ssl, http-headers

jQuery 1.9.1

该请求永远不会被发送，并且似乎只是出错了。`console.log`输出显示`Request failed: error`我不知道如何进一步调试。

```
$.ajax({
    beforeSend: function (xhr) { xhr.setRequestHeader ('Authorization', 'Token c576f0136149a2e2d9127b3901015545') },
    type: "GET",
    url: "https://example.com/endpoint",
    dataType: "json"
}).done(function( msg ) {
    console.log( msg );
}).fail(function(jqXHR, textStatus, errorThrown) {
    console.log( "Request failed: " + textStatus );
    console.log( errorThrown );
}); 
```

检查谷歌浏览器显示的网络流量

*   `Method: OPTIONS`
*   `Status: (canceled)`
*   `Type: Pending`

但是使用 curl 工作正常：

`curl https://example.com/endpoint -H 'Authorization: Token token="c576f0136149a2e2d9127b3901015545"'`

这是 jsFiddle：http: [//jsfiddle.net/2vtyD/1/](http://jsfiddle.net/2vtyD/1/)

注意：这不是问题，`Access-Control-Allow-Origin`因为我有这部分工作。

我知道我一定错过了什么……

**更新：**

当我切换到`http`. 只有在使用`https`时才会出现这个问题。我认为这可能是因为我使用的是自签名证书（无效）。但其他 SSL 请求（非授权即不是 'OPTIONS' ）工作得很好。所以它似乎只是 SSL 和 OPTIONS 请求的组合。chrome 中的状态表示已取消，并且通过查看服务器日志 apache 日志显示了一些活动，但它从未使其成为 rails web 应用程序。

这是apache日志的片段：

```
[info] [client 10.0.2.2] (70007)The timeout specified has expired: SSL input filter read failed.
[info] [client 10.0.2.2] Connection closed to child 10 with standard shutdown (server example.com:443)
[info] [client 10.0.2.2] Connection to child 11 established (server example.com:443)
[info] Seeding PRNG with 656 bytes of entropy
[info] [client 10.0.2.2] (70014)End of file found: SSL input filter read failed.
[info] [client 10.0.2.2] Connection closed to child 11 with standard shutdown (server example.com:443) 
```

但是，所有 SSL 请求都会出现这些类型的消息。所以我基本上不知道如何进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:25:28.340

使用有效的 SSL 证书。

出于某种原因，GET、POST、PUT 和 DELETE 请求可以与自签名证书一起正常工作。但是 OPTIONS 请求没有。使用有效的 SSL 证书一切正常。

# search - 每天索引中的文档

> ID：15333075
> 
> 赞同：2
> 
> 时间：2013-03-11T07:14:16.750
> 
> 标签：search, solr, search-engine

Solr 索引中的所有文档都有一个“已添加”字段，其中包含文档添加到 Solr 的 ISO 8601 日期。

```
<result name="response" numFound="34587104" start="0">
    <doc>
        <date name="added">2013-03-04T01:00:26Z</date>
        <str name="text">Hello, world!</str>
        <str name="id">93416604d274d28a44e14a9535bb9e6e1db3d851</str>
        <str name="_version_">1428536769315340290</str>
    </doc>
<result/> 
```

假设没有删除任何文档，我如何计算索引中每天存在多少文档？例如，为了知道 2013-03-05 索引中有多少文档，我可以查询`q=added:[* TO 2013-03-05T00:00:00Z]`. 但是，我需要知道从一个月前到今天每天索引中有多少文档。

一种解决方案可能是查询一个月前的日期索引中有多少文档，然后考虑每天添加多少文档，然后将它们添加到累积计数中。伪代码：

```
initial_count = q=added:[* TO NOW/MONTH-1MONTH]
running_total = initial_count;
daily_added_array = facet.range=added
                    & f.added.facet.range.start=NOW/MONTH-1MONTH
                    & f.added.facet.range.end=NOW/DAY-1DAY
                    & f.added.facet.range.gap=+1DAY

foreach (daily_added_array as day) {
    running_total += day;
    printf(running_total);
} 
```

然而，这种方法似乎非常脆弱并且容易出错。

**有没有办法获取每天索引中文档的累积量？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:34:57.807

根据您的 Solr 版本，您可以结合使用 Grouping aka Field Collapsing 和 group.func 参数。 [http://wiki.apache.org/solr/FieldCollapsing](http://wiki.apache.org/solr/FieldCollapsing)

设置行=0&group.field=add&group.func=rint(div(ms(add),mul(24,mul(60,mul(60,1000)))))

后一个函数转换为毫秒并舍入到一天。返回的组数是您想要的。您可以根据需要按上个月等过滤

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T03:17:41.430

我认为没有比 faceting 更好的方法来提取每日计数，并且使用日期数学比计算特定日期字符串的任何尝试都更可取，所以我认为你已经在这些方面做得对了。

关于我能看到的唯一改进是查询`*:*`并从中获取命中计数，然后您可以使用每日计数通过减法向后生成运行总数，而不是向前加法。这应该比您的方法执行得更好，因为`*:*`solr 根本不需要过滤工作或分数计算。它还为您提供了一个更少的日期数学表达式来编写:)

说到这我怀疑`NOW/MONTH-1MONTH`不是你的意思。那说：“现在四舍五入到当月的开始减去一个月”。这将是 28 到 61 天前的任何时间，具体取决于现在是哪一天（考虑`NOW`是 3 月 1 日还是 12 月 31 日，您分别得到 2 月 1 日或 11 月 1 日）。这不符合您提出的要求：

> 我需要知道从一个月前到今天每天索引中有多少文档

我想你可能想要`NOW/DAY-1MONTH`。此外，您似乎将今天的文档与您的方面的上限排除在外……这是需要的吗？（如果是这样，我的方法仍然有效，但是您必须将构面的上限扩展到`NOW/DAY+1DAY`并在生成运行总计列表时忽略文档总计（仍然向后）。

# c# - 使用 Windows 身份验证如何将所有初始请求重定向到特定页面

> ID：15333077
> 
> 赞同：4
> 
> 时间：2013-03-11T07:14:18.323
> 
> 标签：c#, asp.net, windows-authentication, form-authentication

我有一个在 Windows 身份验证模式下运行的 asp.net Web 应用程序。我的要求是任何页面（urls）用户第一次请求（会话开始）它应该重定向到LandingPage.aspx。有人可以建议如何使用 Windows 身份验证将所有初始请求重定向到特定页面（LandingPage.aspx）吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:23:51.813

我认为您可以使用文件`Session_Start`方法`Global.asax`并重定向到您的登录页面。

```
void Session_Start(object sender, EventArgs e)
{
    Response.Redirect("LandingPage.aspx");
} 
```

# cocoa - NSApplicationMain() 中 strlen 上的奇怪 Cocoa Crash

> ID：15333079
> 
> 赞同：1
> 
> 时间：2013-03-11T07:14:20.730
> 
> 标签：cocoa, strlen

几天前我关闭了我的 xcode 项目，当我回来时，它一直在崩溃！我没有更改任何代码，所以我不知道发生了什么。我`EXC_BAD_ACCESS (code=1, address=0x0)`在方法内部得到一个 on strlen`NSApplicationMain()`并查看错误堆栈，看起来我的应用程序甚至还没有启动！

这是错误堆栈

```
Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libsystem_c.dylib               0x000000010847a650 strlen + 16
1   libsystem_c.dylib               0x00000001084c8067 strdup + 21
2   com.apple.Foundation            0x0000000104d018fb _compatDecodeValueOfObjCType + 763
3   com.apple.Foundation            0x0000000104c04da6 newDecodedValue + 1162
4   com.apple.Foundation            0x0000000104c22a09 _decodeObjectBinary + 2741
5   com.apple.Foundation            0x0000000104c21db4 _decodeObject + 226
6   com.apple.AppKit                0x000000010575991b __copyCarbonDictionariesFromRecords_block_invoke_0 + 372
7   com.apple.AppKit                0x00000001057caa35 _NSMapAndFilter + 233
8   com.apple.AppKit                0x0000000105807be2 copyCarbonDictionariesFromRecords + 30
9   com.apple.AppKit                0x000000010580799d +[NSPersistentUIManager(NSCarbonMethods) copyPersistentCarbonWindowDictionariesForBundleID:] + 144
10  com.apple.HIToolbox             0x000000010b009821 _HIPersistentUICopyPersistentCarbonWindowDictionariesForBundleID + 73
11  com.apple.HIToolbox             0x000000010b0097c7 GetPersistenceDictionariesAtLaunch() + 52
12  com.apple.HIToolbox             0x000000010b00978c WindowStateInitFirstEventTime() + 9
13  com.apple.HIToolbox             0x000000010b00915c _FirstEventTime + 50
14  com.apple.HIToolbox             0x000000010b008ffc RunCurrentEventLoopInMode + 41
15  com.apple.HIToolbox             0x000000010b008d84 ReceiveNextEventCommon + 166
16  com.apple.HIToolbox             0x000000010b008cd3 BlockUntilNextEventMatchingListInMode + 62
17  com.apple.AppKit                0x0000000105806613 _DPSNextEvent + 685
18  com.apple.AppKit                0x0000000105805ed2 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
19  com.apple.AppKit                0x00000001057fd283 -[NSApplication run] + 517
20  com.apple.AppKit                0x00000001057a1cb6 NSApplicationMain + 869
21  com.littleendiangamestudios.Alone   0x0000000104b54592 main + 34 (main.m:13)
22  com.littleendiangamestudios.Alone   0x0000000104b54564 start + 52

Thread 1:
0   libsystem_kernel.dylib          0x00000001085fa6d6 __workq_kernreturn + 10
1   libsystem_c.dylib               0x000000010848eeec _pthread_workq_return + 25
2   libsystem_c.dylib               0x000000010848ecb3 _pthread_wqthread + 412
3   libsystem_c.dylib               0x0000000108479171 start_wqthread + 13

Thread 2:: Dispatch queue: com.apple.libdispatch-manager
0   libsystem_kernel.dylib          0x00000001085fad16 kevent + 10
1   libdispatch.dylib               0x00000001083f2dea _dispatch_mgr_invoke + 883
2   libdispatch.dylib               0x00000001083f29ee _dispatch_mgr_thread + 54

Thread 3:
0   libsystem_kernel.dylib          0x00000001085fa6d6 __workq_kernreturn + 10
1   libsystem_c.dylib               0x000000010848eeec _pthread_workq_return + 25
2   libsystem_c.dylib               0x000000010848ecb3 _pthread_wqthread + 412
3   libsystem_c.dylib               0x0000000108479171 start_wqthread + 13

Thread 4:
0   libsystem_kernel.dylib          0x00000001085fa6d6 __workq_kernreturn + 10
1   libsystem_c.dylib               0x000000010848eeec _pthread_workq_return + 25
2   libsystem_c.dylib               0x000000010848ecb3 _pthread_wqthread + 412
3   libsystem_c.dylib               0x0000000108479171 start_wqthread + 13

Thread 5:
0   libsystem_kernel.dylib          0x00000001085fa6d6 __workq_kernreturn + 10
1   libsystem_c.dylib               0x000000010848eeec _pthread_workq_return + 25
2   libsystem_c.dylib               0x000000010848ecb3 _pthread_wqthread + 412
3   libsystem_c.dylib               0x0000000108479171 start_wqthread + 13 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:21:22.797

您似乎以某种方式损坏了您的应用程序的持久状态。如果您进入您的`~/Library/Saved Application State/`目录并为您的应用程序删除一个，它应该修复它。

# php - PHP找到多维数组的数组索引键来更新数组

> ID：15333085
> 
> 赞同：9
> 
> 时间：2013-03-11T07:14:43.347
> 
> 标签：php, arrays, facebook, facebook-graph-api, multidimensional-array

我试图想出一种方法来处理可能非常大的数组集。我正在做的是使用 facebook graph api。

因此，当用户注册我正在构建的服务时，我会将他们的 facebook id 存储在我服务的表中。这样做的目的是让注册我的服务的用户找到他们在 facebook 上的朋友，并且也通过我的服务注册，以便更容易地找到另一个人。

我目前正在尝试做的是获取facebook api为`/me/friends`数据返回的对象并将其传递给一个函数，我已经为我的数据库构建了一个查询，以查找在FB数据中找到的ID，它工作正常。此外，虽然这一切都在进行，但我已经建立了一系列 facebook id，因此我可以在`in_array`场景中使用它们。因为我的查询只返回 facebook id 找到的匹配项

虽然这些数据正在循环自身以创建查询，但我还更新了对象以在列表中的每个项目中包含一个键/值对，`"are_friends"=> false`到目前为止，这一切都运行顺利且相对较快，并且我有我的查询结果. 我正在循环。

所以我处于一个我想避免在循环中出现循环的部分。这就是关键所在`in_array()`。由于我创建了存储的 fb id 数组，我现在可以遍历我的结果以查看是否存在匹配项，在这种情况下，我想获取我附加的原始对象`'are_friends'=>false`并更改那些在那个匹配为“真”而不是假的集合中。如果不遍历循环内的原始数组，即结果数组，我想不出一个好方法。

所以我希望有人可以帮助我在这里想出一个没有二级循环的解决方案

到目前为止的数组以原始的样子开始

```
Array(
    [data](
            [0] => array(
                         are_fb_friends => false
                         name => user name
                         id => 1000
                        )
            [1] => array(
                         are_fb_friends => false
                         name => user name
                         id => 2000
                        )
            [2] => array(
                         are_fb_friends => false
                         name => user name
                         id => 3000
                        )
            )
    ) 
```

***按要求***

这是我当前的代码逻辑，我试图在上面描述..

```
public function fromFB($arr = array())
{
    $new_arr = array();
    if((is_array($arr))&&(count($arr) > 0))
    {
        $this->db->select()->from(MEMB_BASIC);
        $first_pass = 0;
        for($i=0;$i < count($arr);$i++)
        {
            $arr[$i]['are_fb_friends'] = "false";
            $new_arr[] = $arr[$i]['id'];
            if($first_pass == 0)
            {
                $this->db->where('facebookID', $arr[$i]['id']);
            }
            else
            {
                $this->db->or_where('facebookID', $arr[$i]['id']);
            }
            $first_pass++;
        }
        $this->db->limit(count($arr));
        $query = $this->db->get();
        if($query->num_rows() > 0)
        {
            $result = $query->result();
            foreach($result as $row)
            {
                if(in_array($row->facebookID, $new_arr))
                {
                    array_keys($arr, "blue");
                }
            }
        }
    }
    return $arr;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T14:52:06.693

要在数组中搜索值并获取其键，可以使用[array_search 函数](http://www.php.net/manual/en/function.array-search.php)返回元素的键。

```
$found_key = array_search($needle, $array); 
```

对于 PHP 中的多维数组搜索，请查看[https://stackoverflow.com/a/8102246/648044](https://stackoverflow.com/a/8102246/648044)。

如果您担心优化，我认为您必须尝试在数据库上使用查询（使用适当的索引）。

顺便问一下，您使用的是[Facebook 查询语言](http://developers.facebook.com/docs/reference/fql/)吗？如果不试一试，它很有用。

# jquery - 如何在 jQuery ajax 中添加带有文本/csv 的 Accept Header

> ID：15333086
> 
> 赞同：11
> 
> 时间：2013-03-11T07:14:53.633
> 
> 标签：jquery

这可能是一个简单的问题，但我还没有找到解决它的方法。我想通过 ajax 调用从服务器（由 ASP.NET Web API 实现）下载 csv 文件：

```
$.ajax({
    type: "GET",
    accepts: "text/csv; charset=utf-8",
    url: "/api/employees",
    success: function (data) {
    }
}); 
```

我已经将 Accepts 标头放在上面的 jQuery ajax 中。但从提琴手，我看到：

![在此处输入图像描述](../Images/092592ddba0112f31bd45a9dbc185b6b.png)

Accepts 标头现在变为`Accept: undefined`. 如果我尝试输入：

```
 accepts: {
        csv: "text/csv; charset=utf-8"
    } 
```

Accepts 标头现在变为：`Accept: */*`

![在此处输入图像描述](../Images/de3a2dc72662720801575f357e7118e8.png)

所以我想这是让我的服务器返回 JSON 对象而不是 CSV 文件的要点。

如何在 jQuery ajax 中正确制作 Accepts Header？并在提琴手中看到应该是： `Accept: text/csv`

我正在使用 Chrome。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T07:21:31.930

尝试

```
$.ajax({
    headers: { 
        Accept : "text/csv; charset=utf-8",
        "Content-Type": "text/csv; charset=utf-8"
    }
... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-23T17:17:19.917

虽然 dakait 的回答是正确的，但我会清理它并提供解释。

```
$.ajax({
  url: '/path',
  headers:{ 'Accept': 'text/csv',
            'Content-Type': 'text/csv' },
  ... 
```

在上面的示例中，我们明确设置了两个标头。

我认为正在发生的事情是 jQuery 有自己的逻辑来处理 Accept 和 Content-Type 标头，基于`accepts`（不是 Accept）和 dataType 字段。

因此，如果 dataType 为空白（因为 csv 不是受支持的 dataType），即使您设置了 Accept 标头或接受参数，它也会抑制 Accept 标头。

它似乎不是一个直观的界面，但它适用于许多人。我认为如果文档更好，它会减少混乱。

# coldfusion - cfexecute with pipe(|) 字符命令不起作用

> ID：15333099
> 
> 赞同：0
> 
> 时间：2013-03-11T07:15:52.427
> 
> 标签：coldfusion, coldfusion-9, cfml, cfexecute

我正在尝试执行[sc](http://support.microsoft.com/kb/251192)查询命令：

```
<cfexecute name = "sc"
  arguments='\\192.168.7.152 queryex type= service state= all | find "Apache2.2"'
  timeout = "10" variable="scVal">
</cfexecute>

<cfdump var="#scVal#"> 
```

但它失败并显示错误消息：“超时期限已过而未完成 sc”。但是，如果我通过命令提示符运行它，它就可以工作。

执行下面的单个命令也可以：

```
<cfexecute name = "sc"
    arguments = '\\192.168.7.152 queryex type= service state= all'
    timeout = "10" variable="scVal">
</cfexecute>

<cfdump var="#scVal#"> 
```

我猜它无法识别这是一个双重命令或存在管道字符问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T01:20:41.130

要使管道命令起作用，请尝试添加插入符号 (^) 作为转义字符

```
<cfexecute name = "sc"
  arguments='\\192.168.7.152 queryex type= service state= all ^| find "Apache2.2"'
  timeout = "10" variable="scVal">
</cfexecute>

<cfdump var="#scVal#"> 
```

# wordpress - 在 Wordpress 中替代 Screencast.com Video Embedder 视频插件

> ID：15333101
> 
> 赞同：1
> 
> 时间：2013-03-11T07:15:57.860
> 
> 标签：wordpress

我想在 WordPress 中使用来自[www.screencast.com](http://www.screencast.com)的视频，想在单个页面中显示多个视频链接，当我点击一个链接时，它应该是弹出形式的视频。

我试过这个“Screencast.com Video Embedder”，但这不是在弹出窗口中打开视频。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:49:42.430

只需从 screencast.com 共享选项中获取嵌入代码并将其粘贴到您的帖子的 html 中。然后返回视觉模式并在必要时调整尺寸以适合您的屏幕（600 像素或其他）。

更好的是，当您查看 Screencast 网站时，无需获取“嵌入您的页面”代码，只需查看上方的“共享 URL”即可。这是您需要添加到 Screencast 短代码的内容。确保你抓住“http:……../”和一切。所以你的简码应该是这样的；

```
[screencast url="http:www.screeencast.com/123XYZabc" width="xxx" height="yyy"] 
```

您需要的下一个插件不会得到好评，但我确实知道有些人已经成功使用了这个插件。我知道它很旧，但显然仍然有效。 [弹出视频生成器](http://wordpress.org/extend/plugins/popup-video-generator/)。这是一个[如何正确使用它的示例](http://www.justmakemedia.com/news/2010/10/popup-video-generator-wordpress-plugin/)。

# c# - Newtonsoft 自定义忽略约定

> ID：15333105
> 
> 赞同：2
> 
> 时间：2013-03-11T07:16:04.350
> 
> 标签：c#, .net, serialization, json.net

我想忽略类中的某些属性，但出于多种原因我想保留类 POCO。因此我不想引入对 Json.NET 的依赖，也不想使用`JsonIgnoreAttribute`.

有没有办法自定义合同解析器以尊重其他约定？例如，以单词“NonSerialized”开头的属性，或者至少是我们自己选择的内部创建的自定义属性（再次消除外部依赖并保持域模型尽可能纯）。

此外，不同的持久性将需要以不同的方式忽略/尊重相同的属性，因此能够通过某种流畅的 api 控制在运行时序列化的内容会很好。这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T09:46:39.643

对于字段，您可以使用`[NonSerializable]`System 命名空间中的属性，以避免序列化。这样你就不会依赖外部库。这不适用于属性。

对于属性，有一个称为**条件属性序列化**的功能。基本上，您实现的方法返回布尔值并遵循命名约定 - `ShouldSerialize[PropertyName]`。

```
public class LoginModel
{
    public string UserName { get; set; }

    public string Password { get; set; }

    public bool RememberMe { get; set; }

    public bool ShouldSerializePassword() { return false; }
} 
```

此示例将始终避免序列化`Password`. `ShouldSerialize`方法可以包含更复杂的验证逻辑，而不是简单地返回 false。

# c# - 如何捕获包括标题栏在内的窗口快照

> ID：15333106
> 
> 赞同：0
> 
> 时间：2013-03-11T07:16:07.830
> 
> 标签：c#, screenshot

下面是我的例程，它工作正常，但例程没有生成包含标题栏的窗口图像。所以请指导我在代码中需要更改的内容。

```
protected override void WndProc(ref Message m)
{

            if (m.Msg == WM_COMMAND && m.WParam.ToInt32() == SC_MINIMIZE)
            {
                OnMinimize(EventArgs.Empty);
            }

            base.WndProc(ref m);
}

protected virtual void OnMinimize(EventArgs e)
{
    Rectangle r = this.RectangleToScreen(ClientRectangle);

    if (_lastSnapshot == null)
    {
        _lastSnapshot = new Bitmap(r.Width, r.Height);
    }

    using (Image windowImage = new Bitmap(r.Width, r.Height))
    using (Graphics windowGraphics = Graphics.FromImage(windowImage))
    using (Graphics tipGraphics = Graphics.FromImage(_lastSnapshot))
    {
        windowGraphics.CopyFromScreen(new Point(r.Left, r.Top), new Point(0, 0), new Size(r.Width, r.Height));
        windowGraphics.Flush();

        tipGraphics.DrawImage(windowImage, 0, 0, r.Width, r.Height);
    }
} 
```

## 更新

您的代码有效，但左上角的某些部分不行。所以在这里我上传我使用你的代码生成的图像。请看一下并告诉我我需要在代码中修复什么。表单宽度不正确。谢谢 ![在此处输入图像描述](../Images/a4ad1230cbfba61e549ba61888d96fa3.png)

## 更新

```
 Bitmap bmp = new Bitmap(this.Width, this.Height);
    this.DrawToBitmap(bmp, new Rectangle(Point.Empty, bmp.Size));
    bmp.Save(@"d:\Zapps.bmp", ImageFormat.Bmp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:46:05.653

只需获取标题栏的高度并将其添加到要捕获的区域的高度（并从图像的当前顶部减去它 - 检查下面的源代码以了解更改）：

```
protected virtual void OnMinimize(EventArgs e)
{
    Rectangle r = this.RectangleToScreen(this.ClientRectangle);
    int titleHeight = r.Top - this.Top;

    _lastSnapshot = new Bitmap(r.Width, r.Height);

    using (Image windowImage = new Bitmap(r.Width, r.Height + titleHeight))
    using (Graphics windowGraphics = Graphics.FromImage(windowImage))
    using (Graphics tipGraphics = Graphics.FromImage(_lastSnapshot))
    {
        windowGraphics.CopyFromScreen(new Point(r.Left, r.Top - titleHeight),
                 new Point(0, 0), new Size(r.Width, r.Height + titleHeight));
        windowGraphics.Flush();

        tipGraphics.DrawImage(windowImage, 0, 0, r.Width, r.Height + titleHeight);
        _lastSnapshot.Save(@".\tmp.bmp", ImageFormat.Bmp);
    }
} 
```

# java - 使用其所属类的惰性初始化选项运行计划方法

> ID：15333108
> 
> 赞同：0
> 
> 时间：2013-03-11T07:16:17.493
> 
> 标签：java, spring, scheduled-tasks, lazy-initialization

我有一个类“ABC”，它在上下文启动时根据一些外部参数延迟初始化。类有一个带有注释的方法“测试”，`@Scheduled`它执行一些计划的活动。

```
public class ABC{
    @Scheduled(fixedDelay=100000)
    public void test(){
    }
} 
```

XML文件是这样的：

```
<bean id="abc" class="com.test.ABC" lazy-init="true" /> 
```

不管我是否初始化类，@Scheduled 方法总是被调用。

有没有办法只在类初始化时运行@Scheduled 方法？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:58:33.297

您可以尝试使用一种`@PostConstruct`方法来初始化编程计时器。然后使用这个程序化计时器而不是`@Schedule`.

@See skaffman 对这个[关于 programmatic timer](https://stackoverflow.com/a/4613145/267197)的问题的回答。

# ios - 如何确保谷歌地图 iOS SDK 不使用私有 API？

> ID：15333111
> 
> 赞同：0
> 
> 时间：2013-03-11T07:16:42.403
> 
> 标签：ios, google-maps-sdk-ios

谷歌最近发布了适用于 iOS 的谷歌地图 SDK，我计划将其集成到我的 iphone 应用程序中。但我想确保谷歌在他们的 API 中不使用任何私有 API 以避免被苹果拒绝。

有什么方法或地方可以确认 Google Maps iOS SDK 不使用私有 API 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:08:41.557

不是我知道的，但我认为你不需要担心太多。Apple 的拒绝模式非常随意，但如果您使用的库上标有 Google，您可能是安全的。在你尝试之前你永远不会知道。

# asp.net-mvc-3 - 想要获取 Microsoft Live Login 页面的 html 内容

> ID：15333116
> 
> 赞同：0
> 
> 时间：2013-03-11T07:17:11.000
> 
> 标签：asp.net-mvc-3, c#-4.0, https, windows-live, system.net.httpwebrequest

我有网址：

> `https://login.live.com/login.srf?wa=wsignin1.0&wtrealm=http%3a%2f%2fcorp.sts.microsoft.com&wctx=7b4cd04b-7dc2-4880-9f77-20c8c6ef64c4&wct=2013-03-11T06%3a54%3a42Z&whr=uri%3aWindowsLiveID.`

我想把这个网页的 htmlcotent 作为字符串。我的代码看起来像这样。

```
WebClient wc = new WebClient();
string html =  wc.DownloadString("url"); 
```

当我检查`html`字符串中的内容时，我看到一条错误消息：

> Microsoft 帐户需要 JavaScript 才能登录。此 Web 浏览器不支持 JavaScript，或者脚本被阻止。要了解您的浏览器是否支持 JavaScript 或允许使用脚本，请参阅浏览器的在线帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:21:36.360

您可以将`User-Agent`请求标头设置为某些已知浏览器，这会诱使网站认为它支持 javascript：

```
using (WebClient wc = new WebClient())
{
    client.Headers[HttpRequestHeader.UserAgent] = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.152 Safari/537.22";
    string html =  wc.DownloadString("https://www.microsoft.com/en-/itacademy/members/default.aspx");
} 
```

显然，如果站点执行一些 javascript 任务，它们将不会被执行，并且您不能依赖它们，因为 WebClient 不支持。

另一方面，如果您尝试针对 Live ID 进行身份验证，我强烈建议您为此目的使用 OAuth。下面[`documentation`](http://msdn.microsoft.com/en-us/library/live/hh243647.aspx)解释了在您将应用程序注册为依赖方之后如何将这种类型的身份验证与 Live ID 集成。

# android - 根据子视图的背景，Android 整个屏幕会变暗或变亮

> ID：15333117
> 
> 赞同：1
> 
> 时间：2013-03-11T07:17:16.907
> 
> 标签：android, layout

我一直面临着一个奇怪的布局问题。问题是主布局有背景，即灰色 ( `#DCDCDC`)。它由一个`ScrollView`垂直的孩子组成`LinearLayout`。它包含 2 个视图：一个是`TextView`黑色背景，下一个是谷歌地图。

现在的问题是：当它`TextView`变得可见时就可以了。但是，当`ScrollView`滚动以使地图可见时，整个屏幕会变暗，从一致性的角度来看，这是不可取的。

令人惊讶的是，问题仅出现在 4.x 版本的 Android 中。

以下是布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/grey"
    android:orientation="vertical"
    android:padding="5dp" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginBottom="10dp"
        android:layout_marginTop="10dp" >

        <Button
            android:id="@+id/back"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left|center_vertical"
            android:background="@drawable/_btn_back"
            android:onClick="clickHandler"
            android:paddingLeft="15dp"
            android:paddingRight="10dp"
            android:text="@string/terms_and_condition_terug"
            android:textColor="@color/white"
            android:textStyle="normal" />

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <ImageView
            android:id="@+id/logo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal" />

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <ImageView
            android:id="@+id/info"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right|center_vertical"
            android:layout_marginRight="10dp"
            android:clickable="true"
            android:onClick="clickHandler"
            android:src="@drawable/_info" />
    </LinearLayout>

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="700dp"
                android:background="@drawable/itemlistbackground" />

            <com.readystatesoftware.maps.TapControlledMapView
                android:id="@+id/mapview"
                android:layout_width="fill_parent"
                android:layout_height="700dp"
                android:layout_weight="1"
                android:apiKey="@string/mapApiKey"
                android:clickable="true" />
        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

以下`TextView`是可见 时的屏幕截图![当 textview 可见时，背景没问题](../Images/643e73dda8259535604d6ed53feff91f.png)

并在地图可见时拍摄了以下屏幕截图 ![当地图可见时](../Images/72c88483b946df86543817916fccb6a0.png)

如果您仔细查看那些屏幕，第二个图像比第一个图像暗，这是不希望的。在其中显示地图时，我不希望屏幕变暗。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:40:19.960

我剪下灰色边框的一部分，将它们放在一起进行比较，它们在我看来是一样的。第一个屏幕截图中还有一个渐变，这也让它看起来更有光泽。

![在此处输入图像描述](../Images/2224ef040385b96a505daed7e14cd154.png)

# python - py2exe：加载库（pythondll）错误

> ID：15333128
> 
> 赞同：0
> 
> 时间：2013-03-11T07:17:45.807
> 
> 标签：python, python-2.7

我编写了一个 python (2.7) 脚本并使用 py2exe 创建了一个 .exe。我将生成的文件发送给 5 位朋友：其中 3 位可以成功启动 exe，但其中 2 位尝试启动 exe 时出现此错误：

```
Das angebene Modul wurde nicht gefunden:
loadlibrary(pythondll) 
```

我试着翻译：

```
The specified modul couldn't be found:
loadlibrary(pythondll) 
```

那里可能有什么问题？

更多信息：我所有的 5 个朋友都安装了 Windows 7，没有人在他/她的机器上安装了 python。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:48:14.463

如果您的一些朋友能够打开它，我认为您发送的内容是可以的，但是由于缺少依赖项，python.dll 可能无法加载。我建议让你的朋友用[dependencywalker](http://www.dependencywalker.com/)打开exe，看看是否有一些文件被标记为丢失。

丢失的文件可能是 Visual Studio 可再发行文件。我认为 Python 27 需要 VS2008 运行时，可以在[这里下载](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=29)

# c++ - 序列化作为 IPC 机制？

> ID：15333131
> 
> 赞同：3
> 
> 时间：2013-03-11T07:18:11.053
> 
> 标签：c++, serialization, boost, ipc, dbus

我编写了一个实现和一个自动代码生成器，允许不同的进程使用消息队列进行进程间通信。

我的实现适用于原始数据类型，但当用户想要传递非 POD [普通旧数据类型] 类型时失败。

根据人们[对 SO](https://stackoverflow.com/questions/15294698/passing-non-pods-plain-old-datatypes-over-ipc)的建议，我阅读了有关 Boost Serialization 以及它如何允许序列化甚至非 POD 的信息。

问题 ：

Q1。序列化/反序列化本身是否被视为 IPC 机制，还是与其他实现一起使用？[换句话说，我应该使用序列化来增强我的消息队列实现，还是应该继续将序列化作为 IPC 机制本身？]

如果是，它会不会很慢，因为它涉及将数据写入硬盘并从那里读取？

或者这只是我的误解，所有像 d-bus 这样的 IPC 实际上可能会将数据保存到磁盘上，然后将文件标识符传递给其他进程以读取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:23:59.553

序列化/反序列化本身并不是 IPC 机制 - 您需要使用管道之类的东西在不同进程之间进行通信。话虽如此，您绝对可以对这些管道的数据进行序列化/反序列化。

使用这样的策略*可能*会很慢，但如果是这样，任何缓慢都会来自序列化和缓冲。如果您使用管道，您只是通过内存传递序列化字节，而不是通过写入磁盘然后从磁盘读取。

前段时间我在 C# 中写了一个这样的模式的实现，如果你对一些实现想法感兴趣，[这里有一篇关于它的博客文章。](http://www.capnfabs.net/project/ipctk-run-code-out-of-process-use-like-a-normal-object/)

# c++ - 不能分配给这个

> ID：15333134
> 
> 赞同：3
> 
> 时间：2013-03-11T07:18:23.843
> 
> 标签：c++

我有这样的课：

```
class Node {
    // data
    Node* next;
    void operator++(int);
}; 
```

当我像这样定义后增量运算符时：

```
void Node::operator++(int) {
    this = this->next;
} 
```

我得到错误`Expression is not assignable`。`this = this->next;`

这是怎么回事？我如何`this`指向`next`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:31:08.233

甚至不要尝试。它不起作用，如果你能让它起作用，无论如何这将是一件坏事。

从外观上看，您的节点类似于链表。如果是这种情况，那么您通常想要的是：

```
template <class T>
class linked_list { 

    class node { 
        node *next;
        T data;
    };

    node *head;
public:
    class iterator { 
        node *n;
    public:
        iterator(node *n=NULL) : n(n) {}

        iterator &operator++() { 
            n=n->next;
            return *this;
        }
        bool operator!=(iterator const &other) const { 
            return n != other.n;
        }
        // ...        
    };

    iterator begin() { return iterator(n); }
    iterator end()   { return iterator();  }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:29:45.207

这是无法改变的。它是恒定的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-05T13:29:25.057

根据 C++ 标准，`this`指针是纯右值表达式（参见[ *class.this* []](http://eel.is/c++draft/class.this)），但是赋值运算符需要一个*左值*作为其左操作数（参见[[expr.ass]](http://eel.is/c++draft/expr.ass)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T07:20:51.833

你不能这样做。即使通过一些肮脏的技巧你改变`this`了，改变也不会传播给调用者。`this`是方法的隐藏形式参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T07:24:29.640

就您在这里尝试做的事情而言，您似乎很困惑。您有一个`node`代表列表中节点的类。通常还有一个`iterator`类，它代表您当前在列表中的位置。在我看来，您正试图用来`++`迭代到列表中的下一个项目，但要做到这一点，您需要将迭代器作为它自己的一个类。

一般来说，分配给`this`指针是没有意义的——`this`指的是当前对象上下文，你不能仅仅通过设置`this`指针来改变那个上下文。

我希望这会对你有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T07:30:04.420

您刚刚发现了为什么 STL 有*迭代器*。迭代器将指向节点的指针作为其自身的成员，或者在某些情况下它是指针。它也可以修改它的成员变量。也许尝试类似：

```
class Iterator {
    Node* node;
public:
    Iterator(Node* n)
        : node( n )
    {}

    Iterator& operator++()
    {
        node = node->next;
        return *this;
    }

    Iterator operator++(int)
    {
        Node* current = node;
        node = node->next;
        return Iterator(current);
    }

    Node& operator*()
    {
        return *node;
    }

    const Node& operator*() const; // etc...
}; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-11T07:26:04.180

隐藏参数“this”与“const”限定符一起传递。因此无法更改。 [隐藏这个](http://www.learncpp.com/cpp-tutorial/87-the-hidden-this-pointer/)

# java - android权限唤醒锁有什么用？

> ID：15333135
> 
> 赞同：32
> 
> 时间：2013-03-11T07:18:26.200
> 
> 标签：java, android, permissions, android-manifest

何时以及为何使用 android 权限`<uses-permission android:name="android.permission.WAKE_LOCK" />`。请提供有关唤醒锁定的示例代码。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-03-10T08:05:25.997

WakeLock 是一种保持设备开启的机制，如此[**处**](http://developer.android.com/reference/android/os/PowerManager.WakeLock.html)和[**此处所写**](http://developer.android.com/reference/android/os/PowerManager.html)[](http://developer.android.com/reference/android/os/PowerManager.WakeLock.html)

 **例如，即使设备似乎处于睡眠状态，您也需要做一些事情，例如从 Internet 下载文件。

除非你真的需要，否则永远不要使用唤醒锁。原因是它们消耗更多的电池，如果你有一个在需要时不会释放它们的错误，你的应用程序将继续消耗设备的电池。甚至还有一些应用程序可以检测此类有问题的应用程序（例如“唤醒锁检测器”）。

此外，对于只想让屏幕保持打开状态（只要显示应用程序）的人的一个小提示：您不需要（并且您不应该需要）wakeLock 权限。相反，您应该只[`android:keepScreenOn="true"`](http://developer.android.com/reference/android/view/View.html#attr_android:keepScreenOn)在当前活动的布局上设置“”。[**关于这一点的更多内容在“生命编码——电池寿命”**](https://www.youtube.com/watch?v=OUemfrKe65c)讲座中讨论（[**在此处**](https://dl.google.com/io/2009/pres/W_0300_CodingforLife-BatteryLifeThatIs.pdf)演示）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-11T07:21:23.553

您可以使用唤醒锁来保持屏幕打开 - 您可以在[此代码](http://developer.android.com/reference/android/os/PowerManager.html)中看到一个示例。

如果您想了解更多信息，您必须指定您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T07:20:59.293

在睡眠时唤醒设备，即当用户不在非专业屏幕锁定中时

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T07:21:01.067

唤醒锁是一种机制，用于指示您的应用程序需要让设备保持开启状态。

任何使用必须在应用程序清单的元素中`WakeLock`请求`android.permission.WAKE_LOCK`权限的应用程序。`<uses-permission>`通过调用获取唤醒锁`newWakeLock(int, String)`。

* * *

## 回答 #5

> 赞同：-10
> 
> 时间：2014-01-04T22:36:48.027

在清单中：

```
<uses-permission android:name="android.permission.WAKE_LOCK" /> 
```**

# jquery - 如何使用uploadify为多个文件上传设置阿拉伯语按钮文本？

> ID：15333136
> 
> 赞同：1
> 
> 时间：2013-03-11T07:18:27.327
> 
> 标签：jquery, asp.net, uploadify

我想使用阿拉伯语的多个文件上传，因此我应该用阿拉伯语显示按钮文本。我已经尝试过这种和平的代码。

```
$("#<%=FUAttachments.ClientID %>").uploadify({

        'uploader': '../Assets/Admin/JS/uploadify.swf',

        'cancelImg': '../Assets/Admin/JS/cancel.png',

        'buttonText':  'استعراض الملفات',

        // Rest of the code
    }); 
```

按钮文本应以阿拉伯语显示。但它在按钮中显示数字而不是阿拉伯文字。

你能建议我如何实现更改阿拉伯语按钮文本的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:54:16.887

AFAIK 您无法本地化（读取更改）文件上传对话框。它的客户端和浏览器语言取决于客户端的操作系统语言。

您可以自己测试打开运行窗口（窗口键 + r）并输入`intl.cpl`

一个窗口会出现在你面前，选择“键盘和语言”>“更改键盘”

在这里选择除英语以外的语言，您将看到您的浏览器语言会改变，除非您明确指定浏览器语言

# iphone - 继承 UINavigationController 类和分配 rootViewController 的区别

> ID：15333144
> 
> 赞同：1
> 
> 时间：2013-03-11T07:19:03.363
> 
> 标签：iphone, ios, objective-c, uinavigationcontroller, uitabbarcontroller

`UINavigationController`继承类和分配`rootViewController`属性（或使用`initWithRootViewController:`方法）有什么区别？

我对此有点困惑。考虑下面 UINavigationController 的代码继承：

```
@interface NativeViewController : UINavigationController
{

} 
```

现在考虑使用 initWithRootViewController: 方法的以下代码：

```
UINavigationController *viewController = nil;
if (self) {
    NativeViewController *vc = [[NativeViewController alloc] initWithNibName:@"NativeViewController" bundle:nil];
    viewController = [[UINavigationController alloc] initWithRootViewController:vc];
    [vc autorelease];
}
return viewController; 
```

什么时候像第一种情况一样使用继承，什么时候使用`initWithRootViewController:`方法？

`rootViewController`如果继承财产会怎样？

同样的问题也适用于`UITabbarController`课堂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:38:59.540

第一个用于自定义`UINavigationController`。另一方面，第二个是用于初始化其中的`UINavigationController`第一个视图控制器。比方说，`UINavigationController`它本身只是导航`UIViewController`s 的占位符。

你仍然应该`rootViewController`把`UINavigationController`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:28:16.860

仅在需要控制 UIAppearance 或委托方法未提供的容器功能或外观的情况下，才对容器（UINavigationController、UITabBarController）进行子类化。

在所有其他情况下（大多数情况下），您将设置根视图控制器或 viewControllers 属性。您不需要子类来提供基本功能。这些是*容器*——你的大部分 UI 来自子视图控制器。

# java - 查找JDK是openJDK还是Oracle JDK

> ID：15333145
> 
> 赞同：3
> 
> 时间：2013-03-11T07:19:04.220
> 
> 标签：java, openjdk

我正在构建一个应用程序，用户可以在其中更改 Java 设置并可以指向任何 jdk。但是它必须是 Oracle JDK，而不应该是 openJDK。有没有办法检查JDK是否是开放的JDK或Oracle JDK给定它的java路径`c:\bin\jdk\binjava.exe`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:26:04.883

最简单的方法是 System.exec()

```
c:\bin\jdk\bin\java.exe -version 
```

并解析它的输出。OpenJDK 和 Sun JDK 有不同的文本输出。

这不是最佳的，但请考虑：即使您发现类名、功能或类似的差异，它仍然只适用于某些版本。你永远不能依靠差异来保持不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-19T08:05:00.760

> java版本

命令将在其输出文本中提供 Java 版本详细信息和运行时环境名称。使用运行时环境名称，您可以找到它。

例如，如果是 OpenJDK

```
openjdk version "<version>"
OpenJDK Runtime Environment .....
OpenJDK XX-Bit Server VM ..... 
```

对于其他 JDK，您将在输出中看到 JDK 类型。

```
Sample:
    java version "<version>"
    Java(TM) SE Runtime Environment .....
    Java HotSpot(TM) XX-Bit Server VM ..... 
```

# jquery - jQuery.live 的替代品是什么

> ID：15333147
> 
> 赞同：6
> 
> 时间：2013-03-11T07:19:12.893
> 
> 标签：jquery

什么应该是 jQuery.live() 的正确替代品。我知道 jQuery.on() 做同样的事情，但在 jQuery.on() 的情况下，我们必须指定父级才能使其工作。

假设我的页面上有 500 个 live ，现在我想将所有 500 live 更改为 on 并通过选择每个元素的父级来做到这一点是不可行的，并且需要更多时间。

假设我有`$(".item").live("click",function(){ alert("test"); });`

如果我用 jQuery.on() 替换它，那么它应该是`$("body").on("click",".item",function(){ alert("test"); });`

但我想知道是否有一些捷径或其他方法可以实现这样的目标

```
$(".item").on("click",function(){ alert("test"); }); 
```

这样我就可以在几秒钟内全部更换。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T08:08:26.020

`.live()`死了，万岁`.live()`： [https ://github.com/jquery/jquery/commit/eed78cc321ed7e2b37fb34e32fbb528b24f61d6e](https://github.com/jquery/jquery/commit/eed78cc321ed7e2b37fb34e32fbb528b24f61d6e)

虽然很认真，但对于您寻求的单线，您可以将其添加回来：

```
jQuery.fn.live = function( types, data, fn ) { jQuery( this.context ).on( types, this.selector, data, fn ); return this; } 
```

将其添加到您的 JS 的顶部以有效地创建一个 shim，让您可以随意使用`.live()`，而不必关心您使用的是哪个版本的 jQuery。

但实际上，就像其他人所说的那样，您应该使用您选择的文本编辑器或 sed 之类的命令行实用程序来执行 find-replaceall。在我给你的 shim 解决方案中，你正在调用一个函数来调用另一个函数，这会带来很多开销，并且可能会使用不必要的资源。`.on()`效率更高，特别是如果您直接调用它。

* * *

**更新**：上述解决方案依赖于 jQuery 的内部`.context`属性，该属性自 jQuery 1.10 以来[已被弃用](http://api.jquery.com/category/deprecated/deprecated-1.10/)，并且可能在任何后续版本中消失。*大多数情况下*应该满足您需求的替代版本是简单地替换`this.context`为`document`. 这在[.context 属性的 API](http://api.jquery.com/context/)中列出了限制：

> 此属性的值通常等于 document，因为如果没有提供，这是 jQuery 对象的默认上下文。例如，如果对象是通过在`<iframe>`XML 文档中搜索创建的，则上下文可能会有所不同。

所以它可能会失败。无论如何，现在你绝对没有理由不`.on()`直接使用。随时查看[我关于升级到最新版本 jQuery 的提示](https://stackoverflow.com/a/15507363/357774)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T07:40:36.077

`live`您可以定义一个小插件，通过调用为您提供旧功能，`on`但这只会让您使用更糟糕的代码。您**需要**重构代码才能`on`正确使用。

帮助您更轻松地管理初始更改的解决方案是使用正则表达式进行替换。大多数文本编辑器都可以让您这样做。

对于您提供的用例，您可以使用它（JavaScript 中的示例，适应您的编辑器）：

```
var output = input.replace(
      /\$\(\"([^\"]+)\"\)\.live\(\"([^\"]+)\"/g,
      '$(document.body).on("$2", "$1"'
); 
```

**输入 ：**

```
$(".item").live("click",function(){ alert("test"); });
$(".item2").live("change",function(){ console.log("test"); }); 
```

**输出 ：**

```
$(document.body).on("click", ".item",function(){ alert("test"); });
$(document.body).on("change", ".item2",function(){ window.top.console.log("test"); }); 
```

在这个初始转换之后，您将不得不寻找比`document.body`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T08:17:22.947

*与@destroy 的回答类似——其他的尝试——在备份你的文件之后*

我没有 Komodo，但设法为 Notepad++ 开发了以下内容：

寻找

```
\$\("(.+)"\).live\("(.+)", 
```

用。。。来代替

```
$(document).on('\2', '\1', 
```

正则表达式语法各不相同，因此您可能必须使用它。

您可能还需要调整或运行正则表达式的多个变体，例如满足单引号与双引号或空格的需求。

# java - 如何使用 RestTemplate 发布 XML

> ID：15333149
> 
> 赞同：6
> 
> 时间：2013-03-11T07:19:20.833
> 
> 标签：java, web-services, spring

我打算使用 Spring Rest 模板发布 XML 消息。在多次失败后，我开始怀疑 Spring Rest Template 是否可以 POST XML 消息。这是我开发的一个 Restful 客户端。RestTemplate 旨在将 XML 的 HTTP 发布到 RestFul Web 服务：

```
 Class RestClient{
    public static void main(String[] args) {

RestTemplate restTemplate = new RestTemplate();

    List<HttpMessageConverter<?>> messageConverters = new ArrayList<HttpMessageConverter<?>>();

    //This JAXB Message converter is intended to marshal an XML message over HTTP.
    //However, I find this converter is not doing the intended function.

    Jaxb2RootElementHttpMessageConverter jaxbMessageConverter = new Jaxb2RootElementHttpMessageConverter();
    List<MediaType> mediaTypes = new ArrayList<MediaType>();
    mediaTypes.add(MediaType.TEXT_HTML);
    jaxbMessageConverter.setSupportedMediaTypes(mediaTypes);
messageConverters.add(jaxbMessageConverter);
restTemplate.setMessageConverters(messageConverters);
restTemplate.postForLocation("http://localhost:8080/RecipeProject/restCallConsumer", "<add><somefield></somefield></add>",String.class);
   } 
```

}

此控制器旨在使用 XML 消息。编写控制器是为了测试客户端是否可以适当地发送 XML 消息：

```
@RequestMapping("/")
@Controller
public class HomeController {
@RequestMapping(value = "/restCallConsumer", method = RequestMethod.POST)
public String restCallConsumer(String anXML) {
System.out.println("anXML: " + anXML);  
return "aView";
 }
} 
```

我在使用 XML 和 RestTemplate 时发现的大多数示例都涉及使用对象映射工具。此工具将对象映射到 XML，反之亦然。在我的例子中，我只有一个我想通过 HTTP post 发送的 XML 字符串。有没有人完成我想做的事情？这可能是 RestFul 客户端不适合我想要做的事情。任何答案将不胜感激:)

**编辑**

XML 消息是通过使用 Xstream 序列化 Map 产生的。这是执行此操作的代码：

```
 com.google.common.collect.LinkedListMultimap.ListMultimap<String, String> multimap = com.google.common.collect.LinkedListMultimap.LinkedListMultimap.create();
multimap.put("x", "1");
multimap.put("x", "2");
multimap.put("y", "3");

XStream xStream = new XStream(new DomDriver());
xStream.registerConverter(new MapEntryConverter(xStream.getMapper()));

xStream.alias("add", multimap.getClass());
String xml = xStream.toXML(multimap);
System.out.println(xml); 
```

此代码旨在使用名为 MapEntryConverter 的转换器将多图转换为 XML 字符串。这是转换器的代码：

```
public static class MapEntryConverter extends MapConverter {

public MapEntryConverter(Mapper mapper) {
    super(mapper);
}

public boolean canConvert(Class clazz) {
    return ListMultimap.class.isAssignableFrom(clazz);
}

public void marshal(Object value, HierarchicalStreamWriter writer,
    MarshallingContext context) {

    ListMultimap<String, String> map = (ListMultimap<String, String>) value;
    for (String key : map.keys()) {
    writer.startNode(key);
    writer.setValue(map.get(key).get(0));
    writer.endNode();
    }
}

} 
```

**编辑**

我按照@artbristol 的建议更改了我的代码。我在日志文件中看到了这一点：

调试：org.springframework.web.client.RestTemplate - 使用 [org.springframework.http.converter.StringHttpMessageConverter@1d34263a] 编写 [1 1 3]

看起来 restTemplate 正在发布 XML 消息。但是，控制器中的 anXML 参数为空。这是否意味着 XML 消息无法到达控制器？可能是控制器没有正确实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:04:39.283

您不需要使用 Spring 的 JAXB 编组消息转换器 - 您已经通过将其转换为`String`. 只需发布`String`（就像在您的代码中一样）应该可以工作（`String.class`尽管丢失了用于 URL 变量的参数，并摆脱了`setMessageConverters`调用，因为这会阻止默认值`StringHttpMessageConverter`起作用）。

# expect - 如何记录期望会话而不在标准输出上显示输出？

> ID：15333152
> 
> 赞同：0
> 
> 时间：2013-03-11T07:19:34.553
> 
> 标签：expect

我希望期望脚本的输出进入日志文件。使用命令似乎很容易，`log_file`但问题是我只希望输出进入日志文件。当我做

```
 log_user 0
 log_file nameoflogfile 
```

日志文件是用它的内容创建的，但输出也显示在屏幕上。我如何抑制输出到标准输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:17:44.560

如果我理解正确，你需要在`log_file -a the-log-file`这里写。根据Expect手册：

> 该`−a`标志强制记录被 `log_user`命令抑制的输出。

顺便说一句，`puts`命令生成的输出不会发送到由`log_file`. 您可以考虑使用`send_*`命令（如`send_user`）而不是`puts`.

# ios - IOS：获取玩app的Facebook好友

> ID：15333153
> 
> 赞同：1
> 
> 时间：2013-03-11T07:19:35.020
> 
> 标签：ios, objective-c, facebook

我设法获得了朋友列表：

```
//token
NSString *acessToken = [NSString stringWithFormat:@"%@",_facebookAccount.credential.oauthToken];
NSDictionary *parameters = @{@"access_token": acessToken};
// Create the URL to the end point
NSURL *friendsList = [NSURL URLWithString:@"https://graph.facebook.com/me/friends"];

// Create the SLReqeust
SLRequest *getFriends = [SLRequest requestForServiceType:SLServiceTypeFacebook requestMethod:SLRequestMethodGET URL:friendsList parameters:parameters]; 
```

我还需要知道哪些朋友在玩，但是报错：

```
 me/friends?fields=installed

{
    error =     {
        code = 2500;
        message = "An active access token must be used to query information about the current user.";
        type = OAuthException;
    };
} 
```

我需要为此申请特殊许可吗？我现在使用这些：

```
@"read_stream", @"email", @"read_friendlists" 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:25:47.393

您可以通过以下方法获取使用 App 的 Fb 好友列表：-

```
- (void)apiRESTGetAppUsers {

    //[self apiGraphFriends];
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"friends.getAppUsers", @"method",
                                   nil];
    [[objapp facebook] requestWithParams:params
                             andDelegate:self];
}

- (void)request:(FBRequest *)request didLoad:(id)result {

    NSMutableArray *friendsWithApp = [[NSMutableArray alloc] initWithCapacity:1];
    // Many results
    if ([result isKindOfClass:[NSArray class]]) {
        [friendsWithApp addObjectsFromArray:result];
    } else if ([result isKindOfClass:[NSDecimalNumber class]]) {
        [friendsWithApp addObject: [result stringValue]];
    }

    NSLog(@"Array of all userfrnd of faceboolk   == %@",friendsWithApp);
} 
```

# python - 将项目插入到链表的前面？Python

> ID：15333154
> 
> 赞同：0
> 
> 时间：2013-03-11T07:19:35.363
> 
> 标签：python, insert, linked-list, nodes, temporary

所以我一直试图在链表的前面插入一个项目，它有点工作，但不完全。这是我到目前为止所拥有的（LinkedList 类中有更多方法，但我省略了它们，因为它们不是问题）：

```
class _Node():
    def __init__(self, data=None, link=None):
        self.data = data
        self.link = link

class LinkedList():
    def __init__(self):
        self.first = None
        self.size = 0

    def insert(self, ind, item):
        if self.first is None:
            self.first = _Node(item)
        elif ind == 0:                   # this is where the problem is. When I try to 
            temp = self.first            # insert a node to the front, it seems to
            temp.link = self.first.link  # forget about the rest of the nodes.
            self.first = _Node(item)
            self.first.link = temp  
        else:
            count = 0
            while count != ind - 1:
                count += 1
                self.first = self.first.link
            self.first.link = _Node(item, self.first.link)
        self.size += 1 
```

说我在shell中有这个：

```
 >>> L = LinkedList()
    >>> L.insert(0, 5)
    >>> L.insert(1, 10)
    >>> L.insert(0, 20)
    >>> L[0]
    20
    >>> L[1]
    5
    >>> L[2]
    # and here is an error message, it says NoneType object has no attribute 'data' 
```

所以在我上面的代码中，我要做的是创建一个与第一个节点对象相同的临时节点对象，我将该临时节点链接到第一个节点链接，我创建新节点，然后链接那个新节点节点到临时节点，但这不起作用。任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:39:22.773

似乎您因为“不是问题”而遗漏的那些功能实际上可能是您的问题......

如果您以这种方式请求每个节点中的数据，您的代码就可以工作：

```
>>> L = LinkedList()
>>> L.insert(0,5)
>>> L.insert(1,10)
>>> L.insert(0,20)
>>> print L.first.data
20
>>> print L.first.link.data
5
>>> print L.first.link.link.data
10 
```

您可能在定义`__getitem__`. 此外，您评论的部分可以在一行中重写，这可能更 Pythonic。

```
temp = self.first
temp.link = self.first.link
self.first = _Node(item)
self.first.link = temp 
```

前两行什么都不做，因为`temp`你`self.first`所说的就是`self.first.link = self.first.link`. 接下来的两个可以写成：

```
self.first = _Node(item, self.first) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:40:43.550

首先，请注意您实际上不需要在此处对空列表进行特殊处理：

```
def insert(self, ind, item):
    if ind == 0:
        newnode = _Node(item, self.first)
        self.first = newnode 
```

其次，这不是问题。这段代码：

```
 else:
        count = 0
        while count != ind - 1:
            count += 1
            self.first = self.first.link
        self.first.link = _Node(item, self.first.link)
    self.size += 1 
```

*改变*self.first ，所以它*忘记*了第一个节点之前是什么。解决此问题的最小更改是：

```
 else:
        count = 0
        insert_point = self.first # use a local variable to walk the list
        while count != ind - 1:
            count += 1
            insert_point = insert_point.link
        insert_point.link = _Node(item, insert_point.link)
    self.size += 1 
```

# c# - 从gridview提取数据到文本框

> ID：15333162
> 
> 赞同：1
> 
> 时间：2013-03-11T07:20:07.060
> 
> 标签：c#, gridview, datatable

我有一个网格视图，我正在尝试提取数据以填充 3 个文本框......我尝试了很多方法，但我无法找到正确的方法......我已经建立了手动gridview，因此它没有“editTemplate”......有人可以指导我以正确的方式做到这一点吗？这就是我的网格视图的样子：

```
 <asp:GridView ID="GridView1" runat="server"  AllowPaging="True" 
                                EmptyDataText="No parts has been added to the model, please add a part."
                                BorderColor="Black" BorderStyle="Solid"  BorderWidth="2px" 
                                CellPadding="3" onrowcommand="GridView1_RowCommand">
                                <Columns>
                                <asp:TemplateField HeaderText="">
                                 <ItemTemplate>
                                   <asp:LinkButton ID="EditButton" runat="server" CssClass="EditButton" CommandName="Edit" Text="Edit" />
                                 </ItemTemplate>
                                 </asp:TemplateField>
                                 <asp:TemplateField HeaderText="">
                                 <ItemTemplate>
                                   <asp:LinkButton ID="DeleteButton" runat="server" CssClass="DeleteButton" CommandName="Delete" Text="Delete" />
                                 </ItemTemplate>
                                 </asp:TemplateField>
                                </Columns>
                            <HeaderStyle BackColor="#FFFFCC"  BorderColor="Black" BorderStyle="Solid" 
                                BorderWidth="2px" />
                        </asp:GridView> 
```

然后这就是我将必要的列添加到该网格视图的方式：

```
 protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        dt = new DataTable();
        MakeDataTable();
        EmptyDataString();
    }
    else
    {
        dt = (DataTable)ViewState["DataTable"];
    }
    ViewState["DataTable"] = dt; 

}

#region GridView

private void EmptyDataString()
{
    TemplateBuilder tmpEmptyDataTemplate = new TemplateBuilder();
    tmpEmptyDataTemplate.AppendLiteralString("No parts has been added to the model, please add a part.");
    GridView1.EmptyDataTemplate = tmpEmptyDataTemplate;
    GridView1.DataBind();
}

private void MakeDataTable()
{
    dt.Columns.Add("Item");
    dt.Columns.Add("Quantity");
    dt.Columns.Add("Price P/Quantity");
}

private void AddToDataTable()
{
    DataRow dr = dt.NewRow();
    dr["Item"] = txtPart.Text;
    dr["Quantity"] = numQuantity.Text;
    dr["Price P/Quantity"] = txtPricePQ.Text;
    dt.Rows.Add(dr);
}

private void BindGrid()
{
    GridView1.DataSource = dt;
    GridView1.DataBind();
}

protected void btnAddPart_Click(object sender, EventArgs e)
{
    AddToDataTable();
    BindGrid();
    ClearNewParts();
}
#endregion 
```

这些是我尝试过的一些方法：（当我转向下一种方法时，所有这些都被注释掉了.....

```
 protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
  //  int index = Convert.ToInt32(e.CommandArgument);
    if (e.CommandName == "Edit")
    {
        if (GridView1.SelectedRow != null)
        {
            //dataTable.Rows[GridView1.SelectedRow].BeginEdit();
            //dataTable.Rows[GridView1.SelectedRow]["yourFieldName"] = newValue;
            //dataTable.Rows[GridView1.SelectedRow].EndEdit();
            //gridView.DataSource = dataTable;
        }
      //  GridViewRow row = GridView1.Rows[e.RowIndex];

       // Department = ((GridViewRow(((LinkButton)e.CommandSource).NamingContainer)).Cells[2].Text;
      //  txtPart.Text = GridView1.SelectedRow.Cells[1].Text;
       // txtPart.Text = GridView1.Rows[index].Cells[2].Text;
       // Response.Write(gv.Rows[index].Cells[0].Text); //consider you use bound field and the column you want to show its value is the first column.
    } 
```

我知道我在尝试如何从gridview中提取数据以填充文本框时做错了，但不确定如何....（我仍然是初级编程人员，基本上是第一次做我'我试图在这里实现）....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:23:38.587

使用以下代码>>

如果 Windows 应用程序>>

```
for(int i=0;i<gv.Rows.Count;i++)
{
       id=gv.selectedRows[i].cells[0][0].value.toString();
       name=gv.selectedRows[i].cells[0][0].value.toString();
} 
```

否则

您可以通过此从 gridview 中获取选定的行。

如果你想要没有选择那么，

```
for(int i=0;i<gv.Rows.Count;i++)
    {
           id=gv.Rows[i].cells[0][0].value.toString();
           name=gv.Rows[i].cells[0][0].value.toString();
    } 
```

第三种选择>>

```
 if (e.CommandName == "Edit")
        {
            if (GridView1.SelectedRow != null)
            {
                //dataTable.Rows[GridView1.SelectedRow].BeginEdit();
                //dataTable.Rows[GridView1.SelectedRow]["yourFieldName"] = newValue;
                //dataTable.Rows[GridView1.SelectedRow].EndEdit();
                //gridView.DataSource = dataTable;
            }
          //  GridViewRow row = GridView1.Rows[e.RowIndex];
    for(int i=0;i<GridView1.Rows.Count;i++)
{
            Department = ((GridViewRow(((LinkButton)e.CommandSource).NamingContainer)).Cells[2].Text;
            txtPart.Text = GridView1.SelectedRow[i][0].Cells[1].Text;
           txtPart.Text = GridView1.Rows[i][0].Cells[2].Text;
           Response.Write(gv.Rows[i][0].Cells[0].Text); //consider you use bound field and the column you want to show its value is the first column.
        }
} 
```

此外，您可以将这些变量设置为文本框。

或者直接也可以设置。

试用。

# javascript - 使用另一个数组过滤一个元素数组

> ID：15333163
> 
> 赞同：1
> 
> 时间：2013-03-11T07:20:18.133
> 
> 标签：javascript, jquery

我对python有点熟悉，那么javascript相当于：

```
In [25]: listA = [1,2,3,4,5,1,1]
In [26]: listB = [1,2]
In [27]: intersect = [element for element in listA if element in listB]
In [28]: intersect

Out[28]: [1, 2, 1, 1] 
```

这是我能得到的最接近的：

```
var arrA = [1,1,3,4,5,5,6];
var arrB = [1,5];
var arrC = [];
$.each(arrA, function(i,d){ if (arrB.indexOf(d)> -1){arrC.push(d);} ;}); 
```

对首选方法有何评论？我看到了[这个答案](https://stackoverflow.com/questions/7353917/filter-array-using-another-arrays-elements)，但这并不是我想要回答的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T07:56:52.513

你可以这样使用`Array.filter`：

```
var aa = [1,2,3,4,5,1,1]
   ,ab = [1,2]
   ,ac = aa.filter(function(a){return ~this.indexOf(a);},ab);
//=> ac is now [1,2,1,1] 
```

或作为扩展`Array.prototype`

```
Array.prototype.intersect = function(arr){
 return this.filter(function(a){return ~this.indexOf(a);},arr);
}
// usage
[1,2,3,4,5,1,1].intersect([1,2]); //=> [1,2,1,1] 
```

请参阅[**MDN**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)了解该`Array.filter`方法（还包含适用于旧浏览器的 shim）

# windows - cmd字符串替换特殊字符

> ID：15333164
> 
> 赞同：4
> 
> 时间：2013-03-11T07:20:25.047
> 
> 标签：windows, batch-file, replace, cmd

我正在尝试`~`用`%HOME%`批处理脚本替换。这是我到目前为止所拥有的：

```
@echo off
setlocal enabledelayedexpansion
set str=%*
set replacement=%HOME%
set str=%str:~=!replacement!%
echo %str% 
```

这不像我预期的那样工作，大概是因为我需要以`~`某种方式逃避波浪号。

当我用 , 逃脱时`^`，`str`没有改变。没有转义，`str`就是字符串`str:~=<my_home_path>`。

我怎样才能`"~/work/my_folder"`变成`"C:/Users/login/work/my_folder"`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:35:49.893

或者更复杂一点：

```
@echo off &setlocal enabledelayedexpansion
set "str=~/work/my_folder -param one ~ two:~"
set "replacement=C:/Users/login"
call :strlen str len
set /a len-=1
for /l %%i in (0,1,%len%) do if "!str:~%%i,1!"=="~" (set "new=!new!%replacement%") else set "new=!new!!str:~%%i,1!"
echo %new%
goto :eof

:strlen
:: list string length up to 8189 (and reports 8189 for any string longer than 8189)
:: function from http://ss64.org/viewtopic.php?pid=6478#p6478
(   setlocal enabledelayedexpansion & set /a "}=0"
    if "%~1" neq "" if defined %~1 (
        for %%# in (4096 2048 1024 512 256 128 64 32 16) do (
            if "!%~1:~%%#,1!" neq "" set "%~1=!%~1:~%%#!" & set /a "}+=%%#"
        )
        set "%~1=!%~1!0FEDCBA9876543211" & set /a "}+=0x!%~1:~32,1!!%~1:~16,1!"
    )
)
endlocal & set /a "%~2=%}%" & exit /b
endlocal 
```

输出：

`C:/Users/login/work/my_folder -param one C:/Users/login two:C:/Users/login`

这不适用于感叹号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T08:54:55.507

如果 the`~`始终是第一个字符，则可以这样使用：

```
@echo off &setlocal enabledelayedexpansion
set "str=|~/work/my_folder"
set "replacement=C:/Users/login"
set str=%str:|~=!replacement!%
echo %str% 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T11:58:35.517

我认为你已经很接近了，除了几个小问题。

首先，Windows 中可能没有环境变量`%home%`——至少在我的系统上没有。我认为您正在寻找的变量是`%userprofile%`. ss64.com 有一个很好的[Windows 环境变量](http://ss64.com/nt/syntax-variables.html)列表和描述。

另一个问题是您以错误的顺序延迟了扩展。尝试将倒数第二行更改为`set str=!str:~=%userprofile%!`使内部变量在外部变量之前扩展。将正斜杠翻译成反斜杠也可能不是一个坏主意。

```
@echo off
setlocal enabledelayedexpansion
set str=%*
set "str=!str: ~= %userprofile%!"
set "str=!str:*~=%userprofile%!"
set "str=%str:\=/%"
echo %str% 
```

**示例输出：**

```
C:\Users\me\Desktop>test ~/.bash_profile
C:/Users/me/.bash_profile

C:\Users\me\Desktop>test arg1 arg2 ~/.bash_profile
arg1 arg2 C:/Users/me/.bash_profile 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-05T21:31:55.057

```
 @ECHO OFF
    CLS
    SET OldStr=~\work\my_folder
    SET NewStr=
    SET Replacement=C:\Users\login\work\my_folder
    CALL :ReplaceHome "%OldStr%"
    ECHO %NewStr%
    EXIT /b %ERRORLEVEL%

    :ReplaceHome
    IF "%~1"=="" EXIT /B %ERRORLEVEL%
    SET TempStr=%~1
    IF "%TempStr:~0,1%"=="~" SET TempStr=%Replacement%%TempStr:~1%
    SET NewStr=%NewStr%%TempStr:~0,1%
    CALL :ReplaceHome "%TempStr:~1%"
    EXIT /B %ERRORLEVEL% 
```

# android - 开发实时新闻提要信息 App / Android

> ID：15333166
> 
> 赞同：0
> 
> 时间：2013-03-11T07:20:35.420
> 
> 标签：android, xml, json, mobile, windows-mobile

我正处于开发跨平台移动（专注于 Andriod 市场）应用程序的规划阶段，以显示来自不同网站的实时新闻提要。

我正在考虑使用 HTML5 和 SQLite 来临时保存提要中的信息，

现在我想弄清楚如何从新闻网站上获取新闻？我将需要使用多个来源来获取数据。

我期待你们提供某种教程、示例或指导。

如果有人能指导我正确的方向，那将是一个很大的帮助......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T07:32:42.510

你应该得到一个你可以找到信息的地方的RSS提要。

实现起来并不简单。

RSS 文件是一种结构符合标准（固定标签名称）的 XML 文件。

在您的应用程序中，您需要：

*   下载 RSS 提要：使用 HttpClient、服务...
*   从 XML 中提取数据：使用 XML 解析器，提供了一些
*   存储数据：最好的解决方案是 SQLite 数据库
*   显示数据：ListView 和 CursorAdapter 指向数据库

**编辑：** [这是一个很好的例子，说明如何从](http://android-er.blogspot.com.es/2012/03/get-weather-info-from-yahoo-weather-rss.html)[这个](http://weather.yahooapis.com/forecastrss?w=2459115)rss 提要中提取纽约时间

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T07:28:55.273

正如建议的那样，RSS 是最好的解决方案。例如，您可以在此处找到 BBC 新闻网站的 RSS 提要：http: [//feeds.bbci.co.uk/news/video_and_audio/world/rss.xml](http://feeds.bbci.co.uk/news/video_and_audio/world/rss.xml)

这是一个很好的 android RSS 教程： http: [//www.ingeniumblog.net/2012/01/making-a-slick-rss-reader-in-android/](http://www.ingeniumblog.net/2012/01/making-a-slick-rss-reader-in-android/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T07:53:20.120

正如其他人在我之前提到的那样，RSS 可能是最好的解决方案。加载数据时，不需要那么长时间（但这取决于项目的数量）。

有很多方法可以获取提要并将其存储在某处，但如果您需要文章正文，那么 Jsoup 可能是最简单的方法。

这是我基于我的一个应用程序的：

[http://techiedreams.com/android-simple-rss-reader/](http://techiedreams.com/android-simple-rss-reader/)

文章本身并没有那么描述性，因此您可能不得不挖掘源代码（实际上只有一个类您需要查看）

# c# - 通过正则表达式从 .aspx 文件中查找所有布尔变量

> ID：15333167
> 
> 赞同：0
> 
> 时间：2013-03-11T07:20:43.737
> 
> 标签：c#, asp.net, regex, pattern-matching

我想通过使用 c# Regex 从给定的 aspx 或 cs 文件中获取所有布尔变量，

谁能告诉我我该怎么做。任何提示

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:52:51.347

根据您是否需要单独捕获每个标志，这样的事情可能会完成工作：

```
bool\s*([^;]+); 
```

# java - 如何让摇摆程序等待

> ID：15333170
> 
> 赞同：0
> 
> 时间：2013-03-11T07:20:50.427
> 
> 标签：java, swing

基本上我正在编写摇摆程序，其中我通过另一个类调用我的摇摆程序类。每当我运行我的主类时，它都会执行并显示摇摆类，但即使在我按下 OK 按钮（Jbutton）之前，我的主类也会完全执行。请提出一些简单的方法来解决这个问题，因为我是新手。

```
import javax.swing.*;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

public class select_common_attr1 {

    public JFrame frame;
    JCheckBox checkBoxArray[];
    public String returnstring[];
    public int set_n;
    public boolean test;
    public JButton btnOk;
    public JButton btnReset; 
    /**
     * Launch the application.
     */
    /*public static void main(String[] args) {
        //EventQueue.invokeLater(new Runnable() {
            String t[]={"one","two","three"};
            //public void run() {
                //try {
            select_common_attr1 window = new select_common_attr1(t,t.length);
                    //window.print();
                    window.frame.setVisible(true);

                //} catch (Exception e) {
                    //e.printStackTrace();
                //}
            //}
        //});

    }*/

    public select_common_attr1(String common_attr[],int len) {
        initialize(common_attr,len);
        frame.setVisible(true);
    }

    private void initialize(String common_attr[],int len) {
        frame = new JFrame();
        test=false;
        frame.setBounds(100, 100, 452, 263);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel panel = new JPanel();
        checkBoxArray=new JCheckBox[len];
        for(int j=0;j<len;j++)
        {
            checkBoxArray[j]=new JCheckBox(common_attr[j]);
        }
        for(int i = 0; i<len; i++)
        {
           panel.add(checkBoxArray[i]);
        }
        btnOk = new JButton("OK");
        btnOk.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                int count=0;
                for(int i=0; i<checkBoxArray.length; i++)
                {
                 if(checkBoxArray[i].isSelected())
                 {
                     count++;
                 }
                }
                set_n=count;
                returnstring=new String[set_n];
                count=0;
                for(int i=0; i<checkBoxArray.length; i++)
                {
                 if(checkBoxArray[i].isSelected())
                 {

                     returnstring[count++]=checkBoxArray[i].getText();
                 }
                }
                test=true;
                print();
            }
        });

        btnReset = new JButton("RESET");
        btnReset.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {

                for(int i=0; i<checkBoxArray.length; i++)
                {
                 if(checkBoxArray[i].isSelected())
                 {
                     checkBoxArray[i].setSelected(false);
                 }
                }
                test=false;
            }
        });
        GroupLayout groupLayout = new GroupLayout(frame.getContentPane());
        groupLayout.setHorizontalGroup(
            groupLayout.createParallelGroup(Alignment.LEADING)
                .addGroup(groupLayout.createSequentialGroup()
                    .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)
                        .addGroup(groupLayout.createSequentialGroup()
                            .addGap(158)
                            .addComponent(btnOk)
                            .addGap(18)
                            .addComponent(btnReset))
                        .addGroup(groupLayout.createSequentialGroup()
                            .addContainerGap()
                            .addComponent(panel, GroupLayout.DEFAULT_SIZE, 416, Short.MAX_VALUE)))
                    .addContainerGap())
        );
        groupLayout.setVerticalGroup(
            groupLayout.createParallelGroup(Alignment.LEADING)
                .addGroup(groupLayout.createSequentialGroup()
                    .addContainerGap()
                    .addComponent(panel, GroupLayout.PREFERRED_SIZE, 106, GroupLayout.PREFERRED_SIZE)
                    .addGap(18)
                    .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                        .addComponent(btnOk)
                        .addComponent(btnReset))
                    .addContainerGap(66, Short.MAX_VALUE))
        );
        frame.getContentPane().setLayout(groupLayout);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:27:18.940

使用模态`JDialog`而不是`JFrame`.

这将停止程序执行，直到对话框关闭

查看[如何使用对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)和[如何在对话框中使用模态以](http://docs.oracle.com/javase/tutorial/uiswing/misc/modality.html)获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:07:33.150

您可以添加一个锁来处理您的逻辑，请参见以下代码：

```
static Object lock = new Object();

public static void main(String[] args) throws Exception {
    synchronized (lock) {
        String t[] = { "one", "two", "three" };
        select_common_attr1 window = new select_common_attr1(t, t.length);
        System.out.println("???????");
        try {
            lock.wait();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        System.out.println("#####################");
    }
}

private void next(){
    synchronized (lock) {
        frame.setVisible(false);
        lock.notify();
                    // You can process your business at here.

    }
}
private void initialize(String common_attr[], int len) {
    frame = new JFrame();
    test = false;
    frame.setBounds(100, 100, 452, 263);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JPanel panel = new JPanel();
    checkBoxArray = new JCheckBox[len];
    for (int j = 0; j < len; j++) {
        checkBoxArray[j] = new JCheckBox(common_attr[j]);
    }
    for (int i = 0; i < len; i++) {
        panel.add(checkBoxArray[i]);
    }
    btnOk = new JButton("OK");
    btnOk.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            int count = 0;
            for (int i = 0; i < checkBoxArray.length; i++) {
                if (checkBoxArray[i].isSelected()) {
                    count++;
                }
            }
            set_n = count;
            returnstring = new String[set_n];
            count = 0;
            for (int i = 0; i < checkBoxArray.length; i++) {
                if (checkBoxArray[i].isSelected()) {

                    returnstring[count++] = checkBoxArray[i].getText();
                }
            }
            test = true;
            next();
        }
    });

    btnReset = new JButton("RESET");
    btnReset.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {

            for (int i = 0; i < checkBoxArray.length; i++) {
                if (checkBoxArray[i].isSelected()) {
                    checkBoxArray[i].setSelected(false);
                }
            }
            test = false;

            next();
        }
    });

... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T07:43:37.727

如果您希望用户按下 OK 按钮后发生某些事情，则必须将代码放入其 actionListener 方法中。这就是事件监听器的用途。在此处查看一些背景文档：http: [//docs.oracle.com/javase/tutorial/uiswing/events/intro.html](http://docs.oracle.com/javase/tutorial/uiswing/events/intro.html)

准确地说，Java 命名约定希望类名使用驼峰式表示法大写。也就是说，“select_common_attr1”实际上应该是“SelectCommmonAttr1”。希望能帮助到你。

# linux - Yocto Linux 使用的链接器二进制名称是什么

> ID：15333171
> 
> 赞同：0
> 
> 时间：2013-03-11T07:20:51.177
> 
> 标签：linux, linker, linux-kernel

我正在寻找 Yocto-Linux 使用的链接器二进制文件，在普通 Linux 中，您可以在 /lib 目录中的某个位置找到它，但不确定如何为 Yocto Linux 找到它。

任何人都可以告诉我你应该如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:22:46.760

我假设您的意思是动态链接器。尝试运行[ldd](http://man7.org/linux/man-pages/man1/ldd.1.html)，例如在一些常见的可执行文件上：

```
 ldd /bin/sh 
```

（你也可以通过运行猜测你使用的动态链接器`cat /proc/self/maps`）

普通的链接器，即用于从对象构建程序的链接器，通常通过编译器调用：`gcc`既用于编译，也用于链接。（其实`gcc`只是一个驱动程序启动`cc1`——真正的编译器，`ld`或者`collect2`——链接器；`gcc -v`用来找出启动了哪些命令）。

# shell - 用于读取另一个脚本输出的 Shell 脚本

> ID：15333180
> 
> 赞同：-1
> 
> 时间：2013-03-11T07:21:15.870
> 
> 标签：shell, unix

我需要编写一个 shell 脚本，它从另一个 shell 脚本（results.sh）读取输出并将结果写入一个平面文件。

基本上我们没有控制权和权限来更改 results.sh，但可以访问结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:37:41.437

```
results.sh > log.txt
mapfile b < log.txt 
```

输出将保存到`log.txt`数组变量`b`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:18:56.797

脚本`a.sh`：

```
#!/usr/bin/env bash
echo $1 
```

脚本`b.sh`：

```
#!/usr/bin/env bash
while read line
do echo "read: $line"
done 
```

测试：

```
chmod +x *.sh
a.sh "something" | b.sh 
```

输出：

> 读：某事

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T18:22:31.963

您是否尝试过使用管道：

```
./results.sh | ./yourNewScript.sh > flat.txt 
```

或者

```
bash results.sh | bash yourNewScript.sh > flat.txt 
```

取决于您如何运行脚本（./script 需要文件具有可执行位 - chmod +x 脚本）。

使用 | results 直接将其输出发送到 yourNewScript。> 将 yourNewScript 的输出写入文件 flat.txt

# c# - 实体框架连接字符串在 Windows 应用程序中不起作用

> ID：15333182
> 
> 赞同：-1
> 
> 时间：2013-03-11T07:21:28.430
> 
> 标签：c#, sql, sql-server-2008

在使用 EF 连接到客户端的数据库时遇到一点问题。

我可以使用连接字符串进行连接...

```
SqlConnection thisConnection = null;

string connection = "Data Source=SERVER; Initial Catalog=DATABASE; User ID=USER; Password=PASSWORD; Persist Security Info=True; Pooling=False;"

 thisConnection = new SqlConnection(string.Format(connection));
 thisConnection.Open(); 
```

但是，当我使用 EF 并将我的 app.config 更新为下面的连接字符串时，我无法连接...任何提示？

```
<add name="dbEntities" connectionString="metadata=res://*/Model.csdl|res://*/Model.ssdl|res://*/Model.msl;
     provider=System.Data.SqlClient;provider connection string=&quot;
     data source=SERVER;initial catalog=DATABASE;ID=USER;Password=PASSWORD;multipleactiveresultsets=True; Persist Security Info=True; Pooling=False;
     App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

错误 = '基础提供程序在 ConnectionString 上失败'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:23:04.373

在 EF 中，用户名键应该是`User ID`(not `ID`)

所以

```
<add name="dbEntities" connectionString="metadata=res://*/Model.csdl|res://*/Model.ssdl|res://*/Model.msl;
     provider=System.Data.SqlClient;provider connection string=&quot;
     data source=SERVER;initial catalog=DATABASE;User ID=USER;Password=PASSWORD;multipleactiveresultsets=True; Persist Security Info=True; Pooling=False;
     App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

# function - 从 ACCESS 2013 中的几个列（字段）计算 MAX 、 SUM 、 AVERAGE

> ID：15333189
> 
> 赞同：0
> 
> 时间：2013-03-11T07:22:04.797
> 
> 标签：function, max, aggregate, average, multiple-columns

我可以访问下表：

```
 entity ratingA ratingB ratingC 
    XYZ     0-100   0-100   0-100
    ABC     0-100   0-100   0-100 
```

我需要查询以从每个实体的每 3 列（字段：ratingA、ratingB、ratingC）中执行一些简单的聚合函数（SUM、MAX、AVE），但内置函数一次只对一个字段执行此操作，不适用于多个字段/列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-20T01:13:55.973

要获得多个字段的平均值，您真正要做的是首先找出可以填充字段的方式的组合。ex 3 个字段可以用 8 种方式填写 1,0,0 - 0,1,0, - 0,0,1 - 1,1,0 - 1,0,1 - 0,1,1 - 1,1,1 - 0,0,0 其中 0 表示空字段，如果所有字段都已填充，您可以强制和参数对字段求和并除以 3，但是如果仅填充 2 或一个字段，则您必须首先识别空字段并且不要将它们添加到计算中。例如，如果有两个空字段，那么您的平均值 = 包含值的字段的值。如果两个字段已满，那么您的平均值 = 两个字段之和除以两个等值的值。因此，您要做的是计算该记录中的空字段数，然后从平均字段数中减去空字段数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:29:20.467

我不知道它的真实代码，但这里有一些伪代码：

```
SELECT RatingA+RatingB+RatingC/3 AS average
WHERE entity = XYZ 
```

对所有实体进行分组：

```
SELECT RatingA+RatingB+RatingC/3 AS average
GROUP BY entity 
```

更好的是：

```
TABLE
ENTITY     VALUE    RATINGTYPE
XYZ        7        A
XYZ        3        B
XYZ        5        C
ABC        4        A
ABC        4        D 
```

如果您计划在未来扩展，那么您将拥有无限数量的类型。

```
SELECT rating/count(rating) AS average
WHERE entity = XYZ
(AND TYPE = A) #If you want to sort by only one type. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:53:16.913

这实际上不是我自己的解决方案，我在这里找到了[如何在单行上选择多列的 AVG，](https://stackoverflow.com/questions/4268760/how-do-i-select-avg-of-multiple-columns-on-a-single-row)类似于 mysql 并采用它进行访问（因为没有函数 ISNULL）：

```
 (NZ(RatingA, 0) + NZ(RatingB, 0) + NZ(RatingC, 0)) /
   (IIF(ISNULL(RatingA), 0, 1) + IIF(ISNULL(RatingB), 0, 1) + IIF(ISNULL(RatingC), 0, 1)) 
```

我把它作为一个计算字段放在按字段 ENTITY 分组的新查询中。

# c# - 如何在c#中读取和操作xls文件

> ID：15333190
> 
> 赞同：-1
> 
> 时间：2013-03-11T07:22:08.493
> 
> 标签：c#

我正在开发需要读取 xls 文件的应用程序。在这里，我们可以向 excel 文件添加新行或从 excel 文件中删除一些行。

我如何在 C# 中实现这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:34:57.687

```
try Aspose components they have lot of interactive operations with Excel 
```

[也试试这个](http://www.aspose.com/demos/.net-components/aspose.cells/csharp/quick-start/rows-and-columns/default.aspx)

# php - 在 Oracle 数据库中指定和打印列

> ID：15333192
> 
> 赞同：0
> 
> 时间：2013-03-11T07:22:15.420
> 
> 标签：php, sql, oracle

我无法指定我希望输出的数据，我想做的是打印配方表中包含的所有配方标题。

```
$stid2 = oci_parse($conn, 'select recipetitle from recipes.recipe');
oci_execute($stid2);

while ($row = oci_fetch_array($stid2, OCI_ASSOC)) {
  echo "<p>Sorry, there are no titles</p>";
    } else {
        echo '<p> <b>Recipe Title: </b>' . $row['recipetitle'] . '</p>';
    }
} 
```

这甚至可能吗？我只是收到“未识别的索引”错误。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:04:22.143

As I commented, `while` / `else` doesn't exist in php.

Instead, try :

```
$stid2 = oci_parse($conn, 'SELECT `recipetitle` FROM `recipes`.`recipe`');
oci_execute($stid2);

//Output var
$output = '';

while ($row = oci_fetch_array($stid2, OCI_ASSOC)) {
    $output .= '<p> <b>Recipe Title: </b>' . $row['recipetitle'] . '</p><br>';
}

//Ternary test
$output == '' ? echo "<p>Sorry, there are no titles</p>" : echo $output; 
```

# objective-c - 发回子视图 1 层

> ID：15333193
> 
> 赞同：2
> 
> 时间：2013-03-11T07:22:18.467
> 
> 标签：objective-c, ipad, xcode4.5

我正在做一个 iPad 应用程序。我是这个发展的新手。我的观点很少，现在我只想发回一层。我该怎么做。

```
- (void) sendElementToBack:(UIMenuController *)controller {

    [self.view sendSubviewToBack:elementToAlter];
    [[undoManager prepareWithInvocationTarget:self] undoSendToBack:elementToAlter];
}

//#pragma mark - Undo/Redo Support for send element to back
- (void) undoSendToBack:(ParentView *)pieceToBringFront {
    [self.view bringSubviewToFront:pieceToBringFront];

} 
```

谁能帮我解决这个问题！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T07:42:06.633

试试这样可能对你有帮助

```
[[self view] exchangeSubviewAtIndex:  withSubviewAtIndex: ]; 
```

# c# - 使用 BitMap 对象而不锁定资源

> ID：15333194
> 
> 赞同：2
> 
> 时间：2013-03-11T07:22:31.090
> 
> 标签：c#, .net, dispose, unmanagedresources

从上一个问题的答案中，`Hans Passant`我了解到：

```
 MyImage = new Bitmap(openFileDialog1.FileName);
 pictureBox1.Image = (Image)MyImage; 
```

> 是的，该代码锁定了文件。锁是由 GDI+ 创建的内存映射文件对象产生的，它可以有效地将文件的像素数据映射到内存中，而无需在分页文件中分配空间。只要图像显示在图片框中并且未处理，您将无法删除文件，锁定可以防止这种情况。

问题是当我尝试从`PictureBox`. 似乎在这种确切的情况下甚至调用：

```
if (MyImage != null)
{
    MyImage.Dispose();
} 
```

不保证在删除图像的时候（我猜这可能是任何类型的非托管资源）它会被处理掉。

所以我有两个问题 - 第一个问题与我当前使用`BitMap`in`PictureBox`和由此引起的资源锁定问题有关。我看到这不是在内部显示图像的唯一方法，`PictureBox`所以还有另一种不会导致此问题的方法，并且可以保证在我需要的任何时候释放图像以将其删除。

我的第二个问题 - 当我必须在 .NET 中使用非托管资源并且我需要对它们进行类似操作时，基本方法是什么`Delete`。我想在.NET中使用任何类型的非托管资源时可能会出现这个问题，是否有一种通用的方法来解决在某个时刻锁定/释放资源而不是中继的问题`Garbage Collector`（这显然会让你失败不时，因为它可能需要不同的时间来发布）。我看到一些使用`GC...`方法来显式调用`finilizer`和类似的东西，但是一所大学提到最好不要使用这些方法，因为它们可能会导致不可预测的问题。

那么有什么指导方针和建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:27:40.373

您所描述的“通用方法”是`IDisposable`和`Dispose()`方法，最常见的是通过`using`. 如果这在特定示例中不起作用，则该特定示例中可能存在编码错误。该错误不会改变常用方法。

再举一个例子；尝试将其加载到内存中：

```
var data = File.ReadAllBytes(path);
var ms = new MemoryStream(data);
MyImage = Bitmap.FromStream(ms); 
```

# python - 如何找到整数列表的所有子集？

> ID：15333202
> 
> 赞同：0
> 
> 时间：2013-03-11T07:22:52.227
> 
> 标签：python, python-2.7, python-3.x

我编写了以下代码来从列表 S 中查找 2 个整数的子集。

```
import itertools

S = [1, 2, 3, 4, 6]

subsets = itertools.combinations(S, 2)
print subsets 
```

我期待以下结果：

```
[[1, 2], [1, 3], ... [4, 6]] 
```

我从上面的代码中得到一个错误，如下所示：

```
Traceback (most recent call last):
  Line 5, in <module>
    subsets = itertools.combinations(S, 2)
AttributeError: 'module' object has no attribute 'combinations' 
```

为什么我无法导入组合（）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T07:31:19.063

从您的问题描述看来，您使用的是 Python 2.5 或更低版本。自[`itertools.combinations`](http://docs.python.org/2/library/itertools.html#itertools.combinations)Python 2.6 起才可用，您必须升级到较新的版本才能使用它。

您可以使用`python --version`来找出您当前使用的版本。

# c# - 将数据附加到单元格的现有值的 SQL 查询

> ID：15333203
> 
> 赞同：2
> 
> 时间：2013-03-11T07:22:53.687
> 
> 标签：c#, asp.net, sql, sql-server, sql-server-2008

我需要一个查询，它将数据附加到单元格的现有值。例如：单元格的当前值：“2013-03-15” 更新后的值：“2013-03-15,2013-03-25”

甚至可能吗？注意：我不想一次更新整个列。只有细胞。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T07:28:29.933

尝试这样的事情：

```
UPDATE tblMyTable
    SET MyCell = MyCell + ',' + 'My Other Value' 
```

或者

```
UPDATE tblMyTable
    SET MyCell = MyCell + ',' + @MyParameter 
```

请记住，`MyCell`将需要基于文本的类型，例如：`nvarchar(256)`等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:33:30.713

如果假设您使用的是 DateTime DataType，那么您必须：

创建另一个表，例如 RequestDateTime：

```
Create table REQUEST_DATE_TIME(
  REQUEST_ID VARCHAR(10), -- or whatever PK your main table use
  Request_date DATETIME
) 
```

然后添加两个表之间的关系。

但是，当您使用 varchar(n) 数据类型时，您可以执行以下简单操作：

```
Update table set DateTimeCell = DateTimeCell + CAST(@VALUE AS VARCHAR) 
```

如果您说出您要达到的目标，也许您可​​以获得更好的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T07:26:38.580

如果您使用日期，这是不可能的。使用文本数据类型。

首先，从相应单元格的数据库中读取数据，然后通过字符串连接附加您的数据。

接下来，更新单元格

```
while (myReader.Read())
{ 
String d1=myReader["dat"].ToString());
}
String d2=d1+","+your_variable or data 
```

更新它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T07:30:01.540

**不要那样做**。创建另一列，例如 newDate 并将您的新值存储在那里。当您使用日期时，您必须像日期一样存储它们，而不是像文本一样。或者，您可以将日期存储在单个列中，并在您引用的学生表中使用某种外键。

# javascript - 使用javascript在点击时添加高度

> ID：15333210
> 
> 赞同：0
> 
> 时间：2013-03-11T07:23:24.253
> 
> 标签：javascript, html, resize

我很难弄清楚如何为我的`div`. 考虑到这个 Html ：

```
<div id='box'></div> 
<div id='plus' onClick='resize()'>add height</div> 
```

我正在使用这种方法：-单击时我读取了 div 的当前高度-之后我将得到的字符串转换为整数-然后我将一些像素添加到框高度

JS 看起来像这样：

```
 function resize() {
     //get element

     var height=document.getElementById('box').style.height;

     //transform element from string to integer

     height=height.replace("px","");
      height=+height;

      //change height

      var n=height;
      height=n+300+'px';        
   } 
```

这应该是非常基本的，但我无法弄清楚我错过了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T07:31:59.803

您不必为元素分配新高度尝试下面的代码

```
function resize() { 
 //get element

 var height=document.getElementById('box').style.height;

 //transform element from string to integer

 height=height.replace("px","");
  height=+height;

  //change height

  var n=height;
  height=n+300+'px';        
 document.getElementById('box').style.height = height;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T07:31:48.500

在代码末尾添加

```
document.getElementById('box').style.height = height 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T07:32:40.863

看到这个：**[样品小提琴](http://jsfiddle.net/7wysR/)**

你错过了：

```
 document.getElementById('box').style.height = height 
```

# c - 最短的C程序，还是会导致段错误

> ID：15333215
> 
> 赞同：31
> 
> 时间：2013-03-11T07:23:51.020
> 
> 标签：c, gcc, segmentation-fault

有那么一刻，我为自己编写了我的第一个可能没有错误的 C 程序感到非常自豪。这是整个源代码：

```
int main; 
```

即使没有 ，它也能完美编译`int`，但会发出警告（即使没有`-Wall`），作为一个致力于无错误程序的程序员，我将它们视为错误。

愉快地编译了这个应用程序后，我立即赶忙启动它。令我惊讶的是，出现了分段错误错误...

* * *

现在认真了。**到底发生了什么？**

我的猜测如下：这是缺少`main`' 的定义。这很明显，但编译器允许这样做。好的，`main`可以在不同的单元中定义。但即使是链接器也没有做任何事情。有什么特别的原因吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-11T07:36:32.750

这个词`main`是任何变量的合法名称。典型的用例是向编译器提供名称的函数，`main`编译器将其编译为目标文件，而目标文件又链接到`crt0.o`为运行时提供初始化（堆栈分配等）并跳转到标签`main`。

在 C 目标文件中，符号与原型无关，并且链接器成功地将全局变量链接`int main;`为要跳转到的主程序。然而，这个程序是垃圾。它很可能初始化为零，但很快处理器会遇到随机指令访问程序分配的数据空间（堆栈+堆）之外的内存，或者指令流达到保留代码空间的限制。

两者都会导致分段错误。实际上，如果系统在带有*执行标志*的架构上运行，程序在第一次尝试跳转到*数据*段或页面时会出现段错误，而没有执行权限。

进一步阅读以支持评论中的讨论：[数据执行保护](http://en.wikipedia.org/wiki/Data_Execution_Prevention)，[NX_b​​it](http://en.wikipedia.org/wiki/NX_bit)

# c# - 如何从 STL 文件中获取尺寸？

> ID：15333217
> 
> 赞同：0
> 
> 时间：2013-03-11T07:23:54.763
> 
> 标签：c#

我有一个二进制格式的 STL（STereoLithography）文件，我已成功从 c#.net 读取文件并获得了刻面，我还获得了三角形的数量、零件的体积和零件的表面积。但现在的问题是我无法找到 3D 对象的尺寸（长度、宽度、高度）。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:31:57.463

我认为您可能必须自己计算，但算法应该相当简单，假设您想要 x、y、z 中的尺寸而不是一些旋转。遍历构面以找到最大和最小 x、y 和 z 坐标值。那么尺寸只是最大值和最小值之间的差异。

编辑：您可以在从文件中读取点的同时跟踪最大/最小值，以获得较小的性能提升。

# php - JSON/PHP 数组到 MYSQL 插入

> ID：15333220
> 
> 赞同：1
> 
> 时间：2013-03-11T07:24:00.893
> 
> 标签：php, mysql, arrays, json, insert

我有一个 JSON 数组，我将其转换为 PHP 数组，生成一系列 ID，例如：

```
 Array
   (
      [0] => 2343
      [1] => 4345
      [2] => 4432
      [3] => 3456
   ) 
```

我想将这些图像 ID 插入到具有公共画廊 ID 的数据库中 - 如果我要单独编写每个查询，它会是什么样子：

```
$query1 = "INSERT INTO gallery_media (media_id, gallery_id) VALUES ('2343', '1')";
$query2 = "INSERT INTO gallery_media (media_id, gallery_id) VALUES ('4345', '1')";
$query3 = "INSERT INTO gallery_media (media_id, gallery_id) VALUES ('4432', '1')";
$query4 = "INSERT INTO gallery_media (media_id, gallery_id) VALUES ('3456', '1')"; 
```

我将如何以某种方式循环它以使其尽可能简单高效？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T07:26:41.360

试试这个

```
$sql = "INSERT INTO gallery_media (media_id, gallery_id) VALUES ";
foreach($ids as $id) {
    $sql .= "('$id', '1'),";
}
$sql = rtrim($sql,","); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T07:40:38.543

是时候使用准备好的语句了！

```
$pdo = new \PDO('...');
$sth = $pdo->prepare("INSERT INTO gallery_media (media_id, gallery_id) VALUES (?, '1')");
foreach ($data_array as $value)
    $sth->execute(array($value)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T07:27:28.253

只需遍历数组。前任。：

```
 foreach ($your_array as $item){
     $query = sprintf("INSERT INTO gallery_media (media_id, gallery_id) VALUES (%d,1)",$item);
     //Now execute query
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T07:27:39.283

简单来说

```
foreach ($id_array as $id) {
  $query = "INSERT INTO gallery_media (media_id, gallery_id) VALUES ('$id', '1')";
  // execute your query
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T07:28:29.440

试试这个：

```
foreach( (array) $data_arr as $key => $value )
{
$query = "INSERT INTO gallery_media (media_id, gallery_id) VALUES ('$value', '1')";
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-11T09:26:24.380

我认为最短的方法是使用 implode func 一次创建整个查询。尝试这样的事情：`$query = "INSERT INTO gallery_media (media_id, gallery_id) VALUES ('".implode("','1'),",$vals_array)."')";`

# sql - 如何通过 unicode where 条件选择数据？

> ID：15333226
> 
> 赞同：2
> 
> 时间：2013-03-11T07:24:11.737
> 
> 标签：sql, unicode, ado.net

我想获取位于 TableAdapter 中的以下 SQL 语句的数据库。

```
SELECT * FROM Student WHERE Chinese_Name = @Param 
```

来自 C# 的示例代码调用是这样的。

```
GetDataByChinese_Name('你好'); 
```

但我不知道应该将***N***前缀放在该语法中的哪个位置。通常，我们可以得到

```
SELECT * FROM Student WHERE Chinese_Name = N'你好' 
```

这边走。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:30:55.910

您的 c# 代码应该略有不同。使用逐字字符串文字。( [msdn](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx) )

```
 GetDataByChinese_Name(@"你好"); 
```

# sql - Advanced SQL Server Order by

> ID：15333227
> 
> 赞同：6
> 
> 时间：2013-03-11T07:24:22.330
> 
> 标签：sql, sql-server, tsql, sql-order-by

I am trying to do an advanced order by with SQL query

I have a database that is used to track workflows and their associated activities

The previous activities (that are completed) are in a `closed` state. They have both an `Active_Date` and `Closed_Date` set

The current activity is in an `active` state. There is an `Active_Date` set, but the `Closed_Date` is `NULL`

For each `ECR.item_number` there will only be one activity in the `active` state

I would like to order by

1.  `ECR.item_number` but I would like the order to be based on which activity in the `active` state in descending order
2.  `A.ACTIVE_DATE`

Query:

```
SELECT 
    ECR.item_number,
    ECR.title,
    convert(VARCHAR(10),ECR.CREATED_ON,120) AS [Date CR Created],
    convert(VARCHAR(10),A.ACTIVE_DATE,120) AS [Activity Activated],
    convert(VARCHAR(10),A.CLOSED_DATE,120) AS [Activity Closed],
    A.STATE,
    A.NAME AS [Activity Name],

    (CASE
        WHEN 
            (A.STATE='Closed')
        THEN 
            DATEDIFF(DAY, A.ACTIVE_DATE, A.CLOSED_DATE)      
    END) AS [DAYS ACTIVITY (WAS) OPEN],

    (CASE
        WHEN 
            (A.STATE='Active')
        THEN 
            DATEDIFF(DAY, A.ACTIVE_DATE, Getdate())
    END) AS [DAYS ACTIVITY HAS BEEN OPEN]

FROM 
    innovator.ecr AS ECR
    INNER JOIN innovator.workflow AS WF 
        ON CR.id = WF.source_id
    INNER JOIN innovator.workflow_process AS WFP 
        ON WF.related_id = WFP.id
    INNER JOIN innovator.workflow_process_activity AS WPA 
        ON WFP.id = WPA.source_id
    INNER JOIN innovator.activity AS A 
        ON WPA.related_id = A.id

--Shown for clarity
ORDER BY
    ECR.ITEM_NUMBER,
    [Activity Activated] 
```

Sample return data

```
|-----------+-----------+-------------------+-----------------------+-----------------------+-------------------+-------------------------------+-------------------------------|
|CR Number  |   Title   |   Date CR Created |   Activity Name       |   Activity Activated  |   Activity Closed |   DAYS ACTIVITY (WAS) OPEN    |   DAYS ACTIVITY HAS BEEN OPEN |
|-----------+-----------+-------------------+-----------------------+-----------------------+-------------------+-------------------------------+-------------------------------|
|CR-000119  |   ITEM 1  |   4/12/2012       |   Submit CR           |   4/12/2012           |   31/01/2013      |   58                          |   0                           |
|CR-000119  |   ITEM 1  |   4/12/2012       |   Check CR            |   31/01/2013          |   13/02/2013      |   13                          |   0                           |
|CR-000119  |   ITEM 1  |   4/12/2012       |   Review CR           |   13/02/2013          |   21/02/2013      |   8                           |   0                           |
|CR-000119  |   ITEM 1  |   4/12/2012       |   Technical Review    |   21/02/2013          |   28/02/2013      |   7                           |   0                           |
|CR-000119  |   ITEM 1  |   4/12/2012       |   CRB Meeting         |   28/02/2013          |   NULL            |   NULL                        |   11                          |
|CR-000123  |   ITEM 2  |   6/12/2012       |   Check CR            |   6/12/2012           |   21/12/2012      |   15                          |   0                           |
|CR-000123  |   ITEM 2  |   6/12/2012       |   Submit CR           |   6/12/2012           |   6/12/2012       |   0                           |   0                           |
|CR-000123  |   ITEM 2  |   6/12/2012       |   Review CR           |   21/12/2012          |   17/01/2013      |   27                          |   0                           |
|CR-000123  |   ITEM 2  |   6/12/2012       |   Technical Review    |   17/01/2013          |   6/03/2013       |   48                          |   0                           |
|CR-000123  |   ITEM 2  |   6/12/2012       |   CRB Meeting         |   6/03/2013           |   NULL            |   NULL                        |   5                           |
|CR-000136  |   ITEM 3  |   11/01/2013      |   Submit CR           |   11/01/2013          |   15/01/2013      |   4                           |   0                           |
|CR-000136  |   ITEM 3  |   11/01/2013      |   Check CR            |   15/01/2013          |   16/01/2013      |   1                           |   0                           |
|CR-000136  |   ITEM 3  |   11/01/2013      |   Review CR           |   16/01/2013          |   21/01/2013      |   5                           |   0                           |
|CR-000136  |   ITEM 3  |   11/01/2013      |   Technical Review    |   21/01/2013          |   25/01/2013      |   4                           |   0                           |
|CR-000136  |   ITEM 3  |   11/01/2013      |   CRB Meeting         |   25/01/2013          |   31/01/2013      |   6                           |   0                           |
|CR-000136  |   ITEM 3  |   11/01/2013      |   Technical Review    |   31/01/2013          |   27/02/2013      |   27                          |   0                           |
|CR-000136  |   ITEM 3  |   11/01/2013      |   CRB Meeting         |   27/02/2013          |   NULL            |   NULL                        |   12                          |
|-----------+-----------+-------------------+-----------------------+-----------------------+-------------------+-------------------------------+-------------------------------| 
```

Desired Result

```
|-----------+-----------+-------------------+-----------------------+-----------------------+-------------------+-------------------------------+-------------------------------|
|CR Number  |   Title   |   Date CR Created |   Activity Name       |   Activity Activated  |   Activity Closed |   DAYS ACTIVITY (WAS) OPEN    |   DAYS ACTIVITY HAS BEEN OPEN |
|-----------+-----------+-------------------+-----------------------+-----------------------+-------------------+-------------------------------+-------------------------------|
|CR-000136  |   ITEM 3  |   11/01/2013      |   Submit CR           |   11/01/2013          |   15/01/2013      |   4                           |   0                           |
|CR-000136  |   ITEM 3  |   11/01/2013      |   Check CR            |   15/01/2013          |   16/01/2013      |   1                           |   0                           |
|CR-000136  |   ITEM 3  |   11/01/2013      |   Review CR           |   16/01/2013          |   21/01/2013      |   5                           |   0                           |
|CR-000136  |   ITEM 3  |   11/01/2013      |   Technical Review    |   21/01/2013          |   25/01/2013      |   4                           |   0                           |
|CR-000136  |   ITEM 3  |   11/01/2013      |   CRB Meeting         |   25/01/2013          |   31/01/2013      |   6                           |   0                           |
|CR-000136  |   ITEM 3  |   11/01/2013      |   Technical Review    |   31/01/2013          |   27/02/2013      |   27                          |   0                           |
|CR-000136  |   ITEM 3  |   11/01/2013      |   CRB Meeting         |   27/02/2013          |   NULL            |   NULL                        |   12                          |
|CR-000119  |   ITEM 1  |   4/12/2012       |   Submit CR           |   4/12/2012           |   31/01/2013      |   58                          |   0                           |
|CR-000119  |   ITEM 1  |   4/12/2012       |   Check CR            |   31/01/2013          |   13/02/2013      |   13                          |   0                           |
|CR-000119  |   ITEM 1  |   4/12/2012       |   Review CR           |   13/02/2013          |   21/02/2013      |   8                           |   0                           |
|CR-000119  |   ITEM 1  |   4/12/2012       |   Technical Review    |   21/02/2013          |   28/02/2013      |   7                           |   0                           |
|CR-000119  |   ITEM 1  |   4/12/2012       |   CRB Meeting         |   28/02/2013          |   NULL            |   NULL                        |   11                          |
|CR-000123  |   ITEM 2  |   6/12/2012       |   Check CR            |   6/12/2012           |   21/12/2012      |   15                          |   0                           |
|CR-000123  |   ITEM 2  |   6/12/2012       |   Submit CR           |   6/12/2012           |   6/12/2012       |   0                           |   0                           |
|CR-000123  |   ITEM 2  |   6/12/2012       |   Review CR           |   21/12/2012          |   17/01/2013      |   27                          |   0                           |
|CR-000123  |   ITEM 2  |   6/12/2012       |   Technical Review    |   17/01/2013          |   6/03/2013       |   48                          |   0                           |
|CR-000123  |   ITEM 2  |   6/12/2012       |   CRB Meeting         |   6/03/2013           |   NULL            |   NULL                        |   5                           |
|-----------+-----------+-------------------+-----------------------+-----------------------+-------------------+-------------------------------+-------------------------------| 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:10:59.727

In this scenario I find ECR.item_number in the active state and assign this date to the whole group ECR.item_number by means of MAX() OVER () clause. Further sorting (ascending) on the new column with number of position 10 in SELECT statement. Also you can use alias as the sort column instead of number of position 10 in SELECT statement

```
SELECT ECR.item_number,
       ECR.title,
       convert(VARCHAR(10),ECR.CREATED_ON,120) AS [Date CR Created],
       convert(VARCHAR(10),A.ACTIVE_DATE,120) AS [Activity Activated],
       convert(VARCHAR(10),A.CLOSED_DATE,120) AS [Activity Closed],
       A.STATE,
       A.NAME AS [Activity Name],
    (CASE WHEN (A.STATE='Closed')
          THEN DATEDIFF(DAY, A.ACTIVE_DATE, A.CLOSED_DATE)      
     END) AS [DAYS ACTIVITY (WAS) OPEN],
    (CASE WHEN (A.STATE='Active')
        THEN DATEDIFF(DAY, A.ACTIVE_DATE, Getdate())
     END) AS [DAYS ACTIVITY HAS BEEN OPEN],
     MAX(CASE WHEN A.CLOSED_DATE IS NULL THEN A.ACTIVE_DATE END) OVER (PARTITION BY ECR.item_number)
FROM innovator.ecr AS ECR
    INNER JOIN innovator.workflow AS WF 
        ON CR.id = WF.source_id
    INNER JOIN innovator.workflow_process AS WFP 
        ON WF.related_id = WFP.id
    INNER JOIN innovator.workflow_process_activity AS WPA 
        ON WFP.id = WPA.source_id
    INNER JOIN innovator.activity AS A 
        ON WPA.related_id = A.id
ORDER BY 10 ASC, ECR.ITEM_NUMBER, A.ACTIVE_DATE ASC 
```

Simple demo on [**SQLFiddle**](http://sqlfiddle.com/#!3/30070/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T09:15:40.493

The key to this is to get the date of the `Active` activity for each Item. This can be done using analytic functions:

```
[DateOfActiveActivity] = MIN(CASE WHEN A.CLOSED_DATE IS NULL THEN A.ACTIVE_DATE END) OVER(PARTITION BY ECR.item_number) 
```

So to integrate this into your query you can use:

```
WITH CTE AS
(   SELECT  [CRNumber] = ECR.item_number,
            ECR.title,
            [DateCRCreated] = CAST(ECR.CREATED_ON AS DATE),
            [ActivityActivated] = CAST(A.ACTIVE_DATE AS DATE),
            [ActivityClosed] = CAST(A.CLOSED_DATE AS DATE),
            A.STATE,
            [ActivityName] = A.NAME,
            [DAYSACTIVITYOPEN] = CASE WHEN A.STATE = 'Closed' THEN DATEDIFF(DAY, A.ACTIVE_DATE, A.CLOSED_DATE) END,
            [DAYSACTIVITYHASBEENOPEN] = CASE WHEN A.STATE = 'Active' THEN DATEDIFF(DAY, A.ACTIVE_DATE, GETDATE()) END, 
            [DateOfActiveActivity] = MIN(CASE WHEN A.CLOSED_DATE IS NULL THEN A.ACTIVE_DATE END) OVER(PARTITION BY ECR.item_number)
    FROM    innovator.ecr AS ECR
            INNER JOIN innovator.workflow AS WF 
                ON CR.id = WF.source_id
            INNER JOIN innovator.workflow_process AS WFP 
                ON WF.related_id = WFP.id
            INNER JOIN innovator.workflow_process_activity AS WPA 
                ON WFP.id = WPA.source_id
            INNER JOIN innovator.activity AS A 
                ON WPA.related_id = A.id
)
SELECT  [CR Number] = [CRNumber],
        Title,
        [Date CR Created] = CONVERT(VARCHAR(10), DateCRCreated, 120),
        [Activity Activated] = CONVERT(VARCHAR(10), ActivityActivated, 120),
        [Activity Closed] = CONVERT(VARCHAR(10), ActivityClosed, 120),
        [STATE],
        [Activity Name] = ActivityName,
        [DAYS ACTIVITY (WAS) OPEN] = [DAYSACTIVITYOPEN],
        [DAYS ACTIVITY HAS BEEN OPEN] = [DAYSACTIVITYHASBEENOPEN]
FROM    CTE
ORDER BY DateOfActiveActivity ASC, ActivityActivated, ActivityClosed; 
```

**[Demo with sample data on SQL Fiddle](http://sqlfiddle.com/#!3/888e2/1)**

# extjs4 - ExtJs 4 饼图 - 重新调整饼图大小

> ID：15333230
> 
> 赞同：0
> 
> 时间：2013-03-11T07:24:47.900
> 
> 标签：extjs4

我正在使用 extjs 4.0.7 饼图。我想设置饼图的大小。

我想要这个东西，因为在我的图表中假设只有两个切片

1.  一月份（值 = 1000）

2.  2 月（值 = 0.1）

当为上述数据呈现图表时，二月的部分非常小，几乎不可见。

我想增加它的大小，但无法找到实现这一目标的方法。

有人可以帮助我实现这一目标。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:43:04.683

`xtype: pie`具有属性[`lengthField : String`](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.chart.series.Pie-cfg-lengthField)，您可以在其中设置将用于切片长度的字段名称。该字段的值将处理每个切片的长度。所以小值可能有很大的长度才能看到它们。看起来像[自定义馅饼演示中的东西](http://docs.sencha.com/ext-js/4-0/#!/example/charts/PieRenderer.html)

* * *

# iphone - UIPickerView 不显示数据

> ID：15333234
> 
> 赞同：6
> 
> 时间：2013-03-11T07:25:05.577
> 
> 标签：iphone, ios, objective-c, xcode, uipickerview

我已经关注了几个 youtube 教程以及这里的建议，但我似乎无法让我的 UIPickerView 显示其数据。我正在使用三个数组填充选择器，我认为我已经正确实现了代码，但显然有问题。选择器正确显示元素的数量，问题是它们都显示为“？”

我尝试将选择器的委托设置为 self，但这也不起作用。提前致谢。

这是我的 .h 文件：

```
@interface BACcalcViewController : UIViewController<UIPickerViewDataSource, UIPickerViewDelegate>
@property(strong, nonatomic) IBOutlet UIPickerView *personInfoPicker;
@property(strong, nonatomic) NSArray *heightsArray;
@property(strong, nonatomic) NSArray *weightsArray;
@property(strong, nonatomic) NSArray *timeArray;
@end 
```

这是我的 .m 文件：

```
@interface BACcalcViewController () <UIPickerViewDataSource, UIPickerViewDelegate>

@end

@implementation BACcalcViewController

@synthesize personInfoPicker, heightsArray, weightsArray, timeArray;
- (void)viewDidLoad
{

[super viewDidLoad];

heightsArray = [NSArray arrayWithObjects:
                         @"5ft 0in",
                         @"5ft 1in",
                         @"5ft 2in",
                         @"5ft 3in",
                         @"5ft 4in",
                         @"5ft 5in",
                         @"5ft 6in",
                         @"5ft 7in",
                         @"5ft 8in",
                         @"5ft 9in",
                         @"5ft 10in",
                         @"5ft 11in",
                         @"6ft 1in",
                         @"6ft 2in",
                         @"6ft 3in",
                         @"6ft 4in",
                         @"6ft 5in",
                         @"6ft 6in",
                         @"6ft 7in",
                         @"6ft 8in",
                         nil];

weightsArray = [NSArray arrayWithObjects:
                     @"100",
                     @"110",
                     @"120",
                     @"130",
                     @"140",
                     @"150",
                     @"160",
                     @"170",
                     @"180",
                     @"190",
                     @"200",
                     @"210",
                     @"220",
                     @"230",
                     @"240",
                     @"250",
                     @"260",
                     nil];

timeArray = [NSArray arrayWithObjects:
             @"1",
             @"2",
             @"3",
             @"4",
             @"5",
             @"6",
             nil];
}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)personInfoPicker
{
    return 3;
}

- (NSInteger)pickerView:(UIPickerView *)personInfoPicker numberOfRowsInComponent: (NSInteger)component
{
    if (component == 0) 
        return [heightsArray count];
    else if (component == 1)
        return [weightsArray count];
    else
        return [timeArray count];
}

- (NSString *)pickerview:(UIPickerView *)personInfoPicker titleForRow:(NSInteger)row forComponent:(NSInteger)component
{    
    if (component == 0)
        return [heightsArray objectAtIndex:row];
    else if (component == 1)
        return [weightsArray objectAtIndex:row];
    else
        return [timeArray objectAtIndex:row];
}
@end 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-11T07:32:57.627

您需要设置选择器视图`dataSource`并`reloadAllComponents`在填充数组后调用。

```
self.personInfoPicker.delegate = self;
self.personInfoPicker.dataSource = self;
[self.personInfoPicker reloadAllComponents]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T07:28:28.137

尝试在 init 方法中初始化所有三个数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T13:03:15.177

你能试试下面的代码吗？

```
`NSMutableArray *_month_ary=[[NSMutableArray alloc]initWithObjects:@"01",@"02",@"03",@"04",@"05",@"06",@"07",@"08",@"09",@"10",@"11",@"12", nil];
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView;
{
    return 1;
}

-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{

    if ([pickerView isEqual:_month_picker_view]) {
        return [_month_ary count];
    }
    return 0;
}
-(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{

    if ([pickerView isEqual:_month_picker_view])
    {
        return [_month_ary objectAtIndex:row];
    }
    return nil;
}
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{

    if ([pickerView isEqual:_month_picker_view]) {
        _Pay_Month_txt.text=[_month_ary objectAtIndex:row];
        deal_cridit_card_month_str = [_month_ary objectAtIndex:row];
    }
}` 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T08:28:38.857

你的代码很好。只需要在方法中更改“pickerView”名称的对象。

代替

```
- (NSInteger)pickerView:(UIPickerView *)personInfoPicker numberOfRowsInComponent: (NSInteger)component 
```

经过，

```
- (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent: (NSInteger)component 
```

和，

```
- (NSInteger)pickerView:(UIPickerView *)personInfoPicker numberOfRowsInComponent: (NSInteger)component 
```

经过，

```
- (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent: (NSInteger)component 
```

因为`personInfoPicker`是`PickerView`你已经在.h文件中使用的对象，所以在为.h文件加载数据时会发生冲突`pickerView`。

希望它会帮助你。

谢谢。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T08:58:20.220

我认为您的代码是绝对正确的，并且您也设置了`datasource`，`delegate`但是您忘记重新加载`uipickerview`，因此在最后一次`viewdidload`重新加载`pickerview`时可以解决您的问题

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-23T20:09:54.520

我已经复制了您的初始代码，现在发现了您的错误。委托方法名称中有错字

代替

```
- (NSString *)pickerview:(UIPickerView *)personInfoPicker titleForRow:(NSInteger)row forComponent:(NSInteger)component 
```

一定是

```
- (NSString *)pickerView:(UIPickerView *)personInfoPicker titleForRow:(NSInteger)row forComponent:(NSInteger)component 
```

如果您编写pickerview，它将在您的类中声明一个永远不会被调用的新方法。如此简单但无论如何都很烦人:-)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T12:57:13.000

我认为您没有分配用作选择器数据源的数组，例如

```
 NSMutableArray *_month_ary=[[NSMutableArray alloc]initWithObjects:@"01",@"02",@"03",@"04",@"05",@"06",@"07",@"08",@"09",@"10",@"11",@"12", nil]; 
```

# android - Phonegap 应用程序可以在没有 NETWORK 权限的情况下运行吗

> ID：15333236
> 
> 赞同：0
> 
> 时间：2013-03-11T07:25:14.373
> 
> 标签：android, cordova

我开发了一个应用程序，它没有使用任何 Internet 设置，也没有在 phonegap 版本 1.7 中访问网络状态，但是应用程序没有运行，我们
`<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />` 在清单中使用以下权限

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-11T07:37:08.617

如果您尝试过搜索，您可能会比这更早得到答案 [。Android 上的 PhoneGap 需要所有这些权限吗？](https://stackoverflow.com/questions/8697295/are-all-those-permissions-needed-by-phonegap-on-android)

# api - RESTful 创建对象图

> ID：15333237
> 
> 赞同：1
> 
> 时间：2013-03-11T07:25:17.167
> 
> 标签：api, rest, api-design

我正试图围绕如何设计一个 RESTful API 来创建对象图。例如，考虑一个电子商务 API，其中资源具有以下关系：

**订单（主要对象）**

*   拥有多个地址
*   有许多订单行项目（订单由什么组成）
*   有多次付款
*   有很多联系信息

Order 资源通常与它的关联一起有意义。孤立地看，它只是一个没有商业意义的愚蠢容器。但是，每个关联对象都有自己的生命，可能需要独立操作，例如。*编辑订单的送货地址，更改订单的联系信息，在下订单后*从订单中删除订单项等。

设计 API 有两种选择：

*   Order API 端点通过处理发送到的内容中的“嵌套资源”智能地创建自己及其关联的资源`POST /orders`
*   Order 资源只创建自己，客户端必须向新创建的端点发出后续 POST 请求，例如`POST /orders/123/addresses`,`PUT /orders/123/line-items/987`等。

虽然第二个选项在服务器端实现起来更简单，但它让客户端为 80% 的用例做额外的工作。

第一个选项有以下悬而未决的问题：

*   如何传达新创建资源的 URL？标`Location`头只能传达一个 URL，但是服务器可能会创建多个资源。
*   如何处理错误？如果其中一个关联有错误怎么办？我们是否拒绝整个对象图？该错误是如何传达给客户的？

处理这个问题的 RESTful + 务实的方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:20:20.497

我如何处理这是第一种方法。您不应该假设客户端会发出它需要的所有请求。在一个请求上创建所有实体。

根据您的用例，您可能还希望在创建实体时强制执行“全有或全无”方法；即，如果有东西掉下来，一切都会回滚。您可以通过在数据库上使用事务来做到这一点（如果一切都通过单独的请求完成，您也无法做到这一点）。确定这是否是您想要的行为取决于您的具体情况。例如，如果您正在创建一个订单声明，您可以使用它（您不想创建缺少物品的订单），但是如果您正在上传照片，它可能没问题。

为了将链接返回给客户端，我总是返回一个 JSON 对象。您可以使用指向所创建的每个资源的链接轻松地填充此对象。通过这种方式，客户可以确定成功发布后的行为方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:07:27.303

这两个选项都可以实现 RESTful。你问：

> 如何传达新创建资源的 URL？标`Location`头只能传达一个 URL，但是服务器可能会创建多个资源。

这将与您`links`在案例中与其他资源通信的方式相同`GET`。使用`link`元素或您的方法是将资源的 URL 嵌入到表示中。

# c# - 在表单中以特定时间间隔执行方法

> ID：15333240
> 
> 赞同：0
> 
> 时间：2013-03-11T07:25:39.770
> 
> 标签：c#

我正在用 C# 创建一个具有十种形式的 Windows 应用程序。我有一个表格中的方法。我需要在特定的时间间隔执行此方法。我怎样才能实现它？请帮忙？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-11T07:27:57.223

使用 System.Windows.Forms.Timer 类。

您可以在 MSDN 获得详细信息和示例：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)

但是，我认为已经有很多这样的线程。

# android - Android SOAP 示例程序错误

> ID：15333243
> 
> 赞同：3
> 
> 时间：2013-03-11T07:25:44.087
> 
> 标签：android, soap

Android SOAP 示例程序错误

如何纠正这个错误。请帮我

主.java

```
public class Main extends Activity {

private static String SOAP_ACTION = "http://tempuri.org/HelloWorld";

private static String NAMESPACE = "http://tempuri.org/";
private static String METHOD_NAME = "HelloWorld";

private static String URL = "http://sygnetinfosol.com/webservice.asmx";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //Initialize soap request + add parameters
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);        
    request.addProperty("Parameter","Value");

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);

    // Make the soap call.
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    try {

        //this is the actual part that will call the webservice
        androidHttpTransport.call(SOAP_ACTION, envelope);        
    } catch (Exception e) {
        e.printStackTrace(); 
    } 

    // Get the SoapResult from the envelope body.       
    SoapObject result = (SoapObject)envelope.bodyIn;

    if(result != null){
        TextView t = (TextView)this.findViewById(R.id.resultbox);
        t.setText("SOAP response:\n\n" + result.getProperty(0).toString());
    }

}
} 
```

Logcat 错误

```
03-11 07:07:07.320: E/AndroidRuntime(908): FATAL EXCEPTION: main
03-11 07:07:07.320: E/AndroidRuntime(908): java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject
03-11 07:07:07.320: E/AndroidRuntime(908):  at com.pxr.tutorial.soap.weather.Main.onCreate(Main.java:29)
03-11 07:07:07.320: E/AndroidRuntime(908):  at android.app.Activity.performCreate(Activity.java:5104)
03-11 07:07:07.320: E/AndroidRuntime(908):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-11 07:07:07.320: E/AndroidRuntime(908):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-11 07:07:07.320: E/AndroidRuntime(908):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-11 07:07:07.320: E/AndroidRuntime(908):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-11 07:07:07.320: E/AndroidRuntime(908):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-11 07:07:07.320: E/AndroidRuntime(908):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-11 07:07:07.320: E/AndroidRuntime(908):  at android.os.Looper.loop(Looper.java:137)
03-11 07:07:07.320: E/AndroidRuntime(908):  at android.app.ActivityThread.main(ActivityThread.java:5041)
03-11 07:07:07.320: E/AndroidRuntime(908):  at java.lang.reflect.Method.invokeNative(Native Method)
03-11 07:07:07.320: E/AndroidRuntime(908):  at java.lang.reflect.Method.invoke(Method.java:511)
03-11 07:07:07.320: E/AndroidRuntime(908):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-11 07:07:07.320: E/AndroidRuntime(908):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-11 07:07:07.320: E/AndroidRuntime(908):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:29:09.313

ksoap2-android-assembly-2.6.2-jar-with-dependencies.jar

放在 /libs 文件夹下，以便 Eclipse ADT 自动将您的 jars 添加到应用程序的构建路径中。

下载 ksoap。罐。把它放在 libs 文件夹下。右键单击项目。转到属性。转到 java 构建路径。单击添加罐子。将 ksaop jar 文件从 lib 文件夹添加到您的项目中。

清理并构建项目。这应该可以帮助你。

编辑1

右键单击“项目”-> 属性-> Java 构建路径-> 排序和导出 ![在此处输入图像描述](../Images/d6c50e46463f25ba114e44e662ce19bc.png)

现在，请确保您已经“检查”了外部添加的“jar”文件，正如您在快照中看到的那样。确保该外部 jar 文件的顺序也与 snap 中显示的相同。

# c# - 如何获取当前属性的名称

> ID：15333249
> 
> 赞同：3
> 
> 时间：2013-03-11T07:25:48.993
> 
> 标签：c#, system.reflection

我有一堂课

```
public class News : Record
{
    public News()
    {
    }

    public LocaleValues Name { get; set; }
    public LocaleValues Body;
} 
```

在我的`LocaleValues`课堂上，我有：

```
public class LocaleValues : List<LocalizedText>
{
    public string Method
    {
        get
        {
            var res = System.Reflection.MethodBase.GetCurrentMethod().Name;
            return res;
        }
    }
} 
```

当我进行这样的调用时，我需要该`Method`属性返回属性名称的字符串表示形式：`Name`

```
var propName = new News().Name.Method; 
```

我怎样才能做到这一点？感谢您的时间！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T07:32:53.993

如果您真的指的是*当前*属性（问题标题）：

```
public static string GetCallerName([CallerMemberName] string name = null) {
    return name;
}
...

public string Foo {
    get {
        ...
        var myName = GetCallerName(); // "Foo"
        ...
    }
    set { ... }
} 
```

这会将工作推送到编译器而不是运行时，并且无论内联、混淆等如何都可以工作。请注意，这需要C# 5 和 .NET 4.5 或类似的`using`指令。`using System.Runtime.CompilerServices;`

如果你的意思是这个例子：

```
var propName = new News().Name.Method; 
```

那么直接从该语法中是不可能的；`.Name.Method()`会在`.Name`- 的结果上调用某些东西（可能是扩展方法），但这只是另一个对象，对它的来源一无所知（例如`Name`属性）。理想情况下`Name`，表达式树是最简单的方法。

```
Expression<Func<object>> expr = () => new News().Bar;

var name = ((MemberExpression)expr.Body).Member.Name; // "Bar" 
```

可以封装为：

```
public static string GetMemberName(LambdaExpression lambda)
{
    var member = lambda.Body as MemberExpression;
    if (member == null) throw new NotSupportedException(
          "The final part of the lambda is not a member-expression");
    return member.Member.Name;
} 
```

IE

```
Expression<Func<object>> expr = () => new News().Bar;
var name = GetMemberName(expr); // "Bar" 
```

# java - java中如何连接junit和tomcat？

> ID：15333251
> 
> 赞同：0
> 
> 时间：2013-03-11T07:25:56.270
> 
> 标签：java, mysql, tomcat

[我已经使用此链接](https://stackoverflow.com/questions/2299469/how-should-i-connect-to-a-mysql-data-source-from-eclipse)在 tomcat 中配置了 MysqlDataSource 。我已经编写了 junit 测试用例。当我从 junit 调用以下连接时，它会引发以下错误。

```
javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial 
```

我使用了以下代码

```
class DataConnection {
    private static DataSource dataSource;

public DataConnection() {
    try {
        Context ctx = new InitialContext();
        dataSource = (DataSource)ctx.lookup("java:comp/env/jdbc/test");
    } catch (NamingException e) {
       e.printStackTrace(); 
    }
}

public static Connection getConnection() throws SQLException {
    new DataConnection();
      Connection con=dataSource.getConnection();
      return con;
}
} 
```

如何从junit调用tomcat？如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:33:35.673

您提供的代码从 JNDI 获取数据库连接，例如从容器在 tomcat 中运行时。但是，对于单元测试（假设这是您使用 JUnit 的目的），我宁愿建议使用“依赖注入” - 例如，将数据库连接显式传递给被测代码或在测试运行之前手动设置它。

无需依赖 JNDI 来执行您的测试：这不是您想要测试的，相反，您只想验证您的实际代码是否正确运行。

您不需要任何花哨的库（例如 spring）来进行依赖注入，只需稍微调整一下架构即可。这将大大提高应用程序的可测试性并降低测试的执行时间。

（这是基于我根据您在问题中提供的少量信息对您的情况的假设）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-05T11:46:58.530

[试试](https://github.com/h-thurow/TomcatJNDI)TomcatJNDI 。它基于嵌入式 Tomcat，但只初始化 Tomcat 的 JNDI 环境，无需启动服务器。因此，您可以在测试中或从任何 Java SE 应用程序中访问 Tomcat 配置文件中配置的所有资源。API 很简单。例如获取在 context.xml 中声明的 DataSource：

```
TomcatJNDI tomcatJNDI = new TomcatJNDI();
tomcatJNDI.processContextXml(contextXmlFile);
tomcatJNDI.start(); 
```

然后你可以像往常一样查找数据源

```
DataSource ds = (DataSource) InitialContext.doLookup("java:comp/env/path/to/datasource") 
```

[可以在此处找到有关 TomcatJNDI 的更多信息。](https://github.com/h-thurow/TomcatJNDI)

# opencv - opencv中边缘的特征检测

> ID：15333254
> 
> 赞同：0
> 
> 时间：2013-03-11T07:26:05.177
> 
> 标签：opencv, image-processing

是否有任何特征检测器可以很好地匹配以前运行过边缘检测算法的图像？

这个问题的背景是我有两张图像是一个人的嘴巴的 X 光片，但在不同的时间拍摄，例如：a）。新的 X 射线角度略有不同。乙）。牙齿可能略有移动/变化。

我计划使用特征检测来获得一个单应性，这将允许我扭曲第二个图像以与第一个图像对齐，以便我可以比较它们。

这是使用 Canny 边缘检测后的图像之一：

![牙科 X 射线](../Images/10ba7a582cbd095d05fae1ba66d0750d.png)

提前感谢您对特征检测器的任何建议，或者关于我如何解决这个问题的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:34:29.350

你看过 openCV 文档中的例子吗？

[http://docs.opencv.org/doc/tutorials/features2d/feature_detection/feature_detection.html](http://docs.opencv.org/doc/tutorials/features2d/feature_detection/feature_detection.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:02:36.513

我正在做类似的事情，希望这些提示能有所帮助。我用canny将物体取出，并切断背景。然后我在match的阶段使用SURF，不是在canny的输出上，而是在canny的输出基础上处理过的原图。关于edge失败的原因，我认为Misha是对的。

# html - 在画布上绘制图像

> ID：15333256
> 
> 赞同：2
> 
> 时间：2013-03-11T07:26:22.653
> 
> 标签：html, html5-canvas

我正在尝试将图像放在画布上。我阅读了以下教程 [https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Using_images](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Using_images) 并尝试做与我的画布类似的事情`<canvas id="canvas" width="400" height="400"></canvas>` 并且我已经创建了函数

```
 function putImage(){
         var img = new Image();
         img.src = "./path.png"; 
         var ctx = document.getElementById('canvas').getContext('2d');
         ctx.drawImage(img,8,8);            
  } 
```

但图像没有出现在画布上。我已经打印了图像路径并且它是正确的，所以我能够消除这个问题。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T07:51:27.133

根据教程，你应该像这样包裹你的`ctx.drawImage()`内部`img.onload`

```
function draw() {
  var ctx = document.getElementById('canvas').getContext('2d');
  var img = new Image();
  img.onload = function() {
    ctx.drawImage(img, 0, 0);
  };
  img.src = '/files/4531/backdrop.png';
} 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-29T07:28:53.543

添加到哈斯的答案：如果你不喜欢这种`onload`方法，你可以`await`像`Promise`这样：

```
async function draw() {
  let ctx = document.getElementById("canvas").getContext('2d');
  let url = "https://example.com/image.png";
  let img = new Image();
  await new Promise(r => img.onload=r, img.src=url);
  ctx.drawImage(img, 0, 0);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-30T08:59:19.463

如果你不喜欢使用`Promise`或者`onload`你也可以使用[EventListener](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener)：

```
function draw() {
  var ctx = document.getElementById('canvas').getContext('2d');
  var img = new Image();
  img.addEventListener('load', function(){
    ctx.drawImage(img, 0, 0);
  });
  img.src = '/files/4531/backdrop.png';
} 
```

# c++ - 类构造函数初始化？

> ID：15333257
> 
> 赞同：0
> 
> 时间：2013-03-11T07:26:23.040
> 
> 标签：c++, constructor

我正在尝试理解以下代码。（我正在学习 C++）

```
class DefaultDevice : public Device {
  public:
    DefaultDevice() :
      ui(new DefaultUI) {
    }
  private:
    RecoveryUI* ui;
};
class DefaultUI : public ScreenRecoveryUI {
 ...
} 
```

我在理解**ui(new DefaultUI)**部分时遇到了一些麻烦。据我了解，这是执行 DefaultDevice() 构造函数之前初始化的一部分。
然后，据我了解，它将使用**新的 DefaultUI**参数调用 ReocoveryUI 构造函数。但是，RecoveryUI 类没有任何具有此类参数的构造函数。（抱歉没有提出 RecoveryUI 类。它太长了 :( 如果有人感兴趣，它是 Android 开源代码）

那么这个“新的 DefaultUI”有什么作用呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:29:22.977

如果那是有效且有效的代码，它似乎`RecoveryUI`是`DefaultUI`.

`ui(new DefaultUI)`创建一个对象并将其分配给`ui`.

所以，`ui`指向它的子对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:36:54.200

它不在ctor*之前*运行，它是 ctor 的一部分。它称为初始化列表，用于初始化类的（非静态）成员变量。

# c++ - C++ - std::wstring 到 std::string - 快速而肮脏的转换，用作 std::map 中的键

> ID：15333259
> 
> 赞同：6
> 
> 时间：2013-03-11T07:26:31.080
> 
> 标签：c++, stdstring

我正在寻找有关将 a 转换为的最佳方法的一些建议，`std::wstring`但这`std::string`是一种快速而肮脏的转换，可用作`std::map<std::string, int>`对象中的键。

地图很大，并且已经*很好地*集成到项目中，并且只有少数几个键需要这种转换，所以我认为将地图更改为接受`std::wstring`作为键的地图会很浪费。

转换的输出并不重要，但它必须保持一致，以便每次都能可靠地从映射中提取正确的值。

该应用程序是一个仅限 Windows 的应用程序。

是否有任何已知的过程可以为此目的可靠地进行粗略转换？或者最好的方法是通过通常的、适当的转换过程（如这个 SO 问题/答案中所述：[如何将 wstring 转换为字符串？](https://stackoverflow.com/questions/4804298/how-to-convert-wstring-into-string)）？

**编辑：**请记住 -**只要**事情是一致的，丢失信息就可以了。即，如果我输入一些日文字符，并且它们始终转换为相同的（可能是垃圾）`std::string`，那很好。这永远不会用于显示，仅用作从地图中提取值的键。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T07:46:04.090

如果您对内容的语义不感兴趣，而只是为了让内容具有可比性，我将把内部 wchar[] 凝聚成一个大小加倍的 char[] 并用它来初始化字符串（通过指定地址/size 在构造函数中）

```
std::wstring ws(L"ABCD€FG");
std::string s((const char*)&ws[0], sizeof(wchar_t)/sizeof(char)*ws.size()); 
```

现在`s`是不可打印的（它可能包含空字符）但仍然可以分配和比较。

哟可以回去：

```
std::wstring nws((const wchar_t*)&s[0], sizeof(char)/sizeof(wchar_t)*s.size()); 
```

现在比较

```
std::cout << (nws==ws) 
```

应该打印`1`。

但是，请注意，`operator<`由于 0 的存在，地图中的顺序（ 的结果）是......模糊的，并且不反映任何文本语义。但是搜索仍然有效，因为 - 无论多么模糊 - 它仍然是一个“订单”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-23T10:49:15.057

作为一个变体，我会去

```
std::wstring w( L"Some" );
std::string s( w.begin(), w.end() ); 
```

也许另一个答案更快（取决于字符串迭代器的实现），但这对我来说是一种更 std\stl 的方式。但是，是的，这会丢失一些独特的字符。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-11T08:15:11.590

您可以将 std::wstring 转换为 utf-8（使用 WideCharToMultiByte 或类似这个库：[http](http://utfcpp.sourceforge.net/) ://utfcpp.sourceforge.net/ ），即一个以空值结尾的 c-string，然后构造 std::string从中。这种转换是可逆的。

# java - 从战争中移除罐子

> ID：15333260
> 
> 赞同：0
> 
> 时间：2013-03-11T07:26:33.230
> 
> 标签：java, log4j, classloader, war, jboss5.x

当我在 Jboss 5.1 中部署我的战争文件时，我得到：

```
 ERROR [STDERR] log4j:ERROR A "org.jboss.logging.appender.FileAppender" object is not assignable to a "org.apache.log4j.Appender" variable.
 ERROR [STDERR] log4j:ERROR The class "org.apache.log4j.Appender" was loaded by
 ERROR [STDERR] log4j:ERROR [BaseClassLoader@18c1f7d{vfszip:/C:/jboss-5.1.0.GA/server/default/deploy/OnlineUsage.war/}] whereas object of type
 ERROR [STDERR] log4j:ERROR "org.jboss.logging.appender.FileAppender" was loaded by [org.jboss.bootstrap.NoAnnotationURLClassLoader@291aff].
 ERROR [STDERR] log4j:ERROR Could not instantiate appender named "FILE". 
```

即使出现上述错误，我也可以正确点击 ?wsdl URL。

接下来我尝试简单地从war中删除log4j jar文件并成功部署，没有任何错误。得到 ?wsdl 也正确。

我的问题是这是否会在生产或实时（实时错误或绑定错误）中产生问题。

在过去我得到了一个错误`Failed to create SAX Parser`。如果从战争中删除 jar 不是问题，我也可以删除 XercesImpl jar 吗？由于 Jboss 有自己的 jar 文件，我可以避免 Class cast-exceptions。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:28:39.663

为了避免类转换异常，我强烈建议不要将任何 JBoss 或 JDK 提供的 jar 打包到您的 WEB-INF/lib 文件夹中。如果由于某种原因必须这样做，请使用`jboss-classloading.xml`文件的类加载隔离。

这一原则也适用于其他 Java EE 容器（Websphere、Weblogic、GlassFish 等）。您永远不想将 JDK 和容器提供的库打包到您自己的工件中。

您可以使用[JBoss Tattletale](http://www.jboss.org/tattletale)，它是一个很棒的开源工具，可以找出哪些依赖项不能打包到 WAR/EAR 中。

# java - NetBeans 模块中的颠覆操作

> ID：15333261
> 
> 赞同：3
> 
> 时间：2013-03-11T07:26:36.643
> 
> 标签：java, svn, netbeans, module, platform

我正在开发一个 NetBeans 模块，它会定期检查 SVN 的项目提交。我想在不使用鼠标的情况下仅通过该模块中的代码自动更新该项目。我试图搜索一些提示如何使用 Subversion API 而不在项目中创建我自己的弹出窗口，但我没有找到任何东西。

有没有办法只使用代码从 SVN 更新指定的项目？

感谢您的建议，如果有的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:28:59.367

看看这些用于颠覆的 java API：

*   [svnClientAdapter](http://subclipse.tigris.org/svnClientAdapter.html)
*   [svnkit](http://svnkit.com/)

# javascript - 检查代码是否是有效的 JavaScript 而不实际评估它

> ID：15333269
> 
> 赞同：5
> 
> 时间：2013-03-11T07:27:03.780
> 
> 标签：javascript, compilation, eval

是否有一个函数可以在不实际评估的情况下测试一个片段是否是有效的 JavaScript？也就是说，相当于

```
function validate(code){
    try { eval(code); } 
    catch(err) { return false; }
    return true;
}; 
```

没有副作用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-11T07:41:29.197

就在这里。

```
new Function(code); 
```

抛出一个`SyntaxError`if 代码不是有效的 Javascript。（[ECMA-262, edition 5.1, §15.3.2.1](http://www.ecma-international.org/ecma-262/5.1/#sec-15.3.2.1)`code`保证如果不可解析它会抛出异常）。

**注意**：此代码段仅检查语法有效性。例如，由于未定义的引用，代码仍然可以抛出异常。这是一种更难检查的方法：您应该评估代码（并获取其所有副作用）或解析代码并模拟其执行（即在 JS 中编写 JS 虚拟机）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T08:05:53.143

你可以使用[esprima](http://esprima.org)。

> Esprima (esprima.org) 是一个高性能、符合标准的 ECMAScript 解析器，用 ECMAScript（也通常称为 JavaScript）编写。
> 
> 特征
> 
> *   完全支持 ECMAScript 5.1 (ECMA-262)
> *   合理的语法树格式，兼容 Mozilla Parser AST
> *   大量测试（> 550 个单元测试，100% 可靠的语句覆盖率）
> *   语法节点位置的可选跟踪（基于索引和行列）
> *   对 ES6/Harmony 的实验性支持（模块、类、解构，...）

您可以使用[在线语法验证器](http://esprima.org/demo/validate.html)或将其安装为[npm 包](https://npmjs.org/package/esprima)并从命令行在本地运行它。有两个命令：`esparse`和`esvalidate`。`esvalidate`产生（给出上面在线语法验证器的示例）：

```
$ esvalidate foo.js 
foo.js:1: Illegal return statement
foo.js:7: Octal literals are not allowed in strict mode.
foo.js:10: Duplicate data property in object literal not allowed in strict mode
foo.js:10: Strict mode code may not include a with statement 
```

为了完整起见，`esparse`生成一个[AST](http://en.wikipedia.org/wiki/Abstract_syntax_tree)。

# html - html 在所有设备中保持相同的字符大小

> ID：15333272
> 
> 赞同：0
> 
> 时间：2013-03-11T07:27:07.647
> 
> 标签：html, css, fonts, size, resolution

我用几个输入按钮做了一个关于 html 的练习：http:
[//bullmalay.appspot.com/](http://bullmalay.appspot.com/)
我在我的手机上访问它。但我发现文字大小真的很小。我认为原因与分辨率有关。
任何人都可以帮助我了解文字大小吗？我希望它可以在我的笔记本电脑中显示类似的尺寸。

附言。
我搜索了有关 css:@media (min-width: 702px) 的信息，然后设置了字体大小。但是我认为即使是小型设备也可以具有比我的笔记本电脑高的分辨率。尺寸会比我笔记本电脑屏幕上显示的要小。
我认为大小应该是：fontSize *（我的笔记本电脑的每像素宽度）/（该设备的每像素宽度）。但是我对css并不熟悉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:27:21.070

谢谢你们。我学到了很多东西。但我自己找到了原因。
移动设备上的浏览器将自动缩放页面以适应移动屏幕。我只是将这一行添加到 html 中，它可以工作：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:32:12.533

您可以使用类似`@media handheld and (max-width: 500px)`. 但不幸的是，我认为没有办法像使用 CSS

> fontSize *（我的笔记本电脑的每像素宽度）/（该设备的每像素宽度）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T07:33:04.990

到目前为止我们只知道一种方法，你需要做这样的事情

```
@media (max-width: 300px) {
    html { font-size: 70%; }
}

@media (min-width: 500px) {
    html { font-size: 80%; }
}

@media (min-width: 700px) {
    html { font-size: 120%; }
}

@media (min-width: 1200px) {
    html { font-size: 200%; }
} 
```

好吧，您可以做一件事，您可能希望以 pt 单位设置字体大小`(1pt = 1/72 inch)`，这些单位与分辨率无关，并且设计为在任何分辨率下看起来都具有相同的外观大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T07:40:37.260

尝试添加以下代码

```
body{
    -webkit-text-size-adjust: none;
} 
```

# java - 无法从 IOS 应用程序将 NSdictionary 发布到 Java Web 服务

> ID：15333275
> 
> 赞同：0
> 
> 时间：2013-03-11T07:27:22.603
> 
> 标签：java, iphone, objective-c, xcode, web-services

我想将 NSDictionary 发布到基于 Java 的 Web 服务。但是，网络服务没有响应我的呼叫。请通过以下代码：

服务器端代码：（Java Web 服务）：

```
@Consumes("application/json")
    @POST             
    @Path("/SaveChallenge")  
    public String saveChallenge(@QueryParam("jsonChallengeDTO") JSONObject jsonChallengeDTO) {                                              
        String data = "";      
            data = jsonBusiness.createChallenge(jsonChallengeDTO);
        return data;            
    } 
```

客户端代码：（来自IOS移动应用）

```
NSError *error;
    AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

NSData* jsonData = [NSJSONSerialization dataWithJSONObject:appDelegate.userSelection options:kNilOptions error:&error];

 NSString *sendChallengeInfo = [appDelegate.URL stringByAppendingString:[NSString stringWithFormat:@"FirstPickService/SaveChallenge?jsonChallengeDTO=%@",jsonData]];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setURL:[NSURL URLWithString:sendChallengeInfo]];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/json;charset=UTF-8" forHTTPHeaderField:@"Content-Type"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [request setHTTPBody:jsonData];

    [NSURLConnection connectionWithRequest:request delegate:self]; 
```

这`**appDelegate.userSelection**`是我想发布到 Web 服务的 NSMutableDictionary。

当尝试使用 String 时，我们可以将数据发布到 Web 服务，而不是尝试使用 JSon。

请查看并让我知道我错在哪里。

提前致谢，

# java - 已显示合并的术语

> ID：15333278
> 
> 赞同：2
> 
> 时间：2013-03-11T07:27:27.163
> 
> 标签：java

标记文件内容并显示内容但很少有术语被合并在一起并显示的程序？

```
import java.io.*;
import java.util.*;
class JavaApplication1
{
    static HashMap<String,Integer>hTable=new HashMap<String,Integer>();
    static int word,uwords,oncewords;
    public static void main(String args[])throws IOException
    {    

        File folder=new File(File.txt);
        File[] lFile=folder.listFiles();
        int len=lFile.length;
        for(int i=0 ;i<1 ;i++) {
            File file=lFile[i];
            if(file.isFile())  {
                  Scanner scanner=new Scanner(file);
                  String line = null;
                  StringBuilder sb = new StringBuilder();
                  while(scanner.hasNextLine()) {
                         line=scanner.nextLine(); 
                         sb.append(line);
                  }
            // StringTokenizer st=new StringTokenizer(sb.toString(),"</>,?.[/]=()+|");
                StringTokenizer st=new StringTokenizer(sb.toString(),"  </DOC>.,TITLE-\n");
            //System.out.println("*************************");
            while(st.hasMoreTokens())
            {
               String next=st.nextToken();
               word=word+1;     
                if(hTable.containsKey(next))
                {
                    int a=hTable.get(next);
                    hTable.put(next, a+1);
                    uwords++;
                }
            else
                {
                    hTable.put(next,1);
                          System.out.println(next);
                    oncewords++;
                }
             }

           }
            }  
            System.out.println("Total number of tokens in the database is"+word);
            System.out.println("Total number of tokens that are unique in the database are "+ uwords);
            System.out.println("Total number of tokens that occur only once in the database is" +oncewords);

            int count=0;   
            Collection <Integer> setofvalues=hTable.values();
            Object[] Varr=setofvalues.toArray();
            Arrays.sort(Varr,Collections.reverseOrder());
            Set<Object> Set1 = new LinkedHashSet<Object>(Arrays.asList(Varr));
            for (Object i:Set1) 
            {
            for (Map.Entry<String, Integer> entry : hTable.entrySet()) 
            {
          /*  if (i.equals(entry.getValue())&&count<30)
            {
            System.out.println(entry.getKey()+ "=" +entry.getValue());
            count=count+1;
            }*/
            }
            }

            int avg=(word/len);
            System.out.println("The average number of tokens per document" +avg);
            }
                     }

and contents of file are:
<DOC>
<DOCNO>
1
</DOCNO>
<TITLE>
experimental investigation of the aerodynamics of a
wing in a slipstream .
</TITLE>
<AUTHOR>
brenckman,m.
</AUTHOR>
<BIBLIO>
j. ae. scs. 25, 1958, 324.
</BIBLIO>
<TEXT>
  an experimental study of a wing in a propeller slipstream was
made in order to determine the spanwise distribution of the lift
increase due to slipstream at different angles of attack of the wing
and at different free stream to slipstream velocity ratios .  the
results were intended in part as an evaluation basis for different
theoretical treatments of this problem .
  the comparative span loading curves, together with supporting
evidence, showed that a substantial part of the lift increment 
produced by the slipstream was due to a /destalling/ or boundary-layer-control
effect .  the integrated remaining lift increment,
after subtracting this destalling lift, was found to agree
well with a potential flow theory .
  an empirical evaluation of the destalling effects was made for
the specific configuration of the experiment .
</TEXT>
</DOC>

and the output is:
N
1
experimental
investigation
of
the
aerodynamics
awing
in
a
slipstream
AU
H
R
brenckman
m
B
j
ae
scs
25
1958
324
X
an
study
wing
propeller
wasmade
order
to
determine
spanwise
distribution
liftincrease
due
at
different
angles
attack
wingand
free
stream
velocity
ratios
theresults
were
intended
part
as
evaluation
basis
for
differenttheoretical
treatments
this
problem
comparative
span
loading
curves
together
with
supportingevidence
showed
that
substantial
lift
incrementproduced
by
was
destalling
or
boundary
layer
controleffect
integrated
remaining
increment
after
subtracting
found
agreewell
potential
flow
theory
empirical
effects
made
forthe
specific
configuration
experiment
Total number of tokens in the database is151
Total number of tokens that are unique in the database are 58
Total number of tokens that occur only once in the database is93 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:32:05.047

问题似乎出在：

```
 line=scanner.nextLine(); 
  sb.append(line); 
```

将它们读入 sb 时不会在行之间添加空格，因此一行中的最后一个单词会与下一行中的第一个单词合并。

# java - 将位置数据插入现有 msql 数据库的 Android 应用程序

> ID：15333279
> 
> 赞同：1
> 
> 时间：2013-03-11T07:27:28.133
> 
> 标签：java, php, android, mysql

所以我正在开发一个小的 android 应用程序，并且对编码非常陌生。到目前为止，我遵循了一个教程，可以让用户登录/注册，并将该信息存储/检索到 MYSQL 数据库中。问题是我需要添加代码来存储位置，我很困惑。

这是我所拥有的大部分内容，希望能得到一些帮助：

我的数据库设置为：uid - 名称 - 电子邮件 - 密码 - salt - created_at - updated_at - loclat - loclong

主要活动类：

```
public class DashboardActivity extends Activity {

UserFunctions userFunctions;
Button btnLogout;
Button btnloc;
GPSTracker gps;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

         /**
     * Dashboard Screen for the application
     * */
    // Check login status in database
    userFunctions = new UserFunctions();
    if(userFunctions.isUserLoggedIn(getApplicationContext())){

   // user already logged in show databoard
        setContentView(R.layout.dashboard);

        gps = new GPSTracker(DashboardActivity.this);
        if(gps.canGetLocation()){

            double latitude = gps.getLatitude();
            double longitude = gps.getLongitude();

            // \n is for new line
            Toast.makeText(getApplicationContext(), "Your Location is - \nLat: " + latitude + "\nLong: " + longitude, Toast.LENGTH_LONG).show();

        }else{
            // can't get location
            // GPS or Network is not enabled
            // Ask user to enable GPS/network in settings
            gps.showSettingsAlert();
        };

        btnLogout = (Button) findViewById(R.id.btnLogout);

        btnLogout.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                userFunctions.logoutUser(getApplicationContext());
                Intent login = new Intent(getApplicationContext(), LoginActivity.class);
                login.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(login);
                // Closing dashboard screen
                finish();
            }
        });

    }else{
        // user is not logged in show login screen
        Intent login = new Intent(getApplicationContext(), LoginActivity.class);
        login.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(login);
        // Closing dashboard screen
        finish();
    }
}
} 
```

用户函数java文件：

```
public class UserFunctions {

private JSONParser jsonParser;

// Testing in localhost using wamp or xampp
// use http://10.0.2.2/ to connect to your localhost ie http://localhost/
private static String loginURL = "url removed";
private static String registerURL = "url removed";

private static String login_tag = "login";
private static String register_tag = "register";

// constructor
public UserFunctions(){
    jsonParser = new JSONParser();
}

/**
 * function make Login Request
 * @param email
 * @param password
 * */
public JSONObject loginUser(String email, String password){
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", login_tag));
    params.add(new BasicNameValuePair("email", email));
    params.add(new BasicNameValuePair("password", password));
    JSONObject json = jsonParser.getJSONFromUrl(loginURL, params);
    // return json
    // Log.e("JSON", json.toString());
    return json;
}

/**
 * function make Login Request
 * @param name
 * @param email
 * @param password
 * */
public JSONObject registerUser(String name, String email, String password){
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", register_tag));
    params.add(new BasicNameValuePair("name", name));
    params.add(new BasicNameValuePair("email", email));
    params.add(new BasicNameValuePair("password", password));

    // getting JSON Object
    JSONObject json = jsonParser.getJSONFromUrl(registerURL, params);
    // return json
    return json;
}

/**
 * Function get Login status
 * */
public boolean isUserLoggedIn(Context context){
    DatabaseHandler db = new DatabaseHandler(context);
    int count = db.getRowCount();
    if(count > 0){
        // user logged in
        return true;
    }
    return false;
}

/**
 * Function to logout user
 * Reset Database
 * */
public boolean logoutUser(Context context){
    DatabaseHandler db = new DatabaseHandler(context);
    db.resetTables();
    return true;
}

} 
```

JSON文件

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "n");
        }
        is.close();
        json = sb.toString();
        Log.e("JSON", json);
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
} 
```

世界服务

```
public class LocalWordService extends Service {
  private final IBinder mBinder = new MyBinder();
  private ArrayList<String> list = new ArrayList<String>();

  @Override
  public int onStartCommand(Intent intent, int flags, int startId) {

    Random random = new Random();
    if (random.nextBoolean()) {
      list.add("Linux");
    }
    if (random.nextBoolean()) {
      list.add("Android");
    }
    if (random.nextBoolean()) {
      list.add("iPhone");
    }
    if (random.nextBoolean()) {
      list.add("Windows7");
    }
    if (list.size() >= 20) {
      list.remove(0);
    }
    return Service.START_NOT_STICKY;
  }

  @Override
  public IBinder onBind(Intent arg0) {
    return mBinder;
  }

  public class MyBinder extends Binder {
    public LocalWordService getService() {
      return LocalWordService.this;
    }
  }

  public List<String> getWordList() {
    return list;
  }

} 
```

Dbase.php 文件：

```
if (isset($_POST['tag']) && $_POST['tag'] != '') {
// get tag
$tag = $_POST['tag'];

// include db handler
require_once 'include/DB_Functions.php';
$db = new DB_Functions();

// response Array
$response = array("tag" => $tag, "success" => 0, "error" => 0);

// check for tag type
if ($tag == 'login') {
    // Request type is check Login
    $email = $_POST['email'];
    $password = $_POST['password'];

    // check for user
    $user = $db->getUserByEmailAndPassword($email, $password);
    if ($user != false) {
        // user found
        // echo json with success = 1
        $response["success"] = 1;
        $response["uid"] = $user["unique_id"];
        $response["user"]["name"] = $user["name"];
        $response["user"]["email"] = $user["email"];
        $response["user"]["created_at"] = $user["created_at"];
        $response["user"]["updated_at"] = $user["updated_at"];
        echo json_encode($response);
    } else {
        // user not found
        // echo json with error = 1
        $response["error"] = 1;
        $response["error_msg"] = "Incorrect email or password!";
        echo json_encode($response);
    }
} else if ($tag == 'register') {
    // Request type is Register new user
    $name = $_POST['name'];
    $email = $_POST['email'];
    $password = $_POST['password'];

    // check if user is already existed
    if ($db->isUserExisted($email)) {
        // user is already existed - error response
        $response["error"] = 2;
        $response["error_msg"] = "User already existed";
        echo json_encode($response);
    } else {
        // store user
        $user = $db->storeUser($name, $email, $password);
        if ($user) {
            // user stored successfully
            $response["success"] = 1;
            $response["uid"] = $user["unique_id"];
            $response["user"]["name"] = $user["name"];
            $response["user"]["email"] = $user["email"];
            $response["user"]["created_at"] = $user["created_at"];
            $response["user"]["updated_at"] = $user["updated_at"];
            echo json_encode($response);
        } else {
            // user failed to store
            $response["error"] = 1;
            $response["error_msg"] = "Error occured in Registartion";
            echo json_encode($response);
        }
    }
} else {
    echo "Invalid Request";
}
} else {
echo "Access Denied";
}
?> 
```

DB_Connect.php

```
<?php
class DB_Connect {

// constructor
function __construct() {

}

// destructor
function __destruct() {
    // $this->close();
}

// Connecting to database
public function connect() {
    require_once 'include/config.php';
    // connecting to mysql
    $con = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
    // selecting database
    mysql_select_db(DB_DATABASE);

    // return database handler
    return $con;
}

// Closing database connection
public function close() {
    mysql_close();
}

}

?> 
```

DB_Functions.php

```
<?php

class DB_Functions {

private $db;

//put your code here
// constructor
function __construct() {
    require_once 'DB_Connect.php';
    // connecting to database
    $this->db = new DB_Connect();
    $this->db->connect();
}

// destructor
function __destruct() {

}

/**
 * Storing new user
 * returns user details
 */
public function storeUser($name, $email, $password) {
    $uuid = uniqid('', true);
    $hash = $this->hashSSHA($password);
    $encrypted_password = $hash["encrypted"]; // encrypted password
    $salt = $hash["salt"]; // salt
    $result = mysql_query("INSERT INTO users(unique_id, name, email, encrypted_password, salt, created_at) VALUES('$uuid', '$name', '$email', '$encrypted_password', '$salt', NOW())");
    // check for successful store
    if ($result) {
        // get user details 
        $uid = mysql_insert_id(); // last inserted id
        $result = mysql_query("SELECT * FROM users WHERE uid = $uid");
        // return user details
        return mysql_fetch_array($result);
    } else {
        return false;
    }
}

/**
 * Get user by email and password
 */
public function getUserByEmailAndPassword($email, $password) {
    $result = mysql_query("SELECT * FROM users WHERE email = '$email'") or die(mysql_error());
    // check for result 
    $no_of_rows = mysql_num_rows($result);
    if ($no_of_rows > 0) {
        $result = mysql_fetch_array($result);
        $salt = $result['salt'];
        $encrypted_password = $result['encrypted_password'];
        $hash = $this->checkhashSSHA($salt, $password);
        // check for password equality
        if ($encrypted_password == $hash) {
            // user authentication details are correct
            return $result;
        }
    } else {
        // user not found
        return false;
    }
}

/**
 * Check user is existed or not
 */
public function isUserExisted($email) {
    $result = mysql_query("SELECT email from users WHERE email = '$email'");
    $no_of_rows = mysql_num_rows($result);
    if ($no_of_rows > 0) {
        // user existed 
        return true;
    } else {
        // user not existed
        return false;
    }
}

/**
 * Encrypting password
 * @param password
 * returns salt and encrypted password
 */
public function hashSSHA($password) {

    $salt = sha1(rand());
    $salt = substr($salt, 0, 10);
    $encrypted = base64_encode(sha1($password . $salt, true) . $salt);
    $hash = array("salt" => $salt, "encrypted" => $encrypted);
    return $hash;
}

/**
 * Decrypting password
 * @param salt, password
 * returns hash string
 */
public function checkhashSSHA($salt, $password) {

    $hash = base64_encode(sha1($password . $salt, true) . $salt);

    return $hash;
}

}

?> 
```

对不起，代码墙，但我只是不确定什么是有用的，什么是没有帮助的。如何使用主要活动的 oncreate 将纬度和经度插入数据库？我得到纬度和经度就好了，登录时连接到数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:19:24.160

我对您的课程进行了一些重要的修改，以使他们更好地工作。

**PHP**

DB_Functions.php

我添加了一个新功能，以便我们可以对用户表进行更新。

```
 /**
     * Update user by email and password
     */
    public function updateUserByEmailAndPassword($email, $password, $lon, $lat) {
      $user = $this -> getUserByEmailAndPassword($email, $password);
        if ($user != false) {   
            $unique_id=$user["unique_id"];
            mysql_query("UPDATE users SET loclong='$lon', loclat='$lat', updated_at=now() WHERE unique_id='$unique_id'") or die(mysql_error());
            $affected = mysql_affected_rows();
            if($affected > 0){
             return true;
           } else {
            return false;
           }
        }else{
         return false;
        }
    } 
```

**Dbase.php** 我添加了一个新标签="update_location" 来接收和管理用户更新的 POST 请求

```
else if ($tag == 'update_location') { // check for tag type
        // Request type is check Login
        $email = $_POST['email'];
        $password = $_POST['password'];

        // Request lon/lat
        $lon = $_POST['lon'];
        $lat = $_POST['lat'];

        // check for user
        $state = $db->UpdateUserByEmailAndPassword($email, $password, $lon, $lat);
        if ($state != false) {
            $response["success"] = 1;
            $response["success_msg"] = "Geo location data update successfull!";
            echo json_encode($response);
        } else {
            // user not found
            // echo json with error = 1
            $response["error"] = 1;
            $response["error_msg"] = "Geo location data update failed!";
            echo json_encode($response);
        }
    } 
```

我还对您的 database.table (users) 做了一些更改，因为经度/纬度不是整数替换

```
 `loclat` int(11) NOT NULL,
 `loclong` int(11) NOT NULL 
```

和

```
`loclat` varchar(11) NOT NULL,
`loclong` varchar(11) NOT NULL, 
```

最多的修改是在 DashboardActivity 中进行的。看看里面，如果你有问题随时问我。

```
public class DashboardActivity extends Activity {

   public static String USER_FUNCTIONS = "user functions";
   private static String KEY_SUCCESS = "success";

   /**
    * Millisecondes
    */
   private static int POLLING_WAITING_TIME = 5 * 1000;
   UserFunctions mUserFunctions;
   Button btnLogout;
   Button btnloc;
   GPSTracker gps;

   private Handler mHandler;
   private Runnable mRunnable;

   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.dashboard);

      Bundle extras = getIntent().getExtras();
      if (extras != null) {
         if (extras.containsKey(USER_FUNCTIONS)) {
            mUserFunctions = (UserFunctions) extras.getSerializable(USER_FUNCTIONS);
         }
      }
      toggleActivities();
   }

   @Override
   protected void onResume() {
      super.onResume();
      toggleActivities();
   }

   /**
    * 
    */
   private void toggleActivities() {
      // Check login status in database
      if (mUserFunctions != null && mUserFunctions.isUserLoggedIn(getApplicationContext())) {
         // user already logged in show databoard

         btnLogout = (Button) findViewById(R.id.btnLogout);
         btnLogout.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
               // TODO Auto-generated method stub
               mUserFunctions.logoutUser(getApplicationContext());
               Intent login = new Intent(getApplicationContext(), LoginActivity.class);
               login.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
               startActivity(login);
               // Closing dashboard screen
               finish();
            }
         });

      } else {
         // user is not logged in show login screen
         Intent login = new Intent(getApplicationContext(), LoginActivity.class);
         login.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
         startActivity(login);
         // Closing dashboard screen
         finish();
      }
      // startTimer
      timer();
   }

   /**
    * managed HandlerManger and controls the timer
    */
   private void timer() {
      mRunnable = new HandlerManger();
      mHandler = new Handler();
      mHandler.postDelayed(mRunnable, POLLING_WAITING_TIME);
   }

   /**
    * 
    */
   private void processGPSTracker() {
      if (mUserFunctions == null || !mUserFunctions.isUserLoggedIn(getApplicationContext()))
         return;

      gps = new GPSTracker(DashboardActivity.this);
      if (gps.canGetLocation()) {

         double latitude = gps.getLatitude();
         double longitude = gps.getLongitude();

         JSONObject json = mUserFunctions.updateUserGeoLocation(Double.valueOf(longitude)
               .toString(), Double.valueOf(latitude).toString());

         // check for login response
         try {
            if (json.getString(KEY_SUCCESS) != null && json.getString(KEY_SUCCESS).equals("1")) {
               Log.i("DashboardActivity", "Update on geolocation success");
            } else {
               Log.e("DashboardActivity", "Update on geolocation Failed");
            }
         } catch (JSONException e) {
            e.printStackTrace();
         }

         // \n is for new line
         Toast.makeText(getApplicationContext(),
               "Your Location is - \nLat: " + latitude + "\nLong: " + longitude, Toast.LENGTH_LONG)
               .show();

      } else {
         // can't get location
         // GPS or Network is not enabled
         // Ask user to enable GPS/network in settings
         gps.showSettingsAlert();
      }
   }

   /**
    * Timer business logic runner
    * 
    * @author Festus Tamakloe
    */
   private class HandlerManger implements Runnable {

      public void run() {
         processGPSTracker();
      }

   }
} 
```

在 userFunctions 中，我还添加了一种与 http 服务器通信的新方法

```
 public JSONObject updateUserGeoLocation(String lon, String lat) {
      // Building Parameters
      List<NameValuePair> params = new ArrayList<NameValuePair>();
      params.add(new BasicNameValuePair("tag", LOCATION_UPDATE_TAG));
      params.add(new BasicNameValuePair("email", email));
      params.add(new BasicNameValuePair("password", password));
      params.add(new BasicNameValuePair("lon", lon));
      params.add(new BasicNameValuePair("lat", lat));
      JSONObject json = jsonParser.getJSONFromUrl(LOCATION_UPDATE_URL, params);
      return json;
   } 
```

我希望这可以帮助你

# libcurl - libcurl http 发布超时

> ID：15333290
> 
> 赞同：1
> 
> 时间：2013-03-11T07:28:16.117
> 
> 标签：libcurl

我在多线程环境中使用 curl 版本 7.15.5。每个线程都在初始化和释放自己的 curl 对象。下面是为每个线程执行的代码：

```
CURL* curl = curl_easy_init();

tRespBuffer respBuffer = {NULL, 0};
char errorBuf[CURL_ERROR_SIZE +1];
struct curl_slist *headers=NULL;
headers = curl_slist_append(headers, "Content-Type: text/xml; charset=gbk");
headers = curl_slist_append(headers, "Expect:");

curl_easy_setopt(curl, CURLOPT_URL, url_);

curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);
curl_easy_setopt(curl, CURLOPT_POSTFIELDS,encr.c_str());
curl_easy_setopt(curl, CURLOPT_POSTFIELDSIZE,strlen(encr.c_str()));
curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, HttpSmsServer::processHttpResponse);
curl_easy_setopt(curl, CURLOPT_WRITEDATA, (void*)&respBuffer);
curl_easy_setopt(curl, CURLOPT_TIMEOUT, 20);  // wait for 20 seconds before aborting the transacttion
curl_easy_setopt(curl, CURLOPT_ERRORBUFFER, errorBuf);  // error returned if any..
curl_easy_setopt(curl, CURLOPT_NOSIGNAL, 1);  // No signals allowed in case of multithreaded apps

res = curl_easy_perform(curl);

curl_slist_free_all(headers);
curl_easy_cleanup(curl); 
```

所有四个线程都同时将数据发布到 http 服务器。我看到一些 POST 请求（约 3% 的请求）的 HTTP 响应超时。知道超时的原因是什么吗？我假设 http 服务器的响应时间不应超过 20 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T08:29:53.637

CURLOPT_TIMEOUT 包含了http请求的所有时间，你传输过大数据吗？

CURLOPT_TIMEOUT：传递一个 long as 参数，其中包含您允许 libcurl 传输操作花费的最长时间（以秒为单位）。通常，名称查找可能需要相当长的时间，并且将操作限制在不到几分钟的时间内可能会中止完全正常的操作。

# java - 抓取网站

> ID：15333304
> 
> 赞同：1
> 
> 时间：2013-03-11T07:29:07.200
> 
> 标签：java, web-scraping, jsoup

我正在尝试编写一个警报系统来定期抓取投诉委员会网站，以查找有关我的产品的任何投诉。我正在使用 Jsoup。下面是给我错误的代码片段。

```
doc = Jsoup.connect(finalUrl).timeout(10 * 1000).get(); 
```

这给了我错误

```
java.net.SocketException: Unexpected end of file from server 
```

当我在浏览器中复制粘贴相同的 finalUrl 字符串时，它可以工作。然后我尝试了简单的 URL 连接

```
 BufferedReader br = null;
            try {
                URL a = new URL(finalUrl);
                URLConnection conn = a.openConnection();

                // open the stream and put it into BufferedReader
                br = new BufferedReader(new InputStreamReader(
                        conn.getInputStream()));
                doc = Jsoup.parse(br.toString());
            } catch (IOException e) {
                e.printStackTrace();
            } 
```

但事实证明，连接本身返回 null（br 为 null）。现在的问题是，为什么在浏览器中复制粘贴时相同的字符串会打开站点而没有任何错误？

完整的堆栈跟踪如下：

```
java.net.SocketException: Unexpected end of file from server
    at sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:774)
    at sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:633)
    at sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:771)
    at sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:633)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1195)
    at ComplaintsBoardScraper.main(ComplaintsBoardScraper.java:46) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:21:04.840

那个很棘手！:-)

服务器阻止所有没有正确*用户代理*的请求。这就是为什么您使用浏览器成功但使用 Java 失败的原因。

幸运的是，在 jsoup 中更改用户代理并不是一件大事：

```
final String url = "http://www.complaintsboard.com/?search=justanswer.com&complaints=Complaints";
final String userAgent = "Mozilla/5.0 (X11; U; Linux i586; en-US; rv:1.7.3) Gecko/20040924 Epiphany/1.4.4 (Ubuntu)";

Document doc = Jsoup.connect(url) // you get a 'Connection' object here
                        .userAgent(userAgent) // ! set the user agent
                        .timeout(10 * 1000) // set timeout
                        .get(); // execute GET request 
```

我已经使用了我发现的第一个用户代理……我想您也可以使用任何有效的用户代理。

# c++ - 定义 boost::dynamic_bitset 的（一/二）维数组

> ID：15333309
> 
> 赞同：1
> 
> 时间：2013-03-11T07:29:23.737
> 
> 标签：c++, boost, boost-dynamic-bitset

有没有办法在 boost 中有一个 dynamic_bitset 数组？我希望能够同时拥有一维和二维数组——谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:19:43.680

如果您可以使用可能会更好的[std::vector并且是的，您可以同时使用这两种方法，这是一个示例（](http://en.cppreference.com/w/cpp/container/vector)*[现场查看](http://coliru.stacked-crooked.com/a/18c9fb9c8338d71a)*）：

```
#include <iostream>
#include <vector>
#include <boost/dynamic_bitset.hpp>

int main()
{
    std::vector<boost::dynamic_bitset<> > v(10, boost::dynamic_bitset<>(3));

    std::cout << v[0] << std::endl ;

    v[0][2] = 1 ;

    std::cout << v[0] << std::endl ;

    std::vector< std::vector<boost::dynamic_bitset<> > > vv(3, std::vector<boost::dynamic_bitset<> >( 3, boost::dynamic_bitset<>(3)) );

    std::cout << vv[0][0] << std::endl ;

    vv[0][0][1] = 1 ;

    std::cout << vv[0][0] << std::endl ;
} 
```

This previous thread is a good read too, [Creating vector of boost dynamic_bitset in C++](https://stackoverflow.com/questions/12133950/creating-vector-of-boost-dynamic-bitset-in-c)。

# haml - 在 Grunt 的 Ruby 环境之外使用 HAML 或 Slim？

> ID：15333310
> 
> 赞同：1
> 
> 时间：2013-03-11T07:29:25.280
> 
> 标签：haml, gruntjs, slim-lang

我是一名前端开发人员，主要与 PHP 开发人员合作，最近我在考虑使用 HAML 或 Slim 来编写我处理给他们的 HTML 模板，而不是纯 HTML。

但我知道他们需要 Ruby/Node 才能使用它们，所以我的问题是如何“如果可能”将它们与 Grunt 一起使用并利用循环、条件等。而不是在 Ruby 环境中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:44:14.210

有几种 HAML 编译器适用于所有类型的语言。对于 PHP，我可以建议您查看[MtHaml](https://github.com/arnaud-lb/MtHaml)，效果非常好，如果您愿意，可以使用 twig 等。

# css - @media 打印 css 问题

> ID：15333311
> 
> 赞同：3
> 
> 时间：2013-03-11T07:29:31.090
> 
> 标签：css, height

我添加了这样的媒体打印 css

```
@media print
{
    div#file1 {
        height: 100%!important;
        overflow: scroll;
    }
} 
```

问题是它在 Firefox 中工作正常，但在打印时不能在 Chrome 中工作。它不需要铬的高度。当我尝试将 min-height: 100% 分配给 div 时，它正在工作，但仅在滚动后打印可见区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:41:43.870

你已经指定你想要一个滚动条在你的 div 上以及通常在浏览器上的滚动条，这可以这样做：

```
 @media print { 
       div#file1{ 
           height: 100%!important; 
           overflow: -moz-scrollbars-vertical;
           overflow-y: scroll;
           overflow-x: hidden;
        } 
 } 
```

这将解决您的问题

# linux - 如何更改主题上唯一消息的 cron 输出电子邮件？

> ID：15333312
> 
> 赞同：0
> 
> 时间：2013-03-11T07:29:34.050
> 
> 标签：linux, cron

我有一个每 4 小时运行一次的 cron 作业。当它在输出的 gmail.com 中向我发送电子邮件时，它会对其进行线程化，并且很难查看最新消息或特定消息。

```
0 0,4,8,12,16,20 * * * /root/backup.sh #Backup of server 
```

是否可以让 cron 作业中的“描述”字段插入“日期”命令输出，以便它不仅在主题中对其进行时间戳记，而且使其独一无二，因此来自同一 cron 作业的消息不会串连在一起？

也许是这样的？0 0,4,8,12,16,20 * * * /root/backup.sh #'服务器的备份；日期'谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:03:36.100

You can use **`date +"%Y_%m_%d_%H:%M:%S"`** in the shell file where you are setting the description of the mail. see [this](http://www.cyberciti.biz/faq/unix-date-command-howto-see-set-date-time/)

If you want to specify `date` in your cron then you can try below syntax

```
0 */4 * * * yourshellscript.sh backup_server_`date +"%Y_%m_%d:%H:%M:%S"` 
```

**Remember** if you are using `mail -s "your subject"` kind of mail sending then you have to **escape doublequotes** in the `date` command i mentioned above.
FYR see below

```
mail -s "backup_server_`date +\"%Y_%m_%d:%H:%M:%S\"`" ur_id@example.com < myfile.txt 
```

Here **myfile.txt** contains the mail body.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:50:29.320

您可能有一个脚本，它不会向*stderr*或*stdout*本身提供任何输出（然后`cron`不会发送任何电子邮件）。

该脚本可以显式发送电子邮件，例如使用`mail -s "some subject"`; 你也可以`logger`用来写日志信息。你可能想要类似的东西`mail -s $(date +"backup %D")`

您的`crontab`条目可以重定向输出，例如`/root/betterbackup.sh > /dev/null 2>&1`，您明确确保完成`betterbackup.sh`了适当的邮件和日志。

# python - Python：列出输入数字之前存在的所有素数

> ID：15333313
> 
> 赞同：-2
> 
> 时间：2013-03-11T07:29:43.253
> 
> 标签：python, loops, numbers, nested

```
n= int(raw_input("Number? "))
for x in range (2, n+1): 
    for y in range (2, x+1):
    if x < n+1 and x % 2.0 > 0 and x % 3.0 > 0 and x%y > 0:
            print x
            x = x + 1 
```

你好呀。我需要创建一个简单的 python 程序，它列出了所有质数，包括输入数。例如，如果你输入 10，它会产生 2, 3, 5 ,7

我宁愿保持简单，不要使用更高级的函数，如 def、break。嵌套循环是首选。

上面的代码不起作用，它包含非素数，例如 25 和 91。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:32:57.080

您的代码得出结论，如果一个数字不能被*至少 one*`x`整除，则它是素数，而它需要检查它是否不能被*all*整除。 *`y` *`y`**

 **您还需要仔细检查`y`循环的边界。

在旁注中，我建议您摆脱浮点计算（例如`x % 2.0`）并坚持整数数学。在这里*可能*无关紧要，但有可能打开一大罐蠕虫。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:52:32.163

你必须扭转你的想法。只要它不是某个 y 的倍数，您的代码就会报告一个数字。相反，一旦某个数字是某个 y的**倍数，您就不应该****报告它。**

 **```
n= int(raw_input("Number? "))
for x in range (2, n + 1):
    prime= True
    for y in range (2, x):
        if x % y == 0:
            prime= False
    if prime:
        print x 
```****

# java - 如何将 Joda-Time DateTime 转换为 java.util.Date ，反之亦然？

> ID：15333320
> 
> 赞同：73
> 
> 时间：2013-03-11T07:30:05.077
> 
> 标签：java, datetime, jodatime, java.util.date

有可能这样做吗？如果是，那么我如何进行从[Joda-Time](http://www.joda.org/joda-time/)到[Date](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)的转换，反之亦然？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-03-11T07:33:48.180

要将[Java`Date`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)转换为[Joda`DateTime`](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html)：-

```
Date date = new Date();
DateTime dateTime = new DateTime(date); 
```

反之亦然：-

```
Date dateNew = dateTime.toDate(); 
```

如果需要，使用`TimeZone`：-

```
DateTime dateTimeNew = new DateTime(date.getTime(), timeZone);
Date dateTimeZone = dateTime.toDateTimeAtStartOfDay(timeZone).toDate(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T07:36:17.427

您尚未指定您感兴趣的 Joda Time 中的哪种类型，但是：

```
Instant instant = ...;
Date date = instant.toDate();
instant = new Instant(date);
// Or...
instant = new Instant(date.getTime()); 
```

两者都与时区`Date`无关`Instant`，因此无需在此处指定。

`LocalDateTime`从/ `LocalDate`/转换`LocalTime`为`Date`（反之亦然）是没有意义的，因为这取决于所应用的时区。

with`DateTime`你可以不指定时区转换*成*a `Date`，但是要转换`Date`成`DateTime`你应该指定时区，否则它将使用系统默认时区。（如果您真的*想要*，我会明确指定它以明确表示这是一个深思熟虑的选择。）

例如：

```
DateTimeZone zone = DateTimeZone.forID("Europe/London");
Date date = ...;
DateTime dateTime = new DateTime(date.getTime(), zone); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T07:36:05.997

**将 Java 日期转换为 Joda 日期时间：**
需要指定从日期转换为 DateTime 时区。
要将 java.util 日期转换为 Joda 日期时间，您只需将 java.util 日期和时区传递给 Joda 日期时间的构造函数。

```
java.util.Date date = new java.util.Date(System.currentTimeMillis());
DateTimeZone dtz = DateTimeZone.getDefault();// Gets the default time zone.
DateTime dateTime = new DateTime(date.getTime(), dtz); 
```

**从 Joda 日期时间转换为 Java 日期：**
对于相反的情况，Joda DateTime 有一个方法`toDate()`将返回 java.util 日期。

```
DateTime jodaDate = new DateTime();
java.util.Date date = jodaDate.toDate(); 
```

欲了解更多详情，请[访问这里](http://joda-time.sourceforge.net/userguide.html)

# speech-recognition - 我们可以将 htk 用于听写之类的应用程序吗？

> ID：15333321
> 
> 赞同：0
> 
> 时间：2013-03-11T07:30:05.077
> 
> 标签：speech-recognition, htk, dictation

我想为听写之类的应用程序构建语音识别系统。我阅读了 htk book 和其他教程，但所有教程都是针对命令和控制之类的应用程序。对于这些应用程序，命令集、字数有限，并且是使用任务语法（`gram`文件）手动指定的。

在我的应用程序中，无法指定这样的语法，因为我将处理包含两个人之间对话的巨大音频文件。

所以我想知道是否可以使用 htk 构建这样的应用程序。

谢谢...

* * *

**睡了很多晚后更新**

我使用 Sphinx 获得了 86% 的准确率。语言模型存在一些问题（我不知道它到底出了什么问题，我正在努力找出它）所以我使用 Sphinx 创建了新的语言模型`lmtool`，这是一个基于 Web 的语言模型生成服务。您可以使用[此链接获取它](http://www.speech.cs.cmu.edu/tools/lmtool-new.html)

此外，我已将声学模型从 HUB 更改为 WSJ。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:29:27.060

是的你可以。为此目的有两个解码器：

[攻击力](http://htk.eng.cam.ac.uk/develop/atk.shtml)

和

[朱利叶斯](http://julius.sourceforge.jp/en_index.php)

两者都需要您为大词汇量语音识别提供语言模型

我还建议您查看[CMUSphinx](http://cmusphinx.sourceforge.net)，它更易于使用

# entity-framework - 在 ASP.NET MVC 4 中使用 SimpleMembership 时如何填充自定义属性表

> ID：15333324
> 
> 赞同：1
> 
> 时间：2013-03-11T07:30:19.293
> 
> 标签：entity-framework, asp.net-mvc-4, simplemembership

我开始研究一个 MVC 项目，该项目有 3 种类型的用户（客户、服务提供商和管理员），具有不同的特定属性。我想在 Visual Studio 2012 的 ASP.NET MVC Web 应用程序 Internet 应用程序模板中扩展默认的 SimpleMembership 实现。

我有 Customer 类（不确定 Key 属性和关系）

```
public class Customer
{
    [Key]
    public string UserName { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Phone { get; set; }

    public virtual UserProfile UserProfile { get; set; }
} 
```

并在 SQL Server Express 中有 Customer 表：

```
CREATE TABLE [dbo].[Customer]
(
    [UserName] NVARCHAR(MAX) NOT NULL, 
    [FirstName] NVARCHAR(50) NOT NULL, 
    [LastName] NVARCHAR(50) NOT NULL, 
    [Phone] NVARCHAR(50) NULL
) 
```

实体框架上下文：

```
public class UsersContext : DbContext
{
    public UsersContext() : base("DefaultConnection")
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }

    public DbSet<Customer> Customers { get; set; }
} 
```

我应该在下面添加什么代码以使 Customer 表与 UserProfile 表一起填充？

```
// Attempt to register the user
try
{
     WebSecurity.CreateUserAndAccount(model.UserName, model.Password);

     WebSecurity.Login(model.UserName, model.Password);
     return RedirectToAction("Index", "Home");
 } 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:10:05.950

我从 Customer 类中删除了该行：

```
public virtual UserProfile UserProfile { get; set; } 
```

客户类现在变为：

```
public class Customer
{
    [Key]
    public string UserName { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Phone { get; set; }
} 
```

并将以下代码添加到 AccountController 的 Register 方法中：

```
try
{
     WebSecurity.CreateUserAndAccount(model.UserName, model.Password);

     Customer cust = new Customer
     {
         UserName = model.UserName,
         FirstName = "Dikembe",
         LastName = "Mutombo",
         Phone = model.Phone
     };                  
     UsersContext context = new UsersContext();
     context.Customer.Add(cust);
     context.SaveChanges();

     WebSecurity.Login(model.UserName, model.Password);
     return RedirectToAction("Index", "Home");
} 
```

# c# - 使用 C# 的正则表达式

> ID：15333327
> 
> 赞同：4
> 
> 时间：2013-03-11T07:30:36.613
> 
> 标签：c#

这是我的输入：

> 27:15 利百加把家里的长子以扫穿上好衣服，给小儿子雅各穿上。 27:16 又把山羊皮穿在27:17 她把肉和她所预备的饼都交在她儿子雅各的手里。

这里 ^p 是输入。

它应该像`27:15 contents`一行和`27:16 contents`另一行一样添加到数据库中......

使用正则表达式我试过：

```
var m = Regex.Match(line, @"\n\d+:");
if (m.Success)
 {
   html = html.Replace(m.Value, "</p>\n<p>" + m.Value);
 } 
```

我的输出是这样的：

```
2
7:15 contents 
```

我想存储`27:15 contents`..我已经尝试过但没有得到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:40:26.277

使用以下正则表达式

```
(\d+:\d+)* 
```

您可以立即在此站点上测试输出。

**[正则表达式伙伴](http://regexpal.com/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:35:43.303

我建议你改变你的正则表达式

```
var m = Regex.Match(line, @"\d+:\d+") 
```

它会在 27:15 回复你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T07:32:33.190

尝试这个

```
var m = Regex.Match(line, @"(( )?\d+:\d+)") 
```

# cordova - Share 类型的方法 execute(String, JSONArray, String) 必须覆盖或实现超类型方法

> ID：15333329
> 
> 赞同：2
> 
> 时间：2013-03-11T07:30:44.180
> 
> 标签：cordova, share, phonegap-plugins

我正在使用cordova-2.4.0，当我将“share”插件添加到“src”时，我收到错误“Share 类型的方法 execute(String, JSONArray, String) 必须覆盖或实现超类型方法”。我不知道如何解决这个 Java 错误。我收到错误的Java文件的代码是：

```
 /**
 * 
 * Phonegap share plugin for Android
 * Kevin Schaul 2011
 *
 */

package com.schaul.plugins.share;

import org.apache.cordova.api.CordovaPlugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.content.Intent;

public class Share extends CordovaPlugin {

    @Override
    public PluginResult execute(String action, JSONArray args, String callbackId) {
        try {
            JSONObject jo = args.getJSONObject(0);
            doSendIntent(jo.getString("subject"), jo.getString("text")); 
            return new PluginResult(PluginResult.Status.OK);
        } catch (JSONException e) {
            return new PluginResult(PluginResult.Status.JSON_EXCEPTION);
        }
    }

    private void doSendIntent(String subject, String text) {
        Intent sendIntent = new Intent(android.content.Intent.ACTION_SEND);
        sendIntent.setType("text/plain");
        sendIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
        sendIntent.putExtra(android.content.Intent.EXTRA_TEXT, text);
        this.cordova.startActivityForResult(this, sendIntent, 0);
    }

} 
```

# visual-c++ - 在不安装 Visual Studio 2012 的情况下安装 PlatformToolset v110

> ID：15333340
> 
> 赞同：22
> 
> 时间：2013-03-11T07:31:09.420
> 
> 标签：visual-c++, visual-studio-2012, msbuild

我们有一个包含一些 VC++ 项目的 Visual Studio 解决方案，我们目前已从 VS2010 升级到 Visual Studio 2012。在此过程中，我们还将 VC++ 项目提升到 PlatformToolset v110。

在我们的构建服务器 (Jenkins) 上，我们希望使用 MsBuild 构建这个项目，而无需安装 VS2012。但我无法让它工作，我认为这是因为文件夹**C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110**必须存在。

此文件夹及其内容是在安装 VS2012 期间创建的，但据我所知，它不会包含在 Windows SDK 7.1 或 Windows SDK 8.0 中？

是否有任何其他 SDK 或安装包可以帮助解决此问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-26T10:44:17.457

我知道不是*真的*没有安装 Visual Studio 2012，但是：

如果许可成本是最大的驱动因素，那么[Express for Windows 桌面](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-desktop#product-express-desktop)版可能是一个替代方案。您可以将安装保持在支持 C++ 构建所需的最低限度。

# android - 编辑Android中提到的文本高度时调整平移不起作用

> ID：15333346
> 
> 赞同：5
> 
> 时间：2013-03-11T07:31:52.987
> 
> 标签：android, android-edittext, android-keypad

我在活动中使用了adjustpan，它在简单的单行编辑文本时滚动完美但是，它在多行edittext中无法正常工作，其高度如下所示ediitext xml布局

```
 <EditText
            android:id="@+id/txt_feedback"
            android:layout_width="400dp"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/txt_to"
            android:layout_alignRight="@+id/txt_to"
            android:ems="10"
            android:gravity="top|left"
            android:inputType="textMultiLine"
            android:lines="8"
            android:maxLength="160"
            android:minLines="6"
            android:scrollbars="vertical"
            android:background="@drawable/textboxborder"
            android:padding="2dp"
            android:singleLine="false"
            android:layout_marginTop="5dp"
            android:visibility="gone"
            android:hint="-- Your Comments --"
            android:layout_marginLeft="40dp" /> 
```

对于下面的当前输出，如屏幕： ![在此处输入图像描述](../Images/231762a63086b6d397c185a7b72c4e2f.png)

我是例外的输出，如下面的屏幕：

![在此处输入图像描述](../Images/90823b6e028006187bc8b78112e5d846.png)

以及如何做到这一点有人帮助我？

谢谢 ：）

# linux - 构建 32 位 x86 Linux 内核

> ID：15333348
> 
> 赞同：1
> 
> 时间：2013-03-11T07:31:59.727
> 
> 标签：linux, kernel

我正在使用 buildroot 开发我自己定制的 Linux 系统。我正在尝试为 x86 构建内核。当我尝试使用交叉编译内核时

```
make CROSS_COMPILE = i686 - linux - ARCH = i386
make: *** empty variable name.  Stop. 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:37:57.797

您至少需要删除空格

```
 make CROSS_COMPILE=i686-linux ARCH=i386 
```

但我不确定这是否足够。阅读[GNU make 文档](http://www.gnu.org/software/make/manual/make.html)。

# xalan - XalanInitialize() 返回的 int 的解释？

> ID：15333350
> 
> 赞同：0
> 
> 时间：2013-03-11T07:32:11.350
> 
> 标签：xalan, xerces-c

我正在使用 XALAN 从 xsl 转换为 html，

以下是代码片段，

```
 //
    //  XALAN_USING_XERCES(XMLPlatformUtils), init namespace
    //
    XALAN_USING_XALAN(XalanTransformer)

    //
    //  2\. Initialize Xalan and Xerces
    //
    iRet = XalanInitialize(); 
```

我应该如何使用它`iRet`来处理 XalanInitialize 的错误情况，，，

```
 //
    //  3\. Create a Xalan transformer
    //
    hXalan = NULL;
    hXalan = CreateXalanTransformer();
    if (NULL == hXalan)
    {
        return FALSE;
    }

    //
    //  4\. Perform transformation.
    //
    iRet = XalanTransformToFile(m_strPath.c_str(), strXslIn.c_str(), strHtmlOut.c_str(), hXalan);
    if (0 != iRet)
    {

        DeleteXalanTransformer(hXalan);
        XalanTerminate(false);
        return FALSE;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:53:27.750

在源代码中找到了答案，

如果成功则为 0，否则为 -1。

可以参考，

[http://code.metager.de/source/xref/apache/xalan/c/src/xalanc/XalanTransformer/XalanCAPI.cpp#54](http://code.metager.de/source/xref/apache/xalan/c/src/xalanc/XalanTransformer/XalanCAPI.cpp#54)

# php - 使用 cakePHP 登录时检查用户密码

> ID：15333355
> 
> 赞同：1
> 
> 时间：2013-03-11T07:32:38.917
> 
> 标签：php, authentication, cakephp-2.2

我想在登录后检查用户的密码。

最简单的方法是什么？

我有一个具有登录和注销操作的用户控制器，然后我有一个具有身份验证登录操作的应用控制器。

我想做的是检查两件事中的一件：如果密码在过去 3 个月内更改过，或者密码是否为空，或者与用户名相同。

如果满足这 3 个条件中的任何一个，则会提示用户输入新密码。我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:18:20.457

首先，您必须存储上次更改密码的日期。所以用户表看起来像：id、登录名、密码、pwd_date

其次，在您的 AppController->login() 方法中，您需要添加几行类似于

```
$user = $this->User->findById($this->Auth->getUser('id'));
if ($user['User']['pwd_date'] < strtotime('-3 months') || '' == trim($user['User']['password'])){
    promptViewToShowMustResetPassword();
} 
```

现在，至于检查用户名和|密码是否相同，您需要在模型中为您的用户设置它作为自定义验证规则，并使其不允许使用用户名作为密码。

# c# - 一次更新中的多个更新条件

> ID：15333363
> 
> 赞同：0
> 
> 时间：2013-03-11T07:32:59.147
> 
> 标签：c#, sql, wpf, visual-studio-2010, sql-update

我正在开发 WPF、C# 项目并使用 SQL Server 2008。我有一个表 Student_2012_2013，其中有一列名为 varchar(10) 的“类”。我需要在每年年底更新学生的课程。例如，如果班级是'Nursery'，则应更新为'LKG'，如果是'LKG'则应更新为'UKG'，'UKG'应更新为班级'1'，'1'到“2”等等，直到“11”到“12”。

我可以在一个 UPDATE 查询中执行此操作，还是需要触发 15 个不同的更新查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T07:36:40.107

你可以用`CASE`这个，

```
UPDATE  Student_2012_2013
SET     class = CASE WHEN class = 'Nursery' THEN 'LKG' 
                    WHEN class = 'LKG' THEN 'UKG'
                    WHEN class = 'UKG' THEN '1'
                    // WHEN ... continue with your conditions...
                    ELSE class // if it doesn't match to any condition
                 END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T07:46:20.330

使用 case 语句来更新表中的类列。例如：

```
Update Student_2012_2013 
set class = CASE 
        WHEN (CLASS = "NURSERY) THEN "LKG"
        WHEN (CLASS="LKG")THEN "UKG"
        ELSE "DEFAULT"
    END 
```

# c++ - 创建一个 3d 立方体和弹跳球

> ID：15333367
> 
> 赞同：4
> 
> 时间：2013-03-11T07:33:22.550
> 
> 标签：c++, opengl

我正在用 OpenGL 编写一个程序，我正在绘制一个简单的 3D 立方体，我想添加弹跳球，以便它们在立方体的墙壁内弹跳，我尝试添加一个球类和以下代码：

```
 GLfloat WHITE[] = {1, 1, 1};
GLfloat RED[] = {1, 0, 0};
GLfloat GREEN[] = {0, 1, 0};
GLfloat MAGENTA[] = {0, 0, 1};

class Ball {
  double radius;
  GLfloat* color;
  double maximumHeight;
  double x;
  double y;
  double z;
  int direction;
public:
  Ball(double r, GLfloat* c, double h, double x, double z):
      radius(r), color(c), maximumHeight(h), direction(-1),
      y(h), x(x), z(z) {
  }
  void update() {
    y += direction * 0.05;
    if (y > maximumHeight) {
      y = maximumHeight; direction = -1;
    } else if (y < radius) {
      y = radius; direction = 1;
    }
    glPushMatrix();
    glMaterialfv(GL_FRONT, GL_AMBIENT_AND_DIFFUSE, color);
    glTranslated(x, y, z);
    glutSolidSphere(radius, 30, 30);
    glPopMatrix();
  }
};

Ball balls[] = {
  Ball(0.5, GREEN, 7, 6, 1),
  Ball(0.5, MAGENTA, 6, 3, 4),
  Ball(0.5, WHITE, 5, 1, 7)
}; 
```

在显示功能中我添加了这个：

```
 for (int i = 0; i < sizeof balls / sizeof(Ball); i++) {
    balls[i].update();
  } 
```

这是我的立方体代码：

```
void display();
void specialKeys();
double rotate_y=0; 
double rotate_x=0;   
void display(){

  glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

  glLoadIdentity();

  glRotatef( rotate_x, 1.0, 0.0, 0.0 );
  glRotatef( rotate_y, 0.0, 1.0, 0.0 );

  glBegin(GL_POLYGON);

  glColor3f( 1.0, 0.0, 0.0 );     glVertex3f(  0.5, -0.5, -0.5 );      // P1 is red
  glColor3f( 0.0, 1.0, 0.0 );     glVertex3f(  0.5,  0.5, -0.5 );      // P2 is green
  glColor3f( 0.0, 0.0, 1.0 );     glVertex3f( -0.5,  0.5, -0.5 );      // P3 is blue
  glColor3f( 1.0, 0.0, 1.0 );     glVertex3f( -0.5, -0.5, -0.5 );      // P4 is purple

  glEnd();
  glBegin(GL_POLYGON);
  glColor3f(   1.0,  1.0, 1.0 );
  glVertex3f(  0.5, -0.5, 0.5 );
  glVertex3f(  0.5,  0.5, 0.5 );
  glVertex3f( -0.5,  0.5, 0.5 );
  glVertex3f( -0.5, -0.5, 0.5 );
  glEnd();

  glBegin(GL_POLYGON);
  glColor3f(  1.0,  0.0,  1.0 );
  glVertex3f( 0.5, -0.5, -0.5 );
  glVertex3f( 0.5,  0.5, -0.5 );
  glVertex3f( 0.5,  0.5,  0.5 );
  glVertex3f( 0.5, -0.5,  0.5 );
  glEnd();

  glBegin(GL_POLYGON);
  glColor3f(   0.0,  1.0,  0.0 );
  glVertex3f( -0.5, -0.5,  0.5 );
  glVertex3f( -0.5,  0.5,  0.5 );
  glVertex3f( -0.5,  0.5, -0.5 );
  glVertex3f( -0.5, -0.5, -0.5 );
  glEnd();

  glBegin(GL_POLYGON);
  glColor3f(   0.0,  0.0,  1.0 );
  glVertex3f(  0.5,  0.5,  0.5 );
  glVertex3f(  0.5,  0.5, -0.5 );
  glVertex3f( -0.5,  0.5, -0.5 );
  glVertex3f( -0.5,  0.5,  0.5 );
  glEnd();*/

  glBegin(GL_POLYGON);
  glColor3f(   1.0,  0.0,  0.0 );
  glVertex3f(  0.5, -0.5, -0.5 );
  glVertex3f(  0.5, -0.5,  0.5 );
  glVertex3f( -0.5, -0.5,  0.5 );
  glVertex3f( -0.5, -0.5, -0.5 );
  glEnd();

  glFlush();
  glutSwapBuffers();

}

void specialKeys( int key, int x, int y ) {

  if (key == GLUT_KEY_RIGHT)
    rotate_y += 5;
  else if (key == GLUT_KEY_LEFT)
    rotate_y -= 5;

  else if (key == GLUT_KEY_UP)
    rotate_x += 5;

  else if (key == GLUT_KEY_DOWN)
    rotate_x -= 5;
  glutPostRedisplay();

}
int main(int argc, char* argv[]){
  glutInit(&argc,argv);
  glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
  glutCreateWindow("Awesome Cube");
       glEnable(GL_DEPTH_TEST);
  glutDisplayFunc(display);
  glutSpecialFunc(specialKeys);
      glutMainLoop();
  return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:35:05.950

```
GLfloat WHITE[] = {1, 1, 1};
...
Ball(0.5, WHITE, 5, 1, 7)
...
color(c)
....
glMaterialfv(GL_FRONT, GL_AMBIENT_AND_DIFFUSE, color); 
```

[`glMaterialfv()`](http://www.opengl.org/sdk/docs/man2/xhtml/glMaterial.xml#description)：

> `GL_AMBIENT`: *params*包含**四个**整数或浮点值
> 
> ...
> 
> `GL_DIFFUSE`: *params*包含**四个**整数或浮点值
> 
> ...
> 
> `GL_AMBIENT_AND_DIFFUSE`: 相当于`glMaterial`用相同的参数值调用两次，一次 with`GL_AMBIENT`和一次 with `GL_DIFFUSE`。

**编辑**：

```
#include <GL/glut.h>

// http://eigen.tuxfamily.org
#include <Eigen/Core>
using namespace Eigen;

struct PointMass
{
    PointMass() : pos(0,0,0), vel(0,0,0) {}
    PointMass( const Vector3f& pos )
        : pos( pos )
        , vel( 0, 0, 0 )
    {}

    void Integrate( float dt )
    {
        // "gravity" force vector
        Vector3f g( 0, 0, -2 );

        // semi-implicit euler
        vel = vel + g * dt;
        pos = pos + vel * dt;

        // collision detection/response
        if( pos.z() < 0 )
        {
            pos.z() = -pos.z();
            vel.z() = -vel.z();
        }
    }

    Vector3f pos;
    Vector3f vel;
};

GLfloat WHITE[] = {1, 1, 1, 1};
GLfloat RED[] = {1, 0, 0, 1};
GLfloat GREEN[] = {0, 1, 0, 1};
GLfloat MAGENTA[] = {0, 0, 1, 1};

class Ball 
{
    double radius;
    GLfloat* color;
    PointMass pm;
public:
    Ball(double r, GLfloat* c, const Vector3f& pos )
        : radius(r)
        , color(c)
        , pm( pos )
    { }

    void Integrate( float dt )
    {
        pm.Integrate( dt );
    }

    void Draw()
    {
        glPushMatrix();
        glColor4fv( color );
        glTranslatef( pm.pos.x(), pm.pos.y(), pm.pos.z() );
        glutSolidSphere(radius, 30, 30);
        glPopMatrix();
    }
};

Ball balls[] = 
{
    Ball( 0.1,   GREEN,      Vector3f( 1, 1, 2 )    ),
    Ball( 0.1,   MAGENTA,    Vector3f( -1, 1, 1 )   ),
    Ball( 0.1,   WHITE,      Vector3f( 0, -1, 1.5 ) ),
};

double rotate_x = 55; 
double rotate_z = 25;   
void display()
{
    static int last = glutGet(GLUT_ELAPSED_TIME);
    int cur = glutGet(GLUT_ELAPSED_TIME);
    float dt = ( cur - last ) / 1000.0f;
    last = cur;

    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    double w = glutGet( GLUT_WINDOW_WIDTH );
    double h = glutGet( GLUT_WINDOW_HEIGHT );
    gluPerspective( 60, w / h, 0.1, 100 );

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();
    glTranslatef( 0, 0, -5 );
    glRotatef( -rotate_x, 1.0, 0.0, 0.0 );
    glRotatef( -rotate_z, 0.0, 0.0, 1.0 );

    // ground
    glBegin(GL_QUADS);
    glColor3f( 1.0, 0.0, 0.0 );     
    glVertex2f( -2, -2 );
    glColor3f( 0.0, 1.0, 0.0 );     
    glVertex2f(  2, -2 );
    glColor3f( 0.0, 0.0, 1.0 );     
    glVertex2f(  2,  2 );
    glColor3f( 1.0, 0.0, 1.0 );     
    glVertex2f( -2,  2 );
    glEnd();

    for (int i = 0; i < sizeof balls / sizeof(Ball); i++) 
    {
        balls[i].Integrate( dt );
        balls[i].Draw();
    }

    glutSwapBuffers();
}

void specialKeys( int key, int x, int y )
{
    if (key == GLUT_KEY_RIGHT)
        rotate_z += 5;
    if (key == GLUT_KEY_LEFT)
        rotate_z -= 5;
    if (key == GLUT_KEY_UP)
        rotate_x += 5;
    if (key == GLUT_KEY_DOWN)
        rotate_x -= 5;
}

void timer( int extra )
{
    // run display() every 16ms or so
    glutTimerFunc( 16, timer, 0 );
    glutPostRedisplay();
}

int main(int argc, char* argv[])
{
    glutInit(&argc,argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
    glutCreateWindow("Awesome Cube");
    glEnable(GL_DEPTH_TEST);
    glutDisplayFunc(display);
    glutSpecialFunc(specialKeys);
    glutTimerFunc( 0, timer, 0 );
    glutMainLoop();
    return 0;
} 
```

# c# - 数据表按总和分组

> ID：15333368
> 
> 赞同：3
> 
> 时间：2013-03-11T07:33:24.153
> 
> 标签：c#, linq, datatable, sum

在队列中，我有以下格式的数据表

```
some table in the Queue
    Name Rank
    AAA  9 
    BBB  5
    CCC  1
    DDD  5

some other table in the Queue
    Name Rank
    AAA  1 
    SSS  5
    MMM  1
    DDD  8 
```

使用 LINQ 需要逐表处理这些表，并将结果添加到以下格式的全局 DataTable 中：

```
Name  Rank1  Rank2  Rank3  Rank>3
AAA   1      0      0      1
BBB   0      0      0      1
CCC   1      0      0      0
DDD   0      0      0      2
SSS   0      0      0      1
MMM   0      0      0      0 
```

在全局表中，4 列说明了一个名称在 1、2、3 或 >3 中排名的次数。

现在，如果名称已经存在于全局表中，我将不会添加它，而只会增加排名计数列，如果不存在则添加它。

我已经用嵌套循环做到了这一点，但我想知道是否有人可以帮助我使用 LINQ 语法来做这样的事情，使用 LINQ 也会比嵌套循环更快地处理这个过程吗？

请注意，新表每秒都会添加到队列中，我将从队列中获取一些表并将其处理到全局数据表

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T07:46:52.870

```
table1.AsEnumerable().Concat(table2.AsEnumerable())
      .GroupBy(r => r.Field<string>("Name"))
      .Select(g => new {
          Name = g.Key,
          Rank1 = g.Count(x => x.Field<int>("Rank") == 1),
          Rank2 = g.Count(x => x.Field<int>("Rank") == 2),
          Rank3 = g.Count(x => x.Field<int>("Rank") == 3),
          OtherRank = g.Count(x => x.Field<int>("Rank") > 3)
      }).CopyToDataTable(); 
```

您将需要实现[通用类型 T 不是 DataRow](http://msdn.microsoft.com/en-us/library/bb669096.aspx)的 CopyToDataTable 方法。

* * *

一点优化的解决方案（单解析和单循环分组排名）：

```
(from row in table1.AsEnumerable().Concat(table2.AsEnumerable())
 group row by row.Field<string>("Name") into g
 let ranks = g.Select(x => x.Field<int>("Rank")).ToList()
 select new {
    Name = g.Key,
    Rank1 = ranks.Count(r => r == 1),
    Rank2 = ranks.Count(r => r == 2),
    Rank3 = ranks.Count(r => r == 3),
    OtherRank = ranks.Count(r => r > 3)        
 }).CopyToDataTable(); 
```

# c# - 有没有办法在运行时找到 PackageFamilyName？

> ID：15333375
> 
> 赞同：2
> 
> 时间：2013-03-11T07:34:04.053
> 
> 标签：c#, windows-8, windows-runtime, windows-store-apps

有没有办法在运行时找出 PackageFamilyName（出现在清单中）？我查看了 /Program Files/WindowsApps 并在那里找不到相关的字符串。找不到任何可以让我执行此操作的 API...

欢迎任何其他想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T08:05:08.817

我认为您正在寻找的是可以通过该属性获得的[PackageId.FamilyName 。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.packageid.familyname.ASPx)`Package.Current.Id.FamilyName`

来源：[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/3671cec0-4bdb-4db9-bba1-0f463985e7bd/)

# php - 安装脚本没有在我的 magento 模块中运行？

> ID：15333376
> 
> 赞同：1
> 
> 时间：2013-03-11T07:34:07.610
> 
> 标签：php, magento-1.7

我正在开发一个 magento 模块，我试图通过我的脚本在数据库中安装一个表，但由于某些原因我无法运行这个安装脚本。

这是我的`config.xml`代码：

```
<?xml version="1.0"?>
<config>
<!-- turn on our module, required for install support -->
<modules>
<Gwb_Magecrmsync>
    <version>0.1.0</version>
</Gwb_Magecrmsync>
</modules>
<frontend>
<routers>
    <magecrmsync>
        <use>standard</use>
        <args>
            <module>Gwb_Magecrmsync</module>
            <frontName>magecrmsync</frontName>
        </args>
    </magecrmsync>
</routers>
<layout>
    <updates>
        <magecrmsync>
            <file>adminhtml.xml</file>
        </magecrmsync>
    </updates>
</layout>
</frontend>
<admin>
<routers>
    <magecrmsync>
        <use>admin</use>
        <args>
            <module>Gwb_Magecrmsync</module>
            <frontName>magecrmsync</frontName>
        </args>
    </magecrmsync>
</routers>
</admin>
<adminhtml>
<menu>
    <menu1 translate="title" module="magecrmsync">
        <title>Synchronize</title>
        <sort_order>999</sort_order>
        <children>
            <menuitem1 module="magecrmsync">
                <title>Customers</title>
                <action>magecrmsync/adminhtml_customers</action>
            </menuitem1>
            <menuitem2 module="magecrmsync">
                <title>Orders</title>
                <action>magecrmsync/adminhtml_orders</action>
            </menuitem2>
            <menuitem3 module="magecrmsync">
                <title>Products</title>
                <action>magecrmsync/adminhtml_products</action>
            </menuitem3>
        </children>
    </menu1>
</menu>
<acl>
    <resources>
        <admin>
            <children>
                <menu1 translate="title" module="magecrmsync">
                    <title>Synchronize</title>
                    <sort_order>999</sort_order>
                    <children>
                        <menuitem1>
                            <title>Customers</title>
                        </menuitem1>
                        <menuitem2>
                            <title>Orders</title>
                        </menuitem2>
                        <menuitem3>
                            <title>Products</title>
                        </menuitem3>
                    </children>
                </menu1>
            </children>
        </admin>
    </resources>
</acl>
</adminhtml>
<global>
<!-- turn on models -->
<models>
    <magecrmsync>
        <class>Gwb_Magecrmsync_Model</class>
        <resourceModel>Magecrmsync_mysql4</resourceModel>
    </magecrmsync>
    <magecrmsync_mysql4>
        <class>Gwb_Magecrmsync_Model_Mysql4</class>
        <entities>
            <magecrmsync>
                <table>magecrmsync</table>
            </magecrmsync>
        </entities>
    </magecrmsync_mysql4>
</models>
<!-- turn on models -->

<!-- turn on database connections -->
<resources>
<!-- setup is needed for automatic installation -->
    <magecrmsync_setup>
        <setup>
            <module>Gwb_Magecrmsync</module>
        </setup>
        <connection>
            <use>core_setup</use>
        </connection>
    </magecrmsync_setup>
    <magecrmsync_write>
        <connection>
            <use>core_write</use>
        </connection>
    </magecrmsync_write>
    <magecrmsync_read>
        <connection>
            <use>core_read</use>
        </connection>
    </magecrmsync_read>
</resources>

<blocks>
    <magecrmsync>
        <class>Gwb_Magecrmsync_Block</class>
    </magecrmsync>
</blocks>

<helpers>
    <magecrmsync>
        <class>Gwb_Magecrmsync_Helper</class>
    </magecrmsync>
</helpers>

<layout>
    <magecrmsync>
        <file>adminhtml.xml</file>
    </magecrmsync>
</layout>

</global>
</config> 
```

这是我的`mysql4-install-0.1.0.php`文件，位于`Gwb/Magecrmsync/sql/magecrmsync_setup`

```
<?php
$installer = $this;
$installer->startSetup();
$installer->run("
-- DROP TABLE IF EXISTS {$this->getTable('magecrmsync')};
CREATE TABLE {$this->getTable('magecrmsync')} (
`user_id` INT NOT NULL AUTO_INCREMENT, 
`username` VARCHAR(255) NOT NULL, 
`password` VARCHAR(255) NOT NULL),
PRIMARY KEY  (`user_id`) 
ENGINE = MyISAM DEFAULT CHARSET=utf8;
");
$installer->endSetup(); 
```

谁能告诉我我在这里做错了什么没有让我的安装脚本执行？

任何帮助将不胜感激，并将对我有所帮助。

# python - 如何使用python从文本中提取单词？

> ID：15333381
> 
> 赞同：0
> 
> 时间：2013-03-11T07:34:44.827
> 
> 标签：python, split, words

我需要提取文本中的单词和短语。例如，文本是：

```
Привет, hello, как дела? english word, еще одно русское слово, слово-1224, тест 4456 
```

脚本应返回以下内容：

```
Привет
как
дела
еще
одно
русское
слово
слово-1224 
```

也就是说，我需要从文本中取出所有以俄文字母（`[а-яА-Яё-]`）开头的单词，并且可以包含俄文字母的数字和字母。这是如何实施的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:05:06.017

这比我想象的要棘手一些。从未使用过西里尔字符。我相信这应该这样做：

```
text =  # Set you're input unicode string here.
words = re.findall('[\p{IsCyrillic}][0-9\p{IsCyrillic}]+', text)

for word in words:
    print word 
```

# c++ - 功能映射图

> ID：15333386
> 
> 赞同：0
> 
> 时间：2013-03-11T07:34:58.730
> 
> 标签：c++, class, diagrams

您好，这个问题非常广泛。

场景——我想用图表表示我的班级的功能以及它们如何相互调用？这些函数有一个明确的模式，我想这样做以适应未来的变化，例如添加一个需要编写新函数的新功能。

例如：

function_1() ---> 调用 function_master()

function_2() ---> 调用 function_master()

如果明天创建了 function_3，那么制作者应该知道他们需要调用 function_master()。

有很多这样复杂的关系。

真正的问题——>我想要达到的目标，它有名字吗？像功能映射图。我知道类图。我不想包括他们。我想要只有相互调用的函数的详细图表。

你能推荐一些工具让我做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:38:17.877

它被称为**函数调用图**。可以使用的工具是[doxygen](http://www.doxygen.nl/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:41:24.923

[Imagix 4D](http://www.imagix.com/products/source-code-analysis.html)将对您有很大帮助。

您还可以查看[wiki 的静态分析工具链接](http://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis)

# shell - 检查shell中目录中的复制

> ID：15333390
> 
> 赞同：0
> 
> 时间：2013-03-11T07:35:15.153
> 
> 标签：shell

我创建了一个从目录中选择文件的脚本`inbox`。无论文件是否来自另一个进程，我都必须在脚本中包含一个处理。如果文件来自另一个进程，那么我的脚本应该等到文件被复制。

为此，我创建了一个标志

```
CHECK_COPY_PROCESS=$(ps -ef|grep -E 'cp|mv|scp'|grep inbox) 
```

如果 flag`CHECK_COPY_PROCESS`包含某个值，则进程将进入等待状态。但问题是假设某些文件来自该目录的子目录，`inbox` 那么进程将生成这样`cp file_name ..`的上述逻辑不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:18:51.477

您可以使用 Basile 的提示，将 lsof 与 awk 结合使用（仅在第一列上进行 grepping，即命令名称）

例子：

```
lsof +D /path/to/inbox|awk '$1~/mv|cp|scp/' 
```

这未经测试，因为我目前没有需要一段时间才能在我的机器上复制的大文件。

# java - 在 Java Jar 文件中包含 GImage

> ID：15333392
> 
> 赞同：0
> 
> 时间：2013-03-11T07:35:27.177
> 
> 标签：java, jar

我正在将所有代码编译到一个 jar 文件中，但是我需要包含许多图像。Java 不包括它们，我尝试了很多不同的方法，但大多数都不适合 GImage 对象。有没有办法包含这些，还是我需要切换到图标对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:29:48.090

我无法真正理解 Gimage 的含义。但我可以通过以下方法从 jar 文件中读取图像：

```
java.net.URL imageURL = getClass().getResource("bomb0.png");
ImageIcon bomb0 = new ImageIcon(imageURL); 
```

然后你可以：

```
GImage image = new GImage(bomb0.getImage()); 
```

如果你觉得这个方法没问题，你可以做个测试；-)

# mercurial - 通过 Mercurial 提供代码更新而不共享主要 BitBucket 帐户的实用方法

> ID：15333397
> 
> 赞同：1
> 
> 时间：2013-03-11T07:35:40.593
> 
> 标签：mercurial

我怀疑这可能非常明显，但我在文档或论坛中找不到简单的解决方案：

我已经编写了一些代码，这些代码保存在 BitBucket 的 Mercurial 存储库中。

我使用此代码来构建 Linux 虚拟服务器。当我构建服务器时，我将 repo 克隆到服务器上，运行构建脚本，然后删除克隆。结果是一个配置的服务器，其中包含来自我的存储库的多个文件，这些文件位于服务器上的各个文件夹中。

现在，我正在寻找一种机制，在我移交用户服务器后，我可以在其中推出错误修复和改进。那时，我无法通过 SSH 访问服务器，我不能指望我的最终用户做任何比启动 cron 作业或启动脚本更复杂的事情。

为了实现这一点，我正在考虑为我的用户设置一个 BitBucket 帐户，以只读访问我的存储库。

我通过这个只读帐户编写脚本来克隆我的仓库并应用更新没有问题，但我不想包含我的所有文件。特别是，我想排除我的构建脚本，因为它对商业敏感。我知道我可以从我的回购中删除它，但是我的构建将无法正常工作。

环顾四周，似乎我可能需要为我的仓库创建一个分支或一个分支（哪个？）。或者也许是一个子回购？然后，我可以从该分支/fork/sub-repo 中删除敏感文件，并允许我的用户通过脚本克隆它。

没关系，但是当我对主仓库进行更改时，我需要一种方法来更新分支/分叉/子仓库。这可以是自动的吗？换句话说，是否可以将其设置为始终反映主存储库中所做的更新？当然不包括敏感文件。

我不确定我是否希望更新是自动的，所以我也想知道如何手动将更新从 main 传输到 branch/fork/sub。合并？如果我进行合并，如何确保我的敏感文件不会被复制？

总而言之，我有一个包含一些敏感文件的主存储库，我需要一种方法来向我的只读用户推出除这些敏感文件之外的所有文件的更新。

对不起，如果这非常明显。我敢肯定，这是一个只见树木不见森林并被各种可能性压倒的情况。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:39:42.560

我认为你根本不需要在 Mercurial 中解决这个问题。
你真正需要的是[持续集成](http://en.wikipedia.org/wiki/Continuous_integration)/构建服务器。

最简单的解决方案是这样的：使用[TeamCity](http://www.jetbrains.com/teamcity/)或[Jenkins](http://jenkins-ci.org/)
之类的工具 设置构建服务器，该服务器始终在线并监控您的 Bitbucket 存储库中的更改。 您可以对其进行设置，以便当您的存储库发生更改时，构建服务器会运行您的构建脚本并将输出复制到某个 FTP 服务器、下载站点或其他任何地方。

现在您有了一个始终包含最新代码更改的位置，但没有像构建脚本这样的敏感文件。
然后，您可以设置最终用户可以运行的脚本或 cron 作业，以从该中心位置获取最新版本的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:02:20.913

整个 Mercurial 树总是一起移动，因此您不能克隆或仅拉取存储库的一部分（沿文件树轴）。您可以保留一个仅包含部分文件的分支，然后保留另一个包含所有文件的分支，从而可以轻松地将部分（就文件而言）分支合并到另一个分支中（但以其他方式合并不会特别容易）。

我在想子存储库可能[适用](http://mercurial.selenic.com/wiki/Subrepository)于您的特定用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:47:35.880

您可以使用两个分支，一个用于用户克隆（main），另一个用于您的主要开发（dev），棘手的部分是将新的更改从 dev 合并到 main。

您可以通过在合并过程中排除文件来解决此问题。[在 Mercurial 中合并时排除文件](https://stackoverflow.com/questions/10879180/excluding-a-file-while-merging-in-mercurial)

通过`[merge-patterns]`在 .hgrc 中设置部分，您可以确定哪些文件不受合并影响。

```
[merge-patterns]
build.sh = internal:local 
```

欲了解更多信息，请阅读`hg help merge-tools`。

```
"internal:local"
   Uses the local version of files as the merged version. 
```

# php - 如何在开发时调试 joomla 组件

> ID：15333401
> 
> 赞同：2
> 
> 时间：2013-03-11T07:35:57.283
> 
> 标签：php, model-view-controller, joomla2.5

我正在编写我的第一个 joomla 组件，虽然我掌握了 joomla 的工作原理，但我不知道如何在将组件安装到 joomla 之前有效地调试和运行组件测试。所以我的问题是：你如何编写一个 joomla 组件。我应该先写哪些部分以及如何测试它们？

示例：从数据库获取信息并显示它的组件。如何编写数据库部分（模型）并对其进行测试以查看它是否按预期工作，而无需编写组件的其余部分（视图和控制器）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:55:31.127

首先，您需要了解如何设置您的机器以进行开发。您不需要完整的组件即可在 Joomla 上安装它！

这绝不是一个完整的答案，只是您可以遵循的几个方向：

**1\. 开发**- 了解 Joomla! 工作：作为初学者，在学习更难的材料之前，首先让你的组件工作很重要（开始并不容易）。学习如何使用 Joomla！构建您的组件的平台/框架，检查核心组件中的代码。

**2\. 单元测试 -**在你拥有一个工作组件之后，如果你想测试它的一部分，请在主题单元测试/PHPUnit 上进行一些搜索。文章[How to use PHPUnit in Joomla](http://www.waltercedric.com/joomlacms/2076-using-phpunit-to-test-develop-joomla-extensions-in-phpstorm)对如何从我构建的控制器/模型测试方法帮助了我很多。

**3\. 调试你的代码**——学习如何在你的 IDE 中使用调试器（比如 XDebug 或 Zend Debugger）。

**4\. 系统测试**——最后你可能想要自动化一些你手动完成的任务——看看[Selenium WebDriver](http://docs.seleniumhq.org/projects/webdriver/)

一些资源：

*   [Joomla！官方文档](http://docs.joomla.org/Main_Page)
*   [向主开发人员 Andrew Eddie 学习 Joomla!® 的艺术](http://learn.theartofjoomla.com/)
*   [Joomla！编程 - Mark Dexter, Louis Landry](http://www.joomla.org/joomla-press-official-books.html)

# python - 我可以获取使用 easy_install 安装的模块列表吗？

> ID：15333402
> 
> 赞同：0
> 
> 时间：2013-03-11T07:36:05.747
> 
> 标签：python, easy-install

最近，我在本地机器上安装了[trac](http://en.wikipedia.org/wiki/Perl_package_manager)以进行测试。

为了让它运行，我需要使用`easy_install`.

现在，我将进行本地安装并将其移动到尚未安装 Python 的真实服务器上。

虽然移动 trac 安装本身似乎微不足道（[http://trac.edgewall.org/wiki/TracBackup](http://trac.edgewall.org/wiki/TracBackup)，[https://serverfault.com/questions/6147/how-do-i-backup-my-trac-instalations](https://serverfault.com/questions/6147/how-do-i-backup-my-trac-instalations)），实际上让它运行需要我安装的模块`easy_install`。

有没有一种方便的方法（例如Perl 的[PPM](http://en.wikipedia.org/wiki/Perl_package_manager)）可以用来在服务器上安装与本地机器上相同的模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:42:51.797

如果不使用pip，只使用easy_install，试试[https://pypi.python.org/pypi/yolk](https://pypi.python.org/pypi/yolk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:39:25.577

安装`Pip`，然后

```
pip freeze 
```

您还可以使用 python 中的帮助功能来获取已安装模块的列表。进入 python 提示符并键入以下命令。

```
help('modules') 
```

# opengl - 启用深度测试不会导致任何内容出现

> ID：15333409
> 
> 赞同：5
> 
> 时间：2013-03-11T07:36:24.340
> 
> 标签：opengl, opengl-es

我有一个深度缓冲区，正在屏幕上渲染一个圆锥。它有效，但后来我意识到我忘记了深度测试的标准启用，当我打开它时，现在什么都没有出现。

我的场景中只有一个物体，一个圆锥体，所以它前面没有其他东西。

深度缓冲区设置良好：

```
glFramebufferRenderbuffer(GL_FRAMEBUFFER,
                              GL_DEPTH_ATTACHMENT,
                              GL_RENDERBUFFER,
                              m_depthRenderbuffer); 
```

我绑定渲染缓冲区：

```
glBindRenderbuffer(GL_RENDERBUFFER, m_renderbuffer); 
```

然后我渲染圆锥：

![在此处输入图像描述](../Images/31216a4d1e610c07dfdf960a61400ab5.png)

（我对这个凌乱的锥体的实验是我稍后将要问的另一个问题的主题）。

但是，一旦我在创建深度缓冲区并绑定渲染缓冲区后添加下一行：

`glEnable(GL_DEPTH_TEST)`

...然后我的锥体神奇地消失了。屏幕上什么都没有，甚至连一个小点都没有。

为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T08:44:28.720

使用**GL_DEPTH_TEST**时，

**glClear(GL_DEPTH_BUFFER_BIT)**必须在渲染之前调用，以便正确初始化深度缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-01T21:26:09.450

正如fuzzyTew 在评论中提到的（2017 年4 月26 日），有些人可能会遇到将近剪裁距离设置为0 的问题。我将其设置为0.01 * cam_distance，一切都很好。

> [...] 我的近剪裁距离设置为 0。结果它需要是正的。——fuzzyTew 2017 年 4 月 26 日 20:25

# glassfish - 无效的 ejb jar：它包含零 ejb。

> ID：15333410
> 
> 赞同：13
> 
> 时间：2013-03-11T07:36:25.320
> 
> 标签：glassfish, ejb, ear

我有 2 个模块：ejb 和 war，以及包含它们的 ear 模块。模块构建成功，但是当我尝试将 ear 部署到 glassfish 时，我收到此错误：

```
glassfish3.1.2|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=17;_ThreadName=Thread-2;|Exception while deploying the app [EarModule] : Invalid ejb jar [BackEnd-1.0-SNAPSHOT.jar]: it contains zero ejb. 
Note: 
1\. A valid ejb jar requires at least one session, entity (1.x/2.x style), or message-driven bean. 
2\. EJB3+ entity beans (@Entity) are POJOs and please package them as library jar. 
3\. If the jar file contains valid EJBs which are annotated with EJB component level annotations (@Stateless, @Stateful, @MessageDriven, @Singleton), please check server.log to see whether the annotations were processed properly.|#] 
```

我真的不知道该怎么办，我发现了很多像我这样的问题，但没有解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:38:40.247

我明白了，怎么了。问题出在运行配置中，我使用的是 Intellij Idea，在运行配置中，在运行我的 ear 模块之前进行了构建和制作。我删除了它，并在 maven 安装后成功部署。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T10:11:09.797

您必须将 EJB 添加到您的 WAR 或 EAR 文件中。只需创建一个新类并用`@Stateless`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-27T15:12:00.877

我知道这是非常特定于构建的，它使用 Netbeans 而不是 OP 的 IDE，但是因为我是这里的领导者，这可能对某些用户有用：

我有以下构建：Netbeans Enterprise Application with Maven Glassfish 4.1 Java EE 7

我曾尝试从以前的非 Maven 企业应用程序迁移，但克隆并没有按我预期的方式工作，我删除了一些旧的 ejb jar。

我做了很多事情来修复它：

1.  确保周围没有不应该存在的 ejb jar。确保您没有意外地多次包含 ejb 模块 jar，因为这也会导致相同的错误（手动部署 ear 和通过 netbeans 部署有时会给我不同的错误）。
2.  我在我的 EJB 应用程序上使用了 @Remote 接口。现在您不应该将 EJB 导入您的 War，您应该按照[https://docs.oracle.com/javaee/7/tutorial/ejb-intro004.htm的描述正确使用注释](https://docs.oracle.com/javaee/7/tutorial/ejb-intro004.htm)
3.  （这更像是一个注释）当您更新任何战争或 ejb 时，在清洁和构建您的耳朵之前清洁和构建它们（听起来很有趣吧？）。
4.  如果您正在为会话 bean 使用接口，那么您应该将它们放在一个单独的 jar 中，创建一个新项目 maven > java application。对你的持久性实体做同样的事情。将这些作为依赖项添加到您的 ejb 和 war 项目中。
5.  这与我没有特别的关系，但你应该在你的ejb模块内的java类中至少有1个@stateless（或者我认为@stateful）注释，以便它运行（模块被视为ejb）。

我可能不得不做一些我忘记的更多事情，但如果您仍然遇到问题，请在下面发表评论，我会尝试更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-17T08:15:07.577

我也遇到了这个问题。它发生在我将一个新的 EJB 项目导入到我的 Eclipse 工作区时。该项目当时没有对 Glassfish 库的引用，因为它尚未包含在 EAR 部署程序集中。

保存 Bean 文件后，IDE 会自动导入`javax.inject.Singleton`而不是`javax.ejb.Singleton`. 这使得代码在没有警告的情况下编译，但会抛出与原始帖子相同的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-04T15:37:28.523

只需尝试使用 Maven 构建和安装您的项目，然后在 glassfish 中部署它（不要直接从您的 IDE 运行您的项目）

# css - 选择器内的 CSS 正则表达式

> ID：15333411
> 
> 赞同：0
> 
> 时间：2013-03-11T07:36:28.300
> 
> 标签：css, css-selectors

我正在尝试对一组 id 以“sth”开头的 img 元素应用一些规则。我知道如何选择它们：

```
img [id^=sth] 
```

但是有没有办法在选择器中使用这个图像特定的 id？换句话说，我可以以某种方式做到这一点：

```
img [id^=sth] {
    src: id;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:35:29.350

你不能用 css 做到这一点，但你可以使用 jQuery：

```
$("div[id^='sph']").each(function() {
    $(this).attr("src", this.id);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:51:15.503

您只能在伪元素中`:before`或`:after`通过`content`属性使用属性值：

```
div:after{
content:attr(id);
} 
```

# jquery - jquery移动滑动

> ID：15333413
> 
> 赞同：0
> 
> 时间：2013-03-11T07:36:31.187
> 
> 标签：jquery, jquery-mobile, swipe

我想使用移动 jQuery 在移动设备中垂直滑动图像。我在 jQuery 中找到了一些关于 jCarousel 的链接，关于垂直和水平滑动，在我的情况下，我希望必须在没有箭头的情况下滑动图像。我找到了一个例子，我完全想在没有箭头的情况下做到这一点。

[http://bxslider.com/examples/carousel-demystified#example8](http://bxslider.com/examples/carousel-demystified#example8)

[http://sorgalla.com/projects/jcarousel/examples/static_vertical.html](http://sorgalla.com/projects/jcarousel/examples/static_vertical.html)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:46:18.953

我写了一篇关于它的[简单博客文章](http://itdiary.mayuonline.com/simple-basic-image-carousel-with-jquery-mobile/)。检查一下......基本上你需要捕捉向左滑动和向右滑动事件并从你的数组中更改图像。

```
 $("#myImagePage").swiperight(function () {
        if (i < (imgURL.length - 1)) {
            i++
        } else {
            i = 0;
        }
        var imgStr = "<img src=" + imgURL[i] + " style='width:100%'>";
        $('#ImageDiv').html(imgStr);
    });
    $("#myImagePage").swipeleft(function () {
        if (i > 0) {
            i--
        } else {
            i = (imgURL.length - 1);
        }
        var imgStr = "<img src=" + imgURL[i] + " style='width:100%'>";
        $('#ImageDiv').html(imgStr);
    }); 
```

这是一个工作[小提琴](http://jsfiddle.net/R3bZ8/13/)

# php - php mysql pdo 拍卖竞标

> ID：15333417
> 
> 赞同：0
> 
> 时间：2013-03-11T07:36:45.290
> 
> 标签：php, mysql, pdo

我正在使用 php mySQL(MyISAM) 和 PDO 开发一个具有限制或最高出价场景的拍卖系统，使用两个表

**拍卖**

```
 Id   | title | seller  |  currentbid   |  limit(max bid)   |  dated | bidder 
```

**出价**

```
 Id  | auctionid | bid  | bidder | dated 
```

用户出价后会发生以下情况（我正在使用 PDO 准备好的语句）

```
 $record = fetch (‘Select * from auction where id = :id’, array(‘id’ => $id))
 $increment = 1;
 $postedBid = $_REQUEST[‘postedBid’];
 $currentBid = $record[‘currentbid’];
 $limitBid = $record[‘limit’];

 If($postedBid < $currentBid + $increment){
    Return;(without processing bid!)
 }else{
    If($limitBid !> $postedBid){
       Insert into bids (auctionid, bid, bidder, dated(timestamp)) values ($auctioned, $postedBid, ……);

       Update auction set currentbid = $postedBid, limit = $postedBid ….

       }else{

       Insert into bids (auctionid, bid, bidder, dated(timestamp)) values ($auctioned, $postedBid, ……);

       Insert into bids (auctionid, bid, bidder, dated(timestamp)) values ($auctioned, $postedBid + $increment, ……);

       Update auction set currentbid = $postedBid + increment, limit = $limitBid ….
      }
  } 
```

我想知道两件事

1-如果这种方法可以，我该如何改进

2- 我怎样才能避免同时出价。我不知道如何使用 PDO 应用锁。感谢使用锁或任何其他方法来处理此问题的任何示例查询

谢谢

（抱歉使用混合类型的代码）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:52:05.190

我认为您需要在 MySQL 中的存储过程中执行此操作，该过程仅返回成功/失败消息。

您需要将代码更改为如下所示：

```
If($postedBid < $currentBid + $increment){
   Return;(without processing bid!)
} else {
   $stmt = $db->prepare("CALL update_bid(?,?, ...)");
   $stmt->execute(array($parameter1, $parameter2, ...));
} 
```

还要检查代码以帮助防止不必要的数据库调用，存储过程将有助于确保没有并发问题。

# visual-studio - 是否可以将两个不同的版本与 Visual Studio 2012 中的 VisualSVN 插件进行比较？

> ID：15333421
> 
> 赞同：2
> 
> 时间：2013-03-11T07:36:53.900
> 
> 标签：visual-studio, svn, diff, visualsvn

使用 visualsvn 插件，我可以将当​​前工作副本与存储库中的头版本进行比较。

但是我如何比较两个在 Visual Studio 中不是工作副本或头部修订的不同修订？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:35:28.237

希望能帮助到你：

1.  **视觉工作室 | 视觉SVN | 显示日志...**
2.  选择要比较的修订，右键单击，**比较修订**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:27:55.063

AFAIK，我认为这是不可能的，*至少不是直接*的。你必须先做一个`SVN Log` *，*`SVN Diff`然后从那里做一个。但是，它`SVN Blame`提供了每行上每个修订版本的更改列表，而不是并排差异视图。

# android - Google Play 服务：UserRecoverableAuthException 的意图未启动

> ID：15333424
> 
> 赞同：0
> 
> 时间：2013-03-11T07:37:03.047
> 
> 标签：android, google-drive-api, google-play-services

我在使用适用于 Android 的 Google Drive SDK 时遇到问题。

一切正常，除了一些设备（它曾经在这些设备上工作，但现在不工作）返回的 Intent`UserRecoverableAuthException.getIntent()`在通过`startIntent(...)`.

我在 Logcat 上看到的只有：

```
03-11 08:31:19.692: INFO/ActivityManager(552): START u0 {cat=[scope:oauth2:https://www.googleapis.com/auth/drive,account:myemail@googlemail.com,extrashash:1088740320] flg=0x10000004 cmp=com.google.android.gms/.auth.TokenActivity (has extras)} from pid 27644 
```

而已。设备上没有任何反应。

这是 Intent 的启动方式：

```
Intent intent = e.getIntent();
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK).addFlags(Intent.FLAG_FROM_BACKGROUND);
startActivity(intent); 
```

有任何想法吗？

# jquery - jqgrid中的子网格

> ID：15333427
> 
> 赞同：1
> 
> 时间：2013-03-11T07:37:11.717
> 
> 标签：jquery, jqgrid

我的子网格字段可编辑。现在在字段的选项卡上，我正在保存值。保存字段后，如何刷新展开的子网格（无需再次单击 + 图标）。

我有一个网格：commandgrid，它是主网格。

对于子网格，请找到以下代码

```
 subGrid: true,
           subGridUrl : "subgriddata.htm?subgridType=vendor",
           gridView: true,
           subGridModel: [ {
           name:  ['Contact Person','Tax ID','Address','Phone Number','Fax Number','Email','City','State','Delete','Add New Contact',''],
           width : [200,150,200,200,150,200,200,200,50,50,2],
           params: ['VENDOR_ID'] }
        ] 
```

# mysql - 更新MySql表相关记录关系不丢失数据

> ID：15333437
> 
> 赞同：1
> 
> 时间：2013-03-11T07:38:14.477
> 
> 标签：mysql, sql, sql-update

我有三个 MySql 表

类别表：

```
id        link_id     category_id
--------------------------------------
1          5           10
2          6           12
3          5           12 
```

链接表：

```
link_id    link_title         link_url        website_id
-------------------------------------------------------
5          title            test.com/test         1
6          title2           test.com/test2        1
7          title3           link.com/linklist     2 
```

网站表：

```
website_id      url
-----------------------------
1               test.com
2               link.com 
```

现在我需要像这样将类别表 link_id 更改为 website_id

```
id        link_id(/website_id)     category_id
--------------------------------------
1          1                    10
2          2                    12
3          1                    12 
```

这可能使用 MySql 更新查询吗

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T07:42:05.980

你可以加入两个表，

```
UPDATE  category a
        INNER JOIN link b
            ON a.link_id = b.link_ID
SET     a.link_ID = b.website_ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/3d0fd/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:42:16.343

尝试此查询，但请确保在执行此操作之前有备份。

```
UPDATE category AS c
  INNER JOIN Link AS l
    ON l.link_id = c.link_id
SET c.link_id = l.website_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T07:50:59.853

```
UPDATE category
SET link_id = website_id FROM Link L
WHERE L.link_id = category.link_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T07:54:33.233

你能试试这个吗？？

```
update catagory a
set a.link_id = (
  select b.website_id from link b
  inner join website c on b.website_id = c.website_id
    where a.link_id= b.link_id) 
```

# c# - 是否可以使用 DEVEXPRESS 在 Gridview 单元格中添加多个存储库项？

> ID：15333442
> 
> 赞同：0
> 
> 时间：2013-03-11T07:38:39.403
> 
> 标签：c#, repository, devexpress, gridcontrol

我有数据表，我必须将两个存储库项目添加到同一个单元格

```
 DataTable dtbl = null;
     public Form1()
    {
        InitializeComponent();
        dtbl = new DataTable();
        dtbl.Columns.Add("T1");
        dtbl.Columns.Add("T2");
        dtbl.Columns.Add("T3");

        dtbl.Rows.Add("Test1", "Test2", "Test3");
        dtbl.Rows.Add("Test4", "Test5", "Test6");
        dtbl.Rows.Add("Test7", "Test8", "Test9");

        gridControl1.DataSource = dtbl.DefaultView;
        gridView1.CustomRowCellEdit += new DevExpress.XtraGrid.Views.Grid.CustomRowCellEditEventHandler(gridView1_CustomRowCellEdit);
    }

    void gridView1_CustomRowCellEdit(object sender, DevExpress.XtraGrid.Views.Grid.CustomRowCellEditEventArgs e)
    {
        RepositoryItemButtonEdit rebBtn = new RepositoryItemButtonEdit();
        RepositoryItemComboBox rebcmb= new RepositoryItemComboBox();
        rebBtn.AutoHeight = false;
        rebcmb.AutoHeight = false;
        e.RepositoryItem = rebBtn;
        e.RepositoryItem = rebcmb;
    } 
```

我必须添加 Button 和 Combobox 是否可能。

```
 The image i uploaded is a WPF gridColumn , is this possible in DEVEXPRESS GridControl 
```

![在此处输入图像描述](../Images/fb5ebf12da009b68bbf8ebc978d3afcc.png)

```
 This is Devexpress Gridcontrol .. here i created Two sepetate columns.. 
```

![在此处输入图像描述](../Images/8fc699c9245a754430b9efd258fd86ae.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:48:59.227

您不能同时激活两个 RepositoryItems。不过，您可以使用 ComboBox RepositoryItem 并向 Buttons 属性添加一个附加按钮。然后，您可以对 ButtonClick 或 ButtonPressed 事件做出反应。

# javascript - 如何允许用户为下载的文件设置目标文件夹

> ID：15333443
> 
> 赞同：1
> 
> 时间：2013-03-11T07:38:52.297
> 
> 标签：javascript, jquery, jquery-plugins, browser

在我的 Web 应用程序中有一个下载按钮，当用户单击它时，文件会下载到“下载”文件夹。我想添加一个选项，用户可以选择下载文件的文件夹。

![在此处输入图像描述](../Images/a2429d3db8d2bd27dce1795b07028400.png)

我怎样才能做到这一点？有没有可用的插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:58:11.580

您将无法使用 javascript 或 jquery 选择用户的下载位置。这个只能从用户端设置，包含在浏览器上。[否则会侵犯用户的安全](https://stackoverflow.com/questions/4453798/specify-default-download-folder-possibly-with-javascript)。您可以建议的是文件名。[阅读更多](https://stackoverflow.com/questions/13235709/set-file-download-destination-using-extjs)

# php - PHP拆分包含html标签的字符串并将字符串拆分为数组

> ID：15333444
> 
> 赞同：1
> 
> 时间：2013-03-11T07:38:52.483
> 
> 标签：php

1.  问题

    我有这样的字符串***$str="a|apple||b|bat||c|cat||d|dog";***

    从上面的字符串中，我想动态创建一个数组，新创建的数组 shud 看起来像这个 ***数组（ [a] => apple [b] => bat [c] => cat [d] => dog）***

2.  问题

    我有这样的html字符串

    ```
     $html_string="<div>Content Div1</div>
                              <div>Content Div2</div>
                              <div>Content Div3</div>"; 
    ```

我怎样才能得到 3rd DIV ，结果答案应该是这样的

```
 $ans="<div>Content Div3</div>" ; 
```

请任何人帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T07:41:32.703

**第一个**

```
$str = "a|apple||b|bat||c|cat||d|dog";
$new_array = array();

$my_array = explode("||", $str);
$my_array = array_filter($my_array);

foreach ($my_array as $mine) {
  $my = explode("|", $mine);
  $new_array[$my[0]] = $my[1];
} 
```

print_r($new_array);

// 输出

```
Array
(
    [a] => apple
    [b] => bat
    [c] => cat
    [d] => dog
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:47:59.063

```
**for second**

$html_string = "<div>Content Div1</div><div>Content Div2</div><div>Content Div3</div>";
$new_arr = explode("</div>", $html_string);
$my_data = $new_arr[2] . '</div>';
print_r($my_data); 
```

// 输出

```
<div>Content Div3</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T07:48:19.207

试试这个：

**第一的**

```
$str = "a|apple||b|bat||c|cat||d|dog";
$my_array = explode("||", $str);
$finalArr=array();
foreach($my_array as $my_arr)
{
   $myar = explode("|", $my_arr);
   $finalArr[$myar[0]]=$myar[1];
}
print_r($finalArr); 
```

**第二次**

```
$html_string="<div>Content Div1</div><div>Content Div2</div><div>Content Div3</div>";
$secondArray = explode('</div>', $html_string);
echo $res = $secondArray[2] . "</div>"; 
```

在[http://writecodeonline.com/php/上进行测试](http://writecodeonline.com/php/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T07:49:18.593

试试这个：

第一个答案：

```
<?php
$str="a|apple||b|bat||c|cat||d|dog";
$parentArray = explode('||', $str);
$finalArray = array();
foreach($parentArray as $parentKey=>$parentValue)
{
    $childArray = explode('|', $parentValue);
    $finalArray[$childArray[0]] = $childArray[1];
}

echo "<pre>";
print_r($finalArray);
?> 
```

第二个答案

```
<?php
$html_string="<div>Content Div1</div>
                          <div>Content Div2</div>
                          <div>Content Div3</div>";
$finalArray = explode('</div>', $html_string);
$resultRequired = $finalArray[2] . "</div>";                     
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T07:59:23.660

**对于你的第一个问题：**

```
 $tmp_array = explode( '||', $str );
    $str_array = array();

    foreach( $tmp_array as $value ){

        $tmp = explode( '|', $value );
        $str_array[ $tmp[0] ] = $tmp[1];

    } 
```

**对于你的第二个问题**

```
 $html_array = array();
    $pattern = '/\<div\>.*\<\/div\>/i';

    if( preg_match_all( $pattern, $html_string, $matches ) ) {
        $html_array = $matches[0];
    } 
```

**这将使：**

```
 <div>Content Div3</div> 
```

**如果找到任何匹配项，则位于 $html_array[2] 中。**

# ios - 如何将带有开放图形请求的多张图片发布到 Facebook？

> ID：15333449
> 
> 赞同：2
> 
> 时间：2013-03-11T07:39:17.610
> 
> 标签：ios, objective-c, facebook, uiimage, facebook-opengraph

发布一张图片的代码：

```
-(IBAction)postImageToFacebook:(id)sender {

    DLog(@"");

    NSMutableDictionary* params = [[NSMutableDictionary alloc] init];
    [params setObject:self.textField.text forKey:@"message"];

    DLog(@"%@",[params objectForKey:@"message"]);

    if(self.imageView.image){
        DLog(@"not null");
        UIImage *_img = self.imageView.image;

        [params setObject:UIImagePNGRepresentation(_img) forKey:@"picture"];
    }

    [self performPublishAction:^{

        [FBRequestConnection startWithGraphPath:@"me/photos"
                                     parameters:params
                                     HTTPMethod:@"POST"
                              completionHandler:^(FBRequestConnection *connection,
                                                  id result,
                                                  NSError *error)
         {
             if (error)
             {
                 //showing an alert for failure

                 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                                 message:@"unable to post"
                                                                delegate:nil
                                                       cancelButtonTitle:@"OK"
                                                       otherButtonTitles:nil];
                 [alert show];

             }
             else
             {
                 //showing an alert for success
                 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Posted!"
                                                                 message:@""
                                                                delegate:nil
                                                       cancelButtonTitle:@"OK"
                                                       otherButtonTitles:nil];
                 [alert show];
             }

         }];

    }];

} 
```

我可以将另一个对象的重复键添加到 NSMutableDictionary 中吗？

# c# - 将文件拖入富文本框以读取文件中的文本

> ID：15333457
> 
> 赞同：1
> 
> 时间：2013-03-11T07:39:38.187
> 
> 标签：c#, .net, drag-and-drop, text-files, richtextbox

我在将文件拖放到richTextBox 时遇到问题，每次我将文本文件拖到它上面时，它都会变成带有其名称的文本文件的图片。双击该文件，它会使用系统默认应用程序（即文本文件的记事本等）打开。基本上它在richTextBox中制作快捷方式，当我希望它读取文件中的文本时。

基于此代码，文件中的文本**应**提取到richTextBox1

```
 class DragDropRichTextBox : RichTextBox
    {
    public DragDropRichTextBox()
    {
        this.AllowDrop = true;
        this.DragDrop += new DragEventHandler(DragDropRichTextBox_DragDrop);
    }

    private void DragDropRichTextBox_DragDrop(object sender, DragEventArgs e)
    {
        string[] fileNames = e.Data.GetData(DataFormats.FileDrop) as string[];

        if (fileNames != null)
        {
            foreach (string name in fileNames)
            {
                try
                {
                    this.AppendText(File.ReadAllText(name) + "\n");
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);
                }
            }
        }
    } 
```

关于如何使这项工作的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T07:46:37.757

在读入文件之前，您需要检查拖动的对象。试试下面的代码。

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            richTextBox1.DragDrop += new DragEventHandler(richTextBox1_DragDrop);
            richTextBox1.AllowDrop = true;
        }

        void richTextBox1_DragDrop(object sender, DragEventArgs e)
        {
            object filename = e.Data.GetData("FileDrop");
            if (filename != null)
            {
                var list = filename as string[];

                if (list != null && !string.IsNullOrWhiteSpace(list[0]))
                {
                    richTextBox1.Clear();
                    richTextBox1.LoadFile(list[0], RichTextBoxStreamType.PlainText);
                }

            }
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T07:59:11.037

使用它为**Designer.cs中的 RichTextBox 绑定****DragEnter**和**DragDrop**事件

 **```
 this.richTextBox1.AllowDrop = true; this.richTextBox1.DragDrop += new System.Windows.Forms.DragEventHandler(this.textBox1_DragDrop); this.richTextBox1.DragEnter += new System.Windows.Forms.DragEventHandler(this.textBox1_DragEnter);

private void textBox1_DragDrop(object sender, DragEventArgs e)
            {
                try
                {
                    Array a = (Array)e.Data.GetData(DataFormats.FileDrop);
                    if (a != null)
                    {
                        string s = a.GetValue(0).ToString();
                        this.Activate();
                        OpenFile(s);
                    }
                }
                catch (Exception ex)
                {
                    MessageBox.Show("Error in DragDrop function: " + ex.Message);
                }

            }

            private void OpenFile(string sFile)
            {
                try
                {
                    StreamReader StreamReader1 = new StreamReader(sFile);
                    richTextBox1.Text = StreamReader1.ReadToEnd();
                    StreamReader1.Close();
                }
                catch (Exception ex)
                {
                    MessageBox.Show(this, ex.Message, "Error loading from file");
                }

            }

            private void textBox1_DragEnter(object sender, DragEventArgs e)
            {
                if (e.Data.GetDataPresent(DataFormats.FileDrop))
                    e.Effect = DragDropEffects.Copy;
                else
                    e.Effect = DragDropEffects.None;

            } 
```**

# gwt - 如何使 SplitLayoutPanel 的拖动器闪烁？

> ID：15333464
> 
> 赞同：0
> 
> 时间：2013-03-11T07:40:24.807
> 
> 标签：gwt

所以，我有一个 SplitLayoutPanel，需要一个闪烁的拖动器。有没有可能实现它？使用 CSS，硬编码，什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T08:28:58.970

**注意**- 纯粹的 css 效果将是 cpu 密集型的，因此我会选择基于 gif 的解决方案。

## 问题

拆分布局面板使用两个图像来提供[水平](https://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/theme/clean/public/gwt/clean/images/thumb_horz.png)和[垂直](https://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/theme/clean/public/gwt/clean/images/thumb_vertical.png)拆分器。这些是 png 图像，不能动画（闪烁效果）。

## 解决方案

您可以使用动画 gif 图像获得闪烁效果。

您需要为这两个**闪烁**的替换“gif”图像。然后覆盖基本的 gwt 样式并确保您已**`!important`**为被覆盖的样式添加后缀。

```
.gwt-SplitLayoutPanel-HDragger {
  background: #e7e7e7 url(images/thumb_vertical_blinking.gif) center center no-repeat !important;
  cursor: col-resize;
}
.gwt-SplitLayoutPanel-VDragger {
  background: #e7e7e7 url(images/thumb_horz_blinking.gif) center center no-repeat !important;
  cursor: row-resize;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:56:27.793

是的，有可能通过覆盖默认样式来实现

```
.gwt-SplitLayoutPanel .gwt-SplitLayoutPanel-HDragger { horizontal dragger }
.gwt-SplitLayoutPanel .gwt-SplitLayoutPanel-VDragger { vertical dragger }

.gwt-SplitLayoutPanel-VDragger {
       // your set of styles while dragging 
} 

.gwt-SplitLayoutPanel-HDragger {
       // your set of styles while dragging 
} 
```

# security - Cakephp 获取有关安全组件错误的详细信息

> ID：15333470
> 
> 赞同：7
> 
> 时间：2013-03-11T07:40:39.507
> 
> 标签：security, cakephp

我在我的项目中使用安全组件，有什么方法可以在开发过程中获取有关错误的详细描述？例如：- 如果在不使用 cakephp 的 form 方法的情况下在视图中添加了任何字段，它会在我的 blackHoleCallback 函数中返回错误为“auth”。相反，我需要因为它返回该错误的原因。因为解决问题需要很多时间。有没有办法获得详细的错误描述？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T16:50:06.930

你所要做的就是找对地方

## 检查你的`app/tmp/logs/error.log`文件

如果您查看错误日志，您将看到如下条目：

```
2013-03-16 17:24:29 Error: [BadRequestException] The request has been black-holed
#0 root/lib/Cake/Controller/Component/SecurityComponent.php(228): SecurityComponent->blackHole(Object(FacebookUsersController), 'csrf')
#1 [internal function]: SecurityComponent->startup(Object(FacebookUsersController))
#2 root/lib/Cake/Utility/ObjectCollection.php(130): call_user_func_array(Array, Array)
#3 [internal function]: ObjectCollection->trigger(Object(CakeEvent))
#4 root/lib/Cake/Event/CakeEventManager.php(246): call_user_func(Array, Object(CakeEvent))
#5 root/lib/Cake/Controller/Controller.php(670): CakeEventManager->dispatch(Object(CakeEvent))
#6 root/lib/Cake/Routing/Dispatcher.php(183): Controller->startupProcess()
#7 root/lib/Cake/Routing/Dispatcher.php(161): Dispatcher->_invoke(Object(FacebookUsersController), Object(CakeRequest), Object(CakeResponse))
#8 root/app/webroot/index.php(96): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse))
#9 {main} 
```

## 阅读屏幕上的错误

如果您处于调试模式，则此错误也会在错误发生时显示在屏幕上。例如：

```
The request has been black-holed
Error: The requested address '/admin/fooby/edit/1' was not found on this server.

Stack Trace
CORE/Cake/Controller/Component/SecurityComponent.php line 228 → SecurityComponent->blackHole(FacebookUsersController, string)
[internal function] → SecurityComponent->startup(FacebookUsersController)
CORE/Cake/Utility/ObjectCollection.php line 130 → call_user_func_array(array, array)
[internal function] → ObjectCollection->trigger(CakeEvent)
CORE/Cake/Event/CakeEventManager.php line 246 → call_user_func(array, CakeEvent)
CORE/Cake/Controller/Controller.php line 670 → CakeEventManager->dispatch(CakeEvent)
CORE/Cake/Routing/Dispatcher.php line 183 → Controller->startupProcess()
CORE/Cake/Routing/Dispatcher.php line 161 → Dispatcher->_invoke(FacebookUsersController, CakeRequest, CakeResponse)
APP/webroot/index.php line 96 → Dispatcher->dispatch(CakeRequest, CakeResponse) 
```

## 处理 csrf 错误

有了*特定*错误的*详细信息*（即您发布的数据，以及您当时会话中的确切令牌数据），就可以回答给您带来的问题，如果没有的话：

 *### *查看*抛出错误的行。

在上面的堆栈跟踪中，错误来自`CORE/Cake/Controller/Component/SecurityComponent.php line 228`- 打开文件并查看该代码是什么：

```
if ($isPost && $isNotRequestAction && $this->csrfCheck) {
    if ($this->_validateCsrf($controller) === false) {
        return $this->blackHole($controller, 'csrf');
    }   
} 
```

从中应该很明显的是，该函数`_validateCsrf`负责请求被黑洞。这应该不足为奇。

*查看*该函数的来源：

```
protected function _validateCsrf(Controller $controller) {
    $token = $this->Session->read('_Token');
    $requestToken = $controller->request->data('_Token.key');
    if (isset($token['csrfTokens'][$requestToken]) && $token['csrfTokens'][$requestToken] >= time()) {
        if ($this->csrfUseOnce) {
            $this->Session->delete('_Token.csrfTokens.' . $requestToken);
        }
        return true;
    }
    return false;
} 
```

根据该函数返回 false 的原因，确定您如何继续调试。

### 正确配置组件

调试 CSRF 错误的必然结果是您需要修改[Security 组件的配置](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html#csrf-configuration)。

例如，您是否想要重用令牌，因为您的应用在页面加载之间多次提交相同的表单？

您是否通过向表单数据添加新字段来使表单请求自我失效 - 您可以使用[unlockedFields 属性](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html#SecurityComponent::$unlockedFields)从 csrf 检查中排除这些字段。

您也可以完全[禁用 CSRF 检查](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html#disabling-the-csrf-protection)。这会带来明显的安全后果 - 但如果您正在努力使用该组件，这是一种解决您当前面临的问题的简单方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-27T01:57:50.983

为了了解我在代码中挖掘的机制，以了解 FormHelper 哈希是如何创建的，以及 SecurityComponent 验证如何检查哈希。以下是如何准确了解幕后发生的事情。

**检查 FormHelper 的输入。** 打开 CORE/Cake/View/Helper/FormHelper.php。在 secure() 函数中，在 $files=Security::hash 行周围添加一些 pr 行，以查看令牌是如何构建的：

```
pr($fields);//hashed into computed token on next line
$fields = Security::hash(serialize($fields) . $unlocked . Configure::read('Security.salt'), 'sha1');
pr($unlocked); //hashed into computed token
pr(Configure::read('Security.salt')); //hashed into computed token
pr($fields); //computed token passed via hidden token field in form 
```

**检查表单是如何处理** 的 现在检查提交的表单是如何处理的，并与传递的令牌进行比较：打开 CORE/Cake/Controller/Component/SecurityComponent.php。在最后的 _validatePost() 例程中插入一些 pr 行：

```
pr($fieldList); //hashed into computed token
pr($unlocked); //hashed into computed token
pr(Configure::read('Security.salt')); //hashed into computed token
pr($token); //passed token from FormHelper
pr($check); //computed token 
```

希望这可以帮助其他遇到锁定/解锁或丢失字段问题的人快速弄清楚蛋糕内部发生了什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-20T14:59:14.867

还请记住，您必须在由 the`Token`生成的`FormHelper`和使用 Session 检索到的 bu cake 之间完全匹配。正如文档所说，当您动态生成输入或进行 ajax 调用时，可能会发生不匹配：记住序列化表单并通过 ajax 提交！

如果您生成的输入标签不是使用 生成的`FormHelper`，则必须解锁它们。例如在你的`beforeFilter()`：

```
$this->Security->unlockedFields = 
                 array('MyModel.some_field1','MyModel.some_field2') 
```

where`field1`和`field2`是“手动”生成的字段，即不使用 Helper。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-03T04:15:42.973

回答这个问题：“有没有办法获得详细的错误描述？”

当涉及到 SecurityComponent 时，第一件事是为您的控制器添加更有价值的调试。这是一种方法：

```
public function beforeFilter() {
    parent::beforeFilter();

    //your beforeFilter code

    //Enable CSRF and other protections
    $this->Security->csrfExpires = '+1 hour';
    $this->Security->csrfUseOnce = true;
    $this->Security->blackHoleCallback = 'blackhole';
}

public function blackhole($errorType) {

    $errorMap['auth']   = 'form validation error, or a controller/action mismatch error.';
    $errorMap['csrf']   = 'CSRF error.';
    $errorMap['get']    = 'HTTP method restriction failure.';
    $errorMap['post']   = $errorMap['get'];
    $errorMap['put']    = $errorMap['get'];
    $errorMap['delete'] = $errorMap['get'];
    $errorMap['secure'] = 'SSL method restriction failure.';
    $errorMap['myMoreValuableErrorType']    = 'My custom and very ' . 
    'specific reason for the error type.';

    CakeLog::notice("Request to the '{$this->request->params['action']}' " . 
"endpoint was blackholed by SecurityComponent due to a {$errorMap[$errorType]}");
} 
```

正如 AD7six 提到的，看看`CORE/Cake/Controller/Component/SecurityComponent.php`. 具体来说`SecurityComponent::startup()`。在该方法中，您会注意到该`SecurityComponent::blackhole()`方法运行了几次。只要条件未能通过安全检查，它就会运行，如下所示：

```
return $this->blackHole($controller, 'auth'); 
```

在这种情况下，“auth”表示失败的安全检查类型。您可以自定义 'auth' 字符串以使其更有价值。例如，使用“myMoreValuableErrorType”代替“auth”，然后将其映射到更有意义的东西。

因此，不是`$this->blackHole($controller, 'auth')`在安全检查失败时运行，而是运行`$this->blackHole($controller, 'myMoreValuableErrorType')`，然后使用上面的代码将“myMoreValuableErrorType”映射到失败的具体原因。*

# html - 仅使用 CSS3/HTML5 绘制图像的标准方法——例如：HTML 5 徽标？

> ID：15333471
> 
> 赞同：3
> 
> 时间：2013-03-11T07:40:43.407
> 
> 标签：html, css, graphical-logo

什么是在 HTML 5 中构建[HTML 5](http://en.wikipedia.org/wiki/HTML5)徽标而不使用`<img>`元素或使用 canvas`drawImage`或以其他方式使用图像资源的位图数据的最具学术性的方法。

换句话说，使用 HTML 5、CSS3 和我想象的 DIV 和画布绘制**准确构建 HTML 5 徽标的方法是什么？**我不是一个 CSS3 向导，它看起来非常令人生畏，比如说 100 多行，如果知道一个标准的方法来解决这个问题会很好。

![在此处输入图像描述](../Images/33b1a642bfc1c847e84153cc502b48e4.png)

这是一个非常有趣的编程问题。徽标本身非常酷，看起来非常 HTML 5/CSS3。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T07:44:34.903

这个单标签徽标将帮助您-

# 纯CSS

```
<div id="css3icon" /> 
```

CSS-

```
#css3icon {
    outline:solid 1px transparent;
    display:inline-block;
    position:relative;
    height:0.8em; width:0.8em;
    background:transparent;
    color:transparent;
    line-height:0.8em;
    overflow:visible;
    box-shadow:
        0.8em  0 0 #38c,
        1.4em  0 0 #38c,
        2em 0 0 #38c,
        2.6em 0 0 #38c,
        3.2em 0 0 #38c,
        3.6em 0 0 #38c,
        4em 0 0 #38c,
        4em 0.65em 0 #38c,
        0.8em 1.3em 0 #38c,
        1.4em 1.3em 0 #38c,
        2em 1.3em 0 #38c,
        2.6em 1.3em 0 #38c,
        3.2em 1.3em 0 #38c,
        3.6em 1.3em 0 #38c,
        4em 1.3em 0 #38c,
        4em 1.9em 0 #38c,
        0.8em 2.6em 0 #38c,
        4em 2.6em 0 #38c;
    transform: skewX(-12deg);
    -webkit-transform: skewX(-12deg);
    -ms-transform: skewX(-12deg);   
}
#css3icon:before {
    position:absolute;
    content:''; 
    display:block;
    height:0.8em; width:2em;
    margin:3.4em 0 0 0.8em;
    background:#38c;
    transform: skew(-1deg,18.4deg); 
    transform-origin: 100% 100%;
    -webkit-transform: skew(-1deg,18.4deg); 
    -webkit-transform-origin: 100% 100%;
    -ms-transform: skew(-1deg,18.4deg); 
    -ms-transform-origin: 100% 100%;
    border-right:solid 1px #38c;
}
#css3icon:after {
    position:absolute;
    content:''; 
    display:block;
    height:0.8em; width:2em;
    margin:3.4em 0 0 2.8em;
    background:#38c;
    transform: skew(1deg,-18.4deg); 
    transform-origin: 0% 100%;
    -webkit-transform: skew(1deg,-18.4deg); 
    -webkit-transform-origin: 0 100%;
    -ms-transform: skew(1deg,-18.4deg); 
    -ms-transform-origin: 0 100%;
}

body {
 width:100%;
 padding-top:1em;
 font-size:3em;
 text-align:center;
}
body > * { position:relative; left:-2.4em; } 
```

单击[此处](http://jsfiddle.net/stackmanoz/VbgKW/)查看实时示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T07:59:20.913

HTML5 徽标是图形图像。只有一种语义正确的方式来显示它，那就是使用指向 SVG 格式图形的图像标签：

```
<img src="http://www.w3.org/html/logo/downloads/HTML5_Logo.svg"> 
```

以其他方式显示它可能是一项学术编程练习——例如通过滥用 CSS——但这种方式在语义上是不正确的。画布也不正确，除非徽标有一些动画或其他需要画布的脚本行为。

您的问题与说如何在不使用 ap 标签的情况下以语义正确的方式插入一段正文文本相同？回答：你不能。您可以以其他方式插入它，但这些方式在语义上是不正确的。

# web-services - 未找到与请求匹配的服务

> ID：15333475
> 
> 赞同：0
> 
> 时间：2013-03-11T07:41:03.163
> 
> 标签：web-services, soapui

我正在尝试使用soapUI测试Web服务并获得响应：

```
 <faultstring>No service was found matching the request</faultstring> 
```

请让我知道我该如何克服这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:42:32.077

您的端点可能是错误的。有时 WSDL 使用该选项来生成默认端点，它们可能有效也可能无效。因此，您需要在信任它们之前检查它们。

# java - 设置主目录或工作目录

> ID：15333476
> 
> 赞同：1
> 
> 时间：2013-03-11T07:41:07.687
> 
> 标签：java

我有一个 java 应用程序并将其捆绑为`App.jar`. 我使用了一些第三方工具（让我们称之为`NumberGenerator`）。`App.jar`启动一个进程并调用`NumberGenerator`以获取输出。为了引用可执行文件，我使用了相对路径`new File("lib/NumberGenerator.exe")`，它运行良好。

现在在 Mac 上，我已经使用它捆绑了应用程序[，](http://java.net/downloads/appbundler/appbundler.html)它会自动生成一个应用程序启动器。当我通过单击启动器运行时，它会启动应用程序。但它将主目录设置为`~`ie`/Users/Jatin`而不是 jar 文件所在的位置。因此我的应用程序无法检测到该`lib`文件夹​​（显然是因为它不在那个位置）

在我的 Java 代码中，如何将主文件夹设置为我所在的位置`jar`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:54:02.443

我在linux上遇到了类似的问题。我不太了解 osx 而不是 AppBundler 但在 linux 中我通过创建这个脚本解决了它

```
#!/usr/bin/env sh
java -Duser.dir=$(pwd) -jar myapp.jar 
```

如果您设法通过双击来运行脚本，它可能会起作用...请参阅[如何通过双击在 OS X 中运行 shell 脚本？](https://stackoverflow.com/questions/5125907/how-to-run-a-shell-script-in-os-x-by-double-clicking)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T07:58:08.993

```
return new File(MyClass.class.getProtectionDomain().getCodeSource().getLocation().getPath()); 
```

只需检查此线程[如何获取正在运行的 JAR 文件的路径？](https://stackoverflow.com/questions/320542/how-to-get-the-path-of-a-running-jar-file)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T08:20:00.087

我看到两种方法：

*   在`Info.plist`中，指定`java.library.path`相对于`$JAVAROOT`，如此处引用的文章中[所述](https://stackoverflow.com/a/8956715/230513)。

    ```
    <key>Java</key>
    <dict>
    ...    
        <key>Properties</key>
        <dict>
            <key>java.library.path</key>
            <string>$JAVAROOT/</string>
        </dict>
    ...    
    </dict> 
    ```

*   使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)，它允许您按操作系统和体系结构管理本机[资源。](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/syntax.html#resources)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T07:44:14.237

你可以试试这个：

```
System.setProperty("user.home", "your-dir"); 
```

# java - 凸起的标签android消失

> ID：15333477
> 
> 赞同：0
> 
> 时间：2013-03-11T07:41:10.553
> 
> 标签：java, android

我从这里下载了用于 android 的凸起标签主机：

[https://github.com/AdilSoomro/Raised-Center-Tab-in-Android](https://github.com/AdilSoomro/Raised-Center-Tab-in-Android)

我写了这段代码：

```
public class TabMainActivity extends TabActivity {
    TabHost tabHost;
    private String name;
    private String city;
    private String country;
    private String street;
    private String id;
    private String email;
    private String password;
    private String phone;
    private String emailOwner;

    /** Called when the activity is first created. */

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab_main);

         Intent intent = getIntent();
            name = intent.getExtras().getString("name");
            password = intent.getExtras().getString("password");
            email = intent.getExtras().getString("email");
            id = intent.getExtras().getString("id");
            phone = intent.getExtras().getString("phone");

            emailOwner=intent.getExtras().getString("emailOwner");
        tabHost = getTabHost();
        setTabs();
    }
    private void setTabs()
    {
        addTab("Home", R.drawable.tab_home, ProfileActivity.class);
        addTab("Search", R.drawable.tab_search, SaleMapActivity.class);
        addTab("Fake", R.drawable.tab_search, GroupMapActivity.class);
        addTab("Home", R.drawable.tab_home, DeliverMapActivity.class);
        addTab("Search", R.drawable.tab_search, ProfileActivity.class);
    }
    private void addTab(String labelId, int drawableId, Class<?> c)
    {
        Intent intent = new Intent(this, c);

        intent.putExtra("emailOwner", emailOwner);
        intent.putExtra("phone", phone);
        intent.putExtra("email",email  );
        intent.putExtra("password",password  );
        intent.putExtra("id",id  );
        intent.putExtra("name",name  );
        TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId); 

        View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);
        TextView title = (TextView) tabIndicator.findViewById(R.id.title);
        title.setText(labelId);
        ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
        icon.setImageResource(drawableId);      
        spec.setIndicator(tabIndicator);
        spec.setContent(intent);
        tabHost.addTab(spec);
    }
    public void openCameraActivity(View b)
    {
        Intent i = new Intent(this, ProfileActivity.class);

        i.putExtra("emailOwner", emailOwner);
        i.putExtra("phone", phone);
        i.putExtra("email",email  );
        i.putExtra("password",password  );
        i.putExtra("id",id  );
        i.putExtra("name",name  );
        startActivity(i);
    }
} 
```

每当我单击中心按钮（cumera 按钮）时，它都会打开配置文件活动，但是选项卡会消失..

我如何实现当单击居中按钮（相机按钮）时标签不会消失？

谢谢

# android - 套接字和 SDK 最小版本

> ID：15333482
> 
> 赞同：1
> 
> 时间：2013-03-11T07:41:39.957
> 
> 标签：android

在此之前我编写了一个应用程序，它使用套接字类来创建一个 TCP/IP 客户端，如下所示：

```
Socket soc;
DataOutputStream out;
DataInputStream in;

//in try-catch loop
soc = new ("192.168.1.101", 100);
out = new DataOutputStream(socket.getOutputStream());
in = new DataInputStream(socket.getInputStream());

.....//code on I/O through socket 
```

它在我以前的应用程序上运行良好，运行 sdk 9

现在我试图在我的新应用程序中使用相同的功能，它使用片段和需要 sdk 11。但是应用程序在运行套接字代码时崩溃。一旦我在 manifest.xml 中将 android:minSdkVersion 更改为 9，它就会再次工作。但我需要 minSDK 11 作为片段。

我应该怎么办？我只有几个月的 Android 代码，如果我问了愚蠢的问题，请原谅我。非常感谢！

编辑：这是触发 Socket 功能的 OnClick 函数：

```
private Button.OnClickListener m_BtnConnectDisconnectOnClick = new Button.OnClickListener()
{
   public void onClick(View v)
   {
         try
         {
          //Obtaining IP Address & Port number
          String str_ip = m_EditPumpIP.getText().toString();
          int int_port = Integer.parseInt(m_EditPumpPort.getText().toString());

          //Establish Pump Connection
          socket = new Socket(str_ip, int_port);
          out = new DataOutputStream(socket.getOutputStream());
          in = new DataInputStream(socket.getInputStream());

          //Update Status
          m_TextSystemStatus.setText("OK");
         }
         catch (IOException e)
         {
           //Update Status
           m_TextSystemStatus.setText("Fail");
         }
   }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:40:35.493

把它放在 AsyncTask

```
//Establish Pump Connection
          socket = new Socket(str_ip, int_port);
          out = new DataOutputStream(socket.getOutputStream());
          in = new DataInputStream(socket.getInputStream()); 
```

[喜欢这个例子](https://stackoverflow.com/questions/9671546/asynctask-android-example)

# java - “无法从”类路径上的 jar 加载主类清单属性

> ID：15333489
> 
> 赞同：0
> 
> 时间：2013-03-11T07:42:41.160
> 
> 标签：java, jar, manifest

所以我有一个需要 2 个 jars 作为依赖项的 java 应用程序。两个依赖项之一是我编写的名为 VT Access 的 java 库，它没有主类。另一个依赖 jar 是 jsoup。

因此，我使用 Manifest 从 eclipse 的类路径中导出了我的 java 应用程序，包括这两个 jar：

```
Manifest-Version: 1.0
Main-Class: vt.access.workshop/UI
Class-Path: "C:\Users\ethan\Documents\ACTUAL My Documents\Programs\VT Access API workshop\Dependencies\*" 
```

现在，当我运行生成的 jar 时，我得到了错误：

```
Failed to load Main-Class manifest attribute from
.\VT Access.jar 
```

所以我不明白可能是什么问题，为什么这个程序关心它的依赖项之一是否有主类？

顺便说一句，Vt Access 的清单在这里：

```
Manifest-Version: 1.0
Class-Path: "C:\Users\ethan\Documents\ACTUAL My Documents\Libraries\Java Libraries\jsoup\jsoup-1.6.3.jar" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:31:28.210

您的班级名称无效：

```
vt.access.workshop/UI 
```

应该

```
vt.access.workshop.UI 
```

此外，我不确定您是否可以在类路径中使用绝对路径，我更不确定您是否可以使用通配符。而且我也很确定类路径不是传递的，所以你应该使用相对路径，并在类路径中添加你的 jar 依赖的所有 jar 文件：

```
Class-Path: jsoup-1.6.3.jar vtaccess.jar 
```

如果将这些库添加到子目录，请使用正斜杠而不是反斜杠。并从 jar 文件名中删除空格：

```
Class-Path: lib/jsoup-1.6.3.jar lib/vtaccess.jar 
```

有关更多信息，请参阅[Java 教程](http://docs.oracle.com/javase/tutorial/deployment/jar/manifestindex.html)。

# jetty - 使用基于 Jetty 的应用程序测量流入和流出流量

> ID：15333496
> 
> 赞同：0
> 
> 时间：2013-03-11T07:43:12.613
> 
> 标签：jetty

我的服务器应用程序使用嵌入式码头作为 http 端点。它托管了几个带有一堆 jsp/servlet 的 Web 应用程序以及几个 Web 服务。

此应用程序最终将部署在云上，但在此之前，我想确保此应用程序测量通过码头的流入和流出（以字节为单位）。我可能会以某种方式制作一个全局过滤器并计算字节数..

但是有没有更**智能**的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:55:07.320

您应该[`NetworkTrafficListener`](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/io/NetworkTrafficListener.html)在 Jetty 7 和 8 中检查，以及如何在[这个测试类](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-server/src/test/java/org/eclipse/jetty/server/NetworkTrafficListenerTest.java?h=jetty-8)中使用它。

# c++ - 是否存在轻量级和免安装数据库系统？

> ID：15333502
> 
> 赞同：-1
> 
> 时间：2013-03-11T07:43:53.183
> 
> 标签：c++, c, database

我想使用数据库的优点，而不是我自己管理的平面文件。我想使用 QSL 查询等，但没有单独安装数据库管理服务器。我想要一个可以免安装发布的程序，而不需要我的最终用户安装和配置 mysql 或 WAMP 或类似的东西。

有什么解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T07:48:13.167

你可以试试 SQLite。它不需要单独的服务器实例，但您可以编写 SQL 查询。

# spring - 带有 SiteMesh 的 Spring MVC 控制器

> ID：15333504
> 
> 赞同：1
> 
> 时间：2013-03-11T07:43:54.687
> 
> 标签：spring, spring-mvc, sitemesh

我有一个使用 sitemesh 和 spring mvc 的应用程序，但无法应用 css 和 javascript。

```
15:13:38,745 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-1) No mapping found for HTTP request with URI [/SiteMesh/css/default.css] in DispatcherServlet with name 'spring'
15:13:38,750 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-5) No mapping found for HTTP request with URI [/SiteMesh/css/jquery.jmover.css] in DispatcherServlet with name 'spring'
15:13:38,748 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-6) No mapping found for HTTP request with URI [/SiteMesh/css/jquery-updates.css] in DispatcherServlet with name 'spring'
15:13:38,748 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-3) No mapping found for HTTP request with URI [/SiteMesh/css/jquery-ui-1.7.1.custom.css] in DispatcherServlet with name 'spring'
15:13:38,745 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-2) No mapping found for HTTP request with URI [/SiteMesh/css/view.css] in DispatcherServlet with name 'spring'
15:13:38,755 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-3) No mapping found for HTTP request with URI [/SiteMesh/script/jquery.dataTables-1.7.5.min.js] in DispatcherServlet with name 'spring'
15:13:38,755 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-6) No mapping found for HTTP request with URI [/SiteMesh/css/jquery-ui.css] in DispatcherServlet with name 'spring'
15:13:38,759 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-2) No mapping found for HTTP request with URI [/SiteMesh/script/jquery.validate.js] in DispatcherServlet with name 'spring'
15:13:38,753 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-5) No mapping found for HTTP request with URI [/SiteMesh/css/menu.css] in DispatcherServlet with name 'spring'
15:13:38,750 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-4) No mapping found for HTTP request with URI [/SiteMesh/css/datatables.css] in DispatcherServlet with name 'spring'
15:13:38,750 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-1) No mapping found for HTTP request with URI [/SiteMesh/css/confirmationStyle.css] in DispatcherServlet with name 'spring'
15:13:38,762 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-2) No mapping found for HTTP request with URI [/SiteMesh/script/jquery.autocomplete.js] in DispatcherServlet with name 'spring'
15:13:38,759 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-6) No mapping found for HTTP request with URI [/SiteMesh/script/jquery.blockUI.js] in DispatcherServlet with name 'spring'
15:13:38,764 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-5) No mapping found for HTTP request with URI [/SiteMesh/script/jquery.selectboxes.min.js] in DispatcherServlet with name 'spring'
15:13:38,757 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-3) No mapping found for HTTP request with URI [/SiteMesh/script/jquery-ui.core.js] in DispatcherServlet with name 'spring'
15:13:38,763 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-1) No mapping found for HTTP request with URI [/SiteMesh/script/dropmenu.js] in DispatcherServlet with name 'spring'
15:13:38,763 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-4) No mapping found for HTTP request with URI [/SiteMesh/script/jquery.jmover-1.2.js] in DispatcherServlet with name 'spring'
15:13:38,843 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-1) No mapping found for HTTP request with URI [/SiteMesh/script/jquery-ui.core.js] in DispatcherServlet with name 'spring'
15:13:38,859 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-1) No mapping found for HTTP request with URI [/SiteMesh/script/jquery.blockUI.js] in DispatcherServlet with name 'spring'
15:13:38,879 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-1) No mapping found for HTTP request with URI [/SiteMesh/script/jquery.autocomplete.js] in DispatcherServlet with name 'spring'
15:13:38,894 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-1) No mapping found for HTTP request with URI [/SiteMesh/script/jquery.selectboxes.min.js] in DispatcherServlet with name 'spring'
15:13:38,900 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-1) No mapping found for HTTP request with URI [/SiteMesh/script/jquery.jmover-1.2.js] in DispatcherServlet with name 'spring'
15:13:38,929 WARN  [org.springframework.web.servlet.PageNotFound] (http-localhost-127.0.0.1-8080-1) No mapping found for HTTP request with URI [/SiteMesh/script/dropmenu.js] in DispatcherServlet with name 'spring' 
```

我确认 sitemesh 工作正常，因为当我更改 url 模式时，sitemesh 无法正常工作。

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.5"
 xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
 <display-name>SiteMesh</display-name>
 <context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>/WEB-INF/spring/applicationContext.xml</param-value>
 </context-param>
 <filter>
  <display-name>SiteMesh_Filter</display-name>
  <filter-name>SiteMesh_Filter</filter-name>
  <filter-class>com.opensymphony.module.sitemesh.filter.PageFilter</filter-class>
 </filter>
 <filter-mapping>
  <filter-name>SiteMesh_Filter</filter-name>
  <url-pattern>/*</url-pattern>
 </filter-mapping>
 <listener>
  <display-name>Spring_Context_Loader_Listener</display-name>
  <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
 </listener>
 <servlet>
  <display-name>Spring_Dispatcher_Servlet</display-name>
  <servlet-name>spring</servlet-name>
  <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
 </servlet>
 <servlet-mapping>
  <servlet-name>spring</servlet-name>
  <url-pattern>/</url-pattern>
 </servlet-mapping>
 <welcome-file-list>
  <welcome-file>index.jsp</welcome-file>
 </welcome-file-list>
</web-app> 
```

我的装饰器布局 JSP

```
<%@include file="../pages/init-page.jsp" %>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="" />
    <meta name="description" content="" />
    <title>
        <decorator:title default="IRM - Intelligent Routing Module" />
    </title>    

    <!-- CSS Links -->
    <link rel="stylesheet" href="${context}/css/default.css" type="text/css" />
    <link rel="stylesheet" href="${context}/css/view.css" type="text/css" />
    <link rel="stylesheet" href="${context}/css/jquery-ui-1.7.1.custom.css" type="text/css" media="screen" />
    <link rel="stylesheet" type="text/css" media="screen" href="${context}/css/datatables.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="${context}/css/jquery.jmover.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="${context}/css/jquery-updates.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="${context}/css/confirmationStyle.css"/>
    <link rel="stylesheet" href="${context}/css/menu.css" type="text/css" />
    <link rel="stylesheet" href="${context}/css/jquery-ui.css" type="text/css" />

    <!-- Scripts -->

    <script type="text/javascript" src="${context}/script/jquery.dataTables-1.7.5.min.js"></script>
    <script type="text/javascript" src="${context}/script/jquery.validate.js"></script>
    <script type="text/javascript" src="${context}/script/jquery-ui.core.js"></script>
    <script type="text/javascript" src="${context}/script/jquery.blockUI.js"></script>
    <script type="text/javascript" src="${context}/script/jquery.autocomplete.js"></script> 
    <script type="text/javascript" src="${context}/script/jquery.selectboxes.min.js"></script>
    <script type="text/javascript" src="${context}/script/jquery.jmover-1.2.js"></script>

    <decorator:head/>
</head>

<body>  

    <%-- Header --%>
    <%@include file="../pages/header.jsp" %>

    <c:if test="${sessionScope.user != null}">
        <%@include file="../pages/header.jsp" %>
    </c:if>
    <decorator:body/>

    <%-- Footer --%>
    <%@include file="../pages/footer.jsp" %>
</body>
</html> 
```

似乎无法应用此 jsp 中的所有脚本和 css。

它有什么问题？

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:56:52.990

尝试在上下文 xml 中添加以下标记。这将指定哪个目录包含静态资源。根据您的需要更改位置。

```
<mvc:resources location="/resources/" mapping="/resources/**" /> 
```

阅读[这篇文章](https://stackoverflow.com/questions/15010977/spring-mvc-3-tiles-2-static-resources-are-not-displayed-even-in-non-tiles-pa)以了解更多信息。

# c++ - 服务器 2008 R2 中的凭据提供程序

> ID：15333507
> 
> 赞同：1
> 
> 时间：2013-03-11T07:44:00.500
> 
> 标签：c++, windows, windows-authentication, credential-providers

我是凭证提供者的新手。我已经让我的提供者以 SampleCredentialProvider 为起点。在某些机器上它工作。现在我看到在 WINDOWS Server 2008 R2 上它不起作用：它没有比实例化凭据提供程序更进一步。特别是，我没有收到 GetCredentialsCount 电话。您能否给我一些提示，说明为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T19:41:53.770

可能有多种原因，但我的猜测是您没有在正确的位置注册（HKLM\Software\Microsoft\Windows\CurrentVersion\Authentication\Credential Providers），或者您没有正确实施 IUNKNOWN。

我会尝试从[pGina](http://pgina.org)开始。它为您完成了大部分困难的事情。

# c# - 为什么 ModelState.IsValid 在 mvc 中总是返回 false

> ID：15333513
> 
> 赞同：34
> 
> 时间：2013-03-11T07:44:38.177
> 
> 标签：c#, asp.net-mvc

在我的控制器中，这段代码：

```
[HttpPost]
        public ActionResult Edit(Company company, FormCollection IsCostCenters)
        {
            if (ModelState.IsValid)
            {
                Company objNewCompany = new Company();
                //oParty.CostCenters.Clear();

                using (PaymentAdviceEntityContainer db1 = new PaymentAdviceEntityContainer())
                {
                    objNewCompany = db1.Companies.Find(company.Id);

                    objNewCompany.CostCenters.Clear();

                    string[] temp = IsCostCenters["CostCenters"].Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries);
                    foreach (var s in temp)
                    {
                        if (s != "false")
                        {

                            CostCenter oCostCenter = new CostCenter();
                            oCostCenter = db1.CostCenters.Find(Convert.ToInt32(s));
                            objNewCompany.CostCenters.Add(oCostCenter);
                        }
                    }
                    db1.SaveChanges();
                }

                db.Entry(company).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            ViewBag.CreatedById = new SelectList(db.Employees, "Id", "FirstName", company.CreatedById);
            return View(company);
        } 
```

我的视图代码如下

```
@using PaymentAdviceEntity;
@{

    ViewBag.Title = "Edit";
    List<CostCenter> clist = new List<CostCenter>();
    clist = ((List<CostCenter>)ViewBag.CostCenters).ToList();
}

                       <div style="line-height: 22px; width: 100%;height :3%; float: left; ">
                       @{
    foreach (var item in clist)
    {                      
                             <div  style="line-height: 22px; width: 28%; float: left;">
                                                <span class="checkbox">@Html.CheckBox("CostCenters", item.IsChecked, new { @value = item.Id })</span>
                                               <span>@Html.DisplayFor(modelItem => item.Name)</span>

                              </div> 

    }
} 
```

`ModelState.IsValid`那么请在页面发布时间返回false的原因是什么......

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2013-03-11T08:37:08.117

请发布您的*模型*类。

要检查您`ModelState`使用以下代码中的错误：

```
var errors = ModelState
    .Where(x => x.Value.Errors.Count > 0)
    .Select(x => new { x.Key, x.Value.Errors })
    .ToArray(); 
```

**或：**您也可以使用

```
var errors = ModelState.Values.SelectMany(v => v.Errors); 
```

在上面的行放置一个断点，看看你的`ModelState`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-11T07:57:24.500

正如布拉德威尔逊在[他的回答](https://stackoverflow.com/a/881351/19679)中所说：

> ModelState.IsValid 告诉您是否已将任何模型错误添加到 ModelState。
> 
> 默认模型绑定器会为基本类型转换问题添加一些错误（例如，为“int”传递非数字）。您可以根据您使用的任何验证系统更充分地填充 ModelState。

尝试使用：-

```
if (!ModelState.IsValid)
{
    var errors = ModelState.SelectMany(x => x.Value.Errors.Select(z => z.Exception));

    // Breakpoint, Log or examine the list with Exceptions.
} 
```

如果它有助于发现错误。[礼貌这个](https://stackoverflow.com/questions/1791570/modelstate-isvalid-false-why)和[这个](https://stackoverflow.com/questions/684445/what-can-cause-viewdata-modelstate-isvalid-to-become-false)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-11T08:42:02.837

“ModelState.IsValid”告诉您视图使用的模型（即PaymentAdviceEntity）满足所有类型的验证或DataAnotation 未在模型属性中指定。

在此代码中，视图不绑定任何模型属性。因此，如果您在模型中放置任何 DataAnnotations 或验证（即 PaymentAdviceEntity）。那么验证不满足。假设模型中的任何属性是模型中需要的名称。然后属性的值在发布后保持空白。因此模型无效（即 ModelState.IsValid 返回 false）。您需要删除模型级别的验证。

# matlab - 多项式曲线拟合中的初学者问题 [第 1 部分]

> ID：15333519
> 
> 赞同：4
> 
> 时间：2013-03-11T07:45:37.977
> 
> 标签：matlab, regression, curve-fitting

我刚刚开始了解基于回归模型的建模技术，并且正在使用 MATLAB 曲线拟合工具箱和[SO](https://stackoverflow.com/questions/382186/fitting-polynomials-to-data)。我有基本的疑问，无法进一步进行。我有一个带有 k=100 个数据点的向量集，我想依次将其放入 AR 模型、MA 模型、ARMA 模型中，以查看哪个更适合。从以下形式的 AR(p) 模型`y(k+1)=a*y(k)+ b*y(k-1)`开始

```
coeff = polyfit(x,y,d) 
```

将拟合度数多项式，例如`d`= 1，其中`p`系数的数量表示模型的阶数 (AR(p))。但我只有一组数据，它是角矩的记录。那么，函数签名的第一个参数 (x) 将是什么，即 x,y 是什么？那么，如果线性模型不是足够好，所以我可能不得不选择非线性模型。有人可以用代码片段指导拟合的步骤是什么，检查过度拟合，残差计算等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T07:57:25.820

`x`可能是`k`（y 的索引）。和整个代码：

`c =polyfit(1:length(y), y, d)`.

Matlab 有一个`curve fitting toolbox`. 您可以使用它来检查 GUI 中的不同非线性拟合以获得一些直觉。

如果您需要步骤，这里有很棒的 Coursera[机器学习](http://ml-class.org)课程。本课程的开头与线性回归有关，我建议您至少在此开头花费几个小时。

# c# - 带有 using 关键字的 SqlDataAdapter

> ID：15333522
> 
> 赞同：4
> 
> 时间：2013-03-11T07:45:57.400
> 
> 标签：c#, ado.net, dispose, using, sqldataadapter

这是以下代码健康吗？或者我不需要使用`using`关键字`SqlDataAdapter`来处理关闭连接？

```
public static DataSet Fetch(string sp, SqlParameter [] prm)
{
    using (SqlConnection con = new SqlConnection(ConStr))
    {
        using (SqlCommand cmd = con.CreateCommand())
        {
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.CommandText = sp;
            cmd.Parameters.AddRange(prm);

            using (SqlDataAdapter dta = new SqlDataAdapter(cmd))
            {
                DataSet dst = new DataSet();
                dta.Fill(dst);

                return dst;
            }
        }
    }
} 
```

* * *

* * *

@MarkGravell我在这里需要一个建议，我真的很想使用`DataReader`，但我一直在寻找使用`using`关键字来确保关闭连接。我们`DataReader`不能使用它，因为如果我们想返回`DataReader`某个方法，它将关闭连接。那么你认为下面的技术对`DataReader`和`using`关键字很好：

```
public static SqlDataReader Fetch(string sp, SqlParameter [] prm)
{
    SqlCommand cmd = new SqlConnection(ConStr).CreateCommand();
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.CommandText = sp;
    cmd.Parameters.AddRange(prm);
    cmd.Connection.Open();

    return cmd.ExecuteReader(CommandBehavior.CloseConnection);
}

using (SqlDataReader dtrPrize = Sql.Fetch("SelectPrize", new SqlParameter[] { new SqlParameter("id", id) }))
{
    dtrPrize.Read();

    Prize prize = new Prize();
    prize.id = (int)dtrPrize[dtrPrize.GetOrdinal("id")];
    prize.artitle = (string)dtrPrize[dtrPrize.GetOrdinal("artitle")];
    prize.entitle = (string)dtrPrize[dtrPrize.GetOrdinal("entitle")];
    prize.ardetail = (string)dtrPrize[dtrPrize.GetOrdinal("ardetail")];
    prize.endetail = (string)dtrPrize[dtrPrize.GetOrdinal("endetail")];
    prize.image = (string)dtrPrize[dtrPrize.GetOrdinal("image")];
    prize.theme = (string)dtrPrize[dtrPrize.GetOrdinal("theme")];
    prize.price = (int)dtrPrize[dtrPrize.GetOrdinal("price")];
    prize.audience = (int)dtrPrize[dtrPrize.GetOrdinal("audience")];
    prize.type = (byte)dtrPrize[dtrPrize.GetOrdinal("type")];
    prize.status = (byte)dtrPrize[dtrPrize.GetOrdinal("status")];
    prize.voucher = (string)dtrPrize[dtrPrize.GetOrdinal("voucher")];
    prize.supplierid = (int)dtrPrize[dtrPrize.GetOrdinal("supplierid")];
    prize.created = (DateTime)dtrPrize[dtrPrize.GetOrdinal("created")];
    prize.updated = (DateTime)dtrPrize[dtrPrize.GetOrdinal("updated")];

    return prize;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T07:49:37.587

健康的；就我个人而言，我会说不健康的部分是它使用`DataSet`and的部分`DataAdapter`，但这可能只是我个人的偏见。

是的，您应该在此处处理适配器等（`using`显然，这是为您所做的）。

作为一个微不足道的无意义的整理，您可以堆叠`using`s - 只是让它不那么冗长：

```
using (SqlConnection con = new SqlConnection(ConStr))
using (SqlCommand cmd = con.CreateCommand())
{ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:49:18.517

只留下第一个（连接上的那个）就足够了，`using`因为处理连接将处理您需要处理的所有内容。

但是，处理所有内容并没有什么坏处，只是多一点代码。

# c++ - CppUnit 预期异常与 Assert Throw 编译并带有警告 C4127

> ID：15333524
> 
> 赞同：2
> 
> 时间：2013-03-11T07:46:00.780
> 
> 标签：c++, unit-testing, compiler-warnings, cppunit, c4127

目前我正在使用 CppUnit 用 C++ 编写单元测试。最近我需要使用 CppUnits 宏检查在特定情况下是否引发了异常：

```
CPPUNIT_ASSERT_THROW(
    boost::get<FooClassInBoostVariant>(m_boostVariantFooOrBar),
    boost::bad_get); 
```

测试编译期间的警告让我感到惊讶（在 VS2010 上，但对其他编译器也会发出警告......）：

```
warning C4127: conditional expression is constant 
```

我查看了 CppUnit 的宏定义，发现如下：

```
do {                                                            \
  bool cpputExceptionThrown_ = false;                           \
  try {                                                         \
     expression;                                                \
  } catch ( const ExceptionType & ) {                           \
     cpputExceptionThrown_ = true;                              \
  }                                                             \
                                                                \
  if ( cpputExceptionThrown_ )                                  \
     break;                                                     \
                                                                \
  CPPUNIT_NS::Asserter::fail(                                   \
                 "Expected exception: " #ExceptionType          \
                 " not thrown.",                                \
                 CPPUNIT_SOURCELINE() );                        \
} while ( false ) 
```

好吧，我完全理解这是如何工作的，do while 循环只执行一次，因为 false，并且 break 用于不执行 Asserter::fail() 部分。但是他们为什么要这样做呢？它 - 当然 - 触发编译器警告，因为 while 循环的中断条件显然总是“假”。但是没有更优雅的方法来做到这一点吗？我通常坚持无警告编译原则，所以这真的让我很烦恼。

所以我的问题真的是，他们为什么不这样实现它：

```
{                                                               \
  bool cpputExceptionThrown_ = false;                           \
  try {                                                         \
    expression;                                                 \
  } catch ( const ExceptionType & ) {                           \
    cpputExceptionThrown_ = true;                               \
  }                                                             \
                                                                \
  if ( !cpputExceptionThrown_ ) {                               \
    CPPUNIT_NS::Asserter::fail(                                 \
                 "Expected exception: " #ExceptionType          \
                 " not thrown.",                                \
                 CPPUNIT_SOURCELINE() );                        \
  }                                                             \
} 
```

提前致谢！

-汉内斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:31:47.027

原因是使断言成为一种陈述。考虑宏的这两种用法：

```
CPPUNIT_ASSERT_THROW(foo(), MyException);  // a
CPPUNIT_ASSERT_THROW(foo(), MyException)   // b - without trailing `;`!
doSomething(); 
```

使用他们的代码，你会得到一个错误`//b`，因为代码扩展为`do { ... } while (false) doSomething();`- 你会错过`;`after 条件。

使用您的代码，`//b`可以愉快地编译，但`//a`可能会给您一个“空语句”警告，因为该行将扩展为`{ ... };`，在块之后带有多余的内容`;`。

为什么他们*强迫*你使用`//a`我不知道——但我`//b`更喜欢这样，因为`;`每行后面都有一个是一致的。不必将带有断言的行与普通语句区分开来。

**PS：** 我不确定，但`{ ... }`块和`do {...} while(false)`语句之间可能存在更多差异，允许将断言宏放在不允许简单块的地方。

**编辑：**使用 C++11，您可以使用 lambda（在一个地方定义并调用它）：

```
#define CPPUNIT_ASSERT_THROW(expression, ExceptionType)         \
[&]() -> void {                                                 \
  bool cpputExceptionThrown_ = false;                           \
  try {                                                         \
     expression;                                                \
  } catch ( const ExceptionType & ) {                           \
     cpputExceptionThrown_ = true;                              \
  }                                                             \
                                                                \
  if ( cpputExceptionThrown_ )                                  \
     return;                                                    \
                                                                \
  CPPUNIT_NS::Asserter::fail(                                   \
                 "Expected exception: " #ExceptionType          \
                 " not thrown.",                                \
                 CPPUNIT_SOURCELINE() );                        \
}() 
```

但是，可能会有一些警告，例如由于 lambda 捕获了您在表达式中使用的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:33:17.717

好的，我想我自己找到了答案：

[http://cnicholson.net/2009/02/stupid-c-tr​​icks-adventures-in-assert/](http://cnicholson.net/2009/02/stupid-c-tricks-adventures-in-assert/)给出了解释。

实际上，将多行宏包装在`do { } while (false);`. 这是一种允许使用这些宏的解决方法，例如，在 un-braced`if else`中。

```
if (condition_a)
    MULTI_LINE_MACRO();
else
    MULTI_LINE_MACRO_2(); 
```

结果将是出乎意料地只有第一行被执行，这肯定会导致意想不到的行为。所以我猜他们并不是完全无能...

[http://kernelnewbies.org/FAQ/DoWhile0](http://kernelnewbies.org/FAQ/DoWhile0)还解释了为什么我的解决方案不起作用。if ( `MULTI_LINE_MACRO();`condition_a) { /* macro stuff */ } ; if (condition_a) { /* macro stuff */ } ; else // << 因为 ; 从未执行 以上。

所以我想我必须禁用警告。GCC 对此 ( `({ MACRO })`) 有一个解决方法，称为[Statement Expression](http://gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Statement-Exprs.html#Statement-Exprs)，但我认为这不适用于 VS2010。

# android - 如何为按钮提供阴影

> ID：15333529
> 
> 赞同：91
> 
> 时间：2013-03-11T07:46:45.553
> 
> 标签：android, material-design, shadow

![在此处输入图像描述](../Images/4d81a0ba0f405d0cc25a69f791e9c98a.png)

正如你在图片中看到的，我想要一个`Button`. 我`Button`用圆角创建。但问题是我无法在其背后产生阴影`Button`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2013-03-11T07:51:13.133

使用这种方法来获得您想要的外观。
**button_selector.xml ：**

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item>
    <layer-list>
        <item android:right="5dp" android:top="5dp">
            <shape>
                <corners android:radius="3dp" />
                <solid android:color="#D6D6D6" />
            </shape>
        </item>
        <item android:bottom="2dp" android:left="2dp">
            <shape>
                <gradient android:angle="270" 
                    android:endColor="#E2E2E2" android:startColor="#BABABA" />
                <stroke android:width="1dp" android:color="#BABABA" />
                <corners android:radius="4dp" />
                <padding android:bottom="10dp" android:left="10dp" 
                    android:right="10dp" android:top="10dp" />
            </shape>
        </item>
    </layer-list>
</item>

</selector> 
```

**在您的 xml 布局中：**

```
<Button
   android:background="@drawable/button_selector"
   ...
   ..
/> 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2015-06-11T12:23:50.353

***适用于安卓 5.0 及以上版本***

尝试其他视图的[海拔](http://developer.android.com/training/material/shadows-clipping.html)..

```
android:elevation="10dp" 
```

对于按钮，

```
android:stateListAnimator="@anim/button_state_list_animator" 
```

**button_state_list_animator.xml** - [https://android.googlesource.com/platform/frameworks/base/+/master/core/res/res/anim/button_state_list_anim_material.xml](https://android.googlesource.com/platform/frameworks/base/+/master/core/res/res/anim/button_state_list_anim_material.xml)

***5.0以下版本，***

对于所有视图，

```
 android:background="@android:drawable/dialog_holo_light_frame" 
```

我的输出：

![在此处输入图像描述](../Images/28e23af8edaae0b5772a3e601195269c.png)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-07-13T13:39:36.320

****这是我的文件夹**`cw_button_shadow.xml` **内** **有阴影的按钮**`drawable`**

 ****```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="false">
        <layer-list>
            <!-- SHADOW -->
            <item>
                <shape>
                    <solid android:color="@color/red_400"/>
                    <!-- alttan gölge -->
                    <corners android:radius="19dp"/>
                </shape>
            </item>
            <!-- BUTTON alttan gölge
              android:right="5px" to make it round-->
            <item
                android:bottom="5px"
                >
                <shape>
                    <padding android:bottom="5dp"/>
                    <gradient
                        android:startColor="#1c4985"
                        android:endColor="#163969"
                        android:angle="270" />
                    <corners
                        android:radius="19dp"/>
                    <padding
                        android:left="10dp"
                        android:top="10dp"
                        android:right="5dp"
                        android:bottom="10dp"/>
                </shape>
            </item>
        </layer-list>
    </item>

    <item android:state_pressed="true">
        <layer-list>
            <!-- SHADOW -->
            <item>
                <shape>
                    <solid android:color="#102746"/>
                    <corners android:radius="19dp"/>

                </shape>
            </item>
            <!-- BUTTON -->
            <item android:bottom="5px">
                <shape>
                    <padding android:bottom="5dp"/>
                    <gradient
                        android:startColor="#1c4985"
                        android:endColor="#163969"
                        android:angle="270" />
                    <corners
                        android:radius="19dp"/>
                    <padding
                        android:left="10dp"
                        android:top="10dp"
                        android:right="5dp"
                        android:bottom="10dp"/>
                </shape>
            </item>
        </layer-list>
    </item>
</selector> 
```

**如何使用。在 Button xml 中，您可以调整身高和体重**

```
<Button
                android:text="+ add friends"
                android:layout_width="120dp"
                android:layout_height="40dp"
               android:background="@drawable/cw_button_shadow" /> 
```

[![在此处输入图像描述](../Images/e4827d5be14edf235e9791eb02715f67.png)](https://i.stack.imgur.com/INpTG.png)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-09-18T17:14:47.933

如果你的目标是棒棒糖之前的设备，你可以使用[Shadow-Layout](https://github.com/dmytrodanylyk/shadow-layout)，因为它很简单，你可以在不同类型的布局中使用它。

**将阴影布局添加到您的 Gradle 文件中**：

```
dependencies {
    compile 'com.github.dmytrodanylyk.shadow-layout:library:1.0.1'
} 
```

**在您拥有按钮的 xml 布局的顶部，添加到顶部**：

```
xmlns:app="http://schemas.android.com/apk/res-auto" 
```

*它将使自定义属性可用。*

**然后在 Button 周围放置一个阴影布局**：

```
<com.dd.ShadowLayout
        android:layout_marginTop="16dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:sl_shadowRadius="4dp"
        app:sl_shadowColor="#AA000000"
        app:sl_dx="0dp"
        app:sl_dy="0dp"
        app:sl_cornerRadius="56dp"> 

       <YourButton
          .... />

</com.dd.ShadowLayout> 
```

然后，您可以调整`app:`设置以匹配所需的阴影。

希望能帮助到你。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-12-28T15:37:39.830

我已经尝试了上面的代码，并制作了我自己的影子，这有点接近我想要实现的目标。也许它也会帮助其他人。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <layer-list>
            <item android:left="5dp" android:top="5dp">
                <shape>
                    <corners android:radius="3dp" />
                    <gradient
                        android:angle="315"
                        android:endColor="@android:color/transparent"
                        android:startColor="@android:color/black"
                        android:type="radial"
                        android:centerX="0.55"
                        android:centerY="0"
                        android:gradientRadius="300"/>
                    <padding android:bottom="1dp" android:left="0dp" android:right="3dp" android:top="0dp" />
                </shape>
            </item>
            <item android:bottom="2dp" android:left="3dp">
                <shape>
                    <corners android:radius="1dp" />
                    <solid android:color="@color/colorPrimary" />

                </shape>
            </item>
        </layer-list>
    </item>

</selector> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-11T07:51:00.327

如果这对你有用，试试这个

![在此处输入图像描述](../Images/369a08a14b8a0d94101f99c762d4892c.png)

```
android:background="@drawable/drop_shadow"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="3dp"
        android:paddingTop="3dp"
        android:paddingRight="4dp"
        android:paddingBottom="5dp" 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-15T08:57:16.450

[样本 9 带阴影的补丁图像](https://i.stack.imgur.com/6TIwf.png)

经过大量研究，我找到了一个简单的方法。

创建一个 9 补丁图像并将其应用为按钮或任何其他视图的背景。

[你可以使用这个网站](http://inloop.github.io/shadow4android/)创建一个有阴影的 9 补丁图像。

将 9 个补丁图像放在您的可绘制目录中，并将其用作按钮的背景。

```
mButton.setBackground(ContextCompat.getDrawable(mContext, R.drawable.your_9_patch_image); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-12-15T04:15:19.517

你可以试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true">
<layer-list>
        <item android:left="1dp" android:top="3dp">
            <shape>
                <solid android:color="#a5040d" />
                <corners android:radius="3dip"/>
            </shape>
        </item>
    </layer-list>
  </item>
<item>
    <layer-list>
        <item android:left="0dp" android:top="0dp">
            <shape>
                    <solid android:color="#99080d" />
                <corners android:radius="3dip"/>
            </shape>
        </item>
        <item android:bottom="3dp" android:right="2dp">
            <shape>
                <solid android:color="#a5040d" />
                <corners android:radius="3dip"/>
            </shape>
        </item>
    </layer-list>
</item> 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2020-09-01T16:32:04.780

你可以使用这个很棒的库 [https://github.com/BluRe-CN/ComplexView](https://github.com/BluRe-CN/ComplexView) 它真的很容易使用****

# ruby-on-rails - rails 3.2.1 无法显示 flash 消息

> ID：15333532
> 
> 赞同：0
> 
> 时间：2013-03-11T07:47:17.550
> 
> 标签：ruby-on-rails

我在 rails 3.2.1 中显示 flash :notice 时遇到问题。这是我的代码

```
class AssetsController < ApplicationController
  before_filter :authenticate_user!
  before_filter :user_can_upload, :only => [:new, :add_image]
  #...actions
  def new
    @asset = Asset.new
    respond_to do |format|
     format.html # new.html.erb
     format.json { render json: @asset }
   end
  end

  private
  def user_can_upload
     if current_user.can_upload?
       redirect_to dashboard_index_path, notice: I18n.t(:quota_assets)
     end
  end
end 
```

在我的主要布局中

```
%body
= render 'layouts/shared/header'
-if notice
  .container
    .alert.alert-success=raw notice
= yield 
```

例如，在新操作中重定向工作正常，但没有显示通知消息。有什么提示吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:55:31.693

我认为，如果要输出 flash 消息，则必须使用`flash[:notice]`not `notice`。

# neo4j - Neo4j 条件批量导入

> ID：15333534
> 
> 赞同：1
> 
> 时间：2013-03-11T07:47:25.040
> 
> 标签：neo4j, batch-processing

数据以 300-500 TPS 的速率持续进入系统。我需要使用以下方案将其导入 neo4j：

1.  如果 N 节点不存在，则创建它
2.  如果关系 N-[rel:rel_type]->X 不存在，则创建它
3.  增加相对重量

使用 REST 批处理似乎无法解决问题。不同的密码查询太长，因为它们会生成许多小事务。

Gremlin 的工作速度要快得多。我在数组中收集 gremlin 脚本的参数并将其作为批处理执行。但即使我几乎无法达到 300 TPS 的速度。

我应该提一下，除了会有大约 500 TPS 的查询流：

```
START N=node(...) MATCH N-[rel:rel_type]->X return rel.weight,X.name; 
```

堆大小设置为 5 Gb。附加选项：

```
-XX:MaxPermSize=1G -XX:+CMSClassUnloadingEnabled -XX:+UseParallelGC -XX:+UseNUMA 
```

导入此类数据的最佳方式和配置是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T08:05:30.280

要检查传入节点是否存在并与其他节点有关系，您可以使用创建唯一语法。

```
START n=node:node_index(newNode={N})
CREATE UNIQUE n-[:REL_TYPE]->x ; 
```

为了自动增加关系的权重，我会假设这样的事情（但对此没有保证，可能有更快的方法）：

```
START n=node:node_index(newNode={N})
CREATE UNIQUE n-[rel:REL_TYPE]->x
SET rel.weight = coalesce(rel.weight?,0) +1 
```

# ios - 在 ios 6 中弃用 viewdidUnload

> ID：15333538
> 
> 赞同：5
> 
> 时间：2013-03-11T07:47:37.897
> 
> 标签：ios, objective-c, xcode

不知道为什么ios6不推荐使用viewDidUnload。是不是意味着xcode会自动管理创建的对象的释放并控制内存使用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T07:51:50.573

这意味着，如果您不使用 ARC，则需要将对象释放到`dealloc`方法中，`viewDidUnload`如果您仅为 iOS 6 及更高版本创建应用程序。

也看看[这个答案](https://stackoverflow.com/a/12676743/1263701)

# aem - CQ5(CRX)书店申请错误

> ID：15333547
> 
> 赞同：0
> 
> 时间：2013-03-11T07:48:43.603
> 
> 标签：aem, crx

1.  我从 http://dev.day.com/docs/en/crx/current/getting_started/first_steps_with_crx.html#Step%20Two:%20Check%20out%20CRX%20Bookstore%20Example 查看了源代码
2.  当我尝试调用 http://:4502/products.html

3.  实际结果应列出书店应用程序中的产品页面

4.  我收到“无法在 /apps/bookstore/components/ranking/ranking.jsp 中向 /products.html 提供请求：您使用的是什么版本的产品？在什么操作系统上？我正在使用 CQ5.5 (CRX 2.3) Windows 7 [http://code.google.com/p/crxzon/issues/detail?id=4&thanks=4&ts=1362987616](http://code.google.com/p/crxzon/issues/detail?id=4&thanks=4&ts=1362987616)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T05:33:00.993

RankingServiceImpl 中的注释似乎是针对早期版本的 CQ 和 CRX。以下是我为使其正常工作所做的更改：

```
import org.apache.felix.scr.annotations.Property;
import org.apache.felix.scr.annotations.Reference;

/**
 * Default implementation of the ranking service.
 * The ranking is updated through observation (based on OSGi events).
 * The service can be used by clients to get the highest ranked products.
 */
@Component(immediate = true)
@Service(value = RankingService.class)
@Property(name = org.osgi.service.event.EventConstants.EVENT_TOPIC, value = SlingConstants.TOPIC_RESOURCE_ADDED)
public class RankingServiceImpl
    implements RankingService, EventHandler, Runnable {

    private Logger logger = LoggerFactory.getLogger(this.getClass());
    // private Logger logger = LoggerFactory.getLogger("RankingServiceImpl");

    private static final String PROPERTY_PREV_RANKING = "lowerRankingRef";
    private static final String PROPERTY_NEXT_RANKING = "higherRankingRef";

    private static final int SHOW_HIGHEST_RANKING = 3;

    /** Flag for stopping the background service. */
    private volatile boolean running = false;

    /** A local queue for handling new orders. */
    protected final BlockingQueue<String> orders = new LinkedBlockingQueue<String>();

    @Reference
    private SlingRepository repository;

    @Reference
    private ResourceResolverFactory resourceResolverFactory; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:18:18.270

从我所见，你得到 NullPointerException in `RankingServiceImpl:277`，因为该`repository`字段为空。我可以解释的唯一方法是在构建过程中没有触发 SCR 注释。

话虽如此，我实际上很惊讶您的捆绑包从 CQ 5.5 开始，因为依赖项似乎是早期版本（我猜是 5.4）——我建议在`/system/console/bundles`（搜索**CRX - Sample Bookstore Demo**）下仔细检查。如果您在那里缺少导入，请尝试`/src/impl/com.day.crx.sample.bookshop.bnd`像在 CQ 5.5 中那样更新版本，或者在 CQ 5.4 上运行它。

# iphone - 检测 iPhone 设备背面的 3 次点击

> ID：15333548
> 
> 赞同：1
> 
> 时间：2013-03-11T07:48:44.837
> 
> 标签：iphone, ios, accelerometer

我正在开发一个应用程序，我需要在 iPhone 设备上的任意位置检测 3 次点击。我知道我们可以检测 iPhone 屏幕上的点击，但这次我需要检测 iPhone 设备上的任何地方，例如 iPhone 背面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:52:51.300

您在 UIView 的应用程序（不适用于 iphone 所有应用程序）的任何地方都可以在 Iphone 屏幕上点击 3 次，您只需要在 EachViewController`ViewdidLoad`方法中实现代码，例如：-

```
- (void)viewDidLoad {
    [super viewDidLoad];

    UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapGesture:)];
    tapGesture.numberOfTapsRequired = 3;
    [self.view addGestureRecognizer:tapGesture];
    [tapGesture release];
}

- (void)handleTapGesture:(UITapGestureRecognizer *)sender {
    if (sender.state == UIGestureRecognizerStateRecognized) {
        // handling code
    }
} 
```

**您只能为您的装箱应用程序而不是背面（Iphone 设备）执行此操作。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:52:24.067

您可以`UITapGestureRecognizer`用于检测 iPhone 屏幕上的点击手势。它具有`numberOfTapsRequired`点击次数和`numberOfTouchesRequired`点击手指计数。

而且我们不知道用户是否点击了 iPhone 的背面。:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T07:57:54.640

要识别手机背面的点击，您可以尝试评估加速度传感器的数据。但是为了获得显着的加速度，用户必须非常用力地敲击。

# python - python - 即使多个脚本同时运行，也会生成一个唯一的整数？

> ID：15333551
> 
> 赞同：0
> 
> 时间：2013-03-11T07:49:09.743
> 
> 标签：python

我有一个可以快速将数据插入数据库的函数，我还需要为每个函数存储一个唯一的整数。

我正在考虑使用四舍五入的微时间，但是由于同时运行多个脚本，我担心会遇到冲突。

有人可以推荐一个解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:17:27.890

您确实应该更喜欢一种由数据库递增生成 ID 的机制。

您可以查看[uuid 模块](http://docs.python.org/2/library/uuid.html)以在 Python 端生成随机 ID：

> 该模块提供不可变的 UUID 对象（UUID 类）和函数 uuid1()、uuid3()、uuid4()、uuid5()，用于生成 RFC 4122 中指定的版本 1、3、4 和 5 UUID。

根据[RFC 4122](http://www.ietf.org/rfc/rfc4122.txt) [强调我的]：

> 本规范为 UUID（通用唯一标识符）定义了统一资源名称命名空间，也称为 GUID（全局唯一标识符）。 **UUID 的长度为 128 位，可以保证跨时空的唯一性。** UUID 最初用于 Apollo 网络计算系统，后来用于开放软件基金会 (OSF) 的分布式计算环境 (DCE)，然后用于 Microsoft Windows 平台。
> 
> 该规范源自 DCE 规范，并获得了 OSF（现称为 The Open Group）的许可。来自 DCE 规范的早期版本的信息已包含在本文档中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:57:44.610

有几种可能的方法：

1.  将唯一 ID 的生成委托给数据库引擎。许多发动机提供了这样的设施。
2.  拥有一个您自己的集中式服务来生成 id，并让您的脚本与该服务对话。
3.  让每个脚本生成自己的 id；为确保唯一性，将脚本唯一的令牌（例如进程 ID 和/或 IP 或 MAC 地址）合并到 id 中。

# java - 在java中解析为Json Formate时出现类型不匹配错误

> ID：15333554
> 
> 赞同：1
> 
> 时间：2013-03-11T07:49:22.340
> 
> 标签：java, json, list, parsing

大家好 ！我有一个 List 对象，我需要使用 gson1.1 jar 将其解析为 Json 类型，但它给出了类型不匹配错误..这是我的代码..

```
public static List<Product> getCartList() {
    List<Product> cartList = new Vector<Product>(cartMap.keySet().size());
    for(Product p : cartMap.keySet()) {
        cartList.add(p);
    }

     Gson gson = new Gson();
     // convert your list to json
     String jsonCartList = gson.toJson(cartList);
     // print your generated json
     System.out.println("jsonCartList: " + jsonCartList);

     return jsonCartList;

        } 
```

请大家提前帮我谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:53:12.220

您的方法的`return`类型是`List<Product>`，这是一个对象`List`，`Product`而您正在返回`jsonCartList`，这是一个`String`.

因此，**TypeMismatch**错误。

要实现您想要的（返回`JSON`），请更改`return`方法的类型。现在应该是

```
public static String getCartList() { 
```

# android - Maps API v2 - 不再可能绘制到画布中？

> ID：15333560
> 
> 赞同：2
> 
> 时间：2013-03-11T07:49:50.717
> 
> 标签：android, android-maps-v2

`MapView`使用 Maps API v1 可以在画布中进行绘制。我在[我的库](https://github.com/dmitry-zaitsev/AndroidSideMenu)中使用了这个功能来加速动画。

使用 Maps API v2 似乎不再可能 - 在绘制画布后仅包含控制元素（如按钮）和白屏而不是地图。

有什么解决方法吗？

# highslide - Highslide 不会在 Wordpress 上展开图像

> ID：15333563
> 
> 赞同：1
> 
> 时间：2013-03-11T07:49:54.567
> 
> 标签：highslide

我正在尝试在没有插件的情况下将 Highslide 与我的 Wordpress 网站集成。我已将 hs.graphicsDir 变量更改为：

```
graphicsDir : 'http://hyohanpark.com/wp-content/themes/Noir/highslide/graphics/' 
```

我的标签中的代码还显示：

```
<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/highslide/highslide-with-gallery.js"></script>
<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/highslide/highslide.config.js" charset="utf-8"></script>
<link rel="stylesheet" type="text/css" href="<?php bloginfo('template_directory'); ?>/highslide/highslide.css" />
<!--[if lt IE 7]>
<link rel="stylesheet" type="text/css" href="<?php bloginfo('template_directory'); ?>/highslide/highslide-ie6.css" />
<![endif]--> 
```

当我显示要使用 highslide 打开的图像时，代码如下所示：

```
<div class="highslide-gallery">
<ul>
<li>
<a href="http://hyohanpark.com/wp-content/uploads/2013/03/IMG_0042.png" class="highslide" 
        onclick="return hs.expand(this, config1 )">
    <img src="http://hyohanpark.com/wp-content/uploads/2013/03/IMG_0042.png" width="230" height="154" alt=""/>
</a>
</li>
</ul>
<div style="clear:both"></div></div> 
```

一切似乎都在工作；但是，一旦您单击图像，它不会展开，而是打开图像的 URL，就好像它是图像的常规链接一样。

感谢任何帮助使图像正确扩展。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:21:59.170

我怀疑`onclick`您的图像和*highslide.config.js*文件的内容之间存在不一致。

当您使用`config1`in 时，`onclick`您还需要*highslide.config.js*文件中的相应配置对象：

```
var config1 = {
    //configurations for the images
}; 
```

配置对象可以为空，但它通常包含画廊的设置。

# android - 我的应用程序在某些设备上不可见，例如 Galaxy y

> ID：15333564
> 
> 赞同：0
> 
> 时间：2013-03-11T07:49:55.990
> 
> 标签：android, android-manifest

我的应用程序在市场上出现问题，我的应用程序对除 GALAXY Y 之外的所有设备可见，并且我支持所有屏幕尺寸，但我认为清单权限存在问题，但我无法确定，这是我的权限代码

```
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

请建议我解决问题...

# python - 按计数分组字符串输入

> ID：15333565
> 
> 赞同：-1
> 
> 时间：2013-03-11T07:49:58.040
> 
> 标签：python

我试图从我的书中提出一个问题，它问：

> 实现无需输入并反复要求用户输入学生名字的函数名称。当用户输入一个空白字符串时，该函数应该为每个姓名打印具有该姓名的学生人数。

示例用法：

```
Usage:
names()
Enter next name: Valerie
Enter next name: Bob
Enter next name: Valerie
Enter next name: John
Enter next name: Amelia
Enter next name: Bob
Enter next name: 
There is 1 student named Amelia
There are 2 students named Bob
There is 1 student named John
There are 2 students named Valerie 
```

到目前为止，我有这个代码：

```
def names():
    names = []
    namecount = {a:name.count(a) for a in names}
    while input != (''):
        name = input('Enter next name: ')
        names = name
        if input == ('')
            for x in names.split():
                print ('There is', x ,'named', names[x]) 
```

我真的迷路了，任何输入都会帮助很多。另外，如果可能的话，请解释如何修复我的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:13:54.903

我为你重写了你的函数：

```
def names():
    names = {} # Creates an empty dictionary called names
    name = 'cabbage' # Creates a variable, name, so when we do our while loop, 
                     # it won't immediately break
                     # It can be anything really. I just like to use cabbage
    while name != '': # While name is not an empty string
        name = input('Enter a name! ') # We get an input
        if name in names: # Checks to see if the name is already in the dictionary
            names[name] += 1 # Adds one to the value
        else: # Otherwise
            names[name] = 1 # We add a new key/value to the dictionary
    del names[''] # Deleted the key '' from the dictionary
    for i in names: # For every key in the dictionary
        if names[i] > 1: # Checks to see if the value is greater for 1\. Just for the grammar :D
            print("There are", names[i], "students named", i) # Prints your expected output
        else: # This runs if the value is 1
            print("There is", names[i], "student named", i) # Prints your expected output 
```

做的时候`names()`：

```
Enter a name! bob
Enter a name! bill
Enter a name! ben
Enter a name! bob
Enter a name! bill
Enter a name! bob
Enter a name! 
There are 3 students named bob
There are 2 students named bill
There is 1 student named ben 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:31:04.787

让我们分析一下您的代码：

```
def names():
    names = []
    namecount = {a:name.count(a) for a in names}
    while input != (''):
        name = input('Enter next name: ')
        names = name
        if input == ('')
            for x in names.split():
                print ('There is', x ,'named', names[x]) 
```

好像有几个问题，列一下

1.  `while`循环的条件

    *   你想要做什么检查来自用户的输入是否`''`（无）..
    *   `input`是一个用于从用户获取输入的内置函数，所以它永远不会是`('')`.
2.  `names = name`声明_

    *   您要做的是添加`name`到列表中`names`。
    *   在这里，您要更改`names`为字符串，这不是您想要的。
3.  的`if`条件
    *   同1。
4.  `for`循环 _
    *   让我们忽略..只是无效..在这里..

我们按如下方式解决这些问题（解决方案与上面解决的问题具有相同的编号）

1.  将条件更改为类似`name != ''`. 此外，在循环开始之前，您需要输入一次才能使其工作，在这种情况下有一个好处，第一个输入可以有不同的提示。
2.  用于`names.append(name)`添加`name`到`names`.
3.  同 1。
4.  看看下面的 for 循环......

尝试这个

```
def names():
    names = []
    name = input('Enter a name: ').strip() # get first name
    while name != '':
        names.append(name)
        name = raw_input('Enter next name: ').strip() # get next name

    for n in set(names): # in a set, no values are repeated
        print '%s is mentioned %s times' % (n, names.count(n)) # print output 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T07:59:54.667

函数中的命名存在很多问题，您正在使用诸如用于函数名称的“名称”之类的变量以及用于读取用户输入的python函数名称的“输入”-因此您必须避免使用这个。此外，您将 namecount 变量定义为 dict 并尝试在填充之前对其进行初始化。因此，请尝试检查以下解决方案：

```
def myFunc():
    names = []
    name = ''
    while True: #bad stuff you can think on your own condition
        name = raw_input('press space(or Q) to exit or enter next name: ')
        if name.strip() in ('', 'q', 'Q'):
            for x in set(names):
                print '{0} is mentioned {1} times'.format(x, names.count(x))
            break
        else:
            names.append(name)

myFunc() 
```

或者：

```
from collections import defaultdict

def myFunc():
    names = defaultdict(int)
    name = ''
    while True: #bad stuff you can think on your own condition
        name = raw_input('press space(or Q) to exit or enter next name: ')
        if name.strip() in ('', 'q', 'Q'):
            for x in set(names):
                print '{0} is mentioned {1} times'.format(x, names[x])
            break
        else:
            names[name] += 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-05T00:43:53.013

```
def names():
      counters = {}

      while True:
            name = input('Enter next name:')

            if name == ' ':
                  break

            if name in counters:
                  counters[name] += 1
            else:
                  counters[name] = 1
      for name in counters:
            if counters[name] == 1:
                  print('There is {} student named {}'.format(counters[name],name))
            else:
                  print('There are {} student named {}'.format(counters[name],name))

names() 
```

# icons - 如何在 javafx2 中设置应用程序图标

> ID：15333575
> 
> 赞同：0
> 
> 时间：2013-03-11T07:50:57.220
> 
> 标签：icons, set, javafx-2

javafx 设置应用程序 ico

当我创建java项目时，添加jfxrt.jar

这是正确的

```
new Image(getClass().getResourceAsStream("../images/customLogo.png")) 
```

但这在 javafx 项目中

这是错的。

我如何在 javafx 项目中获得相对路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:18:21.197

那么有什么例外呢？您在哪里创建项目（哪个 IDE）。作为一般规则，在进行查找时永远不要使用 ..-paths，尽管它们可能在文件系统上工作，例如它们会在 jar 文件 IIRC 中中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:30:15.067

我认为您应该查看[Image API](http://docs.oracle.com/javafx/2/api/javafx/scene/image/Image.html)以及如何放置图标的另一个[链接。](https://stackoverflow.com/questions/10121991/javafx-2-application-icon)

如果你正在生成一个 jar，你可以使用

```
new Image("/path/to/image") 
```

以“/”开头的图像路径将是 jar 内的绝对路径。我强烈建议去 Image API 检查所有的选项，文档真的很好。

希望能帮助到你

# c# - 将快捷键添加到按钮

> ID：15333587
> 
> 赞同：0
> 
> 时间：2013-03-11T07:51:35.457
> 
> 标签：c#, wpf

如何在 wpf 中添加快捷键到按钮？我有三个带有新按钮的窗口，我想为所有窗口添加 Ctrl+N 或其他快捷方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:57:00.567

这是一个很棒的教程：[https ://web.archive.org/web/20150430045153/http://tech.pro:80/tutorial/839/wpf-tutorial-command-bindings-and-custom-commands](https://web.archive.org/web/20150430045153/http://tech.pro:80/tutorial/839/wpf-tutorial-command-bindings-and-custom-commands)

样本（取自上面的链接）

```
<Window x:Class="CustomCommandTest.CommandWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Custom Command Test" Height="300" Width="300">

  <Window.CommandBindings>
    <CommandBinding Command="Help" 
        CanExecute="HelpCanExecute"
        Executed="HelpExecuted" />
  </Window.CommandBindings>

  <Window.InputBindings>
    <KeyBinding Command="Help" Key="H" Modifiers="Ctrl"/>
    <MouseBinding Command="Help" MouseAction="LeftDoubleClick" />
  </Window.InputBindings>

  <StackPanel>
    <Button Command="Help" Content="Help Command Button" />
    <Button Content="My Command" x:Name="MyCommandButton" />
  </StackPanel>
</Window> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T07:59:47.060

您也可以按照以下方法进行操作。在表单写入方法中指示快捷键。

```
private void shortcutKey_Click(object sender, System.Windows.Input.KeyEventArgs e)
{
    if ((e.Key == Key.N) && (Keyboard.IsKeyDown(Key.LeftCtrl) || Keyboard.IsKeyDown(Key.RightCtrl)))
        ProjMnuBtn_AddProj_Click(null, null);
} 
```

然后在 xaml 文件中，您需要将其设置如下：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Width="1280" Height="920" KeyUp="shortcutKey_Click">

</Window> 
```

# iphone - 限制从 iTunes 安装应用程序

> ID：15333588
> 
> 赞同：0
> 
> 时间：2013-03-11T07:51:42.320
> 
> 标签：iphone, objective-c, itunes, mdm

如何限制使用移动设备管理或其他客观方式通过 iTunes 从设备安装特定应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:11:02.333

MDM 具有防止安装任何应用程序的功能。但是，它没有针对某些特定应用程序的功能（阻止安装）。

# php - 为什么要在 URL 参数中添加转义字符？

> ID：15333598
> 
> 赞同：0
> 
> 时间：2013-03-11T07:52:13.663
> 
> 标签：php, apache, url, parameters, escaping

我的`PHP`页面接受 URL 中的参数。该参数被分配给一个变量，如下所示：

```
$msg = $_REQUEST["msg"]; 
```

当`HTTP`请求发送到网站时，参数被发送为`"hello'"`，但是当它到达`PHP`上面的变量时，它变成了`"hello\'"`。

为什么要插入反斜杠以及插入的是什么？是网络服务器吗？我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:58:58.740

Magic Quotes 正在您的服务器上运行。您应该使用**stripslashes($text)**函数：

```
if(get_magic_quotes_gpc()) 
        $msg = stripslashes($_REQUEST["msg"]); 
   else $msg = $_REQUEST["msg"]; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-11T07:54:29.520

它被附加是因为您的单引号是字符串的一部分。如果它不会被转义 - 这就是反斜杠的含义 - 可能是您的字符串定义过早终止。

# visual-studio-2010 - 永久启用我的代码

> ID：15333601
> 
> 赞同：19
> 
> 时间：2013-03-11T07:52:34.063
> 
> 标签：visual-studio-2010, debugging, visual-studio-debugging

我正在使用visual studio 2010，每次打开它时，工具->选项->调试下的“只是我的代码”都会被禁用。有谁知道如何永久启用此功能？

如果这有什么不同，我启用了以下扩展：

.NET 反射器视觉工作室扩展；NuGet 包管理器；流程模板编辑器；生产力电动工具；规范流；智慧设计师

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-11T08:13:22.393

在谷歌上进一步挖掘之后，事实证明这是由 .NET 反射器插件引起的。禁用反射器后，当 VS 关闭和打开时，只有我的代码保持启用状态。

# java - 将 Java 日期转换为 PHP

> ID：15333602
> 
> 赞同：0
> 
> 时间：2013-03-11T07:52:34.677
> 
> 标签：java, php, date

自 1970 年以来，如何在几秒钟内将“Java-Date”格式化为 php 中的 dd.mm.yyyy HH:MM:SS。我将此日期作为 php 中的变量：

`$date = "1362065364128";`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:53:59.097

它被称为 unix 时间戳，您可以将它作为第二个参数传递给`date`php- 中的函数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T08:11:27.850

```
$date = "1362065364128";
$phpDate = date('d.m.y H:i:s', $date/1000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T07:54:07.310

可以使用 PHP 的方法`date`，注意这里最后三个数字是毫秒，所以你需要先忽略它们。

```
$date = "1362065364128";
$formatted = date('Y-m-d H:i:s', intval($date) / 1000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T07:53:27.773

使用 PHP`date`函数，文档[在这里](http://php.net/manual/en/function.date.php)

# jasper-reports - 如何在 iReport 中绘制垂直线？

> ID：15333608
> 
> 赞同：12
> 
> 时间：2013-03-11T07:53:08.763
> 
> 标签：jasper-reports, ireport

我正在使用*iReport 3.5.2*吗？设计报告。我有一个子报告，我需要一个表格。

为了构建表格，我为行绘制了水平线。但是，我没有找到任何使线条垂直的选项，以便我可以制作列。

任何人都可以请建议如何做到这一点。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-11T09:21:35.197

您可以根据需要使线条垂直或水平
通过更改线条`width`的`height`属性
例如

如果你想画一个`Vertical Line`

```
<line>
    <reportElement x="0" y="0" width="1" height="30"/>
</line> 
```

如果你想画一个`Horizontal Line`

```
<line>
    <reportElement x="0" y="0" width="30" height="1"/>
</line> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:09:20.140

行是错误的决定，可能是页面结束/开始使用的问题

```
<style name="cell">
    <box>
        <pen lineWidth="1.0" lineStyle="Solid"/>
    </box>
</style> 
```

为您的 textField/staticText

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-17T10:11:24.543

选择线属性。设置 width=1 ,height=value 大于 1

# ruby-on-rails - 编写关联满足条件的 Rails 查询

> ID：15333621
> 
> 赞同：0
> 
> 时间：2013-03-11T07:54:11.987
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个模型 A 哪个`belongs_to`模型 B

模型 B 有一个布尔字段`flag`

我想找到 A.bs.flag == true 的所有 A

我不知道该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:03:35.447

If you use Mongo you can try:

```
A.where( :b.in => B.where( :flag => true ).map(&:id) ) 
```

'b' is the name of relation in A ( belongs_to b ).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:37:34.337

U 可以使用以下查询来获取标志设置为 true 的所有 A 的表单 B。

@a = A.bs.where(:flag => true)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:06:26.427

尝试

```
A.joins(:b).where(bs: { flat: true }) 
```

note that`bs`用于注意 B 的复数形式。

# iphone - Facebook页面喜欢和推特关注

> ID：15333624
> 
> 赞同：1
> 
> 时间：2013-03-11T07:54:20.197
> 
> 标签：iphone, ios, ipad

是否可以在 iPhone 最新功能的 UIActivityViewController 中添加 Facebook 页面和 Twitter 关注？

我正在使用以下代码进行共享。

```
 NSString *message = [_mWebView stringByEvaluatingJavaScriptFromString:@"$(\"meta[property='og:description']\").attr(\"content\")"];
    NSURL *urlToShare = [NSURL URLWithString:[_mWebView stringByEvaluatingJavaScriptFromString:@"$(\"meta[property='og:url']\").attr(\"content\")"]];

    NSArray *activityItems = @[message, urlToShare];

    UIActivityViewController *activityController = [[UIActivityViewController alloc]initWithActivityItems:activityItems applicationActivities:nil];
    activityController.excludedActivityTypes = @[UIActivityTypeAssignToContact, UIActivityTypeCopyToPasteboard, UIActivityTypePrint, UIActivityTypeSaveToCameraRoll,UIActivityTypePostToWeibo, UIActivityTypeMessage];

    [self presentViewController:activityController
                       animated:YES completion:nil]; 
```

# c# - 保持缓存与后端同步

> ID：15333630
> 
> 赞同：0
> 
> 时间：2013-03-11T07:54:47.790
> 
> 标签：c#, caching, repository

请记住，我在这里展示的示例只是为了尽可能清楚地解释问题，而不是任何真正的实现或生产代码。

另外，我们假设如果有任何东西被存储或从后端返回，它将被缓存。我从代码中省略了如何以及在何处发生这种情况的示例。

对于这个问题的范围，我们还必须假设，MyType 集合总是很小，相当静态，当应用程序启动时，它会从后端获取所有内容并重用缓存的副本，直到应用程序关闭。这就是为什么`GetCached(id)`并且`GetBackend(id)`实际上只是和的包装`ListCached`器`ListBackend`。

假设我们有以下类型的简单存储库：

```
public class MyRepository : IRepository<MyType>
{
    public IEnumerable<MyType> GetAll()
    {
        // Will return cached items if present
        return ListCached ?? ListBackend;
    }

    public MyType Get(int id)
    {
        return GetCached(id) ?? GetBackend(id);
    }

    private MyType GetBackend(int id)
    {
        return ListBackend.FirstOrDefault(type => type.Id == id);
    }

    private MyType GetCached(int id)
    {
        return ListCached.FirstOrDefault(type => type.Id == id);
    }

    protected IEnumerable<MyType> ListBackend
    {
        get { return Backend.GetAll<MyType>(); }
        set { Backend.StoreAll<MyType>(value); }
    }

    public IEnumerable<MyType> ListCached
    {
        get { return Cache.GetAll<MyType>(); }
        set { Cache.StoreAll<MyType>(value); }
    }

    public void Store(MyType value)
    {
        Backend.Store(value);
    }
} 
```

这是挑战：

```
class Program
{
    static void Main(string[] args)
    {
        #region Handling Missing Objects in Cache
        // We have a repository
        var rep = new MyRepository();

        // Into which we put stuff (3 for the demo)
        rep.Store(new MyType { Id = 1 });
        rep.Store(new MyType { Id = 2 });
        rep.Store(new MyType { Id = 3 });

        // And the repository, after this, returns 3 items
        // The items are returned from cache
        var count = rep.GetAll().Count(); // Returns 3

        // However, somewhere else in the application, it happens so,
        // for any reason, bug, programmer error, photon from sun hitting the cpu
        // or tinfoil-hat left home in rush,
        // that one item gets removed from the cache
        Cache.Remove(new MyType { Id = 2 });

        // After which, only 2 items are returned from the repository
        // since the cache exists, it won't even try to hit the database
        count = rep.GetAll().Count();

        // Now count = 2, while WE know the backend has now 3 items
        // how would the program detect it and get a fresh copy from backend?
        #endregion
    }
} 
```

在这种情况下你会怎么做？是否存在有助于检测情况并从后端获取新集合的模式。最好的做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:08:27.623

恕我直言 ，

1-如果您没有在数据库之间添加，那么您可以保留一个计数器并在启动应用程序时填充它。

2- 如果您可以将 List 更改为 Observable Collection，该集合会在更新时进行报告，以便在删除项目时通知您，并且您可以与计数器检查是否相同，您可以重新加载它。

3-如果不可能使用可观察集合，那么您可以使用 CacheExpiray 策略的概念，您可以在其中模拟缓存，该缓存将在一段时间后从源重新加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:10:08.297

可能有一些可用的选项。

首先，使用过期缓存。它只是为当前缓存设置一个特定的过期时间。如果时间已经过去，则刷新数据。但是，这种模式不能

```
if(cacheExpiry){
  cacheList = GetListFromDatabase();
} 
```

但是，如果您想确保获取最新数据，通常我使用这种方法：

1、设置缓存生成时的当前时间戳。一些插图：

```
DateTime lastCache = DateTime.Now 
```

然后在您的 sql 中，有一个具有最新修改日期时间的表（例如 UPDATE_STAMP）。然后每次修改所需的缓存表时，将 UPDATE_STAMP 表中的记录更新为当前日期。例子：

```
Update MyTable set //your code here
Update UPDATE_STAMP set DATE_TIME = GETDATE() 
```

然后每次获取 ListCached 时，将最新的缓存时间与 UPDATE_STAMP 表记录进行比较。例子：

```
public IEnumerable<MyType> ListCached
{
    get { 
      DateTime latestModified = GetLatestModifiedDate();
      if(lastCache<latestModified) Cache = GetListFromDatabase();
      latestModified = DateTime.Now;
      return Cache.GetAll<MyType>();
    }
} 
```

# database - 尝试在 Visual Basic 中使用 DataTable 更改数据库中的数据

> ID：15333635
> 
> 赞同：0
> 
> 时间：2013-03-11T07:55:25.963
> 
> 标签：database, vb.net, datatable

我正在尝试在 Visual Basic 2010 上将 DataTables 和 .mdb 数据库用于以下功能，但它确实有效：

我有一个现有的 .mdb 数据库，其中包含一个表“日期”和该表中的命名列。我想在数据库中添加一个包含新信息的新行。所以我使用以下代码连接到数据库：

```
sql = "SELECT * FROM Daten"

            Dim connection As New OleDb.OleDbConnection

            Try
                connection.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;" & "Data Source=" & pfad_netzdb
            Catch e As Exception
                MessageBox.Show(e.Message)
            End Try
            Dim adapter As OleDb.OleDbDataAdapter = New OleDb.OleDbDataAdapter(sql, connection) 
```

之后，我用数据库的给定数据填充 DataTable：

```
Dim daten As New DataTable

            adapter.Fill(daten) 
```

之后，我想向 DataTable 添加一个行并用新信息填充该行：

```
daten.Rows.Add()
daten.Rows(daten.Rows.Count - 1)(0) = "kdjfk"
daten.Rows(daten.Rows.Count - 1)(1) = "dkjfk"
daten.Rows(daten.Rows.Count - 1)(2) = "kdjfkd" 
```

之后，我想将更改后的 DataTable 与新行和行中的新信息一起发送回数据库。我认为这是我的代码没有达到我期望的地方。我正在尝试这样，但它确实有效：

```
adapter.Update(daten) 
```

谁能帮助我为什么此代码不起作用？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:28:04.073

也可以使用参数化的方式插入记录

```
Dim adapter As OleDbDataAdapter = New OleDbDataAdapter()
Dim command As OleDbCommand

' Create the SelectCommand.
command = New OleDbCommand("SELECT * from Daten", connection)

adapter.SelectCommand = command

' Create the InsertCommand.
command = New OleDbCommand( _
    "INSERT INTO Daten(ColumnName1, ColumnName2,ColumnName3) " & _
    "VALUES (?, ?,?)", connection)

command.Parameters.Add( _
    "ColumnName1", OleDbType.VarChar, 40, "kdjfk") //Replace with correct column name and data type
command.Parameters.Add( _
    "ColumnName2", OleDbType.VarChar, 40, "dkjfk") //Replace with correct column name and data type
command.Parameters.Add( _
    "ColumnName3", OleDbType.VarChar, 40, "kdjfkd")//Replace with correct column name and data type

adapter.InsertCommand = command
Return adapter 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:05:12.653

你提供了`InsertCommand`吗？您可以使用`CommandBuilder`.

```
Dim conString = "Provider=Microsoft.Jet.OLEDB.4.0;" & "Data Source=" & pfad_netzdb
Using connection As New OleDb.OleDbConnection(conString)
    Using adapter = New OleDb.OleDbDataAdapter("SELECT * FROM Daten", connection)
        Dim builder = New OleDb.OleDbCommandBuilder(adapter)
        builder.GetInsertCommand()
        Dim daten As New DataTable
        daten.Columns.Add("ColumnName1", GetType(String)) ' provide the correct name+type '
        daten.Columns.Add("ColumnName2", GetType(String)) ' provide the correct name+type '
        daten.Columns.Add("ColumnName3", GetType(String)) ' provide the correct name+type '
        Dim newRow = daten.Rows.Add()
        newRow(0) = "kdjfk"
        newRow(1) = "dkjfk"
        newRow(2) = "kdjfkd"
        connection.Open()
        adapter.Update(daten)
    End Using
End Using 
```

# if-statement - 写一个更好/更干净的 if 语句

> ID：15333643
> 
> 赞同：0
> 
> 时间：2013-03-11T07:56:10.083
> 
> 标签：if-statement, radio, checked, statements

我编写的这段代码有效，但我认为它不是最好的解决方案。

我正在做的是检查某个收音机是否被选中，如果它显示这个 div，如果这个收音机被选中，则显示这个 div 等等......

有人可以指出我正确的方向吗？

```
$(document).ready(function(){

$('.Form').hide();

$('input').click(function(){

    <!--check if its One-->
        if ($('input[value=informed]:checked').length) {

        $('#ContactFormOne').show();

        $("#ContactFormTwo,#ContactFormThree,#ContactFormFour,#ContactFormFive,#ContactSix'").hide();

     <!--check if its Two-->

        } else if ($('input[value=release]:checked').length) {

        $('#ContactFormTwo').show();

        $("#ContactFormOne,#ContactFormThree,#ContactFormFour,#ContactFormFive,#ContactSix'").hide();

     <!--check if its Three-->

        } else if ($('input[value=intake]:checked').length) {

        $('#ContactFormThree').show();

        $("#ContactFormTwo,#ContactFormOne,#ContactFormFour,#ContactFormFive,#ContactSix'").hide();

      <!--check if its Four-->      

        }  else if ($('input[value=checklist]:checked').length) {

        $('#ContactFormFour').show();

        $("#ContactFormTwo,#ContactFormOne,#ContactFormThree,#ContactFormFive,#ContactSix'").hide();

      <!--check if its Fiver-->     

        } else if ($('input[value=health]:checked').length) {

        $('#ContactFormFive').show();

        $("#ContactFormTwo,#ContactFormOne,#ContactFormThree,#ContactFormFour,#ContactSix'").hide();

         }
    })

}); 
```

# php - 使用 eclipse、PHP 和 RSE 打开声明

> ID：15333650
> 
> 赞同：2
> 
> 时间：2013-03-11T07:56:52.003
> 
> 标签：php, eclipse, remote-access

我已经使用 Eclipse Helios 和[RSE 插件](http://www.eclipse.org/tm/)建立了一个远程项目。

自动完成工作，但我不能使用`F3`（遵循声明）。如果声明在同一个文件中，则它不会起作用，如果声明在另一个文件中，它当然不起作用。

有什么方法可以让声明工具与 RSE 一起使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T08:34:19.087

好的找到解决方案：我必须添加“php支持”（右键单击项目->配置->添加php支持）并运行“刷新项目”“F5”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-02T10:43:57.010

在 Eclipse 3.4 (Ganymede) 我修复了这个手动编辑 .projects 文件

```
<natures>
    <nature>org.eclipse.php.core.PHPNature</nature>
</natures> 
```

# php - 如何将图像放入目录 imagejpeg()？

> ID：15333658
> 
> 赞同：-5
> 
> 时间：2013-03-11T07:57:24.513
> 
> 标签：php, html

好的，我有这段代码可以裁剪图像并显示它，我想做的不仅仅是显示它我想将图像保存在一个文件夹中这里是完整的代码

```
 <?php
/*
 * Crop-to-fit PHP-GD
 * http://salman-w.blogspot.com/2009/04/crop-to-fit-image-using-aspphp.html
 *
 * Resize and center crop an arbitrary size image to fixed width and height
 * e.g. convert a large portrait/landscape image to a small square thumbnail
 */

define('DESIRED_IMAGE_WIDTH', 512);
define('DESIRED_IMAGE_HEIGHT', 289);

$source_path = $_FILES['Image1']['tmp_name'];

/*
 * Add file validation code here
 */

list($source_width, $source_height, $source_type) = getimagesize($source_path);

switch ($source_type) {
    case IMAGETYPE_GIF:
        $source_gdim = imagecreatefromgif($source_path);
        break;
    case IMAGETYPE_JPEG:
        $source_gdim = imagecreatefromjpeg($source_path);
        break;
    case IMAGETYPE_PNG:
        $source_gdim = imagecreatefrompng($source_path);
        break;
}

$source_aspect_ratio = $source_width / $source_height;
$desired_aspect_ratio = DESIRED_IMAGE_WIDTH / DESIRED_IMAGE_HEIGHT;

if ($source_aspect_ratio > $desired_aspect_ratio) {
    /*
     * Triggered when source image is wider
     */
    $temp_height = DESIRED_IMAGE_HEIGHT;
    $temp_width = ( int ) (DESIRED_IMAGE_HEIGHT * $source_aspect_ratio);
} else {
    /*
     * Triggered otherwise (i.e. source image is similar or taller)
     */
    $temp_width = DESIRED_IMAGE_WIDTH;
    $temp_height = ( int ) (DESIRED_IMAGE_WIDTH / $source_aspect_ratio);
}

/*
 * Resize the image into a temporary GD image
 */

$temp_gdim = imagecreatetruecolor($temp_width, $temp_height);
imagecopyresampled(
    $temp_gdim,
    $source_gdim,
    0, 0,
    0, 0,
    $temp_width, $temp_height,
    $source_width, $source_height
);

/*
 * Copy cropped region from temporary image into the desired GD image
 */

$x0 = ($temp_width - DESIRED_IMAGE_WIDTH) / 2;
$y0 = ($temp_height - DESIRED_IMAGE_HEIGHT) / 2;
$desired_gdim = imagecreatetruecolor(DESIRED_IMAGE_WIDTH, DESIRED_IMAGE_HEIGHT);
imagecopy(
    $desired_gdim,
    $temp_gdim,
    0, 0,
    $x0, $y0,
    DESIRED_IMAGE_WIDTH, DESIRED_IMAGE_HEIGHT
);

/*
 * Render the image
 * Alternatively, you can save the image in file-system or database
 */
header('Content-type: image/jpeg');
imagejpeg( $desired_gdim );
/*
 * Add clean-up code here
 */
?> 
```

我的问题是在最后一行`imagejpeg( $desired_gdim );` 应该在哪里`imagejpeg( $desired_gdim, 'img/whatever-filename.jpg' );`

但是图像甚至没有显示在浏览器中，也没有发送到目录，如果我想用我已经上传的文件名插入它，同样的事情发生只是一个破碎图像的小图标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:26:12.093

您必须在两者之间进行选择 - 显示图像或将其保存到目录。你不能两者都做。

```
imagejpeg($gd_object); //shows the image, requires content-type to be image/jpeg

imagejpeg($gd_object, $filepath); //saves the image, to $filepath 
```

如果要显示它，您可以尝试保存图像，然后将使用重定向到图像。

```
imagejpeg($gd_object, $filepath);
header("Location: $filepath"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:43:35.303

将路径“img/whatever-filename.jpg”更改为文档根目录，您可以使用 $_SERVER['DOCUMENT_ROOT'] 获取并附加您想要的路径。例如 $_SERVER['DOCUMENT_ROOT'].'/img/whatever-filename.jpg';

# firefox - 如何使用 curl 通过代理模拟来自 Firefox 的请求？

> ID：15333660
> 
> 赞同：3
> 
> 时间：2013-03-11T07:57:27.697
> 
> 标签：firefox, curl, https, proxy

特别是，当我将 firefox 设置为使用代理进行 https 流量时，我试图复制它的行为。

根据我的测试，Firefox 似乎向代理发送了 CONNECT 请求，而以下 curl 命令直接向代理发送 GET。

```
curl --proxy-basic mydomain.com:8001 https://www.google.com 
```

对于 HTTPS 连接的代理，为了测试目的，如何使 curl 表现得像 firefox？

EDIT1：问题不在于用户代理，因为我并没有试图欺骗代理认为我是 Firefox，只是为了帮助代理像 Firefox 一样运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-28T06:06:48.453

我已经通过[Firebug](http://getfirebug.com/)做到了这一点。

安装 firebug 后，请按照以下步骤操作：

1.  右键单击 Firefox 中的网页并选择此选项：

[![在此处输入图像描述](../Images/e08a284a1ee9e83df70780b0051a3cf9.png)](https://i.stack.imgur.com/GkMWm.png)

2.  选择`Net`选项卡

[![在此处输入图像描述](../Images/b065be46dbff395cbb1e69236b774456.png)](https://i.stack.imgur.com/NfFoq.png)

3.  刷新页面

4.  右键单击要模拟的 URL 请求

5.  选择`copy as cURL`

[![在此处输入图像描述](../Images/f8e93853215db1a90b9ec59631581ff6.png)](https://i.stack.imgur.com/JnBnR.png)

6.  您要模拟的 URL 请求现在位于剪贴板中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-07T15:04:09.903

您必须指定一个代理，否则事情将无法正常工作，请执行以下操作：

1.  `curl -x 127.0.0.1:8888 "httpS://www.example.com/"`— 确保您尝试通过 HTTPS 进行连接，否则将发送简单的 get。
2.  `curl -p -x 127.0.0.1:8888 "http://www.example.com/"`— 即使使用普通的 HTTP 资源，它也可以工作。

除了这个之外，很难找到关于该主题的任何现有主题，所以也许我正在回答一个已经回答的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:00:52.500

使用 CURLOPT_USERAGENT 选项将代理设置为 firefox

例如参考 [CURL 用户代理](https://stackoverflow.com/questions/8194795/the-curl-user-agent)

要处理 ssl 部分，请查看此示例 [http://curl.haxx.se/libcurl/c/https.html](http://curl.haxx.se/libcurl/c/https.html)

最好的方法是在以太实中进行捕获，然后使用 CURLOPT_* 设置相应的标头字段

# c# - 通过套接字缓慢下载

> ID：15333662
> 
> 赞同：0
> 
> 时间：2013-03-11T07:57:43.700
> 
> 标签：c#, sockets, networking, tcp, client-server

我在 C# 的 TCP 之上编写了一个专有协议（客户端和服务器），它将文件从客户端发送到服务器，反之亦然。

由于它在概念上是全双工的，因此客户端和服务器的接收和发送方法是相同的。

该协议允许`client1`将文件上传到`server`，并且一旦文件被缓冲（在服务器上），`client1`就可以决定是否`client2`和/或`client3`获取文件。（根据 的请求，可以同时`server`将唯一发送到`client2`、仅发送到或同时发送到两者）。`client3``client1`

问题是我看到服务器 -> 客户端的数据传输速度很慢，大约 140 kb/s，而客户端的实际带宽要高得多，显然服务器也是如此。

起初我以为这只是这个特定连接的最大带宽（我家的客户端和远程位置的服务器），但后来我发现当我打开并在我的 PC 上让服务器发送它们时传输速率**翻倍**文件同时；每个客户端都保持不变，但由于它们都在同一台 PC 上，我的本地网络上的总吞吐量翻了一番。`client2``client3`

1.  关于我的问题可能出在哪里的任何想法？如何将服务器 -> 客户端传输速率提高到最大值？
2.  任何关于我的代码的一般改进点都将受到高度赞赏。

这是我的代码：

```
struct ReceiveBuffer
{
    public const int BUFFER_SIZE = 1024 * 16;
    public byte[] BUFFER;
    public int ToReceive;
    public MemoryStream BufStream;

    public ReceiveBuffer(int toRec)
    {
        BUFFER = new byte[BUFFER_SIZE];
        ToReceive = toRec;
        BufStream = new MemoryStream(toRec);
    }
}

struct SendBuffer
{
    public const int BUFFER_SIZE = 1024 * 16;
    public byte[] BUFFER;
    public int sent;

    public SendBuffer(byte[] data)
    {
        BUFFER = new byte[data.Length];
        Buffer.BlockCopy(data, 0, BUFFER, 0, data.Length);
        sent = 0;
    }
}

public void ReceiveAsync()
{
    try
    {
        socket.BeginReceive(lenBuffer, 0, 4, SocketFlags.None,
                            receiveCallback, null);                
    }
    catch (SocketException se)
    {
         //handle disconnection
    }

}

void receiveCallback(IAsyncResult ar)
{
    try
    {
        int rec = socket.EndReceive(ar);
        if (rec == 0)
        {
            if (Disconnected != null)
            {
                Disconnected(this);
                return;
            }
        }

        if (rec != 4)
        {
            //less than 4 bytes received...error
            return;
        }

        receiveBuffer = new ReceiveBuffer(BitConverter.ToInt32(lenBuffer, 0));
        socket.BeginReceive(receiveBuffer.BUFFER, 0,
                            receiveBuffer.BUFFER.Length,
                            SocketFlags.None, receivePacketCallback, null);
    }
    catch (SocketException se)
    {
        //raise disconnection event
    }
}

void receivePacketCallback(IAsyncResult ar)
{
    try
    {
        int rec = socket.EndReceive(ar);
        if (rec <= 0)
        {
            return;
        }
        receiveBuffer.BufStream.Write(receiveBuffer.BUFFER, 0, rec);
        receiveBuffer.ToReceive -= rec;
        if (receiveBuffer.ToReceive > 0)
        {
            Array.Clear(receiveBuffer.BUFFER, 0, receiveBuffer.BUFFER.Length);
            socket.BeginReceive(receiveBuffer.BUFFER, 0,
                                receiveBuffer.BUFFER.Length,
                                SocketFlags.None, receivePacketCallback, null);
            return;
        }

        if (DataReceived != null)
        {
            //raise dataReceived event
        }
        receiveBuffer.Dispose();
        if (socket !=null)
            ReceiveAsync();

    }
    catch (SocketException se)
    {
        //handle disconnection
    }

}

// Send Async
public void SendAsyncString(string str, CommandsToClient cmd)
{
    BinaryWriter bw = new BinaryWriter(new MemoryStream());
    bw.Write((int)cmd);
    bw.Write((int)str.Length);
    bw.Write(Encoding.ASCII.GetBytes(str));
    bw.Close();
    byte[] data = ((MemoryStream)(bw.BaseStream)).ToArray();
    bw.BaseStream.Dispose();
    SendAsync(data);
}

public void SendAsync(byte[] data)
{
    int toSend;
    byte[] dataWithHeader = Combine(BitConverter.GetBytes(data.Length), data);
    sendBuffer = new SendBuffer(dataWithHeader);
    if (sendBuffer.BUFFER.Length - sendBuffer.sent > SendBuffer.BUFFER_SIZE)
        toSend = SendBuffer.BUFFER_SIZE;
    else
        toSend = sendBuffer.BUFFER.Length - sendBuffer.sent;
    socket.BeginSend(sendBuffer.BUFFER, 0,toSend, SocketFlags.None,
                     sendCallback, null);
}

void sendCallback(IAsyncResult ar)
{
    try
    {
        int bytesSent = socket.EndSend(ar);
        if (bytesSent == 0)
        {
            //raise disconnection event
        }
        sendBuffer.sent += bytesSent;
        if (sendBuffer.sent==sendBuffer.BUFFER.Length)
        {
            sendBuffer.Dispose();
            return;
        }
        int toSend;
        if (sendBuffer.BUFFER.Length - sendBuffer.sent > SendBuffer.BUFFER_SIZE)
            toSend = SendBuffer.BUFFER_SIZE;
        else
            toSend = sendBuffer.BUFFER.Length - sendBuffer.sent; 

        socket.BeginSend(sendBuffer.BUFFER, sendBuffer.sent,toSend,
                        SocketFlags.None, sendCallback, null);
    }
    catch (SocketException se)
    {
        //hande disconnection
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:59:30.277

似乎让我慢下来的是缓冲区大小。

在我的 PC 上：我可以上传 @ 大约 50 KB/秒
我可以下载 @ 大约 600 KB/秒（这些值显然会发生变化，具体取决于远程主机，但它确实给出了一个很好的估计）

在服务器上：上传和下载更高的带宽（数十兆字节）

这是我现在使用的设置，可以让我获得高传输率：

在客户端（我的电脑）

```
Receive Buffer = 128 Kbytes
Send    Buffer = 32  Kbytes 
```

在服务器端：

```
Receive Buffer =  64 Kbytes
Send    Buffer =  256 Kbytes 
```

# python - 使用路径查找特定文件

> ID：15333667
> 
> 赞同：-1
> 
> 时间：2013-03-11T07:57:56.660
> 
> 标签：python, python-2.6

如何使用ls命令查找子目录的完整路径...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:04:58.043

正如其他人指出的那样，您似乎确实让自己的生活变得更加困难。Python 已经有库可以为你做这种事情（看看[os.walk](http://docs.python.org/2/library/os.html#os.walk)）。如果你拿枪指着我的头，坚持我按照你的方式做事，我会像这样解析输出文件：

1.  将输出文件加载到数组中，每个数组元素一行。
2.  运行数组并查找包含“main.txt”的行。
3.  对于每个匹配项，您需要找到它所在的目录。您可以通过查找以“:”结尾的前一行来完成此操作。

通过为`ls`. 例如，`ls -R1`更容易解析。

# javascript - “KeyPress”和“Paste”上的 Javascript 触发器

> ID：15333668
> 
> 赞同：9
> 
> 时间：2013-03-11T07:55:52.700
> 
> 标签：javascript

我有一个 JavaScript 来检查一个字段是否等于 15 个字符，如果不是，则提交按钮是灰色的。如果我手动输入 15 个字符，这将非常有效，但如果我粘贴 15 个字符，则不会。即使将内容粘贴到字段中，我如何才能检查？

我可以让它定期（秒）检查字符还是有“检查粘贴”的功能？

我的脚本：

```
<script type="text/javascript">
jQuery(document).ready(function($){
$('input[type=submit]').attr("disabled","disabled");
$('input[name="item_meta[1234]"]').keypress(function() { //change # to the ID of your field
        if (document.getElementById("field_ygtw9u").value.length < 14) { //disable submit if "no" is selected
              $('input[type=submit]').attr("disabled","disabled");
        } else { //enable the submit button
              $('input[type=submit]').removeAttr('disabled');
        }
  });
});
</script>

<form>
<div id="frm_field_1234_container" class="frm_form_field form-field  frm_required_field frm_top_container">
<label class="frm_primary_label">Minimun 15 char:
    <span class="frm_required"></span>
</label>
<input type="text" id="field_ygtw9u" name="item_meta[1234]" value=""  maxlength="15" class="required"/>

<p class="submit">
<input type="submit" value="Submit" />
</p>
</form> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-11T08:31:31.957

更改`keypress`为`keyup`它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:35:31.580

尝试类似的东西

```
var $submit = $('input[type=submit]').attr("disabled","disabled");
$('input[name="item_meta[1234]"]').keyup(function() { //change # to the ID of your field
    var $this = $(this);
    if ($this.val().length < 14) { //disable submit if "no" is selected
        $submit.attr("disabled","disabled");
    } else { //enable the submit button
        $submit.removeAttr('disabled');
    }
  });

$('#field_ygtw9u').on('paste', function(e){
    var $this = $(this);
    setTimeout(function() {
        if ($this.val().length < 14) { //disable submit if "no" is selected
            $submit.attr("disabled","disabled");
        } else { //enable the submit button
            $submit.removeAttr('disabled');
        }
    }, 0);
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/3j497/4/)

不要使用事件，因为在 IE/Chrome 中`keypress`按下时不会触发它`backspace`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T08:43:10.993

测试，工作。小提琴：http: [//jsfiddle.net/fnkr/MXnuk/](http://jsfiddle.net/fnkr/MXnuk/)

```
<script type="text/javascript">
    function checkInput() {
        if (document.getElementById("field_ygtw9u").value.length < 14) { //disable submit if "no" is selected
                $('input[type=submit]').attr("disabled", "disabled");
            } else { //enable the submit button
                $('input[type=submit]').removeAttr('disabled');
            }
    }

    jQuery(document).ready(function ($) {
        $('input[type=submit]').attr("disabled", "disabled");
        $('input[name="item_meta[1234]"]').bind("input", function () { //change # to the ID of your field
            checkInput();    
        });

        $('input[name="item_meta[1234]"]').bind("propertychange", function () { //change # to the ID of your field
            checkInput();
        });
    });
</script>

<form>
    <div id="frm_field_1234_container" class="frm_form_field form-field  frm_required_field frm_top_container">
        <label class="frm_primary_label">Minimun 15 char: <span class="frm_required"></span>

        </label>
        <input type="text" id="field_ygtw9u" name="item_meta[1234]" value="" maxlength="15"
        class="required" />
        <p class="submit">
            <input type="submit" value="Submit" />
        </p>
</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T08:31:24.533

您应该使用`propertychange`（IE）和`input`事件。[**现场演示**](http://jsfiddle.net/SBxfz/)

```
$('input[name="item_meta[1234]"]').bind("input", function() { //change # to the ID of your field
    if (document.getElementById("field_ygtw9u").value.length < 14) { //disable submit if "no" is selected
          $('input[type=submit]').attr("disabled","disabled");
    } else { //enable the submit button
          $('input[type=submit]').removeAttr('disabled');
    }
});

$('input[name="item_meta[1234]"]').bind("propertychange", function() { //change # to the ID of your field
    if (document.getElementById("field_ygtw9u").value.length < 14) { //disable submit if "no" is selected
          $('input[type=submit]').attr("disabled","disabled");
    } else { //enable the submit button
          $('input[type=submit]').removeAttr('disabled');
    }
}); 
```

# java - 如何将 JsonArray 从客户端（java 或 Android）发送到 servlet（服务器）

> ID：15333669
> 
> 赞同：0
> 
> 时间：2013-03-11T07:58:05.830
> 
> 标签：java, android, json

我必须将这个带有 HTTP 请求的 JsonArray 从客户端发送到服务器，并且必须将其提取到 servlet 页面。没有 NameValuePair 类，因为我的要求不同。

任何帮助，将不胜感激。

听到的是我用来发送参数的一些代码，但这次是它的 jsonArray，所以我不能使用它

```
 Map<String, String> params = new HashMap<String, String>();
   params.put(Constants.NAME, name); 
```

然后构建身体。

```
 StringBuilder bodyBuilder = new StringBuilder();
Iterator<Entry<String, String>> iterator = params.entrySet().iterator();
// constructs the POST body using the parameters
while (iterator.hasNext()) {
    Entry<String, String> param = iterator.next();
    bodyBuilder.append(param.getKey()).append('=')
            .append(param.getValue());
    if (iterator.hasNext()) {
        bodyBuilder.append('&');
    }
}
String body = bodyBuilder.toString(); 
```

然后是 HTTP 请求。

```
 conn = (HttpURLConnection)url.openConnection();
        conn.setDoOutput(true);
        conn.setUseCaches(false);
        conn.setFixedLengthStreamingMode(bytes.length);
        conn.setRequestMethod("POST");
        conn.setRequestProperty("Content-Type",
                "application/x-www-forurlencoded;charset=UTF-8");
        // post the request
        OutputStream out = conn.getOutputStream();

        out.write(bytes); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T08:23:28.677

这样您就可以将 JSON 数组发送到服务器

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost(url);

StringEntity se = new StringEntity(jsonArray.toString());
se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
httppost.setEntity(se);

HttpResponse response = httpclient.execute(httppost); 
```

Servlet 您可以像这样读取 json 数组（在 Servlet 的 doPost 方法中使用此代码）：

```
StringBuilder sb = new StringBuilder();
BufferedReader br = request.getReader();
String str;
while( (str = br.readLine()) != null ){
    sb.append(str);
}    
JSONArray jArr = new JSONArray(sb.toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:16:02.207

Ahhhhhhh ...跳过一些额外的工作..对于那些理解我的问题的人，我正在发布答案...使用我在问题中提到的方法，您可以简单地将JsonArray接收到Servlet ..

正如我提到的，把它放到参数中

```
params.put("json", jsonArray.toString()); 
```

然后在servlet中接收..

```
 String jsonArray=request.getParameter("json");
    JSONArray jArr = new JSONArray(j.toString()); 
```

# c# - 具有所有属性的 linq to xml 查询

> ID：15333674
> 
> 赞同：2
> 
> 时间：2013-03-11T07:58:14.737
> 
> 标签：c#, linq, linq-to-xml

我有这样的`xml`文件

```
<Products>
  <Product Name="Mobile Device" Code="10000000000000000006">
    <Providers>
        <Provider Name="VODA" Code="VODA">
            <Menus>
                <Menu  Name="Home" Url="TopModelsNew.aspx" DisplayOrder="1" NewWindow="0"/>
                <Menu  Name="Top Queries" Url="TopIssues.aspx" DisplayOrder="2" NewWindow="0"/>
                <Menu  Name="Error Codes" Url="PCErrors.aspx" DisplayOrder="3" NewWindow="0"/>
            </Menus>
        </Provider>
    </Providers>
</Product> 
```

我想在列表中找到 Product Code="10000000000000000006" 和 Provider Code="VODA" 的所有菜单。
结果应该是这样的

```
  名称 Url DisplayOrder
  主页 TopModels 0

```

我正在尝试 linq to xml 如下

```
 XDocument xdoc = XDocument.Load(Server.MapPath("~/App_Data/LeftMenu.xml"));
        var products = from product in xdoc.Descendants("Product") where
        new{
                 .....    
            }; 
```

我无法找到如何获取列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T08:14:18.433

```
XDocument xdoc = XDocument.Load(Server.MapPath("~/App_Data/LeftMenu.xml"));
var menus = from product in xdoc.Descendants("Product")
            where (string)product.Attribute("Code") == "10000000000000000006"
            from provider in product.Descendants("Provider")
            where (string)provider.Attribute("Code") == "VODA"
            from menu in provider.Descendants("Menu")
            select new { 
                Name = (string)menu.Attribute("Name"),
                Url = (string)menu.Attribute("Url"),
                DisplayOrder = (int)menu.Attribute("DisplayOrder")
            }; 
```

结果：

```
 Name            Url                  DisaplayOrder 
  "Home"          "TopModelsNew.aspx"       1
  "Top Queries"   "TopIssues.aspx"          2
  "Error Codes"   "PCErrors.aspx"           3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T08:14:25.843

```
var menus = doc.Root
                .Elements("Product")
                .Where(p => (string)p.Attribute("Code") == "10000000000000000006")
                .SelectMany(p => p.Element("Providers").Elements("Provider"))
                .Where(p => (string)p.Attribute("Code") == "VODA")
                .SelectMany(p => p.Element("Menus").Elements("Menu"))
                .ToList(); 
```

它为您的示例数据返回所有 3 个菜单元素。您可以使用投影来获取匿名对象，而不是`XElement`：

```
var menus = doc.Root
               .Elements("Product")
               .Where(p => (string)p.Attribute("Code") == "10000000000000000006")
               .SelectMany(p => p.Element("Providers").Elements("Provider"))
               .Where(p => (string)p.Attribute("Code") == "VODA")
               .SelectMany(p => p.Element("Menus").Elements("Menu"))
               .Select(m => new {
                   Name = (string)m.Attribute("Name"),
                   Url = (string)m.Attribute("Url"),
                   DisplayOrder = (int)m.Attribute("DisplayOrder")
               }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T09:25:40.290

```
XDocument xdoc = XDocument.Load(Server.MapPath("~/App_Data/LeftMenu.xml"));
var menus = xdoc.Descendants("Menu").Where(x =>
    x.Ancestors("Product").First().Attribute("Code").Value == "10000000000000000006" &&
    x.Ancestors("Provider").First().Attribute("Code").Value == "VODA"); 
```

对源 XML 文档进行一些假设：

*   `<Menu>`节点必须且只有一个`<Product>`祖先节点
*   `<Menu>`节点必须且只有一个`<Provider>`祖先节点

# iphone - 多行标签

> ID：15333676
> 
> 赞同：3
> 
> 时间：2013-03-11T07:58:23.490
> 
> 标签：iphone, xcode, ios6, uilabel

我想在 iOS 6 应用程序中创建多行标签。它在 < iOS V6.0 应用程序中成功运行，现在我在 iOS6 应用程序中使用相同的代码，但它不工作。

这是我的代码：`

```
descriptionLabel.font = [UIFont fontWithName:@"Arial" size:13];
 text2 = [text2 stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
descriptionLabel.text=text2;
//here i calculate label height.
float messeglblHeight = [self calculateHeightOfTextFromWidth:text2 : [UIFont fontWithName:@"Arial" size:13] :280 :UILineBreakModeWordWrap];
[descriptionLabel setFrame:CGRectMake(descriptionLabel.frame.origin.x,  descriptionLabel.frame.origin.y, 280, messeglblHeight)];
descriptionLabel.lineBreakMode = UILineBreakModeWordWrap;
descriptionLabel.numberOfLines = 0;
[descriptionLabel sizeToFit]; 
```

我从下面的函数计算标签高度：

```
-(float) calculateHeightOfTextFromWidth:(NSString*) text: (UIFont*)withFont: (float)width :(UILineBreakMode)lineBreakMode
{
CGSize suggestedSize = [text sizeWithFont:withFont constrainedToSize:CGSizeMake(width, FLT_MAX) lineBreakMode:lineBreakMode];

return suggestedSize.height;
} 
```

所以请给我一些建议。

PS：代码在iOS 5，想在iOS6运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T09:33:39.613

![在此处输入图像描述](../Images/2ad955774a34a2dae79d1a294e3dba4c.png)

不要为您的标签使用自动布局，将其取消选中，代码工作正常，除此之外没有任何问题，希望对您有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T08:00:40.300

您不需要代码的最后一行。

```
[descriptionLabel sizeToFit]; 
```

# php - 正则表达式去除除 ' 之外的所有标点符号

> ID：15333680
> 
> 赞同：1
> 
> 时间：2013-03-11T07:58:53.300
> 
> 标签：php, regex

我想从我导入的文本块中删除除 ' 之外的所有标点符号，例如 ' in 没有。

我目前有

> $words = preg_replace('/[^az]+/i', '', $words);

哪个去掉了所有标点符号，但我不确定如何包含 '.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:25:35.723

要删除具有 unicode 属性的标点符号，请执行以下操作：

```
 preg_replace('/\p{Punctuation}+/u', '', $words); 
```

或者

```
 preg_replace('/\p{P}+/u', '', $words); 
```

要删除除单引号之外的所有标点符号：

```
 preg_replace("/[^\P{P}']+/u", '', $words); 
```

看看[这里](http://www.regular-expressions.info/unicode.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:06:02.133

试试看

```
preg_replace( '/[^\w\']+|\'(?!\w)|(?<!\w)\'/', '', $words ) 
```

这应该替换单词之外的所有非字母和单撇号

尚未测试，请让我知道它是否有效

*更新*

要删除数字，也只需使用此正则表达式

```
/[^\w\']+|\'(?!\w)|(?<!\w)\'|\d+/ 
```

刚刚添加`\d+`，所以数字匹配并将被删除

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:25:49.003

您可以使用

```
(?!')\p{P} 
```

匹配除撇号以外的任何标点符号。例如

```
preg_replace('/(?!\')\p{P}/gu', '', $str); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T08:31:13.843

```
/(?!'\b)[[:punct:]] ?/ 
```

这匹配任何标点字符，除非它是一个撇号后跟一个字符（即单词边界，这意味着一个字符）。

见[http://rubular.com/r/VJ0J5c25vc](http://rubular.com/r/VJ0J5c25vc)

# javascript - 在 Rails 代码中显示动态生成的 JS 变量

> ID：15333681
> 
> 赞同：0
> 
> 时间：2013-03-11T07:58:53.380
> 
> 标签：javascript, ruby-on-rails, google-maps-api-3

我正在我网站的谷歌地图功能中实现链接。每个链接都连接到我网站中的不同地点。为了做到这一点，我一直在使用 Javascript 并遵循 Google API 教程。

place 变量由 Javascript 生成，我希望它是链接的名称。但是，符号：

```
contentString = '<%=link_to '+place.name+'%>'; 
```

产生结果：+place.name+（加下划线，因为它是一个链接）

我做错了什么，它可能很简单，但不确定它是什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:10:33.333

简单的答案是你不能这样做。Rails 视图在编译时无法访问 javascript 变量。实现这一点的最简单方法是使用 js 更改链接的文本（这不适用于您要执行的操作）。你应该只构建你的字符串而不使用 rails helpers

```
contentString = '<a href="/some/path">' + place.name + '</a>' 
```

# java - java - 如何在java中的map上保留两个迭代器并在没有ConcurrentModificationException的情况下删除它们之间的键

> ID：15333682
> 
> 赞同：7
> 
> 时间：2013-03-11T07:58:56.563
> 
> 标签：java, iterator, hashmap, concurrentmodification

我必须处理一个`Map <BitSet,List<List<Integer>> MyMap`

```
if (key1 contains all of corresponding true bits of key2)
     Remove from key2 all those values which are common with key1) 
```

在此过程中，如果列表中的元素数量低于 THRESHOLD（用户定义的正整数），则将其删除。此外，如果 Map 包含空列表，则删除相应的键。

我正在使用以下代码：

```
List<BitSet> keys = new ArrayList<>(MyMap.keySet());  
ListIterator it1=keys.listIterator();
while(it1.hasNext())  {
     BitSet key1=(BitSet)it1.next();
     ListIterator it2=keys.listIterator(it1.nextIndex());
     while(it2.hasNext()) {
         BitSet key2=(BitSet)it2.next();                 
         BitSet ankey=(BitSet)key1.clone();
         ankey.and(key2);    
         if(ankey.equals(key1)) {//key1 is subset and key2 is superset
               if(removePoints(key1,key2))  {
                     it1.remove();
                     break;
               }
         }
         else if(ankey.equals(key2))  {                           
              if(removePoints(key2,key1))  {
                    it2.remove();                         
              }
         }
     }
}

public static boolean removePoints(BitSet key1,BitSet key2)
 {
     List<List<Integer>> list1=MyMap.get(key1);         
     List<List<Integer>> list2=MyMap.get(key2);
     Boolean ret=false;         
     for(int i=0;i<list1.size();i++)  {                   
         List<Integer> sublist1=list1.get(i);            
         for(int j=0;j<list2.size();j++)  {            
             List<Integer> sublist2=list2.get(j);                 
             sublist1.removeAll(sublist2);
             if(sublist1.isEmpty())
                 break;
         }
         if(sublist1.size()<=THRESHOLD)
             list1.remove(sublist1);
         if( list1.isEmpty()) {             
             MyMap.remove(key1); 
             ret=true;                 
         }
     }
     return ret;
 } 
```

但是程序给出了错误：

`java.util.ConcurrentModificationException` `at java.util.ArrayList$Itr.checkForComodification`
`at java.util.ArrayList$Itr.next`

另外，不确定这是否是有效的编码方式？由于地图包含约 2000 个条目。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:12:06.953

A在创建`ConcurrentModificationException`后修改基础集合时可能发生`Iterator`，并且该修改不是通过其`Iterator`本身完成的。

在您编写的代码中，只有一个地方会发生这种情况： and 之间的交互`it1`，`it2`它们是同一集合上的迭代器。任何时候你调用`remove`一个，另一个会在你下次调用时中断`next`。

有多种方法可以解决此问题，但一种方法是将要从“关键”集合中删除的内容与该集合的迭代分开，如下所示：

```
List<BitSet> allKeys = new ArrayList<>(MyMap.keySet());  
List<BitSet> removedKeys = new ArrayList<>();

for (ListIterator<BitSet> it1 = allKeys.listIterator(); it1.hasNext(); ) {
   BitSet key1 = it1.next();
   for (ListIterator<BitSet> it2 = allKeys.listIterator(it1.nextIndex()); it2.hasNext(); ) {
       BitSet key2 = it2.next();
       BitSet ankey=(BitSet)key1.clone();
       ankey.and(key2);    
       if(ankey.equals(key1)) {//key1 is subset and key2 is superset
           if(removePoints(key1,key2))  {
                 removedKeys.add(key1);
                 break;
           }
       }
       else if(ankey.equals(key2))  {                           
          if(removePoints(key2,key1))  {
                 removedKeys.add(key2);
                 break;
          }
       }
    }
}

allKeys.removeAll(removedKeys); 
```

`allKeys`然后将处于您期望的状态。我假设稍后您会想要打电话`MyMap.keySet().retainAll()`或类似的电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:29:03.233

您不能在地图的 keySet 上使用 iterator.remove()，因为它只是地图内部结构的“视图”。

但是您可以在映射的 entrySet() 上使用迭代器，其中每个元素都是 Map.Entry 的一个实例，其中包含所有映射条目（键/值对）。您可以在此迭代器上调用 iterator.remove()，这将有效地从映射中删除相应的键/值对。

```
Map<Integer, String> map = new HashMap<Integer, String>();
map.put(Integer.valueOf(0), "0");
map.put(Integer.valueOf(1), "1");
map.put(Integer.valueOf(2), "2");
map.put(Integer.valueOf(3), "3");
map.put(Integer.valueOf(4), "4");

System.out.println(map);

Iterator<Map.Entry<Integer, String>> entryIter = map.entrySet().iterator();
while (entryIter.hasNext()) {
   Map.Entry<Integer, String> entry = entryIter.next();
   if (entry.getKey().intValue() % 2 == 0)
       entryIter.remove();
}

System.out.println(map); 
```

希望它有所帮助。

问候

# c# - 到控制台的标准 sql 错误消息太模糊

> ID：15333683
> 
> 赞同：1
> 
> 时间：2013-03-11T07:58:56.823
> 
> 标签：c#, sql-server, winforms

有没有办法在 ac#winforms 应用程序中使异常消息的控制台显示更精确一点。如，而不仅仅是；

```
A first chance exception of type 'System.Data.SqlClient.SqlException' occurred in System.Data.dll 
```

也许更像java的，

```
java.sql.SQLException: Closed Connection at
oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112) at
... 
```

至少所以我知道什么可能是错的。我确信这种情况有一些东西，但不知道:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:28:04.040

那额外的信息基本上就是`.StackTrace`。它的精确程度取决于它的构建方式、pdb 是否可用等*。*

如果您只是执行以下操作：

```
catch(Exception ex) {
    Console.Error.WriteLine(ex);
} 
```

默认情况下，您应该会看到类似级别的信息。基本上，`ToString()`节目不仅仅是`.Message`. 例如：

```
static void Main()
{
    try {Throw();}
    catch(Exception ex) {
        Console.Error.WriteLine(ex);
    }
}
public static void Throw()
{
    throw new InvalidOperationException("oops");
} 
```

显示：

```
System.InvalidOperationException: oops
   at X.Throw() in c:\Users\Marc\Documents\Visual Studio 2012\Projects\ConsoleAp
plication1\ConsoleApplication1\Program.cs:line 30
   at X.Main() in c:\Users\Marc\Documents\Visual Studio 2012\Projects\ConsoleApp
lication1\ConsoleApplication1\Program.cs:line 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:28:31.560

SQLException 已经包含足够的信息

请查看 MSDN 页面（[http://msdn.microsoft.com/it-it/library/system.data.sqlclient.sqlexception.aspx](http://msdn.microsoft.com/it-it/library/system.data.sqlclient.sqlexception.aspx)）

```
 try
        {
            command.Connection.Open();
            command.ExecuteNonQuery();
        }
        catch (SqlException ex)
        {
            for (int i = 0; i < ex.Errors.Count; i++)
            {
                errorMessages.Append("Index #" + i + "\n" +
                    "Message: " + ex.Errors[i].Message + "\n" +
                    "LineNumber: " + ex.Errors[i].LineNumber + "\n" +
                    "Source: " + ex.Errors[i].Source + "\n" +
                    "Procedure: " + ex.Errors[i].Procedure + "\n");
            }
            Console.WriteLine(errorMessages.ToString());
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:31:17.810

是的，当然是：

```
try
{
  /// your code goes here ...
}
catch(SqlException sex)
{
 foreach(SqlError error in sex)
 {
   Console.WriteLine("{0}:{1} Error {2} State {3}: \"{4}\" at {5}@{6}", 
     error.Server, error.Source,
     error.Number, error.State,
     error.Message,
     error.Procedure, error.LineNumber);
 }
} 
```

你说对了？`try`…… `catch`！

对于没有 try/catch 块有效的（少数）情况，您可以求助于全局处理程序：[`Application.UnhandledException`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.unhandledexception)对于 UI 消息泵线程和[`AppDomain.UnhandledException`](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)非 UI 线程。

# ruby-on-rails - 什么是 rails g XXXXX:install ？例如 rails g bootstrap:install 如何工作？

> ID：15333686
> 
> 赞同：0
> 
> 时间：2013-03-11T07:58:59.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想知道你什么时候跑

```
rails g xxxxxxx:install 
```

发生什么了 ？这些 xxxxx 是什么（例如，我知道 bootstrap，但是 bootstrap:install 做了什么，因为我已经包含了 bootstrap gem）。这些安装是创建文件还是在内部做更多的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:14:28.123

`rails g`是`rails generate`. rails 中有一些内置的生成器（`rails g migration`例如），它们确实可以创建文件或更改您的配置。

任何人都可以编写自己的生成器：有关更多信息，请参阅[rails 指南](http://guides.rubyonrails.org/generators.html)。

**编辑**

生成器，如 rake 任务，可以命名空间。因此`bootstrap:install`将调用引导命名空间中的安装生成器，[根据文档](https://github.com/seyhunak/twitter-bootstrap-rails)，它将在您的资产文件夹中安装所需的 css 文件。如果您想了解更多详细信息，[请阅读生成器代码](https://github.com/seyhunak/twitter-bootstrap-rails)...

# c# - 如何编写一个同时需要请求和响应 Dtos 的 ServiceStack 插件

> ID：15333689
> 
> 赞同：5
> 
> 时间：2013-03-11T07:59:13.360
> 
> 标签：c#, servicestack

我需要为本地化数据提供服务。所有本地化的响应 Dto 共享相同的属性。即我定义了一个接口 ( `ILocalizedDto`) 来标记那些 Dto。在请求端，有一个`ILocalizedRequest`请求本地化的请求。

使用`IPlugin`我已经设法实现所需的功能。但是我很确定该实现不是线程安全的，另外我不知道是否可以使用 IHttpRequest.GetHashCode() 作为一个请求/响应周期的标识符。

实现同时使用请求和响应 Dto 的 ServiceStack 插件的正确方法是什么？即是否有一些 IHttpRequest.Context 来存储数据，或者是否可以在响应时获取请求 dto？

```
internal class LocalizationFeature : IPlugin
{
    public static bool Enabled { private set; get; }

    /// <summary>
    ///     Activate the localization mechanism, so every response Dto which is a <see cref="ILocalizedDto" />
    ///     will be translated.
    /// </summary>
    /// <param name="appHost">The app host</param>
    public void Register(IAppHost appHost)
    {
        if (Enabled)
        {
            return;
        }
        Enabled = true;
        var filter = new LocalizationFilter();
        appHost.RequestFilters.Add(filter.RequestFilter);
        appHost.ResponseFilters.Add(filter.ResponseFilter);
    }
}

// My request/response filter
public class LocalizationFilter
{
    private readonly Dictionary<int,ILocalizedRequest> localizedRequests = new Dictionary<int, ILocalizedRequest>();

    public ILocalizer Localizer { get; set; }

    public void RequestFilter(IHttpRequest req, IHttpResponse res, object requestDto)
    {
        var localizedRequest = requestDto as ILocalizedRequest;
        if (localizedRequest != null)
        {
            localizedRequests.Add(GetRequestId(req), localizedRequest);
        }
    }

    public void ResponseFilter(IHttpRequest req, IHttpResponse res, object response)
    {
        var requestId = GetRequestId(req);
        if (!(response is ILocalizedDto) || !localizedRequests.ContainsKey(requestId))
        {
            return;
        }

        var localizedDto = response as ILocalizedDto;
        var localizedRequest = localizedRequests[requestId];
        localizedRequests.Remove(requestId);

        Localizer.Translate(localizedDto, localizedRequest.Language);
    }

    private static int GetRequestId(IHttpRequest req)
    {
        return req.GetHashCode();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-23T20:59:43.080

首先：为什么你需要请求本身，而你只需要`Language`财产的价值？

以下代码是您的方案的合法解决方案：

```
public class LocalizationFeature : IPlugin
{
  public const string LanguageKey = "X-Language";

  public void Register(IAppHost appHost)
  {
    this.GlobalRequestFilters.Add(this.InterceptRequest);
    this.GlobalResponseFilters.Add(this.InterceptResponse);
  }

  private void InterceptRequest(IRequest request,
                                IResponse response,
                                object dto)
  {
    var localizedRequest = dto as ILocalizedRequest;
    if (localizedRequest != null)
    {
      request.SetItem(LanguageKey,
                      localizedRequest.Language);
    }
  }

  private void InterceptResponse(IRequest request,
                                 IResponse response,
                                 object dto)
  {
    var localizedDto = dto as ILocalizedDto;
    if (localizedDto != null)
    {
      var language = request.GetParam(LanguageKey) ?? request.GetItem(LanguageKey);
      if (!string.IsNullOrEmpty(language))
      {
        Localizer.Translate(localizedDto,
                            language);
      }
    }
  }
} 
```

有趣的是`var language = request.GetParam(LanguageKey) ?? request.GetItem(LanguageKey);`，它使您有机会使用带有“X-Language”键的 HTTP 标头、cookie 或表单数据（如果适用）注入语言。（你也可以做另一个`?? DefaultLanguage`注入默认语言进行翻译......）

如果不以这种方式提供，`Language`则从请求的集合中读取`Items`并使用请求集。

编辑：此外，正如[@mythz 所指出的](https://stackoverflow.com/questions/15333689/how-to-write-a-servicestack-plugin-which-needs-both-request-and-response-dtos#comment-52230671)，您还可以`request.Dto`在`InterceptResponse`方法中访问请求 DTO：

```
private void InterceptResponse(IRequest request,
                               IResponse response,
                               object dto)
{
    var localizedRequest = request.Dto as ILocalizedRequest;
    var localizedDto = dto as ILocalizedDto;
    if (localizedRequest != null
        && localizedDto != null)
    {
      Localizer.Translate(localizedDto,
                          localizedRequest.Language);
    }
} 
```

# c# - C#连接到mysql服务器

> ID：15333691
> 
> 赞同：1
> 
> 时间：2013-03-11T07:59:16.307
> 
> 标签：c#

我需要你的帮助。

我收到了错误消息：

> “建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。找不到服务器或无法访问该服务器。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名Pipes Provider，错误：40 - 无法打开与 SQL Server 的连接）”。

我试图使用 ip 连接其他本地计算机本地主机。我的代码：

```
 public DbStudent()
    {
        UGIcon = new SqlConnection();
        UGIcon.ConnectionString = "server= IPAddress;user="id";password="pass";database=MyDB";
    }
    public SqlConnection Open()
    {
        UGIcon.Open();
        return UGIcon;
    }

    public void Close()
    {
        UGIcon.Close();
    } 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:14:18.517

您需要从[MySql下载安装](http://www.mysql.de/downloads/connector/net/)

在那里，您将获得 mysql-database 的驱动程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:10:15.403

`SqlConnection`用于访问 SQL Server，供其他数据库使用`OleDbConnection`。所以，如果你想连接`MySQL`使用[OleDbConnection](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbconnection.aspx)代替。

```
 public DbStudent()
    {
        UGIcon = new OleDbConnection();
        UGIcon.ConnectionString = "Server=IPAddress;Database=MyDB;Uid=id;Pwd=pass;";
    } 
```

您可以[在此处](http://www.connectionstrings.com/mysql)查看 MySQL 连接字符串

# google-analytics - 谷歌分析错误的着陆页？

> ID：15333693
> 
> 赞同：0
> 
> 时间：2013-03-11T07:59:21.100
> 
> 标签：google-analytics

这些天，我登录谷歌分析，我所有的登陆页面都是错误的 URL。

这是示例：

> /forum/iphone-3gs/123/topic-title/ [http://mydomainname.com](http://mydomainname.com)

我单击图标转到此链接，未找到。这些天来，我的网站搜索流量正在下降。

谷歌分析、谷歌或我的网站有什么问题？！

# google-code - 如何从 Code Google 网站以 zip 格式下载项目

> ID：15333704
> 
> 赞同：1
> 
> 时间：2013-03-11T08:00:17.637
> 
> 标签：google-code

我想以 zip 文件的形式下载[https://code.google.com/p/futonic-lockscreenswitchwidget/](https://code.google.com/p/futonic-lockscreenswitchwidget/)这个项目。但我不知道该怎么做。

在“下载”选项卡中，没有任何用于下载源代码的链接。我只有一个apk文件的链接，但我想要源代码。

我也有`Download SVN`软件。但我不知道如何使用它。我尝试了很多但失败了。这是 的屏幕截图`Download SVN`。

![在此处输入图像描述](../Images/f99bf875bf6e85db94c1531865ed4c31.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:11:07.063

获取源代码

1.  安装[Mercurial](http://mercurial.selenic.com/downloads)

2.  添加环境变量的路径

3.  打开命令提示符

4.  转到所需目录

5.  键入以下命令

> hg 克隆[https://code.google.com/p/futonic-lockscreenswitchwidget/](https://code.google.com/p/futonic-lockscreenswitchwidget/)

# google-drive-api - Google Drive - 在 500 上成功上传文件：内部服务器错误

> ID：15333705
> 
> 赞同：1
> 
> 时间：2013-03-11T08:00:29.730
> 
> 标签：google-drive-api

根据 Google 最佳实践，Google 建议重试建议的 Google 错误 - 500：内部服务器错误。

请参阅下面的服务器日志提取 - 我试图上传到谷歌失败（500：内部服务器错误）但是，在谷歌驱动器框查询之前上传失败的同一文件时，谷歌返回元数据对于文件，因此确认文件确实已成功上传。

这似乎与 Google 的最佳实践相矛盾，后者建议在这种失败情况下重试 - 另一方面，重试会导致 Google Drive 中出现多个重复的文档。

```
**2013-03-11 14:36:08,477 INFO**  [GoogleDriveDispatcherImpl] Thread name (Begin Google Upload Process):flow.inbound-main-flow.19 - , Service Number:0736074138, Original Filename=0736074138-1362976512-01.pdf, Converted File Name=2013031114351201.pdf

**2013-03-11 14:37:32,333 ERROR** [GoogleDriveDispatcherImpl] Failed to upload to backup drive:Mime Type=application/pdf,serviceNumber=0736074138,localFullPath=/var/spool/0736074138-1362976512-01.pdf,FileName=-2013031114351201.pdf,FileDesc= from mate
To:0736074138
From:unknown
When:2013-03-11 14:35:12.0
Total Time:25 secs
Image Size: 1728x2167
Resolution: 204, 196 pixels/inch
Compression Scheme: CCITT Group 3
,baseFolderName=Mate, error message:500 Internal Server Error
{
  "code" : 500,
  "errors" : [ {
    "domain" : "global",
    "message" : "Internal Error",
    "reason" : "internalError"
  } ],
  "message" : "Internal Error"
}

**2013-03-11 14:37:42,336 ERROR** [GoogleDriveDispatcherImpl] Thread name (Failed Google Upload Process):flow.inbound--main-flow.19 -, Service Number:0736074138, Original  Filename=0736074138-1362976512-01.pdf, Converted  File Name=-2013031114351201.pdf

**2013-03-11 14:37:42,336 ERROR** [GoogleDriveDispatcherImpl] Searching customers Google Drive box for Filename:-2013031114351201.pdf

**2013-03-11 14:37:42,757 ERROR** [GoogleDriveDispatcherImpl] Google file to search={"etag":"\"8M2pZwE_fwroB5BIq5aUjc3uhqg/Vb9KGgCZr7aIdUrygm0HqfELaoI\"","items":[{"alternateLink":"docs.google.com/a/abc.com.au/file/d/0Bxjdw7torhpgQkVXaVNBb3hib3M/edit","createdDate":"2013-03-11T04:36:13.383Z","downloadUrl":"doc-10-as-docs.googleusercontent.com/docs/securesc/7aplsi64vdu35mnaph1ickkkr74926fi/mjsv3r4ekf50j7kgvvtdc09ah6ikvf3h/1362974400000/06957550221568715648/06957550221568715648/0Bxjdw7torhpgQkVXaVNBb3hib3M?h=09525600671296713863&e=download&gd=true","editable":true,"etag":"\"8M2pZwE_fwroB5BIq5aUjc3uhqg/MTM2Mjk3NjU3MzI1Nw\"","fileExtension":"pdf","fileSize":"7811","id":"0Bxjdw7torhpgQkVXaVNBb3hib3M","kind":"drive#file","labels":{"hidden":false,"restricted":false,"starred":false,"trashed":false,"viewed":true},"lastModifyingUserName":"Savio Mascarenhas","lastViewedByMeDate":"2013-03-11T04:36:13.257Z","md5Checksum":"a77e0a2a90adcbf56a7f2cc7729a9023","mimeType":"application/pdf","modifiedByMeDate":"2013-03-11T04:36:13.257Z","modifiedDate":"2013-03-11T04:36:13.257Z","originalFilename":"-2013031114351201.pdf","ownerNames":["Savio Mascarenhas"],"parents":[{"id":"0Bxjdw7torhpgMy1NMVVnamNYbGs","isRoot":false,"kind":"drive#parentReference","parentLink":"googleapis.com/drive/v2/files/0Bxjdw7torhpgMy1NMVVnamNYbGs","selfLink":".googleapis.com/drive/v2/files/0Bxjdw7torhpgQkVXaVNBb3hib3M/parents/0Bxjdw7torhpgMy1NMVVnamNYbGs"}],"quotaBytesUsed":"7811","selfLink":".googleapis.com/drive/v2/files/0Bxjdw7torhpgQkVXaVNBb3hib3M","thumbnailLink":"lh5.googleusercontent.com/7NWWsM3Kqu6rLRj1HBuDKwvL0eDnUUgbWF7Z3wy7nw7VozRD0X7SzJVX24vnZ6lWwQ=s220","title":"-2013031114351201.pdf","userPermission":{"etag":"\"8M2pZwE_fwroB5BIq5aUjc3uhqg/yT7yp2-ykNjlAtGeVoBbALyAX0U\"","id":"me","kind":"drive#permission","role":"owner","selfLink":".googleapis.com/drive/v2/files/0Bxjdw7torhpgQkVXaVNBb3hib3M/permissions/me","type":"user"},"webContentLink":"docs.google.com/a/abc.com.au/uc?id=0Bxjdw7torhpgQkVXaVNBb3hib3M&export=download","writersCanShare":true,"iconLink":"ssl.gstatic.com/docs/doclist/images/icon_10_pdf_list.png","owners":[{"kind":"drive#user","displayName":"Savio Mascarenhas","isAuthenticatedUser":true,"permissionId":"06957550221568715648"}],"lastModifyingUser":{"kind":"drive#user","displayName":"Savio Mascarenhas","isAuthenticatedUser":true,"permissionId":"06957550221568715648"},"shared":false}],"kind":"drive#fileList","selfLink":".googleapis.com/drive/v2/files?q=title+%3D+'-2013031114351201.pdf'+and+mimeType+%3D+'application/pdf'+and+trashed+%3D+false"}, Google file to search(items)=[{"alternateLink":"docs.google.com/a/abc.com.au/file/d/0Bxjdw7torhpgQkVXaVNBb3hib3M/edit","createdDate":"2013-03-11T04:36:13.383Z","downloadUrl":"://doc-10-as-docs.googleusercontent.com/docs/securesc/7aplsi64vdu35mnaph1ickkkr74926fi/mjsv3r4ekf50j7kgvvtdc09ah6ikvf3h/1362974400000/06957550221568715648/06957550221568715648/0Bxjdw7torhpgQkVXaVNBb3hib3M?h=09525600671296713863&e=download&gd=true","editable":true,"etag":"\"8M2pZwE_fwroB5BIq5aUjc3uhqg/MTM2Mjk3NjU3MzI1Nw\"","fileExtension":"pdf","fileSize":"7811","id":"0Bxjdw7torhpgQkVXaVNBb3hib3M","kind":"drive#file","labels":{"hidden":false,"restricted":false,"starred":false,"trashed":false,"viewed":true},"lastModifyingUserName":"Savio Mascarenhas","lastViewedByMeDate":"2013-03-11T04:36:13.257Z","md5Checksum":"a77e0a2a90adcbf56a7f2cc7729a9023","mimeType":"application/pdf","modifiedByMeDate":"2013-03-11T04:36:13.257Z","modifiedDate":"2013-03-11T04:36:13.257Z","originalFilename":"-2013031114351201.pdf","ownerNames":["Savio Mascarenhas"],"parents":[{"id":"0Bxjdw7torhpgMy1NMVVnamNYbGs","isRoot":false,"kind":"drive#parentReference","parentLink":"://.googleapis.com/drive/v2/files/0Bxjdw7torhpgMy1NMVVnamNYbGs","selfLink":"://.googleapis.com/drive/v2/files/0Bxjdw7torhpgQkVXaVNBb3hib3M/parents/0Bxjdw7torhpgMy1NMVVnamNYbGs"}],"quotaBytesUsed":"7811","selfLink":"://.googleapis.com/drive/v2/files/0Bxjdw7torhpgQkVXaVNBb3hib3M","thumbnailLink":"://lh5.googleusercontent.com/7NWWsM3Kqu6rLRj1HBuDKwvL0eDnUUgbWF7Z3wy7nw7VozRD0X7SzJVX24vnZ6lWwQ=s220","title":"-2013031114351201.pdf","userPermission":{"etag":"\"8M2pZwE_fwroB5BIq5aUjc3uhqg/yT7yp2-ykNjlAtGeVoBbALyAX0U\"","id":"me","kind":"drive#permission","role":"owner","selfLink":"://.googleapis.com/drive/v2/files/0Bxjdw7torhpgQkVXaVNBb3hib3M/permissions/me","type":"user"},"webContentLink":"://docs.google.com/a/abcnetworks.com.au/uc?id=0Bxjdw7torhpgQkVXaVNBb3hib3M&export=download","writersCanShare":true,"iconLink":"://ssl.gstatic.com/docs/doclist/images/icon_10_pdf_list.png","owners":[{"kind":"drive#user","displayName":"Savio Mascarenhas","isAuthenticatedUser":true,"permissionId":"06957550221568715648"}],"lastModifyingUser":{"kind":"drive#user","displayName":"Savio Mascarenhas","isAuthenticatedUser":true,"permissionId":"06957550221568715648"},"shared":false}], Google file to search items(empty)=false 

**2013-03-11 14:37:42,758 ERROR** [GoogleDriveDispatcherImpl] File is successfully uploaded to Google: FileName = 2013031114351201.pdf 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T14:36:28.800

我遇到的问题：我尝试将任何文件类型、任何文件大小的文件上传到谷歌驱动器。但它一直给我一个`Internal Error upon Finishing`.

**我的解决方案：**

已经[发布](http://productforums.google.com/forum/#!topic/drive/0aYK9M2F7_o%5B1-25-true%5D)的共享解决方案并没有解决问题。我只是去了我的`chrome settings`，并清除了`Browsing Data`（工具->清除浏览数据），并从一开始就检查了`Delete Cookies`, 和。`Empty the Cache`随后，上传再次开始为我工作。

# c - 试图使现有的 c 项目适应 CUDA，Makefile 找不到.cu 文件

> ID：15333706
> 
> 赞同：0
> 
> 时间：2013-03-11T08:00:30.947
> 
> 标签：c, cuda, makefile

我正在尝试使用 CUDA 加速 ac 项目（不是 c++）中的关键功能。

出于某种原因，当我将其中一个文件的名称更改为 .cu 时，我无法让 Makefile 识别 .cu 扩展名。

它使用了一个配置脚本和 .am/.in/.deps 文件，我不太了解这些文件，但基本上我对 file.c 的引用进行了 grepped 并将它们全部更改为 file.cu，但它会生成一个文件.o：找不到文件错误。

顶级制作文件

[https://www.dropbox.com/s/g282qvbdu8pdas0/Makefile](https://www.dropbox.com/s/g282qvbdu8pdas0/Makefile)

src 文件夹生成文件

[https://www.dropbox.com/s/b4pq026od8gauqi/Makefile](https://www.dropbox.com/s/b4pq026od8gauqi/Makefile)

我使用的搜索命令是

```
grep -R -i "file.c" 
```

我只是将它们全部更改为file.cu，然后重新运行configure，make clean，make all-结果是找不到文件。

我想这一定与Makefile忽略/接受的扩展有关，但是自从我用C编程以来已经有很长时间了，而且我从未使用过如此复杂的Makefile，我不知道如何修复它.

有任何想法吗？

*PS 另外，file.cu 目前有编译错误，但我得到的错误消息是 File Not Found，所以我认为这不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:06:19.953

您需要有一个规则来`o`从文件构建`cu`文件：

```
cudafile.o: cudafile.cu
    nvcc $(NVCC_FLAGS) -c %< -o $@ 
```

所以你还需要为cu文件指定规则，并使用nvcc进行编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:18:09.957

以下指南似乎涵盖了它......

[http://mcclanahoochie.com/blog/2011/02/automake-and-cuda/](http://mcclanahoochie.com/blog/2011/02/automake-and-cuda/)

实际上，链接中给出的大多数建议对于基本编译似乎都是不必要的，但由于某种原因，我发现当我使用 autoconf 重新创建配置文件时它起作用了。没有任何解释浮现在脑海。

# mysql - 连接同一表的两个查询并选择同一列

> ID：15333708
> 
> 赞同：0
> 
> 时间：2013-03-11T08:00:46.993
> 
> 标签：mysql, sql

想象一下，我有这张表，上面有项目、大洲和国家。项目可以在许多国家/地区，在另一列中，每个国家/地区都有一个代表其大陆的数字。

我想做一个查询，为每个大陆返回一列，其中填满了它的国家。但同时我不希望它返回不在大陆的项目。

加入这三个查询会更少：

```
SELECT PROJECTS,COUNTRIES AS `EUROPE` FROM WORLD WHERE COUNTRIES = 2;

SELECT PROJECTS,COUNTRIES AS `AFRICA` FROM WORLD WHERE COUNTRIES = 3;

SELECT PROJECTS  FROM WORLD WHERE PROJECTS NOT IN (SELECT PROJECTS FROM WORLD WHERE COUNTRIES = 1); 
```

我已经设法将最后一个与其他两个中的一个加入，但我无法加入其中三个，它总是返回同一列中的国家组合而不是不同的国家......

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:18:35.540

根据您提供的信息，这是我能提供的最佳答案：

```
SELECT PROJECT, COUNTRIES AS 'EUROPE' FROM WORLD t1
JOIN
SELECT PROJECTS,COUNTRIES AS `AFRICA` FROM WORLD t2
WHERE PROJECT NUMBER t1 = (SELECT PROJECTS FROM WORLD WHERE COUNTRIES = 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:09:10.553

这个怎么样：

```
SELECT 
PROJECTS, 
CASE COUNTRIES 
     WHEN 2 THEN 'Europe'
     WHEN 3 THEN 'Africa'
     ELSE 'elsewhere'
END AS Continent
WHERE COUNTRIES IN (2, 3)
AND PROJECTS NOT IN (SELECT PROJECTS FROM WORLD WHERE COUNTRIES = 1); 
```

它不完全是每个大陆的一列，但在我看来，数据的显示无论如何都必须在表示层上完成，而不是在数据库级别上。

# android - 带有圆角的列表视图项目

> ID：15333710
> 
> 赞同：7
> 
> 时间：2013-03-11T08:00:58.210
> 
> 标签：android, listview

我正在尝试将 listview 项目制作成带圆角的矩形，但是我发生了什么，只有第一行的上部带有圆角，其余的子 listview 项目采用没有圆角的矩形。我不知道为什么会这样。

这是我的列表视图代码：

```
<ListView
    android:id="@+id/listViewdoctorwithappointment"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="7dp"
    android:layout_marginRight="7dp"
    android:layout_marginTop="10dp"
    android:minHeight="80dp"
    android:background="@drawable/customshapeduplicate"
    android:cacheColorHint="@android:color/transparent"
    android:divider="#4F94CD"
    android:dividerHeight="10dp"

    android:smoothScrollbar="true"

    android:listSelector="@drawable/selector"
    android:scrollbars="none" >
</ListView> 
```

这是我的customshapeduplicatefile是这样的：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
    android:shape="rectangle"> 
    <gradient android:startColor="#ffffff" android:endColor="#ffffff" 
        android:angle="270"/> 

    <corners android:bottomRightRadius="10dp" android:bottomLeftRadius="10dp" 
        android:topLeftRadius="10dp" android:topRightRadius="10dp"/> 
</shape> 
```

这是图像：

![在此处输入图像描述](../Images/1d169061cb657360fc8038649abe2305.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T08:35:01.890

我建议您使用自定义列表适配器。根据您的要求修改以下代码。

```
 public View getView(final int arg0, View arg1, ViewGroup arg2) {
    final ViewHolder vh;
    vh= new ViewHolder();

    if(arg1==null )
    {
                    arg1=mInflater.inflate(R.layout.lyourcustomlayouttobe inflated, arg2,false);
            arg1.setTag(vh);
            }

    return arg1;
} 
```

您的自定义布局

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="horizontal"
 android:cacheColorHint="#000000"
 android:background="@drawable/listviewbkg">
 //other items to be inlfated.
 </LinearLayout> 
```

在资源下创建一个可绘制文件夹。将以下 xml 发布为 listviewbkg

```
 <?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
 <item android:state_pressed="true" 
    android:drawable="@drawable/pressed" />
 <item  android:state_focused="false" 
    android:drawable="@drawable/normal" />
 </selector> 
```

在名称 normal.xml 的可绘制对象下正常时的形状

```
 <?xml version="1.0" encoding="UTF-8"?> 
 <shape xmlns:android="http://schemas.android.com/apk/res/android"> 
 <solid android:color="#FFFFFF"/>    
 <stroke android:width="3dp"
        android:color="#0FECFF" /><!-- #330000FF #ffffffff -->
 <gradient                               // remove the gradient if do not wish to use.
    android:startColor="#ffffffff" 
    android:endColor="#110000FF" 
    android:angle="90"/> 

 <padding android:left="5dp"
         android:top="5dp"
         android:right="5dp"
         android:bottom="5dp"/> 
 <corners android:bottomRightRadius="7dp"      // change this to increase the rounded edge radius
         android:bottomLeftRadius="7dp" 
         android:topLeftRadius="7dp"
         android:topRightRadius="7dp"/> 
 </shape> 
```

在drawable文件夹中以名称pressed.xml按下时的形状

```
 <?xml version="1.0" encoding="UTF-8"?> 
  <shape xmlns:android="http://schemas.android.com/apk/res/android"> 
  <solid android:color="#FF1A47"/>    
  <stroke android:width="3dp"
        android:color="#0FECFF"/>
  <padding android:left="5dp"
         android:top="5dp"
         android:right="5dp"
         android:bottom="5dp"/> 
  <corners android:bottomRightRadius="7dp"
         android:bottomLeftRadius="7dp" 
         android:topLeftRadius="7dp"
         android:topRightRadius="7dp"/> 
  </shape> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T08:26:52.710

设置背景不是用于显示列表视图行`listview`的，而是`custom layout`用于显示列表视图行的

```
android:background="@drawable/customshapeduplicate" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:06:40.943

那是因为`background`- 属性是整个列表的背景，而不是单个行的背景。

要实现您想要的，请通过您的`Adapter`或列表项布局设置自定义背景，或查看[此](https://stackoverflow.com/questions/2562051/listview-item-background-via-custom-selector)答案。

# javascript - 从 csv 到 javascript 的特殊字符

> ID：15333711
> 
> 赞同：4
> 
> 时间：2013-03-11T08:01:30.830
> 
> 标签：javascript, jquery, csv

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:30:20.603

您需要用 ISO 拉丁代码替换特殊字符。如需更多参考，请查看此链接：[http ://www.utexas.edu/learn/html/spchar.html](http://www.utexas.edu/learn/html/spchar.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:12:14.253

尝试将以下内容添加到页面的标题中

```
<meta http-equiv="content-type" content="text/html;charset=utf-8" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:12:39.540

使用字符串中的转义序列之一。例如，Javascript 中的转义序列都以反斜杠字符 . 开头。该字符让处理字符串的应用程序知道接下来是需要特殊处理的字符序列。

# javascript - JQuery post and name attribute

> ID：15333713
> 
> 赞同：0
> 
> 时间：2013-03-11T08:01:44.587
> 
> 标签：javascript, jquery

I have a simple form and want to post this, using jQuery. In Django I have some custom code which depends on the name attribute of the form (if request.POST.get('BoekForm2'))

Here is my page:

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
<script type="text/javascript">
$(document).ready(function() {
          $('form').hide();
          $('img').click(function() {
          $('select option').eq(this.alt-1).prop('selected','true');
          $('input:last').prop('Boekform2','Volgende');
//        $('form').get(0).setAttribute('name', 'BoekForm2');
          $('form').submit();
})
})
</script>
<form action="" method="post">
<div style='display:none'>
<input type='hidden' name='csrfmiddlewaretoken' value='ee47602b5994f986b0e6bfa5b814096c' /></div>
<label for="id_Type_activiteit">Type activiteit:</label>
    <select name="Type_activiteit" id="id_Type_activiteit">
         <option value="1" selected="selected">One</option>
         <option value="2">Two</option>
         <option value="3">Three</option>
    </select>
<input type="submit" name="BoekForm2" value="Volgende" id="BoekForm2"/>
</form>

 <img  style="cursor:pointer" src="../image1.jpg" alt="1" />
 <img  style="cursor:pointer" src="../image2.jpg" alt="2" />
 <img  style="cursor:pointer" src="../image.jpg" alt="3" /> 
```

When I post this form manually the POST info looks like:

```
Type_activiteit     u'1'

csrfmiddlewaretoken     u'ee47602b5994f986b0e6bfa5b814096c'

BoekForm2           u'Volgende'

When I post this form using jQuery the POST info looks like:

Type_activiteit     u'1'

csrfmiddlewaretoken     u'ee47602b5994f986b0e6bfa5b814096c' 
```

How do I get the name of the form in the POST info?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:04:35.377

a very fast solution would be to add the form name inside the form using a hidden filed and on post get the hdn field value on the server

```
<form>
 <input type='hidden' name="formname" value="secondform"/>
</form> 
```

# wordpress - Spring Security / Wordpress integration

> ID：15333716
> 
> 赞同：1
> 
> 时间：2013-03-11T08:01:53.480
> 
> 标签：wordpress, spring, security, model-view-controller, single-sign-on

I have a technical challenge that i need some help with. We're building a technical service for the web and Java and Spring are the tools we use. We also use Wordpress with a web store plugin (WooCommerce).

We need to find a way to integrate our Java web application and the Wordpress site. The major issue being user authentication. We use Spring security for the Java application and Wordpress has its own user management. The preferrable solution would be to have Wordpress be the master for user registration, maintenance and authentication.

Does anyone out there have experiences and/or ideas about how to solve this? Could you please share them here. Any help will be highly appreciated.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-11T09:57:47.570

检查[CAS](http://www.jasig.org/cas)或[JOSSO](http://www.josso.org/confluence/display/JOSSO1/JOSSO+-+Java+Open+Single+Sign-On+Project+Home)作为您的单点登录系统。

# c++ - 删除返回内存问题

> ID：15333719
> 
> 赞同：0
> 
> 时间：2013-03-11T08:02:23.753
> 
> 标签：c++, memory, linked-list, structure

我正在编写一个简单的程序来处理 C++ 中的结构。但是内存有问题。当我的程序调用 delete_element 函数时，它会返回内存问题，但 delete_all_list 函数运行良好。我做错了什么？

```
#include "iostream"
#include "string.h"
#include "limits"   //ignore max
#include "stdlib.h" //atof
using namespace std; 

struct Struct {
    char text[10];
    int age;
    Struct *prev; 
    Struct *next; 
};

int input(string msg) { 
    char str[2];
    int check = 0, len = 0, var = 0, i = 0;
    while (1){  
        cin.tellg();
        cout<<msg;
        cin.getline(str, 2);
        if (cin.fail()) { 
            cin.clear();
            cin.ignore(numeric_limits<streamsize>::max(), '\n');
        }
        len = strlen(str);
        check = 0;
        for (i=0;i<len;i++) {
            if(isdigit(str[i])) {
                check++;    
            }                           
        } 
        if (check==len && !(check==1 && str[0]=='-') && check != 0 && atoi(str) != 0){
            var = atoi(str);
            return var;
        }       
        else {
            cout<<"Error!"<<endl;
        }

    }
}

Struct* add_struct_to_list(Struct* prev){
    Struct *NewStruct = 0;  
    char str[10];       
    int age;        
    cout<<"Name: ";
    cin.getline(str, 10);
    if (cin.fail()){ 
        cin.clear();
        cin.ignore(numeric_limits<streamsize>::max(), '\n');
    }
    age = input("Age: ");   
    NewStruct = new Struct;     
    strcpy(NewStruct->text, str);   
    NewStruct->age = age;
    NewStruct->prev= prev;      
    NewStruct->next= 0;     
    return NewStruct;       
}

Struct* add_empty_struct_to_list(Struct* list_begin, int index){
    int count = 1;
    Struct* node = list_begin;
    while (node->next) {
        node = node->next;
        count++;
    }
    while (count != index) {
        Struct* NewStruct = new Struct; 
        strcpy(NewStruct->text, " ");
        NewStruct->age = 0;

        NewStruct->prev = node;
        node->next = NewStruct;

        NewStruct->next = NULL;
        node = NewStruct;
        count++;
    }
    return node;
}

void insert_struct_to_list(Struct* prev, Struct* next){
    Struct *NewStruct = 0;  
    char str[10];       
    int age;        
    cout<<"Name: ";
    cin.getline(str, 10);
    if (cin.fail()){ 
        cin.clear();
        cin.ignore(numeric_limits<streamsize>::max(), '\n');
    }
    age = input("Age: ");

    NewStruct = new Struct;     
    strcpy(NewStruct->text, str);   
    NewStruct->age = age;

    NewStruct->prev= prev;
    NewStruct->next= next;

    prev->next = NewStruct;
    next->prev = NewStruct;
}

void replace_struct_in_list(Struct* ReStruct){  
    char str[10];       
    int age;        
    cout<<"Name: ";
    cin.getline(str, 10);
    if (cin.fail()){ 
        cin.clear();
        cin.ignore(numeric_limits<streamsize>::max(), '\n');
    }
    age = input("Age: ");       
    strcpy(ReStruct->text, str);    
    ReStruct->age = age;
}

Struct* start_new_list(int number) {
    Struct* prevStruct = NULL;
    Struct* newList = NULL;                 
    for (int counter = 0; counter < number; counter++) {
        Struct* newStruct = add_struct_to_list(prevStruct);
        if (prevStruct)                     
            prevStruct->next = newStruct;  
        if (counter == 0)                  
            newList = newStruct;            
        prevStruct  = newStruct;            
    }
    return newList;
}

Struct* find_a_struct(Struct* list_begin, int index){
    Struct* node = list_begin->next;
    int count = 1;
    if (node != NULL) {         
        while (node->next) {    
            node = node->next;
            count++;
            if (count == index) {
                break;
            }
        }
        if (count < index) {
            node = NULL;
        }
    }   
    return node;
}

void add_extra_struct_to_list(Struct* list_begin) {
    string command;
    Struct* NewStruct = NULL; 
    int index = input("Enter index of new element (it should be less then 99): ");
    Struct* FindedStruct = find_a_struct(list_begin, index);
    if (FindedStruct != NULL) {         
        while (true) {
            cout<<"This index is already exist. Replace? (Yes/No): ";
            cin>>command;
            cout<<endl;
            if (command == "Yes" || command == "No") {
                break;
            }
        }
        if (command == "No") {
            insert_struct_to_list(FindedStruct->prev, FindedStruct);
        } else {
            replace_struct_in_list(FindedStruct);
        }
    } else { 
        NewStruct = add_empty_struct_to_list(list_begin, index);
        Struct* ExtraStruct = add_struct_to_list(NewStruct->prev);
        NewStruct->next = ExtraStruct;
    }
}

void delete_element(Struct* node) {
    int index = 0; int count = 1;
    bool is_index = false;
    do {
        index = input("Enter number of index: ");
    } while (index <= 0);
    do {
        node = node->next;
        count++;
        if (count == index) {
            Struct* prevs = 0;
            prevs = node->prev;
            Struct* nexts = 0;
            nexts = node->next;
            delete node;
            prevs->next = nexts;
            nexts->prev = prevs;
            is_index = true;
            break;
        }
    } while (node->next);
    if (is_index == true) {
        cout<<"Done!"<<endl;
    } else {
        cout<<"Index is out off range!"<<endl;
    }
}

void delete_all_list(Struct* list_begin) {
     Struct* structToDelete = NULL;
     Struct* node = list_begin;
     while (node->next) {
        structToDelete = node;
        node = node->next;
        delete structToDelete;
     }
     delete node;
}

void sort_by_age(Struct* list_begin) {
    Struct* node = 0;
    Struct* node2 = 0;
    int age; char text[10];
    for (node = list_begin; node; node = node->next) {
        for (node2 = list_begin; node2; node2 = node2->next) {
                if (node->age < node2->age) { 
                    strcpy(text, node->text);
                    strcpy(node->text, node2->text);
                    strcpy(node2->text, text);
                    age = node->age;
                    node->age  = node2->age;
                    node2->age = age;
            }   
        }   
    }   
}

void print_list(Struct* list_begin) {
    for (Struct* node = list_begin; node; node = node->next) {
            cout<<"Age: "<<node->age<<"; Name: "<<node->text<<endl;
    }
}

int main() {
    int number;
    Struct *NewList = 0;
    string command;
    bool list = false;
    cout<<"\"help\" for more info"<<endl<<endl;
    while (true) {
        cout<<">>> ";
        cin>>command;
        cout<<endl;
        if (command == "help") {
            cout<<"startlist - creating a new double-linked list."<<endl;
            cout<<"sortlist - sorting list by age of workers."<<endl;
            cout<<"printlist - prining all list's elements."<<endl;
            cout<<"addextra - adding extra element to list."<<endl;
            cout<<"delete - delete element from list."<<endl;
            cout<<"deletelist - delet all list. (Warning: require for create new list!)"<<endl;
            cout<<"exit - close program."<<endl;
        } else if (command == "startlist") {
            if (list == false) {
                number = input("Number of worker (it should be less than 99): ");
                NewList = start_new_list(number);
                cout<<"Done!"<<endl;
                list = true;
            } else {
                cout<<"Error: You allready create one!"<<endl;
            }
        } else if (command == "sortlist"){
            if (list == true) {
                sort_by_age(NewList);
                cout<<"Done!"<<endl;
            } else {
                cout<<"Error: You did't create a list or it is already sorted!"<<endl;
            }
        } else if (command == "printlist") {
            if (list == true) {
                print_list(NewList);
            } else {
                cout<<"Error: You did't create a list!"<<endl;
            }
        } else if (command == "delete") {
            if (list == true) {
                delete_element(NewList);
            } else {
                cout<<"Error: You did't create a list!"<<endl;
            }
        } else if (command == "deletelist") {
            if (list == true) {
                delete_all_list(NewList);
                cout<<"Done!"<<endl;
                list = false;
            } else {
                cout<<"Error: You did't create a list!"<<endl;
            }
        } else if (command == "addextra") {
            if (list == true) {
                add_extra_struct_to_list(NewList);
            } else {
                cout<<"Error: You did't create a list!"<<endl;
            }
        } else if (command == "exit") {
            if (list == true) {
                delete_all_list(NewList);
                cout<<"Done!"<<endl;
            }
            break;
        } else {
            cout<<"Error: There is no such command!"<<endl;
        }
        cout<<endl;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:10:22.553

您的程序中有很多问题，在 delete_element 函数中，您的主要问题是您取消引用`prevs` 并且`nexts`没有检查它们是否为 NULL。

添加一些简单的检查：

```
if (nexts && prevs)
    prevs->next = nexts;
if (prevs && nexts)
    nexts->prev = prevs; 
```

如果任何元素为 NULL，则防止它出现段错误。

我发现的其他问题我在[现场示例](http://liveworkspace.org/code/3yD6pN%240)中发表了评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:21:26.990

在 delete_element 中计数从 1 而不是 0 开始看起来很可疑。因此，您的代码能够删除的第一个索引是 2，如果尝试删除节点 1，您会遇到麻烦。

编辑：还有一件事：删除第一个节点和最后一个节点需要特别小心。对于第一个节点，prev 为 0，所以不能说 prev->next。

# php - Merge array in the included file

> ID：15333722
> 
> 赞同：1
> 
> 时间：2013-03-11T08:02:30.373
> 
> 标签：php

i have 2 PHP files, config.php and confignw.php as follows,

## config.php

```
$html = array(
    [update_item_in_store] => Array
        (
            [header] => default_header.php
            [body] => update_item_in_store.php
            [footer] => default_footer.php
        )

    [user_followed] => Array
        (
            [header] => default_header.php
            [body] => user_followed.php
            [footer] => default_footer.php
        )

    [updated_account_settings] => Array
        (
            [header] => default_header.php
            [body] => updated_account_settings.php
            [footer] => default_footer.php
        )
);

$cml = array
(
    "default_header",
    "default_body",
    "default_footer"
); 
```

## confignw.php

```
$html = array(
    [add_item_in_store] => Array
        (
            [header] => default_header.php
            [body] => add_item_in_store.php
            [footer] => default_footer.php
        )

    [user_followed] => Array
        (
            [header] => default_header.php
            [body] => user_followed_new.php
            [footer] => default_footer.php
        )
);

$cml = array
(
    "default_skeleton"
); 
```

And both the files are included in a file called common.php,

And the result should come as merging of both as follows,

## Expected Result:

```
$html = array(
    [update_item_in_store] => Array
        (
            [header] => default_header.php
            [body] => update_item_in_store.php
            [footer] => default_footer.php
        )

    [user_followed] => Array
        (
            [header] => default_header.php
            [body] => user_followed_new.php
            [footer] => default_footer.php
        )

    [updated_account_settings] => Array
        (
            [header] => default_header.php
            [body] => updated_account_settings.php
            [footer] => default_footer.php
        )
    [add_item_in_store] => Array
        (
            [header] => default_header.php
            [body] => add_item_in_store.php
            [footer] => default_footer.php
        )
);

$cml = array
(
    "default_header",
    "default_body",
    "default_footer",
            "default_skeleton"
); 
```

Look at the value added in both arrays from the array in the file `confignw.php` and note that $html[user_followed][body] is changed. But what is happening is, only the second files' values are coming. So how to achieve this expected result? Any ideas or suggestion are welcome...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T08:21:07.987

PHP 不会神奇地合并数组。它遇到对同一个变量的两个赋值。在`config.php`您将一些数据分配给`$html`变量。包含文件时，会将数据分配给变量。然后，当`confignw.php`被包含时，PHP 为同一个`$html`变量分配*另一个*数据。没有合并，因为不应该有任何合并。

```
$a = array('a');
$a = array('b');
print_r($a); // prints array('b'); 
```

此代码演示了您在做什么。如果你想合并数组，你需要告诉 PHP。例如，`confignw.php`你可以写：

```
if (!isset($html)) {
    $html = array();
}
$html = array_merge($html, array(
    'add_item_in_store' => Array
        (
            'header' => 'default_header.php',
            'body' => 'add_item_in_store.php',
            'footer' => 'default_footer.php'
        ),

    'user_followed' => Array
        (
            'header' => 'default_header.php',
            'body' => 'user_followed_new.php',
            'footer' => 'default_footer.php'
        )
)); 
```

如果上面的代码没有做你想要的，请查看[array_merge_recursive](http://www.php.net/manual/en/function.array-merge-recursive.php)函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:22:09.643

因为您包含具有相同名称变量的代码，所以我想后者将“覆盖”第一个变量。有点像把一张纸放在另一张纸上——你只会看到最上面的一张。

如果要合并这些数组，则需要将它们分配给不同名称的变量，然后按照 DCoder 的建议使用 array_merge_recursive。您还可以查看 array_replace_recursive 函数——它应该可以按您的意愿工作。检查[这个](http://www.php.net/manual/en/function.array-replace-recursive.php)

# php - Symfony2 @template() 误解

> ID：15333724
> 
> 赞同：2
> 
> 时间：2013-03-11T08:02:43.993
> 
> 标签：php, symfony

我最近开始学习 Symfony2，基于一个工作机会。我已经掌握了一些基础知识，但我在注释路由的 @template() 部分苦苦挣扎。

我已经能够使用注释将正确的 url 路由到正确的控制器方法，但是我放在 @template() 中的模板似乎从来没有工作过。

基本上，我所追求的是对其中内容的解释。我在官方文档中看到：

`@Template("SensioBlogBundle:Post:show.html.twig")`

但我不明白那个参数是什么。我得到结尾部分实际上是一个文件名，但是用冒号分隔的前两个组件是什么？我尝试了很多不同的东西来尝试理解，但我无法让它连接到我放置在我的包资源的 views/main/index.html.twig 中的新模板文件。我试过了

`@Template("BlogBundle:main:index.html.twig")`

没有成功。（BlogBu​​ndle 是我的所有代码所在的文件夹，在我的包中）

其余的文档似乎很有意义，只是这一个参数似乎从来没有得到很好的解释。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:07:48.377

`SensioBlogBundle:Post:show.html.twig`表示这条路径：`src/Sensio/BlogBundle/Resources/views/Post/show.html.twig`

这`bundle:controller:view`是 Symfony2 标准符号，并且在模板或视图渲染的情况下，必须按照我的解释进行解释。

# android - 从android上的麦克风计算响度级别

> ID：15333725
> 
> 赞同：9
> 
> 时间：2013-03-11T08:02:57.153
> 
> 标签：android, audio, microphone, decibel

我正在尝试从 android 上的麦克风计算响度级别。我使用 AudioRecord 从麦克风获取原始数据，还做了一些归一化，然后计算了分贝。但结果不对。我得到的分贝值不稳定，不能反映声音。比如即使我拍手，分贝值也没有反映声音。我应该如何更改代码或如果我想实时计算麦克风的响度应该怎么做？非常感谢。

```
 recorder = new AudioRecord(AudioSource.MIC, iSampleRate, AudioFormat.CHANNEL_IN_MONO,             AudioFormat.ENCODING_PCM_16BIT, iAudioBufferSize);

               iBufferReadResult = recorder.read(buffer, 0, iAudioBufferSize);

              for (int i = 0; i < buffer.length-1; i++)
            {
                ByteBuffer bb = ByteBuffer.wrap(buffer, i, 2);
                int isample = bb.getShort();

                double dsample =(double) isample / 32768.0;
                sum += (dsample*dsample);

                double rms = Math.sqrt(sum/(buffer.length*0.5));        
                double decibel = 20*Math.log10(rms);

                sum = 0;
                }

            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:48:55.283

这里有两个问题。第一个是您正在从单个样本计算 RMS，因为您没有计算整个缓冲区的总和 - 您正在重置每个样本。所以`sum`包含一个样本的平方大小，但是你要除以样本长度。

第二个问题是你不能轻易地创建一个仪表来测量响度。您计算的分贝值将只是一个功率比，其中 0dB 的最大值表示一个峰值。它与物理声压没有任何相关性，这通常是人们说“响度”时的意思（dB（SPL）是50dB是语音响度的比例，110dB是摇滚音乐会等）。

另请参阅：[声音计 android](https://stackoverflow.com/questions/14937023/sound-meter-android/14937665#14937665)

# c++ - Compile Time Error vs Run Time Error

> ID：15333732
> 
> 赞同：5
> 
> 时间：2013-03-11T08:03:40.070
> 
> 标签：c++, c

I am confused why compiler gives

```
const char s[]="hello";
s[2]='t';                 // Compile Time Error

char *t = "hello";
*(t+2)='u';              // Run time Error 
```

I guess in both case the compiler should give compile time error. Can anyone tell me particular reason for this to be this way?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T08:05:55.927

在第一种情况下，您正在写入 a`const`并且编译器会注意到并且可以拒绝它。

在第二种情况下，`t`是指向非 const 的指针`char`，因此您可以取消引用它并写入 at `*(t+2)`。但是，由于`t`使用指向只读段的指针进行初始化，因此您在运行时会遇到分段违规。

您可以痛苦地配置链接器以将所有数据放在可写段中。这是丑陋和不标准的。

PS 一些复杂的静态分析器（可能是[Frama-C](http://frama-c.com/)）可能会在不运行程序的情况下捕获这两个错误。还可以想象扩展 GCC，例如使用[MELT](http://gcc-melt.org/)来添加此类检查（但这是一项不平凡的工作，可能很难获得资金支持）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T08:06:00.520

向后兼容性。

您不能修改 const char。这很明显。

不明显的是，字符串文字的类型实际上是指向常量字符的指针，而不是指向字符的指针。因此，第二个声明实际上具有错误的类型。然而，由于历史原因，这是支持的。

* * *

请注意，以上内容有点谎言。字符串文字实际上是`char[]`类型，而不是指针。

特别是，字符串文字的类型在 C89 和 C99 中是 a`char[]`而不是 a `const char[]`[我认为是 C11，但不确定]。那*实际上*并没有错，但是数据存储在只读段中，因此尝试写入它是未定义的行为。

* * *

此外，对于它的价值，您可以使用`-Wwrite-strings`gcc（g++ 已经包含它）来警告这一点。

* * *

更多信息[在这里](https://stackoverflow.com/questions/4493139/are-string-literals-const)和[这里](https://stackoverflow.com/a/2245983/567864)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-11T08:09:01.993

当你这样做时：`char *t = "hello";`那么**t**是一个指向代码部分内存的指针，所以你不能改变它。因为它是*只读的*，所以在运行时会出现分段错误。

当你这样做时：`const char s[]="hello";`那么**s是***堆栈上*的字符数组，但它是`const`，所以你不能改变它并且你得到一个编译错误（编译器知道它是*const*所以他不允许你改变它）。

`const`当你不想改变你的字符串时使用是好的，因为这会产生编译错误，这比运行时错误要好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-11T08:08:08.977

考虑以下一系列语句：

```
char *t = "hello";
char s[5];
t = s;
*(t+2)='u'; 
```

这一系列语句不会给出运行时错误，因为语句`*(t+2)='u';`不是无效的。它试图在您的情况下修改 const （只读）内存位置，但编译器无法知道是否会发生访问冲突。

# ruby-on-rails - Rails project using MySQL gem not starting up on Windows 8

> ID：15333733
> 
> 赞同：0
> 
> 时间：2013-03-11T08:03:58.497
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

My specs are as follow:

*   Windows 8 64-bit
*   Ruby 1.9.3
*   Rails 3.2.12

I installed rails via the [RailsInstaller](http://railsinstaller.org/windows). I have also installed the mysql2 gem. I created a new project that is pre-configured to use mysql e.g.

> rails new project_name -d mysql

I then tried to start up the server/WEBrick via

> rails server

And I get the following error:

![enter image description here](../Images/80bef81f180e7a0c765958974faf4515.png)

I've tried this using the mysql2 as well as teh mysql gem. Both times I get the same error. When I use the default sqlite then the project starts up fine and I can view it on *localhost:3000*.

I'm aware that mysql2 used to be a problem on rails, but since mysql isn't working either I'm of the opinion that it's a Windows 8 specific project, surprise surprise.

I'd deff like to use MySQL rather than SQLite. Thanks for anyone that can point me in the right direction!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:08:24.770

作为一个指出的错误案例，

[SO Post](https://stackoverflow.com/questions/10493487/unable-to-start-the-rails-server)说-

`"The problem is with mysql. It is a 64 bit installation. Change it to 32bit and it runs fine."`

除此之外，这个错误也可能是一些缺少宝石的结果。您应该`bundle install`在运行服务器之前尝试运行。

还要确保`gem mysql`在执行之前将其添加到您的 gemfile 中`bundle install`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:23:29.983

请将您的 MySQL 更新为 64 位版本。它将解决问题。别忘了安装`Devkit`.

# c# - Backup a database

> ID：15333734
> 
> 赞同：0
> 
> 时间：2013-03-11T08:04:00.943
> 
> 标签：c#, asp.net, database, backup

I want to backup my DB but I got a error:

> ConnectionStrings cannot be used like a method

How can I resolve this?

```
string strCon = @"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Database.mdf;Integrated Security=True;User Instance=True";
string sSQL = "BACKUP DATABASE Database TO DISK = 'D:\\Database.bak';";
using (SqlConnection connection = new SqlConnection(ConfigurationManager.Connectionstrings(strCon).ConnectionString)) 
{
    SqlCommand command = new SqlCommand(sSQL, connection);
    connection.Open();
    command.ExecuteNonQuery();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:09:37.687

您应该直接使用该变量，因为`SqlConnection`需要一个包含连接字符串的字符串对象，并将其存储在字符串对象本身中。

所以它会是这样的：

```
using (SqlConnection connection = new SqlConnection(strCon)) 
{
    SqlCommand command = new SqlCommand(sSQL, connection);
    connection.Open();
    command.ExecuteNonQuery();
} 
```

推荐：（存放在`Web.config`）

```
<connectionStrings>
        <add name="job" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Database.mdf;Integrated Security=True;User Instance=True" />
</connectionStrings> 
```

然后像这样访问它：（`using System.Configuration;`）

```
ConfigurationManager.ConnectionStrings["job"].ConnectionString 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:06:54.153

`ConnectionStrings`是一个集合。它必须像这样使用：

```
ConfigurationManager.Connectionstrings[0].ConnectionString 
```

# oracle - Oracle report, add currency symbol after values

> ID：15333735
> 
> 赞同：0
> 
> 时间：2013-03-11T08:04:03.807
> 
> 标签：oracle, currency, oraclereports

If I add currency symbol to values it's look like: `$5000`, I want that currency symbol will be after value: `5000$`, possible to format ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:13:49.423

像这样的东西？

```
select to_char(5000, '9999l'), to_char(5000, 'l9999')
from dual 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/d41d8/8669)

* * *

如果您不想指定可以做的长度（我不喜欢这个解决方案......）：

```
select substr(trim(to_char('1', 'l9')), 1, 1) || 5000
from dual 
```

[这是另一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/d41d8/8686)

# javascript - Avoid focus to go beyond a particular button using tab button

> ID：15333737
> 
> 赞同：0
> 
> 时间：2013-03-11T08:04:18.237
> 
> 标签：javascript, html

Lets take a scenario, where in I have a series of buttons `btn1`, `btn2`, `btn3`...

I kept pressing 'tab' key and my focus is on `btn2`. Now I want to avoid `btn3` or any other beyond `btn2` not to get focus on tab key press.

How can I achieve this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T08:10:36.653

可以使用 tabindex 属性更改 tab 键的行为。这是元素将具有焦点的顺序。

和

```
 <button id="1" tabindex="-1">Some content</button> 
```

你应该防止焦点在你的按钮上。

或像这样：

```
 $(".btnclass").attr("tabindex", "-1"); 
```

检查这个：[http ://www.htmlcodetutorial.com/forms/_INPUT_TABINDEX.html](http://www.htmlcodetutorial.com/forms/_INPUT_TABINDEX.html)

# fortran - HDF5 for data files written with fortran

> ID：15333740
> 
> 赞同：5
> 
> 时间：2013-03-11T08:04:27.640
> 
> 标签：fortran, binary-data, hdf5, paraview

The HDF5 data storage uses the C convention, i.e. if I am storing a matrix A(N,M,K) in a binary file, the fastest changing dimension of the stored data will have size N. Apparently when I use the Fortran wrapper of HDF5, HDF5 automatically transposes the matrix, to be consistent with C.

I have a data of size (256 by 128 by 256) stored in an unformatted binary file written by fortran. I am trying to convert it into h5 format by using a program given below. But the final output is giving me the dimensions of the stored matrix as (128,256,256). I have no idea what to do to make sure that the final hd5 file can be rightly visualized in the visualizing software (Paraview).

```
PROGRAM H5_RDWT

 USE HDF5 ! This module contains all necessary modules

 IMPLICIT NONE

 CHARACTER(LEN=6), parameter :: out_file = "out.h5"  ! File name
 CHARACTER(LEN=6), parameter :: in_file  = "in.dat" ! File name
 CHARACTER(LEN=4), parameter :: dsetname =  "vort"! Dataset name
 CHARACTER(LEN=50) :: len

 INTEGER(HID_T) :: in_file_id   ! File identifier
 INTEGER(HID_T) :: out_file_id  ! File identifier
 INTEGER(HID_T) :: dset_id      ! Dataset identifier
 INTEGER(HID_T) :: dspace_id    ! Dataspace identifier

 INTEGER :: in_file_id = 23

 INTEGER     :: nx = 256, ny=128, nz=256

 INTEGER(HSIZE_T), DIMENSION(3) :: dims             ! Dataset dimensions
 INTEGER     ::   rank = 3                          ! Dataset rank

 INTEGER     ::   error                  ! Error flag
 INTEGER     ::   i, j, k, ii, jj, kk    ! Indices

 REAL,    allocatable :: buff_r(:,:,:)   ! buffer for reading from input file

 dims(1) = nx
 dims(2) = ny
 dims(3) = nz
 allocate(buff_r(nx,ny,nz))

 ! Read the input data.
 open (in_file_id,FILE=in_file,form='unformatted',access='direct',recl=4*nx*ny*nz)  
 read (in_file_id,rec=1) buff_r

 ! Initialize FORTRAN interface of HDF5.
 CALL h5open_f(error)

 ! Create a new file.
 CALL h5fcreate_f (out_file, H5F_ACC_TRUNC_F, out_file_id, error)

 ! Create the dataspace.
 CALL h5screate_simple_f(rank, dims, dspace_id, error)

 ! Create the dataset with default properties.
 CALL h5dcreate_f(out_file_id, dsetname, H5T_NATIVE_REAL, dspace_id, &
         dset_id, error)

 ! Write the dataset.
 CALL h5dwrite_f(dset_id, H5T_NATIVE_REAL, buff_r, dims, error)

 ! End access to the dataset and release resources used by it.
 CALL h5dclose_f(dset_id, error)

 ! Terminate access to the data space.
 CALL h5sclose_f(dspace_id, error)

 ! Close the file.
 CALL h5fclose_f(out_file_id, error)

 ! Close FORTRAN interface.
 CALL h5close_f(error)

 deallocate(buff_r)

 END PROGRAM H5_RDWT 
```

* * *

To illustrate what is happening, I am generating a sample data file using the following script:

```
 program main

  !-------- initialize variables -------------
  character(8) :: fname
  integer, parameter:: n = 32
  real*8, dimension(n,n,2*n) :: re
  integer i,j,k, recl
  Inquire( iolength =  recl ) re

  !------ fill in the array with sample data ----

  do k = 1, 2*n
     do j = 1, n
        do i = 1, n
           re(i,j,k) = 1.0
        end do
     end do
  end do

  !------ write in data in a file -----------
  write(fname, "(A)") "data.dat"
  open (10, file=fname, form='unformatted', access='direct', recl=recl)
  write(10,rec=1) re
  close(10)

  stop
  end program main 
```

I copy pasted the program by Ian Bush and changed the values of nx, ny and nz to 32, 32 and 64 respectively. I would expect the generated h5 file to have dimensions (32,32,64). But it is coming out to be (64,32,32). Here is what is happening in my machine:

```
[pradeep@laptop]$gfortran generate_data.f90 
[pradeep@laptop]$./a.out 
[pradeep@laptop]$ls -l data.dat 
-rw-r--r--  1 pradeep  staff  524288 Mar 12 14:04 data.dat
[pradeep@laptop]$h5fc convert_to_h5.f90 
[pradeep@laptop]$./a.out 
[pradeep@laptop]$ls -l out.h5 
-rw-r--r--  1 pradeep  staff  526432 Mar 12 14:05 out.h5
[pradeep@laptop]$h5dump -H out.h5 
HDF5 "out.h5" {
GROUP "/" {
   DATASET "data" {
      DATATYPE  H5T_IEEE_F64LE
      DATASPACE  SIMPLE { ( 64, 32, 32 ) / ( 64, 32, 32 ) }
   }
}
} 
```

Please confirm with me if you are seeing the same thing.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-17T18:05:25.873

在查看使用 Fortran 应用程序编写的 HDF5 文件时，我也遇到了麻烦。基本问题是 Fortran 和 C 存储多维数组的方式不同（Fortran 是列优先的，C 是行优先的），并且由于 Fortran HDF5 库是 C HDF5 库的接口，因此 Fortran 包装器会在传递数据之前转置维度进入 C 代码。同样，当 Fortran 应用程序读取 HDF5 文件时，Fortran 包装器会再次转置维度。

因此，如果您使用 Fortran 应用程序进行所有的写作和阅读，您应该不会注意到任何差异。如果您使用 Fortran 应用程序编写文件，然后使用 C 应用程序（例如 h5dump）读取它，则尺寸将出现转置。这不是一个错误，它就是它的工作原理。

如果要正确显示数据，请使用 Fortran 应用程序读取数据或使用 C 应用程序并先转置数据。（或者您可以在首先写入数据之前转置数据。）

如前所述，这在文档的第 7.3.2.5 节中得到了很好的解释：[http ://www.hdfgroup.org/HDF5/doc/UG/UG_frame12Dataspaces.html](http://www.hdfgroup.org/HDF5/doc/UG/UG_frame12Dataspaces.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:37:15.237

长评论真的而不是答案......

你能澄清为什么你认为它不起作用吗？一旦我更正了您代码中的几处

1) in_file_id 用 2 种不同的种类声明了两次

2) 直接访问文件的 Recl 不一定以字节为单位 - 通过输出列表查询更便携

我得到以下内容，它生成了一个带有随机数据的虚拟文件，似乎可以工作：

```
ian@ian-pc:~/test/stack$ cat hdf5.f90
PROGRAM H5_RDWT

 USE HDF5 ! This module contains all necessary modules

 IMPLICIT NONE

 CHARACTER(LEN=6), parameter :: out_file = "out.h5"  ! File name
 CHARACTER(LEN=6), parameter :: in_file  = "in.dat" ! File name
 CHARACTER(LEN=4), parameter :: dsetname =  "vort"! Dataset name
 CHARACTER(LEN=50) :: len

!!$ INTEGER(HID_T) :: in_file_id   ! File identifier
 INTEGER(HID_T) :: out_file_id  ! File identifier
 INTEGER(HID_T) :: dset_id      ! Dataset identifier
 INTEGER(HID_T) :: dspace_id    ! Dataspace identifier

 INTEGER(HID_T) :: in_file_id = 23

 INTEGER     :: nx = 256, ny=128, nz=256

 INTEGER(HSIZE_T), DIMENSION(3) :: dims             ! Dataset dimensions
 INTEGER     ::   rank = 3                          ! Dataset rank

 Integer :: recl

 INTEGER     ::   error                  ! Error flag
 INTEGER     ::   i, j, k, ii, jj, kk    ! Indices

 REAL,    allocatable :: buff_r(:,:,:)   ! buffer for reading from input file

 dims(1) = nx
 dims(2) = ny
 dims(3) = nz
 allocate(buff_r(nx,ny,nz))

 Inquire( iolength =  recl ) buff_r

 ! Read the input data.
 open (in_file_id,FILE=in_file,form='unformatted',access='direct',recl=recl)  
 read (in_file_id,rec=1) buff_r

 ! Initialize FORTRAN interface of HDF5.
 CALL h5open_f(error)

 ! Create a new file.
 CALL h5fcreate_f (out_file, H5F_ACC_TRUNC_F, out_file_id, error)

 ! Create the dataspace.
 CALL h5screate_simple_f(rank, dims, dspace_id, error)

 ! Create the dataset with default properties.
 CALL h5dcreate_f(out_file_id, dsetname, H5T_NATIVE_REAL, dspace_id, &
         dset_id, error)

 ! Write the dataset.
 CALL h5dwrite_f(dset_id, H5T_NATIVE_REAL, buff_r, dims, error)

 ! End access to the dataset and release resources used by it.
 CALL h5dclose_f(dset_id, error)

 ! Terminate access to the data space.
 CALL h5sclose_f(dspace_id, error)

 ! Close the file.
 CALL h5fclose_f(out_file_id, error)

 ! Close FORTRAN interface.
 CALL h5close_f(error)

 deallocate(buff_r)

 END PROGRAM H5_RDWT
ian@ian-pc:~/test/stack$ h5fc hdf5.f90
ian@ian-pc:~/test/stack$ ./a.out
ian@ian-pc:~/test/stack$ ls -l out.h5 
-rw-rw-r-- 1 ian ian 33556576 Mar 11 10:29 out.h5
ian@ian-pc:~/test/stack$ ncdump out.h5 | head
netcdf out {
dimensions:
    phony_dim_0 = 256 ;
    phony_dim_1 = 128 ;
variables:
    float vort(phony_dim_0, phony_dim_1, phony_dim_0) ;
data:

 vort =
  0.9975595, 0.5668247, 0.9659153, 0.7479277, 0.3673909, 0.4806369, 
ian@ian-pc:~/test/stack$ 
```

那你为什么觉得有问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-24T08:42:37.750

出于安全原因，我建议您将矩阵分解为矢量形式，并将它们作为一维数据集存储在 HDF5 文件中。然后，在阅读时以相同的方式组装它们。用于`H5SSELECT_HYPERSLAB_F`写入/读取矩阵的切片。

# git - git pull 已经是最新的但头部没有分离

> ID：15333742
> 
> 赞同：0
> 
> 时间：2013-03-11T08:04:39.283
> 
> 标签：git, github, git-pull

阅读标题我知道您会非常震惊，因为我确信头部不会脱离。我不太习惯 GIT。原始存储库发生了变化，我从上游命名了我的克隆。我正在尝试通过 git pull 拉出这些更改，它说，已经是最新的。我做到了，

```
git branch -r

origin/HEAD -> origin/master
origin/master
upstream/branchName
upstream/master 
```

所以我的头在origin master，我认为这很好。而做，

```
cat .git/HEAD 
```

给

```
ref: refs/heads/master 
```

在整个堆栈中，我看到人们将其称为分离的头部问题。但我认为我的情况并非如此。
我昨天在上游做了一个 git fetch ，它向我展示了压缩文件和所有内容。但是当我在编辑器中打开 repo 时，我没有看到任何新的更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T08:18:28.690

`git fetch`获取提交但不影响您的`HEAD`位置。您需要将本地主机与您想要的上游合并：（ `git merge upstream/master`或`git merge origin/master`）。

`git pull`通常为你做这两个`git fetch`，`git merge`但如果没有新的提交它会中止。请注意，如果您从其他遥控器（如您的 ）中提取，则`upstream`需要指定它以及要合并的分支：`git pull upstream master`

# machine-learning - LIBSVM：从模型文件中获取支持向量

> ID：15333745
> 
> 赞同：1
> 
> 时间：2013-03-11T08:04:47.543
> 
> 标签：machine-learning, svm, libsvm

这可能是一个奇怪的要求，所以先解释一下。我最近突然发生了一次高清崩溃，丢失了我用来使用 libSVM 生成模型文件的数据文件。我确实有从这个数据文件生成的 SVM 模型和缩放文件，我想知道是否有办法从模型文件中的支持向量生成数据文件，就像`model_sv_to_instances(model, &instances)`因为获取实例的过程非常昂贵. （我知道它不会和原来的一样，但总比没有好）我正在使用带有 RBF 内核的概率 SVM。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T13:57:23.917

如果您在任何文本编辑器中打开给定的模型文件，您会发现如下内容：

```
 svm_type c_svc
 kernel_type sigmoid
 gamma 0.5
 coef0 0
 nr_class 2
 total_sv 4
 rho 0
 label 0 1
 nr_sv 2 2
 SV
 1 1:0 2:0
 1 1:1 2:1
 -1 1:1 2:0
 -1 1:0 2:1 
```

对你来说有趣的地方是在 SV 之后。

```
 1 1:0 2:0
 1 1:1 2:1
-1 1:1 2:0
-1 1:0 2:1 
```

这些是被选为支持向量的数据点，因此您只需解析文件。格式如下： [label] [index1]:[value1] [index2]:[value2] ... [indexn][valuen]

例如，从我的示例中，您可以得出结论，我的训练集是：

```
x y desired val 
0 0     -1
0 1      1
1 0      1
1 1     -1 
```

一些注意事项和警告。SV 数和数据点数之间的比率取决于您使用的参数。在某些情况下，该比率很大，与您的数据相比，您的 SV 很少。

要记住的另一件事是，这种减少可能会改变问题，如果您再次使用 SV 作为数据点进行训练，您可能会得到一个完全不同的模型和一组完全不同的参数。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:28:18.813

据我所知，一般的 SVM 模型，特别是 libSVM 模型，仅包含支持向量。这些向量代表了类之间的边界；最有可能的是，它们并不代表您的绝大多数数据点。所以，不幸的是，我认为没有办法从模型中重新生成数据。

话虽如此，我可以想到一个深奥的案例，其中模型可能有一些价值：有公司专门在这种情况下恢复数据（例如从崩溃的硬盘中恢复）。但是，恢复的数据有时会有差距；在某些情况下，模型可能会被逆向工程以填补一些缺失的地方。然而，这是非常理论上的。

编辑：正如其他答案所述，支持向量表示的数据点的比例可能会有所不同，具体取决于具体问题和参数。但是，如上所述，在大多数常见情况下，您只能重建原始数据集的一小部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T13:02:44.757

在`RBF`你的情况下是幸运的。根据[libsvm FAQ](http://www.csie.ntu.edu.tw/~cjlin/libsvm/faq.html#f402)，您可以从模型文件中提取支持向量：

> 在模型文件中，在参数和标签等其他信息之后，每一行代表一个支持向量。

但请记住，这些只是支持向量，它们只是原始输入数据的一小部分。

# c# - ClipboardInterop 内容更改了两次触发

> ID：15333746
> 
> 赞同：2
> 
> 时间：2013-03-11T08:04:47.880
> 
> 标签：c#, wpf, winapi, interop

我正在编写一个监视剪贴板更改的 WPF 应用程序。

我写了以下课程：

```
public class ClipboardInterop : IDisposable
{
    public event EventHandler ClipboardContentChanged;

    private void OnClipboardContentChanged()
    {
        var handlers = ClipboardContentChanged;
        if (handlers != null)
        {
            handlers(this, new EventArgs());
        }
    }

    public static ClipboardInterop GetClipboardInterop(Window window)
    {
        var hwndSource = PresentationSource.FromVisual(window) as HwndSource;
        if (hwndSource == null) return null;

        return new ClipboardInterop(hwndSource);
    }

    private IntPtr _thisHandle;
    private IntPtr _nextHandle;
    private HwndSource _hwndSource;

    public bool IsListening { get; private set; }

    private ClipboardInterop(HwndSource hwndSource)
    {
        _hwndSource = hwndSource;
        _thisHandle = hwndSource.Handle;
        IsListening = false;
    }

    public bool StartViewingClipboard()
    {
        Win32.SetLastError(0);
        _nextHandle = Win32.SetClipboardViewer(_thisHandle);
        if (_nextHandle == IntPtr.Zero)
        {
            UInt32 eCode = Win32.GetLastError();
            if (eCode != 0)
            {
                return false;
            }
        }

        _hwndSource.AddHook(HwndSourceHook);
        IsListening = true;
        return true;
    }

    public bool StopViewingClipboard()
    {
        Win32.SetLastError(0);
        Win32.ChangeClipboardChain(_thisHandle, _nextHandle);
        UInt32 eCode = Win32.GetLastError();
        IsListening = false;
        return eCode == 0;
    }

    private IntPtr HwndSourceHook(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled)
    {
        switch (msg)
        {
            case Win32.WM_CHANGECBCHAIN:
                _nextHandle = lParam;
                if (_nextHandle != IntPtr.Zero)
                {
                    Win32.SendMessage(_nextHandle, (UInt32)msg, wParam, lParam);
                }

                break;

            case Win32.WM_DRAWCLIPBOARD:

                OnClipboardContentChanged();

                if (_nextHandle != IntPtr.Zero)
                {
                    Win32.SendMessage(_nextHandle, (UInt32)msg, wParam, lParam);
                }

                break;
        }
        return IntPtr.Zero;
    }

    public void Dispose()
    {
        if (IsListening)
            StopViewingClipboard();
        _hwndSource = null;
        _nextHandle = IntPtr.Zero;
        _thisHandle = IntPtr.Zero;
    }
} 
```

Win32.cs 看起来像：

```
internal static class Win32
{
    /// <summary>
    ///     The WM_DRAWCLIPBOARD message notifies a clipboard viewer window that
    ///     the content of the clipboard has changed.
    /// </summary>
    internal const int WM_DRAWCLIPBOARD = 0x0308;

    /// <summary>
    ///     A clipboard viewer window receives the WM_CHANGECBCHAIN message when
    ///     another window is removing itself from the clipboard viewer chain.
    /// </summary>
    internal const int WM_CHANGECBCHAIN = 0x030D;

    [DllImport("user32.dll", SetLastError = true)]
    public static extern IntPtr SetClipboardViewer(
        IntPtr hWndNewViewer);

    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool ChangeClipboardChain(
        IntPtr hWndRemove,
        IntPtr hWndNewNext);

    [DllImport("user32.dll", SetLastError = true)]
    public static extern IntPtr SendMessage(
        IntPtr hWnd,
        UInt32 msg,
        IntPtr wParam,
        IntPtr lParam);

    [DllImport("kernel32.dll")]
    public static extern void SetLastError(
        UInt32 errorCode);

    [DllImport("kernel32.dll")]
    public static extern UInt32 GetLastError();
} 
```

主窗口.xaml

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        Loaded="MainWindow_OnLoaded">
    <Button Content="Toggle" Click="ButtonBase_OnClick"></Button>
</Window> 
```

主窗口.xaml.cs

```
public partial class MainWindow : Window
{
    private ClipboardInterop _clipboardInterop;

    public MainWindow()
    {
        InitializeComponent();
    }

    private void ButtonBase_OnClick(object sender, RoutedEventArgs e)
    {
        _clipboardInterop.StopViewingClipboard();
        _clipboardInterop.StartViewingClipboard();
    }

    private void MainWindow_OnLoaded(object sender, RoutedEventArgs e)
    {
        _clipboardInterop = ClipboardInterop.GetClipboardInterop(this);
        _clipboardInterop.StartViewingClipboard();
        _clipboardInterop.ClipboardContentChanged +=
            (o, args) => Debug.WriteLine(DateTime.Now.ToLongTimeString() + " Content changed");
    }
} 
```

所以现在当我启动应用程序时一切都很好，当我将文本复制到剪贴板时会触发一次事件。当我单击按钮并再次将文本复制到剪贴板时，该事件被触发两次。另一个按钮单击，事件被触发 3 次。我不知道为什么会这样。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:29:15.680

[好吧，我在this](http://code.msdn.microsoft.com/windowsdesktop/CSWPFClipboardViewer-f601b815)的帮助下修改了我的代码，显然我忘了删除 StopViewingClipboard 中的钩子。

这是固定代码：

```
public class ClipboardInterop : IDisposable
{
    public event EventHandler ClipboardContentChanged;

    private void OnClipboardContentChanged()
    {
        var handlers = ClipboardContentChanged;
        if (handlers != null)
        {
            handlers(this, new EventArgs());
        }
    }

    public static ClipboardInterop GetClipboardInterop(Window window)
    {
        var wih = new WindowInteropHelper(window);
        var hwndSource = HwndSource.FromHwnd(wih.Handle);
        if (hwndSource == null)
        {
            return null;
        }

        return new ClipboardInterop(hwndSource);
    }

    private IntPtr _hWndNextViewer;
    private HwndSource _hWndSource;

    public bool IsViewing { get; private set; }

    private ClipboardInterop(HwndSource hwndSource)
    {
        _hWndSource = hwndSource;
        IsViewing = false;
    }

    public bool StartViewingClipboard()
    {
        Win32.SetLastError(0);
        _hWndNextViewer = Win32.SetClipboardViewer(_hWndSource.Handle);
        if (_hWndNextViewer == IntPtr.Zero)
        {
            UInt32 eCode = Win32.GetLastError();
            if (eCode != 0)
            {
                return false;
            }
        }
        _hWndSource.AddHook(WinProc);
        IsViewing = true;
        return true;
    }

    public bool StopViewingClipboard()
    {
        Win32.SetLastError(0);
        Win32.ChangeClipboardChain(_hWndSource.Handle, _hWndNextViewer);
        _hWndNextViewer = IntPtr.Zero;
        _hWndSource.RemoveHook(WinProc);
        UInt32 eCode = Win32.GetLastError();
        IsViewing = false;
        return eCode == 0;
    }

    private IntPtr WinProc(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled)
    {
        switch (msg)
        {
            case Win32.WM_CHANGECBCHAIN:
                if (wParam == _hWndNextViewer)
                {
                    _hWndNextViewer = lParam;
                }
                else if (_hWndNextViewer != IntPtr.Zero)
                {
                    Win32.SendMessage(_hWndNextViewer, msg, wParam, lParam);
                }
                break;

            case Win32.WM_DRAWCLIPBOARD:
                OnClipboardContentChanged();
                Win32.SendMessage(_hWndNextViewer, msg, wParam, lParam);
                break;

        }
        return IntPtr.Zero;
    }

    public void Dispose()
    {
        if (IsViewing)
            StopViewingClipboard();
        _hWndSource = null;
        _hWndNextViewer = IntPtr.Zero;
    }
} 
```

# c++ - 野牛中的哈希查找问题

> ID：15333754
> 
> 赞同：1
> 
> 时间：2013-03-11T08:05:20.110
> 
> 标签：c++, bison, unordered-map

我正在研究一种经典的 bison/flex 计算器实现问题。我遇到的问题是变量赋值。起初它似乎有效；只有声明的变量可以被引用，它会记住我分配的值......除了所有变量似乎共享一个值，而不是每个都有自己的值。所以如果我做“x=3; y=5;” 那么 x 和 y 的值都是 5。

显然我做错了什么，但我不确定这是否是我对 bison、c++ 或 unordered_map 数据结构如何工作的理解失败。（或者也许，全部 3 个）

我相信我已经包含了下面代码的所有相关部分，但如果有一些遗漏，请告诉我。

```
%{

    #include <iostream>
    #include <string>
    #include <unordered_map>
    using namespace std;

    unordered_map<string, double> dict;
%}    

%union {
    double dval;
    char *sval;
}

%token <sval> VARIABLE
%token <dval> NUMBER
%type<dval> expr

%%

assign: 
     VARIABLE '=' expr {dict[$1] = $3; cout << $1<< "="<<dict[$1]<<endl; }
expr: VARIABLE {
    if(dict.find($1) == dict.end())
    {
        yyerror("Bad Var");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:32:35.853

你真的应该展示你的弹性代码，但我猜相关位看起来像这样：

```
{id}     { yylval.sval = yytext; return VARIABLE; } 
```

你需要做的是：

```
{id}     { yylval.sval = strdup(yytext); return VARIABLE; } 
```

然后，您需要通过在野牛操作中使用分配的字符串后释放分配的字符串来确保不会泄漏内存。

请参阅[flex 手册](http://westes.github.io/flex/manual/A-Note-About-yytext-And-Memory.html)和[bison 手册](http://www.gnu.org/software/bison/manual/html_node/Strings-are-Destroyed.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:36:47.217

所以我的问题不在于我如何存储数据，而在于检索它。我需要在下面添加 else 语句来实际设置 expr 的值。

```
expr: VARIABLE {
    if(dict.find($1) == dict.end())
    {
        yyerror("Bad Var");
    }
    else { //Needed this section
        $$ = dict[$1]
    }
} 
```

我想我知道我需要这样做并且只是忘记了，但是 expr 获取最近分配的变量的值的行为让我失望了。

# sql - Visual Foxpro 查询待定数量

> ID：15333757
> 
> 赞同：0
> 
> 时间：2013-03-11T08:05:39.400
> 
> 标签：sql, select, foxpro, visual-foxpro

我有两张桌子 AORDER 用于购买和 BORDER 出售。我想获得待定数量。销售订单可以针对一份采购订单包含 1 条以上的记录。我不想显示那些挂起数量为 0 的订单。我试过这个：

```
SELECT ;
      aorder.orderid,;
      aorder.orderdate,;
      aorder.itemname,;
      aorder.partyname,;
      aorder.qty as Purchase,;
      SUM(border.qty) AS Sale,;
      SUM(aorder.qty-border.qty) as Pending;
   FROM ;
      aorder;
         LEFT JOIN border ;
            ON aorder.orderid = border.porderid;
   GROUP BY ;
      aorder.orderid,;
      aorder.orderdate,;
      aorder.itemname,;
      aorder.partyname,;
      aorder.qty 
```

但是我没有隐藏那些购买数量=销售数量的记录。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:40:46.767

正如 Shahkalpesh 提到的，您确实需要应用拥有，但您的 SUM 不正确。

它应该是

aorder.qty - SUM(border.qty) > 0; && 也供您的领域参考。

原因是，SUM 是对总和中的每个部分求和。您将只有一个“购买”记录，但有许多“销售”记录，如库存控制先进/先出 (FIFO)、后进/先出 (LIFO) 等

因此，假设您有数量为 10 的 PURCHASE 订单 #1，并且已分别售出数量为 2、1、1、3、2、1 的时间......总共 6 条销售记录。你正在做的是

```
sum( 10 - 2 
   + 10 - 1
   + 10 - 1
   + 10 - 3
   + 10 - 2
   + 10 - 1 ) 
```

修改后的方法是...

```
10 - SUM( 2 + 1 + 1 + 3 + 2 + 1 ) 
```

# c# - 如何获得正确的 IP 地址？

> ID：15333761
> 
> 赞同：0
> 
> 时间：2013-03-11T08:06:00.620
> 
> 标签：c#, ip-address

我尝试获取正确的 IP 但我不能

我正在使用这段代码：

```
{
    IPHostEntry host;
    string localIP = "?";
    host = Dns.GetHostEntry(Dns.GetHostName());
    foreach (IPAddress ip in host.AddressList)
    {
        if (ip.AddressFamily == System.Net.Sockets.AddressFamily.InterNetwork)
        {
            localIP = ip.ToString();
        }
    }
    return localIP;
} 
```

但这对我不起作用！

例如，我的真实 IP 是`151.246.147.86` ，但使用此代码我得到`192.168.1.2`.

注意：我有 4 个网络适配器，并且在带有 **IPConfig**的 DOC 中我看到了这个：

```
Network adapter: Local Area Connection 6
Media state : Media disconnected

Network adapter: Local Area Connection 4
Media state : Media disconnected

Network adapter: Local Area Connection 3
IP Address: 10.10.255.222

Network adapter: Local Area Connection
IP Address: 192.168.1.2 
```

现在我连接到网络并使用“本地连接”；我的 WAN 连接的公共 IP 是`151.246.147.86`. 我想获得这个公共 IP ( `151.246.147.86`)，我该怎么做？

注意：我不想（而且我不能，因为我使用的是 VPN）使用第三方网站来获取我的 IP

请帮忙！

- - - -编辑 ： - - - - - - -

**注意：**我从 VPN 使用，我的 VPN IP（例如）是：`176.227.197.111`。但是我的 WAN 的 IP 是：`151.246.147.86`我想得到这个地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:19:52.617

除非有某种方法可以查询您的路由器/调制解调器/最外部端点的 WAN 地址，否则您的要求是不可能的。您的计算机知道的唯一 IP 地址是它自己的（内部 IP）。

技术说明：IP 地址 192.168.1.2 没有任何非“真实”的信息 - 这*是*您计算机的地址。它只是您给定的内部网络的本地网络，对外部的任何东西几乎没有用处。

* * *

如果您的路由器支持 uPnP，则需要查询`GetExternalIPAddress`（起点[Is there a UPnP Library for .NET (C# or VB.NET)?](https://stackoverflow.com/questions/333079/is-there-a-upnp-library-for-net-c-or-vb-net)）。然而，由于 uPnP 被认为是危险的，并且许多有安全意识的用户将其关闭，我不会指望它会被启用。

查询外部服务将是您获取外部 IP 的最可靠选择，无论是您编写的服务还是第三方服务（另请参阅[https://superuser.com/questions/420969/services-that-just-return -your-public-ip-as-text](https://superuser.com/questions/420969/services-that-just-return-your-public-ip-as-text)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:23:23.480

您（可能）正在使用路由器/调制解调器，因此 192.168.1.2 是您的“真实 IP”。您的调制解调器/路由器将位于同一（专用）网络上，其公共接口 (WAN) 将具有公共 IP。因此，您需要在调制解调器/路由器的公共接口上获取 IP。

如何获取调制解调器的 WAN IP 取决于您的标记和型号；如果它支持 UPnP，您可能会这样做，或者如果它是企业级路由器，它也可能支持 SNMP……您应该指定您的品牌和型号。

不使用外部站点的另一种方法：对已知站点（谷歌？）进行跟踪，第一跳将是您的路线。此外，如果您在 VPN 上，您也许可以使用相同的技术。例如，如果您知道 VPN 上的另一台主机（可能是服务器？），您可以 ping/tracert 它并从那里发现您的路由器。我不知道在这种情况下你是否会获得你所谓的“真实 IP”（顺便说一下，你一开始是怎么知道这个 IP 的？你可能能够以同样的方式获得它，以编程方式） .

基于 VPN 方案的另一种解决方案：您可以使用 Windows 来帮助您。Windows 有某种 VPN 管理 (RAS) 可以帮助您；我建议从[这里](http://geekswithblogs.net/thibbard/articles/CSharpCodeToMaintainVPNConnectionProgramatically.aspx)开始了解基础知识，然后寻找一个库/SDK 来帮助你（一个快速的谷歌返回[http://dotras.codeplex.com/](http://dotras.codeplex.com/)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:17:45.470

有很多方法和教程教你如何找到一个ip地址，我使用这个工具[http://www.ipgp.net/](http://www.ipgp.net/)显示任何ip地址的信息，只要在框中输入任何IP地址，你就会得到每个查询的国家、城市、地区、ISP、街道地址和卫星位置图。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-15T05:07:13.050

you're trying to get your IP address from your computer or a server? It will make a lot of difference. If you're trying to get your IP address from your computer/laptop use [http://www.howtochangeipaddress.com](http://www.howtochangeipaddress.com). Your IP will pop up in front of you soon you enter the site.

# android - Android：如何在字符串定义中引用字符串

> ID：15333764
> 
> 赞同：5
> 
> 时间：2013-03-11T08:06:04.673
> 
> 标签：android, string

有没有人知道如何在字符串定义中引用定义的字符串，即：

```
<string name="string_1">I am string 1</string> 
```

接着，

```
<string name="string_2">I want to refer to @string/string_1</string>
<string name="string_3">@string/string_1 need to be referred here</string> 
```

我已经尝试了示例代码，但它没有用！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T08:11:26.343

您可以尝试使用[`String.format()`](http://developer.android.com/guide/topics/resources/string-resource.html)：

```
<string name="string1">I am %1$s</string>
<string name="string2">String 1</string>

...
String string1 = String.format(resources.getString(R.string.string1, R.string.string2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:14:51.230

是的，只要您引用整个字符串，您就可以在一种情况下执行此操作

```
<string name="string_1">I am string 1</string>
<string name="string_2">I am string 2</string> 
```

接着，

```
<string name="string_2">@string/string_1</string>
<string name="string_3">@string/string_2</string>

<string name="string_default">@string/string2</string> 
```

但不支持以下

```
<string name="string_default">@string/string1 TEST</string> 
```

您也可以通过使用`String.format()`(a good walk around)来解决您的问题

# visual-studio-2012 - Couchbase 无法在生产服务器上运行

> ID：15333768
> 
> 赞同：0
> 
> 时间：2013-03-11T08:06:20.463
> 
> 标签：visual-studio-2012, couchbase, strongname, strong-named-key

我在我的 asp.net web mvc 项目中使用 Couchbase 客户端（我从[这里](http://www.couchbase.com/develop/net/current)下载了 dll 文件）

我在 Windows Server 2012 x64 上安装了 Couchbase 服务器。

在开发项目时，一切都按预期工作。当我在服务器上发布网站时，出现此错误：

```
Could not load file or assembly 'Enyim.Caching' or one of its dependencies.

Strong name signature could not be verified. 

The assembly may have been tampered with, or it was delay signed but not fully signed with the correct private key. (Exception from HRESULT: 0x80131045) 
```

我被困住了！我也试过[这个答案](https://stackoverflow.com/questions/8977053/cant-get-the-couchbase-net-memcache-client-to-run-complains-its-strong-name-v/8977433#8977433)，但没有效果。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:34:29.290

1.2.2 版本存在问题（与签名相关）。有一个修复发布到[http://packages.couchbase.com/clients/net/1.2/Couchbase-Net-Client-1.2.3.zip（NuGet](http://packages.couchbase.com/clients/net/1.2/Couchbase-Net-Client-1.2.3.zip)也已更新）。我将调查为什么该网站没有新链接。为混乱道歉。

# java - 多页人脸消息传递，良好实践

> ID：15333771
> 
> 赞同：0
> 
> 时间：2013-03-11T08:06:50.260
> 
> 标签：java, jsf-2

据我所知，通过多个页面使用面部消息的唯一工作方式是使用自定义 PhaseListener，它通过请求提供保存/恢复消息。我说的是这样的[事情](http://ocpsoft.org/java/persist-and-pass-facesmessages-over-page-redirects/)。

但这是一个好习惯吗？

有哪些其他变体可用于此目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:18:43.560

[Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)模式是设计 Web 应用程序导航流程的最佳实践之一。当您使用 JSF 2 时，[使用 flash scope](http://mkblog.exadel.com/2010/07/learning-jsf2-using-flash-scope/)将消息从一个请求传递到另一个请求非常简单。此范围类似于会话映射，但是它的生命周期从一个请求到下一个请求是有限的，之后将被删除。还有一些第三方库作为为您[实现功能的](http://showcase.omnifaces.org/utils/Messages)**omnifaces** 。

# java - JBoss 5.1.0 EAP。随机发生 java.lang.NoClassDefFoundError

> ID：15333772
> 
> 赞同：7
> 
> 时间：2013-03-11T08:06:51.537
> 
> 标签：java, jboss, ejb-3.0, noclassdeffounderror

在我们的 EJB 3.0 - 应用程序中，我们随机发生了 java.lang.NoClassDefFoundError 发生。

它只是在 IDE 中本地发生。

## 设置：

```
OS: Windows 7 32 Bit
Java JDK: 1.6.0_24 (32 Bit)‎
IDE: IntelliJ 11.1‎
App-Server: JBoss 5.1.0 EAP
EAR-Building with „maven-ear-plugin“‎
WAR-Building with Maven „&lt;packaging>war</packaging>“‎
EJB-Building with Maven „&lt;packaging>ejb</packaging>“ und „maven-ejb-‎plugin“‎ 
```

## EAR 看起来像这样：

```
xxx.ear
‎   |___ META-INF
‎   |    |___ application.xml (Information about EAR, EJB und WEB-Modul ‎configured)‎
‎   |‎
‎   |___ xxxEJB.jar‎
‎   |    |‎
‎   |    |___ META-INF
‎   |    |    |___ persistance.xml (JPA 1.0 configuration)‎
‎   |    |    |___ jboss.xml (JBoss-Config)‎
‎   |    |    |___ ejb-jar.xml (EJB 3.0 definition)‎
‎   |    |‎
‎   |    |___ country/yyy/xxx/.. (our own compiled classes)
‎   |    |___ report/.. (JasperReport-Tamplates)
‎   |    |___ quickfix/.. (QuickFixJ-configuration)
‎   |    |___ all dependent libraries for our EJB 3.0 project, (74-jar-files)
‎   | ‎
‎   |___ xxxWAR.war‎
‎        |‎
‎        |___ META-INF
‎        |___ WEB-INF
‎             |‎
‎             |___ lib‎
‎             |    |___ all dependent libraries for the Servlet-‎project, (2-jar-files)
‎             |___ classes‎
‎             |    |___ country/yyy/xxx/.. (our own compiled classes)
‎             |___ web.xml (Servlet-configuration)‎ 
```

## Stacktrace 看起来像这样：

JVM 已使用以下选项启动：-verbose:class 以查看所有类加载操作。

```
--- SNIP JBoss-Log ---‎

‎[Loaded country.yyy.xxx.service.issue.util.IssueUtil from file:/C:/Workarea/Projects/xxx-‎trunk/xxx/target/classes/]‎
‎[Loaded org.joda.time.DateTimeZone from jar:file:/C:/Workarea/Projects/xxx-trunk/xxx-‎ear/target/xxx.ear!/xxxEJB.jar]‎
‎[Loaded org.joda.time.Chronology from jar:file:/C:/Workarea/Projects/xxx-trunk/xxx-‎ear/target/xxx.ear!/xxxEJB.jar]‎
‎[Loaded org.joda.time.chrono.BaseChronology from jar:file:/C:/Workarea/Projects/xxx-trunk/xxx-‎ear/target/xxx.ear!/xxxEJB.jar]‎
‎[Loaded org.joda.time.DateTimeZone$1 from jar:file:/C:/Workarea/Projects/xxx-trunk/xxx-‎ear/target/xxx.ear!/xxxEJB.jar]‎
‎[Loaded org.joda.time.tz.NameProvider from jar:file:/C:/Workarea/Projects/xxx-trunk/xxx-‎ear/target/xxx.ear!/xxxEJB.jar]‎
‎[Loaded org.joda.time.JodaTimePermission from jar:file:/C:/Workarea/Projects/xxx-trunk/xxx-‎ear/target/xxx.ear!/xxxEJB.jar]‎
‎[Loaded org.joda.time.tz.Provider from jar:file:/C:/Workarea/Projects/xxx-trunk/xxx-‎ear/target/xxx.ear!/xxxEJB.jar]‎
‎[Loaded org.joda.time.tz.FixedDateTimeZone from jar:file:/C:/Workarea/Projects/xxx-trunk/xxx-‎ear/target/xxx.ear!/xxxEJB.jar]‎
‎[Loaded org.joda.time.tz.ZoneInfoProvider from jar:file:/C:/Workarea/Projects/xxx-trunk/xxx-‎ear/target/xxx.ear!/xxxEJB.jar]‎
ERROR - javax.ejb.EJBTransactionRolledbackException: Unexpected Error
java.lang.NoClassDefFoundError: org/joda/time/tz/DefaultNameProvider
at org.joda.time.DateTimeZone.getDefaultNameProvider(DateTimeZone.java:545)‎
at org.joda.time.DateTimeZone.setNameProvider0(DateTimeZone.java:515)‎
at org.joda.time.DateTimeZone.<clinit>(DateTimeZone.java:116)‎
at ‎country.yyy.xxx.service.issue.util.InitialFixingDateTimeUtil.getHedgingTimestampsForIssue(InitialFixingDateTimeUtil.java:83)‎
at ‎country.yyy.xxx.service.issue.util.InitialFixingDateTimeUtil.getFirstHedgingTimestampForIssue(InitialFixingDateTimeUtil.java:43)‎
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)‎
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)‎
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)‎
at java.lang.reflect.Method.invoke(Unknown Source)‎

‎--- SNAP JBoss-Log ---‎ 
```

文件“org/joda/time/tz/DefaultNameProvider”肯定在jar文件jar:file:/C:/Workarea/Projects/xxx-trunk/xxx-‎ear/target/xxx.ear!/xxxEJB.jar

## 建议：

我们觉得Quarz与它有关。因此，当某些事情已经安排好时，可以使用 EJB 3.0 Remote-Stateless-Service。有时会发生错误。

Quartz-Scheduler 最初是在 Servlet-Context 中创建的，但大多数情况下它工作正常。

有人有同样的问题吗？

## JBoss 部署是通过 IntelliJ JBoss 插件完成的：

有没有可能，问题出在我们使用的部署机制上？我们使用 intelliJ JBoss 插件部署应用程序，所以 JBoss 说：

```
09:39:21,614 INFO  [MainDeployer] deploy, url=file:/C:/Workarea/Projects/xxx-trunk/xxx-ear/target/xxx.ear
09:39:33,613 INFO  [Ejb3DependenciesDeployer] Encountered deployment AbstractVFSDeploymentContext@2726974{vfszip:/C:/Workarea/Projects/xxx-trunk/xxx-ear/target/xxx.ear/xxxEJB.jar/} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:55:52.207

## 当我们使用 IntelliJ IDEA JBoss-Run-Configuration 进行部署时，就会出现问题。

感谢 user1516873 的提示，通过 ANT/Maven 手动部署。

我们已经尝试过了。

我们引入了一个 ANT-Task 来将工件 xxx.ear 复制到 JBoss-Deploy-Folder 中。从那以后它工作正常，我们还没有得到 java.lang.NoClassDefFoundError 。

build.xml 看起来像这样：

```
<project name="xxx-deploy">
    <!-- Copy Artifact to JBoss-Deploy-Folder -->
    <target name="xxx-ear-deploy">
        <copy file="C:/Workarea/Projects/xxx-trunk/xxx-ear/target/xxx.ear"
              todir="C:/Workarea/_tools/jboss-eap-5.1.0-xxx/jboss-as/server/default/deploy"/>
    </target>
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:09:55.207

这可能是由于二进制（xx.ear）内部的 jar 冲突。您可以使用以下代码在ear文件夹的lib文件夹中查找jar重复

公共类JarSearch {

```
public static final String NL = System.getProperty("line.separator");

public static String directory = new String();
public static File file;
public static Writer output;

public static void main(String args[]) {
    /*if (args.length != 2){
        System.out.println("You must provide 1\. search directory and 2\. search string");
        System.exit(0);
    }*/
    JarSearch search = new JarSearch();
    try{
        String dir = "E://lib";//path of lib folder
        directory = dir;
        file = new File(directory);
        String parentPath = file.getParent();
        parentPath += "\\JarSearchResult.txt";
        file = new File(parentPath);
        //output = new BufferedWriter(new FileWriter(file));
        String searchStr = "DES.class";// name of class file to b searched
        search.searchDir(dir, searchStr);//"C:\\Program Files\\IBM\\Application Developer\\plugins\\com.ibm.etools.ctc.binding.java\\runtime\\ctcjava.jar");
    }catch(IOException ioe){
        System.out.println(ioe.toString());
    }
}

public static void searchDir(String dirName, String searchStr)throws IOException{
    File dir = new File(dirName);
    if (!dir.isDirectory()){
        throw new IOException(dir+" is not a directory !!!");
    }
    File files[] = dir.listFiles();
    for (int i=0; i<files.length; i++){
        if (files[i].isDirectory()){
            searchDir(files[i].getAbsolutePath(), searchStr);
        }else{
            if (files[i].getName().endsWith(".jar")){
                searchFile(files[i].getAbsolutePath(), searchStr);
            }
        }
    }
    //output.close();
}

public static void searchFile(String fileName, String searchStr)throws IOException{
    //System.out.println("File Absolute Path :: " + fileName);
    boolean outputMessage = false;
    StringBuffer buf = new StringBuffer();
    int index1 = fileName.lastIndexOf("\\");
    int index2 = fileName.lastIndexOf("/");
    //System.out.println(index1 + " :: " + index2 + " ===>>> " + NL);
    int index = -1;
    if (index1 > index2){
        index = index1;
    } else {
        index = index2;
    }
    buf.append(NL);

    buf.append("DIR: ");
    buf.append(fileName.substring(0, index));
    buf.append(NL);

    buf.append("JAR: ");
    buf.append(fileName.substring(index+1));
    buf.append(NL);

    searchStr = searchStr.toLowerCase();

    JarFile jar = new JarFile(fileName);
    Enumeration e = jar.entries();
    while (e.hasMoreElements()){
        JarEntry entry = (JarEntry)e.nextElement();
        String strEntry = entry.getName().toLowerCase();
        //System.out.println(strEntry);
        if (strEntry.indexOf(searchStr) > -1){
            outputMessage = true;
            buf.append(entry.getName());
            buf.append(NL);
        }
    }
    if (outputMessage){
        System.out.println(buf);
        //output.write(buf.toString());
    }
} 
```

}

# php - 动态 jquery 页面

> ID：15333775
> 
> 赞同：0
> 
> 时间：2013-03-11T08:07:07.413
> 
> 标签：php, jquery

我真的不知道该怎么称呼它，所以我无法通过搜索找到任何东西。我几乎有以下几点：

```
 $(document).on('click', 'a[data-ajax]', function(e) {
        var box = $('#ajaxdata');
        e.preventDefault();
        var r = $(this).attr('href');
        $.ajax({
            type: 'post',
            url: '/betasite/' + r,
            success: function(data) {
                box.html(data);
            }
        });
    }); 
```

几乎它将文件的内容（一些html）加载到div中，因此页面不需要经常重新加载数据。问题是我想在加载的文件中有一些 php，这样我就可以访问服务器端 MySQL 数据并显示它。然而，每当我尝试这样做时，它都会像 <--php (stuff) --> 一样将 php 注释掉。有谁知道我可以如何解决这个问题（比如让 php 在加载页面之前生成页面）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:12:21.643

如果您在本地环境中，您的 php 代码将由服务器（WAMP/MAMP）自动呈现。如果您没有运行服务器（WAMP/MAMP），则必须根据您使用的操作系统选择一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:20:15.973

一个好的做法是在这种情况下测试“php”服务的操作，然后再尝试前端（jquery）中的操作。如果你有一个 Apache 服务器，应该通过访问服务路由来查看他们的服务结果。

# asp.net-mvc - MVC复选框选中状态问题

> ID：15333779
> 
> 赞同：0
> 
> 时间：2013-03-11T08:07:33.787
> 
> 标签：asp.net-mvc, asp.net-mvc-3

早上好，我有一个显示客户搜索结果的视图。在视图的顶部，我有一个带有几个复选框的过滤器。用户可以选择多个复选框项目并按下过滤结果按钮。当用户按下按钮时，它会调用一个过滤结果的操作。页面也刷新了。我现在的问题是，我怎样才能让页面记住选中了哪些复选框。因为当返回结果时，过滤器元素被重置。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:26:24.723

您可以使用 TempData。 [TempData VS ViewBag VS ViewData](http://www.codeproject.com/Articles/476967/WhatplusisplusViewData-2cplusViewBagplusandplusTem)

您使用了 ViewData，重定向后，ViewBag 和 ViewData 对象不再可用

> TempData 也是从 TempDataDictionary 类派生的字典，并存储在短期会话中，它是字符串键和对象值。不同的是对象的生命周期。TempData 保留 HTTP 请求时间的信息。这意味着仅从一页到另一页。这也适用于 302/303 重定向，因为它在同一个 HTTP 请求中。当您从一个控制器移动到另一个控制器或从一个操作移动到另一个操作时，有助于维护数据。换句话说，当您重定向时，“临时数据”有助于维护这些重定向之间的数据。它在内部使用会话变量。在当前和后续请求期间使用临时数据仅意味着当您确定下一个请求将重定向到下一个视图时使用它。它需要对复杂数据类型进行类型转换并检查空值以避免错误。通常用于只存储一次消息，如错误消息、验证消息。

```
TempData["CheckedList"] = YourCheckBoxListValues; //in your controller 
```

在你的视野中

```
@{    
      var tempchkboxList = TempData["CheckedList"] as yourStronglyTypeClass;                
                        //or 
       var tempchkboxList = TempData["CheckedList"].ToString(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:24:35.373

当您发布表单时（通过单击搜索按钮），您可以将选中/选中的复选框详细信息保留在会话变量中。在 HttpPost 操作中，阅读已选中的复选框并将其添加到视图模型的集合属性中并将其发送回视图。完成后将会话变量值设置为`null`（阅读后）。在视图中，使用您的视图模型值来设置这些复选框的选中状态。

另一种选择是使用 ajax。当您单击搜索时。阅读您的搜索条件并向操作方法发出 ajax 请求。返回部分视图并仅更新显示搜索结果的 div/table。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:37:37.120

取决于应记住输入标准多长时间。您也可以通过 将其保存在您的会话中`Session["customerCriteria"] = yourCriteria`，但如果您提供了一些代码，则举例会更容易。

# java - 从多级继承中的子类调用“大”父函数

> ID：15333780
> 
> 赞同：8
> 
> 时间：2013-03-11T08:07:42.287
> 
> 标签：java, inheritance, superclass

```
public class GrandParent
{
    public void walk()
    {
        ...
    }
}

public class Parent
{
    public void walk()
    {
        ...
    }
}

public class Child
{
    public void walk()
    {
        // Here in some cases I want to use walk method of GrandParent class
    }
} 
```

现在在 Child.walk() 中，我只想在某些情况下使用 GrandParent.walk()。我怎样才能做到这一点？由于 super.walk() 将始终使用 Parent.walk()。

**注意：（**请注意，这是一个复杂场景的简化示例）

**注意2：**请仅说明是否有这样做的标准程序。我在父类中使用了一个标志，如果孩子想使用 GrandParent 的方法，则设置该标志。但是这个序列变得非常复杂。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T08:29:16.563

这里的问题在于决定调用父函数“walk”。它不应该被称为“walk”，除非它旨在成为 GrandParent 的完整功能替代品`walk()`。

如果无法更改该决定，那么@zvzdhk 现有答案中建议的解决方案是可以做到的最好的解决方案。

理想情况下，Parent`walk()`将被赋予一个新名称，以反映其功能与 GrandParent 的任何不同之处`walk()`。然后可以从 Child 类调用每个函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T08:10:04.843

您可以像这样指定访问父值的方法：

```
public class GrandParent
{
    public void walk()
    {
        ...
    }
}

public class Parent
{
    public void walk()
    {
        ...
    }

    public void grandParentWalk()
    {
        super.walk();
    }
}

public class Child
{
    public void walk()
    {
        grandParentWalk();
    }
} 
```

## 类似的问题：

*   [Java：如何访问下两层的父类方法？](https://stackoverflow.com/questions/3118067/java-how-do-you-access-a-parent-class-method-two-levels-down)
*   [为什么是 super.super.method(); 在 Java 中不允许？](https://stackoverflow.com/questions/586363/why-is-super-super-method-not-allowed-in-java?lq=1)

# javascript - 通过增加一个变量来改变 href-target

> ID：15333783
> 
> 赞同：0
> 
> 时间：2013-03-11T08:07:57.340
> 
> 标签：javascript, jquery, variables, href

我正在做一个测验，这个测验有一个计时器。当计时器结束时，它会触发一个使用 href 作为目标的 scrollLeft 动画。我想要做的是解决它始终以第一个为目标的问题`.qAnswers li a`是使用变量来更改 href-target 的名称。好吧，它似乎没有按计划工作，我做错了什么？

这是该项目的链接：http: [//www.carlpapworth.com/friday-quiz/#](http://www.carlpapworth.com/friday-quiz/#)

HTML：

```
<div id="qWrap">
                <ul id="qBox">
<!--Q1-->           <li id="q1" class="qContainer">
                        <div class="qQuestion">Question I                       </div>
                        <ul class="qAnswers">
                            <li><a href="#q2" class="aWrong"><h3>Answer a</h3></a></li>
                            <li><a href="#q2" class="aCorrect"><h3>Answer b</h3></a></li>
                            <li><a href="#q2" class="aWrong"><h3>Answer c</h3></a></li>
                        </ul>
                    </li>
<!--Q2-->           <li id="q2" class="qContainer">
                        <div class="qQuestion">Question II                      </div>
                        <ul class="qAnswers">
                            <li><a href="#q3" class="aWrong"><h3>Answer 1</h3></a></li>
                            <li><a href="#q3" class="aWrong"><h3>Answer 2</h3></a></li>
                            <li><a href="#q3" class="aCorrect"><h3>Answer 3</h3></a></li>
                        </ul>
                    </li>
<!--Q3-->           <li id="q3" class="qContainer">
                        <div class="qQuestion">Question III                     </div>
                        <ul class="qAnswers">
                            <li><a href="#q4" class="aWrong"><h3>Answer 1</h3></a></li>
                            <li><a href="#q4" class="aWrong"><h3>Answer 2</h3></a></li>
                            <li><a href="#q4" class="aCorrect"><h3>Answer 3</h3></a></li>
                        </ul>
                    </li>
</ul>
</div> 
```

JS：

```
//timer//

function timesUp(){
            $('#timerBar').animate({'width':'0px'}, 7000, function(){
                nextQuestion(function(){
                    resetTimer();
                }); 
            });                 
}

var hrefURL = '#q';
var hrefData = 2; <!-- VARIABLE -->
$('.qAnswers a:first').attr('href', hrefURL + hrefData);

function nextQuestion(event){
    var $anchor = $('.qAnswers a:first');
     $('#qWrap').stop(true, true).animate({
        scrollLeft: $($anchor.attr('href')).position().left
        }, 2000, function(){
            nextCount();  
hrefData++; <!-- INCREASE VARIABLE -->

        });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:43:37.897

```
FINALY! I found the answer to my own problem: 
    var hrefURL = '#q';
    var hrefData = 2;
    $('.qAnswers a:first').attr('href', hrefURL + hrefData);

    function nextQuestion(event){
        var $anchor = $('.qAnswers a:first');
         $('#qWrap').stop(true, true).animate({
            scrollLeft: $($anchor.attr('href')).position().left
            }, 2000, function(){
                nextCount();  
    hrefData++;
    $('.qAnswers a:first').attr('href', hrefURL + hrefData); <!-- I need to fire this again for the hrefData++; to be applied  -->

            });

} 
```

# jquery - 如何使用 jQuery 将选中的属性添加到单选按钮 nth-child？

> ID：15333785
> 
> 赞同：3
> 
> 时间：2013-03-11T08:08:09.883
> 
> 标签：jquery, radio-button

我有一组单选按钮，我想将选中的属性添加到其中一个。这是我的代码：

```
<input type="radio" name="radioButton" id="rd1">
<input type="radio" name="radioButton" id="rd2">
<input type="radio" name="radioButton" id="rd3">
<input type="radio" name="radioButton" id="rd4">
<input type="radio" name="radioButton" id="rd5">

<script>
   $('input[name=slider]:nth-child(3)').prop('checked', true);
</script> 
```

我用 .attr('checked', 'checked') 测试了脚本。但脚本无法正常工作。我怎么了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T08:09:22.427

尝试：

```
$('input[name=radioButton]:eq(2)').prop('checked', true); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-11T08:11:01.143

```
$('input[name=radioButton]:nth-child(3)').attr('checked', true); 
```

或者

```
$('input[name=radioButton]:nth-child(3)').attr('checked', 'checked'); 
```

**这是[jsFiddle](http://jsfiddle.net/pmatseykanets/dxP4f/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:12:15.247

尝试这个：

```
<script>
   $('input[name=radioButton]:nth-child(3)').attr('checked', 'checked');
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T08:23:43.713

试试这个代码。使用 attr 而不是 prop。

```
 $('input[name=slider]:nth-child(3)').attr('checked', true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-13T11:36:02.160

```
<input type="radio" name="radioButton" value="hello" id="rd1"> 
```

您可以添加一个**value**属性并使用它：

$('input[name="radioButton"][ **value** ="hello"]').prop('checked', true);

注意：如果您在这些单选按钮之前有多个具有不同组的单选按钮，“nth-child”可能会导致某些浏览器出现问题。

# css - 当前的 Google 主页 - 为什么使用 css sprite 而不是单个图像？

> ID：15333792
> 
> 赞同：2
> 
> 时间：2013-03-11T08:09:00.387
> 
> 标签：css, css-sprites

看看此时正在显示的 Google 主页。下面提供了一个屏幕截图。

![谷歌主页](../Images/02ddf1d7235d0ba9ef117e8b362fa5b8.png)

Google 没有将其用作单个图像，而是使用 css sprite。精灵图像

提供如下（尺寸已更改）：

![在此处输入图像描述](../Images/7a45dff46919716fe1b181705df44f76.png)

问题是为什么使用 css sprite 而不是单个图像？如果使用单个图像，那么 HTTP 请求的数量是否与此 css sprite 案例中的相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:11:15.367

单个图像不允许在不同区域出现（不同）悬停效果。

或者您必须为每个动画加载相同大小的图像。通过使用精灵，您只需加载一次图像，所有动画都使用该数据运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:13:43.747

`CSS`sprites 是一种减少对站点引用的资源的`HTTP`请求数量的方法。**图像**在定义的 X 和 Y 坐标处组合成一张较大的图像。`image`

 **将此生成的图像分配给相关页面元素后，`background-position`CSS 属性可用于将可见区域移动到所需的组件图像。**

# vb.net - 刷新数据表的内容以从数据库中获取新数据

> ID：15333794
> 
> 赞同：0
> 
> 时间：2013-03-11T08:09:09.603
> 
> 标签：vb.net, datatable, dataset

我想知道如何做到这一点？我正在从数据库中获取数据，并通过 DataAdapter 我正在更新数据表中的值。所以现在如果有任何新数据输入到数据库中，我该如何刷新或更新新数据到数据表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:30:02.283

`DataTable`再次填充/的最简单方法`DataSet`。A`DataTable`是数据的离线、内存中表示，因此它不知道底层数据何时更改。

但是，您可以使用[`SqlDependency`-class](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)。看看[这里](http://www.fantabooks.net/lib/O%27Reilly%20-%20ADO%20NET%203%205%20Cookbook%202nd%20Edition%20Mar%202008/final/automatically_refreshing_a_datatable_whe.php)。

# java - Android：在 JAR 中添加资源文件

> ID：15333795
> 
> 赞同：3
> 
> 时间：2013-03-11T08:09:11.380
> 
> 标签：java, android, android-layout, android-intent, android-widget

我计划在 android 中创建一个 SDK，这意味着将我的类文件和资源（布局）共享给另一个需要它们的应用程序。如果我将我的应用程序导出为 JAR，它不包括资源文件和 R.class。我知道目前 Android 不支持通过 JAR 打包资源文件，但是我在网上搜索并找到了一种解决方案，如果使用源代码编译我们的资源文件意味着我们可以在其他应用程序中访问该资源。

因此，出于这个原因，我通过以下方式做到了：

1.  将所有 res 文件夹内容复制到我的源文件夹中

    *   src ->com.mypackege -> res--->这里我放了我的 res 文件夹
    *   最后我的 src 文件夹看起来像

    *   源代码

        > com.mypackage

        ```
         >myfile.java
             drawable-hdpi
             drawable-ldpi
             drawable-mdpi
             drawable-xhdpi
             com.mypackage.drawable
             com.mypackage.layout
             com.mypackage.menu
             com.mypackage.values 
        ```

2.  我构建了我的项目，我在我的 bin 中获得了所有类文件，包括资源和 r.class

3.  然后我通过 jar -cvf mysample.jar com/mypackage/* 手动创建 jar

4.  最后的 jar 在 mypackage 中包含我项目的所有类和资源。

然后我添加`mysample.jar`到另一个应用程序中说`testapp`，这里我将 JAR 放在资产文件夹中（因为布局）并添加到构建路径。而且我还配置了构建路径

在这个应用程序中，我调用了`myfile.class`从`mysample.jar`该 JAR 加载布局所需的方法。

问题在这里它看不到 JAR 文件下的资源它只看到当前项目 res 文件夹中的资源，虽然`NULL pointer Exception`

但它从 JAR 文件中调用 R.java。广告我还尝试将 xmlns:custom="http://schemas.android.com/apk/res-auto" 放入我的清单文件中，但它也不起作用。我希望我能准确地结束这个问题，它可能是一个资源映射问题。你有什么想法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:30:57.287

您不能将资源存储在 jar 中。这是可能的，但它很棘手，所以现在 Android 只提供 Android 库。否则，您可以单独使用已编译的源代码和资源（通过向您的库提供资源 ID）

# c++ - 如何使用 Qwt3D::Label？

> ID：15333799
> 
> 赞同：1
> 
> 时间：2013-03-11T08:09:17.563
> 
> 标签：c++, qt, opengl, label, qwt

我想知道，如何使用`Qwt3D::Label`，我的意思是，互联网上没有任何文档或示例。我想显示我的标签，如固定位置的情节标题。我分析了 qwtplot3d 源，它如何显示标题并编写了以下代码：

```
Qwt3D::Label m_Label;
m_Label.setString("Some text here");
m_Label.setRelPosition(Qwt3D::Tuple(0.7, 0.95), Qwt3D::TopCenter);
m_Label.draw(); 
```

但它总是在不同的位置显示我的标签，这取决于缩放。那么如何在屏幕的固定位置显示标签呢？

# node.js - NodeJS+CompoundJS 中的助手

> ID：15333805
> 
> 赞同：2
> 
> 时间：2013-03-11T08:09:41.083
> 
> 标签：node.js, helper, scaffolding, railway.js, compoundjs

我刚刚开始使用 CompoundJs，还有很多东西需要学习。

我只是想弄清楚 Helpers 在 NodeJS+CompoundJS 中是如何工作的，从我目前看到的情况来看，Helper 旨在与 Views 一起使用，而不是与 Controllers 一起使用。但是，我想创建一个简单的函数来验证参数中给出的用户输入（检查是否定义了某些参数，并可选择检查它们的值是否有效）。谁能向我解释实现这一点的最佳方法是什么？请记住，我希望在许多不同的控制器中使用它，因此它应该是全局可用的。我必须使用自定义验证器或助手吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T02:25:34.167

验证可能更适合模型。您还可以在控制器中进行较低级别的验证。帮助程序只是为将全局变量暴露给视图模板而设计的。

# mysql - 如何使用 case 语句来确定要左连接的表

> ID：15333807
> 
> 赞同：0
> 
> 时间：2013-03-11T08:09:52.220
> 
> 标签：mysql

如何使用 case 语句来确定要离开哪个表连接到这个 sql 语句：

```
SELECT c.dentist_id,
       c.pack_id,
       c.check_id,
       sql1.vendor_no ,
       p.pack_trans_id,
       r.lot_no,
       IF(ml.payment_type='Prepay','Pre-Paying','Post-Paying') payment_type,
       ml.image_path,
       ml.metal_id,
       tp.total_paid_refiner,
       sql1.percentage,
       sql1.contact_percentage,
       sql1.agent_percentage,
       c.agent_dentist,
       c.check_amt,
       c.check_image,
       c.check_date_sent,
       c.check_no,
       c.check_clear_date,
       ml.spot_gold_price,
       ml.total_weight,
       ml.estimated_price,
       ml.expect_more,
       ml.how_long_acquire,
       sa.full_name,
       pd.company_name,
       pd.phone_no,
       pd.email
FROM tbl_check AS c
LEFT JOIN tbl_pack_list AS p ON p.pack_id=c.pack_id
LEFT JOIN tbl_pack_list_details AS pd ON pd.pack_id=c.pack_id
LEFT JOIN
  (SELECT vendor_no,
          paying_contact,
          contact_percentage,
          percentage,
          pay_to,
          agent_percentage,
          dentist_id did2,
          sales_agent_id
   FROM tbl_mst_dentist
   GROUP BY dentist_id) sql1 ON sql1.did2=c.dentist_id
LEFT JOIN tbl_refining r ON r.pack_id=c.pack_id
LEFT JOIN tbl_metals_list ml ON ml.pack_id=c.pack_id
LEFT JOIN tbl_payment tp ON tp.pack_id=c.pack_id
LEFT JOIN tbl_sales_agent sa ON sa.sales_agent_id=sql1.sales_agent_id
LEFT JOIN
  (SELECT * CASE c.agent_dentist WHEN 'a' THEN
     (SELECT sa.* ,
             sm.state_code
      FROM tbl_sales_agent AS sa,
           tbl_mst_state AS sm
      WHERE sa.sales_agent_id = c.sale_agent_id
        AND sa.state=sm.state_name) ELSE
     (SELECT *
      FROM tbl_mst_dentist
      WHERE dentist_id = c.dentist_id))
WHERE 1
  AND c.paying_percent !=0
ORDER BY p.pack_trans_id DESC 
```

# java - 合并两个相对文件 URL

> ID：15333808
> 
> 赞同：0
> 
> 时间：2013-03-11T08:09:52.977
> 
> 标签：java, string, url, path

假设我有两条路径，第一条 can look like`folder/`和第二条 like `/anotherFolder/image.png`。我想以某种自动方式合并这两个路径，并允许用户省略第一个字符串中的最后一个斜杠和第二个字符串中的第一个斜杠。所以所有这些

`folder/`+`/anotherFolder/image.png`

`folder`+`anotherFolder/image.png`

`folder`+`/anotherFolder/image.png`

应该给我`folder/anotherFolder/image.png`

我需要在我的一个项目中合并两个属性，并且我希望它尽可能虚拟:) 那么 URL 类是否有一些技巧，或者我是否必须使用字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T08:16:26.730

您可以使用[java.io.File](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#File%28java.io.File,%20java.lang.String%29)执行此操作，通过使用以 File 和 String 作为参数的构造函数，将 String 解释为 File 的相对路径。

或者使用[java.net.URL](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#URL%28java.net.URL,%20java.lang.String%29)，您可以将 URL 和 String 发送到构造函数，构造函数会将 URL 解释为 String 参数的上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:20:25.100

我实际上是`FileUtils.getFile()`从 Apache Commons IO 使用的，但 Rolf 的解决方案也很有效。

# c# - 我们可以在不实际在 asp.net 中创建子域的情况下创建子域 URL 吗？

> ID：15333809
> 
> 赞同：1
> 
> 时间：2013-03-11T08:10:01.423
> 
> 标签：c#, asp.net, url-rewriting, subdomain, urlrewriter.net

这是否可以在不实际创建子域的情况下模拟 Asp.net 中的 URL。这是否可以使用[URLRewriter](http://urlrewriter.net/)。我只能使用 URLRewriter。我正在使用 asp.net 4.0 和 IIS 6。所以我不会使用 IIS 7 的 URL 重写扩展。

例如：网址：**example.com ?value=somecode**

并重写为：**somecode.example.com**

我刚刚浏览了代码项目的[这个](http://www.codeproject.com/Tips/85912/Sub-Domain-Implementation-using-Urlrewriter-NET-AS)链接。我只是不知道如何在项目中实施。

任何帮助表示赞赏..!!!

**编辑 ：**

根据[胡安施特劳斯的回答](https://stackoverflow.com/questions/15333809/can-we-create-subdomain-urls-without-actually-creating-a-subdomain-in-asp-net/15334044?noredirect=1#15334044)。我现在正在更新我的问题。是否可以使用**IIS 7**。没有实际创建子域。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:28:38.737

没有。您的服务器不会监听到**somecode.example.com**的请求。如果您想做类似的事情，您将不得不在 IIS 级别而不是站点级别上编写脚本。还需要考虑 DHCP 配置。

您可以做的是将 example.com?value=somecode 的请求**路由**到**example.com/somecode**

# javascript - 打印行号

> ID：15333810
> 
> 赞同：0
> 
> 时间：2013-03-11T08:10:04.287
> 
> 标签：javascript, numbers, line

对于调试，我希望能够打印消息，并在前面加上行号。不，我不想参与成熟的调试器。

我已经定义了一个全局常量`ln="thisline = new Error().lineNumber";`

我定义了一个

```
function println(msg) { 
    document.write("<br>at " + thisline + ":" + msg);
} 
```

然后在我想调试的行中，我写了一行：

```
eval(ln);
println("msg"); 
```

问题是它`thisline`通常不会在打印之前得到更新，所以我得到了一个不变的行号。我打印的唯一行号永远不会超过 3 个。

仅仅是评估太慢了吗？有什么方法可以等到它完成吗？我尝试了超时：

```
const ln="setTimeout(function() { 
    thisline = new Error().lineNumber
}, 1000);" 
```

但全局`thisline`从未设置。

还是我可以提出的错误数量有一些系统限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:26:16.290

如果您在 IE 中运行应用程序，请按 F12 键（开发人员工具），将打开另一个弹出窗口。

单击脚本选项卡，然后单击开始调试按钮。

页面将刷新，您可以开始执行操作。

出现任何错误时，调试器会自动将您带到错误行号。你也可以放置断点。

否则你可以看看下面的帖子：

[抛出异常时如何获取 Javascript 堆栈跟踪？](https://stackoverflow.com/questions/591857/how-can-i-get-a-javascript-stack-trace-when-i-throw-an-exception)

# google-places-api - 德国地铁站的 Google 地方信息类型

> ID：15333815
> 
> 赞同：0
> 
> 时间：2013-03-11T08:10:24.730
> 
> 标签：google-places-api

Hej在那里，

我对 Google Places API 和定义的类型有一个小问题。我想获得德国城市的所有地铁站。在德国，您称它们为 U-Bahn（地铁）和 S-Bahn（主要由德国铁路提供）。不幸的是，Places API 为类型 metro_station 和 train_station 仅返回德国铁路的地点。地铁根本不回来。

有谁知道如何从places api中获取这些类型的景点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T08:23:04.467

我们为此使用了 OpenStreet Map。在那里您可以使用铁路属性过滤 POI：[http ://wiki.openstreetmap.org/wiki/DE:Key:railway](http://wiki.openstreetmap.org/wiki/DE:Key:railway)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-10T12:42:52.613

这是一个老问题，但我刚刚发现您可以使用 type= light_rail_station。

我希望这可以帮助其他有相同问题的搜索者。

# .net - 如何将引用的对象展平为引用者上的两个 json.net 属性？

> ID：15333820
> 
> 赞同：6
> 
> 时间：2013-03-11T08:10:42.740
> 
> 标签：.net, serialization, json.net

考虑以下类：

```
public class User
{
  public virtual int Id {get;set;}
  public virtual string Name {get;set;}
  public virtual User Superior {get;set;}
} 
```

我的目标是使用 newtonsofts json.net 将其序列化为 json，如下所示：

```
{
  Id: 101,
  Name: 'Mithon',
  SuperiorId: 100,
  SuperiorName: 'TheMan'
} 
```

我为什么要这样做？因为我想使用 Json 作为我的 DTO，而不生成动态对象的中间层。生成 DTO 应该按照约定动态完成，而不是明确地，恕我直言。我知道有些人可能会强烈反对这一点，但讨论我的方法并不是重点。我只是想知道是否以及如何做到这一点。

挑战在于，使用`JsonPropertyAttribute`高级属性只会产生一个属性作为输出，而我需要两个。如果我使用 a`JsonObjectAttribute`我将获得一个嵌套属性，并且顶级用户也被展平会遇到麻烦。

幸运的是，在 json.net 库中似乎有足够的受保护和/或公共属性和方法，我可以扩展一些东西以获得所需的结果。那么问题是我应该从哪些类和方法开始到达我想去的地方？从 DefaultContractResolver 派生并覆盖 GetProperties 方法是好地方，还是我应该寻找其他地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:26:49.327

简短的回答是肯定的，这将是合适的起点。这是我最终得到的（现在）：

```
public class MyContractResolver : DefaultContractResolver
{
    protected override IList<JsonProperty> CreateProperties(Type type, MemberSerialization memberSerialization)
    {
        var properties = base.CreateProperties(type, memberSerialization);

        foreach (var pi in type.GetProperties().Where(pi => typeof (Entity).IsAssignableFrom(pi.DeclaringType) && Attribute.IsDefined((MemberInfo) pi, typeof(IdNameMemberAttribute))))
        {
            properties.Add(CreateReferenceProperty(pi, Reflect.GetProperty<Entity>(e => e.Id)));
            properties.Add(CreateReferenceProperty(pi, Reflect.GetProperty<Entity>(e => e.Name)));
        }

        return properties;
    }

    private JsonProperty CreateReferenceProperty(PropertyInfo reference, PropertyInfo referenceMember)
    {
        var jsonProperty = base.CreateProperty(reference, MemberSerialization.OptOut);
        jsonProperty.PropertyName += referenceMember.Name;
        jsonProperty.ValueProvider = new ReferencedValueProvider(reference, referenceMember);
        jsonProperty.Writable = false;

        return jsonProperty;
    }
} 
```

`IdNameMemberAttribute`只是一个空属性，我用它来注释我想要序列化的引用属性。重要的是，我不会使用 Json.NET 将识别并用于生成 JsonProperty 的任何内容对其进行注释。这样我就不会从我的 CreateProperties 中得到一个重复的 JsonProperty。

或者，我可以从 DataMemberAttribute 派生并查找、修改和克隆 JsonProperty 来表示我的`Id`and `Name`。

然后，对于我的 asp.net web api，我将此 MyContractResolver 设置为 JsonFormatter.SerializerSettings 的 ContractResolver。

所以这让我为序列化做好了准备。对于反序列化，我有一个自定义 ChangeSet 对象，我在其中存储 PropertyInfo 和对象。然后，在反序列化期间，我确保保留 Id，然后从我的数据存储中解析它们，在我的情况下，使用自定义 ActionFilter 访问数据存储会话。

这是我的序列化的精髓：

```
var jsonSource = streamReader.ReadToEnd();
var deserializedObject = JsonConvert.DeserializeObject(jsonSource, type, SerializerSettings);
var changeSet = deserializedObject as PropertyChangeSet;
if (changeSet != null)
{
    var jsonChange = JObject.Parse(jsonSource)["Change"].Cast<JProperty>().ToArray();

    IDictionary<string, int> references = jsonChange.Where(IsReferenceId).ToDictionary(t => t.Name.Substring(0, t.Name.Length - 2), t => t.Value.ToObject<int>());
    changeSet.References = references;

    var properties = jsonChange.Where(jp => !IsReferenceId(jp)).Select(t => t.Name).ToList();
    changeSet.Primitives = properties;
} 
```

而且，我的干净实体和动态序列化的所有血腥细节都被封装了，遗憾的是在两个地方，但由于我不想从序列化程序访问我的数据源，所以没有帮助。

# vb.net - VB.NET：每购买 100 美元，变量的值增加 1

> ID：15333822
> 
> 赞同：1
> 
> 时间：2013-03-11T08:11:00.817
> 
> 标签：vb.net

我编写了一个代码来帮助注册商完成他们的工作。他们有一个促销活动，每购买 100 美元就会在客户的帐户中添加一个积分。现在，我不知道如何为此编写代码。例子：

如果变量`x is 189`的值将在 y 变量中添加一个点，因此

```
y = 1 
```

现在，当`189 increases to 200`一个点将再次添加到 y 中时，所以

```
y = 2 
```

现在，等等等等。

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:28:07.483

最简单的方法是

```
y = x \ 100 
```

[VB.NET 中的除法](https://stackoverflow.com/questions/4341611/division-in-vb-net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:18:06.400

您可以使用[`Math.Floor`](http://msdn.microsoft.com/en-us/library/system.math.floor%28v=vs.80%29.aspx)

```
Dim x As Int32 = 189
Dim y As Int32 = CInt(Math.Floor(x / 100)) 
```

[**演示**](http://ideone.com/CF0uuE)

> 返回小于或等于指定数字的最大整数。

# sql - 根据当前系统日期对数据进行排序

> ID：15333824
> 
> 赞同：4
> 
> 时间：2013-03-11T08:11:02.267
> 
> 标签：sql, oracle

我被困在一个查询上，

在哪里我有 52 周的数据，我可以根据 sysdate 通过获取周数并与数据周数进行比较来安排这些数据。现在我想做的是如果当前的周数是 10 我想按照 sysdate 周数 week10,week9,week8 ....week11 的降序排列所有周，

用这个查询

```
select "Weekly","Quarter","SALES","Monthly",week_number from fiscal_calendar
where week_number <= TO_CHAR(TO_DATE(sysdate,'DD-mon-YYYY'),'iw') 
order by  week_number desc; 
```

我能够将数据排序到第 1 周，但我想继续序列，比如在第 11 周结束，所以我做错了什么，请指教

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T08:20:32.823

如果我理解正确你可以试试

```
SELECT * FROM
(SELECT "Weekly","Quarter","SALES","Monthly",week_number FROM fiscal_calendar
  WHERE week_number <= TO_NUMBER(TO_CHAR(SYSDATE,'IW')) 
  ORDER BY  week_number desc) t1
UNION ALL
SELECT * FROM 
(SELECT "Weekly","Quarter","SALES","Monthly",week_number FROM fiscal_calendar
  WHERE week_number > TO_NUMBER(TO_CHAR(SYSDATE,'IW'))
  ORDER BY  week_number) t2 
```

**这是简化的[SQLFiddle 示例](http://sqlfiddle.com/#!4/db2f0/2)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:02:32.507

我们可以在 order by 子句中使用`case()`(or ) ...`decode()`

```
order by case 
           when week_number = to_number(to_char(sysdate, 'WW')) then 1
           when week_number < to_number(to_char(sysdate, 'WW')) then 2
           when week_number > to_number(to_char(sysdate, 'WW')) then 3
         end ASC
         , week_number DESC 
```

# java - 发生错误。请查看日志文件 - eclipse juno

> ID：15333825
> 
> 赞同：49
> 
> 时间：2013-03-11T08:11:03.437
> 
> 标签：java, eclipse

每当我启动 Eclipse Juno 时，它都会给我一个错误提示：

> 发生错误。请查看日志文件：
> 
> C:\Program Files\eclipse\configuration\1362989254411.log。

有些网站说卸载jdk并重新安装它。我这样做了，但是没有用。我认为这是因为在他们的网站上，工作区中发生了错误。我的位于计算机中的程序文​​件文件夹中。

它是在更新后发生的。我是不是应该降级。如果是这样，怎么做？如果我不能降级，我该怎么办？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-03-11T08:13:52.810

尝试从工作区中删除以下文件。

```
YOUR_WORKSPACE/.metadata/.plugins/org.eclipse.core.resources/.snap 
```

或者尝试从控制台启动它。

```
C:\path\to\eclipse\eclipse -clean 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2014-07-24T09:58:59.010

解决了 ：

1.  退出日食
2.  转到您的工作区并删除**.metadata**文件夹
3.  现在使用相同的 Workspace 路径打开 Eclipse（您将看到一个新的工作区）
4.  现在右键单击**import** > **General** > **Existing Projects into Workspace** > **next** > **Select root directory** ->**浏览到当前工作区，然后按 OK**。
5.  现在您将看到您的所有项目，然后再次单击“确定”。
6.  瞧，具有相同工作区的相同项目没有迁移或参考问题。

在尝试了其他所有方法之后，这解决了我的问题。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-10-16T11:37:08.597

从工作区中删除 .metadata 文件夹并启动 Eclipse，现在再次将所有项目导入同一工作区，这对我有用。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-03-05T07:27:49.820

在我的 mac 机器上，我检查了我是否安装了两个 java 版本。我得到了这个错误。因为我一次安装了两个java。

用户 -> 库 -> Java -> JavaVirtualMachines -> 版本 1.8.0 和版本 11.0.1 已安装。

我删除了版本 11.0.1。现在它工作正常。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-12-28T10:58:09.487

我删除了整个`.metadata`文件夹，它对我有用。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-08-13T09:10:11.887

The best way is to delete all the `*.snap` files from `/.metadata/.plugins/`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-03-19T05:32:00.200

这是我为解决此问题所做的工作：

*   我删除了`workspace/.metadata`
*   以管理员身份运行eclipse。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-10-07T05:44:48.637

在我的情况下，我的 JAVA_HOME 在将 JAVA_HOME 指向 jdk8 后被指向 jdk9 解决了我的问题。希望它可以帮助某人。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-06-21T05:39:55.950

我找到了解决方案。我已经安装了 2 个版本的 jre sdk 1.3 和 jre7，所以我卸载了旧版本的 sdk1.3，然后它就可以工作了。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-09-20T13:26:58.303

```
C:\path\to\eclipse\eclipse -clean 
```

然后将工作项目目录更改为不同的目录。它应该在那之后工作。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-12-25T11:59:50.087

这条指令对我来说 100% 有效：

1.  重命名 Eclipse 工作区名称
2.  启动 Eclipse（它将在空白工作区成功启动）
3.  退出并将工作区名称更改为以前的状态（如果要求替换某些文件，请按否）
4.  再次启动 Eclipse 并在当前工作区重新导入项目

享受！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-06-19T17:51:36.740

对我来说，这归结为一个锁定/权限错误

**（Eclipse IDE 的路径）\configuration\org.eclipse.osgi.manager.fileTableLock**

看[这里](https://bugs.eclipse.org/bugs/show_bug.cgi?id=294625)

Spring Tool Suite 4（Windows Server 2016 的 64 位）

版本：4.2.2.RELEASE 构建 ID：201905232009

基于 Eclipse

版本：2.2.500.v20190307-0500 内部版本号：I20190307-0500

不会启动，并出现一个弹出对话框说：

> 发生启动错误，请参阅日志文件 null

（从文件夹（Eclipse IDE 的路径）\configuration 中的最新文本*日志*文件中可以看出这一点）

```
!ENTRY org.eclipse.osgi 4 0 
2019-06-19 18:41:10.408
!MESSAGE Error reading configuration: C:\opt\sts-4.2.2.RELEASE\configuration\org.eclipse.osgi\.manager\.fileTableLock (Access is denied)
!STACK 0
java.io.FileNotFoundException: C:\opt\sts-4.2.2.RELEASE\configuration\org.eclipse.osgi\.manager\.fileTableLock (Access is denied)
... 
```

我不得不去通过文件资源管理器（完全访问）调整权限。

IDE 似乎有一段时间没有做任何事情。

Spring Tool Suite（基于 Eclipse）的启动画面最终消失了，IDE 再次启动。

现在一切都恢复正常了。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-10-09T11:40:43.287

听起来很简单，但只需删除/卸载 eclipse 并重新安装即可。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-02-19T17:41:16.687

当前的答案都不适合我。在 CentOS 上，我必须从主目录中删除 .eclipse 文件夹。然后eclipse启动就好了！

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-12-03T06:22:39.767

我在打开 Eclipse 时遇到了同样的错误。为了解决这个问题，我检查了元数据文件夹中的日志文件。我发现Java的版本不匹配。所以我已经更改了我的**eclipse ini**文件中的虚拟机。

**-vm /opt/jdk1.8.0_191/jre/bin**

希望这也有助于解决您的问题。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-07-14T13:05:55.500

当我使用基于 Eclipse 构建的德州仪器的 Code Composer Studio 时，我遇到了同样的错误。当我将 Workspace 文件夹更改为位于 Google Drive 文件夹中时，就发生了这种情况。从 YOUR_WORKSPACE/.metadata/.plugins/org.eclipse.core.resources/ 中删除文件对我不起作用。

以下对我有用：

1.  备份原始 Workspace 文件夹
2.  删除原始 Workspace（从 Google Drive 文件夹中）
3.  启动 Eclipse（现在可以正常工作）
4.  将 Workspace 备份恢复到非 Google Drive 文件夹

**但是，不建议**删除和恢复 Workspace 文件夹，因为它可能会带来其他并发症。但我很绝望。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-03-01T08:56:58.117

`eclipse`删除并再次安装后，我遇到了同样的错误。

删除`.metadata`目录并运行`eclipse -clean` **对我不起作用**，但以下对我有用：

```
sudo cp /usr/lib/jni/libswt-*3740.so ~/.swt/lib/linux/x86_64/ 
```

如果您有一个基于 32 位的系统，请执行以下操作：

```
sudo cp /usr/lib/jni/libswt-*3740.so ~/.swt/lib/linux/x86/ 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-10-12T14:24:05.467

我安装了 2 个版本的 JDK - JDK 7 和 JDK 8。最初，即使两个版本都存在并且能够使用 Git 和 Gradle 以及 Spring Boot 应用程序，它也能正常工作。

然后在系统重新启动/睡眠后，没有出现工作区提示。

现在卸载 JDK 7 并提示输入工作区。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-12-19T13:35:51.347

当我去`WorkSpace\.metadata\.plugins\org.eclipse.e4.workbench`然后删除 *.xmi 文件时，它对我有用。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-03-22T16:38:57.043

在我的情况下，错误是由于 Java 14 引起的，它不是 LTS，将其降级为 java 8 并且它可以工作。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-09-28T10:22:57.010

我的操作系统架构是 64 位的，所以下载了 Eclipse Oxygen 64 位版本并得到了这个错误。尝试了此处发布的各种解决方案，但没有帮助。然后下载了 Eclipse Oxygen 32 位版本，它运行良好。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-10-07T11:25:57.290

对我来说，问题是我在安装 eclipse 之前安装了 Java sdk 1.9。删除它并安装 Java sdk 1.8 来修复它。另外，如果您使用的是mac，请尝试

```
export JAVA_HOME=$(/usr/libexec/java_home) 
```

接着

```
echo $JAVA_HOME 
```

你应该得到类似的东西

```
/Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-02-08T17:09:55.473

在这种情况下，删除元数据文件夹可能不起作用。或 eclipse -clean 命令。或者重新安装 eclipse 可能无法解决这个问题。

相反，请尝试删除您机器中可能拥有的其他 java 版本。

检查你现在使用这个：

```
/usr/libexec/java_home -V 
```

按照以下命令删除您不想要的其他 java 版本：

```
sudo rm -rf /System/Library/Java/JavaVirtualMachines/java-version.jdk 
```

这应该可以解决您的问题。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-12-20T08:03:09.390

对于 MacOS 上的 STS，我按照以下步骤操作：

1.  从终端转到 STS 目录：

    cd /Users/karan.verma/Documents/sts-bundle/STS.app/Contents/MacOS

2.  启动 STS

    ./STS

STS 启动了，但我所有导入的项目都被删除了。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-07-21T12:29:43.480

就我而言，我不想删除 Eclipse，因为在企业界我们无法控制一切。从工作区中删除一些文件`.matadata`也无济于事。因此，我通过反复试验发现的以下技巧对我来说非常有效：

走这条路： `C:\....\eclipse-Luna\configuration\org.eclipse.core.runtime\`

现在完全删除`.manager`。

再次启动eclipse，woilaa..它将正常运行。

[就我而言，我使用 eclipse luna。我曾经在eclipse打开时突然关闭了PC。然后eclipse无法在下一次系统重启时启动。所以请记住正确关闭eclipse。`:)`]

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2018-01-27T22:54:45.540

原因可能是您正在尝试将`old version`Eclipse 用于新版本的 Java。我已经下载了最新的 Eclipse（即 Oxygen），它对我有用。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-09-04T00:07:19.413

重命名文件夹后发生在我身上。我尝试删除我的工作区或 .metadata 或 .manager 文件夹，但不起作用。然后我再次下载程序并选择完整下载。它是 337.511 KB 和 zip 文件。但我把它放在 Flashdisk 中。我打开压缩文件，然后运行 ​​eclipse.exe。这行得通。然后我导入我所有的工作文件。它会再次显示在 Project Explorer 中。我关闭日食。然后我点击桌面上的eclipse图标（我没有删除程序）。现在它工作正常。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2019-02-09T17:26:07.073

问题是由于多个 Eclipse 版本的可用性。我尝试删除这两个安装并开始全新安装并且它有效。此外，请确保安装后指向新的工作区。

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2019-10-03T14:35:47.603

如果没有任何效果，请尝试卸载然后重新安装 Eclipse。这就是我在尝试了该论坛上建议的所有内容后刚刚解决此问题的方法。

# excel - 如何使用 Excel VBA 根据条件对数据透视项目数据求和

> ID：15333829
> 
> 赞同：0
> 
> 时间：2013-03-11T08:11:11.237
> 
> 标签：excel, pivot-table

```
ParentName 指定场外现场总数
ASP ASE 1 1
              东南 2 2 4
              意大利 3 7 10
              评估 **2** 2 4
平均售价总计 8 11 19
ESP ITA 15 15
              总管 2 2
              评估 1 1
ESP 总计 18 18
IS-TP ASE 7 7
              屁股 **19** 19
              瑞典 32 32
              巴 1 3 4
              意大利 24 11 35
IS-TP 总计 83 14 97
总计 109 25 134

```

***在该数据透视表中，可以根据数据透视表对带有星号的单元格值进行求和。如何获取枢轴数据并根据指定对值求和。即，如果指定是 Asst.system 工程师并且父 IOU 名称是“Is-Telecom-parent”和 Assurance Services-1Parent，然后使用 VBA 获取异地总数并在 excel 中将它们相加。***

**提供VBA代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:18:18.700

试试这个代码：

```
Sub SumSelectedPivotElements()
    Dim piv As PivotTable
    Dim res As Double

    Set piv = Sheets("YourSheet").PivotTables(1) 'Replace with correct sheetname

    'Replace "Location" with your column field name
    res = piv.GetPivotData("Name of your data field", "ParentName", "IS-TP", "Designation", "AssSE", "Location", "offsite")
    res = res + piv.GetPivotData("Name of your data field", "ParentName", "IS-TP", "Designation", "AssSE", "Location", "offsite")
    Debug.Print "The result is: ", res
End Sub 
```

# paypal - PayPal 收取运费税（不仅仅是物品）

> ID：15333833
> 
> 赞同：3
> 
> 时间：2013-03-11T08:11:20.423
> 
> 标签：paypal, paypal-sandbox

我正在使用效果很好的 PayPal url 方法，但是当我尝试收取税款时，它似乎只将税款应用于所有商品的总价值，而我想对总商品 + 运费收取税款，即

商品 $100.00，运费 $20.00，小计 $120.00，税 (10%) $12.00，总计 $132.00

这就是我所拥有的 [https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_cart&business=xxxxxxxxxxxxxx_biz@gmail.com&button_subtype=services&upload=1&no_note=1¤cy_code=USD&rm=1&item_name_1=Product1&amount_1=200.00&quantity_1=2&item_name_2= Product2&amount_2=200.00&quantity_2=22&shipping_2=6&tax_1=10&tax_2=10&return=http://staging.xxxx.com/store/success.aspx&cancel_return=http://staging.xxxx.com/store/failed.aspx](https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_cart&business=xxxxxxxxxxxxxx_biz@gmail.com&button_subtype=services&upload=1&no_note=1&currency_code=USD&rm=1&item_name_1=Product1&amount_1=200.00&quantity_1=2&item_name_2=Product2&amount_2=200.00&quantity_2=22&shipping_2=6&tax_1=10&tax_2=10&return=http://staging.xxxx.com/store/success.aspx&cancel_return=http://staging.xxxx.com/store/failed.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:14:40.037

我对税收变量进行了更改以应用税率而不是金额。目前 PayPal 不收取包括运费在内的税费，因为服务通常不征税。

如果这是一项要求，我建议在将帖子发送到 PayPal 之前计算您网站上的总税额。可以在 tax_1 字段中输入该值。我在第二篇文章中展示了一个例子。

```
https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_cart
&business=xxxxxxxxxxxxxx_biz@gmail.com
&button_subtype=services
&upload=1
&no_note=1
&currency_code=USD
&rm=1
&item_name_1=Product1
&amount_1=200.00
&quantity_1=2
&item_name_2=Product2
&amount_2=200.00
&quantity_2=2
&shipping_2=6
&tax_rate_1=10
&tax_rate_2=10
&return=http://staging.xxxx.com/store/success.aspx
&cancel_return=http://staging.xxxx.com/store/failed.aspx 
```

这是一个计算金额的示例。请注意，您只发送一个税额，而不是每个项目的税额。PayPal 不会向客户显示分项税额，因此不会对客户产生影响。

```
https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_cart
&business=xxxxxxxxxxxxxx_biz@gmail.com
&button_subtype=services
&upload=1
&no_note=1
&currency_code=USD
&rm=1
&item_name_1=Product1
&amount_1=200.00
&quantity_1=2
&item_name_2=Product2
&amount_2=200.00
&quantity_2=2
&shipping_2=6
&tax_1=10
&return=http://staging.xxxx.com/store/success.aspx
&cancel_return=http://staging.xxxx.com/store/failed.aspx 
```

# android - CreateNdefMessageCallback 与 ContentProvider 权限冲突

> ID：15333834
> 
> 赞同：1
> 
> 时间：2013-03-11T08:11:20.823
> 
> 标签：android, nfc

我为我们公司的另一个应用程序编写了一个程序提供程序。提供者需要获得访问数据的权限。

我们还有一个接口需要使用 NFC 将 json 数据发送到其他设备。

当我们在**CreateNdefMessageCallback.createNdefMessage**中访问提供者时

```
 @Override
    public NdefMessage createNdefMessage(NfcEvent event) {
        Context context = this;

        ContentResolver resolver = context.getContentResolver();
        Cursor cursor = resolver.query(Uri.parse("content://demo/data-lists"),
                null,
                null,
                null,
                null);
        // FIXME Strange: Will never goes here ...
        mMessage = getMessage(cursor);

        NdefMessage msg = new NdefMessage(
                new NdefRecord[] {
                        createMimeRecord(mMimeType, mMessage.getBytes())
                });
        return msg;
    } 
```

很奇怪，在删除权限之前我们永远不会得到光标。

## 权限清除

```
<permission
    android:name="com.client.permission.MY_PERMISSION"
    android:label="@string/provider_label"
    android:protectionLevel="signatureOrSystem" /> 
```

## 请求许可

```
<uses-permission android:name="com.client.permission.MY_PERMISSION" /> 
```

## 提供者权限清除

```
 <provider
        android:name=".provider.DemoProvider"
        android:authorities="demo"
        android:multiprocess="true"
        android:permission="com.client.permission.MY_PERMISSION" /> 
```

当前，提供程序和 NFC 发送活动在同一个应用程序中并读取提供程序数据，但 NFC 回调。如果我删除提供者的权限，这将正常工作。像

## 未经许可的提供者

```
 <provider
        android:name=".provider.DemoProvider"
        android:authorities="demo"
        android:multiprocess="true"/> 
```

请帮忙。谢谢。

* * *

更新于 2013-03-14 这很奇怪。仅当提供程序和 NFC 活动在同一个应用程序中时，我才发现此问题。像这样。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.nfcdemo"
    android:versionCode="6"
    android:versionName="build-svn291" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.client.permission.MY_PERMISSION"
        android:label="@string/provider_label"
        android:protectionLevel="signatureOrSystem" />

    <uses-permission android:name="com.client.permission.MY_PERMISSION" />

    <activity
        android:name=".ui.MainTabActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <provider
        android:name=".provider.DemoProvider"
        android:authorities="demo"
        android:multiprocess="true"
        android:permission="com.client.permission.MY_PERMISSION" />
</manifest> 
```

但是，如果我使用两个分开的应用程序，它会起作用。

```
<!-- Application Provider -->
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.nfcdemo.provider"
    android:versionCode="6"
    android:versionName="build-svn291" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.client.permission.MY_PERMISSION"
        android:label="@string/provider_label"
        android:protectionLevel="signatureOrSystem" />

    <provider
        android:name=".provider.DemoProvider"
        android:authorities="demo"
        android:multiprocess="true"
        android:permission="com.client.permission.MY_PERMISSION" />
</manifest>

<!-- Application UI -->
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.nfcdemo.ui"
    android:versionCode="6"
    android:versionName="build-svn291" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="17" />

    <uses-permission android:name="com.client.permission.MY_PERMISSION" />

    <activity
        android:name=".ui.MainTabActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>    
</manifest> 
```

# ios - iOS - Cydia 打开命令及其对应物？

> ID：15333841
> 
> 赞同：0
> 
> 时间：2013-03-11T08:12:07.000
> 
> 标签：ios, iphone, cydia

有一个名为**Cydia**的命令行实用程序`open`，它将打开一个 iOS 应用程序并附加到 SpringBoard。

是否有相应的`close`命令可以向应用程序发送正确的信号？它需要发送正确的信号，以便在终止之前进行必要的清理。该`kill`命令无法使用，因为应用程序无法捕获信号。

我一直在寻找这个特定的命令行工具，但还没有找到。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T09:53:53.993

我不知道任何这样的命令，但是您当然可以自己构建一个模拟主页按钮按下的命令。那应该以正常方式*关闭*打开的应用程序。这不是异常`kill`。如果应用程序支持多任务处理，它将进入后台，并在此过程中进行所有正常的`UIApplicationDelegate`回调。

1.  构建一个非图形的 iOS 应用程序。只需去掉`UIApplicationMain()`调用`main.m`

2.  将您的应用程序与 GraphicsServices.framework 链接起来。它是一个私有框架，因此在 Xcode **Build Phases**设置窗口中，您通常选择要链接的框架，您不会在公共列表中看到它。在文件系统上导航到**Private Frameworks**文件夹（例如`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/System/Library/PrivateFrameworks`）并选择它。

3.  您需要为 GSEvent.h（可能还有 GSWindow.h，它#includes）生成头文件。 [在这里您可以找到两者的副本](https://raw.github.com/rpetrich/iphoneheaders/master/GraphicsServices/GSEvent.h)。将它们添加到您的项目和`#include GSEvent.h`文件`main.m`中。

4.  使用这个功能：

```
#include "GSEvent.h"

- (void)simulateHomeButton
{
   struct GSEventRecord record;
   memset(&record, 0, sizeof(record));
   record.type = kGSEventMenuButtonDown;
   record.timestamp = GSCurrentEventTimestamp();
   GSSendSystemEvent(&record);
   record.type = kGSEventMenuButtonUp;
   GSSendSystemEvent(&record);
} 
```

此代码应该可用作关闭当前应用程序（即代码在前台的 UIApplication 内运行）或*另一个*打开的应用程序（如构建命令行实用程序的情况）的方法。

Hattip 到[libActivator](https://github.com/rpetrich/libactivator/blob/master/LASimpleListener.x)的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:30:18.437

您是否尝试过使用

```
killall MobileCydia 
```

应该管用

# android - IBM Worklight 中的 Android 不同分辨率支持

> ID：15333842
> 
> 赞同：1
> 
> 时间：2013-03-11T08:12:09.107
> 
> 标签：android, ibm-mobilefirst

我正在 IBM Worklight android 中搜索不同的分辨率支持。从这方面来看，我正在阅读教程[IBM Worklight 教程](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html#mobile-client-development)在教程/模块 09 中，他们讨论了不同的分辨率。在文件中有一行告诉：

> 默认情况下，Android 应用程序假定应用程序 HTML 文件的屏幕宽度为 320 像素。在更宽的屏幕上显示图形元素时，Android 会自动将图像和字体缩放到适当的比例。例如，在 480 像素宽的屏幕上，100 像素宽的图像将按 480/320 (= 1.5) 缩放到 150 像素宽

现在我制作了一个 Worklight Hybrid 项目并在其中设置了一个背景图像，并在该图像上设置了两个按钮。它是一个演示应用程序，我在其中测试不同的分辨率。

现在我在 android 中部署这个应用程序并在 Tab 7 英寸、nexus 4 和 tab 10.1 上运行它。现在我的图像尺寸是 580x320，位深度是 24。

当我在 nexus 4 上运行这个项目时，它给出了正确的图像宽度，但它不会缩放图像高度虎钳。

当我在选项卡 7 2 上运行此项目时，它显示图像左侧有一些额外的空白区域，而图像高度上的额外空白区域表示图像下方。

当我在选项卡 10.1 上运行时，它显示的行为与选项卡 7 2 的行为相同。

我真的很困惑将使用哪个确切的一般尺寸，以便所有这些在所有屏幕尺寸上缩放，而不是在宽度和高度上显示额外的空白

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T05:35:42.950

我建议使用[Worklight Skins](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/devref/c_developing_application_skins.html)，以便在您的应用程序中支持多个 Android 设备（具有不同的屏幕尺寸）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T17:33:17.140

伊丹的回答对我有用。由于某种原因，我有一个 android 平板电脑，该应用程序看起来非常模糊，而且按钮和字体一直很大。我已经尝试了所有不同的 target-densitydpi 设置，按钮可能会改变大小。但是一切仍然很模糊。

然后我按照 Idan 在 Android 清单中设置它。

```
<uses-sdk android:minSdkVersion="8"  android:targetSdkVersion="13"/> 
```

现在，我的低分辨率平板电脑上的一切都清晰明了。事实证明，即使我的设备可以支持更好的分辨率，Android 也会自动进行一些缩放“屏幕兼容模式”。Android 仍会将其视为低分辨率并自动缩放。通过提供目标，当设备高于该 Android 版本时，它将停止此行为。在这里阅读更多。

[http://developer.android.com/guide/topics/manifest/uses-sdk-element.html](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

# twig - Symfony 2.0 => Symfony 2.1：Twig_Error_Runtime - 注意：Translator.php 第 130 行中的数组到字符串转换

> ID：15333848
> 
> 赞同：1
> 
> 时间：2013-03-11T08:12:38.930
> 
> 标签：twig, symfony-2.1

将我的 symfony 应用程序从 2.0.19 版本升级到 2.1.8 时出现错误。

我刚刚提交了一个联系人表格，我有这个错误：

```
Twig_Error_Runtime: An exception has been thrown during the rendering of a template ("Notice: Array to string conversion in /vendor/symfony/symfony/src/Symfony/Component/Translation/Translator.php line 130") in "AppBundle:Contact:index.html.twig".

at Twig_Template->displayWithErrorHandling(array(entities)) 
```

请注意，如果我刷新页面，则没有错误。

请任何帮助，我正在变得疯狂......

谢谢

山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:20:10.437

酷，我找到了解决方案:-)

这是因为我尝试翻译非字符串值。flashbag值**现在**是数组而不是字符串。

希望它会帮助一些人:-)

山姆

# visual-studio - 适用于 Windows Mobile 的智能设备应用程序

> ID：15333850
> 
> 赞同：0
> 
> 时间：2013-03-11T08:12:48.630
> 
> 标签：visual-studio, visual-studio-2008, windows-mobile, smart-device

我安装了 Windows Mobile 6 Professional SDK 并尝试在 VS2008 中创建新的智能设备项目。我希望在编辑器中看到像移动设备这样的表单，但是我只看到一个常规的 windows 表单，并且无法构建应用程序。

有没有人有同样的行为？可能应该安装一些额外的组件或需要一些配置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T10:52:42.417

并非所有版本的 Visual Studio 都包含智能设备部分。是 Visual Studio 2008 *Professional*还是更好（即不是 Express 或 Standard）？

Visual Studio 还可以在安装时选择排除片段。您的安装是否安装了智能设备编程位（重新运行安装程序进行检查）？

# facebook - Facebook POST 对象 - Android

> ID：15333851
> 
> 赞同：1
> 
> 时间：2013-03-11T08:12:53.433
> 
> 标签：facebook, facebook-graph-api

我正在制作一个**生日提醒 Facebook 应用程序**，其中我*允许用户在朋友的墙上发布消息*，这里我*提供一个固定的图像和一条要发布的文本消息*。

我仍然在 Strings.xml 中给出了如下文本：

```
 <string name="app_action">Wishing you a birthday as special as you are! Hope this is a new beginning to lots of great things and happy moments in your life. Wish you a fabulous birthday!</string> 
```

和 ImageLink 是这样的：

```
 public static final String ICON_URL = "http://i1.pickupflowers.com/images/puf/images/product/large/carnations-lilies-and-roses.jpg"; 
```

但现在我**想允许用户从多张图片中选择一张图片，并从多条消息**中选择消息发布到墙上......

![在此处输入图像描述](../Images/385692f2352267b2b83c703e0b768e18.png)

如上图所示，写在哪里

> **链接和名称**- 在这里我想显示多条消息，并希望允许用户选择其中一条贴在墙上
> 
> **图片**- 在这里我想显示多张图片并允许用户选择其中一张...

现在我的问题是我该怎么做......我应该使用网络服务还是任何其他方式，比如我想让这两个东西更加动态，比如将来我需要添加更多消息和图像，所以我不不想通过使用 XML 或 JSON Parser 以编程方式实现它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:43:18.220

正如@CBroe 所言，*使用预先填写的消息发布违反了 FB 平台政策。您只应该发布用户自己输入的内容*。但要说清楚，您需要使用 facebook 的 API，并且为了做到这一点，您需要运行一个托管在某处的 web 服务。当用户想要使用您的应用程序时，他/她会被重定向到 facebook 的应用程序页面，女巫会为您的服务运行 iframe。

# objective-c - 以字节为单位获取图像大小

> ID：15333853
> 
> 赞同：0
> 
> 时间：2013-03-11T08:13:21.280
> 
> 标签：objective-c

我有两种方法，都给出了错误的答案。

```
NSMutableArray *img=[[NSMutableArray alloc]init];
img=[memoInstance getTempImagesToSend]; //get nsmutableArray of images
NSData* myEncodedImageData=[img objectAtIndex:0];    
NSLog(@"IMAGE1:%@",[UIImage imageWithData:myEncodedImageData]); //i see image

NSLog(@"len:%lu",(unsigned long)[myEncodedImageData length]); //first way to show size

NSData *imgData = UIImageJPEGRepresentation([UIImage imageWithData:myEncodedImageData], 1);
NSLog(@"Size of Image(bytes):%d",[imgData length]); //second way to show 
```

第一种方式：`len:34898`

第二种方式：`Size of Image(bytes):47701`

图片来自相册，用iphone拍的。它不能是 47k ......应该是 ±500k

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:20:20.280

尝试改变你的

```
NSData *imgData = UIImageJPEGRepresentation([UIImage imageWithData:myEncodedImageData], 1); 
```

为了

```
NSData *imgData = [[NSData alloc] initWithData:UIImageJPEGRepresentation((your_ui_image), 0.5)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T08:25:25.180

尝试以下操作：

```
int height = image.size.height; int width = image.size.width; 
int bytesPerRow = 4*width; 

if (bytesPerRow % 16) 
bytesPerRow = ((bytesPerRow / 16) + 1) * 16; 

int dataSize = height*bytesPerRow; 
```

# html - 如何让绝对位置 div 在文档调整大小时保持其位置

> ID：15333855
> 
> 赞同：0
> 
> 时间：2013-03-11T08:13:23.597
> 
> 标签：html, css, position

我有一个带有以下css的div

```
.menu{ 
    width:auto; 
    background-color:#FFF; 
    z-index:14; 
    position:absolute; 
    border:1px solid #d7d7d7; 
    border-bottom:2px solid #ccc;   
    display:none; 
    height:auto; 
    padding-top:2px; 
    padding-bottom:2px;  
} 
```

当您单击所需的元素时，我会根据单击的元素的左侧和顶部偏移来定位此 div。

当文档从顶部增加高度时，此 div 不会相应地更改其位置。这使它看起来非常糟糕。

在这种情况下我如何保持其立场

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:55:20.847

试着`.menu`用`div wrapper`

html

```
<div class="mainWrap">
  <div class="menu"></div>
</div> 
```

css

```
.mainWrap {
 position:relative;
}

.menu{ 
    width:auto; 
    background-color:#FFF; 
    z-index:14; 
    position:absolute; 
    border:1px solid #d7d7d7; 
    border-bottom:2px solid #ccc;   
    display:none; 
    height:auto; 
    padding-top:2px; 
    padding-bottom:2px;  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:40:15.217

如果您使用 定位元素`absolute`，它将根据具有定位的第一个祖先计算偏移量（这意味着`position: absolute;`或`position: relative`）。

```
<body>
  <div id="parent1">
    <div id="child1" style="position: absolute"></div>
  </div>
  <div id="parent2" style="position: relative;">
    <div id="child2" style="position: absolute;"></div>
  </div>
  <div id="parent3" style="position: absolute;">
    <div id="child3" style="position: absolute;"></div>
  </div>
</body> 
```

`child1`计算从`body`它的父级没有定位的偏移量。`child2`并`child3`计算他们与父母的偏移量，因为`parent2`和`parent3`有定位。

有关更多信息，请查看[W3C 规范](http://www.w3.org/TR/CSS2/visuren.html#absolute-positioning)关于绝对定位、相对定位和浮动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:28:22.897

你有没有位置：相对；在父元素上？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T08:17:42.853

需要一把小提琴。但我会说在这种情况下使用 position:relative 而不是 position:absolute。

# android - preferencefragment 没有找到 id android 的视图

> ID：15333865
> 
> 赞同：9
> 
> 时间：2013-03-11T08:14:06.460
> 
> 标签：android, sharedpreferences, android-preferences, preferenceactivity

我不推荐使用 getpreferencescreen，所以我尝试实现标题首选项活动。

这是我的代码：

```
public class EditPreferences extends PreferenceActivity {
ListPreference m_list_preference_dive_centre_rating;
ListPreference m_list_preference_dive_region_rating;
ListPreference m_list_preference_wreck;
ListPreference m_list_preference_cave;
MultyChoiceListPlugin m_list_preference_marine_life;
ListPreference m_list_preference_region;

Preference m_order_by_name;
SharedPreferences.Editor m_editor;

static Context m_context;
int m_order_type_val = 0;

boolean m_wreck_selected = false;
boolean m_cave_selected = false;
boolean m_marine_life_selected = false;
boolean m_region_selected = false;

int number_click_wreck = 0;
int number_click_cave = 0;
int number_click_marine_life = 0;
int number_click_region = 0;

boolean m_without_guide_selected = false;
boolean m_without_equipment_selected = false;
boolean m_budget_selected = false;

boolean m_region_rating = false;
boolean m_centre_rating = false;

private ListView m_preferenceView;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    //m_order_by_name.setOnPreferenceClickListener(onOrderByNamePrefClick);
    final Button back_btn = (Button)this.findViewById(R.id.back);

    final Button home_btn = (Button)this.findViewById(R.id.home);

    //final Button search_btn = (Button)this.findViewById(R.id.search);

    final Button info_btn = (Button)this.findViewById(R.id.info);

    back_btn.setOnClickListener(onBackBtn);
    home_btn.setOnClickListener(onHomeBtn);
  //  search_btn.setOnClickListener(onSearchBtn);
    info_btn.setOnClickListener(onInfoBtn);

}

/**
 * Populate the activity with the top-level headers.
 */
  @Override
  public void onBuildHeaders(List<Header> target) {
        loadHeadersFromResource(R.xml.pref_headers, target);
  }

public static class Prefs1Fragment extends PreferenceFragment {
    @Override
    public void onCreate(Bundle savedInstanceState)
    {

        super.onCreate(savedInstanceState);
        //setContentView(R.layout.wrap_preferences);

        // Make sure default values are applied.  In a real app, you would
        // want this in a shared function that is used to retrieve the
        // SharedPreferences wherever they are needed.
        //PreferenceManager.setDefaultValues(getActivity(),
        //      R.layout.wrap_preferences, false);

        addPreferencesFromResource(R.xml.preferences1);
    }
}

public static class Prefs2Fragment extends PreferenceFragment {
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        // Make sure default values are applied.  In a real app, you would
        // want this in a shared function that is used to retrieve the
        // SharedPreferences wherever they are needed.
        //PreferenceManager.setDefaultValues(getActivity(),
       //         R.xml.preferences, false);

        addPreferencesFromResource(R.xml.preferences2);
    }
}

public static class Prefs3Fragment extends PreferenceFragment {
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        // Make sure default values are applied.  In a real app, you would
        // want this in a shared function that is used to retrieve the
        // SharedPreferences wherever they are needed.
       // PreferenceManager.setDefaultValues(getActivity(),
         //       R.xml.preferences, false);

        addPreferencesFromResource(R.xml.preferences3);
    }
}

private View.OnClickListener onBackBtn = new OnClickListener() {
    public void onClick(View v) {
        //set the view for dive center list ordered by rating
        Intent intent_call_back = new Intent();
        intent_call_back.putExtra("goback","last_from");

        setResult(DivingReview.CALL_BACK,intent_call_back);

        finish();
    }
};

private View.OnClickListener onHomeBtn = new OnClickListener() {
    public void onClick(View v) {
    //set the view for dive center list ordered by rating
        //set the result to the callback of the parent activitie
        Intent intent_call_back = new Intent();
        intent_call_back.putExtra("goback","home");

        setResult(DivingReview.CALL_BACK,intent_call_back);

        finish();
    }
}; 
```

我遇到了错误：找不到片段的 id 0x1020343 (android:id/prefs) 的视图

XML 代码 pref_headers.xml：

```
<?xml version="1.0" encoding="UTF-8"?>

<preference-headers
xmlns:android="http://schemas.android.com/apk/res/android" >

<header     android:fragment="com.freelancerobotics.DivingReview.EditPreferences$Prefs1Fragment"
    style="@style/pref_style"
    android:key="who_is_the_best"
    android:title="@string/who_is_the_best_text" 
    android:summary="@string/who_is_the_best_summary"> 
</header>        

<header android:fragment="com.freelancerobotics.DivingReview.EditPreferences$Prefs2Fragment"
            android:title="@string/what_is_your_budget_text"
            android:summary="@string/what_is_your_budget_summary" > 
</header>

<header android:fragment="com.freelancerobotics.DivingReview.EditPreferences$Prefs3Fragment"
            android:title="@string/order_by_name_title"
            android:summary="@string/order_by_name_summary">
</header>

<!--  <header
    android:icon="@drawable/icon_question"
    android:title="Blackmoon Info Tech Services"
    android:summary="link to BITS blog">
    <intent android:action="android.intent.action.VIEW"
            android:data="http://www.blackmoonit.com/2012/07/all_api_prefsactivity/" />
</header> 
```

-->

XML 代码首选项1.xml：

```
<?xml version="1.0" encoding="UTF-8"?>

<PreferenceScreen
  xmlns:android="http://schemas.android.com/apk/res/android"                
                style="@style/pref_style"
                android:key="who_is_the_best"
                android:title="@string/who_is_the_best_text"
                android:summary="@string/who_is_the_best_summary">

                <PreferenceCategory
                        android:title="@string/who_is_the_best_dive_centre_text"
                        android:key="who_is_the_best_dive_centre_category">
                         <ListPreference
                                android:key="select_dive_centre_rating"
                                android:title="@string/select_dive_centre_rating_text"
                                android:summary="@string/select_dive_centre_rating_summary"
                                android:entries="@array/search_dive_centre_names"
                                android:entryValues="@array/search_dive_centre_clauses"
                                android:dialogTitle="@string/search_dive_centre_choice_title"/>

                </PreferenceCategory>
</PreferenceScreen> 
```

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T08:26:25.207

官方文档具有误导性：

删除该`onCreate`功能`public class EditPreferences extends PreferenceActivity`可解决此问题。

我只是移动了其中的`onCreate`功能`onBuildHeaders`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-07T06:09:53.913

我也遇到了这个问题，直到我意识到我`setContentView()`在`onCreate()`.`FragmentActivity`

`FragmentTransaction.add()`在您的情况下，传入的 id`R.id.feedContentContainer`必须是 setContentView() 中指定的布局的子级。

您没有向我们展示您的`onCreate()`方法，所以也许这是同一个问题。

# mongodb - MongoDB 提供了一个基本的身份验证系统。它在 2.2.3 版本中有变化吗？

> ID：15333871
> 
> 赞同：3
> 
> 时间：2013-03-11T08:14:25.570
> 
> 标签：mongodb, security, authentication, database

**场景：在机器上** [安装了](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-windows/#install-mongodb-on-windows) [MongoDB 2.2.3](http://downloads.mongodb.org/win32/mongodb-win32-x86_64-2.2.3.zip)（Windows 64 位）

按照所有步骤在 MongoDB 服务器上强制执行身份验证。

1.  将用户添加到管理数据库

    ```
    use admin
    db.addUser('me_admin', '12345');
    db.auth('me_admin','12345'); 
    ```

2.  `--auth`使用启用身份验证的选项运行数据库服务器（mongod.exe 进程）

遵循类似问题的所有答案： [如何使用用户名和密码保护 MongoDB](https://stackoverflow.com/questions/4881208/how-to-put-username-password-in-mongodb)

**问题：**对于新版本 2.2.3，我无法设置身份验证。遵循相同的步骤后，我能够在同一台机器上设置[2.0.8 版本的身份验证。](http://downloads.mongodb.org/win32/mongodb-win32-x86_64-2.0.8.zip)但它在 MongoDB 文档中的某处提到***“[本地主机上的身份验证在](http://docs.mongodb.org/manual/tutorial/control-access-to-mongodb-with-authentication/#authentication-on-localhost)2.2 版之前和之后略有不同”***

**问题：**有什么变化以及如何在新版本（即 2.2 及更高版本）中强制执行身份验证。任何人都可以给出一些想法或解决方案来使用新的[MongoDB 2.2.3](http://downloads.mongodb.org/win32/mongodb-win32-x86_64-2.2.3.zip)进行相同的操作吗？

* * *

**更新：**当我使用命令提示符`mongod.exe`的参数启动进程 时，我已经检查了身份验证在 2.2.3 上是否相同。`--auth`

我在配置文件中使用了[docs](http://docs.mongodb.org/manual/reference/configuration-options/#auth)`auth=true`中提到的参数，但这不起作用。

**做过的研究：**

1.  当`mongod.cfg`文件包含以下配置时

    `logpath=c:\mongodb\log\mongo.log, auth=true, profile=2`

    该`log.txt`文件包含以下日志

    ```
    Mon Mar 11 15:06:35 Trying to start Windows service 'MongoDB'
    Mon Mar 11 15:06:35 Service running
    Mon Mar 11 15:06:35 [initandlisten] MongoDB starting : pid=7152 port=27017 dbpath=\data\db\ 64-bit host=AMOL-KULKARNI
    Mon Mar 11 15:06:35 [initandlisten] db version v2.2.3, pdfile version 4.5
    Mon Mar 11 15:06:35 [initandlisten] git version: f570771a5d8a3846eb7586eaffcf4c2f4a96bf08
    Mon Mar 11 15:06:35 [initandlisten] build info: windows sys.getwindowsversion(major=6, minor=1, build=7601, platform=2, service_pack='Service Pack 1') BOOST_LIB_VERSION=1_49
    Mon Mar 11 15:06:35 [initandlisten] options: { config: "C:\mongodb\mongod.cfg", logpath: "c:\mongodb\log\mongo.log auth=true profile=2", service: true }
    Mon Mar 11 15:06:35 [initandlisten] journal dir=/data/db/journal
    Mon Mar 11 15:06:35 [initandlisten] recover : no journal files present, no recovery needed
    Mon Mar 11 15:06:35 [initandlisten] waiting for connections on port 27017
    Mon Mar 11 15:06:35 [websvr] admin web console waiting for connections on port 28017 
    ```

2.  当我从命令提示符运行时`mongod --auth`，将显示以下日志：

    ```
     Mon Mar 11 15:09:40 [initandlisten] MongoDB starting : pid=6536 port=27017 dbpath=\data\db\ 64-bit host=AMOL-KULKARNI
        Mon Mar 11 15:09:40 [initandlisten] db version v2.2.3, pdfile version 4.5
        Mon Mar 11 15:09:40 [initandlisten] git version: f570771a5d8a3846eb7586eaffcf4c2f4a96bf08
        Mon Mar 11 15:09:40 [initandlisten] build info: windows sys.getwindowsversion(major=6, minor=1, build=7601, platform=2, service_pack='Service Pack 1') BOOST_LIB_VERSION=1_49
        Mon Mar 11 15:09:40 [initandlisten] options: { auth: true }
        Mon Mar 11 15:09:40 [initandlisten] journal dir=/data/db/journal
        Mon Mar 11 15:09:40 [initandlisten] recover : no journal files present, no recovery needed
        Mon Mar 11 15:09:40 [initandlisten] waiting for connections on port 27017
        Mon Mar 11 15:09:40 [websvr] admin web console waiting for connections on port 28017 
    ```

**注：**本次变更`options:`

1.  `options:{ config: "C:\mongodb\mongod.cfg", logpath: "c:\mongodb\log\mongo.log auth=true profile=2", service: true }`//不起作用

2.  `options: { auth: true }`//作品

**有趣**的是，

当它从配置文件运行时。

`logpath=c:\mongodb\log\mongo.log, auth=true, profile=2`

它改为：

`logpath: "c:\mongodb\log\mongo.log auth=true profile=2", service: true`

我知道这是**问题**所在。它应该是这样的：

`logpath: "c:\mongodb\log\mongo.log", auth=true, profile="2", service: true`

所以，问题是如何`auth=true`从配置文件传递参数并`mongod.exe`在 Windows7 上将进程作为服务运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:26:31.750

如您引用的部分所述，更改仅很小：

> 一般来说，如果 admin 数据库没有用户，您可以通过 localhost 接口进行连接。对于运行 2.2 版的分片集群，如果 mongod 使用 auth 运行，那么所有通过 localhost 接口连接的用户都必须进行身份验证，即使 admin 数据库中没有任何用户。

基本上在 2.2 之前，如果您在分片集群中，您可以连接到 localhost，并且如果在 admin 数据库中找不到用户，则不会被迫进行身份验证。这意味着如果你设置一个分片集群，设置一个默认用户可能是明智的，你已经完成了。

> 任何人都可以提供一些想法或解决方案来使用新的 MongoDB 2.2.3 进行相同的操作吗？

新的身份验证系统就在那里，你不需要做任何事情；会的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:28:06.150

找到了解决方案。

要将 MongoDB 进程 ( `mongod.exe`) 作为服务运行`auth=true`，在注册 MongoDB 服务本身时必须注意以下事项（[文档](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-windows/#install-and-run-the-mongodb-service)中未提及）

必须使用以下命令注册服务：

```
C:\mongodb\bin\mongod.exe --config C:\mongodb\mongod.cfg --auth --install 
```

`mongod.cfg`文件将只有`logpath=c:\mongodb\log\mongo.log`

与大家共享，这样就不会再将精力和时间放在同一个问题上。

祝大家探索愉快.. :-)

请注意，此时间日志包含：

```
Mon Mar 11 15:58:06 Trying to start Windows service 'MongoDB'
Mon Mar 11 15:58:06 Service running
Mon Mar 11 15:58:06 [initandlisten] MongoDB starting : pid=6800 port=27017 dbpath=\data\db\ 64-bit host=AMOL-KULKARNI
Mon Mar 11 15:58:06 [initandlisten] db version v2.2.3, pdfile version 4.5
Mon Mar 11 15:58:06 [initandlisten] git version: f570771a5d8a3846eb7586eaffcf4c2f4a96bf08
Mon Mar 11 15:58:06 [initandlisten] build info: windows sys.getwindowsversion(major=6, minor=1, build=7601, platform=2, service_pack='Service Pack 1') BOOST_LIB_VERSION=1_49
Mon Mar 11 15:58:06 [initandlisten] options: { auth: true, config: "C:\mongodb\mongod.cfg", logpath: "c:\mongodb\log\mongo.log", service: true }
Mon Mar 11 15:58:06 [initandlisten] journal dir=/data/db/journal
Mon Mar 11 15:58:06 [initandlisten] recover : no journal files present, no recovery needed
Mon Mar 11 15:58:06 [initandlisten] waiting for connections on port 27017
Mon Mar 11 15:58:06 [websvr] admin web console waiting for connections on port 28017 
```

# c# - 在 DockPanel 中填充 StackPanel

> ID：15333875
> 
> 赞同：4
> 
> 时间：2013-03-11T08:14:34.600
> 
> 标签：c#, wpf, stackpanel, dockpanel

这应该很简单：如何在 DockPanel 内拉伸 StackPanel，以便它填充整个父级的内容并保持它的 Horizo​​ntalAlignment？

例子：

```
<DockPanel LastChildFill="True">
    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Background="Yellow">
        <Button Height="30">Button1</Button>
        <Button Height="30">Button2</Button>
    </StackPanel>
</DockPanel> 
```

在此示例中，StackPanel 的宽度与两个按钮的组合宽度相同（这里的背景为黄色），但 DockPanel 中的剩余空间保持白色。看起来 LastChildFille 属性在我的示例中不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:24:52.810

我认为通过在 StackPanel 上设置`HorizontalAligment`为`Center`，您将覆盖 DockPanel 的行为，以用 StackPanel 填充整个空间。

当我正确理解您的问题时，您希望整个空间为黄色，并且带有按钮的堆栈面板位于中间。然后，您应该将 StackPanel 包装在 Grid 中。

```
<DockPanel LastChildFill="True">
  <Grid Background="Yellow">
    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
      <Button Height="30">Button1</Button>
      <Button Height="30">Button2</Button>
    </StackPanel>
  </Grid>
</DockPanel> 
```

# java - SharedPreferences 未在 onResume() 中更新

> ID：15333876
> 
> 赞同：3
> 
> 时间：2013-03-11T08:14:37.417
> 
> 标签：java, android, sharedpreferences, android-alarms

我是 Android 编程新手，我正在尝试开发一个用于设置警报的应用程序。由于`AlarmManager`将在系统重新启动时丢失所有警报，因此我保存了用户使用`SharedPreferences`.

我有一个主要活动，其中列出了所有警报。我有一个`alarm_create`创建警报的活动。当闹钟响起时`alarm_receiver`调用类。`PendingIntent`

现在即使`alarm_receiver`在警报中进行了更改，也不会反映在`main_activity`应用程序恢复时。

为了保存警报，我使用了队列的概念，这将帮助我在循环中检索警报。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:41:33.150

我不太确定我完全理解你想要什么，但据我所知，你想在设备重启后再次设置警报。

1）创建一个侦听重启的接收器：

```
public class BootReciever extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        SharedPreferences settings = context.getSharedPreferences("YOUR SHAREDPREF NAME", 0);
        SharedPreferences.Editor editor = settings.edit();
        editor.putString("alarmName", "newAlarm");
        editor.commit(); // Don't forget to commit your changes!

   }
} 
```

2) 将其添加到您的 androidmanifest.xml 中：

```
 <receiver android:name="com.yourpackage.BootReciever">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED"/>
        </intent-filter>
    </receiver> 
```

3）添加权限：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:37:43.440

下面是我们用来保存 sharedPreferences 的代码片段

```
 Editor prefsEditor = preferences.edit();
prefsEditor.putString(CONFIG_INFO_KEY, configInfoJson);
prefsEditor.commit(); 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:30:01.180

实际上，SharedPreferences 不会立即更新，它会在应用程序重新启动时更新。

不幸的是，在 Android 中重新启动应用程序并不容易编写代码，并且超出了您的应用程序的范围。

DecodeGnome 的上述答案可用于重新加载列表或重新加载应用程序的警报。

我建议你去`SQLiteDatabase`上课，并将警报存储在 SQLite 数据库中，因为每个 Android 设备都有 SQLiteDatabase。

[您可以在此处](http://www.vogella.com/articles/AndroidSQLite/article.html)查看参考代码。

# ruby-on-rails - 在 Ruby 中拆分列表两次

> ID：15333877
> 
> 赞同：0
> 
> 时间：2013-03-11T08:14:42.373
> 
> 标签：ruby-on-rails, ruby

我有一个如下形式的列表：

```
"first - http://url.com, second - http://url.net, third - http://url.so"

# i.e. name - url, name - url, name - url
# so I have three name - url pairs 
```

我想获取这个列表并创建三个 Foo 对象（每个都有 name 和 url 属性），所以我想出了这个：

```
def foo_list=(list)
  self.foos = list.split(",").map { |pair| pair.split(" - ") }.each.map { |attr| Foo.where(name: attr[0].strip, url: attr[1].strip).first_or_create }
end 
```

这工作正常，但它有点冗长。有没有更简单的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:19:16.110

不是一个更好的选择，而是一种更易读的方式

```
self.foos = list.split(',').map do |pair|
  name, url = pair.split(' - ')
  Foo.where(name: name.strip, url: url.strip).first_or_create
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:33:50.497

我可能会写成：

```
self.foos = list.split(",").map { |pair|
  pair.split("-").map(&:strip)
}.map { |name, url|
  Foo.where(name: name, url: url).first_or_create
} 
```

当您可以`strip`将其作为`split('-')`

# sql - 选择后锁定sql server 2008中的表

> ID：15333886
> 
> 赞同：0
> 
> 时间：2013-03-11T08:15:51.013
> 
> 标签：sql, sql-server-2008-r2

我有一个主要的货币表。其中有两个字段，一个是货币类型，一个是货币值。一旦用户开始使用数据库，就无法更改用户。一旦用户选择一个值，我需要通过 SQL Server 2008 Query 锁定我的货币表。任何人都可以帮助我或建议我进行 DB LOCK 查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-15T14:11:36.700

我们在数据库中的表上遇到了同样的问题。找到[了这个](https://stackoverflow.com/questions/12299730/sql-server-management-studio-table-locked-due-to-select-statement)，它对我们有用：

```
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
BEGIN TRANSACTION;
SELECT * FROM dbo.MyTable WITH (TABLOCKX); 
```

`COMMIT TRANSACTION`在执行or之前，表将被锁定`ROLLBACK TRANSACTION`。

希望它对未来的人有所帮助......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:18:52.597

您可以`NOLOCK`用于您的对象。

例如 ：

```
SELECT TOP 10 * FROM Orders WITH(NOLOCK) where UserName = 'VadaVici' 
```

# java - 需要修复我的 Java Timer 代码

> ID：15333891
> 
> 赞同：4
> 
> 时间：2013-03-11T08:16:12.123
> 
> 标签：java, timertask

任务 - 在一天中的指定时间打开和关闭灯泡。我需要知道如何根据下面给出的信息修复我的代码。我还需要知道我是否正确使用了计时器类，也就是说，我的代码设计是否正确？该代码可能有效，但它可能是糟糕的设计，稍后会导致问题。我不希望这种情况发生。

输出是（这不是我真正想要的输出：（）-

```
This is the main program
Current time is - xxx
Future time is - xxx+5sec
Future time is - xxx+10sec
Main program ends
Bulb B1 is OFF 
```

所需的输出 -

```
This is the main program
Current time is - xxx
Future time is - xxx+5sec
Future time is - xxx+10sec
Bulb B1 is ON  //first on
Bulb B1 is OFF //then off
Main program ends//This should always be in the end. 
```

如何修复下面的代码以获得我想要的？

`Bulb`班级

```
class Bulb {

private boolean state = false;//On or off
private String name;

Bulb(String name){

    this.name = name;

}

public void setState(boolean state){

    this.state = state;
    if(this.state == true){

        System.out.println("Bulb " + name + " is ON");

    }else{

        System.out.println("Bulb " + name + " is OFF");

    }

}

public boolean getState(){
    return this.state;

}

} 
```

`BulbJob`类是一个`TimerTask`

```
import java.util.*;

class BulbJob extends TimerTask{

private Bulb bulbToHandle;
private boolean setBulbStateEqualTo;

BulbJob(Bulb toHandle){

    this.bulbToHandle = toHandle;

}

//NOTE: Must be called before run(), otherwise default value is used
public void setBulbStateEqualTo(boolean setBulbStateEqualTo){

    this.setBulbStateEqualTo = setBulbStateEqualTo;

}

//NOTE: call run() only before calling above method
public void run(){

    this.bulbToHandle.setState(setBulbStateEqualTo);//Set on or off

}

} 
```

`BulbScheduler`class - 这安排了灯泡何时打开或关闭。

```
import java.util.*;

@SuppressWarnings( "deprecation" )
class BulbScheduler {

public static void main(String args[]) throws InterruptedException{

    System.out.println("This is the main program");

    Timer time = new Timer();
    Bulb b1 = new Bulb("B1");
    BulbJob bj = new BulbJob(b1);

    bj.setBulbStateEqualTo(true);//Task - Turn bulb on at time = afterCurrent

    Date current = new Date();//Get current time and execute job ten seconds after this time
    Date afterCurrent = (Date) current.clone();

    System.out.println("Current time is - " + current);

    int currentSecs = current.getSeconds();
    int offset = 5;//number of seconds

    afterCurrent.setSeconds(currentSecs + offset);
    System.out.println("Future time is - " + afterCurrent);

    time.schedule(bj, afterCurrent);//Schedule job "bj" at time = afterCurrent

    //Now turn the bulb off at new time = newest afterTime
    afterCurrent.setSeconds(currentSecs + 2 * offset);
    System.out.println("Future time is - " + afterCurrent);

    bj.setBulbStateEqualTo(false);//Task - Now turn the bulb off at time = afterCurrent

    System.out.println("Main program ends");

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:20:12.193

本节：

```
time.schedule(bj, afterCurrent);//Schedule job "bj" at time = afterCurrent

//Now turn the bulb off at new time = newest afterTime
afterCurrent.setSeconds(currentSecs + 2 * offset); 
```

只安排一项任务。如果您需要安排两次，请明确执行：

```
time.schedule(bj, afterCurrent);//Schedule job "bj" at time = afterCurrent

//Now turn the bulb off at new time = newest afterTime
afterCurrent.setSeconds(currentSecs + 2 * offset);
time.schedule(bj, afterCurrent);//Schedule job "bj" at time = afterCurrent 
```

还。这一行：

```
bj.setBulbStateEqualTo(false); 
```

在主线程中执行，因此它将在*两个*任务之前执行。您应该安排该语句在两个任务之间运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:02:01.027

代码是固定的，但这个版本最终无法退出 main -

```
import java.util.*;

@SuppressWarnings( "deprecation" )
class BulbScheduler {

public static void main(String args[]) throws InterruptedException{

    System.out.println("This is the main program");

    Timer timeOn = new Timer();
    Timer timeOff = new Timer();
    Bulb b1 = new Bulb("B1");
    BulbJob bjOn = new BulbJob(b1);
    BulbJob bjOff = new BulbJob(b1);

    bjOn.setBulbStateEqualTo(true);//Task - Turn bulb on 
    bjOff.setBulbStateEqualTo(false);//Task - Then turn the bulb off later

    Date current = new Date();//Get current time and execute job ten seconds after this time
    Date afterCurrent = (Date) current.clone();

    System.out.println("Current time is - " + current);

    int currentSecs = current.getSeconds();
    int offset = 3;//number of seconds

    afterCurrent.setSeconds(currentSecs + offset);
    System.out.println("Future time is - " + afterCurrent);

    timeOn.schedule(bjOn, afterCurrent);//Schedule job "bj" at time = afterCurrent

    //Now turn the bulb off at new time = latest afterCurrent
    afterCurrent.setSeconds(currentSecs + 2 * offset);
    System.out.println("Future time is - " + afterCurrent);

    timeOff.schedule(bjOff, afterCurrent);

    System.out.println("Main program ends");

}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:25:26.293

也可以使用定时器对象的 schedule(TimerTask task, long delay) 调度指定任务在指定延迟（毫秒）后执行。修改后的代码 -

```
import java.util.*;

class BulbScheduler {

    private static java.text.SimpleDateFormat sdf1 = new java.text.SimpleDateFormat ("yy MM dd HH mm ss");

//helper    
static String formatDate(Date d){
        return sdf1.format(d);
    }

    public static void main(String args[]) throws InterruptedException{
        System.out.println("This is the main method");
        java.util.GregorianCalendar cal = new java.util.GregorianCalendar();

        Bulb b1 = new Bulb("bulb 1", false);
        Bulb b2 = new Bulb("bulb 2", false);

        System.out.println("Time now " + formatDate(cal.getTime()));

        Timer timer = new Timer("bulbs");
        BulbJob b1On = new BulbJob(b1, true);
        BulbJob b1Off = new BulbJob(b1, false);
        BulbJob b2On = new BulbJob(b2, true);
        BulbJob b2Off = new BulbJob(b2, false);
        timer.schedule(b1On, 3 * 1000);//after 3 seconds
        timer.schedule(b2On, 7 * 1000);//after 4 seconds
        timer.schedule(b1Off, 6 * 1000);//after 6 seconds; before b2 on

        b1On = new BulbJob(b1, true);
        timer.schedule(b1On, 9 * 1000);

        //if you want main to wait need to add code here to make it wait,
        // but even if does the JVM wont exit. Its just a method. The JVM exits when all non daemon threads are done
        // or System.exit is called

        System.out.println("This is the main method ending; but other threads might be running ...");
        //main thread JVM waits for all other non dameons to end

    }

} 
```

改变灯泡工作

导入 java.util.*；

类 BulbJob 扩展 TimerTask{

```
private Bulb bulbToHandle;
private boolean bulbNewState;//dont start propert names with set

//why a seperate property when we need to set the new state everytime and cannot reuse jobs?
BulbJob(Bulb toHandle, boolean newState){
    this.bulbToHandle = toHandle;
    bulbNewState= newState;
}

public void run(){
    this.bulbToHandle.setState(bulbNewState);//Set on or off
} 
```

}

类灯泡 ... public void setState(boolean state){ this.state = state; System.out.println("Bulb" + name +" is " + (state ? "on" : "off") + " at " + BulbScheduler.formatDate(new java.util.Date()));//if也可以

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T09:15:32.363

您没有正确设置时间。需要使用 GreogarianCalendar。

java.util.Date 被使用，但不能使用它的 setSeconds 阅读 Javadoc，它非常好，会有很大帮助。公共无效 setSeconds(int 秒)

已弃用。从 JDK 1.1 版开始，由 Calendar.set(Calendar.SECOND, int seconds) 取代。将此日期的秒数设置为指定值。修改此 Date 对象，使其表示指定秒内的时间点，其中年、月、日、小时和分钟与以前相同，按本地时区解释。

你需要使用 java.util.GregorianCalendar # add(Calendar.SECOND, howManySeconds)

然后使用 getDate() 获取 Date 对象并将其发送到 Timer。

在日期调用 setSecond 不会更改其他字段。请参阅 Calendar.add 和 roll 的 java 文档。[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)并查看类 inro 中的规则。

# c# - 无法读取 Datagrid WPF 中嵌套的自定义列表框值

> ID：15333893
> 
> 赞同：4
> 
> 时间：2013-03-11T08:16:28.810
> 
> 标签：c#, wpf, datagrid, listbox, wpf-controls

我已经为嵌套在数据网格中的 Listbox 定制了我的 ListBoxItem。但是，当我尝试遍历数据网格以查找列表框的控件时，但当我尝试获取正在选择的单选按钮的值时它失败了。

任何人请就任何可能有帮助的方法或解决方案片段提出建议？非常感谢。

```
<Page.Resources>
    <Style x:Key="RadioButtonItemStyle" TargetType="{x:Type ListBoxItem}">
        <Setter Property="Margin" Value="0,0,5,0" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ListBoxItem}">
                    <Border BorderThickness="0" Background="Transparent">
                        <!-- Note: IsChecked is bound to IsSelected-->
                        <RadioButton 
                    Focusable="False" 
                    IsHitTestVisible="False" 
                    IsChecked="{TemplateBinding IsSelected}">
                            <ContentPresenter />
                        </RadioButton>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <ItemsPanelTemplate x:Key="HorizontalItemsPanel">
        <VirtualizingStackPanel 
    Orientation="Horizontal" />
    </ItemsPanelTemplate>
</Page.Resources>
<Grid>
    <StackPanel>
        <StackPanel Orientation="Horizontal">
            <Label Name="GroupQuestionHeader" FontSize="14" FontWeight="Bold" FontFamily="Times New Roman" />
            <Label Name="PageCount" FontSize="10" FontFamily="Times New Roman"></Label>
        </StackPanel>

        <DataGrid AutoGenerateColumns="False" HorizontalAlignment="Left" Name="dataGrid1" VerticalAlignment="Top" CanUserReorderColumns="False" CanUserSortColumns="False" CanUserResizeColumns="False" CanUserAddRows="False">
            <DataGrid.CellStyle>
                <Style TargetType="DataGridCell">
                    <Setter Property="Padding" Value="5" />
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type DataGridCell}">
                                <Border Padding="{TemplateBinding Padding}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                                    <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="true">
                            <Setter Property="Background" Value="Transparent" />
                            <Setter Property="Foreground" Value="Black" />
                            <Setter Property="BorderBrush" Value="{x:Null}" />
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.CellStyle>
            <DataGrid.Columns>
                <DataGridTemplateColumn Header="Question" Width="400">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock TextWrapping="Wrap" Text="{Binding QuestionContent, Mode=OneWay}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="We fully Comply | We partly Comply | We do not Comply" Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ListBox 
                            BorderThickness="0" 
                            SelectedValue="{Binding MyDataListSelectedValue}" 
                            ItemContainerStyle="{StaticResource RadioButtonItemStyle}" 
                            ItemsPanel="{StaticResource HorizontalItemsPanel}" Name="OptionsRadioButtonGroup" HorizontalContentAlignment="Left"
                                Cursor="Hand" HorizontalAlignment="Left">
                                <ListBoxItem Width="90"/>
                                <ListBoxItem Width="90"/>
                                <ListBoxItem/>
                            </ListBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
        <Button Content="Next Page" Height="23" HorizontalAlignment="Right" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" />
    </StackPanel>
</Grid> 
```

我使用的方法

```
for (int i=0;i<dataGrid1.Items.Count;i++) 
{ 
    DataRowView datarowv = (DataRowView)dataGrid1.Items[i]; 
    DataRow dr = datarowv.Row; 
    string RBValue = dr.ItemArray[1].toString(); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:23:48.673

这个怎么样。我还没有编译我只是直接从脑海中编写的代码。抱歉，如果您遇到编译错误。只是修复它们。

```
for (int i=0;i<dataGrid1.Items.Count;i++) 
{

    // get control which represents the data
    var control = dataGrid1.ItemContainerGenerator.ContainerFromItem(dataGrid1.Items[i]);
    DependencyObject obj = control

    // inside that control there is somewhere the ListBox so run down the visualtree till you find the damn ListBox
    for(;!(obj is ListBox);
        obj = VisualTreeHelper.GetChild(obj, 0));

    ListBox listBox = obj as ListBox;
    if(listBox != null)
    {
      // get the selected values from ListBox
      var selectedItems = listBox.SelectedItems;
      foreach(var selectedItem in selecteditems)
      {
         Console.WriteLine("I am a selected item: " + selectedItem.ToString());
      }
    } 
} 
```

如果你不明白这个小代码在做什么，请问。

# javascript - destroy() 或 close() 实际上不会破坏对象？(Ext-JS 4.1.1a)

> ID：15333896
> 
> 赞同：0
> 
> 时间：2013-03-11T08:16:40.403
> 
> 标签：javascript, extjs

这是我的窗口和里面的表格：

```
Ext.define('App.view.Users.Update', {
    extend: 'Ext.window.Window',
    title: 'User',
    width: 250,
    id: 'UpdateWindowUsers',
    defaultType: 'textfield',
    items: [{
        xtype: 'UpdateFormUsers'
    }],
    buttons: [
      { text: 'Save', id: 'submitUpdateFormButtonUsers'},
      { text: 'Cancel', id: 'cancelUpdateFormButtonUsers'},
    ]
});

Ext.define('App.view.Users.UpdateForm', {
    extend: 'Ext.form.Panel',
    alias: 'widget.UpdateFormUsers',
    layout: 'form',
    id: 'UpdateFormUsers',
    bodyPadding: 5,
    defaultType: 'textfield',
    items: [{
        fieldLabel: 'Id',
        name: 'id',
        hidden: true
    },{
        fieldLabel: 'username',
        name: 'username',
        allowBlank: false,
    },{
        fieldLabel: 'password',
        name: 'password',
        minLength : 5,
        allowBlank: false
    },{
        fieldLabel: 'Email',
        name: 'email',
        minLength : 5,
        vtype: 'email',
        allowBlank: false
    },{
        fieldLabel: 'first name',
        name: 'first_name',
        allowBlank: false
    },{
        fieldLabel: 'last name',
        name: 'last_name',
        allowBlank: false
    }],
}); 
```

它在一个文件中：“ **App/view/Users/Update.js** ”。

所以，我正在创建一个对象：

```
var win = Ext.create('App.view.Users.Update'); 
```

它是用一个按钮创建的。但是当我关闭窗口`win.close()`并关闭“边框”布局内的“选项卡”时，当我再次按下按钮以创建相同的窗口时，它说（**在我的控制台**中）我正在重新创建一个对象再次使用相同的“id”。它已经在 Ext.AbstractManager 中注册。

我怎样才能完全摧毁物体？也许与**Ext.AbstractManager.unregister(win);** 某物？

如果您需要更多代码，没问题。：） 谢谢。

附言

我得到了对我的窗口的引用：

```
var window = Ext.ComponentQuery.query('#UpdateWindowUsers')[0];
window.close(); 
```

**window.close() 实际上会破坏其中的面板吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T16:41:17.407

解决了。

**这 == 控制器**

```
if(this.isCreated){
    this.control(listeners);
} 
```

我已将`isCreated`属性放入 Controller 中。

# php - 如果for循环从mysql数据库重复单行，我该怎么办？

> ID：15333897
> 
> 赞同：1
> 
> 时间：2013-03-11T08:16:44.480
> 
> 标签：php, mysql, database

`for loop repeating single row`如果来自mysql数据库，我该怎么办？是否有购物车页面和`for($i=0;$i<=$max;$i++){`循环从 mysql 数据库重复单行？以及如何在 for 循环中从数据库中检索多行？

**查询功能**

```
function get_size(){
$result=mysql_query("SELECT size FROM mywishlist order by id") 
or die("My Wish Size Problem"."<br/><br/>".mysql_error());
while($row=mysql_fetch_array($result)){
return $row['size'];
}} 
```

**购物车页面**

```
<?php
if(is_array($_SESSION['cart'])){
echo '<tr bgcolor="#FFFFFF" style="font-weight:bold"><td align="center"><font   style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Product Name</font></td>
<td align="center"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Product Image</font></td>
<td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Price</font></td>
<td><div><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Size</font></div></td>
<td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Amount</font></td>
<td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Options</font></td></tr>';

$max=count($_SESSION['cart']);
for($i=0;$i<$max;$i++){
$id=$_SESSION['cart'][$i]['id'];
$q=$_SESSION['cart'][$i]['qty'];
$product=get_product_name($id);
$image=get_product_image($id);
$ids=get_id($id);
$itemcode=get_itemcode($id);
$size=get_size($id);
if($q==0) continue;
?>

<tr bgcolor="#FFFFFF"><td align="center"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;"><input type="hidden" name="itemcode[]" value="<?php echo $itemcode?>" /><input type="hidden" name="ids[]" value="<?php echo $ids?>" /><input type="hidden" name="product[]" value="<?php echo $product?>" /><?php echo $product?></font></td><td align="center"><input type="hidden" name="image[]" id="image"  value="<?php echo $image?>"  /><img name="image" id="image" src="admin/uploads/small0_<?php echo $image?>" width="150" height="150"></td>

 <td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;">  <input type="hidden" name="price[]" id="price" value="<?php echo get_price($id)?>"/>Rs.<?php echo get_price($id)?></font></td>
 <td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;"><?php echo $size ?></font><input type="hidden" name="size" value="<?php echo $size?>" /></td>                    
 <td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;"><input type="hidden" name="amt[]"  value="<?php echo get_price($id)*$q?>"/> Rs.<?php echo get_price($id)*$q?></font></td>
 <td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;"><a href="javascript:del(<?php echo $id?>)"><input type="button" class="button5" value="Remove" /></a></font></td></tr>
 <?php                 
 }
 ?>
<tr><td colspan="6" align="right"><b><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;"><input type="hidden" name="total" id="total" value="<?php echo get_order_total()?>"/>Order Total:Rs.<?php echo get_order_total()?></font></b></td></tr>        
<tr><td colspan="6" align="right"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000; !important">Cash On Delivery & Free Shipping</font></td></tr>  
<tr><td colspan="6" align="right">

<?php  $query1=mysql_query("SELECT * FROM category ORDER BY id ") or die ('Product Query Problem');
$row4=mysql_fetch_array($query1);$ids=$row4['id'];$cat_name=$row4['categories'];?>   <input type="button" class="button1" value="Continue Shopping"  onclick="window.location='product.php'" /><input type="button" class="button2"  value="Clear Cart" onclick="clear_cart()"><input type="button" class="button3" value="Update Cart" onclick="update_cart()"><input type="submit" class="button4" name="order" id="order" value="Place Order"></td></tr>

 <?php
 }
 else{
 echo "<tr bgColor='#FFFFFF'><td><font style='font-family:Arial,Helvetica,sans-serif;    font-size:15px; color:#000;'>There are no items in your shopping cart!</font></td>";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:20:39.920

要遍历结果中的所有行，您可以尝试

```
foreach($row=mysql_fetch_assoc($result))
{
print_r($row);
} 
```

注意： mysql_* 函数不适用于任何新代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:22:04.917

调用`return`. 您需要先获取所有行，然后返回结果数组：

```
function get_size(){

    $result=mysql_query("SELECT size FROM mywishlist order by id") 
    or die("My Wish Size Problem"."<br/><br/>".mysql_error());

    $results = array();
    while($row=mysql_fetch_array($result)){
        $results[] = $row;
    }
    return $results;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:54:00.527

在while循环中，您需要设置数组来收集数据库信息...

```
 function get_size(){
   $result=mysql_query("SELECT size FROM mywishlist order by id")or die("My Wish Size Problem"."<br/><br/>".mysql_error());

   while($row=mysql_fetch_array($result)){

      $rows[]  = $row;

   } 

  return $rows;
} 
```

# php - 使用 Code Igniter Core Controller 传递附加数据

> ID：15333910
> 
> 赞同：0
> 
> 时间：2013-03-11T08:18:20.640
> 
> 标签：php, codeigniter, controller, core

我的代码点火器应用程序中有这个核心控制器，我想将视图变量传递给我的所有视图。

我的视图已加载到我的普通控制器中，因此我无法在我的核心控制器中再次加载视图。

那么，我该怎么做呢？我尝试使用 $data['fromCoreVar'] 并尝试了 $fromCoreVar。两者都不起作用，这是非常容易理解的。但是，我希望它能够工作。

解决方案是什么？

提前Tnx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:42:36.807

在您的核心控制器中，声明一个变量：

```
protected $data; 
```

然后在您的核心控制器中，将数据分配给变量，例如：

```
$this->data['some_index'] = 'some value'; 
```

在您的子控制器中，您以相同的方式使用 $data：

```
$this->data['other_index'] = 'other value'; 
```

并将其全部传递给您的视图：

```
$this->load->view('my_view', $this->data); 
```

# iphone - 委派无法正常工作（应该告诉 VC popViewControllerAnimated）

> ID：15333914
> 
> 赞同：0
> 
> 时间：2013-03-11T08:18:32.547
> 
> 标签：iphone, protocols, delegation, popviewcontrolleranimated

我正在使用一个简单`protocol`的方法来判断`delegate`何时点击了保存按钮，`VC2`以便`view controller`可以`popViewControllerAnimated`通过`VC1`.

`VC2`有一个`protocol`确认`VC1`。

**VC2.h**

```
#import <UIKit/UIKit.h>

@class VC2;

@protocol VC2Delegate <NSObject>

- (void)saveBtnWasTpdOnVC2:(VC2 *)controller;

@end

@interface VC2 : UITableViewController

@property (weak, nonatomic) id <VC2Delegate> delegate;

- (IBAction)saveBtnTpd:(id)sender;

@end 
```

**VC2.m**

```
- (IBAction)saveBtnTpd:(id)sender
{
    NSLog(@"save tapped");
    [self.delegate saveBtnWasTpdOnVC2:self];
} 
```

**VC1.m**

```
- (void)saveBtnWasTpdOnVC2:(VC2 *)controller
{
    NSLog(@"saveBtnWasTpd"); // I don't see this NSLog!
    [controller.navigationController popViewControllerAnimated:YES];
} 
```

希望你能帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:33:02.043

VC2 怎么知道 VC1 是委托人？当您将视图推送到 VC2 时，您必须将委托设置为 VC1。并且 VC1 必须更早地实例化并且在 VC2 的整个生命周期内都处于活动状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:35:13.080

我想你忘了在你的 VC1.m 中添加这一行

```
[vc2Object setDelegate:self]; 
```

您的设计也有点令人困惑，因为您为什么要将 VC2 对象发送回委托方法？

如果要确认协议，应该有VC2的对象。您应该将 VC2 对象的委托设置为 VC1 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:36:29.200

确保您已`<VC2Delegate>`在 vc1.h 文件中完成并分配`vc2.delegate = self;`

# c - 无法初始化字符串数组并使用它们

> ID：15333915
> 
> 赞同：0
> 
> 时间：2013-03-11T08:18:35.083
> 
> 标签：c, string, matrix

这是在主要之外：

```
char message_ecran[NUMBER_OF_STRINGS][STRING_LENGTH+1]; 
```

这是我的功能

```
 int main(void)
    {
        Init(); 

        int i;
        char texte7[] = "io";

        for (i=0;i<=NUMBER_OF_STRINGS;i++)
            {
            message_ecran[i] = texte7;
            }
    } 
```

我想要一个字符串数组`message_ecran`，但它不起作用：

```
incompatible types in assignment 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:20:19.213

您必须使用 strcpy 来复制字符串，分配将不起作用。代替

```
message_ecran[i] = texte7; 
```

和

```
strcpy(message_ecran[i], texte7); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:20:14.267

您现在正在执行的操作是指针的赋值。

您不能简单地将一个字符串分配给另一个字符串，您必须`strcpy()`真正复制数据。

```
strcpy(message_ecran[i], texte7); 
```

此外，您必须确保`message_ecran[i]`为您尝试复制的字符串分配了足够的内存。否则，您将损坏数据。

**编辑：**

您可以检查以下内容：

```
if(strlen(texte7) < STRING_LENGTH+1) 
```

或者您可以简单地使用以下功能：

```
char * strncpy ( char * destination, const char * source, size_t num );

strncpy(message_ecran[i], texte7, STRING_LENGTH); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T09:07:46.580

`strcpy()`，在您的程序中实现。

```
#include <string.h>
#include <stdio.h>

#define NUMBER_OF_STRINGS 3
#define STRING_LENGTH 80

char message_ecran[NUMBER_OF_STRINGS][STRING_LENGTH+1];

int main(void)
{
    int i;
    char texte7[] = "io";

    for (i=0;i<=NUMBER_OF_STRINGS;i++)
    { 
        strcpy(message_ecran[i],texte7);
        puts(message_ecran[i]);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T08:22:42.153

使用 strcpy(destination,source) 并尝试

# macos - 让 mod_wsgi(reviewboard) 和 mod_php(wordpress) 在相同的服务器名但不同的路径上工作

> ID：15333917
> 
> 赞同：0
> 
> 时间：2013-03-11T08:18:36.237
> 
> 标签：macos, wordpress, apache, mod-wsgi, mod-php

我试图让我的 wordpress 网站和我的评论板网站在同一个域名下工作。

前任：

```
www.mysite.com (this is where i host my wordpress site)
www.mysite.com/reviewboard (this is where I want to host my reviewboard site) 
```

根据我的 httpd-vhosts.conf 文件，我可以让其中一个工作。但是，我不能让两者都工作（这是我需要你帮助的地方！）。

这就是我托管我的 wordpress 网站的方式：

```
<VirtualHost *:80>
    ServerAdmin myemail@gmail.com
    DocumentRoot "/opt/local/apache2/htdocs/mysite"
    ServerName www.mysite.com
    ErrorLog "/opt/local/apache2/logs/mysite.com-error_log"
    CustomLog "/opt/local/apache2/logs/mysite.com-access_log" common
</VirtualHost> 
```

这就是我托管我的评论板网站的方式（然后破坏了我的 wordpress 网站）：

```
<VirtualHost *:80>
    ServerName www.mysite.com
    DocumentRoot "/opt/local/apache2/htdocs/mysite/reviewboard/htdocs"

    # Error handlers
    ErrorDocument 500 /errordocs/500.html

    WSGIPassAuthorization On
    WSGIScriptAlias "/reviewboard" "/opt/local/apache2/htdocs/mysite/reviewboard/htdocs/reviewboard.wsgi/reviewboard"

    <Directory "/opt/local/apache2/htdocs/mysite/reviewboard/htdocs">
        AllowOverride All
        Options -Indexes +FollowSymLinks
        Allow from all
    </Directory>

    # Alias static media requests to filesystem
    Alias /reviewboard/media "/opt/local/apache2/htdocs/mysite/reviewboard/htdocs/media"
    Alias /reviewboard/static "/opt/local/apache2/htdocs/mysite/reviewboard/htdocs/static"
    Alias /reviewboard/errordocs "/opt/local/apache2/htdocs/mysite/reviewboard/htdocs/errordocs"
    Alias /reviewboard/favicon.ico "/opt/local/apache2/htdocs/mysite/reviewboard/htdocs/static/rb/images/favicon.png"
</VirtualHost> 
```

所以，现在我希望能够弄清楚如何以某种方式将这些组合起来，这样我就可以在上面指定的路径上托管评论板，而不会破坏我的 wordpress 网站。我尝试使用此处提到的 Alias 命令：http://stackoverflow.com/questions/1553165/multiple-django-sites-with-apache-mod-wsgi 和这里 https://code.google.com/p/modwsgi /wiki/配置指南

但是我无法让它工作。这是我的在制品。如果您可以非常具体地说明我需要做些什么来改变它，那么它会很好，因为我是这种东西的新手。谢谢！

```
<VirtualHost *:80>
    ServerName www.mysite.com
    DocumentRoot "/opt/local/apache2/htdocs/mysite"

    # Error handlers
    #hmm not sure where to put this since my document root is different??????
    #ErrorDocument 500 /errordocs/500.html

    WSGIPassAuthorization On
    Alias /reviewboard/ /opt/local/apache2/htdocs/mysite/reviewboard/htdocs/

    <Directory "/opt/local/apache2/htdocs/mysite/reviewboard/htdocs">
        Options ExecCGI
        SetHandler wsgi-script  
        AllowOverride All
        Options -Indexes +FollowSymLinks
        Allow from all
    </Directory>

    # Alias static media requests to filesystem
    # Since I added the alias command above these are complaining about 
    #overlapping an earlier alias when I restart my apache server????
    Alias /reviewboard/media "/opt/local/apache2/htdocs/mysite/reviewboard/htdocs/media"
    Alias /reviewboard/static "/opt/local/apache2/htdocs/mysite/reviewboard/htdocs/static"
    Alias /reviewboard/errordocs "/opt/local/apache2/htdocs/mysite/reviewboard/htdocs/errordocs"
    Alias /reviewboard/favicon.ico "/opt/local/apache2/htdocs/mysite/reviewboard/htdocs/static/rb/images/favicon.png"
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:39:39.420

如果您对两者使用相同的域，则不能对两者使用不同的 VirtualHost 部分。因此，首先，您必须将两种配置合并到一个 VirtualHost 部分。我将从 WordPress 配置开始，然后为 ReviewBoard 添加一些内容：

```
<VirtualHost *:80>

    ServerAdmin myemail@gmail.com
    DocumentRoot "/opt/local/apache2/htdocs/mysite"
    ServerName www.mysite.com
    ErrorLog "/opt/local/apache2/logs/mysite.com-error_log"
    CustomLog "/opt/local/apache2/logs/mysite.com-access_log" common

    WSGIPassAuthorization On
    WSGIScriptAlias /reviewboard /opt/local/apache2/htdocs/mysite/reviewboard/rb.wsgi
    <Directory /opt/local/apache2/htdocs/mysite/reviewboard>
        Order deny,allow
        Allow from all
    </Directory>

    Alias /reviewboard/media "/opt/local/apache2/htdocs/mysite/reviewboard/htdocs/media"
    Alias /reviewboard/static "/opt/local/apache2/htdocs/mysite/reviewboard/htdocs/static"
    Alias /reviewboard/errordocs "/opt/local/apache2/htdocs/mysite/reviewboard/htdocs/errordocs"
    Alias /reviewboard/favicon.ico "/opt/local/apache2/htdocs/mysite/reviewboard/htdocs/static/rb/images/favicon.png"

</VirtualHost> 
```

你需要创建一个 WSGI 脚本（但你应该已经有了）。您可能希望将其放置在与我在此处的配置中不同的路径中，这样您的权限会更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:52:53.610

结合使用 djc 写的内容和我的一些修改，这是工作版本，这样：

```
www.mysite.com (wordpress site loads correctly)(mod_php)
www.mysite.com/reviewboard (reviewboard site loads correctly)(mod_wsgi) 
```

*重要*的是确保每次重新启动 apache 服务器时都清除浏览器缓存，因为我一直陷入显示错误数据的陷阱，因为我忘了这样做。

*重要*2确保“/reviewboard”跟随“reviewboard.wsgi”成为“reviewboard.wsgi/reviewboard”，否则它将无法工作并给出404错误！

这是工作版本：

```
<VirtualHost *:80>
    ServerAdmin myemail@gmail.com
    ServerName www.mysite.com
    DocumentRoot "/opt/local/apache2/htdocs/mysite"
    ErrorLog "/opt/local/apache2/logs/mysite-error_log"
    CustomLog "/opt/local/apache2/logs/mysite-access_log" common

    WSGIPassAuthorization On
    WSGIScriptAlias /reviewboard /opt/local/apache2/htdocs/mysite/reviewboard/htdocs/reviewboard.wsgi/reviewboard
    <Directory /opt/local/apache2/htdocs/mysite/reviewboard>
        Allow from all
        Options -Indexes +FollowSymLinks
        AllowOverride All
    </Directory>

    # Alias static media requests to filesystem
    Alias /reviewboard/media "/opt/local/apache2/htdocs/mysite/reviewboard/htdocs/media"
    Alias /reviewboard/static "/opt/local/apache2/htdocs/mysite/reviewboard/htdocs/static"
    Alias /reviewboard/errordocs "/opt/local/apache2/htdocs/mysite/reviewboard/htdocs/errordocs"
    Alias /reviewboard/favicon.ico "/opt/local/apache2/htdocs/mysite/reviewboard/htdocs/static/rb/images/favicon.png"
</VirtualHost> 
```

# .net - 用于 DotNet 应用程序的 InMemory 数据库

> ID：15333921
> 
> 赞同：0
> 
> 时间：2013-03-11T08:19:04.100
> 
> 标签：.net, in-memory-database

我想将 Inmemory 数据库用于在 DotNet 中开发的应用程序。Inmemory DB 的类别是（键值/元组存储）我做了一些谷歌搜索，但无法得出任何关于**Memcached - 键值/元组存储**的结论，但由于 MSoft 不使用它，我有点担心。

如果有人在他们的 dotnet 应用程序中使用过 Inmemory，请务必与最好的 Inmemory DB 分享他们的经验和建议，任何使用 Inmemory 数据库的示例应用程序/链接都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:48:18.560

您需要持久性，还是在寻找短期“缓存”而不是长期持久性存储？获得更多关于应用程序应该在数据库中存储什么样的信息的信息会很有趣。根据存储信息的使用情况，更容易为您提供建议！

我使用名为 Starcounter (www.starcounter.com) 的数据库构建了两个复杂的业务应用程序。Starcounter 数据库是一个内存中面向对象的数据库，支持真正的 ACID 事务。

除了性能之外，它还有一个本地 .NET 接口，您作为开发人员只需对应用程序进行编程。如果一个类继承自 Starcounter 中的基类，它将自动作为持久对象处理，没有单独的数据库模式定义。

Starcounter 不是一个键值对数据库，而是一个支持 SQL 92 的 NewSQL 数据库。我的经验是，由于它易于使用，并且在数据存储和应用程序之间不需要“胶水”代码，它节省了很多行实现代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:06:34.940

有纯C#基于内存的数据库，比如NMemory，

[http://nmemory.codeplex.com/](http://nmemory.codeplex.com/)

还有为 C# 启用 Memcached 的 C# 包装器，

[http://www.codeproject.com/Articles/96698/Implementing-Distributed-Caching-using-Memcached](http://www.codeproject.com/Articles/96698/Implementing-Distributed-Caching-using-Memcached)

[http://www.deanhume.com/Home/BlogPost/memcached-for-c----a-walkthrough/62](http://www.deanhume.com/Home/BlogPost/memcached-for-c----a-walkthrough/62)

[.Net 是否有内存缓存端口？](https://stackoverflow.com/questions/276924/is-there-a-port-of-memcache-to-net)

Therefore, there are indeed lots of approaches available, but why couldn't you search, investigate and evaluate to find the one that best matches your scenarios? No one else can help you much, as their environment/requirements are different from yours.

# asp.net - 在 ASP.NET mvc 4 中使用 Ninject 时是否需要控制器工厂

> ID：15333923
> 
> 赞同：7
> 
> 时间：2013-03-11T08:19:17.240
> 
> 标签：asp.net, ninject

关于将 Ninject 与 asp.net mvc 4 一起使用，我不知道如何处理 .net 中通过 google 获得的大量文档

首先，我想知道asp.net中是否需要控制器工厂。

此外，构造函数注入真的是我们可以使用 MVC 4 进行依赖注入的唯一方法，因为当我将它们与控制器一起使用时，属性注入和方法注入似乎不起作用

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T09:51:08.173

我不是这方面的专家，`Ninject`但据我所知，我只是用它来将我的`DataSource Interface`和我`EfDb Class`的与我的应用程序的其余部分联系起来。

如果您需要一本包含真实应用程序的好书，请`Ninject`尝试： [Pro ASP.NET MVC 3 Framework，第三版](http://www.amazon.ca/gp/product/1430234040/ref=s9_simh_gw_p14_d6_i6?pf_rd_m=A3DWYIK6Y9EEQB&pf_rd_s=center-3&pf_rd_r=1T5D5MNTD73VFSFWM0FR&pf_rd_t=101&pf_rd_p=1375922682&pf_rd_i=915398)

或者

[临 Asp.Net Mvc 4](http://www.amazon.ca/gp/product/1430242361/ref=s9_simh_gw_p14_d6_i2?pf_rd_m=A3DWYIK6Y9EEQB&pf_rd_s=center-2&pf_rd_r=1T5D5MNTD73VFSFWM0FR&pf_rd_t=101&pf_rd_p=1375923922&pf_rd_i=915398)

我通常关心的代码行数很少

```
public class NinjectControllerFactory : DefaultControllerFactory
{
    private IKernel ninjectKernel;

    public NinjectControllerFactory()
    {
        ninjectKernel = new StandardKernel();
        AddBindings();
    }

    protected override IController GetControllerInstance(RequestContext requestContext, Type controllerType)
    {
        return controllerType == null
                   ? null
                   : (IController) ninjectKernel.Get(controllerType);
    }

    private void AddBindings()
    {
        ninjectKernel.Bind<IDataSource>().To<EfDb>();
    }
} 
```

然后注册您`NinjectControllerFactory`的`Global.asax.cs`：

`ControllerBuilder.Current.SetControllerFactory(new NinjectControllerFactory());`

如您所见，此类使用`Method Injection`using `private void AddBindings()`。如果您正在关注，这将非常容易`Test Driven Development (TDD)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-07T08:52:31.147

请参阅此处的文档： [https](https://github.com/ninject/ninject.web.mvc/wiki/Dependency-injection-for-controllers) ://github.com/ninject/ninject.web.mvc/wiki/Dependency-injection-for-controllers ，“唯一要做的就是为其依赖项配置 Ninject 绑定。即使不添加绑定，Ninject 也会找到控制器本身。”

NInject 将自动设置您的控制器依赖项（前提是它具有这些类型的绑定）。

# linux - 如何在 Linux Shell 脚本文件中包含文件？

> ID：15333928
> 
> 赞同：-2
> 
> 时间：2013-03-11T08:19:47.067
> 
> 标签：linux, shell

我想要做的是在 shell 脚本程序中包含文件，并在运行时将文件复制到本地驱动器中。（比如包括其他语言的资源文件 ex）*.rc *.res）

我在网站上阅读了一些书籍和文件。但是没有任何有用的解决方案。

有什么方法可以使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:19:02.987

尝试自解压的 shell 脚本。这些文章告诉你它是如何工作的。
[http://notepad2.blogspot.tw/2012/05/create-self-extractable-archive.html](http://notepad2.blogspot.tw/2012/05/create-self-extractable-archive.html)
[Linux 二进制安装程序（.bin、.sh）如何工作？](https://stackoverflow.com/questions/955460/how-do-linux-binary-installers-bin-sh-work)
您可以使用[makeself.sh](http://megastep.org/makeself/)轻松生成 shell 脚本

# android - 启动自定义隐式意图

> ID：15333933
> 
> 赞同：4
> 
> 时间：2013-03-11T08:20:09.820
> 
> 标签：android

安装了两个活动，分别在设备上具有以下清单文件：

第一个应用程序的活动在其清单中具有：- 其中， `package="com.example.tictactoe"`

```
<intent-filter>
        <action android:name="com.example.tictactoe.YOYO" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="text/*" /> 
 </intent-filter> 
```

第二个应用程序的活动在其清单中具有：- 其中，
`package="com.example.project"`

```
 <intent-filter>
        <action android:name="com.example.project.YOYO" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="text/*" /> 
 </intent-filter> 
```

现在，我想使用以下代码从第三个应用程序开始这些活动之一：

```
i=new Intent();
i.setAction("YOYO");
i.putExtra("KEY","HII..i am from third app");
startActivity(i); 
```

但执行显示错误：-

```
03-11 08:12:30.496: E/AndroidRuntime(1744): FATAL EXCEPTION: main
03-11 08:12:30.496: E/AndroidRuntime(1744): android.content.ActivityNotFoundException:
                    No Activity found to handle Intent { act=ACTION_SEND (has extras) } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-09T14:37:24.580

您需要提供**完整的操作名称**；通过在您的意图中调用**setType()**来提供您在清单中使用的**mimeType 。**

 **显现 ：

```
<intent-filter>
     <action android:name="com.example.tictactoe.YOYO" />
     <category android:name="android.intent.category.DEFAULT" />
     <data android:mimeType="text/plain" /> 
</intent-filter> 
```

爪哇：

```
Intent i=new Intent();
i.setAction("com.example.tictactoe.YOYO");
i.setType("text/plain");
i.putExtra("KEY","HI..i am from third app");
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T08:36:14.577

您需要提供完整的操作：

```
i=new Intent();
i.setAction("com.example.tictactoe.YOYO");
i.putExtra("KEY","HII..i am from third app");
startActivity(i); 
```

或者（取决于您要启动的项目）：

```
i.setAction("com.example.project.YOYO"); 
```

您也可以通过以下方式进行：（直接在构造函数中提供操作）

```
i=new Intent("com.example.tictactoe.YOYO");
i.putExtra("KEY","HII..i am from third app");
startActivity(i); 
```

也松开数据 mimeType 或阅读如何使用它。因为通过 putExtra 是行不通的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-23T10:04:58.240

首先，您需要确保 Intent 的名称是完全限定名称，并且包名称在 Intent 过滤器和触发 Intent 的活动中相同。在这种情况下：“YOYO”应该是“com.example.tictactoe.YOYO”。您还应该删除 mime 类型，因为您没有在 setData() 中包含数据，在这种情况下您使用的是捆绑包。所以你应该有触发意图的活动：

## 活动射击意图

```
i=new Intent();
i.setAction("com.example.tictactoe.YOYO");
i.putExtra("KEY","HII..i am from third app");
startActivity(i); 
```

对于清单中的接收活动条目：您需要确保将类别设置为 DEFAULT 并删除数据类型标签。

## 活动接收意向

```
<intent-filter>
     <action android:name="com.example.tictactoe.YOYO" />
     <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```**

# jquery - 如何在“jquery image cycle”中为图像提供超链接？

> ID：15333937
> 
> 赞同：0
> 
> 时间：2013-03-11T08:20:17.327
> 
> 标签：jquery

我在我正在构建的网站中使用了**j 查询图像循环插件。**是否可以循环提供这些图像的超链接，如果答案是肯定的，请告诉我如何？

这是内部图像的工作代码，没有任何超链接

```
<div class="wrapper col2">
  <div id="featured_slide">
    <ul class="roundabout-holder">
      <li><img src="images/demo/ComputerScience.gif" alt="" /></li>
      <li><img src="images/demo/InformationScience.gif" alt="" /></li>
      <li><img src="images/demo/Mechanical.gif" alt="" /></li>
    </ul>
  </div>
</div> 
```

对于单个实例，这是我尝试过的

```
 <li>
         <a href="http://www.stunspot.com">
    <img src="images/demo/computerscience.gif" alt="" />
     </a>
    </li> 
```

上面的代码不起作用意味着它仍然可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:26:54.027

根据您的问题和您提供的详细信息，您可以执行以下链接。将 # 替换为您想要的链接。

```
$('#slideshow').cycle({ 
    timeout: 3000, 
    pager:  '#nav', 
    pagerAnchorBuilder: function(idx, slide) { 
        return '<li><a href="#"><img src="' + slide.src + '" width="50" height="50" /></a></li>'; 
    } 
}); 
```

[在这里](http://jquery.malsup.com/cycle/more.html?v2.23)阅读更多

# java - 使用 netbeans 将 ArrayList 加载到 JCombobox

> ID：15333941
> 
> 赞同：0
> 
> 时间：2013-03-11T08:20:26.843
> 
> 标签：java, swing, netbeans, arraylist, jcombobox

当前有一个名为*SundayList*的 ArrayList ，一旦加载框架*AddStudent*就会加载（GUI 位）

Netbeans 自动生成的代码是：

```
comboboxSunday = new javax.swing.JComboBox();

comboboxSunday.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Item1", "Item2" })); 
```

如何使用我自己的数组加载组合框项目？该数组包括以下项目：

```
Activity1
Activity2
Activity3
Activity4 
```

在我之前的搜索中，人们提到了使用`toString()`and `toArray()`，我不熟悉这两种方法，以及它们如何帮助将列表加载到组合框中，因为我对 java 还很陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T08:25:09.550

您可以创建自己的`ComboBoxModel`以 a`List`作为主要参数，但这有点复杂

```
comboboxSunday.setModel(new DefaultComboBoxModel());
for (Object item : listOfItems) {
    comboboxSunday.addItem(item);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:28:25.083

假设您的数组看起来像这样：

```
String[] SundayList = { "Activity1", "Activity2", "Activity3", "Activity4" }; 
```

你可以这样做：

```
javax.swing.JComboBox sundayCombo = new javax.swing.JComboBox(SundayList); 
```

如果您的数组不是字符串数组。尝试：

```
javax.swing.JComboBox sundayCombo = new javax.swing.JComboBox(SundayList.toString()); 
```

希望这可以帮助！

# ember.js - EmberJS 示例不起作用

> ID：15333942
> 
> 赞同：2
> 
> 时间：2013-03-11T08:20:30.633
> 
> 标签：ember.js

在 EmberJS 的主页上有简短的代码片段：

```
App.Person = DS.Model.extend({
  firstName: DS.attr('string'),
  lastName: DS.attr('string'),

  fullName: function() {
    return this.get('firstName') +
       " " + this.get('lastName');
    }.property('firstName', 'lastName')
});

App.peopleController = Em.ArrayController.create({
    content: App.Person.find()
}); 
```

现在，当我尝试构建它时，我得到一个 DS 未定义？我确实包含了 Handlebars，并且通过源代码查看 DS 的定义无处可寻。

网络上的其他示例不使用 DS，而是使用 Em，但是这些示例已经很老了（至少在互联网时代）。我究竟做错了什么？我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:51:17.943

`DS`是余烬数据。您需要包含它才能使用`DS`: [github 上的 ember-data](https://github.com/emberjs/data)。

Ember-data 是 Ember 的持久性库（模型和服务器通信）。

# sharepoint - 通过 Xsl 的超链接列名称

> ID：15333946
> 
> 赞同：0
> 
> 时间：2013-03-11T08:20:53.173
> 
> 标签：sharepoint, xslt, xslt-1.0

我有文档库，其中 ColumnName 是名称，并且数据超链接到文档。我想通过 xslt 访问它。 ![列表如下所示](../Images/9f16bd5ae5c3fe5b4184c3770c857a99.png) ![应用 xsl 后应该看起来像这样，但现在我可以填充 Name.Where 作为我当前的要求。 它应该超链接到相应的文档](../Images/d288108b6764321dfd5247127b1be341.png)

```
My xsl code is given below:
<xsl:stylesheet version="1.0"
              xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
              xmlns:msxsl="urn:schemas-microsoft-com:xslt"
              exclude-result-prefixes="msxsl" xmlns:ddwrt2="urn:frontpage:internal">
  <xsl:output method='html' indent='yes'/>    
  <xsl:template match='dsQueryResponse'>
    <table cellpadding="10" cellspacing="0" border="1" style="padding:25px;">    
      <tr>
        <td colspan='2'>
          <b style="font-size:25px;">NewsLetter List</b>
        </td>        
      </tr>
      <xsl:apply-templates select='Rows/Row'/>
    </table>
  </xsl:template> 

  <xsl:template match='Row'>   
    <tr>
      <td>
        <table width="100%" border="0" cellspacing="1" cellpadding="1">
          <tr>
            <td>
              <b>
                <img src="../PublishingImages/newsletter_icon.png" width="20px" height="20px"></img>
              </b>
              </td>
            <td>
                <xsl:value-of select="@Name"/>
            </td>
          </tr>

      </table>     
      </td>
    </tr>    
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:07:09.337

假设源 XML 包含默认可用的相同属性，您是否可以尝试替换它：

```
<td>
  <xsl:value-of select="@Name"/>
</td> 
```

有了这个：

```
<td>
  <a href="{@FileRef}">
    <xsl:value-of select="@Name"/>
  </a>
</td> 
```

# python - Python - 将字符串对象转换为 ctypes (unsigned char *)

> ID：15333955
> 
> 赞同：2
> 
> 时间：2013-03-11T08:21:52.890
> 
> 标签：python, ctypes

我想使用具有以下签名的函数的 DLL 文件 -

```
bool isValid = isImageValid((unsigned char *) buff, const __uint32& buffLen, 
                            int imageW, int imageH, __uint32 requiredSize); 
```

现在， buff 必须来自一个字符串，我得到的 python 包装器相当于

```
pyBuff = open(someimagefile, 'rb').read() 
```

由于 pyBuff 很大（大部分），我不想分配一个新的 c uchar 数组并复制，而是要利用原始缓冲区。基本上，抓取 pyBuff 对象的 char 缓冲区并将其作为 ctypes (c_ubyte *) 引用。

我最接近它的是：

```
buff = cast(pyBuff, POINTER(c_ubyte)) 
```

但我不确定这是我想要的类型。无论如何，该功能给了我以下错误

```
WindowsError: exception: access violation writing 0x00000000 
```

很高兴有任何帮助..

另外 - 两个简短的问题：

1.  下面的定义是否正确，因为在这个 DLL 的现有 C 包装器中（我正在使用它作为参考）调用（也）这个函数的函数具有签名：`(const char * buff, const __uint32& buffLen)`

    ```
    byref(c_ulong(len(pyBuff)) 
    ```

2.  CDLL 和 WinDLL 之间有什么区别，哪个是正确的使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:19:38.027

如果您只有 Python 字符串并且您确定`isImageValid`不会修改其内容，那么您可以将`buff`参数声明为 type `c_char_p`。缓冲区内容不会被复制。

的`_type_`代码`c_char_p`是'z'。在 setter 函数的 2.5.4 源代码[_ctypes/cfield.c : z_set](http://hg.python.org/cpython/file/a0a6d9909312/Modules/_ctypes/cfield.c#l1301)中，您会看到对于一个`str`对象，它只使用底层`ob_sval`指针：

```
1309    if (PyString_Check(value)) {
1310        *(char **)ptr = PyString_AS_STRING(value);
1311        Py_INCREF(value);
1312        return value; 
```

其中宏定义如下：

```
#define PyString_AS_STRING(op) (((PyStringObject *)(op))->ob_sval) 
```

也就是说，如果您可以读取源文件，您可能更愿意将其读入可变缓冲区。以下是如何将内容读入 ctypes`c_char`数组（在 2.5.4 中测试）：

创建要读取的测试文件：

```
>>> open('tmp.txt', 'w').write('''\
... This is a test.''') 
```

获取 a 中的文件大小`c_uint32`，创建缓冲区，并读入文件内容：

```
>>> import os
>>> from ctypes import *
>>> buffLen = c_uint32()
>>> buffLen.value = os.path.getsize('tmp.txt')
>>> buff = (c_char * buffLen.value)()
>>> open('tmp.txt').readinto(buf)
15
>>> buff.value
'This is a test.' 
```

关于你的另外两个问题，我会这样设置函数原型：

```
lib = CDLL(path_to_dll)
isImageValid = lib.isImageValid
isImageValid.argtypes = c_char_p, POINTER(c_uint32), c_int, c_int, c_uint32
isImageValid.restype = c_bool 
```

`buffLen`给定上述`argtypes`定义， ctypes 将自动通过引用传递。您也可以显式使用`byref(buffLen)`.

`CDLL`用于 cdecl（C 声明）调用约定，其中*调用者*清理堆栈。这允许可变参数函数，例如`printf`. `WinDLL`用于 stdcall 约定，其中*被调用者*清理堆栈。stdcall 主要由 32 位 Win32 API 使用，例如 Kernel32 函数。请参阅有关[x86 调用约定](http://en.wikipedia.org/wiki/X86_calling_conventions)的 Wikipedia 文章。

# asp.net-mvc - 如何通过 MVC Razor 将 DDL 中的选定值插入 DB

> ID：15333959
> 
> 赞同：1
> 
> 时间：2013-03-11T08:22:12.220
> 
> 标签：asp.net-mvc, razor

> > 嗨，我有**MVC Razor**应用程序作为电子目录，我使用下拉列表绑定来自**DB**的数据，但**DDl绑定来自****DB**的相同值，就好像我有三个类别“x、Y、Z” **DDL**返回相似的值“Z ,Z , Z "。因为它有最后一个值 "y" 。**当用户从DDL**中选择项目时，我也尝试将选定的值“ID”插入 DB，但我不能，它返回错误的选定值。

```
 public class CategoryController : Controller
{
    private AndriodContext db = new AndriodContext();
    List<SelectListItem> items = new List<SelectListItem>();
    List<string> category = new List<string>();
    SelectListItem s = new SelectListItem();

    //
    // GET: /Category/

    public ActionResult Index()
    {

        var x = db.Categories.Where(y => y.Active == true).ToList();

        return View(x);

    }

    public ActionResult Create()
    {
        var data = db.Categories.ToList().Distinct();
        List<string> x = new List<string>();

        foreach (var t in data)
        {

            s.Text = t.Name;
            s.Value = t.Cat_ID.ToString();

            items.Add(s);

        }

        ViewBag.Parent = items;
        return View();
    }

    //
    // POST: /Category/Create

    [HttpPost]
    public ActionResult Create(Category category, IEnumerable<HttpPostedFileBase> files)
    {

        var data = db.Categories.ToList().Distinct();
        List<SelectListItem> items = new List<SelectListItem>();
        foreach (var t in data)
        {
            SelectListItem s = new SelectListItem();
            s.Text = t.Name;
            s.Value = t.Cat_ID.ToString();
            items.Add(s);
            if (s.Selected)
            { category.Parent_ID = int.Parse(s.Value); }
        }

        db.Categories.Add(category);
        db.SaveChanges();

        return RedirectToAction("Index");
    }

} 
```

@using (Html.BeginForm("Create", "Category", FormMethod.Post, new { enctype = "multipart/form-data", @data_ajax = "false" })) { @Html.ValidationSummary(true)

```
<fieldset>
    <legend></legend>

    <div class="editor-field create-Bt3">

        @Html.DropDownList("Parent", new SelectList(ViewBag.Parent, "Value", "Text"), "- Select Parent -")
    </div>

    <div>
        <p class="create-Bt ">
            <input type="submit" value="Create" />
        </p>
    </div>
    <br />
    <br />
    <div>
        @Html.ActionLink("Back to List", "Index")
    </div>
</fieldset> 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:56:03.550

使用模型绑定下拉列表而不是 ViewBag 的最佳实践。

如果您不想使用模型，则可以做一招。您在视图页面中放置了一个隐藏字段（`<input type="hidden" name="hdnParent" id="hdnParentId" />`），并通过简单的 jquery 使用 : 计算下拉列表的选定值 `$("#Parent").val();`。

制作下拉列表：

```
@Html.DropDownList("Parent", new SelectList(ViewBag.Parent, "Value", "Text"), "- Select Parent -",new{ id="Parent" }); 
```

之后，您在控制器的 HTTPPOST 中获得一个字符串参数：

```
[HttpPost]
public ActionResult Create(string hdnParent) //hdnParent is the name of dropdownlist
{
    //now you can get the seleced value from "hdnParent".
    //do the stuffs
    return View();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:32:43.140

您需要在 viewpage 中导入 jquery 1.7.1.min.js(DOM)：从 jquery 网站获取 jquery DOM（[http://blog.jquery.com/2011/11/21/jquery-1-7-1-发布/](http://blog.jquery.com/2011/11/21/jquery-1-7-1-released/)）。然后在按钮中单击（`<input type="submit" value="Create" onclick="GetDropDownValue();"/>`）：

写了一个javascript函数：

```
 <script type="text/javascript" language="javascript"> 
  function GetDropDownValue()
   {
     $("#hdnParentId").val($("#Parent").val());
   }
</script> 
```

# c++ - 搜索二叉搜索树后输出错误

> ID：15333962
> 
> 赞同：2
> 
> 时间：2013-03-11T08:22:22.437
> 
> 标签：c++, list, tree

我正在使用一个二叉搜索树来收集字符串，然后按后序对它们进行排序。我还使用一个列表来显示字符串出现的行号。我可以使 BST 正常工作，但是我的输出最终出错了。我认为当我遇到一个重复的单词时就会出现问题。当我在重复的单词中添加行号时，我的输出搞砸了。

我的输出应该是这样的

```
hawaii    3

hello     1

is        3

paradise  2

to        2

welcome   2

wonderful 1 3

world    1 
```

但是我把它作为输出

```
Contents of tree:

hello 1

Contents of tree:

hello 1
wonderful 1
.
.
.

Contents of tree:

hawaii 3
hello 1
is 3
paradise 2
to 2
welcome 2
wonderful 1
world 1

Contents of tree:

is 3
paradise 2
to 2
welcome 2
wonderful 1 3
world 1
Press any key to continue . . . 
```

这是主要逻辑

```
struct TreeNode
{
    string data;
    list<int> lineNum;
    TreeNode *left;
    TreeNode *right;

    TreeNode(string str,list<int> num)
    {
        data = str;
        lineNum = num;
        left = NULL;
        right = NULL;
    }
};

void insert(TreeNode *&root, string newNode,list<int> num)
{
    if(root == NULL)
    {
        root = new TreeNode(newNode,num);
    }
    else if(newNode < root -> data)
    {
        insert(root -> left, newNode,num);
    }
    else
    {
        insert(root -> right, newNode,num);
    }
}

bool treeContains( TreeNode *root, string item )
{

    if ( root == NULL )
    {
        return false;
    }
    else if ( item == root->data)
    {
        return true;
    }
    else if ( item < root->data )
    {
        return treeContains( root->left, item );
    }
    else
    {
        return treeContains( root->right, item );
    }
}

void treeInsert(TreeNode *&root, string newItem,int num)
{
    list<int> temp;
    temp.push_back(num);
    if ( root == NULL ) 
    {
        root = new TreeNode(newItem,temp );
        return;
    }
    else if ( newItem < root->data ) 
    {
        treeInsert( root->left, newItem,num );
    }
    else 
    {
        treeInsert( root->right, newItem,num );
    }
}

void printTree(TreeNode *node)
{
    list<int>::iterator i;

    if ( node != NULL )
    {
        printTree(node->left);
        cout <<node->data;
        for( i = node->lineNum.begin(); i != node ->lineNum.end(); ++i)
            cout<<" "<<*i;

        cout << endl;

        printTree(node->right);
    }
}

TreeNode search(TreeNode *root, string item)
{
    while ( root != NULL )
    {
        if(item == root->data)
        {
            break;
        }

        if ( item > root->data )
        {
            root = root-> right;
        }
        else if(item < root->data )
        {
            root = root-> left;
        }

        if(root == NULL)
        {
            cout << "error";
        }

    }
    return *root;
}

int main()
{
    TreeNode *root;
    root = NULL;
    ifstream test("test.txt");
    istringstream strLine;
    string line, word;
    list<int> lineNum;

    int currentLine=0;

    // Go line by line
    while (getline(test,line))
    {
        ++currentLine;

        strLine.clear();
        strLine.str(line);

        lineNum.push_back(currentLine);
        // Now from the line read word by word
        while (strLine >> word)
        {

            // if word is already in tree search tree for node and line number
            if (treeContains(root,word))
            {
                *root = search(root,word);
                root->lineNum.push_back(currentLine);
                cout << "\nContents of tree:\n\n";
                printTree(root);

            }
            // if word is new add to tree insert node
            else
            {
                treeInsert(root,word,currentLine);  
                cout << "\nContents of tree:\n\n";
                printTree(root);
            }
        }
    }
} 
```

输入文本如下所示：

```
hello wonderful world
welcome to paradise
hawaii is wonderful 
```

提前谢谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:01:09.637

我查看了您的代码并对其进行了简化。我正在粘贴结果。错误消失了:)

你的问题主要是你做了两次同样的事情——你在“搜索”和“插入”函数中都在树中找到了一个节点。这两种实现有细微的差异，这会导致您的错误。

我还冒昧地将您的函数调用移至方法调用。

```
#include <list>
#include <string>
#include <iostream>
#include <fstream>
#include <sstream>
using namespace std;

struct TreeNode {
        string data;
        list<int> lineNum;
        TreeNode *left;
        TreeNode *right;

    public:
        TreeNode(string str, int num) {
            data = str;
            lineNum.push_back(num);
            left = NULL;
            right = NULL;
        }

        void print() const {
            if (this->left != NULL) {
                this->left->print();
            }

            this->printNode();

            if (this->right != NULL) {
                this->right->print();
            }
        }

        static void insert(TreeNode *&root, string newNode, int num) {
            if (root == NULL) {
                root = new TreeNode(newNode, num);
            } else if (newNode < root->data) {
                TreeNode::insert(root->left, newNode, num);
            } else if (newNode > root->data) {
                TreeNode::insert(root->right, newNode, num);
            } else {
                root->lineNum.push_back(num);
            }
        }

    private:
        void printNode() const {
            list<int>::const_iterator i;
            cout<<this->data;

            for (i = this->lineNum.begin(); i != this->lineNum.end(); ++i) {
                cout<<" "<<*i;
            }

            cout << endl;
        }
};

int main()
{
    TreeNode *root;
    root = NULL;
    ifstream test("test.txt");
    istringstream strLine;
    string line, word;
    int currentLine=0;

    // Go line by line
    while (getline(test,line)) {
        ++currentLine;
        strLine.clear();
        strLine.str(line);

        // Now from the line read word by word
        while (strLine >> word) {
            TreeNode::insert(root,word,currentLine);
        }
    }

    cout << "\nContents of tree:\n\n";
    root->print();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:06:33.407

好的。我盯着看了一会儿。甚至写了我自己的版本，但最后这是我认为你应该做的：

首先，更改`treeInsert()`为如下所示：

```
void treeInsert(TreeNode *&root, const string& newItem,int num)
{
    if (root == NULL )
    {
        root = new TreeNode(newItem, list<int>(1, num));
        return;
    }

    if (newItem < root->data )
    {
        treeInsert( root->left, newItem, num );
    }
    else if (root->data < newItem)
    {
        treeInsert( root->right, newItem, num );
    }

    else
    {   // found the item. just add it to the node's list
        //  if it isn't already there.
        if (find(root->lineNum.begin(), root->lineNum.end(), num) == root->lineNum.end())
            root->lineNum.push_back(num);
    }
} 
```

**为什么？**：这有效地首先检查节点是否为NULL。如果是，那么我们要新建一个节点，并且这样做，其中一个新的列表中的一项：当前行号。如果根*不*为NULL，那么我们有三个选项。

1.  如果这个词比根词“少”，则向下移动左树。
2.  否则，如果该词比根词“更大”，则向下移动右树
3.  否则它**既不**小于也不大于，因此它**必须**相等，因此在行列表中搜索当前行号，如果不存在，则添加它。

仅此一项就解决*了很多*问题。一方面，它减少了我将对您的*主要*功能所做的其他更改（并且它变得*更加*简单）：

```
int main(int argc, char *argv[])
{
    TreeNode *root = NULL;

    ifstream test("test.txt");
    string line;
    int currentLine=0;

    // Go line by line
    while (getline(test,line))
    {
        ++currentLine;

        istringstream strLine(line);
        string word;
        while (strLine >> word)
        {
            treeInsert(root, word, currentLine);
            cout << "\nContents of tree:\n";
            printTree(root);
        }
    }
    return 0;
} 
```

最后，这允许您丢弃以下不需要的函数：

```
void insert(TreeNode *&root, string newNode,list<int> num);
bool treeContains( TreeNode *root, string item );
TreeNode search(TreeNode *root, string item); 
```

通过我指出的更改，以下是我认为您期望的输出：

```
Contents of tree:
hello 1

Contents of tree:
hello 1
wonderful 1

Contents of tree:
hello 1
wonderful 1
world 1

Contents of tree:
hello 1
welcome 2
wonderful 1
world 1

Contents of tree:
hello 1
to 2
welcome 2
wonderful 1
world 1

Contents of tree:
hello 1
paradise 2
to 2
welcome 2
wonderful 1
world 1

Contents of tree:
hawaii 3
hello 1
paradise 2
to 2
welcome 2
wonderful 1
world 1

Contents of tree:
hawaii 3
hello 1
is 3
paradise 2
to 2
welcome 2
wonderful 1
world 1

Contents of tree:
hawaii 3
hello 1
is 3
paradise 2
to 2
welcome 2
wonderful 1 3
world 1 
```

我希望这有帮助。

# maven - 如何在 Maven 中编辑目录结构？

> ID：15333964
> 
> 赞同：6
> 
> 时间：2013-03-11T08:22:58.377
> 
> 标签：maven

我正在使用 Maven 项目，当我创建 jar 打包的 Maven 模块时，maven 自动生成目录结构为`src/main/java`,`src/main/resources`和. 我可以根据自己的意愿编辑上述名称吗？我可以将新文件夹添加到同一个父级吗？另外，当我用谷歌搜索时，我开始了解 abt super POM，任何人都可以建议如何使用自定义目录结构进行编辑。[我已经从链接http://m2eclipse.sonatype.org/sites/m2e](http://m2eclipse.sonatype.org/sites/m2e)为我的 Eclipse 配置了 sonatype maven`src/test/java``src/test/resources`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T08:31:52.180

假设您有充分的理由这样做，您可以重命名文件夹并通过在`pom.xml`项目中指定适当的属性/部分来指示 maven 编辑的文件夹是什么。我想 m2e 会在对 pom 进行更改后获取更改。

您案例中的相关部分将是（来自[superpom](http://maven.apache.org/pom.html#The_Super_POM)）

```
 <sourceDirectory>${project.basedir}/src/main/java</sourceDirectory>
    <testSourceDirectory>${project.basedir}/src/test/java</testSourceDirectory>
    <resources>
      <resource>
        <directory>${project.basedir}/src/main/resources</directory>
      </resource>
    </resources>
    <testResources>
      <testResource>
        <directory>${project.basedir}/src/test/resources</directory>
      </testResource>
    </testResources> 
```

如果要添加其他源文件夹或资源（不是子文件夹），则可以使用[build helper maven plugin](http://mojo.codehaus.org/build-helper-maven-plugin/)。同样，不确定 m2e 会做什么。

# android - 从标记中获取其他值

> ID：15333971
> 
> 赞同：6
> 
> 时间：2013-03-11T08:23:48.940
> 
> 标签：android, marker

我被这个问题困住了，我希望有人能引导我找到解决方案，直到现在我已经花了 3 天时间..

**问题**

我有 2 个活动，活动**A**是从 JSON 列表填充的列表视图。活动**B**是基于相同 json 列表的 Google maps v2，但它在 Map 上不在列表中。

在活动上有**一个**列表`onItemclicklistener`，当我单击它时，它会显示另一个活动并且它工作正常。这里没问题。一切都像应该的那样工作。

在活动**B**上有地图片段，它也填充了来自 JSON 列表的 lat-lng 值。所以地图上有10个+标记。因此，当我单击标记时，我会得到名称和地址，并且它也可以正常工作。

**这就是我想要的**

当我单击列表中的项目时，它会将我带到活动**C**。并且有一些文本视图可以显示公司营业的日期。这一步完成了，它工作正常，一切都像它应该的那样。

当我点击地图时，有标记，所以我有`onInfoWindowClick()`。这也很好，但我怎样才能从中获得更多价值`onInfoWindowClick()`？

我的意思是，我可以得到（getSnippet 和 getTitle from marker）但我在列表中有其他值，比如姓名、日期、id。我得到的只是 .getsnippet 和 getTitle 通过标记。

我非常坚持这个问题。我真的很想在名单上做同样的事情。当我按下列表时，它会获取所有值，但是当我在地图上时，我只能获得带有标题和片段的标记窗口。对不起，如果我不能很好地解释，请随时问我是否还有更多你想看的代码。

```
 for (HashMap<String, String> hashMap : contactList) {
            map.addMarker(new MarkerOptions()
              .position(new LatLng(Double.valueOf(hashMap.get(TAG_LAT)) , Double.valueOf(hashMap.get(TAG_LNG))))
              .title(hashMap.get(TAG_ADDRESS))
              .snippet(hashMap.get(TAG_NAME)) ); 
```

* * *

```
@Override
public void onInfoWindowClick(Marker marker) {

    marker.getTitle();
    marker.getSnippet(); 
} 
```

**更新代码**

```
 public class MapBased extends AbstractMapActivity implements OnNavigationListener,OnInfoWindowClickListener
{
    private static final String TAG_Location = "location_id";
    private static final String TAG_Company = "company_id";
    private static final String TAG_PLACE = "place";
    private static final String TAG_POSTAL = "postal";
    private static final String TAG_CITY = "city";
    private static final String TAG_MONDAY = "monday";
    private static final String TAG_TUESDAY = "tuesday";
    private static final String TAG_WEDNESDAY = "wednesday";
    private static final String TAG_THURSDAY = "thursday";
    private static final String TAG_FRIDAY = "friday";
    private static final String TAG_SATURDAY = "saturday";
    private static final String TAG_SUNDAY = "sunday";
    private static final String TAG_TYPE = "type";
    private static final String TAG_NOCAR = "nocar";

    private static final String TAG_NAME = "name";
    private static final String TAG_LAT = "lat";
    private static final String TAG_LNG = "lng";
    private static final String TAG_ADDRESS = "address";
    private static final String TAG = "Debug of Project"; // 

     private String a;
private String b;

private double my_lat;
private double my_lng;

private static final String STATE_NAV="nav";
private static final int[] MAP_TYPE_NAMES= { R.string.normal, R.string.hybrid, R.string.satellite, R.string.terrain };
private static final int[] MAP_TYPES= { GoogleMap.MAP_TYPE_NORMAL, GoogleMap.MAP_TYPE_HYBRID, GoogleMap.MAP_TYPE_SATELLITE,
                                GoogleMap.MAP_TYPE_TERRAIN };
private GoogleMap map=null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    SQLiteDatabase db = openOrCreateDatabase("mydb.db", Context.MODE_PRIVATE, null);
    db.execSQL("CREATE TABLE IF NOT EXISTS gps_kordinater (ID INTEGER PRIMARY KEY AUTOINCREMENT, Latitude REAL, Longitude REAL);");

    String query = "SELECT Latitude,Longitude FROM gps_kordinater WHERE Id = (SELECT MAX(Id) FROM gps_kordinater)";
    Cursor cursor = db.rawQuery(query, null);
    if(cursor != null)
    {
    cursor.moveToFirst();
     a = cursor.getString(0);

     b = cursor.getString(1);
    }

   String url = "http://example.com";

   my_lat = Double.valueOf(a);  
   my_lng = Double.valueOf(b);

   db.close();

    // now enabled if disabled = ingen support for jb aka 4.0
     if (android.os.Build.VERSION.SDK_INT > 9) {
          StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
          StrictMode.setThreadPolicy(policy);
     }

    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();
    JSONParser jParser = new JSONParser();
    JSONArray json = jParser.getJSONFromUrl(url);
    try {
           for(int i = 0; i < json.length(); i++){
                JSONObject c = json.getJSONObject(i);

                String lat = c.getString(TAG_LAT);
                String lng = c.getString(TAG_LNG);
                String name = c.getString(TAG_NAME);
                String adresse = c.getString(TAG_ADDRESS);

                String location_id = c.getString(TAG_Location);
                String company_id = c.getString(TAG_Company);
                String place = c.getString(TAG_PLACE) ; 
                String postal = c.getString(TAG_POSTAL);
                String city = c.getString(TAG_CITY);
                String monday = c.getString(TAG_MONDAY);
                if(c.getString(TAG_MONDAY).isEmpty())
                    {
                        monday="Lukket";
                    }
                else
                    {
                        monday=c.getString(TAG_MONDAY);
                    }

                String tuesday = c.getString(TAG_TUESDAY);
                if(c.getString(TAG_TUESDAY).isEmpty())
                    {
                        tuesday="Lukket";
                    }
                else
                    {
                        tuesday=c.getString(TAG_TUESDAY);
                    }

                String wednesday = c.getString(TAG_WEDNESDAY);  
                if(c.getString(TAG_WEDNESDAY).isEmpty())
                    {
                        wednesday="Lukket";
                    }
                else
                    {
                        wednesday=c.getString(TAG_WEDNESDAY);
                    }

                String thursday = c.getString(TAG_THURSDAY);
                if(c.getString(TAG_THURSDAY).isEmpty())
                    {
                        thursday="Lukket";
                    }
                else
                    {
                        thursday=c.getString(TAG_THURSDAY);
                    }

                String friday = c.getString(TAG_FRIDAY);
                if(c.getString(TAG_FRIDAY).isEmpty())
                    {
                        friday="Lukket";
                    }
                else
                    {
                        friday=c.getString(TAG_FRIDAY);
                    }

                String saturday = c.getString(TAG_SATURDAY);
                if(c.getString(TAG_SATURDAY).isEmpty())
                    {
                        saturday="Lukket";
                    }
                else
                    {
                        saturday=c.getString(TAG_SATURDAY);
                    }   

                String sunday=c.getString(TAG_SUNDAY);
                if(c.getString(TAG_SUNDAY).isEmpty())
                    {
                        sunday="Lukket";
                    }
                else
                    {
                        sunday=c.getString(TAG_SUNDAY);
                    }

                String nocar = c.getString(TAG_NOCAR);
                String type = c.getString(TAG_TYPE);

            // creating new HashMap
            HashMap<String, String> map2 = new HashMap<String, String>();

            // adding each child node to HashMap key => value

            map2.put(TAG_LAT, lat);
            map2.put(TAG_LNG, lng);

            map2.put(TAG_NAME, name);
            map2.put(TAG_ADDRESS, adresse);
            map2.put(TAG_Location, location_id);
            map2.put(TAG_Company, company_id);
            map2.put(TAG_PLACE, place);
            map2.put(TAG_POSTAL, postal);
            map2.put(TAG_CITY, city);
            map2.put(TAG_MONDAY, monday);
            map2.put(TAG_TUESDAY, tuesday);
            map2.put(TAG_WEDNESDAY, wednesday);
            map2.put(TAG_THURSDAY, thursday);
            map2.put(TAG_FRIDAY, friday);
            map2.put(TAG_SATURDAY, saturday);
            map2.put(TAG_SUNDAY, sunday);
            map2.put(TAG_TYPE, type);
            map2.put(TAG_NOCAR, nocar);

            // adding HashList to ArrayList
            contactList.add(map2);

             Log.d(TAG, "Hashmap 1: " + map2); 

             Log.d(TAG, "Hashmap 2: " + map2.values()); 
             Log.d(TAG, "array 4: " + contactList); 

           }

           Log.d(TAG, "array 5: " + contactList); 

    } catch (JSONException e) {
        e.printStackTrace();
        Log.e("JSON Parser", "Error parsing data " + e.toString());

    }

    if (readyToGo()) {
        setContentView(R.layout.map_based);

        SupportMapFragment mapFrag=
                (SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map2);
        initListNav();

        map=mapFrag.getMap();

        CameraUpdate center= CameraUpdateFactory.newLatLng(new LatLng(my_lat , my_lng));

        CameraUpdate zoom=CameraUpdateFactory.zoomTo(10);
        map.moveCamera(center);
        map.animateCamera(zoom);

        for (HashMap<String, String> hashMap : contactList) {
            map.addMarker(new MarkerOptions()
              .position(new LatLng(Double.valueOf(hashMap.get(TAG_LAT)) , Double.valueOf(hashMap.get(TAG_LNG))))
              .title(hashMap.get(TAG_ADDRESS))
              .snippet(hashMap.get(TAG_NAME))

              );
        }

        map.setInfoWindowAdapter(new PopupMapBasedAdapter(getLayoutInflater()));
        map.setOnInfoWindowClickListener(this);

    }

     Button btn_web = (Button) findViewById(R.id.footer_list_btn);
        btn_web.setOnClickListener(new View.OnClickListener() {
            @Override
                public void onClick(View view) {
                //myVib.vibrate(50);
                finish();
                }
            });
}

@Override
public boolean onNavigationItemSelected(int itemPosition, long itemId) {
    map.setMapType(MAP_TYPES[itemPosition]);
    return(true);
}

@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    super.onSaveInstanceState(savedInstanceState);
    savedInstanceState.putInt(STATE_NAV,getSupportActionBar().getSelectedNavigationIndex());
}

@Override
public void onInfoWindowClick(Marker marker) {

    marker.getTitle();
    marker.getSnippet(); 
}

   @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);  
    getSupportActionBar().setSelectedNavigationItem(savedInstanceState.getInt(STATE_NAV));
    }

    private void initListNav() {
ArrayList<String> items=new ArrayList<String>();
ArrayAdapter<String> nav=null;
ActionBar bar=getSupportActionBar();

    for (int type : MAP_TYPE_NAMES) {
        items.add(getString(type));
    }
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
        nav=
                new ArrayAdapter<String>(
                        bar.getThemedContext(),
                        android.R.layout.simple_spinner_item,
                        items);
                }
    else {
        nav=
            new ArrayAdapter<String>( 
                    this,
                   android.R.layout.simple_spinner_item,
                   items);
                }

    nav.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    bar.setListNavigationCallbacks(nav, this);  
}

    } 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-11T08:45:53.330

您不能再向标记添加数据，除非您将其全部放入片段中。

因此，如果您想向标记添加更多数据，则必须将其存储在链接到标记的外部变量中。

[每个制作的标记都有一个唯一的 ID。](http://developer.android.com/reference/com/google/android/gms/maps/model/Marker.html#getId%28%29)

您可以使用此信息将映射到此 ID 的任何其他数据保存在单独的变量中。

**例子：**

**创建一个您可以访问的变量：**

```
 /**
  * Create your variable where you store all your data mapped to the marker ID, 
  * make it accessible where you want.
  * The key of this hashmap is your marker ID, the value is another Map with extra data
  */
 HashMap<String, HashMap> extraMarkerInfo = new HashMap<String, HashMap>(); 
```

**选项 1 更改标记代码，以便向此变量添加额外数据**

```
for (HashMap<String, String> hashMap : contactList) {
     // Create your marker like normal, nothing changes
     Marker marker = map.addMarker(new MarkerOptions()
         .position(new LatLng(Double.valueOf(hashMap.get(TAG_LAT)) , Double.valueOf(hashMap.get(TAG_LNG))))
         .title(hashMap.get(TAG_ADDRESS))
         .snippet(hashMap.get(TAG_NAME)));

     // When you created the marker you store the extra data from your JSON in another variable (HashMap for example)
     HashMap<String, String> data = new HashMap<String, String>();

     data.put(TAG_Location,hashMap.get(TAG_Location));
     data.put(TAG_Company,hashMap.get(TAG_Company));
     data.put(TAG_PLACE,hashMap.get(TAG_PLACE));
     data.put(TAG_POSTAL,hashMap.get(TAG_POSTAL));
     data.put(TAG_CITY,hashMap.get(TAG_CITY));
     data.put(TAG_MONDAY,hashMap.get(TAG_MONDAY));
     data.put(TAG_TUESDAY,hashMap.get(TAG_TUESDAY));
     data.put(TAG_WEDNESDAY,hashMap.get(TAG_WEDNESDAY));
     data.put(TAG_THURSDAY,hashMap.get(TAG_THURSDAY));
     data.put(TAG_FRIDAY,hashMap.get(TAG_FRIDAY));
     data.put(TAG_SATURDAY,hashMap.get(TAG_SATURDAY));
     data.put(TAG_SUNDAY,hashMap.get(TAG_SUNDAY));
     data.put(TAG_TYPE,hashMap.get(TAG_TYPE));
     data.put(TAG_NOCAR,hashMap.get(TAG_NOCAR));

     // Save this marker data in your previously made HashMap mapped to the marker ID. So you can get it back based on the marker ID
     extraMarkerInfo.put(marker.getId(),data);

} 
```

**简单选项 2 只需将整个地图保存在外部变量中**

```
for (HashMap<String, String> hashMap : contactList) {
     // Create your marker like normal, nothing changes
     Marker marker = map.addMarker(new MarkerOptions()
         .position(new LatLng(Double.valueOf(hashMap.get(TAG_LAT)) , Double.valueOf(hashMap.get(TAG_LNG))))
         .title(hashMap.get(TAG_ADDRESS))
         .snippet(hashMap.get(TAG_NAME)));

     // Just save the entire json hashmap into the external variable
     extraMarkerInfo.put(marker.getId(),hashMap);

} 
```

现在您可以随时访问该 extraMarkerInfo，您可以使用`getID()`.

```
@Override
public void onInfoWindowClick(Marker marker) {

    String title = marker.getTitle();
    String snippet = marker.getSnippet(); 

    // Get extra data with marker ID
    HashMap<String, String> marker_data = extraMarkerInfo.get(marker.getId());

    // Getting the data from Map
    String location = marker_data.get(TAG_Location);
    String company = marker_data.get(TAG_Company);
    String place = marker_data.get(TAG_PLACE);
    //.. etc etc
} 
```

这只是一个使用 HashMaps 的小例子，但您可以根据自己的喜好使用不同的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-04T12:47:24.163

一个非常好的和简单的方法是 - 每当你在地图上添加一个标记时，以类似的方式引用它`HashMap<Marker, <WhateverDataYouNeed> extraMarkerData`

然后，每当您想要它的数据时，您所要做的就是调用`extraMarkerData.get(<yourMarker>)`返回它。简单。

感谢这个写教程的好心人，我发现它对于我需要的东西来说非常广泛，但它提供了一个简单的想法：

[http://bon-app-etit.blogspot.be/2012/12/add-informationobject-to-marker-in.html](http://bon-app-etit.blogspot.be/2012/12/add-informationobject-to-marker-in.html)

我的额外数据如下所示：

```
private HashMap<Marker,HashMap<String,String>> markerUserData; 
```

然后，每当我向地图添加标记时，我都会确保使用标记作为键来引用其数据

```
Marker marker = map.addMarker(new MarkerOptions()
        .position(new LatLng(<lat>,<lng>)
        .title(<markerTitle>)
        .snippet(<markerSnippet>)
);

markerUserData.put(marker,<myExtraMarkerDataHashMap>);    //add reference to marker data 
```

因为我有自己的课要处理`OnInfoWindowClickListener`，所以我做了一个公共吸气剂

```
public HashMap<String,String> getDataforMarker(Marker marker){
    return extraMarkerData.get(marker);
} 
```

OnInfoWindowClickListener：

```
@Override
public void onInfoWindowClick(Marker marker) {
    Log.i("SFCT","Data for marker = "+activity.getDataforMarker(marker));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T08:45:35.407

我想您必须有一个列表，其中包含您在 MapActivity 的 ListAcivity 中也拥有的所有信息。当用户单击标记时，您会在列表中查找该特定对象（我猜是联系人）并获取所需的其余信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-10T14:15:21.567

```
@Override
    public boolean onMarkerClick(Marker marker) {
        // TODO Auto-generated method stub
        String selected_marker=marker.getTitle();
        return false;
    } 
```

然后您可以根据单击哪个标记（您想要哪个操作）来工作。在这里，您知道单击了哪个标记...

# mysql - mysql 查询算什么

> ID：15333973
> 
> 赞同：0
> 
> 时间：2013-03-11T08:24:14.010
> 
> 标签：mysql

嘿伙计们，我有一个 mysql 表，其中包含一些记录，如下图所示！

![date_time 字段具有 datetime 数据类型](../Images/b1de12bc77e1de14c7bd5d0b171c9c07.png)

我有以下查询来计算指定时间范围内的记录数（sr13、r4 和华为的记录数）。

```
$date1 = "2012-01-02 03";
$date2 = "2014-12-30 24";
$counter_result = $this->db->query("select count(sr13) as count_sr13, count(r4) as count_r4, count(huawei) as count_huawei from cdrcount where date_time BETWEEN '$date1%' and '$date2%' "); 
```

查询将三个字段的值返回为 0。查询有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:29:29.700

试用`time_to_sec`功能

```
select count(sr13) as count_sr13, count(r4) as
count_r4, count(huawei) as count_huawei from cdrcount 
where time_to_sec(date_time) 
BETWEEN time_to_sec('date1') and time_to_sec('date2'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:31:05.767

要正确比较日期，您应该使用以下完整值：

```
$date1 = "2012-01-02 03:00:00";
$date2 = "2014-12-30 23:59:59"; 
```

`%`并从查询中删除：

```
$counter_result = $this->db->query("select count(sr13) as count_sr13, count(r4) as count_r4, count(huawei) as count_huawei 
    from cdrcount 
    where date_time BETWEEN '$date1' and '$date2'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:28:14.050

原因是因为您在contains 中`date_time`的值被隐式转换为字符串。因此，它将字符串数据类型中的日期与包含并且显然没有匹配记录的值进行比较，尝试删除它，`BETWEEN``%``%`

```
select  count(sr13) as count_sr13, 
        count(r4) as count_r4, 
        count(huawei) as count_huawei 
from    cdrcount 
where   date_time BETWEEN '$date1' and '$date2' 
```

并且您的日期应格式化为有效日期，例如，`2012-01-02 03:00:00`

# vba - 如何从查询结果中填充文本框

> ID：15333974
> 
> 赞同：2
> 
> 时间：2013-03-11T08:24:21.593
> 
> 标签：vba, ms-access, ms-access-2010

我的表单上有一个组合框和一个文本框。

如果用户从组合框中选择一个值，例如：**Cvalue**，那么我想用查询结果填充文本框，例如：

```
Select S1 From Test where Name=Cvalue 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T14:08:45.760

如果您要填充的文本框未绑定（不必更新基础表单数据源中的字段），那么您可以`DLOOKUP`在文本框的控件源中使用并避免使用 VBA：

```
=DLOOKUP("S1", "Test", "cvalue='" & forms!MyForm!Combo0 & "'") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T09:21:56.400

```
Private Sub Command4_Click()

    Dim con As ADODB.Connection

    Set con = Application.CurrentProject.Connection

    Dim rs As ADODB.Recordset

    Set rs = New ADODB.Recordset

    ssql = "select s1 from test where cvalue='" & Combo0.Value & "'"

    rs.Open ssql, con

    Do Until rs.EOF = True

       Text2.SetFocus

       Text2.Text = rs.Fields!s1

       rs.MoveNext

    Loop

End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-13T13:46:39.657

`txtBox1.text = myResults.GetString`

假设 txtBox1 是您的文本框，而 myResults 是您查询的记录集。不需要循环。

# regex - 匹配正则表达式的反面："([az])\1{3,}"

> ID：15333975
> 
> 赞同：0
> 
> 时间：2013-03-11T08:24:27.523
> 
> 标签：regex

我可以指定一个模式并让其他不适合该模式的所有内容进行匹配吗？

正则表达式匹配：我想匹配这样的东西

我尝试了所有准备好这个例子：

```
"ffffffff".matches("([a-z])\1{3,}") = true
"fffffasdf".matches("([a-z])\1{3,}") = false
"asdffffffasdf".matches("([a-z])\1{3,}") = false 
```

但是这个例子的相反方式是什么？这个不行`(?![a-z])\1{3,})`

我需要这样的比赛：

```
"ffffffff".matches(" ??? ") = false 
"fffffasdf".matches("(???") = true
"asdffffffasdf".matches("???") = true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:37:45.917

您可以使用[负前瞻](http://www.regular-expressions.info/lookaround.html)：

```
^(?!([a-z])\1{3,}$).* 
```

# objective-c - 在自定义 NSSegmentedCell 中绘制“按下”状态

> ID：15333977
> 
> 赞同：1
> 
> 时间：2013-03-11T08:24:31.563
> 
> 标签：objective-c, cocoa, subclass

我正在使用 BGHUDSegmentedCell 的一个版本来绘制 HUD 样式的分段控件 (NSSegmentedControl)。

但是，当用户单击某个片段时，我看不到任何方法可以在“按下”状态下绘制单元格（以便用户获得正确的跟踪反馈）。默认的 NSSegmentedControl/Cell 管理这个，所以大概有一种方式，虽然是系统代码，但谁知道它是否是公共方式。

子类覆盖：

```
- (void)drawWithFrame:(NSRect)frame inView:(NSView *)view {
- (void)drawSegment:(NSInteger)segment inFrame:(NSRect)frame withView:(NSView *)view { 
```

NSSegmentedCell 中是否有任何方法可以确定它正在绘制处于“按下”状态的段并在跟踪期间适当地显示它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-02T10:14:07.497

您可能最好通过覆盖 NSCell 的鼠标跟踪方法来实现自己的按下/按下状态跟踪。

```
- (BOOL)startTrackingAt:(NSPoint)startPoint inView:(NSView *)controlView;
- (void)stopTracking:(NSPoint)lastPoint at:(NSPoint)stopPoint inView:(NSView *)controlView mouseIsUp:(BOOL)flag;
- (BOOL)continueTracking:(NSPoint)lastPoint at:(NSPoint)currentPoint inView:(NSView *)controlView; 
```

那些结合起来`-(CGFloat)widthForSegment:(NSInteger)segment;`可能足以确定鼠标被按下的部分，然后适当地渲染。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-04T01:12:12.570

最近遇到了这个问题，发现可以检查当前的鼠标事件以查看是否按下了目标段。从内部调用`drawSegment:inFrame:withView:`：

```
func isSegmentPressed(segment: Int, frame: NSRect, controlView: NSView) -> Bool {
    if let event = NSApp.currentEvent, event.type == .leftMouseDown, isEnabled(forSegment: segment) {
        let location = controlView.convert(event.locationInWindow, from: nil)
        return frame.contains(location)
    }
    return false
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:55:53.333

你可以在`segmentcell`课堂上这样检查

```
NSLog(@"selectedSegment - > ",[self selectedSegment]); 
```

检查选定的段索引并做必要的事情。

希望这可以帮助 ！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T07:13:53.880

I found a way. It's not ideal, but it does work in my testing and for my case, but it uses the private NSSegmentedCell method:

```
- (NSInteger)_segmentHighlightState:(NSInteger)arg1; 
```

This method returns 1 for unselected cells, 3 for unselected cells while they are pressed during tracking, 4 for selected cells, and 5 for selected cell while pressed during tracking.

So testing bit 1 (mask with 0x02) gives the desired "is pressed" state. Sadly this is useless if you want to ship on the Mac App Store, but since Keyboard Maestro is excluded from the Mac App Store because of the sandboxing requirement, that no longer concerns me.

It is still worth defending against any possible changes, with code like this:

```
- (BOOL) mySegmentIsPressed:(int)segment;
{
    NSInteger highlightState = 0;
    if ( [self respondsToSelector:@selector(_segmentHighlightState:)] ) {
        highlightState = [self _segmentHighlightState:segment];
    } else {
        highlightState = ([self selectedSegment] == segment) ? 4 : 1;
    }
    return (highlightState&2) != 0;
} 
```

The startTrackingAt method @arun.s suggested doesn't work because NSSegmentedControl uses a different and unknown tracking area )and besides, even rectForSegment:inFrame is a private method so you can't even really find out where the cell is without using a (less) private method.

I'd rather a documented way to do this, but short of implementing the entire control afresh, I don't see how.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-06-02T13:28:17.013

这是我实现新闻状态的方式。

```
- (void) drawSegment:(NSInteger)segment inFrame:(NSRect)frame withView:(NSView *)controlView
    {
        NSColor *startColor = [NSColor colorWithDeviceRed:0.690196 green:0.690196 blue:0.690196 alpha:1.0];
        NSColor *endColor = [NSColor colorWithDeviceRed:0.878431 green:0.878431 blue:0.878431 alpha:1.0];
        NSGradient *grad = [[NSGradient alloc] initWithStartingColor:startColor endingColor:endColor];

        if(![self isSelectedForSegment:segment]) {
            [grad drawInRect:frame angle:270];
        }
        [super drawSegment:segment inFrame:frame withView:controlView];
    } 
```

在未按下状态下，分段控件绘制渐变以模仿工具栏（或窗口边框）的背景。我只是在按下控件时不画画。

# linux - ] 命令和命令 > [忽略输出]

> ID：15333979
> 
> 赞同：0
> 
> 时间：2013-03-11T08:24:50.467
> 
> 标签：linux, command, echo, output

```
[root@server1 ~]# perl file.pl & echo dog > custom-out.log &

[1] 24265

[2] 24266

cat

[root@server1 ~]# 
```

我想知道我怎么能做到这一点，但同时又不让它回响

```
[1] 24265
[2] 24266 
```

如您所见，我有 perl.pl 需要一点时间。我只想要回声的结果。所以我只想立即将“cat”作为输出并打破控制台，以便 php 中的 ssh2 可以读取结果。因此我需要这个的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:20:53.837

指出进程已被后台处理的消息正在由 shell 写入 stderr。如果你将它包装在一个子外壳中并丢弃它的标准错误，你可能会得到你所期望的。

```
( perl file.pl & echo dog > custom-log.out & ) 2>/dev/null 
```

也就是说，您几乎肯定希望将其放入实际文件中并从您的 PHP 代码中执行，而不是依赖它正确调用 shell。

# ruby - Ruby 和大哈希：什么时候会出现性能下降？带有 800K 键的散列运行速度非常慢

> ID：15333985
> 
> 赞同：3
> 
> 时间：2013-03-11T08:25:04.603
> 
> 标签：ruby, hash

我们知道，在失去恒定时间访问之前，Ruby 哈希可以容纳多少项目没有固定的规则，但我们希望有人能分享一些建议。

我们将 800K 键存储在 Ruby 哈希中，并为它们分配一个布尔值 true。而已。

每次查找似乎需要几秒钟。

Ruby 哈希是否应该使用 800K 键显示恒定时间查找？

是否有阈值或经验法则来预测何时会因大哈希而导致性能下降？我们很乐意听取 Ruby 专家的意见。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:47:42.187

除了使用 s.to_sym 将字符串转换为符号外，前提是您没有在一系列查找过程中创建或销毁哈希键，您还可以在一组查找之前调用 GC.disable 并在一组查找之后调用 GC.enable。这将暂时禁用垃圾收集，如果您正在运行例如，这样做是相对安全的。一个不会创建或删除大量对象的简单循环。

当内存中（Ruby）对象的数量达到数百万时，Ruby 的性能会显着下降。一些性能损失是垃圾收集例程进行盘点所花费的时间。

# linux - 如何在 Linux 上使用 Vtune Analyzer API

> ID：15333986
> 
> 赞同：3
> 
> 时间：2013-03-11T08:25:04.900
> 
> 标签：linux, profiling, performance, intel-vtune, intel-mic

我想使用 Vtune Profiler API 来分析在 Xeon Phi（Linux，使用卸载执行）上运行的代码，以查看执行的指令数、L1 缓存未命中数等。但我找不到任何解释如何使用的地方这个图书馆。

在 Linux 中哪里可以找到库文件和包含文件？如何编写代码来分析在 Xeon Phi 上运行的短代码？

我会期待这样的事情：

```
//this code will be executed on host processor
Read_counters();
Code_to_run on Xeon Phi
Stop_counters();
Print results(); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T22:36:20.587

VTune 中没有这种 API 支持。在 VTune GUI 或命令行中使用 Knights Corner 平台分析 - 它在主机上运行您的程序，但仅从 Xeon Phi 卡收集硬件计数器。即结果你应该只看到卸载代码的性能指标。

您可能还会发现这篇文章对解释结果很有用：http: [//software.intel.com/en-us/ARTICLES/OPTIMIZATION-AND-PERFORMANCE-TUNING-FOR-INTEL-XEON-PHI-COPROCESSORS-PART-2-UNDERSTANDING](http://software.intel.com/en-us/ARTICLES/OPTIMIZATION-AND-PERFORMANCE-TUNING-FOR-INTEL-XEON-PHI-COPROCESSORS-PART-2-UNDERSTANDING)

# iphone - 隐藏多个元素

> ID：15333987
> 
> 赞同：0
> 
> 时间：2013-03-11T08:25:07.673
> 
> 标签：iphone, xcode, sdk

我有例如2`UIButton`

我知道如何隐藏每一个：

```
button1.hidden = 1;
button2.hidden = 1; 
```

有没有办法一次隐藏这两个按钮？（例如`[button1, button2].hidden = 1`：）

谢谢

编辑：数组样式有什么办法吗？

例如：

```
array *buttons = [button1, button2 ...] ;   
buttons[0,3,5,10].hidden = 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:35:04.230

您可以简单地使用：

```
 for (UIButton *btn in [self.view subviews]) {
    btn.hidden = YES;
} 
```

或者您可以按条件找到按钮：

```
 for (UIButton *btn in [self.view subviews]) {
    if ([btn tag]<=2) {
        btn.hidden = YES;

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:39:03.637

创建一个函数来做到这一点：

```
- (void)buttonAction
{
    for (UIButton *button in [self.view subviews])
    {
        if (button.hidden == YES)
             button.hidden = NO;
        else
             button.hidden = YES;
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:49:45.797

嗯，这很棘手，但根据您的要求，有一个替代解决方案。

1）为每个按钮设置标签

```
[button1 setTag:1];
[button2 setTag:2];
...
... 
```

2）找到带有标签的按钮对象（您可以使用循环运行）

```
for(int i=0;i<numberOfButton;i++)
{
    UIButton *targetButton = (UIButton *)[self.view viewWithTag:i];
    targetButton.hidden = 1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T08:28:40.123

可以这样做

```
button1.hidden = button2.hidden = YES; 
```

但是，如果您可以创建一个可以帮助您的方法，例如

```
- (void)allButtonHidden:(BOOL)value {
    button1.hidden = value;
    button2.hidden = value;
} 
```

并称之为

```
[self allButtonHidden:YES]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T09:06:51.920

如果您有一系列按钮，例如：

```
NSArray *buttonsArray = @[bt1,bt2,bt3,bt4]; 
```

以及对应于按钮状态的布尔值数组：

```
NSArray *stateArray = [@YES,@NO,@NO,@YES]; 
```

然后你可以：

```
for (UIButton *bt in buttonsArray){
   bt.hidden = [[stateArray objectAtIndex:[buttonsArray indexOfObject:bt]] boolValue];
} 
```

或更有效的：

```
for(int index=0; index<buttonsArray.count; index++){
    [[buttonsArray objectAtIndex:index] setHidden:[[stateArray objectAtIndex:index] boolValue]];
} 
```

或更干净，可读的：

```
for(int index=0;index<buttonsArray.count; index++){
   UIButton *bt = [buttonsArray objectAtIndex:index];
   BOOL *state = [[stateArray objectAtIndex:index] boolValue];
   bt.hidden=state;
} 
```

最简单的方法是（理论上）@adali 给出的注释，将其添加到父视图，然后隐藏父视图。但是您应该适当地创建父视图并根据您的 UI 设置父视图框架。（选择对您来说更容易的：即创建按钮、状态数组等或创建父视图并正确定位）

# spring - Spring 3.2.1 和 Tiles 3.0.1 不起作用？

> ID：15333989
> 
> 赞同：5
> 
> 时间：2013-03-11T08:25:13.057
> 
> 标签：spring, tiles

我正在使用 Tiles 3.0.1 和 Spring 3.2.1 ，但它不起作用，适用于 tile 2.2.2。我发现它是一个常见问题，想知道是否有任何使它起作用。

将磁贴更改为 3.0.1 时出现以下错误

```
 java.lang.NoClassDefFoundError: org/apache/tiles/startup/BasicTilesInitializer
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(Unknown Source)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getDeclaredConstructors(Unknown Source)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:230)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:976)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:949)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:490)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:626)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:389)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:294)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4797)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: org.apache.tiles.startup.BasicTilesInitializer
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    ... 36 more
Mar 11, 2013 1:49:32 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
Mar 11, 2013 1:49:32 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/gzl-client-web] startup failed due to previous errors
Mar 11, 2013 1:49:32 PM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext
Mar 11, 2013 1:49:32 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Mar 11, 2013 1:49:32 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"] 
```

请建议是否可能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T11:23:39.317

我让它与瓷砖 3 一起使用。

以下是所需的罐子：

1.  瓷砖-api 3.0.1 罐子
2.  瓷砖核心 3.0.1 罐子
3.  瓷砖-jsp 3.0.1 罐子
4.  瓷砖请求 api 1.0.1 jar
5.  公共消化器 2.0 罐
6.  commons-beanutils 1.8.0 jar

并将以下 bean 添加到您的调度程序类中：

```
<bean id="tilesviewResolver" class="org.springframework.web.servlet.view.tiles3.TilesViewResolver"/>
<bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles3.TilesConfigurer">
  <property name="definitions">
   <list>
    <value>/WEB-INF/views/**/tiles.xml</value>
      <value>/WEB-INF/layouts/tiles.xml</value>
   </list>
  </property>
 </bean>
    </beans> 
```

它对我有用，我能够阅读瓷砖定义并显示视图..试试这个

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-14T19:11:46.490

它只适用于我的 tiles-api、tile-core、tile-jsp 依赖项。确保您引用了 tiles3 包中的 TilesConfigurer 而不是 tiles2。在我意识到我使用的是tiles3版本之前，我无法弄清楚。

# android - Android ZBar 自定义集成

> ID：15333990
> 
> 赞同：0
> 
> 时间：2013-03-11T08:25:16.723
> 
> 标签：android, zbar

再会。我正在尝试创建选项卡式应用程序（通过 TabHost），带有图标的选项卡栏应该始终可用。然而，我的一项活动实现了[ZBar 组件](https://github.com/DushyanthMaguluru/ZBarScanner)。推荐的使用方式是通过意图：

```
Intent intent = new Intent(this, ZBarScannerActivity.class);
startActivityForResult(intent, ZBAR_SCANNER_REQUEST); 
```

但在这种情况下，相机预览只会填满整个可用表面。如何在某个框架中运行此组件？我想我可以尝试通过 WebView 来做到这一点，但我不知道在这种情况下如何获得扫描结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:49:33.143

一个网络视图？不，这是个坏主意。

您只需调用`tabHost.setContent(intent);`并添加意图。

`startActivityForResult()`只是打开一个新`Activity`窗口，所以甚至不要使用它。

例子：

```
tabHost.addTab(tabHost.newTabSpec("tab1").setIndicator("HOME")
.setContent(new Intent(this,ZBarScannerActivity.class))); 
```

# c# - T4模板多输出

> ID：15333992
> 
> 赞同：4
> 
> 时间：2013-03-11T08:25:24.507
> 
> 标签：c#, t4

我想使用另一个 t4 模板来代替 this.WriteLine("Hello, World!"); 。那可能吗？

```
 <#@ template language="C#" hostspecific="True" debug="True" #>

<#@ output extension="txt" #>
<#@ include file="T4Toolbox.tt" #>

Sample Content

<#    for(int i=7;i<9;i++){

        SampleTemplate template = new SampleTemplate();
        template.Output.File = @"SubFolder\SampleOutput"+i+".txt";
        template.Output.Project = @"..\ClassLibrary2\ClassLibrary2.csproj";        
        template.Render();
    }
#>

<#+
    public class SampleTemplate : Template
    {
        public override string TransformText()
        {            
            this.WriteLine("Hello, World!");

            return this.GenerationEnvironment.ToString();
        }
    }
#> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-06-26T13:57:48.647

创建一个 T4 函数，将当前模板输出重定向到您指定的文件 - 将其保存为 SaveOutput.tt：

```
<#@ template debug="false" hostspecific="true" language="C#" #>
<#@ import namespace="System.IO" #>
<#

void SaveOutput(string outputFileName)
{
  string templateDirectory = Path.GetDirectoryName(Host.TemplateFile);
  string outputFilePath = Path.Combine(templateDirectory, outputFileName);
  File.WriteAllText(outputFilePath, this.GenerationEnvironment.ToString()); 
  this.GenerationEnvironment.Remove(0, this.GenerationEnvironment.Length);
}

#> 
```

在生成输出代码时，调用函数：

```
<#@ include file="SaveOutput.tt" #>
<#
    GenerateFile1();
    SaveOutput("File1.txt");  

    GenerateFile2();
    SaveOutput("File2.txt");
#>
<#
    void GenerateFile1()
    {
#>
This is file 1
<#
    }  

    void GenerateFile2()
    {
#>
This is file 2
<#+
    }
#> 
```

注意：我从[Oleg Sych](https://stackoverflow.com/users/106206/oleg-sych)的博客中获取了这段代码，因为他在他的博客上发布了一个现已失效的链接，其中显示了回答这个问题所需的步骤。由于 SO 不喜欢仅链接的答案，因此我重新发布了该博文中的相关代码。[您可以在此处的回程机器上](https://web.archive.org/web/20160501025241/http://www.olegsych.com/2008/03/how-to-generate-multiple-outputs-from-single-t4-template/)找到他的博文副本。唯一的区别是我在每个 T4 代码块开始后删除了“+”字符——它们似乎不是必需的。

# mobile - 使用 PHP 进行 Web 开发的 QA 流程

> ID：15333995
> 
> 赞同：0
> 
> 时间：2013-03-11T08:25:29.500
> 
> 标签：mobile, web, qa

除了“经典”Web 开发的 QA 流程之外，**是否**有任何特定的 QA 流程（静态分析、样式检查、单元测试......） ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T12:22:17.287

如果您正在开发任何移动应用程序，那么您可以使用以下标准或选项来测试该应用程序：

*   在不同版本的 Android 上测试您的应用
*   在不同版本的 iOS 上测试你的应用
*   在 iPad、iPhone、Android 平板电脑、Android 手机等不同设备上测试您的应用

可以涵盖的测试类型有：UI 测试、系统测试、功能测试、安全测试。

例如：iPhone 3G (iOS 5.1)、iPhone 4S (iOS 6.0.1) iPad 2 (iOS 6.1.2) 等。

这是因为根据不同版本的移动操作系统，应用程序可能会以预期或意外的方式运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T12:28:25.903

我唯一想到的在移动平台上有所不同的是应用程序在不同网络（如 3G 和 Wi-Fi）上使用时的反应。我认为它被称为网络测试。

# .net - VB.NET 如何将文件从 Windows 资源管理器拖到特定窗体？

> ID：15333996
> 
> 赞同：0
> 
> 时间：2013-03-11T08:25:32.467
> 
> 标签：.net, vb.net, drag-and-drop

在我的项目中，用户必须定义​​一些路径。通过单击按钮，将打开一个窗口，您可以在其中将文件/文件夹从 Windows 资源管理器拖放到该窗口。然后我的应用程序将采用该路径并存储它。

我有一个主表单，其中是设置页面的按钮。这将通过 form.show 打开新表单。在这个新表单中，我有另一个按钮。通过单击它，将打开另一个小表单，您可以在其中放置东西（form.show）。这就是事情变得棘手的地方。我无法进行拖放工作。

```
Public Class drag

    Private Sub dragdrop_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        Me.TopMost = True
        Me.AllowDrop = True
    End Sub

    Private Sub drag_DragDrop(sender As System.Object, e As System.Windows.Forms.DragEventArgs) Handles Me.DragDrop
        Dim theFiles() As String = CType(e.Data.GetData("FileDrop", True), String())
        For Each theFile As String In theFiles
            MsgBox(theFile)
        Next
    End Sub

    Private Sub drag_DragEnter(sender As System.Object, e As System.Windows.Forms.DragEventArgs) Handles Me.DragEnter
        If e.Data.GetDataPresent(DataFormats.FileDrop) Then
            e.Effect = DragDropEffects.Copy
        End If
    End Sub
End Class 
```

如果我创建新项目并将确切的代码粘贴到 form1，它就可以工作。为什么它不适用于这个多形式项目，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:16:43.863

我发现了问题。在 Vista/7/8 中以管理员权限运行应用程序很安全。

> 问题与安全权限的工作方式有关。从普通应用程序拖放到提升的应用程序的能力将破坏 UAC 背后的安全模型。但是，我不清楚为什么不显示 UAC 提示，从而允许临时提升操作（就像每天的任何 linux 用户体验一样）。这绝对是微软需要做的事情。困扰我的是这个问题已经很老了。Vista的行为相同。
> 
> 你可以做两件事（一件丑陋，一件烦人）
> 
> 丑陋：禁用UAC。但是您会失去它提供的所有额外安全性。
> 
> 烦人：使用另一个文件管理器并以管理员身份运行它 为什么要另一个文件管理器？因为您实际上无法提升 Windows 资源管理器。尽管在 Windows Explorer 图标的上下文菜单中看到了该选项并显示了 UAC 提示，但事实是 Windows Explorer 不会被提升。

# jquery - 未捕获的类型错误：对象 [对象对象] 没有方法“jPlayer”

> ID：15333998
> 
> 赞同：0
> 
> 时间：2013-03-11T08:25:35.820
> 
> 标签：jquery, ruby-on-rails, jplayer, typeerror

我正在使用 RoR，并从 JQuery 将 JPlayer 添加到我的项目中。我将它添加到文件夹资产中，在 html 中我有这个：

```
<title>jPlayer as an audio player</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <link href="/jPlayer/skin/pink.flag/jplayer.pink.flag.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript">
        //<![CDATA[
        $(document).ready(function(){

            $("#jquery_jplayer_1").jPlayer({
                ready: function () {
                    $(this).jPlayer("setMedia", { mp3:"http://www.jplayer.org/audio/mp3/TSP-01-Cro_magnon_man.mp3"});
                },swfPath: "js",supplied: "mp3",wmode: "window"

            });
        });
        //]]>
    </script> 
```

但我得到这个错误：

> 未捕获的类型错误：对象 [对象对象] 没有方法“jPlayer”

在这一行：`$("#jquery_jplayer_1").jPlayer({`

O 将对应的gem添加到Gem文件中，所以不知道会出什么问题。任何想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:35:35.047

1.  确保您的脚本被拉入页面，一种检查方法是使用 Chrome 调试器/FireFox Firebug 中的“源”选项卡并搜索文件。

2.  确保在包含 jQuery 之后包含脚本，因为它肯定依赖于它。

3.  确保您只包含了一个 jQuery 库。包含多个版本可能会导致问题。

4.  如果有其他一些库覆盖`$`，那么您的代码将无法正常工作，因为`$`它不再是别名`jQuery`。您可以使用它`jQuery.noConflict()`来避免与页面上使用相同变量的其他库发生冲突`$`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:16:14.177

两天后我解决了这个问题，我忘了把这个文件包含`jquery.jplayer.min.js`在`active_admin.rb`. 它只是添加： `config.register_javascript 'jquery.jplayer.min.js'`

小错误，但花了很多时间！

# java - 在java中，当我们使用函数'FileReader（String fileName）'时，我们应该将文件fileName保存在哪里？

> ID：15333999
> 
> 赞同：1
> 
> 时间：2013-03-11T08:25:43.990
> 
> 标签：java

在我的程序中，我使用了该函数`FileReader(String fileName)`来读取文件。此文件保存在 fileName 中，其中包含一个字符串`setup.ini`。我已将此文件保存在我正在编译我的 java 程序的同一文件夹中，但即使我从该文件夹中删除了该文件，我也没有收到任何找不到文件的异常。所以我想知道编译器是否从其他位置获取文件？

请看下面的代码：

```
public class ReadINI
{
    public static void main(String args[]) throws IOException
    {
        String s = getParameter("bin","setup.ini");
        System.out.println("Result   " + s);
    }

    public static String getParameter(String inputValue, String fileName)
    {
        try
        {
            BufferedReader myInput = new BufferedReader(new FileReader(fileName));
            try 
            {

                try {
                        String fileLine;
                        fileLine = myInput.readLine();

                        do
                        {
                            String stringArray[] = fileLine.split("=");
                            if (inputValue.equals(stringArray[0]))
                            return stringArray[1];
                        }while ((fileLine = myInput.readLine()) != null); 
                    }
                    catch (Exception e)
                    {
                        System.err.println("Error1: " + e);
                    }
             } // end try
             catch (Exception e)
             {
                 System.err.println("Error2: " + e);
             }

         } // end try
         catch (Exception e)
         {
             System.err.println("failed to open file setup.ini");
             System.err.println("Error3: " + e);
         }
         return "Not Found";
     }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:43:38.270

编译器不会在任何地方搜索您的文件。该文件是在运行时搜索的，而不是在编译时。*如果您提供相对路径，则将在您运行*程序的目录中搜索该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:11:36.880

任何在 Java 应用程序中打开文件的请求都会使 JVM 从`CLASSPATH`特定的 Java 类开始搜索。因此，当您将要在代码中打开的`CLASSPATH`文件放在 - 基本上是 .java 文件（以及因此编译的 .class 文件）所在的文件夹中。详细说明，如果`someFile.txt`要访问`SomeClass`位于 package`org.pack1.pack2`中`someFile.txt`的文件，则该文件应该存在于文件夹中`\org\pack1\pack2\`

不鼓励使用绝对路径来访问应用程序内的文件，因为它会削弱该应用程序的可移植性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:40:59.220

```
 the file should be right inside your project outside src directory , 
    the file should be in the same folder where src folder is present

    |--MyProject
       |--src
       |--youFile.txt

or you can give full path to the file which is located anywhere on the disk
String fileName = "c:/folder1/folder2/yourFile.txt"; 
```