# StackOverflow 问答 12840000-12840999

# mongodb - 在 MongoDB 管理员中添加用户时出现异常

> ID：12840003
> 
> 赞同：1
> 
> 时间：2012-10-11T12:52:50.493
> 
> 标签：mongodb, exception, admin

我正在尝试在 MongoDb > admin 表中添加新用户。这就是我所做的

```
use admin
db.addUser("test", "test123") 
```

执行命令后显示这个

```
{
    "user" : "test",
    "readOnly" : false,
    "pwd" : "2ee6cd2e57f3a5829ed694d5c367bc48",
    "_id" : ObjectId("5076beeb87a1b34978829bc5")
}

Thu Oct 11 18:13:53 uncaught exception: timed out while waiting for user authentication to replicate - database will not be fully secured until replication finishes 
```

这个错误的原因是什么？

我在哪里可以看到我的新用户。

注意：我在网络中，这与任何安全策略有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T16:10:04.593

看起来这是一个在 2.1.2 中修复的已提交[错误。](https://jira.mongodb.org/browse/SERVER-5895)您正在运行哪个版本的 MongoDB？

如果您运行的是兼容版本，那么您的所有辅助设备都还活着且健康吗？看起来用户身份验证信息传播到辅助超时。

# jquery - How to pull the value from one div into another?

> ID：12840010
> 
> 赞同：0
> 
> 时间：2012-10-11T12:53:22.063
> 
> 标签：jquery

I'm trying to achieve something that should be fairly simple, but it doesn't work.

There are 2 divs one one page and I want to pull the value from one into another on a link click.

Here is jsfiddle example: [http://jsfiddle.net/SdWSs/2/](http://jsfiddle.net/SdWSs/2/)

Here is the body code:

```
<div id="divone">ValueOne</div>
<input id="two">DIV two</div>
<a onclick="pullthevalue()" href="javascript:void(0);">Pull</a> 
```

Function

```
function pullthevalue(){
var textValue = $('#divone').text();
$('#two').text(textValue);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:55:40.173

Change `$('#two').text(textValue)` to `$('#two').val(textValue);`

Working jsfiddle: [http://jsfiddle.net/SdWSs/3/](http://jsfiddle.net/SdWSs/3/)

**Update** JSfiddle [http://jsfiddle.net/SdWSs/5/](http://jsfiddle.net/SdWSs/5/)

Changed `<input id="two">DIV two</div>` to `<div id="two">DIV two</div>` so `.text(textvalue`) will work

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T13:00:05.843

Try not to use `onclick` events tied to attributes, it's a deprecated method. Instead bind events to the DOM using jquerys `.on` or `.click` methods on the element.

You can achieve exactly what you want using either of these methods.

```
$(document).ready(function()
{
    $('a').click(function(e)
    {
        var value = $('#divone').text();

        $('#two').text(value);

        return false;
    });
}); 
```

Alternative method using `.on`

```
$(document).ready(function()
{
    $(document).on('click', 'a', function(e)
    {
        var value = $('#divone').text();

        $('#two').text(value);

        return false;
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:54:56.643

try changing text() to innerHTML()... that should work. Also, the a tag can just have the href as javascript:pullthevalue() and you can take the onclick off.

# sql - 如何获取同一周内的行？

> ID：12840011
> 
> 赞同：0
> 
> 时间：2012-10-11T12:53:22.670
> 
> 标签：sql, database, oracle, date, group-by

我在数据库中有一个数据库和一个日期列，其值类似于 2012 年 5 月 2 日，而我试图获取同一周内的所有行并计算每周它有多少人行。我尝试获得如下输出：

例如

```
8-14 October  |  15
1-7 October   |  8
24-30 September | 12
etc... 
```

我可能会使用 group by 和 count 语句和函数，但我不知道如何检测像 10 月 8 日至 14 日这样的一周。

该数据库是oracle 的maximo 数据库。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:07:09.160

Trunc(date_value) 将返回一周的第一天（星期日）：

```
select 
    trunc(date_column,'D') as start_date, 
    trunc(date_column,'D')+6 end_date, 
    count(*)
from your_table
group by trunc(date_column,'D') 
```

# c# - 我需要从两个类继承（这在 C# 中是不可能的）有人可以推荐一种不同的方法吗？

> ID：12840013
> 
> 赞同：1
> 
> 时间：2012-10-11T12:53:34.290
> 
> 标签：c#, design-patterns, inheritance

我有一个名为 WidgetBase 的抽象基类，如下所示：

```
public abstract class WidgetBase : Control, INamingContainer
{
     // This class declares abstract and virtual properties and methods but doesn't override anything
} 
```

我有另一个名为 ScrollerBase 的抽象基类，它看起来像这样：

```
public abstract class ScrollerBase : Control
{
    // This class has one abstract property and overrides OnInit and OnLoad
} 
```

我需要创建一个继承自这两个类的类。这两个类都不能转换为接口。我能想到的最简单的解决方案是创建一个额外的 WidgetBase 类，如下所示：

```
public abstract class ScrollingWidgetBase : ScrollerBase, INamingContainer
{
     // Lots of duplicated code from WidgetBase
} 
```

如果我能做这样的事情会很好：

```
public abstract class ScrollingWidgetBase : WidgetBase<ScrollerBase>    { /* Empty */ }
public abstract class WidgetBase : WidgetBase<Control>    { /* Empty */ }
public abstract class WidgetBase<T> : T, INamingContainer    { /* Code goes here */ } 
```

然而这是不可能的。我能想到的唯一半优雅的解决方案是这样的：

```
public interface IScroller { /* Overridable members go here */ }
public class WidgetBase : Control, INamingContainer
{
    protected override void OnInit(EventArgs e)
    {
        if (this is IScroller)
        {
            // Do scroller logic here
        }
    }
    protected override void OnLoad(EventArgs e)
    {
        if (this is IScroller)
        {
            // Do scroller logic here
        }
    }
}

public class Test : WidgetBase, IScroller {  } 
```

但是，如果创建更多类，这将变得非常混乱。肯定有某种设计模式可以解决这个问题吗？任何帮助将不胜感激。

谢谢，

乔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T13:14:15.270

正如海德所说，您确实需要将您的行为与您的课程*分开*。你说你不想使用接口；好吧，我想不出办法。您可能不得不硬着头皮或做一些代码重复。

至少，您可以将行为逻辑移动到一个单独的控制类，并简单地向它提供一些公开所需成员的接口。*考虑一下可滚动 UI 控件所需*的几个属性（请注意，这只是一些示例，我怀疑这些类型是否存在，或者这些是所需的实际*最小*集）：

```
public interface ISCrollable
{
    Control Target { get; }
    ScrollBar Bar { get; }
    double FullLength { get; }
    double VisibleLength { get; }
} 
```

然后，您可以将滚动行为放在附加该行为或适用于`IScrollable`：

```
public class Scroller
{
    public Scroller(ISCrollable scrollable)
    {
        //attach behaviour
        scrollable.Bar.OnClick += DoScroll;
        //and other stuff
    }
} 
```

最后，您`ScrollableWidget`将成为您的`Control`并附加滚动行为而不是继承它：

```
public class ScrollableWidget : Control, INamingContainer, ISCrollable, IWidget
{
    private Scroller ScrollBehaviour;
    private Widgeter = WidgetBehaviour;

    public Control Target { get; private set; }
    public ScrollBar Bar { get; private set; }
    public double FullLength { get; private set; }
    public double VisibleLength { get; private set; }

    public ScrollableWidget()
    {
        this.Target = this;
        this.Bar = CreateScrollBarControl();
        this.FullLength = 9001;
        this.VisibleLength = this.ActualHeight;

        this.ScrollBehaviour = new Scroller(this);
        this.WidgetBehaviour = new Widgeter(this);
    }
} 
```

所以，是的，你会想要使用接口。我不明白你的要求不要。还有其他模式，例如[Decorator](http://en.wikipedia.org/wiki/Decorator_pattern)，可能比我刚刚发布的混乱更适合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:03:40.263

旧原则适用：组合优于继承。

不要继承，除非该类实际上需要充当基类，而是将可能的基类作为可能的派生类的成员。

使用接口而不是类作为方法参数类型等，因此您实际上可以使用组合而不是继承。

使用组合时，学习使用 IDE 重构功能为成员对象插入委托方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:14:13.423

如果我理解正确，那么滚动条就是小部件的装饰器。

1）创建接口IWidgetBase。

2) 实现装饰器

```
class ScrollDecorator:IWidgetBase{
   IWidgetBase _decoratedWidget;
   public ScrollDecorator(IWidgetBase widget){
       _decoratedWidget=widget;
   }
   //implementation  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T13:38:46.193

我认为由于某种原因`ScrollerBase`不能修改为继承自。`WidgetBase`那真的是最好的解决方案。

如果做不到这一点，您可以通过将扩展方法*与*接口相结合来实现多重继承。

```
public interface IWidgetBase
{
  bool SomeBool { get; }
  void DoWidgetyStuff();
}
public static class IWidgetBaseExtensions
{
  public static void WidgetStuff(this IWidgetBase base)
  {
    if (base.SomeBool) 
      base.DoWidgetyStuff();
  }
}

public class ScrollerBase : Control, IWidgetBase
{
  public bool SomeBool { get; protected set; }
  public void DoWidgetyStuff() {
    // Do stuff
  }
}

// Main code:
IWidgetBase myScroller = new ScrollerBase();
myScroller.WidgetStuff(); 
```

根据您的代码所做的事情，这可能是也可能不是比其他人建议的组合更好的答案。

# joomla - 如何在我的自定义模块中使用 Joomla recaptcha 插件？

> ID：12840015
> 
> 赞同：24
> 
> 时间：2012-10-11T12:53:38.767
> 
> 标签：joomla, recaptcha, joomla2.5

我为我的联系表格创建了一个自定义模块。现在我想在这个模块中使用 Joomla recaptcha 插件。

知道如何完成这项工作吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-12T14:01:36.850

为了使用 joomla 默认的 recaptcha 插件，请按照以下步骤操作-

[1) 从http://www.google.com/recaptcha](http://www.google.com/recaptcha)获取 recaptcha 密钥

2）将这些键设置为recaptcha插件，如果不是则激活它。

3）把下面的代码你想显示recaptcha

```
//php code
JPluginHelper::importPlugin('captcha');
$dispatcher = JDispatcher::getInstance();
$dispatcher->trigger('onInit','dynamic_recaptcha_1');

//html code inside form tag
<div id="dynamic_recaptcha_1"></div> 
```

4）将此代码放在您验证/处理表单的位置

```
$post = JRequest::get('post');      
JPluginHelper::importPlugin('captcha');
$dispatcher = JDispatcher::getInstance();
$res = $dispatcher->trigger('onCheckAnswer',$post['recaptcha_response_field']);
if(!$res[0]){
    die('Invalid Captcha');
} 
```

//对于 Joomla 3.x

```
$post = JFactory::getApplication()->input->post;
$dispatcher = JEventDispatcher::getInstance(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-08T17:19:54.087

跟进 Irfan 的代码，另外我必须执行以下操作才能显示验证码：

将以下内容添加到模板代码中。

```
JHtml::_('behavior.keepalive'); 
```

显然它包括 mootools 库。

似乎添加了一个事件 domready，但该事件仅在使用 mootools 库时触发。因此，只需检查您的 html 源代码，看看是否正在使用 mootools。我可能完全错了，但希望我的解决方案对某人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T16:05:28.183

来自：http: [//jw-extension.net/joomla-how-to/138-an-easy-way-insert-captcha-in-any-module-or-component-of-joomla.html](http://jw-extension.net/joomla-how-to/138-an-easy-way-insert-captcha-in-any-module-or-component-of-joomla.html)

1.  下载它

2.  登录[http://www.google.com/recaptcha](http://www.google.com/recaptcha)获取 reCAPTCHA 公钥和 reCAPTCHA 私钥

3.  安装、启用和输入公钥和私钥

4.  在 HTMLmodule 插入`{captcha}`需要显示验证码的地方

5.  一般请插入

    ```
    global $mainframe;
    $mainframe->triggerEvent('onCaptchaDisplay'); 
    ```

显示验证码。

1.  如果启用了带有 reCAPTCHA 选项的 Auto-verify，插件将检查 captcha 验证数据是否存在，然后自动连接到 reCAPTCHA 并要求确认。这种方法在每次页面加载时都需要更多的系统资源，但如果您有许多页面需要验证码验证，这种方法非常有用。如果您不想在全局范围内启用验证码验证，但只针对几个页面，那么您可能需要禁用带有 reCAPTCHA 选项的自动验证。要验证用户响应，请将以下 PHP 代码插入到各个 Joomla! 的控制器文件中！需要验证码验证的扩展：

    ```
    global $mainframe;
    $mainframe->triggerEvent('onCaptchaConfirm'); 
    ```

# c# - 什么是 Visual Studio 中的跳过测试？

> ID：12840020
> 
> 赞同：34
> 
> 时间：2012-10-11T12:54:00.360
> 
> 标签：c#, asp.net-mvc, unit-testing, visual-studio-2012

我试图通过按“全部运行”在 ASP.NET MVC 中运行 Visual Studio 测试，但所有测试都被跳过了。为什么会发生这种情况，我该如何运行所有测试？这是一个屏幕截图：

![跳过的测试](../Images/5942704e41d850e4058e31572e684e2f.png)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-07-21T09:46:25.933

检查测试是否具有[忽略](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.ignoreattribute.aspx)属性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-16T20:08:11.290

使用`Inconclusive`结果的测试将显示为已跳过。所以`VS 2010 inconclusive == VS 2012 skipped`

前任：

```
Assert.Inconclusive("This test didn't exactly fail, but we can't be certain the results are good.") 
```

在测试窗口中将读取为已跳过

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-06T19:38:36.400

您指向的测试设置文件可能无效。确保设置文件具有正确的参数（远程或本地等），然后转到`Tests>Test Settings>Select Test Settings File`工具栏中的 选择有效文件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-21T22:39:47.600

我在 VS 2015 中得到了这个，以及 QTAgent32 停止工作等。结果与测试设置无关，实际上是我正在测试的课程中的堆栈溢出*（我不骗你）*。

我有几个测试失败了，当代理失败时，还有一大堆其他人跳过了。我注释掉了受影响区域中的所有测试，直到运行全部正常，然后将它们拉回直到失败，然后为了查看实际的 SO 异常，我必须调试测试。

然后我用手掌拍了几下并固定它。不太可能的情况，但你永远不知道。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-10T19:23:07.980

假设您之前的一项测试没有失败，您的测试可能由于权限不足而被跳过。

您可以在测试中使用“TestCategories”注释。标记它们：

```
[TestCategory("Admin") TestMethod()]
public Void Test1()
{
   ...
} 
```

然后排除类别：

mstest /testcontainer:MyTestprojectName.dll /category:"!Admin"

您可以在每个测试中使用多个类别。有关深入信息：http: [//msdn.microsoft.com/en-us/library/dd286683.aspx](http://msdn.microsoft.com/en-us/library/dd286683.aspx)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-09-05T13:41:56.447

也是由测试 64 位项目但 test->Test Settings->Default Processor Architecture=x86 引起的

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-10-24T23:05:44.227

除了这里提到的之外，检查 TestClass 是否也没有 Ignore 属性（不仅仅是测试方法。）这让我有一次...

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-10-20T08:15:32.477

我知道这是一个老问题，没有公认的答案，但也许这会对某人有所帮助。

在测试资源管理器（测试 -> Windows -> 测试资源管理器）中，您可以看到所有被跳过的测试。如果您双击测试名称，它将打开实际的测试代码。检查测试是否具有 [Ignore] 属性，如果要运行测试，请将其删除。（正如@Sridarshan 建议的那样）

PS 我有 NUnit 测试。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-01T12:38:49.437

在 xUnit 中，将跳过标记`FactAttribute`为哪个`Skip`属性设置为某项的测试。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-09-14T10:20:34.953

我在我的 TestSettings.testsettings 文件中定义了一个安装脚本，该脚本在我的开发机器上不存在。

```
<Scripts setupScript="C:\Deployment\UnitTestSetup.cmd" /> 
```

# google-maps - 用于平移的 Google Maps Strict Bounds

> ID：12840021
> 
> 赞同：1
> 
> 时间：2012-10-11T12:54:01.897
> 
> 标签：google-maps

我在以下位置使用示例：

[Google Maps v3 - 限制可视区域和缩放级别](https://stackoverflow.com/questions/3818016/google-maps-v3-limit-viewable-area-and-zoom-level)

问题是我确定了自定义地图上的 sw 和 ne 点，但它似乎只能防止基于地图中心的平移，这允许在严格范围之外进行平移。

这是我的代码：

```
 var strictBounds = new google.maps.LatLngBounds(
     new google.maps.LatLng(sw_lat, sw_lon), 
     new google.maps.LatLng(ne_lat, ne_lon)
   );

   google.maps.event.addListener(map, 'drag', function() 
   {
     if (strictBounds.contains(map.getCenter())) return;

     // We're out of bounds - Move the map back within the bounds

     var c = map.getCenter(),
         x = c.lng(),
         y = c.lat(),
         maxX = strictBounds.getNorthEast().lng(),
         maxY = strictBounds.getNorthEast().lat(),
         minX = strictBounds.getSouthWest().lng(),
         minY = strictBounds.getSouthWest().lat();

     if (x < minX) x = minX;
     if (x > maxX) x = maxX;
     if (y < minY) y = minY;
     if (y > maxY) y = maxY;

     map.setCenter(new google.maps.LatLng(y, x));
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T17:18:45.900

我发现这是一个更清洁的解决方案。它通过基于中心点的侦听/平移来组合功能，但使用检测一组边界是否在另一个范围内的测试。似乎对我来说很完美。

```
google.maps.event.addListener(map, 'center_changed', function(){

        var mapBounds = map.getBounds();

        if (imageBounds.contains(mapBounds.getNorthEast()) && imageBounds.contains(mapBounds.getSouthWest()))
        {
            lastValidCenter = map.getCenter();
            return;
        }

        map.panTo(lastValidCenter);

    }); 
```

// 更新：+ 缺少分号

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-11T13:49:11.690

您可能必须使用 map.getBounds 而不是 map.getCenter，并查看它的边缘是否超出了 strictBounds 的范围。

这是完全未经测试的，但我会这样处理它：

```
 var strictBounds = new google.maps.LatLngBounds(
     new google.maps.LatLng(sw_lat, sw_lon), 
     new google.maps.LatLng(ne_lat, ne_lon)
   );

   google.maps.event.addListener(map, 'drag', function()
   {
        var mapBounds = map.getBounds(),
        map_SW_lat = mapBounds.getSouthWest().lat(),
        map_SW_lng = mapBounds.getSouthWest().lng(),
        map_NE_lat = mapBounds.getNorthEast().lat(),
        map_NE_lng = mapBounds.getNorthEast().lng(),
        maxX = strictBounds.getNorthEast().lng(),
        maxY = strictBounds.getNorthEast().lat(),
        minX = strictBounds.getSouthWest().lng(),
        minY = strictBounds.getSouthWest().lat();

        if (strictBounds.contains(mapBounds.getNorthEast()) && strictBounds.contains(mapBounds.getSouthWest())) 
        {
            return;
        }

        // We're out of bounds - Move the map back within the bounds
        if (map_SW_lng < minX) map_SW_lng = minX;
        if (map_SW_lng > maxX) map_SW_lng = maxX;
        if (map_NE_lng < minX) map_NE_lng = minX;
        if (map_NE_lng > maxX) map_NE_lng = maxX;

        if (map_SW_lat < minY) map_SW_lat = minY;
        if (map_SW_lat > maxY) map_SW_lat = maxY;
        if (map_NE_lat < minY) map_NE_lat = minY;
        if (map_NE_lat > maxY) map_NE_lat = maxY;

        map.panToBounds(new google.maps.LatLngBounds(
        new google.maps.LatLng(map_SW_lat, map_SW_lng), 
        new google.maps.LatLng(map_NE_lat, map_NE_lng)
        ));
    }); 
```

# magento - Magento / PayPal - 请在下订单前同意所有条款和条件

> ID：12840022
> 
> 赞同：1
> 
> 时间：2012-10-11T12:54:03.780
> 
> 标签：magento, paypal

客户无法下订单

他们已经同意条款，并在“审查订单”页面再次询问

我测试并确认此错误仅在 PayPal express 上发生

卡住，无法结帐

页面错误提示：请在下订单前同意所有条款和条件

[http://oi46.tinypic.com/ekrbsx.jpg](http://oi46.tinypic.com/ekrbsx.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-27T12:25:35.640

我遇到了这个问题，其他答案对我的情况都没有帮助，所以我注册发布了我找到的解决方案。

去：

> app\design\frontend[yourtheme][yourskin]\template\checkout\onepage\agreements.phtml

将`</form>`on like 41 移动到模板的底部。

完毕。

如果它不在第 41 行，基本上你需要做的就是使具有 id 'checkout-agreements' 的表单位于表单 'discount-coupon-form' 内。这对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:24:14.077

检查`paypal.xml`协议块是否被注释。可能是贝宝不知道客户是否接受了条款。

还可以尝试登录以查看结帐页面中的协议值是否为“是”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T13:59:47.893

这解决了问题：

1) 在“app/design/frontend/YOURTHEMEdefault/layout/”（mag 1.7）中将 paypal.xml 重命名为 paypal._xml

2) 从配置中删除 paypal API 凭据并保存

3) 再次放回 API 凭据并保存

# javascript - 如何在不替换整个数组的情况下更改 knockoutjs observableArray 的索引

> ID：12840023
> 
> 赞同：1
> 
> 时间：2012-10-11T12:54:05.897
> 
> 标签：javascript, jquery, model-view-controller, knockout.js

我是一个 knockoutjs 新手，基本上我想要在页面上做的是，我在视图中加载一个激活详细信息列表，每个列表都有一个与列表项关联的删除链接。每个激活明细项包含三个属性，index、ActivationDate 和 ExpiryDate，例如。

```
 var activationItem = {
            'index': count,
            'activationDate': item.activationDate,
            'expiryDate': item.expiryDate
        }; 
```

现在，每次用户在任何特定项目上单击删除。它应该重新排序所有列表索引以仍然反映正确增加的索引。例如，如果删除了第 2 项，则为 1,2,3,4 而不是 1,3,4。

它是如何完成更换阵列的。如下：

```
 //Removes selected item from activationlist
self.RemoveActivationListItem_Click = function () {

    self.activationListItems.remove(this);

    var count = 1;
    var replaceArray = ko.observable([]);

    //Re index all of the array items
    ko.utils.arrayForEach(self.activationListItems(), function(item) {

        var activationItem = {
            'index': count,
            'activationDate': item.activationDate,
            'expiryDate': item.expiryDate
        };

        replaceArray().push(activationItem);

        count++;

    });

    self.activationListItems.removeAll();
    self.activationListItems(replaceArray());

    TINY.box.show({ html: "Activation item removed", animate: true, close: false, boxid: 'message',autohide:5,top:90,left:0});

}; 
```

没有比这更好的方法了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:13:10.027

如果只想显示`index`属性，您可以`$index`在绑定中使用敲除对象，`foreach`并且 ko 自己完成所有工作。请参阅此处的示例：http: [//jsfiddle.net/AfDQe/1/](http://jsfiddle.net/AfDQe/1/)

如果您需要在视图模型中存储索引，您可以简化删除功能：

```
self.RemoveActivationListItem_Click = function () {
    self.activationListItems.remove(this);
    var count = 1;

    //Re index all of the array items
    ko.utils.arrayForEach(self.activationListItems(), function(item) {
        item.index = count;
        count++;

    });

    TINY.box.show({ html: "Activation item removed", animate: true, close: false, boxid: 'message',autohide:5,top:90,left:0});

}; 
```

# google-chrome - XHR 完成加载 [...] 日志消息

> ID：12840024
> 
> 赞同：78
> 
> 时间：2012-10-11T12:54:06.887
> 
> 标签：google-chrome

每次 Ajax 请求完成加载时，我都会收到一条 JavaScript 控制台日志消息；随附的屏幕截图中演示了该问题。

![在此处输入图像描述](../Images/b719039d61825806c5fa8e4e24d866cf.png)

我不知道我是如何激活此日志记录的。如何停用它？我在 ExtJS 4.1 上。

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-10-11T13:09:54.117

这不是 extjs 的问题！单击右下角的齿轮图标并取消选中 Log XMLHttpRequests。

最近（Chrome 55）：打开控制台，右键单击打开区域，取消选中“Log XMLHttpRequests”。或者单击右上角的垂直“...”，转到设置，然后取消选中“控制台”标题下的“记录 XMLHttpRequests”。

最近的截图：

![铬 55 截图 1](../Images/64b5b944cd89a7a17f54817381a00fe9.png)

![铬 55 屏幕截图](../Images/f4f3ca611500a8af5e2971c8acb9def8.png)

旧截图： ![最近的截图](../Images/fc3cd4973ba8193774400d84fcc9991f.png)

更老的截图： ![旧屏幕截图](../Images/029934a23d8522ef60625497d7776095.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-01-21T17:03:22.757

正确答案属于 VDP，但我认为是关于较旧的 Chrome，所以在我最新
的 Chrome 版本中，隐藏该请求的过程有点不同......

1.  打开开发者控制台
2.  单击控制台设置，如显示图像

[![在此处输入图像描述](../Images/64b5b944cd89a7a17f54817381a00fe9.png)](https://i.stack.imgur.com/fTixK.png)

3.  然后停用选项日志

[![在此处输入图像描述](../Images/f4f3ca611500a8af5e2971c8acb9def8.png)](https://i.stack.imgur.com/hn0dj.png)

4.  刷新页面
5.  如果仍然显示请求，请停用您的某些 chrome 扩展并再次刷新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-29T07:16:33.177

**仅选定的上下文 img**

![图 1](../Images/10a80917cfb5e812f10749f54079331e.png)

对我来说，它使用`Selected context only`. `Customize and control DevTool`Chrome 版本 66.0.3359.181（正式版）（64 位）

仅选定的上下文图像 ![图 2](../Images/38b6c706311b1460e1ed04216de49811.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-30T12:23:50.130

[![在此处输入图像描述](../Images/a3925202bf6cd56656c6b1ff969f2f80.png)](https://i.stack.imgur.com/c84Ga.png)检查元素，在源下你会发现一个蓝色图标。单击此蓝色图标，以便在此图标上显示一条标记线。你的问题将得到解决。

# django - 创建从数据库对象初始化的模型表单集实例

> ID：12840025
> 
> 赞同：1
> 
> 时间：2012-10-11T12:54:06.747
> 
> 标签：django, django-views, django-forms, inline-formset

我目前在我的类型数据库中有一系列对象的设置`CellType`。

我似乎需要的是[inline formset](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#inline-formsets)，它显然简化了模型之间外键关系的处理。

我想要的是一个表单集，它为每个 CellCount 实例组成一个表单，链接到数据库中的每个 CellType 对象。

```
cellcount_formset = inlineformset_factory(CellType, 
                                          CellCount,
                                          form=CellCountForm,
                                          can_delete=False) 
```

似乎把我带向了正确的方向，但我真正想要的是用正确的 CellType 对象填充 CellCountForm 的单元格字段，从而使整个事情能够整齐地打包和保存。事实证明这比我想象的要复杂一点！

**模型.py**

```
class CellType(models.Model):
    readable_name = models.CharField(max_length=50)
    machine_name = models.CharField(max_length=50)
    comment = models.TextField(blank=True)

class CellCount(models.Model):
    cell_count_instance = models.ForeignKey(CellCountInstance)
    cell = models.ForeignKey(CellType)
    normal_count = models.IntegerField()
    abnormal_count = models.IntegerField()
    comment = models.TextField(blank=True) 
```

**表格.py**

```
class CellCountForm(ModelForm):
    auto_id = False

    class Meta:
        model = CellCount
        widgets = {
                'cell': HiddenInput(),
                'normal_count': HiddenInput,
                'abnormal_count': HiddenInput}
        exclude = ('cell_count_instance', 'comment',) 
```

这些小部件是隐藏的，因为它们在后台由基于 JQuery 的计算器填充。

理想情况下，我要使用的伪代码逻辑是：

```
formset containing:
    (x) CellCount forms, 
        the cell field of which is populated with the CellType object
        (x) = number of CellTypes in the database 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:10:57.900

乍一看，您需要删除 this `extra=len(get_celltype_list())`，这不是您想要的。这将创建 N(where N==len(get_celltype_list()))**额外**的空表单。

# sql - 存储过程变量声明中的错误

> ID：12840034
> 
> 赞同：0
> 
> 时间：2012-10-11T12:54:28.517
> 
> 标签：sql, sql-server-2008

我有一个查询

```
create procedure pr_InsertFilterOnItemCreation
@zCategoryId int,
@zItemId int,
@zFilterid int
as
declare @productId int
set @productId = (SELECT convert(int,IDENT_CURRENT('item')))
if( @productId<>null)
begin
insert into t_lnk_cat_product_filter_item set   cde_catid=@zCategoryId,cde_productid=@productId,cde_filterid=@zFilterid,cde_filteritemid=@zItemId
select 1
end 
```

我收到错误

> 关键字“set”附近的语法不正确

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:56:49.820

你的`INSERT INTO`陈述应该这样写：

```
INSERT INTO t_lnk_cat_product_filter_item
      (cde_catid,    cde_productid, cde_filterid, cde_filteritemid)
SELECT @zCategoryId, @productId,    @zFilterid,   @zItemId 
```

代替：

```
insert into t_lnk_cat_product_filter_item 
set cde_catid = @zCategoryId,
    cde_productid = @productId,
    cde_filterid = @zFilterid,
    cde_filteritemid = @zItemId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:06:38.850

要么你做：

```
insert into t_lnk_cat_product_filter_item 
values(@value1, @value2, @value3) 
```

或者

```
insert t_lnk_cat_product_filter_item 
select @value1, @value2, @value3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:08:21.493

为什么要在这里设置，如果表为空，只需插入值或更新相应的值

```
insert into t_lnk_cat_product_filter_item    
(cde_catid, cde_productid, cde_filterid, cde_filteritemid)                                                                                                                 values ( @zCategoryId, @productId, @zFilterid, @zItemId) 
```

# wordpress - wordpress 中的 Magento：[mage object] 目录价格规则不适用于外部加载的购物车

> ID：12840035
> 
> 赞同：1
> 
> 时间：2012-10-11T12:54:35.587
> 
> 标签：wordpress, magento, magento-rules

我正在使用 Mage Enabler 插件在 wordpress 中加载 Magento 购物车块，但不幸的是，我无法让目录价格规则与购物车一起使用。

当我通过价格规则添加一个应用了折扣的产品时，在我将产品添加到此购物车后，购物车中将使用原始价格。目录价格规则当然有效，因为我可以在产品详细信息页面中看到正确的价格。

## 我正在使用这段代码：

```
$layout = Mage::getSingleton('core/layout');
$cart = $layout->createBlock('Checkout/Cart');
$cart->setTemplate('checkout/cart.phtml');
$cart_content = $cart->toHTML();
echo $cart_content; 
```

* * *

使用 Mage Enabler 插件，我还需要做些什么来让目录价格规则在购物车和结帐中起作用吗？所以基本上我想知道如何通过 Mage:: 对象运行目录价格规则。

提前致谢。

# jsf - 添加动态表单域时出错

> ID：12840036
> 
> 赞同：2
> 
> 时间：2012-10-11T12:54:44.217
> 
> 标签：jsf, dynamic-forms, view-scope

我正在尝试将动态表单字段添加到 jsf 表单。但即使遵循简单的代码也会出错。

**测试.xhtml**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head></h:head>
<body>
<h:form id="form" binding="#{testBean.form}" />
<h:commandButton value="submit" action="#{testBean.submit}" />
</body>
</html> 
```

**字段.java**

包装实体；

公共类字段{

```
private String name;

public Field() {
    // TODO Auto-generated constructor stub
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
} 
```

}

**testBean.java**

```
package beans;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import javax.el.ELContext;
import javax.el.ExpressionFactory;
import javax.el.ValueExpression;
import javax.faces.application.Application;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.component.UIInput;
import javax.faces.component.html.HtmlForm;
import javax.faces.component.html.HtmlInputText;
import javax.faces.context.FacesContext;

import Entity.*;

@ManagedBean
@ViewScoped
public class testBean implements Serializable{

    private static final long serialVersionUID = 770513161289990805L;
    private HtmlForm form = new HtmlForm();

    private List<Field> fields=new ArrayList<Field>(); 
    private Map<String, Object> values; 

    private Field field1 = new Field();
    private Field field2 = new Field();

    public testBean() {

        field1.setName("aaa");
        field2.setName("bbb");
        fields.add(field1);
        fields.add(field2);

        values = new HashMap<String, Object>();

    }

    private ValueExpression createValueExpression(String binding, Class clazz) {
        final ValueExpression ve = getExpressionFactory()
                .createValueExpression(getELContext(), binding, String.class);

        return ve;
    }

    public static ELContext getELContext() {

        return FacesContext.getCurrentInstance().getELContext();
    }

    public static ExpressionFactory getExpressionFactory() {

        return getApplication().getExpressionFactory();
    }

    public static Application getApplication() {

        return FacesContext.getCurrentInstance().getApplication();
    }

    @SuppressWarnings("el-syntax")
    public HtmlForm getForm() {
        if (form == null) {

            form = new HtmlForm();

            for (Field field : fields) {
                UIInput input = new HtmlInputText();
                input.setId(field.getName()); // Must be unique!
                String v = "#{testBean.values['" + field.getName() + "']}";
                input.setValueExpression("value",
                        createValueExpression(v, String.class));
                form.getChildren().add(input);

            }

        }
        return form;
    }

    public void setForm(HtmlForm form) {
        this.form = form;
    }

    public List<Field> getFields() {
        return fields;
    }

    public void setFields(List<Field> fields) {
        this.fields = fields;
    }

    public Map<String, Object> getValues() {
        return values;
    }

    public void setValues(Map<String, Object> values) {
        this.values = values;
    }

    public void submit() {
        System.out.println("Worked :)");
    }

} 
```

我上面的代码给出了“java.io.NotSerializableException：Entity.Field”错误。

```
java.io.NotSerializableException: Entity.Field
    java.io.ObjectOutputStream.writeObject0(Unknown Source)
    java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    java.io.ObjectOutputStream.writeObject0(Unknown Source)
    java.io.ObjectOutputStream.writeObject(Unknown Source)
    java.util.HashMap.writeObject(Unknown Source)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source)
    java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    java.io.ObjectOutputStream.writeObject0(Unknown Source)
    java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    java.io.ObjectOutputStream.writeObject0(Unknown Source)
    java.io.ObjectOutputStream.writeArray(Unknown Source)
    java.io.ObjectOutputStream.writeObject0(Unknown Source)
    java.io.ObjectOutputStream.writeObject(Unknown Source)
    java.util.HashMap.writeObject(Unknown Source)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source)
    java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    java.io.ObjectOutputStream.writeObject0(Unknown Source)
    java.io.ObjectOutputStream.writeObject(Unknown Source)
    com.sun.faces.renderkit.ClientSideStateHelper.doWriteState(ClientSideStateHelper.java:325)
    com.sun.faces.renderkit.ClientSideStateHelper.writeState(ClientSideStateHelper.java:173)
    com.sun.faces.renderkit.ResponseStateManagerImpl.writeState(ResponseStateManagerImpl.java:122)
    com.sun.faces.application.StateManagerImpl.writeState(StateManagerImpl.java:166)
    com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:225)
    com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:419)
    com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.12 logs. 
```

如果我使 Field 类 Serializable 它再次给出错误。

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

java.io.NotSerializableException: javax.faces.component.html.HtmlForm
    java.io.ObjectOutputStream.writeObject0(Unknown Source)
    java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    java.io.ObjectOutputStream.writeObject0(Unknown Source)
    java.io.ObjectOutputStream.writeObject(Unknown Source)
    java.util.HashMap.writeObject(Unknown Source)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source)
    java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    java.io.ObjectOutputStream.writeObject0(Unknown Source)
    java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    java.io.ObjectOutputStream.writeObject0(Unknown Source)
    java.io.ObjectOutputStream.writeArray(Unknown Source)
    java.io.ObjectOutputStream.writeObject0(Unknown Source)
    java.io.ObjectOutputStream.writeObject(Unknown Source)
    java.util.HashMap.writeObject(Unknown Source)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source)
    java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    java.io.ObjectOutputStream.writeObject0(Unknown Source)
    java.io.ObjectOutputStream.writeObject(Unknown Source)
    com.sun.faces.renderkit.ClientSideStateHelper.doWriteState(ClientSideStateHelper.java:325)
    com.sun.faces.renderkit.ClientSideStateHelper.writeState(ClientSideStateHelper.java:173)
    com.sun.faces.renderkit.ResponseStateManagerImpl.writeState(ResponseStateManagerImpl.java:122)
    com.sun.faces.application.StateManagerImpl.writeState(StateManagerImpl.java:166)
    com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:225)
    com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:419)
    com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.12 logs.

Apache Tomcat/7.0.12 
```

我的简单代码有什么问题？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:27:21.003

您的 bean 被放在视图范围内。视图范围的 bean 存储在 HTTP 会话中。存储在 HTTP 会话中的对象必须是`Serializable`，包括其所有属性。但是，像这样的 UI 组件`HtmlForm`不可序列化，原因很简单，即其状态对基于请求的更改很敏感，如果可序列化，则反序列化后只会导致可能的损坏/不同步状态。

基本上，您需要将 bean 放在请求范围内。

然而，整个方法过于复杂且存在缺陷。不要使用`<h:form binding>`. 而是使用 a `<h:dataTable>`（或者`<ui:repeat>`你想要的）。一个完整的启动示例可以在这个答案中找到：[如何动态添加 JSF 组件](https://stackoverflow.com/questions/3409053/jsf2-can-i-add-jsf-components-dynamically/3409511#3409511)

# c# - 获取传递给子模块（C#.NET dll）内的主模块（VC++ exe）的参数

> ID：12840038
> 
> 赞同：0
> 
> 时间：2012-10-11T12:54:52.497
> 
> 标签：c#, c++, interop, pinvoke, command-line-arguments

在加载的 dll（C#.net 代码）中将启动参数（命令行参数）传递给 exe（从 VC++ 代码构建）的方法是什么我尝试使用 dll 中的 Process.Startinfo.Arguments，但它没有返回任何内容.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T14:44:37.970

使用 Environment.GetCommandLineArgs() 检索原始命令行参数。

# javascript - 我的简单 jquery 下拉功能有 bug 和故障

> ID：12840042
> 
> 赞同：0
> 
> 时间：2012-10-11T12:54:57.783
> 
> 标签：javascript, jquery, css, drop-down-menu

我正在尝试创建一个简单的 jquery 下拉功能，它可以让我在悬停在菜单元素上时显示信息块。在这一点上，如果您将鼠标悬停得太快，我到目前为止所做的事情就会出现错误和故障。此外，下拉菜单似乎仅在悬停元素时才可见，而不是在其子元素上。

也许有人可以快速查看代码并建议如何实现某种标志，以便菜单不会轻易消失并且不会在多次鼠标悬停时出现故障。

你可能会问为什么我不使用纯 css 来做，不幸的是我需要旧的浏览器支持并且更喜欢将它包装一个函数。

jsbin：http: [//jsbin.com/inedoy/1](http://jsbin.com/inedoy/1)

这是代码：

```
<!DOCTYPE html>
<html class="no-js">
<head>
<meta charset="utf-8">

<style>
    body {margin:60px; font-family: sans-serif; font-size:12px;}
    ul {margin:0;padding:0;} 
    ul li {
        position:relative;
        list-style-type: none;
        padding:5px 0;
        border-bottom:1px solid #ddd;
    }
    .dropdown {
        display:none;
        position:absolute;
        width:200px;
        border:1px solid #ddd;
        padding:20px;
        top:40px;
        left:0;
    }
</style>
</head>
<body>

<ul>
    <li class="drop">Some link
        <div class="dropdown">
            <ul>
                <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
                <li>Aliquam tincidunt mauris eu risus.</li>
                <li>Vestibulum auctor dapibus neque.</li>
                <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
                <li>Aliquam tincidunt mauris eu risus.</li>
                <li>Vestibulum auctor dapibus neque.</li>
                <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
                <li>Aliquam tincidunt mauris eu risus.</li>
                <li>Vestibulum auctor dapibus neque.</li>
            </ul>

        </div>
    </li>
</ul>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script>

dropdown('.drop','.dropdown');

function dropdown(hoverElement,toShow){ 
    $(hoverElement).hover(function(){                       
        $(toShow).stop().slideDown();                   
    },function(){       
        setTimeout(function(){
            $(toShow).stop().hide();    
        },300);     
    });
}
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:56:56.027

一个技巧是在鼠标仍在内部时重置计时器，并在鼠标不在时启动计时器。

```
$(function() {
  var myTimer;
  $(document).on("mouseenter", ".drop", function() {
    parent = this;

    // Close the other dropdowns except this one..
    $(".drop").not(parent).find(".dropdown").hide();

    // Show dropdown
    $(".dropdown", parent).show();

    // Clear the timer so it doesnt close.
    clearTimeout(myTimer);

   }).on("mouseleave", ".drop", function() {
    parent = this;

    // Start the timer
    myTimer = setTimeout(function(){
        $(".dropdown").hide();
    },560)
  });
}); 
```

演示：http: [//jsbin.com/inedoy/42/](http://jsbin.com/inedoy/42/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T14:00:55.983

对您的代码进行了一些更改：

```
<!DOCTYPE html>
<html class="no-js">
<head>
<meta charset="utf-8">

<style>
    body {margin:60px; font-family: sans-serif; font-size:12px;}
    ul {margin:0;padding:0;} 
    ul li {
        position:relative;
        list-style-type: none;
        padding:5px 0;
        border-bottom:1px solid #ddd;
    }
    .dropdown {
        display:none;
        position:absolute;
        width:200px;
        border:1px solid #ddd;
        padding:20px;
        top:25px;
        left:0;
    }

  .drop
  {
    /*border: 1px solid;*/
  }

</style>
</head>
<body>

<ul>
    <li class="drop">Some link
            <ul class="dropdown">
                <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
                <li>Aliquam tincidunt mauris eu risus.</li>
                <li>Vestibulum auctor dapibus neque.</li>
                <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
                <li>Aliquam tincidunt mauris eu risus.</li>
                <li>Vestibulum auctor dapibus neque.</li>
                <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
                <li>Aliquam tincidunt mauris eu risus.</li>
                <li>Vestibulum auctor dapibus neque.</li>
            </ul>
  </li>
</ul>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script>

dropdown('.drop','.dropdown');

function dropdown(hoverElement,toShow)
  { 
    var intervalId = 0, sliding= false;

    $(hoverElement).hover(function()
    {                       
        clearTimeout(intervalId);
        if(!sliding)
        {
          sliding = true;
          $(toShow).stop().slideDown( function(){sliding = false;});                        
        }

    },function(){       
        intervalId = setTimeout(function()
        {
            sliding = false;
            $(toShow).stop().hide();    
        },300);     
    });
}
</script>

</body>
</html> 
```

[http://jsbin.com/inedoy/36/edit](http://jsbin.com/inedoy/36/edit)

# sql - SQL 中 CRUD 操作的 While 循环与连接

> ID：12840043
> 
> 赞同：-4
> 
> 时间：2012-10-11T12:55:00.830
> 
> 标签：sql

我怀疑在 SQL SP 中使用 while 循环会影响数据库的性能。一般来说，我更喜欢使用连接来执行 SQL 中的 CRUD 操作。但我想知道哪一个会提供更好的性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:57:12.427

正确编写时，基于集合的逻辑总是会更快。

# python - 在 Python 中将元组转换为字符串时出错

> ID：12840047
> 
> 赞同：1
> 
> 时间：2012-10-11T12:55:12.490
> 
> 标签：python, string, tuples

我有一个像这样的元组，它基本上是一个数据库记录

```
record = ('R70:Congestion Ratio', 'pm_201204151900_KPI1.csv', 'pmexport_04_15_2012_20_00.tar.gz') 
```

我正在尝试将其转换为元组，然后转换为字符串以获取查询

```
"INSERT INTO PM_NEW_COUNTERS (COUNTER_NAME, CSV_FILE_NAME, TAR_FILE_NAME) VALUES %s" %(tuple(record)) 
```

但是我得到了`TypeError: not all arguments converted during string formatting`我做错了什么？有没有更好的方法来实现我想要实现的目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T13:00:16.990

不要像这样构建 SQL。使用正确形式的数据库引擎。

在[SQLite](http://docs.python.org/library/sqlite3.html?highlight=sqlite#sqlite3.Cursor.execute)中，它的工作方式如下：

```
cur.execute("""INSERT INTO PM_NEW_COUNTERS
  (COUNTER_NAME, CSV_FILE_NAME, TAR_FILE_NAME)
  VALUES (?, ?, ?)""", (a, b, c)) 
```

有关详细信息，请参阅[Python 数据库 API 规范 v2.0](http://www.python.org/dev/peps/pep-0249/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:04:32.790

首先，您应该尝试进行这样的查询。如前所述。

其次，回答您关于字符串格式的问题。

```
record = ('R70:Congestion Ratio', 'pm_201204151900_KPI1.csv', 'pmexport_04_15_2012_20_00.tar.gz') 
```

记录已经是一个元组。

其次，您试图将具有 3 个值的元组放入字符串中的 1 个位置。

所以改为：

```
"INSERT INTO PM_NEW_COUNTERS (COUNTER_NAME, CSV_FILE_NAME, TAR_FILE_NAME) VALUES %s" % " ".join(record)) 
```

或者如果您想要更多控制：

```
"INSERT INTO PM_NEW_COUNTERS (COUNTER_NAME, CSV_FILE_NAME, TAR_FILE_NAME) VALUES %s %s %s" % (record[0], record[1], record[2]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:58:42.117

使用以下，您需要添加逗号并删除 % 字符。

```
>>> str = "INSERT INTO PM_NEW_COUNTERS (COUNTER_NAME, CSV_FILE_NAME, TAR_FILE_NAME) VALUES ('%s')" %"', '".join(record)
>>> str
"INSERT INTO PM_NEW_COUNTERS (COUNTER_NAME, CSV_FILE_NAME, TAR_FILE_NAME) VALUES ('R70:Congestion Ratio', 'pm_201204151900_KPI1.csv', 'pmexport_04 _15_2012_20_00.tar.gz')"
>>> 
```

对不起最后一个答案。这是更新的代码。

我强烈建议您使用内置的数据库驱动程序进行查询，但是如果您确实想使用元组构建字符串，我的新代码将产生所需的输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T13:02:03.360

你想要更多`%s`：

```
"INSERT INTO PM_NEW_COUNTERS (COUNTER_NAME, CSV_FILE_NAME, TAR_FILE_NAME) VALUES ('%s', '%s', '%s')" %(tuple(record)) 
```

# visual-studio-2008 - 打开 xsd 文件时看不到 xml 模式资源管理器

> ID：12840050
> 
> 赞同：3
> 
> 时间：2012-10-11T12:55:16.993
> 
> 标签：visual-studio-2008, xsd

当我在 vs 2008 中打开 xsd 文件时，我无法在视图中看到 xml 模式资源管理器？任何人都知道如何获得 xml Schema 资源管理器...请让我知道提前谢谢。

# cakephp - Cakephp理解本地化..？

> ID：12840051
> 
> 赞同：0
> 
> 时间：2012-10-11T12:55:18.267
> 
> 标签：cakephp, localization, routes

我想对你们大多数人来说，这可能是一个“愚蠢”的问题，但我就是不明白。

因为我是初学者，所以我尝试了很多在谷歌上找到的教程，但没有一个对我有用。

我正在运行 Cakephp 2.2，并且正在尝试使本地化工作。我跟着这本书（[http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html](http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html)）

到目前为止我做了什么：

```
//In my bootstrap.php I added 
Configure::write('Config.language', 'deu');

// In my AppController.php I added
public function beforeFilter() {
    $locale = Configure::read('Config.language');
    if ($locale && file_exists(VIEWS . $locale . DS . $this->viewPath)) {
        $this->viewPath = $locale . DS . $this->viewPath;
    }
} 
```

据我了解，访问者现在应该被重定向到 /ger/ 。但是什么都没有发生……？

你能否请我指出正确的方向..？

再次抱歉这个问题，但由于我是初学者，我现在被卡住了。:(

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:12:44.357

所有这些代码将做的就是编辑`$this->viewPath`变量。

这将使 CakePHP 在调用`render()`. 如果您打算创建不同的文件夹，通常会这样做，每个文件夹都包含特定本地化的视图文件。

如果您的 View 文件夹当前如下所示：

```
View
    - Elements
    - Emails
    - Errors
    - Helper
    - ... 
```

相反，它应该如下所示：

```
View
    - deu
        - Elements
        - Emails
        - Errors
        - Helper
        - ...
    - Elements
    - Emails
    - Errors
    - Helper
    - ... 
```

通过这种方式，您可以为许多不同的本地化指定完全不同的视图文件。根目录中的文件夹应该是默认本地化。

它目前没有做任何事情的原因是它在进行检查时找不到相关的视图文件`file_exists()`。一旦您根据需要进行了重组，它应该可以正常工作。

# iphone - 是否可以在 finishTransaction 之前和 SKPaymentTransactionStatePurchased 之后以编程方式取消非自动续订订阅

> ID：12840056
> 
> 赞同：1
> 
> 时间：2012-10-11T12:55:35.490
> 
> 标签：iphone, objective-c, ios, in-app-purchase

如果两台设备登录同一个帐户（不是同一个 iTunes 帐户，而是我们开发者服务器上的同一个帐户）为同一个非自动续订订阅付费。那么会发生什么...

*   是否可以以编程方式取消第二台设备的付款，还是在 iTunes 提供收据时为时已晚？
*   如果设备登录到同一个开发者帐户*和*同一个 iTunes 帐户。iTunes 会阻止用户购买相同的订阅吗？
*   还可以做些什么来防止这种情况发生（除了在开始购买之前与开发人员服务器同步）。 ![在此处输入图像描述](../Images/8471c30c3bb240ef5aec90c048a9cf70.png)

# sql-server - 在多标量表值函数中调用存储过程？

> ID：12840065
> 
> 赞同：3
> 
> 时间：2012-10-11T12:56:06.743
> 
> 标签：sql-server, function, stored-procedures

有没有办法在这样的**多标量表值函数**中调用存储过程？

注意：此查询返回错误：

> *在函数中无效使用副作用运算符“INSERT EXEC”。*

T-SQL 代码：

```
CREATE FUNCTION fnCrSum
(
@ay nvarchar(100), @yil nvarchar(4), @tip nvarchar(25)
)
RETURNS 
@tablo TABLE 
(
    id int,
    ref_num int,
    last_name nvarchar(200),
    grup nvarchar(200),
    analist nvarchar(200),
    durum nvarchar(10),
    start_dt int , 
    end_dt int,
    duration int,
    type nvarchar(10),
    bildirim nvarchar(200)
)
AS
BEGIN
    DECLARE @exec NVARCHAR(250)
    SET @exec = 'exec dbo.spCrSum ''' + @ay + ''', ''' + @yil + ''', ''' +  @tip + ''''
    INSERT INTO @tablo
    exec (@exec)

    RETURN 
END
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:55:13.207

函数不能有副作用，即更改数据。

即使你的存储过程没有改变任何东西，SQL 编译器也不能假设，所以它只是不允许它。

为什么需要将它包装在一个函数中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:43:58.270

您不能在函数中执行存储过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:33:06.160

我解决了这个问题。我编写了一个表值函数，包括可执行查询、返回表并准备了一个存储过程来调用该函数并传递参数。这个对我有用。

# php - 如何在magento中调用我自己的php页面

> ID：12840068
> 
> 赞同：0
> 
> 时间：2012-10-11T12:56:10.327
> 
> 标签：php, magento, magento-1.7

嗨，我在 php 中创建了自己的事件页面。我想在 magento 中自定义所有这些页面。

例如 create_events.php 是我创建的页面之一。我想在用户登录后单击左侧菜单中的创建事件时调用此页面。

左侧菜单：创建事件查看事件删除事件

我不知道如何在 magento1.7 中调用这些 php 页面以及将这些页面放置在何处以使其在我的站点中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:19:56.623

虽然这不是一个好的做法，但您可以通过制作一个控制器来实现它，一旦您单击 就会调用该控制器，并将其`Create Event`包含`create_event.php`在其中。同样，这根本不是好的做法，强烈不推荐。

# javascript - Javascript - 将文本添加到可以添加但不能删除的表单字段

> ID：12840071
> 
> 赞同：1
> 
> 时间：2012-10-11T12:56:18.517
> 
> 标签：javascript, forms

我希望将一些文本动态添加到用户可以在其中写入更多内容但不删除预先填写的文本的字段中。我有这个：

```
var foo = document.title;
var msgField = document.getElementById('message');
msgField.value = "I am interested in " + foo + " "; 
```

我希望“我对标题感兴趣”已经填写在表单上，​​但不能被用户删除。我确实希望用户能够在此之后编写更多信息。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:01:32.977

尝试这个

```
function addText(elId,text) {
    text += document.getElementById(elId).value ;
} 
```

或者：

```
function addText(elId,text) {
    var obj = document.getElementById(elId);
    var txt = document.createTextNode(text);
    txt.appendChild(obj);
} 
```

希望这可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:32:53.083

可以通过几种方式强制执行，但*会*笨拙且丑陋。

尝试将其设置为作为文本框的一部分出现，而不是。例如：

```
<div style="border: 1px solid brown; font: 14px monospace; width: 200px; height: 200px; margin: 10px; position: relative; overflow: hidden;">
  <div id="interestedInHeader" style="width: 100%;">I am interested in</div>
  <textarea id="interestedInText" style="width: 100%; font: 14px monospace; bottom: 0; top: 18px; border: none; position: absolute;">bunnies and ponies</textarea>
</div>​

document.getElementById("interestedInHeader").onclick = function () {
  document.getElementById("interestedInText").focus();
} 
```

​</p>

在这里试试：http: [//jsfiddle.net/t8xjf/](http://jsfiddle.net/t8xjf/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-11T13:27:37.790

The question is not clear to me. Are you looking for this kind of code?

```
<input type="checkbox" onclick="fnc()"/>
<input type="text" id="message" />
<script type="text/javascript">
function fnc()
{
var foo = "MYSITE";
msgField=document.getElementById("message");
msgField.value = "I am interested in " + foo + " ";

}
</script> 
```

# image-processing - 为什么这种使用 cvWarpPerspective 的虚假去偏斜不起作用？

> ID：12840073
> 
> 赞同：1
> 
> 时间：2012-10-11T12:56:24.403
> 
> 标签：image-processing, opencv

> **可能重复：**
> [执行 cv::warpPerspective 以在一组 cv::Point 上进行假歪斜](https://stackoverflow.com/questions/7838487/executing-cvwarpperspective-for-a-fake-deskewing-on-a-set-of-cvpoint)

我正在使用[这种方法](https://stackoverflow.com/questions/7838487/executing-cvwarpperspective-for-a-fake-deskewing-on-a-set-of-cvpoint)对图像进行纠偏。但是我没有得到预期的结果，而是得到了这个 [输出 http://imadev24.com/op.jpg](http://imadev24.com/op.jpg)

这是我的代码：

```
int main() {
    const IplImage *input = cvLoadImage("input.jpg");
    IplImage *output = cvCloneImage(input);
    cvNamedWindow("Input", 1);
    cvShowImage("Input", input);

    CvMat* mmat = cvCreateMat(3,3,CV_32FC1);
    //CvPoint2D32f* c1 = (&cvPoint2D32f(41,21), &cvPoint2D32f(241,41), &cvPoint2D32f(22,201), &cvPoint2D32f(260,181));
    CvPoint2D32f* c1 = (&cvPoint2D32f(43,18), &cvPoint2D32f(280,40), &cvPoint2D32f(19,223), &cvPoint2D32f(304,200));
    CvPoint2D32f* c2 = (&cvPoint2D32f(0,0), &cvPoint2D32f(320,0), &cvPoint2D32f(0,240), &cvPoint2D32f(320,240));
    mmat = cvGetPerspectiveTransform(c1, c2,mmat);
    cvWarpPerspective(input, output, mmat,CV_INTER_LINEAR);
    cvNamedWindow("Output", 1);
    cvShowImage("Output", output);
    // wait key for 5000 ms
    cv::waitKey(5000);
    return 1;
} 
```

我是图像处理的新手，无法弄清楚出了什么问题。谁能指出我在实施这一点时错在哪里？

# javascript - 限制从 SpineJS fetch() 返回的记录

> ID：12840081
> 
> 赞同：0
> 
> 时间：2012-10-11T12:57:08.590
> 
> 标签：javascript, spine.js

我想在我正在编写的应用程序中有一些路由来限制返回的结果数量。

目前我的主控制器中有以下内容：

```
init: function(){

    MyModel.bind("refresh", this.proxy(this.addAll));

    this.routes({
        "/subset": function(){
            var items = MyModel.select(function(model){
                //Do a test on model
                return (itemToBeReturned === true);
            });
        }
    });
    MyModel.fetch();
},

addAll: function () {
    MyModel.each(this.proxy(this.addOne));
},

addOne: function (model){
   //Do some stuff with model
} 
```

我想定义一些获取原始数据子集的路由。正如你所看到的，我没有对我目前在我的路线中过滤的结果做任何事情。

有没有办法让 fetch() 只返回所有记录的子集，以便刷新事件只接收这些记录作为参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:33:40.180

因此，在过去几个晚上深思熟虑并得出我自己的结论之后，我将在这里回答我认为正确的答案。希望它可以帮助某人。

问题实际上归结为在数据到达刷新方法之前对数据进行此过滤是否合适。获取正在访问服务器并刷新接收这些记录 - 除非您开始使用脊椎的内部结构，否则这不会改变。

我基本上是在问如何过滤数据客户端。可能更好的是通过子集 URL 仅请求数据的子集，然后不必担心如何减少到***仅***我需要的数据。事实上，这可能是最明智的方法，因为唯一的另一种方法（我现在可以看到）是让默认提取发生，然后隐藏所有未出现在我的数据子集中的记录.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:19:25.380

我基本上在做类似的事情。这是有效的（我已经看到了）：

```
Model.extend({
    url: '/api/model', //whatever your endpoint is
    filter: function(id) {  //pass in whatever you want it to match
        return this.select(function(c) { //c is the record it is checking
            return c.id === id; //returns true and displays the record
        });
    }
});

var filteredItems = Model.filter(id); //filteredItems is a subset of the records.
Controller.render(filteredItems); //pass them to your render function, or do whatever you want with them. 
```

# vb.net - 访问存储在 Tag 中的对象

> ID：12840084
> 
> 赞同：1
> 
> 时间：2012-10-11T12:57:14.040
> 
> 标签：vb.net, listview

我正在存储 FileInfo 类型的对象，并尝试通过 ListView 正确重新获得对它们的访问权限。

我正在尝试使完整路径动态化..但仅在列表视图中显示文件名。所以我尝试将 FileInfo 存储在标签中，但无法重新获得价值。

这就是我将信息放在 ListViews 中的方式。

```
 For Each element As FileInfo In arrayList
            With ListView2
                .Items.Add(element.Name)
                .Tag = element
            End With 
```

现在我想重新获得对列表视图中已检查元素的访问权限。我可以轻松获得显示的值。但我只显示文件名和扩展名。我想要完整的路径。

```
 Private Sub ListView1_ItemCheck1(ByVal sender As Object, ByVal e As System.Windows.Forms.ItemCheckEventArgs) Handles ListView1.ItemCheck

Dim Path As String = Me.ListView1.Items(e.Index).Text
'this gives me the filename.. but I want to pull the full path out.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:10:13.283

这将为您提供路径：

```
Dim Path As String = CType(Me.ListView1.Items(e.Index).Tag, FileInfo).FullName 
```

或者，如果您想访问更多属性而不仅仅是路径，那么声明一个`FileInfo`变量并将其设置为标签会很有用：

```
Dim element As FileInfo = CType(Me.ListView1.Items(e.Index).Tag, FileInfo)
Dim Path As String = element.FullName
Dim fileName As String = element.Name
' ... 
```

# jquery - JQuery AJAX 在 IE 中不起作用

> ID：12840085
> 
> 赞同：0
> 
> 时间：2012-10-11T12:57:18.613
> 
> 标签：jquery, ajax

我有以下代码在所有浏览器上都能很好地工作，但 IE 7 ......

```
 <script type="text/javascript">
 $(document).ready(function(){
 $('#homenews').load('http://domain.co.uk/investor/test_releases.php .newspost:lt(2)')
 });
 </script> 
```

有任何想法吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:31:58.677

当您使用加载 jQuery 函数时，IE7 似乎可以缓存您的代码。

您可以尝试阅读这篇博文，解决问题：

[http://zacster.blogspot.it/2008/10/jquery-ie7-load-url-problem.html](http://zacster.blogspot.it/2008/10/jquery-ie7-load-url-problem.html)

# c# - caml查询如何返回null？

> ID：12840095
> 
> 赞同：0
> 
> 时间：2012-10-11T12:57:43.960
> 
> 标签：c#, visual-studio-2010, sharepoint-2010, caml

我的代码中有一个 caml 查询来返回一些 SharePoint 列表项。如果查询未找到任何匹配项或返回 NULL，我添加了 IF 语句。

```
 SPListItemCollection Items = RiskAssesment.GetItems(new SPQuery()
                   {
                       Query = @"<Where>
                                   <Eq>
                                     <FieldRef Name='Department'/>
                                     <Value Type='Text'>"+Department+"</Value>
                                   </Eq>
                                 </Where>"
                    });

                    foreach (SPListItem item in Items)
                    {
                        if (item != null)
                        {
                            item["Name"]="abcd";
                            item.Update();
                        }
                        else
                        {
                            newListItem["Name"] = "xyz";
                            newListItem.Update();
                        }
                    } 
```

如果在列表中没有找到 Department，则不会转到 ELSE 语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:26:32.653

使用 item count 可以先了解是否有任何项目与您的选择。如果你有计数，那么使用你的 for-each 循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T14:41:23.707

```
 try{
    SPListItemCollection Items = RiskAssesment.GetItems(new SPQuery() 
                        { 
                            Query = @"<Where> 
                                             <Eq> 
                                                <FieldRef Name='Department'/> 
                                                <Value Type='Text'>"+Department+"</Value>                           </Eq></Where>" 
                        }); 
                         if(Items != null){
                        foreach (SPListItem item in Items) 
                        { 
                            if (item != null) 
                            { 
                                item["Name"]="abcd"; 
                                item.Update(); 
                            } 
                            else 
                            { 
                                newListItem["Name"] = "xyz"; 
                                newListItem.Update(); 
                            } 
                        } 

                    }

        }
        Catch(Exception exc){
        //Do something with your exception here
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:30:31.993

我解决了。该查询将仅返回您输入的部门。因此 foreach 语句将仅包含该部门中的项目。所以我没有找到其他不匹配的项目。这就像是：

```
 SPListItemCollection Items = RiskAssesment.GetItems(new SPQuery()
                        {
                            Query = @"<Where>
                                         <Eq>
                                            <FieldRef Name='Department'/>
                                            <Value Type='Text'>" + Department + "</Value></Eq></Where>"
                        });

                        if (Items.Count==0)
                        {
                           item["Name"]="abcd"; 
                            item.Update(); 
                        }
                        else
                        {
                            foreach (SPListItem item in Items)
                            {
                                if (item != null)
                                {
                                   item["Name"]="abcd"; 
                            item.Update(); 
                                }
                            }
                        } 
```

# usb - 有没有人在 ChibiOS 上成功使用 USB 转串口库？

> ID：12840097
> 
> 赞同：2
> 
> 时间：2012-10-11T12:57:51.057
> 
> 标签：usb, serial-port, rtos, stm32f4discovery

我正在使用[ChibiOS/RT](http://en.wikipedia.org/wiki/ChibiOS/RT)操作系统，试图让[USB 到串行库](http://chibios.sourceforge.net/html/group___s_e_r_i_a_l___u_s_b.html)工作。我设法将所有文件链接在一起，并与 Yagarto 一起运行。但我似乎什至无法使用 USB to Serial lib 的启动功能。

我正在使用 STM32F4 Discovery 并希望将其 USB 用作与 PC 的连接。我已经使用 IAR 的 CDC 类完成了这项工作，但我想在这个项目中使用 ChibiOS，这一切似乎都过于复杂了。（我使用过 ChibiOS，但只有 UART 和一些端口切换 LED 等）。

你能给我一个启动USB的示例代码吗？我一直找不到任何东西。

```
sduStart( ??? , ??? ); // I saw what parameters it wants in there but I cannot figure what to actually put :/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-12-13T16:16:05.523

第一个参数是一个指向 SerialUSBDriver 的指针，定义如下：

```
SerialUSBDriver SDU1; 
```

第二个参数是一个指向 SerialUSBConfig 的指针，定义如下：

```
SerialUSBConfig SDU1_cfg = {                                                     
    .usbp     = &USBD1,      // USB driver to use                                
    .int_in   = CDC_IRQ_EP,  // Interrupt IN endpoint used for notifications        
    .bulk_in  = CDC_DATA_EP, // Bulk IN endpoint used for outgoing data transfer 
    .bulk_out = CDC_DATA_EP  // Bulk OUT endpoint used for incoming data transfer
}; 
```

您应该定义正确的端点编号 CDC_IRQ_EP 和 CDC_DATA_EP。在我的特殊情况下，它们是这样定义的（但这不相关）：

```
#define CDC_IRQ_EP   6
#define CDC_DATA_EP  7 
```

所以工作调用应该是这样的：

```
sduStart(&SDU1, &SDU1_cfg); 
```

希望这可以帮助。

# drupal-7 - 在首页添加页面浏览量

> ID：12840099
> 
> 赞同：0
> 
> 时间：2012-10-11T12:57:55.300
> 
> 标签：drupal-7, drupal-views

我正在drupal 7.15 中制作一个类似博客的网站。

在首页，我想显示前 5 篇文章。我使用块类型视图做到了这一点。

在这个块的末尾，我还想显示一个名为“所有文章”的链接，它将指向一个包含**所有文章**的页面。

为此，我制作了一个**页面类型的视图，但我不知道****如何在块内添加指向该视图的链接**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:11:23.227

您可以在视图中将 HTML 代码添加为页脚、全局文本区域，并提供指向该页脚中任何您想要的任何内容的链接。

请参阅此[视图教程视频](http://vimeo.com/21052316)。在视频中大约 3:15 处，讲师谈到添加一个与 Views 页脚非常相似的 Views 页眉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:27:18.263

在块显示的视图编辑屏幕上，转到寻呼机部分，然后单击“更多链接：”旁边的“否”。在弹出的对话框中，选中“创建更多链接”复选框并保存视图。

为此，您需要让页面显示在与块相同的视图中。因此，不要像您那样为页面显示创建一个新视图，而是在同一视图中创建一个页面显示。

# java - 是否可以使用 table_name.column_name 文本标签从 Oracle DB 获取列元数据？

> ID：12840102
> 
> 赞同：1
> 
> 时间：2012-10-11T12:58:07.023
> 
> 标签：java, oracle, jdbc, metadata

我已获得对 Oracle 数据库的访问权限，我正在尝试确定表中的给定列是否可以为空。我可以连接到 Oracle DB 并获取连接元数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:09:53.477

普通 SQL 解决方案（适用于各种数据库访问层）

要获取特定列：

```
SELECT NULLABLE 
FROM USER_TAB_COLUMNS 
WHERE TABLE_NAME = '<YOUR_TABLE_NAME>' 
AND COLUMN_NAME = '<YOUR_COLUMN_NAME>'; 
```

要获取表中的所有列：

```
SELECT COLUMN_NAME, NULLABLE 
FROM USER_TAB_COLUMNS 
WHERE TABLE_NAME = '<YOUR_TABLE_NAME>' ; 
```

如果表在另一个模式中，你应该这样使用它：

```
SELECT COLUMN_NAME, NULLABLE 
FROM ALL_TAB_COLUMNS 
WHERE OWNER = '<OWNER_SCHEMA_NAME>' 
AND TABLE_NAME = '<YOUR_TABLE_NAME>'; 
```

（基于[OTN 论坛](https://forums.oracle.com/forums/thread.jspa?messageID=9133830)上的帖子）

JDBC具体解决方案：

您可以使用[DatabaseMetadata](http://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html)对象：

*   通过调用获取表数据`getColumns(null,null,'yourtablename','%',null)`
*   然后从结果集中，得到你需要的 'COLUMN_NAME' 列和 'NULLABLE'

（来自[Herong Yang 博士：列出所有列 - getColumns()](http://www.herongyang.com/JDBC/sqljdbc-jar-Column-List.html)）

或者您可以使用虚拟查询：[Java2S: Is column nullable from ResultSetMetadata](http://www.java2s.com/Code/Java/Database-SQL-JDBC/IsColumnNullableFromResultSetMetadata.htm) 我不喜欢这个，这不是一个干净的解决方案......

# java - 如何同时运行多个线程进行自动化 Selenium 测试？

> ID：12840103
> 
> 赞同：2
> 
> 时间：2012-10-11T12:58:09.333
> 
> 标签：java, multithreading, gwt, selenium, thread-safety

我有一个 Web 应用程序，我可以从中启动另一个 Java 应用程序中的相应测试过程。我正在使用 Socket Programming 在 Web 应用程序和 Java 应用程序之间进行通信。

当我从 Web 应用程序请求特定进程时，来自 Java 应用程序的 SocketServer 会听到请求并启动一个线程进行测试进程。测试过程将初始化 FirefoxDriver 并启动浏览器并进行进一步的测试过程。

我的问题是，当我请求另一个进程名称不同的进程时，它会再次创建第二个线程并启动 firefox 浏览器，但这次它不考虑我的第二个进程，它开始执行第一个线程具有的相同进程。

我不明白该怎么做...对于每个进程，我都创建了一个新线程，但它会进一步执行相同的进程。我的输入在 Java 应用程序中被正确接收。请帮助我如何进行并发线程安全处理？我正在使用 GWT、Java、Seleniun FirefoxDriver。

这是在后台运行并侦听客户端请求的服务器代码：

```
static final int PORT = 6789;

    public static void main(String args[]) {
        ServerSocket serverSocket = null;
        Socket socket = null;
            try {
            InitializeApplication application = new InitializeApplication();
            application.initialize();

            serverSocket = new ServerSocket(PORT);
        } catch (Exception e) {
            log("Exception in SocketServerExecutor !!!",e);
        }
        while (true) {
            try {
                socket = serverSocket.accept();
            } catch (Exception e) {
                log("Exception in SocketServerExecutor !!!",e);
            }
            Thread thread = new Thread(new SocketServerThread(socket));
            thread.start();
        }
    } 
```

这是启动进程的线程：

```
 private Socket client;

        public SocketServerThread(Socket serverSocket) {
            this.client = serverSocket;
        }

        /**
         * Starts appropriate process depending on process name from input.
         * Input string contains:
         * process name
         */
        public void run() {
            DataOutputStream outputStream = null;
            String param = null; 

            try{
                log("Just connected to "+ client.getRemoteSocketAddress());
                    try {
                        while ((param = in.readUTF()) != null){
                            log("got parameteres from client (i.e. from web app): "+param);
                            break;
                        }
                    } catch (Exception e) { }
                    if(param!=null && !param.isEmpty()){
                        String process = params[0];

                        ProcessManager manager = new ProcessManager();
                        if(process.equals("testUser"))
                            manager.startUserProcess(process);
                        else if(process.equals("testCustomer"))
                            manager.startCustomerProcess(process);

                    }
            }catch(Exception exc){
                if(exc instanceof SocketTimeoutException)
                    log("Socket timed out! [SocketServerThread]",exc);
                else if(exc instanceof BindException)
                    log("BindException in SocketServerThread !!!",exc);
                log(Level.SEVERE, "Exception in SocketServerThread !!!",exc);
            }
        } 
```

这是ProcessManager：

```
public void starUserProcess(String siteName) {
        ExecutorService executerService = null;
        try{
            Callable<Object> callable = new ProcessThread(siteName);
            executerService = Executors.newCachedThreadPool();
            Future<Object> future = executerService.submit(callable);
            future.get();

            log("[ProcessManager] Process completed for "+process);  
            System.exit(0);
        }catch (Exception e) {
            log("[ProcessManager]::Exception");
            log(ex);
        }
    } 
```

ProcessThread 将初始化所有需要的东西和 Firefox 浏览器并启动进程。每次包含输入的客户端都是新的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:24:40.890

得到了解决方案：我使用**newSingleThreadExecutor()** 而不是**newCachedThreadPool()创建了****ExecutorService** ，并且还为每个新创建的 ServerThread 设置了 setDeamon(True)。 [这是执行器文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executors.html)

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:08:56.190

我能想到的两件事之一可能正在发生。

1.  您正在将参数传递给您的 run() 函数，该函数链接回初始线程或...

2.  您正在使用所有线程都可以访问的共享变量，并且该变量未正确更新或根本未更新。

如果您可以包含 SSCCE，这将有助于我们确定问题的真正所在。****

# sharepoint - 在 webzone 问题中对 webpart 进行排序

> ID：12840106
> 
> 赞同：1
> 
> 时间：2012-10-11T12:58:18.983
> 
> 标签：sharepoint, sharepoint-2010

我有一个带有 webpart 区域的页面布局。根据要求，该 webzone 中应该有 4 个自定义 webpart。我已根据要求按顺序放置 webpart。但是当我尝试使用此布局创建一个新的发布页面时，我可以看到我在布局中给出的 webpart 的顺序与新创建的页面中的不同。因此，我必须再次在编辑模式下订购这些 webpart。更改了布局中 webpart 的区域索引属性，但在新创建的页面中仍然没有按顺序排列。

例如：页面布局中 web 部件的排序。 ![在此处输入图像描述](../Images/66710717d1d8c09db7ef9cdf1c4312fd.png)

使用布局创建页面后的 web 部件排序。

![在此处输入图像描述](../Images/b2224b9e35f090cf82dfcc6134a3957a.png)

任何解决此订购问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:39:50.390

因此，您已经按照您希望的顺序在页面布局中使用四个 Web 部件预加载了 Web 部件区域？如果是这样并且顺序不正确，那么您可能必须创建一个可以在创建页面时捕获的事件接收器，然后通过代码手动添加 Web 部件。这至少可以确保订单，但对我来说似乎有点矫枉过正。

但是，如果 Web 部件包含在页面布局内的 Web 部件区域中，则应在创建页面时按该顺序添加它们。

# python - Pykka：获取 Actor 的基类

> ID：12840107
> 
> 赞同：0
> 
> 时间：2012-10-11T12:58:22.210
> 
> 标签：python, actor, pykka

我使用[pykka](http://pypi.python.org/pypi/Pykka) python 库。我想创建一个演员，然后测试创建的演员是否属于正确的类。

```
class MyActor( ThreadingActor ):
  # ...

actor = MyActor.start().proxy()

assert actor.__class__ == MyActor # check here? 
```

这里`actor.__class__`是`pykka.actor.ActorRef`。如何检查它是否指`MyActor`类？我需要它用于单元测试套件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:51:53.230

要从以下位置获取演员类`pykka.actor.ActorRef`：

```
ref = MyActor.start()
assert ref.actor_class == MyActor 
```

要从以下位置获取演员类`pykka.proxy.ActorProxy`：

```
proxy = MyActor.start().proxy()
assert proxy.actor_ref.actor_class == MyActor 
```

我忘记记录对象`actor_class`上的字段`ActorRef`，但所有未通过以下划线前缀“私有”的字段在未来将继续得到支持。

# regex - 为什么 sed -e 's/[ +-]?[0-9]*\.[0-9]*//g' 不起作用？

> ID：12840108
> 
> 赞同：1
> 
> 时间：2012-10-11T12:58:25.690
> 
> 标签：regex, sed

我想使用 sed 从字符串中删除所有浮点数。因此我使用

```
sed -e 's/[ +-]?[0-9]*\.[0-9]*//g' 
```

但它不起作用：

```
echo 1.2456 | sed -e 's/[ +-]?[0-9]*\.[0-9]*//g' 
```

给`1.2456`. 如果我删除该`[ +-]?`块，它适用于正数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T13:03:18.203

您需要转义问号：

```
echo 1.2456 | sed -e 's/[ +-]\?[0-9]*\.[0-9]*//g' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:07:54.510

该`?`符号是扩展的正则表达式字符。`sed`需要使用`-r`选项调用以启用扩展表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T21:30:43.327

这个版本更具可比性。? 不适用于所有系统，+ 可以表示重复一次或多次。

```
echo 1.2456 | sed -e 's/[ \+\-]*[0-9]*\.[0-9]*//g' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T13:04:27.537

逃脱`?` 或`sed -r`

那么它应该可以工作。

# ios - MPMusicPlayerController applicationMusicPlayer - 应用程序启动时恢复

> ID：12840111
> 
> 赞同：1
> 
> 时间：2012-10-11T12:58:39.153
> 
> 标签：ios, mpmusicplayercontroller

MPMusicPlayerController独立于 iPod（或音乐）应用[程序](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMusicPlayerController_ClassReference/Reference/Reference.html) `applicationMusicPlayer`运行，这正是我想要的。当应用程序进入后台时它会停止播放，这也是我想要的。

但是，我希望它在应用程序恢复时恢复播放。目前我通过再次调用 play 方法来做到这一点，但这会导致音频从头开始。有没有办法让我真正从音频中断的地方继续播放？我似乎找不到任何关于它的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T13:13:21.520

在 App Delegate 的`applicationWillResignActive:`方法中，读取`musicPlayer.currentPlaybackTime`属性（在 MPMediaPlayback 协议中声明）并将该值存储在某处。您可以设置一个属性，例如：

```
@property (assign, nonatomic) NSTimeInterval playbackTime; 
```

并将其分配给：

```
- (void)applicationWillResignActive:(UIApplication *)application
{
    MPMusicPlayerController *myPlayer =
    [MPMusicPlayerController applicationMusicPlayer];

    self.playbackTime = myPlayer.currentPlaybackTime;
    [myPlayer pause];
} 
```

当应用程序即将再次激活时，`applicationDidBecomeActive:`将调用 App Delegate 的方法。在该方法中，设置 currentPlaybackTime 属性。

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    MPMusicPlayerController *myPlayer =
    [MPMusicPlayerController applicationMusicPlayer];
    myPlayer.currentPlaybackTime = self.playbackTime;
    [myPlayer play];
} 
```

# python - python方法可以链接吗？

> ID：12840115
> 
> 赞同：0
> 
> 时间：2012-10-11T12:59:03.750
> 
> 标签：python, chainable

```
s = set([1,2,3]) 
```

我应该优雅地执行以下操作：

```
a.update(s).update(s) 
```

我没有像我想的那样工作`set([1,2,3,1,2,3,1,2,3])`

所以我在徘徊，Python 是否提倡这种可链接的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:05:15.177

`set.update()`返回`None`，所以你不能像这样链接更新

Python 中的通常规则是变异的方法不返回对象

与不可变对象上的方法形成对比，后者显然必须返回一个新对象，例如`str.replace()`可以链接的对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:05:50.593

这取决于。

修改对象的方法*通常会*返回`None`，因此您不能像这样调用一系列方法：

```
L.append(2).append(3).append(4) 
```

并希望有同样的效果：

```
L.append(2)
L.append(3)
L.append(4) 
```

您可能会得到一个，`AttributeError`因为第一次调用`append`返回`None`并且`None`没有`append`方法。

创建新对象的方法返回该对象，例如：

```
"some string".replace("a", "b").replace("c", "d") 
```

完全没问题。

*通常*不可变对象返回新对象，而可变对象返回，`None`但这取决于方法和特定对象。

无论如何，它肯定不是语言本身的特性，而只是实现方法的一种方式。可链接方法可以用任何语言实现，因此“python 方法是否可链接”这个问题没有多大意义。唯一合理的问题是“python 方法是否总是/被迫/等可链接？”，这个问题的答案是“否”。

* * *

在您的示例`set`中只能包含唯一项目，因此您显示的结果没有任何意义。您可能想使用一个简单的`list`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:03:51.263

并且`update`方法不会返回一个`set`，而是一个`None`值。
所以，你不能`update`在链上调用另一个方法`NoneType`

所以，这无论如何都会给你错误..

```
a.update(s).update(s) 
```

但是，因为 a`Set`只能包含`unique`值。所以，即使你`update`在不同的线路上分开，你也不会得到`Set`你想要的..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T13:06:52.170

是的，您可以在 Python 中链接方法调用。至于这是否是一种好的做法，有许多图书馆提倡使用链式调用。例如，SQLAlchemy 的[教程](http://docs.sqlalchemy.org/en/rel_0_7/orm/tutorial.html)广泛使用了这种编码风格。您经常会遇到代码片段，例如

```
session.query(User).filter(User.name.in_(['Edwardo', 'fakeuser'])).all() 
```

一个明智的指导方针是问问自己它是否会使代码更易于阅读和维护。始终努力使代码可读。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T13:07:42.703

我写了一个简单的例子，可链接的方法应该总是返回一个对象，比如`self`，

```
class Chain(object):
    """Chain example"""
    def __init__(self):
        self._content = ''    
    def update(self, new_content):
        """method of appending content"""
        self._content += new_content
        return self
    def __str__(self):
        return self._content

>>> c = Chain()

>>> c.update('str1').update('str2').update('str3')

>>> print c
str1str2str3 
```

# android - 在不重新启动的情况下更改 android 设备上的屏幕分辨率

> ID：12840118
> 
> 赞同：0
> 
> 时间：2012-10-11T12:59:11.697
> 
> 标签：android, screen, resolution, reboot

我尝试在系统的 build.prop 文件中更改屏幕分辨率，但它需要重新启动。我需要一种无需重新启动即可更改 android 设备上的屏幕分辨率的解决方案。

谢谢，克里希纳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:30:00.813

不幸的是，这是不可能的。每次Android启动时，它都会读取build.prop文件并相应地设置它指向的参数。启动后，它不会动态访问该文件来更改参数。因此，要使任何更改生效，必须重新启动，您无法逃避它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-19T23:23:46.250

*设置分辨率（例如 1024x768）：*

```
$ am display-size 1024x768 
```

*重置：*

```
$ am display-size reset 
```

不需要重新启动。这适用于 Android 4.2。[LiTTLe](https://stackoverflow.com/questions/12840118/changing-screen-resolution-on-android-devices-without-re-booting/19044723#19044723)提到了 4.3 的解决方案

还有一个名为[NOMone Resolution Changer](https://play.google.com/store/apps/details?id=com.MTMDevelopers.ScreenSpecs)的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T07:06:35.640

Android**可以**更改屏幕分辨率。
我认为您需要Android 4.0 及以上版本。

您只需要终端仿真器和 root 访问权限。

重现以下步骤：
1\. 打开终端模拟器应用程序。
2\. 键入`su`。
3\. 键入`wm`。
阅读出现的帮助信息，您就会明白...

如果您想要一个应用程序，请查看[Play](https://play.google.com/store/apps/details?id=info.bits.phoneastablet&hl=en)商店或 Github 的[源代码](https://github.com/BILLyTheLiTTle/PhoneAsTablet)。

# gwt - GWT中的可拖动弹出窗口？

> ID：12840120
> 
> 赞同：0
> 
> 时间：2012-10-11T12:59:17.617
> 
> 标签：gwt

我使用的是 PopupPanel，但默认情况下它不能在屏幕上拖动。是使 id 可拖动的方法还是我应该使用整个另一个组件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T13:32:17.087

该类`DialogBox`是可拖动的，通过它的标题栏（a`PopupPanel`没有；还要注意，`DialogBox`extends `DecoratedPopupPanel`，not just`PopupPanel`和 sizing 的工作方式与 for 不同`PopupPanel`）。

# php - php日期和增量的问题

> ID：12840122
> 
> 赞同：0
> 
> 时间：2012-10-11T12:59:18.880
> 
> 标签：php, date, increment

我已经完成了增加日期的功能

以下是：

```
function periode($var, $i3, $i2)
    {
        if($var=='52')
        {
            return "+ ".$i3." week";
        }
        if($var=='26')
        {   
            return "+ ".($i3+2+$i3)." week";
        }
        if($var=='12')
        {
            return "+".$i3." month";
        }
        if($var=='6')
        { 
            return "+ ".($i3+$i2)." month";
        }
        if($var=='4')
        {  
            return "+ ".($i3+2*$i2)." month";
        }
        if($var=='2')
        {

            return "+ ".($i3+5*$i2)." month";
        }
        if($var=='1')
        {
            return "+ ".($i2)." year";
        }

    } 
```

问题是当我像这样使用该功能时：

```
if($pay_periodicity==26){$i3=0;}elseif($pay_periodicity==4){$i3=0;}elseif($pay_periodicity==6){$i3=0;}else{$i3=0;}; $i2=0;
 $montant_echeance = round($montant_du / $nombre_echeances, 2);
 $reste=$montant_du ;
 while($i2 <= $nombre_echeances)
 {
        echo periode($pay_periodicity,$i3,$i2);
        if ($i2 == $nombre_echeances)
        {
                $montant_echeance = $reste;
                $reste = 0;
        } 

     $date    = date("d-m-Y",strtotime((($debut)."".periode($pay_periodicity,$i3,$i2)."")));  
     $chaine .= "<tr>
     <td>$montant_du</td>
      <td>".$date."</td>
     <td>$montant_echeance</td>
     <td>$reste</td></tr>";
           $reste = $reste-$montant_echeance;
     $i2++;
     ++$i3;
        }
$chaine .="</table>";
print "$chaine";

    } 
```

在 25 日 $i2 之后，它会显示如下日期：

```
01-01-1970 
```

我真的不明白为什么我们不能增加超过 25 年。

任何帮助或建议将不胜感激。

亲切的问候。

SP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T13:04:16.883

您遇到了溢出问题。可以存储在 32 位变量中的最高日期出现在 2038-01-19

[http://en.wikipedia.org/wiki/Year_2038_problem](http://en.wikipedia.org/wiki/Year_2038_problem)解释了这个问题。

**编辑：**
如果底层架构也是 64 位，一种解决方案是升级到 64 位版本的 PHP。

从[如何在 PHP 上使用 64 位整数？](https://stackoverflow.com/questions/864058/how-to-have-64-bit-integer-on-php)：
本机 64 位整数需要 64 位硬件和 64 位版本的 PHP。

在 32 位硬件上：

```
$ php -r 'echo PHP_INT_MAX;'
2147483647 
```

在 64 位硬件上：

```
$ php -r 'echo PHP_INT_MAX;'
9223372036854775807 
```

# exception-handling - 这些片段是等价的吗？（NVL 与例外）

> ID：12840126
> 
> 赞同：0
> 
> 时间：2012-10-11T12:59:30.497
> 
> 标签：exception-handling, plsql, nvl, no-data

当没有找到数据时，我对管理基于 sql 语句的变量赋值的情况存在疑问。首先，这些块是等价的吗？如果这是真的，两者中的一个更好吗？

```
declare
nonsense number;
begin
  select nvl((select 1 from dual where 1 <> 1),2) into nonsense from dual;
  dbms_output.put_line(nonsense);
end;

declare
nonsense number;
begin
  begin
  select 1 into nonsense from dual where 1<>1;
  exception when no_data_found then
    nonsense := 2;
  end;
  dbms_output.put_line(nonsense);
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:07:12.963

简短答案是，长答案，在这种情况下 nvl 更快，如果未找到结果值就在 de select 内部，在异常中它首先执行 select 并在它调用异常的过程之后。在这种情况下，nvl 更好，因为您有一个固定值。

如果您有“其他”，请始终选择 nvl。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:08:08.043

两个块都输出`2`，所以两者都是“*等价*的”。我认为第二种形式更标准，更容易阅读。

比较两个函数：

```
FUNCTION getSal (p_id NUMBER) RETURN NUMBER
IS
   l_return NUMER;
BEGIN
   SELECT sal INTO l_return FROM emp WHERE id = p_id;
   RETURN l_return;
EXCEPTION
   WHEN NO_DATA_FOUND
      THEN RETURN 0;
END;

FUNCTION getSal (p_id NUMBER) RETURN NUMBER
IS
   l_return NUMER;
BEGIN
   SELECT NVL((SELECT sal INTO l_return FROM emp WHERE id = p_id), 
              0)
     INTO l_return
     FROM DUAL;
   RETURN l_return;
END; 
```

虽然第一行多了几行，但更容易理解的是，如果找不到员工，则返回 0。第二个需要更多时间来理解，因此会更加混乱。

我肯定会选择第一个，因为它们的性能相同，可读性等于可维护性，因此很重要。

另请注意，我的两个块并不完全等效。如果员工的薪水为 NULL，我的第一个查询将返回 NULL，而我的第二个查询将返回 0。

# python - 使用 matplotlib 绘图时更改刻度标签的位置（移动）

> ID：12840129
> 
> 赞同：4
> 
> 时间：2012-10-11T12:59:56.057
> 
> 标签：python, matplotlib, plot, label

我正在用 matplotlib 绘图。代码如下（zvals 有值）

```
cmap = mpl.colors.ListedColormap(['darkblue', 'blue', 'lightblue','lightgreen','yellow','gold','orange','darkorange','orangered','red'])
bounds=[0, 10,20,30,40,50,60,70,80,100,200,1000]
norm = mpl.colors.BoundaryNorm(bounds, cmap.N)
img2 = plt.imshow(zvals,interpolation='nearest',
                cmap = cmap,
                norm=norm,
                origin='lower')

xlocations = na.array(range(30)) + 0.5
xticks(xlocations, [str(x+1) for x in arange(30)], rotation=0, size=5)
gca().xaxis.set_ticks_position('none')
gca().yaxis.set_ticks_position('none')  
grid(True) 
```

这导致以下图片：http: [//imageshack.us/a/img145/7325/histogrammoverview.png](http://imageshack.us/a/img145/7325/histogrammoverview.png)

我想将 xticks (1,2,3,..) 的标签向左移动一点，所以它们位于相应的颜色框下方。相应地，我还想将 yticks（user1 和 user2）的标签向下移动一点，以便正确显示它们。如何才能做到这一点？

编辑：事实上，我可以将以下行 xlocations = na.array(range(30)) + 0.5 更改为 xlocations = na.array(range(30))

然后生成的图片是这样的：http: [//imageshack.us/a/img338/7325/histogrammoverview.png](http://imageshack.us/a/img338/7325/histogrammoverview.png)

请注意网格正在“穿过”彩色框，这不是我想要的。我希望网格将彩色框边缘化，如上图所示。在这个版本中，尽管标签 (1,2,3,...) 正确放置在框下方。我怎样才能正确放置标签（在彩色框下方）和围绕彩色框而不是穿过彩色框中间的网格。

**解决方案**

该解决方案有效（如答案所示）：

```
periods = 30
xlocations = na.array(range(periods))
xminorlocations = na.array(range(periods))+0.5
xticks(xlocations, [str(x+1) for x in arange(periods)], rotation=0, size=5)
plt.set_xticks(xminorlocations, minor=True)
grid(True, which='minor', linestyle='-') 
```

结果：hxxp://imageshack.us/a/img9/7325/histogrammoverview.png

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:37:23.313

我认为你可以通过

*   将主要刻度位置设置为每个正方形的中间。
*   将次要刻度设置到每个正方形的边缘。
*   将网格设置为仅在次要刻度中显示。

网格只能在次要刻度中显示，使用

```
plt.grid(True, which='minor') 
```

我也会将线条样式设置为`'-'`。

# javascript - 如何在 JavaScript 中构造新对象

> ID：12840131
> 
> 赞同：0
> 
> 时间：2012-10-11T13:00:05.697
> 
> 标签：javascript, jquery

如何构造已定义对象的新实例？

我有与此类似的代码，但`this.User = new User();`它不起作用。

```
(function () {

SomeApp = {

    User: {
        FirstName: '',
        LastName: ''

    },

    Users: [],

    init: function () {
        this.User.FirstName = 'Joe';
        this.User.LastName = 'Blogs';

        //add user to list
        var copiedUser = {};
        $.extend(copiedUser, this.User);
        this.Users.push(copiedUser);

        //create new user
        this.User = new User();
        this.User.FirstName = 'Jane';

        //add user to list
        var copiedUser = {};
        $.extend(copiedUser, this.User);
        this.Users.push(copiedUser);
    }
}

SomeApp.init();

})(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T13:03:37.813

如果您希望能够使用[new](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)创建对象，您可以创建一个“构造函数”：

```
function User() {
    this.FirstName = '';
    this.LastName = '';
} 
```

旁注：我建议您遵循命名变量的最佳实践。请阅读[本指南](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml)。

# ckeditor - 集成 Markdown 所见即所得文本编辑器

> ID：12840132
> 
> 赞同：106
> 
> 时间：2012-10-11T13:00:12.330
> 
> 标签：ckeditor, richtextbox, markdown, wysiwyg

在为 Markdown 代码寻找一个简单的 WYSIWYG 编辑器时，我没有找到与 CkEditor、TinyMCE 等类似的 UI。

具体来说，经常推荐的 Markdown “所见即所得” 编辑器（例如这样的帖子[）](https://stackoverflow.com/questions/4843649/wysiwyg-edit-with-markdown-output)不是纯粹的所见即所得编辑器，因为用户要么仍然编写原始 Markdown ( [MarkItUp](http://markitup.jaysalvat.com/examples/markdown/) )，要么走向另一个极端，即在没有的情况下进行内联编辑标准控件（[你好](http://hallojs.org/demo/markdown/)）。

我需要一些介于两者之间的东西。

我正在寻找一个 Markdown 编辑器，它的外观和功能类似于精简的 CkEditor 文本框，并且接受和输出 Markdown。应该有一个带有最少一组格式选项（B、I、U、列表等）的工具栏，并且文本输入区域应该显示转换后的 Markdown，而不是原始代码。应该有一个 Source 按钮，允许用户编辑原始 Markdown，但即使这样也是可选的。前任：

![在此处输入图像描述](../Images/1be033edef016f32def2ccd505d22836.png)

我得到了 Markdown/wiki 等的原因——它提供的安全性。我不介意在 SE 输入像这里这样的原始代码，但我的用户不是极客，也不觉得这很有趣。他们不想看到 * * * ___ 和空格与他们的文本混合。他们习惯于“Word”风格的编辑，并且在那种环境下效率最高。

那么 - Markdown 是否有真正集成的 WYSIWYG 编辑器？我正在用 PHP 编写，所以我可以用类调用的东西是完美的。

* * *

**2015 年 9 月 23 日更新**

CKEditor 现在有一个**Markdown** [插件](http://ckeditor.com/addon/markdown)来做这件事。插件项目[托管在 github 上](https://github.com/hectorguo/CKEditor-Markdown-Plugin)。

截图：

[![降价所见即所得](../Images/2ea201e61b64da8dd025ceed4bd310e7.png)](https://i.stack.imgur.com/24CXH.png)

[![降价源](../Images/cedbbe371bacc52ec60e1dcfec4f2555.png)](https://i.stack.imgur.com/KcZQs.png)

* * *

**2015 年 4 月 13 日更新**
自称开发 CKEditor 的人说[CommonMark](http://commonmark.org/)的出现改变了游戏规则，我们可能会看到[CKEditor 的正确标记界面](https://stackoverflow.com/a/22271265/721073)（阅读完整故事的评论）。

* * *

**2015 年 2 月 6 日更新**

CKEditor 现在带有一个输出（并接受作为输入）BBCode 的插件。

演示：[http ://ckeditor.com/demo#bbcode](http://ckeditor.com/demo#bbcode)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-09-12T06:53:56.693

[新人SimpleMDE](https://simplemde.com/)可能是答案。我一直在寻找这样的东西一个月了。我很惊讶这并没有在搜索结果中显示得更高。我必须通过[lepture/editor](https://github.com/lepture/editor)上的通知才能找到这个。

[![在此处输入图像描述](../Images/c9b3f20b44c39aeed9fe7f16c0e48afc.png)](https://i.stack.imgur.com/zubtk.png)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-05T20:42:18.067

前几天我正在研究这个主题，但我没有找到任何具有 Markdown 输出的像样的所见即所得编辑器。事实上，首先你必须创建一个 WYSIWG Markdown 编辑器，即 WYSIWG HTML 编辑器，而市场上可用的很少。

您有机会`dataProcessor`为 CKEditor 创建将 HTML 编辑器更改为 Markdown 编辑器的机会。我们有一个这样的 BBCode 插件（查看[http://nightly-v4.ckeditor.com/3737/samples/bbcode.html](http://nightly-v4.ckeditor.com/3737/samples/bbcode.html)）。

您所要做的就是实现这个接口[http://nightly-v4.ckeditor.com/ckeditor_api/#!/api/CKEDITOR.dataProcessor](http://nightly-v4.ckeditor.com/ckeditor_api/#!/api/CKEDITOR.dataProcessor)。如果您检查 BBCode 插件的代码，您会看到一些 hacks 和技巧，因为不幸的是当前 CKEditor 的架构还没有准备好（还）创建这样的数据处理器。但是，我相信如果您只想提供几个样式选项，您应该能够很快实现 Markdown 支持。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-02-06T19:08:53.243

**编辑 2015 年 9 月 23 日**

CKEditor 现在有一个**Markdown** [插件](http://ckeditor.com/addon/markdown)来做这件事。插件项目[托管在 github 上](https://github.com/hectorguo/CKEditor-Markdown-Plugin)。

截图：

[![降价所见即所得](../Images/cedbbe371bacc52ec60e1dcfec4f2555.png)](https://i.stack.imgur.com/KcZQs.png)

[![降价源](../Images/2ea201e61b64da8dd025ceed4bd310e7.png)](https://i.stack.imgur.com/24CXH.png)

* * *

正如我在 2015 年 2 月 6 日的更新中所发布的，[CKEditor](http://ckeditor.com)现在包含允许 BBCode 输入和输出的插件。

此处提供演示：http: [//ckeditor.com/demo#bbcode](http://ckeditor.com/demo#bbcode)

**编辑 2015 年 4 月 13 日：**
自称开发 CKEditor 的人说[CommonMark](http://commonmark.org/)的出现改变了游戏规则，我们可能会看到[CKEditor 的正确标记界面](https://stackoverflow.com/a/22271265/721073)（阅读全文评论）。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-03-10T19:08:42.980

**[Pen](http://sofish.github.io/pen/)**是一种新的（自 2014 年起有效）所见即所得编辑器，可~~输出 Markdown~~。
它并不完美——我在粘贴 HTML 时遇到了问题——但它可以工作。

> 编辑：对不起！**它不输出 Markdown。** [Walery Strauch](https://stackoverflow.com/users/906523/walery-strauch)在评论中指出，我看到的 Markdown 格式化标志其实是 CSS 伪元素规则：
> 
> ![](../Images/987d108a6b6bc7e4648bb831e33c6182.png)
> 
> 尽管如此，我还是把它留在这里作为一个选项，因为有些人赞成这个答案，它可能对某人有用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-11-07T16:26:03.653

我实现了一个非常简单的编辑器，它允许`<textarea>`以所见即所得的方式编辑包含 Markdown 的内容。

我用过[你好](http://hallojs.org)。我不认为它的网站表明它本身不是一个 Markdown WYSIWYG 编辑器，但该[演示](http://hallojs.org/demo/markdown)确实为它开辟了道路。

[Hallo](http://hallojs.org)允许在`<div>`. 我使用 javascript 隐藏任何`<textarea>`具有特定`wysiwyg`CSS 类的块，将其替换为 a`<div>`并将其内容复制`<textarea>`到`<div>`. 复制通过[Showdown](https://github.com/showdownjs/showdown)运行，它从 Markdown 生成 HTML。

每次`<div>`内容更改时，另一个 Javascript 例程都会做出反应。它将内容复制回（现在隐藏）`<textarea>`。内容通过[to-markdown](https://github.com/domchristie/to-markdown)运行，将 HTML 转换为 Markdown。

如果`<textarea>`是 > 中的一个字段`<form`，那么在提交该表单时，编辑后的 ​​Markdown 将被发送到服务器。

灵感来自[Hallo Markdown Example](http://hallojs.org/demo/markdown)，特别是[editor.js](http://hallojs.org/js/markdown/editor.js)文件。我将它与[hallo.js](https://github.com/bergie/hallo/raw/master/dist/hallo.js)、[showdown.js](http://hallojs.org/js/markdown/showdown.js)和[to-markdown.js](http://hallojs.org/js/markdown/to-markdown.js)一起用作[我自己的脚本](https://gist.githubusercontent.com/johnlane/bdc069ca8c05c95b1797249604c757e3/raw/3b385016f9e4b39a0c13840436c3628fdefe4fb1/wysiwyg.js)的基础。

我的脚本[wysiwyg.js](https://gist.githubusercontent.com/johnlane/bdc069ca8c05c95b1797249604c757e3/raw/3b385016f9e4b39a0c13840436c3628fdefe4fb1/wysiwyg.js)是来自[Hallo Markdown Example的](http://hallojs.org/demo/markdown)[editor.js](http://hallojs.org/js/markdown/editor.js)的衍生版本。需要注意的几点：

*   我在 Rails 应用程序中使用它（没那么重要）
*   它运行在`ready`和 上`page:load`，后者是因为 Rails 使用 Turbolinks
*   它继续运行是`ajaxComplete`因为我使用 Ajax 进行表单错误报告
*   还有其他依赖项：[JQueryUI](https://jqueryui.com)和[Rangy](https://github.com/timdown/rangy)（Rails 用户可以使用 gems [jquery-ui-rails](https://rubygems.org/gems/jquery-ui-rails)和[rangy-rails](https://rubygems.org/gems/rangy-rails)）。
*   [Font Awesome](https://fortawesome.github.io/Font-Awesome)也用于工具栏图标。[演示](http://hallojs.org/demo/markdown)`hallo.js`使用的版本已过时（它使用旧版本的[Font Awesome](https://fortawesome.github.io/Font-Awesome)） - 请改用[来自 GitHub 的 hallo.js](https://github.com/bergie/hallo/raw/master/dist/hallo.js)。

您只需将 CSS 添加`class='wysiwyg'`到 any`<textarea>`即可在其上启用 WYSIWYG。`<textarea>`应该包含 Markdown 格式的文本。

我希望[wysiwyg.js](https://gist.githubusercontent.com/johnlane/bdc069ca8c05c95b1797249604c757e3/raw/3b385016f9e4b39a0c13840436c3628fdefe4fb1/wysiwyg.js)可以很容易地适应使用另一个编辑器，如果你不喜欢[Hallo](http://hallojs.org)，只要它适用于`<div>`. 有很多可供选择，但并非所有都像[Hallo](http://hallojs.org)一样轻量级。

我发现的一个 smilar 工作是[markdown-html-form](https://github.com/justinmc/markdown-html-form)。它使用相同的[Showdown](https://github.com/showdownjs/showdown)和[to-markdown](https://github.com/domchristie/to-markdown)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-07-02T16:43:21.763

我也在寻找这个线程顶部描述的降价编辑器

你见过“降价工具”吗：http: [//md-wysiwyg.sourceforge.net/](http://md-wysiwyg.sourceforge.net/)

演示： http: [//md-wysiwyg.sourceforge.net/cgi-bin/cgi_wysiwyg_test.py/](http://md-wysiwyg.sourceforge.net/cgi-bin/cgi_wysiwyg_test.py/)

这似乎与我们正在寻找的非常接近，它在获取所见即所得的富文本和输出降价方面做得很合理。但是，当我从谷歌文档中粘贴一些富文本时，它因编码异常而失败。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-05T23:41:45.567

我发现了两个目前似乎很受欢迎，活跃且免费但尚未提及的。

第一个是[Toast UI Editor](https://ui.toast.com/tui-editor)。它支持两种模式（WYSIWYG 和 raw）。它有官方的 react 和 vuejs 包装器。

[![吐司界面](../Images/0e546a8b521e4583ef6dbe68c8822645.png)](https://i.stack.imgur.com/Dj4GJ.png)

第二个是[ProseMirror](https://prosemirror.net/)，它自称是“在 Web 上构建富文本编辑器的工具包”，它似乎非常灵活和广泛。它还支持[这两种模式](https://prosemirror.net/examples/markdown/)。

我很确定也可以找到可靠的非官方[react / vue / angular 包装器。](https://github.com/dminkovsky/use-prosemirror)

[![散文镜](../Images/fc9beae72c1295f0e265d9dabf87f845.png)](https://i.stack.imgur.com/QoP9p.png)

# wpf - Exceptions in WPF Word Addin are not being handled

> ID：12840142
> 
> 赞同：2
> 
> 时间：2012-10-11T13:00:48.620
> 
> 标签：wpf, exception, ms-word, vsto, add-in

I am creating a WPF Office add in, and I would like to handle all exceptions in one place. To do this I use the following code in the constructor of my MainWindowViewModel:

```
Dispatcher.CurrentDispatcher.UnhandledExceptionFilter += new 
     DispatcherUnhandledExceptionFilterEventHandler(HandleAllException); 
```

In my test environment I host the WPF app from a console application project, and exceptions are handled as expected. When I host the WPF app from within word however, nothing happens when exceptions are thrown. There is no notification at all that there has even been an exception, other than in the output window in visual studio. Does anyone have any suggestions as to what I might be doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:05:32.223

I have solved the problem by changing the way in which I launch my WPF app. I believe the problem was related to [this](http://blogs.msdn.com/b/debugger/archive/2010/05/12/visual-studio-debugger-fails-to-catch-unhandled-exception-for-a-windows-form-or-wpf-application.aspx).

# spring-mvc - 如何检查字段大小并使用 Spring、Spring-JS 和 DOJO (dijit) 制作所需的单选按钮

> ID：12840143
> 
> 赞同：1
> 
> 时间：2012-10-11T13:00:47.700
> 
> 标签：spring-mvc, dojo, spring-webflow, spring-js

我正在使用 Spring、Spring-JS 和 DoJo(dijit) 进行我的第一个项目，并且基于以下编码示例，我有两个问题。

1) 如何检查 Dojo (dijit) 电话号码字段的大小是否正确，以及如何检查姓名字段是否大于 3 且小于 50？

2）如您所见，我的表单有单选按钮，我需要根据需要进行设置。我如何使用 Dojo (dijit) 做到这一点。

谢谢

```
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jstl/fmt"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>

<script type="text/javascript"
    src="<c:url value="/resources/dojo/dojo.js" />">

</script>
<script type="text/javascript"
    src="<c:url value="/resources/spring/Spring.js" />">

</script>
<script type="text/javascript"
    src="<c:url value="/resources/spring/Spring-Dojo.js" />">

</script>

<link type="text/css" rel="stylesheet"
    href="<c:url value="/resources/dijit/themes/claro/claro.css" />" />
<html>
<head>
<title>Spring 3.0 MVC - Web Flow Example</title>
</head>
<body class="claro">
    <h2>Customer Registration</h2>

    <form:form commandName="customer">
        <input type="hidden" name="_flowExecutionKey"
            value="${flowExecutionKey}" />
        <div id="container">
            <table>
                <tr>
                    <td><b>Active</n></td>
                    <td ><form:radiobutton tabIndex="1" value="A" path="type" id="A" /></td>
                </tr>
                <tr>
                    <td ><b>Retired</b></td>
                    <td ><form:radiobutton tabIndex="2" value="R" path="type" id="R" />
                    <script type="text/javascript">
                            Spring.addDecoration(new Spring.ElementDecoration({
                                elementId : 'A',
                                widgetType : "dijit.form.RadioButton",
                                widgetModule : "dijit.form.CheckBox",
                                widgetAttrs : { value : "A", 
                                                required : true}
                            }));
                            Spring.addDecoration(new Spring.ElementDecoration({
                                elementId : 'R',
                                widgetType : "dijit.form.RadioButton",
                                widgetModule : "dijit.form.CheckBox",
                                widgetAttrs : { value : "R",
                                                required : true}
                            }));
                        </script>

                    </td>
                </tr>
                <tr>
                    <td><font color=red><form:errors path="name" /></font><b>Name:
                    </b></td>
                    <td><form:input path="name" class="value" /> <script
                            type="text/javascript">
                        Spring.addDecoration(new Spring.ElementDecoration({
                            elementId : "name",
                            widgetType : "dijit.form.ValidationTextBox",
                            widgetAttrs : {
                                promptMessage : "Enter Name",
                                required : true
                            }
                        }));
                    </script> <br />
                        <p></td>
                </tr>
                <tr>
                    <td><font color=red><form:errors path="phoneNumber" /></font>

                        <b>Phone number: </b></td>
                    <td>
                        <div class="span-7 last">
                            <form:input path="phoneNumber" />
                        </div> <script type="text/javascript">
                            Spring
                                    .addDecoration(new Spring.ElementDecoration(
                                            {
                                                elementId : "phoneNumber",
                                                widgetType : "dijit.form.ValidationTextBox",
                                                widgetAttrs : {
                                                    required : true,
                                                    invalidMessage : "A 16-digit credit card number is required.",
                                                    regExp : "[0-9]{16}"
                                                }
                                            }));
                        </script> <br />
                    </td>
                </tr>
                <tr>
                    <td><font color=red><form:errors path="address" /></font> <b>Address:
                    </b></td>
                    <td><form:input path="address" /> <script
                            type="text/javascript">
                        Spring.addDecoration(new Spring.ElementDecoration({
                            elementId : "address",
                            widgetType : "dijit.form.ValidationTextBox",
                            widgetAttrs : {
                                promptMessage : "Enter Address",
                                required : true
                            }
                        }));
                    </script> <br /></td>
                </tr>
                <tr>
                    <td><font color=red><form:errors path="city" /></font> <b>City:
                    </b></td>
                    <td><form:input path="city" /> <script type="text/javascript">
                        Spring.addDecoration(new Spring.ElementDecoration({
                            elementId : "city",
                            widgetType : "dijit.form.ValidationTextBox",
                            widgetAttrs : {
                                promptMessage : "Enter City",
                                required : true
                            }
                        }));
                    </script> <br /></td>
                </tr>
                <tr>
                    <td><font color=red><form:errors path="state" /></font> <b>State:
                    </b></td>
                    <td><form:input path="state" /> <script
                            type="text/javascript">
                        Spring.addDecoration(new Spring.ElementDecoration({
                            elementId : "state",
                            widgetType : "dijit.form.ValidationTextBox",
                            widgetAttrs : {
                                promptMessage : "Enter State",
                                required : true
                            }
                        }));
                    </script> <br /></td>
                </tr>
                <tr>
                    <td><font color=red><form:errors path="zipCode" /></font> <b>Zip
                            Code: </b></td>
                    <td><form:input path="zipCode" /> <script
                            type="text/javascript">
                        Spring.addDecoration(new Spring.ElementDecoration({
                            elementId : "zipCode",
                            widgetType : "dijit.form.ValidationTextBox",
                            widgetAttrs : {
                                promptMessage : "Enter Zip Code",
                                required : true
                            }
                        }));
                    </script> <br /></td>
                </tr>
            </table>
        </div>

        <input type="submit" name="_eventId_submit" id="submit" value="Submit" />
        <input type="submit" name="_eventId_cancel" value="Cancel" />
        <script type="text/javascript">
            Spring.addDecoration(new Spring.ValidateAllDecoration({
                elementId : 'submit',
                event : 'onclick'
            }));
        </script>
    </form:form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:48:19.607

所以这是单选按钮的答案，举个例子：

```
Spring.addDecoration(new Spring.ElementDecoration({
      elementId : 'A',
      widgetType : "dijit.form.RadioButton",
      widgetModule : "dijit.form.CheckBox",
      validate: function (){
           if(dojo.query('INPUT[name=type]', 'customer').filter(function(n){return n.checked;}).length > 0){return true;} else {alert('choose a type');return false;}
      },
      widgetAttrs : ...
})); 
```

现在您应该可以对您的姓名字段执行相同的操作

# c# - Silverlight，网格内的文本块

> ID：12840147
> 
> 赞同：1
> 
> 时间：2012-10-11T13:01:02.793
> 
> 标签：c#, asp.net, silverlight

我对 silverlight 完全陌生，我被赋予了修改它的任务。我的问题很简单（如果在 asp.net webforms 中完成）。基本上，在网格中，我想将年份附加到这样的东西上。

```
Jan + "-" + DateTime.Now.Year.ToString()

Feb + "-" + DateTime.Now.Year.ToString() 
```

等等..等等..

xaml 看起来像这样

```
<Grid x:Name="ContentGrid" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0">
                <Grid.Resources>

<DataTemplate x:Key="mykey1">
                        <Grid >....</Grid>
</DataTemplate>
<DataTemplate x:Key="mykey2">
                        <Grid >....</Grid>
</DataTemplate>
<DataTemplate x:Key="mykey3">
                        <Grid >
<StackPanel Orientation="Vertical">
<Border BorderBrush="{StaticResource LogicaPebbleBlackBrush}" BorderThickness="1">
<StackPanel Orientation="Vertical">
<StackPanel Orientation="Horizontal" Style="{StaticResource HeaderStackPanel}">

<TextBlock Style="{StaticResource HeaderTextBlock}" Text="Jan-2013" Width="75" TextAlignment="Center"/>
<TextBlock Style="{StaticResource HeaderTextBlock}" Text="Feb-2013" Width="75" TextAlignment="Center"/>

</StackPanel>
</StackPanel>
</Grid>
</DataTemplate>
</ Grid>
</DataTemplate> 
```

我只想让这一年充满活力，让它每年都在变化。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:44:17.353

我重读了你的问题，我认为你需要做这样的事情。由于您在网格中工作，因此可以命名您的文本块。

```
 <TextBlock Style="{StaticResource HeaderTextBlock}" x:Name="JanTB" Width="75" TextAlignment="Center"/> 
```

在您的后台代码中，将文本放在文本块内就足够了。

```
 JanTB.Text = "Jan-" + Datetime.now.Year.ToString(); 
```

我希望这能解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T14:26:20.450

这可能会对您有所帮助。它只是 xaml：

```
<Grid.Resources>
      <System:DateTime  x:Key="DateTimeDataSource"/>
</Grid.Resources>

<TextBlock DataContext="{Binding Source={StaticResource DateTimeDataSource}}" 
      Text="{Binding Today.Year}">
</TextBlock> 
```

确保添加此命名空间：

```
xmlns:System="clr-namespace:System;assembly=mscorlib" 
```

您也可以显示其他 DateTime 属性：Now.Day、Today.Month 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:26:02.437

我不知道这是否可以直接在 XAML 中完成。

最好使用绑定来完成。在 Silverlight 中，您*将*大多数数据源绑定到代码隐藏中的属性（即 ViewModel）。

简而言之：

1.  将页面的 DataContext 设置为代码隐藏类（通常是 ViewModel）
2.  ViewModel 必须实现 INotifyPropertyChanged 接口
3.  绑定 TextBox 的文本以使用 ViewModel 中的 Date 属性，该属性在代码中进行计算

设置好 DataContext 后，您可以按如下方式编写 XAML：

```
<TextBlock Text="{Binding Path=Year, Mode=OneWay}" /> 
```

您的 ViewModel 属性将如下所示：

```
public class ViewModel : INotifyPropertyChanged
{
    private DateTime _year = DateTime.Now;
    public DateTime Year
    {
        get { return _year; }    // <--- append whatever here or in the setter
        set
        {
            _year = value; 

            if( this.PropertyChanged != null )
            {
                this.PropertyChanged( this, new PropertyChangedEventArgs( "Year" ) );
            }
         }
     }
  ...
} 
```

# android - 如何在微调器项目上添加图像？

> ID：12840148
> 
> 赞同：0
> 
> 时间：2012-10-11T13:01:05.010
> 
> 标签：android, android-spinner

如何在android中的微调器上放置图像图标请帮助我这是我的微调器代码如何在列表中的每个名称上添加图像？我想在微调器上的 eact 文本上显示图像

```
 Spinner sp = (Spinner) findViewById(R.id.lgnspinner);
            ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.network_array,
                    android.R.layout.simple_spinner_item);
            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

            sp.setAdapter(adapter);

            sp.setOnItemSelectedListener(new OnItemSelectedListener() {
                public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
                    if (position == 0) {
                        // text}

                        if (position == 1) {

                            // text

                        }
                        if (position == 2)

                        {
                            // text
                        }
                        if (position == 3) {
                            // text
                        }
                    }
                }
            }); 
```

XML:

```
<Spinner
    android:id="@+id/lgnspinner"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="145dip"
    android:layout_height="wrap_content"
    android:prompt="@string/network_prompt"
    android:textColor="#000000" />

<string-array name="network_array" >

    <item>
    GPRS
    </item>

    <item>
    Wifi
    </item>

    <item>
    OtherNetwork
    </item>

    <item>
    SMS
    </item>
</string-array> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T13:18:59.403

![在此处输入图像描述](../Images/6be3003806074b48feb5405a8d315a05.png)

我们将展示如何使用 SimpleCursorAdapter 和 ViewBinder 将图标添加到 Android 微调器。

```
// get the spinner widget
mSpinner = (Spinner) findViewById(R.id.spinner1);
...
// fetch data from db. query might look something like this:
// SLECT _id, name FROM ....
mCursor = mDb.getData();
String[] from = new String[]{"_id", "name"};
int[] to = new int[]{R.id.icon, R.id.text};
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
R.layout.spinner_entry, mCursor, from, to);
adapter.setViewBinder(new SpinnerViewBinder());
mSpinner.setAdapter(adapter); 
```

微调器条目的布局 spinner_entry.xml 文件可能如下所示：

```
<!--?xml version="1.0" encoding="utf-8"?-->

<LinearLayout ...>

    <ImageView android:id="@+id/icon"   .../>

    <TextView android:id="@+id/text"   .../>

</LinearLayout> 
```

关键在于 SpinnerViewBinder.java

```
public class SpinnerViewBinder implements SimpleCursorAdapter.ViewBinder {

public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
int viewId = view.getId();
switch (viewId) {
case R.id.text:
    // the textview
    TextView mView = (TextView) view;
    // display the name
    mView.setText(cursor.getString(columnIndex));
    break;

case R.id.icon:
    // the icon
    ImageView mIconView = (ImageView) view;
    int dialectId = cursor.getInt(columnIndex);
    switch (dialectId){
    case 0:
        mIconView.setImageResource(R.drawable.x1);
        break;
    case 1:
        mIconView.setImageResource(R.drawable.x2);
        break;
    default:
        mIconView.setImageResource(R.drawable.x3);
        break;
    }
}
return true;
}
} 
```

作为参考下载这个简单的应用程序： [http ://www.ziddu.com/download/12964268/AndroidCustomSpinner_files_101214a.zip.html](http://www.ziddu.com/download/12964268/AndroidCustomSpinner_files_101214a.zip.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T13:10:15.733

请参阅：[在 android 中自定义微调器。](http://www.coderzheaven.com/2011/07/18/customizing-a-spinner-in-android/)

希望对你有效。

# c# - 为什么我无法注册字符串（url）的客户端脚本块？

> ID：12840149
> 
> 赞同：0
> 
> 时间：2012-10-11T13:01:05.797
> 
> 标签：c#, javascript, .net

代码 ：

```
string url = "http://www.google.com";
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "UrlSocialDefinitivo", "var UrlSocialDefinitivo=" + Server.UrlEncode(url) + ";", true); 
```

但我得到（在浏览器控制台上）`SyntaxError: identifier starts immediately after numeric literal`：。

事实上它注册`UrlSocialDefinitivo=http%3a%2f%2fwww.google.it;`

我哪里错了？我该如何解决这个麻烦？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T13:04:31.027

它错过了字符串周围的引号：

```
string url = "http://www.google.com";
ScriptManager.RegisterClientScriptBlock(
    this, 
    this.GetType(), 
    "UrlSocialDefinitivo", 
    "var UrlSocialDefinitivo=\"" + Server.UrlEncode(url) + "\";",
    true
    ); 
```

这将产生：

```
UrlSocialDefinitivo="http%3a%2f%2fwww.google.it"; 
```

请注意，我不确定您是否必须保持`Server.UrlEncore`通话。这取决于您实际期望的格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T13:09:00.190

您需要将 url 字符串括在引号中，否则 javascript 解释器将假定它是要执行的 javascript（并且惨遭失败）。

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(),
    "UrlSocialDefinitivo", 
    "var UrlSocialDefinitivo='" + Server.UrlEncode(url) + "';", true);
// quotes               here ^                    and here ^ 
```

# python - “ImportError: DLL load failed”和“No module named ..”之间的区别

> ID：12840152
> 
> 赞同：1
> 
> 时间：2012-10-11T13:01:15.863
> 
> 标签：python, py2exe

`ImportError: DLL load failed`错误和错误之间的区别在哪里`No module named ..`？

因为我遇到了一个问题：

同一目录下的两个文件。两个脚本都尝试导入 MyModule。

脚本 1：它有效（通过 python 调用）

脚本 2：DLL 加载失败（通过可执行文件调用）

是什么`DLL load failed`意思？这和“找不到模块”不一样吗？我该如何解决？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:08:33.807

DLL 加载失败应该是它确实找到了 DLL，但没有找到该 DLL 的所有依赖项，因此无法加载。如果您在 Windows 上，您可以使用[http://www.dependencywalker.com/](http://www.dependencywalker.com/)之类的东西来检查 DLL 的依赖关系，并确保在从可执行文件导入时正确设置环境，以便所有这些都可以成立。

# java - DefaultTableModel 使单元格不可编辑 JTable

> ID：12840153
> 
> 赞同：3
> 
> 时间：2012-10-11T13:01:23.170
> 
> 标签：java, swing, jtable, overriding, defaulttablemodel

我有一个 JAVA 项目，并希望使用 DefaultTableModel 使我的 JTable 不可编辑。我知道这样做的解决方法，称为：

```
JTable table = new JTable(...){  
  public boolean isCellEditable(int row, int column){  
    return false;  
  }  
}; 
```

就像说：我不喜欢这个。这不符合我学校的训练规则。

有没有办法做到这一点？或许有什么好办法。但愿如此！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T13:15:25.467

您不应该子类化 JTable 本身，而是表模型：

```
DefaultTableModel myModel = new DefaultTableModel(...) {
    @Override
    public boolean isCellEditable(int row, int column) {
        return false;
    }
} 
```

或者更好的是，不要使用 DefaultTableModel，而是使用 AbstractTableModel 直接获取业务对象中的信息，而不是将所有信息从业务对象复制到 Vectors。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-15T14:36:37.700

选择 Jtable ，不要忘记创建表模型（DefaultTableModel TableModel）

```
JTable table_1 = new JTable (TableModel){public boolean isCellEditable(int row,int column)  
        {switch(column){             
           case 4:  // select the cell you want make it not editable 
             return false;  
         default: return true;}  
        }}; 
```

# android - Android Fragment 支持，java.lang.NoSuchMethodException: Fragment(Context,AttributeSet)

> ID：12840155
> 
> 赞同：1
> 
> 时间：2012-10-11T13:01:32.713
> 
> 标签：android, android-annotations, android-support-library

我尝试使用带有 AndroidAnnotations 和 maven 的片段。它适用于 Android 4.0+ ，但后来我尝试使其适用于 Android 2.3.3 并且我不得不使用 support-v4 maven 库：

```
<dependency>
    <groupId>com.google.android</groupId>
    <artifactId>support-v4</artifactId>
    <version>r7</version>
</dependency> 
```

我的片段定义为：

```
<android.support.v4.app.Fragment android:id="@+id/myFragment"
                                 android:layout_width="fill_parent"
                                 android:layout_height="wrap_content"
                                 class="com.bla.HeaderFragment_"/> 
```

我的活动扩展了 FragmentActivity

运行应用程序时出现此异常：

......

```
Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class android.support.v4.app.Fragment
at android.view.LayoutInflater.createView(LayoutInflater.java:508)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
at android.app.Activity.setContentView(Activity.java:1657)
at com.tagonsoft.codecamp.MainActivity_.setContentView(MainActivity_.java:46)
at com.tagonsoft.codecamp.MainActivity_.onCreate(MainActivity_.java:31)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
... 11 more

Caused by: java.lang.NoSuchMethodException: Fragment(Context,AttributeSet)
at java.lang.Class.getMatchingConstructor(Class.java:643)
at java.lang.Class.getConstructor(Class.java:472)
at android.view.LayoutInflater.createView(LayoutInflater.java:480)
... 22 more 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:18:39.037

尝试类名的`<fragment>`标签和`name`属性。此外，您使用的类名 as `com.bla.HeaderFragment_`，似乎是一个错字。

```
<fragment android:id="@+id/myFragment"
          android:name="com.bla.HeaderFragment_"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
                                 /> 
```

更多示例[在这里](http://developer.android.com/guide/components/fragments.html#Creating)。

# c# - 如何在 ASP.NET 3.5 中应用选定菜单项的样式？

> ID：12840156
> 
> 赞同：0
> 
> 时间：2012-10-11T13:01:43.647
> 
> 标签：c#, asp.net, css, menu, aspmenu

我需要为当前活动的菜单项设置背景吗？

我用过这些

```
 <StaticSelectedStyle CssClass="selectedMenuItem" /> 
```

CSS：

```
 .DivLeftContent .selectedMenuItem:visited
  {
      background-color:#FBB2F7 ! important;
  } 
```

它不起作用..然后我用了这个。

CSS：

```
.MenuItem a.static.selected
{
background-color:Black ! important;
} 
```

母版页的 OnPageLosd

```
 string path = Request.AppRelativeCurrentExecutionFilePath;
   foreach (MenuItem item in menuItem.Items)
   {
     item.Selected = item.NavigateUrl.Equals(path,StringComparison.InvariantCultureIgnoreCase);
   } 
```

这也行不通。。

我正在使用 ASP.NET 3.5 并在母版页中创建菜单。

帮我..

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T20:59:42.393

有一种棘手的方法可以做到这一点..当您在母版页后面的代码上选择一个菜单项时，检查本地 URL 路径并根据唯一的本地 URL 更改所选菜单项的背景。并使用 Eval Expression 在 div 类属性中调用该方法，以便动态更改所选菜单项的背景。

如果您需要更多详细信息，请告诉我..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:35:50.377

你可以试试 `DynamicSelectedStyle proprerty`

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.menu.dynamicselectedstyle.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.menu.dynamicselectedstyle.aspx)

# multithreading - 聊天程序中的 GUI 和线程

> ID：12840159
> 
> 赞同：0
> 
> 时间：2012-10-11T13:01:51.827
> 
> 标签：multithreading, user-interface, chat, javafx

大家好，我一直在寻找这个问题的答案，但无法找到适合我的问题的解决方案。

我有一个聊天程序，它有一些高级的 gui。聊天程序总共由服务器和客户端两个程序组成。我创建了一个协议，我的客户会根据它获得的类型信息来监听并做出反应。

我创建了一个名为 clientReciver 的类，它扩展了 Thread。但我现在对如何获取线程接收的信息并在我的 gui 中使用它感到困惑。

这方面的例子可能是我将如何获取我的一位客户发送的文本并将其添加到我的 GUI 中？

值得一提的是，我正在使用 JavaFx Scenebuilder 来构建我的 GUI。

希望有人能够帮助

最好的问候马克拉斯穆森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:56:29.583

如果没有有关您的自定义协议的详细信息，很难给出建议。请参阅 zenjava 博客以获得一些[灵感](http://www.zenjava.com/2011/11/03/client-server-with-javafx-2-and-hessian-guice-fxml/)。

使用[任务](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)从您的客户端调用您的服务器。如果客户端服务器调用的结果是同步的，则在任务完成时获取调用返回的[值。](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html#getValue%28%29)如果调用是异步的或服务器将数据推送到客户端，则在客户端上设置一个在其自己的线程中运行的侦听器，当它获得结果时调用[Platform.runLater](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html#runLater%28java.lang.Runnable%29)以将结果提供给 JavaFX 应用程序线程以进行 UI 处理。

# asp.net - Telerik RadOrgChart 节点点击事件

> ID：12840161
> 
> 赞同：2
> 
> 时间：2012-10-11T13:01:58.613
> 
> 标签：asp.net, telerik

我正在使用 Telerik Ajax 控件 RadOrgChart

我想捕获在 OrgChart 中单击（实际上是右键单击）节点的时间。我希望事件传递单击的节点的 ID。

我在 OrgChart 中找不到任何此类事件。

任何人都可以请建议如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T15:39:49.053

谢谢尤顿。

我找到了一种更好的方法来代替客户端。

每个 Telerik orgchart 节点都有默认的 css 类，所以这样的工作：

```
 $telerik.$(".rocItem").click(function (e) {
            var orgChart = $find("<%= RadOrgChart1.ClientID %>");
            var index = orgChart._extractGroupItemFromDomElement(e.target).get_index();
            var hierarchicalIndex = orgChart._extractNodeFromDomElement(e.target)._getHierarchicalIndex();
            hierarchicalIndex = orgChart._getRealHierarchicalIndex(hierarchicalIndex);
            alert("Clicked " + hierarchicalIndex);
        }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:21:53.103

阅读文档我看到 RadOrgChart 没有节点点击的事件处理程序，所以我认为你可以制作自己的 ItemTemplate 并处理模板项目的点击，就像这样。

```
<telerik:RadOrgChart ID="RadOrgChartDirectReports1" EnableViewState="true" Skin="Office2010Silver"
       runat="server">
       <ItemTemplate>  
           <asp:Button CausesValidation = "false" OnClick="LinkButton_Click" CommandArgument='<%# DataBinder.Eval(Container.DataItem, "EmployeeId")%>'
               runat="server" Text = "Click" ID="LinkButtonNode"></asp:Button>
       </ItemTemplate>           
   </telerik:RadOrgChart> 
```

在此示例中，您将按钮放在项目中，因此您可以处理按钮单击。

# android - Android 随机用户界面行为

> ID：12840162
> 
> 赞同：0
> 
> 时间：2012-10-11T13:01:58.670
> 
> 标签：android, user-interface

好吧，我有一整周的挫败感，这是布局第三次随机出现。

例如：

```
<TextView
    android:id="@+id/tvGebiedHead"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="18dp"
    android:layout_marginTop="16dp"
    android:text="Geef gebied op"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<ListView
    android:id="@+id/lvGebieden"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_alignLeft="@+id/textView1"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/textView1" >

</ListView> 
```

产生列表视图显示在文本视图顶部的结果（使这两个项目不可读）。此处的代码产生了所需的结果，列表视图呈现在文本视图下。它不是 Eclipse 图形编辑器，但它也发生在真实手机上。请注意，两个片段之间的唯一区别是 TextView 的 id。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="18dp"
    android:layout_marginTop="16dp"
    android:text="Geef gebied op"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<ListView
    android:id="@+id/lvGebieden"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_alignLeft="@+id/textView1"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/textView1" >

</ListView> 
```

本周早些时候，我与四个切换按钮的布局发生了争执，它们（全部！！）改变了大小，按钮上的文本对齐，甚至当我单击一个时的位置，而打开和关闭文本完全相同。请告诉我我做错了什么并且android没有坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:07:33.903

在顶部的示例中，您的 ListView`layout_below`仍然指的`@id/textView1`是不存在的。但是，在底部的示例中确实如此，因此底部有效。仅供参考，而不是`@+id/textView1`您应该`@id\textView1`在`layout_below`.

# hadoop - Oozie 服务未启动

> ID：12840167
> 
> 赞同：1
> 
> 时间：2012-10-11T13:02:03.823
> 
> 标签：hadoop, hadoop-streaming, oozie

我有一个运行 Map-Reduce V1 的 CDH4 集群。当我尝试从 tarball 安装 oozie CDh4 并按照 [https://ccp.cloudera.com/display/CDH4DOC/Oozie+Installation#OozieInstallation-Configuringthehadoopversion中的说明进行配置时](https://ccp.cloudera.com/display/CDH4DOC/Oozie+Installation#OozieInstallation-Configuringthehadoopversion)

在启动服务时，我在日志中收到以下错误

```
INFO: Starting Servlet Engine: Apache Tomcat/6.0.32
    11 Oct, 2012 11:51:57 PM org.apache.catalina.startup.HostConfig deployDescriptor
    INFO: Deploying configuration descriptor oozie.xml

    ERROR: Oozie could not be started

    REASON: java.lang.NoClassDefFoundError: org/apache/hadoop/util/ReflectionUtils

    Stacktrace:
    -----------------------------------------------------------------
    java.lang.NoClassDefFoundError: org/apache/hadoop/util/ReflectionUtils
        at org.apache.oozie.service.Services.setServiceInternal(Services.java:349)
        at org.apache.oozie.service.Services.<init>(Services.java:107)
        at org.apache.oozie.servlet.ServicesLoader.contextInitialized(ServicesLoader.java:38)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4205)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4704)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)
        at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:601)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1315)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1061)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
        at org.apache.catalina.core.StandardService.start(StandardService.java:525)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
    Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.util.ReflectionUtils 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T15:22:17.097

我在 CDH4 文档中没有看到这一点，但是在 CDH3u3 下，您必须将 hadoop-core 库复制到`<oozie-home>/lib`. 该 jar 包含堆栈跟踪中缺少的类。

编辑：

对于我的一生，我也无法在 cdh3u3 的任何地方的文档中找到它。所以，我复制了它和我需要的其他罐子，但我不记得我在哪里读到的。

# pdf - Itext - a5 页面大小是 a4 的垂直一半

> ID：12840171
> 
> 赞同：0
> 
> 时间：2012-10-11T13:02:27.993
> 
> 标签：pdf, itext, page-size

我正在尝试创建一个必须为 a5 格式的 pdf（a4 上的水平一半）

像[wikipedia source](https://en.wikipedia.org/w/index.php?title=File:A_size_illustration2.svg&page=1)我需要我的页面大小必须等于 a4 的水平一半，但使用这个：

```
Document document = new Document(PageSize.A5, 10, 10, 10, 10); 
```

它创造了我：

![在此处输入图像描述](../Images/8c0fc2e88649759df051949bfd22db98.png)

但我需要这个：

![在此处输入图像描述](../Images/1052260c19a95ab2f71c4d88661b2fbe.png)

（所有桌子都在里面旋转）

我该如何解决？有人能帮我吗？谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:23:57.760

iText in Action，第 2 版，在第 13 章中有一个示例，它将 PDF 文件中的所有页面旋转 90 度。示例源代码在 SourceForge iText SVN 存储库中以[RotatePages.java的形式提供。](http://svn.code.sf.net/p/itext/code/book/src/part4/chapter13/RotatePages.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:00:45.113

我以这种方式简单地解决了：

```
Document document = new Document(PageSize.A5.rotate(), 10, 10, 10, 10); 
```

所以

```
PageSize.A5 generate a page which size is vertical half of A4

PageSize.A5.rotate() generate a page which size is horizontal half of A4 
```

# javascript - javascript 测试 URL 是相对的还是绝对的，而不是 mailto：

> ID：12840172
> 
> 赞同：1
> 
> 时间：2012-10-11T13:02:29.670
> 
> 标签：javascript, jquery

我有带有按钮/链接/带有mailto的电子邮件的表格：并编写了一个默认的双击功能，双击该行会将用户引导到表格中的最后一个链接。

99% 的表格将在最后一列中包含“编辑”按钮。

```
$('table:not(.noDoubleClick) tr td').dblclick(function() {
    var linkEl = $(this).parents('tr').find('td:last-child a');

    if(!linkEl.length){
        return false;
    }

    if (linkEl.attr('href') && linkEl.attr('onclick') === undefined && !linkEl.hasClass("popme")) {
        document.location = linkEl.attr('href');
    } else {
        linkEl.click();
    }
}); 
```

这工作正常，直到我有一个罕见的表，其中最后一列是带有 mailto 的电子邮件地址。

**问：**如何检查 href 是否仅是相对/绝对链接。这样这将排除 mailto: 和任何其他不是标准 URL 的链接。

我知道我可以做这样的事情：`linkEl.attr('href').substring(0, 7) == "mailto:"`专门针对 mailto 进行测试，但是有没有更好的方法可以做到这一点，而无需对要排除的不同协议进行大量 IF 测试。

使用@epascarello 的工作解决方案进行更新：

```
$('table:not(.noDoubleClick) tr td').dblclick(function(e) {
    var linkEl = $(this).parents('tr').find('td:last-child a');
    var linkElHref = linkEl.attr('href');

    // Check if has href and http protocol
    if(!linkElHref.length || this.protocol.indexOf("http") !== 0){
        e.preventDefault();
        return false;
    }

    if (linkElHref && linkEl.attr('onclick') === undefined && !linkEl.hasClass("popme")) {
        document.location = linkElHref;
    } else {
        linkEl.click();
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T13:12:49.697

您可以使用链接的属性查找协议。

```
var theProtocol = linkEl.prop("protocol");
var isHttp = linkEl.prop("protocol").indexOf("http") === 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T13:15:35.427

对于文本解决方案，您可以使用以下正则表达式：

```
var x = new RegExp('^([^:/?#]+:)?(//[^/?#]*)?([^?#]*)');
x.match(url); 
```

如果第二个内存位置是，或者`undefined`您可能正在处理常规 URL。`http:``https:`

# tomcat - 将 tomcat 会话超时与部署的应用程序同步

> ID：12840179
> 
> 赞同：1
> 
> 时间：2012-10-11T13:02:44.763
> 
> 标签：tomcat, web-applications, deployment, liferay, session-timeout

我已经在 tomcat/webapps 中部署了一个外部应用程序（通过 html 页面访问）并尝试将它与我的 Liferay 会话同步。问题是超时不同步（用 web.xml 中的 session-timeout 属性指定），并且访问此页面时的任何活动都没有向 Liferay 注册（因此，超时不会重置，所以我总是在计时在 session-timeout 属性中指定的时间后退出，默认为 60 分钟）。

我尝试在我的 html 页面中显式调用 Liferay.Session.extend()，并且 firebug 显示进行了扩展会话的 POST 调用，但 Liferay 似乎仍然无法识别它。

任何想法将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:42:14.803

当您在 liferay 中处理应用程序时，这意味着您正在处理一个 portlet，除非您移动到另一个 portlet，否则 liferay 会话不会被重置。因此，一旦 60 分钟完成，您将自动超时。

无论您在 portlet 中做什么，它都是对 Liferay 的 ajax 调用，因此解决方案是尝试为每个 ajax 调用扩展会话。

尝试将以下 jquery 脚本代码放入您的 portlet 网页中。

jQuery(文档).ready(函数() {

```
 A4J.AJAX.AddListener({
        onafterajax : function(req, evt, data) {
            Liferay.Session.setCookie();
        }
    });
}); 
```

祝你好运

# python - 如何模拟数据库api？

> ID：12840183
> 
> 赞同：3
> 
> 时间：2012-10-11T13:02:57.887
> 
> 标签：python, database, mocking, tdd

连接数据库（即使它是内存中的）会减慢我的单元测试速度（目前需要超过 5 分钟）。

所以我正在考虑模拟数据库api。

使用真正的数据库 api，如果有任何 SQL 语法错误或输入错误的列名，它会引发异常。

在使用模拟对象时，我想不出任何方法来进行这种检查。

是否可以使用模拟对象来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T14:09:21.390

当然！您可以使用自己的自定义函数模拟 db-api 函数，这些函数的行为方式符合您的要求：

```
from sqlite3.dbapi2 import DatabaseError

mock_db_connection = Mock()

def mock_execute(query, params):
    if query == 'select firstname, lastname from student':
        return [('jim', 'brown')]
    elif query == 'select; firstname':
        raise DatabaseError('You have an error in your SQL syntax')

mock_db_connection.execute = mock_execute

# from this point, if you've patched out your db connection with the mock,
# you can make tests against connection.execute... 
```

我假设您正在使用[模拟](http://www.voidspace.org.uk/python/mock/)库。

但实际上 - 5 分钟并没有*那么*长。个人偏好，但我更喜欢保留这样的依赖项 - 它可以帮助您捕获 api 错误。你永远不会完美地模拟一个 API，数据库也不*是那么*严重的外部依赖......

# android - 如何在android中选择微调器时停止滚动屏幕到顶部

> ID：12840187
> 
> 赞同：12
> 
> 时间：2012-10-11T13:03:06.743
> 
> 标签：android, scroll, android-spinner, android-scrollview

我在滚动视图中使用微调器，当我选择微调器时，滚动视图滚动到屏幕顶部。有什么办法可以防止这种滚动？

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T07:24:00.157

全部

对于上面我的问题，我在 xml 中为滚动视图设置了一个属性。

android:descendantFocusability="beforeDescendants"

它对我来说就像一种魅力。

我在这里找到了解决方案

[ListView 内的可聚焦 EditText](https://stackoverflow.com/questions/2679948/focusable-edittext-inside-listview)

[https://stackoverflow.com/a/2680077/1556997](https://stackoverflow.com/a/2680077/1556997)

谢谢大家的帮助。

# python - 打印存储在 MySQL DB 中的不同值

> ID：12840195
> 
> 赞同：0
> 
> 时间：2012-10-11T13:03:23.020
> 
> 标签：python, mysql, sqlalchemy

在带有 myISAM 的 MySQL 表中，我有一个整数值 ex.011。当我在 Python 中查询时，它会打印我的值 11，在数字之前删除 0。它应该打印存储在 DB ex 中的确切值。011 而不是 11。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:18:33.267

您的列是`int`，因此 MySQLdb 在查询结果中返回一个整数值。但是，我认为您应该能够编写一个 mySQLdb 结果集包装器（或者可能找到其他人已经编写的包装器）来检查结果集列上设置的标志并适当地转换为字符串。

看看`cursor.description`和`cursor.description_flags`以及 PEP-249。我认为（即我实际上没有尝试过）以下内容应该可以帮助您入门：

```
def get_result_set_with_db_specified_formatting(cursor):
    integer_field_types = (MySQLdb.constants.FIELD_TYPE.TINY,
                           MySQLdb.constants.FIELD_TYPE.SHORT,
                           MySQLdb.constants.FIELD_TYPE.LONG,
                           MySQLdb.constants.FIELD_TYPE.LONGLONG,
                           MySQLdb.constants.FIELD_TYPE.INT24)
    rows = cursor.fetchall()
    for row in rows:
        for index, value in enumerate(row):
            value = str(value)
            if (cursor.description[index][1] in integer_field_types
                and cursor.description_flags[index] & MySQLdb.constants.FLAG.ZEROFILL):
                if len(value) < cursor.description[index][2]:
                    value = ('0' * (cursor.description[index][2] - len(value))) + value
            row[index] = value
    return rows 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:25:25.233

可能是，在这种情况下简单的零填充可以吗？

```
>>> print str(11).zfill(3)
011 
```

据我了解，这是数字的附加部分。如果它的长度不是常数，则需要将 DB 中的数据类型更改为 VARCHAR。

# php - Grocery CRUD 多个上传字段

> ID：12840197
> 
> 赞同：0
> 
> 时间：2012-10-11T13:03:29.193
> 
> 标签：php, codeigniter, video-thumbnails, grocery-crud

我正在使用 codeigniter 的网站的管理部分。我正在使用 Grocery CRUD 进行
添加编辑删除操作。我使用“set_field_upload”函数在表单内提供视频上传字段。我需要为视频添加缩略图，因此需要另一个上传字段。是否可以使用杂货杂货在表单内实现多个上传字段？除了 ffmpeg 之外，还有其他方法可以创建缩略图吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T05:11:12.877

我建议`ffmpeg`在上传完成后使用 PHP 的`exec()`. 查看这些 SE 答案以获得一些想法：

*   [FFMPEG 生成 N 个等距的 PNG 截图](https://stackoverflow.com/questions/3306888/ffmpeg-generate-n-evenly-spaced-png-screenshots)
*   [使用 ffmpeg 的视频缩略图](https://superuser.com/questions/135806/video-thumbnails-using-ffmpeg)

临时存储由 生成的图像`ffmpeg`，使用 AJAX 将它们的路径回显给客户端，并让它们选择他们想要的图像。

# .net - 远程服务器返回错误：(401) Unauthorized。（服务器端重定向）

> ID：12840201
> 
> 赞同：1
> 
> 时间：2012-10-11T13:03:46.090
> 
> 标签：.net

您好我正在尝试获取 url 的 html 代码（“http://dx.doi.org/10.1038/nclimate1398”），出现以下错误。我已经尝试了该站点中提到的许多方法，但它不起作用。这是我的代码。

> **它在 Web 浏览器中工作，无需提供 Username 和 Password**。

```
dim url as string = "http://dx.doi.org/10.1038/nclimate1398"
Dim myRequest = CType(WebRequest.Create(url), HttpWebRequest)
myRequest.Credentials = System.Net.CredentialCache.DefaultCredentials
myRequest.PreAuthenticate = True
myRequest.AllowAutoRedirect = True
Dim response = myRequest.GetResponse()
Dim responseStream = response.GetResponseStream()
Dim responseReader = New StreamReader(responseStream)
Dim result = responseReader.ReadToEnd()
Return result 
```

我该如何解决？

# c# - 使用 XamlWriter 保存数组

> ID：12840203
> 
> 赞同：3
> 
> 时间：2012-10-11T13:03:49.867
> 
> 标签：c#, arrays, xaml, xamlwriter

我正在尝试以`XamlWriter`最简单的方式保存一组对象。出于某种原因，将它们保存为数组会产生无效的 XML：

```
var array = new int[] {1, 2, 3};
Console.Write(XamlWriter.Save(array)); 
```

输出：

```
<Int32[] xmlns="clr-namespace:System;assembly=mscorlib">
   <Int32>1</Int32>
   <Int32>2</Int32>
   <Int32>3</Int32>
</Int32[]> 
```

尝试使用`XamlReader`throws 阅读此内容：

> '[' 字符，十六进制值 0x5B，不能包含在名称中。第 1 行，第 7 位

我尝试另存为，`List<T>`但我得到了通常的 XAML 泛型错误。有什么简单的方法可以做到（最好使用 LINQ）还是必须定义自己的包装器类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T10:29:14.430

[`XamlWriter.Save`](http://msdn.microsoft.com/en-us/library/ms590450.aspx)产生无效的 XML。

```
<Int32[] xmlns="clr-namespace:System;assembly=mscorlib">
   <Int32>1</Int32>
   <Int32>2</Int32>
   <Int32>3</Int32>
</Int32[]> 
```

我不知道这背后的原因，但使用[`XamlServices.Save`](http://msdn.microsoft.com/en-us/library/dd273578.aspx)似乎可以解决问题。

```
<x:Array Type="x:Int32" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <x:Int32>1</x:Int32>
  <x:Int32>2</x:Int32>
  <x:Int32>3</x:Int32>
</x:Array> 
```

* * *

Additional notes from [MSDN](http://msdn.microsoft.com/en-us/library/ee834866.aspx)

> The following classes exist in both the WPF assemblies and the `System.Xaml` assembly in the .NET Framework 4:
> 
> *   `XamlReader`
> *   `XamlWriter`
> *   `XamlParseException`
> 
> The WPF implementation is found in the `System.Windows.Markup` namespace, and `PresentationFramework` assembly.
> 
> The `System.Xaml` implementation is found in the `System.Xaml` namespace.
> 
> If you are using WPF types or are deriving from WPF types, you should typically use the WPF implementations of [`XamlReader`](http://msdn.microsoft.com/en-us/library/system.windows.markup.xamlreader.aspx) and [`XamlWriter`](http://msdn.microsoft.com/en-us/library/system.windows.markup.xamlwriter.aspx) instead of the `System.Xaml` implementations.
> 
> For more information, see Remarks in [`System.Windows.Markup.XamlReader`](http://msdn.microsoft.com/en-us/library/system.windows.markup.xamlreader.aspx) and [`System.Windows.Markup.XamlWriter`](http://msdn.microsoft.com/en-us/library/system.windows.markup.xamlwriter.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:42:57.210

使用`UIElementCollection`而不是数组怎么样？`UIElementCollection`很好地序列化：

```
var buttonArray = new Button[] { new Button(), new Button() };
var root = new FrameworkElement();
var collection = new UIElementCollection(root, root);

foreach(var button in buttonArray)
    collection.Add(button);

Console.Write(XamlWriter.Save(collection)); 
```

给你：

```
<UIElementCollection Capacity="2" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
    <Button />
    <Button />
</UIElementCollection> 
```

# asp.net - 如何从网站下载整个源代码

> ID：12840209
> 
> 赞同：-5
> 
> 时间：2012-10-11T13:04:05.500
> 
> 标签：asp.net, asp.net-mvc

我需要下载特定网站的**HTML**源代码。网站是用asp.net语言创建的。是否有任何软件。我不知道该怎么做。请帮助我。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T13:05:56.823

你不能。Asp.Net 是一种编译语言，您在浏览器中得到的是符合应用程序的已编译 dll 的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:35:39.643

在大多数浏览器中，要获取 HTML，您可以`right click -> 'save as...'`或`right click -> 'show source code' -> right click -> 'save as...'`.

但是，这不会为您提供*asp.net*源代码，而只是生成的静态页面。

# php - 感叹号出现在使用 phpmailer 的电子邮件正文中

> ID：12840212
> 
> 赞同：7
> 
> 时间：2012-10-11T13:04:08.900
> 
> 标签：php, phpmailer

我正在使用 phpmailer 在我的网站上发送电子邮件。我的代码工作正常，但有时在电子邮件正文中随机包含感叹号。我的代码如下：

```
$mail->SetFrom(FROM_EMAIL,FROM_NAME); //emailid of sender(admin)                
$mail->Subject = 'Subject here.'; //subject of email
$mail->AddAddress(Address here); //emailid of user(recipient)
$content = 'some html code here';

$mail->MsgHTML($content); //this is body of email
$mail->Send(); 
```

这工作正常。但是找不到为什么有时会出现感叹号。提前致谢...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T13:11:08.547

我认为这是因为电子邮件的一行不能超过 998 个字符。

尝试添加，

```
$mail->WordWrap = 50; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T22:56:05.590

我知道这已经很晚了，但是有一个替代解决方案对我有用：

使用此行使用 base64 对整个消息进行编码：

```
$message = chunk_split(base64_encode($message)); 
```

然后，将此附加到您的标题：

```
$headers .= "Content-Transfer-Encoding: base64\r\n\r\n"; 
```

这将告诉邮件客户端您的邮件是 base64 编码的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-14T04:45:04.193

如果您使用的是 PHPmailer，那么只有一行代码会有所帮助：

```
$mail = new PHPMailer();
$mail->Encoding = 'base64'; 
```

这将在内部执行 Content-Transfer-Encoding: base64 和 chunk_split(base64_encode($message)) 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-07T19:48:16.877

我也有这个问题，经过长时间的搜索，我发现你应该把你的 HTML 换行

```
$emailContent = '<p>some large html</p>';
$mail->msgHTML(wordwrap($emailContent, 50)); 
```

# keymando - 按下“@ / #”键时 Keymando 崩溃

> ID：12840213
> 
> 赞同：0
> 
> 时间：2012-10-11T13:04:13.747
> 
> 标签：keymando

我只是在我的 MBP (Snow Leopard 10.6.8) 上安装了试用版。

并在启动 keymando 之前正确安装了 BridgeSupport Preview 3

我什么都没改变，只是第一次启动，当我按下“@ / #”键时，keymando 崩溃并出现此双重警报错误

之后，keymando 图标变为灰色。

它只发生在“@ / #”键盘键上

有解决方法吗？

![警报错误](../Images/c22c50a80f0598cab12dfc0b4191dda8.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-02T04:13:12.057

1.3 版刚刚发布，应该可以解决这个问题。

[http://updates.keymando.com/releases/current/Keymando.dmg](http://updates.keymando.com/releases/current/Keymando.dmg)

# c# - 有没有一种格式可以存储比 excel 更小的表格数据？

> ID：12840215
> 
> 赞同：2
> 
> 时间：2012-10-11T13:04:19.860
> 
> 标签：c#, excel, serialization, tabular

我已经尝试过保存在文本文件中（显然它需要更多空间，因为它没有像 Excel 那样定制来保存表格）。我还尝试保留序列化数据（c#，仅供参考）。在这两种情况下都没有任何好处。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T13:06:53.860

由于大多数“表格”数据将是文本，因此在保存之前压缩它会获得很大的收益（以 GZip 和 BsonWriter 为例）：

```
public static byte[] Compress(object entity)
{
  using (var stream = new MemoryStream())
  {
    using (var zipStream = new GZipStream(stream, CompressionLevel.Optimal))
    {
      using (var writer = new BsonWriter(zipStream))
      {
        var serializer = new JsonSerializer();
        serializer.Serialize(writer, entity);
      }
    }

    return stream.ToArray();
  }
} 
```

** 更新 **

Protobuf在序列化实体大小和速度方面[都远远优于 XmlSerializer](http://code.google.com/p/protobuf-net/wiki/Performance)和[BinaryFormatter](http://wallaceturner.com/serialization-with-protobuf-net)。在压缩之前尝试使用它来序列化您的实体：

```
public static byte[] Compress(object entity)
{
  using (var stream = new MemoryStream())
  {
    using (var zipStream = new GZipStream(stream, CompressionLevel.Optimal))
    {
      Serializer.Serialize(stream, entity);  
    }

    return stream.ToArray();
  }
} 
```

# r - 添加对行名进行条件检查的列

> ID：12840216
> 
> 赞同：0
> 
> 时间：2012-10-11T13:04:22.613
> 
> 标签：r, conditional, dataframe

我在有条件地将列添加到 df 时遇到问题。例如，我想根据 Var A 的值将类值添加到列 VarB 和 VarC。

例如，当 VarA 等于“a”、“c”和“e”时，我想在 VarB 中添加“yes”，当它等于“b”和“d”时，我想添加“no”。另外，当 VarA 等于“a”或“e”时，我想在 VarC 中添加“1”；当 VarA 等于“b”或“d”时，“2”到 VarC；当 VarA 等于“c”时，“3”到 VarC。

```
VarA
 a     
 b     
 c     
 d     
 e 
```

有小费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T13:29:01.610

Maybe this could be useful

```
DF <- data.frame(VarA=letters[1:4]) # this is your data.frame
    VarA
1    a
2    b
3    c
4    d

DF$VarB <- ifelse(VarA %in% c('a','c','e'), 'yes', 'no')
DF$VarC <- ifelse(VarA %in% c('a','e'), 1, ifelse(VarA %in% c('b','d'),2,3))
DF
  VarA VarB VarC
1    a  yes    1
2    b   no    2
3    c  yes    3
4    d   no    2 
```

You can use `transform` function as well.

```
DF <- data.frame(VarA=letters[1:4])
transform(DF, 
          VarB=ifelse(VarA %in% c('a','c','e'), 'yes', 'no'), 
          VarC=ifelse(VarA %in% c('a','e'), 1, ifelse(VarA %in% c('b','d'),2,3)))
  VarA VarB VarC
1    a  yes    1
2    b   no    2
3    c  yes    3
4    d   no    2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:24:34.967

本着以下精神做一些事情：

```
cond1 <- data$VarA %in% c("a","c","e")
data$VarB[cond1] <- "yes"
cond2 <- data$VarA %in% c("b","d")
data$VarB[cond2] <- "no"
cond3 <- data$VarA %in% c("a","e")
data$VarC[cond3] <- 1
cond4 <- data$VarA %in% c("b","d")
data$VarC[cond4] <- 2 
```

我会让你自己做最后一个。

# python - 在 Python 中拆分连接字符串的正确而优雅的方法

> ID：12840223
> 
> 赞同：11
> 
> 时间：2012-10-11T13:04:47.337
> 
> 标签：python, list, join, split, syntax-error

我有以下列表：

```
>>> poly
'C:\\04-las_clip_inside_area\\16x16grids_1pp_fsa.shp'
>>> record
1373155 
```

我希望创建：

```
'C:\\04-las_clip_inside_area\\16x16grids_1pp_fsa_1373155.txt' 
```

我希望拆分以获得“C:\04-las_clip_inside_area\16x16grids_1pp_fsa16x16grids_1pp_fsa”部分。

我试过这个两行代码的解决方案：

```
mylist = [poly.split(".")[0], "_", record, ".txt"]
>>> mylist
['C:\\04-las_clip_inside_area\\16x16grids_1pp_fsa', '_', 1373155, '.txt'] 
```

从这里，阅读*[Python join 中的示例，为什么它是 string.join(list) 而不是 list.join(string)？](https://stackoverflow.com/questions/493819/python-join-why-is-it-string-joinlist-instead-of-list-joinstring)*.

我找到了这个联合解决方案，但我收到了这个错误消息：

```
>>> mylist.join("")
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
AttributeError: 'list' object has no attribute 'join' 
```

另外，如果我使用：

```
>>> "".join(mylist)
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
TypeError: sequence item 2: expected string, int found 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-11T13:06:43.470

**[Python join：为什么是 string.join(list) 而不是 list.join(string)？](https://stackoverflow.com/questions/493819/python-join-why-is-it-string-joinlist-instead-of-list-joinstring)**

所以有

```
"".join(mylist) 
```

代替

```
mylist.join("") 
```

有你的错误。

要解决您的`int/string`问题，请将 int 转换为字符串：

```
mylist= [poly.split(".")[0],"_",str(record),".txt"] 
```

或直接写：

```
"{}_{}.txt".format(poly.split(".")[0], record) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-11T13:17:10.650

```
>>> from os import path
>>>
>>> path.splitext(poly)
('C:\\04-las_clip_inside_area\\16x16grids_1pp_fsa', '.shp')
>>>
>>> filename, ext = path.splitext(poly)
>>> "{0}_{1}.txt".format(filename, record)
'C:\\04-las_clip_inside_area\\16x16grids_1pp_fsa_1373155.txt' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T13:15:42.710

```
>>> poly = 'C:\\04-las_clip_inside_area\\16x16grids_1pp_fsa.shp'
>>> record = 1373155
>>> "{}_{}.txt".format(poly.rpartition('.')[0], record)
'C:\\04-las_clip_inside_area\\16x16grids_1pp_fsa_1373155.txt' 
```

或者如果你坚持使用`join()`

```
>>> "".join([poly.rpartition('.')[0], "_", str(record), ".txt"])
'C:\\04-las_clip_inside_area\\16x16grids_1pp_fsa_1373155.txt' 
```

使用`rpartition()`(or `rsplit()`) 很重要，否则如果路径中有任何其他`'.'`' ，它将无法正常工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T13:10:06.003

您需要将记录转换为字符串。

```
mylist= [poly.split(".")[0],"_",str(record),".txt"] 
```

# c - 检查C中变量值的条件

> ID：12840224
> 
> 赞同：-2
> 
> 时间：2012-10-11T13:04:47.657
> 
> 标签：c

这只是为了一些额外的功劳，我有一个简单的 c 程序来计算平方根，最初程序会无休止地计算它们，所以我想要一个条件来检查变量的值以及它是否小于或等于 i+ (9^32) 如果不打印结束循环。

不幸的是，我似乎无法让 if 条件正常工作

如果有人有任何建议会很棒

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

int main(int argc, char *argv[])
{
  int m, i;
  if ( argc > 1) {
    m = atoi(argv[1]);
  } else {
    m = 1;
  }
for( i = 1; i <= i+1; i++)  {
    double param, result;
    param = i;
    result = sqrt (param);
    printf ("sqrt(%lf) = %lf\n", param, result );
    sleep(0.5);
  }
  if( i <= (i + pow(9,32))
  { return (0); }
  else {  printf("end");
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:08:15.367

`for`在循环中的测试中添加条件：

```
for( i = 1; i < INT_MAX; i++)  { 
```

**注1：**

您可能应该更早地停止：很少有编译器具有足够大的`int`（或）类型以容纳 9^32。`double`我已经用最大值替换了它`int`。

**笔记2：**

当前条件`i <= i+1`将导致代码循环直到`i`溢出。溢出将导致未定义的行为，尽管在大多数实现`i`中将包装为负值导致循环终止。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-11T13:07:51.113

您需要阅读浮点精度。提示：`double`实现的数字不像数学中使用的“真实”实数。有限制，而且 9 ^(32)是一个很大的数字，不确定是否可以将其添加到另一个`double`并保持精度。

# ios - ios 如何每天运行方法？

> ID：12840227
> 
> 赞同：0
> 
> 时间：2012-10-11T13:04:49.503
> 
> 标签：ios, xcode

我想每天或每天 X 间隔检查存储数据库的更新，如何在每天 X 间隔调用方法？我找到了一些用于 x 秒间隔的代码，用同样的方法是否可行？最主要的是它也应该在后台运行。我还想办法将上次更新的日期存储在数据库中，这样我每次应用程序午餐时都会检索并与当前日期进行比较？请通过建议更好的方法来帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:12:54.140

由于您无法真正在后台运行任何应用程序，除非您正在播放音频、对位置进行操作或重新成为 voip 客户端，因此您需要在用户打开您的应用程序时执行此操作。

只需将上次更新日期存储在`NSUserDefault`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:12:09.370

关闭时您无法执行您的应用程序。您不能创建后台应用程序或守护程序。

也许在应用程序启动时运行它适合您，但如果您每天都需要来自设备的信息，用户必须确保应用程序每天都打开。

# c++ - 哪种反卷积算法最适合从文本中去除运动模糊？

> ID：12840231
> 
> 赞同：8
> 
> 时间：2012-10-11T13:05:06.840
> 
> 标签：c++, algorithm, image-processing, opencv

我正在使用 OpenCV 处理手机拍摄的图片。图片包含文字，并且有少量运动模糊，我需要将其删除。

最可行的算法是什么？到目前为止，我已经测试了 Lucy-Richardson 和 Weiner 反卷积，但它们并没有产生令人满意的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T21:03:31.453

同意@TheJuice，您的问题在于 PSF 估计。通常为了能够从单帧中做到这一点，需要对导致模糊的因素（物体的运动、传感器的运动类型等）做出几个假设。

[您可以在此处](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.153.4398&rep=rep1&type=pdf)找到一些指示，尤其是在单维情况下。他们使用一种过滤方法，主要从模糊中留下相关性，丢弃原始图像的空间相关性，并使用它来推断运动方向，从而推断出 PSF。对于小的模糊，您可以将运动视为恒定；否则您将不得不使用更复杂的加速运动模型。

不幸的是，手机模糊通常是 CCD 集成和非线性运动（垂直于视线的平移、手腕运动的偏航和手腕周围的旋转）的复合，因此 Yitzhaky 和 ​​Kopeika 的方法可能只会在少数情况。我知道有一些方法可以解决这个问题（“深度意识”等），但我从来没有机会处理它们。

You can preview the results using photo recovery software such as Focus Magic; while they do not employ YK estimator (motion description is left to you), the remaining workflow is necessarily very similar. If your pictures are amenable to Focus Magic recovery, then *probably* YK method will work. If they are not (or not enough, or not enough of them to be worthwhile), then there's no point even trying to implement it.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T16:26:46.923

运动模糊是一个难以克服的问题。最好的结果是在

1.  相机相对于场景的速度是已知的
2.  您有许多可以关联的模糊对象的图片。

您确实有一个主要优势，因为您正在查看文本（通常构成高对比度特征）。如果您仅将反卷积应用于图像的高对比度（我知道该理论通常是排除高对比度）区域，您应该得到可以让您更好地识别字符的结果。此外，锐化/模糊滤镜前/后处理的组合可能会有所帮助。

我记得以前对[这篇论文](http://www.cse.cuhk.edu.hk/~leojia/projects/motion_deblurring/index.html)印象深刻。也许对他们的实施进行调整是值得一试的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T20:33:20.363

我认为您的点扩散函数的估计可能比使用的算法更重要。这取决于您要消除的运动模糊类型，线性运动可能是最简单的，但不太可能是您要消除的那种：我想它是曝光期间手部运动引起的非线性.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T20:20:34.173

您无法消除运动模糊。信息将永远丢失。您正在处理的是一个 CCD，它将多个真实物体记录到一个像素上，并将它们涂抹在一起。换句话说，如果像素读数为 56，您无法神奇地确定实际读数在时间 1 时应为 37，在时间 2 时应为 62，在时间 3 时应为 43。

另一种看待这个问题的方式：假设你有 5 张图片。然后，您使用 Photoshop 将图片混合在一起，平均每个像素的值。你现在能从混合图片中以某种方式说出最初的 5 张图片是什么吗？不，你不能，因为你没有这样做的信息。

# jquery - 为动画制作一个变量负数

> ID：12840233
> 
> 赞同：0
> 
> 时间：2012-10-11T13:05:13.810
> 
> 标签：jquery, variables, jquery-animate

我有一个我设置的变量，我想将 margin-top 设置为该值的负值版本。我的设置是这样的：

```
var 850_staff_CONTAINER_ht = $('#850_staff_CONTAINER').height();

$("#launcher").click(function() {

$("#850_staff_CONTAINER").animate({
    marginTop: '-'850_staff_CONTAINER_ht
}, 300);

$("#profile_850_HEADER").animate({
    marginTop: 120
}, 300);
$("#profile_850_BIO").delay(120).animate({
    marginTop: 10
}, 450);
$("#profile_850_EDU").delay(220).animate({
    marginTop: 10
}, 450);
$("#profile_850_CONTACT").delay(320).animate({
    marginTop: 10
}, 450);

}); 
```

这里的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:07:24.517

您想让变量 850_staff_CONTAINER_ht 为负数吗？

第一个变量不能以数字开头。在 HTML4 中，元素 ID 不能以数字开头。我把 850 放在最后，使它成为一个有效的变量名。

相乘

```
var staff_CONTAINER_ht_850 = $('#850_staff_CONTAINER').height();

 marginTop: staff_CONTAINER_ht_850 * -1; 
```

# html - CSS - 许多小规则与少数大规则

> ID：12840236
> 
> 赞同：7
> 
> 时间：2012-10-11T13:05:23.733
> 
> 标签：html, css

假设我有许多按钮。每个按钮都有一个不同的图标，但都来自同一个精灵表。

现在我想知道的是，浏览器更有效。通过多个小规则设置每个按钮的样式，如下所示：

```
.icon {
    background-image: url('iconsheet.png');
}
.a-button {
    background-position: -x -y;
}
.b-button {
    background-position: -x -y;
}
.c-button { ...

<input class="icon a-button"> blabla ... 
```

还是这样更好：

```
.a-button {
    background-image: url('iconsheet.png');
    background-position: -x -y;
}
.b-button {
    background-image: url('iconsheet.png');
    background-position: -x -y;
}
.c-button {
    background-image: url('iconsheet.png');
    background-position: -x -y;
}

<input class="a-button"> blabla ... 
```

请注意

1.  代码是按*程序*创建的，所以我只对解析、渲染等效果感兴趣，而不是最佳编码实践。
2.  这只是一个玩具设置。实际上，有更多不同属性的组合（边框、字体等）。

对每个标签只应用一些臃肿的规则有什么好处，这比提供一个更大的 CSS 文件更重要？

非常感谢！！

[编辑]：感谢您迄今为止的所有回答！为了澄清，我*使用*的是SASS/SCSS。我正在使用的 *.scss 文件很好，具有可读性/可维护性。

我特别感兴趣的是，每个标签减少单独的规则是否会带来性能优势，这是否会使得在最后拥有一个 bazillion-line css 文件是可以接受的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T13:14:30.347

好吧，如果这些`button`s 也适合 an 的角色`.icon`，那么多类名解决方案就很好了。

在编写 CSS 代码时，不要考虑性能或文件大小，要考虑*什么是有意义*的。如果它*有意义*，那将是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:16:48.653

在这里查看不同的 css 样式及其性能 [http://screwlewse.com/2010/08/different-css-techniques-and-their-performance/](http://screwlewse.com/2010/08/different-css-techniques-and-their-performance/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:15:17.290

我认为这里没有任何正确或错误的答案……这两个例子都可以。

根据个人经验，我认为我可能会选择第一个示例，因为 CSS 稍微小一些。请记住，当您使用 Web 时，每个字节都很重要，因此理想情况下，您希望尽可能地精简代码，在这方面，在发布之前缩小 CSS 总是好的（[http://www. minifycss.com/](http://www.minifycss.com/) )

您可以尝试的另一件事是 SASS / SCSS。使用 SASS 代码构建您的样式，看看它如何深入到标准 CSS。( [http://sass-lang.com/](http://sass-lang.com/) )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T13:15:34.707

如有疑问，请选择最小的代码（也尽量保持可读性）。

浏览器需要解析的内容会更少，这是一件好事。`A`样式计算树会更小，如果浏览器缓存了计算的样式，那么无论如何说一个特定的得到它是无关紧要的`color`- from `a[href]`, `a`or `a.link`or `.link`or什么。

我的回答故意含糊不清，因为 CSS 没有指定解析策略，浏览器可以自由地以任何它喜欢的方式实现 CSS。有些浏览器以使用最少的内存而自豪，有些则以拥有最快的页面处理器而自豪。然而，最小的代码会让你在阅读量较少的人中赢得追随者，在那些偶然也通过“阅读”来理解事物的计算机中赢得追随者。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T13:15:48.730

您的第一个答案绝对是最有效的方法。无论哪种方式，您都会得到相同的结果，但在您的第一个示例中，您将代码行保存在 css 中。与您的第二个答案相比，这是一个非常小的性能提升，但它仍然更好。

另外，请从这个角度考虑。如果您更改精灵表或重命名，更改 1 条路径而不是 3 条路径会不会容易得多？

现在，如果您需要使用脚本来解析 css 文件中的信息，那么请务必使用您的第二个答案。

结论：唯一的区别是您的 css 文件的大小可以忽略不计。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T13:20:31.413

我认为另一个因素是其他人是否会使用和编辑您的代码。您可能会记得您已将所有附加规则嵌入到其他类中，但其他人可能更容易准确地阅读元素正在使用哪些类。

虽然我不怀疑性能提升很重要，但当今世界的几个字节似乎就像我们正在尝试计算海滩上的沙粒。我认为编写可维护和可读的代码比试图削减代码更重要。同样，高度主观取决于谁以及如何使用代码。

# vb.net - 设置按钮启用状态

> ID：12840237
> 
> 赞同：1
> 
> 时间：2012-10-11T13:05:47.603
> 
> 标签：vb.net, button

我有一个简单的 vb 2010 表单，我希望能够设置所有按钮的启用状态。我为复选框和 numericUpDown 控件制作了类似的功能，它们按要求运行，但对于按钮，该功能似乎无法正常运行。

```
Private Sub setButtonsState(ByVal state As Boolean)
    Dim cControl As Control
    For Each cControl In Me.Controls
        If (TypeOf cControl Is Button) Then
            cControl.Enabled = state
        End If
    Next cControl
End Sub 
```

哪个是这样称呼的：`setButtonsState(True)` 这似乎对按钮没有任何影响，虽然`buttonName.Enabled = True`工作正常......我几乎就是你在VB中所说的菜鸟，所以有人帮帮我吗？塔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T13:10:53.077

除非您的所有按钮都直接属于在其中运行的表单，否则它们将不会被访问，因为这不会通过控制树向下巡航以到达它们。稍微不同的方法可能是一种更递归的方法：

```
Private Sub setButtonsState(ByVal controls as System.Windows.Forms.Control.ControlCollection, ByVal state as Boolean)

    For Each ctrl as Control in controls
        If (ctrl.HasChildren) Then setButtonsState(ctrl.Controls, state)

        If (TypeOf ctrl Is Button) Then ctrl.Enabled = state
    Next

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:10:17.033

它适用于我的表格。您确定将 state 设置为 true 值吗？许多人想在子例程中调暗一个名为“state”的变量，只是为了测试它。将 state 设置为 true 并禁用所有按钮。

尝试检索返回的控件计数。确保您正确引用控件。

**演示将 boolean 设置为 True 以进行测试：**

```
*Dim state As Boolean = True*

    Dim cControl As Control
    For Each cControl In Me.Controls
        If (TypeOf cControl Is Button) Then
            cControl.Enabled = state
        End If
    Next cControl 
```

**检查控件的数量：**

```
 For Each cControl In (Your Form Name Ex. FrmMain1).Controls
                    If (TypeOf cControl Is Button) Then
                        cControl.Enabled = state
                        *debug.writeline(cControl.Name)*
                    End If
                Next cControl 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:58:33.873

如果可能的话，我建议你避免递归。下面的方法具有更好的调试能力。

首先，将[ControlCollection 树线性](http://www.neolisk.com/techblog/vbnet-get-all-controls-of-specified-type-from-controlcollection-tree)化为 Control 数组 - 通用扩展方法，无递归，LINQ 或 GetNextControl。

然后你可以这样写：

```
Private Sub setButtonsState(ByVal controls As ControlCollection, ByVal state As Boolean)
  For Each ctrl As Control In controls.GetAllControlsOfType(Of Button)()
    ctrl.Enabled = state
  Next
End Sub 
```

# xml - 删除多余的标记样式代码 XSLT

> ID：12840239
> 
> 赞同：0
> 
> 时间：2012-10-11T13:05:53.447
> 
> 标签：xml, xslt, xsl-fo, apache-fop

我正在通过 Apache-FOP 项目将我的 XML 文档转换为 PDF 文档，到目前为止一切顺利。除了，我有它以后不容易配置。我的代码片段是这样的，

```
<fo:table-cell>
    <fo:block margin-top="5pt" text-align="left"><xsl:value-of select="" /></fo:block>
</fo:table-cell>
<fo:table-cell>
    <fo:block margin-top="5pt" text-align="center"><xsl:value-of select="" /></fo:block>
</fo:table-cell>
<fo:table-cell>
    <fo:block margin-top="5pt" text-align="center"><xsl:value-of select="" /></fo:block>
</fo:table-cell>
<fo:table-cell>
    <fo:block margin-top="5pt" text-align="center"><xsl:value-of select="" /></fo:block>
</fo:table-cell>
<fo:table-cell>
    <fo:block margin-top="5pt" text-align="center"><xsl:value-of select="" /></fo:block>
</fo:table-cell>
<fo:table-cell>
     <fo:block margin-top="5pt" text-align="center"><xsl:value-of select="" /></fo:block>
</fo:table-cell> 
```

正如您在上面的代码中看到的那样，我`margin-top="5pt" text-align="center"`经常这样做。我试图找到一种方法，这样我就可以只写一次这个值，然后我可以改变一个变量，然后影响每个人。

* * *

### 研究发现：

到目前为止，我发现我可以在 XSLT 中使用一个参数并定义一个变量。后来，我可以使用，参数值可以是5pt。然后我像这样使用它。

```
<xsl:attribute name="margin-top">$var</xsl:attribute> 
```

但这不是一个好的解决方案，因为它使我的代码完全不可读（虽然不完全，但你知道我的意思）。XSLT 中有类似 CSS 的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T15:35:51.597

使用**xsl:attribute**可能是一种相当冗长的方法。最好在此处使用“属性值模板”，它允许您在线指定代码

```
<fo:block margin-top="{$var}" text-align="{$var2}"> 
```

花括号表示该值是要计算的表达式，而不是字面输出。

从这里继续，我认为**xsl:attribute-set**可能是你的朋友。这将允许您创建一组属性，这些属性可以在以后应用于任何元素。首先，您将定义您的属性集，如下所示：（注意，这应该在**xsl:stylesheet**元素下）

```
<xsl:attribute-set name="block">
  <xsl:attribute name="margin-top">5pt</xsl:attribute>
  <xsl:attribute name="text-align">left</xsl:attribute>
</xsl:attribute-set> 
```

然后，要使用它，您可以只使用**xsl:use-attribute-sets**属性

```
<fo:block xsl:use-attribute-sets="block"> 
```

这应该输出以下内容：

```
<fo:block margin-top="5pt" text-align="left"> 
```

此外，如果您希望从调用程序中设置值，您仍然可以“参数化”您的属性集。例如，以下内容也应该有效

```
<xsl:param name="margin-top" select="'6pt'" />
<xsl:param name="text-align" select="'left'" />

<xsl:attribute-set name="block">
  <xsl:attribute name="margin-top"><xsl:value-of select="$margin-top" /></xsl:attribute>
  <xsl:attribute name="text-align"><xsl:value-of select="$text-align" /></xsl:attribute>
</xsl:attribute-set> 
```

# magento - magento 子主题可能吗？

> ID：12840245
> 
> 赞同：-1
> 
> 时间：2012-10-11T13:06:15.557
> 
> 标签：magento, themes

我正在创建一个 magento 商店。我已经下载了一个新模板。该模板有一个自己的“包”文件夹，其 phtml 文件位于包内的“默认”文件夹中。

现在我开始在这个包中添加一个主题文件夹来自定义下载的模板。一切正常。

但现在我想为这个定制版本创建子设计，让一些商店类别看起来不同（我可以在后端更改单个类别的主题）。

是否可以？你能推荐什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T22:00:13.650

我认为 Aoe_DesignFallback 扩展会帮助你[http://www.fabrizio-branca.de/custom-design-fallbacks-in-magento.html](http://www.fabrizio-branca.de/custom-design-fallbacks-in-magento.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T15:35:00.960

您可以在自定义包中创建任意数量的主题变体

包/默认
包/主题1
包/主题2
...
包/主题N

在这些主题中，您可以自定义任意数量的文件。例如，您只能针对特定主题编辑一个特定模板。由于 Magento 的后备机制，所有其余文件都将从包的“默认”主题使用，然后从“基本”包的“默认”主题使用

阅读本指南：http: [//info.magento.com/rs/magentocommerce/images/MagentoDesignGuide.pdf](http://info.magento.com/rs/magentocommerce/images/MagentoDesignGuide.pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T13:16:53.940

你需要为不同的品类做不同的设计，在后端，

```
Catalog > Manage Categories > for each categories > Custom Design Tab 
```

您可以为该特定类别选择所需的设计。

您还可以根据需要在自定义布局更新中添加一些内容。

您甚至可以指定显示设计的时间范围，并在该时间后自动显示默认设计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T00:51:26.870

Magento 中主题的唯一后备机制是在提供的“基本”主题和您选择的主题之间。也就是说，Magento 将在您选择的主题中查找文件，并且，如果未找到任何特定文件，将回退到提供的“基本”主题。

因此，您可以将您想要的主题与“base”主题合并，并用这个新创建的主题替换“base”主题。然后，您可以创建一个可以回退到新的“基本”主题的子主题。我不建议您这样做，因为这会使升级到新版本的 Magento 变得非常困难。

If you really want to make this work, I will recommend having a workflow outside of Magento to handle your files in the themes and sub-themes. Perhaps some sort of scripts that take files from the main theme and merge them into the sub-themes before copying all the themes and sub-themes folders into Magento.

# .net - 如何使用 dbContext 构建动态 WHERE 子句

> ID：12840251
> 
> 赞同：1
> 
> 时间：2012-10-11T13:06:36.980
> 
> 标签：.net, entity-framework, dbcontext, entity-sql

我们需要根据用户输入创建动态 WHERE 子句。使用旧的`ObjectContext`我们找到了一种使用`.Where(<ESql>)`.

```
Dim qry As ObjectQuery(Of MESSGROESSE) = _objContext.MESSGROESSE
If Not String.IsNullOrWhiteSpace(fltFormelzeichen.Text) Then
    qry = qry.Where("it.Formelzeichen LIKE @Formelzeichen", New ObjectParameter("Formelzeichen", BuildESqlWildCard(fltFormelzeichen.Text)))
万一
If Not String.IsNullOrWhiteSpace(fltBezeichnung.Text) Then
    qry = qry.Where("it.Bezeichnung LIKE @Bezeichnung", New ObjectParameter("Bezeichnung", BuildESqlWildCard(fltBezeichnung.Text)))
万一

```

因为这是一个新项目，我们一般希望使用新的 DbContext。我知道如何从 DbContext 获取 ObjectContext：

```
Private _objContext As ObjectContext = CType(_dbContext, IObjectContextAdapter).ObjectContext 
```

但是然后呢？

使用`DbContext.Database.SqlQuery`or`ObjectContext.CreateQuery`似乎不是一个选项，因为 EDMX 生成器会破坏列名，如果它们与表名相同并且我们无法控制 DB 模式。请参阅[如何阻止 EDMX 生成器更改列名](https://stackoverflow.com/questions/12732114/how-to-stop-the-edmx-generator-from-changing-columns-names)。

我们不希望依赖开源解决方案。

添加

同时，我说服客户不再需要通配符，因此我们可以将 Contains() 与 dbConctext 一起使用：

```
_dbc = 新的 TPTEntities
Dim qry As DbQuery(Of MESSGROESSE) = _dbc.MESSGROESSE
qry = 从 e In _dbc.MESSGROESSE 取 maxRows

If Not String.IsNullOrWhiteSpace(fltFormelzeichen.Text) Then
    qry = From e In qry Where e.FORMELZEICHEN.Contains(fltFormelzeichen.Text)
万一
If Not String.IsNullOrWhiteSpace(fltBezeichnung.Text) Then
    qry = 来自 e In qry 其中 e.BEZEICHNUNG.Contains(fltBezeichnung.Text)
万一
If Not String.IsNullOrWhiteSpace(fltReihenfolge.Text) Then
    qry = From e In qry 其中 e.REIHENFOLGE = fltReihenfolge.Text
万一
qry.Load()
'TODO 是 _dbc.MESSGROESSE.Local 获取数据的正确方法吗？
ucoGridEditor.grd.ItemsSource = _dbc.MESSGROESSE.Local

```

我仍然想知道如何在 dbContext 上使用 ESql Where()。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:36:38.593

DbContext 建立在 ObjectContext 之上。您可以使用以下方法拖放到 ObjectContext：

```
var objectContext = ((IObjectContextAdapter)ctx).ObjectContext; 
```

其中 ctx 是您的 DbContext （派生）类。

不过，还有另一种使用 esql 的方法。您可以动态构建表达式树。看一下这个线程[EF 对象与泛型类型](https://stackoverflow.com/questions/10402029/ef-object-comparison-with-generic-types)的比较 - 代码显示了如何动态构建过滤器表达式。

# c# - 如何获取 Windows 资源管理器中使用的驱动器图标？

> ID：12840268
> 
> 赞同：6
> 
> 时间：2012-10-11T13:07:26.467
> 
> 标签：c#, windows-7, explorer

当您查看“计算机”时，Windows 7 的每个驱动器都有非常漂亮的图标。它为 CD、SD 卡、U 盘、USB 硬盘等放置了正确的图标。

它看起来像这样：

[![驾驶](../Images/56c1d73c38b1ccdb4dbc8e8dc4431fce.png)](http://www.flickr.com/photos/seabhcan/8076836030/ "在 Flickr 上驾驶 seabhcan")

我想访问这些图标并在我的 UI 中使用正确的图标。我尝试了各种访问文件夹图标和文件图标的方法，但没有任何效果。什么不起作用：

*   Icon.ExtractAssociatedIcon("F:\")

*   SHGetFileInfo("F:\", 0, ref shinfo, (uint)Marshal.SizeOf(shinfo), Win32.SHGFI_ICON | Win32.SHGFI_SMALLICON);

*   ShellObject.FromParsingName("F:\").Thumbnail

我还能尝试什么，或者我做错了什么？

编辑：我不是在寻找图标的来源，我正在尝试为每个驱动器获取正确的图标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T15:42:37.690

经过大量挖掘，我发现了这个：[https ://tabbles.net/how-to-have-large-file-icons-with-shgetfileinfo-in-c/](https://tabbles.net/how-to-have-large-file-icons-with-shgetfileinfo-in-c/)

问题是 SHGetFileInfo 可以得到 16x16 的 XP 之前的小图标，但要得到更大的现代 Vista 和 Win7 'Jumbo' 图标，最高可达 256x256，你需要使用更复杂的多步骤方法。该链接提供代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T13:10:33.720

您应该小心您使用的图标，因为其中很多都无法获得许可。但是你肯定可以使用你在下面找到的那些

*c:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\VS2010ImageLibrary\1033\VS2010ImageLibrary.zip*（Visual Studio 2010 的示例）

或者

*c:\Program Files (x86)\Microsoft Visual Studio 8\Common7\VS2005ImageLibrary\VS2005ImageLibrary.zip*（Visual Studio 2005 的示例）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:10:14.730

我相信它们嵌入在这里：

```
%SystemRoot%\system32\SHELL32.dll 
```

# android - Android GPS正在返回空位置

> ID：12840269
> 
> 赞同：0
> 
> 时间：2012-10-11T13:07:29.710
> 
> 标签：android, gps

我已经编写了代码，如果 GPS 被禁用，它将由代码启用并尝试从 gps 获取位置，但我得到一个空值。下面是我的代码

```
 public void getValue() {
    LocationManager mlocManager = (LocationManager) MySettings.this.getSystemService(Context.LOCATION_SERVICE);
    boolean gpsEnabled = mlocManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
    System.out.println("GPS IS "+gpsEnabled);
    if (!gpsEnabled) {
        String provider = Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);

        if (!provider.contains("gps")) { // if gps is disabled
            final Intent poke = new Intent();
            poke.setClassName("com.android.settings", "com.android.settings.widget.SettingsAppWidgetProvider");
            poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
            poke.setData(Uri.parse("3"));
            sendBroadcast(poke);
        }
    }
    SimpleDateFormat sdfDate = new SimpleDateFormat("MM/dd/yyyy");
    try {
        getBatteryLevel();
        mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, MySettings.this);
        Location location = mlocManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        mLocation = location;
        if (location != null) {
            lat = location.getLatitude();
            lon = location.getLongitude();
            address = getAddress();
            alt = location.getAltitude();
            if (meterFootFlag) {
                diameter = location.getAccuracy();
            } else
                diameter = location.getAccuracy() / 3.28084;
        } else {
            lat = 0.0;
            lon = 0.0;
            alt = 0.0;
        }

    } catch (Exception e) {
        lat = 0.0;
        lon = 0.0;
        alt = 0.0;
    } 
```

我还在清单文件中添加了权限

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
```

但我得到了该位置的空值。

关于如何获得位置的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-14T12:57:14.890

您的代码是正确的，只需等到 GP 从卫星获取高度可能需要不到 1 分钟的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:20:23.487

确保您只检查`DEVICE`..在模拟器中，它会在系统中运行时给出空值，`GPS`因此它没有权限`GPS`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:15:42.117

尝试：

```
 public Location showLocation(){
    LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    //Class model, save latitude and longitude
    NavegadorCoordenadas locate = new NavegadorCoordenadas();
    Criteria crit = new Criteria();
    crit.setAccuracy(Criteria.ACCURACY_FINE);
    String provider = lm.getBestProvider(crit, false);
    Location loc = getLastKnownLocation(lm);                    
    locate.setLatitude(loc.getLatitude()); 
    locate.setLongitude(loc.getLongitude());
    return loc;     
}

private Location getLastKnownLocation(LocationManager location) {
    List<String> providers = location.getProviders(true);
    Location bestLocation = null;
    for (String provider : providers) {
        Location l = location.getLastKnownLocation(provider);           
        if (l == null) {
            continue;
        }
        if (bestLocation == null || l.getAccuracy() < bestLocation.getAccuracy()) {             
            bestLocation = l;
        }
    }
    if (bestLocation == null) {
        return null;
    }
    return bestLocation;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T07:12:19.327

```
locationMangaer = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        String provider = Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);
        if(!provider.contains("gps")){ //if gps is disabled
            final Intent poke = new Intent();
            poke.setClassName("com.android.settings", "com.android.settings.widget.SettingsAppWidgetProvider"); 
            poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
            poke.setData(Uri.parse("3")); 
            sendBroadcast(poke);
        }

    locationListener = new MyLocationListener();
    locationMangaer.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10, 10,
            locationListener); 
```

现在在同一活动中创建**MyLocationListener 类。**

```
private class MyLocationListener implements LocationListener {
    @Override
    public void onLocationChanged(Location loc) {

            String longitude = "Longitude: " +loc.getLongitude();  
            String latitude = "Latitude: " +loc.getLatitude();

            /*----------to get City-Name from coordinates ------------- */
            String cityName=null;                 
            Geocoder gcd = new Geocoder(getBaseContext(), Locale.getDefault());                  
            List<Address>  addresses;  
            try {  
             addresses = gcd.getFromLocation(loc.getLatitude(), loc.getLongitude(), 1);  
             if (addresses.size() > 0) { 
              System.out.println(addresses.get(0).getLocality());  
             cityName=addresses.get(0).getLocality();  
                System.out.println("MESSAGE:"+cityName);
             }
            } catch (IOException e) {                 
             e.printStackTrace();  
            } 

            String s = longitude+"\n"+latitude+"\t city name:"+cityName;
                Log.v("OUTPUT, s);
    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub          
    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub          
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub          
    }
} 
```

**在实际设备**中运行您的应用程序。

您可以弄清楚自动启动**GPS**并查看**控制台**logcat。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-04T13:59:24.460

确保通过 Settings--> Applications-->YourApp-->permissions 打开 Permissions 另一个原因可能是延迟，连接网络需要时间，有时超过一分钟

# git - 如何将 Gerrit 分支合并到另一个 Gerrit 分支

> ID：12840279
> 
> 赞同：40
> 
> 时间：2012-10-11T13:07:54.250
> 
> 标签：git, gerrit

我正在使用 Gerrit 2.4.2 版。我有一个分支`master`，我创建了一个新分支，名为 `newbranch`. 然后我将一些更改推送到遥控器 (Gerrit's) `newbranch`。在 Gerrit 中验证后，我将更改合并到`newbranch`.

不，我想合并`newbranch`to `master`，发送更新`master`（与来自 的更改合并`newbranch`），然后删除`newbranch`分支。

我试过这样做：

```
git fetch
git checkout master
git merge newbranch
git push origin master:refs/for/master 
```

但是 Gerrit 回馈了这条信息：

```
 ! [remote rejected] master -> refs/for/master (no new changes) 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-11T13:57:02.667

这种情况已被报告为 Gerrit 中的一个错误。这是[Gerrit 的问题跟踪器](http://code.google.com/p/gerrit/issues/detail?id=1145)的解决方案/解决方法：

> 据我所知，您目前有两种选择 -
> 
> 1.  强制推到裁判/头。这只是一个快进，所以理论上一切都已经过审查和验证。再次这样做是没有意义的，因此只需跳过该过程并推送到 refs/heads 而不是 refs/for。
>     
>     
> 2.  继续并创建一个合并提交。使用 'git merge --no-ff' - 这将创建一个合并提交，即使在你的快进情况下它不是必需的。然后可以像往常一样上传、审查、验证和合并合并提交。
>     
>     
> 
> 我的公司倾向于选择选项 2。我会以 wontfix 的形式关闭它，但如果您对如何更好地做到这一点有任何建议，请告诉我们。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-06-23T17:06:47.083

如果合并是快进合并，则不存在推送到 gerrit 的对象，因为快进只是移动分支指针。

您需要通过避免快进来强制合并创建对象：

```
git merge --no-ff 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-05T12:08:18.450

以下命令完美运行。

```
git checkout master
git merge --no-ff newbranch 
```

您可以使用默认提交消息保存。确保已生成更改 ID。您可以使用以下命令来确定。

```
git commit --amend 
```

然后使用以下命令推送。

```
git push origin HEAD:refs/for/refs/heads/master 
```

您可能会遇到如下错误消息。

```
! [remote rejected] HEAD -> refs/for/refs/heads/master (you are not allowed to upload merges) 
```

为了解决这个问题，gerrit 项目管理员必须在 gerrit 中创建另一个名为 'refs/for/refs/heads/master' 或 'refs/for/refs/heads/*' 的引用（这将涵盖未来的所有分支）。然后授予此引用的“Push Merge Commit”权限，如果需要提交 GCR，则授予“提交”权限。

现在，再次尝试上面的推送命令，它应该可以工作。

学分：

[https://github.com/ReviewAssistant/reviewassistant/wiki/Merging-branches-in-Gerrit](https://github.com/ReviewAssistant/reviewassistant/wiki/Merging-branches-in-Gerrit)

[https://stackoverflow.com/a/21199818/3877642](https://stackoverflow.com/a/21199818/3877642)

# android - Android IntentService

> ID：12840282
> 
> 赞同：0
> 
> 时间：2012-10-11T13:08:06.730
> 
> 标签：android

从 AsyncTask 文档中我读到，一旦应用程序进入后台，它很可能被取消。IntentService 也一样。一旦应用程序处于后台，将被操作系统取消，或者我们保证这将运行完成。

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T14:06:17.837

> 一旦应用程序处于后台，将被操作系统取消，或者我们保证这将运行完成。

没有什么是保证的。用户可能会通过任务杀手终止您的进程。电池可能没电了。用户可能会关闭设备。该设备可能会被一辆大卡车碾过。

`IntentService`一个will 比仅仅一个更有可能持续完成`AsyncTask`，因为进程中存在服务使得操作系统不太可能决定终止您的进程以释放内存以供其他进程使用。

# c++ - 我怎样才能安全地使用 strcpy

> ID：12840284
> 
> 赞同：2
> 
> 时间：2012-10-11T13:08:08.290
> 
> 标签：c++, memory-management, char, strcpy

我想分配一个`char*`到`char*`，如果我使用`strcpy`我会遇到几个运行时内存问题，所以我通过简单的分配来修复它`= operator`。任何人都可以解释在使用之前应该准备什么`strcpy`以避免内存问题。

编辑：

```
int Function(const char* K,char* FileIN,char* FileOut,int DC)
{   
    char *fic_in,*n_fic,*fic_out,*fic_dec;

    unsigned char k[17];

        fic_in = (char*)malloc(60*sizeof(char));

        strcpy((char*)k,K);

        //strcpy(fic_in,FileIN);  //I remove this one
        fic_in=FileIN;            //and replace it by this
      ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T13:11:09.717

简短的回答：你根本不应该使用`strcpy`，而是`strncpy`. 后一个功能不*依赖*尾随`\0`，并且需要您提供最大复制长度。

此外，对于指针分配，您根本不需要`strncpy`。你想*复制*内存还是简单地重新分配指针？对于重新分配，`=`操作员非常好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T13:12:25.637

```
const char *a = "string literal";
const char *b; 
```

`a`是指向字符串文字的指针。`b`是一个没有特别指向任何地方的指针（它是未初始化的）。

```
b = a; 
```

`b`现在指向相同的内存`a`指向。

```
char c[100]; 
```

`c`现在是 100 个字符的数组。到目前为止，该内存区域与其他所有内容完全分开。

```
strcpy(c, a); 
```

（具体来说，前 15 个字节）的内容`c`现在与 指向的内存保持相同的值`a`。所以现在有*两个*内存区域包含相同的字符串数据。

如您所见，分配指针与`strcpy`. 如果您想将 a 分配`char*`给 a `char*`，那么您不应该靠近`strcpy`.

阅读有关 C++ 的书是必不可少的，但基本要求`strcpy`是目标指针必须指向一个内存区域，该区域具有足够的空间用于源指针指向的字符串。可能您的“运行时内存问题”是因为您没有确保这一点，这就是您需要阅读书籍的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T13:12:01.243

`char*`是指向字符串字符的指针。要制作副本，您需要先为其分配内存并运行副本。就像是

```
size_t l = strlen(src);
char *dst = malloc(l+1);
memmove(dst,src,l+1); 
```

（如果 malloc 成功，则进行一些错误检查等）。

不过，考虑到您的问题已标记为`c++`，我建议您使用`std::string`课程并同时进行一些阅读。这真的有助于理解事情的实际运作方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T13:12:12.920

您需要确保接收缓冲区足够大以适合源字符串，包括末尾的终止字符`'\0'`。就是这样。

如果您可以将字符串表示为`char *`可以复制的指针，那很好，但并不总是可行。

# facebook - 应用创建失败

> ID：12840285
> 
> 赞同：1
> 
> 时间：2012-10-11T13:08:14.460
> 
> 标签：facebook

我创建 facebook 应用程序并收到此消息：

应用程序创建失败 您已被阻止创建应用程序，因为我们无法验证您的帐户。您需要使用真实姓名来维护 Facebook 帐户，但您可以为您的应用设置单独的测试帐户。了解更多：http: [//developers.facebook.com/docs/test_users/](http://developers.facebook.com/docs/test_users/)

如果您认为自己错误地收到了此消息，请提交申诉：[https](https://www.facebook.com/help/contact_us.php?id=140703502680919) ://www.facebook.com/help/contact_us.php?id=140703502680919 。

你们有没有人在创建应用程序时收到此消息？

谢谢，问候，海

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:57:53.497

向他们发送您的身份证副本（您可以删除数字）我在收到下面的邮件后就这样做了，我可以再次制作应用程序

屏蔽后来自 fb 的邮件：为了保持网站上的真实性文化，Facebook 要求用户提供他们的真实姓名。禁止冒充任何人或任何事情，虚假账户违反了我们的权利和责任声明。

我们的系统表明，基于多种因素，您的帐户可能不真实。如果您认为自己被错误地阻止创建应用程序，请回复此电子邮件，并附上您政府签发的身份证明的数字图像。确保您提供的身份证明符合以下所有要求：

*   必须由政府签发（例如护照、驾驶执照）
*   必须是彩色的
*   必须清楚地显示您的全名、出生日期和照片

如果可能，请将此文件保存为 JPEG 图像格式。

您可以涂黑任何不需要验证您的身份的个人信息（例如，地址、许可证号）。请放心，一旦我们使用它来验证您帐户的真实性，我们将从我们的服务器中永久删除您的 ID。

请注意，多次写入并提交您的 ID 不会导致更快的响应。一旦您提交了您的初始请求，它就会被放置在一个队列中并做出相应的响应。感谢您的耐心等待，对于在我们调查此问题时可能造成的任何不便，我们深表歉意。

谢谢，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:18:57.900

您有一个正在创建应用程序的测试用户，或者您的帐户没有附加手机号码。

我看到了这个错误，它与将手机号码添加到我的帐户有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T03:53:25.657

这也发生在我身上。我能够通过以下方式解决问题：

暂时关闭某些安全功能（登录批准并始终在安全连接上浏览）使用设置从我的帐户中删除我的信用卡和所有手机号码。

然后我尝试创建另一个应用程序。当我收到错误消息时，我使用该链接验证我的手机，然后将其重新添加到我的帐户中。再次创建应用程序终于奏效了。

我希望这对你有用！

# mysql - 按自定义条件对搜索结果进行排序

> ID：12840293
> 
> 赞同：1
> 
> 时间：2012-10-11T13:08:35.927
> 
> 标签：mysql, sql

我会尽量解释我的问题。

我有一个搜索表单，用户可以在其中选择不同的参数并输入不同的值来执行属性搜索。就像我有一张桌子`tbl_properties`。

在搜索表单中，用户选择、、[`property_category`租赁、`property_type`销售或租金]，输入价格范围、、、、、等。属性属性可以在其他查​​找表中或其他查找表中。编写查询不是我的问题，但我遇到的问题是，我想在搜索结果中按照以下模式对记录进行排序`no_of_bedrooms``location``districts``property_area``tbl_properties`

1.  第一个显示结果 - 按降序匹配位置的价格
2.  然后显示 - 与该地区匹配的价格
3.  然后显示 - 同一区的卧室数量匹配
4.  然后显示 - 价格/卧室/物业面积匹配但在不同的地区

我只想提示如何按这些顺序对记录进行排序？

**编辑**

这是我所拥有的表结构的简要说明

```
tbl_properties
-------------------

property_id   INT
category_id    INT
property_name VARCHAR
price         INT
district_id   INT
location       VARCHAR
property_type  ENUM('lease','sale','rent')

tbl_category
-------------
category_id   INT
category_name VARCHAR

tbl_districts
-----------------
district_id INT
district_name VARCHAR

tbl_property_details
------------------------
detail_id      INT
property_id     INT
no_of_bedrooms  INT
property_area  DECIMAL 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T13:23:27.960

```
order by case
    when price between @priceMin and @priceMax 
        and location = @location then 1
    when price between @priceMin and @priceMax 
        and district_id = @districtid then 2
    when no_of_bedrooms = @no_of_bedrooms 
        and districtid = @districtid then 3
    when price between @priceMin and @priceMax 
        and no_of_bedrooms = @no_of_bedrooms 
        and property_area = @property_area and districtid <> @districtid then 4
    else 5
end, price desc 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-11T13:12:22.523

从 tbl_properties 中选择 property_category property_type 其中***_*** ****__** ****_** ****_** ***_*** ****_由** ***_*** **__****订购** ；********

 *****所以... ORDER BY price desc;

等等

这是一个很好的使用链接[http://www.sqlcourse2.com/orderby.html](http://www.sqlcourse2.com/orderby.html)*****

# r - 在数据框中按组计算唯一/不同的值

> ID：12840294
> 
> 赞同：89
> 
> 时间：2012-10-11T13:08:41.053
> 
> 标签：r, dataframe, distinct-values, r-faq

假设我有以下数据框：

```
> myvec
    name order_no
1    Amy       12
2   Jack       14
3   Jack       16
4   Dave       11
5    Amy       12
6   Jack       16
7    Tom       19
8  Larry       22
9    Tom       19
10  Dave       11
11  Jack       17
12   Tom       20
13   Amy       23
14  Jack       16 
```

我想计算`order_no`每个不同值的数量`name`。它应该产生以下结果：

```
name    number_of_distinct_orders
Amy     2
Jack    3
Dave    1
Tom     2
Larry   1 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-10-16T05:17:28.757

一种`data.table`方法

```
library(data.table)
DT <- data.table(myvec)

DT[, .(number_of_distinct_orders = length(unique(order_no))), by = name] 
```

* * *

`data.table`v >= 1.9.5 现在有一个内置`uniqueN`函数

```
DT[, .(number_of_distinct_orders = uniqueN(order_no)), by = name] 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2017-01-06T17:09:03.983

在`dplyr`您可以使用`n_distinct`“*计算唯一值的数量*”：

```
library(dplyr)
myvec %>%
  group_by(name) %>%
  summarise(n_distinct(order_no)) 
```

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2012-10-11T14:02:53.913

这是具有以下功能的简单解决方案`aggregate`：

```
aggregate(order_no ~ name, myvec, function(x) length(unique(x))) 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2012-10-11T13:15:09.897

这应该可以解决问题：

```
ddply(myvec,~name,summarise,number_of_distinct_orders=length(unique(order_no))) 
```

这需要包 plyr。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2017-07-28T11:21:54.027

这是@David Arenburg 解决方案的基准，[以及](https://stackoverflow.com/a/28173835/6197649)此处发布的一些解决方案的回顾（[@mnel](https://stackoverflow.com/a/12907956/6197649)、[@Sven Hohenstein](https://stackoverflow.com/a/12841401/6197649)、[@Henrik](https://stackoverflow.com/a/41510676/6197649)）：

```
library(dplyr)
library(data.table)
library(microbenchmark)
library(tidyr)
library(ggplot2)

df <- mtcars
DT <- as.data.table(df)
DT_32k <- rbindlist(replicate(1e3, mtcars, simplify = FALSE))
df_32k <- as.data.frame(DT_32k)
DT_32M <- rbindlist(replicate(1e6, mtcars, simplify = FALSE))
df_32M <- as.data.frame(DT_32M)
bench <- microbenchmark(
  base_32 = aggregate(hp ~ cyl, df, function(x) length(unique(x))),
  base_32k = aggregate(hp ~ cyl, df_32k, function(x) length(unique(x))),
  base_32M = aggregate(hp ~ cyl, df_32M, function(x) length(unique(x))),
  dplyr_32 = summarise(group_by(df, cyl), count = n_distinct(hp)),
  dplyr_32k = summarise(group_by(df_32k, cyl), count = n_distinct(hp)),
  dplyr_32M = summarise(group_by(df_32M, cyl), count = n_distinct(hp)),
  data.table_32 = DT[, .(count = uniqueN(hp)), by = cyl],
  data.table_32k = DT_32k[, .(count = uniqueN(hp)), by = cyl],
  data.table_32M = DT_32M[, .(count = uniqueN(hp)), by = cyl],
  times = 10
) 
```

结果：

```
print(bench)

# Unit: microseconds
#            expr          min           lq         mean       median           uq          max neval  cld
#         base_32      816.153     1064.817 1.231248e+03 1.134542e+03     1263.152     2430.191    10 a   
#        base_32k    38045.080    38618.383 3.976884e+04 3.962228e+04    40399.740    42825.633    10 a   
#        base_32M 35065417.492 35143502.958 3.565601e+07 3.534793e+07 35802258.435 37015121.086    10    d
#        dplyr_32     2211.131     2292.499 1.211404e+04 2.370046e+03     2656.419    99510.280    10 a   
#       dplyr_32k     3796.442     4033.207 4.434725e+03 4.159054e+03     4857.402     5514.646    10 a   
#       dplyr_32M  1536183.034  1541187.073 1.580769e+06 1.565711e+06  1600732.034  1733709.195    10  b  
#   data.table_32      403.163      413.253 5.156662e+02 5.197515e+02      619.093      628.430    10 a   
#  data.table_32k     2208.477     2374.454 2.494886e+03 2.448170e+03     2557.604     3085.508    10 a   
#  data.table_32M  2011155.330  2033037.689 2.074020e+06 2.052079e+06  2078231.776  2189809.835    10   c 
```

阴谋：

```
as_tibble(bench) %>% 
  group_by(expr) %>% 
  summarise(time = median(time)) %>% 
  separate(expr, c("framework", "nrow"), "_", remove = FALSE) %>% 
  mutate(nrow = recode(nrow, "32" = 32, "32k" = 32e3, "32M" = 32e6),
         time = time / 1e3) %>% 
  ggplot(aes(nrow, time, col = framework)) +
  geom_line() +
  scale_x_log10() +
  scale_y_log10() + ylab("microseconds") 
```

[![聚合-VS-dplyr-VS-数据表](../Images/09afbff4bd8da2925c47f1042d2be335.png)](https://i.stack.imgur.com/njfBQ.png)

会话信息：

```
sessionInfo()
# R version 3.4.1 (2017-06-30)
# Platform: x86_64-pc-linux-gnu (64-bit)
# Running under: Linux Mint 18
# 
# Matrix products: default
# BLAS: /usr/lib/atlas-base/atlas/libblas.so.3.0
# LAPACK: /usr/lib/atlas-base/atlas/liblapack.so.3.0
# 
# locale:
# [1] LC_CTYPE=fr_FR.UTF-8       LC_NUMERIC=C               LC_TIME=fr_FR.UTF-8       
# [4] LC_COLLATE=fr_FR.UTF-8     LC_MONETARY=fr_FR.UTF-8    LC_MESSAGES=fr_FR.UTF-8   
# [7] LC_PAPER=fr_FR.UTF-8       LC_NAME=C                  LC_ADDRESS=C              
# [10] LC_TELEPHONE=C             LC_MEASUREMENT=fr_FR.UTF-8 LC_IDENTIFICATION=C       
# 
# attached base packages:
# [1] stats     graphics  grDevices utils     datasets  methods   base     
# 
# other attached packages:
# [1] ggplot2_2.2.1          tidyr_0.6.3            bindrcpp_0.2           stringr_1.2.0         
# [5] microbenchmark_1.4-2.1 data.table_1.10.4      dplyr_0.7.1           
# 
# loaded via a namespace (and not attached):
# [1] Rcpp_0.12.11     compiler_3.4.1   plyr_1.8.4       bindr_0.1        tools_3.4.1      digest_0.6.12   
# [7] tibble_1.3.3     gtable_0.2.0     lattice_0.20-35  pkgconfig_2.0.1  rlang_0.1.1      Matrix_1.2-10   
# [13] mvtnorm_1.0-6    grid_3.4.1       glue_1.1.1       R6_2.2.2         survival_2.41-3  multcomp_1.4-6  
# [19] TH.data_1.0-8    magrittr_1.5     scales_0.4.1     codetools_0.2-15 splines_3.4.1    MASS_7.3-47     
# [25] assertthat_0.2.0 colorspace_1.3-2 labeling_0.3     sandwich_2.3-4   stringi_1.1.5    lazyeval_0.2.0  
# [31] munsell_0.4.3    zoo_1.8-0 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2017-05-03T17:59:36.883

这是一个解决方案`sqldf`

```
library("sqldf")

myvec <- read.table(header=TRUE, text=
"   name order_no
1    Amy       12
2   Jack       14
3   Jack       16
4   Dave       11
5    Amy       12
6   Jack       16
7    Tom       19
8  Larry       22
9    Tom       19
10  Dave       11
11  Jack       17
12   Tom       20
13   Amy       23
14  Jack       16")
sqldf("SELECT name,COUNT(distinct(order_no)) as number_of_distinct_orders FROM myvec GROUP BY name")
# > sqldf("SELECT name,COUNT(distinct(order_no)) as number_of_distinct_orders FROM myvec GROUP BY name")
#    name number_of_distinct_orders
# 1   Amy                         2
# 2  Dave                         1
# 3  Jack                         3
# 4 Larry                         1
# 5   Tom                         2 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2012-10-11T20:42:37.830

`tapply`您可以使用内置的 R 函数`length`

```
tapply(myvec$order_no, myvec$name, FUN = function(x) length(unique(x))) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-10-11T13:28:44.683

This would also work but is less eloquent than the plyr solution:

```
x <- sapply(split(myvec, myvec$name),  function(x) length(unique(x[, 2]))) 
data.frame(names=names(x), number_of_distinct_orders=x, row.names = NULL) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-07-17T20:06:48.667

```
my.1 <- table(myvec)

my.1[my.1 != 0] <- 1

rowSums(my.1) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-03-16T22:06:54.020

使用`fNdistinct`来自`collapse`

```
library(collapse)
library(magrittr)
myvec %>%
     fgroup_by(name) %>%
     fsummarise(number_of_distinct_orders = fNdistinct(order_no))
#   name number_of_distinct_orders
#1   Amy                         2
#2  Dave                         1
#3  Jack                         3
#4 Larry                         1
#5   Tom                         2 
```

### 数据

```
myvec <- structure(list(name = c("Amy", "Jack", "Jack", "Dave", "Amy", 
"Jack", "Tom", "Larry", "Tom", "Dave", "Jack", "Tom", "Amy", 
"Jack"), order_no = c(12L, 14L, 16L, 11L, 12L, 16L, 19L, 22L, 
19L, 11L, 17L, 20L, 23L, 16L)), class = "data.frame", row.names = c("1", 
"2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", 
"14")) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-11T06:19:01.173

几年前..虽然有类似的要求并最终编写了我自己的解决方案。在这里申请：

```
 x<-data.frame(

 "Name"=c("Amy","Jack","Jack","Dave","Amy","Jack","Tom","Larry","Tom","Dave","Jack","Tom","Amy","Jack"),
 "OrderNo"=c(12,14,16,11,12,16,19,22,19,11,17,20,23,16)
)

table(sub("~.*","",unique(paste(x$Name,x$OrderNo,sep="~",collapse=NULL)))) 
```

```
 Amy  Dave  Jack Larry   Tom
    2     1     3     1     2 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-07-04T12:50:20.613

使用`table`：

```
library(magrittr)
myvec %>% unique %>% '['(1) %>% table %>% as.data.frame %>%
  setNames(c("name","number_of_distinct_orders"))

#    name number_of_distinct_orders
# 1   Amy                         2
# 2  Dave                         1
# 3  Jack                         3
# 4 Larry                         1
# 5   Tom                         2 
```

# google-maps - 不带标记的集群地图图标

> ID：12840298
> 
> 赞同：1
> 
> 时间：2012-10-11T13:09:02.230
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我有兴趣使用“类似于”谷歌地图的聚类功能的功能来显示按美国每个州分组的项目数量。与我见过的任何示例有点不同的是，我实际上不想让单个标记只是计数 - 以及当用户单击计数以打开链接时。聚类 api 是要走的路还是只是创建自定义标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T21:23:11.687

您可以使用[styledmarker library](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/styledmarker/docs/examples.html)自定义标记。该库用于创建可以以不同方式设置样式的标记，例如更改颜色或形状，或添加文本标签。下面是一个如何使用这个库的例子。

```
var styleMaker1 = new StyledMarker({styleIcon:new StyledIcon(StyledIconTypes.MARKER,{color:"00ff00",text:"A"}),position:myLatLng,map:map}); 
```

在您的情况下`text:"A"`将替换为`text:count`

我有一个使用这个的[演示](http://daviestrachan.co.uk/test/viewmarkers.html)和一个包含 2 个表状态中心和美国城市的数据库。标记显示城​​市的州和数量。

# android - 选择文本并单击“网页搜索”会使应用程序崩溃

> ID：12840299
> 
> 赞同：-1
> 
> 时间：2012-10-11T13:09:01.880
> 
> 标签：android, android-webview, applicationcontext

我正在尝试跨活动重用 webview。这是我正在做的一个示例。

有两个活动，`Main`和`Secondary`。

在 Main 的 onResume() 中，我创建了一个 webview 对象，并将其保存在我的应用程序上下文中。

```
 WebView wv = new WebView(getApplicationContext());
    wv.getSettings().setJavaScriptEnabled(true);
    wv.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);
    wv.setWebViewClient(new WebViewClient() {

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            return true;
        }

        @Override
        public void onPageFinished(WebView view, String url) {
            Log.e("test", "onPageFinished");
            ((WebViewReuseApplication) getApplicationContext()).setCachedWebView(view);
        }
    });
    wv.loadUrl("http://www.someurl.com/path/to/somewhere"); 
```

然后按一下按钮`Main`，我带他去 Activity `Secondary`。在这里，我从我的`Application`对象中获取已经加载的 webview 并将其附加到`ViewGroup`.

在- `onCreate()`_`Secondary`

```
 WebView cachedWebView = ((WebViewReuseApplication) getApplicationContext()).getCachedWebView();

    ((LinearLayout) findViewById(R.id.webview_holder)).addView(cachedWebView, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT)); 
```

我这样做是因为 WebViews 在 Android 中非常慢，我真的希望它在`Secondary`Activity 中被预加载。

虽然这工作得很好，但这里有一个问题。当它处于辅助活动中时，如果我长按特定文本进行选择，然后单击网页搜索，我的应用程序就会崩溃。有没有办法解决这个问题？我真的很想要这个预加载的东西，出于同样的原因，我不能用活动上下文初始化 WebView。

![在此处输入图像描述](../Images/a3fa5043ede556afc7bb4dda38310f64.png)

更新 -

这是我得到的 logcat 输出 -

```
10-11 18:41:09.318: E/AndroidRuntime(3359): FATAL EXCEPTION: main
10-11 18:41:09.318: E/AndroidRuntime(3359): android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
10-11 18:41:09.318: E/AndroidRuntime(3359):     at android.app.ContextImpl.startActivity(ContextImpl.java:922)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at android.content.ContextWrapper.startActivity(ContextWrapper.java:283)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at android.webkit.SelectActionModeCallback.onActionItemClicked(SelectActionModeCallback.java:139)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at com.android.internal.policy.impl.PhoneWindow$DecorView$ActionModeCallbackWrapper.onActionItemClicked(PhoneWindow.java:2651)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at com.android.internal.app.ActionBarImpl$ActionModeImpl.onMenuItemSelected(ActionBarImpl.java:757)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at com.android.internal.view.menu.MenuPopupHelper.onItemClick(MenuPopupHelper.java:156)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at android.widget.AdapterView.performItemClick(AdapterView.java:292)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at android.widget.AbsListView.performItemClick(AbsListView.java:1182)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2710)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at android.widget.AbsListView$1.run(AbsListView.java:3465)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at android.os.Handler.handleCallback(Handler.java:605)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at android.os.Looper.loop(Looper.java:137)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at android.app.ActivityThread.main(ActivityThread.java:4511)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at java.lang.reflect.Method.invokeNative(Native Method)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at java.lang.reflect.Method.invoke(Method.java:511)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:986)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:753)
10-11 18:41:09.318: E/AndroidRuntime(3359):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:18:26.140

我认为您需要将下面提到的标志添加到您调用 WebView 活动的 Intent 中，

```
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

或者至少这是 logcat 错误报告所暗示的，

```
Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. 
```

所以我相信这就是你应该为较低的android版本做的事情。

如果上述解决方案不起作用，则将所有 applcationContext 替换为您的 Activity 上下文，如下所示，

代替，

```
 WebView wv = new WebView(getApplicationContext()); 
```

尝试

```
WebView wv = new WebView(activity.this); 
```

不仅在这里，而且在您可以使用**getApplicationContext()的所有地方**

# c++ - 用于用户输入的单个字符的验证器

> ID：12840301
> 
> 赞同：1
> 
> 时间：2012-10-11T13:09:06.357
> 
> 标签：c++, user-input, validation

![在此处输入图像描述](../Images/64e017c0fd7ddb18aae8c98351a1a6b2.png)我需要限制用户在输入字符时输入整数和字符串。我有一个整数方法，我只需要将它调整为一个字符。谁能帮我这个。

```
char getChar()
    {
        char myChar;
        std::cout << "Enter a single char: ";
        while (!(std::cin >> myChar))
        {
            // reset the status of the stream
            std::cin.clear();
            // ignore remaining characters in the stream
            std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
           // ^^^  This line needs to be changed.
            std::cout << 

           "Enter an *CHAR*: ";
    }
    std::cout << "You entered: " << myChar << std::endl;
    return myChar;
}

char getChar()
{
    char myChar;
    std::cout << "Enter an Char: ";
    while (!(cin >> myChar))
    {
        // reset the status of the stream
        cin.clear();
        // ignore remaining characters in the stream
        cin.ignore(std::numeric_limits<char>::max() << '\n');
        cout << "Enter an *CHAR*: ";
    }
    std::cout << "You entered: " << myChar << std::endl;
    return myChar;
} 
```

我已经尝试过了，没有错误。但它不会工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T13:16:07.717

我猜“不起作用”是指即使您输入更长的字符串或数字，它仍然被接受。这是因为通过运算符输入的所有字母和数字`<<`仍然是单个字符。

如果您不想要非字母字符，则必须添加另一个检查：

```
while (!(std::cin >> myChar) || !std::isalpha(mychar)) 
```

有关. [_](http://en.cppreference.com/w/cpp/string/byte/isalpha) _`std::isalpha`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:04:10.517

我将方法更改为：

```
char getChar(string q)
{
char input;
do
{
cout << q.c_str() << endl;
cin >> input;
}
while(!isalpha(input));
return input;
} 
```

在我的主要我有：

string input = "你的性别男/女是什么？"; 字符性 = getChar(输入); cout << 性别 <<"\n";

这样做，我不允许输入数字文问什么是性别。

# solr - Solr - 具有多个值的嵌套实体

> ID：12840302
> 
> 赞同：4
> 
> 时间：2012-10-11T13:09:09.640
> 
> 标签：solr

再一次.. 我有 2 个表“博客”和“评论”。一个博客可以包含 n 条评论（博客 --1:n-- 评论）。最新我使用以下选择将数据插入到 solr 索引中：

```
 <entity name="blog" dataSource="mssqlDatasource" pk="id"
        transformer="ClobTransformer"
        query="SELECT b.id, b.market, b.title AS blogTitle, b.message AS            
                blogMessage, c.message AS commentMessage, c.secondColumn 
                FROM blog b LEFT JOIN comment c ON b.id = c.source_id
                AND c.source_type = 'blog'">
        <field column="blogMessage" name="blogMessage" clob="true" />
        <field column="commentMessage" name="commentMessage" clob="true" />
    </entity> 
```

索引结果如下所示：

```
 <doc>
     <str name="id">1</str>
     <str name="market">12</str>
     <str name="title">blog of title 1</str>
     <str name="blogMessage">message of blog 1</str>
     <str name="commentMessage">message of comment</str>
     <str name="scondColumn">Im the second column from comment</str>
    </doc>

    <doc>
     <str name="id">1</str>
     <str name="market">12</str>
     <str name="title">blog of title 1</str>
     <str name="blogMessage">message of blog 1</str>
     <str name="commentMessage">message of comment - Im the second comment</str>
     <str name="scondColumn">Im the second column from comment</str>       
    </doc> 
```

我会说这很愚蠢，因为我在同一个博客中获得了太多索引数据，只是评论不同。是否可以将“评论”设置为“子实体”，如下所示：

```
 <entity name="blog" dataSource="mssqlDatasource" pk="id"
        transformer="ClobTransformer"
        query="SELECT b.id, b.market, b.title AS blogTitle, b.message AS            
                blogMessage
                FROM blog b">
         <field column="blogMessage" name="blogMessage" clob="true" />

          <entity name="comment" dataSource="mssqlDatasource" pk="id"
             transformer="ClobTransformer"
             query="SELECT c.message as commentMessage, c.secondColumn
                FROM comment c
                WHERE c.source_id = ${blog.id}">
            <field column="commentMessage" name="commentMessage" clob="true" />              
          </entity>
    </entity> 
```

那可能吗？结果如何（直到星期一才能测试）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-17T18:45:29.110

你快到了，如果你想为每个博客文档填写一个多值评论字段，你需要[CachedSqlEntityProcessor](http://wiki.apache.org/solr/DataImportHandler#CachedSqlEntityProcessor)

我的看起来很像这样（我省略了 clob 变压器位，但你显然需要它们）

```
<entity name="blog" 
        query="SELECT b.id, 
                      b.market, 
                      b.title AS blogTitle, 
                      b.message AS            
               blogMessage
               FROM blog b">
    <entity name="blog_comment" 
            query="SELECT c.message as commentMessage, 
                          c.secondColumn,
                          c.blog_id
            FROM comment c" 
     processor="CachedSqlEntityProcessor"  
     where="blog_id=blog.id"/>    
<entity> 
```

文档应如下所示：

```
<doc>
   <str name="id">1</str>
   <str name="market">12</str>
   <str name="title">blog of title 1</str>
   <str name="blogMessage">message of blog 1</str>
   <arr name="commentMessage">
       <str>message of comment</str>
       <str>message of comment - Im the second comment</str>
   </arr>
   <arr name="secondColumn">
       <str>Im the second column from comment</str>
       <str>Im the second column from comment</str>
   </arr>
</doc> 
```

如果您想避免重复值，您可能想要执行多个嵌套实体，一个查询每一列的实体。

# c# - 更改输出路径时出现“无法加载类型 XXX”错误

> ID：12840303
> 
> 赞同：1
> 
> 时间：2012-10-11T13:09:10.713
> 
> 标签：c#, visual-studio-2010

VS 2010 中的默认输出路径在“Bin/”中，这很好用。但是，我将其更改为“Bin/Debug”和“Bin/Release”，现在我的母版页上出现“无法加载类型”错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:06:33.667

您提到了母版页，这是 ASP.NET 的一个功能。

如果您使用的是 ASP.NET，那么您需要将输出路径设为 Bin/，否则 IIS 将不知道在哪里查找您的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:30:28.677

检查您的 .exe 结束的位置。您是否缺少任何 .dll 文件？

如果您的 dll 没有被复制，请右键单击解决方案资源管理器中的引用并点击属性，并确保“复制本地”设置为 true。

如果它们是依赖项的依赖项（即它们没有被您的应用程序直接使用，但您正在使用的依赖项需要它），您可能必须使用构建后事件或其他方式将其复制过来。

# python-3.x - 用于 Python 3 的 Gnuplot

> ID：12840306
> 
> 赞同：0
> 
> 时间：2012-10-11T13:09:19.310
> 
> 标签：python-3.x, gnuplot

我对 python 3.2.3 和 Gnuplot 有疑问。我已经安装了 gnuplot-4.6.1，默认演示运行良好，但是当我想在 python 环境中导入模块时出现错误。

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: No module named Gnuplot 
```

我不知道python3有什么问题

ps：在gnuplot-4.6.1之前，我有gnuplot1.8，我用它来绘图

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T13:11:38.227

我假设您需要`Gnuplot-py`为您的 python 版本安装。

由于`Gnuplot-py`这些天似乎没有得到积极的支持，我不确定它是否可以在 python3.x 上运行（你需要尝试一下）。

另一种选择是`pyGnuplot`我开发的，我的目标是保持它与 py3k 兼容（尽管我不经常测试）。但是，它并不是 Gnuplot-py 的替代品，因此您需要更改代码才能使用它。

最后，（可能是当今最流行的选项）是`matplotlib`. 我的印象是它提供了一个界面，旨在让熟悉 MATLAB 的人更加舒适，而且功能非常强大。我知道很多人对此非常满意。

# javascript - 在滚动上相互独立地移动 2 个不同高度的 div

> ID：12840307
> 
> 赞同：2
> 
> 时间：2012-10-11T13:09:22.663
> 
> 标签：javascript, jquery, html, css, jquery-mobile

假设我有 2 个 div，一个用于菜单（左 div），另一个（右 div）用于内容。内容是包含许多列表项的列表视图。（向下滚动时生成）左侧菜单也是一个列表视图，具有灵活的列表项数量（可能需要也可能不需要滚动）我希望在不移动页面的情况下在左侧 div 上滚动（或者说右侧 div 不应该移动)

例如 facbook 移动设置——单击显示一个左侧菜单，该菜单可以在不滚动页面的情况下滚动。

我希望我已经足够清楚了。

我正在使用 jquery 移动弹出窗口并将其定位到页面的左边缘和上边缘。将第二个（右 div）向右滑动左 div 的宽度。触摸右 div 使左 div 消失并将其滑回（左 0 px）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:11:25.143

为什么不固定左侧 div 的高度并设置`overflow:scroll`可以滚动的 css 属性？这不会滚动整个页面。

**编辑** 可供您使用的其他选项

`overflow:auto`仅当有内容时才会生成滚动条，Stackoverflow 朋友的好消息

`overflow-y`如果你只想垂直滚动

`overflow-x`如果你只想水平滚动

# java - 带有intelliJ的opencsv

> ID：12840310
> 
> 赞同：1
> 
> 时间：2012-10-11T13:09:34.927
> 
> 标签：java, csv, jar, intellij-idea, opencsv

我在我的项目`lib`目录下添加了opencsv的jar。
然后，在intelliJ下`Project Structure`->`Libraries`添加了jar。

但是，不知何故，intelliJ 无法识别它。
这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T13:28:55.283

Don't go this way, create a maven project and it will solve many problems you haven't encountered yet :).

1.  Open up you intelliJ Idea
2.  select 'File' -> 'New Project' 'Create project from scratch' -> 'Next'
3.  Enter the project title, select 'Maven Module' -> 'Next'
4.  Click 'Finish' Replace the generated pom.xml with the following:

    http://maven.apache.org/xsd/maven-4.0.0.xsd"> 4.0.0

    ```
    <groupId>opencsvtst</groupId>
    <artifactId>opencsvtst</artifactId>
    <version>1.0</version>

    <dependencies>
        <dependency>
            <groupId>net.sf.opencsv</groupId>
            <artifactId>opencsv</artifactId>
            <version>2.0</version>
        </dependency>
    </dependencies> 
    ```

5.  Under src/main/java add your classes (the one with the main method probably) and use the opencsv library.

You will find the compiled jar within the target folder once you build the project.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T10:51:24.663

**“**项目结构”对话框中的****库**表示可以配置一次然后在多个项目和模块中使用的全局库。要使库可用于模块，请将其添加到[模块依赖](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)项中。**

# c# - 如何在 Windows 8 SecondaryTile 上显示文本？

> ID：12840314
> 
> 赞同：0
> 
> 时间：2012-10-11T13:09:44.473
> 
> 标签：c#, windows, windows-8, microsoft-metro

我想创建一个应显示一些文本而不是徽标的 SecondaryTile。我该怎么做？

我尝试将 SecondaryTile 对象的 displayName 设置为文本，但将文本显示为辅助磁贴的名称。我不想要那个。**我希望我的整个文本都显示在辅助磁贴上而没有任何徽标**。

C# 代码将不胜感激...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:30:59.483

要在辅助磁贴上提供大文本，您可以执行以下两项操作之一：

1.  在为辅助磁贴提供的图像中嵌入文本
2.  使用磁贴通知更新磁贴

平铺通知可能是更好的选择。通过[磁贴通知](http://msdn.microsoft.com/en-us/library/windows/apps/hh465439.aspx)，您的磁贴可以使用[磁贴可视模板](http://msdn.microsoft.com/en-us/library/windows/apps/hh761491.aspx)之一进行更新。

可以使用`CreateTileUpdaterForSecondaryTile`API 将磁贴通知发送到辅助磁贴（代替[磁贴示例](http://code.msdn.microsoft.com/windowsapps/App-tiles-and-badges-sample-5fc49148)`CreateTileUpdaterForApplication`中显示的）。

# android - 屏幕中的 Android 更改控件

> ID：12840320
> 
> 赞同：0
> 
> 时间：2012-10-11T13:10:00.087
> 
> 标签：android, user-interface, interface

我开发了一个程序，但我需要根据用户输入更改界面。

现在，我制作了类似数字选择器的东西，带有 + 和 - 按钮，但问题是，有些用户需要输入小数。为此，我想用一个简单的文本框更改数字选择器

我希望程序能够在此处显示的 2 个屏幕之间来回切换，只需单击一个按钮，而无需使用不同的活动或 xml 文件。除了用户选择的数字外，其他所有内容都是相同的。如果文本框下的东西没有留在同一个地方而是跳起来，（因为文本字段填充较少）没关系。

![在此处输入图像描述](../Images/d54afdb71829cf3422d81dce9905ec83.png)

你会如何建议这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:14:07.810

你必须玩弄你的观点的可见性。将数字选择器和 EditText 添加到相同的布局中，并在按钮单击侦听器中在它们的可见性之间切换，例如，

```
 button.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            if(nNumberPicker.getVisibility()==View.VISIBLE)
            {
            nNumberPicker.setVisibility(View.GONE);
            editText.setVisibility(View.VISIBLE);   
            }
            else
             {
             nNumberPicker.setVisibility(View.VISIBLE);
            editText.setVisibility(View.GONE);
             }

        }
    }); 
```

同样根据您的需要更改可见性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:18:31.907

这里有一个例子

```
    按钮 plus1 = (Button)findViewById(R.id.plus1);
    plus1.setVisibility(View.INVISIBLE); //不可见，但仍然占用布局空间
    //或者
    plus1.setVisibility(View.GONE); //不可见，不占用布局空间
    //或者
    plus1.setVisibility(View.VISIBLE); //可见的

```

# c# - 成功注册 COM DLL - 一个可访问，一个不可访问

> ID：12840329
> 
> 赞同：1
> 
> 时间：2012-10-11T13:10:26.217
> 
> 标签：c#, .net, dll, com, dispatcher

我们有 2 个 COM DLL，它们的构建方式与 .NET 3.0 相同 - 一个从数据库获取数据 - 一个从 Web 服务获取数据

我们一直使用 RegAsm.exe 使用以下命令注册 DLL：

`cd "C:\Program Files\Dispatcher\COM\Custom" C:\Windows\Microsoft.NET\Framework\v2.0.50727\RegAsm.exe MercatorRepositoryCOM.dll /tlb:MercatorRepositoryCOM.tlb /codebase C:\Windows\Microsoft.NET\Framework\v2.0.50727\RegAsm.exe MercatorUtilitiesCOM.dll /tlb:MercatorUtilitiesCOM.tlb /codebase`

这适用于我们的大多数服务器（Win2008R2 32b）

在我们最新的服务器上，输出显示：注册成功。但是，应用程序可以访问 MercatorUtilitiesCOM.dll，但不能访问 MercatorRepositoryCOM.dll。

我们尝试使用 RegAsm、regsvr32、regtlibv12 注册 DLL，甚至将它们添加到 GAC。没有任何效果。

有什么办法比“(10092) ActiveX 自动化：服务器无法创建对象。”更好地解决这个问题？有没有其他方法可以尝试注册这些 DLL？

我们尝试将日志记录添加到 DLL 代码中，但从未写入日志，因此我们可以假设 DLL 甚至没有被调用。

PS：我们别无选择，只能将这些作为 COM DLL 公开，因为我们有一个基于 VB6 的扫描/索引应用程序需要引用这些。它是 Dispatcher（对于那些可能知道它的人）。

**更新**：经过进一步调查，看起来 DLL 可能已经正确注册。当我们取消注册它时，我们会收到一条明确的消息，即 Dispatcher 找不到 DLL 引用。当我们注册它时，Dispatcher 打开，然后抛出 ActiveX 自动化错误。因此，似乎 DLL 已正确注册，但由于某种原因，它无法在 DLL 中实例化我的类。

**解决方案**：这个问题毕竟与 DLL 注册无关。显然，启动 Dispatcher 的应用程序发生了一些内部变化。它曾经将其作为子进程生成，因此它可以使用相同的 app.config，但他们将其更改为作为单独的进程运行（它是自己的可执行文件）。这意味着它无法在 app.config 中找到我们的配置和端点。我们为新的可执行文件创建了一个单独的 app.config 并且它可以工作。感谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T13:28:21.253

正如@WhozCraig 建议的那样，您可能还有其他一些与 COM 注册无关的问题。这发生在一个全新的测试服务器上的事实强烈地证明了您忘记安装的其他一些依赖项，它被失败的组件使用，而不是另一个。我会比较两者之间的程序集引用并检查您看到的任何差异。

另一个简单的测试是使用[depends.exe](http://www.dependencywalker.com/)或直接调用[LoadLibrary](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)将您的dll 加载到新的测试服务器上。由于它是托管程序集，因此可能不会产生任何结果，但很容易尝试。

接下来，您可能想尝试在测试服务器上运行[程序集绑定日志查看器](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.90%29.aspx)(fuslogvw.exe)，以查看程序集是否尝试引用其他程序集并失败。基本方法是运行查看器，单击设置并切换到“将失败记录到磁盘”，并可选择清除任何现有日志。现在运行加载 COM 对象失败的程序，重现失败，并在日志查看器中刷新列表。如果您看到一个新条目，那可能是罪魁祸首。

我经常用于诊断这些错误的最后一个也是最强大的工具是[procmon](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)，当您的应用程序尝试加载不工作的 COM DLL 时，您将在测试服务器上运行它。这将向您显示测试服务器上的程序正在执行的所有文件、注册表和网络访问，因此我可能会使用过滤来仅显示加载 DLL 的程序的输出。通常，您要查找的是由于文件未找到或访问被拒绝而失败的文件或注册表访问。您可能会看到很多实际上不是问题的 File Not Found 错误，但请密切注意在应用程序报告错误之前出现的最后一个错误。

程序集本身也可能有问题，例如：

*   实现类是非公开的或不是[ComVisible](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comvisibleattribute%28v=vs.85%29.aspx)
*   实现类没有公共默认构造函数
*   程序集中的静态构造函数引发异常
*   实现类的实例构造函数抛出异常

我认为前两个不是这里的问题，但也许你的班级正试图访问测试服务器上的某些资源并且失败了？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:20:15.690

毕竟这个问题与 DLL 注册无关。显然，启动 Dispatcher 的应用程序发生了一些内部变化。它曾经将其作为子进程生成，因此它可以使用相同的 app.config，但他们将其更改为作为单独的进程（它自己的可执行文件）运行。这意味着它无法在 app.config 中找到我们的配置和端点。我们为新的可执行文件创建了一个单独的 app.config 并且它可以工作。

# ios - 自动布局以保持视图大小成比例

> ID：12840332
> 
> 赞同：49
> 
> 时间：2012-10-11T13:10:39.823
> 
> 标签：ios, interface-builder, ios6, autolayout, nslayoutconstraint

我正在努力实现以下目标：

*   我的 xib 中有 2 个视图需要保持 20 像素的边缘（两侧和顶部）
*   需要调整大小的 2 个视图大小不同
*   它们必须相距 20 像素
*   它们的宽度需要保持相对于父视图的宽度

我阅读了一个关于这样做的教程并且它有效，但它的问题是它要求两个视图具有相同的宽度和 pin `Widths equally`，这是我不想要的。

这是我尝试过的：

*   向左视图添加前导空间约束为 20 像素
*   向左视图添加顶部空间约束为 20 像素
*   将顶部空间约束添加到右视图为 20 像素
*   为右视图添加拖尾空间约束为 20 像素
*   向两个视图添加水平间距约束为 20 像素

我遇到的问题是左视图没有调整大小，而右视图填充了空间以保持 20 像素的水平空间。

有没有办法让两个视图按比例调整它们应该填充的空间？

这是我的布局和约束的屏幕截图：

![xib 布局](../Images/9a690ab169ee34ca4c1228b31ffe4157.png)![约束定义](../Images/2fb4e1bcedb08be7a725347f5f8b3ede.png)

谢谢！

**编辑**

尝试旋转设备时收到以下警告：

```
2012-10-11 08:59:00.435 AutolayoutTest[35672:c07] Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want.
    Try this: (1) look at each constraint and try to figure out which you don't expect;
    (2) find the code that added the unwanted constraint or constraints and fix it. (Note:  
    If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSLayoutConstraint:0x8a6b2b0 H:[UIView:0x8a6b1d0(170)]>",
    "<NSLayoutConstraint:0x8a68ad0 H:[UIView:0x8a69430(90)]>",
    "<NSLayoutConstraint:0x8a6ba40 H:[UIView:0x8a69430]-(20)-[UIView:0x8a6b1d0]>",
    "<NSLayoutConstraint:0x8a6ba00 H:[UIView:0x8a6b1d0]-(20)-|   (Names: '|':UIView:0x8a6b7e0 )>",
    "<NSLayoutConstraint:0x8a6b940 H:|-(20)-[UIView:0x8a69430]   (Names: '|':UIView:0x8a6b7e0 )>",
    "<NSAutoresizingMaskLayoutConstraint:0x7199aa0 h=--& v=--& V:[UIView:0x8a6b7e0(568)]>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x8a6b2b0 H:[UIView:0x8a6b1d0(170)]> 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2014-10-15T12:44:13.113

我可能迟到了一个解决方案，但这实际上可以在**IB中****很容易地**完成。

 **首先，添加一个**UIView**并固定到 superview 的所有四个边缘。

然后，添加您的**第一个子视图**并相应地定位它（例如：x = 0，y = 0，高度 = 固定高度，宽度 = 您希望相对于我们固定到所有四个边缘的**UIView的宽度）。**

选择**UIView**和**第一个子视图**并添加一个**等宽**约束。当然，这会在自动布局中向您显示定位错误，但这没关系，因为这（还）不是您想要的。

**现在技巧来了：**选择*Equal Widths*约束并将*乘数*编辑为您想要的比率（例如：如果您希望第一个子视图为 UIView 的 1/4，则为 1:4）。对第二个子视图和 Tadaaaaaa 重复步骤！

![在此处输入图像描述](../Images/387a053d455f9c9e6792619d9ae33c32.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-24T11:58:03.727

我是自动布局的新手，但遇到了您的问题，并认为这将是一个很好的挑战。（这是我的警告，以防这不是理想的解决方案！）

您需要在代码中添加宽度约束。我通过首先在没有宽度限制的 NIB 中添加两个视图来实现这一点。这些是第一个（左）视图的约束：

![在此处输入图像描述](../Images/b2351c63e4cace9dc0bd704e1f8a2dbb.png)

这些是我对第二个（右）视图的限制：

![在此处输入图像描述](../Images/60483996b09795fd57be825b509edf8c.png)

这会在第二个视图上留下您不想要的额外约束 - 超级视图和第二个视图之间的前导空间，如下所示：

![在此处输入图像描述](../Images/6b3570ad56a2f66bdcb0c6d3971afb58.png)

您不能在 IB 中删除该约束，因为它会留下不明确的布局（因为我们在子视图上没有宽度）。但是，您可以在代码中将其删除。首先，为其设置一个出口并在IB中连接它：

```
@property (nonatomic, strong) IBOutlet NSLayoutConstraint *view2superviewLeadingConstraint; 
```

然后，在您的视图控制器中`viewDidLoad`，您可以使用以下方法将其删除：

```
[self.view removeConstraint:self.view2superviewLeadingConstraint]; 
```

最后，添加宽度约束。这里的关键是 multiplier 参数，用于指示您希望宽度基于超级视图宽度的百分比。另请注意，您必须将常量参数设置为等于 IB 中设置的前导/尾随总计：

```
NSLayoutConstraint *constraint1 = [NSLayoutConstraint constraintWithItem:self.view1 attribute:NSLayoutAttributeWidth relatedBy:NSLayoutRelationEqual toItem:self.view attribute:NSLayoutAttributeWidth multiplier:0.3 constant:-20];
[self.view addConstraint:constraint1];

NSLayoutConstraint *constraint2 = [NSLayoutConstraint constraintWithItem:self.view2 attribute:NSLayoutAttributeWidth relatedBy:NSLayoutRelationEqual toItem:self.view attribute:NSLayoutAttributeWidth multiplier:0.7 constant:-40];
[self.view addConstraint:constraint2]; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-06-18T07:36:43.977

这可以通过添加一个虚拟视图（**dummyView**）来解决，其约束设置为固定宽度、高度并与 Superview 的 centerX 对齐。然后将左视图和右视图水平间距约束添加到**dummyView**。

![在此处输入图像描述](../Images/efb816584ae4f64a82d4185225782f54.png) ![在此处输入图像描述](../Images/c37eeacd151cd8fa93650c7418b72dc8.png)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-10-23T13:38:56.323

只需选择纵横比：

![在此处输入图像描述](../Images/b66d45692d9e8764fd6f6c9d7d1fab6b.png)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-03-01T11:14:21.330

正如其他人所提到的，关键是在“Pin Widths Equally”约束上设置一个乘数，以便视图宽度最终成为彼此的倍数。XCode 5.1 应该添加在 Interface Builder 中设置它的功能，但在那之前，除了在代码中设置它之外，您还有另一个选择。如果您创建“Pin Widths Equally”约束，然后转到右侧 Utilities Panel 中的 Identity Inspector，然后查找“User Defined Runtime Attributes”。添加一个新属性，其键路径为“multiplier”，键入“number”，值等于您想要的比率。

![如上所述，乘数设置为运行时属性。](../Images/7138231bdb95ef9bbbe37759d41edd71.png)

这不会反映在 Interface Builder 中，但会在使用您的视图时应用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-19T21:48:01.233

1.  去掉代码中的两个宽度约束，或者在 IB 中减少它们的优先级，否则你就被过度约束了。
2.  添加一个约束来描述绿色视图和蓝色视图之间的宽度比，在代码中：

    ```
    // Assuming the ratio you want is green_view_width : blue_view_width = 1 : 2
    NSLayoutConstraint *c = [NSLayoutConstraint constraintWithItem:greenView attribute:NSLayoutAttributeWidth relatedBy:NSLayoutRelationEqual toItem:blueView attribute:NSLayoutAttributeWidth multiplier:0.5f constant:0.f];
    [commonSuperview addConstraint:c]; 
    ```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-15T15:52:16.660

现在可以在 XCode 6 中使用宽高比属性

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-07-01T14:12:05.200

在 Interface Builder 中，使用右键拖动视图（稍微显示黑色弹出窗口）。
在弹出菜单中选择`Aspect Ratio`.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-11T14:19:35.730

I'm not sure how familiar you are with auto-layout, so apologies if this is stuff you already know:

When using auto-layout it's possible to assign several constraints to the same property. Under certain circumstances these constraints can contradict each other. This is what's causing the warning you're seeing.

It *looks* from the screen-grab you posted that you've set several constraints to be explicit - for example, your green view on the left has a constraint that says "Width (90)", which means the width *must* be equal to 90 points exactly.

It's unclear from the screenshot alone what your other constraints are mapped to, but what's probably happening here is these explicit constraints are causing problems - you have autoresizing constraints that say the views should expand or contract to fit their available area, but those same views have constraints that require them to be an exact width.

This can be fixed in a number of ways - you can either remove those explicit width constraints on your views, or you can change their priority (by default constraints are 'required', but you can change them to be optional).**

# entity-framework - 当 PK 基于日期时间时重新附加对象

> ID：12840333
> 
> 赞同：0
> 
> 时间：2012-10-11T13:10:43.023
> 
> 标签：entity-framework, entity-framework-4

我的系统首先是数据库，EF 4.3.1。

我有一个表，其中 PK 由两个 int 列和一个日期时间组成。该表是一个“评论”表，用于保留评论。

```
创建表 [dbo].[ArticleComments](
    [ArticleId] [int] 非空，
    [用户 ID] [int] 非空，
    [MessageText] [nvarchar](max) NOT NULL,
    [CreatedAt] [datetime] 非空，
    [外部数据] [bigint] NULL，
    约束 [PK_ArticleComments] 主键集群
    (
       [文章编号] ASC，
       [用户 ID] ASC，
       [创建时间] ASC
    )
)

```

在我的逻辑中，当创建评论时，我将 ArticleComment 对象发送到另一个线程，在该线程中打开另一个上下文以对对象执行其他操作，最终可以在其中保存对象。

问题是，当对象稍后被保存时，它有时会抛出一个没有保存的异常。

我打开探查器查看执行的 SQL`SaveChanges()`

```
exec sp_executesql N'update [dbo].[ArticleComments]
设置 [外部数据] = @0
其中 ((([ArticleId] = @1) 和 ([UserId] = @2)) 和 ([CreatedAt] = @3))
',N'@0 bigint,@1 int,@2 int,@3 datetime2(7)',@0=3243423,@1=6931,@2=2,@3='2012-10-11 11： 23:25.4734801'

```

并发现问题在于 EF 将其映射到 datetime2(7) 以代替常规日期时间，这就是为什么此更新不会更改任何内容并引发异常的原因。

我检查了 EDMX 文件，那里说类型是日期时间，精度为 3。

仅供参考：[此外，日期时间在 SQL Server 中四舍五入](http://msdn.microsoft.com/en-US/library/ms187819%28v=SQL.90%29.aspx)

所以，我发现这篇文章：[Round .NET DateTime milliseconds, so it can fit SQL Server milliseconds](https://stackoverflow.com/questions/2872444/round-net-datetime-milliseconds-so-it-can-fit-sql-server-milliseconds) 这显示了将 .net 时间四舍五入到 SQL 时间的好方法。我认为在Microsoft® SQL Server® 2012的[Microsoft® System CLR Types](http://www.microsoft.com/en-us/download/details.aspx?id=29065)~~框架~~ 中有一个类可以做同样的事情。`System.Data.SqlTypes``SqlDateTime`

所以我的代码看起来像这样（使用刚刚链接的 SO 答案的扩展名）：

```
破解时间 --> message.CreatedAt = message.CreatedAt.RoundToSqlServerDateTime();
                    db.ArticleComments.Attach(消息);
                    message.ExternalData = someNumber;
                    db.SaveChanges();

```

它有效。

**但所有这些都是技巧，而不是解决方案。为什么 EF 在这里失败，我做错了什么？**

# python - Django mod_python 日志记录问题

> ID：12840340
> 
> 赞同：0
> 
> 时间：2012-10-11T13:11:17.533
> 
> 标签：python, django, logging, mod-python

我正在尝试在 Django 中调试我的视图文件。我在服务器上使用带有 mod_python 的 Django 1.3。

我怎样才能从我的视图文件中看到一些。我已经尝试使用标准日志配置

```
LOGGING = {
'version': 1,
'disable_existing_loggers': True,
'formatters': {
    'standard': {
        'format' : "[%(asctime)s] %(levelname)s [%(name)s:%(lineno)s] %(message)s",
        'datefmt' : "%d/%b/%Y %H:%M:%S"
    },
},
'handlers': {
    'null': {
        'level':'DEBUG',
        'class':'django.utils.log.NullHandler',
    },
    'logfile': {
        'level':'DEBUG',
        'class':'logging.handlers.RotatingFileHandler',
        'filename': SITE_ROOT + "/logfile",
        'maxBytes': 50000,
        'backupCount': 2,
        'formatter': 'standard',
    },
    'console':{
        'level':'INFO',
        'class':'logging.StreamHandler',
        'formatter': 'standard'
    },
},
'loggers': {
    'django': {
        'handlers':['console'],
        'propagate': True,
        'level':'WARN',
    },
    'django.db.backends': {
        'handlers': ['console'],
        'level': 'DEBUG',
        'propagate': False,
    },
    'customer_portal': {
        'handlers': ['console', 'logfile'],
        'level': 'DEBUG',
    },
}
} 
```

我在我的视图文件中写：

```
import logging
log = logging.getLogger('customer_portal')
log.debug("Some data") 
```

但是没有创建带有日志的文件。感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:31:55.917

我剪切/粘贴了您的代码，它对我有用。您尝试写入的目录和/或文件可能存在不正确的权限？

# grails - Grails：用户头像上传器

> ID：12840342
> 
> 赞同：0
> 
> 时间：2012-10-11T13:11:23.003
> 
> 标签：grails, upload, image-uploading

我的 Grails 应用程序中的每个用户都有个人资料，并希望他们能够上传个人资料图片。因此我在视图中制作了一个uploadForm：

```
<g:img dir="tmp" file="1.jpg"/>
<g:uploadForm action="upload">
    <input type="file" name="myFile" />
    <input type="submit" />
</g:uploadForm> 
```

如您所见，我只想显示用户的个人资料图片`ID = 1`。

上传动作：

```
def upload() {
    def f = request.getFile('myFile')
    if (f.empty) {
        flash.message = 'file cannot be empty'
        render(view: 'uploadForm')
        return
    }
    f.transferTo(new File('/tmp/'+springSecurityService.currentUser.id+'.jpg'))
    flash.message = 'file in /tmp/'+springSecurityService.currentUser.id+'.jpg'
    redirect action: 'edit', id: springSecurityService.currentUser.id
} 
```

我的问题是，`ID = 1`没有显示用户的个人资料图片。我检查了它是否具有正确的值（`ID = 1`）。

在我的堆栈跟踪中，我有以下内容：

> | 错误 resource.ResourceMeta - 找不到资源：/tmp/1.jpg

为什么找不到数据？我已将其保存在上传操作中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:46:33.770

您正在将文件保存到文件系统中的 /tmp 文件夹。除非您对该文件夹授予适当的权限，否则您将无法保存到该文件夹​​。

更重要的是，g:img 标签在你的 grails 应用程序的 web-apps 文件夹下的 tmp 文件夹中搜索文件——它永远不会在那里找到该文件，因为你没有将它保存在那里。

# sql-server-2008 - 在另一个表中使用一个表中的计数

> ID：12840352
> 
> 赞同：2
> 
> 时间：2012-10-11T13:11:42.663
> 
> 标签：sql-server-2008

所以我从#table1 中的计数生成了一个数字，我想在我创建的另一个表中显示该数字。所以第一个计数的语法是

```
select COUNT(*)
into #table1
from #test8
where account_number1 is null
GROUP BY varmonth,MONYEAR
ORDER BY varmonth, MONYEAR 
```

那么第二张表是

```
SELECT MONYEAR, 
COUNT(*) AS TOTAL,
SUM(CURRENT_BALANCE_AMOUNT) REH_BAL,
FROM #table1
WHERE ROWNUMBER = 1 
GROUP BY varmonth,MONYEAR
ORDER BY varmonth, MONYEAR 
```

但是我希望第一个计数在第二个表中的计数和总和之间滑动。有没有办法做到这一点，所以所有的数字都输出到一个决赛桌？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:18:39.243

你可以这样做：

```
SELECT
  t2.MONYEAR,
  t2.Total,
  t1.tcount,
  t2.REH_BAL
FROM
(
  select varmonth, MONYEAR, COUNT(*) tcount
  from #test8
  where account_number1 is null 
  GROUP BY varmonth,MONYEAR
) t1
INNER JOIN
(
  SELECT MONYEAR, 
    COUNT(*) AS TOTAL,
    SUM(CURRENT_BALANCE_AMOUNT) REH_BAL,
  FROM #table1
  WHERE ROWNUMBER = 1 
  GROUP BY varmonth,MONYEAR
) t2 ON t1.MONYEAR = t2.MONYEAR
ORDER BY t1.varmontth, t2.MONYEAR 
```

# asp.net - ASP.net 网站中的构建顺序问题

> ID：12840364
> 
> 赞同：0
> 
> 时间：2012-10-11T13:12:37.470
> 
> 标签：asp.net, entity-framework, web

我有一个 Web 应用程序，过去可以正常工作，但我需要使用 VB 和 C#，这就是我将项目作为网站开始的原因。

我在文件夹中创建了两个子`App_Code`文件夹，并将其写在`web.config`文件中：

```
<codeSubDirectories>
  <add directoryName="VB_Code" />
  <add directoryName="CS_Code" />
</codeSubDirectories> 
```

然后，我将我的实体数据模型放在 App_Code 文件夹的根目录中。这样，当我尝试编译时收到以下警告：

`Namespace or type specified in the Imports 'ProductizationModel' doesn't contain any public member or cannot be found. Make sure the namespace or the type is defined and contains at least one public member. Make sure the imported element name doesn't use any aliases.`

以及与此事实相关的许多错误：EDM 尚未构建，其命名空间尚不存在。此错误来自通过我的 EDM 访问数据库并在 VB_Code 文件夹中声明的类。

然后，经过研究，我发现VS遵循构建顺序，并且其中的子文件夹`App_Code`是在根目录中的文件之前构建的。

我又创建了一个名为`EF_Code`并在文件中声明的子文件夹`web.config`：

```
<codeSubDirectories>
  <add directoryName="EF_Code"/>
  <add directoryName="VB_Code" />
  <add directoryName="CS_Code" />
</codeSubDirectories> 
```

但我仍然收到相同的警告和错误。

有没有人可以点亮我？

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:09:25.193

如果我没看错你的问题，听起来你需要先使用 VB_Code 文件夹。虽然在网站中混合语言是可以接受的，但这绝对是一种不好的用法。如果您需要这些类型的依赖项，我建议您为这些类创建单独的项目并直接引用它们。即使您打算继续使用 App_Code 文件夹来存储您的类，以这种方式设置库项目也可以帮助您识别造成这些冲突的依赖项。

# php - 一个内有多个值 标签？

> ID：12840366
> 
> 赞同：1
> 
> 时间：2012-10-11T13:12:44.457
> 
> 标签：php, html, mysql, sql, search

我正在尝试创建一个从 10 到 90 的下拉框，我希望每个值代表介于两者之间的数字（因此 10 将包含 11、12、13、14 等等）。因此，如果用户单击 10，它将显示数据库中范围从 10 到 19 的任何条目，而不仅仅是其中带有“10”的条目。

**是否可以在选项标签中添加多个值？**这是我到目前为止所尝试的。

**HTML：**

```
<body>

  <form action="form3.php" method="post">
  <label for ="description">Description:</label>
  <input type="text" name="descrip" /><br />

         <label for="trayheight">Height: </label>
                <select name="trayheight">
                    <option value="">All</option>
                    <option value="10">10</option>
                    <option value="[20:21:22:23:24:25:26:27:28:29]">20</option>
                    <option value="30">30</option>
                    <option value="40">40</option>
                    <option value="50">50</option>
                    <option value="60">60</option>
                    <option value="70">70</option>
                    <option value="80">10</option>
                    <option value="90">90</option>
                </select><br />

         <label for="trayrange">Trayrange: </label>
                <select name="trayrange">
                    <option value="">All</option>
                    <option value="BBQ">BBQ</option>
                    <option value="Dessert">Dessert</option>
                    <option value="Display">Display</option>
                    <option value="Meat">Meat</option>   
                    <option value="Microwave">Microwave</option>
                    <option value="Party">Party</option>
                    <option value="Salad/Wet Pasta">Salad/Wet Pasta</option>
                    <option value="Snacks">Snacks</option>
                    <option value="Standard">Standard</option>
                </select><br />

        <label for ="traytype">Traytype: </label> 
                <select name="traytype">
                    <option value="">All</option>
                    <option value="Open">Open</option>
                    <option value="Cavitised">Cavitised</option>
                    <option value="Lid">Lid</option>
                    <option value="Tray">Tray</option>
                    <option value="Coallition">Coallition</option>
                    <option value="Bowl">Bowl</option>
                    <option value="Hinge pack">Hinge pack</option>
                    <option value="Pot">Pot</option>
                    <option value="Base & Lid">Base and Lid</option>
                    <option value="Rectangular">Rectangular</option>
                    <option value="Specalist">Specialist</option>
                </select><br />

        <label for="trayshape">Trayshape: </label>
                <select name="trayshape">
                    <option value="">All</option>
                    <option value="Rectangular">Rectangular</option>
                    <option value="Oval">Oval</option>
                    <option value="Square">Square</option>
                    <option value="Insert">Insert</option>
                    <option value="Round">Round</option>
                    <option value="Open">Open</option>
            </select><br />
        <input type="submit" value="Submit" /> 
    </form> 

  </body> 
```

**PHP：**

```
 <body>

        <?php
            $con = mysql_connect ("localhost", "root", "");
                   mysql_select_db ("delyn_db", $con);

            if (!$con)
                { 
                    die ("Could not connect: " . mysql_error());
                }

            $descrip = mysql_real_escape_string($_POST['descrip']); 
            $width   = mysql_real_escape_string($_POST['width']);
            $depth   = mysql_real_escape_string($_POST['depth']);

            $varHeight= mysql_real_escape_string($_POST['trayheight']);
            $varRange = mysql_real_escape_string($_POST['trayrange']);
            $varType  = mysql_real_escape_string($_POST['traytype']);
            $varShape = mysql_real_escape_string($_POST['trayshape']);
            $varImage = mysql_real_escape_string($_POST['imagename']);

            $sql = "SELECT * FROM delyn WHERE 
                        description LIKE '%".$descrip."%'  
                    AND trayheight LIKE '%".$varHeight."%'
                    AND trayrange LIKE '%".$varRange."%' 
                    AND traytype LIKE '%".$varType."%' 
                    AND trayshape LIKE '%".$varShape."%'";

            $r_query = mysql_query($sql);

                while ($row = mysql_fetch_array($r_query))
                    { 
                        echo '<br /> <img src="   '. $row['imagename'] . '" width="180" length="100">';
                        echo '<br /> Tool Code:   '. $row['toolcode'];
                        echo '<br /> Description: '. $row['description']; 
                        echo '<br /> Tray range:  '. $row['trayrange']; 
                        echo '<br /> Tray type:   '. $row['traytype'];
                        echo '<br /> Tray size:   '. $row['traysize']; 
                        echo '<br /> Tray shape:  '. $row['trayshape'] . '<br />' . '<br />';  
                    }

                if (mysql_num_rows($r_query) <= 0){
                    echo 'No results match your search, please try again';
               }

        ?>
    </body> 
```

提前感谢任何可以提供帮助的人:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:34:32.483

简单的答案：您不能在一个选项标签值中存储多个值。

最简单和最安全的解决方案是将一个值存储在选项值（例如`10`）中，然后将其视为从设置的值到下一个 10 倍数的范围：

`'AND col >= '.$value.' AND col < '.$value+10`

第二种解决方案是将值设置为一个范围`10-19`，然后在服务器端：

```
list($min,$max) = explode('-',$value);
... 'AND col >= '.$min.' AND col <= '.$max ... 
```

另一种解决方案是存储包含您希望封装在一个选项中的值的数组的 JSON 编码，然后在服务器端解码该值：

`'AND col IN ('.implode(',',json_decode($value)).')'`

我个人会避免使用 JSON 方法，因为它对于这类问题来说太过分了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:20:51.693

an 的值`<option>`可以是任何字符串；由您的服务器端代码来适当地解释该字符串。

`LIKE`您需要为每个列选择适当的条件，而不是总是在 SQL 中使用字符串匹配运算符。

例如，将您的值设置为由 min 和 max: 指定的范围`<option value="11-20">foo</option>`，然后在您的 SQL 中使用`<=`and （当心“fence-post 错误”！）`>=`

```
list($min,$max) = explode('-', $_POST['trayheight']);
$sql .= 'And trayheight >= ' . intval($min) . ' And trayheight <= ' . intval($max); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:16:56.627

我假设您正在从 PHP 源代码中检索这些整数。在这种情况下，只需将此逻辑存储在您的某处`database`，`php file`或某种 a`config file`中，以便将此逻辑保持在服务器端。不可能在一个选项中存储多个值，这就是选项的想法。或者您必须将其存储为`json_encode`字符串，但我不确定这是否是您想要的。

将它放在您的服务器端也会更安全，我不确定您在创建什么，但安全始终是前提。

[更多关于 json 编码](http://php.net/manual/en/function.json-encode.php)

# java - 方法是否相应实施

> ID：12840368
> 
> 赞同：1
> 
> 时间：2012-10-11T13:12:47.030
> 
> 标签：java, oop, exception-handling

我对这个问题所涉及的技术术语感到困惑：

> 给定三条直线a，b和c。只要任何两条线的总和总是大于第三条线（即 a + b > c 和 b + c > a 和 a + c），他们将能够形成一个三角形
> 
> > 乙）。使用以下内容编写 Java 类 Triangle：

```
Attributes: length of the three sides of the triangle 
Behaviour: 
```

> *   将三个边的长度设置为传入的值的构造函数。当这些值不能形成三角形时，构造函数应该抛出一个 InvalidValueException 对象。
>     *   findArea() 方法使用公式 area = a +b+c 计算三角形对象的面积

我想出的代码是这样的：

```
package question3_test;

import java.awt.event.*;
import java.math.*;

public class Triangle_getvalues 
{

    private int side1, side2, side3;
    private double area;
    private String message;

    public  int getSide1()
    {
        return side1;
    }

    public void setSide1(int s1)
    {
        side1 = s1;
    }

    public  int getSide2()
    {
        return side2;
    }

    public void setSide2(int s2)
    {
        side2 = s2;
    }

    public  int getSide3()
    {
        return side3;
    }

    public void setSide3(int s3)
    {
        side3 = s3;
    }

    public double findArea(int side_1, int side_2, int side_3)throws InvalidValueException 
    {
        int s, a, b,c;
        a = side_1;
        b = side_2;
        c = side_3;
        s = ((a + b + c)/2);
        area = Math.sqrt(s*(s-a)*(s-b)*(s-c));
        //area =
        return area;
    }

public void validateTriangle(int sidea, int sideb, int sidec) throws InvalidValueException
    {
        try
        {
        if((sidea + sideb > sidec)||(sideb + sidec > sidea)||(sidea + sidec > sideb))
        {
            findArea(side1,side2,side3);
        }
        }
        catch(InvalidValueException excep)
                {
                    message = excep.getMessage();
                }
    }

}

class InvalidValueException extends Exception
{
    public InvalidValueException()
    {
        super("These values cannot form a valid triangle");
    }
} 
```

我想知道的不是我遗漏了什么（如果我遗漏了什么，请告诉我），而是在这里问的主要目的是，这是回答这个问题的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T13:22:32.117

你有正确的想法。你只是没有组合你的代码来匹配你的任务。

> 将三个边的长度设置为传入的值的构造函数。当这些值不能形成三角形时，构造函数应该抛出一个 InvalidValueException 对象。

类构造函数看起来像这样。

```
public Triangle_getvalues(int a, int b, int c) throws InvalidValueException {
    validateTriangle(a, b, c);
    setSide1(a);
    setSide2(b);
    setSide3(c);
} 
```

您的 validateTriangle 方法不应尝试同时抛出 InvalidValueException 并捕获 InvalidValueException。选择一个或另一个。

您的 validateTriangle 方法不需要调用或执行 findArea 方法。您只需要确定输入长度是否构成有效三角形。

这是它应该如何工作的：

```
 public void validateTriangle(int sidea, int sideb, int sidec) 
     throws InvalidValueException
 {
    if ((sidea + sideb > sidec) || (sideb + sidec > sidea)
        || (sidea + sidec > sideb))
    {

    } else {
        throw new InvalidValueException;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:22:57.897

你的构造函数应该是这样的：

```
public className(int side1, int side 2, int side3) throws yourException {
      //initialize your sides here and call your validation method here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:18:23.937

这似乎很像毕达哥拉斯定理。答案是 (side1*side2)*(side2*side2) = (side3*side3) 如果每一边都是相同的，这会给你所有有效的三角形..

这几乎是家庭作业代码，但了解它的工作原理是基本的。

# python - 为什么这个极其简单的 wxPython AUI 应用程序在启动时会崩溃？

> ID：12840370
> 
> 赞同：0
> 
> 时间：2012-10-11T13:12:50.997
> 
> 标签：python, wxpython

我正在制作一个用于工作的正则表达式测试工具。我希望它是一个简单的 AUI 应用程序，但是在将我认为是AUI 应用程序**核心**的东西从演示转移到我的代码之后，它在启动时崩溃了。在 wxPython 日志窗口消失之前，我只能看到它的几分之一秒，并且代码在控制台中没有产生任何错误。

这是麻烦的框架。如果我注释掉所有`_mgr`行，应用程序运行得很好。

```
class RegexTesterFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(
            self, None, -1, 'Regex tester', (100, 100),
            (400, 400), wx.DEFAULT_FRAME_STYLE
        )

        self.initialize_components()
        self.CreateStatusBar()

    def initialize_components(self):
        self._mgr = wx.aui.AuiManager()
        self._mgr.SetManagedWindow(self)

        self._perspectives = []

        self._mgr.AddPane(
            wx.CheckBox(self, -1, 'test'),
            wx.aui.AuiPaneInfo().Name('Test pane').Caption('Test caption').Top()
        )

        self._mgr.Update()

        self.Bind(wx.EVT_CLOSE, self.on_close)

    def on_close(self, event):
        self._mgr.UnInit()
        del self._mgr
        self.Destroy() 
```

这是完整的代码（约 100 行）： http: [//pastebin.com/xZS2g1fq](http://pastebin.com/xZS2g1fq)

这是我正在使用的演示（大）： http: [//pastebin.com/G26BMYZx](http://pastebin.com/G26BMYZx)

我对两件事感到好奇 - 为什么应用程序崩溃，以及为什么当 wxPython 应用程序通常崩溃时我没有得到错误输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:34:30.773

从昨天开始我就一直在努力解决这个问题，但像往常一样，当我在 StackOverflow 上提出问题时，我就明白了。首先，我让应用程序在消息框中而不是 stderr 中输出错误信息：

```
def main():
    try:
        app = RegexTesterApp(True)
        app.MainLoop()
    except:
        import traceback
        xc = traceback.format_exception(*sys.exc_info())
        wx.MessageBox(''.join(xc)) 
```

然后错误显示这`wx.aui`是我没有导入的模块。导入它修复了崩溃。