# StackOverflow 问答 15590000-15590999

# wpf - 单例和 ICommand

> ID：15590001
> 
> 赞同：0
> 
> 时间：2013-03-23T17:41:19.923
> 
> 标签：wpf, vb.net, mvvm, singleton, icommand

在将我的视图绑定到我的单例 ViewModel 中定义的命令时，我必须注意一些特殊规则，而不是普通（非单例）ViewModels？

除了有问题的 ViewModel 之外，我所有的 ViewModel 都表现正常。它们中的每一个都公开了两个名为`HasChanges`(bool property) 和`SaveChanges`(method) 的公共成员，我在命令的`CanExecute`和`Execute`函数中调用它们。

虽然所有其他视图都正常运行，在值`HasChanges`更改时启用/禁用按钮并在单击这些按钮时保存内容，但唯一实现单例模式的 ViewModel 恰好`CanExecute`仅在第一次加载视图时调用。
之后，`PropertyChanged`从该 ViewModel（我的所有 ViewModel 实现`INotifyPropertyChanged`）中引发的任何数量的事件都不会影响按钮的禁用状态。

想知道我在这里缺少什么。

这是单例模型视图：

```
Public NotInheritable Class MyViewModel
    Private Shared ReadOnly mInstance As New CommonListsViewModel

    Public Shared ReadOnly Property Instance() As CommonListsViewModel
        Get
            Return mInstance
        End Get
    End Property

    Public Property SaveChangesCommand As ICommand

    Private Sub New()
        SaveChangesCommand = New Commands.SaveChangesCommand()
    End Sub

    Public ReadOnly Property HasChanges As Boolean Implements IEditorViewModel.HasChanges
        Get
            ...
        End Get
     End Property

    Public Function SaveChanges() As Boolean Implements IEditorViewModel.SaveChanges
        ...
    End Function
End Class 
```

这是命令：

```
Friend Class SaveChangesCommand
    Inherits CommandBase

    Public Overrides Function CanExecute(parameter As Object) As Boolean
        Return MyViewModel.Instance.HasChanges
    End Function

    Public Overrides Sub Execute(parameter As Object)
        MyViewModel.Instance.SaveChanges()
    End Sub
End Class 
```

这是我的观点：

```
<Grid DataContext="{x:Static local:CommonListsViewModel.Instance}">
    <Button Command="{Binding SaveChangesCommand}">
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:17:51.553

由于类遵循单例模式，因此行为不应该有任何差异。任何引用单例的东西都不会关心类的构造是如何受到限制的，只关心类的实例是否存在。

问题可能在于 ViewModel 的 PropertyChanged 事件和 Command 上的 CanExecuteChanged 之间缺乏正确的链接。

# magento - 网格中的收集错误

> ID：15590002
> 
> 赞同：0
> 
> 时间：2013-03-23T17:41:24.837
> 
> 标签：magento

如果我删除这个 var_dump 行，我的模块就会中断。为什么会这样。我的加入有什么问题吗

```
 protected function _prepareCollection() {

    $collection = mage::getModel('faq/faq')->getCollection();
    $collection->getSelect()->joinLeft(array('s'=>'gagan_faq_creation'),
            'main_table.faq_id = s.faq_id');
    var_dump($collection->getData());

    $this->setCollection($collection);
    parent::_prepareCollection();
} 
```

我收到这个错误

```
QLSTATE[23000]: Integrity constraint violation: 1052 Column 'faq_id' in order clause is ambiguous
#0 C:\wamp\www\www.ubt.com\lib\Varien\Db\Statement\Pdo\Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#1 C:\wamp\www\www.ubt.com\lib\Zend\Db\Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#2 C:\wamp\www\www.ubt.com\lib\Zend\Db\Adapter\Abstract.php(479): Zend_Db_Statement->execute(Array)
#3 C:\wamp\www\www.ubt.com\lib\Zend\Db\Adapter\Pdo\Abstract.php(238): Zend_Db_Adapter_Abstract->query('SELECT `main_ta...', Array)
#4 C:\wamp\www\www.ubt.com\lib\Varien\Db\Adapter\Pdo\Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract->query('SELECT `main_ta...', Array) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:49:16.883

You are selecting `faq_id` from both table (`main_table` & `gagan_faq_creation`) that,s why it's giving MySQL error, So need to add alliance for gagan_faq_creation.faq_id.

# python - 无法安装 pywinauto 工具

> ID：15590003
> 
> 赞同：0
> 
> 时间：2013-03-23T17:41:47.980
> 
> 标签：python, windows, pywinauto

无法安装 pywinauto 并出现以下错误。请帮我解决这个问题。

```
C:\Python27>python C:\Users\........\Downloads\pywinauto-0.4.0\pywinauto-0.4.
0\setup.py install
running install
running build
running build_py
error: package directory 'pywinauto' does not exist 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-05T22:40:18.157

我这样做的方式是这样的：

1.  提取 .zip 文件
2.  将文件夹移动到：`C:\Python27\Lib\site-packages`
3.  通过进入文件夹并双击它来运行 setup.py。

这对我有用，这是将模块移动到 Python 中的正常方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T14:39:53.683

试试这个

1.  下载[http://www.python.org/download/releases/2.6.6/（32](http://www.python.org/download/releases/2.6.6/)位）
2.  使用 python-2.6.6.msi 安装 python
3.  安装发送密钥 [https://code.google.com/p/pythonxy/downloads/detail?name=SendKeys-0.3_py26.exe&can=2&q=](https://code.google.com/p/pythonxy/downloads/detail?name=SendKeys-0.3_py26.exe&can=2&q=)
4.  下载 [http://sourceforge.net/projects/pywinauto/files/pywinauto/0.4.0/](http://sourceforge.net/projects/pywinauto/files/pywinauto/0.4.0/)
5.  将pywinauto zip文件解压到一个文件夹
6.  运行 python.exe setup.py install

> C:\Software\pywinauto-0.4.0\pywinauto-0.4.0>C:\Python26\python.exe setup.py install

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-09T22:43:43.137

此问题：`"error: package directory 'pywinauto' does not exist"`如果您从错误的工作目录开始设置过程，则会出现此问题。

在我的情况下（Win7x64，ActivePython2.7.2）我遇到了同样的问题，直到我接下来完成：*precondtion：你应该先安装 Python

1) 在 PowerShell 中使用解压缩的 PyWinAuto 进入目录：`"cd: C:\Python27\Lib\site-packages\pywinauto"` 您应该使用解压缩的 PyWinAuto 导航到文件夹

2）然后做`"python setup.py install"`

然后你可以检查安装的 PyWinAuto：

```
1) "import application"
2) "app = application.Application().start_("notepad")" 
```

notepad.exe 应该会出现

# ruby-on-rails - before_add 回调，“为 nil 对象调用 id”错误

> ID：15590013
> 
> 赞同：1
> 
> 时间：2013-03-23T17:42:23.660
> 
> 标签：ruby-on-rails

我遇到了经典`'Called id for nil...`错误，但我很难理解为什么我的对象为零。

`validate_assignee`尝试获取任务所属的 :agent 的 id 时，它在方法中出错。

```
class Task < ActiveRecord::Base

belongs_to :user
has_one :agent, through: :users
has_and_belongs_to_many :assignees,
                      class_name: "User",
                      before_add: :validate_assignee
private
  def validate_assignee(assignee)
    #need to check that the :assignee belongs to the same :agent as the :user
    #grab agent_id from self
    current_agent_id = self.agent.id 
    #fails here on create of a Task through the @user.tasks.build association
    ...
  end
end 
```

当我通过控制台构建任务时，我得到了预期的行为

```
> task = @user.tasks.build ...
> task.agent.id
=> 1 
```

我在 TasksController 中的创建操作：

```
def create
  @task = current_user.tasks.build(params[:task])
  ...
end 
```

当对象尚未保存时，在这种情况下使用 self 有什么奇怪的吗？有没有更好的方法来做到这一点？我正处于需要另一双眼睛关注的阶段，因为我正在兜圈子。谢谢。

**更新：** 为了`current_user`从流程中消除，我更改了 create 操作中的 task.build 以通过用户关联显式构建任务，并使用我知道属于代理的用户。

```
@task = User.find(1).tasks.build(params[:task]) 
```

然后当我在这样的`validate_assignee`方法中输出对象的表示时，`puts self.to_yaml`我看到 Task 没有`user_id`集合。

**所以总而言之**- 我正在通过我的创建操作中的用户关联构建一个新的任务对象，但是在 before_add 关联回调调用的方法内的任务模型中，它已经失去了与用户的关联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:40:51.290

**似乎**在保存记录之前，您无法访问对象的关联属性。这就是[这个小伙子说](http://mattberther.com/2012/09/09/validating-habtm-relationships-with-rails-3x)的。因此，我`after_save`向我的 Task 模型添加了一个回调来调用我的验证方法，在该方法中一切都按预期工作。

通过`self.to_yaml`验证方法输出任务时，我看到了`user_id`预期的值。可惜我必须先保存记录和 habtm 关联才能验证它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T18:47:36.843

我认为你没有`agent`你的`current_user`. 当你没有`agent`for 时`user`：

```
 current_user.agent  #=> nil 
```

因此，当调用它`id`时`nil`会引发错误。

```
 current_user.agent.id #=> Throws error 
```

如果你没有`agent`for each`user`你可以`try`用来避免错误：

```
 current_agent_id = self.agent.try(:id) 
```

# google-app-engine - 400 错误请求在 Google 日历中插入事件

> ID：15590016
> 
> 赞同：2
> 
> 时间：2013-03-23T17:42:59.817
> 
> 标签：google-app-engine, google-calendar-api

我正在使用 Google 日历 API，并尝试向 API 发送插入事件的请求，但出现错误。

这是我发送的请求：

```
POST https://www.googleapis.com/calendar/v3/calendars/riteshmehandiratta%40gmail.com/events?key={YOUR_API_KEY}

Content-Type:  application/json
Authorization:  Bearer ya29.AHES6ZQwHy_3OYLmXtZpSa5PIwnBO3hqLWolMXpTYiFOEtjlEmbxNrYn
X-JavaScript-User-Agent:  Google APIs Explorer

{

 "end": {
  "date": "2/14/2007"
 },
 "start": {
  "date": "2/14/2007"
 },
 "kind": "calendar#event",
 "summary": "Hello World"
} 
```

我得到的回应是：

```
400 Bad Request

- Hide headers -

cache-control:  private, max-age=0
content-encoding:  gzip
content-length:  122
content-type:  application/json; charset=UTF-8
date:  Sat, 23 Mar 2013 17:36:22 GMT
expires:  Sat, 23 Mar 2013 17:36:22 GMT
server:  GSE

{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "badRequest",
    "message": "Bad Request"
   }
  ],
  "code": 400,
  "message": "Bad Request"
 }
} 
```

我无法弄清楚为什么我收到错误的请求错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:18:15.443

据我所知，您的日期格式有误，API 文档指出：

```
 The date, in the format "yyyy-mm-dd", if this is an all-day event. 
```

您可能希望使用此页面底部的“试用”表单首先确保您的请求有效：

[https://developers.google.com/google-apps/calendar/v3/reference/events/insert#try-it](https://developers.google.com/google-apps/calendar/v3/reference/events/insert#try-it)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T13:08:09.443

这就是我所做的（PHP）：

```
//Passed in a GET variable name of 'date'
//Tells parser the current format
$dt = DateTime::createFromFormat("d/m/Y", $_GET['date']);

//Adding the event start date, modifying the format to suit googles encoding
$start->setDate($df->format("Y-m-d")); 
```

上面的脚本片段对我有用。

Rohan 关于他们的格式化条件是正确的。

# linq - Linq Nhibernate 左连接

> ID：15590021
> 
> 赞同：0
> 
> 时间：2013-03-23T17:43:33.950
> 
> 标签：linq, nhibernate, fluent-nhibernate, linq-to-nhibernate

盗窃具有**动作**属性

这是我试图让 NHibernate.Linq 产生的查询：

```
SELECT * FROM `thefts`
LEFT JOIN memberThefts
ON thefts.id = memberThefts.theftId AND memberThefts.memberId = 1 
```

我想获取所有盗窃的列表，其中 action.memberId == 某个数字或 null 如果它没有找到一行，就像一个查询一样简单，但它整天都让我做噩梦！

```
 thefts = session.Query<Theft>()
            .Fetch(x => x.action)
            .Where(x => x.action.memberId == member.id)
            .ToList(); 
```

这将执行以下 SQL：

```
select theft0_.id                 as id9_0_,
       memberthef1_.memberId      as memberId7_1_,
       theft0_.name               as name9_0_,
       theft0_.chance             as chance9_0_,
       memberthef1_.theftId       as theftId7_1_,
       memberthef1_.availableTime as availabl3_7_1_
from   thefts theft0_
       left outer join memberThefts memberthef1_
         on theft0_.id = memberthef1_.theftId,
       memberThefts memberthef2_
where  theft0_.id = memberthef2_.theftId
       and memberthef2_.memberId =1 /* ?p0 */ 
```

盗窃类：

```
 public class Theft
    {
        public virtual byte id { get; set; }
        public virtual string name { get; set; }
        public virtual byte rank { get; set; }
        public virtual byte chance { get; set; }
        public virtual MemberTheft action { get; set; }
... 
```

它的映射：

```
public TheftMap()
{
    Table("thefts");
    Id(x => x.id);
    Map(x => x.name);
    Map(x => x.id);
    Map(x => x.chance);
    References(x => x.action)
        .Nullable()
        .PropertyRef(x => x.theftId)
        .Column("id");
} 
```

任何解决方案都会做 HQL、QueryOver 等

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T17:51:48.227

无法使用 LINQ 提供程序来完成，但您可以使用 QueryOver 来完成。类似于以下内容：

```
MemberTheft memberAlias = null;
var result = Session.QueryOver<Theft>()
                    .Left.JoinQueryOver(x => x.action, () => memberAlias)
                    .Where(() => memberAlias.memberId == member.id); 
```

编辑：更新的查询。

# ios - 在离线模式下播放 youtube 视频？

> ID：15590022
> 
> 赞同：2
> 
> 时间：2013-03-23T17:43:36.747
> 
> 标签：ios, youtube, video-streaming

当我们从互联网区域重定向到非互联网区域时，我想播放 YouTube 视频。

就像我在某个时候可以访问互联网并且我播放了 Youtube 视频，然后

有时我的互联网连接松动，但现在我想播放我播放的所有视频

之前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:52:17.340

I am not going to write any code for this but only tell you the route you probably need to take. As with any online media, If you don't have access to the internet, well you can't really get the data. What you need to do is capture the data which is coming in from any media and save it on the device. When the user then clicks on a video which has been previously saved while not connected to the internet, you can play the saved video file. There isn't really a simple quick way to do this, just do some research on saving streaming video or downloading video and saving to device.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:49:49.887

I am not aware of any caching mechanism for a browser that could do that 'off the box'. This wouldn't make much sense anyway because the cache would get full with only a few videos.

The only way that comes to mind is to download the video of interest while connected and play it with your favorite media player. There's bound to be a few addons depending on the browser you use, I use [VideoDownloadHelper](https://addons.mozilla.org/en-US/firefox/addon/video-downloadhelper/) for Firefox but for iPhone [this blog](http://www.pcadvisor.co.uk/how-to/apple/3417482/how-download-youtube-videos-your-iphone-or-ipod-touch/) seems to have some instructions.

# cmake - 当 CMake 命令失败时，有没有办法得到错误？

> ID：15590023
> 
> 赞同：3
> 
> 时间：2013-03-23T17:43:37.903
> 
> 标签：cmake

我正在编写一个脚本并开始使用该`install`命令（用于复制文件）但它不起作用。CMake configure/generate 没有显示任何错误（即它没有停止并且没有显示与此命令相关的警告/错误）并且该命令似乎不起作用，因为我没有看到任何文件被复制。

由于我是新手，我想知道：

*   我怎么知道`install`失败（可能源目录错误，或者目标目录错误）？它似乎在默默地失败。
*   是否有错误代码我可以检查以查看问题所在？
*   什么时候`install`调用？当我点击配置？还是项目建成的时候？

我在 Windows 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-01-24T19:39:56.407

对于一般性问题，有很多方法可以从 CMake 获得更详细的输出 - 我刚刚学习了第三种方法来解决棘手的错误：

1.  要调试 CMake 配方，我喜欢使用 message 命令，您甚至可以遍历目录并发出消息*
    *   例如`message( STATUS "SQLITE3_LIB: ${SQLITE3_LIB} SQLITE3_PATH: ${SQLITE3_PATH}") # prints SQLITE3_LIB and SQLITE3_PATH variables`
2.  执行详细构建以对构建本身进行故障排除
    *   运行`make VERBOSE=1`（with make, `ninja -v`with ninja等）帮助你排查进程，比如`cmake -DYOUR_OPTION="insert values" ~/path/to/files/ && make VERBOSE=1`
3.  如果你发现了一个难以理解的错误，我刚刚了解到我们可以在失败的命令上运行 strace - 这可能有点让人不知所措，但是当你用尽 #1 和 #2 时会有所帮助
    *   我只是`strace /usr/bin/cmake -E copy_directory $MY_SOURCE_PATH $MY_DEST_PATH`试图理解为什么副本失败

*我已使用[DLRdave](https://stackoverflow.com/a/6904431/527489)对另一个问题的回答打印出 INCLUDE_DIRS：

```
get_property(dirs DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR} PROPERTY INCLUDE_DIRECTORIES)
foreach(dir ${dirs})
  message(STATUS "dir='${dir}'")
endforeach() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:50:40.410

当您向 CMakeLists.txt 添加`install`命令时，您会创建一个名为“install”的新目标。

为了实际安装所选文件/目标，您需要构建此安装目标。它不会自动构建为“ALL”目标的一部分。

例如，如果您使用的是 Visual Studio，则“INSTALL”目标应出现在解决方案资源管理器的“CMakePredefinedTargets”文件夹中。只需选择此目标并构建它，就会构建解决方案并安装所选项目。

如果构建或安装过程的任何部分失败，则通知应该很明显。

# sql - 将 SQL Server Express DB 导出到 .SDF 文件（本地 DB）

> ID：15590027
> 
> 赞同：3
> 
> 时间：2013-03-23T17:44:16.027
> 
> 标签：sql, visual-studio, ssms, localdb

我的服务器上有几个数据库，我想将其导出到我的笔记本电脑上，以便在离线时进行开发。

我有一个想要导出到`.SDF`（本地数据库文件）的 SQL Server 2008 数据库。似乎有很多信息从`.SDF`T-SQL 传来，但没有其他信息可以通过。

我尝试将架构和数据导出为 SQL 脚本，然后在 Visual Studio 的`.SDF`连接中将其作为查询运行，但不支持任何创建语句。

这一定是常见的任务，我怎么找不到解决方案呢？

我安装了 SSMS 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:26:55.933

[这里](http://www.codeproject.com/Articles/25685/SQL-Server-to-SQL-Server-Compact-Edition-Database)或[这里](http://erikej.blogspot.com/2010/02/how-to-use-exportsqlce-to-migrate-from.html)是一些应该完成这项工作的工具。

# c - 对指针进行类型转换并为其分配比 malloc 更多的内存不会引发任何错误

> ID：15590035
> 
> 赞同：0
> 
> 时间：2013-03-23T17:45:08.777
> 
> 标签：c, casting, malloc

我正在学习 C 并试图理解类型转换和内存分配。

我写了一个小代码，并认为它失败了。

```
#include <stdio.h>
#include <stdlib.h>
struct A {
    int x;
    int y;
};    
int main()
{
    int *i;
    float *f;
    struct A *ptr;
    i = (int *)malloc(4);
    if(i==NULL) {
        printf("\n failed to allocate memory \n");
        return 1;
    }
    *i=10;
    printf(" %d \n",*i);
    f = (float *)i;
    *f = 10.2;
    printf(" %f \n",*f);
    ptr = (struct A *)f;
    ptr->x=10;
    ptr->y=20;
    printf(" %hd \n",ptr->x);
    printf(" %hd \n",ptr->y);
} 
```

我预计这段代码会失败，因为我只分配了 4 个字节的内存并类型转换了相同的指针以指向浮点数（4 个字节）和具有 8 个字节的结构。我虽然它给出了段错误，但它打印出没有任何问题的值。

有什么我想念的吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:48:05.770

这称为*未定义行为*。您`ptr`指向与内存中相同的位置`float`，因此您将其与 the 一起覆盖，`int`并且在分配的内存之后占用了 4 个字节。它没有失败，因为你很幸运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:28:51.817

您可能仍在写入为程序的数据段分配的一些内存区域，因此不会发生分段错误。很难说你覆盖了哪些数据，以及这将在以后产生什么影响。由于程序很短，在某些特定情况下可能根本没有任何影响。较大的程序很可能会在运行一段时间后崩溃（“延迟崩溃”）。

这是C，*中级*语言。如果您需要这种安全性，请改用高级语言，不乏这些。

# sql-server-2008 - SQL 更新触发器错误-（无法创建触发器，因为表具有更新级联的外键）

> ID：15590038
> 
> 赞同：2
> 
> 时间：2013-03-23T17:45:19.020
> 
> 标签：sql-server-2008, triggers

我正在使用`SQL`服务器 2008，我有`payment`桌子和`paymentLog`桌子。

```
Create Table Tab_Payment
(
    Eid integer NOT NULL, 
    Date_of_Reflect date NOT NULL, 
    Amount integer NOT NULL,
    ...
    Constraint PK_Payment Primary Key(Eid,Date_of_Reflect),
    Constraint FK_Emp Foreign key (Eid) references Tab_Employee(Eid) ON DELETE NO ACTION ON UPDATE CASCADE,
); 
```

我将使用触发器将数据插入到 paymentLog 中。

```
Create Trigger Trigger_Payment_Audit
on Tab_Payment
after  update
As
    ...
GO 
```

我无法创建触发器。下面的错误来了。我应该怎么做才能解决这个问题。
**无法在“Tab_Payment”上创建 INSTEAD OF UPDATE 触发器“Trigger_Payment_Audit”。这是因为表有一个带有级联 UPDATE 的 FOREIGN KEY。**

我在 SO 上找到了类似的帖子。回合并没有帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:21:19.477

行。最后我解决了我的问题。实际上那里没有真正的错误。这只是编辑指出的一个错误。即使显示有错误，我也能够运行触发器。

# android - TextView StringIndexOutOfBoundsException 和 IndexOutOfBoundsException 在 processToSupportEmoji 中崩溃

> ID：15590043
> 
> 赞同：5
> 
> 时间：2013-03-23T17:45:34.397
> 
> 标签：android, textview

我收到了少量 Crittercism 崩溃报告，其堆栈跟踪类似于下面的堆栈跟踪。崩溃并非源自我的代码。

此论坛帖子表明这可能是由于 TextView 的自定义 OEM 实现中的错误：
[https ://groups.google.com/forum/?fromgroups=#!topic/android-developers/_53F4WBM8-I](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/_53F4WBM8-I)

任何人都可以确认是否是这种情况？即使很少有用户受到影响，我也很想知道是否有修复/解决方法？

到目前为止，我的崩溃报告显示这些设备受到影响：

*   OS 2.3.6 上的阿尔卡特 ONE TOUCH 903
*   OS 2.3.6 上的阿尔卡特 ONE TOUCH 918D
*   OS 2.3.6 上的阿尔卡特 ONE TOUCH 991D
*   OS 2.3.5 上的鹦鹉
*   操作系统 2.3.4 上的 A102S_MULA
*   操作系统 2.3.5 上的 T9199+
*   操作系统 2.3.6 上的三叉戟 A7

的堆栈跟踪`StringIndexOutOfBoundsException`：

```
java.lang.StringIndexOutOfBoundsException
at  java.lang.String.getChars(String.java:1059)
at  android.text.SpannableStringInternal.getChars(SpannableStringInternal.java:102)
at  android.text.TextUtils.getChars(TextUtils.java:101)
at  android.text.Layout.processToSupportEmoji(Layout.java:3752)
at  android.text.Layout.supportTabandEmoji(Layout.java:3790)
at  android.text.Layout.measureText2(Layout.java:3148)
at  android.text.Layout.getDesiredWidth2(Layout.java:183)
at  android.text.Layout.getDesiredWidth2(Layout.java:161)
at  android.widget.TextView.onMeasure2(TextView.java:5950)
at  android.widget.TextView.onMeasure(TextView.java:6163)
at  android.view.View.measure(View.java:8396)
at  android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:612)
at  android.widget.RelativeLayout.onMeasure(RelativeLayout.java:396)
at  android.view.View.measure(View.java:8396)
at  android.widget.ListView.setupChild(ListView.java:1862)
at  android.widget.ListView.makeAndAddView(ListView.java:1789)
at  android.widget.ListView.fillDown(ListView.java:705)
at  android.widget.ListView.fillFromTop(ListView.java:762)
at  android.widget.ListView.layoutChildren(ListView.java:1625)
at  android.widget.AbsListView.onLayout(AbsListView.java:1299)
at  android.view.View.layout(View.java:7225)
at  android.widget.FrameLayout.onLayout(FrameLayout.java:369)
at  android.view.View.layout(View.java:7225)
at  android.widget.FrameLayout.onLayout(FrameLayout.java:369)
at  android.view.View.layout(View.java:7225)
at  android.support.v4.view.ViewPager.onLayout(ViewPager.java:1520)
at  android.view.View.layout(View.java:7225)
at  android.widget.LinearLayout.setChildFrame(LinearLayout.java:1285)
at  android.widget.LinearLayout.layoutVertical(LinearLayout.java:1161)
at  android.widget.LinearLayout.onLayout(LinearLayout.java:1078)
at  android.view.View.layout(View.java:7225)
at  android.widget.FrameLayout.onLayout(FrameLayout.java:369)
at  android.view.View.layout(View.java:7225)
at  android.widget.RelativeLayout.onLayout(RelativeLayout.java:943)
at  android.view.View.layout(View.java:7225)
at  android.widget.FrameLayout.onLayout(FrameLayout.java:369)
at  android.view.View.layout(View.java:7225)
at  android.widget.LinearLayout.setChildFrame(LinearLayout.java:1285)
at  android.widget.LinearLayout.layoutVertical(LinearLayout.java:1161)
at  android.widget.LinearLayout.onLayout(LinearLayout.java:1078)
at  android.view.View.layout(View.java:7225)
at  android.widget.FrameLayout.onLayout(FrameLayout.java:369)
at  android.view.View.layout(View.java:7225)
at  android.view.ViewRoot.performTraversals(ViewRoot.java:1189)
at  android.view.ViewRoot.handleMessage(ViewRoot.java:1914)
at  android.os.Handler.dispatchMessage(Handler.java:130)
at  android.os.Looper.loop(SourceFile:351)
at  android.app.ActivityThread.main(ActivityThread.java:3833)
at  java.lang.reflect.Method.invokeNative(Native Method)
at  java.lang.reflect.Method.invoke(Method.java:538)
at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:901)
at  com.android.internal.os.ZygoteInit.main(ZygoteInit.java:659)
at  dalvik.system.NativeStart.main(Native Method) 
```

这是`IndexOutOfBoundsException`：

```
java.lang.IndexOutOfBoundsException: getChars (6 ... 8) ends beyond length 7
at  android.text.SpannableStringBuilder.checkRange(SpannableStringBuilder.java:1104)
at  android.text.SpannableStringBuilder.getChars(SpannableStringBuilder.java:1008)
at  android.text.TextUtils.getChars(TextUtils.java:101)
at  android.text.Layout.processToSupportEmoji(Layout.java:3752)
at  android.text.Layout.supportTabandEmoji(Layout.java:3790)
at  android.text.StaticLayout.generate2(StaticLayout.java:722)
at  android.text.DynamicLayout.reflow(DynamicLayout.java:404)
at  android.text.DynamicLayout.access$000(DynamicLayout.java:70)
at  android.text.DynamicLayout$ChangeWatcher.reflow(DynamicLayout.java:592)
at  android.text.DynamicLayout$ChangeWatcher.onTextChanged(DynamicLayout.java:604)
at  android.text.SpannableStringBuilder.sendTextChange(SpannableStringBuilder.java:1050)
at  android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:470)
at  android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:387)
at  android.text.SpannableStringBuilder.replaceInternal(SpannableStringBuilder.java:593)
at  android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:542)
at  android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:527)
at  android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:67)
at  android.view.inputmethod.BaseInputConnection.replaceText(BaseInputConnection.java:701)
at  android.view.inputmethod.BaseInputConnection.commitText(BaseInputConnection.java:227)
at  com.android.internal.widget.EditableInputConnection.commitText(EditableInputConnection.java:153)
at  com.android.internal.view.IInputConnectionWrapper.executeMessage(IInputConnectionWrapper.java:304)
at  com.android.internal.view.IInputConnectionWrapper$MyHandler.handleMessage(IInputConnectionWrapper.java:106)
at  android.os.Handler.dispatchMessage(Handler.java:130)
at  android.os.Looper.loop(SourceFile:351)
at  android.app.ActivityThread.main(ActivityThread.java:3833)
at  java.lang.reflect.Method.invokeNative(Native Method)
at  java.lang.reflect.Method.invoke(Method.java:538)
at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:901)
at  com.android.internal.os.ZygoteInit.main(ZygoteInit.java:659)
at  dalvik.system.NativeStart.main(Native Method) 
```

# c - 处理字符串中的多个 '\000' 并增加 ASCII 值

> ID：15590044
> 
> 赞同：0
> 
> 时间：2013-03-23T17:45:34.997
> 
> 标签：c, string, data-structures

我正在开发一个应用程序，在该应用程序中遇到了包含多个“\000”终止字符的字符串。我想要字符串中的那个空字符。在处理这个时，字符串仅在 '\000' 处终止，所以我试图增加它的 ASCII 值。但是当我这样做时，我得到了分段错误。

我在下面写了代码段

```
 char *content; 
 content = malloc(8);
 content = "\037\000\000\000\000\037\037\037";
 int content_length = 8;
 content[1] = content[1] + 1;    // Increasing the ASCII value 
```

在这里，如果我删除增加 ASCII 值的最后一行，我的应用程序中只会收到 1 个字节。所以已经改变了第二个字节（内容[1]）然后应该传输2个字节，但是我得到了分段错误。

难道我做错了什么？十六进制或八进制数字是这样的吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T17:47:20.843

```
"\037\000\000\000\000\037\037\037" 
```

是一个字符串文字。字符串文字在 C 中是不可修改的。写入字符串文字是未定义的行为。

然后：

```
content = malloc(8);
content = "\037\000\000\000\000\037\037\037"; 
```

您从中获得了一些内存，`malloc`但您正在覆盖指针对象以使其指向 elsewehere（字符串文字），这称为*内存泄漏*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:47:57.567

> 难道我做错了什么？

确实。首先，您将指针重新分配`content`给其他东西，从而有效地**泄漏分配的内存。**

其次，引号之间的字符串是字符串文字，其内容不能被修改。您的程序调用未定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T17:59:28.813

您需要创建存储。要么用它初始化一个数组：

```
char content[] = "\037\000\000\000\000\037\037\037"; 
```

或者，如果您想使用`malloc`而不是数组，则可以使用`memcpy`来复制确切的字节数：

```
memcpy(content, "\037\000\000\000\000\037\037\037", 8); 
```

# shell - 将文件的最后几行复制到剪贴板

> ID：15590045
> 
> 赞同：0
> 
> 时间：2013-03-23T17:45:38.287
> 
> 标签：shell, applescript, copy-paste

我正在尝试使用 pbcopy 之类的东西将文件的最后几行复制到 Mac OS X 上的剪贴板（但显然 pbcopy 只是复制整个内容）。

用例是，我有一个非常大的日志文件，我只想将最后几行（例如最后 5 行）复制到剪贴板以了解最近发生的事情。

这需要由键盘驱动，以便我可以快速执行它。

不要介意它是 AppleScript 还是 Shell 脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T17:52:24.310

我刚刚使用 OS X 进行了尝试，它成功了。它将日志文件的最后 5 行复制到剪贴板。将它绑定到一个热键，你应该设置。

```
tail -5 'somefile.log' | pbcopy 
```

要将终端命令绑定到热键，您可能可以使用 automator.app，或下载[Platypus](http://sveinbjorn.org/platypus)以从上述脚本生成一个 .app。然后，您可以进入系统偏好设置中的键盘设置并设置绑定。

# asp.net-mvc - asp.net mvc aws sdk - 不呈现 html 电子邮件

> ID：15590060
> 
> 赞同：0
> 
> 时间：2013-03-23T17:46:41.653
> 
> 标签：asp.net-mvc, amazon

我正在使用 asw sdk 发送电子邮件。我在呈现电子邮件时遇到问题。电子邮件发送正常，但在电子邮件网络客户端（例如 Gmail）中，电子邮件是纯文本的。下面是我的代码：

```
string fileInfo = HttpContext.Current.Server.MapPath("~/Content/template.html");
string html = File.ReadAllText(fileInfo);

MailService.SendEmail(from, html, "Password reset", emails); 
```

template.html 文件是经过验证的严格 html 文件。

发送电子邮件方法：

```
public static void SendEmail(string emailFrom, string emailBody, string emailSubject, List<string> toAddresses)
    {
        AmazonSimpleEmailServiceConfig amazonConfiguration = new AmazonSimpleEmailServiceConfig();
        AmazonSimpleEmailServiceClient client = new AmazonSimpleEmailServiceClient("keyId","secretKey",amazonConfiguration);                 

        Destination destination = new Destination();
        destination.ToAddresses = toAddresses;
        Body body = new Body() { Html = new Content(emailBody) };

        Content subject = new Content(emailSubject);
        Message message = new Message(subject, body);

        SendEmailRequest sendEmailRequest = new SendEmailRequest(emailFrom, destination, message);

        client.SendEmail(sendEmailRequest);
    } 
```

电子邮件已送达，但它是纯文本格式的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:53:18.540

我弄清楚。Gmail 只是不支持样式标签。你必须把你的样式内联，所以直接放在 div 或 table 标记中。

# php - 另一个 Htaccess 问题

> ID：15590067
> 
> 赞同：1
> 
> 时间：2013-03-23T17:47:13.877
> 
> 标签：php, .htaccess

好吧，我认为一切都是笨拙的，直到我想缩短一些我认为是小菜一碟的 URL。

我开发了自己的 MVC 结构，其中所有页面都通过 index.php 并根据 url 动态加载相关控制器和模型。这给了我漂亮和干净的 url，并且随着应用程序变得越来越大，它更容易开发。

所以在我的 Htaccess 文件中，我有以下内容：

```
RewriteRule ^(.+)$  index.php?url=$1 [QSA,L] 
```

在我的 index.php 中，我计算了 url 的长度并加载到所需的控制器等中......

```
$length = count($url); 

if($length > 5)
        {
            $this->Error->index();
            return FALSE;
        } 

    switch ($length) 
    {
        case 5:
            $controller_name->{$url[1]}($url[2], $url[3], $url[4]);
            break;

        case 4:
            $controller_name->{$url[1]}($url[2], $url[3]);
            break;

        case 3:

            $controller_name->{$url[1]}($url[2]);
            break;

        case 2:
            $controller_name->{$url[1]}();
            break;

        default:
            $controller_name->index();
            break;
    } 
```

这一切都很好，所以这是我的问题，我有一个网址 www.thepage.com/accounts/general_users/profile/[account_name]

所以我想通过删除'accounts/general_users/'来缩短这个网址，我在我的 htaccess 中厌倦了以下内容：

```
RewriteRule ^profile/april.lee$     accounts/general_users/profile/april.lee [QSA,L] 
```

但这似乎不想与我的初始 RewriteRule 配合得很好，如果它位于第一个 RewriteRule 之下它只是不呈现，如果它高于它似乎会破坏应用程序。

我很困惑该怎么做，并希望得到一点指导/建议。我真的很想提出一个解决方案，而不必重新设计整个应用程序。

更新以演示我如何加载我的控制器和模型：

1-我获取并清理 URL：

```
// Get Clean URL 
$url = isset($_GET['url']) ? $_GET['url'] : NULL;
$url = rtrim($url, '/');
$url = filter_var($url, FILTER_SANITIZE_URL);
$url = explode('/', $url);

// Start Session
session_start(); 

// Create Application Core
require_once(APP_PATH . "core/core.php");
$AC = new Application_Core($config); 
```

2-检查它是否为空

```
if(empty($url[0]))
{
        // Load and Instantiate Model
    require(APP_PATH."models/m_index.php");
    $this->Model = new m_index();

    // Load and Instantiate Controller
    require(APP_PATH."controllers/index.php");
    $controller = new index();
    $controller->index();   
} 

else
{

// Load and Instantiate Model
        $model_file = APP_PATH."models/m_".$url[0].".php";
        if(file_exists($model_file))
        {
            include($model_file);
            $model_name = "m_".$url[0];
            $this->Model = new $model_name();
        }
        else
        {
            echo $url[0];
            $this->Template->render_error($this->error_page, $this->error_message);
            return FALSE;
        }

        // Load and Instantiate Controller
        $controller_file = APP_PATH."controllers/".$url[0].".php";

        if(file_exists($controller_file))
        {
            require(APP_PATH."controllers/".$url[0].".php");
            $controller_name = $url[0];
            $controller_name = new $controller_name();
        }
        else
        {
            $this->Template->render_error($this->error_page, $this->error_message);
            return FALSE;
        }

        $length = count($url); 

        // Check Method Exists
        if ($length > 1) {
            if (!method_exists($controller_name, $url[1])) {
                $this->Template->render_error($this->error_page, $this->error_message);
                return FALSE;
            }
        }

        if($length > 5)
        {
            $this->Error->index();
            return FALSE;
        } 

        switch ($length) 
        {
            case 5:
                $controller_name->{$url[1]}($url[2], $url[3], $url[4]);
                break;

            case 4:
                $controller_name->{$url[1]}($url[2], $url[3]);
                break;

            case 3:

                $controller_name->{$url[1]}($url[2]);
                break;

            case 2:
                $controller_name->{$url[1]}();
                break;

            default:
                $controller_name->index();
                break;

        } 
```

3 - 检查长度并加载适当的控制器和模型，如果方法不存在，用户将被重定向到错误页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:01:12.240

这似乎可以通过不控制 URL 的长度来更好地处理。如果有人在最​​短链接的末尾输入额外的变量以查看会发生什么，会发生什么？他们是否会从您的网站获得针对其他用户的行为，这可能很糟糕。

您可以使用 htaccess 来完成您的交换机正在做的所有事情，从而减少头痛。

```
RewriteCond %{http_host} ^mysite.com/ [nc]
RewriteRule ^(.*)$ http://www.mysite.com/$1 [nc]

RewriteRule ^profile/(.*)$ accounts/general_users/profile/$1 [QSA, L]
RewriteRule ^url_for_control1/match$ index.php?controller=1&%{QUERY_STRING} 
```

**编辑：**
要使这个工作与您的 index.php 文件取决于它的作用，如果您的控制功能将用户重定向到另一个页面，您可以让 htaccess 为您执行此操作。

比如下面的..

```
RewriteCond %{http_host} ^mysite.com/ [nc]
RewriteRule ^(.*)$ http://www.mysite.com/$1 [nc]

RewriteRule ^employees/(.*)/(.*)$ index.php?first=$1&last=$2&%{QUERY_STRING} 
```

将请求重定向到：
[http ://www.mysite.com/employees/john/doe 到：](http://www.mysite.com/employees/john/doe) [http](http://www.mysite.com/index.php?first=john&last=doe&anyother=variables_sent)

: //www.mysite.com/index.php?first=john&last=doe&anyother=variables_sent ... 使用 GET 或POST 变量取决于页面的请求方式。 了解这一点后，您可以创建更简洁的 URL，这些 URL 对搜索引擎友好且更易于人类阅读和理解。您可以通过在 url 中搜索特定特征并通过变量告诉 index.php 页面使用哪个控制函数来继续向 index.php 发送请求。

仅仅基于 URL 中的字符数量来确定页面的操作并不是一个好主意，原因有很多，包括创建一个可以轻松更改和升级的站点。

[Net Tuts 也为 htaccess 提供了不错的初学者教程。](http://net.tutsplus.com/tutorials/other/the-ultimate-guide-to-htaccess-files/)

# android - 如何从应用程序发送电子邮件

> ID：15590070
> 
> 赞同：1
> 
> 时间：2013-03-23T17:47:32.973
> 
> 标签：android, security, email, passwords

我需要从应用程序发送电子邮件。到目前为止，我使用的 JavaMail Api 运行良好，但存在一些问题：

*   我需要将密码硬编码到应该发送邮件的 gmail 帐户，这显然不是很好
*   谷歌最近检测到一些“可疑登录”（我不知道这是否真的是某些人试图访问该帐户或只是从应用程序正常登录），但谷歌强迫我更改密码，这显然使该应用程序无用，因为它无法再发送电子邮件了。

我不想总是因为我不得不更改密码而发布更新。

因此，如果您对如何：

*   使硬编码的密码非常安全并防止谷歌强迫我更改密码

*   或以其他不需要硬编码密码的方式发送电子邮件（例如通过 http 请求，但这并不真正起作用，因为服务器认为我在发送垃圾邮件并阻止网络空间......）

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:56:03.470

如果您希望应用程序生成电子邮件并将其发送给用户，最好的方法是从后端系统发送电子邮件。发布一个 REST API，您的移动应用程序可以与之交互并让该后端处理发送电子邮件。它将更安全，并且您将获得适当的解耦。这是处理它的唯一好方法。

应用程序中的编码密码始终可以解密，因为加密密钥也将存储在应用程序的某个位置。另外，正如您已经说过的那样，将代码放在您的应用程序中的麻烦，以及更新该代码的难度可能是一场噩梦（并非所有用户都经常更新他们的应用程序）。

如果您希望应用程序代表用户发送电子邮件（使其就像用户发送电子邮件一样），请使用评论中所述的 CommonsWare 意图。它使用户可以看到已发送电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:53:23.690

不确定它必须多久发送一次电子邮件，但您可以使用 4 位密码加密密码，然后在启动时要求输入密码，解密密码并将其保存在内存中。如果您被换掉，您需要重新解密它，但它会使用户的密码更加安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T23:18:18.800

我同意 ddewaele：适当的 API 是必要的。请注意，有些在线服务可以为您提供简单的 API。有关一些示例，请参阅[移动应用程序的后端服务器提供商](https://stackoverflow.com/questions/10116843/backend-server-provider-for-mobile-apps)。有些对少数用户免费。

# wpf - 对 UIElement 进行分组的最佳轻量级容器是什么？

> ID：15590074
> 
> 赞同：0
> 
> 时间：2013-03-23T17:47:53.680
> 
> 标签：wpf, uielement

我在 WPF 中自我训练。我正在使用 a`Canvas`将两个多边形组合在一起：

```
var grp = new Canvas();

var polygon = new new Polygon();
polygon.Points.Add(new Point(-15, -20));
polygon.Points.Add(new Point(0, 20));
polygon.Points.Add(new Point(15, -20));
polygon.StrokeThickness = 1;
polygon.Stroke = Brushes.Violet;
polygon.Fill = Brushes.Yellow;

var rotationCenter = centroid(polygon);

var centerPoint = new Ellipse();
Canvas.SetLeft(centerPoint, rotationCenter.X -1 );
Canvas.SetTop(centerPoint, rotationCenter.Y-1);
centerPoint.Fill = Brushes.Green;
centerPoint.Height = 3;
centerPoint.Width = 3;

grp.Children.Add(shipPolygon);
grp.Children.Add(centerPoint); 
```

然后，我使用 grp 移动、旋转和玩我的分组多边形`Canvas`。

因为除了将多边形彼此分组之外，我不想将 my`Canvas`用于其他任何事情，我想知道它是否存在比 a 更轻的东西`Canvas`来做到这一点。

我在 WPF3D 中搜索了类似的东西来`Model3DGroup`对 WPF2D 中的 UIElements 进行分组，但没有成功。

`Canvas`对 UIElements 进行分组的最轻的容器是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:17:19.287

您对分组的意思实际上称为 wpf 中的布局。你选择一个容器来布置你的孩子。

是的，帆布是最愚蠢的容器，所以它是最轻的。网格具有非常智能的列和行，stackpanel 根据方向堆叠其子项，但画布除了根据 x 和 y 值放置 uielements 之外什么也不做。

因此，我认为画布非常适合您的示例，因为您希望在绘制图形之前有一些偏移。

# jquery - 从表单中获取参数

> ID：15590076
> 
> 赞同：0
> 
> 时间：2013-03-23T17:47:57.947
> 
> 标签：jquery, html, cordova

在 phonegap 中，我使用了一个 jquery 移动框架。我想通过使用页面 url 将表单数据传递到下一页，这是一个 div。我尝试使用 GetElementByID 来检索参数`searchlocation`。它可能无法工作。无法检索该参数，它不会转到下一页。我该如何解决？

下面是转换到下一页的功能 DIV 是我的phonegap的代码：

```
<script type="text/javascript">
$('#home').live('pagecreate',function(event) { 
$("#form").submit( function (e) {
        e.preventDefault();
        var x=document.getElementById("searchlocation");
        $.mobile.changePage("#page1?param1="+x);
    });
});
</script> 
```

和表单html：

```
<form id="form" method="POST" action="page1" data-ajax="false">
                <div data-role="fieldcontain" id="search">
                    <fieldset data-role="controlgroup">
                        <label for="search">
                            Search
                        </label>
                        <input name="searchword" id="searchword" placeholder="" value="" type="search" />
                    </fieldset>
                </div>
                <div data-role="fieldcontain" id="searchcondition">
                    <label for="searchmethod">
                    </label>
                    <select id="searchmethod" name="searchmethod" data-theme="e">
                        <option value="keyword">
                            Keyword
                        </option>
                    </select>
                </div>
                <div data-role="fieldcontain2" id="searchcondition2">
                    <label for="searchlocation2">
                    </label>
                    <select id="searchlocation" name="searchlocation"  data-theme="e">
                        <option value="Entire Collection">
                            Entire Collection
                        </option>
                        <option value="Pearl River Delta and Yangtze River Delta Collection">
                            Pearl River Delta and Yangtze River Delta Collection
                        </option>
                    </select>
                </div>
                <input type="submit" value="Submit" />
            </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:50:18.170

```
var x = document.getElementById("searchlocation"); 
```

上面的代码获取元素，而不是值。

考虑到您使用的是 jQuery，您可以使用：

```
var x = $('#searchlocation').val(); 
```

# ruby-on-rails - understanding groups in ruby on rails gemfile

> ID：15590077
> 
> 赞同：1
> 
> 时间：2013-03-23T17:48:00.643
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, gem

I've seen some syntax where

```
group :development, :test do
  gem "rspec-rails", ">= 2.0.0.beta.19"
  gem "cucumber-rails", ">= 0.3.2"
  gem "webrat", ">= 0.7.2.beta.1"
end 
```

or

```
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end 
```

or

```
group :production do
  # gems...
end 
```

or

```
group :db do
  # gems..
end 
```

Are there problems with just doing bundle install with ALL the gems? Why do people want to leave out gems? Wouldn't it just be easier if everything was installed all together?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T17:55:38.560

Group's 主要用于主要用于环境的 gem 隔离。假设在开发环境中，我们希望`pry`在生产中我们不会做任何调试任务，所以我们不需要 pry 以获取更多信息您可以参考[yehuda](http://yehudakatz.com/2010/05/09/the-how-and-why-of-bundler-groups/)博客

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T18:01:09.327

重建一个包含大量 gem 的大型项目可能需要几分钟时间。您可以通过仅构建需要的内容来减少构建时间。

# html - RSS 友好的 HTML，用于类似杂志的报价布局

> ID：15590080
> 
> 赞同：3
> 
> 时间：2013-03-23T17:48:16.427
> 
> 标签：html, semantics

我的问题只是关于类似杂志的引述，例如您可以在[theverge.com](http://www.theverge.com/2013/3/22/4134580/microsoft-defends-windows-rt-fails-to-answer-criticisms)上找到的引述。

![类似杂志的报价截图](../Images/ce7de6ce1fafcb9259a1069849c442aa.png)

它可以用`blockquote`or来完成，`q`但由于它经常重复部分内容和布局的一部分，所以将它们放在 RSS 提要中并没有什么意义，对于 SEO 也没有。

我想知道保持这种布局的**最佳做法是什么，并有一个干净的 RSS 提要。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:47:58.153

它被称为[拉报价](http://en.wikipedia.org/wiki/Pull_quote)。

你不应该使用[`blockquote`](http://www.w3.org/TR/html5/grouping-content.html#the-blockquote-element)or [`q`](http://www.w3.org/TR/html5/text-level-semantics.html#the-q-element)，因为内容*不是*

> 引用自另一个来源。

（仅当您使用作为采访等一部分的拉引号时，即如果引用了原始内容本身，您可以使用`blockquote`/ `q`。）

该[`aside`元素](http://www.w3.org/TR/html5/sections.html#the-aside-element)在这里是合适的：

> 该元素可用于印刷效果，如**拉引号**[…]

现在您可以决定删除提要`aside`的所有元素（即 的子元素`article`）。

或者您只能删除具有特定类别的那些，例如：`<aside class="pull-quote">…&lt;/aside>`

或者你保留它们。我认为它们*可以*有价值。它们可以是引人注目的，类似于标题。如果有人滚动浏览较长的提要条目，这样的拉引号通常会脱颖而出（前后换行），因此可能会首先阅读它们，并且可能会让读者有兴趣详细阅读该部分。

# c - 这个 Makefile 有什么问题？

> ID：15590089
> 
> 赞同：1
> 
> 时间：2013-03-23T17:48:51.757
> 
> 标签：c, eclipse, makefile

我正在尝试学习如何在带有 C 的 Ubuntu 中使用 makefile（您可能猜到我是初学者）。在“A Book on C”中有一个关于这个主题的章节，他们给出了 3 个文件的简单示例：main.c、sum.c、sum.h（无代码）和一个包含以下代码的 makefile：

```
sum: main.o sum.o
    gcc –o sum main.o sum.o
main.o: main.c sum.h
    gcc –c main.c 
sum.o: sum.c sum.h
    gcc –c sum.c 
```

现在，我正在尝试在 Eclipse 中编译此代码，但它不起作用。我用上面的代码和前面提到的 3 个文件创建了一个名为 makefile 的文件。这是我得到的错误：

```
make all 
make: *** No rule to make target `all'.  Stop. 
```

我将不胜感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T17:50:11.950

运行“make all”，意味着您正在尝试构建一个名为“all”的目标，但您还没有定义一个目标。

您需要在第一行添加：

```
all: sum 
```

顺便说一句，如果您运行“make”（不带参数），它将构建第一个目标（如果没有“all”目标）。这就是为什么我建议您将“全部”目标作为第一个目标。

# objective-c - 使用代码切换视图控制器

> ID：15590091
> 
> 赞同：1
> 
> 时间：2013-03-23T17:49:07.660
> 
> 标签：objective-c, cocoa-touch

我有一个游戏，当你松开时，我正试图回到主屏幕。当您松开时，此代码块会运行，但是当我取消注释代码末尾的行时，它会在我尝试运行它时给我一个错误。主屏幕和游戏的视图控制器和分类是不同的。我在网上找不到任何有效的东西。

```
-(void)resetAll {
    [randomMain invalidate];

    CGRect frame = [player frame];
    frame.origin.x = 137.0f;
    frame.origin.y = 326.0;
    [player setFrame:frame];

    CGRect frame2 = [enemy frame];
    frame2.origin.x = 137.0f;
    frame2.origin.y = 20.0;
    [enemy setFrame:frame2];
    [NSObject cancelPreviousPerformRequestsWithTarget:self];
    [timerImageView stopAnimating];
    counter.text=@"";
    int sum = [lastRoundCash intValue] + [playerCash intValue];
    playerCash = [NSString stringWithFormat:@"%d", sum];
    [self performSelector:@selector(save) withObject:nil afterDelay:0];
    [self performSelector:@selector(updateLabelState) withObject:nil afterDelay:0];
    [freezeUseOutlet setHidden:true];

    int x = [lastRoundRound floatValue];
    int y = [highScore floatValue];

    if (x>y) {
        highScore=lastRoundRound;
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"New High Score!" message:[NSString stringWithFormat:@"You beat your high score!  Your high score is now %@!",highScore] delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
        [alert show];
        [self performSelector:@selector(updateLabelState) withObject:nil afterDelay:0];
        [self.navigationController pushViewController:ViewController animated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:53:52.973

我想你想弹出视图控制器。

# ios - 如何修改触摸和拖动灵敏度？

> ID：15590093
> 
> 赞同：10
> 
> 时间：2013-03-23T17:49:11.743
> 
> 标签：ios

我正在为残障人士开发一款应用程序，在测试中我们发现他们在使用默认的触摸拖动功能时遇到了很多问题。

我们有一个屏幕，在 UIScrollView 中有一个图标网格。您可以触摸图标将其激活，也可以触摸拖动网格中的任意位置（包括图标上）以滚动网格并查看更多图标。

在 iOS 中，默认行为是您在一个动作中触摸并拖动。这需要一定程度的身体协调，如果您触摸并暂停*然后*拖动，或者稍微偏离路线，系统会将其视为简单触摸。所以我们的测试人员正在做这样的事情：

*   触摸，暂停片刻，然后尝试拖动。网格不滚动。如果他们试图通过拖动图标来滚动，当他们释放触摸时，它会激活图标。

*   触摸，尝试垂直拖动（唯一支持的方向），但先水平转向一点。结果和上面一样。

所以问题是：有没有办法覆盖触摸处理以建立对缓慢或拖动不准确的更大容忍度，以便应用程序将上述动作正确解释为滚动请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T18:16:19.923

首先，完整阅读[本指南](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizer_basics/GestureRecognizer_basics.html#//apple_ref/doc/uid/TP40009541-CH2-SW2)（如果需要，两次或三次），以了解 UIkit 的触摸机制是如何构建的。它涉及到用户的想法`touch`，事件如何与底层硬件交互，所有对象拦截它，以及如何根据需要调整现有的 UIkit 触摸界面，至少在概念上。

[引起我注意的一点](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITouch_Class/Reference/Reference.html#//apple_ref/occ/instp/UITouch/)你也不能错过，尤其是像`timestamp`,`phase`和`previousLocationInView`. （我只提到那些不是很受欢迎的）。

最后，我不知道，但您最终可以[创建自己的自定义手势识别](http://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizer_basics/GestureRecognizer_basics.html#//apple_ref/doc/uid/TP40009541-CH2-SW44)器，该识别器将根据您的需求量身定制。

**更新：**

虽然与要求不太相关，[但这](http://developer.apple.com/library/ios/#samplecode/Touches/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007435)对于初学者来说是一个好的开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T16:42:54.737

您应该使用 UILongPressGestureRecognizer ( [http://developer.apple.com/library/ios/#documentation/uikit/reference/UILongPressGestureRecognizer_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UILongPressGestureRecognizer_Class/Reference/Reference.html) )，并且：

*   将 minimumPressDuration 设置为非常短的值（例如 10）
*   将 allowableMovement 设置为非常大的值（例如 500）

......现在你有了一个对摇摆不定的按压等“宽容”的手势。我已经在几个针对学龄前儿童/幼儿的应用程序中使用了它，而且效果很好。

回复：滚动逻辑，UIScrollView 很容易以编程方式控制 - 如果您阅读 UIScrollView 的文档和所有“委托”类，您应该找到通过 UILongPressGestureRecognizer 手势回调“控制”它所需的一切。

注意：您不需要编写任何自定义 GestureRecognizer - Apples 的 UILongPressGestureRecognizer 为您完成所有工作，并在手势移动时为您提供回调；你只是回应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T04:46:16.523

有许多方法可以自定义手势识别的行为而无需子类化。

一种可能适合某些人群的快速方法是让用户在**Settings>General>Accessibility>AssistiveTouch**中配置自定义手势。以这种方式，例如，可以记录垂直平移，当启用时，可以通过点击辅助触摸菜单来使用该平移。

***其余的假设你想要更多的控制权。***

看看**requireGestureRecognizerToFail** :. 此方法将允许您优先处理手势识别器，而无需子类化，因此，例如，平移手势必须在识别点击之前失败。

滚动视图的手势识别器可作为 UIScrollView 上的属性访问。您可能还想实现**UIGestureRecognizerDelegate**。您可以在三种方法中的任何一种中调整行为，**gestureRecognizerShouldBegin** :、**gestureRecognizer:shouldReceiveTouch** : 和**gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer** :。

要考虑的另一种方法是自定义每个手势所需的触摸次数。将任一手势的最小值设置为 2 将确保在只有一次触摸时仅调用另一个识别器。

对于非常低级别的控制，您可以继承 UIApplication 或 UIWindow 以拦截到手势识别器的触摸传递。

鉴于您的目标人群可能没有相同的能力，我建议使用首选项设置来配置这些调整，以使它们与用户匹配。这实际上应该是在系统级别设置的一组全局首选项，可能在我上面提到的**辅助功能**首选项中，所以我鼓励您向 Apple 提交一个错误，准确列出需要哪些调整，以及您可以提供的任何参考信息.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T18:01:04.570

您当然可以使用自定义触摸手势识别器并捕获触摸手势识别器委托方法，例如 touchDidBegin 或 shouldRecieveTouch，诸如此类的东西，我不记得它们的确切措辞。只需查找自定义触摸手势识别器和触摸手势识别器委托。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T13:34:03.437

事实证明，默认`UIScrollView`滚动是正确的，但问题很简单，如果用户触摸按钮，**按钮**会获得触摸事件，**而不是**ScrollView，这让我很困惑。

所以我来解决这个问题的方法是**禁用**按钮，然后 ScrollView 接收触摸。`UIScrollView`然后我使用我在其中实现`TouchesBegan`和`TouchesEnded`方法的自定义子类。在这些方法中，我记录用户向下和向上触摸的位置，如果它们彼此靠近并且在（禁用）按钮上，然后我执行该按钮执行的操作。

这工作得很好，但我认为这肯定比应该做的要多。所以也许我的问题应该是：有没有办法让按钮保持启用状态，但让滚动视图在其子视图之前获得触摸事件，根据需要滚动，然后将事件中继到子视图？

# javascript - 是什么让 jQuery 无法通过其 id 获取 dom？

> ID：15590097
> 
> 赞同：2
> 
> 时间：2013-03-23T17:49:26.940
> 
> 标签：javascript, jquery, html, dom

当我使用

```
alert(j(this).attr("id")); 
```

我可以看到弹出窗口出现`_denominations[3].id.denominationId`

但是当我打电话时

```
alert(j('#_denominations[3].id.denominationId').attr("id")); 
```

弹出窗口显示`'undefined'`，实际的 html DOM 如下所示：

```
<div class="form-field">
    <select id="_denominations[3].id.denominationId" class="removableDenom" name="denominations[3].id.denominationId">
</div> 
```

那么什么机会可能会`undefined`弹出

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T17:50:56.377

尝试转义 ID 值本身中的句点和括号。所以你的价值：

```
'#_denominations[3].id.denominationId' 
```

变成

```
'#_denominations\\[3\\]\\.id\\.denominationId' 
```

jQuery 很可能将这些与类和属性选择器混淆了。

示例：http: [//jsfiddle.net/jonathansampson/ZUMna/](http://jsfiddle.net/jonathansampson/ZUMna/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T17:51:26.783

您需要转义 ID 中的特殊字符 ..即, `[`....因为 jquery 将其作为属性选择器和类选择器..`]``.``[]``.`

试试这个

```
alert(j('#_denominations\\[3\\]\\.id\\.denominationId').attr("id")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T17:51:59.193

jQuery 假设这些`[]`是属性选择器，而不是 ID 的一部分；[特殊字符](http://api.jquery.com/category/selectors/?rdfrom=http%3A%2F%2Fdocs.jquery.com%2Fmw%2Findex.php%3Ftitle%3DSelectors%26redirect%3Dno)必须转义。`[]` [在 HTML5 之前实际上不允许](http://www.w3.org/TR/html4/types.html#type-name)在 HTML id 中使用，这可能会导致您以后遇到其他问题 - 我已经看到 document.getElementById 失败，因为 ID 以数字开头，例如，即使在旧版浏览器中使用 HTML5 doctype .

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T18:02:58.523

另一个捷径。

```
j('[id="_denominations[3].id.denominationId"]') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T18:04:35.183

我强烈建议您简化您的`id`和`name`属性。

以下来自 HTML4 文档，不同版本的 HTML 可能有所不同：http:
[//www.w3.org/TR/html4/types.html#type-id](http://www.w3.org/TR/html4/types.html#type-id)

`ID and NAME tokens must begin with a letter ([A-Za-z]) and may be followed by any number of letters, digits ([0-9]), hyphens ("-"), underscores ("_"), colons (":"), and periods (".").`

就我个人而言，我只使用字母数字、连字符和下划线字符。我尽量保持它们简短和语义化。这不仅让我自己更容易，也让其他可能使用我的代码的开发人员更容易。

# python - Eclipse Python align a block of code

> ID：15590100
> 
> 赞同：0
> 
> 时间：2013-03-23T17:49:48.997
> 
> 标签：python, eclipse

This is more of an IDE question :

In Eclipse + PyDev , how can I align a chunk of code with some line ?

Let's say I have this code

```
 myList=[]
   for i in list
      print i
      do a bunch of other stuff 
```

And in this example I wrote lets say that for some reason the for loop got indented once space when it shouldn't have - it needs to be aligned with the list("myList") definition. How can I indent\align the whole code block of the loop to the left so it is under list? Right now with no better solution I go line by line and move it to the correct spot . Tried using tab , no good ...I bet there's some easy answer for this...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:56:40.313

尝试 ：

> 窗口 > 首选项 > pydev > 编辑器 > 制表符长度

并将标签长度设置为 4。

附言。我也认为选择所有代码（突出显示它们）。然后，`Source > correct indentation`也会做的伎俩。不过，我还没有尝试过。

# css - Android Browser relative height inaccuracy

> ID：15590102
> 
> 赞同：0
> 
> 时间：2013-03-23T17:49:55.873
> 
> 标签：css, mobile, android-browser

I try to create 3 divs that covers whole space on mobile browser.

I occurred little problem.

With this styles:

```
<style>
            body, html {
              width:100%;
              height:100%;
              padding: 0;
              margin: 0;

            }

            .game-button {
              width:100%;
              padding:0;
              margin: 0;
              height:40%;       // 2*40% = 80%;

            }

            #first-player {
              background-color: #ff0000;
            }

            #second-player {
              background-color: #00ff00;
            }

            #lights {
              padding: 0;
              margin: 0;
              height:20%;
            }
</style> 
```

And this html code:

```
<body>
      <div id="first-player" class="game-button"></div>
      <div id="lights"></div>
      <div id="second-player" class="game-button"></div>
</body> 
```

The problem is the "white bar on the bottom of the screen" despite covering 100% of height in CSS.

Screenshot: ( it could be seen only on dark background so I link to imgur):
[http://imgur.com/MBXDawP](http://imgur.com/MBXDawP)

This effect sometimes (on one on my phones) doesn't exists when I delete :

```
<meta name="viewport" content="user-scalable=no" /> 
```

Here is the page

[http://twigit.pl/game.html](http://twigit.pl/game.html)

```
with <meta name="viewport" content="user-scalable=no"/> 
```

[http://twigit.pl/game2.html](http://twigit.pl/game2.html)

```
withOUT <meta name="viewport" content="user-scalable=no"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:52:25.600

Some mobile browsers will auto-scale unless you tell them otherwise. What's the problem?

EDIT: you should also set the viewport

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

and check this out

[http://html5boilerplate.com/mobile/](http://html5boilerplate.com/mobile/)

# java - 一个简单应用程序的随机报价生成器，请帮助:)

> ID：15590110
> 
> 赞同：0
> 
> 时间：2013-03-23T17:50:21.127
> 
> 标签：java, eclipse, random, generator

我感谢您的任何意见。我是编码新手，并设法制作了一个文本播放应用程序（以随机大小和颜色显示一行文本）。我试图创建一个随机报价应用程序并有两个按钮。我想用它们从两个单独的列表中选择一个报价。我该怎么做？我唯一的其他按钮体验是我制作的另一个初学者应用程序，它从计数器中添加或删除了一个数字：

```
package com.example;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class FOREVERAPHONE extends Activity {
    int counter;
    Button add, sub;
    TextView display;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_foreveraphone);

        counter = 0;
        add = (Button) findViewById(R.id.bAdd);
        sub = (Button) findViewById(R.id.bSub);
        display = (TextView) findViewById(R.id.tvDisplay);
        add.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                counter += 1;
                display.setText("counter");
            }
        });
        add.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                counter -= 1;
                display.setText("counter");
            }
        });
    }

} 
```

请帮忙！我花了好几个小时试图弄清楚！非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:04:41.647

有一个名为 Random 的类，您可以使用它来模拟随机数的生成。

试试这个：

```
package com.example;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import java.util.Random;
import java.util.ArrayList<E>;

public class FOREVERAPHONE extends Activity {
    int selector;
    Button add, sub;
    TextView display;
    // List of random quotes
    ArrayList<String> listOfRandomQuotes;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_foreveraphone);

        listOfRandomQuotes = new ArrayList<String>();
        listOfRandomQuotes.add("A penny saved is a penny earned.");
        listOfRandomQuotes.add("You must be the change you wish to see in the world.");
        listOfRandomQuotes.add("I have decided to stick with love. Hate is too great a burden to bear.");
        listOfRandomQuotes.add("By failing to prepare, you are preparing to fail.");

        add = (Button) findViewById(R.id.bAdd);
        sub = (Button) findViewById(R.id.bSub);
        display = (TextView) findViewById(R.id.tvDisplay);
        add.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Random randomNumber = new Random();
                selector = randomNumber.nexInt(4);
                display.setText(listOfRandomQuotes.get(selector));
            }
        });
    }

} 
```

每次您点击“添加”按钮时，它应该选择一个随机报价并显示它。

**注意：**确保不要为视图设置 OnClickListener 多次！

希望这可以帮助！

# redis - How to store and retrieve compound key values with Redis

> ID：15590112
> 
> 赞同：1
> 
> 时间：2013-03-23T17:50:37.597
> 
> 标签：redis

I would like to store serialized objects in Redis from a database table with a compound primary key of two values. The objects might look like the following in code:

```
Public Class Contact
    Public Property Instance_Id() As Long
    Public Property Contact_Id() As Long
    Public Property First_Name() As String
    Public Property Last_Name() As String
End Class 
```

The Instance_Id is shared amongst a group of contacts, and the Contact_Id value is unique to each contact.

What is the fastest and most memory efficient way to store these objects in Redis where I can retrieve all the Contacts with a specific Instance_Id, or just the one Contact with a specific Contact_Id ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-10T01:50:12.963

我会为表单的每个联系人构建一个哈希（contact_id => Contact 类数据），可以通过键（contact_id）直接查询以解决您的特定查找情况。然后，添加一组（已排序，如果您关心排序）（instance_id => [contact_id1, contact_id2, ... , contact_idN]）。要通过 instance_id 进行查找，您将从一个查询中的索引集中获取 contact_ids，然后对于您返回的每个 id，对每个这些 id 进行特定的查找。

从 RDBMS 的角度来看，我意识到这听起来很疯狂，因为您习惯于将查询视为昂贵的操作。Redis 命令的设计速度非常快，因此发送大量命令来执行 RDBMS 中的一个查询是相当有效的。

# php - how to use .htaccess RewriteRule function to re-format my link

> ID：15590123
> 
> 赞同：0
> 
> 时间：2013-03-23T17:51:28.453
> 
> 标签：php, html, .htaccess, mod-rewrite

My .htaccess file is like that

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 ^(.*)$
RewriteRule ^(.*)$ router.php?_doroute=$1 [L,QSA] 
```

And i have a link like that

[http://www.site.com/cr?v=lock/223](http://www.site.com/cr?v=lock/223)

Does is it possible to use .htaccess RewriteRule to let the link open like that?

[http://www.site.com/?l=223](http://www.site.com/?l=223) Or [http://www.site.com/l/223](http://www.site.com/l/223)

Thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:03:08.813

或者，如果您需要任何其他格式..您可以尝试以下链接

[http://www.askapache.com/htaccess/modrewrite-tips-tricks.html](http://www.askapache.com/htaccess/modrewrite-tips-tricks.html)

mod_rewrite 是格式的关键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:00:31.310

如果您愿意将建议的格式（在没有文件名的 URL 上有查询字符串）替换为以下内容：

[http://www.site.com/l/223](http://www.site.com/l/223)

然后在您的 .htaccess 文件中尝试以下操作：

```
RewriteEngine On
RewriteRule ^l/([0-9]+)$ cr?v=lock/$1 
```

如果您每次都需要一个三位数的代码，`([0-9]{3})`请改为在匹配模式中使用。

# javascript - Raphael.js onclick 事件

> ID：15590128
> 
> 赞同：0
> 
> 时间：2013-03-23T17:51:54.303
> 
> 标签：javascript, button, svg, raphael

我正在尝试在 Raphael.js 上制作一些简单的按钮。所以我卡在了最后一步。这是我的[JSFiddle](http://jsfiddle.net/coffeecupdrummer/6JVZK/) 所以我的按钮在你按下它们后保持活动状态。但是当我按下另一个按钮时，我试图让按下的按钮处于非活动状态。

我试图通过 onclick 函数内的循环获取 st.node.state 值，但它对我不起作用。这是我的代码：

```
for(var i in aus) {

    (function (st) {

        st.node.state = 0;

        st.node.onmouseover = function() {
            st.animate({fill: "#8fbf27", stroke: "#fff"}, 100);
        };
        st.node.onmouseout = function() {
            st.animate({fill: "#555", stroke: "#fff"}, 100);
            if(this.state == 1){
                st.animate({fill: "#fff", stroke: "#fff"}, 100);
            }else {
                st.animate({fill: "#555", stroke: "#fff"}, 100);
            }
        };
        st.node.onclick = function() {

            if(this.state == 0) {
                this.state = 1;
                st.animate({fill: "#fff", stroke: "#fff"}, 100);
            }else {
                this.state = 0;
                st.animate({fill: "#555", stroke: "#fff"}, 100);
            }

        };

    })(aus[i]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T20:26:21.117

像这样的东西应该工作。这让元素可以根据状态自行设置动画。单击时，如果元素被激活，则循环并停用其他元素。

```
// An animator function which will animate based on node state
var animate = function(st) {
  var fill = st.node.state ? "#fff" : "#555";
  st.animate({fill: fill, stroke: "#fff"}, 100);
}

for (i in aus) {
  (function (st) {
    st.node.state = 0;
    st.node.onmouseover = function () {
      if (!this.state) st.animate({fill: "#8fbf27", stroke: "#fff"}, 100);
    };
    st.node.onmouseout = function () {
      animate(st);
    };
    st.node.onclick = function () {
      this.state = 1 - this.state;
      animate(st);
      // if the node is deactivated stop now
      if (!this.state) return;
      // otherwise deactivate and animate the other nodes
      for (i in aus) {
        // if node is `this` or node is already deactivated, continue
        if (aus[i].node === this || !aus[i].node.state) continue;
        // otherwise deactivate and animate
        aus[i].node.state = 0;
        animate(aus[i]);
      }
    };
  }(aus[i]));
} 
```

或者，如果一次只激活一个，您可能只存储对一个激活节点的引用并避免循环。

```
// A reference to the active element
var activeEl;

// animate based on whether the st is the active element
var animate = function(st) {
  var fill = activeEl === st ? "#fff" : "#555";
  st.animate({fill: fill, stroke: "#fff"}, 100);
}

for (i in aus) {
  (function (st) {
    st.node.onmouseover = function () {
      if (!this.state) st.animate({fill: "#8fbf27", stroke: "#fff"}, 100);
    };
    st.node.onmouseout = function () {
      animate(st);
    };
    st.node.onclick = function () {
      if (!activeEl || activeEl !== st) {
        var el = activeEl;
        activeEl = st;
        if (el) animate(el);
      } else {
        activeEl = null;
      }
      animate(st);
    };
  }(aus[i]));
} 
```

# javascript - jQuery 从两个单击的 div 中获取背景颜色，然后比较它们

> ID：15590131
> 
> 赞同：0
> 
> 时间：2013-03-23T17:52:01.567
> 
> 标签：javascript, jquery, css, html, click

所以我正在尝试制作一个记忆游戏，这个项目进展缓慢但稳定。

我有一个 4x4 的 div 布局，带有“卡片”类和一对唯一的颜色。我正在尝试按照以下方式做一些事情：

单击一个div，获取颜色，保存到pick1。单击另一个div，获取颜色，保存到pick2。比较两者。

现在我什至没有比较，而只是提醒变量 pick1 和 2 看看我从点击中得到了什么。

我尝试了一些从 div 中检索背景颜色的不同方法，现在我正在使用以下方法：

```
$('.card').click(function(){
    pick1 = $(this).css('background-color');    
});

$('.card').click(function(){
    pick2 = $(this).css('background-color');
});

alert(pick1 + " and " + pick2); 
```

但它只是立即发出警报并在之后显示 div。如果我让它运行这部分两次，它只会发出两次警报，然后显示 div。

我如何让它在提醒之前让我点击？从昨天开始我是 jQuery 的新手，两年来根本没有使用过 javascript：p

这是一个例子：http: [//jsfiddle.net/94jerdaw/WJQkA/](http://jsfiddle.net/94jerdaw/WJQkA/)

另外，有没有更好的方法来比较 div 而不是背景颜色？它是 rgb 格式的，如果它甚至可以按原样进行比较？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:14:22.043

我只需单击一下事件即可完成。只需比较两个 rgb 字符串就足够了。

```
var pick1 = false;
var pick2 = false;

$('.card').click(function(){

    if(pick1) {
        pick2 = $(this).css('background-color');
        if(pick1 == pick2) alert('Correct');
        else alert('Incorrect');

        pick1 = false;
        pick2 = false;
    } else {
        pick1 = $(this).css('background-color');   
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:15:20.417

首先

> 我如何让它在提醒之前让我点击？

为此，您需要在单击事件中调用警报..因为您在 document.ready 上调用警报..警报首先被调用（一旦文档准备好）..

其次，你为同一个选择器调用了两次点击函数，`.card`这根本不好......

获得你想要的东西的方法是..创建一个数组并单击将背景颜色或相应的 div 推送到该数组并比较该数组中的值..

```
var tempArray=[]; //create an array
$('.card').click(function(){
    alert($(this).css('background-color')) //this will give you alert after click with the bgcolor
    tempArray.push($(this).css('background-color'));
    console.log(tempArray) //check you developers tool > console to check the array.
}); 
```

现在您在 tempArray 中拥有了所有单击的 bgcolor，您现在可以进行比较。因为我不知道您要做什么（比较），所以我认为这会让您开始。

**更新**

与上面类似，但具有比较逻辑...使用 inArray 和 clickedCount...检查一下

```
 var tempArray=[]; //create an array
 var clickedCount= 1;
$('.card').click(function(){
  var bgColor=$(this).css('background-color') ;

  if(tempArray.length > 0){
     if(($.inArray(bgColor, tempArray)) != -1){
       alert("correct");
     }else{
       alert("incorrect");
     }
  }
    if(clickedCount % 2 != 0){  
       tempArray.push($(this).css('background-color'));
    }else{
       tempArray=[];
    }
     clickedCount++;
}); 
```

[在这里摆弄](http://jsfiddle.net/WJQkA/1/)

[更新的工作小提琴](http://jsfiddle.net/WJQkA/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T18:34:01.187

我假设在第二次选择之后......两个值都会被重置。所以这就是我要做的：

```
var pick1 = null;
var pick2 = null;

$('.card').click(function() {

    // set first card
    if (pick1 === null) {

        pick1 = $(this).css('background-color');

    }
    // set second card
    else if (pick2 === null) {

        pick2 = $(this).css('background-color');

        // compare colors
        if (pick1 === pick2) {
            alert('MATCH!');
        }
        else alert('NO MATCH!');

        // reset pick variables
        pick1 = null;
        pick2 = null;
    }

}); 
```

这可能会更短，但我已经详细说明了正在发生的事情。

# javascript - jquery toggle and nested form

> ID：15590137
> 
> 赞同：0
> 
> 时间：2013-03-23T17:52:37.910
> 
> 标签：javascript, jquery, nested-forms

for some reason the following is not working. What's wrong?

I'm just trying to toggle visibility of element. I have multiple links with class 'variant_description_link' on the page since I add form through js as well. All I want is find the closest 'variant-description' block and toggle visibility.

```
$('.variant_description_link').click(function() {
  $(this).closest('.variant-description').toggle();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:13:03.663

我猜这些元素在 DOM 中实际可用之前就被 jQuery 调用了。

```
$(document).ready(function() {
    $('.variant_description_link').click(function() {
        $(this).toggle();
    });
}); 
```

[（工作示例）](http://jsfiddle.net/DsQCD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:59:37.460

> 由于我也通过 js 添加表单，因此我在页面上有多个带有“variant_description_link”类的链接。

听起来您需要使用`on`委托事件进行点击..如果您通过 js 添加的表单包含`variant_description_link`

尝试这个

```
 $(document).on('click','.variant_description_link',function() {
   $(this).closest('.variant-description').toggle();
}); 
```

# javascript - 将项目添加到数组时，ng-list 输入未更新

> ID：15590140
> 
> 赞同：10
> 
> 时间：2013-03-23T17:52:48.730
> 
> 标签：javascript, angularjs

我遇到了一个奇怪的问题，即使用 ng-list 的输入在向模型中添加项目时没有更新。我创建了一个小提琴来更好地说明这个问题：http: [//jsfiddle.net/rtZY3/](http://jsfiddle.net/rtZY3/)

```
// Doesn't update ng-list input
$scope.tags.push(tag);

// Does update ng-list input
var tags = angular.copy($scope.tags);
tags.push(tag);
$scope.tags = tags; 
```

这似乎不是预期的行为，特别是因为如上面 jsFiddle 中`$scope.tags`的标记所示已正确更新。`<pre>`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-23T19:54:35.197

好的，所以这很有趣。我为[ngList 指令](https://github.com/angular/angular.js/blob/v1.0.5/src/ng/directive/input.js#L1220)挖掘了未缩小的 AngularJS 源代码。

似乎第一个示例没有触发格式化程序函数，该函数将数组值拆分为逗号分隔的字符串，并显示在输入字段中。

进一步调查表明错误在于 ngModel 指令的[控制器](https://github.com/angular/angular.js/blob/v1.0.5/src/ng/directive/input.js#L876)。仅当值严格不等于前一个值时才调用格式化程序，但由于它与第一个示例中的数组实例相同，因此该语句的计算结果为 false，因此不会更新文本字段。[请参阅源代码](https://github.com/angular/angular.js/blob/v1.0.5/src/ng/directive/input.js#L1019)。

```
$scope.$watch(function ngModelWatch() {
    var value = ngModelGet($scope);

    // $modelValue and value is the same array instance in your first example
    if (ctrl.$modelValue !== value) {
        // ...
    }
}); 
```

在您的第二个示例中，您每次都创建一个新的数组实例，因此运行格式化程序。

# vb.net - Visual Studio 打印预览控件

> ID：15590142
> 
> 赞同：0
> 
> 时间：2013-03-23T17:53:15.343
> 
> 标签：vb.net, visual-studio-2010, visual-studio-2008, printing

当用户从列表视图中选择文档时，我正在尝试创建文档的打印预览。我知道我需要创建一个打印文档并将其传递给 printpreviewcontrol，但我不知道如何将文件“分配”给打印文档（我知道下面的示例只是给它一个名称）。这可能吗？我在论坛和 MSDN 中找到的所有示例都处理基本文本文件。比如如何打印预览office docs、pdf等？

```
Imports System.Windows.Forms
Imports System.Drawing.Printing.PrintDocument

Public Class Form1

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    PrintDocument1.DocumentName = "C:\Documents and Settings\Practice.xlsx"

    PrintPreviewControl1.Document = PrintDocument1

End Sub

End Class 
```

任何帮助，将不胜感激。我觉得我错过了一些简单的东西。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:37:29.780

PrintDocument 对象，尽管它的名字，不是一个文档“阅读器”。它唯一要做的就是管理您想要打印的任何内容的打印过程。你想打印的“东西”可以是任何东西，打印的方式是通过 GDI+ 图形调用，比如“从这里到这里画一条线”和“把这个文本以这个大小放在这里”。换句话说，您通过调用`System.Drawing.Graphics.Graphics`对象的方法来创建打印文档。

因此，为了加载 PDF、Word Doc 或任何其他“文档”格式，您需要找到一个允许您使用 GDI+ 呈现文档的库。例如，通过 Google 快速搜索可以[找到 PDFRasterizer.Net](http://www.tallcomponents.com/pdfrasterizer3.aspx)以查找 PDF 文件。

# django - django 没有收到来自 nginx-upload-module 的 POST 数据

> ID：15590147
> 
> 赞同：1
> 
> 时间：2013-03-23T17:53:57.160
> 
> 标签：django, post, upload, nginx

请帮我解决这个问题：如果我在没有 nginx 的情况下发送表单，
我有 nginx-upload-module 和 nginx-progress-module
：我得到 POST 数据和 request.FILES -all norm ， 相反![在此处输入图像描述](../Images/af8fca0b4840265b6ce308a91bc5095c.png)
我没有问题： 如果我发送该表单使用 nginx 我得到文件的数据（她的大小，名字！！**但**我没有我的表单数据） 我的代码： #url.py

![在此处输入图像描述](../Images/e865f7b4d61da15abc249f4781ce7421.png)
**![在此处输入图像描述](../Images/05488ee0ebe594e74417683f67daa7ad.png)** 

 **```
urlpatterns = patterns('apps.test_doc.views',
    url(r'^test$','initial', name='initial'),
    url(r'^test/upload/$','upload', name="upload"),
) 
```

#js

```
<form id="upload" method="post" enctype="multipart/form-data" onsubmit="progress();">  
document.getElementById('upload').action = "/upload/share?X-Progress-ID=" + id;; 
```

#view.py

```
@csrf_exempt
def initial(request):
    data = {
    'form': UploadForm(),
    }
    return render_to_response('upload.html', data, RequestContext(request))

def upload(request):
    if request.method == 'POST':
        pathfile = request.POST.get('file.path')
        upfile = os.path.basename(pathfile)
        form = UploadForm(request.POST,initial={'file':upfile})

        if form.is_valid():
            cd = form.cleaned_data
            instance = form.save(commit=False)
            instance.save()  
return HttpResponseRedirect(reverse('initial')) 
```

#nginx.conf

```
location = /upload/share {
    upload_pass /test/upload/;
    client_max_body_size 250m;
    upload_store /tmp;
    upload_set_form_field $upload_field_name.name "$upload_file_name";
    upload_set_form_field $upload_field_name.content_type "$upload_content_type";
    upload_set_form_field $upload_field_name.path "$upload_tmp_path";
    upload_aggregate_form_field "$upload_field_name.md5" "$upload_file_md5";
    upload_aggregate_form_field "$upload_field_name.size" "$upload_file_size";
    upload_cleanup 400 404 499 500-505;

    upload_limit_rate 16k;
    track_uploads upload 1m;
} 

location = /upload/status {
    report_uploads upload;
}

location / {
    proxy_pass_header Server;
    proxy_set_header Host $http_host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Scheme $scheme;
    proxy_connect_timeout 90s;
    proxy_read_timeout 30s;
    proxy_pass http://localhost:8152/;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    track_uploads upload 30s;
} 
```

我在哪里发现这个问题： **Nginx、Django、JS**？

添加（其余html）：

```
<form id="upload_form"  method="post" enctype="multipart/form-data" accept-charset="utf-8" class="steps" onsubmit="progress();">{% csrf_token %}
<h3>Upload a new file</h3>
    {{form.as_p}}
 <input type="submit" value="Upload" id="submit" /></p> 
 </form>
    <div id="status" style="display: none;">
  <table width="100%"> 
    <tr><th></th><th>load</th><th>rest</th><th>all</th></tr>
    <tr><td>time:</td><td id="elapsed">∞&lt;/td><td id="remaining">∞&lt;/td><td id="total">∞&lt;/td></tr>
    <tr><td>size:</td><td id="sent">0 b</td><td id="offset">0 b</td><td id="length">0 b</td></tr>
    <tr><td>speed:</td><td id="speed">n/a</td></tr>
  </table>
  <div style="border: 1px solid #c0c0c0;">
      <div style="background: #c0c0c0; width: 0%; text-align: right;" id="bar">0%</div>
  </div> 
```

#js（全部）

```
<script type="text/javascript" charset="utf-8">
    function progress() {
    var ms = new Date().getTime() / 1000;
    rq = 0;
    id = "";
    for (i = 0; i < 32; i++) {
      id += Math.floor(Math.random() * 16).toString(16);
    }
    document.getElementById('upload_form').action = "/upload/share?X-Progress-ID=" + id;;
    document.getElementById('status').style.display = 'block'
    interval = window.setInterval(function () { fetch(id, ms); }, 1000);
    return true;
  }
  function fetch(id, ms) {
    var fetch = new XMLHttpRequest();
    fetch.open("GET", "/upload/status", 1);
    fetch.setRequestHeader("X-Progress-ID", id);
    fetch.onreadystatechange = function () {
      if (fetch.readyState == 4) {
        if (fetch.status == 200) {
          var now = new Date().getTime() / 1000;
          var upload = eval(fetch.responseText);
          if (upload.state == 'uploading') {
            var diff = upload.size - upload.received;
            var rate = upload.received / upload.size;
            var elapsed = now - ms;
            var speed = upload.received - rq; rq = upload.received;
            var remaining = (upload.size - upload.received) / speed;
            var uReceived = parseInt(upload.received) + ' bytes';
            var uDiff = parseInt(diff) + ' bytes';
            var tTotal = parseInt(elapsed + remaining) + ' secs';
            var tElapsed = parseInt(elapsed) + ' secs';
            var tRemaining = parseInt(remaining) + ' secs';
            var percent = Math.round(100*rate) + '%';
            var uSpeed = speed + ' bytes/sec';
            document.getElementById('length').firstChild.nodeValue = parseInt(upload.size) + ' bytes';
            document.getElementById('sent').firstChild.nodeValue = uReceived;
            document.getElementById('offset').firstChild.nodeValue = uDiff;
            document.getElementById('total').firstChild.nodeValue = tTotal;
            document.getElementById('elapsed').firstChild.nodeValue = tElapsed;
            document.getElementById('remaining').firstChild.nodeValue = tRemaining;
            document.getElementById('speed').firstChild.nodeValue = uSpeed;
            document.getElementById('bar').firstChild.nodeValue = percent;
            document.getElementById('bar').style.width = percent
          }
          else {
            window.clearTimeout(interval);
          }
        }
      }
    }
    fetch.send(null);
  }
</script> 
```

我需要保存模型数据表格和文件路径

*我写信给* **创建者 nginx-upload-midule**解决这个问题
的问题简单需要添加位置指令：
**upload_pass_form_field**
示例：upload_pass_form_field "^my_name_field$|^description$";
感谢**Valery Kholodkov****

# ruby-on-rails - 轨道密码认证

> ID：15590149
> 
> 赞同：2
> 
> 时间：2013-03-23T17:54:07.057
> 
> 标签：ruby-on-rails, railstutorial.org

首先，我对 Rails 非常陌生。所以请忍受我的任何菜鸟错误。仍在努力寻找可靠信息的最佳来源。很多东西有点过时了。

我正在关注 Rails[教程](http://ruby.railstutorial.org/chapters/beginning#top)并使用密码身份验证。在我的应用程序中，我有用户和部门，它们之间的关系有 has_many。该关系称为 manager_relationship。我对用户的身份验证和授权有效。管理和取消管理按钮用于创建经理关系。我还为每个部门设置了安全密码。我希望在创建经理关系之前要求用户输入部门的密码。我在管理按钮旁边添加了一个密码字段。

楷模：

```
department.rb
class Department < ActiveRecord::Base
attr_accessible :department_name, :password, :password_confirmation
has_many :manager_relationships, dependent: :destroy
has_many :users, through: :manager_relationships
has_secure_password 
```

manager_relationship.rb

```
class ManagerRelationship < ActiveRecord::Base
attr_accessible :department_id

belongs_to :user
belongs_to :department

validates :user_id, presence: true
validates :department_id, presence: true
end 
```

用户.rb

```
class User < ActiveRecord::Base
attr_accessible :name, :email, :password, :password_confirmation
has_many :manager_relationships, dependent: :destroy
has_many :departments, through: :manager_relationships
has_secure_password 
```

查看部门/show.html.erb

```
...
<div class="span8">
    <%= render 'manage_form' if signed_in? %>
</div>
</div> 
```

部门网/_manage.html.erb

```
<%= form_for(current_user.manager_relationships.build(department_id: @department.id), remote: true) do |f| %>
<div><%= f.hidden_field :bdepartment_id %></div>
<%= f.submit "Manage Department", class: "btn btn-large btn-primary" %>
<% end %> 
```

控制器：ManagerRelationshipsController

```
class ManagerRelationshipsController < ApplicationController
before_filter :signed_in_user

def create
    @department = Department.find(params[:manager_relationship][:department_id])

    current_user.manage!(@department)
    respond_to do |format|
        format.html { redirect_to @department }
        format.js
    end
end 
```

上面的代码有效。它成功地创建和破坏了经理关系。但是没有认证。任何用户都可以管理任何部门。我想要求管理用户输入部门密码来创建 manager_relationship

这是我尝试过的。

部门网/_manage.html.erb

```
 <%= form_for(current_user.manager_relationships.build(department_id: @department.id), 
remote: true) do |f| %>
##################This Was Added ##############
<div>
<%= f.label :password %>
<%= f.password_field :password %>
</div>
################################################

<div><%= f.hidden_field :department_id %></div>
<%= f.submit "Manage Department", class: "btn btn-large btn-primary" %>
<% end %> 
```

经理关系控制器

```
class ManagerRelationshipsController < ApplicationController
before_filter :signed_in_user
def create
    @department = Department.find(params[:manager_relationship][:department_id])
            ########################The line below was Added ##########################
    if @department.authenticate(params[:manager_relationship][:password])
            ###########################################################################
        current_user.manage!(@department)
    respond_to do |format|
        format.html { redirect_to @department }
        format.js
    end
       ####################I added this##################
    else
        flash.now[:error] = 'Invalid password'
        render 'new'
    end
       ############################################################ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T02:06:26.873

我添加的代码是正确的。问题在于我在密码无效后尝试显示的闪存消息。

```
if authenticate
else
flash.now[:error] = 'Invalid password'
render 'new'  <<I removed this line.>>
end 
```

我的代码试图呈现 manager_relationships/new 但它不存在。删除此按钮后，按钮按计划工作。但不会显示闪现消息。我在另一个问题中发布了它，因为它是另一个话题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:50:14.703

理想情况下，由于用户登录，您不需要密码，用户可以如何访问您的页面。可能您想要另一个级别的保护来设置/取消设置您可以使用的数据

```
 @user = User.where(:email=>...).first 
 # Authenticating User sonce your email id is in session
 # You don't need to store password on manager_relationship
 # create attr_accessor 
 @user.authenticate(params[:manager_relationship][:password])
 # if user is authenticate then you can add/edit your data 
```

# c# - 如果结构是值类型，为什么我可以新建它？

> ID：15590150
> 
> 赞同：26
> 
> 时间：2013-03-23T17:54:15.847
> 
> 标签：c#, struct, new-operator, value-type

在 C# 中，结构是值类型，但我可以将`new`它们视为引用类型。为什么是这样？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-23T17:56:02.477

因为他们有构造函数。

[`new`运算符](http://msdn.microsoft.com/en-us/library/fa0ab757.aspx)并不意味着“这是一个引用类型” ；它的意思是“这种类型有一个构造函数”。当你`new`创建一个实例时，你会调用一个构造函数。

就此而言，*所有*值和引用类型都有构造函数（如果类型本身没有定义任何参数，至少默认构造函数不带参数）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-23T17:56:31.410

`new`运算符并不意味着它只能用于*引用类型*。它也可以与*值类型*一起使用。

来自[新运营商](http://msdn.microsoft.com/en-us/library/fa0ab757.aspx)

> *用于创建**对象**和**调用构造函数**。*

由于每个*值类型*都隐含地具有公共默认构造函数，因此所有值类型都具有默认值。您可以阅读[默认值表](http://msdn.microsoft.com/en-us/library/83fhsxwc.aspx)。

例如;

```
int i = new int(); // i will be 0 for because its default values. 
```

结构类型的默认值；

> 通过将所有值类型字段设置**为其默认值**并将所有引用类型字段设置为**null**生成的值。

也来自[MSDN](http://msdn.microsoft.com/en-us/library/ah19swz4.aspx)：

> 当您使用 new 运算符创建结构对象时，**它会被创建并调用相应的构造函数**。与类不同，结构可以在不使用 new 运算符的情况下进行实例化。如果不使用 new，则这些字段将保持未分配状态，并且在所有字段都初始化之前无法使用该对象。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-23T17:56:32.813

您也可以“新建”一个整数。
不同之处在于您不能按值传递引用类。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-23T17:56:27.557

它在 MSDN 文档中说，[运算](http://msdn.microsoft.com/en-us/library/fa0ab757.aspx)`new`符用于调用值类型的默认构造函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-23T17:56:30.440

您不必使用 new 运算符来创建结构。如果你这样做，它将调用它的构造函数，如果你不这样做，所有字段都将保持未分配状态。

# java - 如何等到第二个按钮被按下？

> ID：15590151
> 
> 赞同：-4
> 
> 时间：2013-03-23T17:54:24.410
> 
> 标签：java, android

我有一堆按钮，并为它们分配了一些术语。我希望用户按其含义将它们连接起来。无论如何，我需要当用户按下一个按钮时，什么都不会发生，只是可能为它设置一个颜色，然后等到他按下另一个按钮，然后采取一些行动（在我的情况下，比较 setText 的术语纽扣）。同样，当他按下下一个按钮时，直到他按下第四个按钮，才会发生任何事情，依此类推。我怎样才能做到这一点？在这部分之前我已经完成了所有的工作，我已经导入了数据库，为我的按钮分配了文本等等。

编辑：

好的，就像斯蒂芬问的那样。我对所有按钮使用一个 onClickListener。我给他们分配了一个标签（我希望是正确的......我对正确的配对使用了相同的标签），稍后我将使用它来检查正确的答案（仍在学习）。我将按钮设置为在按下时更改它的颜色，现在我需要它等到我按下 ArrayList labelB 中的其他按钮。如果我按下 labelA 一组按钮中的一个按钮，我不想发生任何事情，只是改变颜色。也许你们认为“哇，这太简单了，太蹩脚了”，但现在对我来说已经很复杂了。:)

```
public class Game extends Activity implements View.OnClickListener{

    // labelForButton and tagForButton
       class MyStruct {
       public MyStruct (String lab, String t){
        label = lab;
        tag = t;
    }
       private String label;
       private String tag;
       }

       final OnClickListener clickListener = new OnClickListener() {
        public void onClick(View v) {

         Button button = (Button)v;
         button.setBackgroundColor(Color.YELLOW);

            }
     };

Button a1,a2,a3,a4,a5,a6,a7,a8,b1,b2,b3,b4,b5,b6,b7,b8;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.game);

a1 = (Button) findViewById(R.id.bA1);
        a2 = (Button) findViewById(R.id.bA2);
        a3 = (Button) findViewById(R.id.bA3);
        a4 = (Button) findViewById(R.id.bA4);
        a5 = (Button) findViewById(R.id.bA5);
        a6 = (Button) findViewById(R.id.bA6);
        a7 = (Button) findViewById(R.id.bA7);
        a8 = (Button) findViewById(R.id.bA8);
        b1 = (Button) findViewById(R.id.bB1);
        b2 = (Button) findViewById(R.id.bB2);
        b3 = (Button) findViewById(R.id.bB3);
        b4 = (Button) findViewById(R.id.bB4);
        b5 = (Button) findViewById(R.id.bB5);
        b6 = (Button) findViewById(R.id.bB6);
        b7 = (Button) findViewById(R.id.bB7);
        b8 = (Button) findViewById(R.id.bB8);

nextQuestion();
}

public void nextQuestion() {

        TestAdapter mDbHelper = new TestAdapter(this);
        mDbHelper.createDatabase();

        try{

            mDbHelper.open(); 

            Cursor c = mDbHelper.getTestData(generateWhereClause());

            mAnsweredQuestions.add(c.getLong(0));

            ArrayList<MyStruct> labelsA = new ArrayList<MyStruct>();
            ArrayList<MyStruct> labelsB = new ArrayList<MyStruct>();

            labelsA.add(new MyStruct(c.getString(2), "1"));
            labelsB.add(new MyStruct(c.getString(3), "1"));
            labelsA.add(new MyStruct(c.getString(4), "2"));
            labelsB.add(new MyStruct(c.getString(5), "2"));
            labelsA.add(new MyStruct(c.getString(6), "3"));
            labelsB.add(new MyStruct(c.getString(7), "3"));
            labelsA.add(new MyStruct(c.getString(8), "4"));
            labelsB.add(new MyStruct(c.getString(9), "4"));
            labelsA.add(new MyStruct(c.getString(10), "5"));
            labelsB.add(new MyStruct(c.getString(11), "5"));
            labelsA.add(new MyStruct(c.getString(12), "6"));
            labelsB.add(new MyStruct(c.getString(13), "6"));
            labelsA.add(new MyStruct(c.getString(14), "7"));
            labelsB.add(new MyStruct(c.getString(15), "7"));
            labelsA.add(new MyStruct(c.getString(16), "8"));
            labelsB.add(new MyStruct(c.getString(17), "8"));

            Collections.shuffle(labelsA);
            Collections.shuffle(labelsB);

            pitanje.setText(c.getString(1));

            a1.setText(labelsA.get(0).label);
            a1.setTag(labelsA.get(0).tag);
            a1.setOnClickListener(clickListener);
            b1.setText(labelsB.get(0).label);
            b1.setTag(labelsB.get(0).tag);
            b1.setOnClickListener(clickListener);
            a2.setText(labelsA.get(1).label);
            a2.setTag(labelsA.get(1).tag);
            a2.setOnClickListener(clickListener);
            b2.setText(labelsB.get(1).label);
            b2.setTag(labelsB.get(1).tag);
            b2.setOnClickListener(clickListener);
            a3.setText(labelsA.get(2).label);
            a3.setTag(labelsA.get(2).tag);
            a3.setOnClickListener(clickListener);
            b3.setText(labelsB.get(2).label);
            b3.setTag(labelsB.get(2).tag);
            b3.setOnClickListener(clickListener);
            a4.setText(labelsA.get(3).label);
            a4.setTag(labelsA.get(3).tag);
            a4.setOnClickListener(clickListener);
            b4.setText(labelsB.get(3).label);
            b4.setTag(labelsB.get(3).tag);
            b4.setOnClickListener(clickListener);
            a5.setText(labelsA.get(4).label);
            a5.setTag(labelsA.get(4).tag);
            a5.setOnClickListener(clickListener);
            b5.setText(labelsB.get(4).label);
            b5.setTag(labelsB.get(4).tag);
            b5.setOnClickListener(clickListener);
            a6.setText(labelsA.get(5).label);
            a6.setTag(labelsA.get(5).tag);
            a6.setOnClickListener(clickListener);
            b6.setText(labelsB.get(5).label);
            b6.setTag(labelsB.get(5).tag);
            b6.setOnClickListener(clickListener);
            a7.setText(labelsA.get(6).label);
            a7.setTag(labelsA.get(6).tag);
            a7.setOnClickListener(clickListener);
            b7.setText(labelsB.get(6).label);
            b7.setTag(labelsB.get(6).tag);
            b7.setOnClickListener(clickListener);
            a8.setText(labelsA.get(7).label);
            a8.setTag(labelsA.get(7).tag);
            a8.setOnClickListener(clickListener);
            b8.setText(labelsB.get(7).label);
            b8.setTag(labelsB.get(7).tag);
            b8.setOnClickListener(clickListener);

        }

        finally{
            mDbHelper.close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:01:53.967

```
Button a1,a2,a3,a4,a5,a6,a7,a8,b1,b2,b3,b4,b5,b6,b7,b8;
//private boolean mShouldTakeAction; does not need this anymore
private Button mDisableButton;
.......
.......
final OnClickListener clickListener = new OnClickListener() {
    public void onClick(View v) {

     // We are going to disable button so no need to make it yellow
     //Button button = (Button)v;
     //button.setBackgroundColor(Color.YELLOW);
     if (mDisableButton == null)
     {

           mDisableButton = (Button) v;
           v.setEnabled(false);
     }
     else
     {
          mDisableButton.setEnabled(true);
          mDisableButton = null;
          // do what ever you want here that is compare the terms
     }

        }
 }; 
```

# android - 带有 KML 叠加层的 Google 地图和导航

> ID：15590153
> 
> 赞同：2
> 
> 时间：2013-03-23T17:54:42.190
> 
> 标签：android, google-maps, kml, google-fusion-tables

在这里寻找一些建议和指导。我在消防部门做志愿者，我们的卡车上有基于安卓的平板电脑，用于导航。他们为此工作得很好。我们能够自动接收我们的调度数据并让它在离开我们的车站之前开始导航。

我们想要添加的一项功能是将消火栓显示为 Google 地图和可能导航的叠加层。

我们有一个包含所有消火栓（超过 6,000 个）的 KML 文件，但是，如果我们尝试在“我的地点”下导入谷歌地图（从桌面），我们将被限制为大约 6,000 个。1,000 积分，无法全部导入 6,000。它们将显示在 android 谷歌地图上，但不会显示在导航中，并且无法离线存储。

我们已经能够成功地将所有消火栓导入 Google Fusion。它们位于[https://www.google.com/fusiontables/DataSource?docid=1tXSDF4N4b_woBggNMYHSVpZjC_z5w1T-txcR5bA](https://www.google.com/fusiontables/DataSource?docid=1tXSDF4N4b_woBggNMYHSVpZjC_z5w1T-txcR5bA)

我们正在使用的 KML 文件位于[http://dl.dropbox.com/u/31421184/123.kml](http://dl.dropbox.com/u/31421184/123.kml)

1.  有没有办法让这些来自 Google Fusion 的内容显示在 Android 设备上的 Google Map 上？Android 的任何 Fusion 到 Maps 集成？

2.  如果无法将 Google Fusion 与 Google Maps 集成，有没有办法在 Android 上显示 Google Maps 或导入 KML 文件？用我们所有的 6,000 积分？

3.  有没有办法让谷歌地图离线存储地图和我们需要的叠加层？

4.  如果谷歌地图无法为我们提供我们的解决方案，有没有可以推荐的？看过 Locus 和 OruxMaps，界面并不像我们需要的那么简单。到目前为止，谷歌是首选。

# php - 通过 AJAX 请求时，base64_encode 图像无法打开流

> ID：15590156
> 
> 赞同：0
> 
> 时间：2013-03-23T17:55:14.820
> 
> 标签：php, mysql, ajax, base64

我有一个显示一堆图片的博客。为了最大限度地减少服务器请求，我使用一个简单的 PHP 函数将每个图像编码为 base64。

我的博客上有一个无限滚动功能，它使用 AJAX 向服务器发送请求以获取更多关于页面滚动的博客。

这里的问题是当 base64 编码的图像通过 AJAX 请求时，我得到了错误`[function.file-get-contents]: failed to open stream: No such file or directory`

当未通过 ajax 调用时，base64 编码的图像会完美显示。

这是我用来转换为 base64 的 PHP 函数：

```
// convert images to base64 for image URIs
function base64Data($sFile) {                   

    // Switch to right MIME-type
    $sExt = strtolower(substr(strrchr($sFile, '.'), 1));

    // trim the first forward slash from the images
    if(strpos($sFile, '/', 1)) {
        $sFile = ltrim($sFile, '/');
    }

    switch($sExt)
    {
        case 'gif':
        case 'jpg':
        case 'jpeg':
        case 'png':
            $sMimeType = 'image/'. $sExt;
        break;

        case 'ico':
            $sMimeType = 'image/x-icon';
        break;

        case 'eot':
            $sMimeType = 'application/vnd.ms-fontobject';
        break;

        case 'otf':
        case 'ttf':
        case 'woff':
            $sMimeType = 'application/octet-stream';
        break;

        default:
            exit('Invalid extension file!');
    }

    $sBase64 = base64_encode(file_get_contents($sFile));
    return "data:$sMimeType;base64,$sBase64";
} 
```

图像路径存储在我的 mysql 数据库中，`/uploads/blogs/images/imagefile.jpg`这就是我`ltrim()`用来修剪第一个斜线的原因。没有它，`file_get_contents()`在任何地方都行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:14:00.697

“警告：file_get_contents（uploads/blogs/photos/24c94e5fff96ea2c9a2e525e99bcd31d52f505a4.‌​‌​jpg）[function.file-get-contents]：无法打开流：/beta/classes/string.class.php中没有这样的文件或目录在第 91 行”这是自我解释的。如果您确定该文件存在于该路径中。然后尝试使用文件的绝对路径而不是 string.class.php 中的相对路径，这可能是文件路径未获取的原因之一。

# .net - Sandcastle 帮助文件生成器找不到 vs2010.config

> ID：15590157
> 
> 赞同：8
> 
> 时间：2013-03-23T17:55:23.060
> 
> 标签：.net, visual-studio-2010, sandcastle, portable-class-library, shfb

我正在尝试为可移植类库（.Net40、Silverlight 4、.Net for Windows Store、Windows Phone 7.5）构建文档作为 HTML 帮助 1 和 MS 帮助查看器。我只有一个“文档来源”。该项目设置为使用 vs2010 文档样式（vs2005 样式也存在问题）。每当我尝试构建文档项目时，无论是通过 Sandcastle Help File Builder GUI 还是 Visual Studio 2010，我总是会遇到相同的错误：

```
SHFB: Error BE0019: Unable to transform template 'VS2010.config': Could not find a part of the path 'C:\Program Files (x86)\Reference Assemblies\Microsoft\FSharp\3.0\Runtime\.NETPortable'.
Could not find a part of the path 'C:\Program Files (x86)\Reference Assemblies\Microsoft\FSharp\3.0\Runtime\.NETPortable'. 
```

经过更多调查，该目录看起来应该是`C:\Program Files (x86)\EWSoftware\Sandcastle Help File Builder\Templates\VS2010.config`. 如何将 SHFB 重定向到该目录而不是它正在尝试的目录？

我必须做什么才能构建文档项目？

通过进一步调查，我想我已经推断出这个问题是由于文档源是一个可移植的类库。这是 SHFB 中的错误，还是我可以自己修复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-24T14:24:11.480

我遇到了同样的问题，似乎从复制文件`C:\Program Files (x86)\Reference Assemblies\Microsoft\FSharp\.NETPortable\2.3.5.1`来`C:\Program Files (x86)\Reference Assemblies\Microsoft\FSharp\3.0\Runtime\.NETPortable`解决问题。

但我真的不明白发生了什么，这对我来说不是一个合适的解决方案，只是一种解决方法。

# class - mootools 组复选框返回值

> ID：15590158
> 
> 赞同：0
> 
> 时间：2013-03-23T17:55:24.380
> 
> 标签：class, checkbox, mootools, css-selectors, each

如何从 mootools 类返回选定的复选框值：

Mootools 类：

```
var CheckboxGroup = new Class({

    Implements: Events,

    initialize: function(master, slaves) {
        this.master = $(master);
        this.slaves = $$(slaves);
        this.selected = [];            
        var that = this;

        this.master.addEvent('click', this.onMasterClick.bind(this));
        this.slaves.addEvent('click', function() {
            that.onSlaveClick(this);
        });
    },

    onMasterClick: function() {
        this.slaves.set('checked', this.master.get('checked')).fireEvent('change');
        this.fireEvent('masterClick');
        this.fireEvent('onCheckboxClick');
    },

    onSlaveClick: function(slave) {
        this.master.set('checked', this.slaves.every(function(el) { return el.get('checked'); }));
        this.fireEvent('slaveClick', slave);
        this.fireEvent('onCheckboxClick');
    },

    onCheckboxClick: function() {

    ??? how to return selected values   
    }

}); 
```

HTML 和脚本：

```
<div class="container">
    <label class="master"><input type="checkbox" id="master" /> Master</label>
    <label><input type="checkbox" class="slave" value="1"/> Slave #1</label>
    <label><input type="checkbox" class="slave" value="2"/> Slave #2</label>
    <label><input type="checkbox" class="slave" value="3"/> Slave #3</label>
    <label><input type="checkbox" class="slave" value="4"/> Slave #4</label>
    <label><input type="checkbox" class="slave" value="5"/> Slave #5</label>
</div>
<script>
        new CheckboxGroup('master', '.slave').addEvents({
        'onCheckboxClick': function() {
            console.log(this.selected); /*EVERY TIME [] ?????*/
        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:59:00.993

您需要的是[Selector: checked](http://mootools.net/docs/core/Slick/Slick#Slick%3achecked) 因为从包含它们的容器中获取已检查元素非常容易，所以我通过将容器元素添加到构造函数来更改您的类（在您的示例中，只需将 id="container" 添加到容器中，但您可以选择您希望如何以您的方式实现这一目标 - 这只是示例）。

另一件事是你不需要在你的类中定义“onCheckboxClick”，因为这是你通过公开你的 API 引发的事件：http: [//jsfiddle.net/BqVtL/](http://jsfiddle.net/BqVtL/)

```
var CheckboxGroup = new Class({

    Implements: Events,

    initialize: function(container,master, slaves) {
        this.container = document.id(container);
        this.master = $(master);
        this.slaves = $$(slaves);
        this.selected = [];            
        var that = this;

        this.master.addEvent('click', this.onMasterClick.bind(this));
        this.slaves.addEvent('click', function() {
            that.onSlaveClick(this);
        });
    },

    onMasterClick: function() {
        this.slaves.set('checked', this.master.get('checked')).fireEvent('change');
        this.setSelected();
        this.fireEvent('masterClick');
        this.fireEvent('onCheckboxClick');
    },

    onSlaveClick: function(slave) {
        this.master.set('checked', this.slaves.every(function(el) { return el.get('checked'); }));
        this.setSelected();
        this.fireEvent('slaveClick', slave);
        this.fireEvent('onCheckboxClick');
    },

    setSelected: function(){
        //you can loose the container mechanism and use $$('.slave:checked').get('value') 
   //     this.selected = this.container.getElements('.slave:checked').get('value');

          //Dimitar Christoff better solution: (then there is no need in container at all)
          this.selected = this.slaves.filter(':checked').get('value');

    }

});

new CheckboxGroup('container','master', '.slave').addEvents({
    'onCheckboxClick': function() {
        console.log(this.selected); /*EVERY TIME [] ?????*/
    }
}); 
```

# html - PDF.JS 下载行为

> ID：15590160
> 
> 赞同：0
> 
> 时间：2013-03-23T17:55:26.700
> 
> 标签：html, ajax, pdf.js

我想知道 pdf.js 库如何处理 pdf 页面的下载。

如果我执行此代码：

```
var test_pdf = "documents/pdf";
    PDFJS.getDocument(test_pdf).then(function(pdf) {
      // Using promise to fetch the page
     pdf.getPage(1).then(function(page) {
     var scale = 1;
     var viewport = page.getViewport(scale);
     var realwidth = viewport.width;
     // Scale all documents to a width of 520px
     var newscale = 520/realwidth;
     var viewport = page.getViewport(newscale); 

     //
     // Prepare canvas using PDF page dimensions
     //
     var canvas = document.getElementById('the-canvas{{slide.page}}');
     var context = canvas.getContext('2d');
     canvas.height = viewport.height;
            canvas.width = viewport.width;

     //
     // Render PDF page into canvas context
     //
     var renderContext = {
      canvasContext: context,
      viewport: viewport
     };
     page.render(renderContext);
 }); 
```

所以在这里我只显示 PDF 的第一页，但我认为客户端下载了整个 pdf 对吗？

如果这是正确的，是否有人可能只能从 pdf 文件中下载给定页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:10:14.470

将 pdf 文档中的页面拆分为多个文件（例如通过使用[PDFtk](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/)）然后使用/加载这些页面的想法怎么样？

# ruby-on-rails - 在过滤器之前为整个控制器分配异常

> ID：15590167
> 
> 赞同：2
> 
> 时间：2013-03-23T17:55:52.273
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, ruby-on-rails-3.2, before-filter

我的每一个人`Users`都`has_many`与`Character`。现在，在他们可以使用应用程序之前，我需要他们首先选择一个角色作为他们的主要角色，因此我想继续将他们重定向到`members`控制器显示方法，直到他们选择主要角色。

我的方法有效，但是当有人想在选择主要角色之前注销时会出现问题，它会不断将他们重定向到`member_path`. 如何将`devise`控制器添加到此规则和整个`members`控制器的例外中。

```
class ApplicationController < ActionController::Base
  protect_from_forgery

    before_filter :check_for_main
    skip_before_filter :check_for_main, :only => [:members => :show, :users => :sign_out]

    # Check if user has a main character selected
    private
    def check_for_main

        # Check signed in user
        if user_signed_in?

            # Check associated characters if any are set as main
            redirect_to member_path(current_user.id), :alert => "Please select your main character."
            unless current_user.characters.any?(&:main)

            end
        end
    end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:02:29.023

在你`MembersController`和`UsersController`你都应该有`skip_before_filter :check_for_main`一个`:only`选项来指定那些控制器中的哪些操作应该跳过过滤器。你目前有

```
skip_before_filter :check_for_main, :only => [:members => :show, :users => :sign_out] 
```

但这应该是

```
# in MembersController
skip_before_filter :check_for_main, :only => [:show]

# in UsersController
skip_before_filter :check_for_main, :only => [:sign_out] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:50:06.707

我不想通过将另一个控制器添加到子类 Devise 控制器来污染我的代码，只是为了那一行：`skip_before_filter`. 我的第一次尝试是添加`skip_before_filter`自己的控制器来设计控制器，但你真的应该避免这种情况。

无论如何运行`rake routes`表明设计控制器实际上`devise/controller_name`总是以`devise/ prefix`名称之前的名称命名。由于我不打算进一步扩展设计控制器，唯一有意义的事情是向它自己的方法添加一个条件语句以跳过来自设计包的请求。

对于我所有的其他控制器，我遵循`@Stuart M`了建议。

我的新代码：

```
class ApplicationController < ActionController::Base
    protect_from_forgery

    before_filter :check_for_main

    # Check if user has a main character selected
    private
    def check_for_main

        # Check signed in user
        if user_signed_in?

            if not params[:controller].to_s.include? "devise"
                # Check associated characters if any are set as main
                if not current_user.characters.any?(&:main)
                    redirect_to member_path(current_user.id), :alert => "Please select your main character."
                end
            end
        end
    end

end 
```

# symlink - ld：找不到 -lgfortran 的库 - Mac 符号链接问题？

> ID：15590169
> 
> 赞同：5
> 
> 时间：2013-03-23T17:56:01.840
> 
> 标签：symlink, gfortran, cc

我正在尝试使用 pip 安装 ObsPy。

在下面的 cc 命令上安装失败：

```
cc -bundle -undefined dynamic_lookup -L/usr/local/lib -L/usr/local/opt/sqlite/lib build/temp.macosx-10.8-x86_64-2.7/obspy/taup/src/emdlv.o build/temp.macosx-10.8-x86_64-2.7/obspy/taup/src/libtau.o build/temp.macosx-10.8-x86_64-2.7/obspy/taup/src/ttimes_subrout.o -lgfortran -o build/lib.macosx-10.8-x86_64-2.7/obspy/lib/libtaup.so

ld: library not found for -lgfortran 
```

这个 SO 问题类似：[lgfortran not found](https://stackoverflow.com/questions/10881002/lgfortran-not-found)，但解决方案是更改生成文件。取消 pip install 时我不知道该怎么做。我已经使用自制软件安装了 gfortran。

有没有一种方法可以将符号链接放置到该命令正在搜索的位置中的现有 gfortran lib 文件夹中？

那个位置会是`/usr/local/lib`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T18:54:19.290

嘿嘿，

有一些解决方案。最简单的方法是将 设置为`LD_LIBRARY_PATH`gfortran 共享库所在的位置。

`locate libgfortran.a`

除此之外，您还可以安装最新的 git 版本的 ObsPy，它应该可以解决这个问题。转到[http://www.obspy.org](http://www.obspy.org)以获取 git URL。

干杯!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-12T11:58:33.560

您还可以使用以下命令找到 lib 的位置：

```
sudo find /usr -iname 'libgfortran*.a' | xargs shasum 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T03:57:22.513

对我来说，解决的是在 .pro 文件中设置它：

```
QMAKE_LIBDIR += /path/to/lib 
```

# python - 以编程方式将歌曲添加到 iTunes

> ID：15590173
> 
> 赞同：2
> 
> 时间：2013-03-23T17:56:23.633
> 
> 标签：python, itunes, osx-mountain-lion

是否可以在 OS X 上以编程方式将歌曲添加到 iTunes？即说我有一个歌曲目录，我想从 Python 脚本添加到 iTunes。实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T18:05:19.827

iTunes 有一个特殊的文件夹，它会在其中查找音乐文件以将其自动添加到其资料库中：

```
/Users/<your_username>/Music/iTunes/iTunes Media/Automatically Add to iTunes 
```

（移动到这个文件夹

`cd /Users/<your_username>/Music/iTunes/iTunes\ Media/Automatically\ Add\ to\ iTunes`)

您所要做的就是编写一个 python 或 shell 脚本，将您的音乐复制到这个文件夹中。例如，对于 python

```
import commands
commands.getoutput("cp file.mp3 /Users/<your_username>/Music/iTunes/iTunes Media/Automatically Add to iTunes") 
```

# wpf - MVVM 设计 - 处理多个视图的通用 ViewModel

> ID：15590180
> 
> 赞同：1
> 
> 时间：2013-03-23T17:57:00.097
> 
> 标签：wpf, mvvm

在我的场景中，我有很多视图（用户控件），其中包含一些过滤器选项。例如，假设总共有 10 个过滤器选项，但并非所有视图都显示所有 10 个过滤器选项。有些只显示 3 个，有些只显示 8 个，等等。重要的是，当在一个视图上设置一个过滤器选项时，包含此过滤器选项的所有视图都应该具有相同的值。

```
AView: filterOption1, FilterOption2, FilterOption3
BView: filterOption1, FilterOption3, FilterOption5
CView: filterOption2, FilterOption4, FilterOption6, FilterOption7 
```

当用户在 AView 上设置 filterOption1 = True 时，应在所有使用 filterOption1（例如 BView）的视图上设置相同的值。这使我决定拥有一个 CommonViewModel（单例），它将包含公共（共享）数据，并且将公开其中的所有过滤器选项，并且所有视图都应绑定到此 CommonViewModel。

为了显示特定视图的过滤器选项，我可以想到两种方法：

1) 设计一个 CommonView，为每个表示创建新实例，并在不需要的地方隐藏过滤器选项

```
<DataTemplate DataType="vm:CommonViewModel">
  <vw:CommonView ShowFilterOption1="True" ShowFilterOption3="True" />
</DataTemplate> 
```

2）为每个不同的表示设计单独的视图（不同的过滤器选项）

您如何看待这些方法，您更喜欢哪一种，您是否还有其他想法，以及遵循正确的 MVVM 设计的最佳选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:07:43.330

绑定到一个视图模型的 n 个视图，一旦视图模型中的属性发生更改，视图应该更新 = 双向绑定到该属性

1) 一个包含所有过滤器选项的视图意味着您需要自定义逻辑来仅显示您希望看到的过滤器选项。= 绑定到可见性

2）过滤器选项的每个不同表示的单独视图也是可能的，但我只会这样做，前提是每个单独的视图都包含一些额外的控件或逻辑，这使得每个单独的视图在某种程度上是独一无二的，否则使用 1）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:34:04.180

对我来说，这种逻辑 - 是否将特定的 filterOption 包含到视图中，实际上属于视图模型，而不是视图。我会考虑实现一个视图，并为每个 A、B、C 单独的视图模型实例。视图模型可以是一个类，由它将显示的 filterOptions 参数化。

# forms - Django 基于类的通用视图注册用户

> ID：15590182
> 
> 赞同：3
> 
> 时间：2013-03-23T17:57:15.537
> 
> 标签：forms, registration, models, django-class-based-views

朋友们晚上好。

我正在尝试创建一个易于用户注册的应用程序。使用 Django 1.5，我的问题是用户没有保存在数据库中，我的代码在这里：

```
#forms.py
class UserCreationForm(forms.ModelForm):
    username = forms.RegexField(regex=r'^[\w.@+-]+$',max_length=30,label='Username')
    email = forms.EmailField(label="E-mail")
    password1 = forms.CharField(widget=forms.PasswordInput,label="Password")
    password2 = forms.CharField(widget=forms.PasswordInput,label="Repeat Password")

    class Meta:
        models = User
        fields = ('username','email','password1','password2')

#views.py
from myapp.register.forms import UserCreationForm
class CreateUser(FormView):
     template_name = 'registration/registration_form.html'
     success:url = '/'
     form_class = UserCreationForm
    def is_valid(self, form):
        user = User.objects.create_user(form.cleaned_data['username'],
                                        form.cleaned_data['email'],
                                        form.cleaned_data['password1'])
        #user.save()
        return super(CreateUser, self).form_valid(form) 
```

每次我尝试创建用户时，他们都不会被保存。我究竟做错了什么？

“我正在学习一点英语，请原谅我的错误。谢谢”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:14:03.987

首先，您确实知道您发表了评论`user.save()`，对吗？;-)

话虽如此，您以错误的方式处理整个问题。如果您尝试保存模型实例，`CreateView`请用作视图的基础，而不是`FormView`. 这样你就不需要编写你所做的所有代码，比如`is_valid`方法（你也不需要在表单中显式设置字段；它们将从模型的字段中推断出来）。

# speech-recognition - 免费带时间戳的音频转录（语音转文本）？

> ID：15590183
> 
> 赞同：7
> 
> 时间：2013-03-23T17:57:23.697
> 
> 标签：speech-recognition

是否有任何免费服务/程序可以将音频转录为文本并保留时间戳？

我想转录：

[这是 VoiceBase 的演示链接](http://www.voicebase.com/voice_file/public_detail/258709)

（419 个骗子之间的 16m 对话；骗子说话时口音很重，所以我不抱怨转录的质量）。

Voicebase 会转录它，但转录是单个测试块，并且没有时间戳。

我还尝试了 Google 语音“技巧”（将文件录制到语音邮件中并让 Google 一次转录 3 分钟），但同样，转录是单个文本块，没有时间戳。

我知道狮身人面像，但无法让它工作。

我意识到我可以使用 subtitleeditor 来创建手动转录，但我正在寻找一个自动化的解决方案。

理想情况下，我想采用带有时间戳的机器转录并手动编辑它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T13:37:02.003

CMUSphinx 可以做到这一点，只需从源代码运行 Aligner 演示。sphinx4 教程中提供了最新[的 sphinx4 教程](http://cmusphinx.sourceforge.net/wiki/tutorialsphinx4)。2014 年夏天，CMUSphinx 在 sphinx4 主干中集成了[长音频对齐](http://cmusphinx.sourceforge.net/2014/07/long-audio-aligner-landed-in-trunk/)功能。

这是完全错误的，但与语音库不同，它至少捕获了一些单词。手动转录它并稍后分配时间可能更容易。CMUSphinx 也可以通过音频到文本的对齐来做到这一点。

口音和短话引起的解码准确性有很多问题，但您也有责任。例如，您永远不应该将 8khz 带宽的电话音频转换为 mp3。这种转换大大降低了自动语音识别的准确性和整体录音质量。您可以使用其他面向语音的无损编解码器进行压缩。

讨论该主题的其他[问题](https://stackoverflow.com/questions/34983925/create-subtitles-for-audio-books/34989464#34989464)，列出一些建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-04T17:58:30.257

一个名为 Speechlogger ( [https://speechlogger.appspot.com](https://speechlogger.appspot.com) ) 的新软件 (chrome web-app) 正是为此目的而开发的。它保留时间戳，并允许您导出为[srt (captions) 格式](http://en.wikipedia.org/wiki/SubRip#SubRip_.28.srt.29_structure_examples)。

它应该是目前最好的技术，因为它利用了谷歌的语音识别引擎。它还自动标点符号（基于简单的单词内容和结构）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-26T11:21:22.963

在 Google 中搜索时，您会得到一长串由市场专业人士提供支持的转录软件。其中一些例子是：

1.  快递抄写员
2.  EureScribe
3.  抄写员

但是使用自动化软件时出现的问题是它不能提供我们需要的确切结果。因此，如果您在使用这些软件时仍然遇到任何问题，那么您可以聘请抄写员来简化您的工作。

# java - 如何使用 apache poi 从 .doc 文档中提取文本？

> ID：15590187
> 
> 赞同：1
> 
> 时间：2013-03-23T17:57:40.203
> 
> 标签：java, ms-word, apache-poi, doc

我使用下面的一些代码片段从 .doc 文件中提取文本

```
HWPFDocument document = new HWPFDocument(new FileInputStream(inputFile));
Range range = document.getRange();
        int len = range.numParagraphs();
        StringBuilder builder = new StringBuilder();

        for (int i = 0; i < len; i++) {
            builder.append(range.getParagraph(i).text());
        } 
```

和

```
HWPFDocument document = new HWPFDocument(new FileInputStream(inputFile));
WordExtractor wordExtractor = new WordExtractor(document);
        String[] paragraphs = wordExtractor.getParagraphText();
        StringBuilder builder = new StringBuilder();
        for (String p : paragraphs) {
            builder.append(p);
        } 
```

但是，他们俩总是输出一些奇怪的字符。例如：`PAGEREF_Toc351848910\h10HYPERLINK\l` `_Toc351848911` `CITATIONPla\l1033[HYPERLINK\l"Pla"13]`。所以，我想知道它们来自哪里以及从 .doc 文件中提取文本时如何删除它们

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-16T10:31:58.557

我希望这可以给你一些见解。

```
 private static void ConvertDoctoPdf(String src, String outputPdf) throws Exception {

        try {
            Document pdfdoc = new Document();

            HWPFDocument doc = new HWPFDocument(new FileInputStream(src));

            //create wordextractor object to wrap the extracted word from HWPFDocument object.
            WordExtractor we = new WordExtractor(doc);

            OutputStream outputFile = new FileOutputStream(new File(desc));

            //create a pdf writer object to write text to mypdf.pdf file
            PdfWriter.getInstance(pdfdoc, outputFile);

            pdfdoc.open();

            Paragraph para = new Paragraph();

            //Collecting all paragraphs
            String[] paragraphs = we.getParagraphText();

            for (int i = 0; i < paragraphs.length; i++) {
                //add the paragraph to the document
                para.add(paragraphs[i]);
                //para.add(new Chunk(Chunk.NEWLINE));
                }
            //print all paragraph together
            System.out.println(para);    
            //Add all paragraph together to pdfdoc document.
            pdfdoc.add(para);

            pdfdoc.close();
            we.close();
            }  catch (Exception e) {
            e.printStackTrace();

        }
    } 
```

# java - 以下方法的返回类型应该是什么？

> ID：15590192
> 
> 赞同：-1
> 
> 时间：2013-03-23T17:58:13.287
> 
> 标签：java, generics, wildcard

```
class A {}

class B extends A{}

class C extends B{}

public class Test {
   public List<? extends B> ring(){
     return ???
   }
} 
```

请告诉我，以下哪个可以是方法 ring() 的合法返回类型？

```
return new ArrayList<B>();
return new ArrayList<C>();
return new ArrayList<A>();
return new ArrayList<? extends B>();
return new LinkedList<B>();
return new PriorityQueue<B>();
return new ArrayList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:26:20.670

您的函数正在返回`List<? extends B>`，因此请在下面找到您的有效选项：

1.  `return new ArrayList<B>();` **有效：**因为任何类都是它自己的子类和超类
2.  `return new ArrayList<C>();` **有效：**因为`C`正在扩展`B`
3.  `return new ArrayList<A>();` **无效：**因为`A`没有扩展`B`
4.  `return new LinkedList<B>();` **有效：**因为`List`是超类`LinkedList`
5.  `return new PriorityQueue<B>();` **无效：**因为 `PriorityQueue`不是列表。
6.  `return new ArrayList();` **有效：**带有警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:07:34.433

你真的应该问“什么是有效的退货声明？” 大多数这些工作。没有的是：

*   返回新的 ArrayList(); // ArrayList 是一个 List，但 A 没有扩展 B。
*   返回新的 ArrayList(); // 你永远不能实例化通配符泛型。您可以声明一个，但您不能自己创建一个。
*   返回新的优先队列（）；// PriorityQueue 不是列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T18:08:04.320

由于您必须返回 B 的列表，因此允许使用第一个和第二个。

第三个不是，因为 A IS-A B 不是真的；A 不扩展 B。

第四个对我来说毫无意义。

第五个很好，因为 LinkedList IS-A List。

第六个不行，因为 PriorityQueue 没有实现 List。

第七个没问题，但编译器可能会警告你。它的类型安全性较低，这就是泛型的意义所在。

# ios6 - 使用 Cocoa 自动布局使两个按钮居中

> ID：15590196
> 
> 赞同：28
> 
> 时间：2013-03-23T17:58:48.100
> 
> 标签：ios6, autolayout

我对 Cocoa Auto Layout 有疑问，无法解决这个问题。我想要实现的只是让两个按钮始终位于视图的中心，如下图所示。

![在此处输入图像描述](../Images/0bb0ce37b47b1601b298b8dd3aaa0a5a.png)

我尝试了很多不同的方法，但都没有成功:(请在这里帮助我。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-01-30T16:46:15.277

我是凭记忆写的，所以希望所有信息都是正确的。我正在使用 XCode5。这是我最终从没有限制开始这样做的方式：

1.  选择两个按钮并**添加约束以在“添加新约束”窗口中设置它们的高度和宽度**，该窗口可从 IB 画布右下角的第二个按钮访问。

2.  在两个按钮仍然被选中**的情况下，添加约束来设置它们的 Y 位置**。添加新约束窗口中的上方或下方空格都可以。

3.  现在选择 Button 1 并在 Add New Alignment Constraints 窗口中添加**对齐约束“Horizo​​ntal Center In Container”**，该窗口可从 IB 画布右下角的第一个按钮访问。默认情况下，添加约束的“常量”值为 0。我们想要更改它，因为它是错误的。

4.  此时按钮 1 将有一个垂直穿过它的**黄色条。**这是一个警告，表示按钮的水平中心不等于容器的水平中心 + 约束的常数 (0)。垂直条上的**数字**是按钮离中心的距离。记住那个号码。

5.  双击按钮 1 上的垂直黄色条（需要灵巧度）或选择按钮 1 转到左侧窗格并单击标尺并“选择并编辑”名为“将 X 中心对齐到：”的约束。

6.  **在标有“常数”的文本框中**输入**步骤 4**中的数字。按钮 1 现在已经满足了它显示所需的所有约束。它有一个宽度、高度、Y（顶部空间或底部空间约束），现在还有一个 X（水平居中对齐）。然而，按钮 2 仍然缺少它可以从按钮 1 背负的 X 位置。

***   **选择 Button 2**，转到 Add New Constraints 窗口，只需**将前导空间设置为 Button 1**（左栏离开顶部白框）。** 

 **您现在应该有两个按钮，它们将始终以固定的宽度保持在其容器的中心。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-23T20:14:20.037

Auto Layout 的一个巧妙技巧是使用不可见的视图作为分隔符。约束系统仍然照常布置它们。在这种情况下，两个按钮之间的空间可以是一个不可见的视图。您可以使用此约束字符串中的约束：

```
@"[button][invisibleView(5)][button2(==button)]" 
```

然后创建一个约束设置`invisibleView.centerX = superview.centerX`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-25T15:09:13.413

做到这一点的另一个技巧是将 的右侧对齐到距离中心的空间大小的一半，将 的左侧对齐`button`到远离中心的空间大小的一半。`superview``button2``superview`

这只有在你有一个只围绕你想要居中的两个视图的超级视图时才真正有效。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-29T11:15:52.517

如果您有固定宽度的按钮并且您希望两个按钮之间的距离固定，那么以下步骤可以完成工作：

1.  将`Width`和添加`Height` `constraint`到`button1`示例值：100 高度和 100 宽度。
2.  选择两个按钮并添加`constraint` `Equal Widths`和`Equal Heights`。
3.  在和`Horizontal Spacing`之间添加。或者我们可以说 add to from 。示例值：150`button1``button2``Leading Space``button2``button1`
4.  选择`button1`并添加`constraint` `Horizontally in Container`-125 值。
5.  根据需要添加其他`constrains`类似`Vertical Spacing to Container`等。

示例值 125 等于 ( `button1` `width`/ 2) + ( `Horizontal Spacing`/2)，即 100/2 + 150/2 = 125。

所以添加`Horizontal in Container`到 -125 将`buttons`向左移动，这将使这个布局在屏幕中居中。

示例布局和约束图像附在下面：[![示例布局](../Images/e23f5fea90b6f256c870fc07efb2f56f.png)](https://i.stack.imgur.com/s6dU2.png)

[![button1 上的约束](../Images/ef3ade7768f4302f6a4f6127cac678df.png)](https://i.stack.imgur.com/wmjim.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-18T10:35:41.493

基本上，我`UIButtons`在我的`UITableViewCell`下方有两个需要始终居中且宽度相同的位置。这就是我让它在 Xcode 7.2 中工作的方式。顺便说一句，我正在使用 Swift，如果这有任何关系的话。

1.  在左侧按钮中，我给了它一个**前导**和**底部约束**
2.  在右侧按钮中，我给了它一个**尾随**和**底部约束**
3.  在右侧按钮中，我给**了左侧按钮的前导空间**
4.  最后，在我的右键中，我给它一个**与左键相等的宽度约束**。
5.  完毕。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-23T11:59:12.980

您也可以通过以下方式实现。

1.左键为前导空间，右键为尾随空间。
2.为前导和尾随约束构造出口。

```
 __weak IBOutlet NSLayoutConstraint *leadingConstraint;
 __weak IBOutlet NSLayoutConstraint *trailingConstraint; 
```

3.计算常数如下式。

```
NSInteger constant = (SCREEN_WIDTH - (CGRectGetWidth(leftButton.frame) + CGRectGetWidth(rightButton.frame))) / 3;
    leadingConstraint.constant = constant;
    trailingConstraint.constant = constant; 
```

希望它会帮助你。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-03-03T22:21:47.337

很棒的提示。在我的情况下，我希望按钮与视图中心相距 10 像素，所以我的数学略有不同

```
leadingConstraint.constant = (self.frame.size.width / 2.0) + 5.0;
trailingConstraint.constant = (self.frame.size.width / 2.0) + 5.0; 
```**

# c++ - 当我单击应该播放音乐文件的用户界面中的按钮时，.exe 文件关闭

> ID：15590197
> 
> 赞同：2
> 
> 时间：2013-03-23T17:58:48.160
> 
> 标签：c++, qt, audio-player

我是 QT 的新手，我想通过 QT 播放音乐文件，界面包含一个播放按钮，这样当我单击播放按钮时歌曲应该播放。现在当我运行程序时，我得到了我的界面但不幸的是当我点击播放按钮时，它说 .exe 文件停止工作，它被关闭，退出错误代码 255 getiing 在 QT 创建者窗口中显示..这是主 window.cpp 文件

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include "audiere.h"
using namespace audiere;

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    //connect(ui->Number1,SIGNAL(textChanged(QString)),this,SLOT(numberChanged()));
    connect(ui->play,SIGNAL(clicked()),this,SLOT(PLAY()));

}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::PLAY() {
    AudioDevicePtr device(OpenDevice());
    OutputStreamPtr sound(OpenSound(device,"lk.mp3",true));

    sound->play();
    sound->setRepeat(true);
    sound->setVolume(2.0);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:11:01.653

我有三个建议：

首先，添加错误检查。

其次，如果您在使用 mp3 时遇到问题，请考虑使用 Ogg Vorbis。

第三，将您的指针移动到 MainWindow 的成员变量而不是局部范围变量。Audiere 可能会过早地清理它们。

## 在 Audiere 中使用错误检查

这是来自 Audiere 下载的 doc 文件夹中的“tutorial.txt”：

您需要先打开 AudioDevice 才能播放声音...

```
AudioDevicePtr device(OpenDevice());
if (!device) {
    // failure
} 
```

现在我们有了一个设备，我们实际上可以打开并播放声音。

```
/*
 * If OpenSound is called with the last parameter = false, then
 * Audiere tries to load the sound into memory.  If it can't do
 * that, it will just stream it.
 */
OutputStreamPtr sound(OpenSound(device, "effect.wav", false));
if (!sound) {
  // failure
}

/*
 * Since this file is background music, we don't need to load the
 * whole thing into memory.
 */
OutputStreamPtr stream(OpenSound(device, "music.ogg", true));
if (!stream) {
  // failure
} 
```

太好了，我们有一些开放的流！我们用它们做什么？

## 常见问题解答 有关最近 MP3 支持的信息

常见问题页面中还有一个警告：

> 从 1.9.2 版本开始，由于 splay 库，Audiere 支持 MP3。但是，很少有兼容 LGPL 的 MP3 代码可用于各种 MP3 和硬件。我强烈推荐使用 Ogg Vorbis 来满足您的所有音乐需求。它使用的 CPU 时间减少了大约五分之一*，而且*听起来更好。

## 当 Audiere 进行清理时

在教程的底部，它提到了何时进行清理：

> 使用完 Audiere 后，只需让 RefPtr 对象超出范围，它们就会自动清理。如果您确实 *必须*在其指针超出范围之前删除一个对象，只需将指针设置为 0。

希望有帮助。

# java - 在事件处理程序方法中分配给全局变量的值未在其他方法中重现

> ID：15590199
> 
> 赞同：1
> 
> 时间：2013-03-23T17:58:53.290
> 
> 标签：java, event-handling, serial-port, scope

我正在开发一个接受串行输入并将接收到的数据上传到 COSM 服务器的 java 程序。存储从串口接收到的数据的全局变量不会在用于更新 COSM 的方法中重现该值。有人可以告诉我这有什么问题吗？我之前什至使用过全局队列对象，但是当在更新方法中的队列对象上调用 remove 时，`NullPointerException`会抛出更新方法。

```
public synchronized void serialEvent(SerialPortEvent oEvent)//Event handler for serial communication 
{

    if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) 
    {
        try {

        val = input.read(); 

        this.update(78164);  

    } catch (PachubeException e) {
        // If an exception occurs it will print the error message from the
        // failed HTTP command
        System.err.println(e.errorMessage);
        //System.out.println("Main method");

    } catch (IOException e) {
        System.err.println(e);
        //  System.out.println("Main method");

    } catch (Exception e) {
        //   System.out.println("Main method");
        System.err.println(e);
    }
} 
```

`val`是全局变量。当在方法中调用时`update`，值`val`是零或 20（值`val`在其定义中被初始化）。这是更新方法的实现：

```
private void update(int feedid) throws PachubeException, IOException ,Exception
{

    Feed f = this.pachube.getFeed(feedid);

    System.out.println("updating ...");

    f.updateDatastream(8345, (double) val);
    f.updateDatastream(6274, (double) val);
    f.updateDatastream(1044, (double) val);
    //   f.updateDatainputDatastream((f.getData(), in, out, true));
    //System.out.println(val);    
    System.out.println("updated");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:52:16.493

我自己找到了这个问题的答案。serialEvent 方法签名中的同步说明符阻止了任何其他线程访问 val 变量。我删除了它，它现在可以正常工作了。

# javascript - 即使变量匹配，if 语句也会失败

> ID：15590200
> 
> 赞同：1
> 
> 时间：2013-03-23T17:58:53.527
> 
> 标签：javascript, google-apps-script

我正在尝试制作一个程序来组织来自谷歌表中的 RFID 扫描仪的打卡...

当我将扫描 [i] 与员工姓名 [j] 匹配时，它永远不会成功。

我有一个简单的 if 语句：

```
//names[i] is the name of the card for the scan event (card names = employee full name)
var name = names[i];

//the j for loop will check all employee names in the list for a match
var employee = employees[j];
if (name==employee) {
  var ifsuccess = true;
} 
```

但我从来没有得到 ifsuccess to = true ......这可能很明显，但我之前从未在谷歌脚本（或 javascript :P）中做过编程，有人知道我做错了什么吗？

![截屏](../Images/5db9003287a157a8f9f06ad1e420b389.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:06:36.210

看起来您正在比较两个 Array 对象而不是两个字符串。屏幕截图声称 name 和 employee 是具有单个元素的索引数组。

要比较每个 Array 对象内的字符串数据：

```
name[0] == employee[0]     // equal value 
```

或者稍微安全一点：

```
name[0] === employee[0]    // equal value and of the same type 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:06:44.100

```
> foo = ['foo'];
[ 'foo' ]
> bar = ['foo'];
[ 'foo' ]
> foo == bar
false
> foo === bar
false 
```

将数组与数组进行比较——即使它们看起来相同，除非它们真的在内存中引用同一个数组，否则它们不会是真的。

```
> bar = foo;
[ 'foo' ]
> foo == bar
true
> foo === bar
true 
```

因此，请尝试比较字符串：

```
if (bar[0] === foo[0]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T18:10:36.807

使用 toString 方法也可能有帮助：

```
name.toString()==employee.toString() 
```

但其他建议看起来更干净。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T18:11:13.680

在您的调试器中，您可以看到两者`name`并`employee`引用其中包含字符串的数组 - 但它们是两个不同的数组（具有不同的内部 id），因此在`==`.

如果要比较其中的字符串，请使用

```
var ifsuccess = name[0] == employee[0]; 
```

# python - 使用 tkinter 监视剪贴板，我的代码有什么问题？

> ID：15590201
> 
> 赞同：0
> 
> 时间：2013-03-23T17:59:00.623
> 
> 标签：python, multithreading, python-3.x, tkinter, clipboard

关于代码的一些描述：

1.  这是我的程序的一部分，我只把相关的行放在这里
2.  我希望这些代码能做的，是注意我的剪贴板。如果我将“ **http:xxx** ”复制到我的剪贴板，它会显示一个弹出窗口。如果剪贴板的内容没有改变，则窗口不会' t 再次显示
3.  **运行时可以正常弹窗一次，但是当我将另一个以'http:** '开头的字符串复制到剪贴板时就不会再弹了
4.  我在`after`方法中尝试了一些不同的间隔值，结果相同。

代码：

```
from tkinter import *
import os
import tkinter.messagebox as messagebox
import threading
import re

def watch_clipboard(tk,pipeout):  
    content = '' 
    last_content = ''
    while True:
        try:
            content = tk.clipboard_get()
        except TclError:
            pass
        result = re.match('http:',content)
        if content != last_content:
            if result:
                last_content = content
                message = 'show'.encode()    
                os.write(pipeout,message)

class GUI:
    def __init__(self):
        self.tk = Tk()
        self.tk.resizable(0, 0)
        self.tk.title('watch clipboard')
        pipein,pipeout = os.pipe()
        threading.Thread(target=watch_clipboard,daemon=True,args=(self.tk,pipeout)).start()
        self.tk.after(5000,lambda:self.clipboard_confirm(pipein))
        self.tk.mainloop()

    def clipboard_confirm(self,pipein):
        message = os.read(pipein,16)
        if message == b'show':
            self.tk.clipboard_clear()
            messagebox.askokcancel('', 'add this in?', default='ok')
            self.tk.after(5000,clipboard_confirm(pipein))   #add this

if __name__ == '__main__':
    gui = GUI() 
```

编辑：A。罗达斯的代码有效。似乎是多线程导致了问题。深层原因仍然未知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:00:35.500

我认为多线程不是适合您情况的最佳方法，`after`可能就足够了。`tk.after`您可以使用较低的超时时间来代替繁忙的等待循环。然后你只需要将逻辑移动`watch_clipboard`到你的类中，这样你就不用担心线程之间的通信了。

```
class GUI:
    def __init__(self):
        self.tk = Tk()
        self.tk.resizable(0, 0)
        self.tk.title('watch clipboard')
        self.last_content = ''
        self.tk.after(100, self.watch_clipboard)
        self.tk.mainloop()
    def watch_clipboard(self):
        try:
            content = self.tk.clipboard_get()
            if content != self.last_content and content.startswith('http:'):
                self.last_content = content
                self.tk.clipboard_clear()
                messagebox.askokcancel('', 'add this in?', default='ok')
        except TclError:
            pass
        self.tk.after(100, self.watch_clipboard) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-16T13:22:11.273

@laike9m
您的代码错误是使用了 os.pipe 。
os.read() 是一个阻塞函数，一旦`clipboard_confirm`运行就会收到 os.read() 阻塞。导致 UI 卡住。这个bug和多线程
无关。`after`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T19:02:20.570

这个问题很可能与使用线程有关——从主线程以外的任何地方调用 Tkinter 函数都可能导致问题。

您是否有理由使用线程而不是利用内置无限循环（事件循环）？我建议`after`每隔一秒左右检查一次键盘。

# android - Android动画TextView慢起来

> ID：15590212
> 
> 赞同：-1
> 
> 时间：2013-03-23T18:00:00.507
> 
> 标签：android, android-layout, animation, textview

我需要在显示有关电影的所有信息的电影的决赛中做同样的事情，

我需要一个向上的字符串跟随另一个，并在屏幕末尾再次重复该字符串。

像这样的东西。

* * *

```
 string1

                             string2

                             string3 
```

* * *

* * *

```
 string 2

                             string 3

                             string 1 
```

* * *

* * *

```
 string 3

                             string 1

                             string 2 
```

* * *

但我需要用慢动作来改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T19:01:29.310

所以你想要流动的动画吗？但是对于一部电影，您可以使用跌落的文字，好的，我在这里为您准备了一些东西，请检查一下，将其保存在您的 res/anim 文件夹中为跌落的 .xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
<translate 
    android:fromYDelta="-100%p"
    android:toYDelta="0"
    android:duration="2000"
    />
 </set> 
```

并使用它只需将此代码添加到您的 java 文件中

```
 final Animation falling= AnimationUtils.loadAnimation(this, R.anim.falling);
  textview.startAnimation(); 
```

在 android :fromYDelta 中将值修改为 +ve 以获取流量。

# sql - oracle查询中的rownum问题

> ID：15590215
> 
> 赞同：2
> 
> 时间：2013-03-23T18:00:34.693
> 
> 标签：sql, database, oracle, rownum

我正在尝试运行此查询，但它返回零行。任何线索为什么？

```
Select distinct a.id
from  table1 a, table b
where  ( a.id= b.id or a.id = b.secondid ) and rownum < 200; 
```

但是，如果我在没有 ROWNUM 子句的情况下运行上述查询，它会找到记录：

```
Select distinct a.id
from  table1 a, table b
where  ( a.id= b.id or a.id = b.secondid ); 
```

我很困惑为什么第一个查询不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T18:18:08.163

您需要在Oracle 确定要返回的行`ROWNUM` *之后申请。*唯一可靠的方法是：

```
SELECT * FROM (
  Select distinct a.id
  from  table1 a, table b
  where  ( a.id= b.id or a.id = b.secondid )
) WHERE ROWNUM < 200; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-07T15:22:49.213

请使用下面的线程。很好的解释。 [https://community.oracle.com/thread/210143](https://community.oracle.com/thread/210143) 这里有两个可行的解决方案。

1.  对 8i 和 9i 使用 row_number 函数：
    ROW_NUMBER() OVER (ORDER BY ASC) AS ROW_NUMBER。
2.  重用 Rownum 伪列（这似乎更好） SELECT * FROM ( SELECT t.*, ROWNUM AS rn FROM ( SELECT * FROM mytable ORDER BY paginator, id ) t ) WHERE rn BETWEEN 1 AND 3

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-23T18:04:19.293

将“and rownum < 200”更改为“WHERE rownum < 200”

# javascript - CoffeeScript 嵌套复选框

> ID：15590217
> 
> 赞同：1
> 
> 时间：2013-03-23T18:00:56.493
> 
> 标签：javascript, jquery, coffeescript

我有一个带有部分的侧边栏，每个部分都有章节，其中有子章节。使用复选框将章节和子章节标记为已读。我想做的是：

1.  每当我将章节复选框标记为已选中时，在其标签上加上一行，并且所有子章节复选框也会被选中。

2.  每当我取消标记章节复选框时，通行消失，所有子章节复选框都未标记，并且它们的通行消失。

我一直试图让它工作一段时间但没有成功，任何帮助将不胜感激。谢谢。

```
$(".chapter-ended").live "change", ->
  id = $(this).attr("id")
  isChecked = $(this).attr("checked")
  if(isChecked)
    $(this).closest('li').css "text-decoration", "line-through"
  else
    $(this).closest('li').css "text-decoration", "none"

$(".subchapter-ended").live "change", ->
  id = $(this).attr("id")
  isChecked = $(this).attr("checked")
  if(isChecked)
    $(this).closest('li').css "text-decoration", "line-through"
  else
    $(this).closest('li').css "text-decoration", "none" 
```

[http://jsfiddle.net/MWHML/1/](http://jsfiddle.net/MWHML/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T18:10:39.303

我使用以下方法完成了这项工作：

```
$(".chapter-ended").on "change", ->
  isChecked = $(this).is(':checked')
  $(this).closest('li').find('li input[type="checkbox"]').prop('checked', isChecked);
  if(isChecked)
    $(this).closest('li').css "text-decoration", "line-through"
  else
    $(this).closest('li').css "text-decoration", "none"

$(".subchapter-ended").on "change", ->
  isChecked = $(this).is(':checked')
  $(this).closest('li').find('li input[type="checkbox"]').prop('checked', isChecked);
  if(isChecked)
    $(this).closest('li').css "text-decoration", "line-through"
  else
    $(this).closest('li').css "text-decoration", "none" 
```

我做了以下更改：

*   `.on()`而不是`.live()`事件处理程序
*   `.is(':checked')`而不是`.attr('checked')`查看复选框是否被选中
*   查找所有子复选框输入并将它们标记为选中，使用`.prop('checked', isChecked)`
*   删除`id`变量，因为我没有看到它在任何地方使用

# javascript - JavaScript - 静态变量？

> ID：15590223
> 
> 赞同：0
> 
> 时间：2013-03-23T18:01:41.880
> 
> 标签：javascript

我有一个输入类型=“文本”，它的默认值是“迈克”。当用户单击它时，该值应该设置为 ''（空），并且当它失去焦点时，它应该返回“Mike”（除非用户将值更改为另一个名称）。我所做的是：

```
<input type="text" id="TxtFname" style="width:50%" runat="server"
    onfocus="firstText = this.text;if(this.value!=''){this.value='';}"
    onblur="if(this.value==''){this.value=firstText;}" /> 
```

并在页面顶部的头部内容占位符中：

```
<script type="text/javascript" lang="jv">
    var firstText;
</script> 
```

由于某种原因，它一直“忘记” firstText 的值是什么，因此它将文本框的值设置为“未定义”。有没有办法创建一个静态变量，所以 firstText 的值不会每次都重置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T18:04:33.820

您应该设置`firstText`为输入的`value`属性。

```
firstText = this.value; 
```

否则，`this.text`is 不是输入元素上定义的属性，因此其值默认为`undefined`.

# git - 如何让 Git 扩展浏览器显示所有提交，如 gitk --all

> ID：15590226
> 
> 赞同：6
> 
> 时间：2013-03-23T18:01:56.257
> 
> 标签：git, logging, commit, git-extensions, gitk

Git Extensions 存储库浏览器在许多方面似乎比 gitk 更通用。

![在此处输入图像描述](../Images/1f441863bd531977dca506be805a8011.png)

但是，我最喜欢的 gitk 命令行选项是`--all`. `gitk --all`显示所有提交，*包括任何分支或标签都无法访问的*提交。这对于理解 git 中实际发生的事情非常有用。例如，在 rebase 之后，您仍然可以看到已被复制和放弃的原始提交（甚至使用 回到它们`reset`）。

![在此处输入图像描述](../Images/c39cce62ebf06b10fea3bf6765e08d8e.png)

有没有办法让 Git Extensions 浏览器表现得像`gitk --all`甚至显示无法访问的提交？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-04-19T21:56:08.130

冒着说明现在显而易见的风险，从 2018 年的 2.51.RC2 版本及更高版本开始，可以通过 reflog 访问的提交现在可以显示在 Git 扩展中。我不确定这是否与 完全相同`gitk --all`，但它确实显示了许多其他无法访问的额外提交。

它似乎`git log --reflog`在幕后使用。

拉取请求在[这里](https://github.com/gitextensions/gitextensions/pull/4321)，它与[2.51.RC2](https://github.com/gitextensions/gitextensions/releases/tag/v2.51.RC2)一起发布。

![图像](../Images/bc64bbf36cda15743c4e126eca640868.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-16T21:51:58.407

你的问题的答案是否定的。但是，您可以`gitk --all`通过一些工作打开 .

如果您愿意牺牲性能，您可以通过在设置 > 设置 > Git 扩展 > 性能中更改以下内容来获取更多信息。选中“在修订图中显示当前工作更改”。我已将其关闭并最终使用了“热键设置”选项卡。

*   热键 > 修订网格。确保“ShowAllBranches”有快捷键。它通常是 Ctrl+Shift+A。
*   热键 > 浏览。确保 GitGitK 有快捷键。我用过Ctrl+K。它从 Git Extensions 中调出 gitk。但是，您必须手动查看所有分支，所以我不确定您自己会发现它有多大用处。
*   最后，我认为您会真正喜欢的是“脚本”选项卡。您需要在那里手动添加一个 Gitk --all 脚本，然后您可以为其分配一个热键。然后，您可以从 Git Extensions 中获得 gitk --all 。

玩得开心 ：）

显然，还有[一个 3 个月前的功能请求](https://github.com/gitextensions/gitextensions/issues/1737)正是为此；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-27T21:13:38.213

你指的是像“git reflog”这样的东西。这应该会显示你所有的提交，即使你后来不小心做了重置并丢失了以前的提交。您可以通过这种方式恢复“丢失”的提交。我不相信他们是 GIT 扩展中的按钮来显示该信息。

您通常必须在命令行中执行 git reflog 来查找提交哈希，然后检查具有该哈希的分支。我曾经用它来恢复以前合并失败的提交。

# c# - WndProc 的替代方案，因为在从组件派生的类中需要？

> ID：15590230
> 
> 赞同：2
> 
> 时间：2013-03-23T18:02:16.543
> 
> 标签：c#, winforms, components

我正在编写一个从 Component 派生的自定义控件。

在这个控件中，我需要能够以某种方式获取操作系统消息 WM_DEVICEDCHANGED 以从中创建一些事件。

通常我会直接在应用程序表单中覆盖 WndProc，但这个功能直接放在控件中是非常重要的。

即使控件将始终在窗体上使用，重要的是在从组件派生的控件上接收操作系统消息，因此当将控件放在窗体上时，无需在窗体中手动为其添加功能。

我已经看到一些提到 NativeWindow 和其他解决方案的示例，但是我无法在其中找到头部或尾部，所以我希望这里有人可以帮助我。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:44:34.310

> 我想收到 WM_DEVICECHANGED 消息

好的，这只需要子类化您放置组件的窗体的窗口。任何顶级窗口都会收到该消息。向您的项目添加一个新类并粘贴如下所示的代码。建造。将新组件从工具箱顶部拖放到表单上。为 DeviceChange 事件添加一个事件处理程序，并添加与您感兴趣的设备更改通知类型相关的任何代码。您还可以将该代码放在 OnDeviceChange() 方法中，以进一步专门化通知并引发更具体的事件。您可以从这里拿走它。

```
using System;
using System.ComponentModel;
using System.ComponentModel.Design;
using System.Windows.Forms;

public class DeviceChangeNotifier : Component {
    public delegate void DeviceChangeDelegate(Message msg);
    public event DeviceChangeDelegate DeviceChange;

    public DeviceChangeNotifier() {
        // Add initialization here
    }
    public DeviceChangeNotifier(IContainer container) : this() {
        // In case you need automatic disposal
        container.Add(this);
    }
    public DeviceChangeNotifier(ContainerControl parentControl) : this() {
        // In case you want to use it without the designer            
        this.ContainerControl = parentControl;
    }

    public ContainerControl ContainerControl {
        // References the parent form
        get { return this.parentControl; }
        set { 
            this.parentControl = value;
            this.parentControl.HandleCreated += parentControl_HandleCreated;
        }
    }

    private void parentControl_HandleCreated(object sender, EventArgs e) {
        // Subclass the form when its handle is created
        snooper = new MessageSnooper(this, parentControl.Handle);        
    }

    protected void OnDeviceChange(Message msg) {
        // Raise the DeviceChange message
        var handler = DeviceChange;
        if (handler != null) handler(msg);
    }

    public override ISite Site {
        // Runs at design time, ensures designer initializes ContainerControl 
        // so we'll have a reference to the parent form without it having to do any work
        set { 
            base.Site = value;
            if (value == null) return;
            IDesignerHost service = value.GetService(typeof(IDesignerHost)) as IDesignerHost;
            if (service == null) return;
            IComponent rootComponent = service.RootComponent;
            this.ContainerControl = rootComponent as ContainerControl;
        }
    }

    private ContainerControl parentControl;
    private MessageSnooper snooper;
    private const int WM_DESTROY = 0x0002;
    private const int WM_DEVICECHANGE = 0x0219;

    private class MessageSnooper : NativeWindow {
        // Subclasses the parent window
        public MessageSnooper(DeviceChangeNotifier owner, IntPtr handle) {
            this.owner = owner;
            this.AssignHandle(handle);
        }
        protected override void WndProc(ref Message m) {
            if (m.Msg == WM_DESTROY) this.ReleaseHandle();
            if (m.Msg == WM_DEVICECHANGE) owner.OnDeviceChange(m);
            base.WndProc(ref m);
        }
        private DeviceChangeNotifier owner;
    }
} 
```

# php - 使用多个 MySQL 列值填充一维数组

> ID：15590233
> 
> 赞同：1
> 
> 时间：2013-03-23T18:02:20.827
> 
> 标签：php, mysql, arrays

我对 PHP 和 MySQL 很陌生，但有 VBA 和 C++ 的经验。简而言之，我正在尝试计算一个值（文本字符串）的出现次数，该值可以出现在我表的 11 列中。

我想我需要从这个表中填充一个一维数组，但是该表有 14 列（命名为“player1”到“player14”）。我希望将这些“玩家”中的每一个都输入一维数组（如果不是 NULL），然后再进行下一行。

我知道 MySQL 中有 SELECT DISTINCT 语句，但我可以使用它来计算 14 列中不同的出现次数吗？

作为背景，我正在构建一个足球结果数据库，其中 player1 到 player14 是首发 11 人（和 3 个替补），我的 PHP 代码将计算一名球员出场的次数。

感谢你的帮助！

马特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:10:13.097

重新考虑您的数据库架构。试试这个：

表玩家：
player_id
名称

桌面游戏：
game_id

表外观：
appearance_id
player_id
game_id

这减少了重复数据的数量。阅读规范化。它允许你做一个简单的`select count(*) from appearances inner join players on player_id where name='Joe Schmoe'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:06:05.140

这听起来像是`fetch_assoc`（[http://php.net/manual/de/mysqli-result.fetch-assoc.php](http://php.net/manual/de/mysqli-result.fetch-assoc.php)）的工作。

如果你使用 mysqli，你会得到每一行作为一个关联数组。

另一方面，如前所述，桌子设计似乎有点缺陷。如果你在桌子上`team`有球队名称，什么没有，还有一张桌子`player`上有球员名字。

```
TEAM
| id | name | founded | foo |

PLAYER
| id | team_id | name | bar | 
```

使用这种结构，您可以添加 14 名球员，这些球员指向同一支球队，并通过连接两个表格，提取与您的搜索匹配的球员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T18:09:48.087

首先，您使用的数据库模式很糟糕，而您刚刚找到了原因。

话虽如此，我认为没有其他方法可以首先通过明确地将玩家的姓名选择到数组中来获取所有玩家的列表。在每次插入之前，您必须检查名称是否已经在数组中（如果已经在，不要再添加它）。

然后，当您拥有名称列表时，您必须为每个玩家运行一条 SQL 语句，将出现次数相加，如下所示：

```
SELECT COUNT(*)
FROM <Table>
WHERE player1=? OR player2=? OR player3=? OR ... OR player14 = ? 
```

这一切都非常复杂，正如我所说，你应该真正改变你的数据库模式。

# mysql - 查询 2 个表，其中一个字段链接到 2 个不同的值

> ID：15590235
> 
> 赞同：0
> 
> 时间：2013-03-23T18:02:33.920
> 
> 标签：mysql, sql, zend-framework, zend-db

我正在尝试进行 SQL 查询，但遇到了一些问题。

```
CREATE table entries (
id_entry INT PRIMARY KEY,  
);

CREATE table entry_date (
  entry_date_id INT PRIMARY KEY,
  entry_id INT,
  entry_price INT,
  entry_date TEXT,
); 
```

每个条目都有几个日期。

我想选择 entry.entry_id 该条目具有例如链接到它的日期“23/03/2013”​​和“24/03/2013”​​。

这两个日期存储在一个数组中：

```
 $data = array('ci' => '23/03/2013', 'co' => '24/03/2013'); 
```

在我的治疗中，出于实际目的，我将日期存储在文本中。我使用 Zend_Db 所以我的查询是这样构造的：

```
$select = $table->select ()->from ( 'entries' )->setIntegrityCheck ( false );

        if ($data ['ci'] != NULL) {
            $select->join ( array (
                    'entry_dates' => 'entry_dates' 
            ), 'entries.id_entry = entry_dates.entry_id' );
            $select->where ( 'entry_dates.entry_date = ?', $data ['ci'] );
        }
        if ($data ['co']) {
            if ($data['ci'] == NULL) {
            $select->join ( array (
                    'entry_dates' => 'entry_dates' 
            ), 'entries.id_entry = entry_dates.entry_id' );}
            $select->where ( 'entry_dates.entry_date = ?', $data ['co'] );  
        } 
```

这使 ：

```
SELECT `entries`.*, `entry_date`.* 
FROM `entries` 
INNER JOIN `entry_dates` 
ON entries.id_entry = entry_dates.entry_id 
WHERE (entry_dates.entry_date = '23/03/2013') 
AND (entry_dates.entry_date = '24/03/2013') 
```

而且，好吧......它不起作用。当我获取我的 $select 时，我什么也得不到。

我想当我执行 WHERE ... AND 时，我的请求中遗漏了一些东西，我应该怎么做才能获得正确的输出？真正的请求真的很长，如果可能的话，我想避免另一个长的子选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:09:29.627

它可以通过两种方式完成，或者在 entry_date 表上使用自连接：

```
SELECT `entries`.entry_id
FROM `entries` 
INNER JOIN `entry_dates` AS ed1
ON entries.id_entry = ed1.entry_id 
INNER JOIN `entry_dates` AS ed2
ON entries.id_entry = ed2.entry_id 
WHERE ed1.entry_date = '23/03/2013'
AND ed2.entry_date = '24/03/2013' 
```

或与聚合

```
SELECT `entries`.entry_id
FROM `entries` 
INNER JOIN `entry_dates` AS ed
WHERE ed.entry_date = '23/03/2013'
OR ed2.entry_date = '24/03/2013'
GROUP BY `entries`.entry_id
HAVING COUNT(DISTINCT ed.entry_date)=2 
```

# jquery - 使用css向下滚动时淡入元素

> ID：15590236
> 
> 赞同：10
> 
> 时间：2013-03-23T18:02:37.980
> 
> 标签：jquery, css

示例： http: **[//www.chartjs.org/](http://www.chartjs.org/)**

向下滚动时，每篇文章都会在它进入浏览器的视口时显示。CSS是

```
#examples article {
    -webkit-transition: opacity 200ms ease-in-out;
    -ms-transition: opacity 200ms ease-in-out;
    -moz-transition: opacity 200ms ease-in-out;
    -o-transition: opacity 200ms ease-in-out;
    transition: opacity 200ms ease-in-out;
    position: relative;
    margin-top: 20px;
    clear: both;
} 
```

我试过这个css，但它不起作用。是否有一些与css一起工作的javascript？我怎样才能实现这种滚动->淡入效果？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-23T18:29:13.977

# [演示小提琴](http://jsfiddle.net/mohammadAdil/DFeqH/)

*你想要这样的东西吗？*

```
 $(window).scroll(function () {

        /* Check the location of each desired element */
        $('.article').each(function (i) {

            var bottom_of_object = $(this).position().top + $(this).outerHeight();
            var bottom_of_window = $(window).scrollTop() + $(window).height();

            /* If the object is completely visible in the window, fade it it */
            if (bottom_of_window > bottom_of_object) {

                $(this).animate({
                    'opacity': '1'
                }, 500);

            }

        });

    }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-16T16:40:09.587

穆罕默德的回答没有考虑任何绝对定位的图像......我们应该使用偏移量而不是位置

```
$(window).scroll(function () {

    /* Check the location of each desired element */
    $('.article').each(function (i) {

        var bottom_of_object = $(this).offset().top + $(this).outerHeight();
        var bottom_of_window = $(window).scrollTop() + $(window).height();

        /* If the object is completely visible in the window, fade it it */
        if (bottom_of_window > bottom_of_object) {

            $(this).animate({
                'opacity': '1'
            }, 500);

         }
     });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-06T12:31:53.010

因为我在评论中读到：

如果您希望对象在对象的1/3可见**时淡入，请使用以下代码：**

**jQuery：**

```
$(document).ready(function() {

    /* Every time the window is scrolled ... */
    $(window).scroll( function(){

        /* Check the location of each desired element */
        $('.hideme').each( function(i){

            var bottom_of_object = $(this).position().top + ($(this).outerHeight())/3;
            var bottom_of_window = $(window).scrollTop() + $(window).height();

            /* If the object is completely visible in the window, fade it it */
            if( bottom_of_window > bottom_of_object ){

                $(this).animate({'opacity':'1'},500);

            }

        });

    });

}); 
```

我改变的唯一行是：

```
var bottom_of_object = $(this).position().top + ($(this).outerHeight())/3; 
```

通过更改`/3`为例如`/4`，您可以让它淡入，当对象的 1/4 可见时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-28T09:30:35.727

最佳工艺：

**HTML：**

```
<div id="container">

    <div id="monster">Hello</div>
    <div>Hello</div>
    <div class="hideme">Fade In</div>
    <div class="hideme">Fade In</div>
    <div class="hideme">Fade In</div>
    <div class="hideme">Fade In</div>
    <div class="hideme">Fade In</div>

</div> 
```

**jQuery：**

```
$(function(){  // $(document).ready shorthand
  $('.monster').fadeIn('slow');
});

$(document).ready(function() {

    /* Every time the window is scrolled ... */
    $(window).scroll( function(){

        /* Check the location of each desired element */
        $('.hideme').each( function(i){

            var bottom_of_object = $(this).position().top + $(this).outerHeight();
            var bottom_of_window = $(window).scrollTop() + $(window).height();

            /* If the object is completely visible in the window, fade it it */
            if( bottom_of_window > bottom_of_object ){

                $(this).animate({'opacity':'1'},1500);

            }

        }); 

    });

}); 
```

**CSS：**

```
#container
{
    height:2000px;    
}

#container DIV
{ 
    margin:50px; 
    padding:50px; 
    background-color:pink; 
}

.hideme
{
    opacity:0;
} 
```

# c# - 更新文本框值

> ID：15590237
> 
> 赞同：0
> 
> 时间：2013-03-23T18:02:45.580
> 
> 标签：c#, asp.net, input, textbox

我有一个输入标签，里面有一些文字。现在我希望单击按钮，文本将被更改。

由于某种原因，它没有被改变。

这是输入标签：

```
 <input id="network_table" type="text" value="oldValue" runat="server"/> 
```

以下是我尝试更改输入标签值的方式：

```
network_table.Value = "newValue"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:08:32.087

network_table.Text = "newValue";

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:10:31.757

绑定“onclick”事件并应用这些方法：

在 jQuery 中：

```
$('#network_table').val("your val"); 
```

[http://docs.jquery.com/Val](http://docs.jquery.com/Val)

Javascript

```
document.getElementById('network_table').value = "your val"; 
```

你可以在服务器端使用按钮上的“OnClick”事件来完成，假设你的控件是用`runat="server"`属性定义的

[http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.button.onclick(v=VS.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.button.onclick(v=VS.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T18:20:40.890

您可以尝试为输入分配一些无意义的类，并将其用作参考点来获取输入字段。

```
<input id="network_table" type="text" value="oldValue" runat="server" class="myInputField"/>

$('.myInputField').val('newValue'); 
```

使用 id 将不起作用，因为您正在使用 'runat=server' 并且它使 id 在客户端不可用，您需要首先获取唯一 id 才能获得它。这是一种更简洁的方法，但您需要确保不要在其他地方使用该类以避免模棱两可的结果。

这是一个 jsfiddle 示例，它可以执行您想要的操作，但在加载时。 [http://jsfiddle.net/yX5ze/](http://jsfiddle.net/yX5ze/)

# python - 处理给用户的通知

> ID：15590238
> 
> 赞同：0
> 
> 时间：2013-03-23T18:02:47.133
> 
> 标签：python, google-app-engine, notifications

我正在 GAE 上构建一个应用程序，当另一个用户执行影响他们的操作时，它需要通知用户。当您的朋友对您的 Facebook 状态发表评论时，现实世界的类比会被提醒。

我了解 Channel API 如何实际实时发送通知，但我试图了解将这些通知存储在数据存储中的最有效方法。理想情况下，我希望通知代码与正在执行的实际事件分离。这是[前瞻性搜索](https://developers.google.com/appengine/docs/python/prospectivesearch/)的一个很好的用例吗？感觉不太对劲，因为我不需要执行任何类型的搜索，只是：如果您看到新评论，创建一个存储在数据存储区中的新通知，并通过通道 api 推送到客户端，如果他们连接。我基本上需要一个数据库触发器，但我认为 GAE 不支持它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:37:42.640

你为什么不想一开始就把事件和它的通知结合起来呢？我认为为了帮助您的用例而知道可能会很有趣:)

如果我必须这样做，我会在任何时候向数据存储写入可能触发事件的内容时启动一个任务队列......这样您就可以进行写入并拥有一个单独的“层”来处理事件。触发器甚至不是一个好的选择，因为您的应用程序必须“轮询”数据库才能将事件推送到用户的 UI。

我认为您的流程（触发事件）不属于数据库，因为它可能还需要数据存储无法提供的业务规则：例如，当用户忽略另一个时，您不应该触发事件。您在数据库系统中放入的业务逻辑越多，维护和扩展恕我直言就越复杂......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:36:30.883

看起来 GAE 确实支持使用[hooks](https://developers.google.com/appengine/docs/python/ndb/entities#hooks)模拟数据库触发器。

> 钩子可以用于
> 
> 1.  查询缓存
> 2.  审核每个用户的 Datastore 活动
> 3.  **模仿数据库触发器**

# android - 模拟器：警告：无法使用软件渲染器初始化 OpenglES 模拟

> ID：15590239
> 
> 赞同：28
> 
> 时间：2013-03-23T18:02:49.227
> 
> 标签：android, android-emulator, avd

Android 模拟器中的这些错误消息是什么意思？

```
Starting emulator for AVD 'AVD'
Failed to create Context 0x3005
could not get wglGetExtensionsStringARB
emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-09-29T12:15:13.377

从命令行启动模拟器时`$ emulator64-arm -avd GalaxyS2`--我收到了类似（也许/希望）的相关消息：

> 模拟器：错误：无法加载 OpenGLES 仿真库：lib64OpenglRender.so：无法打开共享对象文件：没有这样的文件或目录

我`lib64OpenglRender.so`通过`locate`. 它位于-dir的`tools/lib`-子目录中。`android-sdk-linux`

所以我创建了`/etc/ld.so.conf.d/android_stuff.conf`（您当然可以将以下行添加到该目录中的另一个 *.conf 文件）并放入一行：

> path_to_android-sdk-linux_directory/tools/lib

然后调用配置工具：（`ldconfig`只是没有任何参数）和（至少在我的情况下）错误消息消失了。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-09-07T13:50:27.440

导出 LD_LIBRARY_PATH="/home/<user-pc>/Android/Sdk/tools/lib64:$LD_LIBRARY_PATH"

cd /home/nazmul/Android/Sdk/tools

./emulator64-x86 -avd < avd-name > -gpu on

这个命令在我的笔记本电脑上工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-30T03:23:52.417

确保为您的显卡安装正确的驱动程序。我遇到了完全相同的错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-19T18:56:07.173

我认为 Gerd 的解决方案是最有帮助的。

万一有人偶然发现了这个，一个更详细和完整的解决方案......

vanilla studio.sh starter-shell 脚本设置了一个环境变量：

```
LD_LIBRARY_PATH="$IDE_BIN_HOME:$LD_LIBRARY_PATH" 
```

然后出口。IDE_BIN_HOME 是通过使用 studio.sh 文件的位置来设置的（在中间的某个地方 - 通常是 [android-studio]/bin）。当通过 Studio->Manger->Tools->Manage AVDs 启动模拟器时，此 env-var 以 android-SDK/tools/bin 为前缀。这意味着当您独立启动它时，您没有设置该环境变量。Gerd 的解决方案将 lib 添加到系统 lib-search-path 中。另一种方法是创建一个处理此问题的包装器，以便仅在需要时设置它并且（可能）还设置其他东西。

```
#!/bin/bash
export JAVA_HOME="/usr/lib/jvm/java-BLAH"
export STUDIO_JDK="$JAVA_HOME"     #This is also used in studio.sh
export IDE_BIN_HOME="/home/you/android-studio/bin"
export Anroid_SDK="/home/you/android-sdk"
export LD_LIBRARY_PATH="$Anroid_SDK/tools/lib:$IDE_BIN_HOME:$LD_LIBRARY_PATH"

cd "$Anroid_SDK/tools"

./emulator64-x86 -avd AVD-NAME-1 -gpu on &
./emulator64-arm -avd AVD-NAME-2 
```

这可能有点过头了，但它是完整的；）根据发行版/设置，可能会预设 JAVA_HOME，因此您可以删除该行。如果您经常使用模拟器，您还可以添加类似

```
export LD_LIBRARY_PATH="[YOUR Studio PATH]/tools/lib:$LD_LIBRARY_PATH" 
```

到您的 .bashrc 或 .profile 文件。

但是要回答实际问题：这意味着模拟器无法运行（硬件加速？）OpenGLES，并且它正在使用软件例程来实现/模拟 OpenGLES：D 要使模拟器能够找到所需的库，请确保您安装了正确的（3D-Accel.？）显卡驱动程序，然后选择上述之一（包装器外壳或（bash-）session-init 设置）。

请注意，较新版本的 Android-Studio 已分叉出 SDK

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-03T09:01:54.543

我也有同样的问题，即使我`512 MB`有`RAM`。我通过“删除”旧模拟器并重新创建新模拟器来解决。我仍然不知道这个问题的原因。Google [Developers](https://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=41032)尚未关闭此问题。希望我的解决方案对其他人有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-20T00:43:00.753

您必须使用您的 android 设备规范，例如 RAM、Heap 其他规范。

很难告诉你哪个必须设置为什么。在我的情况下，我将 RAM 设置为 512 和堆 128 以使其工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-23T18:15:47.553

这意味着链接器在您的系统上找不到 OpenglES 库。您可以尝试安装这些。

在 Fedora 上，这似乎可以解决问题：

```
> yum install mesa-libGLw.i686 
```

这里的一些相关信息：[http ://www.redips.net/android/emulator-fedora-linux/](http://www.redips.net/android/emulator-fedora-linux/)

编辑：对于与 Windows 相关的事情，[这个答案](https://stackoverflow.com/a/14605917/567555)似乎可以满足您的需求。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-19T07:54:33.693

还有一个提示...检查您是否不在虚拟机上...我的意思是您应该在真机上。

# c# - C# 类 += 运算符重载

> ID：15590240
> 
> 赞同：3
> 
> 时间：2013-03-23T18:02:53.687
> 
> 标签：c#, oop, operator-overloading

我有一个 C# 脚本，需要从列表中添加或删除项目。我认为使用 += 和 -= 运算符会更好。

在 C# 中，运算符通过以下方式完成：

```
public Foo operator +(Foo A, Foo B){
    //Some adding code;
    return C;
} 
```

但是，当我尝试时，我只会收到语法错误：

```
public SpriteValues operator +=(SpriteValues A){
    //Add A to this
    return this;
} 
```

我知道在 python 中可以使用：

```
def __iadd__(self, A):
    #Add A to this
    return self 
```

那么我如何在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T18:05:12.980

从[这里](http://msdn.microsoft.com/en-us/library/8edha89s.aspx)您不能直接重载 += 但请注意注释：

```
Assignment operators cannot be overloaded, but +=, for example, is evaluated using +, which can be overloaded 
```

因此，如果您只重载`+`应该没问题的运算符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T18:05:38.863

您不能重载`+=`运算符，因为`a += b`它只是`a = a + b`.

重载`+`运算符将允许您`+=`在对象上使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T18:06:16.740

您不能重载`+=`，但它使用`+`带有赋值的运算符，所以只要您覆盖`+`它就可以工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-23T18:49:29.300

我主张不要为这些操作实施 +/-。在许多情况下，它会导致使用混乱。假设您的列表是可变的（这就是您想要添加和删除操作的原因），定义 +/- 变得很棘手。有几个问题需要考虑。

一项要求是`+`不应引起副作用。如果`var z = x + y`发生突变`x`或`y`. 因此，您必须在 +/- 内创建新列表。大多数开发人员不会期望这种情况发生，并且每次添加项目时复制项目将非常昂贵。

假设您可以忍受每次添加/删除时的复制。执行此片段后，您希望程序的状态是什么：

```
var list1 = new MyList();
var list2 = list1;
list2 += item; 
```

大多数人会期望这一点`list1`并`list2`引用现在包含`item`在其中的相同列表对象。但是，由于`+`创建了一个新列表，因此不会发生这种情况。`list1`是空的，`list2`是一个不同的列表，其中包含`item`. 这很奇怪。

您要么必须放弃列表是可变的要求， +/- 不会导致副作用，或者 += 不会创建新列表的期望。当然，在框架中，委托具有这些运算符并且它们是不可变的。+/- 代表代表的行为是该语言中更令人困惑的部分之一，因此我不建议您效仿它。

我会走正常的路线来实现语义众所周知并且可以轻松预测的 Add/Remove 方法。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-23T18:37:06.537

列表是非常常见的通用类，因此具有众所周知的方法，可以通过这些方法向其中添加或删除内容（即添加和删除）。

如果你去重载操作符，你只会把这个可怜的家伙弄糊涂，一旦你离开了，你就必须维护你的代码。

# list - OCaml 的新手在列表中查找元素的索引

> ID：15590245
> 
> 赞同：-5
> 
> 时间：2013-03-23T18:03:15.583
> 
> 标签：list, recursion, indexing, ocaml

我正在学习 OCaml，我给自己的练习问题之一是在创建的列表中找到元素的索引。到目前为止，我以为我拥有它，但我已经重写这个代码块很长时间了，似乎无法理解为什么返回值不正确。

```
let rec indexer_helper list element index pos found= 
match l with 
        []      ->  if (found = false) then
                        (-1)
                    else
                        index

    |   (h::t)  ->  if (h = e) then
                        index = pos
                        pos = pos + 1
                        indexer_helper t element index pos true
                    else
                        pos = pos + 1
                        indexer_helper t element index pos found;;

let rec indexer list element = indexer_helper list element 0 0 false;; 
```

**编辑**：问题解决了。问题是我在“更改”不可变变量时忘记使用 let 语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T18:15:59.420

你在这里使用你的命令式反应有点太多了。这些 OCaml 行：

```
index = pos
pos = pos + 1 
```

正在计算布尔值，而不是为变量赋值。您不能在 OCaml 中为变量（本身）赋值。变量是不可变的。在 OCaml 中编写这些行的惯用方式类似于：

```
let index' = pos in
let pos' = pos + 1 in
index_helper t element index' pos' true 
```

这里还有其他错误，但这让我觉得首先要弄清楚。

# javascript - 获取隐藏类型值的 span id 值

> ID：15590252
> 
> 赞同：1
> 
> 时间：2013-03-23T18:03:55.660
> 
> 标签：javascript, html, hidden-field

我目前有一个表格，可以将总值加起来并将数字放入 span id 中。

```
<p>Total: <span id="system_cost">&nbsp;</span></p> 
```

我需要将该值放回隐藏类型值。

```
<INPUT TYPE=”HIDDEN” NAME=”charge_total” VALUE=”system_cost”&gt; 
```

我不太擅长 javascript，并且无法弄清楚这一点，因此非常感谢任何帮助。我需要将 id 填充到隐藏类型值中。

[edit] 抱歉，我输入了错误的代码。[/edit]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T18:07:36.213

尝试这个：

**HTML**

```
<p>Total: <span id="system_cost">&nbsp;</span></p>
<input type="hidden" value="charge_total" id="hidden_cost" /> 
```

**JS**

```
var span = document.getElementById('system_cost');
var hidden = document.getElementById('hidden_cost');
hidden.value = span.innerHTML; 
```

# c++ - 从第一个集合元素中删除第二个集合包含的元素而无需迭代

> ID：15590254
> 
> 赞同：2
> 
> 时间：2013-03-23T18:03:56.460
> 
> 标签：c++, stl

我有两组对（我不能使用 c++11）

```
std::set<std::pair<int,int> > first;
std::set<std::pair<int,int> > second; 
```

我需要从第一个集合中删除第二个集合中的所有元素（如果第一个包含第二个要删除的元素）。我可以通过迭代第二组来做到这一点，如果 first 包含从第一个元素中删除的相同元素，但我想知道有没有办法在没有迭代的情况下做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T18:06:18.020

如果我理解正确，基本上你想计算第一和第二的差异。有一个`<algorithm>`功能。

```
std::set<std::pair<int, int>> result;
std::set_difference(first.begin(), first.end(), second.begin(), second.end(), inserter(result, result.end())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T18:17:30.250

> 我想知道有没有办法在没有迭代的情况下做到这一点。

不。在内部，集合是平衡的二叉树——没有迭代结构就无法对它们进行操作。（我假设您对实现的效率感兴趣，而不是代码的便利性，所以我故意忽略了必须在内部迭代的库例程）。

但是集合是排序的，因此您可以对每个集合进行迭代，边走边删除（因此 # 操作是集合大小的总和）而不是迭代和查找每个元素（其中操作数是您的元素数'正在迭代时间以记录另一组中元素数量的基数 2）。只有当你的一组比另一组小得多时，迭代/查找方法才会胜出。如果您查看`set_difference`Amen 的答案中提到的库函数的实现） - 它应该向您展示如何很好地进行两次迭代。

如果你想要更高效的东西，你需要考虑如何更早地实现它：例如，将你的对作为标志存储在相同大小的二维矩阵中，这样你就可以与第二组的否定进行 AND。这是否实用取决于您存储的 int 值的范围，所需的内存量是否适合您的目的......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T18:26:56.390

是的你可以。

如果您想删除，而不仅仅是检测，这里还有另一个`<algorithm>`功能：**remove_copy_if()**：

[http://www.cplusplus.com/reference/algorithm/remove_copy_if/](http://www.cplusplus.com/reference/algorithm/remove_copy_if/)

恕我直言。理解它的工作原理并不难。

# facebook - OpenGraph 图像在调试器中很好，在 Facebook 上不显示

> ID：15590257
> 
> 赞同：0
> 
> 时间：2013-03-23T18:04:17.710
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, xfbml

如果您查看示例页面的[源代码以及该页面的](http://www.thejoecole.com/gallery/Places/Garden_of_the_Gods-1/photo-IMG_0325.jpg#IMG_0325.jpg)[Facebook 调试器](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.thejoecole.com%2Fgallery%2FPlaces%2FGarden_of_the_Gods-1%2Fphoto-IMG_0325.jpg%23IMG_0325.jpg)，您将看到 Facebook 抓取正确的图像并将其显示在 Facebook 调试器中。这里没有奇怪的重定向或文件名，只是一个设置为 og:image 的简单图像，但 Facebook 没有显示它！

如果您直接在 Facebook 上复制/粘贴 url（例如，在状态更新中），og:image 会立即显示。

但是，当从网站点赞或评论时，根本没有图像出现！

任何帮助，将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T09:48:25.343

//创建一个对象

FBGraphObject 对象；

//打开的图形对象将被发布到facebook

object.provisionedForPost = YES;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:09:26.837

将您的页面放入 Facebook 调试器会产生以下警告：

og:image 标记的 url 引用的图像无法下载。

出于某种原因，它还切断了页面中 og 标记的末端，删除了“IMG_0325.jpg”文本。我只能想象这是因为它不喜欢大写！

由于最近 FB 对将在帖子中显示的图像的网址的接受发生了变化，我们的网站一直受到影响，我认为我们的问题与您的问题略有不同，但他们似乎对 url 作为一个非常普通的图像变得更加严格网址。

# sql - 当您加入“或”或 SQL 时会发生什么？

> ID：15590274
> 
> 赞同：0
> 
> 时间：2013-03-23T18:05:56.827
> 
> 标签：sql, sql-server-2008

鉴于这个简单的模式：

```
create table A(pk int primary key, R1 int, R2 int);
create table B(pk int primary key); 
```

如果我执行以下查询并使用 OR 加入如下所示，究竟会发生什么？

```
select *
from A
join B
on A.R1 = B.pk or A.R2 = B.pk 
```

我对以下案例感兴趣：

如果存在 R1 和 R2 都指向 B 中不同 PK 的行怎么办？由于连接，我最终会得到多条记录，还是只是默认到 or 的左侧并匹配 A.R1 = B.pk？

* * *

PS：我正在平板电脑上阅读代码并且没有数据库来测试它，所以请不要告诉我自己运行它:) 我尝试谷歌搜索但没有找到确切的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T18:16:11.417

你得到两行。

如果你有互联网，你总是有一个数据库来处理[SQL Fiddle](http://sqlfiddle.com/#!3/7b053/1) - 链接是你问题的答案。

# neo4j - 如何在密码代码中附加 html

> ID：15590276
> 
> 赞同：1
> 
> 时间：2013-03-23T18:05:59.327
> 
> 标签：neo4j, cypher

```
$query="START n=node:node_auto_index(name:"Ashish") CREATE UNIQUE n-[n_f]->(r{con:"<img src="anypic.jpg""})"; 
```

我如何添加一个html；neo4j 节点中的代码。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T22:04:43.950

你有嵌套的双引号。您需要根据您的语言转义它们。php？

在 Cypher 中，您可以使用`\"`.

[http://console.neo4j.org/r/db6url](http://console.neo4j.org/r/db6url)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T21:23:28.103

使用 Cypher，您可以做到

```
CREATE (Test {content:'<!DOCTYPE html><html><head><title>Page Title</title></head><body><h1>Test Page</h1><img src="anypic.jpg"></body></html>'}) 
```

实时控制台链接：[http ://console.neo4j.org/r/nki3cf](http://console.neo4j.org/r/nki3cf)

# ruby-on-rails - 在工厂女孩中使用构建或匹配器测试模型

> ID：15590285
> 
> 赞同：0
> 
> 时间：2013-03-23T18:06:32.663
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, factory-bot, rspec-rails

我有以下用于patient_allergies 的工厂

```
FactoryGirl.define do
  factory :patient_allergy do
    patient
    name 'Peanuts'
  end
end 
```

Patient_allergy_reactions 的以下工厂

```
FactoryGirl.define do
  factory :patient_allergy_reaction do
    patient_allergy
    name 'Fever'
    severity 'High'
  end
end 
```

patient_allergy 的模型如下所示：

```
class PatientAllergy < ActiveRecord::Base
  belongs_to :patient
  has_many :patient_allergy_reactions
end 
```

patient_allergy_reaction 的模型如下所示：

```
class PatientAllergyReaction < ActiveRecord::Base
  belongs_to :patient_allergy
end 
```

我的模型测试如下所示：

```
it 'returns correct allergies with reactions' do
    #create an allergy
    allergy_name = 'Peanuts'
    patient_allergy = create(:patient_allergy, name: allergy_name, patient: patient)

    #create a allergy reaction
    reaction_name = 'Fever'
    reaction_severity = 'Low'
    allergy_reaction = create(:patient_allergy_reaction, name: reaction_name, severity: reaction_severity, patient_allergy: patient_allergy)

    expect(patient.patient_allergies.size).to eq(1)
    expect(patient.patient_allergies[0]).to eq(patient_allergy)
    expect(patient.patient_allergies[0].patient_allergy_reactions[0]).to eq(allergy_reaction)
  end 
```

以上工作正常，但似乎没有增加太多价值。我正在尝试找出一种在上述测试中使用构建和特征的方法。否则，有没有办法使用 expect(patient).to have_many(:patient_allergies) 匹配器或其他东西。

如果我能理解用工厂女孩测试我的模型，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:00:20.637

*以上工作正常，但似乎没有增加太多价值*

同意。您的模型规范应该测试您编写的方法，而不是测试 Rails 的行为。

如果你想测试你的关联，你可以查看[shoulda-matchers](https://github.com/thoughtbot/shoulda-matchers)，它有 Rails 模型的标准测试。

# dart - 使用 Dart 编辑器让应用在 Chromium 中启动

> ID：15590296
> 
> 赞同：3
> 
> 时间：2013-03-23T18:07:56.497
> 
> 标签：dart, dartium

我想知道是否有人无法让 Cmd-r 启动他们的应用程序？

它确实带来了铬，但我必须手动输入 localhost:3030 然后导航到我的实际应用程序。此外，即使在导航到应用程序后，服务器连接最终也会超时

`java.net.ConnectException: Connection refused`

我使用的是 OS X 10.7.5，Dart 编辑器版本 0.4.2_r20259。谢谢你。

**2013 年 4 月 25 日：只是添加有关不起作用的详细信息，这是我尝试使用 Devon Carew 提到的预发布 dartEditor 进行编译时遇到的错误：**

```
--- Mar 25, 2013 11:13:59 AM build.dart --machine --changed=web/quizry3.html ---
file:/Users/stephen/silly2/quizry-client/build.dart
build.dart returned error code 255

Uncaught Error: Class '_File' has no instance method 'open' with matching arguments.

NoSuchMethodError: incorrect number of arguments passed to method named 'open'
Receiver: Instance of '_File@0x1da10ec4'
Tried calling: open(Instance of 'FileMode')
Found: open(mode)
Stack Trace:
#0      Object.noSuchMethod (dart:core-patch:1884:25)
#1      ConsoleFileSystem.writeString (package:web_ui/src/file_system/console.dart:22:43)
#2      writeFile (package:web_ui/dwc.dart:104:27)
#3      emitFiles.<anonymous closure> (package:web_ui/dwc.dart:92:35)
#4      List.forEach (dart:core-patch:1219:8)
#5      emitFiles (package:web_ui/dwc.dart:92:18)
#6      run.<anonymous closure>.<anonymous closure> (package:web_ui/dwc.dart:86:29)
#7      _ThenFuture._sendValue (dart:async:463:24)
#8      _FutureImpl._setValue (dart:async:361:26)
#9      _FutureImpl._chain (dart:async:418:23)
#10     _FutureImpl._setOrChainValue (dart:async:429:27)
#11     _ThenFuture._sendValue (dart:async:473:21)
#12     _FutureImpl._setValue (dart:async:361:26)
#13     _FutureImpl._setOrChainValue (dart:async:437:16)
#14     _ThenFuture._sendValue (dart:async:473:21)
#15     _FutureImpl._setValue (dart:async:361:26)
#16     _FutureImpl._setOrChainValue (dart:async:437:16)
#17     _ThenFuture._sendValue (dart:async:473:21)
#18     _FutureImpl._setValue (dart:async:361:26)
#19     _CompleterImpl.complete (dart:async:190:21)
#20     FutureGroup.add.<anonymous closure> (package:web_ui/src/utils.dart:139:28)
#21     _ThenFuture._sendValue (dart:async:463:24)
#22     _FutureImpl._setValue (dart:async:361:26)
#23     _FutureImpl._setOrChainValue (dart:async:437:16)
#24     _ThenFuture._sendValue (dart:async:473:21)
#25     _FutureImpl._setValue (dart:async:361:26)
#26     _CatchErrorFuture._sendValue (dart:async:485:14)
#27     _FutureImpl._setValue (dart:async:361:26)
#28     _FutureImpl._setOrChainValue (dart:async:437:16)
#29     _ThenFuture._sendValue (dart:async:473:21)
#30     _FutureImpl._setValue (dart:async:361:26)
#31     _FutureImpl._setOrChainValue (dart:async:437:16)
#32     _ThenFuture._sendValue (dart:async:473:21)
#33     _FutureImpl._setValue (dart:async:361:26)
#34     _FutureListenerWrapper._sendValue (dart:async:221:21)
#35     _FutureImpl._setValue (dart:async:361:26)
#36     _FutureListenerWrapper._sendValue (dart:async:221:21)
#37     _FutureImpl._setValue (dart:async:361:26)
#38     _FutureImpl._setOrChainValue (dart:async:437:16)
#39     _ThenFuture._sendValue (dart:async:473:21)
#40     _FutureImpl._setValue (dart:async:361:26)
#41     _FutureListenerWrapper._sendValue (dart:async:221:21)
#42     _FutureImpl._setValue (dart:async:361:26)
#43     _FutureImpl._setOrChainValue (dart:async:437:16)
#44     _ThenFuture._sendValue (dart:async:473:21)
#45     _FutureImpl._setValue (dart:async:361:26)
#46     _CompleterImpl.complete (dart:async:190:21)
#47     _SendPortImpl.call.<anonymous closure> (dart:isolate-patch:106:27)
#48     _ReceivePortImpl._handleMessage (dart:isolate-patch:81:92)

Unhandled exception:
Class '_File' has no instance method 'open' with matching arguments.

NoSuchMethodError: incorrect number of arguments passed to method named 'open'
Receiver: Instance of '_File@0x1da10ec4'
Tried calling: open(Instance of 'FileMode')
Found: open(mode)
#0      _FutureImpl._scheduleUnhandledError.<anonymous closure> (dart:async:391:9)
#1      Timer.run.<anonymous closure> (dart:async:2362:21)
#2      Timer.run.<anonymous closure> (dart:async:2370:13)
#3      Timer.Timer.<anonymous closure> (dart:async-patch:15:15)
#4      _Timer._createTimerHandler._handleTimeout (dart:io:6385:28)
#5      _Timer._createTimerHandler._handleTimeout (dart:io:6393:7)
#6      _Timer._createTimerHandler.<anonymous closure> (dart:io:6401:23)
#7      _ReceivePortImpl._handleMessage (dart:isolate-patch:81:92) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:54:40.673

此预发布版本*可能会*为您解决连接被拒绝的问题：

[http://gsdview.appspot.com/dart-editor-archive-trunk/20424/](http://gsdview.appspot.com/dart-editor-archive-trunk/20424/)

# vb6 - vb 6.0中如何限制文本框的值

> ID：15590298
> 
> 赞同：0
> 
> 时间：2013-03-23T18:07:57.483
> 
> 标签：vb6, textbox, integer

我正在做一个标记更新数据库系统。我需要将每个文本框的值限制为小于 100，当大于 100 或不是数字时，会弹出一个消息框并且在用户更改错误之前不会保存数据。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T18:36:43.480

我同意 Hiren Pandya 的观点，但我想我也会添加我自己的观点。

请注意，将字符串转换为数值并非易事，但 VB6 中的[Val](http://msdn.microsoft.com/en-us/library/k7beh1x9%28v=vs.80%29.aspx)、[CInt](http://msdn.microsoft.com/en-us/library/s2dy91zy.aspx)、 CDBl 等函数都可以为您提供接近您想要的行为。（其中一些链接用于 VB.Net，但仍然很有价值）。当您自己验证用户输入时，您要确保正在考虑数字分组、正/负、小数分隔符等。大多数时候，内置功能已经足够好了。

```
Private Sub Text1_Change()
    On Error GoTo Err_Handler
    Dim text As String
    text = Text1.text
    If IsNumeric(text) = True Then

        'If you only want integers...
        Dim value As Integer
        value = Val(text)
            If value <= 100 And value > 0 Then
            'The value is good so whatever stuff you need to do
            'And then leave the procedure
            Exit Sub
        End If
    End If

    'Let everything else fall through here...
Err_Handler:
    MsgBox "Invalid input."
    'Other stuff to prevent saving
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T18:17:26.457

在文本框的属性中，将 MaxLength 设置为 2。

如果您想要一条消息，请在文本框中更改事件中，您可以...

```
If Len(txtBox.Text)>2 then msgbox... 
```

然后在消息框中添加您的消息。

如果您需要，我可以详细说明。像下面这样的东西......

```
Private Sub Text1_Change()
If Len(Text1) > 6 Then
    Text1 = " "    
    MsgBox "Not more than six"    
    Text1.SetFocus    
End If
End Sub 
```

# android - Android 音频播放问题

> ID：15590301
> 
> 赞同：0
> 
> 时间：2013-03-23T18:08:08.670
> 
> 标签：android, audio, android-alertdialog

显示警报框时，我正在播放一些声音/音频。

我想处理当我按下 Alertdialog 的正或负按钮时的情况，如果到那时音频还没有完成，我希望音频停止播放。

如何处理这种特定情况？

代码：

```
 AlertDialog.Builder alertdialog = new AlertDialog.Builder(
                Activity.this);
        alertdialog.setTitle("Title ");
        alertdialog.setMessage("The MEssage ");

        LayoutInflater layoutinf= LayoutInflater.from(Activity.this);
        final View view = layoutinf.inflate(R.layout.layoutfile, null);
        alertdialog.setView(view);
        alertdialog.setPositiveButton("Button1",
                new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog,
                            int which) {
                        //do something 
                    }
                });
        alertdialog.show();

                MediaPlayer mp = MediaPlayer.create(this, R.raw.file_to_play);
                mp.start();
                mp.setOnCompletionListener(new OnCompletionListener() {

                    @Override
                    public void onCompletion(MediaPlayer mp) {
                        mp.release();
                    }

                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:48:02.553

我认为这对你来说应该没问题。

```
 AlertDialog.Builder alertdialog = new AlertDialog.Builder(
                Activity.this);
        alertdialog.setTitle("Title ");
        alertdialog.setMessage("The MEssage ");

        final  MediaPlayer mp = MediaPlayer.create(this, R.raw.file_to_play);
        LayoutInflater layoutinf= LayoutInflater.from(Activity.this);
        final View view = layoutinf.inflate(R.layout.layoutfile, null);
        alertdialog.setView(view);
        alertdialog.setPositiveButton("Button1",
                new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog,
                            int which) {
                        if( mp !=null && mp.isPlaying()){
                                 mp.stop();
                           }
                    }
                });
        alertdialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

          @Override
    public void onClick(DialogInterface arg0, int arg1) {
              if( mp !=null && mp.isPlaying()){
                           mp.stop();
                        }                       
    }
         });
        alertdialog.show();

                mp.start();
                mp.setOnCompletionListener(new OnCompletionListener() {

                    @Override
                    public void onCompletion(MediaPlayer mp) {
                        mp.release();
                    }

                }); 
```

# ruby-on-rails - 在我的本地主机 Rails 上查看我的 404 页面

> ID：15590303
> 
> 赞同：6
> 
> 时间：2013-03-23T18:08:26.147
> 
> 标签：ruby-on-rails, localhost, http-status-code-404

所以我一直在处理我的 404 页面，因为没有糟糕的格式和乏味的设计，404 已经足够令人沮丧了，但是每当我进行更改时，我都不知道如何在我的本地主机上查看它。如果我转到一个不退出的页面，（`localhost:3000/foobar`），它只是说它没有路由。如果我直接去，同样的事情会发生`localhost:3000/public/404.html`。每次想看都得推到heroku，这很烦人，也打破了我的编码标准。

有没有办法在我的本地主机上呈现我的 404 页面？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T18:19:16.407

省略公共部分

```
localhost:3000/404.html 
```

# javascript - 如何仅在事件之前失去绑定之后才绑定事件

> ID：15590304
> 
> 赞同：1
> 
> 时间：2013-03-23T18:08:31.453
> 
> 标签：javascript, jquery, events, binding

我有一个`click`像这样绑定的 div：

```
 $("#mydiv").one('click',function(){ ... }); 
```

因为我只想执行一次动作。现在我想`bind`重新

```
 $("#mydiv").on('click',function(){ ... }); 
```

但只有当用户点击它时，至少是第一次。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T18:14:44.157

您可以使用 jQuery[命名事件：](http://docs.jquery.com/Namespaced_Events)

```
$('#mydiv').on('click.firstClick', function () {
    // do stuff for the first time
    $(this).off('click.firstClick'); // only removes this event
});

$('#mydiv').on('click', function () {
    // stuff that always happens when you click
}); 
```

如果你只是想第一次发生一些事情，然后每次都发生一些事情：

```
$('#mydiv').click(function () {
    // stuff that happens the first time you click
    $(this).off('click');
    $(this).click(function () {
        // stuff that happens every time after this
    });
}); 
```

第一个场景示例：http: [//jsfiddle.net/75HWV/](http://jsfiddle.net/75HWV/) 第二个场景示例：http: [//jsfiddle.net/SbhY3/](http://jsfiddle.net/SbhY3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T18:25:07.023

```
$('#mydiv').one('click', function() {
    // ...
    // code here for action-A, on first click
    // ...
    $(this).on('click', function() {
        // ...
        // code here for action-B, on subsequent clicks
        // ...
    });
}); 
```

# c# - Windows 7 欢迎屏幕（将 c# 转换为 pascal）

> ID：15590308
> 
> 赞同：3
> 
> 时间：2013-03-23T18:08:42.610
> 
> 标签：c#, winapi, freepascal, lazarus

Jon 在以下线程中提供的代码似乎准确地说明了我想要做什么

[在 Windows 7 欢迎屏幕上运行进程](https://stackoverflow.com/questions/3070152/running-a-process-at-the-windows-7-welcome-screen)

不幸的是，它是用 C# 编写的，我根本不知道这种语言。我正在尝试将代码转换为 Pascal（Windows 7 上 Lazarus 的最新版本）。从字里行间的阅读中，我想我可能已经得到了很多 - 但是，只有当它无法完成工作时，我才会知道我是否弄错了。目前它无法在以下点编译。

```
if (!DuplicateTokenEx(userToken, 0x10000000, ref tokenAttributes,   
SECURITY_IMPERSONATION_LEVEL.SecurityImpersonation, TOKEN_TYPE.TokenImpersonation,
out newToken)) {
log("ERROR: DuplicateTokenEx returned false - " 
```

我的帕斯卡版本：

```
If Not DuplicateTokenEx(UserToken, MAXIMUM_ALLOWED, tokenAttributes,
SecurityImpersonation, TokenPrimary, newToken) then
  Writeln(DLog, 'Failed to duplicate security token'); 
```

Lazarus 在六个参数中的第五个抛出错误。

dmain.pas(189,110) 错误：arg no 的类型不兼容。5: Got "TOKEN_TYPE", expected "_TOKEN_TYPE" - 这表明我还没有理解参数在做什么。（将参数 5 更改为*TokenImpersonation*会引发相同的错误。）

再往下，我更加迷失：

```
tokPrivs.Privileges = new LUID_AND_ATTRIBUTES[1];
tokPrivs.Privileges[0].Luid = seDebugNameValue;
tokPrivs.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED; 
```

我可以看到结构类型 LUID_AND_ATTRIBUTES 在 Windows API 中，但 Lazarus 似乎无法识别它。

简而言之，我在黑暗中摸索。我试过用谷歌搜索“C# for Pascal程序员”，但没有发现任何帮助。学习 C# 不是一件容易的事，所以我非常感谢任何关于它和 Object Pascal 之间差异的提示，以及如何翻译这段代码。

编辑：按要求未完成的代码。

```
function RunOurProcess(ProgramName: String): Boolean;
var
StartInfo: TStartupInfo;
ProcInfo: TProcessInformation;
NewToken, Token, UserToken: THandle;
WPID: DWord;
ThreadAttributes, TokenAttributes: TSecurityAttributes;
TOKPrivs: TTokenPrivileges;
begin
    FillChar(StartInfo, SizeOf(TStartupInfo), #0);
    FillChar(ProcInfo, SizeOf(TProcessInformation), #0);
    StartInfo.cb:= SizeOf(TStartupInfo);
    { Insert handle of current desktop - without this, GUI app is not visible!
      To appear before logon, lpDesktop value should be 'winsta0\WinLogon' }
    StartInfo.lpDesktop:= PChar('winsta0\WinLogon');
    // Save the process ID of the WinLogon process
    WPID:= FindInProcesses('Winlogon.exe');
    // Get the handle of this
    Token:= OpenProcess(TOKEN_QUERY or TOKEN_IMPERSONATE or TOKEN_DUPLICATE, False, WPID);
    // Open a process token using the handle above
    If OpenProcessToken(Token, TOKEN_QUERY or TOKEN_IMPERSONATE or TOKEN_DUPLICATE, UserToken) then
    Writeln(DLog, 'Opened process token for WinLogon')
        else
    Writeln(DLog, 'Failed to open process token for WinLogon');
    // Create a new token
    NewToken:= 0;
    tokenAttributes.nLength:= SizeOf(tokenAttributes);
    threadAttributes.nLength:= SizeOf(threadAttributes);
    If Not DuplicateTokenEx(UserToken, MAXIMUM_ALLOWED, tokenAttributes, SecurityImpersonation, TokenImpersonation, newToken) then
    Writeln(DLog, 'Failed to duplicate security token');
    // Elevate the privileges of the token
    AdjustTokenPrivileges(NewToken, False, {NewState, BufferLength, PreviousState, ReturnLength});
    // LogOnUser
    // If successful, CreateProcessAsUser
    // In progress - code below needs to go before 'CreateProcessAsUser'
    StartInfo.cb:= SizeOf(TStartupInfo);
    // Insert handle of current desktop - without this, GUI app is not visible!
    StartInfo.lpDesktop:= PChar('winsta0\WinLogon');
end; // RunOurProcess 
```

我现在注意到，如果我尝试查找“DuplicateTokenEx”的声明，则会收到以下错误

C:\lazarus\fpc\2.6.1\source\packages\winunits-jedi\src\jwawindows.pas(366,5) 错误：找不到包含文件“JwaLmErr.pp”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:43:20.043

以下是解决编译问题的方法。

`DuplicateTokenEx`对第三个参数的调用实际上失败了。查看声明，它是`LPSECURITY_ATTRIBUTES`which is `^TSecurityAttributes`。现在，`tokenAttributes`是类型`TSecurityAttributes`，所以你需要传递它的地址：

```
If Not DuplicateTokenEx(..., @tokenAttributes, ...) then 
```

同样在调用`AdjustTokenPrivileges`. C#代码是：

```
AdjustTokenPrivileges(newToken, false, ref tokPrivs, 0, IntPtr.Zero, IntPtr.Zero) 
```

转换为帕斯卡将是：

```
AdjustTokenPrivileges(NewToken, False, @TOKPrivs, 0, nil, nil) 
```

我不知道代码是否能解决你的问题。我认为这超出了这个问题的范围——至少这是我的借口，我坚持下去！

# python - Tkinter 对 Mac OS X 的 Tile 的依赖

> ID：15590312
> 
> 赞同：1
> 
> 时间：2013-03-23T18:09:00.507
> 
> 标签：python, python-3.x, tkinter, osx-leopard

您好，在 Mac OSX 5 上使用 python3 时出现以下错误：

```
Traceback (most recent call last):
  File "app.py", line 107, in <module>
    sv1 = ttk.Scrollbar(root, orient=VERTICAL, command=vScroll)
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/tkinter/ttk.py", line 1138, in __init__
    Widget.__init__(self, master, "ttk::scrollbar", kw)
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/tkinter/ttk.py", line 559, in __init__
    _load_tile(master)
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/tkinter/ttk.py", line 47, in _load_tile
    master.tk.eval('package require tile') # TclError may be raised here
_tkinter.TclError: couldn't load file "/Library/Tcl/tile0.6/libtile0.6.dylib": dlopen(/Library/Tcl/tile0.6/libtile0.6.dylib, 10): no suitable image found.  Did find:
    /Library/Tcl/tile0.6/libtile0.6.dylib: mach-o, but wrong architecture 
```

然后我跑：`lipo -info /Library/Tcl/tile0.6/libtile0.6.dylib`并得到：`Non-fat file: /Library/Tcl/tile0.6/libtile0.6.dylib is architecture: ppc`。

我有一个英特尔 mac。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:16:16.150

tile 是 tcl/tk 的一部分。您以某种方式安装了 PowerPC 版本而不是 Intel 版本。更新到正确的版本。[此页面](http://www.python.org/getit/mac/tcltk/) 提供基于您的 OS X 和 python 版本的组合。

# php - 在 Laravel 4 中找不到库类

> ID：15590316
> 
> 赞同：3
> 
> 时间：2013-03-23T18:09:27.127
> 
> 标签：php, laravel, laravel-4

我正在迁移一个工作生产 L3 站点以使用 L4。当控制器调用库类 ( `app/libraries/adminthing.php`) 时，我收到错误`Error: Class 'adminthing' not found in /var/www/l4/app/controllers/AdminController.php line 15`

**开始/global.php**

```
ClassLoader::addDirectories(array(

    app_path().'/controllers',
    app_path().'/models',
    app_path().'/database/seeds',
    app_path().'/libraries',

)); 
```

`composer dumpautoload`添加库类后我也完成了。我还错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-23T18:44:00.010

您可以从 composer.json 自动加载文件夹。如果您在 /app 下的文件夹中有一些自定义类，您可以将该文件夹添加到 composer.json，然后自动加载这些类。

```
"autoload": {
  "classmap": [
    "app/commands",
    "app/controllers",
    "app/models",
    "app/database/migrations",
    "app/database/seeds",
    "app/tests/TestCase.php",
    "app/customlib" <-- add this
  ]
}, 
```

然后composer dump-autoload，就可以使用类了！

# facebook - 脸书 502 nginx + fpm

> ID：15590318
> 
> 赞同：1
> 
> 时间：2013-03-23T18:09:37.530
> 
> 标签：facebook, nginx, php

我无法在 Facebook 上发布任何图片或其他媒体。我使用了调试器（`http://developers.facebook.com/tools/debug`），我总是得到：

```
Scrape Information
Response Code:  502 
```

我将 nginx 1.2.0 与 php-fpm 与 sock not port (9000) 一起使用我的错误日志没有显示任何错误。访问日志

```
69.171.237.14 - - [23/Mar/2013:19:00:29 +0100] "GET /video/X1KAW64412WH1OO/5123 HTTP/1.1" 200 11715 "-" "facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)" "-" 
```

目前我已经禁用了 IPtables。php.ini 和大多数超时设置为 3600

nginx.conf 部分：

```
 location ~ \.php$ {
        root           /home/blabla/www;
       # fastcgi_pass   127.0.0.1:9000;
        try_files $uri =404;
        fastcgi_pass  unix:/var/run/php-fpm/php-fpm.sock;
        fastcgi_index  index.php;
       fastcgi_param  SCRIPT_FILENAME  /home/blabla/blabla/$fastcgi_script_name;
       # fastcgi_param  REQUEST_URI      $request_uri;
        #fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
        include        fastcgi_params;
            access_log  logs/access._php.log  main;
 fastcgi_send_timeout  5m;
 fastcgi_read_timeout 5m;
 fastcgi_connect_timeout 5m; } 
```

我已经使用 cloudflare 服务进行了测试，效果很好，但是当我只指向我的服务器时，它就停止了。它发生在我位于这台机器上的所有其他网站上，所以我猜它一定是网络服务器配置问题。我用centos x64

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:44:59.113

我遇到了同样的问题。

我的 nginx 日志表明正在提供 200 响应，并且浏览器中的请求显示 200 响应。Facebook 坚持认为这是一个 502 错误。

事实证明，“502”可能意味着“您的服务器返回 502”*或*“我在解析响应时遇到了困难”。

在我的例子中，我有一个不合规的 HTTP 标头（它包含一个问号），这导致 Facebook 拒绝响应无效。删除此标头解决了该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-17T11:50:57.087

Facebook 默认使用 ipv6 地址（如果可用）要解决此问题，您必须在 Ningx 配置文件中为每个虚拟主机（如果托管许多站点）启用 iPv6 以侦听端口 80 上的任何 IPv6 地址。这将解决 Facebook opengraph 的问题。

# java - 带有错误检查的构建器模式：可能/可取吗？

> ID：15590325
> 
> 赞同：1
> 
> 时间：2013-03-23T18:10:32.227
> 
> 标签：java, error-handling, builder

我正在使用 Builder 模式来更轻松地创建对象。但是，标准构建器模式示例不包括我的代码中需要的错误检查。例如，对象中的`accessibility`和`demandMean`数组`Simulator`应该具有相同的长度。代码的简要框架如下所示：

```
public class Simulator {
    double[] accessibility;
    double[] demandMean;

    // Constructor obmitted for brevity

    public static class Builder {
        private double[] _accessibility;
        private double[] _demandMean;

        public Builder accessibility(double[] accessibility) {
            _accessibility = accessiblity.clone();
            return this;
        }

        public Builder demandMean(double[] demandMean) {
            _demandMean = demandMean.clone();
            return this;
        }

        // build() method obmitted for brevity
    }
} 
```

又例如，在促销优化问题中，有多种促销载体（例如传单、展示）和促销模式，它们是一组促销载体（例如无、仅宣传单、仅展示、宣传单和展示）。当我创建 时`Problem`，我必须定义一组可用的车辆，并检查促销模式是否使用这些车辆的子集而不是其他一些不可用的车辆，以及促销模式是否相同（例如，没有两种“仅限传单”的促销模式）。代码的简要框架如下所示：

```
public class Problem {
    Set<Vehicle> vehicles;
    Set<PromoMode> promoModes;

    public static class Builder {
        Set<Vehicle> _vehicles;
        Set<PromoMode> _promoModes;
    }
}

public class PromoMode {
    Set<Vehicle> vehiclesUsed;
} 
```

我的问题如下：

1.  是否有解决这种情况的标准方法？
2.  调用方法时应该在构造函数中还是在构建器中进行错误检查`build()`？
3.  为什么这是“正确”的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T18:14:41.117

当您在创建对象时需要保留不变量时，如果任何参数违反不变量，则停止构造。这也是一种快速失败的方法。
当您有大量参数时，构建器模式有助于创建对象。
这并不意味着您不进行错误检查。只要参数违反对象不变量，
只需抛出适当的`RuntimeException`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-27T20:57:26.587

您应该使用构造函数，因为它更好地遵循单一责任原则。检查不变量不是 Builder 的责任。唯一真正的工作是收集构建对象所需的数据。
此外，如果您决定稍后将类更改为具有公共构造函数，则不必移动该代码。

您绝对不应该检查 setter 方法中的不变量。这有几个好处：
* 您只需要检查一次
* 在您的代码等情况下，您不能更早地检查您的不变量，因为您是在不同时间添加两个数组。您不知道您的用户将按什么顺序添加它们，因此您不知道应该使用哪种方法来运行检查。

除非您的构建器中的 setter 进行了一些密集的计算（这种情况很少发生 - 通常，如果需要某种计算，无论如何都应该在构造器中进行），“早期失败”并没有多大帮助，特别是因为像你这样的流利的构建器无论如何都只使用一行代码来构建对象，所以任何 try 块都会以任何方式包围整行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T18:16:00.453

“正确”的方法实际上取决于情况 - 如果构造不同大小的数组是无效的，我会说最好在构造中进行处理，越早捕获无效状态越好。

现在，例如，如果您可以更改数组并放入不同的数组 - 那么在调用它们时这样做可能会更好。

# android - Android 图库标签

> ID：15590329
> 
> 赞同：0
> 
> 时间：2013-03-23T18:10:41.223
> 
> 标签：android, pointers, bitmap, gallery

我目前创建了一个 Android 应用程序，它播放视频格式并将视频的每一帧分开并将其存储到可滚动的画廊视图中（不幸的是，由于声誉，我无法发布屏幕转储的图像......）。我想要一个标签或位图显示在某些所需的框架下。这将是可点击的，并允许用户从该帧播放视频。我真的不确定如何实施这一点。任何想法将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:15:12.127

我需要使用实现 Runnable 线程的表面视图。然后我可以在我选择的任何地方绘制位图

# matlab - 用另一个矩阵的值填充像素

> ID：15590330
> 
> 赞同：0
> 
> 时间：2013-03-23T18:10:41.507
> 
> 标签：matlab, matrix, pixels

假设您有两个矩阵，如下所示：

```
A = [1 0.2 1; 0.4 0.4 1; 1 0.6 1; 0.9 0.7 1];

B = [33 75 250; 6 34 98; 55 3 4; 153 66 30]; 
```

假设我们要创建一个`C`包含`B`where值的新矩阵`A=1`。

我认为`matlab`我们可以为此做以下事情：

`C = B(A==1);`

但是，我怎样才能用 的原始值填充其他单元格`A`，我认为在我们的例子中，我们只会得到一个向量，`B`其中包含对应值的元素`A=1`？而且，我希望`C`具有相同的尺寸，`B`但其原始值`A`不等于而**不是**`1`具有`0`值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:23:57.293

是的，你可以这样做：

```
C= A.*(A~=1)+B.*(A==1) 
```

这使：

```
C =

33.0000    0.2000  250.0000
0.4000    0.4000   98.0000
55.0000    0.6000    4.0000
0.9000    0.7000   30.0000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:28:49.497

`C`无论如何都必须初始化，所以让我们将其初始化`A`为`C = A;`. 然后，MATLAB 允许您像 in 一样对左侧进行索引，以将 in 中的`C(A==1) = B(A==1);`所有元素替换为 in 中的元素。所有其他元素将保持不变。`C``B``A == 1`

# sql - 如何检查数据库系统sql server中同一列中是否具有相同值的单元格？

> ID：15590338
> 
> 赞同：0
> 
> 时间：2013-03-23T18:11:02.823
> 
> 标签：sql, database

我很难知道两个或多个单元格是否具有相同的值。例如：列包含作者姓名，另一列包含居住城市..我想知道居住在同一城市的作者姓名..所以我想检查城市列以了解是否有相同的城市或不是，但我不知道语法.. :)

```
select authors.au_fname , authors.au_lname ,city -- to present the first & last name of author
from authors
Where -- I don't know the condition here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:20:11.217

```
select a1.au_fname , a1.au_lname, a2.au_fname , a2.au_lname, city    
from authors a1 inner join authors a2 on a1.id <> a2.id
where a1.city= a2.city 
```

**解释：**

必须比较两个作者的每个组合，因此该表在不同的主键上与自身连接（我假设`authors.id`）。最后，`where`只输出居住在同一城市的作者的状态，过滤掉不居住在同一城市的作者巴黎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:01:27.943

我想你只想按城市排序：

```
select authors.au_fname , authors.au_lname ,city -- to present the first & last name of author
from authors
order by city 
```

如果您只想选择拥有 2 个或更多作者的城市，那么这里有一种适用于任何数据库的方法：

```
select authors.au_fname , authors.au_lname ,city -- to present the first & last name of author
from authors
where city in (select city from authors group by city having count(*) >= 2)
order by city 
```

# c# - 阻止 Form1 直到 Form2 关闭 c#

> ID：15590351
> 
> 赞同：1
> 
> 时间：2013-03-23T18:12:12.590
> 
> 标签：c#, forms

在我的代码中，我从 form1 启动 form2 使用`.Show()`.

```
Form2 f2 = new Form2();
f2.show(); 
```

阻塞`form1`直到`form2`关闭，`form2`关闭时继续我的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T18:15:25.310

`.Show()`将显示您正在显示的新表单，但它将使您能够返回并使用主表单中的控件，并且`.ShowDialog()`除非关闭，否则您将无法访问主表单。

```
f2.ShowDialog(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T18:16:04.343

尝试使用

```
Form2 f2 = new Form2();
f2.showDialog(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-21T21:36:52.430

我测试了这种方式但没有奏效，但只有以下代码有效：

```
 private void button1_Click_1(object sender, EventArgs e)
    {
        Form2 frm = new Form2();
        this.Enabled = false;
        frm.Show();
        frm.FormClosing += new FormClosingEventHandler(frm_FormClosing);
        frm.Show();
    }

    private void frm_FormClosing(object sender, FormClosingEventArgs e)
    {
        this.Enabled = true;
    } 
```

# ios - 我的屏幕上正在模拟哪部 iPhone？

> ID：15590352
> 
> 赞同：0
> 
> 时间：2013-03-23T18:12:14.397
> 
> 标签：ios, xcode, ios5, ios6, ios-simulator

我是 iOS 开发新手，我不怎么使用 iPhone。我非常习惯 Android 如何处理模拟器等，但由于实际上只有两种 iPhone 物理尺寸（我知道我必须考虑视网膜，但那是像素而不是尺寸），我怎么知道显示的是哪一个在模拟器上？如果我在模拟器中使用 iPhone 4S，有没有办法使用 iPhone 5？最后，我可以同时运行两个模拟器吗（你可以使用 Android 一次运行多个模拟器）。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:14:31.353

您可以在以下位置更改/检查模拟设备

> 硬件->设备->iPhone

[截图图片](https://stackoverflow.com/a/15270925/1031955)（第一张）

**更新：**您可以一次运行多个模拟器。看[这里](https://stackoverflow.com/a/3717027/1031955)。不过我自己还没有尝试过。

# php - 选择带有内部连接的 id

> ID：15590353
> 
> 赞同：0
> 
> 时间：2013-03-23T18:12:18.317
> 
> 标签：php, mysql, sql, inner-join

我正在尝试构建一个用户配置文件，所以我从数据库中显示了她所有的喜欢。但我想看看拥有活动会话的用户是否喜欢某些用户个人资料。

所以，表名是loves，结构是：

```
photo_id (int)
nick     (varchar)
date     (timestamp) 
```

照片表结构：

```
photo_id (int)
path     (varchar)
title    (varchar)
category (varchar)
nick     (varchar)
date     (timestamp) 
```

这就是我准备进行查询的方式：

```
SELECT photos.photo_id
FROM photos
INNER JOIN loves ON loves.nick = 'userProfileName'
WHERE loves.nick =  'userWithActiveSession'
AND photos.photo_id = loves.photo_id
ORDER BY loves.photo_id DESC 
LIMIT 100 
```

此查询应返回具有活动会话的用户喜欢的所有照片 ID，以及来自请求的个人资料用户的喜欢照片。

**例子**

```
loves table:

nick         photo_id
userProfile  26  
userProfile  1000  
userProfile  27
userProfile  520
userSession  26  
userSession  680  
userSession  1000 
```

所以查询应该只返回两个 photos_id（1000 和 26），因为两个用户都喜欢同一个 photo_id。

有没有办法修改这段代码来做我想做的事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:19:02.467

您可以像这样在不加入的情况下获得 photo_id：

```
 SELECT   photo_id
  FROM     loves
  WHERE    photo_id in (select photo_id from loves where nick = "userProfile" )
  AND      photo_id in (select photo_id from loves where nick = "userSession" )
  GROUP BY photo_id
  ORDER BY loves.photo_id DESC 
  LIMIT    100 
```

[**在这里演示**](http://sqlfiddle.com/#!2/d4191/11)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T18:21:51.587

所以你想要所有属于 X​​ (photos.nick = X) 并且被 Y 喜欢的照片？

```
SELECT photos.photo_id FROM photos INNER JOIN loves
ON loves.photo_id = photos.photo_id 
WHERE loves.nick = Y AND photos.nick = X
ORDER BY photos.photo_id DESC LIMIT 100 
```

如果您想要 X 和 Y 都喜欢的照片，那么您需要将loves 加入到自身中，将表格的两个副本中的 photo_ids 相互匹配，并规定一个表格的昵称与 X 匹配，另一个与 Y 匹配。（见评论)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T18:17:33.657

那部分看起来很奇怪：

```
INNER JOIN loves ON loves.nick = 'userProfileName' 
```

不应该吗（假设照片表上有一个昵称字段）：

```
INNER JOIN loves ON loves.nick = photos.nick 
```

或者我在这里没有得到什么？

# css - Joomla 2.5 和 Jomsocial 集成。用户无法保存数据

> ID：15590355
> 
> 赞同：0
> 
> 时间：2013-03-23T18:12:41.787
> 
> 标签：css, joomla2.5, jomsocial

上周我一直在研究这个错误，尝试了很多事情，现在我想它可能只是我忽略的一些简单的事情。任何帮助将不胜感激！！

为 Joomla 2.5 安装了 Rocket Theme 火箭发射器，模板 = Radiance 为 Joomla 2.5 安装了 JomSocial 完整版安装了每个应用程序和每个与 JomSocial 组件一起压缩的 mod。成功遵循所有安装说明。

问题：大约一半的用户无法在前端保存配置文件更改。当他们访问 JomSocial 提供的任何链接以编辑其个人资料时，单击“保存”按钮后，弹出框中会出现错误消息，“您的“密码”和“验证密码”不匹配。”

我已将出现此错误的用户与未收到此消息的用户进行了比较，并且没有任何关联。注册日期无关紧要，模块无关紧要，第三方模块或插件无关紧要。

我已经检查了 JomSocial 中的全局设置和特定设置，例如“自定义配置文件”及其所有字段。

我已经完成了 JomSocial 配置中的每一个设置。我已经测试了每一个，我已经清除了缓存，使用测试用户登录前端并尝试保存配置文件，并且不断出现相同的消息。

作为最后的手段，我卸载了 JomSocial 及其所有插件和模组。重新安装 JomSocial 后，出现同样的错误。

我陷入僵局，无法理解我做错了什么！

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T09:13:50.417

我确切地知道问题是什么。尽管您的成员填写了帐户信息页面，但他们必须单击包含密码的帐户详细信息选项卡，并且在该页面上，他们必须输入密码才能保存其统计信息。这真的很烦人，但它是进行个人资料更改的唯一方法。我花了一点时间才弄清楚。密码验证应与正在进行的更改位于同一选项卡上。Jomsocial 需要纠正这一点。或者，您可以在单击保存按钮时在代码中验证密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-12T20:53:19.880

我刚刚遇到了这个问题，这很烦人，直到我弄清楚发生了什么以及如何防止它。您的浏览器正在存储您的密码并自动将其输入密码字段。Jomsocial 不需要密码来更改您的设置 - 您可以通过删除预先填写的密码并保存您的个人资料更改来测试这一点。要解决此问题，请删除为您的用户保存的密码（在 Firefox 中，它位于 Tools-Options-Security-Saved Passwords 中）。将来，当您的浏览器要求记住您的密码、不允许或作为更永久的解决方案时，请选择永不记住此站点密码的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T13:21:01.743

你可以检查一个建议。

重要的是，用户始终位于**your-domain.com/...**或**www.your-domain.com/...**

如果您的站点配置为可以从一个站点转到另一个站点，那么就会出现问题。从技术上讲，它们被认为是不同的域，并且当您在其中一个登录时设置的 cookie 不会对另一个很好。

如果您能够自己重现问题，请尝试登录 your-domain.com 并在浏览器中查看 URL，因为您从一个页面转到另一个页面并执行操作。从 www.your-domain.com 注销并重复

如果我们幸运的话，这将查明问题所在。

在这种情况下，最简单的解决方案是通过 .htaccess 将所有站点流量重定向到 www.your-domain.com（或相反）。[我在 .htaccess 中使用以下内容，您会在网上](http://bit.ly/15HfKYG)找到很多变体

```
RewriteEngine On  

RewriteCond %{http_host} ^your-domain\.com$  
RewriteCond %{http_host}   !^$
RewriteRule (.*) http://www.your-domain.com/$1 [R=301,L] 
```

即使这不能解决您的直接问题，出于 SEO 的原因，最好还是将每个人重定向到一个域。

祝你好运，希望这可能会有所帮助！

# ios - iOS 上的 UIView 动画 - 子视图未调整大小

> ID：15590356
> 
> 赞同：1
> 
> 时间：2013-03-23T18:12:52.210
> 
> 标签：ios, animation, uiview

我在动画 UIView 调整大小时遇到​​问题 - 它的子视图根本没有调整大小。当我在 Interface Builder 中调整它的大小（手动，通过鼠标）时，一切正常，但是当我尝试像这样对其进行动画处理时：

```
[UIView animateWithDuration:0.7f animations:^{
CGRect old = self.DescriptionView.frame;
old.size.height += 150;
self.DescriptionView.frame = old;
}]; 
```

只有 UIView 调整大小，但所有的子视图保持不变.. 我会很高兴任何帮助，提前谢谢！

马特乌斯·乌尔班

# search - 是否可以按字幕语言搜索 YouTube 视频？

> ID：15590359
> 
> 赞同：8
> 
> 时间：2013-03-23T18:13:06.053
> 
> 标签：search, video, youtube, youtube-api

没有办法直接在 YouTube 上完成，所以我想知道是否有办法通过 API 完成？在网站上，您可以只过滤带有字幕的视频，但如果您想搜索带有法语字幕的视频，则不能。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:44:49.210

似乎不可能：

> 字幕 字幕参数使您能够将搜索限制为具有或不具有字幕轨道的视频：要仅请求具有字幕的视频，请将字幕参数值设置为 true。例如，下面的 URL 将检索带有字幕且与搜索词“冲浪”相匹配的视频：
> 
> [https://gdata.youtube.com/feeds/api/videos?q=surfing&caption&v=2](https://gdata.youtube.com/feeds/api/videos?q=surfing&caption&v=2)注意：出于向后兼容的原因，如果您包含标题参数但未指定参数值。
> 
> 要仅请求没有字幕的视频，请将字幕参数值设置为 false。例如，下面的 URL 将检索没有字幕且与搜索词“冲浪”匹配的视频：
> 
> [https://gdata.youtube.com/feeds/api/videos?q=surfing&caption=false&v=2](https://gdata.youtube.com/feeds/api/videos?q=surfing&caption=false&v=2) 注意：如果您指定参数为 true 或 false 以外的任何值，API 将返回 HTTP 400 响应。

来源：[https ://developers.google.com/youtube/2.0/developers_guide_protocol#captionsp](https://developers.google.com/youtube/2.0/developers_guide_protocol#captionsp)

# crc - 使用 CRC 作为摘要来检测文件之间的重复项

> ID：15590360
> 
> 赞同：3
> 
> 时间：2013-03-23T18:13:07.500
> 
> 标签：crc, crc32, crc64

CRC 和类似计算（例如 Fletcher 和 Adler）的主要用途似乎是用于检测传输*错误*。因此，我看到的大多数研究似乎都解决了检测两个数据集之间小规模差异的概率问题。我的需求略有不同。

以下是对该问题的非常近似的描述。细节比这复杂得多，但下面的描述说明了我正在寻找的功能。这个小小的免责声明旨在避免诸如“当您可以更轻松地以我建议的其他方式解决问题时，您为什么要以这种方式解决问题？”之类的答案？- 由于无数与此问题或帖子无关的原因，我需要以这种方式解决我的问题，因此请不要发布此类答案。

我正在处理分布式网络上的数据集集合（大小~1MB）。对这些数据集执行计算，速度/性能至关重要。我想要一种机制来避免重新传输数据集。也就是说，我需要某种方法来为给定大小的每个数据集生成唯一标识符 (UID)。（然后，我将数据集大小和 UID 从一台机器传输到另一台机器，接收机器只需要根据 UID 在本地没有数据时请求传输数据。）

这类似于使用 CRC 检查文件*更改*和使用 CRC 作为摘要来检测文件之间的*重复*之间的区别。我没有看到任何关于后者使用的讨论。

我不关心篡改问题，即我不需要加密强度散列。

我目前正在使用序列化数据的简单 32 位 CRC，到目前为止，这对我很有帮助。但是，我想知道是否有人可以推荐哪种 32 位 CRC 算法（即哪个多项式？）最适合在这种情况下最小化冲突概率？

我的另一个问题有点微妙。在我当前的实现中，我忽略了我的数据集的结构，实际上只是对表示我的数据的序列化字符串进行 CRC。但是，由于各种原因，我想按如下方式更改我的 CRC 方法。假设我的顶级数据集是一些原始数据和一些从属数据集的集合。我目前的方案本质上是连接原始数据和所有从属数据集，然后是 CRC 的结果。*但是，大多数时候我已经有了从属数据集的 CRC，我宁愿通过将原始数据与从属数据集的CRC*连接起来，然后 CRC来构造我的顶级数据集的 UID这种结构。问题是，

用一种可以让我讨论我的想法的语言来表达，我将定义一些符号。调用我的顶级数据集`T`，假设它由原始数据集`R`和从属数据集组成`Si, i=1..n`。我可以这样写`T = (R, S1, S2, ..., Sn)`。如果`&`表示数据集的拼接，我原来的方案可以认为是：

```
UID_1(T) = CRC(R & S1 & S2 & ... & Sn) 
```

我的新方案可以被认为是

```
UID_2(T) = CRC(R & CRC(S1) & CRC(S2) & ... & CRC(Sn)) 
```

那么我的问题是：（1）如果`T`和`T'`非常*不同*，什么CRC算法最小化`prob( UID_1(T)=UID_1(T') )`，什么CRC算法最小化`prob( UID_2(T)=UID_2(T') )`，这两个概率如何比较？

我对此事的（天真和不知情的）想法是这样的。`T`假设和之间的差异`T'`仅在一个从属数据集中，WLOG 说`S1!=S1'`。如果发生这种情况`CRC(S1)=CRC(S1')`，那么显然我们将拥有`UID_2(T)=UID_2(T')`。另一方面，如果`CRC(S1)!=CRC(S1')`，则 和 之间`R & CRC(S1) & CRC(S2) & ... & CRC(Sn)`的`R & CRC(S1') & CRC(S2) & ... & CRC(Sn)`差异仅在 4 个字节上存在微小差异，因此 UID_2 检测差异的能力实际上与 CRC 检测传输错误的能力相同，即它仅检测错误的能力一些没有广泛分离的位。由于这是 CRC 的设计目的，我认为 UID_2 非常安全，只要我使用的 CRC 擅长检测传输错误。用我们的符号表示，

```
prob( UID_2(T)=UID_2(T') ) = prob(CRC(S1)=CRC(S1')) + (1-prob(CRC(S1)=CRC(S1'))) * probability of CRC not detecting error a few bits. 
```

让我们称 CRC 未检测到几位错误的`P`概率，以及它未检测到大型数据集上的大差异的概率`Q`。上式可以大致写成

```
prob( UID_2(T)=UID_2(T') ) ~ Q + (1-Q)*P 
```

现在我将更改我的 UID，如下所示。对于“基本”数据，即`T=(R)`R 只是双精度、整数、字符、布尔值等的数据集，请定义`UID_3(T)=(R)`. 然后对于`T`由下级数据集向量组成的数据集`T = (S1, S2, ..., Sn)`，定义

```
UID_3(T) = CRC(ID_3(S1) & ID_3(S2) & ... & ID_3(Sn)) 
```

假设一个特定的数据集`T`具有嵌套层次深的从属数据集`m`，那么，在某种模糊的意义上，我会认为

```
prob( UID_3(T)=UID_3(T') ) ~ 1 - (1-Q)(1-P)^m 
```

鉴于这些概率在任何情况下都很小，这可以近似为

```
 1 - (1-Q)(1-P)^m = Q + (1-Q)*P*m + (1-Q)*P*P*m*(m-1)/2 + ... ~ Q + m*P 
```

因此，如果我知道我的最大嵌套级别`m`，并且我知道`P`并且`Q`对于各种 CRC，我想要的是选择为我提供最小值的 CRC `Q + m*P`。如果我怀疑可能是这种情况，`P~Q`那么上面的内容就简化了。我对 UID_1 的错误概率是`P`. 我对 UID_3 的错误概率是`(m+1)P`，`m`我的最大嵌套（递归）级别在哪里。

这一切看起来合理吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T19:26:40.753

> 我想要一种机制来避免重新传输数据集。

[rsync](http://rsync.samba.org/)已经解决了这个问题，通常使用您概述的方法。

> 但是，我想知道是否有人可以推荐哪种 32 位 CRC 算法（即哪个多项式？）最适合在这种情况下最小化冲突概率？

精心挑选的 CRC 多项式之间不会有太大差异。速度对您来说可能更重要，在这种情况下，您可能想要使用硬件 CRC，例如`crc32`现代 Intel 处理器上的指令。那一个使用[CRC-32C (Castagnoli) polynomial](http://reveng.sourceforge.net/crc-catalogue/17plus.htm#crc.cat.crc-32c)。您可以通过在同一个循环中计算三个缓冲区上的 CRC，然后将它们组合起来，在单个内核上并行使用所有三个算术单元，从而实现非常快的速度。请参阅下面如何组合 CRC。

> 但是，大多数时候我已经有了从属数据集的CRC，我宁愿通过将原始数据与从属数据集的CRC连接来构造我的顶级数据集的UID，然后CRC这个构造.

或者您可以快速计算整个集合的 CRC，就好像您对整个事物进行了 CRC，但是使用已经计算的片段的 CRC。[`crc32_combine()`](http://zlib.net/manual.html#Checksum)在[zlib](http://zlib.net/)中查看。这比拿一堆 CRC 的 CRC 更好。通过组合，您可以保留 CRC 算法的所有数学优点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:18:26.337

马克·阿德勒的回答很成功。如果我脱掉程序员的帽子，戴上数学家的帽子，其中一些应该是显而易见的。他没有时间解释数学，所以我会在这里为有兴趣的人提供。

计算 CRC 的过程本质上是进行多项式除法的过程。多项式的系数为 mod 2，即每一项的系数为 0 或 1，因此 N 次多项式可以用 N 位数表示，每一位是一项的系数（以及执行多项式除法相当于进行一大堆 XOR 和移位操作）。当对数据块进行CRC校验时，我们将“数据”视为一个大多项式，即一长串位，每个位代表多项式中一项的系数。好吧，调用我们的数据块多项式 A。对于每个 CRC“版本”，都选择*了*CRC 的多项式，我们称之为 P。对于 32 位 CRC，P 是一个 32 次多项式，因此它有 33 个项和 33 个系数。因为顶部系数始终为 1，所以它是隐式的，我们可以用 32 位整数表示 32 次多项式。（计算上，这实际上是很方便的。）数据块A的CRC计算过程就是A除以P求余数的过程。也就是说，A总是可以写成

```
A = Q * P + R 
```

其中R是一个次数小于P次数的多项式，即R的次数小于等于31，所以可以用32位整数表示。R本质上是CRC。（小提示：通常在 A 前面加上 0xFFFFFFFF，但这在这里并不重要。）现在，如果我们连接两个数据块 A 和 B，则与两个数据块连接对应的“多项式”就是 A 的多项式，“移位向左”乘以 B 中的位数加上 B。换句话说，A&B 的多项式是 A*S+B，其中 S 是对应于 1 后跟 N 个零的多项式，其中 N 是B 中的位（即 S = x**N ）。那么，对于 A&B 的 CRC，我们能说些什么呢？假设我们知道 A=Q*P+R 和 B=Q'*P+R'，即 R 是 A 的 CRC，R' 是 B 的 CRC。假设我们也知道 S=q*P+r。然后

```
A * S + B = (Q*P+R)*(q*P+r) + (Q'*P+R')
          = Q*(q*P+r)*P + R*q*P + R*r + Q'*P + R'
          = (Q*S + R*q + Q') * P    + R*r + R' 
```

所以要求A*S+B除以P的余数，只需求R*r+R'除以P的余数即可。因此，计算两个数据流A和B的级联的CRC ，我们只需要知道数据流的单独CRC，即R和R'，以及尾随数据流B​​的长度N（因此我们可以计算r）。这也是 Marks 其他评论之一的内容：如果尾随数据流 B 的长度被限制为几个值，我们可以为这些长度中的每一个预先计算 r，从而使两个 CRC 的组合变得非常简单。（对于任意长度 N，计算 r 并不简单，但它比对整个 B 重新进行除法要快得多（log_2 N）。）

注意：以上不是CRC的精确阐述。正在发生一些变化。准确的说，如果L是0xFFFFFFFF表示的多项式，即L=x* *31+x* *30+...+x+1，而S_n是“左移n位”多项式，即S_n = x* *n，则N位多项式A的数据块的CRC，是(L * S_N + A)*S_32除以P时的余数，即(L&A)*S_32除以P时的余数，其中&为“连接”运算符。

另外，我认为我不同意 Marks 的其中一个评论，但如果我错了，他可以纠正我。如果我们已经知道 R 和 R'，则使用上述方法比较计算 A&B 的 CRC 的时间，与直接计算它相比，不取决于 len(A) 与 len(B) 的比率 - 到以“直截了当”的方式计算它，实际上不必在整个连接数据集上重新计算 CRC。使用我们上面的符号，只需要计算 R*S+B 的 CRC。也就是说，我们不是将 0xFFFFFFFF 预先添加到 B 并计算其 CRC，而是将 R 预先添加到 B 并计算其 CRC。因此，它比较了重新计算 B 的 CRC 的时间与计算 r 的时间（然后将 R*r+R' 除以 P，这在时间上可能是微不足道且无关紧要的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-20T03:16:45.473

Mark Adler 的[回答](https://stackoverflow.com/a/15591115/1852838)解决了技术问题，所以这不是我在这里要做的。在这里，我将指出 OP 问题中提出的同步算法中的一个主要潜在缺陷，并提出一个小的改进。

校验和和散列为某些数据提供了单一的签名值。但是，由于长度有限，如果数据较长，校验和/哈希的可能唯一值的数量总是小于原始数据的可能组合。例如，一个 4 字节的 CRC 只能采用 4 294 967 296 个唯一值，而即使是可能是数据的 5 字节值也可以采用 8 倍的值。这意味着对于任何比校验和本身更长的数据，总是存在一个或多个具有完全相同签名的字节组合。

当用于检查完整性时，假设是稍微不同的数据流导致相同签名的可能性很小，因此如果签名相同，我们可以假设数据**相同**。重要的是要注意，我们从一些数据开始`d`并验证给定一个校验和，`c`，使用校验和函数计算`f`，`f(d) == c`。

然而，在 OP 的算法中，不同的使用会引入一种微妙的、有害的置信度下降。在 OP 的算法中，服务器 A 将从原始数据开始`[d1A,d2A,d3A,d4A]`并生成一组校验和`[c1,c2,c3,c4]`（其中`dnA`是服务器 A 上的第 n 个数据项）。然后，服务器 B 将接收此校验和列表并检查它自己的校验和列表以确定是否缺少任何校验和。假设服务器 B 有列表`[c1,c2,c3,c5]`。然后应该发生的是它`d4`从服务器 A 请求并且同步在理想情况下正常工作。

如果我们回想一下冲突的可能性，并且它并不总是需要那么多数据来产生一个（例如`CRC("plumless") == CRC("buckeroo")`），那么我们很快就会意识到我们的方案提供的最好保证是服务器 B 肯定没有，`d4A`但它不能保证它有`[d1A,d2A,d3A]`。这是因为它是可能的，`f(d1A) = c1`即使`f(d1B) = c1`和`d1A`是`d1B`不同的，我们希望两台服务器都拥有两者。在这个方案中，任何一个服务器都无法知道两者的`d1A`存在`d1B`. 我们可以使用越来越多的抗冲突校验和和散列，但这种方案永远不能保证完全同步。这变得更重要，网络必须跟踪的文件数量越多。我建议使用像 SHA1 这样没有发现冲突的加密哈希。

一种可能的缓解这种风险的方法是引入冗余哈希。一种方法是使用完全不同的算法，因为虽然有可能`crc32(d1) == crc32(d2)`，但不太可能`adler32(d1) == adler32(d2)`同时发生。不过，本文建议您不会通过这种方式获得太多收益[。](https://crypto.stanford.edu/~xb/crypto06b/blackboxhash.pdf)要使用 OP 表示法，它也不太可能`crc32('a' & d1) == crc32('a' & d2)`同时 `crc32('b' & d1) == crc32('b' & d2)`为真，因此您可以“加盐”到不太容易发生碰撞的组合。但是，我认为您也可以只使用像 SHA512 这样的抗冲突哈希函数，它实际上可能不会对您的性能产​​生那么大的影响。

# powershell - 来自tortoisehg的powershell钩子中的hg命令

> ID：15590361
> 
> 赞同：2
> 
> 时间：2013-03-23T18:13:10.300
> 
> 标签：powershell, mercurial, tortoisehg, mercurial-hook

我创建了一个 powershell 脚本作为提交挂钩运行，以将用户名写入文件。我在 powershell 中用来提取用户名的命令是：

```
$repodir = "C:\Users\Administrator\Documents\Visual Studio 2012\Projects\testRepo"
cd $repodir
$hguser = hg --cwd $repodir tip | grep user 
```

其中 $repodir 是存储库的目录。当我从 powershell 命令行提交时，钩子会根据需要执行提取用户名。当我从 tortoisehg 工作台中提交时，钩子会执行（我可以在输出文件中看到更改）但 $hguser 中没有信息，其他 hg 命令也没有影响。从 tortoisehg 中执行 hg 是否需要特殊语法，它是否在正确的路径中执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T01:04:18.550

It appears to work for me.

**.hg/hgrc**

```
[hooks]
commit = powershell.exe -File "C:\users\andy\desktop\test\test.ps1" 
```

**test.ps1**

```
$repodir = "C:\Users\andy\Desktop\Test"
cd $repodir
$hguser = (hg tip) | ? {$_ -match '^user:\s+([\w\s]+\w)'} | % {$matches[1]}
$hguser | Out-File user.txt -Encoding ASCII 
```

user.txt is populated via TortoiseHg/hg.exe commit. Using TortoiseHg 2.7.

# c# - Environment.GetEnvironmentVariable 的 VS2012 等效项是什么？

> ID：15590363
> 
> 赞同：1
> 
> 时间：2013-03-23T18:13:29.333
> 
> 标签：c#, windows-runtime

我正在尝试获取临时目录并在其中存储一些变量。我发现获取临时目录的代码是

```
string temp = Environment.GetEnvironmentVariable("tmp"); 
```

但这给了我一个错误，

> System.Environment 不包含“GetEnvironmentVariable”的定义。

我也试过

```
string tempPath = System.IO.Path.GetTempPath(); 
```

如何访问 Visual Studio 2012 中的临时目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T18:29:10.230

对于`winrt`，您可以获得如下临时路径：

```
StorageFolder temp = Windows.Storage.ApplicationData.Current.TemporaryFolder; 
```

有关您可以访问的不同文件夹的更多详细信息 - [http://lunarfrog.com/blog/2012/05/21/winrt-folders-access/](http://lunarfrog.com/blog/2012/05/21/winrt-folders-access/)

# netbeans - Netbeans 中 underscore.js 模板的代码高亮显示

> ID：15590366
> 
> 赞同：7
> 
> 时间：2013-03-23T18:14:24.263
> 
> 标签：netbeans, underscore.js

我曾经将 underscore.js 模板保存在 .html 文件中，但 Netbeans 给出了语法错误。

是否有用于将 underscore.js 模板与 Netbeans 集成的插件？如果没有，是否有设置 Netbeans 以识别模板的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-23T18:07:11.763

There is no NetBeans plugin that supports underscore.js templating syntax. There is a way to make NetBeans recognize any custom language, and it is long and difficult. Outlined here: [http://wiki.netbeans.org/SyntaxColoringANTLR](http://wiki.netbeans.org/SyntaxColoringANTLR)

The solution I found, thanks to Thomas Davis from [http://backbonetutorials.com/](http://backbonetutorials.com/), is using Sublime text editor, which does recognize underscore.js templating syntax, more or less well.

# string - 八度保持等式中的字符串常数

> ID：15590375
> 
> 赞同：0
> 
> 时间：2013-03-23T18:15:06.260
> 
> 标签：string, octave, equation

在 Octave 中，我可以执行以下操作吗： answer = 'x' + 1

所以 Octave 打印出来： answer = x + 1

换句话说，我可以在评估方程时保留一些变量名作为变量名吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:46:03.143

刚刚发现这可以用 Symbolic Match 包来完成，比如 Symbolic 工具箱： http: [//math.digi2.jp/math/octave/forge/](http://math.digi2.jp/math/octave/forge/)

# java - LinkedList 中的 list.add(String) 对我来说不能正常工作

> ID：15590376
> 
> 赞同：0
> 
> 时间：2013-03-23T18:15:08.660
> 
> 标签：java, string, for-loop, linked-list

我想编写具有此功能的程序：用户将输入他有多少东西。他将输入这些东西，然后将其添加到列表中。我做了这个代码：

```
public class lists {
public static void main(String[] args){
    Scanner input = new Scanner(System.in);
    LinkedList<String> list= new LinkedList<String>();
    System.out.println("How many things you have?");
    int size=input.nextInt();
    LinkedList<String> list= new LinkedList<String>();
    System.out.println("Enter those things");
    for(int c=1;c<=size;c++) list.add(input.nextLine().toString());     
        System.out.printf("%s",list);

} 
```

}

例如，数字 5 的输出如下所示：

```
[, 1st Inputed, 2nd Inputed,3rd Inputed, 4nd inputed] 
```

我想知道为什么列表中的第一个字符串是空的，它让我可以输入更少的东西。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:19:43.463

你的代码应该是这样的：

```
 public class lists {
    public static void main(String[] args){
        Scanner input = new Scanner(System.in);
        System.out.println("How many things you have?");
        int size=input.nextInt();
        LinkedList<String> list= new LinkedList<String>();
        System.out.println("Enter those things");
        for(int c=0 ;c < size; c++)
        {
            String s = input.next();//use next() instead of nextLine()
            list.add(s);     
        }
            System.out.printf("%s",list);

       } 
    } 
```

[`Scanner.nextLine()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextLine%28%29)如官方文档所述是：

> **将此扫描器前进到当前行并返回被跳过的输入。**此方法返回当前行的其余部分，不包括末尾的任何行分隔符。位置设置为下一行的开头。

在`nextInt()`被调用之后，它没有正确终止分配的内存行。因此，当`nextLine()`第一次调用时，它实际上终止了实际上具有值的前一行——通过输入`nextInt()`而不是接收新`String`值。这就是为什么`String`at 索引`0`为`list`空白的原因。因此，为了继续读取输入的值而不是前一个空行（因为返回的值不终止`nextInt()`），您可以使用[`Scanner.next()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#next%28%29)which 根据官方文档指出：

> **从此扫描器中查找并返回下一个完整的令牌。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:19:58.627

问题是`input.nextInt()`不消耗尾随换行符，所以第一个`input.nextLine()`返回一个空字符串。

有几种方法可以解决这个问题。我会把它作为一个练习来弄清楚如何最好地做到这一点。

# javascript - 将函数返回的值打印到javascript中的屏幕

> ID：15590378
> 
> 赞同：4
> 
> 时间：2013-03-23T18:15:10.350
> 
> 标签：javascript, function

我编写了以下 JavaScript 函数：

```
<script type="text/javascript">
function showVariable(val){         
    if(typeof(val)!=null && typeof(val)!=false &&typeof(val)!=NaN && typeof(val)!=undefined)
        return typeof(val);
    else 
        return val;
}
function print(){
    var val = {1, 2, 3};
    var res = showVariable(val);
    alert(res);
}
</script> 
```

目前，我可以使用警报查看结果，但我想知道是否有另一种方法可以`showVariable`在我的 html 文档中打印结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T18:18:02.223

只需使用

```
function print(){
    var val = {1, 2, 3};
    var res = showVariable(val);
    document.getElementById("myDiv").innerHTML = res;

   //if the target is an input :
   document.getElementById("myDiv").val = res;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T18:21:46.823

其他人指出了如何将文本添加到现有的 HTML 元素。下面描述了几个其他选项。

**错误日志**

对于调试，一种`alert()`不那么干扰的替代方法是将文本添加到错误日志中。例如，在带有 Firebug 扩展的 Firefox 中：

```
if (console.log) console.log(res); 
```

**Document.write**

另一个可能不适用于这个特定问题但有时很有帮助的选项是使用`document.write`. 但是，请注意不要在页面加载后使用它，否则它将覆盖页面。

例如，以下内容：

```
<p>one</p>
<script type="text/javascript">document.write('<p>two</p>');</script>
<p>three</p>
<script type="text/javascript">document.write('<p>four</p>');</script> 
```

将在浏览器中显示，就好像静态 HTML 源代码是：

```
<p>one</p>
<p>two</p>
<p>three</p>
<p>four</p> 
```

* * *

**类型**

附带说明一下，typeof 运算符返回以下字符串值之一：

```
 'undefined'
    'null'          // For browsers that support ECMAScript 6+
    'boolean'
    'number'
    'string'
    'function'
    'object' 
```

最初的 if 语句可以重构如下：

```
Instead of this               Use this                     Or this
-------------------           -----------------            ------------
typeof(val) != null           val !== null
typeof(val) != false          val !== false
typeof(val) != NaN            typeof val == 'number'       !isNaN(val)
typeof(val) != undefined      typeof val != 'undefined' 
```

不确定您是否需要所有这些测试。这取决于你想要做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T18:17:31.693

您可以输出到元素：

HTML：

```
<div id="log"></div> 
```

JavaScript：

```
function print(value) {
    document.getElementById('log').innerHTML += value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T18:16:32.760

如果是元素，您可以将其设置为 .innerHTML 属性。像这样：

```
<div id="output"></div>

document.getElementById('output').innerHTML = val; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T18:33:42.670

你可以试试`document.write();`

```
function print(){
        var val = {1, 2, 3};
        var res = showVariable(val);
        document.write(res);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-11T22:51:20.587

大多数答案都是正确的。但对于初学者来说，这可能会让人感到困惑。让我把它们分成几个步骤：

问题：假设您想从文本框中收集值并将其打印到 HTML 正文中。

*   第 1 步：用 id 'result' （或任何东西）声明任何东西
*   第 2 步：从文本框中收集到变量中。
*   第 3 步：使用 innerHTML 打印它

```
<html>
<body>

Hi everyone

<p id="result"></p>
<textarea cols="40" id="SearchText" rows="1"></textarea>

</div>
<button onclick="myFunction()" type="button">Submit!</button>
</div>
<script>
function myFunction() {
    var result = document.getElementById("SearchText").value;
	document.getElementById("result").innerHTML = 'hello' + result;
}
</script>

</div>

</body>
<html>
```

# mysql - 在 MySQL 中使用非标准日期时间格式

> ID：15590385
> 
> 赞同：0
> 
> 时间：2013-03-23T18:15:43.490
> 
> 标签：mysql, datetime

我有一个用数据自动填充 mysql 数据库的系统。不幸的是，唯一的时间值是以 YYYYMMDDHHMMSS.SSS 格式存储的。有一个脚本在 30 分钟内针对数据库中的数据运行，以提醒某些数据趋势。我遇到的问题是数据库中的数据可以追溯到 7 天。我只希望脚本针对过去 30 分钟的数据运行。

我尝试使用类似的东西：

```
SELECT foo FROM table WHERE StartTime >= DATE_SUB(NOW(), INTERVAL 30 MINUTES); 
```

不幸的是，这不起作用，我假设是因为存储的时间格式与标准的 SQL 时间戳格式不匹配。

任何人都可以建议另一种方法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:21:59.377

`StartTime >= DATE_FORMAT(DATE_SUB(NOW(), INTERVAL 30 MINUTE),'%Y%m%d%H%i%s.000')`

# vbscript - 在 QTP 11 中，如何用一个 JavaButton 测试多个按钮？

> ID：15590395
> 
> 赞同：1
> 
> 时间：2013-03-23T18:16:32.720
> 
> 标签：vbscript, qtp

我想测试我的“框图”的按钮是一个 java 应用程序，我在我的对象存储库中添加了一个 JavaButton，我想测试按钮的存在情况以及它们是否默认未启用。我在 JavaButton“标签和附加文本”的属性中，我使用了正则表达式，但我无法测试所有按钮（I2C1、I2C2 等）。就像在快照中只有一个 JavaButton 一样。

我想测试所有按钮：JavaWindow（“Untitled MicroXplorer *”）。JavaButton ("I2C1").exist(1) JavaWindow ("Untitled MicroXplorer *")。JavaButton ("I2C2").exist(1)

但我不想在我的对象存储库中添加所有 JavaButton，我只想要一个带有正则表达式的 JavaButton 进行测试。先感谢您。

[快照块图点击这里](http://www.imagup.com/npic/1178728331.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:14:43.707

您不应该`JavaButton`为此使用任何对象，而是`ChildObjects`要获取与您的描述相匹配的所有对象

```
Set Desc = Description.Create()
Desc("micclass").Value = "JavaButton"
Desc("label").Value = "I2C\d+" ' I'm not sure if label is the correct property...
Set Buttons = JavaWindow.ChildObjects(Desc)
For i = 0 To Buttons.Count - 1
    Buttons(i)._Whatever_
Next 
```

您*可以*在对象存储库中使用单个`JavaButton`，然后`SetTOProperty`在`index`属性上执行，但这种`ChildObjects`方法更自然。

# laravel - Laravel 多对多 - 3 个模型

> ID：15590397
> 
> 赞同：1
> 
> 时间：2013-03-23T18:16:53.220
> 
> 标签：laravel

对 Laravel 中的多对多关系有一些帮助：

使用角色和用户的示例 - 基本上：

*   所有角色的表格
*   用户表
*   以及带有 user_id 和 role_id 的表。

我想添加到第三个表中，例如 Year。基本上，数据透视表将具有 user_id、role_id 和 year_id。

我希望能够进行查询以提取例如在特定年份分配特定角色的所有用户。例如，所有 role_id = 2 且 year_id = 1 的用户。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:28:44.377

在回答之前，我想建议你不要像这样将年份放在数据库中。你所有的桌子都应该有`created_at`，`updated_at`而且应该足够了。

过滤您想要的用户。你可以这样做：

```
// This queries all users that were assigned to 'admin' role within 2013.
User::join('role_users', 'role_users.user_id', '=', 'users.id')
    ->join('roles', 'roles.id', '=', 'role_users.role_id')
    ->where('roles.name', '=', 'admin')
    ->where(DB::raw('YEAR(role_users.created_at)', '=', '2013')
    ->get(); 
```

此示例可能不是您要查找的精确查询，但应该足以让您想出它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T06:23:53.220

使用 Eloquent 实现三向关系的最佳方法是为表示该关系的表创建一个模型。数据透视表旨在用于双向关系。

然后，您可以拥有一个名为的表，该表`roles_users_year`可以包含与这种 3 向关系相关的数据，例如时间戳或其他任何东西......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-13T02:51:41.427

一个非常老的问题的一个非常晚的答案，但是从[文档](https://laravel.com/docs/5.1/eloquent-relationships#many-to-many)来看，Laravel 支持至少 Laravel 5.1 的附加中间（数据透视）表列，至少在 Laravel 6.x 中没有改变。

在定义多对多关系时，您可以描述这些额外的列：

```
return $this->belongsToMany(Role::class)->withPivot('column1', 'column2'); 
```

或者在您的情况下，以下内容也可以完成这项工作：

```
return $this->belongsToMany(Role::class)->withTimestamps(); 
```

然后您可以通过`pivot`模型上的属性访问它：

```
$user = User::find(1);

foreach ($user->roles as $role) {
    echo $role->pivot->created_at;
} 
```

请注意，pivot 属性位于远程关系*模型*（单个`Role`）上，而不是关系本身。

要获取任何给定年份中`Role`分配给`User`s 的所有 s，您可以创建一个特殊的关系：

```
// User.php

public function rolesInYear($year) {
    return $this->belongsToMany(Role::class)
        ->wherePivot('created_at', '>=', Carbon::create($year))
        ->wherePivot('created_at', '<', Carbon::create($year + 1));
} 
```

# javascript - 如何在谷歌自动完成地图搜索中处理 TypeError: place.address_components[2]？

> ID：15590401
> 
> 赞同：0
> 
> 时间：2013-03-23T18:17:26.787
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-api-2

我正在开发一个带有自动完成选项的谷歌地图应用程序。我`place.address_components[2].short_name`用来获取状态。它适用于某些城市，但不适用于所有城市。就像亚利桑那州一样，它给出了`TypeError: place.address_components[2] is undefined` 如何处理这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:20:29.440

检查它是否已定义：

```
if (place.address_components[2] !== undefined) { // if this is true, it is defined.

} 
```

或者，如果您认为有必要，您可以使用 try/catch。如果可以，请尽量避免使用 try/catch。

如果 address_components[2] 未定义，我不确定这对谷歌地图意味着什么，您应该尝试记录 address_components 以查看亚利桑那州的地址与其他结果的含义。

必须有一种方法来获取状态.. 玩弄你的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:54:12.650

```
 if (typeof  place.address_components[2] != 'undefined') {
             var state = place.address_components[2].short_name.toLowerCase();
    } else {
            // do something else;
    } 
```

上面的代码解决了我的问题。感谢@Spencer Lockhart 的回答。

# google-app-engine - GAE: raise ValueError('must be "yes" or "no", not %r' % values)

> ID：15590402
> 
> 赞同：1
> 
> 时间：2013-03-23T18:17:27.103
> 
> 标签：google-app-engine

我桌面上的一个弹出窗口最近提出要更新 GoogleAppEngineLauncher，我同意了。

然后，我在 PyCharm 中的 Python 应用程序在“google”中显示“无法识别的引用”`from google.appengine.api import users`或对“google.appengine.api”的任何其他引用。

所以我启动了 GoogleAppEngineLauncher 并点击了一些东西，它看起来像是解压缩了。这使得 PyCharm 引用错误消失了。

然后，当我尝试使用旧配置启动我的应用程序时，“附加选项”出现问题。显然它不再识别“-p 8081”或“-c”。所以我将它们更改为“--port 8081”和“--clear_datastore”。现在它以以下堆栈跟踪终止：

```
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/dev_appserver.py", line 194, in <module>
    _run_file(__file__, globals())
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/dev_appserver.py", line 190, in _run_file
    execfile(script_path, globals_)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/devappserver2/devappserver2.py", line 545, in <module>
    main()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/devappserver2/devappserver2.py", line 535, in main
    options = PARSER.parse_args()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/argparse.py", line 1688, in parse_args
    args, argv = self.parse_known_args(args, namespace)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/argparse.py", line 1720, in parse_known_args
    namespace, args = self._parse_known_args(args, namespace)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/argparse.py", line 1926, in _parse_known_args
    start_index = consume_optional(start_index)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/argparse.py", line 1866, in consume_optional
    take_action(action, args, option_string)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/argparse.py", line 1794, in take_action
    action(self, namespace, argument_values, option_string)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/boolean_action.py", line 67, in __call__
    raise ValueError('must be "yes" or "no", not %r' % values)
ValueError: must be "yes" or "no", not '.' 
```

我尝试在 GoogleAppEngineLauncher 中运行“helloworld”，并在 LogConsole 中得到以下信息：

```
*** Running dev_appserver with the following flags:
    --skip_sdk_update_check=yes --port=8081 --admin_port=8000 --clear_datastore
Python command: /usr/bin/python2.7
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/dev_appserver.py", line 194, in <module>
    _run_file(__file__, globals())
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/dev_appserver.py", line 190, in _run_file
    execfile(script_path, globals_)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/devappserver2/devappserver2.py", line 545, in <module>
    main()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/devappserver2/devappserver2.py", line 535, in main
    options = PARSER.parse_args()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/argparse.py", line 1678, in parse_args
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/argparse.py", line 1710, in parse_known_args
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/argparse.py", line 1916, in _parse_known_args
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/argparse.py", line 1856, in consume_optional
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/argparse.py", line 1784, in take_action
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/boolean_action.py", line 67, in __call__
    raise ValueError('must be "yes" or "no", not %r' % values)
ValueError: must be "yes" or "no", not '/Users/lindsay/Projects/PyCharm/Zephyr/gae-tutorial/helloworld' 
```

这似乎与在 PyCharm 中运行我的应用程序时出现的错误或多或少相同。

我在这个项目上承受着巨大的时间压力，这完全阻碍了我。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T18:41:22.100

此问题的解决方案是必须将配置选项`-c`更改为`--clear_datastore=yes`.

现在我遇到另一个错误“InvalidCertificateException”。我会单独调查，如果我无法解决，我会发布一个单独的问题。

# php - 如何访问 POST 数据，然后在 CakePHP 中将其删除？

> ID：15590406
> 
> 赞同：2
> 
> 时间：2013-03-23T18:17:37.313
> 
> 标签：php, android, cakephp, post, request

我正在构建一个连接到我的远程服务器的 Android 应用程序。我允许用户添加新内容，但在允许添加之前还必须对其进行身份验证。这是他们添加的示例：

```
List<NameValuePair> params = new ArrayList<NameValuePair>();
params.add(new BasicNameValuePair(SharedVariables.TAG_NAME, name));
params.add(new BasicNameValuePair(SharedVariables.TAG_ADDRESS, address));
params.add(new BasicNameValuePair(SharedVariables.TAG_TYPE, type));
params.add(new BasicNameValuePair(SharedVariables.TAG_DESCRIPTION, description));
params.add(new BasicNameValuePair(SharedVariables.TAG_DIFFICULTY, difficulty));
params.add(new BasicNameValuePair(SharedVariables.TAG_TERRAIN, terrain));
params.add(new BasicNameValuePair(SharedVariables.TAG_LONG, Double.toString(currentLng)));
params.add(new BasicNameValuePair(SharedVariables.TAG_LAT, Double.toString(currentLat)));
params.add(new BasicNameValuePair(SharedVariables.TAG_UID, Integer.toString(2)));

//Retrieve hash and id to identify authenticate user
UserAuth auth = new UserAuth(AddSpot.this);
HashMap<String,String> session = auth.getUserDetails();
params.add(new BasicNameValuePair(SharedVariables.TAG_UID, session.get("id")));
params.add(new BasicNameValuePair(SharedVariables.TAG_HASH, session.get("hash"))); 
```

如您所见，在第一部分中，我存储了用户自己添加的内容，但是，然后我还将用户 ID 和令牌/哈希传递到 POST 数据中，如上一部分所示。我的问题是，我不想将所有内容添加到数据库表中`$this->Location->save($this->request->data)`。相反，我希望能够挑选出用户 ID 和哈希并将其删除，然后将其保存到所有其他内容中。我怎样才能在 CakePHP 中做到这一点？

这是我现在在 CakePHP 中的方法：

```
function add()
{               
    if ($this->request->is('post'))
    {
        $response = array();
        $this->loadModel('User');
        if($this->User->validateHash($id, $hash))
        {   
            //Do some logic to remove id and hash from request

            $this->Location->create();
            //Save data from POST
            if ($this->Location->save($this->request->data))
            {
                //Successfully saved
                $this->response->statusCode(200);
            } 
            else
            {
                //Error in saving
                $this->response->statusCode(500);
            }
        }
        else 
        {
            //Does their hash match? No, then they are unauthorized to add
            $this->response->statusCode(401);
        }
    }
    $this->set(compact('response'));
    $this->set('_serialize', array('response'));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T18:46:40.133

这个？：

```
unset($this->request->data['YourModel']['id']);
unset($this->request->data['YourModel']['hash']); 
```

# http - 背景图像：继承和 HTTP 请求

> ID：15590413
> 
> 赞同：0
> 
> 时间：2013-03-23T18:18:50.277
> 
> 标签：http, request

我试图在stackoverflow上找到答案，但找不到它，所以我希望有人能帮助我。

我想这个问题很简单，我试图用图像精灵而不是许多图像来优化我的网站。我想知道一个背景：继承是否算作 HTTP 请求？

在想否则我可以让我的 DIV 只继承第一个 DIV 背景图像并为我节省很多请求。

两个 img 链接是否也将相同的图像精灵算作一个或两个 HTTP 请求？我的意思是浏览器知道它已经下载了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:24:53.227

假设您缓存图像，两个（或一千个）图像链接只会发出一个 HTTP 请求，只要图像本身没有改变，尽管它实际上与**浏览器**实现有关。使用继承甚至在不同的 CSS 元素中使用相同的资源也是如此。如果您使用的是 Chrome，我建议您查看开发人员工具中的网络选项卡并确认确实如此。否则，您可以尝试使用[Fiddler](http://www.fiddler2.com/fiddler2/)。

如果您要共享链接，我将非常乐意亲自查看。

# search - 没有索引时，Sphinx 搜索崩溃

> ID：15590417
> 
> 赞同：1
> 
> 时间：2013-03-23T18:19:17.543
> 
> 标签：search, sphinx

我想要一个 sphinx searchd 启动，但还没有填充索引。我有一个单独的 cron 作业，它从数据源中提取数据，然后调用索引器来生成索引。

所以第一次 searchd 启动 cron 作业还没有运行，因此没有索引。并且 searchd 失败并出现以下错误：

致命：没有有效的索引可供服务

有没有办法解决这个问题？例如，即使在没有索引的情况下也启动 archd，如果在此期间有人搜索它，它只会返回没有 docid。稍后当 cron 作业运行时，索引将被填充，然后搜索可以查询这些索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:47:18.313

> *如果在那段时间有人搜索它，它不会返回任何文档。*

这将需要一个实际的索引来再次搜索。

只需创建一个空索引。然后当索引器运行时，它会重新创建索引（这次是数据）并通知 searchd - 使用 --rotate 开关。

@ctx 提供的生成“空”索引的方法示例：（2014 年 12 月添加）

> ```
> source force {
>   type = xmlpipe2
>   xmlpipe_command = cat /tmp/test.xml
> }
> index force {
>   source = force
>   path = /path/to/sphinx/datadir/filename
>   charset_type=utf-8
> } 
> ```
> 
> `/tmp/test.xml`：
> 
> ```
> <?xml version="1.0" encoding="utf-8"?>
> <sphinx:docset>
> 
> <sphinx:schema>
> <sphinx:field name="subject"/>
> </sphinx:schema>
> 
> </sphinx:docset> 
> ```
> 
> `indexer force`现在 searchd 应该可以运行了。

Alternativly 可以使用类似的东西，`sql_query = SELECT 1,''`但这确实需要连接到真实的数据库服务器。

# java - 刷新 JPanel 时的错误

> ID：15590418
> 
> 赞同：0
> 
> 时间：2013-03-23T18:19:20.713
> 
> 标签：java, swing, url, jpanel, bufferedimage

我有一个从 URL 读取数据的程序，使其成为 BufferedImage 并将其绘制在 JPanel 上。但是非常奇怪的错误，例如图像切换等。这是我的代码：

```
package paraguay.cameras;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridLayout;
import java.awt.Toolkit;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.awt.image.BufferedImage;
import java.net.URL;
import java.util.Timer;
import java.util.TimerTask;

import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.UIManager;

public class Paraguay_Cameras {

    public static URL url1 = null;
    public static URL url2 = null;
    public static URL url3 = null;
    public static URL url4 = null;
    public static BufferedImage img1 = null;
    public static BufferedImage img2 = null;
    public static BufferedImage img3 = null;
    public static BufferedImage img4 = null;
    public static JPanel cam1 = null;
    public static JPanel cam2 = null;
    public static JPanel cam3 = null;
    public static JPanel cam4 = null;

    public static void main(String[] args) {

        // UI

        setLookAndFeelofNimbus();

        // DIMESIONS

        final Dimension screen_size = Toolkit.getDefaultToolkit()
                .getScreenSize();
        final int width = (int) screen_size.getWidth();
        final int height = (int) screen_size.getHeight();
        final Dimension sqr = new Dimension(width / 4, height / 4);

        // TIMERS

        Timer t = new Timer();
        TimerTask reload = new TimerTask() {
            @Override
            public void run() {
                try {

                    url1 = new URL(
                            "http://camaras.ultimahora.com/Camara/Centro.jpg?rand=12645");
                    url2 = new URL(
                            "http://camaras.ultimahora.com/Camara/tembetary.jpg?rand=6314");
                    url3 = new URL(
                            "http://camaras.ultimahora.com/Camara/recoleta.jpg?rand=15474");
                    url4 = new URL(
                            "http://camaras.ultimahora.com/Camara/elportal.jpg?rand=2599");

                } catch (Exception exc) {

                    JOptionPane
                            .showMessageDialog(
                                    null,
                                    "Oh no! Looks like we can't connect to the internet!\nPlease try again...",
                                    "", JOptionPane.ERROR_MESSAGE);
                    System.exit(0);

                }

                try {

                    img1 = ImageIO.read(url1);

                } catch (Exception exc) {

                    JOptionPane
                            .showMessageDialog(
                                    null,
                                    "Uh, oh! Looks like we  can't get the image in panel 1!\nSolution: Check your internet connection",
                                    "", JOptionPane.ERROR_MESSAGE);

                }

                try {

                    img2 = ImageIO.read(url2);

                } catch (Exception exc) {

                    JOptionPane
                            .showMessageDialog(
                                    null,
                                    "Uh, oh! Looks like we  can't get the image in panel 2!\nSolution: Check your internet connection",
                                    "", JOptionPane.ERROR_MESSAGE);

                }

                try {

                    img3 = ImageIO.read(url3);

                } catch (Exception exc) {

                    JOptionPane
                            .showMessageDialog(
                                    null,
                                    "Uh, oh! Looks like we  can't get the image in panel 3!\nSolution: Check your internet connection",
                                    "", JOptionPane.ERROR_MESSAGE);

                }

                try {

                    img4 = ImageIO.read(url4);

                } catch (Exception exc) {

                    JOptionPane
                            .showMessageDialog(
                                    null,
                                    "Uh, oh! Looks like we  can't get the image in panel 4!\nSolution: Check your internet connection",
                                    "", JOptionPane.ERROR_MESSAGE);

                }

            }
        };

        // JPANELS

        cam1 = new JPanel() {
            public void paintComponent(Graphics g) {

                Graphics2D g2 = (Graphics2D) g;

                g2.drawImage(img1, 0, 0, null);

            }
        };
        cam1.setPreferredSize(sqr);
        cam2 = new JPanel() {
            public void paintComponent(Graphics g) {

                Graphics2D g2 = (Graphics2D) g;

                g2.drawImage(img2, 0, 0, null);

            }
        };
        cam2.setPreferredSize(sqr);
        cam3 = new JPanel() {
            public void paintComponent(Graphics g) {

                Graphics2D g2 = (Graphics2D) g;

                g2.drawImage(img3, 0, 0, null);

            }
        };
        cam3.setPreferredSize(sqr);
        cam4 = new JPanel() {
            public void paintComponent(Graphics g) {

                Graphics2D g2 = (Graphics2D) g;

                g2.drawImage(img4, 0, 0, null);

            }
        };
        cam4.setPreferredSize(sqr);

        JPanel main = new JPanel(new GridLayout(2, 2));
        main.add(cam1);
        main.add(cam2);
        main.add(cam3);
        main.add(cam4);
        main.setBackground(Color.WHITE);

        // JFRAME

        JFrame window = new JFrame("Paraguay Cameras");
        window.setSize(width, height);
        window.add(main);
        window.setVisible(true);
        window.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        window.setLocationRelativeTo(null);
        window.setResizable(true);
        window.setAlwaysOnTop(true);
        window.setEnabled(true);

        window.addWindowListener(new WindowAdapter() {
            @Override
            public void windowClosing(WindowEvent we) {

                System.exit(0);

            }
        });

        t.schedule(reload, 0, 4000);
        cam1.repaint();
        cam2.repaint();
        cam3.repaint();
        cam4.repaint();

    }

    public static void setLookAndFeelofNimbus() {

        try {

            UIManager
                    .setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");

        } catch (Exception exc) {

            JOptionPane
                        .showMessageDialog(
                                null,
                                "Oops! Looks like we can't use the UI (User Interface) of Nimbus...",
                            "", JOptionPane.ERROR_MESSAGE);

            }

            }
    } 
```

谁能帮我修复我的错误？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:29:40.883

加载图像后，您永远不会重新绘制面板。坦率地说，在当前的代码中很难做到这一点。重构代码，以便您可以`main.repaint();`在重新加载图像后调用以刷新面板。另外，不要忘记`super.paintComponents(g);`在您的`paintComponent()`实现中调用。

还有一点，对于 Swing，最好使用[javax.swing.Timer](http://docs.oracle.com/javase/6/docs/api/javax/swing/Timer.html)。有关更多详细信息，请参阅[如何使用摆动计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)。

另请注意，`setPreferredSize()`在这种情况下调用将没有任何效果，因为您正在使用`GridLayout`. 一般来说，`setPreferredSize()`应该尽量避免，请参阅[是否应该避免在 Java Swing 中使用 set[Preferred|Maximum|Minimum]Size 方法？](https://stackoverflow.com/q/7229226/1048330)

# html - 按钮中间的文本 - 无法居中

> ID：15590423
> 
> 赞同：0
> 
> 时间：2013-03-23T18:20:02.280
> 
> 标签：html, css, text-align

[http://jsfiddle.net/8zkqu/1/](http://jsfiddle.net/8zkqu/1/)

```
 <div id="button" class="g">
                <p>Discover me!</p>
            </div> <!-- id button class g --> 
```

.css 文件看起来像这样

```
#button{

    z-index: 1;
    font-size: 20px;
    border-radius: 5px;
    width: 130px;
    height: 40px;
    position: absolute;
    top:20px;
    right: 20px;
    font-weight:  bold;
    text-align: center;
}
.g {
    background-color: rgb(94,179,74);
    color: white;
    border: 3px solid green;
    position: absolute;

} 
```

它开始烦人了！如何在buttonN中居中文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T18:26:55.397

我假设您正在寻找[垂直对齐](https://developer.mozilla.org/en-US/docs/CSS/vertical-align)元素？

尝试`display:table-cell`

**HTML**

```
<div id="button" class="g">
    <span>Discover me!</span>
</div> <!-- id button class g --> 
```

**CSS**

```
#button{
    z-index: 1;
    font-size: 20px;
    border-radius: 5px;
    width: 130px;
    height: 40px;
    display:table-cell;
    vertical-align:middle;
    font-weight:  bold;
    text-align: center;
}

.g {
    background-color: rgb(94,179,74);
    color: white;
    border: 3px solid green;
} 
```

[JSF](http://jsfiddle.net/8zkqu/2/)中。

`Text-aling:center`将元素*水平*和`vertical-align:middle` *垂直*居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:27:46.007

对 CSS 的此更新应该可以解决问题：

```
.g p {
    margin: 0;
    line-height: 40px;
} 
```

[工作示例](http://jsfiddle.net/BLQWb/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T18:28:14.227

将此添加到您的CSS：

```
#button p{    
margin: 0px;
line-height: 40px;
} 
```

`<p>`默认情况下向元素添加边距，上面的代码将其删除。并且 line-height 使按钮中的文本居中，为了在将来实现这一点，请将 line-height 设置为等于按钮高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T18:28:34.767

另一种选择：将其添加到您的 CSS 中：

```
#button p{
     line-height:0px;
} 
```

# javascript - 带有 init 方法的简单 node.js 模块

> ID：15590427
> 
> 赞同：0
> 
> 时间：2013-03-23T18:20:29.410
> 
> 标签：javascript, node.js

我正在尝试使用 init 方法为 node.js 整理一个很好的简单模式，以便在连接到 mongodb 集合时使用“模型”。基本上，每个集合都有一个“模型”。

这就是我所拥有的，设置为单例，有什么理由不使用这种方法，或者在节点的上下文中是否有更多推荐的方法？

```
module.exports = User;

function User () {

  if ( arguments.callee.instance ) {
    return arguments.callee.instance;
  } else {
    arguments.callee.instance = this;
  }

  //Init our database collection

}

User.findOne = function (user_id) {

}

User.addUser = function () {

}

return new User(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:34:32.613

嗯，你应该把User.prototype.method。

```
User.prototype.findOne = function (user_id) {

}

User.prototype.addUser = function () {

} 
```

您可能的意思不是“返回新用户（）”，

```
module.exports = new User(); 
```

*不*导出 'new' User() 的一个原因是如果你想在你的 nodejs 程序中创建多个用户。如果您只有一个用户，那么单例就可以了。此外，如果您想将数据传递给此模块，您可能希望通过构造函数参数来执行此操作，并且如果您只在模块中构造用户，那么您无法将数据传递给应用程序中的构造函数。

我使用将 module.exports 分配给函数的模式。我所有导出的第一个参数是所有导出之间共享的对象，因此它们可以添加事件/侦听器并以各种不同的方式相互交谈。

例如（'events' 和 'app' 是伪的，不基于任何真实的 API），

```
function doLogin(app) {
    return function (e) {
        // some code to do login
    }
}
module.exports = function login (app) {
    app.events.on('login', doLogin(app));
} 
```

现在所有其他模块都可以通过以下方式触发登录

```
app.events.login({'user': '..','pass': '..'}); 
```

# mysql - 调用方法时抛出 SQL 异常，否则工作正常

> ID：15590437
> 
> 赞同：0
> 
> 时间：2013-03-23T18:21:51.003
> 
> 标签：mysql, jsp, netbeans

我正在 Netbeans IDE 中使用 JSP 制作一个 Web 应用程序项目。我有一个名为 Login 的 java 类，它有一个名为 authenticate 的静态方法。当我运行这个文件时，它给了我所需的输出。现在我有一个名为 auth.jsp 的网页，它调用方法 authenticate 但是当我尝试运行此网页时，该方法返回的值是“错误”，即该方法正在抛出 sql 异常。有人可以告诉为什么会这样吗？提前致谢。

```
 package server;
 import java.sql.*;

 public class Login {

 public static void  main(String args[]) {

     System.out.print(authenticate("260","abc"));

    }
    public static String authenticate(String username, String password) { 

         String auth="",pass="";
         int blocked_status=0;
         String url = "jdbc:mysql://localhost:3306/radio";

         try{
         Connection conn = DriverManager.getConnection(url,"root","rishabh");
         Statement stmt = conn.createStatement();

         String sql = "select password,blocked from user where username = \"" + username + "\""; 

         ResultSet rs =  stmt.executeQuery(sql);

                 int flag=0; 

                 while(rs.next()){
                   pass = rs.getString("password");
                   blocked_status = rs.getInt("blocked"); 
                   flag++;
                  }

                if(flag>0) {

                     if(blocked_status==1)
                         auth = "blocked";
                     else if(pass.equals(password))
                         auth = "authenticated";
                     else if(pass.equalsIgnoreCase(pass))
                         auth = "wrong_case";
                     else
                         auth = "wrong_password";

                    }
                else{
                    auth = "incorrect_username";
                }

         } catch(SQLException e){
             auth = "sqlerror";
             System.out.print(" ERROR " );
         }
         return auth;   
} 
```

}

# c# - WPF 气球注释围绕焦点调整

> ID：15590440
> 
> 赞同：0
> 
> 时间：2013-03-23T18:21:57.257
> 
> 标签：c#, wpf, wpf-controls

我想做的是有一个气球音符，当移动音符的茎时会调整。把它想象成一本漫画书。您在上方和下方都有气球注释。茎发生变化。我希望它在移动或调整笔记大小时是动态的。我不是要一个完整的解决方案，而是要学习如何去做。也许是对想法的引用。现在我只是有标准的气球笔记正在做笔记。

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="TestNote" SizeToContent="WidthAndHeight"
    MouseLeftButtonDown="Window_MouseLeftButtonDown"
    WindowStyle="None"
    AllowsTransparency="True"
    Background="Transparent">
<Canvas Width="400" Height="400" Name="Main" >
    <Path Stroke="Gray" StrokeThickness="2" Name="testPath" Height="206.97" Stretch="Fill" Width="273.448" >
        <Path.Fill >
            <SolidColorBrush Color="Khaki"></SolidColorBrush>
        </Path.Fill>
        <Path.Data>
            <CombinedGeometry GeometryCombineMode="Union">
                <CombinedGeometry.Geometry1>
                    <RectangleGeometry Rect="0,0,100,100" RadiusX="10" RadiusY="10"/>
                </CombinedGeometry.Geometry1>
                <CombinedGeometry.Geometry2>
                    <PathGeometry >
                        <PathFigure StartPoint="50,25">
                            <ArcSegment Size="100,100" RotationAngle="45"
                                SweepDirection="CounterClockwise" Point="25,25" />
                            <LineSegment Point="0,150"/>
                        </PathFigure>
                    </PathGeometry>
                </CombinedGeometry.Geometry2>
            </CombinedGeometry>
        </Path.Data>
    </Path>
</Canvas>
</Window>

public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }
    private void Window_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        this.DragMove();
    }  
} 
```

# android - SQLiteException：在“”附近：编译时出现语法错误（代码 1）

> ID：15590444
> 
> 赞同：9
> 
> 时间：2013-03-23T18:22:35.437
> 
> 标签：android, sqlite, exception

我在编译时遇到这个错误，我不知道为什么，有人可以帮助我吗？

公共静态最终字符串 TABLE_BEERS = "cervezas";

```
// Contacts Table Columns names
public static final String KEY_NAME = "_id";
public static final String KEY_COMPANY = "company";
public static final String KEY_TYPE = "type";
public static final String KEY_ALCOHOL = "alcohol";

public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {

    String query = String.format("CREATE TABLE %s (%s STRING PRIMARY KEY,%s TEXT, %s TEXT, %s TEXT);", 
            TABLE_BEERS, KEY_NAME, KEY_COMPANY,
            KEY_TYPE, KEY_ALCOHOL);

    /*
    String CREATE_BEER_TABLE = "create table " + TABLE_BEERS + "("
            + KEY_NAME + " STRING PRIMARY KEY," 
            + KEY_COMPANY + " TEXT,"
            + KEY_TYPE + " TEXT," 
            + KEY_ALCOHOL + " TEXT )";*/
    db.execSQL(query); 
```

这是用于创建表

```
public List<Cervezas> getCompanyCervezas(String compania){

            List<Cervezas> cervezasList = new ArrayList<Cervezas>();
            // Select All Query
            String selectQuery = "SELECT _id, type, alcohol FROM " + TABLE_BEERS + " WHERE company=" + compania;

            SQLiteDatabase db = this.getReadableDatabase();
            Cursor cursor = db.rawQuery(selectQuery, null); 
```

日志猫

```
android.database.sqlite.SQLiteException: no such column : Alean (code 1): , while compiling: SELECT _id, type, alcohol FROM cervezas WHERE company=Alean 
```

怎么了？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-23T18:27:39.110

试试下面的代码： -

```
String selectQuery = "SELECT _id, type, alcohol FROM " + TABLE_BEERS + " WHERE company= ' " + compania+" ' "; 
```

你错过了单引号..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T18:29:31.233

文本列值必须用单引号传递。尝试关注

```
String selectQuery = "SELECT _id, type, alcohol FROM " + TABLE_BEERS + " WHERE company= '" + compania +"'"; 
```

# php - 搜索数据库mysql

> ID：15590449
> 
> 赞同：0
> 
> 时间：2013-03-23T18:23:04.997
> 
> 标签：php, sql

我创建了一个存储过程来按名称搜索我的数据库。我在数据库中保存了许多文本文件，名称如下：a.txt、a1.txt、a2.txt、a3.txt、...

当我运行我的 stoerd 程序时，只显示 1 个结果。

```
SELECT * FROM cars WHERE name LIKE CONCAT ('%', search ,'%'); 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:27:03.093

您的问题解决方案是

```
 SELECT * FROM cars WHERE name LIKE CONCAT ('%'. $search . '%'); 
```

或者如果您直接在 sql server 上使用然后

```
SELECT * FROM cars WHERE name LIKE CONCAT ('%search%'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:27:45.070

如果`$search`（注意美元符号）是一个 PHP 变量（我假设因为您用“php”标记了问题），您不必使用 SQL 函数`CONCAT`，而是在 PHP 中加入字符串并将其全部发送到 MySQL：

```
$sql = 'SELECT * FROM cars WHERE name LIKE "%'.$search.'%"'; 
```

那是因为`CONCAT`会让你`%`被视为一个角色，而不是一个搜索标准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T18:28:25.367

尝试这个

```
 SELECT * FROM cars WHERE name LIKE '%$search%' ; 
```

或这个

```
 WHERE name LIKE '$search' 
```

# ruby - Ruby 2.0.0p0 IRB 警告：“DL 已弃用，请使用 Fiddle”

> ID：15590450
> 
> 赞同：198
> 
> 时间：2013-03-23T18:23:21.080
> 
> 标签：ruby, windows

我刚刚卸载了旧版本的 Ruby，删除了所有的 gem（包括 Rails），并安装了 Ruby 2.0。换句话说，完全干净的重新安装。启动 IRB 后，我收到以下消息：

```
DL 已弃用，请使用 Fiddle

```

注意：我在 Windows 机器上。

这条消息是什么意思？

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2013-03-24T17:56:45.117

当您使用 Windows 时，您收到的消息**`ruby 2.0.0p0 (2013-02-24)`**很**常见**。

消息“ `DL is deprecated, please use Fiddle`”**不是错误；这只是一个警告**。

来源是前段时间引入[的 DL 的弃用通知](https://github.com/ruby/ruby/tree/trunk/ext/dl/lib)`dl.rb`（请参阅[修订/37910](https://bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/37910/entry/ext/dl/lib/dl.rb)）。

在 Windows 上，该`lib/ruby/site_ruby/2.0.0/readline.rb`文件仍然需要`dl.rb`，因此当您（因为 irb 需要）或其他任何需要时会出现**警告消息**。`require 'irb'``'readline'``require 'readline'`

您可以`readline.rb`使用您喜欢的文本编辑器打开并查找代码（靠近第 4369 行）：

```
 if RUBY_VERSION < '1.9.1'
      require 'Win32API'
    else
      require 'dl'
      class Win32API
        DLL = {} 
```

我们总是希望在未来的[Ruby](http://www.ruby-lang.org/en/)版本中改进以解决这种弃用问题。

编辑：对于那些想要更深入地了解**Fiddle**与**DL**的人，可以说他们的目的是将外部库与 Ruby 动态链接；您可以在 ruby​​-doc 网站上阅读有关[DL](http://www.ruby-doc.org/stdlib-2.0.0/libdoc/dl/rdoc/DL.html)或[Fiddle](http://ruby-doc.org/stdlib-2.0.0/libdoc/fiddle/rdoc/Fiddle.html)的信息。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2013-08-06T14:46:14.687

您可能想在以下位置注释掉`DL is deprecated, please use Fiddle`警告

```
C:\Ruby200\lib\ruby\2.0.0\dl.rb

```

因为这很烦人，而且你不是 irb/pry 或其他一些 gems 代码所有者

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-05T09:07:04.313

我在[openshift.com](https://help.openshift.com/hc/en-us/articles/202187604-Why-all-rhc-commands-on-windows-result-in-DL-is-deprecated-please-use-Fiddle-error-)得到了这个决议。

解析度：

> 此错误仅发生在 Ruby 2.0.0 版本的 Windows 机器上。在我们正式支持 Ruby 2.0 之前，请降级到 Ruby 1.9。
> 
> 在 Windows 上，您可以将 Ruby 1.9.3 与 2.0 一起安装。`c:\ruby193\`在安装 gem 之前将您的 %PATH% 更改为或您安装的任何目录。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-07T01:55:04.907

消息“DL 已弃用，请使用 Fiddle”不是错误；这只是一个警告。
解决方案：
您可以通过 3 个简单的步骤忽略此问题。
步骤 1\. 转到 C:\RailsInstaller\Ruby2.1.0\lib\ruby\2.1.0
步骤 2\. 然后找到 dl.rb 并使用 Aptana、sublime text 等任何在线编辑器打开文件
步骤 3\. 用注释第 8 行'#' ie # warn "DL 已弃用，请使用 Fiddle" 。
就是这样，谢谢。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-19T14:08:29.383

当我想在 Windows 下创建一个 thor 命令时，我自己遇到了这个问题。

为了避免每次运行我的 thor 应用程序时都输出该消息，我在加载 thor 时暂时静音了警告：

```
begin
  original_verbose = $VERBOSE
  $VERBOSE = nil
  require "thor"
ensure
  $VERBOSE = original_verbose
end 
```

这使我不必编辑第三方源文件。

# java-ee-6 - CDI & JPA：存储库类的最佳范围

> ID：15590454
> 
> 赞同：3
> 
> 时间：2013-03-23T18:23:51.893
> 
> 标签：java-ee-6, cdi, scopes

我想知道 CDI 中存储库类的最有效（就所需资源而言）范围是什么。想象以下场景：

```
@RequestScoped
//OR @ApplicationScoped OR @SessionScoped OR @ConversationScoped?
public class SomeRepository{
  @Inject 
  private EntityManager em;

  public SomeClass getSomeClassById(int id){
    return em.createNamedQuery("getSomeClassById",SomeClass.class).
             setParameter("id",id).getSingleResult();
   }
} 
```

该示例中的 EntityManager 是使用`@RequestScoped`范围生成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:43:19.153

我认为有趣的问题。出乎意料的是，我想不出任何使这些课程特别的东西。因此，我会将它们`@ApplicationScoped`作为一个新实例，其功能与我刚刚丢弃的实例完全相同。不确定它会对堆产生任何明显的影响，可能不会，但如果它们必须重新创建很多？

我认为从概念上感觉更适合你的东西很好。

# java - 在 Java 中使用 Google Plus API 进行 OAuth 2.0 访问

> ID：15590459
> 
> 赞同：2
> 
> 时间：2013-03-23T18:24:28.467
> 
> 标签：java, api, oauth-2.0, google-plus

我一直在尝试使用 Google Plus API 编写一个 Web 应用程序，我需要使用 java 设置 OAuth 访问，我搜索了很多，发现 google java starter 和其他示例，它们非常混乱，我不知道是什么我应该编写以获得令牌的代码我希望如果有人可以告诉我如何通过简单的步骤使用 java 获得 OAuth 访问权限，我在 stackoverflow.com 上看到了其他问题，但它们对我没有多大帮助

所以任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T23:40:38.207

最新的[Google+ Java 快速入门](https://github.com/googleplus/gplus-quickstart-java/)非常简单，也许您在搜索时发现了一个较旧的项目？此外，[使用 Java 开始使用 Google+ 的文档](https://developers.google.com/+/quickstart/java)应该有助于您开始。

[以下代码段显示了在使用混合客户端/服务器流](http://gusclass.com/blog/2013/03/22/using-the-hybrid-clientserver-flow-with-google-sign-in/)时将授权代码交换为访问令牌的相关代码：

```
 GoogleTokenResponse tokenResponse =
          new GoogleAuthorizationCodeTokenRequest(TRANSPORT, JSON_FACTORY,
              CLIENT_ID, CLIENT_SECRET, code, "postmessage").execute();
      // Create a credential representation of the token data.
      GoogleCredential credential = new GoogleCredential.Builder()
          .setJsonFactory(JSON_FACTORY)
          .setTransport(TRANSPORT)
          .setClientSecrets(CLIENT_ID, CLIENT_SECRET).build()
          .setFromTokenResponse(tokenResponse); 
```

为简单起见，我将删除执行[此线程中讨论的必要检查](https://stackoverflow.com/questions/15415442/authenticating-g-users-on-the-server-side-after-client-side-login/15432006#15432006)的行。

```
 // Store the token in the session for later use.
      request.session().attribute("token", tokenResponse.toString()); 
```

值得注意的是，除非用户断开您的应用程序，否则您希望保留这些凭据。该示例使用会话，因为在生产环境中，会话可以由数据库支持，并且将在服务器重新启动后恢复。

获得访问/刷新令牌和到期时间后，为 OAuth v2 令牌构建凭据，然后库将在内部适当地刷新访问令牌。以下代码显示了如何通过从用户会话中检索令牌数据在快速入门中完成此操作，还包括客户端执行的 API 调用，证明服务器的 Java 客户端正在工作：

```
 // Build credential from stored token data.
      GoogleCredential credential = new GoogleCredential.Builder()
          .setJsonFactory(JSON_FACTORY)
          .setTransport(TRANSPORT)
          .setClientSecrets(CLIENT_ID, CLIENT_SECRET).build()
          .setFromTokenResponse(JSON_FACTORY.fromString(
              tokenData, GoogleTokenResponse.class));
      // Create a new authorized API client.
      Plus service = new Plus.Builder(TRANSPORT, JSON_FACTORY, credential)
          .setApplicationName(APPLICATION_NAME)
          .build();
      // Get a list of people that this user has shared with this app.
      PeopleFeed people = service.people().list("me", "visible").execute(); 
```

如果您想以不同的方式执行此操作，您可以在构造 Plus 服务对象之前从访问令牌、刷新令牌等显式构造 tokenData 对象。

# c# - C#：“listView_ItemDrag”没有重载匹配委托“System_Eventhandler”

> ID：15590465
> 
> 赞同：1
> 
> 时间：2013-03-23T18:25:08.433
> 
> 标签：c#

我有一个表单，我在代码（ControlArray）中创建了一个 ListView，我需要向它添加另一个事件处理程序。我从这一行的标题中得到错误：

```
 //Listview events
        listViewData.SelectedIndexChanged += new EventHandler(listView_SelectedIndexChanged);
        listViewData.ItemDrag += new EventHandler(listView_ItemDrag); <-- Error here 
```

这就是事件（我通过向表单添加列表视图创建它，添加事件然后删除该列表视图）：

```
 private void listView_ItemDrag(object sender, ItemDragEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
        {
            //Declaratie
            ListViewItem dataItem = (ListViewItem)sender;

            //Lijst aanmaken en opvullen
            DataObject verplaatsing = new DataObject(DataFormats.Serializable, dataItem);

            //beginnen met slepen
            dataItem.ListView.DoDragDrop(verplaatsing, DragDropEffects.Copy);

        }
    } 
```

非常感谢您的帮助，因为我的最后期限即将到来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T18:29:26.853

试试这个：

```
listViewData.ItemDrag += new ItemDragEventHandler(listView_ItemDrag); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T18:29:45.333

我相信问题出在你使用`+= EventHandler`

ItemDrag 有`ItemDragEventHandler`

# php - php 创建类函数以从表中检索数据

> ID：15590467
> 
> 赞同：0
> 
> 时间：2013-03-23T18:25:25.523
> 
> 标签：php, class, function

我是 php OOP 的新手，我想创建一个类函数来获取注册用户信息，我该怎么做？

```
class Functions{

    public static function getUserInfo($user_id){
        $sql = mysql_query("SELECT * FROM members WHERE user_id='".$user_id."'");
        $rows = mysql_fetch_array($sql);

        if(mysql_num_rows($sql) >= 1){
            return $rows;
        }
    }
} 
```

回显用户信息：

```
$user = new Functions();
$user->getUserInfo($_SESSION['user_id']);

echo $user->user_email; 
```

我得到了带有“未定义属性”消息的 nuthing 输出，创建检索用户信息的函数的正确方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:33:36.433

也许是这样？

```
class Functions{

    public static function getUserInfo($user_id){
        if(empty($user_id)) {
            return null;
        }
        // connect to db
        $sql = mysql_query("SELECT * FROM members WHERE user_id='".$user_id."' LIMIT 1");

        if(mysql_num_rows($sql) > 0){
                $row = mysql_fetch_array($sql, MYSQL_ASSOC);
                // close connection to db
                return $row;
        }
        // close connection to db
        return null;
    }
}

$userID = !empty($_SESSION['user_id']) ? (int)$_SESSION['user_id'] : null;
$user = Functions::getUserInfo($userID);
if($user !== null) {
    echo $user['user_email'];
} 
```

这是一个例子，使用`mysqli_*`或`PDO`管理数据库中的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:52:42.920

mysql_fetch_array 返回数组，而不是对象。$user['user_email'] 应该可以工作。

一般来说，正如您提到的 OOP 我会说您的代码正在使用类，但它不是 OOP（如果我正确理解您将如何构建它）。您所做的只是将过程代码包装到一个类中。使用 OOP，您需要以具有自包含对象的方式构建代码，因此创建包含各种实用方法的“Functions”类通常是一个坏主意。考虑例如创建用户对象。

对于数据库抽象，我建议检查 PDO（[http://www.php.net/manual/en/class.pdo.php](http://www.php.net/manual/en/class.pdo.php)）。

# c# - 在数据库中添加用户输入

> ID：15590469
> 
> 赞同：-2
> 
> 时间：2013-03-23T18:25:51.550
> 
> 标签：c#

我正在尝试实现这一点

```
 Console.WriteLine("Enter Name: ");
        this.name = Console.ReadLine();
        string sql1 = "insert into items values ( " + this.name ")";
        DataAccess.ExecuteSQL(sql1); 
```

当我尝试通过它输入数据时，它显示错误，未处理异常，未找到列名或编号。

我确定列名没问题，我给了它 varchar(50) 类型。这种方法不允许吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:30:18.920

首先你忘记了一个+，第二个名字听起来可能是一个varchar/nvarchar？不要忘记''

```
Console.WriteLine("Enter Name: ");
this.name = Console.ReadLine();
string sql1 = "INSERT INTO tableName (columnName) VALUES ('" + this.name + "');"
DataAccess.ExecuteSQL(sql1); 
```

# jquery-mobile - jquery mobile 和 Durandal

> ID：15590470
> 
> 赞同：2
> 
> 时间：2013-03-23T18:25:57.237
> 
> 标签：jquery-mobile, asp.net-mvc-4, knockout.js, breeze, durandal

请任何人建议我，将 Durandal 和 JuqueryMobile 用于基于移动的应用程序（浏览器）是个好主意。我计划使用 Durandal、Jquerymobile、MVC4、KnockoutJs 和 BreezeJs 开发一个应用程序。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T23:30:24.223

我不推荐使用 jQuery mobile，因为它有很多与 durandal 重叠的功能。除非您只想将 jQuery mobile 用于控件。

我在[谷歌论坛](https://groups.google.com/forum/?fromgroups=#!topic/durandaljs/gtyh3Xoq_YQ)上问过，而是建议使用[棘轮](http://maker.github.com/ratchet/)。

不完全是您正在寻找的答案，但是.. 考虑其他选项也可能会很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T19:12:41.513

是的，我相信这是一种合理的方法。我们正在使用带有 durandal 框架的 jquery UI（不是移动版本），并在大型 Web 应用程序上取得了成功。

如果包含 Steve Saunderson ( [https://github.com/SteveSanderson/knockout/wiki/Bindings---jqueryui-widgets](https://github.com/SteveSanderson/knockout/wiki/Bindings---jqueryui-widgets) ) 的 jquery ui 小部件绑定，则可以实现完全声明性的 UI 方法。

它将允许您在 HTML 中声明类似于 jquery ui 自动完成控件的内容，如下所示：

```
<input type="text" data-bind="
            css: { 'song-valid': isValid, 'song-invalid': isInvalid },
            value: songSearchText, 
            valueUpdate: 'afterkeydown', 
            attr: { placeholder: placeholderText },
            jqueryui: {
                widget: 'autocomplete',
                options: {
                    source: function(request, response) { return $data.songAutoCompleteSource(request, response); },
                    minLength: 2,
                    select: function (event, ui) {
                        $data.songSelected(ui.item.id, ui.item.value);
                        $parent.songSelected();
                    }
                }
            }" /> 
```

只需包含在此要点中找到的 jquery ui 小部件绑定：[https ://github.com/SteveSanderson/knockout/wiki/Bindings---jqueryui-widgets](https://github.com/SteveSanderson/knockout/wiki/Bindings---jqueryui-widgets)

确保在加载 jquery 和敲除之后包含上述 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T00:45:28.007

我会说不。我用 JQuery Mobile 制作了一个简单的 PhoneGap 应用程序，它有 3 个页面。看起来不错。然后我尝试实现 Durandal，它破坏了我所有的 JQuery 移动样式。我得出的结论是，当 Jquery Mobile 尝试实现它自己的页面导航模型时，两者不能很好地配合使用。我现在将尝试使用 Bootstrap，或者可能为 UI 手动编码 css。

如果有人可以证明不是这样，请告诉我！

# php - PHP帮助在这里创建单独的页面新手

> ID：15590471
> 
> 赞同：0
> 
> 时间：2013-03-23T18:25:57.433
> 
> 标签：php

您好，我是一个初学者，正在尝试通过观看一些 youtube 视频来学习 php。到目前为止，我已经学会了如何在我的 mysql 中插入和查看数据。但我有点卡在下一部分。基本上，我创建了一个包含打印机信息（IP 地址、型号 # 等）的表，我有一个 printers.php 页面，将它们全部列在从数据库中提取的表中。到目前为止，一切都很好。我现在要做的是为放入数据库中的每台打印机创建一个链接。因此，当我单击型号 # 时，它会将我带到该特定打印机的页面。

这是我的 modelsample.php 模板文件

```
 <?php
include('includes/PrintFunctions.php');
?>

<html>
    <head>
    <title><?php echo $mod ?></title>
    </head>
    <body>
      <table>
<tr>
<td>Brand</td><td><?php echo $bran; ?></td>
</tr>
<tr>
<td>Model:</td><td><?php echo $mod; ?></td>
</tr>
<tr>
<td>Office:</td><td><?php echo $off; ?></td>
</tr>
<tr>
<td>Location:</td><td><?php echo $loc; ?></td>
</tr>
<tr>
<td>IP Address:</td><td><?php echo $ip; ?></td>
</tr>
<tr>
<td>MAC Address:</td><td><?php echo $mac; ?></td>
</tr>
<tr>
<td>Ink Type:</td><td><?php echo $Ink; ?></td>
</tr>
</table>
</body>
</html> 
```

这是我的 prinFunctions.php 代码

```
 function getPrinters2() {
$query = mysql_query("SELECT * FROM printers") or die (mysql_error());
if (mysql_num_rows($query) == 0) {
echo "<tr><td colspan=\"3\">No Printers Were Found</td></tr>";
} else {
while($post = mysql_fetch_assoc($query)) {
$bran=$post['Brand'];
$mod=$post['Model'];
$off=$post['Office'];
$loc=$post['Location'];
$ip=$post['IPAddress'];
$mac=$post['MACAddress'];
$Ink=$post['Ink Order'];
$Stock=$post['Stock'];
$id=$post['id'];
echo "<tr><td>" . $bran . "</td><td>" .  '<a href="/web/printer%202/printer/admin/modsample.php?id='.$post['Model'].'">'.$post['Model'].'</a>' . "</td><td>" . $off . "</td><td>" . $loc . "</td><td>" . $ip . "</td><td>" . $mac. "</td><td>" .  $Ink . "</td><td>" . $Stock . "</td><td><a href=\"delete.php?id=" . $id . "\">Delete</a><br /><a href=\"edit.php?id=" . $id . "\">Edit</a></td></tr>";
}
}
} 
```

基本上我想要实现的是当printer.php页面列出所有打印机时，当我点击模型时，它会将我带到特定模型的单独页面

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:35:39.237

然后您需要在模型中添加锚标记`<a>`并将`href`属性指向其他页面，您将在其中显示该特定模型的打印机..

尝试这个

```
...
<tr>
 <td>Model:</td><td><a href="PrinterByModel.php?model=<?php echo $mod ?>"><?php echo $mod; ?></a></td>
</tr> 
... 
```

PrinterByModel.php

```
$model=$_GET['model']; //here you will get the clicked model name
// db query to get details of printer of the clicked model
//and dislay the values in table like in modelsample.php 
```

# android - 以编程方式向 TableLayout 添加行会导致不正确的视图层次结构

> ID：15590473
> 
> 赞同：0
> 
> 时间：2013-03-23T18:26:03.263
> 
> 标签：android, android-layout, android-tablelayout

我正在尝试在 Android 中向我的表格布局动态添加行（我参考了本教程：[http](http://en.androidwiki.com/wiki/Dynamically_adding_rows_to_TableLayout) ://en.androidwiki.com/wiki/Dynamically_adding_rows_to_TableLayout ）。但是，它会导致不正确的视图层次结构。我附上了代码和输出图像。

XML 文件：

```
<TableLayout
    android:id="@+id/task_table"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:shrinkColumns="*"
    android:stretchColumns="*" >
    <TableRow
        android:id="@+id/task_heading_row"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal" >

        <TextView
            android:id="@+id/task_heading_view"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_span="6"
            android:text="Task"
            android:textSize="12sp"
            android:textStyle="bold"
            android:typeface="serif" >
        </TextView>
        <TextView
            android:id="@+id/time_1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_span="6"
            android:text="1"
            android:textSize="12sp"
            android:textStyle="bold"
            android:typeface="serif" >
        </TextView>
        <TextView
            android:id="@+id/time_2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_span="6"
            android:text="2"
            android:textSize="12sp"
            android:textStyle="bold"
            android:typeface="serif" >
        </TextView>
        <TextView
            android:id="@+id/time_3"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_span="6"
            android:text="3"
            android:textSize="12sp"
            android:textStyle="bold"
            android:typeface="serif" >
        </TextView>
        <TextView
            android:id="@+id/time_4"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_span="6"
            android:text="4"
            android:textSize="12sp"
            android:textStyle="bold"
            android:typeface="serif" >
        </TextView>
        <TextView
            android:id="@+id/time_5"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_span="6"
            android:text="5"
            android:textSize="12sp"
            android:textStyle="bold"
            android:typeface="serif" >
        </TextView>
        <TextView
            android:id="@+id/time_6"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_span="6"
            android:text="6"
            android:textSize="12sp"
            android:textStyle="bold"
            android:typeface="serif" >
        </TextView>
        <TextView
            android:id="@+id/time_7"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_span="6"
            android:text="7"
            android:textSize="12sp"
            android:textStyle="bold"
            android:typeface="serif" >
        </TextView>
        <TextView
            android:id="@+id/time_8"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_span="6"
            android:text="8"
            android:textSize="12sp"
            android:textStyle="bold"
            android:typeface="serif" >
        </TextView>
    </TableRow>
</TableLayout> 
```

Java 代码：

```
 TableRow row = new TableRow(this);
 row.setLayoutParams(new TableRow.LayoutParams(
         TableRow.LayoutParams.MATCH_PARENT,
         TableRow.LayoutParams.WRAP_CONTENT)); 
 TextView t1 = new TextView(this);
 t1.setLayoutParams(new TableRow.LayoutParams(
         TableRow.LayoutParams.MATCH_PARENT,
         TableRow.LayoutParams.WRAP_CONTENT));

 String heading = "heading";
 t1.setText(heading);
 row.addView(t1);
 for (int i=0;i<8;i++){
     TextView view = new TextView(this);

     view.setLayoutParams(new TableRow.LayoutParams(
             TableRow.LayoutParams.MATCH_PARENT,
             TableRow.LayoutParams.WRAP_CONTENT));
     view.setText("child");
     row.addView(view);
 }
 task_table.addView(row, new TableLayout.LayoutParams(TableRow.LayoutParams.MATCH_PARENT, TableRow.LayoutParams.WRAP_CONTENT)); 
```

在输出中，我在循环中添加的所有带有文本“child”的 8 个视图都被添加到标题为 1 的列中，而不是每列一个“child”。

预期输出：

```
Task |     1 |     2 |     3 |      4 |     5 |    6 |     7 |     8 

heading | child | child | child | child | child | child | child | child 
```

* * *

实际输出：

```
Task |     1 |     2 |     3 |      4 |     5 |    6 |     7 |     8 

heading | child child child child child child child child | | | | | | | 
```

有人可以帮助我，让我知道我做错了什么吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:52:44.303

> 有人可以帮助我，让我知道我做错了什么吗？

我怀疑您以编程方式添加的所有 8个`TextViews`都进入该`1`列，最有可能 6 个进入标题列，另外两个进入 1 列。

在布局中，您使用`layout_span`所有属性的属性，`TextViews`这意味着每个属性都`TextViews`设置为分布在 6 个普通列上。现在，当您将它们添加`Textviews`到代码中时，它们会同时填充一列（没有传播），因此最终您不会得到一对一的匹配。

`layout_span`从布局中删除该属性，`TextViews`或者如果由于某种奇怪的原因，您不能将相同的`layout_span`属性添加到`TextViews`您在代码中添加的属性（通过`TableRow.LayoutParams`）。

此外，您不需要为 the`TableRow`及其子项指定所有这些 layout_width/height 参数，因为它们具有特殊约束（因此这些值是无用的）。当设置为拉伸其内容以填充宽度时，当您告诉您将其内容居中时，这`android:gravity="center_horizontal"`又是无用的。`TableRow``TableLayout`

# android - 在数据库中显示 XML 中引用的文本视图

> ID：15590474
> 
> 赞同：0
> 
> 时间：2013-03-23T18:26:11.530
> 
> 标签：android, android-sqlite

我已经检查了有关预填充数据库的所有答案，但是没有一个显示如何在数据库中插入 REFERENCED TEXT VIEWS 或在 SQLiteOpenHelper 的 onCreate() 中手动输入练习名称，以便文本视图出现在数据库的开头。我遇到了一个在 onCreate() 中使用 ContentValues 的地方，但这对我不起作用。此外，我还尝试在 onCreate 中手动显示练习名称（参见下面 DatabaseManager 中的代码），但没有成功。

基本上，我的数据库中有 3 列，KEY_ROWID、KEY_EXERCISENAME 和 KEY_DURATION，其中 ROWID 是自动增量，KEY_DURATION 是用于不同练习的 editText，KEY_EXERCISENAME 是我想要显示包含在我的 XML 布局中的所有练习名称的位置（weekone.xml ）。因此，当用户查看数据库时，所有练习名称都已显示在 KEY_EXERCISENAME 下，并且他必须在各自的编辑框中输入这些练习的特定值。

weekone.xml

```
 <?xml version="1.0" encoding="UTF-8"?>

    <!--
    Begin Relative Layout
    -->
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/originallayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:scrollHorizontally="true"
        android:background="@drawable/appbackground">

        <TextView
        android:id="@+id/about_title"
        android:layout_width="fill_parent"
        android:layout_height="38dp"
        android:background="#00141c"
        android:fontFamily="Hobo Std"
        android:gravity="center"
        android:text="@string/start"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#FFFFFF"
        android:textSize="25sp"
        android:textStyle="bold" />

        <ImageView
            android:id="@+id/backarrow"
            android:layout_width="wrap_content"
            android:layout_height="20dp"
            android:layout_alignBottom="@+id/about_title"
            android:layout_alignParentTop="true"
            android:clickable="true"
            android:src="@drawable/arrow" />

        <ImageView
            android:id="@+id/week4"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_marginRight="24dp"
            android:clickable="true"
            android:paddingTop="400dp"
            android:src="@drawable/weekfour" />

        <ImageView
            android:id="@+id/week3"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_toLeftOf="@+id/week4"
            android:clickable="true"
            android:paddingTop="400dp"
            android:src="@drawable/weekthree" />

        <ImageView
            android:id="@+id/week2"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_alignParentTop="true"
            android:layout_toLeftOf="@+id/week3"
            android:clickable="true"
            android:paddingTop="400dp"
            android:src="@drawable/weektwo" />

        <ImageView
            android:id="@+id/week1"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_alignParentTop="true"
            android:layout_toLeftOf="@+id/week2"
            android:clickable="true"
            android:paddingTop="400dp"
            android:src="@drawable/weekone" />

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="400dp"
        android:orientation="vertical"
        android:background="#00000000"

        android:paddingTop="40dp"
        android:id="@+id/weekone">

        <!--     Line seperator     -->

        <View
                android:layout_width="fill_parent"
                android:layout_height="2dp"
                android:id="@+id/separator"
                android:visibility="visible"
                android:background="#00141c"/>

        <TextView
            android:id="@+id/week1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/week1"
            android:textColor="#FFFFFF"
            android:textSize="18sp"
            android:paddingTop="5dp"
            android:paddingBottom="5dp"
            android:background="#00141c"/>

                <!-- Begin Scrollable Linear Layout -->

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="325dp" >

       <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical">

    <RelativeLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:scrollHorizontally="true">     

        <ImageView
            android:id="@+id/treadmillimage"
            android:layout_width="80dp"
            android:layout_height="75dp"
            android:paddingTop="10dp"
            android:src="@drawable/treadmill" />

                <!--     Line seperator     -->

        <View
                android:layout_width="fill_parent"
                android:layout_height="2dp"
                android:id="@+id/separator"
                android:visibility="visible"
                android:background="#00141c"/>

                <!--    End Relative Layout   -->

        <EditText
            android:id="@+id/durOnTreadmill"
            android:layout_width="129dp"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_marginRight="32dp"
            android:hint="hh:mm:ss" />

        </RelativeLayout>

        <RelativeLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:scrollHorizontally="true">

        <TextView                               
            android:id="@+id/treadmilltext"     <----- name of exercise machine in textview
            android:layout_width="91dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:text="@string/treadmill"
            android:textColor="#FFFFFF"
            android:textSize="15sp" />

        <TextView
            android:id="@+id/duration"
            android:layout_width="91dp"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_marginRight="44dp"
            android:text="@string/dur"
            android:textColor="#FFFFFF"
            android:textSize="15sp" />

        </RelativeLayout>

    <!--        Begin Relative Layou        -->

        <RelativeLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:scrollHorizontally="true">

        <ImageView
            android:id="@+id/stepperimage"
            android:layout_width="80dp"
            android:layout_height="75dp"
            android:paddingTop="10dp"
            android:src="@drawable/stepper" />

            <!--     Line seperator     -->

        <View
                android:layout_width="fill_parent"
                android:layout_height="2dp"
                android:id="@+id/separator"
                android:visibility="visible"
                android:background="#00141c"/>

             <!--   End Relative Layout  -->

        <EditText
            android:id="@+id/durOnStepper"
            android:layout_width="129dp"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_marginRight="32dp"
            android:ems="10"
            android:inputType="number"
            android:hint="hh:mm:ss" />

            <requestFocus />

        </RelativeLayout>

        <RelativeLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:scrollHorizontally="true">

        <TextView
            android:id="@+id/steppertext"       <------ name of exercise machine in textView
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="15dp"
            android:text="@string/stepper"
            android:textColor="#FFFFFF"
            android:textSize="15sp" />

        <TextView
            android:id="@+id/duration"
            android:layout_width="91dp"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_marginRight="44dp"
            android:text="@string/dur"
            android:textColor="#FFFFFF"
            android:textSize="15sp" />

        </RelativeLayout>

    <!--    Begin Relative Layout    -->

        <RelativeLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:scrollHorizontally="true">

        <ImageView
            android:id="@+id/stationaryrowing"
            android:layout_width="80dp"
            android:layout_height="75dp"
            android:paddingTop="10dp"
            android:src="@drawable/stationaryrowing" />

        <EditText
            android:id="@+id/durOnStationaryRowing"
            android:layout_width="129dp"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_marginRight="32dp"
            android:ems="10"
            android:inputType="number" 
            android:hint="hh:mm:ss"/>

        <!--     Line seperator     -->

        <View
                android:layout_width="fill_parent"
                android:layout_height="2dp"
                android:id="@+id/separator"
                android:visibility="visible"
                android:background="#00141c"/>

    <!--
    End Relative Layout
    -->
        </RelativeLayout>

        <RelativeLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:scrollHorizontally="true">

        <TextView
            android:id="@+id/stationaryrowingtext"      <------ name of exercise machine in textView
            android:layout_width="108dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="15dp"
            android:text="@string/stationaryrowing"
            android:textColor="#FFFFFF"
            android:textSize="15sp" />

        <TextView
            android:id="@+id/duration"
            android:layout_width="91dp"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_marginRight="44dp"
            android:text="@string/dur"
            android:textColor="#FFFFFF"
            android:textSize="15sp" />

        </RelativeLayout>

         <!--   Begin Relative Layout   -->
         <RelativeLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:scrollHorizontally="true">

        <ImageView
            android:id="@+id/exercisebikeimage"
            android:layout_width="80dp"
            android:layout_height="75dp"
            android:paddingTop="10dp"
            android:src="@drawable/excerisebike"/>

        <EditText
            android:id="@+id/durOnExerciseBike"
            android:layout_width="129dp"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_marginRight="32dp"
            android:ems="10"
            android:inputType="number" 
            android:hint="hh:mm:ss"/>

            <!--     Line seperator     -->

        <View
                android:layout_width="fill_parent"
                android:layout_height="2dp"
                android:id="@+id/separator"
                android:visibility="visible"
                android:background="#00141c"/>

        <!--    End Relative Layout  -->

        </RelativeLayout>

         <RelativeLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:scrollHorizontally="true">

         <TextView
            android:id="@+id/excerisebiketext"      <------ name of exercise machine in textView
            android:layout_width="91dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="15dp"
            android:text="@string/exercisebike"
            android:textColor="#FFFFFF"
            android:textSize="15sp" />

         <TextView
            android:id="@+id/duration"
            android:layout_width="91dp"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_marginRight="44dp"
            android:text="@string/dur"
            android:textColor="#FFFFFF"
            android:textSize="15sp" />

         </RelativeLayout>

        <!--    Begin Relative Layout   -->

           <RelativeLayout 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" 
                android:scrollHorizontally="true">

        <ImageView
            android:id="@+id/ellipticaltrainerimage"
            android:layout_width="80dp"
            android:layout_height="75dp"
            android:paddingTop="10dp"
            android:src="@drawable/ellipticaltrainer"/>

        <EditText
            android:id="@+id/durOnellipticaltrainer"
            android:layout_width="129dp"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_marginRight="32dp"
            android:ems="10"
            android:inputType="number" 
            android:hint="hh:mm:ss"/>

            <!--     Line seperator     -->

        <View
                android:layout_width="fill_parent"
                android:layout_height="2dp"
                android:id="@+id/separator"
                android:visibility="visible"
                android:background="#00141c"/>

        <!--        End Relative Layout      -->

    </RelativeLayout>

           <RelativeLayout 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" 
                android:scrollHorizontally="true">

            <TextView
                android:id="@+id/ellipticaltrainertext"     <------ name of exercise machine in textView
                android:layout_width="91dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="15dp"
                android:text="@string/ellipticaltrainer"
                android:textColor="#FFFFFF"
                android:textSize="15sp" />

            <TextView
                android:id="@+id/duration"
                android:layout_width="91dp"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_alignParentTop="true"
                android:layout_marginRight="44dp"
                android:text="@string/dur"
                android:textColor="#FFFFFF"
                android:textSize="15sp" />

            </RelativeLayout>

           <Button 
               android:id = "@+id/saveButton"
               android:layout_width = "wrap_content"
               android:layout_height = "wrap_content"
               android:text = "@string/save"/>

           <Button 
               android:id = "@+id/viewButton"
               android:layout_width = "wrap_content"
               android:layout_height = "wrap_content"
               android:text = "@string/view"/>

        </LinearLayout>

       <!--     End ScrollView   -->

      </ScrollView>

        <!--        End Linear Layout        -->

    </LinearLayout>     

        <!--        End Linear Layout       -->

</RelativeLayout> 
```

数据库管理器.java

```
package com.example.draft;

import java.sql.SQLException;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseManager 
{

public static final String KEY_ROWID = "_id";
public static final String KEY_EXERCISENAME = "exercisename";
public static final String KEY_DURATION = "duration";

private static final String DATABASE_NAME = "MyDatabase";
private static final String DATABASE_TABLE = "weekOne";
private static final int DATABASE_VERSION = 1;

private DbHelper ourHelper;
private final Context ourContext;
private SQLiteDatabase ourDatabase;

private static class DbHelper extends SQLiteOpenHelper
{

    public DbHelper(Context context)
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);

        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) 
    {
        // TODO Auto-generated method stub
        db.execSQL
        ("CREATE TABLE " + DATABASE_TABLE + " (" +
            KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
            KEY_EXERCISENAME + " EXERCISEBIKE, " +     <----------Exercise name entered manually
            KEY_DURATION + " TEXT NOT NULL);"
        );

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);
    }

}

public DatabaseManager(Context c)
{
    ourContext = c; 
}

public DatabaseManager open() 
{
    ourHelper = new DbHelper(ourContext);
    ourDatabase = ourHelper.getWritableDatabase();
    return this;    
}

public void close()
{
    ourHelper.close();
}

public long createEntry(String treadmillTimings) {
    // TODO Auto-generated method stub

    ContentValues cv = new ContentValues();
    cv.put(KEY_DURATION, treadmillTimings);
    return ourDatabase.insert(DATABASE_TABLE, null,cv);

}

public String getData() 
{
    // TODO Auto-generated method stub
    String[] columns = new String[]{ KEY_ROWID, KEY_EXERCISENAME, KEY_DURATION};
    Cursor cur = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    String result = "";

    int iRow = cur.getColumnIndex(KEY_ROWID);
    int iExerciseName = cur.getColumnIndex(KEY_EXERCISENAME);
    int iDuration = cur.getColumnIndex(KEY_DURATION);

    for(cur.moveToFirst(); !cur.isAfterLast(); cur.moveToNext())
    {
        result = result + cur.getString(iRow) + "        " + cur.getString(iExerciseName) + "    " + cur.getString(iDuration) + "\n";
    }

    return result;
} 
```

}

WeekOne.java（引用所有 textView 的类

```
//referencing textViews 

    treadmillText = (TextView) findViewById (R.id.treadmilltext);
    stepperText = (TextView) findViewById (R.id.steppertext);
    ellipticalTrainerText = (TextView) findViewById (R.id.ellipticaltrainertext);
    stationaryRowingText = (TextView) findViewById (R.id.stationaryrowingtext);
    exerciseBikeText = (TextView) findViewById (R.id.excerisebiketext); 
```

有没有可能我正在尝试做的事情

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:19:17.997

设法解决它！:D，我没有`KEY_EXERCISENAME`为这个练习命名。所以，经过所有的研究，并没有放弃，插入`'cv.put(KEY_EXERCISENAME, "Treadmill")`并`createEntry()`像专业人士一样工作

谢谢大家的回复和支持：）

# android - Google Drive 快速入门 - 此元素既没有附加源代码也没有附加 Javadoc，因此找不到 Javadoc

> ID：15590475
> 
> 赞同：0
> 
> 时间：2013-03-23T18:26:13.527
> 
> 标签：android, eclipse, api, google-api, javadoc

在 MainActivity.java 中，它说**这个元素既没有附加源也没有附加 Javadoc，因此找不到 Javadoc**，对于下面的所有导入，它们都来自 Drive API。它不会调试，因为它们没有引用的源代码和 javadocs。

```
import com.google.api.client.extensions.android.http.AndroidHttp;
import com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential;
import com.google.api.client.googleapis.extensions.android.gms.auth.UserRecoverableAuthIOException;
import com.google.api.client.http.FileContent;
import com.google.api.client.json.gson.GsonFactory;
import com.google.api.services.drive.Drive;
import com.google.api.services.drive.DriveScopes;
import com.google.api.services.drive.model.File; 
```

如何为它们附加 javadocs 和源代码？他们甚至可以在Java构建路径下修改......不会让我编辑任何东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T01:02:59.950

转到 project->properties->Java build path->order and export 并将 Drive API 移动到顶部。

无需勾选或取消勾选。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-11T16:08:38.790

在构建路径中，您需要包含 jar 文件的外部 API。

# java - 套接字编程中的数组

> ID：15590476
> 
> 赞同：-1
> 
> 时间：2013-03-23T18:26:15.700
> 
> 标签：java, sockets, structure

我正在使用 Java 中的套接字编程编写客户端-服务器程序。我需要向服务器发送多个值。我可以将此值存储在结构对象中并将结构对象发送到服务器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:37:45.777

您可以使用[`ObjectOutputStream`](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/ObjectOutputStream.html)和来做到这一点[`ObjectInputStream`](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/ObjectInputStream.html)。您可以发送任何实现该[`Serializable`](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)接口的对象（另请注意，对象中的任何对象也必须实现它）。例如，发送 SomeObject 数组，然后发送 SomeOtherObject：

例如，发送一个数组`SomeObject`和`SomeOtherObject`：

```
ObjectOutputStream oos = new ObjectOutputStream(socket.getOutputStream());
oos.writeObject(new SomeObject[]{new SomeObject(), new SomeObject()});
oos.writeObject(new SomeOtherObject()); 
```

要阅读它们：

```
ObjectInputStream ois = new ObjectInputStream(socket.getInputStream());
SomeObject[] obj = (SomeObject[]) ois.readObject();
SomeOtherObject someOtherObj = (SomeOtherObject) ois.readObject(); 
```

笔记：

# java - Jersey REST 服务 - Tomcat 中的 404 响应

> ID：15590479
> 
> 赞同：0
> 
> 时间：2013-03-23T18:26:24.613
> 
> 标签：java, rest, tomcat, jaxb, jersey

我有一个 Jersey 服务，我安装在一台机器上并且运行良好，然后我在另一台机器上导入了项目，创建了一个 WAR 并将其部署在 tomcat 6.0 中。

但现在它返回一个`404`.

源代码在以下链接中：[http ://www.vogella.com/articles/REST/article.html](http://www.vogella.com/articles/REST/article.html)

我不知道从哪里开始寻找问题。我很感激你的指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:14:09.760

这是一个疯狂的猜测。但我几乎可以肯定它正在发生，因为类路径中没有 jersey.jar。我猜这是因为我认为当容器在搜索 Jersey Servlet 的 URL 中出现类似 rest/* 的东西时，类路径中没有 jar；找不到不在类路径中的。因此错误

# c# - 调用或命名更新？

> ID：15590480
> 
> 赞同：0
> 
> 时间：2013-03-23T18:26:28.673
> 
> 标签：c#, vb.net, wcf, silverlight, wcf-ria-services

我将 Silverlight 与 WCF RIA 服务一起使用。我的实体模型中有一个名为`Activation`. 它具有属性：`Code1`以及`Code2`其他属性。

在我的 silverlight 客户端上，我需要向服务器发送一个`Activation`从与其关联的对象中提取值并填充`Code1`和`Code1`属性的服务器。例如：

```
Public Sub ServerMethod(ByRef myActivation as Activation)
    Dim x as Integer = myActivation.Licence.NumberOfDays
    Dim y as Integer = myActivation.Product.ProductSeed
    myActivation.Code1 = GetCode1(x,y)
    myActivation.Code2 = GetCode2(x,y)
End Sub 
```

请注意，激活码**不会**保存到数据库中，它们只是返回到客户端，用户可以决定是否从那里保存。

使用 WCF RIA 服务实现这一目标的最佳方法是什么？起初我认为域服务中的命名更新可能会完成这项工作，但似乎没有异步回调。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:58:48.663

这正是[InvokeAttribute](http://msdn.microsoft.com/en-us/library/system.servicemodel.domainservices.server.invokeattribute%28v=vs.91%29.aspx)的用途，只需将其放在“ServerMethod”上即可。
关于异步，wcf ria 服务中的每一个调用都是异步的，如果你想得到通知，你必须为方法提供回调。
**编辑：** 我没有在您的问题中看到您需要沿线路传递“关联”属性。在这种情况下，虽然在语义上不正确，但 NamedUpdate 可能更容易。请记住，您的上下文必须是“干净的”，否则您将向服务器提交意外更改（请记住，您必须在 DomainContext 上调用 SubmitChanges）。
如果您更喜欢使用 InvokeAttribute（这就是我要采用的方式），那么，是的，正如您所指出的，将“更新的”实体返回给客户端并解决关联问题，请使用序列化您自己的，即序列化您的实体并将其发送到服务器，然后反序列化服务器端并再次序列化它，然后将其返回给客户端，您最终将在客户端对其进行反序列化。
我附上了一段我同时使用服务器端和客户端的代码，用于此目的。

```
public static class Serialization
{
    public static string Serialize<T>(T obj)
    {
        //Create a stream to serialize the object to.
        var ms = new MemoryStream();

        // Serializer the User object to the stream.
        var ser = new DataContractSerializer(typeof (T));

        ser.WriteObject(ms, obj);
        byte[] array = ms.ToArray();
        ms.Close();
        return Encoding.UTF8.GetString(array, 0, array.Length);
    }

    public static T Deserialize<T>(string obj) where T : class
    {
        if (obj == null)
            return null;
        var serializer = new DataContractSerializer(typeof (T));
        var stream = new MemoryStream(Encoding.UTF8.GetBytes(obj));
        var result = serializer.ReadObject(stream) as T;
        return result;
    }
} 
```

高温高压

# mysql - MySQL 不会按我的意愿创建表

> ID：15590481
> 
> 赞同：-1
> 
> 时间：2013-03-23T18:26:50.393
> 
> 标签：mysql

当我创建表时，MySQL 会更改除行名之外的所有内容。

例子：

```
CREATE TABLE MY_TABLE
(
table_id int NOT NULL AUTO_INCREMENT, 
PRIMARY KEY(table_id),
table_1 varchar(45),
table_2 varchar(45),
table_3 varchar(999),
table_4 varchar(45)
)" 
```

MySQL 将所有内容设置为主要`table_id`内容，并将所有内容设置为唯一、索引和全文。

如果我制作我的自定义表格，一切都会以随机模式进行。有些东西是主要的，有些东西是独一无二的。

我在 asmallorange.com 上共享主机。

```
CREATE TABLE `MY_TABLE` (  `table_id` int(11) NOT NULL AUTO_INCREMENT,  `table_1` varchar(45) DEFAULT NULL,  `table_2` varchar(45) DEFAULT NULL,  `table_3` varchar(999) DEFAULT NULL,  `table_4` varchar(45) DEFAULT NULL,  PRIMARY KEY (`table_id`)) ENGINE=MyISAM DEFAULT CHARSET=latin1 
```

这是`SHOW CREATE TABLE MY_TABLE`

我正在使用 phpAdmin 3.5.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:34:33.327

```
CREATE TABLE `my_table` (
`table_id` int(10) NOT NULL AUTO_INCREMENT,
`title` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
`content` longtext COLLATE utf8_unicode_ci NOT NULL,
`created_at` datetime NOT NULL,
PRIMARY KEY (`table_id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

这是创建具有不同字段的表的示例。

# javascript - jquery改变显示模式

> ID：15590487
> 
> 赞同：0
> 
> 时间：2013-03-23T18:27:09.310
> 
> 标签：javascript, jquery, css

我有以下 html 文件，其中包含一些 div 元素，每个元素都有 id 和 class。我创建了分配给每个选项卡的选项卡和页面。问题是遍历每个父 div 以将子 div 的显示设置为不同的类，并使单击的选项卡更改其背景。

我尝试了以下方法：

```
 function MakeActiveTab(CurrentPage, CurrentTab)
  {
    $('#PageID').children().filter(".pageParagraph").css('display','none');
    $('#PageID').children().filter("#" + CurrentPage).css('display', 'block');
    $('#Mainmenu').children().filter(".TabClass").css('background', '#fff');
    $('#Mainmenu').children().filter("#" + CurrentTab).css('background', '#007700;');
  } 
```

但它不起作用！任何想法表示赞赏。

```
 <div id='Mainmenu'>
   <div id='menu1' class='TabClass'>
    Tab1
   </div>
   <div id='menu2' class='TabClass'>
    Tab2
   </div>

  </div>

 <div id='PageID'>
       <div id='page1' class='pageParagraph'>
         some content
       </div>

       <div id='page2' class='pageParagraph'>
         some content
       </div>
 </div> 
```

我创建了一个 javascript 函数，将页面和菜单动态创建到它们的父 div 中。这工作正常，除了我无法获得当前选项卡。当我使用 javascript 执行此操作时，它可以工作，但不能在 IE8 上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:46:54.233

找到了解决它的方法。谢谢。

```
 refID = document.getElementById('Mainmenu').childNodes;
            for (i = 0; i < refID.length; i++)
            {
                if (refID[i].id == 'TabClass' + objID)
                {
                    MakeActiveTab("TabClass" + objID, "pageParag" + objID);

                    return 0;
                }
            } 
```

这就是魔力！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:37:27.777

HTML：

```
<div class="page first-page-name">
    page 1
    <div class="tab first-tab-name">tab 1</div>
    <div class="tab second-tab-name">tab 2</div>
</div>
<div class="page second-page-name">
    page 2
    <div class="tab first-tab-name">tab 1</div>
    <div class="tab second-tab-name">tab 2</div>
</div> 
```

JS：

```
function showTabOnPage(tab, page) {
    $('.page').hide().siblings(page).show();
    $('.tab').hide().siblings(tab).show();
}
showTabOnPage('.first-tab-name', '.second-page-name'); 
```

查看演示：http: [//jsfiddle.net/vpetrychuk/3WtyF](http://jsfiddle.net/vpetrychuk/3WtyF)

如果您的页面结构不同 - 抱歉。但我希望你的总体思路很清楚。

# java - 一些 EditTexts 的值似乎移动到其他 EditTexts

> ID：15590489
> 
> 赞同：0
> 
> 时间：2013-03-23T18:27:09.897
> 
> 标签：java, android, listview, android-edittext

我`EditTexts`的`ListView`.

基本上，用户从一个活动中选择一些练习，当他单击下一个按钮时，将启动一个新活动，他需要在其中输入他选择的练习的信息。这些信息包括重量、次数和组数。

有些练习可能不需要重量。如果是这种情况，我将`weight` `EditText`行`ListView`中的启用设置为 false：

```
EditText weight = (EditText)v.findViewById(R.id.weightChosen);

CustomExercisesDB exs = new CustomExercisesDB(cont);
exs.open();

int weightable = exs.isWeightable(chosenExercisesNames.get(position));
exs.close();
if(weightable==0)
{
    weight.setEnabled(false);
} 
```

上面的代码放在`getView`我的自定义适配器的`ListView`.

现在，如果假设用户选择了 3 个练习，其中一个不需要重量，那么他需要为每个重量输入信息的活动如下所示： ![在此处输入图像描述](../Images/5536343b3bcb35201a2874eb1414fabe.png)

当用户单击`EditText`第一个练习中的两个以键入一些值时，键盘会弹出，用户`EditText`在第一个练习中为每个练习输入一些值。

![在此处输入图像描述](../Images/2c17ac3ecb4019bbc16bb22dd119d1a8.png)

现在的问题是当用户让我们说点击返回按钮时，在`EditTexts`第一个练习中输入的值似乎跳到了最后`EditTexts`一个练习的最后两个`ListView`。像这样的东西：

![在此处输入图像描述](../Images/4728cc030e4f9eaf9d947f1f492c8eaa.png)

这是不对的，因为此信息应设置为`Pick Push up`, 而不是`Shoulder press`。

究竟是什么导致了这个问题，我该如何克服它。

如果您需要我的代码中您认为相关的其他内容，请告诉我。我不想包含很多可能不相关的代码。

此外，如果我再次单击`EditTexts`第一个练习中的一个，则值会从上一个练习跳回它们。就像我输入的值“挂”在外面，`EditTexts`弹出的键盘似乎让它们跳来跳去。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:43:11.080

我已经解决了这个问题。

如果有人遇到类似问题，您只需将`android:windowSoftInputMode="adjustPan"`其`manifest`放在活动下方即可。

因此，我为每个练习输入信息的活动被调用`SetCustomExercisesInfo`并放入`android:windowSoftInputMode="adjustPan"`其中。

```
 <activity
            android:name=".SetCustomExercisesInfo"
            android:label="@string/setCusExInfo"
            android:windowSoftInputMode="adjustPan" >
 </activity> 
```

# java - 代码没有按应有的方式运行？

> ID：15590492
> 
> 赞同：0
> 
> 时间：2013-03-23T18:27:41.220
> 
> 标签：java, swing, jtextfield

```
public void testDialog()
    {
      JPanel myPanel = new JPanel();
      JTextField tfNames [] = new JTextField[getNumOfPlayers()];
      for(int i=0;i < getNumOfPlayers();i++)
      {
        tfNames[i] = new JTextField(20);
        myPanel.add(new JLabel("Player " + (i+1)));
        myPanel.add(tfNames[i]);
      }

      int result = JOptionPane.showConfirmDialog(null, myPanel,
               "Please Enter The Player Names", JOptionPane.OK_CANCEL_OPTION);

      playerNames = new String [getNumOfPlayers()];

       if(result == JOptionPane.OK_OPTION)
       {
            for(int i=0;i < getNumOfPlayers();i++)
            {
                if(tfNames[i].getText() == null)
                {
                    //NOT GETTING INSIDE HERE FOR ONE REASON OR ANOTHER
                    System.out.println("NULL FIELD" + i);
                    testDialog();
                }
                else
                {
                    playerNames[i] = tfNames[i].getText();
                    System.out.println(playerNames[i]);
                }
            }
       }
       else if (result == JOptionPane.CANCEL_OPTION)
       {
            numPlayersDialog();
       }
       else
       {
            numPlayersDialog();
       }
    } 
```

基本上，我正在尝试检查单击“确定”按钮时其中一个文本字段是否为空白，并且是否再次调用此方法，但由于某种原因，它永远不会进入代码检查以查看文本字段是否为null 与否它每次都直接跳过它，即使它是 null :/ 谁能解释为什么？设置了一个小时试图弄清楚并找不到原因：/谢谢，您可能有任何建议。

PS。如果在多个文本字段之一为空白时禁用“确定”按钮，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:30:22.950

因为最有可能`tfNames[i].getText()`返回一个空字符串，而不是`null`.

也许你应该检查一下：

```
if(tfNames[i].getText() != null && tfNames[i].getText().isEmpty()){
     // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T18:30:43.590

那是因为文本永远不会为空，它将为空，所以只需将您的检查更改为：

```
if (tfNames[i].getText().isEmpty()) {

} 
```

如果使用低于 1.6 的 sdk，则使用普通 ole 检查：`tfNames[i].getText().equals("")`

# android - android的版本是否因制造商而异？

> ID：15590495
> 
> 赞同：3
> 
> 时间：2013-03-23T18:27:49.773
> 
> 标签：android

我对一件事非常好奇：

例如，HTC 上的果冻豆与三星、索尼、摩托罗拉等的果冻豆有没有可能不同？如果“是”为什么？

实际上这是编程问题，因为我正在测试的一些应用程序正在 HTC 上运行，但在三星上却没有（不完全运行，或带有“错误”），反之亦然。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T18:49:02.513

> 例如，HTC 上的果冻豆与三星、索尼、摩托罗拉等的果冻豆有没有可能不同？

绝对地。

> 如果“是”为什么？

因为他们可以。Android 是开源软件，这意味着任何人都可以根据需要对其进行修改。

合法拥有 Play 商店应用程序的设备必须满足[某些兼容性标准](http://source.android.com/compatibility/index.html)，包括[通过](http://source.android.com/compatibility/cts-intro.html)旨在确保 Android API 不会被严重破坏的测试套件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T18:39:46.643

尽管任何“Jelly Bean”版本都基于相同的 ASOP 核心，但有很多原因可能会有所不同。包含谷歌移动服务（例如 Nexus7，但不包括 Kindle Fire）、由 TI 或 Qualcomm 等开发的芯片组级别更改以支持硬件平台以及自定义和优化我的 OEM 和 ODM（例如自定义启动器或将杜比数字包含到音频管道中）将意味着潜在的不同行为，尽管大多数情况下它们不应更改核心 API 功能

在任何给定的主要版本中，还有可能出现在您的测试中的点版本的修复和更改。

你有你所看到的事物的例子吗

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T21:39:32.917

是的，因为有些公司各不相同，将下一个 Android 版本安装到他们的设备中需要时间。例如，当今年 5 月 Android 5.0 Key Lime Pie 发布时，摩托罗拉将率先与摩托罗拉 X 一起使用，但其他公司（如 LG）需要一些时间才能实现。我的 LG Android 设备甚至还没有进入 Android 3.0 Honeycomb。

# symfony - 奏鸣曲媒体：找不到文件

> ID：15590505
> 
> 赞同：1
> 
> 时间：2013-03-23T18:28:57.760
> 
> 标签：symfony, symfony-sonata, sonatype

我正在尝试将图像附加到实体，但是当我提交表单时，会显示一条错误消息：找不到文件。

这是我构建表单的代码：

```
$builder
    ->add('email', 'email', array('label' => 'Email'))
    ->add('name', 'text', array('label' => 'Name'))
    ->add('image', 'sonata_media_type', array('label' => 'Image', 'provider' => 'sonata.media.provider.image', 'context'  => 'default'))
; 
```

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T10:34:38.147

首先，您需要将您的实体“链接”到 SonataMediaBundle ：

```
/**
 * @ORM\ManyToOne(targetEntity="Application\Sonata\MediaBundle\Entity\Media")
 * @ORM\JoinColumn(name="image", referencedColumnName="id")
 */
private $image; 
```

然后在您的管理员中，在`configureFormFields(FormMapper $formMapper)`：

```
->add('image', 'sonata_type_model_list', array('label' => 'Image', 'required' => false))) 
```

在我的项目中，我已经做到了:)

# django - 在 Django Inline Admin 中建模“帮助”文本

> ID：15590507
> 
> 赞同：11
> 
> 时间：2013-03-23T18:29:13.540
> 
> 标签：django, django-admin

我在我的 Django 应用程序中使用内联管理员。我希望在管理表单中显示一些帮助文本，以便 Page 与内联管理员一起使用（不仅仅是该模型中每个字段的单独帮助文本）。我一直在试图弄清楚如何做到这一点，但似乎找不到任何关于这个问题的东西。我是否错过了一些琐碎的开箱即用选项？

如果没有超级简单的方法可以做到这一点，有没有办法通过扩展一些模板来做到这一点？

以下是我的模型及其管理员的一部分：

```
class Page(models.Model):
    ....

class File(models.Model):
    page = models.ForeignKey(Page)
    ....

class FileAdminInline(admin.TabularInline):
    model = File
    extra = 0

class PageAdmin(admin.ModelAdmin):
    inlines = (FileAdminInline,) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T20:02:27.140

如果您不是在谈论特定`help_text`属性，那么请查看这篇[文章](https://stackoverflow.com/questions/3728617/adding-model-wide-help-text-to-a-django-models-admin-form)，它显示了一种未充分记录的实现方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-19T16:12:09.500

如果您不想将 help_text 信息放入表单集的上下文并修改 edit_inline 模板，那么有一种方法可以为此目的捕获模型的*verbose_name_plural元属性。*

基本思想：如果您将该字符串标记为安全，则可以插入您想到的任何 html 元素。例如，将其标题设置为全局模型帮助文本的图像元素。这可能看起来像这样：

```
class Meta:
    verbose_name = "Ygritte"
    verbose_name_plural = mark_safe('Ygrittes <img src="' + settings.STATIC_URL + \
                                    'admin/img/icon-unknown.svg" class="help help-tooltip" '
                                    'width="15" height="15" '
                                    'title="You know nothing, Jon Snow"/>') 
```

当然 - 这有点 hacky - 但这很简单，如果您的模型仅作为内联模型访问并且您不需要复数详细名称来表示其他事物（例如，在应用程序管理中的模型列表中）概述）。

# svn - 哈德逊工作无法验证 svn 凭据

> ID：15590517
> 
> 赞同：1
> 
> 时间：2013-03-23T18:29:43.387
> 
> 标签：svn, hudson

我正在配置一个 Hudson 作业以使用 subversion 存储库（安装了 Hudson Subversion 插件 2.3.8-h-1），但是 Hudson 无法进行身份验证：

```
Unable to access https://user/svn/myRepository : svn: E200015: No Credentials to try. Authentication failed. (show details)
(Maybe you need to enter credential?) 
```

Hudson 正在我的本地 Windows PC 上运行，并且该服务正在以具有管理员权限的 Windows 用户身份登录。SVN 服务器设置为使用 Windows 凭据。

如果我单击链接输入凭据，它会将我带到一个页面，以使用几种不同的方法（用户名/密码、SSH 公钥、HTTPS 客户端证书）输入 Subversion 身份验证。我选择用户名/密码，输入 Windows 凭据，单击 OK，Hudson 返回：

```
Authentication was successful. Information is stored in Hudson now. 
```

回到作业配置，Hudson 仍然无法进行身份验证，给出同样的错误。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T01:37:25.693

我遇到了类似的问题，不知道原因。

但是，解决该问题的解决方案是：

1.  使用 TortoiseSVN 或其他 SVN 客户端浏览 SVN repo。
2.  然后，再试一次。

在我的机器上（Windows7 + Hudson 服务 + VisualSVN 服务器 + TortoiseSVN），它可以工作。

# python - 如何通过终端命令录制音频并使用 Pocketsphinx 识别语音

> ID：15590523
> 
> 赞同：0
> 
> 时间：2013-03-23T18:30:25.357
> 
> 标签：python, bash, record, voice-recognition

我正在开发一个离线人工智能代理。

我还需要做的是克服语音识别问题。

我的问题是我找不到正确的方法来**通过终端记录 Pocketsphinx 的正确格式，**以便将其嵌入到 AI 代理中。

任何人都可以发布任何可能的方法来做到这一点？

*提前致谢。*

# php - 如何使用 PHP 触发 JS 的 onClick 事件

> ID：15590524
> 
> 赞同：1
> 
> 时间：2013-03-23T18:30:27.747
> 
> 标签：php, javascript, onclick

我有一个注册表单，其中有一个隐藏的输入框，除非单击链接。这是代码：

```
<a id="showCoupon" href="javascript:void(0);" onclick="toggleCoupon();">
     <?php _e('Have a coupon?','mysite'); ?>
</a> 
```

如果设置了优惠券 GET 变量，我希望输入框可见并预填充提供的数据。我添加了 PHP 来检查是否存在这样的 GET 变量：

```
if(isset($_GET['coupon'])) {
    $coupon = $_GET['coupon'];
}
?> 
```

此外，输入框已修改为使用 的值（`$coupon`如果已设置）。现在，我不知道如何触发 JS 事件`toggleCoupon();`。

我修改 PHP 函数以单击如下链接：

```
if ( isset($_GET['coupon']) ) {
   $coupon = $_GET['coupon'];
   echo "<script>$('#showCoupon').trigger('click');</script>";
}
?> 
```

到目前为止，它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T18:33:30.367

你有没有尝试过：

```
<script>
$(document).ready(function(){
$('#showCoupon').trigger('click');
});

</script> 
```

当文档加载时，jQuery 会触发 id 为的元素的点击事件`showCoupon`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:47:32.070

不要使用这样的杂物。那是糟糕的。

相反，在服务器端，如果提供了 URL 参数，则不要输出首先隐藏元素的代码段（CSS 类，“display：none;”，诸如此类）。

如果元素被 JavaScript 隐藏，则向它传递一个值，指示初始状态应该是可见的。

# amazon-web-services - 安装 Open JDK 和 SunJDK 并在启动应用程序时选择

> ID：15590525
> 
> 赞同：0
> 
> 时间：2013-03-23T18:30:29.857
> 
> 标签：amazon-web-services, amazon-ec2, intellij-idea, ubuntu-12.04, java

Intellij Idea CE 推荐在 Ubuntu 12.04 上使用 Sun Java。Amazon EC2 API 工具附带 OpenJDK，如果您尝试卸载 OpenJDK，亚马逊 ec2 api 工具会随它一起卸载。

如何使用 Open 安装 Java 并使用 Sun 和 Amazon 工具启动 IntelliJ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T18:36:44.070

它不应该很简单吗？

安装 sun jdk，然后使用更改默认 jdk

```
sudo update-alternatives --config java 
```

# objective-c - 标准委托模式似乎与委托目的不一致

> ID：15590530
> 
> 赞同：3
> 
> 时间：2013-03-23T18:31:01.753
> 
> 标签：objective-c, design-patterns, delegates

如果我遵循网络上提供的许多示例中的任何一个，我会看到委托模式出现了一个共同的主题：

```
myClass.delegate = self; 
```

从我读到的，委托*应该*解耦行为，但允许类之间的交互，但是，只分配一个委托似乎与这种行为 100% 不一致。

我有 web 开发背景，而且我非常熟悉 pub/sub 模式，但我试图理解的是为什么我只允许单个委托 ( `self`) 能够对`myClass`. 这似乎会破坏授权的全部意义。

也许我误解了某些东西，或者这只是最简单的委托形式，但是有人可以解释一下如何将一个类静态分配（在经典意义上）另一个类的委托以任何有意义的方式解耦行为。

奖励：也许是一种允许多个类对一个委托采取行动的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T18:41:20.073

委托声明对委托类的额外控制。最简单的例子是`windowShouldClose:`NSWindowDelegate 协议中的方法。类委托有机会**主动**覆盖在 NSWindow 中关闭窗口。**如果允许多个代表，则多个代表可能会提供相互冲突的订单，这将是不受欢迎的结果。**

![在此处输入图像描述](../Images/77866e4da4bec4b8d4baf24d1d2ab8cd.png)

委托允许您自定义行为而无需子类化。因为一个类可以实现许多委托协议，所以它是 Objective-C 中 MVC 编程模型的关键部分。*委托允许您创建一个类作为多个其他类的“控制器”。*

为了对类发生的事情做出**反应**，您使用键值观察的发布/订阅模型。例如，`NSOperationQueue`有一个可观察的属性`operationCount`，让您对队列中操作数量的变化做出反应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T18:46:05.957

它在某种意义上解耦了行为，即委托人根本不需要知道任何关于委托的事情，除了它（可能）响应一组特定的方法。这使得具有委托的类可以在完全不同的代码库/情况下使用而无需更改。在编写将被其他人使用的框架类时，它特别适用，这是您在系统框架中看到它的原因之一。

委托的主要用途之一是允许自定义对象的行为而无需子类化。以`NSWindowDelegate`方法为例[`-windowWillResize:toSize:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSWindowDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSWindowDelegate/windowWillResize%3atoSize%3a)，其中委托可以返回与建议的尺寸不同的尺寸来实现自定义尺寸行为。如果多个委托返回不同的值，如何处理这种情况？

当然，有时委托方法只是为了通知委托某些特定事件已发生。在这些情况下，多个对象想要被通知确实是合理的。这是在 Objective-C/Cocoa 中通过通知（[NSNotification](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotification_Class/Reference/Reference.html)）和[键值观察](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)（KVO）提供的。您会在 Cocoa 中找到很多案例，其中委托方法也发布了相应的通知，以防委托以外的对象想要了解它（例如[windowWillClose:](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSWindowDelegate_Protocol/Reference/Reference.html) /NSWindowWillCloseNotification）。

# css - div 的背景与内容不符

> ID：15590533
> 
> 赞同：0
> 
> 时间：2013-03-23T18:31:20.673
> 
> 标签：css, html

我是 html 和 css 的新手。我用 css 编写了一个 html 页面，但很困惑。

我使用了这个 CSS 代码

```
#container {
background: #000000;
width: 500px;
margin: auto;
}
#left {
background: #FF0000;
width: 200px;
float: left;
}
#right {
background: #0000FF;
width: 200px;
float: right;
} 
```

和这个html代码

```
<div id="container">
<div id="left">This is left</div>
<div id="right">This is right</div>
</div> 
```

但是我没有在#container 中指定的黑色背景。你能帮我解决这个问题吗？我希望背景在我编写内容时自动移动。在具有 id 容器的 div 之间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:37:15.583

设置`#container`为

```
float: left; 
```

或者

```
display:inline-block; 
```

[单击此处](http://jsfiddle.net/ZyaeT/)查看实时示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:34:07.140

这是因为您在内部 div 中使用 Float 并且容器不包含任何文本，

尝试这个

```
<div id="container">

    hello <br>
<div id="left">This is left</div>
<div id="right">This is right</div>
<br><br>

    </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T18:05:40.697

这对你来说很好

```
#container {border:2px solid #cccccc;
height:50px;
background-color: #000000;
width: 500px;
margin: auto;
} 
```

# java - 从位于服务器中的 .ser 文件中读取对象的 Java 程序

> ID：15590534
> 
> 赞同：2
> 
> 时间：2013-03-23T18:31:32.010
> 
> 标签：java, file, http, object

我的想法是我想从位于服务器中的序列化文件中读取一个对象。怎么做？

我只能使用以下代码读取 .txt 文件：

```
 void getInfo() {
    try {
        URL url;
        URLConnection urlConn;
        DataInputStream dis;

        url = new URL("http://localhost/Test.txt");

        // Note:  a more portable URL: 
        //url = new URL(getCodeBase().toString() + "/ToDoList/ToDoList.txt");

        urlConn = url.openConnection();
        urlConn.setDoInput(true);
        urlConn.setUseCaches(false);

        dis = new DataInputStream(urlConn.getInputStream());

        String s;
        while ((s = dis.readLine()) != null) {
            System.out.println(s);
        }
        dis.close();
    } catch (MalformedURLException mue) {
        System.out.println("Error!!!");
    } catch (IOException ioe) {
        System.out.println("Error!!!");
    }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:43:14.367

您可以使用此方法执行此操作

```
 public Object deserialize(InputStream is) {
    ObjectInputStream in;
    Object obj;
    try {
      in = new ObjectInputStream(is);
      obj = in.readObject();
      in.close();
      return obj;
    }
    catch (IOException ex) {
      ex.printStackTrace();
      throw new RuntimeException(ex);
    }
    catch (ClassNotFoundException ex) {
      ex.printStackTrace();
      throw new RuntimeException(ex);
    }
  } 
```

喂它，`urlConn.getInputStream()`你会得到`Object`. `DataInputStream`不适合读取用`ObjectOutputStream`. 分别使用`ObjectInputStream`。

要将对象写入文件，还有另一种方法

```
 public void serialize(Object obj, String fileName) {
    FileOutputStream fos;
    ObjectOutputStream out;
    try {
      fos = new FileOutputStream(fileName);
      out = new ObjectOutputStream(fos);
      out.writeObject(obj);
      out.close();
    }
    catch (IOException ex) {
      ex.printStackTrace();
      throw new RuntimeException(ex);
    }
  } 
```

# windows - Windows PE 确定入口点虚拟地址

> ID：15590536
> 
> 赞同：2
> 
> 时间：2013-03-23T18:31:37.273
> 
> 标签：windows, x86, portable-executable, entry-point

我正在使用“PE 编辑器”检查 Windows 可执行文件，它显示入口点为 0x15B8，我们如何确定该入口点的地址为虚拟地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:05:23.223

入口点是相对于模块的加载地址存储的。

`ImageBase`模块可以通过设置字段中的字段来声明其首选地址`IMAGE_OPTIONAL_HEADER`（请参阅[此页面](http://msdn.microsoft.com/en-us/magazine/bb985997.aspx)）。但是，操作系统可以自由选择另一个地址，或者因为首选地址正在使用中，或者现在因为 ASLR。

我不确定你在什么环境下运行它，但如果你用一个实时运行的程序来做这个：这是一个实现细节，但在 NT 上你可以将一个`HMODULE`转换成一个指针，这就是加载地址模块。您还可以基于此读取 PE 标头。因此，例如，您可以将`AddressOfEntryPoint`成员添加到的地址`HMODULE`并找到一个入口点...如果不是加载时间信息，您想要文件中的字节偏移量之类的东西，您必须解析节标题找到它在文件中的位置。

# ruby-on-rails - Rails to_s 力学

> ID：15590537
> 
> 赞同：0
> 
> 时间：2013-03-23T18:31:49.747
> 
> 标签：ruby-on-rails, ruby, special-characters

嘿，伙计们，这让我很受挫。所以这是一个普遍的问题：

我正在编写一个应用程序，要求用户输入英雄联盟中的召唤师名称。我做了一个非常简单的匹配数据抓取并将数据输入到我的数据库中。不幸的是，我在使用“特殊字符”注册用户时遇到了一些错误。

对于这个例子，我将使用一个问题用户：RIÇK

如您所见，RICK != RIÇK。因此，当我从站点进行数据清理时，我会得到正确的值，并将其推送到数组中以备后用。

一旦我需要从数组中提取的玩家名称，如下所示：（player_names 是数组）

```
@temp_player = User.find_by_username(player_names[i].to_s) 
```

问题是没有拉出具有任何特殊字符的用户。我不应该使用 find_by 吗？to_s 是否改变了我的原始值？我真的很迷茫，不知道该怎么做，非常感谢任何帮助/建议。

提前致谢，

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:17:41.673

我要感谢 Brian Kung 提供的以下链接：[joelonsoftware.com/articles/Unicode.html](http://joelonsoftware.com/articles/Unicode.html)它很好地提供了程序员真正需要理解的最低限度。

对于我的特定问题，我使用了 HTML 刮板来获取内容，但它始终保留 HTML 条目。将这些与我的 SQL 查找一起使用时，很明显没有找到东西。为了解决这个问题，我使用 HTMLEntities Gem 对文本进行解码，如下所示（我一开始将其放入数组中）：

```
requires 'RubyGems' #without this cannot include htmlentries as a gem
requires 'HTMLEntries' 

coder = HTMLEntries.new

line = '&amp;lt;'
player_names.push(coder.decode(line)) 
```

**外卖**

在处理文本时，如果遇到错误，我强烈建议您跟踪您正在使用的字符串的来源，并真正了解每个进程中使用的编码。通过这样做，您可以轻松找到问题所在。

# php - 如何使用带有 SUM() dom xml 的 php 和 xpath 添加值？

> ID：15590538
> 
> 赞同：0
> 
> 时间：2013-03-23T18:31:52.740
> 
> 标签：php, xml, xpath

我有一个表，其值是从 XML 文件加载的，需要添加价格字段值才能得到总计。我一直在寻找和查看示例，但我不清楚。我怎样才能添加这个精确字段？

XML

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <libro>
        <autor><![CDATA[Cervantes]]></autor>
        <titulo><![CDATA[El Quijote]]></titulo>
        <precio>30€&lt;/precio>
    </libro>
    <libro>
        <autor><![CDATA[Calderón de la Barca]]></autor>
        <titulo><![CDATA[La vida es sueño]]></titulo>
        <precio>25€&lt;/precio>
    </libro>
    <libro>
        <autor><![CDATA[Garcilaso de la vega]]></autor>
        <titulo><![CDATA[Egoglas]]></titulo>
        <precio>15€&lt;/precio>
    </libro>
    <libro>
        <autor><![CDATA[Raymond Carver]]></autor>
        <titulo><![CDATA[Catedral]]></titulo>
        <precio>16€&lt;/precio>
    </libro>
    <libro>
        <autor><![CDATA[George Orwell]]></autor>
        <titulo><![CDATA[1984]]></titulo>
        <precio>10€&lt;/precio>
    </libro>
    <libro>
        <autor><![CDATA[Fidor Dostoyevski]]></autor>
        <titulo><![CDATA[Crimen y Castigo]]></titulo>
        <precio>35€&lt;/precio>
    </libro>
    <libro>
        <autor><![CDATA[Juan Ponce]]></autor>
        <titulo><![CDATA[Cronica de la intervencion]]></titulo>
        <precio>25€&lt;/precio>
    </libro>
    <libro>
        <autor><![CDATA[Yukio Mishima]]></autor>
        <titulo><![CDATA[Confesiones de una mascara]]></titulo>
        <precio>22€&lt;/precio>
    </libro>
    <libro>
        <autor><![CDATA[Elfriede Jelinek]]></autor>
        <titulo><![CDATA[Deseo]]></titulo>
        <precio>20€&lt;/precio>
    </libro>
    <libro>
        <autor><![CDATA[Bram Stoker]]></autor>
        <titulo><![CDATA[Dracula]]></titulo>
        <precio>18€&lt;/precio>
    </libro>
</root> 
```

PHP

```
<?         
   ini_set('error_reporting', E_ALL ^ E_NOTICE);
   ini_set('display_errors','on'); 
           ob_start();
           $dom=new DOMDocument();
           $dom->load('xml/libros.xml');
           $libros=$dom->getElementsByTagName('libro');
           $i=0;
           echo "<table cellspacing='2'>";
           foreach ($libros as $libro) {
               $autores=$libro->getElementsByTagName('autor');
               $autor=$autores->item(0)->nodeValue;
               $titulos=$libro->getElementsByTagName('titulo');
               $titulo=$titulos->item(0)->nodeValue;
               $precios=$libro->getElementsByTagName('precio');
               $precio=$precios->item(0)->nodeValue;
               echo "<tr id='fila".$i."'>";
               echo "<td>".$autor."</td>";
               echo "<td>".$titulo."</td>";
               echo "<td>".$precio."</td>";
               echo "</tr>";
               $i++;
           }
           echo "</table>";
           $tabla=ob_get_contents();
           ob_end_clean();
           $console="Toda va ok";
           $aValores=array('tabla'=> $tabla,'console'=>$console);
           echo json_encode($aValores);  
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:07:13.280

根据文档，xpath 应该是`sum(//precio)`.
不过，我无法让它工作。所以我选择了一种不太优雅但实用的方法：

```
$xml = simplexml_load_string($xmlstr);
$sum = 0;
$h = "<table>";

foreach ($xml->libro as $book) {

    $h .= "<tr><td>".$book->autor."</td><td>".$book->titulo."</td><td>".$book->precio."</td></tr>";

    $sum += $book->precio;
}

$h .= "<tr><td colspan=\"2\">sum:</td><td>$sum</td></tr></table>";
echo $h; 
```

我更`simplexml`喜欢`dom`. 如果你看看我的代码，你就会明白为什么 ;-)
这是一个生活演示：[http ://codepad.viper-7.com/q3drF5](http://codepad.viper-7.com/q3drF5)

# c# - 如何使泛型类包含一组仅包含其自己的类型或子类型的子类？

> ID：15590540
> 
> 赞同：4
> 
> 时间：2013-03-23T18:31:58.060
> 
> 标签：c#, covariance, contravariance

```
abstract class Animal { }

class Mammal : Animal { }

class Dog : Mammal { }

class Reptile : Animal { }

class AnimalWrapper<T> where T : Animal
{
    public ISet<AnimalWrapper<T>> Children { get; set; }
}

class Program
{
    public static void Main(string[] args)
    {
        var foo = new AnimalWrapper<Mammal>();
        foo.Children = new HashSet<AnimalWrapper<Mammal>>();

        var child = new AnimalWrapper<Dog>();
        foo.Children.Add(child);
    }
} 
```

这显然不能编译，因为`foo.Children.Add(child);`

我不确定上面的代码是否是演示我想要做的最*清晰的方式，所以我将尝试用简单的英语解释：*

我希望能够拥有一个类，其子对象属于`ISet`相同的泛型类型。因此，如果我也有`var child = new AnimalWrapper<Reptile>();`它，在编译时会`foo.Children.Add(child);`因为`Reptile`is not 也不会继承自`Mammal`. 但是，显然，即使它是派生的，如上所示，它也不起作用。

最终，能够说`ISet<AnimalWrapper<Animal>> baz = new HashSet<AnimalWrapper<Animal>>();`然后将 a 添加`new AnimalWrapper<Mammal>()`到该集合以及`new AnimalWrapper<Reptile>()`同一集合中会很好。如上所述，他们的孩子将拥有一个属于自己类型的财产`Children`。`ISet<AnimalWrapper<T>>`

有什么办法，还是我对 C# 期望过高？哎呀，我自己都糊涂了。:)

**编辑：**好的，所以我几乎想通了，没有`AnimalWrapper`，但有一个基本`IAnimal`接口，它几乎可以工作：

```
interface IAnimal { }

abstract class Animal<T> : IAnimal where T : Animal<T>
{
    public ISet<T> Children { get; set; }
}

class Mammal : Animal<Mammal> { }

class Dog : Mammal { }

class Reptile : Animal<Reptile> { }

class Frog : Reptile { }

class Program
{
    public static void Main(string[] args)
    {
        var animals = new HashSet<IAnimal>(); // any animal can be in this
        var mammal = new Mammal();
        animals.Add(mammal);
        mammal.Children = new HashSet<Mammal>();
        var dog = new Dog();
        mammal.Children.Add(dog); // ok! a dog is a mammal
        dog.Children = new HashSet<Dog>(); // in theory, OK, but compile time error
        // because Dog : Mammal, and Mammal defines Animal<Mammal>, therefore Dog's
        // Children is actually ISet<Mammal>, rather than ISet<Dog> (which is what
        // I want, recursively apply the T in Animal.
        Mammal mammal2 = new Mammal();
        dog.Children.Add(mammal2); // should be verboten, but is allowed for the
        // same reason above.
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:25:07.797

主要问题是，有点过于简单化了，协方差向上转换（以及与 ISet 的逆变）

试试这个方法...

```
abstract class Animal { }
class Mammal : Animal { }
class Dog : Mammal { }
class Reptile : Animal { }

interface INode<out T> where T : Animal
{
    T MySelf { get; }
    IEnumerable<INode<T>> Children { get; }
}

class Node<T> : INode<T>
    where T : Animal
{
    public Node() { this.Children = new HashSet<INode<T>>(); }
    public T MySelf { get; set; }
    public ISet<INode<T>> Children { get; set; }
    IEnumerable<INode<T>> INode<T>.Children { get { return this.Children; } }
}

class Program
{
    static void Main(string[] args)
    {
        // this is a 'typical' setup - to test compiler 'denial' for the Reptile type...

        Node<Mammal> tree = new Node<Mammal>();
        tree.MySelf = new Mammal();

        var node1 = new Node<Mammal>();
        tree.Children.Add(node1);

        var node2 = new Node<Dog>();
        tree.Children.Add(node2);

        var node3 = new Node<Reptile>();
        // tree.Children.Add(node3); // this fails to compile

        // ...and similar just more 'open' - if you 'collect' animals, all are welcome

        Node<Animal> animals = new Node<Animal>();
        animals.MySelf = new Mammal();

        INode<Mammal> mamals = new Node<Mammal>();
        animals.Children.Add(mamals);

        var dogs = new Node<Dog>();
        animals.Children.Add(dogs);

        INode<Animal> reptiles = new Node<Reptile>();
        animals.Children.Add(reptiles);
    }
} 
```

（查看评论）

这并不意味着它可以在您的实际案例中工作 - 因为这需要一些“设计重构”以使其与更复杂的结构一起工作（如果可能的话）。

...快点，如果需要，我稍后会尝试解释更多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T22:48:00.637

发生这种情况是因为当您实例化`AnimalWrapper<T>`使用泛型类型参数的实例时`Mammal`，该`Children`成员将是类型`ISet<AnimalWrapper<Mammal>>`而不是类型`ISet<AnimalWrapper<Dog>>`。因此，您无法将实例添加`AnimalWrapper<Dog>`到通用集合中。

我看到你可以解决这个问题的一种可能方法是如果你要实现一个接口。

```
interface IAnimalWrapper { }

class AnimalWrapper<T> : IAnimalWrapper where T : Animal
{
    public ISet<IAnimalWrapper> Children { get; set; }
} 
```

然后，您将需要更改实例化 Children 集合的方式...

```
foo.Children = new HashSet<IAnimalWrapper>(); 
```

现在您可以添加到不同类型的孩子...

```
foo.Children.Add(new AnimalWrapper<Mammal>());
foo.Children.Add(new AnimalWrapper<Dog>());
foo.Children.Add(new AnimalWrapper<Reptile>()); 
```

这样就可以编译它，但我仍然很好奇为什么你真的需要泛型类（`AnimalWrapper<T>`）。我想这可能是有原因的，但也许只是取消这种类型会简化事情（取决于更大的背景）......

```
abstract class AnimalWithChildren
{
    public ISet<AnimalWithChildren> Children { get; set; }
}
class Mammal : AnimalWithChildren { }
class Dog : Mammal { }
class Reptile : AnimalWithChildren { } 
```

换句话说，只是依靠`ISet<T>`单独提供类型......

```
var foo = new Mammal();
foo.Children = new HashSet<AnimalWithChildren>();
foo.Children.Add(new Mammal());
foo.Children.Add(new Dog());
foo.Children.Add(new Reptile()); 
```

# javascript - 根据输入字段值回显图像？

> ID：15590541
> 
> 赞同：0
> 
> 时间：2013-03-23T18:32:14.490
> 
> 标签：javascript

有以下代码

```
function SetImageProperties(control)
{
    // Populate hidden fields with properties of the control
    document.getElementById("ImageName").value   = control.name;
    document.getElementById("ImageSource").value = control.src;
}

 <form>
 <div id="dhtmlgoodies_slideshow">
    <div id="galleryContainer">
    <div id="arrow_left"><img src="images/arrow_left.gif"></div>
    <div id="arrow_right"><img src="images/arrow_right.gif"></div>
    <div id="theImages">
        <img src="http://www.fastflowers.com.au/Skin/FastFlowers/Images/Products/210,210/Australiana.jpg" name="image1.jpg" onclick="SetImageProperties(this)"/></a>
        <div id="slideEnd"></div>
    </div>
</div>
</div><input type="text" value="" id="ImageName" name="ImageName"/>
<input type="text" value="" id="ImageSource" name="ImageSource"/></form> 
```

将图像 src 和图像名称放入输入字段。在“ImageSource”中获取图像的 src。再次我如何使用“ImageSource”显示图像？表示根据输入字段要重新回显图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:44:54.483

添加一个新`<div id="selectedImage">`的来存储结果。`<img>`然后根据输入创建一个元素并附加结果。

```
function SetImageProperties(control)
{
    // Populate hidden fields with properties of the control
    document.getElementById("ImageName").value   = control.name;
    document.getElementById("ImageSource").value = control.src;
    // Create new image
    var img = document.createElement("img");
    img.src = control.src;
    img.setAttribute("name", control.name);
    // Output results
    var target = document.getElementById("selectedImage");
    target.innerHTML = "You selected the image:<br/>";
    target.appendChild(img);
} 
```

见[演示](http://jsfiddle.net/R6zs6/4/)。

# .htaccess - 设置目录根

> ID：15590543
> 
> 赞同：1
> 
> 时间：2013-03-23T18:32:35.753
> 
> 标签：.htaccess, directory, root

我有一个网站的子目录：www.example.com/admin

我在整个站点中都使用包含相同的路径结构：

```
<link rel="stylesheet" href="assets/css/styles.css"> 
```

样式表中还包含用于背景图像等内容的链接。

我的问题是包含在 /admin 目录中不起作用，因为它们都引用 /assets/css 或任何上一级的文件夹。（这些链接适用于根目录中的主网站，但不适用于管理区域。）

任何人有任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:38:32.667

您需要将 a 添加`/`到您的链接（使其成为绝对 URI 而不是相对 URI）：

```
<link rel="stylesheet" href="/assets/css/styles.css"> 
```

或者，您可以在页面标题中添加 URI 基础：

```
<base href="/"> 
```

# regex - awk reg exp 中的花括号

> ID：15590549
> 
> 赞同：7
> 
> 时间：2013-03-23T18:33:12.007
> 
> 标签：regex, awk

我正在尝试使用花括号匹配固定数量的数字，`awk`但没有得到任何结果。

```
# This outputs nothing
echo "123" | awk '/^[0-9]{3}$/ {print $1;}' 

# This outputs 123
echo "123" | awk '/^[0-9]+$/ {print $1;}' 
```

我需要做一些特定的事情来使用花括号吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-23T18:40:26.867

Mac OS X `awk`(BSD `awk`) 使用显示的第一个命令：

```
$ echo "123" | /usr/bin/awk '/^[0-9]{3}$/ {print $1;}' 
123
$ 
```

GNU`awk`没有。添加反斜杠对 GNU 没有帮助`awk`。using option`--re-interval`确实如此， using 也是如此`--posix`。

```
$ echo "123" | /usr/gnu/bin/awk --re-interval '/^[0-9]{3}$/ {print $1;}' 
123
$ echo "123" | /usr/gnu/bin/awk --posix '/^[0-9]{3}$/ {print $1;}' 
123
$ 
```

（我不确定`mawk`1996 年的 1.3.3 来自哪里，但可能是时候`awk`为您的机器获取更新版本了。）

# c# - 选择出现在任务栏中的文本

> ID：15590551
> 
> 赞同：1
> 
> 时间：2013-03-23T18:33:34.493
> 
> 标签：c#, user-interface

我有 ac# 应用程序，并认为它显示当前时间可能很有趣。所以我使用了我的主窗体的 form.text 属性并将时间放入其中（图 A）

不幸的是，当我指向 Windows 7 任务栏中的应用程序图标时，它会显示我应该显示应用程序名称的时间（图 B）

![在此处输入图像描述](../Images/f684d4bbba119474698a322f666ac28d.png)

是否可以在主窗体顶部栏上有一些文本，但在 Windows 任务栏中仍显示不同的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:06:23.200

在 .NET 4 中引入了[TaskbarItemInfo](http://msdn.microsoft.com/en-us/library/system.windows.shell.taskbariteminfo%28v=vs.100%29.aspx)类。不幸的是，它不直接支持更改任务栏中显示的应用程序标题。

但是，您可以使用[Windows API 代码包库](http://code.msdn.microsoft.com/WindowsAPICodePack)来实现这一点。Yochay Kiriaty 写了一篇名为[“为 Windows 7 任务栏开发 – 应用程序 ID”](http://blogs.windows.com/windows/archive/b/developers/archive/2009/06/18/developing-for-the-windows-7-taskbar-application-id.aspx)的文章，其中展示了您可能尝试实现的目标的示例。

# iphone - NSURLConnection 很长的下载

> ID：15590556
> 
> 赞同：11
> 
> 时间：2013-03-23T18:33:58.017
> 
> 标签：iphone, objective-c, ios6, nsurlconnection

我在下载 5 MB 文件时遇到问题，在装有 iOS 6.1 的 iPhone 5 上需要 2 分钟以上。

使用相同 iOS 版本的 iPhone 4S 仅需 10 秒，两者均使用 WiFi。

我尝试了不同的缓存策略和 NSURLRequest 的超时间隔，它没有改变，仍然需要很长时间。通过 HTTP 下载。

我正在使用**NSURLConnection**类，在下载这个“大”文件之前，我正在下载另外两个。

不知道还有什么重要的，以减少时间。

提前致谢。

代码：

```
@interface MyClass : NSObject <NSURLConnectionDelegate>
{
  @private id delegate;
  NSURLConnection *connection;
  NSMutableData* responseData;
  //...
}

#import "MyClass.h"

@implementation MyClass

-(void)getObj1:(id)delegateObj
{
   delegate = delegateObj;

   NSString *url = @"...";

   NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:url] cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:120.0];

   connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

   if(connection)
   {
      responseData = [NSMutableData data];
   }
}

-(void)getObj2:(*String)somesString
{

   NSString *url = @"...";

   NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:url] cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:120.0];

   connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

   if(connection)
   {
    responseData = [NSMutableData data];
   }
}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{ 
    //....
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
   [responseData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
   if(firstRequest)
   {
      //save data from first request and set responseData clear
      [self getObj2:@"..."];
   }
} 
```

和其他没有什么特别的，我希望这就足够了

我发现这篇文章[https://devforums.apple.com/message/754875#754875](https://devforums.apple.com/message/754875#754875)但对我来说仍然无法正常工作。但是现在我更好地理解了这种奇怪的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:50:28.227

Use AFDownloadRequestOperation (AFNetworking "sublass") - you can have also pause/resume operation.

Here you have an example [https://stackoverflow.com/a/12209618](https://stackoverflow.com/a/12209618)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T06:40:14.067

我会提出一个解决方案，其中您有某种具有`NSOperationQueue`它处理的通信管理器，使用单个入口点方法，您可以在其中为它提供您想要下载的内容所在的 URL，以及成功和失败块。通信管理器然后创建一个`NSOperation`您创建`NSURLRequest`和处理回调的位置。

一旦通信管理器将操作放入队列，它的`start`方法就会被调用。在我的通信管理器实现中，我通过 an 跟踪（除了将操作放入队列中）每个启动的操作，`NSMutableDictionary`以便您可以取消单个或所有操作（在提供的示例代码`operationKey`中用于此目的。这里`JSONOperation`返回（在成功的情况下）一个 NSString 到通信器，但它也可以是任何类型的数据，例如我使用相同的类来下载图像，所以我会传回数据对象本身。下面你可以找到我的 JSONOperation 类作为示例。我喜欢我可以将其他文件放在 Gist 上的想法。

我的`NSOperation`长相是这样的

```
@interface JSONOperation : NSOperation <NSURLConnectionDataDelegate, OperationDelegate>  
  + (instancetype)jsonOperationForProvider:(id)provider success:(OperationSuccessWithString)success failure:(OperationFailure)failure;  
@end  

#import "JSONOperation.h"
#import "ProviderDelegate.h"

@interface JSONOperation()
@property (nonatomic, assign) BOOL executing;
@property (nonatomic, assign) BOOL finished;
@property (nonatomic, assign) BOOL cancelled;

@property (nonatomic, strong) NSURL *url;

@property (nonatomic, weak) id <ProviderDelegate> delegate;
@property (nonatomic, strong) NSURLConnection *connection;
@property (nonatomic, strong) NSMutableData *receivedData;

@property (nonatomic, copy) OperationFailure failure;
@property (nonatomic, copy) OperationSuccessWithString success;
@end

@implementation JSONOperation 

- (void)start
{
    if ([self isCancelled])
{
    [self willChangeValueForKey:@"isFinished"];
    _finished = YES;
    [self didChangeValueForKey:@"isFinished"];

    return;
}

    NSURLRequest *request = [NSURLRequest requestWithURL:self.url];
    self.connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:NO];
    [self.connection scheduleInRunLoop:[NSRunLoop mainRunLoop] forMode:NSRunLoopCommonModes];
    [self.connection start];

    [self willChangeValueForKey:@"isExecuting"];
    _executing = YES;
    [self didChangeValueForKey:@"isExecuting"];
}

- (NSMutableData *)receivedData
{
    if (nil == _receivedData) {
        _receivedData = [NSMutableData data];
    }
    return _receivedData;
}

+ (instancetype)jsonOperationForProvider:(id <ProviderDelegate>)provider success:(OperationSuccessWithString)success failure:(OperationFailure)failure
{
    NSAssert(nil != provider, @"provider parameter can't be nil");

    JSONOperation *operation = [[[self class] alloc] init];
    operation.delegate = provider;
    operation.url = provider.contentURL;
    operation.failure = failure;
    operation.success = success;

    return operation;
}

- (BOOL)isConcurrent {
    return YES;
}

- (BOOL)isExecuting {
    return _executing;
}

- (BOOL)isFinished {
    return _finished;
}

- (BOOL)isCancelled {
    return _cancelled;
}

#pragma mark - NSURLConnectionDataDelegate

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

    if (_success) {
        NSString *receivedText = [[NSString alloc] initWithData:self.receivedData encoding:NSUTF8StringEncoding];
        _receivedData = nil;

        self.success(self, receivedText);
    }

    [self willChangeValueForKey:@"isFinished"];
    [self willChangeValueForKey:@"isExecuting"];

    _executing = NO;
    _finished = YES;

    [self didChangeValueForKey:@"isExecuting"];
    [self didChangeValueForKey:@"isFinished"];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [self.receivedData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    [connection cancel];
    _connection = nil;
    _receivedData = nil;
    _url = nil;

    if (_failure) {
        [[NSOperationQueue mainQueue] addOperationWithBlock:^{
            self.failure(self, error);
    }];
    }

    [self willChangeValueForKey:@"isFinished"];
    [self willChangeValueForKey:@"isExecuting"];

    _executing = NO;
    _finished = YES;

    [self didChangeValueForKey:@"isExecuting"];
    [self didChangeValueForKey:@"isFinished"];
}

#pragma mark - OperationDelegate

- (NSString *)operationKey
{
    return [self.url absoluteString];
}

- (id)provider
{
    return _delegate;
}

- (void)cancelOperation
{
    _failure = nil;
    _success = nil;

    [self.connection cancel];
    _connection = nil;

    _receivedData = nil;
    _url = nil;

    [self willChangeValueForKey:@"isCancelled"];
    [self willChangeValueForKey:@"isFinished"];
    [self willChangeValueForKey:@"isExecuting"];

    _executing = NO;
    _finished  = YES;
    _cancelled = YES;

    [self didChangeValueForKey:@"isCancelled"];
    [self didChangeValueForKey:@"isExecuting"];
    [self didChangeValueForKey:@"isFinished"];
}

@end 
```

编辑 - [Gist 示例文件](https://gist.github.com/5747552.git)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T09:27:18.053

好吧，根据我的经验，**AFNetworking**在处理下载方面做得很好。我正在对 10+ MB 大小的文件使用下载操作。所以我强烈建议使用它。

[我在堆栈上的答案以显示进度](https://stackoverflow.com/a/16454923/1704346)条。查看我实现两种方式的`AFNetworking`答案 `NSUrlconnection`分析它在下载时间中的变化。试试看

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T18:48:08.570

你试过`AFNetworking`吗？这是一个包装`NSURLConnection`。我不确定它是否会帮助您获得更快的下载速度，但它确实让您比`NSURLConnection`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-04T10:29:12.467

您使用 GCD dispatch_async 队列执行一组 NSURLRequest 请求以从服务器下载数据或获取服务器响应。

```
NSString *webURL = @"http://therealurl.appspot.com/?format=json&url=bit.ly/a";
NSURL *url = [NSURL URLWithString:webURL];
NSURLRequest *awesomeRequest = [NSURLRequest requestWithURL:url];
NSURLConnection *connection=[[NSURLConnection alloc] initWithRequest:awesomeRequest delegate:self];
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0ul);
dispatch_async(queue, ^{
    NSRunLoop *loop=[NSRunLoop currentRunLoop];
    [connection scheduleInRunLoop:loop forMode:NSRunLoopCommonModes];
    //[self processTheAwesomeness];
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-12T20:53:41.877

只需尝试使用`gzip`将远程文件压缩为`NSURLRequest`. 它将大大加快您的连接速度。

要使用它，您需要将它安装在服务器上，好消息是如果您在`apache2`服务器上使用它，它会默认提供。要测试以确保您的服务器/URL 已`gzip`启用压缩，请使用此在线工具对其进行测试： [http ://www.feedthebot.com/tools/gzip/](http://www.feedthebot.com/tools/gzip/)

如果答案是肯定的，请继续在 Xcode 中将代码添加到您的 Objective-C 代码中。在代码中的这一行之后：

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:url] cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:120.0]; 
```

只需添加以下内容：

```
// Create a mutable copy of the immutable request and add more headers
NSMutableURLRequest *mutableRequest = [request mutableCopy];

//add gzip compression
[mutableRequest addValue:@"gzip" forHTTPHeaderField:@"Accept-Encoding"];

// Now set our request variable with an (immutable) copy of the altered request
request = [mutableRequest copy]; 
```

这将显着加快您的响应时间，并且您不需要`AFNetworking`用于小型`NSURLRequest`或`NSURLConnection`任务。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-06-07T06:03:50.503

我认为这是您设备的问题。试试朋友的另一台设备。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-06-06T03:31:09.003

我不确定您的问题是什么，但以下代码对我来说可靠。

```
- (id)init
{
  self.downloadQueue = [[NSOperationQueue alloc] init];
  [self.downloadQueue setMaxConcurrentOperationCount:1];
}

- (void)doDownload:(NSURL *)url
{
  [self.downloadQueue addOperation:[NSBlockOperation blockOperationWithBlock:^{

    NSData *data =[NSData dataWithContentsOfURL:url];

    dispatch_sync(dispatch_get_main_queue(), ^{
      NSAutoreleasePool *mainQueuePool = [[NSAutoreleasePool alloc] init];

      ... update user interface ...

      [mainQueuePool release];
    });

  }]];
} 
```

# java - Spring集成测试：同名同类的Bean不兼容

> ID：15590560
> 
> 赞同：0
> 
> 时间：2013-03-23T18:34:13.030
> 
> 标签：java, spring, maven, integration-testing

我正在努力解决我的项目中出现的一个奇怪问题，该问题自从我们开始进行集成测试以来就出现了。发生的事情是我使用“jetty-maven-plugin”启动应用程序的一个实例，一旦它启动，“maven-failsafe-plugin”就开始运行集成测试。这么多设置和运行良好。

我现在要做的是：我想处理我的服务层，以便我可以设置一些固定装置供我的测试运行。到目前为止，我们的集成测试非常简单，我想把它提高一个档次并测试实际填写表格等等。为此，我需要能够设置一些固定装置，然后将它们移除，以便这些测试可重现。我们正在针对我们用于此目的的测试数据库运行。

从我所读到的，这并非不合理。尽管如此，当我实际运行测试时，我会收到一条非常奇怪的错误消息和堆栈跟踪。据我所知，Maven 在 Jetty 中启动应用程序没有问题。然后故障安全插件开始运行测试，一旦它达到第一个集成测试，它就开始实例化一个 Spring 实例和上下文。它正确地提取了它的属性和配置文件，但是当它尝试实际注入服务对象时，我看到了这个错误：

> 引起：org.springframework.beans.factory.BeanDefinitionSt oreException：从类路径资源[app-config.xml]解析XML文档时出现意外异常；嵌套异常是 org.springframework.context.annotation.Conflicting BeanDefinitionException: Annotation-specified bean name 'pesticideRoleRepositoryImpl' for bean class [dao.role.PesticideRoleRepositoryImpl] 与同名和类 [dao.role] 的现有不兼容 bean 定义冲突.PesticideRoleRepositoryImpl]

我会为你省去所有的堆栈跟踪，我可以随时提供它。;-)

我开始怀疑我是否做错了，所以我回去以几乎相同的方式设置一个测试项目。测试项目要简单得多，没有这个问题。当它运行集成测试时，服务对象会毫无问题地注入。有兴趣的可以看看[我在 GitHub 上的测试项目](https://github.com/cmiles74/wicket-todos)。

**我的问题是这个...**

有没有人见过这个错误？会不会在某些情况下Spring会出现这种问题呢？

我很清楚，通过这种集成测试，我最终得到了两个使用完全相同配置的 Spring 容器。我认为这可能是问题，但测试项目的工作方式相同并且没有这个问题。我也很困扰，即使有两个具有相同名称和类的 bean，Spring 仍然认为它们是不兼容的。

谢谢，任何帮助将不胜感激！:-D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:00:56.213

当两个不同的文件包含相同的类（bean）定义并且不兼容时会发生此错误，即`oldBeanDefintion.equals(newBeanDefinition) == false`

你可以检查：

*   为什么扫描仪加载这个类两次。
*   为什么 oldBeanDefinition.getSource().equals(newBeanDefinition.getSource()) = false
*   为什么 oldBeanDefinition.equals(newBeanDefinition) = false

您可以在方法上设置断点`ClassPathBeanDefinitionScanner.isCompatible()`或扩展`ClassPathBeanDefinitionScanner`和覆盖`isCompatible`方法并记录一些有用的信息以查找错误。

作为最后一个选项，XML`BeanDefinitions`不能被扫描的类覆盖，因此如果您在 XML 中定义 bean，则具有相同 bean 名称的扫描类将被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:34:28.107

选择的答案是正确的，根本问题是正在创建 bean 的多个实例。不过，有趣的是其他实例是模拟实例。之所以选择它们，是因为它们与测试混在一起，并且所有测试都放在类路径中。

可能有很多解决方案，我的解决方法是在我的应用程序配置中的“context:component-scan”声明中添加“context:exclude-filter”。

# ios - 唯一的应用程序 ID 是否会在设备上更改？

> ID：15590564
> 
> 赞同：2
> 
> 时间：2013-03-23T18:34:41.497
> 
> 标签：ios

我有一个 coredata 数据库，它存储文件的 pdf 绝对路径。我发现我的 pdf 无法加载，经过调查，这是因为 Documents 文件夹的路径已更改，因为 App 的唯一 ID 已更改。

以前是 /var/mobile/Applications/FEF0A8B5-6FA3-47DA-98EC-732A3FFA6FD3/Documents/ 现在是：/var/mobile/Applications/17525DA9-C2C5-4515-9635-0ECC76BE9131/Documents/

这会发生吗？在什么情况下？

非常感谢。

蒂埃里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:43:59.153

当您删除应用程序时，下一次该值将有所不同。您可以使用：

```
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]; 
```

# ruby-on-rails - 如何确定 Date.today 在太平洋时区？

> ID：15590567
> 
> 赞同：2
> 
> 时间：2013-03-23T18:35:09.887
> 
> 标签：ruby-on-rails, ruby, date, datetime, timezone

我正在跟踪用户活动：

```
def track
   UserActivityTracker.new(date: Date.today.to_s).track
end

#application.rb
config.time_zone = 'UTC' 
```

如何确保在`Pacific Time (US & Canada)` 时区中跟踪日期。我不想更改时区`application.rb`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T19:06:06.227

Rails 将使用 UTC 将您的数据存储在数据库中（这是一件好事）

我认为更改`config.time_zone`现有应用程序不是一个好主意，UTC 默认值可能是最好的

当 rails 使用 ActiveRecord 从数据库中提取数据时，它将根据`Time.zone`该请求的设置转换日期时间

```
Date.today 
# => server time, rails does not convert this (utc on a typical production server, probably local on dev machine)
Time.zone.now.to_date 
# => rails time, based on current Time.zone settings 
```

您可以在 ApplicationController 上的 before_filter 中设置当前用户时区，然后在显示日期时间时使用 I18n 助手

```
I18n.localize(user_activity_tracker.date, format: :short)
# => renders the date based on config/locals/en.yml datetime:short, add your own if you wish
# => it automatically offsets from UTC (database) to the current Time.zone set on the rails request 
```

如果您需要显示与当前`Time.zone`请求设置不同的时间，请使用`Time.use_zone`

```
# Logged on user is PST timezone, but we show local time for an event in Central
# Time.zone # => PST
<% Time.use_zone('Central Time (US & Canada)') do %>
  <%= I18n.l(event.start_at, format: :time_only_with_zone) %>
<% end %> 
```

保存数据时，不要费心进行转换，让 rails 将其保存为 UTC，您可以使用帮助程序在您希望的任何时区显示值

也可以看看：

*   [http://railscasts.com/episodes/106-time-zones-revised](http://railscasts.com/episodes/106-time-zones-revised)
*   [http://guides.rubyonrails.org/i18n.html](http://guides.rubyonrails.org/i18n.html)
*   [http://api.rubyonrails.org/classes/Time.html#method-c-use_zone](http://api.rubyonrails.org/classes/Time.html#method-c-use_zone)
*   [http://www.ruby-doc.org/core-2.0/Time.html#method-i-strftime](http://www.ruby-doc.org/core-2.0/Time.html#method-i-strftime)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T18:36:58.770

`config.time_zone`以这种方式替换：

```
config.time_zone = 'PST' 
```

如果您不想更改所有日期，可以使用`Time.zone_offset`

```
good_date = bad_date + Time.zone_offset('PST') 
```

您可以在初始化或 before_xxx 回调中添加偏移量。

# java - 如何计算消息发送到计算机并返回的时间

> ID：15590571
> 
> 赞同：0
> 
> 时间：2013-03-23T18:35:34.797
> 
> 标签：java

我写了一些代码，将消息发送到一台机器，然后回复，我想知道我如何计时，将消息发送到另一台计算机然后返回所需的时间？

这是我到目前为止的代码：

```
import mpi.* ;

class Hello {
  static public void main(String[] args) {
    MPI.Init(args) ;
    int myrank = MPI.COMM_WORLD.Rank();
    if(myrank == 0) {
      char[] mess = " Raptor" .toCharArray();
      MPI.COMM_WORLD.Send(mess, 0, mess.length, MPI.CHAR, 1, 99);
    } else {
      char[] mess = new char [20];
      MPI.COMM_WORLD.Recv(mess, 0, 20, MPI.CHAR, 0, 99);
      System.out.println("received:"+new String(mess)+":");
    }
    MPI.Finalize();
  }
} 
```

对不起，如果这是一个简单的问题，第一次使用 mpi ！

编辑：

现在的代码是：

```
import mpi.* ;

class Hello {

  static public void main(String[] args) {
    MPI.Init(args) ;
    int myrank = MPI.COMM_WORLD.Rank();
    if(myrank == 0) {
long startTime = System.nanoTime();
      char[] mess = " Hello, there" .toCharArray();
      MPI.COMM_WORLD.Send(mess, 0, mess.length, MPI.CHAR, 1, 99);
    } else {
      char[] mess = new char [20];
      MPI.COMM_WORLD.Recv(mess, 0, 20, MPI.CHAR, 0, 99);
      System.out.println("received:"+new String(mess)+":");
long endTime = System.nanoTime();
    }

long duration = endTime - startTime;
system.out.println(duration);
    MPI.Finalize();
  }
} 
```

但我现在在编译时遇到这些错误：

javac 你好.java

```
Hello.java:19: error: cannot find symbol
long duration = endTime - startTime;
                ^
  symbol:   variable endTime
  location: class Hello
Hello.java:19: error: cannot find symbol
long duration = endTime - startTime;
                          ^
  symbol:   variable startTime
  location: class Hello
Hello.java:20: error: package system does not exist
system.out.println(duration);
      ^
3 errors 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T18:37:54.013

```
long startTime = System.nanoTime();
// send & receive
...
long endTime = System.nanoTime();

long duration = endTime - startTime; 
```

* * *

```
MPI.Init(args);
int myrank = MPI.COMM_WORLD.Rank();
long startTime = System.nanoTime();
if (myrank == 0) {
     ...
} else {
      ...
}

long endTime = System.nanoTime();
long duration = endTime - startTime; 
```

# c++ - 您如何处理内存管理和信号/插槽？

> ID：15590577
> 
> 赞同：4
> 
> 时间：2013-03-23T18:36:13.500
> 
> 标签：c++, qt, memory-management

我有一个对象发出带有对象的信号：

```
MyObj *obj = this->generateObj();
emit newObjSignal(obj);
delete obj; 
```

我有一个或多个与此相关的人。问题是在对象接收到信号之前调用了删除调用。我该如何处理？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T18:39:16.913

使用**智能指针**，以便自动处理内存管理，您将确信您将拥有：

1.  没有悬空指针；
2.  没有内存泄漏。

在这种情况下，在我看来`std::shared_ptr<>`（`std::tr1::shared_ptr<>`或者`boost::shared_ptr<>`如果您不使用 C++11）是正确的选择：

```
#include <memory> // For std::shared_ptr<>
// ...
std::shared_ptr<MyObj> obj(this->generateObj());
emit_new_signal(obj);
// delete obj; // <== No need for this anymore! 
```

另请注意，处理程序函数必须接受 a`std::shared_ptr<MyObj>`而不是原始指针`MyObj*`，但这些处理程序内的代码不必更改，因为`std::shared_ptr`提供了`operator ->`.

请注意，一般来说，`new`在 C++11 中不鼓励使用 of，并且在可能的情况下应该使用`std::make_shared<>`to create `shared_ptr`s。因此，您可能需要重写您的`generateObj()`成员函数，使其返回 a`std::shared_ptr<MyObj>`而不是 a `MyObj*`，并让它在`std::make_shared<MyObj>()`内部使用来实例化对象。

**笔记：**

[正如Geier](https://stackoverflow.com/users/2192139/geier)在评论中指出的那样，Qt 有自己的智能指针类[QSharedPointer](http://qt-project.org/doc/qt-4.8/qsharedpointer.html)，您可能想要使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T19:18:52.697

虽然您可以使用 a `QSharedPointer`，但另一种方法是不使用动态内存分配。因此，代码将是 -

```
MyObj obj = this->generateObj();
emit newObjSignal(obj); 
```

这显然会导致`MyObj`创建副本。Qt 通常通过使用[隐式共享](http://qt-project.org/doc/qt-4.8/implicit-sharing.html)或写时复制来解决这个问题。

为了让您自己的班级使用这种隐式共享机制，您必须更改班级的结构并使用[`QSharedData`](http://qt-project.org/doc/qt-4.8/qshareddata.html)和[`QSharedDataPointer`](http://qt-project.org/doc/qt-4.8/qshareddatapointer.html)

```
class MyObjData : public QSharedData {
public:
    int variable;
};

class MyObj {
    MyObj() : d(new MyObjData) {}
    int foo() { return d->variable; }
private:
    QSharedDataPointer<MyObjData> d;
}; 
```

这种方式副本`MyObj`将非常便宜，您可以轻松地将其传递给信号。

这比使用 QSharedPointer 更干净。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T20:16:15.050

只需在使用信号“newObjSignal(obj)”的插槽中发出另一个信号，然后调用 deletelater。

`connect(someobject,SIGNAL(finish()),obj,SLOT(deleteLater()));`

# php - 回调竞赛：按钮点击触发ajax，其回调不会按时执行

> ID：15590582
> 
> 赞同：0
> 
> 时间：2013-03-23T18:36:48.630
> 
> 标签：php, jquery, ajax, callback, race-condition

我有一个我认为是相当经典的问题，涉及在我看来像是一场回调竞赛，但尽管我阅读了所有内容，但我仍然陷入困境。您会在下面找到粘贴的代码。

这是一个简单的登录表单，您可以看到当单击某个按钮时，我会将表单数据“ajaxically”发送到外部 php 文件。php 运行后，我将收到返回的结果，并作为测试在这里简单地提醒来自 php 文件的电子邮件地址。

当我运行它时，ajax 回调不会执行。如果我快速重复点击按钮，我会得到正确的警报。如果我发出额外的警报，我也会得到正确的响应。

我如何让它运行而不做这些其他愚蠢的事情？

提前致谢 RR

```
 $('#'+this.loginForm[0].parentId+"logIn")
      .on('click', function() {
        var jax = $.ajax(
          {  
          type: "POST",  
          url: "../sharedfunctions3/act-membership.php",
          data: {email: document.getElementById(that.parentId+'email').value, 
                  password: document.getElementById(that.parentId+'password').value,
                  path: that.path,
                  action: "logIn"
                }
          });

        jax.done(function() 
              { 
              obj = JSON.parse($.trim(jax.responseText)); 
              alert(obj.email);
              });
        jax.fail(function() { alert("error"); });
      alert(1);
      }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T02:43:06.610

我有一种预感，当您单击按钮时，浏览器正在同步和异步提交。

告诉浏览器`return false;`不要提交表单并阻止默认操作。

当点击表单标签内的按钮时，大多数浏览器都会提交表单，即使它不是提交输入。

# c - Unix - 异步读取 (aio_read)

> ID：15590587
> 
> 赞同：1
> 
> 时间：2013-03-23T18:37:07.943
> 
> 标签：c, unix, asynchronous

谁在执行阅读任务？是内核？任务在哪里排队？所有进程的队列都相同吗？

[http://linux.die.net/man/3/aio_read](http://linux.die.net/man/3/aio_read)

> aio_read() 函数将由 aiocbp 指向的缓冲区描述的 I/O 请求排队。此函数是 read(2) 的异步模拟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T02:16:45.187

内核应进程的请求启动 I/O 请求。该过程继续进行并执行其他操作。由于 I/O 通常比内存操作慢得多，这意味着该进程可以在读取完成之前做很多工作。I/O 异步完成，这意味着进程不会阻塞，不会在 I/O 子系统输出到磁盘并返回数据时无所事事。

打个比方：你吃饭的时候请朋友给你一杯水。当朋友拿水时，你继续吃。等朋友回来，你喝水。那是一杯水的异步输送。同步意味着你坐在桌旁什么都不做，什么也做不了，只能等待一杯水

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:45:57.953

据我了解，该任务由调用 aio_read 的进程执行。结果应该在您在原始调用中提供的返回缓冲区中排队。这意味着根据进程和尝试读取输出的套接字，即使它们同时运行也会有所不同，因为它们将具有不同的缓冲区要存储在其中。

希望这会有所帮助。有关其他信息，我将查看我在下面发布的 IBM Source

```
Asynchronous I/O is currently only supported for sockets. The aio_offset field may be set but it will be ignored. 
```

[IBM 资源](http://publib.boulder.ibm.com/infocenter/zos/v1r12/index.jsp?topic=/com.ibm.zos.r12.bpxbd00/raio0r.htm)

# reflection - 为什么 Mono 的 CoreCLR 会阻止透明代码的内部方法反射

> ID：15590588
> 
> 赞同：0
> 
> 时间：2013-03-23T18:37:15.463
> 
> 标签：reflection, mono

我正在检查该代码，位于[https://github.com/mono/mono/blob/master/mono/metadata/security-core-clr.c](https://github.com/mono/mono/blob/master/mono/metadata/security-core-clr.c)。

如果“确保指定的方法可以与反射一起使用，因为透明代码不能调用关键方法”对我来说很好，为什么 CoreCLR 还阻止透明代码通过反射调用内部透明方法或属性？！

有关 CoreCLR 的更多详细信息：[http](http://www.mono-project.com/Moonlight2CoreCLR) ://www.mono-project.com/Moonlight2CoreCLR 。

```
/*
 * mono_security_core_clr_ensure_reflection_access_method:
 *
 *  Ensure that the specified method can be used with reflection since
 *  Transparent code cannot call Critical methods and can only call them
 *  if they are visible from it's point of view.
 *
 *  A MethodAccessException is thrown if the field is cannot be accessed.
 */
void
mono_security_core_clr_ensure_reflection_access_method (MonoMethod *method)
{
    MonoMethod *caller = get_reflection_caller ();
    /* CoreCLR restrictions applies to Transparent code/caller */
    if (mono_security_core_clr_method_level (caller, TRUE) != MONO_SECURITY_CORE_CLR_TRANSPARENT)
        return;

    if (mono_security_core_clr_get_options () & MONO_SECURITY_CORE_CLR_OPTIONS_RELAX_REFLECTION) {
        if (!mono_security_core_clr_is_platform_image (method->klass->image))
            return;
    }

    /* Transparent code cannot invoke, even using reflection, Critical code */
    if (mono_security_core_clr_method_level (method, TRUE) == MONO_SECURITY_CORE_CLR_CRITICAL) {
        mono_raise_exception (get_method_access_exception (
            "Transparent method %s cannot invoke Critical method %s.", 
            caller, method));
    }

    /* also it cannot invoke a method that is not visible from it's (caller) point of view */
    if (!check_method_access (caller, method)) {
        mono_raise_exception (get_method_access_exception (
            "Transparent method %s cannot invoke private/internal method %s.", 
            caller, method));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T23:45:21.243

在 mono-project 的讨论列表中回答：

> 在 Silverlight 中，反射与静态编译的代码一样强大。换句话说，如果代码由于成员访问冲突而无法编译，那么反射也无济于事。
> 
> 虽然这条规则没有增加具体的安全性，但它有助于从应用程序代码中隐藏一些东西，而不必用 [SecurityCritical] 装饰成员。

[http://mono.1490590.n4.nabble.com/Why-does-Mono-s-CoreCLR-blocks-internal-method-reflection-from-transparent-code-tt4659140.html;cid=1367365433900-162](http://mono.1490590.n4.nabble.com/Why-does-Mono-s-CoreCLR-blocks-internal-method-reflection-from-transparent-code-tt4659140.html;cid=1367365433900-162)

# maven - 声纳：非 Maven 项目-> 排除 src 中的目录

> ID：15590590
> 
> 赞同：1
> 
> 时间：2013-03-23T18:37:18.867
> 
> 标签：maven, sonarqube, pom.xml

我有一个非maven项目，但我必须使用Sonar进行一次代码分析。所以我创造了一个`pom.xml`效果很好的。我`src`使用这个 pom 文件看到了对我的目录下所有文件和文件夹的分析：

```
<project
    xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>my.group.id</groupId>
    <artifactId>arifactId</artifactId>
    <version>1.0</version>
    <packaging>pom</packaging>
    <name>MyApplication</name>
    <build>
        <sourceDirectory>src</sourceDirectory>
    </build>

    <properties>
        <sonar.dynamicAnalysis>false</sonar.dynamicAnalysis>
    </properties>
</project> 
```

但我想排除一个目录及其所有子目录。我有两个目录`src/fr/`和`src/com/`. 我只想拥有`src/fr/`和排除`src/com/`. 改变

```
<sourceDirectory>src</sourceDirectory> 
```

到

```
<sourceDirectory>src/fr</sourceDirectory> 
```

我收到此错误：

```
Failed to execute goal org.codehaus.mojo:sonar-maven-plugin:2.0:sonar 
(default-cli) on project arifactId: Can not execute Sonar: Sonar is 
unable to analyze file : '/Users/tim/workspace/src/fr/xxx/dao/TestClass.java': 
The source directory does not correspond to the package declaration fr.xxx.dao 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T01:27:03.770

通常，正如它告诉我们的那样，当java 文件中声明的与目录结构不对应`The source directory does not correspond to the package declaration`时，它是一个错误，例如`package`

```
package my.test.java;
public class MyTest {}

The directory should be my/test/java/MyTest.java, 
please note the src is treated as a sourceDirectory. 
```

在您的情况下，您已将`sourceDirectory`from更改`src`为`src/fr`that 意味着

```
package fr.xxx.dao;
public class TestClass{}

The directory is xxx/dao/TestClass.java, 
please note the src/fr is treated as a sourceDirectory. Then the fr is ignored. 
```

通常，当我们想从 Sonar 分析中排除 somes 包时，可以通过在每个质量 maven 插件中设置它们来简单地完成，例如`findbugs`, `PMD`,`cobertura`等。

无论如何，Sonar 也为每个项目提供了配置。我们可以使用以下步骤进行设置：-

### 请注意：我使用的是 Sonar 3.5 版，如果您使用不同的版本，菜单可能会有所不同。

1.  访问我们的声纳网站，例如`https://myhost/sonar`
2.  通过从仪表板中选择它来转到我们的项目。
3.  在右上角，您将看到`Configuration`菜单。单击它并选择`Settings`。
4.  在`Settings`页面上，选择`Exclusions`菜单。
5.  `Exclusions`您可以简单地设置也可以使用通配符的排除模块。（您可能会在页面底部看到示例。）
6.  您的案例中的示例，排除项应该是`fr/**`. （排除文件夹 fr 下的所有内容）。

请参考以下链接：-

1.  [项目管理](http://docs.codehaus.org/display/SONAR/Project+Administration)
2.  [排除文件](http://docs.codehaus.org/display/SONAR/Project+Administration#ProjectAdministration-ExcludingFiles)和
3.  [分析参数](http://docs.codehaus.org/display/SONAR/Analysis+Parameters)

我希望这可能会有所帮助。

# ruby-on-rails - Ruby 2.0 的 Web 服务器选项？

> ID：15590596
> 
> 赞同：0
> 
> 时间：2013-03-23T18:37:54.387
> 
> 标签：ruby-on-rails, ruby, heroku, webserver

我想知道哪个是运行 ruby​​ 2.0 的 heroku 最好的 Web 服务器。

我目前正在运行 puma，但没有 rubinius 或 jruby 就无法充分利用它。我不想将我的解释器从 ruby​​ 2.0 本地更改。

我的目标是拥有一个能够在我扩展 heroku dynos 时有效扩展的 Web 服务器。因此，帮助我为尽可能多的并发用户提供服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T18:47:29.660

决定的第一部分是您的应用程序是否被认为是线程安全的。 **开箱即用的 Rails < 4.0 不是！**如果您希望它同时处理多个请求，您需要一个能够分叉的服务器。最突出的例子：[独角兽](https://blog.heroku.com/archives/2013/2/27/unicorn_rails)。Heroku 建议在 Rails 应用程序中这样做。

但是，如果您的应用程序不局限于一个线程：

**我建议使用 puma**。它确实支持单个测功机上的多个线程。即使是核磁共振。正如[pumas 官方网站](http://puma.io/)上所说，它使用的内存明显少于 unicorn。

老实说，我不知道您所说的“不能充分利用”是什么意思。您可能遇到的唯一问题是，与它运行的平台无关，您的应用程序是线程安全的。

> 我的目标是拥有一个能够在我扩展 heroku dynos 时有效扩展的 Web 服务器。因此，帮助我为尽可能多的并发用户提供服务。

一旦你启动了多个测功机，网络服务器将在每个测功机上相互独立地启动。我认为这种情况没有任何特殊需求。

# git - 从詹金斯推送到 github 静默失败

> ID：15590597
> 
> 赞同：0
> 
> 时间：2013-03-23T18:37:55.527
> 
> 标签：git, github, jenkins, push, cloudbees

我配置了一个 Jenkins 作业，它应该将更改推送回 github git 存储库。当我查看控制台时，一切看起来都很好，这项工作被归类为成功。唯一的问题是：github 中没有任何显示。

我在 github 存储库中注册了 cloudbees 的公钥，这首先可以正常触发构建。

知道发生了什么，以及我如何能够修复/调试这个？

詹金斯配置：

要建立的分支：`gh-pages`

要推送的分支： `gh-pages`或：`remotes/origin/gh-pages`

我也尝试了完全废话而不改变结果

目标远程名称：`origin`

以下是 jenkins 的控制台输出：

```
Started by user Jens Schauder
Started by user Jens Schauder
Building remotely on s-9c5ce0c6 in workspace /scratch/jenkins/workspace/degraph-publish-page
Checkout:degraph-publish-page / /scratch/jenkins/workspace/degraph-publish-page - hudson.remoting.Channel@7607cd7e:s-9c5ce0c6
Using strategy: Default
Last Built Revision: Revision 1a647b55a3afb68420e154897aa182858a83389e (origin/gh-pages)
Fetching changes from 1 remote Git repository
Commencing build of Revision 1a647b55a3afb68420e154897aa182858a83389e (origin/gh-pages)
Checking out Revision 1a647b55a3afb68420e154897aa182858a83389e (origin/gh-pages)
Copied 135 artifacts from "degraph-commit" build number 51
[Gradle] - Launching build.
[degraph-publish-page] $ /scratch/jenkins/workspace/degraph-publish-page/gradlew mvFiles gitAdd gitCommit
:mvFiles
:gitAdd
:gitCommit
[gh-pages e75cd69] "automatic updated of scaladoc"
 135 files changed, 25947 insertions(+)
 create mode 100644 nightly/docs/scaladoc/de/package.html
 create mode 100644 nightly/docs/scaladoc/de/schauderhaft/degraph/Degraph$.html
 create mode 100644 nightly/docs/scaladoc/de/schauderhaft/degraph/analysis/dependencyFinder/Analyzer$.html
 create mode 100644 nightly/docs/scaladoc/de/schauderhaft/degraph/analysis/dependencyFinder/AnalyzerLike.html 
```

...跳过了许多类似的行...

```
create mode 100644 nightly/docs/scaladoc/lib/valuemembersbg.gif
 create mode 100644 nightly/docs/scaladoc/package.html

BUILD SUCCESSFUL

Total time: 12.023 secs
Build step 'Invoke Gradle script' changed build result to SUCCESS
Pushing HEAD to branch remotes/origin/gh-pages at repo origin
Opening connection
Counting objects
Finding sources
Getting sizes
Compressing objects
Writing objects
Finished: SUCCESS 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T16:26:30.817

由于在 git-client 1.0.4 中使用了 JGit，这已被报告为 Git 插件中的回归，请参阅[JENKINS-17242](https://issues.jenkins-ci.org/browse/JENKINS-17242)

这已通过恢复更改并使用 git-cli 在 git-client 插件 1.0.5 中得到修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T19:34:56.517

这是一个类似的[问题](https://stackoverflow.com/questions/17731875/jenkins-git-publisher-how-to-commit-code-back-to-master-after-build/18906154#18906154)。

在构建后操作中设置 Git 发布者以推送和合并结果。提供您要推送到的分支名称。添加 URL 中提到的构建后 shell 脚本。

```
 git add .
    git commit -m 'Update from Jenkins' 
```

这解决了 git-client 插件将更改推回原点的问题。

# opencv - 如何在轮廓周围绘制一个矩形？

> ID：15590600
> 
> 赞同：2
> 
> 时间：2013-03-23T18:38:31.037
> 
> 标签：opencv, contour, edge-detection

我刚开始使用opencv，我正在尝试制作一个程序，将正方形放在一些沙子上的岩石图片周围。[此处](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#findcontours)的函数文档包括如何使用它的示例。

```
findContours( src, contours, hierarchy,
  CV_RETR_CCOMP, CV_CHAIN_APPROX_SIMPLE ); 
```

findContours 的原型是

```
void findContours(InputOutputArray image, OutputArrayOfArrays contours, OutputArray hierarchy, int mode, int method, Point offset=Point()) ; 
```

我有两个问题。
1\. 示例中的第三个参数`hierarchy`是 a`vector<Vec4i>`与 findContours 期望的类型不匹配。这是为什么？
2.如何使用存储的数据`contours`来找到轮廓的位置来创建边界框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T19:47:44.377

```
std::vector<std::vector<cv::Point> > contours;
std::vector<cv::Vec4i> hierarchy;
cv::findContours( mask, contours, hierarchy, cv::RETR_CCOMP, cv::CHAIN_APPROX_TC89_KCOS);
for ( size_t i=0; i<contours.size(); ++i )
{
    cv::drawContours( img, contours, i, Scalar(200,0,0), 1, 8, hierarchy, 0, Point() ); 
    cv::Rect brect = cv::boundingRect(contours[i]);
    cv::rectangle(img, brect, Scalar(255,0,0));
} 
```

# android - 从 Android 中的 ArrayList 中创建一个 JSON

> ID：15590602
> 
> 赞同：1
> 
> 时间：2013-03-23T18:38:35.733
> 
> 标签：android, json

我有一个字符串数组：

```
a = ["bob","jade","smith"] 
```

我想在我的 Android 应用程序中将其转换为如下所示的 JSON 输出，此数据需要发送到服务器。

```
{"names":["bob","jade","smith"]} 
```

请帮忙。

我试过这个：

```
Gson abs = new Gson();
String data = abs.toJson(a);
JSONObject jObjectType = new JSONObject();
jObjectType.put("names",data);
data=jObjectType.toString(); 
```

这是我在日志上的输出：

```
{"names":"[\"bob\",\"jade\",\"smith\"]"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:00:53.637

```
JSONArray names = new JSONArray(Arrays.asList(a));
JSONObject jsonToSend = new JSONObject();
jsonToSend.put("names", names); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:53:39.517

查看[Gson](https://code.google.com/p/google-gson/)，该库允许您将任何对象转换为 JSON 格式，并在收到 JSON 后返回相同的对象。

```
(Serialization)
Gson gson = new Gson();
int[] values = { 1 };
gson.toJson(values);       ==> prints [1]

(Deserialization)
int one = gson.fromJson("1", int.class);
Integer one = gson.fromJson("1", Integer.class);
Long one = gson.fromJson("1", Long.class);
Boolean false = gson.fromJson("false", Boolean.class);
String str = gson.fromJson("\"abc\"", String.class);
String anotherStr = gson.fromJson("[\"abc\"]", String.class); 
```

# javascript - AJAX json 返回未定义

> ID：15590607
> 
> 赞同：0
> 
> 时间：2013-03-23T18:39:20.647
> 
> 标签：javascript, jquery, ajax, web

我有简单的ajax查询

```
$.ajax(
{
    url:'ADMPANEL_POST.php',
    type:'POST',
    data:{'z':'1'},
    dataType:'json',
    success:function (result) {
        alert( "Data recieved: " + result.x );
        $('#result').append(result.x);
    }
}); 
```

在 ADMPANEL_POST.php 中，我尝试获取 z=1 并具有适当的处理程序，并且我希望使用 json_encode 将 data_str 返回到 ajax 成功函数

```
if(isset($_POST['z'])) 
{
    $init_x = 'test';
    $data_str[] = array('x' => $init_x);
    if($_POST['z']=='1') {
        echo json_encode($data_str, true);
    }
} 
```

但是我在警报消息中收到未定义的 data.x 值。无法弄清楚是什么问题。谢谢。PS：看到了这个，但它没有帮助[JSON 返回未定义](https://stackoverflow.com/questions/5634436/json-returning-as-undefined)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T18:41:33.103

你的格式是错误的，如果你想`result.x == 'test'`使用 `$data_str = array('x' => $init_x);`.

# c - C中的3维数组在for循环后更改值

> ID：15590608
> 
> 赞同：-1
> 
> 时间：2013-03-23T18:39:40.270
> 
> 标签：c, arrays, for-loop

在这一点上，我真的很矛盾。我在 C 中填充一个三维数组，如下所示：

```
double maxEval = 0;        
double Evals[2][le-1];  
double Waves[2][2][le-1];

for(int i=0; i<le-1; i++){

  getEvalsandWaves(&Evals[0][i], &Evals[1][i], &Waves[0][0][i], &Waves[0][1][i],
                   &Waves[1][0][i], &Waves[1][1][i], g, dx, &maxEval,
                   Q[0][i], Q[0][i+1], Q[1][i], Q[1][i+1]);

  if(myRank==0){
    printf("i= %d, %f  %f\n",i,Waves[0][0][i],Waves[0][1][i]);
    printf("       %f  %f\n\n",Waves[1][0][i],Waves[1][1][i]);
  }
} 
```

getEvalsandWaves 的原型函数和函数在这里：

```
/*The objective of this function is to calculate eigenvalues which have a close*/
/*form (e1 and e2) as well as the wave speeds associated with each eigenvalue  */
/*[w00; w10]) and [w01;w11] which then are stored in a thee dimensional matrix */

void getEvalsandWaves(double *e1, double *e2, double *w00,double *w01, double *w10,
                      double *w11, double g,double dx, double *max, double him, 
                      double hi, double uim, double ui);

void getEvalsandWaves(double *e1, double *e2, double *w00, double *w01, double *w10, 
                      double *w11, double g, double dx, double *max, double him, 
                      double hi, double uim, double ui){

                      double hbar=0; double ubar=0;

                      /*this function only returns the Roe averages */
                      /*using the values him,hi,uim,ui which are all*/
                      /*doubles */
                      RoeAvg(&hbar, &ubar,him,hi,uim,ui);

                      (*e1) = ubar - sqrt(g*hbar);
                      (*e2) = ubar + sqrt(g*hbar);

                      /*I tried to use this values instead of (*e1) and (*e2)*/
                      /*in calculating the w'sbelow to see if it fixed the   */
                      /*problem but it didn't work.                          */
                      double ei1 = ubar - sqrt(g*hbar);
                      double ei2 = ubar + sqrt(g*hbar);

                      if(fabs((*e1))>(*max))
                      (*max)=fabs((*e1));

                      if(abs((*e2))>(*max))
                      (*max)=fabs((*e2));

                      double c = 1/(2*sqrt(g*hbar));

                      (*w00) = c * ( ei2*(hi-him)+(ui-uim) ) * 1;      
                      (*w01) = c * ( (-1)*ei1*(hi-him)-(ui-uim) ) * 1;
                      (*w10) = c * ( ei2*(hi-him)+(ui-uim) ) * ei1;    
                      (*w11) = c * ( (-1)*ei1*(hi-him)-(ui-uim) ) * ei2;
} 
```

所以这里是我不知道发生了什么的地方。如果您注意到在 for 循环中，我正在打印三维数组 Waves 的值，给出以下示例输出：

```
...
i= 47, 0.000000  0.000000
       -0.000000  0.000000

i= 48, 0.000000  0.000000
       -0.000000  0.000000

i= 49, -1.000000  -1.000000
        1.414214  -1.414214
... 
```

这是正确的值。但是，如果我在 for 循环之后立即打印 Waves 的值，这就是我得到的：

```
...
i= 47, 0.000000  0.000000
      -1.000000  -1.000000

i= 48, 0.000000  0.000000
       0.000000  0.000000

i= 49, -1.000000  -1.000000
        0.000000  0.000000
... 
```

我真的不明白为什么当 for 循环完成时值会发生变化。任何帮助将不胜感激。（Evals 数组和 maxEval 变量在循环后确实保持正确的值。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:30:54.023

感谢那些花时间阅读我的问题的人，并对一些评论的回复很晚感到抱歉，但我正忙于另一个项目。

所以，我在阅读这篇文章后解决了这个问题：

[3D 数组如何存储在 C 中？](https://stackoverflow.com/questions/5920944/how-are-3d-arrays-stored-in-c)

所以我知道我的评论根本没有帮助试图解释我在做什么，但最终它归结为试图存储一系列矩阵。所以我们可以将数组 A[x][y] 视为一个二维数组，我想将其中的 z 个存储为 A[x][y][z]。

我知道 C 将二维数组存储为线性数组，但是在阅读了上面链接中的文章后，我意识到如果我尝试将 7 存储在数组的第三个矩阵中的 [0][1] 位置为：

```
A[0][1][3]=7; 
```

然后尝试稍后检索它，我会得到不同的东西。原因是如果我尝试以这种方式存储它，我必须考虑 C 如何将三维数组存储为一维数组，因此索引会有所不同。

我应该将 A[x][y][z] 作为一个 x 数组的数组来阅读，每个数组都有 z 个元素。最后，出于我的目的（存储一组 z 矩阵），工作是：

```
A[z][x][y];
A[3][0][1]=7; 
```

这样，如果我以后检索，

```
printf("The value at A[3][0][1]= %d",A[3][0][1]); 
```

它会打印出正确的值七。

这篇文章更好地解释了我刚刚想说的话。如果有人有更多想法或意见，请告诉我。

# c# - 在 ASP.NET 上选择项目的弹出窗口

> ID：15590611
> 
> 赞同：0
> 
> 时间：2013-03-23T18:39:48.893
> 
> 标签：c#, asp.net, popupwindow

我是 ASP.NET 世界的新手，我需要做一个弹出窗口来选择一些数据。

这个想法是用户可以使用 CheckBox 选择一个或多个选项。当他按下按钮时，会出现一个弹出窗口，其中包含从数据库加载的选项列表。

我不知道如何使用这些选项创建一个弹出窗口并在弹出窗口关闭时接收选定的选项。但我知道如何使用中继器从数据库中执行选项列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:50:10.933

ASP.NET 中没有这样的弹出控件。

但是，有许多 3rd 方插件，它们提供弹出控件。

*   [ajax 工具包模型弹出扩展器](http://www.codeproject.com/Articles/24087/Modal-Popup-Extender-Basics)
*   [jquery 构建的弹出窗口](http://www.jquery4u.com/windows/10-jquery-popup-window-image-slider-plugins/)

你可以创建你自己的。popup 只不过是一个隐藏的容器，它在某些操作时出现，其位置和背景由您选择。

创建一个这样的弹出窗口：

```
<div class="parent">
    <div class="popup">
    </div>
</div>
<input type="button" value="popup" id="btnpopup" /> 
```

和CSS

```
.parent
{
    position:relative;
    background-color:#CCCCCC;
    width:200px;
    height:200px;
}
.popup
{
    width:50%;
    height:50%;
    position:relative;
    top:20%;
    left:20%;
    background-color:#DDDDDD;
    display:none;
} 
```

和 jQuery 代码

```
$('#btnpopup').click(function(){
   $('.popup').toggle(200);
}); 
```

看到这个[小提琴](http://jsfiddle.net/manishmishra121/Q28XM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:50:54.333

您可以使用`OnClientClick`按钮打开弹出窗口。根据它是普通的浏览器弹出窗口还是 jQuery 对话框，您有两个常规选项：

*   **标准弹出**窗口 标准弹出 窗口就像是一个单独的页面一样打开。当您单击时`OK`，如果触发弹出窗口的页面上需要数据，您可能必须将选择存储到用户的会话中，或者将其直接存储在数据库中。如果是前者，当您返回页面并提交时，弹出窗口中的数据将在会话中可供处理。

*   **jQuery 对话框**或特别是任何 js 触发的 html 对话框。可以在`OnClientClick`函数中再用对应的js显示出来，进行选择。在对话框的 OK 按钮上，几乎不需要任何东西（除了隐藏它）。由于对话框输入控件是页面的一部分，它们将在提交时发布并且可以在服务器上进行处理。

这基本上就是您需要做的所有事情，但是关于该主题的更多阅读不会受到伤害。祝你好运。

# spring-security - 解析 Spring Security 方法 @PreAuthorize

> ID：15590612
> 
> 赞同：2
> 
> 时间：2013-03-23T18:39:51.290
> 
> 标签：spring-security

我在我的应用程序中使用注释对一些服务方法进行了`@PreAuthorize`注释。这些注释使用`hasAuthority`,`hasRole`等，它们将来可能包含其他有效的构造。例如：

```
@PreAuthorize("hasAuthority('Customer.Get')")
public Customer getCustomer(String name); 
```

我想反思地收集我所有`PreAuthorize`注释（例如等）中使用的所有权限。`Customer.Get`

```
PreAuthorize pre = (PreAuthorize) m.getAnnotation(PreAuthorize.class);
String expr = pre.value(); 
```

我正在寻找类似的东西：

`List<HasAuthority> h = SpringXYZ.getHasAuthorities(expr);` 并从 h.get(0) 中获取“Customer.Get”字符串 ....

这可能吗？由于我需要在我的应用程序初始化期间进行此检索，因此当时没有可用的身份验证对象。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:33:15.540

像这样的 SPeL 表达式`hasAuthority('Customer.Get')`将在运行时进行评估。在加载时，所有框架必须知道的是 @PreAuthorize 已应用（以及相应的参数作为字符串）。所有工作都将在运行时由 SPeL 解析器/运行时环境完成。所以我认为没有帮助类可以帮助你。

如果您想避免解析，请尝试使用 @Secured 注释：

```
@Secured("ROLE_Customer.Get")
public Customer getCustomer(String name); 
```

`ROLE_`前缀可能会被删除（一些额外的配置）：

```
@Secured("Customer.Get")
public Customer getCustomer(String name); 
```

或 JSR-250 @RolesAllowed：

```
@RolesAllowed("Customer.Get")
public Customer getCustomer(String name); 
```

从安全的角度来看，它的灵活性会降低，但传递起来会更简单。

# ruby - 迭代几天，从 x 日期开始到结束日期

> ID：15590613
> 
> 赞同：40
> 
> 时间：2013-03-23T18:40:00.843
> 
> 标签：ruby, json, date

例如，我需要从 2013 年 1 月 1 日开始，并为每个日期“做一些事情”，从而为每个日期生成一个 JSON 文件。

我已经为一个日期制定了“做一些事情”部分，但我很难从一个日期开始并循环到另一个结束日期。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-03-23T18:43:14.913

您可以使用范围：

```
(Date.new(2012, 01, 01)..Date.new(2012, 01, 30)).each do |date|
  # Do stuff with date
end 
```

或（见@awendt 答案）

```
Date.new(2012, 01, 01).upto(Date.new(2012, 01, 30)) do |date|
  # Do stuff with date
end 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-23T18:47:00.197

你可以使用：

```
 first.upto(last) do |date| 
```

where`first`和`last`是 Date 对象。

例如，看看我在我[的一个项目中](https://github.com/awendt/recharge/blob/master/recharge.rb#L64)做了什么。

# c - 如何在服务器C编程中比较客户端发送的数据

> ID：15590616
> 
> 赞同：0
> 
> 时间：2013-03-23T18:40:18.350
> 
> 标签：c, strcmp

我想将选项从客户端发送到服务器。服务器必须进行一些比较并将字符串发送回客户端。我可以从客户端接收数据，但我的服务器在比较时崩溃（它通过“错误输入”到达 else 并结束连接）。有人可以告诉我我做错了什么吗？

> 不正确的输入关闭错误：错误的文件描述符
> 
> 程序以代码 01 退出。

服务器：

```
void
result(int sockfd)
{
    ssize_t     n;
    char        buf[MAXLINE];
    int         temp;
    time_t      ticks;
again:
    while ((n =read(sockfd, buf, MAXLINE)> 0))
    {
     temp = rand() % 22;
     if (buf=="A\n" || buf=="a\n")
     {
      snprintf(buf, sizeof(buf), "You option is number is -%i, time is %.24s\r\n", temp,ctime(&ticks));
      Writen(sockfd, buf, n);
     }
     if (buf=="B\n" || buf=="f\")
     {
      snprintf(buf, sizeof(buf), "You option is number is -%i, time is %.24s\r\n", temp,ctime(&ticks));
      Writen(sockfd, buf, n);
     }
     else
     {
       printf("Incorrect Input");
       Close(sockfd);
     }  
    }
    if (n < 0 && errno == EINTR)
    goto again;
    else if (n < 0)
        err_sys("read error");
}

int
main(int argc, char **argv)
{
    int         listenfd, connfd;
    socklen_t       len;
    struct sockaddr_in  servaddr, cliaddr;
    char            buff[MAXLINE];
        char            recvline[MAXLINE + 1];

    listenfd = Socket(AF_INET, SOCK_STREAM, 0);
    bzero(&servaddr, sizeof(servaddr));
    servaddr.sin_family      = AF_INET;
    servaddr.sin_addr.s_addr = htonl(INADDR_ANY);/*----------------------------------------------------*/
    servaddr.sin_port        = htons(5678); 

    Bind(listenfd, (SA *) &servaddr, sizeof(servaddr));
    Listen(listenfd, LISTENQ);
    printf("EDMTS is running on 129.128.4.80, listening on port 5678\n");
    printf("\n");
    printf("Waiting for incoming connections...Press Ctrl+C to end server\n");

    for ( ; ; )
         {
        len = sizeof(cliaddr);
        connfd = Accept(listenfd, (SA *) &cliaddr, &len);

        /*Client connects to server*/
        printf("\n");
        printf("Connection from %s, port %d\n",
               Inet_ntop(AF_INET, &cliaddr.sin_addr, buff, sizeof(buff)),
               ntohs(cliaddr.sin_port));

                result(connfd);
                Close(connfd);
        printf("Conexion cerrada...Esperando siguiente cliente\n");
        }
} 
```

客户

```
void
get_temp(FILE *fp, int sock)
{
    char    sendline[MAXLINE], recvline[MAXLINE];

    while (Fgets(sendline, MAXLINE, fp) != NULL) {

        Writen(sock, sendline, strlen(sendline));

        if (Readline(sock, recvline, MAXLINE) == 0)
            err_quit("Server Terminated Prematurely");

        Fputs(recvline, stdout);
    }
}

int
main(int argc, char **argv)
{
    int                 sockfd, n;
    socklen_t           len;
    char                recvline[MAXLINE + 1];
    struct sockaddr_in  servaddr, cliaddr;
    char  scale[2];

    if ( (sockfd = socket(AF_INET, SOCK_STREAM, 0)) < 0)
        err_sys("socket error");

    bzero(&servaddr, sizeof(servaddr));
    servaddr.sin_family = AF_INET;
    servaddr.sin_port   = htons(atoi(argv[2])); 
    if (inet_pton(AF_INET, argv[1], &servaddr.sin_addr) <= 0) 
        err_quit("inet_pton error for %s", argv[1]);

    printf("Connect...\n");
    if (connect(sockfd, (SA *) &servaddr, sizeof(servaddr)) < 0)
        err_sys("connect error");

    len = sizeof(cliaddr);
    Getsockname(sockfd, (SA *) &cliaddr, &len);
    printf("Local Address is: %s\n",
           Sock_ntop((SA *) &cliaddr, sizeof(cliaddr))); 

    printf("Enter option A or B): ");
    get_temp(stdin, sockfd);

    exit(0);
} 
```

当我运行调试器以找出我的变量时，我发现：

> 断点 1，servertest.c:236 236 printf("Random es %i\n",temp)处的结果 (sockfd=7 ); (gdb) p buf $1 = "A\n", '\0' , "\203\217��", '\0' , "h\206��h\206��\204\210���� ���#����\000\000\000\000�\206��������\020\207��#����", '\0' , "���������� ���\000\000\000\000\000\000\000\000�\017��", '\0' , "h\206��", '\0' , "\001\000\ 000\000\000\000\000\000�\207��", '\0' , "����\t\000\000\000#����\030��\000\000\ 000\000h\206��\003", '\0' , "\n\000\000\000g\206��", '\0' , " "... (gdb) p temp $2 = 17

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:50:05.753

首先，你不能使用 == 来比较 C 字符串（你会比较指针地址，并且 buf[0] 的地址和你的静态字符串“a\n”的地址肯定不相等。要比较字符串，使用[strncmp()](http://en.cppreference.com/w/cpp/string/byte/strncmp)。

发生崩溃是因为在调用 Close() 之后，在套接字文件描述符上再次调用 read() 函数。要消除崩溃，`break;`请在 Close() 之后放置一个，如下所示：

```
else
 {
   printf("Incorrect Input");
   Close(sockfd);
   break;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:49:11.863

此外，您要关闭套接字两次。首先在这里：

```
// void result(int sockfd)
else
{
    printf("Incorrect Input");
    Close(sockfd); // <<<
} 
```

那么这里：

```
// int main(int argc, char **argv)
Inet_ntop(AF_INET, &cliaddr.sin_addr, buff, sizeof(buff)),
ntohs(cliaddr.sin_port));

result(connfd);
Close(connfd); // <<<
printf("Conexion cerrada...Esperando siguiente cliente\n"); 
```

# multithreading - 并行运行多个 ANTLR4 词法分析器/解析器实例

> ID：15590618
> 
> 赞同：2
> 
> 时间：2013-03-23T18:40:30.630
> 
> 标签：multithreading, performance, antlr4

我正在使用 ANTLRv4 生成的解析器来处理具有多核机器上的大量文件。为了获得一些额外的速度，我想并行处理文件。

为了检查解析器性能是否受 CPU 限制，我将文件分成组，并使用独立进程解析它们，每个进程在专用 JVM 实例中运行相同的解析器。这大大提高了性能。

这鼓励我尝试使用多个线程而不是进程进行相同的尝试，但是没有成功。我创建了两个工作线程，每个线程都有自己的解析器、词法分析器和文件流实例。返回的结果是正确的，但是，使用两个线程实际上比使用一个线程花费的时间稍长。

为了确保我正确使用线程并且 JVM 安装没有问题，我暂时将解析代码替换为计算斐波那契序列的代码：在这种情况下，使用多个线程会提高性能。

分析这种行为，我发现当使用多个解析线程时，没有一个 CPU 达到高使用率。看起来线程正在争夺一些共享资源。

看了一下ANTLR源代码，在ParserATNSimulator.java中发现如下注释：

“同一个解析器的所有实例通过一个静态字段共享相同的决策 DFA。每个实例都有自己的 ATN 模拟器，但它们共享相同的 decisionToDFA 字段。它们还共享一个 PredictionContextCache 对象，确保所有 PredictionContext 对象在 DFA 之间共享状态。这有很大的不同。

我想知道对这些共享资源的同步访问是否会导致性能问题。如果是这样，是否有可能创建这些资源的唯一实例？或者是否有更简单的解决方案？

提前致谢！

费边

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T21:03:52.400

ANTLR 4 运行时的参考版本被设计为在使用多个解析器线程时是*安全*的（只要使用多个解析器实例）。我维护了一个 ANTLR 4 的替代（非官方）分支，它以不同的方式实现核心算法，以提高多线程场景中的性能。

这个分支在某些领域公开了一个稍微不同的 API，所以它不是 ANTLR 4 4.0 版本的直接替代品。

[https://github.com/sharwell/antlr4/tree/optimized](https://github.com/sharwell/antlr4/tree/optimized)

# java - java类不能覆盖组件的size()？

> ID：15590619
> 
> 赞同：0
> 
> 时间：2013-03-23T18:40:52.900
> 
> 标签：java, swing

我们不能从 Java 的 Component 类中重写 size() 吗？

这是一个简单的类，myPanels 是一个在构造函数中已初始化的 ArrayList。

```
 /**
 * Returns number of panels
 */
@Override
public int size(){
    return myPanels.size();
} 
```

错误读取：返回类型与 Component.size() 不兼容

* * *

* * *

**编辑 - 解决方案**

解决方案是选择不同的方法名称。使用了“size()”以外的东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T18:50:31.640

如果您想找到一种方法来可靠地更改 GUI 组件的大小，那么您应该覆盖`getPreferredSize()`而不是处理大小或`getSize()`. 这样，您的组件将与大多数布局管理器配合使用。

否则，如果您使用此方法返回它所拥有的 ArrayList 的大小，而不是尝试设置组件的可视化大小，则为您的类提供一个方法来执行此操作，但不要将其命名`getSize()` 为混淆其他编码人员和编译器。而是命名它`getMyPanelSize()`或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:43:58.503

假设您正在覆盖 java.awt.Component.size()

A: 自 Java 1.1 起已弃用，请改用 getSize()。

B：无论哪种方式，它都必须返回一个 Dimension

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T18:45:01.870

size() 必须返回 Dimension，自 1.1 起已弃用

我想你想覆盖 getSize() 吗？

> 在 Java 5.0 之前，当您覆盖一个方法时，参数和返回类型必须完全匹配。在 Java 5.0 中，它引入了一种称为协变返回类型的新工具。您可以覆盖具有相同签名的方法，但返回返回对象的子类。换句话说，子类中的方法可以返回一个对象，该对象的类型是该方法返回的类型的子类，在超类中具有相同的签名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T18:45:33.913

`size()`Component的方法返回一个类型的对象`Dimension`——这意味着你不能返回一个 int。

一种方法是将方法命名为其他名称，例如`panelsSize()`. 另一种是返回一个`Dimension`.

# git - 拉工作，推不工作 1und1 git 服务

> ID：15590621
> 
> 赞同：0
> 
> 时间：2013-03-23T18:41:02.413
> 
> 标签：git

我正在为他们提供的 GIT 使用 1und1.de 服务。现在我正在设置它，并使用命令 git pull ssh://.........

但是当我尝试 git push ssh://...... 我收到了很多错误：

```
remote: error: refusing to update checked out branch: refs/heads/master
remote: error: by default, updating the current branch in a non-bare repository
remote: error: is denied, because it will make the index and work tree incosistent

Auto packing the repository for optimum performance.remote: error: with what you pushed, and will require 'git  reset --hard' to match

remote: error: the work tree to HEAD.
remote: error:
remote: error: You can set 'receive.denyCurrentBranch' Configuration variable to
remote: error: 'ignore' or 'warn' in the remote repository to allow pushing into
remote: error: its current branch; however, this is not recommended unless you arranged to update its work tree to match waht you pushed in some other way.

remote: error: to sqelch this message and still keep the default behaviour, set
remote: error: receive.denyCurrentBranch' configuration variable to 'refuse'.
! [remote_rejected] master -> master (branch is currently checked out)
error: failed to push some refs to 'ssh://........' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:10:09.420

当您设置要推送到的存储库时，请将其设置为`bare`存储库：

```
git init --bare 
```

虽然在技术上可以推送到带有工作目录的 repo，但这太让人头疼了，在这种情况下，你甚至不想要那个。

只需将 repo 重新创建为一个裸仓库或从中创建一个裸仓库 ( `git clone --bare /path/to/repo`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T19:10:40.450

有两种类型的 Git 存储库。通常调用一个*裸*`foo.git`存储库并且没有工作树，只有 Git 的内部文件。*非裸*存储库是一棵工作树（即包含所有文件的目录），其中还包含一个名为`.git`. 正如错误消息所解释的，推入非裸存储库通常是一个坏主意，因为当你这样做时，工作树对存储库来说已经过时了。

当您托管一个供人们拉取和推入的存储库时，您几乎总是想要一个裸存储库。在这种情况下，您似乎创建了一个非裸存储库。由于您没有提供有关如何创建存储库的任何详细信息，因此我无法告诉您您做错了什么，但您可以通过以下两种方式之一创建一个裸存储库：

1.  从要创建存储库的目录中，发出`git clone --bare path/to/original.git`. 这会将源代码克隆到`original.git`您所在目录中的裸存储库。
2.  从要创建存储库的目录中，发出`git init --bare foo.git`. `foo.git`这将在您所在的目录中创建一个空的裸存储库。

你可以做更多的事情，但它们是最容易做对的。在现有存储库中发布`git config --set core.bare false`将使 Git 从那时起认为它是一个裸存储库，但是您必须自己删除工作树，并且您可能应该将存储库从 重命名`.git`为`foo.git`.

# c - 发布与调试中的 malloc (VC 2012)

> ID：15590622
> 
> 赞同：3
> 
> 时间：2013-03-23T18:41:03.697
> 
> 标签：c, malloc

`malloc`我写了一个快速而肮脏的程序，通过重复调用来泄漏内存。我注意到当我在调试配置中（在 VS 2012 中）运行我的程序时，我的程序正确地消耗了千兆字节的内存并一直运行直到页面文件已满（Windows 任务管理器报告高工作集大小）。但是，当我在发布模式下运行程序时，我的程序的工作集大小仍然很小，但提交大小继续增长。磁盘抖动或页面错误也明显减少。

MSDN 文档指出，在 Debug 模式下，`malloc`映射到`_malloc_dbg`，但文档还指出，两者都在堆上分配内存，只`_malloc_dbg`为调试信息分配额外的内存 - 没有提到不同的堆行为（即为什么它不以发布模式显示在私有工作集中）。

求大神告知，怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T18:42:22.937

提交虚拟内存页面时，在访问该页面之前[不会分配物理内存](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa366887%28v=vs.85%29.aspx)。

调试 malloc 用已知模式填充新分配的内存，而 release malloc 不初始化它。

初始化导致调试时需要比发布时更多的物理 RAM 页（以及更多的抖动）。

如果您要真正触摸分配内存的每一页，我希望两个构建之间的大部分差异都会消失。

# vb.net - vb.net：是否可以将 FreeImage.dll 导入 vb.net？

> ID：15590623
> 
> 赞同：1
> 
> 时间：2013-03-23T18:41:04.043
> 
> 标签：vb.net, dll, dllimport, tga

我需要从 vb 读取\写入 tga 文件，我找到了 TargaImage.dll，不错的库，但它只允许读取 tga。我找到了 FreeImage，试图在 vb 中导入它，但它说：

`FreeImage.dll could not be added. Please make sure that the file is accessible, and that it is a valid assembly or COM component.`

我想我必须使用，但绝对什么都不知道。帮助请:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:02:40.593

从分发的工作方式来看，您有两个选择：

`<DllImport>`首先，您可以使用属性直接调用 DLL 中的函数。这将需要大量学习如何调用非托管 DLL、传递正确的值等。这就是我建议第二种选择的原因。

第二个选项是，您可以使用分发中包含的 .NET Wrapper 项目。如果您使用支持多种编程语言的 Visual Studio 版本，只需将包装器项目添加到您的解决方案并从需要使用它的项目中引用包装器项目。

如果您使用的是 Visual Studio Express，您将无法将 C# 项目添加到 VB 解决方案中。我建议下载 C# Express，编译包装器项目，然后将编译后的 DLL 添加到您的 VB.Net 项目中。

# java - 当 Java 中的小数位数为零时截断 BigDecimal 的小数部分

> ID：15590624
> 
> 赞同：2
> 
> 时间：2013-03-23T18:41:05.277
> 
> 标签：java, bigdecimal

当它的比例为零时，我需要删除一个`BigDecimal`值的小数部分。例如，

```
BigDecimal value = new BigDecimal("12.00").setScale(2, RoundingMode.HALF_UP); 
```

它会分配`12.00`. 我希望它只在这种情况下分配`12`给。`value`

* * *

```
BigDecimal value = new BigDecimal("12.000000").setScale(2, RoundingMode.HALF_UP); 
```

应该分配`12`，

* * *

```
BigDecimal value = new BigDecimal("12.0001").setScale(2, RoundingMode.HALF_UP); 
```

应该分配`12`.

* * *

```
BigDecimal value = new BigDecimal("12.0051").setScale(2, RoundingMode.HALF_UP); 
```

应该分配`12.01`

* * *

```
BigDecimal value = new BigDecimal("00.000").setScale(2, RoundingMode.HALF_UP); 
```

应该分配`0`.

* * *

```
BigDecimal value = new BigDecimal("12.3456").setScale(2, RoundingMode.HALF_UP); 
```

应该分配`12.35`和类似的。这可能吗？最好的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T00:00:37.373

对于从那里的交联：[https ://codereview.stackexchange.com/questions/24299/is-this-the-way-of-truncating-the-fractional-part-of-a-bigdecimal-when-its-scale](https://codereview.stackexchange.com/questions/24299/is-this-the-way-of-truncating-the-fractional-part-of-a-bigdecimal-when-its-scale)

> 这可能吗？最好的方法是什么？

大概`stripTrailingZeros()`。

要检查您的测试：

```
public static void main(final String[] args) {
    check(truncate("12.000000"), "12");
    check(truncate("12.0001"), "12");
    check(truncate("12.0051"), "12.01");
    check(truncate("12.99"), "12.99");
    check(truncate("12.999"), "13");
    check(truncate("12.3456"), "12.35");
    System.out.println("if we see this message without exceptions, everything is ok");
}

private static BigDecimal truncate(final String text) {
    BigDecimal bigDecimal = new BigDecimal(text);
    if (bigDecimal.scale() > 2)
        bigDecimal = new BigDecimal(text).setScale(2, RoundingMode.HALF_UP);
    return bigDecimal.stripTrailingZeros();
}

private static void check(final BigDecimal bigDecimal, final String string) {
    if (!bigDecimal.toString().equals(string))
        throw new IllegalStateException("not equal: " + bigDecimal + " and " + string);

} 
```

输出：

> 如果我们无一例外地看到此消息，则一切正常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:58:07.123

我没有手动修改原始值，而是尝试应用一些条件，例如，

```
String text="123.008";
BigDecimal bigDecimal=new BigDecimal(text);

if(bigDecimal.scale()>2)
{
    bigDecimal=new BigDecimal(text).setScale(2, RoundingMode.HALF_UP);
}

if(bigDecimal.remainder(BigDecimal.ONE).compareTo(BigDecimal.ZERO)==0)
{
    bigDecimal=new BigDecimal(text).setScale(0, BigDecimal.ROUND_HALF_UP);
}

System.out.println("bigDecimal = "+bigDecimal); 
```

第一个`if`条件检查比例是否大于 2。如果是，则按指定执行舍入操作。

下一个`if`条件检查小数部分的值是否为零。如果是这样，则截断它。该方法认为两个值相等但比例不同（如 2.0 和 2.00）的 BigDecimal 对象是相等的[`compareTo()`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#compareTo%28java.math.BigDecimal%29)。因此，只要小数部分的值被评估为零，就满足条件。

否则，原始值保持不变（如果比例为 1 或 2）。

如果我遗漏了一些东西或者实施起来是错误的，那么请澄清一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T19:33:32.670

以下代码在正则表达式的帮助下执行您指定的操作和 的构造`BigDecimal`，这可能不是最有效的方法：

```
 BigDecimal value = new BigDecimal("12.0000").setScale(2, RoundingMode.HALF_UP);
    Pattern pattern = Pattern.compile("\\d+\\.(\\d)0");
    Matcher matcher = pattern.matcher(value.toString());
    if (matcher.find()) {
        if (matcher.group(1).equals("0")) 
            value = value.setScale(0);
        else
            value = value.setScale(1);
    } 
```

注意：这也使得 12.100 -> 12.1，我认为这是想要的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-13T13:39:01.140

试试这个：

```
new BigDecimal("12.3456").setScale(2, RoundingMode.FLOOR).stripTrailingZeros() 
```

# ruby-on-rails - Rails Deploy 使用 Elastic Beanstalk - 无法将数组转换为字符串

> ID：15590629
> 
> 赞同：0
> 
> 时间：2013-03-23T18:41:41.907
> 
> 标签：ruby-on-rails, amazon-ec2, passenger, amazon-elastic-beanstalk

我正在尝试使用 ElasticBeanstalk 在 EC2 上执行部署 rails 应用程序，但我遇到了一些麻烦。我能够按照亚马逊的教程（[http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Ruby_rails.html](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Ruby_rails.html)）在我的计算机上执行所需的每一个步骤。部署应用程序后，我的服务器上不断收到此错误乘客错误： ![乘客错误](../Images/a6f274d067642881a6013f649fea977c.png)

起初我觉得这可能与我的 config.yml 文件有点相关，所以，现在是这样的：

```
production:
  adapter: mysql2
  encoding: utf8
  database: <%= ENV['RDS_DB_NAME'] %>
  username: <%= ENV['RDS_USERNAME'] %>
  password: <%=['RDS_PASSWORD'] %>
  host: <%= ENV['RDS_HOSTNAME']%>
  port: <%= ENV['RDS_PORT'] %> 
```

关于为什么会发生的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T18:49:56.820

你的密码在我看来很像一个数组。我想你可能想要`password: <%= ENV['RDS_PASSWORD'] %>`

# javascript - 在javascript函数中如何修改会话变量

> ID：15590634
> 
> 赞同：1
> 
> 时间：2013-03-23T18:42:13.000
> 
> 标签：javascript, asp.net, html

我有以下代码。

在 asp.net 中，我设置了会话变量。然后将其传递给 javascript 进行修改。在 javascript 中，我可以读取会话变量值并在 TextBox1 中返回修改后的值。再次在 asp.net 中，我收到修改后的会话变量值并将其存储在会话变量中。

```
protected void Page_Load(object sender, EventArgs e)
{
    Session["MyTest"] = "abcd";

    String csname = "OnSubmitScript";
    Type cstype = this.GetType();

    // Get a ClientScriptManager reference from the Page class.
    ClientScriptManager cs = Page.ClientScript;

    // Check to see if the OnSubmit statement is already registered.
    if (!cs.IsOnSubmitStatementRegistered(cstype, csname))
    {
        string cstext = " document.getElementById(\"TextBox1\").value = getMyvalSession()  ; ";
        cs.RegisterOnSubmitStatement(cstype, csname, cstext);
    }

    if (TextBox1.Text.Equals("")) { }
    else {
          Session["MyTest"] = TextBox1.Text;
    }

}

   <html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">

<script language=javascript type="text/javascript">
    function getMyvalSession() {

         var txt = "efgh";
         var ff = '<%=Session["MyTest"] %>' + txt;
         return ff ;
    }
</script>

</head>
<body>

<form id="form1" runat="server">
<div>
    <asp:TextBox ID="TextBox1" runat="server"  AutoPostBack=true ></asp:TextBox>
 <input type="submit"  value="Submit" />
</div>
</form>
</body>
 </html> 
```

但我的目标是——在 javascript 函数本身中，我应该能够修改会话变量。而且我不想使用提交按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T06:42:49.667

使用 cookie 我可以保值。提交按钮也不是必需的。所以这段代码解决了我的目的。

```
 <script language="javascript" type="text/javascript">

function writeCookie(name,value,days) {
    var date, expires;
    if (days) {
        date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        expires = "; expires=" + date.toGMTString();
            }else{
        expires = "";
    }
    document.cookie = name + "=" + value + expires + "; path=/";
}

function readCookie(name) {
    var i, c, ca, nameEQ = name + "=";
    ca = document.cookie.split(';');
    for (i = 0; i < ca.length; i++) 
       {
            c = ca[i];
            while (c.charAt(0)==' ') {
                c = c.substring(1,c.length);
            }
            if (c.indexOf(nameEQ) == 0) {
                return c.substring(nameEQ.length,c.length);
            }
       }
    return '';
}

function restore(){
    var sId = readCookie('sessionId');
    document.getElementById("TextBox1").value = sId ;
}

function backup() {

      var sId = document.getElementById("TextBox1").value;
      writeCookie('sessionId', sId, 3);
}

function getMyvalSession() {
            var ff = "Loading Value";
           return ff;
}

function TextBox1_TextChanged() {
          backup();
}

</script>

<body onload="restore()">

    <form id="form1" runat="server">
    <div>

         <asp:TextBox ID="TextBox1" Name="TextBox1" runat="server" 
          AutoPostBack="True" onchange="TextBox1_TextChanged()" ></asp:TextBox>

    </div>
    </form>
</body>

    protected void Page_Load(object sender, EventArgs e)
    {
         Loading();
    }

    void Loading (){

        String csname = "OnSubmitScript";
        Type cstype = this.GetType();

        // Get a ClientScriptManager reference from the Page class.
        ClientScriptManager cs = Page.ClientScript;

        // Check to see if the OnSubmit statement is already registered.
        if (!cs.IsOnSubmitStatementRegistered(cstype, csname))
        {
            string cstext = " document.getElementById(\"TextBox1\").value = getMyvalSession()  ; ";
            cs.RegisterOnSubmitStatement(cstype, csname, cstext);
        }

       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T18:54:56.483

不，会话变量不能直接在客户端修改，并期望在服务器上更改。至少，必须发出 AJAX 请求以保持会话值。

根据您当前的代码，我不了解会话变量的重要性。您只是将文本框值附加到会话变量并提交表单。

因此，这将是直接声明，不需要客户端脚本，即

```
//page_load
{
   Session["Mytest"] = test;
}

//page_submit
{
   Session["Mytest"] += txtName.text;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T19:53:29.270

您可以在 asp.net 中定义 Web 方法或在 MVC 中定义操作，并通过传递的参数在其中设置会话

```
[HttpPost]
public bool SetSessionAction(string param)
{
   Session[sessionName] = param;
   return true;
} 
```

然后使用来自 jquery 的 $.ajax 或 $.post 调用方法或操作。

```
var paramValue = 'some data';
var targetUrl = "@Url.Action("SetSessionAction", "ControllerName" )";
        $.ajax({
            type: "POST",
            cache: false,
            dataType: "json",
            url: targetUrl,
            data: { param: paramValue },
            success: function (s) {
              alert('Set Session is: ' + s);
            }
        }); 
```

祝你好运

# python - QLineEdit 中的 PySide 文本不可编辑

> ID：15590636
> 
> 赞同：1
> 
> 时间：2013-03-23T18:42:44.267
> 
> 标签：python, pyqt, pyside

我为我的应用程序制作了一个类似控制台的程序。我有一个 QLineEdit，它占据了屏幕的整个高度，用户可以在其中输入命令。我想在 # 之后添加“提示”，例如 'hostname:current_dir>#'，用户将输入命令。我希望该提示不可编辑（他可以将其退格）但仍然让用户能够键入命令。有任何想法吗？或者有人可以建议一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:36:26.590

您可以将插槽连接到[`cursorPositionChanged ()`](http://doc-snapshot.qt-project.org/4.8/qlineedit.html#cursorPositionChanged)信号，检查其位置，然后使用 禁用编辑[`setEnabled(False)`](http://doc-snapshot.qt-project.org/4.8/qwidget.html#setEnabled)。您可能还想查看[`QTextEdit`](http://doc-snapshot.qt-project.org/4.8/qtextedit.html),[`QTextBrowser`](http://doc-snapshot.qt-project.org/4.8/qtextbrowser.html)或[`QPlainTextEdit`](http://doc-snapshot.qt-project.org/4.8/qplaintextedit.html), 在哪里可以使用该[`setReadOnly`](http://doc-snapshot.qt-project.org/4.8/qtextedit.html#setReadOnly)方法。

# c++ - 哪种数据类型对应于 C++ 中的 10^16？

> ID：15590637
> 
> 赞同：0
> 
> 时间：2013-03-23T18:42:58.590
> 
> 标签：c++, types, algebraic-data-types

我的 C++ 程序可能会在运行时创建一个值直到 10^16，我尝试使用“long long int”，但它没有用。哪种数据类型对应 10^16？

谢谢;

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T18:45:51.033

的最小保证最大值`long long int`是`2^63 - 1`，大约是`10^19`。应该没问题。可以肯定的是，使用`std::int_least64_t`来自 的类型`<cstdint>`。保证至少有 64 位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T18:45:33.797

小于64位所以.. long long 应该是好的..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T18:46:05.100

试试`int64_t`。那应该足够长了。但一定要输入一个整数文字：

```
int64_t n = 10000000000000000; 
```

如果你说`1E16`，那是一个`double`文字，转换为整数可能会产生意想不到的结果。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-10-19T13:55:49.433

Unsigned long long Int 最高可达 10^18！

# php - 我的 PHP 联系表不会发送

> ID：15590644
> 
> 赞同：1
> 
> 时间：2013-03-23T18:43:36.793
> 
> 标签：php, javascript, html, forms, contact

这似乎确实是一个受欢迎的问题！首先，我真诚地为重复这个问题道歉。我已经尝试了在不同问题中使用的几种修复方法，但还没有找到任何可以解决我的问题的方法。

我创建了一个网站，基本上想从联系表中向我发送查询。我将尝试定义我的问题： 1\. 我期待出现一条错误消息，上面写着“名称是必填字段”或类似内容，但事实并非如此。2\. 当按下提交时，页面将我带到一个空白页面，该页面将我定向到我服务器上的 mail_form.php。

值得注意的是，我的服务器是 123-reg，他们说他们确实允许用户脚本，但也提供了他们自己的使用示例——我试过这个没有用。

我不是 100% 确定你会要求看什么，所以我会提供我的 jsfiddle 和相关位：

我的 jsfiddle：http: [//jsfiddle.net/c9Sug/](http://jsfiddle.net/c9Sug/)

我的PHP：

```
<?php

    $yourEmail = "SARVAN14@HOTMAIL.COM"; // the email address you wish to receive these mails through
    $yourWebsite = "HTTP://WWW.SSWEBTEST.CO.UK"; // the name of your website
    $thanksPage = 'thankyou.html'; // URL to 'thanks for sending mail' page; leave empty to keep message on the same page 
    $maxPoints = 4; // max points a person can hit before it refuses to submit - recommend 4

$error_msg = null;
$result = null;

function isBot() {
    $bots = array("Indy", "Blaiz", "Java", "libwww-perl", "Python", "OutfoxBot", "User-Agent", "PycURL", "AlphaServer", "T8Abot", "Syntryx", "WinHttp", "WebBandit", "nicebot");

    $isBot = false;
    foreach ($bots as $bot)
    if (strpos($_SERVER['HTTP_USER_AGENT'], $bot) !== false)
        $isBot = true;

    if (empty($_SERVER['HTTP_USER_AGENT']) || $_SERVER['HTTP_USER_AGENT'] == " ")
        $isBot = true;

    exit("Bots not allowed.</p>");
}

if ($_SERVER['REQUEST_METHOD'] == "POST") {
    function clean($data) {
        $data = trim(stripslashes(strip_tags($data)));
        return $data;
    }

    $points = (int)0;

    $badwords = array("adult", "beastial", "bestial", "blowjob", "clit", "cum", "cunilingus", "cunillingus", "cunnilingus", "cunt", "ejaculate", "fag", "felatio", "fellatio", "fuck", "fuk", "fuks", "gangbang", "gangbanged", "gangbangs", "hotsex", "hardcode", "jism", "jiz", "orgasim", "orgasims", "orgasm", "orgasms", "phonesex", "phuk", "phuq", "porn", "pussies", "pussy", "spunk", "xxx", "viagra", "phentermine", "tramadol", "adipex", "advai", "alprazolam", "ambien", "ambian", "amoxicillin", "antivert", "blackjack", "backgammon", "texas", "holdem", "poker", "carisoprodol", "ciara", "ciprofloxacin", "debt", "dating", "porn", "link=", "voyeur");
    $exploits = array("content-type", "bcc:", "cc:", "document.cookie", "onclick", "onload", "javascript");

    foreach ($badwords as $word)
        if (strpos($_POST['comments'], $word) !== false)
            $points += 2;

    foreach ($exploits as $exploit)
        if (strpos($_POST['comments'], $exploit) !== false)
            $points += 2;

    if (strpos($_POST['comments'], "http://") !== false || strpos($_POST['comments'], "www.") !== false)
        $points += 2;
    if (isset($_POST['nojs']))
        $points += 1;
    if (preg_match("/(<.*>)/i", $_POST['comments']))
        $points += 2;
    if (strlen($_POST['name']) < 3)
        $points += 1;
    if (strlen($_POST['comments']) < 15 || strlen($_POST['comments'] > 1500))
        $points += 2;

    foreach ($_POST as $key => $value)
        $_POST[$key] = trim($value);

    if (empty($_POST['name']) || empty($_POST['email']) || empty($_POST['comments'])) {
        $error_msg .= "Name, e-mail and comments are required fields. \n";
    } elseif (strlen($_POST['name']) > 15) {
        $error_msg .= "The name field is limited at 15 characters. Your first name or nickname will do! \n";
    } elseif (!preg_match("/^[a-zA-Z-'\s]*$/", stripslashes($_POST['name']))) {
        $error_msg .= "The name field must not contain special characters. \n";
    } elseif (!preg_match('/^([a-z0-9])(([-a-z0-9._])*([a-z0-9]))*\@([a-z0-9])(([a-z0-9-])*([a-z0-9]))+' . '(\.([a-z0-9])([-a-z0-9_-])?([a-z0-9])+)+$/i', strtolower($_POST['email']))) {
        $error_msg .= "That is not a valid e-mail address. \n";
    } elseif (!empty($_POST['url']) && !preg_match('/^(http|https):\/\/(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)+)(:(\d+))?\/?/i', $_POST['url']))
        $error_msg .= "Invalid website url.";

    if ($error_msg == NULL && $points <= $maxPoints) {
        $subject = "Automatic Form Email";

        $message = "You received this e-mail message through your website: \n\n";
        foreach ($_POST as $key => $val) {
            $message .= ucwords($key) . ": " . clean($val) . "\r\n";
        }
        $message .= 'IP: '.$_SERVER['REMOTE_ADDR']."\r\n";
        $message .= 'Browser: '.$_SERVER['HTTP_USER_AGENT']."\r\n";
        $message .= 'Points: '.$points;

        if (strstr($_SERVER['SERVER_SOFTWARE'], "Win")) {
            $headers   = "From: $yourEmail \r\n";
            $headers  .= "Reply-To: {$_POST['email']}";
        } else {
            $headers   = "From: $yourWebsite <$yourEmail> \r\n";
            $headers  .= "Reply-To: {$_POST['email']}";
        }

        if (mail($yourEmail,$subject,$message,$headers)) {
            if (!empty($thanksPage)) {
                header("Location: $thanksPage");
                exit;
            } else {
                $result = 'Your mail was successfully sent.';
            }
        } else {
            $error_msg = 'Your mail could not be sent this time.';
        }
    } else {
        if (empty($error_msg))
            $error_msg = 'Your mail looks too much like spam, and could not be sent this time. ['.$points.']';
    }
}
function get_data($var) {
    if (isset($_POST[$var]))
        echo htmlspecialchars($_POST[$var]);
}
?> 
```

我的验证.css：

```
.forms li {
  overflow: hidden;
  list-style-type:none;
}

em.error {
  clear: both; display: block;
  font-size: 12px; font-style:italic; color: #f00;
  margin: -10px 0 10px 175px; width:200px;
}

input, textarea { padding:5px; } 
```

我的验证.js：

```
/*
 * Simple jQuery Form Validation Plugin
 * http://github.com/davist11/jQuery-Simple-Validate
 *
 * Copyright (c) 2010 Trevor Davis (http://trevordavis.net)
 * Dual licensed under the MIT and GPL licenses.
 * Uses the same license as jQuery, see:
 * http://jquery.org/license
 *
 * @version 0.1
 */
;(function(b){b.fn.simpleValidate=function(l){var g=b.extend({},b.fn.simpleValidate.defaults,l);return this.each(function(){var d=b(this),a=b.meta?b.extend({},g,d.data()):g,h=a.errorText.search(/{label}/);d.bind("submit",function(i){var f=false;d.find(a.errorElement+"."+a.errorClass).remove();d.find(":input."+a.inputErrorClass).removeClass(a.inputErrorClass);d.find(":input.required").each(function(){var e=b(this),j=b.trim(e.val()),k=e.siblings("label").text().replace(a.removeLabelChar,""),c="";if(j===
""){c=h>-1?(c=a.errorText.replace("{label}",k)):(c=a.errorText);f=true}else if(e.hasClass("email"))if(!/^([_a-z0-9-]+)(\.[_a-z0-9-]+)*@([a-z0-9-]+)(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/.test(j)){c=h>-1?(c=a.emailErrorText.replace("{label}",k)):(c=a.emailErrorText);f=true}c!==""&&e.addClass(a.inputErrorClass).after("<"+a.errorElement+' class="'+a.errorClass+'">'+c+"</"+a.errorElement+">")});if(f)i.preventDefault();else if(a.completeCallback!==""){a.completeCallback(d);a.ajaxRequest&&i.preventDefault()}})})};
b.fn.simpleValidate.defaults={errorClass:"error",errorText:"{label} is a required field.",emailErrorText:"Please enter a valid {label}",errorElement:"strong",removeLabelChar:"*",inputErrorClass:"",completeCallback:"",ajaxRequest:false}})(jQuery); 
```

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T21:01:35.560

不久前我做了一些非常相似的事情，并且对同样的问题感到非常沮丧。原来电子邮件被发送到我的垃圾邮件文件夹。您应该在那里查看您是否确实收到了电子邮件。即使所有相同的标题都被填充了，它们仍然会出现在那里。

# c - 多次调用一个函数

> ID：15590646
> 
> 赞同：0
> 
> 时间：2013-03-23T18:43:50.223
> 
> 标签：c, pic

所以我正在使用 CCS 编译器编写 PIC。我正在使用定时器中断，这个中断调用了一个函数，称为计时器，我写了两次。事情是这样的

```
void timer2_isr()
{
   j++;
   l++;
   z++;
   if (j==1)
   {
      timero=1;
      btndly=1;
      j=0;
   }
   user1= chronometer(x, l);
   user2= chronometer(pad.deger, z);
} 
```

此函数返回一个结构并以 2 个整数作为参数。当我只调用一次函数时，它工作正常。但是，在这种情况下，当我两次调用该函数时， user2 就等于 user1 的任何值，并且代码甚至无法正常工作。知道为什么吗？

```
chrono chronometer(int enable, int milicounter)
{
   chrono time;
   if(enable==1 && milicounter>=25)       // Eğer kronometre aktif haldeyse
      {
         milicounter=0;
         time.sec++;
         if(time.sec==60)
         {
            time.sec=0;
            time.min++;
         }
         if(time.min==60)
         {
            time.min=0;
            time.hour++;
         }
         if(time.hour==24)
            time.hour=0;
      }
   return time;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:59:29.317

似乎您开始使用 time 结构而不重置它的成员，导致意外结果..即使它以某种方式初始化..它不引用输入参数，所以显然结果将是相同的..

# extjs - 获取地理位置变量以放置在代理中

> ID：15590651
> 
> 赞同：0
> 
> 时间：2013-03-23T18:44:02.300
> 
> 标签：extjs, sencha-touch-2

我正在尝试将设备的当前位置添加到代理调用中。我已经添加了带有“+radius+”和“+values+”的变量。我使用了 Ext.util.Geolocation 并且可以在控制台中看到地理位置。我如何从中获得 lat 和 long 变量，以便我可以添加到代理中，例如 '+lat+' 和 '+lon+'

```
Ext.define('FirstApp.controller.History', {
extend:'Ext.app.Controller',

config:{
    refs:{
        main:'main',
        placesContainer:'placesContainer',
        placesList:'placesContainer places list',
        info:'info',
        review:'review',
        rss:'rss',
        favourites:'favourites',
        mapcontainer:'mapcontainer',
        visit: '#visit',
        radius: '#radius'
    },
    control:{
        'placesContainer places list':{
            itemtap:'recordDetailsNavigation'
        },
        'main':{
            activeitemchange:'recordTabChanged'
        },
         '#home': {
            // On the tap event, call onNewTap
            tap: 'onHomeTap'
        },
          '#info': {
            // On the tap event, call onNewTap
            tap: 'onInfoTap'
        }
        ,
          '#search': {
            // On the tap event, call onNewTap
            tap: 'onSearchTap'
        }
          ,
          '#leaveReview': {
            // On the tap event, call onNewTap
            tap: 'onReviewTap'
        }

    },
    routes: {
        'placesContainer': 'gotoPlacesContainer',
        'placesContainer/:id': 'gotoPlacesContainerDetails',
        'info': 'gotoInfo',
        'review': 'gotoReview',
         'rss': 'gotoRss',
        'favourites': 'gotoFavourites',
        'mapcontainer': 'gotoMapContainer'
    }
     },
     recordDetailsNavigation:function (list, index, target, record) {
    console.log("recordDetailsNavigation");
    this.getApplication().getHistory().add(Ext.create('Ext.app.Action', {
        url:'placesContainer/' + record.get('id')
    }),true);
    },
    recordTabChanged:function(tab,value, oldValue){
    console.log("recordTabChanged "+value.xtype);
    this.getApplication().getHistory().add(Ext.create('Ext.app.Action', {
        url:value.xtype
    }),true);
     },

gotoPlacesContainer:function(){
    console.log('Goto PlacesContainer');
    this.getMain().setActiveItem(0);
    var items = this.getPlacesContainer().getItems();
    console.log("PlacesContainer has "+items.length+" children")
    if(items.length>1){
        this.getPlacesContainer().pop();
    }

},

gotoReview:function(){
    console.log('Goto Review');
    this.getMain().setActiveItem(1);
     Reviews.load();
},

gotoMapContainer:function(){
    console.log('Goto MapContainer');
    this.getMain().setActiveItem(2);
},

gotoPlacesContainerDetails:function(id){
    console.log('Goto PlacesContainer Details for id '+id);

    this.gotoPlacesContainer();
    this.getPlacesList().refresh();
    this.getPlacesList().on('refresh',function(){
        var store = Ext.getStore('Places');
        var index = store.find('id',id);
        var record = store.getAt(index)
        this.getPlacesContainer().push({
            xtype:'details',
            title:record.data.name,
            data:record.data
        })
        this.getApplication().getHistory().add(Ext.create('Ext.app.Action', {
            url:'placesContainer/' + record.get('id')
        }),true);
    },this);

},

  gotoInfo:function(){
    console.log('Goto Info');
    this.getMain().setActiveItem(3);
},

    gotoRss:function(){
    console.log('Goto Rss');
    this.getMain().setActiveItem(4);
},

gotoFavourites:function(){
    console.log('Goto Favourites');
    this.getMain().setActiveItem(5);
},

 onHomeTap: function() {

    Ext.Viewport.setActiveItem(Ext.create('FirstApp.view.Home'));
},

 onReviewTap: function() {

    Ext.Viewport.setActiveItem(Ext.create('FirstApp.view.CreateReview'));
},

  onInfoTap: function() {
    Ext.Viewport.setActiveItem(Ext.create('FirstApp.view.Info'));
},

  onSearchTap: function() {

    Ext.Viewport.setActiveItem(Ext.create('FirstApp.view.Main'));

    var values = this.getVisit().getValue();
     var radius = this.getRadius().getValue() * 1000;

    console.log(values);
    console.log(radius);

    var proxy = {
    type:'ajax',
    id:'myPlaceProxy',
    url:'https://maps.googleapis.com/maps/api/place/search/json?    location=52.247983,-7.141113&radius='+radius+'&types='+values+'&name=&sensor=false&key=',
    reader:{
        type:'json',
        rootProperty:'results'
    }
    }

   var geo = new Ext.util.Geolocation({
    autoUpdate: false,
    allowHighAccuracy: true,
    listeners: {
    locationupdate: function(geo) {
       lat = geo.getLatitude();
       lon = geo.getLongitude();
       var proxy = Ext.getCmp('myPlaceProxy');
       proxy.setUrl('https://maps.googleapis.com/maps/api/place/search/json?location='+lat+','+lon+'&radius='+radius+'&types='+values+'&name=&sensor=false&key=AIzaSyAAStZvDJ_5ENODEdSCanLWgJBG6p6eXBQ');
       console.log(proxy);
       Ext.StoreMgr.get('Places').setProxy(proxy);
       Ext.StoreMgr.get('Places').load();    
    }
    }
   });

  geo.updateLocation();
  }

});

Ext.define('FirstApp.store.Places',{
extend:'Ext.data.Store',

config:{

    autoLoad:false,
    model:'FirstApp.model.Place',
    proxy:{

    }
}
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:33:46.530

首先将 id 提供给您的代理，以便我们可以随时通过 id 访问它

```
var proxy = {
        type:'ajax',
        id:'myPlaceProxy',
        url:'https://maps.googleapis.com/maps/api/place/search/json?location=52.247983,-7.141113&radius='+radius+'&types='+values+'&name=&sensor=false&key=',
        reader:{
            type:'json',
            rootProperty:'results'
        }
    } 
```

然后在您的地理位置的 locationupdate 事件中访问代理

```
var geo = new Ext.util.Geolocation({
    autoUpdate: true,
    allowHighAccuracy: true,
    listeners: {
        locationupdate: function(geo) {
           lat = geo.getLatitude();
           lon = geo.getLongitude();
           var proxy = Ext.getCmp('myPlaceProxy');
           proxy.setUrl('https://maps.googleapis.com/maps/api/place/search/json?location='+lat+','+lon+'&radius='+radius+'&types='+values+'&name=&sensor=false&key='');
           console.log(proxy);
           Ext.StoreMgr.get('Places').setProxy(proxy);
           Ext.StoreMgr.get('Places').load();    
        }
    }
}); 
```

然后随时通过调用此命令触发您的地理位置的 locationupdate 事件

```
geo.updateLocation(); 
```

**编辑：**

但我强烈建议不要总是创建 var geo 你只需要调用这个 geo.updateLocation(); 一旦你在全球范围内创建它，你就可以使用它，这样你就可以更好地管理它

试试这个：

```
Ext.define('FirstApp.store.Places',{
extend:'Ext.data.Store',
id: 'myPlaces',
config:{

    autoLoad:false,
    model:'FirstApp.model.Place',
    proxy:{
        type:'ajax',
        url:'https://maps.googleapis.com/maps/api/place/search/json?    location=52.247983,-7.141113&radius='+radius+'&types='+values+'&name=&sensor=false&key=AIzaSyAAStZvDJ_5ENODEdSCanLWgJBG6p6eXBQ',
        reader:{
        type:'json',
        rootProperty:'results'
    }
}
}); 
```

之后，您可以将点击事件中的 url 设置为

```
onSearchTap: function() {

    Ext.Viewport.setActiveItem(Ext.create('FirstApp.view.Main'));

    var values = this.getVisit().getValue();
     var radius = this.getRadius().getValue() * 1000;

    console.log(values);
    console.log(radius);    

   var geo = new Ext.util.Geolocation({
    autoUpdate: false,
    allowHighAccuracy: true,
    listeners: {
    locationupdate: function(geo) {
       lat = geo.getLatitude();
       lon = geo.getLongitude();
       Ext.StoreMgr.get('Places').getProxy().setUrl('https://maps.googleapis.com/maps/api/place/search/json?location='+lat+','+lon+'&radius='+radius+'&types='+values+'&name=&sensor=false&key='');
       Ext.StoreMgr.get('Places').load();    
    }
    }
   });

  geo.updateLocation();
  } 
```

# windows-phone-7 - XAML 控件填充与其他控件重叠

> ID：15590653
> 
> 赞同：1
> 
> 时间：2013-03-23T18:44:18.790
> 
> 标签：windows-phone-7, xaml

我正在做一个 Windows 手机应用程序，我有一个 6 x 6 网格的复选框，它们必须专门调整大小以与背景图像对齐。我可以得到正确的内容大小，但是控件的整个大小太大了。我正在使用默认的控件模板，并且我尝试设置填充以更改内容和控件外边距之间的填充，但它没有改变。

```
<CheckBox x:Name="chkc1r1" Content="" HorizontalAlignment="Left" Margin="42,24,0,0" 
            VerticalAlignment="Top" Height="58" Width="42" Tap="chkc1r1_Tap" 
            BorderThickness="0" UseLayoutRounding="True" Padding="-10"/> 
```

我在这里想念什么？

经过一番挖掘，我发现我要找的属性是 touch overhang 属性，有没有人改变过这个属性？一个很老的帖子说它可以在 App.xaml 中完成，但没有说如何。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:55:46.683

> 有人有想法么？

为您的复选框指定您自己的控件模板。在 Blend 中，右键单击一个复选框，“编辑模板/编辑副本”，保存。然后在 Visual Studio 中编辑模板，替换`"{StaticResource PhoneTouchTargetOverhang}"`为例如`"0"`.

# html - 如何根据另一个 div 的高度动态调整一个 div 中的 4 个图像的大小？

> ID：15590654
> 
> 赞同：0
> 
> 时间：2013-03-23T18:44:19.230
> 
> 标签：html, css, responsive-design

我有一个网格，其中一个 div 占 30% 左右，另外一个占 70%。在 30% 的 div 中，我有 4 张图像垂直堆叠。在 70% 的 div 中，我有内容。我怎样才能动态地调整和裁剪 4 个图像的大小，使它们等于 70% 内容 div 的高度。我知道我可以手动调整图像大小，但我希望它们在添加或删除内容时自动调整。此外，设计是响应式的。这是一个jsfiddle：

[http://jsfiddle.net/fETtm/](http://jsfiddle.net/fETtm/)

这是我的 HTML：

```
<section>
    <div id="inner-content" class="wrap">
        <aside class="fourcol first">
            <img src="https://www.slooh.com/images/signup/m42_png_sm.png">
            <img src="https://www.slooh.com/images/signup/m42_png_sm.png">
            <img src="https://www.slooh.com/images/signup/m42_png_sm.png">
            <img src="https://www.slooh.com/images/signup/m42_png_sm.png">
        </aside>

        <article class="eightcol">
            <h3>H3 Title</h3>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </article>
    </div>
</section> 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:01:13.637

`overflow: hidden`将剪切它应用的元素之外的任何东西（这里是`.wrap`你的容器）。

演示：http: [//jsfiddle.net/fETtm/1/](http://jsfiddle.net/fETtm/1/)

通过从流 ( `position: absolute`) 中删除图像，只有右列仍在流中，并将定义其容器的大小。现在将不会显示此框之外的任何图像。
由于左列已从流中删除，您的文本现在占据了其容器的整个宽度，因此它需要`padding-left`（与图像宽度相同的值）。

**HTML：**和你的一样

**CSS：**

```
.wrap {
    position: relative;
    overflow: hidden;
    outline: 1px dashed purple;
    max-width: 1140px;
    width: 96%;
    margin: 0 auto;
}

.fourcol {
    width: 31.491712705%;
    position: absolute;

}

.eightcol {
    width: 65.74585634900001%;
    position: relative;
    float: left;
    margin-left: 2.762430939%;
    padding-left: 31.491712705%;
}

.first {
    margin-left: 0;
} 
```

# iphone - 如何在 iOS 上使用基于地理的推送通知？

> ID：15590655
> 
> 赞同：24
> 
> 时间：2013-03-23T18:44:26.653
> 
> 标签：iphone, ios, geolocation, push-notification, apple-push-notifications

当应用程序被杀死（不是在后台）时，是否可以在 iOS 上使用基于地理的推送通知？

我有兴趣构建一个应用程序，用户将在其中选择地图上的位置，然后如果他/她例如靠近该区域，则会触发基于本地地理的推送通知。

然而，这个“想法”是否可能？GPS 是否可以在应用程序被杀死并运行并在到位时通知用户时运行并比较坐标？是否有关于我可以阅读的主题的任何类型的教程/文章/更多信息？

我在网上阅读的大部分信息更像是实施的一般想法，但没有任何具体的内容。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-23T22:08:06.200

要在应用程序未运行（即先前已终止）时跟踪用户的位置，有两个选项：

1.  来自“跟踪用户位置”下的[iOS 应用程序编程指南：](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW24)

    > 对于不需要高精度位置数据的应用，强烈建议使用重大变化位置服务。使用此服务，仅当用户的位置发生重大变化时才会生成位置更新；因此，它非常适合社交应用程序或为用户提供非关键、位置相关信息的应用程序。如果应用程序在发生更新时被挂起，系统会在后台将其唤醒以处理更新。**如果应用程序启动此服务然后终止，系统会在新位置可用时自动重新启动应用程序**。此服务在 iOS 4 及更高版本中可用，并且仅在包含蜂窝无线电的设备上可用。

    但是，根据[CLLocationManager 类参考](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)，它不太准确，更新也不频繁：

    > 注意：只要设备从之前的通知移动 500 米或更远，应用程序就会收到通知。它不应期望通知的频率超过每五分钟一次。如果设备能够从网络检索数据，则位置管理器更有可能及时传递通知。

2.  [区域监控](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW13)以类似的方式工作 - 包括在终止后重新启动应用程序 - 但精度更高（取决于 Wifi 网络和手机信号塔的可用性）：

    > 具体的阈值距离由硬件和当前可用的定位技术决定。例如，如果禁用 Wi-Fi，则区域监控的准确性会大大降低。但是，出于测试目的，您可以假设最小距离约为 200 米。

    另一个区域监控考虑是（根据[CLLocationManager 类参考](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)）区域进入和退出通知可能仅在跨越区域边界后 3-5 分钟左右收到。

    根据实际需要，区域监控可用于获取“粗略”位置，然后当用户在特定区域内时，在位置管理器上启动更准确的基于GPS的服务。当用户离开感兴趣的区域时，关闭GPS服务以节省电池并再次恢复到粗略的位置监控服务（即区域监控）。这是一个基本的实现：

    **SomeViewController.m**：

    ```
    ...
    @interface SomeViewController () <CLLocationManagerDelegate>

    @property (nonatomic, strong) CLLocationManager *locationManager;
    @property (nonatomic, strong) CLRegion *someRegion;

    @end

    @implementation SomeViewController

    - (void)viewDidLoad
    {
        [super viewDidLoad];

        self.locationManager = [[CLLocationManager alloc] init];

        CLLocationDistance radius = 10; // 10 metre sensitivity
        self.someRegion = [[CLRegion alloc] initCircularRegionWithCenter:someCoordinates radius:radius identifier:@"Smithtown Dry Cleaners"];

        self.locationManager.delegate = self;
        [self.locationManager startMonitoringForRegion:self.someRegion];

        self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;
        self.locationManager.distanceFilter = 10;
        [self.locationManager startUpdatingLocation];
    }

    - (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region
    {
        [self.locationManager startUpdatingLocation];
    }

    - (void)locationManager:(CLLocationManager *)manager didExitRegion:(CLRegion *)region
    {
        [self.locationManager stopUpdatingLocation];
    }

    // Delegate method from the CLLocationManagerDelegate protocol.
    - (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
    {
        CLLocation* location = [locations lastObject];

        // If the user's current location is not within the region anymore, stop updating
        if ([self.someRegion containsCoordinate:location.coordinate] == NO) {
            [self.locationManager stopUpdatingLocation];
        }

        NSString *locationData = [NSString stringWithFormat:@"latitude %+.6f, longitude %+.6f\n",
                                  location.coordinate.latitude,
                                  location.coordinate.longitude];
        NSLog(@"%@", locationData);

        UILocalNotification *localNotification = [[UILocalNotification alloc] init];
        localNotification.alertBody = locationData;
        localNotification.alertAction = @"Location data received";
        localNotification.hasAction = YES;
        [[UIApplication sharedApplication] presentLocalNotificationNow:localNotification];
    } 
    ```

    请记住将适当的条目添加到应用程序的 plist 文件中，以便应用程序将在后台运行并访问适当的资源：

    **MyApp-Info.plist**：

    ```
    <key>UIBackgroundModes</key>
    <array>
            ...
            <string>location</string>
    </array>
    <key>UIRequiredDeviceCapabilities</key>
    <array>
            ...
            <string>location-services</string>
            <string>gps</string>
    </array> 
    ```

    *以上代码假设使用iOS6和ARC*

# performance - 将使用 S3 的包转换为 S4 类，性能会下降吗？

> ID：15590656
> 
> 赞同：11
> 
> 时间：2013-03-23T18:44:27.183
> 
> 标签：performance, r, oop, s4

我有一个 R 包，它当前使用`S3`类系统，有两个不同的类和几种用于通用 S3 函数的方法，如`plot`,`logLik`和`update`（用于模型公式更新）。`if/else`由于没有基于 in 中的两个参数的继承或分派，我的代码在所有有效性检查和结构中变得更加复杂`S3`，我开始考虑将我的包转换为`S4`. `S3`但后来我开始阅读vs的优缺点`S4`，我不再那么确定了。我发现了关于 S3 与 S4 效率问题的[R-bloggers 博客文章](http://www.r-bloggers.com/s3-vs-s4-efficiency-issues/)，就像 5 年前一样，我现在测试了同样的事情：

```
library(microbenchmark)
setClass("MyClass", representation(x="numeric"))
microbenchmark(structure(list(x=rep(1, 10^7)), class="MyS3Class"),
               new("MyClass", x=rep(1, 10^7)) )
Unit: milliseconds
                                                   expr
 structure(list(x = rep(1, 10^7)), class = "MyS3Class")
                       new("MyClass", x = rep(1, 10^7))
       min       lq   median       uq      max neval
 148.75049 152.3811 155.2263 159.8090 323.5678   100
  75.15198 123.4804 129.6588 131.5031 241.8913   100 
```

所以在这个简单的例子中，`S4`实际上要快一点。然后我阅读了关于使用vs的[SO 问题](https://stackoverflow.com/questions/3602154/when-does-it-pay-off-to-use-s4-methods-in-r-programming)，这非常有利于. 特别是@joshua-ulrich 的回答让我怀疑，因为它说`S3``S4``S3``S4`

> 任何插槽更改都需要完整的对象副本

如果考虑到我在优化模型的对数似然时在每次迭代中更新对象的情况，那感觉就像一个大问题。经过一番谷歌搜索后，我发现[John Chambers 发布](http://r.789695.n4.nabble.com/Small-changes-to-big-objects-1-td4654566.html)了关于这个问题的帖子，这似乎在 R 3.0.0 中发生了变化。

因此，尽管我觉得`S4`在我的代码中使用类来提高清晰度（例如从主模型类继承的更多类）以及有效性检查等是有益的，但我现在想知道在以下方面是否值得所有工作表现？`S3`那么，在性能方面，和之间是否存在真正的性能差异`S4`？我还应该考虑其他一些性能问题吗？或者甚至可以对这个问题说些什么？

编辑：正如@DWin 和@g-grothendieck 所建议的，上述基准测试没有考虑现有对象的插槽被更改的情况。所以这是另一个与真实应用程序更相关的基准（示例中的函数可以是模型中某些元素的 get/set 函数，在最大化对数似然时会改变）：

```
objS3<-structure(list(x=rep(1, 10^3), z=matrix(0,10,10), y=matrix(0,10,10)),
                 class="MyS3Class")
fnS3<-function(obj,a){
  obj$y<-a
  obj
}

setClass("MyClass", representation(x="numeric",z="matrix",y="matrix"))
objS4<-new("MyClass", x=rep(1, 10^3),z=matrix(0,10,10),y=matrix(0,10,10))
fnS4<-function(obj,a){ 
  obj@y<-a
  obj
}

a<-matrix(1:100,10,10)
microbenchmark(fnS3(objS3,a),fnS4(objS4,a))
Unit: microseconds
           expr    min     lq median     uq    max neval
 fnS3(objS3, a)  6.531  7.464  7.932  9.331 26.591   100
 fnS4(objS4, a) 21.459 22.393 23.325 23.792 73.708   100 
```

基准测试是在 64 位 Windows 7 上的 R 2.15.2 上执行的。所以这里`S4`显然更慢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T20:47:48.577

*   首先，您可以轻松地为 S4 类提供 S3 方法：

    ```
    > extract <- function (x, ...) x@x
    > setGeneric ("extr4", def=function (x, ...){})
    [1] "extr4"
    > setMethod ("extr4", signature= "MyClass", definition=extract)
    [1] "extr4"
    > `[.MyClass` <- extract
    > `[.MyS3Class` <- function (x, ...) x$x
    > microbenchmark (objS3[], objS4 [], extr4 (objS4), extract (objS4))
    Unit: nanoseconds
               expr   min      lq  median      uq   max neval
            objS3[]  6775  7264.5  7578.5  8312.0 39531   100
            objS4[]  5797  6705.5  7124.0  7404.0 13550   100
       extr4(objS4) 20534 21512.0 22106.0 22664.5 54268   100
     extract(objS4)   908  1188.0  1328.0  1467.0 11804   100 
    ```

* * *

编辑：由于哈德利的评论，将实验更改为`plot`：

```
> `plot.MyClass` <- extract
> `plot.MyS3Class` <- function (x, ...) x$x
> microbenchmark (plot (objS3), plot (objS4), extr4 (objS4), extract (objS4))
Unit: nanoseconds
           expr   min      lq median      uq     max neval
    plot(objS3) 28915 30172.0  30591 30975.5 1887824   100
    plot(objS4) 25353 26121.0  26471 26960.0  411508   100
   extr4(objS4) 20395 21372.5  22001 22385.5   31359   100
 extract(objS4)   979  1328.0   1398  1677.0    3982   100 
```

对于`plot`我得到的 S4 方法：

```
 plot(objS4) 19835 20428.5 21336.5 22175.0 58876   100 
```

所以是的，`[`有一个异常快速的调度机制（这很好，因为我认为提取和相应的替换函数是最常调用的方法之一。但是不，S4 调度并不比 S3 调度慢。

* * *

这里 S4 对象上的 S3 方法与 S3 对象上的 S3 方法一样快。但是，没有调度的调用仍然更快。

*   有一些东西比 S3 工作得更好，例如`as.matrix`或`as.data.frame`
    出于某种原因，将这些定义为 S3 意味着例如`lm (formula, objS4)`可以开箱即用。这不适用于`as.data.frame`被定义为 S4 方法。

*   `debug`调用S3 方法也更方便。

*   其他一些东西不适用于 S3，例如在第二个参数上调度。

*   性能是否会明显下降显然取决于你的类，即你有什么样的结构、对象有多大以及方法被调用的频率。几微秒的方法调度与毫秒甚至秒的计算无关。但是当一个函数被调用数十亿次时，μs 确实很重要。

*   导致某些经常调用的函数的性能显着下降的一件事`[`是 S4 验证（`validObject`在跳过此步骤。

*   如果您有大量数据并且引用调用会帮助您提高性能，您可能需要查看引用类。到目前为止，我从未真正与他们合作过，所以我无法对此发表评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T21:44:40.030

If you are concerned about performance, benchmark it. If you *really* need multiple inheritance or multiple dispatch, use S4\. Otherwise use S3.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T19:37:52.773

（这非常接近“可能引发意见的问题”的边界，但相信这是一个重要的问题，您已经为此提供了代码和数据以及有用的引用，所以我希望没有投票结束。）

我承认我从来没有真正理解过 S4 编程模型。然而，Chambers 的帖子说的是`@<-`，即插槽分配，被重新实现为原语而不是作为闭包，因此当一个组件被更改时，它不需要对象的完整副本。因此，早期的情况将在 R 3.0.0 beta 中改变。在我的机器上（一台运行 R 3.0.0 beta 的 5 岁 MacPro），相对差异更大。但是，我认为这不一定是一个好的测试，因为它不会更改具有多个插槽的命名对象的现有副本。

```
res <-microbenchmark(structure(list(x=rep(1, 10^7)), class="MyS3Class"),
                new("MyClass", x=rep(1, 10^7)) )
summary(res)[ ,"median"]
#[1] 145.0541 103.4064 
```

我认为你应该选择 S4，因为你的大脑结构比我的更灵活，而且有很多非常聪明的人，除了 John Chambers 之外，还有很多非常聪明的人，Douglas Bates 和 Martin Maechler，他们使用 S4 方法处理需要大量处理的包. Matrix 和 lme4 包都对关键功能使用 S4 方法。

# numpy - 从不规则网格到规则网格的插值

> ID：15590662
> 
> 赞同：1
> 
> 时间：2013-03-23T18:44:50.763
> 
> 标签：numpy, scipy, time-series

我有一些不规则采样的一维数据（时间序列数据）；即，非恒定采样率。我想将这些数据转换为定期采样（统一采样率）的时间序列。我尝试使用线性插值来实现这一点；但是，当样本之间的时间差异很大时，这不是很有效。这并不奇怪。我还尝试了一些*特别*的方法，这些方法也不是很有效。

我看过几篇关于在不规则网格上使用**匹配追踪进行插值的论文；**但是，我不清楚如何使用这种方法在常规网格上获取样本（至少目前还不清楚）。

对于从不规则网格到规则网格（一维数据）的插值算法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:02:20.887

如果您想精确拟合数据点，请运行 [scipy.interpolate.UnivariateSpline](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.UnivariateSpline.html) （如果不清楚 ，`s=0`
请进一步询问）。

# javascript - 通过javascript访问另一台服务器的表单操作

> ID：15590666
> 
> 赞同：0
> 
> 时间：2013-03-23T18:45:11.923
> 
> 标签：javascript, jquery, html, forms

我有一个简单的 html 表单，其中包含 2 个字段和提交按钮。[点击提交按钮后，我的数据通过名为“ http://www.123contactform.com](http://www.123contactform.com) ”的查询字符串向另一台服务器传输，该字符串加载到我页面上的 iframe 中，并且 iframe 中的字段预先填充了即将到来的信息从查询字符串。这就是我所做的一切。

现在我想要什么，当点击 iframe 的提交按钮时，页面转移到另一个页面，我想限制导航并用 javascript 定义我自己的 url。

谁能帮帮我，我怎么得到这个？？？

问候， 阿马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:58:56.847

你能显示一些代码吗？

## 和

*从逻辑上讲，您想要的是这样*的-您在 example.com 上有一个 iframe，并且该 iframe 加载了 gmail 的登录页面，您想更改`gmail's`登录表单的提交 url 吗？

# 不可能

# ios - iPad 上的 UIView 动画不考虑方向

> ID：15590673
> 
> 赞同：1
> 
> 时间：2013-03-23T18:45:40.290
> 
> 标签：ios, uiviewanimation

当用户点击按钮时，我试图将我的主视图控制器视图向右滑动。我使用这段代码：

```
 [UIView  animateWithDuration:1
                          delay:0
                        options:UIViewAnimationOptionBeginFromCurrentState
                     animations:^(void){ self.view.left = 300; }
                     completion:nil]; 
```

结果是 view.frame.origin.x 没有考虑设备方向。如果屏幕是横向左侧，则设置 x = 300 不会将视图向右移动，而是向下移动。我可以做一个大的 switch 语句来根据方向更改相关参数，但我觉得我以前做过，而不必诉诸这种恶作剧。我错过了一些明显的东西吗？

我试过没有选择，没有区别。

我在 UIView 上使用了一个类别，这样我就不必明确地输入整个 CGRectMake。如果我使用完整的 CGRectMake 语句，结果是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T01:19:22.353

我遇到过同样的问题。动画视图的边界而不是视图的框架（我假设这是类别正在做的事情）对我有用。

# java - 在 Java 中将字符数组转换为列表

> ID：15590675
> 
> 赞同：35
> 
> 时间：2013-03-23T18:45:52.353
> 
> 标签：java, list, stringbuffer

谁能帮助我并告诉我如何将`char`数组转换为列表，反之亦然。我正在尝试编写一个程序，用户在其中输入一个字符串（例如`"Mike is good"`），并且在输出中，每个空格都被替换为`"%20"`（Ie `"Mike%20is%20good"`）。虽然这可以通过多种方式完成，但由于在链表中插入和删除需要 O(1) 时间，我想用链表尝试它。我正在寻找将`char`数组转换为列表、更新列表然后将其转换回来的方法。

```
public class apples
{
   public static void main(String args[])
   {
      Scanner input = new Scanner(System.in);
      StringBuffer sb = new StringBuffer(input.nextLine());

      String  s = sb.toString();
      char[] c = s.toCharArray();
      //LinkedList<char> l = new LinkedList<char>(Arrays.asList(c));
      /* giving error "Syntax error on token " char",
         Dimensions expected after this token"*/
    }
} 
```

所以在这个程序中，用户正在输入字符串，我将其存储在 a`StringBuffer`中，我首先将其转换为字符串，然后转换为`char`数组，但我无法从中获取`l`列表`s`。

如果有人能告诉我将`char`数组转换为列表的正确方法，我将不胜感激，反之亦然。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2015-12-02T23:45:18.243

在 Java 8 及更高版本中，您可以使用[`String`' 方法`chars()`](https://docs.oracle.com/javase/8/docs/api/java/lang/CharSequence.html#chars--)：

```
myString.chars().mapToObj(c -> (char) c).collect(Collectors.toList()); 
```

如果您需要转换`char[]`为`List<Character>`，您可以`String`先从中创建一个，然后应用上述解决方案。虽然它不会非常可读和漂亮，但它会很短。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-03-23T19:07:29.940

因为 char 是原始类型，所以标准`Arrays.asList(char[])`不起作用。它将`List<char[]>`代替`List<Character>`... 所以剩下的是迭代数组，并用该数组中的数据填充新列表：

```
 public static void main(String[] args) {
    String s = "asdasdasda";
    char[] chars = s.toCharArray();

    //      List<Character> list = Arrays.asList(chars); // this does not compile,
    List<char[]> asList = Arrays.asList(chars); // because this DOES compile.

    List<Character> listC = new ArrayList<Character>();
    for (char c : chars) {
        listC.add(c);
    }
} 
```

这就是将 List 转换回数组的方式：

```
 Character[] array = listC.toArray(new Character[listC.size()]); 
```

有趣的是它为什么`List<char[]> asList = Arrays.asList(chars);`这样做：`asList`可以采用 array 或**vararg**。在这种情况下`char [] chars`被认为是**单值可变参数** `char[]`！所以你也可以写类似

`List<char[]> asList = Arrays.asList(chars, new char[1]);`:)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-10-21T15:03:22.717

使用循环的另一种方法是使用[Guava](https://code.google.com/p/guava-libraries/)的[Chars.asList()](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/primitives/Chars.html#asList-char...-)方法。然后将字符串转换为字符的 LinkedList 的代码就是：

```
LinkedList<Character> characterList = new LinkedList<Character>(Chars.asList(string.toCharArray())); 
```

或者，以更番石榴的方式：

```
LinkedList<Character> characterList = Lists.newLinkedList(Chars.asList(string.toCharArray())); 
```

Guava 库包含很多好东西，因此值得将其包含在您的项目中。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-06-22T15:23:26.293

现在我将把这个答案作为另一个选项发布给那些不允许使用任何库但只允许使用 java 8 的开发人员:)

```
char[] myCharArray = { 'H', 'e', 'l', 'l', 'o', '-', 'X', 'o', 'c', 'e' };

Stream<Character> myStreamOfCharacters = IntStream
          .range(0, myCharArray.length)
          .mapToObj(i -> myCharArray[i]);

List<Character> myListOfCharacters = myStreamOfCharacters.collect(Collectors.toList());

myListOfCharacters.forEach(System.out::println); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-23T19:18:09.740

您不能在 Java 中将泛型与原始类型一起使用，[为什么？](https://stackoverflow.com/questions/2721546/why-dont-generics-support-primitive-types)

如果您真的想转换为 List 并返回数组，那么 dantuch 的方法是正确的。

但是，如果您只想进行替换，则有一些方法（即[replaceAll](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)`java.lang.String`）可以为您完成

```
private static String replaceWhitespaces(String string, String replacement) {
    return string != null ? string.replaceAll("\\s", replacement) : null;
} 
```

你可以像这样使用它：

```
StringBuffer s = new StringBuffer("Mike is good");
System.out.println(replaceWhitespaces(s.toString(), "%20")); 
```

输出：

```
Mike%20is%20good 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-21T04:23:16.477

**所有操作都可以在 java 8 或更高版本中完成：**

**从给定字符串到字符数组**

```
char[] characterArray =      myString.toCharArray(); 
```

**从给定的字符串中获取字符列表**

```
 ArrayList<Character> characterList 
= (ArrayList<Character>) myString.chars().mapToObj(c -> (char)c).collect(Collectors.toList()); 
```

**从给定的字符串中获取字符集** 注意：集合只存储唯一值。因此，如果您只想从字符串中获取唯一字符，则可以使用它。

```
 HashSet<Character> abc = 
(HashSet<Character>) given.chars().mapToObj(c -> (char)c).collect(Collectors.toSet()); 
```

**从给定字符串中获取特定范围内** 的字符：获取 unicode 值大于 118 的字符。 [https://unicode-table.com/en/#basic-latin](https://unicode-table.com/en/#basic-latin)

字符的 ASCII 码值 * az - 97 - 122 * AZ - 65 - 90

```
 given.chars().filter(a -> a > 118).mapToObj(c -> (char)c).forEach(a -> System.out.println(a)); 
```

它将返回字符：w,x,v,z

您可以在过滤器中使用 ascii 值来玩字符。您可以对过滤器中的字符进行操作，然后您可以将它们收集到列表中或根据需要进行设置

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-25T02:11:31.410

我想最简单的方法是通过简单地迭代 char 数组并将每个元素添加到字符的 ArrayList，以下列方式：

```
public ArrayList<Character> wordToList () {
    char[] brokenStr = "testing".toCharArray();
    ArrayList<Character> result = new ArrayList<Character>();
    for (char ch : brokenStr) {
        result.add(ch);
    }
    return result;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-30T09:48:13.187

列表 strList = Stream.of(s.toCharArray()).map(String::valueOf).collect(Collectors.toList());

# javascript - 如何使用脚本标签下的 url 标签

> ID：15590678
> 
> 赞同：2
> 
> 时间：2013-03-23T18:46:04.553
> 
> 标签：javascript, python, django

我不得不稍微改变我的模板来做一些 URL 重定向，所以我使用：

```
<script>
    if window.location="www.somesite.com"{
        window.location="www.someothersite.com{% url app.views.some_view argument %}"
     }
</script> 
```

但我不断收到错误`NoReverseMatch: Reverse for 'app.views.some_view' with arguments 'xxx' and keyword arguments '{}' not found.`

我正在使用`{% load url from future%}`，并且我确信该特定链接在没有 Javascript 的情况下可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T22:00:27.873

`app.views.some_view`问题是您的视图方法和模板中的调用之间的参数数量不匹配。

如果您可以粘贴您的视图方法的签名，那将很有帮助。您编写模板代码的方式表明，视图方法签名应该是这样的：

```
def some_view(request, arg):
    pass 
```

如果情况已经如此，请检查`argument`模板中的真正价值。只需将其打印为测试，如下所示：

```
HERE: {{ argument }} END 
```

仅从帖子中就不清楚`argument`模板中是变量还是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T19:04:59.793

我认为您需要在视图名称周围加上引号：

```
{% url "app.views.some_view" argument %} 
```

这是从[Django 1.5](https://docs.djangoproject.com/en/dev/releases/1.5/#overview)开始的新语法。

# mysql - 两个表上的复杂 MySQL 查询

> ID：15590684
> 
> 赞同：1
> 
> 时间：2013-03-23T18:46:22.517
> 
> 标签：mysql

我有一张名为“offers”的表，其中包含“offer_id”、“offer”和“hid”列。主键是“offer_id”。

我有另一个名为“dates”的表，其中包含“hid”、“date”、“offer_id”等列。主键是“日期”和“隐藏”。“offer_id”的相同值可以存在于许多行中（或根本没有）。

如何编写一个 mySQL 查询来查找“offers”中存在但“dates”中不存在的 offer_ids？

我试过

```
SELECT offers.offer_id FROM offers JOIN dates ON offers.offer_id NOT IN dates 
```

但这没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T18:55:54.650

对于较大的表，此变体将比`NOT IN`: 外连接到`dates`然后过滤 where `dates.offer_id`is null 快得多：

```
SELECT offers.offer_id
FROM offers
LEFT OUTER JOIN dates ON offers.offer_id = dates.offer_id
WHERE dates.offer_id IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T18:49:49.020

我认为这应该对你有用。

```
SELECT offers.offer_id FROM offers where offer_id NOT IN (select offer_id from dates) 
```

# python - Python 3.3 readlines 截断文本文件

> ID：15590686
> 
> 赞同：0
> 
> 时间：2013-03-23T18:46:47.083
> 
> 标签：python, python-3.3

我正在使用 PyDev for Eclipse 使用 Python 3.3，好吧，这是我的代码：

```
countdata = open(countfilename, 'r')
countlist = countdata.readlines()
print(len(countlist))
genecountline = wordlist(countlist[-1])
print(genecountline) 
```

`countfilename`指的是一个相当长的 7847 行文本文件，它是使用我的机器学习课程中讲师给我的脚本从文本文件生成的（我确实必须使用 2to3 将所述脚本转换为 Python 3）。

`wordlist`是我构建的一个简单函数，它接受一行文本并将其中的单词作为列表返回。

我将整个文件拉到一个行列表中，以便我可以随意引用特定行进行计算。无论我是使用 readlines 一次性读取它们还是遍历文件并将这些行一一添加到列表中，如下所示：

```
countdata = open(countfilename, 'r')
countlist = []
for line in countdata:
    countlist.append(line) 
```

没关系。无论哪种方式，我都会`print(len(countlist))`给出大约`7630`，我说大约是因为有时它会低至`7628`或高至`7633`。返回的特定行`countlist[-1]`总是不同的（文件是使用生成器对象构建的，如前所述，我的讲师构建了该脚本，但我不完全确定它是如何工作的）。

```
genecountline = wordlist(countlist[-1])
print(genecountline) 
```

我输入只是为了看看 python 认为文件的最后一行是什么。当我在 textpad 中打开文件时，它返回的行实际上是`len(countlist)`. 换句话说，它似乎忽略了最后一个大约。我的文件有 210 行。所以我的问题是如何解决这个问题，以及如何防止它再次这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:21:28.977

如果您不是从静态文本文件中读取，而是从每次运行程序时生成的文件中读取，则可能是您没有关闭该文件（在这种情况下，可能没有将所有内容写入其中）。如果你不想关闭它，你可以刷新它（.flush() 方法）。

您应该发布生成文件的代码。

# http - 如何使用 Tuckey URL 重写从一个 url 重定向到另一个？

> ID：15590689
> 
> 赞同：2
> 
> 时间：2013-03-23T18:47:23.373
> 
> 标签：http, url, url-rewriting, tuckey-urlrewrite-filter

我有两个域名，例如`www.1st-domain.com`，`www.2nd-domain.com` 我想编写一个 Tuckey URL 重写规则来重定向任何请求`www.1st-domain.com`到`www.2nd-domain.com`

例如，如果有人点击`www.1st-domain.com/sample`它应该被重定向到`www.2nd-domain.com/sample`

我正在尝试类似的东西：

```
<rule>
        <name>Domain Name Check</name>
        <condition name="host" operator="equal">www.1st-domain.com</condition>
        <from>^(.*)</from>
        <to type="redirect">http://www.2nd-domain.com$1</to>
    </rule> 
```

它不工作。我究竟做错了什么？请指导。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T18:47:01.120

我很高兴承认我犯了一个错误并且重定向确实有效：

```
<rule>
        <name>Domain Name Check</name>
        <condition name="host" operator="equal">www.1st-domain.com</condition>
        <from>^(.*)</from>
        <to type="redirect">http://www.2nd-domain.com$1</to>
    </rule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-15T21:16:33.517

不适合我；不确定您使用的是 urlrewrite 版本 3 还是 4；无论如何 - 查看 4.0.3 文档（[https://tukey.org/urlrewrite/manual/4.0/index.html#configuration](https://tuckey.org/urlrewrite/manual/4.0/index.html#configuration)）并稍微调整您的答案；这最终对我有用（tomcat 9.5）

```
<rule>
        <name>Domain Name Check v2</name>
        <condition type="server-name" operator="equal">^(www.1st-domain.com)$</condition>
        <from>^(.*)</from>
        <to type="permanent-redirect">https://www.2nd-domain.com$1</to>
    </rule> 
```

笔记; 主要变化是删除 name="host" 属性并将其替换为 type="server-name"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-16T11:03:37.350

或 4.0 中的另一种方式这将特定于特定规则，而不是适用于每个规则

```
<to qsappend="true"></to> 
```

# php - Codeigniter 对象和数组

> ID：15590694
> 
> 赞同：1
> 
> 时间：2013-03-23T18:47:44.500
> 
> 标签：php, arrays, codeigniter, object

从数据库返回内容时，默认情况下 Codeigniter 方法返回对象（即`$this->db->result()`vs `$this->db->result_array()`，对于 row/row_array 也是如此）。

我是纯粹出于兴趣而不是受过教育的开发人员，所以如果这是一个愚蠢的问题，请原谅，但它返回有什么关系，以及为什么偏好 - 基于命名约定 - 似乎更喜欢对象而不是数组，我什么时候可以告诉 php 开发人员喜欢数组？

我做了一些背景阅读，似乎使用 PHP 5+，数组与对象的执行差异可以忽略不计。到目前为止，我遇到的唯一区别是`->`与`[]`.

这个问题可能不是 Codeigniter 特有的，但这是我的参考框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:25:51.387

我不确定 api 为何采用这种方式背后的历史，但如果你获取对象，你可以让 CI db lib 用数据实例化自定义类，就像各种原生 PHP`*_fetch_object()`一样。

```
 $query = $this->db->query("SELECT * FROM users;");
 foreach ($query->result('User') as $row) {
     // $row is not an instance of User
 } 
```

虽然默认`stdObject`s 并不太有用，但我认为`ArrayObject`这是一个更好的解决方案，因为它们同时支持`->`和`[]`访问，但是 CI 来自 PHP4 时代，当时还没有。

# android - 摩托罗拉 RAZR 上的 Android 手电筒

> ID：15590696
> 
> 赞同：0
> 
> 时间：2013-03-23T18:47:53.777
> 
> 标签：android, motorola, flashlight

下面的代码在 Wildfire S 上运行良好，但在摩托罗拉 RAZR 上运行良好，它是如何实现的以及如何修复它。我看到很少有关于这个的帖子，但没有答案。

```
 if (camera==null)
        camera=Camera.open();
    camera_parameters = camera.getParameters();
    flash_mode = camera_parameters.getFlashMode();
    camera_parameters.setFlashMode(Camera.Parameters.FLASH_MODE_TORCH);
    camera.setParameters(camera_parameters);

    the_button = (ToggleButton) findViewById(R.id.flashlightButton);
    if (the_button.isChecked()){
        camera.startPreview();
        the_button.setKeepScreenOn(true);

public void onToggleClicked(View v) {       
    if (((ToggleButton) v).isChecked()) {
        camera.setParameters(camera_parameters);
        camera.startPreview();
        v.setKeepScreenOn(true);
    } else {
        camera.stopPreview();
        v.setKeepScreenOn(false);
    }
}

    <uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.FLASHLIGHT" />
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.flash" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T15:53:08.380

无论出于何种原因，摩托罗拉 Razr 都要求您在访问与相机相关的任何内容时使用 SurfaceView。

```
 // Where CameraPreview is the class extending SurfaceView
    mPreview = new CameraPreview(this, mCamera);
    preview = (FrameLayout) findViewById(R.id.camera_preview);
    preview.addView(mPreview); 
```

上面的代码必须在您用来设置 Camera.Parameters 的活动中

以下是我的一个活动的代码片段，它将参数传递给相机并利用上面的代码创建一个 SurfaceView

```
public void setFocusMacro() {

    if (mCamera == null) {
        // Create an instance of Camera
        mCamera = Camera.open();
        mParams = mCamera.getParameters();
        }

    mParams = mCamera.getParameters();
    mParams.setFocusMode(Camera.Parameters.FOCUS_MODE_MACRO);
    mParams.setFlashMode(Camera.Parameters.FLASH_MODE_TORCH);
    mCamera.setParameters(mParams);
    } 
```

# javascript - 如何使用 browserify 获得缩小的输出？

> ID：15590702
> 
> 赞同：94
> 
> 时间：2013-03-23T18:48:18.247
> 
> 标签：javascript, node.js, browserify

刚开始使用[browserify](https://github.com/substack/node-browserify)，但我找不到如何让它溢出缩小输出的文档。

所以我看起来像：

```
$> browserify main.js > bundle.js --minified 
```

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2013-03-23T21:28:28.553

通过 uglifyjs 管道：

```
 browserify main.js | uglifyjs > bundle.js 
```

你可以像这样使用 npm 安装它：

```
 npm install -g uglify-js 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-05-19T21:48:49.963

从 3.38.x 开始，你可以使用我的[minifyify](https://www.npmjs.org/package/minifyify)插件来缩小你的包并且仍然有可用的源映射。这在其他解决方案中是不可能的——您能做的最好的事情就是映射回未压缩的包。缩小地图一直到您单独的源文件（是的，甚至到咖啡脚本！）

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-01-18T16:12:52.437

或者使用[uglify](https://github.com/hughsk/uglifyify)转换，它“在 Browserify 处理之前为您提供应用 Uglify 的“挤压”转换的好处，这意味着您可以删除条件要求的死代码路径。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-12-19T14:37:03.090

在花了几个小时研究如何构建新的构建过程之后，我认为其他人可能会从我最终做的事情中受益。我正在回答这个老问题，因为它在 Google 中似乎很高。

我的用例比 OP 要求的要复杂一些。我有三个构建场景：开发、测试、生产。由于大多数专业开发人员都会有相同的要求，我认为超出原始问题的范围是可以原谅的。

**在开发**中，每当 JavaScript 文件发生更改时，我都会使用 watchify 构建带有源映射的未压缩包。我不想要 uglify 步骤，因为我希望在我用 alt-tab 键对浏览器进行刷新之前完成构建，无论如何在开发过程中它没有任何好处。为此，我使用：

```
watchify app/index.js  --debug -o app/bundle.js -v 
```

**对于测试**，我想要与生产完全相同的代码（例如 uglified），但我也想要一个源映射。我通过以下方式实现了这一目标：

```
browserify app/index.js  -d | uglifyjs -cm -o app/bundle.js      --source-map "content=inline,filename='bundle.js',url='bundle.js.map'" 
```

**对于生产**，代码是用uglify压缩的，没有源图。

```
browserify app/index.js  | uglifyjs -cm > app/bundle.js 
```

**笔记：**

我在 Windows 7、MacOS High Sierra 和 Ubuntu 16.04 上使用了这些说明。

我已停止使用 minifyify，因为它不再维护。

也许有比我分享的更好的方法。我已经读过，显然可以通过在与 browserify 结合之前对所有源文件进行 uglifying 来获得更好的压缩。如果你有比我更多的时间花在这上面，你不妨调查一下。

如果您尚未安装 watchify、uglify-js 或 browserify，请使用 npm 安装它们：

```
npm install -g browserify
npm install -g watchify
npm install -g uglify-js 
```

如果您安装了旧版本，我建议您升级。特别是 uglify-js，因为他们对命令行参数进行了重大更改，这使 Google 中出现的大量信息无效。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-04-09T13:55:43.910

在保留源映射的同时不再需要使用插件来缩小：

```
browserify main.js --debug | uglifyjs --in-source-map inline --source-map-inline > bundle.js 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-08-17T11:48:00.600

我喜欢支持 ES6+ 和一些良好压缩的 terser [。](https://github.com/terser/terser)

```
browserify main.js | terser --compress --mangle > bundle.js 
```

全局安装：

```
 npm i -g terser 
```

# jquery - jQuery .css() 方法——是否可以更改默认像素单位？

> ID：15590703
> 
> 赞同：2
> 
> 时间：2013-03-23T18:48:22.000
> 
> 标签：jquery, html, css

我想使用以下代码为 div 添加一些高度：

```
 $('div').css("height", "+=50"); 
```

上面的代码将向 div 添加 50 个像素。如何使用 em 单位添加值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T18:49:07.827

您只需在数字后面添加格式，jquery 不会找出其余的。这行不通，jQuery 喜欢像素并且不会转换，所以`"+=50em"`不会削减它。

这是 ems 的修复，这是一个草率的修复，但它有效。

```
$("div").css("height", ($("div").height()+50)+"em"); 
```

示例：http: [//jsfiddle.net/npZCB/4/](http://jsfiddle.net/npZCB/4/)

> * `FrançoisWahl`：作为附加说明`.height()`，为您提供没有填充、边框和边距的高度。包括填充使用`.innerHeight()`，包括填充和边框使用`.outerHeight()`，以及包括填充边框和边距使用`.outerHeight(true)`。只是想我添加这个以防你需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T16:28:54.410

我使用的稍微清洁的修复程序！

```
function update_css(target_element, css_attribute, value, unit) {
    $(target_element).css(css_attribute, [value + unit]);
}; 
```

[小提琴](http://jsfiddle.net/npZCB/10/)

方括号很少使用，但请记住，当 jquery 不理解您要说的内容时，它们通常会派上用场！

# php - jQuery：通过 AJAX 获取 PHP 变量

> ID：15590706
> 
> 赞同：0
> 
> 时间：2013-03-23T18:48:55.470
> 
> 标签：php, javascript, jquery, ajax

我的问题相当简单，但不知何故，即使在谷歌上搜索，我也无法让它工作。我有一个我想在 javascript 中使用的 php 变量。我试图做类似的事情

```
var fullLink = <?php echo $_SESSION['fullLink']; ?>; 
```

但不，我收到“未捕获的语法错误：意外令牌”错误，所以我猜这是因为 php 标签或附近的某个地方。然后我在 AJAX 中尝试过，但后来我不断获得完整的 html。我尝试创建另一个文件只是为了测试并查看问题所在，但我能够获得变量，它说这是我的第一个有问题的文件，但不知道是什么。我很确定这是一个常见错误，但在谷歌上没有成功获得答案。

编辑 1：好吧，更直截了当，我正在尝试在我正在编码的博客上动态构建一个链接，以允许用户在 facebook 上分享帖子。不想使用 Facebook 的“喜欢”插件，而是使用共享 (sharer.php)，然后使用链接执行 window.open()。问题是用博客文章的标题、迷你描述和链接建立链接。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T18:50:52.270

你错过了`"`那里的接线员

```
var fullLink = "<?php echo $_SESSION['fullLink']; ?>";
  //-----------^------------------------------------^ here 
```

这会将完整链接打印为字符串，而 var fullLink 会将该值作为字符串...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T18:50:36.743

如果这是在 PHP 文件中，您只需要添加`"`运算符。

```
var fullLink = "<?php echo $_SESSION['fullLink']; ?>"; 
```

`$_SESSION['fullLink']`如果存在，那将起作用。

**更新**

您的代码中一定还有其他问题，我刚刚使用`fullLink`您的源示例和`window.open()`您提供的代码创建了一个测试脚本。它只适用于这些部分：

```
<script>
    var fullLink = "http://www.facebook.com/sharer.php?s=100&p[url]=localhost:8080/BetaFolioBlogOOP??/Blog/post/5-2e-post&p[title]=2e post&p[summary]= Voici mon deuxi&egrave;me post question de voir si le tout marche bien ! ";
    window.open(fullLink, "Facebook_share", "menubar=1,resizable=1,width=600,height=500");      
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T21:01:59.443

PHP：调用javascript函数

```
func($_SESSION['fullLink']); 
```

或更好：

```
if (isset($_SESSION['fullLink']))
{ func($_SESSION['fullLink']); } 
```

Javascript：

```
function func(link){

var fulllink = link;
...} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T19:03:35.630

尝试

```
var fullLink = <?php echo json_encode($_SESSION['fullLink']); ?>; 
```

# css - 底部边距不起作用

> ID：15590709
> 
> 赞同：0
> 
> 时间：2013-03-23T18:49:05.823
> 
> 标签：css, html, margin

我正在为我的世界服务器创建一个网站，我有一个居中的 div，只是反复打招呼，看看页面溢出时会发生什么。我将这个居中的 div 设置为顶部和底部的边距为 30px，但它只适用于顶部。我不确定为什么会这样，如果有人可以帮助我，那就太好了！

这是一个[工作小提琴](http://jsfiddle.net/PHNxC/)。

居中 div 的 CSS

```
#BodyInner {
    position:relative;
    width:965px;
    height:auto;
    min-height:100%;
    margin:30px auto;
    background-color:#FFF;
    border-radius:5px;
    border:1px solid #CCC;
    box-shadow:0 0 12px rgba(0, 0, 0, .1);
    -moz-box-shadow:0 0 12px rgba(0, 0, 0, .1);
    -ms-box-shadow:0 0 12px rgba(0, 0, 0, .1);
    -o-box-shadow:0 0 12px rgba(0, 0, 0, .1);
    -webkit-box-shadow:0 0 12px rgba(0, 0, 0, .1);
    word-wrap:break-word;   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T18:56:18.710

div#BodyInner 的边距应用于 div#Body - 它本身的高度比 div#BodyInner 小很多。删除`height:100%;`div#Body 并且您的代码将起作用。

# c# - C# 无法更改属性值并从线程修改活动

> ID：15590711
> 
> 赞同：0
> 
> 时间：2013-03-23T18:49:10.770
> 
> 标签：c#, multithreading, android-activity, attributes

我创建了一个应用程序来使用 at 命令发送短信，但我遇到了问题。我在 COM7 和 COM8 上连接了 3 个 gsm 调制解调器。

我的代码工作正常，但我希望如果短信发送处于“错误”状态，则将当前端口（例如：COM7）软更改为 COM8 ...

我的代码：

```
public clsWorker(SMSapplication app, SerialPort serialPort, SerialPort serialPort2, String urlChamp)
        {
            // Récupération du port principal
            this.port = serialPort;

            // Récupération du nom des ports
            this.port_name1 = serialPort.PortName;

            if (serialPort2.PortName == "" || serialPort2.PortName == null)
                this.port_name2 = serialPort.PortName;
            else
                this.port_name2 = serialPort2.PortName;

            // Récupération de l'url de check
            this.url = urlChamp;

            // Récupération de l'instance de la fenetre
            this.clsobjAPP = app;

            // On initialise le contenu du label avec le port actuel
            clsobjAPP.updateCurrentPort(this.port.PortName);

            //MessageBox.Show("Changement de port: " + this.port_name1 + " et " + this.port_name2);
        }

        public void StartThread()
        {
            t = new Thread(new ThreadStart(ThreadLoop));
            //clsobjSMS.setPinCode(this.port, "1234");
            t.Start();
        }

        // I want to change the port name is they is an error
        public void ChangePort()
        {

            if (this.port.PortName == this.port_name1)
            {
                // This don't work... Do you know why ??
                this.port.PortName = this.port_name2;
                MessageBox.Show("Change the current port to: " + this.port.PortName);
                clsobjAPP.updateCurrentPort("coucou1");
            }
            else if (this.port.PortName == this.port_name2)
            {
                // This don't work... Do you know why ??
                this.port.PortName = this.port_name1;
                MessageBox.Show("Change the current port to: " + this.port.PortName);
                clsobjAPP.updateCurrentPort("coucou2");
            }
            else
            {
                clsobjAPP.updateCurrentPort("erreur");
                MessageBox.Show("Erreur !");
            }

        }

        public void ThreadTimer()
        {

            t = new Thread(new ThreadStart(ThreadTimer));
            compareDate = DateTime.Now.AddMinutes(2);
            systemDate = DateTime.Now;

            while(true)
            {

                if (this.compareDate < DateTime.Now)
                {
                    this.StopThread();
                    this.systemDate = DateTime.Now;
                    this.compareDate = DateTime.Now.AddMinutes(2);
                    //MessageBox.Show("Launche every 2 minutes");

                }
                else
                {
                    if (!t.IsAlive)
                    {
                        this.StartThread();

                    }

                }
            }

        }

        public void ThreadLoop()
        {

            while (Thread.CurrentThread.IsAlive)
            {

                // Initialisation des variables:
                string destinataire_mobile = "";
                string destinataire_message = "";
                string id = "";
                string sms_envoye_le = "";
                string hash_envoi = "";
                string expediteur_ip = "";
                string lcHtml = "";

                Thread.Sleep(10000);

                try
                {

                    string lcUrl = this.url;
                   // "http://texto-sms-gratuit.com/android/etat_sms.php?etat=nok";
                    // *** Establish the request
                    HttpWebRequest loHttp = (HttpWebRequest)WebRequest.Create(lcUrl);

                    // *** Set properties
                    loHttp.Timeout = 6000;     // 10 secs
                    loHttp.UserAgent = "Serveur Texto-SMS-Gratuit.Com";

                    // *** Retrieve request info headers
                    HttpWebResponse loWebResponse = (HttpWebResponse)loHttp.GetResponse();

                    Encoding enc = Encoding.GetEncoding(1252);  // Windows default Code Page

                    StreamReader loResponseStream = new StreamReader(loWebResponse.GetResponseStream(), enc);

                    lcHtml = loResponseStream.ReadToEnd();

                    if (lcHtml == "null" || lcHtml.Length < 10 || lcHtml == "")
                        continue;

                    if (lcHtml == "<meta http-equiv=\"Refresh\" content=\"0\">")
                        continue;

                    JArray ja = JArray.Parse(lcHtml);

                    // Data extract of Json
                    id = ja[0]["id"].ToString();

                    // Mise en attente du msg
                    WebClient myWebClient = new WebClient();
                    myWebClient.DownloadString("http://site.com");

                    destinataire_mobile = ja[0]["destinataire_mobile"].ToString();
                    destinataire_message = ja[0]["destinataire_message"].ToString();
                    sms_envoye_le = ja[0]["sms_envoye_le"].ToString();
                    hash_envoi = ja[0]["hash_envoi"].ToString();
                    expediteur_ip = ja[0]["expediteur_ip"].ToString();

                    loWebResponse.Close();
                    loResponseStream.Close();

                    if (destinataire_mobile != "" && destinataire_message != "" && id != "")
                    {
                        if (destinataire_message.Length >= 159)
                            destinataire_message = destinataire_message.Substring(0, 159);

                        if (destinataire_mobile.Length >= 159)
                            destinataire_mobile = destinataire_mobile.Substring(0, 12);

                        if (destinataire_mobile[3].ToString() == "6" || destinataire_mobile[3].ToString() == "7")
                        {
                            if (clsobjSMS.sendMsg(this.port, destinataire_mobile, destinataire_message))
                            {
                                // Message sent
                                myWebClient.DownloadString("http://site.com/");
                                clsobjAPP.updateCountSMS("countSMSok");
                            }
                            else
                            {
                               // Message sent ERROR !!
                                myWebClient.DownloadString("http://site.com");
                                clsobjAPP.updateCountSMS("countSMSnok");

                                // This method don't work, and I don't know why ...?
                                this.ChangePort();

                            }
                        }
                    }

                }
                catch (Exception ex)
                {
                    //(ex.Message);

                }

            }
        }
    } 
```

非常非常非常感谢您的帮助！此致，

# php - 如何使用 Web 表单的 URL 参数

> ID：15590713
> 
> 赞同：1
> 
> 时间：2013-03-23T18:49:15.443
> 
> 标签：php, drupal, drupal-views, url-parameters, drupal-webform

使用 webform，我创建了一个包含几对相互关联的组件的表单。例如，文本字段类型的组件“名称”和标记类型的组件“名称”。目的是文本字段的提交将显示在标记字段中。

将为用户提供使用角色应该填写哪些文本区域以及他或她看到的标记字段。通过这种方式，我希望不同的用户（在这种情况下是学生）与单个用户（老师）进行通信。学生在 textarea 中提交的文本将显示为教师的只读文本。

在无与伦比的 Johan Falk 的帮助下， http: [//vimeo.com/18701843](http://vimeo.com/18701843)，我可以从 Web 表单提交数据中获取数据到 Views 中。通过在上下文过滤器上使用提交 id (sid)，我可以选择特定学生的提交并显示它。在“视图”的预览中，这可以正常工作。

我可以将上下文过滤器与用户（学生）选择的输入的提交 ID 一起使用。在预览视图中，这工作正常。然后我使用以下 php 代码将该块导入标记字段：

```
<? php
   $ block = module_invoke ('views', 'block_view', 'block_delta');
  print render ($ block ['content']);
?> 
```

我的问题从这里开始！

上面`print render ($ block ['content']);`的块显示为对所有用户（学生）提交的调查。但是，我想使用 url 参数来显示特定用户的单个提交，就像上面提到的视图中的预览一样。我已经搜索了一种在上面的 php 代码中添加过滤器的方法，但找不到解决方案。

有谁知道如何解决它？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T05:21:09.277

如果我正确理解您的问题，我相信您可以使用仅适用于 Views 的给定过滤器生成所需的块。

1.  尝试创建类型为**Webform submits**的新视图。(/admin/build/views/add)
2.  添加块显示
3.  添加关系**Webform submits: User**并确保它是必需的。
4.  添加过滤器**用户：当前是**，它应该使用您的关系（网络表单提交用户）。

这应该将块输出过滤为来自当前登录用户的提交。

# android - 如何构建打包在 Android Sources 中的 llvm？

> ID：15590714
> 
> 赞同：1
> 
> 时间：2013-03-23T18:49:19.280
> 
> 标签：android, llvm, llvm-3.0

我正在尝试构建打包在 android 源代码中的 llvm。

我正在运行 ubuntu 12.04，android src 版本为 4.0.4

llvm 位于 android-src/external/llvm/

我做了以下构建：

```
./configure
make 
```

并出现以下错误消息：

```
llvm[3]: Compiling Thumb2InstrInfo.cpp for Debug+Asserts build
ARMJITInfo.cpp:18:10: fatal error: 'ARMAddressingModes.h' file not found
#include "ARMAddressingModes.h"
    ^ 
```

我可以使用以下版本构建本地 llvm：3.2

我找不到 android llvm 的版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:51:44.980

通过从我的本地 llvm 安装中复制丢失的头文件“ARMAddressingModes.h”解决了这个问题。

# arrays - 数组中的 Perl 元素频率

> ID：15590718
> 
> 赞同：-3
> 
> 时间：2013-03-23T18:50:00.953
> 
> 标签：arrays, perl, element, frequency

我有一个短篇小说的 txt 输入文件。将 txt 文件读入程序后，如何找到每个术语的频率？例如，单词“the”出现了多少次，单词“I”出现了多少次，除了数组中的每个唯一项。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T19:06:05.603

通常，您会在典型的分隔符（空格、标点符号等）上[拆分](http://perldoc.perl.org/functions/split.html)输入并遍历生成的单词数组，更新键值对的[哈希表](http://www.tizag.com/perlT/perlhashes.php)，其中键是单词，值是表示该词出现的频率或次数。考虑边缘情况，例如在处理以大写字母开头的单词时如何[处理](http://perldoc.perl.org/functions/lc.html)键，或者可能是更复杂的问题，例如不合理文本中的连字符。希望这个答案能帮助您搜索和思考您想要学习的 Perl 术语和一般概念。

# c - C: 用 case 切换以确定输出 msg 的类型（存储在 char 中）

> ID：15590723
> 
> 赞同：1
> 
> 时间：2013-03-23T18:50:23.977
> 
> 标签：c, char, switch-statement

我是一个新手，但我花了很多时间试图了解我在这里做错了什么。

我正在使用 Turbo C，有时我得到的输出消息实际上是 Borland Turbo C 文本的一部分，所以似乎文本没有存储在 char lossmsg..

```
void lose(int d) //Different messages for different deaths
{
  char *losemsg; //Lose message
  setcolor(4);
  settextstyle(0,0,1); //Set font size
switch(d)
{
case '1': losemsg="STOP HURTING THE WALL!"; //Hitting the wall
break;
case '2': losemsg="Like all great dictators, you've fallen...!"; //Falling
break;
case '3': losemsg="Oh well, sucks to be you...";
break;
case '4': losemsg="You've been killed by a spike, how sad..."; //Spike
break;
case '5': losemsg="You've been hit by something that defies gravity!";
break;
case '6': losemsg="There is no lifeguard, you've drowned!"; //Drowning
break;
}
outtextxy(100,150,losemsg);
delay(2000);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T18:55:23.563

代码看起来不错，除非输入值在`'1'`-之外`'6'`。在后一种情况下，代码的行为未定义（您正在显示未初始化指针指向的字符串）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:18:05.843

```
...
case '6': losemsg="There is no lifeguard, you've drowned!"; //Drowning
break;

default: /* If you enter not 1..6 then it simply ends wothout strange behaviour. */
break;
} 
```

您已经创建了一个名为*lostmsg*的指针。该指针必须指向/在某个变量上。

如果目标是： 1) 输入从 1 到 6 的数字。 2) 根据输入的数字，它将打印一些字符串。我对吗？如果是这样，请阅读以下内容：我认为`char`可能包含 1 个字符。但是要记住一个*字符串*（超过 1 个字符），您可以创建 6 个变量（创建 6 个`char`类型的数组）：

```
/* You can create them beforehead in the individual file of function */
/* (it's difficult, but it is worth it! =) ) */
char str_1; /* 1..6 */
scanf("%s", &str_1);
printf("%s", &str_1); 
```

并且，根据输入的数字，它将打印所需的字符串。

# c - 两个变量的地址相同？

> ID：15590727
> 
> 赞同：6
> 
> 时间：2013-03-23T18:50:44.617
> 
> 标签：c

如何声明具有相同地址的两个不同变量（例如 x 和 y）？

```
 printf("%p\n",&x);  /*will be same */
   printf("%p\n",&y); 
```

如果可能没有`union`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T19:01:46.817

@Mysticial 的说法是正确的。联合元素共享内存空间。并且联合中的两个变量具有相同的起始地址。以下是我的示例程序，其输出可能有助于您理解。

```
#include<stdio.h>
union u{
 int x;
 int y;
};
union u a;
int main(){
    printf("\n %p %p\n",&a.x, &a.y);
    return 1;
} 
```

输出：

```
~$ ./a.out 

0x601030 0x601030 
```

此外，正如@Alon 的想法，在 C++ 中，您还有一种称为引用变量的变量是其他变量的别名。你可以像这样创建：（你的问题被标记为 C，在 C 中你没有引用变量）见下文：

```
int a = 10;
int &b = a; 

+----+----+
|   10    |  <--- a = b
+----+----+  
  2002 
```

如果你打印`&a`然后`&b`你会得到`2002`相同的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-23T19:08:40.833

您要求的精确操作不能仅使用该语言的标准工具来完成，但一些编译器具有允许它的扩展。例如，使用 GCC，这可能会满足您的需求（[此处的文档](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Asm-Labels.html)）。

```
#define ASMNAME(x) ASMNAME_(__USER_LABEL_PREFIX__, #x)
#define ASMNAME_(x,y) ASMNAME__(x, y)
#define ASMNAME__(x,y) __asm__(#x y)
int x;
extern int y ASMNAME(x);

int main(void)
{
    return !(&x == &y); /* will exit successfully */
} 
```

不过请注意这有什么影响：在目标文件中，只有一个变量，它的名称是`x`. `y`仅在源代码中被声明为它的另一个名称。这可能不够好，也可能不够好，具体取决于您要执行的操作。

另请注意，出于优化目的，这两个变量被视为*不同的。*例如：

```
#define ASMNAME(x) ASMNAME_(__USER_LABEL_PREFIX__, #x)
#define ASMNAME_(x,y) ASMNAME__(x, y)
#define ASMNAME__(x,y) __asm__(#x y)
int x;
extern int y ASMNAME(x);

#include <stdio.h>

int main(void)
{
   int a, b;
   x = 1;
   a = x;
   y = 2;
   b = x;
   printf("a=%d b=%d x=%d y=%d\n", a, b, x, y); 
   return 0;
} 
```

可能会打印

```
a=1 b=1 x=1 y=2 
```

因为 store to`y`不被认为会影响 的值`x`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-23T18:54:24.573

没有办法在纯 C 中做你想做的事，当你声明变量（并做一些会读/写它们的地址的事情[这样编译器不能决定将它们视为寄存器]）时，它们会在内存中分配空间. 如果没有 cpp 的美化引用或联合，就不能让 2 个变量占用相同的空间，但是您可以拥有一个变量和多个指向它的指针：

```
type1 var1;
type2 * var2 = &var1; 
```

但最终，当我想将一段内存视为不同的类型时，我通常会这样做：

```
void * var = &something; 
```

然后像这样使用它：

```
*(int*)var 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T18:56:08.860

```
int *p=NULL;  
    *p=value1; , 
```

打印 `*p=value2;`，使用

# css - 在 Wordpress 中设置图片和标题（如果存在）

> ID：15590731
> 
> 赞同：0
> 
> 时间：2013-03-23T18:50:56.153
> 
> 标签：css, image, wordpress, border, caption

这是与 Wordpress 相关的问题，但由于所需的解决方案纯粹与 CSS 相关，因此我将其发布在这里，而不是[wordpress.stackexchange.com](https://wordpress.stackexchange.com/)。

在我当前的样式中，如果图像没有以下标题，则使用这样的 HTML 代码放置它：

```
<p>
    <a href="http://cnn.com/file.jpg">
        <img src="http://cnn.com/file-300x225.jpg" alt="" width="300" height="225" class="aligncenter size-medium wp-image-55">
    </a>
</p> 
```

在我目前的风格中，它的风格是这样的：

```
img {
    display: block;
    padding: 5px;
    background-color: #eee;
    border: 1px solid #ddd;
} 
```

它在它周围绘制了简单的边框。

如果图像后面有标题，则这部分的整个 HTML 会稍微复杂一些：

```
<div id="attachment_55" class="wp-caption aligncenter" style="width: 310px">
    <a href="http://cnn.com/file.jpg">
        <img src="http://cnn.com/file-300x225.jpg" alt="" width="300" height="225" class="size-medium wp-image-55">
    </a>

    <p class="wp-caption-text">Caption</p>
</div> 
```

当前标题根本没有样式（根据我当前选择的主题）。

`div`如果有任何标题，我想要实现的是具有整个样式（图像和标题）。如果我没记错的话，那只需要样式`img`（如当前），如果它后面没有`<p class="wp-caption-text">`. 如果是，则根本不应该设置 img 样式，`<div class="wp-caption">`而是应该设置第二行父级 ( ) 的样式。

这就是算法的全部内容。但是如何在 CSS 中编码（以及是否可能）——我不知道。

最简单的解决方案是永远不要设置样式`img`，而是始终设置样式`<div class="wp-caption">`，无论图像后面是否有标题。但问题是，如果有标题，Wordpress 只会添加该 div。因此，如果只有图像，则仅对其进行样式设置将根本没有边框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:09:08.160

如果你可以使用 Jquery。

然后你可以操纵标记。如果你的模式`img`是`img with caption`这样的，你可以这样做。

```
$('img').each(function(){
    if($(this).parent().parent().hasClass("wp-caption")){
        $(this).parent().parent().addClass('img');
     }
}); 
```

我确信这段代码可以得到更好的优化，但它应该给你一个想法。

看到这个[小提琴](http://jsfiddle.net/manishmishra121/KZr6s/)

# php - 如何检查三个状态（空、假、真）值？

> ID：15590733
> 
> 赞同：0
> 
> 时间：2013-03-23T18:51:00.200
> 
> 标签：php, isset

我有这样一段代码：

```
public function setValue($flag) {
  $this->value = isset($flag) ? (bool) $flag : null;
} 
```

我假设 $flag 可以表示 null、false 或 true。（我进行类型转换的原因是我只关心类型。）

编辑：这是我的目标：

*   如果 $flag 为空，则 $this->value 为空，
*   如果 (bool)$flag 为假，则 $this->value 为假，
*   如果 (bool)$flag 为真，则 $this->value 为真。

这就是我的代码所说的。我想知道，我提交的代码是实现目标的好方法，还是有更好（更简单、更优雅）的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:56:09.617

**编辑**

我刚刚阅读了您的编辑，如果您的代码正在运行，那么请继续按照您已经在执行的方式进行操作，因为这种方式既方便又整洁。唯一的事情是我会先检查`isset`。

```
$this->value = null;
if(isset($flag)) {
    setValue($flag);
}

public function setValue($flag) {
  $this->value = (bool) $flag
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:54:28.620

如果值为，`isset`将返回。您还应该检查`false``NULL``is_null`

# delphi - FMX：控制手柄

> ID：15590734
> 
> 赞同：5
> 
> 时间：2013-03-23T18:51:00.350
> 
> 标签：delphi, controls, handle, firemonkey

我正在使用 Firemonkey 中的 DirectShow，但在输出视频时遇到问题。

```
iVideoWindow.Put_Owner(Panel1.Handle); 
```

我需要 TPanel 的句柄，以在其上显示视频。但是 FMX 控件没有句柄。我知道，Firemonkey不是基于传统windows的，FMX不提供这个，但是如何解决这个问题呢？我不知道，请帮帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-07-18T10:15:44.407

如果你想获得一个 HWND (windows api) 类型的窗口句柄，你现在可以调用这个函数：

```
WindowHandleToPlatform(form1.Handle).wnd 
```

放入您的用途部分：

```
uses
  FMX.Platform.Win; 
```

请注意，仅调用*WindowHandleToPlatform(form1.Handle)*将不起作用，您必须访问**.wnd**才能获取 winapi 句柄。

由于这会降低应用程序的可移植性，因此在执行此操作时放置 {$IFDEF MSWINDOWS} 也是一个好主意，如果您曾经移植到 MacOS，则必须为该平台编写代码。或者将此代码放入仅处理 MS Windows 相关代码的单独单元中，并将 IFDEF 单元放入您的使用中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-28T06:58:09.737

`FmxHandleToHWND`现在标记为已弃用。

`WindowHandleToPlatform`将给定的 FireMonkey 句柄转换为其平台相关的窗口句柄（在您的情况下为 Windows 句柄）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-11-14T12:29:20.783

要处理面板，请尝试以下操作：

```
uses 
  FMX.Platform.Win;

var
  Handle : HWND;

begin

  Handle := TWinWindowHandle (Panel1).Wnd;

end; 
```

# c - 在具有多个客户端的服务器端选择（）

> ID：15590735
> 
> 赞同：0
> 
> 时间：2013-03-23T18:51:03.917
> 
> 标签：c, client-server

我正在处理客户端服务器代码，其中我有两个线程在客户端运行（散装和零售），并且我在服务器上有两个端口来接收数据。我想在服务器端使用 select() 但犯了一些错误，因为“sd1 - 这是大容量端口”永远不会收到数据。如果有人可以帮助我了解如何继续使用当前代码，我将不胜感激。谢谢！！

```
int main(int argc, char *argv[]) {

fd_set readfds, activefds;

// SOCKET CREATION RETAIL
sd=socket(AF_INET, SOCK_DGRAM, 0);
if(sd<0) {
printf("error creating retail socket \n");
return -1;
}   

// SOCKET CREATION BULK
sd1=socket(AF_INET, SOCK_DGRAM, 0);
if(sd1<0) {
printf("error creating retail socket \n");
return -1;
}   

// BIND RETAIL PORT 
servAddr.sin_family = AF_INET;
servAddr.sin_addr.s_addr = htonl(INADDR_ANY);
servAddr.sin_port = htons(RETAIL_PORT);
rc = bind (sd, (struct sockaddr *) &servAddr,sizeof(servAddr));
if(rc<0) {
printf("error binding retail port number %d \n",RETAIL_PORT);
return -1;
}

// BIND BULK PORT
servAddr.sin_family = AF_INET;
servAddr.sin_addr.s_addr = htonl(INADDR_ANY);
servAddr.sin_port = htons(BULK_PORT);
rc1 = bind (sd1, (struct sockaddr *) &servAddr,sizeof(servAddr));
if(rc1<0) {
printf("error binding bulk port number %d \n",BULK_PORT);
return -1;
}

int nfds;
if(sd>sd1){
 nfds = sd;}
else{
 nfds = sd1;}

FD_ZERO(&activefds);
FD_SET(sd, &activefds);
FD_SET(sd1, &activefds);    

  while(1){

   readfds = activefds;

   if (select(nfds+1, &readfds, NULL, NULL, NULL) < 0){
     perror("select");
     break;
    }

       for(i=0;i<nfds;i++){

   if(FD_ISSET(i, &readfds)){
   printf("sd = %d\n\n\n",sd);  // sd = 3 getting printed here
    if(i == sd){
      n = recvfrom(sd, &requested_retail_cases, 4, 0, (struct sockaddr *) &cliAddr, &cliLen);
           printf("in retail\n");
          }

  else if(FD_ISSET(i, &readfds)){

    if(i == sd1){

    n1 = recvfrom(sd1, &requested_bulk_cases, 4, 0, (struct sockaddr *) &cliAddr, &cliLen);
  }

    }
 }
}
 return 1;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:16:59.690

改变

```
if(FD_ISSET(i, &readfds)){
   if(i == sd){
      ...
   }
else if(FD_ISSET(i, &readfds)){
   if(i == sd1){
      ...
   }
} 
```

至

```
if(FD_ISSET(i, &readfds)){
   if(i == sd){
      ...
   }
   else if(i == sd1){
      ...
   }
} 
```

正如它在您的代码中所代表的那样，永远不会达到第二个外部 if 。你实际上有`if (x) then y; else if (x) then z;`显然，第二个 if 永远不会达到。

# fonts - 我在哪里可以获得全行高的真型字体

> ID：15590736
> 
> 赞同：0
> 
> 时间：2013-03-23T18:51:19.483
> 
> 标签：fonts, truetype

我需要一个填充线条的 Android 应用程序的字体，这样我就可以控制字符上方和下方的空间。换句话说，在字母下方或在它们上方的重音符号下方没有空格。有点像这个草图。 ![在此处输入图像描述](../Images/a5a2bf52b1a675579c37e176da438f65.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:33:56.220

我必须通过使用 Type 3.2 缩放现有字体来制作一个

# c# - 如何在 c# 中更新访问数据库？

> ID：15590737
> 
> 赞同：0
> 
> 时间：2013-03-23T18:51:25.737
> 
> 标签：c#, database

我的代码中有一个提款屏幕，当我提款时，我希望它更新访问数据库，但我的代码仅从程序中从数据库中删除金额。一旦程序关闭，数据库将重置为其先前的状态。

我的这个屏幕的代码

```
int moneyselected = 0;
Decimal balance = frmaccount.Balance;

public FrmTransaction()
{
    InitializeComponent();
}

private void btnWithdraw_Click(object sender, EventArgs e)
{
    if (moneyselected == 0)
    {
        MessageBox.Show("Select Amount");
    }
    else
    {
        if (moneyselected > balance)
        {
            MessageBox.Show("Not enough funds");
        }
        else
        {
            balance = balance - moneyselected;
            OleDbCommandBuilder cb = new OleDbCommandBuilder(FrmLogin.da);

            FrmLogin.da.Update(FrmLogin.ds1, "tblCustomers");
            MessageBox.Show("Amount Withdrawn = " + moneyselected.ToString() + "\r\nBalance = " + balance.ToString());
        }
    }
}

private void btnWithdrawreceipt_Click(object sender, EventArgs e)
{

}

private void btnExit_Click(object sender, EventArgs e)
{
    this.Close();
    Form FrmLogin = new FrmLogin();
    this.Hide();
    FrmLogin.Show();
}

private void FrmTransaction_Load(object sender, EventArgs e)
{

}

private void rb10_CheckedChanged(object sender, EventArgs e)
{
    moneyselected = 10;
}

private void rb20_CheckedChanged(object sender, EventArgs e)
{
     moneyselected = 20;
}

private void rb30_CheckedChanged(object sender, EventArgs e)
{
     moneyselected = 30;
}

private void rb40_CheckedChanged(object sender, EventArgs e)
{
     moneyselected = 40;
}

private void rb50_CheckedChanged(object sender, EventArgs e)
{
     moneyselected = 50;
}

private void rb60_CheckedChanged(object sender, EventArgs e)
{
     moneyselected = 60;
}

private void rb70_CheckedChanged(object sender, EventArgs e)
{
     moneyselected = 70;
}

private void rb80_CheckedChanged(object sender, EventArgs e)
{
     moneyselected = 80;
}

private void rb90_CheckedChanged(object sender, EventArgs e)
{
     moneyselected = 90;
}

private void Cashamountbox_Enter(object sender, EventArgs e)
{

}

private void rb100_CheckedChanged(object sender, EventArgs e)
{
     moneyselected = 100;
}

private void rb150_CheckedChanged(object sender, EventArgs e)
{
     moneyselected = 150;
}

private void rb250_CheckedChanged(object sender, EventArgs e)
{
     moneyselected = 250;
}
        }>>LOGIN PAGE<<
    }

namespace BANK_ATM_PROJECT
{
     public partial class FrmLogin : Form
     {
         public FrmLogin()
         {
             InitializeComponent();
         }

    int failedAttempts = 0;

    public static OleDbConnection con = new OleDbConnection();

    string dbProvider;
    string dbSource;

    public static OleDbDataAdapter da;

    public static DataSet ds1 = new DataSet();

    string sql;
    string pin;
    int rownum = 0;
    bool valid = false;

    public static decimal balance = 0;
    private void FrmLogin_Load(object sender, EventArgs e)
    {
        {
            dbProvider = "PROVIDER=Microsoft.ACE.OLEDB.12.0;";
            dbSource = "Data Source = 'D:\\bank11.accdb'";
            con.ConnectionString = dbProvider + dbSource;
            ds1 = new DataSet();
            con.Open();
            sql = " SELECT tblCustomers.* FROM tblCustomers";
            da = new OleDbDataAdapter(sql, con);
            rownum = da.Fill(ds1, "tblCustomers");

            con.Close();

            {

            }
        }
    }

    private void btnExit_Click(object sender, EventArgs e)
    {
        System.Environment.Exit(0);
        this.Close();

    }
    private bool validate()
    {
        ds1 = new DataSet();
        con.Open();

        sql = "SELECT tblCustomers.* FROM tblCustomers WHERE ((tblCustomers.AccountNo) = '" + txtAccount.Text + "')";
        da = new OleDbDataAdapter(sql, con);
        rownum = da.Fill(ds1, "tblCustomers");
        con.Close();

        if (rownum != 1)
        {

            return false;

        }

        else
        {
            pin = ds1.Tables["tblCustomers"].Rows[0][4].ToString();
            if (pin == txtPin.Text)
            {
                return true;
            }
            else
            {
                MessageBox.Show("INVALID PIN");
                return false;
            }

        }
    }

    private void btnLogin_Click(object sender, EventArgs e)
    {

        valid = validate();
        if (!valid)
        {
            //Increment the number of failed attempts
            failedAttempts += 1;
            if (failedAttempts == 1)

                MessageBox.Show("You Have 2 Attempts Left");

            if (failedAttempts == 2)
                MessageBox.Show("You Have 1 Attempt Left");

            //If equal to 3
            if (failedAttempts == 3)

                MessageBox.Show("Card Retained");

            {

            }
        }
        else
        {
            valid = validate();
            if (valid == true)
            {
                if (txtAccount.Text == "11111111" && txtPin.Text == "9999")
                {
                    Frmmanager Manager = new Frmmanager();
                    this.Close();
                    Manager.Show();
                }
                else
                {
                    frmaccount account = new frmaccount();
                    this.Close();
                    account.Show();

                    {
                        txtAccount.Clear();
                        txtPin.Clear();

                        valid = validate();
                        if (valid == true)
                        {
                            if (txtAccount.Text == "11111111" && txtPin.Text == "9999")
                            {
                                Frmmanager Manager = new Frmmanager();
                                this.Close();
                                Manager.Show();
                            }
                            else
                            {
                                frmaccount Account = new frmaccount();
                                this.Close();
                                account.Show();

                                {
                                    txtAccount.Clear();
                                    txtPin.Clear();
                                }
                            }

                        }
                    }
                }
            }
        }
    }
} 
```

}

我虽然 `ds.update`会更新它，但这似乎只在程序中工作

任何帮助或建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:05:29.643

我认为问题出在以下代码中，在这里您创建了一个 FrmLogin 的新实例，而不是引用当前实例：

```
private void btnExit_Click(object sender, EventArgs e)
{
    this.Close();
    Form FrmLogin = new FrmLogin();       
    this.Hide();
    FrmLogin.Show();
} 
```

尝试以下操作：

```
private void btnExit_Click(object sender, EventArgs e)
{
    this.Close();
    FrmLogin obj = (FrmLogin)Application.OpenForms["FrmLogin"];
    this.Hide();
    obj.Show();
} 
```

通常，当您引用时，`FrmLogin`最好使用 obj 作为 ref 以确保您引用当前实例。因此，将其添加到代码的开头：

```
obj = (FrmLogin)Application.OpenForms["FrmLogin"]; 
```

并且每个裁判`FrmLogin`都通过`obj`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-23T19:02:55.790

您是在调试文件夹还是在项目解决方案中检查数据库？尝试检查调试文件夹。

# three.js - Threejs精灵排序

> ID：15590738
> 
> 赞同：2
> 
> 时间：2013-03-23T18:51:28.953
> 
> 标签：three.js, voxel

我在使用 Three.js 渲染精灵时遇到问题，为了使问题进一步复杂化，我正在使用游戏引擎[voxel.js](http://voxeljs.com)来管理实例。

示例：[http ://christopherdebeer.com/sandbox/voxeljs/](http://christopherdebeer.com/sandbox/voxeljs/)

我试过搞乱深度{write|test}：

```
material = new game.THREE.SpriteMaterial({
  map: spriteB, 
  useScreenCoordinates: false,
  alignment: game.THREE.SpriteAlignment.bottomCenter,
  color: 0xffffff,
  fog: true,
  depthWrite: true,
  depthTest: false
}); 
```

对于示例左侧的半透明网格。

我需要的是一个透明的网格或体素，以在该位置显示 2d 精灵的同时为一定体积的空间提供一些物质。

我该如何解决这个问题，或者我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-15T16:25:37.053

这几乎是您需要它的一年后，但@WestLangley 描述了精灵是如何最后渲染的，因此不能很好地与透明对象配合使用。他提供了一些解决此问题的技巧。

[three.js - 无法通过具有透明度的网格查看精灵？](https://stackoverflow.com/questions/19046972/three-js-cannot-view-a-sprite-through-a-mesh-with-transparency)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T19:58:48.353

这似乎是我缺少的 alpha 测试：尝试将参数添加`alphaTest: 0.5`到您传递给 SpriteMaterial 的参数中，看看它是否有帮助（尝试使用`depthTest`set to `true`）

# excel - 如果-那么公式

> ID：15590740
> 
> 赞同：-3
> 
> 时间：2013-03-23T18:51:29.017
> 
> 标签：excel, function, formula, excel-2013, if-statement

在 Excel 2013 中，我想运行一个执行以下操作的公式：

如果单元格 A1 等于 0，则 B1 乘以 10%，C1 乘以 20%，D1 乘以 (1-0.2)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:22:26.557

假设您在 A 到 D 列中有数据，您可以在 EG 列中输入以下公式，分别从 B、C 和 D 计算

```
[in E1]  =if(A1=0, B1*1.1,[whatever you want to happen if A1 NOT 0, e.g. B1])
[in F1]  =if(A1=0, C1*1.2, C1)
[in G1]  =if(A1=0, D1*(1-0.2), D1) 
```

# c# - 在数据库中添加用户输入

> ID：15590741
> 
> 赞同：-8
> 
> 时间：2013-03-23T18:51:49.797
> 
> 标签：c#

我正在尝试实现这一点

```
 Console.WriteLine("Enter Name: ");
    this.name = Console.ReadLine();
    string sql1 = "insert into items values ( " + this.name ")";
    DataAccess.ExecuteSQL(sql1); 
```

当我尝试通过它输入数据时，它显示错误，未处理异常，未找到列名或编号。

我确定列名没问题，我给了它 varchar(50) 类型。这种方法不允许吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:53:36.970

如果字段是 varchar，则需要提供引号：

```
string sql1 = "insert into items values ( '" + this.name + "')"; 
```

不过要小心 sql 注入，参数化查询更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:54:06.947

首先，您的字符串周围没有引号。您还缺少一个加号。它应该是这样的：

```
string sql1 = "insert into items values ( '" + this.name + "')"; 
```

但是，这是通过 C# 处理 SQL 查询的一种非常糟糕的方式。您应该使用参数化查询！如果你做这样的事情，你的数据库可能会发生很多坏事......

请参阅本页底部使用带参数的 SqlCommand 类的示例：http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)

# ruby-on-rails-3 - 多态关联是必要的吗？

> ID：15590742
> 
> 赞同：4
> 
> 时间：2013-03-23T18:52:12.160
> 
> 标签：ruby-on-rails-3, foreign-keys, polymorphic-associations

我是一名 Rails 新手，努力理解使用多态关联而不是具有关联外键的多个 belongs_to 声明的优势。例如，在 Ryan Bates 的 railscast ( [http://railscasts.com/episodes/154-polymorphic-association-revised](http://railscasts.com/episodes/154-polymorphic-association-revised) ) 中，*文章*、*事件*和*照片*都可以有很多*评论，因此他使用**commentable*建立了多态关联。

为什么不让*评论*属于其他三个资产中的每一个，并在其表中包含*article_id*、*event_id*和*photo_id*外键，其中只有一个是非空的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T19:31:37.373

你可以这样做，但会有缺点。我能想到的一些：

1.  具有许多空值的稀疏表

2.  没有关注点分离。每当您添加可评论模型时，评论都必须更改

3.  Rails 已经支持多态关联并使其易于使用。那为什么不呢？

# php - javascript和php中的重定向问题

> ID：15590744
> 
> 赞同：-1
> 
> 时间：2013-03-23T18:52:29.753
> 
> 标签：php, javascript, modal-dialog

我是 php 和 javascript 的新手。我在第一个 php 文件中编写了一个模式对话框打开脚本，用于创建新用户帐户。在模式窗口中输入有效输入后，我通过 post 方法将信息发送到第二个 php 页面以插入数据库中的数据。

现在有问题了。在第二个 php 页面中，有一种方法可以检查数据库中是否已经存在电子邮件地址，然后显示错误，否则将数据插入数据库并重定向到第三个 php 页面。

但无法编写相同的逻辑。请指导我编写逻辑，如果在第 2 页中电子邮件检查方法返回 true，然后在成功插入数据重定向到第 3 页后显示错误 else。

请在下面找到代码片段

2nd php 和 3rd php 在同一个文件夹中。head() 部分不起作用，还需要显示错误以进行第二页验证。第一个 php 大部分代码是 javascript 和 html form.from 那里我正在发布到第二页

```
 **1st php**

 <script>       
                $("#dialog-form").dialog({
                    autoOpen: false,
                    height: 300,
                    width: 350,
                    modal: true,
                    buttons: {
                        "Create an account": function() {
                            var bValid = true;
                            allFields.removeClass("ui-state-error");
                            bValid = bValid && checkLength(email, "email", 6, 80);
                            bValid = bValid && checkLength(password, "password", 5, 16);
                            bValid = bValid && checkLength(confirmpassword, "confirmpassword", 3, 16);
                            bValid = bValid && checkRegexp(email, .....);
                            bValid = bValid && checkRegexp(password, /^([0-9a-zA-Z])+$/, "Password field only allow : a-z 0-9");
                            bValid = bValid && IsEqual(password, confirmpassword, "password & confirmpassword are not equal");
                            if (bValid) {
                                $.ajax({
                                    type: "POST",
                                    url: "./create_account.php?act=create",
                                    data: "&email=" + email.val() + "&password=" + password.val() + "&confirmpassword=" + confirmpassword.val(),
                                    success: function(data) {

                                    }
                                });
                                $(this).dialog("close");
                            }
                        },
                        Cancel: function() {
                            $(this).dialog("close");
                        }
                    },
                    close: function() {
                        allFields.val("").removeClass("ui-state-error");
                    }
                });
                $("#create-user")
                        .button()
                        .click(function() {
                    $("#dialog-form").dialog("open");
                });
            });
        </script>
        <div id="dialog-form" title="Create new user">
            <p class="validateTips">All form fields are required.</p>
            <form>
                <fieldset>
                    <label for="email">Email</label>
                    <input type="text" name="email" id="email" value="" class="text ui-widget-content ui-corner-all" />
                    <label for="password">Password</label>
                    <input type="password" name="password" id="password" value="" class="text ui-widget-content ui-corner-all" />
                    <label for="confirmpassword">confirm password</label>
                    <input type="password" name="confirmpassword" id="confirmpassword" class="text ui-widget-content ui-corner-all" />
                </fieldset>
            </form>
        </div>

    **2nd php**

    <?php

    $action = $_GET['act'];

    if(!empty($_POST['email'])&&($_POST['password'])&&($_POST['confirmpassword'])) {

        $email_address = tep_db_prepare_input($HTTP_POST_VARS['email']);
        $password = tep_db_prepare_input($HTTP_POST_VARS['password']);
        $confirmpassword = tep_db_prepare_input($HTTP_POST_VARS['confirmpassword']);

        $error = false;

      {
            $db = new mysql("root", "", "modal_db", "localhost");
            $email_query_status ="select count(*) as total from " . CUSTOMERS . " where customers_email_address = $email_address ;
            $check_email = mysql($email_query_status );
            if ($check_email['total'] > 0) {
                $error = true;
            }
        }
        if ($error == false) {
            $db->query("INSERT INTO user_info SET customers_email_address ='$email_address', password='$pword'");
            header('Location: 3rd.php');

        }
    }
    ?>

        Thanks in advance, 

        Debasis 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:01:36.327

“检查电子邮件地址是否已存在于数据库中，然后显示错误，否则将数据插入数据库并重定向到第三个 php 页面。”

*   "SELECT * FROM table WHERE email = :email";
*   如果结果为真，则电子邮件已经存在，您可以创建错误消息。
*   如果结果为假，则插入。
*   然后你可以使用

    header("位置：index.php");

用 PHP 重定向。

# internet-explorer - AngularJS：“错误：意外调用方法或属性 access.undefined”仅在 IE 8 中

> ID：15590746
> 
> 赞同：18
> 
> 时间：2013-03-23T18:52:38.657
> 
> 标签：internet-explorer, internet-explorer-8, angularjs, angularjs-directive

您是否曾经遇到过仅 IE8 的错误“错误：意外调用方法或属性 access.undefined”？是什么造成的？你是怎么解决的？

-- 注意：假设相同的代码在 Chrome、Firefox、Safari 中运行良好

**编辑：上下文**

我正在使用 AngularJS + Google App Engine Python 构建一个 facebook 页面选项卡插件。

我使用了十几个由我或 angular-ui 团队和 4-5 个控制器编写的**自定义指令。**

在 Chrome、Safari 和 Firefox 中一切正常，但在 IE8 中却不行。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-23T18:55:46.950

问题是 IE8 不能识别“自定义”元素。

在元素形式的指令声明中使用“replace:true”（限制：'E'）并使用 IE shiv（我使用了 angular-ui 的 IE shiv 并在那里声明了我的自定义标签）。

查看以下链接的更多信息： [https ://github.com/angular/angular.js/issues/1933](https://github.com/angular/angular.js/issues/1933) [http://angular-ui.github.com/#ieshiv](http://angular-ui.github.com/#ieshiv)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T10:55:59.130

如果您使用的是 jQuery，则可以通过修改 jQuery 文件来解决问题。将您的自定义元素添加到“nodeNames”列表中：

```
var nodeNames = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|" +
    "header|hgroup|mark|meter|nav|output|progress|section|summary|time|video|accordion|accordion-group|accordion-heading", 
```

更多信息可以在[http://blog-it.hypoport.de/2013/08/24/how-to-make-your-angularjs-app-work-in-ie-8/上找到](http://blog-it.hypoport.de/2013/08/24/how-to-make-your-angularjs-app-work-in-ie-8/)

# php - $db->fetch_array() 导致 500 错误？

> ID：15590750
> 
> 赞同：0
> 
> 时间：2013-03-23T18:52:54.633
> 
> 标签：php, vbulletin

我正在尝试进行 vBulletin 修改，并且遇到一个命令导致 500 错误的问题。

有问题的行是`$db->fetch_array($result)`命令。整个代码如下：

```
$sql = "SELECT `username` FROM `".TABLE_PREFIX."user` WHERE `ipaddress` = '$ip'"; 
$result = $vbulletin->db->query($sql); 

$array = $db->fetch_array($result); 

while($array = $db->fetch_array($result)) 
{ 
    $unames[] = $row; 
} 

$userips = implode(',',$unames); 
```

在 vBulletin 中，`$vbulletin->db->fetch_array()`调用`mysql_fetch_array($result, MYSQL_ASSOC)`.

我感觉错误出在我的 SQL 语句中，但我不明白为什么。请问有人可以看看吗？我已经为这个错误失去了很多小时......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:02:17.127

```
 /** 
    *  Enable PHP Error Reporting
    *   - Use this in case of Page 500 Error to
    *     display Fatal/Warnings
    *
    *   - Dont use in live use.
   **/
   error_reporting(E_ALL);
   ini_set('error_reporting', E_ALL);
   ini_set('display_errors',1);

   /**
    *  Query
   **/
   $sql = "SELECT 
              `username` 
           FROM 
             `". TABLE_PREFIX ."user` 
           WHERE 
             `ipaddress` = '". $ip ."'"; 

   $result = $vbulletin->db->query_read($sql); 

   /**
    *  For each row, append ino dynamic array
    *     - Might need to set MYSQL_ASSOC
    *
    *  Although this might be:
    *     - $row = $vbulletin->db->fetch_array($result)
   **/
   while($row = $result->fetch_array()) { 
       $unames[] = $row; 
   } 

   /**  
    *  Stringify
   **/
   $userips = implode(',',$unames); 
```

由于`$vbulletin->$db`它是自己的课程，您可以在可能的位置查看他们自己的[文档](http://www.vbulletin.org/forum/showthread.php?t=119350)，`query_read()`而不是`$db->query`

# knockout.js - 了解 ko.mapping.fromJSON

> ID：15590753
> 
> 赞同：1
> 
> 时间：2013-03-23T18:53:00.077
> 
> 标签：knockout.js, knockout-mapping-plugin

我有一个 ASP.NET MVC 应用程序，它使用 WebAPI 获取数据，并在前端使用 KnockOutJS。在大多数情况下，一切都很好，但是我开始意识到在更新值时，这些值并没有反映在绑定的元素中。

这样做的原因是因为数据是从服务器作为 JSON 传递的，并被转换为纯 JSON 对象。换句话说，没有属性被映射为“可观察对象”，因此当我更改对象的值时，没有任何更新。

我读到了一个名为“mapping”的 KnockOutJS 插件，我已经添加了该插件，但是我无法弄清楚使其工作的正确语法。我希望其他人已经处理了这个问题并提出了一些建议。这是我当前的代码：

```
<script type="text/javascript">
    function BlogViewModel() {
        var self = this;
        self.blogs = ko.observableArray();
        var baseUri = '@ViewBag.ApiUrl';

        //$.getJSON(baseUri, self.blogs);
        $.getJSON(baseUri, {},
                function (data) {
                    ko.mapping.fromJSON(data, self.blogs);
                });
    }

    $(document).ready(function () {
        ko.applyBindings(new BlogViewModel());
    });

    });
</script> 
```

被注释掉的部分 ($.getJSON(baseUri, self.blogs);) 是曾经存在的，并且在获取和显示数据方面“有效”。

下面的代码是我尝试读取数据并将映射应用于它的尝试。它根本不起作用。换句话说，我没有在页面上看到任何数据。

我确定我遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-11T12:27:41.440

将您的 JSON 数据映射到 ko 视图模型，如下所示：

```
ko.mapping.fromJSON(data, {}, self.blogs); 
```

# mysql - 从数据库提供静态页面

> ID：15590755
> 
> 赞同：1
> 
> 时间：2013-03-23T18:53:07.803
> 
> 标签：mysql, hosting

我有一个站点，在单个目录中包含超过 100k 的静态文件（总共 600k+ 目录和文件）。我想我可以在没有 inode 问题的情况下获得一个 VPS 来托管它，但它不会是一个高流量的网站，所以我宁愿使用便宜的虚拟主机。

我正在考虑将文件存储在由 URL 路径索引的 MySQL 表中并通过 PHP 提供服务。有更好的方法吗？

**编辑：**澄清一下，这与在数据库上存储图像不同。我说的是 HTML 页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:58:09.923

我认为您最好的方法不是一开始就将它们存储在数据库中。在存储和服务文件方面，这是文件系统最擅长的。没有任何可能的原因表明数据库可以比普通文件系统更有效地执行此操作。

如果您要将它们存储在数据库中，那么考虑到大小限制，您将希望使用 BLOB 字段（例如 TEXT）并为了提高效率，对 URL 进行哈希处理并将其存储在列中，而不是索引一些巨大的 VARCHAR 字段。

但是，正如您所说，它们是静态的，这实际上没有任何意义——因为它们是静态的，因此您的网络服务器会向页面添加一些长缓存标头，以便将它们存储在本地，以备将来来自同一客户端的命中。

[**编辑1-**回应评论]

我用给出的信息回答了这个问题，并在 OP 没有提供信息的地方保持通用。

这取决于您索引的 VARCHAR 的多少——这与您要索引的存储数据的长度（URL/路径/页面名称）有关。

如果您只为 100k 行索引少于大约 45 个字符，我想这真的不会有太大的区别，哈希将使用更少的内存，但对于一个小集合的大小和性能可能不会真正产生太大的影响。

我在 OP 询问数据库时回答了这个问题，但仍然看不出有任何理由首先要将它们放在那里 - 它会比使用文件系统慢。0 为什么要连接到数据库，处理网络性能（除非它们在同一个盒子上——不太可能在 Web 主机中）查询索引，获取一行，通过数据库提供程序运行该数据并将输出流式传输到响应流，当 Web 服务器可以执行相同的结果时更少的 CPU 周期和与数据库相比内存使用量的一小部分？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:18:40.377

是的 - 文件系统*是*数据库。我在过去 10 年中遇到的所有文件系统都可以轻松地在一个目录中容纳这么多文件 - 并且这些目录被实现为树（有些使用 B-Trees - 但是具有更大扇出的结构，例如 H-Trees更适合这种应用程序）。

（实际上，考虑到 coice，我建议将其构建为目录层次结构 - 例如，将 dirs 用于文件名的前 2 个字母或内容的 md5 散列 - 它可以在不影响性能的情况下更轻松地管理内容） .

关系数据库都是关于存储小块结构化数据的——它们不是管理大型可变大小数据的有效方法。

我手头没有任何基准，但就像我会选择一辆旅行车在运动摩托车上快速移动数 PB 的数据一样，我会使用合适的文件系统（例如 BTRFS 或 Ext4 - ZFS 会做工作也是如此，但在 Solaris 以外的任何东西上它都不是一个好的选择——而且 solaris 是否对网络服务器有意义是值得怀疑的）。

问题是廉价的托管公司很少预先提供这种级别的信息。

请注意，文件系统行为的细微调整可能会大大提高性能 - 在您的情况下，如果在 Linux 上运行，我建议显着降低 vfs_cache_pressure。但这需要root访问权限。

另一种方法是使用文档数据库而不是关系数据库（不是键/值存储）。这些是一种无模式 (NoSQL) 数据库，旨在提供对大型数据结构的快速复制和处理。因此，这将提供一个更具可扩展性的解决方案（如果这是一个问题）。例如 RavenDB。您可以使用键/值存储，但这些存储很少针对处理大数据负载进行优化。

如果您有一个非常充分的理由，*而*不是您在此处描述的内容，我只会考虑 MySQL。

# java - 将信息从一个mysql表插入到另一个

> ID：15590756
> 
> 赞同：0
> 
> 时间：2013-03-23T18:53:11.600
> 
> 标签：java

我正在编写一个程序，它将接收学生 ID 并验证该 ID 是否存在于 mysql 表中。如果它确实存在，我想取出它存在的整行并将该行复制到另一个表中。目前，该程序只会将表中的所有行复制到另一个表中。任何帮助表示赞赏。我在下面插入了一段代码。

```
try {
    String compareText = IDField.getText().trim();

    if(compareText.length() > 0){
        Class.forName("com.mysql.jdbc.Driver");
        conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/simlab","root","password");
        System.out.println("Connected to database");

        Statement stmt1     = conn.createStatement();
        ResultSet rs1       = stmt1.executeQuery("select * from students where LUID='"+IDField.getText()+"' ");

        boolean isPresent = rs1.next();

        if (isPresent)
        {
            Class.forName("com.mysql.jdbc.Driver");
            conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/simlab","root","password");
            System.out.println("Connected to database");

            int rows = stmt1.executeUpdate("INSERT INTO skills(ID_Student,LUID_Student)SELECT ID, LUID FROM students");

            if (rows == 0) 
            {
                System.out.println("Don't add any row!");
            } 
            else 
            {
               System.out.println(rows + " row(s)affected.");
               conn.close();
            }

            //System.out.println("Already exists!!");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:07:44.743

你都可以在一条 SQL 语句中做到这一点：

```
INSERT INTO <Dest-Table>
(SELECT * FROM <Src-Table> WHERE ID=?); 
```

它只会复制存在的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:56:27.030

我怀疑这是由于这条线：

```
int rows = stmt1.executeUpdate("INSERT INTO skills(ID_Student,LUID_Student)SELECT ID, LUID FROM students"); 
```

因为，如果解析了该行，则该`SELECT`语句没有`WHERE`子句，因此将获取每一行，因此插入所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-29T04:19:31.023

使用准备好的语句

```
 String sql = "INSERT INTO abc"
                + "(SELECT id1,id2 FROM pqr)";

        ps1 = con.prepareStatement(sql);

        int rs = ps1.executeUpdate();

        if (rs > 0) {

            update = true;

        } else {
            update = false;
        }

    } catch (Exception ex) {

        ex.printStackTrace();
    } finally {
        try {
            if (ps1 != null) {
                ps1.close();
                ps1 = null;
            }
            if (con != null) {
                con.close();
                con = null;
            }
        } catch (Exception e) {

        }
    }
    return update; 
```

# javascript - Javascript - 第二次点击暂停 mp3 文件

> ID：15590760
> 
> 赞同：0
> 
> 时间：2013-03-23T18:53:34.077
> 
> 标签：javascript, html, css, dom

我有一组播放按钮，只要你点击一个，就会播放一首歌。但是，当我单击另一个按钮时，我没有成功暂停歌曲然后播放另一首歌曲。

Javascript

```
 function StartOrStop(audioFile) {
    var audie = document.getElementById("myAudio");
    if(!audie.src) 
       audie.src = audioFile;
    if(audie.paused == false) {
        audie.pause();
    } else {
       audie.play();
    }
 } 
```

HTML

```
<img src="images/play.png" alt="Play Button width="57" height="50" onclick="StartOrStop('RWY.mp3')">

<img src="images/play.png" alt="Play Button width="57" height="50" onclick="StartOrStop('WDC.mp3')"> 
```

关于如何修复它的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:28:09.223

我建议尝试一下[Buzz](http://buzz.jaysalvat.com/)。这个 js 库有助于轻松地做普通的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:48:59.287

**您需要在更改 src 后加载其他音频文件**

```
 function StartOrStop(audioFile) {
    var audie = document.getElementById("myAudio");
    if(!audie.src) 
       audie.src = audioFile;
       audie.load();
    if(audie.paused == false) {
        audie.pause();
    } else {
       audie.play();
    }
 } 
```

# asp.net-mvc - ASP.NET MVC - 无法将表单值绑定到列表

> ID：15590774
> 
> 赞同：0
> 
> 时间：2013-03-23T18:54:37.180
> 
> 标签：asp.net-mvc, model-binding

我有这个模型

```
 public class ItemClassification
    {
         public int ItemID {get; set;}
         public string ItemName {get; set;}
    } 
```

我有这个表格

```
 <form method="POST" action="/Home/UpdateItemClassifications">
        <table>
             <tr>
                  <th>Item ID</th>
                  <th>Item Name</th>
             </tr>
             <tr>
                  <td>
                       <input name="ItemClassification[0].ItemID" value="1"/>
                  </td>
                  <td>
                       <input name="ItemClassification[0].ItemName" value="Item One"/>
                  </td>
             </tr>
             <tr>
                  <td>
                       <input name="ItemClassification[1].ItemID" value="2"/>
                  </td>
                  <td>
                       <input name="ItemClassification[1].ItemName" value="Item Two"/>
                  </td>
             </tr>
             <tr>
                  <td>
                       <input name="ItemClassification[2].ItemID" value="3"/>
                  </td>
                  <td>
                       <input name="ItemClassification[2].ItemName" value="Item Three"/>
                  </td>
             </tr>
        </table>
   </form> 
```

我正在尝试将这些值绑定到这个控制器操作以循环它们并在数据库中更新它们。

```
 [HttpPost]
    public ActionResult UpdateItemClassifications(List<ItemClassification> UpdatedClassifications)
    {
         //save logic here..
    } 
```

无论出于何种原因，我都没有将发布的表单值绑定到 ItemClassification 模型。任何帮助或方向将不胜感激。我尝试只使用一组值发布此表单，并从控制器中删除了“List<>”，并正确映射了这些值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:13:08.547

原来我不需要 [0].ItemID 之前的“ItemClassification”，谢谢你的回答[Sundeep](https://stackoverflow.com/users/1606128/sundeep)。我可能确实需要查看您引用的被黑文章，因为我可能会在其中添加一个 JavaScript 删除功能，这无疑会改变我的索引。

# c# - 在 MVVMCross 上从 ViewModel 执行 UI 代码

> ID：15590776
> 
> 赞同：5
> 
> 时间：2013-03-23T18:54:53.413
> 
> 标签：c#, windows-runtime, winrt-xaml, mvvmcross

我刚刚开始使用 MvvmCross，但我没有找到任何关于如何从 ViewModel 执行 UI 代码的信息。

在 Caliburn 上有协程，因此我可以访问视图并将 ui 代码与 viewmodel 代码分开。在我的第一种情况下，我需要从 ViewModel 中的命令打开一个对话框，正确的方法是什么？

现在我正在开发一个 WinRT 应用程序。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-23T21:44:35.653

在 MvvmCross 中对此没有任何硬性/快速规则。

通常，当我需要这样做时，我会使用 Messenger 插件。

此答案假定您使用的是最新的 Alpha`v3`代码。对于较旧的 vNext 代码，您必须进行一些翻译 - 请参阅下面的注释。

要使用这种方法：

我参考`Cirrious.MvvmCross.Plugins.Messenger.dll`了 Core 和 UI 项目。

然后我在 Setup.cs 中的某处（例如 in `InitializeLastChance`）添加一行：

```
Cirrious.MvvmCross.Plugins.Messenger.PluginLoader.Instance.EnsureLoaded(); 
```

然后在核心项目中添加一条消息：

```
public class InputIsNeededMessage : MvxMessage
{
    public InputIsNeededMessage(object sender) : base(sender) {}
} 
```

在 ViewModel 中，我可以通过构造函数注入或通过以下方式获取 Messenger：

```
var messenger = Mvx.Resolve<IMvxMessenger>(); 
```

我可以通过以下方式发送消息：

```
messenger.Publish(new InputIsNeededMessage(this)); 
```

在视图中，我可以再次使用 Messenger 并订阅消息：

```
var messenger = Mvx.Resolve<IMvxMessenger>();
_token = messenger.SubscribeOnMainThread<InputIsNeededMessage>(OnInputIsNeeded); 
```

where`_token` **必须**是成员变量 - 如果不是，则订阅将不会持续存在 - 默认情况下订阅本身**很弱**（因此您永远不必取消订阅）

以及`OnInputIsNeeded`类似的东西在哪里：

```
private void OnInputIsNeeded(InputIsNeededMessage message)
{
    if (message.Sender != ViewModel)
        return;

    // do stuff here - you are already on the UI thread
} 
```

* * *

上面的序列是我通常为“正确代码”所做的

开始使用 Messenger/EventAggregator 可能会感到不舒服 - 我确实需要一段时间才能习惯它 - 但在我习惯了它之后，我现在在任何地方都使用它 - pub/sub 消息解耦对于测试和代码的未来维护（IMO）

作为上述这种方法的替代方案，我有时会采取捷径：

*   有时我会从 ViewModel 触发正常的 C# 事件并让 View 响应这些
*   有时我有特殊的标记属性并从中触发 UI 代码

* * *

抱歉使用`v3`语法 - 但转换即将到来，这就是我现在正在编码的......

要切换回`vNext`我认为您可能需要：

*   使用`IMessenger`而不是`IMvxMessenger`
*   使用`BaseMessage`而不是`MvxMessage`
*   使用`Subscribe`而不是`SubscribeOnMainThread`- 但是您需要自己将消息编组到 UI 线程上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-25T10:28:25.933

有一种更简单的方法。这是我用于在主线程上执行任何操作的方法：

```
protected void RunOnUIThread(Action action) {
    var dispatcher = Mvx.Resolve<IMvxMainThreadDispatcher>();
    dispatcher.RequestMainThreadAction(action);
} 
```

希望能帮助到你。干杯。

# php - php将具有公共和不同键的数组数组中的元素合并到最终数组中

> ID：15590778
> 
> 赞同：1
> 
> 时间：2013-03-23T18:55:11.470
> 
> 标签：php, arrays, multidimensional-array, merge, key

假设我有单个数组数组。数组数组中的每个元素彼此相似，因为它们具有相似的键，但可能其中一个键具有唯一值，或者数组数组中的一个数组具有附加/不同键。例如...

```
$masterArray = array( 
     [0]=>array(id=>'123', url=>"http://xyz.com", data=>"something", data2=>"else"),
     [1]=>array(id=>'123', url=>"http://xyz.com", data=>"something", data3=>"baby"),
     [2]=>array(id=>'456', url=>"http://abc.com", data=>"something", data2=>"completely"),
     [3]=>array(id=>'456', url=>"http://abc.com", data=>"something", data3=>"different"),
     [4]=>array(id=>'789', url=>"http://def.com", data=>"something", data2=>"is not quite"),
     [5]=>array(id=>'789', url=>"http://def.com", data=>"something", data3=>"right")
 ); 
```

我需要由 $masterArray 创建一个新数组，该数组将基于每个单独数组中匹配的键值对将数组数组中的各个键合并到新数组中的一个新键中。所以最终的数组会看起来像这样......

```
$finalArray = array(
    [0]=>array(id=>'123', url=>"http://xyz.com", data=>"something", data2=>"else", data3=>"baby"),
    [1]=>array(id=>'456', url=>"http://abc.com", data=>"something", data2=>"completely", data3=>"different"),
    [2]=>array(id=>'789', url=>"http://def.com", data=>"something", data2=>"is not quite", data3=>"right"),
); 
```

有相当多的 php 函数数组（不是双关语）可以对数组或值进行排序/合并，但我不知道要使用哪些或如何实现它！

任何人都可以找到解决方案吗？将不胜感激。

**注意：要注意，我做了以下**

我尝试过的是以下算法：

1.  创建 $masterArray 的两个副本（称它们为 $m1 和 $m2）
2.  使用两个 for..each 循环。第一个 for...each 循环通过 $m1，第二个通过 $m2
3.  从外部循环中获取 $m1 中的当前元素
4.  从内部循环比较 $m2 中的当前元素
5.  如果 $m1[outerloopindex] 通过它们的大部分键值匹配 $m2[innerloopindex]，则创建一个新的数组元素 $x，合并它们的键值对。
6.  将 $x 推送或添加到 $newArray
7.  （这可能有效也可能无效）从 $m1 和 $m2 中删除比较的元素（因为我们使用了它们，我们不再需要它们。假设不再匹配）
8.  如果 $m1[outerloopindex] 不匹配$m2[innerloopindex] ，只需转到下一个 $m2[innerloopindex] 值并再次与 $m1[outerloopindex] 进行比较，直到匹配（或不匹配）
9.  如果 $m2 中没有元素与 $m1 中比较的元素匹配，则保留 $m1[outerloopindex]
    1.  再次循环到 $m1[outerloopindex+1] 等。

但不幸的是，它似乎没有返回正确数量的结果:(

示例代码如下。

```
 foreach($artistData as $key=>&$asset){
        // 2\. examine each element, its value is itself an array.
        // $key returns the position
                    // reset the $artistData array
        $artistData=array_values($artistData);
        $currElement = $artistData[$key];           
                    // 3\. check for this secondary array's uid. 
                    // loop through each element in this secondary array
        $currElUid = $currElement['uid'];
        $currElid = $currElement['id'];
        $currElThumbUrl = $currElement['thumbUrl'];

             // 4\. then proceed down the remaining array  and compare the remaining indice's array's uid with the current one being explored
        $artistCount=0;
        // reset the second array $artistData02;
        $artistData02 = array_values($artistData02);
        foreach($artistData02 as $key02=>&$asset02){
                            // clear our temporary new element
            unset($resultElement);
            $resultElement=array(); 
            // grab the new element to compare to. 
                            // make sure it's not the same as the original
            $newCurrElement = $artistData02[$key02];
            $newCurrElUid = $newCurrElement['uid'];
            $newCurrElid = $newCurrElement['id'];
            $newCurrElThumbUrl = $newCurrElement['thumbUrl'];

            // if I already compared this element, then skip it entirely
            // We also don't want to compare the element to itself.
            if ($key!=$key02){

                // make sure the uids match
                if($currElUid==$newCurrElUid){
                    // make sure the thumb URLs are different
                    if($currElThumbUrl!=$newCurrElThumbUrl){
                        //  create the new merged element
                        // grab the filetype of $currElement
                        switch($currElement['filetype']){
                            case 1:
                            $resultElement['imageLge']=$currElement['publicUrl'];
                            $resultElement['imageSml']=$currElement['thumbUrl'];
                            break;
                            case 3:
                            $resultElement['song']=$currElement['publicUrl'];
                            break;
                        }
                        // then we compare the newCurrElement and add our information
                        switch($newCurrElement['filetype']){
                            case 1:
                            $resultElement['imageLge']=$newCurrElement['publicUrl'];
                            $resultElement['imageSml']=$newCurrElement['thumbUrl'];
                            break;
                            case 3:
                            $resultElement['song']=$newCurrElement['publicUrl'];
                            break;
                        }
                        // for the remaining values, we will pass as is
                        $resultElement['title']=$currElement['title'];
                        $resultElement['uid']=$currElement['uid'];

                        // take the resultant $resultElement and merge it to the main array (before $resultELement is recreated)
                        array_push($resultArr,$resultElement);

                        // this will reflow the elements, and change the indexing(so the echo merge statement will change). but comparisons will be reduced
                        unset($artistData[$key]);
                        $artistData = array_values($artistData);
                        unset($artistData02[$key02]);
                        $artistData02 = array_values($artistData02);

                    }else{
                        //echo "The thumbURLs are the same. skipping... <br />";
                    }
                }else{
                //echo "not the same uids. skipping... <br />";
                }
            }else{
                //echo "this is the same element. skipping... <br />";
            }

        $artistCount++;
        // end inner for...each loop
        }

    // 7\. loop and check through the remaining elements in main array again.
    }
    /* end outer for each loop */

    // add another element - the artist count at the end
    $resultArr['artistCount']= $artistCount-1;
    // build a JSON object that contains the artists, the total number
    echo $resultArr; 
```

再次感谢任何帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:38:05.193

要回答您的原始问题，此代码将接收您的 masterArray 并输出您的 finalArray：

```
// sample array just for completeness
$masterArray = array(
        array('id'=>'123', 'url'=>"http://xyz.com", 'data'=>"something", 'data2'=>"else"),
        array('id'=>'123', 'url'=>"http://xyz.com", 'data'=>"something", 'data3'=>"baby"),
        array('id'=>'456', 'url'=>"http://abc.com", 'data'=>"something", 'data2'=>"completely"),
        array('id'=>'456', 'url'=>"http://abc.com", 'data'=>"something", 'data3'=>"different"),
        array('id'=>'789', 'url'=>"http://def.com", 'data'=>"something", 'data2'=>"is not quite"),
        array('id'=>'789', 'url'=>"http://def.com", 'data'=>"something", 'data3'=>"right")
);

// here's where the code actually begins
$finalArray = array();
foreach( $masterArray as $m )
{
    if( !isset( $finalArray[$m['id']] ) )
        $finalArray[$m['id']] = $m;
    else
        $finalArray[$m['id']] = array_merge( $finalArray[$m['id']], $m );
}
$finalArray = array_values( $finalArray ); 
```

如果你 var_dump $finalArray，它会与你想要得到的一致。这是基于 id 的匹配。

您的示例代码我没有花时间仔细阅读，基于 id 聚合值是否足够？如果是这样，答案在上面。;)

# php - 用 html 代码连接一个 php $post_data[

> ID：15590780
> 
> 赞同：-1
> 
> 时间：2013-03-23T18:55:32.447
> 
> 标签：php, html, connect, postdata

我有以下代码：

```
<?php
$post_data['firstname'] = '';
$post_data['lastname'] = '';
$post_data['address'] = '';

foreach ( $post_data as $key => $value)
{
$post_items[] = $key . '=' . $value;
}

$post_string = implode ('&', $post_items);
$curl_connection = curl_init('https://example.com/app.php');
curl_setopt($curl_connection, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($curl_connection, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");
curl_setopt($curl_connection, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl_connection, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl_connection, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($curl_connection, CURLOPT_POSTFIELDS, $post_string);
$result = curl_exec($curl_connection);
echo "Result: " . $result . "<br><br>";
print_r(curl_getinfo($curl_connection));
echo curl_errno($curl_connection) . '-' . curl_error($curl_connection);
curl_close($curl_connection);
?> 
```

如何将其连接到 HTML 表单，以便有人可以在 HTML 页面中输入他们的详细信息，并且其值将被重定向到此 PHP 代码？

我的 HTML 代码是：

```
<form name="form" method="post" action="my_php.php">
<input name="firstname" type="text" ID="firstname" value="first name">
<input name="lastname" type="text" ID="lastname" value="last name">
<input name="address" type="text" ID="address" value="address">
<input type="submit" name="Submit" value="Submit"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:06:51.287

你应该这样写：PAGE 1 - HTML - page1.html

```
<FORM ACTION='page2.php' METHOD='POST'>
<input name="firstname" type="text" ID="lastname" value="first name">
<input name="lastname" type="text" ID="lastname" value="last name">
<input name="address" type="text" ID="address" value="address">
<input type="submit" name="Submit" value="Submit">
</FORM> 
```

第 2 页 - PHP - page2.php

```
<?PHP
echo $_POST['firstname'];
echo $_POST['lastname'];
echo $_POST['address'];
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T18:58:58.377

使用[`$_POST`](http://php.net/manual/en/reserved.variables.post.php)超全局。例如，如果输入`name`是`Name`，那么你会这样做：

```
<?php
echo 'Your name is ' . $_POST['Name'];
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T09:15:37.217

my_php.PHP

```
$post_data = $_POST; 
```

# jquery - jQuery 图像交换显示 – IE8 错误？

> ID：15590785
> 
> 赞同：1
> 
> 时间：2013-03-23T18:56:01.803
> 
> 标签：jquery, internet-explorer-8, slideshow

作为艺术家的 Wordpress 网站的一部分，我制作了一个简单的 jQuery 图像交换循环，用于每个单独的自定义帖子。本质上，只是一张带有照片信用的大图像，下面是一组七个缩略图，以显示艺术作品的不同视图。单击每个缩略图会将当前大图像换成缩略图中的 href 以及换出照片信用。照片信用在每个缩略图中使用了一个隐藏的 div，其中包含 .hideText 类，其中包含由 PHP 提供的相关摄影师的姓名。

在 Firefox、Chrome、Opera 和 IE > 8 中一切正常。在 IE8 中，在第一次加载时，可以按顺序单击每个图像以生成相应的大图像，但在单击第七个缩略图或单击直接数字序列后会导致尽管href仍然正确，但未显示大图。注意：使用 jQuery 1.8.2 和 Modernizr 2.6.2。

除了 IE8 错误之外，我认为还有其他三个问题值得一提。1) 使用 .load() 会产生缓慢的加载时间，直到图像被缓存。我想我应该使用预加载器，但不确定如何使用此设置。2）而且由于大图像加载缓慢，绝对定位的照片信用有时会首先显示在错误的位置，直到img加载。理想情况下，jQuery 照片信用块将被链接到跟随图像加载代码以避免这种情况；我尝试使用匿名函数来做到这一点，但无法让它工作，所以 .delay() 是一个不可靠且不可靠的替代方案。3）点击时，应该在旧图像隐藏之前添加#artWrap背景微调器，并在新图像淡入后移除，但它不能始终如一地工作。

考虑到意外的时间投入，回想起来我可能会使用 WP 图片库插件，但我想了解这些东西。欢迎任何建议！

**相关的jQuery：**

```
$('.thumbnail').live("click", function() {

$('#artWrap').css('background-image', "url('../img/ajax-loader-48-48.gif')");
$('#artLarge').hide();

var i = $('<img />').attr('src',this.href).load(function() {
    $('#artLarge').attr('src', i.attr('src'));
    $('#artLarge').fadeIn(200);     
    $('#artWrap').css('background-image', 'none');
});

if ( $(this).find('.hideText').is(':empty') ) {
    $('#photoCredit').hide().empty();
} else {
    $('#photoCredit').hide().empty();
    var newCredit = $(this).find('.hideCredit').html();
    $('#photoCredit').html(newCredit).delay(600).fadeIn(200);
}

return false;

}); 
```

...

**基本 div 结构：**

```
<div id="artShow">  

    <div id="artWrap" >

        <div id="artImage">
            <img id="artLarge" src="../uploads/EXAMPLE_1-LG.jpg">
        </div><!-- #artImage -->

        <div id="photoCredit">
            Photo: Example 1 Photographer
        </div><!-- .artCredit -->

    </div><!-- #artWrap -->

    <div id="artThumbs" class="clearfix">

        <div id="thumb1" class="thumb">
            <a href="../uploads/EXAMPLE_1-LG.jpg" class="thumbnail nofancybox"><!-- large image link goes in href here -->
                <img src="../uploads/EXAMPLE_1-SM.jpg" width="72" height="72" ><!-- small image -->
            </a>
            <div class="hideCredit">Photo: Example 1 Photographer</div>

        </div><!-- #thumb1 -->

        <div id="thumb2" class="thumb">
            <a href="../uploads/EXAMPLE_2-LG.jpg" class="thumbnail nofancybox">
                <img src="../uploads/EXAMPLE_2-SM.jpg" width="72" height="72" >
            </a>
        <div class="hideCredit">Photo: Example 2 Photographer</div>

        </div><!-- #thumb2 -->

        <div id="thumb3" class="thumb"> ... ETC ... </div>
        <div id="thumb4" class="thumb"> ... ETC ... </div>
        <div id="thumb5" class="thumb"> ... ETC ... </div>
        <div id="thumb6" class="thumb"> ... ETC ... </div>
        <div id="thumb7" class="thumb"> ... ETC ... </div>

    </div><!-- #artThumbs -->

</div><!-- #artShow --> 
```

...

**相关的CSS：**

```
/* Content shell for whole image swap show */
#artShow { float: right; position: relative; width: 630px; min-height: 570px; }

/* wrap for both image and photo credit */
#artWrap { float: left; position: relative; background: url('../img/ajax-loader-48-48.gif') center center no-repeat; }

/* wrapper for large image */
#artImage { min-height: 456px; margin-bottom: 19px; line-height: 0;  /* lh adjusts photo credit */ }

/* ID attached to large img */
#artLarge { }  

/* photo credit below artImage */
#photoCredit { 
position: absolute;
right: 0;
bottom: -5px;
height: 16px;
padding-top: 3px;
width: 100%;
text-align: right;
}

#artThumbs { position: absolute; top: 492px; left: 0; width: 651px; height: 72px; }

.thumb { float: left; margin-right: 21px; width: 72px; height: 72px; background-color: #c9c9c9; }

.thumbnail { display: block; width: 72px; height: 72px; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:28:30.863

在使用您提供的暂存 URL 进行一些调试后，我想我可以看到您的问题所在。

看起来您`.load()`的图像函数（AM_main.js 的第 57 行）仅在第一次加载图像时被调用。如果再次单击同一图像，`load()`则不会调用该函数。

这是因为图像已经被加载，因此当您再次加载它时，它就在浏览器缓存中。这里发生的是`load`事件*正在*触发，但是由于图像已经在缓存中，因此在设置属性时会*立即触发。*`src`

*这里的关键是立即*这个词。该`load`事件在 jQuery 进入下一段代码之前被触发并完成......这是您指定希望`load`事件调用的函数的地方。该`load()`函数是在事件`load`已经发生之后定义的。

所以这里的解决方案是更改 jQuery 代码的顺序，以便在指定`src`属性之前定义加载事件函数。这是相当微不足道的；它只需要稍微重新安排现有代码，如下所示：

```
var i = $('<img />').load(function() {
    ....
}).attr('src',this.href); 
```

希望这应该为您解决问题。

`<img>`另一种解决方案是避免在每次运行单击事件时重新创建新元素。如果您有一个`<img>`每次都重复使用的元素，那么即使在设置 时，负载也总是已经到位`src`，因此不会发生上述问题；即使事件确实立即触发，那也很好，因为事件处理函数已经存在。

该解决方案还可以为您带来一点性能优势，因为您不必重复创建`<img>`元素。

当然，不利的一面是，与上述其他解决方案相比，这将是更大的代码更改。但这不会是大量的工作，所以也许你应该试一试。

无论您采用哪种解决方案，我希望这会有所帮助。

# php - 如何自动换行到 3 行？

> ID：15590786
> 
> 赞同：0
> 
> 时间：2013-03-23T18:56:04.273
> 
> 标签：php, mysql

嗨，伙计们，我想知道如何将自动换行到 3 行这是我的代码

```
$string = "this is a long string that i want condensed isjdjfibfhkbfhdbfsdbfsdhfbdsfhsbdhfkhvbsdhvshfsdjkvfjhjfdsffsdfsdfdsfdshfbdkhsvfvdfdhfsdvf";
echo wordwrap($string,55,"<br />\n",TRUE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:06:17.043

```
.wordwrap {  
    word-wrap: break-word;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:12:39.957

您可以将文本放在`div`具有 style 的块元素或其他块元素中`overflow = scroll`。

# android - 带有套接字编程的 Android 服务

> ID：15590795
> 
> 赞同：0
> 
> 时间：2013-03-23T18:56:26.637
> 
> 标签：android, sockets, android-service, socketserver

嘿，我需要实现一个无限循环来通过套接字接收命令并更新我的 android 应用程序中的状态，并且即使应用程序关闭，也希望该线程能够运行。所以我需要知道我在想什么是最佳解决方案...我计划创建一个服务来创建一个线程来查找命令，并且这个类也是可观察的，因此活动可以从它。请建议您的方式，或者如果您认为这是正确的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:00:29.120

在后台运行通常是一个坏主意（电池寿命），尤其是在使用数据服务（数据计划成本）的情况下。您需要的确实是一项服务，但仅当您收到[用户呈现广播](http://developer.android.com/reference/android/content/Intent.html#ACTION_USER_PRESENT)时才启动更新状态线程，并在设备进入睡眠状态时停止它（我认为不请求唤醒锁定而不使用 startForeground() 就足够了） .

# ruby-on-rails - 指南针插件 Susy 未找到

> ID：15590797
> 
> 赞同：4
> 
> 时间：2013-03-23T18:56:56.293
> 
> 标签：ruby-on-rails, gem, compass-sass, susy-compass

我正在运行 Rails 4 应用程序并试图让 compass 和 susy 运行。我收到以下错误：

```
File to import not found or unreadable: susy. 
```

我的 gemfile 组：

```
group :assets do
  gem 'sass-rails',   '~> 4.0.0.beta1'
  gem 'compass-rails'
  gem 'susy'
  ...
end 
```

我唯一的 CSS 行 (_base.sass)

```
@import susy 
```

我已经运行了 Bundle Install，我的应用正在使用：

```
Using compass-rails (1.0.3) 
Using susy (1.0.7) 
```

完全迷失了。我没有指南针的 config.rb 文件，但据我所知，在 Rails 3.1/3.2 之后不需要它。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T20:24:10.193

您可以在`compass-rails` [gem 文档](https://github.com/Compass/compass-rails#installing-compass-extensions)中找到解决方案：

您必须添加 gem`compass-susy-plugin`而不是`susy`，如下所示：

```
# Gemfile
…
gem 'compass-rails'
gem 'compass-susy-plugin'
… 
```

如果您使用的是 Rails 4，请不要使用`group :asset`，它已被[删除](http://guides.rubyonrails.org/upgrading_ruby_on_rails.html#upgrading-from-rails-3-2-to-rails-4-0-gemfile)，只需将前面的行添加到 Gemfile。

然后运行：

```
$ bundle
$ bundle exec compass install susy 
```

这些前面的行将生成`susy`您需要的文件。

最后将其添加到您的`application.rb`：

```
# config/application.rb
config.compass.require "susy" 
```

# neo4j - 将数据汇总为树数据结构（在图形数据库中）

> ID：15590800
> 
> 赞同：2
> 
> 时间：2013-03-23T18:57:06.577
> 
> 标签：neo4j, graph-databases, orientdb

我有一个树数据结构，其中在叶节点处输入数据。我想要做的是将这些数据汇总到树中，例如对于树中的任何节点，汇总它下面的所有数据。

有没有使用**图形数据库**的聪明方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:48:54.130

在 cypher (neo4j) 中，您可以执行以下操作：

```
start n=node:node_auto_index(id={id})
match n-[:parent_of*]->child
where not(child-[:parent_of]->()) // where the child doesn't have children (leaf)
return n, sum(child.val); 
```

[http://wes.skeweredrook.com/cypher-summing-data-up-a-tree-leaf-nodes/](http://wes.skeweredrook.com/cypher-summing-data-up-a-tree-leaf-nodes/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:23:24.167

[这是使用 Gremlin 的解决方案和刚刚在aureliusgraphs](https://groups.google.com/forum/?fromgroups=#!topic/aureliusgraphs/BUSdRpY53c0)邮件列表中弹出的树数据示例：

```
g = new TinkerGraph()
root = g.addVertex(['name':'root'])
c1   = g.addVertex(['name':'1',    'sortIndex':1])
c11  = g.addVertex(['name':'1.1',  'sortIndex':1])
c12  = g.addVertex(['name':'1.2',  'sortIndex':2])
c121 = g.addVertex(['name':'1.2.1','sortIndex':1])
c122 = g.addVertex(['name':'1.2.2','sortIndex':2])
c13  = g.addVertex(['name':'1.3',  'sortIndex':3])
c2   = g.addVertex(['name':'2',    'sortIndex':2])
c21  = g.addVertex(['name':'2.1',  'sortIndex':1])
c22  = g.addVertex(['name':'2.2',  'sortIndex':2])
c3   = g.addVertex(['name':'3',    'sortIndex':3])
c31  = g.addVertex(['name':'3.1',  'sortIndex':1])
c32  = g.addVertex(['name':'3.2',  'sortIndex':2])
g.addEdge(root, c1, 'has')
g.addEdge(root, c2, 'has')
g.addEdge(root, c3, 'has')
g.addEdge(c1, c11, 'has')
g.addEdge(c1, c12, 'has')
g.addEdge(c1, c13, 'has')
g.addEdge(c2, c21, 'has')
g.addEdge(c2, c22, 'has')
g.addEdge(c3, c31, 'has')
g.addEdge(c3, c32, 'has')
g.addEdge(c12, c121, 'has')
g.addEdge(c12, c122, 'has') 
```

上面用于初始化图形的代码应该很好地粘贴到[Gremlin](http://gremlin.tinkerpop.com)提示符中。建立图表后，只需发出以下命令即可遍历树并对数值求和（在本例中为 sortIndex 字段）：

```
gremlin> total=0;root.out.sideEffect{total+=it.sortIndex}.loop(2){true}
gremlin> total
==>21 
```

上面的代码初始化了一个`total`变量，然后从`root`顶点开始遍历，遍历出来再将`sortIndex`字段的值加到总数中。然后它在树上循环/重复该操作，直到它耗尽它（最终`true`控制它循环多长时间）。

为方便起见，我使用了 TinkerGraph，但此代码可与 Neo4j 或 OrientDB 一起使用（我在此问题上将其视为其他标签），只需将图形实现更改如下：

```
g = new Neo4jGraph('/tmp/neo4j') 
```

或者

```
g = new OrientGraph('memory:/graph') 
```

# css - 如何正确实现固定侧边栏？

> ID：15590803
> 
> 赞同：29
> 
> 时间：2013-03-23T18:57:50.577
> 
> 标签：css, sidebar

我正在尝试完成这个设计： ![示例设计](../Images/6265ac22a99da4cf9e19cc7d72c43169.png) 侧边栏将被固定，但右侧（主要内容）将垂直滚动（如果用户的浏览器窗口较小，则可能水平滚动）。实现这一目标的最佳方法是什么？

我尝试将侧边栏“固定”为固定宽度为 200 像素，然后主要内容的左侧边距为 200 像素。但是，如果用户的浏览器小于主要内容，则边栏会在用户尝试水平滚动时与所有内容重叠。

有没有更聪明的方法来实现这一目标？谢谢！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-23T19:05:40.303

使用内容 div 作为页面的容器。

```
 .sidebar {
     position: fixed;
     width: 200px;
     height: 400px;
     background: #000;
 }
 .content {
     margin-left: 200px;
     height: 500px;
     width: auto;
     position: relative;
     background: #f00;
     overflow: auto;
     z-index: 1;
 }
 .info {
     width: 1440px;
     height: 300px;
     position: relative;
     background: #f55;
 }

<div class="sidebar"></div>
<div class="content">
    <div class="info"></div>
</div> 
```

您的内容将需要是放置页面的容器。这里的值是我的测试，看看我是否正确。如果您的宽度和高度超过您为内容设置的值，则会出现滚动条。

拉小提琴：http: [//jsfiddle.net/djwave28/JZ52u/](http://jsfiddle.net/djwave28/JZ52u/)

* * *

**编辑：响应式侧边栏**

要拥有响应式固定侧边栏，只需添加一个媒体查询。

例子：

```
@media (min-width:600px) {
   .sidebar {
     width: 250px;
   }
   .content {
     margin-left: 250px;
   }
 } 
```

这是另一个小提琴：http: [//jsfiddle.net/djwave28/JZ52u/363/](http://jsfiddle.net/djwave28/JZ52u/363/)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-24T01:02:48.490

这是一个替代方案：http: [//jsfiddle.net/BoyWonder/8mVQX/embedded/result/](http://jsfiddle.net/BoyWonder/8mVQX/embedded/result/)

```
body{
    padding-left:200px;
    margin:0;
}
div#sidebar{
   position:fixed;
   height:100%;
   width:200px; 
   top:0;
   left:0;
   background:grey; 
}
div#content{
    background:black;
    width:100%;
    height:1600px;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-04-04T05:50:01.660

这是仅使用两条 CSS 行的另一种选择

`.sidebar { position: sticky; top: 0; }`

功劳归于这篇[文章](https://dev.to/claireparker/how-to-make-a-sticky-sidebar-with-two-lines-of-css-2ki7)。

您还可以在[此处](https://codepen.io/claireparker/pen/bvWKdr)试验代码。

# objective-c - 在 Objective-C 中使用递归匿名块

> ID：15590806
> 
> 赞同：0
> 
> 时间：2013-03-23T18:57:59.853
> 
> 标签：objective-c, objective-c-blocks

我喜欢 JavaScript 将函数定义为变量的能力，并尝试在 Objective-C 中做类似的事情。特别是，我想使用一个匿名块编写一个递归函数，我可以在一个对象上调用它并让它在树中工作，在每个节点上应用一个更改：

```
void ( ^setDetailsLoaded )( Product* ) = ^void ( Product* prod ) {
    prod.detailsLoaded = true;
    for ( Group* group in prod.groups ) {
        for ( Product* mod in group.mods )
            setDetailsLoaded( mod );
    }
};
setDetailsLoaded( product ); <-- error here 
```

`error: address doesn't contain a section that points to a section in a object file`但是，当我运行程序（编译良好）时，我遇到了奇怪的错误[原文如此]。

我只是想知道是否可能需要保留块或其他东西，或者我是否应该使用函数指针而不是块来执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T19:06:15.363

由于块的实现方式——它们对所有原始类型变量进行 const 副本，并在创建时对其中引用的所有对象类型变量进行强引用——尝试在其内部递归引用块将导致崩溃锯。

您可以通过使用`__block`块变量本身的注释来解决这个问题：

```
__block void ( ^setDetailsLoaded )( Product* ) = ^void ( Product* prod ) {
    prod.detailsLoaded = true;
    for ( Group* group in prod.groups ) {
        for ( Product* mod in group.mods )
            setDetailsLoaded( mod );
    }
}; 
```

有关更多详细信息，请参阅[@bbum 的关于块的博客文章](http://www.friday.com/bbum/2009/08/29/blocks-tips-tricks/)（特别是提示 #7）。

# javascript - slides.js 导致不可预测的行为

> ID：15590808
> 
> 赞同：0
> 
> 时间：2013-03-23T18:58:13.793
> 
> 标签：javascript, jquery, html, css, slideshow

我在网站中使用 slides.js，到目前为止的页面应该是这样的：

![在此处输入图像描述](../Images/f8194eb541fe871e8b85ac21f278b9bb.png)

但是页面加载大约 1/4 倍时，它看起来像这样：

![在此处输入图像描述](../Images/a9308888389817610935e3f0ea364591.png)

或这个：

![在此处输入图像描述](../Images/005b071be85a7936716993bfa85bb62a.png)

这是我的 jQuery：

```
$(document).ready(function() {
    $('#slides').slidesjs({
        width: 860,
        height: 250,
        pagination: false,
        generatePagination: false,
        navigation: {
            active: false
        },
        play: {
            active: false,
            effect: "fade",
            interval: 7000,
            auto: true,
            pauseOnHover: false
        },
        effect: {
            fade: {
                speed: 2000
            }
        }
    });
}); 
```

HTML 只是 slides.js 标准：

```
<style>
    #slides {
        display: none;
    }
    .container {
        margin: 0 auto;
        width: 860px;
    }
</style>
<div class="container">
    <div id="slides">
        <img />
    </div>
</div> 
```

这是深不可测的烦人。如果这个问题至少是一致的，那就太好了。

# android - 当 Launching Activity 在后台时，第二个 Activity 不会打开

> ID：15590809
> 
> 赞同：1
> 
> 时间：2013-03-23T18:58:15.170
> 
> 标签：android, multithreading, android-activity

我有两个相关的活动：`Main`和`ShowResult`。第二个是从`Main`. 这很好用，但是一旦`Main`在后台，活动就不会打开。Logcat 没有显示任何异常。

显现：

```
<activity
        android:name="com.....ShowResultActivity"
        android:launchMode="singleTop"
        android:configChanges="orientation|keyboardHidden|screenSize"
        android:label="@string/app_name"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.Translucent.NoTitleBar.Fullscreen" >
    </activity>

    <activity
        android:name="com......MainActivity"
        android:configChanges="orientation|keyboardHidden|screenSize"
        android:label="@string/app_name"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.Holo.Wallpaper.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.HOME" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

线程类中的处理程序/从线程执行：

```
iOpen = new Intent(context, ShowResultActivity.class); // is written in the constructor
Bundle b = new Bundle(); // global

b.putInt("type", 1);
b.putString("url", value);
iOpen.putExtras(b);
context.startActivity(iOpen); 
```

显示结果：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    onNewIntent(getIntent());
}

@Override 
public void  onNewIntent(Intent i) {
    Bundle b = i.getExtras();
    int value = b.getInt("type");
    String url = b.getString("url");

    Log.e("opened :)", value+" "+url);

    if(value == 0) {
        showPictureAsync(url);
    } else if (value == 1) {
        showVideoAsync(url);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:24:08.637

将此添加到您的代码中

```
iOpen.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(iOpen); 
```

# javascript - 带有 jsTestDriver 的 WebStorm 找不到 jQuery

> ID：15590811
> 
> 赞同：1
> 
> 时间：2013-03-23T18:58:18.780
> 
> 标签：javascript, jquery, webstorm, js-test-driver

看到[这个问题](https://stackoverflow.com/questions/8132158/jstestdriver-is-not-a-function)，但重命名为`jQuery`无济于事。

我正在尝试在 Webstorm 中进行一些基本的单元测试。即使没有测试，它也找不到其他文件中定义的东西。

我有这个配置文件：

```
server: http://localhost:9876

load:
  - libs/jquery-1.9.0.min.js
  - src/jquery.combine/jquery.combine.js 
```

但是在运行测试时会出现此错误：

`error loading file: /test/src/jquery.combine/jquery.combine.js:2: Uncaught TypeError: Cannot set property 'union' of undefined`

路径有点不同，但点击它会显示正确的文件。

`jquery.combine.js`看起来像这样：

```
(function($) {
  $.union = function () {
    // ...
  };
}(jQuery)); 
```

为什么它没有检测到 jQuery？它正确包含它，因为如果我拼错了路径，它会抱怨缺少文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:17:14.870

我能够在 JetBrains 的帮助下解决这个问题。如果您为 QUnit 添加 jsTestDriver 适配器，这会以某种方式自行解决。[WebStorm 与这个](https://code.google.com/p/js-test-driver/wiki/QUnitAdapter)捆绑在一起。

我的更新`jsTestDriver.conf`看起来像这样：

```
load:
 - libs/qunit-jstd-adapter/equiv.js
 - libs/qunit-jstd-adapter/QUnitAdapter.js
 - libs/jquery/jquery.js
 - src/*.js

test:
 - test/*.js 
```

我正在粘贴从 JetBrains 获得的说明（稍​​作修改），这有助于我解决问题：

> 1) 删除 jquery.combine/libs/qunit/qunit.js - 这样做会使符号“测试”和“模块”无法解析，
> 
> 2) 打开 jquery.combine/test/difference.tests.js 并将测试光标放在任何“测试”函数调用上，稍等一下，您会看到建议：“添加 QUnit JsTestDriver 适配器？Alt+Enter”调用此快速修复将打开一个对话框，您应该在其中指定将添加“QUnit JsTestDriver Adapter”文件的目录。
> 
> 3) 由于 equiv.js 和 QUnitAdapter.js 文件位于您的项目中，将它们加载到 jsTestDriver.conf
> 
> 4) 现在右键单击 jsTestDriver.conf 并选择运行（JsTestDriver 服务器应该已启动并具有捕获的浏览器）。

# python - Networkx：将多重图转换为带有加权边的简单图

> ID：15590812
> 
> 赞同：26
> 
> 时间：2013-03-23T18:58:21.673
> 
> 标签：python, graph, networkx

我有一个多图对象，并希望将其转换为带有加权边的简单图对象。我查看了 networkx 文档，似乎找不到一个内置函数来实现这一点。我只是想知道是否有人知道networkx中可以实现此目标的内置功能。我查看了 to_directed() 、 to_undirected() 函数，但它们不符合我的目标。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-23T21:19:47.407

一种非常简单的方法就是将您的多图作为输入传递给`Graph`.

```
import networkx as nx

G = nx.MultiGraph()
G.add_nodes_from([1,2,3])
G.add_edges_from([(1, 2), (1, 2), (1, 3), (2, 3), (2, 3)])

G2 = nx.Graph(G) 
```

这将创建多重图的无向图，其中多条边合并为单条边。但是，如果您对合并的边有不同的属性，我不知道是否有任何方法可以确定保留哪个属性。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-24T12:09:52.020

这是通过对权重求和从加权多重图创建加权图的一种方法：

```
import networkx as nx
# weighted MultiGraph
M = nx.MultiGraph()
M.add_edge(1,2,weight=7)
M.add_edge(1,2,weight=19)
M.add_edge(2,3,weight=42)

# create weighted graph from M
G = nx.Graph()
for u,v,data in M.edges(data=True):
    w = data['weight'] if 'weight' in data else 1.0
    if G.has_edge(u,v):
        G[u][v]['weight'] += w
    else:
        G.add_edge(u, v, weight=w)

print(G.edges(data=True))
# [(1, 2, {'weight': 26}), (2, 3, {'weight': 42})] 
```

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2013-03-23T19:43:33.640

您可以使用 igraph 库。从这里下载 python 扩展模块：http: [//igraph.sourceforge.net/download.html](http://igraph.sourceforge.net/download.html)

# android - Android 手机和平板电脑用户界面

> ID：15590815
> 
> 赞同：1
> 
> 时间：2013-03-23T18:58:42.110
> 
> 标签：android, layout, user-interface

我制作了一款适用于平板电脑和手机的应用程序。但正如我们所知，我们应该为平板电脑设置不同的布局（例如更大的字体和图像等）。

我的问题是如何提供布局，以便它们只能由平板电脑而不是手机选择。

示例：如果我将 xhdpi 或 hdpi 布局视为平板电脑，那么它可能会被某些使用相同配置的设备选中。

那么如何确定当前设备是平板电脑还是手机并为其提供特定的布局呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:02:00.597

> 我的问题是如何提供布局，以便它们只能由平板电脑而不是手机选择。

要么使用经典的屏幕尺寸存储桶（例如，`res/layout-large/`），要么使用您自己的存储桶`-swNNNdp`（例如，`res/layout-sw600dp/`用于最短宽度为 600dp 或更高的设备上的资源）。

这在文档[here](http://developer.android.com/guide/practices/screens_support.html)、[here](http://developer.android.com/guide/practices/tablets-and-handsets.html)、[here](http://developer.android.com/training/multiscreen/index.html)以及其他一些地方都有解释。

> 示例：如果我将 xhdpi 或 hdpi 布局视为平板电脑，那么它可能会被某些使用相同配置的设备选中。

`-xhdpi`和`-hdpi`是屏幕密度，与屏幕尺寸没有直接关系。

# asp.net-mvc-3 - ('#Window').data('tWindow').close()

> ID：15590818
> 
> 赞同：0
> 
> 时间：2013-03-23T18:58:59.487
> 
> 标签：asp.net-mvc-3

我有一个 Telerik 弹出窗口。它可以正常打开；但是，我在关闭窗口时遇到问题。如果我向 javascript、alert("#Window") 或 alert($(this).closest('#Window')) 添加警报，它将显示 [object Object]。但是，alter("#Window").data("tWindow") 或 alert($(this).closest('#Window').data('tWindow')) 将显示 null。我已经从父页面或子页面中删除了 jquery 和 javascript 引用，它没有任何区别。任何形式的帮助将不胜感激。请参阅下面的示例代码

这是弹出窗口：

```
@{Html.Telerik().Window()
     .Name("Window")
     .Title("Student Window")
     .LoadContentFrom(Url.Action("AddReason", "Reason", new { id = reasonID }, Request.Url.Scheme))
     .ClientEvents(events => events
         .OnClose("ClosingWindow")
         )
     .Draggable(false)
     .Scrollable(false)
     .Width(800)
     .Height(600)
     .Modal(true)
     .Visible(false)
     //.Effects(fx => fx
     //    .Zoom()
     //    .Opacity())
     .Render();
 } 
```

这是JavaScript：

```
 <script src="@Url.Content("~/Scripts/jquery-1.4.4.js")" type="text/javascript">

</script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/spin.min.js")" type="text/javascript"></script>

function DoOpen(id) {
        var url = '@Url.Action("AddReason","Reason")';
        $.post(url, { id: id }, function (data) {
            var window = $('#Window').data('tWindow').center();
            window.content(data);
            window.open();
        });
   }
 //This javascript is in the main page
//I did an alert. alert($('#Window')) and 
alert($('#Window').data('tWindow')) they both return null

  function ClosingWindow() {
      $('#Window').prop("checked", "checked");
      $('#Window').data('tWindow').close();
       window.location.href = window.location.href;
   }

Here is the partial view :

    @model Student.Models.Reason
@using Student.Example

@{
    ViewBag.Title = "Add Reason";
    Layout = "~/Views/Shared/_PartialReason.cshtml";
}

<script type="text/javascript">
    function CloseWindow() {
//        alert($("#Window").closest('.t-window').data('#tWindow'));
//        $("#Window").data("tWindow").close();
        $('#Window').prop("checked", "checked");
         window.location.href = window.location.href;
    }

</script>

@using (Html.BeginForm("AddReason", "Reason", FormMethod.Post))
{
    @Html.ValidationSummary(true)
    <fieldset>
        <div class="editor-field">
            @(Html.Telerik().Editor()
            .Name("EncountersArchive")
            .HtmlAttributes(new { style = "height:310px;", id = "AddAReason" })
            .Encode(true)
            .Tools(
            tools => tools
                       .Clear()
                        .Bold().Italic().Underline().Strikethrough().Subscript().Superscript().Separator()
                        .FontName().FontSize()
                        .FontColor().BackColor().Separator()
                        .JustifyLeft().JustifyCenter().JustifyRight().JustifyFull().Separator()
                        .InsertUnorderedList().InsertOrderedList().Separator()
                        .Indent().Outdent().Separator()
            ))
        </div>
        <p style="text-align:center">

            <input type="submit" value="Reason" id="AddReasonID" onclick="CloseWindow()"/>
        </p>
    </fieldset>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T01:57:06.723

弹出窗口上的 OnClose 事件导致了该问题。仅当用户希望在窗口关闭后执行其他操作时才应使用 onclose 事件。如果目的只是关闭窗口，Telerik 控件会自动处理它。就我而言，我只是删除了 onclose 事件，它就像一个魅力。

# c - 在 C 中加载或保存位图句柄 win32

> ID：15590819
> 
> 赞同：0
> 
> 时间：2013-03-23T18:59:05.650
> 
> 标签：c, winapi, clipboarddata, hbitmap

最终，我想将剪贴板中的图像保存到 img 文件（.bmp、JPEG 等）。那是一条漫长的道路，所以我只想将图像加载到窗口中，但 GetClipboardData() 似乎没有任何成功。它总是返回 NULL。搜索对我没有帮助..从剪贴板获取 HBITMAP 的代码：

```
HWND hwnd = FindWindow("ConsoleWindowClass", NULL);
if(!OpenClipboard(hwnd)) printf("Error opening clipboard\n");
HBITMAP hbmp;
EmptyClipboard();
Sleep(3000);
if((hbmp = (HBITMAP)GetClipboardData(CF_BITMAP)) == NULL) printf("Error geting clipboard data\n"); 
```

输出：获取剪贴板数据时出错

我尝试使用 GetLastError() 格式化和所有内容，它说找不到文件。睡眠是等待我按打印屏幕，以确保剪贴板有一些数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:33:11.423

[请参阅此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649051%28v=vs.85%29.aspx)的评论：

> 如果应用程序在 hwnd 设置为 NULL 的情况下调用 OpenClipboard，EmptyClipboard 会将剪贴板所有者设置为 NULL；这会导致 SetClipboardData 失败。

您是否已验证`FindWindow`不返回 null？如果是这样，`OpenClipboard`仍然会成功，但`GetClipboardData`会失败。我敢打赌，这正是正在发生的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:11:44.527

**问题与`Sleep()``EmptyClipboard()`**
`GetClipboardData()`剪贴板为空有关**并且失败。**确切的错误是：“线程没有打开剪贴板”。
使用时`CF_TEXT`不会发生这种情况，我认为是因为字符串可以用 null 填充，但是`HBITMAP`除了位图内容的句柄之外，a 无法获取其他内容。
我曾经`Sleep(3000)`为了有时间按打印屏幕，但快照没有保存在剪贴板中，因为我在我的应用程序中打开了它。删除`EmptyClipboard()`解决了这个问题，因此在以编程方式打开它之前获取剪贴板中已经存在的快照。

# windows-server-2008-r2 - 在连接到 Win Server 2008 的客户端 PC 上打开端口

> ID：15590820
> 
> 赞同：0
> 
> 时间：2013-03-23T18:59:17.393
> 
> 标签：windows-server-2008-r2

我在客户端 PC 上有一个端口 12345，连接到交换机，连接到服务器 2008，连接到互联网的 Uverse 调制解调器/路由器。我需要允许传入请求到该端口（转发/打开）。

我在路由器和服务器上都打开了端口号，但它仍然不允许连接。

如果客户端直接连接到路由器，则端口是打开的，但在通过服务器连接时无法识别块。请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-19T12:58:39.927

在你的windows 2008中，进入路由和远程访问，进入IPV4，NAT，选择外部网络适配器，右键单击，属性。

转到第三个选项卡（端口和服务）单击添加为其命名

放：

TCP

传入端口：12345

私人地址：你的电脑本地IP地址

端口 12345

# java - JAVA，循环的奇怪结果

> ID：15590823
> 
> 赞同：2
> 
> 时间：2013-03-23T18:59:32.157
> 
> 标签：java

我有一个简单的问题。为什么这个循环的结果是 12？我还以为11...

```
public static void main(String[] args) {
    int i = 10;

    while (i++ <= 10){
    }

    System.out.println(i);
}

//RESULT: 12 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T19:03:12.833

它将在 while 循环中运行条件两次，第一次何时`i = 10,`将其增加到 11。然后它将`i <= 10`再次检查是否为假，但它仍然会增加`i`导致它变为 12。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T19:04:16.460

发生这种情况是因为它必须在退出循环之前进行另一次检查。

```
i is 10
check i++<=10?
i is 11
check i++<10?
exit
i is 12 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T19:16:29.627

```
Iteration 1 : i=10
condition true  ===>>> while loop executed once
i incremented to 11

iteration 2 : i=11
condition false ===>>> while loop exited
but after exiting the while loop
i is incremented again to ===>>> i =12

and that is what you get as output 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T19:07:10.340

`i++`说“给我 的当前值`i`，*然后*增加它”。在这种情况下，当`i = 10`它递增到`11`then 时，表达式对于前一个 value 为 true `10`，因此循环重复，对 进行测试`i = 11`，递增`i`到`12`，表达式现在为 false，停止循环。

这种后增量行为有点令人困惑，因此只能在您需要时使用。一般来说，最好假装`++`什么都不返回，这通常会使代码的意图更加清晰：

```
while(i <= 10) {
    i++;
} 
```

# .net - 如何使用 .Net 数据服务和服务操作进行 TDD

> ID：15590824
> 
> 赞同：0
> 
> 时间：2013-03-23T18:59:32.367
> 
> 标签：.net, service, tdd, operations

我当前的解决方案是创建一个具有我的服务/数据业务逻辑的类，使用本地 db (mdf) 对其进行测试，然后使用数据服务类中的相同功能包装该类。

```
public class MyDataService : DataService<MyEntities>
{
    [WebGet]
    [SingleResult]
    public Team GetTeam(string name)
    {
        return _serviceBusinessLogic.GetTeam(name);
    }
}

//seam here to make this testable
public class ServiceBusinessLogic
{
    public Team GetTeam(string name)
    {
        return _dbContext.Teams.SingleOrDefault(p => p.Name == name);
    }
} 
```

但是由于它们是相同的，因此不需要包装函数。

我想直接测试数据服务，但由于 CreateDataSource 受到保护，我无法设置 DataSource。

```
public class MyDataService : DataService<MyEntities>
{
    [WebGet]
    [SingleResult]
    public Team GetTeam(string name)
    {
        //problem is CurrentDataSource is not settable, so cant set it in test
        return CurrentDataSource.Teams.SingleOrDefault(p => p.Name == name);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:51:11.130

您可以以允许注入数据源的方式编写类，如下所示：

```
public class MyDataService : DataService<MyEntities>
{
    private MyEntities _dataSource;

    public MyDataService() : this(new MyEntities()){}

    public MyDataService(MyEntities dataSource)
    {
        _dataSource = dataSource;
    }

    protected override MyEntities CreateDataSource()
    {
         return _dataSource;
    }

    [WebGet]
    [SingleResult]
    public Team GetTeam(string name)
    {
        return CurrentDataSource.Teams.SingleOrDefault(p => p.Name == name);
    }
} 
```

如果`CreateDataSource`在基本构造函数中被调用，您可能必须使用静态变量并小心清除状态，但我敢打赌这可以按原样工作。

# php - preg_match('/[a-z0-9\-]+/i', $u) $ 符号

> ID：15590825
> 
> 赞同：-2
> 
> 时间：2013-03-23T18:59:38.337
> 
> 标签：php, preg-match

当我提交此表格时，我不断得到一个不应该做的匹配。我知道这与美元符号有关，但我无法计算出组合，我似乎无法在谷歌上找到正确的答案。

```
<?php
if ( isset( $_POST['test'] ) ) {
    $u = $_POST['test'];
    echo preg_match('/[a-z0-9\-]+/i', $u);
}
?>

<form method="post">
    <input type="text" name="test" value="12$abc213">
    <button type="submit">Submit</button>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T19:04:21.320

应该

```
preg_match('/^[a-z0-9\-]+$/i', $u) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T19:04:30.900

您必须匹配字符串的开头和结尾，否则它将与匹配的子字符串一起传递：

```
preg_match('/^[a-z0-9\-]+$/i', $u); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T19:06:02.090

您的 preg_match 正在查找匹配项，因为 '1' 是一个匹配项，'2' 是一个匹配项，'abc213' 是一个匹配项，'a' 是一个匹配项，等等。你想确保整个字符串匹配吗？然后试试这个模式：

```
preg_match("/^[a-z0-9\-]+$/i", $u); 
```

将表达式包装在 ^..$ 中意味着它必须以该序列开始和结束。除非字符串中的所有字符都与此模式匹配，否则这将不匹配，如果字符串中的任何“字符序列”与该模式匹配，您的字符将匹配。

# ruby-on-rails - 带检查空字段的 ActiveRecord 查询

> ID：15590827
> 
> 赞同：0
> 
> 时间：2013-03-23T18:59:44.880
> 
> 标签：ruby-on-rails, activerecord

我正在为 ActiveRecord 生成条件，如下所示：

```
 query = {:status => status}

  if (limit)
    query[:limit] = @vals['limit'].to_i
  end

  if (offset && limit)
    query[:offset] = (offset - 1) * limit
  end

  rows = Review.all(query) 
```

这工作得很好。我过滤评论的“状态”，如果传入，我会填写限制和偏移量。问题是现在我需要在评论内容字段上添加“非空”检查。IE AND review.content != '' && review.content != nil

我读过你可以做类似的事情

```
Review.were("review <> ''") 
```

这本身就可以工作，但我不确定如何将其合并到我的上述命令中。或者更改上述命令以使用 where 语句而不是“all”语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:35:50.123

我会写这样的代码

```
query = Review.where("status = ?", status).where("review <> '' AND review IS NOT NULL")

if limit.present?
  query = query.limit(limit) 
  if offset.present?
    query = query.offset((offset - 1) * limit)
  end
end

rows = query.all 
```

rails 查询对象进行惰性评估，因此您可以构建查询，在开始迭代行之前不会向数据库发出 sql

交替`.where("review <> '' AND review IS NOT NULL")`

`.where("COALESCE(review, '') <> ''")`

# c - 将双精度类型数组添加到未定义长度数组的结构中

> ID：15590830
> 
> 赞同：0
> 
> 时间：2013-03-23T18:59:59.180
> 
> 标签：c

假设我在函数中调用了以下数组：

```
 int n = 20;
      double x[] = {
        0.003435700407453, 0.018014036361043, 0.043882785874337, 0.080441514088891,
        0.126834046769925, 0.181973159636742, 0.244566499024586, 0.313146955642290,
        0.386107074429177, 0.461736739433251, 0.538263260566749, 0.613892925570823,
        0.686853044357710, 0.755433500975414, 0.818026840363258, 0.873165953230075,
        0.919558485911109, 0.956117214125663, 0.981985963638957, 0.996564299592547
      };
      double w[] = {
        0.008807003569576, 0.020300714900193, 0.031336024167055, 0.041638370788352,
        0.050965059908620, 0.059097265980759, 0.065844319224588, 0.071048054659191,
        0.074586493236302, 0.076376693565363, 0.076376693565363, 0.074586493236302,
        0.071048054659191, 0.065844319224588, 0.059097265980759, 0.050965059908620,
        0.041638370788352, 0.031336024167055, 0.020300714900193, 0.008807003569576
      }; 
```

我想返回 int n 和两个数组。如果我知道数组 x 和 w 的长度，我可以使用一个很容易的结构来做到这一点。但是，取决于输入的函数可以返回长度为 2、4、6、15 等的数组 x 和长度为 2、4、6、15 等的数组 w。我不知道数组 w 的长度和X。

我创建了一个结构：

```
 struct quadpts{    //structure used to pass multiple values into roeFlux
    int n;  //The specific heat ratio
    double *x;
    double *w;
};
typedef struct quadpts Quadpts; 
```

并使用：

```
Quadpts qpt = (Quadpts) malloc(size(Quadpts)); 
```

在数组 x 和 w 中分配不同的长度值。然而，我意识到在我看到和查找的许多示例中，人们一次只添加一个值。是否可以将整个数组分配给结构中的不同长度数组？或者我是否仅限于在结构 1 中填充数组。这可以使用 for 循环来完成吗？如果是这样，我是否必须定义

```
Quadpts qpt = (Quadpts) malloc(size(Quadpts)); 
```

每次都以不同的方式来解释结构数组的新增内容？

谢谢您的帮助。我是 C 的新手，仅限于 MATLAB 知识。

编辑：

我意识到我对那些大数组有问题。我正在使用 switch case 语法来为变量 x 和 w 分配不同大小的数组。但我意识到我需要指定这些数组的大小，并且它们只能在 for 循环中看到。我怎样才能使数组可以在 for 循环之外看到，以便我可以将它们保存到结构中？以下是我的代码的缩短版本。我经常在 double x[n] 处出错，因为之前的定义在这里或重新定义。

```
double quad1d(int pqOrder){
int n;
switch(pqOrder)
{
case 1:
    n = 1;
    double x[n] = {
        0.500000000000000
    };
    double w[n] = {
        1.000000000000000};
    break;

case 3:
      // Order 3 Gauss-Legendre points
      n = 2;
      double x[n] = {
        0.211324865405187, 0.788675134594813
      };
      double w[n] = {
        0.500000000000000, 0.500000000000000
      };
      break;
    }
int i;
Quadpts * qpt = (Quadpts*)malloc(sizeof(Quadpts));
for (i=0; i<n; i++){
    qpt->x = malloc(qpt->x_len * sizeof(double));
    qpt->w  = malloc(qpt->w_len * sizeof(double));
    qpt.x=x[i];
    qpt.w=w[i];

}
return &(qpt[0]); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:26:32.520

可能还有其他问题，但立即突出的一件事是在结构中拥有指针还不够好，在您的情况下，您必须对每个指针使用 malloc()。

而且，如果您在函数中声明那些大数组，它们将位于最终将被覆盖的堆栈中。

利用：

```
struct quadpts{    //structure used to pass multiple values into roeFlux
    int n;  //The specific heat ratio
    double *x;
    int x_len;
    double *w;
    int w_len;
}; 
```

在函数内部：

```
qpt->x = malloc(qpt->x_len * sizeof(double));
qpt->w  = malloc(qpt->w_len * sizeof(double)); 
```

然后填充你的数组。一旦你完成使用它们[在你的函数之外]，不要忘记释放它们。

另一个错误是您应该将 malloc() 与结构指针一起使用：

```
Quadpts * qpt = (Quadpts*)malloc(sizeof(Quadpts)); 
```

一旦不再需要它，您还需要 3 行代码以避免内存泄漏。

```
free(qpt->x);
free(qpt->w);
free(qpt); 
```

# c++ - 编译器不定义隐式的条件（构造函数、析构函数、复制构造函数、复制赋值）

> ID：15590832
> 
> 赞同：29
> 
> 时间：2013-03-23T19:00:09.467
> 
> 标签：c++, default-constructor, implicits

这应该是一个微不足道的问题，但我无法在 stackoverflow 上明确找到它。

如果用户未提供以下内容，则将隐含定义。

1.  默认（无参数）构造函数
2.  复制构造函数
3.  复制赋值运算符
4.  析构函数

但是我在某处读过（我现在似乎找不到），在某些情况下编译器不会隐式实现它们。

这些条件是什么？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-23T19:04:27.630

[**默认构造函数**](http://en.cppreference.com/w/cpp/language/default_constructor)（例如，`X()`）将不会在以下情况下隐式生成：

*   您已经明确*声明*了任何构造函数
*   存在不可默认构造的数据成员（例如引用、`const`对象或没有或不可访问的默认构造函数的类）
*   (C++11) 你已经明确告诉编译器不要使用`X() = delete;`

[](http://en.cppreference.com/w/cpp/language/copy_constructor)**`X(const X&)`如果出现以下情况，将不会隐式生成[**复制构造函数**](http://en.cppreference.com/w/cpp/language/copy_constructor)（例如**

 ***   您已明确*声明*了一个复制构造函数（对于`X`构造函数采用的类`X`，`X&`或`const X&`）
*   存在不可复制构造的数据成员（例如没有或不可访问的复制构造函数的类）
*   基类不可复制构造
*   (C++11) 你已经*声明*了一个移动构造函数或移动赋值运算符
*   (C++11) 你已经明确告诉编译器不要使用`X(const X&) = delete;`

[](http://en.cppreference.com/w/cpp/language/as_operator)**`X& operator=(const X&)`如果出现以下情况，将不会隐式生成[**复制赋值运算符**](http://en.cppreference.com/w/cpp/language/as_operator)（例如**

 ***   您已经明确*声明*了一个复制赋值运算符（对于`X`一个`operator=`服用类`X`，`X&`或`const X&`）
*   您的类中有一个不可复制赋值的数据成员（例如引用、`const`对象或没有或无法访问赋值运算符的类）
*   基类不可复制分配
*   (C++11) 你已经*声明*了一个移动构造函数或移动赋值运算符
*   (C++11) 你已经明确告诉编译器不要使用`X& operator=(const X&) = delete;`

[](http://en.cppreference.com/w/cpp/language/destructor)**`~X()`在以下情况下不会隐式生成[**析构函数**](http://en.cppreference.com/w/cpp/language/destructor)（例如**

 ***   你已经明确*声明*了一个析构函数
*   (C++11) 你已经明确告诉编译器不要使用`~X() = delete;`

[](http://en.cppreference.com/w/cpp/language/move_constructor)**`X(X&&)`在以下情况下，将不会隐式生成[**移动构造函数**](http://en.cppreference.com/w/cpp/language/move_constructor)(C++11)（例如**

 ***   您已经明确*声明*了一个移动构造函数（对于 class `X`，一个构造函数采用`X&&`）
*   您已*声明*复制赋值运算符、复制构造函数、析构函数或移动赋值运算符
*   您的类中有一个无法移动构造的数据成员（是`const`、是引用，或者具有已删除、不可访问或不明确的移动构造函数）
*   基类不能移动构造
*   您已明确告诉编译器不要使用`X(X&&) = delete;`

[](http://en.cppreference.com/w/cpp/language/move_constructor)**`X& operator=(X&&)`在以下情况下，将不会隐式生成[**移动赋值运算符**](http://en.cppreference.com/w/cpp/language/move_constructor)(C++11)（例如**

 ***   您已经明确*声明*了一个移动赋值运算符（对于 class `X`，一个`operator=`taking `X&&`）
*   您已经*声明*了复制赋值运算符、复制构造函数、析构函数或移动构造函数
*   您的班级中有一个数据成员不能被移动分配（是`const`、是引用，或者有一个已删除、不可访问或不明确的移动分配运算符）
*   基类不能被移动分配
*   您已明确告诉编译器不要使用`X& operator=(X&&) = delete;`**********

# javascript - 通过render_javascript将javascript变量传递给部分

> ID：15590837
> 
> 赞同：1
> 
> 时间：2013-03-23T19:00:55.660
> 
> 标签：javascript, jquery, ruby-on-rails

我从 Ajax 调用中收到了一个 google ID，然后想使用该 ID 来更新我视图上的按钮。

这是 new.js.erb 中的代码，它链接到 new.html.erb。

问题是，我不知道如何传递变量的内容。餐厅是一个json。警报返回正确的 ID，当我在终端上使用返回的 google id 搜索我的数据库时，我找到了餐厅。

这是代码：

```
alert(restaurant["google_id"]);
    var google_id = restaurant["google_id"];
    $("#rating_bar").html("<%= escape_javascript(render 'reviews/buttons/full_profile_rate_restaurant', :google_id => "+google_id+".html_safe) %>"); 
```

发生的情况是传递的变量是字符串“google_id”，而不是作为 google ID 的字母和数字的组合。我尝试了多种方法，这只是许多错误方法之一——我认为这个问题对于非常了解他们的 JS 的任何人来说都很容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T19:45:01.460

无法将 JS 变量传递给 ruby​​ 部分。

正如[Ryan Bigg](https://stackoverflow.com/users/15245/ryan-bigg)[在这里](https://stackoverflow.com/questions/6951645/how-to-pass-javascript-variable-to-rails-instance-variables)针对相同类型的问题所解释的那样，在渲染该部分时无法发送变量。我们需要解决一些其他问题。即使我也遇到过同样的问题。

或者，

如果那是**google_id**只是在部分中显示的变量，则在渲染该部分后手动更新这些 div。

喜欢

```
$("#rating_bar").html("<%= escape_javascript(render 'reviews/buttons/full_profile_rate_restaurant', :google_id => "sample_id") %>");
// Now update the required elements
$("#what-ever-ids").text(google_id); 
```

或者只是在该控制器中创建一些其他操作，然后调用向该操作发送一个 ajax 请求，您将拥有这个 js 变量，并在该**js.erb**文件中呈现您实际想要使用**google_id**变量更新的相同部分.

# apache - Apache Mod Rewrite for Pretty URLs 不起作用

> ID：15590839
> 
> 赞同：2
> 
> 时间：2013-03-23T19:01:02.843
> 
> 标签：apache, .htaccess, mod-rewrite

我试图弄清楚如何做一个 apache`mod_rewrite`来重新映射`$_GET`。

**我要完成的工作：**

目前，要进入页面，必须去

`http://www.domain.com/index.php?URL=pages/the-page.php`

**我希望它以两种方式工作：**

如果有人去`domain.com/the-page`，它会将他们带到上面，但保持它看起来像这样。其次，如果有人访问`http://www.domain.com/index.php?URL=pages/the-page.php`，它仍然会显示为`domain.com/the-page`，从而保持 URL 简洁明了。

**最近尝试的代码**

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{REQUEST_URI} ^/index\.php$
RewriteCond %{QUERY_STRING} URL=pages/([a-z0-9-_]+)\.php$
RewriteRule ^(.*) /%1 
```

我很确定我在 apache 中正确设置了所有内容`httpd.conf`。我正在使用 XAMPP 在本地进行测试，在更改时重新启动 apache，仍然没有。我哪里错了？

***我宁愿在 .htaccess 中处理这个***

我正在使用 XAMPP localhost 并尝试在实时服务器上。

**日志文件：**

`127.0.0.1 - - [05/Apr/2013:16:50:43 --0400] [localhost/sid#2f3140][rid#3b14068/initial] (3) [perdir C:/xampp/htdocs/cdi/] strip per-dir prefix: C:/xampp/htdocs/cdi/index.php -> index.php`

`127.0.0.1 - - [05/Apr/2013:16:50:43 --0400] [localhost/sid#2f3140][rid#3b14068/initial] (3) [perdir C:/xampp/htdocs/cdi/] applying pattern '^(.*)' to uri 'index.php'`

`127.0.0.1 - - [05/Apr/2013:16:50:43 --0400] [localhost/sid#2f3140][rid#3b14068/initial] (1) [perdir C:/xampp/htdocs/cdi/] pass through C:/xampp/htdocs/cdi/index.php`

**使用 Olaf 的脚本更新日志*（最后一条规则被注释掉）***

`127.0.0.1 - - [05/Apr/2013:20:02:24 --0400] [localhost/sid#2e3140][rid#3b14090/initial] (3) [perdir C:/xampp/htdocs/cdi/] strip per-dir prefix: C:/xampp/htdocs/cdi/index.php -> index.php`

`127.0.0.1 - - [05/Apr/2013:20:02:24 --0400] [localhost/sid#2e3140][rid#3b14090/initial] (3) [perdir C:/xampp/htdocs/cdi/] applying pattern '^' to uri 'index.php'`

`127.0.0.1 - - [05/Apr/2013:20:02:24 --0400] [localhost/sid#2e3140][rid#3b14090/initial] (3) [perdir C:/xampp/htdocs/cdi/] strip per-dir prefix: C:/xampp/htdocs/cdi/index.php -> index.php`

`127.0.0.1 - - [05/Apr/2013:20:02:24 --0400] [localhost/sid#2e3140][rid#3b14090/initial] (3) [perdir C:/xampp/htdocs/cdi/] applying pattern '^index\.php$' to uri 'index.php'`

`127.0.0.1 - - [05/Apr/2013:20:02:24 --0400] [localhost/sid#2e3140][rid#3b14090/initial] (2) [perdir C:/xampp/htdocs/cdi/] rewrite 'index.php' -> '/newhome?'`

`127.0.0.1 - - [05/Apr/2013:20:02:24 --0400] [localhost/sid#2e3140][rid#3b14090/initial] (3) split uri=/newhome? -> uri=/newhome, args=<none>`

`127.0.0.1 - - [05/Apr/2013:20:02:24 --0400] [localhost/sid#2e3140][rid#3b14090/initial] (2) [perdir C:/xampp/htdocs/cdi/] explicitly forcing redirect with http://localhost/newhome` ***<--这似乎是导致问题的原因***

`127.0.0.1 - - [05/Apr/2013:20:02:24 --0400] [localhost/sid#2e3140][rid#3b14090/initial] (1) [perdir C:/xampp/htdocs/cdi/] escaping http://localhost/newhome for redirect`

`127.0.0.1 - - [05/Apr/2013:20:02:24 --0400] [localhost/sid#2e3140][rid#3b14090/initial] (1) [perdir C:/xampp/htdocs/cdi/] redirect to http://localhost/newhome [REDIRECT/302]`

感谢所有帮助的人。我花了 2 天的时间试图让它工作！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:22:01.640

基本上，你需要两条规则。一条规则将客户端重定向到干净的 URL，另一条规则将漂亮的 URL 内部重写为真实内容`index.php`。

假设`index.php`and`.htaccess`在目录中`cdi`

```
RewriteEngine on

# prevent endless loop
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L]

# redirect the client
RewriteCond %{QUERY_STRING} URL=pages/(.+?)\.php
RewriteRule ^index\.php$ /cdi/%1? [R,L]

# exclude rewriting all files located in /cdi/files
RewriteCond %{REQUEST_URI} !^/cdi/files/
# rewrite to real content
RewriteRule ^.*$ /cdi/index.php?URL=pages/$0.php [L] 
```

**更新**：

当请求为`/cdi/index.php?URL=pages/abc.php`时，第二条规则提取需要的`URL`部分并将客户端重定向到新的 URL 路径。然后客户端请求新的 URL `/cdi/abc`，第三条规则接受这个并对真实内容进行内部重写。

这一切都可以正常工作，但会无限期地重写和重定向。为了打破这个无休止的规则，第一条规则检查环境`%{ENV:...}`，如果请求已经被重定向`REDIRECT_STATUS`，然后停止循环[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

```
RewriteRule ^ - [L] 
```

它匹配所有内容`^`并且不进行[替换](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rhs)，但以标志结束重写周期[`[L]`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_l)

除了使用系统提供的环境`STATUS`/ `REDIRECT_STATUS`，您还可以自己使用标志设置一个变量[`E=SEO:1`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_e)，然后使用

```
RewriteCond %{ENV:REDIRECT_SEO} 1 
```

有关`REDIRECT_`前缀，请参阅[可用变量](http://httpd.apache.org/docs/current/custom-error.html#variables)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:55:24.247

您的方法似乎很好，但**您的要求`RewriteCond`不符合**您的要求：

```
RewriteCond %{REQUEST_URI} ^index.php?URL=pages 
```

意思是“如果有人请求以'index.php”开头的东西，则重写URL——但这不是任何人都会请求的。您希望您的访问者请求漂亮的 URL。

如果您的服务器只需要为 /the-page 提供这些请求，则可以完全放弃该条件。然后将重写任何 URL。（注意：这可能不是你想要的！）

否则，条件应该是这样的：

```
RewriteCond %{REQUEST_URI} ^[a-z0-9-_]{1,40} 
```

如果你不想弄乱正则表达式，你也可以试试这个：

```
RewriteCond %{REQUEST_FILENAME} !-f 
```

这意味着“如果用户请求一个找不到文件的 URL，则根据即将到来的`RewriteRule`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T16:45:00.877

如果您希望该组`([0-9]+)`按字母顺序排列，那么只需将其更改为`([a-z]+)`and 如果您希望它是字母数字组，则将其更改为`([a-z0-9]+)`,`([a-z0-9-_]+)`如果带有连字符和下划线。如果您希望它手动设置它们的限制，您可以使用这种格式来做到这一点`([a-z0-9-_]{1,40})`。你看到了吗，加号消失了，因为它限制了`[chars]`with 1 到任何东西，并且`{1,40}`限制了`[chars]`with 1 到 40，你可以改变它。

* * *

你知道真正的问题是什么吗？是我的压力吗.. 想象一下，即使我知道你想将*/$var*重新映射到*/index.php?URL=pages/$var.php*我仍然试图给你一个错误的信息，它将重写*/index.php?URL =pages/$var.php*进入*/$var*。在我睡了 4 个小时之后，我才意识到这一点。当你的睡眠时间不对时，你看到发生了什么吗？当我的大脑运转良好时，也许我会给你的一条规则是：

```
RewriteRule ^([a-z0-9-_]+)/?$ /index.php?URL=pages/$1.php 
```

为什么观众让这件事发生……我以前的代码需要被否决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T19:11:53.420

你可以试试这个：

```
RewriteRule ^/([a-z0-9_-]{1,40})/?$ index.php?URL=pages/$1.php 
```

虽然理想情况下您可能希望摆脱查询字符串变量的“pages/”部分，因为这个固定常量可以由 index.php 脚本处理。

# ember.js - 如何在 ember js 中渲染多个模型

> ID：15590840
> 
> 赞同：0
> 
> 时间：2013-03-23T19:01:14.720
> 
> 标签：ember.js

我有 3 个模型货币、收入和收入操作。我想在某些路线上渲染它们。正确的方法是什么？如何在一页上渲染三个模型？

**UPD：**这些模型之间没有任何关联。

route.js.coffee

```
@route 'addincome', { path: 'operations/addincome' }

EmberMoney.AddincomeRoute = Ember.Route.extend
  model: ->
    EmberMoney.IncomeOperation.find() 
```

模板/addincome.handlebars

```
<div class="row container-bg"><br>
<div class="span6">
  <ul>
      {{#each operation in controller}}
        <li>{{operation.sum}}</li>
      {{/each}}
  </ul>
</div>
<div class="span6">
  {{outlet}}
</div>
</div>

// I want to render here more models! For example:

  <ul>
      {{#each income in incomes}}
        <li>{{income.name}}</li>
      {{/each}}
  </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:25:00.373

未经测试，但在路线的 setupController 中，您可以：

```
# excuse the coffeescript...
setupController: (controller) ->
  controller.set('incomes', App.Income.find()); 
```

然后在您的模板中：

```
<ul>
  {{#each income in controller.incomes}}
    <li>{{income.name}}</li>
  {{/each}} 
```

# android - 如何知道意图 ACTION_PICK 一无所获

> ID：15590841
> 
> 赞同：0
> 
> 时间：2013-03-23T19:01:18.673
> 
> 标签：android, android-intent

以下代码启动图库以从中选择图像：

```
Intent choosePictureIntent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
startActivityForResult(choosePictureIntent, 1); 
```

现在，我的问题是我怎么能知道在`onResultActivity()`没有选择任何东西的情况下意图回来了？（即用户没有从图库中选择任何图像，只是点击了取消按钮）

我正在使用以下代码，但它并不能帮助我完成任务！

```
Uri imageUriForGallery = intent.getData();
if(imageUriForGallery == null || imageUriForGallery.toString() == null) {
    Toast.makeText(this, "You didn't choose an image", Toast.LENGTH_LONG).show();
        break;
} 
```

当用户没有从图库中选择图像而只是点击图库上的取消按钮时，我的应用程序崩溃了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:03:30.047

> 现在，我的问题是我怎么能知道在`onResultActivity()`没有选择任何东西的情况下意图回来了？

您的[`onActivityResult()`方法](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)将[在`RESULT_CANCELED`](http://developer.android.com/reference/android/app/Activity.html#RESULT_CANCELED)第二个参数中调用。

# ios - iOS - 从弹出框内部（推送）视图调用主视图上的委托方法？

> ID：15590848
> 
> 赞同：0
> 
> 时间：2013-03-23T19:01:54.503
> 
> 标签：ios, delegates, nsnotificationcenter, popover, childviews

我需要从弹出视图的推送视图（嵌入在导航控制器中）调用我的主视图控制器（'showDetails:'）上的委托方法。这一切都来自故事板设置。

层次结构是：主视图->弹出框（导航控制器中嵌入的菜单表视图）->弹出框辅助视图（推送到弹出框导航控制器上）

我知道如何使用 prepareForSegue 在弹出框上设置委托，但不是在内部视图上。如何从弹出框的内部（推送）视图调用主视图上的委托方法？

这是我在弹出主视图上设置委托的方法：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {    
    if ([segue.identifier isEqualToString:@"segueSearchResults"]) {
        //Dismiss User Popover
        [self dismissUserPopover];

        SearchResultsViewController *vc = segue.destinationViewController;
        vc.searchDelegate = self;
        self.searchPopover = [(UIStoryboardPopoverSegue *)segue popoverController];
        self.searchPopover.delegate = self;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T06:35:52.037

Instead Delegate i prefer "NSNotificationCenter" in your case

Add an observer to your ViewController for some action in uiview

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                     selector:@selector(receiveActionNotification:)
                                         name:@"someActionNotification"
                                       object:nil]; 
```

Post Notification from your pushed View in PopOverController Post Notification and method in your Viewcontroller will be called

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"someActionNotification" object:self]; 
```

At the end Dont forget to remove Observer.

```
[[NSNotificationCenter defaultCenter] removeObserver:@"someActionNotification"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:06:18.257

当您需要在 VC 层次结构中相距很远的两个视图控制器之间进行通信时，尝试从另一个中引用一个以便您可以直接调用其上的方法并不能很好地工作——中间有几个级别的间接，并且如果您稍后更改 VC 层次结构，它会非常脆弱。

改为查看通知（NSNotificationCenter）；无论他们在您的应用程序中的什么位置，您都可以让另一个 VC“广播”信息来响应。

# google-cloud-storage - 谷歌云存储上不同目录的不同索引文件，可能吗？

> ID：15590851
> 
> 赞同：2
> 
> 时间：2013-03-23T19:02:08.313
> 
> 标签：google-cloud-storage

**问题：**计划让我的[Jekyll](http://jekyllrb.com/)生成的静态站点从 Google Cloud Storage 提供服务，但需要提供来自`example.com/feed/`的提要以与 WordPress 向后兼容。

**可能**的解决方案：假设静态提要文件 (index.xml) 位于`example.com/feed/index.xml`. 然后，如果可以为目录本身设置不同的索引文件（除了为存储桶设置的索引文件，例如 index.html），那么人们就可以从`example.com/feed/`.

但这可能吗？如果没有，有没有我会错过的替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T07:22:19.530

您可能会在`example.com`存储桶中创建一个名为的对象`/feed/`。想起来有点尴尬，而且由于 gsutil 的工作方式，您必须通过 API 手动完成，但它允许您从`example.com/feed/`.

或者，您可以简单地命名您的 xml 内容`/feed/index.html`。如果您的所有用户确实都在访问`example.com/feed/`，那么能够将文件命名为 index.xml 并不完全相关。您需要做的唯一特别的事情是确保为`/feed/index.html`对象设置正确的内容类型。

这里要记住的另一件事是，提要本身应该从您的主索引页面链接到这样的链接：

```
<link rel="alternate" type="application/rss+xml" title="My Awesome Feed" href="http://example.com/path/to/feed.xml" /> 
```

这使您能够合理地命名您的提要，并且您的用户可以将他们的提要阅读器`http://example.com/`直接指向他们的提要阅读器——读者应该能够通过链接访问提要本身。如果您已经建立了期望 wordpress 样式提要的读者群，那将无济于事，但是您可以将新人引向正确的方向，并在一段时间后弃用奇怪的 wordpress 样式。

# django - Django 中的待办事项列表 Web 应用程序？

> ID：15590852
> 
> 赞同：-1
> 
> 时间：2013-03-23T19:02:10.627
> 
> 标签：django, web-services, list

是否可以在 Django 中创建一个待办事项列表 Web 应用程序，其中管理员设置要执行的操作，并且只允许用户查看管理员在他们的个人资料中放置的内容？实现这一目标的步骤可能是什么？（例如：首先创建管理员、用户和事物模型然后...）谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:57:47.907

堆栈上的这个开放问题并不是真正的地方，但是这里有一个关于你所追求的分步教程。

[http://net.tutsplus.com/tutorials/python-tutorials/intro-to-django-building-a-to-do-list/](http://net.tutsplus.com/tutorials/python-tutorials/intro-to-django-building-a-to-do-list/)

# javascript - jQuery：在多个 div 上使用 onclick 更改 div 的类

> ID：15590857
> 
> 赞同：2
> 
> 时间：2013-03-23T19:02:40.450
> 
> 标签：javascript, jquery, html, css

我有一个 jQuery 代码：onlick on #icon 切换父类，如果之前单击，onclick on body changes 将类更改回来。

我需要的是在单击#item5 或#item4 时发生相同的事情，就像单击#icon 一样。

```
<div id="header_wrap">
    <div id="logo"></div>
    <div class="contact" id="ccontainer">
        <div id="form"></div>
        <div id="icon"><span id="getintouch">GET IN TOUCH</span></div>
    </div>

    <div id="menu_wrap">
        <ul id="menu">
            <li id="item1"><a  href="#">Home</a></li>
            <li id="item2"><a  href="#">About us</a></li>
            <li id="item3"><a  href="#">What we do</a></li>
            <li id="item4"><a  href="#">Portfolio</a></li>
            <li id="item5"><a  href="#">Contact us</a></li>
        </ul>
    </div>
</div> 
```

jQuery 代码....我尝试编写自己的代码来添加功能，但我似乎无法让它工作.. js/jq 的经验很少。

```
$('#icon').on('click', function(e){
    $(this).parent()
        .toggleClass('contact')
        .toggleClass('contactexpand');
});

$('body').on('click', function(e){
    $('#ccontainer')
        .removeClass('contactexpand')
        .addClass('contact');
});

$('#ccontainer').on('click', function(e){
    e.stopPropagation();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:11:57.140

您必须从单击处理程序调用 event.stopPropagation 以防止它“冒泡”DOM（即，防止它激活所有祖先元素上的单击事件）。

```
 $(document).ready(function(){
            $('#icon, ul li').on('click', function(event){
                event.stopPropagation();
                $('#icon').parent()
                .toggleClass('contact')
                .toggleClass('contactexpand');               
            });
            $('body').on('click', function(e){

                $('#ccontainer')
                .removeClass('contactexpand')
                .addClass('contact');
            });
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:07:58.230

把js改成：

```
$('#icon, #ul > li').on('click', function(e){
    $("#ccontainer")
      or $(this).parent() *not entirely sure what you wanted to get*
    .toggleClass('contact')
    .toggleClass('contactexpand');
});

$('body:not(#icon, #ul > li)').on('click', function(e){
    $('#ccontainer')
    .removeClass('contactexpand')
    .addClass('contact');
});

$('#ccontainer').on('click', function(e){
    e.stopPropagation();
}); 
```

`#ul > li`指`#item(number)`所有的

# entity-framework-5 - 实体框架动态类型映射

> ID：15590860
> 
> 赞同：0
> 
> 时间：2013-03-23T19:02:46.213
> 
> 标签：entity-framework-5

我正在使用 Entity Framework 5 Code First 方法，需要找到一种方法将我在运行时动态创建的类型映射到表，以便它成为模型的一部分。

我试图解决的问题如下。我有两个表 A 和 B。A 有一个“名称”列。表 A 存储表 B 中列的名称。每当将一行添加到表 A 时，触发器就会向表 B 添加一列。基于表 AI 中的数据可以在运行时构建一个类型来表示表 B。我的问题是我会就像 EF 使用我的类型和表 B 一样。我找不到将我的类型映射到表 B 的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T01:18:18.217

我不知道这是否适合您的问题，但请查看这篇文章“[首先使用代码动态构建模型](http://romiller.com/2012/03/26/dynamically-building-a-model-with-code-first/)”。

但我真正的建议是你改变你的架构......创建一个包含 xml 类型列的表并创建一些可以序列化和反序列化的类，以便您可以保存和检索 xml 并加载对象。甚至，看看 NoSQL 数据库。

# macos - Mac OS X 上的 pthread_specific() 崩溃

> ID：15590865
> 
> 赞同：0
> 
> 时间：2013-03-23T19:02:58.420
> 
> 标签：macos, crash, pthreads, indy, fpc

我在 Mac OS X 上使用 FPC 和 Indy 10 编写的 32 位服务器应用程序在 OS X Lion 上的 pthread_specific() 中遇到了崩溃。我发现很难追查原因。发生崩溃是因为 gs:[tlsindex] 不可读，但我不知道为什么会发生这种情况。tlsindex 是正确的，因此描述符表一定已经损坏。

有没有办法在 OS X 上使用 gdb / Xcode 4 打印描述符表？我在想，如果我知道内存中的地址，我可以在它上面设置一个数据断点，并希望在破坏描述符表的代码处中断。不幸的是，我找不到有关如何在 OS X (i386) 上实际实现 TLS 的任何信息。

或者也许有人对如何解决这个问题有一个绝妙的主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:34:47.010

如果这对其他人有用，我会回答我自己的问题。OS X 设置`gs`为指向当前线程的 TLS 存储。这实际上是线程数据块的`struct _pthread`一部分 [（](http://www.opensource.apple.com/source/Libc/Libc-391/pthreads/pthread_internals.h)

检索指向该数据块的指针很容易：`pthread_self`将返回它。通过记录这一点，我发现数据块很可能在线程仍在执行时被其他人释放。通过`vm_deallocate`使用[mach_override](https://github.com/rentzsch/mach_override)进行捕获，我发现这是由另一个线程的清理代码完成的。

最终事实证明，我正在调用`pthread_join`一个已经通过`pthread_detach`. 这两个函数都将释放线程存储。在线程分离后（但在错误连接之前），偶然创建了另一个具有完全相同基地址的线程。连接将释放新线程，使其在没有数据块的情况下执行。这个错误是由 pthread 库与 Windows 相比的不同行为引起的，在 Windows 中等待线程（加入）和关闭它（分离）是两个完全不同的事情。

# permissions - Plesk – PHP 读写“根”目录 – 权限

> ID：15590867
> 
> 赞同：0
> 
> 时间：2013-03-23T19:03:13.107
> 
> 标签：permissions, root, plesk, read-write

当前专用服务器 Plesk (10.3) 服务器设置如下：

我有**MainDomain**设置可以在`httpdocs`（如公共 html）文件夹中工作。然后我在此文件夹中设置**了两个域，请参见下面的结构。**

所有站点都可以正常工作，但是当**domain1**或**domain2**想要读取/写入 `httpdocs`在这种情况下为**Test**的文件夹时，就会出现问题。

```
--- MainDomain
    -- Httpdocs
       -- Some files
       --  Test
       -- Domain1
        -- Some files
       -- Domain2
        -- Some files 
```

不知道确切的问题，但我确实将所有者和组权限设置为 root，但没有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:44:44.553

这是一个来自 apache 配置的 open_basedir 限制：

php_admin_value open_basedir "/var/www/vhosts/MainDomain/Domain1/:/tmp/"

因此，如果您想访问 /var/www/vhosts/MainDomain/httpdocs/，您必须将此路径添加到 Domain1 和 Domain2 的 open_basedir（我不确定，但在 10.4 中可以从 Plesk GUI 执行此操作）

但实际上，这是完全错误的，因为它是一个真正的安全威胁。

# ios - Objective-C，正确释放对象

> ID：15590871
> 
> 赞同：1
> 
> 时间：2013-03-23T19:04:01.690
> 
> 标签：ios, objective-c, memory-management

我在**头**文件中定义了一个对象：

```
@property (nonatomic, retain) UIBarButtonItem *printButton; 
```

在**实现**文件中：

```
@synthesize printButton;

self.printButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(printWebPage:)];
[self.view addSubview:printButton];
[printButton release]; // Should I release it here?

- (void)dealloc
{
  [printButton release];
  [super dealloc];
} 
```

我的问题是，我是否应该**总是** `release/autorelease`在它之后对象（**声明为保留属性**）`addSubview`，并且即使我要在其他函数中使用它，也要在 dealloc 中释放它？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T19:26:55.613

当您拥有`property`as`retain`时，它会保留新值并将`release`消息发送到旧值。您还必须`release`在`dealloc`.

正确的方法是这样做：

```
self.printButton = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(printWebPage:)] autorelease]; 
```

也是`self.view addSubView`保留子视图，超级视图负责释放它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T19:41:31.170

为了被保留，对象需要至少保留一次。不止一次是可以接受的，但关键是*至少一次*。通过保留，您是在说：“我需要它可用”，而通过释放，您是在说“我不再需要它”。比你需要的时间保留更长时间的东西是粗鲁和浪费的，比如说，在你被释放之后。这样做是泄漏。

对于您的具体问题：如果您的财产被保留，那么是的，您必须在某个时候释放。在你`dealloc`是一个好的时间，或者在它被你拥有的东西再次保留之后是一个更好的时间。将视图添加到子视图就是将对象添加到保留数组（您的`UIView`超类保留子视图数组）。数组本身保留了它的元素。因此，在您添加后立即发布是好的。

此外，由于您知道您的子视图数组并且它的内容将在您的一生中保留，因此根本不保留您的副本会更干净。这就是为什么子视图出口通常被声明为弱的原因。所以我会做以下事情：

```
@property(nonatomic, weak) UIBarButtonItem *printButton; 
```

然后在初始化：

```
UIBarButtonItem *aPrintButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(printWebPage:)];
// this is just a stack variable, retained because of the alloc
[self.view addSubview:aPrintButton];  // this provides a second retain
self.printButton = aPrintButton;      // this does not retain because it's setter is declared weak
[aPrintButton release]; // release here subtracts one retain, leaving the one you need 
```

您的子类不需要更明确的发布，因为`UIView`将负责释放它的子视图数组并将`NSArray`负责释放它的元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T19:05:53.357

当您不再需要它们时，您应该释放您的对象（当然，如果不使用 ARC）。在您的情况下，一旦添加了视图，您就不再需要对它的引用（除非您打算在您的类中使用它，在这种情况下不要释放它）。

正如@AndrewMadsen 在评论中提到的，您释放了一个您拥有引用的对象（通过显式保留它们或使用`new`、`copy`、`mutableCopy`或`alloc`方法获取引用）。

[你可以在这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/MemoryMgmt.html)找到更多信息

# sql - Django Count - 过滤被计数的集合

> ID：15590880
> 
> 赞同：0
> 
> 时间：2013-03-23T19:04:40.120
> 
> 标签：sql, django, django-queryset

我有这种情况

```
class Video(models.Model):
    public = models.BooleanField()
    parent = models.ForeignKey('self', related_name='children') 
```

我想获取按他们拥有的公开孩子数量排序的视频列表。

我可以做类似的事情：

```
video.objects.annotate(children_count=Count('children')).order_by('children_count') 
```

这给了我一组按孩子数量排序的视频 - 但是这包括私人和公共孩子。我如何只计算公共儿童？

我想要这样的东西：

```
video.objects.annotate(children_count=Count('children' where children.public=True)).order_by('children_count') 
```

这当然不能按原样工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:02:44.660

起作用的是：

Video.objects.filter(children__public=True).annotate(children_count=Count('children')).order_by('children_count')

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:33:22.470

怎么样

```
Video.objects.filter(public=True).
annotate(children_count=Count('children')).order_by('children_count') 
```

在此处阅读更多信息：[https ://docs.djangoproject.com/en/dev/topics/db/aggregation/#aggregations-and-other-queryset-clauses](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#aggregations-and-other-queryset-clauses)

# javascript - 使用 Javascript 生成占用的 DIV

> ID：15590881
> 
> 赞同：0
> 
> 时间：2013-03-23T19:04:45.337
> 
> 标签：javascript, css, html, d3.js

这似乎是一个标准问题，但我读过的堆栈线程都没有满足我的需求。

我有一系列嵌套的 DIV 语句，就像[这里](http://jsfiddle.net/xSEPJ/)（不是所有的 CSS 包括在内）。

我想做一个简单的脚本来做这样的事情：

```
for (i = 0; i < data.length(); i++) {
  //append DIV
  //add identifying class/id
  //change text values
} 
```

如果有帮助，我将在这些 DIVS 附带的一些可视化中使用 d3.js。如果那是最简单的，我可以在 d3 中创建那些 DIV……但我不太确定我会怎么做。任何提示表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:08:48.853

如果您想创建多个 div 作为不同对象的子对象，您可以创建新元素，然后将它们作为子对象附加到 DOM。

假设您在页面上有一个根元素

```
<div id="myDiv">
    <p>Everything should follow this</p>
</div> 
```

然后，您可以使用如下代码注入任意数量的元素：

```
for (a=0;a<3;a++) {
    var divTag = document.createElement("div"); 
    divTag.id = "div"+a; 
    divTag.setAttribute("align", "center"); 
    divTag.className = "myClass"; 
    divTag.innerHTML = a+" Div tag created dynamically."; 
    document.getElementById("myDiv").appendChild(divTag); 
} 
```

# ios - 在当前的情节提要中，我如何找到哪个视图控制器将视图连接到那里？

> ID：15590884
> 
> 赞同：0
> 
> 时间：2013-03-23T19:04:54.183
> 
> 标签：ios, objective-c, xcode, ios5, ios6

假设我在一个特定的视图控制器中，几个视图控制器之一可以将用户带到。我如何找到它是哪一个？因为我需要在工具栏中添加一个特定的按钮，以确定它是否与特定的视图控制器分离。

（在`prepareForSegue:`你可以找到目标视图控制器，我想知道是否有办法找到相反的，源视图控制器，可以这么说。）

是将其存储为类属性的唯一方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:13:06.483

为什么需要将用户带到那里的控制器？如果你需要它，它可能也有一些意义。执行此操作的正常方法通常是目标控制器上的委托，由调用者在 prepareForSegue 中设置。通过这种方式，目标控制器可以通知其代理更改、更新、需要的操作或其他任何内容。

这是来自 Apple 的一些示例代码，它解释了视图控制器之间的协调，包括 prepareForSegue 中的这个委托解决方案：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ManagingDataFlowBetweenViewControllers/ManagingDataFlowBetweenViewControllers.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ManagingDataFlowBetweenViewControllers/ManagingDataFlowBetweenViewControllers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:18:11.990

在目标视图控制器中，您需要创建一个属性以指向与其连接的控制器（或者它可以是 BOOL 或数字，具体取决于您的实现方式）。在 prepareForSegue 中，您可以只使用**self**来设置属性的值。

# sql - 许多人的数据库，创建者的表

> ID：15590887
> 
> 赞同：0
> 
> 时间：2013-03-23T19:05:00.853
> 
> 标签：sql, sql-server-2012

我对普通的 SQL 查询相当精通，但在管理方面，我并没有走得太远。

我需要一个多个用户（我想用户 = 登录名）可以访问的数据库。在该数据库中，这些用户中的任何一个都可以创建表，但我只希望创建者获得对该表的任何（和完全）访问权限。这很难做吗？

我使用 MS SQL Server 2012。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:34:25.777

当用户连接时，为他们设置架构，授予他们对自己架构的完全控制权并授予他们创建权限，以便他们可以在自己的架构中做自己喜欢的事情，如果您将所有用户保留在自己的架构中，他们将不会除非您授予他们这样做的权利，否则无法干扰其他用户的架构。

# php - 以编程方式返回两个 json 文件差异的最佳方法

> ID：15590891
> 
> 赞同：9
> 
> 时间：2013-03-23T19:05:44.427
> 
> 标签：php, json, performance, algorithm, comparison

我有两个 json 文件，我想得到一个包含差异的 json。**重要**的是**只显示****内容**的实际差异，而不管更改某些元素的顺序。

最好的方法是什么？我正在寻找一种尽可能高效的解决方案，因为`json`s 可能包含大量数据，并且用户需要尽快完成工作。

注意：`json`s 可能包含以不同深度编码的数据。任何编程语言都可以，但我更喜欢可以在 php 中轻松实现的答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T19:08:38.023

尝试使用[array_diff](http://php.net/manual/en/function.array-diff.php)函数

```
array_diff(json_decode($jsonData1), json_decode($jsonData2)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-23T19:26:22.817

基本上，您想要的是类似于 的东西`array_diff_assoc`，但适用于 json 对象，并且是递归的。

由于引用问题，这些`array_diff`函数不是递归的：可以将数组的引用分配给该数组的条目，从而使数组无限递归。我认为使用 json 对象不可能得到相同的情况，从而使递归函数安全。

假设您希望计算对象 A 和 B 之间的差异，并将结果保存在对象 C 中。原理是遍历 A 的每个字段（a`foreach`应该这样做），并且何时：

*   B中不存在这样的字段，将其复制到C上。
*   B中存在类似的字段，将A字段与B字段的差异结果放入C中，这是对diff函数的递归调用，以这些字段为参数，以及结果的新对象。

应该尊重 A 的顺序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-06T03:00:07.900

对于此任务，您可以尝试使用[https://github.com/swagest/json-diff](https://github.com/swaggest/json-diff)

它将进行键值递归比较（键的顺序无关紧要）并生成[JSON 补丁](http://jsonpatch.com/)（在 IETF 的[RFC 6902](https://www.rfc-editor.org/rfc/rfc6902)中指定）。

# assembly - 在 x86 程序集中打印 ASCII 值（不是字符）

> ID：15590902
> 
> 赞同：0
> 
> 时间：2013-03-23T19:06:22.890
> 
> 标签：assembly, x86, ascii, dos

我是汇编语言的新手，我想显示存储在寄存器 CX 中的字符的 ASCII 值。

任何想法如何做到这一点？预先感谢您的回答。

# c# - 返回空字段的实体框架代码优先导航属性

> ID：15590905
> 
> 赞同：2
> 
> 时间：2013-03-23T19:06:45.187
> 
> 标签：c#, ef-code-first, entity-framework-5

对于我第一次使用 EF 代码的程序。过去我使用 linq to SQL en EF DbFirst。检索主记录时'我无法使用导航属性加载子记录。我得到一个空子记录，所有记录字段都是 0 或 null。

当我想应用急切加载时。.Include(x=>x.......) 没有显示我的导航。

我设置了以下课程：

```
public Record()
    {
        Shipping = new ShippingData();
        Delivery = new DeliveryData();
        Items = new List<Item>();
        ImportDate = DateTime.Now;
    }

    [Key]
    public int RecordId { get; set; }
    public int ShippingId { get; set; }
    public int DeliveryId { get; set; }
    public DateTime ImportDate { get; set; }

    public virtual ShippingData Shipping { get; set; }
    public virtual DeliveryData Delivery { get; set; }
    public virtual List<Item> Items { get; set; }
    public virtual Collecting CollectingOrder { get; set; } 
```

具有以下上下文：

```
public class TweemansContext : DbContext
{
    public TweemansContext()
        : base("xxxx")
    {
    }

    public DbSet<Add.Record> Records { get; set; }
    public DbSet<Add.ShippingData> Shipping { get; set; }
    public DbSet<Add.DeliveryData> Delivery { get; set; }
    public DbSet<Add.Item> ProductItems { get; set; }
    public DbSet<Add.Kolli> Kolli { get; set; }
    public DbSet<Add.Collecting> CollectingOrders { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);
        modelBuilder.Entity<Record>().HasRequired(s => s.Shipping)
                    .WithMany()
                    .HasForeignKey(s => s.ShippingId);
        modelBuilder.Entity<Record>().HasRequired(d => d.Delivery)
                    .WithMany()
                    .HasForeignKey(d => d.DeliveryId);
        modelBuilder.Entity<Record>().HasOptional(c => c.CollectingOrder)
                    .WithOptionalDependent(a => a.Record).Map(p => p.MapKey("CollectionID"));
    }
} 
```

交付类是一个公共类，如下所示：

```
 public class DeliveryData
{
    [Key]
    public int DeliveryId { get; set; }
    public virtual Record Record { get; set; }

    ....lots of public properties 
```

现在，当我尝试使用延迟加载时，我的交付类的所有属性都为空，使用以下代码：

```
using (TweemansContext context = new TweemansContext())
        {
            var imported = (from record in context.Records
                            where record.ImportDate.Year == date.Year && record.ImportDate.Month == date.Month && record.ImportDate.Day == date.Day
                            select record).ToList();

            foreach (var Record in imported)
            {
                string email;
                string telnr;
                CustomerService service = new CustomerService(connectionString);
                **string servicenr = Record.Delivery.AccountNumber.Substring(2, 8);**
                service.GetUserData(servicenr, out email, out telnr);
                Record.Delivery.Email = email;
                Record.Delivery.TelephoneNbr = telnr;
            }
            context.SaveChanges();
        } 
```

在带有 ** 的行上，我的调试器告诉我交付存在，但它的所有属性都是空的。

当想要按如下方式应用包含时，.include 没有显示我的导航：

```
 var imported = (from record in context.Records.Include(x=>x.)
                            where 
                               record.ImportDate.Year == date.Year 
                               && record.ImportDate.Month == date.Month
                               && record.ImportDate.Day == date.Day
                            select record).ToList(); 
```

我做错了什么，或者我误解了哪一部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T12:35:37.130

您必须从构造函数中删除导航*引用*`Record`的初始化，空导航*集合*的初始化是可以的：

```
Shipping = new ShippingData(); // remove this line
Delivery = new DeliveryData(); // remove this line 
```

本质上，这些行用构造函数`ShippingData`和`DeliveryData`设置的值“覆盖”加载的数据，可能是默认值`0`和`null`。

关于您的评论“ *.Include(x=>x.......) 没有显示我的导航*”的旁注。您需要将lambda 表达式作为参数`using System.Data.Entity;`放在代码文件的开头，以使扩展方法可用。`Include`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:55:11.197

当您的调试在那里停止时，您应该在 Delivery 上获得一个代理类。如果你没有得到这个，你应该在你的上下文中启用延迟加载。您可以[在此处查看](http://blogs.msdn.com/b/msdnforum/archive/2010/07/12/community-goodies-lazy-loading-in-entity-framework-4.aspx)如何启用延迟加载。

如果您不想启用延迟加载，则应在查询中使用 Include 以包含交付信息。[在这里](http://msdn.microsoft.com/en-us/data/jj574232.aspx)您可以了解如何使用包含的一些信息。

# python - 使用 Key 从 Jinja 获取 GAE 实体

> ID：15590906
> 
> 赞同：0
> 
> 时间：2013-03-23T19:06:49.170
> 
> 标签：python, google-app-engine, python-2.7, jinja2

我在 App Engine 中创建了一个博客，我目前正在为博客文章添加评论支持。我已经制作了一个 db.ListProperty(db.Key) 来为发布到该特定帖子的每条评论存储一个密钥。

问题是，我试图在我的模板中执行此操作，但我不能在那里使用 db.get。

例如，能够从 jinja 执行类似“Comment.get(key)”的操作

您是否有任何其他解决方案如何在我的模板中执行此操作，或者我是否必须将列出我的博客文章的 for 函数从我的模板中移开并将其作为 kwarg 传递？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:46:27.547

花了一段时间，需要重新思考，但我修好了。我将它从模板中移开并制作了一个获取评论功能，该函数将获取的帖子作为输入并输出评论列表。然后我只是把它作为一个 kwarg ofc 传递。看起来像这样

```
def get_comments(posts):
    postids = []
    for post in posts:
        postids.append(post.key().id())
    comments = {}
    for i in postids:
        comments[i] = Comment.all().ancestor(Blogpost.get_by_id(i))
    return comments 
```

在我的 jinja 模板中，我做了一个简单的 for 循环，看起来像这样

```
{% for comment in comments[entry.key().id()] %} 
```

可能不是最好的方法，但体面且效果很好

# python - 如何在以后的编程中创建可以用来访问类实例的东西？

> ID：15590912
> 
> 赞同：0
> 
> 时间：2013-03-23T19:07:36.110
> 
> 标签：python, oop, python-3.x

我是一名对计算机科学感兴趣的高中初级程序员。我一直在使用 Mike Dawson 的书自学 Python*编程，Learning to Programming for the absolute 初学者 with Python, 3rd Edition*. 我正在编写一个程序来练习我新获得的 OOP 知识。该程序模拟银行，玩家可以在其中开设银行账户、提取/存入现金、获取汇率、将资金从一个账户转移到另一个账户以及其他功能。我在程序中遇到了严重的问题，因为程序的主要部分模拟了用户可以访问的多个可访问帐户这一事实。我现在确定我应该如何或是否应该这样做，但我尝试编写一个名为 all_accounts 的空列表的类属性。每次实例化帐户时，都会将该实例附加到列表中。当玩家选择诸如提取/存入现金之类的菜单选项时，我希望访问列表中的实例，以便可以修改对象的属性（例如余额）。我不知道该怎么做，我一直在寻找答案大约 3 天，但没有找到任何东西。请记住，我是一个初学者程序员，所以我的代码可能会被认为写得不好。我将在下面发布整个代码，因为我认为人们有必要全面了解代码的工作原理和功能。此外，如果我的代码中有任何其他不正确或我可以做得更好的地方，请随时通知我。我总是乐于学习。如果我的代码中有任何其他不正确或我可以做得更好的地方，请随时通知我。我总是乐于学习。如果我的代码中有任何其他不正确或我可以做得更好的地方，请随时通知我。我总是乐于学习。

```
class Account(object):
    """An interactive bank account"""
    wallet = 0
    all_accounts = []

    # initial
    def __init__(self, ID, bal):
        self.ID = ID
        self.bal = bal
        print("A new account has been opened!")
        Account.all_accounts.append(self)                       

    def withdraw(self, w_input):
        if w_input < self.bal  or w_input == 0:
            print("That is not a valid amount. Sending you back to menu.\n")
            Menu()
        else:
            self.bal = self.bal - w_input
            print("You withdrew $" + str(w_input) + ".\n")
            wallet += w_input
            print("You wallet now contains $" + Account.wallet)
            Menu()

    def deposit(self):
        # Whatever

def Menu():
    print(
        """
0 - Leave the Virtual Bank
1 - Open a new account
2 - Withdraw money
3 - Deposit money
4 - Transfer money from one account to another
5 - Get exchange rates(Euro, Franc, Pounds, Yuan, Yen)
"""
        ) # Add more if necessary
    choice = input("What would you like to do?: ")
    while choice != "0":
        if choice == "1":
            account_name = input("What is your account's ID?: ")
            account_bal = float(input("How much money would you like to put into the account?(USD): "))
            account_name = Account(ID = account_name, bal = account_bal)
            Menu()

        elif choice == "2":
            account_choice = input("What is your account ID?: ")
            if account_choice in instance.Account.all_account:
                withdraw_choice = input("How much money would you like to withdraw?: ")
                account_choice.withdraw(w_input = withdraw_choice)
            else:
                print("Nope.")

    if choice == "0":
        print("\nThank you for visiting the virtual bank!")
        input("Press the [ENTER] key to exit the program.")

Menu() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:28:00.947

通常，您希望将调用代码与类的内部工作隔离开来。让`Menu()`函数直接检查包含所有帐户的列表是不灵活的，并且会在以后引起问题（如果您将列表换成数据库存储怎么办？）

相反，`AccountManager`类之类的东西可能是一个更好的主意：

```
class AccountManager(object):
    def __init__(self):
        self.accounts = []

    def create_account(self, id, balance):
        # You may want to check for uniqueness of id's here as well
        account = Account(id, balance)
        self.accounts.append(account)

    def get_account(self, id):
        for account in self.accounts:
            if account.id == id:
                return account
        return None # or a default value, or raise an exception 
```

现在调用代码只需要告诉`AccountManager`创建和检索帐户，而不再关心它们是如何存储的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:11:02.347

正如 ACEfanatic02 所说，尽量将用户界面与应用程序的核心分开。

想想一个帐户必须有什么：

*   唯一标识符
*   平衡
*   （名称）客户
*   交易清单

这些是实例属性。

还要考虑它必须能够做什么

*   将钱存入账户
*   从账户中提款
*   转移到另一个帐户

这些是方法。

您可能还需要一种打印帐户文本表示的方法。这可以通过为类提供魔术方法来完成`__str__`。

一个简单的例子：

```
def _checkamount(a):
    if a < 0:
        raise ValueError('amount must be >0')

class Account(object):

    maxnum = 0

    def __init__(self, client):
        self.client = client
        self.balance = 0.0
        self.transactions = []
        Account.maxnum = Account.maxnum + 1
        self.number = Account.maxnum

    def __str__(self):
        "Generate a human-readable representation of the Account."
        rv = 'Accountnumber: ' + str(self.number) + '\n'
        rv += 'Client: ' + str(self.client) + '\n'
        rv += 'Balance: ' + str(self.balance) + '\n'
        return rv

    def withdraw(self, amount):
        _checkamount(amount)
        if self.balance < amount:
            raise ValueError('overdraft!')
        self.balance -= amount
        self.transactions.append(("withdraw", amount))

    def deposit(self, amount):
        _checkamount(amount)
        self.balance += amount
        self.transactions.append(("deposit", amount))

    def transfer(self, amount, other):
        _checkamount(amount)
        self.balance -= amount
        self.transactions.append(("transfer", amount, other.number))
        other.balance += amount
        other.transactions.append(("transfer", amount, self.number)) 
```

我将此代码保存在一个名为`account.py`

交互式测试（使用[Ipython](http://ipython.org/)，强烈推荐用于交互式实验）：

```
In [1]: from account import Account

In [2]: a = Account('myself')

In [3]: b = Account('someoneelse')

In [4]: a.deposit(200)

In [5]: a.withdraw(10)

In [6]: b.deposit(50)

In [7]: a.transfer(25, b)

In [8]: print a.transactions
[('deposit', 200), ('withdraw', 10), ('transfer', 25, 2)]

In [9]: print b
Accountnumber: 2
Client: someoneelse
Balance: 75.0

In [10]: print b.transactions
[('deposit', 50), ('transfer', 25, 1)]

In [11]: print a
Accountnumber: 1
Client: myself
Balance: 165.0

In [12]: a.withdraw(1000)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-12-ffc10f6333fe> in <module>()
----> 1 a.withdraw(1000)

/home/rsmith/tmp/account.py in withdraw(self, amount)
     24         _checkamount(amount)
     25         if self.balance < amount:
---> 26             raise ValueError('overdraft!')
     27         self.balance -= amount
     28         self.transactions.append(("withdraw", amount))

ValueError: overdraft! 
```

在这个测试中，我使用一个字符串作为`client`. 由于 Python 的动态特性，我稍后可以将其更改为例如一个类，并且只要 Client 有一个方法`Client`，代码仍然可以工作。`__str__`

# automake - AutoMake 条件编译问题

> ID：15590920
> 
> 赞同：2
> 
> 时间：2013-03-23T19:08:38.607
> 
> 标签：automake

我正在尝试在 automake 中执行此操作

```
platform=$(uname)
ifeq ($(platform), Darwin)
    stmt = ...
else
    stmt1 = ...
endif 
```

但我明白了

> 错误：否则没有if
> 
> 错误：没有 if 的 endif

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T11:47:40.800

*   删除缩进，以便所有语句从第 1 列开始。
*   使用 Automake 条件，您首先必须在配置脚本中定义一个条件变量，如下所示：

    ```
    AM_CONDITIONAL([DARWIN], [test $(uname) -eq "Darwin"]) 
    ```

    然后在 Automake 文件中，执行以下操作：

    ```
    if DARWIN
    stmt = ...
    else
    stmt1 = ...
    endif 
    ```

或者，只需将 bash 脚本中的 if 语句编写为 Automake 文件中的规则主体。

# android - Android 错误：无法将 TextView 强制转换为 android.view.ViewGroup

> ID：15590921
> 
> 赞同：1
> 
> 时间：2013-03-23T19:08:38.537
> 
> 标签：android, spinner, viewgroup

我已经查看了相关问题，但似乎无法找到解决方案。

相关链接

[android.widget.TextView 无法转换为 android.view.ViewGroup](https://stackoverflow.com/questions/8526264/android-widget-textview-cannot-be-cast-to-android-view-viewgroup)

[Android: java.lang.ClassCastException: android.widget.imageView 不能转换为 android.widget.textView](https://stackoverflow.com/questions/11191040/android-java-lang-classcastexception-android-widget-imageview-cannot-be-cast-t)

这是我的 xml `

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:paddingTop="30dp" >

    <TextView
        android:id="@+id/tvTestSpinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:paddingLeft="10dp"
        android:text="Country List" >

        <Spinner
            android:id="@+id/countryField"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:prompt="@string/country_prompt" >
        </Spinner>
    </TextView>

</LinearLayout> 
```

`

错误日志显示了这个堆栈跟踪

```
java.lang.ClassCastException: android.widget.TextView cannot be cast to android.view.ViewGroup
at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:740)
at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:711)
at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:742)
at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:711)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:372)
at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:321)
at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:324)
at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1361)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1115)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:941)
at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:450)
at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:358)
at org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart.java:290)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:240)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1062)
at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:774)
at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:2746)
at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1433)
at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:257)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

任何帮助都将受到欢迎！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:11:39.237

TextView 中不能有 Spinner。尝试：

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:paddingTop="30dp" >

    <TextView
        android:id="@+id/tvTestSpinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:paddingLeft="10dp"
        android:text="Country List" />

        <Spinner
            android:id="@+id/countryField"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:prompt="@string/country_prompt" >
        </Spinner>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:16:53.710

您不能将 Spinner 放在 TextView 中。将其与 TextView 分开。

```
<TextView
    android:id="@+id/tvTestSpinner"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp"
    android:paddingLeft="10dp"
    android:text="Country List" ></TextView>

    <Spinner
        android:id="@+id/countryField"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:prompt="@string/country_prompt" >
    </Spinner> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-01T11:10:24.153

Spinner 应该在 TextView 之外。

如果问题仍然存在，那么您可以尝试清理您的代码。如果使用 eclipse goto **Project** -> **Clean**

# c++ - 无法将 MyClass* 转换为 const MyClass

> ID：15590922
> 
> 赞同：0
> 
> 时间：2013-03-23T19:08:40.540
> 
> 标签：c++, visual-c++, syntax, constants

我正在尝试将常量添加到 C++ 中的变量，因为 VC 拒绝使用`Error C2664 : cannot convert MyClass * to const MyClass &`. 我已经尝试了一切，完成了搜索，阅读了类似的问题（[1](https://stackoverflow.com/questions/3803521/question-about-const-cast-in-c)、[2](https://stackoverflow.com/questions/11484737/how-to-fix-error-invalid-conversion-from-const-myclass-to-myclass)），但我仍然无法解决它。

我的功能定义为：

```
void ClassFoo::FuncFoo(MyClass* instance){
     Merge(instance);     // <--- Error C2664 -- cannot convert MyClass* to const MyClass &
     Merge(&instance);     // <--- Error C2664 -- cannot convert MyClass** to const MyClass &
     Merge(*instance);     // <--- This compiles fine, but doesn't work properly at runtime
     Merge(const_cast<const GFxTextFormat&>(instance));     // <--- Error C2440
}

MyClass Merge (const MyClass &instance){
} 
```

我应该怎么做才能正确地将常量添加到变量`instance`中，以便我可以`Merge`正确调用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T19:11:13.167

`const`在这里不是问题，它会自动添加。问题是指针与参考。

就您向我们展示的代码而言，以下是正确的：

```
 Merge(*instance); 
```

如果这在运行时不起作用，则问题出在您没有向我们展示的代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T19:12:42.517

你能在你的方法上签名吗

```
void ClassFoo::FuncFoo(MyClass* const instance) 
```

这似乎是唯一的方法。在最初，instance 是指向非常量 MyClass 的指针。您可以使用`const_cast`，但这对吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T19:27:18.613

正如 NPE 所说，该方法`Merge(*instance);`是正确的，但这里可能是 c++ 上称为**“切片”**的问题，您可以 google 并尝试通过实验方式检测它。

主要问题如下所述：

```
struct A
{ 
  A ( const int value ) : myValue1( value ) {};

private:
  double myValue1;
};

struct B : public A 
{ 
  B ( const int first, const int second ) : A( first ), myValue2( second ) {};

private:
  double myValue2;
};

main()
{
 B child( 1, 2 );  // The "child" object contains two values.
 A parent = child; // Here the "slicing" error, but the compiler will not say anything.
                   // So, the object "parent" now is the new object of type "A" and it memory only one value. 
                   // By the way, it can not be downcasted to object of type "B".
} 
```

# ruby-on-rails - 用于管理队列和延迟结果的 Rails gem

> ID：15590924
> 
> 赞同：0
> 
> 时间：2013-03-23T19:08:44.160
> 
> 标签：ruby-on-rails, gem, queue

对于我们的应用程序，我们正在设置如下内容：

我们有多个任务在队列中（从数据库中读取，这里没什么特别的）要由每个用户完成。一旦用户完成任务，他们就会被问到结果是什么。每个结果都有自己的一套规则。规则如下所示：

*   'x'天的跟进
*   在下一次跟进前等待“x”天
*   在“x”天后将任务放回队列中

delay_jobs 能处理这个吗？如果重要的话，我正在使用 pg 数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:14:08.257

在 Github 主页上快速查找[DelayedJob](https://github.com/collectiveidea/delayed_job)得到了这个！看起来您可以轻松地安排在未来特定时间发生的事情：

```
 def follow_up
    # Some other code
  end
  # 12.minutes.from_now will be evaluated when follow_up is called

  handle_asynchronously :follow_up, :run_at => Proc.new { 12.days.from_now } 
```

# jquery - jQuery .append() 自动关闭标签的解决方案

> ID：15590925
> 
> 赞同：0
> 
> 时间：2013-03-23T19:08:54.923
> 
> 标签：jquery, tags

通过追加添加此类内容的最佳方法是什么

```
<div>
 <a href=""></a>
 <div>
  <pre>
  </pre>
 </div>
</div> 
```

我正在寻找一些提示， [jQuery append() 是否关闭 html 标签？](https://stackoverflow.com/questions/1437870/does-jquery-append-close-html-tags) [jquery append() 不写结束标签](https://stackoverflow.com/questions/12309372/jquery-append-not-writing-closing-tag) [http://forum.jquery.com/topic/append-automatically-closing-html-tags](http://forum.jquery.com/topic/append-automatically-closing-html-tags)

但是对于这些标签，没有任何作用；/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:31:20.857

我不确定我是否理解你的问题。您是否在寻求一种将您列出的*所有内容附加到另一个元素的方法？*

如果是这样，这是一种方法。如果您将元素编写为`<div/>`. 假设您想将问题中的所有内容附加到`body`元素的末尾。

*编辑：您甚至可以向自闭合标签添加属性，例如`<a href="#"/>`，因此我已经相应地更新了代码。*

你可以这样做：

```
$('body').append('<div class="awesome-class"/>');
$('div:last-child').html('<a href="#"/><div><pre/></div>'); 
```

我不知道你是否可以在一条链中管理它，所以我做了两条。首先，我附加了最外层的`div`，然后使用该`html`方法将所有其他的插入到里面。

这就是你所追求的吗？

*您的评论中列出的类代码：*

```
$('body').append('<div class="test"/>');
$('div:last-child').html('<a class="test2" href="#"><img src="#"/>link</a><div class="test3"><pre/></div>'); 
```

# php - php preg_match 正则表达式验证总是返回 false

> ID：15590926
> 
> 赞同：-1
> 
> 时间：2013-03-23T19:08:59.740
> 
> 标签：php, regex, forms, validation

请记住，使用没有 preg_match 的 if 语句验证有效，但使用 preg_match 它总是返回 false

我想验证该字段并确保它里面有 8 个数字，不多不少。

```
function account_number_validation($validation_result){
  $form = $validation_result["form"];

 if(!preg_match('[0-9]{8}', $_POST['input_19'])){

    // set the form validation to false
    $validation_result["is_valid"] = false;

    //finding Field with ID of 1 and marking it as failed validation
    foreach($form["fields"] as &$field){

        if($field["id"] == "19"){
            $field["failed_validation"] = true;
            $field["validation_message"] = "This field is invalid!";
            break;
        }
    }

}

//Assign modified $form object back to the validation result
$validation_result["form"] = $form;
return $validation_result; 
```

}

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:20:23.223

尝试这个：

```
// ...
if(!preg_match('#[0-9]{8}#', $_POST['input_19'])) {
// ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:11:59.730

更改您的 if 语句：

```
if(!preg_match('/^[0-9]{8}$/', $_POST['input_19'])){ 
```

# lua - CoronaSDK 旋转 3d 精灵

> ID：15590929
> 
> 赞同：0
> 
> 时间：2013-03-23T19:09:10.693
> 
> 标签：lua, coronasdk

我正在制作一个塔防游戏，我有一个精灵，它在渲染的角度上是 3D 的。我有一个问题，我不知道如何解决。

[![图片](../Images/a9413d3741358fe7d1ea422d159d21f1.png)](http://lukestirk.com/A.png)

我需要平滑地旋转精灵以面对它正在射击的敌人。目前它获取炮塔和敌人之间的角度并设置该角度的精灵，所以如果角度为 140 度，我将播放 140 度射击序列。这样做的问题是它会直接跳到那个角度，所以如果炮塔发射的最后一个位置是 270 度，而下一个敌人是 120 度，它会直接跳到那个角度。

任何想法如何在最后播放序列和塔开始射击之前的下一个角度序列之间每 5 度旋转炮塔？所以最后播放的是 270 我需要转到 140 所以我会播放 265、260、255 的帧......150、145、140

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:34:48.130

```
current_angle = 270

-- when new target appears
local target_angle = 140
local delta = (target_angle - current_angle + 180) % 360 - 180
-- Now: -180 <= delta < 180
step = delta < 0 and -5 or 5
number_of_steps = delta / step
ready_to_fire = false

-- inside "draw" function
ready_to_fire = number_of_steps == 0
if not ready_to_fire then
   current_angle = (current_angle + step) % 360
   number_of_steps = number_of_steps - 1
   -- draw frame for "current_angle"
end 
```

# javascript - 检查某个位置的位是否为 1

> ID：15590933
> 
> 赞同：0
> 
> 时间：2013-03-23T19:09:37.960
> 
> 标签：javascript, algorithm, bit-manipulation

我在 JavaScript 中有一个 4 位数字表示，代表一天中的 4 次（早上、下午、晚上、晚上）。

所以假设我有十进制的数字 13（1101），它表示必须在晚上、晚上和早上（而不是下午，因为第 2 位是 0）执行一些操作。

到目前为止，我所做的是获取代表白天的 4 位数字（1000 是晚上，0100 是晚上，0010 是下午，0001 是早上），我想做的是创建一个比较这两个数字的函数，如果某个位置的位等于 1，则返回 true。

我知道按位运算符，但我尝试使用它们但仍然没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:18:32.033

是的，按位计算。您可以使用简单的位掩码测试。

```
var PERIODS_OF_DAY = {
  MORNING: 1, AFTERNOON: 2, EVENING: 4, NIGHT: 8
};

var isPeriodOfDay = function(number, period) {
  return !!(number & period);
}; 
```

测试号码`13`：

```
for (period in PERIODS_OF_DAY) {
    if(PERIODS_OF_DAY.hasOwnProperty(period)) {
        console.log(period + ":", isPeriodOfDay(13, PERIODS_OF_DAY[period]));
    }
} 
```

```
MORNING: true
AFTERNOON: false
EVENING: true
NIGHT: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:38:02.697

```
function getTimes (value, time) {
    var times = ["morning", "afternoon", "evening", "night"];

    if (time) {
        return !(~value & 1 << times.indexOf(time));
    }

    return times.filter(function(time, i) { return !(~value & 1 << i); });
}

console.log(getTimes(13, "afternoon")); // false
console.log(getTimes(13)); // ["morning", "evening", "night] 
```

[JSFiddle](http://jsfiddle.net/Wrbbc/4/)

# c - Frama-C/WP 不能用 \at 证明循环不变

> ID：15590939
> 
> 赞同：2
> 
> 时间：2013-03-23T19:10:17.740
> 
> 标签：c, static-analysis, design-by-contract, frama-c, loop-invariant

我无法证明 2 个循环不变量：

```
 loop invariant \forall integer i; 0 <= i < (\at(n, Pre) - n) ==> ((char*)m2)[i] == \at(((char*)m1)[i], Pre);
    loop invariant \forall integer i; 0 <= i < (\at(n, Pre) - n) ==> ((char*)m1)[i] == \at(((char*)m2)[i], Pre); 
```

我猜 \at 不像我预期的那样适用于数组。

[ACSL by Example](http://www.2shared.com/document/uaOSFjCx/ACSL-by-Example.html)中有一个类似的函数（第 68 页，swap_ranges），它使用了这个，但是，如前所述，他们无法用 WP 插件证明这个特定的函数。我在我的机器上尝试过，确实无法证明相同的不变量。

完整代码

```
/*
 * memswap()
 *
 * Swaps the contents of two nonoverlapping memory areas.
 * This really could be done faster...
 */

#include "string.h"

/*@
    requires n >= 1;
    requires \valid(((char*)m1)+(0..n-1));
    requires \valid(((char*)m2)+(0..n-1));
    requires \separated(((char*)m1)+(0..n-1), ((char*)m2)+(0..n-1));
    assigns ((char*)m1)[0..n-1];
    assigns ((char*)m2)[0..n-1];
    ensures \forall integer i; 0 <= i < n ==> ((char*)m1)[i] == \old(((char*)m2)[i]);
    ensures \forall integer i; 0 <= i < n ==> ((char*)m2)[i] == \old(((char*)m1)[i]);
@*/
void memswap(void *m1, void *m2, size_t n)
{
    char *p = m1;
    char *q = m2;
    char tmp;

    /*@
        loop invariant 0 <= n <= \at(n, Pre);
        loop invariant p == m1+(\at(n, Pre) - n);
        loop invariant q == m2+(\at(n, Pre) - n);
        loop invariant (char*)m1 <= p <= (char*)m1+\at(n, Pre);
        loop invariant (char*)m2 <= q <= (char*)m2+\at(n, Pre);
        loop invariant \forall integer i; 0 <= i < (\at(n, Pre) - n) ==> ((char*)m2)[i] == \at(((char*)m1)[i], Pre);
        loop invariant \forall integer i; 0 <= i < (\at(n, Pre) - n) ==> ((char*)m1)[i] == \at(((char*)m2)[i], Pre);
        loop assigns n, tmp, ((char*)m1)[0..\at(n,Pre)-1], ((char*)um2)[0..\at(n, Pre)-1], p, q;
        loop variant n;
    @*/
    while (/*n--*/ n) {
        tmp = *p;
        *p = *q;
        *q = tmp;

        p++;
        q++;

        n--; // inserted code
    }
} 
```

编辑

我使用 Frama-C Oxygen 版本并尝试使用 alt-ergo(0.94) 和 cvc3(2.4.1) 进行自动证明

frama-c 的输出：

cvc3:

```
[wp] [Cvc3] Goal store_memswap_loop_inv_7_established : Valid
[wp] [Cvc3] Goal store_memswap_loop_inv_6_established : Valid
[wp] [Cvc3] Goal store_memswap_loop_inv_7_preserved : Unknown
[wp] [Cvc3] Goal store_memswap_loop_inv_6_preserved : Unknown 
```

交替：

```
[wp] [Alt-Ergo] Goal store_memswap_loop_inv_7_established : Valid
[wp] [Alt-Ergo] Goal store_memswap_loop_inv_6_established : Valid
[wp] [Alt-Ergo] Goal store_memswap_loop_inv_7_preserved : Timeout
[wp] [Alt-Ergo] Goal store_memswap_loop_inv_6_preserved : Timeout 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T20:13:21.613

```
/*@
…
    loop invariant \forall integer i; 0 <= i < (\at(n, Pre) - n) ==> ((char*)m2)[i] == \at(((char*)m1)[i], Pre);
    loop invariant \forall integer i; 0 <= i < (\at(n, Pre) - n) ==> ((char*)m1)[i] == \at(((char*)m2)[i], Pre);
    loop assigns n, tmp, ((char*)m1)[0..\at(n,Pre)-1], ((char*)um2)[0..\at(n, Pre)-1], p, q;
…
@*/ 
```

你错了`loop assigns`。`loop assigns`注释说明[了在每次迭代中修改了哪些内存](http://blog.frama-c.com/index.php?post/2010/10/06/Specification-of-loop-assigns)位置。位置的数量通常应该随着循环的进行而增加（在您的情况下，随着`n`减少）。它是这样的：

```
loop assigns n, tmp, ((char*)m1)[0..(\at(n, Pre) - n - 1)], ((char*)um2)[0..(\at(n, Pre) - n - 1)], p, q; 
```

但是我自己上面的建议可能会在一个方向或另一个方向上偏离。我发现很难准确地记住这些“移动”循环分配子句是如何工作的。

* * *

或者，您可以编写一个更简单的“静态”`loop assigns`注释（如您的），并在循环不变量中添加有关尚未更改的内容的信息。这就是我通常会做的，以规避我无法记住复杂`loop assigns`条款的工作原理。这将类似于（未经测试）：

```
/*@
…
    loop invariant \forall integer i; 0 <= i < (\at(n, Pre) - n) ==> ((char*)m2)[i] == \at(((char*)m1)[i], Pre);
    loop invariant \forall integer i; 0 <= i < (\at(n, Pre) - n) ==> ((char*)m1)[i] == \at(((char*)m2)[i], Pre);
    loop invariant \forall integer i; (\at(n, Pre) - n) <= i < \at(n, Pre) ==> ((char*)m1)[i] == \at(((char*)m1)[i], Pre);
    loop invariant \forall integer i; (\at(n, Pre) - n) <= i < \at(n, Pre) ==> ((char*)m2)[i] == \at(((char*)m2)[i], Pre);
    loop assigns n, tmp, ((char*)m1)[0..\at(n,Pre)-1], ((char*)um2)[0..\at(n, Pre)-1], p, q;
…
@*/ 
```

# c++ - 如何在 C++ 中创建缓冲区以创建新文件

> ID：15590940
> 
> 赞同：3
> 
> 时间：2013-03-23T19:10:30.200
> 
> 标签：c++, file-io, buffer, binaryfiles

请看一下代码。我是初学者，这是我第一次在 C++ 中创建缓冲区。如何在 C++ 中创建缓冲区以在将旧内容读入该缓冲区并忽略要删除的部分同时截断旧数据并从缓冲区存储内容后创建新文件？

```
int main() {
    Admin item; // Admin is a class
    ios::pos_type pos;    
    int productId;
    char *ch; // pointer to create buffer
    int length;

    cout << "Enter Product Id of item to delete: ";

    cin >> productId;

    ifstream readFile("Stock.dat", ios::binary | ios:: in | ios::out);

    while (readFile) {
        readFile.read(reinterpret_cast<char*>(&item), sizeof(Admin));

        if (item.getStatus() == productId) {            
            pos = readFile.tellg() - sizeof(Admin);
            break;
        }
    }

    readFile.close();

    ifstream readNewFile("Stock.dat", ios::binary | ios:: in | ios::out);

    readNewFile.seekg(0, ios::end);

    length = readNewFile.tellg();

    ch = new char[length]; // is this how buffer is created?if no, please correct it. 

    readNewFile.seekg(0, ios::beg);

    while (readNewFile) {
        if (readNewFile.tellg() == pos)
            readNewFile.ignore(sizeof(Admin));
        readNewFile.read((ch), sizeof(Admin)); // is this how contents are read into buffer from file stream;

        if (readNewFile.eof())
            readNewFile.close();
    }

    ofstream outFile("Stock.dat", ios::trunc | ios::app);

    outFile.write(ch, sizeof(Admin)); // I am doubtful in this part also

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T19:13:02.190

在 C++ 中，您分配内存来创建缓冲区，如下所示：

```
char* buffer = new char[length]; 
```

您的代码的问题是您使用`()`而不是`[]`.

当您想释放这些缓冲区的内存时，您可以使用`delete[]`运算符：

```
delete[] buffer; 
```

此外，您正在从文件中正确读取，但不是以您期望的方式。这是有效的语法，但问题是，您正在覆盖缓冲区中的数据。

您可能应该像这样阅读：（在循环之前`index`初始化`int`到哪里）`0``while`

```
readNewFile.read(&ch[index], sizeof(Admin));
index = index + sizeof(Admin); 
```

* * *

正如评论中的用户所建议的那样，您甚至可以在`std::vector<char>`此处使用 an，因为它与 a 一样快，`char*`并且不需要指定的大小:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:17:21.113

做一个`ch = new char[length]`。此外，[http://www.cplusplus.com/doc/tutorial/dynamic/](http://www.cplusplus.com/doc/tutorial/dynamic/)是一个很好的起点。

顺便说一句，我知道您是初学者，所以我不想让您灰心，但是，如果您在发布之前对易于回答的问题进行[研究，那就太好了。](http://google.com)

# java - 如何将长转换为毫秒

> ID：15590943
> 
> 赞同：0
> 
> 时间：2013-03-23T19:10:49.533
> 
> 标签：java, long-integer

我有一个程序可以计算消息从一台机器发送到另一台机器所需的时间，但是结果是长格式，我如何将其转换为毫秒

```
MPI.Init(args);
int myrank = MPI.COMM_WORLD.Rank();
long startTime = System.nanoTime();
if (myrank == 0) {
     ...
} else {
      ...
}

long endTime = System.nanoTime();
long duration = endTime - startTime; 
```

结果是：

```
MPJ Express (0.35) is started in the cluster configuration
Starting process <0> on <Raptor>
Starting process <1> on <Predator>
338198093
received: test               :
449582529
Stopping process <0> on <Raptor>
Stopping process <1> on <Predator> 
```

我想把这些转换成更易读的东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T19:15:01.240

一毫秒是 1,000,000 纳秒，所以你只需要一个除法。

一种更具可读性和安全性的方法是使用 TimeUnit 类：

```
long millis = TimeUnit.NANOSECONDS.toMillis(nanos) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T19:14:08.520

一种简单的替代方法是使用毫秒开始：

```
long startTime = System.currentTimeMillis();
...
long endTime = System.currentTimeMillis(); 
```

# javascript - onload='setInterval("function()",1000)' 不起作用

> ID：15590945
> 
> 赞同：0
> 
> 时间：2013-03-23T19:10:55.650
> 
> 标签：javascript, xml, ajax, html

我有一个 xml 文件，我想每隔一秒将其内容加载到特定的 html div 中，这是解析 xml 文件的 javascript 部分：

```
function getEntries() {

    if (window.XMLHttpRequest)
        req = new XMLHttpRequest();
    req.onreadystatechange = handleReq;
    req.open("GET", "entries.xml", true);
    req.send(null);

}
function handleReq() {
    if (req.readyState == 4)
        document = req.responseXML;
    var states = document.getElementsByTagName("entry");
    for (i = 0; i < states.length; i++) {
        currentState = states[i];
        document.getElementById("LogArea").innerHTML = "<table><tr><td><b>Name:</b></td><td>"
                + currentState.getAttribute("umessage");
        +"</td></tr><tr><td><b>Message:</b></td><td>"
                + currentState.getAttribute("uname");
        +"</td></tr></table>";
    }
} 
```

这是xml文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<entries>
<entry umessage="aaaaaaaa" uname="aaaaaaa" />
<entry umessage="Hello everybody" uname="John" />
<entry umessage="Hello everybody" uname="Smith" />
<entry umessage="Hello everybody" uname="Knuth" />
</entries> 
```

这就是html部分：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<body bgcolor="yellow" onload='setInterval("getEntries()",1000)'>
<div id="LogArea" align="left">
</div>
</body>
</html> 
```

问题是指定的 div 中没有加载任何内容，并且 firebug 中不存在任何错误

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T19:15:30.093

您正在尝试覆盖`document`，`function handleReq()`以便它引用 XML 而不是 HTML。无论成功与否，它仍然无法正常工作。

首先，您尝试设置`document`为异步加载的 XML。正如评论中提到的，这可能会失败（在我的测试中，Chrome 和 IE 9 都不允许我以`document`这种方式覆盖）。

```
document = req.responseXML;
var states = document.getElementsByTagName("entry"); 
```

如果失败，则在您的 HTML 页面`states`中寻找`<entry>`标签（不是您想要的）。如果它成功了，那么你在两行之后就会遇到问题，因为你希望`document`再次神奇地成为 HTML 页面而不是 XML：

```
document.getElementById("LogArea").innerHTML = ... 
```

*   不要使用作为属性的变量名`window`——将您的 XML 响应称为其他名称，例如`var xmldoc = ...`.

*   不要使用全局变量。您应该使用`var whatever = ...`而不是`whatever = ...`定义函数变量。

*   正如其他人所提到的，`setTimeout(String, ...)`这是不好的做法并且已被弃用。函数在 JavaScript 中是成熟的对象，所以只需传递函数本身（不带引号，不带括号）。

*   的整个主体`function handleReq()`应该在`if (req.readyState == 4)`块内（不仅仅是第一行）。如果请求还没有完成，你不想做任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T19:12:53.237

利用

```
setInterval(getEntries,1000) 
```

不要传入将要`eval`编辑的字符串，而是直接传入函数名。

[如本答案](https://stackoverflow.com/a/15590997/1583)所述，您的`handleReq`方法中还有一个问题：

```
document = req.responseXML; 
```

这*替换*了文档，这意味着您接下来的几行指的是不再存在的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T19:13:35.590

将字符串作为第一个参数传递是不好的/折旧的。而是使用：

```
setInterval(getEntries, 1000); 
```

或者如果您需要传递参数：

```
setInterval(function(){ getEntries('foo') }, 1000); 
```

尽管这可能无法解决您的问题，但请务必牢记。

# java - 验证来自数组的输入

> ID：15590946
> 
> 赞同：-1
> 
> 时间：2013-03-23T19:10:56.760
> 
> 标签：java

我几乎完成了这个程序，我只是在验证输入时遇到了麻烦。我需要确保用户只使用`A`、`B`、`C`和`D`作为答案，但是当我这样做时，我的程序会重复最终结果，而不仅仅是显示`"Only A, B, C, and D are valid"`窗口。我只需要帮助修复考试类中的第 101-125 行（下面的最后一个代码部分）。

**错误在这部分**

```
public void actionPerformed(ActionEvent e){
String actionCommand = e.getActionCommand();

if (actionCommand.equals("Exit")){
    System.exit(0);
}
else if (actionCommand.equals("Grade")){
    char[] input = new char[20];
    for (int i= 0; i < input.length; i++){

        input[i] = answerTextFields[i].getText().charAt(0);
        input[i] = Character.toUpperCase(input[i]);
    }
      for (int i=0; i<=input.length; i++) {
            if (input[i] < 'A'|| input[i] > 'D') {
               JOptionPane.showMessageDialog(null, "Only A, B, C, and D are valid");
            } 
            else {
    driver.setName(nameTextField.getText());
    driver.report(input);
            }
      }    
}        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:35:37.303

如果我理解您的问题，您希望一旦警告消息显示在对话框窗口中，该程序就不应重复。如果您不希望程序在显示对话框窗口后重复，我认为您需要中断循环。这是修改后的代码：

```
for (int i=0; i<=input.length; i++) {
        if (input[i] < 'A'|| input[i] > 'D') {
           JOptionPane.showMessageDialog(null, "Only A, B, C, and D are valid");
           break; // Added to break the loop
        } 
        else {
driver.setName(nameTextField.getText());
driver.report(input);
        }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:54:41.273

尝试这个：

```
 String actionCommand = e.getActionCommand();
        boolean checkValidate = true;
        if (actionCommand.equals("Exit")) {
            System.exit(0);
        } else if (actionCommand.equals("Grade")) {
            char[] input = new char[20];
            for (int i = 0; i < input.length; i++) {

                input[i] = answerTextFields[i].getText().charAt(0);
                input[i] = Character.toUpperCase(input[i]);
            }
            for (int i = 0; i <= input.length; i++) {
                if (input[i] < 'A' || input[i] > 'D') {
                    JOptionPane.showMessageDialog(null, "Only A, B, C, and D are valid");
                    checkValidate = false;
                    break;
                }
            }

////////////if the user enter wrong answer , it's no need to print the report , so i make the report out For Loop 

            if (checkValidate) {
                driver.setName(nameTextField.getText());
                driver.report(input);
            }

        } 
```

# snmp - 每个端口 2000 个交换机 snmp

> ID：15590949
> 
> 赞同：1
> 
> 时间：2013-03-23T19:11:05.637
> 
> 标签：snmp, bulk, device

我正在运行一个应用程序，该应用程序每 5 分钟从 2000 多个交换机收集 snmp 数据、upoctets、downoctects、端口状态，并将它们显示在图表中，并根据端口状态在网页上以绿色或红色显示它们，这是我第一次添加设备我遍历它获取端口索引将其保存到 db，每五分钟我从 db 获取端口索引针对 oid 运行它执行 snmpget 逐个端口获取数据并将它们保存到 mysql。

几乎有 8 个 oid 和 2000 多个设备，串行需要更长的时间，直到最后一个 oid 完成才执行下一个 oid。我听说过 snmpbulkget 或 snmptable 但不了解它们，

我想要一种替代方法，我可以减少网络流量并批量获取表的数据，而不是我为每个 oid 一个一个地执行查询 snmpget，这通常会执行五分钟的差异。

我向交换机发送一个表请求，它返回所有端口状态的值表。

它将减少等待下一个呼叫并加快进程也将减少网络流量。

可能吗？

您能否对我的 senario 进行改进，因为许多接口计数器每 5 分钟查询数千个设备。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:19:31.007

SNMP getbulk 命令允许您指定多个 OID 和一个 maxrepetitions 参数，该参数限制代理在回复中发送的 varbind 数量。它非常适合在您描述的情况下优化性能。当然有一个问题：

*   SNMP getbulk 在 SNMP v1 中不可用
*   设置正确的 maxrepetitions 参数可能很棘手 - 如果必须在回复中包含一定数量的 varbind，一些代理会拒绝发送回复

# ios - 动画iOS后按钮停止工作

> ID：15590954
> 
> 赞同：0
> 
> 时间：2013-03-23T19:11:50.727
> 
> 标签：ios, uiview, uianimation

在我执行 slide 方法后， UIView 上的按钮在调用该方法后停止工作。

对可能发生的事情有任何想法吗？

```
@implementation ResultSliderView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        self.frame = CGRectMake(10,255,0,0);

    }
    return self;
}

/*
This method slides the view up by animating
*/
-(void)slideUp{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:.5];
    [UIView setAnimationCurve:UIViewAnimationOptionAllowUserInteraction];
    self.frame = CGRectMake(5,38,0,0);
    [UIView commitAnimations];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:24:47.710

您的视图大小为零，因此按钮将在其框架之外——当它们在框架之外时它们不会收到触摸（如果您的视图没有设置剪辑子视图，您仍然会看到按钮） .

# ilog - 如何单独验证 ilog 变量？

> ID：15590958
> 
> 赞同：0
> 
> 时间：2013-03-23T19:12:28.307
> 
> 标签：ilog, odm, jrules

我将使用 ilog jrules 单独验证多个对象（一次一个）。

我目前的想法是将所有需要验证的项目包装在一个名为“itemToValidate”的输入参数中，如下所示

```
<xs:element name="itemToValidate">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="employer" type="tns:employer" minOccurs="0" />
            <xs:element name="department" type="tns:department" minOccurs="0" />
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

然后在名为“init”的包中名为“init”的规则中获取每个项目并设置为一个变量，例如“雇主”然后对于“itemToValidate”中的每个项目（元素）将有一个包，例如“雇主”与“雇主”相关的规则

我面临的问题是我需要在实际验证之前检查所有规则的空值。

有没有办法避免这种情况？或者我的实施有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:41:01.257

我不确定是否理解您的问题。“在实际验证之前检查所有规则的空性”。

为什么不将对象设置在工作内存中，让 JRules 处理内存并使用局部规则变量而不是全局变量？

如果“我的雇主”的名字是鲍勃，则将“我的雇主”设置为雇主，
然后打印“你好”

我将创建一个函数，首先将“ItemsToValidate”推送到工作内存中，然后像我一样编写规则。通过这样做，如果没有需要验证的 Employer，则规则永远不会触发，因为内存中没有 Employer 类型的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-11T17:49:24.240

可以实现您感兴趣的类的 BOM 到 XOM 映射的 Tester 部分来检查您关心的字段是否存在。

例如，测试仪可以写成：

> 返回 this.employer != null

这意味着雇主为 null 的 itemToValidate 不会在您编写的规则中进行评估。这将消除空检查（对于雇主）。

查看“使用IRL的类映射测试器”主题下的知识中心

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-29T19:31:17.623

简单地说，在我们的项目中，我们为这种方法做了一个单一的语言化，使用：

`the value {VALUE} is defined`（返回一个布尔值）

希望这可以帮助。

# c# - 如何使用GPRS上传数据

> ID：15590960
> 
> 赞同：1
> 
> 时间：2013-03-23T19:12:33.910
> 
> 标签：c#, c, gsm, at-command, gprs

我有 wavecom GSM/GPRS 调制解调器。目前我仅将其用作 GSM 并使用 AT 命令发送短信，然后将其作为连接到计算机的另一端接收。该计算机程序读取短信然后上传到网站。上传到网站很简单，只需使用查询字符串调用 url。像[http://www.mtsonweb.com/fuel.php?p=](http://www.mtsonweb.com/fuel.php?p=) $589,458,458,4$

现在服务器端的第二部分是额外的，因为我们有 GPRS 调制解调器，我们可以使用它直接向网站发送数据。

网站在共享主机上，我们无法建立套接字连接。可以用AT指令提供网络apn，调用weblink直接将数据推送到网站吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:47:09.917

将 GPRS 与 GSM/GPRS 调制解调器一起使用的基本过程是使用类似`ATDT*99***1#`或类似的字符串拨号（查看设备文档以获取设置正确 APN 的特定命令等），然后将控制权交给`pppd`操作系统使用的任何软件对于 PPP，在串行设备上建立 PPP 链接。

# javascript - 将颜色放在div背景上？（也就是在不改变“背景颜色”值的情况下改变 div 的颜色）

> ID：15590964
> 
> 赞同：2
> 
> 时间：2013-03-23T19:12:43.363
> 
> 标签：javascript, jquery, css, html, background-color

如标题所述；是否可以将颜色“放在”div的背景上？我需要做的是更改 div 的显示颜色而不更改“背景颜色”值。

保留背景颜色的原因是因为我用它来比较点击的 div：

```
var pick1 = false;
var pick2 = false;
var id1;
var id2;

$('.card').click(function(){

    if(pick1) {
        pick2 = $(this).css('background-color');
        id2 = $(this).attr('id');
        if(pick1 == pick2 && id1!=id2) alert('Correct');
        else alert('Incorrect');

        pick1 = false;
        pick2 = false;
    } else {
        pick1 = $(this).css('background-color');
        id1 = $(this).attr('id');   
    }
}); 
```

目标是用例如灰色隐藏 div，直到它们被点击：http: [//jsfiddle.net/94jerdaw/WJQkA/4/](http://jsfiddle.net/94jerdaw/WJQkA/4/)

**编辑：**

单击div时如何删除灰色？检查：http: [//jsfiddle.net/94jerdaw/29TCZ/3/](http://jsfiddle.net/94jerdaw/29TCZ/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T19:34:19.423

不知道我是否明白你的目的......但会使用 :after work 吗？

```
.card {
    position: relative;
}
.card:after {
    content: "";
    display: block;
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    background: black;
}
.card:hover:after {
    display: none;
} 
```

示例：http: [//jsfiddle.net/29TCZ/](http://jsfiddle.net/29TCZ/)

您可以将 :hover 替换为一个类并根据需要切换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T19:15:18.530

首先，你不能改变 div 的`background-color`，而不改变它的 CSS`background-color`属性。你怎么能？

猜测您想要的是保持最后的背景颜色（用于某些操作或将其交换回来），然后将其保存在一些隐藏的输入变量中。

然后，您可以使用它在任何您想要的地方显示。

此外，如果您想获取该`background-color`属性并将其显示`as a text`在 div 上，您可以非常轻松地做到这一点。

```
var color = $('#selector').css('backgroundColor'); 
```

，但它会返回 RGB 值。如果你想要十六进制，

使用这个方便的方法：

```
var hexDigits = new Array
        ("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"); 

//Function to convert hex format to a rgb color
function rgb2hex(rgb) {
 rgb = rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
 return "#" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);
}

function hex(x) {
  return isNaN(x) ? "00" : hexDigits[(x - x % 16) / 16] + hexDigits[x % 16];
 } 
```

取自[这里](https://stackoverflow.com/questions/1740700/get-hex-value-rather-than-rgb-value-using-jquery)

# 更新，

目前你`divs`是这样的：

```
<div id="a1" class="card"></div>
<div id="a2" class="card"></div>
<div id="a3" class="card"></div>
..
.. 
```

并且由于您想为这些 div 中的每一个分配一个秘密颜色，因此在您的 while 循环中通过 javascript 更新它们，使它们像这样：

```
 <div id="a1" class="card" data-color-index="1"></div>
 <div id="a2" class="card" data-color-index="2"></div>
 <div id="a3" class="card" data-color-index="3"></div> 
```

现在，当您单击特定 div 时，获取其索引并从`colors`您的数组中选择该项目。因为，你是`splicing`你的原始数组，我必须复制它，以便以后使用。

`data-color-index`您可以像这样通过 jquery获取任何元素的属性 ：

```
 $('#selector').data('color-index'); 
```

看到这个[小提琴](http://jsfiddle.net/manishmishra121/WJQkA/7/)。它做你想做的事

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T19:25:04.757

正如 Manish 所说，你不能在不改变 CSS 属性的情况下改变 div 的外观——但是有几种 hacky 方法可以做同样的事情。一个例子是在覆盖整个区域的每个彩色方块中创建一个子 div，然后将该 div 的颜色设置为灰色。然后，您可以使用 CSS 显示属性来显示和隐藏覆盖 div。

但是，我建议在 JavaScript 中使用颜色的副本，并在单击每个正方形时仅引用与每个正方形关联的值，而不是每次都检查 DOM，因为这样可以使逻辑与外观分开:)

# jquery - jquery getjson问题

> ID：15590965
> 
> 赞同：0
> 
> 时间：2013-03-23T19:12:43.817
> 
> 标签：jquery, json

此代码在脚本标签中运行良好。但是当我在函数中编写这段代码并在任何地方调用它时，getjson 不起作用。我没有改变任何东西，只是把它放在一个函数中，代码不起作用。这是我的代码：

```
var searchUrl = "http://search.twitter.com/search.json?q=" + "emre" + "&rpp=" + 5 + "&lang=en&callback=?";

$.getJSON(searchUrl, function(data) {
  var twitterList = $( "<ul />" );

  $.each( data.results, function( index, item ) {
    $( "<li />", { "text" : item.text } )
    .appendTo( twitterList );
  });

  $( "#output" ).fadeOut( "fast", function(){
    $( this ).empty()
    .append( twitterList )
    .fadeIn( "slow" );
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:42:03.493

工作小提琴：http: [//jsfiddle.net/](http://jsfiddle.net/)

```
(function($) {
  $(document).ready(function() {
    var twitterURL = "http://search.twitter.com/search.json?q=" + "emre" + "&rpp=" + 5 + "&lang=en&callback=?";    
    myFunction(twitterURL);
  });

  function myFunction(twitterURL) {
    $.getJSON(twitterURL, function(data) {
      var twitterList = $( "<ul />" );

      $.each( data.results, function( index, item ) {
        $( "<li />", { "text" : item.text } )
        .appendTo( twitterList );
      });

      $( "#output" ).fadeOut( "fast", function() {
        $( this ).empty()
        .append( twitterList )
        .fadeIn( "slow" );
      });
    });
  }
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:45:52.867

## [演示](http://jsfiddle.net/mohammadAdil/JqGVt/)

**功能 ：**

```
 function searchThis(url){
    $.getJSON(url, function(data) {
    var twitterList = $( "<ul />" );

     $.each( data.results, function( index, item ) {
       $( "<li />", { "text" : item.text } )
       .appendTo( twitterList );
     });

     $( "#output" ).fadeOut( "fast", function(){
       $( this ).empty()
       .append( twitterList )
       .fadeIn( "slow" );
    });
  });
} 
```

**调用函数**

```
var searchUrl = "http://search.twitter.com/search.json?q=" + "emre" + "&rpp=" + 5 + "&lang=en&callback=?";

searchThis(searchUrl); 
```

# c++ - Visual C++ 中基于 MFC 的项目编译错误

> ID：15590967
> 
> 赞同：0
> 
> 时间：2013-03-23T19:12:50.113
> 
> 标签：c++, windows, visual-studio-2008, visual-c++, mfc

我对以下 C++ 代码有一些问题

我正在使用 VC++，现在我正在尝试编译以下基于 MFC 的项目

这是一个源文件*winmfcproectum.cpp*

```
#include "stdafx.h"
#include "winmfcproectum.h"

// ExX112_021.CppPP
// An elementary MFC program

COurApp::COurApp()
{
// TODO: add construction code here,
// Place all significant initialization in InitInstance
}

COurApp AnApplication;                     // Define an application object

// Function to create an instance of the main application window
BOOL COurApp::InitInstance()
{
  // AfxEnableControlContainer();

  // Construct a window object in the free store
  // m_pMainWnd = new COurWnd;
  // m_pMainWnd->ShowWindow(m_nCmdShow);     // ...and display it
  return TRUE;
} 
```

这些是头文件，

*标准数据文件*

```
// stdafx.h : include file for standard system include files,
// or project specific include files that are used frequently, but
// are changed infrequently
//

#if _MSC_VER > 1000
#pragma once
#endif // _MSC_VER > 1000

#define VC_EXTRALEAN        // Exclude rarely-used stuff from Windows headers

#include <afxwin.h>         // MFC core and standard components
#include <afxext.h>         // MFC extensions
#include <afxdisp.h>        // MFC Automation classes
#include <afxdtctl.h>       // MFC support for Internet Explorer 4 Common Controls
#ifndef _AFX_NO_AFXCMN_SUPPORT
#include <afxcmn.h>         // MFC support for Windows Common Controls
#endif // _AFX_NO_AFXCMN_SUPPORT

// C RunTime Header Files
#include <stdlib.h>
#include <malloc.h>
#include <memory.h>
#include <tchar.h>

// TODO: reference additional headers your program requires here 
```

和*winmfcproectum.h*

```
#ifndef _WINMFCPROECTUM_H
#define _WINMFCPROECTUM_H

#if _MSC_VER > 1000
#pragma once
#endif // _MSC_VER > 1000

#ifndef __AFXWIN_H__
    #error include 'stdafx.h' before including this file for PCH
#endif

#include "resource.h"       // main symbols

class COurWnd : public CFrameWnd
{
   public:
      // Constructor
      COurWnd()
      {
         Create(0, L"Our Dumb MFC Application");
      }
};

// Application class definition
class COurApp : public CWinApp
{
   public:
       COurApp();

   public:
      virtual BOOL InitInstance();

};

#endif 
```

我在共享 DLL 中使用 MFC 创建了非空 Win32 项目，

*resource.h*和*targetver.h*是自动创建的，我不在这里发布它们。
因为*stdafx.h*是预编译的，所以*stdafx.cpp*也是自动创建的

现在我的问题是，看起来*COurApp*类在*winmfcproectum.cpp*中是不可见的，尽管我已经包含*了 winmfcproectum.h*，所以如果我评论那些构造函数和函数实现，即*COurApp::COurApp()*和*COurApp::InitInstance()*，以及它们之间的变量声明，一切都编译得很好

这是编译输出：

```
Compiling...
winmfcproectum.cpp
Linking...
winmfcproectum.obj : error LNK2019: unresolved external symbol "public: __thiscall CWinApp::CWinApp(wchar_t const *)" (??0CWinApp@@QAE@PB_W@Z) referenced in function "public: __thiscall COurApp::COurApp(void)" (??0COurApp@@QAE@XZ)
winmfcproectum.obj : error LNK2001: unresolved external symbol "public: virtual class CDocument * __thiscall CWinApp::OpenDocumentFile(wchar_t const *)" (?OpenDocumentFile@CWinApp@@UAEPAVCDocument@@PB_W@Z)
winmfcproectum.obj : error LNK2001: unresolved external symbol "public: virtual void __thiscall CWinApp::AddToRecentFileList(wchar_t const *)" (?AddToRecentFileList@CWinApp@@UAEXPB_W@Z)
winmfcproectum.obj : error LNK2001: unresolved external symbol "public: virtual int __thiscall CWinApp::DoMessageBox(wchar_t const *,unsigned int,unsigned int)" (?DoMessageBox@CWinApp@@UAEHPB_WII@Z)
winmfcproectum.obj : error LNK2001: unresolved external symbol "public: virtual int __thiscall CWinApp::OnDDECommand(wchar_t *)" (?OnDDECommand@CWinApp@@UAEHPA_W@Z)
C:\Documents and Settings\Mango\My Documents\Visual Studio 2008\Projects\winmfcproectum\Debug\winmfcproectum.exe : fatal error LNK1120: 5 unresolved externals 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:21:50.553

正如链接器所说，它无法从 MFC 中找到类，如果你真的链接到正确的 MFC 库，你应该仔细检查你的项目设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:09:48.487

啊哈，现在我明白了。我的项目和工作项目之间的唯一区别是，正常工作的项目在其“字符集”选项字段中具有“多字节字符集”，而我的项目具有“unicode 字符集”。因此，以上所有这些错误都是针对 unicode 字符集进行编译的结果。

有趣的是，即使您不将任何字符串传递给任何函数，也不可能为 unicode charset 进行编译，尽管例如[在这里](http://social.msdn.microsoft.com/Forums/en-US/vclanguage/thread/c1b08c0a-a803-41c3-ac8c-84eba3be1ddb/)，他们说如果我们要为 unicode charset 编译，我们可以在字符串前面加上 L 或 generic _T() 宏。至少，我在我的 VC++ 上试过这个，但没有成功。

# java - Java - 使用 KeyBindings 检测任何按键？

> ID：15590969
> 
> 赞同：2
> 
> 时间：2013-03-23T19:12:54.187
> 
> 标签：java, swing, key, keypress, key-bindings

我读到使用 KeyBindings 比使用 KeyListeners 更好。我看到 KeyBindings 如何对特定键的特定反应有用；但我也试图检测键盘上任何键的按下/释放：有没有办法用 KeyBindings 做到这一点？

例如，我通常会使用 KeyBindings 来作用于单个键，如下所示：

```
InputMap iMap = component.getInputMap();
ActionMap aMap = component.getActionMap();

iMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "enter without modifiers");
aMap.put("enter without modifiers", new AbstractAction(){
      public void actionPerformed(ActionEvent a){
              System.out.println("Enter pressed alone");
      }); 
```

所以我在想这样的事情来检测任何按键：

```
iMap.put(KeyStroke.getKeyStroke(KeyEvent.KEY_PRESSED, 0), "any key was pressed");
aMap.put("any key was pressed", new AbstractAction(){
      public void actionPerformed(ActionEvent a){
              System.out.println("some key was pressed, regardless of which key...");
      }); 
```

有没有办法做到这一点？

另外，有没有办法用 ANY 修饰符组合来捕捉它们的 KeyBinding？例如，无论是否持有任何修饰符，或者是否持有任何组合的 ctrl-alt 等，都映射 Enter-action？

非常感谢，丹

交叉发布在：[http ://www.javaprogrammingforums.com/whats-wrong-my-code/26194-how-detect-any-key-press-keybindings.html#post103862](http://www.javaprogrammingforums.com/whats-wrong-my-code/26194-how-detect-any-key-press-keybindings.html#post103862)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T20:33:11.500

> 我看到 KeyBindings 如何对特定键的特定反应有用；

是的，那是您使用键绑定的时候

> 但我也试图检测键盘上任何键的按下/释放：有没有办法用 KeyBindings 做到这一点？

不，键绑定不用于此目的。

> 另外，有没有办法用 ANY 修饰符组合来捕捉它们的 KeyBinding？

不，再次绑定是针对特定的 KeyStroke。因此，您需要编写一个方法来为每个组合添加绑定。请注意，顺序无关紧要。也就是 Shift+Alt 和 Alt+Shift 一样

在大多数情况下，键绑定是首选方法。在你的情况下，它不是。

如果您正在侦听具有焦点的特定组件上的 KeyEvent，则 KeyListener 可能是合适的。

或者，如果您想在更全局的基础上侦听 KeyEvent，那么您可以根据您的具体要求查看[Global Event Listeners](http://tips4java.wordpress.com/2009/08/30/global-event-listeners/)或[Global Event Dispatching 。](http://tips4java.wordpress.com/2009/09/06/global-event-dispatching/)

# javascript - jquery .click 删除类时

> ID：15590970
> 
> 赞同：0
> 
> 时间：2013-03-23T19:12:59.690
> 
> 标签：javascript, jquery

这是我的代码： http: [//jsfiddle.net/smotru/fqDZt/](http://jsfiddle.net/smotru/fqDZt/) 当我点击任何 div 时它不应该提醒我，因为没有类.. 我应该怎么做才能让它正常工作？

```
$(document).ready(function () {
    $('.selpage1').click(function () {
        selpage(1);
    });
    $('.selpage2').click(function () {
        selpage(2);
    });
    $('.selpage3').click(function () {
        selpage(3);
    });
    for (j = 1; j < 6; j++) {
        $('#pg' + j).removeClass('selpage' + j);
    }
});

function selpage(i) {
    alert(i);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:14:53.057

当你删除类时，你还应该取消绑定点击事件

```
$('.selpage' + j).unbind('click'); 
```

# c# - 实体框架 6 自定义关系约定

> ID：15590977
> 
> 赞同：2
> 
> 时间：2013-03-23T19:13:28.663
> 
> 标签：c#, entity-framework, entity-framework-6

我已阅读有关实体框架 6 中约定[的](http://entityframework.codeplex.com/wikipage?title=Custom%20Conventions)文档。但它不包含关系约定。

假设我有以下模型：

```
[TablePrefix("mst")]
public class Guru
{
    public int Id { get; set; }

    public int? IdKotaLahir { get; set; }

    public virtual Kota KotaLahir { get; set; }
} 
```

我希望属性`IdKotaLahir`是导航属性的外键`KotaLahir`。外键名称是`"Id"+<NavigationPropertyName>`. 是否可以使用当前版本的实体框架（EF 6 alpha 3）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:13:57.203

它只是一个属性，还是您需要全面使用（即整个模型使用外键名称始终为“Id”+ NavigationPropertyName 的约定）？如果您只想要单个实体的外键，则最好仅使用该`ForeignKey`属性：

```
public class Guru
{
    public int Id { get; set; }

    public int? IdKotaLahir { get; set; }

    [ForeignKey("IdKotaLahir")]
    public virtual Kota KotaLahir { get; set; }
} 
```

这适用于 EF5 和 EF6。在 EF6 中，您可以使用自定义约定来配置外键属性。这是我想出的自定义约定：

```
public class NavigationPropertyConfigurationConvention
    : IConfigurationConvention<PropertyInfo, NavigationPropertyConfiguration>
{
    public void Apply(
        PropertyInfo propertyInfo, Func<NavigationPropertyConfiguration> configuration)
    {
        var foreignKeyProperty = 
            propertyInfo.DeclaringType.GetProperty("Id" + propertyInfo.Name);

        if (foreignKeyProperty != null && configuration().Constraint == null)
        {
            var fkConstraint = new ForeignKeyConstraintConfiguration();
            fkConstraint.AddColumn(foreignKeyProperty);

            configuration().Constraint = fkConstraint;
        }           
    }
} 
```

我还为此写了一篇更详细的[博客文章](http://blog.3d-logic.com/2013/03/24/my-first-encounter-with-custom-conventions-in-entity-framework-6/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-05T15:46:02.697

在 EF6 中，接受答案的约定不再有效，因为 IConfigurationConvention 是内部的。处理这种情况的方法是从 ForeignKeyDiscoveryConvention 继承。

```
public class MyForeignKeyDiscoveryConvention : ForeignKeyDiscoveryConvention
{
    protected override bool MatchDependentKeyProperty(AssociationType associationType, AssociationEndMember dependentAssociationEnd,
        EdmProperty dependentProperty, EntityType principalEntityType, EdmProperty principalKeyProperty)
    {
        string navigationPropertyName = ((System.Reflection.PropertyInfo)dependentAssociationEnd.MetadataProperties.GetValue("ClrPropertyInfo", false).Value).Name;

        // The standard foreign key property to look for is NavigationProperty_PrimaryKeyName (e.g. "TableName_Id"). 
        // Use the below line to remove that underscore.
        //return dependentProperty.Name == navigationPropertyName + principalKeyProperty.Name;

        // Use the following for the IdKotaLahir scenario
        return dependentProperty.Name == "Id" + navigationPropertyName;
    }
} 
```

# python - Pascal 字符串使用（正确的 Python 示例）

> ID：15590986
> 
> 赞同：1
> 
> 时间：2013-03-23T19:14:11.127
> 
> 标签：python, string, pascal, freepascal

我有这个任务，我要求用户输入 11 位代码（字符串）。

1) 例如，假设用户输入代码为 37605030299。

2）然后我需要检查最后一个数字是否匹配。这是您获得最后一个数字的方式：nr11 = (nr1*1 + nr2*2 + nr3*3 + nr4*4 + nr5*5 + nr6*6 + nr7*7 + nr8*8 + nr9*9 + nr10* 1) 模式 11

3）这是我写的：

```
var  C, nr1, nr2, nr3, nr4, nr5, nr6, nr7, nr8, nr9, nr10, nr11: string;

begin

nr1:=(copy(C, 1, 1));  
nr2:=(copy(C, 2, 1));
nr3:=(copy(C, 3, 1));
nr4:=(copy(C, 4, 1));
nr5:=(copy(C, 5, 1));
nr6:=(copy(C, 6, 1));
nr7:=(copy(C, 7, 1));
nr8:=(copy(C, 8, 1));
nr9:=(copy(C, 9, 1));
nr10:=(copy(C, 10, 1));
nr11:=(copy(C, 11, 1));   

writeln('Enter the code which contains 11 digits:');
 readln(C);

 if nr11 = (nr1*1 + nr2*2 + nr3*3 + nr4*4 + nr5*5 + nr6*6 + nr7*7 + nr8*8 + nr9*9 + nr10*1) mod 11 then
  begin
   writeln('The code is correct!');
  end

else
 if nr11 <> (nr1*1 + nr2*2 + nr3*3 + nr4*4 + nr5*5 + nr6*6 + nr7*7 + nr8*8 + nr9*9 + nr10*1) mod 11
  begin
   writeln('The code is incorrect!');
  end;

  readln();
end. 
```

这不起作用，因为我知道你不能像我一样在方程式中使用字符串，但它会起作用吗？我只是在学习 Pascal，如果这看起来太愚蠢了，对不起。

此 UI 代码应该是正确的。检查：

1*3 + 2*7 + 3*6 + 4*0 + 5*5 + 6*0 + 7*3 + 8*0 + 9*2 + 1*9 = 108

108/11 ~ 9,8

9*11 = 99

108-99 = 9（答案是9，所以最后一位必须是9，最后一位是9表示密码正确）

如果您不明白我试图做什么，那么我在 python 中找到了一个应该是正确的示例：

```
def checkIDCode(code):
    if len(code) != 11 or not code.isdigit():
            return False

    c = map(int,code)
    w1 = [1,2,3,4,5,6,7,8,9,1]
    w2 = [3,4,5,6,7,8,9,1,2,3]

    s1 = sum(map(lambda x,y: x*y, c[:-1], w1))%11
    s2 = (sum(map(lambda x,y: x*y, c[:-1], w2))%11)%10

    return s1 == c[-1] or s1 == 10 and s2 == c[-1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:01:35.557

这看起来像 ISBN。要计算校验位，我建议如下。

```
function DigitToInt(const c: Char): Integer;
begin
  if (c<'0') or (c>'9') then
    raise Exception.Create('Invalid input');
  Result := ord(c)-ord('0');
end; 
```

这会将“0”到“9”范围内的单个字符转换为相应的整数值。

```
function CheckDigit(const s: string): Integer;
var
  i: Integer;
begin
  if Length(s)<>11 then
    raise Exception.Create('Invalid input');
  Result := 0;
  for i := 1 to 10 do
    inc(Result, DigitToInt(s[i])*i);
  Result := Result mod 11;
end; 
```

这将计算 11 位代码的校验位。

要将实际校验位与计算出的校验位进行比较，您可以编写：

```
if CheckDigit(code) <> DigitToInt(code[11]) then
  .... handle error 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:04:33.297

首先，当 C 为空时，您从 C 中复制内容。您应该在尝试访问它的元素之前放置 readln(C) ：

```
writeln('Enter the code which contains 11 digits:');
readln(C);

nr1:=...
nr2:=... 
```

第二件事是，如果值只有 1 个字符，您可以通过索引访问它：

```
nr1:= C[1];
nr2:= C[2];
... 
```

要将字符串转换为整数，您必须包含 sysutils 才能使用 StrToInt 函数：[http ://www.freepascal.org/docs-html/rtl/sysutils/strtoint.html](http://www.freepascal.org/docs-html/rtl/sysutils/strtoint.html)

另一种方法（char by char）是计算 char 值和 48 之间的差异（这是 '0' 的 ASCII 码）

示例代码：

```
uses sysutils;
var  C:string
     nr1, nr2, nr3, nr4, nr5, nr6, nr7, nr8, nr9, nr10, nr11: integer;

begin
readln(C);
nr1:=strtoint(C[1]);
nr2:=strtoint(C[2]);
nr3:=strtoint(C[3]);
.
.
.
if nr11 = (nr1*1 + nr2*2 + nr3*3 + nr4*4 + nr5*5 + nr6*6 + nr7*7 + nr8*8 + nr9*9 + nr10*1) mod 11 then
   writeln('The code is correct!') 
   //if you skip the begin/end statements, only the next statement 
   //is executed in loops/if statements
else writeln('Not correct'); //notice that I didn't use ELSE IF but ELSE
readln; 
//in Pascal you can skip the parathenses if you don't pass arguments to the function
end. 
```

# jquery - 使用 Jquery 显示文件输入的值

> ID：15590988
> 
> 赞同：0
> 
> 时间：2013-03-23T19:14:25.823
> 
> 标签：jquery, file, input

由于使用 css 对文件输入进行样式设置的限制，我正在尝试一种新方法来隐藏输入，然后使用 JQuery 和 .html 在单独的 div 中显示值。这是我到目前为止的代码：

```
//Photo
$('#photo').blur(function()
{
var photo=$(this).val();
if (photo.length > 1)
{
$('#photoText').html("Photo Added");
}
}); 
```

问题是在我选择了一个文件后它没有显示 .html 。有没有办法让它在选择后显示html文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:29:16.023

如果我理解你的问题，这段代码应该可以工作：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title></title>
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>

  <script type="text/javascript">        
  /*<![CDATA[*/        
  $(document).ready(function(){
    $('#photo').change(function (){
      var photo=$(this).val();
      if (photo.length > 1){
        $('#photoText').html("Photo Added");
      }
    });
  });
  /*]]>*/
  </script>
</head>
<body>     
  <input type="file" id="photo" />
  <div id="photoText"></div>  
</body>
</html> 
```

有[jsfiddle示例](http://jsfiddle.net/lukalopusina/aH3p5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:19:51.407

如果我正确理解您的建议，您正在为输入文件实现一个单独的文本框，并且您希望将输入文件路径设置为该文本框

这是代码：

```
 $("#fileUpld").live('change', function () {
            var path = this.value.replace(/^C:\\fakepath\\/i, ''); //for chrome browser 
            $("#inputTxt").val(path);

        }); 
```

# objective-c - 插入 UITableView 数据源的字符串未插入

> ID：15590991
> 
> 赞同：0
> 
> 时间：2013-03-23T19:14:54.480
> 
> 标签：objective-c, nsstring, nsarray

每当我将视图中的 NSString 返回插入 UITableView 的数据源时，当放置插入新单元格的调用时，程序就会崩溃。下面是代码：

```
- (void)insertTableObject:(NSString *)thing
{
    if (!locations) locations = [[NSMutableArray alloc] init];
    [locations addObject:[NSString stringWithFormat:@"%@", thing]];
    NSLog(@"%@", locations);
    self.tableContents = [[NSMutableDictionary alloc] initWithObjectsAndKeys:locations,@"", nil];
    self.sortedKeys =[[self.tableContents allKeys] sortedArrayUsingSelector:@selector(compare:)];
    [self.tableView insertRowsAtIndexPaths:@[[NSIndexPath indexPathForRow:([locations count]-1) inSection:0]] withRowAnimation:UITableViewRowAnimationAutomatic];
} 
```

下面是打印出来的数组，以及随之而来的错误：

```
2013-03-23 15:06:32.433 XXX[9149:907] (
"D.C",
la
)
2013-03-23 15:06:32.439 XXX[9149:907] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 1 beyond bounds [0 .. 0]'
*** First throw call stack:
(0x320852a3 0x39f1b97f 0x31fd0b75 0xc05bd 0x33ed854d 0x33ec9685 0x33ec5d55 0x33ec4d27 0x33ec1bf9 0x33ff6b27 0xbeceb 0xf6413 0x33f780c5 0x33f78077 0x33f78055 0x33f7790b 0x33f77e01 0x33ea05f1 0x33e8d801 0x33e8d11b 0x35b815a3 0x35b811d3 0x3205a173 0x3205a117 0x32058f99 0x31fcbebd 0x31fcbd49 0x35b802eb 0x33ee1301 0xb701b 0xb6f70)
libc++abi.dylib: terminate called throwing an exception 
```

“la”打印时没有引号是一个问题吗？系统可能看不到该条目吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:42:01.593

我最终解决了这个问题。我有带有详细视图的单元格，所以当它绘制 detailView 索引时，它不存在。我在原始帖子中的函数中添加了一个简单的行，以向 detailView 数组添加另一个值。

# javascript - 我正在尝试整合我的代码......为什么我不能这样做？

> ID：15590994
> 
> 赞同：0
> 
> 时间：2013-03-23T19:15:04.153
> 
> 标签：javascript, jquery

如果你不能通过我的其他问题来判断，我是一个自学成才的新手。我正在尝试整合我的一些 js 代码。我有 2 个 div，a0 和 a1 类。我想为每个（相同的事件）附加一个 mouseenter 事件。

这是我的[小提琴](http://jsfiddle.net/g2DQB/1/)，（希望）是不言自明的。.a0 和 .a1 是我的原始代码，.f0 和 .f1 代表我（失败的）整合尝试。为什么我不能做一个“for”循环（或者，如果可以的话，为什么我总是以 i 的值“2”结束？）？

（如果有办法我可以在 jquery 中做到这一点，那很好）

有关完整演示，请参见上面的小提琴：

```
$(".a0").on("mouseenter",function(){
        $(this).html("value: 0");
});
$(".a1").on("mouseenter",function(){
        $(this).html("value: 1");
});

/* my failed attempt to consolidate the above code */
for (var i=0; i<2; i++){ 
    $(".f"+i).on("mouseenter",function(){
        $(this).html("value: "+ i);
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T19:17:59.687

### 又快又脏

```
$(".a0, .a1").on("mouseenter",function(){
  $(this).html("value: " + ($(this).hasClass('a0') ? 0 : 1));
}); 
```

### 更优雅

为了以更优雅的方式解决您的问题，让我们首先了解您的代码为什么不起作用。

您正在定义两个将读入 i 值的回调。

但是，当您的鼠标进入元素时，i 已经设置为 2。

您可以使用闭包来防止这种情况：

```
for (var i=0; i<2; i++){ 
  (function(j) {
    $(".f"+i).on("mouseenter",function(){
      $(this).html("value: "+ j);
    });
  })(i);
} 
```

在这种情况下， i 的值被捕获到 j 中，并且在调用回调时不会更改。

这是一个[工作小提琴](http://jsfiddle.net/6TNqc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T19:23:30.560

问题是 i 是一个参考，当你的处理程序被调用时，它是 === 2 以下对我有用。

```
var assignME = function (i) {
    $(".f"+i).on("mouseenter",function(){
        $(this).html("value: "+ i);
    });
};

for (var i=0; i<2; i++){
    assignME(i);
} 
```

# javascript - 直接传递参数有效，在对象或数组中传递它不起作用

> ID：15590996
> 
> 赞同：0
> 
> 时间：2013-03-23T19:15:23.983
> 
> 标签：javascript, kineticjs

我有一个看起来像这样的功能

```
function myFunction(param)
{
    param.on('mouseover', function(){/*Do something*/});
}

var polygon = new Kinetic.Polygon({
    //My settings
});
myFunction(polygon); 
```

这绝对没问题。但是当我在这样的数组或对象中传递多边形时，我得到了错误。

```
function myFunction(param)
{
    for(var elem in param)
    {
        elem.on('mouseover', function(){/*Do something*/});
    }
}

var polygon = new Kinetic.Polygon({
    //My settings
});
myFunction([polygon]); 
```

错误是（在控制台中）：

```
Uncaught TypeError: Object 0 has no method 'on' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:26:12.060

Javascript`for ... in`循环的工作方式与您想象的略有不同。语句产生的值实际上是被迭代的对象的属性，在 Array 对象的情况下是数组索引。

以下应该工作：

```
function myFunction(array)
{
    for(var key in array)
    {
        elem = array[key]
        elem.on('mouseover', function(){/*Do something*/});
    }
} 
```

有关更多示例，请参见[http://javascriptweblog.wordpress.com/2011/01/04/exploring-javascript-for-in-loops/ 。](http://javascriptweblog.wordpress.com/2011/01/04/exploring-javascript-for-in-loops/)

# memory-management - WinRT如何处理BitmapImage和Image内存

> ID：15590998
> 
> 赞同：25
> 
> 时间：2013-03-23T19:15:31.893
> 
> 标签：memory-management, windows-8, windows-runtime, windows-store-apps, clr

我是使用**Windows**应用商店应用程序编程的新手`C#`，我正在尝试了解如何处理图像内存。我的应用程序非常简单：

1) 它使用对象从文件中引用位图`Windows.UI.Xaml.Media.Imaging.BitmapImage`，然后将其用作`Windows.UI.Xaml.Controls.Image`对象的源。在我的情况下，磁盘上的图像比屏幕上显示的尺寸更大，因此它正在被系统缩放。

**我的问题是WinRT**如何处理图像的内存？我使用了该*`vmmap`*工具，我在 Mapped File 部分看到我的图像文件有一个条目。我猜这意味着该文件的原始字节已完全加载到内存中。由于这是 JPG，因此必须将这些字节解码为像素字节。从我的测试看来，设置 BitmapImage 的 UriSource 实际上并不会导致任何处理发生，因为它需要 0 毫秒，而是进行了一些延迟加载。

所以问题是：哪个对象是未压缩的未缩放像素数据的主导者？什么对象是在屏幕上绘制的缩放像素数据的主导者？是否有工具可以轻松地向我展示这一点？在 Java 世界中，我使用 Eclipse 内存分析器工具。我尝试使用 PerfView，但结果对我来说毫无意义，似乎该工具用于分析性能。

**更新**：

在 BUILD 会议上，团队讨论了`Windows Performance Toolkit`. 我从来没有听说过有人提到 PerfView，所以我相信 WPT 是分析内存和性能的最新最好的工具，这里有一个链接：

[http://msdn.microsoft.com/en-us/performance/cc825801.aspx](http://msdn.microsoft.com/en-us/performance/cc825801.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T21:57:31.460

一个简短的答案很可能是“最佳”。不是一个聪明人，那里有很多不同的系统。提到硬件加速，您还可以考虑内核数量、显示内存、磁盘速度、监视器位深度和分辨率，不胜枚举。

# zurb-foundation - Zurb 基础 4 级

> ID：15590999
> 
> 赞同：2
> 
> 时间：2013-03-23T19:15:33.810
> 
> 标签：zurb-foundation

是否有任何文档解释了foundation.css 中的每个类？我不擅长前端开发，而且似乎并没有通过 zurb 网站上提供的粗略文档来掌握这些概念。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:14:40.997

空无一人。我认为对他们来说，ZURBlings 会很艰难，对我们来说，要过一遍，记录下来会很累。我认为你需要知道的是什么是响应式设计。你可以在这里有一个很好的初学者介绍：

*   [来自维基百科 - 鸟瞰图](http://en.wikipedia.org/wiki/Responsive_web_design)
*   [RD的另一个鸟瞰图](http://johnpolacek.github.com/scrolldeck.js/decks/responsive/)

然后继续阅读[Foundation 的基本内容](http://foundation.zurb.com/grid.php)。

一旦您对 RD 和 Foundation 的基本内容有了更广泛的了解，您就可以[在这里为之疯狂，](http://foundation.zurb.com/docs/)并了解它实际上可以让您做更多的事情。

一旦你习惯了使用 Foundation，你真的需要了解他们的 css，阅读了我给你的链接，并想要开始调整一些配置——顺便说一下，这已经在他们的文档中进行了解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T21:55:45.207

AFAIK，没有解释每一堂课的文件，但你可以试着看看厨房水槽

[http://foundation.zurb.com/docs/v/4.3.2/components/kitchen-sink.html](http://foundation.zurb.com/docs/v/4.3.2/components/kitchen-sink.html)

他们（几乎）将每个组件都作为演示提供在一个页面中。因此，您可以检查每个元素并熟悉类名。

这仅适用于 F4，我在 F5 中没有看到厨房水槽