# StackOverflow 问答 15311000-15311999

# c# - 在 Response.Redirect(Request.RawUrl) 之后将焦点设置为在 Gridview 中单击的最后一个按钮

> ID：15311006
> 
> 赞同：0
> 
> 时间：2013-03-09T13:04:36.320
> 
> 标签：c#, asp.net, gridview, focus, itemtemplate

我的网格视图中有一个按钮，网格有时可以有很多行

```
<asp:TemplateField HeaderText="DDT">
                <ItemTemplate> 
                    <asp:Button ID="DdtUnit" runat="server" Text=" -1 "  
                    CommandName="DdtUnit" 
                    CommandArgument='<%# Eval("CaseID")+ ";" + Eval("CaseworkerID")+ ";" + Eval("EventDate")+ ";" + Eval("EventID")+ ";" + ("-1")+";"+((GridViewRow)Container).RowIndex%>'/>
                </ItemTemplate> 
            </asp:TemplateField> 
```

命令参数被传递给存储过程，然后我有一个`Response.Redirect(Request.RawUrl);`

然后我想返回到页面上的同一个位置，只是到达同一行就可以了，但更好的方法是将焦点放在刚刚单击的同一个按钮上。

我已经尝试`MaintainScrollPositionOnPostBack ="true"`在页面指令中进行设置，但这不适用于 IE（我现在只对 IE 感兴趣）

所以我尝试传递`((GridViewRow)Container).RowIndex`给会话变量然后做

```
 protected void Page_Load(object sender, EventArgs e)
        {
            if (IsPostBack == false)
            {
                BindGridVeiw_Timeevents(MainCaseRef);
                Timeevents.Rows[MySession.Current.gridFocusIndex].Focus();
            }

        } 
```

但我无处可去，我错过了什么？

编辑：

```
 protected void Timeevents_RowCommand(object sender, GridViewCommandEventArgs e)
        {

            GridViewRow row = (GridViewRow)(((Button)e.CommandSource).NamingContainer);
} 
```

我想我到了某个地方！至少在我的命令 arg 结束时我不再需要这个了

> +";"+((GridViewRow)Container).RowIndex

现在我只需要获取实际的按钮（我之前没有提到每行有超过 1 个按钮）

# sql - 通过加入更新最小最大日期

> ID：15311009
> 
> 赞同：0
> 
> 时间：2013-03-09T13:04:59.527
> 
> 标签：sql, sql-update

我有 2 个表 CONT 和 CUMU，这两个表具有相同的字段，名为 RAPP(txt property)

在 CONT 中有一个名为 DATA 的文件（日期短）

在 CUMU 中有一个字段 DAL（英语为 FROM）和一个字段 AL（英语为 TO）

通过加入 RAPP，我需要从 CONT.DATA 中提取最小和最大日期，并在 DAL 中插入最小日期值，在 AL 中插入最大日期值

如何查询？

笔记; 我使用 ADO、Access 数据库和 vb6 经典

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:17:03.437

您可以编写一个查询来更新所有记录，如下所示：

```
UPDATE
  CUMU, CONT
SET 
  CUMU.DAL = (SELECT DISTINCT MIN(CONT.DATA) FROM CONT WHERE CONT.RAPP = CUMU.RAPP),
  CUMU.AL = (SELECT DISTINCT MAX(CONT.DATA) FROM CONT  WHERE CONT.RAPP = CUMU.RAPP)
WHERE 
  CONT.RAPP = CUMU.RAPP; 
```

亲自尝试：[sqlfiddle](http://www.sqlfiddle.com/#!2/26d2d/1/0)

它没有特别优化，但对于相对较小的数据集应该就足够了。

# c - 预期错误）

> ID：15311012
> 
> 赞同：-4
> 
> 时间：2013-03-09T13:05:08.307
> 
> 标签：c

嗨，你能帮我处理我的代码吗：

```
 typedef struct term{
        char var[10];
        int val[8];
    }TERM;

    TERM termx[50];
    int initialize();
    int a[15],b[15],c[15];

    int check(TERM termx[].var[],int i){
    int j;
    const char* const StringArray[NrOfStrings] =
        {
      "ABC","ABC'","AB'C'","A'B'C'","A'B'C","A'BC'","AB'C",
      "AB+C","A'B'+C'","A'B'+C","A'B+C'","AB'+C'","AB'+C","
      "A+BC","A'+B'C'","A'+B'C","A'+BC'","A+B'C'","A+B'C",
        };
    for(j=0;j<NrOfStrings;j++){
        if(stcmp(term[i].var,StringArray[j])==0){
            return(j);
            break;
            }
        }

    }
void main(){
int x,i,j,key;
char y[10];
    initialize();
    clrscr();
    printf("Enter the number of terms: ");
    scanf("%d",&x);
        for(i=0;i<x;i++){
        printf("Enter the %d term: ",i+1);
        scanf("%s",termx[i].var);
            for(j=0;j<strlen(termx[i].var);j++)
                termx[i].var[j]=changeToupper(termx[i].var[j],i,j);
        key=check(termx[i].var,i);
       }   
    printf("\nA\tB\tC\n\n");
    for(i=0;i<8;i++)
        printf("%d\t%d\t%d\n",a[i],b[i],c[i]);
    getch();

} 
```

它给了我预期的“）”错误及其指向函数check（）的参数。我知道这是一个常见错误，但我尝试搜索谷歌但找不到解决方案。我希望你能帮助我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:08:08.443

线

```
int check(TERM termx[].var[],int i){ 
```

应该是这样的

```
int check(TERM *term,int i){ 
```

然后

```
key=check(termx[i].var,i); 
```

应该读

```
key=check(termx[i],i); 
```

# php - Symfony 2 odbc 组件

> ID：15311015
> 
> 赞同：0
> 
> 时间：2013-03-09T13:05:24.807
> 
> 标签：php, symfony, odbc, teradata

只需将我的标准 Symfony2 版本配置为与 odbc 驱动程序一起使用。我需要 Teradata 连接。

我完全不需要任何 ORM 工具，我只会用它来返回 Teradata 存储过程或复杂查询的结果。

目前，它通过以下几个简单的步骤在程序 PHP 代码中工作：

```
 - $conn   = odbc_connect(HOST, USER, PASSWORD)
 - $stmt   = odbc_prepare($conn, $query)
 - $params = array(1, 2, 3)
 - odbc_execute($stmt, $params)
 - next just fetch results using odbc_fetch_array($stmt) 
```

现在想想如何以及在哪里根据 Sf2 最佳实践在 Symfony2 MVC 堆栈中实现这一点......也许是一个单独的服务？

只会提到新开发人员的易用性是首要任务。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:41:30.393

根据您的描述，我建议创建一个服务，而不是使用全局常量接收`HOST`，`USER`并`PASSWORD`通过服务容器，即您将该信息存储在您的 parameters.yml 中，在您的 bundle 的 service.yml 中使用这些参数创建一个服务，最后您创建您的服务类，它基本上只是包装您的 odbc 调用。

通过这种方式，您可以将敏感数据（用户、密码）排除在您的 git-repo 之外，假设您没有按照 Symfony 文档中的建议跟踪 parameters.yml，并且您可以从可以访问服务的任何地方轻松访问您的服务像这样的容器：

`$this->getContainer()->get('acme_demo.teradata_service')`

参数.yml：

```
parameters:
    teradata_host:     localhost
    teradata_user:     username
    teradata_password: password 
```

Acme\DemoBundle\Resources\config\services.yml：

```
services:
    acme_demo.teradata_service:
        class: Acme\DemoBundle\Service\TeradataService
        arguments:
            - %teradata_host%
            - %teradata_user%
            - %teradata_password% 
```

Acme\DemoBundle\Service\TeradataService：

```
class TeradataService
{
    public function __construct($host, $user, $password) 
    ...
} 
```

您甚至可以更进一步，在您的 service.yml 中将 teradata 服务设为私有，然后创建访问您的 TeradataService 的其他服务。通过这种方式，您可以确保 deleopers 不会直接干扰服务，而只能通过 ObjectManagers 干扰。

Acme\DemoBundle\Resources\config\services.yml：

```
services:
    acme_demo.teradata_service:
        public: false
        class:  Acme\DemoBundle\Service\TeradataService
        arguments:
            - %teradata_host%
            - %teradata_user%
            - %teradata_password%

    acme_demo.another_service:
        class: Acme\DemoBundle\Service\ServiceAccessingTeradata
        arguments:
            - @acme_demo.teradata_service 
```

这样，您的服务就不会直接绑定到您的 teradata 连接，这使得用其他东西替换 Acme\DemoBundle\Service\TeradataService 变得更容易。

# inno-setup - Inno Setup 创建具有管理权限的 HTA 快捷方式

> ID：15311016
> 
> 赞同：0
> 
> 时间：2013-03-09T13:05:38.613
> 
> 标签：inno-setup, uac, hta

我正在使用 Inno Setup 创建一个桌面快捷方式，用于打开保存在 Windows 7 上的 Program Files 中的[HTA](http://en.wikipedia.org/wiki/HTML_Application)文件。此 HTA 文件调用需要以管理员身份运行的外部 exe 文件。

因此，为此，我想使用 Inno Setup 自动创建一个以管理员身份运行的快捷方式。这里的问题是快捷方式指向 HTA 文件而不是 exe。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-24T03:58:47.187

检查这个样本：

```
<html>
<head>
<title>HTA Helpomatic</title>

<HTA:APPLICATION
     ID="oHTA"
     APPLICATIONNAME="HTAHelpomatic"
     SCROLL="yes"
     SINGLEINSTANCE="yes"
>
<!-- ID="objHTAHelpomatic" -->
<!-- WINDOWSTATE="maximize" -->

</head>

<SCRIPT Language="VBScript">

If HTAElevate() = True Then
    CreateObject("WScript.Shell").Run "mmc.exe compmgmt.msc", , True
    Call Main()
End If

Sub Main()
    MsgBox "HTA-Ende", 4096
End Sub

'*** v13.3 *** www.dieseyer.de *****************************
Function HTAElevate()
'***********************************************************
' http://dieseyer.de/scr/elevate.hta
' Unter Windows x64 laufen VBS' nach einem Doppelklick in der x64-Umgebung
' mit %WinDi%\System32\wscript.exe oder mit %WinDi%\System32\cscript.exe.
' In der x64-Umgebung laufen VBS aber nicht (richtig). Die Prozedur
' HTAElevate() erkennt dies und startet ggf. das VBS in der

  Const Elev = " /elevated"

' MsgBox oHTA.commandLine, , "5016 :: "

' Trace32Log "5018 :: oHTA.commandLine: ==" & oHTA.commandLine & "==", 1

  HTAElevate = True

' If InStr( LCase( oHTA.commandLine ), Elev) > 0 then MsgBox oHTA.commandLine, , "5022 :: "
  If InStr( LCase( oHTA.commandLine ), Elev) > 0 then Exit Function

  On Error Resume Next
    window.resizeto 750, 10 ' : window.moveto screen.width / 2, screen.height / 2
  On Error GoTo 0

' MsgBox oHTA.commandLine, , "5030 :: "

  createobject("Shell.Application").ShellExecute "mshta.exe", oHTA.commandLine & Elev, "", "runas", 1

  HTAElevate = False

  self.close

End Function ' HTAElevate()

</SCRIPT>
<body>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T17:16:20.023

如果您的可执行文件需要管理员访问权限，那么您应该[向您的可执行文件添加适当的清单](https://stackoverflow.com/a/5451408/588306)，而不是尝试提升 HTML 应用程序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T02:38:06.560

该问题的直接答案是使用 HTA 的文件名作为参数创建 mshta.exe 的快捷方式。mshta.exe 的快捷方式可以标记为以管理员身份运行。

# c++ - 用于确定两个线段是否相交的 C++ 过程

> ID：15311018
> 
> 赞同：6
> 
> 时间：2013-03-09T13:05:42.233
> 
> 标签：c++, algorithm, geometry, computational-geometry, segments

我最近在研究计算几何，我试图找到一种方法来检查两条线段是否相交。我认为我可以使用逆时针方向（简称 CCW）来确定。到目前为止，这是我的代码：

```
struct point { double x, y };

double CCW(point a, point b, point c)
{ return (b.x-a.x)*(c.y-a.y) - (b.y-a.y)*(c.x-a.x); }

int intersect(point a, point b, point c, point d)
{ return (CCW(a,b,c)*CCW(a,b,d)<0 && CCW(c,d,b)*CCW(c,d,a)<0); } 
```

上面的代码适用于我输入的测试用例，它非常易读并且很容易实现。但是在网上搜索后，我发现了另一种解决段相交问题的方法。该代码与我的相似，但它还有一些`if`我的实现省略的语句。这是代码：

```
struct line { point s, e; };

int middle(int a, int b, int c) {
  int t;    
  if ( a > b ) {
    t = a;
    a = b;
    b = t;
  }
  if ( a <= c && c <= b ) return 1;
  return 0;
}

int intersect(line a, line b) {
  if ( ( CCW(a.s, a.e, b.s) * CCW(a.s, a.e, b.e) < 0 ) &&
     ( CCW(b.s, b.e, a.s) * CCW(b.s, b.e, a.e) < 0 ) ) return 1;

  if ( CCW(a.s, a.e, b.s) == 0 && middle(a.s.x, a.e.x, b.s.x) && middle(a.s.y, a.e.y, b.s.y) ) return 1;
  if ( CCW(a.s, a.e, b.e) == 0 && middle(a.s.x, a.e.x, b.e.x) && middle(a.s.y, a.e.y, b.e.y) ) return 1;
  if ( CCW(b.s, b.e, a.s) == 0 && middle(b.s.x, b.e.x, a.s.x) && middle(b.s.y, b.e.y, a.s.y) ) return 1;
  if ( CCW(b.s, b.e, a.e) == 0 && middle(b.s.x, b.e.x, a.e.x) && middle(b.s.y, b.e.y, a.e.y) ) return 1;

    return 0;
} 
```

有人能解释一下这两种实现之间的区别，哪个更安全吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:13:50.823

您找到的功能还检查线段位于同一行内的情况。在这种情况下，查找两条线段是否重叠成为一维问题。在这种情况下，您的代码将返回 false。这是否是首选取决于应用程序。

例子：

```
point a={1,0}, b={3,0}, c={2,0}, d={4,0};

intersect(a,b,c,d); // your function will return false, 
                    // but the one you found will return true 
```

您找到的函数还查看了一条线段的端点位于另一条线段的情况：

例子：

```
point a={1,0}, b={3,0}, c={2,0}, d={2,3};

intersect(a,b,c,d); // your function will return false, 
                    // but the one you found will return true 
```

# asp.net-mvc - MVC - 检查访问该页面的用户是否已登录该站点

> ID：15311020
> 
> 赞同：0
> 
> 时间：2013-03-09T13:05:47.493
> 
> 标签：asp.net-mvc

1.  如何检查正在访问该页面的用户是否已登录该站点
2.  我想保留一些数据——比如与登录网站的用户相关的权限——我应该在哪里存储这些数据——这两个信息的会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:10:09.527

通常，您可以使用有关成员资格和角色的标准 ASP.NET 基础结构。

假设您在控制器操作中检查这些，您拥有可以帮助您的 User 属性：

```
if (User.Identity.IsAuthenticated) {
    // user is logged-in
} 
```

第二个问题取决于什么样的数据。如果您在谈论权限，听起来您可能完全可以避免存储任何内容，而只需求助于角色提供程序来识别哪个用户具有哪些权限。

# clojure - Clojure 中的懒惰帕斯卡三角形

> ID：15311022
> 
> 赞同：1
> 
> 时间：2013-03-09T13:05:52.757
> 
> 标签：clojure, lazy-evaluation, pascals-triangle

我试图在 Clojure 中编写一个简洁、懒惰[的帕斯卡三角形](https://en.wikipedia.org/wiki/Pascal's_triangle)，旋转使得行/列跟随三角形的对角线。也就是说，我想生成以下惰性序列的惰性序列：

```
((1 1 1 1 ...)
 (1 2 3 4 ...)
 (1 3 6 10 ...)
 ...
 ) 
```

我写的代码是：

```
(def pascal
  (cons (repeat 1)
        (lazy-seq
          (map #(map + %1 %2)
               (map #(cons 0 %) (rest pascal)))
               pascal
          ))) 
```

这样每一行都是通过将自身的右移版本添加到前一行来形成的。问题是它永远不会超过第一行，因为那时`(map #(cons 0 %) (rest pascal)))`是空的。

```
=> (take 5 (map #(take 5 %) pascal))
((1 1 1 1 1)) 
```

解决这个问题的明智方法是什么？我对使用 Clojure 进行编程非常陌生，并且对其中涉及的问题的思考方式非常不同，因此我非常感谢任何对此更有经验的人的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T13:30:46.723

简洁而慵懒

```
(def pascal (iterate (partial reductions +') (repeat 1)))

(map (partial take 5) (take 5 pascal))
;=> ((1 1 1 1 1) 
;    (1 2 3 4 5) 
;    (1 3 6 10 15) 
;    (1 4 10 20 35) 
;    (1 5 15 35 70)) 
```

但是太懒了？

```
(take 5 (nth pascal 10000))
;=> StackOverflowError 
```

再试一次

```
(take 5 (nth pascal 10000))
;=> (0) 
```

哦，重新开始，然后再试一次

```
(def pascal (iterate (partial reductions +') (repeat 1)))
(count (flatten (map (partial take 5) (take 100000 pascal))))
;=> 500000 
```

现在这些都在你的堆里

```
(take 5 (nth pascal 100000))
;=> (1 100001 5000150001 166676666850001 4167083347916875001) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T15:53:04.133

pascal 不应该是一个 var，而是一个生成无限序列的函数。

[查看此问题以了解有关惰性序列的用法](https://stackoverflow.com/questions/4992298/clojure-lazy-sequence-usage)

顺便说一句，试试这个：

```
(defn gennext [s sum]
  (let [newsum (+ (first s) sum)]
    (cons newsum
          (lazy-seq (gennext (rest s) newsum)))))

(defn pascal [s]
  (cons s
        (lazy-seq (pascal (gennext s 0))))) 
```

![在此处输入图像描述](../Images/a70761bd9c2be662475e339c2620bbf1.png)

(pascal (repeat 1)) 给你整数溢出异常，但这确实意味着它会产生无限的序列。您可以使用 +' 来使用大整数。

# unit-testing - zf2 phpunit 控制器依赖

> ID：15311026
> 
> 赞同：0
> 
> 时间：2013-03-09T13:06:33.683
> 
> 标签：unit-testing, dependency-injection, phpunit, zend-framework2

我正在对我的控制器进行单元测试`IndexController`（使用[http://framework.zend.com/manual/2.1/en/user-guide/modules.html](http://framework.zend.com/manual/2.1/en/user-guide/modules.html)教程）。

我的 IndexController 有一个依赖项：`Translator $translator`.

```
<?php
// module/Application/src/Application/Controller/IndexController.php

namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Zend\I18n\Translator\Translator;

class IndexController extends AbstractActionController
{
    protected $translator;

    public function __construct(Translator $translator)
    {
        $this->translator = $translator;
    }

    public function indexAction()
    {                
        $steeringWheelMapper = $this->getServiceLocator()->get('SupplierName\Mapper\SteeringWheel');
        $carBrandList = $steeringWheelMapper ->fetchCarBrandList();
        return new ViewModel();
    }
} 
```

我的单元测试设置：

*   模块
    *   应用
        *   测试
            *   应用测试
                *   控制器
                    *   索引控制器测试.php
            *   引导程序.php
            *   phpunit.xml.dist
            *   TestConfig.php.dist

测试现在给出以下错误： `Argument 1 passed to Application\Controller\IndexController::__construct() must be an instance of Zend\I18n\Translator\Translator, none given`。这里没什么奇怪的，但我找不到在哪里添加翻译器对象..

我应该在哪里添加翻译器对象？

编码

```
<?php
// module/Application/test/Testconfig.php.dist
return array(
    'modules' => array(
        'Application',
    ),
    'module_listener_options' => array(
        'config_glob_paths'    => array(
            '../../../config/autoload/{,*.}{global,local}.php',
        ),
        'module_paths' => array(
            'module',
            'vendor',
        ),
    ),
);

<?php
// module/Application/test/Bootstrap.php

namespace ApplicationTest;//Change this namespace for your test

use Zend\Loader\AutoloaderFactory;
use Zend\Mvc\Service\ServiceManagerConfig;
use Zend\ServiceManager\ServiceManager;
use Zend\Stdlib\ArrayUtils;
use RuntimeException;

error_reporting(E_ALL | E_STRICT);
chdir(__DIR__);

class Bootstrap
{
    protected static $serviceManager;
    protected static $config;
    protected static $bootstrap;

    public static function init()
    {
        // Load the user-defined test configuration file, if it exists; otherwise, load
        if (is_readable(__DIR__ . '/TestConfig.php')) {
            $testConfig = include __DIR__ . '/TestConfig.php';
        } else {
            $testConfig = include __DIR__ . '/TestConfig.php.dist';
        }

        $zf2ModulePaths = array();

        if (isset($testConfig['module_listener_options']['module_paths'])) {
            $modulePaths = $testConfig['module_listener_options']['module_paths'];
            foreach ($modulePaths as $modulePath) {
                if (($path = static::findParentPath($modulePath)) ) {
                    $zf2ModulePaths[] = $path;
                }
            }
        }

        $zf2ModulePaths  = implode(PATH_SEPARATOR, $zf2ModulePaths) . PATH_SEPARATOR;
        $zf2ModulePaths .= getenv('ZF2_MODULES_TEST_PATHS') ?: (defined('ZF2_MODULES_TEST_PATHS') ? ZF2_MODULES_TEST_PATHS : '');

        static::initAutoloader();

        // use ModuleManager to load this module and it's dependencies
        $baseConfig = array(
            'module_listener_options' => array(
                'module_paths' => explode(PATH_SEPARATOR, $zf2ModulePaths),
            ),
        );

        $config = ArrayUtils::merge($baseConfig, $testConfig);

        $serviceManager = new ServiceManager(new ServiceManagerConfig());
        $serviceManager->setService('ApplicationConfig', $config);
        $serviceManager->get('ModuleManager')->loadModules();

        static::$serviceManager = $serviceManager;
        static::$config = $config;
    }

    public static function getServiceManager()
    {
        return static::$serviceManager;
    }

    public static function getConfig()
    {
        return static::$config;
    }

    protected static function initAutoloader()
    {
        $vendorPath = static::findParentPath('vendor');

        if (is_readable($vendorPath . '/autoload.php')) {
            $loader = include $vendorPath . '/autoload.php';
        } else {
            $zf2Path = getenv('ZF2_PATH') ?: (defined('ZF2_PATH') ? ZF2_PATH : (is_dir($vendorPath . '/ZF2/library') ? $vendorPath . '/ZF2/library' : false));

            if (!$zf2Path) {
                throw new RuntimeException('Unable to load ZF2\. Run `php composer.phar install` or define a ZF2_PATH environment variable.');
            }

            include $zf2Path . '/Zend/Loader/AutoloaderFactory.php';

        }

        AutoloaderFactory::factory(array(
            'Zend\Loader\StandardAutoloader' => array(
                'autoregister_zf' => true,
                'namespaces' => array(
                    __NAMESPACE__ => __DIR__ . '/' . __NAMESPACE__,
                ),
            ),
        ));
    }

    protected static function findParentPath($path)
    {
        $dir = __DIR__;
        $previousDir = '.';
        while (!is_dir($dir . '/' . $path)) {
            $dir = dirname($dir);
            if ($previousDir === $dir) return false;
            $previousDir = $dir;
        }
        return $dir . '/' . $path;
    }
}

Bootstrap::init();

<?php
// module/Application/test/ApplicationTest/Controller/IndexControllerTest.php

namespace ApplicationTest\Controller;

use ApplicationTest\Bootstrap;
use Zend\Mvc\Router\Http\TreeRouteStack as HttpRouter;
use Application\Controller\IndexController;
use Zend\Http\Request;
use Zend\Http\Response;
use Zend\Mvc\MvcEvent;
use Zend\Mvc\Router\RouteMatch;
use PHPUnit_Framework_TestCase;

class IndexControllerTest extends \PHPUnit_Framework_TestCase
{
    protected $controller;
    protected $request;
    protected $response;
    protected $routeMatch;
    protected $event;

    protected function setUp()
    {
        $serviceManager = Bootstrap::getServiceManager();
        $this->controller = new IndexController();
        $this->request    = new Request();
        $this->routeMatch = new RouteMatch(array('controller' => 'index'));
        $this->event      = new MvcEvent();
        $config = $serviceManager->get('Config');
        $routerConfig = isset($config['router']) ? $config['router'] : array();
        $router = HttpRouter::factory($routerConfig);

        $this->event->setRouter($router);
        $this->event->setRouteMatch($this->routeMatch);
        $this->controller->setEvent($this->event);
        $this->controller->setServiceLocator($serviceManager);
    }

    public function testIndexActionCanBeAccessed()
    {
        $this->routeMatch->setParam('action', 'index');

        $result   = $this->controller->dispatch($this->request);
        $response = $this->controller->getResponse();

        $this->assertEquals(200, $response->getStatusCode());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:05:49.160

在你的 setUp 方法中注入它

```
protected function setUp()
{
    // ...
    $translator = new \Zend\I18n\Translator;
    $this->controller = new IndexController($translator);
    // ....
} 
```

# ios5 - Hosted In-App Purchase 是否仅适用于 IOS6？

> ID：15311028
> 
> 赞同：0
> 
> 时间：2013-03-09T13:06:50.423
> 
> 标签：ios5, ios6, in-app-purchase

我想创建一个应用内购买的应用。如我所见，Apple 现在托管非消耗性应用内购买的内容。

如果我想支持IOS5怎么办？我可以将我的内容发送到 Apple 进行托管吗？还是仅适用于 IOS 6？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:15:40.900

恐怕 iTunes Connect 中的托管内容仅适用于 iOS6。如果您的应用支持 iOS 5，您必须从自己的服务器下载内容或将其打包到捆绑包中并在交易后解锁。

[http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial) ....“如涵盖新的 iOS 6 托管下载功能...”

# android - 在一个线程中创建两个套接字连接

> ID：15311029
> 
> 赞同：-1
> 
> 时间：2013-03-09T13:06:54.050
> 
> 标签：android, sockets, client-server

在我的应用程序中，我想在服务器和客户端之间共享文件，为此我想在一个线程中创建两个套接字连接。例如，在服务器上，我们有线程“T”，它现在在客户端线程“T2”上打开了两个套接字，如“1234”和套接字号“3456”，我将尝试连接这些套接字。那么我应该如何实现它。

服务器：

```
thread 
{
wait at socket "1234"
wait at socket "3456"
} 
```

客户端：

```
Thread 
{
connect with socket no "1234"
connect with socket no "3456"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:20:24.430

如果您有良好实施的协议（即每个套接字将以明确的顺序发送数据），是的，一个线程应该可以工作。但是你也可以只使用一个套接字连接来做到这一点。创建两个套接字的要点是什么？和android有什么关系？

此外; 你一定要详细说明你的问题，否则问题似乎很快就会结束。

# php - 使用 mysql 导致不同的页面 PHP

> ID：15311030
> 
> 赞同：-2
> 
> 时间：2013-03-09T13:07:16.433
> 
> 标签：php, html, mysqli

我想在另一个带有 php 标签的 html 文件中使用 php 文件中生成的 mysql 结果。

```
while($row = mysqli_fetch_array($query))    {
  echo $row['chapter'] . " " . $row['chapter_name'] ;
  echo "<br />";
} 
```

上面的代码在文件 test.php 中，有没有办法在 index.html 中使用带有 php 标签的输出。

我知道我可以在 test.php 中添加 HTML 代码并完成工作，但我没有用户在浏览器中看到 test.php 扩展。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T13:12:21.920

首先将**index.html**更改为**index.php**

在 test.php 文件中执行：

```
$output = "";
while($row = mysqli_fetch_array($query))    {
  $output .= $row['chapter'] . " " . $row['chapter_name'] ;
  $output .= "<br />";
} 
```

在 index.php 文件中执行：

```
require "test.php";
echo $output; 
```

也请考虑使用**PDO**进行数据库访问

参考：[PDO](https://stackoverflow.com/tags/pdo/info)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-09T13:14:15.833

为此，您只需选择`OOPS concepts`.

在`test.php`,

您只需创建一个类，并为您的获取结果添加功能。

和`result.php`

通过为此创建一个对象来调用这些成员函数`class`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-09T13:16:48.243

你可以使用 [file_get_contents](http://php.net/manual/en/function.file-get-contents.php) 一个例子

```
<?php
// <= PHP 5
$file = file_get_contents('./test.php', true);
// > PHP 5
$file = file_get_contents('./test.php', FILE_USE_INCLUDE_PATH);
?> 
```

或者你可以使用

```
include('test.php'); 
```

或者

```
require('test.php'); 
```

# gnuplot - Windows 7 中的 gnuplot 初始化

> ID：15311035
> 
> 赞同：1
> 
> 时间：2013-03-09T13:07:39.813
> 
> 标签：gnuplot, ini

我希望 gnuplot 在启动时加载初始化文件。根据手册，在 Windows 系统中，它被称为 GNUPLOT.INI。（如果我称它为 gnuplot.ini 应该没关系，对吧？不过我都试过了。）

根据这里的答案：[gnuplot configuration file](https://stackoverflow.com/questions/1200463/gnuplot-configuration-file) 我应该将一个名为 gnuplot.ini 的文件放在我的 HOME 目录中，然后一切都应该工作。（或者，请参阅[http://www.gnuplot.info/docs_4.6/gnuplot.pdf](http://www.gnuplot.info/docs_4.6/gnuplot.pdf)上的手册，第 38 页。）

1) 什么是 Windows 中的“HOME”目录？它在 Windows 7 中的什么位置？

2）手册中提到我可以通过更改环境变量 GNUPLOT 来更改此默认目录。但它没有解释如何在 gnuplot 中改变环境变量，甚至没有解释它们到底是什么。

基本上大家都把我看的手册里的部分，我看不懂。

此外，还来自手册：“运行 gnuplot 时，它首先查找名为 gnuplotrc 的系统范围的初始化文件。该文件的位置在程序构建时确定，并由 show loadpath 报告。”

如果我在 gnuplot 中运行“显示加载路径”，它会显示：

“来自 GNUPLOT_LIB 的加载路径是“C:\Program Files (x86)\gnuplot\demo”

gnuplotrc 是从共享中读取的”

1) 该文件夹中没有名为 gnuplotrc 的文件。

2) 没有指定文件结尾。手册是否引用 x.gnuplotrc 或 gnuplotrc.x 或其他内容？

3）另外，“从共享中读取”是什么意思？

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:37:53.517

我终于设法解决了上面的问题。也许这个解决方案可以帮助别人。所以：

1) 您的操作系统的 HOME 目录可以在这里找到：[http](http://en.wikipedia.org/wiki/Home_directory) ://en.wikipedia.org/wiki/Home_directory 。

2) 即使将一个名为 gnuplot.ini 的文件放入我的 HOME 目录后，gnuplot 也没有始终使用它进行初始化。事实上，它只做了一次，我*仍然*不知道为什么。

3）神秘的消息“gnuplotrc is read from share”实际上意味着gnuplot在文件夹（gnuplot的安装目录）\ share中搜索初始化文件“gnuplotrc”（没有文件结尾）。

4) 将名为“gnuplotrc”的文件放入文件夹（gnuplot 的安装目录）\share\ 终于成功了。现在，每次我重新启动 gnuplot 时，都会从这个文件中初始化 gnuplot。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:11:39.513

更新：其他非 Linux 用户可能和我自己一样不知道操作系统的“主目录”是什么。维基百科终于在这里给了我答案：[http](http://en.wikipedia.org/wiki/Home_directory) ://en.wikipedia.org/wiki/Home_directory 所以 Windows 7 中的主目录是（根）\Users\（用户名）。

然后我将我的 gnuplot.ini 放在那个文件夹中，当我启动 wgnuplot.exe 并输入“plot sin(x)”时，它终于有了我想要的设置。

我以为我终于解决了我的问题。我关闭了gnuplot。然后我在 gnuplot.ini 中更改了一行，保存它，然后再次启动 gnuplot。gnuplot 完全不受我对 gnuplot.ini 的更改的影响。（我使用“显示全部”选项验证了这一点。）

据我所知，我设法正确初始化 gnuplot ONCE，但每次都不能通过 gnuplot.ini 正确初始化？！是什么赋予了？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-07T22:47:29.317

在 Windows 上，在 gnuplotrc 的末尾添加以下行：

加载“C:\\Users\\用户名\\GNUPLOT.INI”

（用您的用户名替换“用户名”，并使用双反斜杠！）

然后你可以把你的 GNUPLOT.INI 文件放在你的主目录中

# ruby-on-rails - 如何从rails中的另一个视图为表格添加价值？

> ID：15311037
> 
> 赞同：0
> 
> 时间：2013-03-09T13:07:50.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3, relationship

考虑我有两个表，即项目和颜色。

Item 表包含 has_many 与颜色的关系，因为每个项目可以有多个颜色，但颜色不存在。

我有一个页面，我必须在其中添加项目，并且在同一页面中我必须指定项目的颜色。那么如何将这些值与项目 ID 一起添加到颜色表中。请帮我。我正在努力移动。

**编辑：**

物品型号

```
class Item < ActiveRecord::Base
has_many :colors
end 
```

颜色模型

```
class Color < ActiveRecord::Base
    belongs_to :items
    end 
```

桌子

```
 id | created_at | updated_at | item_id | color_name 
----+------------+------------+---------+-------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:37:58.990

如果颜色总是使用 item 创建，那么您需要使用嵌套属性。

```
class Item < ActiveRecord::Base
  attr_accessible :colors_attributes
  has_many :colors
  accepts_attributes_for :colors
end 
```

在您的控制器操作中`Items#new`

```
@items.colors.build 
```

在您的 items/new.html.erb 中，将 fields_for 添加到 items 表的其他字段中。

```
<%= form_for @item do |f| %>
  <%= f.text_field :name %>
  ...
  <%= f.fields_for :colors do |color| %>
   <%= color.text_field :some_column_name_from_color %>
  <% end %>
<% end %> 
```

要即时添加/删除多种颜色，您可以使用[nested_form gem](https://github.com/ryanb/nested_form)

# database - 从 java 应用程序执行批量插入数据库的不同方法

> ID：15311042
> 
> 赞同：5
> 
> 时间：2013-03-09T13:08:38.737
> 
> 标签：database, jdbc, bulkinsert, mybatis, spring-jdbc

我正在寻找从 Java 应用程序执行批量插入数据库（例如 SQL Server 2012）的不同方法。我需要非常有效地将大量实体插入数据库，而不需要像实体一样多地调用数据库。

我的要求是执行实体的批量插入，其中在数据库中插入实体可能涉及将数据插入到一个或多个表中。以下是我能想到的两种方式：

1.  利用原生 JDBC 支持，动态生成一批 SQL 语句并针对数据库执行。

2.  构造所有实体的 XML 表示，然后通过传递生成的 XML 来调用存储过程。存储过程负责解析 XML 并将实体插入数据库。

我是 Java 新手，对可用框架没有足够的了解。IMO，上述两种方法似乎非常幼稚，并且没有利用可用的框架。**我要求专家分享实现批量插入的不同方法及其优缺点。**我对 MyBatis、Spring-MyBatis、Spring-JDBC、JDBC 等以有效的方式解决问题持开放态度。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T13:29:20.063

我有一个demo，JDBC批处理文件：demo.txt 内容

1899942,demo1
1899944,
demo2 1899946,demo3
1899948,demo4

插入数据读取文件内容

我的代码：

```
public class Test2 {
        public static void main(String[] args) {
            long start = System.currentTimeMillis();
            String sql = "insert into mobile_place(number,place) values(?,?)";
            int count=0;
            PreparedStatement pstmt = null;
            Connection conn = JDBCUtil.getConnection();
            try {
                pstmt = conn.prepareStatement(sql);

                InputStreamReader is = new InputStreamReader(new FileInputStream(new File("D:/CC.txt")),"utf-8");
                BufferedReader br = new BufferedReader(is);
                conn.setAutoCommit(false);

                String s1 = null;
                String s2 = null;
                while(br.readLine() != null){
                    count++;
                    String str = br.readLine().toString().trim();
                    s1 = str.substring(0, str.indexOf(","));
                    s2 = str.substring(str.indexOf(",")+1,str.length());

                    pstmt.setString(1, s1);
                    pstmt.setString(2, s2);
                    pstmt.addBatch();

                    if(count%1000==0){
                        pstmt.executeBatch();
                        conn.commit();
                        conn.close();
                        conn = JDBCUtil.getConnection();
                        conn.setAutoCommit(false);
                        pstmt = conn.prepareStatement(sql);
                    }
                    System.out.println("insert "+count+"line");
                }
                if(count%1000!=0){
                    pstmt.executeBatch();
                    conn.commit();
                }
                long end = System.currentTimeMillis();

                System.out.println("Total time spent:"+(end-start));
            } catch (Exception e) {
                e.printStackTrace();
            }finally{
                try {
                    pstmt.close();
                    conn.close();
                } catch (SQLException e) {
                    e.printStackTrace();
                }
            }

        }
    }

    //getConnection()//get jdbc Connection
    public static Connection getConnection(){ 
    try { 
    Class.forName("com.mysql.jdbc.Driver"); 
    } catch (ClassNotFoundException e) { 
    e.printStackTrace(); 
    } 
    try { 
    conn = DriverManager.getConnection(url, userName, password); 
    } catch (SQLException e) { 
    e.printStackTrace(); 
    } 
    return conn; 
    } 
```

第一次说话，希望能帮到你

我是上面的demo使用PreparedStatement【读取数据调用一个PreparedStatement一次性插入】

JDBC批处理有3种方式 1.使用PreparedStatement demo：

```
try {   
      Class.forName("com.mysql.jdbc.Driver");   
      conn = DriverManager.getConnection(o_url, userName, password);   
      conn.setAutoCommit(false);   
      String sql = "INSERT adlogs(ip,website,yyyymmdd,hour,object_id) VALUES(?,?,?,?,?)";   
      PreparedStatement prest = conn.prepareStatement(sql,ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_READ_ONLY);   
      for(int x = 0; x < size; x++){   
         prest.setString(1, "192.168.1.1");   
         prest.setString(2, "localhost");   
         prest.setString(3, "20081009");   
         prest.setInt(4, 8);   
         prest.setString(5, "11111111");   
         prest.addBatch();   
      }   
      prest.executeBatch();   
      conn.commit();   
      conn.close();   
} catch (SQLException ex) {   
   Logger.getLogger(MyLogger.class.getName()).log(Level.SEVERE, null, ex);   
} 
```

2.使用 Statement.addBatch 方法演示：

```
conn.setAutoCommit(false);   
 Statement stmt = conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_READ_ONLY);   
 for(int x = 0; x < size; x++){   
   stmt.addBatch("INSERT INTO adlogs(ip,website,yyyymmdd,hour,object_id) VALUES('192.168.1.3', 'localhost','20081009',8,'23123')");   
 }   
stmt.executeBatch();   
conn.commit(); 
```

3.Statement演示直接使用：

```
conn.setAutoCommit(false);   
Statement stmt = conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,   
                                    ResultSet.CONCUR_READ_ONLY);   
for(int x = 0; x < size; x++){   
   stmt.execute("INSERT INTO adlogs(ip,website,yyyymmdd,hour,object_id) VALUES('192.168.1.3', 'localhost','20081009',8,'23123')");   
}   
conn.commit(); 
```

使用上述方法插入100000条数据耗时：方法1:17.844s方法2:18.421s方法3:16.359s

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-26T19:48:54.267

高于 4.1 的 MS JDBC 版本具有 SQLServerBulkCopy 类，我认为它等同于 .Net 中可用的类，理论上它应该与 bcp 命令行实用程序一样快。 [https://msdn.microsoft.com/en-us/library/mt221490%28v=sql.110%29.aspx](https://msdn.microsoft.com/en-us/library/mt221490%28v=sql.110%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T13:11:54.623

您可以使用 JDBC 自定义代码，没有框架支持您的要求

# shell - 使用 shell 脚本对齐 C 代码

> ID：15311043
> 
> 赞同：0
> 
> 时间：2013-03-09T13:08:57.170
> 
> 标签：shell

一个不同的问题出现了。

假设我有以下代码库。现有代码如下。

```
int main() { 
/*Commented Added by abc
    int abc; */
/* Code Added by abc */
    int def; 
} 
```

我希望新代码如下。

```
int main() { 
    /*Commented by abc
    int abc; */
    /* Added by abc */
    int def; 
} 
```

* * *

在上面的示例中没有进行实际的代码更改。但是，根据添加的新代码，注释正确对齐。即我搜索了 ABC 添加的新代码行，并根据该行对齐方式对齐了前几行。

现在，我正在处理庞大的代码库，几乎不可能手动进行此类代码更改。请就如何以最简单的方式实现这一点提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:58:59.973

[GNU Indent](http://www.gnu.org/software/indent/)可以将 C 文件转换为统一的样式，并且它带有许多选项——其中一些与放置注释有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T06:33:19.960

这种粗暴的方式怎么样：

```
VIMINIT='call feedkeys("gg=G:wq\<CR>")' vi myFile.c 
```

# jquery - jquery 实时变量（用于响应式）

> ID：15311044
> 
> 赞同：1
> 
> 时间：2013-03-09T13:09:08.270
> 
> 标签：jquery

此代码在文档准备好时为我提供文档宽度。

```
jQuery().ready(function(e) {
   var sayfaboyut = jQuery(document).width();
   document.write(sayfaboyut);
}); 
```

但我想要实时变量。当我更改文档宽度时，我想实时获得该宽度。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:11:41.467

您可以收听`resize`事件：

```
$(window).resize(function(){
     console.log($(window).width())
}).resize(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T13:11:34.007

jQuery为此提供了一个内置方法：

```
$(window).resize(function () { 
    var sayfaboyut = jQuery(document).width();
   document.write(sayfaboyut);
}); 
```

每当窗口改变大小时，都会调用 resize 函数。请注意，这将调整高度和宽度。

我发现的另一个答案建议您不要对每次调整大小的调用做出反应，因为它可能会使浏览器无响应。相反，他们建议重新排队计时器，如下所示：

```
function doSomething() {
    alert("I'm done resizing for the moment");
};

var resizeTimer;
$(window).resize(function() {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(doSomething, 100);
}); 
```

# ios - AVAudioPlayer 无法在某些设备上播放声音

> ID：15311045
> 
> 赞同：1
> 
> 时间：2013-03-09T13:09:14.550
> 
> 标签：ios

我正在使用 AVAudioPlayer 播放音频文件，但它在某些设备上无法播放，我该如何解决我的问题

```
if(_defaultSettings)
        {
            _soundFilePath = [[NSBundle mainBundle] pathForResource:@"ring" ofType:@"wav"];
            NSLog(@"ringTone Path%@",_soundFilePath);
            //    /System/Library/Audio/UISounds/
            _audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:_soundFilePath ]error:nil];
            [_audioPlayer prepareToPlay];
            [_audioPlayer play];
            _audioPlayer.numberOfLoops = -1;
            AudioServicesPlaySystemSound(1000);
        }

- (void)playSystemSound {
    NSLog(@"playSystemSound");
    // Create the URL for the source audio file. The URLForResource:withExtension: method is
    //    new in iOS 4.0.
    NSURL *tapSound   = [[NSBundle mainBundle] URLForResource: @"short_low_high"
                                                withExtension: @"wav"];

    if (!self._soundFileURLRef) {
    // Store the URL as a CFURLRef instance
    self._soundFileURLRef = (CFURLRef) [tapSound retain];

    // Create a system sound object representing the sound file.
    AudioServicesCreateSystemSoundID (_soundFileURLRef, &_soundFileObject);
    }

    // Play the sound
    AudioServicesPlaySystemSound (_soundFileObject);
     //    // to vibrate the device   // AudioServicesPlaySystemSound (kSystemSoundID_Vibrate);

} 
```

# android - 服务到活动粘性通信

> ID：15311047
> 
> 赞同：3
> 
> 时间：2013-03-09T13:09:20.453
> 
> 标签：android, ipc, android-service

我有一项服务，可以从 Internet 下载一些数据并定期向指标活动发送进度。在处理服务结束时发送结果。

我有一个问题，什么是实现通信持久性的最佳方式。

*   Messenger 或 ResultReceiver，我需要将它们打包成 Intent 并在服务中存储侦听器列表。但是在配置更改时活动会破坏，并且很难维护此列表。

*   LocalBroadcastManager，我需要从 Messages 迁移到 Intents，而且这个类中没有粘性发送。因此，如果我在我的进度活动处于后台时获得结果，结果将丢失。

*   BroadcastManager 很好，但我不需要在系统范围内广播我的进度和安全问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-29T19:37:07.307

您可能想试试Otto ( [http://square.github.io/otto/ )。](http://square.github.io/otto/)

在您的服务中，只要您想与活动通信，请使用共享的`Bus`. 您应该使用处理程序或主循环器在主线程上执行此操作，因为您可能正在使用`IntentService`. 该服务也可以充当生产者。重新创建您的活动时，将发布当前已知值。

您的活动只需要注册`Bus`并订阅正确的事件。当它暂停时，只需注销`Bus`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T11:58:57.540

在应用程序类中使用静态变量（扩展应用程序）。在服务内部，您可以设置此变量。在 Activity 中，您会定期读取此变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-28T10:21:08.717

您应该使用[massenger](http://developer.android.com/guide/components/bound-services.html#Messenger)发送下载进度，因为它比广播接收器更安全且更便宜。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T17:25:59.930

我相信实现这种持久性的最佳方法是：

*   服务下载后，您应该将数据保存在数据库或文件中。

*   然后服务发送广播进行更新。

*   如果活动“活动”一切顺利，它会转到数据库/文件以获取更新的内容。

*   如果活动被终止或其他原因，您只需要确保数据在数据库/文件中，这样当您启动/重新启动活动时，您就可以从数据库/文件中获取最新内容。

*   下载时，以相同的方式将状态和进度保存在 db/file 中。

查看[这个](http://www.youtube.com/watch?v=xHXn3Kg2IQE)Google I/O Session，它很好地解释了这一点。

# django - 基于 Django 类的视图 - 没有名为 base 的模块

> ID：15311049
> 
> 赞同：0
> 
> 时间：2013-03-09T13:09:33.773
> 
> 标签：django, django-views

我在尝试在 django 中使用基于类的视图时遇到问题。当我尝试导入基本视图时，出现导入错误。

我已将视图简化为与[文档](https://docs.djangoproject.com/en/1.5/topics/class-based-views/intro/)中使用的完全相同的代码：

```
from django.http import HttpResponse
from django.views.base import View

class MyView(View):
    def get(self, request):
        # <view logic>
        return HttpResponse('result') 
```

我得到的错误是

```
ImportError at /myurl/
No module named base 
```

urls.py 很好，Django 绝对是 1.5 版 - 我已经用 pip 完全重新安装了它，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T13:38:43.830

由于@dm03514 评论，我对其进行了测试。我在您的问题中尝试了您的代码，但遇到了与您相同的错误**"No module named base"**。因此，当我将其更改为如下代码时，它可以正常工作并且没有错误。

```
from django.views.generic.base import View 
```

在判断之前先尝试，如果有错误我会接受并尝试修复它。

# android - 从真实对象创建 3D 模型以在 Android 中与 openGL 一起使用

> ID：15311050
> 
> 赞同：1
> 
> 时间：2013-03-09T13:09:53.660
> 
> 标签：android, opengl-es, 3d

我想实现一个 Android 应用程序，它将使用 openGL 显示 3D 对象。几年前我使用过openGL，但后来我使用了已经定义的对象，我从未创建过它们。现在我需要从真实的对象中创建这些对象。

我检查了 3DSOM Pro，因为创建这些对象似乎很容易，但我不确定它们是否可以表示为一组顶点、法线等。有人知道这是否可能吗？除此之外，我不喜欢它不是免费的事实。

所以我的问题是，创建可以在 openGL 中使用的 3D 对象的最常见程序是什么？我对免费且易于使用的应用程序感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T13:15:51.453

[Blender](http://blender.org)可能是使用最广泛的免费 3D 编辑器。

Google SketchUp 非常易于使用，但价格合理。我更喜欢它，因为我不是 3D 建模专家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:24:34.353

有一个名为[Insight3d](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDMQFjAA&url=http%3A%2F%2Finsight3d.sourceforge.net%2F&ei=njY7UYnXO5HKrAfJkIGoCw&usg=AFQjCNFglzN2zpwcrlXZMeu10suafD5dNA&sig2=v_KKsQ9UDeIpeaLZ5a6HiQ&bvm=bv.43287494,d.bmk&cad=rja)的软件，它可以将多个图像转换为 3d 对象。我亲自编译它并遇到了 seg faults 。也许如果你能解决这些问题，你可以在几分钟内将真实对象转换为虚拟对象。

如果您想手动创建对象，那么我猜[Blender](http://blender.org/)（正如 Bartek 所建议的）是一个很棒的软件，用于创建支持大量插件的 3d 模型。您可以放置​​每个正交视图的背景图像，然后继续绘制等距（3D），因为您想从真实对象的 3d 模型创建。

使用搅拌器可以将对象转换为 .obj 波前格式并可以导入到 Opengl。

# java - 如何在另一个方法中调用实例（主要）

> ID：15311055
> 
> 赞同：0
> 
> 时间：2013-03-09T13:10:10.423
> 
> 标签：java

新程序员在这里：

我需要帮助才能从上面的方法调用相册类的实例。

```
public static void main(String[] args) {
        Album a1 = new Album("Fede Finn og Funnyboys", "Glade Aber");

        Ar1.addAlbum(a1);

    }

    public void runner1() {
        Ar1.sortList();
        System.out.println("");
        toTxt(1);
        Ar1.removeAlbum(Album.**a1**); 
```

我得到这个错误： a1 无法解析或不是一个字段。

简单的问题 - 我知道，对不起:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:18:03.540

a1 的范围在 main 内部，因此如果您尝试在 main 外部使用它，您将收到上述错误。

```
Album a1 = new Album("Fede Finn og Funnyboys", "Glade Aber");
public static void main(String[] args) {
     Ar1.addAlbum(a1);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:21:38.227

main方法是不同的方法，不能调用该方法中的class文件

如果你想这样做，这里是代码演示

```
class Albumdemo{
public static void main(String[] args) {
    Album a1 = new Album("Fede Finn og Funnyboys", "Glade Aber");
    Albumdemo Ar1 = new  Albumdemo（）；
    Ar1.addAlbum(a1);

}

public void runner1(Album a1) {
    Ar1.sortList();
    System.out.println("");
    toTxt(1);
    Ar1.removeAlbum(Album.**a1**);
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T13:23:14.620

`a1`范围仅在主要内部。这意味着您`a1`只能在 main 方法中使用。为了能够在 main 之外使用它，您需要将它作为参数传递给您将在其中使用它的方法。因此，如果您想`a1`在您的`runner1`方法中使用它（假设 runner1 是`Album`该类的方法，您需要做类似的事情：

```
public static void main(String[] args) {
        Album a1 = new Album("Fede Finn og Funnyboys", "Glade Aber");
        a1.runner1();//you need to call runner1 on the Album object

        Ar1.addAlbum(a1);

    } 
```

在 Album 对象上调用 runner1 后，您可以`a1`在里面`runner1`通过关键字引用该对象`this`

编辑：这里的想法是一样的。您在 main 方法中创建 Album 对象，并调用调用底部存在的方法。在此方法中，通过 引用 Album 对象`this`。例如，如果调用了该方法`runner1`，则：

```
public void runner1() {
        Ar1.sortList();
        System.out.println("");
        toTxt(1);
        Ar1.removeAlbum(this);//refer to the Album object you want to remove by this
} 
```

因此，在您的 main 方法中，每次调用`runner1`Album 对象的方法时，都会将该对象称为 as `this`，您可以在方法中使用关键字`removeAlbum`。

因此，如果您有三个 Album 对象，则在您的 main 中`a1, a2, a3`，并按以下顺序调用该`runner1`方法：

```
a1.runner1();
a2.runner1();
a3.runner1(); 
```

然后每次调用都会删除调用该方法的对象，因为您`this`在该方法中引用它。

希望这可以解决您的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T13:23:38.923

a1 在 main 方法中是局部范围的。如果您将变量分配为成员，您将能够引用它：

```
public class Album {
    private static ArrayList<Album> Ar1 = new ArrayList<Album>(); // I assume you have one of these here?
    private static Album a1 = new Album("Fede Finn og Funnyboys", "Glade Aber");

    public static void main(String[] args) {
        Ar1.addAlbum(a1);
        new Album().runner1();
    }

    public void runner1() {
        Ar1.sortList();
        System.out.println("");
        toTxt(1);
        Ar1.removeAlbum(a1);
    }
} 
```

# azure - 将 Azure 服务总线与 Android 连接

> ID：15311060
> 
> 赞同：5
> 
> 时间：2013-03-09T13:10:58.220
> 
> 标签：azure, azure-java-sdk

我编写了一个简单的 java 程序（jdk 1.7），列出了我所有的服务总线主题并将每个主题的名称打印到标准输出：

```
try {
    String namespace = "myservicebus"; // from azure portal
    String issuer = "owner";  // from azure portal
    String key = "asdjklasdjklasdjklasdjklasdjk";  // from azure portal

    Configuration config = ServiceBusConfiguration.configureWithWrapAuthentication(
        namespace, 
        issuer,
        key, 
        ".servicebus.windows.net", 
        "-sb.accesscontrol.windows.net/WRAPv0.9"); 

    ServiceBusContract service = ServiceBusService.create(config);
    ListTopicsResult result = service.listTopics();
    List<TopicInfo> infoList = result.getItems();
    for(TopicInfo info : infoList) {
        System.out.println( info.getPath());
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

现在，我试图在一个简单的 android 项目（Android 4.2）中运行这个例子，但它不会工作。运行时总是抛出以下错误：

```
java.lang.RuntimeException: Service or property not registered:  com.microsoft.windowsazure.services.serviceBus.ServiceBusContract 
```

有没有人成功地建立了从 android 设备（或模拟器）到 azure 服务总线的连接？

Microsoft Azure-Java-SDK 不支持 android 项目吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-15T12:08:59.387

此错误是由于生成的 apk 不包含（删除）ServiceLoader 信息（在 META-INF/services 下）。您可以测试自己从生成的 jar 中删除它，并查看是否出现相同的错误。在文档中据说现在支持它，但我发现使用它有问题。

[http://developer.android.com/reference/java/util/ServiceLoader.html](http://developer.android.com/reference/java/util/ServiceLoader.html)

您可以使用 ant 手动将数据包含在 apk 中

[将“META-INF/services”文件保存在 apk 中](https://stackoverflow.com/questions/16898409/keep-meta-inf-services-files-in-apk)

经过 10 小时调试，手动删除类，包括 META-INF/services 等，我发现 Azure SDK 使用了一些 Android 不支持的类（javax.ws.*），并且任何解决方法都对我有用。

所以我建议在 Android 环境中使用 REST API，在下面找到我用来将消息发送到主题的源代码。

```
private static String generateSasToken(URI uri) {
    String targetUri;
    try {
        targetUri = URLEncoder
        .encode(uri.toString().toLowerCase(), "UTF-8")
        .toLowerCase();

        long expiresOnDate = System.currentTimeMillis();
        int expiresInMins = 20; // 1 hour
        expiresOnDate += expiresInMins * 60 * 1000;
        long expires = expiresOnDate / 1000;
        String toSign = targetUri + "\n" + expires;

        // Get an hmac_sha1 key from the raw key bytes
        byte[] keyBytes = sasKey.getBytes("UTF-8");
        SecretKeySpec signingKey = new SecretKeySpec(keyBytes, "HmacSHA256");

        // Get an hmac_sha1 Mac instance and initialize with the signing key
        Mac mac = Mac.getInstance("HmacSHA256");
        mac.init(signingKey);
        // Compute the hmac on input data bytes
        byte[] rawHmac = mac.doFinal(toSign.getBytes("UTF-8"));

        // using Apache commons codec for base64
//      String signature = URLEncoder.encode(
//      Base64.encodeBase64String(rawHmac), "UTF-8");
        String rawHmacStr = new String(Base64.encodeBase64(rawHmac, false),"UTF-8");
        String signature = URLEncoder.encode(rawHmacStr, "UTF-8");

        // construct authorization string
        String token = "SharedAccessSignature sr=" + targetUri + "&sig="
        + signature + "&se=" + expires + "&skn=" + sasKeyName;
        return token;
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
}

public static void Send(String topic, String subscription, String msgToSend) throws Exception {

        String url = uri+topic+"/messages";

        HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost(url);

        // Add header
        String token = generateSasToken(new URI(uri));
        post.setHeader("Authorization", token);
        post.setHeader("Content-Type", "text/plain");
        post.setHeader(subscription, subscription);
        StringEntity input = new StringEntity(msgToSend);
        post.setEntity(input);

        System.out.println("Llamando al post");
        HttpResponse response = client.execute(post);
        System.out.println("Response Code : " 
                + response.getStatusLine().getStatusCode());
        if (response.getStatusLine().getStatusCode() != 201)
            throw new Exception(response.getStatusLine().getReasonPhrase());

} 
```

REST API Azure 信息中的更多信息。

# android - Android Facebook SDK - 部分帖子仍未显示

> ID：15311073
> 
> 赞同：1
> 
> 时间：2013-03-09T13:12:54.533
> 
> 标签：android, cordova, facebook-javascript-sdk, phonegap-plugins

我正在使用[phonegap-build / FacebookConnect](https://github.com/phonegap-build/FacebookConnect/blob/master/example/Simple/index.html)

一切正常，但是当我使用 Android 应用程序在 Facebook 墙上发布一些帖子时，大部分文本仍未显示。帖子部分末尾甚至没有“查看更多”链接。在“描述”的第二句话的一半，一切都中断了。

我用于此 Android 应用程序的 JS 函数：

```
function facebookWallPost() {
            console.log('Debug 1');
            var params = {
                method: 'feed',
                name: 'Facebook Dialogs',
                link: 'https://developers.facebook.com/docs/reference/dialogs/',
                picture: 'http://fbrell.com/f8.jpg',
                caption: 'Reference Documentation',
                description: 'The Internet is a global system of interconnected computer networks that use the standard Internet protocol suite (TCP/IP) to serve billions of users worldwide. It is a network of networks that consists of millions of private, public, academic, business, and government networks, of local to global scope, that are linked by a broad array of electronic, wireless and optical networking technologies. The Internet carries an extensive range of information resources and services, such as the inter-linked hypertext documents of the World Wide Web (WWW) and the infrastructure to support email.'
              };
            console.log(params);
            FB.ui(params, function(obj) { console.log(obj);});
        } 
```

整个脚本和一个例子可以在[这里看到......](https://github.com/phonegap-build/FacebookConnect/blob/master/example/Simple/index.html)

我是否需要更改数据结构并将参数作为 JSON 发布？提前致谢。我很感激任何帮助...

# php - 从组合框中设置变量

> ID：15311075
> 
> 赞同：0
> 
> 时间：2013-03-09T13:13:15.673
> 
> 标签：php, html

如何获取组合框中的值并将其存储在变量中？并在另一个 PHP 文件中使用该变量？这是我的代码。

注意：我已经能够从数据库中获取数据并将其存储在组合框中。

```
$con = mysql_connect("localhost","root","aaaa");
if (!$con)
{
    die('Could not connect: ' . mysql_error());
}
mysql_select_db("maptemp", $con);

$sql = "SELECT * FROM users";
$rs = mysql_query($sql) or die(mysql_error());
$selectbox='<select name=\'userst\'>';

while ($row = mysql_fetch_assoc($rs)) {
    $selectbox.='<option value=\"' . $row['username'] . '\">' . $row['username'].'</option>';
}

$selectbox.='</select>';
mysql_free_result($rs);
echo $selectbox; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:19:40.397

> 如何获取组合框中的值并将其存储在变量中？

假设您正在谈论一个普通的选择元素。

1.  提交表格
2.  读取`$_POST['foo']`或选择元素的名称在`$_GET['foo']`哪里`foo`

> 并在另一个 PHP 文件中使用该变量？

*   `include`那个文件
*   将数据存储在会话中
*   在传递查询字符串中的数据时重定向到该文件
*   各种其他选项，具体取决于您想要实现的目标

# java - 启动时 Jdeveloper 错误“java.lang.NoClassDefFoundError：无法初始化类 oracle.dbtools.raptor.config.DBConfig”

> ID：15311078
> 
> 赞同：3
> 
> 时间：2013-03-09T13:13:38.457
> 
> 标签：java, noclassdeffounderror, jdeveloper

我使用的是 Jdeveloper Studio 11.1.1.4.0，我在上面使用了 ADF 组件，但是在我启动 Jdeveloper 的最后几天，出现了这个错误

```
Uncaught exception
java.lang.NoClassDefFoundError: Could not initialize class oracle.dbtools.raptor.config.DBConfig
o.dbtools.raptor.oviewer.base.NavSelectionListener.viewSelectionChanged(NavSelectionListener.java:176)
o.i.view.View.fireViewSelectionChangedImpl(View.java:495)
o.i.view.ViewDecorator.fireViewSelectionChangedImpl(ViewDecorator.java:59)
o.i.view.View.fireViewSelectionChanged(View.java:485)
o.i.view.View.updateSelectionImpl0(View.java:444)
o.i.view.View.updateSelectionImpl(View.java:429)
o.i.view.View.updateSelection(View.java:306)
o.ideri.navigator.DefaultNavigatorWindow$4.viewSelectionChanged(DefaultNavigatorWindow.java:1108)
o.i.view.View.fireViewSelectionChangedImpl(View.java:495)
o.i.view.View.fireViewSelectionChanged(View.java:485)
o.i.view.View$2.actionPerformed(View.java:349)
jx.s.Timer.fireActionPerformed(Timer.java:271)
jx.s.Timer$DoPostEvent.run(Timer.java:201)
j.a.event.InvocationEvent.dispatch(InvocationEvent.java:209)
j.a.EventQueue.dispatchEvent(EventQueue.java:597)
j.a.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
j.a.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
j.a.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
j.a.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
j.a.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
j.a.EventDispatchThread.run(EventDispatchThread.java:122) 
```

我也找不到数据库导航器，当我使用与数据库相关的任何东西时也会出现此错误，我尝试卸载 Jdeveloper 并删除中间件文件夹并重新安装所有内容以获得默认但仍然相同的故事。

我真的需要尽快解决这个问题，因为我的毕业项目已经落后于计划。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T08:49:19.063

检查你的classpath，这里肯定有问题，验证JDeveloper文件夹在

# angularjs - AngularJS“全局”数据？

> ID：15311081
> 
> 赞同：3
> 
> 时间：2013-03-09T13:13:51.747
> 
> 标签：angularjs

我正在创建一个有角度的网络应用程序。用户可以登录并向其他用户发送消息。

全局存储有关登录用户的信息的最佳方式是什么 - 例如他们的用户名、ID、图片 URL 等？还是我需要将其作为用于呈现每个页面的 JSON 数据的一部分发送？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T13:19:09.547

执行此操作的“Angular”方法是使用称为服务的东西

有关如何实现这一目标的更多信息，请参见令人惊叹的 John Linguist 的此视频

[http://egghead.io/video/angularjs-sharing-data-between-controllers/](http://egghead.io/video/angularjs-sharing-data-between-controllers/)

# symfony - 在 Doctrine 2（和 Symfony）中正确使用 $unitOfWork->getScheduledCollectionDeletions() 是什么？

> ID：15311083
> 
> 赞同：5
> 
> 时间：2013-03-09T13:14:14.960
> 
> 标签：symfony, doctrine-orm, doctrine

我正在尝试检测事件中多对多关系的变化`onFlush`。

如果将新实体添加到关系或更新关系（始终保留一个元素），我可以使用 检测更改`$unitOfWork->getScheduledCollectionUpdates()`，然后检查`getInsertDiff()`or `getDeleteDiff()`。到现在为止还挺好。

当我从关系中取出所有实体时，问题就出现了：*“以前有两个相关实体，但现在**没有**相关实体。”*

当关系为空时，我可以访问`$unitOfWork->getScheduledCollectionDeletions()`，但无法知道哪些实体被删除：

*   `getDeleteDiff()`因为这个系列并没有说明什么。
*   **`getSnapshot()`没有告诉我之前有哪些实体**

我应该如何知道从多对多关系中取出了哪些实体？

* * *

我添加了一个完整实现的要点：一切正常（可能需要一些优化），除了`$uow->getScheduledCollectionDeletions()`（第 101 行）

> [https://gist.github.com/eillarra/5127606](https://gist.github.com/eillarra/5127606)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T19:05:53.950

**这个问题的原因**有两个：

1) 当`clear()`在 a 上调​​用该方法时`Doctrine\ORM\PersistentCollection`，它将：

1.  清除其内部实体集合。
2.  呼吁。`scheduleCollectionDeletion()`_`Doctrine\ORM\UnitOfWork`
3.  拍摄自己的新快照。

2 号是您的收藏出现在`$uow->getScheduledCollectionDeletions()`（而不是`$uow->getScheduledCollectionUpdates()`）中的原因。第 3 点是您无法确定收藏品在被清除之前包含哪些内容的原因。

2) 当使用 Symfony2 Form 组件时，特别是`ChoiceType`or`CollectionType`类型与 option 的组合，当*所有*实体都应该从集合中删除时`multiple`，该`clear()`方法将被调用。

 *这是由于在`MergeDoctrineCollectionListener`此处添加的： [https ://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Doctrine/Form/Type/DoctrineType.php#L55](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Doctrine/Form/Type/DoctrineType.php#L55)

这是作为优化完成的：以这种方式清除集合更快，而不是检查应该从中删除哪些实体。

我可以想到两种**可能的解决方案**：

1) 创建一个 fork`symfony/symfony`并实现一个选项，以便*不*添加`MergeDoctrineCollectionListener`. 也许像`no_clear`阻止添加监听器之类的东西。这不会引入 BC 中断并且会解决您的问题，因为当*所有*实体都应该被删除`clear()`时，集合的方法不会被调用。

 *2）重新设计你的计数器：也许还可以监听`OnLoad`可以在从数据库中获取集合时计算集合中实体数量的事件。这样，您的`OnFlush`侦听器可以使用该数字来了解在清除集合时从集合中删除了多少实体。**

# c# - 使用 ORM（log4net 和 OpenAccess）进行日志记录

> ID：15311087
> 
> 赞同：1
> 
> 时间：2013-03-09T13:14:52.597
> 
> 标签：c#, logging, orm, log4net, openaccess

基于之前的经验和研究，我使用 log4Net 在工作场所实现了日志记录。

然而，当 log4net 在我们的开发会议上出现时，人们普遍倾向于使用自定义记录器。原因是为了使用 Telerik 的 ORM 生成的代码，而不是在配置文件中指定插入查询。

```
<appender name="ADONetAppender" type="log4net.Appender.AdoNetAppender">
   <bufferSize value="1"/>
   <connectionType value="MySql.Data.MySqlClient.MySqlConnection, MySql.Data" />
   <connectionStringName value="Test"/>
   <commandText value="INSERT INTO Log (UniqueId,Date,UserId,Thread,level,Logger,Message,Exception)     VALUES (UUID(),?log_date,?userid,?thread,?log_level,?logger,?message,?exception)" />
   ... 
```

你有什么建议？我们可以为此目的创建一个自定义附加程序吗？我们应该使用自定义记录器吗？

[有关信息，这里](https://stackoverflow.com/questions/1481017/net-logger-write-your-own-vs-log4net-enterprise-logger-nlog-etc)对自定义记录器有正面和负面的看法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:21:55.917

您可以创建自定义记录器，它可以使用您喜欢的任何机制来记录内容。我个人发现 AdoNetAppender 的性能非常好。

但是，在支持企业运营之后，我强烈建议您使用最低阻抗技术来记录您的消息。日志随着调试生产系统而发挥作用。为了“数据库访问模式一致性”，我会避免编写附加程序。

如果您遇到 db、ORM、OS 或网络问题，那么您最不需要的就是让您的记录器无法正常工作。我首先建议使用文件、Windows 调试消息和 ETW 日志记录，这可以使用数据库日志记录进行备份，为了更安全，我会将数据库日志记录至少放入一个不同的数据库中 - 这样就不会影响您的生产系统。最好是在网络连接不起作用的本地服务器上。

**编辑**：

如果您真的想要，您可以从 AdoNetAppender 派生一个类，然后将 CommandText 属性覆盖为自定义。这里有一个我似乎无法放置的示例，它使用连接字符串执行此操作。

# ios - 如何在向服务器发送多个请求时使用多个线程？

> ID：15311096
> 
> 赞同：0
> 
> 时间：2013-03-09T13:15:44.717
> 
> 标签：ios, multithreading

我正在开发一个 iOS 应用程序，用户可以在其中将位置（地点、建筑物等）存储在他的收藏夹列表中。该列表存储在 MySQL 数据库中，通过 HTTP 请求，我可以检索并在地图上显示它们。此外，用户最喜欢的位置存储在设备上，`[NSUserDefaults standardUserDefaults]`. 但是，因为用户可能已经从他的列表中删除了一个位置，所以我必须仔细检查每个位置（存储在设备中）是否仍然存在于数据库中。在这里，我不得不提一下，一旦用户登录，应用程序就会存储他的信息（下载最喜欢的位置并将它们存储在设备中），下次用户会自动登录。用户可以使用“删除帐户”从特定设备中删除任何个人详细信息。所有位置都作为“逗号分隔符”文件存储在设备中。

我的问题是，如何在阅读每个建筑物时提高应用程序的速度，以及 1）检查是否包含在用户的存储列表中 2）是否包含在用户的数据库列表中。目前，我的地图保持冻结状态（小方块），直到完成上述过程，然后加载地图并移动到用户的当前位置。我有大约冻结时间。4-5秒。

我试图调用负责的方法，“从文件中读取每个位置>检查用户存储的收藏列表中是否存在>（如果是）检查数据库上用户的收藏列表中是否仍然存在>（如果是）添加注释>（否则）将其从存储列表中删除[删除对象]”使用

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,
                                             (unsigned long)NULL), ^(void) {
        //call method
}); 
```

但延迟仍然在 03.7 - 04.9 秒左右

我用`dispatch_get_global_queue`错了吗？

提前致谢。

# java - 约瑟夫序列

> ID：15311100
> 
> 赞同：14
> 
> 时间：2013-03-09T13:16:22.000
> 
> 标签：java, c++, c, algorithm, josephus

**描述：** 有人围成一圈等待被处决。计数从圆圈中的某个点开始，并沿固定方向围绕圆圈进行。在每个步骤中，都会跳过一定数量的人并执行下一个人。消除围绕圆圈进行（随着被处决的人被移除，圆圈变得越来越小），直到只剩下最后一个人，他被赋予了自由。

我用谷歌搜索了这个“约瑟夫斯问题”，维基百科的热门文章给了我一个动态编程解决方案：`f(n,k)=((f(n-1,k)+k-1) mod n)+1, with f(1,k)=1`，但这只会产生最后的幸存者。我怎样才能得到执行的人的顺序？比如说，p(5, 3) = {3,1,5,2,4}。

另外，有`O(nlogn)`解决方案而不是解决方案`O(nk)`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T13:20:01.220

要获得被处决者和最后幸存者的序列，您只需要从一开始就模拟整个过程。鉴于程序的描述，这将是一项非常容易的任务。您提出的公式只是检查谁将生存并快速获得答案的捷径。

关于如何使用范围树在 O(n log n) 中执行此操作的说明如下：http: [//pl.scribd.com/doc/3567390/Rank-Trees](http://pl.scribd.com/doc/3567390/Rank-Trees)

更详细的分析可以在这里找到： [http ://www.imt.ro/romjist/Volum12/Number12_1/pdf/02-MCosulschi.pdf](http://www.imt.ro/romjist/Volum12/Number12_1/pdf/02-MCosulschi.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T13:56:42.717

表示人的最自然的数据结构是循环缓冲区。我的解决方案创建了一个链表，将链表的尾部与头部联系起来，然后在缓冲区周围重复计数到下一个要执行的人，从缓冲区中删除该人，并继续直到缓冲区的尾部指向自身.

```
(define (cycle xs)
  (set-cdr! (last-pair xs) xs) xs)

(define (josephus n m)
  (let loop ((k (- m 1)) (alive (cycle (range 0 n))) (dead '()))
    (cond ((= (car alive) (cadr alive))
            (reverse (cons (car alive) dead)))
          ((= k 1)
            (let ((dead (cons (cadr alive) dead)))
              (set-cdr! alive (cddr alive))
              (loop (- m 1) (cdr alive) dead))) 
```

例如：

```
> (josephus 41 3)
(2 5 8 11 14 17 20 23 26 29 32 35 38 0 4 9 13 18 22 27 31 36
40 6 12 19 25 33 39 7 16 28 37 10 24 1 21 3 34 15 30) 
```

[您可以在我的博客](http://programmingpraxis.com/2009/02/19/flavius-josephus/)上阅读更完整的解释，其中提供了三种不同的解决方案。或者您可以在[http://programmingpraxis.codepad.org/RMwrace2](http://programmingpraxis.codepad.org/RMwrace2)运行该程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T13:25:18.123

人们将存储在大小为 n 的数组中。如果索引处的人`i`现在被处决，则下一个将由`(i+k)%m`其中 m 是剩余人数给出。每次迭代后，数组大小会减少 1，其余元素将相应移动。

输入： People[0..n-1], n, k, i（= 执行的第一人的索引）

伪代码将类似于：

```
Print People[i]

While (n > 1)
do
  n = n - 1
  for j = i to n-1
    People[j] = People[j+1]
  i = (i+k) % n
  print People[i]
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T13:32:31.930

为了激发程序，您可以使用一个结构，其中包含玩家的名称和一个标签，该标签在玩家是否处于活动状态时保持跟踪。每次在新一轮中，您都会跳过特定数量的玩家，因此请使用循环和条件语句，以便忽略所有不在游戏中的玩家，只计算游戏中的玩家。当然，添加 printf 语句来打印当前状态。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-31T01:27:52.310

要回答输出执行顺序的问题，需要进行模拟。这意味着 O(nk) 复杂度。在寻求 O(nlogn) 时间复杂度的同时，不可能获得执行顺序 [即 O(n)]。因为你必须输出每个被执行的人，也就是 O(n)。

kkonrad 对范围树的引用产生了一个很好的 O(nlogn) 解决方案。正如其他人指出的那样，循环链表是解决此问题的有效数据结构。我发现 Code Review 中的 200_success 的 Java 解决方案非常优雅且易读。

```
public class CircularGunmenIterator<T> implements Iterator<T> {

  private List<T> list;
  private Iterator<T> iter;

  public CircularGunmenIterator(List<T> list) {
    this.list = list;
    this.iter = list.iterator();
  }

  @Override
  public boolean hasNext() {
    // Continue as long as there is a shooter and a victim
    return this.list.size() >= 2;
  }

  @Override
  public T next() {
    if (!this.iter.hasNext()) {
      // Wrap around, creating the illusion of a circular buffer
      this.iter = this.list.iterator();
    }
    return this.iter.next();
  }

  @Override
  public void remove() {
    this.iter.remove();
  }

  public static void main(String[] args) {
    // Create the gunmen
    List<Integer> gunmen = new LinkedList<Integer>();
    for (int i = 1; i <= 100; i++) {
      gunmen.add(i);
    }

    // Shootout!
    Iterator<Integer> ringIter = new CircularGunmenIterator<Integer>(gunmen);
    while (ringIter.hasNext()) {
        Integer shooter = ringIter.next();
        Integer victim  = ringIter.next();
        System.out.printf("%2d shoots %2d\n", shooter, victim);
        ringIter.remove();  // Bang!
    }
    System.out.println("Last one alive: " + gunmen.get(0));
  }
} 
```

关于这个约瑟夫斯问题（k = 2），维基百科有更多详细信息。

[http://en.wikipedia.org/wiki/Josephus_problem](http://en.wikipedia.org/wiki/Josephus_problem)

# sitemapprovider - 如何动态更改仅一个节点的标题

> ID：15311101
> 
> 赞同：0
> 
> 时间：2013-03-09T13:16:22.880
> 
> 标签：sitemapprovider, mvcsitemapprovider

在节点中，标题应该是登录系统的用户名。

此外，我希望缓存结果，因为要检索用户名，我必须访问数据库，因为用户名是电子邮件。

如何使用登录用户的名称修改标题并缓存结果，但是如果另一个用户登录它不会加载缓存的页面，而是会向他呈现一个新页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T21:17:12.810

在 v4 中，您可以简单地在视图或控制器中设置标题，它将为该用户缓存请求（其他用户不会看到它）。

```
@MvcSiteMapProvider.SiteMaps.Current.CurrentNode.Title = "My Username" 
```

当然，我以 CurrentNode 为例，您可以通过遍历树对任何节点执行此操作。

但是，您需要处理用户名的缓存，以防止 MvcSiteMapProvider 之外的每个请求都命中数据库。您可以通过为每个用户创建一个缓存项，将用户名（只要它是唯一的）合并到密钥中来做到这一点。

```
var key = "My Username";
var userName = HttpContext.Current.Cache.Item[key];
if (userName == null)
{
    userName = GetUserNameFromDB();
    HttpContext.Current.Cache.Item[key] = userName;
} 
```

# r - 在 R 中自定义轴点

> ID：15311110
> 
> 赞同：0
> 
> 时间：2013-03-09T13:17:43.797
> 
> 标签：r, statistics, ggplot2

从屏幕截图中可以看出，X 轴点都是杂乱无章的。有没有办法让它们垂直显示以便阅读？

有没有办法指定 Y 轴的间隔？

我正在使用 ggplot2 的 qplot。

```
qplot(merged[[1]], merged[[4]], colour = colour, xlab="Positions", ylab ="Salary", main="H1B Salary 2012", ylim=c(50000,300000)) 
```

![在此处输入图像描述](../Images/019b6e7387c6186a8338c51d9e6a5f1b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:27:07.430

如果没有示例数据和您的实际代码，很难给出准确的答案。

`theme()`通常，使用函数和参数`axis.text.x=`（对于 x 轴）更改轴文本格式。要为 y 轴设置中断，`scale_y_continuous()`应与 arguments 一起使用`breaks=`。

```
qplot(mpg, wt, data=mtcars)+
  theme(axis.text.x=element_text(angle=90,vjust=0.5))+
  scale_y_continuous(breaks=seq(0,5,0.5)) 
```

有关主题（）功能的更多信息，[请参见 ggplot2 站点](http://docs.ggplot2.org/0.9.3/theme.html)。

# php - PHP MySQL站点中的西里尔编码问题

> ID：15311111
> 
> 赞同：2
> 
> 时间：2013-03-09T13:17:45.553
> 
> 标签：php, encoding, utf-8, cp1251

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T13:21:47.040

您在 utf-8 中添加文本，而您的页面在 1251 中。
因此，在添加文本时将您的编辑器设置为 Windows-1251

或者

将标题从 1251 更改为 utf-8

```
header('Content-Type: text/html; charset=utf-8'); 
mysql_query('SET NAMES utf8'); 
```

# json - 将json数据解析为highcharts

> ID：15311112
> 
> 赞同：1
> 
> 时间：2013-03-09T13:17:50.043
> 
> 标签：json, parsing, highcharts, linechart

我已经搜索和搜索，但我无法找到解决方案。

我正在尝试使用我的服务器中的 json 将数据加载到 Highcharts 中。这是从我的服务器返回的 json：

```
 [{
    "x": "\/Date(1352674800000)\/",
        "y": 621
}, {
    "x": "\/Date(1352761200000)\/",
        "y": 646
}, {
    "x": "\/Date(1352847600000)\/",
        "y": 690
}, {
    "x": "\/Date(1352934000000)\/",
        "y": 688
}, {
    "x": "\/Date(1353020400000)\/",
        "y": 499
}] 
```

这是我的高图：（来自我的 jsfiddle）

```
 var seriesData = [];
for (var i = 0; i < data.length; i++) {
   var dateString = data[i].x;
var x = dateString.replace(/\/Date\((\d+)\)\//, '$1');

    var y = data[i].y;

    seriesData.push([x, y]);

}
alert(seriesData);

var options = {
    chart: {
        renderTo: 'container'
    },
    xAxis: {        
        type: 'datetime',
        labels: {
            formatter: function() {
            var monthStr = Highcharts.dateFormat('%a', this.value);
            var firstLetter = monthStr.substring(0, 1);
            return firstLetter;
            }
        }
    },

    series: []
};

function myfunk() {
   options.series.push(seriesData);

    chart = new Highcharts.Chart(options);
}
myfunk(); 
```

但我的数据没有显示。

我做了一个jsfiddel：http: [//jsfiddle.net/grVFk/12105/](http://jsfiddle.net/grVFk/12105/)

编辑：

**现在它正在工作，但数据点是否显示错误的日期？[http://jsfiddle.net/dxCHB/18/](http://jsfiddle.net/dxCHB/18/)**

如果有人可以帮助我，我将不胜感激！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T13:33:30.510

你非常亲近。系列数组需要包含一个具有数据成员的对象：

```
 series: [
    {
       data:[]
    }
 ] 
```

然后，您可以使用以下方法进行设置：

```
function myfunk() {
    options.series[0].data = seriesData; 
```

我修改了你的 jsfiddle：http: [//jsfiddle.net/dxCHB/](http://jsfiddle.net/dxCHB/)

用数字格式化您的日期

```
seriesData.push([x/1, y]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:15:05.117

您的数据应该是数字，因此您可以使用 parseFloat() 函数将字符串转换为数字。

# screenshot - 从 Blackberry 10 Simulator 捕获屏幕截图到 PC

> ID：15311117
> 
> 赞同：0
> 
> 时间：2013-03-09T13:18:10.520
> 
> 标签：screenshot, blackberry-simulator, blackberry-10

如何从 Blackberry 10 Simulator 将屏幕截图捕获到我的 PC？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:19:27.310

查看 VMWare 工具，而不是 BB10 映像： http: [//www.vmware.com/support/ws5/doc/ws_running_capture.html](http://www.vmware.com/support/ws5/doc/ws_running_capture.html)

# android - 将 sqlite 导入到 android 应用程序时遇到问题

> ID：15311119
> 
> 赞同：0
> 
> 时间：2013-03-09T13:18:24.747
> 
> 标签：android, sqlite, android-logcat

我正在尝试将 sqlite 数据库导入我的 android 应用程序。我在这里看到了另一个问题的解决方案代码。

我试图这样做，但得到**`unfortunately application has stopped`**错误。

我该如何解决？

这是日志猫：

```
03-09 13:05:14.932: E/AndroidRuntime(1092): FATAL EXCEPTION: main
03-09 13:05:14.932: E/AndroidRuntime(1092): java.lang.Error: ErrorCopyingDataBase
03-09 13:05:14.932: E/AndroidRuntime(1092):     at com.nasozby.marifetname.Db.createDataBase(Db.java:48)
03-09 13:05:14.932: E/AndroidRuntime(1092):     at com.nasozby.marifetname.Adapter.createDatabase(Adapter.java:28)
03-09 13:05:14.932: E/AndroidRuntime(1092):     at com.nasozby.marifetname.MainActivity.onCreate(MainActivity.java:29)
03-09 13:05:14.932: E/AndroidRuntime(1092):     at android.app.Activity.performCreate(Activity.java:5104)
03-09 13:05:14.932: E/AndroidRuntime(1092):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-09 13:05:14.932: E/AndroidRuntime(1092):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-09 13:05:14.932: E/AndroidRuntime(1092):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-09 13:05:14.932: E/AndroidRuntime(1092):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-09 13:05:14.932: E/AndroidRuntime(1092):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-09 13:05:14.932: E/AndroidRuntime(1092):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-09 13:05:14.932: E/AndroidRuntime(1092):     at android.os.Looper.loop(Looper.java:137)
03-09 13:05:14.932: E/AndroidRuntime(1092):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-09 13:05:14.932: E/AndroidRuntime(1092):     at java.lang.reflect.Method.invokeNative(Native Method)
03-09 13:05:14.932: E/AndroidRuntime(1092):     at java.lang.reflect.Method.invoke(Method.java:511)
03-09 13:05:14.932: E/AndroidRuntime(1092):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-09 13:05:14.932: E/AndroidRuntime(1092):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-09 13:05:14.932: E/AndroidRuntime(1092):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:48:59.940

如果您尝试将初始数据库文件与您的应用程序一起发送，那么它需要进入“资产”目录并在开始时被复制（如果它不存在）。

这是我过去处理过的一种简单方法，此代码是我的一部分（在 ctor`SQLiteOpenHelper`中触发）：`createDatabase`

```
private void createDatabase() {
  if (!databaseExists()) {
     Log.i(TAG, "OpenHelper createDatabase, database does NOT exist, will be copied/created...");
     try {
        this.copyDatabase();
     } catch (IOException e) {
        Log.e(TAG, "OpenHelper error copying database " + e.getMessage(), e);
     }
  } else {
     Log.d(TAG, "OpenHelper createDatabase, database exists, leaving it alone");
  }
}

private void copyDatabase() throws IOException {

  InputStream is = context.getAssets().open(DB_NAME + ".sqlite");

  File dbFile = context.getDatabasePath(DB_NAME);
  dbFile.getParentFile().mkdirs();
  Log.i(TAG, "OpenHelper copyDatabase creating file at path:" + dbFile.getAbsolutePath());

  OutputStream os = new FileOutputStream(dbFile.getAbsolutePath());

  byte[] buffer = new byte[1024];
  int length;
  while ((length = is.read(buffer)) > 0) {
     os.write(buffer, 0, length);
  }

  os.flush();
  os.close();
  is.close(); 
}

private boolean databaseExists() {
  File dbFile = context.getDatabasePath(DB_NAME);
  return dbFile.exists();
} 
```

# php - 嵌入 Youtube 视频的最佳方式是什么？

> ID：15311120
> 
> 赞同：2
> 
> 时间：2013-03-09T13:18:38.527
> 
> 标签：php, html, iframe, youtube, embed

我正在建立一个视频网站，我希望我的用户能够从 Youtube 上传或嵌入视频。Youtube API 似乎不提供从他们的网站上传的视频，或者是吗？所以我尝试通过`iframe`PHP 嵌入视频。这是代码：

```
<?php
$source=$_POST['source'];
?>

<html>
<div id="bo"><?php echo $source;?></div>
<form action="altupload.php" method="post">
<input type="text" name="source">
<input type="submit">
</form>
</html> 
```

但我得到的只是：

```
<html><div id="bo"><iframe width=\"560\" height=\"315\" src=\"http://www.youtube.com/embed/tZa5hyb0_wA\" frameborder=\"0\" allowfullscreen></iframe></div>`

<html>
<form action="altupload.php" method="post">
<input type="text" name="source">
<input type="submit">
</form>
</html> 
```

谁能推荐一些其他的方法来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:38:29.493

允许用户仅从 URL 上传 youtube 视频 ID：

```
http://www.youtube.com/watch?v=Vw5FDZRGTL0 
```

视频编号：`Vw5FDZRGTL0`

您可以设置 IFrame 标签的其他选项：

```
<iframe width="420" height="315" src="http://www.youtube.com/embed/<?php echo $videoID; ?>" frameborder="0" allowfullscreen></iframe> 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:24:31.647

您需要使用以下`addslashes()`功能：

```
echo Addslashes($source); 
```

# excel - EXCEL：在列中搜索多个字符串，并给出不匹配的单元格

> ID：15311123
> 
> 赞同：0
> 
> 时间：2013-03-09T13:18:49.517
> 
> 标签：excel, text, position, excel-formula, mismatch

与我定义的可用类型相比，我想在整个列中搜索不匹配（我犯的类型错误）。如果有任何不匹配，我希望在下面的单元格中显示该不匹配的单元格。

所以这就是我所拥有的（出于隐私原因，我用同义词替换了实际类型，显然它们没有命名为 type# irl）：

**E 列：E**

*   类型 1 (E1)
*   5型（E2）
*   类型 3 (E3)
*   类型 3 (E4)
*   7型（E5）
*   ***Tipe2*** (E6)
*   类型 9 (E7)
*   (E8)
*   类型 3 (E9)

**K2 栏：K10**

*   类型 1 (K2)
*   类型 2 (K3)
*   3型（K4）
*   4型（K5）
*   5型（K6）
*   6型（K7）
*   7型（K8）
*   8型（K9）
*   9型（K10）

例如，我在单元格 E6 中创建了类型错误“tipe2”，并在单元格 E8 中添加了一个空行。现在我想要一个公式，当 E:E 列中的某些内容与 K2:K10 列中的一种类型不匹配时显示“错误”，否则不打印任何内容或“未找到错误”。同时我希望在一个单独的单元格中不匹配单元格的坐标（在本例中为 E6）。

我已经得到了获取不匹配单元格的部分，其中 my_string 应替换为已找到的不匹配字符串：

```
="E"&MATCH("my_string",E:E,FALSE)+IF(COUNTIF(E:E,"my_string")=1,0,COUNTIF(E:E,"my_string")-1) 
```

PS：我不想要 VBA 脚本！我只想要两个单元格内的公式。看看我是否犯了不匹配，如果我确实犯了不匹配，我想要单元格的坐标（或者当发现多个不匹配时，最后一个单元格的坐标）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:53:02.300

您可以使用所谓的数组公式来实现这一点。作为说明，我在这张图片中模拟了你的情况：

![Excel 情况图片](../Images/322632f3e2c7efc5df89ac225473f657.png)

重要的单元格是`H1`，它包含列中违规单元格的索引`E`。为了简单起见，我介绍了两个命名范围`items`，包含单元格`E1:E9`和`lookup`包含单元格`K2:K10`。中的公式`H1`是

```
=MAX(IF(ISBLANK(items),0,IF(ISERROR(MATCH(items,lookup,0)),ROW(INDIRECT("1:"&ROWS(items))),0))) 
```

这是一个数组公式，这意味着您必须使用`Ctrl`- `Shift`-来确认`Enter`。如果你做对了，公式会在它周围显示大括号——你不需要自己输入。此公式遍历名为 的范围内`items`的所有单元格，为所有空白单元格或在名为 的范围内具有匹配项的所有单元格创建一个值为 0 的数组`lookup`。对于剩余的单元格，插入的值等于行号。然后最大值被接管。

因此，`H1`将包含最后一个违规项目的索引。如果所有项目都正常，则显示值 0。

单元格`G1`显示`Error`是否发现了任何违规项目，`OK`否则显示。公式是

```
=IF(H1=0,"OK","Error") 
```

最后，`I1`通过显示实际的违规项目

```
=IF(H1>0,INDEX(items,H1),"") 
```

如果您不想使用命名范围，请替换`items`为`$E$1:$E$9`和。`lookup``$K$2:$K$10`

如果违规单元格是空单元格，`I1`则将包含值 0。

我认为 in 的值`H1`对分析很有用，但如果你不想要它，你可以隐藏它。或者您可以将该公式折叠到 和 中使用的公式中`G1`，`I1`但公式变得非常复杂。

包含此答案的工作簿[在此处上传](http://temp-share.com/show/dPf3LyuHW)

作为旁注：您是否知道您可以使用 Excel 的数据验证功能和下拉列表来避免您正在查看的这些类型的拼写错误。这可能对你有用。[文章在 Microsoft Excel 中使用数据验证下拉菜单](http://www.officearticles.com/excel/drop-down_using_data_validation_in_microsoft_excel.htm)中给出了一个示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:38:02.130

最简单的方法是；使用过滤器“不包含”

Excel 2010 解决方案，与 2003 类似

*   选择整列
*   选择数据
*   选择过滤器
*   选择过滤器选项（列顶部的三角形）
*   选择文本过滤器
*   选择不包含
*   输入类型
*   根据需要修改并重新运行。

# c# - 如何在动态创建的图像控件上应用倾斜效果

> ID：15311124
> 
> 赞同：0
> 
> 时间：2013-03-09T13:18:49.683
> 
> 标签：c#, windows-phone-8

我有图像控件的 XAML 代码如下所示：

```
Image x:Name="test" local:TiltEffect.IsTiltEnabled="True"  HorizontalAlignment="Left" Height="200" Margin="95,300,0,0" VerticalAlignment="Top" Width="150" Source="/Assets/20121215_082027.jpg"/> 
```

现在我如何在 csharp 中编写这段代码。我已经动态创建了图像控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:32:39.427

我认为您必须使用动画故事板。这是一篇关于 Windows 8 倾斜效果的类似帖子。

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/9a348a15-7f8d-46a9-a26c-4407180ed928/](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/9a348a15-7f8d-46a9-a26c-4407180ed928/)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:32:15.110

```
TiltEffect.SetIsTiltEnabled(*yourUIobject*, true); 
```

# c# - Facebook C# SDK 将位置映射到模型

> ID：15311125
> 
> 赞同：1
> 
> 时间：2013-03-09T13:18:49.923
> 
> 标签：c#, json, facebook-c#-sdk

[这](https://graph.facebook.com/search?q=coffee&type=place&center=37.76,-122.427&distance=1000&access_token=AAAAAAITEghMBAP1aZAvXPvUyHkIHDNdHyV4NaLcYVtrWswilUBNllblVfvqCUEan5tZBdck1uu1upknTYcU5BD5XvOfdK4pyuE3ECzlXRKxYfIDKQZA)是一个结果示例，（facebook公共示例）

(/search?q=coffee&type=place¢er=37.76,-122.427&distance=1000)

我有这个模型：

```
[DataContract]
public class FBPlaces
{
    [DataMember(Name = "data")]
    public List<Place> Data { get; set; }

    [DataMember(Name = "paging")]
    public Paging Paging { get; set; }
}

[DataContract]
public class Paging
{
    [DataMember(Name = "next")]
    public string Next { get; set; }
}

[DataContract]
public class Place
{
    [DataMember(Name = "location")]
    public List<Location> Locations { get; set; }

    [DataMember(Name = "category")]
    public string Category { get; set; }

    [DataMember(Name = "name")]
    public string Name { get; set; }

    [DataMember(Name = "id")]
    public string ID { get; set; }
}

[DataContract]
public class Location
{
    [DataMember(Name = "street")]
    public string Street { get; set; }

    [DataMember(Name = "city")]
    public string City { get; set; }

    [DataMember(Name = "state")]
    public string State { get; set; }

    //[DataMember(IsRequired = false, Name = "country ")]
    //public string Country { get; set; }

    [DataMember(Name = "zip")]
    public string Zip { get; set; }

    [DataMember(Name = "latitude")]
    public double Latitude { get; set; }

    [DataMember(Name = "longitude")]
    public double Longitude { get; set; }
} 
```

问题是映射“位置”数组，我得到

System.ArgumentException：为调用方法'Void set_Item（Int32，MyProject.Models.Location）'提供的参数数量不正确

*   如果我删除 Locations ，一切都很好，我得到 Category+Name+Id 。（但没有地点）

*   如何解决？

*   在我的真实示例（不同位置查询）中，并不总是显示“国家”，我如何处理这种数据？我评论了 Country property 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:32:28.250

位置不是一个数组。

尝试

```
[DataContract]
 public class Place
 {
    [DataMember(Name = "location")]
    public Location Locations { get; set; }

    [DataMember(Name = "category")]
    public string Category { get; set; }

    [DataMember(Name = "name")]
    public string Name { get; set; }

    [DataMember(Name = "id")]
    public string ID { get; set; }
} 
```

# android - 带有 Viewpager 和 ABS 的 Android 多个片段

> ID：15311126
> 
> 赞同：0
> 
> 时间：2013-03-09T13:18:50.937
> 
> 标签：android, android-viewpager

我正在开发一个带有 android 2.1 包的应用程序。我正在使用 ActionBarSherlock 来获取操作栏。然后我尝试使用一个 Viewpager 和 multilpe Fragments Class 并拥有自己的布局。

但我得到的只是第一个片段。

**我也使用了这个问题中给出的建议，但没有效果** [请参阅此处的问题](https://stackoverflow.com/questions/9146232/android-viewpager-w-multiple-fragment-classes-each-w-separate-layout-file)

**这是我的带有 ActionBar 和 Viewpager 的 MainActivity。**

```
public class MainActivity extends SherlockFragmentActivity {

 private static final int NUMBER_OF_PAGES = 2;
 private MyFragmentPagerAdapter mMyFragmentPagerAdapter;

ActionBar actionBar;
ViewPager viewPager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    actionBar = getSupportActionBar();
    actionBar.setHomeButtonEnabled(true);
    //actionBar.setNavigationMode(actionBar.NAVIGATION_MODE_TABS);

    viewPager =  (ViewPager) findViewById(R.id.pager);
    //viewPager.setOffscreenPageLimit(4);

     mMyFragmentPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());
     viewPager.setAdapter(mMyFragmentPagerAdapter);

}

@Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt("tab", getSupportActionBar().getSelectedNavigationIndex());
    }

  private static class MyFragmentPagerAdapter extends FragmentPagerAdapter {  

      public MyFragmentPagerAdapter(FragmentManager fm) {  
           super(fm);  
      }  

      @Override  
      public Fragment getItem(int index) { 

          Fragment f = new Fragment();
          Log.d("index  ", ""+index);

          switch (index) {
            case 0:
                f = PageFragment.newInstance(index);
            break;
            case 1:
                f = FragmentTwo.newInstance(index);
            break;

            default:
            break;
            }

          return f;

      }  

      @Override  
      public int getCount() {  

           return NUMBER_OF_PAGES;  
      }  
 } 
```

}

**这是我的一个片段类。**

```
public class PageFragment extends SherlockFragment {  

 public static PageFragment newInstance(int title) {

     PageFragment pageFragment = new PageFragment();
     Bundle bundle = new Bundle();
     bundle.putInt("title", title);
     pageFragment.setArguments(bundle);
     return pageFragment;
 }

 @Override  
 public void onCreate(Bundle savedInstanceState) {  
     super.onCreate(savedInstanceState);  
 }  

 @Override  
 public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  

     View view = inflater.inflate(R.layout.fragment, container, false);  
     TextView textView = (TextView) view.findViewById(R.id.textView1);  
     textView.setText("View # 01");

     return view;  
 } 
```

}

**这是我在 activity_main.xml XML 中的片段之一**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

 <android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

  <fragment android:name="com.mzubair.test.PageFragment"
          android:id="@+id/headlines_fragment"
          android:layout_weight="1"
          android:layout_width="0dp"
          android:layout_height="match_parent" />
  <fragment android:name="com.mzubair.test.FragmentTwo"
          android:id="@+id/headlines_fragment2"
          android:layout_weight="1"
          android:layout_width="0dp"
          android:layout_height="match_parent" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:39:22.550

从您的 XML 中删除两个片段标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T07:39:04.003

试试这个 PagerAdapter （使其适应您的代码），并从您的布局中删除那些您不希望将您的片段添加到 viewpager 下方或旁边的片段：/

```
public class AdapterTabs extends FragmentPagerAdapter implements
        ActionBar.TabListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    protected final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo {
        protected final Class<?> clss;
        protected final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    public AdapterTabs(SherlockFragmentActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(), info.args);
    }

    public void onPageScrolled(int position, float positionOffset,
            int positionOffsetPixels) {

    }

    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
        ((SherlockFragmentActivity) mContext).supportInvalidateOptionsMenu();
    }

    public void onPageScrollStateChanged(int state) {

    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // force l'appel de onOptionMenuPrepared
        ((SherlockFragmentActivity) mContext).supportInvalidateOptionsMenu();
        Object tag = tab.getTag();
        for (int i = 0; i < mTabs.size(); i++) {
            if (mTabs.get(i) == tag) {
                mViewPager.setCurrentItem(i);
            }
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {

    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {

    }

} 
```

# asp.net - 服务器中的 Excel 和 PPT 自动化

> ID：15311127
> 
> 赞同：0
> 
> 时间：2013-03-09T13:18:53.623
> 
> 标签：asp.net, automation, ms-office

我开发了一个具有以下要求的 ASP.NET 应用程序。

**要求：* *我的 ASP.NET 应用程序有 Gridviews 和 Charts，我需要将这些图表作为表格和图表对象而不是图像导出到 PPT 演示文稿中。

这些是我为实现所需功能而遵循的步骤：

*   准备了一个带有表格和图表的 Excel 模板：这个 Excel 模板包含宏和这些宏，这些宏是我使用 COM 互操作从 ASP.NET 应用程序调用的，基于 UI 中的过滤器选择。每当我通过传递参数调用宏时，excel 数据都会自动更新。

*   准备了一个 PPT 模板，这里的 PPT 模板图表已经从 Excel 复制并使用下面的选项粘贴，所以有一个黑白 Excel 和 PPT 的链接。

*   每当 Excel 中的数据更新时，我都会从 Excel 宏中更新这些外部链接，因此 Excel 和 PPT 始终匹配。

*   此功能的工作方式与我在本地机器中的要求完全相似。我已将此 A​​SP.NET 应用程序部署到服务器并按照以下步骤配置 DCOM。

**服务器中的步骤如下：**

1.  通过启用 VBA 编程来安装 Excel 和 PowerPoint 应用程序。
2.  Dcom 配置：进入“开始-运行”菜单，输入“dcomcnfg”，然后按回车键加载“组件服务”MMC。
3.  通过“组件服务”MMC->组件服务->计算机->我的电脑->DCOM Config->Microsoft Excel应用程序选择“Microsoft Excel应用程序”项
4.  右键单击并选择属性->选择身份选项卡->选择“交互式用户”</li>
5.  为所有选项选择安全选项卡“使用默认值”。

通过这些配置，我已经在 IIS 中部署了应用程序，并且能够毫无问题地运行应用程序。

但是突然当我尝试访问应用程序时，它显示以下错误

我去了“事件查看器”，问题如下。

我浏览了网络，发现以下步骤：

1.  转到“开始-运行”菜单键入“dcomcnfg”，然后按 Enter 以加载“组件服务”MMC。
2.  通过“组件服务”MMC->组件服务->计算机->我的电脑->DCOM Config->Microsoft Excel应用程序选择“Microsoft Excel应用程序”项
3.  右键单击并选择属性->选择身份选项卡->选择此用户并添加管理员帐户和密码
4.  选择安全选项卡，在“启动和激活权限”下，选择“自定义”，单击“编辑”按钮，添加所有人帐户并添加所有权限。
5.  在“访问权限”和“配置权限”中做同样的事情但这些对我没有帮助。

谁能帮我在 Windows 8 Server 上配置 DCOM 以运行 Office 自动化应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-17T02:37:54.073

我建议您再次按照您的步骤操作，但也为 MS Powerpoint 执行此操作（设置为交互式用户）

为了使应用程序正常工作，在服务器上执行的步骤：

1.  通过启用 VBA 编程来安装 Excel 和 PowerPoint 应用程序。
2.  Dcom 配置：转到开始-运行菜单，输入“dcomcnfg”并按 Enter 以加载“组件服务”MMC。
3.  通过“组件服务”MMC->组件服务->计算机->我的电脑->DCOM 配置->Microsoft POWERPOINT SLIDE 选择“Microsoft POWERPOINT SLIDE”项
4.  右键单击并选择属性->选择身份选项卡->选择“交互式用户”</li>
5.  为所有选项选择安全选项卡“使用默认值”。

# android - Android - 显示动画状态栏图标

> ID：15311135
> 
> 赞同：7
> 
> 时间：2013-03-09T13:19:53.980
> 
> 标签：android, android-notifications

我正在尝试将通知状态栏图标设置为动画 android.R.drawable.stat_sys_upload，它工作正常，但图标不动画：

```
private void showStatusNotification() {

    NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

    Builder notificationBuilder = new NotificationCompat.Builder(this);
    notificationBuilder.setAutoCancel(false);
    notificationBuilder.setOngoing(true);
    notificationBuilder.setContentIntent(PendingIntent.getActivity(this, 0, new Intent(this,
            MainActivity.class), PendingIntent.FLAG_UPDATE_CURRENT));
    notificationBuilder.setContentTitle(getString(R.string.notification_title));
    notificationBuilder.setContentText(getString(R.string.notification_text));
    notificationBuilder.setSmallIcon(android.R.drawable.stat_sys_upload);
    notificationManager
            .notify(STATUS_NOTIFICATION_ID, notificationBuilder.build());
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T13:22:35.910

解决方案很简单，但非常棘手。你只需要添加

```
notificationBuilder.setTicker(getString(R.string.notification_ticker)); 
```

神奇的事情发生了，你的图标是动画的。它与此错误有关：

[http://code.google.com/p/android/issues/detail?id=15657](http://code.google.com/p/android/issues/detail?id=15657)

希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-18T10:32:26.653

只是为了添加到@gingo 的答案，如果您不希望在状态栏中显示任何文本，则将您的 notification_ticker 字符串在 strings.xml 中保持为空白（这很明显）。

此外，如果您希望动画图标在进度或下载/上传完成后停止，则为您的 notificationBuilder 设置一个外观相似的图标并调用通知管理器上的 notify 方法，

```
 mBuilder.setSmallIcon(R.drawable.ic_download);
 mNotifyManager.notify(0, mBuilder.build()); 
```

# c# - Specflow 如何使用 Linq 查询数据库

> ID：15311140
> 
> 赞同：1
> 
> 时间：2013-03-09T13:20:26.613
> 
> 标签：c#, linq, selenium, mstest, specflow

**语境**

我对 .NET 比较陌生，并决定在项目中使用 BDD。我为此使用 Specflow。

我使用 Gherkin 格式创建了一个功能文件并生成了步骤定义。

我正在使用 Selenium 将我的功能文件中的表中的信息插入到网页中，并且我正在使用 MSTest 来测试结果。

**我的步骤定义**

```
[Binding]
public class RegisterSteps
{
    private IWebDriver ff = new FirefoxDriver();
    private string username = "";

    [Given(@"you are on the register page")]
    public void GivenYouAreOnTheRegisterPage()
    {         
        ff.Navigate().GoToUrl("http://localhost:55475/Register");
    }

    [Given(@"you enter the following information")]
    public void GivenYouEnterTheFollowingInformation(TechTalk.SpecFlow.Table table)
    {
        username = table.Rows[6]["Value"];
        for (var i = 0; i < table.RowCount; i++)
        {
            var field = table.Rows[i]["Field"];
            var value = table.Rows[i]["Value"];
            field = "mainContentPlaceHolder_TextBox" + field.Replace(" ", string.Empty);
            ff.FindElement(By.Id(field)).SendKeys(value);
        }
    }

    [When(@"you click submit")]
    public void WhenYouClickSubmit()
    {
        ff.FindElement(By.Id("mainContentPlaceHolder_Submit")).Click();
    }

    [Then(@"you should see the message ""(.*)""")]
    public void ThenYouShouldSeeTheMessage(string expectedMessage)
    {
        string message =  ff.FindElement(By.Id("mainContentPlaceHolder_LabelSuccess")).Text;
        Assert.AreEqual(message, expectedMessage);          
    }

    [Then(@"a record should be added to the table")]
    public void ThenARecordShouldBeAddedToTheTable()
    {
        RiskClassesDataContext db = new RiskClassesDataContext();
        var query = from ao in db.ActionOwners
                    where ao.username.Equals(username)
                    select ao;
        Assert.IsNotNull(query.First());
    }
} 
```

**问题**

1.  我希望能够在我的步骤定义中使用 Linq 来检查记录是否被插入到各种表中。上面的代码`NullReferenceException`在`RiskClassesDataContext()`. 我之前已经能够创建 RiskClassesDataContext 的实例，所以我想知道这是否是因为我试图从我的 Specflow 项目而不是从我的 Web 应用程序中执行此操作。

2.  我的最后一个问题是您是否认为这是测试我的项目的最佳方法。带有数据库查询的 selenium 是否可以测试我的整个项目，或者我最好使用 Moq。或者两者兼而有之？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T00:27:27.520

简短的答案

1.  我需要查看代码`RiskClassesDataContext`才能确定，但​​是是的，这很可能是因为您在连接到数据库时丢失了一些东西。
2.  这种方法没有错，但如果它是*最好的方法*取决于你想要实现的目标。

长答案

为了决定这是否是*最好*的测试方式，你真的需要考虑你想要实现的测试类型。

*   您是否正在尝试编写一些测试来帮助您编写代码？
*   您想提供一个全面的测试库来证明您的代码是正确的吗？
*   您的测试是否应该证明您的解决方案可以正常工作？

现在在这一点上，你可能会对自己说你想要所有这些，或者它们都是一样的，但实际上这里有一些微妙的不同。

*   如果您想要一些测试只是为了帮助您编写代码，那么在编写代码之后阻止您丢弃这些测试的方法是什么。
*   如果您想证明您的代码是正确的，那么您正在考虑单元测试，可能不关心与数据库对话，是的，Moq 将非常有用（其他模拟库可用）。
*   如果您想证明您的解决方案有效，那么我们正在研究验收测试，您确实需要证明您的代码和数据库之间的交互。

这里的重点是 SpecFlow 可以用于所有这些事情。

如果您正在尝试正确地执行 BDD，那么实际上您已经与您的业务代表坐下来，并且在你们两人之间，您已经为您正在考虑实现的功能制定了许多方案。当然，您在考虑您的代码之前已经这样做了。这样我们就不会将我们的想法锁定在任何一种实现上 :-) 现在您可以坐下来实现您的绑定，以免它们失败。

但接下来呢？好吧，当然，此时我们想要编写一些新代码，并且由于我们是优秀的开发人员，因此我们使用 TDD 来帮助我们。由于我们是单元测试，所以我们使用 Mocks 来帮助我们隔离每个代码单元。这导致我们的代码不断发展，因此在编写了一些单元测试之后，我们的 SpecFlow 测试也通过了。

这导致我们将*通过示例*测试的规范用作定义我们的新功能的外部流程，而单元测试是推动代码走向成功的内部循环。双重红绿重构循环。此外，这意味着我们的 SpecFlow 测试范围更大，可能包括对该数据库的访问。

所以现在如果我们回到我们的问题

*   您是否正在尝试编写一些测试来帮助您编写代码？
*   *SpecFlow 可以是其中的一部分，但我也建议使用 TDD*
*   您想提供一个全面的测试库来证明您的代码是正确的吗？
*   *不要打扰 SpecFlow，只需使用 nUnit 和 mocks*
*   您的测试是否应该证明您的解决方案可以正常工作？
*   *这就是 SpecFlow 擅长的，如果它需要一个数据库，那就继续吧*

试试[这篇文章](http://msdn.microsoft.com/en-us/magazine/gg490346.aspx)了解更多细节。

最后一点，如果您在测试中使用数据库，您必须考虑如何将其隔离以进行多次测试运行。查看[using-specflow-for-wpf-in-mvvm](https://stackoverflow.com/questions/14499114/using-specflow-for-wpf-in-mvvm/14504306#14504306)了解更多关于此的想法

# jquery - Rails CoffeeScript 在加载时执行命令

> ID：15311144
> 
> 赞同：1
> 
> 时间：2013-03-09T13:20:53.183
> 
> 标签：jquery, coffeescript

我有一个 CoffeeScript 文件作为 Rails 应用程序的一部分，如下所示

```
 jQuery ->
      $ ->
        $('#secondthing').hide()

      $('#trips').change ->
        trips = $('#trip_quantity :selected').text()
        if trips == '1'
          $('#secondthing').hide()
        else
          $('#secondthing').show() 
```

现在，当行程发生变化时执行的代码部分可以正常工作。但是，页面加载后要执行的第一段代码不会改变。我不知道从这里去哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:30:51.620

尝试删除`$ ->`第二行的。

```
jQuery ->
  // $ ->
  $('#secondthing').hide()

  $('#trips').change ->
    trips = $('#trip_quantity :selected').text()
    if trips == '1'
      $('#secondthing').hide()
    else
      $('#secondthing').show() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:09:02.980

你的代码没有问题，所以如果它不起作用，原因一定是你没有显示的部分。但是，我要指出一些显然使人们感到困惑的事情。

首先，没有必要在同一范围内同时`jQuery`使用两者。只是 的别名，唯一两个名称都有意义的情况是出于兼容性原因（与其他版本的 jQuery 或其他也 用作快捷方式的库）您将代码封装在这样的模块中：`$``$``jQuery``$`

```
(function($) {
  // Now $ is bound to whatever object you pass in
})(jQuery); 
```

鉴于我们可以在您的代码中自由替换`$`，`jQuery`下一个误解是（压缩在一行中）：

```
$ -> $ -> $("#foo").hide() 
```

此代码段计划在加载 DOM 后执行回调。`#foo`一旦加载了 DOM，这个回调又会安排另一个回调隐藏。由于第二个计划是在 DOM 已经加载时运行的，因此实际上它会立即执行。这就是为什么，即使你真的**应该**使用

```
$ -> $("#foo").hide() 
```

原始代码中的任何额外“级别”都没有害处，实际上一切都[按预期](http://jsfiddle.net/J2h4m/)工作。顺便说一句，这是您的代码最紧凑的版本：

```
$ ->
  el = $("#secondthing")

  el.hide()

  $("#trips").change ->
    el[if $('#trip_quantity :selected').text() == '1' then "hide" else "show"](); 
```

# opengl - 从 GLSL 着色器获取纹理输出到 opengl

> ID：15311146
> 
> 赞同：0
> 
> 时间：2013-03-09T13:20:54.340
> 
> 标签：opengl, glsl, textures

我有一个 GLSL 着色器，它比较两个蒙版，并用最高值的图像为像素着色。我想将其输出到在每个像素处存储最高掩码的纹理，例如我有 img1,img2,img3 和 mask1,mask2,mask3

现在着色器执行以下操作

```
if mask1 >= mask2
gl_FragColor = img1
else
gl_FragColor = img2 
```

所以，如果第一个像素 mask1 最高，我想存储在我的输出纹理 0 中并为每个像素执行此操作

然后在完成着色器执行后，我想在我的 opengl 代码中有一个纹理，为每个像素存储 0 或 1，它显示了哪个掩码具有更大的值。

有没有办法做到这一点？

# ruby - 如何将mysql数据库上传到phpfog？

> ID：15311147
> 
> 赞同：1
> 
> 时间：2013-03-09T13:21:00.390
> 
> 标签：ruby, hosting, cloud, cloud-hosting, phpfog

我已经创建了一个并且我想将它上传到 phpfog 但是我在第一步上传我的数据库时遇到了麻烦，我已经`win 7 x64`下载并安装了`command prompt with ruby`，同时创建了一个隧道：

```
`C:\wamp\www\myapp>af tunnel
[WARNING] DL is deprecated, please use Fiddle
To use `af tunnel', you must first install Caldecott:

        gem install caldecott

Note that you'll need a C compiler. If you're on OS X, Xcode
will provide one. If you're on Windows, try DevKit.

This manual step will be removed in the future.

Error: Caldecott is not installed.` 
```

但是在安装 caldecott 时 -

```
`C:\wamp\www\myapp>gem install caldecott
Fetching: eventmachine-1.0.3.gem (100%)
ERROR:  Error installing caldecott:
        The 'eventmachine' native gem requires installed build tools.

Please update your PATH to include build tools or download the DevKit
from 'http://rubyinstaller.org/downloads' and follow the instructions
at 'http://github.com/oneclick/rubyinstaller/wiki/Development-Kit'` 
```

谁能帮我完成它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T17:15:00.460

您需要先安装 DevKit。您可以在此处获得更多信息：

[http://rubyinstaller.org/add-ons/devkit/](http://rubyinstaller.org/add-ons/devkit/)

和：[https ://github.com/oneclick/rubyinstaller/wiki/Development-Kit](https://github.com/oneclick/rubyinstaller/wiki/Development-Kit)

# php - 为季度报告选择年份

> ID：15311149
> 
> 赞同：-3
> 
> 时间：2013-03-09T13:21:17.017
> 
> 标签：php, mysql

我正在处理季度报告，我可以选择要显示的季度。如果我选择第二季度，那么它将显示。问题是，我希望我的报告具体。例如。我有一个下拉列表，您可以选择一年。之后，如果我选择 2011，在我选择它之后，现在我可以选择 2011 年的第一、二、三或四季度。我应该怎么做？这是我的代码。

```
<html> 

    Select Year:    <select name="sortyear" id="sortyear">
                                            <option value="2010">2010</option>
                    <option value="2011">2011</option>
                    <option value="2012">2012</option>
                    <option value="2013">2013</option>
                </select>
    <input type = "submit" name = "submit" value = "Select">
</form>
Select year:
<select name="quarter" id="quarter">
<option value="1">1st Quarter</option>
<option value="2">2nd Quarter</option>
<option value="3">3rd Quarter</option>
<option value="4">4th Quarter</option>

</select>
    <input type="submit" name="submit" value="Go">

            <?          

            if($_POST)
            {

$result=mysql_query("SELECT enrollee_info.*, payments.*  FROM enrollee_info INNER JOIN payments ON payments.enrollee_id = enrollee_info.e_id  WHERE    payments.payment_status='Paid'  AND QUARTER(payments.entrydate)='".$quarter."'"); 

             ?>

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:29:13.793

首先，这部分 HTML 是不正确的（表单中不能有表单）：

```
 <form action="" id="userLocation" method="post">    
    <form name="sample" method="POST">
        <form method="post" id="category" name="category"> 
        Select Year:    <select name="sortyear" id="sortyear">
                                                <option value="2010">2010</option>
                        <option value="2011">2011</option>
                        <option value="2012">2012</option>
                        <option value="2013">2013</option>
                    </select>
        <input type = "submit" name = "submit" value = "Select">
    </form>
    Select year:
    <select name="quarter" id="quarter">
    <option value="1">1st Quarter</option>
    <option value="2">2nd Quarter</option>
    <option value="3">3rd Quarter</option>
    <option value="4">4th Quarter</option>

    </select>
        <input type="submit" name="submit" value="Go"> 
```

您应该只具有以下内容：

```
<form action="some URL" method="POST">
    Select Year:    <select name="sortyear" id="sortyear">
                                            <option value="2010">2010</option>
                    <option value="2011">2011</option>
                    <option value="2012">2012</option>
                    <option value="2013">2013</option>
                </select>

Select Quater:
<select name="quarter" id="quarter">
<option value="1">1st Quarter</option>
<option value="2">2nd Quarter</option>
<option value="3">3rd Quarter</option>
<option value="4">4th Quarter</option>

</select>
    <input type="submit" name="submit" value="Go">

</form> 
```

# sql - 在两个表上创建一个视图，其中一个表中的数据与第二个表的行号匹配

> ID：15311156
> 
> 赞同：1
> 
> 时间：2013-03-09T13:21:58.203
> 
> 标签：sql

我有两个表 T1 和 T2。T1 包含五列，它的数据指向表 t2 中的行（T2 只有一列）。如何创建一个视图，显示 T1 中的列和 T2 中的数据。

例如

T1

```
C1  C2  C3  C4  C5
2   4   3   1   5 
```

T2

```
 C6 
 1001
 1002
 1003
 1004
 1005 
```

我想创建一个类似的视图：

V1

```
C1  C2  C3  C4  C5
1002    1004    1003    1001    1005 
```

注意：两个表中没有共同的列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:13:44.127

这是你的问题：

> “T2 只有一列”

这意味着`select * from t2`可以按任何顺序返回行，因为您没有排序标准。您的问题假定`2`将始终指示 T2 表中的第二行，但事实并非如此。

# javascript - JavaScript“提升”

> ID：15311158
> 
> 赞同：86
> 
> 时间：2013-03-09T13:22:14.927
> 
> 标签：javascript, hoisting

我遇到了 JavaScript 的“提升”，但我没有弄清楚这段代码是如何真正起作用的：

```
var a = 1;

function b() {
    a = 10;
    return;

    function a() {}
}

b();
alert(a); 
```

我知道像 ( `function a() {}`) 这样的函数声明将被提升到函数`b`范围的顶部，但它不应该覆盖的值`a`（因为函数声明覆盖变量声明而不是变量初始化）所以我希望警报的值会是 10 而不是 1！

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-03-09T13:26:06.253

1.  全局`a`设置为`1`
2.  `b()`叫做
3.  `function a() {}`被提升并创建一个*局部*变量`a`来掩盖全局`a`
4.  本地`a`设置为`10`（覆盖函数`a`）
5.  全局`a`（仍然`1`）被警告

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-09T13:35:05.220

这是因为此示例中的编译/解释顺序有些误导。该`function a () {}`行在函数的任何其余部分执行之前被解释，所以在函数的最开始，`a`它的值是`function a () {}`. 当您将其重新分配给 时，您将在 function 的本地范围内`10`重新分配值，然后在您返回时将其丢弃，将原始值留在全局范围内。`a``b()``a = 1`

`alert()`您可以通过在适当的地方放置 s 或类似的东西来验证这一点，以查看`a`各个点的值是什么。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-09T16:40:11.690

> (1) JavaScript 没有块语句作用域；相反，它将是块所在的代码本地的。
> 
> (2) Javascript 在函数范围内声明变量，这意味着在函数中声明的变量在该函数***中的任何位置都可用，甚至在它们被赋值之前***。
> 
> (3) 在函数体内，局部变量优先于同名的全局变量。**如果你声明一个与全局变量同名的局部变量或函数参数，你*实际上隐藏了全局变量***。

你的代码是一样的：（*阅读评论*）

```
<script>
var a = 1;          //global a = 1
function b() {
    a = 10;         
    var a = 20;     //local a = 20
}
b();
alert(a);           //global a  = 1
</script> 
```

参考：
（1）[*JavaScript变量作用域：*](http://docstore.mik.ua/orelly/webprog/jscript/ch04_03.htm)
（2） [*Javascript提升的危险例子*](http://thecomputersarewinning.com/post/a-dangerous-example-of-javascript-hoisting/)
（3）[*变量作用域*](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Variable_Scope)

所以在你的代码中：

```
var a = 1;          //global a = 1  
function b() {
    a = 10;         
    return;
    function a() {} //local 
}
b();
alert(a);           //global a = 1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-17T13:30:17.750

1.  首先提升函数声明`function a(){}`，因此在本地范围内`a`创建。
2.  如果您有两个同名变量（一个在全局另一个在本地），则局部变量始终优先于全局变量。
3.  设置时`a=10`，您设置的是局部变量`a`，而不是全局变量。

因此，全局变量的值保持不变，你会得到，alerted 1

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-06T05:30:28.460

[当我读到你做JavaScript Scoping and Hoisting](http://www.adequatelygood.com/JavaScript-Scoping-and-Hoisting.html)的同一篇文章时，我也很困惑，因为作者从未展示过这两个开放示例代码在编译器中的解释。

这是您提供的示例，以及页面上的第二个示例：

```
var a = 1;
function b() {
    function a() {} // declares 'a' as a function, which is always local
    a = 10;
    return;
}
b();
alert(a); 
```

这是页面上的第一个示例：

```
var foo = 1;
function bar() {
    var foo; // a new local 'foo' variable
    if (!foo) {
        foo = 10;
    }
    alert(foo);
}
bar(); 
```

希望这可以帮助

# asp.net - 如何通过从下拉列表中选择来显示选择表单

> ID：15311160
> 
> 赞同：0
> 
> 时间：2013-03-09T13:22:32.250
> 
> 标签：asp.net, c#-4.0, drop-down-menu, dropdownbox

我想在从下拉列表中选择值时显示不同的表单页面。我有一个两个网页，首先我有下拉列表，在第二页上我有一个表单，当我从下拉列表中选择值时，我想要一个表单，因为该值会出现我该怎么做，任何人都可以帮助我.

第一种形式的aspx代码：

```
<form id="form1" runat="server">
   <div style="margin-left: 80px">
       <asp:Label ID="lblPortal" runat="server" Text="Select Portal"></asp:Label>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
   <asp:DropDownList ID="ddlPortal" runat="server" AutoPostBack="True" 
       onselectedindexchanged="MyPage">
       <asp:ListItem>None</asp:ListItem>
       <asp:ListItem>TRAVELONG</asp:ListItem>
       <asp:ListItem>ONETRAVEL</asp:ListItem>
       <asp:ListItem>.UK</asp:ListItem>
       <asp:ListItem>.CA-YYZ</asp:ListItem>
       <asp:ListItem>.CA-YVR</asp:ListItem>
   </asp:DropDownList>
   </div> 
```

第二种aspx形式：

```
<div style="margin-left: 80px">
   <asp:Label ID="lblPortal" runat="server" Text="Select Portal"></asp:Label>

   <asp:DropDownList ID="ddlPortal" runat="server" AutoPostBack="True" 
       onselectedindexchanged="MyPage_Indexchange">
       <asp:ListItem>None</asp:ListItem>
       <asp:ListItem>TRAVELONG</asp:ListItem>
       <asp:ListItem>ONETRAVEL</asp:ListItem>
       <asp:ListItem>.UK</asp:ListItem>
       <asp:ListItem>.CA-YYZ</asp:ListItem>
       <asp:ListItem>.CA-YVR</asp:ListItem>
   </asp:DropDownList>
   <asp:ValidationSummary ID="vdm" runat="server" ForeColor="Red" />
<table class="style1">
       <tr>
           <td class="style13">
               <asp:Label ID="lblTid" runat="server" Text="TID"></asp:Label>
           </td>
           <td class="style5">
               <asp:TextBox ID="tbTid" runat="server"></asp:TextBox>
           </td>
           <td class="style4">
               <asp:RequiredFieldValidator ID="rfvTid" runat="server" 
                   ControlToValidate="tbTid" ErrorMessage="Enter Tid" Font-Bold="True" 
                   ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style5">
               <asp:Label ID="lblUnusedTicketAmount" runat="server" 
                   Text="Unused Ticket Amount"></asp:Label>
           </td>
           <td class="style11">
               <asp:TextBox ID="tbUnusedTicketAmount" runat="server"></asp:TextBox>
           </td>
           <td>
               <asp:RequiredFieldValidator ID="rfvUnusedTicketAmount" runat="server" 
                   ControlToValidate="tbUnusedTicketAmount" ErrorMessage="Enter Amount" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td>
               <asp:DropDownList ID="ddlUnusedAmount" runat="server">
                   <asp:ListItem>USD</asp:ListItem>
                   <asp:ListItem>CAD</asp:ListItem>
                   <asp:ListItem>GBP</asp:ListItem>
               </asp:DropDownList>
           </td>
       </tr>
       <tr>
           <td class="style14">
               <asp:Label ID="lblPNR" runat="server" Text="PNR"></asp:Label>
           </td>
           <td class="style9">
               <asp:TextBox ID="tbPNR" runat="server"></asp:TextBox>
           </td>
           <td class="style8">
               <asp:RequiredFieldValidator ID="rfvPNR" runat="server" 
                   ControlToValidate="tbPNR" ErrorMessage="Enter PNR" Font-Bold="True" 
                   ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style9">
               <asp:Label ID="lblAirlinePenality" runat="server" Text="Airline Penality"></asp:Label>
           </td>
           <td class="style12">
               <asp:TextBox ID="tbAirlinePenality" runat="server"></asp:TextBox>
           </td>
           <td class="style10">
               <asp:RequiredFieldValidator ID="rfvAirlinePenality" runat="server" 
                   ControlToValidate="tbAirlinePenality" ErrorMessage="Enter Penality" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style10">
               <asp:DropDownList ID="ddlAirlinePenality" runat="server">
                   <asp:ListItem>USD</asp:ListItem>
                   <asp:ListItem>CAD</asp:ListItem>
                   <asp:ListItem>GBP</asp:ListItem>
               </asp:DropDownList>
           </td>
       </tr>
       <tr>
           <td class="style13">
               <asp:Label ID="lblTicketNumber" runat="server" Text="Ticket Number"></asp:Label>
           </td>
           <td class="style5">
               <asp:TextBox ID="tbTicketNumber" runat="server"></asp:TextBox>
           </td>
           <td class="style4">
               <asp:RequiredFieldValidator ID="rfvTicketNumber" runat="server" 
                   ControlToValidate="tbTicketNumber" ErrorMessage="Enter ESAC" Font-Bold="True" 
                   ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style5">
               <asp:Label ID="lblNetRefundProcess" runat="server" Text="Net Refund Process"></asp:Label>
           </td>
           <td class="style11">
               <asp:TextBox ID="tbNetRefundProcess" runat="server"></asp:TextBox>
           </td>
           <td>
               <asp:RequiredFieldValidator ID="rfvNetRefundProcess" runat="server" 
                   ControlToValidate="tbNetRefundProcess" ErrorMessage="RequiredFieldValidator" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td>
               <asp:DropDownList ID="ddlNetRefundProcess" runat="server">
                   <asp:ListItem>USD</asp:ListItem>
                   <asp:ListItem>CAD</asp:ListItem>
                   <asp:ListItem>GBP</asp:ListItem>
               </asp:DropDownList>
           </td>
       </tr>
       <tr>
           <td class="style13">
               <asp:Label ID="lblESACCode" runat="server" Text="ESAC Code"></asp:Label>
           </td>
           <td class="style5">
               <asp:TextBox ID="tbESACCode" runat="server"></asp:TextBox>
           </td>
           <td class="style4">
               <asp:RequiredFieldValidator ID="rfvESACCode" runat="server" 
                   ControlToValidate="tbESACCode" ErrorMessage="Enter ESAC code" Font-Bold="True" 
                   ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style5">
               <asp:Label ID="lblRefundableCommision" runat="server" 
                   Text="Refundable Commission"></asp:Label>
           </td>
           <td class="style11">
               <asp:TextBox ID="tbRefundableCommision" runat="server"></asp:TextBox>
           </td>
           <td>
               <asp:RequiredFieldValidator ID="rfvRefundableCommission" runat="server" 
                   ControlToValidate="tbRefundableCommision" ErrorMessage="RequiredFieldValidator" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td>
               <asp:DropDownList ID="ddlRefundableCommission" runat="server">
                   <asp:ListItem>USD</asp:ListItem>
                   <asp:ListItem>CAD</asp:ListItem>
                   <asp:ListItem>GBP</asp:ListItem>
               </asp:DropDownList>
           </td>
       </tr>
       <tr>
           <td class="style13">
               <asp:Label ID="lblWaiverCode" runat="server" Text="Waiver Code"></asp:Label>
           </td>
           <td class="style5">
               <asp:TextBox ID="tbWaiverCode" runat="server"></asp:TextBox>
           </td>
           <td class="style4">
               <asp:RequiredFieldValidator ID="rfvWaiverCode" runat="server" 
                   ControlToValidate="tbWaiverCode" ErrorMessage="Enter Waiver Code" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style5">
               <asp:Label ID="lblCouponRefunded" runat="server" Text="Coupon Refunded"></asp:Label>
           </td>
           <td class="style11">
               <asp:TextBox ID="tbCouponRefund" runat="server"></asp:TextBox>
           </td>
           <td>
               <asp:RequiredFieldValidator ID="rfvCouponRefunded" runat="server" 
                   ControlToValidate="tbCouponRefund" ErrorMessage="Enter Coupon Refund" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td>
               &nbsp;</td>
       </tr>
       <tr>
           <td class="style13">
               <asp:Label ID="Label7" runat="server" Text="Remarks"></asp:Label>
           </td>
           <td class="style5">
               <asp:TextBox ID="tbRemarks" runat="server" TextMode="MultiLine"></asp:TextBox>
           </td>
           <td class="style4">
               <asp:RequiredFieldValidator ID="rfvRemarks" runat="server" 
                   ControlToValidate="tbRemarks" ErrorMessage="Enter Remarks" Font-Bold="True" 
                   ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style5">
               <asp:Label ID="lblRefundType" runat="server" Text="Refund Type"></asp:Label>
           </td>
           <td class="style11">
               <asp:DropDownList ID="ddlRefundType" runat="server">
                   <asp:ListItem>Full</asp:ListItem>
                   <asp:ListItem>Partial</asp:ListItem>
               </asp:DropDownList>
           </td>
           <td>
               <asp:RequiredFieldValidator ID="rfvRefundType" runat="server" 
                   ControlToValidate="ddlRefundType" ErrorMessage="Select Refund Type" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td>
               &nbsp;</td>
       </tr>
       <tr>
           <td class="style13" colspan="7">
               &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
               &nbsp;<asp:Button ID="Button1" runat="server" onclick="Button1_Click" 
                   Text="Submit" />
           </td>
       </tr>
   </table> 
   </div> 
```

第二种形式的 .cs 文件代码：

```
protected void Page_Load(object sender, EventArgs e)
{

}
protected void MyPage_Indexchange(object sender, EventArgs e)
{
    Response.Redirect(@"~/Default.aspx");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:54:48.693

这可以通过使用称为[跨页发布](http://msdn.microsoft.com/en-us/library/ms178139%28v=vs.100%29.aspx)的众所周知的技术来完成。简而言之：您将帖子返回到另一个页面，您可以在其中访问原始页面的控件。

不幸的是，`DropDownList`没有内置此功能（例如`Button`具有属性的控件[`PostBackUrl`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.postbackurl.aspx)），但[`PostBackOptions`](http://msdn.microsoft.com/en-us/library/system.web.ui.postbackoptions.aspx)可以进行救援。

Form1（假设这是`~\default.aspx`）：

```
protected void Page_Load(object sender, EventArgs e)
{
    var pbo = new PostBackOptions(ddlPortal);
    pbo.ActionUrl = "default2.aspx";
    pbo.AutoPostBack = true;
    ddlPortal.Attributes["onchange"] = ClientScript.GetPostBackEventReference(pbo);
} 
```

然后添加：

```
<%@ PreviousPageType VirtualPath="~/default.aspx" %> 
```

到第二种形式（假设，这是`default2.aspx`），并将 next 添加到第二页的`Page_Load`事件处理程序：

```
if (PreviousPage != null && PreviousPage.IsCrossPagePostBack)
{
    var ddlPortal = (DropDownList)PreviousPage.FindControl("ddlPortal");
    var selectedValue = ddlPortal.SelectedValue;
    // do something with the value from the previous page
} 
```

这很容易，不是吗？

# wordpress - .htaccess RewriteRule 附加旧的 Wordpress 目录路径

> ID：15311162
> 
> 赞同：0
> 
> 时间：2013-03-09T13:22:37.423
> 
> 标签：wordpress, apache, .htaccess, mod-rewrite, rewrite

带有 Wordpress 的 Debian/Apache VPS。我试图使用此代码将所有“www”网址重定向到非 www 地址：

```
# Redirect if www.site.net (case-insensitive) to site.net
RewriteCond %{HTTP_HOST} ^www\.site\.net [NC]
RewriteRule (.*) http://site.net/$1 [R=301,L,NC] 
```

但这会意外地将**www.site.net**重定向到**site.net/site.net**和 **www.site.net/example**到**site.net/site.net/example** — 我停用了所有 WP 插件以再次检查但没有效果。

以前我的 WP 安装路径是 /var/www/site.net/ 但我把它移到 /var/www/ 我的 /etc/apache2/sites-available/site.net 看起来像这样：

```
<VirtualHost *:80>
 ServerName site.net
 ServerAlias www.site.net
 DocumentRoot /var/www
 DirectoryIndex index.php
 <Directory /var/www/>
   Options FollowSymLinks
   AllowOverride All
 </Directory>
 ErrorLog ${APACHE_LOG_DIR}/error.log
 CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost> 
```

请告知，我需要做什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:33:11.493

您最好的选择是在您的配置文件中创建一个新的虚拟主机来进行重定向。它比使用 mod_rewrite 更有效，也更容易阅读正在发生的事情。

```
# to do the redirection
<VirtualHost *:80>
  ServerName www.site.net
  RedirectMatch permanent (.*) http://site.net$1
</VirtualHost>

# actual website
<VirtualHost *:80>
  ServerName site.net
  DocumentRoot /var/www/
  # .. etc .. 
</VirtualHost> 
```

# .net - 在 .NET 中使用 C++/CLI 实用程序：

> ID：15311170
> 
> 赞同：3
> 
> 时间：2013-03-09T13:23:18.117
> 
> 标签：.net, pointers, c++-cli, wrapper

我一直在开发一些 DLL 实用程序项目，以避免在其他项目中重复代码，以及我尚未尝试过的功能、算法和测试。其中一个项目是 C++/CLI，我仍在学习的语言，所以这个问题可能听起来很愚蠢。因为我有 C++/CLI、F# 和 C# 中的库项目，所以我使用 C# 控制台应用程序来测试它们。它不适用于 C++/CLI 项目，因此我创建了一个 C++/CLI 控制台测试项目。它从来没有用过，当我更改原始 DLL C++ 的名称时，引用没有更新。当我（最终）发现问题时，我更改了 .vcxproj 文件，使 using 指令成为可能，作为一种方法，但不适用于模板类`Apont<typename T>`，它是某种内部指针，但与 .NET 类型不同`System::IntPtr`, 使用类型的值`T*`而不是`void*`.

我还发现（从本网站的一篇文章中）我必须在项目内部使用我想在外部使用的东西，否则这些东西想要在元数据中发出。因此，为此目的，我在静态实用程序中有一个无用的静态方法：

```
static void Funcionalidades()
{
    int i = 10;

    Apont<int> a2 = Apont<int>(i);            // stack
    Apont<int> ^a3 = gcnew Apont<int>(i);     // heap CLR

} 
```

尽管如此，它还是行不通。这是我在 C++/CLI 测试项目中的主要方法：

```
int main(array<System::String ^> ^args)
{
    int y(10);
    Apont<int> a = Apont<int>(y);

    Console::ReadKey();
    return 0;
} 
```

以下是错误（我知道它可以用智能感知错误进行编译，但无论如何我都会展示它们）：

```
error C2065: 'Apont' : undeclared identifier
error C2062: type 'int' unexpected
IntelliSense: identifier "Apont" is undefined
IntelliSense: type name is not allowed
IntelliSense: expected an expression 
```

为什么会出现这些错误？我该如何纠正它们？

我将不胜感激任何回答或回复。

## 编辑（澄清）：

*   这些错误不会发生在`Funcionalidades`DLL 项目中的方法上，而是发生在测试项目中的主方法上，即 DLL 之外。
*   我将所有内容都写在头文件中；我的意思是不是每个头文件都有各自的 .cpp 文件，尽管所有头文件都包含在至少一个 .cpp 文件中。
*   更多关于`Apont`：
    *   `Apont`是一个模板（因为在内部使用了 T* 并且“不允许对泛型类型参数进行间接引用”）。
    *   `Apont`有一个复制构造函数，所以`Apont<int> a = Apont<int>(someInt)`应该可以工作；
    *   `Apont<int> a(someInt)`不工作；
    *   `Apont`是某种内部指针；而且我没有发布整个代码，因为它不相关，我必须翻译变量的名称，它可能有我可以轻松修复的错误，但这只会分散你的注意力。

## NTH EDIT（其中'n'是我不知道的数字）：

`Apont`你抱怨了很久的代码：

```
 template<typename T> public ref class Apont sealed : public IDisposable
    {
        bool eliminado;
        T *pointer;

        /*void Dispose(bool tudo)
        {
            if (!eliminado)
            {
                if (tudo)
                {
                    ~Apont();
                }
                else
                {
                    !Apont();
                }
            }
        }*/
        !Apont() // finalizador: limpa os recursos "unmanaged"
        {
            delete pointer;
            pointer = nullptr;
            eliminado = true;
        }

    public:
        Apont(T &valor)
        {
            pointer = &valor;
            eliminado = false;
            ErroSeNulo = false;
            ErroSeEliminado = true;
        }
        Apont(T &valor, bool erroSeEliminado, bool erroSeNulo)
        {
            pointer = &valor;
            eliminado = false;
            ErroSeEliminado = erroSeEliminado;
            ErroSeNulo = erroSeNulo;
        }
        Apont(Apont<T> %outroApont)
        {
            this->pointer = &outroApont
        }

        property bool ErroSeEliminado;
        property bool ErroSeNulo;
        property T Valor
        {
            T get()
            {
                if (pointer != nullptr)             
                    return *pointer;
                else if (eliminado && ErroSeEliminado)
                    throw gcnew ObjectDisposedException("O objeto já foi pelo menos parcialmente eliminadao.");
                else if (ErroSeNulo)
                    throw gcnew NullReferenceException();
                else
                    return 0;
            }
        }

        /*
        Apont operator ~(/*T valor* /)
        {
            // este operador tem de ser declarado fora desta classe 
        }*/
        T operator !(/*Apont apont*/)
        {
            return Valor;
        }
        void operator =(Apont<T> outroApont)
        {
            pointer = outroApont;
            ErroSeEliminado = outroApont.ErroSeEliminado;
            ErroSeNulo = outroApont.ErroSeNulo;             
        }
        template<typename U> void operator =(Apont<U> outroApont)
        {
            pointer = safe_cast<T>(outroApont.pointer);
            ErroSeEliminado = safe_cast<T>(outroApont.ErroSeEliminado);
            ErroSeNulo = safe_cast<T>(outroApont.ErroSeNulo);
        }
        /*
        void operator =(T *&outroPointer)
        {
            pointer = outroPointer;
        }
        template<typename U> void operator =(U *&outroPointer)
        {
            pointer = safe_cast<T>(outroPointer);
        }*/
        void operator =(T *outroPointer)
        {
            pointer = outroPointer;
        }
        template<typename U> void operator =(U *outroPointer)
        {
            pointer = safe_cast<T>(outroPointer);
        }

        ~Apont() // destruidor: limpa todos os recursos
        {               
            this->!Apont();
        }

        // Error C2605: 'Dispose': this method is reserved within a managed class
        // O código será gerado automaticamente a partir do finalizador e do destrutor
    };

    template<typename T> Apont<T> operator ~(T &valor)
    {
        return gcnew Apont<T>(valor);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T05:51:53.193

您出现的错误通常是缺少类声明。这通常发生在标头中的代码被标头保护之后。

**这是怎么发生的？**

如果您在 Funcionalidades 中包含 Apont 标头，然后在 Apont 中包含 Funcionalidades 标头，那么您就有麻烦了。发生这种情况是因为 Funcionalidades 标头缺少 Apont 声明，以防您在包含 Funcionalidades 之前将 Apont 包含在您的 main 中。

然后你第一次包含 Apont，它将启用标题保护。然后它将包括Funcionalidades，其中也包括Apont。因为已经启用了标头保护功能 Funcionalidades 标头将没有 Apont 声明。同时 Apont 的声明甚至还没有在 Apont 的相应头文件中开始。在这里，由于 main 中的这个问题，您无法编译，因为在库编译时您没有这样的依赖项。

**我如何解决它？**

在 cpp 代码中的 Funcionalidades 实现中移动 Apont 的使用，保持头文件没有依赖关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:20:51.753

*我必须在项目内部使用我想在外部使用的东西*

如果这是真的，你有没有在任何地方调用过静态函数？未调用的函数可能会被优化掉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T16:33:49.827

它只是抱怨它不知道“Apont”。我也不知道它是什么，你没有发布它的代码。只需声明它的任意版本：

```
generic<typename T>
public ref class Apont {
    T value;
public:
    Apont(T init) : value(init) {}
};

static void Funcionalidades()
{
    int i = 10;

    Apont<int> a2(i);                      // stack
    Apont<int> ^a3 = gcnew Apont<int>(i);  // heap CLR

} 
```

请注意“a2”的更改代码，避免引用类型的复制构造函数。再次主要：

```
 Apont<int> a(y); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T05:39:09.963

名称空间的 using 语句是否会丢失？确保您的 main 方法中有正确的 using 语句。还要确保您添加了一个引用，以便包含 main 方法的项目引用包含 Apont 的项目。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T07:25:41.890

很抱歉花了这么长时间才回复您：我有几点可以帮助您解决问题。- 模板类被声明为[密封](http://msdn.microsoft.com/en-us/library/vstudio/0w2w91tf%28v=vs.100%29.aspx)：这意味着您不能将其用作基类（与您使用模板类的主要原因相反）。至少它不需要，所以它可能值得删除。- 其次，更重要的是，在 C++ 中，模板是在编译时评估的，因此，由于您没有声明指定的实例，因此不会评估 Apont 并且它不会编译到 DLL 中。要启用特定版本的模板类，您可以在`UtilCMM.h`文件末尾添加以下内容：

*   `class template Apont<int>;`
*   `class template Apont<float>;`
*   `class template Apont<double>;`

这是因为在 C++ 中，模板在编译时由预处理器扩展，就像宏一样，但是只有显式使用的版本才会在编译时处理：这是一个很大的优势和劣势。我一直找到的解决方案（与其他 C++ 程序员一致）是：

*   明确实例化您需要在 dll 中导出的版本
*   提供带有模板的头文件，然后您将代码分发给的任何人都可以使用该文件

如果还有其他方法可以达到相同的效果，我还没有遇到过，很想知道，唉，这些都是模板的局限性。

那么当您编译时，您应该拥有三个可用的特定版本。只需为您希望包含在 DLL 中的每种类型添加更多内容。抱歉，我之前没有发现这一点，当我看到完整的代码时，他们都跳了出来，现在如果我可以让项目编译，我可以自己尝试更改（我的 VS 版本不加载你的 vcproj 文件版本，典型的）。

# commit - 集成在 Visual Studio 2010 中的 Ankhsvn 无法连接到网络驱动器上的 SVN 存储库

> ID：15311176
> 
> 赞同：6
> 
> 时间：2013-03-09T13:23:46.537
> 
> 标签：commit, ankhsvn, network-drive

我在提交/更新前几天在家中的网络驱动器[（其中之一）上设置的 SVN 存储库时遇到问题。](http://www.amazon.co.uk/Iomega-34767-Drive-Cloud-Edition/dp/B004S133NI/ref=sr_1_5?s=computers&ie=UTF8&qid=1362835237&sr=1-5)

我指的是使用 url 的存储库：

```
file://mynetworkdrive/Documents/subversion/code/sln/trunk/MyWebsite/trunk/Home 
```

当我从 VS 2010 的“解决方案”上下文菜单中选择“更新”或“提交”选项时，会出现一个对话框窗口，显示如下所示的异常：

![在此处输入图像描述](../Images/ad39cac67adfce296f699c02038419d8.png)

```
SharpSvn.SvnRepositoryIOException: Commit failed (details follow): ---> SharpSvn.SvnRepositoryIOException: Unable to connect to a repository at URL 'file://mynetworkdrive/Documents/subversion/code/sln/trunk/MyWebsite/trunk/Home' ---> SharpSvn.SvnRepositoryIOException: Unable to open an ra_local session to URL ---> SharpSvn.SvnRepositoryIOException: Unable to open repository 'file://mynetworkdrive/Documents/subversion/code/sln/trunk/MyWebsite/trunk/Home' ---> SharpSvn.SvnSystemException: Can't open file '\\mynetworkdrive\Documents\subversion\code\sln\trunk\MyWebsite\trunk\Home\format': Logon failure: unknown user name or bad password.  
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at SharpSvn.SvnClientArgs.HandleResult(SvnClientContext client, SvnException error, Object targets)
   at SharpSvn.SvnClientArgs.HandleResult(SvnClientContext client, svn_error_t* error, Object targets)
   at SharpSvn.SvnClient.Commit(ICollection`1 paths, SvnCommitArgs args, SvnCommitResult& result)
   at Ankh.Services.PendingChanges.PendingChangeHandler.<>c__DisplayClass1b.<Commit_CommitToRepository>b__19(Object sender, ProgressWorkerArgs e) 
```

当我第一次设置它时，我可以在 Visual Studio 中与存储库进行良好的通信。

我可以使用 Windows 资源管理器浏览网络驱动器的内容。

我可以在 Visual Studio 之外使用 TortoiseSVN 来更新或提交到我的存储库。

但是，这很痛苦，我希望 Ankhsvn 与 Visual Studio 的集成可供使用。

似乎 Visual Studio 忘记了访问 URL 所需的用户名/密码。我找不到替换或强制提示输入凭据的方法。

我还改为以管理员身份运行 Visual Studio 2010，以便可以使用 IIS 7，我想知道这是否与它有关？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T13:05:28.477

用评论中的知识重写我的答案到我的原始回复。

您以管理权限运行 Visual Studio。这使得应用程序 (VS) 在其自己的会话中运行，该会话具有自己的网络映射。然后 Subversion 尝试使用尚未创建的网络映射连接到 file:/// 存储库。

这种情况下的解决方案是确保该管理用户也存在网络映射。您可以通过 File->Open 浏览到文件夹然后传递凭据来执行此操作。

另一种选择是创建一个批处理文件，该文件创建网络映射 (net add)，然后启动 Visual Studio。这将避免每次都重新应用相同的技巧。

另一种选择是通过 http(s) 或 svn:// 连接到 Subversion 服务器。

# c# - 序列化具有相同属性变体的对象

> ID：15311177
> 
> 赞同：0
> 
> 时间：2013-03-09T13:23:56.570
> 
> 标签：c#, xml, serialization

我有一个可以序列化对象的方法。

例如。

```
List<Titles> lstCrmTitleSer = new List<Titles>(); 
```

我遍历一组字符串标题，并将其添加到类型 Titles 的列表中以序列化它们。

```
foreach (var ls in lstCrmTitles)
{
    Titles t = new Titles();

    t.title = ls;
    lstCrmTitleSer.Add(t);
} 
```

这是我序列化对象的对象和方法。

```
static public void SerializeToXMLCollection(List<Titles> trainingTitles)
{
    XmlSerializer serializer = new XmlSerializer(typeof(List<Titles>));
    string path = string.Concat(@"C:\Users\Arian\Desktop\Titles.xml");
    Console.WriteLine(path);
    TextWriter textWriter = new StreamWriter(path);
    serializer.Serialize(textWriter, trainingTitles);
    textWriter.Close();
}

public string title { get; set; } 
```

事情是我的 XML 文件显示如下

```
<Titles>
      <title>title a</title>
</Titles>
<Titles>
      <title>title b</title>
</Titles>   
<Titles>
      <title>title c</title>
</Titles> 
```

如果我的 xml 显示如下，我想要什么

```
<Titles>
       <title>title a</title>
       <title>title b</title>
       <title>title c</title>
</Titles> 
```

如何调整我的代码以实现上述结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:37:54.917

第一的。这是一个通用的扩展方法供您使用。我几年前写过它，它会序列化任何东西：

```
/// <summary>
/// <para>Serializes the specified System.Object and writes the XML document</para>
/// <para>to the specified file.</para>
/// </summary>
/// <typeparam name="T">This item's type</typeparam>
/// <param name="item">This item</param>
/// <param name="fileName">The file to which you want to write.</param>
/// <returns>true if successful, otherwise false.</returns>
public static bool XmlSerialize<T>(this T item, string fileName)
{
    return item.XmlSerialize(fileName, true);
}

/// <summary>
/// <para>Serializes the specified System.Object and writes the XML document</para>
/// <para>to the specified file.</para>
/// </summary>
/// <typeparam name="T">This item's type</typeparam>
/// <param name="item">This item</param>
/// <param name="fileName">The file to which you want to write.</param>
/// <param name="removeNamespaces">
///     <para>Specify whether to remove xml namespaces.</para>para>
///     <para>If your object has any XmlInclude attributes, then set this to false</para>
/// </param>
/// <returns>true if successful, otherwise false.</returns>
public static bool XmlSerialize<T>(this T item, string fileName, bool removeNamespaces)
{
    object locker = new object();

    XmlSerializerNamespaces xmlns = new XmlSerializerNamespaces();
    xmlns.Add(string.Empty, string.Empty);

    XmlSerializer xmlSerializer = new XmlSerializer(typeof(T));

    XmlWriterSettings settings = new XmlWriterSettings();
    settings.Indent = true;
    settings.OmitXmlDeclaration = true;

    lock (locker)
    {
        using (XmlWriter writer = XmlWriter.Create(fileName, settings))
        {
            if (removeNamespaces)
            {
                xmlSerializer.Serialize(writer, item, xmlns);
            }
            else { xmlSerializer.Serialize(writer, item); }

            writer.Close();
        }
    }

    return true;
}

/// <summary>
/// Serializes the specified System.Object and returns the serialized XML
/// </summary>
/// <typeparam name="T">This item's type</typeparam>
/// <param name="item">This item</param>
/// <param name="removeNamespaces">
///     <para>Specify whether to remove xml namespaces.</para>para>
///     <para>If your object has any XmlInclude attributes, then set this to false</para>
/// </param>
/// <returns>Serialized XML for specified System.Object</returns>
public static string XmlSerialize<T>(this T item, bool removeNamespaces = true)
{
    object locker = new object();
    XmlSerializerNamespaces xmlns = new XmlSerializerNamespaces();
    xmlns.Add(string.Empty, string.Empty);

    XmlSerializer xmlSerializer = new XmlSerializer(typeof(T));

    XmlWriterSettings settings = new XmlWriterSettings();
    settings.Indent = true;
    settings.OmitXmlDeclaration = true;

    lock (locker)
    {
        StringBuilder stringBuilder = new StringBuilder();
        using (StringWriter stringWriter = new StringWriter(stringBuilder))
        {
            using (XmlWriter xmlWriter = XmlWriter.Create(stringWriter, settings))
            {
                if (removeNamespaces)
                {
                    xmlSerializer.Serialize(xmlWriter, item, xmlns);
                }
                else { xmlSerializer.Serialize(xmlWriter, item); }

                return stringBuilder.ToString();
            }
        }
    }
} 
```

第二。像这样使用它：

```
internal class Program
{
    private static void Main(string[] args)
    {
        var list = new MyObject();
        list.Titles.Add("title1");
        list.Titles.Add("title2");
        list.Titles.Add("title3");

        string serialized = list.XmlSerialize();

        //obviously here you would save to disk or whatever
        Console.WriteLine(serialized);
        Console.ReadLine();
    }
}

[XmlRoot("Titles")]
public class MyObject
{
    [XmlElement("title")]
    public List<string> Titles { get; set; }

    public MyObject()
    {
        Titles = new List<string>();
    }
} 
```

第三..该代码很讨厌。即使有上述建议，我仍然认为您需要进行一些认真的重构。

祝你好运

**奖金**

将字符串反序列化为您的类型的扩展：

```
/// <summary>
/// Deserializes the XML data contained by the specified System.String
/// </summary>
/// <typeparam name="T">The type of System.Object to be deserialized</typeparam>
/// <param name="s">The System.String containing XML data</param>
/// <returns>The System.Object being deserialized.</returns>
public static T XmlDeserialize<T>(this string s)
{
    if (string.IsNullOrEmpty(s))
    {
        return default(T);
    }

    var locker = new object();
    var stringReader = new StringReader(s);
    var reader = new XmlTextReader(stringReader);
    try
    {
        var xmlSerializer = new XmlSerializer(typeof(T));
        lock (locker)
        {
            var item = (T)xmlSerializer.Deserialize(reader);
            reader.Close();
            return item;
        }
    }
    catch
    {
        return default(T);
    }
    finally
    {
        reader.Close();
    }
} 
```

像这样使用它：

```
var myObject = someSerializedString.XmlDeserialize<MyObject>() 
```

# javascript - 使用 jquery 将表拉入 iframe

> ID：15311183
> 
> 赞同：1
> 
> 时间：2013-03-09T13:25:07.273
> 
> 标签：javascript, jquery

嗨，昨天问了一个类似的问题，但就在这里。

首先：**所有数据都在我的域中。所有数据都在同一个域上。加载 iframe 在同一个域上。**谢谢你。

供参考.. 表名是 dactable，div 名是 tablediv（如果你想写一些新的东西和我能理解的标签）。

现在这是我用来拉表的代码。

```
$(window).on('load', function() // wait for load event, so the iframe is fully loaded in
{
  var $iframe = $('iframe'); // assuming only one?  You need to target the right iframe, perahps with iframe[src="/top_list.html"] if that's your only option

  var $contents = $iframe.contents();
  var $main = $contents.find('.main');
  var $tbl = $main.next(); // now we have the table

  $contents.find('*').hide(); // hide everything
  $tbl.show(); // show table and...

  var $parent = $tbl.parent(); // get/show all parents of the tbl

  while($parent.length)
  {
     $parent.show(); // show parent
     $parent = $parent.parent(); // move up the hierarchy
  }
}); 
```

现在我还需要删除某些列。但似乎无法让它做更多的工作。

另外它如何知道要定位哪个表？

```
$('table tr').each(
    function(tr_idx,el){
        $(el).children('td').each(
            function(td_idx,el2){
                //i'm removing first columns..
                if(td_idx == 0){
                    el2.remove();
                }
        });//inner each
});//outer each 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:43:28.067

尝试使用此代码按索引删除行和列。

```
var removeRows(table, rows){
    // mark a row, which should be removed
    $('tr', table).each(function(tr_idx){
        if(rows.indexOf(tr_idx) !== -1){
            // rows contains tr_idx
            $(this).attr("remove");
        }
    });
    // remove marked rows
    $('tr[remove]', table).remove();
},
removeColumns(table, columns){
    // mark a column, which should be removed
    $('tr', table).each(function(tr_idx){
        $('td', this).each(function(td_idx){
            if(columns.indexOf(td_idx) !== -1){
                // columns contains td_idx
                $(this).attr("remove");
            }
        };
    });
    // remove marked columns
    $('td[remove]', table).remove();
};

...
var table = $(something);

// remove rows with indexes 1, 2 and 3
removeRows(table, [1, 2, 3]); 

// remove columns with indexes 0 and 3
removeColumns(table, [0, 3]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T13:45:30.113

使用 jQuery`.load()`将您想要的 html 加载到您选择的 div 中。您甚至可以通过在 url 后指定 #id 来选择要加载的 html 的哪一部分

```
$(function () {

    $('#result').load('/top_list.html #table-id', function () {

        $('#result table tr').each() {
              //remove first td of each row
              $(this).children('td').first().remove();
        });

    });

}); 
```

就是这么简单。一切都在同一个域上也很有帮助

* * *

为了更清楚地说明这一点，我们假设您有下表

```
<table id="table-id">
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
    </tr>
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
    </tr>
</table> 
```

每行的第一个单元格被删除，结果放在一个 div 中

```
<div id="result">
    <table id="table-id">
        <tr>
            <td>2</td>
            <td>3</td>
        </tr>
        <tr>
            <td>2</td>
            <td>3</td>
        </tr>
    </table>
</div> 
```

# android - 如何获取上一次设置的闹钟时间

> ID：15311187
> 
> 赞同：0
> 
> 时间：2013-03-09T13:25:58.527
> 
> 标签：android, alarmmanager

我正在开发一个应用程序，我想在其中显示以前设置的警报视图。从这段代码中，我们可以检查警报是否处于活动状态。但是我们怎样才能得到时间

```
boolean alarmUp = (PendingIntent.getBroadcast(context, 0, 
    new Intent("com.in.pack.MY_UNIQUE_ACTION"), 
    PendingIntent.FLAG_NO_CREATE) != null);

if (alarmUp)
{
    Log.d("Tag", "Alarm is active");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:32:53.323

将警报保存在数据库中。

# java - 使用 pane.getDocument.insert() 在 JEditorPane 中插入图像

> ID：15311188
> 
> 赞同：1
> 
> 时间：2013-03-09T13:26:05.420
> 
> 标签：java, image, swing, jeditorpane

我正在创建一个聊天应用程序，我想将字符串附加到 JEditorPane，所以我使用 JEditorPane.getDocument.insert() 方法来执行此操作：

```
clientListDoc.insertString(clientListDoc.getLength(),image+"-"+name[0]+"\n", null); 
```

但现在我也想显示图像。我已将内容类型设置为 HTML，并使用它：

```
String temp=ClassLoader.getSystemResource("images/away.png").toString();
image="<img src='"+temp+"'></img>"; 
```

但是，如果我使用 insert()，我不会在 JEditorPane 上获得图像，但是当我使用 setText() 时会显示图像。请帮忙！！我想做这两件事！

我认为的一种方法可能是使用 getText 获取以前的字符串并将新字符串附加到该字符串，然后使用 setText() 设置整个字符串，但有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T14:55:20.340

使用该`setText()`方法，它正在为您格式化为 HTML。使用`insertString`，您的标记将转换为文本。查看文档的源 HTML，您会看到**<img src=imagepath>**将是**<img src=imagepath>** .

您需要使用 HTMLDocument 类正确插入图像：

```
import javax.swing.*;
import javax.swing.text.*;
import javax.swing.text.html.*;

class Test {

    public static void main(String[] args) {

        JFrame frame = new JFrame();
        JEditorPane edPane = new JEditorPane(); 

        try {

            edPane.setContentType("text/html");

            System.out.println(edPane.getText());

            HTMLEditorKit hek = new HTMLEditorKit();

            edPane.setEditorKit(hek);

            HTMLDocument doc = (HTMLDocument) edPane.getDocument();

            doc.insertString(0, "Test testing", null);

            Element[] roots = doc.getRootElements();
            Element body = null;
            for( int i = 0; i < roots[0].getElementCount(); i++ ) {
                Element element = roots[0].getElement( i );
                if( element.getAttributes().getAttribute( StyleConstants.NameAttribute ) == HTML.Tag.BODY ) {
                    body = element;
                    break;
                }
            }

            doc.insertAfterEnd(body,"<img src="+ClassLoader.getSystemResource("thumbnail.png").toString()+">");
            System.out.println(edPane.getText());
        } catch(BadLocationException e) {
        } catch (java.io.IOException e) {}

        frame.add(edPane);

        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);

    }

} 
```

# java - Java中的HTTP“部分”获取请求消息

> ID：15311193
> 
> 赞同：2
> 
> 时间：2013-03-09T13:26:26.613
> 
> 标签：java, url, bytearray, httpurlconnection, urlconnection

我需要在 Java 中使用 HTTP“部分获取请求”消息，但在 Internet 上找不到任何答案。

实际上，我知道如何发送“获取”消息，但我不知道如何发送“部分获取”消息。

下面的代码显示了一些信息：

```
 else if(args.length == 0){ // 5 OLACAK
            con.setRequestMethod("HEAD");

            fromURL = new BufferedInputStream(con.getInputStream(), bufSize);
            toFile = new BufferedOutputStream(new FileOutputStream(outputFile), bufSize);

            if(con.getResponseCode() == HttpURLConnection.HTTP_OK){

                byte startRange =  0; //Byte.parseByte(args[3]);
                byte finishRange =  25;//Byte.parseByte(args[4]);

                if(startRange < 0 || finishRange > ((byte)con.getContentLength())
                        || startRange > finishRange){
                    System.out.println("Range is not OK.");
                }else{                     

                ////////////////////////////////////////////////////
                ////////////////////////////////////////////////////
                //
                // I need to send a partial get message here 
                // Range should in between [startRange, finishRange]
                //
                ////////////////////////////////////////////////////
                ////////////////////////////////////////////////////

                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:18:18.693

你的代码到处都是，所以很难弄清楚你在自己的个人研究中的位置。但是让我们假设您已经知道服务器端资源支持范围请求 - 要发送部分 GET 您只需要做两件事：

1.  包括一个`Range:`标题与您正在寻找的范围的开始和结束
2.  处理响应，注意服务器***应***返回“206 - 部分内容”的状态代码

一些伪代码：

```
conn.setRequestMethod("GET");
conn.setDoInput(true);
conn.setDoOutput(true);
conn.addRequestProperty("Range", "bytes=0-25");
BufferedReader reader = new BufferedReader(new InputStreamReader(
        conn.getOutputStream()));
if(conn.getResponseCode() == 206) {
    // process stream here
} 
```

# c# - XmlNodelist 中的 XmlNode

> ID：15311194
> 
> 赞同：0
> 
> 时间：2013-03-09T13:26:49.583
> 
> 标签：c#, xml, xpath, youtube, namespaces

有谁知道错误在哪里？还是将视频名称转换为字符串的更好方法？

```
string text = "<?xml version='1.0' encoding='UTF-8'?><feed xmlns='http://www.w3.org/2005/Atom' xmlns:media='http://search.yahoo.com/mrss/' xmlns:openSearch='http://a9.com/-/spec/opensearchrss/1.0/' xmlns:gd='http://schemas.google.com/g/2005' xmlns:yt='http://gdata.youtube.com/schemas/2007'><entry><title>VIDEO NAME</title></entry></feed>";
string xpath = "feed/entry";
XmlDocument xml = new XmlDocument();
xml.LoadXml(text);
XmlNodeList nodes = xml.SelectNodes(xpath);
foreach (XmlNode node in nodes)
{
    string title = node["title"].InnerText;
    MessageBox.Show(title);
} 
```

XML

```
<?xml version='1.0' encoding='UTF-8'?>
    <feed xmlns='http://www.w3.org/2005/Atom' xmlns:media='http://search.yahoo.com/mrss/' xmlns:openSearch='http://a9.com/-/spec/opensearchrss/1.0/' xmlns:gd='http://schemas.google.com/g/2005' xmlns:yt='http://gdata.youtube.com/schemas/2007'>
      <entry>
        <title>VIDEO NAME</title>
      </entry>
    </feed> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:47:03.103

Xml 中的此声明`xmlns='http://www.w3.org/2005/Atom'` 将文档中没有命名空间前缀的所有元素放在默认命名空间中`http://www.w3.org/2005/Atom/`。因此，您需要在 XPath 查询中使用命名空间：

```
 string text = "<?xml version='1.0' encoding='UTF-8'?><feed xmlns='http://www.w3.org/2005/Atom' xmlns:media='http://search.yahoo.com/mrss/' xmlns:openSearch='http://a9.com/-/spec/opensearchrss/1.0/' xmlns:gd='http://schemas.google.com/g/2005' xmlns:yt='http://gdata.youtube.com/schemas/2007'><entry><title>VIDEO NAME</title></entry></feed>";

        XmlDocument xml = new XmlDocument();
        xml.LoadXml(text);
        XmlNamespaceManager nsmgr = new System.Xml.XmlNamespaceManager(xml.NameTable);
        nsmgr.AddNamespace("atom", "http://www.w3.org/2005/Atom");
        string xpath = "atom:feed/atom:entry/atom:title";
        XmlNodeList nodes = xml.SelectNodes(xpath, nsmgr);

        foreach (XmlNode node in nodes)
        {
            Console.WriteLine(node.InnerText);
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T13:53:05.597

您可以使用 LINQ to XML 代替 XmlDocument 和 XPath：

```
string text = "<?xml version='1.0' encoding='UTF-8'?><feed xmlns='http://www.w3.org/2005/Atom' xmlns:media='http://search.yahoo.com/mrss/' xmlns:openSearch='http://a9.com/-/spec/opensearchrss/1.0/' xmlns:gd='http://schemas.google.com/g/2005' xmlns:yt='http://gdata.youtube.com/schemas/2007'><entry><title>VIDEO NAME</title></entry></feed>";
var doc = XDocument.Parse(text);
var atom = XNamespace.Get("http://www.w3.org/2005/Atom");

var titles = doc.Descendants(atom + "entry")
                .Select(e => (string)e.Element(atom + "title"))
                .ToList();

foreach (string title in titles)
    Console.WriteLine(title); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T13:44:34.757

这可行，但我生成的代码感觉就像一个肮脏的黑客

```
 string text = "<?xml version='1.0' encoding='UTF-8'?><feed xmlns='http://www.w3.org/2005/Atom' xmlns:media='http://search.yahoo.com/mrss/' xmlns:openSearch='http://a9.com/-/spec/opensearchrss/1.0/' xmlns:gd='http://schemas.google.com/g/2005' xmlns:yt='http://gdata.youtube.com/schemas/2007'><entry><title>VIDEO NAME</title></entry></feed>";
        XmlDocument xml = new XmlDocument();
        xml.LoadXml(text);
        XmlNode parentNode = xml.GetElementsByTagName("feed").Item(0);
        foreach (XmlNode n in parentNode.ChildNodes)
        {
            string title = n["title"].InnerText;
            Console.WriteLine(title);
        }

        Console.ReadLine(); 
```

# javascript - Sencha Touch 模型中的字段转换功能失败

> ID：15311195
> 
> 赞同：1
> 
> 时间：2013-03-09T13:26:54.563
> 
> 标签：javascript, cordova, extjs, sencha-touch, sencha-touch-2

我正在制作 Sencha Touch PhoneGap 应用程序。我正在尝试将具有转换功能的字段添加到 Sencha Touch 2.1 中的模型此转换功能应该找到单个字母并替换它们（“convFAF”）。

我不明白为什么它会失败。

使用该功能后，使用该模型的列表（列出的商店）显示为空白。Xcode 不会将任何错误消息打印到控制台。

我的模型：

```
Ext.define('Labblistan.model.LabItem', {
extend: 'Ext.data.Model',
config: {
    fields: [
    {name: 'Group', type: 'String'},
    {name: 'Groupname', type: 'String'}, 
    {name: 'Analysis', type: 'String'}, 
    {name: 'Sex', type: 'String'}, 
    {name: 'AgeFrom', type: 'String'}, 
    {name: 'AgeTo', type: 'String'}, 
    {name: 'LowLimit', type: 'String'}, 
    {name: 'UpperLimit', type: 'String'}, 
    {name: 'Unit', type: 'String'},
    {name: 'Comment', type: 'String'},
    {name: 'SortOrder', type: 'String'},
     {
     name : 'formattedAnalysis',
     type : 'string',
     convert : function(v, record) {
     var unformattedAnalysis = record.get('Analysis');
     if (unformattedAnalysis.indexOf("-") != -1) {
     return unformattedAnalysis.substring(unformattedAnalysis.indexOf("-")).substr(1).toUpperCase();
     } else {
     return unformattedAnalysis.toUpperCase();
     }
     }},
     {name: 'formattedAgeFrom',  convert: convertAgeFrom},
    ]
},
});
function convertAgeFrom(v, record) {
    var unformattedAgeFrom = record.get('AgeFrom');
    var formattedAgeFrom = unformattedAgeFrom.replace('d', ' d.').replace('y', ' år').replace('m', ' mån.').replace('w', ' v.');
    return formattedAgeFrom;
} 
```

正如你所看到的，我已经有了一个转换函数（“formattedAnalysis” - 工作正常）。

我尝试在字段定义中使用该函数（根据 formattedAnalysis），但结果相同。我也尝试将 AgeFrom 类型设置为 Auto （以及 formattedAgeFrom 的 auto 和 string

最奇怪的是，如果我切换 record.get('AgeFrom'); 到“分析”，该功能有效。它似乎也适用于 Group、Unit 和 SortOrder，但不适用于 AgeFrom 或 AgeTo（我现在有兴趣转换的两个字段）。

数据是从 XML 文件加载的，可以在[此处找到该文件的副本](https://dl.dropbox.com/u/13253550/db02.xml)

我认为添加这种转换会很容易，但我在这里完全不知所措。任何帮助或想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:22:38.243

因此，显然在使用 Xcode + PhoneGap + Sencha 时，您不会获得与在浏览器中获得的相同控制台输出。这使我错过了实际导致问题的原因。

```
Uncaught TypeError: Cannot call method 'replace' of undefined 
```

所以只需检查字段不为空即可解决它：

```
function convertAgeFrom(v, record) {
var unformattedAgeFrom = record.get('AgeFrom');
if (unformattedAgeFrom != null) {
var formattedAgeFrom = unformattedAgeFrom.replace('d', ' d.').replace('y', ' år').replace('m', ' mån.').replace('w', ' v.');
return formattedAgeFrom;
}
} 
```

感谢 ThinkFloyd 请求错误消息。不会想到要检查。（虽然我的项目在当前状态下无法在浏览器中运行，但我有一个较早的原型，它足够接近以引发相同的错误，有谁知道是否有办法获得更多信息到 xcode 控制台？）

# delphi - 使用 Delphi 制作安装程序

> ID：15311196
> 
> 赞同：0
> 
> 时间：2013-03-09T13:26:57.603
> 
> 标签：delphi, installation, firemonkey, delphi-xe3

在我的项目中，我有一些文件要复制到程序文件目录中，并为一个可执行文件和其他工作（如安装）创建快捷方式。

我想在我的应用程序中使用包中的存储文件来执行此操作，例如 CAB 文件并在进度条中显示安装。

首先我想到了一个 msi 包装器，但有些用户说它太慢了！

我怎样才能以最好的方式做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T16:25:33.650

这是一个开始的小模板：

```
unit Unit1;

interface

uses
    Classes, SysUtils, FileUtil, Forms, Controls, Graphics, Dialogs, ComCtrls,
    StdCtrls
    , JwaMsi, windows // Units needed for MSI manipulation & for some type declarations

type

    { TForm1 }

    TForm1 = class(TForm)
        btnDoIt: TButton;
        lbxMsg: TListBox;
        procedure btnDoItClick(Sender: TObject);
    private
        { private declarations }
    public
        { public declarations }
    end;

var
    Form1: TForm1;

implementation

{$R *.dfm}

// Callback function
// Here you must handle type and content of messages from MSI (see MSDN for details)
function MSICallback(pvContext: LPVOID; iMessageType: Cardinal; szMessage: LPCSTR): Integer; stdcall;
var
    s: string;
begin
    // Convert PChar to string. Just for convenience.
    s := szMessage;

    // Add info about message to the ListBox
    Form1.lbxMsg.Items.Add(Format('Type: %d, Msg: %s', [iMessageType, s]));

    // Repaint form (may be it is not necessary)
    Form1.Refresh;
    Application.ProcessMessages;

    If iMessageType = INSTALLMESSAGE_TERMINATE then
        ShowMessage('Done');
end;

{ TForm1 }

procedure TForm1.btnDoItClick(Sender: TObject);
begin
    // Do not show native MSI UI
    MsiSetInternalUI(INSTALLUILEVEL_NONE + INSTALLUILEVEL_SOURCERESONLY, nil);

    // Set hook to MSI
    MsiSetExternalUI(
        @MSICallback, // Callback function
        $FFFFFFFF,    // Receive all types of messages
        nil);

    // Install product (change path to installation package)
    MsiInstallProduct(
        'D:\install\games\_old\corewar\nMarsFull.0.9.5.win.msi',
        nil);
end;

end. 
```

# nginx - nginx Expires 标头和反向代理不起作用

> ID：15311198
> 
> 赞同：2
> 
> 时间：2013-03-09T13:27:03.233
> 
> 标签：nginx, reverse-proxy, expires-header

我正在尝试为 nginx (0.7.67) 上的静态文件配置 Expires 标头。静态文件由 Golang 反向代理提供：

```
location /rev/ {
  proxy_pass http://localhost:8910/;
  proxy_redirect off;
  proxy_set_header  Host               $host;
  proxy_set_header  X-Real-IP          $remote_addr;
  proxy_set_header  X-Forwarded-For    $proxy_add_x_forwarded_for;
  proxy_set_header  X-Forwarded-Proto  https;

  # I am putting this here, because nginx only uses one location. Is this OK?
  location ~* \.(js|css|jpg|jpeg|gif|png|svg|ico|pdf|html|htm)$ {
    expires 30d;
  }
} 
```

当我这样做时，重新启动 nginx 没有错误，但不再提供静态文件。

我**已经尝试**过以下星座，但它不起作用：

```
server {
  ...
  location /rev/ {
    proxy_pass http://localhost:8910/;
    proxy_redirect off;
    proxy_set_header  Host               $host;
    proxy_set_header  X-Real-IP          $remote_addr;
    proxy_set_header  X-Forwarded-For    $proxy_add_x_forwarded_for;
    proxy_set_header  X-Forwarded-Proto  https;
  }

  location ~* \.(js|css|jpg|jpeg|gif|png|svg|ico|pdf|html|htm)$ {
      expires 30d;
  }
} 
```

**问题**：如何为位于反向代理后面的应用程序上的静态文件应用过期标头？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-30T18:45:19.667

我设法完成它的唯一方法是这样：

```
location / {
    proxy_pass  http://tomcat;
}

# CACHING WITH NO LOGGING
location ~* ^.+\.(atom|bmp|bz2|doc|docx|eot|exe|gif|gz|ico|jpeg|jpg|mid|midi|mp4|ogg|ogv|otf|pdf|png|ppt|pptx|rar|rss|rtf|svg|svgz|swf|tar|tgz|ttf|txt|wav|woff|xls|zip)$ {
    access_log  off;
    log_not_found   off;
    expires     max;
    proxy_pass  http://tomcat;
}

# CACHING WITH 404 LOGGING
location ~* ^.+\.(css|js|xml)$ {
    access_log  off;
    log_not_found   on;
    expires     max;
    proxy_pass  http://tomcat;
} 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:41:36.933

通过阅读[http://wiki.nginx.org/HttpProxyModule](http://wiki.nginx.org/HttpProxyModule)上的文档，我发现提到使用`proxy_cache_*`指令来实现类似的功能，尽管不完全是你所追求的。文档指出：

```
Upstream cache-related directives have priority over proxy_cache_valid value,
in particular the order is:

X-Accel-Expires
Expires/Cache-Control
proxy_cache_valid 
```

因此，似乎`Expires`不支持或不推荐在代理级别设置标头。

我有一种感觉，您应该在`Expires`上游设置标题。这可以通过在 http 处理程序函数中设置 http.ResponseWriter 上的标头在 Go 中完成（有点骇人听闻，我确信有更好的方法来修复字符串中的时区）：

```
w.Header().Set("Expires", strings.Replace(time.Now().AddDate(0, 0, 30).Format(time.RFC1123), "UTC", "GMT", 1)) 
```

如前所述，这在输出字符串中替换`UTC`为。`GMT`我不确定是否有必要，但我注意到这似乎是我检查过的任何 HTTP 标头中的常见形式。我还没有查看规范以查看`UTC`浏览器是否同样接受，但我不明白为什么不这样做。

抱歉，这不是一个真正的 Nginx 答案，希望对您有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-05T11:13:22.907

我认为`expires`指令或者`add_header`是你返回给浏览器的东西。

如果您一味地想缓存来自后端的内容，您可以尝试：

```
proxy_cache_valid any 1m; 
```

[http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_valid](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_valid)

# ios - UITableView configureCellForDisplay:forIndexPath 中的断言失败：

> ID：15311201
> 
> 赞同：50
> 
> 时间：2013-03-09T13:27:22.170
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

我不确定错误在哪里，看过其他类似的问题。我收到了一个断言失败。

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: UITableView dataSource must return a cell from tableView:cellForRowAtIndexPath: 
```

我认为这很简单，但希望有人能提供帮助。

下面是我的代码：

```
#import "StockMarketViewController.h"

@interface StockMarketViewController ()

@end

@implementation StockMarketViewController
@synthesize ShareNameText, ShareValueText, AmountText;
@synthesize shares, shareValues;

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;
{
    return [shares count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

    NSString *currentValue = [shareValues objectAtIndex:[indexPath row]];
    [[cell textLabel]setText:currentValue];
    return cell;

} 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-03-09T13:57:12.353

你永远不会创建一个单元格，你只是尝试重用一个出队的单元格。但因为你从未创造过，所以没有。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    static NSString *cellIdentifier = @"cell";
    UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
    }

    NSString *currentValue = [shareValues objectAtIndex:[indexPath row]];
    [[cell textLabel]setText:currentValue];
    return cell;
} 
```

或尝试（仅限 iOS 6+）

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    static NSString *cellIdentifier = @"cell";
    UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier forIndexPath:indexPath];

    NSString *currentValue = [shareValues objectAtIndex:[indexPath row]];
    [[cell textLabel]setText:currentValue];
    return cell;
} 
```

* * *

来自 UITableView.h

```
- (id)dequeueReusableCellWithIdentifier:(NSString *)identifier;  // Used by the delegate to acquire an already allocated cell, in lieu of allocating a new one.
- (id)dequeueReusableCellWithIdentifier:(NSString *)identifier 
                           forIndexPath:(NSIndexPath *)indexPath NS_AVAILABLE_IOS(6_0); // newer dequeue method guarantees a cell is returned and resized properly, assuming identifier is registered 
```

`-dequeueReusableCellWithIdentifier:`如果返回了单元格，则始终需要检查，同时
`-dequeueReusableCellWithIdentifier:forIndexPath:`可以实例化新的单元格。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-09T13:59:09.640

如果您没有`@"cell"`在 Storyboard 中使用标识符定义原型单元格，则在尝试将其出列时会收到断言错误。

您可以通过`Identifier`在原型单元格上设置属性来解决此问题（选择单元格并在右侧面板中设置该属性）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-04-25T09:43:52.990

我犯的一个非常愚蠢的错误是

我没有把 UITableViewDelegate、UITableViewDataSource 放在控制器类名之后，就像我的类代码是 **class TagsViewController: UIViewController**

它应该有**类 TagsViewController: UIViewController , UITableViewDelegate, UITableViewDataSource**

由于所有其他代码都可以，因此可能是你们中的一个人面临的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-03T18:32:45.087

您需要在自定义 TableViewCell 中调用“initWithStyle”并再次初始化对象。

示例：ProductTableViewCell.m 文件

```
@implementation ProductTableViewCell

- (void)awakeFromNib {
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
   [super setSelected:selected animated:animated];
}

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    if (self = [super initWithStyle:style reuseIdentifier:reuseIdentifier])
    {
        self.selectionStyle = UITableViewCellSelectionStyleNone;
        _titleLabel = [[UILabel alloc] initWithFrame:(CGRectMake(70, 0, 320, 60))];
        [self.contentView addSubview:_titleLabel];
   }
   return self;
} 
```

在主实现文件中

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{ 
    ProductTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"productTableViewCell"];
    NSDictionary *dic = nil;
    if (tableView == self.searchDisplayController.searchResultsTableView) {
        dic = [_filteredArray objectAtIndex:indexPath.row];
    } else {
        dic = [_originalArray objectAtIndex:indexPath.row];
    }
    cell.titleLabel.text = [dic objectForKey: @"title"];
    return cell;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-22T09:11:48.267

我有同样的错误，我设法找到了错误。我有一个用于 segues 和视图标题的数组：

```
NSArray *MMTitles= [NSArray arrayWithObjects:@"MainMenu",@"viewIt",@"viewNots",@"MyProfile",@"Settings",@"Instructions",@"Help", nil];
NSArray *MMSegues=[NSArray arrayWithObjects:@"MainMenu",@"MyProfileSegue",@"viewNotSegue",@"MyProfileSegue",@"SettingsTableViewSegue",@"InstructionsViewSegue",@"HelpViewSegue", nil];

self.menuItems = [[NSArray alloc]initWithObjects:MMTitles,MMSegues, nil]; 
```

然后我使用这个数组作为我的表的数据源。我收到的错误是因为我在实例化 VC 时实际上并没有`HelpViewSegue`在我的 Storyboard 中声明：

```
 vc = [mainStoryboard instantiateViewControllerWithIdentifier: [[self.menuItems objectAtIndex:1]objectAtIndex:indexPath.row]]; 
```

相当琐碎，但它非常令人沮丧！希望这有帮助。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-04-26T21:44:51.710

在您编写的以下代码中`@"cell"`（用小写`c`），但您必须使用`@"Cell"`（`C`必须是大写）。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"]; 
```

# java - 使用速度，发生“java.lang.NullPointerException”

> ID：15311204
> 
> 赞同：1
> 
> 时间：2013-03-09T13:27:52.163
> 
> 标签：java, velocity

（**版本**：velocity-1.7，commons-collections-3.2）

我使用velocity解析vm模板，并在`request`范围内设置值，在jsp中显示

我的应用`work normaly a period of time`，但是当用户访问一段时间后，这个jsp显示错误，无法访问

**这是日志**：

```
Mar 8, 2013 11:40:54 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet spring threw exception
java.lang.NullPointerException
    at org.apache.commons.collections.ExtendedProperties.clearProperty(ExtendedProperties.java:797)
    at org.apache.commons.collections.ExtendedProperties.setProperty(ExtendedProperties.java:722)
    at org.apache.commons.collections.ExtendedProperties.combine(ExtendedProperties.java:783)
    at org.apache.velocity.runtime.RuntimeInstance.setProperties(RuntimeInstance.java:657)
    at org.apache.velocity.runtime.RuntimeInstance.init(RuntimeInstance.java:645)
    at org.apache.velocity.runtime.RuntimeSingleton.init(RuntimeSingleton.java:226)
    at org.apache.velocity.app.Velocity.init(Velocity.java:97)
    at com.feilong.tools.velocity.VelocityUtil.parseVMTemplateWithClasspathResourceLoader(VelocityUtil.java:67)
    at com.feilong.taglib.display.pager.PagerUtil.getPagerContent(PagerUtil.java:107)
    at com.feilong.taglib.display.pager.PagerTag.writeContent(PagerTag.java:48)
    at com.feilong.taglib.display.pager.PagerTag.writeContent(PagerTag.java:13)
    at com.feilong.taglib.base.AbstractCommonTag.doStartTag(AbstractCommonTag.java:19)
    at org.apache.jsp.pages.product.product_005flist_jsp._jspx_meth_feilongDisplay_005fpager_005f0(product_005flist_jsp.java:762)
    at org.apache.jsp.pages.product.product_005flist_jsp._jspx_meth_c_005fotherwise_005f1(product_005flist_jsp.java:433)
    at org.apache.jsp.pages.product.product_005flist_jsp._jspx_meth_c_005fchoose_005f1(product_005flist_jsp.java:243)
    at org.apache.jsp.pages.product.product_005flist_jsp._jspService(product_005flist_jsp.java:116)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

**这是我的实用程序代码**：（两个公共方法：有时我用来解析 vm 模板，有时我用来解析字符串）

```
/**
 * VelocityUtil
 * 
 * @author feilong
  */
public final class VelocityUtil{

    private static String   RUNTIME_LOG_LOG4J_LOGGER        = "feilongVelocityLogger";

    private static String   RUNTIME_LOG_LOG4J_LOGGER_LEVEL  = "debug";

    public static String parseVMTemplateWithClasspathResourceLoader(String templateInClassPath,Map<String, Object> contextKeyValues){
        String resource_loader = "class";
        Properties properties = new Properties();
        properties.put(Velocity.RESOURCE_LOADER, resource_loader);
        properties.put(resource_loader + ".resource.loader.class", ClasspathResourceLoader.class.getName());
        properties.put(RuntimeConstants.RUNTIME_LOG_LOGSYSTEM_CLASS, Log4JLogChute.class.getName());
        properties.put(Log4JLogChute.RUNTIME_LOG_LOG4J_LOGGER, RUNTIME_LOG_LOG4J_LOGGER);
        properties.put(Log4JLogChute.RUNTIME_LOG_LOG4J_LOGGER_LEVEL, RUNTIME_LOG_LOG4J_LOGGER_LEVEL);
        properties.put(Velocity.INPUT_ENCODING, CharsetType.UTF8);
        properties.put(Velocity.OUTPUT_ENCODING, CharsetType.UTF8);

        Velocity.init(properties);
        return parseVMTemplateAfterInitVelocity(templateInClassPath, contextKeyValues);
    }

    public static String parseVMContentWithStringResourceLoader(String vmContent,Map<String, Object> contextKeyValues){
        String resource_loader = "string";
        Properties properties = new Properties();
        properties.put(Velocity.RESOURCE_LOADER, resource_loader);
        properties.put(resource_loader + ".resource.loader.class", StringResourceLoader.class.getName());
        properties.put(Velocity.INPUT_ENCODING, CharsetType.UTF8);
        properties.put(Velocity.OUTPUT_ENCODING, CharsetType.UTF8);

        Velocity.init(properties);

        String templateName = "feilongStringVelocity";
        StringResourceRepository stringResourceRepository = StringResourceLoader.getRepository();
        stringResourceRepository.putStringResource(templateName, vmContent);
        return parseVMTemplateAfterInitVelocity(templateName, contextKeyValues);
    }

    private static String parseVMTemplateAfterInitVelocity(String templateName,Map<String, Object> contextKeyValues){
        Template template = Velocity.getTemplate(templateName, CharsetType.UTF8);
        VelocityContext velocityContext = new VelocityContext();
        if (null != contextKeyValues){
            for (Map.Entry<String, Object> entry : contextKeyValues.entrySet()){
                velocityContext.put(entry.getKey(), entry.getValue());
            }
        }
        Writer writer = new StringWriter();
        template.merge(velocityContext, writer);
        try{
            writer.flush();
        }catch (IOException e){
            e.printStackTrace();
        }
        return writer.toString();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T21:37:46.133

如果您每次渲染 jsp 时都在初始化 Velocity（看起来您来自您发布的代码），这可能是问题所在。

我以前遇到过这个问题，并通过初始化 VelocityEngine 一次并将其存储以供将来使用来解决它。

取自[这里](http://velocity.10973.n7.nabble.com/Inconsistent-and-strange-NPE-when-initializing-Velocity-td16026.html)（来自 nabble.com 上的 Velocity 论坛的“Will Glass-Husain-2”）：

> 这是一般模式。在应用启动时，初始化 VelocityEngine。将其存放在某个地方。每次您需要处理模板时，获取模板、创建和填充上下文，使用速度引擎合并模板（与上下文）。

在上面的代码中，您可以尝试将 Velocity.init 调用移动到另一个方法（例如，称为初始化），该方法仅在首次使用 utils 类中的方法时调用。调用一次初始化后，将其存储在布尔值中，不要再次调用初始化。

# c++ - 总是显示 wxHtmlWindow 垂直滚动条

> ID：15311205
> 
> 赞同：0
> 
> 时间：2013-03-09T13:27:56.480
> 
> 标签：c++, html, wxwidgets, wxhtmlwindow

有没有办法总是为 a 显示垂直滚动条`wxHTMLWindow`？样式只提到`wxHW_SCROLLBAR_NEVER`和`wxHW_SCROLLBAR_AUTO`。
我的 HTML 只有一个表格，当滚动条消失时在左侧留下一个很大的间隙时看起来很糟糕。
**另一个解决方法**可能是将表格在正文中居中，以便两边的间隙相等。但是`<table align="center">`将文本居中表，而不是表本身，与其他浏览器不同。
那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:35:11.007

为什么不将表格调整为窗口的宽度？ `<table width=100%>`

# clojure - 如何在 Clojure 中将两个序列中相同索引的元素添加在一起

> ID：15311220
> 
> 赞同：0
> 
> 时间：2013-03-09T13:29:33.130
> 
> 标签：clojure

我有

```
[1 1 1 1 1] 
```

和

```
[2 2 2 2 2] 
```

我想

```
[3 3 3 3 3] 
```

我试过

```
(for [x s1
      y s2
      :when (= (.indexOf s1 x) (.indexOf s2 y))]
   (+ x y)) 
```

它给出了错误的结果，因为 .indexOf 不返回其实际索引，而是使用其值搜索它。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T13:32:04.147

你可以这样做`map`：

```
(map + [1 1 1 1 1] [2 2 2 2 2])
;; => (3 3 3 3 3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T00:15:22.983

如果您使用`core.matrix`( [link](https://github.com/mikera/matrix-api) )，则可以扩展运算符以处理数字向量，您可以这样做：

```
(use 'clojure.core.matrix.operators)

(+ [1 1 1 1 1] [2 2 2 2 2])
=> [3 3 3 3 3] 
```

一般来说，`core.matrix`如果您要在 Clojure 中使用向量/矩阵/多维数组进行大量工作，您应该考虑一下。

# django - 比较在 Django 中存储为字符串的日期

> ID：15311222
> 
> 赞同：3
> 
> 时间：2013-03-09T13:29:53.670
> 
> 标签：django, django-models, python-2.7

我在我的数据库中包含一列以字符串格式（varchar）存储的日期，例如`"12-Mar-2011"`，`"11-Apr-2012"`等。有没有办法在 Django 中比较这些日期？

在`models.py`中，该列被定义为字符串格式。例如：

```
startdate = models.CharField(max_length=11) 
```

现在我必须将这些日期与日期进行比较。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:36:08.000

在您的`models.py`中，添加一个返回`datetime`对象的方法，如下所示：

```
from datetime import datetime as dt

class SomeModel(models.Model):
    # other fields

    def startdate_as_date(self):
        return dt.strptime(self.startdate,'%d-%b-%Y') 
```

我省略了一些错误检查（例如确保设置了 startdate）并检查日期是否为有效日期 - 您应该稍后添加这些。

现在你可以这样做：

```
foo = SomeModel.objects.get(pk=1)
the_date = foo.startdate_as_date() 
```

现在`the_date`是一个`datetime`可用于进行正常比较的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:43:06.477

这不是您要寻找的答案，但是...

您**确实**应该将数据库迁移到使用`models.DateField`类型。

除此之外，

```
objects = YourModel.objects.raw("""
    SELECT 
        STR_TO_DATE(your_string_date_field, '%e-%b-%Y') AS a_mysql_date_field,
        *
    FROM your_table
    """) 
```

做一个原始查询来获取字符串日期作为实际的mysql日期，也许你可以用它来完成你想要做的任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-20T15:18:32.120

通过使用 Func、Value 和 MySQL 的 STR_TO_DATE 函数创建自定义管理器并将该管理器添加到您的模型然后对其进行过滤，您完全可以在没有原始 SQL 的情况下完全做您想做的事情。如果您使用 MySQL 或 MariaDB 以外的其他数据库后端，您可能需要相应地更改您提供给 Func 的函数字符串和模式。

**管理者.py：**

```
from django.db import models
from django.db.models import Value, Func

class WeirdDateManager(models.Manager):

    def get_queryset(self):
        queryset = super().get_queryset()
        queryset = queryset.annotate(
            start_date = Func(
                Value('start_date_string'),
                Value('%d-%b-%Y'),
                function='STR_TO_DATE',
            ),
        )
        return queryset 
```

**模型.py：**

```
from .managers import WeirdDateManager

class WeirdDateModel(models.Model):

    objects = WeirdDateManager()

    start_date_string = models.CharField(db_column="startdate", max_length=11) # I've renamed your field here so that I can use the start_date name to filter on the actual date, not the string. 
```

**视图.py：**

```
from .models import WeirdDateModel

objects = WeirdDateModel.objects.filter(start_date__gte = given_date) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-10T15:37:25.807

您还可以使用注释创建一个新的虚拟字段，以日期时间格式包含您的值。

```
from django.db.models.expressions import RawSQL
Yourmodel.objects.annotate(startdate_datetime = RawSQL("SELECT STR_TO_DATE(startdate, '%%d-%%b-%%Y')", ()) 
```

注意：

*   您的数据库必须支持 STR_TO_DATE。据我所知，MySQL和PostgreSQL都有这个功能。
*   有双重`%`是因为 RawSQL 函数实际上在内部进行了一些格式化，因此`%`必须进行转义。
*   `None`如果您的请求无效，则该字段值将是。例如，如果您使用不存在的格式字符或无效的格式值。例如，如果您尝试`%m`匹配大于 12 的月份等。

# nginx - 使用 nginx 作为多个邮件服务器的负载均衡器

> ID：15311226
> 
> 赞同：0
> 
> 时间：2013-03-09T13:30:24.807
> 
> 标签：nginx, load-balancing, mail-server

我正在尝试使用 Nginx 作为邮件服务器的负载平衡器，如果邮件服务器出现故障，让我通过另一个我需要的 nginx.conf 示例发送电子邮件，至少有两个邮件服务器正在运行。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:49:05.240

Nginx 有一个 tcp 代理模块（[https://github.com/yaoweibin/nginx_tcp_proxy_module/](https://github.com/yaoweibin/nginx_tcp_proxy_module/)）。

```
 tcp {

            upstream cluster {
                # simple round-robin
                server 192.168.0.1:80;
                server 192.168.0.2:80;

                check interval=3000 rise=2 fall=5 timeout=1000;
            }

            server {
                listen 8888;

                proxy_pass cluster;
            }
        } 
```

您也可以使用 haproxy。

# android - 使用gps计算以公里为单位的距离

> ID：15311231
> 
> 赞同：-3
> 
> 时间：2013-03-09T13:30:52.637
> 
> 标签：android, gps

我在 android 中借助 gps 编写了以下用于显示距离的 java 文件。它在 toast 中显示距离，但我想以 km 显示它，所以我该怎么做？

```
 package com.dansaurabh.speedone;

    import android.app.Service;
    import android.content.Intent;
    import android.location.GpsStatus.Listener;
    import android.location.Criteria;
    import android.location.Location;
    import android.location.LocationListener;
    import android.location.LocationManager;
    import android.os.Bundle;
    import android.os.IBinder;
    import android.util.Log;
    import android.widget.Toast;

    public class gpslocation extends Service {
    public final static String key1 = "com.saurabh.speedone.mes1";
    LocationManager locationManager;
    Location currentLoc;
    // Double par1,par2,par3,par4;
    private double par1 = 0;
    private double par2 = 0;
    private double currentlong = 0;
    private double currentlat = 0;
    String distance;

    @Override
    public void onCreate() {
        // TODO Auto-generated method stub

        Log.d("LocationUpdateService", "onCreate is called");
        locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

        super.onCreate();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        /* ################ */

        final Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        criteria.setAltitudeRequired(false);
        criteria.setBearingRequired(false);
        criteria.setCostAllowed(true);
        criteria.setPowerRequirement(Criteria.POWER_LOW);

        /* ################ */
        Log.d("LocationUpdateService", "onStartCommand is called");

        if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER) == 
     false) {
            // put dialoug box of start gps service
            // getNetworkLocation();
            // add dilouge for start gps

            Toast.makeText(this, "start GPS service", 
    Toast.LENGTH_LONG).show();

        } else {
            getGPSLocation();
        }

        return super.onStartCommand(intent, flags, startId);
    }

    /*
     * private void getNetworkLocation(){ Log.d("LocationUpdateService",
     * "getNetworkLocation is called"); currentLoc =
     * locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
     * 
     * String data = "Network : " + currentLoc.getLatitude() + " :: "
     * +currentLoc.getLongitude(); // updateUI(data); } // above tells about
     * last known location
     */

    private void getGPSLocation() {

        /*
         * Log.d("LocationUpdateService", "getGPSLocation is called");
         * currentLoc =
         * locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
         * if(currentLoc!=null){ String data = "getLastKnownLocation : GPS : " +
         * currentLoc.getLatitude() + " :: " +currentLoc.getLongitude(); //
         * updateUI(data);
         * 
         * 
         * }else{ updateUI("No GPS Current Loc found"); }
         */
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,
                0, new LocationListener() {

                    public void onStatusChanged(String provider, int 
    status,
                            Bundle extras) {
                        // TODO Auto-generated method stub

                    }

                    public void onProviderEnabled(String provider) {
                        // TODO Auto-generated method stub
                        // updateUI(provider + " Enabled");
                    }

                    public void onProviderDisabled(String provider) {
                        // TODO Auto-generated method stub
                        // updateUI(provider + " Disabled");
                    }

                    public void onLocationChanged(Location location) {
                        // TODO Auto-generated method stub
                        currentLoc = locationManager

   .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                        if (currentLoc != null) {

                            currentlat = 
    currentLoc.getLatitude();
                            currentlong = 
    currentLoc.getLongitude();
                            distance();
                            // in km

                        }
    else {
    Toast.makeText(gpslocation.this, "no location changed", Toast.LENGTH_LONG).show();
   }
                    }

                    public void distance() {
                        // measure distance

                        double earthRadius = 3958.75;

                        double dLat = Math.toRadians(par1 -  
    currentlat);
                        double dLng = Math.toRadians(par2 - 
    currentlong);
                        double a = Math.sin(dLat / 2) * 
    Math.sin(dLat / 2)
                                + 
    Math.cos(Math.toRadians(currentlat))
                                * 
    Math.cos(Math.toRadians(par1))
                                * Math.sin(dLng / 2) *  
    Math.sin(dLng / 2);
                        double c = 2 * Math.atan2(Math.sqrt(a),
                                Math.sqrt(1 - a));
                        double dist = earthRadius * c;

                        Intent it = new Intent(gpslocation.this, 
    Run.class);
                        it.putExtra(key1, distance);

                        startActivity(it);
                    }
                });

    }

    @Override
    public void onDestroy() {
        // updateUI("onDestroy is called");
        Toast.makeText(this, "app closeing", Toast.LENGTH_LONG).show();
        Intent it = new Intent(gpslocation.this, Run.class);
        it.putExtra(key1, distance);

        startActivity(it);

        super.onDestroy();
    }

    private void updateUI(CharSequence dist) {
        Log.i("LocationUpdateService,distance", "Data :: " + dist);
        Toast.makeText(this, dist, Toast.LENGTH_SHORT).show();
    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    } 
```

请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:34:30.153

1.  提供有意义的变量名。什么是`par1`和`par2`？我敢打赌，从现在开始，即使你乍一看也不会知道。*看起来*您正在使用它来计算距离（将两者都定义为 0 并且不再设置），**因此您正在计算到北极的距离**（抱歉，没有浪费太多时间来分析应该简化的代码） .

2.  在 Android 中，`Location`如果可以，最好使用对象而不是原始`double`坐标。

3.  计算长距离（甚至是小距离）是一件棘手的事情。不要假装你可以比你之前的其他人做得更好。正如 AlexWien 在我面前的答案中所说，寻找一个合适的公式。或者，*更好*的是，使用内置的[Location.distanceTo(Location)](http://developer.android.com/reference/android/location/Location.html#distanceTo%28android.location.Location%29)，它返回到另一个点的距离，以**米**为单位。对于定制（？-不确定Android API在这方面的可扩展性如何，我敢打赌它是完全的），网上也有可以使用的[库。](http://www.gavaghan.org/blog/free-source-code/geodesy-library-vincentys-formula-java/)

如果这是我，我会提供我的内置的、引用的`Location`（比如，`Location myDestination`），检索当前的`Location`（比如，`Location currentLocation`），然后使用`currentLocation.distanceTo(myDestination)`. 然后，我可能会转换并舍入该值以提供以公里（或英里，对于盎格鲁撒克逊人）为单位的良好输出，使用 Java 中众所周知的方法对数字进行舍入以获得良好的输出。

*更*简单，如果你问我。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:35:49.950

如果我正确理解了您的问题，那么它很简单：

```
private void updateUI(CharSequence dist) {
    Log.i("LocationUpdateService,distance", "Data :: " + dist);
    Toast.makeText(this, dist.toString() + " km", Toast.LENGTH_SHORT).show();
} 
```

# c++ - How to repeat once at a time in a loop or IF statement in C language?

> ID：15311234
> 
> 赞同：0
> 
> 时间：2013-03-09T13:31:04.513
> 
> 标签：c++, c

I am doing an assignment in C language programming concerning either a WHILE loop, a FOR loop or an IF statement. I have tried all kinds of ways to do it, but failed. I need someone to help me solve this problem. I want to repeat a certain expression until I get a number which fulfills either one of my top two conditions. The code goes like this:

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>
#include<conio.h>

int main()
{
    int function;

    printf("Please choose a function:\n>>");
    scanf("%d",&function);
    printf("\n");
    if(function==1)
    {
        system("cls");
        printf("Nice");
    }
    else if(function==2)
    {
        printf("You chose to exit.\n\n");
        return 0;
    }
    else if(function>2)
    {
        printf("Error! Please try again.\n\n");
    }
    else;
    return 0;
} 
```

The part that I want to repeat is this until I get either 1 or 2 as my number.

```
else if(function>2)
    {
        printf("Error! Please try again.\n\n");
    } 
```

Anybody has a way of solving this? It doesn't matter if I have to change this IF statement into a FOR loop or WHILE loop, as long as the results come out as what I mentioned above.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:37:35.407

use this may help you.

```
for(i=1;i<10;i++)
{
printf("Please choose a function:\n>>");
scanf("%d",&function);
printf("\n");
if(function==1)
{
    system("cls");
    printf("Nice");
}
else if(function==2)
{
    printf("You chose to exit.\n\n");
    return 0;
}
else if(function>2)
{
    printf("Error! Please try again.\n\n");
}
} 
```

you can put any number depanding upon your requirment..I have used 10 in for loop. You can use as per your requirment

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:33:44.353

Put the following in a loop

```
while(1)
{
    printf("Please choose a function:\n>>");
    scanf("%d",&function);
    printf("\n");
    if(function==1)
    {
        system("cls");
        printf("Nice");
        break;
    }
    else if(function==2)
    {
        printf("You chose to exit.\n\n");
        return 0;
    }
    else if(function>2)
    {
        printf("Error! Please try again.\n\n");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T13:36:08.500

Try it with a while loop and a switch statement.

Something like so (not sure if it complies, just to show you what I mean):

```
function = 0;
do
{
    printf("Please choose a function:\n>>");
    scanf("%d", &function);
    switch(function)
    {
        case 1:
            /* do your stuff */
            break;
        default:
            fprintf(stderr, "Error! Please try again.\n\n");
            break;
    }
} while(function != 2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T13:38:19.863

Assuming you're allowed more than one of `while`/`for`/`if`, how about a mixture of `do` ... `while` and `if`

```
int function;
do {
    while (scanf("Please choose a function:\n>>%d", &function) != 1)
        ;
    printf("\n");
    if(function==1) {
        system("cls");
        printf("Nice");
    }
    else if(function>2) {
        printf("Error! Please try again.\n\n");
    }
} while (function != 2);
printf("You chose to exit.\n\n");
return 0; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T13:45:01.390

use can use a do while loop

```
int main()

int function;
do {
  printf("Please choose a function:\n>>");
  scanf("%d",&function);
  printf("\n");
  if(function==1) {
      system("cls");
      printf("Nice");
  }
  else if(function==2)  {
      printf("You chose to exit.\n\n");
      return 0;
  }
  else  {
      printf("Error! Please try again.\n\n");
  }
} while (function > 2)
return 0; 
```

}

# python - 在执行 Python 的 altinstall 时安装 Distribute

> ID：15311235
> 
> 赞同：4
> 
> 时间：2013-03-09T13:31:04.653
> 
> 标签：python, python-2.7, installation, centos, distribute

我正在 CentOS 5.8 上进行 Python 2.7.3 的 altinstall，我想要分发 pip 和所有爵士乐。但是，我无法理解正确的程序，并且分发的安装脚本给了我错误。

当前命令顺序：（最终将是用于我的项目的设置脚本）

```
sudo yum groupinstall "Development tools"
sudo yum install {zlib,bzip2,openssl,ncurses}-devel

cd /tmp && mkdir python273 && cd python273
wget http://www.python.org/ftp/python/2.7.3/Python-2.7.3.tar.bz2
tar -xf Python-2.7.3.tar.bz2
cd Python-2.7.3

./configure --prefix=/usr/local --enable-shared
make
sudo make altinstall # installs to /usr/local/{bin,lib}

# Fix path to shared lib - http://stackoverflow.com/a/7880519/1076493
echo "/usr/local/lib" | sudo tee -a /etc/ld.so.conf > /dev/null
sudo ldconfig

# Distribute
wget http://python-distribute.org/distribute_setup.py
sudo python2.7 distribute_setup.py

# Done, install whatever interesting packages I want + clean up
sudo pip install virtualenv yolk bpython
rm -rf /tmp/python273 
```

但是，在尝试运行时我得到*“权限被拒绝”*`distribute_setup.py`，即使它是使用 sudo 运行的。在 root shell 中执行此操作时工作正常。我猜这个脚本不尊重最初在制作子进程或其他东西时使用的 UID。

这让我想知道；当使用分发执行 Python (2.7.3) 的 altinstall 时，这是正确的顺序吗？或者仅仅是分发设置脚本不尊重给定的 UID？如果脚本是问题所在，我将如何使用 sudo 运行它，因为我不希望我的设置需要 root shell？

```
$ sudo python2.7 distribute_setup.py                            
Downloading http://pypi.python.org/packages/source/d/distribute/distribute-0.6.35.tar.gz
Extracting in /tmp/tmpE9UJke                                                            
Now working in /tmp/tmpE9UJke/distribute-0.6.35                                         
Installing Distribute                                                                   
Traceback (most recent call last):                                                      
  File "distribute_setup.py", line 546, in <module>                                     
    sys.exit(main())                                                                    
  File "distribute_setup.py", line 543, in main                                         
    return _install(tarball, _build_install_args(options))                              
  File "distribute_setup.py", line 87, in _install                                      
    if not _python_cmd('setup.py', 'install', *install_args):                           
  File "distribute_setup.py", line 37, in _python_cmd                                   
    return subprocess.call(args) == 0                                                   
  File "/usr/local/lib/python2.7/subprocess.py", line 493, in call                      
    return Popen(*popenargs, **kwargs).wait()                                           
  File "/usr/local/lib/python2.7/subprocess.py", line 679, in __init__                  
    errread, errwrite)                                                                  
  File "/usr/local/lib/python2.7/subprocess.py", line 1249, in _execute_child           
    raise child_exception                                                               
OSError: [Errno 13] Permission denied 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-26T15:03:51.830

我在 RHEL5.8 上有一个非常相似的设置，当我执行时我得到相同的权限被拒绝异常：

```
$ sudo python2.7 distribute_setup.py 
```

问题通过使用绝对路径解决：

```
$ sudo /usr/local/bin/python2.7 distribute_setup.py 
```

根本问题只是root帐户的PATH中没有/usr/local/bin。

* * *

Indeed尝试通过重用当前的 python 解释器与[sys.executable](http://docs.python.org/2/library/sys.html#sys.executable)和[subprocess.call](http://docs.python.org/2/library/subprocess.html#subprocess.call)`distribute_setup.py`来调用 python 子命令，如果你一步一步尝试：

```
$ sudo python2.7 -c "import sys; print sys.executable"

$ sudo /usr/local/bin/python2.7 -c "import sys; print sys.executable"
/usr/local/bin/python2.7 
```

权限被拒绝错误有点误导，但它是由尝试执行空文件名引起的：

```
$ python2.7 -c "import subprocess; subprocess.call([''])"
[...]
OSError: [Errno 13] Permission denied 
```

# php - 将多个变量分配给条件

> ID：15311238
> 
> 赞同：0
> 
> 时间：2013-03-09T13:31:20.443
> 
> 标签：php, mysql, if-statement

目前我在数据库中有三个表，其中包含有关患者疾病、优先级和等待时间的数据。我想将患者优先级和疾病分配给预期的等待时间，例如：如果患者的优先级低且不紧急，则预期等待时间 = 3 小时。

以下表格包含有关优先级、疾病和等待时间的信息。

```
Priority Table
High
Moderate 
Low 

Illness Table
Critical 
Immediate 
Non-urgent

Expected_Waiting_time
0 - 10 (mins)
30 - 60
60 - 90
etc 
```

编辑：

输出示例

```
PatientID  Illness      Priority   Expected waiting time 
 1         non-urgent    Low        3 hours 
 2         non-urgent     Low       3 hours 
 3         Critical       High      0
 4         Immediate      Moderate  1-2 hours 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:47:06.157

创建一个表，将**等待**与**疾病**和**优先级**联系起来。然后只需根据其他两个的值选择“等待”。

> 从 wait_table 中选择等待，其中疾病 = <值> 和优先级 = <值>；

该表会将**疾病**和**优先级**的所有唯一组合分配给适当的**wait**值。

[这](http://sqlfiddle.com/#!2/67e1c/2/0)是一个小提琴。这很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:50:24.677

* * *

## 您的数据库

* * *

让我们从头开始。您的表是成功计算和存储客户端等待时间所需的所有后端数据。

**您的优先表**

你有一张`priority`表，里面有一个值。这是第一个警报。如果它只有一个值，作为另一个表的字段不是更好吗？也许将其与患者的详细信息结合起来，意味着仅使用客户的详细信息，您就可以访问他们的所有信息。也许是这样的：

```
Client Table
ClientID    ClientName    ClientPriority 
```

这意味着，通过客户的姓名，您可以推断出他们的优先级。

**疾病表**

```
Illness Table  
IllnessID    IllnessName     IllnessLevel 
```

这意味着随着客户的疾病，您可以达到他们的疾病等级。

**您的等候时间表**

我想这很好。将等待时间放在不同的表中意味着您可以在需要时更改它们。不过，我会推荐的是改变它，所以它看起来更像这样。这些数字是任意的，您可以根据需要更改它们，具体取决于您用于优先级和疾病严重程度的值。

```
Expected_Waiting_time
Waiting_Time    PatientScore
0 - 10 (mins)   10
30 - 60         5
60 - 90         1 
```

* * *

## 你的编程逻辑

* * *

**获取必要的信息**

现在，您需要了解患者的详细信息及其状况。因此，假设客户给您他们的姓名或 ID。通常，在医生那里，您提供某种会员卡，他们会从中获取您的详细信息，因此请求身份证是一种完全正常的做法。

```
Client Inputs: ID 1
Client Illness: A Cold 
```

从客户端的 ID 调用数据库，使用一些 SQL：

```
SELECT * FROM Clients WHERE ClientID=:ID 
```

注意这里我使用了一个准备好的语句。如果您不知道这些是什么，那么您需要在[此处](http://php.net/manual/en/pdo.prepared-statements.php)阅读它们。

一旦您请求了客户的详细信息，您就有了他们的优先权。接下来，您将讨论他们的疾病。

```
SELECT * FROM Illness WHERE IllnessID = :IllnessID 
```

再一次，使用一个简单的 SQL 语句，我们就获得了有关疾病的所有详细信息。

**执行计算**

在本节中，您需要对已有的值做一些事情来计算分数。例如，假设 10 是患者的高优先级，并且患者出现`Critical`疾病，那么您可能会说他们的得分为 20。

只需查询数据库，获取最接近 20 的值。如果您不确定如何执行此操作，请阅读[此问题](https://stackoverflow.com/questions/592209/find-closest-numeric-value-in-database)以获得一些帮助。

瞧，你有你的等待时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T13:51:23.673

我的第一个观察是您的数据点似乎没有意义。如果某人是关键的，那么根据定义，他们是高优先级的，如果他们是非紧急的，那么他们将是低优先级的。您的表格似乎以不同的方式重复相同的信息。

此外，您无法从“60 到 90”分钟的一组数据中获得“3 小时”的绝对等待时间。你最终必须得到一个范围。

但是，如果我们假设可能存在临界低优先级或非紧急高优先级，那么：

您需要一张将优先级和/或疾病与等待时间联系起来的表格。您没有给出示例来说明它们是累积的还是基于配对而不同的。如果是前者，那么只需在每个 Illness 和 Priority 表中添加一个时间列，您就可以将这些值相加。如果是后者，则构建一个包含所有可能的疾病和优先级组合的表并加入它。

# c++ - QListWidget：项目点击事件

> ID：15311241
> 
> 赞同：11
> 
> 时间：2013-03-09T13:31:43.610
> 
> 标签：c++, qt

基本上，我所拥有的是以下内容：

一个 QListWidget，其中包含一些项目，如下所示：

`ListMail`是我的 QListWidget。在这个 QListWidget 中，我有如下元素：“邮件 1”、“邮件 2”、...

而且我不知道，如何在（例如）“Mail 1”上发出信号绑定到插槽（onClick）或类似的东西。

我已经尝试过类似的东西 : `connect(ui->listMail->selectedItems(0), SIGNAL(triggered()), this, SLOT(openMessage())`，但它根本不起作用......

有什么帮助吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-09T13:42:57.987

您必须绑定到[`itemClicked`](http://qt-project.org/doc/qt-4.8/qlistwidget.html#itemClicked)信号。该信号将为您提供`QListWidgetItem*`被点击的项目。然后您可以检查它并检查它是否是第一个：

```
MyClass::MyClass(QWidget* parent)
    : QWidget(parent)
{
    connect(ui->listMail, SIGNAL(itemClicked(QListWidgetItem*)), 
            this, SLOT(onListMailItemClicked(QListWidgetItem*)));
}

void MyClass::onListMailItemClicked(QListWidgetItem* item)
{
    if (ui->listMail->item(0) == item) {
        // This is the first item.
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T13:43:00.017

QListWidget 有一个信号`QListWidget::itemPressed(QListWidgetItem *item)`会告诉你点击了哪个项目。您可以将此信号连接到您自己的插槽。还有其他相关信号。请参阅[文档](http://qt-project.org/doc/qt-4.8/qlistwidget.html)。

# python - 用字典更改列表中的项目

> ID：15311242
> 
> 赞同：3
> 
> 时间：2013-03-09T13:31:47.850
> 
> 标签：python, list, dictionary, replace

```
dic = {'a':'1','b':'2'}
lis = ['a','b']
for c in lis:
    c = dic[c]
print lis 
```

名单没有改变。我曾预计该列表将更改为`['1','2']`. 谁能解释一下？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T13:34:56.597

不，这不是列表迭代的工作方式。`c`每次迭代都是一个新对象，如果您更改该对象，则原始列表（谢天谢地！）不会被修改。

如果您确实需要，请使用`enumerate()`：

```
dic = {'a':'1','b':'2'}
lis = ['a','b']
for i, c in enumerate(lis):
    lis[i] = dic[c]
print lis 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T13:37:37.227

您在迭代中缺少的最重要的事情是将元素分配给 name `c`，`c=dic[c]`重新绑定`c`到新对象并且不会更新原始对象。考虑以下演示

```
>>> for i, c in enumerate(lst):
    print id(c), id(lst[i]),
    c=dic[c]
    print id(c)

4935168 4935168 4934712
4935192 4935192 5496728 
```

因此，尽管在分配列表元素和`c`引用列表中的同一对象之前，但分配字典的值只会更改引用

注意，这里`id`只是指引用对象的标识符

请注意，当您更改整个列表时，使用列表理解更容易、更快捷

```
lst = [dic[e] for e in lst]
['1', '2'] 
```

**警告**不要将变量命名为内置

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T13:34:01.530

尝试使用索引而不是变量...

```
for i in range(len(li)):
    c = li[i]
    li[i] = dic[c]
print li 
```

另外，永远不要`list`用作变量名..
或使用`enumerate`like

```
for i, c in enumerate(li):
    li[i] = dic[c]
print li 
```

或列表推导

```
lis = [dic[c] if c in dic else c for c in lis] 
```

* * *

**为什么不是你在做什么？**
当您使用 时`for x in y:`，`x`获取对象/项目的值`y`
因此，如果您更改 的值`x`，则不会更改 的值`y[i]`，`i`即您所在的索引。

所以，如果你这样做

```
>>> y = range(5,10)
>>> for x in y:
    i = y.index(x)
    x += 10
    print i
    print 'Value of x    : %3d, id: %7d' % (x, id(x))
    print 'Value of y[i] : %3d, id: %7d' % (y[i], id(y[i]))
    print '-'*31 
```

你会看到区别

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-09T13:40:57.240

当你这样做

```
for c in myList:
    c = something 
```

您正在将名称重新绑定`c`到任何“某物”，在本例中为`dic[c]`. 为了让 Python 真正“进入”列表，您必须调用该列表上的一个方法——该方法`list.__setitem__()`告诉 Python 访问实际的列表对象并*改变*该列表中的项目，而不是进行简单的变量赋值.

```
for i, c in enumerate(myList):
    myList.__setitem__(dic[c]) 
```

当然，这也可以写成（更 Pythonic）：

```
for i, c in enumerate(myList):
    myList[i] = dic[c] 
```

它看起来像一个变量赋值，但它不是。

# php - 如何将 MB 的数据从 PHP 传递到 Javascript

> ID：15311250
> 
> 赞同：2
> 
> 时间：2013-03-09T13:32:28.897
> 
> 标签：php, javascript, canvas

我正在开发一个基于回合的策略游戏，在其中我从 PHP 输出一系列数组，以使用 javascript 在画布中进行动画处理。

鉴于我的目标是 javascript/canvas 中的 20 fps（每秒帧数），php 正在为浏览器生成大量信息以接收并处理。

如何将这些 php 数组传递给 javascript？

编辑我具体指的数据量约为每转 5 兆字节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:08:30.470

我认为您试图回答两个问题。

1.  如何将数据从 php 传递到 javascript？
2.  php和javascript之间应该以什么格式传递数据？

就 Q1 而言：有多种技术可供选择，如果不了解您的项目，则没有一种技术具有明显的优势。你可以使用：

*   [WebSockets](https://developer.mozilla.org/en-US/docs/WebSockets)：如果您需要低延迟，服务器和客户端之间的双向通信，或者如果您需要流式传输数据
*   AJAX：如果您需要以已知间隔请求数据或响应事件（用户点击）
*   Comet/长轮询：如果数据在未知时间从服务器“推送”给您

就第二季度而言：

*   JSON：易于使用，大量支持
*   [MsgPack](http://msgpack.org/) - 更小的数据结构，更快的解析器

在不了解您的项目的情况下很难选择一个最佳解决方案，但我希望这份清单可以帮助您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:32:35.837

好的，如果您必须发送 5mb，那么您可以做的非常非常好的事情是：

使用gzip 或 gzcompress 等**数据压缩**来减少 5mg 有效负载。通常，文件可以减少到原始大小的 20-25% 左右（在您的情况下可以减少到 1-1.25mb）。

就是说，您确实应该考虑重组为游戏提供动力所需的数据，因为 5mb 远远超过典型！

你没有给我们任何具体的工作，所以这里有一个“稻草狗”供我们玩：假设你的游戏是国际象棋。（我知道不是，但我们需要一些东西来集中我们的注意力）

**将所有渲染移至客户端**。您发送的数据应该只发送移动（“Rook-A6”）。客户端获取该数据并以图形方式渲染 Rook 从其当前位置移动到 A6 上的新位置。

**将游戏逻辑移至客户端**。客户端应该能够独立地对游戏条件做出反应。例如，客户端应该“撤消”玩家试图将他的国王置于危险之中的举动。同样，如果您为复杂的移动（例如“城堡王侧”）发送数据，客户端应该知道如何正确移动王+车，而无需从您的数据中进行解释。

做一些**模式识别**来简化/减少发送的数据。因此，要设置棋盘上所有 32 个棋子的初始位置，您发送 (“Reset”) 而不是 (“移动白车-A1，移动白骑士-B1……等等”)。

使用**信号量**来控制游戏资源的可用性。如果你的游戏的一部分要求用户获取/使用一组共同的稀缺资源，请使用信号量让用户“签出”/“签入”资源，而不是实际跟踪单个资源。

# javascript - 基于 jQuery 的 Splitter 插件

> ID：15311252
> 
> 赞同：5
> 
> 时间：2013-03-09T13:32:49.183
> 
> 标签：javascript, jquery, jquery-ui

我需要创建如下布局；

![在此处输入图像描述](../Images/c5c8f634e59022b5b0e5f2903fc56239.png)

现在如您所见，我想要在 Cell-center 周围调整大小的单元格，即用于 cell-left 和 cell-right

我在[http://methvin.com/splitter/3csplitter.html](http://methvin.com/splitter/3csplitter.html)使用 jQuery 插件 来实现相同的目的。

但我还需要创建 4 个 portlet（如您在 cell-center 中看到的那样）。我出于同样的原因使用了 jQuery UI，但由于某些原因，这 2 个运行得不太好（3cSplitter 和 jQuery UI Portlets）......布局完全被破坏了......不确定它是否与绝对定位有关......

但我的问题是，我可以使用 jQuery UI 来实现类似的拆分器吗？[我在http://jqueryui.com/resizable/](http://jqueryui.com/resizable/)下看到的那个 似乎不太适合我想要的[http://methvin.com/splitter/3csplitter.html](http://methvin.com/splitter/3csplitter.html) 如果两者都是基于 jQuery UI，我猜集成问题不会太多...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:40:33.797

[jQuery 布局](http://layout.jquery-dev.net/demos.cfm)插件提供了这个功能。与 jQuery UI 结合使用，您可以使用非常少的标记获得可调整大小的窗格。要实现您正在寻找的东西，您只需要一些标记，例如：

```
<div id="container">
  <div class="ui-layout-west">Left</div>
  <div class="ui-layout-center">Center</div>
  <div class="ui-layout-east">Right</div>
</div> 
```

使用默认配置，您可以简单地使用默认样式实例化插件：

```
$("#container").layout({
  applyDemoStyles: true
}); 
```

你有一个带有可调整大小窗格的窗格视图。该插件是相当可配置的，允许您根据自己的喜好设置窗格处理程序的样式，以及配置插件的功能方面，例如窗格的最小或最大尺寸。此外，对于更复杂的视图，您可以将布局窗格与其他窗格嵌套并多次实例化插件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T14:17:12.403

你想要这样的东西[吗](http://www.jsfiddle.net/rQZ8Z/2/)？

**HTML**

```
<div class="left">left</div>
<div class="center">
    <div class="column">

  <div class="portlet">
    <div class="portlet-header">Feeds</div>
    <div class="portlet-content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit</div>
  </div>

  <div class="portlet">
    <div class="portlet-header">News</div>
    <div class="portlet-content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit</div>
  </div>

</div>
    <div class="column">

  <div class="portlet">
    <div class="portlet-header">Feeds</div>
    <div class="portlet-content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit</div>
  </div>

  <div class="portlet">
    <div class="portlet-header">News</div>
    <div class="portlet-content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit</div>
  </div>

</div>
</div>
<div class="right">right</div> 
```

**CSS**

```
body, html {
    position: relative;
    height: 100%;
    width: 100%;
    padding: 0;
    margin: 0;
}
.left, .right {
    height: 100%;
    width: 170px;
    float: left;
    background: #e0e0e0;
}
.left {
    border-right: 3px solid #DDD;
    margin-right: 4px;
}
.right {
    border-left: 3px solid #DDD;
    left: 0!important;
    margin-left: 4px;
}
.center {
    height: 100%;
    float: left;
}
.column { width: 50%; float: left; padding-bottom: 100px; }
.portlet { margin: 0 1em 1em 0;}
  .portlet-header { margin: 0.3em; padding-bottom: 4px; padding-left: 0.2em; }
  .portlet-header .ui-icon { float: right; }
  .portlet-content { padding: 0.4em; }
  .ui-sortable-placeholder { border: 1px dotted black; visibility: visible !important; height: 50px !important; }
  .ui-sortable-placeholder * { visibility: hidden; } 
```

**jQuery**

```
$(function() {
    var maxBorderCellWidth = 250;
    var minBorderCellWidth = 150;
    var resizeCenter = function () {
        var clientWidth  = $(document).innerWidth();
        var leftWidth = $( ".left" ).outerWidth(true);
        var rightWidth = $( ".right" ).outerWidth(true);
       console.log(clientWidth); $('.center').width(clientWidth-leftWidth-rightWidth);
    }

    $( ".left" ).resizable({
      maxWidth: maxBorderCellWidth,
      minWidth: minBorderCellWidth,
      handles: 'e',
      resize: function (event, ui){
          resizeCenter();
      }
    });
    $( ".right" ).resizable({
      maxWidth: maxBorderCellWidth,
      minWidth: minBorderCellWidth,
      handles: 'w',
      resize: function (event, ui){
          resizeCenter();  
      }
    });
    $( ".column" ).sortable({
      connectWith: ".column"
    });

    $( ".portlet" ).addClass( "ui-widget ui-widget-content ui-helper-clearfix ui-corner-all" )
      .find( ".portlet-header" )
        .addClass( "ui-widget-header ui-corner-all" )
        .prepend( "<span class='ui-icon ui-icon-minusthick'></span>")
        .end()
      .find( ".portlet-content" );

    $( ".portlet-header .ui-icon" ).click(function() {
      $( this ).toggleClass( "ui-icon-minusthick" ).toggleClass( "ui-icon-plusthick" );
      $( this ).parents( ".portlet:first" ).find( ".portlet-content" ).toggle();
    });

    $( ".column" ).disableSelection();

    resizeCenter();
    $(window).resize(function () {
        console.log("test");
        resizeCenter();
    });
}); 
```

# c - 在 C 中解析带引号的字符串

> ID：15311254
> 
> 赞同：-1
> 
> 时间：2013-03-09T13:32:54.947
> 
> 标签：c, parsing, unicode, compiler-construction

是否有对在 C 中存储 Unicode 字符串的数据类型的本机支持。我正在编写一个玩具编译器并想解析 Unicode 字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T02:30:54.593

> 是否有对在 C 中存储 Unicode 字符串的数据类型的本机支持。

是的。由于 Unicode 字符串可以使用编码方案*存储*为字节序列，因此可以`char`为此目的使用数组。

请注意，支持存储并没有说明解释或操作数据的能力。

# vb.net - 图片框之间的VB.NET冲突

> ID：15311255
> 
> 赞同：3
> 
> 时间：2013-03-09T13:33:01.457
> 
> 标签：vb.net, picturebox, intersect

我正在尝试制作一个简单的游戏，我需要知道图片框1（我的角色）是否与其他图片框（墙壁）发生碰撞。

我已经弄清楚了如何做到这一点，但它只适用于我的角色和其他 1 个图片框，例如：

```
If picturebox1.bounds.intersectWith(picturebox2.bounds) then
   collision = true
end if 
```

我试图做这样的事情：

```
For Each PictureBox In Me.Controls
  If PictureBox1.Bounds.IntersectsWith(PictureBox.Bounds) Then
     collision = True
  Else : collision = False
  End If
Next 
```

但是布尔碰撞总是正确的，因为picturebox1（角色）总是与自己相交。

所以我将图片框更改为面板，代码如下所示：

```
For Each PictureBox In Me.Controls
  If Panel1.Bounds.IntersectsWith(PictureBox.Bounds) Then
     collision = True
  Else : collision = False
  End If
Next 
```

但它仅适用于 1 个单个图片框，不适用于表单中的所有图片框。我不明白为什么......如果有人可能知道如何在每个函数中添加一个异常，这样我就可以保留我的图片框1

像这样的东西

```
For each picturebox(except(picturebox1)) in me.controls 
```

因为我已经搜索过但没有找到任何东西......

非常感谢任何帮助:) 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:38:28.477

一种方法：

```
For Each PictureBox In Me.Controls
  If PictureBox IsNot PictureBox1 AndAlso PictureBox1.Bounds.IntersectsWith(PictureBox.Bounds) Then
     collision = True
     Exit For 'Exit when at least one collision found 
  Else : collision = False
  End If
Next 
```

`False`如果 PictureBox 确实是 PictureBox1 ，这将设置碰撞。但请注意，您正在覆盖每个循环中的碰撞状态，这不是您真正想要的。当发现一次冲突时，您应该退出 for 循环（请参阅我的代码）。您也可以像这样更改您的代码：

```
collision = False
For Each PictureBox In Me.Controls
  If PictureBox IsNot PictureBox1 AndAlso PictureBox1.Bounds.IntersectsWith(PictureBox.Bounds) Then
     collision = True
     Exit For
  End If
Next 
```

# emacs - 带有大写字母的 Emacs 缩写

> ID：15311261
> 
> 赞同：1
> 
> 时间：2013-03-09T13:33:55.380
> 
> 标签：emacs, match, capitalization, abbreviation

通常，当我在 Emacs 中使用缩写时，缩写会被扩展，以便根据您如何将缩写大写，您会得到不同的输出（例如，请参见[http://flylib.com/books/en/2.27.1.40/1/](http://flylib.com/books/en/2.27.1.40/1/)中的表 3.7 ）。我使用了大量的缩写，这对我来说很少有用。我更希望 Emacs 不扩展缩写，除非它与我编写缩写的方式完全匹配。例如，如果我写了 "lc" -> lambchop，我希望 Emacs 不扩展 "lC" 或 "Lc" 而只是 "lc"。

我没有太多使用 Lisp 的经验，我花了好几个小时试图改变这一点。有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:42:47.457

根据文档字符串`define-abbrev`：

> *   `:case-fixed': non-nil 表示在不折叠大小写的情况下查找缩写，并且扩展不大写/大写。

要禁用大小写折叠，`:case-fixed`请在您使用的缩写表上设置为 true：

```
(abbrev-table-put global-abbrev-table :case-fixed t) 
```

或者，对所有缩写表执行此操作：

```
(dolist (tbl abbrev-table-name-list)
  (abbrev-table-put tbl :case-fixed t)) 
```

# gcc - GCC/Clang 的 -framework 选项是否适用于 Linux？

> ID：15311263
> 
> 赞同：7
> 
> 时间：2013-03-09T13:34:02.593
> 
> 标签：gcc, frameworks, clang, compiler-options

在 OSX 的开发环境中有框架的概念。框架是一种包含头文件、共享库和其他有用东西的包。可以将框架传递给编译器，以便编译器在搜索路径中包含其头文件，并使用其共享库来链接程序。

因此，例如，如果`-framework FrameworkName`在 OSX 上传递给 gcc 或 clang，编译器会查找`/System/Library/Frameworks`目录以找到该`FrameworkName.framework`目录。如果找到，编译器会包含它的头文件并将程序链接到它的共享库。

那么，这个超级有用的功能是否适用于 Linux？gcc 或 clang 能识别`-framework`Linux 上的选项吗？当我在 Linux 上键入这个选项时，编译器似乎无法识别它，但这可能是因为我需要在它之前设置 frameworks 目录路径。有什么特别的技巧可以让它在 Linux 上运行吗？或者这在这个平台上绝对不可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T13:43:46.380

不，它不适用于 Linux。框架是 (OS X) [Mach-O ABI](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/MachORuntime/Reference/reference.html)的一个特性。理论上，您可以编写一个内核模块来支持 Mach-O，并提供链接器/加载器用户空间工具。这将是[很多工作](https://unix.stackexchange.com/questions/3322/what-makes-osx-programs-not-runnable-on-linux)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-06T09:42:55.810

我在 FreeBSD 上使用它，所以是的框架应该可以在 Linux 上运行。框架只是头文件、资源和 lib 文件的自包含文件夹。该库可以具有 ELF 格式，并且您不需要 mach-o 支持。

所以这取决于你想做什么。

*   如果您希望使用 Cocoa 框架，那么您很可能不会在 linux 上使用它。但是，如果您在 Foundation 框架中寻找对象，您可以通过安装 GNUStep 来获得它。

*   如果您想构建自己的框架，这也是可能的。在 GNUStep 中，您会找到一些帮助文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-11-09T16:46:44.513

这段引文展示了如何在不同平台上编译 OpenCL 代码，程序名为`user_buffer`：

“在 OSX 上，您可以通过在终端上运行以下命令来编译程序：

```
gcc -std=c99 -Wall -DUNIX -g -DDEBUG -DAPPLE -arch i386 -o user_buffer user_buffer.c \
-framework OpenCL 
```

在带有 Intel OpenCL SDK 的 Ubuntu Linux 12.04 上，命令如下：

```
gcc -std=c99 -Wall -DUNIX -g -DDEBUG -m64 -o user_buffer user_buffer.c -I . -I /usr/include \
-L/usr/lib64/OpenCL/vendors/intel -lintelocl -ltbb -ltbbmalloc -lcl_logger -ltask_executor 
```

在带有 AMD APP SDK v2.8 的 Ubuntu Linux 12.04 上，命令如下：

```
gcc -std=c99 -Wall -DUNIX -g -DDEBUG –m64 -o user_buffer user_buffer.c \
-I. –I/opt/AMDAPP/include –L/opt/AMDAPP/lib/x86_64 –lOpenCL 
```

来自[https://www.academia.edu/22200475OpenCL_Parallel_Programming_Development_Cookbook](https://www.academia.edu/22200475OpenCL_Parallel_Programming_Development_Cookbook)

对于 Linux 上的 Nvidia OpenCL SDK，对于名为“vectoradd”的程序：

```
g++ -I ~/NVIDIA_GPU_Computing_SDK/OpenCL/common/inc/ -lOpenCL vectoradd.cpp –o vectoradd 
```

来自 Nvidia OpenCL 入门指南，可从 [https://uloz.to/!nY4NzLAG/nvidia-opencl-examples-cuda-4-2-9-sdk-zip](https://uloz.to/!nY4NzLAG/nvidia-opencl-examples-cuda-4-2-9-sdk-zip)

# jquery - 悬停淡出jQuery问题

> ID：15311264
> 
> 赞同：2
> 
> 时间：2013-03-09T13:34:02.603
> 
> 标签：jquery, hover

我有一个带有 3 个图像滑块的页面。如果您将鼠标悬停在滑块的左侧，则会出现一个显示向左方向的箭头并替换鼠标。如果您将鼠标悬停在滑块的右侧，则会出现一个显示正确方向的箭头并替换鼠标。而且，这些箭头出现和消失的淡入淡出（这就是我使用 jQuery 而不是 css 光标属性的原因）。

我做了所有这些，但问题是当鼠标*仅从左到右底部*退出滑块时，箭头不会消失，直到您将鼠标移动到另一个方向。

所以这是我的代码，首先是 HTML 部分：

```
<div id="arrow-prev" class="arrow">
<img id="cursorimg_prev" src="style/arrow-left.png" />
</div>

<div id="arrow-next" class="arrow">
<img id="cursorimg_next" src="style/arrow-right.png" />
</div> 
```

CSS：

```
.arrow
{
height: 585px;
width: 750px;
position: absolute;
top: 0px;
}

#arrow-prev
{
left: 0px;
cursor: none;
width:50%;
}

#arrow-next
{
right: 0px;
cursor:none;
width:50%;
}

#cursorimg_prev,
#cursorimg_next
{
position: absolute;
display: none;
z-index: 99;
} 
```

和 jQuery 部分：

```
$('#arrow-prev').mousemove(function(event) {
            var position = $('.slider_conteneur').position();
            var x = event.pageX - position.left - 0;
            var y = event.pageY - position.top - 0;
            $('#cursorimg_prev').css({ top: y+"px", left: x+"px" });
        });

        $('#arrow-prev').hover(function() {
            $('#cursorimg_prev').stop().fadeIn(100);
        }, function(){
            $('#cursorimg_prev').stop().fadeOut(100);
        });

        $('#arrow-next').mousemove(function(event) {
        var position = $('.slider_conteneur').position();
        var position2 = $('#arrow-next').position();

        var x = event.pageX - position.left - position2.left;
        var y = event.pageY - position.top - position2.top;
        $('#cursorimg_next').css({ top: y+"px", left: x+"px" });
        });

        $('#arrow-next').hover(function() {
            $('#cursorimg_next').stop().fadeIn(100);
        }, function(){
            $('#cursorimg_next').stop().fadeOut(100);
        }); 
```

希望有人能帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:26:26.287

我认为您的错误是您正在查看 .arrow div 上的悬停，它们每个占可见区域的一半。并且悬停效果将可见，直到您的鼠标移到 div 的区域

我更改了一些东西（主要是 css 来调整容器的大小，这可以通过多种方式完成）并将其上传到 jsfiddle（用替代文本替换我没有的图像，但它应该具有相同的目的），我还删除了 mousemove 事件，因为它们会导致很多错误。

我希望我正确理解了你的问题

[http://jsfiddle.net/fESVm/](http://jsfiddle.net/fESVm/)

```
 .arrow
     {
     height: 585px;
     width: 28px;
     position: absolute;
     margin-right:182px;
     top: 0px;
     } 
```

# wordpress - ...wp-includes\class-wp-customize-control.php 的第 160 行出现 wordpress 错误，同时为额外功能添加挂钩

> ID：15311266
> 
> 赞同：1
> 
> 时间：2013-03-09T13:34:42.967
> 
> 标签：wordpress, hook, customization, member-functions

**提前感谢您对此的任何帮助**，错误调用成员函数 check_capabilities()

卡在这个车辙！

目录布局：

*   '主题文件夹'
    *   functions.php（“主题”的主目录）
    *   索引.php
    *   样式.css
    *   功能文件夹（位于“主题文件夹”内）
        *   自定义.php

函数调用customize.php，如下所示：

```
<?php require_once('functions/customize.php'); ?> 
```

定制.php：

```
<?php
add_action('customize_register', 'adaptive_customize_register');
function adaptive_customize_register($wp_customize) {
//logo
$wp_customize->add_section('adaptive_logo', array(
'title' => __('Add Logo', 'adaptive_framework'), 
'description' => __('Upload your main logo, this shows in the header',      'adaptive_framework'), 
'priority' => '25'
));
    $wp_customize->add_setting('adaptive_custom_settings[add_logo]', array(
    'default' => 0,
    'type' => 'option'
));

$wp_customize->add_control('adaptive_custom_settings[display_logo]', array(
    'label' => __('Display logo?','adaptive_framework'),
    'section' => 'adaptive_logo',
    'settings' => 'adaptive_custom_settings[display_top_logo]',
    'type' => 'checkbox'
    ));
}

?> 
```

如果有人可以提供帮助，请因为我收到如下错误：

```
Fatal error: Call to a member function check_capabilities() on a non-object in C:\xampp\htdocs\wordpress\wp-includes\class-wp-customize-control.php on line 160 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-10T07:35:18.303

add_control() 的设置参数必须与 add_setting() 中定义的设置名称相匹配。否则，控件将添加到导致功能错误的未知设置。

因此`adaptive_custom_settings[display_top_logo]`改为`adaptive_custom_settings[add_logo]`

```
 <?php
    add_action('customize_register', 'adaptive_customize_register');
    function adaptive_customize_register($wp_customize) {
    //logo
    $wp_customize->add_section('adaptive_logo', array(
        'title' => __('Add Logo', 'adaptive_framework'), 
        'description' => __('Upload your main logo, this shows in the header',         'adaptive_framework'), 
        'priority' => '25'
    ));
    $wp_customize->add_setting('adaptive_custom_settings[add_logo]', array(
        'default' => 0,
        'type' => 'option'
    ));

    $wp_customize->add_control('adaptive_custom_settings[display_logo]', array(
        'label' => __('Display logo?','adaptive_framework'),
        'section' => 'adaptive_logo',
        'settings' => 'adaptive_custom_settings[add_logo]',
        'type' => 'checkbox'
    ));
    }
    ?> 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-23T16:59:56.270

不得不结束这个线程，因为我现在不再需要我使用的代码，我将寻求在线示例中的完成代码。

# token - 创建令牌以在 RP 应用程序中进行身份验证

> ID：15311270
> 
> 赞同：0
> 
> 时间：2013-03-09T13:34:59.060
> 
> 标签：token, wif, saml

我在 Sharepoint 中创建了一些身份验证模型。我想从你那里知道这是个好方法。

我们有一些 IDP 在 2.0 版中发送 POST SAML 令牌，但 RP 应用程序在该版本中不支持 SAML，但在 v1.1 中。

我为此模型创建了：

1.  IDP 将 SAML 2.0 发送到 SAMLHandler.aspx 页面

2.  SAMLHandler.aspx 验证 SAML 2.0（签名）中的令牌并从中检索声明集合

3.  根据一组声明，我在 Sharepoint 支持的 v1.1 中创建了 SAML 令牌，并且此令牌由带有密码的某些证书​​签名（此证书已添加到 Sharepoint Manage Trust 存储中）。

4.  此 SAML 令牌 v1.1 打包在 WIF 消息中并发送到识别声明的 Sharepoint，最后用户通过身份验证可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:52:01.543

您可以使用 ACS（Azure 控制服务）之类的解决方案而不是 SAMLHandler.aspx，这样您就可以处理多个 IDP 并创建单点登录。

基本上你的解决方案看起来不错，但重新反转现有的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T02:50:28.173

您可以查看安全令牌服务。它可用于将一个安全令牌与另一个安全令牌交换。在您的情况下，您需要将 SAML 2.0 令牌与 SAML 1.1 令牌交换。安全令牌服务还支持令牌验证和令牌签名。

# java - 无法将 .csv 转换为 .arff 文件

> ID：15311272
> 
> 赞同：1
> 
> 时间：2013-03-09T13:35:05.753
> 
> 标签：java, class, csv, weka, arff

我运行以下命令： java weka.core.converters.CSVLoader filename.csv > filename.arff

但我有一个错误告诉我：找不到或加载主类 weka.core.converters.CSVLoder。

问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T15:56:22.363

我认为问题在于 weka.jar 不在您的类路径中。

您可以将 weka.jar 添加到您的类路径中，或者运行相同的命令但添加 weka 的类路径：

```
java -cp "%CLASSPATH;C:\progs\Weka-3-6\weka.jar" weka.core.converters.CSVLoader filename.csv > filename.arff 
```

# git - EC2 和 git (bitbucket) 和多个用户：权限

> ID：15311279
> 
> 赞同：1
> 
> 时间：2013-03-09T13:36:02.907
> 
> 标签：git, permissions, amazon-ec2, bitbucket

我有一个 Amazon EC2 实例，我与同事共享访问权限（通过相同的 ssh 密钥）。他将此 ssh 密钥添加到他的 Bitbucket 帐户中。我已授予他对我的 Bitbucket 存储库的完全访问权限。

当他做的时候，`git pull`一切都很顺利。当我这样做时，我得到一个`Permission denied (publickey)`.

这里可能是什么问题？

# javascript - JavaScript 指导卡住了

> ID：15311282
> 
> 赞同：0
> 
> 时间：2013-03-09T13:36:08.373
> 
> 标签：javascript, asp.net

```
<script type="text/javascript">
    function direct() {
        location.href = "http://www.google.com/";

    }
</script>

<asp:LinkButton ID="lnkdirect" runat="server" OnClientClick="direct()">Home</asp:LinkButton> 
```

我在 OnClientClick 上调用我的 js 代码，但此按钮无法指向“google”

我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:49:22.047

由于 LinkBut​​ton 正在回发到服务器，因此客户端脚本永远没有机会正确执行。你需要改变你`OnClientClick`的返回false：

```
<asp:LinkButton runat="server" id="lnkDirect" OnClientClick="direct();return false">Home</asp:LinkButton> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:39:15.573

尝试`window.location`

```
<script type="text/javascript">
    function direct() {
        window.location = "http://www.google.com/";

    }
</script> 
```

# c# - Marshal.StructureToPtr 的访问冲突

> ID：15311286
> 
> 赞同：0
> 
> 时间：2013-03-09T13:36:46.837
> 
> 标签：c#, sockets, memory, struct, marshalling

嗨，我有这个结构

```
 [StructLayout (LayoutKind.Sequential)]
 public struct Transfer_packet 
        {
            public int  _packet_type; // 0 is action 1 is data
            public int _packet_len; // length of data
            public byte[] _data;//;= new byte[DataLenght];
            public void fill()
            {

            }
            public byte[] deserialize()
            {
                int size = System.Runtime.InteropServices.Marshal.SizeOf(this);
                byte[] arr = new byte[size];
                IntPtr ptr = System.Runtime.InteropServices.Marshal.AllocHGlobal(size);
                System.Runtime.InteropServices.Marshal.StructureToPtr(this, ptr, true);  // error raised
                System.Runtime.InteropServices.Marshal.Copy(ptr,arr,0,size);
                System.Runtime.InteropServices.Marshal.FreeHGlobal(ptr);
                return arr;
            }
        } 
```

我正在尝试将结构的内容转换为字节数组，以便通过网络发送它并在另一台计算机上检索它，但在代码中（如上所述）我得到了一个错误：

> 尝试读取或写入受保护的内存。

这通常表明某些内存已损坏。我不知道为什么，对我来说一切都很好，但元帅正试图访问受保护的内存......

如何将结构实例转换为字节数组？我用简单的 C++ 完美地完成了它，`memcpy`但在 C# 中我做不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:53:30.573

该`true`参数要求框架删除源内存。当然，这个内存不是由编组器分配的，所以它失败了。请尝试以下操作：

```
System.Runtime.InteropServices.Marshal.StructureToPtr(this, ptr, false); 
```

# php - 在 Windows 服务器上生成时间戳的 PHP 问题 - 在线问题而不是开发人员

> ID：15311287
> 
> 赞同：1
> 
> 时间：2013-03-09T13:36:51.203
> 
> 标签：php, windows, datetime, iis, wamp

第一次海报所以请放轻松。我正在运行 WAMP 服务器的 Windows 7 机器上进行开发，并且默认配置没有更改。IIS 已关闭。

在我的网站中，我有一个类方法来记录用户采取的行动。在此方法中，我在 unix 中获取时间戳并将其保存到数据库中。在开发机器上，这工作正常，但是当我把它放到网上时，我得到了一个错误。

**HTTP 错误 500（内部服务器错误）：服务器尝试完成请求时遇到了意外情况。**

我通过代码跟踪问题到这一点：

```
// get date stamp
$date = date_create();
$datestamp = date_timestamp_get($date);  // ERROR HAPPENS HERE 
```

我已经尝试过这种方法和 OOP 方法并且在本地工作正常，但是在我的完整服务器上失败了，这是一个运行 IIS 的 Windows 服务器。

我仔细检查了 PHPINFO.php 是否存在差异，但看不到任何会影响此设置的内容 - 任何帮助都将不胜感激。

亲切的问候

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T22:59:59.843

我相信您必须设置一个 date.timezone 才能在 php.ini 中从 php 5.3 开始执行此操作

date.timezone = "欧洲/伦敦"

或您所在地区的有效时区字符串

# asp.net-mvc-3 - 隐式验证属性

> ID：15311288
> 
> 赞同：0
> 
> 时间：2013-03-09T13:36:51.427
> 
> 标签：asp.net-mvc-3, validation

我有一个自定义数据类型`Money`，我正在为其创建服务器和客户端验证。将自定义验证属性应用于每个视图模型中的每个属性是乏味的。有没有一种方法可以一次性将验证属性设置为所有`Money`属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:21:26.443

您可以在 Money 类型中实现[IValidatableObject 。](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.ivalidatableobject.aspx)

然后重写[Validate](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.ivalidatableobject.validate.aspx)方法，一次性完成所有验证。

[这是来自MSDN](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvccustomvalidation_topic4.aspx)的示例

# objective-c - (NSTimer) 创建定时器倒计时

> ID：15311289
> 
> 赞同：6
> 
> 时间：2013-03-09T13:36:52.567
> 
> 标签：objective-c, xcode, nstimer

我正在尝试创建一个简单的倒数计时器，以便当玩家进入我的游戏时，计时器从 60 开始下降到 0。这看起来很简单，但我对如何编写这个感到困惑。

到目前为止，我在 GameController.m 中创建了一个方法，如下所示：

```
-(int)countDownTimer:(NSTimer *)timer {
    [NSTimer scheduledTimerWithTimeInterval:-1
                                 invocation:NULL
                                    repeats:YES];
    reduceCountdown = -1;
    int countdown = [[timer userInfo] reduceCountdown];
    if (countdown <= 0) {
        [timer invalidate];
    }
    return time;
} 
```

在游戏开始时，我将整数 Time 初始化为 60。然后在 ViewController 中设置标签。但是在我编译代码的那一刻，它只是在 60 处显示标签并且根本没有减少。

任何帮助将不胜感激 - 我是 Objective-C 的新手。

* * *

**编辑**

在一些帮助下，我现在将代码分成 2 个单独的方法。代码现在如下所示：

```
-(void)countDown:(NSTimer *)timer {
    if (--time == 0) {
        [timer invalidate];
        NSLog(@"It's working!!!");
    }
}

-(void)countDownTimer:(NSTimer *)timer {
    NSLog(@"Hello");
    [NSTimer scheduledTimerWithTimeInterval:1
                                      target:self
                             selector:@selector(countDown:)
                                      userInfo:nil
                                      repeats:YES];
} 
```

**但是**，代码仍然无法正常运行，当我从视图控制器调用方法 [game countDownTimer] 时，它会中断说：“无法识别的选择器已发送到实例”。任何人都可以解释这里有什么问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-09T13:49:06.380

您的代码有几个问题：

*   **您为时间间隔传递了错误的参数**- 负数被解释为 0.1 毫秒
*   **您正在调用错误的重载**- 您应该传递一个调用对象，但您正在传递一个`NULL`
*   **您将要在计时器上执行的代码与计时器初始化放在一起**- 需要在计时器上执行的代码应该放在单独的方法中。

您应该调用采用选择器的重载，并传递`1`间隔，而不是`-1`.

声明`NSTimer *timer`and `int remainingCounts`，然后添加

```
timer = [NSTimer scheduledTimerWithTimeInterval:1
                                         target:self
                                       selector:@selector(countDown)
                                       userInfo:nil
                                        repeats:YES];
remainingCounts = 60; 
```

到要开始倒计时的地方。然后添加 countDown 方法本身：

```
-(void)countDown {
    if (--remainingCounts == 0) {
        [timer invalidate];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T13:51:27.030

试试这个

```
- (void)startCountdown
{
    _counter = 60;

    NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:1
                                                      target:self
                                                    selector:@selector(countdownTimer:)
                                                    userInfo:nil
                                                     repeats:YES];
}

- (void)countdownTimer:(NSTimer *)timer
{
    _counter--;
    if (_counter <= 0) { 
        [timer invalidate];
        //  Here the counter is 0 and you can take call another method to take action
        [self handleCountdownFinished];
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T13:46:38.190

根据您提出的问题。您可以通过每 1 秒调用一个函数并处理其中的递减逻辑来实现这一点。

片段：-

```
NSTimer *t = [NSTimer scheduledTimerWithTimeInterval: 1.0
                      target: self
                      selector:@selector(onTick:)
                      userInfo: nil repeats:YES];
(void)onTick
{
   //do what ever you want
   NSLog(@"i am called for every 1 sec");
//invalidate after 60 sec [timer invalidate];
} 
```

# android - Android是否可以使用并发插值器？

> ID：15311290
> 
> 赞同：6
> 
> 时间：2013-03-09T13:37:06.373
> 
> 标签：android, animation, interpolation

我有一组两个动画，两个动画都使用过冲插值器一起运行

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:interpolator="@android:anim/overshoot_interpolator" >

    <translate
        android:duration="6000"
        android:fromXDelta="100%" android:toXDelta="0%" />

    <scale
        android:duration="6000"
        android:fromXScale="1.0" android:toXScale="0.6"
        android:pivotX="0"
        android:fromYScale="1.0" android:toYScale="1.0"
        android:repeatCount="1"
        android:repeatMode="reverse" />
</set> 
```

我希望`translate`动画过冲，`scale`动画加速。
我试图这样做，但它不起作用：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:interpolator="@android:anim/overshoot_interpolator"
        android:duration="6000"
        android:fromXDelta="100%" android:toXDelta="0%" />

    <scale
        android:interpolator="@android:anim/accelerate_interpolator"
        android:duration="6000"
        android:fromXScale="1.0" android:toXScale="0.6"
        android:pivotX="0"
        android:fromYScale="1.0" android:toYScale="1.0"
        android:repeatCount="1"
        android:repeatMode="reverse" />
</set> 
```

对于在单个对象上执行的所有动画，似乎只有一个插值器可以在给定时间处于活动状态。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-10T07:09:14.240

这只是猜测工作。我记得其中一个`AnimationSet`构造函数可以接受一个参数，即*shareInterpolator*。

从参数的名称来看，在您的情况下，这可能应该设置为 false。现在，它应该使用默认的“值”。这个默认值很可能是*正确*的，因为尽管您为每个动画指定了不同的插值器，但您的动画没有不同的插值器。

为了确认，AnimationSet 的源代码有以下行来为 shareInterpolator 赋值（来自 xml）：

```
setFlag(PROPERTY_SHARE_INTERPOLATOR_MASK, 
        a.getBoolean(com.android.internal.R.styleable.AnimationSet_shareInterpolator
             , true)); 
```

这显然意味着如果未指定此布尔值，它将默认为 true。

* * *

**解决方案**

为了解决你的问题，我想你应该使用这个“R.styleable.AnimationSet_shareInterpolator”来指定它。这仅意味着***添加*** ***到您的******元素****`android:shareInterpolator="false"`* ***`<set>`***

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T02:34:25.120

我把动画分开，把一个放在一个上`ImageView`，另一个放在`RelativeLayout`包含图像视图的一个上。

译者

```
<?xml version="1.0" encoding="utf-8"?>

<set xmlns:android="http://schemas.android.com/apk/res/android">

    <translate
            android:interpolator="@android:anim/overshoot_interpolator"
            android:duration="6000"
            android:fromXDelta="100%" android:toXDelta="0%" />

</set> 
```

标量

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <scale
            android:interpolator="@android:anim/accelerate_interpolator"
            android:duration="6000"
            android:fromXScale="1.0" android:toXScale="0.6"
            android:pivotX="0"
            android:fromYScale="1.0" android:toYScale="1.0"
            android:repeatCount="1"
            android:repeatMode="reverse" />
</set> 
```

xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@+id/previousItem"
                    android:layout_height="wrap_content"
                    android:layout_alignParentBottom="true"
                    android:layout_alignParentLeft="true"
                    android:onClick="goToPreviousItem"
                    android:layout_margin="@dimen/float_from_edges"
                    android:layout_width="wrap_content"
            >
        <ImageView android:id="@+id/previousItemArrow"
                   android:layout_width="wrap_content"
                   android:layout_height="wrap_content"
                   android:background="@drawable/arrow_left"
                />
    </RelativeLayout> 
```

以及煽动它的源代码：

```
RelativeLayout previousItemButton = (RelativeLayout)findViewById(R.id.previousItem);
    ImageView myButton = (ImageView)findViewById(R.id.previousItemArrow);
    Animation translator =
            AnimationUtils.loadAnimation(this, R.anim.translator);
    myButton.startAnimation(translator);

    Animation scalor =
            AnimationUtils.loadAnimation(this, R.anim.scalor);
    previousItemButton.startAnimation(scalor); 
```

我觉得它看起来很不错。我不确定你希望得到什么效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:11:28.143

```
This xml works with both interpolators check this

<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" 
        android:shareInterpolator="false">

    <translate
        android:interpolator="@android:anim/overshoot_interpolator"
        android:fromXDelta="100%" android:toXDelta="0%"
        android:duration="500" />

    <scale
        android:interpolator="@android:anim/accelerate_interpolator"
        android:fromXScale="1.0" android:toXScale="0.6"
        android:pivotX="0"
        android:fromYScale="1.0" android:toYScale="1.0"
        android:repeatCount="1"
        android:repeatMode="reverse"
        android:startOffset="500"
        android:duration="1000" />
</set> 
```**

# oracle - Oracle 数据建模器：切换到鱼尾纹表示法

> ID：15311291
> 
> 赞同：0
> 
> 时间：2013-03-09T13:37:15.433
> 
> 标签：oracle, oracle-sqldeveloper

这是标准符号：

![在此处输入图像描述](../Images/5f031c1c28850cf1bd96b9b69c909d06.png)

我想要这样的东西：

![在此处输入图像描述](../Images/3ba5c778b4996378bba710616d10cfc6.png)

可以以某种方式改变吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:14:24.170

据我所知，我们可以更改逻辑建模工具的符号，但不能更改物理绘图仪。

但是，您应该在 OTN Data Modeler 论坛上提出这个问题，[您可以在此处找到](https://forums.oracle.com/forums/forum.jspa?forumID=1317&start=0)该论坛。SQL 开发团队的成员定期在该论坛上回复；他们可能知道这样做的方法，如果没有，您可以将其作为更改请求提出建议。

# javafx-2 - 数字字段 javafx

> ID：15311296
> 
> 赞同：0
> 
> 时间：2013-03-09T13:37:38.520
> 
> 标签：javafx-2

我是新的 un javafx，我对 textField 有一点问题。

有了这个字段，我只得到一个带有 getText 方法的字符串。

我没有找到如何创建 numberField 来获取整数而不是字符串。

是否存在这样的字段或者我必须自己创建它？

在这种情况下如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:51:51.703

JavaFX中存在IntegerField，但它是一个内部类（例如，它用于颜色选择器的整数输入）。它是包私有的，不能从外部使用。

但是，您可以查看它的代码，并自己实现它。JavaFX 是部分开源的。您可以下载源代码并查看此内容。

```
com.sun.javafx.scene.control.skin.IntegerField 
```

控件的代码非常简单，并且皮肤类具有公共访问权限。所以，它会给你带来很大的麻烦。

顺便说一句，您可以在 jfx jira 中提交有关其发布的功能（或请求）。在这种情况下，它可能会在稍后的某个时间公开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-07T05:57:11.003

Java 8u40 引入了 TextFormatter。现在你可以这样做：

```
TextField numberField = new TextField();
numberField.setAlignment(Pos.CENTER_RIGHT);
numberField.setTextFormatter(new TextFormatter<>(new NumberStringConverter())); 
```

# asp.net - 如何在不使用 asp.net 中的 runat=server 的情况下从后面的代码将值/css 设置为 ASP 按钮？

> ID：15311299
> 
> 赞同：2
> 
> 时间：2013-03-09T13:37:58.943
> 
> 标签：asp.net, html, css, input

我有一个`HTML Button`：

```
 <asp:Button id="Button2" Text="Edit" class="but" runat="server"/>
<input id="Button2" type="button" value="Add" class="but" /> 
```

现在，我想在从后面的代码中`Add`单击时将“显示：无”设置为按钮`Edit`

ASP.NET。无需`runat="server"`申请`Add Button`。

帮助表示赞赏！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:44:14.110

为了实现这一点，您需要做几件事。

1.  在您的代码中创建一个具有您希望的样式的属性：

    ```
    public string AddButtonStyle { get; set; } 
    ```

2.  在按钮的标记中使用它：

    ```
    <input id="Button2" type="button" value="Add" class="but" 
                                               style="<%:AddButtonStyle %>" /> 
    ```

3.  在按钮单击事件中相应地设置此样式：

    ```
    AddButtonStyle = "display: none;"; 
    ```

您可能希望将属性初始化为`string.Empty`页面 init。

# php - aMember + Wordpress + bbPress -> 根据会员订阅在 bbPress 用户名下显示内容

> ID：15311304
> 
> 赞同：1
> 
> 时间：2013-03-09T13:38:21.693
> 
> 标签：php, css, wordpress, bbpress, amember

所以我有这个问题，我已经尝试了 3 天来寻找解决方案。

我在我的网站上安装了 Amember 会员插件、Wordpress 和 bbPress，它们都集成在一起以处理用户和订阅。

我要做的是在我的 bbPress 论坛中每个成员的用户名下显示不同的内容，具体取决于他们在 aMember 中的订阅。

她是当前在 bbPress 中显示排名的代码（我使用插件进行排名），在用户名下：

```
<?php echo cp_module_ranks_getRank(bbp_get_reply_author_id()); ?> 
```

所以 bbp_get_reply_author_id() 是获取用户名的字符串。

现在，为了根据 aMember 订阅显示不同的内容，我想我需要使用 bbp_get_reply_author_id() 来获取 bbpress 用户名，然后使用 aMember 的 API 来获取每个成员的订阅，并以某种方式让他们根据不同的内容显示不同的内容会员订阅。

这是我目前在我的网站上使用的代码（用于其他用途）来访问 aM​​ember API 并根据订阅显示不同的内容：

```
<?php if(am4Pluginsmanager::getAPI()->haveSubscriptions(array(1,2,3))) : ?> 
```

这太令人困惑和沮丧了。如果有人知道如何做到这一点，我将非常感谢您的帮助。

提前致谢。

# node.js - 如何从 mongoose 获取 mongodb 版本

> ID：15311305
> 
> 赞同：8
> 
> 时间：2013-03-09T13:38:24.753
> 
> 标签：node.js, mongodb, mongoose

很简单，使用 mongo cli：

```
db.version () 
```

我怎样才能对猫鼬做同样的事情？如何发送自定义命令？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-09T14:36:16.427

您可以通过 Mongoose 连接使用本机 mongo 驱动程序的[`Admin#buildInfo`](http://mongodb.github.com/node-mongodb-native/api-generated/admin.html#buildinfo)方法：

```
var mongoose = require('mongoose');

mongoose.connect('mongodb://localhost/test', function(err){
  var admin = new mongoose.mongo.Admin(mongoose.connection.db);
  admin.buildInfo(function (err, info) {
     console.log(info.version);
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-04T02:54:35.067

您可以`buildInfo`直接从您的 Mongoose 连接中查询。

```
var mongoose = require('mongoose');

mongoose.connect('mongodb://localhost/test', function(err) {
    mongoose.db.command({ buildInfo: 1 }, function (err, info) {
        console.log(info.version);
    });
}); 
```

[https://docs.mongodb.com/manual/reference/command/buildInfo/#dbcmd.buildInfo](https://docs.mongodb.com/manual/reference/command/buildInfo/#dbcmd.buildInfo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-20T00:44:51.253

试试这个，它会给你MongoDB和Mongoose的版本

```
async function run() {
    var admin = new mongoose.mongo.Admin(mongoose.connection.db);
    admin.buildInfo(function (err, info) {
       console.log(`mongodb: ${info.version}`);
       console.log(`mongoose: ${mongoose.version}`);
    });
}

mongoose.connect(process.env.MONGO_URI, {
        useNewUrlParser: true,
        useUnifiedTopology: true
    })
    .then(() => {
        console.log('MongoDB connected');
        run();
    })
    .catch(error => {
        console.log(error);
    }); 
```

# mysql - 查找所有具有父级的页面

> ID：15311308
> 
> 赞同：0
> 
> 时间：2013-03-09T13:38:30.883
> 
> 标签：mysql, sql, select

我怎样才能返回所有有孩子的页面？

所以我有一张标准桌子

*   pages.page_id
*   pages.parent_id

所以我想做这样的事情：

```
SELECT * FROM pages p 
WHERE COUNT(SELECT * FROM pages p2 WHERE p2.page_id = p.parent_id) < 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T13:41:25.433

这可以简单地使用来解决`JOIN`。为了使结果列表唯一，在语句中使用`DISTINCT`了关键字。`SELECT`

```
SELECT  DISTINCT a.*
FROM    pages a
        INNER JOIN pages b
            ON a.page_id = b.parent_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T13:42:04.053

您可以获得所有具有子页面的列表，如下所示：

```
select distinct(parent_id) from pages; 
```

然后，您可以使用这些父 ID 来获取父页面：

```
select * from pages,
             (select distinct(parent_id) as parent from pages) as parents
   where pages.page_id = parents.parent; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T13:56:00.680

找到有孩子指向它们的页面：

```
SELECT * 
FROM pages p 
WHERE EXISTS(
  SELECT * 
  FROM pages xx WHERE xx.parent_id = p.page_id
  ); 
```

要查找没有任何子项的页面，请更改`EXISTS`为`NOT EXISTS`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T13:52:05.857

不确定 thx 语法是否完全正确，但我会这样做：

```
select * from pages where page_id not in 
(select page_id from pages where parent_id is not null) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T15:21:24.657

如果您只需要页面的 ID，则无需自连接表。您可以简单地检索列 parent_id 的值。SQL 类似于：

```
SELECT DISTINCT parent_id
FROM   pages
WHERE  parent_id IS NOT NULL 
```

# java - 如何使用 BorderLayout 将两个组件放入 JPanel？

> ID：15311316
> 
> 赞同：9
> 
> 时间：2013-03-09T13:39:31.500
> 
> 标签：java, swing, jpanel, border-layout

基本上我想要做的是添加 2 张图片，并排在 JPanel 的中心和 JLabel 在 JPanel 的右侧，所以我被告知将 JPanel 的布局设置为 BorderLayout 并用 BorderLayout.CENTER 添加图片，用 BorderLayout.EAST 添加 JLabel。

```
JPanel panel = new JPanel();
panel.SetLayout(new BorderLayout(100,100));

panel.add(pic1,BorderLayout.CENTER);
panel.add(pic2,BorderLayout.CENTER);
panel.add(new JLabel("Example"), BorderLayout.EAST); 
```

实际上结果是图片在 JPanel 的左侧，而 JLabel 在 JPanel 的右侧。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-09T13:46:01.573

您需要做的是拥有另一个 JPanel，您可以在其中将一张图片添加到西方，并将一张图片添加到东方。然后将该 JPanel 添加到`panel`. 例如

```
JPanel p = new JPanel(new BorderLayout());

p.add(pic1,BorderLayout.WEST);
p.add(pic2,BorderLayout.EAST);

panel.add(p,BorderLayout.CENTER); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T13:47:20.810

BorderLayout 每个区域只允许一个组件。要么将它们放在不同的区域，例如，要么将它们包含在一个额外的 JPanel 中。或者使用不同的[LayoutManager](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html "布局管理器概述")。

# c# - 从 xml 文件调用方法

> ID：15311317
> 
> 赞同：2
> 
> 时间：2013-03-09T13:39:42.157
> 
> 标签：c#, reflection

我有一个名为 Methods.xml 的 xml 文件，如下所示

```
....
<Method>
        <MethodName>foo</MethodName>
        <MethodParams>fooString1, fooString2</MethodParams>
</Method>
<Method>
        <MethodName>foo</MethodName>
        <MethodParams>fooString5, fooString6</MethodParams>
</Method>
    .... 
```

我有如下方法

```
 void foo(string param1, string param2)
 {
    MessageBox.Show(param1 +" : " + param2);
 } 
```

我可以获得如下节点值，我想根据 xml 文件节点的值动态调用方法

```
XDocument _XDocument = XDocument.Load(@"Methods.xml");

var _XmlQuery = from _Element in _XDocument.Descendants("Method")
                select
                    new
                    {
                        _MethodName = _Element.XPathEvaluate("string(./MethodName)") as string,
                        _MethodParams = _Element.XPathEvaluate("string(./MethodParams)") as string,

                    };

foreach (var _Node in _XmlQuery)
{

    string _MethodName = _Node._Method.Trim();
    MethodInfo _Method = this.GetType().GetMethod(_MethodName);

    List<object> _Params = new List<object>();
    object[] _XmlParams = _Nodes.MethodParams.Split(',');
    foreach (object arg in XmlParams)
    {
        _Params.Add(arg);
    }
    _Method.Invoke(this, _Params.ToArray());

} 
```

但是当我调试时，我在这个**_Method.Invoke(this, _Params.ToArray());** 线。

提前致谢。

**已编辑**

错误消息是：对象引用未设置为对象的实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T14:15:45.320

默认情况下，`Type.GetMethod( string )`只返回标记为公共的方法。

您需要传递一些`BindingFlags`选项：

```
...GetMethod( _MethodName,
  BindingFlags.Public |
  BindingFlags.NonPublic |
  BindingFlags.Instance
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T14:16:35.123

我尝试了一个简单的 winforms 应用程序，上面只有一个按钮。在点击事件中，方法 foo 被调用。这是代码：

```
 private void button1_Click(object sender, EventArgs e)
    {
        MethodInfo val = this.GetType().GetMethod("Foo");
        val.Invoke(this, new object[] {"1", "2"});
    }

    public void Foo(string p1, string p2)
    {
        MessageBox.Show("");
    } 
```

And it works perfectly. If I make Foo private than i get the same execption as you. So you can either make Foo public or you have to set the BindingFlags.Public, BindingFlags.NonPublic and BindingFlags.Instance at the GetMethod-Method

# spring - 无需模拟与其他应用程序的连接的集成测试

> ID：15311319
> 
> 赞同：0
> 
> 时间：2013-03-09T13:39:51.280
> 
> 标签：spring, integration-testing

我有两个应用程序。我对其中一个应用程序进行了集成单元测试，但是调用另一个应用程序的服务是模拟的（我没有注入真正的服务，而是注入另一个模拟的服务）。

有没有一种可能的方法可以与其他应用程序建立真正的连接，而不必模拟它。

一个简单的例子会很有帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:39:31.743

只需注入真正的服务并进行集成测试。问题是确保所有需要注入的东西都可以注入。让我们调用你的服务 foo 和 bar，其中 foo 依赖于 bar。如果 bar 依赖于应用程序服务器中的某些内容，那么在单元期间启动它可能会出现问题，因为您没有在应用程序服务器中运行应用程序。

集成测试很重要也很有价值，但需要仔细考虑设置。我设法在我的应用程序中设置集成测试的方式是使用弹簧配置文件来分离配置组合。例如，我调用了配置文件。

*   生产
*   发展
*   容器
*   独立的

因此，您可以使用正确的配置文件启动测试，该配置文件设置所有要注入的正确 bean，就像这样。

```
@ActiveProfile(profiles={"deveolpment","standalone"})
@RunWith ... etc other spring annotations to configure a test 
public class SomeJunitTest {
} 
```

使用配置文件可以很容易地对为每个测试配置哪些 bean 集进行细粒度控制。

同样对于集成测试，我发现 TestNG 更容易使用 JUnit，因为它具有使编写集成测试更容易的功能。

# php - 如何使用 jQuery AJAX 和 PHP 数组返回

> ID：15311320
> 
> 赞同：10
> 
> 时间：2013-03-09T13:39:51.423
> 
> 标签：php, javascript, jquery, ajax, arrays

我有一个 jquery ajax 请求，例如；

```
$.ajax({
    type: 'POST',
    url: 'processor.php',
    data: 'data1=testdata1&data2=testdata2&data3=testdata3',
    cache: false,
    success: function(result) {
      if(result){
        alert(result);
      }else{
        alert("error");
      }
    }
}); 
```

处理程序`processor.php`设置为返回一个数组，如；

```
$array = array("a","b","c","d");
echo $array; 
```

我想基于此在客户端执行操作。假设数组 [0] 是“b”，我想提醒“嗨”。同样，如果数组 [2] 是“x”，我想提醒“你好”，依此类推。如何过滤数组元素以获取它们的数据？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-09T13:42:38.660

您必须返回以 json 形式编码的数组，如下所示

```
$array = array("a","b","c","d");
echo json_encode($array); 
```

然后你可以在javascript中访问它，将它转换回一个数组/对象，比如

```
var result = eval(retuned_value); 
```

您还可以使用 for 循环浏览所有数组元素

```
for (var index in result){
    // you can show both index and value to know how the array is indexed in javascript (but it should be the same way it was in the php script)
    alert("index:" + index + "\n value" + result[index]);
} 
```

* * *

在您的代码中，它应该类似于：

### PHP代码：

```
$array = array("a","b","c","d");
echo json_encode( $array ); 
```

### jQuery 脚本

```
$.ajax({
    type: 'POST',
    url: 'processor.php',
    data: 'data1=testdata1&data2=testdata2&data3=testdata3',
    cache: false,
    success: function(result) {
      if(result){
        resultObj = eval (result);
        alert( resultObj );
      }else{
        alert("error");
      }
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T13:50:16.837

[从 php http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)返回 JSON

并在 javascript 中从 json 字符串创建一个对象，您可以使用 getJSON 而不是 ajax [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

确保您的 php 设置正确的响应标头：

```
 header ("content-type: application/json; charset=utf-8"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-13T20:26:52.183

我找到了将数组从 php 返回到 Ajax (jscript) 的最佳方法：

在 php 方面：`echo json_encode($myArray);` 在 javascript 方面（例如`myAjax.responseText`） `replyVal = JSON.parse(myAjax.responseText);`

要将数组从 javascript 发送到 php，请使用匹配`JSON.stringify()`发送和 php`json_decode()`接收

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-15T02:56:58.823

在您的 PHP 代码中，将数组编码为 JSON 对象

```
echo json_encode($array); 
```

然后您需要将 JSON 对象转换为与 Javascript/jQuery 兼容的对象。之后，您可以转换回数组

```
$.ajax({
      success: function(result) {

      jq_json_obj = $.parseJSON(result); //Convert the JSON object to jQuery-compatible

      if(typeof jq_json_obj == 'object'){ //Test if variable is a [JSON] object
        jq_obj = eval (jq_json_obj); 

        //Convert back to an array
        jq_array = [];
        for(elem in jq_obj){
            jq_array.push(jq_obj[elem]);
        }
        console.log(jq_array);
      }else{
        console.log("Error occurred!"); 
      }
    }
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-07-12T03:51:46.087

```
$.ajax({  
    type: 'POST',  
    url: 'processor.php',//please return in json  
    dataType : 'json',//to get data in json   
    data: 'data1=testdata1&data2=testdata2&data3=testdata3',  
    cache: false,  
    success: function(result) {  
      if(result.array.length > 0){  
        for(var i=0;i<result.array.length;i++){  
            if(result.array.[i]== 'a'){  
               //do somthing..  
               //here, you can use switch case too...  
            }  
        }  
      }  
    }  
}); 
```

# node.js - 在 node.js 中，尝试使用下划线对多条消息进行分组，但不知道如何解析它

> ID：15311321
> 
> 赞同：0
> 
> 时间：2013-03-09T13:39:57.253
> 
> 标签：node.js, underscore.js

我正在使用node.js和redis接收json中的消息，普通测试中的消息是这样的

```
362S29MM09 36072 36071 ARRIVAL ARRIVAL ON TIME
362S29MM09 36075 36072 DEPARTURE DEPARTURE LATE
362K27MM09 36052 36050 ARRIVAL ARRIVAL ON TIME 
```

请注意，第一条和第二条消息是相同的，所以我希望将这些消息按第一个字段分组，我使用下划线对消息进行分组，但我不知道如何解析分组的消息。

```
{'type':362S29MM09,'st1':36072 ,'st2':36071 ,'event':ARRIVAL,'next_event':ARRIVAL,'status':LATE}

var groups =  underscore.groupBy(msg, function(obj){ return  obj.train_id}) ;   
console.log(groups); 
```

但它只显示

```
{ undefined:
   [ { header: [Object], body: [Object] },
     { header: [Object], body: [Object] },
     { header: [Object], body: [Object] } ] } 
```

如何进一步解析消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:48:42.630

我不太确定您的实际问题是什么（您正在分组`train_id`哪些不存在，`header`以及`body`从哪里来？）。

如果你想分组`type`，你可以使用这样的东西：

```
var underscore = require('underscore');

var msgs = [ 
{'type':'362S29MM09','st1':36072 ,'st2':36071 ,'event':'ARRIVAL','next_event':'ARRIVAL','status':'ON TIME'},
{'type':'362S29MM09','st1':36075 ,'st2':36072 ,'event':'DEPARTURE','next_event':'DEPARTURE','status':'LATE'},
{'type':'362K27MM09','st1':36052 ,'st2':36050 ,'event':'ARRIVAL','next_event':'ARRIVAL','status':'ON TIME'}
];

var groups = underscore.groupBy(msgs, function(obj){ return obj.type; }) ; 
console.log(groups); 
```

这导致此输出：

```
{ '362S29MM09': 
   [ { type: '362S29MM09',
       st1: 36072,
       st2: 36071,
       event: 'ARRIVAL',
       next_event: 'ARRIVAL',
       status: 'ON TIME' },
     { type: '362S29MM09',
       st1: 36075,
       st2: 36072,
       event: 'DEPARTURE',
       next_event: 'DEPARTURE',
       status: 'LATE' } ],
  '362K27MM09': 
   [ { type: '362K27MM09',
       st1: 36052,
       st2: 36050,
       event: 'ARRIVAL',
       next_event: 'ARRIVAL',
       status: 'ON TIME' } ] } 
```

# multithreading - 我们如何避免在引用 cocos2d-iphone (2.0.0) UI 类的异步调用中崩溃？

> ID：15311327
> 
> 赞同：0
> 
> 时间：2013-03-09T13:40:24.390
> 
> 标签：multithreading, cocos2d-iphone

在我使用 cocos2d-iphone 2.0.0 的 iOS 游戏中，我有一个图层会弹出一个精灵，要求用户购买应用内购买，并带有一个供用户单击购买的按钮 ( `menuItemBuyButton`)。当用户点击这个购买按钮时，会完成三件事：

*   活动指示器已启动
*   图层上的所有菜单项都被禁用 - 特别是主菜单（此代码在主菜单场景中）、购买按钮本身和弹出菜单
*   触发通常的购买调用和回调序列。

购买完成后，回调（在另一个线程上）需要：

*   停止活动指示器
*   重新启用禁用的菜单元素
*   用另一个导演替换场景

现在，当我运行此序列并通过反复单击购买按钮等进行测试时，仅一次（并且无法再次重现）我在代码中遇到了崩溃 - 代码和崩溃日志如下所示。我怀疑（并且可能是错误的）这是由于 cocos2d 的非线程安全性质。我该如何避免这种崩溃？我确实需要在开始购买交易之前禁用 UI 元素，并且必须在交易完成后重新启用它们，这将在另一个线程中发生。

代码如下：

```
-(void) startActivityIndicator {
    mainMenu.enabled = NO;
    scorePopupMenu.enabled = NO;
    menuItemBuyButton.isEnabled = NO;
    [activityIndicatorView startAnimating];
}

-(void) stopActivityIndicator {
    mainMenu.enabled = YES;
    scorePopupMenu.enabled = YES;//this is line 744 that crashed
    menuItemBuyButton.isEnabled = YES;
    if (activityIndicatorView.isAnimating)
        [activityIndicatorView stopAnimating];
} 
```

崩溃日志：

```
5   SmartRun        0x00126c4c -[MainMenuLayer stopActivityIndicator] (MainMenuLayer.m:744) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:09:43.987

Then disable repeated tap. Just disable touch once it is pressed and reenable once it is processed.

```
 node.touchEnabled = NO; //do this for all menu and layer

     (In Cocos2d 1.0 isTouchEnabled to NO) 
```

We also used inAp purchase in cocos2d game with activity indicator from UIKit. What we did is used activity indicator inside Alert view. That blocks user to do other UI switch.

```
-(void)ShowActivityIndicator
{
    if(!mLoadingView) //    UIAlertView     *mLoadingView;
    {
        mLoadingView = [[UIAlertView alloc] initWithTitle:@"" message:@"" delegate:self cancelButtonTitle:nil otherButtonTitles:nil];

        UIActivityIndicatorView *actInd = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
        actInd.frame = CGRectMake(128.0f, 45.0f, 25.0f, 25.0f);
        [mLoadingView addSubview:actInd];
        [actInd startAnimating];
        [actInd release];

        UILabel *l = [[UILabel alloc]init];
        l.frame = CGRectMake(100, -25, 210, 100);
        l.text = @"Please wait...";
        l.font = [UIFont fontWithName:@"Helvetica" size:16];
        l.textColor = [UIColor whiteColor];
        l.shadowColor = [UIColor blackColor];
        l.shadowOffset = CGSizeMake(1.0, 1.0);
        l.backgroundColor = [UIColor clearColor];
        [mLoadingView addSubview:l];
        [l release];
    }

    [mLoadingView show];
}

-(void)StopIndicator
{
    [mLoadingView dismissWithClickedButtonIndex:0 animated:NO];
} 
```

![enter image description here](../Images/9bdd35daf95d539d0b152e96758206f8.png)

# java - 数据不推送到浏览器？

> ID：15311330
> 
> 赞同：3
> 
> 时间：2013-03-09T13:40:30.457
> 
> 标签：java, jsp

我有一个带有 while (true) 的 JSP，其中数据被发送到浏览器。

```
while (true) {
    out.print("pushing some data to browser");
    out.flush();

    try {
        Thread.sleep(1000);
    } catch (InterruptedException e) {
    }
} 
```

它大部分时间都可以工作，但很少会以 1 秒的间隔将数据发送到浏览器。

而不是排队并同时抛出所有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:30:49.633

尝试添加

```
response.setBufferSize(0); 
```

在代码块的开头。默认情况下，响应总是被缓冲。您可以添加此行以禁用缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:26:07.443

Roman C 是对的，它不会像发布的那样编译。但如果你修复它，你会发现它在 Firefox 和 Chrome 中确实有效。但是，IE 不同。它一直等到获得大量文本才开始渲染。

```
IE needs some text here. zzzzzzzzzzzzzzz zzzzzzzzzzzzzzzzzzzzzzzzzzzzzz zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz
zzzzzzzzzzzzzzzzz zzzzzzzzzzzzzzzzzzzzzzzzzzzz zzzzzzzzzzzzzzzzzzzzzzzz zzzzzzzzzzzzzzzzzzzzzz zzzzzzzzzz
zzzzzz I guess this enough for IE to start to render now.
<%
  int x = 0;
  while (x < 10) {
     out.print("pushing some data to browser");
     out.flush();
     try {
          Thread.sleep(1000);
     } catch (InterruptedException e) {
  }
  x++;
}
%> 
```

# javascript - JavaScript cookie，跟踪访问

> ID：15311331
> 
> 赞同：1
> 
> 时间：2013-03-09T13:40:31.080
> 
> 标签：javascript

我想创建一种方法来跟踪用户访问页面的次数。

问题是，如果自上次访问以来超过 30 分钟，我只想增加 cookie 访问次数。

我怎么能这样做？

现在这是我必须设置和获取 cookie 的内容：

```
getCookie('xVisitors');
setCookie('xVisitors', 1, 120);

function setCookie(b, c, e) {
    var i = "";
    e > 0 && (i = new Date, i.setTime(i.getTime() + e * 6E4), i = "; expires=" + i.toGMTString());
    e = "";
    document.cookie = b + "=" + c + i + "; path=/;" + e
};

function getCookie(b) {
    for (var c = document.cookie.split(";"), e = 0; e < c.length; e++) {
        for (var i = c[e]; i.charAt(0) == " ";) i = i.substring(1, i.length);
            if (i.indexOf(b) == 0) return i.substring(b.length + 1, i.length);
        }
    return "";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:59:27.957

```
var cTime = new Date().getTime();
var numVisits = 1;
var xVisitors = getCookie('xVisitors').split('|');
if ( typeof xVisitors[1]!='undefined' ) {
  numVisits = ( (cTime-parseInt(xVisitors[1])) > (30*60) ) ? (xVisitors[0]+1) : xVisitors[0];
}
setCookie('xVisitors',numVisits+"|"+cTime,120); 
```

# c# - C# XML 序列化数组和多个类

> ID：15311333
> 
> 赞同：2
> 
> 时间：2013-03-09T13:40:33.233
> 
> 标签：c#, xml-serialization

我有序列化 XML 的问题，不知道如何咬它。我的 xml 文件应该如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<ItemBag>
     <Bag>
         <BagConfig Name="txt" ZenDrop="0" ItemRate = "100" ExcRate="100" AncientRate="0" SocketRate="0"/>
     </Bag>
     <Default>
         <DefaultConfig cat="1" id="1" minlv="0" maxlv="15" skill="1" luck="1" addopt="0" exc= "0" anc="0" sock="0" />
     </Default>
     <Items> 
         <Item cat="1" id="1" minlv="0" maxlv="15" skill="1" luck="1" addopt="0" exc="0" anc="0" sock="0" />
         <Item cat="7" id="21" minlv="7" maxlv="7" skill="0" luck="0" addopt="0" exc="1" anc="0" sock="0" />
         <Item cat="8" id="21" minlv="7" maxlv="7" skill="0" luck="0" addopt="0" exc="1" anc="0" sock="0" />
         <Item cat="9" id="21" minlv="7" maxlv="7" skill="0" luck="0" addopt="0" exc="1" anc="0" sock="0" />         
     </Items> 
</ItemBag> 
```

这是我的可序列化类：

```
[System.SerializableAttribute()]
        [System.Xml.Serialization.XmlTypeAttribute()]
        [System.Xml.Serialization.XmlRootAttribute(Namespace = "", IsNullable = false)]
        public partial class ItemBag
        {
            public ItemBagBag Bag;

            public ItemBagDefault Default;

            [System.Xml.Serialization.XmlArrayItemAttribute("Item", IsNullable = true)]
            public ItemBagItem[] Items;
        }

        [System.SerializableAttribute()]
        [System.Xml.Serialization.XmlTypeAttribute()]
        public partial class ItemBagBag
        {

            public ItemBagBagBagConfig BagConfig;
        }

        [System.SerializableAttribute()]
        [System.Xml.Serialization.XmlTypeAttribute()]
        public partial class ItemBagBagBagConfig
        {

            [System.Xml.Serialization.XmlAttributeAttribute()]
            public string Name;

            [System.Xml.Serialization.XmlAttributeAttribute()]
            public sbyte ZenDrop;
            //.......ETC
        }

        [System.SerializableAttribute()]
        [System.Xml.Serialization.XmlTypeAttribute()]
        public partial class ItemBagDefault
        {

            public ItemBagDefaultDefaultConfig DefaultConfig;
        }

        [System.SerializableAttribute()]
        [System.Xml.Serialization.XmlTypeAttribute()]
        public partial class ItemBagDefaultDefaultConfig
        {
            [System.Xml.Serialization.XmlAttributeAttribute()]
            public sbyte cat;

            [System.Xml.Serialization.XmlAttributeAttribute()]
            public sbyte id;
         //........ETC
        }

        [System.SerializableAttribute()]
        [System.Xml.Serialization.XmlTypeAttribute()]
        public partial class ItemBagItem
        {

            [System.Xml.Serialization.XmlAttributeAttribute()]
            public sbyte cat;

            [System.Xml.Serialization.XmlAttributeAttribute()]
            public sbyte id;
       //.......ETC
        } 
```

这是可序列化的方法

```
 static void SerializationToXml()
    {

        XmlSerializerNamespaces namespaces = new XmlSerializerNamespaces();
        namespaces.Add(string.Empty, string.Empty);

        ItemBag item = new ItemBag()

        {
            Bag = new ItemBagBag
            {
                BagConfig = new ItemBagBagBagConfig 
                { AncientRate = 1, ZenDrop = 1, ExcRate = 1, ItemRate = 1, Name = "ss", SocketRate = 1 }
            },
            Default = new ItemBagDefault
            {
                DefaultConfig = new ItemBagDefaultDefaultConfig 
                { addopt = 1, anc = 1, cat = 1, exc = 1, id = 1, luck = 1, maxlv = 1, minlv = 1, skill = 1, sock = 1, Value = "1" }
            },
            Items = new ItemBagItem[]
            {
                //doesent work :(
            }

        }; 
  TextWriter writer = new StreamWriter(@"c:\test.xml");
            try
            {
                XmlSerializer serializer = new XmlSerializer(typeof(ItemBag));
                serializer.Serialize(writer, item, namespaces);
                writer.Close();
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
        } 
```

我不知道如何制作一个项目数组（包和默认解析OK）我指望你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:04:18.773

你有没有帮个忙把事情收拾一下……工作也很好。

代码在这里：

```
internal class Program
    {
        private static void Main(string[] args)
        {
            ItemBag item = new ItemBag()
            {
                Bag = new Bag
                {
                    BagConfig = new BagConfig { AncientRate = 1, ZenDrop = 1, ExcRate = 1, ItemRate = 1, Name = "ss", SocketRate = 1 }
                },
                Default = new Default
                {
                    DefaultConfig = new DefaultConfig { Addopt = 1, Anc = 1, Category = 1, Exc = 1, ID = 1, Luck = 1, MaxLevel = 1, MinLevel = 1, Skill = 1, Sock = 1 }
                },
                Items = new List<Item>()
                {
                    { new Item { Addopt = 1, Anc = 1, Category = 1, Exc = 1, ID = 1, Luck = 1, MaxLevel = 1, MinLevel = 1, Skill = 1, Sock = 1 }}
                }
            };

            string serialized = item.XmlSerialize();

            Console.WriteLine(serialized);
            Console.ReadLine();
        }
    }

    [XmlRoot]
    public class ItemBag
    {
        public Bag Bag { get; set; }

        public Default Default { get; set; }

        [XmlArray("Items")]
        [XmlArrayItem("Item")]
        public List<Item> Items { get; set; }

        public ItemBag()
        {
            Bag = new Bag();
            Default = new Default();
            Items = new List<Item>();
        }
    }

    public class Bag
    {
        public BagConfig BagConfig { get; set; }

        public Bag()
        {
            BagConfig = new BagConfig();
        }
    }

    public class BagConfig
    {
        [XmlAttribute]
        public string Name { get; set; }

        [XmlAttribute]
        public int ZenDrop { get; set; }

        [XmlAttribute]
        public int ItemRate { get; set; }

        [XmlAttribute]
        public int ExcRate { get; set; }

        [XmlAttribute]
        public int AncientRate { get; set; }

        [XmlAttribute]
        public int SocketRate { get; set; }
    }

    public class Default
    {
        public DefaultConfig DefaultConfig { get; set; }

        public Default()
        {
            DefaultConfig = new DefaultConfig();
        }
    }

    public class DefaultConfig
    {
        [XmlAttribute("cat")]
        public int Category { get; set; }

        [XmlAttribute("id")]
        public int ID { get; set; }

        [XmlAttribute("minlv")]
        public int MinLevel { get; set; }

        [XmlAttribute("maxlv")]
        public int MaxLevel { get; set; }

        [XmlAttribute("skill")]
        public int Skill { get; set; }

        [XmlAttribute("luck")]
        public int Luck { get; set; }

        [XmlAttribute("addopt")]
        public int Addopt { get; set; }

        [XmlAttribute("exc")]
        public int Exc { get; set; }

        [XmlAttribute("anc")]
        public int Anc { get; set; }

        [XmlAttribute("sock")]
        public int Sock { get; set; }
    }

    public class Item
    {
        [XmlAttribute("cat")]
        public int Category { get; set; }

        [XmlAttribute("id")]
        public int ID { get; set; }

        [XmlAttribute("minlv")]
        public int MinLevel { get; set; }

        [XmlAttribute("maxlv")]
        public int MaxLevel { get; set; }

        [XmlAttribute("skill")]
        public int Skill { get; set; }

        [XmlAttribute("luck")]
        public int Luck { get; set; }

        [XmlAttribute("addopt")]
        public int Addopt { get; set; }

        [XmlAttribute("exc")]
        public int Exc { get; set; }

        [XmlAttribute("anc")]
        public int Anc { get; set; }

        [XmlAttribute("sock")]
        public int Sock { get; set; }
    } 
```

你可以使用这个扩展方法：

```
/// <summary>
        /// Serializes the specified System.Object and returns the serialized XML
        /// </summary>
        /// <typeparam name="T">This item's type</typeparam>
        /// <param name="item">This item</param>
        /// <param name="removeNamespaces">
        ///     <para>Specify whether to remove xml namespaces.</para>para>
        ///     <para>If your object has any XmlInclude attributes, then set this to false</para>
        /// </param>
        /// <returns>Serialized XML for specified System.Object</returns>
        public static string XmlSerialize<T>(this T item, bool removeNamespaces = true)
        {
            object locker = new object();

            XmlSerializerNamespaces xmlns = new XmlSerializerNamespaces();
            xmlns.Add(string.Empty, string.Empty);

            XmlSerializer xmlSerializer = new XmlSerializer(typeof(T));

            XmlWriterSettings settings = new XmlWriterSettings();
            settings.Indent = true;
            settings.OmitXmlDeclaration = true;

            lock (locker)
            {
                StringBuilder stringBuilder = new StringBuilder();
                using (StringWriter stringWriter = new StringWriter(stringBuilder))
                {
                    using (XmlWriter xmlWriter = XmlWriter.Create(stringWriter, settings))
                    {
                        if (removeNamespaces)
                        {
                            xmlSerializer.Serialize(xmlWriter, item, xmlns);
                        }
                        else { xmlSerializer.Serialize(xmlWriter, item); }

                        return stringBuilder.ToString();
                    }
                }
            }
        } 
```

将扩展方法放入某个静态类中..

# eclipse - Eclipse - 放置在版本管理系统中的最小工作空间目录

> ID：15311337
> 
> 赞同：2
> 
> 时间：2013-03-09T13:40:48.397
> 
> 标签：eclipse

我希望所有工作区设置都存储在 clearcase 中，并且能够使用 cp 命令创建一个新的工作区。我尝试从工作工作区中仅复制 .metadata/.plugins/org.eclipse.core.runtime/.settings 和 .metadata/.plugins/org.eclipse.core.resources/.projects - 但在新工作区项目资源管理器中没有显示任何项目/工作集。我在 Linux 上使用 eclipse Juno (4.2)。

== 将旧工作区复制到新工作区的脚本

```
#!/bin/csh -f

set old = old_workspace
set new = workspace2

rm -rf $new
mkdir -p $new
cd $new
mkdir -p .metadata/.plugins/org.eclipse.core.resources/.projects .metadata/.plugins/org.eclipse.core.runtime
cp -r $old/.metadata/.plugins/org.eclipse.core.runtime/.settings/    .metadata/.plugins/org.eclipse.core.runtime/
cp -r $old/.metadata/.plugins/org.eclipse.core.resources/.projects/* .metadata/.plugins/org.eclipse.core.resources/.projects/
chmod -R +w . 
```

=== 这是工作区的 .metadata/.plugins/ 的完整列表：

com.ibm.rational.clearcase.ccrefresh org.eclipse.debug.core org.eclipse.linuxtools.cdt.libhover org.eclipse.team.core net.sourceforge.eclipseccase org.eclipse.debug.ui org.eclipse.ltk。 core.refactoring org.eclipse.team.cvs.core org.eclipse.birt.chart.engine org.eclipse.dltk.core org.eclipse.ltk.ui.refactoring org.eclipse.ui.editors org.eclipse.cdt。核心 org.eclipse.e4.workbench org.eclipse.mylyn.bugzilla.core org.eclipse.ui.ide org.eclipse.cdt.make.core org.eclipse.epp.usagedata.recording org.eclipse.mylyn.context。核心 org.eclipse.ui.workbench org.eclipse.cdt.make.ui org.eclipse.equinox.p2.ui.sdk org.eclipse.mylyn.tasks.ui org.eclipse.ui.workbench.texteditor org.eclipse。 cdt.managedbuilder。核心 org.eclipse.jdt.core org.eclipse.pde.core org.eclipse.wst.jsdt.core org.eclipse.cdt.ui org.eclipse.jdt.launching org.eclipse.rse.core org.eclipse.wst .jsdt.ui org.eclipse.core.resources org.eclipse.jdt.ui org.eclipse.rse.ui org.eclipse.wst.xml.core org.eclipse.core.runtime org.eclipse.jst.jsp.core org.eclipse.searchcore.runtime org.eclipse.jst.jsp.core org.eclipse.searchcore.runtime org.eclipse.jst.jsp.core org.eclipse.search

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:21:40.737

您的脚本复制了工作区的设置 ($old/.metadata/...)，但您缺少工作区内容本身 ($old/filesAndDirectories)。

# css - em单位和百分比有什么区别？

> ID：15311338
> 
> 赞同：2
> 
> 时间：2013-03-09T13:40:52.200
> 
> 标签：css, percentage, em

我已经阅读了很多关于这个主题的文章（并搜索了 Q&A），我找到了，但我仍然不明白 em 单位和百分比之间的区别是什么。帮助？

PS我看过这个代码示例：

```
p { font-size: 10px; }
p { line-height: 120%; }  /* 120% of 'font-size' */ 
```

那应该是什么意思？为什么会有人想将行高设置为字体大小的百分比值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T13:02:39.040

好的，所以我决定总结一下答案。

*   line-height 的百分比值是相对于当前字体大小的。
*   em 单位总是相对于字体大小。
*   百分比取决于上下文。例如，如果它们用于字体大小，它们将相对于当前字体大小；如果它在高度，它们将相对于高度。
*   当父标签的字体大小声明为“小”、“中”或“大”时，它会发生一点变化，因为这些值受浏览器设置的影响。在这种情况下 1em =\= 100%，1em 似乎使设置比 100% 更“小”或更“大”，请在[此处阅读。](http://kyleschaeffer.com/user-experience/css-font-size-em-vs-px-vs-pt-vs/)

谢谢你们。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T13:45:10.873

行高通常是字体大小的倍数。事实上，它是唯一不需要指定单位的值：

```
p { line-height: 1.2; } /* = 1.2em = 1.2*font-size = 120% of font-size */ 
```

如果 line-height 与 font-size 成比例，则更容易调整字体大小，而不必担心固定的 line-height。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T14:13:53.153

1em = 100%、2em = 200%、1,4 em = 140% 等等。但是，它实际上取决于上下文。

`1em`表示“等于实际字体大小”，2 - “字体大小的 2 倍”。EM 适应用户设置。

当父标签的字体大小声明为“小”、“中”或“大”时，它会发生一点变化，因为这些值受浏览器设置的影响。当用户将客户端字体大小更改为“小”或“大”时，`1em`似乎会使字体比`100%`.

进一步阅读： [https ://kyleschaeffer.com/css-font-size-em-vs-px-vs-pt-vs-percent](https://kyleschaeffer.com/css-font-size-em-vs-px-vs-pt-vs-percent)

# facebook - 使用 iPhone 应用程序在 Facebook 上共享视频时出现“请求超时”错误

> ID：15311341
> 
> 赞同：1
> 
> 时间：2013-03-09T13:41:01.533
> 
> 标签：facebook, ios5, video, xcode4.5, session-timeout

我正在使用[此代码](http://developers.facebook.com/blog/post/2011/08/04/how-to--use-the-graph-api-to-upload-a-video--ios/)在 Facebook 上共享视频，它成功共享了小视频，但是当我尝试使用此代码共享 50 mb 或 100 mb 等大视频文件时，它会出现“请求超时”错误，我也增加了会话时间超时时间从 180 秒到 600 秒，但错误和以前一样。我正在使用 AVAssetWriter 创建图像到视频，并希望在 Facebook 上分享视频。

此代码成功共享了 25 张图片以下的视频，但是当我创建超过 25 张图片的视频时，它会出现请求超时错误。

请建议我任何好的教程或解决方案

提前致谢。

# c - C / Linux - 如何使用套接字连接和读取邮件服务器（如 gmail 或 Outlook）的答案？

> ID：15311344
> 
> 赞同：1
> 
> 时间：2013-03-09T13:41:18.087
> 
> 标签：c, linux, sockets, imap, pop3

我想连接到邮件服务器来阅读邮件。比如我有一个outlook地址toto@outlook.com，我想获取这个邮箱的所有邮件，并且能够阅读。所以我相信我只需要做一个客户端，但是：我如何联系和连接到这种类型的服务器，我如何听取答案？

这是我当前的客户端代码：

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netdb.h>
#include <stdio.h>
#include <stdlib.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <unistd.h>
#include <string.h>

int     main()
{
  struct protoent       *pe;
  int                   fd_client;
  struct sockaddr_in    s_in;
  int                   port;
  char                  *ip;
  char                  buff[4096];

  ip = strdup("157.56.242.251"); // I get it while calling "ping outlook.com"
  port = 210;
  pe = getprotobyname("TCP");
  fd_client = socket(AF_INET, SOCK_STREAM, pe->p_proto);
  s_in.sin_family = AF_INET;
  s_in.sin_port = htons(port);
  s_in.sin_addr.s_addr = inet_addr(ip);
  if (connect(fd_client, (struct sockaddr *)&s_in, sizeof(s_in)) == -1)
    {
      if (close(fd_client) == -1)
        return (-1);
      fprintf(stderr, "Failed to connect\n");
      return (-1);
    }

   //From here I don't know what to do, so I tried this
   recv(fd_client, buff, 4096, 0);
   printf("%s\n",buff);
   write(fd_client, "Hello !\n", strlen("Hello !\n"));
   //To Here

  if (close(fd_client) == -1)
    return (-1);
  return (0);
} 
```

提前致谢。

# java - 在远程 weblogic 12c 上使用 maven 插件部署

> ID：15311348
> 
> 赞同：1
> 
> 时间：2013-03-09T13:41:29.200
> 
> 标签：java, maven, weblogic, maven-plugin, weblogic12c

我在机器 192.168.1.3 上有 weblogic 12c。我想使用 maven 插件从机器 192.168.1.2 部署 ear：

```
<groupId>com.oracle.weblogic</groupId>
<artifactId>wls-maven-plugin</artifactId>
<version>12.1.1.0</version> 
```

在我在项目中所做的第一阶段：

```
mvn wls:install 
```

插件配置如下所示：

```
<configuration>
    <adminurl>t3://192.168.1.3:7001</adminurl>
    <user>weblogic</user>
    <password>welcome1</password>
    <debug>true</debug>
    <name>test-ear-dev01</name>                     
    <remote>true</remote>
    <upload>true</upload>
    <advanced>true</advanced>
    <failOnError>true</failOnError>
    <artifactLocation>c:\Users\bartek\Downloads\wls1211_dev.zip</artifactLocation>
</configuration> 
```

接下来我做

```
mvn wls:deploy 
```

我收到以下错误

```
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Invalid file. Please provide an existing fully qualified path of the file.
[DEBUG] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Invalid file. Please provide an existing fully qualified path of the file.
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:719)
        ...
        ...
        ...
Caused by: org.apache.maven.plugin.MojoExecutionException: Invalid file. Please provide an existing fully qualified path of the file.
        at weblogic.tools.maven.plugins.deploy.DeployerMojo.handleDeployerException(DeployerMojo.java:459)
        ...
Caused by: org.apache.maven.plugin.MojoExecutionException: Invalid file. Please provide an existing fully qualified path of the file.
        at weblogic.tools.maven.plugins.deploy.DeployerMojo.getSourceParameter(DeployerMojo.java:434)
        ... 
```

当将ear部署到远程服务器时，你能告诉我我做错了什么吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:47:30.240

您显示的配置看起来像您用于安装 WebLogic`install`的插件目标。 `<artifactLocation>`是该目标的配置元素，而不是`deploy`文档[中](http://docs.oracle.com/cd/E24329_01/web.1211/e24368/maven.htm#autoId6)的。

对于`deploy`目标，替换`<artifactLocation>`为`<source>`，其中包含您的 ear 文件的名称。

# ruby - 为什么我们不能覆盖 `||` 和 `&&`？

> ID：15311349
> 
> 赞同：10
> 
> 时间：2013-03-09T13:41:34.693
> 
> 标签：ruby, keyword

*David A. Black*在他的书中说：

> [T] 条件赋值运算符`||=`，以及它很少见的表亲 &&=，两者都提供与伪运算符方法相同的快捷方式，但基于运算符，即`||`and `&&`，您无法覆盖。

为什么他特别提到我们不能覆盖`||`and `&&`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-09T14:23:40.277

与对象上的其他一些运算符不同，它们的行为在逻辑上取决于类，布尔运算符是语言的一部分。当你有一个运算符时，比如 , 说`==`这个运算符的行为取决于对象的类型是合乎逻辑的。字符串应该逐个字符检查，Hash 键值元组逐个键值元组等。但是，`&&`and的行为`||`基于*语言*对真假的定义，而不是任何特定于对象的定义。如果语言允许您覆盖这些运算符，则可能没有一致的布尔模型，这些运算符将变得完全无用。

此外，还有性能方面的考虑。因为`&&`和`||`是*短循环运算符*，这意味着如果 的第一个参数`&&`计算为假，则第二个参数甚至都不会被计算。对于`||`，如果第一个计算结果为真，则第二个永远不会被计算。如果您可以覆盖这些运算符，则这种行为是不可能的，因为在 Ruby 中，运算符被重载为方法。根据定义，所有参数都必须在调用方法之前进行评估。因此，短路运算符的性能提升和编程便利性就丧失了。

# tfs - TF270016: 发布日志文件时出错

> ID：15311350
> 
> 赞同：9
> 
> 时间：2013-03-09T13:41:35.293
> 
> 标签：tfs, tfsbuild

团队，

到目前为止，TFS 2012 令人沮丧，我一直在排队构建并且构建服务器无法复制/删除到指定的文件夹。我已经在 Win Server 2008 R2 上安装了 TFS 2012。基本上该错误表明对目标文件夹的访问被拒绝，因此无法复制。TFS 管理控制台显示构建服务作为 LocalService 运行。我授予本地服务帐户对放置文件夹的完全控制权。我什至试图摆弄文件夹属性中的“共享”选项卡。无论如何都没有这样的网络，只有一台运行着所有 TFS 服务的机器。我什至尝试将放置文件夹放在 C 驱动器本身上，但没有成功。有人可以请一些光吗？我错过了什么？似乎是些微不足道的事情。

以下是异常详情。

异常消息：TF270016：将日志文件从“C:\Builds\1\Tfs_TeamProjectTrail\Tfs_Trial1_CI\Sources\Main\Tfs_Trial1\Tfs_Trial1.log”发布到“\localhost\d$\VD\Tfs_Trial1_CI\Tfs_Trial1_CI_20130309.21\日志'。详细信息：拒绝访问路径 '\localhost\d$\VD\Tfs_Trial1_CI\Tfs_Trial1_CI_20130309.21\logs'。(类型 PublishLogFileException) 异常堆栈跟踪：在 System.Activities.Statements.Throw.Execute(CodeActivityContext context) 在 System.Activities.CodeActivity.InternalExecute(ActivityInstance instance, ActivityExecutor executor, BookmarkManager bookmarkManager) 在 System.Activities.Runtime.ActivityExecutor.ExecuteActivityWorkItem .ExecuteBody(ActivityExecutor 执行器, BookmarkManager bookmarkManager, Location resultLocation)

内部异常详细信息：

异常消息：拒绝访问路径 '\localhost\d$\VD\Tfs_Trial1_CI\Tfs_Trial1_CI_20130309.21\logs'。（类型 UnauthorizedAccessException）异常堆栈跟踪：在 System.IO.Directory.InternalCreateDirectory（字符串 fullPath，字符串路径，对象 dirSecurityObj，布尔 checkHost）在 System.IO.Directory 的 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) Microsoft.TeamFoundation.Common.FileSpec.CopyFile(String oldPath, String newPath, Boolean overwriteExisting) 在 Microsoft.TeamFoundation.Build.Workflow.Activities.WindowsDropProvider.CopyDirectory(String sourceDirectory, String targetDirectory) 的 .InternalCreateDirectoryHelper(String path, Boolean checkHost)在 Microsoft.TeamFoundation.Build.Workflow.Activities.WindowsDropProvider.CopyDirectory（字符串 sourceDirectory，字符串 targetDirectory，

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-09T14:13:47.667

这只是一个权限问题。

*   首先以本地用户/域用户（如果适用）的身份运行构建服务并让它工作。
*   创建适当的共享而不是使用默认的管理员共享 (d$)
*   确保文件夹属性上的共享和安全选项卡都允许该用户的写入权限。
*   错误日志显示“\localhost”，访问它的正确方法是“\\localhost”（这可能是一个stackoverflow编辑器问题，但不相关）

我目前没有时间写一个完整的答案，但我可以稍后扩展。

ProcMon 也是解决此类问题时使用的一个很好的程序。

我认为这是一个很好的起点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-27T08:12:08.677

只需确保 Drop directory 和 Build 服务对“本地服务”组具有完全权限。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-02T10:38:15.133

**运行tfs**构建服务的默认帐户是`nt authority\network service`. 编译解决方案\项目后，正是这个用户尝试将位复制到构建共享。

因此，在您的构建共享上添加此帐户的权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-17T17:51:10.057

[TFS2013] 当我关闭放置文件夹选项并删除路径时出现此错误。通过再次为构建配置中的输出文件指定放置文件夹 (UNC) 解决了该问题。

如果您根本没有放置文件夹，TFS 似乎很棘手，即使它为您提供了没有放置文件夹的选项。

# scala - 创建基于时间的分块 Enumeratee

> ID：15311352
> 
> 赞同：12
> 
> 时间：2013-03-09T13:41:56.010
> 
> 标签：scala, playframework, playframework-2.0, akka

我想创建一个 Play 2 Enumeratee，它接收值并将它们输出，每秒`x`/毫秒分块在一起。这样，在具有大量用户输入的多用户 websocket 环境中，可以限制每秒接收的帧数。

我知道可以像这样将一组项目组合在一起：

```
val chunker = Enumeratee.grouped(
  Traversable.take[Array[Double]](5000) &>> Iteratee.consume()
) 
```

是否有基于时间而不是基于项目数量的内置方法来执行此操作？

我正在考虑以某种方式使用预定的 Akka 作业来执行此操作，但乍一看这似乎效率低下，而且我不确定是否会出现并发问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T00:32:25.863

像这样怎么样？我希望这对你有帮助。

```
 package controllers

 import play.api._
 import play.api.Play.current
 import play.api.mvc._
 import play.api.libs.iteratee._
 import play.api.libs.concurrent.Akka
 import play.api.libs.concurrent.Promise

 object Application extends Controller {

   def index = Action {
     val queue = new scala.collection.mutable.Queue[String]
     Akka.future {
       while( true ){
         Logger.info("hogehogehoge")
         queue += System.currentTimeMillis.toString
         Thread.sleep(100)
       }
     }
     val timeStream = Enumerator.fromCallback { () =>
       Promise.timeout(Some(queue), 200)
     }
     Ok.stream(timeStream.through(Enumeratee.map[scala.collection.mutable.Queue[String]]({ queue =>
       var str = ""
       while(queue.nonEmpty){
         str += queue.dequeue + ", "
       }
       str
     })))
   }

 } 
```

这份文件对你也有帮助。 [http://www.playframework.com/documentation/2.0/Enumerators](http://www.playframework.com/documentation/2.0/Enumerators)

**更新** 这是 play2.1 版本。

```
 package controllers

 import play.api._
 import play.api.Play.current
 import play.api.mvc._
 import play.api.libs.iteratee._
 import play.api.libs.concurrent.Akka
 import play.api.libs.concurrent.Promise
 import scala.concurrent._
 import ExecutionContext.Implicits.global

 object Application extends Controller {

   def index = Action {
     val queue = new scala.collection.mutable.Queue[String]
     Akka.future {
       while( true ){
         Logger.info("hogehogehoge")
         queue += System.currentTimeMillis.toString
         Thread.sleep(100)
       }
     }
     val timeStream = Enumerator.repeatM{
       Promise.timeout(queue, 200)
     }
     Ok.stream(timeStream.through(Enumeratee.map[scala.collection.mutable.Queue[String]]({ queue =>
       var str = ""
       while(queue.nonEmpty){
         str += queue.dequeue + ", "
       }
       str
     })))
   }

 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T18:31:40.533

在这里，我快速定义了一个迭代器，它将在固定时间长度 t 内从输入中获取值（以毫秒为单位），以及一个枚举器，它将允许您对输入流进行分组并进一步处理，该输入流被划分为在该长度 t 内构造的段。它依赖 JodaTime 来跟踪自迭代器开始以来已经过去了多少时间。

```
def throttledTakeIteratee[E](timeInMillis: Long): Iteratee[E, List[E]] = {
  var startTime = new Instant()

  def step(state: List[E])(input: Input[E]): Iteratee[E, List[E]] = {
    val timePassed = new Interval(startTime, new Instant()).toDurationMillis

    input match {
      case Input.EOF => { startTime = new Instant; Done(state, Input.EOF) }
      case Input.Empty => Cont[E, List[E]](i => step(state)(i))
      case Input.El(e) =>
        if (timePassed >= timeInMillis) { startTime = new Instant; Done(e::state, Input.Empty) }
        else Cont[E, List[E]](i => step(e::state)(i))
    }
  }

  Cont(step(List[E]()))
}

def throttledTake[T](timeInMillis: Long) = Enumeratee.grouped(throttledTakeIteratee[T](timeInMillis)) 
```

# ruby-on-rails-3.1 - 如何全球化我的 Ruby on Rails 应用程序

> ID：15311354
> 
> 赞同：1
> 
> 时间：2013-03-09T13:42:26.523
> 
> 标签：ruby-on-rails-3.1, internationalization, globalization

我有一个简单的 Rails 应用程序（甚至不是数据库驱动的）。基本上我想让它支持两种语言。我的方法是在页脚中有**两个小标志，一个是 GB（用于****English**），一个是 Germany （用于**German**）。当*用户点击一个时，网站的语言会变为国家标志的相应语言*。

我的 [ en.yml ] 和 [ de.yml ] 都设置好了，我**在所有视图中都使用了它们的键，**我什至通过在 [ en 之间交换 [ config.i18n.default_locale ] 属性来*测试*它们是否可以工作] 和 [ de ] 在 [ config/application.rb ] 中。在这方面一切都很好。

但是，我对如何实现语言更改机制感到困惑。我创建了一个名为 [ Language ] 的控制器，并在其中定义了一个名为 [ Set ] 的方法，但除此之外，它几乎是空白的，这是我认为应该发生的事情：

```
class LanguageController < ApplicationController
  def set
    I18n.locale = params[:lang]
    redirect_to(:controller => 'home', :action => 'index')
  end
end 
```

以上似乎不起作用。当我调用 [ **/language/set?lang="de"** ] 时，本地化字符串变为**键**而不是实际的德语翻译文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:17:49.913

This:

```
I18n.locale = params[:lang] 
```

does not persist across requests, so when you redirect (= a new request) it reverts back to English.

You should save the language setting in a session:

```
class LanguageController < ApplicationController
  def set
    session[:lang] = params[:lang].to_sym
    redirect_to(:controller => 'home', :action => 'index')
  end
end 
```

And check the session on each request. You can do this in a `before_filter` in your `ApplicationController`:

```
class ApplicationController
  before_filter :set_language

  def set_language
    I18n.locale = session[:lang] if session[:lang]
  end
end 
```

# c++ - c++,win32中的对话框

> ID：15311360
> 
> 赞同：0
> 
> 时间：2013-03-09T13:43:26.287
> 
> 标签：c++, winapi, visual-c++

我正在使用win32 c ++，所以我想创建对话框，“消息框，颜色对话框”并且它可以工作，但是我遇到的问题是当我调用该对话框时它不会显示，直到最小化父窗口并再次最大化它. 这是一个简单的颜色对话框

```
COLORREF choseColor()
{
    CHOOSECOLOR color;
    COLORREF ccref[16];
    COLORREF selcolor=0x000000;

    memset(&color,0,sizeof(color));
    color.lStructSize=sizeof(CHOOSECOLOR);
    color.hwndOwner=NULL;
    color.lpCustColors=ccref;
    color.rgbResult=selcolor;
    color.Flags=CC_RGBINIT;

    if(ChooseColor(&color))
        {
        selcolor=color.rgbResult;
        }
    return selcolor;
} 
```

# sql - SSRS 2008 中的 Tablix

> ID：15311362
> 
> 赞同：1
> 
> 时间：2013-03-09T13:43:29.463
> 
> 标签：sql, sql-server-2008-r2, ssrs-tablix

我在 SSRS 2008 中使用带有区域名称的 tablix，它可能包含 10 个不同的区域。目前，这些区域在代码中按字母顺序排序，但我必须对它们进行不同的排序，因此我根据所需的顺序在 CASE 语句中为每个区域分配了一个数字。然后，我在 tablix 本身中按所需顺序对区域进行了排序，并且这些区域在报告中按所需顺序排序，但不幸的是，分配的数字在报告中而不是区域名称中。而不是得到

BF CF CO CL 等…… 我明白了

1 2 3 4 等在报告的标题中。

任何帮助将不胜感激。

```
CASE , 
WHEN teamgroup.Name = 'BF' THEN 1
WHEN teamgroup.Name = 'CF' THEN 2
WHEN teamgroup.Name = 'CO' THEN 3
WHEN teamgroup.Name = 'CL' THEN 4
WHEN teamgroup.Name = 'CN' THEN 5
WHEN teamgroup.Name = 'GA' THEN 6
WHEN teamgroup.Name = 'IN' THEN 7
WHEN teamgroup.Name = 'KY' THEN 8
WHEN teamgroup.Name = 'MD' THEN 9
WHEN teamgroup.Name = 'NF' THEN 10
END AS Region 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T14:18:12.317

除了排序列之外，您仍然需要`teamgroup.Name`在结果集中拥有一列。改为这样做：

```
teamgroup.Name AS Region,
CASE
...
END AS Region_Sort 
```

然后在您的 SSRS 中，将该`Region`列添加到您的 Tablix。在表的排序属性中，使用`Region_Sort`. 确保不要添加`Region_Sort`到您的 Tablix。

# php - 从 WHILE 中随机选择

> ID：15311364
> 
> 赞同：1
> 
> 时间：2013-03-09T13:43:33.340
> 
> 标签：php

给出更多结果时如何获得随机项目？这有可能代替 osc_count_item_resources()：

```
$max = osc_category_total_items(); 
$rand = rand(1,$max);
$item = $rand; 
if (osc_get_item_resources($item)) { 
```

然后显示项目详细信息？

这是我根据我在下面发布的函数使用的代码：

```
 <?php // osc_query_item("category=".osc_category_id()); < working basic one
 // display category-icon if no items present
 if (osc_category_total_items() == 0) { ?>
 <div class="icon">
 <a href="<?php echo osc_search_category_url();?>">
 <img src="<?php echo osc_current_web_theme_url('images/') . osc_category_name() .'.png' ?>" alt="" title=""/></a>
 </div>
 <?php 
 } else {
 // then if category has items present, do query
 osc_query_item(array('category' => osc_category_id(), 'page' => 0, 'results_per_page' => 3)) ;
 // check WHILE custom-items-present AND images-enabled is TRUE
if ((osc_has_custom_items()) && (osc_images_enabled_at_items())) {   
// if resources present get them       
if (osc_count_item_resources()) {
**// show image from item** 
?>
<div class="icon">
<a href="<?php echo osc_item_url() ; ?>">
<img src="<?php echo osc_resource_thumbnail_url() ; ?>" title="<?php echo osc_item_title(); ?>" alt="<?php echo osc_item_title() ; ?>" /></a>
</div>                 
<?php 
} else { 
// show icon from category with link from item   
?>
<div class="icon">
<a href="<?php echo osc_item_url() ; ?>">
<img src="<?php echo osc_current_web_theme_url('images/nophoto.png') ; ?>" alt="" title=""/></a>
</div>
<?php 
}}          
// reset query for this category
osc_reset_custom_items () ;
}
// end of random items 
?> 
```

这是在查询本身之后给我所有结果的函数：

```
function osc_has_custom_items() {
    if ( View::newInstance()->_exists('resources') ) {
        View::newInstance()->_erase('resources') ;
    }
    if ( View::newInstance()->_exists('item_category') ) {
        View::newInstance()->_erase('item_category') ;
    }
    if ( View::newInstance()->_exists('metafields') ) {
        View::newInstance()->_erase('metafields') ;
    }
    if(View::newInstance()->_get('itemLoop')!='custom') {
        View::newInstance()->_exportVariableToView('oldItem', View::newInstance()->_get('item'));
        View::newInstance()->_exportVariableToView('itemLoop', 'custom');
    }
    $item = View::newInstance()->_next('customItems') ;
    if(!$item) {
        View::newInstance()->_exportVariableToView('item', View::newInstance()->_get('oldItem'));
        View::newInstance()->_exportVariableToView('itemLoop', '');
    } else {
        View::newInstance()->_exportVariableToView('item', View::newInstance()->_current('customItems'));
    }
    return $item;
} 
```

这是查询的功能：

```
 function osc_query_item($params = null) {
    //      $mSearch = Search::newInstance();
    $mSearch = new Search();
    if($params==null) {
        $params = array();
    } else if(is_string($params)){
        $keyvalue = explode("=", $params);
        $params = array($keyvalue[0] => $keyvalue[1]);
    }
    foreach($params as $key => $value) {
        switch($key) {
            case 'author':
                $tmp = explode(",", $value);
                foreach($tmp as $t) {
                    $mSearch->fromUser($t);
                }
                break;

            case 'category':
            case 'category_name':
                $tmp = explode(",", $value);
                foreach($tmp as $t) {
                    $mSearch->addCategory($t);
                }
                break;

            case 'country':
            case 'country_name':
                $tmp = explode(",", $value);
                foreach($tmp as $t) {
                    $mSearch->addCountry($t);
                }
                break;

            case 'region':
            case 'region_name':
                $tmp = explode(",", $value);
                foreach($tmp as $t) {
                    $mSearch->addRegion($t);
                }
                break;

            case 'city':
            case 'city_name':
                $tmp = explode(",", $value);
                foreach($tmp as $t) {
                    $mSearch->addCity($t);
                }
                break;

            case 'city_area':
            case 'city_area_name':
                $tmp = explode(",", $value);
                foreach($tmp as $t) {
                    $mSearch->addCityArea($t);
                }

            case 'results_per_page':
                $mSearch->set_rpp($value);
                break;

            case 'page':
                $mSearch->page($value);
                break;

            case 'offset':
                $mSearch->limit($value);
                break;

            default:
                osc_run_hook('custom_query', $key, $value);
                break;
        }
    }
    View::newInstance()->_exportVariableToView("customItems", $mSearch->doSearch());
} 
```

我也有这两个功能，我不确定哪个更好用。函数GET项目资源：

```
function osc_get_item_resources() {
if ( !View::newInstance()->_exists('resources') ) {
View::newInstance()->_exportVariableToView('resources', ItemResource::newInstance()->getAllResourcesFromItem( osc_item_id() ) ) ;
}
return View::newInstance()->_get('resources') ;
} 
```

函数 COUNT 项资源：

```
function osc_count_item_resources() {
if ( !View::newInstance()->_exists('resources') ) {
View::newInstance()->_exportVariableToView('resources', ItemResource::newInstance()->getAllResourcesFromItem( osc_item_id() ) ) ;
}
return (int) View::newInstance()->_count('resources') ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:55:25.027

真的很容易，如果你有一个数组中的项目，你可以使用[array_rand()](http://php.net/manual/en/function.array-rand.php)。

看到您的编辑后，我会这样做：

```
$ItemsFromQuery = array();
// While the function returns values, assign them.
while ($item = osc_has_custom_items())
  {
  // Introduce each item in the array
  $ItemsFromQuery[] = $item;
  }
// Echo only one random item id from the random key in the array of items
echo osc_item_id($ItemsFromQuery[array_rand($ItemsFromQuery)]); 
```

选择：

```
$ItemsFromQuery = array();
// While the function returns values, assign them.
while ($item = osc_has_custom_items())
  {
  // Introduce each id in the array
  $IDsFromQuery[] = osc_item_id($item);
  }
// Echo only one random item id from the random key in the array of items
echo $IDsFromQuery[array_rand($IDsFromQuery)]); 
```

# heroku - 在 Heroku 中计费的最短时间是多少？

> ID：15311366
> 
> 赞同：8
> 
> 时间：2013-03-09T13:43:39.640
> 
> 标签：heroku

Ec2 实例小时按小时计算。如果你只是启动和关闭一个实例，它仍然算作一小时。

Heroku 如何处理这个问题？按分钟还是按小时？

**让我们假设我的应用程序使用量超过 750 Free Dyno Hour Limit**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T17:00:07.567

Heroku 按比例计算第二个。测功机每小时收费 0.05 美元。因此，如果您超过 750 小时，您将按每小时 0.05 美元或每分钟 0.000833333 美元收费。事实上，几乎所有插件也都遵循相同的计费模式。

[您可以通过https://devcenter.heroku.com/articles/usage-and-billing#cost](https://devcenter.heroku.com/articles/usage-and-billing#cost)阅读有关计费和费用的信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-25T17:09:48.213

不过，我会说，对于网络测功机与工人测功机相比，之前的答案似乎更准确。Heroku 为您的 web dyno 提供的自动睡眠周期会尝试防止它在空闲时运行太长时间，例如超过一个小时。对于免费的网络测功机，它必须每天至少睡六个小时才能不产生费用。只要您将网络测功机的缩放比例设置为 1 并且它处于休眠状态，那么它应该是免费的。

也就是说，当您添加第一个工人测功机时，这些相同的自动化不会应用于此测功机。它可能不会在空闲一个小时时触发睡眠。这意味着除非您管理它，否则您可能会为每个工人每月支付 34.50 美元。我不会完全称这是对客户撒谎，但大多数人从第一个免费测功机开始，对此感到满意，然后天真地认为下一个测功机会以类似的方式运行——它不会，你会可能会被贴上支付比您讨价还价更多的钱的标签。一台测功机每年需要 414 美元。将此与亚马逊的 t2.micro 成本进行比较，单个实例每年 150 美元或 50% 占空比的相同实例每年 75 美元。

正如他们所说，“魔鬼在细节中”。Heroku 对于虚荣网站来说可能很便宜，但如果你有一个数据库和工作线程（没有任何扩展），它就会有点贵。

# python - 以正确的方式编写大型 Python 类

> ID：15311368
> 
> 赞同：3
> 
> 时间：2013-03-09T13:43:47.773
> 
> 标签：python, class, coding-style

在编写具有不同功能的python类来获取数据和解析数据时；什么是最正确的方法？您可以编写它以便一个接一个地填充 self.data...，然后运行解析函数来填充 self.parsed_data.... 或者编写接受 self.data 并返回 self.parsed_data 的函数是否正确。 .?

下面的例子。MyClass1 填充 self.variables，MyClass2 将它们作为参数。我认为 MyClass2 是“最”正确的。

那么，什么是正确的？为什么？一段时间以来，我一直试图决定这两种编码风格中的哪一种。但我想知道其中哪些被认为是最佳实践。

```
class MyClass1(object):
    def __init__(self):
        self.raw_data = None

    def _parse_data(self):
        # This is a fairly complex function xml/json parser
        raw_data = self.raw_data
        data = raw_data  #  Much for is done to do something with raw_data
        cache.set('cache_key', data, 600)  # Cache for 10 minutes
        return data

    def _populate_data(self):
        # This function grabs data from an external source
        self.raw_data = 'some raw data, xml, json or alike..'

    def get_parsed_data(self):
        cached_data = cache.get('cache_key')
        if cached_data:
            return cached_data
        else:
            self._populate_data()
            return self._parse_data()

mc1 = MyClass1()
print mc1.get_parsed_data()

class MyClass2(object):
    def _parse_data(self, raw_data):
        # This is a fairly complex function xml/json parser
        data = raw_data  # After some complicated work of parsing raw_data
        cache.set('cache_key', data, 600)  # Cache for 10 minutes
        return data

    def _get_data(self):
        # This function grabs data from an external source
        return 'some raw data, xml, json or alike..'

    def get_parsed_data(self):
        cached_data = cache.get('cache_key')
        if cached_data:
            return cached_data
        else:
            return self._populate_data(self._get_data())

mc2 = MyClass2()
print mc1.get_parsed_data() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T13:59:14.843

最后还是看个人喜好。但是IMO，最好只调用一个模块级函数`parse_data`，该函数接收原始数据，完成大量工作并返回解析后的数据。我假设您的缓存键以某种方式源自原始数据，这意味着该`parse_data`函数还可以实现您的缓存逻辑。

我更喜欢一个函数而不是一个完整的类的原因是简单。如果你想要一个类来提供从你的原始数据中提取的数据字段，这样你的对象的用户就可以做类似的事情，`obj.some_attr`而不必查看一些较低级别的数据结构（例如 JSON、XML、Python dict 等）。 )，我会创建一个简单的“值对象”类，它只包含数据字段，*没有*解析逻辑，并让上述`parse_data`函数返回这个类的实例（本质上充当数据类的工厂函数）。这导致更少的状态、更简单的对象和没有惰性，使你的代码更容易推理。

这也将更容易对此类的消费者进行单元测试，因为在这些测试中，您可以简单地使用字段实例化数据对象，而不必提供大量测试原始数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T14:07:06.367

对我来说，最正确的类是用户理解和使用的类，并且错误尽可能少。

当我看第 2 课时，我问自己我将如何使用它...

```
mc2 = MyClass2()
print mc1.get_parsed_data() 
```

我只想

```
print get_parsed_data() 
```

有时最好[根本不编写类](http://www.youtube.com/watch?v=o9pEzgHorH0)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T13:56:45.880

第二种方式更可取，因为（如果我理解正确的话）它在效率和结果上是相同的，但避免了原始数据的实例成员。通常，您希望减少存储在对象中的数据量，因为每个额外的属性都意味着随着时间的推移更加担心一致性。

换句话说，它“更实用”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T13:59:02.367

以这种方式思考这个问题：如果你将这个逻辑组合成一个长方法，而不是两个方法，你会在原始数据解析后跟踪它吗？如果答案是肯定的，那么将其存储为属性是有意义的。但是，如果在那之后您不再关心它，请选择第二种形式。将部分逻辑分解为“帮助”子例程应该最好避免对其他方法可能需要关心的类进行更改。

# php - PHP“转到输出；”的替代方案

> ID：15311370
> 
> 赞同：0
> 
> 时间：2013-03-09T13:43:59.300
> 
> 标签：php, wordpress, goto

我为 WordPress 使用了一个使用“goto output”的插件；这给我的一些使用 PHP 5.3 的朋友带来了问题。他们还想使用我找到的插件，称为 MiniPress。

如何重新编写这个插件以便它可以在 PHP 5.3 中工作？

```
private static function get_filesystem() {
    if ( false === self::$fs ) {
        global $wp_filesystem;

        require_once( ABSPATH . 'wp-admin/includes/file.php' );

        $write_method = get_filesystem_method( array(), false );
        if ( $write_method != 'direct' && $write_method != 'ftpsockets' ) {
            self::$fs = false;
            goto output;
        }

        if ( false === ( $creds = @request_filesystem_credentials( '' ) ) ) {
            self::$fs = false;
            goto output;
        }

        if ( ! WP_Filesystem( $creds ) ) {
            self::$fs = false;
            goto output;
        }

        self::$fs = $wp_filesystem;
    }

    output:
    return self::$fs;
} 
```

ps：我不是插件的作者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T13:46:37.413

只需更换：

```
goto output; 
```

和：

```
return self::$fs; 
```

`output:`并在最后删除。

然后可以将您的方法重写为：

```
private static function get_filesystem() {
    if ( false === self::$fs ) {
        global $wp_filesystem;
        require_once( ABSPATH . 'wp-admin/includes/file.php' );
        $write_method = get_filesystem_method( array(), false );
        if (
            ($write_method != 'direct' && $write_method != 'ftpsockets') || 
            (false === ($creds = @request_filesystem_credentials(''))) ||
            (!WP_Filesystem($creds))
        ) self::$fs = false;
        else self::$fs = $wp_filesystem;
    }
    return self::$fs;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:03:22.143

另一种方式：

```
private static function get_filesystem() {
    if ( false === self::$fs ) {
        global $wp_filesystem;

        require_once( ABSPATH . 'wp-admin/includes/file.php' );

        $write_method = get_filesystem_method( array(), false );

        if ( 
            $write_method != 'direct' && $write_method != 'ftpsockets' 
            ||
            false === ( $creds = @request_filesystem_credentials( '' ) )
            ||
            ! WP_Filesystem( $creds )
        ) {
            self::$fs = false;
        } else {
            self::$fs = $wp_filesystem;
        }
    } 
    return self::$fs;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T13:59:31.277

这应该工作

```
private static function get_filesystem() {
    if ( false === self::$fs ) {
        global $wp_filesystem;

        require_once( ABSPATH . 'wp-admin/includes/file.php' );

        $write_method = get_filesystem_method( array(), false );
        if ( $write_method != 'direct' && $write_method != 'ftpsockets' ) {
            self::$fs = false;
        }

        else if ( false === ( $creds = @request_filesystem_credentials( '' ) ) ) {
            self::$fs = false;
        }

        else if ( ! WP_Filesystem( $creds ) ) {
            self::$fs = false;
        } else self::$fs = $wp_filesystem;
    }

    return self::$fs;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T14:16:13.590

如果您删除所有冗余代码，您最终会得到以下结果：

```
private static function get_filesystem() {
    if ( false === self::$fs ) {
        global $wp_filesystem;
        require_once( ABSPATH . 'wp-admin/includes/file.php' );
        $write_method = get_filesystem_method( array(), false );
        if (($write_method == 'direct' || $write_method == 'ftpsockets') && 
            (false !== ($creds = @request_filesystem_credentials(''))) &&
            (WP_Filesystem($creds)) {
          self::$fs = $wp_filesystem;
        }
    }
    return self::$fs;
} 
```

# cakephp - 我无法在 cakephp 2.3 中进行本地化

> ID：15311378
> 
> 赞同：0
> 
> 时间：2013-03-09T13:44:44.367
> 
> 标签：cakephp, internationalization

我网站上的本地化一直在工作，直到有一天，我的网站宕机了。主机做了一些更改，之后，我的网站是英文的。我将默认语言设置为法语，但一切都是英语。如果我显示语言

```
echo Configure::read('Config.language'); 
```

结果是我`Configure::write('Config.language', 'fre');`在 bootstrap.php 中设置的“fre” 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:38:01.123

在 2.3 中，法语的语言代码从[迁移指南](http://book.cakephp.org/2.0/en/appendices/2-3-migration-guide.html#l10n)中提到的更改`fre`为。`fra`

# django - Django 1.5 - 登录

> ID：15311380
> 
> 赞同：1
> 
> 时间：2013-03-09T13:44:58.737
> 
> 标签：django, django-1.5

创建 UserProfile 模型后。我开始创建登录，但由于 get_user() 错误而卡住了。

**例外**

```
 AttributeError: 'LoginForm' object has no attribute 'get_user' 
```

这是我的代码：

**更新**

```
class LoginView(FormView):
    form_class = LoginForm
    redirect_field_name = REDIRECT_FIELD_NAME
    template_name = 'login.html'
    success_url = '/'

    def form_valid(self, form):
        username = form.cleaned_data['username']
        password = form.cleaned_data['password']

        user = authenticate(username=username, password=password)
        if user is not None:
            if user.is_active:
                login(self.request, user)
                return HttpResponseRedirect(self.get_success_url())
        else:        
            return self.form_invalid()

    def form_invalid(self):
        return HttpResponseRedirect(reverse('accounts:login'))

    def get_success_url(self):
        if self.success_url:
            redirect_to = self.success_url
        else:
            redirect_to = self.request.REQUEST.get(self.redirect_field_name, '')

        netloc = urlparse.urlparse(redirect_to)[1]
        if not redirect_to:
            redirect_to = settings.LOGIN_REDIRECT_URL
        elif netloc and netloc != self.request.get_host():
            redirect_to = settings.LOGIN_REDIRECT_URL
        return redirect_to

    def post(self, request, *args, **kwargs):
        form_class = self.get_form_class()
        form = self.get_form(form_class)
        if form.is_valid():
            return self.form_valid(form)
        else:                
            return self.form_invalid() 
```

如何解决这个问题？任何帮助，将不胜感激。我对 Django 1.5 真的很陌生。需要帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:53:56.517

[更新]

在原始代码中，作者`authenticate`在一个名为`get_user`. 您已经在表单之外执行此操作，因此只需替换`form.get_user()`为`user`.

我使用不基于类的登录视图，我什至不关心使用 Django 表单实例，但它应该很容易适应：

```
def signin(request):
    if request.method == 'POST':
        user = authenticate(
            email=request.POST.get('username', '').lower().strip(),
            password= request.POST.get('password', ''),
        )
        if user is None:
            messages.error(request, u'Invalid credentials')
        else:
            if user.is_active:
                login(request, user)
                return HttpResponseRedirect(request.GET.get('next', '/'))
            else:
                messages.error(request, u'User is not active.')

    return render_to_response('login.html', locals(),      
                       context_instance=RequestContext(request)) 
```

[老答案]

为您的表单定义一个 get_user 方法。

未经测试（但应该让你走上正确的道路）：

```
def get_user(self):
    from django.contrib.auth import authenticate
    return authenticate(
            email=self.cleaned_data.get('username', '').lower().strip(),
            password=self.cleaned_data.get('password', ''),
    ) 
```

# javascript - TinyMCE 剥离 HTML，虽然我已经告诉它不要

> ID：15311385
> 
> 赞同：2
> 
> 时间：2013-03-09T13:45:12.463
> 
> 标签：javascript, tinymce

我在 TinyMCE 和自定义标签上苦苦挣扎。我们正在构建一个使用 TinyMCE WYSIWYG 编辑器的自定义 CMS。这是我的设置：

```
 tinyMCE.init({
        // General options
        mode: "textareas",
        width: "200",
        theme: "advanced",
        cleanup_on_startup: false,
        trim_span_elements: false,
        verify_html: false,
        cleanup: false,
        convert_urls: false,
... 
```

所以，在一个页面中，我必须通过源代码编辑器添加这个标签：

```
 <gcse:searchresults-only queryParameterName="search"></gcse:searchresults-only> 
```

但是，编辑正在剥离它。我尝试添加此规则：

```
extended_valid_elements: "gcse:searchresults-only[*]",
custom_elements: "gcse:searchresults-only" 
```

并且可以添加标签，但如果它没有嵌套在任何其他标签中。如果我将该标签包装在一个 div 元素中，它确实会剥离它（gcse 标签），使 div 为空。

问题：如何禁用 TinyMCE 剥离任何标签？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:15:57.763

自 3.4 版以来，无法禁用 tinymce 清理。您必须根据需要设置 valid_elements 和 valid_children。

# iphone - 选择时自定义子类 UITableViewCell 的属性

> ID：15311387
> 
> 赞同：4
> 
> 时间：2013-03-09T13:45:13.970
> 
> 标签：iphone, ios, uitableview, customization

我在自定义子类 tableview 单元格进入选定状态时的外观和行为时遇到问题。

我的单元格有三个标签，我在方法中添加到它的内容视图中**`initWithStyle:`**：

```
cell1Label = [[UILabel alloc] initWithFrame:
    CGRectMake(75.0f, 12.0f, 67.0f, 12.0f)];
cell1Label.backgroundColor = [UIColor clearColor];
cell1Label.textColor = [UIColor blackColor];
cell1Label.shadowColor = [UIColor whiteColor];

   blah, blah, blah...

[self.contentView addSubview:cell1Label]; 
```

然后，我在子类中的方法的背景上放置了一个黑色覆盖层**`setSelected:(BOOL)selected animated:(BOOL)animated`**：

```
UIView *backgroundView = [[UIView alloc] initWithFrame:
    CGRectMake(0.0f, 0.0f, 150.0f, 70.0f)];
backgroundView.backgroundColor = [UIColor colorWithRed:
0.0 green:0.0 blue:0.0 alpha:0.4];
self.selectedBackgroundView = backgroundView; 
```

问题从这里开始。因为我想`UILabel`在选择单元格时保持可读性，所以我需要更改它们的`textColor`and `shadowColor`。但是，我似乎找不到这样做的好地方。

如果我把代码放在**`setSelected:(BOOL)selected animated:(BOOL)animated`**什么都没有发生；我似乎只能对**`selectedBackgroundView`**.

我还尝试使用TableView 委托方法**`didSelectRowAtIndexPath:`**，**`didDeselectRowAtIndexPath:`**如下所示：

```
CustomDataCell* selectedCell = (CustomDataCell*)[tableView 
    cellForRowAtIndexPath:indexPath];
selectedCell.cell1Label.shadowColor = [UIColor lightGrayColor];
selectedCell.cell1Label.textColor = [UIColor blackColor]; 
```

但是，当单元格离开可见区域时，此方法会出现一些问题。也就是说，如果我选择了一个单元格，那么它会离开可见区域，当我选择另一个单元格时，它的文本属性不会变回它们的正常状态。黑色背景应该会消失，但分配给所选状态的 new`textColor`和I 仍然存在。`shadowColor`

处理子类的选定（可能还有其他）状态的*最佳*、*最可靠*`UITableViewCells`的方法是什么？

我正在使用`ARC`；从不使用`IB`；和`Xcode 4.6`SDK `iOS 6.1`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T13:56:10.563

使用 的`setHighlighted:animated`方法`UITableViewCell`更改您的标签`color`。

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Change you label text color here
    //
    // Edit Here

    if (selected) {
        // New Colors Here
    }
    else {
        // Old Colors Here
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:51:46.337

当一个单元格被选中时，它会将其所有标签（包括您自己添加的标签）设置为突出显示状态。这意味着您可以在初始化时定义突出显示的文本颜色并让单元格处理它。

可能目前标签被设置为突出显示，这正在撤消您自己进行的任何颜色更改。

此外，一个单元格有一个 selectedBackgroundView 属性，您应该使用它而不是添加一个新的子视图。

# ruby - 无法让 sqlite3 在 Ruby on Rails 上运行

> ID：15311389
> 
> 赞同：1
> 
> 时间：2013-03-09T13:45:33.200
> 
> 标签：ruby, ruby-on-rails-3, windows-7, sqlite

我刚刚在我的 Windows 7 计算机上安装了 ruby​​。我用 gem 安装了 rails 和 sqlite3。然后我让我的应用程序在本地工作，但我似乎仍然对 sqlite3 有问题。当我尝试这个时：

```
rake db:create 
```

我唯一得到的是一个错误：

```
Please install the sqlite3 adapter: "gem install activerecord-sqlite3-adapter" (sqlite3 
is not part of the bundle. Add it to the GemFile). 
```

我一直在这里和那里进行一些挖掘，我可以让这个错误消失，将这一行添加到我的 GemFile：

```
gem "sqlite3", group: :sqlite3 
```

我得到了一个新错误：

```
no driver for sqlite3 found 
```

我尝试了“捆绑”命令，我同时拥有 sqlite3 和 sqlite3-ruby，我重新安装了所有东西，但问题不会消失。这是我的gemFile，希望对您有所帮助：

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

#I tried this too, but nothig changes
#gem 'sqlite3-ruby', :require => 'sqlite3'

gem 'sqlite3-ruby', '1.2.5', :require => 'sqlite3'
gem "sqlite3", group: :sqlite3

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

我真的不知道该怎么办。这有点令人沮丧，似乎有些东西（显然）不能与 sqlite3 一起正常工作，因为修复一个错误会导致一个新错误。我怎么可能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:42:19.467

致所有遇到这个问题的人。我所做的修复它是卸载所有内容。我想这可能是因为我有所有东西的更新版本，某些东西可能无法正常工作，也许某些依赖关系被错误地解决了。所以我重新安装了以下所有内容：

[Rails 安装程序网站](http://railsinstaller.org/)

这将使您安装运行您的第一个 RoR 应用程序所需的一切。它可能不是最新的，但它工作得很好。Sqlite3 现在完美运行，这正是我所需要的。以后我可能会尝试更新每个程序，现在我只需要一些实际工作的东西。感谢所有试图提供帮助的人。

# php - 正则表达式模式php？

> ID：15311390
> 
> 赞同：0
> 
> 时间：2013-03-09T13:45:34.200
> 
> 标签：php, regex

我正在尝试在 php 中学习正则表达式，并且一直试图为特定模式编写正则表达式。

我试图实现的模式如下，

必须以字母开头。

可以包含字母、数字或下划线。

整个字符串中必须至少有 3 个字母。

我尝试过的；

```
'#^[a-z0-9_]+$#i' // this one just matches the characters I want 
```

这就是我被困住的地方我试过这个，

```
'#^[a-z]{1}[a-z0-9_]+$#i' // doesn't work 
```

我正在尝试从这个网站学习，但我发现很难绕开它，

[http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T13:51:12.317

```
'#^[a-zA-Z]([0-9_]*[a-zA-Z]){2}[a-zA-Z0-9_]*$#' 
```

`[a-zA-Z]`检查第一个约束（以字母开头）

`([0-9_]*[a-zA-Z]){2}`检查第二个约束（必须总共有 3 个字母）

`[a-zA-Z0-9_]*`释放以前的约束，并且仅限于使用允许的字符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T14:19:13.150

这应该这样做：

```
#^[a-zA-Z]{1}(\w*[a-zA-Z]\w*){2}$#i 
```

解释：

```
^[a-zA-Z]{1}  // 1st character is a letter
(\w*[a-zA-Z]\w*){2}$ // The rest of the body contains exactly 2 letters, and 0 or more of any other word characters (letter, number, underscore) 
```

下面是一个 refiddle 示例：[http ://refiddle.com/gld](http://refiddle.com/gld)

# java - 如何在 Java 中跳过一个块？

> ID：15311393
> 
> 赞同：3
> 
> 时间：2013-03-09T13:45:50.723
> 
> 标签：java, loops, for-loop, breakpoints

在给定的程序中，我必须确保两个连续字符是否相同。我不应该增加变量 (Count) 的值...我尝试过“break;”，但这让我跳出了“for 循环”，这是非常适得其反的。我怎样才能跳过给定的部分，仍然继续“for循环”？

目前我对“Hello//world”的输出是3。它应该是2（'/'表示''（空格））。

### 代码

```
import java.util.Scanner;
class CountWordsWithEmergency
{
    public static void main()
    {
        Scanner input = new Scanner(System.in);
        System.out.println("Please input the String");
        String inp = input.nextLine();
        System.out.println("thank you");
        int i = inp.length();
        int count = 1;
        for(int j=0;j<=i-1;j++) //This is the for loop I would like to stay in.
        {
            char check = inp.charAt(j);
            if(check==' ')
            {
                if((inp.charAt(j+1))==check) //This is the condition to prevent increase for
                                             //count variable.
                {
                    count = count; //This does not work and neither does break;
                }
                count++;
            }
        }
        System.out.println("The number of words are : "+count);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T13:47:32.883

您可以使用关键字`continue`来完成您正在尝试做的事情。

但是，您也可以反转您的条件测试并`count++`仅在它不同时使用（`!=`而不是`==`在您的 if 中），否则什么也不做

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T13:48:51.400

```
if ((inp.charAt(j+1)) != check)  {
    count++;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T13:47:27.830

您正在寻找的词是“[继续](http://msdn.microsoft.com/en-us/library/801hyx6f%28v=vs.80%29.aspx)”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-09T13:49:35.997

尝试这个：

```
if ((inp.charAt(j+1)) != check)  {
    count++;
} 
```

通过检查来增加 count 的值`!=`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-09T13:47:28.757

尝试在要跳过块的地方使用 continue 。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-09T13:48:15.740

使用“[继续](http://msdn.microsoft.com/en-us/library/801hyx6f%28v=vs.80%29.aspx)；” 当您想中断当前迭代时。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-30T16:05:07.340

continue 是 Java 编程中的一个关键字，用于跳过循环或代码块并以新条件重新执行循环。

continue 语句仅在 while、do while 和 for 循环中使用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-09T13:49:27.673

以下应该工作。

```
import java.util.Scanner;
class CountWordsWithEmergency
{
    public static void main()
    {
        Scanner input = new Scanner(System.in);
        System.out.println("Please input the String");
        String inp = input.nextLine();
        System.out.println("thank you");
        int i = inp.length();
        int count = 1;
        for(int j=0;j<=i-1;j++) //This is the for loop I would like to stay in.
        {
            char check = inp.charAt(j);
            if(check==' ')
            {
                if((inp.charAt(j+1))==check) //This is the condition to prevent increase for
                                             //count variable.
                {
                    continue;
                }
                count++;
            }
        }
        System.out.println("The number of words are : "+count);
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-09T13:53:53.270

您可能想要使用`continue`关键字，或稍微修改逻辑：

```
import java.util.Scanner;
class CountWordsWithEmergency  
{
  public static void main()
  {
    Scanner input = new Scanner(System.in);
    System.out.println("Please input the String");
    String inp = input.nextLine();
    System.out.println("thank you");
    int i = inp.length();
    int count = 1;
    for(int j=0;j<=i-1;j++) //This is the for loop I would like to stay in.
    {
      char check = inp.charAt(j);
      if(check==' ')
      {
        if((inp.charAt(j+1))!=check)
        {
          count++;
        }
      }
    }
    System.out.println("The number of words are : "+count);
  }
} 
```

**编辑：**

您可能想使用该类的`split`方法`String`。

```
int wordsCount = str.split(' ').length; 
```

希望能帮助到你 ：）

# mysql - 如何在 PHP 的边界框中获取所有可用的商店？

> ID：15311399
> 
> 赞同：1
> 
> 时间：2013-03-09T13:46:36.007
> 
> 标签：mysql, map, bounding-box

我有一个包含“地点”的表格，每个地点都有一个名称和纬度、经度坐标。给定一个坐标边界框（lat/lng 周长），什么是仅检索该框中位置的有效方法？. 我现在有了地图所有角落的坐标，我想得到那个矩形内的所有商店。

![在此处输入图像描述](../Images/6cf638d9ed02719ce9a49bdabc480cf1.png)

我希望这可以在 PHP 和 MySQL 中完成。我正在尝试使用`BETWEEN`查询，但无法找到商店。我的代码如下：

```
$sql = "
    SELECT * from myTable
    WHERE lon BETWEEN '$west_lon' AND '$east_lon'
    AND lat BETWEEN '$south_lat' AND '$north_lat'
"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:41:25.073

嗨，我终于解决了我的问题。Query 中有一个愚蠢的错误。

```
$sql="SELECT * FROM `MyTable`  WHERE (longitude BETWEEN '$west_long' AND '$east_long') AND (lat BETWEEN '$north_lat' AND '$south_lat')"; 
```

如果有人找到更好的方法，请在此处发布。我不知道它是否正确。

# sql - PL Sql 解析#字符

> ID：15311403
> 
> 赞同：0
> 
> 时间：2013-03-09T13:46:54.063
> 
> 标签：sql, plsql

我在表中有一个记录，它只包含一列，它的列包含字符串下的数据。

> D#1001111068#112B#0010040130022013012111505444##20130121110800#20130121115054#01#-##240#用户名#用户名#20130124171831#20130130#6

在 # 个字符之间，每个字符串在其他表中显示一列。

```
D# 
1001111068#                          --Customer Number 
112B#                                --Procut Id 
0010040130022013012111505444#        --Serial Number 
#                                    --Order Number(empty record)     
20130121110800#                      --X Columns 
```

我想解析这些项​​目并插入到其他表中。这个怎么写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:09:03.023

您可以通过以下表达式提取第 n 个子字符串：

```
regexp_substr(source_string, '([^#]*)(#|$)', 1, n, '', 1) 
```

完整查询：

```
create table your_table(
   source_string varchar2(4000)
);

insert into your_table
values('D#1001111068#112B#0010040130022013012111505444##20130121110800#20130121115054#01#-##240#username#username#20130124171831#20130130#6');

select 
  n,
  regexp_substr(source_string, '([^#]*)(#|$)', 1, n, '', 1) 
from your_table,
(
  select level as n from dual 
  connect by level <= (
    select max(regexp_count(source_string, '#')) + 1 
    from your_table
  )
) 
where n <= regexp_count(source_string, '#') + 1; 
```

输出：

```
1 天
2 1001111068
3 112B
4 0010040130022013012111505444
5（空）
6 20130121110800
7 20130121115054
8 01
9 -
10（空）
11 240
12 用户名
13 用户名
14 20130124171831
15 20130130
16 6

```

[小提琴](http://www.sqlfiddle.com/#!4/048f9/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:57:30.437

您正在寻找的功能是[regexp_substr](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions131.htm)。

# javascript - 将表单数据发送到其他服务器并返回 pdf

> ID：15311406
> 
> 赞同：-1
> 
> 时间：2013-03-09T13:47:06.850
> 
> 标签：javascript, ajax

我有一个非常复杂的表单，其中包含相当多的字段（大约 50 个）。提交过程工作正常，但我想添加一个新的“链接”，允许用户获取他在 PDF 上填写的数据。

我在另一台服务器上设置了一个简单的 PDF 机制，但我需要在那里发送表单数据，而不是在原始服务器上实际提交表单。

我该如何执行以下操作：

*   将所有表单数据发送到另一台服务器
*   收到 PDF，同时仍停留在表单页面上并能够提交

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:49:41.447

我相信最好的方法是提交到你自己的服务器，让他将数据处理成PDF。
如果您愿意，您的服务器可以向外部服务器发出 HTTP 请求。
在您的服务器处理请求并创建 PDF 后，他可以生成一个链接供客户端（浏览器）下载，您将使用`Javascript`.

# dns - Amazon Route 53 DNS 反向查找区域 - ATT IP 块设置

> ID：15311414
> 
> 赞同：2
> 
> 时间：2013-03-09T13:47:43.963
> 
> 标签：dns, amazon, reverse, routes

我无法在 Amazon Route 53 中为已委派给 Amazon 名称服务器的 ATT IP 块正确配置反向 DNS 查找。

所以，我有一块由 ATT 分配给我的 IP。该块是`12.237.40.64/27`. ATT 已将该块委托给 Amazon 名称服务器。我首先`dig -x`对块中的一个 IP 执行 - `.65`，并获得以下信息：

```
;; ANSWER SECTION:

65.40.237.12.in-addr.arpa. 86400 IN     CNAME   65.64/27.40.237.12.in-addr.arpa. 
```

因此，我开始在 Amazon Route 53 中创建一个名称为`65.64/27.40.237.12.in-addr.arpa` < 此值的区域正在输入到 UI 中 Amazon Route 53 中的“域名”字段中。创建并保存后，Route 53 实际上为该区域命名：

```
65.64\05727.40.237.12.in-addr.arpa 
```

不知道为什么会这样。似乎来自 ATT 的 CNAME 条目将永远找不到该区域`65.64/27.40.237.12.in-addr.arpa` ？？所以我继续并假设从 CNAME 条目到我在 53 号路线内的屏幕上查看的区域名称会发生​​某种转换。一旦创建了区域。我继续尝试在 Route 53 中添加 PTR 记录。Route 53 只允许我在区域名称前加上 ip，因此结果是：

```
65.65.64\05727.40.237.12.in-addr.arpa PTR server.mydomain.com 
```

我想要的结果是：

```
65.40.237.12.in-addr.arpa. PTR     server.mydomain.com. 
```

所以我添加了一个新的区域文件并将区域命名为`40.237.12.in-addr.arpa`. `.65`然后，我在块中添加了 with的 PTR 记录。然后`dig -x 12.237.40.65 @amz.name.server`，我得到了想要的结果：

```
;; ANSWER SECTION:

65.40.237.12.in-addr.arpa. 300  IN      PTR     server.mydomain.com. 
```

所以问题似乎是我无法命名 Route 53 区域以同意来自 ATT 的 CNAME 代表团？

我找到了一篇关于 ATT 委派 IP 块 的文章 ( [PDF )。](http://planner.bus.att.com/tab010a.pdf)

谁能给我一些正确在亚马逊路由 53 上设置反向 DNS 的指导？或者我是否需要联系 ATT 将 CNAME 条目更改为可以添加并保存在路由 53 中的其他格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:33:14.913

`65.64/27.40.237.12.in-addr.arpa.`并且`65.65.64\05727.40.237.12.in-addr.arpa PTR server.mydomain.com`只是对同一事物的格式略有不同的名称。`\057`是 的八进制代码`/`。看起来您已正确配置域...

```
colmmacc@colmmac] dig NS 64/27.40.237.12.in-addr.arpa. @ns-1175.awsdns-18.org
<snip>
;; QUESTION SECTION:
;64/27.40.237.12.in-addr.arpa.  IN  NS

;; ANSWER SECTION:
64/27.40.237.12.in-addr.arpa. 3600 IN   NS  ns-1175.awsdns-18.org.
64/27.40.237.12.in-addr.arpa. 3600 IN   NS  ns-1967.awsdns-53.co.uk.
64/27.40.237.12.in-addr.arpa. 3600 IN   NS  ns-281.awsdns-35.com.
64/27.40.237.12.in-addr.arpa. 3600 IN   NS  ns-593.awsdns-10.net. 
```

并且反向 DNS 条目似乎也在工作：

```
colmmacc@colmmacc] dig -x 12.237.40.65 

;; QUESTION SECTION:
;65.40.237.12.in-addr.arpa. IN  PTR

;; ANSWER SECTION:
65.40.237.12.in-addr.arpa. 86400 IN CNAME   65.64/27.40.237.12.in-addr.arpa.
65.64/27.40.237.12.in-addr.arpa. 300 IN PTR smtpwin.omnilink.com. 
```

Route 53 仅转义所有非字母数字字符以进行显示，但`/`and`\057` 是等价的。

# java - 如何 i18n 格式化字节数和持续时间

> ID：15311431
> 
> 赞同：2
> 
> 时间：2013-03-09T13:49:05.427
> 
> 标签：java, icu

我想格式化一条消息，如“1.0 KiB 的数据传输需要 1:32 小时”。但我需要格式化和本地化的字节数和持续时间。我发现了几个如何格式化字节数的想法，持续时间似乎很好。但随之而来的是本地化，我的本土代码变得过多。我正在寻找如何在 ICU 库的帮助下实现这种格式化的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T13:55:56.877

您可以简单地使用 Java `MessageFormat`，它允许您将不同的 Java 类型格式化为字符串；这种格式应该做你想做的

```
final MessageFormat format = new MessageFormat("Data transfer of {0,number,0.0} KiB took {1}:{2} hours"); 
```

用法是

```
final String formatted = format.format(new Object[]{amountTransferred, hours, minutes}); 
```

哪里`amountTransferred`是 a `double`or `float`or `BigDecimal`，`hours`并且`minutes`是整数类型。

如果您需要单独执行此操作，已经有一篇关于如何格式化分钟数的[帖子。](https://stackoverflow.com/questions/5387371/how-to-convert-minutes-to-hours-and-minutes-hhmm-in-java)`HH:mm`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T23:54:12.783

ICU has both compact decimals for units (1.0 MiB) and duration formats now. This is a great question, I don't think msgformat supports this natively now.

What you could do is to just use the pattern `{0,number}` without KiB as in Boris' response, but then call `format.setFormat(0,...)` to replace the number formatter with a CompactDecimalFormat or with a unit formatter.

# asp.net - 将 Session.Item 传递给 MySQL 查询

> ID：15311434
> 
> 赞同：0
> 
> 时间：2013-03-09T13:49:33.273
> 
> 标签：asp.net

我有一个具有会话变量的 aspx 网页：

```
Dim UserName As String = CType(Session.Item("UserName"), String) 
```

我正在尝试将此变量包含在Databound控件的`MySQL`查询中：`SqldataSource``GridView`

```
Dim Sql As String = "SELECT DeviceDescription, DeviceType, DeviceID 
   FROM validate WHERE ClientID='" & UserName & "'" 
```

但是，这不起作用。

您如何在 中传递/包含此`session`变量？`DataSource``GridView`

# css - 如何使 css 适合我的内容而没有空格

> ID：15311437
> 
> 赞同：0
> 
> 时间：2013-03-09T13:49:38.290
> 
> 标签：css, html, margin, padding, spacing

我有一个图片上传系统，但我希望当用户上传他/她的图片时，它可以完美地放在彼此的下方或旁边！像这样

![http://sphotos-h.ak.fbcdn.net/hphotos-ak-frc1/858857_512093658832576_175558807_o.jpg](../Images/5c5ea24e9cec644bf7414ffc69fe1c1d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T14:00:58.607

为每一列创建 div，并将这些列向左浮动。我建议你使用一些 jquery 插件。[像这样](http://masonry.desandro.com/)（jQuery 砌体）

1.  [另一个拼贴画](http://plugins.jquery.com/collage/)
2.  [凯尔特·多金斯拼贴画](https://github.com/kdocki/jquery-collage)
3.  [Kelt Dokins - 拼贴演示](http://www.keltdockins.com/2/post/2012/08/jquery-collage-plugin.html)

# php - CodeIgniter 新闻教程 删除

> ID：15311441
> 
> 赞同：0
> 
> 时间：2013-03-09T13:50:08.937
> 
> 标签：php, codeigniter

我正在使用 CodeIgniter 并完成了新闻教程。我正在尝试在新闻部分添加删除和更新按钮。我已经在 stackoverflow 上看到有关本教程中删除按钮的帖子，但我仍然无法使其正常工作。

这是我从您的帖子中使用的编码

news_model.php

```
<?php
class News_model extends CI_Model {

public function __construct()
{
    $this->load->database();
}

public function get_news($slug = FALSE)
 {
if ($slug === FALSE)
{
    $query = $this->db->get('news');
    return $query->result_array();
}

$query = $this->db->get_where('news', array('slug' => $slug));
return $query->row_array();
}

public function set_news()
{
$this->load->helper('url');

$slug = url_title($this->input->post('title'), 'dash', TRUE);

$data = array(
    'title' => $this->input->post('title'),
    'slug' => $slug,
    'text' => $this->input->post('text')
);

return $this->db->insert('news', $data);
 }

public function delete_news($id) {
$this->db->delete('news', array('id' => $id));
}

}

 CONTROLLER - news.php

   <?php
   class News extends CI_Controller {

public function __construct()
{
    parent::__construct();
    $this->load->model('news_model');
}

public function index()
{
    $data['news'] = $this->news_model->get_news();
    $data['title'] = 'News archive';

$this->load->view('templates/header', $data);
$this->load->view('news/index', $data);
$this->load->view('templates/footer');

}

public function view($slug)
{
    $data['news'] = $this->news_model->get_news($slug);
    if (empty($data['news_item']))
{
    show_404();
}

$data['title'] = $data['news_item']['title'];

$this->load->view('templates/header', $data);
$this->load->view('news/view', $data);
$this->load->view('templates/footer');

}

public function create()
   {
$this->load->helper('form');
$this->load->library('form_validation');

$data['title'] = 'Create a news item';

$this->form_validation->set_rules('title', 'Title', 'required');
$this->form_validation->set_rules('text', 'text', 'required');

if ($this->form_validation->run() === FALSE)
{
    $this->load->view('templates/header', $data);   
    $this->load->view('news/create');
    $this->load->view('templates/footer');

}
else
{
    $this->news_model->set_news();
    $this->load->view('news/success');
}
 }

   public function delete($id) {
   $this->news_model->delete_news($id);
   $this->load->helper('url');
   redirect('/www.shelim786.co.uk/CodeIgniter/news');
}

}

VIEWS - index.php 

<?php foreach ($news as $news_item): ?>

<h2><?php echo $news_item['title'] ?></h2>
<div id="main">
    <?php echo $news_item['text'] ?>
</div>
<p><a href="news/<?php echo $news_item['slug'] ?>">View article</a></p>
<p><a href="news/delete <?php echo $news_item['slug'] ?>">delete article</a></p>

<?php endforeach ?>

and ROUTING

  $route['news/create'] = 'news/create';
  $route['news/(:any)'] = 'news/view/$1';
  $route['news'] = 'news';
  $route['(:any)'] = 'pages/view/$1';
  $route['default_controller'] = 'pages/view';
  $route['news/delete/(:any)'] = 'news/delete/$1'; 
```

我遇到的问题是，当我单击删除按钮时，www.shelim786.co.uk/CodeIgniter/index.php/news 中的新闻文章没有被删除。

如果您能帮助我，我将不胜感激。

谢谢，

谢利姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T17:21:16.450

你应该重定向你的删除链接**delete_news 函数**
而不是**删除函数**，因为删除查询写在那里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:27:24.493

链接中的“删除”一词后没有斜线。您的链接会显示为`http://www.shelim786.co.uk/CodeIgniter/index.php/news/delete 6`. 注意“删除”后的空格？

在您看来，将“删除文章”链接行更改为此。

```
<p><a href="news/delete/<?php echo $news_item['slug'] ?>">delete article</a></p> 
```

注意到“删除”后的斜线了吗？

# c++ - C++ 编译。翻译阶段#1。通用角色名称

> ID：15311447
> 
> 赞同：4
> 
> 时间：2013-03-09T13:50:33.650
> 
> 标签：c++, compiler-construction, utf-8

我无法理解它在 c++ 标准中的含义：

> 任何不在基本源字符集 (2.3) 中的源文件字符都将替换为指定该字符的通用字符名。（实现可以使用任何内部编码，只要在源文件中遇到的实际扩展字符，以及在源文件中表示为通用字符名称的相同扩展字符（即，使用 \uXXXX 表示法）是等效处理，除非此替换在原始字符串文字中恢复。）

据我了解，如果编译器看到字符不在基本字符集中，它只是用这种格式的字符序列替换它**'\uNNNN'**或**'\UNNNNNNN'**。但我不知道如何获得这个 NNNN 或 NNNNNNNN。所以这是我的问题：**如何进行转换**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T14:42:17.590

请注意前面的句子，其中指出：

> 如有必要，物理源文件字符以实现定义的方式映射到基本源字符集（为行尾指示符引入换行符）。

也就是说，编译器如何实际解释构成文件的字符或字节完全取决于编译器。在进行这种解释时，它必须决定哪些物理字符属于基本源字符集，哪些不属于。如果一个角色不属于，则将其替换为通用角色名称（或者至少，效果*就像*它已经完成一样）。

这样做的目的是将源文件减少到一个非常小的字符集——基本源字符集中只有 96 个字符。任何不在基本源字符集中的字符都已替换为`\`、`u`或`U`以及一些十六进制数字 ( `0`- `F`)。

通用字符名称是以下之一：

```
\uNNNN
\UNNNNNNNN 
```

其中每个`N`都是十六进制数字。这些数字的含义在 §2.3 中给出：

> 由universal-character-name 指定的字符`\UNNNNNNNN`是ISO/IEC 10646 中字符短名称为的字符`NNNNNNNN`；Universal-character-name 指定的字符`\uNNNN`是 ISO/IEC 10646 中字符短名称为 的字符`0000NNNN`。如果通用字符名称的十六进制值对应于代理代码点（在`0xD800`-<code>0xDFFF 范围内，包括在内），则程序格式错误。

ISO/IEC 10646 标准起源于 Unicode 之前并定义了通用字符集 (UCS)。它将代码点分配给字符并指定这些代码点应如何编码。Unicode 联盟和 ISO 小组随后联手致力于 Unicode。Unicode 标准比 ISO/IEC 10646 规定的要多得多（算法、功能字符规范等），但现在这两个标准保持同步。

因此，您可以将`NNNN`or`NNNNNNNN`视为该字符的 Unicode 代码点。

例如，考虑源文件中包含以下内容的一行：

```
const char* str = "Hellô"; 
```

由于 ô 不在基本源字符集中，因此该行在内部被翻译为：

```
const char* str = "Hell\u00F4"; 
```

这将给出相同的结果。

您的代码中只有某些部分允许使用通用字符名称：

*   在字符串文字中
*   在字符文字中
*   在标识符中（但是，[这不是很好的支持](https://stackoverflow.com/q/12692067/150634)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T15:10:47.323

> 但我不知道如何获得这个 NNNN 或 NNNNNNNN。所以这是我的问题：如何进行转换？

映射是实现定义的（例如，§2.3 脚注 14）。例如，如果我将以下文件另存为 Latin-1：

```
#include <iostream>

int main() {
    std::cout << "Hallö\n";
} 
```

并`g++`在 OS X 上编译它，运行后我得到以下输出：

```
Hell� 
```

…但如果我将它保存为 UTF-8，我会得到这个：

```
Hellö 
```

因为 GCC 假定 UTF-8 作为我系统上的输入编码。

其他编译器可能会执行不同的映射。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T14:17:52.607

因此，如果您的文件被调用`Hello°¶.c`，编译器将在内部使用该名称时，例如，如果我们这样做：

```
cout << __FILE__ << endl; 
```

编译器将转换`Hello°¶.c`为`Hello\u00b0\u00b6.c`.

但是，当我尝试使用它时，`g++`它并没有这样做......

但汇编器输出包含：

```
.string "Hello\302\260\302\266.c" 
```

# clojure - 如何解决 Clojure 中的整数溢出问题？

> ID：15311448
> 
> 赞同：2
> 
> 时间：2013-03-09T13:50:48.137
> 
> 标签：clojure

我正在做这个练习。[帕斯卡梯形](http://www.4clojure.com/problem/147)

我的解决方案是：

```
(fn pascal[initseq]
  (let [gen-nextseq (fn [s]
                      (let [s1 (conj (vec s) 0)
                            s2 (cons 0 s)]
                        (map + s1 s2)))]
    (cons 
      initseq 
      (lazy-seq 
        (pascal 
          (gen-nextseq initseq)))))) 
```

我通过了前三个测试用例，但最后一个失败了。

它说“java.lang.ArithmeticException：整数溢出”

那么，Clojure 中是否有一个大整数，或者有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T13:58:39.727

将 + 更改为 +'。如果结果不适合 long，那将自动为您提供 clojure.lang.BigInt。您还可以在文字上使用 N 后缀来获得 BigInt。

```
(class (+' 3 2)) ;=> java.lang.Long
(class (+' 300000000000000000000000000000 2)) ;=> clojure.lang.BigInt
(class 3N) ;=> clojure.lang.BigInt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T13:58:51.280

您可以使用`+'`而不是`+`任意精度。

```
(fn pascal[initseq]
  (let [gen-nextseq (fn [s]
                      (let [s1 (conj (vec s) 0)
                            s2 (cons 0 s)]
                        (map + s1 s2)))]
                             ^^
... 
```

因此，您可以将代码的上述标记部分修改如下。

```
 (map +' s1 s2)))] 
```

# php - mysql查询超时的php请求

> ID：15311449
> 
> 赞同：-1
> 
> 时间：2013-03-09T13:50:56.737
> 
> 标签：php, mysql

我正在尝试进行长时间的 mysql 查询并处理和更新创建的行：

```
$query = 'SELECT tvshows.id_show, tvshows.actors FROM tvshows where tvshows.actors is not NULL';
$result = mysql_query($query);

$total = mysql_num_rows($result);
echo $total;

while ($db_row = mysql_fetch_assoc($result)) 
{
//process row
} 
```

但在 60 秒后给我一个超时请求，我尝试在我的 php 代码中插入这些：

```
set_time_limit(400); 
```

但它是一样的，我该怎么办？

**编辑：** 只有查询：

```
 $query = 'SELECT tvshows.id_show, tvshows.actors FROM tvshows where tvshows.actors is not NULL'; 
```

执行需要 2-3 秒，所以我认为问题是在 php 中我迭代所有结果以插入行或更新它，所以我认为问题出在 php 中，我该如何更改超时？

**编辑**：

这是完整的代码，我认为代码中没有问题...

```
$query = 'SELECT tvshows.id_show, tvshows.actors FROM tvshows where tvshows.actors is not NULL';
$result = mysql_query($query);

$total = mysql_num_rows($result);
echo $total;

while ($db_row = mysql_fetch_assoc($result)) {
   //print $db_row['id_show']."-".$db_row['actors']."<BR>";
   $explode = explode("|", $db_row['actors']);

   foreach ($explode as $value) {
      if ($value != "") {

         $checkactor = mysql_query(sprintf("SELECT id_actor,name FROM actors WHERE name = '%s'",mysql_real_escape_string($value))) or die(mysql_error());

         if (mysql_num_rows($checkactor) != 0) {
            $actorrow = mysql_fetch_row($checkactor);
            $checkrole = mysql_query(sprintf("SELECT id_show,id_actor FROM actor_role WHERE id_show = %d AND id_actor = %d",$db_row['id_show'],$actorrow[0])) or die(mysql_error());

                if (mysql_num_rows($checkrole) == 0) {
               $insertactorrole = mysql_query(sprintf("INSERT INTO actor_role (id_show, id_actor) VALUES (%d, %d)",$db_row['id_show'],$actorrow[0])) or die(mysql_error());
            }

         } else {
            $insertactor = mysql_query(sprintf("INSERT INTO actors (name) VALUES ('%s')",mysql_real_escape_string($value))) or die(mysql_error());
            $insertactorrole = mysql_query(sprintf("INSERT INTO actor_role (id_show, id_actor, role) VALUES (%d, %d,'')",$db_row['id_show'],mysql_insert_id())) or die(mysql_error());

         }
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:04:52.607

绝对应该尝试@rid 建议的内容，并在服务器上执行查询并查看要调试的结果/持续时间 - 如果查询不是一个简单的查询，请像在 PHP 脚本中那样构建它，并且只回显 SQL 命令，不必执行它，只需将其复制到服务器 MySQL 命令行或您使用的任何工具中。

如果您有 shell 访问权限，请在再次运行上述脚本后使用[top](http://linux.about.com/od/commands/l/blcmdl1_top.htm)命令，并查看 MySQL 恶魔服务器是否在资源中激增，看看是否真的是原因。

您还可以尝试使用更简单的查询来代替更长的查询吗？就像一个简单的`SELECT count(*) FROM tvshows`，看看是否也需要很长时间才能返回一个值？

希望这些建议有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:42:19.110

你的代码有很多问题。

*   不要在单个列中存储多个值。您的`actors`列是用竖线分隔的文本。这是一个很大的禁忌。
*   使用 JOIN 而不是其他查询。您可以（或可以，如果上述情况不正确）在单个查询中获取所有这些数据。
*   您的所有代码都可以在服务器上的单个查询中完成。正如我所看到的，它不接受用户的输入，也不产生输出。它只是更新一个表。为什么在 PHP 中这样做？了解`INSERT...SELECT...`.

以下是一些帮助您入门的资源（来自谷歌搜索，但希望它们足够好）：

[http://www.sitepoint.com/understanding-sql-joins-mysql-database/](http://www.sitepoint.com/understanding-sql-joins-mysql-database/)

[http://dev.mysql.com/doc/refman/5.1/en/join.html](http://dev.mysql.com/doc/refman/5.1/en/join.html)

[http://dev.mysql.com/doc/refman/5.1/en/insert-select.html](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)

[什么是标准化（或标准化）？](https://stackoverflow.com/questions/246701/what-is-normalisation-or-normalization?lq=1)

如果您还有其他问题，请告诉我。

# python - 我的聊天客户端在开始线程后冻结

> ID：15311450
> 
> 赞同：0
> 
> 时间：2013-03-09T13:50:57.597
> 
> 标签：python, function, sockets, blocking

在人们的帮助下，我制作了一个更好的聊天客户端：

他们告诉我，如果我不想在等待消息时被 .recv 阻塞，我需要使用线程、类、函数和队列来做到这一点。

所以我遵循了一个特定的人给我的一些帮助，在那里我从一个类中创建了一个线程，然后定义了一个应该读取传入消息并打印它们的函数。

我还创建了一个功能，允许您输入要发送的东西。

事情是，当我运行程序时。没发生什么事。

有人可以帮忙指出什么问题吗？（我已经提出问题并研究了3天，但没有得到任何结果，所以我确实尝试了）

```
from socket import *
import threading
import json
import select

print("Client Version 3")
HOST = input("Connect to: ")
PORT = int(input("On port: "))
# Create Socket

s = socket(AF_INET,SOCK_STREAM)
s.connect((HOST,PORT))
print("Connected to: ",HOST,)

#-------------------Need 2 threads for handling incoming and outgoing messages--

#       1: Create out_buffer:
Buffer = []

rlist,wlist,xlist = select.select([s],Buffer,[])

class Incoming(threading.Thread):
    # made a function a thread
    def Incoming_messages():
        while True:
            for i in rlist:
                data = i.recv(1024)
                if data:
                    print(data.decode())

# Now for outgoing data.
def Outgoing():
    while True:
        user_input=("Your message: ")
        if user_input is True:
            Buffer += [user_input.encode()]
        for i in wlist:
            s.sendall(Buffer)
            Buffer = [] 
```

感谢您的浏览，也感谢 Tony The Lion 的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:14:38.230

看看你的代码的这个修订版本：（在 python3.3 中）

```
from socket import *
import threading
import json
import select

print("client")
HOST = input("connect to: ")
PORT = int(input("on port: "))

# create the socket
s = socket(AF_INET, SOCK_STREAM)
s.connect((HOST, PORT))
print("connected to:", HOST)

#------------------- need 2 threads for handling incoming and outgoing messages--

#       1: create out_buffer:
out_buffer = []

# for incoming data
def incoming():
    rlist,wlist,xlist = select.select([s], out_buffer, [])
    while 1:
        for i in rlist:
            data = i.recv(1024)
            if data:
                print("\nreceived:", data.decode())

# now for outgoing data
def outgoing():
    global out_buffer
    while 1:
        user_input=input("your message: ")+"\n"
        if user_input:
            out_buffer += [user_input.encode()]
#       for i in wlist:
            s.send(out_buffer[0])
            out_buffer = []

thread_in = threading.Thread(target=incoming, args=())
thread_out = threading.Thread(target=outgoing, args=())
thread_in.start() # this causes the thread to run
thread_out.start()
thread_in.join()  # this waits until the thread has completed
thread_out.join() 
```

*   在您的程序中，您遇到了各种问题，即您需要调用线程；仅仅定义它们是不够的。
*   您还忘记了以下行中的函数 input()：user_input=input("your message:")+"\n"。
*   “select()”函数一直阻塞，直到你有东西要读，所以程序没有到达代码的下一部分，所以最好把它移到阅读线程。
*   python中的send函数不接受列表；在 python 3.3 中，它接受一组字节，由编码（）函数返回，因此必须调整部分代码。

# c# - ASP C#RequiredFieldValidator

> ID：15311456
> 
> 赞同：0
> 
> 时间：2013-03-09T13:51:27.617
> 
> 标签：c#, asp.net, requiredfieldvalidator

```
[textbox1]

[textbox2]

[button1] [linkbutton1] 
```

我有 2 、`textboxes`2`RequiredFieldValidator`和. button1 和 2textboxes 与RequiredFieldValidator 一起正常工作，但如果我单击链接按钮，RequiredFieldValidator 也会出现。`button1``linkbutton`

我只想把`RequiredFieldValidator`焦点放在`button1`. 这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:55:29.007

`CausesValidation="false"`像这样在链接按钮标记中设置

```
<asp:LinkButton ID="lnkButton" runat="server" CausesValidation="false"></asp:LinkButton> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:55:28.537

您需要指定验证组

```
 <asp:requiredfieldvalidator id="RequiredFieldValidator2"
      controltovalidate="AgeTextBox"
      validationgroup="PersonalInfoGroup"
      errormessage="Enter your age."
      runat="Server">
    </asp:requiredfieldvalidator> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T14:07:11.970

> 使用`ValidationGroup`的属性`RequiredFieldValidator`。

`ValidataionGroup="someName"`为您的`textbox1-requiredfieldvalidator`和`textbox2- requiredfieldvalidator`您的`button1`控件 设置。

注意：保持名称`ValidationGroup`不变。

# rpy2 - 在 Windows 上安装 rpy2 时出错

> ID：15311457
> 
> 赞同：8
> 
> 时间：2013-03-09T13:51:37.077
> 
> 标签：rpy2

我正在尝试安装 rpy2 包并同时出现以下错误

```
C:\python27>easy_install rpy2

Searching for rpy2
Reading http://pypi.python.org/simple/rpy2/
Reading http://rpy.sourceforge.net
Best match: rpy2 2.3.3
Downloading http://pypi.python.org/packages/source/r/rpy2/rpy2-2.3.3.tar.gz#md5=6cd95eb70645577cb53198ef0a32395e
Processing rpy2-2.3.3.tar.gz
Running rpy2-2.3.3\setup.py -q bdist_egg --dist-dir c:\users\chetan~1\appdata\local\temp\easy_install-wfxip9\rpy2-2.3.3\egg-di
st-tmp-rrezfb
"C:\PROGRA~2\R\R-28~1.0\bin\R" CMD config --ldflags
Invalid substring

in string

C:\Python27\lib\site-packages\setuptools\command\easy_install.py:921: RuntimeWarning: tp_compare didn't return -1 or -2 for ex
ception
  raise DistutilsError("Setup script exited with %s" % (v.args[0],))
error: Setup script exited with Problem while running `"C:\PROGRA~2\R\R-28~1.0\bin\R" CMD config --ldflags` 
```

当我尝试 pip 这就是我得到的

```
c:\Python27\Lib\site-packages\django\bin>pip install rpy2 
```

下载/解压 rpy2 为包 rpy2 运行 setup.py egg_info

```
"C:\PROGRA~2\R\R-28~1.0\bin\R" CMD config --ldflags
Invalid substring

in string

Problem while running `"C:\PROGRA~2\R\R-28~1.0\bin\R" CMD config --ldflags` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T16:28:21.427

我也花了几天时间......然后我偶然发现了[这个线程](https://stackoverflow.com/questions/2817869/error-unable-to-find-vcvarsall-bat)，其中给出了一个链接：[http ://www.lfd.uci.edu/~gohlke/pythonlibs/#rpy2](http://www.lfd.uci.edu/~gohlke/pythonlibs/#rpy2)

在此页面上，您可以找到（以及其他有用的东西）用于 Windows 和不同版本 Python 的 rpy2 的预编译版本。它显然只适用于 R 2.15.3，我没有尝试使用其他版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-08T19:41:48.100

# 最近不得不尝试从源代码构建它。获得了 rpy2-2.2.2 版本，因此我可以在 Oracle Linux 上与 Python 2.6.6 一起使用。

让它工作的解决方案是在 setup.py 脚本中修复一些事情。

首先，允许 get_rconfig() 允许空字符串。如果有办法标记这一点，那对我来说并不明显：

```
 config = RConfig()
    for about in ('--ldflags', '--cppflags',
                  'LAPACK_LIBS', 'BLAS_LIBS'):
        #config += get_rconfig(r_home, about)
        config += get_rconfig(r_home, about, allow_empty = True) 
```

其次，使用 RConfig.from_string 中的 dropthrough 修复一个错误，它引用了一个不存在的变量：

```
 elif rconfig_m is None:
                if allow_empty:
                #if allow_empty and (rconfig == ''):
                    print(cmd + '\nreturned an empty string.\n') 
```

然后，这允许解析 R CMD 配置循环和空案例（如果您的 R 构建未构建为共享库，您可能会遇到这种情况）并且我能够完成循环

python setup.py 构建安装

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-03T09:22:08.517

错误

> `"C:\PROGRA~2\R\R-28~1.0\bin\R" CMD config --ldflags`

可能是由于 windows 中没有类似 unix 的工具造成的。（您可能还遇到过类似的错误

> 'sh' 不是内部或外部命令、可运行程序或批处理文件

通过安装 Rtools 和 mingw 编译器并更改 setup.py 和 unixccompiler.py 文件，我终于让它在 Windows 7 上运行。请参阅[Windows 7 上的 rpy2 安装](https://stackoverflow.com/questions/14882477/rpy2-install-on-windows-7)

还有错误

> %load_ext rmagic
> 
> RuntimeError("无法在 %s 中找到 R.dll" % RHOME)

是由于 rpy2 无法在代码中正确找到 R.dll 造成的。您可以将 R_HOME 环境变量添加为外部文件夹，例如 C:\Program Files\R\R-3.0.2（有关详细信息，请参阅链接）。

希望这可以帮助..

# python-3.x - 在 Windows7 上用 Python3.3 安装 Scipy

> ID：15311462
> 
> 赞同：0
> 
> 时间：2013-03-09T13:51:57.267
> 
> 标签：python-3.x, scipy

如何在 Windows7 上将 Scipy 安装到 python3.3 中（我安装了 Numpy）？官方二进制文件最高只支持 Python 3.2。请给出详细说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T07:35:42.357

这是与您的问题相关的答案 非官方包

[在哪里下载 Python3.3 的 Scipy？](https://stackoverflow.com/questions/15662643/where-to-download-scipy-for-python3-3)

# c# - Fluent NHibernate 中的内存泄漏

> ID：15311464
> 
> 赞同：2
> 
> 时间：2013-03-09T13:52:08.763
> 
> 标签：c#, .net, asp.net-mvc, fluent-nhibernate

我正在使用 Fluent NHibernate 作为我们的 ORM，但出现内存泄漏错误。

我在任务管理器中观察到，每当我尝试从同一台 PC 中的不同 Web 浏览器访问主页时，CPU 使用率为 2-3%，但内存使用率为 80-90%，这会导致网站速度变慢并导致系统挂起。要再次运行我的网站，我必须从任务管理器中结束进程。还有一件事，当我从浏览器访问它时，它会使用一些内存，但是当我关闭它时，它不会释放所有资源（该内存）。

我以这种方式制作了我的网站架构：-

1.  我创建了一个类“ParentObject”，在其中创建了 Repository 对象作为静态成员。
2.  我创建的所有实体都继承自“ParentObject”类。
3.  我又创建了一个类 BaseController，它是从“Controller”类继承的，在 Base 类中我使用了以下代码：-

    ```
    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
       base.OnActionExecuting(filterContext);
       EdustructRepository Repository;  // My Repository Class where I have written logic for opening and closing Save and Update Session.I have mentioned my this logic below
        if (Session["Repository"] != null)
        {
            Repository = (EdustructRepository)Session["Repository"];
            if (!Repository.GetSession().Transaction.IsActive)
               Repository.GetSession().Clear();
        }
        else
        {
            Repository = new EdustructRepository(typeof(ActivityType), FluentNhibernateRepository.DataBaseTypes.MySql);
            Session["Repository"] = Repository;
        }
        if (ParentObject._repository == null)   
        {
            ParentObject._repository = new EdustructRepository();  // Here i have set the ParentObject's static variable "_repository" by this i have accessed repository in all my Entities .
        }
    } 
    ```

4.  我已经用 BaseController 类继承了我的所有控制器。通过这个，我得到了每次操作命中的“_repository”对象。

我的会话管理逻辑

```
public class EdustructRepository : NHibernetRepository
{

    public void Save<T>(T item, bool clearSession)
    {
        if (typeof(T).GetProperty("Created_at").GetValue(item, null).ToString() == DateTime.MinValue.ToString())
        {
            typeof(T).GetProperty("Created_at").SetValue(item, MySqlDateTime.CurrentDateTime(), null);
        }
        typeof(T).GetProperty("Updated_at").SetValue(item, MySqlDateTime.CurrentDateTime(), null);
        base.CheckAndOpenSession();
        using (var transaction = base.GetSession().BeginTransaction())
        {
            try
            {
                base.GetSession().SaveOrUpdate(item);
                transaction.Commit();
                if (clearSession)
                {
                    Session.Clear();
                }
            }
            catch
            {
                base.Evict(item);
                base.Clear();
                throw;
            }
        }
        //base.Save<T>(item, clearSession);
    }

    public void Save<T>(T item)
    {
        Save<T>(item, false);
    }
}

public class NHibernetRepository : IDisposable
{
    public static ISessionFactory _SessionFactory = null;

    protected ISession Session = null;

    private ISessionFactory CreateSessionFactory()
    {
        return Fluently.Configure()
          .Database(MySQLConfiguration.Standard.ConnectionString(c => c.FromConnectionStringWithKey("DBConnectionString")))
          .Mappings(m =>m.FluentMappings.AddFromAssembly((Assembly.Load("Edustruct.Social.DataModel"))).Conventions.Add<CascadeConvention>())
          .ExposeConfiguration(cfg => cfg.SetProperty(NHibernate.Cfg.Environment.CurrentSessionContextClass,"web"))
          .BuildSessionFactory();
    }

    protected void CheckAndOpenSession()
    {
        if (_SessionFactory == null)
        {
            _SessionFactory = CreateSessionFactory();
        }
        if (Session == null)
        {
            Session = _SessionFactory.OpenSession();
            Session.FlushMode = FlushMode.Auto;
        }
        if (!Session.IsOpen)
            Session = _SessionFactory.OpenSession();
        else if (!Session.IsConnected)
            Session.Reconnect();
    }    
 } 
```

注意：我们没有在我们的存储库中关闭会话，这是因为我正在使用延迟初始化，我也在视图中使用过它，所以如果我在这里关闭会话，我会收到一个错误，显示“找不到会话”。

这就是我如何使我的网站流动起来。请您查看此代码并告诉我为什么会收到此错误。

提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:25:29.227

问题：

*   你基本上每个实体都举行一个会话，永远打开。然而 ISession 实现了工作单元模式，这并不意味着这个。
*   `CheckAndOpenSession()`不是线程安全的，但 web 服务本质上是线程的：每个请求通常都有自己的线程。
*   什么用途

**每个业务操作**都应该有自己的会话，该会话在结束时被处理掉。业务操作通常是控制器操作或 Web 方法。

样本

```
// on appstart
GlobalSessionFactory = CreateSessionFactory();

// in basecontroller befor action
protected override void OnActionExecuting(ActionExecutingContext filterContext)
{
   base.OnActionExecuting(filterContext);
   DatabaseSession = GlobalSessionFactory.OpenSession();
}

// in basecontroller after action (pseudocode)
protected override void OnActionExecuted()
{
    DatabaseSession.Dispose();
} 
```

# cakephp - 关联模型中的 CakePHP 下拉框

> ID：15311466
> 
> 赞同：1
> 
> 时间：2013-03-09T13:52:29.810
> 
> 标签：cakephp

我有一个简单的 API，允许客户预订车辆。在我的预订控制器中，我有一个添加预订的功能。这是代码：

**控制器**

```
 function add() {
        if($this->request->is('post')) {
            if($this->Reservation->save($this->data)) {
                $this->Session->setFlash('The Reservation was successfully added!');
                $this->redirect(array('action'=>'index'));
            } else {
                $this->Session->setFlash('The Reservation was not added.');
            }
        }
        $this->set('title_for_layout','Add Reservation');
    } 
```

这是我在添加视图中的预订内容。

**看法**

```
<?php
echo $this->Form->create('Reservation', array('action'=>'add'));
echo $this->Form->input('customer_id', array( 'type' => 'text' ) );
echo $this->Form->input('vehicle_id', array( 'type' => 'text' ) );
echo $this->Form->input('date');
echo $this->Form->end('Add Reservation');
?> 
```

但是因为我要添加一个新的预订，并且我想要一个用于车辆 ID 的下拉框和一个用于客户 ID 的下拉框，我该怎么做？

我想我已经通过将其放入客户和车辆模型来链接模型：

```
var $hasMany = array( 'Reservation' => array( 'className' => 'Reservation' ) ); 
```

谁能指出我正确的方向，以便在添加预订页面上出现一个带有车辆和客户 ID 列表的下拉框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T15:58:35.047

在控制器的添加功能中，使用

```
$vehicle = $this->Reservation->Vehicle->find('list', array('fields' =>array('Vehicle.id','Vehicle.name')));                               
$this->set('vehicle', $vehicle); 
```

在您看来，使用

```
<?php echo $this->Form->input('vehicle_id', array('type' => 'select',
                                                  'options' => $vehicle)); ?> 
```

对客户也使用相同的东西，您将在下拉列表中获得客户和车辆的列表。

# excel - VBA：使用变量作为对用户定义类型的引用

> ID：15311468
> 
> 赞同：4
> 
> 时间：2013-03-09T13:52:33.513
> 
> 标签：excel, user-defined-types, vba

如何在不创建类型实例副本的情况下使用局部变量引用用户定义的类型？

例如，在下面的代码中，我最想做的是在 MySub3 中创建一个局部变量**MT**，并引用嵌套在另一个结构中的数据结构......但 VBA 不允许这样做。它允许它用于对象，但不允许用于用户定义的类型（arrggg！）......并且没有明显的原因......它只是不允许它。

MySub1 展示了如何以冗长笨拙的方式引用嵌套结构。MySub2 展示了如何通过传入嵌套结构来做到这一点，但这会使调用例程变得混乱，并且拥有多个这样的嵌套结构会变得丑陋。

MySub2 展示了 VBA*可以*做我想做的事，但它似乎没有提供一种方法来做到这一点。我希望有一种我没有偶然发现的方法。

请注意，我的实际代码比这个示例复杂得多，多个独立的结构为许多数组提供索引作为结构元素。使用这些本地引用变量将使代码更具可读性和可管理性。

另请注意，我知道“with”语句，它确实有帮助，但一次只能用于一个结构。

另请注意，我知道我可以使用实际的对象类。我的代码开始使用对象，但我很快发现 VBA 对作为属性成员的数组设置了限制……这是用户定义类型没有的限制。

```
Type tMyType
    VariableA As Single
End Type

Type tMyOtherType
    MyTypeArray() As tMyType
End Type

Type tOneMoreType
    MyOtherType As tMyOtherType
End Type

Dim GlobalIndex As Integer

Sub TopLevel()
    Dim TopLevelType As tOneMoreType

    ReDim TopLevelType.MyOtherType.MyTypeArray(0 To 10)
    Call MySub1(TopLevelType)
    Call MySub2(TopLevelType.MyOtherType.MyTypeArray(GlobalIndex))
    Call MySub3(TopLevelType)
End Sub

Sub MySub1(OMT As tOneMoreType)
    Dim VarA As Single

    VarA = OMT.MyOtherType.MyTypeArray(GlobalIndex).VariableA
End Sub

Sub MySub2(MT As tMyType)
    Dim VarA As Single

    VarA = MT.VariableA
End Sub

Sub MySub3(OMT As tOneMoreType)
    Dim VarA As Single
    Dim MT

    Set MT = OMT.MyOtherType.MyTypeArray(GlobalIndex)
    VarA = MT.VariableA
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:34:23.683

从我的角度来看，你已经让它变得复杂了。但我相信你是有原因的。您提交的示例生成您提到的错误。但是，当我更改一些行时，没有错误。我不确定我的建议是否是您所期望的结果（虽然问题对我来说并不完全清楚），但请尝试这个而不是您的`MySub3`：

```
Sub MySub3(OMT As tOneMoreType)
Dim VarA As Single
Dim MT

MT = OMT.MyOtherType.MyTypeArray(GlobalIndex).VariableA

VarA = MT

End Sub 
```

通常，通过这种方式，我可以读取`MySub3`从`TopLevel`. 如果不是答案，请进一步澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:42:45.117

我认为您在这里遇到了 VBA 的限制之一。我不知道对嵌套用户类型的部分取消引用的限制。

我认为您最好使用包含具有 getter 和 setter 函数的私有数组的类（遗憾的是，VBA 也没有运算符重载）。

# c++ - 从 std::call_once 抛出异常

> ID：15311469
> 
> 赞同：6
> 
> 时间：2013-03-09T13:52:38.250
> 
> 标签：c++, exception, c++11, mutex, std

C++ 标准规定了以下关于`std::call_once`抛出异常的函数的执行（第 30.4.4.2/2 节）：

> 2/ 效果：不调用其函数的 call_once 执行是被动执行。调用其函数的 call_once 的执行是主动执行。主动执行应调用 INVOKE (DECAY_COPY (std::forward(func)), DECAY_COPY (std::forward(args))...)。**如果对 func 的这种调用引发异常，则执行异常，否则将返回。异常执行应将异常传播给 call_once 的调用者。**在任何给定的 once_flag 的所有 call_once 执行中：最多一个应该是返回执行；如果有返回执行，则为最后一次主动执行；并且只有在返回执行时才会有被动执行。[注意：被动执行允许其他线程可靠地观察早期返回执行产生的结果。——尾注]

我正在使用 Visual Studio 2012 并运行以下代码：

```
void f(){
    throw std::exception( "Catch me!" );
}

int main( int argc, char* argv[] ){
    once_flag flag;
    try{
        call_once( flag, f );
    } catch( const std::exception& e ){
        cout << e.what() << endl;
    }
    return 0;
} 
```

我的结果是：catch 块中的代码运行并打印消息，但是当程序存在时，我得到一个调用`abort()`并将以下消息打印到 cout：

> ...\mutex.c(38) 互斥量在忙时被破坏

这应该发生吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T14:30:54.317

> 这应该发生吗？

不，不是。这是一个**错误**。

但是，请注意 VC11 并不孤单：

*   英特尔 ICC 13.0.1 调用`std::terminate()`，就好像您的异常没有被处理一样（参见[实时示例](http://liveworkspace.org/code/4sAas7%2440)）；
*   GCC 4.8.0 beta 可能会做类似的事情，但它没有显示任何输出，它只是吞下异常并默默地终止程序（参见[live example](http://liveworkspace.org/code/4sAas7%2439)）。[**更新：此错误似乎在其他环境中无法重现，并且可能仅是 liveworkspace.org 上的配置问题**]

另一方面，GCC 4.7.2 和 Clang 3.2 表现正确。

顺便说一句，值得注意的是 C++ 标准（第 18.8.1 段）指定`std::exception` [只有一个默认构造函数和一个复制构造函数](http://en.cppreference.com/w/cpp/error/exception/exception)。您使用的构造函数很可能是不可移植的 MS 扩展。

您可以考虑`std::logic_error`改用，它派生自`std::exception`并支持接受字符串的构造函数。

# chef-infra - 如何让厨师在执行带有操作的包命令期间输出日志：安装？

> ID：15311473
> 
> 赞同：3
> 
> 时间：2013-03-09T13:53:23.067
> 
> 标签：chef-infra

我正在使用 Chef 进行部署。我有一个简单的食谱，如下所示：

```
package 'my-package' do
    action :install
end 
```

当 chef-client 在 Debian 上运行这个配方时，它不会告诉标准输出中 apt-get 的任何进展。如果 apt-get 无法安装软件包，我无法从 chef-client 的日志中获取有关失败的任何信息。我还检查了 /var/log/apt/term.log 但没有安装日志。

这是 chef-client 的日志输出：

```
[Sat, 09 Mar 2013 22:24:57 +0900] INFO: Processing package[my-package] action install (my-package::default line 19)

================================================================================
Error executing action `install` on resource 'package[my-package]'
================================================================================

Chef::Exceptions::Exec
----------------------
apt-get -y install my-package=3.0.0 returned 100, expected 0 
```

如何让 Chef 输出 apt-get 的安装进度？我应该使用执行命令而不是包命令吗？任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-05T15:01:10.100

您可以`-l debug`向主要客户提供选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-01T19:13:37.420

这是一个非常 Debian/Ubuntu 特有的问题。你`apt-cache`的已经过时了。你要么需要运行

```
apt-get update -y 
```

在目标机器上，或者[`apt`在](https://github.com/opscode-cookbooks/apt)你的`run_list`.

# javascript - HTML 部分的平滑动画

> ID：15311486
> 
> 赞同：0
> 
> 时间：2013-03-09T13:55:39.277
> 
> 标签：javascript, jquery, html, sections

我知道可以对过渡到 html 部分进行动画处理，以使它们平滑。

本网站： [http ://en.wikipedia.org/wiki/Dobroslav_Jevdevic](http://en.wikipedia.org/wiki/Dobroslav_Jevdevic)

*   使用 HTML 部分。
*   当您单击内容列表中的链接时，您会直接进入那里。

本网站： [http ://whatbrowser.org](http://whatbrowser.org)

*   使用 HTML 部分。
*   当您单击一个链接（页面底部的“返回顶部”）时，您会顺利过渡。

我在很多其他网站上也看到过这个，你是怎么做到的？

乍一看，我认为您需要 jQuery，但作为一个 HTML 类型的人，我并没有真正涉足 Java……我该怎么做呢？在此先感谢您的帮助：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:00:47.823

```
$('body').animate({scrollTop: 222}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:47:39.003

在参考站点（[http://en.wikipedia.org/wiki/Dobroslav_Jevdevic](http://en.wikipedia.org/wiki/Dobroslav_Jevdevic)）中，这是通过 id 的 hwlp 完成的。例如`<a href="#abc">Click Here</a>`，在锚标签href中，我们传递了点击锚标签时页面应该滚动的元素的id。但是为了提供平滑的效果，你必须使用jquery方法。还有你可以使用的javascript方法scrollTo()方法。如果您只想将 html 代码用于相同目的而不是 jquery，然后查看此代码

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>
<body>
<a href="#abc">Click Here</a>
<p>Hello</p>
<p>Hello</p>
<p>Hello</p>
<p>Hello</p>
<p>Hello</p>
<p>Hello</p>
<p>Hello</p>
<p>Hello</p>
<p>Hello</p>
<p>Hello</p>
<p>Hello</p>
<p>Hello</p>
<p>Hello</p>
<p>Hello</p>
<p>Hello</p>
<p>Hello</p>
<p>Hello</p>
<p>Hello</p>

   <h2 id="abc">Main Section</h2>
   <p>Hello</p>
   <p>Hello</p>
   <p>Hello</p>
   <p>Hello</p>
   <p>Hello</p>
   <p>Hello</p>
   <p>Hello</p>
   <p>Hello</p>
</body>
</html> 
```

# android - Android &Google Map API v2 - 显示地图时为空

> ID：15311489
> 
> 赞同：0
> 
> 时间：2013-03-09T13:56:01.563
> 
> 标签：android, google-maps, nullpointerexception

我正在努力使我的 Google Map API v2 片段正常工作。我已经仔细检查了 API 密钥和权限，但在尝试显示地图时仍然为空。以下是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.hanu.eateries"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

   <permission
          android:name="com.hanu.eateries.permission.MAPS_RECEIVE"
          android:protectionLevel="signature"/>
    <uses-permission android:name="com.hanu.eateries.permission.MAPS_RECEIVE"/>
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

    <uses-feature
          android:glEsVersion="0x00020000"
          android:required="true"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme"
        android:allowBackup="true"
        android:uiOptions="splitActionBarWhenNarrow" >
        <meta-data 
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="@string/mapApiKey" />
        <activity
            android:name=".DashboardActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".LoginActivity" />
        <activity android:name=".RegisterActivity" />
        <activity android:name=".PlaceListActivity" />
        <activity android:name=".WelcomeActivity" />
        <activity android:name=".PlaceViewActivity" />
        <activity android:name=".AccountActivity"/>
        <activity android:name=".SettingsActivity" /> 
        <activity android:name=".SettingsActivityLogin" /> 

    </application>

</manifest> 
```

这是我的代码：

```
public class PlaceLocationFragment extends Fragment{
    private GoogleMap myMap;
    final int RQS_GooglePlayServices = 1;

    private static final double GEO_CONVERSION = 1E6;

    @Override
      public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.location_view, container, false);
        initLayout();
        return view;
      }

    private void initLayout(){
        FragmentManager myFragmentManager = getActivity().getSupportFragmentManager();
        SupportMapFragment mySupportMapFragment = (SupportMapFragment) myFragmentManager.findFragmentById(R.id.map);

        myMap = mySupportMapFragment.getMap();
        myMap.setMyLocationEnabled(true);
        myMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);

        Intent intent = getActivity().getIntent();
        double spotLat = intent.getDoubleExtra("LAT", 21.139);
        double spotLng = intent.getDoubleExtra("LNG", 105.851);
        int latitude = (int) (spotLat * GEO_CONVERSION);
        int longitude = (int) (spotLng * GEO_CONVERSION);
        LatLng point = new LatLng(latitude, longitude);

        myMap.addMarker(new MarkerOptions().position(point).title(intent.getStringExtra("NAME") + "\n" + intent.getStringExtra("ADD")));
        myMap.getUiSettings().setCompassEnabled(true);
        myMap.getUiSettings().setZoomControlsEnabled(true);
        myMap.animateCamera(CameraUpdateFactory.newLatLng(point));

    }

    @Override
    public void onResume(){
        super.onResume();
        super.onResume();
        int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getActivity().getApplicationContext());

        if (resultCode == ConnectionResult.SUCCESS){
           Toast.makeText(getActivity().getApplicationContext(), 
             "isGooglePlayServicesAvailable SUCCESS", 
             Toast.LENGTH_LONG).show();
        }else{
           GooglePlayServicesUtil.getErrorDialog(resultCode, getActivity(), RQS_GooglePlayServices);
        }
    }
} 
```

Logcat 将错误指向该行`myMap.setMyLocationEnabled(true);`：

```
03-09 13:52:31.101: E/AndroidRuntime(802): FATAL EXCEPTION: main
03-09 13:52:31.101: E/AndroidRuntime(802): java.lang.NullPointerException
03-09 13:52:31.101: E/AndroidRuntime(802):  at com.hanu.eateries.PlaceLocationFragment.initLayout(PlaceLocationFragment.java:39)
03-09 13:52:31.101: E/AndroidRuntime(802):  at com.hanu.eateries.PlaceLocationFragment.onCreateView(PlaceLocationFragment.java:30)
03-09 13:52:31.101: E/AndroidRuntime(802):  at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
03-09 13:52:31.101: E/AndroidRuntime(802):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
03-09 13:52:31.101: E/AndroidRuntime(802):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
03-09 13:52:31.101: E/AndroidRuntime(802):  at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
03-09 13:52:31.101: E/AndroidRuntime(802):  at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
03-09 13:52:31.101: E/AndroidRuntime(802):  at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
03-09 13:52:31.101: E/AndroidRuntime(802):  at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
03-09 13:52:31.101: E/AndroidRuntime(802):  at android.support.v4.view.ViewPager.populate(ViewPager.java:1012)
03-09 13:52:31.101: E/AndroidRuntime(802):  at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:523)
03-09 13:52:31.101: E/AndroidRuntime(802):  at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:495)
03-09 13:52:31.101: E/AndroidRuntime(802):  at android.support.v4.view.ViewPager.setCurrentItem(ViewPager.java:476)
03-09 13:52:31.101: E/AndroidRuntime(802):  at com.hanu.eateries.PlaceViewActivity$2.onTabSelected(PlaceViewActivity.java:63)
03-09 13:52:31.101: E/AndroidRuntime(802):  at com.actionbarsherlock.internal.app.ActionBarWrapper$TabWrapper.onTabSelected(ActionBarWrapper.java:344)
03-09 13:52:31.101: E/AndroidRuntime(802):  at com.android.internal.app.ActionBarImpl.selectTab(ActionBarImpl.java:570)
03-09 13:52:31.101: E/AndroidRuntime(802):  at com.android.internal.app.ActionBarImpl$TabImpl.select(ActionBarImpl.java:1067)
03-09 13:52:31.101: E/AndroidRuntime(802):  at com.android.internal.widget.ScrollingTabContainerView$TabClickListener.onClick(ScrollingTabContainerView.java:519)
03-09 13:52:31.101: E/AndroidRuntime(802):  at android.view.View.performClick(View.java:4202)
03-09 13:52:31.101: E/AndroidRuntime(802):  at android.view.View$PerformClick.run(View.java:17340)
03-09 13:52:31.101: E/AndroidRuntime(802):  at android.os.Handler.handleCallback(Handler.java:725)
03-09 13:52:31.101: E/AndroidRuntime(802):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-09 13:52:31.101: E/AndroidRuntime(802):  at android.os.Looper.loop(Looper.java:137)
03-09 13:52:31.101: E/AndroidRuntime(802):  at android.app.ActivityThread.main(ActivityThread.java:5039)
03-09 13:52:31.101: E/AndroidRuntime(802):  at java.lang.reflect.Method.invokeNative(Native Method)
03-09 13:52:31.101: E/AndroidRuntime(802):  at java.lang.reflect.Method.invoke(Method.java:511)
03-09 13:52:31.101: E/AndroidRuntime(802):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-09 13:52:31.101: E/AndroidRuntime(802):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-09 13:52:31.101: E/AndroidRuntime(802):  at dalvik.system.NativeStart.main(Native Method) 
```

**编辑：我的 location_view.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
    <fragment xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/map"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      class="com.google.android.gms.maps.SupportMapFragment"/> 
```

这里可能是什么问题？如果您有任何建议，请让我知道。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:00:55.063

实际上，我认为问题在于您试图将 a`MapFragment`放入`Fragment`. `Fragment`级联是不允许的。您所有的地图/标记操作代码：

```
 FragmentManager myFragmentManager = getActivity().getSupportFragmentManager();
    SupportMapFragment mySupportMapFragment = (SupportMapFragment) myFragmentManager.findFragmentById(R.id.map);

    myMap = mySupportMapFragment.getMap();
    myMap.setMyLocationEnabled(true);
    myMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);

    Intent intent = getActivity().getIntent();
    double spotLat = intent.getDoubleExtra("LAT", 21.139);
    double spotLng = intent.getDoubleExtra("LNG", 105.851);
    int latitude = (int) (spotLat * GEO_CONVERSION);
    int longitude = (int) (spotLng * GEO_CONVERSION);
    LatLng point = new LatLng(latitude, longitude);

    myMap.addMarker(new MarkerOptions().position(point).title(intent.getStringExtra("NAME") + "\n" + intent.getStringExtra("ADD")));
    myMap.getUiSettings().setCompassEnabled(true);
    myMap.getUiSettings().setZoomControlsEnabled(true);
    myMap.animateCamera(CameraUpdateFactory.newLatLng(point)); 
```

应该进入使用包含您的布局的 Activity/FragmentActivity 内部`MapFragment`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T03:20:55.043

原来这不起作用的原因是我将 API 密钥引用到了一个字符串。当我尝试将密钥直接放在清单文件中时，它可以工作！这很奇怪，但我很高兴问题现在解决了。

# jquery - JQuery在特定区域显示模态，而不是冻结所有背景区域

> ID：15311490
> 
> 赞同：1
> 
> 时间：2013-03-09T13:56:03.410
> 
> 标签：jquery, modal-dialog, reveal.js

我是 JQuery 的新手，问我是否可以显示一些模态但仍然可以访问一些 div。因为当我触发模态时，孔背景被冻结，我想要一个特定的 div 不被冻结。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T13:57:37.280

尝试使用

```
 $( "selector" ).dialog({
  modal:false
 }); 
```

当您使用`modal:true`冻结的背景时。如果是假背景不冻结。

尝试使用未覆盖您的 div 的选择器。

# c++ - 将针对 msvcrt.dll 编译的库链接到 Visual Studio 10 C++ 应用程序

> ID：15311492
> 
> 赞同：2
> 
> 时间：2013-03-09T13:56:18.207
> 
> 标签：c++, visual-studio-2010, visual-c++, dll, runtime

我需要在我的应用程序中使用一些针对 msvcrt.dll 编译的 DLL。我已经尝试过了，一切*似乎*都很好。我的第一个担心是对 msvcrt.dll 的额外依赖；我已经包含了 Visual Studio 10 运行时库，并希望不必添加更多。我知道 msvcrt.dll 总是在窗口系统文件夹中，但我应该依赖这个吗？

这是有关库的页面：

[http://www.zlatkovic.com/libxml.en.html](http://www.zlatkovic.com/libxml.en.html)

我可以下载源代码并从头开始编译，并且可以长期这样做，但现在我想确保链接这些库和使用 DLL 不会出现问题。

该页面上有一段内容如下：

“您使用这些二进制文件编译的每个程序都必须使用相同的运行时。除非您喜欢您的应用程序崩溃，否则请将您的项目设置为使用 msvcrt.dll。如果您出于某种原因必须使用不同的运行时，那么您必须获取源代码并进行编译libxml 和你自己的朋友。”

这就是我担心的。目前看起来一切都很好，但我担心当它在其他具有不同设置的系统上出现时会发生什么..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T14:02:24.767

> 我知道 msvcrt.dll 总是在窗口系统文件夹中，但我应该依赖这个吗？

是的。`msvcrt.dll`由 Windows 拥有和维护。您可以依赖它的存在，并且您不需要（也不应该）自己分发它。

将 dll 链接到不同的运行时版本是没有问题的，*只要*它们不跨 DLL 边界传递 CRT 定义的类型（`std::vector`例如，它们可能具有不同的实现，因此从链接的 dll 传递这样的对象msvcr100.dll 到与 msvcrt.dll 链接的 dll 可能会导致问题，只要您不在一个 dll 中分配内存，并在另一个 dll 中释放它（同样，它们可能有不同的`malloc`/`free`实现，并且可能使用不同的堆）

但是它们可以很好地共存，只要你不要求它们做任何“不合理”的事情，这需要它们知道*另一个*dll 链接的 CRT 版本。（而且我相信几乎每个程序最终都依赖于 msvcrt.dll，因为如果不出意外，它们会链接到各种 Windows DLL，而这些 DLL 又会链接到 msvcrt.dll。所以如果这种情况不安全，那么几乎每个为 Windows 编写的程序都是不安全的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:09:27.800

通常在您创建或使用的 DLL 中，它们将取决于 msvcrt 的编号版本，例如：msvcrt90.dll 或调试版本：msvcrt90d.dll。或者也许是 msvcrt100.dll/msvcrt100d.dll。这些 DLL 包含所谓的 C 运行时库的实现。也许你把这个 msvcrt.dll 和我上面提到的那些混淆了？他们是两个不同的东西。

据我所知，msvcrt.dll 是微软自己的操作系统内部版本。您完全不必担心、思考、挠头、扭动眉毛或为该 DLL 失眠。

在“混合”C 运行时库中唯一需要注意的一件事就是不要从一个版本的 CRT 分配内存，而是使用不同版本的 CRT 释放它。最终，这涉及从一个堆分配并释放另一个堆。这很糟糕，CRT 会抱怨并抛出异常。

如果您部署的应用程序依赖于任何特定版本的 CRT，您还可以部署安装 CRT 的安装程序。微软实际上为这些提供免费下载。例如，如果您在启动应用程序时编译您的应用程序时依赖于超旧版本的 CRT（例如不再随 windows 提供的版本），那么唯一会发生的事情是 windows 将拒绝启动您的应用程序。它会给你一个神秘的信息，你必须谷歌才能弄清楚。

# ios - 在 iOS 运行时更改 UIButton 名称

> ID：15311494
> 
> 赞同：0
> 
> 时间：2013-03-09T13:56:23.667
> 
> 标签：ios, objective-c, uibutton

我有三个名为 tabItem2、tabItem3 和 tabItem4 的 UIButton。tabItems 的标签和标签的文本是动态的，并且取决于 InfoDictionary 中项目的值。我已经根据标签创建了开关，这些标签适用于所有三个按钮。如何更改下面的代码以适应不同的按钮？我需要按钮名称是可变的-> 意思是说 switch 语句应该适用于所有三个按钮。

代码如下所示：

```
IBOutlet UIButton *tabItem4;
    IBOutlet UIButton *tabItem2;
    IBOutlet UIButton *tabItem3;

IBOutlet UILabel *tabItem4Label;
    IBOutlet UILabel *tabItem2Label;
    IBOutlet UILabel *tabItem3Label;

NSArray *tabItemArray = [self.InfoDictionary objectForKey:@"tabitem"];
    for(int i = 0; i <[tabItemArray count]; i++)
     {
         NSString *nameOfTab = [NSString stringWithFormat:@"tabItem%d",i+2];
         NSLog(@"%@",nameOfTab);
         switch ([[tabItemArray objectAtIndex:i] intValue]) {
             case kTabGameButtonTag:
                 nameOfTab.tag = kTabGameButtonTag;
                 nameOfTabLabel.text = kTabTitleTextGame;
                 [nameOfTab setImage:[UIImage imageNamed:@"game.png"] forState:UIControlStateNormal];
                 break;
             case kTabVideoButtonTag:
                 nameOfTab.tag = kTabVideoButtonTag;
                 nameOfTabLabel.text = kTabTitleTextVideoClip;
                 [nameOfTab setImage:[UIImage imageNamed:@"video.png"] forState:UIControlStateNormal];
                 break;
             case kTabQuizButtonTag:
                 nameOfTab.tag = kTabVideoButtonTag;
                 nameOfTabLabel.text = kTabTitleTextQuiz;
                 [nameOfTab setImage:[UIImage imageNamed:@"quiz.png"] forState:UIControlStateNormal];
                 break;
             default:
                 break;
         }
     } 
```

在这方面需要一些指导。

编辑：

```
$1 = 0x0a219f50 {
tabitem =     (
        2000,
        2001,
        2002
    );
} 
```

字典中的其余项目是保密的。所以我只分享了重要的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:05:23.833

经过思考，我这样解决了这个问题：

```
 NSArray *tabItemArray = [self.InfoDictionary objectForKey:@"tabitem"];
    NSMutableArray *tabItems = [NSMutableArray arrayWithObjects:tabItem2,tabItem2Label,tabItem3,tabItem3Label,tabItem4,tabItem4Label,nil];
    for(int i = 0,j = 0 ; i <[tabItemArray count]; i++, j=j+2)
     {
         UIButton  *item1 =  [tabItems objectAtIndex:j];
         UILabel  *label1 = [tabItems objectAtIndex:j+1];
         switch ([[tabItemArray objectAtIndex:i] intValue]) {
             case kTabGameButtonTag:
                 item1.tag = kTabGameButtonTag;
                 label1.text = kTabTitleTextGame;
                 [item1 setImage:[UIImage imageNamed:@"game.png"] forState:UIControlStateNormal];
                 break;
             case kTabVideoButtonTag:
                 item1.tag = kTabVideoButtonTag;
                 label1.text = kTabTitleTextVideoClip;
                 [item1 setImage:[UIImage imageNamed:@"video.png"] forState:UIControlStateNormal];
                 break;
             case kTabQuizButtonTag:
                 item1.tag = kTabVideoButtonTag;
                 label1.text = kTabTitleTextQuiz;
                 [item1 setImage:[UIImage imageNamed:@"quiz.png"] forState:UIControlStateNormal];
                 break;
             default:
                 break;
         }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:27:07.517

我认为您正在设置图像而不是按钮的背景图像，请尝试使用此代码。我认为不需要另一个标签来显示按钮的标题

> ```
> [nameOfTab setImage:[UIImage imageNamed:@"game.png"] 
>            forState:UIControlStateNormal]; 
> ```

换成这个

> ```
> [nameOfTab setBackgroundImage:[UIImage imageNamed:@"game.png"] 
>                      forState:UIControlStateNormal]; 
> ```

# java - Java 数组错误（二维数组）

> ID：15311495
> 
> 赞同：-4
> 
> 时间：2013-03-09T13:56:27.257
> 
> 标签：java, arrays, simulator, indexoutofboundsexception

运行 Deer Simulator 时出现错误，代码如下

```
 public void comparegrassDeer()
        {
            int[] grasspos = new int[3];
            int[] deerpos = new int[2];
            for (int i = 0;i < aog; ++i)
            {
                grasspos = g[i].getpos();
                for (int j = 1; i <= aod;++i)
                {
                    deerpos = d[j].getpos();
                    if ((deerpos[0] >= grasspos[0]) && (deerpos[0] <= grasspos[1]) && (deerpos[1] >= grasspos[2]) &&(deerpos[1] <= grasspos[3]))
                    {
                        if (g[i].checkFood() != 0)
                        {
                            g[i].foodLoss();
                        }
                        else
                        {
                            d[j].hunger();
                        }
                    }
                }
            }
        }
    } 
```

主要问题在于比较草方法。请注意，它在编译时有效，但在我在 cmd 窗口中键入 updatedeer 时会产生错误。创建数组索引越界错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:29:57.850

`grasspos`是一个长度为 3 的数组。`(deerpos[1] <= grasspos[3])`我猜你应该调用它，`(deerpos[1] <= grasspos[2])`因为`grasspos[3]`它需要一个长度为 4 的数组。

# php - php pdo 使用 select 准备插入

> ID：15311503
> 
> 赞同：-1
> 
> 时间：2013-03-09T13:57:22.437
> 
> 标签：php, select, insert, pdo

这对我来说是个难题。我已经准备好用 php pdo “插入” Postgres

```
$sql = "INSERT INTO 
        mytable (zuordnung_id,spielgen_id,spielvor_id) 
        VALUES
           (
            :zuordnung_id, 
            :spielgen_id,
            :spielvor_id
            )"; 

$q2 = $objDb->prepare($sql); 

$q2->execute(array(':zuordnung_id'  => 5005,
                   ':spielgen_id'   => 5000,
                   ':spielvor_id'   => $_POST['User']
                      )); 
```

如何将 :zuordnung_id（此处为 5005）更改为 select 语句，该语句为我提供 mytable 中的最后一个数字？就像是

```
':zuordnung_id'  => SELECT max(zuordnung_id) + 1 
```

亲切的问候，

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:03:26.430

**你不需要最后一个数字**

您必须为您的表设置 auto_increment 索引

# python - 如何跟踪特定的终端命令？

> ID：15311510
> 
> 赞同：0
> 
> 时间：2013-03-09T13:58:23.480
> 
> 标签：python, ubuntu, openstack, openstack-nova

例如，在 Openstack 中，我输入命令并使用图像 myimage 启动一个实例并使用风味 1。

```
nova boot --image myimage --flavor 1 server1 
```

我如何实际跟踪此命令并获取详细信息，例如由于代码在 python 中执行了哪些函数，执行命令时它输入了哪些文件等，

对不起，我是一个 linux 菜鸟，我正在努力寻找追踪少数呼叫的方法。而不是通过浏览所有文件并执行此操作来执行此操作。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T02:19:50.893

如果您想跟踪常规 Python 程序，请查看[Python 跟踪模块](http://docs.python.org/2/library/trace.html)。

但是，我认为您会发现跟踪对于理解 OpenStack 在您提供的示例中所做的工作没有用处：

```
nova boot --image myimage --flavor 1 server1 
```

OpenStack 不是作为单个 Python 程序实现的。它被实现为 Python 程序的集合，这些程序作为 Linux 服务在不同的进程中运行，通常这些进程分布在多台机器上。

该`nova`程序只是一个小型客户端程序，它通过 HTTP 向 OpenStack 端点发出请求。当您执行上述请求时，将涉及以下服务。请注意，大多数 OpenStack“服务”实际上是由多个 Linux“服务”（也称为守护程序）实现的。这些是您执行`nova boot`.

*   身份服务（基石）
    *   *基石*
*   计算服务（新星）
    *   *新星API*
    *   *新星调度器*
    *   *新星计算*
    *   *nova-network*（如果不使用新的网络服务（量子））
*   图像服务（一目了然）
    *   *一目了然的API*
    *   *一目了然注册表*

请注意，如果涉及到新的网络服务（量子），那么这里将涉及更多的服务。

OpenStack 使用两种机制进行进程间通信：

*   HTTP（使用 REST API）用于跨 OpenStack 项目边界的通信（例如，Compute 服务和 Image 服务之间的通信）
*   基于 AMQP 的消息队列（通常是 RabbitMQ，但可以是 Qpid 或 ZeroMQ），用于在单个 OpenStack 项目中跨服务进行通信（例如*nova-api*和*nova-compute*之间的通信）

*这些服务还通过数据库共享信息，但如果您对跟踪控制线程感兴趣，这并不重要*。

对于您给出的示例`nova boot`，请注意跨服务发生的所有交互：

1.  *nova*客户端通过 HTTP 向身份服务（keystone）发出请求，传递用户名和密码并获取令牌
2.  *nova*客户端通过 HTTP 向计算服务 ( *nova-api* ) 发出请求以[创建新服务器](http://docs.openstack.org/api/openstack-compute/2/content/CreateServers.html)。
3.  *nova-api*通过消息队列向*nova-scheduler*发出请求以运行实例。
4.  *nova-scheduler选择一个计算主机并通过消息队列向该主机上的**nova-compute*发出请求，以启动一个新的虚拟机实例。
5.  *nova-compute*通过消息队列向*nova-network*发出请求，为新实例进行网络配置。
6.  *nova-compute*通过 HTTP 向映像服务 ( *glance-api* ) 发出虚拟机映像文件的请求。
7.  *Glance-api*通过 HTTP 向*Glance-registry*发出请求，以从图像后端检索文件。

    如果您想生成包含所有涉及的 OpenStack 代码的跟踪，则必须跟踪涉及的每个服务。

我建议只阅读代码而不是尝试进行自动跟踪。您还可以查看日志文件，因为它们包含大量调试信息。查看最近发布的[OpenStack 操作指南](http://docs.openstack.org/ops/)，了解有关如何读取日志文件的一些指导。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T05:49:11.117

除了 Lorin 所说的之外，您还可以运行“nova --debug boot ...”来查看 nova CLI 对 keystone 和 nova-api 进行的 REST API 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T14:40:57.153

`strace`如果您可以获得进程ID，则可以使用。

这是解释如何的链接：

[http://www.cyberciti.biz/tips/linux-strace-command-examples.html](http://www.cyberciti.biz/tips/linux-strace-command-examples.html)

# android - 如何通过wifi访问文件

> ID：15311514
> 
> 赞同：-2
> 
> 时间：2013-03-09T13:58:36.707
> 
> 标签：android, file, download, wifi, lan

我想制作一个 android 服务，通过 wifi 从本地网络下载文件到我的 android 设备。问题是我不知道如何访问这些文件。谁能帮助我我该怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-10T01:50:49.633

一个简单的搜索发现了这个：

[使用 Android 下载文件，并在 ProgressDialog 中显示进度](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)

假设您通过 HTTP 协议下载，这似乎就是您要寻找的东西。

你的问题的问题是缺乏信息让某人给你任何真正的帮助。

# methods - 红宝石。方法定义在哪个类中？

> ID：15311528
> 
> 赞同：0
> 
> 时间：2013-03-09T14:00:15.143
> 
> 标签：methods, where, defined

你们知道是否有可能了解该方法在哪个类中定义？

例如，

to_a 可能在 Enumerable 和 Numeric 或其他地方定义。是否有一个函数，比如类对象：

```
=> aaa=[1,2,3,4,5]
=> aaa.class
=> Array 
```

有没有像“defined_in”这样的方法？了解方法定义在哪个类中？

```
=> to_a.defined_in? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T19:46:55.263

在 Ruby 1.9 及更高版本上，您可以使用`Method#source_location`. 在 Ruby 1.8 上，有一个 gem [ruby​​18_source_location](https://github.com/ConradIrwin/ruby18_source_location)可以向后移植此功能。

请参阅[https://stackoverflow.com/a/13015691/260122](https://stackoverflow.com/a/13015691/260122)和同一问题的其他答案，以更好地讨论分析源代码的进一步方法，包括调试器。

* * *

编辑：对不起，我误读了你的问题。要找出哪个类或模块定义了一个方法，请使用`Method#owner`. 如：

```
> %w(a a a).method(:to_a).owner
=> Array 
```

# php - 无法从我的 codeigniter 查询代码中获得正确的输出

> ID：15311538
> 
> 赞同：0
> 
> 时间：2013-03-09T14:00:53.463
> 
> 标签：php, mysql, codeigniter

我正在执行以下代码的输出。但我得到的数据少了。我下面的代码错了吗？**我在我的 sql 查询浏览器中**
执行了具有正确变量的相同查询，我得到了 6 个结果。但是从我的********下面的代码中，我只得到 5 个结果********。 这种魔法背后的原因可能是什么？

 ***```
 public function get_all_book_list_ByCreatedDateDSC($limit, $start,$sortsesval)
    {
     $id=0; 
     $this->load->helper('date'); 
     $datestring = "%Y-%m-%d: %d:%h:%i";
     $time = time(); 
     $today=mdate($datestring, $time); 
     $pasttime=date("Y-m-d H:i:s", strtotime("-7 days"));
     printf('$today='.$today);  printf('$pasttime='.$pasttime);

     $this->load->database();  
     $this->db->limit($limit, $start);
     $this->db->select('*'); 
     $query =$this->db->join('coverdetails', 'coverdetails.cover_id = bookdetails.cover_id')->where('quantity >', $id)->where("bookdetails.created_date BETWEEN '$pasttime' AND '$today'")->get('bookdetails');
     print_r('no or rows='.$query->num_rows() );//output no or rows=5

      if ($query->num_rows() > 0)
        {
            foreach ($query->result() as $row)
            {
                $data[] = $row;
            }
            return $data;
        }
    return false;
   } 
```

请帮我解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:16:45.617

像这样改变你的功能代码

```
public function get_all_book_list_ByCreatedDateDSC($limit, $start,$sortsesval)
{
    $this->load->helper('date'); 
    $this->load->database();  

    $id         =   0; 
    $datestring =   "%Y-%m-%d: %d:%h:%i";
    $time       =   time(); 
    $today      =   mdate($datestring, $time); 
    $pasttime   =   date("Y-m-d H:i:s", strtotime("-7 days"));

    return $this->db
                ->select('*'); 
                ->join('coverdetails', 'coverdetails.cover_id = bookdetails.cover_id')
                ->where('quantity >', $id)
                ->where("bookdetails.created_date BETWEEN '$pasttime' AND '$today'")
                ->limit($limit, $start)
                ->get('bookdetails');
                ->result_array();
} 
```

也用于测试使用`$this->db->last_query()`和复制查询而不是将其粘贴到 PHP MyAdmin 中进行测试。其他可能性是`$limit`并且可能导致记录数量的变化`$offset`。`Between`***

# php - 如果变量第一个字符是点删除它

> ID：15311540
> 
> 赞同：-1
> 
> 时间：2013-03-09T14:01:20.423
> 
> 标签：php

寻找一些简单的错误证明。
如果第一个字符是“。”，我得到了`$keyword`想要过滤的变量。如果不保持原样，请将其删除。我不敢自己尝试，因为我以前创建过这样的代码，它破坏了整个事情，有时会删除文本中间的点......所以只有第一个字符（如果存在）很重要

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T14:09:44.353

一种方法：

```
$keyword = (substr($keyword, 0, 1) === '.' ? substr($keyword, 1) : $keyword); 
```

本质上是相同的，不太简洁，但可能更清晰的方式：

```
if (substr($keyword, 0, 1) === '.')
    {
    $keyword = substr($keyword, 1);
    } 
```

使用正则表达式：

```
$keyword = preg_replace('{^\.}', '', $keyword, 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T14:02:38.810

```
if ($keyword[0] === '.') {
    $keyword = substr($keyword, 1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T14:02:47.427

这将删除关键字开头的所有点。

```
$keyword = ltrim($keyword, '.'); 
```

# linux - 专门逐行调试

> ID：15311543
> 
> 赞同：3
> 
> 时间：2013-03-09T14:01:52.187
> 
> 标签：linux, debugging, gdb, pascal

我有一个用 Pascal 编写的脚本。我会以这种方式调试它：在每一行停止，将所有变量的值转储到内存中，然后转到下一行。是否可以使用 gdb 或其他一些适用于 Linux 的开源工具来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T14:39:08.767

使用选项编译文件`-g`：

```
fpc/gpc -g file.pas 
```

运行`gdb`此文件：

```
gdb file 
```

设置所有需要的变量：

```
display first_var
display second_var
... 
```

开始调试：

```
start 
```

按`s`可以继续下一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T15:59:04.577

我将展示一个概念验证，它逐步执行（单线程）程序，使用 GDB 的 Python API 转储所有变量：

```
# Usage: gdb -x dump-vars-each-step.py PROGRAM

import gdb

import re
import logging

LOG_LEVEL = logging.INFO

def dump_all_vars(skip_libc_symbols=True):
    # gdb calls the source of its debug info an 'objfile'
    # libc_objfile_name. e.g. '/usr/lib/debug/lib64/libc-2.16.so.debug'
    libc_objfile_name_pattern = r'libc.*\.so'
    frame = gdb.newest_frame()
    while frame:
        symtab = frame.find_sal().symtab
        if symtab is not None:
            objfile_name = symtab.objfile.filename
        else:
            objfile_name = ''
        logging.debug('F: %s, %s' % (frame, objfile_name))
        if skip_libc_symbols and re.match(r'libc.*\.so', os.path.basename(objfile_name)):
            return
        try:
            block = frame.block()
        except RuntimeError:
            block = None
        while block:
            logging.debug('B: %s, %s' % (block, block.function))
            for symbol in block:
                try:
                    value = frame.read_var(symbol, block)
                except gdb.error:
                    # typedefs etc don't have a value
                    pass
                else:
                    sys.stdout.write('%s: %s\n' % (symbol, value))
            block = block.superblock
        frame = frame.newer()

def dump_globals(names):
    for i in names:
        s = gdb.lookup_global_symbol(i)
        if s is not None:
            sys.stdout.write('%s: %s\n' % (s, s.value()))

inferior_alive = False

def inferior_exited(e):
    global inferior_alive
    inferior_alive = False
    sys.stdout.write('inferior exited with code: %d\n' % (e.exit_code))

def run_and_dump_vars_each_step():
    # precondition: inferior not running
    # NOTE: only handles single threaded programs
    global inferior_alive
    gdb.execute('start')
    inferior_alive = True
    gdb.events.exited.connect(inferior_exited)
    while inferior_alive:
        dump_all_vars()
        gdb.execute('step')
    gdb.execute('quit')

logging.basicConfig(format='%(message)s', level=LOG_LEVEL)
gdb.execute('set pagination no')
gdb.execute('set python print-stack full')
run_and_dump_vars_each_step() 
```

给定以下 C 语言中的河内塔程序：

```
enum {
     N = 2,
};

int peg_positions[N];

static void hanoi(int n, int src, int dst)
{
    int tmp = (0 + 1 + 2) - src - dst;

    if (n == 0) {
        peg_positions[n] = dst;
        return;
    }
    hanoi(n - 1, src, tmp);
    peg_positions[n] = dst;
    hanoi(n - 1, tmp, dst);
}

int main()
{
    hanoi(N - 1, 0, 2);
    return 0;
} 
```

运行`gcc -g hanoi.c -o hanoi`然后 `gdb -x dump-vars-each-step.py hanoi`打印：

```
Reading symbols from /home/scottt/work/gdb-python-scripts/hanoi...done.
Temporary breakpoint 1 at 0x400400: file hanoi.c, line 21.

Temporary breakpoint 1, main () at hanoi.c:21
21  {
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {0, 0}
22      hanoi(N - 1, 0, 2);
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {0, 0}
hanoi (n=n@entry=1, src=src@entry=0, dst=dst@entry=2) at hanoi.c:8
8   {
n: 1
src: 0
dst: 2
tmp: <optimized out>
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {0, 0}
9       int tmp = (0 + 1 + 2) - src - dst;
n: 1
src: 0
dst: 2
tmp: <optimized out>
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {0, 0}
8   {
n: 1
src: 0
dst: 2
tmp: <optimized out>
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {0, 0}
11      if (n == 0) {
n: 1
src: 0
dst: 2
tmp: 1
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {0, 0}
9       int tmp = (0 + 1 + 2) - src - dst;
n: 1
src: 0
dst: 2
tmp: 1
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {0, 0}
15      hanoi(n - 1, src, tmp);
n: 1
src: 0
dst: 2
tmp: 1
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {0, 0}
9       int tmp = (0 + 1 + 2) - src - dst;
n: 1
src: 0
dst: 2
tmp: 1
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {0, 0}
15      hanoi(n - 1, src, tmp);
n: 1
src: 0
dst: 2
tmp: 1
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {0, 0}
hanoi (n=n@entry=0, src=0, dst=dst@entry=1) at hanoi.c:8
8   {
n: 0
src: 0
dst: 1
tmp: <optimized out>
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {0, 0}
9       int tmp = (0 + 1 + 2) - src - dst;
n: 0
src: 0
dst: 1
tmp: <optimized out>
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {0, 0}
8   {
n: 0
src: 0
dst: 1
tmp: <optimized out>
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {0, 0}
11      if (n == 0) {
n: 0
src: <optimized out>
dst: 1
tmp: 2
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {0, 0}
12          peg_positions[n] = dst;
n: 0
src: <optimized out>
dst: 1
tmp: 2
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {0, 0}
18  }
n: 0
src: <optimized out>
dst: 1
tmp: 2
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {1, 0}
hanoi (n=n@entry=1, src=src@entry=0, dst=dst@entry=2) at hanoi.c:16
16      peg_positions[n] = dst;
n: 1
src: 0
dst: 2
tmp: <optimized out>
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {1, 0}
17      hanoi(n - 1, tmp, dst);
n: 1
src: 0
dst: 2
tmp: <optimized out>
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {1, 2}
11      if (n == 0) {
n: 1
src: 0
dst: 2
tmp: 0
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {1, 2}
12          peg_positions[n] = dst;
n: 1
src: 0
dst: 2
tmp: 0
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {1, 2}
18  }
n: 1
src: 0
dst: 2
tmp: 0
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {2, 2}
main () at hanoi.c:24
24  }
N: N
hanoi: {void (int, int, int)} 0x40050c <hanoi>
main: {int ()} 0x400400 <main>
peg_positions: {2, 2}
__libc_start_main (main=0x400400 <main>, argc=1, ubp_av=0x7fffffffde48, init=<optimized out>, fini=<optimized out>, rtld_fini=<optimized out>, stack_end=0x7fffffffde38) at libc-start.c:257
257   exit (result);
__GI_exit (status=0) at exit.c:99
99    __run_exit_handlers (status, &__exit_funcs, true);
98  {
99    __run_exit_handlers (status, &__exit_funcs, true);
__run_exit_handlers (status=0, listp=0x3c777b16a8 <__exit_funcs>, run_list_atexit=run_list_atexit@entry=true) at exit.c:36
36  {
41    while (*listp != NULL)
45        while (cur->idx > 0)
48          &cur->fns[--cur->idx];
47        const struct exit_function *const f =
49        switch (f->flavor)
73            cxafct = f->func.cxa.fn;
77            cxafct (f->func.cxa.arg, status);
75            PTR_DEMANGLE (cxafct);
77            cxafct (f->func.cxa.arg, status);
0x00000000004004c0 in __do_global_dtors_aux ()
Single stepping until exit from function __do_global_dtors_aux,
which has no line number information.
0x0000000000400450 in deregister_tm_clones ()
Single stepping until exit from function deregister_tm_clones,
which has no line number information.
0x00000000004004d2 in __do_global_dtors_aux ()
Single stepping until exit from function __do_global_dtors_aux,
which has no line number information.
0x00000000004005f4 in _fini ()
Single stepping until exit from function _fini,
which has no line number information.
__run_exit_handlers (status=0, listp=0x3c777b16a8 <__exit_funcs>, run_list_atexit=run_list_atexit@entry=true) at exit.c:78
78            break;
45        while (cur->idx > 0)
82        *listp = cur->next;
83        if (*listp != NULL)
82        *listp = cur->next;
83        if (*listp != NULL)
89    if (run_list_atexit)
90      RUN_HOOK (__libc_atexit, ());
_IO_cleanup () at genops.c:1003
1003    {
1006      int result = _IO_flush_all_lockp (0);
1003    {
1015      _IO_unbuffer_write ();
_IO_unbuffer_write () at genops.c:958
958         if (fp->_lock == NULL || _IO_lock_trylock (*fp->_lock) == 0)
_IO_cleanup () at genops.c:1003
1003    {
1006      int result = _IO_flush_all_lockp (0);
_IO_flush_all_lockp (do_lock=do_lock@entry=0) at genops.c:819
819 {
825   __libc_cleanup_region_start (do_lock, flush_cleanup, 0);
819 {
825   __libc_cleanup_region_start (do_lock, flush_cleanup, 0);
831   fp = (_IO_FILE *) _IO_list_all;
832   while (fp != NULL)
830   last_stamp = _IO_list_all_stamp;
832   while (fp != NULL)
836     _IO_flockfile (fp);
835       if (do_lock)
834       run_fp = fp;
835       if (do_lock)
838       if (((fp->_mode <= 0 && fp->_IO_write_ptr > fp->_IO_write_base)
848       if (do_lock)
852       if (last_stamp != _IO_list_all_stamp)
850       run_fp = NULL;
852       if (last_stamp != _IO_list_all_stamp)
859     fp = fp->_chain;
832   while (fp != NULL)
835       if (do_lock)
834       run_fp = fp;
835       if (do_lock)
838       if (((fp->_mode <= 0 && fp->_IO_write_ptr > fp->_IO_write_base)
848       if (do_lock)
852       if (last_stamp != _IO_list_all_stamp)
850       run_fp = NULL;
852       if (last_stamp != _IO_list_all_stamp)
859     fp = fp->_chain;
832   while (fp != NULL)
835       if (do_lock)
834       run_fp = fp;
835       if (do_lock)
838       if (((fp->_mode <= 0 && fp->_IO_write_ptr > fp->_IO_write_base)
848       if (do_lock)
852       if (last_stamp != _IO_list_all_stamp)
850       run_fp = NULL;
852       if (last_stamp != _IO_list_all_stamp)
859     fp = fp->_chain;
832   while (fp != NULL)
863   if (do_lock)
865   __libc_cleanup_region_end (0);
869 }
_IO_cleanup () at genops.c:1015
1015      _IO_unbuffer_write ();
_IO_unbuffer_write () at genops.c:947
947   for (fp = (_IO_FILE *) _IO_list_all; fp; fp = fp->_chain)
_IO_cleanup () at genops.c:1006
1006      int result = _IO_flush_all_lockp (0);
1015      _IO_unbuffer_write ();
_IO_unbuffer_write () at genops.c:947
947   for (fp = (_IO_FILE *) _IO_list_all; fp; fp = fp->_chain)
949       if (! (fp->_flags & _IO_UNBUFFERED)
983       fp->_mode = -1;
947   for (fp = (_IO_FILE *) _IO_list_all; fp; fp = fp->_chain)
949       if (! (fp->_flags & _IO_UNBUFFERED)
951           || (fp->_flags & _IO_IS_APPENDING))
950       && (! (fp->_flags & _IO_NO_WRITES)
953       && fp->_mode != 0)
983       fp->_mode = -1;
947   for (fp = (_IO_FILE *) _IO_list_all; fp; fp = fp->_chain)
949       if (! (fp->_flags & _IO_UNBUFFERED)
951           || (fp->_flags & _IO_IS_APPENDING))
950       && (! (fp->_flags & _IO_NO_WRITES)
983       fp->_mode = -1;
947   for (fp = (_IO_FILE *) _IO_list_all; fp; fp = fp->_chain)
_IO_cleanup () at genops.c:1018
1018    }
__run_exit_handlers (status=0, listp=<optimized out>, run_list_atexit=run_list_atexit@entry=true) at exit.c:92
92    _exit (status);
__GI__exit (status=status@entry=0) at ../sysdeps/unix/sysv/linux/_exit.c:28
28  {
32        INLINE_SYSCALL (exit_group, 1, status);
34        INLINE_SYSCALL (exit, 1, status);
32        INLINE_SYSCALL (exit_group, 1, status);
[Inferior 1 (process 32305) exited normally]
inferior exited with code: 0 
```

请注意，有时局部变量如何`tmp`显示`src`为已**优化**。我在 x86-64 上，其中函数参数在寄存器中传递，有时在代码中使用它时`tmp`被放置在寄存器**R**中，但随后 gcc 想要将寄存器**R**用于其他内容，并且值`tmp`被覆盖。这表明变量转储的质量将取决于编译器生成的调试信息的质量。最近的 gcc 为 C/C++ 生成了相当好的调试信息，我不确定 gcc Pascal 端口的最新程度或 FPC 在这里的表现如何。

用 Pascal 生成一个测试程序，用调试信息（pass **-g**）编译它并测试它留给读者作为练习；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T14:12:56.880

是的`gdb`，只要您的 Pascal 编译器提供 DWARF 调试信息，就可以在 Pascal 程序上使用调试器。如果使用[GNU Pascal](http://www.gnu-pascal.de) [（](http://www.gnu-pascal.de/gpc/GPC-Options.html)即`gpc`），您希望[在`-g`](http://www.gnu-pascal.de/gpc/GPC-Options.html)调用`gpc`. [如果您使用 Free Pascal](http://www.freepascal.org/docs-html/user/usersu15.html)，它还[接受`-g`](http://www.freepascal.org/docs-html/user/usersu15.html)`fpc`.

一旦你用调试信息编译了你的 Pascal 程序，你需要学习如何使用[GNU gdb](http://www.gnu.org/software/gdb/)。您可能需要`display`, `step`, `next`, `break`, `print`, `frame`,`cont`命令（to `gdb`）等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T13:49:49.373

因为每个图形 IDE 都支持开箱即用，所以假设您不是什么 IDE，答案似乎倾向于命令行工具。

但如果那没问题..[拉撒路](https://stackoverflow.com/questions/tagged/lazarus)可以做到这一点。您只需编译，按 F7 和 F8 跳过/步入 LOC，并在检查器窗口中查看该范围内的所有变量。

另一个 IDE 是 Delphi，但那不是开源/免费的。

# java - 那里有“Jetty server builder”项目吗？

> ID：15311544
> 
> 赞同：2
> 
> 时间：2013-03-09T14:01:52.990
> 
> 标签：java, spring-mvc, jersey, jetty, embedded-jetty

Jetty 是一个用于嵌入测试或独立应用程序以用于各种目的的出色容器，它擅长于此的部分原因在于它易于嵌入，因为它只需要几行代码。但是，我们中的一些人（我）对此并不满意，并且想要一个更简洁的解决方案。我正在寻找一个库，它充当各种场景的 Jetty 服务器的构建器。例如，我想说：

```
Server server = JettyServerBuilder.newSpringMvcServer()
    .withRootContext(rootContext).withDispatcherName("myapp")
    .atContextPath("/myContext"); 
```

获取为典型 Spring MVC 应用程序设置的服务器或

```
Server server = JettyServerBuilder.newJerseyServer()
    .withApplication(MyJaxRsApplication.class)
    .atContextPath("/myRestApi"); 
```

使用 Jersey 获取服务器来运行我的 JAX-RS 应用程序。

当然，这些只是几个可能的例子，如果有一个类似但不完全支持这些技术的项目，我仍然有兴趣看看它。我什至会接受为 Jetty 以外的东西做这件事的东西，只要支持设置各种各样的应用程序类型。有人知道这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:10:35.253

我想拥有其中一个已经有一段时间了，只是没有得到解决。所以，不，没有官方的......有一天会很高兴添加到项目中。

我总是设想这样的事情：

服务器 server = new FileServer().onPort("8080").onPath("/foo").withResourceBase("/path/here");

并且只定义了一些简单的服务器。

[编辑] 如果您喜欢在 RT/Jetty 下的 bugs.eclipse.org 上为它打开一个错误，最好为 jetty 9 制作其中一个

# php - 在登录时创建一个 if 语句？

> ID：15311548
> 
> 赞同：0
> 
> 时间：2013-03-09T14:02:01.960
> 
> 标签：php, mysql, login

嗨，我试图找到一种在我的登录脚本中添加 if 语句的方法，以便它检查我的数据库以查看列 'close_accounut' = '1' 是否显示此错误消息。

```
} else {
                    $closed_set = closed_account();
while ($closed = mysql_fetch_array($closed_set)) 
            if ($closed['close_account'] == '1')  {
                $message = "<div class=\"infobox_out\">This account is closed. You recently closed your account. To regain access please email <a href=\"mailto:support@playtimeboys.com\">Support@PlaytimeBoys.com</a> session has expired.</div>";
            echo "<a href=\"#\"><div class=\"infobox-close2\"></div></a>"; 
```

否则如果 close_account = '0' 则显示正常错误消息；

```
// email/password combo was not found in the database
                $message = "<div class=\"infobox_out\"><strong>Email / Password combination incorrect.</strong><br />
                    Please make sure your caps lock key is off and try again.</div>";
                    echo "<a href=\"#\"><div class=\"infobox-close2\"></div></a>"; 
```

我尝试了以下方法，但这什么也没做，请有人告诉我哪里出错了谢谢

```
<?php

    if (logged_in()) 

{ 
$_SESSION['login_message']="<div class=\"login-overlay\"></div><div class=\"login-box\"><div class=\"loginframe2\">
<h1>Login You In Securely </h1>
<p>login you in securely. Please wait.<br/><br/>
<div class=\"login-logo\">
  <img src=\"assets/css/photobox/loading.gif\" width=\"24\" height=\"24\"><div class=\"login-text-logo\">Login You In. Please Wait</div></div>
</div></div>"; 
header("Location:home.php");

}

    include_once("includes/form_functions.php");

    // START FORM PROCESSING
    if (isset($_POST['submit'])) { // Form has been submitted.
        $errors = array();

        // perform validations on the form data
        $required_fields = array('email', 'password');
        $errors = array_merge($errors, check_required_fields($required_fields, $_POST));

        $fields_with_lengths = array('email' => 50, 'password' => 30);
        $errors = array_merge($errors, check_max_field_lengths($fields_with_lengths, $_POST));

        $email = trim(mysql_prep($_POST['email']));
        $password = trim(mysql_prep($_POST['password']));
        $hashed_password = md5($password);

        if ( empty($errors) ) {
            // Check database to see if email and the hashed password exist there.
            $query = "SELECT id, email, close_account ";
            $query .= "FROM ptb_users ";
            $query .= "WHERE email = '{$email}' ";
            $query .= "AND password = '{$hashed_password}' ";
            $query .= "AND close_account = '0' ";
            $query .= "LIMIT 1";
            $result_set = mysql_query($query);
            confirm_query($result_set);
            if (mysql_num_rows($result_set) == 1) {
                // email/password authenticated
                // and only 1 match
                $found_user = mysql_fetch_array($result_set);
                $_SESSION['user_id'] = $found_user['id'];
                $_SESSION['email'] = $found_user['email'];
                $_SESSION['sub_expires'] = $found_user['subscription_expires'];

                $result = mysql_query("UPDATE ptb_users SET user_online='Online' WHERE id=".$_SESSION['user_id']."") 
or die(mysql_error());

if($result) 
{ 
$_SESSION['login_message']="<div class=\"login-overlay\"></div><div class=\"login-box\"><div class=\"loginframe2\">
<h1>Login You In Securely </h1>
<p> PlaytimeBoys.com is login you in securely. Please wait.<br/><br/>
<div class=\"login-logo\">
  <img src=\"assets/css/photobox/loading.gif\" width=\"24\" height=\"24\"><div class=\"login-text-logo\">Login You In. Please Wait</div></div>
</div></div>"; 
header("Location:home.php");

}

            }else{

                // email/password combo was not found in the database
                $message = "<div class=\"infobox_out\"><strong>Email / Password combination incorrect.</strong><br />
                    Please make sure your caps lock key is off and try again.</div>";
                    echo "<a href=\"#\"><div class=\"infobox-close2\"></div></a>";

            }

                } else {
                    $closed_set = closed_account();
while ($closed = mysql_fetch_array($closed_set)) 
            if ($closed['close_account'] == '1')  {
                $message = "<div class=\"infobox_out\">This account is closed. You recently closed your account. To regain access please email <a href=\"mailto:support@playtimeboys.com\">Support@PlaytimeBoys.com</a> session has expired.</div>";
            echo "<a href=\"#\"><div class=\"infobox-close2\"></div></a>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:08:50.927

我想你有一段时间错过了一个'{'。更改如下：

```
} else {
                    $closed_set = closed_account();
while ($closed = mysql_fetch_array($closed_set)) 
{
            if ($closed['close_account'] == '1')  {
                $message = "<div class=\"infobox_out\">This account is closed. You recently closed your account. To regain access please email <a href=\"mailto:support@playtimeboys.com\">Support@PlaytimeBoys.com</a> session has expired.</div>";
            echo "<a href=\"#\"><div class=\"infobox-close2\"></div></a>"; 
```

# java - 线程“主”java.lang.UnsatisfiedLinkError 中的异常：sample.HelloWorld.print()V

> ID：15311550
> 
> 赞同：0
> 
> 时间：2013-03-09T14:02:19.103
> 
> 标签：java, c

我正在尝试从 JAVA 类调用本机方法。这个 JAVA 类在我编译它并为其创建 [.h] 版本并详细说明 [.c] 文件中的所有定义之后。下一步是创建我使用 JAVA 类加载的 [.dll] 文件在静态参数范围内。

现在，当我尝试运行我的程序时，它给了我以下错误：

> **线程“主”java.lang.UnsatisfiedLinkError 中的异常：sample.HelloWorld.print()V**

我不明白如何从我的 JAVA 程序映射本机方法？

**更多代码解释：**

我有一个 [HelloWorld.java] 类文件，它具有称为 [print()] 方法声明的本机方法：

```
package sample;
public class HelloWorld{
    public native void print();
    static{
        System.loadLibrary("HelloWorld");
    }
} 
```

现在，在编译时，我得到了它的 [.class] 文件版本。接下来我创建了 [.h] 和 [.c] 文件，其中包含本机方法 [print()] 的定义，如下所示：

**地狱世界.c**

```
#include<stdio.h>
#include<jni.h>
#include<windows.h>
#include "HelloWorld.h"
JNIEXPORT void JNICALL Java_HelloWorld_print
  (JNIEnv * env, jobject jobj){
          printf("Hello there!!!!!!");
          return;          
  } 
```

现在，当我构建这个 [.c] 文件时，它会生成所需的 [.dll] 文件。一切正常，没有错误，当我调用 JAVA 文件时，打印出 print() 方法的消息。

当我尝试从不同的类**Invoker.java类文件中调用****HelloWorld.java类文件中的这个****print()**方法时，出现了主要问题。然后这会产生异常：

 ****> **线程“主”java.lang.UnsatisfiedLinkError 中的异常：sample.HelloWorld.print()V**

我不明白为什么当我这样做时会发生这种情况？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-22T03:15:09.810

.c 文件中的 JNICALL 函数名称应与 HelloWorld.h 文件中的名称完全相同

有关更多信息，请参阅此[链接](https://community.oracle.com/thread/2279602)****

# c - 链接：使虚拟地址对应文件偏移量

> ID：15311556
> 
> 赞同：0
> 
> 时间：2013-03-09T14:03:13.423
> 
> 标签：c, windows, assembly, linker, exe

我在让我的系统工作时遇到了一些小问题，所以我决定问一个问题，是否可以使虚拟地址对应于文件偏移量。`.text`因此，如果我的部分的虚拟地址是`0x1000`，我希望链接器填充“填充”空间以用零定位。是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T15:09:43.063

你提到*你的系统*，所以我假设它与爱好操作系统开发有关，并且你*知道*你想要做什么以及为什么。

如果图像是PE文件，可以使文件对齐等于节对齐。在 GNU ld 中，您可以通过将`--file-alignment 4096`（根据 PE 规范，默认的节对齐方式是`4096`并且不能少）传递给链接器来做到这一点。

如果您不关心制作有效的 PE，`--section-alignment 512`（`/ALIGN:512`对于 Microsoft 链接器）也可以工作。

# sqlite - SQLLite 上的多个更新触发器

> ID：15311566
> 
> 赞同：1
> 
> 时间：2013-03-09T14:04:37.557
> 
> 标签：sqlite, triggers

我想做的是管理新生的成绩归属。如果插入的包含学生 ID 和成绩的元组的成绩值小于 9 或大于 12，我们希望将值更改为 NULL。同时，如果插入的元组有一个等级为空值，我们想将其更改为 9。

以下代码有什么问题？

```
CREATE TRIGGER R1
AFTER INSERT ON Students
FOR EACH ROW 
BEGIN

  UPDATE Students
     SET grade = NULL 
   WHERE grade < 9 OR grade > 12;

  UPDATE Students
     SET grade = 9 
   WHERE grade = NULL;

END; 
```

请注意，在执行 INSERT 之后，必须在 Student 表上执行两个 UPDATE 语句。我们将 null 值更新为 9 级，将等级 > 9 或 > 12 更新为 NULL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:19:16.870

您应该将第二个条件从`= NULL`to替换为`IS NULL`：

```
UPDATE Students
     SET grade = 9 
   WHERE grade IS NULL; 
```

`= NULL`用and证明`IS NULL`：[http ://sqlfiddle.com/#!5/a51de/1](http://sqlfiddle.com/#!5/a51de/1)

其他解决方案：

[http://sqlfiddle.com/#!5/78288/1](http://sqlfiddle.com/#!5/78288/1)

```
CREATE TRIGGER TStudents3
AFTER INSERT ON Students3
FOR EACH ROW
/* we check update conditions here */
WHEN  NEW.grade IS NULL
  OR  NEW.grade < 9
  OR  NEW.grade > 12
BEGIN

  UPDATE Students3
     SET grade =
       CASE
         WHEN grade IS NULL THEN 9
         /* actually you could drop this 2 lines, because a missing ELSE returns NULL: */
         WHEN grade < 9 OR grade > 12 THEN NULL
         ELSE grade
       END
   /* We just want to update the freshly inserted row, not all row! */
   WHERE  id = NEW.id;

END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T13:27:42.637

另一种方法是在 where 子句中移动条件：

```
CREATE TRIGGER tr1 AFTER INSERT ON Student
BEGIN
     UPDATE Student SET grade = null WHERE id = NEW.id and (new.grade<9 or new.grade>12);
     UPDATE Student SET grade = 9 WHERE id = NEW.id and new.grade is null;
END; 
```

# c++ - C++11 DirectX Math：XMVECTORF32 作为基础结构初始化

> ID：15311568
> 
> 赞同：2
> 
> 时间：2013-03-09T14:04:54.530
> 
> 标签：c++, math, c++11, initialization, directx

我正在用 C++11/VC11 编写另一个游戏引擎，它目前使用 DirectX/Direct3D11 作为渲染后端。为了从公共接口中隐藏 DirectX 类型（以及以后可能实现的 OpenGL 后端），我自己推出了一个线性代数库，但它暂时仍然在内部使用 DirectX Math。DirectX Math 或多或少是围绕 C++ SIMD 内在函数（__m128 等）的一堆类型定义。为了将间接级别保持在较低水平并尽可能将内容设为“原子”和内联，我更喜欢直接从 DirectX 数学类型（在本例中为 XMVECTORF32）继承 - 即我不想将其用作成员变量：

```
struct vector4 : private DirectX::XMVECTORF32 
```

MSDN 给出了正确初始化 XMVECTORF32 结构的示例：

```
XMVECTOR data;
XMVECTORF32 floatingVector = { 0.f, 0.f, 0.1f, 1.f };
data = floatingVector; 
```

但是，编译器不理解我将 XMVECTORF32 初始化为基本结构的尝试。

```
struct vector4 : private DirectX::XMVECTORF32 // not XMFLOAT4 due to possible conversation overhead
{
    friend class matrix44;

    inline vector4(scalar v0, scalar v1, scalar v2, scalar v3)
        :   DirectX::XMVECTORF32{v0, v1, v2, v3} // ERROR: ';' expected
    {
    }
}; 
```

我错过了什么吗？如何正确执行我打算做的基本初始化？是否有一些新的 C++11 初始化糖可以帮助我？

------------**编辑**------------

由于某些原因，我没有看到明显的东西。在检查了 XMVECTORF32 的定义之后，很明显底层的 union-float-array "f" 对我来说是可以访问的，所以初始化看起来像这样。

```
struct vector4 : private DirectX::XMVECTORF32
{
    friend struct matrix44;

    inline vector4(scalar v0, scalar v1, scalar v2, scalar v3)
    {
        f[0] = v0;
        f[1] = v1;
        f[2] = v2;
        f[3] = v3;
    }
}; 
```

没有强制转换，没有联合，没有 c 数组。使用内联，性能应该接近最佳。

------------**编辑 2** ------------

XMVECTORF32 不适用于**存储**数据。因此向量必须从 XMFLOAT4 继承。否则，这会产生不可重现的访问冲突异常，尤其是在启用优化的情况下。这里有更多背景：[http ://www.asawicki.info/news_1429_xna_math_and_access_violation.html](http://www.asawicki.info/news_1429_xna_math_and_access_violation.html)

我的最终代码如下所示：

```
struct vector4 : private DirectX::XMFLOAT4
{
    friend struct matrix44;

    inline vector4(scalar v0, scalar v1, scalar v2, scalar v3)
        :   DirectX::XMFLOAT4(v0, v1, v2, v3)
    {
    }

    inline scalar& v0() { return x; }
    inline scalar& v1() { return y; }
    inline scalar& v2() { return z; }
    inline scalar& v3() { return w; }
}; 
```

必须使用 XMLoadFloat4 之前的 SIMD 计算将矢量数据加载到 XMVECTOR 中 - 无法绕过它。把 XMVECTOR 想象成一个寄存器——而不是一个内存位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:23:35.307

如果这`DirectX::XMVECTORF32`是一个聚合类，那么您的代码在 C++11 中就可以了（请参阅演示其使用的[实时示例）。](http://liveworkspace.org/code/3FDYza$56)

但是，您使用的编译器**不**支持统一初始化（正如[StackOverflow 上的](https://stackoverflow.com/questions/7421825/c11-features-in-visual-studio-2012)**[此问答](https://stackoverflow.com/questions/7421825/c11-features-in-visual-studio-2012)**所阐明的那样），并且在 C++03 中，您无法像复制初始化变量一样初始化基聚合类。

因此，您必须在初始化列表中显式初始化基类的成员，或者在构造函数`SetVector()`的主体中调用类似的东西`vector4`。

# python - 使用 pygame/pyglet 从数组重建图像时颜色不正确

> ID：15311570
> 
> 赞同：1
> 
> 时间：2013-03-09T14:05:28.280
> 
> 标签：python, pygame, pyglet

我编写了这个程序，它将使用 numpy 和 Image(PIL) 库将图像读取为一堆矩阵，并使用 pyglet（和 opengl）来重建图像。

使用pyglet的代码如下：

```
import Image
import numpy
import window
import sys
import pyglet
import random
a=numpy.asarray(Image.open(sys.argv[1]))
h,w= a.shape[0],a.shape[1]
s=a[0]
print s.shape

#######################################
def display():
    x_a=0;y_a=h
    for page in a:
        for array in page: 
            j=array[2]
            k=array[1]
            l=array[0]
            pyglet.gl.glColor3f(l,j,k)
            pyglet.gl.glVertex2i(x_a,y_a)
            x_a+=1
        y_a-=1  
        x_a=0
######################################33
def on_draw(self):
    global w,h

    self.clear
    pyglet.gl.glClear(pyglet.gl.GL_COLOR_BUFFER_BIT)
    pyglet.gl.glBegin(pyglet.gl.GL_POINTS)
    display()
    pyglet.gl.glEnd()
    pyglet.image.get_buffer_manager().get_color_buffer().save('screenshot.png')
window.win.on_draw=on_draw

#######################################

u=window.win(w,h)
pyglet.app.run() 
```

修改相同的代码以使用 pygame 库（并且没有任何 opengl 使用）

```
import pygame
import numpy
import Image
import sys
from pygame import gfxdraw

color=(255,255,255)

a=numpy.asarray(Image.open(sys.argv[1]))
h,w=a.shape[0],a.shape[1]

pygame.init()
screen = pygame.display.set_mode((w,h))

def uu():
    y_a=0
    for page in a:
        x_a=0
        for array in page:
            co=(array[0],array[1],array[2])
            pygame.gfxdraw.pixel(screen,x_a,y_a,co)
            x_a+=1
        y_a+=1

uu()
done = False

while not done:
        for event in pygame.event.get():
                if event.type == pygame.QUIT:
                        done = True

        pygame.display.flip() 
```

pyglet 与 pygame 的结果：

![pyglet 与 pygame](../Images/8df66c0dd0c7d92db88688a1318def89.png)

所以我的问题是……为什么会有问题？我使用opengl逐像素绘制图片的方式是否存在问题，或者还有其他一些我现在无法理解的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:23:08.870

`Pygame.Color`期望 0-255 范围内的整数，而`pyglet.gl.glColor3f`期望 0.0-1.0 范围内的浮点数。像这样的转换应该可以解决您的问题：

```
j=array[0] / 255.0
k=array[1] / 255.0
l=array[2] / 255.0
pyglet.gl.glColor3f(j,k,l) 
```

# android - 如何在 OpenCV Android 中使用 createTrackBar()？

> ID：15311574
> 
> 赞同：1
> 
> 时间：2013-03-09T14:05:46.650
> 
> 标签：android, opencv, image-processing

我正在使用 Android 在 OpenCV 中开发图像处理应用程序。我想在 android 中使用 opencv 的 CvCreateTrackBar() 方法。如何使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:39:03.410

为此，您必须使用 Android GUI（您不能在 Android 上使用 OpenCV 的 HighGUI）。在您的情况下，您可以只使用名为[SeekBar](http://developer.android.com/reference/android/widget/SeekBar.html)的小部件。

# c++ - 何时在 C++ 中使用 __declspec(dllexport)

> ID：15311577
> 
> 赞同：3
> 
> 时间：2013-03-09T14:06:01.203
> 
> 标签：c++, visual-c++, c++11, dllexport

我正在制作这个 DLL 项目，并且不包含任何特定于编译器的宏。

importer(.exe) 文件编译干净，在我的 DLL 文件中导入方法后不会产生错误。他们在不同的项目上，但解决方案相同。

我是否因为不使用任何调用约定而把事情搞砸了？

我的 DLL 文件位于命名空间中，并以 OOP 方式实现。

但有时或大多数时候，.lib 不会生成，所以我必须将我的 DLL 的设置切换到 LIB 并复制生成的 .lib 文件，然后再次将其转回 DLL 文件。

而且我什至不知道我使用的库是 .dll 还是 .lib 文件。

有人给我解释清楚吗？

**编辑**

我将添加一些我对何时使用它感到非常困惑的情况。

假设我有这些：

```
namespace
{

    class Base abstract
    {

    public:
        Base()
        {
            //initialize base components
        }
        virtual void func() = 0;

    public:

        //interface
    };

    class Derive : public Base
    {

    public:
        Derive();
        void func() override;

    private:

        //interface

    };

} 
```

我应该`declspec(dllexport)`在这里使用：

*   （`constructors`如`Base()`和`Derive()`）？

*   `virtual`功能？我会把它放在哪里？在派生中还是在基础中？或两者？

*   公共变量？（可怕！）

我在其他头文件中看到，它们添加`extern`到其中。我这里需要吗？

这将破坏我所有的代码语法

请回答....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T14:15:18.887

听起来好像您正在链接应该在 dll 中的库文件。所以你根本没有使用 dll。一切都进入exe文件。

Microsoft 要求`__declspec(dllexport)`dll`__declspec(dllimport`中的 和 exe 中的 )。它变得复杂，所以有宏来解决它。

```
CLASS_DECLSPEC 
```

然后编译器整理出`__declspec`要使用的 's 中的哪一个。

请参阅：http: [//msdn.microsoft.com/en-us/library/8fskxacy (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/8fskxacy(v=vs.80).aspx)

# json - 带有 Scala 的 GSON - 无法为 scala.collection.immutable.Map 调用无参数构造函数

> ID：15311582
> 
> 赞同：3
> 
> 时间：2013-03-09T14:06:57.393
> 
> 标签：json, scala, deserialization, gson

这是一个示例 Scala 对象，我想在其中将 JSON 字符串反序列化为`Map of String -> String`. 我使用 GSON 2.2.2 和 Scala 2.10。

```
import com.google.gson.Gson
import com.google.gson.reflect.TypeToken

object MyTest {
  def main(args: Array[String]) {
    val gson = new Gson
    val jsonString = "{\"test1\": \"value-test1\",\"test2\":\"value-test2\"}"
    val mapType = new TypeToken[Map[String, String]] {}.getType
    val map = gson.fromJson(jsonString, mapType).asInstanceOf[Map[String, String]]
  }
} 
```

这就是在以下行中抛出的堆栈跟踪`val map = ...`：

```
Exception in thread "main" java.lang.RuntimeException: Unable to invoke no-args 
    constructor for 
    scala.collection.immutable.Map<java.lang.String, java.lang.String>.

Register an InstanceCreator with Gson for this type may fix this problem.
at com.google.gson.internal.ConstructorConstructor$8.construct(ConstructorConstructor.java:167)
at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:162)
at com.google.gson.Gson.fromJson(Gson.java:795)
at com.google.gson.Gson.fromJson(Gson.java:761)
at com.google.gson.Gson.fromJson(Gson.java:710)
at MyTest$.main(MyTest.scala:9)
at MyTest.main(MyTest.scala)

Caused by: java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.google.gson.internal.UnsafeAllocator$1.newInstance(UnsafeAllocator.java:48)
at com.google.gson.internal.ConstructorConstructor$8.construct(ConstructorConstructor.java:164)
... 6 more

Caused by: java.lang.InstantiationException: scala.collection.immutable.Map
at sun.misc.Unsafe.allocateInstance(Native Method)
... 12 more 
```

那么这里有什么问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T14:16:36.590

Oh, it is because `Map` does not have a constructor with no arguments, I can switch to `scala.collection.immutable.HashMap` then the error does not appear, but the `map` does not have the values, it is completely empty. It is only a `HashMap` with `serialVerionUID`, no more fields.

# twitter-bootstrap - 下拉菜单不完全可见

> ID：15311584
> 
> 赞同：0
> 
> 时间：2013-03-09T14:06:58.940
> 
> 标签：twitter-bootstrap

![落下](../Images/8602d2face8b344e8a03d3eee0cd0493.png)

不幸的是，下拉菜单的内容被删减了。

实现菜单打开到左侧而不是右侧（没有手动 CSS hack）的 Twitter Bootstrap 方式是什么？

```
<div class="btn-toolbar pull-right">
    <div class="btn-group">
        <button class="btn btn-info dropdown-toggle" data-toggle="dropdown">
            Developer <span class="caret"></span>
        </button>
        <ul class="dropdown-menu">
            <li>
                <a href="#">Generate dummy data</a>
            </li>
        </ul>
    </div>
    <button class="btn">Edit</button>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:44:53.547

您可以`pull-right`像这样将类添加到下拉菜单中：

Jsfiddle[**演示**](http://jsfiddle.net/shail/GYBYT/show/)

```
<div class="btn-toolbar pull-right">
<div class="btn-group open">
    <button data-toggle="dropdown" class="btn btn-info dropdown-toggle">
        Developer <span class="caret"></span>
    </button>
    <ul class="dropdown-menu pull-right"><!-- this is where pull-right is applied-->
        <li>
            <a href="#">Generate dummy data</a>
        </li>
     </ul>
  </div>
<button class="btn">Edit</button> 
```

# php - 使用 symfony2 通过 URL 自动登录

> ID：15311586
> 
> 赞同：5
> 
> 时间：2013-03-09T14:07:01.457
> 
> 标签：php, symfony, symfony-2.1, autologin

我正在尝试使用 symfony2 和一种特殊的 url 进行自动登录。就像[这里描述的](http://techblog.zabuchy.net/2012/manually-authenticate-symfony-2-user/)一样。

但是当我使用 symfony2 调试工具栏时，我注意到它说：“未通过身份验证”。但我有一个会话，我有一个用户对象，一切似乎都很好。为什么调试工具栏会这样说？

zadbuchy 描述的方法有问题吗？我正在使用 symfony 2.1.6。

编辑：我知道这可能不是“最安全”的登录方式（感谢@Bart 的讨论），但我很好奇为什么 symfony2 不能正确识别登录。

我的代码如下所示：

```
$firewall = "support_secured_area";
$token = new UsernamePasswordToken($user, null, $firewall, $user->getRoles());
$this->get('security.context')->setToken($token);
$session = $this->get('session');
$session->set('_security_'.$firewall, serialize($token));

// Fire the login event (Suggestion from the answer, but unfortunately it doesn't work :( ).
$event = new InteractiveLoginEvent($this->getRequest(), $token);
$this->get("event_dispatcher")->dispatch("security.interactive_login", $event); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T18:19:33.097

您需要发生 InteractiveLoginEvent 以使用户登录。

```
// Here, "public" is the name of the firewall in your security.yml
$token = new UsernamePasswordToken($user, $user->getPassword(), "public", $user->getRoles());
$this->get("security.context")->setToken($token);

// Fire the login event
$event = new InteractiveLoginEvent($request, $token);
$this->get("event_dispatcher")->dispatch("security.interactive_login", $event); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-03T04:45:35.993

```
$token = new UsernamePasswordToken($user, null, $firewall, $user->getRoles());
$this->get('security.context')->setToken($token);
$session = $this->get('session');
$session->set('_security_'.$firewall, serialize($token)); 
```

我在我们的几个项目中应用了上述解决方案。一个工作，但另一个没有。

最终的解决方案是在下面的行中使用 security_context_name 而不是 firewall_name。然后它适用于每个项目。

```
$session->set('_security_'.$security_context_name, serialize($token)); 
```

感谢我的一位同事为我指出这一点。

# python - 谷歌应用引擎默认网址版本错误

> ID：15311589
> 
> 赞同：0
> 
> 时间：2013-03-09T14:07:18.553
> 
> 标签：python, google-app-engine

我有一个名为“xian”的应用程序，有两个版本“alpha”和“beta”。

如果“alpha”设置为默认值，以下是行为：

> *   alpha.xian.appspot.com -- 404 未找到
> *   beta.xian.appspot.com -- 好的
> *   xian.appspot.com -- 好的

这是正常行为吗？

# gridview - 动态填充 GridView 时应用程序启动缓慢

> ID：15311591
> 
> 赞同：3
> 
> 时间：2013-03-09T14:07:54.747
> 
> 标签：gridview, qml, qt5, qt-quick, qtquick2

我正在尝试通过在 QtQuick 2.0 (Qt 5) 中动态填充 ListModel 来填充 GridView。它可以工作，但应用程序启动非常缓慢：

应用程序窗口会立即出现，但浅蓝色背景大约需要 2 秒才能出现。在那之前，我会看到默认的灰色背景。

如果我取消注释下面注释的两行，应用程序会立即启动。但我不喜欢这种 hack，因为我不明白它为什么会起作用。

有谁知道可能出了什么问题？

谢谢！

```
import QtQuick 2.0

Rectangle {
    width: 1024; height: 600
    color: "lightblue"

    Component.onCompleted: {
        //moviesModel.clear()
        moviesModel.append({ "movieNumber": 1 })
    }

    ListModel {
        id: moviesModel
        //ListElement { movieNumber: 0 }
    }

    Component {
        id: moviesComponent
        Rectangle {
            width: grid.cellWidth
            height: grid.cellHeight
            Text {
                anchors.centerIn: parent
                text: movieNumber
            }
        }
    }

    GridView {
        id: grid
        anchors.fill: parent
        cellWidth: 100
        cellHeight: 200

        model: moviesModel
        delegate: moviesComponent
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:44:59.503

这似乎是一个有争议的问题。未注释行的代码创建了一个包含一个元素的列表模型。您的 onCompleted 然后从列表中删除所有内容并附加到一个新元素中。似乎您应该在 QML 中定义一个静态 ListModel，或者在启动时应该有一个空列表模型。

每次更改 ListModel 并且它具有可见的元素时，都会发生许多事情。ListModel 需要更新其内部结构，然后发出它已更改的信号。然后您的网格视图需要通过委托重新呈现可见的 ListElements。可能是两个非常快速的变化（清除和附加）的行为。两者都需要在每个操作之后执行所有这些操作，这在启动时太多了。请记住，您只有一个可用于 gui 的线程。

# mysql - 通过复制现有行将新行插入表中

> ID：15311592
> 
> 赞同：2
> 
> 时间：2013-03-09T14:08:05.837
> 
> 标签：mysql, sql, sql-insert

有几个问题涉及通过复制现有行来插入新行。

这个问题建立在它之上，但本质上是不同的。

我有一张有 9000 多行的表。大约有10列。第 1 列是一个自动增量，它是唯一键。

我想通过复制现有行中的所有内容，向表中插入与存在完全相同的行数，显然第 1 列除外，但第 10 列除外，它将根据现有行中第 10 列的值而改变，例如，如果第 10 列在现有行中为 23，则变为 52，如果在现有行中第 10 列为 25，则变为 53。

所以基本上现有行和新行之间的唯一区别是 col 10 值（除了唯一 ID）。col 10 将采用非常有限的值。

像这样的东西会起作用吗？

```
INSERT INTO mycooltable (col2, col3, col4, col5, col6, col7, col8, col9, col10) 
SELECT col2, col3, col4, col5, col6, col7, col8, col9, 52
FROM mycooltable WHERE col10 = 23

INSERT INTO mycooltable (col2, col3, col4, col5, col6, col7, col8, col9, col10) 
SELECT col2, col3, col4, col5, col6, col7, col8, col9, 53
FROM mycooltable WHERE col10 = 25 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:07:09.490

```
INSERT INTO mycooltable (col2, col3, col4, col5, col6, col7, col8, col9, col10) 
SELECT col2, col3, col4, col5, col6, col7, col8, col9
,NewCol10= Case
`When Col10=23 then 52
`When Col10=25 then 53
`Else 55 --some default 
End                                                      
FROM mycooltable 
```

上面的脚本也可以

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T14:10:27.707

是的，这肯定会奏效。

请注意此处找到的第三个`INSERT`语法示例：

```
INSERT [LOW_PRIORITY | HIGH_PRIORITY] [IGNORE]
    [INTO] tbl_name [(col_name,...)]
    SELECT ...
    [ ON DUPLICATE KEY UPDATE
      col_name=expr
        [, col_name=expr] ... ] 
```

**参考**：[http ://dev.mysql.com/doc/refman/5.5/en/insert.html](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

# drupal - Drupal Views Ajax 错误很长

> ID：15311593
> 
> 赞同：0
> 
> 时间：2013-03-09T14:08:15.613
> 
> 标签：drupal, drupal-views

每当我单击任何设置时，我都会在 Drupal 6 Views 1.3 中收到此错误。即使在全新的视图上。我删除了一些我在 phpmyadmin 中没有使用的 CCk 字段，这可能与它有关。我关闭了 Vies Ajax 和缓存。

这是错误。

> /drupal163/admin/build/views/ajax/add-item/view_rss_youtube/default/sort 发生错误。
> 
> s website\x3c/label\x3e\n \x3cdiv class=\"description\"\x3e评论作者的网址。可以呈现为链接。如果作者是注册用户，则为空。\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv class=\"form-item\" id=\"edit-name-comments.hostname- wrapper\"\x3e\n \x3clabel class=\"option\" for=\"edit-name-comments.hostname\"\x3e\x3cinput type=\"checkbox\" name=\"name[comments.hostname] \" id=\"edit-name-comments.hostname\" value=\"comments.hostname\" class=\"form-checkbox\" /\x3e Comment: Hostname\x3c/label\x3e\n \x3cdiv class =\"description\"\x3e发布评论的用户的主机名。\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv class=\"form-item\" id=\"edit-name-注释。in moderation\x3c/label\x3e\n \x3cdiv class=\"description\"\x3e评论当前是否在审核队列中。\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv class=\"form-item\" id=\"edit-name-comments.mail-wrapper\"\x3e\n \x3clabel class=\"option\" for=\"edit-name-comments.mail\" \x3e\x3cinput type=\"checkbox\" name=\"name[comments.mail]\" id=\"edit-name-comments.mail\" value=\"comments.mail\" class=\"form -checkbox\" /\x3e 评论：Mail\x3c/label\x3e\n \x3cdiv class=\"description\"\x3e 发表评论的用户的电子邮件。如果作者是注册用户，则为空。\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv class=\"form-item\" id=\"edit-name-comments.timestamp-包装器\" Thread\x3c/label\x3e\n \x3cdiv class=\"description\"\x3e 按线程顺序排序。这将使子评论与他们的父母保持在一起。\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv class=\"form-item\" id=\"edit-name-comments.subject-wrapper \"\x3e\n \x3clabel class=\"option\" for=\"edit-name-comments.subject\"\x3e\x3cinput type=\"checkbox\" name=\"name[comments.subject]\ " id=\"edit-name-comments.subject\" value=\"comments.subject\" class=\"form-checkbox\" /\x3e Comment: Title\x3c/label\x3e\n \x3cdiv class= \"description\"\x3e评论的标题。\x3c/div\x3e\n\x3c/div\x3e\n\x3c/div\x3e\x3cdiv class=\"views-dependent-all views-dependent-content \"\x3e\x3cdiv class=\"form-item\" id=\"

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T16:06:15.457

也许你在 jquery 中有冲突，试试这个模块[jquery_update](http://drupal.org/project/jquery_update)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T05:30:29.193

[浏览在https://drupal.org/node/752290](https://drupal.org/node/752290)上所做的更改

它对我有用！

如果有帮助，也试试这些（这些帮助了其他人，但不是我）

[评论-1](https://drupal.org/node/326378#comment-2309534)

他们不允许我发布超过 2 个链接（信誉问题），所以请通过这个（未格式化的链接，在浏览器上剪切粘贴）

drupal.org/node/752290#comment-3311950

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-16T15:06:16.733

我对 AJAX 和 VIEWS 也有同样的问题，我找到了通过[jquery_update](http://drupal.org/project/jquery_update)更改 jQuery 版本的解决方案。

它被配置为使用最新版本的 jQuery 1.8，我将其更改为 1.7。之后，AJAX 和 VIEWS 又照常工作了。

希望能帮助到你...

# css - 边距自动在简单的 html/css 代码中不起作用

> ID：15311594
> 
> 赞同：1
> 
> 时间：2013-03-09T14:08:31.623
> 
> 标签：css, html

如此处所示 - [http://jsfiddle.net/d4wUu/](http://jsfiddle.net/d4wUu/)，我无法将带有“测试”一词的红色边框框沿包含它的黑框的高度居中。它与黑盒子的顶部边框保持对齐，在其下方留出一些空间。

`margin-top`也不工作。知道我如何获得`margin: auto`或`margin-top`（相对于包含它的黑框）在此处的红色边框框上工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:13:51.000

[小提琴](http://jsfiddle.net/d4wUu/3/)

添加那些：

```
display: table-cell;
vertical-align: middle; 
```

到`#heading`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:14:51.513

有几种方法可以使元素垂直居中。据我所知，`margin: auto`除非您使用某种类型的表格/表格单元格样式，否则不会在元素上垂直工作。

这些添加到你的 CSS 是一种垂直居中的方法：

```
#heading {  
    position:relative;
}
#heading-title {
    position:absolute;
    top: 50%;
    margin-top: -25px; /* this is half the height of the element */
} 
```

这是一个更新的[小提琴](http://jsfiddle.net/d4wUu/2/)显示这个工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-09T14:13:35.930

另一种解决方法，

给. `margin: 7px auto`_`#heading-title`

`7px`因为父元素的高度是65px，子元素的高度是50px 。有身高差`15px`。因此，将和`15px`分开。`margin-top``margin-bottom`

仅当父元素和子元素的高度像上面的 OP 描述中那样**固定**时，才能使用此技术。

**[工作小提琴](http://jsfiddle.net/d4wUu/5/)**

# sql - pgRouting shortest_path 获取唯一的 osm_id 值

> ID：15311603
> 
> 赞同：1
> 
> 时间：2013-03-09T14:09:06.037
> 
> 标签：sql

我有 sql：

```
SELECT osm_id, vertex_id
   FROM ways
   JOIN
   (SELECT * FROM shortest_path('
      SELECT gid AS id, 
          source::int4 AS source, 
          target::int4 AS target, 
          length::float8 AS cost
      FROM ways',
      7856,
      18774,
      false,
      false)) AS route
   ON
   ways.gid = route.edge_id 
   order by vertex_id 
```

它产生这样的东西：

```
osm_id;vertex_id
5024380;6223
5024380;6224
5024380;6225
5024380;6226
175339584;6227
5024380;6230
5024380;6231
5024380;6232
38521651;6233
5024380;6234 
```

你可以看到，osm_id 不是唯一的。我`osm_id`订购了`vertex_id`。我如何只能获得`osm_id`由`vertex_id`. 我不需要`vertex_id`专栏。只需要`osm_id`. 我尝试`group by`了从句，但这不起作用。闲置查询：

```
SELECT distinct osm_id
   FROM ways
   JOIN
   (SELECT * FROM shortest_path('
      SELECT gid AS id, 
          source::int4 AS source, 
          target::int4 AS target, 
          length::float8 AS cost
      FROM ways',
      7856,
      18774,
      false,
      false)) AS route
   ON
   ways.gid = route.edge_id 
   --group by osm_id
   order by vertex_id 
```

给出错误：

```
ERROR:  for SELECT DISTINCT, ORDER BY expressions must appear in select list
LINE 21:    order by vertex_id 
                     ^

********** Error **********

ERROR: for SELECT DISTINCT, ORDER BY expressions must appear in select list
SQL state: 42P10
Character: 420 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:18:15.007

试试这个：

```
SELECT osm_id
   FROM ways
   JOIN
   (SELECT * FROM shortest_path('
      SELECT gid AS id, 
          source::int4 AS source, 
          target::int4 AS target, 
          length::float8 AS cost
      FROM ways',
      7856,
      18774,
      false,
      false)) AS route
   ON
   ways.gid = route.edge_id 
   GROUP BY osm_id
   ORDER BY min(vertex_id) 
```

# r - 如何更改条形图中的 x 坐标？

> ID：15311612
> 
> 赞同：-2
> 
> 时间：2013-03-09T14:10:09.287
> 
> 标签：r, stripchart

在前一个问题中，Ananda Mahto 告诉我如何创建条形图，
最好将 x 坐标从 0,2,4,6,8,10（在 graph1 中）更改为 0,1,2,3,4 ,5,6,7,8,9（在graph2中）
如何改变它？

```
set.seed(1)
A <- sample(0:10, 100, replace = TRUE)
stripchart(A, method = "stack", offset = .5, at = .15, pch = 19, 
       main = "Dotplot of Random Values", xlab = "Random Values") 
```

我想要的是graph2.png而不是graph1.png。

graph1.png

![在此处输入图像描述](../Images/0874b6a6e4345a0ff524d318884c290a.png)

graph2.png

![在此处输入图像描述](../Images/e4b5e03fbbb6fbc7951b836a826e1383.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T14:21:10.783

```
A <- sample(0:9, 100, replace = TRUE)
stripchart(A, method = "stack", offset = .5, at = .15, pch = 19, 
           main = "Dotplot of Random Values", xlab = "Random Values",xaxt="n")
axis(1, at = 0:9, labels = 0:9) 
```

# php - PHP 循环只显示 1 个值，应该显示 2

> ID：15311616
> 
> 赞同：0
> 
> 时间：2013-03-09T14:10:37.430
> 
> 标签：php, loops

在过去的一个小时里，我一直试图让 PHP 循环工作，但无法显示超过 1 个项目，这是数组的输出：http: [//pastie.org/6429971](http://pastie.org/6429971)

这是我的代码：

```
$url = 'https://www.eventbrite.com/json/user_list_events?app_key=HIDEN&user=HIDDEN';

$events = json_decode(get_data($url));
$i = 0;

foreach ($events as $event) { 
    // print_r($event[$i]);
    echo $event[$i]->event->title;
    $i++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:13:34.037

使用 foreach 循环，您不必使用变量`$i`，并且必须指出包含事件的数组。之后，您可以使用 foreach 循环遍历该数组。

```
$url = 'https://www.eventbrite.com/json/user_list_events?app_key=HIDEN&user=HIDDEN';

$events = json_decode(get_data($url));
$events = $events->events;

foreach ($events as $event){
  echo $event->title;
} 
```

# ruby - Rails 3.2.11 应用程序中的资产管道在 Ruby 1.9.3 中运行良好，但在 Ruby 2.0.0 中停止运行

> ID：15311617
> 
> 赞同：2
> 
> 时间：2013-03-09T14:10:40.637
> 
> 标签：ruby, ruby-on-rails-3.2

我的资产管道在 Ruby 1.9.3 中运行良好。当我升级到 2.0.0 它停止工作。

在 Gemfile 中：

```
gem 'jquery-rails' 
```

在 application.js 文件中：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap-affix
//= require bootstrap-alert
...
//= require jquery_nested_form
//= require sitengine.js
//= require_tree . 
```

浏览器中 .../assets/application.js 的结果：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap-affix
//= require bootstrap-alert
...
//= require jquery_nested_form
//= require my_app.js
//= require_tree .
; 
```

两个问题：

1.  你有过这种经历吗？如果你有，很想听听你的评论。

2.  你找到解决办法了吗？（提前感谢您的回答。）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T11:18:37.980

我更新了我所有的宝石，这就`bundle update`成功了。

不知道为什么，可能为 ruby​​ 2 更新了一些 gem。

# c# - 从字符串中获取恰好 x 位的数字

> ID：15311619
> 
> 赞同：0
> 
> 时间：2013-03-09T14:11:03.293
> 
> 标签：c#, regex, string, match, digit

我正在寻找一个正则表达式模式，它匹配一个长度正好为 x 的数字（比如 x 是 2-4），仅此而已。

例子：

`"foo.bar 123 456789"`, `"foo.bar 456789 123"`, `" 123"`,`"foo.bar123 "`只能匹配“123”

所以。只有数字，没有空格、字母或其他东西。

我该怎么做？

编辑：我想在 c# 中使用 Regex.Matches() 函数来提取这个 2-4 位数字并在附加代码中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:16:13.253

您可以使用基本的 RegEx 来实现这一点：

`\b(\d\d\d)\b`或`\b(\d{3})\b`- 用于匹配正好 3 位数字的数字

如果您想要可变数字：（`\b(\d{2,4})\b`此处[解释演示](http://regex101.com/r/kS2qJ9)）
如果您想捕获单词旁边的匹配项：（`\D(\d{2,4})\D`此处[解释演示](http://regex101.com/r/lC0gX7)）

`\b`是单词边界（不匹配任何内容，它是零匹配字符）
`\d`仅匹配数字
`\D`匹配任何不是数字的字符
`()`圆括号中的所有内容都将捕获匹配项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T14:35:08.207

后跟 a 的任何模式`{m,n}`都允许该模式出现 m 到 n 次。因此，在您的情况下`\d{m,n}`，对于所需的 m 和 n 值。如果它必须是一个整数，请使用`\d{m}`

如果要匹配 x123y 中的 123 而不是 1234 中的 123，请使用`\d{3}(?=\D|$)(?<=(\D|^)\d{3})`

它向前看以确保 3 位数字之后的字符根本不是数字，向后看以确保 3 位数字之前的字符是非数字或根本没有。

# python - 广度搜索算法实现

> ID：15311623
> 
> 赞同：0
> 
> 时间：2013-03-09T14:11:32.320
> 
> 标签：python

我为 8 个谜题问题的**广度搜索算法**编写了一个 python 代码。游戏的状态被编码为列表列表（二维列表）。目标是从给定状态到达`[[1,2,3],[8,0,4],[7,6,5]`]。代码输出从给定状态到目标的路径。它工作正常，但对于这种特殊情况`[[0,1,2],[7,8,3],[6,5,4]]`并没有给出整个路径，而是给出了路径中的最后三个状态。

请您尝试指出错误的位置。这是代码。注意程序从语句开始：

```
"""
This program solves the 8 puzzel problems using Breadth First Search Algorithm.
"""

import copy

def successor(astate):
    """
    This function takes an instance of the 8 puzzel problem and generates all the legal successors.
    """
    up = copy.deepcopy(astate)
    """
    important note:
    I use [:] and list() to copy lists but it was not working fine, hence deecopy is used instead.
    """
    down = copy.deepcopy(astate)
    left = copy.deepcopy(astate)
    right = copy.deepcopy(astate)
    successors = []
    for i in range(3):
        for j in range(3):
            if astate[i][j] == 0:
                row = i
                col = j
    if row != 0:
        dummy = up[row][col]
        up[row][col] = up[row -1][col]
        up[row-1][col] = dummy
        successors.append(up)
    if row != 2:
        dummy = down[row][col]
        down[row][col] = down[row+1][col]
        down[row+1][col] = dummy
        successors.append(down)
    if col != 2:
        dummy = right[row][col]
        right[row][col] = right[row][col+1]
        right[row][col+1] = dummy
        successors.append(right)
    if col != 0:
        dummy = left[row][col]
        left[row][col] = left[row][col-1]
        left[row][col-1] = dummy
        successors.append(left)
    return successors

def puzzle(astate):
    """
    This function takes a given instance of the 8 puzzel problem and returns the path to the goal where the goal is defined as below.
    """
    goal = [[1,2,3],[8,0,4],[7,6,5]]    #The goal state.
    generation = [astate]    #Nodes generated at each level.
    tracking = {}    #Track the path to the goal.
    path = []    #The path from the root to the goal.
    parent = generation.pop(0)    #Takes the first element of the list!!
    successors = successor(parent)    #Generate successors.
    key = str(parent)    #keys odictionaries must be hashable and mutable. Lists are illegal keys.
    tracking[key] = successors    #Associate successors with their parent.
    for asuccessor in successors:
        generation.append(asuccessor)    #Generate the first level.
    if goal in generation:    #if the goal is among the successors returns the path to it.
        path.insert(0, key)
        path.insert(0, goal)
        return path
    else:
        while generation != []:    #keep searching!
            parent = generation.pop(0)
            successors = successor(parent)    #generate successors 
            key = str(parent)
            tracking[key] = successors
            if goal in [astate for astate in successors]:    #if the goal is among the successors backtrack its path.
                path.insert(0, str(goal))    #Just because path contains states as strings!!
                path.insert(0, key)
                for key in tracking.keys():
                    for value in tracking.get(key):
                        if str(parent) == str(value):    #If the current (parent) is among the values of (key) then (key) is its parent.
                            path.insert(0, key)
                            parent = key
                            break
                return  path
            else:    #keep searching
                for asuccessor in successors:
                    if asuccessor not in generation:    #If the current successors is already generated do not add it.
                        if str(asuccessor) not in tracking.keys():    #If the successor is a previous parent do not add it.
                            generation.append(asuccessor)
        return 
```

# python - 在 Python 中将变量更改为输出文件的名称

> ID：15311624
> 
> 赞同：3
> 
> 时间：2013-03-09T14:11:48.780
> 
> 标签：python, string, csv, filenames, output

我是 Python（和编程）的新手，所以如果我问一些非常愚蠢的问题，请耐心等待 :)

所以，我想在结果的文件名中包含变量。这是我到目前为止所拥有的：

```
resfile = open("simple.csv","w")
#lots of stuff of no relevance

resfile.close() 
```

在脚本中我有两个变量，minLenght=5000 和 minBF=10，但我想更改它们并再次运行脚本创建一个新文件，在其中我可以看到创建的文件标题中的变量数，例如 simple500010并且我希望每次运行脚本时都创建一个具有两个变量不同值的新文件。

我试过这个：

```
resfile = open("simple" + [str(minLength)] + [str(minBF)].csv,"w") 
```

但这不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-09T14:17:35.240

差不多好了！不用`[ ]`，它返回一个列表：

```
minLength = 5000
minBF = 10

resfile = open("simple" + str(minLength) + str(minBF) + ".csv","w")

resfile.close() 
```

此外，您在“.csv”周围没有任何引号。

但是，将字符串直接构造为函数的参数（如`open`）的问题在于它是调试的猪。您可能会发现首先使用变量来存储文件名更容易：

```
filename = "simple" + str(minLength) + str(minBF) + ".csv"
resfile = open(filename,"w") 
```

现在，您可以尝试其他不使用`+`and来构造字符串`str()`的方法，例如：

```
filename = "simple%d%d.csv" % (minLength,minBF)
print filename 
```

# android - 从android中的另一个活动返回时刷新活动内容

> ID：15311625
> 
> 赞同：1
> 
> 时间：2013-03-09T14:11:51.373
> 
> 标签：android, android-activity, .refresh

我的应用程序是一个消息应用程序，它有一个执行收件箱功能的活动。因此，在我的收件箱中，我将在顶部列出未读消息，在底部列出已读消息。

因此，如果我单击未读消息，它将移动到显示所选特定消息的新活动，并在我的数据库中将其标记为已读。因此，在单击返回时，当它移至上一个活动时，此消息应显示在已读活动中。但是，在我的情况下，它显示的是旧场景，即消息仍然显示在未读中。

我认为活动返回时应该刷新，所以我尝试了一些刷新方法，例如：

1.

```
public void onResume(Bundle s)
    {  // After a pause OR at startup
        super.onResume();
        this.onCreate(s);
    } 
```

2.

```
Intent intent = new Intent(this, msgdisplayActivity.class); //msgdisplayActivity is activity which display the selected message. 
//intent.putExtra("someData", "Here is some data");
startActivityForResult(intent, 1);

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode==RESULT_OK){
        Intent refresh = new Intent(this, inboxlist.class); //inboxlist is activity which list the read and unread messages
        startActivity(refresh);
        this.finish();
    }
} 
```

但这两者都没有。`onResume()`没有被调用，另一个显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:01:23.727

您可以将刷新布局代码放在一种方法中

例如

```
void populatedata()
{
    //your code to show data in listview or lables
    //if you are using listview, then you can write adapter.notifyDataSetChanged(); to refresh list
} 
```

然后，您可以使用

```
Intent intent = new Intent(this, msgdisplayActivity.class); //msgdisplayActivity is activity which display the selected message. 
startActivityForResult(intent, 1); 
```

和

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
super.onActivityResult(requestCode, resultCode, data);
  if(resultCode==RESULT_OK){
    //call populatedatamethod
    populatedata();
  }
} 
```

您可以在 onCreate 方法中使用相同的方法。

您能否提供您的 onCreate 和 onResume 代码？这样我就可以根据您的代码编辑我的答案？

onResume 也会在 onActivityResult() 之后调用，因此您也可以将代码放在那里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:35:26.530

由于其签名，您的`onResume()`方法永远不会被调用。

`@Override`每当您打算覆盖方法时使用它是一个好主意。如果您`@Override`在代码中使用过，您会被指出您打算覆盖但没有成功的问题。

从您的观点来看，`1`我建议您尝试更好地理解 Activity 生命周期，因为`super.onCreate()`从内部`onResume()`和之后调用`super.onResume()`都是错误的。

您的第一个代码片段应如下所示：

```
@Override
protected void onResume() {
    super.onResume();
    // do what you need to do if your activity resumes
} 
```

但是你应该确保你理解什么时候`onResume()`被调用。

关于您的`onActivityResult()`实现，它可能不是重新加载“收件箱”活动的最有效方法，但它应该可以工作。代码看起来不错，除了一个方面：在这个方法中，我不会调用`super.onActivityResult()`，因为它不是必需的，它不能提供有意义的东西。我从不这样做，而且效果很好。所以也许摆脱这个调用，看看错误是否仍然发生。

如果是，请发布错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-09T02:12:12.517

您的代码片段 1 将在这里创建一个递归场景。阅读有关[活动生命周期](https://developer.android.com/guide/components/activities/activity-lifecycle)的更多详细信息。

如果您需要动态刷新数据，请将**UI 代码**部分上的数据获取和显示移至**onResume**方法。这样每次活动恢复时都会获取数据。

否则，您可以使用[LiveData](https://developer.android.com/topic/libraries/architecture/livedata)从数据库中观察变化并自动更新 UI。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-09T14:17:43.820

different devices handle activity destruction differently. the sure method i've found is saving state to app db and retrieving on focus of app.

# struts2 - 获取 java.lang.NoClassDefFoundError: com/opensymphony/xwork2/util/finder/ClassFinder$InfoBuildingVisitor 异常

> ID：15311628
> 
> 赞同：3
> 
> 时间：2013-03-09T14:12:03.867
> 
> 标签：struts2

我在我的 struts 项目中遇到了以下异常。我在 CLASSPATH 中包含了 xwork-core-2.3.8.jar。我在部署我的应用程序时收到此错误，但是当我运行我的应用程序时，我的操作类`com.logging.actions.OperationalSupportAction`工作正常，我能够在我的屏幕（jsp 页面）上显示结果。

```
com.opensymphony.xwork2.util.logging.commons.CommonsLogger error
SEVERE: Unable to read class [com.logging.actions.OperationalSupportAction]
java.lang.NoClassDefFoundError: com/opensymphony/xwork2/util/finder/ClassFinder$InfoBuildingVisitor
    at com.opensymphony.xwork2.util.finder.ClassFinder.readClassDef(ClassFinder.java:717)
    at com.opensymphony.xwork2.util.finder.ClassFinder.<init>(ClassFinder.java:112)
    at org.apache.struts2.convention.PackageBasedActionConfigBuilder.findActions(PackageBasedActionConfigBuilder.java:390)
    at org.apache.struts2.convention.PackageBasedActionConfigBuilder.buildActionConfigs(PackageBasedActionConfigBuilder.java:347)
    at org.apache.struts2.convention.ClasspathPackageProvider.loadPackages(ClasspathPackageProvider.java:53)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:249)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:67)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:429)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:471)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:74)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:281)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:262)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:107)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4656)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5309)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:11:13.063

`struts.xml`在你写的struts配置中

```
<action class="com.logging.actions.OperationalSupportAction" 
```

但是类路径上没有这样的操作，因此类阅读器无法获取该类的定义。

# ios - 在自定义 segue 中使用 destinationViewController 按钮

> ID：15311630
> 
> 赞同：1
> 
> 时间：2013-03-09T14:12:13.043
> 
> 标签：ios, animation, uiviewcontroller, uistoryboardsegue

我的目标是使用自定义动画制作自定义 segue，如下所示：我希望 segue 使用来自 destinationViewController 的按钮覆盖 sourceViewController 中的按钮，其效果类似于导航控制器的推送效果，即新按钮应该将旧按钮从右向左推开。

我已经能够根据需要使旧按钮（来自 sourceViewController）移开：

```
[UIView animateWithDuration:1.0 animations:^{
        // set the target frame for animated view
        sourceViewController.optionsButton.frame = leftButtonTargetFrame;
    } completion:^(BOOL finished) {
        [navigationController pushViewController:destinationViewController animated:NO];
        // reset the button's frame back to its original frame
        sourceViewController.optionsButton.frame = leftButtonInitFrame;
}]; 
```

但是我正在努力使新按钮（来自destinationViewController）移入。原因是**我无法访问destinationViewController 的视图元素**：在执行segue 时，它​​们没有被实例化。而且我无法为未实例化的按钮设置动画。

那么如何用destinationViewController 中的按钮替换sourceViewController 中的按钮呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:20:19.583

您是正确的，您不能为尚不存在的对象设置动画。但是，您可以伪造它。

1.  创建一个占位符按钮，该按钮看起来与新视图控制器中的按钮相同。
2.  将其动画到正确的位置。
3.  当目标视图控制器进入时，它的按钮应该是不可见的。
4.  在视图控制器就位后（即 segue 已完成），目标视图控制器可以确保其按钮的正确放置并使其实际按钮可见。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:47:45.700

当您尝试访问按钮时，目标视图控制器的视图尚未初始化/加载。要加载目标视图控制器的视图，您可以简单地访问视图属性。在使用按钮之前执行此操作：`[destinationViewController view];`

`destinationViewController.view;`也可以，但会产生编译器警告。

背景资料：

如果您访问[视图](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instp/UIViewController/view)属性并且其值当前为 nil，则视图控制器会自动调用 loadView 方法并返回结果视图。

[loadView](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/loadView)方法加载控制器管理的视图。你不应该直接调用这个方法。

# java - AES文件加密+解密时间不断变化

> ID：15311632
> 
> 赞同：0
> 
> 时间：2013-03-09T14:12:19.107
> 
> 标签：java, file, encryption, aes

我编写了一个代码，它以秒为单位计算文件的聚合加密和解密时间。也许代码效率不高，因为以秒为单位的时间不断变化。例如：一个 60MB 的文件需要 13 秒。但有时它需要更少的时间。我想找到 AES 加密+解密所用的准确时间，因为我想进一步推进这个项目并比较 AES 和其他算法所用的持续时间。是定时器的问题吗？还是我放错地方了？- 谢谢。我在下面粘贴我的代码：

```
import java.awt.Container;
import java.awt.event.*;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.FlowLayout;
import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JTextField;
import java.io.File;
import javax.swing.JFileChooser;
import java.io.FileNotFoundException;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.ObjectOutputStream;
import java.io.ObjectInputStream;

import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.CipherInputStream;
import javax.crypto.CipherOutputStream;
import javax.crypto.KeyGenerator;

import java.security.NoSuchAlgorithmException;
import java.security.spec.AlgorithmParameterSpec;

public class BrowseListener extends JFrame {

private JButton btn ;
private JTextField textField;
private JTextField textF;
private static JFileChooser fc;
Cipher ecipher;
Cipher dcipher;

private long startTime = 0;
private long stopTime = 0;
private boolean running = false;

public void start() {
    this.startTime = System.currentTimeMillis();
    this.running = true;
}

public void stop() {
    this.stopTime = System.currentTimeMillis();
    this.running = false;
}

//elaspsed time in seconds
public long getElapsedTimeSecs() {
    long elapsed;
    if (running) {
        elapsed = ((System.currentTimeMillis() - startTime) / 1000);
    }
    else {
        elapsed = ((stopTime - startTime) / 1000);
    }
    return elapsed;
}

public BrowseListener(SecretKey key)
{
    // Create an 8-byte initialization vector
    byte[] iv = new byte[]
    {
    0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06,
0x07, 0x08, 0x09,0x0a,            0x0b, 0x0c,
0x0d, 0x0e, 0x0f
    };

    AlgorithmParameterSpec paramSpec = new IvParameterSpec(iv);
    try
    {
        ecipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        dcipher = Cipher.getInstance("AES/CBC/PKCS5Padding");

        // CBC requires an initialization vector
        ecipher.init(Cipher.ENCRYPT_MODE, key, paramSpec);
        dcipher.init(Cipher.DECRYPT_MODE, key, paramSpec);
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
}

// Buffer used to transport the bytes from one stream to another
    byte[] buf = new byte[1024];

    public void encrypt(InputStream in, OutputStream out)
    {
        try
        {
            // Bytes written to out will be encrypted
            out = new CipherOutputStream(out, ecipher);

            // Read in the cleartext bytes and write to out to encrypt
            int numRead = 0;
            while ((numRead = in.read(buf)) >= 0)
            {
                out.write(buf, 0, numRead);
            }
            out.close();
        }
        catch (java.io.IOException e)
        {
        }
    }

    public void decrypt(InputStream in, OutputStream out)
    {
        try
        {
            // Bytes read from in will be decrypted
            in = new CipherInputStream(in, dcipher);

        // Read in the decrypted bytes and write the cleartext to out
            int numRead = 0;
            while ((numRead = in.read(buf)) >= 0)
            {
                out.write(buf, 0, numRead);
            }
            out.close();
        }
        catch (java.io.IOException e)
        {
        }
    }

public BrowseListener() {
    initComponents();
    simpleMethod();
}

private void initComponents() {
    setSize(300, 60);
    setTitle("My Window");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    Container c = getContentPane();
    c.setLayout(new FlowLayout());
    btn = new JButton("Browse");
    btn.setPreferredSize(new Dimension(100, 20));
    c.add(btn);
    textField = new JTextField();
    textField.setPreferredSize(new Dimension(160, 20));
    c.add(textField);
    textF = new JTextField();
    textF.setPreferredSize(new Dimension(160, 20));
    c.add(textF);
}

private void simpleMethod() {
    btn.addActionListener(new java.awt.event.ActionListener() {
        @Override
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            try {
                btnBrowseActionPerformed(evt);
            } catch (NoSuchAlgorithmException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    });
}

private void btnBrowseActionPerformed(java.awt.event.ActionEvent evt)
throws   NoSuchAlgorithmException, FileNotFoundException {                                               
    if (fc == null) {
        fc = new JFileChooser(".");
    }
    // Show it.
    int returnVal = fc.showOpenDialog(this);

    // Process the results.
    if (returnVal == JFileChooser.APPROVE_OPTION) {
        textField.setText(fc.getSelectedFile().getPath());

        KeyGenerator    kgen    =   KeyGenerator.getInstance("AES");
        kgen.init(128);
        SecretKey key           =   kgen.generateKey();

        // Create encrypter/decrypter class
        BrowseListener encrypter = new BrowseListener(key);

       BrowseListener s = new BrowseListener();

        s.start(); // timer starts
        encrypter.encrypt(new FileInputStream(fc.getSelectedFile().getPath()),
new  FileOutputStream("C:/Users/Acer/Desktop/encrypted"));
        // Decrypt
        encrypter.decrypt
(new FileInputStream("C:/Users/Acer/Desktop/encrypted"),
new FileOutputStream("C:/Users/Acer/Desktop/decrypted"));
        s.stop(); // timer stops

        textF.setText(Long.toString(s.getElapsedTimeSecs()));

    } else {
        textField.setText("");
    }

    // Reset the file chooser for the next time it's shown.
    fc.setSelectedFile(null);

}  
public static void main(String[] args) throws 
NoSuchAlgorithmException, FileNotFoundException {

    BrowseListener s = new BrowseListener();
    BrowseListener window = new BrowseListener();
    window.setVisible(true);
}
} 
```

# python - 发送到（）蟒蛇

> ID：15311634
> 
> 赞同：1
> 
> 时间：2013-03-09T14:12:48.810
> 
> 标签：python, snmp, bandwidth, traffic, sendto

我使用python程序在Linux Ubuntu中做流量生成器，代码如下：

```
import socket, sys

host = sys.argv[1] #Server IP Address
textport = sys.argv[2] #Server Binding Port

s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM) #socket

try:

    port = int(textport)

except ValueError:

    port = socket.getservbyname(textport, 'udp')

while 1:

   try:
        data = open('auth3.log')#read file

        for each_line in data: #each rows
                try:
                        (role,line_spoken) = each_line.split(': ',1)#split two parts
                        role  =  role.strip()
                        s.sendto(role, (host, port))
                        print('Send: ' + str(role) + "\n" )
                except:
                        pass

    except IOError as err:
        print('file isn\'t exist!!~'+str(err))

    finally:
        if 'data' in locals():   #If data have no object, Don't use data to close!!~
                data.close()

    print "\n" 
```

auth3.log 的大小约为 1.8M。

当我向目标服务器发送数据时，我使用 OID 为 ''ifInOctets'' 的 snmp 来获取流量信息。

但我重新计算以“Kbits”为单位的流量约为 128。

我如何使用这个程序将带宽填充到 1Gbits？（也就是说，我要填充带宽）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:57:06.830

此版本的代码实现了 Chris Merck 建议的前两个优化。

```
import socket, sys, itertools

host = sys.argv[1] #Server IP Address
textport = sys.argv[2] #Server Binding Port

s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

try:
    port = int(textport)
except ValueError:
    port = socket.getservbyname(textport, 'udp')

# preprocess file data    
with open('auth3.log') as data:
    roles = [role for (role, line_spoken) in line.split(': ', 1) for line in data]

# preprocess everything we can
hp = (host, port)
send = s.sendto

for role in itertools.cycle(roles):
    try:
        send(role, hp)
    except:
        pass 
```

为了进一步优化，您可能希望使用[Cython](http://www.cython.org/)对其进行处理，这可能会进一步加快循环速度。如果代码仍然没有产生足够的流量，您可能需要并行启动多个进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T14:26:07.740

您的程序运行速度不够快，无法在线生成 1Gbps。

为了让它运行得更快，你可以：

1.  删除对`print`after的调用`sendto`。（打印本质上很慢。）
2.  预处理您的`auth3.log`文件，以便您不需要在内部循环中处理它。（现在你正在循环`.split`和`.strip`，这两者都在浪费 CPU 时间。
3.  重写您的程序以发送更大的块。

但是，我担心结果*仍然*达不到 1Gbps。要真正最大化您的线路，请尝试使用诸如[Colaso​​ft Packet Builder](http://www.colasoft.com/packet_builder/index.php "Colaso​​ft 数据包生成器")之类的流量生成程序（尽管我不确定*该*程序是否会这样做。1Gbps 是*很多*流量。）

# regex - 替换尾随 {

> ID：15311636
> 
> 赞同：1
> 
> 时间：2013-03-09T14:12:56.567
> 
> 标签：regex, vim

我有一段文字

```
int strlindex(char s[], char t[]) { 
```

我想变成

```
int strlindex(char s[], char t[]); 
```

使用`Vim`. 我试过了

`%s/\{$/;/g`

但无济于事。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T14:38:34.583

我从您问题中的代码中看到的是，您想要这样做：

```
:%s/\s*{\s*$/;/ 
```

**一些笔记**

*   你**不应该**逃避`{`除非你使用`very magic`( `\v`)
*   您在 之前有一个空格`{`，显然您希望将其删除。所以我们需要`\s*`之前`{`
*   `{`和之间也可能有空格`$`。所以我添加了另一个`\s*`
*   你不需要`g`标志，一行只有一个`$`
*   你也有一个`%`之前`s/../../`它会在整个文件上做这个替换。如果此结构有正常功能，`{`则将删除。**替换后请仔细检查，以确保它没有破坏您的代码。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T14:20:20.250

也许你在之后有一些空格`{`

`%s/{\s*$/;/g`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T14:21:43.933

通常在 Vim 中，正则表达式`{`是一个大括号，不需要转义。这适用于正则表达式（如果您指定了选项，则例外 - 请参阅`magic`了解更多信息。`non-magic``very-magic``help: magic`

所以这将起作用：

```
%s/{$/;/g 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T14:18:02.887

这里不需要转义，`%s/{$/;/g`工作正常。

# c++ - c++ 通过 GDB 而不是 xCode 接收 segfault -- 需要帮助调试

> ID：15311642
> 
> 赞同：1
> 
> 时间：2013-03-09T14:13:37.223
> 
> 标签：c++, segmentation-fault

我正在做一个项目，最近开始遇到一个特别讨厌的段错误。这里有一些背景：

1 -- 我有一个“订单”队列，我在其中测试了以下内容： a -- 填充（0 个订单、1 个订单和许多订单），删除直到 isEmpty() 返回 true，并用这些填充其他队列结果（这复制了程序的行为）

2 -- 从 gdb 中找到这个：

```
(gdb) run
Starting program: /Users/Nicholas M. Iodice/Dropbox/tufts/noz2/noz2/a.out 
Reading symbols for shared libraries ++......................... done
order added 1

Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: 13 at address: 0x0000000000000000
0x0000000100003a66 in Queue::remove (this=0x7fff5fbffaa0) at Queue.cpp:85
85      ElementType retVal = front->order;
(gdb) where
#0  0x0000000100003a66 in Queue::remove (this=0x7fff5fbffaa0) at Queue.cpp:85
#1  0x0000000100002c08 in Packer::packItem (this=0x7fff5fbffaa0, time=1) at Packer.cpp:88
#2  0x0000000100002e3f in Packer::update (this=0x7fff5fbffaa0, time=1) at Packer.cpp:131
#3  0x0000000100002e9c in PackerManager::update (this=0x7fff5fbffaa0, i=1) at Packer.cpp:295
#4  0x0000000100001ffa in Manager::run (this=0x7fff5fbff830, careAboutSupreme=false) at Manager.cpp:126
#5  0x000000010000511a in main (argc=0, argv=0x7fff5fbffb48) at main.cpp:173
(gdb) 
```

“order added 1”是我添加的一些日志记录，它发生在我的“Fetcher”类向“PackerManager”类发送订单时，该类确定要向哪个“Packer”对象添加订单。我修改了我的代码，以便所有订单都通过一个“Packer”对象进行路由，以进行调试。

3 -- 这意味着当“Packer”对象调用packItem（它将从我的队列中调用remove（）时，该队列中只有一个订单。我已经在这些类之外进行了测试，它工作正常。

1.  以下是一些相关代码：

来自“队列”

```
Queue::Queue()
{
    front = NULL;
    back = NULL;

    //head = NULL;
    //tail = NULL;
    count = 0;
}

//instert to back of queue
void Queue::insert(ElementType order)
{
    if(isEmpty()){
        back = new Node;
        back->order = order;
        back->next = NULL;
        front = back;
    }else{
        Node* tmp = new Node;
        tmp->order = order;
        back->next = tmp;
        back = back->next;
        back->next = NULL;
    }
    count++;
}

//checks if head & tail = NULL
bool Queue::isEmpty()
{
    if(front == NULL && back == NULL){
        return true;
    }
    return false;
} 
```

在这一行抛出段错误：“ElementType retVal = front->order;”

```
ElementType Queue::remove()
{
    if(isEmpty()){
        cout << "\n\tYou cannot remove from an empty Queue... Exiting.\n\n";
        exit(1);
    }

    ElementType retVal = front->order;
    //delete front;
    if(front == back){
        front = NULL;
        back = NULL;
    }else{
        front = front->next;
    }

    count --;
    return retVal;
} 
```

此代码调用从队列中删除。它调用的是“regularOrders”

```
//retreives next order to begin packing
void Packer::packItem(int time)
{
    if( careAboutSupreme && !supremeOrders.isEmpty() ){
        orderBeingPacked = supremeOrders.remove();
        orderBeingPackedStartTime = time;

    }else if( careAboutSupreme && isDelayOrderWaiting ){
        orderBeingPacked = orderBeingDelayed;
        orderBeingPackedStartTime = orderBeingDelayedStart + delayDuration;
        delayDuration = 0;
        isDelayOrderWaiting = false;

    }else if( !regularOrders.isEmpty() ){
        orderBeingPacked = regularOrders.remove();
        orderBeingPackedStartTime = time;
    }
} 
```

此外，队列通过值 i = 1 且 i > 1 的测试：

```
#if Q
    Queue q1;
    Queue q2;
    for(int i=0 ; i<5 ; i++){
        Order o;
        q1.insert(o);
    }

    while(!q1.isEmpty()){
        q2.insert(q1.remove());
    }

    sortQueueByOrderNumber(q2);

    while(!q2.isEmpty()){
        q2.remove();
    }
    cout << "Expecting to exit now" << endl;
    q2.remove();
#endif

void sortQueueByOrderNumber(Queue q)
{
    if(q.getCount() == 0){
        return;
    }
    int cnt = q.getCount();
    Order* orderArray = new Order[cnt];
    Order tmpOrder;

    //put orders into array -- after this they are in order, but in an array
    while(q.getCount() != 0){
        tmpOrder = q.remove();
        orderArray[tmpOrder.orderNum-1] = tmpOrder;
    }

    //now we stuff em back into the queue, in order!
    for(int i=0 ; i<cnt ; i++){
        tmpOrder = orderArray[i];
        q.insert(tmpOrder);
    }
    delete[] orderArray;
} 
```

请让我知道我还能提供什么。

编辑：看起来空指针不是这里的问题：我尝试添加：

```
ElementType retVal;
if(front == NULL){
    cout <<"oops!";
}else{
    retVal = front->order;
} 
```

代码仍然属于分配 retVal = front->order。所以 front != NULL 但是，它认为 front->order 是一个错误的内存位置。

**编辑2：** 好的，这很奇怪。使用 clang++ 编译时，它实际上可以工作（对不起，如果我之前另有说明），而不是 g++。什么？

**编辑 3** 好的，所以我已将这些文件 scp'd 到另一台机器并尝试运行它。现在我遇到了 g++ 和 clang++ 的分段错误，但是，在完全与队列无关的不同区域中。

还有什么我应该看的可能会导致更广泛的内存问题的东西吗？

现在尝试更新其中一个打包程序对象时会发生段错误。代码如下，它无法更新时间（this->time = time）——我认为这不应该发生，这就是为什么我认为手头可能存在更大的问题。另外，我检查了 GDB，但 this->time 不是 NULL。

```
void Packer::update(int time)
{
    this->time = time;

    //if orderNum = 0 we havent gotten a real order yet. This is the default from the constructor for Order
    if(orderBeingPacked.orderNum == 0){
        packItem(time);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T14:18:56.460

`isEmpty()`返回 false 并**不能**保证`front`不是`NULL`.

像这样放置断言`isEmpty()`：

```
bool Queue::isEmpty()
{
    if(front == NULL || back == NULL){
        assert(front == NULL);
        assert(back == NULL);
        return true;
    }
    return false;
} 
```

另外，您是否在构造函数中同时初始化和`front`初始化？`back``NULL`

* * *

**编辑：** 要检查的另一件事是您的订单号是否不超过临时数组`sortQueueByOrderNumber`：

```
void sortQueueByOrderNumber(Queue q)
{
    ...
    int cnt = q.getCount();
    Order* orderArray = new Order[cnt];
    Order tmpOrder;

    //put orders into array -- after this they are in order, but in an array
    while(q.getCount() != 0){
        tmpOrder = q.remove();

        assert(tmpOrder.orderNum >= 1);       // <<<<<<<<<<<<<<<<<<<<<
        assert(tmpOrder.orderNum-1 < cnt);    // <<<<<<<<<<<<<<<<<<<<<

        orderArray[tmpOrder.orderNum-1] = tmpOrder;
    }
    ...
} 
```

* * *

**EDIT2：**另一个潜在的陷阱：确保在复制队列结构的地方实现赋值运算符和复制构造函数：

```
Queue::Queue(const Queue &other) :
  front(NULL),
  back(NULL),
  count(0)
{
  Node *node = other.front;
  while (node != NULL)
  {
    insert(node->order);
    node = node->next;
  }
} 
```

否则，例如，在调用时`sortQueueByOrderNumber(Queue q)`（假设您没有像 Maciek B 指出的那样将其作为参考），您将共享（因为等待默认复制构造函数工作）多个 Queue 实例之间的队列节点，或者更糟糕的是，您将调用 delete在一个对象上的所有节点上超出范围（例如，在 结束时`sortQueueByOrderNumber`），而另一个`Queue`实例仍然指向（已删除）`Node`对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T15:11:24.540

这个删除被注释掉了吗？

```
ElementType retVal = front->order;
//delete front;
if(front == back){
    front = NULL;
    back = NULL;
}else{
    front = front->next;
} 
```

你不应该删除`front`然后使用`front->next`. 试试这个：

```
ElementType retVal = front->order;
Node* x = front;
if(front == back){
    front = NULL;
    back = NULL;
}else{
    front = front->next;
}
delete x; 
```

**编辑：**

方法也按值`sortQueueByOrderNumber`接受`Queue`参数，因此任何更改`front`都`back`不会存储在原始`Queue`对象中。将签名更改为：

`void sortQueueByOrderNumber(Queue& q)`

如果仍然有问题，请使用`valgrind`. 它应该会发现那些内存问题，或者至少为您指明正确的方向。

# kendo-ui - 在 MVC 中控制 Kendo 脚本位置渲染

> ID：15311648
> 
> 赞同：7
> 
> 时间：2013-03-09T14:14:05.627
> 
> 标签：kendo-ui, kendo-asp.net-mvc

我正在使用 Kendo ASP.NET MVC 包装器。我注意到包装器正在渲染脚本以在控件标记之后立即初始化控件。有没有办法配置让脚本在底部呈现？以前，使用 Telerik ASP.NET MVC 控件，您可以让脚本管理器在底部呈现所有初始化。那可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-29T16:22:28.187

在 2013 Q1 版本中，他们增加了对延迟脚本的支持。你可以像这样使用它：

```
@(Html.Kendo().AutoCompleteFor(m => m)
    .Filter(FilterType.Contains)
    .MinLength(2)
    .DataSource(config =>
        {
            config.Read(action, controller, routeValues);
            config.ServerFiltering(true);
        }).Deferred()) 
```

注意`Deferred()`链末尾的方法。然后，在您的布局中，在标记中的任何位置添加以下内容：

```
 <!-- ... -->
  @Html.Kendo().DeferredScripts()
  </body>
</html> 
```

有关详细信息，请参阅 [http://www.kendoui.c​​om/forums/mvc/general](http://www.kendoui.com/forums/mvc/general-discussions/kendo-initialization-scripts-in-body-interfere-with-other-libraries.aspx) -discussions/kendo-initialization-scripts-in-body-interfere-with-other -libraries.aspx。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T19:51:40.093

很抱歉，这是不可能的，也无法解决。MVC 的 Kendo Wrappers 脚本总是在小部件的 html 包装器之后呈现。

它在[文档](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/migration/migrating-from-telerik-extensions-for-aspnet-mvc#scriptregistrar-and-stylesheetregistrar)中提到。

编辑：这在稍后可能会使用延迟脚本渲染 jrummell exiplained。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T19:05:07.327

这会有点令人头疼，但是由于包装器生成 jQuery 脚本，您不能在局部视图中生成包装器，获取生成的脚本并将其注入页面底部的脚本标记中吗？当然，这意味着要使用重复的代码或大量代码以可重用的方式生成解决方法，所有这些都使得脚本最终位于页面底部而不是中间。

我假设这是为了提高性能（最佳实践通常是将 CSS 放在顶部，将脚本放在底部）？

# java - Java RegExp 从 javascript 获取带有扩展名的变量图像名称

> ID：15311653
> 
> 赞同：0
> 
> 时间：2013-03-09T14:14:57.427
> 
> 标签：java, regex

我正在尝试从以下 javascript 获取图像名称。

```
var g_prefetch ={'Im': {url:'\/az\/hprichbg\/rb\/WhiteTippedRose_ROW10477559674_1366x768.jpg', hash:'674'} 
```

问题：

*图像的名称是可变的。也就是说，在上面的示例代码中，图像会定期更改。*

我想要的输出：

```
WhiteTippedRose_ROW10477559674_1366x768.jpg 
```

我尝试了以下正则表达式：

```
Pattern p = Pattern.compile("\{\'Im\'\: \{url\:\'\\\/az\\\/hprichbg\\\/rb\\\/(.*?)\.jpg\'\, hash\:\'674\'\}");
                    //System.out.println(p);
                    Matcher m=p.matcher(out);
                        if(m.find())                            {
                            System.out.println(m.group());

                            } 
```

我不太了解 RegExp，所以请帮助我，让我了解这种方法。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:21:36.490

假设图像始终放在 a 之后`/`并且不包含任何`/`，您可以使用以下内容：

```
String s = "{'Im': {url:'\\/az\\/hprichbg\\/rb\\/WhiteTippedRose_ROW10477559674_1366x768.jpg', hash:'674'}";
s = s.replaceAll(".*?([^/]*?\\.jpg).*", "$1");
System.out.println("s = " + s); 
```

输出：

> s = WhiteTippedRose_ROW10477559674_1366x768.jpg

实质上：

```
.*?             skip the beginning of the string until the next pattern is found
([^/]*?\\.jpg)  a group like "xxx.jpg" where xxx does not contain any "/"
.*              rest of the string
$1              returns the content of the group 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:22:10.843

如果字符串总是这种形式，我会简单地做：

```
int startIndex = s.indexOf("rb\\/") + 4;
int endIndex = s.indexOf('\'', startIndex);
String image = s.substring(startIndex, endIndex); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T14:56:17.290

我会使用以下正则表达式，它应该足够快：

```
Pattern p = Pattern.compile("[^/]+\\.jpg");
Matcher m = p.matcher(str);
if (m.find()) {
  String match = m.group();
  System.out.println(match);
} 
```

*这将匹配以.jpg*结尾的完整字符序列，不包括*/*。

我认为正确的方法是检查文件名的正确合法性。

以下是 Windows 的非法字符列表：`"\\/:*?\"<>|"` 对于 Mac `/:` Linux/Unix `/`；

这是一个更复杂的例子，假设格式会改变，它主要是为合法的窗口文件名设计的：

```
String s = "{'Im': {url:'\\/az\\/hprichbg\\/rb\\/?*<>WhiteTippedRose_ROW10477559674_1366x768.jpg', hash:'674'}";

Pattern p = Pattern.compile("[^\\/:*?\"<>|]+\\.jpg");
Matcher m = p.matcher(s);
if (m.find()) {
  String match = m.group();
  System.out.println(match);
} 
```

这仍然会打印 `WhiteTippedRose_ROW10477559674_1366x768.jpg`

在这里你可以找到一个[演示](http://ideone.com/wrpF3v)

# javascript - 单个输入框的 JavaScript 加法、减法、乘法

> ID：15311655
> 
> 赞同：-3
> 
> 时间：2013-03-09T14:15:02.023
> 
> 标签：javascript, html

如何从单个输入框中添加，减去，乘以两个数字？

eg：有输入文本框

```
<input type = "text" id = "id"> 
```

我需要使用单个文本框来加、减、乘两个数字。我有单独的加法、减法和乘法按钮。

我尝试过这样的事情：

```
var te = 0;
var input = false;
    function number(value){
            if(input === false){
                document.getElementById("id").value += value;
            }else{
                document.getElementById("id").value = value;
                input = false;
            }
    };

    function calc(opr){

        if(opr === '+'){
            te=te+parseInt(document.getElementById("id").value);
            document.getElementById("id").value = te;
            input = true;

        }

    }; 
```

添加工作正常。我需要添加乘法，减法和等于这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:20:38.360

您可以使用该`eval`功能。但首先要评估安全性和性能问题。

有关应从该文本字段中作为变量访问的更多信息，请参阅将[eval() 限制为窄范围](https://stackoverflow.com/questions/543533/restricting-eval-to-a-narrow-scope)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:25:17.953

一些步骤：

1 - 检查输入的值是否为数字
2 - 将数字拆分为个位数（或将输入值拆分为空格）
3 - 使用这两个数字进行交易（加、减、乘）
4 - 将其返回输入框

# ios - 使用 NavigationController 时视图的内存管理

> ID：15311656
> 
> 赞同：1
> 
> 时间：2013-03-09T14:15:02.250
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller, viewdidload, viewdidunload

我将应用程序中的导航从使用 UITabBarController 更改为 u UINavigationController。即以前的解决方案（第 1 版）仅基于 TabBarController - 4 个 ViewControllers（一个简单的 TableView、一个简单的自定义视图和一个带有许多叠加层的 MapView）。第二个版本仅基于 UINavigationController。

在 TabBarController 的情况下，它清晰简单，一切正常，尤其是 MapView。我的意思是：MapView 被加载一次（有大量的叠加层），当我转到另一个视图并返回 MapView 时，MapView 仍然在那里，它的叠加层已经加载并显示（简单检查：调用 MapView 的 viewDidLoad每个应用程序运行一次，我在那里有一些调试消息）。

现在我将导航逻辑更改为 UINavigationController。第一眼一切都很好 - 但是：每次我导航到视图时都会调用 viewDidLoad （对于每个视图）。这很烦人，尤其是在 MapView 的情况下 - 每次都会执行叠加层的加载，这需要一些时间，并且在某些情况下会导致应用程序崩溃。

**好的，我的问题：**

1.  **它是 NavigationController 的某种“常见”行为吗？**

2.  **我可以更改此行为，以便仅调用一次 viewDidLoad 吗？**

3.  **还有更多 - 如何影响某些视图的“显示顺序”？**

我理解逻辑可能更复杂，但我很感激任何答案或提示；）

一些相关情况：

*   TabBar 和 Navigation 控制器未组合。
*   我使用故事板，在 UIB 中设计了 segue，在我的代码中没有像 perfomSegue 或 prepareForSegue 这样的手动调用。一键触发到 MapView 的 segue。
*   我使用 push segues。
*   我也尝试使用模态序列，但没有改变这种行为。
*   在视图之间的 segues 中永远不会调用任何 viewDidUnload。
*   未收到内存警告。
*   在模拟器和 iPhone 4 上都没有测量到内存泄漏。
*   我试图构建一个非常简单的临时项目/应用程序，它只关心导航。没有任何编码的控制器和其他视图，只是故事板。这是同样的行为。
*   当我在一个视图和 MapView 之间快速并定期点击导航按钮和后退按钮时，出现了一个导致应用程序崩溃的问题。在大多数情况下，当我在 MapView 完全显示（即其覆盖）之前点击返回按钮时，应用程序崩溃了。当我添加 1 秒时，它已修复。在 MapView 中 viewDidDisappeared 中的延迟方法调用。我知道，这不是一个公平的解决方案；）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T14:36:01.543

A`UITabBarController`和`UINavigationController`基于根本不同的范式。

`UITabBarController`旨在使`UIViewController`每个选项卡上的 彼此独立存在，并供用户选择他们想要查看的选项卡。`viewDidLoad`每个选项卡只被调用一次，`UIViewController`因为即使用户切换到不同的选项卡，每个选项卡仍然存在于内存中。

这`UINavigationController`是一个堆栈，`UIViewControllers`其中每个都与自身上方和下方的那个相关。堆栈中的顶部`UIViewController`始终是用户可见的。当 a`UIViewController`被压入堆栈时，它`viewDidLoad`会被调用，因为它正在被加载到内存中。当顶部`UIViewController`从堆栈中弹出时，它会从内存中卸载，并`viewDidUnload`在退出时被调用（`viewDidUnload`在 iOS6 中已弃用并且不会被调用，但控制器仍会从内存中转储）。这就是为什么`viewDidLoad`每次用户将特定内容`UIViewController`压入`UINavigationController`堆栈时都会调用它的原因。

# jsf - 覆盖 JSF 中的默认转换器

> ID：15311664
> 
> 赞同：1
> 
> 时间：2013-03-09T14:16:00.553
> 
> 标签：jsf, converter

是否可以使用自定义转换器覆盖 JSF 的默认转换器。例如，如果我`CONVERTER_ID="javax.faces.Enum"`在 faces-config.xml 中注册一个自定义转换器会发生什么。JSF 会选择自定义转换器还是仍然使用内置的 EnumConverter？

考沙尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:25:17.923

您可以定义您的自定义转换器并在您想要覆盖默认转换器的 JSF 组件中使用它：[http ://www.mkyong.com/jsf2/custom-converter-in-jsf-2-0/](http://www.mkyong.com/jsf2/custom-converter-in-jsf-2-0/)

如果您确实想使用新的而不是已定义的。您可以使用与您希望覆盖的名称和包相同的名称和包来定义新的，这样您的服务器将加载您的类而不是 JSF jar 中定义的类

# c++ - curl_easy_perform() 是同步的还是异步的？

> ID：15311667
> 
> 赞同：16
> 
> 时间：2013-03-09T14:16:20.820
> 
> 标签：c++, curl, libcurl

我`curl`用来发送`POST`和`GET`请求，我使用回调函数从这些请求中获取回复。这些`callback`函数是静态成员函数，它们依次调用非静态成员函数（您不能`curl`直接使用非静态成员函数，因此此解决方法）。

由于这些回调函数不能返回结果，我在我的 C++ 类中使用一个属性来存储回复。这一切都很好，但现在我的问题。是否`curl_easy_perform()`阻塞直到整个请求被发送并且回复由回调函数处理或者我的程序是否在之后继续`curl_easy_perform()`并且当收到来自请求的回复时它是否以某种方式被中断？

对我来说重要的是，我想确保我的属性中应该包含回复的数据已经存在，或者该属性中是否仍有旧数据，因为尚未调用回调函数。

我知道我的解释不是很清楚，所以如果你不明白，请告诉我，我会尝试改写它。

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-09T14:54:29.693

> curl_easy_perform() 是否阻塞，直到整个请求被发送并且回复被回调函数处理

是的，这*正是*它的作用。

（如果你想要一个非阻塞的行为，[libcurl 的多接口](https://curl.haxx.se/libcurl/c/libcurl-multi.html)是要走的路。）

# android - WhatsApp 在技术上如何获取电话号码？

> ID：15311676
> 
> 赞同：2
> 
> 时间：2013-03-09T14:16:52.253
> 
> 标签：android

我有一张 SIM 卡，其中 android 本身显示为未知的电话号码。

因此也`getLine1Number()`返回一个空的`string`。但是，*WhatsApp*能够完美地读取我的电话号码。

我想知道它是如何工作的（技术上）。

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T14:46:21.767

它没有。应用程序无法获取电话号码。Whatsapp 手动询问号码，并通过短信向您发送验证码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T14:58:00.903

检索电话号码并非总是可行和允许的。大多数移动运营商将此功能锁定在他们的手机中。

WhatsApp询问电话号码并保存

如果用户允许，您可以将 SMS 发送到服务器并保存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T14:45:02.963

一种解决方案是在收到的 SMS 中查找最常见的电话号码。

WhatsApp 有权这样做。

# mysql - Grails插入没有时间的日期

> ID：15311693
> 
> 赞同：2
> 
> 时间：2013-03-09T14:18:23.140
> 
> 标签：mysql, grails, grails-orm

我的域中有一个日期属性，我想立即插入 MySQL。获取异常不能将字符串转换为`date.Exception`消息：

> 无法将具有类 java.lang.String 的对象 2013-03-09 转换为类 java.util.Date

我想在没有时间的情况下插入数据库。

领域：

```
class Day {

Date date

        static mappings = {
        table name:'Days'

              date type: 'date'

    } 
```

控制器：

```
def today = new Date()
def ymdFmt = new java.text.SimpleDateFormat("yyyy-MM-dd")
Date dateYmd = ymdFmt.format(today) 

        day.date =dateYmd 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-05T12:42:30.447

```
day.date = new Date().clearTime() 
```

clearTime() 将时间部分重置为 00:00:00

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T14:29:36.167

我想你不想看`Date.parse` [http://groovy.codehaus.org/groovy-jdk/java/util/Date.html#parse(java.lang.String](http://groovy.codehaus.org/groovy-jdk/java/util/Date.html#parse(java.lang.String) , java.lang.String)

你可以像这样解析日期。

```
String stringDate = '28/09/2010'
Date date = new Date().parse('d/M/yyyy', stringDate) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T21:08:47.620

您应该使用`java.sql.Date`而不是`java.util.Date`.

该类`java.sql.Date`对应于 SQL `DATE`，这意味着它存储年、月和日，而忽略小时、分钟、秒和毫秒。此外`java.sql.Date`，与时区无关。

有关两者的良好解释，请参见[java.util.Date vs java.sql.Date](https://stackoverflow.com/questions/2305973/java-util-date-vs-java-sql-date)

# python - 条件和正则表达式

> ID：15311694
> 
> 赞同：0
> 
> 时间：2013-03-09T14:18:24.360
> 
> 标签：python, regex

问题是如何用正则表达式实现条件。我们有这个：

```
regex = '"Tom":{"c":(.+?),"b":(.+?),"a":(.+?)}|"Tom":{"a":(.+?),"c":(.+?),"b":(.+?)}' 
```

我们希望根据将找到的正则表达式对正则表达式做不同的事情。我们如何遇到这种情况？我们如何使用 if 语句访问它？

说：`if regex[0]: print 'Hi'` `else: print 'Hello'`基本上，我只是不知道如何问python找到并使用了哪个正则表达式。

我的意思是语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:28:10.417

[您应该能够使用命名正则表达式http://docs.python.org/2/library/re.html](http://docs.python.org/2/library/re.html)做您想做的事

```
regex = '(?P<first>"Tom":{"c":(.+?),"b":(.+?),"a":(.+?)})|(?P<second>"Tom":{"a":(.+?),"c":(.+?),"b":(.+?)})'
# Careful as this raises an exception if no match was found
m = re.search( regex, somestring ).groupdict()
if m['first']:
    print 'First'
else:
    print 'Second' 
```

# c# - 相对于图像中心调整图像大小

> ID：15311695
> 
> 赞同：0
> 
> 时间：2013-03-09T14:18:25.560
> 
> 标签：c#, image, resize

我目前正在开发一个基于 Kinect 的项目，但我找不到如何相对于图像中心调整图像大小的方法。当我移动双手时，我设法更新了图像的宽度和高度，并且调整了图片的大小，但相对于左上角。所以，基本上如果你想象一个矩形，左上角总是固定的，而其他角是移动的。图片仅在从右到左和从下到上的方向调整大小。

我首先尝试使用 ScaleTransform 来调整图像大小，在那里我可以指定变换原点（我在图片中间设置），但它不允许更新结果中的图像大小......所以它使对我没用。。

因此，如果有人能给我一些关于如何动态地完成全方位调整大小任务的想法，我将不胜感激。也许有一些方法可以将点设置为与左上角不同的值？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:12:37.087

您可以使用`RenderTransformOrigin`来移动缩放动作的中心点。例如：

```
<Setter Property="RenderTransformOrigin" Value="0.5, 0.5" /> 
```

我有一个类似的问题，与从`UserControl`. 在已接受答案的评论之一中提到了如何从对象中心调整大小的发现。

[使用样式触发器增加 UserControl 大小？](https://stackoverflow.com/questions/11568214/growing-usercontrol-size-with-style-trigger)

# python - 如何查看 Tkinter 中是否存在小部件？

> ID：15311698
> 
> 赞同：11
> 
> 时间：2013-03-09T14:18:37.660
> 
> 标签：python, button, listbox, tkinter

现在，我知道您可以通过以下方式检查窗口是否存在：

```
x.winfo_exists() 
```

它返回一个布尔值。我已经搜索过这个，但无法找到我正在寻找的确切内容。更具体地说，我需要检查我的按钮、标签、列表框、滑块等是否存在。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-09T14:44:56.027

`winfo_exists`返回 1，除非您已销毁小部件，在这种情况下它返回 0。可以在任何小部件类上调用此方法，不仅是 Tk 根或 Toplevels。或者，您可以使用以下命令获取小部件的所有子项`winfo_children`：

```
>>> import Tkinter as tk
>>> root = tk.Tk()
>>> label = tk.Label(root, text="Hello, world")
>>> label.winfo_exists()
1
>>> root.winfo_children()
[<Tkinter.Label instance at 0x0000000002ADC1C8>]
>>> label.destroy()
>>> label.winfo_exists()
0
>>> root.winfo_children()
[] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-27T14:25:06.000

您也可以打印类型，即。类型（标签）。这不仅有助于提供存在，而且还有助于查找是否有任何内容出现“NoneType”而没有错误。type() 将告诉您是否有一个实例或其他类型，它们可以提供有价值的线索，说明程序执行的接近程度或返回项目与您认为您所要求的内容的接近程度！object.winfo_exists() 和 object.winfo_children 是特定的，如果对象不是“实例”类型，则会抛出错误。

# php - 这个 SQL 查询有什么问题？（MySQL 错误）

> ID：15311704
> 
> 赞同：1
> 
> 时间：2013-03-09T14:19:42.853
> 
> 标签：php, mysql, sql

我的查询有什么问题？

```
mysql_query("SELECT * FROM admin_nav1 WHERE Active = 'YES' AND WHERE LinkedID = '$WID' ORDER by 'OrderSet' ASC") or die(mysql_error()); 
```

我不断收到此错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'WHERE LinkedID = '6' ORDER by 'OrderSet' ASC' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T14:20:30.580

你应该只有一个`WHERE`子句。`AND`运算符足以将这两个条件分开。

```
SELECT  * 
FROM    admin_nav1 
WHERE   Active = 'YES' AND LinkedID = '$WID'  // <<== one WHERE clause
ORDER   by OrderSet ASC 
```

还有一件事，您的查询将无法`ORDER`正确显示行，因为您已将列名`OrderSet`用单引号括起来，从而将其转换为字符串。当您关心列名是否是保留关键字时，您可以使用反引号将其包装起来，或者在表上提供别名，并使用具有该别名的列名来分隔列，但**不能**使用单引号。

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:21:26.897

你需要使用 where 一次

```
SELECT * FROM admin_nav1 
WHERE Active = 'YES' AND  ..... 
```

然后使用 and 运算符获得更多条件。

# isabelle - 在定义中使用元组

> ID：15311705
> 
> 赞同：1
> 
> 时间：2013-03-09T14:19:56.633
> 
> 标签：isabelle

我想创建一个以元组作为参数的定义。

```
definition my_def :: "('a × 'a) ⇒ bool" where
  "my_def (a, b) ⟷ a = b" 
```

但是，这不被接受。错误信息是

```
Bad arguments on lhs: "(a, b)"
The error(s) above occurred in definition:
"my_def (a, b) ≡ a = b" 
```

使用`fun`而不是`definition`工作，但这不是我想要的。以下表示法也有效，但有点难看：

```
definition my_def :: "('a × 'a) ⇒ bool" where
  "my_def t ⟷ fst t = snd t" 
```

在 a 中使用元组作为参数的最佳方法是`definition`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:04:36.850

使用`fun`可能是最不痛苦的方法，定义包无法识别左侧的模式。

另一种选择是对 lambda 表达式使用元组模式： `my_def ≡ %(a,b). a = b`

# c++ - 将可见窗口标题添加到组合框 MFC

> ID：15311708
> 
> 赞同：3
> 
> 时间：2013-03-09T14:20:08.483
> 
> 标签：c++, mfc, combobox

我想将可见的窗口标题添加到组合框。这是我的来源：

```
BOOL CALLBACK EnumWindowsProc(HWND hWnd, long lParam) 
{
     TCHAR buff[255];
     CComboBox* pComboBox = (CComboBox*)GetDlgItem(IDC_COMBO_PROCESS);
     if (IsWindowVisible(hWnd)) 
     {
         GetWindowText(hWnd, buff, 254);
         pComboBox->AddString(buff);
     }
     return TRUE;
}

void CFindProcess::OnDropdownComboProcess()
{
    EnumWindows(EnumWindowsProc, 0);
} 
```

但我得到错误：

```
error C2660: 'GetDlgItem' : function does not take 1 arguments  60 
```

如何正确添加标题到组合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T12:52:36.673

MFC 对象是线程敏感的，`GetDlgItem`在创建对象的线程中运行良好，可能是主 UI 线程。函数`EnumWindows`可能会创建一个工作线程来访问回调函数，这就是为什么`GetDlgItem`无法获得组合框的有效句柄的原因。

要在另一个线程中正确访问组合框，您必须使用静态函数：`CWnd::FromHandle`使用组合框对象的原始句柄，如下所示：

```
BOOL CALLBACK EnumWindowsProc(HWND hWnd, long lParam) 
{
    if (IsWindowVisible(hWnd)) 
    {   TCHAR szBuffer[255];
        INT nLength = GetWindowText(hWnd, szBuffer, 254);
        if (nLength>0)
        {   // only add windows that has a caption
            CComboBox *pComboBox = (CComboBox*)CWnd::FromHandle((HWND)lParam);
            pComboBox->AddString(szBuffer);
        }
    }
    return TRUE;
}

// call EnumWindows --------------------
CComboBox *pComboBox = (CComboBox *)GetDlgItem(IDC_COMBO1);
// passing the raw handle of the combobox as parameter
EnumWindows(EnumWindowsProc, (LPARAM)pComboBox->m_hWnd); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T14:38:38.163

首先，你`GetDlgItem`有两个参数，第一个是*包含控件的对话框的句柄。*

所以它需要一个`HWND`包含这个控件的对话框的参数，我认为这将是`HWND`你作为参数传递给你的函数。

```
 CComboBox* pComboBox = (CComboBox*)GetDlgItem(hWnd,IDC_COMBO_PROCESS);
                                                 ^^^^ added parameter 
```

如果你[`EnumWindows`在 MSDN](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633498%28v=vs.85%29.aspx)中查看，你会看到你必须传递一个回调并且它有一个`HWND`参数，如果你看看这个参数是什么，它说：

> 顶级窗口的句柄。

这正是你必须传递给`GetDlgItem`.

此外，您应该检查返回值，`GetWindowText`因为这会返回写入`buff`您传递给它的字符数。

```
 int ret = GetWindowText(hWnd, buff, 254);
     if (ret > 0) pComboBox->AddString(buff); // only add non-empty strings. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T13:06:23.900

除了用户 @mfc 提供的内容之外，我不会从不同的线程进行 UI 更新。**我**相信`EnumWindows`不会为枚举创建线程。它将在当前线程的调用堆栈中调用回调。

 **反过来，这意味着 UI 可能会冻结一段时间。因此，建议创建一个线程进行枚举。此外，我不会直接从不同的线程更新 UI。可能是一个`vector`字符串，或者是`PostMessage`我会使用的（在每次迭代中）。

确实`EnumWindows`可以执行得相当快。但是，当您开始枚举其他（内核）对象，如文件、打印机、用户等时，UI 肯定会冻结。因此，更好地练习编写多线程代码。最初编写 MT 代码会很痛苦，但后来你会喜欢它，欣赏它，没有它就活不下去。**

# .net - 不符合 RFC 的 URI 方案

> ID：15311709
> 
> 赞同：0
> 
> 时间：2013-03-09T14:20:11.893
> 
> 标签：.net, uri, url-scheme

在我的 .NET 4.5 应用程序中，我想为一堆**非常**规的 URI 方案（如[本](http://dune-hd.com/firmware/misc/media_url.txt)草案中所定义）提供支持。

**具有双方案标识符的 URI 方案**

```
www://http://www.example.com/

http://ts://www.example.com/

http://mp4://www.example.com/ 
```

**带有非法字符（下划线）**的 URI 方案****

 **```
network_folder://path/

storage_name://path/

storage_label://path/ 
```

我希望以`System.Uri`一种能够识别上述 URI 的方式进行扩展，但似乎没有办法让它接受这些疯狂的输入。我尝试扩展`System.GenericUriParser`以实现我自己的解析逻辑，但即使这样也不会让我使用不符合 RFC 的方案。

我真的很想避免将这些 URI 公开为字符串对象，但此时我完全迷失了。除了试图让提出这些方案的开发人员有所了解之外，框架中还有什么其他东西可以用来设置正确的吗？**

# javascript - JavaScript。如何挂钩访问对象

> ID：15311712
> 
> 赞同：1
> 
> 时间：2013-03-09T14:20:27.597
> 
> 标签：javascript, navigator

那里有很多关于钩子函数的信息。但。是否可以挂钩访问对象？例如。我们有“导航器”对象。它有很多参数。我们需要挂钩对 UserAgent 参数的访问。可能吗？Mybe 我可以使用 setter/getter 的定义吗？或者是其他东西...

正如我们所知，没有办法替换 navigator 对象（它是只读的）。所以我们不能像这样简单地解决它：

```
var blabla = navigator;
blabla.UserAgent = "myagent"; 
```

ETC

问候！

ps对不起我的英语:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T15:33:29.053

我不确定我是否正确理解了您的问题，但是如果您想在访问 navigator.userAgent 时做某事，您可以将其重新定义为属性。

```
(function() {
    var userAgent = window.navigator.userAgent;
    Object.defineProperty(window.navigator, "userAgent", {
        get: function() {
            console.log("hello from useragent");
            return userAgent;
        }
    });
})(); 
```

# android - Android 布局重绘和模糊

> ID：15311713
> 
> 赞同：0
> 
> 时间：2013-03-09T14:20:28.333
> 
> 标签：android, user-interface

我有一个相当标准的布局，最初呈现，但在重绘后变得模糊（例如，如果软键盘出现/消失）。请参阅参考图像。

[https://www.dropbox.com/s/st7owe4964afks9/BlurredAndroidLayout.png](https://www.dropbox.com/s/st7owe4964afks9/BlurredAndroidLayout.png)

我认为 ScrollView 可能是罪魁祸首，但删除它并没有任何效果。

有没有人对我需要做些什么来解决这个问题有任何想法？

谢谢

这是布局代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="bottom|center_horizontal"
    tools:context=".CouncilMapServerMainActivity" >

        <LinearLayout
            android:id="@+id/fullscreen_content_controls"
            style="@style/MainPanel"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="bottom|center_horizontal"
            android:fitsSystemWindows="true"
            android:orientation="vertical"
            android:gravity="center"
            tools:ignore="UselessParent" >

            <LinearLayout
                style="@style/InfoGroupPanel"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="bottom|center_horizontal"
                android:orientation="horizontal"
                android:gravity="center"
                tools:ignore="UselessParent" >
                <ImageView
                    android:src="@drawable/ic_launcher"
                    android:layout_height="48dp" 
                    android:layout_width="48dp" 
                    android:layout_marginRight="10dp"
                    android:cropToPadding="false"
                    android:scaleType="centerInside"
                    android:contentDescription="@string/appName"
                    android:visibility="visible">
                </ImageView>
                <TextView
                    android:id="@+id/appNameLabel"
                    android:text="@string/reportAProblemButtonLabel"
                    style="@style/AppTitleLabel"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:textSize="@dimen/appTitleTextSize">
                </TextView>
            </LinearLayout>

            <ScrollView
                android:id="@+id/ScrollView01"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:scrollbars="vertical">
                <LinearLayout
                    style="@style/MainButtonPanel"
                    android:layout_width="@dimen/reportAProblemFormWidth"
                    android:layout_height="wrap_content"
                    android:layout_gravity="bottom|center_horizontal"
                    android:fitsSystemWindows="true"
                    android:orientation="vertical"
                    android:gravity="center"
                    tools:ignore="UselessParent" >

                    <!-- Problem Type -->
                    <TextView
                        android:id="@+id/reportAProblemProblemTypePrompt"
                        android:text="@string/reportAProblemProblemTypePrompt"
                        style="@style/OverTopPrompt"
                        android:layout_gravity="top"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_margin="@dimen/widgetLayoutMargin"
                        android:textSize="@dimen/infoGroupTitleTextSize">
                    </TextView>
                    <Spinner
                            android:id="@+id/reportAProblemProblemSpinnerId"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:entries="@array/reportAProblemProblemTypeArray"
                            android:prompt="@string/reportAProblemProblemTypePrompt">
                    </Spinner>

                    <!-- Photo -->
                    <TextView
                        android:id="@+id/reportAProblemPhotoPrompt"
                        android:text="@string/reportAProblemPhotoPrompt"
                        style="@style/OverTopPrompt"
                        android:layout_gravity="top"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_margin="@dimen/widgetLayoutMargin"
                        android:textSize="@dimen/infoGroupTitleTextSize">
                    </TextView>
                    <LinearLayout
                        style="@style/InfoGroupPanel"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_gravity="bottom|center_horizontal"
                        android:orientation="horizontal"
                        android:gravity="center"
                        tools:ignore="UselessParent" >
                        <Button
                            android:id="@+id/reportAProblemTakePhotoButtonId"
                            android:text="@string/reportAProblemTakePhotoButtonLabel"
                            style="@style/ButtonBarButton"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:textSize="@dimen/infoGroupTitleTextSize">
                        </Button>
                        <Button
                            android:id="@+id/reportAProblemSelectPhotoButtonId"
                            android:text="@string/reportAProblemSelectPhotoButtonLabel"
                            style="@style/ButtonBarButton"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginLeft="5dp"
                            android:textSize="@dimen/infoGroupTitleTextSize">
                        </Button>
                        <ImageView
                            android:id="@+id/imageView1"
                            android:layout_height="50dp" 
                            android:layout_width="50dp" 
                            android:layout_margin="0dp"
                            android:cropToPadding="false"
                            android:scaleType="centerInside"
                            android:contentDescription="@string/reportAProblemPhotoDescription"
                            android:visibility="visible">
                        </ImageView>
                    </LinearLayout>

                    <!-- Location -->
                    <TextView
                        android:id="@+id/reportAProblemLocationPrompt"
                        android:text="@string/reportAProblemLocationPrompt"
                        style="@style/OverTopPrompt"
                        android:layout_gravity="top"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_margin="@dimen/widgetLayoutMargin"
                        android:textSize="@dimen/infoGroupTitleTextSize">
                    </TextView>
                    <LinearLayout
                        style="@style/InfoGroupPanel"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_gravity="bottom|center_horizontal"
                        android:orientation="horizontal"
                        android:gravity="center"
                        tools:ignore="UselessParent" >
                        <Button
                            android:id="@+id/reportAProblemPickFromMapButtonId"
                            android:text="@string/reportAProblemPickFromMapButtonLabel"
                            style="@style/ButtonBarButton"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:textSize="@dimen/infoGroupTitleTextSize">
                        </Button>
                        <TextView
                            android:id="@+id/reportAProblemSelectedLocationTextId"
                            android:text="@string/reportAProblemSelectedLocationText"
                            android:layout_gravity="top"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_margin="@dimen/widgetLayoutMargin"
                            android:textSize="@dimen/infoGroupTitleTextSize">
                        </TextView>
                    </LinearLayout>

                    <!-- Description -->
                    <TextView
                        android:id="@+id/reportAProblemDescriptionPrompt"
                        android:text="@string/reportAProblemDescriptionPrompt"
                        style="@style/OverTopPrompt"
                        android:layout_gravity="top"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_margin="@dimen/widgetLayoutMargin"
                        android:textSize="@dimen/infoGroupTitleTextSize">
                    </TextView>
                    <EditText
                        android:id="@+id/reportAProblemDescriptionEditTextId"
                        android:inputType="textMultiLine|textCapSentences"
                        android:lines="@integer/reportAProblemDesriptionLineCount"
                        style="@style/ButtonBarButton"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:textSize="@dimen/infoGroupTitleTextSize">
                    </EditText>

                    <!-- Name -->
                    <TextView
                        android:id="@+id/reportAProblemNamePrompt"
                        android:text="@string/reportAProblemNamePrompt"
                        style="@style/OverTopPrompt"
                        android:layout_gravity="top"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_margin="@dimen/widgetLayoutMargin"
                        android:textSize="@dimen/infoGroupTitleTextSize"
                        >
                    </TextView>
                    <EditText
                        android:id="@+id/reportAProblemNameEditTextId"
                        android:inputType="textPersonName|textAutoComplete"
                        style="@style/ButtonBarButton"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_margin="@dimen/widgetLayoutMargin"
                        android:textSize="@dimen/infoGroupTitleTextSize">
                    </EditText>

                    <!-- Email -->
                    <TextView
                        android:id="@+id/reportAProblemEmailPrompt"
                        android:text="@string/reportAProblemEmailPrompt"
                        style="@style/OverTopPrompt"
                        android:layout_gravity="top"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_margin="@dimen/widgetLayoutMargin"
                        android:textSize="@dimen/infoGroupTitleTextSize">
                    </TextView>
                    <EditText
                        android:id="@+id/reportAProblemEmailEditTextId"
                        android:inputType="textEmailAddress|textAutoComplete"
                        style="@style/ButtonBarButton"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_margin="@dimen/widgetLayoutMargin"
                        android:textSize="@dimen/infoGroupTitleTextSize">
                    </EditText>

                    <!-- Phone -->
                    <TextView
                        android:id="@+id/reportAProblemPhonePrompt"
                        android:text="@string/reportAProblemPhonePrompt"
                        style="@style/OverTopPrompt"
                        android:layout_gravity="top"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_margin="@dimen/widgetLayoutMargin"
                        android:textSize="@dimen/infoGroupTitleTextSize">
                    </TextView>
                    <EditText
                        android:id="@+id/reportAProblemPhoneEditTextId"
                        android:inputType="phone|textAutoComplete"
                        style="@style/ButtonBarButton"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_margin="@dimen/widgetLayoutMargin"
                        android:textSize="@dimen/infoGroupTitleTextSize">
                    </EditText>

                    <LinearLayout
                        style="@style/InfoGroupPanel"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_gravity="bottom|center_horizontal"
                        android:orientation="horizontal"
                        android:gravity="center"
                        tools:ignore="UselessParent" >
                        <Button
                            android:id="@+id/reportAProblemSubmitButtonId"
                            android:text="@string/reportAProblemSubmitButtonLabel"
                            style="@style/ButtonBarButton"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:textSize="@dimen/infoGroupTitleTextSize">
                        </Button>
                        <Button
                            android:id="@+id/reportAProblemClearButtonId"
                            android:text="@string/reportAProblemClearButtonLabel"
                            style="@style/ButtonBarButton"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:textSize="@dimen/infoGroupTitleTextSize">
                        </Button>
                    </LinearLayout>

                </LinearLayout>
            </ScrollView>
        </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:19:04.230

经过一些试验和错误，我把它变成了一个风格问题。我有以下内容：

```
<style name="FullscreenTheme" parent="android:Theme.NoTitleBar">
    <item name="android:actionBarStyle">@style/FullscreenActionBarStyle</item>
    <item name="android:windowActionBarOverlay">true</item>
    <item name="android:windowBackground">@null</item>
    <item name="appTitleLabelStyle">@style/AppTitleLabel</item>
    <item name="buttonBarStyle">?android:attr/buttonBarStyle</item>
    <item name="buttonBarButtonStyle">?android:attr/buttonBarButtonStyle</item>
</style> 
```

删除以下行解决了问题（但我不知道为什么）：

```
 <item name="android:windowBackground">@null</item> 
```

# javascript - 如何将 $scope 对象注入对话框模板？

> ID：15311717
> 
> 赞同：6
> 
> 时间：2013-03-09T14:21:07.377
> 
> 标签：javascript, angularjs, modal-dialog, angular-ui, angular-ui-bootstrap

我有这个[plunker](http://plnkr.co/edit/Qxsq3LAnC3SWo6AsMqBM?p=preview)和一个对话框示例，该示例使用选项对象的 resolve 属性，基于 this [example](https://github.com/angular-ui/bootstrap/blob/master/src/dialog/README.md#dialogtemplateurl-controller)。
基本上我想做的是传递要在对话框模板中使用的标题变量：

```
var title         = "azerty"; 
```

使用对话框选项对象的 resolve 属性：

```
resolve:       {title: angular.copy(title)} 
```

然后将其注入对话框控制器并将其分配给 $scope 变量：

```
controllers.DialogController = function($scope, dialog, title) {
    $scope.title = title; 
```

但我得到这个错误：

> 错误：未知提供程序：azertyProvider <- azerty

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T14:28:39.647

从发布`0.2.0` （[https://github.com/angular-ui/bootstrap/blob/master/CHANGELOG.md#020-2013-03-03](https://github.com/angular-ui/bootstrap/blob/master/CHANGELOG.md#020-2013-03-03)）开始，我们更新了解析语法，因此它遵循 [$使用的语法路由提供者](http://docs.angularjs.org/api/ng.$routeProvider)。实际上，这意味着解析对象中的值必须是一个函数：

```
resolve: {
  title: function() {
    return angular.copy(title);
  }
} 
```

这是工作 plunk：[http ://plnkr.co/edit/qmNUsWK7RGeAjXcANuWv?p=preview](http://plnkr.co/edit/qmNUsWK7RGeAjXcANuWv?p=preview)

顺便说一句，您不需要（甚至不应该）包含 Bootstrap 的 JavaScript。这个项目不依赖任何外部 JavaScript（除了 AngularJS 本身），所以你也不需要 jQuery。

# php - 如果 onclick 验证失败，则停止脚本

> ID：15311720
> 
> 赞同：0
> 
> 时间：2013-03-09T14:21:19.927
> 
> 标签：php, javascript

我有一个名为 validate() 的 javascript 验证脚本。

我有另一个 javascript 函数，它生成一个名为 process() 的表单。

我有一个按钮：

```
<input name='Submit' type='submit' value='button' onclick='return validate()'> 
```

该按钮以名为 arg_form 的形式定义，而该形式又在函数 process() 中定义。表格是：

```
 "<form name='arg_form' method='POST' action='x.php'> 
```

现在，当我单击按钮时，验证完成。这里的问题是，无论验证如何，文件 x.php 都会运行。我想要的是，我希望 x.php 文件仅在 validate() 函数有效时运行。

请帮帮我，自从过去 3 个小时以来，我一直被困在这里。

编辑：验证脚本的作用是，如果不满足某些条件并返回 false，它会创建警报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:23:26.913

```
 <form name='arg_form' method='POST' action='x.php' onsubmit='return validate()'> 
```

如果方法返回 false，它将停止表单提交。

# javascript - JQuery - 根据tabindex在输入之间切换焦点

> ID：15311730
> 
> 赞同：1
> 
> 时间：2013-03-09T14:22:24.850
> 
> 标签：javascript, jquery, html

我在页面上有以下结构

```
<div id="testDialog" class="dialogContent">
<form:form action="#" id="testForm">
    <table>
        <tr>
            <td>one</td>
            <td><input id="c1" type="text" maxlength="45" tabindex="49"/></td>
        </tr>
        <tr>
            <td>two</td>
            <td><input id="c2" type="text" maxlength="8" tabindex="50"/></td>
        </tr>
        <tr>
            <td>three</td>
            <td><input id="c3" type="text" maxlength="8" tabindex="51"/></td>
        </tr>
        <tr>
            <td>four</td>
            <td><input id="c4" type="text" maxlength="8" tabindex="52"/></td>
        </tr>
        <tr>
            <td><button type="button" tabindex="53">Confirm</button></td>
            <td><button type="button" tabindex="54">Cancel</button></td>
        </tr>
    </table>
</form:form>
</div> 
```

我需要在输入键和按钮之间切换焦点。切换顺序应根据标签索引。并且切换应该在表单内循环，例如如果焦点设置在“取消​​”按钮上，则下一次输入将在本例中将焦点设置在第一个输入上。对于任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:41:59.997

这应该有效：

```
var $targets = $('#testForm').find('input, button'),
    steps = $targets.map(function() {
        return $(this).attr('tabindex');
    }).get();

$('#testForm').on('keypress', 'input, button', function(e) {
    if (e.keyCode == 13) {
        var current = $.inArray($(this).attr('tabindex'), steps),
            next = steps[++current % steps.length];
        $targets.filter('[tabindex="' + next + '"]').focus();
    }
}); 
```

[http://jsfiddle.net/BHA9g/2/](http://jsfiddle.net/BHA9g/2/)

从任何字段开始正确循环也很重要`Enter`，而不仅仅是第一个字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:28:02.653

如果您要在要循环输入的字段中添加一个名为“TabOnEnter”的类。

```
$(document).on("keypress", ".TabOnEnter" , function(e)
      {

        if( e.keyCode ==  13 )
        {
           var nextElement = $('input[tabindex="' + (this.tabIndex+1)  + '"]');

           if(nextElement.length )// this is for next element
            nextElement.focus();
           else
             $('input[tabindex="1"]').focus();  //this is for first element
        }   
      });​ 
```

# html - CSS 中的子元素悬停/链接

> ID：15311733
> 
> 赞同：0
> 
> 时间：2013-03-09T14:22:58.067
> 
> 标签：html, css, hover

我试图让一些元素在用户将鼠标悬停在它们上方时稍微移动（它们在导航栏上形成按钮）。但是，我的代码似乎不起作用。框中的文本也应该是可点击的，但这似乎也不起作用。这是代码：

```
#navbar {
position: relative;
width: max-width;
height: auto;
margin-left: 2%;
}

.nav_tab{
background-image: url('dark_exa.png');
border: 2px dashed grey;

/* rounded borders of 5px in firefox */
-moz-border-radius:10px;  

/* rounded borders of 5px in chrome and other browsers */
-webkit-border-radius:10px;  

/* rounded borders of 5px in browsers that support css3 */
border-radius:10px;

/* shadows for different browsers */
-moz-box-shadow: 0 0 0 3px black, 2px 1px 4px 4px rgba(10,10,0,.5);
-webkit-box-shadow: 0 0 0 3px black 2px 1px 4px 4px rgba(10,10,0,.5);
box-shadow: 0 0 0 3px black, 2px 1px 6px 4px rgba(10,10,0,.5);
position: relative;
height: auto;
width:20%;
z-index: -1;
margin-left: 2%;
margin-right: 2%;
top: -30px;
display: inline-block;
}

.nav_tab:hover{
position: relative;
top: +5px;
}

h1 {
font-size:40px;
text-align: center;
color: white;
font-family: "Gabriela";
margin: 20px;
margin-top: 130px;
}
h2 {
font-size:30px;
text-align: center;
color: white;
font-family: "Gabriela";
margin: 10px;
margin-top: 40px;
} 
```

和 HTML：

```
<div id="navbar">
<div class="nav_tab"><h2><a href="http://www.stackoverflow.com">Zues</a></h2></div>
<div class="nav_tab"><h2>Jack</h2></div>
<div class="nav_tab"><h2>Denise</h2></div>
<div class="nav_tab"><h2>Joel</h2></div></div> 
```

我不完全确定这里发生了什么，尽管我认为这是某种亲子问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:30:25.947

该链接不可点击，因为您为`.nav_tab`该类提供了一个负值`z-index`，只需将其调整为值 => 0 即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:33:16.820

css的问题`z-index: -1;`是`.nav_tab`您的问题，它使容器位于页面后面，因此任何鼠标事件（悬停、指针等）都将不起作用（悬停、指针等）将其删除并准备就绪：请参阅 jsfiddle 演示：

[http://jsfiddle.net/QmVFR/64/](http://jsfiddle.net/QmVFR/64/)

# ruby-on-rails - 如何使用 RSpec 和 FactoryGirl 测试嵌套表单？

> ID：15311734
> 
> 赞同：2
> 
> 时间：2013-03-09T14:23:13.307
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, factory-bot, rspec-rails

在我的 Rails 项目中，我有一个`User`that can have many `Projects`，而后者又可以有很多`Invoices`. 每个`Invoice`可以有很多嵌套`Items`。

```
class Invoice < ActiveRecord::Base

  attr_accessible :number, :date, :recipient, :project_id, :items_attributes

  belongs_to :project
  belongs_to :user

  has_many :items,    :dependent  => :destroy

  accepts_nested_attributes_for :items, :reject_if => :all_blank, :allow_destroy => true

  validates :project_id,  :presence => true

  def build_item(user)
    items.build(:price => default_item_price(user), :tax_rate => user.preference.tax_rate)
  end

  def set_number(user)
    self.number ||= (user.invoices.maximum(:number) || 0).succ  
  end

end

class InvoicesController < ApplicationController

  def new
    @invoice = current_user.invoices.build(:project_id => params[:project_id])
    @invoice.build_item(current_user)
    @invoice.set_number(current_user)
    @title = "New invoice"
  end

  def create
    @invoice = current_user.invoices.build(params[:invoice])    
    if @invoice.save
      flash[:success] = "Invoice created"
      redirect_to invoices_path
    else
      render :new
    end
  end

end 
```

现在，我正在尝试使用 RSpec 和 FactoryGirl 测试发票的创建，并且所有测试都通过了，除了与**POST 创建**操作相关的测试，例如：

```
it "saves the new invoice in the database" do
  expect {
    post :create, invoice: attributes_for(:invoice, project_id: @project, items_attributes: [ attributes_for(:item) ])
  }.to change(Invoice, :count).by(1)
end 
```

它一直给我这个错误：

```
Failure/Error: expect {
count should have been changed by 1, but was changed by 0 
```

谁能告诉我为什么会这样？

这是我`factories.rb`用来制造物体的：

```
FactoryGirl.define do

  factory :invoice do
    number { Random.new.rand(0..1000000) }
    recipient { Faker::Name.name }
    date { Time.now.to_date }
    association :user
    association :project
  end

  factory :item do
    date { Time.now.to_date }
    description { Faker::Lorem.sentences(1) }
    price 50
    quantity 2
    tax_rate 10
  end

end 
```

有人可以帮忙吗？

谢谢...

# mysql - MySQL MEMORY @@max_heap_table_size 在批处理文件中没有注意到

> ID：15311741
> 
> 赞同：1
> 
> 时间：2013-03-09T14:23:39.310
> 
> 标签：mysql

我有一个大于 16MB 的表，所以我点击了 ERROR 1114: The table xxx is full。当做一个

```
 CREATE tableX engine=memory SELECT * from tableY; 
```

所以在工作台我正式进入

```
 set@@max_heap_table_size = 64000000; 
```

然后我的 CREATE 工作正常。

但是，当我将进程迁移到批处理文件调用时，MySQL 仍然认为我的表是 16MB。

我很困惑，但我确信这是我对 MySQL 架构缺乏了解。任何知情人士的建议，将一如既往地不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:48:40.217

以这种方式设置的变量在服务器重新启动时不会保留。要将其始终设置为此值，请将其放在`my.cnf`/`my.ini`文件中。

# ruby - 无法理解 Ruby 中 Object#taint 和 Object#trust 之间的区别

> ID：15311746
> 
> 赞同：0
> 
> 时间：2013-03-09T14:23:50.863
> 
> 标签：ruby, ruby-1.9.3

下面的 Object#methods 有何不同？

*   *污点和信任*
*   *不污染和不信任*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:36:47.907

**注意：**正如@themarketka 所指出的，从 Ruby 2.2.2 开始，信任已被弃用，并且等同于污染。

* * *

差异相当奇怪，并且没有特别好的记录。

注意：在 $SAFE 级别 0 上，这些标记都没有任何作用。

# 污染

污染的概念是一个对象是否来自可信来源。从标准输入输入的字符串被污染，但刚刚分配的字符串没有。在更高的安全级别上，禁止对受污染数据进行各种潜在危险操作（抛出`SecurityException`）。`eval`,等操作`system`。此外，污染可以从所谓的“子”对象继承：

```
2.0.0p0 :001 > s = "Hi!"
 => "Hi!"
2.0.0p0 :002 > s.taint
 => "Hi!"
2.0.0p0 :003 > (s + "World").tainted?
 => true 
```

因此，如果我在更高的安全级别上执行类似`system("rm -rf #{gets.chomp}")`( **DO NOT EXECUTE**`"rm -rf #{...}"` ) 的操作，Ruby 会抱怨我的未污染字符串 ( ) 和受污染的字符串 ( `gets.chomp`) 的组合创建了一个受污染的字符串。

# 相信

与污染不同，信任适用于代码和对象。所有正在运行的代码要么受信任，要么不受信任，所有对象要么受信任，要么不受信任。不受信任的代码只能修改不受信任的对象。不受信任的代码只能创建不受信任的对象。在安全级别 0-2 创建的代码和对象是受信任的，但在 $SAFE 级别 3 或 4 运行或创建的任何内容都是不受信任的，并且只能修改不受信任的对象。

# 区别

污染和信任之间的区别是微妙的。污染是关于您可以对数据执行哪些*操作，但信任是关于您可以**访问*哪些数据。它们保护系统的不同部分。此外，虽然污染总是存在，并且被污染的对象可以存在于任何安全级别，但信任仅在所谓的“沙盒”$SAFE 级别 3 和 4 中发挥作用，这些级别几乎专门用于沙盒外部代码。

# python - django 获取未观看的项目

> ID：15311747
> 
> 赞同：0
> 
> 时间：2013-03-09T14:24:01.140
> 
> 标签：python, django, django-queryset

```
class Photo(models.Model):
    ...    
    viewsT = models.ManyToManyField('PhotoViewT', symmetrical=False)
    ...

class PhotoViewT(models.Model):
    user = models.ForeignKey(User)
    creationdate = models.DateTimeField() 
```

我将照片的信息存储在“Photo”表中，并将有关视图的信息存储在“PhotoViewT”表中（这里是观看照片的“用户”和观看照片时的“创作​​日期”）。在“照片”上，我有 m2m 视图字段，我在其中添加有关所有视图的信息。

我的任务是获取照片，这些照片尚未被当前定义的用户观看。我不知道如何制作这个查询。

就像是

```
Photo.objects.filter(viewsT__user__doesnt_contain=targetUser) 
```

上面的表达式几乎不起作用。有什么解决办法吗？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:47:24.150

参考[文档](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)。尝试

```
Photo.objects.exclude(viewsT__user=targetUser) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:38:46.103

`Photo.photoviewtset.all()``PhotoViewT`将获取与该关联的所有实例`Photo`。

`Photo.photoviewtset.filter(user=<your_current_user)`将获取与您过滤的所有`PhotoViewT`实例相关联的实例。`Photo``current_user`

注意：您不需要`Photo`模型中的 ManyToManyField

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T14:41:25.547

```
 Photo.objects.exclude(viewsT__in=PhotoViewT.objects.filter(user=request.user))

 OR

 Photo.objects.filter(~Q(viewsT__in=PhotoViewT.objects.filter(user=request.user))) 
```

# mysql - 如何连接三个表以查看所有行

> ID：15311748
> 
> 赞同：1
> 
> 时间：2013-03-09T14:24:07.017
> 
> 标签：mysql, sql

我有三张桌子：

（域）

```
+----+-----+
| id |title|
+----+-----+
| 1  | com |
+----+-----+
| 2  | net |
+----+-----+ 
```

（板）

```
+----+-----+
| id |title|
+----+-----+
| 1  |str1 |
+----+-----+
| 2  |str2 |
+----+-----+ 
```

（价格）

```
+----+------+--------+
| id |slabid|domainId|
+----+------+--------+
empty 
```

这是我的查询：

```
SELECT
  prices.*, 
FROM
  prices 
  RIGHT JOIN domains ON domains.id=prices.domainId
  JOIN slabs ON slabs.id=prices.slabId 
```

我应该如何让查询按域和平板行列出...

结果应该是这样的：

```
+----+------+--------+
| id |slabid|domainId|
+----+------+--------+
| 1  |1     |1       |
+----+------+--------+
| 2  |2     |1       |
+----+------+--------+
| 3  |1     |2       |
+----+------+--------+
| 4  |2     |2       |
+----+------+--------+ 
```

但事实并非如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T14:26:48.937

一个`INNER JOIN`就可以满足你的需要。如果表上的一个字段可以`prices`为*空*，并且您想显示表上的所有记录，无论它在另一个表上是否有匹配的行，请使用`LEFT JOIN`.

`INNER JOIN`只有在每个表上至少有一个匹配项时才会显示该记录。`LEFT JOIN`另一方面，while将在*左侧*显示所有行，无论它在其他表上匹配还是不匹配。

```
SELECT  a.*,
        b.title domainTitle,
        c.title slabsTitle
FROM    prices a
        INNER JOIN domain b
            ON a.domainID = b.id
        INNER JOIN slab c
            ON a.slabID = c.ID 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

**更新 1**

你需要使用`CROSS JOIN`这个，因为你需要两个表的乘积，假设你想把它插入到表上`prices`并且`ID`是*Identity*或者`AUTO_INCREMENTed`column，

```
INSERT INTO prices (slabid, domainid)
SELECT  b.ID as slabID, a.ID as domanID
FROM    domains a
        CROSS JOIN slabs b 
```

如果`ID`表中的价格列不是 auto_incremented 并且您正在使用`mysql`，请使用变量来保存值的增量，

```
SELECT  @ID:=@ID+1 ID,
        b.ID as slabID, 
        a.ID as domanID
FROM    domains a
        CROSS JOIN slabs b
        CROSS JOIN (SELECT @ID:=0) s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:56:05.903

*只需将DOMAINS*与*SLABS*表交叉连接即可。不确定为什么 PRICES 表在这里起作用，因为您只想将 DOMAINS 表中的行与 SLABS 表中的行置换。

# java - 允许 HTTPS 连接到端口 443 上的 payseal.icicibank.com

> ID：15311749
> 
> 赞同：0
> 
> 时间：2013-03-09T14:24:09.940
> 
> 标签：java, linux, port, payment-gateway, redhat

我有一个 java 应用程序，我正在将 ICICI 支付网关集成到我的 java 应用程序中。

要集成，我必须允许 HTTPS 连接到端口 443 上的 payseal.icicibank.com。

我怎样才能在linux服务器上做到这一点？

在我的 Windows 机器上，我成功地集成了网关而没有配置端口 443，但在 linux 服务器上我发现了一些困难。我收到错误

```
Error encountered. Error Code : 2 . Message Error while writing data. Transaction cannot be processed 
```

如何检查我的 linux 服务器是否允许 HTTPS 连接到端口 443 上的 payseal.icicibank.com？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T14:31:14.963

解决了。这是服务器上的DNS问题。

# jquery - jQuery - 在某个点隐藏具有左侧效果的元素

> ID：15311750
> 
> 赞同：0
> 
> 时间：2013-03-09T14:24:16.630
> 
> 标签：jquery

使用此代码

```
<script src="http://jquery-ui.googlecode.com/svn/tags/latest/ui/jquery.effects.core.js"></script>
<script src="http://jquery-ui.googlecode.com/svn/tags/latest/ui/jquery.effects.slide.js"></script>
$('#hello').hide('slide', {direction: 'left'}, 1000); 
```

文本到达屏幕左侧时会消失，但我希望它以 20px 的差异消失，因此文本会在到达屏幕左端之前消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:56:27.737

似乎 JQuery animate 在这里真的会帮助你：

```
 var NumberOfMilliseconds = 500;
 $('#hello').animate({left: '20px'}, NumberOfMilliseconds, function() {
    $(this).hide();
 }); 
```

这会将您的元素移动到距屏幕左侧 20px 的位置（只要它是绝对定位的），然后回调函数将在该点隐藏它。JQuery 有很多内置函数，你应该在某个时候通读它们：http: [//api.jquery.com/](http://api.jquery.com/)

# windows-phone-7 - 在参考 XNA WP7 中找不到 Microsoft.Phone

> ID：15311751
> 
> 赞同：0
> 
> 时间：2013-03-09T14:24:16.813
> 
> 标签：windows-phone-7, xna

我想使用 XNA for WP7 打开 Web 浏览器，来自[This Post](https://stackoverflow.com/questions/4145836/launch-internet-explorer-from-xna-game-on-wp7)我想我必须使用它`WebBrowserTask`来执行此操作，但我不知道如何添加`Microsoft.Phone`

我试图右键单击引用，但找不到引用`Microsoft.Phone` 我尝试在我的代码中键入它，但它仍然不起作用..有人知道为什么吗？我在正确的轨道上吗？

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Input.Touch;
using Microsoft.Xna.Framework.Media;
using Microsoft.Phone; // <-- Error here 
```

我将 VS 2010 Express 用于 windows phone、WP SDK 7.1.1 和 Windows 8 Pro

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:05:14.617

好的，在我的电脑上，这个库位于这里：

```
C:\Program Files\Reference Assemblies\Microsoft\Framework\Silverlight\v4.0
  \Profile\WindowsPhone71\Microsoft.Phone.dll 
```

您可以从解决方案资源管理器中添加它：

```
References -> Add reference -> Browse 
```

然后将路径粘贴到文件名文本框中。

# groovy - SOAPUI Groovy - 在另一个测试用例中更新 XML 请求

> ID：15311753
> 
> 赞同：0
> 
> 时间：2013-03-09T14:24:18.310
> 
> 标签：groovy, soapui

我的套件中有 2 个测试用例。第一个测试用例包含 1 个带有 xml 请求的测试步骤。第二个测试用例包含 1 个带有 groovy 脚本的测试步骤。我想多次从这个 groovy 脚本运行第一个测试用例。每次我想更改输入 XML。我无法更新 TestCase 1 中的输入 XML。我有以下 groovy 脚本的代码：

```
import com.eviware.soapui.support.XmlHolder
def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context);
def tsuite = testRunner.testCase.testSuite
def acctInq_tstepName = tsuite.getTestCaseAt(1).getTestStepAt(0).getName()
def acctInq_requestHolder = tsuite.getTestCaseAt(1).testSteps[acctInq_tstepName].testRequest.getRequestContent()
def acctInq_req = groovyUtils.getXmlHolder("$acctInq_requestHolder")
acctInq_req["//soapenv:Envelope[1]/soapenv:Body[1]/v2:AcctInqRq[1]/ifx:DepAcctId[1]/ifx:AcctId[1]"] = "0009917812344"
acctInq_req.updateProperty() 
```

我也尝试过使用

```
tstep.setPropertyValue("request",cStr(acctInq_req)) 
```

无论哪种情况，XML 都不会更新。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-04T15:24:52.967

尝试如下设置节点值并检查它是否解决了问题：

```
acctInq_req.setNodeValue("//*:ifx:AcctId[1]", "0009917812344") 
```

# javascript - 仅当包含他的 div 变得可见时才加载 php 页面

> ID：15311755
> 
> 赞同：0
> 
> 时间：2013-03-09T14:24:55.117
> 
> 标签：javascript, hidden, visible

我制作了某种购物车，当我按下表格线时，它假设打开有关该项目的一些详细信息，为此我使用了一个高度为 0 且最初隐藏的 div，其中包含详细信息，问题是我认为无论是否按下该行，浏览器都会加载信息页面。有没有办法让浏览器仅在他的 DIV 可见时才加载页面？

```
 $int = 0;
            echo "<table class=\"result_table\" id=\"result_table\">";
    foreach($types as $data){
        echo "<tr onClick=\"present(".$int.");\" >";
        echo "<td align=\"right\">";
        echo $data['number'];
        echo "</td>";
        echo "<td align=\"right\">";
        echo $data['item_name'];
        echo "</td>";
        echo "<td align=\"right\">";
        echo $data['amount'];
        echo "</td>";
        echo "<td align=\"right\">";
        echo "17";
        echo "</td></tr>";
        echo "<tr class=\"info_row\"><td colspan=\"4\"><div      id=\"div_num_".$int."\" style=\"height:0px\">
            <object type=\"text/html\" data=\"page.php\"            style=\"width:100%; height:100%; margin:0%;\">
            </div></td></tr>";
        $int++;
    }
    echo "</form></table>"; 
```

行的 CSS

```
.info_row{
    visibility:hidden;
} 
```

JS：

```
function present(item_id){  
    var div = document.getElementById("div_num_"+item_id);

    if(div.style.visibility=="visible"){
        div.style.visibility = 'hidden';
        div.style.height= '0';
    } else {
        div.style.visibility = 'visible';
        div.style.height= "200px";      
    }
} 
```

正如您可以看到页面加载的所有信息但不可见。解决这个问题的其他好方法将被应用，特别是如果它不包括 jquery，因为我不是很擅长它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:50:46.360

您可以使用 ajax 调用：

用 javascript

```
<script type="text/javascript">
function loadInfoRow()
{
var xmlhttp;
xmlhttp=new XMLHttpRequest();
xmlhttp.onreadystatechange=function()
{
   if (xmlhttp.readyState==4 && xmlhttp.status==200)
   {
     var responseText = xmlhttp.responseText;
     //Use the response text to add the extra row
   }
}
xmlhttp.open("GET","info.txt",true);
xmlhttp.send();
}
</script> 
```

用jQuery

```
$.ajax({
  url: "info.txt",
  context: document.body,
  success: function(text){
    //where text will be the text returned by the ajax call
    $(".result_table).append(text);
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T14:45:54.230

首先，如果没有太多要加载的信息，那么预加载数据可能更明智。用户想要一个响应式 UI，即使这意味着他们永远不会看到数据的初始下载时间要多几毫秒。

但是，如果您坚持单独加载数据，您可以使用 an`xmlhttprequest`来加载数据的表示形式（例如 JSON 格式），并使用[模板解决方案](https://github.com/jsweeneydev/HTMLTemplate)将结果输出到 info div。

可能生成数据的 JSON 表示的页面可能如下所示：

```
<?php
    $result = array();

    // ... Code that defines type ... //

    $int = 0;
    foreach($types as $data){

        $result[] = array(
            "int"       => $int,
            "number"    => $data["number"],
            "item_name" => $data["item_name"],
            "amount"    => $data["amount"]
        );

        $int++;
    }

    echo json_encode($result);
?> 
```

因此，当用户单击链接时，上述页面将以`xmlhttprequest`. 然后，您可以使用 解析结果`JSON.parse(req.responseText)`，并将 HTML 模板应用于结果（查看上面的链接[以及这个](http://handlebarsjs.com/)链接，以获取有关如何执行此操作的更多信息）。

同样，您可能只需一次加载所有数据就可以了。额外的 HTTP 标头实际上使页面需要更长的时间才能完全加载。

# css - 尽管有 CSS 样式，但 Jquery 移动响应表不是 100% 宽度

> ID：15311756
> 
> 赞同：4
> 
> 时间：2013-03-09T14:24:57.797
> 
> 标签：css, jquery-mobile

尽管有说明，有人可以帮我确定响应表不是全宽的原因吗？

请检查此文档页面以了解页面上第一个表中发现的问题， http: [//view.jquerymobile.com/1.3.0/docs/widgets/table-reflow/](http://view.jquerymobile.com/1.3.0/docs/widgets/table-reflow/)。

在 css 中，它应用了 width=100%，但表格不是全宽。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-09T21:06:09.553

看来我发现了问题。该表有这个CSS

```
.ui-table-reflow.ui-responsive {
 display: table-row-group;
} 
```

如果您删除它或更改为 display:table。表格开始占据整个宽度。

# java - Java 抽象类字段覆盖

> ID：15311757
> 
> 赞同：12
> 
> 时间：2013-03-09T14:25:09.140
> 
> 标签：java, class, overriding, field, abstract

我有一个应该实现公共字段的抽象类，这个字段是一个接口或另一个抽象类。

像这样的东西：

```
public abstract class GenericContainer {
    public GenericChild child;
}

public abstract class GenericChild {
    public int prop1=1;
}

public abstract class SpecialChild extends GenericChild {
    public int prop1=2;
} 
```

现在我有另一个专门的类容器：

```
public abstract class SpecialContainer extends GenericContainer {
    public SpecialChild child=new SpecialChild(); //PAY ATTENTION HERE!
} 
```

Java 允许我编译它，并且我想象中的字段`child`会`SpecialContainer`自动重载...的字段`child`。`GenericContainer`问题是：我是对的吗？孩子的自动“超载”会发生吗？

而且，更重要的问题是，如果我还有这样的课程：

```
public class ExternalClass {
    public GenericContainer container=new SpecialContainer();
    public int test() {
         return container.child.prop1
    }
} 
```

`test()`会返回 1 还是 2？我的意思是`GenericContainer`容器字段`prop1`，通用的还是特殊的？如果特殊的 prop1 被声明为 String （是的，java 允许我在这种情况下也可以编译）怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-09T14:29:23.553

在 Java 中，数据成员/属性不是多态的。重载意味着字段将具有不同的值，具体取决于访问的类。子类中的字段会**隐藏**超类中的字段，但两者都存在。**字段基于引用类型调用，而方法使用实际对象**。你可以自己试试。

它被称为变量隐藏/阴影，有关更多详细信息，请参见[此处](http://www.xyzws.com/Javafaq/what-is-variable-hiding-and-shadowing/15)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-09T14:33:45.863

它没有覆盖任何东西，您只是将原始字段隐藏在当前类范围内。如果您使用带有子类型的变量，您仍然可以访问原始属性。例子：

```
abstract class GenericContainer {
    public GenericChild child;       
}

abstract class GenericChild {
    public int prop1=1 ;
}

class SpecialChild extends GenericChild {
    public int prop1=2;
}

class SpecialContainer extends GenericContainer {
    public SpecialChild child;
}

public class Main {

    public static void main( String ... args ) {

        GenericContainer container = new SpecialContainer();
        container.child = new SpecialChild();

        System.out.println( container.child.prop1 );

        SpecialChild child = (SpecialChild) container.child;        
        System.out.println( child.prop1 );
    }

} 
```

这会打印 1，然后打印 2。

您`SpecialChild`还可以使用以下方法提升一级`super`：

```
class SpecialChild extends GenericChild {
    public int prop1=2;

    public int getOriginalProp1() {
        return super.prop1;
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T14:27:21.030

关于

> ....我想象一下 SpecialContainer 中的“child”字段会自动重载 GenericContainer 的“child”字段...

不，字段不会被覆盖，只有方法会。

这就是为什么首选使用（可覆盖的）getter 和 setter 方法而不是直接访问字段的原因之一。您的字段几乎都应该是私有的。

至于您的设计，您的 SpecialContainer 类不需要具有 SpecialChild 字段，而是应该将 SpecialChild 对象放在 GenericChild 字段中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-09T15:25:48.067

**为什么没有人观察该程序会抛出`NullPointerException`.** 具有相同名称的子类`field`将隐藏超类的`field`. 没有`overriding`with `field`。覆盖只能使用方法。

作者的原始代码：

```
public abstract class GenericContainer {
    public GenericChild child;
}

public abstract class GenericChild {
    public int prop1=1;
}

public abstract class SpecialChild extend GenericChild {
    public int prop1=2;
}

public abstract class SpecialContainer extends GenericContainer {
    public SpecialChild child=new SpecialChild(); //PAY ATTENTION HERE!
}

public class ExternalClass {
    public GenericContainer container=new SpecialContainer();
    public int test() {
         return container.child.prop1
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-09T14:43:40.080

为了回答您的问题，它维护了这两个实例。并且根据您引用容器的方式（通过抽象或 impl）确定您引用的变量。

```
public class Test {

   public abstract class Container{
       public Generic gen = new Generic();
   }

   public class ContainerImpl extends Container{
       public GenericImpl gen = new GenericImpl();
   }

   public class Generic{
       public int prop = 0;
   }

   public class GenericImpl extends Generic{
       public int prop = 1;
   }

   public Test(){
       Container c = new ContainerImpl();
       System.out.println(c.gen.prop); // Outputs "0"
       System.out.println(((ContainerImpl)c).gen.prop); // Output "1"
   }

   public static void main(String[] args) {
      new Test();
   }

} 
```

手头更大的问题是，你为什么要设计这样的东西？我假设你是从理论的角度来问的。

我的 2 美分，这不是很好的 OO 设计。您最好将公共变量设为私有并通过构造函数或属性设置器分配它们的值。照原样，它将导致您的代码出现意外结果。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-09T14:27:54.813

> Java允许我编译这个，我想象SpecialContainer中的“child”字段自动重载GenericContainer的“child”字段......

首先，**继承**不适用于变量。字段（Insatnce 变量）不会在您的子类中被覆盖。它们仅在您的子类中标有 时才可见`public, protected or default`。

# ruby-on-rails - form_for ArgumentError - 参数数量错误（3 比 1）

> ID：15311766
> 
> 赞同：0
> 
> 时间：2013-03-09T14:26:41.590
> 
> 标签：ruby-on-rails

我的代码非常简单，但我不知道错误来自哪里。我正在访问 localhost:3000/clients/new 并出现错误`wrong number of arguments (3 for 1)`

**堆栈跟踪的顶部**

```
ArgumentError - wrong number of arguments (3 for 1):
  (gem) actionpack-3.2.12/lib/action_view/helpers/form_helper.rb:378:in `form_for'
  (gem) haml-3.1.8/lib/haml/helpers/action_view_mods.rb:183:in `form_for_with_haml'
  (gem) haml-3.1.8/lib/haml/helpers/xss_mods.rb:132:in `form_for_with_haml_xss'
  app/views/clients/new.html.haml:1:in `_app_views_clients_new_html_haml__386962141__622328728' 
```

**/app/controllers/clients_controller.rb**

```
class ClientsController < ApplicationController
  def new
    @client = Client.new
  end
end 
```

**/app/models/client.rb**

```
class Client < ActiveRecord::Base
  attr_accessible :name
end 
```

**/app/views/clients/new.html.haml**

```
= form_for @client, remote: true do |f|
  = f.text_field :name
  = f.submit 
```

如果我在 form_for 之前只检查 @client 一行，我会得到：

```
=> #<Client id: nil, name: nil, created_at: nil, updated_at: nil> 
```

任何帮助，将不胜感激。谢谢

编辑以简化代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T01:41:12.917

好的，修好了。即使它可能对你们大多数人没有用，我也会发布答案，但我希望它可以帮助一些人

错误来自于我创建了一个名为`fields_for`. 将我的函数名称更改为不同的名称可以解决问题。

如果有人可以解释：

为什么`fields_for`嵌套在我的模块中的自定义优先于`fields_for`actionpack？

还有为什么堆栈跟踪停止在该行`(gem) actionpack-3.2.12/lib/action_view/helpers/form_helper.rb:378`而不是显示`fields_for`声明 my 的行？

# excel - Excel VBA，验证字段是否大于零并将此行添加到另一个工作表

> ID：15311777
> 
> 赞同：2
> 
> 时间：2013-03-09T14:27:56.040
> 
> 标签：excel, vba

我有两张纸，第一张有以下字段：

**表01**

```
Code | Description    | Amount |
0f15 | Description 01 | 05     |
0f04 | Description 02 | 00     |
0rt7 | 03 Description |        |
0rt7 | Description 04 | 07     | 
```

我需要的是，当用户输入的金额大于 00（1,2,3,4,5 ...）时，整行将插入到另一个包含相同字段的工作表中，但如果数量为零 (0) 或为空，未添加到下一回合的另一个工作表起始行。

**工作表02**

```
Code | Description    | Amount |
0f15 | Description 01 | 05     |
0rt7 | Description 04 | 07     | 
```

* * *

![示例图像](../Images/a61134e4ff0ea02c39ad837b168e3878.png)

大家好，感谢您的回复，但是我无法应用其中任何一个。我会尝试更好地解释：

当在 Sheet1 的 H 列中输入非零值（并且不同于空白区域）时，包含该值的整行应复制到 Sheet2 的相应单元格中，类似于添加产品的发票，其金额为非零。我知道这是可能的，只是不知道该怎么做，因为我是 VBA 的外行。如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:20:42.673

您可以在第一个工作表 _Change 事件中尝试此代码。

```
Private Sub Worksheet_Change(ByVal Target As Range)
  On Error Resume Next
  If Target.Column <> 3 Or Target.Value = 0 Or Target.Value = "" Then
      Exit Sub
  End If
  Dim sht1 As Worksheet
  Dim sht2 As Worksheet
  Set sht1 = ActiveSheet
  Set sht2 = ThisWorkbook.Sheets("Sheet2")
  Target.EntireRow.Copy
  Dim iRow As Integer
  Dim rng As Range
  Application.ScreenUpdating = False
  sht2.Activate
  iRow = sht2.Range("A" & sht2.Rows.Count).End(xlUp).Row + 1
  Set rng = sht2.Range("A" & iRow)
  rng.Select
  sht2.Paste
  sht1.Activate
  Application.CutCopyMode = False
  Application.ScreenUpdating = True
End Sub 
```

# architecture - 对可扩展性感到困惑

> ID：15311781
> 
> 赞同：1
> 
> 时间：2013-03-09T14:28:12.660
> 
> 标签：architecture, scalability

根据这句话，如果我设计一个可扩展的架构，它会在需要时进行扩展，无论技术如何。

```
Languages, libraries and frameworks don't scale. Architectures do. 
```

根据[维基百科的可扩展性页面](http://en.wikipedia.org/wiki/Scalability)，可扩展性与硬件（节点和内存）有关。

规模是什么意思，什么时候应用程序真正可扩展？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:20:16.673

可扩展性通常是分布式系统的一个属性，其中有多个用户（例如网站），但这不是必需的。可扩展性可能涉及硬件选项（例如，增加服务器内存或 CPU 能力以同时处理更多用户），但在您的情况下，我认为这句话的意思是您应该使用架构（软件架构）来开发您的软件独立于用于构建该软件的工具（因此是语言、框架和库）。例如，使用分层架构或其他使应用程序可扩展的著名软件架构来开发您的软件。 *注意：*这是我的个人观点，并不基于任何正式或科学的定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T06:54:21.370

“语言、库和框架无法扩展。架构可以。”

这是一个真实的陈述。因为，语言、库和框架应该被视为架构实现的“工具”。

让我详细解释一下，在良好的架构中——组件（如语言、框架等）可以替换或互换。例如，许多开源项目实现都以不同的语言提供。

就这些架构的可扩展性而言，因为这些架构是建立在语言/框架/库的共同特征集之上的——这些架构可以很好地扩展。

请注意，系统的性能与系统的可扩展性有很大不同。

# xml - kml 多边形和标记在一起

> ID：15311784
> 
> 赞同：0
> 
> 时间：2013-03-09T14:28:32.427
> 
> 标签：xml, google-maps-api-3, google-maps-markers, kml, polygons

我已经用我的多边形（kml 文件）设置了地图 api v3，但现在我想将标记放在同一张地图上。标记（lat、lang）直接来自 MySQL 数据库。

这是我的页面的代码：

```
<?
require("markers/dbcon.php");
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" type="text/css" href="css2.css" media="screen" />
    <title>StanOnline</title>

<style type="text/css">
  html, body, #map_canvas {
width:   100%;
height:  100%;
margin:  0;
padding: 0;
   }
.infowindow * {font-size: 90%; margin: 0}
 </style>

    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">
    </script>
    <script type="text/javascript" src="http://geoxml3.googlecode.com/svn/branches/polys/geoxml3.js">
    </script>
    <script type="text/javascript" src="http://geoxml3.googlecode.com/svn/trunk/ProjectedOverlay.js">
    </script>
    <script language="JavaScript">
<!--Show / Hide div dmenu-->
function toggle(id) {
    var state = document.getElementById(id).style.display;
        if (state == 'block') {
            document.getElementById(id).style.display = 'block';
        } else {
            document.getElementById(id).style.display = 'none';
        }
    } 
</script>

    <script type="text/javascript">

    var geoXml = null;
    var geoXmlDoc = null;
    var map = null;
    var myLatLng = null;
    var myGeoXml3Zoom = true;
    var sidebarHtml = "";
    var infowindow = null;
    var kmlLayer = null;
    var preserveViewport = true;
    var filename = "http://mini.hr/stanonline/mo_bck.kml";
    var icon = new            google.maps.MarkerImage("http://localhost/projekt/7stanonline/img/punkt.gif",
    new google.maps.Size(32, 32), new google.maps.Point(0, 0),
    new google.maps.Point(16, 32));
    var currentPopup;

    function addMarker(lat, lng, info) {
var pt = new google.maps.LatLng(lat, lng);
bounds.extend(pt);
var marker = new google.maps.Marker({
    position: pt,
    icon: icon,
map: map
});
     var popup = new google.maps.InfoWindow({ 
     content: info,
     maxWidth: 200
     });
   google.maps.event.addListener(marker, "click", function() {
   if (currentPopup != null) {
   currentPopup.close();
   currentPopup = null;
     }
   popup.open(map, marker);
   currentPopup = popup;
    });
    google.maps.event.addListener(popup, "closeclick", function() {
    map.panTo(center);
    currentPopup = null;
     });
     }

   function MapTypeId2UrlValue(maptype) {
        var urlValue = 'm';
    switch(maptype){
  case google.maps.MapTypeId.HYBRID:    urlValue='h';
                    break;
  case google.maps.MapTypeId.SATELLITE: urlValue='k';
                    break;
  case google.maps.MapTypeId.TERRAIN:   urlValue='t';
                   break;
  default:
  case google.maps.MapTypeId.ROADMAP:   urlValue='m';
                    break;
}
return urlValue;
}

function initialize() {
    myLatLng = new google.maps.LatLng(45.345537,14.439621);
  // these set the initial center, zoom and maptype for the map 
  // if it is not specified in the query string
  var lat = 45.345537;
  var lng = 14.439621;
  var zoom = 13;
  var maptype = google.maps.MapTypeId.ROADMAP;

  // If there are any parameters at eh end of the URL, they will be in  location.search
  // looking something like  "?marker=3"

  // skip the first character, we are not interested in the "?"
  var query = location.search.substring(1);

  // split the rest at each "&" character to give a list of  "argname=value"  pairs
  var pairs = query.split("&");
  for (var i=0; i<pairs.length; i++) {
    // break each pair at the first "=" to obtain the argname and value
var pos = pairs[i].indexOf("=");
var argname = pairs[i].substring(0,pos).toLowerCase();
var value = pairs[i].substring(pos+1).toLowerCase();

    // process each possible argname  -  use unescape() if theres any chance of spaces
    if (argname == "id") {id = unescape(value);}
    if (argname == "filename") {filename = unescape(value);}

    if (argname == "lat") {lat = parseFloat(value);}
    if (argname == "lng") {lng = parseFloat(value);}
    if (argname == "zoom") {
  zoom = parseInt(value);
  myGeoXml3Zoom = false;
}
    if (argname == "type") {
// from the v3 documentation 8/24/2010
// HYBRID This map type displays a transparent layer of major streets on satellite  images. 
// ROADMAP This map type displays a normal street map. 
// SATELLITE This map type displays satellite images. 
// TERRAIN This map type displays maps with physical features such as terrain and vegetation. 
      if (value == "m") {maptype = google.maps.MapTypeId.ROADMAP;}
      if (value == "k") {maptype = google.maps.MapTypeId.SATELLITE;}
      if (value == "h") {maptype = google.maps.MapTypeId.HYBRID;}
      if (value == "t") {maptype = google.maps.MapTypeId.TERRAIN;}

    }
  }
  if (!isNaN(lat) && !isNaN(lng)) {
    myLatLng = new google.maps.LatLng(lat, lng);
  }
            var myOptions = {
                zoom: zoom,
                center: myLatLng,
                // zoom: 5,
                // center: myLatlng,
                mapTypeId: maptype
            };
            map = new google.maps.Map(document.getElementById("map_canvas"),
                  myOptions);
            infowindow = new google.maps.InfoWindow({});

geoXml = new geoXML3.parser({
                map: map,
                infoWindow: infowindow,
                singleInfoWindow: true,
        zoom: myGeoXml3Zoom,

                afterParse: useTheData
            });

            geoXml.parse(filename);
    google.maps.event.addListener(map, "bounds_changed", makeSidebar);
    google.maps.event.addListener(map, "center_changed", makeSidebar);
    google.maps.event.addListener(map, "zoom_changed", makeSidebar);
  // Make the link the first time when the page opens
  makeLink();

  // Make the link again whenever the map changes
  google.maps.event.addListener(map, 'maptypeid_changed', makeLink);
  google.maps.event.addListener(map, 'center_changed', makeLink);
  google.maps.event.addListener(map, 'bounds_changed', makeLink);
  google.maps.event.addListener(map, 'zoom_changed', makeLink);
   <?
$query = mysql_query("SELECT * FROM poi_example");
while ($row = mysql_fetch_array($query)){
$name=$row['name'];
$lat=$row['lat'];
$lon=$row['lon'];
$desc=$row['desc'];
echo ("addMarker($lat, $lon,'<b>$name</b><br/>$desc');\n");
}
?>
center = bounds.getCenter();
  };

function kmlPgClick(pm) {
if (geoXml.docs[0].placemarks[pm].polygon.getMap()) {
  google.maps.event.trigger(geoXmlDoc.placemarks[pm].polygon,"click");
 } else {
  geoXmlDoc.placemarks[pm].polygon.setMap(map);
  google.maps.event.trigger(geoXmlDoc.placemarks[pm].polygon,"click");
 }  
 }
function kmlPlClick(pm) {
 if (geoXml.docs[0].placemarks[pm].polyline.getMap()) {
  google.maps.event.trigger(geoXmlDoc.placemarks[pm].polyline,"click");
 } else {
  geoXmlDoc.placemarks[pm].polyline.setMap(map);
  google.maps.event.trigger(geoXmlDoc.placemarks[pm].polyline,"click");
  }
 }

function kmlShowPlacemark(pm) {
 if (geoXmlDoc.placemarks[pm].polygon) {
map.fitBounds(geoXmlDoc.placemarks[pm].polygon.bounds);

} else if (geoXmlDoc.placemarks[pm].polyline) {
map.fitBounds(geoXmlDoc.placemarks[pm].polyline.bounds);
 }  

 for (var i=0;i<geoXmlDoc.placemarks.length;i++) {
 var placemark = geoXmlDoc.placemarks[i];
 if (i == pm) {
   if (placemark.polygon) placemark.polygon.setMap(null);
   if (placemark.polyline) placemark.polyline.setMap(map);

 } else {
   if (placemark.polygon) placemark.polygon.setMap(map);
   if (placemark.polyline) placemark.polyline.setMap(null);
   }
 }
 }

function kmlColor (kmlIn) {
  var kmlColor = {};
if (kmlIn) {
 aa = kmlIn.substr(0,2);
 bb = kmlIn.substr(2,2);
 gg = kmlIn.substr(4,2);
 rr = kmlIn.substr(6,2);
 kmlColor.color = "#" + rr + gg + bb;
 kmlColor.opacity = parseInt(aa,16)/256;
 } else {
// defaults
kmlColor.color = randomColor();
kmlColor.opacity = 0.45;
 }
return kmlColor;
 }

function randomColor(){ 
var color="#";
var colorNum = Math.random()*8388607.0;  // 8388607 = Math.pow(2,23)-1
var colorStr = colorNum.toString(16);
color += colorStr.substring(0,colorStr.indexOf('.'));
return color;
};

var highlightOptions = {fillColor: "#b9b8a2", strokeColor: "#000000", fillOpacity: 0.4,    strokeWidth: 10};
var highlightLineOptions = {strokeColor: "#000000", strokeWidth: 80};
function kmlHighlightPoly(pm) {
  for (var i=0;i<geoXmlDoc.placemarks.length;i++) {
 var placemark = geoXmlDoc.placemarks[i];
 if (i == pm) {
   if (placemark.polygon) placemark.polygon.setOptions(highlightOptions);
   if (placemark.polyline) placemark.polyline.setOptions(highlightLineOptions);
 } else {
   if (placemark.polygon) placemark.polygon.setOptions(placemark.polygon.normalStyle);
   if (placemark.polyline)      placemark.polyline.setOptions(placemark.polyline.normalStyle);
 }
 } 
 }
function kmlUnHighlightPoly(pm) {
  for (var i=0;i<geoXmlDoc.placemarks.length;i++) {
    if (i == pm) {
   var placemark = geoXmlDoc.placemarks[i];
   if (placemark.polygon) placemark.polygon.setOptions(placemark.polygon.normalStyle);
   if (placemark.polyline)        placemark.polyline.setOptions(placemark.polyline.normalStyle);
    }
 } 
 }

function showAll() {
 map.fitBounds(geoXmlDoc.bounds); //show all bounds
 map.setZoom(13);
for (var i=0;i<geoXmlDoc.placemarks.length;i++) {
 var placemark = geoXmlDoc.placemarks[i];
 if (placemark.polygon) placemark.polygon.setMap(map);
 if (placemark.polyline) placemark.polyline.setMap(map);

 }
 }

function highlightPoly(poly, polynum) {
//    poly.setOptions({fillColor: "#0000FF", strokeColor: "#0000FF", fillOpacity: 0.3}) ;
google.maps.event.addListener(poly,"mouseover",function() {
var rowElem = document.getElementById('row'+polynum);
if (rowElem) rowElem.style.backgroundColor = "#b9b8a2"; //ovo je boja u sidebar-u
if (poly instanceof google.maps.Polygon) {
  poly.setOptions(highlightOptions);
} else if (poly instanceof google.maps.Polyline) {
  poly.setOptions(highlightLineOptions);
}
});
google.maps.event.addListener(poly,"mouseout",function() {
var rowElem = document.getElementById('row'+polynum);
if (rowElem) rowElem.style.backgroundColor = ""; //pozadina nakon mouserover-a u  sidebar-u
poly.setOptions(poly.normalStyle);
});
 }  

// == rebuilds the sidebar to match the markers currently displayed ==
function makeSidebarPolygonEntry(i) {
var name = geoXmlDoc.placemarks[i].name;
if (!name  || (name.length == 0)) name = "polygon #"+i;
// alert(name);
sidebarHtml += '<tr id="row'+i+'"><td onmouseover="kmlHighlightPoly('+i+');"onmouseout="kmlUnHighlightPoly('+i+');"><a  href="javascript:kmlPgClick('+i+');">'+name+'</a> - <a     href="javascript:kmlShowPlacemark('+i+');">odaberi</a></td></tr>';

}
function makeSidebarPolylineEntry(i) {
var name = geoXmlDoc.placemarks[i].name;
if (!name  || (name.length == 0)) name = "polyline #"+i;
// alert(name);
sidebarHtml += '<tr id="row'+i+'"><td onmouseover="kmlHighlightPoly('+i+');"      onmouseout="kmlUnHighlightPoly('+i+');"><a    href="javascript:kmlPlClick('+i+');">'+name+'</a> - <a    href="javascript:kmlShowPlacemark('+i+');">show</a></td></tr>';

}

function makeSidebar() {
sidebarHtml = '<table><tr><td><a href="javascript:showAll();">Prika&#382i sve   kvartove</a></td></tr>';
 var currentBounds = map.getBounds();
// if bounds not yet available, just use the empty bounds object;
if (!currentBounds) currentBounds=new google.maps.LatLngBounds();
if (geoXmlDoc) {
 for (var i=0; i<geoXmlDoc.placemarks.length; i++) {
 if (geoXmlDoc.placemarks[i].polygon) {
  if (currentBounds.intersects(geoXmlDoc.placemarks[i].polygon.bounds)) {
     makeSidebarPolygonEntry(i);
  }
  }
  if (geoXmlDoc.placemarks[i].polyline) {
   if (currentBounds.intersects(geoXmlDoc.placemarks[i].polyline.bounds)) {
     makeSidebarPolylineEntry(i);
   }
  }

 }
 }
 sidebarHtml += "</table>";
  document.getElementById("sidebar").innerHTML = sidebarHtml;
 }

function useTheData(doc){
var currentBounds = map.getBounds();
if (!currentBounds) currentBounds=new google.maps.LatLngBounds();
// Geodata handling goes here, using JSON properties of the doc object
 sidebarHtml = '<table><tr><td><a href="javascript:showAll();">Show All</a></td></tr>';
 //  var sidebarHtml = '<table>';
geoXmlDoc = doc[0];
for (var i = 0; i < geoXmlDoc.placemarks.length; i++) {
// console.log(doc[0].markers[i].title);
var placemark = geoXmlDoc.placemarks[i];
if (placemark.polygon) {
  if (currentBounds.intersects(placemark.polygon.bounds)) {
    makeSidebarPolygonEntry(i);
  }
  var kmlStrokeColor = kmlColor(placemark.style.color);
  var kmlFillColor = kmlColor(placemark.style.fillcolor);
  var normalStyle = {
      strokeColor: kmlStrokeColor.color,
      strokeWeight: placemark.style.width,
      strokeOpacity: kmlStrokeColor.opacity,
      fillColor: kmlFillColor.color,
      fillOpacity: kmlFillColor.opacity
      };
  placemark.polygon.normalStyle = normalStyle;

  highlightPoly(placemark.polygon, i);
 }
 if (placemark.polyline) {
  if (currentBounds.intersects(placemark.polyline.bounds)) {
     makeSidebarPolylineEntry(i);
  }
  var kmlStrokeColor = kmlColor(placemark.style.color);
  var normalStyle = {
      strokeColor: kmlStrokeColor.color,
      strokeWeight: placemark.style.width,
      strokeOpacity: kmlStrokeColor.opacity
      };
  placemark.polyline.normalStyle = normalStyle;

  highlightPoly(placemark.polyline, i);
}

/*    doc[0].markers[i].setVisible(false); */
}
sidebarHtml += "</table>";
document.getElementById("sidebar").innerHTML = sidebarHtml;
};

function hide_kml(){

        geoXml.hideDocument();  

}

function unhide_kml(){

        geoXml.showDocument();  

}
function reload_kml(){
geoXml.hideDocument();
delete geoXml;
geoXml = new geoXML3.parser({
                map: map,
                singleInfoWindow: true,
                afterParse: useTheData,
                preserveViewport: true
 });
 geoXml.parse(filename); 

}

 function hide_polys_kml(){
 for (var i=0;i<geoXmlDoc.gpolylines.length;i++) {
   geoXmlDoc.gpolylines[i].setMap(null);
 }
 }

function unhide_polys_kml(){
 for (var i=0;i<geoXmlDoc.gpolylines.length;i++) {
   geoXmlDoc.gpolylines[i].setMap(map);
  }
 }
 function load_kmlLayer() {
 kmlLayer = new google.maps.KmlLayer(filename);
 google.maps.event.addListener(kmlLayer, "status_changed", function() {
   document.getElementById('kmlstatus').innerHTML = "Kml Status:"+kmlLayer.getStatus();
 });
 kmlLayer.setMap(map);
 }
 function hide_kmlLayer() {
 kmlLayer.setMap(null);
 }
 function show_kmlLayer() {
 kmlLayer.setMap(map);
 }

    </script>
</head>
<body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>

    <div id="dmenu">
        <div id="hidden"><a href="javascript:;" onclick="toggle('dmenu');">   <img src="img/x.png"></a></div>
        <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ODABERI KVART:
            <div id="sidebar">
    </div>
        </div>
            </div>
 </body>
</html> 
```

我将此代码添加到函数 initialize()

```
<?
$query = mysql_query("SELECT * FROM poi_example");
while ($row = mysql_fetch_array($query)){
$name=$row['name'];
$lat=$row['lat'];
$lon=$row['lon'];
$desc=$row['desc'];
echo ("addMarker($lat, $lon,'<b>$name</b><br/>$desc');\n");
}
?>
center = bounds.getCenter(); 
```

并添加了您可以在上面的代码中看到的函数 addMarker

代码中的错误或缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:26:22.420

在同一张地图上当然可以有多边形和标记。

1.  您不应将生成的 HTML 添加为问题的“答案”，而应编辑问题以添加它。
2.  你有 javascript 错误
    *   没有函数 makeLink
    *   未定义边界。
3.  您的 addMarkers 函数没有定义图标。

kml 很好：

[http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/mini_hr_stanonline_mo_bck.kml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/mini_hr_stanonline_mo_bck.kml)

修复这些[错误使它对我有用](http://www.geocodezip.com/geoxml3_test/v3_SO_geoxml3_markersPolygons.html)

# php - 使用 codeigniter 以单一形式提交不同类型的输入

> ID：15311788
> 
> 赞同：0
> 
> 时间：2013-03-09T14:29:05.030
> 
> 标签：php, codeigniter

这就是我想要做的......我正在创建一个表单，用于上传 zip 文件和输入名称、数字等数据......我可以使用 codeigniter 吗？如果有人可以提出可能的解决方案，那将非常有帮助....提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:35:20.793

您可以使用 CodeIgniter 的[文件上传类](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)。您可以按照那里的教程设置上传表单以及其他输入。请注意，要上传某些内容，您必须使用`form_open_multipart`而不是`form_open`.

# javascript - JSP 隐藏字段在 servlet 中产生 null

> ID：15311797
> 
> 赞同：0
> 
> 时间：2013-03-09T14:29:39.770
> 
> 标签：javascript, jsp, servlets, null, hidden

我在表单中有一个隐藏字段，其值由 javascript 设置。我已经确认该值确实已设置。但是，当我尝试将其发送到 servlet 时，它会产生一个空值。我确实使用 POST 方法和“提交”按钮提交给 servlet。该值是通过用户在“qtyText”文本框中输入获得的。在 JS 中，它的值是动态设置的。为什么它不会被发送到 servlet？JS

```
 function(calculateTotalPrice(txtbxvalue, price)
  {
   myForm = document.forms[0];        
      var txtBx = myForm.elements['qtyText'];
      var txtBxHidden = myForm.elements['qtyTextHidden'];
      for(var i = 0; i < txtBx.length; i++) 
         {
          var curTxtBx = txtBx[i].value; 
          var txtBxHiddenBx = txtBxHidden[i];
           txtBxHiddenBx.value = curTxtBx;
         }
   } 
```

HTML

```
<table>

   <c:forEach items="${ListInServlet}" var= "exBean">
  <form name = "tableForm" method = "post" action= "/rpsapp/someservlet">
    <input type="hidden" name="productId" value= "<c:out Value 
                                          = "${exBean.productId}"/>"  />
         <input type="hidden"  value = "somevalue" name="qtyTextHidden"/>
         <input name = "qtyText" type = "textbox" size = "2" value = "" onChange 
                              = "calculateTotalPrice(this, '${exBean.price}')"/>

   </c:forEach>
  </form>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:37:22.637

您的 foreach 语句（标签）与表单标签重叠。

您需要具有以下格式：

```
<c:forEach ...> <form ...> ... </form> </c:forEach> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:42:59.377

您必须创建与产品一样多的隐藏变量。

```
 <form name = "tableForm" method = "post" action= "/rpsapp/someservlet">
   <c:forEach items="${ListInServlet}" var= "exBean">
    <input type="hidden" name="productId${exBean.productId}" value= "<c:out Value 
                                          = "${exBean.productId}"/>"  />
         <input type="hidden"  value = "somevalue" name="qtyTextHidden${exBean.productId}"/>
         <input name = "qtyText${exBean.productId}" type = "textbox" size = "2" value = "" onChange 
                              = "calculateTotalPrice(this, '${exBean.price}')"/>

   </c:forEach>
  </form> 
```

# javascript - Wordpress - 重力形式 - 如何启用 JavaScript 验证？

> ID：15311800
> 
> 赞同：2
> 
> 时间：2013-03-09T14:29:52.200
> 
> 标签：javascript, wordpress, forms, validation, gravity

有谁知道我如何在 Gravity 表单中启用 JS 验证？

我已将我的 3 个字段中的每一个都标记为“必填”，但是当我提交一个空表单时，仍然需要不必要地访问服务器，因为客户端似乎没有执行 JavaScript 验证。

这是我尝试过的简码：

```
 [gravityform id="1" title="false" description="true" ajax="true"]
[gravityform id="1" title="false" description="true" ajax="false"] 
```

我已经四处搜索，但在任何地方都找不到任何信息。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:40:07.407

除非您实现一个在发布到服务器之前验证的客户端库，否则您永远不会得到您正在寻找的结果。那里有几个图书馆。

[https://github.com/DiegoLopesLima/Validate](https://github.com/DiegoLopesLima/Validate)

根据文档，您可以使用必需的标签标记表单字段输入。它还支持其他几种验证类型。然后，在您发布之前，验证您的整个表单：

```
jQuery('form').validate(); 
```

它似乎是一个相当全面的库。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T14:32:55.880

AFAIK，您无法启用它，您必须从编辑页面将类应用于表单字段并编写自己的 JS 进行验证或使用[`validation`](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)库。

注意：我用了 GF 快 6 个月了，我不知道他们的新版本是否支持前端验证

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-26T13:11:08.033

我编写了一个插件，您可以使用它来启用重力表单的 jQuery 验证。你可以在这里查看演示。[https://demos.dnesscarkey.com/jquery-validation-for-gravity-forms/](https://demos.dnesscarkey.com/jquery-validation-for-gravity-forms/)

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T18:29:08.230

当您说没有任何验证时，您的意思是您将必填字段保持打开状态并且它只是重新加载页面而不显示验证错误？

使用新的 Woocommerce 2.0.X，验证消息在 Gravity Forms 中被破坏。我有 Woocommerce 1.XX 和 Gravity Forms，它们运行良好。由于升级 Woocommerce 验证消息不再显示。表单没有提交，它只是重新加载页面，没有任何迹象表明发生了什么。我在 Gravity Forms 论坛上发布了一个帖子，他们确定它是 Woocommerce，我在一个旧网站上做了一些测试，该网站有两个插件的旧版本，我同意，它是 Woocommerce，而不是 Gravity Forms。耶，Woocommerce！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-12T12:05:39.007

如前所述，似乎 Gravity Forms 不处理开箱即用的前端验证

遇到了同样的问题，我使用[jquerv 验证](https://jqueryvalidation.org/)插件和以下代码片段解决了它

* * *

在您的 functions.php 文件中

```
add_action('gform_pre_enqueue_scripts',function(){
    wp_enqueue_script('jquery-validate','https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/jquery.validate.min.js', ['jquery'], );
}); 
```

然后在您的自定义 javascript 文件中（如果您还没有，则必须创建一个并将其排入队列）

```
(function($) {

  /**
   * Checks if the jquery-validate library is loaded
   */
  if ( !$.validator instanceof Function) {
    return;
  }

  $('form[id*=gform_]').each(function() {
    var validationOptions = {
      rules: {},
    };
    $(this).find('.gfield_contains_required input').each(function(i) {

      var ruleName = $(this).attr('name');

      if (validationOptions.rules.hasOwnProperty(ruleName)) {
        return;
      }

      validationOptions.rules[ruleName] = {
        required: true,
      };
    });
    if (Object.keys(validationOptions.rules).length > 0) {
      $(this).validate(validationOptions);
    }
  });
})(jQuery) 
```

这将搜索每个重力表单元素，并为表单创建者上已标记为必填的字段设置必填规则

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-01-29T06:16:05.117

此链接可能对您有所帮助： [在此处输入链接描述](http://www.parorrey.com/blog/front-end-development/wordpress-gravity-forms-validation-on-client-side-using-jquery/)

或者您可以在将此代码放入您的 function.php 后尝试此操作

```
<?php function comment_validation_init() {
if(is_page(14))
{
    ?>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script>
    <script type="text/javascript">
    jQuery(document).ready(function($) {
    $('#gform_1').validate({

    rules: {
      input_1: {
        required: true,
      },input_6: {
        required: true,
        email: true
      },

      input_3: {
        required: true,
      }
    },

    errorElement: "div",
    errorPlacement: function(error, element) {
      element.before(error);
    }

    });
    });
    </script>
    <?php
}}add_action('wp_footer', 'comment_validation_init');?> 
```

# java - 这个特定的内部非静态类是否有很大的开销？

> ID：15311803
> 
> 赞同：2
> 
> 时间：2013-03-09T14:29:59.833
> 
> 标签：java, inner-classes, premature-optimization

我正在为学校作业编写我自己的双向链表实现，我使用了一个`Node`在列表类内部调用的内部节点类，它表示相互链接的列表节点（通常是链表的情况）。

```
class DoublyLinkedList<T>
{
    class Node
    {
        T obj;
    }
} 
```

我想知道，对于具有许多节点的大型列表，由于每个`Node`对象都可能引用父列表类的一个实例，这是一个显着的开销和次优设计吗？作为一个非静态类肯定很方便——然后节点可能会改变父列表`first`和`last`引用，我发现它们非常适合封装。

如果我`Node`设为静态，它就不能再（没有对列表的显式成员引用）用于操作父列表`first`，`last`并且我必须从其他方式处理它 - 列表将通过自己的方法分配和操作节点，也就是将它们相互链接，取消链接并自然调整其`first`和`last`值。

为了良好的设计和学习，我想知道**The Smart Thing To Do (c)**（如果有的话）是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T14:33:57.023

如果内部类不是`static`，则对父类的隐式引用已经存在，您可以`DoublyLinkedList.this`从内部`Node`类中引用它。

无论如何，我不明白为什么一个`Node`类应该能够直接修改其父类的属性。改变列表的方法（如此`first`和`last`同样）应该是`DoubleLinkedList`类的，而不是直接的`Node`类。这正是为了封装，一个`Node`实例不应该知道它包含在哪里或如何从外部使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T14:35:45.603

开销将恰好是每个节点的一个引用。假设除了有效负载之外的节点还具有先前链接和反向链接，对父节点的额外引用的开销将在额外内存使用中达到约 33%（在 3 个现有引用之上的 1 个引用）。这是相当大的开销，尤其是对于大节点数和小负载。另一方面，对于更大的有效载荷，这并不重要。

In general, though, I would not make an assumption about the payload size, and make the Node class `static`.

# java - 坚持JPA后取回UniqueID

> ID：15311804
> 
> 赞同：1
> 
> 时间：2013-03-09T14:30:00.963
> 
> 标签：java, oracle, jpa, uniqueidentifier

我在 Oracle 中有一个唯一的日期 + 序列 ID。示例：20130307-000021

我的实体对象 uniqueID 如下所示：

```
@Id
// @GeneratedValue
// @Basic(optional = false)
// @NotNull
// @Size(min = 1, max = 15)
@Column(name = "UNIQUE_ID")
private String uniqueId; 
```

每当我使用 @GeneratedValue 或其变体时，我都会收到“未找到序列”或其他一些错误。在我持久化一个对象后，我试图取回由 Oracle 数据库生成的唯一 ID。

```
 this.dbConn.persist(orderDetail);
      this.dbConn.flush();
      //this.dbConn.refresh(orderDetail);
      //OrderDetails od = new OrderDetails();
      //od =(OrderDetails)this.dbConn.getEntityManagerFactory().getPersistenceUnitUtil().getIdentifier(orderDetail); 
```

以上是我尝试过的一些不同的事情。当我使用刷新时，我收到一条错误消息，提示找不到“实体”（我假设它正在根据 null 的预持久唯一 ID 查找实体。是否可以取回自动生成的日期+序列号？我通过查看插入的对象并直接复制uniqueID，我能够很好地持久化和检索对象，但显然那是无用的。非常感谢任何帮助，如果您想查看错误消息等，请告诉我。我已经四处搜索我要么看到我正在尝试的“解决方案”，要么有人说他使用了“蛮力解决方法”，但没有描述这意味着什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-28T15:14:22.980

对于任何可能发生这种情况的人。我保留了数据库触发器并使用了：

```
 @Id
 @Basic(optional = false)
 @NotNull
 @Size(min = 1, max = 15)
 @Column(name = "ORDER_ID")
 private String orderId; 
```

I didn't need to use @GeneratedValue or any of its variants.

# javascript - 导航链接在滚动位置上发生变化（单页站点）

> ID：15311809
> 
> 赞同：1
> 
> 时间：2013-03-09T14:30:38.433
> 
> 标签：javascript, jquery

我是 jQuery 和 javascript 的新手。我正在尝试创建一个单页网站。导航固定在顶部。当在单个页面的新“部分”时，我希望导航显示该部分，并且当前在导航中突出显示的部分。

我设法用scroll（）做了一些事情，但它只有在变量'top'大于0时才有效。我知道这可能真的很愚蠢，我做错了，但我是新手，所以我希望这个不打扰你。

[http://jsfiddle.net/mAPh6/](http://jsfiddle.net/mAPh6/)

```
$(document).scroll( function() {
    var top = $(document).scrollTop();

    if ( 200 > top > 0 )
        $(".navLinkTop").css("border-bottom", "5px solid #fff568");
    else
        $(".navLinkTop").css("border-bottom", "none");

    if ( 400 > top > 200 )
        $(".navLinkAbout").css("border-bottom", "5px solid #fff568");
    else
        $(".navLinkAbout").css("border-bottom", "none");

    if ( 400 > top > 0 )
        $(".navLinkWork").css("border-bottom", "5px solid #fff568");
    else
        $(".navLinkWork").css("border-bottom", "none");

    if ( 400 > top > 0 )
        $(".navLinkContact").css("border-bottom", "5px solid #fff568");
    else
        $(".navLinkContact").css("border-bottom", "none");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:32:40.523

当您执行类似操作`a > b > c`时，它不会读出“a 大于 b*且*b 大于 c”。相反，会发生以下情况：

1.  `a > b > c`评估为
2.  `(true) > c`（假设 a 确实大于 b）计算为
3.  `Number(true) > c`因为有类型转换，其计算结果为
4.  `1 > c`这是非常随机的

所以，`3 > 2 > 0`是真的，但是`3 > 2 > 1`是假的。通常，您只需要`&&`在执行**AND**时使用。

这是因为`>`运算符是二进制的，即它需要两个参数。

你需要做的是`(a > b) && (b > c)`，`&&`意思是“和”

在您的情况下，这意味着更改语句， `200 > top > 0`例如`(top < 200) && (top > 0)`

# json - GSON 与 Scala：Scala scala.collection.mutable.HashMap 与 java.util.HashMap

> ID：15311813
> 
> 赞同：3
> 
> 时间：2013-03-09T14:30:57.607
> 
> 标签：json, scala, gson

我正在使用带有最新版本 GSON 的 Scala 2.10。我想将 JSON 字符串反序列化为`scala.collection.mutable.HashMap`. 但是 的值为`map`空，只有 a`HashMap`和 a `serialVersionUID`，没有更多字段。

```
import com.google.gson.Gson
import com.google.gson.reflect.TypeToken
import scala.collection.mutable.HashMap

object MyTest {
  def main(args: Array[String]) {
    val gson = new Gson
    val jsonString = "{\"test1\":\"value-test1\",\"test2\":\"value-test2\"}"
    val mapType = new TypeToken[HashMap[String, String]] {}.getType
    val map = gson.fromJson(jsonString, mapType).asInstanceOf[HashMap[String, String]]
  }
} 
```

尝试使用 a`java.util.HashMap`而不是`scala.collection.mutable.HashMap`，它可以工作。我有一个`map`条目。但为什么它不适用于 Scala HashMap？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T15:00:07.643

我不知道 GSON，但它是一个 Java 库，所以我看不出它理解 Scala 类型的原因。

我想您可以将 JSON 反序列化为 Java 映射，并使用`scala.collections.JavaConverters`or提供的转换将其包装到 Scala 映射中`scala.collection.JavaConversions`。例如：

```
import java.{util => ju}
import scala.collection.JavaConverters._

val gson = new Gson
val jsonString = "{\"test1\":\"value-test1\",\"test2\":\"value-test2\"}"
val mapType = new TypeToken[ju.HashMap[String, String]] {}.getType
val map = gson.fromJson[ju.Map[String, String]](jsonString, mapType).asScala 
```

# php - 我的文件上传表单不上传非图像文件。为什么？

> ID：15311816
> 
> 赞同：-1
> 
> 时间：2013-03-09T14:31:09.837
> 
> 标签：php, jquery, html, ajax

我有一个 HTML 文件上传表单，它使用 PHP 在我的服务器上上传文件。它上传图像文件，但不上传其他类型的文件，如 mp3 或 mp4。我不知道有什么问题。

这是代码：

> HTML：

```
<form id="uploadForm" method="post" action="upload.php?ref=home" enctype="multipart/form-data">
<input id="shout_media" class="hidden" name="media" type="file" />
</form> 
```

> PHP：

```
<?php

  if(isset($_GET['ref'])) {

   if((isset($_FILES['media']))&&(is_uploaded_file($_FILES['media']['tmp_name']))) {

      $name = $_FILES['media']['name'];

      $tmpname = $_FILES['media']['tmp_name'];

      $size = $_FILES['media']['size'];

      $i = strrpos($name,".");

      if (!$i) { return ""; }

      $l = strlen($name) - $i;

      $xt = substr($name,$i+1,$l);

      $ext = strtolower($xt);

      if(preg_match("/(jpg|jpeg|png|gif|mp3|mp4)/",$ext)) {

          if(move_uploaded_file($tmpname,'photos/'.$name.'')) {

               echo 'Uploaded successfully!';

           }

      }

  } 
```

我正在使用 jQuery 和[http://www.malsup.com/jquery/form/](http://www.malsup.com/jquery/form/) Ajax 表单插件来上传文件而无需重新加载页面。

> AJAX 表单插件代码：

```
$("#uploadForm").ajaxForm({
   success: function(responseText) {
      if(responseText.length>0) {
           $(".uploadStatus").text('Uploaded!');
  }
   }
}).submit(); 
```

有什么问题，我该如何解决？我需要允许我的用户上传其他类型的文件，最重要的是 MP3 和 MP4。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:32:22.447

线

`if(preg_match("/(jpg|jpeg|png|gif)/",$ext)) {`

正在按扩展名过滤文件。将您想要允许的其他扩展添加到列表中，例如

`if(preg_match("/(jpg|jpeg|png|gif|mp3|mp4)/",$ext)) {`

请注意，所有文件都将上传到同一个文件夹，因此即使您的 mp3 文件也将位于照片文件夹中。如果您不希望这样，则必须`move_uploaded_file`根据文件类型更改路径。

由于您已更新您的问题，请检查php 中`post_max_size`的`upload_max_filesize`设置以查看您的文件是否大于允许的最大大小

# php - PHP 无法处理 HTML 文件

> ID：15311817
> 
> 赞同：-1
> 
> 时间：2013-03-09T14:31:15.460
> 
> 标签：php, html

此 PHP 代码在 HTML 文件中不起作用，但如果它是 PHP 文件，则它可以工作

```
$con = mysql_connect("localhost","root","aaaa");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}
mysql_select_db("maptemp", $con);

$sql = "SELECT * FROM users";
$rs = mysql_query($sql) or die(mysql_error());
$selectbox='<select name=\'userst\'>';
while ($row = mysql_fetch_assoc($rs)) {
$selectbox.='<option value=\"' . $row['username'] . '\">' . $row['username'] .  '</option>';
}
$selectbox.='</select>';
mysql_free_result($rs);
echo $selectbox; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T14:47:03.727

许多（也许是大多数，全部？）网络服务器未配置为在开箱即用的文件中查找`php`脚本。`html`

Apache，一个[您可能正在运行](https://stackoverflow.com/questions/166607/how-do-i-find-the-version-of-apache-running-without-access-to-the-command-line)的非常流行的网络服务器，就是这种网络服务器的一个例子。

但是，您可以配置网络服务器（如 Apache）来完全按照您的意愿行事。如果您无法访问 Apache 目录本身中的 Apache 配置文件（这在共享服务器上很常见，同样，您很可能拥有），您可以使用[`.htaccess`files](http://httpd.apache.org/docs/2.4/howto/htaccess.html)在每个目录的基础上进行配置。

这样做很简单：打开你最喜欢的文本编辑器，把这行写进去：

`AddType application/x-httpd-php .html`

并将其保存`.htaccess`在与您的文件相同的文件夹中`.html`。那应该这样做。

不过，我建议不要这样做，因为人们（如网络服务器）不希望文件中有`php`脚本`html`。只坚持脚本的`.php`文件是一个好习惯。`php`

# opencv - 闭眼检测opencv C++

> ID：15311819
> 
> 赞同：6
> 
> 时间：2013-03-09T14:32:00.290
> 
> 标签：opencv, detection, eye-detection

我只需要检测闭上的眼睛，也需要分别检测两只眼睛。这意味着我需要判断左眼是睁着还是闭着，右眼也是如此。

我尝试了几种方法。其中之一是分别用 haarcascade_eye 和 haarcascade_eye_tree_eyeglasses 检测眼睛，然后比较结果。如果两个都检测到眼睛，则睁眼，如果一个检测到另一个不能，则闭眼。这个技巧来自这个链接：

[http://tech.groups.yahoo.com/group/OpenCV/messages/87666?threaded=1&m=e&var=1&tidx=1](http://tech.groups.yahoo.com/group/OpenCV/messages/87666?threaded=1&m=e&var=1&tidx=1)

但它不能按预期工作。眼级联检测器不能像链接中提到的那样工作。我在上面提到的那些 haarcascade 中发现了非常接近的结果。有时它给出正确的结果，有时它不能。我不知道为什么。此外，用这种方法不能分辨哪只眼睛是睁着的，哪只眼睛是闭着的。

现在有人可以帮我解决这个问题吗？至少我需要一种方法来判断其中一只眼睛是闭着的，无论哪一只眼睛都需要准确地做到这一点。请帮忙.......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:44:16.850

如果您想避免训练自己的 Haar 级联来检测单眼，您可以尝试更简单的技术，例如瞳孔检测。如果您未能检测到黑色圆圈，则眼睛是闭合的。如果您有一个较小的感兴趣区域，这可能非常有效。另一种选择是眼睛区域的颜色直方图，这对于打开和关闭状态可能看起来非常不同。

如果您无法以合理的准确度预测可以在图像中找到眼睛的位置，那么这些方法注定要失败，我认为您最好的镜头是训练自己的级联。

# android - 无法使用首选项保存或加载整数

> ID：15311821
> 
> 赞同：3
> 
> 时间：2013-03-09T14:32:04.407
> 
> 标签：android, preferences, libgdx, sd-card

所以我构建了一个`SaveAndLoad`如下所示的类：

```
public class SaveAndLoad {
    public Preferences pref;
    public final String path = "Highscore";

    public SaveAndLoad() {
        pref = Gdx.app.getPreferences("Gametitle");
    }

    public void saveInt(int value) {
        pref.putInteger(path, value);
        pref.flush();
    }

    public int getInt() {
        return pref.getInteger(path);
    }
} 
```

当我试图保存我的高分时，我打电话`saveInt(highscore)`，当你再次打开游戏时，我打电话`getInt`。

```
 constructor(){
        SaveAndLoad sdRemote = new SaveAndLoad ();
        try {
            highscore = sdRemote.getInt();
      } catch (NullPointerException e) {
            highscore = 0;
      }
    } 
```

问题是当我在较早的游戏之后再次开始游戏时，高分不加载，它返回零......

我已经完成了清单许可：

谢谢///丹尼尔

附言。在最后一个答案中，我说它适用于某些设备，但后来我发现事实并非如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T14:44:03.017

确保您检索这样的数据：

```
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
int silent = settings.getInt("score", 0); 
```

并像这样保存它：

```
 SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
  SharedPreferences.Editor editor = settings.edit();
  editor.putInt("score", playerScore);
  // Commit the edits!
  editor.commit(); //<---------- 
```

编辑：

啊，你正在使用 GDX。在这种情况下，请确保在 GDX 初始化后初始化此类。检查是否`Gdx.app.getPreferences("Game");`返回 null。

编辑2：

好的，所以我们已经确认某些设备上的 Gdx 存在问题（这很糟糕）。

如果您真的需要在桌面设备和 Android 设备上进行这项工作，还有另一种方法。如果您只想让您的游戏在 Android 上运行，您根本不应该使用 Gdx 来保存数据。

我建议你使用一种叫做 GDX And​​roid 界面的东西。这样，您可以使用我在此答案中使用的本机 Android 调用自己处理在 Android 设备上保存数据。虽然这并不容易，但这里有一个教程：

[https://code.google.com/p/libgdx-users/wiki/IntegratingAndroidNativeUiElements3TierProjectSetup](https://code.google.com/p/libgdx-users/wiki/IntegratingAndroidNativeUiElements3TierProjectSetup)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T17:07:25.707

您可以从中**存储**和**检索** *数据*。

以下**类**和**方法**的代码。

```
public class SaveAndLoad {
        public SharedPreferences pref;
        public final String path = "Highscore";

        public SaveAndLoad() {
            pref = Gdx.app.getSharedPreferences("Gametitle",MODE_PRIVATE);
        }

        public void saveInt(int value) {
        Editor edit = pref.edit();
            edit.putInt(path, value);
            edit.commit();
        }

        public int getInt() {
            return pref.getInt(path,0);
        }
} 
```

为**保存高分**。

```
int highscore = 0;
SaveAndLoad sdRemote = new SaveAndLoad ();
        try {
        highscore = sdRemote.getInt();
    } catch (NullPointerException e) {
        e.printStackTrace();
    } 
```

获取**HighScore**。

```
int highscore = 255;
SaveAndLoad sdRemote = new SaveAndLoad ();
        try {
        sdRemote.saveInt(highscore);
    } catch (NullPointerException e) {
        e.printStackTrace();
    } 
```

这段代码对我来说*正常工作。*并使用它，我相信它对*你有用*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T18:34:45.670

从它的声音来看，您所做的一切都是正确的，这使我们可以选择测试有问题的设备。如果您可以在设备上运行以下应用程序侦听器，并查看每次在设备上运行应用程序时 MyValue 是否在增加。

```
public class PrefTest implements ApplicationListener {
    @Override public void create() {
        final Preferences pref = Gdx.app.getPreferences("TestApp");
        int value = pref.getInteger("MyValue", 0);
        Gdx.app.log("MyValue", Integer.toString(value));
        value++;
        pref.putInteger("MyValue", value);
        pref.flush();
    }

    @Override public void render() {}

    @Override public void dispose() {}

    @Override public void resize(final int width, final int height) {}

    @Override public void pause() {}

    @Override public void resume() {}
} 
```

每次启动应用程序时，您都应该看到 LogCat 中的值增加。例如，安装应用程序并运行，退出并从图标启动，重复退出并启动。如果这可行，那么我们知道问题与您的代码有关。如果这不起作用，那么我们知道问题出在 LibGDX 或手机本身。

# vb.net - 无法在设计器视图 Visual Studio 2010 中查看表单

> ID：15311823
> 
> 赞同：0
> 
> 时间：2013-03-09T14:32:10.227
> 
> 标签：vb.net, winforms

网络编程。我创建了一个表单并在其中添加了一些控件。当我重新打开它时，我关闭它。设计器视图为空白，无法在其中添加更多控件。看看这张照片

![在此处输入图像描述](../Images/f7badca64ea605b9ff9c748be50689c6.png)

这是代码

![在此处输入图像描述](../Images/e69db3f8686664b4eb35dc1147dd90ac.png)

任何帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-03-15T12:53:36.480

尝试排除表单（所有 3 个文件 .vb、Designer.vb、.resx）并将其再次包含到您的项目中。

# angularjs - 动态创建函数调用

> ID：15311827
> 
> 赞同：1
> 
> 时间：2013-03-09T14:32:30.817
> 
> 标签：angularjs

我有一个根据用户输入填充来自 API 的数据的表。

然后我显示结果如下：

```
<tr ng-repeat="show in data.popularMatches">
    <td><a href="#" ng-click="selectShow('{{show.id}}')">{{show.title}}</a></td>
    <td>{{show.title_description}}</td>
</tr> 
```

我想要实现的是，`selectShow`当单击每个节目的链接时，将每个节目的 ID 传递给我的 Angular 控制器中的函数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T14:38:13.517

你应该只需要 ng-click="selectShow(show.id)"

# c++ - C++ 类迭代器实用程序：定义和用法

> ID：15311835
> 
> 赞同：2
> 
> 时间：2013-03-09T14:33:27.963
> 
> 标签：c++, class, templates, iterator, typename

我有一个名为 的类`A`，在这个类中我有一个可迭代的容器，我通过遵循一些访问规则进行迭代——顺序、空虚和其他。

为了简化下面的示例，让我们考虑一下我只是在遍历容器，但这**不能**使用*内置容器的 iterator*来完成。

```
class A {
public:
    class iterator {
    public:
        // Constructor
        iterator() {
        }
        // Destructor
        ~iterator() {
        }
        // Advances the iterator
        void operator++() {
           // Some accessing policy
        }
    };
private:
    std::vector<int> a;
}; 
```

一切都非常好——而且看起来很整洁——除了，当我声明我的迭代器时，我必须使用`typename`——我几乎假设它是用来告诉编译器我拥有的是一个类型，而不是类实例本身。

**问题：**

1.  为什么我必须使用`typename`：

    ```
    A a;
    for (typename A::iterator it(...); it != ...; ++it) {
    } 
    ```

2.  迭代器通常如何定义，因为向量迭代器不需要`typename`标签？它是否与从类定义中声明向量而不是从向量本身有关？

    ```
    std::vector<int> v;
    for (std::vector<int>::iterator it(v.begin()); it != v.end(); ++it) {
    } 
    ```

3.  是否在容器类中定义了迭代器——我猜它被命名为组合——或者，如果没有，它是如何将迭代器添加到类的命名空间中的，例如：

    ```
    std::vector<int>::iterator it; 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T14:44:16.677

> 1 - 为什么我必须使用`typename`：[...]

您不必使用`typename`. 当您使用从属的限定类型名称时，模板*内*`typename`需要消歧器。[StackOverflow 上的这个 Q&A 澄清了一些事情](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)。这：

 *```
A a;
typename a::iterator it; // ERROR! 
```

是**非法**的 C++。如果这`A`不是模板参数的名称，您应该这样做：

```
A::iterator it; 
```

如果你在一个模板里面并且`A`是一个模板参数的名字，比如在：

```
template<typename A>
struct X
{
    void foo()
    {
        typename A::iterator it;
    //  ^^^^^^^^
    //  This is necessary here!
    }
}; 
```

然后你必须使用`typename`告诉编译器后面的`::`是类型的名称。

* * *

> 2 - 迭代器通常如何定义，因为向量迭代器不需要`typename`标签？

同样，“*向量迭代器不需要`typename`标签*”是不正确的。如果您对该向量有明确的特化，例如：

```
std::vector<int>::iterator it; // "typename" not required 
```

then`typename`不是必需的，因为`A::iterator it`. 但是，如果您在以下情况下的模板中，则需要它：

```
template<typename A>
struct X
{
    void foo()
    {
        typename std::vector<A>::iterator it;
    //  ^^^^^^^^
    //  This is necessary here!
    }
}; 
```

那是因为`std::vector<A>::iterator`这里是一个限定的、依赖的类型名称。

* * *

> 3 - 是否在容器类中定义了迭代器——我猜它被命名为组合——或者，如果没有，它是如何将迭代器添加到类的命名空间中的，就像在 [..]

这可以通过定义一个嵌套类来完成，或者简单地通过使用类型别名来完成：

```
template<typename T>
struct X
{
    typedef T* iterator;
    iterator begin() { /* ... */ }
    // ...
};

X<int>::iterator it; // OK: "typename" not required

template<typename T>
void foo(X<T>& x)
{
    typename X<T>::iterator it = x.begin();
//  ^^^^^^^^
//  This is necessary here!

    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T15:19:29.240

您的示例代码存在很多问题，因此这可能是您正在寻找的答案（*挥手*）:) 当然，如果您的示例不正确，那么所有的赌注都没有了。

我很惊讶这会起作用。'a' 是一个变量，'A' 是类。

此外，在使用默认构造函数声明变量时，不要使用结束括号 ()。

```
A a;
A::iterator it;
for (A::iterator it; it != ...; ++it) {
} 
```

此外，迭代器是在容器类中定义的。只有在处理模板并且访问可以解释为静态成员或函数/嵌套类或 typedef 的内容时才需要使用 typename。[这](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)可以通过 Andy Prowl 给出的答案进一步解释。

祝你好运*

# jdbc - JRuby 和 SQLite3

> ID：15311838
> 
> 赞同：0
> 
> 时间：2013-03-09T14:33:43.463
> 
> 标签：jdbc, sqlite, jruby, sqlite3-ruby

我正在尝试使用以下宝石使 JRuby 和 SQLite3 工作：

> 有弹性的城堡 java (1.5.0146.1)
> 
> 捆绑器 (1.3.2)
> 
> dbd-jdbc (0.1.6 java)
> 
> 分贝 (0.4.5)
> 
> 已弃用 (2.0.1)
> 
> jdbc-sqlite3 (3.7.2.1)
> 
> jruby-launcher (1.0.15 java)
> 
> jruby-openssl (0.8.2)
> 
> json (1.7.7 java)
> 
> 机架 (1.5.2)
> 
> 机架保护 (1.4.0)
> 
> 耙子 (10.0.3)
> 
> rubygems 捆绑器 (1.1.1)
> 
> rvm (1.11.3.6)
> 
> 西纳特拉 (1.3.5)
> 
> sqlite3 (1.3.7)
> 
> 倾斜 (1.3.5)

这个代码：

```
require 'java'
require 'dbi'
require 'dbd/Jdbc'
require 'jdbc/sqlite3'

dbh = DBI.connect(
  "DBI:jdbc:sqlite:db.sqlite",  # connection string
   '',                                 # no username for sqlite3
   '',                                 # no password for sqlite3
   'driver' => 'org.sqlite.JDBC')      # need to set the driver 
```

但我有这个错误：

> DBI::InterfaceError: Unable to load driver 'jdbc' (underlying error: wrong constant name jdbc) load_driver at /home/gl/.rvm/gems/jruby-1.7.3/gems/dbi-0.4.5/lib/dbi .rb:300 mon_synchronize 在 /home/gl/.rvm/rubies/jruby-1.7.3/lib/ruby/1.9/monitor.rb:211 load_driver 在 /home/gl/.rvm/gems/jruby-1.7.3 /gems/dbi-0.4.5/lib/dbi.rb:242 _get_full_driver 在 /home/gl/.rvm/gems/jruby-1.7.3/gems/dbi-0.4.5/lib/dbi.rb:160 连接在 /home/gl/.rvm/gems/jruby-1.7.3/gems/dbi-0.4.5/lib/dbi.rb:145（根） 在 srv.rb:6

你有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:59:21.503

我自己一直在尝试解决这个问题，并最终成功了——问题是驱动程序名称现在是“Jdbc”，而不是“jdbc”——大写在连接字符串和要求语句中都很重要。如果您将连接字符串更改为“DBI:Jdbc:sqlite:db.sqlite”，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:53:33.990

我建议你使用[ActiveRecord](https://github.com/jruby/activerecord-jdbc-adapter#standalone-with-activerecord)而不是 DBI。

您可以这样执行裸 SQL：

```
ActiveRecord::Base.connection.execute("SELECT * FROM some_table") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T22:47:49.747

接受的答案不起作用（至少对我来说）。我在 SO 和网络上搜索了几个小时（那里有很多好的和坏的信息），最后找到了一个可行的解决方案（至少对我来说）。通过添加“Jdbc::SQLite3.load_driver”行可以解决大部分问题。

```
require 'java'
require 'jdbc/sqlite3'

module JavaSql
  include_package 'java.sql'
end

Jdbc::SQLite3.load_driver
Java::org.sqlite.JDBC

conn_str = 'jdbc:sqlite:../Data/AflBettingHistory.db3'
conn = JavaSql::DriverManager.getConnection(conn_str)
stm = conn.createStatement
rs = stm.executeQuery("select Name from Team")
while (rs.next) do
  puts rs.getString("Name")
end
rs.close
stm.close
conn.close 
```

# objective-c - 搜索字段谓词格式

> ID：15311841
> 
> 赞同：1
> 
> 时间：2013-03-09T14:34:18.510
> 
> 标签：objective-c, cocoa, binding, predicate, nssearchfield

我对使用 NSSearchField 有疑问。我将它绑定到我的字典控制器，现在我想从中搜索。这里是项目

我的列表（顶部） ![我的列表](../Images/86d61dfcb147ab794dc2741dc0022652.png)

我的头文件（底部）

![在此处输入图像描述](../Images/b9f40359493ab111e40a1ebf9b6ca324.png)

我的实现： ![在此处输入图像描述](../Images/c3cecc7a8873c66ef03dac011c5ff656.png)

我的界面 ![在此处输入图像描述](../Images/a52e0e92260ef195df8e7a8a5c8af548.png)

我已使用以下谓词格式将我的搜索绑定到我的 NSDictionaryController

```
key contains $value 
```

**我的期望**：我搜索“One”，“G1”和“One”出来

**我得到**了什么：我搜索“一”，没有任何结果。当我搜索“G1”时，会出现“G1”和“One”。

如何使我可以搜索一个值并从中获取键和值？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:39:52.687

通过 NSSearchField 将 NSDictionaryController 与 NSTableView 绑定

第 1 步：绘制一个 NSSearchField。

第 2 步：将其绑定到 Predicate 选项中的 NSDicitonaryController。

第 3 步：在谓词格式中放置键包含 $value

[在此处](http://www.keepandshare.com/doc/5940093/dictionarycontrollerwithsearchfield-35k?da=y)运行示例

# java - 地形曲线到点数组

> ID：15311845
> 
> 赞同：8
> 
> 时间：2013-03-09T14:34:36.420
> 
> 标签：java, algorithm, andengine, points, curve

在我的 2D 游戏中，我使用图形工具来创建以黑色表示的漂亮、平滑的地形： ![在此处输入图像描述](../Images/f55ec6a2b9681bd0341ab576e56a2768.png)

用 java 编写的简单算法每 15 个像素查找一次黑色，创建以下一组线条（灰色）：

![在此处输入图像描述](../Images/46c3b147a158311a2e09639d95eb039b.png)

如您所见，有些地方的映射非常糟糕，有些地方非常好。在其他情况下，不需要每 15 个像素采样一次，例如。如果地形平坦。

使用尽可能少的点将这条曲线转换为一组点 [线] 的最佳方法是什么？每 15 像素采样一次 = 55 FPS，10 像素 = 40 FPS

以下算法正在完成这项工作，从右到左采样，将可粘贴输出到代码数组中：

```
public void loadMapFile(String path) throws IOException {
    File mapFile = new File(path);
    image = ImageIO.read(mapFile);
    boolean black;
    System.out.print("{ ");

    int[] lastPoint = {0, 0};

    for (int x = image.getWidth()-1; x >= 0; x -= 15) {
        for (int y = 0; y < image.getHeight(); y++) {
            black = image.getRGB(x, y) == -16777216 ? true : false;

            if (black) {
                lastPoint[0] = x;
                lastPoint[1] = y;
                System.out.print("{" + (x) + ", " + (y) + "}, ");
                break;
            }

        }
    }

    System.out.println("}");
} 
```

我在 Android 上开发，使用 Java 和 AndEngine

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:07:57.327

这个问题与信号（例如声音）的数字化问题几乎相同，其基本规律是输入中的频率对于采样率而言太高的信号将不会反映在数字化输出中。所以问题是，如果您检查 30 个像素，然后按照 bmorris591 的建议测试中间，您可能会错过采样点之间的 7 个像素孔。这表明，如果您不能错过 10 个像素特征，则需要每 5 个像素扫描一次：您的采样率应该是信号中最高频率的两倍。

有助于改进算法的一件事是更好的 y 维搜索。目前您正在线性搜索天空和地形之间的交点，但二分搜索应该更快

```
int y = image.getHeight()/2; // Start searching from the middle of the image
int yIncr = y/2;
while (yIncr>0) {
    if (image.getRGB(x, y) == -16777216) {
        // We hit the terrain, to towards the sky
        y-=yIncr;
    } else {
        // We hit the sky, go towards the terrain
        y+=yIncr;
    }
    yIncr = yIncr/2;
}
// Make sure y is on the first terrain point: move y up or down a few pixels
// Only one of the following two loops will execute, and only one or two iterations max
while (image.getRGB(x, y) != -16777216) y++; 
while (image.getRGB(x, y-1) == -16777216) y--; 
```

其他优化也是可能的。如果你知道你的地形没有悬崖，那么你只需要搜索从 lastY+maxDropoff 到 lastY-maxDropoff 的窗口。此外，如果您的地形永远不能与整个位图一样高，您也不需要搜索位图的顶部。这应该有助于释放一些 CPU 周期，您可以将其用于地形的更高分辨率 x 扫描。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T16:51:02.497

我建议找到存在于白色和深色像素之间边界上的边界点。之后，我们可以将这些点数字化。为此，我们应该定义`DELTA`哪些指定我们应该跳过哪个点以及我们应该将哪个点添加到结果列表中。

```
DELTA = 3, Number of points = 223 
```

![在此处输入图像描述](../Images/dcc77db6d19398442c5808698d606973.png)

```
DELTA = 5, Number of points = 136 
```

![在此处输入图像描述](../Images/94dcdf11588518dc80bae73d4f3b9118.png)

```
DELTA = 10, Number of points = 70 
```

![在此处输入图像描述](../Images/cb466f4ab3d81a25ab92eeab75cbe5ec.png)

下面，我放了源代码，它打印图像并寻找点。我希望，您将能够阅读它并找到解决问题的方法。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.image.BufferedImage;
import java.awt.image.DataBufferByte;
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Program {

    public static void main(String[] args) throws IOException {
        BufferedImage image = ImageIO.read(new File("/home/michal/Desktop/FkXG1.png"));
        PathFinder pathFinder = new PathFinder(10);
        List<Point> borderPoints = pathFinder.findBorderPoints(image);
        System.out.println(Arrays.toString(borderPoints.toArray()));
        System.out.println(borderPoints.size());

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(new ImageBorderPanel(image, borderPoints));
        frame.pack();
        frame.setMinimumSize(new Dimension(image.getWidth(), image.getHeight()));
        frame.setVisible(true);
    }
}

class PathFinder {

    private int maxDelta = 3;

    public PathFinder(int delta) {
        this.maxDelta = delta;
    }

    public List<Point> findBorderPoints(BufferedImage image) {
        int width = image.getWidth();
        int[][] imageInBytes = convertTo2DWithoutUsingGetRGB(image);
        int[] borderPoints = findBorderPoints(width, imageInBytes);

        List<Integer> indexes = dwindlePoints(width, borderPoints);
        List<Point> points = new ArrayList<Point>(indexes.size());
        for (Integer index : indexes) {
            points.add(new Point(index, borderPoints[index]));
        }
        return points;
    }

    private List<Integer> dwindlePoints(int width, int[] borderPoints) {
        List<Integer> indexes = new ArrayList<Integer>(width);
        indexes.add(borderPoints[0]);
        int delta = 0;
        for (int index = 1; index < width; index++) {
            delta += Math.abs(borderPoints[index - 1] - borderPoints[index]);
            if (delta >= maxDelta) {
                indexes.add(index);
                delta = 0;
            }
        }
        return indexes;
    }

    private int[] findBorderPoints(int width, int[][] imageInBytes) {
        int[] borderPoints = new int[width];
        int black = Color.BLACK.getRGB();
        for (int y = 0; y < imageInBytes.length; y++) {
            int maxX = imageInBytes[y].length;
            for (int x = 0; x < maxX; x++) {
                int color = imageInBytes[y][x];
                if (color == black && borderPoints[x] == 0) {
                    borderPoints[x] = y;
                }
            }
        }
        return borderPoints;
    }

    private int[][] convertTo2DWithoutUsingGetRGB(BufferedImage image) {
        final byte[] pixels = ((DataBufferByte) image.getRaster().getDataBuffer()).getData();
        final int width = image.getWidth();
        final int height = image.getHeight();
        final boolean hasAlphaChannel = image.getAlphaRaster() != null;

        int[][] result = new int[height][width];
        if (hasAlphaChannel) {
            final int pixelLength = 4;
            for (int pixel = 0, row = 0, col = 0; pixel < pixels.length; pixel += pixelLength) {
                int argb = 0;
                argb += (((int) pixels[pixel] & 0xff) << 24); // alpha
                argb += ((int) pixels[pixel + 1] & 0xff); // blue
                argb += (((int) pixels[pixel + 2] & 0xff) << 8); // green
                argb += (((int) pixels[pixel + 3] & 0xff) << 16); // red
                result[row][col] = argb;
                col++;
                if (col == width) {
                    col = 0;
                    row++;
                }
            }
        } else {
            final int pixelLength = 3;
            for (int pixel = 0, row = 0, col = 0; pixel < pixels.length; pixel += pixelLength) {
                int argb = 0;
                argb += -16777216; // 255 alpha
                argb += ((int) pixels[pixel] & 0xff); // blue
                argb += (((int) pixels[pixel + 1] & 0xff) << 8); // green
                argb += (((int) pixels[pixel + 2] & 0xff) << 16); // red
                result[row][col] = argb;
                col++;
                if (col == width) {
                    col = 0;
                    row++;
                }
            }
        }

        return result;
    }
}

class ImageBorderPanel extends JPanel {

    private static final long serialVersionUID = 1L;

    private BufferedImage image;
    private List<Point> borderPoints;

    public ImageBorderPanel(BufferedImage image, List<Point> borderPoints) {
        this.image = image;
        this.borderPoints = borderPoints;
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawImage(image, 0, 0, null);

        Graphics2D graphics2d = (Graphics2D) g;

        g.setColor(Color.YELLOW);
        for (Point point : borderPoints) {
            graphics2d.fillRect(point.x, point.y, 3, 3);
        }
    }
} 
```

在我的源代码中，我使用了这个问题的示例：

*   [Java - 从图像中获取像素数组](https://stackoverflow.com/questions/6524196/java-get-pixel-array-from-image)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T16:19:59.180

最有效的解决方案（相对于所需的点）是允许沿 X 轴的点之间的间距可变。这样，一个大的平坦部分将需要很少的点/样本，而复杂的地形将使用更多。

在 3D 网格处理中，有一个很好的网格简化算法，名为“二次边缘崩溃”，您可以根据自己的问题进行调整。

这是这个想法，转化为您的问题 - 它实际上比原始 3D 算法简单得多：

1.  用太多的点来表示你的曲线。
2.  对于每个点，如果您删除它，则测量误差（即与平滑地形的差异）。
3.  删除给出最小误差的点。
4.  重复直到您将点数减少到足够多或错误变得太大。

更准确地说，关于第 2 步：给定点`P, Q, R`，误差`Q`是用两条直线近似地形`P->Q`与`Q->R`和仅用一条直线近似地形之间的差异`P->R`。

请注意，当一个点被删除时，只有它的邻居需要更新它们的错误值。

# sql-server-2008-r2 - 如何将 SQL Server 2008 R2 备份还原到 LocalDb 2012

> ID：15311846
> 
> 赞同：7
> 
> 时间：2013-03-09T14:34:54.490
> 
> 标签：sql-server-2008-r2, database-restore, localdb

我有一个`.bak`在 SQL Server 2008 R2 中创建的数据库 ( ) 的备份。

要测试某些功能，例如将此备份导入 LocalDB (2012)。当我单击还原并选择数据库时，会发生以下错误：

> *属性 MasterDBLogPath 不适用于信息“Microsoft.SqlServer.Management.Smo.Information”。此对象的此属性可能不存在，或者由于访问权限不足而无法检索。(Microsoft.SqlServer.Smo)*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-14T15:57:10.213

您需要添加以下 3 个注册表项 (run/regedit)：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\MSSQL11E.LOCALDB\MSSQLServer\DefaultData,

HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\MSSQL11E.LOCALDB\MSSQLServer\DefaultLog, 

HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\MSSQL11E.LOCALDB\MSSQLServer\BackupDirectory 
```

使用现有文件夹名称作为值（您具有写入权限的位置），例如“C:\Databases”。

[请查看http://www.roelvanlisdonk.nl/?p=2896](http://www.roelvanlisdonk.nl/?p=2896)下的出色演练（我从那里复制了答案）。

# sql-server - 优化时间关键的 t-sql 语句

> ID：15311852
> 
> 赞同：0
> 
> 时间：2013-03-09T14:35:30.490
> 
> 标签：sql-server, tsql, stored-procedures

我有一个存储过程，它非常慢，我不确定我可以改进什么。sql server 表 EntityValue 只包含 1'800 行。

这是存储过程：

```
CREATE PROCEDURE [dbo].[GetReportLabelValues](
    @UnitIds UniqueIdentifierTableType readonly, 
    @LabelIds UniqueIdentifierTableType readonly)
AS
BEGIN
    SELECT LabelValue.EntityId AS [LabelId], LabelValue.UnitId AS [UnitId], LabelValue.Value AS [Value]
    FROM EntityValue, LabelValue
    WHERE 
        EntityValue.IsDeleted = 0 AND
        EntityValue.UnitId = LabelValue.UnitId AND
        EntityValue.EntityId = LabelValue.EntityId AND
        EXISTS (SELECT 1 FROM @UnitIds WHERE EntityValue.UnitId = [@UnitIds].Id) AND
        EXISTS (SELECT 1 FROM @LabelIds WHERE EntityValue.EntityId = [@LabelIds].Id)

END; 
```

这个说法有什么问题？还是我需要设置一些额外的索引？提前感谢您的帮助:) 最好的 laurin

编辑：

以下是执行计划：

```
DECLARE @unitIds AS UniqueIdentifierTableType;
INSERT INTO @unitIds ([Id]) VALUES ('63ABF15E-B8B0-4240-9B90-08F324D5179E') 1   1   0   NULL    NULL    1   NULL    1   NULL    NULL    NULL    0.01000216  NULL    NULL    INSERT  0   NULL
  |--Table Insert(OBJECT:(@unitIds), SET:([Id] = [Expr1004]), DEFINE:([Expr1004]={guid'63ABF15E-B8B0-4240-9B90-08F324D5179E'})) 1   2   1   Table Insert    Insert  OBJECT:(@unitIds), SET:([Id] = [Expr1004]), DEFINE:([Expr1004]={guid'63ABF15E-B8B0-4240-9B90-08F324D5179E'})    [Expr1004]={guid'63ABF15E-B8B0-4240-9B90-08F324D5179E'} 1   0.01    1E-06   9   0.01000216  NULL    NULL    PLAN_ROW    0   1

DECLARE @labelIds AS UniqueIdentifierTableType;
INSERT INTO @labelIds ([Id]) VALUES ('4E75B50C-E647-42E7-A87F-2D23D8B63D17')    2   3   0   NULL    NULL    2   NULL    1   NULL    NULL    NULL    0.01000216  NULL    NULL    INSERT  0   NULL
  |--Table Insert(OBJECT:(@labelIds), SET:([Id] = [Expr1004]), DEFINE:([Expr1004]={guid'4E75B50C-E647-42E7-A87F-2D23D8B63D17'}))    2   4   3   Table Insert    Insert  OBJECT:(@labelIds), SET:([Id] = [Expr1004]), DEFINE:([Expr1004]={guid'4E75B50C-E647-42E7-A87F-2D23D8B63D17'})   [Expr1004]={guid'4E75B50C-E647-42E7-A87F-2D23D8B63D17'} 1   0.01    1E-06   9   0.01000216  NULL    NULL    PLAN_ROW    0   1

exec dbo.GetReportLabelValues @unitIds, @labelIds   3   5   0   NULL    NULL    3   NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    EXECUTE PROC    0   NULL

CREATE PROCEDURE GetReportLabelValues(
    @UnitIds UniqueIdentifierTableType readonly, 
    @LabelIds UniqueIdentifierTableType readonly)
AS
BEGIN
    SELECT LabelValue.EntityId AS [LabelId], LabelValue.UnitId AS [UnitId], LabelValue.Value AS [Value]
    FROM EntityValue, LabelValue
    WHERE 
        EntityValue.IsDeleted = 0 AND
        EntityValue.UnitId = LabelValue.UnitId AND
        EntityValue.EntityId = LabelValue.EntityId AND
        EXISTS (SELECT 1 FROM @UnitIds WHERE EntityValue.UnitId = [@UnitIds].Id) AND
        EXISTS (SELECT 1 FROM @LabelIds WHERE EntityValue.EntityId = [@LabelIds].Id)    4   6   5   NULL    NULL    5   NULL    1.062501    NULL    NULL    NULL    0.02785614  NULL    NULL    SELECT  0   NULL
       |--Stream Aggregate(GROUP BY:([ABB_MDB2_Test].[dbo].[LabelValue].[UnitId], [ABB_MDB2_Test].[dbo].[LabelValue].[EntityId]) DEFINE:([ABB_MDB2_Test].[dbo].[LabelValue].[Value]=ANY([ABB_MDB2_Test].[dbo].[LabelValue].[Value])))   4   8   6   Stream Aggregate    Aggregate   GROUP BY:([ABB_MDB2_Test].[dbo].[LabelValue].[UnitId], [ABB_MDB2_Test].[dbo].[LabelValue].[EntityId])   [ABB_MDB2_Test].[dbo].[LabelValue].[Value]=ANY([ABB_MDB2_Test].[dbo].[LabelValue].[Value])  1.062501    0   1.062501E-06    343 0.02785614  [ABB_MDB2_Test].[dbo].[LabelValue].[UnitId], [ABB_MDB2_Test].[dbo].[LabelValue].[EntityId], [ABB_MDB2_Test].[dbo].[LabelValue].[Value]  NULL    PLAN_ROW    0   1
            |--Nested Loops(Inner Join, OUTER REFERENCES:([ABB_MDB2_Test].[dbo].[EntityValue].[UnitId], [Id]))  4   9   8   Nested Loops    Inner Join  OUTER REFERENCES:([ABB_MDB2_Test].[dbo].[EntityValue].[UnitId], [Id])   NULL    1.062501    0   4.441255E-06    375 0.02785508  [ABB_MDB2_Test].[dbo].[EntityValue].[UnitId], [ABB_MDB2_Test].[dbo].[EntityValue].[EntityId], [ABB_MDB2_Test].[dbo].[LabelValue].[UnitId], [ABB_MDB2_Test].[dbo].[LabelValue].[EntityId], [ABB_MDB2_Test].[dbo].[LabelValue].[Value]    NULL    PLAN_ROW    0   1
                 |--Nested Loops(Inner Join, WHERE:([ABB_MDB2_Test].[dbo].[EntityValue].[EntityId]=[Id]))   4   10  9   Nested Loops    Inner Join  WHERE:([ABB_MDB2_Test].[dbo].[EntityValue].[EntityId]=[Id]) NULL    1.062501    0   0.0001594845    55  0.02455766  [ABB_MDB2_Test].[dbo].[EntityValue].[UnitId], [ABB_MDB2_Test].[dbo].[EntityValue].[EntityId], [Id]  NULL    PLAN_ROW    0   1
                 |    |--Nested Loops(Inner Join, OUTER REFERENCES:([Id]))  4   12  10  Nested Loops    Inner Join  OUTER REFERENCES:([Id]) NULL    38.15419    0   0.0001594845    39  0.01814615  [ABB_MDB2_Test].[dbo].[EntityValue].[UnitId], [ABB_MDB2_Test].[dbo].[EntityValue].[EntityId]    NULL    PLAN_ROW    0   1
                 |    |    |--Sort(DISTINCT ORDER BY:([Id] ASC))    4   13  12  Sort    Distinct Sort   DISTINCT ORDER BY:([Id] ASC)    NULL    1   0.01126126  0.000100023 23  0.01464438  [Id]    NULL    PLAN_ROW    0   1
                 |    |    |    |--Table Scan(OBJECT:(@UnitIds))    4   14  13  Table Scan  Table Scan  OBJECT:(@UnitIds)   [Id]    1   0.003125    0.0001581   23  0.0032831   [Id]    NULL    PLAN_ROW    0   1
                 |    |    |--Clustered Index Seek(OBJECT:([ABB_MDB2_Test].[dbo].[EntityValue].[PK_EntityValue]), SEEK:([ABB_MDB2_Test].[dbo].[EntityValue].[UnitId]=[Id]),  WHERE:([ABB_MDB2_Test].[dbo].[EntityValue].[IsDeleted]=(0)) ORDERED FORWARD)   4   15  12  Clustered Index Seek    Clustered Index Seek    OBJECT:([ABB_MDB2_Test].[dbo].[EntityValue].[PK_EntityValue]), SEEK:([ABB_MDB2_Test].[dbo].[EntityValue].[UnitId]=[Id]),  WHERE:([ABB_MDB2_Test].[dbo].[EntityValue].[IsDeleted]=(0)) ORDERED FORWARD   [ABB_MDB2_Test].[dbo].[EntityValue].[UnitId], [ABB_MDB2_Test].[dbo].[EntityValue].[EntityId], [ABB_MDB2_Test].[dbo].[EntityValue].[IsDeleted]   38.15419    0.003125    0.0001989696    40  0.00332397  [ABB_MDB2_Test].[dbo].[EntityValue].[UnitId], [ABB_MDB2_Test].[dbo].[EntityValue].[EntityId], [ABB_MDB2_Test].[dbo].[EntityValue].[IsDeleted]   NULL    PLAN_ROW    0   1
                 |    |--Table Scan(OBJECT:(@LabelIds)) 4   17  10  Table Scan  Table Scan  OBJECT:(@LabelIds)  [Id]    1   0.0032035   7.96E-05    31  0.006240574 [Id]    NULL    PLAN_ROW    0   38.15419
                 |--Clustered Index Seek(OBJECT:([ABB_MDB2_Test].[dbo].[LabelValue].[PK_LabelValue]), SEEK:([ABB_MDB2_Test].[dbo].[LabelValue].[UnitId]=[ABB_MDB2_Test].[dbo].[EntityValue].[UnitId] AND [ABB_MDB2_Test].[dbo].[LabelValue].[EntityId]=[Id]) ORDERED FORWARD)   4   19  9   Clustered Index Seek    Clustered Index Seek    OBJECT:([ABB_MDB2_Test].[dbo].[LabelValue].[PK_LabelValue]), SEEK:([ABB_MDB2_Test].[dbo].[LabelValue].[UnitId]=[ABB_MDB2_Test].[dbo].[EntityValue].[UnitId] AND [ABB_MDB2_Test].[dbo].[LabelValue].[EntityId]=[Id]) ORDERED FORWARD [ABB_MDB2_Test].[dbo].[LabelValue].[UnitId], [ABB_MDB2_Test].[dbo].[LabelValue].[EntityId], [ABB_MDB2_Test].[dbo].[LabelValue].[Value]  1   0.003125    0.0001581   343 0.003292982 [ABB_MDB2_Test].[dbo].[LabelValue].[UnitId], [ABB_MDB2_Test].[dbo].[LabelValue].[EntityId], [ABB_MDB2_Test].[dbo].[LabelValue].[Value]  NULL    PLAN_ROW    0   1.062501 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:33:47.033

试试这个，我将子查询转换为连接。

```
CREATE PROCEDURE [dbo].[GetReportLabelValues]
(
    @UnitIds UniqueIdentifierTableType readonly, 
    @LabelIds UniqueIdentifierTableType readonly
)
AS
BEGIN
    SELECT LabelValue.EntityId AS [LabelId], 
           LabelValue.UnitId AS [UnitId], 
           LabelValue.Value AS [Value]
    FROM EntityValue
    JOIN LabelValue ON EntityValue.UnitId = LabelValue.UnitId AND 
                    EntityValue.EntityId = LabelValue.EntityId
    JOIN @UnitID ON EntityValue.UnitId = [@UnitIds].Id
    JOIN @LabelIds ON EntityValue.EntityId = [@LabelIds].Id
    WHERE EntityValue.IsDeleted = 0 
END; 
```

# python - 从 mp3 绘制频谱图

> ID：15311853
> 
> 赞同：5
> 
> 时间：2013-03-09T14:35:45.490
> 
> 标签：python, audio, signal-processing

我正在尝试直接从 python 2.7.3（使用 ubuntu）中的 mp3 文件绘制频谱图。我可以从 wav 文件中执行以下操作。

```
#!/usr/bin/python
from scikits.audiolab import wavread
from pylab import *

signal, fs, enc = wavread('XC124158.wav')
specgram(signal)
show() 
```

从 mp3 文件而不是 wav 做同样事情的最干净的方法是什么？如果可以避免的话，我不想将所有 mp3 文件转换为 wav。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T17:07:27.567

我会安装 Debian/Ubuntu 软件包[libav-tools](http://packages.ubuntu.com/quantal/libav-tools)并调用`avconv`将 mp3 解码为临时 wav 文件：

* * *

编辑：您的另一个问题已关闭，因此我将在这里通过一个简单的带通滤波示例扩展我的答案。在您链接的文件中，看起来大部分鸟鸣都集中在 4 kHz - 5.5 kHz 中。

```
import os
from subprocess import check_call
from tempfile import mktemp
from scikits.audiolab import wavread, play
from scipy.signal import remez, lfilter
from pylab import *

# convert mp3, read wav
mp3filename = 'XC124158.mp3'
wname = mktemp('.wav')
check_call(['avconv', '-i', mp3filename, wname])
sig, fs, enc = wavread(wname)
os.unlink(wname)

# bandpass filter
bands = array([0,3500,4000,5500,6000,fs/2.0]) / fs
desired = [0, 1, 0]
b = remez(513, bands, desired)
sig_filt = lfilter(b, 1, sig)
sig_filt /=  1.05 * max(abs(sig_filt)) # normalize

subplot(211)
specgram(sig, Fs=fs, NFFT=1024, noverlap=0)
axis('tight'); axis(ymax=8000)
title('Original')
subplot(212)
specgram(sig_filt, Fs=fs, NFFT=1024, noverlap=0)
axis('tight'); axis(ymax=8000)
title('Filtered')
show()

play(sig_filt, fs) 
```

![鸟鸣声谱图](../Images/9f2d7125e6e5cab847082d810f16d516.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-03-04T15:16:30.027

另一种绘制 mp3 文件频谱图的非常简单的方法。

```
from pydub import AudioSegment
import matplotlib.pyplot as plt
from scipy.io import wavfile
from tempfile import mktemp

mp3_audio = AudioSegment.from_file('speech.mp3', format="mp3")  # read mp3
wname = mktemp('.wav')  # use temporary file
mp3_audio.export(wname, format="wav")  # convert to wav
FS, data = wavfile.read(wname)  # read wav file
plt.specgram(data, Fs=FS, NFFT=128, noverlap=0)  # plot
plt.show() 
```

这使用了`pydub`比调用外部命令更方便的库。这样，您可以遍历所有`.mp3`文件，而无需`.wav`在绘图之前将它们转换为。

[![在此处输入图像描述](../Images/d46f64693aa75f38a461f49af48c4cc1.png)](https://i.stack.imgur.com/IL41e.png)

# asp.net-mvc - Durandaljs 和 ASP.NET MVC 4 razor：data_bind 属性未转换为 data-bind

> ID：15311855
> 
> 赞同：0
> 
> 时间：2013-03-09T14:35:45.623
> 
> 标签：asp.net-mvc, razor, durandal

使用 Durandaljs 和 ASP.NET MVC 4 razor，视图 (cshtml) 中的 data_bind 属性在呈现时不会转换为 data-bind。

```
@Html.TextBox("txtDisplayName","", new { data_bind = "value: movieToShow.title" }) 
```

呈现为

```
<input data_bind="value: movieToShow.title" id="txtDisplayName" name="txtDisplayName" type="text" value=""> 
```

但应该是

```
<input data-bind="value: movieToShow.title" id="txtDisplayName" name="txtDisplayName" type="text" value=""> 
```

# ruby-on-rails - Rails 以一种形式创建两个模型

> ID：15311856
> 
> 赞同：0
> 
> 时间：2013-03-09T14:35:51.607
> 
> 标签：ruby-on-rails, forms

嗨，我正在尝试以一种形式从不同的模型创建两个对象。它们通过 has_many/belongs_to 关系连接。事件 has_many 图片是多态的，因为可以与其他模型相关联。我得到 Can't mass-assign protected attributes: picture 如果我在 attr_accesible 中设置 :picture 它说我“未知属性：图片”。

这是我的表单代码：

```
 <%= form_for @event, :html => { :class => 'form-horizontal' } do |f| %>
  <div class="control-group">
    <%= f.label :titre, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :titre, :class => 'text_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :Date, :class => 'control-label' %>
    <div class="controls">
      <%= f.date_select :dday, :class => 'date_select', :start_year=>Date.today.year, :end_year=>1905 %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :lieux, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :lieux, :class => 'text_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :description, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_area :commentaire, :class => 'text_area', :rows => 4 %>
    </div>
  </div>
  <%= f.fields_for @event.pictures.new do |p| %>
    <%= p.text_field :name, :placeholder=>"Nom de votre image" %>
    <%= p.file_field :image %>
  <% end %> 
```

和我的模型代码

```
 class Event < ActiveRecord::Base
  attr_accessible :dday, :lieux, :titre, :commentaire, :picture
    belongs_to :user
    has_many :pictures, :as => :imegeable ,:dependent => :destroy
    default_scope :order => :dday
    validates :dday, :titre, :presence=>true
end 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:40:05.083

自从我做任何 Rails 工作以来已经有一段时间了，所以自从我上次做以来这可能已经改变了，但我认为你需要`accepts_nested_attributes_for :pictures`在你的 Event 模型上指定它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T23:40:46.757

尝试将您的代码中的最后一个 fields_for 更改为：

```
<%= f.fields_for :pictures do |p| %>
  <%= p.text_field :name, :placeholder=>"Nom de votre image" %>
  <%= p.file_field :image %>
<% end %> 
```

添加到您的模型：

```
accepts_nested_attributes_for :pictures 
```

并将模型中的 attr_accessible 更改为：

```
attr_accessible :dday, :lieux, :titre, :commentaire, :pictures_attributes 
```

# jakarta-ee - 获得丰富的自动完成价值

> ID：15311867
> 
> 赞同：0
> 
> 时间：2013-03-09T14:37:23.587
> 
> 标签：jakarta-ee, jsf-2, richfaces

我正在尝试实现一个richfaces 数据表。每行都有一个richfaces 日历、两个richfaces 自动完成功能和3 个输入文本。

我有另一种形式的命令按钮。当我在数据表的给定行中输入一些值时：

*   显示有效日期
*   这两个 autocpmpletes 可以很好地从 bean 中检索数据选择
*   我在输入文本中输入值

但是当我单击“计算”按钮时，只有文本输入被发送回支持 bean。

到目前为止，这是我想出的（这是我的 xhtml 文件的简化版本）

```
<h:body>
    <rich:panel>
                <h:form id="legForm">
                    <rich:dataTable value="#{bean.legsForDisplay}" var="legForDisplay">
                        <rich:column>
                            <f:facet name="header">
                                <h:outputText value="Departure Date (UTC)" />
                            </f:facet>
                            <rich:calendar value="#{legForDisplay.departureTime}"
                                locale="#{bean.locale}" popup="true"
                                datePattern="#{legForDisplay.datePattern}"
                                converter="dateConverter" inputStyle="width:80px">
                                <f:ajax event="change" execute="@this"/>
                            </rich:calendar>
                        </rich:column>
                        <rich:column>
                            <f:facet name="header">
                                <h:outputText value="ETD (HHmm)" />
                            </f:facet>
                            <h:inputText value="#{legForDisplay.etd}" style="width : 30px;">
                                <f:ajax event="change" execute="@this"/>
                            </h:inputText>
                        </rich:column>
                        <rich:column>
                            <f:facet name="header">
                                <h:outputText value="ADEP" />
                            </f:facet>
                            <rich:autocomplete mode="cachedAjax" minChars="2"
                                autocompleteMethod="#{bean.autocomplete}"
                                autofill="false" value="#{legForDisplay.adep}">
                                <f:ajax event="change" execute="@this"/>
                            </rich:autocomplete>
                        </rich:column>
                        <rich:column>
                            <f:facet name="header">
                                <h:outputText value="ADES" />
                            </f:facet>
                            <rich:autocomplete mode="cachedAjax" minChars="2"
                                autocompleteMethod="#{bean.autocomplete}"
                                autofill="false" value="#{legForDisplay.ades}">
                                <f:ajax event="change" execute="@this"/>
                            </rich:autocomplete>
                        </rich:column>
                        <rich:column>
                            <f:facet name="header">
                                <h:outputText value="Male Pax" />
                            </f:facet>
                            <h:inputText value="#{legForDisplay.malePax}">
                                <f:ajax />
                            </h:inputText>
                        </rich:column>
                        <rich:column>
                            <f:facet name="header">
                                <h:outputText value="Female Pax" />
                            </f:facet>
                            <h:inputText value="#{legForDisplay.femalePax}">
                                <f:ajax />
                            </h:inputText>
                        </rich:column>
                        <rich:column>
                            <f:facet name="header">
                                <h:outputText value="Child Pax" />
                            </f:facet>
                            <h:inputText value="#{legForDisplay.childPax}">
                                <f:ajax />
                            </h:inputText>
                        </rich:column>
                    </rich:dataTable>
                </h:form>
    </rich:panel>
    <rich:panel>
        <h:form>
            <a4j:commandButton value="Compute Mission"
                action="#{bean.doStuff}"
                render="@form">
            </a4j:commandButton>
        </h:form>
    </rich:panel>
</h:body> 
```

如何将日历/自动完成组件中的值设置为List中的相应`legForDisplay`元素？`legsForDisplay`

我试图阅读有关该主题的所有相关问题，但找不到该问题的解决方案，这似乎相当基本......

谢谢

编辑 ：

如果在丰富的数据表中放置一个虚拟提交按钮，一切正常。我可以按下这个虚拟按钮，然后“计算任务”和值已经存储在 bean 中。

```
<a4j:commandButton value="Submit"
    action="#{missionHandler.dummySubmit}" limitRender="true"
    render="legTable">
</a4j:commandButton> 
```

我担心的是我想从位于另一个面板中的“计算任务”按钮以另一种形式提交，而无需先单击“虚拟按钮”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T10:10:10.123

尝试在没有 BIG 形式的情况下使用它：

```
<a4j:commandButton value="Submit" execute="legForm"
   action="#{missionHandler.dummySubmit}" limitRender="true"
  render="legTable">
</a4j:commandButton> 
```

# validation - 如何在 grails 布局中显示表单的所有错误？

> ID：15311868
> 
> 赞同：1
> 
> 时间：2013-03-09T14:37:32.657
> 
> 标签：validation, grails

我的布局页面中有以下代码：

```
<g:hasErrors>
    <div class="alert alert-error">Please try submitting again</div>
    <g:eachError>
        <p>${it.defaultMessage}</p>
    </g:eachError>
</g:hasErrors> 
```

基本上在提交表单时，如果有任何错误，那么我希望显示错误。

但是，错误显示如下：

```
Please try submitting again
Property [{0}] of class [{1}] cannot be blank 
```

为什么没有正确显示消息？

这就是我的限制条件：

```
static constraints = {
    color(nullable:  false, blank: false, size: 5..15)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:34:11.333

尝试对所有注入的参数调用错误消息。有关更多自定义，请参阅您的*message.properties*。

```
<g:hasErrors>
  <div class="alert alert-error">Please try submitting again</div>
    <g:eachError>
      <p><g:message error="${it}" /></p>
    </g:eachError>
</g:hasErrors> 
```

# php - php：显示来自其他网站的 png 图片

> ID：15311870
> 
> 赞同：0
> 
> 时间：2013-03-09T14:37:44.083
> 
> 标签：php, png

我有 2 个网站，并希望使用 PHP在*B*面内重用站点*A的图片。*

 *我已经调查过`@readfile()`了

```
header('Content-Type: image/png');
echo(file_get_contents('http://site_a.com/img.png')); 
```

因为我喜欢在我的内容中显示图片，所以我得到一个明显的**标题已经发送**错误。

有没有办法绕过这个或其他功能来显示`png`存储在我的其他网站上的图片？

要求显示代码：

```
<html>
<head>
<title>test</title>
</head>
<body>
<h1>Content</h1>
<?php 
 header('Content-Type: image/png');
 @readfile('http://site_a.net/img/picture.png');
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:51:42.523

br 标签在那里做什么？

这是代码的规则和正确版本；

标头必须是第一个输出。除非您像 Hari 建议的那样使用输出缓冲，否则您不能在回显某些内容或在输出之后发送标头。

尝试

```
<?php
header('Content-Type: image/png');
echo(file_get_contents('http://site_a.com/img.png'));
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:46:35.193

尝试放在`<?php ob_start(); ?>`网页的开头和结尾`<?php ob_flush(); ?>`*

# haskell - 重新审视具有约束类型的多态 STUArray

> ID：15311872
> 
> 赞同：6
> 
> 时间：2013-03-09T14:37:53.723
> 
> 标签：haskell, marray, constraint-kinds, stuarray

我想实现一个分数类型的动态规划算法多态；这是一个没有边界条件的简化一维版本：

```
{-# LANGUAGE ConstraintKinds, FlexibleContexts, RankNTypes, ScopedTypeVariables #-}

import Control.Monad
import Control.Monad.ST.Strict
import Data.Array.ST
import Data.Array.Unboxed

dynamicProgrammingSTU
  :: forall e i . (
    IArray UArray e,
    forall s. MArray (STUArray s) e (ST s),
    Ix i
  )
  => (forall m . Monad m => (i -> m e) -> (i -> m e))
  -> (i, i)
  -> (i -> e)
dynamicProgrammingSTU prog bnds = (arr !) where
  arr :: UArray i e
  arr = runSTUArray resultArrayST

  resultArrayST :: forall s . ST s (STUArray s i e)
  resultArrayST = do
    marr <- newArray_ bnds
    forM_ (range bnds) $ \i -> do
      result <- prog (readArray marr) i
      writeArray marr i result
    return marr 
```

约束不起作用；

```
 Could not deduce (MArray (STUArray s) e (ST s))
      arising from a use of `newArray_'
    from the context (IArray UArray e,
                      forall s. MArray (STUArray s) e (ST s),
                      Ix i)
      bound by the type signature for
                 dynamicProgrammingSTU :: (IArray UArray e,
                                           forall s. MArray (STUArray s) e (ST s
), Ix i) =>
                                          (forall (m :: * -> *). Monad m => (i -
> m e) -> i -> m e)
                                          -> (i, i) -> i -> e
      at example2.hs:(17,1)-(27,15)
    Possible fix:
      add (MArray (STUArray s) e (ST s)) to the context of
        the type signature for resultArrayST :: ST s (STUArray s i e)
        or the type signature for
             dynamicProgrammingSTU :: (IArray UArray e,
                                       forall s. MArray (STUArray s) e (ST s), I
x i) =>
                                      (forall (m :: * -> *). Monad m => (i -> m
e) -> i -> m e)
                                      -> (i, i) -> i -> e
      or add an instance declaration for (MArray (STUArray s) e (ST s))
    In a stmt of a 'do' block: marr <- newArray_ bnds
    In the expression:
      do { marr <- newArray_ bnds;
           forM_ (range bnds) $ \ i -> do { ... };
           return marr }
    In an equation for `resultArrayST':
        resultArrayST
          = do { marr <- newArray_ bnds;
                 forM_ (range bnds) $ \ i -> ...;
                 return marr }
Failed, modules loaded: none. 
```

总结一下，`Could not deduce (MArray (STUArray s) e (ST s)) from the context forall s. MArray (STUArray s) e (ST s i)`。请注意，将约束添加到`resultArrayST`只是将问题推到`runSTUArray`.

我目前知道四个有缺陷的解决方案：

1.  避免 boxed `STArray`s 或简单的 non-monadic `Array`s 的问题，也许使用`seq`和 bang 模式来缓解由此产生的内存问题。
2.  `unsafeFreeze`用and打破类型系统，`unsafePerformIO`该死的约束`MArray IOUArray e IO`工作正常。
3.  [此](https://stackoverflow.com/a/2244281/2036189)解决方案使用类型类并为每个“不可装箱”类型编写实例来解决类似问题。
4.  [这个](https://stackoverflow.com/a/2224463/2036189)使用 GHC 重写规则为每种类型（和通用`STArray`版本）选择不同的功能。

但是，我问这个问题是希望像现代语言扩展这样`ConstraintKinds`可以让我表达我的原始代码的意图`forall s. MArray (STUArray s) e (ST s)`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:20:56.493

鉴于 Haskell 社区传说中的乐于助人，在这一点上缺乏答案强烈表明在当前类型系统中没有好的解决方案。

我已经在问题中概述了有缺陷的解决方案，所以我将发布我的示例的完整版本。这基本上是我用来解决 Rosalind 上大多数对齐问题的方法：

```
{-# LANGUAGE FlexibleContexts, RankNTypes, ScopedTypeVariables #-}

import Control.Applicative
import Control.Monad
import Control.Monad.ST
import Data.Maybe

import Data.Array.ST
import Data.Array.Unboxed

class IArray UArray e => Unboxable e where
  newSTUArray_ :: forall s i. Ix i => (i, i) -> ST s (STUArray s i e)
  readSTUArray :: forall s i. Ix i => STUArray s i e -> i -> ST s e
  writeSTUArray :: forall s i. Ix i => STUArray s i e -> i -> e -> ST s ()

instance Unboxable Bool where 
  newSTUArray_ = newArray_
  readSTUArray = readArray
  writeSTUArray = writeArray

instance Unboxable Double where 
  newSTUArray_ = newArray_
  readSTUArray = readArray
  writeSTUArray = writeArray
{-
Same for Char, Float, (Int|Word)(|8|16|32|64)...
-}

{-# INLINE dynamicProgramming2DSTU #-}
dynamicProgramming2DSTU
  :: forall e i j . (
    Unboxable e,
    Ix i,
    Ix j,
    Enum i,
    Enum j
  )
  => (forall m . (Monad m, Applicative m) => (i -> j -> m e) -> (i -> j -> m e))
  -> (i -> j -> Maybe e)
  -> (i, i)
  -> (j, j)
  -> (i -> j -> e)
dynamicProgramming2DSTU program boundaryConditions (xl, xh) (yl, yh) = arrayLookup where
  arrayLookup :: i -> j -> e
  arrayLookup xi yj = fromMaybe (resultArray ! (xi, yj)) $ boundaryConditions xi yj

  arrB :: ((i, j), (i, j))
  arrB = ((xl, yl), (xh, yh))

  resultArray :: UArray (i, j) e
  resultArray = runSTUArray resultArrayST

  resultArrayST :: forall s. ST s (STUArray s (i, j) e)
  resultArrayST = do
    arr <- newSTUArray_ arrB
    let acc xi yj = maybe (readSTUArray arr (xi, yj)) return $ boundaryConditions xi yj

    forM_ [xl..xh] $ \xi -> do
      forM_ [yl..yh] $ \yj -> do
        result <- program acc xi yj
        writeSTUArray arr (xi, yj) result

    return arr 
```

# html - 不使用 404 页面的缺点是什么？

> ID：15311875
> 
> 赞同：0
> 
> 时间：2013-03-09T14:38:13.140
> 
> 标签：html, http, web

假设用户尝试访问我没有定义的 URL，站长有两个选择：

1.  使用 HTML 代码进行响应`404 Not Found`以维护网站的外观并告诉用户*“我们找不到此页面，您是否打错字了？”*

2.  使用 HTML 代码进行响应`200 OK`以维护网站的外观并告诉用户*“我们找不到此页面，您是否打错字了？”*

基本上，每个人似乎都选择选项 1，但我在想，为什么不使用选项 2？

**如果网站管理员**使用而不是响应未定义的 URL，他将面临什么真正**的缺点**？**`200 OK``404 Not Found`**

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T14:39:59.700

为什么不选择选项 2？

因为它**破坏了网络**。任何自动化代理都会了解存在的缺失资源。搜索引擎将继续指向不再存在的页面/图像/资源。

HTTP 协议具有特定的语义 - 为“找不到文件”返回 404 是这些语义之一。

* * *

以此类推——如果你给朋友寄信。你宁愿用“不再住在这里”（404）取回它，还是用......没有任何迹象表明有问题（200）？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T15:12:25.117

您要求使用 200 而不是 404 作为“未找到”页面的真正可量化的缺点。

最大的可以追溯到搜索引擎。

搜索引擎会将 200 响应视为有效页面。这意味着您最终可能会在搜索引擎结果中看到大量无用的页面。这可能会损害您的网站在发现无效页面的访问者中的声誉。

您还有一个缺点，即即使它们无效，搜索引擎也会不断返回这些 URL 进行扫描，因为您没有做任何事情来告诉它们它们是无效的。除非您为站点使用的带宽付费，否则这不会直接影响您。但是，如果您是，那么如果搜索引擎点击无效页面，它将增加您的带宽成本，而对您没有任何实际好处。不花钱绝对是劣势。

最后——也许更重要的是——所有那些“未找到”的页面将被搜索引擎视为重复的内容。搜索引擎会主动惩罚具有多个具有相同内容的页面的网站，这意味着通过为您的通用“未找到”页面提供 200 个代码，您很有可能降低整个网站的搜索引擎排名。这是一个网站可能发生的最糟糕的事情，所以如果你正在寻找使用 200 代码而不是 404 代码的真正缺点，那就是它了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T14:43:33.453

404 代码不是针对人类访问者的，而是针对搜索引擎等的。

搜索引擎可能很难通过仅查看页面中的文本来确定响应对于请求是否合理。404 代码发送一个明确的信号，表明该 URL 不会指向有用的资源。这样，搜索引擎可以在搜索结果中列出您的实际页面，而不是过去曾导致某事的旧地址。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T14:40:50.950

如果不是人访问您的页面，那么您会得到该页面存在的印象。

这很重要，因为没有此代码，搜索引擎（和其他非人类用户）会认为该链接是有效的，并且他们已经到达了您网站的实际部分。实际上，这意味着原则上某人可能会在搜索引擎中遇到错误页面，因为搜索引擎会将其视为您网站的有效部分。**

# mysql - 具有 SUM(column1) <> column2 的 MySQL 不起作用

> ID：15311877
> 
> 赞同：0
> 
> 时间：2013-03-09T14:38:21.580
> 
> 标签：mysql, group-by, sum, aggregate-functions, having

我正在处理一个查询，该查询必须将连接表中的元素总和与“主”表中的字段值进行比较。这是我的查询的要点：

```
SELECT t1.id
FROM table1 AS t1
INNER JOIN table2 t2 ON t2.t1_id = t1.id -- AND OTHER CONDITIONS
-- WHERE more t1 conditions
GROUP BY t1.id
HAVING SUM(t2.amount) <> t1.total_amount
AND SUM(t2.amount) = (t1.component1+t1.component2+t1.component3+t1.component4); 
```

它输出： ERROR 1054 (42S22): Unknown column 't1.total_amount' in 'having Clause' 不用说，该字段存在于 t1 中并且没有拼写错误（quadra-checked this，这里濒临疯狂）。

* * *

我一生都无法弄清楚这里出了什么问题。我已经尝试过搜索 SO 并且大多数问题是由于人们使用 HAVING 而不是 WHERE，但是看到我正在使用 SUM()，我认为这是正确的方法。

* * *

编辑：Terje 的回答是最准确的，尽管我确实设法在没有使用该语法的情况下完成了它（可能是有史以来最愚蠢的更新句子）我的更新句子，这是（愚蠢的，除非一切都不要在家里尝试这个否则失败）：

```
UPDATE t1
SET t1.total_amount = 
(
  SELECT SUM(t2.amount) 
  FROM table 2
  --WHERE, AND 
  GROUP BY t1.id
  HAVING SUM(t2.amount) <> t1.total_amount
  AND SUM(t2.amount) = (t1.component1+t1.component2+t1.component3+t1.component4)
)
WHERE t1.id IN (same awful subquery as before, except selecting t2.t1_id)
--AND other conditions
; 
```

PS：这里的最终目标是在更新句子中使用相同的条件提前致谢，-Lauri

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:57:07.690

为了与您进行比较，`t1.total_amount`您必须将其添加到`GROUP BY`子句中，或与例如进行比较`min(total_amount)`。当您按`t1.id`它进行分组时，您使用的 total_amount 的聚合函数无关紧要。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-09T14:51:40.163

`HAVING`并且`GROUP BY`仅适用于您实际选择的内容，与`WHERE`and`ORDER BY`子句不同。所以你需要选择`total_amount`，恐怕。 ~~此外，在 MySQL 中，语法是 '!=' 表示不相等。~~（我的立场是正确的，'<>' 在 MySQL 中很好。）

将`WHERE`和`ORDER BY`视为您对从中选择的表的操作，并且将`HAVING`和`GROUP BY`视为对您现在拥有的数据的操作。

# java - 如何检测是否同时释放了两个鼠标按钮？

> ID：15311878
> 
> 赞同：3
> 
> 时间：2013-03-09T14:38:24.630
> 
> 标签：java, swing, mouseevent

我正在实现扫雷，处理鼠标事件时遇到了一点问题。我希望在 mouseRelease（而不是 mousePressed）上执行操作，因此用户可以在按下鼠标按钮后改变主意。有三种可能的操作：

1.  LMB 发布 - 揭示当前领域
2.  人民币释放 - 在当前领域放置一个标志
3.  LMB 和 RMB 均已发布 - 突出显示或显示相邻字段

动作并不重要，我的问题是如何触发它们。

在情况 1 和 2 中，没有其他按钮处于关闭状态 - 这很容易检查。

问题是释放两个按钮会导致两次调用 mouseRelease 方法。如果两个按钮释放之间的延迟太大，我宁愿不触发动作。换句话说，只有在大约同时释放两个按钮时才会触发。

当按钮 1 被释放时，我可以很容易地检查按钮 3 是否按下，但这并没有真正的帮助。

目前我没有其他想法，然后存储释放第一个按钮的时间，然后将其与释放另一个按钮的时间进行比较 - 如果差异足够小，则触发一个动作。

我真的不喜欢玩 System.currentTimeMillis() 或 System.nanoTime() 的想法，我想知道是否有更好的方法？

**解决方案：**

极大简化了问题的是不允许用户将鼠标指针拖动到另一个字段（并因此更改“选定”字段）。释放两个按钮之间的延迟无关紧要。如果鼠标指针转到另一个字段，则所有内容都将被清除。这是代码片段：

```
private static final int B1DM = MouseEvent.BUTTON1_DOWN_MASK;
private static final int B3DM = MouseEvent.BUTTON3_DOWN_MASK;

private boolean bothWereDown = false;

@Override
public void mousePressed(MouseEvent e) {

    // action if single button pressed
    // in my case this is a sub-action of pressing both buttons

    int both = B1DM | B3DM;
    bothWereDown = (e.getModifiersEx() & both) == both;

    if (bothWereDown) {
        // action if both buttons pressed
    }
}

@Override
public void mouseDragged(MouseEvent e) {

    // some other code

    if ( /* if pointer leaves field where mouse was pressed */) {
        // some other code
        bothWereDown = false;
        // some other code
    }
}

@Override
public void mouseReleased(MouseEvent e) {
    // some other code

    if (e.getButton() == MouseEvent.BUTTON1) {
        if (bothWereDown) {
            if ((e.getModifiersEx() & B3DM) != B3DM) {
                // action if both released
            }
        } else {
            // action if left button released
        }
    } else if (e.getButton() == MouseEvent.BUTTON3) {
        if (bothWereDown) {
            if ((e.getModifiersEx() & B1DM) != B1DM) {
                // action if both released
            }
        } else {
            // action if right button released
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T14:42:45.480

明显的解决方案是跟踪鼠标按下。我认为在这种情况下不需要玩超时。

因此，按下两个按钮，然后释放一个按钮，不会被视为释放单个按钮。事实上，在你的情况下，它可能什么都不做。只有当其他鼠标按钮也被释放时，才算作同时释放了两个按钮。

编辑：实际上，您甚至不需要跟踪鼠标按下，尽管您可能希望直观地指示按钮被按下，并且释放它会产生效果。但是当按钮被释放时，你检测到另一个按钮仍然被按下，只需设置一个标志，表明两个按钮释放已经发生一半，然后一个按钮的单次释放将完成。如果在单按钮释放时未设置标志，则它不是两个按钮操作的一部分，而是您执行单按钮释放操作。

# html - 解析问题

> ID：15311881
> 
> 赞同：0
> 
> 时间：2013-03-09T14:38:33.857
> 
> 标签：html, c, parsing, strtok, strsep

如何仅使用 strtok 和/或 strsep 解析 html/txt 文件？

我正在尝试将维基百科文章的文本部分保存到 .txt 文件中。我的代码的第一部分允许我以 html 格式下载文章。接下来我应该做的是解析该 html 文件并将其保存为 txt 文件。

# google-maps - 如何使用复选框打开和关闭 Google 地图图层？

> ID：15311886
> 
> 赞同：5
> 
> 时间：2013-03-09T14:38:56.433
> 
> 标签：google-maps, google-maps-api-3, checkbox

我正在尝试使用复选框将可切换的交通、云和天气图层添加到 Google 地图。但是，当我尝试这样做时，无论复选框是选中还是未选中，所有图层都会消失。我从来没有在 Javascript 中做过这样的事情，而且我对 Javascript 真的很陌生，所以我不知道我做错了什么。这是我的代码，任何帮助都会很棒！

Javascript：

```
 function check() 
    {
        var weatherLayer = new google.maps.weather.WeatherLayer({
        temperatureUnits: google.maps.weather.TemperatureUnit.FAHRENHEIT
        });
        var trafficLayer = new google.maps.TrafficLayer();
        var cloudLayer = new google.maps.weather.CloudLayer();

        if(document.getElementById('weather').checked)

        {weatherLayer.setMap(map);}

        else if(!document.getElementById('weather').checked)

        {weatherLayer.setMap(map);}

        cloudLayer.setMap(map);

        trafficLayer.setMap(map);
    } 
```

html

```
 <label><input type="checkbox" id="weather" checked="checked" onclick="check()" />Weather</label>
        <label><input type="checkbox" id="clouds" onclick="check()" />Clouds</label>
        <label><input type="checkbox" id="traffic" onclick="check()" />Traffic</label> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T16:17:58.743

1.  要使用天气层，您需要包含[库](https://developers.google.com/maps/documentation/javascript/libraries)
2.  要在全局范围内启用和禁用图层（HTML 点击侦听器运行的地方），您的地图需要是全局的（在任何函数之外定义它，但在 onload 事件中对其进行初始化）
3.  您还需要在全局范围内定义图层。
4.  显示一个图层，使用 setMap(map)，隐藏它使用 setMap(null)

修改“检查”功能：

```
 function check() 
{

    if(document.getElementById('weather').checked)

      {weatherLayer.setMap(map);}

    else 

      {weatherLayer.setMap(null);}

    if(document.getElementById('clouds').checked)

      {cloudLayer.setMap(map);}

    else 

      {cloudLayer.setMap(null);}

    if(document.getElementById('traffic').checked)

       {trafficLayer.setMap(map);}

    else

       {trafficLayer.setMap(null);}
} 
```

[工作示例](http://www.geocodezip.com/v3_simpleMap_layers.html)

# python - Windows机器上python的无缓冲字符输入

> ID：15311887
> 
> 赞同：2
> 
> 时间：2013-03-09T14:38:58.807
> 
> 标签：python, input, character

**我想要做什么**

我正在尝试设计带有单圈计时功能的秒表。当您按“L”时，一圈完成，当您按“S”时，所有圈都完成，计时按顺序显示。

在 C++ 中，我可以使用 conio.h 中的函数 _getch() 来做到这一点，这很容易。我想用 python 编写这个程序，因为它会更容易，而且用 C++ 处理时间也很困难。

我仍然在此链接上编写了一个程序（用于立方体计时）： [Cube timer](http://cubetimersoftware.blogspot.com)

**问题**

没有像 _getch() 这样的函数。这是一个问题，因为在一圈结束时，您不能按一个键和一个回车键，因为这会花费时间并且会刺激用户。

**我读的东西**

我读到了 curses 库，但可惜它没有 Windows 端口。

我尝试了一个应该根据网站运行的程序。这是来自链接

[链接到 getch 食谱](http://code.activestate.com/recipes/134892-getch-like-unbuffered-character-reading-from-stdin/)

但它没有用。

**我尝试了什么：**

1.  `msvcrt.getch()`

```
    >>> 导入 msvcrt
    >>> msvcrt.getch()
    '\xff'

```

我相信 FF 是 255 的十六进制等价物。

我不明白为什么会这样。

1.  `readch()` 正如@martineau 中所建议的那样

    导入 msvcrt

    def readch(echo=True): "在 Windows 上获取单个字符。" while msvcrt.kbhit(): # 清除键盘缓冲区 msvcrt.getch() ch = msvcrt.getch() while ch in '\x00\xe0': # 箭头或功能键前缀？msvcrt.getch() ch = msvcrt.getch() # 第二次调用返回实际键码 if echo: msvcrt.putch(ch) return ch.decode()

    一个 = []

    对于范围内的 i (10): a.append(readch())

我得到的错误：

```
>>> 

Traceback (most recent call last):
  File "C:/Python25/1.py", line 30, in <module>
    a.append(readch())
  File "C:/Python25/1.py", line 25, in readch
    return ch.decode()
UnicodeDecodeError: 'ascii' codec can't decode byte 0xff in position 0: ordinal not in range(128) 
```

**我需要什么帮助**

类似于 _getch() 的函数或在 Windows 机器上工作的等效函数。

**机器规格**

Python IDLE 2.5.4 或 2.6 或 2.7

视窗 XP SP3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T17:41:48.603

这就是我使用的似乎在 Windows 控制台中工作的东西。它有点类似于 ActiveState 配方，只是它只适用于 Windows。它基于[此](http://msdn.microsoft.com/en-us/library/078sfkak%28v=vs.90%29.aspx) **msdn**文档，用于`_getwch()`.

```
#### windows only ####
import msvcrt

def readch(echo=True):
    "Get a single character on Windows."
    while msvcrt.kbhit():  # clear out keyboard buffer
        msvcrt.getwch()
    ch = msvcrt.getwch()
    if ch in u'\x00\xe0':  # arrow or function key prefix?
        ch = msvcrt.getwch()  # second call returns the actual key code
    if echo:
        msvcrt.putwch(ch)
    return ch

def pause(prompt='Press any key to continue . . .'):
    if prompt:
        print prompt,
    readch(echo=False) 
```

（更新为处理 Unicode）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:13:37.267

如果您询问如何在没有输入的情况下读取输入，您可能正在寻找绑定，我相信这需要一个 Tkinter 窗口。

```
lapEnded = bind_all("<KeyPress-l>", endLap)
stopRunning = bind_all("<KeyPress-s", noMoreRunning) 
```

然后，您定义函数`endLap`和`noMoreRunning`，它们执行它们的功能。根据您的 Tkinter 和/或 Python 版本，`bind_all`可能只是`bind`. 希望这能回答你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-07T10:44:11.337

您不能在 IDLE 中使用 msvcrt 库。在 Windows 命令行中尝试您的代码。

# prolog - 如何判断一个对象是否唯一

> ID：15311893
> 
> 赞同：0
> 
> 时间：2013-03-09T14:39:09.303
> 
> 标签：prolog, logic, unique

我只是无法解决我在prolog中遇到的这个问题。才刚刚开始，但我似乎无法找到一种方法来确定一个对象是否是唯一的。这是我的代码：

```
/* (Student Name, Student Number)*/
Student(stuart, 11234).
Student(ross, 11235).
Student(rose, 11236).
Student(stuart, 11237). 
```

我怎样才能知道一个学生是否是独一无二的。以斯图尔特为例，有两个学生叫斯图尔特，所以斯图尔特不是唯一的。我如何编写一个程序来判断它是否是另一个名为 Stuart 的学生。

我试过在这上面花了很多时间，但我似乎无法处理原来的斯图尔特而不是另一个斯图尔特，因为我不能排除我试图找出它是否独特的那个.

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:00:18.577

使用您的数据库示例，这可以做到

```
unique(S) :-
    student(S, N), \+ (student(S, M), M \= N). 
```

因为它产生

```
?- unique(S).
S = ross ;
S = rose ;
false. 
```

一般来说，Prolog 的目标是解决方案的*存在*。然后关于基数的预测需要语言的“不纯”部分的一些支持：[nb_setarg](http://www.swi-prolog.org/pldoc/doc_for?object=nb_setarg/3)当我们需要*有效地*跟踪基数时，它是我们目前最好的朋友。

使用这样的元谓词：

```
%%  count_solutions(+Goal, ?C)
%
%   adapted from call_nth/2 for http://stackoverflow.com/a/14280226/874024
%
count_solutions(Goal, C) :-
    State = count(0, _), % note the extra argument which remains a variable
    (   Goal,
        arg(1, State, C1),
        C2 is C1 + 1,
        nb_setarg(1, State, C2),
        fail
    ;   arg(1, State, C)
    ).

:- meta_predicate count_solutions(0, ?). 
```

你可以在不考虑第二个论点的情况下解决问题

```
unique(S) :-
    student(S, _), count_solutions(student(S, _), 1). 
```

相同的谓词可以使用来自 library(aggregate) 的 aggregate_all(count, student(S,_), 1)，但是这样的库目前在内部构建一个列表，那么您可以认为 Peter 的答案更容易实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T20:26:14.440

可能有很多方法可以解决这个问题，但我会这样做：

```
% a student has a name and a number
student(stuart, 11234).
student(ross, 11235).
student(rose, 11236).
student(stuart, 11237). 
```

这段代码说“找到一个长度与姓名相同的学生数量的列表”，然后“使 Count 与列表的长度相同”：

```
% for every student name there is an associated count of how many times 
%   that name appears
number_students(Name, Count) :-
    findall(_, student(Name, _), Students),
    length(Students, Count). 
```

此谓词仅在 number_students 为 1 时为真：

```
% a student name is unique (appears once and only once) is the 
%  number_students count is 1
unique_student(Name) :-
    number_students(Name, 1). 
```

测试：

```
12 ?- unique_student(ross).
true.

13 ?- unique_student(rose).
true.

14 ?- unique_student(bob).
false.

15 ?- unique_student(stuart).
false. 
```

这是解决问题的一种简单方法，但它不是一个**很好的**Prolog 解决方案，因为您不能说“给我一个唯一的学生姓名”之类的话并获得所有唯一姓名的列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T16:15:46.317

对您拥有的代码的一些评论。这不是事实：

```
Student(Ross). 
```

这是两个不同的事实（至少在 SWI-Prolog 中）：

```
student(ross).
student('Ross'). 
```

换句话说，谓词名称必须以小写字母开头，而以大写字母开头的标识符表示变量，而不是原子。您可以将任何字符串放在单引号中以使其成为有效的原子。

现在这个问题已经解决了，目前还不清楚你的目标是什么。你打算怎么处理你独特的学生？你怎么知道第一个是你要找的，而不是第二个？为什么不使用学生编号（至少在您的示例中，两个 Stuarts 似乎有不同的编号）？

# php - Chrome 无法使用 PHP/JS 生成多个 JW 播放器

> ID：15311912
> 
> 赞同：2
> 
> 时间：2013-03-09T14:40:41.563
> 
> 标签：php, javascript, google-chrome, jwplayer, dynamically-generated

我很难让 Chrome 使用 PHP 和 Javascript 生成多个 JW 播放器。顺便提一下，在 Opera/Pale Moon/Firefox 中一切正常。这是[它的外观](https://dl.dropbox.com/u/34696560/MMD/_skrin.jpg)，这是[它在 Chrome 中的呈现方式](https://dl.dropbox.com/u/34696560/MMD/_chrome.jpg)。有趣的是，当我将鼠标悬停在 JW 播放器应该在的地方时，光标变为“指针”，我实际上可以播放文件，只是播放器本身是不可见的。

我有多个音频文件，它们的所有信息（文件名、路径、描述等）都在 MySQL 数据库中。因此，while 循环为数据库中的每个文件生成单独的 DIV，并将其 ID 标记设置为文件名值。这是代码（我省略了 MySQL 查询和其他所有内容，因为这是麻烦的部分）：

```
<?php
while ($row = mysql_fetch_array($query)){
    $fullpath = $row['fileFolder'].$row['fileName']; ?>
    <div id="<?php echo $row['fileName']; ?>">Loading the player...</div>
        <script type="text/javascript">
        var divName = <?php echo json_encode($row['fileName']); ?>; //since each DIV id has to be different
        var fullpath = <?php echo json_encode($fullpath); ?>;
            jwplayer(divName).setup({
                file: fullpath,
                width:300,
                height:30
            });
        </script>
    <?php
        echo "<p class='descriptionAudio'>".$row['description'];
        echo "<br>";
} ?> 
```

Chrome 显示的源代码与工作浏览器相同，而 Chrome 的开发者工具显示：

```
There was an error while handling a listener: Error: SyntaxError: DOM Exception 12 function (a){n.playerReady(a);f.css.unblock()} jwplayer.js:3
42 Uncaught Error: SyntaxError: DOM Exception 12 
```

顺便说一句，当我手动设置 DIVs ID 值时，一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:30:42.063

您说当您手动指定 ID 而不是根据文件名指定 ID 时它会起作用，如下行所示：

```
 <div id="<?php echo $row['fileName']; ?>">Loading the player...</div> 
```

这使得来自数据库的其中一个 ID 很可能不符合[格式良好的 DOM ID 的要求。](https://stackoverflow.com/q/1077084)

尝试查找使用的无效字符，或使用增量的数字 ID 字段（以类似的前缀`file_`）代替。

# r - R：构建应用函数以根据其他（相关）列中的条件查找最少的列

> ID：15311917
> 
> 赞同：0
> 
> 时间：2013-03-09T14:41:11.357
> 
> 标签：r, conditional, apply, minimum

使用以下数据，如果测试为真，我试图将任何测试列（test_A 等）重新分配给它们相应的时间列（time_A 等），然后找到所有真实测试时间的最小值.

```
 [ID] [time_A] [time_B] [time_C] [test_A] [test_B] [test_C] [min_true_time]
[1,]    1        2        3        4    FALSE     TRUE     FALSE          ?
[2,]    2       -4        5        6     TRUE     TRUE     FALSE          ?
[3,]    3        6        1       -2     TRUE     TRUE      TRUE          ?
[4,]    4       -2        3        4     TRUE    FALSE     FALSE          ? 
```

我的实际数据集非常大，所以我对 if 和 for 循环的尝试都失败了。但我无法在应用功能上取得任何进展。

而更多的负时间，比如 -2 将被认为是第 3 行的最小值。

欢迎任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:09:59.197

您没有提供太多信息，但我认为这可以满足您的需要。不知道它是否足够有效，因为你没有说你的数据集实际上有多大。

```
#I assume your data is in a data.frame:
df <- read.table(text="ID time_A time_B time_C test_A test_B test_C 
1    1        2        3        4    FALSE     TRUE     FALSE
2    2       -4        5        6     TRUE     TRUE     FALSE
3    3        6        1       -2     TRUE     TRUE      TRUE
4    4       -2        3        4     TRUE    FALSE     FALSE")

#loop over all rows and subset column 2:4 with column 5:7, then take the mins
df$min_true_time <- sapply(1:nrow(df), function(i) min(df[i,2:4][unlist(df[i,5:7])]))
df
#  ID time_A time_B time_C test_A test_B test_C min_true_time
#1  1      2      3      4  FALSE   TRUE  FALSE             3
#2  2     -4      5      6   TRUE   TRUE  FALSE            -4
#3  3      6      1     -2   TRUE   TRUE   TRUE            -2
#4  4     -2      3      4   TRUE  FALSE  FALSE            -2 
```

另一种可能更快的方式（我没有心情进行基准测试）：

```
m <- as.matrix(df[,2:4])
m[!df[,5:7]] <- NA
df$min_true_time <- apply(m,1,min,na.rm=TRUE) 
```

# ruby-on-rails - 如何在rails中的表中添加唯一列

> ID：15311918
> 
> 赞同：0
> 
> 时间：2013-03-09T14:41:15.063
> 
> 标签：ruby-on-rails, database, unique

我有桌子。而且我已经进行了迁移并设置在那里`add_column :articles, :hash_code, :string, :unique => true`，但它不起作用。

你能给我任何帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:49:56.487

:unique => true 属于 add_index 语句而不是 add_column 语句。

add_index 语法如下所示：

add_index :table_name, :column_name, :unique => true

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:47:39.840

根据[指南](http://guides.rubyonrails.org/migrations.html#active-record-and-referential-integrity)

> Active Record 方式声称智能属于您的模型，而不是数据库。因此，诸如触发器或外键约束等将部分情报推回数据库的功能并未得到大量使用。
> 
> validates :foreign_key, :uniqueness => true 等验证是模型强制数据完整性的一种方式。关联上的 :dependent 选项允许模型在父对象被销毁时自动销毁子对象。

因此，您需要做的就是验证模型中属性的唯一性，就是这样！如果您也想添加索引，那么可以将其添加到迁移文件本身中。

# c++ - 在我的程序中，Record* 和 Databse* 有什么区别？

> ID：15311919
> 
> 赞同：1
> 
> 时间：2013-03-09T14:41:22.333
> 
> 标签：c++, linked-list, dynamic-memory-allocation

我正在使用 Dev C++ 编译器。所以，这里出了什么问题，我在 addRecord 模块中遇到错误。

编译日志：

```
Compiler: Default compiler
Executing  g++.exe...
g++.exe "C:\SAI,MANI\test_add(09.03.2013).cpp" -o "C:\Users\Ravitheja\Desktop\C and C++\Projects\SAI,MANI\test_add(09.03.2013).exe"   -O3 -g3 
-I"C:\Dev-Cpp\lib\gcc\mingw32\3.4.2\include"  -I"C:\Dev-Cpp\include\c++\3.4.2\backward"  -I"C:\Dev-Cpp\include\c++\3.4.2\mingw32"  -I"C:\Dev-Cpp\include\c++\3.4.2"  -I"C:\Dev-Cpp\include"   -L"C:\Dev-Cpp\lib" -g3 
C:\SAI,MANI\test_add(09.03.2013).cpp: In function `void addRecord(Record*)':
C:\SAI,MANI\test_add(09.03.2013).cpp:151: error: using typedef-name `Record' after `struct'
C:\SAI,MANI\test_add(09.03.2013).cpp:151: error: cannot convert `Record*' to `Database*' in assignment
C:\SAI,MANI\test_add(09.03.2013).cpp:153: error: expected primary-expression before '*' token
C:\SAI,MANI\test_add(09.03.2013).cpp:153: error: expected primary-expression before ')' token
C:\SAI,MANI\test_add(09.03.2013).cpp:153: error: expected `;' before "malloc"
C:\SAI,MANI\test_add(09.03.2013).cpp:154: error: cannot convert `Record*' to `Database*' in assignment

C:\SAI,MANI\test_add(09.03.2013).cpp: In function `void viewRecords(Record*)':
C:\SAI,MANI\test_add(09.03.2013).cpp:180: error: cannot convert `Database*' to `Record*' in assignment

C:\SAI,MANI\test_add(09.03.2013).cpp: In function `int getDate(date*)':
C:SAI,MANI\test_add(09.03.2013).cpp:187: error: conversion from `date*' to non-scalar type `date' requested

Execution terminated 
```

特别是在这一行，

> `x->next = (Record*)malloc(sizeof(struct Record));`

我收到一个错误：无法在分配中将“记录*”转换为“数据库*”，但是记录和数据库之间有什么区别，因为我已经对它们进行了类型定义。

我还没有编写所有模块，我只是想测试我的 addRecord() 和 viewRecords() ，但它不起作用。如何纠正这些错误？

```
#include<iostream>
#include<conio.h>
#include<stdlib.h>
#include<malloc.h>
using namespace std;

// global declarations and function prototypes....

const int TRUE = 1,FALSE = 0,SUCCESS = 1;
const int SUBJECTS = 3;
typedef char String[25];   

// date structure , a better way to store dates.

struct date
{
       int day,month,year;
};

// Database structure , the main double linked list which stores all the information.
typedef struct DataBase
{
       String Name,FatherName,Address,Hometown;
       float Marks[SUBJECTS],Total,Percentage;
       date DOB;
       long int RegNo,PhoneNumber;
       struct Database *previous;        // the addresses of the next and previous nodes in the dll.
       struct Database *next;
}Record;

int main();

int menu();                           //   for displaying menu.
void process(int,Record*);            //   for processing the menu.

void addRecord(Record*);              //   for adding a record.
void delRecord(Record*);              //   for deleting a record.
void modRecord(Record*);              //   for modifying values of a record.
void sortRecords(Record*);            //   for sorting records.
void filterRecords(Record*);          //   for filtering records.
void searchRecords(Record*);          //   for searching a record.
void viewRecords(Record*);            //   for viewing records (all). 

int getDate(date*);                   //   for getting input for a date.
void copyDate(date,date*);            //   for copying two date variables.
int checkDate(date);                  //   for checking wether a given date is correct.
char *toString(int);                  //   for displaying month name given the month number.
void copyRecord(Record*,Record*);     //   for copying contents of one record into another.

// main function...

int main()
{
     Record *r;

     r = (Record*) malloc (sizeof(Record));
     r->next     = NULL;
     r->previous = NULL;

     while(1)
     {
                  process(menu(),r);
     }
}

// the menu function.

int menu()
{
     static int choice;
     cout<<"\n\t\t\t Menu";
     cout<<"\n\t\t\t 1.Add Records ";
     cout<<"\n\t\t\t 2.Delete Records";
     cout<<"\n\t\t\t 3.Modify Records";
     cout<<"\n\t\t\t 4.Sort Records";
     cout<<"\n\t\t\t 5.Filter Records";
     cout<<"\n\t\t\t 6.Search Records";
     cout<<"\n\t\t\t 7.View Records";
     cout<<"\n\t\t\t 8.Exit";
     cout<<"\n\t\t\t YOUR CHOICE : ";
     cin>>choice;
     if(choice>=1 && choice<=7) return choice;
     else if(choice == 8) exit(0);
     else
     {
         cout<<"\n Sorry, that's an invalid choice.";
         cout<<"\n Please Try Again.";
         menu();
     }
}

void process(int choice,Record *r)
{
     switch(choice)
     {
                   case 1:
                        addRecord(r);
                        break;
                   case 2:
                        delRecord(r);
                        break;
                   case 3:
                        modRecord(r);
                        break;
                   case 4:
                        sortRecords(r);
                        break;
                   case 5:
                        filterRecords(r);
                        break;
                   case 6:
                        searchRecords(r);
                        break;
                   case 7:
                        viewRecords(r);
                        break;
     }
}

void addRecord(Record *x)
{
     date *t;
     t = (date*) malloc ( sizeof(date) );
     fflush(stdin);
     Record *temp; temp = (Record*) malloc ( sizeof(Record) );
     cout<<"\n Enter the following details ..... "<<endl;
     cout<<"\n Name            : ";
     gets(temp->Name);
     cout<<"\n Father's Name   : ";
     gets(temp->FatherName);
     cout<<"\n Address         :";
     gets(temp->Address);
     cout<<"\n Hometown        : ";
     gets(temp->Hometown);
     cout<<"\n Register Number : ";
     cin>>temp->RegNo;
     temp->Total = 0;
     for(int i=0;i<SUBJECTS;i++)
     {
             cin>>temp->Marks[i];
             temp->Total += temp->Marks[i];
     }
     temp->Percentage = temp->Total/SUBJECTS;
     cout<<"\n Total Marks     : "<<temp->Total;
     cout<<"\n\n Percentage      : "<<temp->Percentage;

                 if(getDate(t) == SUCCESS) // trick!
                 copyDate(temp->DOB,t);

     x->next = (Record*)malloc(sizeof(struct Record));
     copyRecord(x,temp);
     temp->previous = (Record*)malloc(struct Database);
     temp->previous = x;
     temp->next = NULL;
     return;
}

void viewRecords(Record *x)
{
     if(x->next == NULL && x->previous == NULL)
     {
                cout<<"\n There are no records to view.";
                cout<<"\n Please Add some records and then try again!";
                return;
     }
     do
     {
                   cout<<"\n Name            : "<<x->Name;
                   cout<<"\n Father's Name   : "<<x->FatherName;
                   cout<<"\n Address         : "<<x->Address;
                   cout<<"\n Hometown        : "<<x->Hometown;
                   cout<<"\n Register Number : "<<x->RegNo;
                   for(int i=0;i<SUBJECTS;i++)
                   cout<<"\n Mark "<<i+1<<"  : "<<x->Marks[i];
                   cout<<"\n Total Marks      : "<<x->Total<<endl;
                   cout<<"\n Percentage       : "<<x->Percentage;
                   cout<<"\n Date Of Birth    : "<<x->DOB.day<<"th"<<toString(x->DOB.month)<<" "<<x->DOB.year;
                   if(x->next == NULL) break;
     }while((x=x->next)!=NULL);
}

int getDate(date *t)
{
     cout<<"\nDate of birth (dd:mm:yyyy) : ";
     scanf("%d:%d:%d",&t->day,&t->month,&t->year);
     if(checkDate(t) == SUCCESS)
     return SUCCESS;
     else
     {
         cout<<"\n Sorry, that's not a valid Date.";
         cout<<"\n Please Try Again,"<<endl;
         getDate(t);
     }
}
void copyDate(date d1,date *d2)
{
     d1.day   = d2->day;
     d1.month = d2->month;
     d1.year  = d2->year;
     return; 
}

int checkDate(date *x)
{
     int leap = (x->year%4==0)?TRUE:FALSE;
     if( ( x->day<=0 || x->day > 31  ) || (x->month>12 || x->month<=0) || (x->year<1900 || x->year > 2008) )
     return FALSE;
     else if(leap == TRUE && x->month == 2 && (x->day>29))
     return FALSE;
     else if(leap == FALSE && x->month == 2 && (x->day>28))
     return FALSE;
     else if( (x->month == 4 || x->month == 6 || x->month == 9 || x->month == 11) && x->month >= 31 )
     return FALSE;
     else
     return TRUE;
}

char *toString(int m)
{
     char *t = (char*) malloc (sizeof(char)*4);
     switch(m)
     {
              case 1 : t = "Jan"; break;
              case 2 : t = "Feb"; break;
              case 3 : t = "Mar"; break;
              case 4 : t = "Apr"; break;
              case 5 : t = "May"; break;
              case 6 : t = "Jun"; break;
              case 7 : t = "Jul"; break;
              case 8 : t = "Aug"; break;
              case 9 : t = "Sep"; break;
             case 10 : t = "Oct"; break;
             case 11 : t = "Nov"; break;
             case 12 : t = "Dec"; break;
     }
     return t;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:53:44.413

我认为问题的根源在于`Record`的 typedef 名称`struct Database`，而第一个错误（使用`struct`关键字 with `Record`）导致后来的错误。

由于这是 C++，`malloc`完全转储并使用`new`运算符：

```
x->next = new Record; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T14:44:48.707

您不需要为 typedef 使用 struct 关键字。

所以，

```
x->next = (Record*)malloc(sizeof(struct Record)); 
```

应该

```
x->next = (Record*)malloc(sizeof(Record)); 
```

* * *

笔记：

你最好使用`new`而不是`malloc`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T15:57:00.560

您应该决定是否要编写 C 或 C++，因为它们是不同的语言。

您的主要问题“记录和数据库之间有什么区别”的答案是

```
typedef struct Database
{
   // ...
} Record; 
```

为结构引入了几个名称。

在 C 中会有两个：`struct Database`和`Record`.
在 C++ 中，例如您的代码，有三个：与 C 中相同的两个，加上`Database`.

在这两种语言中都没有名为 的类型`struct Record`，这就是为什么您会收到第一个错误：“在 'struct' 之后使用 typedef-name 'Record'”。
您应该始终首先修复第一个错误。

（我不确定这是否会解决您的问题，因为您的 g++ lokks 有点过时 - 如果它真的是 3.4.2 版本，它已经快 10 年了，您应该考虑升级）。

# c# - 派生接口中的新方法声明

> ID：15311923
> 
> 赞同：1
> 
> 时间：2013-03-09T14:41:31.817
> 
> 标签：c#, .net, com-interop

我最近研究了一些代码，遇到了一个派生接口，它声明`new`了与基本接口完全相同的名称和签名的方法：

```
public interface IBase
{
    Result Process(Settings settings);
}

public interface IDerived : IBase
{
    new Result Process(Settings settings);
} 
```

我想知道这是否有原因。根据我的理解，我可以安全地删除后一个方法声明并`IDerived`留空，而不会破坏任何使用它的代码。我错了吗？

PS 如果这很重要，这些接口声明还具有以下属性`ComVisible(true)`：`InterfaceType(ComInterfaceType.InterfaceIsIUnknown)`和`Guid(...)`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T14:47:16.160

好吧，您*也许*可以摆脱它 - 但如果您摆脱 中的方法`IDerived`，严格来说，它实际上并不相同。一个实现实际上可以提供两种不同的方法来不同地实现这两种接口方法。

例如：

```
using System;

public interface IBase
{
    void Process();
}

public interface IDerived : IBase
{
    new void Process();
}

public class FunkyImpl : IDerived
{
    void IBase.Process()
    {
        Console.WriteLine("IBase.Process");
    }

    void IDerived.Process()
    {
        Console.WriteLine("IDerived.Process");
    }
}

class Test
{
    static void Main()
    {
        var funky = new FunkyImpl();
        IBase b = funky;
        IDerived d = funky;
        b.Process();
        d.Process();
    }
} 
```

# php - 枚举值未在 mysql 表中更新？

> ID：15311931
> 
> 赞同：1
> 
> 时间：2013-03-09T14:42:28.180
> 
> 标签：php, mysql

我正在使用此脚本更新表中的列。

第一列“close_account”是一个枚举值“0”或“1”，它们在我的数据库中显示为单选框。

第二列“account_status”是一个枚举值“活动”或“停用”，它在我的数据库中显示为下拉框列表。

在这种情况下，我不确定它们是下拉框还是单选框这一事实是否重要。

但是我的问题是我试图通过运行以下mysql查询来更新close_account和account_status，close_account需要更新为'1'并且account_status应该更新为'Deactivated'。目前由于某种原因只有“close_account”正在更新，但没有 account_status 有人可以告诉我为什么吗？

谢谢。

```
<? ob_start(); ?>
<?php

require_once('includes/session.php');
require_once('includes/functions.php');
require('includes/_config/connection.php');

session_start();

    confirm_logged_in();

    if (isset ($_GET['to'])) {
    $user_to_id = $_GET['to'];

}

if (!isset($_GET['to']))
    exit('No user specified.');

$user_id = $_GET['to'];

$result = mysql_query("SELECT * FROM ptb_users WHERE user_id ='".$_SESSION['user_id']."' ");

if($result) 
{ 
mysql_query("UPDATE ptb_users SET close_account='1' WHERE user_id=".$_SESSION['user_id']."") 
or die(mysql_error());

mysql_query("UPDATE ptb_users SET account_status='Deactivated' WHERE user_id=".$_SESSION['user_id']."") 
or die(mysql_error());

header("Location: dashboard.php");

}
?>
<? ob_flush(); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T14:58:34.050

对枚举数据使用数值总是令人困惑。特别是当枚举数据与枚举索引值重叠时。

在您的情况下，显然`1`枚举数据被解释为枚举索引（数字）。将字符串用于枚举数据，以提高可读性和使用率。

考虑一个例子：

```
DROP TABLE enum_tb;

CREATE TABLE enum_tb (size ENUM('x-small', 'small', 'medium', 'large', 'x-large') NOT NULL);

INSERT INTO enum_tb
VALUES ('x-small'), (2), ('5');

SELECT * FROM enum_tb; 
```

输出：

```
mysql> select * from enum_tb;
+---------+
| size    |
+---------+
| x-small |
| small   |
| x-large |
+---------+
3 rows in set (0.00 sec) 
```

奇怪？

MySQL 在传递索引时存储实际的枚举值。枚举索引从 开始`1`，在上述情况下，索引`2`为`small`。也`'5'`被认为是索引`x-large`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T14:59:17.063

解决此类问题的系统方法是首先将问题隔离到 PHP 或数据库。最简单的方法是不使用 PHP 直接进入数据库。使用 MySQL 命令行实用程序 ( `mysql`)，或使用 phpmyadmin 等图形工具。

使用其中一种工具连接到您的测试数据库。（不是您的生产数据库。始终练习安全测试。）从 SQL 提示符运行此查询。

```
UPDATE ptb_users 
SET close_account='1', 
    account_status = 'Deactivated'
WHERE user_id = somenumber 
```

替换`somenumber`为实际的现有用户 ID 号。

话虽如此，枚举是一个数字是不寻常的。像这样声明一个枚举没有*多大*意义。

```
create table foo (
  user_id integer not null,
  bar enum('0', '1')
); 
```

像这样的事情更为常见。

```
create table foo (
  user_id integer not null,
  bar enum('open', 'closed')
); 
```

要更新这样的枚举，请使用字符串值。

```
update foo
set bar = 'closed'
where user_id = somenumber and bar = 'open'; 
```

同样，将 somenumber 替换为实际的用户 ID 号。

# ember.js - 使用 Ember RC1 连接 connectOutlet 中的视图

> ID：15311933
> 
> 赞同：0
> 
> 时间：2013-03-09T14:42:45.950
> 
> 标签：ember.js

从这个 [EDIT] [ToDo's sample] [1](https://github.com/tomdale/todomvc/tree/gh-pages/dependency-examples/emberjs_require/js)，[/EDIT] 我可以通过 connectOutlet 连接一个视图。是否有使用 RC1 的更新示例？

```
index: Ember.Route.extend({
  route: '/',
  connectOutlets: function( router ) {

    var controller = router.get( 'applicationController' );
    var context = controller.namespace.entriesController;
    context.set( 'filterBy', '' );

    // This require was left here exclusively for design purposes
    // Loads decoupled controller/view based on current route
    require([ 'app/controllers/todos', 'app/views/items' ],
      function( TodosController, ItemsView ) {
        controller.connectOutlet({
          viewClass: ItemsView,
          controller: TodosController.create(),
          context: context
        });
      }
    );

  }
}), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:45:46.010

实际上，您链接的[示例应该可以工作。](https://github.com/tomdale/todomvc/blob/629cbf72e4c5c99d349f6022289a1318a9e4f4c8/architecture-examples/emberjs/js/router.js)您可能知道路由器 API 已更改，**基于 pre4 的代码应该仍然可以工作**。我不知道 Todos 应用程序的要求，所以我不能 100% 判断它是否仍然有效：

```
Todos.Router.map(function() {
  this.resource('todos', { path: '/' }, function() {
    this.route('active');
    this.route('completed');
  });
});

Todos.TodosRoute = Ember.Route.extend({
  model: function() {
    return Todos.Todo.find();
  }
});

Todos.TodosIndexRoute = Ember.Route.extend({
  setupController: function() {
    var todos = Todos.Todo.find();
    this.controllerFor('todos').set('filteredTodos', todos);
  }
}); 
```

这里对旧路由器 API 的更改做一个小**总结：**

*   您不再扩展 Ember.Router 类。
*   URL 映射不再驻留在路由中。这是通过 Todos.Router.map 完成的。
*   您的路线中不再有 connectOutlets 事件。相反，您可以实现 3 个事件：model()、setupController() 和 renderTemplate()。

关于钩子的一点解释：

*   **model()**：通过 URL 输入路由时调用一次。这应该返回您的模型，它应该成为您的控制器的内容。
*   **setupController()**：在这里你可以获取你的控制器并设置你喜欢的内容。默认实现设置控制器，即与您的路由匹配的名称与模型（）的结果。
*   **renderTemplate()**：在这个钩子中，你应该使用路由的新渲染方法来进行渲染。[render](http://emberjs.com/api/classes/Ember.Route.html#method_render)方法在某种程度上是最匹配旧的 connectOutlets 的方法。还有默认实现。因此它也没有在 todomvc 的 pre4 版本中实现。

正如 Milkyway 所说，你真的必须阅读[指南](http://emberjs.com/guides/routing/)，但我希望这能让你开始更好一点。

# c++ - 通过发送指针让 dll 调用 .exe 函数

> ID：15311934
> 
> 赞同：1
> 
> 时间：2013-03-09T14:43:05.827
> 
> 标签：c++, multithreading, winapi, dll

这个问题看起来像我之前问的一个问题，只是我现在知道你不能从全局对象调用主函数。所以这段代码不适用于main。但是为什么其他功能也会失败呢？

这是代码。

**.exe**
主要.cpp

```
#include "dll_class.h"
#include <iostream>
int my_main(void)
{
    std::cout << "Enter the my_main code.\n";
    std::getchar();
}

DllClass object(my_main);
int main(void)
{
    std::cout << "Enter the main code.\n";
    std::getchar();
} 
```

**.dll**
dll_class.h

```
#include "platform.h"
#include <iostream>
class DLL_API DllClass //DLL_API is just a macro for import and export.
{
public:
    DllClass(int(*main)(void))
    {
        std::cout << "Start application.\n";
        platform = new Platform(main);
    }
    ~DllClass(void)
    {
        delete platform;
    }
private:
    Platform* platform;
}; 
```

平台.h

```
class DLL_API Platform
{
public:
    Platform(main_t main_tp);
    ~Platform(void){}
}; 
```

平台.cpp

```
#include "platform.h"
#include "Windows.h"
#include <iostream>

HHOOK hookHandle;
int(*main_p)(void);//This will hold a the main function of the the .exe.
LRESULT CALLBACK keyHandler(int nCode, WPARAM wParam, LPARAM lParam);

DWORD WINAPI callMain(_In_  LPVOID lpParameter)
{
    std::cout << "Calling the main function.\n";
    main_p();
    return 0;
}

Platform::Platform(int(*main_tp)(void))
{
    main_p = main_tp;
    CreateThread(NULL, 0, callMain, NULL, 0, NULL);
    std::cout << "Setting hooks.\n";
    hookHandle = SetWindowsHookEx(WH_MOUSE_LL, keyHandler, NULL, 0);
    std::cout << "Enter message loop.\n";
    MSG message;
    while(GetMessage(&message, (HWND)-1, 0, 0) != 0){
        TranslateMessage( &message );
        DispatchMessage( &message );
    }
}

LRESULT CALLBACK keyHandler(int nCode, WPARAM wParam, LPARAM lParam)
{
    std::cout << "Inside the hook function.\n" << std::endl;
    return CallNextHookEx(hookHandle, nCode, wParam, lParam);
} 
```

它运行得很好，直到某个时刻。这是输出。

```
Start application.  
Setting hooks.  
Calling the main function.  
Enter message loop.  
Inside the hook function. (A lot of times of course). 
```

但它从来没有说：

```
Enter the my_main code.
Enter the main code. 
```

难道不能让dll调用exe函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:51:35.207

答案仍然与我对您的另一个问题的答案相同。您的`Platform`构造函数已挂起。循环终止条件永远不会满足，因此构造函数永远不会返回。并且在`main`构造所有全局对象之前，该函数无法运行。

**更新**：上面的讨论是为什么`Enter the main code`从不打印。

如果您单步执行您的`my_main`函数，您会看到以下问题： 对and`Enter the my_main code`的调用被忽略。这是因为不同翻译单元中全局对象的构造顺序是未指定的。在主可执行文件中，首先构造的是全局对象，这意味着和对象可能没有完全构造。这就是为什么不能打印和不能阅读的原因。`cout``getchar``object``cin``cout``cout``getchar`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:43:18.120

当然，这里要做的正确的事情是构建`object`inside `main`。如果需要，传递`my_main`给对象。但这将解决所有“在构建之前尝试使用某些东西”。

这里的关键（我只是从阅读另一个答案的评论中收集到的）是`cout`主可执行文件和 DLL 的对象不是“同一个”。`cout`这会导致调用在你进入之前所做的事情的问题`main`[我也试图在上一个问题中解释——C 运行时库需要初始化某些事情，并且在`main`调用之前以未指定的顺序发生]。

# objective-c - 如何在代码中修改从库中拖出的 NSButton？

> ID：15311935
> 
> 赞同：0
> 
> 时间：2013-03-09T14:43:08.707
> 
> 标签：objective-c, xcode, macos, cocoa

我将一个按钮从库中拖到窗口中。我在 AppDelegate.h 中有链接到 IBAction 的按钮，现在我想更改 AppDelegate.m 文件中按钮的标题，如何访问该按钮，我应该键入“self.window .... setTitle:" 还是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:45:36.840

如果你 是`IBOutlet`然后使用`NSButton``myButton`

```
[self.myButton setTitle:@"New Title"]; 
```

甚至

```
[_myButton setTitle:@"New Title"]; //If you are using XCode4.4+ as @synthesize will be there creating _myButton. 
```

* * *

正如您所说，您已将按钮连接到 IBAction，那么您可以简单地执行以下操作：

```
-(IBAction)buttonClick:(id)sender{
    sender.title=@"New Title";
} 
```

# r - plotGoogleMaps 帮助：绘制纬度经度值

> ID：15311937
> 
> 赞同：0
> 
> 时间：2013-03-09T14:43:16.497
> 
> 标签：r, google-maps, geolocation, gis

我正在尝试使用 plotGoogleMaps 来绘制纬度和经度值

代码是：

```
streetCrime = read.csv("C:/Users/DAKSHA/Google Drive/BE Project/Daksha/Datasets/BaltimoreHomicide.csv")

coordinates(streetCrime) = ~Longitude + Latitude
proj4string(streetCrime) = CRS("+proj=longlat +datum=WGS84")
m<-plotGoogleMaps(streetCrime,filename='myMap1.jpg') 
```

我收到此错误：

```
Error in plotGoogleMaps(streetCrime, filename = "myMap1.jpg") :
   no slot of name "data" for this object of class "SpatialPoints" 
```

请帮忙！

我正在使用 plotGoogleMaps 1.3 版

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:48:58.070

你的问题是你`.csv`只包含列`Latitude`，`Longitude`在这种情况下，`coordinates()`函数将返回一个`SpatialPoints`对象而不是一个`SpatialPointsDataFrame`似乎需要的`plotGoogleMaps()`.

您可以通过为数据帧创建一个虚拟变量来将其强制转换为 spdf。每个点的 ID 号似乎是个好主意。按此顺序尝试这些步骤（请注意 plotGoogleMaps 将结果图保存为`html`not `jpg`）：

```
streetCrime = read.csv("C:/Users/DAKSHA/Google Drive/BE Project/Daksha/Datasets/BaltimoreHomicide.csv")
coordinates(streetCrime) = ~ Longitude + Latitude
proj4string(streetCrime) = CRS("+proj=longlat +datum=WGS84")
streetCrime <- SpatialPointsDataFrame( streetCrime , data = data.frame( ID = row.names( streetCrime ) ) )
m <- plotGoogleMaps(streetCrime , filename='myMap1.html') 
```

# javascript - Javascript输出变量根据日期

> ID：15311938
> 
> 赞同：0
> 
> 时间：2013-03-09T14:43:24.070
> 
> 标签：javascript, jquery, variables, date, jquery-tabs

嗨，我正在尝试使用 javascript 来使用一个函数，如果日期是 10/03/13 然后输出一个像 1 这样的数字。

我需要将此应用于 jquery 选项卡选项。

示例：09/03/13 在活动选项中输出数字 2

```
<script>
  $(function() {
    $( "#tabs" ).tabs( "option", "active", 2 );
  });
</script> 
```

10/03/13 输出数字 3 所以代码看起来像这样

```
 <script>
      $(function() {
        $( "#tabs" ).tabs( "option", "active", 3 );
      });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:48:41.527

如果您想说要根据@David 所说的日期选择特定选项卡。然后您需要对日期数组进行排序并返回排序后的数组的索引。

```
var dates = [
    '2013-11-08 18:58:50',
    '2013-11-09 17:49:42',
    // and so on...
];

dates.sort(); 
```

或者你需要类似这样[的导航样本](https://stackoverflow.com/a/15297266/2115255)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:58:14.753

我正在用我认为是您问题的答案来跟进我的评论。

首先，您希望将日期范围转换为某种索引，然后您可以将其用于选项卡选择。

```
<script>
    $(function(data) {
        var tabsList = [
            '03/09/2013',
            '03/10/2013',
            '03/11/2013',
            '03/12/2013'
        ];

        var tab = 0;
        for (var d=0;d<tabsList.length;d++) {
            if (tabsList[d]==data.Date) {
                tab = d;
                break;
            }
        }

        $( "#tabs" ).tabs( "option", "active", tab );
    });
</script> 
```

本质上，您应该为要识别的每个日期范围拥有一个唯一的标签索引。如果这听起来太多，那么您解决问题的方法可能有点偏离，您可能需要重新考虑解决问题的方式。

编辑：我已经蚕食了一些暴力的代码，因为你真的需要一个数组。数据是您传递给函数的任何内容，并且应该包含您的当前日期或您希望函数认为的任何日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T15:01:54.833

```
<script>
$(function() {
  var cDate = new Date();
  var cYear = cDate.getFullYear().toString().substring(2);
  var cMonth = ((cDate.getMonth()+1)<10)? ("0"+(cDate.getMonth()+1) : (cDate.getMonth()+1);
  var cDay = (cDate.getDate()<10)? ("0"+cDate.getDate()) : cDate.getDate();
  cDateString = cMonth+'/'+cDay+'/'+cYear;
  var tabs = [
    "", // 0
    "", // 1
    "09/03/13", // 2
    "10/03/13" // 3
  ];
  var tab = 0;
  for (var d=0;d<tabs.length;d++) {
    if (tabs[d]==cDateString) {
      tab = d;
      break;
    }
  }
  $( "#tabs" ).tabs( "option", "active", tab );
});
</script> 
```

# ssis - SSIS 自定义目标组件 - 将行发送到 OLE DB 目标

> ID：15311940
> 
> 赞同：0
> 
> 时间：2013-03-09T14:43:37.393
> 
> 标签：ssis, components, buffer, oledbconnection

我正在构建一个自定义 SSIS 目标组件，它读取输入、做一些小事情并将其发送到 OLEDB 连接。我有一个名为 myconn 的 OLEDB 连接，对于 ProcessInput 方法，我想知道将行从输入发送到 myconn OLEDB 连接的语法。

```
public override void ProcessInput(int inputID, PipelineBuffer buffer)
{
            while (buffer.NextRow())
            {
                try
                {
                    // Some Code here to send the data from the input to the OLEDB data destination (i.e. myconn )
                }
                catch (Exception ex)
                {
                    throw ex;
                }
            }
            if (buffer.EndOfRowset)
            {
                myconn .Close();
            }
} 
```

我总是对 ProcessInput 方法有点迷失。我想它应该只是一两行代码？

# javascript - 如何在 Internet Explorer 中使用 XmlHttpRequest 或 FileAPI？

> ID：15311942
> 
> 赞同：0
> 
> 时间：2013-03-09T14:43:47.300
> 
> 标签：javascript, html, file-upload, html5-filesystem

下面的代码来自 html5uploader，它适用于除 IE 10 之外的所有浏览器。我已尽力包含一个功能，其中检测到 IE 并读取删除的文件，但无法在 IE 中运行。

如何修改以下函数中的代码以包含 Internet Explorer 10？

完整的 Javascript 代码[在这里](http://pastebin.com/getZrPpS)。链接到上传者[这里](http://code.google.com/p/html5uploader/)。

```
 // Firefox 3.6, Chrome 6, WebKit
    if(window.FileReader) { 

        // Once the process of reading file
        this.loadEnd = function() {
            bin = reader.result;                
            xhr = new XMLHttpRequest();
            xhr.open('POST', targetPHP+'?up=true', true);
            var boundary = 'xxxxxxxxx';
            var body = '--' + boundary + "\r\n";  
            body += "Content-Disposition: form-data; name='upload'; filename='" + file.name + "'\r\n";  
            body += "Content-Type: application/octet-stream\r\n\r\n";  
            body += bin + "\r\n";  
            body += '--' + boundary + '--';      
            xhr.setRequestHeader('content-type', 'multipart/form-data; boundary=' + boundary);
            // Firefox 3.6 provides a feature sendAsBinary ()
            if(xhr.sendAsBinary != null) { 
                xhr.sendAsBinary(body); 
            // Chrome 7 sends data but you must use the base64_decode on the PHP side
            } else { 
                xhr.open('POST', targetPHP+'?up=true&base64=true', true);
                xhr.setRequestHeader('UP-FILENAME', file.name);
                xhr.setRequestHeader('UP-SIZE', file.size);
                xhr.setRequestHeader('UP-TYPE', file.type);
                xhr.send(window.btoa(bin));
            }
            if (show) {
                var newFile  = document.createElement('div');
                newFile.innerHTML = 'Loaded : '+file.name+' size '+file.size+' B';
                document.getElementById(show).appendChild(newFile);             
            }
            if (status) {
                document.getElementById(status).innerHTML = 'Loaded : 100%<br/>Next file ...';
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T09:01:38.593

也许这可以帮助其他人，即使问题已为您解决：

1）确保你强制你的浏览器到 IE10 ：`<meta http-equiv="X-UA-Compatible" content="IE=edge">`

2）不要使用`reader.readAsBinaryString(file);`但`reader.readAsDataURL(file);`用于 IE

3) 发送 XHR 对象`xhr.send`而不使用`btoa`（只是做`xhr.send((bin));`）

4) 通常，为了使您的代码与所有浏览器兼容，`if (navigator.appName === "Microsoft Internet Explorer") { ... }`请为每个浏览器使用和打开具有不同目标的 XHR 对象（如：） `xhr.open('POST', targetPHP+'?up=true&browser=IE', true);`，因为 PHP 会以不同方式处理 if。

一切都在这里解释：[如何更改 html5uploader 中使用的 XmlHttpRequest 或 FileAPI 以支持 IE](https://stackoverflow.com/questions/14997943/how-can-i-change-the-xmlhttprequest-or-fileapi-used-in-html5uploader-to-support/18737014#18737014)

# android - 致命异常：主要的 android

> ID：15311945
> 
> 赞同：0
> 
> 时间：2013-03-09T14:44:21.867
> 
> 标签：android

我是一名 android 初学者，我尝试创建一个员工目录。但是每次运行项目时，我都会收到此错误： ![在此处输入图像描述](../Images/5958698623d252c194f9fa46e87e4c36.png)

![在此处输入图像描述](../Images/686805590fe44194ea4b0f436767d26f.png)

这是 mai main.xml 文件代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation= "vertical" >

<LinearLayout
    android:orientation="horizontal"
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <EditText
        android:id="@+id/searchText"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:inputType="text" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/searchButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/search" />
</LinearLayout>

<ListView
    android:id="@+id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

</LinearLayout> 
```

这是 mai java 类：

```
public class EmployeeList extends ListActivity  {
protected EditText searchText;
protected SQLiteDatabase db;
protected Cursor cursor;
protected ListAdapter adapter;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    db = (new DatabaseHelper(this)).getWritableDatabase();
    searchText = (EditText)findViewById(R.id.searchText);
}

@SuppressWarnings("deprecation")
public void search(View view){
    cursor = db.rawQuery("SELECT _id, firstName, lastName, title FROM employee WHERE firstName || ' ' || lastName LIKE ?", 
                        new String[]{"%" + searchText.getText().toString() + "%"});
    adapter = new SimpleCursorAdapter(this, R.layout.employee_list_item, 
                                    cursor, new String[]{"firstName", "lastName", "title"}, 
                                    new int[] {R.id.firstName, R.id.lastName, R.id.title});
    setListAdapter(adapter);
}
public void onListItemClick(ListView parent, View view, int position, long id) {
    Intent intent = new Intent(this, EmployeeDetails.class);
    Cursor cursor = (Cursor) adapter.getItem(position);
    intent.putExtra("EMPLOYEE_ID", cursor.getInt(cursor.getColumnIndex("_id")));
    startActivity(intent);
}
} 
```

有什么问题，为什么我会收到这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T14:45:50.207

将您的列表 ID 更改为`@android:id/list`. `ListActivity`需要`ListView`有这样的身份证。

```
<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

# java - Emma 不会在报告中显示未发现的包

> ID：15311956
> 
> 赞同：0
> 
> 时间：2013-03-09T14:45:24.180
> 
> 标签：java, maven, emma

我正在使用 maven 和 emma 来生成关于 linux red hat 的覆盖率报告。运行 command 后`mvn emma:emma`，JUnit 测试未涵盖的包不会显示在报告中。

我正在使用以下配置：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>emma-maven-plugin</artifactId>
    <version>1.0-alpha-3</version>    
</plugin> 
```

知道发生了什么吗？或者有什么方法可以确保包括未覆盖在内的所有包裹都是报告的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:40:12.863

**请注意**，这应该是评论，它不回答不直接回答问题。它质疑这个问题的有用性。

退出使用 emma 并开始使用[jacoco](http://www.eclemma.org/jacoco/)。AFAIK，自 2007 年左右以来，emma 一直处于休眠状态。maven Central 上的 emma 插件的最新版本是 2010 年开始的。

截至今天（2013 年第一季度）。从 2013 年 2 月[开始，maven central 上](http://search.maven.org/#artifactdetails%7Corg.jacoco%7Cjacoco%7C0.6.2.201302030002%7Cpom)有一个版本。

```
<dependency>
    <groupId>org.jacoco</groupId>
    <artifactId>jacoco</artifactId>
    <version>0.6.2.201302030002</version>
</dependency> 
```

并且与maven插件同步。这是我的配置示例

```
<plugin>
    <groupId>org.jacoco</groupId>
    <artifactId>jacoco-maven-plugin</artifactId>
    <configuration>
        <excludes>
           <exclude>**/entities/*</exclude>
           </excludes>
        </configuration>
        <executions>
           <execution>
              <goals>
                 <goal>prepare-agent</goal>
              </goals>
           </execution>
           <execution>
            <id>report</id>
            <phase>prepare-package</phase>
            <goals>
                <goal>report</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

jacoco 的报告也比 emma 的报告好看。

相比： ![来自 emma 网站的示例报告的屏幕截图](../Images/a3cfa5e3f660b3ab89da347e5f65e51f.png)

和 ![来自 jacoco 网站的示例报告的屏幕截图](../Images/79dc68cd270281d43e5a7ab19c301e4c.png)

# javascript - 多页 Javascript 样式表更改器仅在一个子页面中更改样式表，而不是在所有子页面中

> ID：15311957
> 
> 赞同：1
> 
> 时间：2013-03-09T14:45:35.033
> 
> 标签：javascript, cookies, stylesheet

我的网站有 5 页。我想允许用户通过单击超链接来更改外观。我还希望将更改后的样式存储在 cookie 中。因此，当我从主页更改样式表时，其余 4 页也将更改。问题是当我从第五页更改样式表时，只有第五页上的样式表发生了变化，当我导航到这些页面时，其余的都没有更改。同样，我更改了第四页的样式表，只有这个特定页面的样式表发生了变化。

下面是javascript代码：

```
var styleNo = parseInt(document.cookie.charAt(6));
var styleFile;
if( isNaN(styleNo) ) // style not selected by user initially, usually not a number at char 6
    styleFile = "/nmc/css/style" + 0 + ".css";
else {
    styleFile = "/nmc/css/style" + styleNo + ".css";
}

document.writeln('<link rel="stylesheet" type="text/css" href="' + styleFile + '">');

function changeStyle( styleNo ){
    var CookieDate = new Date;
    CookieDate.setFullYear(CookieDate.getFullYear( ) +10);
    document.cookie = "style=" + styleNo + "; expires=" + CookieDate.toGMTString() + ";";
    window.location.reload();
} 
```

以下是单击超链接时的编码

```
<div id="styleSelection">
    <a href="#" onclick="changeStyle(0)">Style 1</a>
    <a href="#" onclick="changeStyle(1)">Style 2</a>
</div> 
```

解决此问题的任何提示？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T14:51:45.647

您可能将 cookie 设置在子目录中。如果是这种情况，该 cookie 只会影响该子目录。[这篇](https://stackoverflow.com/questions/6387250/setting-cookies-on-directories)文章的第一个答案解释了这种现象。

# isabelle - 以应用风格删除目标中的前提

> ID：15311959
> 
> 赞同：6
> 
> 时间：2013-03-09T14:45:40.173
> 
> 标签：isabelle

假设我想展示以下引理

```
lemma "⟦ A; B; C ⟧ ⟹ D" 
```

我得到目标

```
1\. A ⟹ B ⟹ C ⟹ D 
```

但是，我不需要`B`. 我怎样才能将我的目标转移到类似的东西上

```
1\. A ⟹ C ⟹ D 
```

我不想改变原来的`lemma`陈述，只是应用风格的当前目标。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T14:54:54.927

你想要的是`apply (thin_tac B)`. 然而，上次我这样做时，彼得拉米奇喊道：“天哪，你为什么要这样做！” 厌恶并重写了我的证明以摆脱thin_tac。因此，似乎不再鼓励使用这种策略。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T15:28:10.883

Normally it is better to avoid unwanted stuff in a goal state, instead of removing it later. The way you formulate a proof problem affects the way you solve it.

This is particularly important for structured proofs: you appeal *positively* to those facts that should participate in the next step of the proof, instead of suppressing some of them *negatively*.

E.g. like this:

```
from `A` and `C` have D ... 
```

Telling which facts are relevant to a proof is already a start for readability.

Following that style, your initial problem will look like this:

```
lemma
  assumes A and B and C 
  shows D
proof -
  from `A` and `C` show D sorry
qed 
```

or like this with reduced verbosity, if A B C D are large propositions:

```
lemma
  assumes a: A and b: B and c: C 
  shows D
proof -
  from a c show ?thesis sorry
qed 
```

# ios - iOS AVExportSession 失败，仅修剪视频

> ID：15311963
> 
> 赞同：3
> 
> 时间：2013-03-09T14:45:51.303
> 
> 标签：ios, objective-c, avfoundation

我创建了一种根据给定时间范围修剪和导出视频的方法。它还将视频旋转为横向。

但由于某种原因，在尝试处理之前使用 UIVideoEditorController 修剪的视频时，AVAssetExportSession 失败。

以前有人遇到过这个问题吗？

我收到此错误：

```
AVAssetExportSessionStatusFailed: Error Domain=AVFoundationErrorDomain Code=-11841 "The operation couldn’t be completed. (AVFoundationErrorDomain error -11841.)" 
```

对于这种方法：

```
 - (void) trimVideoWithRange: (CMTimeRange)range fromInputURL: (NSURL *)inputURL withCompletionHandler:(void (^)(BOOL success, NSURL *outputURL))handler;
{
    AVAsset *asset = [AVURLAsset assetWithURL:inputURL];

    AVAssetTrack *videoTrack = [asset tracksWithMediaType:AVMediaTypeVideo][0];

    AVAssetTrack *audioTrack = [asset tracksWithMediaType:AVMediaTypeAudio][0];

    NSLog(@"%@, %@, %@", asset, videoTrack, audioTrack);

    NSError *error;

    //  Create a video composition
    AVMutableComposition *composition = [AVMutableComposition composition];

    AVMutableCompositionTrack *videoCompositionTrack = [composition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];

    error = nil;

    [videoCompositionTrack insertTimeRange:videoTrack.timeRange ofTrack:videoTrack atTime:CMTimeMakeWithSeconds(0, NSEC_PER_SEC) error:&error];

    NSLog(@"videoCompositionTrack timeRange: %lld, %lld", videoCompositionTrack.timeRange.start.value, videoCompositionTrack.timeRange.duration.value);

    if(error)
        NSLog(@"videoCompositionTrack error: %@", error);

    AVMutableCompositionTrack *audioCompositionTrack = [composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];

    error = nil;

    [audioCompositionTrack insertTimeRange:audioTrack.timeRange ofTrack:audioTrack atTime:CMTimeMakeWithSeconds(0, NSEC_PER_SEC) error:&error];

    NSLog(@"audioCompositionTrack timeRange: %lld, %lld", audioCompositionTrack.timeRange.start.value, audioCompositionTrack.timeRange.duration.value);

    if(error)
        NSLog(@"audioCompositionTrack error: %@", error);

    //  Rotate video if needed
    CGAffineTransform rotationTransform = videoTrack.preferredTransform;

    //  Create video composition
    AVMutableVideoComposition *videoComposition = [AVMutableVideoComposition videoComposition];

    videoComposition.renderScale = 1.0;

    videoComposition.renderSize = videoTrack.naturalSize;

    videoComposition.frameDuration = CMTimeMake(1, 30);

    //  Apply the transform which may have been changed
    AVMutableVideoCompositionLayerInstruction *instruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:videoTrack];
    [instruction setTransform:rotationTransform atTime:kCMTimeZero];

    //  Set the time range and layer instructions for the video composition
    AVMutableVideoCompositionInstruction *videoTrackInstruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];

    videoTrackInstruction.layerInstructions = [NSArray arrayWithObject:instruction];
    videoTrackInstruction.timeRange = range;

    videoComposition.instructions = @[videoTrackInstruction];

    // Check so that we can proceed with our desired output preset
    NSArray *compatiblePresets = [AVAssetExportSession exportPresetsCompatibleWithAsset:composition];

    if (![compatiblePresets containsObject:AVAssetExportPreset960x540])
    {
        //  Nope.
        if(handler)
            handler(NO, nil);

        return;
    }

    //  Create export session with composition
    AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:composition presetName:AVAssetExportPreset960x540];

    //  Configure export session
    exportSession.outputURL = [NSURL fileURLWithPath:pathToTemporaryOutput];

    exportSession.outputFileType = AVFileTypeQuickTimeMovie;

    exportSession.videoComposition = videoComposition;

    exportSession.shouldOptimizeForNetworkUse = YES;

    //  Export async
    [exportSession exportAsynchronouslyWithCompletionHandler:^{

        switch ([exportSession status])
        {
            case AVAssetExportSessionStatusCompleted:
            {
                dispatch_async(dispatch_get_main_queue(), ^{

                    //  Everything OK. Execute completion block with URL to rendered video
                    if(handler)
                        handler(exportSession.status == AVAssetExportSessionStatusCompleted, [NSURL fileURLWithPath:pathToTemporaryOutput]);

                });

            }
                break;

            case AVAssetExportSessionStatusFailed:
            {
                NSError *exportError = exportSession.error;

                NSLog(@"AVAssetExportSessionStatusFailed: %@", exportError.description);

                dispatch_async(dispatch_get_main_queue(), ^{

                    //  No go. Execute handler with fail.
                    if(handler)
                        handler(NO, nil);

                });
            }
                break;
        }

    }];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T07:49:23.860

这对我有用。这里`exportSession`是`AVAssetExportSession`

```
NSURL *videoFileUrl = [NSURL fileURLWithPath:self.originalVideoPath];

AVAsset *anAsset = [[AVURLAsset alloc] initWithURL:videoFileUrl options:nil];
NSArray *compatiblePresets = [AVAssetExportSession exportPresetsCompatibleWithAsset:anAsset];
if ([compatiblePresets containsObject:AVAssetExportPresetMediumQuality]) {

    self.exportSession = [[AVAssetExportSession alloc]
                          initWithAsset:anAsset presetName:AVAssetExportPresetPassthrough];
    // Implementation continues.

    NSURL *furl = [NSURL fileURLWithPath:self.tmpVideoPath];

    self.exportSession.outputURL = furl;
    //provide outputFileType acording to video format extension
    self.exportSession.outputFileType = AVFileTypeQuickTimeMovie;

    CMTime start = CMTimeMakeWithSeconds(self.startTime, anAsset.duration.timescale);
    CMTime duration = CMTimeMakeWithSeconds(self.stopTime-self.startTime, anAsset.duration.timescale);
    CMTimeRange range = CMTimeRangeMake(start, duration);
    self.exportSession.timeRange = range;

    self.self.btnTrim.hidden = YES;
    self.myActivityIndicator.hidden = NO;
    [self.myActivityIndicator startAnimating];
    [self.exportSession exportAsynchronouslyWithCompletionHandler:^{

        switch ([self.exportSession status]) {
            case AVAssetExportSessionStatusFailed:
                NSLog(@"Export failed: %@", [[self.exportSession error] localizedDescription]);
                break;
            case AVAssetExportSessionStatusCancelled:
                NSLog(@"Export canceled");
                break;
            default:
                NSLog(@"Triming Completed");
                dispatch_async(dispatch_get_main_queue(), ^{
                    [self.myActivityIndicator stopAnimating];
                    self.myActivityIndicator.hidden = YES;
                });

                break;
        }
    }];

} 
```

# css - 检查css是否加载外部文件

> ID：15311965
> 
> 赞同：0
> 
> 时间：2013-03-09T14:45:57.147
> 
> 标签：css

我正在构建一个工具来按需缩小和编译 CSS 文件。这些文件可以位于不同的文件夹中，如果它们指的是外部文件（图像、其他 css、字体可能？），我需要从它们的原始文件夹中调用它们。

我想知道我应该寻找哪些字符串。我只看到`url(`and `@import`，但我很确定我错过了一些。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T15:13:39.707

我可以想到专有的 CSS：*为该*浏览器**`behavior`**加载`.htc`（`.js`在某些服务器上） 。也作为 存在。 编辑：哎呀，也会使用，不像我之前写的那样......我的错误。前任：*[`-ms-behavior`](http://msdn.microsoft.com/en-us/library/ie/ms530723%28v=vs.85%29.aspx)
`behavior``url()``behavior()`*

 *```
.ie67 * {
  behavior: url('htc/boxsizing.htc');
} 
```

我不认为`filter`/`-ms-filter`可以加载外部资源；它宁愿适用于图像等（如果我错了，请有人纠正我）。

在 CSS2.1 中，外部资源是[URI](http://www.w3.org/TR/CSS21/propidx.html)，所以除了 @import （必须出现在其他任何东西之前）之外，我认为您的列表是完整的。*

# php - 来自另一个键的 YAML 设置值

> ID：15311967
> 
> 赞同：6
> 
> 时间：2013-03-09T14:46:21.880
> 
> 标签：php, symfony, yaml, swiftmailer

如何从另一个键设置 YAML 中的值，例如：

```
example.emails:
     - ben@example.co
     - neb@example.co
     - teb@example.co

swift:
        to_email:   example.emails 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-12-29T07:39:20.430

接受的答案是错误的。由于应用程序特定的原因，它可能对作者有用，但 YAML 规范不支持它。在 yaml 中重用值的正确方法是通过称为锚的东西，像这样

```
x1: &my_anchor
  y: 'my val'
x2:
  <<: *my_anchor
  z: 3 
```

在上面，我们标记了`x1`使用 anchor的值`my_anchor`。然后特殊语法`<<: *my_anchor`告诉 YAML 解析器将节点的子节点（在本例`y`中）插入同一级别。所以`x2`现在会有两个孩子：`y`和`z`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-09T14:53:44.940

哦，找到了答案，只是似乎无法从谷歌找到好的文档：S

```
example.emails: 
     - ben@example.co 
     - neb@example.co 
     - teb@example.co 

swift: 
      to_email: "%example.emails%" 
```

# go - 检查两个切片的相等性

> ID：15311969
> 
> 赞同：374
> 
> 时间：2013-03-09T14:46:38.883
> 
> 标签：go, go-reflect

如何检查两个切片是否相等？

* * *

## 回答 #1

> 赞同：293
> 
> 时间：2013-03-09T15:07:22.440

你应该使用[reflect.DeepEqual()](http://golang.org/pkg/reflect/#DeepEqual)

> DeepEqual 是 Go 的 == 运算符的递归松弛。
> 
> DeepEqual 报告 x 和 y 是否“深度相等”，定义如下。如果以下情况之一适用，则两个相同类型的值非常相等。不同类型的值永远不会完全相等。
> 
> 当对应的元素深度相等时，数组值深度相等。
> 
> 如果结构值的对应字段（导出和未导出）深度相等，则结构值深度相等。
> 
> 如果两者都为零，则 Func 值非常相等；否则他们不是完全平等的。
> 
> 如果接口值具有高度相等的具体值，则它们是高度相等的。
> 
> 如果映射值是相同的映射对象，或者它们具有相同的长度并且它们对应的键（使用 Go 相等匹配）映射到深度相等的值，则映射值是深度相等的。
> 
> 如果指针值使用 Go 的 == 运算符相等或者它们指向深度相等的值，则它们是深度相等的。
> 
> 当满足以下所有条件时，切片值是完全相等的：它们都是 nil 或都非 nil，它们具有相同的长度，或者它们指向同一底层数组的相同初始条目（即 &x[0 ] == &y[0]) 或其对应的元素（直到长度）非常相等。请注意，非 nil 空切片和 nil 切片（例如，[]byte{} 和 []byte(nil)）并不完全相等。
> 
> 如果使用 Go 的 == 运算符相等，则其他值 - 数字、布尔值、字符串和通道 - 是完全相等的。

* * *

## 回答 #2

> 赞同：193
> 
> 时间：2013-03-09T14:58:16.393

您需要遍历切片中的每个元素并进行测试。未定义切片的相等性。但是，`bytes.Equal`如果您要比较 type 的值，则有一个函数`[]byte`。

```
func testEq(a, b []Type) bool {
    if len(a) != len(b) {
        return false
    }
    for i := range a {
        if a[i] != b[i] {
            return false
        }
    }
    return true
} 
```

* * *

## 回答 #3

> 赞同：80
> 
> 时间：2015-10-08T15:46:53.973

这只是使用@VictorDeryagin的答案中给出的[reflect.DeepEqual()的示例。](https://golang.org/pkg/reflect/#DeepEqual)

```
package main

import (
    "fmt"
    "reflect"
)

func main() {
    a := []int {4,5,6}
    b := []int {4,5,6}
    c := []int {4,5,6,7}

    fmt.Println(reflect.DeepEqual(a, b))
    fmt.Println(reflect.DeepEqual(a, c))

} 
```

结果：

```
true
false 
```

[在Go Playground](https://play.golang.org/p/Tka-ANenT_-)中尝试

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2018-01-05T21:10:39.483

如果有两个，请使用[bytes.Equal](https://golang.org/pkg/bytes/#Equal)`[]byte`比较它们。Golang 文档说：

> Equal 返回一个布尔值，报告 a 和 b 是否具有相同的长度并包含相同的字节。一个 nil 参数相当于一个空切片。

用法：

```
package main

import (
    "fmt"
    "bytes"
)

func main() {
    a := []byte {1,2,3}
    b := []byte {1,2,3}
    c := []byte {1,2,2}

    fmt.Println(bytes.Equal(a, b))
    fmt.Println(bytes.Equal(a, c))
} 
```

这将打印

```
true
false 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2019-07-31T10:25:21.480

现在，这里是[https://github.com/google/go-cmp](https://github.com/google/go-cmp)

> 旨在成为`reflect.DeepEqual`比较两个值在语义上是否相等的更强大和更安全的替代方案。

```
package main

import (
    "fmt"

    "github.com/google/go-cmp/cmp"
)

func main() {
    a := []byte{1, 2, 3}
    b := []byte{1, 2, 3}

    fmt.Println(cmp.Equal(a, b)) // true
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-04-18T18:40:11.300

如果您有兴趣编写测试，那么`github.com/stretchr/testify/assert`就是您的朋友。

在文件的最开头导入库：

```
import (
    "github.com/stretchr/testify/assert"
) 
```

然后在你做的测试里面：

```
 func TestEquality_SomeSlice (t * testing.T) {
    a := []int{1, 2}
    b := []int{2, 1}
    assert.Equal(t, a, b)
} 
```

提示的错误将是：

```
 Diff:
                --- Expected
                +++ Actual
                @@ -1,4 +1,4 @@
                 ([]int) (len=2) {
                + (int) 1,
                  (int) 2,
                - (int) 2,
                  (int) 1,
Test:           TestEquality_SomeSlice 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-08-12T16:18:06.653

想到一个巧妙的技巧，并认为我会分享。

如果您有兴趣知道两个切片是否**相同**（即它们为同一数据区域别名）而不是仅仅**相等**（一个切片的每个索引处的值等于另一个切片的相同索引中的值），那么您可以通过以下方式有效地比较它们：

```
foo := []int{1,3,5,7,9,11,13,15,17,19}

// these two slices are exactly identical
subslice1 := foo[3:][:4]
subslice2 := foo[:7][3:]

slicesEqual := &subslice1[0]  == &subslice2[0]   && 
               len(subslice1) == len(subslice2) 
```

这种比较有一些注意事项，特别是您不能以这种方式比较空切片，并且切片的容量没有进行比较，因此这种“相同性”属性仅在从切片读取时才真正有用或重新切分严格较窄的子切片，因为任何增加切片的尝试都会受到切片容量的影响。尽管如此，能够有效地声明“这两个巨大的内存块实际上是同一个块，是或否”是非常有用的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-03-04T10:04:40.840

您不能使用`==`或`!=`与切片一起使用，但如果您可以将它们与元素一起使用，那么这个问题[https://github.com/golang/go/issues/45955](https://github.com/golang/go/issues/45955)显示了一个新功能，可以轻松比较两个切片`slices.Equal`：

```
// Equal reports whether two slices are equal: the same length and all
// elements equal. If the lengths are different, Equal returns false.
// Otherwise, the elements are compared in index order, and the
// comparison stops at the first unequal pair.
// Floating point NaNs are not considered equal.
func Equal[E comparable](s1, s2 []E) bool 
```

包`slices`导入路径为[golang.org/x/exp/slices](https://pkg.go.dev/golang.org/x/exp/slices)。包下的代码`exp`是*实验性*的，还不稳定。它可以在 Go 1.19 中升级为标准库。

不过你可以在 Go 1.18 中使用它，[https: //go.dev/play/p/QEdoEuYNTlD?v=gotip](https://go.dev/play/p/QEdoEuYNTlD?v=gotip)

```
 sliceA := []int{1, 2}
    sliceB := []int{1, 2}
    equal := slices.Equal(sliceA, sliceB)
    fmt.Println(equal)

    type data struct {
        num   float64
        label string
    }

    sliceC := []data{{10.99, "toy"}, {500.49, "phone"}}
    sliceD := []data{{10.99, "toy"}, {200.0, "phone"}}
    equal = slices.Equal(sliceC, sliceD)
    fmt.Println(equal) 
```

如果切片的元素不允许`==`and `!=`，您可以使用`slices.EqualFunc`.

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2022-03-05T12:52:06.573

您可以`actual`在与排序后的切片进行比较之前对切片进行排序`expected`：

```
func TestEquality_SomeSlice(t *testing.T) {
    expected := []int{1, 2, 3, 4}
    actual := []int{2, 1, 4, 3}

    sort.Slice(actual, func(i, j int) bool {
        return actual[i] < actual[j]
    })

    assert.Equal(t, expected, actual)
} 
```

# javascript - 将多个文件转换为 HTML（来自 Markdown）？

> ID：15311978
> 
> 赞同：1
> 
> 时间：2013-03-09T14:47:44.350
> 
> 标签：javascript, html, markdown

我目前正在做一个小项目，我想将几​​个（或更多）Markdown 文件转换为 HTML，然后将它们附加到主文档中。我希望这一切都发生在客户端。我选择了几个插件，例如[Showdown](https://github.com/coreyti/showdown)（Markdown 到 HTML 转换器）、jQuery（整体 DOM 操作）和 Underscore（必要时用于简单模板）。我被困在我似乎无法将文件转换为 HTML 的地方（转换为其中包含 HTML 的字符串）。

将 Markdown 转换为 HTML 很简单：

```
var converter = new Showdown.converter();
converter.makeHtml('#hello markdown!'); 
```

我不确定如何将文件获取（下载）到代码（字符串？）中。

如何从 URL 中获取文件（该 URL 是 Markdown 文件），通过 Showdown 传递它，然后获取 HTML 字符串？*顺便说一句，我只使用 JavaScript。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T14:56:51.330

您可以获取一个外部文件并使用 ajax 将其解析为字符串。jQuery 方式更简洁，但原生 JS 版本可能看起来像这样：

```
var mdFile = new XMLHttpRequest();
mdFile.open("GET", "http://mypath/myFile.md", true);
mdFile.onreadystatechange = function(){
 // Makes sure the document exists and is ready to parse.
 if (mdFile.readyState === 4 && mdFile.status === 200)   
 {
    var mdText = mdFile.responseText; 
    var converter = new showdown.Converter();
    converter.makeHtml(mdText);
    //Do whatever you want to do with the HTML text
 }
} 
```

jQuery方法：

```
$.ajax({
  url: "info.md",
  context: document.body,
  success: function(mdText){
    //where text will be the text returned by the ajax call
    var converter = new showdown.Converter();
    var htmlText = converter.makeHtml(mdText);
    $(".outputDiv").append(htmlText); //append this to a div with class outputDiv
  }
}); 
```

注意：这假设您要解析的文件在您自己的服务器上。如果文件在客户端（IE 用户文件），您需要采取不同的方法

### 更新

如果您想要的文件与您在同一台服务器上，上述方法将起作用。如果不是，那么如果您控制远程服务器，则必须研究 CORS，如果不控制，则必须研究服务器端解决方案。 [这个问题](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)提供了有关跨域请求的一些相关背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:02:00.167

一旦你有了 HTML 字符串，你可以通过简单地调用来追加到任何你想要的 DOM 元素：

```
var myElement = document.getElementById('myElement');
myElement.innerHTML += markdownHTML; 
```

...markdownHTML 是从 makeHTML 返回的 html。

# iphone - 来自其他 UIViewController 的 NSString 为空

> ID：15311981
> 
> 赞同：1
> 
> 时间：2013-03-09T14:47:51.577
> 
> 标签：iphone, ios, objective-c, uiviewcontroller

谁能向我解释为什么这不起作用？我认为这是一个非常简单的问题，但由于某种原因我没有得到它。

我的问题：我的 firstViewController 中有一个值为“Hello！”的 NSString。现在我想在我的 secondViewController 中显示这个值，但输出为空。

这是我的 NSLog

```
2013-03-09  foo[95381:c07] value of foo in BITfirstViewcontroller: Hello!
2013-03-09  foo[95381:c07] value of foo in BITsecondViewcontroller: (null) 
```

BITAppDelegate.m

```
#import "BITAppDelegate.h"
#import "BITfirstViewController.h"

@implementation BITAppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    BITfirstViewController *fvc = [[BITfirstViewController alloc]init];

    // Create navigationController and set InputViewController as root for navController
    UINavigationController *navController = [[UINavigationController alloc]initWithRootViewController:fvc];

    [self.window setRootViewController:navController];

    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

BITfirstViewController.h

```
#import <UIKit/UIKit.h>

@interface BITfirstViewController : UIViewController

@property (strong, nonatomic) NSString *foo;

-(IBAction)showSecondView:(id)sender;

@end 
```

BITfirstViewController.m

```
#import "BITfirstViewController.h"
#import "BITsecondViewController.h"

@interface BITfirstViewController ()

@end

@implementation BITfirstViewController

@synthesize foo;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        foo = [NSString stringWithFormat:@"Hello!"];
        NSLog(@"value of foo in BITfirstViewcontroller: %@",foo);

    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button addTarget:self
               action:@selector(showSecondView:)
     forControlEvents:UIControlEventTouchDown];
    [button setTitle:@"Show View" forState:UIControlStateNormal];
    button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
    [self.view addSubview:button];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(IBAction)showSecondView:(id)sender;
{

    BITsecondViewController *svc = [[BITsecondViewController alloc]init];
    [self.navigationController pushViewController:svc animated:YES];
}

@end 
```

BITsecondViewController.h

```
#import <UIKit/UIKit.h>

@class BITfirstViewController;

@interface BITsecondViewController : UIViewController

@property (nonatomic, retain) BITfirstViewController *fvc;

@end 
```

BITsecondViewController.m

```
#import "BITsecondViewController.h"
#import "BITfirstViewController.h"

@interface BITsecondViewController ()

@end

@implementation BITsecondViewController

@synthesize fvc;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization

    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    NSLog(@"value of foo in BITsecondViewcontroller: %@", fvc.foo);

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
} 
```

@结尾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:51:58.747

在 BITfirstViewController.m 中试试这个

```
-(IBAction)showSecondView:(id)sender;
{

    BITsecondViewController *svc = [[BITsecondViewController alloc]init];
    svc.fvc = self;  // you need to set this property as you prepare the svc
    [self.navigationController pushViewController:svc animated:YES];
} 
```

编辑：

您的`fvc`and`svc`是封装的，除了使用属性（至少这是我们尝试在 OOP 中做事的方式）之外，没有关于彼此的直接知识。`@property`所以，你在你的中创建一个是正确的，`svc`它允许你拥有你的句柄`fvc`，但`[[BITsecondViewController alloc]init]`只会将该指针初始化为`nil`. 然后您需要将该属性设置为指向预期的对象，在本例中为`fvc`. 由于`svc`是从 的实例内部构建的`BITFirstViewController`，因此要传入的正确句柄是`self`。

# git - 单个文件的 git diff

> ID：15311994
> 
> 赞同：1
> 
> 时间：2013-03-09T14:48:54.697
> 
> 标签：git

`git log proto.php`将列出 proto.php 的所有提交

是否有一个命令不仅会显示该文件的提交消息，还会显示所有提交的所有差异？一种单一文件的完整差异历史。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T14:50:29.003

`git log -p proto.php`

您可以只阅读手册，但我很乐意接受代表点。

# android - 在三星设备中运行 android 应用程序

> ID：15311995
> 
> 赞同：0
> 
> 时间：2013-03-09T14:49:05.410
> 
> 标签：android

环境：

*   我的系统操作系统是 Windows XP
*   IDE是eclipse juno
*   USB连接器是诺基亚

现在我想在设备中运行 android 应用程序。为此，我遵循以下命令

1）亚行杀死服务器

2）亚行启动服务器

3）亚行设备

但它没有在附加设备列表中显示设备名称，它只显示模拟器。你能给我一些建议来解决我的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T14:50:53.087

转到设置-> 应用程序-> 开发。

检查 USB 调试。

并在您的 PC 中安装驱动程序和 Kies 三星软件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-09T15:25:04.277

如果你在 linux 环境下开发，则不需要驱动程序。如果您不愿意放弃 Windows，请尝试双启动或启动[实时发行版。](http://en.wikipedia.org/wiki/List_of_live_CDs)

# javascript - Socket.io 错误：无法从“root”要求“socket.io”

> ID：15311996
> 
> 赞同：3
> 
> 时间：2013-03-09T14:49:09.167
> 
> 标签：javascript, websocket, socket.io

socket.io 的服务器端部分有效，但如果我尝试[从此处](http://socket.io/#home)运行客户端示例脚本，则会收到错误消息：`Error: failed to require "socket.io" from "root"`

我也下载了客户端库：[https](https://github.com/LearnBoost/socket.io-client)
://github.com/LearnBoost/socket.io-client我不知道错误是什么。我希望有人知道答案。

谢谢提前，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T22:34:51.357

啊，我刚刚犯了你做的同样的错误，并且得到了答案。显然，您实际上并不需要单独下载 socket.io-client.js。通过自己包含客户端脚本，您可以防止它访问根目录中所需的其余资源，这会引发您看到的错误。

诀窍在于，当您运行服务器端模块时，它会为前端公开文件“/socket.io/socket.io”。因此，无论您的静态路由器如何配置，只需像这样包含该路径：

```
<script src="/socket.io/socket.io.js"></script> 
```